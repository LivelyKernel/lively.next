System.register(["./__rootModule___commonjs-entry-51a55f66.js","./ui.cp-8dfc076f.js","./editor-modes-aae4d878.js"],function(bd,Dd){var se,Rc,ad,Ne,Cb,Sd,ve,uc,dd,vd,Ed,fe,jc,Od,qb,ic,Wb,lc;return{setters:[function(db){se=db.d;Rc=db.aF;ad=db.t;Ne=db.am;Cb=db.br;Sd=db.i;ve=db.K;uc=db.m;dd=db._;vd=db.s;Ed=db.a;fe=db.aK;jc=db.ar},function(db){Od=db.s},function(db){qb=db.passIndent;ic=db.defineMode;Wb=db.defineMIME;lc=db.registerHelper}],execute:function(){var db=window.lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js");
db.addIndexToTextPos=function(fa,Db,ab){return fa.indexToPosition(fa.positionToIndex(Db)+ab)};db.connect=se;db.disconnect=Rc;db.string=ad;db.KeyHandler=Ne;db.Range=Cb;var Xa=bd("S",function(fa){var Db=window.lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js"),ab=Db.hasOwnProperty("Snippet")&&"function"===typeof Db.Snippet?Db.Snippet:Db.Snippet=function(eb){if(!eb||!eb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};
return Sd(ab,fa,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var eb=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{trigger:null,expansion:""},kc=eb.expansion;this.trigger=eb.trigger;this.expansion=kc;this.resetExpansionState()}},{key:"isTextSnippet",get:function(){return!0}},{key:"attach",value:function(eb){this.isExpanding&&(this.textMorph=eb,db.connect(this.textMorph,"selectionChange",this,"onCursorMove"))}},{key:"detach",value:function(eb){this.isExpanding&&(db.disconnect(eb,
"selectionChange",this,"onCursorMove"),this.textMorph=null)}},{key:"onCursorMove",value:function(){var eb=this.expansionState,kc=eb.startAnchor,Vb=eb.endAnchor;eb.isExpanding?db.Range.fromPositions(kc.position,Vb.position).containsPosition(this.textMorph.cursorPosition)||this.resetExpansionState():this.resetExpansionState()}},{key:"resetExpansionState",value:function(){var eb=this.textMorph;if(eb){var kc=this.expansionState||{},Vb=kc.marker,pb=kc.startAnchor,Nb=kc.endAnchor;kc=kc.steps;pb&&eb.removeAnchor(pb);
Nb&&eb.removeAnchor(Nb);Vb&&eb.removeMarker(Vb);kc.forEach(function(zb){return eb.removeAnchor(zb.anchor)})}this.expansionState={stepIndex:-1,steps:[],isExpanding:!1,startMarker:null,endMarker:null};eb&&eb.removePlugin(this)}},{key:"isExpanding",get:function(){return this.expansionState.isExpanding}},{key:"createExpansionSteps",value:function(eb){var kc=[],Vb=0;db.string.reMatches(eb,/\$[0-9]+|\$\{[0-9]+:[^\}]*\}/g).forEach(function(pb){var Nb=pb.start,zb=pb.end;pb=pb.match;var rb="";pb.startsWith("${")?
(pb=pb.match(/^\$\{([0-9]+):([^\}]*)\}/),pb=ve(pb,3),pb[0],rb=pb[2],pb=Number(pb[1])):pb=Number(pb.replace(/^\$/,""));eb=eb.slice(0,Nb-Vb)+rb+eb.slice(zb-Vb);kc[pb]={index:Nb-Vb,prefill:rb,anchor:null};Vb+=zb-Nb-rb.length});return{steps:kc,expansion:eb}}},{key:"expandAtCursor",value:function(eb){var kc=eb.selection;"function"===typeof this.expansion&&(this.expansion=this.expansion(eb.document.textInRange({start:eb.cursorPosition,end:eb.document.endPosition})));var Vb=eb.cursorPosition.column,pb=this.expansion;
this.trigger&&(Vb-=this.trigger.length);if(Vb=Math.max(0,Vb))pb=db.string.lines(pb),pb=[pb[0]].concat(uc(pb.slice(1).map(function(ka){return db.string.indent(ka," ",Vb)}))),pb=pb.join("\n");var Nb=this.createExpansionSteps(pb);pb=Nb.expansion;Nb=Nb.steps;this.trigger&&kc.growLeft(this.trigger.length);kc.text=pb;var zb=kc.start;pb=kc.end;kc.collapseToEnd();if(Nb.length){var rb=db.string.newUUID();Nb.forEach(function(ka,va){return ka.anchor=eb.addAnchor(Object.assign({id:"snippet-step-".concat(va,"-")+
rb},db.addIndexToTextPos(eb,zb,ka.index)))});var Ib=eb.addAnchor(Object.assign({id:"snippet-start-"+rb},zb,{insertBehavior:"stay"})),da=eb.addAnchor(Object.assign({id:"snippet-end-"+rb},pb));this.expansionState={marker:eb.addMarker({id:"snippet-marker-"+rb,get range(){return{start:Ib.position,end:da.position}},style:{"border-radius":"4px","background-color":"rgba(30, 200, 140, 0.3)","box-shadow":"0 0 4px rgba(30, 200, 140, 0.3)","pointer-events":"none",content:"fooooo"}}),startAnchor:Ib,endAnchor:da,
stepIndex:0,steps:Nb,isExpanding:!0};eb.addPlugin(this);this.nextStep()}}},{key:"nextStep",value:function(){var eb=this.expansionState,kc=eb.steps,Vb=this.textMorph;if(eb.isExpanding&&Vb){Vb=Vb.selection;eb=kc[eb.stepIndex];var pb=eb.prefill;Vb.lead=Vb.anchor=eb.anchor.position;Vb.growRight(pb.length);this.expansionState.stepIndex++;this.expansionState.stepIndex>=kc.length&&(this.resetExpansionState(),console.log("[snippet] expansion of ".concat(this.expansion," done")))}}},{key:"canExpand",value:function(eb){1<
arguments.length&&void 0!==arguments[1]?arguments[1]:eb.cursorPosition;var kc=eb.positionToIndex(eb.cursorPosition);return eb.textString.slice(kc-this.trigger.length,kc)===this.trigger}},{key:"tryTrigger",value:function(eb){1<arguments.length&&void 0!==arguments[1]?arguments[1]:eb.cursorPosition;if(!this.canExpand(eb,eb.cursorPosition))return!1;this.expandAtCursor(eb);return!0}},{key:"getCommands",value:function(eb){var kc=this;return eb.concat([{name:"[snippet] next expansion step",exec:function(Vb){kc.nextStep();
return!0}},{name:"[snippet] cancel expansion",exec:function(Vb){kc.resetExpansionState();return!0}}])}},{key:"getKeyHandlers",value:function(eb){return eb.concat(db.KeyHandler.withBindings([{keys:"Tab",command:"[snippet] next expansion step"},{keys:"Escape",command:"[snippet] cancel expansion"}]))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Snippet"}}],Db,{pathInPackage:function(){return"./text/snippets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:356,end:7245})}(void 0));db.Snippet=Xa;db.Snippet=Xa;var Gb=[{name:"get snippets",exec:function(fa){return fa.pluginCollect("getSnippets",[])}}];db.snippetCommands=Gb;db.snippetCommands=Gb;var sc=window.lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js");sc.buildEvalOpts=function(fa,Db){return fa.plugins.find(function(ab){return ab.isJSEditorPlugin}).sanatizedJsEnv(Db)};
sc.Snippet=Xa;Xa=function(fa){var Db=window.lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),ab=Db.hasOwnProperty("ModuleTopLevelVarCompleter")&&"function"===typeof Db.ModuleTopLevelVarCompleter?Db.ModuleTopLevelVarCompleter:Db.ModuleTopLevelVarCompleter=function(eb){if(!eb||!eb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Sd(ab,fa,[{key:"compute",value:function(){var eb=dd(regeneratorRuntime.mark(function Nb(Vb,
pb){var zb,rb,Ib,da,ka,va;return regeneratorRuntime.wrap(function(Fa){for(;;)switch(Fa.prev=Fa.next){case 0:if(rb=(zb=Vb.pluginFind(function(M){return M.isJSEditorPlugin}))&&zb.systemInterface()){Fa.next=4;break}return Fa.abrupt("return",[]);case 4:Ib=sc.buildEvalOpts(Vb);da=Ib.targetModule;if("local"===rb.name){Fa.next=15;break}Fa.next=9;return rb.runEval('\n        var result, livelySystem = typeof System !== "undefined"\n                      && System.get(System.decanonicalize("lively-system-interface"));\n        if (livelySystem) {\n          result = JSON.stringify(\n            Object.getOwnPropertyNames(livelySystem.localInterface.getModule("'.concat(da,
'").recorder));\n        } else {\n          var G = typeof window !== "undefined" ?\n            window : typeof global !== "undefined" ? global : this;\n          result = JSON.stringify(Object.getOwnPropertyNames(G));\n        }\n        result;\n      '),{targetModule:"lively://module-recorder-completer"});case 9:va=Fa.sent;if(!va.isError){Fa.next=12;break}return Fa.abrupt("return",[]);case 12:ka=JSON.parse(va.value);Fa.next=16;break;case 15:ka=Object.getOwnPropertyNames(rb.getModule(da).recorder);
case 16:return ka=ka.filter(function(M){return!M.startsWith("defVar_")&&!["System","__currentLivelyModule","initializeES6ClassForLively","_moduleExport","_moduleImport"].includes(M)}),Fa.abrupt("return",ka.map(function(M){return{priority:1100,completion:M}}));case 19:case "end":return Fa.stop()}},Nb)}));return function(Vb,pb){return eb.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ModuleTopLevelVarCompleter"}}],Db,{pathInPackage:function(){return"./js/completers.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:226,end:1705})}(void 0);sc.ModuleTopLevelVarCompleter=Xa;sc.ModuleTopLevelVarCompleter=Xa;Xa=function(fa){var Db=window.lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),ab=Db.hasOwnProperty("DynamicJavaScriptCompleter")&&"function"===typeof Db.DynamicJavaScriptCompleter?
Db.DynamicJavaScriptCompleter:Db.DynamicJavaScriptCompleter=function(eb){if(!eb||!eb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Sd(ab,fa,[{key:"isValidPrefix",value:function(eb){return/\.[a-z0-9_]*$/i.test(eb)}},{key:"isMethodCallCompletion",value:function(eb){return eb.endsWith(")")&&0<eb.indexOf("(")}},{key:"isValidIdentifier",value:function(eb){if("string"!==typeof eb)return!1;this.isMethodCallCompletion(eb)&&
(eb=eb.slice(0,eb.indexOf("(")));return/^[a-z_\$][0-9a-z_\$]*$/i.test(eb)?!0:!1}},{key:"wrapInBrackets",value:function(eb){if(!isNaN(Number(eb))||eb.startsWith("Symbol."))return"[".concat(eb,"]");var kc="";this.isMethodCallCompletion(eb)&&(kc=eb.slice(eb.indexOf("(")),eb=eb.slice(0,eb.indexOf("(")));return'["'.concat(eb.replace(/"/g,'\\"'),'"]').concat(kc)}},{key:"compute",value:function(){var eb=dd(regeneratorRuntime.mark(function pb(Vb){var Nb=this,zb,rb,Ib,da,ka,va,Fa,M,Aa,wb,Na;return regeneratorRuntime.wrap(function(hb){for(;;)switch(hb.prev=
hb.next){case 0:zb=Vb.selection;zb.isEmpty()?(rb=Vb.getLine(zb.lead.row),rb=rb.slice(rb.lastIndexOf(":")+1,zb.lead.column)):rb=zb.text.slice(Math.max(0,zb.text.indexOf(":")),0);if(this.isValidPrefix(rb)){hb.next=4;break}return hb.abrupt("return",[]);case 4:if(da=(Ib=Vb.pluginFind(function(Bb){return Bb.isJSEditorPlugin}))&&Ib.systemInterface()){hb.next=8;break}return hb.abrupt("return",[]);case 8:return ka=sc.buildEvalOpts(Vb),hb.next=11,da.dynamicCompletionsForPrefix(ka.targetModule,rb,ka);case 11:va=
hb.sent;Fa=va.isError;M=va.value;Aa=va.completions;wb=va.prefix;if(!Fa){hb.next=19;break}console.warn("javascript completer encountered error: ".concat(M.stack||M));return hb.abrupt("return",[]);case 19:return Aa.reduce(function(Bb,ba){ba=ve(ba,2);ba[0];return Bb+ba[1].length},0),Na=Aa.reduce(function(Bb,ba,dc){ba=ve(ba,2);var la=ba[0];return Bb.concat(ba[1].map(function(Fb){var vb=Nb.isValidIdentifier(Fb);return{info:la,completion:Fb,prefix:vb?wb:"."+wb,customInsertionFn:vb?Nb.isMethodCallCompletion(Fb)?
function(Ia,xb,Rb,yc){xb=yc.start;yc=yc.end;Ia=Ia.replace(/\((.*)\)/,function(id){return"(".concat(id.slice(1,-1).split(", ").map(function(ob,Pb){return"${".concat(Pb,":").concat(ob,"}")}).join(", "),")")});Ia=new sc.Snippet({expansion:Ia});Rb.replace({start:xb,end:yc},"");Ia.expandAtCursor(Rb)}:null:function(Ia,xb,Rb,yc){Ia=yc.start;yc=yc.end;xb={row:Ia.row,column:Ia.column-1};yc="."===Rb.textInRange({start:xb,end:Ia})?{start:xb,end:yc}:{start:Ia,end:yc};Rb.replace(yc,Nb.wrapInBrackets(Fb))}}}))},
[]),Na.forEach(function(Bb,ba){return Object.assign(Bb,{priority:2E3+Na.length-ba})}),hb.abrupt("return",Na);case 24:case "end":return hb.stop()}},pb,this)}));return function(Vb){return eb.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DynamicJavaScriptCompleter"}}],Db,{pathInPackage:function(){return"./js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1713,end:5202})}(void 0);sc.DynamicJavaScriptCompleter=Xa;sc.DynamicJavaScriptCompleter=Xa;sc.keywords="arguments boolean break case catch class const continue debugger default delete eval export import extends false true finally instanceof static super this throw typeof while with yield await Array Date eval function hasOwnProperty Infinity isFinite isNaN isPrototypeOf length Math NaN name Number Object prototype String toString undefined valueOf alert assign clearInterval clearTimeout decodeURI decodeURIComponent document encodeURI encodeURIComponent escape navigator parseFloat parseInt setInterval setTimeout window document requestAnimationFrame cancelAnimationFrame".split(" ");
Xa=function(fa){var Db=window.lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),ab=Db.hasOwnProperty("JavaScriptKeywordCompleter")&&"function"===typeof Db.JavaScriptKeywordCompleter?Db.JavaScriptKeywordCompleter:Db.JavaScriptKeywordCompleter=function(eb){if(!eb||!eb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Sd(ab,fa,[{key:"compute",value:function(eb,kc){return sc.keywords.map(function(Vb){return{completion:Vb,
priority:0}})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"JavaScriptKeywordCompleter"}}],Db,{pathInPackage:function(){return"./js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6064,end:6218})}(void 0);sc.JavaScriptKeywordCompleter=Xa;sc.JavaScriptKeywordCompleter=Xa;Xa=bd("c",[new sc.DynamicJavaScriptCompleter,
new sc.JavaScriptKeywordCompleter,new sc.ModuleTopLevelVarCompleter]);sc.completers=Xa;sc.completers=Xa;var ub=window.lively.FreezerRuntime.recorderFor("lively.ide/js/commands.js");ub.setEvalEnv=function(fa,Db){(fa=fa.pluginFind(function(ab){return ab.isJSEditorPlugin}))&&Object.assign(fa.evalEnvironment,Db);return fa.evalEnvironment};ub.iToP=function(fa,Db){return fa.indexToPosition(Db)};ub.arr=vd;ub.promise=Ed;ub.show=Od;ub.Range=Cb;ub.query=fe;Xa=bd("a",[{name:"undefine variable",doc:"Finds the variable at cursor position (or position passed) and undefines it in the module toplevel scope.",
exec:function(){var fa=dd(regeneratorRuntime.mark(function eb(ab){var kc,Vb,pb,Nb,zb,rb,Ib,da,ka,va,Fa=arguments;return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:Vb=kc=1<Fa.length&&void 0!==Fa[1]?Fa[1]:{varName:null,position:null};pb=Vb.varName;Nb=Vb.position;if(pb){M.next=11;break}Nb||(Nb=ab.cursorPosition);zb=ab.pluginInvokeFirst("getNavigator");rb=zb.ensureAST(ab);if(Ib=ub.query.nodesAt(ab.positionToIndex(Nb),rb).reverse().find(function(Aa){return"Identifier"===Aa.type})){M.next=
10;break}ab.showError(Error("no identifier found!"));return M.abrupt("return",!0);case 10:pb=Ib.name;case 11:return kc=ab.pluginFind(function(Aa){return Aa.isJSEditorPlugin}).sanatizedJsEnv(),da='lively.modules.module("'.concat(kc.targetModule,'").undefine("').concat(pb,'")'),M.prev=13,M.next=16,ab.doEval(null,kc,da);case 16:ka=M.sent;va=ka.error?ka.error:ka.isError?ka.value:null;M.next=23;break;case 20:M.prev=20,M.t0=M["catch"](13),va=M.t0;case 23:return va?ab.showError(va):ab.setStatusMessage("".concat(pb,
" undefined")),M.abrupt("return",!0);case 25:case "end":return M.stop()}},eb,null,[[13,20]])}));return function(ab){return fa.apply(this,arguments)}}()},{name:"change doitContext",exec:function(){var fa=dd(regeneratorRuntime.mark(function eb(ab){var kc,Vb,pb,Nb;return regeneratorRuntime.wrap(function(zb){for(;;)switch(zb.prev=zb.next){case 0:return zb.next=2,ab.world().execCommand("select morph",{prompt:"select morph for doitContext",justReturn:!0,prependItems:["reset"],filterFn:function(rb){return!rb.isUsedAsEpiMorph()}});
case 2:kc=zb.sent;Vb=ve(kc,1);if(pb=Vb[0])Nb="reset"===pb,ab.doitContext=Nb?null:pb,ab.setStatusMessage(Nb?"doitContext is now\n"+pb:"doitContext reset");return zb.abrupt("return",!0);case 7:case "end":return zb.stop()}},eb)}));return function(ab){return fa.apply(this,arguments)}}()},{name:"change eval backend",exec:function(){var fa=dd(regeneratorRuntime.mark(function eb(ab){var kc,Vb,pb=arguments;return regeneratorRuntime.wrap(function(Nb){for(;;)switch(Nb.prev=Nb.next){case 0:kc=1<pb.length&&void 0!==
pb[1]?pb[1]:{backend:void 0};Vb=kc.backend;if(void 0!==Vb){Nb.next=9;break}Nb.next=5;return ab.world().prompt("choose eval backend",{historyId:"js-eval-backend-history"});case 5:if(Vb=Nb.sent){Nb.next=9;break}ab.setStatusMessage("Canceled");return Nb.abrupt("return",!0);case 9:return"local"===Vb&&(Vb=null),ab.setStatusMessage("Eval backend is now ".concat(Vb||"local")),Nb.abrupt("return",ub.setEvalEnv(ab,{remote:Vb}));case 12:case "end":return Nb.stop()}},eb)}));return function(ab){return fa.apply(this,
arguments)}}()},{name:"copy current module name to clipboard",exec:function(fa){var Db=fa.evalEnvironment.targetModule;fa.setStatusMessage(Db||"Cannot find module name");fa.env.eventDispatcher.killRing.add(fa);fa.env.eventDispatcher.doCopy(Db);return!0}}]);ub.jsEditorCommands=Xa;ub.jsEditorCommands=Xa;Xa=bd("j",[{name:"[javascript] list errors and warnings",exec:function(){var fa=dd(regeneratorRuntime.mark(function eb(ab){var kc,Vb,pb,Nb,zb;return regeneratorRuntime.wrap(function(rb){for(;;)switch(rb.prev=
rb.next){case 0:kc=(ab.markers||[]).filter(function(Ib){Ib=Ib.type;return"js-undeclared-var"===Ib||"js-syntax-error"===Ib});if(kc.length){rb.next=4;break}ub.show("no warnings or errors");return rb.abrupt("return",!0);case 4:return Vb=kc.map(function(Ib){var da=Ib.range;return{isListItem:!0,string:"[".concat(Ib.type.split("-").slice(1).join(" "),"] ").concat(ab.textInRange(da)),value:da}}),rb.next=7,ab.world().filterableListPrompt("jump to warning or error",Vb);case 7:pb=rb.sent;Nb=ve(pb.selected,
1);if(zb=Nb[0])ab.saveMark(),ab.selection=zb,ab.centerRow(zb.start.row);return rb.abrupt("return",!0);case 12:case "end":return rb.stop()}},eb)}));return function(ab){return fa.apply(this,arguments)}}()},{name:"[javascript] inject import",exec:function(){var fa=dd(regeneratorRuntime.mark(function eb(ab){var kc,Vb,pb,Nb,zb=arguments;return regeneratorRuntime.wrap(function(rb){for(;;)switch(rb.prev=rb.next){case 0:return kc=1<zb.length&&void 0!==zb[1]?zb[1]:{gotoImport:!1,insertImportAtCursor:!0},rb.next=
3,ub.promise.delay(0);case 3:return rb.next=5,Dd.import("./import-helper-5edccc49.js");case 5:return Vb=rb.sent,pb=Vb.interactivelyInjectImportIntoText,rb.next=9,pb(ab,kc);case 9:return(Nb=rb.sent)||ab.setStatusMessage("canceled"),rb.abrupt("return",Nb);case 12:case "end":return rb.stop()}},eb)}));return function(ab){return fa.apply(this,arguments)}}()},{name:"[javascript] fix undeclared variables",exec:function(){var fa=dd(regeneratorRuntime.mark(function eb(ab){var kc,Vb,pb,Nb,zb=arguments;return regeneratorRuntime.wrap(function(rb){for(;;)switch(rb.prev=
rb.next){case 0:return kc=1<zb.length&&void 0!==zb[1]?zb[1]:{ignore:[],autoApplyIfSingleChoice:!1,requester:ab},rb.next=3,Dd.import("./import-helper-5edccc49.js");case 3:return Vb=rb.sent,pb=Vb.interactivlyFixUndeclaredVariables,rb.next=7,pb(ab,kc);case 7:return Nb=rb.sent,ab.focus(),rb.abrupt("return",Nb);case 10:case "end":return rb.stop()}},eb)}));return function(ab){return fa.apply(this,arguments)}}()},{name:"[javascript] remove unused imports",exec:function(){var fa=dd(regeneratorRuntime.mark(function eb(ab){var kc,
Vb,pb,Nb,zb=arguments;return regeneratorRuntime.wrap(function(rb){for(;;)switch(rb.prev=rb.next){case 0:return kc=1<zb.length&&void 0!==zb[1]?zb[1]:{query:!0},rb.next=3,Dd.import("./import-helper-5edccc49.js");case 3:return Vb=rb.sent,pb=Vb.cleanupUnusedImports,rb.next=7,pb(ab,kc);case 7:return Nb=rb.sent,ab.setStatusMessage(Nb),rb.abrupt("return",!0);case 10:case "end":return rb.stop()}},eb)}));return function(ab){return fa.apply(this,arguments)}}()}]);ub.jsIdeCommands=Xa;ub.jsIdeCommands=Xa;Xa=
bd("b",[{name:"selectDefinition",readOnly:!0,bindKey:"Alt-.",exec:function(fa,Db){Db=fa.pluginInvokeFirst("getNavigator");if(!Db)return!0;Db=Db.resolveIdentifierAt(fa,fa.cursorPosition);if(!Db||!Db.id)return ub.show("No symbol identifier selected"),!0;if(!Db.decl)return ub.show("Cannot find declaration of "+Db.name),!0;fa.saveMark();fa.selection={start:fa.indexToPosition(Db.decl.start),end:fa.indexToPosition(Db.decl.end)};fa.scrollCursorIntoView();return!0}},{name:"selectSymbolReferenceOrDeclarationNext",
readOnly:!0,multiSelectAction:"single",exec:function(fa){fa.execCommand("selectSymbolReferenceOrDeclaration",{direction:"next"})}},{name:"selectSymbolReferenceOrDeclarationPrev",readOnly:!0,multiSelectAction:"single",exec:function(fa){fa.execCommand("selectSymbolReferenceOrDeclaration",{direction:"prev"})}},{name:"selectSymbolReferenceOrDeclaration",doc:"Finds the name of the currently selected symbol and will use the JS ast to select references and declarations whose name matches the symbol in the current scope.",
readOnly:!0,multiSelectAction:"single",exec:function(fa){var Db=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{direction:null},ab=fa.pluginInvokeFirst("getNavigator");if(!ab)return!0;ab=ab.resolveIdentifierAt(fa,fa.cursorPosition);if(!ab||!ab.refs)return ub.show("No symbol identifier selected"),!0;var eb=fa.selection;ab=ab.refs.map(function(Vb){var pb=Vb.end;return ub.Range.fromPositions(ub.iToP(fa,Vb.start),ub.iToP(fa,pb))}).concat(ab.decl?ub.Range.fromPositions(ub.iToP(fa,ab.decl.start),
ub.iToP(fa,ab.decl.end)):[]).sort(ub.Range.compare);if(!ab.length)return!0;var kc=ab.map(String).indexOf(String(eb.range));if("next"===Db.direction||"prev"===Db.direction)-1===kc&&ab.length?ab=[ab[0]]:(Db=kc+("next"===Db.direction?1:-1),0>Db?Db=ab.length-1:Db>=ab.length&&(Db=0),ab=[ab[Db]]);ab.forEach(function(Vb){var pb=eb.selections.findIndex(function(zb){return zb.range.equals(Vb)}),Nb=eb.selections.length-1;-1<pb?ub.arr.swap(eb.selections,pb,Nb):eb.addRange(Vb,!1)});eb.mergeSelections();return!0}}]);
ub.astEditorCommands=Xa;ub.astEditorCommands=Xa;lively.modules&&!lively.FreezerRuntime&&lively.modules.module("lively.ide/js/editor-plugin.js").reload({reloadDeps:!1,resetEnv:!1});var sb=window.lively.FreezerRuntime.recorderFor("lively.ide/js/mode.js");sb.expressionAllowed=function(fa,Db,ab){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(Db.lastType)||"quasi"==Db.lastType&&/\{\s*$/.test(fa.string.slice(0,fa.pos-(ab||0)))};sb.passIndent=qb;sb.defineMode=ic;sb.defineMIME=
Wb;sb.registerHelper=lc;sb.defaultConfig={indentUnit:2};sb.defaultParserConfig={name:"javascript",statementIndent:2,jsonld:!1,json:!1,typescript:!1,wordCharacters:/[\w$\xa1-\uffff]/,globalVars:[],localVars:[],doubleIndentSwitch:null};sb.defineMode("javascript",function(fa,Db){function ab(Sb,Hd,hf){ig=Sb;Xf=hf;return Hd}function eb(Sb,Hd){var hf=Sb.next();if('"'==hf||"'"==hf)return Hd.tokenize=kc(hf),Hd.tokenize(Sb,Hd);if("."==hf&&Sb.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return ab("number","number");
if("."==hf&&Sb.match(".."))return ab("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(hf))return ab(hf);if("="==hf&&Sb.eat(">"))return ab("=>","operator");if("0"==hf&&Sb.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return ab("number","number");if(/\d/.test(hf))return Sb.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),ab("number","number");if("/"==hf){if(Sb.eat("*"))return Hd.tokenize=Vb,ab("comment","comment");if(Sb.eat("/"))return Hd.tokenize=pb,ab("comment","comment");if(Ya(Sb,Hd,1)){a:for(var zf=
Hd=!1;null!=(hf=Sb.next());){if(!Hd){if("/"==hf&&!zf)break a;"["==hf?zf=!0:zf&&"]"==hf&&(zf=!1)}Hd=!Hd&&"\\"==hf}Sb.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/);return ab("regexp","string-2")}Sb.eat("=");return ab("operator","operator",Sb.current())}if("`"==hf)return Hd.tokenize=Nb,Nb(Sb,Hd);if("#"==hf&&"!"==Sb.peek())return Sb.skipToEnd(),ab("meta","meta");if("#"==hf&&Sb.eatWhile(ge))return ab("variable","property");if("<"==hf&&Sb.match("!--")||"-"==hf&&Sb.match("->")&&!/\S/.test(Sb.string.slice(0,
Sb.start)))return Sb.skipToEnd(),ab("comment","comment");if($e.test(hf))return">"==hf&&Hd.lexical&&">"==Hd.lexical.type||(Sb.eat("=")?"!"!=hf&&"="!=hf||Sb.eat("="):/[<>*+\-|&?]/.test(hf)&&(Sb.eat(hf),">"==hf&&Sb.eat(hf))),"?"==hf&&Sb.eat(".")?ab("."):ab("operator","operator",Sb.current());if(ge.test(hf)){Sb.eatWhile(ge);hf=Sb.current();if("."!=Hd.lastType){if(Ce.propertyIsEnumerable(hf))return Sb=Ce[hf],ab(Sb.type,Sb.style,hf);if("async"==hf&&Sb.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return ab("async",
"keyword",hf)}return ab("variable","variable",hf)}}function kc(Sb){return function(Hd,hf){var zf=!1,Gg;if(Sc&&"@"==Hd.peek()&&Hd.match(pf))return hf.tokenize=eb,ab("jsonld-keyword","meta");for(;null!=(Gg=Hd.next())&&(Gg!=Sb||zf);)zf=!zf&&"\\"==Gg;zf||(hf.tokenize=eb);return ab("string","string")}}function Vb(Sb,Hd){for(var hf=!1,zf,Gg=!1;zf=Sb.eat(/[^\w\$_\xa1-\uffff]/);){Gg=!0;if("/"==zf&&hf){Hd.tokenize=eb;break}hf="*"==zf}if(Gg)return ab("comment","comment");if(Sb.eatWhile(/[\w\$_\xa1-\uffff]/)&&
(Sb=Sb.current(),"TODO"==Sb||"FIXME"==Sb))return ab("commentHighlight","commentHighlight");ab("comment","comment")}function pb(Sb,Hd){return Sb.eatWhile(/[^\w\$_\xa1-\uffff]/)?(Sb.eol()&&(Hd.tokenize=eb),"comment"):Sb.eatWhile(/[\w\$_\xa1-\uffff]/)&&(Sb.eol()&&(Hd.tokenize=eb),Sb=Sb.current(),"TODO"==Sb||"FIXME"==Sb)?ab("commentHighlight","commentHighlight"):ab("comment","comment")}function Nb(Sb,Hd){for(var hf=!1,zf;null!=(zf=Sb.next());){if(!hf&&("`"==zf||"$"==zf&&Sb.eat("{"))){Hd.tokenize=eb;break}hf=
!hf&&"\\"==zf}return ab("quasi","string-2",Sb.current())}function zb(Sb,Hd){Hd.fatArrowAt&&(Hd.fatArrowAt=null);var hf=Sb.string.indexOf("=>",Sb.start);if(!(0>hf)){if(Zd){var zf=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Sb.string.slice(Sb.start,hf));zf&&(hf=zf.index)}zf=0;var Gg=!1;for(--hf;0<=hf;--hf){var vg=Sb.string.charAt(hf),tg="([{}])".indexOf(vg);if(0<=tg&&3>tg){if(!zf){++hf;break}if(0==--zf){"("==vg&&(Gg=!0);break}}else if(3<=tg&&6>tg)++zf;else if(ge.test(vg))Gg=!0;else if(/["'\/`]/.test(vg))for(;;--hf){if(0==
hf)return;if(Sb.string.charAt(hf-1)==vg&&"\\"!=Sb.string.charAt(hf-2)){hf--;break}}else if(Gg&&!zf){++hf;break}}Gg&&!zf&&(Hd.fatArrowAt=hf)}}function rb(Sb,Hd,hf,zf,Gg,vg){this.indented=Sb;this.column=Hd;this.type=hf;this.prev=Gg;this.info=vg;null!=zf&&(this.align=zf)}function Ib(){for(var Sb=arguments.length-1;0<=Sb;Sb--)Re.cc.push(arguments[Sb])}function da(){Ib.apply(null,arguments);return!0}function ka(Sb,Hd){for(;Hd;Hd=Hd.next)if(Hd.name==Sb)return!0;return!1}function va(Sb){var Hd=Re.state;
Re.marked="def";if(Pd){if(Hd.context)if("var"==Hd.lexical.info&&Hd.context&&Hd.context.block){var hf=Fa(Sb,Hd.context);if(null!=hf){Hd.context=hf;return}}else if(!ka(Sb,Hd.localVars)){Hd.localVars=new wb(Sb,Hd.localVars);return}Db.globalVars&&!ka(Sb,Hd.globalVars)&&(Hd.globalVars=new wb(Sb,Hd.globalVars))}}function Fa(Sb,Hd){return Hd?Hd.block?(Sb=Fa(Sb,Hd.prev))?Sb==Hd.prev?Hd:new Aa(Sb,Hd.vars,!0):null:ka(Sb,Hd.vars)?Hd:new Aa(Hd.prev,new wb(Sb,Hd.vars),!1):null}function M(Sb){return"public"==Sb||
"private"==Sb||"protected"==Sb||"abstract"==Sb||"readonly"==Sb}function Aa(Sb,Hd,hf){this.prev=Sb;this.vars=Hd;this.block=hf}function wb(Sb,Hd){this.name=Sb;this.next=Hd}function Na(){Re.state.context=new Aa(Re.state.context,Re.state.localVars,!1);Re.state.localVars=ae}function hb(){Re.state.context=new Aa(Re.state.context,Re.state.localVars,!0);Re.state.localVars=null}function Bb(){Re.state.localVars=Re.state.context.vars;Re.state.context=Re.state.context.prev}function ba(Sb,Hd){var hf=function(){var zf=
Re.state,Gg=zf.indented;if("stat"==zf.lexical.type)Gg=zf.lexical.indented;else for(var vg=zf.lexical;vg&&")"==vg.type&&vg.align;vg=vg.prev)Gg=vg.indented;zf.lexical=new rb(Gg,Re.stream.column(),Sb,null,zf.lexical,Hd)};hf.lex=!0;return hf}function dc(){var Sb=Re.state;Sb.lexical.prev&&(")"==Sb.lexical.type&&(Sb.indented=Sb.lexical.indented),Sb.lexical=Sb.lexical.prev)}function la(Sb){function Hd(hf){return hf==Sb?da():";"==Sb||"}"==hf||")"==hf||"]"==hf?Ib():da(Hd)}return Hd}function Fb(Sb,Hd){return"var"==
Sb?da(ba("vardef",Hd),gd,la(";"),dc):"keyword a"==Sb?da(ba("form"),Rb,Fb,dc):"keyword b"==Sb?da(ba("form"),Fb,dc):"keyword d"==Sb?Re.stream.match(/^\s*$/,!1)?da():da(ba("stat"),id,la(";"),dc):"debugger"==Sb?da(la(";")):"{"==Sb?da(ba("}"),hb,Uc,dc,Bb):";"==Sb?da():"if"==Sb?("else"==Re.state.lexical.info&&Re.state.cc[Re.state.cc.length-1]==dc&&Re.state.cc.pop()(),da(ba("form"),Rb,Fb,dc,he)):"function"==Sb?da(th):"for"==Sb?da(ba("form"),hb,Uf,Fb,Bb,dc):"class"==Sb||Zd&&"interface"==Hd?(Re.marked="keyword",
da(ba("form","class"==Sb?Sb:Hd),P,dc)):"variable"==Sb?Zd&&"declare"==Hd?(Re.marked="keyword",da(Fb)):Zd&&("module"==Hd||"enum"==Hd||"type"==Hd)&&Re.stream.match(/^\s*\w/,!1)?(Re.marked="keyword","enum"==Hd?da(E):"type"==Hd?da(cb,la("operator"),xe,la(";")):da(ba("form"),Vd,la("{"),ba("}"),Uc,dc,dc)):Zd&&"namespace"==Hd?(Re.marked="keyword",da(ba("form"),Ia,Fb,dc)):Zd&&"abstract"==Hd?(Re.marked="keyword",da(Fb)):da(ba("stat"),vc):"switch"==Sb?da(ba("form"),Rb,la("{"),ba("}","switch"),hb,Uc,dc,dc,Bb):
"case"==Sb?da(Ia,la(":")):"default"==Sb?da(la(":")):"catch"==Sb?da(ba("form"),Na,vb,Fb,dc,Bb):"export"==Sb?da(ba("stat"),ia,dc):"import"==Sb?da(ba("stat"),w,dc):"async"==Sb?da(Fb):"@"==Hd?da(Ia,Fb):Ib(ba("stat"),Ia,la(";"),dc)}function vb(Sb){if("("==Sb)return da(Yb,la(")"))}function Ia(Sb,Hd){return yc(Sb,Hd,!1)}function xb(Sb,Hd){return yc(Sb,Hd,!0)}function Rb(Sb){return"("!=Sb?Ib():da(ba(")"),id,la(")"),dc)}function yc(Sb,Hd,hf){if(Re.state.fatArrowAt==Re.stream.start){var zf=hf?nd:Pc;if("("==
Sb)return da(Na,ba(")"),Fc(Yb,")"),dc,la("=>"),zf,Bb);if("variable"==Sb)return Ib(Na,Vd,la("=>"),zf,Bb)}zf=hf?Pb:ob;return Vg.hasOwnProperty(Sb)?da(zf):"function"==Sb?da(th,zf):"class"==Sb||Zd&&"interface"==Hd?(Re.marked="keyword",da(ba("form"),de,dc)):"keyword c"==Sb||"async"==Sb?da(hf?xb:Ia):"("==Sb?da(ba(")"),id,la(")"),dc,zf):"operator"==Sb||"spread"==Sb?da(hf?xb:Ia):"["==Sb?da(ba("]"),mb,dc,zf):"{"==Sb?xd(kb,"}",null,zf):"quasi"==Sb?Ib(tb,zf):"new"==Sb?da(Id(hf)):da()}function id(Sb){return Sb.match(/[;\}\)\],]/)?
Ib():Ib(Ia)}function ob(Sb,Hd){return","==Sb?da(id):Pb(Sb,Hd,!1)}function Pb(Sb,Hd,hf){var zf=0==hf?ob:Pb,Gg=0==hf?Ia:xb;if("=>"==Sb)return da(Na,hf?nd:Pc,Bb);if("operator"==Sb)return/\+\+|--/.test(Hd)||Zd&&"!"==Hd?da(zf):Zd&&"<"==Hd&&Re.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?da(ba(">"),Fc(xe,">"),dc,zf):"?"==Hd?da(Ia,la(":"),Gg):da(Gg);if("quasi"==Sb)return Ib(tb,zf);if(";"!=Sb){if("("==Sb)return xd(xb,")","call",zf);if("."==Sb)return da(Qc,zf);if("["==Sb)return da(ba("]"),id,la("]"),dc,zf);
if(Zd&&"as"==Hd)return Re.marked="keyword",da(xe,zf);if("regexp"==Sb)return Re.state.lastType=Re.marked="operator",Re.stream.backUp(Re.stream.pos-Re.stream.start-1),da(Gg)}}function tb(Sb,Hd){return"quasi"!=Sb?Ib():"${"!=Hd.slice(Hd.length-2)?da(tb):da(id,xc)}function xc(Sb){if("}"==Sb)return Re.marked="string-2",Re.state.tokenize=Nb,da(tb)}function Pc(Sb){zb(Re.stream,Re.state);return Ib("{"==Sb?Fb:Ia)}function nd(Sb){zb(Re.stream,Re.state);return Ib("{"==Sb?Fb:xb)}function Id(Sb){return function(Hd){return"."==
Hd?da(Sb?Kd:Hb):"variable"==Hd&&Zd?da(wf,Sb?Pb:ob):Ib(Sb?xb:Ia)}}function Hb(Sb,Hd){if("target"==Hd)return Re.marked="keyword",da(ob)}function Kd(Sb,Hd){if("target"==Hd)return Re.marked="keyword",da(Pb)}function vc(Sb){return":"==Sb?da(dc,Fb):Ib(ob,la(";"),dc)}function Qc(Sb){if("variable"==Sb)return Re.marked="property",da()}function kb(Sb,Hd){if("async"==Sb)return Re.marked="property",da(kb);if("variable"==Sb||"keyword"==Re.style){Re.marked="property";if("get"==Hd||"set"==Hd)return da(Cc);var hf;
Zd&&Re.state.fatArrowAt==Re.stream.start&&(hf=Re.stream.match(/^\s*:\s*/,!1))&&(Re.state.fatArrowAt=Re.stream.pos+hf[0].length);return da(zc)}if("number"==Sb||"string"==Sb)return Re.marked=Sc?"property":Re.style+" property",da(zc);if("jsonld-keyword"==Sb)return da(zc);if(Zd&&M(Hd))return Re.marked="keyword",da(kb);if("["==Sb)return da(Ia,Md,la("]"),zc);if("spread"==Sb)return da(xb,zc);if("*"==Hd)return Re.marked="keyword",da(kb);if(":"==Sb)return Ib(zc)}function Cc(Sb){if("variable"!=Sb)return Ib(zc);
Re.marked="property";return da(th)}function zc(Sb){if(":"==Sb)return da(xb);if("("==Sb)return Ib(th)}function Fc(Sb,Hd,hf){function zf(Gg,vg){return(hf?-1<hf.indexOf(Gg):","==Gg)?(Gg=Re.state.lexical,"call"==Gg.info&&(Gg.pos=(Gg.pos||0)+1),da(function(tg,pd){return tg==Hd||pd==Hd?Ib():Ib(Sb)},zf)):Gg==Hd||vg==Hd?da():hf&&-1<hf.indexOf(";")?Ib(Sb):da(la(Hd))}return function(Gg,vg){return Gg==Hd||vg==Hd?da():Ib(Sb,zf)}}function xd(Sb,Hd,hf){for(var zf=3;zf<arguments.length;zf++)Re.cc.push(arguments[zf]);
return da(ba(Hd,hf),Fc(Sb,Hd),dc)}function Uc(Sb){return"}"==Sb?da():Ib(Fb,Uc)}function Md(Sb,Hd){if(Zd){if(":"==Sb)return da(xe);if("?"==Hd)return da(Md)}}function Ob(Sb,Hd){if(Zd&&(":"==Sb||"in"==Hd))return da(xe)}function Le(Sb){if(Zd&&":"==Sb)return Re.stream.match(/^\s*\w+\s+is\b/,!1)?da(Ia,We,xe):da(xe)}function We(Sb,Hd){if("is"==Hd)return Re.marked="keyword",da()}function xe(Sb,Hd){if("keyof"==Hd||"typeof"==Hd||"infer"==Hd||"readonly"==Hd)return Re.marked="keyword",da("typeof"==Hd?xb:xe);
if("variable"==Sb||"void"==Hd)return Re.marked="type",da(mg);if("|"==Hd||"&"==Hd)return da(xe);if("string"==Sb||"number"==Sb||"atom"==Sb)return da(mg);if("["==Sb)return da(ba("]"),Fc(xe,"]",","),dc,mg);if("{"==Sb)return da(ba("}"),Zc,dc,mg);if("("==Sb)return da(Fc(Of,")"),Fg,mg);if("<"==Sb)return da(Fc(xe,">"),xe);if("quasi"==Sb)return Ib(ti,mg)}function Fg(Sb){if("=>"==Sb)return da(xe)}function Zc(Sb){return Sb.match(/[\}\)\]]/)?da():","==Sb||";"==Sb?da(Zc):Ib(rd,Zc)}function rd(Sb,Hd){if("variable"==
Sb||"keyword"==Re.style)return Re.marked="property",da(rd);if("?"==Hd||"number"==Sb||"string"==Sb)return da(rd);if(":"==Sb)return da(xe);if("["==Sb)return da(la("variable"),Ob,la("]"),rd);if("("==Sb)return Ib(Be,rd);if(!Sb.match(/[;\}\)\],]/))return da()}function ti(Sb,Hd){return"quasi"!=Sb?Ib():"${"!=Hd.slice(Hd.length-2)?da(ti):da(xe,dg)}function dg(Sb){if("}"==Sb)return Re.marked="string-2",Re.state.tokenize=Nb,da(ti)}function Of(Sb,Hd){return"variable"==Sb&&Re.stream.match(/^\s*[?:]/,!1)||"?"==
Hd?da(Of):":"==Sb?da(xe):"spread"==Sb?da(Of):Ib(xe)}function mg(Sb,Hd){if("<"==Hd)return da(ba(">"),Fc(xe,">"),dc,mg);if("|"==Hd||"."==Sb||"&"==Hd)return da(xe);if("["==Sb)return da(xe,la("]"),mg);if("extends"==Hd||"implements"==Hd)return Re.marked="keyword",da(xe);if("?"==Hd)return da(xe,la(":"),xe)}function wf(Sb,Hd){if("<"==Hd)return da(ba(">"),Fc(xe,">"),dc,mg)}function mf(){return Ib(xe,Mb)}function Mb(Sb,Hd){if("="==Hd)return da(xe)}function gd(Sb,Hd){return"enum"==Hd?(Re.marked="keyword",da(E)):
Ib(Vd,Md,bh,Qf)}function Vd(Sb,Hd){if(Zd&&M(Hd))return Re.marked="keyword",da(Vd);if("variable"==Sb)return va(Hd),da();if("spread"==Sb)return da(Vd);if("["==Sb)return xd(hg,"]");if("{"==Sb)return xd(sf,"}")}function sf(Sb,Hd){if("variable"==Sb&&!Re.stream.match(/^\s*:/,!1))return va(Hd),da(bh);"variable"==Sb&&(Re.marked="property");return"spread"==Sb?da(Vd):"}"==Sb?Ib():"["==Sb?da(Ia,la("]"),la(":"),sf):da(la(":"),Vd,bh)}function hg(){return Ib(Vd,bh)}function bh(Sb,Hd){if("="==Hd)return da(xb)}function Qf(Sb){if(","==
Sb)return da(gd)}function he(Sb,Hd){if("keyword b"==Sb&&"else"==Hd)return da(ba("form","else"),Fb,dc)}function Uf(Sb,Hd){if("await"==Hd)return da(Uf);if("("==Sb)return da(ba(")"),$g,dc)}function $g(Sb){return"var"==Sb?da(gd,Ta):"variable"==Sb?da(Ta):Ib(Ta)}function Ta(Sb,Hd){return")"==Sb?da():";"==Sb?da(Ta):"in"==Hd||"of"==Hd?(Re.marked="keyword",da(Ia,Ta)):Ib(Ia,Ta)}function th(Sb,Hd){if("*"==Hd)return Re.marked="keyword",da(th);if("variable"==Sb)return va(Hd),da(th);if("("==Sb)return da(Na,ba(")"),
Fc(Yb,")"),dc,Le,Fb,Bb);if(Zd&&"<"==Hd)return da(ba(">"),Fc(mf,">"),dc,th)}function Be(Sb,Hd){if("*"==Hd)return Re.marked="keyword",da(Be);if("variable"==Sb)return va(Hd),da(Be);if("("==Sb)return da(Na,ba(")"),Fc(Yb,")"),dc,Le,Bb);if(Zd&&"<"==Hd)return da(ba(">"),Fc(mf,">"),dc,Be)}function cb(Sb,Hd){if("keyword"==Sb||"variable"==Sb)return Re.marked="type",da(cb);if("<"==Hd)return da(ba(">"),Fc(mf,">"),dc)}function Yb(Sb,Hd){"@"==Hd&&da(Ia,Yb);return"spread"==Sb?da(Yb):Zd&&M(Hd)?(Re.marked="keyword",
da(Yb)):Zd&&"this"==Sb?da(Md,bh):Ib(Vd,Md,bh)}function de(Sb,Hd){return"variable"==Sb?P(Sb,Hd):pa(Sb,Hd)}function P(Sb,Hd){if("variable"==Sb)return va(Hd),da(pa)}function pa(Sb,Hd){if("<"==Hd)return da(ba(">"),Fc(mf,">"),dc,pa);if("extends"==Hd||"implements"==Hd||Zd&&","==Sb)return"implements"==Hd&&(Re.marked="keyword"),da(Zd?xe:Ia,pa);if("{"==Sb)return da(ba("}"),wa,dc)}function wa(Sb,Hd){if("async"==Sb||"variable"==Sb&&("static"==Hd||"get"==Hd||"set"==Hd||Zd&&M(Hd))&&Re.stream.match(/^\s+[\w$\xa1-\uffff]/,
!1))return Re.marked="keyword",da(wa);if("variable"==Sb||"keyword"==Re.style)return Re.marked="property",da(Ea,wa);if("number"==Sb||"string"==Sb)return da(Ea,wa);if("["==Sb)return da(Ia,Md,la("]"),Ea,wa);if("*"==Hd)return Re.marked="keyword",da(wa);if(Zd&&"("==Sb)return Ib(Be,wa);if(";"==Sb||","==Sb)return da(wa);if("}"==Sb)return da();if("@"==Hd)return da(Ia,wa)}function Ea(Sb,Hd){if("!"==Hd||"?"==Hd)return da(Ea);if(":"==Sb)return da(xe,bh);if("="==Hd)return da(xb);Sb=Re.state.lexical.prev;return Ib(Sb&&
"interface"==Sb.info?Be:th)}function ia(Sb,Hd){return"*"==Hd?(Re.marked="keyword",da(ra,la(";"))):"default"==Hd?(Re.marked="keyword",da(Ia,la(";"))):"{"==Sb?da(Fc(Ca,"}"),ra,la(";")):Ib(Fb)}function Ca(Sb,Hd){if("as"==Hd)return Re.marked="keyword",da(la("variable"));if("variable"==Sb)return Ib(xb,Ca)}function w(Sb){return"string"==Sb?da():"("==Sb?Ib(Ia):"."==Sb?Ib(ob):Ib(ma,ua,ra)}function ma(Sb,Hd){if("{"==Sb)return xd(ma,"}");"variable"==Sb&&va(Hd);"*"==Hd&&(Re.marked="keyword");return da(ha)}function ua(Sb){if(","==
Sb)return da(ma,ua)}function ha(Sb,Hd){if("as"==Hd)return Re.marked="keyword",da(ma)}function ra(Sb,Hd){if("from"==Hd)return Re.marked="keyword",da(Ia)}function mb(Sb){return"]"==Sb?da():Ib(Fc(xb,"]"))}function E(){return Ib(ba("form"),Vd,la("{"),ba("}"),Fc(R,"}"),dc,dc)}function R(){return Ib(Vd,bh)}function Ya(Sb,Hd,hf){return Hd.tokenize==eb&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Hd.lastType)||"quasi"==Hd.lastType&&/\{\s*$/.test(Sb.string.slice(0,
Sb.pos-(hf||0)))}var gb=fa.indentUnit,$b=Db.statementIndent,Sc=Db.jsonld,Ic=Db.json||Sc,Pd=!1!==Db.trackScope,Zd=Db.typescript,ge=Db.wordCharacters||/[\w$\xa1-\uffff]/,Ce=function(){function Sb(pd){return{type:pd,style:"keyword"}}var Hd=Sb("keyword a"),hf=Sb("keyword b"),zf=Sb("keyword c"),Gg=Sb("keyword d"),vg=Sb("operator"),tg={type:"atom",style:"atom"};return{"if":Sb("if"),"while":Hd,"with":Hd,"else":hf,"do":hf,"try":hf,"finally":hf,"return":Gg,"break":Gg,"continue":Gg,"new":Sb("new"),"delete":zf,
"void":zf,"throw":zf,"debugger":Sb("debugger"),"var":Sb("var"),"const":Sb("var"),let:Sb("var"),"function":Sb("function"),"catch":Sb("catch"),"for":Sb("for"),"switch":Sb("switch"),"case":Sb("case"),"default":Sb("default"),"in":vg,"typeof":vg,"instanceof":vg,"true":tg,"false":tg,"null":tg,undefined:tg,NaN:tg,Infinity:tg,"this":Sb("this"),"class":Sb("class"),"super":Sb("atom"),yield:zf,"export":Sb("export"),"import":Sb("import"),"extends":zf,await:zf}}(),$e=/[+\-*&%=<>!?|~^@]/,pf=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,
ig,Xf,Vg={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"import":!0,"jsonld-keyword":!0},Re={state:null,column:null,marked:null,cc:null},ae=new wb("this",new wb("arguments",null));Na.lex=hb.lex=!0;Bb.lex=!0;dc.lex=!0;return{startState:function(Sb){Sb={tokenize:eb,lastType:"sof",cc:[],lexical:new rb((Sb||0)-gb,0,"block",!1),localVars:Db.localVars,context:Db.localVars&&new Aa(null,null,!1),indented:Sb||0};Db.globalVars&&"object"==jc(Db.globalVars)&&(Sb.globalVars=Db.globalVars);return Sb},
token:function(Sb,Hd){Sb.sol()&&(Hd.lexical.hasOwnProperty("align")||(Hd.lexical.align=!1),Hd.indented=Sb.indentation(),zb(Sb,Hd));if(Hd.tokenize!=Vb&&Sb.eatSpace())return null;var hf=Hd.tokenize(Sb,Hd);if("comment"==ig)return hf;Hd.lastType="operator"!=ig||"++"!=Xf&&"--"!=Xf?ig:"incdec";a:{var zf=ig,Gg=Xf,vg=Hd.cc;Re.state=Hd;Re.stream=Sb;Re.marked=null;Re.cc=vg;Re.style=hf;Hd.lexical.hasOwnProperty("align")||(Hd.lexical.align=!0);for(;;)if((vg.length?vg.pop():Ic?Ia:Fb)(zf,Gg)){for(;vg.length&&vg[vg.length-
1].lex;)vg.pop()();if(Re.marked){hf=Re.marked;break a}if(Sb="variable"==zf)b:if(Pd){for(Sb=Hd.localVars;Sb;Sb=Sb.next)if(Sb.name==Gg){Sb=!0;break b}for(Hd=Hd.context;Hd;Hd=Hd.prev)for(Sb=Hd.vars;Sb;Sb=Sb.next)if(Sb.name==Gg){Sb=!0;break b}Sb=void 0}else Sb=!1;if(Sb){hf="variable-2";break a}break a}}return hf},indent:function(Sb,Hd){if(Sb.tokenize==Vb||Sb.tokenize==Nb)return sb.passIndent;if(Sb.tokenize!=eb)return 0;var hf=Hd&&Hd.charAt(0),zf=Sb.lexical,Gg;if(!/^\s*else\b/.test(Hd))for(var vg=Sb.cc.length-
1;0<=vg;--vg){var tg=Sb.cc[vg];if(tg==dc)zf=zf.prev;else if(tg!=he&&tg!=Bb)break}for(;!("stat"!=zf.type&&"form"!=zf.type||"}"!=hf&&(!(Gg=Sb.cc[Sb.cc.length-1])||Gg!=ob&&Gg!=Pb||/^[,\.=+\-*:?[\(]/.test(Hd)));)zf=zf.prev;$b&&")"==zf.type&&"stat"==zf.prev.type&&(zf=zf.prev);Gg=zf.type;vg=hf==Gg;return"vardef"==Gg?zf.indented+("operator"==Sb.lastType||","==Sb.lastType?zf.info.length+1:0):"form"==Gg&&"{"==hf?zf.indented:"form"==Gg?zf.indented+gb:"stat"==Gg?(hf=zf.indented,Sb="operator"==Sb.lastType||","==
Sb.lastType||$e.test(Hd.charAt(0))||/[,.]/.test(Hd.charAt(0)),hf+(Sb?$b||gb:0)):"switch"!=zf.info||vg||0==Db.doubleIndentSwitch?zf.align?zf.column+(vg?0:1):zf.indented+(vg?0:gb):zf.indented+(/^(?:case|default)\b/.test(Hd)?gb:2*gb)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Ic?null:"/*",blockCommentEnd:Ic?null:"*/",blockCommentContinue:Ic?null:" * ",lineComment:Ic?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Ic?"json":"javascript",jsonldMode:Sc,jsonMode:Ic,
expressionAllowed:Ya,skipExpression:function(Sb){var Hd=Sb.cc[Sb.cc.length-1];Hd!=Ia&&Hd!=xb||Sb.cc.pop()}}});sb.registerHelper("wordChars","javascript",/[\w$]/);sb.defineMIME("text/javascript","javascript");sb.defineMIME("text/ecmascript","javascript");sb.defineMIME("application/javascript","javascript");sb.defineMIME("application/x-javascript","javascript");sb.defineMIME("application/ecmascript","javascript");sb.defineMIME("application/json",{name:"javascript",json:!0});sb.defineMIME("application/x-json",
{name:"javascript",json:!0});sb.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});sb.defineMIME("text/typescript",{name:"javascript",typescript:!0});sb.defineMIME("application/typescript",{name:"javascript",typescript:!0})}}});