System.register("./__rootModule___commonjs-entry-51a55f66.js ./index-61952933.js ./text-editor-7eb763f4.js @babel/plugin-syntax-import-meta ./loading-indicator.cp-98e470a2.js ./tooltips.cp-3c41b378.js ./editor-plugin-5397d87c.js ./ui.cp-8dfc076f.js ./index-42118cd5.js ./interface-1a7f3c67.js ./index-616023be.js ./popups.cp-5b9fb681.js ./list.cp-840d1cf8.js ./editor-modes-aae4d878.js ./messages.cp-817cc06d.js".split(" "),function(bd){var Dd,se,Rc,ad,Ne,Cb,Sd,ve,uc,dd,vd,Ed,fe,jc,Od,qb,ic,Wb,lc,db,
Xa;return{setters:[function(Gb){Dd=Gb.M;se=Gb.I;Rc=Gb.L;ad=Gb.ad;Ne=Gb.s;Cb=Gb.l;Sd=Gb.a;ve=Gb.b3;uc=Gb.aj;dd=Gb.t;vd=Gb.b;Ed=Gb.a9;fe=Gb.C;jc=Gb.d;Od=Gb.k;qb=Gb._;ic=Gb.i;Wb=Gb.K},function(Gb){lc=Gb.c;db=Gb.T},function(Gb){Xa=Gb["default"]},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var Gb=window.lively.FreezerRuntime.recorderFor("lively.ide/http-file-browser.js");
Gb.Morph=Dd;Gb.Image=se;Gb.Label=Rc;Gb.InputLine=ad;Gb.Tree=lc;Gb.TreeData=db;Gb.arr=Ne;Gb.fun=Cb;Gb.promise=Sd;Gb.num=ve;Gb.date=uc;Gb.string=dd;Gb.pt=vd;Gb.Rectangle=Ed;Gb.Color=fe;Gb.connect=jc;Gb.resource=Od;Gb.TextEditor=Xa;Gb.browserCommands=[{name:"open selected file",exec:function(ub){var sb=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{openInNewBrowser:!1};if(ub.ui.locationInput.isFocused())return!1;var fa=ub.selectedFile;if(fa){if(sb.openInNewBrowser){var Db=ub.ui.fileTree.buildViewState(function(kc){return kc.resource.url}),
ab=Gb.HTTPFileBrowser.forFile(ub.selectedFile,ub.location);sb=ub.getWindow().position.addXY(10,10);ub.world().openInWindow(ab,{position:sb}).activate();return ab.whenFinishedLoading().then(function(){return ab.ui.fileTree.applyViewState(Db,function(kc){return kc.resource.url})}).then(function(){return ab})}if(fa.isDirectory())ub.execCommand("set location to selection");else if(fa.url.endsWith(".svg")||fa.url.endsWith(".png"))(new Gb.Image({name:fa.url,imageUrl:fa.url,autoResize:!0})).openInWorld();
else{var eb=Gb.TextEditor.openURL(fa.url,{extent:Gb.pt(600,800)});setTimeout(function(){return eb.getWindow().activate()},100)}}else ub.setStatusMessage("No file selected");return!0}},{name:"focus file tree",exec:function(ub){ub=ub.ui.fileTree;ub.show();ub.focus();return!0}},{name:"focus location input",exec:function(ub){ub=ub.ui.locationInput;ub.show();ub.focus();return!0}},{name:"set location to selection",exec:function(){var ub=qb(regeneratorRuntime.mark(function Db(fa){var ab;return regeneratorRuntime.wrap(function(eb){for(;;)switch(eb.prev=
eb.next){case 0:ab=fa.selectedFile;eb.t0=ab;if(!eb.t0){eb.next=5;break}eb.next=5;return fa.keepFileTreeStateWhile(function(){return fa.location=ab.isDirectory()?ab:ab.parent()});case 5:return eb.abrupt("return",!0);case 6:case "end":return eb.stop()}},Db)}));return function(fa){return ub.apply(this,arguments)}}()},{name:"set location to parent dir",exec:function(){var ub=qb(regeneratorRuntime.mark(function Db(fa){var ab;return regeneratorRuntime.wrap(function(eb){for(;;)switch(eb.prev=eb.next){case 0:ab=
fa.location;if(!ab.isRoot()){eb.next=3;break}return eb.abrupt("return",!0);case 3:return eb.next=5,fa.keepFileTreeStateWhile(qb(regeneratorRuntime.mark(function Vb(){return regeneratorRuntime.wrap(function(pb){for(;;)switch(pb.prev=pb.next){case 0:return pb.next=2,fa.openLocation(ab.parent());case 2:return fa.selectedFile=ab,pb.next=5,fa.ui.fileTree.execCommand("uncollapse selected node");case 5:case "end":return pb.stop()}},Vb)})));case 5:return eb.abrupt("return",!0);case 6:case "end":return eb.stop()}},
Db)}));return function(fa){return ub.apply(this,arguments)}}()},{name:"copy file path to clipboard",exec:function(){var ub=qb(regeneratorRuntime.mark(function Db(fa){var ab;return regeneratorRuntime.wrap(function(eb){for(;;)switch(eb.prev=eb.next){case 0:if(!fa.ui.locationInput.isFocused()){eb.next=2;break}return eb.abrupt("return",!1);case 2:if(!fa.selectedFile){eb.next=8;break}ab=fa.get("selectedFileName");fa.env.eventDispatcher.doCopy(ab.textString);ab.fontColor=Gb.Color.rgb(52,152,219);eb.next=
8;return ab.animate({customTween:function(kc){return ab.fontColor=Gb.Color.rgb(52,152,219).interpolate(kc,Gb.Color.black)}});case 8:return eb.abrupt("return",!0);case 9:case "end":return eb.stop()}},Db)}));return function(fa){return ub.apply(this,arguments)}}()},{name:"refresh contents",exec:function(ub,sb,fa,Db){return Db&&"input-g"===Db.keyCombo&&ub.ui.locationInput.isFocused()?!1:qb(regeneratorRuntime.mark(function eb(){var kc;return regeneratorRuntime.wrap(function(Vb){for(;;)switch(Vb.prev=Vb.next){case 0:return kc=
ub.ui.fileTree.scroll,Vb.next=3,ub.keepFileTreeStateWhile(function(){return ub.location=ub.location});case 3:return ub.ui.fileTree.scroll=kc,Vb.abrupt("return",!0);case 5:case "end":return Vb.stop()}},eb)}))()}},{name:"set file filter",exec:function(){var ub=qb(regeneratorRuntime.mark(function Db(fa){var ab,eb;return regeneratorRuntime.wrap(function(kc){for(;;)switch(kc.prev=kc.next){case 0:return fa.excludeFiles=fa.excludeFiles||[],kc.next=3,fa.world().editListPrompt("Add or remove items to be excluded from the file list",
fa.excludeFiles,{requester:fa});case 3:ab=kc.sent;eb=ab.list;if(!eb){kc.next=9;break}fa.excludeFiles=eb;kc.next=9;return fa.execCommand("refresh contents");case 9:return kc.abrupt("return",!0);case 10:case "end":return kc.stop()}},Db)}));return function(fa){return ub.apply(this,arguments)}}()},{name:"add directory",exec:function(){var ub=qb(regeneratorRuntime.mark(function Db(fa){var ab,eb,kc;return regeneratorRuntime.wrap(function(Vb){for(;;)switch(Vb.prev=Vb.next){case 0:return ab=fa.selectedFile||
fa.location,ab.isDirectory()||(ab=ab.parent()),Vb.next=4,fa.world().prompt("Enter name of new directory:",{input:ab.url,requester:fa,historyId:"lively.ide/http-file-browser-file-name-query"});case 4:if(eb=Vb.sent){Vb.next=9;break}fa.world().inform("Add directory canceled",{requester:fa});Vb.next=16;break;case 9:return kc=Gb.resource(eb),kc.isDirectory()||(kc=kc.asDirectory()),Vb.next=13,kc.ensureExistance();case 13:return Vb.next=15,fa.execCommand("refresh contents");case 15:fa.selectedFile=kc;case 16:return Vb.abrupt("return",
!0);case 17:case "end":return Vb.stop()}},Db)}));return function(fa){return ub.apply(this,arguments)}}()},{name:"add file",exec:function(){var ub=qb(regeneratorRuntime.mark(function Db(fa){var ab,eb,kc;return regeneratorRuntime.wrap(function(Vb){for(;;)switch(Vb.prev=Vb.next){case 0:return ab=fa.selectedFile||fa.location,ab.isDirectory()||(ab=ab.parent()),Vb.next=4,fa.world().prompt("Enter name of new file:",{input:ab.url,requester:fa,historyId:"lively.ide/http-file-browser-file-name-query"});case 4:if(eb=
Vb.sent){Vb.next=9;break}fa.world().inform("Add file canceled",{requester:fa});Vb.next=16;break;case 9:return kc=Gb.resource(eb),kc.isDirectory()&&(kc=kc.asFile()),Vb.next=13,kc.ensureExistance("");case 13:return Vb.next=15,fa.execCommand("refresh contents");case 15:fa.selectedFile=kc;case 16:return Vb.abrupt("return",!0);case 17:case "end":return Vb.stop()}},Db)}));return function(fa){return ub.apply(this,arguments)}}()},{name:"delete file or directory",exec:function(ub){return ub.ui.locationInput.isFocused()?
!1:ub.selectedFile?qb(regeneratorRuntime.mark(function fa(){var Db,ab,eb;return regeneratorRuntime.wrap(function(kc){for(;;)switch(kc.prev=kc.next){case 0:return kc.next=2,ub.world().confirm(["Confirm Delete\n",{},"Do you really want to remove\n",{fontWeight:"normal",fontSize:16},"".concat(ub.selectedFile.url,"?"),{fontStyle:"italic",fontWeight:"normal",fontSize:16}],{requester:ub,lineWrapping:!1});case 2:Db=kc.sent;if(!Db){kc.next=15;break}ab=ub.selectedFile;eb=ub.ui.fileTree.selectedIndex;kc.next=
8;return ab.remove();case 8:return kc.next=10,ub.execCommand("refresh contents");case 10:return kc.next=12,ub.whenFinishedLoading();case 12:ub.ui.fileTree.selectedIndex=eb;kc.next=16;break;case 15:ub.world().inform("Delete canceled",{requester:ub});case 16:case "end":return kc.stop()}},fa)}))():(ub.setStatusMessage("Nothing selected"),!0)}},{name:"rename file",exec:function(ub){return ub.selectedFile?qb(regeneratorRuntime.mark(function fa(){var Db,ab,eb,kc,Vb;return regeneratorRuntime.wrap(function(pb){for(;;)switch(pb.prev=
pb.next){case 0:return pb.next=2,ub.world().prompt(["Rename\n",{},"".concat(ub.selectedFile.url),{fontStyle:"italic",fontWeight:"normal",fontSize:16}],{input:ub.selectedFile.url,requester:ub,historyId:"lively.ide/http-file-browser-file-name-query"});case 2:if(Db=pb.sent){pb.next=6;break}ub.world().inform("Rename canceled",{requester:ub});return pb.abrupt("return",!0);case 6:ab=ub.selectedFile;eb=Gb.resource(Db);if(!ab.isDirectory()){pb.next=14;break}eb.isDirectory()||(eb=eb.asDirectory());pb.next=
12;return eb.ensureExistance();case 12:pb.next=20;break;case 14:return pb.next=16,ab.read();case 16:return kc=pb.sent,eb.isDirectory()&&(eb=eb.asFile()),pb.next=20,eb.ensureExistance(kc);case 20:return pb.next=22,ab.remove();case 22:return pb.next=24,ub.execCommand("refresh contents");case 24:Vb=ub.location;if(Vb.isParentOf(eb)){pb.next=28;break}pb.next=28;return ub.keepFileTreeStateWhile(qb(regeneratorRuntime.mark(function zb(){return regeneratorRuntime.wrap(function(rb){for(;;)switch(rb.prev=rb.next){case 0:return rb.next=
2,ub.openLocation(Vb.commonDirectory(eb));case 2:return rb.abrupt("return",rb.sent);case 3:case "end":return rb.stop()}},zb)})));case 28:return pb.prev=28,pb.next=31,ub.gotoFile(eb);case 31:ub.ui.fileTree.centerSelection();pb.next=38;break;case 34:return pb.prev=34,pb.t0=pb["catch"](28),ub.showError(pb.t0),pb.abrupt("return",!0);case 38:case "end":return pb.stop()}},fa,null,[[28,34]])}))():(ub.setStatusMessage("Nothing selected"),!0)}},{name:"find file and select",handlesCount:!0,exec:function(){var ub=
qb(regeneratorRuntime.mark(function eb(fa,Db,ab){var kc,Vb,pb,Nb,zb,rb;return regeneratorRuntime.wrap(function(Ib){for(;;)switch(Ib.prev=Ib.next){case 0:return kc={exclude:fa.excludeFiles||[]},Vb=fa.location,Ib.next=4,Vb.dirList(ab||"infinity",kc);case 4:return Ib.t0=function(da){return{isListItem:!0,string:da.url.slice(Vb.url.length),value:da.url}},pb=Ib.sent.map(Ib.t0),Ib.next=8,fa.world().filterableListPrompt("Choose module to open",pb,{historyId:"lively.ide/http-file-browser-find-file",requester:fa,
width:700,multiSelect:!1});case 8:Nb=Ib.sent;zb=Wb(Nb.selected,1);if(rb=zb[0]){Ib.next=14;break}fa.setStatusMessage("Canceled");return Ib.abrupt("return",!0);case 14:return Ib.prev=14,Ib.next=17,fa.gotoFile(rb);case 17:fa.ui.fileTree.centerSelection();Ib.next=24;break;case 20:return Ib.prev=20,Ib.t1=Ib["catch"](14),fa.showError(Ib.t1),Ib.abrupt("return",!0);case 24:case "end":return Ib.stop()}},eb,null,[[14,20]])}));return function(fa,Db,ab){return ub.apply(this,arguments)}}()}];var sc=bd("HTTPFileBrowserNode",
function(ub){var sb=window.lively.FreezerRuntime.recorderFor("lively.ide/http-file-browser.js"),fa=sb.hasOwnProperty("HTTPFileBrowserNode")&&"function"===typeof sb.HTTPFileBrowserNode?sb.HTTPFileBrowserNode:sb.HTTPFileBrowserNode=function(Db){if(!Db||!Db[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ic(fa,ub,[{key:"display",value:function(Db){Db=Db.resource;var ab=this.root.browser,eb=Db.lastModified,kc=Db.size;eb=
eb?Gb.date.format(eb,"yyyy-mm-dd HH:MM:ss"):" ".repeat(19);kc=kc?Gb.num.humanReadableByteSize(kc):"";return[ab.truncateNameIfNeeded(Db.name()),null,"\t".concat(kc," ").concat(eb),{paddingTop:"3px",opacity:.5,fontSize:"70%",textStyleClasses:["annotation"]}]}},{key:"isCollapsed",value:function(Db){return Db.isCollapsed}},{key:"collapse",value:function(){var Db=qb(regeneratorRuntime.mark(function Vb(eb,kc){var pb,Nb,zb,rb,Ib;return regeneratorRuntime.wrap(function(da){for(;;)switch(da.prev=da.next){case 0:if(eb.resource){da.next=
2;break}return da.abrupt("return");case 2:eb===this.root&&(kc=!1);if(kc||eb.subResources){da.next=17;break}pb=this.root.browser.excludeFiles||[];da.t0=Gb.arr;da.next=8;return eb.resource.dirList(1,{exclude:pb});case 8:da.t1=da.sent,da.t2=function(ka){return ka.isDirectory()},Nb=da.t0.partition.call(da.t0,da.t1,da.t2),zb=Wb(Nb,2),rb=zb[0],Ib=zb[1],rb=Gb.arr.sortBy(rb,function(ka){return ka.name().toLowerCase()}),Ib=Gb.arr.sortBy(Ib,function(ka){return ka.name().toLowerCase()}),eb.subNodes=rb.concat(Ib).map(function(ka){return{isCollapsed:!0,
resource:ka}});case 17:eb.isCollapsed=kc;case 18:case "end":return da.stop()}},Vb,this)}));return function(eb,kc){return Db.apply(this,arguments)}}()},{key:"getChildren",value:function(Db){var ab=this,eb=Db.resource,kc=Db.isCollapsed,Vb=Db.subNodes;(eb=eb?eb.isDirectory()?kc?[]:Vb||[]:null:[])&&eb.forEach(function(pb){return ab.parentMap.set(pb,Db)});return eb}},{key:"isLeaf",value:function(Db){return(Db=Db.resource)?!Db.isDirectory():!0}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"HTTPFileBrowserNode"}}],
sb,{pathInPackage:function(){return"./http-file-browser.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:9492,end:11243})}(Gb.TreeData));Gb.HTTPFileBrowserNode=sc;Gb.HTTPFileBrowserNode=sc;sc=bd("default",function(ub){var sb=window.lively.FreezerRuntime.recorderFor("lively.ide/http-file-browser.js"),fa=sb.hasOwnProperty("HTTPFileBrowser")&&
"function"===typeof sb.HTTPFileBrowser?sb.HTTPFileBrowser:sb.HTTPFileBrowser=function(Db){if(!Db||!Db[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ic(fa,ub,[{key:"isFileBrowser",get:function(){return!0}},{key:"relayout",value:function(){var Db=this;if(!(0>=this.height)){var ab=this.ui,eb=ab.selectedFileName,kc=ab.locationInput,Vb=ab.fileTree,pb=[ab.searchButton,ab.filterButton,ab.reloadButton];ab=[ab.openFileButton,
ab.addFileButton,ab.addDirectoryButton,ab.renameFileButton,ab.deleteFileButton];kc.position=Gb.pt(0,0);kc.extent=Gb.pt(this.width-60,20);pb.forEach(function(zb){return zb.extent=Gb.pt(20,20)});pb[0].topLeft=kc.topRight;for(var Nb=1;Nb<pb.length;Nb++)pb[Nb].topLeft=pb[Nb-1].topRight;Vb.topLeft=kc.bottomLeft;Vb.extent=Gb.pt(this.width,this.height-20-20-20);eb.topLeft=Vb.bottomLeft;eb.extent=Gb.pt(this.width,20);ab.forEach(function(zb){return zb.extent=Gb.pt(Db.width/5,20)});ab[0].topLeft=eb.bottomLeft;
for(Nb=1;Nb<ab.length;Nb++)ab[Nb].topLeft=ab[Nb-1].topRight}}},{key:"truncateNameIfNeeded",value:function(Db){var ab=this.ui.fileTree,eb=ab.env.fontMetric.sizeFor(ab.defaultTextStyle,Db,!0).width;eb>ab.width-200&&(ab=(eb-(ab.width-200))/(eb/Db.length),1<=ab&&(Db=Db.slice(0,-ab)+"..."));return Db}},{key:"whenFinishedLoading",value:function(){var Db=this;return Gb.promise.waitFor(3E3,function(){return!1===Db._isLoading})["catch"](function(ab){})}},{key:"hideBaseURL",value:function(Db){var ab=this.ui.selectedFileName;
Db.isShiftDown()?ab.textString=ab.textString.replace(System.baseURL,"/"):this.showSelectedFile()}},{key:"openLocation",value:function(Db){Db="string"===typeof Db?Gb.resource(Db):Db;var ab=this.ui.locationInput;ab.input=Db.url;ab.acceptInput();return this}},{key:"showMenuFor",value:function(){var Db=qb(regeneratorRuntime.mark(function kc(eb){var Vb,pb,Nb;return regeneratorRuntime.wrap(function(zb){for(;;)switch(zb.prev=zb.next){case 0:return Vb=eb.node,pb=eb.evt,pb.stop(),Nb=[],Vb.resource.isFile()&&
Nb.push({alias:"Open File in Text Editor",command:"open file",target:this.world(),args:{url:Vb.resource.url}}),zb.abrupt("return",this.world().openWorldMenu(pb,Nb));case 5:case "end":return zb.stop()}},kc,this)}));return function(eb){return Db.apply(this,arguments)}}()},{key:"showSelectedFile",value:function(){var Db=this.selectedFile;this.get("selectedFileName").textString=Db?Db.url:""}},{key:"gotoFile",value:function(){var Db=qb(regeneratorRuntime.mark(function kc(eb){var Vb,pb,Nb,zb;return regeneratorRuntime.wrap(function(rb){for(;;)switch(rb.prev=
rb.next){case 0:return rb.next=2,this.whenFinishedLoading();case 2:return Vb="string"===typeof eb?Gb.resource(eb):eb,pb=Vb.parents().concat(Vb),Nb=this.ui.fileTree.treeData,rb.next=7,Nb.followPath(pb,function(Ib,da){return Ib.equals(da.resource)});case 7:return zb=rb.sent,rb.abrupt("return",zb?this.selectedFile=zb.resource:null);case 9:case "end":return rb.stop()}},kc,this)}));return function(eb){return Db.apply(this,arguments)}}()},{key:"onLocationChanged",value:function(){var Db=qb(regeneratorRuntime.mark(function eb(){var kc,
Vb,pb,Nb;return regeneratorRuntime.wrap(function(zb){for(;;)switch(zb.prev=zb.next){case 0:kc=this.ui.fileTree.treeData;if(Vb=this.ui.locationInput.input){zb.next=5;break}this._isLoading=!1;return zb.abrupt("return");case 5:pb=Gb.resource(Vb);pb.isDirectory()||(pb=pb.asDirectory());kc.root={browser:this,resource:pb,isCollapsed:!0};if(Nb=this.getWindow())Nb.title="file browser \u2013 "+Vb;zb.next=12;return this.ui.fileTree.uncollapse(kc.root);case 12:this._isLoading=!1,this.ui.fileTree.focus();case 14:case "end":return zb.stop()}},
eb,this)}));return function(){return Db.apply(this,arguments)}}()},{key:"keepFileTreeStateWhile",value:function(Db){var ab=this;return this.ui.fileTree.maintainViewStateWhile(function(){return Db.call(ab)},function(eb){return eb.resource.url})}},{key:"focus",value:function(){this.ui.fileTree.focus()}},{key:"commands",get:function(){return Gb.browserCommands.concat(ic._get(Object.getPrototypeOf(fa.prototype),"commands",this))}},{key:"keybindings",get:function(){return[{keys:"Enter",command:"open selected file"},
{keys:{mac:"Meta-Enter",win:"Ctrl-Enter"},command:{command:"open selected file",args:{openInNewBrowser:!0}}},{keys:"Alt-Up",command:"focus location input"},{keys:"Alt-Down",command:"focus file tree"},{keys:"Alt-.",command:"set location to selection"},{keys:"Shift-6",command:"set location to parent dir"},{keys:{mac:"Meta-C|Alt-W",win:"Ctrl-C|Alt-W"},command:"copy file path to clipboard"},{keys:"Shift-=",command:"add directory"},{keys:{mac:"Meta-Shift-=",win:"Ctrl-Shift-="},command:"add file"},{keys:"F2",
command:"set file filter"},{keys:"F3",command:"rename file"},{keys:"Backspace|Delete",command:"delete file or directory"},{keys:"g",command:"refresh contents"}].concat(ic._get(Object.getPrototypeOf(fa.prototype),"keybindings",this))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"HTTPFileBrowser"}},{key:"forLocation",value:function(Db,ab){ab=new this(ab);ab.location=Db;return ab}},{key:"forFile",value:function(Db,ab){try{var eb=Gb.resource(Db)}catch(Vb){eb=Gb.resource(Gb.string.joinPath(ab||
"",Db))}var kc=this.forLocation(ab||eb.root());kc.gotoFile(eb).then(function(){return kc.ui.fileTree.centerSelection()});return kc}},{key:"properties",get:function(){return{name:{defaultValue:"file browser"},clipMode:{defaultValue:"visible"},extent:{defaultValue:Gb.pt(500,500)},excludeFiles:{defaultValue:[".git",".DS_Store"]},draggable:{defaultValue:!1},submorphs:{initialize:function(){var Db={type:"button",borderRadius:5,padding:Gb.Rectangle.inset(0),fontSize:12,grabbable:!1,draggable:!1};this.submorphs=
[new Gb.Tree({name:"fileTree",treeData:new Gb.HTTPFileBrowserNode({browser:this,resource:null,isCollapsed:!0}),extent:this.extent,lineHeight:1.6,fontSize:14,activateOnHover:!1,clipMode:"auto",resizeNodes:!0,fill:Gb.Color.white,borderWidth:{top:1,bottom:1,right:0,left:0},borderColor:Gb.Color.gray,padding:Gb.Rectangle.inset(4)}),new Gb.InputLine({name:"locationInput",textString:"",historyId:"http-file-browser-location-input-history",padding:Gb.Rectangle.inset(4,2)}),{type:"label",name:"selectedFileName",
padding:Gb.Rectangle.inset(2,2),fontSize:14,fontFamily:"Inconsolata, monospace",readOnly:!0,clipMode:"hidden",nativeCursor:"pointer",tooltip:"click to copy",fontWeight:"bold"},Object.assign({name:"searchButton"},Db,{label:Gb.Label.icon("search"),tooltip:"search for files"}),Object.assign({name:"reloadButton"},Db,{label:Gb.Label.icon("redo"),tooltip:"reload list"}),Object.assign({name:"filterButton"},Db,{label:Gb.Label.icon("filter"),tooltip:"set file filter"}),Object.assign({name:"openFileButton"},
Db,{label:Gb.Label.icon("edit",{textStyleClasses:["far"]}),tooltip:"open selected file"}),Object.assign({name:"addDirectoryButton"},Db,{label:Gb.Label.icon("folder",{textStyleClasses:["far"]}),tooltip:"add directory"}),Object.assign({name:"addFileButton"},Db,{label:Gb.Label.icon("file",{textStyleClasses:["far"]}),tooltip:"add file"}),Object.assign({name:"renameFileButton"},Db,{label:Gb.Label.icon("clone",{textStyleClasses:["far"]}),tooltip:"rename selected file"}),Object.assign({name:"deleteFileButton"},
Db,{label:Gb.Label.icon("trash-alt",{textStyleClasses:["far"]}),tooltip:"delete selected file"})];var ab=this.ui;Db=ab.fileTree;var eb=ab.locationInput,kc=ab.searchButton,Vb=ab.reloadButton,pb=ab.filterButton,Nb=ab.openFileButton,zb=ab.addDirectoryButton,rb=ab.addFileButton,Ib=ab.renameFileButton,da=ab.deleteFileButton;ab=ab.selectedFileName;Gb.connect(this,"extent",this,"relayout");Gb.connect(eb,"inputAccepted",this,"onLocationChanged");Gb.connect(Db,"selectedNode",this,"showSelectedFile");Gb.connect(Db,
"contextMenuRequested",this,"showMenuFor");Gb.connect(kc,"fire",this,"execCommand",{converter:function(){return"find file and select"}});Gb.connect(Vb,"fire",this,"execCommand",{converter:function(){return"refresh contents"}});Gb.connect(pb,"fire",this,"execCommand",{converter:function(){return"set file filter"}});Gb.connect(Nb,"fire",this,"execCommand",{converter:function(){return"open selected file"}});Gb.connect(Ib,"fire",this,"execCommand",{converter:function(){return"rename file"}});Gb.connect(da,
"fire",this,"execCommand",{converter:function(){return"delete file or directory"}});Gb.connect(rb,"fire",this,"execCommand",{converter:function(){return"add file"}});Gb.connect(zb,"fire",this,"execCommand",{converter:function(){return"add directory"}});Gb.connect(ab,"onMouseDown",this,"execCommand",{converter:function(){return"copy file path to clipboard"}});Gb.connect(this,"onMouseMove",this,"hideBaseURL");this.onLocationChanged();this.relayout()}},ui:{derived:!0,readOnly:!0,after:["submorphs"],
get:function(){return{fileTree:this.getSubmorphNamed("fileTree"),locationInput:this.getSubmorphNamed("locationInput"),searchButton:this.getSubmorphNamed("searchButton"),reloadButton:this.getSubmorphNamed("reloadButton"),filterButton:this.getSubmorphNamed("filterButton"),openFileButton:this.getSubmorphNamed("openFileButton"),addDirectoryButton:this.getSubmorphNamed("addDirectoryButton"),addFileButton:this.getSubmorphNamed("addFileButton"),renameFileButton:this.getSubmorphNamed("renameFileButton"),
deleteFileButton:this.getSubmorphNamed("deleteFileButton"),selectedFileName:this.getSubmorphNamed("selectedFileName")}}},location:{derived:!0,after:["submorphs"],get:function(){return Gb.resource(this.ui.locationInput.input)},set:function(Db){this._isLoading=!0;Db="string"===typeof Db?Gb.resource(Db):Db;Db.isDirectory()||(Db=Db.asDirectory());this.ui.locationInput.input=Db.url;this.ui.locationInput.acceptInput()}},selectedFile:{derived:!0,after:["submorphs"],get:function(){var Db=this.ui.fileTree.selectedNode;
return Db?Db.resource:null},set:function(Db){if(Db){var ab="string"===typeof Db?Gb.resource(Db):Db;Db=this.ui.fileTree.nodes.find(function(eb){return eb.resource.url===ab.url});this.ui.fileTree.selectedNode=Db}else this.ui.fileTree.selectedNode=null;this.ui.fileTree.focus()}},treeState:{derived:!0,after:["submorphs"],get:function(){return this.ui.fileTree.buildViewState(function(Db){return Db.url})},set:function(Db){this.ui.fileTree.applyViewState(Db,function(ab){return ab.url})}}}}}],sb,{pathInPackage:function(){return"./http-file-browser.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:11259,end:25274})}(Gb.Morph));Gb["default"]=sc}}});