System.register(["./__rootModule___commonjs-entry-51a55f66.js","./helpers-94ca076d.js","@babel/plugin-syntax-import-meta","./index-616023be.js"],function(bd){var Dd,se,Rc,ad,Ne,Cb,Sd,ve,uc,dd,vd,Ed,fe;return{setters:[function(jc){Dd=jc.c;se=jc.M;Rc=jc.f;ad=jc.ag;Ne=jc.L;Cb=jc.H;Sd=jc.k;ve=jc.C;uc=jc.b;dd=jc.o;vd=jc.i;Ed=jc._},function(jc){fe=jc.e},function(){},function(){}],execute:function(){var jc=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/version-checker.cp.js");jc.component=Dd;
jc.Morph=se;jc.Icon=Rc;jc.HTMLMorph=ad;jc.Label=Ne;jc.HorizontalLayout=Cb;jc.evalOnServer=fe;jc.resource=Sd;jc.Color=ve;jc.pt=uc;jc.runCommand=dd;var Od=bd("VersionChecker",function(ic){var Wb=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/version-checker.cp.js"),lc=Wb.hasOwnProperty("VersionChecker")&&"function"===typeof Wb.VersionChecker?Wb.VersionChecker:Wb.VersionChecker=function(db){if(!db||!db[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return vd(lc,ic,[{key:"onLoad",value:function(){this.isComponent||this.withAllSubmorphsDo(function(db){return db.halosEnabled=!1})}},{key:"checkVersion",value:function(){this.reset();this.checkIfUpToDate()}},{key:"onMouseDown",value:function(db){vd._get(Object.getPrototypeOf(lc.prototype),"onMouseDown",this).call(this,db);this.isComponent||this.checkVersion()}},{key:"relayout",value:function(){var db=this;this.world().withTopBarDo(function(Xa){db.bottomLeft=Xa.sideBar&&Xa.sideBar.owner?
db.world().visibleBounds().bottomLeft().withX(Xa.sideBar.right).addXY(10,-10):db.world().visibleBounds().insetBy(10).bottomLeft()})}},{key:"checkIfUpToDate",value:function(){var db=Ed(regeneratorRuntime.mark(function Gb(){var sc,ub,sb,fa,Db,ab;return regeneratorRuntime.wrap(function(eb){for(;;)switch(eb.prev=eb.next){case 0:return sc="git rev-parse main",eb.next=3,jc.evalOnServer("System.baseURL").then(function(kc){return kc.replace("file://","")});case 3:return ub=eb.sent,eb.prev=4,eb.next=7,jc.runCommand("git fetch",
{cwd:ub}).whenDone();case 7:return eb.next=9,jc.runCommand(sc,{cwd:ub}).whenDone();case 9:jc.__inter0__=eb.sent;sb=jc.__inter0__.stdout;eb.next=17;break;case 13:return eb.prev=13,eb.t0=eb["catch"](4),this.showError(),eb.abrupt("return");case 17:return fa=sb.split("\n")[0],eb.next=20,jc.resource("https://api.github.com/repos/LivelyKernel/lively.next/commits/main").readJson();case 20:Db=eb.sent;ab=Db.sha;if(fa===ab){eb.next=24;break}return eb.abrupt("return",this.showOutdated(fa.slice(0,6)));case 24:return eb.abrupt("return",
this.showUpToDate(fa.slice(0,6)));case 25:case "end":return eb.stop()}},Gb,this,[[4,13]])}));return function(){return db.apply(this,arguments)}}()},{key:"showOutdated",value:function(db){var Xa=this.ui,Gb=Xa.checking,sc=Xa.outdated;Xa.status.value=["Version: ",{},"[".concat(db,"]"),{fontWeight:"bold"}," (Please update!)"];Gb.visible=Gb.isLayoutable=!1;sc.visible=sc.isLayoutable=!0}},{key:"showError",value:function(){var db=this.ui,Xa=db.checking,Gb=db.outdated;db.status.value="Error while checking";
Xa.visible=Xa.isLayoutable=!1;Gb.visible=Gb.isLayoutable=!0}},{key:"showUpToDate",value:function(db){var Xa=this.ui,Gb=Xa.checking,sc=Xa.latest;Xa.status.value=["Version: ",{},"[".concat(db,"]"),{fontWeight:"bold"}];Gb.visible=Gb.isLayoutable=!1;sc.visible=sc.isLayoutable=!0}},{key:"reset",value:function(){var db=this.ui,Xa=db.checking,Gb=db.outdated,sc=db.latest;db.status.value="Checking version...";Xa.visible=Xa.isLayoutable=!0;Gb.visible=sc.visible=Gb.isLayoutable=sc.isLayoutable=!1}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"VersionChecker"}},{key:"properties",get:function(){return{isEpiMorph:{derived:!0,get:function(){return!this.isComponent}},respondsToVisibleWindow:{derived:!0,get:function(){return!this.isComponent}},ui:{derived:!0,get:function(){return{status:this.get("version status label"),checking:this.get("loading indicator"),outdated:this.get("icon outdated"),latest:this.get("icon latest")}}}}}}],Wb,{pathInPackage:function(){return"./studio/version-checker.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:306,end:3450})}(jc.Morph));jc.LivelyVersionChecker=jc.component["for"](function(){return jc.component({type:jc.VersionChecker,name:"lively version checker",borderColor:jc.Color.rgb(23,160,251),borderRadius:5,extent:jc.pt(135.5,25.1),fill:jc.Color.rgba(0,0,0,.6),hasFixedPosition:!0,layout:new jc.HorizontalLayout({align:"center",autoResize:!0,direction:"leftToRight",
orderByIndex:!0,padding:{height:0,width:0,x:5,y:5},reactToSubmorphAnimations:!1,renderViaCSS:!0,resizeSubmorphs:!1,spacing:5}),nativeCursor:"pointer",position:jc.pt(535,438.4),submorphs:[{type:jc.Label,name:"version status label",fontColor:jc.Color.rgb(253,254,254),reactsToPointer:!1,textAndAttributes:["Checking version...",null]},{type:jc.HTMLMorph,name:"loading indicator",cssDeclaration:'\n .lds-spinner {\n  color: official;\n  display: inline-block;\n  position: relative;\n  width: 64px;\n  height: 64px;\n}\n.lds-spinner div {\n  transform-origin: 32px 32px;\n  animation: lds-spinner .6s linear infinite;\n}\n.white-spinner div:after {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 3px;\n  left: 29px;\n  width: 5px;\n  height: 14px;\n  border-radius: 20%;\n  background: white;\n}\n.lds-spinner div:nth-child(1) {\n  transform: rotate(0deg);\n  animation-delay: -.55s;\n}\n.lds-spinner div:nth-child(2) {\n  transform: rotate(30deg);\n  animation-delay: -.5s;\n}\n.lds-spinner div:nth-child(3) {\n  transform: rotate(60deg);\n  animation-delay: -0.45s;\n}\n.lds-spinner div:nth-child(4) {\n  transform: rotate(90deg);\n  animation-delay: -0.4s;\n}\n.lds-spinner div:nth-child(5) {\n  transform: rotate(120deg);\n  animation-delay: -0.35s;\n}\n.lds-spinner div:nth-child(6) {\n  transform: rotate(150deg);\n  animation-delay: -0.3s;\n}\n.lds-spinner div:nth-child(7) {\n  transform: rotate(180deg);\n  animation-delay: -0.25s;\n}\n.lds-spinner div:nth-child(8) {\n  transform: rotate(210deg);\n  animation-delay: -0.2s;\n}\n.lds-spinner div:nth-child(9) {\n  transform: rotate(240deg);\n  animation-delay: -0.15s;\n}\n.lds-spinner div:nth-child(10) {\n  transform: rotate(270deg);\n  animation-delay: -0.1s;\n}\n.lds-spinner div:nth-child(11) {\n  transform: rotate(300deg);\n  animation-delay: -0.05s;\n}\n.lds-spinner div:nth-child(12) {\n  transform: rotate(330deg);\n  animation-delay: 0s;\n}\n@keyframes lds-spinner {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}',
extent:jc.pt(83.7,68.1),fill:jc.Color.rgba(255,255,255,0),html:'<div class="white-spinner lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>',scale:.2214986798373248},{type:jc.Label,name:"icon outdated",fontColor:jc.Color.rgb(231,76,60),isLayoutable:!1,textAndAttributes:jc.Icon.textAttribute("exclamation-triangle"),visible:!1},{type:jc.Label,name:"icon latest",fontColor:jc.Color.rgb(40,180,99),isLayoutable:!1,
textAndAttributes:jc.Icon.textAttribute("check-circle"),visible:!1}]})},{module:"lively.ide/studio/version-checker.cp.js","export":"LivelyVersionChecker",range:{start:3497,end:6851}},jc.LivelyVersionChecker);var qb=bd("LivelyVersionChecker",jc.LivelyVersionChecker);jc.LivelyVersionChecker=qb;jc.VersionChecker=Od}}});