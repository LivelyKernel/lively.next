System.register(["./__rootModule___commonjs-entry-51a55f66.js","@babel/plugin-syntax-import-meta"],function(bd,Dd){var se,Rc,ad,Ne;return{setters:[function(Cb){se=Cb._;Rc=Cb.N;ad=Cb.s;Ne=Cb.bs},function(){}],execute:function(){function Cb(vd){return Sd.apply(this,arguments)}function Sd(){Sd=se(regeneratorRuntime.mark(function fe(Ed){var jc,Od,qb=arguments;return regeneratorRuntime.wrap(function(ic){for(;;)switch(ic.prev=ic.next){case 0:return jc=1<qb.length&&void 0!==qb[1]?qb[1]:[],ic.next=3,Dd.import("mocha-es6/index.js");
case 3:return Od=ic.sent,ic.abrupt("return",Od.loadTestModuleAndExtractTestState(Ed,jc));case 5:case "end":return ic.stop()}},fe)}));return Sd.apply(this,arguments)}function ve(vd,Ed,fe,jc){return uc.apply(this,arguments)}function uc(){uc=se(regeneratorRuntime.mark(function qb(Ed,fe,jc,Od){var ic,Wb,lc,db,Xa,Gb;return regeneratorRuntime.wrap(function(sc){for(;;)switch(sc.prev=sc.next){case 0:Gb=function(ub){return new Promise(function(sb,fa){var Db=dd.arr.compact(ub.suite.suites).map(function(eb){return eb.file}),
ab=dd.chain(fe).filter(function(eb){return Db.includes(eb.file)}).pluck("tests").flat().value();if(!ab||!ab.length)return fa(Error("Trying to run tests of ".concat(Db.join(", ")," but cannot find them in loaded tests!")));ub.reporter(function(eb){eb.on("test",function(kc){try{var Vb=ab.find(function(pb){return pb.fullTitle===kc.fullTitle()});Vb.state="running";"function"===typeof jc&&jc(Vb,"test")}catch(pb){"function"===typeof Od&&Od(pb,"test")}});eb.on("pass",function(kc){try{var Vb=ab.find(function(pb){return pb.fullTitle===
kc.fullTitle()});Vb.state="succeeded";Vb.duration=kc.duration;"function"===typeof jc&&jc(Vb,"pass")}catch(pb){"function"===typeof Od&&Od(pb,"pass")}});eb.on("fail",function(kc,Vb){try{var pb=function(rb,Ib,da){rb.state="failed";rb.duration=rb.duration;rb.error=Ib},Nb=ab.find(function(rb){return rb.fullTitle===kc.fullTitle()});if(Nb)pb(Nb,Vb,kc.duration);else{var zb=dd.arr.invoke(kc.parent.tests,"fullTitle");ab.filter(function(rb){return zb.includes(rb.fullTitle)}).forEach(function(rb){return pb(rb,
Vb,kc.duration)})}"function"===typeof jc&&jc(Nb,"fail")}catch(rb){"function"===typeof Od&&Od(rb,"fail")}})});ub.run(function(eb){return sb({testsByFile:fe,mocha:ub})})})},ic=Rc(fe),sc.prev=2,ic.s();case 4:if((Wb=ic.n()).done){sc.next=15;break}lc=Wb.value.file;sc.next=8;return dd.loadMochaTestFile(lc,fe);case 8:return db=sc.sent,Xa=db.mocha,Ed&&(Xa=Xa.grep(Ed)),sc.next=13,Gb(Xa);case 13:sc.next=4;break;case 15:sc.next=20;break;case 17:sc.prev=17,sc.t0=sc["catch"](2),ic.e(sc.t0);case 20:return sc.prev=
20,ic.f(),sc.finish(20);case 23:return sc.abrupt("return",{mocha:Xa,testsByFile:fe});case 24:case "end":return sc.stop()}},qb,null,[[2,17,20,23]])}));return uc.apply(this,arguments)}bd({loadMochaTestFile:Cb,runMochaTests:ve});var dd=window.lively.FreezerRuntime.recorderFor("lively-system-interface/commands/mocha-tests.js");dd.loadMochaTestFile=Cb;dd.runMochaTests=ve;dd.arr=ad;dd.chain=Ne;dd.loadMochaTestFile=Cb;dd.runMochaTests=ve}}});