System.register(["@babel/plugin-syntax-import-meta"],function(bd,Dd){var se;return{setters:[function(Rc){se=Rc["default"]}],execute:function(){function Rc(e,h){h.forEach(function(l){l&&"string"!==typeof l&&!Array.isArray(l)&&Object.keys(l).forEach(function(b){if("default"!==b&&!(b in e)){var c=Object.getOwnPropertyDescriptor(l,b);Object.defineProperty(e,b,c.get?c:{enumerable:!0,get:function(){return l[b]}})}})});return Object.freeze(e)}function ad(e){"@babel/helpers - typeof";"function"===typeof Symbol&&
"symbol"===typeof Symbol.iterator?bd("ar",ad=function(h){return typeof h}):bd("ar",ad=function(h){return h&&"function"===typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h});return ad(e)}function Ne(e,h,l,b,c,g,a){try{var d=e[g](a),f=d.value}catch(k){l(k);return}d.done?h(f):Promise.resolve(f).then(b,c)}function Cb(e){return function(){var h=this,l=arguments;return new Promise(function(b,c){function g(f){Ne(d,b,c,g,a,"next",f)}function a(f){Ne(d,b,c,g,a,"throw",f)}var d=
e.apply(h,l);g(void 0)})}}function Sd(e,h){if(!(e instanceof h))throw new TypeError("Cannot call a class as a function");}function ve(e,h){for(var l=0;l<h.length;l++){var b=h[l];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(e,b.key,b)}}function uc(e,h,l){h&&ve(e.prototype,h);l&&ve(e,l);return e}function dd(e,h,l){h in e?Object.defineProperty(e,h,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[h]=l;return e}function vd(e,h){if("function"!==
typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(h&&h.prototype,{constructor:{value:e,writable:!0,configurable:!0}});h&&fe(e,h)}function Ed(e){bd("aS",Ed=Object.setPrototypeOf?Object.getPrototypeOf:function(h){return h.__proto__||Object.getPrototypeOf(h)});return Ed(e)}function fe(e,h){fe=Object.setPrototypeOf||function(l,b){l.__proto__=b;return l};return fe(e,h)}function jc(){if("undefined"===typeof Reflect||!Reflect.construct||
Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function Od(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qb(e){var h=jc();return function(){var l=Ed(e);if(h){var b=Ed(this).constructor;l=Reflect.construct(l,arguments,b)}else l=l.apply(this,arguments);l=!l||"object"!==typeof l&&"function"!==typeof l?
Od(this):l;return l}}function ic(e,h,l){"undefined"!==typeof Reflect&&Reflect.get?bd("aR",ic=Reflect.get):bd("aR",ic=function(b,c,g){for(;!Object.prototype.hasOwnProperty.call(b,c)&&(b=Ed(b),null!==b););if(b)return c=Object.getOwnPropertyDescriptor(b,c),c.get?c.get.call(g):c.value});return ic(e,h,l||e)}function Wb(e,h){var l;if(!(l=Xa(e)))if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){l=[];var b=!0,c=!1,g=void 0;try{for(var a=e[Symbol.iterator](),d;!(b=(d=a.next()).done)&&(l.push(d.value),
!h||l.length!==h);b=!0);}catch(f){c=!0,g=f}finally{try{if(!b&&null!=a["return"])a["return"]()}finally{if(c)throw g;}}}else l=void 0;return l||sc(e,h)||sb()}function lc(e){return Xa(e)||Gb(e)||sc(e)||sb()}function db(e){var h=Array.isArray(e)?ub(e):void 0;if(!(e=h||Gb(e)||sc(e)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return e}function Xa(e){if(Array.isArray(e))return e}function Gb(e){if("undefined"!==
typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function sc(e,h){if(e){if("string"===typeof e)return ub(e,h);var l=Object.prototype.toString.call(e).slice(8,-1);"Object"===l&&e.constructor&&(l=e.constructor.name);if("Map"===l||"Set"===l)return Array.from(e);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return ub(e,h)}}function ub(e,h){if(null==h||h>e.length)h=e.length;for(var l=0,b=Array(h);l<h;l++)b[l]=e[l];return b}function sb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function fa(e,h){var l;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(l=sc(e))||h&&e&&"number"===typeof e.length){l&&(e=l);var b=0;h=function(){};return{s:h,n:function(){return b>=e.length?{done:!0}:{done:!1,value:e[b++]}},e:function(d){throw d;},f:h}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var c=!0,g=!1,a;return{s:function(){l=e[Symbol.iterator]()},
n:function(){var d=l.next();c=d.done;return d},e:function(d){g=!0;a=d},f:function(){try{c||null==l.return||l.return()}finally{if(g)throw a;}}}}function Db(){return function(){}}function ab(){return function(e){return e}}function eb(){return function(){return null}}function kc(){return function(){return!1}}function Vb(){return function(){return!0}}function pb(){return function(){throw Error("Not yet implemented");}}function Nb(e){var h=[],l;for(l in e)e.__lookupGetter__(l)||"function"!==typeof e[l]||
h.push(l);return h}function zb(e){var h=[],l;for(l in e)!e.__lookupGetter__(l)&&e.hasOwnProperty(l)&&"function"===typeof e[l]&&h.push(l);return h}function rb(e){if(e.superclass)return[];var h=e.toString();e="";var l=h.match(/(?:\(([^\)]*)\)|([^\(\)-+!]+))\s*=>/);l?e=l[1]||l[2]||"":(h=h.match(/^[\s\(]*function[^(]*\(([^)]*)\)/))&&h[1]&&(e=h[1]);return e.replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",").map(function(b){return b.trim()}).filter(function(b){return!!b})}
function Ib(e){var h="";e.declaredClass?h+=e.declaredClass+">>":e.declaredObject&&(h+=e.declaredObject+".");return h+(e.methodName||e.displayName||e.name||"anonymous")}function da(e){e=String(e).replace(/^function[^\{]+\{\s*/,"").replace(/\}$/,"").trim();for(var h=e.split(/\n|\r/),l,b=0;b<h.length;b++){var c=h[b].match(/^(\s+)[^\s]/);c&&(void 0===l||c[1].length<l.length)&&(l=c[1])}return l?e.replace(new RegExp("^"+l,"gm"),""):e}function ka(e){var h=Date.now();e();return Date.now()-h}function va(e,
h){for(var l=Date.now(),b=0;b<h;b++)e();return(Date.now()-l)/h}function Fa(e,h){var l=Array.prototype.slice.call(arguments),b=l.shift();h=1E3*l.shift();return setTimeout(function(){return b.apply(b,l)},h)}function M(e,h){var l,b,c,g,a,d,f=lg.debounce(h,function(){a=g=!1});return function(){l=this;b=arguments;c||(c=setTimeout(function(){c=null;a&&e.apply(l,b);f()},h));g?a=!0:d=e.apply(l,b);f();g=!0;return d}}function Aa(e,h,l){var b;return function(){var c=this,g=arguments;l&&!b&&h.apply(c,g);clearTimeout(b);
b=setTimeout(function(){b=null;l||h.apply(c,g)},e)}}function wb(e,h,l){var b=lg._throttledByName;return b[e]?b[e]:b[e]=lg.throttle(function(){lg.debounceNamed(e,h,function(){delete b[e]})();return l.apply(this,arguments)},h)}function Na(e,h,l,b){var c=lg._debouncedByName;return c[e]?c[e]:c[e]=lg.debounce(h,function(){delete c[e];return l.apply(this,arguments)},b)}function hb(e,h){var l=lg._queues,b=l[e]||(l[e]={_workerActive:!1,worker:h,tasks:[],drain:null,push:function(c){b.tasks.push(c);b._workerActive||
b.activateWorker()},pushAll:function(c){c.forEach(function(g){b.tasks.push(g)});b._workerActive||b.activateWorker()},pushNoActivate:function(c){b.tasks.push(c)},handleError:function(c){c&&console.error("Error in queue: "+c)},activateWorker:function(){function c(d){b.handleError(d);b.activateWorker()}var g=b.tasks,a=b._workerActive;if(0===g.length)a&&(b._workerActive=!1,"function"===typeof b.drain&&b.drain()),delete l[e];else{a||(b._workerActive=!0);try{b.worker(g.shift(),c)}catch(d){c(d)}}}});return b}
function Bb(e,h,l){function b(){k&&clearTimeout(k);d=!0;delete g[e]}function c(n){d||(b(),a.callbacks.forEach(function(p){try{p.apply(null,n)}catch(q){console.error("Error when invoking callbacks in queueUntil ["+e+"]:\n"+String(q.stack||q))}}))}var g=lg._queueUntilCallbacks,a=g[e];if(a)return a;var d=!1,f=!1,k;l&&(k=setTimeout(function(){d||c([Error("timeout")])},l));a=g[e]={callbacks:[],cancel:function(){f=!0;b()},whenDone:function(n){a.callbacks.push(n);return a}};setTimeout(function(){if(!f)try{h(function(){c(arguments)})}catch(n){c([n])}},
0);return a}function ba(){var e=Array.prototype.slice,h=e.call(arguments),l=lg._composeAsyncDefaultEndCallback,b=l,c,g,a=new Promise(function(d,f){c=d;g=f});return h.reverse().reduce(function(d,f,k){var n=!1;return function(){function p(){n=!0;var u=e.call(arguments),x=u.shift();x?(b(x),g(x)):d.apply(null,u)}var q=e.call(arguments);if(b===l&&k===h.length-1){for(;q.length&&"function"!==typeof q[q.length-1];)q.pop();"function"===typeof q[q.length-1]&&(b=q.pop())}if("function"===typeof f)try{var r=f.apply(this,
q.concat([p]));if(r&&"function"===typeof r.then&&"function"===typeof r["catch"])r.then(function(u){return p(null,u)})["catch"](function(u){return p(u)})}catch(u){console.error("composeAsync: ",u.stack||u),n||(b(u),g(u))}else if(f&&"function"===typeof f.then&&"function"===typeof f["catch"])f.then(function(u){p(null,u)})["catch"](function(u){p(u)});else q=Error("Invalid argument to composeAsync: "+f),b(q),g(q);return a}},function(){var d=e.call(arguments);b.apply(null,[null].concat(d));c(d[0])})}function dc(){return Array.prototype.slice.call(arguments).reverse().reduce(function(e,
h){return function(){return e(h.apply(this,arguments))}},function(e){return e})}function la(e){return function(){var h=Array.prototype.slice.call(arguments);h=[h[1],h[0]].concat(h.slice(2));return e.apply(null,h)}}function Fb(e){e=e||function(){};return function(){var h=Array.from(arguments);e.apply(null,[null].concat(h))}}function vb(e,h,l){var b=Date.now(),c=50;l||(l=h,h=e,e=void 0);(function a(){if(h())return l();if(e){var d=Date.now()-b;d=e-d;if(0>=d)return l(Error("timeout"));d<c&&(c=d)}setTimeout(a,
c)})()}function Ia(e,h,l){function b(a,d,f,k){if(g.length){var n=null;a=g.indexOf(a);-1<a&&g.splice(a,1);f?(g.length=0,n=Error("in waitForAll at"+("number"===typeof d?" "+d:"")+": \n"+(f.stack||String(f)))):k&&(c[d]=k);g.length||setTimeout(function(){l(n,c)},0)}}l||(l=h,h=e,e=null);e=e||{};var c=h.map(function(){return null});if(h.length){var g=Array.prototype.slice.call(h);h.forEach(function(a,d){try{a(function(){var f=Array.prototype.slice.call(arguments),k=f.shift();b(a,d,k,f)})}catch(f){b(a,d,
f,null)}});e.timeout&&setTimeout(function(){if(g.length){var a=c.map(function(d,f){return null===d&&f}).filter(function(d){return"number"===typeof d}).join(", ");b(null,null,Error("waitForAll timed out, functions at "+a+" not done"),null)}},e.timeout)}else l(null,c)}function xb(e){function h(){return e.apply(this,g.concat(Array.prototype.slice.call(arguments)))}for(var l=arguments.length,b=Array(1<l?l-1:0),c=1;c<l;c++)b[c-1]=arguments[c];if(1>=arguments.length)return arguments[0];var g=Array.prototype.slice.call(arguments);
e=g.shift();h.isWrapper=!0;h.originalFunction=e;return h}function Rb(e,h){var l=function(){var b=Array.prototype.slice.call(arguments);b=h.isWrapper?b:[e.bind(this)].concat(b);return h.apply(this,b)};l.isWrapper=!0;l.originalFunction=e;return l}function yc(e){for(;e.originalFunction;)e=e.originalFunction;return e}function id(e){var h=[];do h.push(e),e=e.originalFunction;while(e);return h}function ob(e,h,l){l.originalFunction=e[h];var b=e.hasOwnProperty(h);e[h]=function(){b?e[h]=l.originalFunction:
delete e[h];return l.apply(this,arguments)};return e}function Pb(e){if(e){if("function"!==typeof e)throw Error("once() expecting a function");var h=!1,l;return function(){if(h)return l;h=!0;return l=e.apply(this,arguments)}}}function tb(){var e=!1;return Array.prototype.slice.call(arguments).map(function(h){return function(){if(!e)return e=!0,h.apply(this,arguments)}})}function xc(e,h){var l=Array.prototype.slice.call(arguments),b=lg._eitherNameRegistry;e=l.shift();var c=b[e]||(b[e]={wasCalled:!1,
callsLeft:0});c.callsLeft++;return function(){c.callsLeft--;0>=c.callsLeft&&delete b[e];if(!c.wasCalled)return c.wasCalled=!0,h.apply(this,arguments)}}function Pc(e){return eval(e)}function nd(e){return lg.evalJS("("+e.toString()+");")}function Id(e,h){return lg.Closure.fromFunction(e,h).recreateFunc()}function Hb(e,h,l,b){var c=l||e.name;if(!c)throw Error("Function that wants to be a script needs a name: "+this);l=Object.getPrototypeOf(h);var g={"this":h};b&&(g=lg.objectMerge([g,b]));l&&l[c]&&(g.$super=
lg.Closure.fromFunction(function(){try{return Object.getPrototypeOf(h)[c].apply(h,arguments)}catch(a){return"undefined"!==typeof $world?$world.logError(a,"Error in $super call"):console.error("Error in $super call: "+a+"\n"+a.stack),null}},{obj:h,name:c}).recreateFunc());return lg.addToObject(lg.asScript(e,g),h,c)}function Kd(e,h,l){e.displayName=l;var b=h.attributeConnections?h.attributeConnections.filter(function(c){return"update"===c.getSourceAttrName()}):[];b&&b.forEach(function(c){c.disconnect()});
h[l]=e;ad(h)&&(e.declaredObject=lg.safeToString(h));"undefined"!==typeof lively&&h&&lively.Tracing&&lively.Tracing.stackTracingEnabled&&lively.Tracing.instrumentMethod(h,l,{declaredObject:lg.safeToString(h)});b&&b.forEach(function(c){c.connect()});return e}function vc(e,h,l){e.hasLivelyClosure&&(e.livelyClosure.funcProperties[h]=l)}function Qc(e){return e.hasLivelyClosure?e.livelyClosure.varMapping:e.isWrapper?e.originalFunction.varMapping:e.varMapping?e.varMapping:{}}function kb(e,h,l){e[h]=l;e.hasLivelyClosure&&
(e.livelyClosure.funcProperties[h]=l)}function Cc(e){for(var h=[],l=e.prototype;l;)h=Object.keys(l).reduce(function(b,c){"function"===typeof l[c]&&-1===b.indexOf(c)&&b.push(c);return b},h),l=Object.getPrototypeOf(l);return h}function zc(e){return Object.keys(e.prototype).filter(function(h){return"function"===typeof e.prototype[h]})}function Fc(e,h){var l=function(b){var c=Array.prototype.slice.call(arguments);c.shift();try{return b.apply(e,c)}catch(g){if("undefined"!==typeof lively&&lively.morphic&&
lively.morphic.World&&lively.morphic.World.current())throw lively.morphic.World.current().logError(g),g;h?console.warn("ERROR: %s.%s(%s): err: %s %s",e,h,c,g,g.stack||""):console.warn("ERROR: %s %s",g,g.stack||"");throw g;}};l.methodName="$logErrorsAdvice";l=lg.wrap(e,l);l.originalFunction=e;l.methodName="$logErrorsWrapper";return l}function xd(e,h){var l=function(b){var c=Array.prototype.slice.call(arguments);c.shift();try{var g=b.apply(e,c)}catch(a){throw console.warn("failed to load "+h+": "+a),
"undefined"!==typeof lively&&lively.lang.Execution&&lively.lang.Execution.showStack(),a;}console.log("completed "+h);return g};l.methodName="$logCompletionAdvice::"+h;l=lg.wrap(e,l);l.methodName="$logCompletionWrapper::"+h;l.originalFunction=e;return l}function Uc(e,h){var l=function(c){var g=Array.prototype.slice.call(arguments);g.shift();b=c.apply(e,g);h?console.warn("%s(%s) -> %s",lg.qualifiedMethodName(e),g,b):console.log("%s(%s) -> %s",lg.qualifiedMethodName(e),g,b);return b};l.methodName="$logCallsAdvice::"+
lg.qualifiedMethodName(e);var b=lg.wrap(e,l);b.originalFunction=e;b.methodName="$logCallsWrapper::"+lg.qualifiedMethodName(e);return b}function Md(e,h){return lg.wrap(e,function(l){var b=Array.prototype.slice.call(arguments);b.shift();h.push(b);b=l.apply(e,b);h.pop();return b})}function Ob(){try{throw Error();}catch(e){return String(e.stack).split(/\n/).slice(2).map(function(h){return h.replace(/^\s*at\s*([^\s]+).*/,"$1")}).join("\n")}}function Le(e,h,l){l=l||0;var b=[];if(e<=h)for(0>=l&&(l=-l||1);e<=
h;e+=l)b.push(e);else for(0<=l&&(l=-l||-1);e>=h;e+=l)b.push(e);return b}function We(e,h){for(var l=Array(e);0<e;)l[--e]=h;return l}function xe(e,h){for(var l=Array(e);0<e;)l[--e]=h(e);return l}function Fg(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(e&&Array.isArray(e)){for(var c=0,g=e.length-1;c<=g;){var a=c+Math.floor((g-c)/2),d=l?l(e[a]):e[a];if(d===h)return e[a];d>h?g=a-1:c=a+1}if(b){if(!e[c])return e[g];if(!e[g])return e[c];b=l?l(e[c]):e[c];a=l?l(e[g]):e[g];return 0>
Math.abs(b-h)-Math.abs(a-h)?e[c]:e[g]}}}function Zc(e,h){var l;e.find(function(b,c){return l=h(b,c)});return l}function rd(e,h){return e.filter(function(l){return!!l[h]})}function ti(e,h){"string"===typeof h&&(h=new RegExp(h,"i"));return e.filter(function(l){return String(l).match(h)})}function dg(e,h){return e.filter(function(l,b){return!!h[b]})}function Of(e,h,l){return e.filter(function(b,c){return!h.call(l,b,c)})}function mg(e,h){return e.filter(function(l){return!l[h]})}function wf(e,h){return e.filter(function(l){return l!==
h})}function mf(e,h){return e.filter(function(l){return-1===h.indexOf(l)})}function Mb(e,h){if(!e.length)return e;var l=[e[0]];if(h)for(h=1;h<e.length;h++){var b=e[h];b!==l[l.length]&&l.push(b)}else for(h=1;h<e.length;h++)b=e[h],-1===l.indexOf(b)&&l.push(b);return l}function gd(e,h,l){for(var b=e.slice(),c=b.length;c--;)for(var g=e[c],a=c+1;a<b.length;a++)h.call(l,g,b[a])&&b.splice(a--,1);return b}function Vd(e,h){for(var l={},b=[],c=0;c<e.length;c++){var g=e[c];l[g[h]]||(l[g[h]]=!0,b.push(g))}return b}
function sf(e){return e.filter(Boolean)}function hg(e){for(var h=0,l=0,b=e.length;h<b;)e.hasOwnProperty(h)&&(e[l++]=e[h]),h++;for(;l++<b;)e.pop();return e}function bh(){var e=Array.from(arguments),h=e.shift(),l="function"===typeof Ef.last(e)?e.pop():function(c){return c},b=[h].concat(e).map(function(c){return Array.from(c)});return h.map(function(c,g){return l(Ef.pluck(b,g),g)})}function Qf(e,h){return e.reduce(function(l,b){0<l.length&&l.push(h);l.push(b);return l},[])}function he(e,h,l,b,c,g,a,
d){return e.map(function(f){return f[h](l,b,c,g,a,d)})}function Uf(e,h){return e.map(function(l){return l[h]})}function $g(e,h){var l=e.length;if(!h||l!==h.length)return!1;for(var b=0;b<l;b++){if(e[b]&&h[b]&&e[b].equals&&h[b].equals)if(e[b].equals(h[b]))continue;else return!1;if(e[b]!==h[b])return!1}return!0}function Ta(e,h){var l=e.length;if(!h||l!==h.length)return!1;for(var b=0;b<l;b++)if(!Ef.objectEquals(e[b],h[b]))return!1;return!0}function th(e,h){if(h)for(h=1;h<e.length;h++){if(e[h-1]<e[h])return!1}else for(h=
1;h<e.length;h++)if(e[h-1]>e[h])return!1;return!0}function Be(e,h,l){return Ef.pluck(e.map(function(b,c){return{value:b,criteria:h.call(l,b,c)}}).sort(function(b,c){b=b.criteria;c=c.criteria;return b<c?-1:b>c?1:0}),"value")}function cb(e,h){return Ef.sortBy(e,function(l){return l[h]})}function Yb(e){return e.slice().reverse()}function de(e,h,l){l=l||String;return e.map(function(b){return l(b).match(h)})}function P(e){return e[0]}function pa(e){return e[e.length-1]}function wa(e,h){return Ef.uniq(e).filter(function(l){return-1<
h.indexOf(l)})}function Ea(e,h){e=e.slice();for(var l=0;l<h.length;l++){var b=h[l];-1===e.indexOf(b)&&e.push(b)}return e}function ia(e,h,l){e.splice(l,0,h)}function Ca(e,h){e.splice(h,1)}function w(e,h){var l=e.indexOf(h);0<=l&&Ef.removeAt(e,l);return h}function ma(e,h){e.push.apply(e,h);return e}function ua(e,h,l){e.splice.apply(e,[l,0].concat(h))}function ha(e,h){e.includes(h)||e.push(h)}function ra(e,h,l){e.splice(l,1,h)}function mb(e){e.length=0;return e}function E(e,h){for(var l=0;l<e.length;l++)if(!h.includes(e[l]))return!1;
return!0}function R(e,h,l,b){l=l||Ef.NullFunction;h=h||function(c,g,a){g.call(b,c,a)};return e.reduceRight(function(c,g,a){return function(){h.call(b,c,g,a)}},l)()}function Ya(e,h,l,b,c,g){b=b||function(){};return e.clone().reverse().reduce(function(a,d,f){return function(){h.call(c,d,f);g&&0!==f%g?a():a.delay(l)}},b)()}function gb(e,h,l){0>h&&(h=e.length+h);0>l&&(l=e.length+l);var b=e[h];e[h]=e[l];e[l]=b;return e}function $b(e,h){h=h||1;return e.slice(h).concat(e.slice(0,h))}function Sc(e,h,l){return Ef.Group.fromArray(e,
h,l)}function Ic(e,h){return Ef.groupBy(e,function(l){return l[h]})}function Pd(e,h,l){h=h||function(g){return g};var b=[],c=[];e.forEach(function(g,a){(h.call(l,g,a)?b:c).push(g)});return[b,c]}function Zd(e,h,l){function b(g,a){if(!a.length)return[g,[]];var d=a[0];a=a.slice(1);var f=g.concat([d]);if(h.call(l,f))return b(f,a);g=b(g,a);return[g[0],[d].concat(g[1])]}function c(g,a){if(!a.length)return g;a=b([],a);if(!a[0].length)throw Error("Batchify constrained does not ensure consumption of at least one item per batch!");
return c(g.concat([a[0]]),a[1])}return c([],e)}function ge(e,h){h=h||1;return Ef.range(0,Math.ceil(e.length/h)-1).map(function(l){return e.slice(l*h,l*h+h)},e)}function Ce(e,h){for(var l=e.map(function(a,d){return a[h[d]]}),b=h.slice(),c=e.length;c--;0<=c){var g=b[c]+1;if(e[c][g]){b[c]=g;break}else if(0===c){b=void 0;break}else b[c]=0}return[l,b]}function $e(e){for(var h=e.reduce(function(g,a){return g*a.length},1),l=e.map(function(g){return 0}),b=Array(h),c=0;c<h;c++)l=Ef.combinationsPick(e,l),b[c]=
l[0],l=l[1];return b}function pf(e,h){return e.slice(0,h)}function ig(e,h){return e.slice(h)}function Xf(e,h,l){for(var b=0;b<e.length&&h.call(l,e[b],b);b++);return e.slice(0,b)}function Vg(e,h,l){for(var b=0;b<e.length&&h.call(l,e[b],b);b++);return e.slice(b)}function Re(e){for(var h=Ef.range(0,e.length-1),l=Array(e.length),b=0;b<e.length;b++){var c=h.splice(Math.round(Math.random()*(h.length-1)),1);l[c]=e[b]}return l}function ae(e,h,l){h=h||function(c){return c};var b;e.reduce(function(c,g,a){a=
h.call(l,g,a);if("number"!==typeof a||a<=c)return c;b=g;return a},-Infinity);return b}function Sb(e,h,l){h=h||function(b){return b};return Ef.max(e,function(b,c){return-h.call(l,b,c)})}function Hd(e){for(var h=0,l=0;l<e.length;l++)h+=e[l];return h}function hf(e,h){return e.reduce(function(l,b){return b===h?l+1:l},0)}function zf(e,h){if("undefined"===typeof h||"number"===typeof h){var l=h||Math.ceil(Math.log(e.length)/Math.log(2)+1),b=Math.ceil(Math.round(e.length/l));return Ef.range(0,l-1).map(function(c){return e.slice(c*
b,(c+1)*b)})}if(h instanceof Array)return e.reduce(function(c,g){if(g<h[1])return c[0].push(g),c;for(var a=1;a<h.length;a++)if(g>=h[a]&&(!h[a+1]||g<=h[a+1]))return c[a].push(g),c;throw Error("Histogram creation: Cannot group data ".concat(g," into thresholds ").concat(h));},Ef.range(1,h.length).map(function(){return[]}))}function Gg(e){return[].concat(e)}function vg(e,h,l){return e.filter(h,l)}function tg(e,h,l){return e.find(h,l)}function pd(e,h,l){return e.map(h,l)}function Z(e,h){return e.flat(h)}
function Ga(e,h,l){return e.flatMap(h,l)}function fb(e,h,l){return e.slice(h,l)}function ya(e){if(e&&Array.isArray(e))return"["+e.map(ya)+"]";if("string"!==typeof e)return String(e);e=String(e);e=e.replace(/\n/g,"\\n\\\n");e=e.replace(/(")/g,"\\$1");return'"'+e+'"'}function tc(e){return Array.isArray(e)}function Mc(e){return e&&1===e.nodeType}function Cd(e){return e instanceof Function}function Ee(e){return"boolean"===typeof e}function bf(e){return"string"===typeof e}function Oe(e){return"number"===
typeof e}function Fe(e){return"undefined"===typeof e}function Pf(e){return e instanceof RegExp}function eg(e){return"object"===ad(e)}function be(e){if(!e)return!0;switch(ad(e)){case "string":case "number":case "boolean":return!0}return!1}function v(e){for(var h in e)if(e.hasOwnProperty(h))return!1;return!0}function oa(e,h){if(e===h)return!0;if(!e||!h)return e===h;if(Array.isArray(e))return ch.arrayDeepEquals(e,h);switch(e.constructor){case String:case Date:case Boolean:case Number:return e===h}if("function"===
typeof e.isEqualNode)return e.isEqualNode(h);if("function"===typeof e.equals)return e.equals(h);var l=[],b;for(b in e)if(l.push(b),"function"!==typeof e[b]&&!oa(e[b],h[b]))return!1;for(var c in h)if(-1===l.indexOf(c)&&"function"!==typeof h[c]&&!oa(h[c],e[c]))return!1;return!0}function Oc(e){return e?Object.keys(e).map(function(h){return e[h]}):[]}function Tb(e,h){for(var l={},b=0;b<h.length;b++)l[h[b]]=e[h[b]];return l}function ne(e,h){e=e||{};e=ch.getOwnPropertyDescriptors(e);for(var l=0;l<h.length;l++)h[l]in
e&&delete e[h[l]];return Object.defineProperties({},e)}function Ye(e,h,l,b){h=ch.functionFromString(h);return ch.asScriptOf(h,e,l,b)}function Kf(e,h){for(var l=null,b=1;b<arguments.length;b++)if("string"===typeof arguments[b])l=arguments[b],e.categories||(e.categories={}),e.categories[l]||(e.categories[l]=[]),l=e.categories[l];else{h=arguments[b];for(var c in h){var g=h.__lookupGetter__(c),a=h.__lookupSetter__(c);g&&e.__defineGetter__(c,g);a&&e.__defineSetter__(c,a);g||a||(g=h[c],e[c]=g,l&&l.push(c),
"function"===typeof g&&(g.displayName||(g.displayName=c),"undefined"!==typeof lively&&lively.Module&&lively.Module.current&&(g.sourceModule=lively.Module.current())))}}return e}function jg(e){if(ch.isPrimitive(e))return e;if(Array.isArray(e))return Array.prototype.slice.call(e);var h={},l;for(l in e)e.hasOwnProperty(l)&&(h[l]=e[l]);h.__proto__=e.__proto__;return h}function Og(e,h,l){for(var b={},c=0;c<h.length;c++)h[c]in e&&(b[h[c]]=l?l(h[c],e[h[c]]):e[h[c]]);return b}function te(e,h,l){h=h||{};l=
l||0;if(h.customPrinter){var b=h._ignoreSignal||(h._ignoreSignal={}),c=h.customPrinter(e,b,function(q){return te(q,h,l+1)});if(c!==b)return c}if(!e)return ch.print(e);if("function"===typeof e)return h.printFunctionSource?String(e):"function"+(e.name?" "+e.name:"")+"("+ch.argumentNames(e).join(",")+") {/*...*/}";switch(e.constructor){case String:case Boolean:case RegExp:case Number:return ch.print(e)}if("function"===typeof e.serializeExpr)return e.serializeExpr();var g=e&&Array.isArray(e);b=g?"[":
"{";c=g?"]":"}";if(h.maxDepth&&l>=h.maxDepth)return b+"/*...*/"+c;var a=[];if(g)a=e.map(function(q){return te(q,h,l+1)});else{var d=Object.keys(e).sort(function(q,r){var u="function"===typeof e[q];return u===("function"===typeof e[r])?q<r?-1:q>r?1:0:u?1:-1});"function"===typeof h.keySorter&&(d=d.sort(h.keySorter));for(var f=0;f<d.length;f++){if(f>(h.maxNumberOfKeys||Infinity)){d=d.length-f;a.push("...".concat(d," hidden ").concat(1<d?"entries":"entry","..."));break}var k=d[f];g&&te(e[k],h,l+1);var n=
te(e[k],h,l+1);a.push((h.escapeKeys?JSON.stringify(k):k)+": "+n)}}if(0===a.length)return b+c;d=a.join(", ");f=(!g||h.newLineInArrays)&&(!h.minLengthForNewLine||d.length>=h.minLengthForNewLine);var p=ch.indent("",h.indent||"  ",l);k=ch.indent("",h.indent||"  ",l+1);n=f&&!g?"\n"+k:"";g=f&&!g?"\n"+p:"";f&&(d=a.join(","+(f?"\n"+k:"")));return b+n+d+g+c}function Eh(e){return 1<arguments.length?Eh(Array.prototype.slice.call(arguments)):Array.isArray(e[0])?Array.prototype.concat.apply([],e):e.reduce(function(h,
l){for(var b in l)l.hasOwnProperty(b)&&(h[b]=l[b]);return h},{})}function $h(e,h){if(!e)return h;if(!h)return e;if(Array.isArray(e)){if(!Array.isArray(h))return h;var l=e.map(function(b,c){return $h(b,h[c])});h.length>e.length&&(l=l.concat(h.slice(e.length)));return l}return e.constructor!==Object||h.constructor!==Object?h:Object.keys(e).concat(Object.keys(h)).reduce(function(b,c){e[c]?h[c]?"object"!==ad(e[c])||"object"!==ad(h[c])?b[c]=h[c]:b[c]=$h(e[c],h[c]):b[c]=e[c]:b[c]=h[c];return b},{})}function Gi(e){var h=
[];for(f in e){var l=e[f],b=l.hasOwnProperty("before")?l.before:l.before=[];l=l.hasOwnProperty("after")?l.after:l.after=[];var c="";try{c=String(this)}catch(k){}for(var g=b.length;g--;){var a=b[g],d=e[a];d?(d.hasOwnProperty("after")||(d.after=[]),d.after.push(f)):(console.warn("[initializeProperties] ".concat(c," sortProperties: ")+"Property ".concat(f," requires to be initialized before ").concat(a," ")+"but that property cannot be found."),b.splice(g,1))}for(b=l.length;b--;)g=l[b],e[g]||(console.warn("[initializeProperties] ".concat(c,
" sortProperties: ")+"Property ".concat(f," requires to be initialized after ").concat(g," ")+"but that property cannot be found."),l.splice(b,1));h.push(f)}var f=[];l=[];for(c=h.length+1;h.length;){if(c===h.length)throw Error("Circular dependencies in handler order, could not resolve properties "+h.map(function(k){var n=e[k].before,p=e[k].after;if(!(n&&n.length||p&&p.length))return"";k="".concat(k,"\n");n&&n.length&&(k+="  - before ".concat(n.join(","),"\n"));p&&p.length&&(k+="  - after ".concat(p.join(","),
"\n"));return k}).join(""));c=h.length;b=[];for(g=h.length;g--;)a=h[g],ch.isSubset(e[a].after,l)&&(h.splice(g,1),l.push(a),b.push(a));f.push(b)}return f.flat()}function Ng(e){return Object.create(e)}function Ii(e,h){for(var l=[];e;)e.hasOwnProperty(h)&&l.unshift(e[h]),e=Object.getPrototypeOf(e);return l}function fi(e,h){return ch.merge(ch.valuesInPropertyHierarchy(e,h))}function Ji(e){if(!e||"object"!==ad(e)||e instanceof RegExp)return e;var h=Array.isArray(e)?Array(e.length):{},l;for(l in e)e.hasOwnProperty(l)&&
(h[l]=Ji(e[l]));return h}function gi(e){return null===e?"null":"undefined"===typeof e?"undefined":e.constructor.name}function xj(e){return-1===["null","undefined","Boolean","Number","String"].indexOf(ch.typeStringOf(e))}function yg(e){function h(b,c,g,a){if(b.constructor.name===c){l+=g;if(b.length||Object.keys(b).length)l+="...";l+=a}}if(!ch.isMutableType(e))return ch.safeToString(e);if("Object"!==e.constructor.name&&!Array.isArray(e)&&e.constructor.name)return e.constructor.name?e.constructor.name:
Object.prototype.toString.call(e).split(" ")[1].split("]")[0];var l="";h(e,"Object","{","}");h(e,"Array","[","]");return l}function Ti(e){try{return(e?e.toString():String(e)).replace("\n","")}catch(h){return"<error printing object>"}}function ke(e){switch(ad(e)){case "string":return new String(e);case "boolean":return new Boolean(e);case "number":return new Number(e);default:return e}}function Mg(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"_",l=1;do var b=h+"-"+l++;while(b in
e);return b}function Hh(e,h){h!==e.constructor&&(e.constructor=h,ch.setPrototypeOf(e,h.prototype))}function Zf(){return of.formatFromArray(Array.prototype.slice.call(arguments))}function z(e){function h(q,r){return""+q}function l(q,r){return q.toString()}function b(q,r){return of.inspectObject(q)}var c=e.shift();c||console.log("Error in Strings>>formatFromArray, first arg is undefined");var g={s:h,d:l,i:l,f:function(q,r,u){return-1<u?q.toFixed(u):q.toString()},o:b},a=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;
c=function(q){for(var r=[],u=a.exec(q);u;u=a.exec(q)){var x=u[8]||u[5];x=x in g?g[x]:b;var y=u[3]?parseInt(u[3]):"."==u[4]?-1:0;r.push(q.substr(0,"%"==u[0][0]?u.index:u.index+1));r.push({appender:x,precision:y});q=q.substr(u.index+u[0].length)}q&&r.push(q.toString());return r}(c);for(var d="",f=0,k=0;k<c.length;++k){var n=c[k];if(n&&"object"===ad(n)){var p=e[f++];d+=(n.appender||h)(p,d,n.precision)}else d+=""+n}return d}function C(e,h,l){if(!l||0>=l)return e;for(var b="";0<l;)l--,b+=h;return of.lines(e).map(function(c){return b+
c}).join("\n")}function K(e,h){h||(h="  ");return of.min(e.match(new RegExp("^("+h+")*","gm")).map(function(l){return Math.floor(l.length/h.length)}))}function T(e,h,l){h||(h="  ");l||(l=0);var b=of.minIndent(e,h);if(b===l)return e;if(b<l)return of.indent(e,h,l-b);var c=h.repeat(b-l);return of.lines(e).map(function(g){return g.slice(c.length)}).join("\n")}function O(e){return'"'+e.replace(/"/g,'\\"')+'"'}function qa(e){return of.articles.articlize(e)}function Ba(e){return of.articles.find(e)}function ib(e){if(e&&
Array.isArray(e))return"["+e.map(ib)+"]";if("string"!==typeof e)return String(e);e=String(e);e=e.replace(/\n/g,"\\n\\\n");e=e.replace(/(")/g,"\\$1");return'"'+e+'"'}function Ub(e,h){h=h||0;return e.reduce(function(l,b){return l+(Array.isArray(b)?Ub(b,h+1):of.indent(b+"\n","  ",h))},"")}function pc(e,h,l){return l?" ".repeat(h)+e:e+" ".repeat(h)}function Dc(e,h){function l(d){return g?!1:a?!0:h&&Array.isArray(h.align)&&"right"===h.align[d]}var b=[],c=h&&h.separator||" ",g=!h||!h.align||"left"===h.align,
a=h&&"right"===h.align;e.forEach(function(d){d.forEach(function(f,k){void 0===b[k]&&(b[k]=0);b[k]=Math.max(b[k],String(f).length)})});return e.map(function(d){return d.map(function(f,k){f=String(f);return of.pad(f,b[k]-f.length,l(k))}).join(c)}).join("\n")}function kd(e,h,l,b){function c(a,d,f){g[d]=b.repeat(a)+h(f,a);f=l(f,a);var k=d+1;if(!f||!f.length)return k;var n=k,p=f.length-1;f.forEach(function(q,r){k=c(a+1,k,q);q=p===r;var u=g[n].split(""),x=a*b.length+b.length;for(r=a*b.length+1;r<x;r++)u[r]=
"-";q&&(u[a*b.length]="\\");g[n]=u.join("");q||g.slice(n,k).forEach(function(y,D){y=y.split("");y[a*b.length]="|";g[n+D]=y.join("")});n=k});return k}var g=[];b=b||"  ";c(0,0,e);return g.join("\n")}function Ad(e){return e.split("")}function Rd(e){return e.split(/\n\r?/)}function cf(e,h){var l=h?h.sep:"\n\n";return h&&h.keepEmptyLines?e.split("\n").concat("").reduce(function(b,c){var g=b[0];b=b[1];/^\s*$/.test(b)===/^\s*$/.test(c)?b+="\n"+c:(b.length&&g.push(b),b=c);return[g,b]},[[],""])[0]:e.split(new RegExp(l+
"+"))}function Ud(e){return of.lines(e).compact()}function Ge(e,h){return e.split(h||/\s+/).filter(function(l){return!/^\s*$/.test(l)})}function Se(e,h){h=h||{};var l=h.cellSplitter||/\s+/,b=/^\s*$/;h=h.hasOwnProperty("convertTypes")?!!h.convertTypes:!0;e=of.lines(e);for(var c=[],g=0;g<e.length;g++){var a=of.tokens(e[g],l);h&&(a=a.map(function(d){if(d.match(b))return d;var f=Number(d);if(!isNaN(f))return f;f=new Date(d);return isNaN(+f)?d.trim():f}));0<a.length&&c.push(a)}return c}function mh(e){if("undefined"===
typeof document)throw Error("Cannot unescapeCharacterEntities");var h=document.createElement("div");h.innerHTML=e;return h.textContent}function Rh(e,h){return(e=e.trim().match(/([^?#]*)(#.*)?$/))?e[1].split(h||"&").inject({},function(l,b){if((b=b.split("="))[0]){var c=decodeURIComponent(b.shift());b=1<b.length?b.join("="):b[0];void 0!=b&&(b=decodeURIComponent(b));c in l?(Array.isArray(l[c])||(l[c]=[l[c]]),l[c].push(b)):l[c]=b}return l}):{}}function dh(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,
function(h,l){return String.fromCharCode("0x"+l)}))}function eh(e){return decodeURIComponent(atob(e).split("").map(function(h){return"%"+("00"+h.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function Rg(e){var h=e.match(of.urlStartRe),l=(h=h?h[0]:null)?e.slice(h.length):e;do e=l,l=e.replace(of.pathDoubleDotRe,"");while(l!=e);l=l.replace(of.pathDoubleSlashRe,"$1/");l=l.replace(of.pathDotRe,"/");h&&(l=h+l);return l}function $c(){return of.normalizePath(Array.prototype.slice.call(arguments).reduce(function(e,
h){return"string"===typeof h?e.replace(/\/*$/,"")+"/"+h.replace(/^\/*/,""):e}))}function vf(e){return e.replace(of.slashEndRe,"")+"/"}function ye(){return of.newUUIDTemplate.replace(of.newUUIDRe,of.newUUIDReplacer).toUpperCase()}function Yc(e,h){return"data:"+(h||"text/plain")+";base64,"+of.base64EncodeUnicode(e)}function Tc(e){var h=0,l=e.length;if(0==l)return h;for(var b=0;b<l;b++){var c=e.charCodeAt(b);h=(h<<5)-h+c;h&=h}return h}function td(e){function h(f,k,n,p,q,r){k=a(a(k,f),a(p,r));return a(k<<
q|k>>>32-q,n)}function l(f,k,n,p,q,r,u){return h(k&n|~k&p,f,k,q,r,u)}function b(f,k,n,p,q,r,u){return h(k&p|n&~p,f,k,q,r,u)}function c(f,k,n,p,q,r,u){return h(n^(k|~p),f,k,q,r,u)}function g(f,k){var n=f[0],p=f[1],q=f[2],r=f[3];n=l(n,p,q,r,k[0],7,-680876936);r=l(r,n,p,q,k[1],12,-389564586);q=l(q,r,n,p,k[2],17,606105819);p=l(p,q,r,n,k[3],22,-1044525330);n=l(n,p,q,r,k[4],7,-176418897);r=l(r,n,p,q,k[5],12,1200080426);q=l(q,r,n,p,k[6],17,-1473231341);p=l(p,q,r,n,k[7],22,-45705983);n=l(n,p,q,r,k[8],7,1770035416);
r=l(r,n,p,q,k[9],12,-1958414417);q=l(q,r,n,p,k[10],17,-42063);p=l(p,q,r,n,k[11],22,-1990404162);n=l(n,p,q,r,k[12],7,1804603682);r=l(r,n,p,q,k[13],12,-40341101);q=l(q,r,n,p,k[14],17,-1502002290);p=l(p,q,r,n,k[15],22,1236535329);n=b(n,p,q,r,k[1],5,-165796510);r=b(r,n,p,q,k[6],9,-1069501632);q=b(q,r,n,p,k[11],14,643717713);p=b(p,q,r,n,k[0],20,-373897302);n=b(n,p,q,r,k[5],5,-701558691);r=b(r,n,p,q,k[10],9,38016083);q=b(q,r,n,p,k[15],14,-660478335);p=b(p,q,r,n,k[4],20,-405537848);n=b(n,p,q,r,k[9],5,568446438);
r=b(r,n,p,q,k[14],9,-1019803690);q=b(q,r,n,p,k[3],14,-187363961);p=b(p,q,r,n,k[8],20,1163531501);n=b(n,p,q,r,k[13],5,-1444681467);r=b(r,n,p,q,k[2],9,-51403784);q=b(q,r,n,p,k[7],14,1735328473);p=b(p,q,r,n,k[12],20,-1926607734);n=h(p^q^r,n,p,k[5],4,-378558);r=h(n^p^q,r,n,k[8],11,-2022574463);q=h(r^n^p,q,r,k[11],16,1839030562);p=h(q^r^n,p,q,k[14],23,-35309556);n=h(p^q^r,n,p,k[1],4,-1530992060);r=h(n^p^q,r,n,k[4],11,1272893353);q=h(r^n^p,q,r,k[7],16,-155497632);p=h(q^r^n,p,q,k[10],23,-1094730640);n=h(p^
q^r,n,p,k[13],4,681279174);r=h(n^p^q,r,n,k[0],11,-358537222);q=h(r^n^p,q,r,k[3],16,-722521979);p=h(q^r^n,p,q,k[6],23,76029189);n=h(p^q^r,n,p,k[9],4,-640364487);r=h(n^p^q,r,n,k[12],11,-421815835);q=h(r^n^p,q,r,k[15],16,530742520);p=h(q^r^n,p,q,k[2],23,-995338651);n=c(n,p,q,r,k[0],6,-198630844);r=c(r,n,p,q,k[7],10,1126891415);q=c(q,r,n,p,k[14],15,-1416354905);p=c(p,q,r,n,k[5],21,-57434055);n=c(n,p,q,r,k[12],6,1700485571);r=c(r,n,p,q,k[3],10,-1894986606);q=c(q,r,n,p,k[10],15,-1051523);p=c(p,q,r,n,k[1],
21,-2054922799);n=c(n,p,q,r,k[8],6,1873313359);r=c(r,n,p,q,k[15],10,-30611744);q=c(q,r,n,p,k[6],15,-1560198380);p=c(p,q,r,n,k[13],21,1309151649);n=c(n,p,q,r,k[4],6,-145523070);r=c(r,n,p,q,k[11],10,-1120210379);q=c(q,r,n,p,k[2],15,718787259);p=c(p,q,r,n,k[9],21,-343485551);f[0]=a(n,f[0]);f[1]=a(p,f[1]);f[2]=a(q,f[2]);f[3]=a(r,f[3])}var a=function(f,k){var n=(f&65535)+(k&65535);return(f>>16)+(k>>16)+(n>>16)<<16|n&65535},d="0123456789abcdef".split("");return function(f){for(var k=f.length,n=0;n<k;n++){for(var p=
n,q=f[n],r="",u=0;4>u;u++)r+=d[q>>8*u+4&15]+d[q>>8*u&15];f[p]=r}return f.join("")}(function(f){var k=f.length,n=[1732584193,-271733879,-1732584194,271733878],p;for(p=64;p<=k;p+=64){var q,r=f.substring(p-64,p),u=[];for(q=0;64>q;q+=4)u[q>>2]=r.charCodeAt(q)+(r.charCodeAt(q+1)<<8)+(r.charCodeAt(q+2)<<16)+(r.charCodeAt(q+3)<<24);g(n,u)}f=f.substring(p-64);q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];r=f.length;for(p=0;p<r;p++)q[p>>2]|=f.charCodeAt(p)<<(p%4<<3);q[p>>2]|=128<<(p%4<<3);if(55<p)for(g(n,q),p=16;p--;)q[p]=
0;q[14]=8*k;g(n,q);return n}(e))}function hd(e,h){var l=[];e.replace(h,function(b,c){l.push({match:b,start:c,end:c+b.length})});return l}function aa(e,h,l){function b(a,d){if(d.constructor!==RegExp){if(0===a.indexOf(d))return{match:d,rest:a.slice(d.length)};for(var f=0;f<d.length;f++)if(d[f]!=a[f])return{match:null,pos:f};return{match:null}}return(d=of.reMatches(a,d))&&d.length&&0===d[0].start?{match:d[0].match,rest:a.slice(d[0].end)}:{match:null}}function c(a){var d=of.reMatches(a,/__\//g),f=of.reMatches(a,
/\/__/g);if(d.length!==f.length)throw Error("pattern invalid: "+a+" cannot be split into __/.../__ embedded RegExps\nstarts: "+JSON.stringify(d)+"\nvs ends:\n"+JSON.stringify(f));var k=0;return d.reduce(function(n,p,q){var r=f[q];q=n.pop();p=p.start-k;r=r.end-k;var u;var x=u=3;q=[q.slice(0,p),q.slice(p+u,r-x),q.slice(r)];q[0].length&&(n.push(q[0]),k+=q[0].length);try{q[1].length&&(n.push(new RegExp(q[1])),k+=q[1].length+3+3)}catch(y){throw Error("Cannot create pattern re from: "+of.inspectObject(q));
}q[2].length&&n.push(q[2]);return n},[a])}function g(a,d){d=c(d);a:{for(var f=a,k=0,n=0;n<d.length;n++){var p=d[n];f=b(f,p);if(!f.match){d={matched:!1,pos:k+(f.pos||0),pattern:p};break a}k+=f.match.length;f=f.rest}d=f.length?{matched:!1,pos:k}:{matched:!0}}if(d.matched)return d;d.error=a.slice(0,d.pos)+"<--UNMATCHED--\x3e"+a.slice(d.pos);return d}l=l||{};l.normalizeWhiteSpace&&(e=e.replace(/\s+/g," "));l.ignoreIndent&&(e=e.replace(/^\s+/gm,""),h=h.replace(/^\s+/gm,""));return e==h?{matched:!0}:g(e,
h)}function Sa(e,h,l){e=e.slice(h);return"string"===typeof l?(e=e.indexOf(l),-1===e?null:e+h):l.constructor===RegExp?(h=of.reMatches(e,l),h[0]?h[0].start:null):null}function Ma(e,h,l){e=e.slice(0,h);return"string"===typeof l?(e=e.lastIndexOf(l),-1===e?null:e):l.constructor===RegExp?(e=of.reMatches(e,l),of.last(e)?of.last(e).start:null):null}function jb(e){var h=of.lineRanges(e);return function(l){for(var b=0;b<h.length;b++){var c=h[b];if(l>=c[0]&&l<c[1])return b}return-1}}function Jb(e){return function(h){return of.lineRanges(e)[h]}}
function gc(e){for(var h=0,l=of.lines(e),b=[],c=0;c<l.length;c++)e=h+l[c].length+1,b.push([h,e]),h=e;return b}function ac(e,h){var l=e.length;if(0===l)return-1;for(var b=0;;){var c=b+Math.floor((l-b)/2),g=Wb(e[c],2),a=g[1];if(h<g[0]){if(0===c)break;l=c}else if(h>a)b=c;else return c}return-1}function Kc(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,b=this.substring(l||0).search(h);return 0<=b?b+(l||0):b}function md(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
e.length;h=h.global?h:new RegExp(h.source,"g"+(h.ignoreCase?"i":"")+(h.multiLine?"m":""));l=this.substring(0,l+1);for(var b=-1,c=0,g;null!=(g=h.exec(l));)b=g.index,h.lastIndex=++c;return b}function ud(e,h){return"undefined"===typeof JsDiff?"diff not supported":JsDiff.convertChangesToXML(JsDiff.diffWordsWithSpace(e,h))}function oe(e){return""==e}function ze(e){e=e[0];return"A"===e||"E"===e||"I"===e||"O"===e||"U"===e||"a"===e||"e"===e||"i"===e||"o"===e||"u"===e||!1}function Ue(e,h){var l=parseFloat(e);
return isNaN(l)?e:l.toFixed(h)}function Me(e){return e.length?e.charAt(0).toUpperCase()+e.slice(1):e}function xf(e){return e.split(" ").map(of.capitalize).join("")}function lf(e){var h=e.split("-"),l=h.length;if(1==l)return h[0];e="-"==e.charAt(0)?h[0].charAt(0).toUpperCase()+h[0].substring(1):h[0];for(var b=1;b<l;b++)e+=h[b].charAt(0).toUpperCase()+h[b].substring(1);return e}function Rf(e){for(var h=e.length,l=0,b=[],c=0;c<h;c++)" "!=e[c]&&e[c]==e[c].toUpperCase()&&(b.push(e.slice(l,c).toLowerCase()),
l=c);b.push(e.slice(l).toLowerCase());return b.join(" ")}function Hg(e,h,l){h=h||30;l=void 0===l?"...":l;return e.length>h?e.slice(0,h-l.length)+l:String(e)}function ng(e,h,l){h=h||30;return e.length>h?(void 0===l?"...":l)+e.slice(-h):String(e)}function fg(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function gg(e){return e.slice(0,e.length-1)+String.fromCharCode(e.charCodeAt(e.length-1)+1)}function Wh(e){return e.charCodeAt(0)-48}function wg(e,h){for(var l=
[],b=0;b<e.length;b++){l[b]=[];for(var c=0;c<h.length;c++)l[b][c]=0}for(b=0;b<e.length;b++)l[b][0]=0;for(b=1;b<e.length;b++)for(c=1;c<h.length;c++)l[b][c]=e[b-1]==h[c-1]?l[b-1][c-1]+1:0;for(var g=c=b=-1,a=0;a<e.length;a++)for(var d=0;d<h.length;d++){var f=l[a][d];b<f&&(b=f,c=a-f,g=d-f)}return{length:b,indexA:c,indexB:g,string:0<b?e.slice(c,c+b):""}}function xh(e,h){return"insert"===h.action?e.slice(0,h.start)+h.lines.join("\n")+e.slice(h.start):"remove"===h.action?e.slice(0,h.start)+e.slice(h.end):
e}function Qi(e,h){return h.reduce(function(l,b){return of.applyChange(l,b)},e)}function Di(e,h){if(0===e.length)return h.length;if(0===h.length)return e.length;var l;if(e.length>h.length){var b=e;e=h;h=b}var c=Array(e.length+1);for(b=0;b<=e.length;b++)c[b]=b;for(b=1;b<=h.length;b++){var g=b;for(l=1;l<=e.length;l++){var a=h[b-1]===e[l-1]?c[l-1]:Math.min(c[l-1]+1,Math.min(g+1,c[l]+1));c[l-1]=g;g=a}c[e.length]=g}return c[e.length]}function Zi(e,h){e=e||0;return Math.round(Math.random()*((h||100)-e)+
e)}function ni(e,h){var l,b=!1;return function(c,g){if(b)return b=!1,l*g+c;do{var a=2*Math.random()-1;var d=2*Math.random()-1;var f=a*a+d*d}while(1<=f||0===f);f=Math.sqrt(-2*Math.log(f)/f);l=d*f;b=!0;return c+g*a*f}}function Xd(e){return Math.floor(Math.random()*e)}function ff(e){if(1E3>e)return String(Math.round(100*e)/100)+"B";e/=1024;return 1E3>e?String(Math.round(100*e)/100)+"KB":String(Math.round(e/1024*100)/100)+"MB"}function af(e){return e.reduce(function(h,l){return h+l},0)/e.length}function Gf(e,
h,l){return(e-h)/l+h}function Jh(e){var h=e.sort(function(l,b){return b-l});e=e.length;return 0===e%2?.5*(h[e/2-1]+h[e/2]):h[(e-1)/2]}function ci(e,h,l,b){b=b||0;if(h<l)var c=l;else c=h,h=l;return 0<=c-e+b&&0>=h-e-b}function di(e,h,l){return Math.max(h,Math.min(l,e))}function vj(e){return e.sort(function(h,l){return h-l})}function pj(e,h){h=h||"px";if((e=e.match(/([0-9\.]+)\s*(.*)/))&&e[1]){var l=parseFloat(e[1]);return Kj.convertLength(l,e[2],h)}}function kj(e){if(!isFinite(e))return 0;for(var h=
1,l=0;Math.round(e*h)/h!==e;)h*=10,l++;return l}function Ih(e,h){h=1/h;return Math.round(e*h)/h}function mk(e,h,l,b){var c=Kj.roundTo(e,l);return Math.abs(e-c)<h/2?c:b?e:c+(e-(e<c?c-h/2:c+h/2))*l/(l-h)}function fl(e){return 180*e/Math.PI%360}function Al(e){return e/180*Math.PI}function rg(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:5,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3E4,b=Math.min(l,h*Math.pow(2,e));return Math.min(l,h+Math.random()*(3*(b/2+Math.round(b/
2*Math.random()))-h))}function Sg(e,h,l){return h+e*(l-h)}function Lj(e,h){var l=[],b;for(b in e)(e.__lookupGetter__(b)||"function"!==typeof e[b])&&(h?h(b,e):1)&&l.push(b);return l}function gl(e){for(var h={};e=e.__proto__;)Object.assign(h,Object.getOwnPropertyDescriptors(e));return h}function ao(e,h){return Object.getOwnPropertyNames(e).reduce(function(l,b){(h?h(e,b):1)&&l.push(b);return l},[])}function Dn(e){var h=[],l;for(l in e)e.hasOwnProperty(l)&&(e.__lookupGetter__(l)||"function"!==e[l])&&
h.push(l);return h}function xm(e,h,l){var b=[],c;for(c in e)if(e.hasOwnProperty(c)){var g=e[c];"function"!==g&&b.push(h.call(l||this,c,g))}return b}function Nl(e,h){for(var l in e)if(e[l]===h)return l}function En(e){var h=[],l;for(l in e)h.push(e[l]);return h}function lq(e){var h=[],l;for(l in e)e.hasOwnProperty(l)&&h.push(e[l]);return h}function lm(e,h){for(var l in e)if(h(e,l))return!0;return!1}function yo(e,h){var l=[],b;for(b in e)(h?h(e,b):1)&&l.push(b);return l}function Fl(e){return Object.keys(e).sort().join("").hashCode()}
function mq(e,h,l){return lp.dateFormat(e,h,l)}function mp(e,h){return h&&h instanceof Date&&h.getTime()===e.getTime()}function bo(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!(h instanceof Date)||h<e)return"";if(h===e)return"now";var b="min",c="sec",g="hour",a="day",d=Math.round((h-e)/1E3),f=d%60,k=Math.floor(d/60)%60,n=Math.floor(d/60/60)%24;d=Math.floor(d/60/60/24);var p=[];0<d&&(p.push(d),1<d&&(a+="s"),p.push(a));if(l.forceHours||0<n&&2>d)p.push(n),1<n&&(g+="s"),p.push(g);
if(l.forceMinutes||0<k&&3>n&&0===d)p.push(k),1<k&&(b+="s"),p.push(b);if(l.forceSeconds||0<f&&3>k&&0===n&&0===d)p.push(f),1<f&&(c+="s"),p.push(c);return p.join(" ")}function yj(e){return"function"===typeof e?yj.convertCallbackFun(e):Promise.resolve(e)}function Fn(e,h){return new Promise(function(l){return setTimeout(l,e,h)})}function np(e,h){return new Promise(function(l,b){return setTimeout(b,e,h)})}function Ym(e,h){return new Promise(function(l,b){var c=!1;setTimeout(function(){return!c&&(c=!0)&&
b(Error("Promise timed out"))},e);h.then(function(g){return!c&&(c=!0)&&l(g)},function(g){return!c&&(c=!0)&&b(g)})})}function on(e){var h=Date.now();return Promise.resolve(e).then(function(){return Date.now()-h})}function pn(e,h,l){"function"===typeof e&&(h=e,e=void 0);var b;return(b=h())?Promise.resolve(b):new Promise(function(c,g){var a=!1,d=!1,f,k,n=setInterval(function(){if(a){var p=n;clearInterval(p);delete Aj.waitForClosures[p]}else{try{k=h()}catch(q){f=q}if(k||f||d)return a=!0,p=n,clearInterval(p),
delete Aj.waitForClosures[p],f?g(f):d?"undefined"===typeof l?g(Error("timeout")):c(l):c(k)}},10);Aj.waitForClosures[n]=n;"number"===typeof e&&setTimeout(function(){return d=!0},e)})}function zo(){var e,h,l=new Promise(function(b,c){e=b;h=c});return{resolve:e,reject:h,promise:l}}function op(e){return function(){var h=Array.from(arguments),l=this;return new Promise(function(b,c){h.push(function(g,a){return g?c(g):b(a)});e.apply(l,h)})}}function zj(e){return function(){var h=Array.from(arguments),l=
this;return new Promise(function(b,c){h.push(function(){var g=Array.from(arguments),a=g.shift();return a?c(a):b(g)});e.apply(l,h)})}}function Oh(e,h,l,b,c){var g=e.shift();if(g)try{Promise.resolve(g(h,l)).then(function(a){return Oh(e,a,l,b,c)})["catch"](function(a){c(a)})}catch(a){c(a)}else b(h)}function ym(e){return new Promise(function(h,l){return Aj._chainResolveNext(e.slice(),void 0,{},h,l)})}function qn(e,h){return Promise.resolve(e).then(function(l){try{h()}catch(b){console.error("Error in promise finally: "+
b.stack||b)}return l})["catch"](function(l){try{h()}catch(b){console.error("Error in promise finally: "+b.stack||b)}throw l;})}function pp(e){function h(){b--;try{var n=a++;e[n]().then(function(p){b++;c[n]=p;0===--d?f():l()})["catch"](function(p){return k(p)})}catch(p){k(p)}}function l(){for(;!g&&0<d&&a<e.length&&0<b;)h()}var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Infinity;if(!e.length)return Promise.resolve([]);var c=[],g=null,a=0,d=e.length,f,k;return new Promise(function(n,p){f=
function(){return n(c)};k=function(q){return p(g=q)};l()})}function qj(e,h){if(e instanceof qj)return e;if(!(this instanceof qj))return new qj(e,h);this.setSplitter(h||".");this.fromPath(e)}function Mm(e){var h={},l;for(l in e)h[l]=e[l].slice();return h}function Ao(e,h){var l={},b;for(b in e)if(!h.includes(b)){l[b]=[];for(var c=e[b],g=0;g<c.length;g++){var a=c[g];h.includes(a)||l[b].push(a)}}return l}function Nm(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],b=3<arguments.length&&
void 0!==arguments[3]?arguments[3]:Infinity;if(!Array.isArray(e[h]))return[];for(var c=[],g={},a={},d=0;d<l.length;d++)a[l[d]]=!0;d=e[h].slice();for(var f={},k=d.length;k--;){var n=d[k];n in a?d.splice(k,1):f[n]=1}if(l)for(;0!==d.length;)for(l=0;l<d.length;l++)if(n=d.shift(),!(n in g||n in a)&&(k=f[n]||0,!(k>b)&&(c.push(n),g[n]=!0,n=e[n])))for(var p=0;p<n.length;p++){var q=n[p];q in g||q in f||(f[q]=k+1,d.push(q))}return c}function Om(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:
Infinity;l&&(e=ul.without(e,l));for(var c=[h],g=0,a={};c.length&&g++<b;){var d=c.shift();if(!a[d]){var f=e[d]||[];a[d]=f;c.push.apply(c,db(f))}}return a}function co(e){var h={},l;for(l in e)for(var b=e[l],c=0;c<b.length;c++){var g=b[c];h[g]?h[g].push(l):h[g]=[l]}return h}function qp(e,h){var l=[];h={};var b={},c={},g;for(g in e){h.hasOwnProperty(g)||(h[g]=!0,l.push(g));var a=e[g],d={};if(a){b[g]=[];a=fa(a);var f;try{for(a.s();!(f=a.n()).done;){var k=f.value;if(!d.hasOwnProperty(k)&&g!==k){var n=c[k]||
(c[k]=[]);n.includes(g)||n.push(g);d[k]=!0;b[g].push(k);h.hasOwnProperty(k)||(h[k]=!0,l.push(k))}}}catch(q){a.e(q)}finally{a.f()}}}var p=[];for(e=function(){for(var q=Infinity,r=[],u=[],x=[],y=0;y<l.length;y++){var D=l[y],H=b[D]||[];if(!(H.length>q))if(H.length!==q||H.some(function(sa){return r.includes(sa)}))q=H.length,r=[D],u=[y],x=(c[D]||[]).slice();else{var I;r.push(D);u.push(y);(I=x).push.apply(I,db(c[D]||[]))}}for(q=u.length;q--;)c[l[u[q]]]=[],l.splice(u[q],1);u=fa(x);var N;try{for(u.s();!(N=
u.n()).done;){var J=N.value;b[J]=b[J].filter(function(sa){return!r.includes(sa)})}}catch(sa){u.e(sa)}finally{u.f()}p.push(r)};l.length;)e();return p}function rp(e,h,l,b,c,g){function a(k){-1<d.indexOf(k)||(b=e.call(g,b,k,f++),d=d.concat([k]),ul.withoutAll(h[k]||[],d).forEach(function(n){return a(n)}))}var d=c||[],f=0;a(l);return b}function sp(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10,h={},l=ul.range(1,e).map(String),b=0;b<l.length;b++){var c=Math.floor(Math.random()*e);
h[l[b]]=ul.shuffle(l).slice(0,c)}return h}function Bo(e){return Array.isArray(e)&&2<=e.length&&e[0]<=e[1]}function tp(e){return e.sort(nk.compare)}function rn(e,h){return e[0]<h[0]?e[1]<h[0]?-3:e[1]===h[0]?-2:-1:e[0]===h[0]?e[1]===h[1]?0:e[1]<h[1]?-1:1:-1*rn(h,e)}function up(e,h,l){switch(this.compare(e,h)){case -3:case 3:return null;case 0:return l&&l(e,h,e),e;case 2:case 1:var b=e;e=h;h=b;case -2:case -1:return b=[e[0],Math.max(e[1],h[1])],l&&l(e,h,b),b;default:throw Error("Interval compare failed");
}}function sn(e,h){for(var l=[],b=e.length;0<b;){var c=e.shift();b--;for(var g=0;g<b;g++){var a=nk.coalesce(c,e[g],h);a&&(c=a,e.splice(g,1),b--,g--)}l.push(c)}return this.sort(l)}function vp(e,h,l){for(var b=[],c=function(){var g=e.shift(),a=h.map(function(d){d=nk.compare(g,d);return-1===d||0===d||1===d});b.push(l(g,a[0]));b.push(g)};0<e.length;)c();return b}function Gn(e,h,l,b,c,g){g=g||nk.GLOB;l=this.sort(l);for(var a,d=[];a=l.shift();)if(!(a[1]<e)){a[0]<e&&(a=Array.prototype.slice.call(a),a[0]=
e);var f=h<a[0]?h:a[0];e<f&&d.push(b.call(g,[e,f],!0));h<a[1]&&(a=Array.prototype.slice.call(a),a[1]=h);a[0]===a[1]?(e=void 0,c&&(e=d.slice(-1)[0])&&c.call(g,e,a,e)):d.push(b.call(g,a,!1));e=a[1];if(e>=h)break}e<h&&d.push(b.call(g,[e,h],!0));return d}function Hn(e,h,l){return nk.intervalsInRangeDo(e,h,nk.coalesceOverlapping(Array.prototype.slice.call(l)),function(b,c){return c?b:null}).filter(Boolean)}function Zm(e,h){var l=0,b,c;return h.map(function(g){for(;c=e[l];)if(c[0]<g[0])l++;else break;if(c&&
c[0]===g[0]){for(b=l;c=e[b];)if(c[1]<g[1])b++;else break;if(c&&c[1]===g[1])return nk.range(l,b)}return[]})}function wp(e,h,l){l=l||0;l+h>e.length&&(l-=l+h-e.length);return{array:e,from:l,to:l+h}}function eo(e){return e.array.slice(e.from,e.to)}function In(e,h){return h<e.from||h>=e.to?null:h-e.from}function nq(e,h){return 0>h||h>e.to-e.from?null:e.from+h}function Jn(e,h){if(!(h in e.array))return null;var l=0;h<e.from&&(l=-e.from+h);h>=e.to&&(l=h-e.to+1);return 0===l?e:Co.create(e.array,e.to-e.from,
e.from+l)}function xp(e,h,l){return(e=e[h])?e[l]:void 0}function Kn(e,h,l,b){(e=e[h])&&(e[l]=b);return b}function Do(e,h){return e[h]}function Eo(e,h,l){return e[h]=l}function oq(e,h){return e.reduce(function(l,b){l.push(b[h]);return l},[])}function Bc(e,h,l){return e.map(function(b,c){return b[h]?b[h]=l[c]:void 0})}function Gc(e,h,l){for(var b=Array(e);0<e;)b[--e]=dk.arrayWithN(h,l);return b}function ed(e,h,l,b){for(var c=Array(e),g=0;g<e;g++){c[g]=Array(h);for(var a=0;a<h;a++)c[g][a]=l.call(b||
this,g,a)}return c}function Nc(e,h,l){e.forEach(function(b,c){b.forEach(function(g,a){h.call(l||this,g,c,a)})})}function Hc(e,h,l){var b=Array(e.length);e.forEach(function(c,g){b[g]=Array(c.length);c.forEach(function(a,d){b[g][d]=h.call(l||this,a,g,d)})});return b}function Jd(e){for(var h=e[0],l=Array(e.length-1),b=1;b<e.length;b++)for(var c=l[b-1]={},g=0;g<h.length;g++)c[h[g]]=e[b][g];return l}function De(e,h){Array.isArray(e)||(e=[e]);var l=[[]],b=l[0],c=e.reduce(function(g,a){return g.concat([Object.keys(a).reduce(function(d,
f){var k=b.indexOf(f);-1===k&&(k=b.length,b.push(f));d[k]=a[f];return d},[])])},[]);h=1===arguments.length?null:h;c.forEach(function(g){for(var a=0;a<b.length;a++)g[a]||(g[a]=h)});return l.concat(c)}function df(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{i:0},c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,g=b.i++;h(e,g,c);(l(e,g,c)||[]).forEach(function(a){return df(a,h,l,b,c+1)})}function uf(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:
{i:0},c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,g=b.i++;(l(e,g,c)||[]).forEach(function(a){return uf(a,h,l,b,c)});h(e,g,c)}function Yf(e,h,l){if(h(e))return e;if((e=l(e))&&e.length)for(var b=0;b<e.length;b++){var c=Yf(e[b],h,l);if(c)return c}}function Ch(e,h,l){var b=[];h(e)&&b.push(e);return b.concat((l(e)||[]).map(function(c){return Ch(c,h,l)}).flat())}function Fh(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return[h(e,b)].concat((l(e)||[]).map(function(c){return Fh(c,
h,l,b+1)}).flat())}function oi(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,c=(l(e)||[]).map(function(g){return oi(g,h,l,b+1)});return h(e,c,b)}function Ri(){}function Th(){Th.init.call(this)}function Ui(e,h,l,b){var c;if("function"!==typeof l)throw new TypeError('"listener" argument must be a function');if(c=e._events){c.newListener&&(e.emit("newListener",h,l.listener?l.listener:l),c=e._events);var g=c[h]}else c=e._events=new Ri,e._eventsCount=0;g?("function"===typeof g?
g=c[h]=b?[l,g]:[g,l]:b?g.unshift(l):g.push(l),g.warned||(l=void 0===e._maxListeners?Th.defaultMaxListeners:e._maxListeners)&&0<l&&g.length>l&&(g.warned=!0,l=Error("Possible EventEmitter memory leak detected. "+g.length+" "+h+" listeners added. Use emitter.setMaxListeners() to increase limit"),l.name="MaxListenersExceededWarning",l.emitter=e,l.type=h,l.count=g.length,"function"===typeof console.warn?console.warn(l):console.log(l))):(c[h]=l,++e._eventsCount);return e}function Vk(e,h,l){function b(){e.removeListener(h,
b);c||(c=!0,l.apply(e,arguments))}var c=!1;b.listener=l;return b}function Mk(e){var h=this._events;if(h){e=h[e];if("function"===typeof e)return 1;if(e)return e.length}return 0}function ok(e,h){for(var l=Array(h);h--;)l[h]=e[h];return l}function mm(e){var h=[{name:"send",args:["msg","callback"]},{name:"listen",args:["messenger","callback"]},{name:"close",args:["messenger","callback"]},{name:"isOnline",args:[]}],l=h.map(function(a){return a.name}).concat("id sendHeartbeat heartbeatInterval ignoreUnknownMessages allowConcurrentSends sendTimeout services".split(" "));
h.forEach(function(a){if(!e[a.name])throw a="message implementation needs function "+a.name+"("+a.args.join(",")+")",Error(a);});h=e.sendHeartbeat&&(e.heartbeatInterval||1E3);var b=e.hasOwnProperty("ignoreUnknownMessages")?e.ignoreUnknownMessages:!1,c={_outgoing:[],_inflight:[],_id:e.id||Gl.newUUID(),_ignoreUnknownMessages:b,_services:{},_messageCounter:0,_messageResponseCallbacks:{},_whenOnlineCallbacks:[],_statusWatcherProc:null,_startHeartbeatProcessProc:null,_listenInProgress:null,_heartbeatInterval:h,
_status:Gl.OFFLINE,_runWhenOnlineCallbacks:function(){var a=c._whenOnlineCallbacks.slice();c._whenOnlineCallbacks=[];a.forEach(function(d){try{d.call(null,null,c)}catch(f){console.error("error in _runWhenOnlineCallbacks: %s",f)}})},_ensureStatusWatcher:function(){c._statusWatcherProc||(c._statusWatcherProc=setInterval(function(){c.isOnline()&&c._whenOnlineCallbacks.length&&c._runWhenOnlineCallbacks();var a=c._status;c._status=c.isOnline()?Gl.ONLINE:Gl.OFFLINE;c._status!==Gl.ONLINE&&c._statusWatcherProc&&
c.reconnect();if(c._status!==a&&c.onStatusChange)c.onStatusChange()},20))},_addMissingData:function(a){if(!a.target)throw Error("Message needs target!");if(!a.action)throw Error("Message needs action!");a.data||(a.data=null);a.messageId||(a.messageId=Gl.newUUID());a.sender=c.id();a.messageIndex=c._messageCounter++;return a},_queueSend:function(a,d){if(d&&"function"!==typeof d)throw Error("Expecing a when send callback, got: "+d);c._outgoing.push([a,d])},_deliverMessageQueue:function(){function a(k){if(-1!==
c._inflight.indexOf(k)){var n=k[0],p=k[1];p&&(c._messageResponseCallbacks[n.messageId]=p);e.send.call(c,n,function(q){Gl.remove(c._inflight,k);q&&d(q,k);c._deliverMessageQueue()})}}function d(k,n){var p=n[1];delete c._messageResponseCallbacks[n[0].messageId];console.error(k);p&&p(k)}if(e.allowConcurrentSends||!c._inflight.length){var f=c._outgoing.shift();f&&(c._inflight.push(f),c.isOnline()?a(f):c.whenOnline(function(){a(f)}),function(k){"number"===typeof e.sendTimeout&&setTimeout(function(){-1!==
c._inflight.indexOf(k)&&(Gl.remove(c._inflight,k),d(Error("Timeout sending message"),k),c._deliverMessageQueue())},e.sendTimeout)}(f),e.allowConcurrentSends&&c._outgoing.length&&c._deliverMessageQueue())}},_startHeartbeatProcess:function(){c._startHeartbeatProcessProc||(c._startHeartbeatProcessProc=setTimeout(function(){e.sendHeartbeat.call(c,function(a,d){c._startHeartbeatProcessProc=null;c._startHeartbeatProcess()})},c._heartbeatInterval))},id:function(){return c._id},isOnline:function(){return e.isOnline.call(c)},
heartbeatEnabled:function(){return"number"===typeof c._heartbeatInterval},listen:function(a){if(!c._listenInProgress)return c._listenInProgress=!0,c._ensureStatusWatcher(),e.listen.call(c,function(d){c._listenInProgress=null;a&&a(d);c.heartbeatEnabled()&&c._startHeartbeatProcess()})},reconnect:function(){if(c._status!==Gl.ONLINE)return c.listen(),c},send:function(a,d){c._addMissingData(a);c._queueSend(a,d);c._deliverMessageQueue();return a},sendTo:function(a,d,f,k){return c.send({target:a,action:d,
data:f},k)},onMessage:function(a){c.emit("message",a);if(a.inResponseTo){var d=c._messageResponseCallbacks[a.inResponseTo];d&&!a.expectMoreResponses&&delete c._messageResponseCallbacks[a.inResponseTo];d&&d(null,a)}else if(d=c._services[a.action])try{d.call(null,a,c)}catch(f){d=String(f.stack||f),console.error("Error invoking service: "+d),c.answer(a,{error:d})}else c._ignoreUnknownMessages||c.answer(a,{error:String(Error("messageNotUnderstood: "+a.action))})},answer:function(a,d,f,k){"function"===
typeof f&&(k=f,f=!1);a={target:a.sender,action:a.action+"Result",inResponseTo:a.messageId,data:d};f&&(a.expectMoreResponses=!0);return c.send(a,k)},close:function(a){clearInterval(c._statusWatcherProc);c._statusWatcherProc=null;e.close.call(c,function(d){c._status=Gl.OFFLINE;a&&a(d)});return c},whenOnline:function(a){c._whenOnlineCallbacks.push(a);c.isOnline()&&c._runWhenOnlineCallbacks();return c},outgoingMessages:function(){return Gl.pluck(c._inflight.concat(c._outgoing),0)},addServices:function(a){Object.assign(c._services,
a);return c}};e.services&&c.addServices(e.services);Gl.makeEmitter(c);for(var g in e)-1===l.indexOf(g)&&e.hasOwnProperty(g)&&(c[g]=e[g]);return c}function Ol(e){var h=e.default;if("function"==typeof h){var l=function(){return h.apply(this,arguments)};l.prototype=h.prototype}else l={};Object.defineProperty(l,"__esModule",{value:!0});Object.keys(e).forEach(function(b){var c=Object.getOwnPropertyDescriptor(e,b);Object.defineProperty(l,b,c.get?c:{enumerable:!0,get:function(){return e[b]}})});return l}
function $m(){if(Fo.hasRequiredLib)return Fo.lib;Fo.hasRequiredLib=1;return Fo.lib}function Go(){return JI||(JI={"/lively.next-node_modules/babel-plugin-transform-es2015-modules-systemjs/6.19.0/lib/index.js":$m})}function It(e){function h(l){var b=Yr(l,e);if(null!==b)return Go()[b]();throw Error('Could not dynamically require "'+l+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');}h.resolve=
function(l){var b=Yr(l,e);return null!==b?b:require.resolve(l)};return h}function Yr(e,h){var l=e[0];if("/"===l||"\\"===l)l=!1;else{var b=e[1],c=e[2];l=("."!==l||b&&"/"!==b&&"\\"!==b)&&("."!==l||"."!==b||c&&"/"!==c&&"\\"!==c)&&(":"!==b||"/"!==c&&"\\"!==c)?!0:!1}e=Vq(e);"/"===e[0]&&(h="");b=Go();for(c=["",".js",".json"];;){var g=l?Vq(h+"/node_modules/"+e):Vq(h+"/"+e);if(g.endsWith("/.."))break;for(var a=0;a<c.length;a++){var d=g+c[a];if(b[d])return d}if(!l)break;g=Vq(h+"/..");if(g===h)break;h=g}return null}
function Vq(e){e=e.replace(/\\/g,"/");e=e.split("/");for(var h=""===e[0],l=1;l<e.length;l++)"."!==e[l]&&""!==e[l]||e.splice(l--,1);for(l=1;l<e.length;l++)".."===e[l]&&0<l&&".."!==e[l-1]&&"."!==e[l-1]&&(e.splice(--l,2),l--);e=e.join("/");h&&"/"!==e[0]?e="/"+e:0===e.length&&(e=".");return e}function yh(e,h){for(var l=0,b=e.length-1;0<=b;b--){var c=e[b];"."===c?e.splice(b,1):".."===c?(e.splice(b,1),l++):l&&(e.splice(b,1),l--)}if(h)for(;l--;l)e.unshift("..");return e}function Ho(){for(var e="",h=!1,l=
arguments.length-1;-1<=l&&!h;l--){var b=0<=l?arguments[l]:"/";if("string"!==typeof b)throw new TypeError("Arguments to path.resolve must be strings");b&&(e=b+"/"+e,h="/"===b.charAt(0))}e=yh(bb(e.split("/"),function(c){return!!c}),!h).join("/");return(h?"/":"")+e||"."}function yp(e){var h=Wq(e),l="/"===$V(e,-1);(e=yh(bb(e.split("/"),function(b){return!!b}),!h).join("/"))||h||(e=".");e&&l&&(e+="/");return(h?"/":"")+e}function Wq(e){return"/"===e.charAt(0)}function t(){var e=Array.prototype.slice.call(arguments,
0);return yp(bb(e,function(h,l){if("string"!==typeof h)throw new TypeError("Arguments to path.join must be strings");return h}).join("/"))}function A(e,h){function l(a){for(var d=0;d<a.length&&""===a[d];d++);for(var f=a.length-1;0<=f&&""===a[f];f--);return d>f?[]:a.slice(d,f-d+1)}e=Ho(e).substr(1);h=Ho(h).substr(1);e=l(e.split("/"));h=l(h.split("/"));for(var b=Math.min(e.length,h.length),c=b,g=0;g<b;g++)if(e[g]!==h[g]){c=g;break}b=[];for(g=c;g<e.length;g++)b.push("..");b=b.concat(h.slice(c));return b.join("/")}
function F(e){var h=IB.exec(e).slice(1);e=h[0];h=h[1];if(!e&&!h)return".";h&&(h=h.substr(0,h.length-1));return e+h}function Q(e,h){e=IB.exec(e).slice(1)[2];h&&e.substr(-1*h.length)===h&&(e=e.substr(0,e.length-h.length));return e}function X(e){return IB.exec(e).slice(1)[3]}function bb(e,h){if(e.filter)return e.filter(h);for(var l=[],b=0;b<e.length;b++)h(e[b],b,e)&&l.push(e[b]);return l}function Wa(){if("undefined"===typeof Dy){var e=new ArrayBuffer(2),h=new Uint8Array(e);e=new Uint16Array(e);h[0]=
1;h[1]=2;if(258===e[0])Dy="BE";else if(513===e[0])Dy="LE";else throw Error("unable to figure out endianess");}return Dy}function Ab(){return"undefined"!==typeof zp.location?zp.location.hostname:""}function fc(){return[]}function Lc(){return 0}function wd(){return Number.MAX_VALUE}function le(){return Number.MAX_VALUE}function je(){return[]}function pe(){return"Browser"}function qe(){return"undefined"!==typeof zp.navigator?zp.navigator.appVersion:""}function nc(){return{}}function Ke(){return{}}function $f(){return"javascript"}
function Te(){return"browser"}function ug(){return"/tmp"}function Jf(){JB=!0;for(var e=0;64>e;++e)Ap[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e],fo["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;fo[45]=62;fo[95]=63}function Hf(e,h,l){for(var b=[],c=h;c<l;c+=3)h=(e[c]<<16)+(e[c+1]<<8)+e[c+2],b.push(Ap[h>>18&63]+Ap[h>>12&63]+Ap[h>>6&63]+Ap[h&63]);return b.join("")}function Ig(e){JB||Jf();for(var h=e.length,l=h%3,b="",c=[],g=0,a=h-l;g<
a;g+=16383)c.push(Hf(e,g,g+16383>a?a:g+16383));1===l?(e=e[h-1],b+=Ap[e>>2],b+=Ap[e<<4&63],b+="=="):2===l&&(e=(e[h-2]<<8)+e[h-1],b+=Ap[e>>10],b+=Ap[e>>4&63],b+=Ap[e<<2&63],b+="=");c.push(b);return c.join("")}function Tg(e,h,l,b,c){var g=8*c-b-1;var a=(1<<g)-1,d=a>>1,f=-7;c=l?c-1:0;var k=l?-1:1,n=e[h+c];c+=k;l=n&(1<<-f)-1;n>>=-f;for(f+=g;0<f;l=256*l+e[h+c],c+=k,f-=8);g=l&(1<<-f)-1;l>>=-f;for(f+=b;0<f;g=256*g+e[h+c],c+=k,f-=8);if(0===l)l=1-d;else{if(l===a)return g?NaN:Infinity*(n?-1:1);g+=Math.pow(2,
b);l-=d}return(n?-1:1)*g*Math.pow(2,l-b)}function Lf(e,h,l,b,c,g){var a,d=8*g-c-1,f=(1<<d)-1,k=f>>1,n=23===c?Math.pow(2,-24)-Math.pow(2,-77):0;g=b?0:g-1;var p=b?1:-1,q=0>h||0===h&&0>1/h?1:0;h=Math.abs(h);isNaN(h)||Infinity===h?(h=isNaN(h)?1:0,b=f):(b=Math.floor(Math.log(h)/Math.LN2),1>h*(a=Math.pow(2,-b))&&(b--,a*=2),h=1<=b+k?h+n/a:h+n*Math.pow(2,1-k),2<=h*a&&(b++,a/=2),b+k>=f?(h=0,b=f):1<=b+k?(h=(h*a-1)*Math.pow(2,c),b+=k):(h=h*Math.pow(2,k-1)*Math.pow(2,c),b=0));for(;8<=c;e[l+g]=h&255,g+=p,h/=256,
c-=8);b=b<<c|h;for(d+=c;0<d;e[l+g]=b&255,g+=p,b/=256,d-=8);e[l+g-p]|=128*q}function yf(e,h){if((Qe.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<h)throw new RangeError("Invalid typed array length");Qe.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(h),e.__proto__=Qe.prototype):(null===e&&(e=new Qe(h)),e.length=h);return e}function Qe(e,h,l){if(!(Qe.TYPED_ARRAY_SUPPORT||this instanceof Qe))return new Qe(e,h,l);if("number"===typeof e){if("string"===typeof h)throw Error("If encoding is specified then the first argument must be a string");
return Jg(this,e)}return zg(this,e,h,l)}function zg(e,h,l,b){if("number"===typeof h)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&h instanceof ArrayBuffer){h.byteLength;if(0>l||h.byteLength<l)throw new RangeError("'offset' is out of bounds");if(h.byteLength<l+(b||0))throw new RangeError("'length' is out of bounds");h=void 0===l&&void 0===b?new Uint8Array(h):void 0===b?new Uint8Array(h,l):new Uint8Array(h,l,b);Qe.TYPED_ARRAY_SUPPORT?(e=h,e.__proto__=
Qe.prototype):e=zh(e,h);return e}if("string"===typeof h){b=e;e=l;if("string"!==typeof e||""===e)e="utf8";if(!Qe.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');l=nh(h,e)|0;b=yf(b,l);h=b.write(h,e);h!==l&&(b=b.slice(0,h));return b}return jh(e,h)}function Dh(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(0>e)throw new RangeError('"size" argument must not be negative');}function Jg(e,h){Dh(h);e=yf(e,0>h?0:Pg(h)|0);if(!Qe.TYPED_ARRAY_SUPPORT)for(var l=
0;l<h;++l)e[l]=0;return e}function zh(e,h){var l=0>h.length?0:Pg(h.length)|0;e=yf(e,l);for(var b=0;b<l;b+=1)e[b]=h[b]&255;return e}function jh(e,h){if(ah(h)){var l=Pg(h.length)|0;e=yf(e,l);if(0===e.length)return e;h.copy(e,0,0,l);return e}if(h){if("undefined"!==typeof ArrayBuffer&&h.buffer instanceof ArrayBuffer||"length"in h)return(l="number"!==typeof h.length)||(l=h.length,l=l!==l),l?yf(e,0):zh(e,h);if("Buffer"===h.type&&KI(h.data))return zh(e,h.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}function Pg(e){if(e>=(Qe.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(Qe.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return e|0}function ah(e){return!(null==e||!e._isBuffer)}function nh(e,h){if(ah(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var l=e.length;
if(0===l)return 0;for(var b=!1;;)switch(h){case "ascii":case "latin1":case "binary":return l;case "utf8":case "utf-8":case void 0:return Ei(e).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*l;case "hex":return l>>>1;case "base64":return Xe(e).length;default:if(b)return Ei(e).length;h=(""+h).toLowerCase();b=!0}}function Fi(e,h,l){var b=!1;if(void 0===h||0>h)h=0;if(h>this.length)return"";if(void 0===l||l>this.length)l=this.length;if(0>=l)return"";l>>>=0;h>>>=0;if(l<=h)return"";
for(e||(e="utf8");;)switch(e){case "hex":e=h;h=l;l=this.length;if(!e||0>e)e=0;if(!h||0>h||h>l)h=l;b="";for(l=e;l<h;++l)e=b,b=this[l],b=16>b?"0"+b.toString(16):b.toString(16),b=e+b;return b;case "utf8":case "utf-8":return sj(this,h,l);case "ascii":e="";for(l=Math.min(this.length,l);h<l;++h)e+=String.fromCharCode(this[h]&127);return e;case "latin1":case "binary":e="";for(l=Math.min(this.length,l);h<l;++h)e+=String.fromCharCode(this[h]);return e;case "base64":return h=0===h&&l===this.length?Ig(this):
Ig(this.slice(h,l)),h;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":h=this.slice(h,l);l="";for(e=0;e<h.length;e+=2)l+=String.fromCharCode(h[e]+256*h[e+1]);return l;default:if(b)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();b=!0}}function vi(e,h,l){var b=e[h];e[h]=e[l];e[l]=b}function Bj(e,h,l,b,c){if(0===e.length)return-1;"string"===typeof l?(b=l,l=0):2147483647<l?l=2147483647:-2147483648>l&&(l=-2147483648);l=+l;isNaN(l)&&(l=c?0:e.length-1);0>l&&(l=e.length+l);if(l>=
e.length){if(c)return-1;l=e.length-1}else if(0>l)if(c)l=0;else return-1;"string"===typeof h&&(h=Qe.from(h,b));if(ah(h))return 0===h.length?-1:lj(e,h,l,b,c);if("number"===typeof h)return h&=255,Qe.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?c?Uint8Array.prototype.indexOf.call(e,h,l):Uint8Array.prototype.lastIndexOf.call(e,h,l):lj(e,[h],l,b,c);throw new TypeError("val must be string, number or Buffer");}function lj(e,h,l,b,c){function g(k,n){return 1===a?k[n]:k.readUInt16BE(n*
a)}var a=1,d=e.length,f=h.length;if(void 0!==b&&(b=String(b).toLowerCase(),"ucs2"===b||"ucs-2"===b||"utf16le"===b||"utf-16le"===b)){if(2>e.length||2>h.length)return-1;a=2;d/=2;f/=2;l/=2}if(c)for(b=-1;l<d;l++)if(g(e,l)===g(h,-1===b?0:l-b)){if(-1===b&&(b=l),l-b+1===f)return b*a}else-1!==b&&(l-=l-b),b=-1;else for(l+f>d&&(l=d-f);0<=l;l--){d=!0;for(b=0;b<f;b++)if(g(e,l+b)!==g(h,b)){d=!1;break}if(d)return l}return-1}function sj(e,h,l){l=Math.min(e.length,l);for(var b=[];h<l;){var c=e[h],g=null,a=239<c?
4:223<c?3:191<c?2:1;if(h+a<=l)switch(a){case 1:128>c&&(g=c);break;case 2:var d=e[h+1];128===(d&192)&&(c=(c&31)<<6|d&63,127<c&&(g=c));break;case 3:d=e[h+1];var f=e[h+2];128===(d&192)&&128===(f&192)&&(c=(c&15)<<12|(d&63)<<6|f&63,2047<c&&(55296>c||57343<c)&&(g=c));break;case 4:d=e[h+1];f=e[h+2];var k=e[h+3];128===(d&192)&&128===(f&192)&&128===(k&192)&&(c=(c&15)<<18|(d&63)<<12|(f&63)<<6|k&63,65535<c&&1114112>c&&(g=c))}null===g?(g=65533,a=1):65535<g&&(g-=65536,b.push(g>>>10&1023|55296),g=56320|g&1023);
b.push(g);h+=a}e=b.length;if(e<=LI)b=String.fromCharCode.apply(String,b);else{l="";for(h=0;h<e;)l+=String.fromCharCode.apply(String,b.slice(h,h+=LI));b=l}return b}function Qd(e,h,l){if(0!==e%1||0>e)throw new RangeError("offset is not uint");if(e+h>l)throw new RangeError("Trying to access beyond buffer length");}function Ec(e,h,l,b,c,g){if(!ah(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>c||h<g)throw new RangeError('"value" argument is out of bounds');if(l+b>e.length)throw new RangeError("Index out of range");
}function If(e,h,l,b){0>h&&(h=65535+h+1);for(var c=0,g=Math.min(e.length-l,2);c<g;++c)e[l+c]=(h&255<<8*(b?c:1-c))>>>8*(b?c:1-c)}function Mf(e,h,l,b){0>h&&(h=4294967295+h+1);for(var c=0,g=Math.min(e.length-l,4);c<g;++c)e[l+c]=h>>>8*(b?c:3-c)&255}function sg(e,h,l,b,c,g){if(l+b>e.length)throw new RangeError("Index out of range");if(0>l)throw new RangeError("Index out of range");}function Ei(e,h){h=h||Infinity;for(var l,b=e.length,c=null,g=[],a=0;a<b;++a){l=e.charCodeAt(a);if(55295<l&&57344>l){if(!c){if(56319<
l){-1<(h-=3)&&g.push(239,191,189);continue}else if(a+1===b){-1<(h-=3)&&g.push(239,191,189);continue}c=l;continue}if(56320>l){-1<(h-=3)&&g.push(239,191,189);c=l;continue}l=(c-55296<<10|l-56320)+65536}else c&&-1<(h-=3)&&g.push(239,191,189);c=null;if(128>l){if(0>--h)break;g.push(l)}else if(2048>l){if(0>(h-=2))break;g.push(l>>6|192,l&63|128)}else if(65536>l){if(0>(h-=3))break;g.push(l>>12|224,l>>6&63|128,l&63|128)}else if(1114112>l){if(0>(h-=4))break;g.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw Error("Invalid code point");
}return g}function oh(e){for(var h=[],l=0;l<e.length;++l)h.push(e.charCodeAt(l)&255);return h}function Xe(e){e=(e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(aW,"");if(2>e.length)e="";else for(;0!==e.length%4;)e+="=";JB||Jf();var h=e.length;if(0<h%4)throw Error("Invalid string. Length must be a multiple of 4");var l="="===e[h-2]?2:"="===e[h-1]?1:0;var b=new bW(3*h/4-l);var c=0<l?h-4:h;var g=0;for(h=0;h<c;h+=4){var a=fo[e.charCodeAt(h)]<<18|fo[e.charCodeAt(h+1)]<<12|fo[e.charCodeAt(h+2)]<<6|
fo[e.charCodeAt(h+3)];b[g++]=a>>16&255;b[g++]=a>>8&255;b[g++]=a&255}2===l?(a=fo[e.charCodeAt(h)]<<2|fo[e.charCodeAt(h+1)]>>4,b[g++]=a&255):1===l&&(a=fo[e.charCodeAt(h)]<<10|fo[e.charCodeAt(h+1)]<<4|fo[e.charCodeAt(h+2)]>>2,b[g++]=a>>8&255,b[g++]=a&255);return b}function Bg(e,h,l,b){for(var c=0;c<b&&!(c+l>=h.length||c>=e.length);++c)h[c+l]=e[c];return c}function G(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function ca(){throw Error("setTimeout has not been defined");
}function lb(){throw Error("clearTimeout has not been defined");}function S(e){if(Xq===setTimeout)return setTimeout(e,0);if((Xq===ca||!Xq)&&setTimeout)return Xq=setTimeout,setTimeout(e,0);try{return Xq(e,0)}catch(h){try{return Xq.call(null,e,0)}catch(l){return Xq.call(this,e,0)}}}function Ra(e){if(Yq===clearTimeout)return clearTimeout(e);if((Yq===lb||!Yq)&&clearTimeout)return Yq=clearTimeout,clearTimeout(e);try{return Yq(e)}catch(h){try{return Yq.call(null,e)}catch(l){return Yq.call(this,e)}}}function Da(){Jt&&
Zr&&(Jt=!1,Zr.length?pq=Zr.concat(pq):Ey=-1,pq.length&&Ja())}function Ja(){if(!Jt){var e=S(Da);Jt=!0;for(var h=pq.length;h;){Zr=pq;for(pq=[];++Ey<h;)Zr&&Zr[Ey].run();Ey=-1;h=pq.length}Zr=null;Jt=!1;Ra(e)}}function Pa(e){var h=Array(arguments.length-1);if(1<arguments.length)for(var l=1;l<arguments.length;l++)h[l-1]=arguments[l];pq.push(new Za(e,h));1!==pq.length||Jt||S(Ja)}function Za(e,h){this.fun=e;this.array=h}function Zb(){}function Vc(e){if(!Uj(e)){for(var h=[],l=0;l<arguments.length;l++)h.push(sd(arguments[l]));
return h.join(" ")}l=1;var b=arguments,c=b.length;h=String(e).replace(cW,function(a){if("%%"===a)return"%";if(l>=c)return a;switch(a){case "%s":return String(b[l++]);case "%d":return Number(b[l++]);case "%j":try{return JSON.stringify(b[l++])}catch(d){return"[Circular]"}default:return a}});for(var g=b[l];l<c;g=b[++l])h=null!==g&&ce(g)?h+(" "+sd(g)):h+(" "+g);return h}function Jc(e,h){if(Wk(zp.process))return function(){return Jc(e,h).apply(this,arguments)};if(!0===MI.noDeprecation)return e;var l=!1;
return function(){l||(console.error(h),l=!0);return e.apply(this,arguments)}}function cd(e){Wk(KB)&&(KB=MI.env.NODE_DEBUG||"");e=e.toUpperCase();Fy[e]||((new RegExp("\\b"+e+"\\b","i")).test(KB)?Fy[e]=function(){var h=Vc.apply(null,arguments);console.error("%s %d: %s",e,0,h)}:Fy[e]=function(){});return Fy[e]}function sd(e,h){var l={seen:[],stylize:gf};3<=arguments.length&&(l.depth=arguments[2]);4<=arguments.length&&(l.colors=arguments[3]);tk(h)?l.showHidden=h:h&&Yh(l,h);Wk(l.showHidden)&&(l.showHidden=
!1);Wk(l.depth)&&(l.depth=2);Wk(l.colors)&&(l.colors=!1);Wk(l.customInspect)&&(l.customInspect=!0);l.colors&&(l.stylize=Pe);return Af(l,e,l.depth)}function Pe(e,h){return(h=sd.styles[h])?"\u001b["+sd.colors[h][0]+"m"+e+"\u001b["+sd.colors[h][1]+"m":e}function gf(e,h){return e}function ag(e){var h={};e.forEach(function(l,b){h[l]=!0});return h}function Af(e,h,l){if(e.customInspect&&h&&Ff(h.inspect)&&h.inspect!==sd&&(!h.constructor||h.constructor.prototype!==h)){var b=h.inspect(l,e);Uj(b)||(b=Af(e,b,
l));return b}if(b=ph(e,h))return b;var c=Object.keys(h),g=ag(c);e.showHidden&&(c=Object.getOwnPropertyNames(h));if(Ld(h)&&(0<=c.indexOf("message")||0<=c.indexOf("description")))return Ug(h);if(0===c.length){if(Ff(h))return e.stylize("[Function"+(h.name?": "+h.name:"")+"]","special");if(Ie(h))return e.stylize(RegExp.prototype.toString.call(h),"regexp");if(Xg(h))return e.stylize(Date.prototype.toString.call(h),"date");if(Ld(h))return Ug(h)}b="";var a=!1,d=["{","}"];hk(h)&&(a=!0,d=["[","]"]);Ff(h)&&
(b=" [Function"+(h.name?": "+h.name:"")+"]");Ie(h)&&(b=" "+RegExp.prototype.toString.call(h));Xg(h)&&(b=" "+Date.prototype.toUTCString.call(h));Ld(h)&&(b=" "+Ug(h));if(0===c.length&&(!a||0==h.length))return d[0]+b+d[1];if(0>l)return Ie(h)?e.stylize(RegExp.prototype.toString.call(h),"regexp"):e.stylize("[Object]","special");e.seen.push(h);c=a?$i(e,h,l,g,c):c.map(function(f){return rh(e,h,l,g,f,a)});e.seen.pop();return Ah(c,b,d)}function ph(e,h){if(Wk(h))return e.stylize("undefined","undefined");if(Uj(h))return h=
"'"+JSON.stringify(h).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",e.stylize(h,"string");if(vl(h))return e.stylize(""+h,"number");if(tk(h))return e.stylize(""+h,"boolean");if(null===h)return e.stylize("null","null")}function Ug(e){return"["+Error.prototype.toString.call(e)+"]"}function $i(e,h,l,b,c){for(var g=[],a=0,d=h.length;a<d;++a)Object.prototype.hasOwnProperty.call(h,String(a))?g.push(rh(e,h,l,b,String(a),!0)):g.push("");c.forEach(function(f){f.match(/^\d+$/)||g.push(rh(e,
h,l,b,f,!0))});return g}function rh(e,h,l,b,c,g){var a,d;h=Object.getOwnPropertyDescriptor(h,c)||{value:h[c]};h.get?d=h.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):h.set&&(d=e.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(b,c)||(a="["+c+"]");d||(0>e.seen.indexOf(h.value)?(d=null===l?Af(e,h.value,null):Af(e,h.value,l-1),-1<d.indexOf("\n")&&(d=g?d.split("\n").map(function(f){return"  "+f}).join("\n").substr(2):"\n"+d.split("\n").map(function(f){return"   "+
f}).join("\n"))):d=e.stylize("[Circular]","special"));if(Wk(a)){if(g&&c.match(/^\d+$/))return d;a=JSON.stringify(""+c);a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+d}function Ah(e,h,l){return 60<e.reduce(function(b,c){c.indexOf("\n");return b+c.replace(/\u001b\[\d\d?m/g,"").length+1},0)?l[0]+(""===h?"":h+"\n ")+" "+e.join(",\n  ")+" "+l[1]:l[0]+h+
" "+e.join(", ")+" "+l[1]}function hk(e){return Array.isArray(e)}function tk(e){return"boolean"===typeof e}function Zl(e){return null===e}function Ph(e){return null==e}function vl(e){return"number"===typeof e}function Uj(e){return"string"===typeof e}function $l(e){return"symbol"===typeof e}function Wk(e){return void 0===e}function Ie(e){return ce(e)&&"[object RegExp]"===Object.prototype.toString.call(e)}function ce(e){return"object"===typeof e&&null!==e}function Xg(e){return ce(e)&&"[object Date]"===
Object.prototype.toString.call(e)}function Ld(e){return ce(e)&&("[object Error]"===Object.prototype.toString.call(e)||e instanceof Error)}function Ff(e){return"function"===typeof e}function Wf(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function Nf(e){return Qe.isBuffer(e)}function Wg(e){return 10>e?"0"+e.toString(10):e.toString(10)}function ki(){var e=new Date,h=[Wg(e.getHours()),Wg(e.getMinutes()),Wg(e.getSeconds())].join(":");
return[e.getDate(),dW[e.getMonth()],h].join(" ")}function li(){console.log("%s - %s",ki(),Vc.apply(null,arguments))}function Yh(e,h){if(!h||!ce(h))return e;for(var l=Object.keys(h),b=l.length;b--;)e[l[b]]=h[l[b]];return e}function ai(e,h,l){l||(l=h,h=e,e=null);e=e||{};var b=e.args||[];e=wi.create(e);e.run.apply(e,[h].concat(b).concat(l));return e}function Yj(e){e=e||{};e.useMessenger=!0;var h=e.workerId||wi.newUUID(),l=wi.messengerCreate({sendTimeout:5E3,send:function(b,c){l.worker.postMessage(b);
c()},listen:function(b){var c=l.worker=wi.isNodejs?wi.NodejsWorker.create(e):wi.BrowserWorker.create(e);c.on("message",function(g){l.onMessage(g)});c.on("ready",function(){wi.NodejsWorker.debug&&console.log("WORKER READY!!!")});c.on("close",function(){wi.NodejsWorker.debug&&console.log("WORKER CLOSED...!!!")});c.once("ready",b)},close:function(b){return l.worker.ready?l.sendTo(h,"close",{},function(c,g){(c=c||g.data.error)&&console.error("Error in worker messenger close: "+c.stack||c);if(c)b(c);else{var a=
!1;l.worker.once("close",function(){a=!0});wi.waitFor(1E3,function(){return!!a},b)}}):b(null)},isOnline:function(){return l.worker&&l.worker.ready}});Object.assign(l,{eval:function(b,c){l.sendTo(h,"remoteEval",{expr:b},function(g,a){c(g,a?a.data.result:null)})},run:function(){var b=Array.prototype.slice.call(arguments),c=b.shift(),g=b.pop();if("function"!==typeof c)throw Error("run: no function that should run in worker passed");if("function"!==typeof g)throw Error("run: no callback passed");return l.sendTo(h,
"run",{func:String(c),args:b},function(a,d){g(a||d.data.error,d?d.data.result:null)})}});l.listen();return l}function ik(){if(!og.isNode||og.GLOB.lively||og.GLOB.lively)if(og.livelyLang._prevLivelyGlobal=og.GLOB.lively,og.GLOB.lively||(og.GLOB.lively={}),og.GLOB.lively.lang)for(var e in og.livelyLang)og.GLOB.lively.lang[e]=og.livelyLang[e];else og.GLOB.lively.lang=og.livelyLang}function jk(e){if(!e)return e;if(Array.isArray(e))return og.createChain(og.arr,e);if("Date"===e.constructor.name)return og.createChain(og.date,
e);switch(ad(e)){case "string":return og.createChain(og.string,e);case "object":return og.createChain(og.obj,e);case "function":return og.createChain(og.fun,e);case "number":return og.createChain(og.num,e)}throw Error("Chain for object "+e+" ("+e.constructor.name+") no supported");}function Pm(){og.isNode||(og.livelyLang._prevLivelyGlobal?delete og.GLOB.lively.lang:delete og.GLOB.lively);return og.livelyLang}function Qm(){Object.assign(og.livelyLang,{worker:og.worker,messenger:og.messenger,events:og.events,
tree:og.tree,grid:og.grid,arrayProjection:og.arrayProjection,interval:og.interval,graph:og.graph,date:og.date,properties:og.properties,obj:og.obj,arr:og.arr,fun:og.fun,num:og.num,string:og.string,Closure:og.Closure,promise:og.promise,Path:og.Path,Group:og.Group});og.globalInterfaceSpec.forEach(function(e){if("installMethods"===e.action){var h=og.Path(e.target);h.isIn(og.GLOB)||h.set(og.GLOB,{},!0);var l=og.Path(e.sources[0]);e.methods.forEach(function(b){og.installProperty(l.concat([b]),h.concat([b]))});
e.alias&&e.alias.forEach(function(b){og.installProperty(l.concat([b[1]]),h.concat([b[0]]))})}else if("installObject"===e.action)h=og.Path(e.target),e=og.Path(e.source).get(og.livelyLang),h.set(og.GLOB,e,!0);else throw Error("Cannot deal with global setup action: "+e.action);})}function Bp(){og.globalInterfaceSpec.forEach(function(e){if("installMethods"===e.action){var h=og.Path(e.target),l=og.Path(e.source).get(og.livelyLang),b=h.get(og.GLOB);b&&(e.methods.filter(function(c){return l===b[c]}).forEach(function(c){delete b[c]}),
e.alias&&e.alias.filter(function(c){return l===b[c]}).forEach(function(c){delete b[c[0]]}))}else if("installObject"===e.action)h=og.Path(e.target),h.del(og.GLOB);else throw Error("Cannot deal with global setup action: "+e.action);})}function Bl(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=Object.assign({indent:{style:"  ",base:0,adjustMultilineComment:!1,optsIndent:h&&h.format&&h.format.indent||{}},quotes:"double"},Pj.obj.dissoc(h&&h.format||{},["indent"]));h=Object.assign({format:l,
comment:!1},Pj.obj.dissoc(h,["format"]));return Pj.es.generate(e,h)}function al(){if(an.hasRequiredAcorn)return an.acorn;an.hasRequiredAcorn=1;(function(e,h){(function(l,b){b(h)})(an.commonjsHelpers.commonjsGlobal,function(l){function b(L,Ka){for(var B=65536,Y=0;Y<Ka.length;Y+=2){B+=Ka[Y];if(B>L)return!1;B+=Ka[Y+1];if(B>=L)return!0}}function c(L,Ka){return 65>L?36===L:91>L?!0:97>L?95===L:123>L?!0:65535>=L?170<=L&&Ua.test(String.fromCharCode(L)):!1===Ka?!1:b(L,rc)}function g(L,Ka){return 48>L?36===
L:58>L?!0:65>L?!1:91>L?!0:97>L?95===L:123>L?!0:65535>=L?170<=L&&xa.test(String.fromCharCode(L)):!1===Ka?!1:b(L,rc)||b(L,Lb)}function a(L,Ka){return new Ac(L,{beforeExpr:!0,binop:Ka})}function d(L,Ka){void 0===Ka&&(Ka={});Ka.keyword=L;return qd[L]=new Ac(L,Ka)}function f(L,Ka){return 10===L||13===L||!Ka&&(8232===L||8233===L)}function k(L){return new RegExp("^(?:"+L.replace(/ /g,"|")+")$")}function n(L,Ka){for(var B=1,Y=0;;){na.lastIndex=Y;var nb=na.exec(L);if(nb&&nb.index<Ka)++B,Y=nb.index+nb[0].length;
else return new W(B,Ka-Y)}}function p(L){var Ka={},B;for(B in Kb)Ka[B]=L&&me.call(L,B)?L[B]:Kb[B];"latest"===Ka.ecmaVersion?Ka.ecmaVersion=1E8:null==Ka.ecmaVersion?(!V&&"object"===("undefined"===typeof console?"undefined":ad(console))&&console.warn&&(V=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),Ka.ecmaVersion=11):2015<=Ka.ecmaVersion&&(Ka.ecmaVersion-=2009);null==Ka.allowReserved&&(Ka.allowReserved=5>Ka.ecmaVersion);
if(za(Ka.onToken)){var Y=Ka.onToken;Ka.onToken=function(nb){return Y.push(nb)}}za(Ka.onComment)&&(Ka.onComment=q(Ka,Ka.onComment));return Ka}function q(L,Ka){return function(B,Y,nb,ld,ue,pg){B={type:B?"Block":"Line",value:Y,start:nb,end:ld};L.locations&&(B.loc=new ea(this,ue,pg));L.ranges&&(B.range=[nb,ld]);Ka.push(B)}}function r(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function u(L,Ka,B,Y){L.type=Ka;L.end=B;this.options.locations&&
(L.loc.end=Y);this.options.ranges&&(L.range[1]=B);return L}function x(L){L=Hl[L]={binary:k(Fj[L]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:k("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:k(vk[L])}};L.nonBinary.Script_Extensions=L.nonBinary.Script;L.nonBinary.gc=L.nonBinary.General_Category;L.nonBinary.sc=L.nonBinary.Script;L.nonBinary.scx=L.nonBinary.Script_Extensions}function y(L){if(65535>=L)return String.fromCharCode(L);L-=65536;return String.fromCharCode((L>>10)+55296,(L&1023)+56320)}function D(L){return 36===L||40<=L&&43>=L||46===L||63===L||91<=L&&94>=L||123<=L&&125>=L}function H(L){return 65<=L&&90>=L||97<=L&&122>=L||95===L}function I(L){return H(L)||N(L)}function N(L){return 48<=
L&&57>=L}function J(L){return 48<=L&&57>=L||65<=L&&70>=L||97<=L&&102>=L}function sa(L){return 65<=L&&70>=L?10+(L-65):97<=L&&102>=L?10+(L-97):L-48}function ja(L){return"function"!==typeof BigInt?null:BigInt(L.replace(/_/g,""))}function Ha(L){if(65535>=L)return String.fromCharCode(L);L-=65536;return String.fromCharCode((L>>10)+55296,(L&1023)+56320)}var Qa={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",
5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},ec={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this","5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",
6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},mc=/^in(stanceof)?$/,hc="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
Ua=new RegExp("["+hc+"]"),xa=new RegExp("["+hc+"\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]");
hc=null;var rc=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,
19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,
6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],Lb=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,
2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239],Ac=function(L,Ka){void 0===Ka&&(Ka={});this.label=
L;this.keyword=Ka.keyword;this.beforeExpr=!!Ka.beforeExpr;this.startsExpr=!!Ka.startsExpr;this.isLoop=!!Ka.isLoop;this.isAssign=!!Ka.isAssign;this.prefix=!!Ka.prefix;this.postfix=!!Ka.postfix;this.binop=Ka.binop||null;this.updateContext=null};hc={beforeExpr:!0};var Xb={startsExpr:!0},qd={},La={num:new Ac("num",Xb),regexp:new Ac("regexp",Xb),string:new Ac("string",Xb),name:new Ac("name",Xb),eof:new Ac("eof"),bracketL:new Ac("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Ac("]"),braceL:new Ac("{",
{beforeExpr:!0,startsExpr:!0}),braceR:new Ac("}"),parenL:new Ac("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Ac(")"),comma:new Ac(",",hc),semi:new Ac(";",hc),colon:new Ac(":",hc),dot:new Ac("."),question:new Ac("?",hc),questionDot:new Ac("?."),arrow:new Ac("=>",hc),template:new Ac("template"),invalidTemplate:new Ac("invalidTemplate"),ellipsis:new Ac("...",hc),backQuote:new Ac("`",Xb),dollarBraceL:new Ac("${",{beforeExpr:!0,startsExpr:!0}),eq:new Ac("=",{beforeExpr:!0,isAssign:!0}),assign:new Ac("_=",
{beforeExpr:!0,isAssign:!0}),incDec:new Ac("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Ac("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:a("||",1),logicalAND:a("&&",2),bitwiseOR:a("|",3),bitwiseXOR:a("^",4),bitwiseAND:a("&",5),equality:a("==/!=/===/!==",6),relational:a("</>/<=/>=",7),bitShift:a("<</>>/>>>",8),plusMin:new Ac("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:a("%",10),star:a("*",10),slash:a("/",10),starstar:new Ac("**",{beforeExpr:!0}),coalesce:a("??",
1),_break:d("break"),_case:d("case",hc),_catch:d("catch"),_continue:d("continue"),_debugger:d("debugger"),_default:d("default",hc),_do:d("do",{isLoop:!0,beforeExpr:!0}),_else:d("else",hc),_finally:d("finally"),_for:d("for",{isLoop:!0}),_function:d("function",Xb),_if:d("if"),_return:d("return",hc),_switch:d("switch"),_throw:d("throw",hc),_try:d("try"),_var:d("var"),_const:d("const"),_while:d("while",{isLoop:!0}),_with:d("with"),_new:d("new",{beforeExpr:!0,startsExpr:!0}),_this:d("this",Xb),_super:d("super",
Xb),_class:d("class",Xb),_extends:d("extends",hc),_export:d("export"),_import:d("import",Xb),_null:d("null",Xb),_true:d("true",Xb),_false:d("false",Xb),_in:d("in",{beforeExpr:!0,binop:7}),_instanceof:d("instanceof",{beforeExpr:!0,binop:7}),_typeof:d("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:d("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:d("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Fd=/\r\n?|\n|\u2028|\u2029/,na=new RegExp(Fd.source,"g"),Va=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,
yd=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g;hc=Object.prototype;var me=hc.hasOwnProperty,ta=hc.toString,za=Array.isArray||function(L){return"[object Array]"===ta.call(L)},W=function(L,Ka){this.line=L;this.column=Ka};W.prototype.offset=function(L){return new W(this.line,this.column+L)};var ea=function(L,Ka,B){this.start=Ka;this.end=B;null!==L.sourceFile&&(this.source=L.sourceFile)},Kb={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,
allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},V=!1,Oa=function(L,Ka,B){this.options=L=p(L);this.sourceFile=L.sourceFile;this.keywords=k(ec[6<=L.ecmaVersion?6:"module"===L.sourceType?"5module":5]);var Y="";!0!==L.allowReserved&&(Y=Qa[6<=L.ecmaVersion?6:5===L.ecmaVersion?5:3],"module"===L.sourceType&&(Y+=" await"));this.reservedWords=k(Y);Y=(Y?Y+" ":
"")+Qa.strict;this.reservedWordsStrict=k(Y);this.reservedWordsStrictBind=k(Y+" "+Qa.strictBind);this.input=String(Ka);this.containsEsc=!1;B?(this.pos=B,this.lineStart=this.input.lastIndexOf("\n",B-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Fd).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=La.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;
this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===L.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports={};0===this.pos&&L.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null};hc={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},
allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};Oa.prototype.parse=function(){var L=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(L)};hc.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};hc.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)};hc.inAsync.get=function(){return 0<(this.currentVarScope().flags&4)};hc.allowSuper.get=function(){return 0<(this.currentThisScope().flags&
64)};hc.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};hc.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};hc.inNonArrowFunction.get=function(){return 0<(this.currentThisScope().flags&2)};Oa.extend=function(){for(var L=[],Ka=arguments.length;Ka--;)L[Ka]=arguments[Ka];Ka=this;for(var B=0;B<L.length;B++)Ka=L[B](Ka);return Ka};Oa.parse=function(L,Ka){return(new this(Ka,L)).parse()};Oa.parseExpressionAt=function(L,Ka,B){L=new this(B,
L,Ka);L.nextToken();return L.parseExpression()};Oa.tokenizer=function(L,Ka){return new this(Ka,L)};Object.defineProperties(Oa.prototype,hc);hc=Oa.prototype;var U=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;hc.strictDirective=function(L){for(;;){yd.lastIndex=L;L+=yd.exec(this.input)[0].length;var Ka=U.exec(this.input.slice(L));if(!Ka)return!1;if("use strict"===(Ka[1]||Ka[2])){yd.lastIndex=L+Ka[0].length;L=yd.exec(this.input);Ka=L.index+L[0].length;var B=this.input.charAt(Ka);return";"===B||"}"===
B||Fd.test(L[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(B)||"!"===B&&"="===this.input.charAt(Ka+1))}L+=Ka[0].length;yd.lastIndex=L;L+=yd.exec(this.input)[0].length;";"===this.input[L]&&L++}};hc.eat=function(L){return this.type===L?(this.next(),!0):!1};hc.isContextual=function(L){return this.type===La.name&&this.value===L&&!this.containsEsc};hc.eatContextual=function(L){if(!this.isContextual(L))return!1;this.next();return!0};hc.expectContextual=function(L){this.eatContextual(L)||this.unexpected()};hc.canInsertSemicolon=
function(){return this.type===La.eof||this.type===La.braceR||Fd.test(this.input.slice(this.lastTokEnd,this.start))};hc.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};hc.semicolon=function(){this.eat(La.semi)||this.insertSemicolon()||this.unexpected()};hc.afterTrailingComma=function(L,Ka){if(this.type===L){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,
this.lastTokStartLoc);Ka||this.next();return!0}};hc.expect=function(L){this.eat(L)||this.unexpected()};hc.unexpected=function(L){this.raise(null!=L?L:this.start,"Unexpected token")};hc.checkPatternErrors=function(L,Ka){L&&(-1<L.trailingComma&&this.raiseRecoverable(L.trailingComma,"Comma is not permitted after the rest element"),L=Ka?L.parenthesizedAssign:L.parenthesizedBind,-1<L&&this.raiseRecoverable(L,"Parenthesized pattern"))};hc.checkExpressionErrors=function(L,Ka){if(!L)return!1;var B=L.shorthandAssign;
L=L.doubleProto;if(!Ka)return 0<=B||0<=L;0<=B&&this.raise(B,"Shorthand property assignments are valid only in destructuring patterns");0<=L&&this.raiseRecoverable(L,"Redefinition of __proto__ property")};hc.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};hc.isSimpleAssignTarget=function(L){return"ParenthesizedExpression"===
L.type?this.isSimpleAssignTarget(L.expression):"Identifier"===L.type||"MemberExpression"===L.type};hc=Oa.prototype;hc.parseTopLevel=function(L){var Ka={};L.body||(L.body=[]);for(;this.type!==La.eof;){var B=this.parseStatement(null,!0,Ka);L.body.push(B)}if(this.inModule)for(Ka=0,B=Object.keys(this.undefinedExports);Ka<B.length;Ka+=1){var Y=B[Ka];this.raiseRecoverable(this.undefinedExports[Y].start,"Export '"+Y+"' is not defined")}this.adaptDirectivePrologue(L.body);this.next();L.sourceType=this.options.sourceType;
return this.finishNode(L,"Program")};var fd={kind:"loop"},Td={kind:"switch"};hc.isLet=function(L){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;yd.lastIndex=this.pos;var Ka=yd.exec(this.input);Ka=this.pos+Ka[0].length;var B=this.input.charCodeAt(Ka);if(91===B)return!0;if(L)return!1;if(123===B)return!0;if(c(B,!0)){for(L=Ka+1;g(this.input.charCodeAt(L),!0);)++L;L=this.input.slice(Ka,L);if(!mc.test(L))return!0}return!1};hc.isAsyncFunction=function(){if(8>this.options.ecmaVersion||
!this.isContextual("async"))return!1;yd.lastIndex=this.pos;var L=yd.exec(this.input);L=this.pos+L[0].length;return!Fd.test(this.input.slice(this.pos,L))&&"function"===this.input.slice(L,L+8)&&(L+8===this.input.length||!g(this.input.charAt(L+8)))};hc.parseStatement=function(L,Ka,B){var Y=this.type,nb=this.startNode();if(this.isLet(L)){Y=La._var;var ld="let"}switch(Y){case La._break:case La._continue:return this.parseBreakContinueStatement(nb,Y.keyword);case La._debugger:return this.parseDebuggerStatement(nb);
case La._do:return this.parseDoStatement(nb);case La._for:return this.parseForStatement(nb);case La._function:return L&&(this.strict||"if"!==L&&"label"!==L)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(nb,!1,!L);case La._class:return L&&this.unexpected(),this.parseClass(nb,!0);case La._if:return this.parseIfStatement(nb);case La._return:return this.parseReturnStatement(nb);case La._switch:return this.parseSwitchStatement(nb);case La._throw:return this.parseThrowStatement(nb);
case La._try:return this.parseTryStatement(nb);case La._const:case La._var:return ld=ld||this.value,L&&"var"!==ld&&this.unexpected(),this.parseVarStatement(nb,ld);case La._while:return this.parseWhileStatement(nb);case La._with:return this.parseWithStatement(nb);case La.braceL:return this.parseBlock(!0,nb);case La.semi:return this.parseEmptyStatement(nb);case La._export:case La._import:if(10<this.options.ecmaVersion&&Y===La._import&&(yd.lastIndex=this.pos,L=yd.exec(this.input),L=this.input.charCodeAt(this.pos+
L[0].length),40===L||46===L))return this.parseExpressionStatement(nb,this.parseExpression());this.options.allowImportExportEverywhere||(Ka||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return Y===La._import?this.parseImport(nb):this.parseExport(nb,B);default:if(this.isAsyncFunction())return L&&this.unexpected(),this.next(),this.parseFunctionStatement(nb,!0,!L);
Ka=this.value;B=this.parseExpression();return Y===La.name&&"Identifier"===B.type&&this.eat(La.colon)?this.parseLabeledStatement(nb,Ka,B,L):this.parseExpressionStatement(nb,B)}};hc.parseBreakContinueStatement=function(L,Ka){var B="break"===Ka;this.next();this.eat(La.semi)||this.insertSemicolon()?L.label=null:this.type!==La.name?this.unexpected():(L.label=this.parseIdent(),this.semicolon());for(var Y=0;Y<this.labels.length;++Y){var nb=this.labels[Y];if(null==L.label||nb.name===L.label.name){if(null!=
nb.kind&&(B||"loop"===nb.kind))break;if(L.label&&B)break}}Y===this.labels.length&&this.raise(L.start,"Unsyntactic "+Ka);return this.finishNode(L,B?"BreakStatement":"ContinueStatement")};hc.parseDebuggerStatement=function(L){this.next();this.semicolon();return this.finishNode(L,"DebuggerStatement")};hc.parseDoStatement=function(L){this.next();this.labels.push(fd);L.body=this.parseStatement("do");this.labels.pop();this.expect(La._while);L.test=this.parseParenExpression();6<=this.options.ecmaVersion?
this.eat(La.semi):this.semicolon();return this.finishNode(L,"DoWhileStatement")};hc.parseForStatement=function(L){this.next();var Ka=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(fd);this.enterScope(0);this.expect(La.parenL);if(this.type===La.semi)return-1<Ka&&this.unexpected(Ka),this.parseFor(L,null);var B=this.isLet();if(this.type===La._var||this.type===La._const||B){var Y=
this.startNode();B=B?"let":this.value;this.next();this.parseVar(Y,!0,B);this.finishNode(Y,"VariableDeclaration");if((this.type===La._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===Y.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===La._in?-1<Ka&&this.unexpected(Ka):L.await=-1<Ka),this.parseForIn(L,Y);-1<Ka&&this.unexpected(Ka);return this.parseFor(L,Y)}Y=new r;B=this.parseExpression(!0,Y);if(this.type===La._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=
this.options.ecmaVersion&&(this.type===La._in?-1<Ka&&this.unexpected(Ka):L.await=-1<Ka),this.toAssignable(B,!1,Y),this.checkLValPattern(B),this.parseForIn(L,B);this.checkExpressionErrors(Y,!0);-1<Ka&&this.unexpected(Ka);return this.parseFor(L,B)};hc.parseFunctionStatement=function(L,Ka,B){this.next();return this.parseFunction(L,Je|(B?0:rf),!1,Ka)};hc.parseIfStatement=function(L){this.next();L.test=this.parseParenExpression();L.consequent=this.parseStatement("if");L.alternate=this.eat(La._else)?this.parseStatement("if"):
null;return this.finishNode(L,"IfStatement")};hc.parseReturnStatement=function(L){this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(La.semi)||this.insertSemicolon()?L.argument=null:(L.argument=this.parseExpression(),this.semicolon());return this.finishNode(L,"ReturnStatement")};hc.parseSwitchStatement=function(L){this.next();L.discriminant=this.parseParenExpression();L.cases=[];this.expect(La.braceL);this.labels.push(Td);
this.enterScope(0);for(var Ka,B=!1;this.type!==La.braceR;)if(this.type===La._case||this.type===La._default){var Y=this.type===La._case;Ka&&this.finishNode(Ka,"SwitchCase");L.cases.push(Ka=this.startNode());Ka.consequent=[];this.next();Y?Ka.test=this.parseExpression():(B&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),B=!0,Ka.test=null);this.expect(La.colon)}else Ka||this.unexpected(),Ka.consequent.push(this.parseStatement(null));this.exitScope();Ka&&this.finishNode(Ka,"SwitchCase");
this.next();this.labels.pop();return this.finishNode(L,"SwitchStatement")};hc.parseThrowStatement=function(L){this.next();Fd.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");L.argument=this.parseExpression();this.semicolon();return this.finishNode(L,"ThrowStatement")};var nf=[];hc.parseTryStatement=function(L){this.next();L.block=this.parseBlock();L.handler=null;if(this.type===La._catch){var Ka=this.startNode();this.next();if(this.eat(La.parenL)){Ka.param=
this.parseBindingAtom();var B="Identifier"===Ka.param.type;this.enterScope(B?32:0);this.checkLValPattern(Ka.param,B?4:2);this.expect(La.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),Ka.param=null,this.enterScope(0);Ka.body=this.parseBlock(!1);this.exitScope();L.handler=this.finishNode(Ka,"CatchClause")}L.finalizer=this.eat(La._finally)?this.parseBlock():null;L.handler||L.finalizer||this.raise(L.start,"Missing catch or finally clause");return this.finishNode(L,"TryStatement")};hc.parseVarStatement=
function(L,Ka){this.next();this.parseVar(L,!1,Ka);this.semicolon();return this.finishNode(L,"VariableDeclaration")};hc.parseWhileStatement=function(L){this.next();L.test=this.parseParenExpression();this.labels.push(fd);L.body=this.parseStatement("while");this.labels.pop();return this.finishNode(L,"WhileStatement")};hc.parseWithStatement=function(L){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();L.object=this.parseParenExpression();L.body=this.parseStatement("with");return this.finishNode(L,
"WithStatement")};hc.parseEmptyStatement=function(L){this.next();return this.finishNode(L,"EmptyStatement")};hc.parseLabeledStatement=function(L,Ka,B,Y){for(var nb=0,ld=this.labels;nb<ld.length;nb+=1)ld[nb].name===Ka&&this.raise(B.start,"Label '"+Ka+"' is already declared");nb=this.type.isLoop?"loop":this.type===La._switch?"switch":null;for(ld=this.labels.length-1;0<=ld;ld--){var ue=this.labels[ld];if(ue.statementStart===L.start)ue.statementStart=this.start,ue.kind=nb;else break}this.labels.push({name:Ka,
kind:nb,statementStart:this.start});L.body=this.parseStatement(Y?-1===Y.indexOf("label")?Y+"label":Y:"label");this.labels.pop();L.label=B;return this.finishNode(L,"LabeledStatement")};hc.parseExpressionStatement=function(L,Ka){L.expression=Ka;this.semicolon();return this.finishNode(L,"ExpressionStatement")};hc.parseBlock=function(L,Ka,B){void 0===L&&(L=!0);void 0===Ka&&(Ka=this.startNode());Ka.body=[];this.expect(La.braceL);for(L&&this.enterScope(0);this.type!==La.braceR;){var Y=this.parseStatement(null);
Ka.body.push(Y)}B&&(this.strict=!1);this.next();L&&this.exitScope();return this.finishNode(Ka,"BlockStatement")};hc.parseFor=function(L,Ka){L.init=Ka;this.expect(La.semi);L.test=this.type===La.semi?null:this.parseExpression();this.expect(La.semi);L.update=this.type===La.parenR?null:this.parseExpression();this.expect(La.parenR);L.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(L,"ForStatement")};hc.parseForIn=function(L,Ka){var B=this.type===La._in;this.next();
"VariableDeclaration"===Ka.type&&null!=Ka.declarations[0].init&&(!B||8>this.options.ecmaVersion||this.strict||"var"!==Ka.kind||"Identifier"!==Ka.declarations[0].id.type)&&this.raise(Ka.start,(B?"for-in":"for-of")+" loop variable declaration may not have an initializer");L.left=Ka;L.right=B?this.parseExpression():this.parseMaybeAssign();this.expect(La.parenR);L.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(L,B?"ForInStatement":"ForOfStatement")};hc.parseVar=
function(L,Ka,B){L.declarations=[];for(L.kind=B;;){var Y=this.startNode();this.parseVarId(Y,B);this.eat(La.eq)?Y.init=this.parseMaybeAssign(Ka):"const"!==B||this.type===La._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===Y.id.type||Ka&&(this.type===La._in||this.isContextual("of"))?Y.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();L.declarations.push(this.finishNode(Y,"VariableDeclarator"));if(!this.eat(La.comma))break}return L};
hc.parseVarId=function(L,Ka){L.id=this.parseBindingAtom();this.checkLValPattern(L.id,"var"===Ka?1:2,!1)};var Je=1,rf=2;hc.parseFunction=function(L,Ka,B,Y){this.initFunction(L);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!Y)this.type===La.star&&Ka&rf&&this.unexpected(),L.generator=this.eat(La.star);8<=this.options.ecmaVersion&&(L.async=!!Y);Ka&Je&&(L.id=Ka&4&&this.type!==La.name?null:this.parseIdent(),!L.id||Ka&rf||this.checkLValSimple(L.id,this.strict||L.generator||L.async?this.treatFunctionsAsVar?
1:2:3));Y=this.yieldPos;var nb=this.awaitPos,ld=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(L.async?4:0)|(L.generator?8:0));Ka&Je||(L.id=this.type===La.name?this.parseIdent():null);this.parseFunctionParams(L);this.parseFunctionBody(L,B,!1);this.yieldPos=Y;this.awaitPos=nb;this.awaitIdentPos=ld;return this.finishNode(L,Ka&Je?"FunctionDeclaration":"FunctionExpression")};hc.parseFunctionParams=function(L){this.expect(La.parenL);L.params=this.parseBindingList(La.parenR,
!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};hc.parseClass=function(L,Ka){this.next();var B=this.strict;this.strict=!0;this.parseClassId(L,Ka);this.parseClassSuper(L);var Y=this.startNode(),nb=!1;Y.body=[];for(this.expect(La.braceL);this.type!==La.braceR;){var ld=this.parseClassElement(null!==L.superClass);ld&&(Y.body.push(ld),"MethodDefinition"===ld.type&&"constructor"===ld.kind&&(nb&&this.raise(ld.start,"Duplicate constructor in the same class"),nb=!0))}this.strict=B;this.next();
L.body=this.finishNode(Y,"ClassBody");return this.finishNode(L,Ka?"ClassDeclaration":"ClassExpression")};hc.parseClassElement=function(L){var Ka=this;if(this.eat(La.semi))return null;var B=this.startNode(),Y=function(pg,Kg){void 0===Kg&&(Kg=!1);var uh=Ka.start,fj=Ka.startLoc;if(!Ka.eatContextual(pg))return!1;if(!(Ka.type===La.parenL||Kg&&Ka.canInsertSemicolon()))return!0;B.key&&Ka.unexpected();B.computed=!1;B.key=Ka.startNodeAt(uh,fj);B.key.name=pg;Ka.finishNode(B.key,"Identifier");return!1};B.kind=
"method";B["static"]=Y("static");var nb=this.eat(La.star),ld=!1;nb||(8<=this.options.ecmaVersion&&Y("async",!0)?(ld=!0,nb=9<=this.options.ecmaVersion&&this.eat(La.star)):Y("get")?B.kind="get":Y("set")&&(B.kind="set"));B.key||this.parsePropertyName(B);Y=B.key;var ue=!1;B.computed||B["static"]||!("Identifier"===Y.type&&"constructor"===Y.name||"Literal"===Y.type&&"constructor"===Y.value)?B["static"]&&"Identifier"===Y.type&&"prototype"===Y.name&&this.raise(Y.start,"Classes may not have a static property named prototype"):
("method"!==B.kind&&this.raise(Y.start,"Constructor can't have get/set modifier"),nb&&this.raise(Y.start,"Constructor can't be a generator"),ld&&this.raise(Y.start,"Constructor can't be an async method"),B.kind="constructor",ue=L);this.parseClassMethod(B,nb,ld,ue);"get"===B.kind&&0!==B.value.params.length&&this.raiseRecoverable(B.value.start,"getter should have no params");"set"===B.kind&&1!==B.value.params.length&&this.raiseRecoverable(B.value.start,"setter should have exactly one param");"set"===
B.kind&&"RestElement"===B.value.params[0].type&&this.raiseRecoverable(B.value.params[0].start,"Setter cannot use rest params");return B};hc.parseClassMethod=function(L,Ka,B,Y){L.value=this.parseMethod(Ka,B,Y);return this.finishNode(L,"MethodDefinition")};hc.parseClassId=function(L,Ka){this.type===La.name?(L.id=this.parseIdent(),Ka&&this.checkLValSimple(L.id,2,!1)):(!0===Ka&&this.unexpected(),L.id=null)};hc.parseClassSuper=function(L){L.superClass=this.eat(La._extends)?this.parseExprSubscripts():null};
hc.parseExport=function(L,Ka){this.next();if(this.eat(La.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(L.exported=this.parseIdent(!0),this.checkExport(Ka,L.exported.name,this.lastTokStart)):L.exported=null),this.expectContextual("from"),this.type!==La.string&&this.unexpected(),L.source=this.parseExprAtom(),this.semicolon(),this.finishNode(L,"ExportAllDeclaration");if(this.eat(La._default)){this.checkExport(Ka,"default",this.lastTokStart);var B;this.type===La._function||(B=
this.isAsyncFunction())?(Ka=this.startNode(),this.next(),B&&this.next(),L.declaration=this.parseFunction(Ka,Je|4,!1,B)):this.type===La._class?(B=this.startNode(),L.declaration=this.parseClass(B,"nullableID")):(L.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(L,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())L.declaration=this.parseStatement(null),"VariableDeclaration"===L.declaration.type?this.checkVariableExport(Ka,L.declaration.declarations):this.checkExport(Ka,
L.declaration.id.name,L.declaration.id.start),L.specifiers=[],L.source=null;else{L.declaration=null;L.specifiers=this.parseExportSpecifiers(Ka);if(this.eatContextual("from"))this.type!==La.string&&this.unexpected(),L.source=this.parseExprAtom();else{B=0;for(Ka=L.specifiers;B<Ka.length;B+=1){var Y=Ka[B];this.checkUnreserved(Y.local);this.checkLocalExport(Y.local)}L.source=null}this.semicolon()}return this.finishNode(L,"ExportNamedDeclaration")};hc.checkExport=function(L,Ka,B){L&&(me.call(L,Ka)&&this.raiseRecoverable(B,
"Duplicate export '"+Ka+"'"),L[Ka]=!0)};hc.checkPatternExport=function(L,Ka){var B=Ka.type;if("Identifier"===B)this.checkExport(L,Ka.name,Ka.start);else if("ObjectPattern"===B)for(B=0,Ka=Ka.properties;B<Ka.length;B+=1)this.checkPatternExport(L,Ka[B]);else if("ArrayPattern"===B)for(B=0,Ka=Ka.elements;B<Ka.length;B+=1){var Y=Ka[B];Y&&this.checkPatternExport(L,Y)}else"Property"===B?this.checkPatternExport(L,Ka.value):"AssignmentPattern"===B?this.checkPatternExport(L,Ka.left):"RestElement"===B?this.checkPatternExport(L,
Ka.argument):"ParenthesizedExpression"===B&&this.checkPatternExport(L,Ka.expression)};hc.checkVariableExport=function(L,Ka){if(L)for(var B=0;B<Ka.length;B+=1)this.checkPatternExport(L,Ka[B].id)};hc.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};hc.parseExportSpecifiers=function(L){var Ka=[],B=!0;for(this.expect(La.braceL);!this.eat(La.braceR);){if(B)B=
!1;else if(this.expect(La.comma),this.afterTrailingComma(La.braceR))break;var Y=this.startNode();Y.local=this.parseIdent(!0);Y.exported=this.eatContextual("as")?this.parseIdent(!0):Y.local;this.checkExport(L,Y.exported.name,Y.exported.start);Ka.push(this.finishNode(Y,"ExportSpecifier"))}return Ka};hc.parseImport=function(L){this.next();this.type===La.string?(L.specifiers=nf,L.source=this.parseExprAtom()):(L.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),L.source=this.type===
La.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(L,"ImportDeclaration")};hc.parseImportSpecifiers=function(){var L=[],Ka=!0;if(this.type===La.name){var B=this.startNode();B.local=this.parseIdent();this.checkLValSimple(B.local,2);L.push(this.finishNode(B,"ImportDefaultSpecifier"));if(!this.eat(La.comma))return L}if(this.type===La.star)return Ka=this.startNode(),this.next(),this.expectContextual("as"),Ka.local=this.parseIdent(),this.checkLValSimple(Ka.local,
2),L.push(this.finishNode(Ka,"ImportNamespaceSpecifier")),L;for(this.expect(La.braceL);!this.eat(La.braceR);){if(Ka)Ka=!1;else if(this.expect(La.comma),this.afterTrailingComma(La.braceR))break;B=this.startNode();B.imported=this.parseIdent(!0);this.eatContextual("as")?B.local=this.parseIdent():(this.checkUnreserved(B.imported),B.local=B.imported);this.checkLValSimple(B.local,2);L.push(this.finishNode(B,"ImportSpecifier"))}return L};hc.adaptDirectivePrologue=function(L){for(var Ka=0;Ka<L.length&&this.isDirectiveCandidate(L[Ka]);++Ka)L[Ka].directive=
L[Ka].expression.raw.slice(1,-1)};hc.isDirectiveCandidate=function(L){return"ExpressionStatement"===L.type&&"Literal"===L.expression.type&&"string"===typeof L.expression.value&&('"'===this.input[L.start]||"'"===this.input[L.start])};hc=Oa.prototype;hc.toAssignable=function(L,Ka,B){if(6<=this.options.ecmaVersion&&L)switch(L.type){case "Identifier":this.inAsync&&"await"===L.name&&this.raise(L.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;
case "ObjectExpression":L.type="ObjectPattern";B&&this.checkPatternErrors(B,!0);B=0;for(var Y=L.properties;B<Y.length;B+=1){var nb=Y[B];this.toAssignable(nb,Ka);"RestElement"!==nb.type||"ArrayPattern"!==nb.argument.type&&"ObjectPattern"!==nb.argument.type||this.raise(nb.argument.start,"Unexpected token")}break;case "Property":"init"!==L.kind&&this.raise(L.key.start,"Object pattern can't contain getter or setter");this.toAssignable(L.value,Ka);break;case "ArrayExpression":L.type="ArrayPattern";B&&
this.checkPatternErrors(B,!0);this.toAssignableList(L.elements,Ka);break;case "SpreadElement":L.type="RestElement";this.toAssignable(L.argument,Ka);"AssignmentPattern"===L.argument.type&&this.raise(L.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==L.operator&&this.raise(L.left.end,"Only '=' operator can be used for specifying default value.");L.type="AssignmentPattern";delete L.operator;this.toAssignable(L.left,Ka);break;case "ParenthesizedExpression":this.toAssignable(L.expression,
Ka,B);break;case "ChainExpression":this.raiseRecoverable(L.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":if(!Ka)break;default:this.raise(L.start,"Assigning to rvalue")}else B&&this.checkPatternErrors(B,!0);return L};hc.toAssignableList=function(L,Ka){for(var B=L.length,Y=0;Y<B;Y++){var nb=L[Y];nb&&this.toAssignable(nb,Ka)}B&&(B=L[B-1],6===this.options.ecmaVersion&&Ka&&B&&"RestElement"===B.type&&"Identifier"!==B.argument.type&&this.unexpected(B.argument.start));
return L};hc.parseSpread=function(L){var Ka=this.startNode();this.next();Ka.argument=this.parseMaybeAssign(!1,L);return this.finishNode(Ka,"SpreadElement")};hc.parseRestBinding=function(){var L=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==La.name&&this.unexpected();L.argument=this.parseBindingAtom();return this.finishNode(L,"RestElement")};hc.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case La.bracketL:var L=this.startNode();this.next();L.elements=
this.parseBindingList(La.bracketR,!0,!0);return this.finishNode(L,"ArrayPattern");case La.braceL:return this.parseObj(!0)}return this.parseIdent()};hc.parseBindingList=function(L,Ka,B){for(var Y=[],nb=!0;!this.eat(L);)if(nb?nb=!1:this.expect(La.comma),Ka&&this.type===La.comma)Y.push(null);else if(B&&this.afterTrailingComma(L))break;else if(this.type===La.ellipsis){Ka=this.parseRestBinding();this.parseBindingListItem(Ka);Y.push(Ka);this.type===La.comma&&this.raise(this.start,"Comma is not permitted after the rest element");
this.expect(L);break}else{var ld=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(ld);Y.push(ld)}return Y};hc.parseBindingListItem=function(L){return L};hc.parseMaybeDefault=function(L,Ka,B){B=B||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(La.eq))return B;L=this.startNodeAt(L,Ka);L.left=B;L.right=this.parseMaybeAssign();return this.finishNode(L,"AssignmentPattern")};hc.checkLValSimple=function(L,Ka,B){void 0===Ka&&(Ka=0);var Y=0!==Ka;switch(L.type){case "Identifier":this.strict&&
this.reservedWordsStrictBind.test(L.name)&&this.raiseRecoverable(L.start,(Y?"Binding ":"Assigning to ")+L.name+" in strict mode");Y&&(2===Ka&&"let"===L.name&&this.raiseRecoverable(L.start,"let is disallowed as a lexically bound name"),B&&(me.call(B,L.name)&&this.raiseRecoverable(L.start,"Argument name clash"),B[L.name]=!0),5!==Ka&&this.declareName(L.name,Ka,L.start));break;case "ChainExpression":this.raiseRecoverable(L.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":Y&&
this.raiseRecoverable(L.start,"Binding member expression");break;case "ParenthesizedExpression":return Y&&this.raiseRecoverable(L.start,"Binding parenthesized expression"),this.checkLValSimple(L.expression,Ka,B);default:this.raise(L.start,(Y?"Binding":"Assigning to")+" rvalue")}};hc.checkLValPattern=function(L,Ka,B){void 0===Ka&&(Ka=0);switch(L.type){case "ObjectPattern":var Y=0;for(L=L.properties;Y<L.length;Y+=1)this.checkLValInnerPattern(L[Y],Ka,B);break;case "ArrayPattern":Y=0;for(L=L.elements;Y<
L.length;Y+=1){var nb=L[Y];nb&&this.checkLValInnerPattern(nb,Ka,B)}break;default:this.checkLValSimple(L,Ka,B)}};hc.checkLValInnerPattern=function(L,Ka,B){void 0===Ka&&(Ka=0);switch(L.type){case "Property":this.checkLValInnerPattern(L.value,Ka,B);break;case "AssignmentPattern":this.checkLValPattern(L.left,Ka,B);break;case "RestElement":this.checkLValPattern(L.argument,Ka,B);break;default:this.checkLValPattern(L,Ka,B)}};hc=Oa.prototype;hc.checkPropClash=function(L,Ka,B){if(!(9<=this.options.ecmaVersion&&
"SpreadElement"===L.type||6<=this.options.ecmaVersion&&(L.computed||L.method||L.shorthand))){var Y=L.key;switch(Y.type){case "Identifier":var nb=Y.name;break;case "Literal":nb=String(Y.value);break;default:return}L=L.kind;6<=this.options.ecmaVersion?"__proto__"===nb&&"init"===L&&(Ka.proto&&(B?0>B.doubleProto&&(B.doubleProto=Y.start):this.raiseRecoverable(Y.start,"Redefinition of __proto__ property")),Ka.proto=!0):(nb="$"+nb,(B=Ka[nb])?("init"===L?this.strict&&B.init||B.get||B.set:B.init||B[L])&&this.raiseRecoverable(Y.start,
"Redefinition of property"):B=Ka[nb]={init:!1,get:!1,set:!1},B[L]=!0)}};hc.parseExpression=function(L,Ka){var B=this.start,Y=this.startLoc,nb=this.parseMaybeAssign(L,Ka);if(this.type===La.comma){B=this.startNodeAt(B,Y);for(B.expressions=[nb];this.eat(La.comma);)B.expressions.push(this.parseMaybeAssign(L,Ka));return this.finishNode(B,"SequenceExpression")}return nb};hc.parseMaybeAssign=function(L,Ka,B){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(L);this.exprAllowed=!1}var Y=
!1,nb=-1,ld=-1;Ka?(nb=Ka.parenthesizedAssign,ld=Ka.trailingComma,Ka.parenthesizedAssign=Ka.trailingComma=-1):(Ka=new r,Y=!0);var ue=this.start,pg=this.startLoc;if(this.type===La.parenL||this.type===La.name)this.potentialArrowAt=this.start;var Kg=this.parseMaybeConditional(L,Ka);B&&(Kg=B.call(this,Kg,ue,pg));if(this.type.isAssign)return B=this.startNodeAt(ue,pg),B.operator=this.value,this.type===La.eq&&(Kg=this.toAssignable(Kg,!1,Ka)),Y||(Ka.parenthesizedAssign=Ka.trailingComma=Ka.doubleProto=-1),
Ka.shorthandAssign>=Kg.start&&(Ka.shorthandAssign=-1),this.type===La.eq?this.checkLValPattern(Kg):this.checkLValSimple(Kg),B.left=Kg,this.next(),B.right=this.parseMaybeAssign(L),this.finishNode(B,"AssignmentExpression");Y&&this.checkExpressionErrors(Ka,!0);-1<nb&&(Ka.parenthesizedAssign=nb);-1<ld&&(Ka.trailingComma=ld);return Kg};hc.parseMaybeConditional=function(L,Ka){var B=this.start,Y=this.startLoc,nb=this.parseExprOps(L,Ka);return this.checkExpressionErrors(Ka)?nb:this.eat(La.question)?(Ka=this.startNodeAt(B,
Y),Ka.test=nb,Ka.consequent=this.parseMaybeAssign(),this.expect(La.colon),Ka.alternate=this.parseMaybeAssign(L),this.finishNode(Ka,"ConditionalExpression")):nb};hc.parseExprOps=function(L,Ka){var B=this.start,Y=this.startLoc,nb=this.parseMaybeUnary(Ka,!1);return this.checkExpressionErrors(Ka)?nb:nb.start===B&&"ArrowFunctionExpression"===nb.type?nb:this.parseExprOp(nb,B,Y,-1,L)};hc.parseExprOp=function(L,Ka,B,Y,nb){var ld=this.type.binop;if(null!=ld&&(!nb||this.type!==La._in)&&ld>Y){var ue=this.type===
La.logicalOR||this.type===La.logicalAND,pg=this.type===La.coalesce;pg&&(ld=La.logicalAND.binop);var Kg=this.value;this.next();var uh=this.start,fj=this.startLoc;ld=this.parseExprOp(this.parseMaybeUnary(null,!1),uh,fj,ld,nb);L=this.buildBinary(Ka,B,L,ld,Kg,ue||pg);(ue&&this.type===La.coalesce||pg&&(this.type===La.logicalOR||this.type===La.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(L,
Ka,B,Y,nb)}return L};hc.buildBinary=function(L,Ka,B,Y,nb,ld){L=this.startNodeAt(L,Ka);L.left=B;L.operator=nb;L.right=Y;return this.finishNode(L,ld?"LogicalExpression":"BinaryExpression")};hc.parseMaybeUnary=function(L,Ka){var B=this.start,Y=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var nb=this.parseAwait();Ka=!0}else if(this.type.prefix){nb=this.startNode();var ld=this.type===La.incDec;nb.operator=this.value;nb.prefix=!0;
this.next();nb.argument=this.parseMaybeUnary(null,!0);this.checkExpressionErrors(L,!0);ld?this.checkLValSimple(nb.argument):this.strict&&"delete"===nb.operator&&"Identifier"===nb.argument.type?this.raiseRecoverable(nb.start,"Deleting local variable in strict mode"):Ka=!0;nb=this.finishNode(nb,ld?"UpdateExpression":"UnaryExpression")}else{nb=this.parseExprSubscripts(L);if(this.checkExpressionErrors(L))return nb;for(;this.type.postfix&&!this.canInsertSemicolon();)L=this.startNodeAt(B,Y),L.operator=
this.value,L.prefix=!1,L.argument=nb,this.checkLValSimple(nb),this.next(),nb=this.finishNode(L,"UpdateExpression")}return!Ka&&this.eat(La.starstar)?this.buildBinary(B,Y,nb,this.parseMaybeUnary(null,!1),"**",!1):nb};hc.parseExprSubscripts=function(L){var Ka=this.start,B=this.startLoc,Y=this.parseExprAtom(L);if("ArrowFunctionExpression"===Y.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return Y;Ka=this.parseSubscripts(Y,Ka,B);L&&"MemberExpression"===Ka.type&&(L.parenthesizedAssign>=
Ka.start&&(L.parenthesizedAssign=-1),L.parenthesizedBind>=Ka.start&&(L.parenthesizedBind=-1));return Ka};hc.parseSubscripts=function(L,Ka,B,Y){for(var nb=8<=this.options.ecmaVersion&&"Identifier"===L.type&&"async"===L.name&&this.lastTokEnd===L.end&&!this.canInsertSemicolon()&&5===L.end-L.start&&this.potentialArrowAt===L.start,ld=!1;;){var ue=this.parseSubscript(L,Ka,B,Y,nb,ld);ue.optional&&(ld=!0);if(ue===L||"ArrowFunctionExpression"===ue.type)return ld&&(L=this.startNodeAt(Ka,B),L.expression=ue,
ue=this.finishNode(L,"ChainExpression")),ue;L=ue}};hc.parseSubscript=function(L,Ka,B,Y,nb,ld){var ue=11<=this.options.ecmaVersion,pg=ue&&this.eat(La.questionDot);Y&&pg&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Kg=this.eat(La.bracketL);if(Kg||pg&&this.type!==La.parenL&&this.type!==La.backQuote||this.eat(La.dot))Ka=this.startNodeAt(Ka,B),Ka.object=L,Ka.property=Kg?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),
Ka.computed=!!Kg,Kg&&this.expect(La.bracketR),ue&&(Ka.optional=pg),L=this.finishNode(Ka,"MemberExpression");else if(!Y&&this.eat(La.parenL)){Y=new r;ld=this.yieldPos;var uh=this.awaitPos,fj=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;Kg=this.parseExprList(La.parenR,8<=this.options.ecmaVersion,!1,Y);if(nb&&!pg&&!this.canInsertSemicolon()&&this.eat(La.arrow))return this.checkPatternErrors(Y,!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,
"Cannot use 'await' as identifier inside an async function"),this.yieldPos=ld,this.awaitPos=uh,this.awaitIdentPos=fj,this.parseArrowExpression(this.startNodeAt(Ka,B),Kg,!0);this.checkExpressionErrors(Y,!0);this.yieldPos=ld||this.yieldPos;this.awaitPos=uh||this.awaitPos;this.awaitIdentPos=fj||this.awaitIdentPos;Ka=this.startNodeAt(Ka,B);Ka.callee=L;Ka.arguments=Kg;ue&&(Ka.optional=pg);L=this.finishNode(Ka,"CallExpression")}else this.type===La.backQuote&&((pg||ld)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),
ue=this.startNodeAt(Ka,B),ue.tag=L,ue.quasi=this.parseTemplate({isTagged:!0}),L=this.finishNode(ue,"TaggedTemplateExpression"));return L};hc.parseExprAtom=function(L){this.type===La.slash&&this.readRegexp();var Ka=this.potentialArrowAt===this.start;switch(this.type){case La._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),Ka=this.startNode(),this.next(),this.type!==La.parenL||this.allowDirectSuper||this.raise(Ka.start,"super() call outside constructor of a subclass"),
this.type!==La.dot&&this.type!==La.bracketL&&this.type!==La.parenL&&this.unexpected(),this.finishNode(Ka,"Super");case La._this:return Ka=this.startNode(),this.next(),this.finishNode(Ka,"ThisExpression");case La.name:L=this.start;var B=this.startLoc,Y=this.containsEsc,nb=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!Y&&"async"===nb.name&&!this.canInsertSemicolon()&&this.eat(La._function))return this.parseFunction(this.startNodeAt(L,B),0,!1,!0);if(Ka&&!this.canInsertSemicolon()){if(this.eat(La.arrow))return this.parseArrowExpression(this.startNodeAt(L,
B),[nb],!1);if(8<=this.options.ecmaVersion&&"async"===nb.name&&this.type===La.name&&!Y)return nb=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(La.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(L,B),[nb],!0)}return nb;case La.regexp:return L=this.value,Ka=this.parseLiteral(L.value),Ka.regex={pattern:L.pattern,flags:L.flags},Ka;case La.num:case La.string:return this.parseLiteral(this.value);case La._null:case La._true:case La._false:return Ka=this.startNode(),Ka.value=
this.type===La._null?null:this.type===La._true,Ka.raw=this.type.keyword,this.next(),this.finishNode(Ka,"Literal");case La.parenL:return B=this.start,Ka=this.parseParenAndDistinguishExpression(Ka),L&&(0>L.parenthesizedAssign&&!this.isSimpleAssignTarget(Ka)&&(L.parenthesizedAssign=B),0>L.parenthesizedBind&&(L.parenthesizedBind=B)),Ka;case La.bracketL:return Ka=this.startNode(),this.next(),Ka.elements=this.parseExprList(La.bracketR,!0,!0,L),this.finishNode(Ka,"ArrayExpression");case La.braceL:return this.parseObj(!1,
L);case La._function:return Ka=this.startNode(),this.next(),this.parseFunction(Ka,0);case La._class:return this.parseClass(this.startNode(),!1);case La._new:return this.parseNew();case La.backQuote:return this.parseTemplate();case La._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};hc.parseExprImport=function(){var L=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var Ka=this.parseIdent(!0);
switch(this.type){case La.parenL:return this.parseDynamicImport(L);case La.dot:return L.meta=Ka,this.parseImportMeta(L);default:this.unexpected()}};hc.parseDynamicImport=function(L){this.next();L.source=this.parseMaybeAssign();if(!this.eat(La.parenR)){var Ka=this.start;this.eat(La.comma)&&this.eat(La.parenR)?this.raiseRecoverable(Ka,"Trailing comma is not allowed in import()"):this.unexpected(Ka)}return this.finishNode(L,"ImportExpression")};hc.parseImportMeta=function(L){this.next();var Ka=this.containsEsc;
L.property=this.parseIdent(!0);"meta"!==L.property.name&&this.raiseRecoverable(L.property.start,"The only valid meta property for import is 'import.meta'");Ka&&this.raiseRecoverable(L.start,"'import.meta' must not contain escaped characters");"module"!==this.options.sourceType&&this.raiseRecoverable(L.start,"Cannot use 'import.meta' outside a module");return this.finishNode(L,"MetaProperty")};hc.parseLiteral=function(L){var Ka=this.startNode();Ka.value=L;Ka.raw=this.input.slice(this.start,this.end);
110===Ka.raw.charCodeAt(Ka.raw.length-1)&&(Ka.bigint=Ka.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(Ka,"Literal")};hc.parseParenExpression=function(){this.expect(La.parenL);var L=this.parseExpression();this.expect(La.parenR);return L};hc.parseParenAndDistinguishExpression=function(L){var Ka=this.start,B=this.startLoc,Y=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var nb=this.start,ld=this.startLoc,ue=[],pg=!0,Kg=!1,uh=new r,fj=this.yieldPos,Mj=this.awaitPos;
for(this.awaitPos=this.yieldPos=0;this.type!==La.parenR;)if(pg?pg=!1:this.expect(La.comma),Y&&this.afterTrailingComma(La.parenR,!0)){Kg=!0;break}else if(this.type===La.ellipsis){var Ck=this.start;ue.push(this.parseParenItem(this.parseRestBinding()));this.type===La.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else ue.push(this.parseMaybeAssign(!1,uh,this.parseParenItem));Y=this.start;pg=this.startLoc;this.expect(La.parenR);if(L&&!this.canInsertSemicolon()&&this.eat(La.arrow))return this.checkPatternErrors(uh,
!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=fj,this.awaitPos=Mj,this.parseParenArrowList(Ka,B,ue);ue.length&&!Kg||this.unexpected(this.lastTokStart);Ck&&this.unexpected(Ck);this.checkExpressionErrors(uh,!0);this.yieldPos=fj||this.yieldPos;this.awaitPos=Mj||this.awaitPos;1<ue.length?(L=this.startNodeAt(nb,ld),L.expressions=ue,this.finishNodeAt(L,"SequenceExpression",Y,pg)):L=ue[0]}else L=this.parseParenExpression();return this.options.preserveParens?(Ka=this.startNodeAt(Ka,B),Ka.expression=
L,this.finishNode(Ka,"ParenthesizedExpression")):L};hc.parseParenItem=function(L){return L};hc.parseParenArrowList=function(L,Ka,B){return this.parseArrowExpression(this.startNodeAt(L,Ka),B)};var fh=[];hc.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var L=this.startNode(),Ka=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(La.dot))return L.meta=Ka,Ka=this.containsEsc,L.property=this.parseIdent(!0),"target"!==L.property.name&&
this.raiseRecoverable(L.property.start,"The only valid meta property for new is 'new.target'"),Ka&&this.raiseRecoverable(L.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(L.start,"'new.target' can only be used in functions"),this.finishNode(L,"MetaProperty");Ka=this.start;var B=this.startLoc,Y=this.type===La._import;L.callee=this.parseSubscripts(this.parseExprAtom(),Ka,B,!0);Y&&"ImportExpression"===L.callee.type&&this.raise(Ka,"Cannot use new with import()");
this.eat(La.parenL)?L.arguments=this.parseExprList(La.parenR,8<=this.options.ecmaVersion,!1):L.arguments=fh;return this.finishNode(L,"NewExpression")};hc.parseTemplateElement=function(L){L=L.isTagged;var Ka=this.startNode();this.type===La.invalidTemplate?(L||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),Ka.value={raw:this.value,cooked:null}):Ka.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value};this.next();Ka.tail=this.type===
La.backQuote;return this.finishNode(Ka,"TemplateElement")};hc.parseTemplate=function(L){void 0===L&&(L={});L=L.isTagged;void 0===L&&(L=!1);var Ka=this.startNode();this.next();Ka.expressions=[];var B=this.parseTemplateElement({isTagged:L});for(Ka.quasis=[B];!B.tail;)this.type===La.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(La.dollarBraceL),Ka.expressions.push(this.parseExpression()),this.expect(La.braceR),Ka.quasis.push(B=this.parseTemplateElement({isTagged:L}));this.next();
return this.finishNode(Ka,"TemplateLiteral")};hc.isAsyncProp=function(L){return!L.computed&&"Identifier"===L.key.type&&"async"===L.key.name&&(this.type===La.name||this.type===La.num||this.type===La.string||this.type===La.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===La.star)&&!Fd.test(this.input.slice(this.lastTokEnd,this.start))};hc.parseObj=function(L,Ka){var B=this.startNode(),Y=!0,nb={};B.properties=[];for(this.next();!this.eat(La.braceR);){if(Y)Y=!1;else if(this.expect(La.comma),
5<=this.options.ecmaVersion&&this.afterTrailingComma(La.braceR))break;var ld=this.parseProperty(L,Ka);L||this.checkPropClash(ld,nb,Ka);B.properties.push(ld)}return this.finishNode(B,L?"ObjectPattern":"ObjectExpression")};hc.parseProperty=function(L,Ka){var B=this.startNode(),Y;if(9<=this.options.ecmaVersion&&this.eat(La.ellipsis)){if(L)return B.argument=this.parseIdent(!1),this.type===La.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(B,"RestElement");
this.type===La.parenL&&Ka&&(0>Ka.parenthesizedAssign&&(Ka.parenthesizedAssign=this.start),0>Ka.parenthesizedBind&&(Ka.parenthesizedBind=this.start));B.argument=this.parseMaybeAssign(!1,Ka);this.type===La.comma&&Ka&&0>Ka.trailingComma&&(Ka.trailingComma=this.start);return this.finishNode(B,"SpreadElement")}if(6<=this.options.ecmaVersion){B.method=!1;B.shorthand=!1;if(L||Ka){var nb=this.start;var ld=this.startLoc}L||(Y=this.eat(La.star))}var ue=this.containsEsc;this.parsePropertyName(B);if(!L&&!ue&&
8<=this.options.ecmaVersion&&!Y&&this.isAsyncProp(B)){var pg=!0;Y=9<=this.options.ecmaVersion&&this.eat(La.star);this.parsePropertyName(B,Ka)}else pg=!1;this.parsePropertyValue(B,L,Y,pg,nb,ld,Ka,ue);return this.finishNode(B,"Property")};hc.parsePropertyValue=function(L,Ka,B,Y,nb,ld,ue,pg){(B||Y)&&this.type===La.colon&&this.unexpected();this.eat(La.colon)?(L.value=Ka?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,ue),L.kind="init"):6<=this.options.ecmaVersion&&this.type===
La.parenL?(Ka&&this.unexpected(),L.kind="init",L.method=!0,L.value=this.parseMethod(B,Y)):Ka||pg||!(5<=this.options.ecmaVersion)||L.computed||"Identifier"!==L.key.type||"get"!==L.key.name&&"set"!==L.key.name||this.type===La.comma||this.type===La.braceR||this.type===La.eq?6<=this.options.ecmaVersion&&!L.computed&&"Identifier"===L.key.type?((B||Y)&&this.unexpected(),this.checkUnreserved(L.key),"await"!==L.key.name||this.awaitIdentPos||(this.awaitIdentPos=nb),L.kind="init",Ka?L.value=this.parseMaybeDefault(nb,
ld,this.copyNode(L.key)):this.type===La.eq&&ue?(0>ue.shorthandAssign&&(ue.shorthandAssign=this.start),L.value=this.parseMaybeDefault(nb,ld,this.copyNode(L.key))):L.value=this.copyNode(L.key),L.shorthand=!0):this.unexpected():((B||Y)&&this.unexpected(),L.kind=L.key.name,this.parsePropertyName(L),L.value=this.parseMethod(!1),L.value.params.length!==("get"===L.kind?0:1)?(Ka=L.value.start,"get"===L.kind?this.raiseRecoverable(Ka,"getter should have no params"):this.raiseRecoverable(Ka,"setter should have exactly one param")):
"set"===L.kind&&"RestElement"===L.value.params[0].type&&this.raiseRecoverable(L.value.params[0].start,"Setter cannot use rest params"))};hc.parsePropertyName=function(L){if(6<=this.options.ecmaVersion){if(this.eat(La.bracketL))return L.computed=!0,L.key=this.parseMaybeAssign(),this.expect(La.bracketR),L.key;L.computed=!1}return L.key=this.type===La.num||this.type===La.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};hc.initFunction=function(L){L.id=null;6<=this.options.ecmaVersion&&
(L.generator=L.expression=!1);8<=this.options.ecmaVersion&&(L.async=!1)};hc.parseMethod=function(L,Ka,B){var Y=this.startNode(),nb=this.yieldPos,ld=this.awaitPos,ue=this.awaitIdentPos;this.initFunction(Y);6<=this.options.ecmaVersion&&(Y.generator=L);8<=this.options.ecmaVersion&&(Y.async=!!Ka);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(Ka?4:0)|(Y.generator?8:0)|64|(B?128:0));this.expect(La.parenL);Y.params=this.parseBindingList(La.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(Y,!1,!0);this.yieldPos=nb;this.awaitPos=ld;this.awaitIdentPos=ue;return this.finishNode(Y,"FunctionExpression")};hc.parseArrowExpression=function(L,Ka,B){var Y=this.yieldPos,nb=this.awaitPos,ld=this.awaitIdentPos;this.enterScope((B?4:0)|18);this.initFunction(L);8<=this.options.ecmaVersion&&(L.async=!!B);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;L.params=this.toAssignableList(Ka,!0);this.parseFunctionBody(L,!0,!1);this.yieldPos=Y;this.awaitPos=nb;this.awaitIdentPos=ld;
return this.finishNode(L,"ArrowFunctionExpression")};hc.parseFunctionBody=function(L,Ka,B){var Y=this.strict,nb=!1;if(Ka&&this.type!==La.braceL)L.body=this.parseMaybeAssign(),L.expression=!0,this.checkParams(L,!1);else{var ld=7<=this.options.ecmaVersion&&!this.isSimpleParamList(L.params);(!Y||ld)&&(nb=this.strictDirective(this.end))&&ld&&this.raiseRecoverable(L.start,"Illegal 'use strict' directive in function with non-simple parameter list");ld=this.labels;this.labels=[];nb&&(this.strict=!0);this.checkParams(L,
!Y&&!nb&&!Ka&&!B&&this.isSimpleParamList(L.params));this.strict&&L.id&&this.checkLValSimple(L.id,5);L.body=this.parseBlock(!1,void 0,nb&&!Y);L.expression=!1;this.adaptDirectivePrologue(L.body.body);this.labels=ld}this.exitScope()};hc.isSimpleParamList=function(L){for(var Ka=0;Ka<L.length;Ka+=1)if("Identifier"!==L[Ka].type)return!1;return!0};hc.checkParams=function(L,Ka){var B={},Y=0;for(L=L.params;Y<L.length;Y+=1)this.checkLValInnerPattern(L[Y],1,Ka?null:B)};hc.parseExprList=function(L,Ka,B,Y){for(var nb=
[],ld=!0;!this.eat(L);){if(ld)ld=!1;else if(this.expect(La.comma),Ka&&this.afterTrailingComma(L))break;if(B&&this.type===La.comma)var ue=null;else this.type===La.ellipsis?(ue=this.parseSpread(Y),Y&&this.type===La.comma&&0>Y.trailingComma&&(Y.trailingComma=this.start)):ue=this.parseMaybeAssign(!1,Y);nb.push(ue)}return nb};hc.checkUnreserved=function(L){var Ka=L.start,B=L.end;L=L.name;this.inGenerator&&"yield"===L&&this.raiseRecoverable(Ka,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&
"await"===L&&this.raiseRecoverable(Ka,"Cannot use 'await' as identifier inside an async function");this.keywords.test(L)&&this.raise(Ka,"Unexpected keyword '"+L+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(Ka,B).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(L)||(this.inAsync||"await"!==L||this.raiseRecoverable(Ka,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(Ka,"The keyword '"+L+"' is reserved"))};hc.parseIdent=function(L,
Ka){Ka=this.startNode();this.type===La.name?Ka.name=this.value:this.type.keyword?(Ka.name=this.type.keyword,"class"!==Ka.name&&"function"!==Ka.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!L);this.finishNode(Ka,"Identifier");L||(this.checkUnreserved(Ka),"await"!==Ka.name||this.awaitIdentPos||(this.awaitIdentPos=Ka.start));return Ka};hc.parseYield=function(L){this.yieldPos||(this.yieldPos=this.start);var Ka=
this.startNode();this.next();this.type===La.semi||this.canInsertSemicolon()||this.type!==La.star&&!this.type.startsExpr?(Ka.delegate=!1,Ka.argument=null):(Ka.delegate=this.eat(La.star),Ka.argument=this.parseMaybeAssign(L));return this.finishNode(Ka,"YieldExpression")};hc.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var L=this.startNode();this.next();L.argument=this.parseMaybeUnary(null,!0);return this.finishNode(L,"AwaitExpression")};hc=Oa.prototype;hc.raise=function(L,Ka){var B=
n(this.input,L);Ka+=" ("+B.line+":"+B.column+")";Ka=new SyntaxError(Ka);Ka.pos=L;Ka.loc=B;Ka.raisedAt=this.pos;throw Ka;};hc.raiseRecoverable=hc.raise;hc.curPosition=function(){if(this.options.locations)return new W(this.curLine,this.pos-this.lineStart)};hc=Oa.prototype;var zi=function(L){this.flags=L;this["var"]=[];this.lexical=[];this.functions=[]};hc.enterScope=function(L){this.scopeStack.push(new zi(L))};hc.exitScope=function(){this.scopeStack.pop()};hc.treatFunctionsAsVarInScope=function(L){return L.flags&
2||!this.inModule&&L.flags&1};hc.declareName=function(L,Ka,B){var Y=!1;if(2===Ka)Ka=this.currentScope(),Y=-1<Ka.lexical.indexOf(L)||-1<Ka.functions.indexOf(L)||-1<Ka["var"].indexOf(L),Ka.lexical.push(L),this.inModule&&Ka.flags&1&&delete this.undefinedExports[L];else if(4===Ka)this.currentScope().lexical.push(L);else if(3===Ka)Ka=this.currentScope(),Y=this.treatFunctionsAsVar?-1<Ka.lexical.indexOf(L):-1<Ka.lexical.indexOf(L)||-1<Ka["var"].indexOf(L),Ka.functions.push(L);else for(Ka=this.scopeStack.length-
1;0<=Ka;--Ka){var nb=this.scopeStack[Ka];if(-1<nb.lexical.indexOf(L)&&!(nb.flags&32&&nb.lexical[0]===L)||!this.treatFunctionsAsVarInScope(nb)&&-1<nb.functions.indexOf(L)){Y=!0;break}nb["var"].push(L);this.inModule&&nb.flags&1&&delete this.undefinedExports[L];if(nb.flags&3)break}Y&&this.raiseRecoverable(B,"Identifier '"+L+"' has already been declared")};hc.checkLocalExport=function(L){-1===this.scopeStack[0].lexical.indexOf(L.name)&&-1===this.scopeStack[0]["var"].indexOf(L.name)&&(this.undefinedExports[L.name]=
L)};hc.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};hc.currentVarScope=function(){for(var L=this.scopeStack.length-1;;L--){var Ka=this.scopeStack[L];if(Ka.flags&3)return Ka}};hc.currentThisScope=function(){for(var L=this.scopeStack.length-1;;L--){var Ka=this.scopeStack[L];if(Ka.flags&3&&!(Ka.flags&16))return Ka}};var Sh=function(L,Ka,B){this.type="";this.start=Ka;this.end=0;L.options.locations&&(this.loc=new ea(L,B));L.options.directSourceFile&&(this.sourceFile=L.options.directSourceFile);
L.options.ranges&&(this.range=[Ka,0])};hc=Oa.prototype;hc.startNode=function(){return new Sh(this,this.start,this.startLoc)};hc.startNodeAt=function(L,Ka){return new Sh(this,L,Ka)};hc.finishNode=function(L,Ka){return u.call(this,L,Ka,this.lastTokEnd,this.lastTokEndLoc)};hc.finishNodeAt=function(L,Ka,B,Y){return u.call(this,L,Ka,B,Y)};hc.copyNode=function(L){var Ka=new Sh(this,L.start,this.startLoc),B;for(B in L)Ka[B]=L[B];return Ka};hc=function(L,Ka,B,Y,nb){this.token=L;this.isExpr=!!Ka;this.preserveSpace=
!!B;this.override=Y;this.generator=!!nb};var Hi={b_stat:new hc("{",!1),b_expr:new hc("{",!0),b_tmpl:new hc("${",!1),p_stat:new hc("(",!1),p_expr:new hc("(",!0),q_tmpl:new hc("`",!0,!0,function(L){return L.tryReadTemplateToken()}),f_stat:new hc("function",!1),f_expr:new hc("function",!0),f_expr_gen:new hc("function",!0,!1,null,!0),f_gen:new hc("function",!1,!1,null,!0)};Xb=Oa.prototype;Xb.initialContext=function(){return[Hi.b_stat]};Xb.braceIsBlock=function(L){var Ka=this.curContext();return Ka===
Hi.f_expr||Ka===Hi.f_stat?!0:L!==La.colon||Ka!==Hi.b_stat&&Ka!==Hi.b_expr?L===La._return||L===La.name&&this.exprAllowed?Fd.test(this.input.slice(this.lastTokEnd,this.start)):L===La._else||L===La.semi||L===La.eof||L===La.parenR||L===La.arrow?!0:L===La.braceL?Ka===Hi.b_stat:L===La._var||L===La._const||L===La.name?!1:!this.exprAllowed:!Ka.isExpr};Xb.inGeneratorContext=function(){for(var L=this.context.length-1;1<=L;L--){var Ka=this.context[L];if("function"===Ka.token)return Ka.generator}return!1};Xb.updateContext=
function(L){var Ka,B=this.type;B.keyword&&L===La.dot?this.exprAllowed=!1:(Ka=B.updateContext)?Ka.call(this,L):this.exprAllowed=B.beforeExpr};La.parenR.updateContext=La.braceR.updateContext=function(){if(1===this.context.length)this.exprAllowed=!0;else{var L=this.context.pop();L===Hi.b_stat&&"function"===this.curContext().token&&(L=this.context.pop());this.exprAllowed=!L.isExpr}};La.braceL.updateContext=function(L){this.context.push(this.braceIsBlock(L)?Hi.b_stat:Hi.b_expr);this.exprAllowed=!0};La.dollarBraceL.updateContext=
function(){this.context.push(Hi.b_tmpl);this.exprAllowed=!0};La.parenL.updateContext=function(L){this.context.push(L===La._if||L===La._for||L===La._with||L===La._while?Hi.p_stat:Hi.p_expr);this.exprAllowed=!0};La.incDec.updateContext=function(){};La._function.updateContext=La._class.updateContext=function(L){!L.beforeExpr||L===La._else||L===La.semi&&this.curContext()!==Hi.p_stat||L===La._return&&Fd.test(this.input.slice(this.lastTokEnd,this.start))||(L===La.colon||L===La.braceL)&&this.curContext()===
Hi.b_stat?this.context.push(Hi.f_stat):this.context.push(Hi.f_expr);this.exprAllowed=!1};La.backQuote.updateContext=function(){this.curContext()===Hi.q_tmpl?this.context.pop():this.context.push(Hi.q_tmpl);this.exprAllowed=!1};La.star.updateContext=function(L){L===La._function&&(L=this.context.length-1,this.context[L]=this.context[L]===Hi.f_expr?Hi.f_expr_gen:Hi.f_gen);this.exprAllowed=!0};La.name.updateContext=function(L){var Ka=!1;6<=this.options.ecmaVersion&&L!==La.dot&&("of"===this.value&&!this.exprAllowed||
"yield"===this.value&&this.inGeneratorContext())&&(Ka=!0);this.exprAllowed=Ka};var Fj={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
vk={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
Hl={};x(9);x(10);x(11);x(12);Xb=Oa.prototype;var pl=function(L){this.parser=L;this.validFlags="gim"+(6<=L.options.ecmaVersion?"uy":"")+(9<=L.options.ecmaVersion?"s":"");this.unicodeProperties=Hl[12<=L.options.ecmaVersion?12:L.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=[];this.backReferenceNames=[]};pl.prototype.reset=
function(L,Ka,B){var Y=-1!==B.indexOf("u");this.start=L|0;this.source=Ka+"";this.flags=B;this.switchU=Y&&6<=this.parser.options.ecmaVersion;this.switchN=Y&&9<=this.parser.options.ecmaVersion};pl.prototype.raise=function(L){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+L)};pl.prototype.at=function(L,Ka){void 0===Ka&&(Ka=!1);var B=this.source,Y=B.length;if(L>=Y)return-1;var nb=B.charCodeAt(L);if(!Ka&&!this.switchU||55295>=nb||57344<=nb||L+1>=Y)return nb;L=
B.charCodeAt(L+1);return 56320<=L&&57343>=L?(nb<<10)+L-56613888:nb};pl.prototype.nextIndex=function(L,Ka){void 0===Ka&&(Ka=!1);var B=this.source,Y=B.length;if(L>=Y)return Y;var nb=B.charCodeAt(L),ld;return!Ka&&!this.switchU||55295>=nb||57344<=nb||L+1>=Y||56320>(ld=B.charCodeAt(L+1))||57343<ld?L+1:L+2};pl.prototype.current=function(L){void 0===L&&(L=!1);return this.at(this.pos,L)};pl.prototype.lookahead=function(L){void 0===L&&(L=!1);return this.at(this.nextIndex(this.pos,L),L)};pl.prototype.advance=
function(L){void 0===L&&(L=!1);this.pos=this.nextIndex(this.pos,L)};pl.prototype.eat=function(L,Ka){void 0===Ka&&(Ka=!1);return this.current(Ka)===L?(this.advance(Ka),!0):!1};Xb.validateRegExpFlags=function(L){for(var Ka=L.validFlags,B=L.flags,Y=0;Y<B.length;Y++){var nb=B.charAt(Y);-1===Ka.indexOf(nb)&&this.raise(L.start,"Invalid regular expression flag");-1<B.indexOf(nb,Y+1)&&this.raise(L.start,"Duplicate regular expression flag")}};Xb.validateRegExpPattern=function(L){this.regexp_pattern(L);!L.switchN&&
9<=this.options.ecmaVersion&&0<L.groupNames.length&&(L.switchN=!0,this.regexp_pattern(L))};Xb.regexp_pattern=function(L){L.pos=0;L.lastIntValue=0;L.lastStringValue="";L.lastAssertionIsQuantifiable=!1;L.numCapturingParens=0;L.maxBackReference=0;L.groupNames.length=0;L.backReferenceNames.length=0;this.regexp_disjunction(L);L.pos!==L.source.length&&(L.eat(41)&&L.raise("Unmatched ')'"),(L.eat(93)||L.eat(125))&&L.raise("Lone quantifier brackets"));L.maxBackReference>L.numCapturingParens&&L.raise("Invalid escape");
for(var Ka=0,B=L.backReferenceNames;Ka<B.length;Ka+=1)-1===L.groupNames.indexOf(B[Ka])&&L.raise("Invalid named capture referenced")};Xb.regexp_disjunction=function(L){for(this.regexp_alternative(L);L.eat(124);)this.regexp_alternative(L);this.regexp_eatQuantifier(L,!0)&&L.raise("Nothing to repeat");L.eat(123)&&L.raise("Lone quantifier brackets")};Xb.regexp_alternative=function(L){for(;L.pos<L.source.length&&this.regexp_eatTerm(L););};Xb.regexp_eatTerm=function(L){return this.regexp_eatAssertion(L)?
(L.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(L)&&L.switchU&&L.raise("Invalid quantifier"),!0):(L.switchU?this.regexp_eatAtom(L):this.regexp_eatExtendedAtom(L))?(this.regexp_eatQuantifier(L),!0):!1};Xb.regexp_eatAssertion=function(L){var Ka=L.pos;L.lastAssertionIsQuantifiable=!1;if(L.eat(94)||L.eat(36))return!0;if(L.eat(92)){if(L.eat(66)||L.eat(98))return!0;L.pos=Ka}if(L.eat(40)&&L.eat(63)){var B=!1;9<=this.options.ecmaVersion&&(B=L.eat(60));if(L.eat(61)||L.eat(33))return this.regexp_disjunction(L),
L.eat(41)||L.raise("Unterminated group"),L.lastAssertionIsQuantifiable=!B,!0}L.pos=Ka;return!1};Xb.regexp_eatQuantifier=function(L,Ka){void 0===Ka&&(Ka=!1);return this.regexp_eatQuantifierPrefix(L,Ka)?(L.eat(63),!0):!1};Xb.regexp_eatQuantifierPrefix=function(L,Ka){return L.eat(42)||L.eat(43)||L.eat(63)||this.regexp_eatBracedQuantifier(L,Ka)};Xb.regexp_eatBracedQuantifier=function(L,Ka){var B=L.pos;if(L.eat(123)){var Y=-1;if(this.regexp_eatDecimalDigits(L)){var nb=L.lastIntValue;L.eat(44)&&this.regexp_eatDecimalDigits(L)&&
(Y=L.lastIntValue);if(L.eat(125))return-1!==Y&&Y<nb&&!Ka&&L.raise("numbers out of order in {} quantifier"),!0}L.switchU&&!Ka&&L.raise("Incomplete quantifier");L.pos=B}return!1};Xb.regexp_eatAtom=function(L){return this.regexp_eatPatternCharacters(L)||L.eat(46)||this.regexp_eatReverseSolidusAtomEscape(L)||this.regexp_eatCharacterClass(L)||this.regexp_eatUncapturingGroup(L)||this.regexp_eatCapturingGroup(L)};Xb.regexp_eatReverseSolidusAtomEscape=function(L){var Ka=L.pos;if(L.eat(92)){if(this.regexp_eatAtomEscape(L))return!0;
L.pos=Ka}return!1};Xb.regexp_eatUncapturingGroup=function(L){var Ka=L.pos;if(L.eat(40)){if(L.eat(63)&&L.eat(58)){this.regexp_disjunction(L);if(L.eat(41))return!0;L.raise("Unterminated group")}L.pos=Ka}return!1};Xb.regexp_eatCapturingGroup=function(L){if(L.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(L):63===L.current()&&L.raise("Invalid group");this.regexp_disjunction(L);if(L.eat(41))return L.numCapturingParens+=1,!0;L.raise("Unterminated group")}return!1};Xb.regexp_eatExtendedAtom=
function(L){return L.eat(46)||this.regexp_eatReverseSolidusAtomEscape(L)||this.regexp_eatCharacterClass(L)||this.regexp_eatUncapturingGroup(L)||this.regexp_eatCapturingGroup(L)||this.regexp_eatInvalidBracedQuantifier(L)||this.regexp_eatExtendedPatternCharacter(L)};Xb.regexp_eatInvalidBracedQuantifier=function(L){this.regexp_eatBracedQuantifier(L,!0)&&L.raise("Nothing to repeat");return!1};Xb.regexp_eatSyntaxCharacter=function(L){var Ka=L.current();return D(Ka)?(L.lastIntValue=Ka,L.advance(),!0):!1};
Xb.regexp_eatPatternCharacters=function(L){for(var Ka=L.pos,B=0;-1!==(B=L.current())&&!D(B);)L.advance();return L.pos!==Ka};Xb.regexp_eatExtendedPatternCharacter=function(L){var Ka=L.current();return-1===Ka||36===Ka||40<=Ka&&43>=Ka||46===Ka||63===Ka||91===Ka||94===Ka||124===Ka?!1:(L.advance(),!0)};Xb.regexp_groupSpecifier=function(L){L.eat(63)&&(this.regexp_eatGroupName(L)?(-1!==L.groupNames.indexOf(L.lastStringValue)&&L.raise("Duplicate capture group name"),L.groupNames.push(L.lastStringValue)):
L.raise("Invalid group"))};Xb.regexp_eatGroupName=function(L){L.lastStringValue="";if(L.eat(60)){if(this.regexp_eatRegExpIdentifierName(L)&&L.eat(62))return!0;L.raise("Invalid capture group name")}return!1};Xb.regexp_eatRegExpIdentifierName=function(L){L.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(L)){for(L.lastStringValue+=y(L.lastIntValue);this.regexp_eatRegExpIdentifierPart(L);)L.lastStringValue+=y(L.lastIntValue);return!0}return!1};Xb.regexp_eatRegExpIdentifierStart=function(L){var Ka=
L.pos,B=11<=this.options.ecmaVersion,Y=L.current(B);L.advance(B);92===Y&&this.regexp_eatRegExpUnicodeEscapeSequence(L,B)&&(Y=L.lastIntValue);B=Y;if(c(B,!0)||36===B||95===B)return L.lastIntValue=Y,!0;L.pos=Ka;return!1};Xb.regexp_eatRegExpIdentifierPart=function(L){var Ka=L.pos,B=11<=this.options.ecmaVersion,Y=L.current(B);L.advance(B);92===Y&&this.regexp_eatRegExpUnicodeEscapeSequence(L,B)&&(Y=L.lastIntValue);B=Y;if(g(B,!0)||36===B||95===B||8204===B||8205===B)return L.lastIntValue=Y,!0;L.pos=Ka;return!1};
Xb.regexp_eatAtomEscape=function(L){if(this.regexp_eatBackReference(L)||this.regexp_eatCharacterClassEscape(L)||this.regexp_eatCharacterEscape(L)||L.switchN&&this.regexp_eatKGroupName(L))return!0;L.switchU&&(99===L.current()&&L.raise("Invalid unicode escape"),L.raise("Invalid escape"));return!1};Xb.regexp_eatBackReference=function(L){var Ka=L.pos;if(this.regexp_eatDecimalEscape(L)){var B=L.lastIntValue;if(L.switchU)return B>L.maxBackReference&&(L.maxBackReference=B),!0;if(B<=L.numCapturingParens)return!0;
L.pos=Ka}return!1};Xb.regexp_eatKGroupName=function(L){if(L.eat(107)){if(this.regexp_eatGroupName(L))return L.backReferenceNames.push(L.lastStringValue),!0;L.raise("Invalid named reference")}return!1};Xb.regexp_eatCharacterEscape=function(L){return this.regexp_eatControlEscape(L)||this.regexp_eatCControlLetter(L)||this.regexp_eatZero(L)||this.regexp_eatHexEscapeSequence(L)||this.regexp_eatRegExpUnicodeEscapeSequence(L,!1)||!L.switchU&&this.regexp_eatLegacyOctalEscapeSequence(L)||this.regexp_eatIdentityEscape(L)};
Xb.regexp_eatCControlLetter=function(L){var Ka=L.pos;if(L.eat(99)){if(this.regexp_eatControlLetter(L))return!0;L.pos=Ka}return!1};Xb.regexp_eatZero=function(L){return 48!==L.current()||N(L.lookahead())?!1:(L.lastIntValue=0,L.advance(),!0)};Xb.regexp_eatControlEscape=function(L){var Ka=L.current();return 116===Ka?(L.lastIntValue=9,L.advance(),!0):110===Ka?(L.lastIntValue=10,L.advance(),!0):118===Ka?(L.lastIntValue=11,L.advance(),!0):102===Ka?(L.lastIntValue=12,L.advance(),!0):114===Ka?(L.lastIntValue=
13,L.advance(),!0):!1};Xb.regexp_eatControlLetter=function(L){var Ka=L.current();return 65<=Ka&&90>=Ka||97<=Ka&&122>=Ka?(L.lastIntValue=Ka%32,L.advance(),!0):!1};Xb.regexp_eatRegExpUnicodeEscapeSequence=function(L,Ka){void 0===Ka&&(Ka=!1);var B=L.pos;Ka=Ka||L.switchU;if(L.eat(117)){if(this.regexp_eatFixedHexDigits(L,4)){B=L.lastIntValue;if(Ka&&55296<=B&&56319>=B){Ka=L.pos;if(L.eat(92)&&L.eat(117)&&this.regexp_eatFixedHexDigits(L,4)){var Y=L.lastIntValue;if(56320<=Y&&57343>=Y)return L.lastIntValue=
1024*(B-55296)+(Y-56320)+65536,!0}L.pos=Ka;L.lastIntValue=B}return!0}if(Y=Ka&&L.eat(123)&&this.regexp_eatHexDigits(L)&&L.eat(125))Y=L.lastIntValue,Y=0<=Y&&1114111>=Y;if(Y)return!0;Ka&&L.raise("Invalid unicode escape");L.pos=B}return!1};Xb.regexp_eatIdentityEscape=function(L){if(L.switchU)return this.regexp_eatSyntaxCharacter(L)?!0:L.eat(47)?(L.lastIntValue=47,!0):!1;var Ka=L.current();return 99===Ka||L.switchN&&107===Ka?!1:(L.lastIntValue=Ka,L.advance(),!0)};Xb.regexp_eatDecimalEscape=function(L){L.lastIntValue=
0;var Ka=L.current();if(49<=Ka&&57>=Ka){do L.lastIntValue=10*L.lastIntValue+(Ka-48),L.advance();while(48<=(Ka=L.current())&&57>=Ka);return!0}return!1};Xb.regexp_eatCharacterClassEscape=function(L){var Ka=L.current();if(100===Ka||68===Ka||115===Ka||83===Ka||119===Ka||87===Ka)return L.lastIntValue=-1,L.advance(),!0;if(L.switchU&&9<=this.options.ecmaVersion&&(80===Ka||112===Ka)){L.lastIntValue=-1;L.advance();if(L.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(L)&&L.eat(125))return!0;L.raise("Invalid property name")}return!1};
Xb.regexp_eatUnicodePropertyValueExpression=function(L){var Ka=L.pos;if(this.regexp_eatUnicodePropertyName(L)&&L.eat(61)){var B=L.lastStringValue;if(this.regexp_eatUnicodePropertyValue(L))return this.regexp_validateUnicodePropertyNameAndValue(L,B,L.lastStringValue),!0}L.pos=Ka;return this.regexp_eatLoneUnicodePropertyNameOrValue(L)?(this.regexp_validateUnicodePropertyNameOrValue(L,L.lastStringValue),!0):!1};Xb.regexp_validateUnicodePropertyNameAndValue=function(L,Ka,B){me.call(L.unicodeProperties.nonBinary,
Ka)||L.raise("Invalid property name");L.unicodeProperties.nonBinary[Ka].test(B)||L.raise("Invalid property value")};Xb.regexp_validateUnicodePropertyNameOrValue=function(L,Ka){L.unicodeProperties.binary.test(Ka)||L.raise("Invalid property name")};Xb.regexp_eatUnicodePropertyName=function(L){var Ka;for(L.lastStringValue="";H(Ka=L.current());)L.lastStringValue+=y(Ka),L.advance();return""!==L.lastStringValue};Xb.regexp_eatUnicodePropertyValue=function(L){var Ka;for(L.lastStringValue="";I(Ka=L.current());)L.lastStringValue+=
y(Ka),L.advance();return""!==L.lastStringValue};Xb.regexp_eatLoneUnicodePropertyNameOrValue=function(L){return this.regexp_eatUnicodePropertyValue(L)};Xb.regexp_eatCharacterClass=function(L){if(L.eat(91)){L.eat(94);this.regexp_classRanges(L);if(L.eat(93))return!0;L.raise("Unterminated character class")}return!1};Xb.regexp_classRanges=function(L){for(;this.regexp_eatClassAtom(L);){var Ka=L.lastIntValue;if(L.eat(45)&&this.regexp_eatClassAtom(L)){var B=L.lastIntValue;!L.switchU||-1!==Ka&&-1!==B||L.raise("Invalid character class");
-1!==Ka&&-1!==B&&Ka>B&&L.raise("Range out of order in character class")}}};Xb.regexp_eatClassAtom=function(L){var Ka=L.pos;if(L.eat(92)){if(this.regexp_eatClassEscape(L))return!0;if(L.switchU){var B=L.current();(99===B||48<=B&&55>=B)&&L.raise("Invalid class escape");L.raise("Invalid escape")}L.pos=Ka}Ka=L.current();return 93!==Ka?(L.lastIntValue=Ka,L.advance(),!0):!1};Xb.regexp_eatClassEscape=function(L){var Ka=L.pos;if(L.eat(98))return L.lastIntValue=8,!0;if(L.switchU&&L.eat(45))return L.lastIntValue=
45,!0;if(!L.switchU&&L.eat(99)){if(this.regexp_eatClassControlLetter(L))return!0;L.pos=Ka}return this.regexp_eatCharacterClassEscape(L)||this.regexp_eatCharacterEscape(L)};Xb.regexp_eatClassControlLetter=function(L){var Ka=L.current();return N(Ka)||95===Ka?(L.lastIntValue=Ka%32,L.advance(),!0):!1};Xb.regexp_eatHexEscapeSequence=function(L){var Ka=L.pos;if(L.eat(120)){if(this.regexp_eatFixedHexDigits(L,2))return!0;L.switchU&&L.raise("Invalid escape");L.pos=Ka}return!1};Xb.regexp_eatDecimalDigits=function(L){var Ka=
L.pos,B;for(L.lastIntValue=0;N(B=L.current());)L.lastIntValue=10*L.lastIntValue+(B-48),L.advance();return L.pos!==Ka};Xb.regexp_eatHexDigits=function(L){var Ka=L.pos,B;for(L.lastIntValue=0;J(B=L.current());)L.lastIntValue=16*L.lastIntValue+sa(B),L.advance();return L.pos!==Ka};Xb.regexp_eatLegacyOctalEscapeSequence=function(L){if(this.regexp_eatOctalDigit(L)){var Ka=L.lastIntValue;if(this.regexp_eatOctalDigit(L)){var B=L.lastIntValue;3>=Ka&&this.regexp_eatOctalDigit(L)?L.lastIntValue=64*Ka+8*B+L.lastIntValue:
L.lastIntValue=8*Ka+B}else L.lastIntValue=Ka;return!0}return!1};Xb.regexp_eatOctalDigit=function(L){var Ka=L.current();if(48<=Ka&&55>=Ka)return L.lastIntValue=Ka-48,L.advance(),!0;L.lastIntValue=0;return!1};Xb.regexp_eatFixedHexDigits=function(L,Ka){for(var B=L.pos,Y=L.lastIntValue=0;Y<Ka;++Y){var nb=L.current();if(!J(nb))return L.pos=B,!1;L.lastIntValue=16*L.lastIntValue+sa(nb);L.advance()}return!0};var pk=function(L){this.type=L.type;this.value=L.value;this.start=L.start;this.end=L.end;L.options.locations&&
(this.loc=new ea(L,L.startLoc,L.endLoc));L.options.ranges&&(this.range=[L.start,L.end])};Xb=Oa.prototype;Xb.next=function(L){!L&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword);if(this.options.onToken)this.options.onToken(new pk(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};Xb.getToken=function(){this.next();return new pk(this)};
"undefined"!==typeof Symbol&&(Xb[Symbol.iterator]=function(){var L=this;return{next:function(){var Ka=L.getToken();return{done:Ka.type===La.eof,value:Ka}}}});Xb.curContext=function(){return this.context[this.context.length-1]};Xb.nextToken=function(){var L=this.curContext();L&&L.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(La.eof);if(L.override)return L.override(this);this.readToken(this.fullCharCodeAtPos())};
Xb.readToken=function(L){return c(L,6<=this.options.ecmaVersion)||92===L?this.readWord():this.getTokenFromCode(L)};Xb.fullCharCodeAtPos=function(){var L=this.input.charCodeAt(this.pos);if(55295>=L||57344<=L)return L;var Ka=this.input.charCodeAt(this.pos+1);return(L<<10)+Ka-56613888};Xb.skipBlockComment=function(){var L=this.options.onComment&&this.curPosition(),Ka=this.pos,B=this.input.indexOf("*/",this.pos+=2);-1===B&&this.raise(this.pos-2,"Unterminated comment");this.pos=B+2;if(this.options.locations){na.lastIndex=
Ka;for(var Y;(Y=na.exec(this.input))&&Y.index<this.pos;)++this.curLine,this.lineStart=Y.index+Y[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(Ka+2,B),Ka,this.pos,L,this.curPosition())};Xb.skipLineComment=function(L){for(var Ka=this.pos,B=this.options.onComment&&this.curPosition(),Y=this.input.charCodeAt(this.pos+=L);this.pos<this.input.length&&!f(Y);)Y=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(Ka+L,this.pos),
Ka,this.pos,B,this.curPosition())};Xb.skipSpace=function(){a:for(;this.pos<this.input.length;){var L=this.input.charCodeAt(this.pos);switch(L){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<
L&&14>L||5760<=L&&Va.test(String.fromCharCode(L)))++this.pos;else break a}}};Xb.finishToken=function(L,Ka){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var B=this.type;this.type=L;this.value=Ka;this.updateContext(B)};Xb.readToken_dot=function(){var L=this.input.charCodeAt(this.pos+1);if(48<=L&&57>=L)return this.readNumber(!0);var Ka=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===L&&46===Ka)return this.pos+=3,this.finishToken(La.ellipsis);++this.pos;
return this.finishToken(La.dot)};Xb.readToken_slash=function(){var L=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===L?this.finishOp(La.assign,2):this.finishOp(La.slash,1)};Xb.readToken_mult_modulo_exp=function(L){var Ka=this.input.charCodeAt(this.pos+1),B=1,Y=42===L?La.star:La.modulo;7<=this.options.ecmaVersion&&42===L&&42===Ka&&(++B,Y=La.starstar,Ka=this.input.charCodeAt(this.pos+2));return 61===Ka?this.finishOp(La.assign,B+1):this.finishOp(Y,B)};Xb.readToken_pipe_amp=
function(L){var Ka=this.input.charCodeAt(this.pos+1);return Ka===L?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(La.assign,3):this.finishOp(124===L?La.logicalOR:La.logicalAND,2):61===Ka?this.finishOp(La.assign,2):this.finishOp(124===L?La.bitwiseOR:La.bitwiseAND,1)};Xb.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(La.assign,2):this.finishOp(La.bitwiseXOR,1)};Xb.readToken_plus_min=function(L){var Ka=this.input.charCodeAt(this.pos+
1);return Ka===L?45!==Ka||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Fd.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(La.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===Ka?this.finishOp(La.assign,2):this.finishOp(La.plusMin,1)};Xb.readToken_lt_gt=function(L){var Ka=this.input.charCodeAt(this.pos+1),B=1;if(Ka===L)return B=62===L&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+B)?this.finishOp(La.assign,
B+1):this.finishOp(La.bitShift,B);if(33===Ka&&60===L&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),this.nextToken();61===Ka&&(B=2);return this.finishOp(La.relational,B)};Xb.readToken_eq_excl=function(L){var Ka=this.input.charCodeAt(this.pos+1);return 61===Ka?this.finishOp(La.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===L&&62===Ka&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(La.arrow)):
this.finishOp(61===L?La.eq:La.prefix,1)};Xb.readToken_question=function(){var L=this.options.ecmaVersion;if(11<=L){var Ka=this.input.charCodeAt(this.pos+1);if(46===Ka){var B=this.input.charCodeAt(this.pos+2);if(48>B||57<B)return this.finishOp(La.questionDot,2)}if(63===Ka)return 12<=L&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(La.assign,3):this.finishOp(La.coalesce,2)}return this.finishOp(La.question,1)};Xb.getTokenFromCode=function(L){switch(L){case 46:return this.readToken_dot();case 40:return++this.pos,
this.finishToken(La.parenL);case 41:return++this.pos,this.finishToken(La.parenR);case 59:return++this.pos,this.finishToken(La.semi);case 44:return++this.pos,this.finishToken(La.comma);case 91:return++this.pos,this.finishToken(La.bracketL);case 93:return++this.pos,this.finishToken(La.bracketR);case 123:return++this.pos,this.finishToken(La.braceL);case 125:return++this.pos,this.finishToken(La.braceR);case 58:return++this.pos,this.finishToken(La.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;
return this.finishToken(La.backQuote);case 48:L=this.input.charCodeAt(this.pos+1);if(120===L||88===L)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===L||79===L)return this.readRadixNumber(8);if(98===L||66===L)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(L);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(L);case 124:case 38:return this.readToken_pipe_amp(L);
case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(L);case 60:case 62:return this.readToken_lt_gt(L);case 61:case 33:return this.readToken_eq_excl(L);case 63:return this.readToken_question();case 126:return this.finishOp(La.prefix,1)}this.raise(this.pos,"Unexpected character '"+Ha(L)+"'")};Xb.finishOp=function(L,Ka){var B=this.input.slice(this.pos,this.pos+Ka);this.pos+=Ka;return this.finishToken(L,B)};Xb.readRegexp=function(){for(var L,Ka,B=this.pos;;){this.pos>=
this.input.length&&this.raise(B,"Unterminated regular expression");var Y=this.input.charAt(this.pos);Fd.test(Y)&&this.raise(B,"Unterminated regular expression");if(L)L=!1;else{if("["===Y)Ka=!0;else if("]"===Y&&Ka)Ka=!1;else if("/"===Y&&!Ka)break;L="\\"===Y}++this.pos}L=this.input.slice(B,this.pos);++this.pos;Y=this.pos;Ka=this.readWord1();this.containsEsc&&this.unexpected(Y);Y=this.regexpState||(this.regexpState=new pl(this));Y.reset(B,L,Ka);this.validateRegExpFlags(Y);this.validateRegExpPattern(Y);
B=null;try{B=new RegExp(L,Ka)}catch(nb){}return this.finishToken(La.regexp,{pattern:L,flags:Ka,value:B})};Xb.readInt=function(L,Ka,B){var Y=12<=this.options.ecmaVersion&&void 0===Ka;B=B&&48===this.input.charCodeAt(this.pos);for(var nb=this.pos,ld=0,ue=0,pg=0,Kg=null==Ka?Infinity:Ka;pg<Kg;++pg,++this.pos){var uh=this.input.charCodeAt(this.pos);if(Y&&95===uh)B&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===ue&&this.raiseRecoverable(this.pos,
"Numeric separator must be exactly one underscore"),0===pg&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),ue=uh;else{var fj=97<=uh?uh-97+10:65<=uh?uh-65+10:48<=uh&&57>=uh?uh-48:Infinity;if(fj>=L)break;ue=uh;ld=ld*L+fj}}Y&&95===ue&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===nb||null!=Ka&&this.pos-nb!==Ka?null:ld};Xb.readRadixNumber=function(L){var Ka=this.pos;this.pos+=2;var B=this.readInt(L);
null==B&&this.raise(this.start+2,"Expected number in radix "+L);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(B=ja(this.input.slice(Ka,this.pos)),++this.pos):c(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");return this.finishToken(La.num,B)};Xb.readNumber=function(L){var Ka=this.pos;L||null!==this.readInt(10,void 0,!0)||this.raise(Ka,"Invalid number");var B=2<=this.pos-Ka&&48===this.input.charCodeAt(Ka);B&&this.strict&&this.raise(Ka,"Invalid number");
var Y=this.input.charCodeAt(this.pos);if(!B&&!L&&11<=this.options.ecmaVersion&&110===Y)return B=ja(this.input.slice(Ka,this.pos)),++this.pos,c(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(La.num,B);B&&/[89]/.test(this.input.slice(Ka,this.pos))&&(B=!1);46!==Y||B||(++this.pos,this.readInt(10),Y=this.input.charCodeAt(this.pos));69!==Y&&101!==Y||B||(Y=this.input.charCodeAt(++this.pos),43!==Y&&45!==Y||++this.pos,null===this.readInt(10)&&this.raise(Ka,
"Invalid number"));c(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");L=this.input.slice(Ka,this.pos);B=B?parseInt(L,8):parseFloat(L.replace(/_/g,""));return this.finishToken(La.num,B)};Xb.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>this.options.ecmaVersion&&this.unexpected();var L=++this.pos;var Ka=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<Ka&&this.invalidStringToken(L,"Code point out of bounds")}else Ka=
this.readHexChar(4);return Ka};Xb.readString=function(L){for(var Ka="",B=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var Y=this.input.charCodeAt(this.pos);if(Y===L)break;92===Y?(Ka+=this.input.slice(B,this.pos),Ka+=this.readEscapedChar(!1),B=this.pos):(f(Y,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}Ka+=this.input.slice(B,this.pos++);return this.finishToken(La.string,Ka)};var Sk={};Xb.tryReadTemplateToken=
function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(L){if(L===Sk)this.readInvalidTemplateToken();else throw L;}this.inTemplateElement=!1};Xb.invalidStringToken=function(L,Ka){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw Sk;this.raise(L,Ka)};Xb.readTmplToken=function(){for(var L="",Ka=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var B=this.input.charCodeAt(this.pos);if(96===B||36===B&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===
this.start&&(this.type===La.template||this.type===La.invalidTemplate)){if(36===B)return this.pos+=2,this.finishToken(La.dollarBraceL);++this.pos;return this.finishToken(La.backQuote)}L+=this.input.slice(Ka,this.pos);return this.finishToken(La.template,L)}if(92===B)L+=this.input.slice(Ka,this.pos),L+=this.readEscapedChar(!0),Ka=this.pos;else if(f(B)){L+=this.input.slice(Ka,this.pos);++this.pos;switch(B){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:L+="\n";break;default:L+=String.fromCharCode(B)}this.options.locations&&
(++this.curLine,this.lineStart=this.pos);Ka=this.pos}else++this.pos}};Xb.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;case "`":return this.finishToken(La.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Xb.readEscapedChar=function(L){var Ka=this.input.charCodeAt(++this.pos);++this.pos;switch(Ka){case 110:return"\n";
case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Ha(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),L)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),
null;default:if(48<=Ka&&55>=Ka){var B=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],Y=parseInt(B,8);255<Y&&(B=B.slice(0,-1),Y=parseInt(B,8));this.pos+=B.length-1;Ka=this.input.charCodeAt(this.pos);"0"===B&&56!==Ka&&57!==Ka||!this.strict&&!L||this.invalidStringToken(this.pos-1-B.length,L?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(Y)}return f(Ka)?"":String.fromCharCode(Ka)}};Xb.readHexChar=function(L){var Ka=this.pos;L=this.readInt(16,L);null===
L&&this.invalidStringToken(Ka,"Bad character escape sequence");return L};Xb.readWord1=function(){this.containsEsc=!1;for(var L="",Ka=!0,B=this.pos,Y=6<=this.options.ecmaVersion;this.pos<this.input.length;){var nb=this.fullCharCodeAtPos();if(g(nb,Y))this.pos+=65535>=nb?1:2;else if(92===nb)this.containsEsc=!0,L+=this.input.slice(B,this.pos),B=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,nb=this.readCodePoint(),
(Ka?c:g)(nb,Y)||this.invalidStringToken(B,"Invalid Unicode escape"),L+=Ha(nb),B=this.pos;else break;Ka=!1}return L+this.input.slice(B,this.pos)};Xb.readWord=function(){var L=this.readWord1(),Ka=La.name;this.keywords.test(L)&&(Ka=qd[L]);return this.finishToken(Ka,L)};Oa.acorn={Parser:Oa,version:"8.0.4",defaultOptions:Kb,Position:W,SourceLocation:ea,getLineInfo:n,Node:Sh,TokenType:Ac,tokTypes:La,keywordTypes:qd,TokContext:hc,tokContexts:Hi,isIdentifierChar:g,isIdentifierStart:c,Token:pk,isNewLine:f,
lineBreak:Fd,lineBreakG:na,nonASCIIwhitespace:Va};l.Node=Sh;l.Parser=Oa;l.Position=W;l.SourceLocation=ea;l.TokContext=hc;l.Token=pk;l.TokenType=Ac;l.defaultOptions=Kb;l.getLineInfo=n;l.isIdentifierChar=g;l.isIdentifierStart=c;l.isNewLine=f;l.keywordTypes=qd;l.lineBreak=Fd;l.lineBreakG=na;l.nonASCIIwhitespace=Va;l.parse=function(L,Ka){return Oa.parse(L,Ka)};l.parseExpressionAt=function(L,Ka,B){return Oa.parseExpressionAt(L,Ka,B)};l.tokContexts=Hi;l.tokTypes=La;l.tokenizer=function(L,Ka){return Oa.tokenizer(L,
Ka)};l.version="8.0.4";Object.defineProperty(l,"__esModule",{value:!0})})})(an.acornModule,an.acorn);return an.acorn}function tn(){if(bn.hasRequiredAcorn)return bn.acorn;bn.hasRequiredAcorn=1;(function(e,h){(function(l,b){b(h)})(bn.commonjsHelpers.commonjsGlobal,function(l){function b(B,Y){for(var nb=65536,ld=0;ld<Y.length;ld+=2){nb+=Y[ld];if(nb>B)return!1;nb+=Y[ld+1];if(nb>=B)return!0}}function c(B,Y){return 65>B?36===B:91>B?!0:97>B?95===B:123>B?!0:65535>=B?170<=B&&rc.test(String.fromCharCode(B)):
!1===Y?!1:b(B,Ac)}function g(B,Y){return 48>B?36===B:58>B?!0:65>B?!1:91>B?!0:97>B?95===B:123>B?!0:65535>=B?170<=B&&Lb.test(String.fromCharCode(B)):!1===Y?!1:b(B,Ac)||b(B,Xb)}function a(B,Y){return new qd(B,{beforeExpr:!0,binop:Y})}function d(B,Y){void 0===Y&&(Y={});Y.keyword=B;return Fd[B]=new qd(B,Y)}function f(B){return 10===B||13===B||8232===B||8233===B}function k(B){return new RegExp("^(?:"+B.replace(/ /g,"|")+")$")}function n(B,Y){for(var nb=1,ld=0;;){yd.lastIndex=ld;var ue=yd.exec(B);if(ue&&
ue.index<Y)++nb,ld=ue.index+ue[0].length;else return new Kb(nb,Y-ld)}}function p(B){var Y={},nb;for(nb in Oa)Y[nb]=B&&za.call(B,nb)?B[nb]:Oa[nb];"latest"===Y.ecmaVersion?Y.ecmaVersion=1E8:null==Y.ecmaVersion?(!U&&"object"===("undefined"===typeof console?"undefined":ad(console))&&console.warn&&(U=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),Y.ecmaVersion=11):2015<=Y.ecmaVersion&&(Y.ecmaVersion-=2009);null==Y.allowReserved&&
(Y.allowReserved=5>Y.ecmaVersion);if(ea(Y.onToken)){var ld=Y.onToken;Y.onToken=function(ue){return ld.push(ue)}}ea(Y.onComment)&&(Y.onComment=q(Y,Y.onComment));return Y}function q(B,Y){return function(nb,ld,ue,pg,Kg,uh){nb={type:nb?"Block":"Line",value:ld,start:ue,end:pg};B.locations&&(nb.loc=new V(this,Kg,uh));B.ranges&&(nb.range=[ue,pg]);Y.push(nb)}}function r(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function u(B,Y){var nb=B.key;
return!B.computed&&("Identifier"===nb.type&&nb.name===Y||"Literal"===nb.type&&nb.value===Y)}function x(B){return"MemberExpression"===B.type&&"PrivateIdentifier"===B.property.type||"ChainExpression"===B.type&&x(B.expression)}function y(B,Y,nb,ld){B.type=Y;B.end=nb;this.options.locations&&(B.loc.end=ld);this.options.ranges&&(B.range[1]=nb);return B}function D(B){B=pk[B]={binary:k(Hl[B]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:k("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:k(pl[B])}};B.nonBinary.Script_Extensions=B.nonBinary.Script;B.nonBinary.gc=B.nonBinary.General_Category;B.nonBinary.sc=B.nonBinary.Script;B.nonBinary.scx=B.nonBinary.Script_Extensions}function H(B){if(65535>=B)return String.fromCharCode(B);B-=65536;return String.fromCharCode((B>>10)+55296,(B&1023)+56320)}function I(B){return 36===B||40<=B&&43>=B||46===B||63===B||91<=B&&94>=B||123<=B&&125>=B}function N(B){return 65<=B&&90>=B||97<=B&&122>=B||95===B}function J(B){return N(B)||sa(B)}function sa(B){return 48<=
B&&57>=B}function ja(B){return 48<=B&&57>=B||65<=B&&70>=B||97<=B&&102>=B}function Ha(B){return 65<=B&&70>=B?10+(B-65):97<=B&&102>=B?10+(B-97):B-48}function Qa(B){return"function"!==typeof BigInt?null:BigInt(B.replace(/_/g,""))}function ec(B){if(65535>=B)return String.fromCharCode(B);B-=65536;return String.fromCharCode((B>>10)+55296,(B&1023)+56320)}var mc={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",
5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},hc={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this","5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",
6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},Ua=/^in(stanceof)?$/,xa="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
rc=new RegExp("["+xa+"]"),Lb=new RegExp("["+xa+"\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]");
xa=null;var Ac=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,
19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,
6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],Xb=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,
2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239],qd=function(B,Y){void 0===Y&&(Y={});this.label=
B;this.keyword=Y.keyword;this.beforeExpr=!!Y.beforeExpr;this.startsExpr=!!Y.startsExpr;this.isLoop=!!Y.isLoop;this.isAssign=!!Y.isAssign;this.prefix=!!Y.prefix;this.postfix=!!Y.postfix;this.binop=Y.binop||null;this.updateContext=null};xa={beforeExpr:!0};var La={startsExpr:!0},Fd={},na={num:new qd("num",La),regexp:new qd("regexp",La),string:new qd("string",La),name:new qd("name",La),privateId:new qd("privateId",La),eof:new qd("eof"),bracketL:new qd("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new qd("]"),
braceL:new qd("{",{beforeExpr:!0,startsExpr:!0}),braceR:new qd("}"),parenL:new qd("(",{beforeExpr:!0,startsExpr:!0}),parenR:new qd(")"),comma:new qd(",",xa),semi:new qd(";",xa),colon:new qd(":",xa),dot:new qd("."),question:new qd("?",xa),questionDot:new qd("?."),arrow:new qd("=>",xa),template:new qd("template"),invalidTemplate:new qd("invalidTemplate"),ellipsis:new qd("...",xa),backQuote:new qd("`",La),dollarBraceL:new qd("${",{beforeExpr:!0,startsExpr:!0}),eq:new qd("=",{beforeExpr:!0,isAssign:!0}),
assign:new qd("_=",{beforeExpr:!0,isAssign:!0}),incDec:new qd("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new qd("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:a("||",1),logicalAND:a("&&",2),bitwiseOR:a("|",3),bitwiseXOR:a("^",4),bitwiseAND:a("&",5),equality:a("==/!=/===/!==",6),relational:a("</>/<=/>=",7),bitShift:a("<</>>/>>>",8),plusMin:new qd("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:a("%",10),star:a("*",10),slash:a("/",10),starstar:new qd("**",{beforeExpr:!0}),
coalesce:a("??",1),_break:d("break"),_case:d("case",xa),_catch:d("catch"),_continue:d("continue"),_debugger:d("debugger"),_default:d("default",xa),_do:d("do",{isLoop:!0,beforeExpr:!0}),_else:d("else",xa),_finally:d("finally"),_for:d("for",{isLoop:!0}),_function:d("function",La),_if:d("if"),_return:d("return",xa),_switch:d("switch"),_throw:d("throw",xa),_try:d("try"),_var:d("var"),_const:d("const"),_while:d("while",{isLoop:!0}),_with:d("with"),_new:d("new",{beforeExpr:!0,startsExpr:!0}),_this:d("this",
La),_super:d("super",La),_class:d("class",La),_extends:d("extends",xa),_export:d("export"),_import:d("import",La),_null:d("null",La),_true:d("true",La),_false:d("false",La),_in:d("in",{beforeExpr:!0,binop:7}),_instanceof:d("instanceof",{beforeExpr:!0,binop:7}),_typeof:d("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:d("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:d("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Va=/\r\n?|\n|\u2028|\u2029/,yd=new RegExp(Va.source,"g"),me=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,
ta=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g;xa=Object.prototype;var za=xa.hasOwnProperty,W=xa.toString,ea=Array.isArray||function(B){return"[object Array]"===W.call(B)},Kb=function(B,Y){this.line=B;this.column=Y};Kb.prototype.offset=function(B){return new Kb(this.line,this.column+B)};var V=function(B,Y,nb){this.start=Y;this.end=nb;null!==B.sourceFile&&(this.source=B.sourceFile)},Oa={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,
allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},U=!1,fd=function(B,Y,nb){this.options=B=p(B);this.sourceFile=B.sourceFile;this.keywords=k(hc[6<=B.ecmaVersion?6:"module"===B.sourceType?"5module":5]);var ld="";!0!==B.allowReserved&&(ld=mc[6<=B.ecmaVersion?6:5===B.ecmaVersion?5:3],"module"===B.sourceType&&(ld+=" await"));
this.reservedWords=k(ld);ld=(ld?ld+" ":"")+mc.strict;this.reservedWordsStrict=k(ld);this.reservedWordsStrictBind=k(ld+" "+mc.strictBind);this.input=String(Y);this.containsEsc=!1;nb?(this.pos=nb,this.lineStart=this.input.lastIndexOf("\n",nb-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Va).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=na.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=this.lastTokStartLoc=
null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===B.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.potentialArrowInForAwait=!1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports=Object.create(null);0===this.pos&&B.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null;this.privateNameStack=
[]};xa={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};fd.prototype.parse=function(){var B=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(B)};xa.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};xa.inGenerator.get=
function(){return 0<(this.currentVarScope().flags&8)&&!this.currentVarScope().inClassFieldInit};xa.inAsync.get=function(){return 0<(this.currentVarScope().flags&4)&&!this.currentVarScope().inClassFieldInit};xa.canAwait.get=function(){for(var B=this.scopeStack.length-1;0<=B;B--){var Y=this.scopeStack[B];if(Y.inClassFieldInit||Y.flags&256)return!1;if(Y.flags&2)return 0<(Y.flags&4)}return this.inModule&&13<=this.options.ecmaVersion||this.options.allowAwaitOutsideFunction};xa.allowSuper.get=function(){var B=
this.currentThisScope(),Y=B.inClassFieldInit;return 0<(B.flags&64)||Y||this.options.allowSuperOutsideMethod};xa.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};xa.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};xa.allowNewDotTarget.get=function(){var B=this.currentThisScope(),Y=B.inClassFieldInit;return 0<(B.flags&258)||Y};xa.inClassStaticBlock.get=function(){return 0<(this.currentVarScope().flags&256)};fd.extend=function(){for(var B=
[],Y=arguments.length;Y--;)B[Y]=arguments[Y];Y=this;for(var nb=0;nb<B.length;nb++)Y=B[nb](Y);return Y};fd.parse=function(B,Y){return(new this(Y,B)).parse()};fd.parseExpressionAt=function(B,Y,nb){B=new this(nb,B,Y);B.nextToken();return B.parseExpression()};fd.tokenizer=function(B,Y){return new this(Y,B)};Object.defineProperties(fd.prototype,xa);xa=fd.prototype;var Td=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;xa.strictDirective=function(B){for(;;){ta.lastIndex=B;B+=ta.exec(this.input)[0].length;
var Y=Td.exec(this.input.slice(B));if(!Y)return!1;if("use strict"===(Y[1]||Y[2])){ta.lastIndex=B+Y[0].length;B=ta.exec(this.input);Y=B.index+B[0].length;var nb=this.input.charAt(Y);return";"===nb||"}"===nb||Va.test(B[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(nb)||"!"===nb&&"="===this.input.charAt(Y+1))}B+=Y[0].length;ta.lastIndex=B;B+=ta.exec(this.input)[0].length;";"===this.input[B]&&B++}};xa.eat=function(B){return this.type===B?(this.next(),!0):!1};xa.isContextual=function(B){return this.type===na.name&&
this.value===B&&!this.containsEsc};xa.eatContextual=function(B){if(!this.isContextual(B))return!1;this.next();return!0};xa.expectContextual=function(B){this.eatContextual(B)||this.unexpected()};xa.canInsertSemicolon=function(){return this.type===na.eof||this.type===na.braceR||Va.test(this.input.slice(this.lastTokEnd,this.start))};xa.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};
xa.semicolon=function(){this.eat(na.semi)||this.insertSemicolon()||this.unexpected()};xa.afterTrailingComma=function(B,Y){if(this.type===B){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc);Y||this.next();return!0}};xa.expect=function(B){this.eat(B)||this.unexpected()};xa.unexpected=function(B){this.raise(null!=B?B:this.start,"Unexpected token")};xa.checkPatternErrors=function(B,Y){B&&(-1<B.trailingComma&&this.raiseRecoverable(B.trailingComma,"Comma is not permitted after the rest element"),
B=Y?B.parenthesizedAssign:B.parenthesizedBind,-1<B&&this.raiseRecoverable(B,"Parenthesized pattern"))};xa.checkExpressionErrors=function(B,Y){if(!B)return!1;var nb=B.shorthandAssign;B=B.doubleProto;if(!Y)return 0<=nb||0<=B;0<=nb&&this.raise(nb,"Shorthand property assignments are valid only in destructuring patterns");0<=B&&this.raiseRecoverable(B,"Redefinition of __proto__ property")};xa.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,
"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};xa.isSimpleAssignTarget=function(B){return"ParenthesizedExpression"===B.type?this.isSimpleAssignTarget(B.expression):"Identifier"===B.type||"MemberExpression"===B.type};xa=fd.prototype;xa.parseTopLevel=function(B){var Y=Object.create(null);B.body||(B.body=[]);for(;this.type!==na.eof;){var nb=this.parseStatement(null,!0,Y);B.body.push(nb)}if(this.inModule)for(Y=0,nb=
Object.keys(this.undefinedExports);Y<nb.length;Y+=1){var ld=nb[Y];this.raiseRecoverable(this.undefinedExports[ld].start,"Export '"+ld+"' is not defined")}this.adaptDirectivePrologue(B.body);this.next();B.sourceType=this.options.sourceType;return this.finishNode(B,"Program")};var nf={kind:"loop"},Je={kind:"switch"};xa.isLet=function(B){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;ta.lastIndex=this.pos;var Y=ta.exec(this.input);Y=this.pos+Y[0].length;var nb=this.input.charCodeAt(Y);
if(91===nb||92===nb||55295<nb&&56320>nb)return!0;if(B)return!1;if(123===nb)return!0;if(c(nb,!0)){for(B=Y+1;g(nb=this.input.charCodeAt(B),!0);)++B;if(92===nb||55295<nb&&56320>nb)return!0;B=this.input.slice(Y,B);if(!Ua.test(B))return!0}return!1};xa.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;ta.lastIndex=this.pos;var B=ta.exec(this.input);B=this.pos+B[0].length;var Y;return!Va.test(this.input.slice(this.pos,B))&&"function"===this.input.slice(B,B+8)&&
(B+8===this.input.length||!(g(Y=this.input.charCodeAt(B+8))||55295<Y&&56320>Y))};xa.parseStatement=function(B,Y,nb){var ld=this.type,ue=this.startNode();if(this.isLet(B)){ld=na._var;var pg="let"}switch(ld){case na._break:case na._continue:return this.parseBreakContinueStatement(ue,ld.keyword);case na._debugger:return this.parseDebuggerStatement(ue);case na._do:return this.parseDoStatement(ue);case na._for:return this.parseForStatement(ue);case na._function:return B&&(this.strict||"if"!==B&&"label"!==
B)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(ue,!1,!B);case na._class:return B&&this.unexpected(),this.parseClass(ue,!0);case na._if:return this.parseIfStatement(ue);case na._return:return this.parseReturnStatement(ue);case na._switch:return this.parseSwitchStatement(ue);case na._throw:return this.parseThrowStatement(ue);case na._try:return this.parseTryStatement(ue);case na._const:case na._var:return pg=pg||this.value,B&&"var"!==pg&&this.unexpected(),this.parseVarStatement(ue,
pg);case na._while:return this.parseWhileStatement(ue);case na._with:return this.parseWithStatement(ue);case na.braceL:return this.parseBlock(!0,ue);case na.semi:return this.parseEmptyStatement(ue);case na._export:case na._import:if(10<this.options.ecmaVersion&&ld===na._import&&(ta.lastIndex=this.pos,B=ta.exec(this.input),B=this.input.charCodeAt(this.pos+B[0].length),40===B||46===B))return this.parseExpressionStatement(ue,this.parseExpression());this.options.allowImportExportEverywhere||(Y||this.raise(this.start,
"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return ld===na._import?this.parseImport(ue):this.parseExport(ue,nb);default:if(this.isAsyncFunction())return B&&this.unexpected(),this.next(),this.parseFunctionStatement(ue,!0,!B);Y=this.value;nb=this.parseExpression();return ld===na.name&&"Identifier"===nb.type&&this.eat(na.colon)?this.parseLabeledStatement(ue,Y,nb,B):this.parseExpressionStatement(ue,
nb)}};xa.parseBreakContinueStatement=function(B,Y){var nb="break"===Y;this.next();this.eat(na.semi)||this.insertSemicolon()?B.label=null:this.type!==na.name?this.unexpected():(B.label=this.parseIdent(),this.semicolon());for(var ld=0;ld<this.labels.length;++ld){var ue=this.labels[ld];if(null==B.label||ue.name===B.label.name){if(null!=ue.kind&&(nb||"loop"===ue.kind))break;if(B.label&&nb)break}}ld===this.labels.length&&this.raise(B.start,"Unsyntactic "+Y);return this.finishNode(B,nb?"BreakStatement":
"ContinueStatement")};xa.parseDebuggerStatement=function(B){this.next();this.semicolon();return this.finishNode(B,"DebuggerStatement")};xa.parseDoStatement=function(B){this.next();this.labels.push(nf);B.body=this.parseStatement("do");this.labels.pop();this.expect(na._while);B.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(na.semi):this.semicolon();return this.finishNode(B,"DoWhileStatement")};xa.parseForStatement=function(B){this.next();var Y=9<=this.options.ecmaVersion&&this.canAwait&&
this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(nf);this.enterScope(0);this.expect(na.parenL);if(this.type===na.semi)return-1<Y&&this.unexpected(Y),this.parseFor(B,null);var nb=this.isLet();if(this.type===na._var||this.type===na._const||nb){var ld=this.startNode();nb=nb?"let":this.value;this.next();this.parseVar(ld,!0,nb);this.finishNode(ld,"VariableDeclaration");if((this.type===na._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===ld.declarations.length)return 9<=this.options.ecmaVersion&&
(this.type===na._in?-1<Y&&this.unexpected(Y):B.await=-1<Y),this.parseForIn(B,ld);-1<Y&&this.unexpected(Y);return this.parseFor(B,ld)}ld=this.isContextual("let");nb=!1;var ue=new r,pg=this.parseExpression(-1<Y?"await":!0,ue);if(this.type===na._in||(nb=6<=this.options.ecmaVersion&&this.isContextual("of")))return 9<=this.options.ecmaVersion&&(this.type===na._in?-1<Y&&this.unexpected(Y):B.await=-1<Y),ld&&nb&&this.raise(pg.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(pg,
!1,ue),this.checkLValPattern(pg),this.parseForIn(B,pg);this.checkExpressionErrors(ue,!0);-1<Y&&this.unexpected(Y);return this.parseFor(B,pg)};xa.parseFunctionStatement=function(B,Y,nb){this.next();return this.parseFunction(B,fh|(nb?0:zi),!1,Y)};xa.parseIfStatement=function(B){this.next();B.test=this.parseParenExpression();B.consequent=this.parseStatement("if");B.alternate=this.eat(na._else)?this.parseStatement("if"):null;return this.finishNode(B,"IfStatement")};xa.parseReturnStatement=function(B){this.inFunction||
this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(na.semi)||this.insertSemicolon()?B.argument=null:(B.argument=this.parseExpression(),this.semicolon());return this.finishNode(B,"ReturnStatement")};xa.parseSwitchStatement=function(B){this.next();B.discriminant=this.parseParenExpression();B.cases=[];this.expect(na.braceL);this.labels.push(Je);this.enterScope(0);for(var Y,nb=!1;this.type!==na.braceR;)if(this.type===na._case||this.type===
na._default){var ld=this.type===na._case;Y&&this.finishNode(Y,"SwitchCase");B.cases.push(Y=this.startNode());Y.consequent=[];this.next();ld?Y.test=this.parseExpression():(nb&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),nb=!0,Y.test=null);this.expect(na.colon)}else Y||this.unexpected(),Y.consequent.push(this.parseStatement(null));this.exitScope();Y&&this.finishNode(Y,"SwitchCase");this.next();this.labels.pop();return this.finishNode(B,"SwitchStatement")};xa.parseThrowStatement=
function(B){this.next();Va.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");B.argument=this.parseExpression();this.semicolon();return this.finishNode(B,"ThrowStatement")};var rf=[];xa.parseTryStatement=function(B){this.next();B.block=this.parseBlock();B.handler=null;if(this.type===na._catch){var Y=this.startNode();this.next();if(this.eat(na.parenL)){Y.param=this.parseBindingAtom();var nb="Identifier"===Y.param.type;this.enterScope(nb?32:
0);this.checkLValPattern(Y.param,nb?4:2);this.expect(na.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),Y.param=null,this.enterScope(0);Y.body=this.parseBlock(!1);this.exitScope();B.handler=this.finishNode(Y,"CatchClause")}B.finalizer=this.eat(na._finally)?this.parseBlock():null;B.handler||B.finalizer||this.raise(B.start,"Missing catch or finally clause");return this.finishNode(B,"TryStatement")};xa.parseVarStatement=function(B,Y){this.next();this.parseVar(B,!1,Y);this.semicolon();return this.finishNode(B,
"VariableDeclaration")};xa.parseWhileStatement=function(B){this.next();B.test=this.parseParenExpression();this.labels.push(nf);B.body=this.parseStatement("while");this.labels.pop();return this.finishNode(B,"WhileStatement")};xa.parseWithStatement=function(B){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();B.object=this.parseParenExpression();B.body=this.parseStatement("with");return this.finishNode(B,"WithStatement")};xa.parseEmptyStatement=function(B){this.next();return this.finishNode(B,
"EmptyStatement")};xa.parseLabeledStatement=function(B,Y,nb,ld){for(var ue=0,pg=this.labels;ue<pg.length;ue+=1)pg[ue].name===Y&&this.raise(nb.start,"Label '"+Y+"' is already declared");ue=this.type.isLoop?"loop":this.type===na._switch?"switch":null;for(pg=this.labels.length-1;0<=pg;pg--){var Kg=this.labels[pg];if(Kg.statementStart===B.start)Kg.statementStart=this.start,Kg.kind=ue;else break}this.labels.push({name:Y,kind:ue,statementStart:this.start});B.body=this.parseStatement(ld?-1===ld.indexOf("label")?
ld+"label":ld:"label");this.labels.pop();B.label=nb;return this.finishNode(B,"LabeledStatement")};xa.parseExpressionStatement=function(B,Y){B.expression=Y;this.semicolon();return this.finishNode(B,"ExpressionStatement")};xa.parseBlock=function(B,Y,nb){void 0===B&&(B=!0);void 0===Y&&(Y=this.startNode());Y.body=[];this.expect(na.braceL);for(B&&this.enterScope(0);this.type!==na.braceR;){var ld=this.parseStatement(null);Y.body.push(ld)}nb&&(this.strict=!1);this.next();B&&this.exitScope();return this.finishNode(Y,
"BlockStatement")};xa.parseFor=function(B,Y){B.init=Y;this.expect(na.semi);B.test=this.type===na.semi?null:this.parseExpression();this.expect(na.semi);B.update=this.type===na.parenR?null:this.parseExpression();this.expect(na.parenR);B.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(B,"ForStatement")};xa.parseForIn=function(B,Y){var nb=this.type===na._in;this.next();"VariableDeclaration"===Y.type&&null!=Y.declarations[0].init&&(!nb||8>this.options.ecmaVersion||
this.strict||"var"!==Y.kind||"Identifier"!==Y.declarations[0].id.type)&&this.raise(Y.start,(nb?"for-in":"for-of")+" loop variable declaration may not have an initializer");B.left=Y;B.right=nb?this.parseExpression():this.parseMaybeAssign();this.expect(na.parenR);B.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(B,nb?"ForInStatement":"ForOfStatement")};xa.parseVar=function(B,Y,nb){B.declarations=[];for(B.kind=nb;;){var ld=this.startNode();this.parseVarId(ld,
nb);this.eat(na.eq)?ld.init=this.parseMaybeAssign(Y):"const"!==nb||this.type===na._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===ld.id.type||Y&&(this.type===na._in||this.isContextual("of"))?ld.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();B.declarations.push(this.finishNode(ld,"VariableDeclarator"));if(!this.eat(na.comma))break}return B};xa.parseVarId=function(B,Y){B.id=this.parseBindingAtom();this.checkLValPattern(B.id,
"var"===Y?1:2,!1)};var fh=1,zi=2;xa.parseFunction=function(B,Y,nb,ld,ue){this.initFunction(B);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!ld)this.type===na.star&&Y&zi&&this.unexpected(),B.generator=this.eat(na.star);8<=this.options.ecmaVersion&&(B.async=!!ld);Y&fh&&(B.id=Y&4&&this.type!==na.name?null:this.parseIdent(),!B.id||Y&zi||this.checkLValSimple(B.id,this.strict||B.generator||B.async?this.treatFunctionsAsVar?1:2:3));ld=this.yieldPos;var pg=this.awaitPos,Kg=this.awaitIdentPos;
this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(B.async?4:0)|(B.generator?8:0));Y&fh||(B.id=this.type===na.name?this.parseIdent():null);this.parseFunctionParams(B);this.parseFunctionBody(B,nb,!1,ue);this.yieldPos=ld;this.awaitPos=pg;this.awaitIdentPos=Kg;return this.finishNode(B,Y&fh?"FunctionDeclaration":"FunctionExpression")};xa.parseFunctionParams=function(B){this.expect(na.parenL);B.params=this.parseBindingList(na.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};
xa.parseClass=function(B,Y){this.next();var nb=this.strict;this.strict=!0;this.parseClassId(B,Y);this.parseClassSuper(B);var ld=this.enterClassBody(),ue=this.startNode(),pg=!1;ue.body=[];for(this.expect(na.braceL);this.type!==na.braceR;){var Kg=this.parseClassElement(null!==B.superClass);if(Kg)if(ue.body.push(Kg),"MethodDefinition"===Kg.type&&"constructor"===Kg.kind)pg&&this.raise(Kg.start,"Duplicate constructor in the same class"),pg=!0;else{var uh;if(uh=Kg.key&&"PrivateIdentifier"===Kg.key.type){uh=
ld;var fj=Kg.key.name,Mj=uh[fj],Ck="true";"MethodDefinition"!==Kg.type||"get"!==Kg.kind&&"set"!==Kg.kind||(Ck=(Kg["static"]?"s":"i")+Kg.kind);"iget"===Mj&&"iset"===Ck||"iset"===Mj&&"iget"===Ck||"sget"===Mj&&"sset"===Ck||"sset"===Mj&&"sget"===Ck?(uh[fj]="true",uh=!1):Mj?uh=!0:(uh[fj]=Ck,uh=!1)}uh&&this.raiseRecoverable(Kg.key.start,"Identifier '#"+Kg.key.name+"' has already been declared")}}this.strict=nb;this.next();B.body=this.finishNode(ue,"ClassBody");this.exitClassBody();return this.finishNode(B,
Y?"ClassDeclaration":"ClassExpression")};xa.parseClassElement=function(B){if(this.eat(na.semi))return null;var Y=this.options.ecmaVersion,nb=this.startNode(),ld="",ue=!1,pg=!1,Kg="method",uh=!1;if(this.eatContextual("static")){if(13<=Y&&this.eat(na.braceL))return this.parseClassStaticBlock(nb),nb;this.isClassElementNameStart()||this.type===na.star?uh=!0:ld="static"}nb["static"]=uh;!ld&&8<=Y&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==na.star||this.canInsertSemicolon()?
ld="async":pg=!0);!ld&&(9<=Y||!pg)&&this.eat(na.star)&&(ue=!0);ld||pg||ue||(uh=this.value,!this.eatContextual("get")&&!this.eatContextual("set"))||(this.isClassElementNameStart()?Kg=uh:ld=uh);ld?(nb.computed=!1,nb.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),nb.key.name=ld,this.finishNode(nb.key,"Identifier")):this.parseClassElementName(nb);13>Y||this.type===na.parenL||"method"!==Kg||ue||pg?(B=(Y=!nb["static"]&&u(nb,"constructor"))&&B,Y&&"method"!==Kg&&this.raise(nb.key.start,"Constructor can't have get/set modifier"),
nb.kind=Y?"constructor":Kg,this.parseClassMethod(nb,ue,pg,B)):this.parseClassField(nb);return nb};xa.isClassElementNameStart=function(){return this.type===na.name||this.type===na.privateId||this.type===na.num||this.type===na.string||this.type===na.bracketL||this.type.keyword};xa.parseClassElementName=function(B){this.type===na.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),B.computed=!1,B.key=this.parsePrivateIdent()):this.parsePropertyName(B)};
xa.parseClassMethod=function(B,Y,nb,ld){var ue=B.key;"constructor"===B.kind?(Y&&this.raise(ue.start,"Constructor can't be a generator"),nb&&this.raise(ue.start,"Constructor can't be an async method")):B["static"]&&u(B,"prototype")&&this.raise(ue.start,"Classes may not have a static property named prototype");Y=B.value=this.parseMethod(Y,nb,ld);"get"===B.kind&&0!==Y.params.length&&this.raiseRecoverable(Y.start,"getter should have no params");"set"===B.kind&&1!==Y.params.length&&this.raiseRecoverable(Y.start,
"setter should have exactly one param");"set"===B.kind&&"RestElement"===Y.params[0].type&&this.raiseRecoverable(Y.params[0].start,"Setter cannot use rest params");return this.finishNode(B,"MethodDefinition")};xa.parseClassField=function(B){u(B,"constructor")?this.raise(B.key.start,"Classes can't have a field named 'constructor'"):B["static"]&&u(B,"prototype")&&this.raise(B.key.start,"Classes can't have a static field named 'prototype'");if(this.eat(na.eq)){var Y=this.currentThisScope(),nb=Y.inClassFieldInit;
Y.inClassFieldInit=!0;B.value=this.parseMaybeAssign();Y.inClassFieldInit=nb}else B.value=null;this.semicolon();return this.finishNode(B,"PropertyDefinition")};xa.parseClassStaticBlock=function(B){B.body=[];var Y=this.labels;this.labels=[];for(this.enterScope(320);this.type!==na.braceR;){var nb=this.parseStatement(null);B.body.push(nb)}this.next();this.exitScope();this.labels=Y;return this.finishNode(B,"StaticBlock")};xa.parseClassId=function(B,Y){this.type===na.name?(B.id=this.parseIdent(),Y&&this.checkLValSimple(B.id,
2,!1)):(!0===Y&&this.unexpected(),B.id=null)};xa.parseClassSuper=function(B){B.superClass=this.eat(na._extends)?this.parseExprSubscripts(!1):null};xa.enterClassBody=function(){var B={declared:Object.create(null),used:[]};this.privateNameStack.push(B);return B.declared};xa.exitClassBody=function(){var B=this.privateNameStack.pop(),Y=B.declared;B=B.used;var nb=this.privateNameStack.length;nb=0===nb?null:this.privateNameStack[nb-1];for(var ld=0;ld<B.length;++ld){var ue=B[ld];za.call(Y,ue.name)||(nb?
nb.used.push(ue):this.raiseRecoverable(ue.start,"Private field '#"+ue.name+"' must be declared in an enclosing class"))}};xa.parseExport=function(B,Y){this.next();if(this.eat(na.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(B.exported=this.parseIdent(!0),this.checkExport(Y,B.exported.name,this.lastTokStart)):B.exported=null),this.expectContextual("from"),this.type!==na.string&&this.unexpected(),B.source=this.parseExprAtom(),this.semicolon(),this.finishNode(B,"ExportAllDeclaration");
if(this.eat(na._default)){this.checkExport(Y,"default",this.lastTokStart);var nb;this.type===na._function||(nb=this.isAsyncFunction())?(Y=this.startNode(),this.next(),nb&&this.next(),B.declaration=this.parseFunction(Y,fh|4,!1,nb)):this.type===na._class?(nb=this.startNode(),B.declaration=this.parseClass(nb,"nullableID")):(B.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(B,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())B.declaration=this.parseStatement(null),
"VariableDeclaration"===B.declaration.type?this.checkVariableExport(Y,B.declaration.declarations):this.checkExport(Y,B.declaration.id.name,B.declaration.id.start),B.specifiers=[],B.source=null;else{B.declaration=null;B.specifiers=this.parseExportSpecifiers(Y);if(this.eatContextual("from"))this.type!==na.string&&this.unexpected(),B.source=this.parseExprAtom();else{nb=0;for(Y=B.specifiers;nb<Y.length;nb+=1){var ld=Y[nb];this.checkUnreserved(ld.local);this.checkLocalExport(ld.local)}B.source=null}this.semicolon()}return this.finishNode(B,
"ExportNamedDeclaration")};xa.checkExport=function(B,Y,nb){B&&(za.call(B,Y)&&this.raiseRecoverable(nb,"Duplicate export '"+Y+"'"),B[Y]=!0)};xa.checkPatternExport=function(B,Y){var nb=Y.type;if("Identifier"===nb)this.checkExport(B,Y.name,Y.start);else if("ObjectPattern"===nb)for(nb=0,Y=Y.properties;nb<Y.length;nb+=1)this.checkPatternExport(B,Y[nb]);else if("ArrayPattern"===nb)for(nb=0,Y=Y.elements;nb<Y.length;nb+=1){var ld=Y[nb];ld&&this.checkPatternExport(B,ld)}else"Property"===nb?this.checkPatternExport(B,
Y.value):"AssignmentPattern"===nb?this.checkPatternExport(B,Y.left):"RestElement"===nb?this.checkPatternExport(B,Y.argument):"ParenthesizedExpression"===nb&&this.checkPatternExport(B,Y.expression)};xa.checkVariableExport=function(B,Y){if(B)for(var nb=0;nb<Y.length;nb+=1)this.checkPatternExport(B,Y[nb].id)};xa.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};
xa.parseExportSpecifiers=function(B){var Y=[],nb=!0;for(this.expect(na.braceL);!this.eat(na.braceR);){if(nb)nb=!1;else if(this.expect(na.comma),this.afterTrailingComma(na.braceR))break;var ld=this.startNode();ld.local=this.parseIdent(!0);ld.exported=this.eatContextual("as")?this.parseIdent(!0):ld.local;this.checkExport(B,ld.exported.name,ld.exported.start);Y.push(this.finishNode(ld,"ExportSpecifier"))}return Y};xa.parseImport=function(B){this.next();this.type===na.string?(B.specifiers=rf,B.source=
this.parseExprAtom()):(B.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),B.source=this.type===na.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(B,"ImportDeclaration")};xa.parseImportSpecifiers=function(){var B=[],Y=!0;if(this.type===na.name){var nb=this.startNode();nb.local=this.parseIdent();this.checkLValSimple(nb.local,2);B.push(this.finishNode(nb,"ImportDefaultSpecifier"));if(!this.eat(na.comma))return B}if(this.type===na.star)return Y=
this.startNode(),this.next(),this.expectContextual("as"),Y.local=this.parseIdent(),this.checkLValSimple(Y.local,2),B.push(this.finishNode(Y,"ImportNamespaceSpecifier")),B;for(this.expect(na.braceL);!this.eat(na.braceR);){if(Y)Y=!1;else if(this.expect(na.comma),this.afterTrailingComma(na.braceR))break;nb=this.startNode();nb.imported=this.parseIdent(!0);this.eatContextual("as")?nb.local=this.parseIdent():(this.checkUnreserved(nb.imported),nb.local=nb.imported);this.checkLValSimple(nb.local,2);B.push(this.finishNode(nb,
"ImportSpecifier"))}return B};xa.adaptDirectivePrologue=function(B){for(var Y=0;Y<B.length&&this.isDirectiveCandidate(B[Y]);++Y)B[Y].directive=B[Y].expression.raw.slice(1,-1)};xa.isDirectiveCandidate=function(B){return"ExpressionStatement"===B.type&&"Literal"===B.expression.type&&"string"===typeof B.expression.value&&('"'===this.input[B.start]||"'"===this.input[B.start])};xa=fd.prototype;xa.toAssignable=function(B,Y,nb){if(6<=this.options.ecmaVersion&&B)switch(B.type){case "Identifier":this.inAsync&&
"await"===B.name&&this.raise(B.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":B.type="ObjectPattern";nb&&this.checkPatternErrors(nb,!0);nb=0;for(var ld=B.properties;nb<ld.length;nb+=1){var ue=ld[nb];this.toAssignable(ue,Y);"RestElement"!==ue.type||"ArrayPattern"!==ue.argument.type&&"ObjectPattern"!==ue.argument.type||this.raise(ue.argument.start,"Unexpected token")}break;
case "Property":"init"!==B.kind&&this.raise(B.key.start,"Object pattern can't contain getter or setter");this.toAssignable(B.value,Y);break;case "ArrayExpression":B.type="ArrayPattern";nb&&this.checkPatternErrors(nb,!0);this.toAssignableList(B.elements,Y);break;case "SpreadElement":B.type="RestElement";this.toAssignable(B.argument,Y);"AssignmentPattern"===B.argument.type&&this.raise(B.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==B.operator&&this.raise(B.left.end,
"Only '=' operator can be used for specifying default value.");B.type="AssignmentPattern";delete B.operator;this.toAssignable(B.left,Y);break;case "ParenthesizedExpression":this.toAssignable(B.expression,Y,nb);break;case "ChainExpression":this.raiseRecoverable(B.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":if(!Y)break;default:this.raise(B.start,"Assigning to rvalue")}else nb&&this.checkPatternErrors(nb,!0);return B};xa.toAssignableList=function(B,Y){for(var nb=
B.length,ld=0;ld<nb;ld++){var ue=B[ld];ue&&this.toAssignable(ue,Y)}nb&&(nb=B[nb-1],6===this.options.ecmaVersion&&Y&&nb&&"RestElement"===nb.type&&"Identifier"!==nb.argument.type&&this.unexpected(nb.argument.start));return B};xa.parseSpread=function(B){var Y=this.startNode();this.next();Y.argument=this.parseMaybeAssign(!1,B);return this.finishNode(Y,"SpreadElement")};xa.parseRestBinding=function(){var B=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==na.name&&this.unexpected();
B.argument=this.parseBindingAtom();return this.finishNode(B,"RestElement")};xa.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case na.bracketL:var B=this.startNode();this.next();B.elements=this.parseBindingList(na.bracketR,!0,!0);return this.finishNode(B,"ArrayPattern");case na.braceL:return this.parseObj(!0)}return this.parseIdent()};xa.parseBindingList=function(B,Y,nb){for(var ld=[],ue=!0;!this.eat(B);)if(ue?ue=!1:this.expect(na.comma),Y&&this.type===na.comma)ld.push(null);
else if(nb&&this.afterTrailingComma(B))break;else if(this.type===na.ellipsis){Y=this.parseRestBinding();this.parseBindingListItem(Y);ld.push(Y);this.type===na.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(B);break}else{var pg=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(pg);ld.push(pg)}return ld};xa.parseBindingListItem=function(B){return B};xa.parseMaybeDefault=function(B,Y,nb){nb=nb||this.parseBindingAtom();if(6>this.options.ecmaVersion||
!this.eat(na.eq))return nb;B=this.startNodeAt(B,Y);B.left=nb;B.right=this.parseMaybeAssign();return this.finishNode(B,"AssignmentPattern")};xa.checkLValSimple=function(B,Y,nb){void 0===Y&&(Y=0);var ld=0!==Y;switch(B.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(B.name)&&this.raiseRecoverable(B.start,(ld?"Binding ":"Assigning to ")+B.name+" in strict mode");ld&&(2===Y&&"let"===B.name&&this.raiseRecoverable(B.start,"let is disallowed as a lexically bound name"),nb&&(za.call(nb,
B.name)&&this.raiseRecoverable(B.start,"Argument name clash"),nb[B.name]=!0),5!==Y&&this.declareName(B.name,Y,B.start));break;case "ChainExpression":this.raiseRecoverable(B.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":ld&&this.raiseRecoverable(B.start,"Binding member expression");break;case "ParenthesizedExpression":return ld&&this.raiseRecoverable(B.start,"Binding parenthesized expression"),this.checkLValSimple(B.expression,Y,nb);default:this.raise(B.start,
(ld?"Binding":"Assigning to")+" rvalue")}};xa.checkLValPattern=function(B,Y,nb){void 0===Y&&(Y=0);switch(B.type){case "ObjectPattern":var ld=0;for(B=B.properties;ld<B.length;ld+=1)this.checkLValInnerPattern(B[ld],Y,nb);break;case "ArrayPattern":ld=0;for(B=B.elements;ld<B.length;ld+=1){var ue=B[ld];ue&&this.checkLValInnerPattern(ue,Y,nb)}break;default:this.checkLValSimple(B,Y,nb)}};xa.checkLValInnerPattern=function(B,Y,nb){void 0===Y&&(Y=0);switch(B.type){case "Property":this.checkLValInnerPattern(B.value,
Y,nb);break;case "AssignmentPattern":this.checkLValPattern(B.left,Y,nb);break;case "RestElement":this.checkLValPattern(B.argument,Y,nb);break;default:this.checkLValPattern(B,Y,nb)}};xa=function(B,Y,nb,ld,ue){this.token=B;this.isExpr=!!Y;this.preserveSpace=!!nb;this.override=ld;this.generator=!!ue};var Sh={b_stat:new xa("{",!1),b_expr:new xa("{",!0),b_tmpl:new xa("${",!1),p_stat:new xa("(",!1),p_expr:new xa("(",!0),q_tmpl:new xa("`",!0,!0,function(B){return B.tryReadTemplateToken()}),f_stat:new xa("function",
!1),f_expr:new xa("function",!0),f_expr_gen:new xa("function",!0,!1,null,!0),f_gen:new xa("function",!1,!1,null,!0)};La=fd.prototype;La.initialContext=function(){return[Sh.b_stat]};La.curContext=function(){return this.context[this.context.length-1]};La.braceIsBlock=function(B){var Y=this.curContext();return Y===Sh.f_expr||Y===Sh.f_stat?!0:B!==na.colon||Y!==Sh.b_stat&&Y!==Sh.b_expr?B===na._return||B===na.name&&this.exprAllowed?Va.test(this.input.slice(this.lastTokEnd,this.start)):B===na._else||B===
na.semi||B===na.eof||B===na.parenR||B===na.arrow?!0:B===na.braceL?Y===Sh.b_stat:B===na._var||B===na._const||B===na.name?!1:!this.exprAllowed:!Y.isExpr};La.inGeneratorContext=function(){for(var B=this.context.length-1;1<=B;B--){var Y=this.context[B];if("function"===Y.token)return Y.generator}return!1};La.updateContext=function(B){var Y,nb=this.type;nb.keyword&&B===na.dot?this.exprAllowed=!1:(Y=nb.updateContext)?Y.call(this,B):this.exprAllowed=nb.beforeExpr};La.overrideContext=function(B){this.curContext()!==
B&&(this.context[this.context.length-1]=B)};na.parenR.updateContext=na.braceR.updateContext=function(){if(1===this.context.length)this.exprAllowed=!0;else{var B=this.context.pop();B===Sh.b_stat&&"function"===this.curContext().token&&(B=this.context.pop());this.exprAllowed=!B.isExpr}};na.braceL.updateContext=function(B){this.context.push(this.braceIsBlock(B)?Sh.b_stat:Sh.b_expr);this.exprAllowed=!0};na.dollarBraceL.updateContext=function(){this.context.push(Sh.b_tmpl);this.exprAllowed=!0};na.parenL.updateContext=
function(B){this.context.push(B===na._if||B===na._for||B===na._with||B===na._while?Sh.p_stat:Sh.p_expr);this.exprAllowed=!0};na.incDec.updateContext=function(){};na._function.updateContext=na._class.updateContext=function(B){!B.beforeExpr||B===na._else||B===na.semi&&this.curContext()!==Sh.p_stat||B===na._return&&Va.test(this.input.slice(this.lastTokEnd,this.start))||(B===na.colon||B===na.braceL)&&this.curContext()===Sh.b_stat?this.context.push(Sh.f_stat):this.context.push(Sh.f_expr);this.exprAllowed=
!1};na.backQuote.updateContext=function(){this.curContext()===Sh.q_tmpl?this.context.pop():this.context.push(Sh.q_tmpl);this.exprAllowed=!1};na.star.updateContext=function(B){B===na._function&&(B=this.context.length-1,this.context[B]=this.context[B]===Sh.f_expr?Sh.f_expr_gen:Sh.f_gen);this.exprAllowed=!0};na.name.updateContext=function(B){var Y=!1;6<=this.options.ecmaVersion&&B!==na.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(Y=!0);this.exprAllowed=
Y};La=fd.prototype;La.checkPropClash=function(B,Y,nb){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===B.type||6<=this.options.ecmaVersion&&(B.computed||B.method||B.shorthand))){var ld=B.key;switch(ld.type){case "Identifier":var ue=ld.name;break;case "Literal":ue=String(ld.value);break;default:return}B=B.kind;6<=this.options.ecmaVersion?"__proto__"===ue&&"init"===B&&(Y.proto&&(nb?0>nb.doubleProto&&(nb.doubleProto=ld.start):this.raiseRecoverable(ld.start,"Redefinition of __proto__ property")),Y.proto=
!0):(ue="$"+ue,(nb=Y[ue])?("init"===B?this.strict&&nb.init||nb.get||nb.set:nb.init||nb[B])&&this.raiseRecoverable(ld.start,"Redefinition of property"):nb=Y[ue]={init:!1,get:!1,set:!1},nb[B]=!0)}};La.parseExpression=function(B,Y){var nb=this.start,ld=this.startLoc,ue=this.parseMaybeAssign(B,Y);if(this.type===na.comma){nb=this.startNodeAt(nb,ld);for(nb.expressions=[ue];this.eat(na.comma);)nb.expressions.push(this.parseMaybeAssign(B,Y));return this.finishNode(nb,"SequenceExpression")}return ue};La.parseMaybeAssign=
function(B,Y,nb){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(B);this.exprAllowed=!1}var ld=!1,ue=-1,pg=-1;Y?(ue=Y.parenthesizedAssign,pg=Y.trailingComma,Y.parenthesizedAssign=Y.trailingComma=-1):(Y=new r,ld=!0);var Kg=this.start,uh=this.startLoc;if(this.type===na.parenL||this.type===na.name)this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===B;var fj=this.parseMaybeConditional(B,Y);nb&&(fj=nb.call(this,fj,Kg,uh));if(this.type.isAssign)return nb=this.startNodeAt(Kg,
uh),nb.operator=this.value,this.type===na.eq&&(fj=this.toAssignable(fj,!1,Y)),ld||(Y.parenthesizedAssign=Y.trailingComma=Y.doubleProto=-1),Y.shorthandAssign>=fj.start&&(Y.shorthandAssign=-1),this.type===na.eq?this.checkLValPattern(fj):this.checkLValSimple(fj),nb.left=fj,this.next(),nb.right=this.parseMaybeAssign(B),this.finishNode(nb,"AssignmentExpression");ld&&this.checkExpressionErrors(Y,!0);-1<ue&&(Y.parenthesizedAssign=ue);-1<pg&&(Y.trailingComma=pg);return fj};La.parseMaybeConditional=function(B,
Y){var nb=this.start,ld=this.startLoc,ue=this.parseExprOps(B,Y);return this.checkExpressionErrors(Y)?ue:this.eat(na.question)?(Y=this.startNodeAt(nb,ld),Y.test=ue,Y.consequent=this.parseMaybeAssign(),this.expect(na.colon),Y.alternate=this.parseMaybeAssign(B),this.finishNode(Y,"ConditionalExpression")):ue};La.parseExprOps=function(B,Y){var nb=this.start,ld=this.startLoc,ue=this.parseMaybeUnary(Y,!1,!1,B);return this.checkExpressionErrors(Y)?ue:ue.start===nb&&"ArrowFunctionExpression"===ue.type?ue:
this.parseExprOp(ue,nb,ld,-1,B)};La.parseExprOp=function(B,Y,nb,ld,ue){var pg=this.type.binop;if(null!=pg&&(!ue||this.type!==na._in)&&pg>ld){var Kg=this.type===na.logicalOR||this.type===na.logicalAND,uh=this.type===na.coalesce;uh&&(pg=na.logicalAND.binop);var fj=this.value;this.next();var Mj=this.start,Ck=this.startLoc;pg=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,ue),Mj,Ck,pg,ue);B=this.buildBinary(Y,nb,B,pg,fj,Kg||uh);(Kg&&this.type===na.coalesce||uh&&(this.type===na.logicalOR||this.type===
na.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(B,Y,nb,ld,ue)}return B};La.buildBinary=function(B,Y,nb,ld,ue,pg){B=this.startNodeAt(B,Y);B.left=nb;B.operator=ue;B.right=ld;return this.finishNode(B,pg?"LogicalExpression":"BinaryExpression")};La.parseMaybeUnary=function(B,Y,nb,ld){var ue=this.start,pg=this.startLoc;if(this.isContextual("await")&&this.canAwait){var Kg=this.parseAwait(ld);
Y=!0}else if(this.type.prefix){Kg=this.startNode();var uh=this.type===na.incDec;Kg.operator=this.value;Kg.prefix=!0;this.next();Kg.argument=this.parseMaybeUnary(null,!0,uh,ld);this.checkExpressionErrors(B,!0);uh?this.checkLValSimple(Kg.argument):this.strict&&"delete"===Kg.operator&&"Identifier"===Kg.argument.type?this.raiseRecoverable(Kg.start,"Deleting local variable in strict mode"):"delete"===Kg.operator&&x(Kg.argument)?this.raiseRecoverable(Kg.start,"Private fields can not be deleted"):Y=!0;Kg=
this.finishNode(Kg,uh?"UpdateExpression":"UnaryExpression")}else{Kg=this.parseExprSubscripts(B,ld);if(this.checkExpressionErrors(B))return Kg;for(;this.type.postfix&&!this.canInsertSemicolon();)B=this.startNodeAt(ue,pg),B.operator=this.value,B.prefix=!1,B.argument=Kg,this.checkLValSimple(Kg),this.next(),Kg=this.finishNode(B,"UpdateExpression")}if(!nb&&this.eat(na.starstar))if(Y)this.unexpected(this.lastTokStart);else return this.buildBinary(ue,pg,Kg,this.parseMaybeUnary(null,!1,!1,ld),"**",!1);else return Kg};
La.parseExprSubscripts=function(B,Y){var nb=this.start,ld=this.startLoc,ue=this.parseExprAtom(B,Y);if("ArrowFunctionExpression"===ue.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return ue;Y=this.parseSubscripts(ue,nb,ld,!1,Y);B&&"MemberExpression"===Y.type&&(B.parenthesizedAssign>=Y.start&&(B.parenthesizedAssign=-1),B.parenthesizedBind>=Y.start&&(B.parenthesizedBind=-1),B.trailingComma>=Y.start&&(B.trailingComma=-1));return Y};La.parseSubscripts=function(B,Y,nb,ld,ue){for(var pg=
8<=this.options.ecmaVersion&&"Identifier"===B.type&&"async"===B.name&&this.lastTokEnd===B.end&&!this.canInsertSemicolon()&&5===B.end-B.start&&this.potentialArrowAt===B.start,Kg=!1;;){var uh=this.parseSubscript(B,Y,nb,ld,pg,Kg,ue);uh.optional&&(Kg=!0);if(uh===B||"ArrowFunctionExpression"===uh.type)return Kg&&(B=this.startNodeAt(Y,nb),B.expression=uh,uh=this.finishNode(B,"ChainExpression")),uh;B=uh}};La.parseSubscript=function(B,Y,nb,ld,ue,pg,Kg){var uh=11<=this.options.ecmaVersion,fj=uh&&this.eat(na.questionDot);
ld&&fj&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Mj=this.eat(na.bracketL);if(Mj||fj&&this.type!==na.parenL&&this.type!==na.backQuote||this.eat(na.dot))Y=this.startNodeAt(Y,nb),Y.object=B,Mj?(Y.property=this.parseExpression(),this.expect(na.bracketR)):Y.property=this.type===na.privateId&&"Super"!==B.type?this.parsePrivateIdent():this.parseIdent("never"!==this.options.allowReserved),Y.computed=!!Mj,uh&&(Y.optional=fj),B=this.finishNode(Y,"MemberExpression");
else if(!ld&&this.eat(na.parenL)){ld=new r;pg=this.yieldPos;var Ck=this.awaitPos,un=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;Mj=this.parseExprList(na.parenR,8<=this.options.ecmaVersion,!1,ld);if(ue&&!fj&&!this.canInsertSemicolon()&&this.eat(na.arrow))return this.checkPatternErrors(ld,!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=pg,this.awaitPos=Ck,
this.awaitIdentPos=un,this.parseArrowExpression(this.startNodeAt(Y,nb),Mj,!0,Kg);this.checkExpressionErrors(ld,!0);this.yieldPos=pg||this.yieldPos;this.awaitPos=Ck||this.awaitPos;this.awaitIdentPos=un||this.awaitIdentPos;Y=this.startNodeAt(Y,nb);Y.callee=B;Y.arguments=Mj;uh&&(Y.optional=fj);B=this.finishNode(Y,"CallExpression")}else this.type===na.backQuote&&((fj||pg)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),uh=this.startNodeAt(Y,nb),uh.tag=
B,uh.quasi=this.parseTemplate({isTagged:!0}),B=this.finishNode(uh,"TaggedTemplateExpression"));return B};La.parseExprAtom=function(B,Y){this.type===na.slash&&this.readRegexp();var nb=this.potentialArrowAt===this.start;switch(this.type){case na._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),Y=this.startNode(),this.next(),this.type!==na.parenL||this.allowDirectSuper||this.raise(Y.start,"super() call outside constructor of a subclass"),this.type!==na.dot&&this.type!==
na.bracketL&&this.type!==na.parenL&&this.unexpected(),this.finishNode(Y,"Super");case na._this:return Y=this.startNode(),this.next(),this.finishNode(Y,"ThisExpression");case na.name:B=this.start;var ld=this.startLoc,ue=this.containsEsc,pg=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!ue&&"async"===pg.name&&!this.canInsertSemicolon()&&this.eat(na._function))return this.overrideContext(Sh.f_expr),this.parseFunction(this.startNodeAt(B,ld),0,!1,!0,Y);if(nb&&!this.canInsertSemicolon()){if(this.eat(na.arrow))return this.parseArrowExpression(this.startNodeAt(B,
ld),[pg],!1,Y);if(8<=this.options.ecmaVersion&&"async"===pg.name&&this.type===na.name&&!ue&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return pg=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(na.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(B,ld),[pg],!0,Y)}return pg;case na.regexp:return nb=this.value,Y=this.parseLiteral(nb.value),Y.regex={pattern:nb.pattern,flags:nb.flags},Y;case na.num:case na.string:return this.parseLiteral(this.value);
case na._null:case na._true:case na._false:return Y=this.startNode(),Y.value=this.type===na._null?null:this.type===na._true,Y.raw=this.type.keyword,this.next(),this.finishNode(Y,"Literal");case na.parenL:return ld=this.start,Y=this.parseParenAndDistinguishExpression(nb,Y),B&&(0>B.parenthesizedAssign&&!this.isSimpleAssignTarget(Y)&&(B.parenthesizedAssign=ld),0>B.parenthesizedBind&&(B.parenthesizedBind=ld)),Y;case na.bracketL:return Y=this.startNode(),this.next(),Y.elements=this.parseExprList(na.bracketR,
!0,!0,B),this.finishNode(Y,"ArrayExpression");case na.braceL:return this.overrideContext(Sh.b_expr),this.parseObj(!1,B);case na._function:return Y=this.startNode(),this.next(),this.parseFunction(Y,0);case na._class:return this.parseClass(this.startNode(),!1);case na._new:return this.parseNew();case na.backQuote:return this.parseTemplate();case na._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};La.parseExprImport=function(){var B=this.startNode();
this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var Y=this.parseIdent(!0);switch(this.type){case na.parenL:return this.parseDynamicImport(B);case na.dot:return B.meta=Y,this.parseImportMeta(B);default:this.unexpected()}};La.parseDynamicImport=function(B){this.next();B.source=this.parseMaybeAssign();if(!this.eat(na.parenR)){var Y=this.start;this.eat(na.comma)&&this.eat(na.parenR)?this.raiseRecoverable(Y,"Trailing comma is not allowed in import()"):this.unexpected(Y)}return this.finishNode(B,
"ImportExpression")};La.parseImportMeta=function(B){this.next();var Y=this.containsEsc;B.property=this.parseIdent(!0);"meta"!==B.property.name&&this.raiseRecoverable(B.property.start,"The only valid meta property for import is 'import.meta'");Y&&this.raiseRecoverable(B.start,"'import.meta' must not contain escaped characters");"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(B.start,"Cannot use 'import.meta' outside a module");return this.finishNode(B,
"MetaProperty")};La.parseLiteral=function(B){var Y=this.startNode();Y.value=B;Y.raw=this.input.slice(this.start,this.end);110===Y.raw.charCodeAt(Y.raw.length-1)&&(Y.bigint=Y.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(Y,"Literal")};La.parseParenExpression=function(){this.expect(na.parenL);var B=this.parseExpression();this.expect(na.parenR);return B};La.parseParenAndDistinguishExpression=function(B,Y){var nb=this.start,ld=this.startLoc,ue=8<=this.options.ecmaVersion;if(6<=
this.options.ecmaVersion){this.next();var pg=this.start,Kg=this.startLoc,uh=[],fj=!0,Mj=!1,Ck=new r,un=this.yieldPos,Io=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==na.parenR;)if(fj?fj=!1:this.expect(na.comma),ue&&this.afterTrailingComma(na.parenR,!0)){Mj=!0;break}else if(this.type===na.ellipsis){var qq=this.start;uh.push(this.parseParenItem(this.parseRestBinding()));this.type===na.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else uh.push(this.parseMaybeAssign(!1,
Ck,this.parseParenItem));ue=this.lastTokEnd;fj=this.lastTokEndLoc;this.expect(na.parenR);if(B&&!this.canInsertSemicolon()&&this.eat(na.arrow))return this.checkPatternErrors(Ck,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=un,this.awaitPos=Io,this.parseParenArrowList(nb,ld,uh,Y);uh.length&&!Mj||this.unexpected(this.lastTokStart);qq&&this.unexpected(qq);this.checkExpressionErrors(Ck,!0);this.yieldPos=un||this.yieldPos;this.awaitPos=Io||this.awaitPos;1<uh.length?(B=this.startNodeAt(pg,Kg),
B.expressions=uh,this.finishNodeAt(B,"SequenceExpression",ue,fj)):B=uh[0]}else B=this.parseParenExpression();return this.options.preserveParens?(nb=this.startNodeAt(nb,ld),nb.expression=B,this.finishNode(nb,"ParenthesizedExpression")):B};La.parseParenItem=function(B){return B};La.parseParenArrowList=function(B,Y,nb,ld){return this.parseArrowExpression(this.startNodeAt(B,Y),nb,ld)};var Hi=[];La.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");
var B=this.startNode(),Y=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(na.dot))return B.meta=Y,Y=this.containsEsc,B.property=this.parseIdent(!0),"target"!==B.property.name&&this.raiseRecoverable(B.property.start,"The only valid meta property for new is 'new.target'"),Y&&this.raiseRecoverable(B.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(B.start,"'new.target' can only be used in functions and class static block"),this.finishNode(B,
"MetaProperty");Y=this.start;var nb=this.startLoc,ld=this.type===na._import;B.callee=this.parseSubscripts(this.parseExprAtom(),Y,nb,!0,!1);ld&&"ImportExpression"===B.callee.type&&this.raise(Y,"Cannot use new with import()");this.eat(na.parenL)?B.arguments=this.parseExprList(na.parenR,8<=this.options.ecmaVersion,!1):B.arguments=Hi;return this.finishNode(B,"NewExpression")};La.parseTemplateElement=function(B){B=B.isTagged;var Y=this.startNode();this.type===na.invalidTemplate?(B||this.raiseRecoverable(this.start,
"Bad escape sequence in untagged template literal"),Y.value={raw:this.value,cooked:null}):Y.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value};this.next();Y.tail=this.type===na.backQuote;return this.finishNode(Y,"TemplateElement")};La.parseTemplate=function(B){void 0===B&&(B={});B=B.isTagged;void 0===B&&(B=!1);var Y=this.startNode();this.next();Y.expressions=[];var nb=this.parseTemplateElement({isTagged:B});for(Y.quasis=[nb];!nb.tail;)this.type===na.eof&&this.raise(this.pos,
"Unterminated template literal"),this.expect(na.dollarBraceL),Y.expressions.push(this.parseExpression()),this.expect(na.braceR),Y.quasis.push(nb=this.parseTemplateElement({isTagged:B}));this.next();return this.finishNode(Y,"TemplateLiteral")};La.isAsyncProp=function(B){return!B.computed&&"Identifier"===B.key.type&&"async"===B.key.name&&(this.type===na.name||this.type===na.num||this.type===na.string||this.type===na.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===na.star)&&!Va.test(this.input.slice(this.lastTokEnd,
this.start))};La.parseObj=function(B,Y){var nb=this.startNode(),ld=!0,ue={};nb.properties=[];for(this.next();!this.eat(na.braceR);){if(ld)ld=!1;else if(this.expect(na.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(na.braceR))break;var pg=this.parseProperty(B,Y);B||this.checkPropClash(pg,ue,Y);nb.properties.push(pg)}return this.finishNode(nb,B?"ObjectPattern":"ObjectExpression")};La.parseProperty=function(B,Y){var nb=this.startNode(),ld;if(9<=this.options.ecmaVersion&&this.eat(na.ellipsis)){if(B)return nb.argument=
this.parseIdent(!1),this.type===na.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(nb,"RestElement");this.type===na.parenL&&Y&&(0>Y.parenthesizedAssign&&(Y.parenthesizedAssign=this.start),0>Y.parenthesizedBind&&(Y.parenthesizedBind=this.start));nb.argument=this.parseMaybeAssign(!1,Y);this.type===na.comma&&Y&&0>Y.trailingComma&&(Y.trailingComma=this.start);return this.finishNode(nb,"SpreadElement")}if(6<=this.options.ecmaVersion){nb.method=!1;nb.shorthand=
!1;if(B||Y){var ue=this.start;var pg=this.startLoc}B||(ld=this.eat(na.star))}var Kg=this.containsEsc;this.parsePropertyName(nb);if(!B&&!Kg&&8<=this.options.ecmaVersion&&!ld&&this.isAsyncProp(nb)){var uh=!0;ld=9<=this.options.ecmaVersion&&this.eat(na.star);this.parsePropertyName(nb,Y)}else uh=!1;this.parsePropertyValue(nb,B,ld,uh,ue,pg,Y,Kg);return this.finishNode(nb,"Property")};La.parsePropertyValue=function(B,Y,nb,ld,ue,pg,Kg,uh){(nb||ld)&&this.type===na.colon&&this.unexpected();this.eat(na.colon)?
(B.value=Y?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Kg),B.kind="init"):6<=this.options.ecmaVersion&&this.type===na.parenL?(Y&&this.unexpected(),B.kind="init",B.method=!0,B.value=this.parseMethod(nb,ld)):Y||uh||!(5<=this.options.ecmaVersion)||B.computed||"Identifier"!==B.key.type||"get"!==B.key.name&&"set"!==B.key.name||this.type===na.comma||this.type===na.braceR||this.type===na.eq?6<=this.options.ecmaVersion&&!B.computed&&"Identifier"===B.key.type?((nb||ld)&&this.unexpected(),
this.checkUnreserved(B.key),"await"!==B.key.name||this.awaitIdentPos||(this.awaitIdentPos=ue),B.kind="init",Y?B.value=this.parseMaybeDefault(ue,pg,this.copyNode(B.key)):this.type===na.eq&&Kg?(0>Kg.shorthandAssign&&(Kg.shorthandAssign=this.start),B.value=this.parseMaybeDefault(ue,pg,this.copyNode(B.key))):B.value=this.copyNode(B.key),B.shorthand=!0):this.unexpected():((nb||ld)&&this.unexpected(),B.kind=B.key.name,this.parsePropertyName(B),B.value=this.parseMethod(!1),B.value.params.length!==("get"===
B.kind?0:1)?(Y=B.value.start,"get"===B.kind?this.raiseRecoverable(Y,"getter should have no params"):this.raiseRecoverable(Y,"setter should have exactly one param")):"set"===B.kind&&"RestElement"===B.value.params[0].type&&this.raiseRecoverable(B.value.params[0].start,"Setter cannot use rest params"))};La.parsePropertyName=function(B){if(6<=this.options.ecmaVersion){if(this.eat(na.bracketL))return B.computed=!0,B.key=this.parseMaybeAssign(),this.expect(na.bracketR),B.key;B.computed=!1}return B.key=
this.type===na.num||this.type===na.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};La.initFunction=function(B){B.id=null;6<=this.options.ecmaVersion&&(B.generator=B.expression=!1);8<=this.options.ecmaVersion&&(B.async=!1)};La.parseMethod=function(B,Y,nb){var ld=this.startNode(),ue=this.yieldPos,pg=this.awaitPos,Kg=this.awaitIdentPos;this.initFunction(ld);6<=this.options.ecmaVersion&&(ld.generator=B);8<=this.options.ecmaVersion&&(ld.async=!!Y);this.awaitIdentPos=
this.awaitPos=this.yieldPos=0;this.enterScope(2|(Y?4:0)|(ld.generator?8:0)|64|(nb?128:0));this.expect(na.parenL);ld.params=this.parseBindingList(na.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();this.parseFunctionBody(ld,!1,!0,!1);this.yieldPos=ue;this.awaitPos=pg;this.awaitIdentPos=Kg;return this.finishNode(ld,"FunctionExpression")};La.parseArrowExpression=function(B,Y,nb,ld){var ue=this.yieldPos,pg=this.awaitPos,Kg=this.awaitIdentPos;this.enterScope((nb?4:0)|18);this.initFunction(B);
8<=this.options.ecmaVersion&&(B.async=!!nb);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;B.params=this.toAssignableList(Y,!0);this.parseFunctionBody(B,!0,!1,ld);this.yieldPos=ue;this.awaitPos=pg;this.awaitIdentPos=Kg;return this.finishNode(B,"ArrowFunctionExpression")};La.parseFunctionBody=function(B,Y,nb,ld){var ue=this.strict,pg=!1;Y&&this.type!==na.braceL?(B.body=this.parseMaybeAssign(ld),B.expression=!0,this.checkParams(B,!1)):(ld=7<=this.options.ecmaVersion&&!this.isSimpleParamList(B.params),
(!ue||ld)&&(pg=this.strictDirective(this.end))&&ld&&this.raiseRecoverable(B.start,"Illegal 'use strict' directive in function with non-simple parameter list"),ld=this.labels,this.labels=[],pg&&(this.strict=!0),this.checkParams(B,!ue&&!pg&&!Y&&!nb&&this.isSimpleParamList(B.params)),this.strict&&B.id&&this.checkLValSimple(B.id,5),B.body=this.parseBlock(!1,void 0,pg&&!ue),B.expression=!1,this.adaptDirectivePrologue(B.body.body),this.labels=ld);this.exitScope()};La.isSimpleParamList=function(B){for(var Y=
0;Y<B.length;Y+=1)if("Identifier"!==B[Y].type)return!1;return!0};La.checkParams=function(B,Y){var nb=Object.create(null),ld=0;for(B=B.params;ld<B.length;ld+=1)this.checkLValInnerPattern(B[ld],1,Y?null:nb)};La.parseExprList=function(B,Y,nb,ld){for(var ue=[],pg=!0;!this.eat(B);){if(pg)pg=!1;else if(this.expect(na.comma),Y&&this.afterTrailingComma(B))break;if(nb&&this.type===na.comma)var Kg=null;else this.type===na.ellipsis?(Kg=this.parseSpread(ld),ld&&this.type===na.comma&&0>ld.trailingComma&&(ld.trailingComma=
this.start)):Kg=this.parseMaybeAssign(!1,ld);ue.push(Kg)}return ue};La.checkUnreserved=function(B){var Y=B.start,nb=B.end;B=B.name;this.inGenerator&&"yield"===B&&this.raiseRecoverable(Y,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===B&&this.raiseRecoverable(Y,"Cannot use 'await' as identifier inside an async function");this.currentThisScope().inClassFieldInit&&"arguments"===B&&this.raiseRecoverable(Y,"Cannot use 'arguments' in class field initializer");!this.inClassStaticBlock||
"arguments"!==B&&"await"!==B||this.raise(Y,"Cannot use "+B+" in class static initialization block");this.keywords.test(B)&&this.raise(Y,"Unexpected keyword '"+B+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(Y,nb).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(B)||(this.inAsync||"await"!==B||this.raiseRecoverable(Y,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(Y,"The keyword '"+B+"' is reserved"))};La.parseIdent=function(B,Y){Y=
this.startNode();this.type===na.name?Y.name=this.value:this.type.keyword?(Y.name=this.type.keyword,"class"!==Y.name&&"function"!==Y.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!B);this.finishNode(Y,"Identifier");B||(this.checkUnreserved(Y),"await"!==Y.name||this.awaitIdentPos||(this.awaitIdentPos=Y.start));return Y};La.parsePrivateIdent=function(){var B=this.startNode();this.type===na.privateId?B.name=
this.value:this.unexpected();this.next();this.finishNode(B,"PrivateIdentifier");0===this.privateNameStack.length?this.raise(B.start,"Private field '#"+B.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(B);return B};La.parseYield=function(B){this.yieldPos||(this.yieldPos=this.start);var Y=this.startNode();this.next();this.type===na.semi||this.canInsertSemicolon()||this.type!==na.star&&!this.type.startsExpr?(Y.delegate=!1,Y.argument=null):
(Y.delegate=this.eat(na.star),Y.argument=this.parseMaybeAssign(B));return this.finishNode(Y,"YieldExpression")};La.parseAwait=function(B){this.awaitPos||(this.awaitPos=this.start);var Y=this.startNode();this.next();Y.argument=this.parseMaybeUnary(null,!0,!1,B);return this.finishNode(Y,"AwaitExpression")};La=fd.prototype;La.raise=function(B,Y){var nb=n(this.input,B);Y+=" ("+nb.line+":"+nb.column+")";Y=new SyntaxError(Y);Y.pos=B;Y.loc=nb;Y.raisedAt=this.pos;throw Y;};La.raiseRecoverable=La.raise;La.curPosition=
function(){if(this.options.locations)return new Kb(this.curLine,this.pos-this.lineStart)};La=fd.prototype;var Fj=function(B){this.flags=B;this["var"]=[];this.lexical=[];this.functions=[];this.inClassFieldInit=!1};La.enterScope=function(B){this.scopeStack.push(new Fj(B))};La.exitScope=function(){this.scopeStack.pop()};La.treatFunctionsAsVarInScope=function(B){return B.flags&2||!this.inModule&&B.flags&1};La.declareName=function(B,Y,nb){var ld=!1;if(2===Y)Y=this.currentScope(),ld=-1<Y.lexical.indexOf(B)||
-1<Y.functions.indexOf(B)||-1<Y["var"].indexOf(B),Y.lexical.push(B),this.inModule&&Y.flags&1&&delete this.undefinedExports[B];else if(4===Y)this.currentScope().lexical.push(B);else if(3===Y)Y=this.currentScope(),ld=this.treatFunctionsAsVar?-1<Y.lexical.indexOf(B):-1<Y.lexical.indexOf(B)||-1<Y["var"].indexOf(B),Y.functions.push(B);else for(Y=this.scopeStack.length-1;0<=Y;--Y){var ue=this.scopeStack[Y];if(-1<ue.lexical.indexOf(B)&&!(ue.flags&32&&ue.lexical[0]===B)||!this.treatFunctionsAsVarInScope(ue)&&
-1<ue.functions.indexOf(B)){ld=!0;break}ue["var"].push(B);this.inModule&&ue.flags&1&&delete this.undefinedExports[B];if(ue.flags&259)break}ld&&this.raiseRecoverable(nb,"Identifier '"+B+"' has already been declared")};La.checkLocalExport=function(B){-1===this.scopeStack[0].lexical.indexOf(B.name)&&-1===this.scopeStack[0]["var"].indexOf(B.name)&&(this.undefinedExports[B.name]=B)};La.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};La.currentVarScope=function(){for(var B=this.scopeStack.length-
1;;B--){var Y=this.scopeStack[B];if(Y.flags&259)return Y}};La.currentThisScope=function(){for(var B=this.scopeStack.length-1;;B--){var Y=this.scopeStack[B];if(Y.flags&259&&!(Y.flags&16))return Y}};var vk=function(B,Y,nb){this.type="";this.start=Y;this.end=0;B.options.locations&&(this.loc=new V(B,nb));B.options.directSourceFile&&(this.sourceFile=B.options.directSourceFile);B.options.ranges&&(this.range=[Y,0])};La=fd.prototype;La.startNode=function(){return new vk(this,this.start,this.startLoc)};La.startNodeAt=
function(B,Y){return new vk(this,B,Y)};La.finishNode=function(B,Y){return y.call(this,B,Y,this.lastTokEnd,this.lastTokEndLoc)};La.finishNodeAt=function(B,Y,nb,ld){return y.call(this,B,Y,nb,ld)};La.copyNode=function(B){var Y=new vk(this,B.start,this.startLoc),nb;for(nb in B)Y[nb]=B[nb];return Y};var Hl={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
pl={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
pk={};D(9);D(10);D(11);D(12);La=fd.prototype;var Sk=function(B){this.parser=B;this.validFlags="gim"+(6<=B.options.ecmaVersion?"uy":"")+(9<=B.options.ecmaVersion?"s":"")+(13<=B.options.ecmaVersion?"d":"");this.unicodeProperties=pk[12<=B.options.ecmaVersion?12:B.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=
[];this.backReferenceNames=[]};Sk.prototype.reset=function(B,Y,nb){var ld=-1!==nb.indexOf("u");this.start=B|0;this.source=Y+"";this.flags=nb;this.switchU=ld&&6<=this.parser.options.ecmaVersion;this.switchN=ld&&9<=this.parser.options.ecmaVersion};Sk.prototype.raise=function(B){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+B)};Sk.prototype.at=function(B,Y){void 0===Y&&(Y=!1);var nb=this.source,ld=nb.length;if(B>=ld)return-1;var ue=nb.charCodeAt(B);if(!Y&&
!this.switchU||55295>=ue||57344<=ue||B+1>=ld)return ue;B=nb.charCodeAt(B+1);return 56320<=B&&57343>=B?(ue<<10)+B-56613888:ue};Sk.prototype.nextIndex=function(B,Y){void 0===Y&&(Y=!1);var nb=this.source,ld=nb.length;if(B>=ld)return ld;var ue=nb.charCodeAt(B),pg;return!Y&&!this.switchU||55295>=ue||57344<=ue||B+1>=ld||56320>(pg=nb.charCodeAt(B+1))||57343<pg?B+1:B+2};Sk.prototype.current=function(B){void 0===B&&(B=!1);return this.at(this.pos,B)};Sk.prototype.lookahead=function(B){void 0===B&&(B=!1);return this.at(this.nextIndex(this.pos,
B),B)};Sk.prototype.advance=function(B){void 0===B&&(B=!1);this.pos=this.nextIndex(this.pos,B)};Sk.prototype.eat=function(B,Y){void 0===Y&&(Y=!1);return this.current(Y)===B?(this.advance(Y),!0):!1};La.validateRegExpFlags=function(B){for(var Y=B.validFlags,nb=B.flags,ld=0;ld<nb.length;ld++){var ue=nb.charAt(ld);-1===Y.indexOf(ue)&&this.raise(B.start,"Invalid regular expression flag");-1<nb.indexOf(ue,ld+1)&&this.raise(B.start,"Duplicate regular expression flag")}};La.validateRegExpPattern=function(B){this.regexp_pattern(B);
!B.switchN&&9<=this.options.ecmaVersion&&0<B.groupNames.length&&(B.switchN=!0,this.regexp_pattern(B))};La.regexp_pattern=function(B){B.pos=0;B.lastIntValue=0;B.lastStringValue="";B.lastAssertionIsQuantifiable=!1;B.numCapturingParens=0;B.maxBackReference=0;B.groupNames.length=0;B.backReferenceNames.length=0;this.regexp_disjunction(B);B.pos!==B.source.length&&(B.eat(41)&&B.raise("Unmatched ')'"),(B.eat(93)||B.eat(125))&&B.raise("Lone quantifier brackets"));B.maxBackReference>B.numCapturingParens&&B.raise("Invalid escape");
for(var Y=0,nb=B.backReferenceNames;Y<nb.length;Y+=1)-1===B.groupNames.indexOf(nb[Y])&&B.raise("Invalid named capture referenced")};La.regexp_disjunction=function(B){for(this.regexp_alternative(B);B.eat(124);)this.regexp_alternative(B);this.regexp_eatQuantifier(B,!0)&&B.raise("Nothing to repeat");B.eat(123)&&B.raise("Lone quantifier brackets")};La.regexp_alternative=function(B){for(;B.pos<B.source.length&&this.regexp_eatTerm(B););};La.regexp_eatTerm=function(B){return this.regexp_eatAssertion(B)?
(B.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(B)&&B.switchU&&B.raise("Invalid quantifier"),!0):(B.switchU?this.regexp_eatAtom(B):this.regexp_eatExtendedAtom(B))?(this.regexp_eatQuantifier(B),!0):!1};La.regexp_eatAssertion=function(B){var Y=B.pos;B.lastAssertionIsQuantifiable=!1;if(B.eat(94)||B.eat(36))return!0;if(B.eat(92)){if(B.eat(66)||B.eat(98))return!0;B.pos=Y}if(B.eat(40)&&B.eat(63)){var nb=!1;9<=this.options.ecmaVersion&&(nb=B.eat(60));if(B.eat(61)||B.eat(33))return this.regexp_disjunction(B),
B.eat(41)||B.raise("Unterminated group"),B.lastAssertionIsQuantifiable=!nb,!0}B.pos=Y;return!1};La.regexp_eatQuantifier=function(B,Y){void 0===Y&&(Y=!1);return this.regexp_eatQuantifierPrefix(B,Y)?(B.eat(63),!0):!1};La.regexp_eatQuantifierPrefix=function(B,Y){return B.eat(42)||B.eat(43)||B.eat(63)||this.regexp_eatBracedQuantifier(B,Y)};La.regexp_eatBracedQuantifier=function(B,Y){var nb=B.pos;if(B.eat(123)){var ld=-1;if(this.regexp_eatDecimalDigits(B)){var ue=B.lastIntValue;B.eat(44)&&this.regexp_eatDecimalDigits(B)&&
(ld=B.lastIntValue);if(B.eat(125))return-1!==ld&&ld<ue&&!Y&&B.raise("numbers out of order in {} quantifier"),!0}B.switchU&&!Y&&B.raise("Incomplete quantifier");B.pos=nb}return!1};La.regexp_eatAtom=function(B){return this.regexp_eatPatternCharacters(B)||B.eat(46)||this.regexp_eatReverseSolidusAtomEscape(B)||this.regexp_eatCharacterClass(B)||this.regexp_eatUncapturingGroup(B)||this.regexp_eatCapturingGroup(B)};La.regexp_eatReverseSolidusAtomEscape=function(B){var Y=B.pos;if(B.eat(92)){if(this.regexp_eatAtomEscape(B))return!0;
B.pos=Y}return!1};La.regexp_eatUncapturingGroup=function(B){var Y=B.pos;if(B.eat(40)){if(B.eat(63)&&B.eat(58)){this.regexp_disjunction(B);if(B.eat(41))return!0;B.raise("Unterminated group")}B.pos=Y}return!1};La.regexp_eatCapturingGroup=function(B){if(B.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(B):63===B.current()&&B.raise("Invalid group");this.regexp_disjunction(B);if(B.eat(41))return B.numCapturingParens+=1,!0;B.raise("Unterminated group")}return!1};La.regexp_eatExtendedAtom=
function(B){return B.eat(46)||this.regexp_eatReverseSolidusAtomEscape(B)||this.regexp_eatCharacterClass(B)||this.regexp_eatUncapturingGroup(B)||this.regexp_eatCapturingGroup(B)||this.regexp_eatInvalidBracedQuantifier(B)||this.regexp_eatExtendedPatternCharacter(B)};La.regexp_eatInvalidBracedQuantifier=function(B){this.regexp_eatBracedQuantifier(B,!0)&&B.raise("Nothing to repeat");return!1};La.regexp_eatSyntaxCharacter=function(B){var Y=B.current();return I(Y)?(B.lastIntValue=Y,B.advance(),!0):!1};
La.regexp_eatPatternCharacters=function(B){for(var Y=B.pos,nb=0;-1!==(nb=B.current())&&!I(nb);)B.advance();return B.pos!==Y};La.regexp_eatExtendedPatternCharacter=function(B){var Y=B.current();return-1===Y||36===Y||40<=Y&&43>=Y||46===Y||63===Y||91===Y||94===Y||124===Y?!1:(B.advance(),!0)};La.regexp_groupSpecifier=function(B){B.eat(63)&&(this.regexp_eatGroupName(B)?(-1!==B.groupNames.indexOf(B.lastStringValue)&&B.raise("Duplicate capture group name"),B.groupNames.push(B.lastStringValue)):B.raise("Invalid group"))};
La.regexp_eatGroupName=function(B){B.lastStringValue="";if(B.eat(60)){if(this.regexp_eatRegExpIdentifierName(B)&&B.eat(62))return!0;B.raise("Invalid capture group name")}return!1};La.regexp_eatRegExpIdentifierName=function(B){B.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(B)){for(B.lastStringValue+=H(B.lastIntValue);this.regexp_eatRegExpIdentifierPart(B);)B.lastStringValue+=H(B.lastIntValue);return!0}return!1};La.regexp_eatRegExpIdentifierStart=function(B){var Y=B.pos,nb=11<=this.options.ecmaVersion,
ld=B.current(nb);B.advance(nb);92===ld&&this.regexp_eatRegExpUnicodeEscapeSequence(B,nb)&&(ld=B.lastIntValue);nb=ld;if(c(nb,!0)||36===nb||95===nb)return B.lastIntValue=ld,!0;B.pos=Y;return!1};La.regexp_eatRegExpIdentifierPart=function(B){var Y=B.pos,nb=11<=this.options.ecmaVersion,ld=B.current(nb);B.advance(nb);92===ld&&this.regexp_eatRegExpUnicodeEscapeSequence(B,nb)&&(ld=B.lastIntValue);nb=ld;if(g(nb,!0)||36===nb||95===nb||8204===nb||8205===nb)return B.lastIntValue=ld,!0;B.pos=Y;return!1};La.regexp_eatAtomEscape=
function(B){if(this.regexp_eatBackReference(B)||this.regexp_eatCharacterClassEscape(B)||this.regexp_eatCharacterEscape(B)||B.switchN&&this.regexp_eatKGroupName(B))return!0;B.switchU&&(99===B.current()&&B.raise("Invalid unicode escape"),B.raise("Invalid escape"));return!1};La.regexp_eatBackReference=function(B){var Y=B.pos;if(this.regexp_eatDecimalEscape(B)){var nb=B.lastIntValue;if(B.switchU)return nb>B.maxBackReference&&(B.maxBackReference=nb),!0;if(nb<=B.numCapturingParens)return!0;B.pos=Y}return!1};
La.regexp_eatKGroupName=function(B){if(B.eat(107)){if(this.regexp_eatGroupName(B))return B.backReferenceNames.push(B.lastStringValue),!0;B.raise("Invalid named reference")}return!1};La.regexp_eatCharacterEscape=function(B){return this.regexp_eatControlEscape(B)||this.regexp_eatCControlLetter(B)||this.regexp_eatZero(B)||this.regexp_eatHexEscapeSequence(B)||this.regexp_eatRegExpUnicodeEscapeSequence(B,!1)||!B.switchU&&this.regexp_eatLegacyOctalEscapeSequence(B)||this.regexp_eatIdentityEscape(B)};La.regexp_eatCControlLetter=
function(B){var Y=B.pos;if(B.eat(99)){if(this.regexp_eatControlLetter(B))return!0;B.pos=Y}return!1};La.regexp_eatZero=function(B){return 48!==B.current()||sa(B.lookahead())?!1:(B.lastIntValue=0,B.advance(),!0)};La.regexp_eatControlEscape=function(B){var Y=B.current();return 116===Y?(B.lastIntValue=9,B.advance(),!0):110===Y?(B.lastIntValue=10,B.advance(),!0):118===Y?(B.lastIntValue=11,B.advance(),!0):102===Y?(B.lastIntValue=12,B.advance(),!0):114===Y?(B.lastIntValue=13,B.advance(),!0):!1};La.regexp_eatControlLetter=
function(B){var Y=B.current();return 65<=Y&&90>=Y||97<=Y&&122>=Y?(B.lastIntValue=Y%32,B.advance(),!0):!1};La.regexp_eatRegExpUnicodeEscapeSequence=function(B,Y){void 0===Y&&(Y=!1);var nb=B.pos;Y=Y||B.switchU;if(B.eat(117)){if(this.regexp_eatFixedHexDigits(B,4)){nb=B.lastIntValue;if(Y&&55296<=nb&&56319>=nb){Y=B.pos;if(B.eat(92)&&B.eat(117)&&this.regexp_eatFixedHexDigits(B,4)){var ld=B.lastIntValue;if(56320<=ld&&57343>=ld)return B.lastIntValue=1024*(nb-55296)+(ld-56320)+65536,!0}B.pos=Y;B.lastIntValue=
nb}return!0}if(ld=Y&&B.eat(123)&&this.regexp_eatHexDigits(B)&&B.eat(125))ld=B.lastIntValue,ld=0<=ld&&1114111>=ld;if(ld)return!0;Y&&B.raise("Invalid unicode escape");B.pos=nb}return!1};La.regexp_eatIdentityEscape=function(B){if(B.switchU)return this.regexp_eatSyntaxCharacter(B)?!0:B.eat(47)?(B.lastIntValue=47,!0):!1;var Y=B.current();return 99===Y||B.switchN&&107===Y?!1:(B.lastIntValue=Y,B.advance(),!0)};La.regexp_eatDecimalEscape=function(B){B.lastIntValue=0;var Y=B.current();if(49<=Y&&57>=Y){do B.lastIntValue=
10*B.lastIntValue+(Y-48),B.advance();while(48<=(Y=B.current())&&57>=Y);return!0}return!1};La.regexp_eatCharacterClassEscape=function(B){var Y=B.current();if(100===Y||68===Y||115===Y||83===Y||119===Y||87===Y)return B.lastIntValue=-1,B.advance(),!0;if(B.switchU&&9<=this.options.ecmaVersion&&(80===Y||112===Y)){B.lastIntValue=-1;B.advance();if(B.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(B)&&B.eat(125))return!0;B.raise("Invalid property name")}return!1};La.regexp_eatUnicodePropertyValueExpression=
function(B){var Y=B.pos;if(this.regexp_eatUnicodePropertyName(B)&&B.eat(61)){var nb=B.lastStringValue;if(this.regexp_eatUnicodePropertyValue(B))return this.regexp_validateUnicodePropertyNameAndValue(B,nb,B.lastStringValue),!0}B.pos=Y;return this.regexp_eatLoneUnicodePropertyNameOrValue(B)?(this.regexp_validateUnicodePropertyNameOrValue(B,B.lastStringValue),!0):!1};La.regexp_validateUnicodePropertyNameAndValue=function(B,Y,nb){za.call(B.unicodeProperties.nonBinary,Y)||B.raise("Invalid property name");
B.unicodeProperties.nonBinary[Y].test(nb)||B.raise("Invalid property value")};La.regexp_validateUnicodePropertyNameOrValue=function(B,Y){B.unicodeProperties.binary.test(Y)||B.raise("Invalid property name")};La.regexp_eatUnicodePropertyName=function(B){var Y;for(B.lastStringValue="";N(Y=B.current());)B.lastStringValue+=H(Y),B.advance();return""!==B.lastStringValue};La.regexp_eatUnicodePropertyValue=function(B){var Y;for(B.lastStringValue="";J(Y=B.current());)B.lastStringValue+=H(Y),B.advance();return""!==
B.lastStringValue};La.regexp_eatLoneUnicodePropertyNameOrValue=function(B){return this.regexp_eatUnicodePropertyValue(B)};La.regexp_eatCharacterClass=function(B){if(B.eat(91)){B.eat(94);this.regexp_classRanges(B);if(B.eat(93))return!0;B.raise("Unterminated character class")}return!1};La.regexp_classRanges=function(B){for(;this.regexp_eatClassAtom(B);){var Y=B.lastIntValue;if(B.eat(45)&&this.regexp_eatClassAtom(B)){var nb=B.lastIntValue;!B.switchU||-1!==Y&&-1!==nb||B.raise("Invalid character class");
-1!==Y&&-1!==nb&&Y>nb&&B.raise("Range out of order in character class")}}};La.regexp_eatClassAtom=function(B){var Y=B.pos;if(B.eat(92)){if(this.regexp_eatClassEscape(B))return!0;if(B.switchU){var nb=B.current();(99===nb||48<=nb&&55>=nb)&&B.raise("Invalid class escape");B.raise("Invalid escape")}B.pos=Y}Y=B.current();return 93!==Y?(B.lastIntValue=Y,B.advance(),!0):!1};La.regexp_eatClassEscape=function(B){var Y=B.pos;if(B.eat(98))return B.lastIntValue=8,!0;if(B.switchU&&B.eat(45))return B.lastIntValue=
45,!0;if(!B.switchU&&B.eat(99)){if(this.regexp_eatClassControlLetter(B))return!0;B.pos=Y}return this.regexp_eatCharacterClassEscape(B)||this.regexp_eatCharacterEscape(B)};La.regexp_eatClassControlLetter=function(B){var Y=B.current();return sa(Y)||95===Y?(B.lastIntValue=Y%32,B.advance(),!0):!1};La.regexp_eatHexEscapeSequence=function(B){var Y=B.pos;if(B.eat(120)){if(this.regexp_eatFixedHexDigits(B,2))return!0;B.switchU&&B.raise("Invalid escape");B.pos=Y}return!1};La.regexp_eatDecimalDigits=function(B){var Y=
B.pos,nb;for(B.lastIntValue=0;sa(nb=B.current());)B.lastIntValue=10*B.lastIntValue+(nb-48),B.advance();return B.pos!==Y};La.regexp_eatHexDigits=function(B){var Y=B.pos,nb;for(B.lastIntValue=0;ja(nb=B.current());)B.lastIntValue=16*B.lastIntValue+Ha(nb),B.advance();return B.pos!==Y};La.regexp_eatLegacyOctalEscapeSequence=function(B){if(this.regexp_eatOctalDigit(B)){var Y=B.lastIntValue;if(this.regexp_eatOctalDigit(B)){var nb=B.lastIntValue;3>=Y&&this.regexp_eatOctalDigit(B)?B.lastIntValue=64*Y+8*nb+
B.lastIntValue:B.lastIntValue=8*Y+nb}else B.lastIntValue=Y;return!0}return!1};La.regexp_eatOctalDigit=function(B){var Y=B.current();if(48<=Y&&55>=Y)return B.lastIntValue=Y-48,B.advance(),!0;B.lastIntValue=0;return!1};La.regexp_eatFixedHexDigits=function(B,Y){for(var nb=B.pos,ld=B.lastIntValue=0;ld<Y;++ld){var ue=B.current();if(!ja(ue))return B.pos=nb,!1;B.lastIntValue=16*B.lastIntValue+Ha(ue);B.advance()}return!0};var L=function(B){this.type=B.type;this.value=B.value;this.start=B.start;this.end=B.end;
B.options.locations&&(this.loc=new V(B,B.startLoc,B.endLoc));B.options.ranges&&(this.range=[B.start,B.end])};La=fd.prototype;La.next=function(B){!B&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword);if(this.options.onToken)this.options.onToken(new L(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};La.getToken=function(){this.next();return new L(this)};
"undefined"!==typeof Symbol&&(La[Symbol.iterator]=function(){var B=this;return{next:function(){var Y=B.getToken();return{done:Y.type===na.eof,value:Y}}}});La.nextToken=function(){var B=this.curContext();B&&B.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(na.eof);if(B.override)return B.override(this);this.readToken(this.fullCharCodeAtPos())};La.readToken=function(B){return c(B,6<=
this.options.ecmaVersion)||92===B?this.readWord():this.getTokenFromCode(B)};La.fullCharCodeAtPos=function(){var B=this.input.charCodeAt(this.pos);if(55295>=B||56320<=B)return B;var Y=this.input.charCodeAt(this.pos+1);return 56319>=Y||57344<=Y?B:(B<<10)+Y-56613888};La.skipBlockComment=function(){var B=this.options.onComment&&this.curPosition(),Y=this.pos,nb=this.input.indexOf("*/",this.pos+=2);-1===nb&&this.raise(this.pos-2,"Unterminated comment");this.pos=nb+2;if(this.options.locations){yd.lastIndex=
Y;for(var ld;(ld=yd.exec(this.input))&&ld.index<this.pos;)++this.curLine,this.lineStart=ld.index+ld[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(Y+2,nb),Y,this.pos,B,this.curPosition())};La.skipLineComment=function(B){for(var Y=this.pos,nb=this.options.onComment&&this.curPosition(),ld=this.input.charCodeAt(this.pos+=B);this.pos<this.input.length&&!f(ld);)ld=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(Y+B,
this.pos),Y,this.pos,nb,this.curPosition())};La.skipSpace=function(){a:for(;this.pos<this.input.length;){var B=this.input.charCodeAt(this.pos);switch(B){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;
default:if(8<B&&14>B||5760<=B&&me.test(String.fromCharCode(B)))++this.pos;else break a}}};La.finishToken=function(B,Y){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var nb=this.type;this.type=B;this.value=Y;this.updateContext(nb)};La.readToken_dot=function(){var B=this.input.charCodeAt(this.pos+1);if(48<=B&&57>=B)return this.readNumber(!0);var Y=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===B&&46===Y)return this.pos+=3,this.finishToken(na.ellipsis);
++this.pos;return this.finishToken(na.dot)};La.readToken_slash=function(){var B=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===B?this.finishOp(na.assign,2):this.finishOp(na.slash,1)};La.readToken_mult_modulo_exp=function(B){var Y=this.input.charCodeAt(this.pos+1),nb=1,ld=42===B?na.star:na.modulo;7<=this.options.ecmaVersion&&42===B&&42===Y&&(++nb,ld=na.starstar,Y=this.input.charCodeAt(this.pos+2));return 61===Y?this.finishOp(na.assign,nb+1):this.finishOp(ld,
nb)};La.readToken_pipe_amp=function(B){var Y=this.input.charCodeAt(this.pos+1);return Y===B?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(na.assign,3):this.finishOp(124===B?na.logicalOR:na.logicalAND,2):61===Y?this.finishOp(na.assign,2):this.finishOp(124===B?na.bitwiseOR:na.bitwiseAND,1)};La.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(na.assign,2):this.finishOp(na.bitwiseXOR,1)};La.readToken_plus_min=function(B){var Y=
this.input.charCodeAt(this.pos+1);return Y===B?45!==Y||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Va.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(na.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===Y?this.finishOp(na.assign,2):this.finishOp(na.plusMin,1)};La.readToken_lt_gt=function(B){var Y=this.input.charCodeAt(this.pos+1),nb=1;if(Y===B)return nb=62===B&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+
nb)?this.finishOp(na.assign,nb+1):this.finishOp(na.bitShift,nb);if(33===Y&&60===B&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),this.nextToken();61===Y&&(nb=2);return this.finishOp(na.relational,nb)};La.readToken_eq_excl=function(B){var Y=this.input.charCodeAt(this.pos+1);return 61===Y?this.finishOp(na.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===B&&62===Y&&6<=this.options.ecmaVersion?(this.pos+=
2,this.finishToken(na.arrow)):this.finishOp(61===B?na.eq:na.prefix,1)};La.readToken_question=function(){var B=this.options.ecmaVersion;if(11<=B){var Y=this.input.charCodeAt(this.pos+1);if(46===Y){var nb=this.input.charCodeAt(this.pos+2);if(48>nb||57<nb)return this.finishOp(na.questionDot,2)}if(63===Y)return 12<=B&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(na.assign,3):this.finishOp(na.coalesce,2)}return this.finishOp(na.question,1)};La.readToken_numberSign=function(){var B=35;if(13<=this.options.ecmaVersion&&
(++this.pos,B=this.fullCharCodeAtPos(),c(B,!0)||92===B))return this.finishToken(na.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+ec(B)+"'")};La.getTokenFromCode=function(B){switch(B){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(na.parenL);case 41:return++this.pos,this.finishToken(na.parenR);case 59:return++this.pos,this.finishToken(na.semi);case 44:return++this.pos,this.finishToken(na.comma);case 91:return++this.pos,this.finishToken(na.bracketL);
case 93:return++this.pos,this.finishToken(na.bracketR);case 123:return++this.pos,this.finishToken(na.braceL);case 125:return++this.pos,this.finishToken(na.braceR);case 58:return++this.pos,this.finishToken(na.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(na.backQuote);case 48:B=this.input.charCodeAt(this.pos+1);if(120===B||88===B)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===B||79===B)return this.readRadixNumber(8);if(98===B||66===
B)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(B);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(B);case 124:case 38:return this.readToken_pipe_amp(B);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(B);case 60:case 62:return this.readToken_lt_gt(B);case 61:case 33:return this.readToken_eq_excl(B);
case 63:return this.readToken_question();case 126:return this.finishOp(na.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+ec(B)+"'")};La.finishOp=function(B,Y){var nb=this.input.slice(this.pos,this.pos+Y);this.pos+=Y;return this.finishToken(B,nb)};La.readRegexp=function(){for(var B,Y,nb=this.pos;;){this.pos>=this.input.length&&this.raise(nb,"Unterminated regular expression");var ld=this.input.charAt(this.pos);Va.test(ld)&&this.raise(nb,"Unterminated regular expression");
if(B)B=!1;else{if("["===ld)Y=!0;else if("]"===ld&&Y)Y=!1;else if("/"===ld&&!Y)break;B="\\"===ld}++this.pos}B=this.input.slice(nb,this.pos);++this.pos;ld=this.pos;Y=this.readWord1();this.containsEsc&&this.unexpected(ld);ld=this.regexpState||(this.regexpState=new Sk(this));ld.reset(nb,B,Y);this.validateRegExpFlags(ld);this.validateRegExpPattern(ld);nb=null;try{nb=new RegExp(B,Y)}catch(ue){}return this.finishToken(na.regexp,{pattern:B,flags:Y,value:nb})};La.readInt=function(B,Y,nb){var ld=12<=this.options.ecmaVersion&&
void 0===Y;nb=nb&&48===this.input.charCodeAt(this.pos);for(var ue=this.pos,pg=0,Kg=0,uh=0,fj=null==Y?Infinity:Y;uh<fj;++uh,++this.pos){var Mj=this.input.charCodeAt(this.pos);if(ld&&95===Mj)nb&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===Kg&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===uh&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),Kg=Mj;else{var Ck=
97<=Mj?Mj-97+10:65<=Mj?Mj-65+10:48<=Mj&&57>=Mj?Mj-48:Infinity;if(Ck>=B)break;Kg=Mj;pg=pg*B+Ck}}ld&&95===Kg&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===ue||null!=Y&&this.pos-ue!==Y?null:pg};La.readRadixNumber=function(B){var Y=this.pos;this.pos+=2;var nb=this.readInt(B);null==nb&&this.raise(this.start+2,"Expected number in radix "+B);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(nb=Qa(this.input.slice(Y,this.pos)),
++this.pos):c(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");return this.finishToken(na.num,nb)};La.readNumber=function(B){var Y=this.pos;B||null!==this.readInt(10,void 0,!0)||this.raise(Y,"Invalid number");var nb=2<=this.pos-Y&&48===this.input.charCodeAt(Y);nb&&this.strict&&this.raise(Y,"Invalid number");var ld=this.input.charCodeAt(this.pos);if(!nb&&!B&&11<=this.options.ecmaVersion&&110===ld)return nb=Qa(this.input.slice(Y,this.pos)),++this.pos,c(this.fullCharCodeAtPos())&&
this.raise(this.pos,"Identifier directly after number"),this.finishToken(na.num,nb);nb&&/[89]/.test(this.input.slice(Y,this.pos))&&(nb=!1);46!==ld||nb||(++this.pos,this.readInt(10),ld=this.input.charCodeAt(this.pos));69!==ld&&101!==ld||nb||(ld=this.input.charCodeAt(++this.pos),43!==ld&&45!==ld||++this.pos,null===this.readInt(10)&&this.raise(Y,"Invalid number"));c(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");B=this.input.slice(Y,this.pos);nb=nb?parseInt(B,8):parseFloat(B.replace(/_/g,
""));return this.finishToken(na.num,nb)};La.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>this.options.ecmaVersion&&this.unexpected();var B=++this.pos;var Y=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<Y&&this.invalidStringToken(B,"Code point out of bounds")}else Y=this.readHexChar(4);return Y};La.readString=function(B){for(var Y="",nb=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var ld=this.input.charCodeAt(this.pos);
if(ld===B)break;92===ld?(Y+=this.input.slice(nb,this.pos),Y+=this.readEscapedChar(!1),nb=this.pos):8232===ld||8233===ld?(10>this.options.ecmaVersion&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(f(ld)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}Y+=this.input.slice(nb,this.pos++);return this.finishToken(na.string,Y)};var Ka={};La.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(B){if(B===
Ka)this.readInvalidTemplateToken();else throw B;}this.inTemplateElement=!1};La.invalidStringToken=function(B,Y){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw Ka;this.raise(B,Y)};La.readTmplToken=function(){for(var B="",Y=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var nb=this.input.charCodeAt(this.pos);if(96===nb||36===nb&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===na.template||this.type===na.invalidTemplate)){if(36===
nb)return this.pos+=2,this.finishToken(na.dollarBraceL);++this.pos;return this.finishToken(na.backQuote)}B+=this.input.slice(Y,this.pos);return this.finishToken(na.template,B)}if(92===nb)B+=this.input.slice(Y,this.pos),B+=this.readEscapedChar(!0),Y=this.pos;else if(f(nb)){B+=this.input.slice(Y,this.pos);++this.pos;switch(nb){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:B+="\n";break;default:B+=String.fromCharCode(nb)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);
Y=this.pos}else++this.pos}};La.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;case "`":return this.finishToken(na.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};La.readEscapedChar=function(B){var Y=this.input.charCodeAt(++this.pos);++this.pos;switch(Y){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));
case 117:return ec(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),B)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=Y&&55>=Y){var nb=this.input.substr(this.pos-
1,3).match(/^[0-7]+/)[0],ld=parseInt(nb,8);255<ld&&(nb=nb.slice(0,-1),ld=parseInt(nb,8));this.pos+=nb.length-1;Y=this.input.charCodeAt(this.pos);"0"===nb&&56!==Y&&57!==Y||!this.strict&&!B||this.invalidStringToken(this.pos-1-nb.length,B?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(ld)}return f(Y)?"":String.fromCharCode(Y)}};La.readHexChar=function(B){var Y=this.pos;B=this.readInt(16,B);null===B&&this.invalidStringToken(Y,"Bad character escape sequence");
return B};La.readWord1=function(){this.containsEsc=!1;for(var B="",Y=!0,nb=this.pos,ld=6<=this.options.ecmaVersion;this.pos<this.input.length;){var ue=this.fullCharCodeAtPos();if(g(ue,ld))this.pos+=65535>=ue?1:2;else if(92===ue)this.containsEsc=!0,B+=this.input.slice(nb,this.pos),nb=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,ue=this.readCodePoint(),(Y?c:g)(ue,ld)||this.invalidStringToken(nb,"Invalid Unicode escape"),
B+=ec(ue),nb=this.pos;else break;Y=!1}return B+this.input.slice(nb,this.pos)};La.readWord=function(){var B=this.readWord1(),Y=na.name;this.keywords.test(B)&&(Y=Fd[B]);return this.finishToken(Y,B)};fd.acorn={Parser:fd,version:"8.5.0",defaultOptions:Oa,Position:Kb,SourceLocation:V,getLineInfo:n,Node:vk,TokenType:qd,tokTypes:na,keywordTypes:Fd,TokContext:xa,tokContexts:Sh,isIdentifierChar:g,isIdentifierStart:c,Token:L,isNewLine:f,lineBreak:Va,lineBreakG:yd,nonASCIIwhitespace:me};l.Node=vk;l.Parser=fd;
l.Position=Kb;l.SourceLocation=V;l.TokContext=xa;l.Token=L;l.TokenType=qd;l.defaultOptions=Oa;l.getLineInfo=n;l.isIdentifierChar=g;l.isIdentifierStart=c;l.isNewLine=f;l.keywordTypes=Fd;l.lineBreak=Va;l.lineBreakG=yd;l.nonASCIIwhitespace=me;l.parse=function(B,Y){return fd.parse(B,Y)};l.parseExpressionAt=function(B,Y,nb){return fd.parseExpressionAt(B,Y,nb)};l.tokContexts=Sh;l.tokTypes=na;l.tokenizer=function(B,Y){return fd.tokenizer(B,Y)};l.version="8.5.0";Object.defineProperty(l,"__esModule",{value:!0})})})(bn.acornModule,
bn.acorn);return bn.acorn}function Zq(e,h,l,b){var c=[];b=b||Cg.walk.make(Cg.custom.visitors.withMemberExpression);Object.keys(Cg.walk.base).forEach(function(g){var a=b[g];b[g]=function(d,f,k){Cg.arr.pushIfNotIncluded(c,d);return a(d,f,k)}});b.Property=function(g,a,d){Cg.arr.pushIfNotIncluded(c,g);d(g.key,a,"Expression");d(g.value,a,"Expression")};b.LabeledStatement=function(g,a,d){g.label&&d(g.label,a,"Expression");d(g.body,a,"Statement")};Cg.walk.findNodeAround(e,h,l,b);return c}function Tk(e,h){function l(c){return null===
c?null:b[c.type](c,l)}var b=Cg.obj.extend({Program:function(c,g){return{start:c.start,end:c.end,type:"Program",body:c.body.map(g),source:c.source,astIndex:c.astIndex}},FunctionDeclaration:function(c,g){return{start:c.start,end:c.end,type:"FunctionDeclaration",id:g(c.id),params:c.params.map(g),body:g(c.body),source:c.source,astIndex:c.astIndex}},BlockStatement:function(c,g){return{start:c.start,end:c.end,type:"BlockStatement",body:c.body.map(g),source:c.source,astIndex:c.astIndex}},ExpressionStatement:function(c,
g){return{start:c.start,end:c.end,type:"ExpressionStatement",expression:g(c.expression),source:c.source,astIndex:c.astIndex}},CallExpression:function(c,g){return{start:c.start,end:c.end,type:"CallExpression",callee:g(c.callee),arguments:c.arguments.map(g),source:c.source,astIndex:c.astIndex}},MemberExpression:function(c,g){return{start:c.start,end:c.end,type:"MemberExpression",object:g(c.object),property:g(c.property),computed:c.computed,source:c.source,astIndex:c.astIndex}},NewExpression:function(c,
g){return{start:c.start,end:c.end,type:"NewExpression",callee:g(c.callee),arguments:c.arguments.map(g),source:c.source,astIndex:c.astIndex}},VariableDeclaration:function(c,g){return{start:c.start,end:c.end,type:"VariableDeclaration",declarations:c.declarations.map(g),kind:c.kind,source:c.source,astIndex:c.astIndex}},VariableDeclarator:function(c,g){return{start:c.start,end:c.end,type:"VariableDeclarator",id:g(c.id),init:g(c.init),source:c.source,astIndex:c.astIndex}},FunctionExpression:function(c,
g){return{start:c.start,end:c.end,type:"FunctionExpression",id:g(c.id),params:c.params.map(g),body:g(c.body),source:c.source,astIndex:c.astIndex}},IfStatement:function(c,g){return{start:c.start,end:c.end,type:"IfStatement",test:g(c.test),consequent:g(c.consequent),alternate:g(c.alternate),source:c.source,astIndex:c.astIndex}},ConditionalExpression:function(c,g){return{start:c.start,end:c.end,type:"ConditionalExpression",test:g(c.test),consequent:g(c.consequent),alternate:g(c.alternate),source:c.source,
astIndex:c.astIndex}},SwitchStatement:function(c,g){return{start:c.start,end:c.end,type:"SwitchStatement",discriminant:g(c.discriminant),cases:c.cases.map(g),source:c.source,astIndex:c.astIndex}},SwitchCase:function(c,g){return{start:c.start,end:c.end,type:"SwitchCase",test:g(c.test),consequent:c.consequent.map(g),source:c.source,astIndex:c.astIndex}},BreakStatement:function(c,g){return{start:c.start,end:c.end,type:"BreakStatement",label:c.label,source:c.source,astIndex:c.astIndex}},ContinueStatement:function(c,
g){return{start:c.start,end:c.end,type:"ContinueStatement",label:c.label,source:c.source,astIndex:c.astIndex}},TryStatement:function(c,g){return{start:c.start,end:c.end,type:"TryStatement",block:g(c.block),handler:g(c.handler),finalizer:g(c.finalizer),guardedHandlers:c.guardedHandlers.map(g),source:c.source,astIndex:c.astIndex}},CatchClause:function(c,g){return{start:c.start,end:c.end,type:"CatchClause",param:g(c.param),guard:g(c.guard),body:g(c.body),source:c.source,astIndex:c.astIndex}},ThrowStatement:function(c,
g){return{start:c.start,end:c.end,type:"ThrowStatement",argument:g(c.argument),source:c.source,astIndex:c.astIndex}},ForStatement:function(c,g){return{start:c.start,end:c.end,type:"ForStatement",init:g(c.init),test:g(c.test),update:g(c.update),body:g(c.body),source:c.source,astIndex:c.astIndex}},ForInStatement:function(c,g){return{start:c.start,end:c.end,type:"ForInStatement",left:g(c.left),right:g(c.right),body:g(c.body),source:c.source,astIndex:c.astIndex}},WhileStatement:function(c,g){return{start:c.start,
end:c.end,type:"WhileStatement",test:g(c.test),body:g(c.body),source:c.source,astIndex:c.astIndex}},DoWhileStatement:function(c,g){return{start:c.start,end:c.end,type:"DoWhileStatement",test:g(c.test),body:g(c.body),source:c.source,astIndex:c.astIndex}},WithStatement:function(c,g){return{start:c.start,end:c.end,type:"WithStatement",object:g(c.object),body:g(c.body),source:c.source,astIndex:c.astIndex}},UnaryExpression:function(c,g){return{start:c.start,end:c.end,type:"UnaryExpression",argument:g(c.argument),
operator:c.operator,prefix:c.prefix,source:c.source,astIndex:c.astIndex}},BinaryExpression:function(c,g){return{start:c.start,end:c.end,type:"BinaryExpression",left:g(c.left),operator:c.operator,right:g(c.right),source:c.source,astIndex:c.astIndex}},LogicalExpression:function(c,g){return{start:c.start,end:c.end,type:"LogicalExpression",left:g(c.left),operator:c.operator,right:g(c.right),source:c.source,astIndex:c.astIndex}},AssignmentExpression:function(c,g){return{start:c.start,end:c.end,type:"AssignmentExpression",
left:g(c.left),operator:c.operator,right:g(c.right),source:c.source,astIndex:c.astIndex}},UpdateExpression:function(c,g){return{start:c.start,end:c.end,type:"UpdateExpression",argument:g(c.argument),operator:c.operator,prefix:c.prefix,source:c.source,astIndex:c.astIndex}},ReturnStatement:function(c,g){return{start:c.start,end:c.end,type:"ReturnStatement",argument:g(c.argument),source:c.source,astIndex:c.astIndex}},Identifier:function(c,g){return{start:c.start,end:c.end,type:"Identifier",name:c.name,
source:c.source,astIndex:c.astIndex}},Literal:function(c,g){return{start:c.start,end:c.end,type:"Literal",value:c.value,raw:c.raw,source:c.source,astIndex:c.astIndex}},ObjectExpression:function(c,g){return{start:c.start,end:c.end,type:"ObjectExpression",properties:c.properties.map(function(a){return{key:g(a.key),value:g(a.value),kind:a.kind}}),source:c.source,astIndex:c.astIndex}},ArrayExpression:function(c,g){return{start:c.start,end:c.end,type:"ArrayExpression",elements:c.elements.map(g),source:c.source,
astIndex:c.astIndex}},SequenceExpression:function(c,g){return{start:c.start,end:c.end,type:"SequenceExpression",expressions:c.expressions.map(g),source:c.source,astIndex:c.astIndex}},EmptyStatement:function(c,g){return{start:c.start,end:c.end,type:"EmptyStatement",source:c.source,astIndex:c.astIndex}},ThisExpression:function(c,g){return{start:c.start,end:c.end,type:"ThisExpression",source:c.source,astIndex:c.astIndex}},DebuggerStatement:function(c,g){return{start:c.start,end:c.end,type:"DebuggerStatement",
source:c.source,astIndex:c.astIndex}},LabeledStatement:function(c,g){return{start:c.start,end:c.end,type:"LabeledStatement",label:c.label,body:g(c.body),source:c.source,astIndex:c.astIndex}}},h||{});return l(e)}function rq(e,h,l){if(!h)return[];e=Cg.findNodesIncluding(e,h.start);var b=e.indexOf(h);e=e.slice(0,b).reverse().find(function(c){return Array.isArray(c.body)}).body;if(!l)return Cg.arr.without(e,h);h=e.indexOf(h);return"before"===l?e.slice(0,h):e.slice(h+1)}function $r(e,h,l){e.astIndex||
null!=l&&!l||Cg.addAstIndex(e);var b=null;Cg.withMozillaAstDo(e,null,function(c,g,a){b||g.astIndex<h||(g.astIndex===h?b=g:c())});return b}function go(e,h,l){l||(l=h,h=e,e=null);e||(e={});h.astIndex||Cg.addAstIndex(h);var b,c=!1,g="EmptyStatement BlockStatement ExpressionStatement IfStatement LabeledStatement BreakStatement ContinueStatement WithStatement SwitchStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration".split(" ");
Cg.withMozillaAstDo(h,{},function(a,d,f,k){if(!(c||d.astIndex<l.astIndex)){if(d===l||d.astIndex===l.astIndex)if(c=!0,e.asPath)b=k;else{d=Cg.Path(k);do b=d.get(h),d=d.slice(0,d.size()-1);while(-1==g.indexOf(b.type)&&0<d.size())}!c&&a()}});return b}function $q(e){Cg.withMozillaAstDo(e,{index:0},function(h,l,b){h();l.astIndex=b.index++});return e}function Kt(e,h){"string"===typeof e&&(h=e,e=Nj.parse(e));h&&Nj.AllNodesVisitor.run(e,function(l,b,c){return!l.source&&(l.source=h.slice(l.start,l.end))});
return e}function sq(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=Nj.parse("("+e+")",h);Nj.AllNodesVisitor.run(l,function(b,c,g){if(!b._positionFixed){b._positionFixed=!0;if(b.start||0===b.start)b.start+=-1,b.end+=-1;h.addSource&&!b.source&&(b.source=e.slice(b.start,b.end))}});return l.body[0].expression}function tq(e,h){h=h||{};h.ecmaVersion=h.ecmaVersion||11;h.sourceType=h.sourceType||"module";h.plugins=h.plugins||{};var l=[];h.withComments&&(h.onComment=function(a,d){return l.push({isBlock:a,
text:d})});h.plugins.jsx=h.plugins.hasOwnProperty("jsx")?h.plugins.jsx:!0;h.plugins.asyncawait=h.plugins.hasOwnProperty("asyncawait")?h.plugins.asyncawait:{inAsyncFunction:!0};h.plugins.objectSpread=h.plugins.hasOwnProperty("objectSpread")?h.plugins.objectSpread:!0;var b;"LabeledStatement"===h.type&&(b="$={"+e+"}");try{var c=Nj.parse(b||e,h);b?c=null:h.addSource&&Nj.addSource(c,e)}catch(a){var g=a}g&&void 0!==g.raisedAt?(b&&(g.pos-=3,g.raisedAt-=3,g.loc.column-=3),b=""+e.slice(g.raisedAt-20,g.raisedAt),
b=b+"<-error->"+e.slice(g.raisedAt,g.raisedAt+20),h.verbose&&console.log("parse error: "+b),g.parseErrorSource=b):g&&h.verbose&&console.log(""+g+g.stack);c||(c=Nj.loose.parse(e,h),h.addSource&&Nj.addSource(c,e),c.isFuzzy=!0,c.parseError=g);h.withComments&&(c.comments=l);return c}function Cl(e,h){function l(p){p=c(b(p));a.allComments=p.comments}function b(p){g.forEach(function(q){var r=Nj.nodesAt(q.start,a).reverse().find(function(u){return"BlockStatement"===u.type||"Program"===u.type});r||(r=a);r.comments||
(r.comments=[]);r.comments.push(q);p.nodesWithComments.push(r)});return p}function c(p){p.nodesWithComments.forEach(function(q){Nj.arr.clone(q.comments).reduce(function(r,u){if(u.isBlock)return r.lastComment=null,r;if(!r.lastComment)return r.lastComment=u,r;var x=r.lastComment;if(q.body.find(function(D){return D.start>=x.end&&D.end<=u.start}))return r.lastComment=u,r;var y=e.slice(x.end,u.start);if(/[\n\r][\n\r]+/.test(y))return r.lastComment=u,r;x.text+="\n"+u.text;x.end=u.end;Nj.arr.remove(q.comments,
u);Nj.arr.remove(p.comments,u);return r},{lastComment:null})});return p}h=h||{};h.ecmaVersion=h.ecmaVersion||11;h.allowAwaitOutsideFunction=!0;h.sourceType=h.sourceType||"module";h.hasOwnProperty("allowImportExportEverywhere")||(h.allowImportExportEverywhere=!0);h.plugins=h.plugins||{};h.plugins.jsx=h.plugins.hasOwnProperty("jsx")?h.plugins.jsx:!0;h.plugins.asyncawait=h.plugins.hasOwnProperty("asyncawait")?h.plugins.asyncawait:{inAsyncFunction:!0};h.plugins.objectSpread=h.plugins.hasOwnProperty("objectSpread")?
h.plugins.objectSpread:!0;if(h.withComments){delete h.withComments;var g=[];h.onComment=function(p,q,r,u,x,y){g.push({isBlock:p,text:q,node:null,start:r,end:u,line:x,column:y})}}try{var a=Nj.acorn.parse(e,h)}catch(p){if("undefined"!==typeof SyntaxError&&p instanceof SyntaxError&&p.loc){var d=e.split("\n"),f=p.message,k=p.loc;h=k.line;k=k.column;var n=p.pos;d=d[h-1];f="Syntax error at line ".concat(h," column ").concat(k," (index ").concat(n,') "').concat(f,'"\nsource: ').concat(d.slice(0,k),"<--SyntaxError--\x3e").concat(d.slice(k));
f=new SyntaxError(f);f.loc={line:h,column:k};f.pos=n;throw f;}throw p;}h.addSource&&Nj.addSource(a,e);h.addAstIndex&&!a.hasOwnProperty("astIndex")&&Nj.addAstIndex(a);a&&g&&l({ast:a,comments:g,nodesWithComments:[]});return a}function Jv(e){return Zh.identifierRe.test(e)&&-1===e.indexOf("-")}function as(e){return"this"===e?{type:"ThisExpression"}:{name:String(e),type:"Identifier"}}function bs(e){return{type:"Literal",value:e}}function uq(e){return{type:"ExpressionStatement",expression:e}}function cs(){for(var e=
arguments.length,h=Array(e),l=0;l<e;l++)h[l]=arguments[l];return{type:"SequenceExpression",expressions:h}}function ar(e){return{type:"ReturnStatement",argument:e}}function ds(){return{type:"EmptyStatement"}}function Lt(e,h,l){return{left:e,right:l,operator:h,type:"BinaryExpression"}}function es(e){var h=e.arrow,l=e.id,b=e.expression,c=e.generator,g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];g=g.map(function(k){return"string"===typeof k?Zh.id(k):k});for(var a=arguments.length,d=Array(2<
a?a-2:0),f=2;f<a;f++)d[f-2]=arguments[f];return{type:(h?"Arrow":"")+"FunctionExpression",id:l?"string"===typeof l?Zh.id(l):l:void 0,params:g,body:b&&1===d.length?d[0]:{body:d,type:"BlockStatement"},expression:b||!1,generator:c||!1}}function Cp(e){"string"===typeof e&&(e=Zh.id(e));for(var h=arguments.length,l=Array(1<h?h-1:0),b=1;b<h;b++)l[b-1]=arguments[b];return{type:"CallExpression",callee:e,arguments:l}}function br(e,h,l){"string"===typeof e&&(e={name:e,type:"Identifier"});return{type:"VariableDeclaration",
kind:l||"var",declarations:[{type:"VariableDeclarator",id:e,init:h}]}}function fs(e,h,l){"string"===typeof e&&(e=Zh.id(e));"string"===typeof h?(l||Zh.isIdentifier(h)||(l=!0),h=l?Zh.literal(h):Zh.id(h)):"number"===typeof h?(h=Zh.literal(h),l=!0):"Literal"===h.type&&(l=!0);return{type:"MemberExpression",computed:!!l,object:e,property:h}}function Mt(e){for(var h=arguments.length,l=Array(1<h?h-1:0),b=1;b<h;b++)l[b-1]=arguments[b];return l.reduce(function(c,g){return Zh.member(c,g)},"object"===ad(e)?e:
Zh.id(e))}function vq(e,h){return{type:"AssignmentExpression",operator:"=",right:h?"string"===typeof h?Zh.id(h):h:Zh.id("undefined"),left:"string"===typeof e?Zh.id(e):e}}function Dp(){for(var e=arguments.length,h=Array(e),l=0;l<e;l++)h[l]=arguments[l];return{body:Array.isArray(h[0])?h[0]:h,type:"BlockStatement"}}function Nt(){return Object.assign(Zh.block.apply(Zh,arguments),{sourceType:"module",type:"Program"})}function gs(e,h,l){for(var b=arguments.length,c=Array(3<b?b-3:0),g=3;g<b;g++)c[g-3]=arguments[g];
Array.isArray(l)||(c.unshift(l),l=null);return{block:Zh.block(c),finalizer:l?Zh.block(l):null,handler:{body:Zh.block(h),param:Zh.id(e),type:"CatchClause"},type:"TryStatement"}}function Kv(e,h){return{type:"Property",key:e,computed:"Identifier"!==e.type,shorthand:!1,value:h}}function Lv(e){for(var h=[],l=0;l<e.length;l+=2){var b=e[l];"string"===typeof b&&(b=Zh.id(b));h.push(Zh.prop(b,e[l+1]))}return{properties:h,type:"ObjectExpression"}}function Ot(e){var h=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:Zh.block(),l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Zh.block();return{consequent:h,alternate:l,test:e,type:"IfStatement"}}function Pt(e,h,l){return{type:"ForInStatement",left:"string"===typeof e?Zh.varDecl(e):e,right:"string"===typeof h?Zh.id(h):h,body:l}}function Qt(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Zh.id("undefined"),l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Zh.id("undefined");return{consequent:h,alternate:l,test:e,type:"ConditionalExpression"}}
function Mv(e,h,l){return{operator:e,left:h,right:l,type:"LogicalExpression"}}function Rt(e){var h=new Lg.ScopeVisitor,l=h.newScope(e,null);h.accept(e,l,[]);return l}function St(e,h){return Lg.withMozillaAstDo(e,[],function(l,b,c){b.start<=h&&h<=b.end&&(c.push(b),l());return c})}function Tt(e,h){return Lg.tree.filter(Lg.scopes(e),function(l){l=l.node;var b=l.start,c=l.end;"FunctionDeclaration"===l.type&&(b=l.params.length?l.params[0].start:l.body.start,c=l.body.end);return b<=h&&h<=c},function(l){return l.subScopes})}
function Nv(e,h){return Lg.arr.last(Lg.scopesAtIndex(e,h))}function hs(e,h){return Lg.nodesAt(e,h).filter(function(l){return"Program"===l.type||"FunctionDeclaration"===l.type||"FunctionExpression"===l.type})}function Ut(e){return Lg.withMozillaAstDo(e,{root:e,result:[]},function(h,l,b){b.result.push(l);if(l!==b.root&&("Program"===l.type||"FunctionDeclaration"===l.type||"FunctionExpression"===l.type))return b;h();return b}).result}function Ov(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
[];h&&e.node.id&&e.node.id.name&&l.push(e.node.id);Lg.helpers.declIds(e.params,l);for(var b=0;b<e.funcDecls.length;b++){var c=e.funcDecls[b].id;c&&l.push(c)}Lg.helpers.varDeclIds(e,l);l.push.apply(l,db(e.catches));for(b=0;b<e.classDecls.length;b++)(c=e.classDecls[b].id)&&l.push(c);l.push.apply(l,db(e.importSpecifiers));return Lg.arr.compact(l)}function Pv(e,h){var l=[],b=fa(Lg.declarationsOfScope(e,!0)),c;try{for(b.s();!(c=b.n()).done;)l.push(c.value.name)}catch(g){b.e(g)}finally{b.f()}h&&Lg._findJsLintGlobalDeclarations("Program"===
e.node.type?e.node:e.node.body,l);return l}function Qv(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!e||!e.comments)return h;var l=fa(e.comments),b;try{for(l.s();!(b=l.n()).done;){var c=b.value.text.trim();if(c.startsWith("global")){var g=fa(c.replace(Lg.globalDeclRe,"").split(",")),a;try{for(g.s();!(a=g.n()).done;)h.push(a.value.trim())}catch(d){g.e(d)}finally{g.f()}}}}catch(d){l.e(d)}finally{l.f()}return h}function is(e){return Lg.FindToplevelFuncDeclVisitor.run(e)}function Rv(e,
h){if(0==h.length)return[null,null];var l=lc(h);h=l[0];l=l.slice(1);var b=h.decls||Lg.declarationsWithIdsOfScope(h);h.decls=b;return b.find(function(c){c=Wb(c,2);c[0];return c[1].name==e})||Rv(e,l)}function Vt(e){function h(b,c){var g=[b].concat(c);b.refs.forEach(function(a){var d=Lg.resolveReference(a.name,g);d=Wb(d,2);l.set(a,{decl:d[0],declId:d[1],ref:a})});b.subScopes.forEach(function(a){return h(a,g)})}if(e.referencesResolvedSafely)return e;var l=e.resolvedRefMap||(e.resolvedRefMap=new Map);
h(e,[]);e.referencesResolvedSafely=!0;return e}function Sv(e,h){h=fa(h.resolvedRefMap.values());var l;try{for(h.s();!(l=h.n()).done;){var b=l.value,c=b.ref,g=c.end;if(c.start<=e&&e<=g)return b}}catch(a){h.e(a)}finally{h.f()}}function Il(e,h){function l(a){var d=Lg._declaredVarNames(a,b);return a.subScopes.map(l).reduce(function(f,k){return f.concat(k)},a.refs).filter(function(f){return-1===d.indexOf(f.name)})}h=h||{};h.withComments=!0;"string"===typeof e&&(e=Lg.parse(e,h));e=Lg.scopes(e);var b=!!h.jslintGlobalComment;
h=Lg._declaredVarNames(e,b);var c=e.refs.concat(e.subScopes.map(l).flat()),g=Lg.arr.withoutAll(c.map(function(a){return a.name}),h);return{scope:e,varDecls:e.varDecls,funcDecls:e.funcDecls.filter(function(a){return a.id}),classDecls:e.classDecls.filter(function(a){return a.id}),declaredNames:h,undeclaredNames:g,refs:c,thisRefs:e.thisRefs}}function Wt(e,h){e=Lg.topLevelDeclsAndRefs(e,h);var l=e.declaredNames.concat(Lg.knownGlobals);return e.refs.filter(function(b){return-1===l.indexOf(b.name)})}function Xt(e,
h,l,b){if(!h&&!e)throw Error("Need at least ast or code");h=h||Lg.stringify(e);e=e&&e.loc?e:Lg.parse(h,{locations:!0});return Lg.withMozillaAstDo(e,[],function(c,g,a){l.every(function(d){return Lg.num.between(d,g.loc.start.line,g.loc.end.line)})&&(Lg.arr.pushIfNotIncluded(a,g),c());return a})}function cr(e,h){var l,b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{refs:[],decls:[]};if("this"===h){var g;(g=c.refs).push.apply(g,db(e.thisRefs));
return c}g=Lg.__varDeclIdsFor(e,h);if(!b&&g.length)return c;b=fa(e.refs);var a;try{for(b.s();!(a=b.n()).done;){var d=a.value;d.name===h&&c.refs.push(d)}}catch(k){b.e(k)}finally{b.f()}(l=c.decls).push.apply(l,db(g));l=fa(e.subScopes);var f;try{for(l.s();!(f=l.n()).done;)cr(f.value,h,!1,c)}catch(k){l.e(k)}finally{l.f()}return c}function Tv(e,h,l){var b=null;Lg.scopesAtIndex(e,l).reverse().find(function(c){c=Lg.declarationsOfScope(c,!0);var g=Lg.arr.pluck(c,"name").indexOf(h);if(-1===g)return!1;b=c[g];
return!0});return b}function dr(e,h){h="string"===typeof h?Lg.parse(h):h;return Lg.custom.findNodesIncluding(h,e)}function ho(e,h,l){var b=Lg.nodesAt(h.start,e).reverse().find(function(g){return Lg._stmtTypes.includes(g.type)});if(l&&l.asPath){h=new Lg.BaseVisitor;var c;h.accept=Lg.fun.wrap(h.accept,function(g,a,d,f){if(a===b)throw c=f,Error("stop search");return g(a,d,f)});try{h.accept(e,{},[])}catch(g){}return c}return b}function js(e){var h=[];e=e.node.body||[];for(var l=0;l<e.length;l++){var b=
e[l];if("ImportDeclaration"===b.type)if(0===b.specifiers.length)h.push({local:null,imported:null,fromModule:b.source.value,node:b});else{var c=b.source?b.source.value:"unknown module";h.push.apply(h,db(b.specifiers.map(function(g){return{local:g.local?g.local.name:null,imported:"ImportNamespaceSpecifier"===g.type?"*":"ImportDefaultSpecifier"===g.type?"default":"ImportSpecifier"===g.type?g.imported.name:null,fromModule:c,node:b}})))}}return h}function ks(e){1<arguments.length&&void 0!==arguments[1]&&
arguments[1]&&Lg.resolveReferences(e);var h=[],l=fa(e.exportDecls),b;try{var c=function(){var d=b.value;g=Lg.statementOf(e.node,d);if(!g)return"continue";a=g.source?g.source.value:null;if("ExportAllDeclaration"===g.type)return h.push({local:null,exported:"*",imported:"*",fromModule:a,node:d,type:"all"}),"continue";if("ExportDefaultDeclaration"===g.type){if(Lg.helpers.isDeclaration(g.declaration))return h.push({local:g.declaration.id?g.declaration.id.name:null,exported:"default",type:"FunctionDeclaration"===
g.declaration.type?"function":"ClassDeclaration"===g.declaration.type?"class":null,fromModule:null,node:d,decl:g.declaration,declId:g.declaration.id}),"continue";if("Identifier"===g.declaration.type){var f=e.resolvedRefMap.get(g.declaration)||{};h.push({local:g.declaration.name,exported:"default",fromModule:null,node:d,type:"id",decl:f.decl,declId:f.declId});return"continue"}h.push({local:null,exported:"default",fromModule:null,node:d,type:"expr",decl:g.declaration,declId:g.declaration});return"continue"}if(g.specifiers&&
g.specifiers.length)return h.push.apply(h,db(g.specifiers.map(function(k){if(a){var n=d;var p=k.exported}else k.local&&(n=(p=e.resolvedRefMap.get(k.local))?p.decl:null,p=p?p.declId:null);return{local:!a&&k.local?k.local.name:null,exported:k.exported?k.exported.name:null,imported:a&&k.local?k.local.name:null,fromModule:a||null,type:"id",node:d,decl:n,declId:p}}))),"continue";if(g.declaration&&g.declaration.declarations)return h.push.apply(h,db(g.declaration.declarations.map(function(k){return{local:k.id?
k.id.name:"default",exported:k.id?k.id.name:"default",type:g.declaration.kind,fromModule:null,node:d,decl:k,declId:k.id}}))),"continue";if(g.declaration)return h.push({local:g.declaration.id?g.declaration.id.name:"default",exported:g.declaration.id?g.declaration.id.name:"default",type:"FunctionDeclaration"===g.declaration.type?"function":"ClassDeclaration"===g.declaration.type?"class":null,fromModule:null,node:d,decl:g.declaration,declId:g.declaration.id}),"continue"};for(l.s();!(b=l.n()).done;){var g,
a;c()}}catch(d){l.e(d)}finally{l.f()}return Lg.arr.uniqBy(h,function(d,f){return d.local==f.local&&d.exported==f.exported&&d.fromModule==f.fromModule})}function Jo(e){return(new Ko.ObjectSpreadTransformer).accept(e,{},[])}function Uv(e,h){if(e.start===h.start&&e.end===h.end)return 0;if(e.end<=h.start)return-1;if(e.start>=h.end||e.start<=h.start&&e.end>=h.end)return 1;if(h.start<=e.start&&h.end>=e.end)return-1;throw Error("Comparing nodes");}function Vv(e,h,l){l="object"===ad(l)?l:{changes:[],source:l};
var b=!1,c=l.changes.reduce(function(a,d){if(a.end<d.pos)return a;var f=d.pos<a.start;b=b||d.pos>=a.start&&d.pos<=a.end;if("add"===d.type)return{start:f?a.start+d.string.length:a.start,end:a.end+d.string.length};if("del"===d.type)return{start:f?a.start-d.length:a.start,end:a.end-d.length};throw Error("Cannot deal with change "+Qg.obj.inspect(d));},{start:e.start,end:e.end}),g=l.source;e=h(e,g.slice(c.start,c.end),b);e="string"===typeof e?e:Array.isArray(e)?e.map(Qg._node2string).join("\n"+Qg._findIndentAt(g,
c.start)):e=Qg._node2string(e);c=[{type:"del",pos:c.start,length:c.end-c.start},{type:"add",pos:c.start,string:e}];return{changes:l.changes.concat(c),source:Qg._applyChanges(c,g)}}function Yt(e,h){e=e.sort(function(c,g){return Qg._compareNodesForReplacement(c.target,g.target)});h="object"===ad(h)?h:{changes:[],source:h};for(var l=0;l<e.length;l++){var b=e[l];h=Qg.replaceNode(b.target,b.replacementFunc,h)}return h}function nm(e,h,l,b){b="object"===ad(e)?e:null;e="string"===typeof e?e:b.source||Qg._node2string(b);
return Qg.replaceNode(h,l,e)}function Zt(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];h.push.apply(h,db(e.varDecls));var l=fa(e.subScopes),b;try{for(l.s();!(b=l.n()).done;)Zt(b.value,h)}catch(c){l.e(c)}finally{l.f()}return h}function ls(e){var h="object"===ad(e)?e:Qg.parse(e);e="string"===typeof e?e:h.source||Qg._node2string(h);h=Qg.scopes(h);var l=Qg.__findVarDecls(h);h=[];l=fa(l);var b;try{for(l.s();!(b=l.n()).done;)h.push({target:b.value,replacementFunc:function(c,g,a){a&&
(c=Qg.parse(g).body[0]);return c.declarations.map(function(d){return{type:"VariableDeclaration",kind:"var",declarations:[d]}})}})}catch(c){l.e(c)}finally{l.f()}return Qg.replaceNodes(h,e)}function $t(e){var h="object"===ad(e)?e:Qg.parse(e);e="string"===typeof e?e:h.source||Qg._node2string(h);h=Qg.scopes(h);var l=Qg.__findVarDecls(h);h=[];l=fa(l);var b;try{for(l.s();!(b=l.n()).done;)h.push({target:b.value,replacementFunc:function(c,g,a){a&&(c=Qg.parse(g).body[0]);g=[];c=fa(c.declarations);var d;try{for(c.s();!(d=
c.n()).done;){var f=d.value;a={type:"Identifier",name:"__temp"};g.push({type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:a,init:f.init}]});var k=fa(Qg.helpers.objPropertiesAsList(f.id,[],!1)),n;try{for(k.s();!(n=k.n()).done;){var p=n.value.key;g.push(Qg.varDecl(p[p.length-2],Qg.memberChain.apply(Qg,[a.name].concat(db(p))),"var"))}}catch(q){k.e(q)}finally{k.f()}}}catch(q){c.e(q)}finally{c.f()}return g}})}catch(c){l.e(c)}finally{l.f()}return Qg.replaceNodes(h,e)}function Wv(e,
h){h=h||{};var l=Qg.parse(e,h),b=Qg.arr.last(l.body);if("ExpressionStatement"!==b.type)return h.asAST?l:e;l.body.splice(l.body.length-1,1,Qg.returnStmt(b.expression));return h.asAST?l:Qg.stringify(l)}function au(e,h){h=h||{};e=Qg.returnLastStatement(e,h);return h.asAST?Qg.program(Qg.funcExpr.apply(Qg,[{id:h.id||void 0},[]].concat(db(e.body)))):"function".concat(h.id?" "+h.id:"","() {\n").concat(e,"\n}")}function Xv(e,h){"string"===typeof e&&(e=Qg.parse(e));h=h||{};var l="Program"===e.type,b=h.startFuncNode||
Qg.id("__start_execution");h=h.endFuncNode||Qg.id("__end_execution");var c=Qg.topLevelFuncDecls(e),g=e.body,a=[];c.forEach(function(d){var f=d.node;Qg.Path(d.path).set(e,Qg.exprStmt(f.id));a.push(f)});g.unshift(Qg.exprStmt(Qg.funcCall(b)));b=Qg.arr.last(g);"ExpressionStatement"===b.type?(g.pop(),g.push(Qg.exprStmt(Qg.funcCall(h,Qg.id("null"),b.expression)))):"VariableDeclaration"===b.type&&"Identifier"===Qg.arr.last(b.declarations).id.type?g.push(Qg.exprStmt(Qg.funcCall(h,Qg.id("null"),Qg.arr.last(b.declarations).id))):
g.push(Qg.exprStmt(Qg.funcCall(h,Qg.id("null"),Qg.id("undefined"))));a.push(Qg.tryStmt.apply(Qg,["err",[Qg.exprStmt(Qg.funcCall(h,Qg.id("err"),Qg.id("undefined")))]].concat(db(g))));return l?Qg.program.apply(Qg,a):Qg.block.apply(Qg,a)}function Yv(e){if(!Qg.isProbablySingleExpressionRe.test(e)||30<e.split("\n").length)return e;try{var h=Qg.fuzzyParse(e);1===h.body.length&&("FunctionDeclaration"===h.body[0].type||"BlockStatement"===h.body[0].type&&"LabeledStatement"===h.body[0].body[0].type)&&(e="("+
e.replace(/;\s*$/,"")+")")}catch(l){"undefined"!==typeof $world?$world.logError(l):console.error("Eval preprocess error: %s",l.stack||l)}return e}function Zv(e,h){var l=ui.statementOf(e,h,{asPath:!0}).slice(0,-2);l=ui.Path(l).get(e);return l.comments&&l.comments.length?ui.chain(ui.extractComments(e)).reversed().find(function(b){return b.followingNode===h}).value():null}function $v(e,h){function l(r){return r.node.body.find(function(u){return u.start>r.comment.end})}function b(r){return{type:"unknown",
comment:r.comment.text}}function c(r){r=ui.Path(r.path.slice(0,-1)).get(n);return{name:r.id?r.id.name:"<error: no name for function>",args:ui.arr.pluck(r.params,"name")}}function g(r){for(var u=ui.Path(r.path.slice(0,-2)).get(n),x=u.key?u.key.name:"<error: no name for method>",y=r.path.slice(),D="<error: no object found for method>";y.length&&"init"!==ui.arr.last(y);)y.pop();y.length&&(D=ui.Path(y.slice(0,-1).concat(["id","name"])).get(n));if(ui.string.startsWith(D,"<error")){for(y=r.path.slice();y.length&&
"right"!==ui.arr.last(y);)y.pop();y.length&&(D=ui.Path(y.slice(0,-1).concat(["left"])).get(n),D=p.slice(D.start,D.end))}ui.string.startsWith(D,"<error")&&(y=r.path.slice(),(r=(r=ui.Path(y.slice(0,-6)).get(n))&&"CallExpression"===r.type&&r.arguments[0])&&(D=p.slice(r.start,r.end)));return{name:x,args:ui.arr.pluck(u.value.params,"name"),objectName:D}}function a(r){r=ui.Path(r.path.slice(0,-1)).get(n);if("FunctionExpression"!==r.type&&"FunctionDeclaration"!==r.type)return{};var u=ui.statementOf(n,r);
if("ExpressionStatement"!==u.type||"AssignmentExpression"!==u.expression.type)return{};var x=p.slice(u.expression.left.object.start,u.expression.left.object.end);return{name:p.slice(u.expression.left.property.start,u.expression.left.property.end),objectName:x,args:ui.arr.pluck(r.params,"name")}}function d(r){var u=r.path.slice(0,-3);var x=ui.Path(u).get(n);if(x&&"Property"===x.type){var y=ui.arr.pluck(x.value.callee.params,"name");var D=x.key?x.key.name:"<error: no name for method>"}D||(u=r.path.slice(0,
-2),(x=ui.Path(u).get(n))&&"Property"===x.type&&(y=ui.arr.pluck(x.value.params,"name"),D=x.key?x.key.name:"<error: no name for method>"));D||(D="<error: no name for method>",y=[],u=r.path);x=ui.arr.clone(u);for(r="<error: no object found for method>";x.length&&"init"!==ui.arr.last(x);)x.pop();x.length&&(r=ui.Path(x.slice(0,-1).concat(["id","name"])).get(n));if(ui.string.startsWith(r,"<error")){for(x=ui.arr.clone(u);x.length&&"right"!==ui.arr.last(x);)x.pop();x.length&&(r=ui.Path(x.slice(0,-1).concat(["left"])).get(n),
r=p.slice(r.start,r.end))}ui.string.startsWith(r,"<error")&&(x=ui.arr.clone(u),(u=(u=ui.Path(x.slice(0,-4)).get(n))&&"CallExpression"===u.type&&u.arguments[0])&&(r=p.slice(u.start,u.end)));return{name:D,args:y,objectName:r}}function f(r){return r&&"VariableDeclaration"===r.type&&1===r.declarations.length}function k(r){return"AssignmentExpression"!==r.type?!1:"ObjectExpression"===r.right.type?!0:"AssignmentExpression"===r.right.type?k(r.right):!1}var n="string"===typeof e?ui.parse(e,{withComments:!0}):
e,p=h||("string"===typeof e?e:ui.stringify(e)),q=ui.arr.sortBy(function(r){var u=[],x=new ui.Visitor;x.accept=ui.fun.wrap(x.accept,function(y,D,H,I){D.comments&&ui.arr.pushAll(u,D.comments.map(function(N){return{path:I,comment:N,node:D}}));return y(D,H,I)});x.accept(r,u,[]);return u}(n),function(r){return r.comment.start});return q.map(function(r,u){if(ui.arr.equals(r.path.slice(-2),["value","body"]))return ui.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},g(r)]);var x=r.path.slice(-5);
ui.arr.removeAt(x,1);if(ui.arr.equals(x,["properties","value","callee","body"]))return ui.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},d(r)]);if((x=ui.Path(r.path.slice(0,-1)).get(n))&&"FunctionDeclaration"===x.type)return ui.obj.merge([r,r.comment,{type:"function",comment:r.comment.text},c(r)]);if(ui.arr.equals(r.path.slice(-2),["right","body"]))return ui.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},a(r)]);x=l(r);return x?(u=q[u+1])&&u.comment.start<=x.start?ui.obj.merge([r,
r.comment,{followingNode:x},b(r)]):f(x)&&("ObjectExpression"===x.declarations[0].init.type||k(x.declarations[0].init))?ui.obj.merge([r,r.comment,{followingNode:x},{type:"object",comment:r.comment.text},{name:x.declarations[0].id.name}]):f(x)?ui.obj.merge([r,r.comment,{followingNode:x},{type:"var",comment:r.comment.text},{name:x.declarations[0].id.name}]):ui.obj.merge([r,r.comment,{followingNode:x},b(r)]):ui.obj.merge([r,r.comment,{followingNode:x},b(r)])})}function aw(e,h){h=h||Vi.obj.merge({hideOneLiners:!1},
h);"string"===typeof e&&(e=Vi.parse(e,{addSource:!0}));var l=[],b=fa("Program"===e.type?e.body:e.body.body),c;try{for(b.s();!(c=b.n()).done;){var g=c.value;g=Vi.unwrapExport(g);var a=Vi.functionWrapper(g,h)||Vi.varDefs(g)||Vi.funcDef(g)||Vi.es6ClassDef(g)||Vi.someObjectExpressionCall(g)||Vi.describe(g);if(a){if(h.hideOneLiners)if(e.loc)a=a.filter(function(p){return!p.node.loc||p.node.loc.start.line!==p.node.loc.end.line});else if(e.source){var d=[],f=fa(a),k;try{for(f.s();!(k=f.n()).done;){var n=
k.value;(n.parent&&d.includes(n.parent)||(n.node.source||"").includes("\n"))&&d.push(n)}}catch(p){f.e(p)}finally{f.f()}a=d}l.push.apply(l,db(a))}}}catch(p){b.e(p)}finally{b.f()}return l}function bw(e){var h="describe xdescribe it xit after afterEach before beforeEach".split(" "),l=[];e.expression.arguments[1].body.body.forEach(function(b){if("ExpressionStatement"!==b.type||!b.expression.callee)return null;var c=b.expression.callee.name;if(h.includes(c)){c={name:b.expression.arguments[0].value||b.expression.callee.name,
node:b,type:c,parent:e};if("describe"===b.expression.callee.name||"xdescribe"===b.expression.callee.name)c.children=bw(b);l.push(c)}});return l}function er(e){return e.flatMap(function(h){return h?"Identifier"===h.type?[h]:"RestElement"===h.type?[h.argument]:"ObjectPattern"===h.type?er(Vi.arr.pluck(h.properties,"value")):"ArrayPattern"===h.type?er(h.elements):[]:[]})}function ms(e){return Qj.isValidIdentifierRe.test(e)}function io(){return"undefined"!==typeof System?System.global:"undefined"!==typeof window?
window:"undefined"!==typeof global?global:"undefined"!==typeof Global?Global:"undefined"!==typeof self?self:function(){return this}()}function bu(e,h){h=String(h).match(/function\s*[a-zA-Z0-9_$]*\s*\(([^\)]*)\)/);return e+"("+(h&&h[1]||"")+")"}function Gy(e){return e===e||e===Array||e===Function||e===String||e===Boolean||e===Date||e===RegExp||e===Number||e===Promise?!0:e instanceof Function&&(void 0!==e.superclass||void 0!==e._superclass)}function cw(e,h){return e.map(function(l){return l[h]})}function dw(e){if(Symbol.keyFor(e))return'Symbol.for("'.concat(Symbol.keyFor(e),
'")');if(Zj.knownSymbols.get(e))return Zj.knownSymbols.get(e);String(e).match(Zj.symMatcher);return String(e)}function cu(e){if(!e)return String(e);if(Array.isArray(e))return"[".concat(e.map(cu).join(","),"]");if("symbol"===ad(e))return Zj.printSymbol(e);try{return String(e)}catch(h){throw Error("Cannot print object: ".concat(h.stack));}}function fr(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=e.value,b=e.isPromise,c=e.promisedValue,g=e.promiseStatus;return e.isError||l instanceof
Error?(h=String(l),(c=l.stack||"")&&l.message!==l.stack&&(c=String(c),0===c.indexOf(h)&&(c=c.slice(h.length)),h+="\n"+c),h):b?(b=Zj.string.print(g),h="pending"===g?void 0:fr({value:c},h),"Promise({status: ".concat(b,", ").concat(void 0===l?"":"value: "+h,"})")):l instanceof Promise?'Promise({status: "unknown"})':h.inspect?Zj.printInspectEvalValue(l,h.inspectDepth||2):String(l)}function ew(e,h){var l="";return Promise.resolve().then(function(){var b=h.lastIndexOf(".");0<=b?(l=h.slice(b+1),h=h.slice(0,
b)):(l=h,h='(typeof window === "undefined" ? global : window)');return e(h)}).then(function(b){return{evalResult:b,startLetters:l,code:h}})}function fw(e,h,l){e=Wj.getObjectForCompletion(e,h).then(function(b){var c=b.evalResult;b={completions:Wj.descriptorsOfObjAndProtoProperties(c&&c.isEvalResult?c.value:c),startLetters:b.startLetters,code:b.code};c&&c.isPromise&&("fulfilled"===c.promiseStatus?b.promiseResolvedCompletions=Wj.descriptorsOfObjAndProtoProperties(c.promisedValue):"rejected"===c.promiseStatus&&
(b.promiseRejectedCompletions=Wj.descriptorsOfObjAndProtoProperties(c.promisedValue)));return b});if("function"===typeof l)e.then(function(b){return l(null,b)})["catch"](function(b){return l(b)});return e}function du(e,h,l){h||(h={type:"Identifier",name:"__rec"});l=Object.assign({ignoreUndeclaredExcept:null,includeRefs:null,excludeRefs:l&&l.exclude||[],includeDecls:null,excludeDecls:l&&l.exclude||[],recordDefRanges:!1,es6ExportFuncId:null,es6ImportFuncId:null,captureObj:h,moduleExportFunc:{name:l&&
l.es6ExportFuncId||"_moduleExport",type:"Identifier"},moduleImportFunc:{name:l&&l.es6ImportFuncId||"_moduleImport",type:"Identifier"},declarationWrapper:void 0,classTransform:function(c){return c}},l);h=ee.removeJspmGlobalRef(e,l);if(l.ignoreUndeclaredExcept){var b=ee.topLevelDeclsAndRefs(e);l.excludeRefs=ee.arr.withoutAll(b.undeclaredNames,l.ignoreUndeclaredExcept).concat(l.excludeRefs);l.excludeDecls=ee.arr.withoutAll(b.undeclaredNames,l.ignoreUndeclaredExcept).concat(l.excludeDecls)}l.excludeRefs=
l.excludeRefs.concat(l.captureObj.name);l.excludeDecls=l.excludeDecls.concat(l.captureObj.name);l.recordDefRanges?ee.computeDefRanges(h,l):null;l.excludeRefs=l.excludeRefs.concat(ee.additionalIgnoredRefs(e,l));l.excludeDecls=l.excludeDecls.concat(ee.additionalIgnoredDecls(e,l));h=ee.fixDefaultAsyncFunctionExportForRegeneratorBug(h,l);l.es6ExportFuncId&&(l.excludeRefs.push(l.es6ExportFuncId),l.excludeRefs.push(l.es6ImportFuncId),h=ee.es6ModuleTransforms(h,l));h=ee.replaceRefs(h,l);h=ee.replaceVarDecls(h,
l);h=ee.clearEmptyExports(h,l);h=ee.replaceClassDecls(h,l);h=ee.splitExportDeclarations(h,l);h=ee.insertCapturesForExportDeclarations(h,l);h=ee.insertCapturesForImportDeclarations(h,l);h=ee.insertDeclarationsForExports(h,l);h=ee.putFunctionDeclsInFront(h,l);return h=ee.transformImportMeta(h,l)}function gw(e,h,l){l=Object.assign({captureObj:h||{type:"Identifier",name:"__rec"},exclude:[],declarationWrapper:void 0},l);h=ee.Path("body.0.expression").get(e);if("System"!==h.callee.object.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: ".concat(ee.stringify(e).slice(0,
300),"..."));if("register"!==h.callee.property.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: ".concat(ee.stringify(e).slice(0,300),"..."));h=ee.Path("arguments.1.body.body").get(h);var b=ee.arr.last(h);if("ReturnStatement"!==b.type)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at return statement: ".concat(ee.stringify(e).slice(0,300),"..."));var c=b.argument.properties.find(function(g){return"setters"===
g.key.name});if(!c)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding setters: ".concat(ee.stringify(e).slice(0,300),"..."));b=b.argument.properties.find(function(g){return"execute"===g.key.name});if(!b)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding execute: ".concat(ee.stringify(e).slice(0,300),"..."));c.value.elements.forEach(function(g){g.params[0]=ee.assign(g.params[0],
ee.nodes.objectLiteral({}));g.body.body=g.body.body.map(function(a){if("ExpressionStatement"!==a.type||"AssignmentExpression"!==a.expression.type||"Identifier"!==a.expression.left.type||l.exclude.includes(a.expression.left.name))return a;var d=a.expression.left;a=l.declarationWrapper?ee.declarationWrapperCall(l.declarationWrapper,null,ee.literal(d.name),ee.literal("var"),a.expression,l.captureObj,l):a.expression;return ee.exprStmt(ee.assign(ee.member(l.captureObj,d),a))})});(c=b.value.body.body.find(function(g){return"ExpressionStatement"===
g.type&&"AssignmentExpression"==g.expression.type&&g.expression.left.name===l.captureObj.name}))||(c=b.value.body.body.find(function(g){return"VariableDeclaration"===g.type&&g.declarations[0].id&&g.declarations[0].id.name===l.captureObj.name}));c&&(ee.arr.remove(b.value.body.body,c),ee.arr.pushAt(h,c,h.length-1));l.sourceAccessorName&&((c=b.value.body.body.find(function(g){return"ExpressionStatement"===g.type&&"AssignmentExpression"==g.expression.type&&g.expression.left.name===l.sourceAccessorName}))||
(c=b.value.body.body.find(function(g){return"VariableDeclaration"===g.type&&g.declarations[0].id&&g.declarations[0].id.name===l.sourceAccessorName})),c&&(ee.arr.remove(b.value.body.body,c),ee.arr.pushAt(h,c,h.length-1)));return e}function Lo(e,h){var l=ee.stringify(h.captureObj),b=0;e.body=e.body.reduce(function(c,g){var a=[g],d="",f=!1;if("ExportNamedDeclaration"===g.type){if(g.source){var k=g.specifiers.map(function(n){return[n.local.name,n.exported.name]});d="import { ".concat(k.map(function(n){var p=
Wb(n,2);n=p[0];p=p[1];return n===p?p:"".concat(n," as ").concat(p)}).join(",")," } from ").concat(g.source.raw,";\n");f="export { ".concat(k.map(function(n){n=Wb(n,2);n[0];return n[1]}).join(",")," };\n")}else g.declaration?(k=g.declaration.declarations||[],k=k.map(function(n){return[n.id.name,n.id.name]})):k=g.specifiers.map(function(n){return[n.exported.name,n.local.name]});f&&(a=[],d+=f);a=a.concat(ee.parse(d+k.map(function(n){var p=Wb(n,2);n=p[0];p=p[1];return"".concat(l,".").concat(n," = ").concat(p,
";\n")+(p!==n?"".concat(l,".").concat(p," = ").concat(p,";\n"):"")}).join("\n")))}"ExportAllDeclaration"===g.type&&(b++,a=a.concat(ee.parse("\n       import * as __captured".concat(b,"__ from ").concat(g.source.raw,";\n       Object.assign(").concat(l,", __captured").concat(b,"__);\n      "))));return c.concat(a)},[]);return e}function gr(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"__lvVarRecorder";"function"===typeof e&&(e=String(e));if(lively.FreezerRuntime)return e.split(h+
".").join("");"string"===typeof e&&e.endsWith(";")&&(e=e.slice(0,-1));var l="string"===typeof e?Rj.parseFunction(e):e;l=Rj.ReplaceVisitor.run(l,function(b){return"MemberExpression"===b.type&&"Identifier"===b.object.type&&b.object.name===h?b.property:b});return Rj.stringify(l)}function am(e){if("undefined"===typeof babel)return console.warn("[lively.freezer] Skipped async/await transpilation because babel not loaded."),e;Rj.ensureOptionalCatchBinding();Rj.ensureImportMeta();e=babel.transform(e,{sourceMap:void 0,
inputSourceMap:void 0,babelrc:!1,presets:[["es2015",{modules:!1}]],plugins:["transform-exponentiation-operator","transform-async-to-generator","syntax-object-rest-spread","transform-object-rest-spread"],code:!0,ast:!1}).code;e=e.replace(/\}\)\.call\(undefined\);$/,"}).call(this)");e.startsWith("(function")&&e.endsWith(");")&&(e=e.slice(1,-2));return e}function hw(e,h,l){return Rj.QueryReplaceManyVisitor.run("string"==typeof e?Rj.parse(e):e,"\n         // ExpressionStatement [\n              /:expression AssignmentExpression [\n                  /:left MemberExpression [\n                    /:property Identifier [ @name ]\n                  ]\n               && /:right CallExpression [\n                     (/:callee MemberExpression [\n                           /:property Identifier [ @name == 'component' ]\n                        && /:object Identifier [ @name == '".concat(l,
"' ]\n                       ])\n                     ||\n                     (/:arguments \"*\" [\n                       CallExpression [\n                        /:callee MemberExpression [\n                           /:property Identifier [ @name == 'component' ]\n                        && /:object Identifier [ @name == '").concat(l,"' ]\n                          ]\n                       ]\n                     ])\n                   ]\n                ]\n              ]"),function(b){b=b.expression;
return[b].concat(db(Rj.parse("".concat(Rj.stringify(b.left),"[Symbol.for('lively-module-meta')] = { module: \"").concat(h,'", export: "').concat(b.left.property.name,'"};')).body))})}function hr(e,h){e="string"==typeof e?Rj.parse(e):e;var l=Rj.topLevelDeclsAndRefs(e).varDecls;l=Rj.arr.compact(l.map(function(b){return b.declarations&&b.declarations[0]}));return Rj.QueryReplaceManyVisitor.run(e,"\n         // VariableDeclarator [\n              /:id Identifier [ @name ]\n               && /:init CallExpression [\n                   (/:callee Identifier [ @name == 'component'])\n                 ]\n              ]",
function(b){var c=l.includes(b),g=b.id.name,a=b.init.arguments.map(function(d){return Rj.stringify(d)}).join(",");return Rj.parse("const ".concat(g," = component.for(() => component(").concat(a,'), { module: "').concat(h,'", export: "').concat(g,'", range: { start: ').concat(b.start,", end: ").concat(b.end,"}}").concat(c?", "+g:"",")")).body[0].declarations})}function ir(e,h){e=Si.transform.transformSingleExpression(e);e=Si.parse(e,{withComments:!0});h=Si.processInlineCodeTransformOptions(e,h);var l=
h.declarationWrapperName&&h.declarationWrapperName.includes(System.baseURL)&&h.declarationWrapperName.split(System.baseURL)[1];l&&(e=Si.ensureComponentDescriptors(e,l));var b=Si.query.topLevelDeclsAndRefs(e);l=b.classDecls;var c=b.funcDecls;b=b.varDecls;var g={};h.hasOwnProperty("evalId")&&(g.evalId=h.evalId);h.sourceAccessorName&&(g.sourceAccessorName=h.sourceAccessorName);[].concat(db(l),db(c)).forEach(function(f){return f["x-lively-object-meta"]=Object.assign({},g,{start:f.start,end:f.end})});
b.forEach(function(f){return f.declarations.forEach(function(k){return k["x-lively-object-meta"]=Object.assign({},g,{start:k.start,end:k.end})})});e=Si.transform.objectSpreadTransform(e);!h.topLevelVarRecorder&&h.topLevelVarRecorderName&&(l=Si.getGlobal(),h.topLevelVarRecorder="GLOBAL"===h.topLevelVarRecorderName?Si.getGlobal():Si.Path(h.topLevelVarRecorderName).get(l));if(h.topLevelVarRecorder){l=(h.dontTransform||[]).concat(["arguments"]);c=h.recordGlobals?null:Si.arr.withoutAll(Object.keys(h.topLevelVarRecorder),
l);b=Si.id(h.varRecorderName||"__lvVarRecorder");if(h.declarationWrapperName||"function"===typeof h.declarationCallback){var a=h.declarationWrapperName||Si.defaultDeclarationWrapperName;h.declarationWrapper=Si.member(Si.id(h.varRecorderName||"__lvVarRecorder"),Si.literal(a),!0);h.declarationCallback&&(h.topLevelVarRecorder[a]=h.declarationCallback)}if(h.hasOwnProperty("transformES6Classes")?h.transformES6Classes:1)var d={currentModuleAccessor:h.currentModuleAccessor,classHolder:b,functionNode:Si.member(b,
Si.defaultClassToFunctionConverterName),declarationWrapper:h.declarationWrapper,evalId:h.evalId,sourceAccessorName:h.sourceAccessorName,transform:h.classTransform};e=Si.capturing.rewriteToCaptureTopLevelVariables(e,b,{es6ImportFuncId:h.es6ImportFuncId,es6ExportFuncId:h.es6ExportFuncId,ignoreUndeclaredExcept:c,exclude:l,declarationWrapper:h.declarationWrapper||void 0,classToFunction:d,evalId:h.evalId,sourceAccessorName:h.sourceAccessorName,keepTopLevelVarDecls:h.keepTopLevelVarDecls})}h.wrapInStartEndCall&&
(e=Si.transform.wrapInStartEndCall(e,{startFuncNode:h.startFuncNode,endFuncNode:h.endFuncNode}));d=Si.stringify(e);h.jsx&&(d=Si.es5Transpilation(d));h.sourceURL&&(d+="\n//# sourceURL="+h.sourceURL.replace(/\s/g,"_"));return d}function ns(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!h.topLevelVarRecorder)return e;if("function"===typeof h.declarationCallback||h.declarationWrapperName){var l=h.declarationWrapperName||Si.defaultDeclarationWrapperName;h.declarationWrapper=Si.member(Si.id(h.varRecorderName),
Si.literal(l),!0);h.declarationCallback&&(h.topLevelVarRecorder[l]=h.declarationCallback)}l=Si.parse(e);var b=(h.dontTransform||[]).concat(["arguments"]);h.recordGlobals?null:Si.arr.withoutAll(Object.keys(h.topLevelVarRecorder),b);h=Si.capturing.rewriteToRegisterModuleToCaptureSetters(l,Si.id(h.varRecorderName||"__lvVarRecorder"),Object.assign({exclude:b},h));return Si.stringify(h)}function jr(e,h,l){"function"===typeof h&&2===arguments.length&&(l=h,h=null);var b=new gj.EvalResult,c=!1,g=!1;h=gj._normalizeEvalOptions(h);
var a=gj.promise.deferred(),d=h.topLevelVarRecorder||gj.getGlobal(),f=e;h.wrapInStartEndCall&&(d[gj.startEvalFunctionName]&&console.warn(b.addWarning("startEvalFunctionName ".concat(gj.startEvalFunctionName," already exists in recorder!"))),d[gj.endEvalFunctionName]&&console.warn(b.addWarning("endEvalFunctionName ".concat(gj.endEvalFunctionName," already exists in recorder!"))),d[gj.startEvalFunctionName]=function(){if(c)console.warn(b.addWarning("onEvalStartCalled multiple times!"));else if(c=!0,
"function"===typeof h.onStartEval)h.onStartEval()},d[gj.endEvalFunctionName]=function(p,q){g?console.warn(b.addWarning("onEvalEndCalled multiple times!")):(g=!0,gj.finishEval(p,q,b,h,d,a,l))});try{e=gj.evalCodeTransform(e,h),h.header&&(e=h.header+e),h.footer&&(e+=h.footer),h.transpiler&&(e=h.transpiler(e,h.transpilerOptions))}catch(p){console.warn(b.addWarning("lively.vm evalCodeTransform not working: "+p))}try{"undefined"!==typeof $world&&$world.get("log")&&($world.get("log").textString=e);var k=
gj._eval.call(h.context,e,h.topLevelVarRecorder,h.originalSource||f)}catch(p){var n=p}if(h.wrapInStartEndCall){if(n&&!g)d[gj.endEvalFunctionName](n,void 0)}else gj.finishEval(n,n||k,b,h,d,a,l);return h.sync?b:a.promise}function eu(e,h){h=Object.assign(h||{},{sync:!0});return gj.runEval(e,h)}function kr(e,h,l){mj.getEnv(l).emitter.on(e,h);return h}function Hy(e,h,l){mj.getEnv(l).emitter.once(e,h);return h}function jo(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:Date.now(),b=3<arguments.length?arguments[3]:void 0;h=Object.assign({type:e,time:l},h);l=mj.getEnv(b);b=l.emitter;l=l.notifications;b.emit(e,h);b.isLogging&&mj.log(h);b.isRecording&&mj.record(l,h);return h}function os(e,h,l){mj.getEnv(l).emitter.removeListener(e,h);return h}function Iy(e,h){mj.getEnv(h).emitter.removeAllListeners(e)}function Jy(e){mj.getEnv(e).emitter.isRecording=!0}function Ky(e){mj.getEnv(e).emitter.isRecording=!1}function Ly(e){e=mj.getEnv(e).notifications;
e.splice(0,e.length)}function My(e){return mj.getEnv(e).notifications}function Ny(e){mj.getEnv(e).emitter.isLogging=!0}function iw(e){mj.getEnv(e).emitter.isLogging=!1}function jw(){jw=Cb(regeneratorRuntime.mark(function c(h,l,b){var g,a,d;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return g=Gj.parse(l),a=g.body,d=a.filter(function(k){return"ImportDeclaration"===k.type}),f.next=5,Promise.all(d.map(function(k){return h.normalize(k.source.value,b).then(function(n){k.source.value=
n;return h.get(n)||h["import"](n)})}))["catch"](function(k){console.error("Error ensuring imports: "+k.message);throw k;});case 5:return f.abrupt("return",Gj.stringify(g));case 6:case "end":return f.stop()}},c)}));return jw.apply(this,arguments)}function wq(e,h,l){l=Object.assign({targetModule:null,parentModule:null,es6Transpile:!0,transpiler:null,transpilerOptions:null,format:"esm"},l);e.debug&&console.log("[lively.module] runEval: ".concat(h.slice(0,100).replace(/\n/mg," "),"..."));var b=l,c=b.format,
g=b.targetModule;g=e.decanonicalize(g||"*scratch*",b.parentModule);l.targetModule=g;c&&((b=e.getConfig().meta[g])||(b={}),b[g]||(b[g]={}),b[g].format||(b[g].format=c,e.config(b)));c=e.get("@lively-env").moduleEnv(g);b=c.recorder;var a=c.recorderName,d=c.dontTransform,f=Gj.getEs6Transpiler(e,l,c),k="var _moduleExport = ".concat(a,"._moduleExport,\n")+"    _moduleImport = ".concat(a,"._moduleImport;\n");l=Object.assign({waitForPromise:!0,sync:!1,evalId:l.evalId||c.nextEvalId(),sourceAccessorName:(l.hasOwnProperty("embedOriginalCode")?
l.embedOriginalCode:1)?"__lvOriginalCode":void 0,originalSource:h},l,{header:k,recordGlobals:!0,dontTransform:d,varRecorderName:a,topLevelVarRecorder:b,sourceURL:l.sourceURL||l.targetModule,context:l.context||b,wrapInStartEndCall:!0,es6ExportFuncId:"_moduleExport",es6ImportFuncId:"_moduleImport",transpiler:f,declarationWrapperName:c.varDefinitionCallbackName,currentModuleAccessor:Gj.funcCall(Gj.member(Gj.funcCall(Gj.member(Gj.member("__lvVarRecorder","System"),"get"),Gj.literal("@lively-env")),"moduleEnv"),
Gj.literal(l.targetModule))});if(!l.sync&&!l.importsEnsured&&Gj.hasUnimportedImports(e,h,g))return Gj.ensureImportsAreImported(e,h,g)["catch"](function(n){return null}).then(function(n){return wq(e,n,Object.assign({},l,{importsEnsured:!0}))});if(!c.record()){if(!l.sync&&!l._moduleImported)return e["import"](g)["catch"](function(n){return null}).then(function(){return wq(e,h,Object.assign({},l,{_moduleImported:!0}))});c.ensureRecord()}if(l.es6Transpile&&l.transpiler instanceof Promise)if(l.sync||l._transpilerLoaded)console.warn("[lively.vm] sync eval requested but transpiler is not yet loaded, will continue without transpilation!"),
l.transpiler=null;else return l.transpiler["catch"](function(n){return console.error(n)}).then(function(n){return wq(e,h,Object.assign({},l,{transpiler:n,_transpilerLoaded:!0}))});e.debug&&console.log("[lively.module] runEval in module ".concat(g," started"));Gj.emit("lively.vm/doitrequest",{code:h,waitForPromise:l.waitForPromise,targetModule:l.targetModule},Date.now(),e);e.get("@lively-env").evaluationStart(g);g=Gj.vmRunEval(h,l);return l.sync?Gj.evalEnd(e,h,l,g):Promise.resolve(g).then(function(n){return Gj.evalEnd(e,
h,l,n)})}function ps(e,h){var l=h=Object.assign({format:"esm",System:null,targetModule:null},h),b=l.format,c=l.System;l=l.targetModule;c||"undefined"===typeof System||(c=System);return!c&&l?Promise.reject(Error("options to runEval have targetModule but cannot find system loader!")):l&&["esm","es6","register"].includes(b)?zm.esmEval.runEval(c,e,h):zm.globalEval.runEval(e,h)}function fu(e,h){return zm.globalEval.syncEval(e,h)}function kw(e){return pi.withSuperclasses(e).slice(1)}function qs(e){var h=
[];do h.push(e),e=e[pi.superclassSymbol];while(e&&e.name);return h.map(function(l){return l.name}).join("->")}function qc(e){for(var h=[];e;)h.push(e),e=e[pi.superclassSymbol];return h}function jd(e,h){do if(e===h)return!0;while(e=e[pi.superclassSymbol]);return!1}function $d(e,h){if(e.constructor===h&&e.__proto__===h.prototype)return e;e.constructor=h;e.__proto__=h.prototype;return e}function He(e){return e&&"function"===typeof e}function jf(e){var h=pi.RuntimeSourceDescriptor["for"](e),l=h.ast;h=
h.type;if("ClassDeclaration"!==h)throw Error("Expected class but got ".concat(h));return pi.Path("body.body").get(l).map(function(b){var c=b["static"],g=b.kind;b=b.key;b.type;var a=b.value;b=b.name||a;a=pi.isOverridden(e,b);var d=c?e:e.prototype;d="get"===g?d.__lookupGetter__(b):"set"===g?d.__lookupSetter__(b):d[b];return{"static":c,name:b,value:d,kind:g,owner:e,overridden:a}})}function Bf(e){return pi.runtimeNonStaticMembers(e).concat(pi.runtimeNonStaticMembers(e))}function vh(e){var h=pi.obj.getOwnPropertyDescriptors(e);
return pi.arr.withoutAll(Object.keys(h),["prototype","name","length","toString"]).map(function(l){var b=h[l],c="function"===typeof b.value?"method":"get"in b?"get":"set"in b?"set":"unknown";return{"static":!0,name:l,value:"method"===c?b.value:"get"===c?b.get:"set"===c?b.set:null,kind:c,owner:e}})}function ei(e){return pi.arr.uniq(pi.arr.without(pi.withSuperclasses(e),Object).flatMap(function(h){return pi.runtimeStaticClassMembers(h)}))}function kk(e){var h=Hj.propertiesAndSettingsInHierarchyOf(e),
l=h.properties;h=h.propertySettings;e[Hj.propertiesAndSettingsCacheSym]={properties:l,order:Hj.obj.sortKeysWithBeforeAndAfterConstraints(l),propertySettings:h,classHierarchy:Hj.getClassHierarchy(e)};l&&"object"===ad(l)?Hj.prepareClassForProperties(e,h,l):console.warn("Class ".concat(e.name," indicates it has managed properties but its ")+"properties accessor (".concat(Hj.defaultPropertiesKey,") does not return ")+"a valid property descriptor map")}function hl(e,h){h=h?"function"===typeof h?h:h.value?
h.value:Object:Object;var l=e&&e[xi.superclassSymbol];l&&l===h||(xi.ensureInitializeStub(h),e[xi.superclassSymbol]=h,xi.setPrototypeOf(e.prototype,h.prototype),h!==Object&&xi.setPrototypeOf(e,h));return h}function Ve(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},g=5<arguments.length?arguments[5]:void 0,a=6<arguments.length?arguments[6]:void 0,d=e.name,f=d&&
c.hasOwnProperty(d)&&c[d];c=f&&f[xi.superclassSymbol];f&&"function"===typeof f&&c||(f=e);xi.setSuperclass(f,h);xi.installMethods(f,l,b);f[xi.objMetaSymbol]=a;g&&(a=g["package"](),c=f[xi.moduleMetaSymbol],d=Date.now(),f[xi.moduleMetaSymbol]={"package":a?{name:a.name,version:a.version}:{},pathInPackage:a?g.pathInPackage():g.id,lastChange:c&&c.lastChange&&d<=c.lastChange?c.lastChange+1:d,lastSuperclassChange:0},h&&h.referencedAs&&(f.hasOwnProperty(xi.moduleSubscribeToToplevelChangesSym)&&g.unsubscribeFromToplevelDefinitionChanges(f[xi.moduleSubscribeToToplevelChangesSym]),
f[xi.moduleSubscribeToToplevelChangesSym]=g.subscribeToToplevelDefinitionChanges(function(k,n){if(k===h.referencedAs){k=n&&n[xi.moduleMetaSymbol];var p=f[xi.moduleMetaSymbol];if(k){if(k.lastChange===p.lastSuperclassChange)return;p.lastSuperclassChange=k.lastChange}xi.setSuperclass(f,n);xi.installMethods(f,l,b);xi.prepareClassForManagedPropertiesAfterCreation(f)}})));f.toString=function(){var k=String(this.prototype[xi.initializeSymbol]).match(xi.constructorArgMatcher),n=this[xi.superclassSymbol];
return"class ".concat(this.name," ").concat(n?"extends ".concat(n.name):""," {\n")+"  constructor".concat(k?k[0]:"()"," { /*...*/ }")+"\n}"};xi.prepareClassForManagedPropertiesAfterCreation(f);return f}function rs(e){e=new Df.Color(e);return{red:e.red()/255,green:e.green()/255,blue:e.blue()/255,alpha:e.alpha()}}function NI(e){return function(h,l,b,c){null==b&&(b=e);null==c&&(c=b);null==l&&(l=ek.unit(h));var g=ek.unit(h);if(g===l)return h;var a=ek.unitLess(h);"px"!==ek.unit(b)&&console.warn("Parameter fromContext must resolve to a value in pixel units.");
"px"!==ek.unit(c)&&console.warn("Parameter toContext must resolve to a value in pixel units.");if("px"!==g)if("em"===g)a=ek.unitLess(h)*ek.unitLess(b);else if("rem"===g)a=ek.unitLess(h)*ek.unitLess(e);else if("ex"===g)a=ek.unitLess(h)*ek.unitLess(b)*2;else return"ch"===g||"vw"===g||"vh"===g||"vmin"===g?console.warn(g+" units can't be reliably converted; Returning original value."):console.warn(g+" is an unknown or unsupported length unit; Returning original value."),h;b=a;if("px"!==l)if("em"===l)b=
a/ek.unitLess(c);else if("rem"===l)b=a/ek.unitLess(e);else if("ex"===l)b=a/ek.unitLess(c)/2;else return"ch"===l||"vw"===l||"vh"===l||"vmin"===l?console.warn(l+" units can't be reliably converted; Returning original value."):console.warn(l+" is an unknown or unsupported length unit; Returning original value."),h;return parseFloat(b.toFixed(5))+l}}function LB(e){return Number(ek.parseCssLength(e,"px").slice(0,-2))}function ko(e,h,l,b){if("number"===typeof e){var c=e;e=h;h=b}else c=e.x,e=e.y,l=h.x-c,
h=h.y-e;return new bg.Rectangle(c,e,l,h)}function wl(e,h){return new bg.Point(e,h)}function Mo(e){return e.constructor[Dk.classNameProp]||e.constructor.name}function gu(e){if(e&&e.constructor){var h=Dk.getClassName(e);if(h){if(e=e.constructor[Dk.moduleMetaInClassProp],"Object"!==h||e)return e&&(delete e.lastChange,delete e.lastSuperclassChange),{className:h,module:e}}else console.warn("Cannot serialize class info of anonymous class of instance ".concat(e))}}function ss(e){var h=e.module;if(h){var l=
h.pathInPackage;if(h["package"]&&h["package"].name&&"no group"!==h["package"].name){var b=System.decanonicalize(h["package"].name.replace(/\/*$/,"/"));l=Dk.string.joinPath(b,l)}b=System.get("@lively-env");if(h=b.moduleEnv(l)||b.moduleEnv(h.pathInPackage))return h.recorder[e.className];console.warn("Trying to deserialize instance of class ".concat(e.className," but the module ").concat(l," is not yet loaded"))}return System.global[e.className]}function xq(e){var h=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:function(y){return y},l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},b=new qi.ExpressionSerializer,c=l.isMorph?l.propertiesAndPropertySettings().order:[];c=c.length?c:qi.obj.keys(e);var g=fa(c),a;try{for(g.s();!(a=g.n()).done;){var d=a.value,f=e[d];if("_env"===d||"env"===d||"__connections__"===d||"__refs__"===d)return;qi.obj.isString(f)&&b.isSerializedExpression(f)&&(f=b.deserializeExpr(f));["borderColor","borderWidth","borderStyle","borderRadius"].includes(d)&&(f=xq(f,h));
f&&f._id&&(f=h(xq(f,h)));l[d]=f}}catch(y){g.e(y)}finally{g.f()}e.submorphs&&(l.submorphs=e.submorphs.map(function(y){return xq(y,h)}));if(l){b=fa(c.filter(function(y){return!!e[y]}));var k;try{for(b.s();!(k=b.n()).done;){var n=k.value;l[n]=l[n]}}catch(y){b.e(y)}finally{b.f()}}if(e.__refs__){k=fa(e.__refs__);var p;try{for(k.s();!(p=k.n()).done;){var q=Wb(p.value,2),r=q[1];qi.Path(q[0]).set(l,qi.Path(r).get(l))}}catch(y){k.e(y)}finally{k.f()}}if(e.__connections__){p=fa(e.__connections__);var u;try{for(p.s();!(u=
p.n()).done;){var x=u.value;qi.connect(qi.Path(x.pathToSource).get(l),x.sourceAttrName,qi.Path(x.pathToTarget).get(l),x.targetMethodName,Object.assign({},qi.obj.select(x,["garbageCollect","converterString","updaterString","varMapping"])))}}catch(y){p.e(y)}finally{p.f()}}return l}function OI(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:["top","left","right","bottom"],c=l.asExpression,g=l.exprSerializer,a=l.nestedExpressions,d={};if(1===qi.arr.uniqBy(Object.values(h).filter(function(n){return"function"!==
typeof n}),qi.obj.equals).length)d=qi.getExpression(e,h[b[0]],l);else{b=fa(b);var f;try{for(b.s();!(f=b.n()).done;){var k=f.value;d[k]=g.embedValue(h[k],c&&a)}}catch(n){b.e(n)}finally{b.f()}}return d}function Ep(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=h.dropMorphsWithNameOnly;l=void 0===l?!1:l;var b=h.keepFunctions;b=void 0===b?!0:b;var c=h.skipAttributes;c=void 0===c?[]:c;var g=h.keepConnections,a=void 0===g?!0:g;g=h.asExpression;g=void 0===g?!1:g;var d=h.exposeMasterRefs,
f=void 0===d?!1:d;d=h.root;var k=void 0===d?!0:d;d=h.path;var n=void 0===d?"":d;d=h.skipUnchangedFromMaster;var p=void 0===d?!1:d;d=h.skipUnchangedFromDefault;var q=void 0===d?!1:d;d=h.nestedExpressions;var r=void 0===d?{}:d;d=h.objToPath;d=void 0===d?new WeakMap:d;var u=h.objRefs;u=void 0===u?[]:u;var x=h.connections;x=void 0===x?[]:x;var y=h.exprSerializer,D=void 0===y?new Fp:y;y=h.masterInScope;var H=void 0===y?e.master:y;y=h.valueTransform;y=void 0===y?function(qd,La){return La}:y;h=h.onlyInclude;
var I={skipAttributes:c,dropMorphsWithNameOnly:l,skipUnchangedFromDefault:q,skipUnchangedFromMaster:p,root:!1,keepFunctions:b,asExpression:g,nestedExpressions:r,connections:x,objRefs:u,objToPath:d,keepConnections:a,valueTransform:y,exposeMasterRefs:f,masterInScope:e.master||H,exprSerializer:D,onlyInclude:h};if(d.has(e))return u.push([n,d.get(e)]),null;d.set(e,n);var N={};d.set(e,n);a&&e.attributeConnections&&x.push.apply(x,db(e.attributeConnections));var J;p&&H&&H.managesMorph(e)&&(J=H.auto.get(e.name)||
H.auto);e.isText&&""!==e.textString&&J&&J.textString!==e.textString&&(N.textAndAttributes=e.textAndAttributes.map(function(qd,La){return qd&&qd.isMorph?Ep(qd,Object.assign({},I,{path:n?n+".textAndAttributes."+La:"textAndAttributes."+La})):qd}));e.submorphs&&0<e.submorphs.length&&(N.submorphs=e.submorphs.map(function(qd,La){return Ep(qd,Object.assign({},I,{path:n?n+".submorphs."+La:"submorphs."+La}))}).filter(Boolean),0===N.submorphs.length&&delete N.submorphs);var sa;H&&(sa=H.propsToSerializeForMorph(e,
e.__only_serialize__));for(var ja in e.spec(q))if("name"===ja||!J||!qi.obj.equals(J[ja],e[ja]))if(p=y(ja,e[ja]),!p||"object"!==ad(p)||Array.isArray(p)||p.isMorph||d.set(p,n?n+"."+ja:ja),!(sa&&!sa.includes(ja)||"master"===ja&&f||"position"===ja&&qi.Path("owner.layout.renderViaCSS").get(e)||"submorphs"===ja||"type"===ja||e.isLabel&&"extent"===ja||c.includes(ja)))if("metadata"===ja&&qi.Path("commit.__serialize__").get(p))N[ja]=Object.assign({},p,{commit:qi.getExpression(ja+".commit",p.commit,I)});else if(["borderColor",
"borderWidth","borderStyle"].includes(ja))N[ja]=qi.serializeNestedProp(ja,p,I);else if("borderRadius"===ja)N[ja]=qi.serializeNestedProp(ja,p,I,["topLeft","topRight","bottomRight","bottomLeft"]);else if(p&&p.isMorph)N[ja]=Ep(p,Object.assign({},I,{path:n?n+"."+ja:ja}));else if(p&&p.__serialize__)J&&qi.getExpression(ja,p,Object.assign({},I,{asExpression:!1}))===qi.getExpression(ja,y(ja,J[ja]),Object.assign({},I,{asExpression:!1}))||(N[ja]=qi.getExpression(ja,p,I));else if(Array.isArray(p)){p=qi.getArrayExpression(ja,
p,n,I);if(J&&(q=function(qd,La){return"_rev"===qd?void 0:La},D=JSON.stringify(qi.getArrayExpression(ja,J[ja],n,I),q),JSON.stringify(p,q)===D))continue;N[ja]=p}else{if(p&&!qi.obj.isString(p)&&!qi.obj.isNumber(p)&&0<qi.properties.allOwnPropertiesOrFunctions(p).length)for(var Ha in p)p[Ha]&&p[Ha].isMorph&&(p[Ha]=Ep(p[Ha],Object.assign({},I,{path:n?n+"."+ja+"."+Ha:ja+"."+Ha})));N[ja]=p}e.isText&&delete N.textString;g||(N._id=e._id);if(a&&k){J=[];sa=fa(x);var Qa;try{for(sa.s();!(Qa=sa.n()).done;){var ec=
Qa.value,mc=ec.sourceAttrName,hc=ec.targetMethodName,Ua=ec.targetObj,xa=ec.updaterString,rc=ec.converterString,Lb=ec.garbageCollect,Ac=d.get(ec.sourceObj),Xb=d.get(Ua);"string"===typeof Ac&&"string"===typeof Xb&&J.push({pathToSource:Ac,pathToTarget:Xb,garbageCollect:Lb,updaterString:xa,converterString:rc,sourceAttrName:mc,targetMethodName:hc,varMapping:{properties:qi.properties}})}}catch(qd){sa.e(qd)}finally{sa.f()}g||(N.__connections__=J)}if(l&&qi.arr.isSubset(Object.keys(N),["type","name"])||h&&
!h.includes(e))return null;b?(Object.keys(e).forEach(function(qd){return"function"===typeof e[qd]&&!e[qd].isConnectionWrapper&&(N[qd]=e[qd])}),N.type=g?qi.getExpression("type",e.constructor,I):e.constructor.name):(N.styleSheets&&(N.styleSheets=[]),N.type=qi.getSerializableClassMeta(e));("Morph"===qi.getClassName(e)||c.includes("type"))&&delete N.type;if(g&&(Qa=function(){if(k){var qd="morph(".concat(qi.obj.inspect(N,{keySorter:function(me,ta){return"name"===me||"type"===me?-1:"submorphs"===me?1:0}}),
")");var La={"lively.morphic":["morph"]}}else if(f&&e.master){var Fd,na=e.master.auto[Symbol["for"]("lively-module-meta")],Va=na["export"];na=na.module;N&&(qd="part(".concat(Va,", ").concat(qi.obj.inspect(N,{keySorter:function(me,ta){return"name"===me||"type"===me||"tooltip"===me?-1:0}}),")"));La=(Fd={},dd(Fd,na,Va),dd(Fd,"lively.morphic",["part"]),Fd)}if(qd){for(var yd in r)qd=qd.replace('"'+yd+'"',r[yd].__expr__),Object.entries(r[yd].bindings||{}).forEach(function(me){var ta=Wb(me,2);me=ta[0];ta=
ta[1];La[me]=La[me]?qi.arr.uniq([].concat(db(La[me]),db(ta))):ta});return f&&e.master&&!k?(Fd=qi.string.newUUID(),r[Fd]={__expr__:qd,bindings:La},{v:Fd}):{v:{__expr__:qd,bindings:La}}}}(),"object"===ad(Qa)))return Qa.v;if(qi.obj.isEmpty(N))return null;k&&(N.__refs__=u);return N}function lr(e,h,l,b,c){"function"!==typeof l||"undefined"!==typeof b&&"object"!==ad(b)||(c=b,b="call",c||(c={}),c.updater||(c.updater=function(f,k){return f(null,k)}));var g=e.getConnectionPoints&&e.getConnectionPoints()||
e.connections,a=(g=g&&g[h])&&g.map&&lively.morphic&&lively.morphic.GeometryConnection||g&&g.connectionClassType&&lively.Class.forName(g.connectionClassType)||nj.AttributeConnection;"function"===typeof c&&(console.warn("Directly passing a converter function to connect() is deprecated! Use spec object instead!"),c={converter:c});g&&(c=nj.obj.merge(g,c));a=new a(e,h,l,b,c);var d=a.getExistingConnection();if(d)return d.resetSpec(),d.init(e,h,l,b,c),d;c=a.connect();if("function"===typeof e.onConnect)e.onConnect(h,
l,b);g&&g.updateOnConnect&&a.update(e[h]);return c}function lw(e,h,l,b,c){e=nj.connect(e,h,l,b,c);e._isEpiConnection=!0;return e}function hu(e,h,l,b){"function"!==typeof l||"undefined"!==typeof b&&"object"!==ad(b)||(b="call");if(e.attributeConnections){var c=fa(e.attributeConnections.slice()),g;try{for(c.s();!(g=c.n()).done;){var a=g.value;a.getSourceAttrName()===h&&a.getTargetObj()===l&&a.getTargetMethodName()===b&&a.disconnect()}}catch(d){c.e(d)}finally{c.f()}if("function"===typeof e.onDisconnect)e.onDisconnect(h,
l,b)}}function mw(e){for(var h;e.attributeConnections&&(h=e.attributeConnections[0]);)h.disconnect()}function iu(e,h,l,b,c){"function"!==typeof l||"undefined"!==typeof b&&"object"!==ad(b)?c=c||{}:(c=b,b="call",c=c||{},c.updater||(c.updater=function(g,a){return g(null,a)}));c=c||{};c.removeAfterUpdate=!0;return nj.connect(e,h,l,b,c)}function Ln(e,h,l){var b=e.attributeConnections;if(b){e=e[h];for(var c=0,g=b.length;c<g;c++){var a=b[c];a.getSourceAttrName()===h&&a.update(l,e)}}}function MB(e,h,l,b){if(e[h])l[b](e[h]);
else nj.connect(e,h,l,b,{removeAfterUpdate:!0})}function NB(e,h,l,b){for(var c={key:h.pop(),whenDefined:function(g){nj.callWhenNotNull(g,this.key,l,b)}};0<h.length;)c={key:h.pop(),next:c,whenDefined:function(g){nj.callWhenNotNull(g,this.key,this.next,"whenDefined")}};c.whenDefined(e)}function ju(e,h){var l=!1;h||"function"!==typeof e||(h=e,l=!0);if(l){e=nj.AttributeConnection.prototype;e.isActive||(e.isActive=0);e.isActive++;try{var b=h()}finally{e.isActive--,0>=e.isActive&&delete e.isActive}}else{l=
e.sourceObj;var c=e.sourceAttribute,g=e.targetObj,a=e.targetAttribute;e=g&&a?function(d){return d.getSourceAttrName()===c&&g===d.getTargetObj()&&a===d.getTargetMethodName()}:function(d){return d.getSourceAttrName()===c};(e=l.attributeConnections&&l.attributeConnections.filter(e))&&nj.arr.invoke(e,"activate");try{b=h()}finally{e&&nj.arr.invoke(e,"deactivate")}}return b}function OB(e){if(null==e)return!0;e=ad(e);return"boolean"===e||"number"===e||"string"===e?!0:!1}function PB(e){var h={},l;for(l in e)h[l]=
ji.referencesOfId(e,l);return h}function QB(e){return e&&e.__ref__}function PI(e,h){return ji.referencesOfId(dd({},e.id,e.currentSnapshot),e.id,h)}function RB(e,h,l){e=e[h];h=[];for(var b in e.props){var c=e.props[b]||{},g=c.value;c=c.verbatim;Array.isArray(g)?h.push.apply(h,db(ji.referencesInArray(g,l&&b))):!c&&g&&ji.isReference(g)&&h.push(l?{key:b,id:g.id}:g.id)}if(e.hasOwnProperty("entries"))for(b=0;b<e.entries.length;b++)g=e.entries[b],Array.isArray(g)?h.push.apply(h,db(ji.referencesInArray(g,
l&&g))):g&&ji.isReference(g)&&h.push(l?{key:g,id:g.id}:g.id);return h}function QI(e,h){for(var l=[],b=0;b<e.length;b++){var c=e[b];Array.isArray(c)?l.push.apply(l,db(QI(c,h?h+"["+b+"]":void 0))):c&&ji.isReference(c)&&l.push(h?{key:h+"["+b+"]",id:c.id}:c.id)}return l}function SB(e,h){return(e[h][ji.ClassHelper.classMetaForSerializationProp]||{}).module||{}}function TB(e,h){return ji.referencesOfId(e,h).map(function(l){return l+":"+ji.classNameOfId(e,l)})}function UB(e,h){return(e[h][ji.ClassHelper.classMetaForSerializationProp]||
{}).className||"Object"}function VB(e,h,l){function b(y,D,H){if(!n)if(50<H)alert(""+f);else if(y===D)f.push(y),n=f.slice();else if(!k[y]){k[y]=!0;f.push(y);y=ji.referencesOfId(e,y);for(var I=0;I<y.length;I++)b(y[I],D,H+1);f.pop()}}var c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},g=void 0===c.showPath?!0:c.showPath,a=c.hasOwnProperty("showClassNames")?c.showClassNames:!g,d=c.hasOwnProperty("showPropNames")?c.showPropNames:g;c=c.hasOwnProperty("hideId")?c.hideId:g;var f=[],k={},n;b(h,
l,0);if(!n)return null;if(!a&&!d)return n;for(var p=[],q=0;q<n.length-1;q++){var r=n[q],u=n[q+1],x=[];c||x.push(r);a&&x.push((e[r][ji.ClassHelper.classMetaForSerializationProp]||{}).className||"Object");d&&(r=ji.referencesOfId(e,r,!0).find(function(y){return y.id===u})||{key:"????"},x.push(r.key));p.push(x.join(":"))}g&&(p="."+p.join("."));return p}function WB(e,h,l){l=l.replace(/^\./,"");l=l.replace(/\[([^\]])+\]/g,".$1");l=ji.Path(l).parts();var b=e[h];for(h=0;;){if(1E3<h++)throw"stop";var c=l.shift();
if(!c)break;if(!b.props||!b.props[c])throw Error("Property ".concat(c," not found for ref ").concat(JSON.stringify(b)));b=b.props[c].value;if(!b)throw Error("Property ".concat(c," has no value"));for(;Array.isArray(b);)b=b[l.shift()];if(!b||!b.__ref__)return b;b=e[b.id]}return b}function XB(e,h,l,b){l=l.replace(/^\./,"");l=l.replace(/\[([^\]])+\]/g,".$1");l=ji.Path(l).parts();e=e[h];h=l.shift();if(!e.props||!e.props[h])throw Error("Property ".concat(h," not found for ref ").concat(JSON.stringify(e)));
var c=(e.props[h]||{}).value;if(!c)throw Error("Property ".concat(h," has no value"));if(l.length){var g=ji.Path(l).get(c);ji.Path(l).set(c,b(e,h,g))}else e.props[h].value=b(e,h,c)}function ts(e,h){var l=ji.arr.withoutAll(Object.keys(h),e),b=l.filter(function(g){if("AttributeConnection"===ji.classNameOfId(h,g))return h[g].props.garbageCollect.value}),c=ji.referenceGraph(ji.obj.dissoc(Object.assign({},h),b));e.forEach(function(g){g=ji.graph.subgraphReachableBy(c,g);for(var a=l.length;a--;)l[a]in g&&
l.splice(a,1)});l.forEach(function(g){return delete h[g]});return l}function YB(e){var h=function(b){if("AttributeConnection"===ji.classNameOfId(e,b)){var c=e[b];if(e[ji.Path("props.targetObj.value.id").get(c)])return"continue";if(c=e[ji.Path("props.sourceObj.value.id").get(c)])c.props.attributeConnections.value=c.props.attributeConnections.value.filter(function(g){return g.id!=b});delete e[b]}},l;for(l in e)h(l)}function ZB(e){var h=function(b){if("AttributeConnection"===ji.classNameOfId(e,b)){var c=
e[b],g=e[ji.Path("props.sourceObj.value.id").get(c)];c.props._isEpiConnection&&(g.props.attributeConnections.value=g.props.attributeConnections.value.filter(function(a){return a.id!=b}),delete e[b])}},l;for(l in e)h(l)}function us(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ji.defaultExprSerializer;e.snapshot&&(e=e.snapshot);for(var l=[],b=0,c=Object.keys(e);b<c.length;b++){var g=e[c[b]];if(g.__expr__){var a;(g=h.requiredModulesOf__expr__(g.__expr__))&&(a=l).push.apply(a,db(g))}else{var d=
ji.ClassHelper.sourceModulesInObjRef(g);if(d&&d.length){var f;(f=l).push.apply(f,db(d.map(function(q){return(q["package"]&&q["package"].name||"")+"/"+q.pathInPackage})))}if(g.props)for(var k in g.props){d=g.props[k].value;if("string"===typeof d){var n,p=h.requiredModulesOf__expr__(d);p&&(n=l).push.apply(n,db(p))}ji.obj.isArray(d)&&d.forEach(function(q){if("string"===typeof q){var r;(q=h.requiredModulesOf__expr__(q))&&(r=l).push.apply(r,db(q))}})}}}return l=ji.arr.uniq(l)}function $B(e){throw Error("Node.js process "+
e+" is not supported by JSPM core outside of Node.js");}function eW(){ku&&vs&&(ku=!1,vs.length?yq=vs.concat(yq):Oy=-1,yq.length&&RI())}function RI(){if(!ku){var e=setTimeout(eW,0);ku=!0;for(var h=yq.length;h;){vs=yq;for(yq=[];++Oy<h;)vs&&vs[Oy].run();Oy=-1;h=yq.length}vs=null;ku=!1;clearTimeout(e)}}function SI(e,h){this.fun=e;this.array=h}function Rm(){}function aC(e){var h=Math.floor(.001*(Date.now()-mr.now())),l=.001*mr.now();h=Math.floor(l)+h;l=Math.floor(l%1*1E9);e&&(h-=e[0],l-=e[1],0>l&&(h--,
l+=1E9));return[h,l]}function nr(){return Pl}function Py(){if(TI)return UI;TI=!0;return UI={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}}function Qy(){if(VI)return WI;VI=!0;var e=Pl;return WI="object"===ad(e)&&e.env&&e.env.NODE_DEBUG&&/\bsemver\b/i.test(e.env.NODE_DEBUG)?function(){for(var h,l=arguments.length,b=Array(l),c=0;c<l;c++)b[c]=arguments[c];return(h=console).error.apply(h,["SEMVER"].concat(b))}:function(){}}
function lu(){if(XI)return Gp;XI=!0;var e=Py().MAX_SAFE_COMPONENT_LENGTH,h=Qy();Gp=Gp={};var l=Gp.re=[],b=Gp.src=[],c=Gp.t={},g=0,a=function(d,f,k){var n=g++;h(d,n,f);c[d]=n;b[n]=f;l[n]=new RegExp(f,k?"g":void 0)};a("NUMERICIDENTIFIER","0|[1-9]\\d*");a("NUMERICIDENTIFIERLOOSE","[0-9]+");a("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");a("MAINVERSION","(".concat(b[c.NUMERICIDENTIFIER],")\\.")+"(".concat(b[c.NUMERICIDENTIFIER],")\\.")+"(".concat(b[c.NUMERICIDENTIFIER],")"));a("MAINVERSIONLOOSE",
"(".concat(b[c.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(b[c.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(b[c.NUMERICIDENTIFIERLOOSE],")"));a("PRERELEASEIDENTIFIER","(?:".concat(b[c.NUMERICIDENTIFIER],"|").concat(b[c.NONNUMERICIDENTIFIER],")"));a("PRERELEASEIDENTIFIERLOOSE","(?:".concat(b[c.NUMERICIDENTIFIERLOOSE],"|").concat(b[c.NONNUMERICIDENTIFIER],")"));a("PRERELEASE","(?:-(".concat(b[c.PRERELEASEIDENTIFIER],"(?:\\.").concat(b[c.PRERELEASEIDENTIFIER],")*))"));a("PRERELEASELOOSE","(?:-?(".concat(b[c.PRERELEASEIDENTIFIERLOOSE],
"(?:\\.").concat(b[c.PRERELEASEIDENTIFIERLOOSE],")*))"));a("BUILDIDENTIFIER","[0-9A-Za-z-]+");a("BUILD","(?:\\+(".concat(b[c.BUILDIDENTIFIER],"(?:\\.").concat(b[c.BUILDIDENTIFIER],")*))"));a("FULLPLAIN","v?".concat(b[c.MAINVERSION]).concat(b[c.PRERELEASE],"?").concat(b[c.BUILD],"?"));a("FULL","^".concat(b[c.FULLPLAIN],"$"));a("LOOSEPLAIN","[v=\\s]*".concat(b[c.MAINVERSIONLOOSE]).concat(b[c.PRERELEASELOOSE],"?").concat(b[c.BUILD],"?"));a("LOOSE","^".concat(b[c.LOOSEPLAIN],"$"));a("GTLT","((?:<|>)?=?)");
a("XRANGEIDENTIFIERLOOSE","".concat(b[c.NUMERICIDENTIFIERLOOSE],"|x|X|\\*"));a("XRANGEIDENTIFIER","".concat(b[c.NUMERICIDENTIFIER],"|x|X|\\*"));a("XRANGEPLAIN","[v=\\s]*(".concat(b[c.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(b[c.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(b[c.XRANGEIDENTIFIER],")")+"(?:".concat(b[c.PRERELEASE],")?").concat(b[c.BUILD],"?")+")?)?");a("XRANGEPLAINLOOSE","[v=\\s]*(".concat(b[c.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(b[c.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(b[c.XRANGEIDENTIFIERLOOSE],
")")+"(?:".concat(b[c.PRERELEASELOOSE],")?").concat(b[c.BUILD],"?")+")?)?");a("XRANGE","^".concat(b[c.GTLT],"\\s*").concat(b[c.XRANGEPLAIN],"$"));a("XRANGELOOSE","^".concat(b[c.GTLT],"\\s*").concat(b[c.XRANGEPLAINLOOSE],"$"));a("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(e,"})")+"(?:\\.(\\d{1,".concat(e,"}))?")+"(?:\\.(\\d{1,".concat(e,"}))?")+"(?:$|[^\\d])");a("COERCERTL",b[c.COERCE],!0);a("LONETILDE","(?:~>?)");a("TILDETRIM","(\\s*)".concat(b[c.LONETILDE],"\\s+"),!0);Gp.tildeTrimReplace="$1~";
a("TILDE","^".concat(b[c.LONETILDE]).concat(b[c.XRANGEPLAIN],"$"));a("TILDELOOSE","^".concat(b[c.LONETILDE]).concat(b[c.XRANGEPLAINLOOSE],"$"));a("LONECARET","(?:\\^)");a("CARETTRIM","(\\s*)".concat(b[c.LONECARET],"\\s+"),!0);Gp.caretTrimReplace="$1^";a("CARET","^".concat(b[c.LONECARET]).concat(b[c.XRANGEPLAIN],"$"));a("CARETLOOSE","^".concat(b[c.LONECARET]).concat(b[c.XRANGEPLAINLOOSE],"$"));a("COMPARATORLOOSE","^".concat(b[c.GTLT],"\\s*(").concat(b[c.LOOSEPLAIN],")$|^$"));a("COMPARATOR","^".concat(b[c.GTLT],
"\\s*(").concat(b[c.FULLPLAIN],")$|^$"));a("COMPARATORTRIM","(\\s*)".concat(b[c.GTLT],"\\s*(").concat(b[c.LOOSEPLAIN],"|").concat(b[c.XRANGEPLAIN],")"),!0);Gp.comparatorTrimReplace="$1$2$3";a("HYPHENRANGE","^\\s*(".concat(b[c.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(b[c.XRANGEPLAIN],")")+"\\s*$");a("HYPHENRANGELOOSE","^\\s*(".concat(b[c.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(b[c.XRANGEPLAINLOOSE],")")+"\\s*$");a("STAR","(<|>)?=?\\s*\\*");a("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");a("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$");
return Gp}function Ry(){if(YI)return ZI;YI=!0;var e=["includePrerelease","loose","rtl"];return ZI=function(h){return h?"object"!==ad(h)?{loose:!0}:e.filter(function(l){return h[l]}).reduce(function(l,b){l[b]=!0;return l},{}):{}}}function bC(){if($I)return aJ;$I=!0;var e=/^[0-9]+$/,h=function(l,b){var c=e.test(l),g=e.test(b);c&&g&&(l=+l,b=+b);return l===b?0:c&&!g?-1:g&&!c?1:l<b?-1:1};return aJ={compareIdentifiers:h,rcompareIdentifiers:function(l,b){return h(b,l)}}}function cn(){if(bJ)return cJ;bJ=
!0;var e=Qy(),h=Py(),l=h.MAX_LENGTH,b=h.MAX_SAFE_INTEGER;h=lu();var c=h.re,g=h.t,a=Ry(),d=bC().compareIdentifiers;return cJ=function(){function f(k,n){Sd(this,f);n=a(n);if(k instanceof f){if(k.loose===!!n.loose&&k.includePrerelease===!!n.includePrerelease)return k;k=k.version}else if("string"!==typeof k)throw new TypeError("Invalid Version: ".concat(k));if(k.length>l)throw new TypeError("version is longer than ".concat(l," characters"));e("SemVer",k,n);this.options=n;this.loose=!!n.loose;this.includePrerelease=
!!n.includePrerelease;n=k.trim().match(n.loose?c[g.LOOSE]:c[g.FULL]);if(!n)throw new TypeError("Invalid Version: ".concat(k));this.raw=k;this.major=+n[1];this.minor=+n[2];this.patch=+n[3];if(this.major>b||0>this.major)throw new TypeError("Invalid major version");if(this.minor>b||0>this.minor)throw new TypeError("Invalid minor version");if(this.patch>b||0>this.patch)throw new TypeError("Invalid patch version");this.prerelease=n[4]?n[4].split(".").map(function(p){if(/^[0-9]+$/.test(p)){var q=+p;if(0<=
q&&q<b)return q}return p}):[];this.build=n[5]?n[5].split("."):[];this.format()}uc(f,[{key:"format",value:function(){this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch);this.prerelease.length&&(this.version+="-".concat(this.prerelease.join(".")));return this.version}},{key:"toString",value:function(){return this.version}},{key:"compare",value:function(k){e("SemVer.compare",this.version,this.options,k);if(!(k instanceof f)){if("string"===typeof k&&k===this.version)return 0;
k=new f(k,this.options)}return k.version===this.version?0:this.compareMain(k)||this.comparePre(k)}},{key:"compareMain",value:function(k){k instanceof f||(k=new f(k,this.options));return d(this.major,k.major)||d(this.minor,k.minor)||d(this.patch,k.patch)}},{key:"comparePre",value:function(k){k instanceof f||(k=new f(k,this.options));if(this.prerelease.length&&!k.prerelease.length)return-1;if(!this.prerelease.length&&k.prerelease.length)return 1;if(!this.prerelease.length&&!k.prerelease.length)return 0;
var n=0;do{var p=this.prerelease[n],q=k.prerelease[n];e("prerelease compare",n,p,q);if(void 0===p&&void 0===q)return 0;if(void 0===q)return 1;if(void 0===p)return-1;if(p!==q)return d(p,q)}while(++n)}},{key:"compareBuild",value:function(k){k instanceof f||(k=new f(k,this.options));var n=0;do{var p=this.build[n],q=k.build[n];e("prerelease compare",n,p,q);if(void 0===p&&void 0===q)return 0;if(void 0===q)return 1;if(void 0===p)return-1;if(p!==q)return d(p,q)}while(++n)}},{key:"inc",value:function(k,n){switch(k){case "premajor":this.minor=
this.patch=this.prerelease.length=0;this.major++;this.inc("pre",n);break;case "preminor":this.patch=this.prerelease.length=0;this.minor++;this.inc("pre",n);break;case "prepatch":this.prerelease.length=0;this.inc("patch",n);this.inc("pre",n);break;case "prerelease":0===this.prerelease.length&&this.inc("patch",n);this.inc("pre",n);break;case "major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++;this.patch=this.minor=0;this.prerelease=[];break;case "minor":0===this.patch&&
0!==this.prerelease.length||this.minor++;this.patch=0;this.prerelease=[];break;case "patch":0===this.prerelease.length&&this.patch++;this.prerelease=[];break;case "pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(k=this.prerelease.length;0<=--k;)"number"===typeof this.prerelease[k]&&(this.prerelease[k]++,k=-2);-1===k&&this.prerelease.push(0)}n&&(0===d(this.prerelease[0],n)?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw Error("invalid increment argument: ".concat(k));
}this.format();this.raw=this.version;return this}}]);return f}()}function mu(){if(dJ)return eJ;dJ=!0;var e=Py().MAX_LENGTH,h=lu(),l=h.re,b=h.t,c=cn(),g=Ry();return eJ=function(a,d){d=g(d);if(a instanceof c)return a;if("string"!==typeof a||a.length>e||!(d.loose?l[b.LOOSE]:l[b.FULL]).test(a))return null;try{return new c(a,d)}catch(f){return null}}}function fW(){if(fJ)return gJ;fJ=!0;var e=mu();return gJ=function(h,l){return(h=e(h,l))?h.version:null}}function gW(){if(hJ)return iJ;hJ=!0;var e=mu();return iJ=
function(h,l){return(h=e(h.trim().replace(/^[=v]+/,""),l))?h.version:null}}function hW(){if(jJ)return kJ;jJ=!0;var e=cn();return kJ=function(h,l,b,c){"string"===typeof b&&(c=b,b=void 0);try{return(new e(h instanceof e?h.version:h,b)).inc(l,c).version}catch(g){return null}}}function No(){if(lJ)return mJ;lJ=!0;var e=cn();return mJ=function(h,l,b){return(new e(h,b)).compare(new e(l,b))}}function cC(){if(nJ)return oJ;nJ=!0;var e=No();return oJ=function(h,l,b){return 0===e(h,l,b)}}function iW(){if(pJ)return qJ;
pJ=!0;var e=cn();return qJ=function(h,l){return(new e(h,l)).major}}function jW(){if(rJ)return sJ;rJ=!0;var e=cn();return sJ=function(h,l){return(new e(h,l)).minor}}function kW(){if(tJ)return uJ;tJ=!0;var e=mu();return uJ=function(h,l){return(h=e(h,l))&&h.prerelease.length?h.prerelease:null}}function lW(){if(vJ)return wJ;vJ=!0;var e=No();return wJ=function(h,l,b){return e(l,h,b)}}function dC(){if(xJ)return yJ;xJ=!0;var e=cn();return yJ=function(h,l,b){h=new e(h,b);l=new e(l,b);return h.compare(l)||
h.compareBuild(l)}}function mW(){if(zJ)return AJ;zJ=!0;var e=dC();return AJ=function(h,l){return h.sort(function(b,c){return e(c,b,l)})}}function Sy(){if(BJ)return CJ;BJ=!0;var e=No();return CJ=function(h,l,b){return 0<e(h,l,b)}}function eC(){if(DJ)return EJ;DJ=!0;var e=No();return EJ=function(h,l,b){return 0>e(h,l,b)}}function fC(){if(FJ)return GJ;FJ=!0;var e=No();return GJ=function(h,l,b){return 0<=e(h,l,b)}}function HJ(){if(IJ)return JJ;IJ=!0;var e=No();return JJ=function(h,l,b){return 0!==e(h,
l,b)}}function gC(){if(KJ)return LJ;KJ=!0;var e=No();return LJ=function(h,l,b){return 0>=e(h,l,b)}}function MJ(){if(NJ)return OJ;NJ=!0;var e=cC(),h=HJ(),l=Sy(),b=fC(),c=eC(),g=gC();return OJ=function(a,d,f,k){switch(d){case "===":return"object"===ad(a)&&(a=a.version),"object"===ad(f)&&(f=f.version),a===f;case "!==":return"object"===ad(a)&&(a=a.version),"object"===ad(f)&&(f=f.version),a!==f;case "":case "=":case "==":return e(a,f,k);case "!=":return h(a,f,k);case ">":return l(a,f,k);case ">=":return b(a,
f,k);case "<":return c(a,f,k);case "<=":return g(a,f,k);default:throw new TypeError("Invalid operator: ".concat(d));}}}function nW(){if(PJ)return QJ;PJ=!0;var e=cn(),h=mu(),l=lu(),b=l.re,c=l.t;return QJ=function(g,a){if(g instanceof e)return g;"number"===typeof g&&(g=String(g));if("string"!==typeof g)return null;a=a||{};var d=null;if(a.rtl){for(var f;(f=b[c.COERCERTL].exec(g))&&(!d||d.index+d[0].length!==g.length);)d&&f.index+f[0].length===d.index+d[0].length||(d=f),b[c.COERCERTL].lastIndex=f.index+
f[1].length+f[2].length;b[c.COERCERTL].lastIndex=-1}else d=g.match(b[c.COERCE]);return null===d?null:h("".concat(d[2],".").concat(d[3]||"0",".").concat(d[4]||"0"),a)}}function wk(e){var h=this;h instanceof wk||(h=new wk);h.tail=null;h.head=null;h.length=0;if(e&&"function"===typeof e.forEach)e.forEach(function(c){h.push(c)});else if(0<arguments.length)for(var l=0,b=arguments.length;l<b;l++)h.push(arguments[l]);return h}function ws(e,h,l,b){if(!(this instanceof ws))return new ws(e,h,l,b);this.list=
b;this.value=e;h?(h.next=this,this.prev=h):this.prev=null;l?(l.prev=this,this.next=l):this.next=null}function Oo(){if(RJ)return hC;RJ=!0;hC=function(){function N(J,sa){var ja=this;Sd(this,N);sa=h(sa);if(J instanceof N)return J.loose===!!sa.loose&&J.includePrerelease===!!sa.includePrerelease?J:new N(J.raw,sa);if(J instanceof l)return this.raw=J.value,this.set=[[J]],this.format(),this;this.options=sa;this.loose=!!sa.loose;this.includePrerelease=!!sa.includePrerelease;this.raw=J;this.set=J.split("||").map(function(ec){return ja.parseRange(ec.trim())}).filter(function(ec){return ec.length});
if(!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(J));if(1<this.set.length)if(J=this.set[0],this.set=this.set.filter(function(ec){return"<0.0.0-0"!==ec[0].value}),0===this.set.length)this.set=[J];else if(1<this.set.length){J=fa(this.set);var Ha;try{for(J.s();!(Ha=J.n()).done;){var Qa=Ha.value;if(1===Qa.length&&""===Qa[0].value){this.set=[Qa];break}}}catch(ec){J.e(ec)}finally{J.f()}}this.format()}uc(N,[{key:"format",value:function(){return this.range=this.set.map(function(J){return J.join(" ").trim()}).join("||").trim()}},
{key:"toString",value:function(){return this.range}},{key:"parseRange",value:function(J){var sa=this;J=J.trim();var ja=Object.keys(this.options).join(",");ja="parseRange:".concat(ja,":").concat(J);var Ha=e.get(ja);if(Ha)return Ha;Ha=this.options.loose;J=J.replace(Ha?a[d.HYPHENRANGELOOSE]:a[d.HYPHENRANGE],I(this.options.includePrerelease));b("hyphen replace",J);J=J.replace(a[d.COMPARATORTRIM],f);b("comparator trim",J);J=J.replace(a[d.TILDETRIM],k);J=J.replace(a[d.CARETTRIM],n);J=J.split(/\s+/).join(" ");
var Qa=J.split(" ").map(function(hc){var Ua=hc;hc=sa.options;b("comp",Ua,hc);Ua=x(Ua,hc);b("caret",Ua);Ua=r(Ua,hc);b("tildes",Ua);Ua=D(Ua,hc);b("xrange",Ua);b("replaceStars",Ua,hc);Ua=Ua.trim().replace(a[d.STAR],"");b("stars",Ua);return Ua}).join(" ").split(/\s+/).map(function(hc){var Ua=sa.options;b("replaceGTE0",hc,Ua);return hc.trim().replace(a[Ua.includePrerelease?d.GTE0PRE:d.GTE0],"")});Ha&&(Qa=Qa.filter(function(hc){b("loose invalid filter",hc,sa.options);return!!hc.match(a[d.COMPARATORLOOSE])}));
b("range list",Qa);J=new Map;Ha=Qa.map(function(hc){return new l(hc,sa.options)});Ha=fa(Ha);var ec;try{for(Ha.s();!(ec=Ha.n()).done;){var mc=ec.value;if("<0.0.0-0"===mc.value)return[mc];J.set(mc.value,mc)}}catch(hc){Ha.e(hc)}finally{Ha.f()}if(1<J.size&&J.has(""))J["delete"]("");ec=db(J.values());e.set(ja,ec);return ec}},{key:"intersects",value:function(J,sa){if(!(J instanceof N))throw new TypeError("a Range is required");return this.set.some(function(ja){return p(ja,sa)&&J.set.some(function(Ha){return p(Ha,
sa)&&ja.every(function(Qa){return Ha.every(function(ec){return Qa.intersects(ec,sa)})})})})}},{key:"test",value:function(J){if(!J)return!1;if("string"===typeof J)try{J=new c(J,this.options)}catch(mc){return!1}for(var sa=0;sa<this.set.length;sa++){a:{var ja=this.set[sa];for(var Ha=J,Qa=this.options,ec=0;ec<ja.length;ec++)if(!ja[ec].test(Ha)){ja=!1;break a}if(Ha.prerelease.length&&!Qa.includePrerelease){for(Qa=0;Qa<ja.length;Qa++)if(b(ja[Qa].semver),ja[Qa].semver!==l.ANY&&0<ja[Qa].semver.prerelease.length&&
(ec=ja[Qa].semver,ec.major===Ha.major&&ec.minor===Ha.minor&&ec.patch===Ha.patch)){ja=!0;break a}ja=!1}else ja=!0}if(ja)return!0}return!1}}]);return N}();var e=new oW({max:1E3}),h=Ry(),l=Ty(),b=Qy(),c=cn(),g=lu(),a=g.re,d=g.t,f=g.comparatorTrimReplace,k=g.tildeTrimReplace,n=g.caretTrimReplace,p=function(N,J){var sa=!0;N=N.slice();for(var ja=N.pop();sa&&N.length;)sa=N.every(function(Ha){return ja.intersects(Ha,J)}),ja=N.pop();return sa},q=function(N){return!N||"x"===N.toLowerCase()||"*"===N},r=function(N,
J){return N.trim().split(/\s+/).map(function(sa){return u(sa,J)}).join(" ")},u=function(N,J){return N.replace(J.loose?a[d.TILDELOOSE]:a[d.TILDE],function(sa,ja,Ha,Qa,ec){b("tilde",N,sa,ja,Ha,Qa,ec);q(ja)?sa="":q(Ha)?sa=">=".concat(ja,".0.0 <").concat(+ja+1,".0.0-0"):q(Qa)?sa=">=".concat(ja,".").concat(Ha,".0 <").concat(ja,".").concat(+Ha+1,".0-0"):ec?(b("replaceTilde pr",ec),sa=">=".concat(ja,".").concat(Ha,".").concat(Qa,"-").concat(ec," <").concat(ja,".").concat(+Ha+1,".0-0")):sa=">=".concat(ja,
".").concat(Ha,".").concat(Qa," <").concat(ja,".").concat(+Ha+1,".0-0");b("tilde return",sa);return sa})},x=function(N,J){return N.trim().split(/\s+/).map(function(sa){return y(sa,J)}).join(" ")},y=function(N,J){b("caret",N,J);var sa=J.includePrerelease?"-0":"";return N.replace(J.loose?a[d.CARETLOOSE]:a[d.CARET],function(ja,Ha,Qa,ec,mc){b("caret",N,ja,Ha,Qa,ec,mc);q(Ha)?ja="":q(Qa)?ja=">=".concat(Ha,".0.0").concat(sa," <").concat(+Ha+1,".0.0-0"):q(ec)?ja="0"===Ha?">=".concat(Ha,".").concat(Qa,".0").concat(sa,
" <").concat(Ha,".").concat(+Qa+1,".0-0"):">=".concat(Ha,".").concat(Qa,".0").concat(sa," <").concat(+Ha+1,".0.0-0"):mc?(b("replaceCaret pr",mc),ja="0"===Ha?"0"===Qa?">=".concat(Ha,".").concat(Qa,".").concat(ec,"-").concat(mc," <").concat(Ha,".").concat(Qa,".").concat(+ec+1,"-0"):">=".concat(Ha,".").concat(Qa,".").concat(ec,"-").concat(mc," <").concat(Ha,".").concat(+Qa+1,".0-0"):">=".concat(Ha,".").concat(Qa,".").concat(ec,"-").concat(mc," <").concat(+Ha+1,".0.0-0")):(b("no pr"),ja="0"===Ha?"0"===
Qa?">=".concat(Ha,".").concat(Qa,".").concat(ec).concat(sa," <").concat(Ha,".").concat(Qa,".").concat(+ec+1,"-0"):">=".concat(Ha,".").concat(Qa,".").concat(ec).concat(sa," <").concat(Ha,".").concat(+Qa+1,".0-0"):">=".concat(Ha,".").concat(Qa,".").concat(ec," <").concat(+Ha+1,".0.0-0"));b("caret return",ja);return ja})},D=function(N,J){b("replaceXRanges",N,J);return N.split(/\s+/).map(function(sa){return H(sa,J)}).join(" ")},H=function(N,J){N=N.trim();return N.replace(J.loose?a[d.XRANGELOOSE]:a[d.XRANGE],
function(sa,ja,Ha,Qa,ec,mc){b("xRange",N,sa,ja,Ha,Qa,ec,mc);var hc=q(Ha),Ua=hc||q(Qa);ec=Ua||q(ec);"="===ja&&ec&&(ja="");mc=J.includePrerelease?"-0":"";hc?sa=">"===ja||"<"===ja?"<0.0.0-0":"*":ja&&ec?(Ua&&(Qa=0),ec=0,">"===ja?(ja=">=",Ua?(Ha=+Ha+1,Qa=0):Qa=+Qa+1,ec=0):"<="===ja&&(ja="<",Ua?Ha=+Ha+1:Qa=+Qa+1),"<"===ja&&(mc="-0"),sa="".concat(ja+Ha,".").concat(Qa,".").concat(ec).concat(mc)):Ua?sa=">=".concat(Ha,".0.0").concat(mc," <").concat(+Ha+1,".0.0-0"):ec&&(sa=">=".concat(Ha,".").concat(Qa,".0").concat(mc,
" <").concat(Ha,".").concat(+Qa+1,".0-0"));b("xRange return",sa);return sa})},I=function(N){return function(J,sa,ja,Ha,Qa,ec,mc,hc,Ua,xa,rc,Lb,Ac){sa=q(ja)?"":q(Ha)?">=".concat(ja,".0.0").concat(N?"-0":""):q(Qa)?">=".concat(ja,".").concat(Ha,".0").concat(N?"-0":""):ec?">=".concat(sa):">=".concat(sa).concat(N?"-0":"");hc=q(Ua)?"":q(xa)?"<".concat(+Ua+1,".0.0-0"):q(rc)?"<".concat(Ua,".").concat(+xa+1,".0-0"):Lb?"<=".concat(Ua,".").concat(xa,".").concat(rc,"-").concat(Lb):N?"<".concat(Ua,".").concat(xa,
".").concat(+rc+1,"-0"):"<=".concat(hc);return"".concat(sa," ").concat(hc).trim()}};return hC}function Ty(){if(SJ)return iC;SJ=!0;var e=Symbol("SemVer ANY");iC=function(){function k(n,p){Sd(this,k);p=h(p);if(n instanceof k){if(n.loose===!!p.loose)return n;n=n.value}a("comparator",n,p);this.options=p;this.loose=!!p.loose;this.parse(n);this.value=this.semver===e?"":this.operator+this.semver.version;a("comp",this)}uc(k,null,[{key:"ANY",get:function(){return e}}]);uc(k,[{key:"parse",value:function(n){var p=
n.match(this.options.loose?b[c.COMPARATORLOOSE]:b[c.COMPARATOR]);if(!p)throw new TypeError("Invalid comparator: ".concat(n));this.operator=void 0!==p[1]?p[1]:"";"="===this.operator&&(this.operator="");this.semver=p[2]?new d(p[2],this.options.loose):e}},{key:"toString",value:function(){return this.value}},{key:"test",value:function(n){a("Comparator.test",n,this.options.loose);if(this.semver===e||n===e)return!0;if("string"===typeof n)try{n=new d(n,this.options)}catch(p){return!1}return g(n,this.operator,
this.semver,this.options)}},{key:"intersects",value:function(n,p){if(!(n instanceof k))throw new TypeError("a Comparator is required");p&&"object"===ad(p)||(p={loose:!!p,includePrerelease:!1});if(""===this.operator)return""===this.value?!0:(new f(n.value,p)).test(this.value);if(""===n.operator)return""===n.value?!0:(new f(this.value,p)).test(n.semver);var q=(">="===this.operator||">"===this.operator)&&(">="===n.operator||">"===n.operator),r=("<="===this.operator||"<"===this.operator)&&("<="===n.operator||
"<"===n.operator),u=this.semver.version===n.semver.version,x=(">="===this.operator||"<="===this.operator)&&(">="===n.operator||"<="===n.operator),y=g(this.semver,"<",n.semver,p)&&(">="===this.operator||">"===this.operator)&&("<="===n.operator||"<"===n.operator);n=g(this.semver,">",n.semver,p)&&("<="===this.operator||"<"===this.operator)&&(">="===n.operator||">"===n.operator);return q||r||u&&x||y||n}}]);return k}();var h=Ry(),l=lu(),b=l.re,c=l.t,g=MJ(),a=Qy(),d=cn(),f=Oo();return iC}function Uy(){if(TJ)return UJ;
TJ=!0;var e=Oo();return UJ=function(h,l,b){try{l=new e(l,b)}catch(c){return!1}return l.test(h)}}function pW(){if(VJ)return WJ;VJ=!0;var e=cn(),h=Oo();return WJ=function(l,b,c){var g=null,a=null,d=null;try{d=new h(b,c)}catch(f){return null}l.forEach(function(f){!d.test(f)||g&&-1!==a.compare(f)||(g=f,a=new e(g,c))});return g}}function qW(){if(XJ)return YJ;XJ=!0;var e=Oo();return YJ=function(h,l){try{return(new e(h,l)).range||"*"}catch(b){return null}}}function rW(){if(ZJ)return $J;ZJ=!0;var e=Oo();
return $J=function(h,l,b){h=new e(h,b);l=new e(l,b);return h.intersects(l)}}function sW(){if(aK)return bK;aK=!0;var e=mu(),h=cC();return bK=function(l,b){if(h(l,b))return null;l=e(l);b=e(b);var c=l.prerelease.length||b.prerelease.length,g=c?"pre":"",a;for(a in l)if(("major"===a||"minor"===a||"patch"===a)&&l[a]!==b[a])return g+a;return c?"prerelease":""}}function tW(){if(cK)return dK;cK=!0;var e=cn();return dK=function(h,l){return(new e(h,l)).patch}}function uW(){if(eK)return fK;eK=!0;var e=No();return fK=
function(h,l){return e(h,l,!0)}}function vW(){if(gK)return hK;gK=!0;var e=dC();return hK=function(h,l){return h.sort(function(b,c){return e(b,c,l)})}}function wW(){if(iK)return jK;iK=!0;var e=Oo();return jK=function(h,l){return(new e(h,l)).set.map(function(b){return b.map(function(c){return c.value}).join(" ").trim().split(" ")})}}function xW(){if(kK)return lK;kK=!0;var e=cn(),h=Oo();return lK=function(l,b,c){var g=null,a=null,d=null;try{d=new h(b,c)}catch(f){return null}l.forEach(function(f){!d.test(f)||
g&&1!==a.compare(f)||(g=f,a=new e(g,c))});return g}}function yW(){if(mK)return nK;mK=!0;var e=cn(),h=Oo(),l=Sy();return nK=function(b,c){b=new h(b,c);var g=new e("0.0.0");if(b.test(g))return g;g=new e("0.0.0-0");if(b.test(g))return g;g=null;c=function(d){var f=null;b.set[d].forEach(function(k){var n=new e(k.semver.version);switch(k.operator){case ">":0===n.prerelease.length?n.patch++:n.prerelease.push(0),n.raw=n.format();case "":case ">=":if(!f||l(n,f))f=n;break;case "<":case "<=":break;default:throw Error("Unexpected operation: ".concat(k.operator));
}});!f||g&&!l(g,f)||(g=f)};for(var a=0;a<b.set.length;++a)c(a);return g&&b.test(g)?g:null}}function jC(){if(oK)return pK;oK=!0;var e=cn(),h=Ty(),l=h.ANY,b=Oo(),c=Uy(),g=Sy(),a=eC(),d=gC(),f=fC();return pK=function(k,n,p,q){k=new e(k,q);n=new b(n,q);switch(p){case ">":var r=g;var u=d;var x=a;var y=">";var D=">=";break;case "<":r=a;u=f;x=g;y="<";D="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(c(k,n,q))return!1;p=function(N){var J=null,sa=null;n.set[N].forEach(function(ja){ja.semver===
l&&(ja=new h(">=0.0.0"));J=J||ja;sa=sa||ja;r(ja.semver,J.semver,q)?J=ja:x(ja.semver,sa.semver,q)&&(sa=ja)});if(J.operator===y||J.operator===D||(!sa.operator||sa.operator===y)&&u(k,sa.semver)||sa.operator===D&&x(k,sa.semver))return{v:!1}};for(var H=0;H<n.set.length;++H){var I=p(H);if("object"===ad(I))return I.v}return!0}}function zW(){if(qK)return rK;qK=!0;var e=jC();return rK=function(h,l,b){return e(h,l,">",b)}}function AW(){if(sK)return tK;sK=!0;var e=jC();return tK=function(h,l,b){return e(h,l,
"<",b)}}function BW(){if(uK)return vK;uK=!0;var e=Uy(),h=No();return vK=function(l,b,c){var g=[],a=null,d=null;l=l.sort(function(p,q){return h(p,q,c)});var f=fa(l),k;try{for(f.s();!(k=f.n()).done;){var n=k.value;e(n,b,c)?(d=n,a||(a=n)):(d&&g.push([a,d]),a=d=null)}}catch(p){f.e(p)}finally{f.f()}a&&g.push([a,null]);a=[];for(d=0;d<g.length;d++)n=Wb(g[d],2),k=n[0],n=n[1],k===n?a.push(k):n||k!==l[0]?n?k===l[0]?a.push("<=".concat(n)):a.push("".concat(k," - ").concat(n)):a.push(">=".concat(k)):a.push("*");
g=a.join(" || ");return g.length<("string"===typeof b.raw?b.raw:String(b)).length?g:b}}function CW(){if(wK)return xK;wK=!0;var e=Oo(),h=Ty(),l=h.ANY,b=Uy(),c=No(),g=function(f,k,n){if(f===k)return!0;if(1===f.length&&f[0].semver===l){if(1===k.length&&k[0].semver===l)return!0;f=n.includePrerelease?[new h(">=0.0.0-0")]:[new h(">=0.0.0")]}if(1===k.length&&k[0].semver===l){if(n.includePrerelease)return!0;k=[new h(">=0.0.0")]}var p=new Set,q,r;f=fa(f);var u;try{for(f.s();!(u=f.n()).done;){var x=u.value;
">"===x.operator||">="===x.operator?q=a(q,x,n):"<"===x.operator||"<="===x.operator?r=d(r,x,n):p.add(x.semver)}}catch(mc){f.e(mc)}finally{f.f()}if(1<p.size)return null;if(q&&r){var y=c(q.semver,r.semver,n);if(0<y||0===y&&(">="!==q.operator||"<="!==r.operator))return null}p=fa(p);var D;try{for(p.s();!(D=p.n()).done;){var H=D.value;if(q&&!b(H,String(q),n)||r&&!b(H,String(r),n))return null;var I=fa(k),N;try{for(I.s();!(N=I.n()).done;)if(!b(H,String(N.value),n))return!1}catch(mc){I.e(mc)}finally{I.f()}return!0}}catch(mc){p.e(mc)}finally{p.f()}D=
r&&!n.includePrerelease&&r.semver.prerelease.length?r.semver:!1;H=q&&!n.includePrerelease&&q.semver.prerelease.length?q.semver:!1;D&&1===D.prerelease.length&&"<"===r.operator&&0===D.prerelease[0]&&(D=!1);k=fa(k);var J;try{for(k.s();!(J=k.n()).done;){var sa=J.value;var ja=ja||">"===sa.operator||">="===sa.operator;var Ha=Ha||"<"===sa.operator||"<="===sa.operator;if(q)if(H&&sa.semver.prerelease&&sa.semver.prerelease.length&&sa.semver.major===H.major&&sa.semver.minor===H.minor&&sa.semver.patch===H.patch&&
(H=!1),">"===sa.operator||">="===sa.operator){var Qa=a(q,sa,n);if(Qa===sa&&Qa!==q)return!1}else if(">="===q.operator&&!b(q.semver,String(sa),n))return!1;if(r)if(D&&sa.semver.prerelease&&sa.semver.prerelease.length&&sa.semver.major===D.major&&sa.semver.minor===D.minor&&sa.semver.patch===D.patch&&(D=!1),"<"===sa.operator||"<="===sa.operator){var ec=d(r,sa,n);if(ec===sa&&ec!==r)return!1}else if("<="===r.operator&&!b(r.semver,String(sa),n))return!1;if(!sa.operator&&(r||q)&&0!==y)return!1}}catch(mc){k.e(mc)}finally{k.f()}return q&&
Ha&&!r&&0!==y||r&&ja&&!q&&0!==y||H||D?!1:!0},a=function(f,k,n){if(!f)return k;n=c(f.semver,k.semver,n);return 0<n?f:0>n?k:">"===k.operator&&">="===f.operator?k:f},d=function(f,k,n){if(!f)return k;n=c(f.semver,k.semver,n);return 0>n?f:0<n?k:"<"===k.operator&&"<="===f.operator?k:f};return xK=function(f,k){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(f===k)return!0;f=new e(f,n);k=new e(k,n);var p=!1,q=fa(f.set),r;try{a:for(q.s();!(r=q.n()).done;){var u=r.value,x=fa(k.set),y;try{for(x.s();!(y=
x.n()).done;){var D=g(u,y.value,n);p=p||null!==D;if(D)continue a}}catch(H){x.e(H)}finally{x.f()}if(p)return!1}}catch(H){q.e(H)}finally{q.f()}return!0}}function kC(e){e=Object.assign({plugins:Mi.allPlugins,reinitializeIds:!1,skipMigrations:!0},e);if(e.reinitializeIds&&"function"!==typeof e.reinitializeIds)throw Error("serializer option 'reinitializeIds' needs to be a function(id, ref) => id");return e}function nw(e,h){h=Mi.normalizeOptions(h);var l=h.objPool||new Mi.ObjectPool(h);h=">="+Mi.serializerVersion.replace(Mi.majorAndMinorVersionRe,
"");e=l.snapshotObject(e);Mi.removeUnreachableObjects([e.id],e.snapshot);Mi.clearDanglingConnections(e.snapshot);Mi.removeEpiConnections(e.snapshot);e.requiredVersion=h;return e}function Vy(e,h){h=Mi.normalizeOptions(h);var l=e.requiredVersion;l&&!Mi.semver.satisfies(Mi.serializerVersion,l)&&console.warn("[lively.serializer deserialization] snapshot requires version "+"".concat(l," but serializer has incompatible version ")+"".concat(Mi.serializerVersion,". Deserialization might fail...!"));return(h.objPool||
new Mi.ObjectPool(h)).resolveFromSnapshotAndId(e)}function Wy(e,h,l){function b(){var d=Mi.deserialize(e,l);Mi.runMigrations(g,"objectConverter",e,c);return d}l=Mi.normalizeOptions(l);h.length&&(l.skipMigrations=!1);var c=l.objPool||(l.objPool=new Mi.ObjectPool(l));h=Mi.normalizeMigrations(h);var g=h.after,a;Mi.runMigrations(h.before,"snapshotConverter",e,c);"function"===typeof l.onDeserializationStart&&(a=l.onDeserializationStart(e,l));return a instanceof Promise?a.then(b):b()}function lC(e,h){return Mi.deserialize(Mi.serialize(e,
h),h)}function DW(e){return"[object Array]"===EW.call(e)}function lo(e,h,l){(this||mC).type=Number(e);(this||mC).vNode=h;(this||mC).patch=l}function yK(e,h){var l=e.vnode;l||(l=e.vnode=e.render(h));if(!(FW(l)||GW(l)||HW(l)))throw Error("thunk did not return a valid node");return l}function zK(e,h){var l;for(l in e){if(!(l in h)){var b=b||{};b[l]=void 0}var c=e[l],g=h[l];if(c!==g)if(AK(c)&&AK(g))if(BK(g)!==BK(c))b=b||{},b[l]=g;else if(IW(g))b=b||{},b[l]=g;else{if(c=zK(c,g))b=b||{},b[l]=c}else b=b||
{},b[l]=g}for(var a in h)a in e||(b=b||{},b[a]=h[a]);return b}function BK(e){if(Object.getPrototypeOf)return Object.getPrototypeOf(e);if(e.__proto__)return e.__proto__;if(e.constructor)return e.constructor.prototype}function CK(e,h){var l={a:e};DK(e,h,l,0);return l}function DK(e,h,l,b){if(e!==h){var c=l[b],g=!1;if(Xy(e)||Xy(h))nC(e,h,l,b);else if(null==h)Yy(e)||(oC(e,l,b),pC(e,l,b),c=l[b]),c=Po(c,new ql(ql.REMOVE,e,h));else if(xs(h))if(xs(e))if(e.tagName===h.tagName&&e.namespace===h.namespace&&e.key===
h.key){var a=JW(e.properties,h.properties);a&&(c=Po(c,new ql(ql.PROPS,e,a)));a=b;var d=e.children;h=h.children;var f=EK(h),k=f.keys,n=f.free;if(n.length===h.length)h={children:h,moves:null};else{f=EK(d);var p=f.keys;if(f.free.length===d.length)h={children:h,moves:null};else{f=[];for(var q=0,r=n.length,u=0,x=0;x<d.length;x++){var y=d[x];y.key?k.hasOwnProperty(y.key)?(y=k[y.key],f.push(h[y])):(u++,f.push(null)):q<r?(y=n[q++],f.push(h[y])):(u++,f.push(null))}n=q>=n.length?h.length:n[q];for(q=0;q<h.length;q++)r=
h[q],r.key?p.hasOwnProperty(r.key)||f.push(r):q>=n&&f.push(r);p=f.slice();n=0;q=[];r=[];for(y=0;y<h.length;){var D=h[y];for(x=p[n];null===x&&p.length;)q.push(Zy(p,n,null)),x=p[n];x&&x.key===D.key?(n++,y++):D.key?(x&&x.key?k[x.key]!==y+1?(q.push(Zy(p,n,x.key)),(x=p[n])&&x.key===D.key?n++:r.push({key:D.key,to:y})):r.push({key:D.key,to:y}):r.push({key:D.key,to:y}),y++):x&&x.key&&q.push(Zy(p,n,x.key))}for(;n<p.length;)x=p[n],q.push(Zy(p,n,x&&x.key));h=q.length!==u||r.length?{children:f,moves:{removes:q,
inserts:r}}:{children:f,moves:null}}}k=h.children;f=d.length;u=k.length;f=f>u?f:u;for(u=0;u<f;u++)p=d[u],n=k[u],a+=1,p?DK(p,n,l,a):n&&(c=Po(c,new ql(ql.INSERT,null,n))),xs(p)&&p.count&&(a+=p.count);h.moves&&(c=Po(c,new ql(ql.ORDER,e,h.moves)))}else c=Po(c,new ql(ql.VNODE,e,h)),g=!0;else c=Po(c,new ql(ql.VNODE,e,h)),g=!0;else FK(h)?FK(e)?e.text!==h.text&&(c=Po(c,new ql(ql.VTEXT,e,h))):(c=Po(c,new ql(ql.VTEXT,e,h)),g=!0):Yy(h)&&(Yy(e)||(g=!0),c=Po(c,new ql(ql.WIDGET,e,h)));c&&(l[b]=c);g&&(oC(e,l,b),
pC(e,l,b))}}function pC(e,h,l){if(Yy(e))"function"===typeof e.destroy&&(h[l]=Po(h[l],new ql(ql.REMOVE,e,null)));else if(xs(e)&&(e.hasWidgets||e.hasThunks)){e=e.children;for(var b=e.length,c=0;c<b;c++){var g=e[c];l+=1;pC(g,h,l);xs(g)&&g.count&&(l+=g.count)}}else Xy(e)&&nC(e,null,h,l)}function nC(e,h,l,b){e=KW(e,h);e=CK(e.a,e.b);a:{for(c in e)if("a"!==c){var c=!0;break a}c=!1}c&&(l[b]=new ql(ql.THUNK,null,e))}function oC(e,h,l){if(xs(e)){if(e.hooks){var b=h[l],c=ql.PROPS,g=e.hooks,a={},d;for(d in g)a[d]=
void 0;h[l]=Po(b,new ql(c,e,a))}if(e.descendantHooks||e.hasThunks)for(e=e.children,b=e.length,c=0;c<b;c++)g=e[c],l+=1,oC(g,h,l),xs(g)&&g.count&&(l+=g.count)}else Xy(e)&&nC(e,null,h,l)}function Zy(e,h,l){e.splice(h,1);return{from:h,key:l}}function EK(e){for(var h={},l=[],b=e.length,c=0;c<b;c++){var g=e[c];g.key?h[g.key]=c:l.push(c)}return{keys:h,free:l}}function Po(e,h){return e?(LW(e)?e.push(h):e=[e,h],e):h}function GK(e,h,l,b){if(b)if(b=b[h],HK(b))b.unhook&&b.unhook(e,h,l);else if("attributes"===
h)for(var c in b)e.removeAttribute(c);else if("style"===h)for(var g in b)e.style[g]="";else e[h]="string"===typeof b?"":null}function IK(e){if(Object.getPrototypeOf)return Object.getPrototypeOf(e);if(e.__proto__)return e.__proto__;if(e.constructor)return e.constructor.prototype}function JK(e,h){var l=h?h.document||KK:KK,b=h?h.warn:null;e=MW(e).a;if(NW(e))return e.init();if(OW(e))return l.createTextNode(e.text);if(!PW(e))return b&&b("Item is not a valid virtual dom node",e),null;l=null===e.namespace?
l.createElement(e.tagName):l.createElementNS(e.namespace,e.tagName);QW(l,e.properties);e=e.children;for(b=0;b<e.length;b++){var c=JK(e[b],h);c&&l.appendChild(c)}return l}function LK(e,h,l,b,c){b=b||{};if(e){MK(l,c,c)&&(b[c]=e);var g=h.children;if(g){e=e.childNodes;for(var a=0;a<h.children.length;a++){c+=1;var d=g[a]||RW,f=c+(d.count||0);MK(l,c,f)&&LK(e[a],d,l,b,c);c=f}}}return b}function MK(e,h,l){if(0===e.length)return!1;for(var b=0,c=e.length-1,g,a;b<=c;){g=(c+b)/2>>0;a=e[g];if(b===c)return a>=
h&&a<=l;if(a<h)b=g+1;else if(a>l)c=g-1;else return!0}return!1}function SW(e,h){return e>h?1:-1}function NK(e,h){"function"===typeof h.destroy&&TW(h)&&h.destroy(e)}function OK(e,h,l){l=l||{};l.patch=l.patch&&l.patch!==OK?l.patch:UW;l.render=l.render||VW;return l.patch(e,h,l)}function UW(e,h,l){var b=[];for(c in h)"a"!==c&&b.push(Number(c));if(0===b.length)return e;var c=WW(e,h.a,b);var g=e.ownerDocument;l.document||g===XW||(l.document=g);for(g=0;g<b.length;g++){var a=b[g];var d=c[a],f=h[a],k=l;if(d)if(YW(f))for(var n=
0;n<f.length;n++)a=PK(f[n],d,k),d===e&&(e=a);else a=PK(f,d,k),d===e&&(e=a)}return e}function qC(e,h,l,b,c){(this||Hp).tagName=e;(this||Hp).properties=h||ZW;(this||Hp).children=l||$W;(this||Hp).key=null!=b?String(b):void 0;(this||Hp).namespace="string"===typeof c?c:null;e=l&&l.length||0;b=0;var g=c=!1,a=!1,d;for(k in h)if(h.hasOwnProperty(k)){var f=h[k];aX(f)&&f.unhook&&(d||(d={}),d[k]=f)}for(h=0;h<e;h++){var k=l[h];bX(k)?(b+=k.count||0,!c&&k.hasWidgets&&(c=!0),!g&&k.hasThunks&&(g=!0),a||!k.hooks&&
!k.descendantHooks||(a=!0)):!c&&cX(k)?"function"===typeof k.destroy&&(c=!0):!g&&dX(k)&&(g=!0)}(this||Hp).count=e+b;(this||Hp).hasWidgets=c;(this||Hp).hasThunks=g;(this||Hp).hooks=d;(this||Hp).descendantHooks=a}function rC(e){(this||eX).text=String(e)}function $y(e){if(!(this instanceof $y))return new $y(e);this.value=e}function ow(e){if(!(this instanceof ow))return new ow(e);this.value=e}function QK(e,h,l,b){if("string"===typeof e)h.push(new RK(e));else if("number"===typeof e)h.push(new RK(String(e)));
else if(SK(e))h.push(e);else if(TK(e))for(var c=0;c<e.length;c++)QK(e[c],h,l,b);else if(null!==e&&void 0!==e)throw h={tagName:l,properties:b},l=Error(),l.type="virtual-hyperscript.unexpected.virtual-element",l.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+UK(e)+".\nThe parent vnode is:\n"+UK(h),l.foreignObject=e,l.parentVnode=h,l;}function SK(e){return fX(e)||gX(e)||hX(e)||iX(e)}function UK(e){try{return JSON.stringify(e,null,"    ")}catch(h){return String(e)}}
function sC(e,h){if(3===e.nodeType)return new VK(e.nodeValue);if(1===e.nodeType||9===e.nodeType){var l="http://www.w3.org/1999/xhtml"!==e.namespaceURI?e.namespaceURI:null,b=h&&e.getAttribute(h)?e.getAttribute(h):null,c=e.tagName;var g,a={};if(e.hasAttributes()){if(e.namespaceURI&&"http://www.w3.org/1999/xhtml"!==e.namespaceURI)var d=e.namespaceURI;for(var f=0;f<e.attributes.length;f++){if("style"==e.attributes[f].name){var k=e.style;var n={};for(g=0;g<k.length;++g){var p=k.item(g);n[p]=String(k[p]);
-1<n[p].indexOf("url")&&(n[p]=n[p].replace(/"/g,""))}k="style";p=g=void 0}else d?(g=e.attributes[f],k=g.name,n=g.value,g=jX[g.name]||"",p=void 0):(g=void 0,n=e.attributes[f],k=WK[n.name]?WK[n.name]:n.name,0===k.indexOf("data-")||0===k.indexOf("aria-")?(n=n.value,g=!0):n=n.value,p=g||!1,g=void 0);g?a[k]={namespace:g,value:n}:p?(a.attributes||(a.attributes={}),a.attributes[k]=n):a[k]=n}}d=[];for(f=0;f<e.childNodes.length;f++)d.push(sC(e.childNodes[f],h));return new kX(c,a,d,b,l)}return new VK("")}function az(e){var h=
{};Ij.addFill(e,h);Ij.addTransform(e,h);Ij.addTransformOrigin(e,h);Ij.addDisplay(e,h);Ij.addExtentStyle(e,h);Ij.addBorder(e,h);Ij.addBorderRadius(e,h);Ij.addShadowStyle(e,h);e.grayscale&&(h.filter="".concat(h.filter||""," grayscale(").concat(100*e.grayscale,"%)"));e.blur&&(h.filter="".concat(h.filter||""," blur(").concat(e.blur,"px)"));null!=e.opacity&&(h.opacity=e.opacity);e.draggable&&!e.isWorld&&(h["touch-action"]="none");return h}function tC(e){return(e.renderOnGPU||e.dropShadow&&!e.dropShadow.fast||
0<e.grayscale)&&!Ij.Path("owner.layout.renderViaCSS").get(e)}function XK(e,h){var l=e.position,b=e.origin,c=e.scale,g=e.rotation,a=e.flipped,d=e.tilted,f=e.perspective,k=e.owner,n=l.x-b.x-(e._skipWrapping&&k?k.borderWidthLeft:0);l=l.y-b.y-(e._skipWrapping&&k?k.borderWidthTop:0);b=Ij.canBePromotedToCompositionLayer(e);n=e.renderOnGPU?n:Math.round(n);l=e.renderOnGPU?l:Math.round(l);b&&(h.willChange="transform");k&&k.isText&&!Ij.Path("layout.renderViaCSS").get(k)||b?h.transform="translate(".concat(n,
"px, ").concat(l,"px)"):(h.transform="",h.top="".concat(l,"px"),h.left="".concat(n,"px"));h.transform+=" rotate(".concat(g.toFixed(2),"rad) scale(").concat(c.toFixed(5),",").concat(c.toFixed(5),")");f&&(h.perspective="".concat(f,"px"));a&&(h.transform+=" rotateY(".concat(180*a,"deg)"));d&&(h.transform+=" rotateX(".concat(180*d,"deg)"))}function uC(e,h){var l=e.width,b=e.height;e.borderWidth;h.width=l||1;h.height=b||1;h.viewBox=[0,0,l||1,b||1].join(" ");return h}function pw(e){var h="";if(0<e.length){var l=
e[0];var b=l.position;var c=b.y;b=b.x;h+="M ".concat(b," ").concat(c," ")}for(var g=1;g<e.length-1;g++){var a=e[g],d=a.position,f=d.x;d=d.y;var k=a.isSmooth,n=a.controlPoints,p=n.previous;n.next;h=k?h+"C ".concat(b+l.controlPoints.next.x," ").concat(c+l.controlPoints.next.y," ").concat(f+p.x," ").concat(d+p.y," ").concat(f," ").concat(d," "):h+"L ".concat(f," ").concat(d," ");l=a;b=f;c=d}0<e.length&&(a=e[e.length-1].position,g=a.x,a=a.y,e=e[e.length-1],f=e.controlPoints.previous,h=e.isSmooth?h+"C ".concat(b+
l.controlPoints.next.x," ").concat(c+l.controlPoints.next.y," ").concat(g+f.x," ").concat(a+f.y," ").concat(g," ").concat(a):h+"L ".concat(g," ").concat(a));return h}function bz(e,h){var l=e.id,b=e.vertices,c=e.fill,g=e.borderColor,a=e.borderWidth;b.length&&(h.d=Ij.getSvgVertices(b));Ij.addSvgBorderStyle(e,h);h["stroke-width"]=a.valueOf();h.fill=c?c.isGradient?"url(#gradient-fill"+l+")":c.toString():"transparent";h.stroke=g.valueOf().isGradient?"url(#gradient-borderColor"+l+")":g.valueOf().toString();
return h}function qw(e){var h=e.reactsToPointer,l=e.nativeCursor,b=e.clipMode,c={};qh.Path("owner.layout.renderViaCSS").get(e)&&e.owner.layout.addSubmorphCSS(e,c);qh.Path("layout.renderViaCSS").get(e)&&e.layout.addContainerCSS(e,c);var g=qh.styleProps(e),a=e._animationQueue.maskedProps("css");"backgroundImage"in a&&delete g.background;"visible"!==b&&(g.overflow=b,g["-webkit-overflow-scrolling"]="touch",g["clip-path"]=e.dropShadow?"none":"border-box",e.isImage&&(g["will-change"]="transform"),g["overflow-anchor"]=
"none");Object.assign(g,a);g.position="absolute";g["pointer-events"]=h?"auto":"none";g.cursor=l;Object.assign(g,c);return g}function YK(e,h){this.morph=e;this.type=h}function rw(e,h){h={animation:new qh.Animation(e),key:e.id,id:e.id,attributes:{},className:(e.hideScrollbars?e.styleClasses.concat("hiddenScrollbar"):e.styleClasses).join(" "),draggable:!1,"morph-after-render-hook":new qh.MorphAfterRenderHook(e,h)};h.attributes["touch-action"]=qh.bowser.ios&&e.draggable&&!e.isWorld?"none":qh.bowser.ios&&
"visible"!==e.clipMode&&!e.isWorld?"auto":"manipulation";return h}function vC(e){var h=new qh.SvgAnimation(e,"svg"),l={};qh.addSvgAttributes(e,l);Object.assign(l,e._animationQueue.maskedProps("svg"));return{animation:h,attributes:l}}function wC(e){var h=new qh.SvgAnimation(e,"path"),l={mask:0!==e.drawnProportion?"url(#mask"+e.id+")":""};qh.addPathAttributes(e,l);Object.assign(l,e._animationQueue.maskedProps("path"));return{animation:h,attributes:l}}function xC(e,h,l){var b=l=l.valueOf(),c=b.bounds,
g=b.focus,a=b.vector;b=b.stops;var d=h.x;h=h.y;e={namespace:"http://www.w3.org/2000/svg",attributes:{id:"gradient-"+e,gradientUnits:"userSpaceOnUse",r:"50%"}};a&&(e.attributes.gradientTransform="rotate(".concat(qh.num.toDegrees(a.extent().theta()),", ").concat(d/2,", ").concat(h/2,")"));if(g&&c){a=c.width;c=c.height;var f=g.x;g=g.y;e.attributes.gradientTransform="matrix(\n".concat(a/d,", 0, 0, ").concat(c/h,",\n").concat(d/2-a/d*(d/2)+f*d-d/2,",\n").concat(h/2-c/h*(h/2)+g*h-h/2,")")}return qh.h(l.type,
e,b.map(function(k){return qh.h("stop",{namespace:"http://www.w3.org/2000/svg",attributes:{offset:100*k.offset+"%","stop-opacity":k.color.a,"stop-color":k.color.withA(1).toString()}})}))}function yC(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e.env.renderer;return qh.createNode(e.render(h),h.domEnvironment)}function zC(e,h){var l=h.renderMap.get(e),b=h.getNodeForMorph(e);if(b&&l){var c=h.render(e),g=qh.diff(l,c);if(e=h.renderMap.get(e.owner))e=e.children[0].children,l=e.indexOf(l),
e[l]=c,qh.patch(b,g)}}function AC(e,h){if(e.needsRerender()){var l=!1,b=h.domNode,c=h.renderMap.get(e)||b&&(l=!0)&&qh.parser(b)||h.render(e),g=h.render(e);l&&(c.key=g.key);l=qh.diff(c,g);b=b||(h.domNode=qh.createNode(c,h.domEnvironment));b.parentNode||qh.initDOMState(h,e);qh.patch(b,l);h.renderFixedMorphs(g.fixedMorphs,e)}}function cz(e,h,l){return(((1-3*l+3*h)*e+(3*l-6*h))*e+3*h)*e}function lX(e){return e}function sw(e){return hi.obj.isFunction(e)?e:hi.Bezier.apply(hi,db(eval("([".concat(e.match(/\((.*)\)/)[1],
"])"))))}function tw(e){var h=0,l=0;do h+=e.offsetTop||0,l+=e.offsetLeft||0,e=e.offsetParent;while(e);return{top:h,left:l}}function BC(){BC=Cb(regeneratorRuntime.mark(function h(){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=Cj.IFramedDomEnvironment,l.next=3,Cj.createIFrame(document.body);case 3:return l.t1=l.sent,l.abrupt("return",new l.t0(l.t1));case 5:case "end":return l.stop()}},h)}));return BC.apply(this,arguments)}function ZK(){return System.get("@system-env").browser?
Cj.createDOMEnvironment_browser():Cj.createDOMEnvironment_node()}function CC(){return Cj._defaultEnv||(Cj._defaultEnv=System.get("@system-env").browser?new Cj.DomEnvironment(window,document,function(){}):Cj.createDOMEnvironment())}function zq(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"lively-css",h=1<arguments.length?arguments[1]:void 0,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document,b=l.getElementById(e);return b?Cj.setCSSDef(b,h,l):Cj.addCSSDef(e,h,l)}function nu(e,
h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document,b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,c=l.getElementById(e),g=!1;return c?b&&c.getAttribute("href")!==h?(c.setAttribute("href",h),c.onload=function(){return g=!0},Cj.promise.waitFor(3E4,function(){return!!g&&c})):Promise.resolve():(c=document.createElement("link"),c.type="text/css",c.rel="stylesheet",c.setAttribute("id",e),c.setAttribute("href",h),c.onload=function(){return g=!0},(l.head||l).appendChild(c),
Cj.promise.waitFor(3E4,function(){return!!g&&c}))}function uw(e,h){return Array.isArray(e)?e.reduce(function(l,b){return uw(b,l)},h):"string"===typeof e?h.filter(function(l){return l.path()!==e&&l.name()!==e}):e instanceof RegExp?h.filter(function(l){return!e.test(l.path())&&!e.test(l.name())}):"function"===typeof e?h.filter(function(l){return!e(l)}):h}function ys(e){e=e.split("?");e=Wb(e,2);e[0];var h=e[1];e={};if(!h)return e;if(h=h.split("&"))for(var l=0;l<h.length;l++){var b=h[l].split("="),c=
b[0],g=!0;if(1<b.length)if(g=decodeURIComponent(b.slice(1).join("=")),"undefined"===g)g=void 0;else if(g.match(/^(true|false|null|[0-9"[{].*)$/))try{g=JSON.parse(g)}catch(a){"["===g[0]&&(g=g.slice(1,-1).split(","))}e[c]=g}return e}function dz(e){return Object.keys(e).map(function(h){return"".concat(h,"=").concat(encodeURIComponent(String(e[h])))}).join("&")}function DC(e){var h=e.replace(Ai.pathDoubleSlashRe,"$1/");h=h.replace(Ai.pathDotRe,"/");do e=h,h=e.replace(Ai.pathDoubleDotRe,"");while(h!=e);
return h}function EC(e,h){var l=e.match(Ai.urlRe),b=h.match(Ai.urlRe),c=!0;if(l&&!b||!l&&b)c=!1;if(l&&b){var g=l[1];var a=l[2];var d=b[1];var f=b[2];g!==d?c=!1:a!==f?c=!1:(e=l[3],h=b[3])}if(!c)throw Error("[relativePathBetween] incompatible paths: ".concat(e," vs. ").concat(h));e=Ai.withRelativePartsResolved(e);h=Ai.withRelativePartsResolved(h);if(e==h)return"";l=Ai._relativePathBetween_checkPathes(h,e);if(!l)throw Error("pathname differs in relativePathFrom "+e+" vs "+h);return l}function $K(e,h){return Ai.withRelativePartsResolved(e.replace(Ai.slashEndRe,
"")+"/"+h.replace(Ai.slashStartRe,""))}function aL(e){return e.startsWith("/")?e.replace(Ai.slashEndRe,"").split("/").slice(0,-1).join("/")+"/":""}function bL(e){var h=[];for(e=Ai.parent(e);e&&(h.unshift(e),e=Ai.parent(e),"/"!==e););return h}function Am(e,h){if(!e)throw Error("lively.resource resource constructor: expects url but got "+e);if(e.isResource)return e;e=String(e);for(var l=0;l<Ai.extensions.length;l++)if(Ai.extensions[l].matches(e))return new Ai.extensions[l].resourceClass(e,h);throw Error("Cannot find resource type for url ".concat(e));
}function Aq(e,h,l){return FC.apply(this,arguments)}function FC(){FC=Cb(regeneratorRuntime.mark(function c(h,l,b){var g,a,d;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return g=Am(h,b).asDirectory(),f.next=3,g.ensureExistance();case 3:f.t0=regeneratorRuntime.keys(l);case 4:if((f.t1=f.t0()).done){f.next=18;break}a=f.t1.value;if(l.hasOwnProperty(a)){f.next=8;break}return f.abrupt("continue",4);case 8:d=g.join(a);if("object"!==ad(l[a])){f.next=14;break}f.next=12;return Aq(d,
l[a],b);case 12:f.next=16;break;case 14:return f.next=16,d.write(l[a]);case 16:f.next=4;break;case 18:return f.abrupt("return",g);case 19:case "end":return f.stop()}},c)}));return FC.apply(this,arguments)}function Bq(e){var h=e.name;Ai.extensions=Ai.extensions.filter(function(l){return l.name!==h}).concat(e)}function ou(e){var h="string"===typeof e?e:e.name;Ai.extensions=Ai.extensions.filter(function(l){return l.name!==h})}function cL(e,h){var l=e.useProxy;l=void 0===l?!0:l;var b=e.useCors;b=void 0===
b?!0:b;var c=e.url,g=e.onLoad,a=e.headers,d=e.onProgress,f=new XMLHttpRequest,k=rj.promise.deferred();f.open("PUT",c);l&&(Object.assign(a,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":c}),c=e.proxyDomain||rj.defaultOrigin());for(var n in a)f.setRequestHeader(n,a[n]);f.upload.addEventListener("progress",d);f.responseType="json";f.onload=function(){g(f.response);k.resolve(f)};b&&(f.withCredentials=!0);f.send(h);return k.promise}function GC(e){return HC.apply(this,arguments)}
function HC(){HC=Cb(regeneratorRuntime.mark(function l(h){var b,c,g,a,d,f,k,n,p,q,r,u,x,y=arguments;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return b=1<y.length&&void 0!==y[1]?y[1]:"infinity",c=2<y.length?y[2]:void 0,D.next=4,h.dirList(b,c);case 4:g=D.sent,a={},d=fa(g),D.prev=7,d.s();case 9:if((f=d.n()).done){D.next=26;break}k=f.value;if(!k.isDirectory()){D.next=15;break}D.t0={};D.next=18;break;case 15:return D.next=17,k.read();case 17:D.t0=D.sent;case 18:n=D.t0;
p=k.asFile().relativePathFrom(h).split("/");q=a;r=fa(p.slice(0,-1));try{for(r.s();!(u=r.n()).done;)x=u.value,q[x]||(q[x]={}),q=q[x]}catch(H){r.e(H)}finally{r.f()}q[p[p.length-1]]=n;case 24:D.next=9;break;case 26:D.next=31;break;case 28:D.prev=28,D.t1=D["catch"](7),d.e(D.t1);case 31:return D.prev=31,d.f(),D.finish(31);case 34:return D.abrupt("return",a);case 35:case "end":return D.stop()}},l,null,[[7,28,31,34]])}));return HC.apply(this,arguments)}function ez(e){return IC.apply(this,arguments)}function IC(){IC=
Cb(regeneratorRuntime.mark(function l(h){var b,c,g,a,d;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return b=document.head,c=b.namespaceURI,g=Sj.newUUID(),a=document.createElementNS(c,"script"),a.setAttribute("type","module"),b.appendChild(a),a.innerText="import m from '".concat(h,"'; window['").concat(g,"'] = m;"),a.setAttributeNS(null,"async",!0),f.next=13,Sj.waitFor(3E4,function(){return window[g]});case 13:return d=f.sent,delete window[g],a.remove(),f.abrupt("return",
d);case 17:case "end":return f.stop()}},l)}));return IC.apply(this,arguments)}function fz(e,h){var l=document.head,b=l.namespaceURI;return new Promise(function(c,g){var a=document.createElementNS(b,"script");a.setAttribute("type","text/ecmascript");l.appendChild(a);a.setAttributeNS(null,"id",e);"http://www.w3.org/2000/svg"===a.namespaceURI?a.setAttributeNS("http://www.w3.org/1999/xlink","href",e):a.setAttribute("src",e);a.onload=c;a.onerror=g;a.setAttributeNS(null,"async",!0)})}function JC(){return KC.apply(this,
arguments)}function KC(){KC=Cb(regeneratorRuntime.mark(function h(){var l,b,c;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!("fetch"in System.global&&"Headers"in System.global)){g.next=2;break}return g.abrupt("return",Promise.resolve());case 2:l=System.decanonicalize("lively.resources");if(!System.get("@system-env").node){g.next=19;break}g.prev=4;b=System._nodeRequire("fetch-ponyfill");g.next=17;break;case 8:return g.prev=8,g.t0=g["catch"](4),g.next=12,System.normalize("fetch-ponyfill",
l);case 12:return c=g.sent.replace("file://",""),g.next=15,Dd.import(c);case 15:Sj.__inter0__=g.sent,b=Sj.__inter0__["default"];case 17:g.next=22;break;case 19:return g.next=21,System["import"]("fetch-ponyfill",l);case 21:b=g.sent;case 22:Object.assign(System.global,b());case 23:case "end":return g.stop()}},h,null,[[4,8]])}));return KC.apply(this,arguments)}function LC(e){return ii.nameToClassMapping[e]||Object}function pu(e){return e&&e.split(",").map(function(h){h=h.split(" ").filter(function(l){return""!==
l}).join(" ");h.includes(" ")&&(h.startsWith("'")&&(h=h.slice(1)),h.endsWith("'")&&(h=h.slice(0,-1)),h.startsWith('"')||(h='"'+h),h.endsWith('"')||(h+='"'));return h}).join(",")}function vw(e,h){h||(h="undefined"!==typeof document?document.location.search:"");h=(h=h.trim())&&"?"!==h?ii.parseQuery(h):{};e.endsWith(".json")?(h.file=e,delete h.name):(delete h.file,h.name=e);return"".concat("/worlds/load","?").concat(ii.stringifyQuery(h))}function gz(e){Object.assign(ii.nameToClassMapping,e)}function MC(e){ii.CachedStyleProperties.forEach(function(h){h=
Wb(h,2);var l=h[0];if(e.endsWith(h[1].moduleId))ii.CachedStyleProperties["delete"](l)})}function NC(e){if(ii.CachedStyleProperties.has(e))return ii.CachedStyleProperties.get(e);var h=ii.getPropSettings(e),l=h.props,b=[];b.moduleId=h.moduleId;h=function(g){l[g].isStyleProp&&b.push(g);l[g].foldable&&b.push.apply(b,db(l[g].foldable.map(function(a){return g+ii.string.capitalize(a)})));"geometry"===l[g].group&&l[g].derived&&b.push(g)};for(var c in l)h(c);ii.CachedStyleProperties.set(e,b);return b}function OC(e,
h){if(ii.CachedDefaultValues.has(e))return ii.CachedDefaultValues.get(e)[h];var l=ii.getPropSettings(e).props,b={},c;for(c in l)l[c].isStyleProp&&"defaultValue"in l[c]&&(b[c]=l[c].defaultValue);ii.CachedDefaultValues.set(e,b);return b[h]}function Sm(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{restore:!1},l=ii.nameToClassMapping["default"];e.type&&("function"===typeof e.type&&(l=e.type),"object"===ad(e.type)?l=ii.locateClass(e.type):
"string"===typeof e.type&&(l=ii.nameToClassMapping[e.type.toLowerCase()]||l));return h.restore?(new l(dd({},Symbol["for"]("lively-instance-restorer"),!0))).initFromJSON(e):new l(e)}function hz(e){return("function"===typeof e?e[Symbol["for"]("__LivelyClassName__")]:"string"===typeof e?e.toLowerCase():"")+"_"+ii.string.newUUID().replace(/-/g,"_")}function PC(){PC=Cb(regeneratorRuntime.mark(function l(h){var b,c;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=
2,Dd.import("./ui.cp-8dfc076f.js").then(function(a){return a.I});case 2:return b=g.sent,c=b.openInWindow,ii.inspect=c,g.abrupt("return",c({targetObject:h}));case 6:case "end":return g.stop()}},l)}));return PC.apply(this,arguments)}function QC(){QC=Cb(regeneratorRuntime.mark(function b(h,l){var c,g,a,d,f,k=arguments;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:c=2<k.length&&void 0!==k[2]?k[2]:{keyChain:void 0,count:void 0},g=1===l.length?[l]:l.split(/ /g).map(Ki.ensureSpaces),
a=fa(g),n.prev=3,a.s();case 5:if((d=a.n()).done){n.next=11;break}f=d.value;n.next=9;return Ki.simulateKey(h,f,c);case 9:n.next=5;break;case 11:n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](3),a.e(n.t0);case 16:return n.prev=16,a.f(),n.finish(16);case 19:case "end":return n.stop()}},b,null,[[3,13,16,19]])}));return QC.apply(this,arguments)}function RC(e,h){if("string"===typeof e)return e;if(!e||"object"!==ad(e))return null;switch(h){case "ios":return e.ios||e.mac;case "mac":return e.mac||e.ios;
case "win":case "windows":case "windowsphone":return e.win||e.windows;case "linux":return e.linux||e.win||e.windows;case "chromeos":return e.chromeos||e.linux||e.win||e.windows;case "android":return e.android||e.linux||e.win||e.windows;default:return e.linux||e.win||e.windows}}function dL(e){return e&&e.__ref__}function ww(e,h){return Kh.serialize(e,Kh.normalizeOptions(h))}function SC(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Kh.deserializeWithMigrations(e,h.migrations||
Kh.migrations,Kh.normalizeOptions(h))}function TC(e){if(!(1<arguments.length&&void 0!==arguments[1]&&arguments[1]))return Kh.deserializeMorph(Kh.serializeMorph(e),{migrations:Kh.migrations,reinitializeIds:!0});var h=[];e.attributeConnections&&(h=e.attributeConnections.filter(function(b){return b.targetObj.isCommentIndicator}),e.attributeConnections=e.attributeConnections.filter(function(b){return!(b.targetObj.isCommentIndicator||b.targetObj.isHalo)}));var l=Kh.serializeMorph(e);e.attributeConnections&&
(e.attributeConnections=e.attributeConnections.concat(h));return Kh.deserializeMorph(l,{migrations:Kh.migrations,reinitializeIds:!0})}function eL(e){return UC.apply(this,arguments)}function UC(){UC=Cb(regeneratorRuntime.mark(function l(h){var b,c,g,a,d,f,k=arguments;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:b=1<k.length&&void 0!==k[1]?k[1]:{};if(h.isDirectory()){n.next=8;break}n.next=4;return h.read();case 4:return b[h.name()]=n.sent,n.abrupt("return",b);case 8:return c=
b[h.name()]={},n.next=11,h.dirList();case 11:g=n.sent,a=fa(g),n.prev=13,a.s();case 15:if((d=a.n()).done){n.next=21;break}f=d.value;n.next=19;return eL(f,c);case 19:n.next=15;break;case 21:n.next=26;break;case 23:n.prev=23,n.t0=n["catch"](13),a.e(n.t0);case 26:return n.prev=26,a.f(),n.finish(26);case 29:return n.abrupt("return",b);case 30:case "end":return n.stop()}},l,null,[[13,23,26,29]])}));return UC.apply(this,arguments)}function fL(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
[],l=[];if(e.hasOwnProperty("package.json")){var b=h.slice(1).reduceRight(function(g,a){return g.join(a)},Kh.resource(h[0])).url;l.push({files:e,url:b,requiredPackages:e.requiredPackages})}for(var c in e)"object"===ad(e[c])&&l.push.apply(l,db(fL(e[c],h.concat(c))));return l}function VC(e){var h=Kh.findPackagesInFileSpec(e.packages),l={};e=e.packageDepMap;if(!e)return h;h=fa(h);var b;try{for(h.s();!(b=h.n()).done;){var c=b.value;l[c.url]=c}}catch(g){h.e(g)}finally{h.f()}return Kh.graph.sortByReference(e).flat().map(function(g){return l[g]})}
function gL(e,h){return WC.apply(this,arguments)}function WC(){WC=Cb(regeneratorRuntime.mark(function b(h,l){var c,g,a,d,f,k,n,p,q,r,u,x,y,D,H,I,N;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(c=l.moduleManager){J.next=3;break}throw Error("You need to provide a module manager in order to load packages and modules.");case 3:if(!h.packagesToRegister){J.next=27;break}g=fa(h.packagesToRegister);J.prev=5;g.s();case 7:if((a=g.n()).done){J.next=19;break}d=a.value;J.prev=
9;J.next=12;return c.registerPackage(d);case 12:J.next=17;break;case 14:J.prev=14,J.t0=J["catch"](9),console.error("Failed to register package ".concat(d));case 17:J.next=7;break;case 19:J.next=24;break;case 21:J.prev=21,J.t1=J["catch"](5),g.e(J.t1);case 24:return J.prev=24,g.f(),J.finish(24);case 27:if(!h.packages){J.next=71;break}f=Kh.packagesOfSnapshot(h);k=fa(f);J.prev=30;k.s();case 32:if((n=k.n()).done){J.next=63;break}p=n.value;q=p.files;r=p.url;x=(u=c.lookupPackage(r))&&u.pkg;if(!x){J.next=
48;break}y=x.version;D=JSON.parse(q["package.json"]);H=D.version;J.prev=39;if(!(H&&y&&c.semver.lte(H,y,!0))){J.next=43;break}console.log("[load morph] Package ".concat(r," is loaded in version ").concat(y)+" which is newer than ".concat(H,". Will NOT load older variant."));return J.abrupt("continue",61);case 43:J.next=48;break;case 45:J.prev=45,J.t2=J["catch"](39),console.warn("Error in package version comparison: ",J.t2);case 48:return J.next=50,Kh.createFiles(r,q);case 50:return J.next=52,c.ensurePackage(r);
case 52:return x=J.sent,J.next=55,x.reload({forgetEnv:!1,forgetDeps:!1});case 55:return J.next=57,Dd.import("./object-classes-06d7e61a.js");case 57:I=J.sent,N=I["default"],Kh.objectScriptingEnabled=!!N,Kh.objectScriptingEnabled&&N.withId(x.name);case 61:J.next=32;break;case 63:J.next=68;break;case 65:J.prev=65,J.t3=J["catch"](30),k.e(J.t3);case 68:return J.prev=68,k.f(),J.finish(68);case 71:return J.next=73,Promise.all(Kh.requiredModulesOfSnapshot(h).map(function(sa){return(System.get(sa)?null:System["import"](sa))["catch"](function(ja){return console.error("Error loading ".concat(sa),
ja)})}));case 73:case "end":return J.stop()}},b,null,[[5,21,24,27],[9,14],[30,65,68,71],[39,45]])}));return WC.apply(this,arguments)}function zs(e,h){return Kh.deserializeMorph(e,Object.assign({reinitializeIds:!0,ignoreClassNotFound:!1,onDeserializationStart:Kh.loadPackagesAndModulesOfSnapshot,migrations:Kh.migrations},h))}function hL(e){return XC.apply(this,arguments)}function XC(){XC=Cb(regeneratorRuntime.mark(function l(h){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.t0=
Kh,b.next=3,h.readJson();case 3:return b.t1=b.sent,b.abrupt("return",b.t0.loadMorphFromSnapshot.call(b.t0,b.t1));case 5:case "end":return b.stop()}},l)}));return XC.apply(this,arguments)}function iL(e,h){return YC.apply(this,arguments)}function YC(){YC=Cb(regeneratorRuntime.mark(function b(h,l){var c,g,a,d,f,k,n,p,q,r,u,x,y,D,H,I,N,J,sa,ja,Ha,Qa,ec,mc,hc;return regeneratorRuntime.wrap(function(Ua){for(;;)switch(Ua.prev=Ua.next){case 0:c={},g=h.snapshot,a=[],d={},f=!0,k={},Ua.t0=regeneratorRuntime.keys(g);
case 7:if((Ua.t1=Ua.t0()).done){Ua.next=18;break}n=Ua.t1.value;p=g[n]["lively.serializer-class-info"];if(!(p&&p.module&&p.module["package"])){Ua.next=14;break}q=l.getPackage(p.module["package"].name);if(!q.address.startsWith("local://")){Ua.next=14;break}return Ua.delegateYield(regeneratorRuntime.mark(function rc(){var Lb,Ac,Xb,qd,La,Fd,na,Va;return regeneratorRuntime.wrap(function(yd){for(;;)switch(yd.prev=yd.next){case 0:return yd.next=2,Dd.import("./object-classes-06d7e61a.js");case 2:return Lb=
yd.sent,Ac=Lb["default"],yd.next=6,Promise.resolve().then(function(){return mX});case 6:return Xb=yd.sent,qd=Xb.withSuperclasses,Kh.objectScriptingEnabled=!!Ac,La=Ac.forSystemPackage(q),yd.next=12,La.ensureSubModule(p.module.pathInPackage);case 12:Fd=yd.sent,na=Fd.systemModule._recorder[p.className],Va=qd(na),Va.forEach(function(me){(me=Ac.lookupPackageForClass(me))&&a.push(me.systemPackage)});case 16:case "end":return yd.stop()}},rc)})(),"t2",14);case 14:if(r=g[n].props.metadata)if(u=void 0,r.value&&
r.value.__ref__?(x=g[r.value.id],x.props.externalPackages&&(u=x.props.externalPackages.value)):u=r.externalPackages,u)for(f=!0,y=0;y<u.length;y++)d[u[y]]=!0;Ua.next=7;break;case 18:f&&(h.packagesToRegister=Object.keys(d)),D=[],H=0,I=a;case 21:if(!(H<I.length)){Ua.next=67;break}N=I[H];J=fa(N.modules());Ua.prev=24;J.s();case 26:if((sa=J.n()).done){Ua.next=56;break}ja=sa.value;if(!ja.id.endsWith(".json")){Ua.next=30;break}return Ua.abrupt("continue",54);case 30:return Ua.t3=fa,Ua.next=33,ja.imports();
case 33:Ua.t4=Ua.sent,Ha=(0,Ua.t3)(Ua.t4),Ua.prev=35,Ha.s();case 37:if((Qa=Ha.n()).done){Ua.next=46;break}ec=Qa.value.fromModule;if(mc=l.module(ec)["package"]()){Ua.next=42;break}return Ua.abrupt("continue",44);case 42:hc=mc.config,hc.lively&&hc.lively.isObjectPackage&&(D.push(mc),k[N.url]?Kh.arr.pushIfNotIncluded(k[N.url],mc.url):k[N.url]=[mc.url]);case 44:Ua.next=37;break;case 46:Ua.next=51;break;case 48:Ua.prev=48,Ua.t5=Ua["catch"](35),Ha.e(Ua.t5);case 51:return Ua.prev=51,Ha.f(),Ua.finish(51);
case 54:Ua.next=26;break;case 56:Ua.next=61;break;case 58:Ua.prev=58,Ua.t6=Ua["catch"](24),J.e(Ua.t6);case 61:return Ua.prev=61,J.f(),Ua.finish(61);case 64:H++;Ua.next=21;break;case 67:return a=[].concat(D,db(a)),Ua.next=70,Promise.all(a.map(function(){var rc=Cb(regeneratorRuntime.mark(function Xb(Ac){var qd,La;return regeneratorRuntime.wrap(function(Fd){for(;;)switch(Fd.prev=Fd.next){case 0:return qd=Kh.resource(Ac.address).asDirectory(),Fd.next=3,Kh.resourceToJSON(qd);case 3:La=Fd.sent,c[qd.parent().url]||
(c[qd.parent().url]={}),Object.assign(c[qd.parent().url],La),k[Ac.url]||(k[Ac.url]=[]);case 7:case "end":return Fd.stop()}},Xb)}));return function(Ac){return rc.apply(this,arguments)}}()));case 70:return Ua.abrupt("return",{packages:c,depMap:k});case 71:case "end":return Ua.stop()}},b,null,[[24,58,61,64],[35,48,51,54]])}));return YC.apply(this,arguments)}function qu(e){return ZC.apply(this,arguments)}function ZC(){ZC=Cb(regeneratorRuntime.mark(function l(h){var b,c,g,a,d,f,k,n,p,q,r,u,x,y,D,H,I,N,
J,sa,ja,Ha,Qa,ec,mc,hc,Ua,xa,rc,Lb=arguments;return regeneratorRuntime.wrap(function(Ac){for(;;)switch(Ac.prev=Ac.next){case 0:b=1<Lb.length&&void 0!==Lb[1]?Lb[1]:{};c=b.addPreview;g=void 0===c?!1:c;a=b.previewWidth;d=void 0===a?100:a;f=b.previewHeight;k=void 0===f?100:f;n=b.previewType;p=void 0===n?"png":n;q=b.testLoad;r=void 0===q?!0:q;u=b.addPackages;x=void 0===u?!0:u;y=b.ignoreMorphs;D=void 0===y?[]:y;H=b.frozenSnapshot;I=void 0===H?!1:H;N=b.moduleManager;J=Kh.serializeMorph(h,{frozenSnapshot:I});
if(!x){Ac.next=13;break}Ac.next=6;return Kh.findRequiredPackagesOfSnapshot(J,N);case 6:sa=Ac.sent,ja=sa.packages,Ha=sa.depMap,J.packages=ja,Qa=[],Object.values(ja["local://lively-object-modules/"]||{}).forEach(function(Xb){Object.entries(Xb).forEach(function(qd){var La=Wb(qd,2);qd=La[0];La=La[1];if(!qd.endsWith(".json")){var Fd=Kh.ast.parse(La),na=[],Va=Kh.Path("metadata.commit.name").get($world);Kh.ast.AllNodesVisitor.run(Fd,function(yd,me){"Literal"===yd.type&&"string"===typeof yd.value&&(yd.value.match(/^styleguide:\/\/\$world\/.+/)&&
!Qa.includes(yd.value.replace("styleguide://$world/",""))&&na.push({target:yd,replacementFunc:function(){return JSON.stringify(yd.value.replace("$world",Va))}}),yd.value.match(/^part:\/\/\$world\/.+/)&&!Qa.includes(yd.value.replace("part://$world/",""))&&na.push({target:yd,replacementFunc:function(){return JSON.stringify(yd.value.replace("$world",Va))}}))});Xb[qd]=Kh.ast.transform.replaceNodes(na,La).source}})}),J.packageDepMap=Ha;case 13:if(!g){Ac.next=33;break}Ac.next=16;return Dd.import("./morph-to-image-647dce90.js");
case 16:return ec=Ac.sent,mc=ec.renderMorphToDataURI,hc=d||h.width,Ua=k||h.height,xa=p||"png",Ac.prev=21,Ac.next=24,mc(h,{width:hc,height:Ua,type:xa,ignoreMorphs:[]});case 24:J.preview=Ac.sent;Ac.next=33;break;case 27:return Ac.prev=27,Ac.t0=Ac["catch"](21),console.error("Error generating morph preview: ".concat(Ac.t0)),Ac.next=32,mc(Kh.morph({fill:h.fill,width:hc,height:Ua}),{width:hc,height:Ua,type:xa,ignoreMorphs:D});case 32:J.preview=Ac.sent;case 33:J.preview||(J.preview="");if(!r){Ac.next=46;
break}Ac.prev=35;Ac.next=38;return Kh.loadMorphFromSnapshot(J,{highlightBuggyMorphs:!0,rootObject:h,moduleManager:N});case 38:if((rc=Ac.sent)&&rc.isMorph){Ac.next=41;break}throw Error("reloading snapshot does not create a morph!");case 41:Ac.next=46;break;case 43:throw Ac.prev=43,Ac.t1=Ac["catch"](35),Error("Error snapshotting morph: Cannot recreate morph from snapshot!\n"+Ac.t1.stack);case 46:return Ac.abrupt("return",J);case 47:case "end":return Ac.stop()}},l,null,[[21,27],[35,43]])}));return ZC.apply(this,
arguments)}function jL(){return $C.apply(this,arguments)}function $C(){$C=Cb(regeneratorRuntime.mark(function h(){var l,b,c,g,a,d,f,k,n,p,q,r,u,x,y,D,H=arguments;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:l=0<H.length&&void 0!==H[0]?H[0]:Kh.MorphicEnv["default"]().world;b=1<H.length?H[1]:void 0;g=(c=2<H.length?H[2]:void 0)||{};a=g.showIndicator;d=void 0===a?!0:a;f=g.changeName;k=void 0===f?!0:f;n=g.changeBrowserURL;p=void 0===n?!0:n;b||(q=Kh.resource(document.location.href),
r=q.name(),b=q.join("../"+r.replace(/\.[^\.]+/,"-world.json")).withRelativePartsResolved());"string"===typeof b&&(b=Kh.resource(b));k&&(l.name=b.nameWithoutExt());p&&(u=encodeURI(c.pathForBrowserHistory||Kh.pathForBrowserHistory(b.path())),window.location.pathname!==u&&window.history.pushState({},"lively.next",u));if(!d){I.next=17;break}I.next=11;return Dd.import("./loading-indicator.cp-98e470a2.js").then(function(N){return N.L});case 11:return y=I.sent,x=y.open("string"===typeof d?d:"Snapshotting..."),
I.next=15,x.whenRendered();case 15:return I.next=17,Kh.promise.delay(100);case 17:return I.prev=17,I.next=20,Kh.createMorphSnapshot(l,c);case 20:return D=I.sent,x.label="Uploading...",I.next=24,x.whenRendered();case 24:return I.abrupt("return",b.writeJson(D));case 25:return I.prev=25,x&&x.remove(),I.finish(25);case 28:case "end":return I.stop()}},h,null,[[17,,25,28]])}));return $C.apply(this,arguments)}function kL(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,c=4<arguments.length&&
void 0!==arguments[4]?arguments[4]:function(q,r){return r.remove()},g=5<arguments.length&&void 0!==arguments[5]?arguments[5]:function(q,r,u){return q.addMorph(r,u).__wasAddedToDerived__=!0};l(e,h);var a=Lh.arr.partition(db(h.submorphs||[]),function(q){return!!q.COMMAND}),d=Wb(a,2);a=d[0];d=d[1];h=d.shift();var f=fa(e.submorphs||[]),k;try{for(f.s();!(k=f.n()).done;){var n=k.value;if(!h)break;n.name===h.name&&(kL(n,h,l,b,c,g),h=d.shift())}}catch(q){f.e(q)}finally{f.f()}if(b){b=fa(a);var p;try{for(k=
function(){var q=p.value;if("remove"===q.COMMAND&&e.submorphs){var r=e.submorphs.find(function(u){return u.name===q.target});r&&c(e,r)}"add"===q.COMMAND&&(e.submorphs||(e.submorphs=[]),r=q.before&&e.submorphs.find(function(u){return u.name===q.before}),g(e,q.props,r))},b.s();!(p=b.n()).done;)k()}catch(q){b.e(q)}finally{b.f()}}}function nX(e,h){var l={};h.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(b,c,g){c&&(l[c]=g)});return l}function Ql(e){if(e){for(var h in Ql.prototype)e[h]=Ql.prototype[h];return e}}
function aD(e){var h="";do h=lL[e%64]+h,e=Math.floor(e/64);while(0<e);return h}function bD(){var e=aD(+new Date);return e!==mL?(nL=0,mL=e):e+"."+aD(nL++)}function oL(e){e=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!e||oX))return new XMLHttpRequest}catch(h){}if(!e)try{return new (or[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(h){}}function pL(e,...h){return h.reduce((l,b)=>{e.hasOwnProperty(b)&&(l[b]=e[b]);return l},{})}function iz(e,h){h.useNativeTimers?(e.setTimeoutFn=
pX.bind(or),e.clearTimeoutFn=qX.bind(or)):(e.setTimeoutFn=setTimeout.bind(or),e.clearTimeoutFn=clearTimeout.bind(or))}function rX(){}function qL(){for(let e in Cq.requests)Cq.requests.hasOwnProperty(e)&&Cq.requests[e].abort()}function cD(e){var h;if(h=sX)(h=e instanceof ArrayBuffer)||(h="function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer);return h||tX&&e instanceof Blob||uX&&e instanceof File}function jz(e,h){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let l=
0,b=e.length;l<b;l++)if(jz(e[l]))return!0;return!1}if(cD(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return jz(e.toJSON(),!0);for(const l in e)if(Object.prototype.hasOwnProperty.call(e,l)&&jz(e[l]))return!0;return!1}function dD(e,h){if(!e)return e;if(cD(e)){var l={_placeholder:!0,num:h.length};h.push(e);return l}if(Array.isArray(e)){l=Array(e.length);for(var b=0;b<e.length;b++)l[b]=dD(e[b],h);return l}if("object"===typeof e&&!(e instanceof Date)){l={};for(b in e)Object.prototype.hasOwnProperty.call(e,
b)&&(l[b]=dD(e[b],h));return l}return e}function eD(e,h){if(!e)return e;if(e&&e._placeholder)return h[e.num];if(Array.isArray(e))for(var l=0;l<e.length;l++)e[l]=eD(e[l],h);else if("object"===typeof e)for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&(e[l]=eD(e[l],h));return e}function ru(e){e=e||{};(this||dn).ms=e.min||100;(this||dn).max=e.max||1E4;(this||dn).factor=e.factor||2;(this||dn).jitter=0<e.jitter&&1>=e.jitter?e.jitter:0;(this||dn).attempts=0}function vX(e,h="",l){let b=e;l=l||"undefined"!==
typeof location&&location;null==e&&(e=l.protocol+"//"+l.host);"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?l.protocol+e:l.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof l?l.protocol+"//"+e:"https://"+e),b=fD(e));b.port||(/^(http|ws)$/.test(b.protocol)?b.port="80":/^(http|ws)s$/.test(b.protocol)&&(b.port="443"));b.path=b.path||"/";e=-1!==b.host.indexOf(":")?"["+b.host+"]":b.host;b.id=b.protocol+"://"+e+":"+b.port+h;b.href=b.protocol+"://"+e+(l&&l.port===b.port?"":":"+
b.port);return b}function Qo(e,h,l){e.on(h,l);return function(){e.off(h,l)}}function kz(e,h){"object"===typeof e&&(h=e,e=void 0);h=h||{};e=vX(e,h.path||"/socket.io");var l=e.source;const b=e.id;var c=e.path;c=xw[b]&&c in xw[b].nsps;h.forceNew||h["force new connection"]||!1===h.multiplex||c?l=new gD(l,h):(xw[b]||(xw[b]=new gD(l,h)),l=xw[b]);e.query&&!h.query&&(h.query=e.queryKey);return l.socket(e.path,h)}function su(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=h.l2lClient;
if(!l)throw Error("lively.shell client side runCommand needs opts.l2lClient!");Li.ClientCommand.installLively2LivelyServices(l);l=new Li.ClientCommand(l);l.spawn(Object.assign({command:e},Li.obj.dissoc(h,["l2lClient"])));return l}function lz(e){return Li.dirCache[e.trackerId]?Li.dirCache[e.trackerId]:e.whenRegistered().then(Cb(regeneratorRuntime.mark(function l(){var b,c;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,e.sendToAndWait(e.trackerId,"lively.shell.info",
{});case 2:return b=g.sent,c=b.data.defaultDirectory,g.abrupt("return",Li.dirCache[e.trackerId]=c);case 5:case "end":return g.stop()}},l)})))}function mz(e){return hD.apply(this,arguments)}function hD(){hD=Cb(regeneratorRuntime.mark(function l(h){var b,c;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,h.sendToAndWait(h.trackerId,"lively.shell.env",{});case 2:return b=g.sent,c=b.data.env,g.abrupt("return",c);case 5:case "end":return g.stop()}},l)}));return hD.apply(this,
arguments)}function iD(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};h=h||{};var l=Li.runCommand('cat "'.concat(e,'"'),h);return l.whenDone().then(function(){if(l.exitCode)throw Error("Read ".concat(e," failed: ").concat(l.stderr));return l.output})}function jD(e,h,l){!l&&h&&h.content&&(l=h,h=l.content);h=h||"";var b=Li.runCommand('tee "'.concat(e,'"'),Object.assign({stdin:h},l));return b.whenDone().then(function(){if(b.exitCode)throw Error("Write ".concat(e," failed: ").concat(b.stderr));
return b})}function nz(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return xk._runCommand(e,Object.assign({l2lClient:xk.L2LClient.ensure(xk.defaultConnection)},h))}function yw(){return kD.apply(this,arguments)}function kD(){kD=Cb(regeneratorRuntime.mark(function h(){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,xk._defaultDirectory(xk.L2LClient.ensure(xk.defaultConnection));case 2:return l.abrupt("return",l.sent);case 3:case "end":return l.stop()}},
h)}));return kD.apply(this,arguments)}function lD(){return xk._env(xk.L2LClient.ensure(xk.defaultConnection))}function mD(e){function h(){0<b.length&&l.push(b);b=""}for(var l=[],b="",c="normal",g=0,a;a=e[g];g++)if("normal"===c&&/\s/.test(a))h();else{if('"'===a||"'"===a){if("normal"===c){c=a;continue}if(c===a){c="normal";continue}}"\\"===a&&c===e[g+1]&&(g++,a=e[g]);b+=a}h();return l}function nD(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},b=l.exclusions,c=l.fileTypes;c=void 0===
c?[]:c;var g=l.sizeLimit,a=void 0===g?"+1M":g;g=l.charsBefore;g=void 0===g?80:g;l=l.charsAfter;l=void 0===l?80:l;b||(b=xk.defaultGrepExclusions);b=(b=[b.length?"-iname "+b.map(JSON.stringify).join(" -o -iname "):"",a?"-size "+a:""].filter(Boolean).join(" -o "))?"\\( ".concat(b," \\) -prune -o"):"";c=(c=c.length?"-iname "+c.map(JSON.stringify).join(" -o -iname "):"")?"-a \\( ".concat(c," \\)"):"";a='find %s %s -type f %s -a -print0 | xargs -0 grep -IinH -o ".\\{0,%s\\}%s.\\{0,%s\\}" '.replace(/([\(\);])/g,
"\\$1");b=xk.string.format(a,h,b,c,g,e,l);var d=xk.runCommand(b);d.whenDone().then(function(f){var k=f.exitCode,n=f.stdout;f.stderr;k&&1!==k||(d.results=n.split("\n").map(function(p){p=p.match(/(.*):([0-9]+):(.*)/);if(!p)return null;p=Wb(p,4);p[0];return{filename:p[1],lineno:Number(p[2])-1,match:p[3]}}).filter(Boolean))});return d}function rL(e,h){return fk.string.lines(e).map(function(l){return l.trim().length?(new fk.FileInfo(h)).readFromDirectoryListLine(l):null}).filter(Boolean)}function oD(e,
h){return pD.apply(this,arguments)}function pD(){pD=Cb(regeneratorRuntime.mark(function b(h,l){var c,g,a,d,f,k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return c=fk.fileInfoCommandString(h,l),g=fk.runCommand(c,l),n.next=4,g.whenDone();case 4:a=0!==g.exitCode?g.output:null;if(!a){n.next=7;break}throw a;case 7:return d=fk.parseDirectoryListFromLs(g.stdout,l.rootDirectory||"."),f=Wb(d,1),k=f[0],n.abrupt("return",k);case 9:case "end":return n.stop()}},b)}));return pD.apply(this,
arguments)}function qD(e,h){return rD.apply(this,arguments)}function rD(){rD=Cb(regeneratorRuntime.mark(function b(h,l){var c,g,a,d,f,k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return c=Object.assign({findFilesGroup:"default-find-files-process"},l),g=c.findFilesGroup,a=c.rootDirectory,d=fk.findFilesProcesses[g]||(fk.findFilesProcesses[g]={promiseState:null,commands:[]}),f=d.commands,k=d.promiseState,k||(d.promiseState=k=fk.promise.deferred()),n=fk.findFilesCommandString(h,
l),f.forEach(function(r){return r.kill()}),p=fk.runCommand(n,l),f.push(p),p.whenDone().then(function(){fk.arr.remove(f,p);if(f.some(function(u){return u.startTime>p.startTime}))console.log("[findFiles] command ".concat(p," exited but a newer findFiles command was started for group ").concat(g,", discarding output"));else{var r=0!==p.exitCode?p.output:null;r&&console.warn(r);r=r?[]:fk.parseDirectoryListFromLs(p.stdout,a)||[];k.resolve(r);Object.assign(d,{promiseState:null,commands:[]})}})["catch"](function(r){return console.error(r)}),
q.abrupt("return",k.promise);case 10:case "end":return q.stop()}},b)}));return rD.apply(this,arguments)}function sL(e){function h(l){return Array.prototype.concat.apply([l],l.children?l.children.map(h):[])}return h(e).map(function(l){var b=l.fullPath.replace(/^\//,"");return{fileName:b,path:b,rootDirectory:"./",isDirectory:l.isDirectory,isLink:void 0,lastModified:void 0,linkCount:void 0,mode:void 0,size:void 0,group:void 0,user:void 0}})}function oz(){sD=!0;for(var e,h,l=zw.length;l;){h=zw;zw=[];
for(e=-1;++e<l;)h[e]();l=zw.length}sD=!1}function tu(e,h,l){var b=l[l.length-1];e===b.element&&(l.pop(),b=l[l.length-1]);l=b.element;b=b.index;Array.isArray(l)?l.push(e):b===h.length-2?(h=h.pop(),l[h]=e):h.push(e)}function Nk(){Nk.init.call(this)}function pz(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+ad(e));}function tL(e,h,l,b){var c,g,a;if(pz(l),void 0===(g=e._events)?(g=e._events=Object.create(null),e._eventsCount=0):(void 0!==
g.newListener&&(e.emit("newListener",h,l.listener?l.listener:l),g=e._events),a=g[h]),void 0===a)g[h]=l,++e._eventsCount;else if("function"==typeof a?a=g[h]=b?[l,a]:[a,l]:b?a.unshift(l):a.push(l),0<(c=void 0===e._maxListeners?Nk.defaultMaxListeners:e._maxListeners)&&a.length>c&&!a.warned)a.warned=!0,l=Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit"),l.name="MaxListenersExceededWarning",l.emitter=e,l.type=
h,l.count=a.length,console&&console.warn&&console.warn(l);return e}function wX(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function uL(e,h,l){e={fired:!1,wrapFn:void 0,target:e,type:h,listener:l};h=wX.bind(e);return h.listener=l,e.wrapFn=h,h}function vL(e,h,l){e=e._events;if(void 0===e)return[];h=e[h];if(void 0===h)l=[];else if("function"==typeof h)l=l?[h.listener||
h]:[h];else if(l)for(l=Array(h.length),e=0;e<l.length;++e)l[e]=h[e].listener||h[e];else l=wL(h,h.length);return l}function xL(e){var h=this._events;if(void 0!==h){e=h[e];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function wL(e,h){for(var l=Array(h),b=0;b<h;++b)l[b]=e[b];return l}function uu(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}function pr(){this._store={}}function Aw(e){this._store=new pr;if(e&&Array.isArray(e))for(var h=0,l=e.length;h<l;h++)this.add(e[h])}
function bm(e){var h;if(!e||"object"!==typeof e)return e;if(Array.isArray(e)){var l=[];var b=0;for(h=e.length;b<h;b++)l[b]=bm(e[b]);return l}if(e instanceof Date)return e.toISOString();if("undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!==typeof Blob&&e instanceof Blob)return e instanceof ArrayBuffer?"function"===typeof e.slice?e=e.slice(0):(b=new ArrayBuffer(e.byteLength),l=new Uint8Array(b),e=new Uint8Array(e),l.set(e),e=b):(b=e.size,l=e.type,e="function"===typeof e.slice?
e.slice(0,b,l):e.webkitSlice(0,b,l)),e;l=Object.getPrototypeOf(e);null===l?l=!0:(l=l.constructor,l="function"==typeof l&&l instanceof l&&yL.call(l)==xX);if(!l)return e;l={};for(b in e)Object.prototype.hasOwnProperty.call(e,b)&&(h=bm(e[b]),"undefined"!==typeof h&&(l[b]=h));return l}function zL(e){var h=!1;return vu(function(l){if(h)throw Error("once called more than once");h=!0;e.apply(this,l)})}function AL(e){return vu(function(h){h=bm(h);var l=this,b="function"===typeof h[h.length-1]?h.pop():!1,
c=new Promise(function(g,a){var d;try{var f=zL(function(k,n){k?a(k):g(n)});h.push(f);(d=e.apply(l,h))&&"function"===typeof d.then&&g(d)}catch(k){a(k)}});b&&c.then(function(g){b(null,g)},b);return c})}function yX(e,h,l){if(e.constructor.listeners("debug").length){for(var b=["api",e.name,h],c=0;c<l.length-1;c++)b.push(l[c]);e.constructor.emit("debug",b);var g=l[l.length-1];l[l.length-1]=function(a,d){var f=["api",e.name,h];f=f.concat(a?["error",a]:["success",d]);e.constructor.emit("debug",f);g(a,d)}}}
function Rl(e,h){return AL(vu(function(l){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var b=this;yX(b,e,l);return this.taskqueue.isReady?h.apply(this,l):new Promise(function(c,g){b.taskqueue.addTask(function(a){a?g(a):c(b[e].apply(b,l))})})}))}function Bw(e,h){for(var l={},b=0,c=h.length;b<c;b++){var g=h[b];g in e&&(l[g]=e[g])}return l}function BL(e){return e}function zX(e){return[{ok:e}]}function CL(e,
h,l){function b(){var r=[];n.forEach(function(u){u.docs.forEach(function(x){r.push({id:u.id,docs:[x]})})});l(null,{results:r})}function c(){if(!(q>=p.length)){var r=p.slice(q,Math.min(q+6,p.length));g(r,q);q+=r.length}}function g(r,u){r.forEach(function(x,y){var D=u+y;y=d.get(x);var H=Bw(y[0],["atts_since","attachments"]);H.open_revs=y.map(function(N){return N.rev});H.open_revs=H.open_revs.filter(BL);var I=BL;0===H.open_revs.length&&(delete H.open_revs,I=zX);["revs","attachments","binary","ajax",
"latest"].forEach(function(N){N in h&&(H[N]=h[N])});e.get(x,H,function(N,J){N=N?[{error:N}]:I(J);n[D]={id:x,docs:N};++k===f&&b();c()})})}var a=h.docs,d=new Mn;a.forEach(function(r){d.has(r.id)?d.get(r.id).push(r):d.set(r.id,[r])});var f=d.size,k=0,n=Array(f),p=[];d.forEach(function(r,u){p.push(u)});var q=0;c()}function AX(e){Cw&&addEventListener("storage",function(h){e.emit(h.key)})}function wu(){vn.EventEmitter.call(this);this._listeners={};AX(this)}function mo(e){if("undefined"!==typeof console&&
"function"===typeof console[e]){var h=Array.prototype.slice.call(arguments,1);console[e].apply(console,h)}}function BX(e){var h=0;e||(h=2E3);e=parseInt(e,10)||0;h=parseInt(h,10);h=h!==h||h<=e?(e||1)<<1:h+1;6E5<h&&(e=3E5,h=6E5);return~~((h-e)*Math.random()+e)}function tD(e,h){mo("info","The above "+e+" is totally normal. "+h)}function Xk(e,h,l){Error.call(this,l);this.status=e;this.name=h;this.message=l;this.error=!0}function Tj(e,h){function l(b){for(var c in e)"function"!==typeof e[c]&&(this[c]=
e[c]);void 0!==b&&(this.reason=b)}l.prototype=Xk.prototype;return new l(h)}function xu(e){if("object"!==typeof e){var h=e;e=DL;e.data=h}"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409);"name"in e||(e.name=e.error||"unknown");"status"in e||(e.status=500);"message"in e||(e.message=e.message||e.reason);return e}function uD(e){var h={},l=e.filter&&"function"===typeof e.filter;h.query=e.query_params;return function(b){b.doc||(b.doc={});var c;if(c=l)try{c=!(0,e.filter)(b.doc,h)}catch(a){c=
Tj(qz,"Filter function threw: "+a.toString())}if("object"===typeof c)return c;if(c)return!1;if(!e.include_docs)delete b.doc;else if(!e.attachments)for(var g in b.doc._attachments)b.doc._attachments.hasOwnProperty(g)&&(b.doc._attachments[g].stub=!0);return!0}}function rz(e){for(var h=[],l=0,b=e.length;l<b;l++)h=h.concat(e[l]);return h}function EL(e){var h;e?"string"!==typeof e?h=Tj(FL):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(h=Tj(CX)):h=Tj(DX);if(h)throw h;}function Ip(e){return"boolean"===typeof e._remote?
e._remote:"function"===typeof e.type?(mo("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type()):!1}function vD(e){if(!e)return null;var h=e.split("/");return 2===h.length?h:1===h.length?[e,e]:null}function GL(e){return(e=vD(e))?e.join("/"):null}function HL(e){e=EX.exec(e);for(var h={},l=14;l--;){var b=IL[l],c=e[l]||"",g=-1!==["user","password"].indexOf(b);h[b]=g?decodeURIComponent(c):c}h.queryKey={};h[IL[12]].replace(FX,function(a,d,f){d&&(h.queryKey[d]=
f)});return h}function wD(e,h){var l=[],b=[],c;for(c in h)h.hasOwnProperty(c)&&(l.push(c),b.push(h[c]));l.push(e);return Function.apply(null,l).apply(null,b)}function sz(e,h,l){return new Promise(function(b,c){e.get(h,function(g,a){if(g){if(404!==g.status)return c(g);a={}}g=a._rev;a=l(a);if(!a)return b({updated:!1,rev:g});a._id=h;a._rev=g;b(GX(e,a,l))})})}function GX(e,h,l){return e.put(h).then(function(b){return{updated:!0,rev:b.rev}},function(b){if(409!==b.status)throw b;return sz(e,h._id,l)})}
function xD(e,h){e=e||[];h=h||{};try{return new Blob(e,h)}catch(c){if("TypeError"!==c.name)throw c;for(var l=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),b=0;b<e.length;b+=1)l.append(e[b]);return l.getBlob(h.type)}}function yD(e,h){for(var l=e.length,b=new ArrayBuffer(l),c=new Uint8Array(b),g=0;g<l;g++)c[g]=e.charCodeAt(g);return xD([b],{type:h})}function zD(e,h){return yD(atob(e),
h)}function JL(e,h){var l=new FileReader,b="function"===typeof l.readAsBinaryString;l.onloadend=function(c){var g=c.target.result||"";if(b)return h(g);c="";g=new Uint8Array(g);for(var a=g.byteLength,d=0;d<a;d++)c+=String.fromCharCode(g[d]);h(c)};b?l.readAsBinaryString(e):l.readAsArrayBuffer(e)}function KL(e,h){JL(e,function(l){h(l)})}function AD(e,h){KL(e,function(l){h(btoa(l))})}function HX(e,h){var l=new FileReader;l.onloadend=function(b){b=b.target.result||new ArrayBuffer(0);h(b)};l.readAsArrayBuffer(e)}
function IX(e,h,l){return e.webkitSlice?e.webkitSlice(h,l):e.slice(h,l)}function JX(e,h,l,b,c){if(0<l||b<h.size)h=IX(h,l,b);HX(h,function(g){e.append(g);c()})}function KX(e,h,l,b,c){if(0<l||b<h.length)h=h.substring(l,b);e.appendBinary(h);c()}function BD(e,h){function l(){LX(c)}function b(){var q=n.end(!0);q=btoa(q);h(q);n.destroy()}function c(){var q=k*d,r=q+d;k++;k<f?p(n,e,q,r,l):p(n,e,q,r,b)}var g="string"===typeof e,a=g?e.length:e.size,d=Math.min(32768,a),f=Math.ceil(a/d),k=0,n=g?new tz:new tz.ArrayBuffer,
p=g?KX:JX;c()}function LL(e,h){e=bm(e);if(!h)return ML.v4().replace(/-/g,"").toLowerCase();delete e._rev_tree;return tz.hash(JSON.stringify(e))}function As(e){e=e.rev_tree.slice();for(var h;h=e.pop();){var l=h.ids,b=l[2];h=h.pos;if(b.length){l=0;for(var c=b.length;l<c;l++)e.push({pos:h+1,ids:b[l]})}else if(b=!!l[1].deleted,l=l[0],!g||(d!==b?d:a!==h?a<h:g<l)){var g=l;var a=h;var d=b}}return a+"-"+g}function Bs(e,h){e=e.slice();for(var l;l=e.pop();){var b=l.pos,c=l.ids,g=c[2];l=h(0===g.length,b,c[0],
l.ctx,c[1]);c=0;for(var a=g.length;c<a;c++)e.push({pos:b+1,ids:g[c],ctx:l})}}function MX(e,h){return e.pos-h.pos}function CD(e){var h=[];Bs(e,function(b,c,g,a,d){b&&h.push({rev:c+"-"+g,pos:c,opts:d})});h.sort(MX).reverse();e=0;for(var l=h.length;e<l;e++)delete h[e].pos;return h}function DD(e){var h=As(e);e=CD(e.rev_tree);for(var l=[],b=0,c=e.length;b<c;b++){var g=e[b];g.rev===h||g.opts.deleted||l.push(g.rev)}return l}function NX(e){var h=[];Bs(e.rev_tree,function(l,b,c,g,a){"available"!==a.status||
l||(h.push(b+"-"+c),a.status="missing")});return h}function NL(e){var h=[];e=e.slice();for(var l;l=e.pop();){var b=l.pos,c=l.ids,g=c[0],a=c[1];c=c[2];var d=0===c.length;l=l.history?l.history.slice():[];l.push({id:g,opts:a});d&&h.push({pos:b+1-l.length,ids:l});g=0;for(a=c.length;g<a;g++)e.push({pos:b+1,ids:c[g],history:l})}return h.reverse()}function OX(e,h){return e.pos-h.pos}function OL(e,h){for(var l,b,c=e.length;h<c;h++){var g=e[h];g=[g.id,g.opts,[]];b?(b[2].push(g),b=g):l=b=g}return l}function PX(e,
h){return e[0]<h[0]?-1:1}function PL(e,h){h=[{tree1:e,tree2:h}];for(var l=!1;0<h.length;){var b=h.pop(),c=b.tree1;b=b.tree2;if(c[1].status||b[1].status)c[1].status="available"===c[1].status||"available"===b[1].status?"available":"missing";for(var g=0;g<b[2].length;g++)if(c[2][0]){for(var a=!1,d=0;d<c[2].length;d++)c[2][d][0]===b[2][g][0]&&(h.push({tree1:c[2][d],tree2:b[2][g]}),a=!0);if(!a){l="new_branch";a=c[2];d=b[2][g];for(var f,k=a,n=d,p=PX,q=0,r=k.length;q<r;)f=q+r>>>1,0>p(k[f],n)?q=f+1:r=f;a.splice(q,
0,d)}}else l="new_leaf",c[2][0]=b[2][g]}return{conflicts:l,tree:e}}function QL(e,h,l){var b=[],c=!1,g=!1;if(!e.length)return{tree:[h],conflicts:"new_leaf"};for(var a=0,d=e.length;a<d;a++){var f=e[a];if(f.pos===h.pos&&f.ids[0]===h.ids[0])g=PL(f.ids,h.ids),b.push({pos:f.pos,ids:g.tree}),c=c||g.conflicts,g=!0;else if(!0!==l){var k=f.pos<h.pos?f:h,n=f.pos<h.pos?h:f,p=[],q=[];for(q.push({ids:k.ids,diff:n.pos-k.pos,parent:null,parentIdx:null});0<q.length;){var r=q.pop();if(0===r.diff)r.ids[0]===n.ids[0]&&
p.push(r);else for(var u=r.ids[2],x=0,y=u.length;x<y;x++)q.push({ids:u[x],diff:r.diff-1,parent:r.ids,parentIdx:x})}(p=p[0])?(g=PL(p.ids,n.ids),p.parent[2][p.parentIdx]=g.tree,b.push({pos:k.pos,ids:k.ids}),c=c||g.conflicts,g=!0):b.push(f)}else b.push(f)}g||b.push(h);b.sort(OX);return{tree:b,conflicts:c||"internal_node"}}function QX(e,h){e=NL(e);for(var l,b,c=0,g=e.length;c<g;c++){var a=e[c],d=a.ids;if(d.length>h){l||(l={});var f=d.length-h;var k={pos:a.pos+f,ids:OL(d,f)};for(var n=0;n<f;n++)l[a.pos+
n+"-"+d[n].id]=!0}else k={pos:a.pos,ids:OL(d,0)};b=b?QL(b,k,!0).tree:[k]}l&&Bs(b,function(p,q,r){delete l[q+"-"+r]});return{tree:b,revs:l?Object.keys(l):[]}}function RL(e,h,l){e=QL(e,h);l=QX(e.tree,l);return{tree:l.tree,stemmedRevs:l.revs,conflicts:e.conflicts}}function RX(e){return e.ids}function Dq(e,h){h||(h=As(e));h=h.substring(h.indexOf("-")+1);e=e.rev_tree.map(RX);for(var l;l=e.pop();){if(l[0]===h)return!!l[1].deleted;e=e.concat(l[2])}}function Cs(e){return/^_local/.test(e)}function SX(e,h){for(var l=
h.rev_tree.slice(),b;b=l.pop();){var c=b.pos,g=b.ids,a=g[0],d=g[1];g=g[2];var f=0===g.length;b=b.history?b.history.slice():[];b.push({id:a,pos:c,opts:d});if(f)for(d=0,f=b.length;d<f;d++){var k=b[d];if(k.pos+"-"+k.id===e)return c+"-"+a}a=0;for(d=g.length;a<d;a++)l.push({pos:c+1,ids:g[a],history:b})}throw Error("Unable to resolve latest revision for id "+h.id+", rev "+e);}function Dw(e,h,l){function b(){c.cancel()}vn.EventEmitter.call(this);var c=this;this.db=e;h=h?bm(h):{};var g=h.complete=zL(function(d,
f){d?(f=c,0<("listenerCount"in f?f.listenerCount("error"):vn.EventEmitter.listenerCount(f,"error"))&&c.emit("error",d)):c.emit("complete",f);c.removeAllListeners();e.removeListener("destroyed",b)});l&&(c.on("complete",function(d){l(null,d)}),c.on("error",l));e.once("destroyed",b);h.onChange=function(d,f,k){if(!c.isCancelled)try{c.emit("change",d,f,k)}catch(n){mo("error",'Error in .on("change", function):',n)}};var a=new Promise(function(d,f){h.complete=function(k,n){k?f(k):d(n)}});c.once("cancel",
function(){e.removeListener("destroyed",b);h.complete(null,{status:"cancelled"})});this.then=a.then.bind(a);this["catch"]=a["catch"].bind(a);this.then(function(d){g(null,d)},g);e.taskqueue.isReady?c.validateChanges(h):e.taskqueue.addTask(function(d){d?h.complete(d):c.isCancelled?c.emit("cancel"):c.validateChanges(h)})}function TX(e,h,l){var b=[{rev:e._rev}];"all_docs"===l.style&&(b=CD(h.rev_tree).map(function(c){return{rev:c.rev}}));b={id:h.id,changes:b,doc:e};Dq(h,e._rev)&&(b.deleted=!0);l.conflicts&&
(b.doc._conflicts=DD(h),b.doc._conflicts.length||delete b.doc._conflicts);return b}function ED(e,h){return function(l,b){l||b[0]&&b[0].error?(l=l||b[0],l.docId=h,e(l)):e(null,b.length?b[0]:b)}}function UX(e){for(var h=0;h<e.length;h++){var l=e[h];if(l._deleted)delete l._attachments;else if(l._attachments)for(var b=Object.keys(l._attachments),c=0;c<b.length;c++){var g=b[c];l._attachments[g]=Bw(l._attachments[g],"data digest content_type length revpos stub".split(" "))}}}function VX(e,h){var l=e._id;
var b=h._id;l=l<b?-1:l>b?1:0;if(0!==l)return l;e=e._revisions?e._revisions.start:0;h=h._revisions?h._revisions.start:0;return e<h?-1:e>h?1:0}function WX(e){var h={},l=[];Bs(e,function(b,c,g,a){c=c+"-"+g;b&&(h[c]=0);void 0!==a&&l.push({from:a,to:c});return c});l.reverse();l.forEach(function(b){h[b.from]=void 0===h[b.from]?1+h[b.to]:Math.min(h[b.from],1+h[b.to])});return h}function XX(e){var h="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):0<e.skip?e.keys.slice(e.skip):e.keys;e.keys=h;e.skip=0;delete e.limit;
e.descending&&(h.reverse(),e.descending=!1)}function SL(e){var h=e._compactionQueue[0],l=h.opts,b=h.callback;e.get("_local/compaction").catch(function(){return!1}).then(function(c){c&&c.last_seq&&(l.last_seq=c.last_seq);e._compact(l,function(g,a){g?b(g):b(null,a);Jp(function(){e._compactionQueue.shift();e._compactionQueue.length&&SL(e)})})})}function il(){vn.EventEmitter.call(this);for(var e in il.prototype)"function"===typeof this[e]&&(this[e]=this[e].bind(this))}function Ew(){this.failed=this.isReady=
!1;this.queue=[]}function YX(e,h){var l=e.match(/([a-z-]*):\/\/(.*)/);if(l)return{name:/https?/.test(l[1])?l[1]+"://"+l[2]:l[2],adapter:l[1]};var b=Oj.adapters,c=Oj.preferredAdapters;l=Oj.prefix;h=h.adapter;if(!h)for(var g=0;g<c.length;++g)if(h=c[g],"idb"===h&&"websql"in b&&Cw&&localStorage["_pouch__websqldb_"+l+e])mo("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');else break;b=b[h];return{name:(b&&"use_prefix"in b?b.use_prefix:1)?l+
e:e,adapter:h}}function ZX(e){function h(b){e.removeListener("closed",l);b||e.constructor.emit("destroyed",e.name)}function l(){e.removeListener("destroyed",h);e.constructor.emit("unref",e)}e.once("destroyed",h);e.once("closed",l);e.constructor.emit("ref",e)}function Oj(e,h){if(!(this instanceof Oj))return new Oj(e,h);var l=this;h=h||{};e&&"object"===typeof e&&(h=e,e=h.name,delete h.name);void 0===h.deterministic_revs&&(h.deterministic_revs=!0);this.__opts=h=bm(h);l.auto_compaction=h.auto_compaction;
l.prefix=Oj.prefix;if("string"!==typeof e)throw Error("Missing/invalid DB name");var b=YX((h.prefix||"")+e,h);h.name=b.name;h.adapter=h.adapter||b.adapter;l.name=e;l._adapter=h.adapter;Oj.emit("debug",["adapter","Picked adapter: ",h.adapter]);if(!Oj.adapters[h.adapter]||!Oj.adapters[h.adapter].valid())throw Error("Invalid Adapter: "+h.adapter);il.call(l);l.taskqueue=new Ew;l.adapter=h.adapter;Oj.adapters[h.adapter].call(l,h,function(c){if(c)return l.taskqueue.fail(c);ZX(l);l.emit("created",l);Oj.emit("created",
l.name);l.taskqueue.ready(l)})}function TL(e,h){for(var l=0,b=h.length;l<b&&(e=e[h[l]],e);l++);return e}function UL(e){for(var h=[],l="",b=0,c=e.length;b<c;b++){var g=e[b];"."===g?0<b&&"\\"===e[b-1]?l=l.substring(0,l.length-1)+".":(h.push(l),l=""):l+=g}h.push(l);return h}function $X(e){return e[Object.keys(e)[0]]}function Fw(e){var h={};e.forEach(function(l){Object.keys(l).forEach(function(b){var c=l[b];"object"!==typeof c&&(c={$eq:c});if(-1<VL.indexOf(b))h[b]=c instanceof Array?c.map(function(a){return Fw([a])}):
Fw([c]);else{var g=h[b]=h[b]||{};Object.keys(c).forEach(function(a){var d=c[a];"$gt"===a||"$gte"===a?"undefined"===typeof g.$eq&&("undefined"!==typeof g.$gte?"$gte"===a?d>g.$gte&&(g.$gte=d):d>=g.$gte&&(delete g.$gte,g.$gt=d):"undefined"!==typeof g.$gt?"$gte"===a?d>g.$gt&&(delete g.$gt,g.$gte=d):d>g.$gt&&(g.$gt=d):g[a]=d):"$lt"===a||"$lte"===a?"undefined"===typeof g.$eq&&("undefined"!==typeof g.$lte?"$lte"===a?d<g.$lte&&(g.$lte=d):d<=g.$lte&&(delete g.$lte,g.$lt=d):"undefined"!==typeof g.$lt?"$lte"===
a?d<g.$lt&&(delete g.$lt,g.$lte=d):d<g.$lt&&(g.$lt=d):g[a]=d):"$ne"===a?"$ne"in g?g.$ne.push(d):g.$ne=[d]:"$eq"===a?(delete g.$gt,delete g.$gte,delete g.$lt,delete g.$lte,delete g.$ne,g.$eq=d):g[a]=d})}})});return h}function WL(e){for(var h in e){if(Array.isArray(e))for(var l in e)e[l].$and&&(e[l]=Fw(e[l].$and));var b=e[h];"object"===typeof b&&WL(b)}return e}function XL(e,h){for(var l in e){"$and"===l&&(h=!0);var b=e[l];"object"===typeof b&&(h=XL(b,h))}return h}function aY(e){var h=bm(e);e=!1;XL(h,
!1)&&(h=WL(h),"$and"in h&&(h=Fw(h.$and)),e=!0);["$or","$nor"].forEach(function(a){a in h&&h[a].forEach(function(d){for(var f=Object.keys(d),k=0;k<f.length;k++){var n=f[k],p=d[n];if("object"!==typeof p||null===p)d[n]={$eq:p}}})});"$not"in h&&(h.$not=Fw([h.$not]));for(var l=Object.keys(h),b=0;b<l.length;b++){var c=l[b],g=h[c];"object"!==typeof g||null===g?g={$eq:g}:"$ne"in g&&!e&&(g.$ne=[g.$ne]);h[c]=g}return h}function om(e,h){if(e===h)return 0;e=Ds(e);h=Ds(h);var l=FD(e),b=FD(h);if(0!==l-b)return l-
b;switch(typeof e){case "number":return e-h;case "boolean":return e<h?-1:1;case "string":return e===h?0:e>h?1:-1}if(Array.isArray(e))a:{l=Math.min(e.length,h.length);for(b=0;b<l;b++){var c=om(e[b],h[b]);if(0!==c){e=c;break a}}e=e.length===h.length?0:e.length>h.length?1:-1}else a:{l=Object.keys(e);b=Object.keys(h);c=Math.min(l.length,b.length);for(var g=0;g<c;g++){var a=om(l[g],b[g]);if(0!==a){e=a;break a}a=om(e[l[g]],h[b[g]]);if(0!==a){e=a;break a}}e=l.length===b.length?0:l.length>b.length?1:-1}return e}
function Ds(e){switch(typeof e){case "undefined":return null;case "number":if(Infinity===e||-Infinity===e||isNaN(e))return null;break;case "object":var h=e;if(Array.isArray(e)){var l=e.length;e=Array(l);for(var b=0;b<l;b++)e[b]=Ds(h[b])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(l in e={},h)h.hasOwnProperty(l)&&(b=h[l],"undefined"!==typeof b&&(e[l]=Ds(b)))}}return e}function bY(e){if(null!==e)switch(typeof e){case "boolean":return e?1:0;case "number":if(0===e)e="1";else{var h=e.toExponential().split(/e\+?/),
l=parseInt(h[1],10);e=0>e;l=((e?-l:l)- -324).toString();for(var b="",c=3-l.length;b.length<c;)b+="0";l=(e?"0":"2")+(""+(b+l));h=Math.abs(parseFloat(h[0]));e&&(h=10-h);e=h.toFixed(20);e=e.replace(/\.?0+$/,"");e=l+=""+e}return e;case "string":return e.replace(/\u0002/g,"\u0002\u0002").replace(/\u0001/g,"\u0001\u0002").replace(/\u0000/g,"\u0001\u0001");case "object":var g=Array.isArray(e);h=g?e:Object.keys(e);l=-1;b=h.length;c="";if(g)for(;++l<b;)c+=Ro(h[l]);else for(;++l<b;)g=h[l],c+=Ro(g)+Ro(e[g]);
return c}return""}function Ro(e){e=Ds(e);return FD(e)+""+bY(e)+"\x00"}function FD(e){var h=["boolean","number","string","object"].indexOf(typeof e);if(~h)return null===e?1:Array.isArray(e)?5:3>h?h+2:h+3;if(Array.isArray(e))return 5}function cY(e){function h(l){return e.map(function(b){b=Object.keys(b)[0];b=UL(b);return TL(l,b)})}return function(l,b){var c=h(l.doc),g=h(b.doc);c=om(c,g);if(0!==c)return c;l=l.doc._id;b=b.doc._id;return l<b?-1:l>b?1:0}}function dY(e,h,l){e=e.filter(function(c){return yu(c.doc,
h.selector,l)});if(h.sort){var b=cY(h.sort);e=e.sort(b);"string"!==typeof h.sort[0]&&"desc"===$X(h.sort[0])&&(e=e.reverse())}if("limit"in h||"skip"in h)b=h.skip||0,e=e.slice(b,("limit"in h?h.limit:e.length)+b);return e}function yu(e,h,l){return l.every(function(b){var c=h[b],g=UL(b),a=TL(e,g);return-1<VL.indexOf(b)?eY(b,c,e):GD(c,e,g,a)})}function GD(e,h,l,b){return e?"object"===typeof e?Object.keys(e).every(function(c){var g=e[c];if(!YL[c])throw Error('unknown operator "'+c+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');
return YL[c](h,g,l,b)}):e===b:!0}function eY(e,h,l){return"$or"===e?h.some(function(b){return yu(l,b,Object.keys(b))}):"$not"===e?!yu(l,h,Object.keys(h)):!h.find(function(b){return yu(l,b,Object.keys(b))})}function Gw(e){return"undefined"!==typeof e&&null!==e}function Es(e){return"undefined"!==typeof e}function ZL(e,h){return h.some(function(l){return e instanceof Array?-1<e.indexOf(l):e===l})}function fY(e,h){return h.every(function(l){return-1<e.indexOf(l)})}function gY(e,h){switch(h){case "null":return null===
e;case "boolean":return"boolean"===typeof e;case "number":return"number"===typeof e;case "string":return"string"===typeof e;case "array":return e instanceof Array;case "object":return"[object Object]"==={}.toString.call(e)}throw Error(h+" not supported as a type.Please use one of object, string, array, number, boolean or null.");}function hY(e,h){if(e.selector&&e.filter&&"_selector"!==e.filter)return h(Error('selector invalid for filter "'+("string"===typeof e.filter?e.filter:"function")+'"'));h()}
function iY(e){e.view&&!e.filter&&(e.filter="_view");e.selector&&!e.filter&&(e.filter="_selector");e.filter&&"string"===typeof e.filter&&("_view"===e.filter?e.view=GL(e.view):e.filter=GL(e.filter))}function jY(e,h){return h.filter&&"string"===typeof h.filter&&!h.doc_ids&&!Ip(e.db)}function kY(e,h){var l=h.complete;if("_view"===h.filter){if(!h.view||"string"!==typeof h.view){var b=Tj(qz,"`view` filter parameter not found or invalid.");return l(b)}var c=vD(h.view);e.db.get("_design/"+c[0],function(a,
d){if(e.isCancelled)return l(null,{status:"cancelled"});if(a)return l(xu(a));a=d&&d.views&&d.views[c[1]]&&d.views[c[1]].map;if(!a)return l(Tj(So,d.views?"missing json key: "+c[1]:"missing json key: views"));d=['return function(doc) {\n  "use strict";\n  var emitted = false;\n  var emit = function (a, b) {\n    emitted = true;\n  };',"  var view = "+a+";","  view(doc);\n  if (emitted) {\n    return true;\n  }\n};"].join("\n");d=wD(d,{});h.filter=d;e.doChanges(h)})}else if(h.selector)h.filter=function(a){var d=
h.selector;if("object"!==typeof d)throw Error("Selector error: expected a JSON object");d=aY(d);return(a=dY([{doc:a}],{selector:d},Object.keys(d)))&&1===a.length},e.doChanges(h);else{var g=vD(h.filter);e.db.get("_design/"+g[0],function(a,d){if(e.isCancelled)return l(null,{status:"cancelled"});if(a)return l(xu(a));a=d&&d.filters&&d.filters[g[1]];if(!a)return l(Tj(So,d&&d.filters?"missing json key: "+g[1]:"missing json key: filters"));h.filter=wD('"use strict";\nreturn '+a+";",{});e.doChanges(h)})}}
function $L(e){return e.reduce(function(h,l){h[l]=!0;return h},{})}function aM(e){if(!/^\d+-/.test(e))return Tj(bM);var h=e.indexOf("-"),l=e.substring(0,h);e=e.substring(h+1);return{prefix:parseInt(l,10),id:e}}function cM(e,h,l){l||(l={deterministic_revs:!0});var b={status:"available"};e._deleted&&(b.deleted=!0);if(h){e._id||(e._id=uz());var c=LL(e,l.deterministic_revs);if(e._rev){h=aM(e._rev);if(h.error)return h;e._rev_tree=[{pos:h.prefix,ids:[h.id,{status:"missing"},[[c,b,[]]]]}];var g=h.prefix+
1}else e._rev_tree=[{pos:1,ids:[c,b,[]]}],g=1}else{if(e._revisions){c=e._revisions;g=c.start-c.ids.length+1;c=c.ids;h=[c[0],b,[]];l=1;for(var a=c.length;l<a;l++)h=[c[l],{status:"missing"},[h]];e._rev_tree=[{pos:g,ids:h}];g=e._revisions.start;c=e._revisions.ids[0]}if(!e._rev_tree){h=aM(e._rev);if(h.error)return h;g=h.prefix;c=h.id;e._rev_tree=[{pos:g,ids:[c,b,[]]}]}}EL(e._id);e._rev=g+"-"+c;b={metadata:{},data:{}};for(var d in e)if(Object.prototype.hasOwnProperty.call(e,d)){if((g="_"===d[0])&&!lY[d])throw e=
Tj(dM,d),e.message=dM.message+": "+d,e;g&&!mY[d]?b.metadata[d.slice(1)]=e[d]:b.data[d]=e[d]}return b}function nY(e,h,l){try{var b=atob(e.data)}catch(c){b={error:Tj(eM,"Attachment is not a valid base64 string")}}if(b.error)return l(b.error);e.length=b.length;e.data="blob"===h?yD(b,e.content_type):"base64"===h?btoa(b):b;BD(b,function(c){e.digest="md5-"+c;l()})}function oY(e,h,l){BD(e.data,function(b){e.digest="md5-"+b;e.length=e.data.size||e.data.length||0;"binary"===h?KL(e.data,function(c){e.data=
c;l()}):"base64"===h?AD(e.data,function(c){e.data=c;l()}):l()})}function pY(e,h,l){if(e.stub)return l();"string"===typeof e.data?nY(e,h,l):oY(e,h,l)}function qY(e,h,l){function b(){c++;e.length===c&&(g?l(g):l())}if(!e.length)return l();var c=0,g;e.forEach(function(a){function d(p){g=p;k++;k===f.length&&b()}var f=a.data&&a.data._attachments?Object.keys(a.data._attachments):[],k=0;if(!f.length)return b();for(var n in a.data._attachments)a.data._attachments.hasOwnProperty(n)&&pY(a.data._attachments[n],
h,d)})}function rY(e,h,l,b,c,g,a,d,f){e=e||1E3;var k=d.new_edits,n=new Mn,p=0,q=h.length;h.forEach(function(r,u){if(r._id&&Cs(r._id))l[r._deleted?"_removeLocal":"_putLocal"](r,{ctx:c},function(y,D){g[u]=y||D;++p===q&&f&&f()});else{var x=r.metadata.id;n.has(x)?(q--,n.get(x).push([r,u])):n.set(x,[[r,u]])}});n.forEach(function(r,u){function x(){++D<r.length?y():++p===q&&f&&f()}function y(){var H=r[D],I=H[0];H=H[1];if(b.has(u)){var N=e,J=b.get(u);b:{var sa=I.metadata.rev;var ja=J.rev_tree.slice();var Ha=
sa.split("-");sa=parseInt(Ha[0],10);Ha=Ha[1];for(var Qa;Qa=ja.pop();){if(Qa.pos===sa&&Qa.ids[0]===Ha){ja=!0;break b}for(var ec=Qa.ids[2],mc=0,hc=ec.length;mc<hc;mc++)ja.push({pos:Qa.pos+1,ids:ec[mc]})}ja=!1}ja&&!k?(g[H]=I,x()):(Ha=J.winningRev||As(J),ja="deleted"in J?J.deleted:Dq(J,Ha),sa="deleted"in I.metadata?I.metadata.deleted:Dq(I.metadata),Qa=/^1-/.test(I.metadata.rev),ja&&!sa&&k&&Qa&&(Qa=I.data,Qa._rev=Ha,Qa._id=I.metadata.id,I=cM(Qa,k)),Ha=RL(J.rev_tree,I.metadata.rev_tree[0],N),k&&(ja&&sa&&
"new_leaf"!==Ha.conflicts||!ja&&"new_leaf"!==Ha.conflicts||ja&&!sa&&"new_branch"===Ha.conflicts)?(I=Tj(zu),g[H]=I,x()):(N=I.metadata.rev,I.metadata.rev_tree=Ha.tree,I.stemmedRevs=Ha.stemmedRevs||[],J.rev_map&&(I.metadata.rev_map=J.rev_map),J=As(I.metadata),sa=Dq(I.metadata,J),ja=ja===sa?0:ja<sa?-1:1,N=N===J?sa:Dq(I.metadata,N),a(I,J,sa,N,!0,ja,H,x)))}else J=RL([],I.metadata.rev_tree[0],e),I.metadata.rev_tree=J.tree,I.stemmedRevs=J.stemmedRevs||[],J=As(I.metadata),N=Dq(I.metadata,J),"was_delete"in
d&&N?(g[H]=Tj(So,"deleted"),x()):k&&"missing"===I.metadata.rev_tree[0].ids[1].status?(I=Tj(zu),g[H]=I,x()):a(I,J,N,N,!1,N?0:1,H,x)}var D=0;y()})}function Kp(e){return function(h){var l="unknown_error";h.target&&h.target.error&&(l=h.target.error.name||h.target.error.message);e(Tj(HD,l,h.type))}}function ID(e,h,l){try{var b=JSON.stringify(e)}catch(c){b=fM.stringify(e)}return{data:b,winningRev:h,deletedOrLocal:l?"1":"0",seq:e.seq,id:e.id}}function Fs(e){if(!e)return null;var h=e.data;try{var l=JSON.parse(h)}catch(b){l=
fM.parse(h)}l.winningRev=e.winningRev;l.deleted="1"===e.deletedOrLocal;l.seq=e.seq;return l}function vz(e){if(!e)return e;var h=e._doc_id_rev.lastIndexOf(":");e._id=e._doc_id_rev.substring(0,h-1);e._rev=e._doc_id_rev.substring(h+1);delete e._doc_id_rev;return e}function gM(e,h,l,b){l?e?"string"!==typeof e?b(e):b(zD(e,h)):b(xD([""],{type:h})):e?"string"!==typeof e?JL(e,function(c){b(btoa(c))}):b(e):b("")}function hM(e,h,l,b){function c(d,f){var k=d._attachments[f];d=k.digest;l.objectStore("attach-store").get(d).onsuccess=
function(n){k.body=n.target.result.body;++a===g.length&&b&&b()}}var g=Object.keys(e._attachments||{});if(!g.length)return b&&b();var a=0;g.forEach(function(d){h.attachments&&h.include_docs?c(e,d):(e._attachments[d].stub=!0,++a===g.length&&b&&b())})}function JD(e,h){return Promise.all(e.map(function(l){if(l.doc&&l.doc._attachments){var b=Object.keys(l.doc._attachments);return Promise.all(b.map(function(c){var g=l.doc._attachments[c];if("body"in g){var a=g.body,d=g.content_type;return new Promise(function(f){gM(a,
d,h,function(k){l.doc._attachments[c]=Au(Bw(g,["digest","content_type"]),{data:k});f()})})}}))}}))}function iM(e,h,l){function b(){c.length&&c.forEach(function(k){d.index("digestSeq").count(IDBKeyRange.bound(k+"::",k+"::\uffff",!1,!1)).onsuccess=function(n){n.target.result||a.delete(k)}})}var c=[],g=l.objectStore("by-sequence"),a=l.objectStore("attach-store"),d=l.objectStore("attach-seq-store"),f=e.length;e.forEach(function(k){g.index("_doc_id_rev").getKey(h+"::"+k).onsuccess=function(n){n=n.target.result;
"number"!==typeof n?(f--,f||b()):(g.delete(n),d.index("seq").openCursor(IDBKeyRange.only(n)).onsuccess=function(p){if(p=p.target.result){var q=p.value.digestSeq.split("::")[0];c.push(q);d.delete(p.primaryKey);p.continue()}else f--,f||b()})}})}function To(e,h,l){try{return{txn:e.transaction(h,l)}}catch(b){return{error:b}}}function sY(e,h,l,b,c,g){function a(){var qd=To(c,"document-store by-sequence attach-store local-store attach-seq-store meta-store".split(" "),"readwrite");if(qd.error)return g(qd.error);
N=qd.txn;N.onabort=Kp(g);N.ontimeout=Kp(g);N.oncomplete=p;J=N.objectStore("document-store");sa=N.objectStore("by-sequence");ja=N.objectStore("attach-store");Ha=N.objectStore("attach-seq-store");Qa=N.objectStore("meta-store");Qa.get("meta-store").onsuccess=function(La){mc=La.target.result;k()};r(function(La){if(La)return Xb=!0,g(La);n()})}function d(){xa=!0;k()}function f(){rY(e.revs_limit,I,b,Ac,N,Lb,u,l,d)}function k(){mc&&xa&&(mc.docCount+=rc,Qa.put(mc))}function n(){function qd(yd){(yd=Fs(yd.target.result))&&
Ac.set(yd.id,yd);++La===I.length&&f()}if(I.length)for(var La=0,Fd=0,na=I.length;Fd<na;Fd++){var Va=I[Fd];Va._id&&Cs(Va._id)?++La===I.length&&f():J.get(Va.metadata.id).onsuccess=qd}}function p(){Xb||(Hw.notify(b._meta.name),g(null,Lb))}function q(qd,La){ja.get(qd).onsuccess=function(Fd){Fd.target.result?La():(Fd=Tj(tY,"unknown stub attachment with digest "+qd),Fd.status=412,La(Fd))}}function r(qd){var La=[];I.forEach(function(Va){Va.data&&Va.data._attachments&&Object.keys(Va.data._attachments).forEach(function(yd){yd=
Va.data._attachments[yd];yd.stub&&La.push(yd.digest)})});if(!La.length)return qd();var Fd=0,na;La.forEach(function(Va){q(Va,function(yd){yd&&!na&&(na=yd);++Fd===La.length&&qd(na)})})}function u(qd,La,Fd,na,Va,yd,me,ta){qd.metadata.winningRev=La;qd.metadata.deleted=Fd;var za=qd.data;za._id=qd.metadata.id;za._rev=qd.metadata.rev;na&&(za._deleted=!0);if(za._attachments&&Object.keys(za._attachments).length)return y(qd,La,Fd,Va,me,ta);rc+=yd;k();x(qd,La,Fd,Va,me,ta)}function x(qd,La,Fd,na,Va,yd){function me(Kb){var V=
qd.stemmedRevs||[];na&&b.auto_compaction&&(V=V.concat(NX(qd.metadata)));V&&V.length&&iM(V,qd.metadata.id,N);W.seq=Kb.target.result;Kb=ID(W,La,Fd);J.put(Kb).onsuccess=ta}function ta(){Lb[Va]={ok:!0,id:W.id,rev:W.rev};Ac.set(qd.metadata.id,qd.metadata);D(qd,W.seq,yd)}var za=qd.data,W=qd.metadata;za._doc_id_rev=W.id+"::"+W.rev;delete za._id;delete za._rev;var ea=sa.put(za);ea.onsuccess=me;ea.onerror=function(Kb){Kb.preventDefault();Kb.stopPropagation();sa.index("_doc_id_rev").getKey(za._doc_id_rev).onsuccess=
function(V){sa.put(za,V.target.result).onsuccess=me}}}function y(qd,La,Fd,na,Va,yd){function me(){za===W.length&&x(qd,La,Fd,na,Va,yd)}function ta(){za++;me()}var za=0,W=Object.keys(qd.data._attachments);W.forEach(function(ea){ea=qd.data._attachments[ea];if(ea.stub)za++,me();else{var Kb=ea.data;delete ea.data;ea.revpos=parseInt(La,10);H(ea.digest,Kb,ta)}})}function D(qd,La,Fd){function na(){++yd===me.length&&Fd()}function Va(za){za=Ha.put({seq:La,digestSeq:qd.data._attachments[za].digest+"::"+La});
za.onsuccess=na;za.onerror=function(W){W.preventDefault();W.stopPropagation();na()}}var yd=0,me=Object.keys(qd.data._attachments||{});if(!me.length)return Fd();for(var ta=0;ta<me.length;ta++)Va(me[ta])}function H(qd,La,Fd){ja.count(qd).onsuccess=function(na){if(na.target.result)return Fd();ja.put({digest:qd,body:La}).onsuccess=Fd}}var I=h.docs,N,J,sa,ja,Ha,Qa,ec,mc;h=0;for(var hc=I.length;h<hc;h++){var Ua=I[h];Ua._id&&Cs(Ua._id)||(Ua=I[h]=cM(Ua,l.new_edits,e),Ua.error&&!ec&&(ec=Ua))}if(ec)return g(ec);
var xa=!1,rc=0,Lb=Array(I.length),Ac=new Mn,Xb=!1;qY(I,b._meta.blobSupport?"blob":"base64",function(qd){if(qd)return g(qd);a()})}function jM(e,h,l,b,c){function g(q){n=q.target.result;k&&c(k,n,p)}function a(q){k=q.target.result;n&&c(k,n,p)}function d(){if(!k.length)return c();var q=k[k.length-1];if(h&&h.upper)try{var r=IDBKeyRange.bound(q,h.upper,!0,h.upperOpen)}catch(u){if("DataError"===u.name&&0===u.code)return c()}else r=IDBKeyRange.lowerBound(q,!0);h=r;n=k=null;e.getAll(h,b).onsuccess=g;e.getAllKeys(h,
b).onsuccess=a}function f(q){q=q.target.result;if(!q)return c();c([q.key],[q.value],q)}-1===b&&(b=1E3);var k,n;if("function"===typeof e.getAll&&"function"===typeof e.getAllKeys&&1<b&&!l){var p={"continue":d};e.getAll(h,b).onsuccess=g;e.getAllKeys(h,b).onsuccess=a}else l?e.openCursor(h,"prev").onsuccess=f:e.openCursor(h).onsuccess=f}function uY(e,h,l){if("function"===typeof e.getAll)e.getAll(h).onsuccess=l;else{var b=[];e.openCursor(h).onsuccess=function(c){(c=c.target.result)?(b.push(c.value),c.continue()):
l({target:{result:b}})}}}function vY(e,h,l){var b=Array(e.length),c=0;e.forEach(function(g,a){h.get(g).onsuccess=function(d){b[a]=d.target.result?d.target.result:{key:g,error:"not_found"};c++;c===e.length&&l(e,b,{})}})}function wY(e,h,l,b,c){try{if(e&&h)return c?IDBKeyRange.bound(h,e,!l,!1):IDBKeyRange.bound(e,h,!1,!l);if(e)return c?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(h)return c?IDBKeyRange.lowerBound(h,!l):IDBKeyRange.upperBound(h,!l);if(b)return IDBKeyRange.only(b)}catch(g){return{error:g}}return null}
function xY(e,h,l){function b(ja,Ha){ja.openCursor(null,"prev").onsuccess=function(Qa){Qa=Qa.target.result;var ec=void 0;Qa&&Qa.key&&(ec=Qa.key);return Ha({target:{result:[ec]}})}}function c(ja,Ha,Qa){I.get(ja.id+"::"+Qa).onsuccess=function(ec){Ha.doc=vz(ec.target.result)||{};e.conflicts&&(ec=DD(ja),ec.length&&(Ha.doc._conflicts=ec));hM(Ha.doc,e,H)}}function g(ja){for(var Ha=0,Qa=ja.length;Ha<Qa&&N.length!==u;Ha++){var ec=ja[Ha];if(ec.error&&q)N.push(ec);else{var mc=Fs(ec);ec=mc.winningRev;var hc=
{id:mc.id,key:mc.id,value:{rev:ec}};mc.deleted?q&&(N.push(hc),hc.value.deleted=!0,hc.doc=null):0>=r--&&(N.push(hc),e.include_docs&&c(mc,hc,ec))}}}function a(ja,Ha,Qa){Qa&&(g(Ha),N.length<u&&Qa.continue())}function d(ja){ja=ja.target.result;e.descending&&(ja=ja.reverse());g(ja)}function f(){var ja={total_rows:J,offset:e.skip,rows:N};e.update_seq&&void 0!==sa&&(ja.update_seq=sa);l(null,ja)}var k="startkey"in e?e.startkey:!1,n="endkey"in e?e.endkey:!1,p="key"in e?e.key:!1,q="keys"in e?e.keys:!1,r=e.skip||
0,u="number"===typeof e.limit?e.limit:-1,x=!1!==e.inclusive_end,y,D;if(!q&&(D=(y=wY(k,n,x,p,e.descending))&&y.error)&&("DataError"!==D.name||0!==D.code))return l(Tj(HD,D.name,D.message));k=["document-store","by-sequence","meta-store"];e.attachments&&k.push("attach-store");h=To(h,k,"readonly");if(h.error)return l(h.error);var H=h.txn;H.oncomplete=function(){e.attachments?JD(N,e.binary).then(f):f()};H.onabort=Kp(l);h=H.objectStore("document-store");k=H.objectStore("by-sequence");n=H.objectStore("meta-store");
var I=k.index("_doc_id_rev"),N=[],J,sa;n.get("meta-store").onsuccess=function(ja){J=ja.target.result.docCount};e.update_seq&&b(k,function(ja){ja.target.result&&0<ja.target.result.length&&(sa=ja.target.result[0])});if(!D&&0!==u){if(q)return vY(e.keys,h,a);if(-1===u)return uY(h,y,d);jM(h,y,e.descending,u+r,a)}}function yY(e){return(new Promise(function(h){var l=xD([""]);l=e.objectStore("detect-blob-support").put(l,"key");l.onsuccess=function(){var b=navigator.userAgent.match(/Chrome\/(\d+)/),c=navigator.userAgent.match(/Edge\//);
h(c||!b||43<=parseInt(b[1],10))};l.onerror=e.onabort=function(b){b.preventDefault();b.stopPropagation();h(!1)}})).catch(function(){return!1})}function zY(e,h){e.objectStore("document-store").index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(l){h(l.target.result)}}function AY(e,h,l,b){try{e(h,l)}catch(c){b.emit("error",c)}}function kM(){!KD&&LD.length&&(KD=!0,LD.shift()())}function BY(e,h,l){LD.push(function(){e(function(b,c){AY(h,b,c,l);KD=!1;Jp(function(){kM()})})});kM()}function CY(e,
h,l,b){function c(H,I,N,J){if(N.seq!==I)return J();if(N.winningRev===H._rev)return J(N,H);D.get(H._id+"::"+N.winningRev).onsuccess=function(sa){J(N,vz(sa.target.result))}}function g(H,I,N){if(f&&!f.has(H._id))return N();var J=u.get(H._id);if(J)return c(H,I,J,N);y.get(H._id).onsuccess=function(sa){J=Fs(sa.target.result);u.set(H._id,J);c(H,I,J,N)}}function a(){e.complete(null,{results:p,last_seq:k})}e=bm(e);if(e.continuous){var d=l+":"+uz();Hw.addListener(l,d,h,e);Hw.notify(l);return{cancel:function(){Hw.removeListener(l,
d)}}}var f=e.doc_ids&&new Iw(e.doc_ids);e.since=e.since||0;var k=e.since,n="limit"in e?e.limit:-1;0===n&&(n=1);var p=[],q=0,r=uD(e),u=new Mn;h=["document-store","by-sequence"];e.attachments&&h.push("attach-store");b=To(b,h,"readonly");if(b.error)return e.complete(b.error);var x=b.txn;x.onabort=Kp(e.complete);x.oncomplete=function(){!e.continuous&&e.attachments?JD(p).then(a):a()};b=x.objectStore("by-sequence");var y=x.objectStore("document-store");var D=b.index("_doc_id_rev");h=e.since&&!e.descending?
IDBKeyRange.lowerBound(e.since,!0):null;jM(b,h,e.descending,n,function(H,I,N){function J(ec,mc){var hc=e.processChange(mc,ec,e);k=hc.seq=ec.seq;ec=r(hc);if("object"===typeof ec)return Promise.reject(ec);if(!ec)return Promise.resolve();q++;e.return_docs&&p.push(hc);return e.attachments&&e.include_docs?new Promise(function(Ua){hM(mc,e,x,function(){JD([hc],e.binary).then(function(){Ua(hc)})})}):Promise.resolve(hc)}function sa(){for(var ec=[],mc=0,hc=ja.length;mc<hc&&q!==n;mc++){var Ua=ja[mc];Ua&&ec.push(J(Ha[mc],
Ua))}Promise.all(ec).then(function(xa){for(var rc=0,Lb=xa.length;rc<Lb;rc++)if(xa[rc])e.onChange(xa[rc])}).catch(e.complete);q!==n&&N.continue()}if(N&&H.length){var ja=Array(H.length),Ha=Array(H.length),Qa=0;I.forEach(function(ec,mc){ec=vz(ec);g(ec,H[mc],function(hc,Ua){Ha[mc]=hc;ja[mc]=Ua;++Qa===H.length&&sa()})})}})}function lM(e,h){var l=this;BY(function(b){DY(l,e,b)},h,l.constructor)}function DY(e,h,l){function b(q){var r=q.createObjectStore("document-store",{keyPath:"id"});q.createObjectStore("by-sequence",
{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});q.createObjectStore("attach-store",{keyPath:"digest"});q.createObjectStore("meta-store",{keyPath:"id",autoIncrement:!1});q.createObjectStore("detect-blob-support");r.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});q.createObjectStore("local-store",{keyPath:"_id"});q=q.createObjectStore("attach-seq-store",{autoIncrement:!0});q.createIndex("seq","seq");q.createIndex("digestSeq","digestSeq",{unique:!0})}function c(q,
r){var u=q.objectStore("document-store");u.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});u.openCursor().onsuccess=function(x){if(x=x.target.result){var y=x.value,D=Dq(y);y.deletedOrLocal=D?"1":"0";u.put(y);x.continue()}else r()}}function g(q,r){var u=q.objectStore("local-store"),x=q.objectStore("document-store"),y=q.objectStore("by-sequence");x.openCursor().onsuccess=function(D){var H=D.target.result;if(H){var I=H.value;D=I.id;var N=Cs(D);I=As(I);if(N){var J=D+"::"+I;N=D+"::";I=D+"::~";
D=y.index("_doc_id_rev");N=IDBKeyRange.bound(N,I,!1,!1);var sa=D.openCursor(N);sa.onsuccess=function(ja){(sa=ja.target.result)?(ja=sa.value,ja._doc_id_rev===J&&u.put(ja),y.delete(sa.primaryKey),sa.continue()):(x.delete(H.primaryKey),H.continue())}}else H.continue()}else r&&r()}}function a(q){q=q.createObjectStore("attach-seq-store",{autoIncrement:!0});q.createIndex("seq","seq");q.createIndex("digestSeq","digestSeq",{unique:!0})}function d(q,r){var u=q.objectStore("by-sequence"),x=q.objectStore("attach-store"),
y=q.objectStore("attach-seq-store");x.count().onsuccess=function(D){if(!D.target.result)return r();u.openCursor().onsuccess=function(H){H=H.target.result;if(!H)return r();for(var I=H.value,N=H.primaryKey,J=Object.keys(I._attachments||{}),sa={},ja=0;ja<J.length;ja++)sa[I._attachments[J[ja]].digest]=!0;I=Object.keys(sa);for(ja=0;ja<I.length;ja++)y.put({seq:N,digestSeq:I[ja]+"::"+N});H.continue()}}}function f(q){function r(y){return y.data?Fs(y):(y.deleted="1"===y.deletedOrLocal,y)}var u=q.objectStore("by-sequence"),
x=q.objectStore("document-store");x.openCursor().onsuccess=function(y){function D(){var N=ID(I,I.winningRev,I.deleted);x.put(N).onsuccess=function(){H.continue()}}var H=y.target.result;if(H){var I=r(H.value);I.winningRev=I.winningRev||As(I);if(I.seq)return D();(function(){var N=I.id+"::",J=I.id+"::\uffff",sa=0;u.index("_doc_id_rev").openCursor(IDBKeyRange.bound(N,J)).onsuccess=function(ja){ja=ja.target.result;if(!ja)return I.seq=sa,D();var Ha=ja.primaryKey;Ha>sa&&(sa=Ha);ja.continue()}})()}}}var k=
h.name,n=null;e._meta=null;e._remote=!1;e.type=function(){return"idb"};e._id=AL(function(q){q(null,e._meta.instanceId)});e._bulkDocs=function(q,r,u){sY(h,q,r,e,n,u)};e._get=function(q,r,u){function x(){u(H,{doc:y,metadata:D,ctx:I})}var y,D,H,I=r.ctx;if(!I){var N=To(n,["document-store","by-sequence","attach-store"],"readonly");if(N.error)return u(N.error);I=N.txn}I.objectStore("document-store").get(q).onsuccess=function(J){D=Fs(J.target.result);if(!D)return H=Tj(So,"missing"),x();if(r.rev)var sa=r.latest?
SX(r.rev,D):r.rev;else if(sa=D.winningRev,Dq(D))return H=Tj(So,"deleted"),x();J=I.objectStore("by-sequence");sa=D.id+"::"+sa;J.index("_doc_id_rev").get(sa).onsuccess=function(ja){(y=ja.target.result)&&(y=vz(y));if(!y)return H=Tj(So,"missing"),x();x()}}};e._getAttachment=function(q,r,u,x,y){if(x.ctx)q=x.ctx;else{q=To(n,["document-store","by-sequence","attach-store"],"readonly");if(q.error)return y(q.error);q=q.txn}r=u.digest;var D=u.content_type;q.objectStore("attach-store").get(r).onsuccess=function(H){gM(H.target.result.body,
D,x.binary,function(I){y(null,I)})}};e._info=function(q){var r,u,x=To(n,["meta-store","by-sequence"],"readonly");if(x.error)return q(x.error);x=x.txn;x.objectStore("meta-store").get("meta-store").onsuccess=function(y){u=y.target.result.docCount};x.objectStore("by-sequence").openCursor(null,"prev").onsuccess=function(y){r=(y=y.target.result)?y.key:0};x.oncomplete=function(){q(null,{doc_count:u,update_seq:r,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}};e._allDocs=function(q,r){xY(q,
n,r)};e._changes=function(q){return CY(q,e,k,n)};e._close=function(q){n.close();Bu.delete(k);q()};e._getRevisionTree=function(q,r){var u=To(n,["document-store"],"readonly");if(u.error)return r(u.error);u.txn.objectStore("document-store").get(q).onsuccess=function(x){(x=Fs(x.target.result))?r(null,x.rev_tree):r(Tj(So))}};e._doCompaction=function(q,r,u){var x=To(n,["document-store","by-sequence","attach-store","attach-seq-store"],"readwrite");if(x.error)return u(x.error);var y=x.txn;y.objectStore("document-store").get(q).onsuccess=
function(D){D=Fs(D.target.result);Bs(D.rev_tree,function(N,J,sa,ja,Ha){-1!==r.indexOf(J+"-"+sa)&&(Ha.status="missing")});iM(r,q,y);var H=D.winningRev,I=D.deleted;y.objectStore("document-store").put(ID(D,H,I))};y.onabort=Kp(u);y.oncomplete=function(){u()}};e._getLocal=function(q,r){var u=To(n,["local-store"],"readonly");if(u.error)return r(u.error);q=u.txn.objectStore("local-store").get(q);q.onerror=Kp(r);q.onsuccess=function(x){(x=x.target.result)?(delete x._doc_id_rev,r(null,x)):r(Tj(So))}};e._putLocal=
function(q,r,u){"function"===typeof r&&(u=r,r={});delete q._revisions;var x=q._rev,y=q._id;q._rev=x?"0-"+(parseInt(x.split("-")[1],10)+1):"0-1";var D=r.ctx,H;if(!D){D=To(n,["local-store"],"readwrite");if(D.error)return u(D.error);D=D.txn;D.onerror=Kp(u);D.oncomplete=function(){H&&u(null,H)}}var I=D.objectStore("local-store");x?(y=I.get(y),y.onsuccess=function(N){(N=N.target.result)&&N._rev===x?I.put(q).onsuccess=function(){H={ok:!0,id:q._id,rev:q._rev};r.ctx&&u(null,H)}:u(Tj(zu))}):(y=I.add(q),y.onerror=
function(N){u(Tj(zu));N.preventDefault();N.stopPropagation()},y.onsuccess=function(){H={ok:!0,id:q._id,rev:q._rev};r.ctx&&u(null,H)})};e._removeLocal=function(q,r,u){"function"===typeof r&&(u=r,r={});var x=r.ctx;if(!x){x=To(n,["local-store"],"readwrite");if(x.error)return u(x.error);x=x.txn;x.oncomplete=function(){y&&u(null,y)}}var y,D=q._id,H=x.objectStore("local-store");x=H.get(D);x.onerror=Kp(u);x.onsuccess=function(I){(I=I.target.result)&&I._rev===q._rev?(H.delete(D),y={ok:!0,id:D,rev:"0-0"},
r.ctx&&u(null,y)):u(Tj(So))}};e._destroy=function(q,r){Hw.removeAllListeners(k);(q=MD.get(k))&&q.result&&(q.result.close(),Bu.delete(k));q=indexedDB.deleteDatabase(k);q.onsuccess=function(){MD.delete(k);Cw&&k in localStorage&&delete localStorage[k];r(null,{ok:!0})};q.onerror=Kp(r)};var p=Bu.get(k);if(p)return n=p.idb,e._meta=p.global,Jp(function(){l(null,e)});p=indexedDB.open(k,5);MD.set(k,p);p.onupgradeneeded=function(q){function r(){var H=y[D-1];D++;H&&H(x,r)}var u=q.target.result;if(1>q.oldVersion)return b(u);
var x=q.currentTarget.transaction;3>q.oldVersion&&u.createObjectStore("local-store",{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});4>q.oldVersion&&a(u);var y=[c,g,d,f],D=q.oldVersion;r()};p.onsuccess=function(q){function r(){"undefined"!==typeof I&&y&&(e._meta={name:k,instanceId:N,blobSupport:I},Bu.set(k,{idb:n,global:e._meta}),l(null,e))}function u(){if("undefined"!==typeof H&&"undefined"!==typeof D){var J=k+"_id";J in D?N=D[J]:D[J]=N=uz();D.docCount=H;x.objectStore("meta-store").put(D)}}
n=q.target.result;n.onversionchange=function(){n.close();Bu.delete(k)};n.onabort=function(J){mo("error","Database has a global failure",J.target.error);n.close();Bu.delete(k)};var x=n.transaction(["meta-store","detect-blob-support","document-store"],"readwrite"),y=!1,D,H,I,N;x.objectStore("meta-store").get("meta-store").onsuccess=function(J){D=J.target.result||{id:"meta-store"};u()};zY(x,function(J){H=J;u()});ND||(ND=yY(x));ND.then(function(J){I=J;r()});x.oncomplete=function(){y=!0;r()};x.onabort=
Kp(l)};p.onerror=function(q){(q=q.target.error&&q.target.error.message)?-1!==q.indexOf("stored database is a higher version")&&(q=Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):q="Failed to open indexedDB, are you in private browsing mode?";mo("error",q);l(Tj(HD,q))}}function EY(e,h){return new Promise(function(l,b){function c(){f++;e[k++]().then(a,d)}function g(){if(++n===p)q?b(q):l();else for(;f<h&&k<p;)c()}function a(){f--;
g()}function d(r){f--;q=q||r;g()}for(var f=0,k=0,n=0,p=e.length,q;f<h&&k<p;)c()})}function OD(e){var h=(e=e.doc||e.ok)&&e._attachments;h&&Object.keys(h).forEach(function(l){l=h[l];l.data=zD(l.data,l.content_type)})}function Gs(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function mM(e){return e._attachments&&Object.keys(e._attachments)?Promise.all(Object.keys(e._attachments).map(function(h){var l=
e._attachments[h];if(l.data&&"string"!==typeof l.data)return(new Promise(function(b){AD(l.data,b)})).then(function(b){l.data=b})})):Promise.resolve()}function FY(e,h){if(h.prefix){var l=HL(h.prefix).protocol;l="http"===l||"https"===l}else l=!1;l&&(e=h.name.substr(h.prefix.length),e=h.prefix.replace(/\/?$/,"/")+encodeURIComponent(e));h=HL(e);if(h.user||h.password)h.auth={username:h.user,password:h.password};e=h.path.replace(/(^\/|\/$)/g,"").split("/");h.db=e.pop();-1===h.db.indexOf("%")&&(h.db=encodeURIComponent(h.db));
h.path=e.join("/");return h}function cm(e,h){return wz(e,e.db+"/"+h)}function wz(e,h){return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+(e.path?"/":"")+h}function xz(e){return"?"+Object.keys(e).map(function(h){return h+"="+encodeURIComponent(e[h])}).join("&")}function GY(e){var h="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",l=-1!==h.indexOf("msie"),b=-1!==h.indexOf("trident");h=-1!==h.indexOf("edge");e=!("method"in e)||"GET"===e.method;return(l||
b||h)&&e}function PD(e,h){function l(p,q){return Rl(p,vu(function(r){c().then(function(){return q.apply(this,r)}).catch(function(u){r.pop()(u)})})).bind(a)}function b(p,q,r){var u={};q=q||{};q.headers=q.headers||new Cu;q.headers.get("Content-Type")||q.headers.set("Content-Type","application/json");q.headers.get("Accept")||q.headers.set("Accept","application/json");return k(p,q).then(function(x){u.ok=x.ok;u.status=x.status;return x.json()}).then(function(x){u.data=x;if(!u.ok){u.data.status=u.status;
x=xu(u.data);if(r)return r(x);throw x;}Array.isArray(u.data)&&(u.data=u.data.map(function(y){return y.error||y.missing?xu(y):y}));if(r)r(null,u.data);else return u})}function c(){if(e.skip_setup)return Promise.resolve();if(n)return n;n=b(f).catch(function(p){return p&&p.status&&404===p.status?(tD(404,"PouchDB is just detecting if the remote exists."),b(f,{method:"PUT"})):Promise.reject(p)}).catch(function(p){return p&&p.status&&412===p.status?!0:Promise.reject(p)});n.catch(function(){n=null});return n}
function g(p){return p.split("/").map(encodeURIComponent).join("/")}var a=this,d=FY(e.name,e),f=cm(d,"");e=bm(e);var k=function(p,q){q=q||{};q.headers=q.headers||new Cu;q.credentials="include";if(e.auth||d.auth){var r=e.auth||d.auth;r=btoa(unescape(encodeURIComponent(r.username+":"+r.password)));q.headers.set("Authorization","Basic "+r)}var u=e.headers||{};Object.keys(u).forEach(function(x){q.headers.append(x,u[x])});GY(q)&&(p+=(-1===p.indexOf("?")?"?":"&")+"_nonce="+Date.now());return(e.fetch||nM)(p,
q)},n;Jp(function(){h(null,a)});a._remote=!0;a.type=function(){return"http"};a.id=l("id",function(p){k(wz(d,"")).then(function(q){return q.json()}).catch(function(){return{}}).then(function(q){q=q&&q.uuid?q.uuid+d.db:cm(d,"");p(null,q)})});a.compact=l("compact",function(p,q){"function"===typeof p&&(q=p,p={});p=bm(p);b(cm(d,"_compact"),{method:"POST"}).then(function(){function r(){a.info(function(u,x){x&&!x.compact_running?q(null,{ok:!0}):setTimeout(r,p.interval||200)})}r()})});a.bulkGet=Rl("bulkGet",
function(p,q){function r(H){var I={};p.revs&&(I.revs=!0);p.attachments&&(I.attachments=!0);p.latest&&(I.latest=!0);b(cm(d,"_bulk_get"+xz(I)),{method:"POST",body:JSON.stringify({docs:p.docs})}).then(function(N){p.attachments&&p.binary&&N.data.results.forEach(function(J){J.docs.forEach(OD)});H(null,N.data)}).catch(H)}function u(){function H(Ha){return function(Qa,ec){J[Ha]=ec.results;++N===I&&q(null,{results:rz(J)})}}for(var I=Math.ceil(p.docs.length/50),N=0,J=Array(I),sa=0;sa<I;sa++){var ja=Bw(p,["revs",
"attachments","binary","latest"]);ja.docs=p.docs.slice(50*sa,Math.min(p.docs.length,50*(sa+1)));CL(x,ja,H(sa))}}var x=this,y=wz(d,""),D=QD[y];"boolean"!==typeof D?r(function(H,I){H?(QD[y]=!1,tD(H.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),u()):(QD[y]=!0,q(null,I))}):D?r(q):u()});a._info=function(p){c().then(function(){return k(cm(d,""))}).then(function(q){return q.json()}).then(function(q){q.host=cm(d,"");p(null,q)}).catch(p)};a.fetch=function(p,q){return c().then(function(){var r=
"/"===p.substring(0,1)?wz(d,p.substring(1)):cm(d,p);return k(r,q)})};a.get=l("get",function(p,q,r){function u(D){function H(J){var sa=I[J];J=Gs(D._id)+"/"+g(J)+"?rev="+D._rev;return k(cm(d,J)).then(function(ja){return"buffer"in ja?ja.buffer():ja.blob()}).then(function(ja){if(q.binary){var Ha=Object.getOwnPropertyDescriptor(ja.__proto__,"type");if(!Ha||Ha.set)ja.type=sa.content_type;return ja}return new Promise(function(Qa){AD(ja,Qa)})}).then(function(ja){delete sa.stub;delete sa.length;sa.data=ja})}
var I=D._attachments,N=I&&Object.keys(I);if(I&&N.length)return N=N.map(function(J){return function(){return H(J)}}),EY(N,5)}function x(D){return Array.isArray(D)?Promise.all(D.map(function(H){if(H.ok)return u(H.ok)})):u(D)}"function"===typeof q&&(r=q,q={});q=bm(q);var y={};q.revs&&(y.revs=!0);q.revs_info&&(y.revs_info=!0);q.latest&&(y.latest=!0);q.open_revs&&("all"!==q.open_revs&&(q.open_revs=JSON.stringify(q.open_revs)),y.open_revs=q.open_revs);q.rev&&(y.rev=q.rev);q.conflicts&&(y.conflicts=q.conflicts);
q.update_seq&&(y.update_seq=q.update_seq);p=Gs(p);y=cm(d,p+xz(y));b(y).then(function(D){return Promise.resolve().then(function(){if(q.attachments)return x(D.data)}).then(function(){r(null,D.data)})}).catch(function(D){D.docId=p;r(D)})});a.remove=l("remove",function(p,q,r,u){"string"===typeof q?(p={_id:p,_rev:q},"function"===typeof r&&(u=r,r={})):"function"===typeof q?(u=q,r={}):(u=r,r=q);q=p._rev||r.rev;q=cm(d,Gs(p._id))+"?rev="+q;b(q,{method:"DELETE"},u).catch(u)});a.getAttachment=l("getAttachment",
function(p,q,r,u){"function"===typeof r&&(u=r,r={});r=r.rev?"?rev="+r.rev:"";p=cm(d,Gs(p))+"/"+g(q)+r;var x;k(p,{method:"GET"}).then(function(y){x=y.headers.get("content-type");if(y.ok)return"undefined"===typeof yz||yz.browser||"function"!==typeof y.buffer?y.blob():y.buffer();throw y;}).then(function(y){"undefined"===typeof yz||yz.browser||(y.type=x);u(null,y)}).catch(function(y){u(y)})});a.removeAttachment=l("removeAttachment",function(p,q,r,u){p=cm(d,Gs(p)+"/"+g(q))+"?rev="+r;b(p,{method:"DELETE"},
u).catch(u)});a.putAttachment=l("putAttachment",function(p,q,r,u,x,y){"function"===typeof x&&(y=x,x=u,u=r,r=null);p=Gs(p)+"/"+g(q);p=cm(d,p);r&&(p+="?rev="+r);if("string"===typeof u){try{var D=atob(u)}catch(H){return y(Tj(eM,"Attachment is not a valid base64 string"))}u=D?yD(D,x):""}b(p,{headers:new Cu({"Content-Type":x}),method:"PUT",body:u},y).catch(y)});a._bulkDocs=function(p,q,r){p.new_edits=q.new_edits;c().then(function(){return Promise.all(p.docs.map(mM))}).then(function(){return b(cm(d,"_bulk_docs"),
{method:"POST",body:JSON.stringify(p)},r)}).catch(r)};a._put=function(p,q,r){c().then(function(){return mM(p)}).then(function(){return b(cm(d,Gs(p._id)),{method:"PUT",body:JSON.stringify(p)})}).then(function(u){r(null,u.data)}).catch(function(u){u.docId=p&&p._id;r(u)})};a.allDocs=l("allDocs",function(p,q){"function"===typeof p&&(q=p,p={});p=bm(p);var r={},u="GET";p.conflicts&&(r.conflicts=!0);p.update_seq&&(r.update_seq=!0);p.descending&&(r.descending=!0);p.include_docs&&(r.include_docs=!0);p.attachments&&
(r.attachments=!0);p.key&&(r.key=JSON.stringify(p.key));p.start_key&&(p.startkey=p.start_key);p.startkey&&(r.startkey=JSON.stringify(p.startkey));p.end_key&&(p.endkey=p.end_key);p.endkey&&(r.endkey=JSON.stringify(p.endkey));"undefined"!==typeof p.inclusive_end&&(r.inclusive_end=!!p.inclusive_end);"undefined"!==typeof p.limit&&(r.limit=p.limit);"undefined"!==typeof p.skip&&(r.skip=p.skip);r=xz(r);if("undefined"!==typeof p.keys){u="POST";var x={keys:p.keys}}b(cm(d,"_all_docs"+r),{method:u,body:JSON.stringify(x)}).then(function(y){p.include_docs&&
p.attachments&&p.binary&&y.data.rows.forEach(OD);q(null,y.data)}).catch(q)});a._changes=function(p){var q="batch_size"in p?p.batch_size:25;p=bm(p);!p.continuous||"heartbeat"in p||(p.heartbeat=1E4);var r="timeout"in p?p.timeout:3E4;"timeout"in p&&p.timeout&&5E3>r-p.timeout&&(r=p.timeout+5E3);"heartbeat"in p&&p.heartbeat&&5E3>r-p.heartbeat&&(r=p.heartbeat+5E3);var u={};"timeout"in p&&p.timeout&&(u.timeout=p.timeout);var x="undefined"!==typeof p.limit?p.limit:!1,y=x;p.style&&(u.style=p.style);if(p.include_docs||
p.filter&&"function"===typeof p.filter)u.include_docs=!0;p.attachments&&(u.attachments=!0);p.continuous&&(u.feed="longpoll");p.seq_interval&&(u.seq_interval=p.seq_interval);p.conflicts&&(u.conflicts=!0);p.descending&&(u.descending=!0);p.update_seq&&(u.update_seq=!0);"heartbeat"in p&&p.heartbeat&&(u.heartbeat=p.heartbeat);p.filter&&"string"===typeof p.filter&&(u.filter=p.filter);p.view&&"string"===typeof p.view&&(u.filter="_view",u.view=p.view);if(p.query_params&&"object"===typeof p.query_params)for(var D in p.query_params)p.query_params.hasOwnProperty(D)&&
(u[D]=p.query_params[D]);var H="GET";if(p.doc_ids){u.filter="_doc_ids";H="POST";var I={doc_ids:p.doc_ids}}else p.selector&&(u.filter="_selector",H="POST",I={selector:p.selector});var N=new HY,J,sa=function(Qa,ec){if(!p.aborted){u.since=Qa;"object"===typeof u.since&&(u.since=JSON.stringify(u.since));p.descending?x&&(u.limit=y):u.limit=!x||y>q?q:y;var mc=cm(d,"_changes"+xz(u)),hc={signal:N.signal,method:H,body:JSON.stringify(I)};J=Qa;p.aborted||c().then(function(){return b(mc,hc,ec)}).catch(ec)}},ja=
{results:[]},Ha=function(Qa,ec){if(!p.aborted){var mc=0;if(ec&&ec.results){mc=ec.results.length;ja.last_seq=ec.last_seq;var hc=null,Ua=null;"number"===typeof ec.pending&&(hc=ec.pending);if("string"===typeof ja.last_seq||"number"===typeof ja.last_seq)Ua=ja.last_seq;ec.results=ec.results.filter(function(xa){y--;var rc=uD(p)(xa);rc&&(p.include_docs&&p.attachments&&p.binary&&OD(xa),p.return_docs&&ja.results.push(xa),p.onChange(xa,hc,Ua));return rc})}else if(Qa){p.aborted=!0;p.complete(Qa);return}ec&&
ec.last_seq&&(J=ec.last_seq);Qa=x&&0>=y||ec&&mc<q||p.descending;(!p.continuous||x&&0>=y)&&Qa?p.complete(null,ja):Jp(function(){sa(J,Ha)})}};sa(p.since||0,Ha);return{cancel:function(){p.aborted=!0;N.abort()}}};a.revsDiff=l("revsDiff",function(p,q,r){"function"===typeof q&&(r=q);b(cm(d,"_revs_diff"),{method:"POST",body:JSON.stringify(p)},r).catch(r)});a._close=function(p){p()};a._destroy=function(p,q){b(cm(d,""),{method:"DELETE"}).then(function(r){q(null,r)}).catch(function(r){404===r.status?q(null,
{ok:!0}):q(r)})}}function Hs(e){this.status=400;this.name="query_parse_error";this.message=e;this.error=!0;try{Error.captureStackTrace(this,Hs)}catch(h){}}function zz(e){this.status=404;this.name="not_found";this.message=e;this.error=!0;try{Error.captureStackTrace(this,zz)}catch(h){}}function Az(e){this.status=500;this.name="invalid_value";this.message=e;this.error=!0;try{Error.captureStackTrace(this,Az)}catch(h){}}function oM(e,h){h&&e.then(function(l){Jp(function(){h(null,l)})},function(l){Jp(function(){h(l)})});
return e}function IY(e){return vu(function(h){var l=h.pop();h=e.apply(this,h);"function"===typeof l&&oM(h,l);return h})}function JY(e,h){return e.then(function(l){return h().then(function(){return l})},function(l){return h().then(function(){throw l;})})}function RD(e,h){return function(){var l=arguments,b=this;return e.add(function(){return h.apply(b,l)})}}function pM(e){e=new Iw(e);var h=Array(e.size),l=-1;e.forEach(function(b){h[++l]=b});return h}function SD(e){var h=Array(e.size),l=-1;e.forEach(function(b,
c){h[++l]=c});return h}function qM(e){return new Az("builtin "+e+" function requires map values to be numbers or number arrays")}function TD(e){for(var h=0,l=0,b=e.length;l<b;l++){var c=e[l];if("number"!==typeof c)if(Array.isArray(c)){h="number"===typeof h?[h]:h;for(var g=0,a=c.length;g<a;g++){var d=c[g];if("number"!==typeof d)throw qM("_sum");"undefined"===typeof h[g]?h.push(d):h[g]+=d}}else throw qM("_sum");else"number"===typeof h?h+=c:h[0]+=c}return h}function rM(e,h){return wD("return ("+e.replace(/;\s*$/,
"")+");",{emit:h,sum:TD,log:KY,isArray:LY,toJSON:MY})}function Jw(){this.promise=new Promise(function(e){e()})}function sM(e){if(!e)return"undefined";switch(typeof e){case "function":return e.toString();case "string":return e.toString();default:return JSON.stringify(e)}}function NY(e,h){return sM(e)+sM(h)+"undefined"}function tM(e,h,l,b,c,g){var a=NY(l,b);if(!c){var d=e._cachedViews=e._cachedViews||{};if(d[a])return d[a]}var f=e.info().then(function(k){var n=k.db_name+"-mrview-"+(c?"temp":tz.hash(a));
return sz(e,"_local/"+g,function(p){p.views=p.views||{};var q=h;-1===q.indexOf("/")&&(q=h+"/"+h);q=p.views[q]=p.views[q]||{};if(!q[n])return q[n]=!0,p}).then(function(){return e.registerDependentDatabase(n).then(function(p){p=p.db;p.auto_compaction=!0;var q={name:n,db:p,sourceDB:e,adapter:e.adapter,mapFun:l,reduceFun:b};return q.db.get("_local/lastSeq").catch(function(r){if(404!==r.status)throw r;}).then(function(r){q.seq=r?r.seq:0;if(d)q.db.once("destroyed",function(){delete d[a]});return q})})})});
d&&(d[a]=f);return f}function UD(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function OY(e){return 1===e.length&&/^1-/.test(e[0].rev)}function uM(e,h){try{e.emit("error",h)}catch(l){mo("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),mo("error",h)}}function vM(e,h){var l=Object.keys(h._attachments);return Promise.all(l.map(function(b){return e.getAttachment(h._id,
b,{rev:h._rev})}))}function PY(e,h,l){var b=Ip(h)&&!Ip(e),c=Object.keys(l._attachments);return b?e.get(l._id).then(function(g){return Promise.all(c.map(function(a){return g._attachments&&g._attachments[a]&&g._attachments[a].digest===l._attachments[a].digest?e.getAttachment(g._id,a):h.getAttachment(l._id,a)}))}).catch(function(g){if(404!==g.status)throw g;return vM(h,l)}):vM(h,l)}function QY(e){var h=[];Object.keys(e).forEach(function(l){e[l].missing.forEach(function(b){h.push({id:l,rev:b})})});return{docs:h,
revs:!0,latest:!0}}function RY(e,h,l,b){function c(d){return e.allDocs({keys:d,include_docs:!0,conflicts:!0}).then(function(f){if(b.cancelled)throw Error("cancelled");f.rows.forEach(function(k){var n;(n=k.deleted||!k.doc||!/^1-/.test(k.value.rev))||(n=k.doc,n=n._attachments&&0<Object.keys(n._attachments).length);n||(n=k.doc,n=n._conflicts&&0<n._conflicts.length);n||(k.doc._conflicts&&delete k.doc._conflicts,g.push(k.doc),delete l[k.id])})})}l=bm(l);var g=[],a=!0;return Promise.resolve().then(function(){var d=
Object.keys(l).filter(function(f){f=l[f].missing;return 1===f.length&&/^1-/.test(f[0])});if(0<d.length)return c(d)}).then(function(){var d=QY(l);if(d.docs.length)return e.bulkGet(d).then(function(f){if(b.cancelled)throw Error("cancelled");return Promise.all(f.results.map(function(k){return Promise.all(k.docs.map(function(n){var p=n.ok;n.error&&(a=!1);return p&&p._attachments?PY(h,e,p).then(function(q){var r=Object.keys(p._attachments);q.forEach(function(u,x){x=p._attachments[r[x]];delete x.stub;delete x.length;
x.data=u});return p}):p}))})).then(function(k){g=g.concat(rz(k).filter(Boolean))})})}).then(function(){return{ok:a,docs:g}})}function VD(e,h,l,b,c){return e.get(h).catch(function(g){if(404===g.status)return"http"!==e.adapter&&"https"!==e.adapter||tD(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:b,_id:h,history:[],replicator:"pouchdb",version:1};throw g;}).then(function(g){if(!c.cancelled&&g.last_seq!==l)return g.history=(g.history||[]).filter(function(a){return a.session_id!==
b}),g.history.unshift({last_seq:l,session_id:b}),g.history=g.history.slice(0,5),g.version=1,g.replicator="pouchdb",g.session_id=b,g.last_seq=l,e.put(g).catch(function(a){if(409===a.status)return VD(e,h,l,b,c);throw a;})})}function Kw(e,h,l,b,c){this.src=e;this.target=h;this.id=l;this.returnValue=b;this.opts=c||{}}function wM(e,h){var l=e[0],b=e.slice(1),c=h[0],g=h.slice(1);return l&&0!==h.length?WD(l.session_id,h)?{last_seq:l.last_seq,history:e}:WD(c.session_id,b)?{last_seq:c.last_seq,history:g}:
wM(b,g):{last_seq:0,history:[]}}function WD(e,h){var l=h[0],b=h.slice(1);return e&&0!==h.length?e===l.session_id?!0:WD(e,b):!1}function xM(e){return"number"===typeof e.status&&4===Math.floor(e.status/100)}function SY(e,h,l,b){if(!1===e.retry)h.emit("error",l),h.removeAllListeners();else{"function"!==typeof e.back_off_function&&(e.back_off_function=BX);h.emit("requestError",l);if("active"===h.state||"pending"===h.state){h.emit("paused",l);h.state="stopped";var c=function(){e.current_back_off=0};h.once("paused",
function(){h.removeListener("active",c)});h.once("active",c)}e.current_back_off=e.current_back_off||0;e.current_back_off=e.back_off_function(e.current_back_off);setTimeout(b,e.current_back_off)}}function TY(e){return Object.keys(e).sort(om).reduce(function(h,l){h[l]=e[l];return h},{})}function UY(e,h,l){var b=l.doc_ids?l.doc_ids.sort(om):"",c=l.filter?l.filter.toString():"",g="",a="",d="";l.selector&&(d=JSON.stringify(l.selector));l.filter&&l.query_params&&(g=JSON.stringify(TY(l.query_params)));l.filter&&
"_view"===l.filter&&(a=l.view.toString());return Promise.all([e.id(),h.id()]).then(function(f){var k=f[0]+f[1]+c+a+g+b+d;return new Promise(function(n){BD(k,n)})}).then(function(f){f=f.replace(/\//g,".").replace(/\+/g,"_");return"_local/"+f})}function yM(e,h,l,b,c){function g(){return Xb?Promise.resolve():UY(e,h,l).then(function(na){Ac=na;Xb=new Kw(e,h,Ac,b,!1===l.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===l.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:
"target"===l.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0})})}function a(){qd=[];if(0!==J.docs.length){var na=J.docs;return h.bulkDocs({docs:na,new_edits:!1},{timeout:l.timeout}).then(function(Va){if(b.cancelled)throw r(),Error("cancelled");var yd=Object.create(null);Va.forEach(function(me){me.error&&(yd[me.id]=me)});Va=Object.keys(yd).length;c.doc_write_failures+=Va;c.docs_written+=na.length-Va;na.forEach(function(me){var ta=yd[me._id];
if(ta)if(c.errors.push(ta),me=(ta.name||"").toLowerCase(),"unauthorized"===me||"forbidden"===me)b.emit("denied",bm(ta));else throw ta;else qd.push(me)})},function(Va){c.doc_write_failures+=na.length;throw Va;})}}function d(){if(J.error)throw Error("There was a problem getting docs.");c.last_seq=ec=J.seq;var na=bm(c);qd.length&&(na.docs=qd,"number"===typeof J.pending&&(na.pending=J.pending,delete J.pending),b.emit("change",na));ja=!0;return Xb.writeCheckpoint(J.seq,La).then(function(){ja=!1;if(b.cancelled)throw r(),
Error("cancelled");J=void 0;D()}).catch(function(Va){I(Va);throw Va;})}function f(){var na={};J.changes.forEach(function(Va){"_user/"!==Va.id&&(na[Va.id]=Va.changes.map(function(yd){return yd.rev}))});return h.revsDiff(na).then(function(Va){if(b.cancelled)throw r(),Error("cancelled");J.diffs=Va})}function k(){return RY(e,h,J.diffs,b).then(function(na){J.error=!na.ok;na.docs.forEach(function(Va){delete J.diffs[Va._id];c.docs_read++;J.docs.push(Va)})})}function n(){b.cancelled||J||(0===N.length?p(!0):
(J=N.shift(),f().then(k).then(a).then(d).then(n).catch(function(na){q("batch processing terminated with error",na)})))}function p(na){if(0===sa.changes.length){if(0===N.length&&!J){if(mc&&Fd.live||Ha)b.state="pending",b.emit("paused");Ha&&r()}}else if(na||Ha||sa.changes.length>=hc){N.push(sa);sa={seq:0,changes:[],docs:[]};if("pending"===b.state||"stopped"===b.state)b.state="active",b.emit("active");n()}}function q(na,Va){Qa||(Va.message||(Va.message=na),c.ok=!1,c.status="aborting",N=[],sa={seq:0,
changes:[],docs:[]},r(Va))}function r(na){if(!Qa){if(b.cancelled&&(c.status="cancelled",ja))return;c.status=c.status||"complete";c.end_time=(new Date).toISOString();c.last_seq=ec;Qa=!0;if(na){na=Tj(na);na.result=c;var Va=(na.name||"").toLowerCase();"unauthorized"===Va||"forbidden"===Va?(b.emit("error",na),b.removeAllListeners()):SY(l,b,na,function(){yM(e,h,l,b)})}else b.emit("complete",c),b.removeAllListeners()}}function u(na,Va,yd){if(b.cancelled)return r();"number"===typeof Va&&(sa.pending=Va);
uD(l)(na)&&(sa.seq=na.seq||yd,sa.changes.push(na),Jp(function(){p(0===N.length&&Fd.live)}))}function x(na){xa=!1;if(b.cancelled)return r();if(0<na.results.length)Fd.since=na.results[na.results.length-1].seq,D(),p(!0);else{var Va=function(){mc?(Fd.live=!0,D()):Ha=!0;p(!0)};J||0!==na.results.length?Va():(ja=!0,Xb.writeCheckpoint(na.last_seq,La).then(function(){ja=!1;c.last_seq=ec=na.last_seq;Va()}).catch(I))}}function y(na){xa=!1;if(b.cancelled)return r();q("changes rejected",na)}function D(){function na(){yd.cancel()}
function Va(){b.removeListener("cancel",na)}if(!xa&&!Ha&&N.length<Ua){xa=!0;b._changes&&(b.removeListener("cancel",b._abortChanges),b._changes.cancel());b.once("cancel",na);var yd=e.changes(Fd).on("change",u);yd.then(Va,Va);yd.then(x).catch(y);l.retry&&(b._changes=yd,b._abortChanges=na)}}function H(){g().then(function(){if(b.cancelled)r();else return Xb.getCheckpoint().then(function(na){ec=na;Fd={since:ec,limit:hc,batch_size:hc,style:"all_docs",doc_ids:rc,selector:Lb,return_docs:!0};l.filter&&("string"!==
typeof l.filter?Fd.include_docs=!0:Fd.filter=l.filter);"heartbeat"in l&&(Fd.heartbeat=l.heartbeat);"timeout"in l&&(Fd.timeout=l.timeout);l.query_params&&(Fd.query_params=l.query_params);l.view&&(Fd.view=l.view);D()})}).catch(function(na){q("getCheckpoint rejected with ",na)})}function I(na){ja=!1;q("writeCheckpoint completed with error",na)}var N=[],J,sa={seq:0,changes:[],docs:[]},ja=!1,Ha=!1,Qa=!1,ec=0,mc=l.continuous||l.live||!1,hc=l.batch_size||100,Ua=l.batches_limit||10,xa=!1,rc=l.doc_ids,Lb=
l.selector,Ac,Xb,qd=[],La=uz();c=c||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var Fd={};b.ready(e,h);b.cancelled?r():(b._addedListeners||(b.once("cancel",r),"function"===typeof l.complete&&(b.once("error",l.complete),b.once("complete",function(na){l.complete(null,na)})),b._addedListeners=!0),"undefined"===typeof l.since?H():g().then(function(){ja=!0;return Xb.writeCheckpoint(l.since,La)}).then(function(){ja=!1;b.cancelled?r():(ec=l.since,
H())}).catch(I))}function Bz(){vn.EventEmitter.call(this);this.cancelled=!1;this.state="pending";var e=this,h=new Promise(function(l,b){e.once("complete",l);e.once("error",b)});e.then=function(l,b){return h.then(l,b)};e.catch=function(l){return h.catch(l)};e.catch(function(){})}function Cz(e,h){var l=h.PouchConstructor;return"string"===typeof e?new l(e,h):e}function XD(e,h,l,b){"function"===typeof l&&(b=l,l={});"undefined"===typeof l&&(l={});if(l.doc_ids&&!Array.isArray(l.doc_ids))throw Tj(qz,"`doc_ids` filter parameter is not a list.");
l.complete=b;l=bm(l);l.continuous=l.continuous||l.live;l.retry="retry"in l?l.retry:!1;l.PouchConstructor=l.PouchConstructor||this;b=new Bz(l);e=Cz(e,l);h=Cz(h,l);yM(e,h,l,b);return b}function VY(e,h,l,b){"function"===typeof l&&(b=l,l={});"undefined"===typeof l&&(l={});l=bm(l);l.PouchConstructor=l.PouchConstructor||this;e=Cz(e,l);h=Cz(h,l);return new YD(e,h,l,b)}function YD(e,h,l,b){function c(I){u.emit("change",{direction:"pull",change:I})}function g(I){u.emit("change",{direction:"push",change:I})}
function a(I){u.emit("denied",{direction:"push",doc:I})}function d(I){u.emit("denied",{direction:"pull",doc:I})}function f(){u.pushPaused=!0;u.pullPaused&&u.emit("paused")}function k(){u.pullPaused=!0;u.pushPaused&&u.emit("paused")}function n(){u.pushPaused=!1;u.pullPaused&&u.emit("active",{direction:"push"})}function p(){u.pullPaused=!1;u.pushPaused&&u.emit("active",{direction:"pull"})}function q(I){return function(N,J){var sa="denied"===N&&(J===d||J===a),ja="paused"===N&&(J===k||J===f),Ha="active"===
N&&(J===p||J===n);if("change"===N&&(J===c||J===g)||sa||ja||Ha)N in D||(D[N]={}),D[N][I]=!0,2===Object.keys(D[N]).length&&u.removeAllListeners(N)}}function r(I,N,J){if(-1==I.listeners(N).indexOf(J))I.on(N,J)}var u=this;this.canceled=!1;var x=l.push?Au({},l,l.push):l,y=l.pull?Au({},l,l.pull):l;this.push=XD(e,h,x);this.pull=XD(h,e,y);this.pullPaused=this.pushPaused=!0;var D={};l.live&&(this.push.on("complete",u.pull.cancel.bind(u.pull)),this.pull.on("complete",u.push.cancel.bind(u.push)));this.on("newListener",
function(I){"change"===I?(r(u.pull,"change",c),r(u.push,"change",g)):"denied"===I?(r(u.pull,"denied",d),r(u.push,"denied",a)):"active"===I?(r(u.pull,"active",p),r(u.push,"active",n)):"paused"===I&&(r(u.pull,"paused",k),r(u.push,"paused",f))});this.on("removeListener",function(I){"change"===I?(u.pull.removeListener("change",c),u.push.removeListener("change",g)):"denied"===I?(u.pull.removeListener("denied",d),u.push.removeListener("denied",a)):"active"===I?(u.pull.removeListener("active",p),u.push.removeListener("active",
n)):"paused"===I&&(u.pull.removeListener("paused",k),u.push.removeListener("paused",f))});this.pull.on("removeListener",q("pull"));this.push.on("removeListener",q("push"));var H=Promise.all([this.push,this.pull]).then(function(I){I={push:I[0],pull:I[1]};u.emit("complete",I);b&&b(null,I);u.removeAllListeners();return I},function(I){u.cancel();b?b(I):u.emit("error",I);u.removeAllListeners();if(b)throw I;});this.then=function(I,N){return H.then(I,N)};this.catch=function(I){return H.catch(I)}}function qr(){this._store=
{}}function Lw(e){this._store=new qr;if(e&&Array.isArray(e))for(var h=0,l=e.length;h<l;h++)this.add(e[h])}function Yk(e,h,l){Error.call(this,l);this.status=e;this.name=h;this.message=l;this.error=!0}function zM(e,h){e=e||[];h=h||{};try{return new Blob(e,h)}catch(c){if("TypeError"!==c.name)throw c;for(var l=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),b=0;b<e.length;b+=1)l.append(e[b]);
return l.getBlob(h.type)}}function AM(e){for(var h=e.length,l=new ArrayBuffer(h),b=new Uint8Array(l),c=0;c<h;c++)b[c]=e.charCodeAt(c);return l}function BM(e,h){return zM([AM(e)],{type:h})}function CM(e,h){var l=new FileReader,b="function"===typeof l.readAsBinaryString;l.onloadend=function(c){var g=c.target.result||"";if(b)return h(g);c="";g=new Uint8Array(g);for(var a=g.byteLength,d=0;d<a;d++)c+=String.fromCharCode(g[d]);h(c)};b?l.readAsBinaryString(e):l.readAsArrayBuffer(e)}function DM(e,h){CM(e,
function(l){h(l)})}function WY(e,h,l){return e.webkitSlice?e.webkitSlice(h,l):e.slice(h,l)}function XY(e,h,l,b,c){if(0<l||b<h.size)h=WY(h,l,b);EM.readAsArrayBuffer(h,function(g){e.append(g);c()})}function YY(e,h,l,b,c){if(0<l||b<h.length)h=h.substring(l,b);e.appendBinary(h);c()}function Dz(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}function Mw(e){var h;if(!e||"object"!==typeof e)return e;if(Array.isArray(e)){var l=[];var b=0;for(h=e.length;b<h;b++)l[b]=Mw(e[b]);return l}if(e instanceof
Date)return e.toISOString();if("undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!==typeof Blob&&e instanceof Blob)return e instanceof ArrayBuffer?"function"===typeof e.slice?e=e.slice(0):(b=new ArrayBuffer(e.byteLength),l=new Uint8Array(b),e=new Uint8Array(e),l.set(e),e=b):(b=e.size,l=e.type,e="function"===typeof e.slice?e.slice(0,b,l):e.webkitSlice(0,b,l)),e;l=Object.getPrototypeOf(e);null===l?l=!0:(l=l.constructor,l="function"==typeof l&&l instanceof l&&FM.call(l)==ZY);if(!l)return e;
l={};for(b in e)Object.prototype.hasOwnProperty.call(e,b)&&(h=Mw(e[b]),"undefined"!==typeof h&&(l[b]=h));return l}function GM(e){var h=!1;return ZD(function(l){if(h)throw Error("once called more than once");h=!0;e.apply(this,l)})}function HM(e){return ZD(function(h){h=Mw(h);var l=this,b="function"===typeof h[h.length-1]?h.pop():!1,c=new Promise(function(g,a){var d;try{var f=GM(function(k,n){k?a(k):g(n)});h.push(f);(d=e.apply(l,h))&&"function"===typeof d.then&&g(d)}catch(k){a(k)}});b&&c.then(function(g){b(null,
g)},b);return c})}function $Y(e,h,l){if(e.constructor.listeners("debug").length){for(var b=["api",e.name,h],c=0;c<l.length-1;c++)b.push(l[c]);e.constructor.emit("debug",b);var g=l[l.length-1];l[l.length-1]=function(a,d){var f=["api",e.name,h];f=f.concat(a?["error",a]:["success",d]);e.constructor.emit("debug",f);g(a,d)}}}function $D(e,h){for(var l={},b=0,c=h.length;b<c;b++){var g=h[b];g in e&&(l[g]=e[g])}return l}function IM(e){return e}function aZ(e){return[{ok:e}]}function bZ(e){Ez&&addEventListener("storage",
function(h){e.emit(h.key)})}function Du(){Fz.EventEmitter.call(this);this._listeners={};bZ(this)}function aE(e){if("undefined"!==typeof console&&"function"===typeof console[e]){var h=Array.prototype.slice.call(arguments,1);console[e].apply(console,h)}}function JM(e){if(!e)return null;var h=e.split("/");return 2===h.length?h:1===h.length?[e,e]:null}function KM(e,h,l){return new Promise(function(b,c){e.get(h,function(g,a){if(g){if(404!==g.status)return c(g);a={}}g=a._rev;a=l(a);if(!a)return b({updated:!1,
rev:g});a._id=h;a._rev=g;b(cZ(e,a,l))})})}function cZ(e,h,l){return e.put(h).then(function(b){return{updated:!0,rev:b.rev}},function(b){if(409!==b.status)throw b;return KM(e,h._id,l)})}function bE(){throw Error("setTimeout has not been defined");}function cE(){throw Error("clearTimeout has not been defined");}function LM(e){if(rr===setTimeout)return setTimeout(e,0);if((rr===bE||!rr)&&setTimeout)return rr=setTimeout,setTimeout(e,0);try{return rr(e,0)}catch(h){try{return rr.call(null,e,0)}catch(l){return rr.call(this||
Eu,e,0)}}}function dZ(){Fu&&Is&&(Fu=!1,Is.length?Eq=Is.concat(Eq):Gz=-1,Eq.length&&MM())}function MM(){if(!Fu){var e=LM(dZ);Fu=!0;for(var h=Eq.length;h;){Is=Eq;for(Eq=[];++Gz<h;)Is&&Is[Gz].run();Gz=-1;h=Eq.length}Is=null;Fu=!1;(function(l){if(sr===clearTimeout)return clearTimeout(l);if((sr===cE||!sr)&&clearTimeout)return sr=clearTimeout,clearTimeout(l);try{sr(l)}catch(b){try{return sr.call(null,l)}catch(c){return sr.call(this||Eu,l)}}})(e)}}function NM(e,h){(this||Eu).fun=e;(this||Eu).array=h}function Fq(){}
function Js(e){return e.call.bind(e)}function Nw(e,h){if("object"!=ad(e))return!1;try{return h(e),!0}catch(l){return!1}}function OM(e){return wn&&Nn?void 0!==no(e):PM(e)||QM(e)||RM(e)||SM(e)||TM(e)||UM(e)||VM(e)||WM(e)||XM(e)||YM(e)||ZM(e)}function PM(e){return wn&&Nn?"Uint8Array"===no(e):"[object Uint8Array]"===xl(e)||eZ(e)&&void 0!==e.buffer}function QM(e){return wn&&Nn?"Uint8ClampedArray"===no(e):"[object Uint8ClampedArray]"===xl(e)}function RM(e){return wn&&Nn?"Uint16Array"===no(e):"[object Uint16Array]"===
xl(e)}function SM(e){return wn&&Nn?"Uint32Array"===no(e):"[object Uint32Array]"===xl(e)}function TM(e){return wn&&Nn?"Int8Array"===no(e):"[object Int8Array]"===xl(e)}function UM(e){return wn&&Nn?"Int16Array"===no(e):"[object Int16Array]"===xl(e)}function VM(e){return wn&&Nn?"Int32Array"===no(e):"[object Int32Array]"===xl(e)}function WM(e){return wn&&Nn?"Float32Array"===no(e):"[object Float32Array]"===xl(e)}function XM(e){return wn&&Nn?"Float64Array"===no(e):"[object Float64Array]"===xl(e)}function YM(e){return wn&&
Nn?"BigInt64Array"===no(e):"[object BigInt64Array]"===xl(e)}function ZM(e){return wn&&Nn?"BigUint64Array"===no(e):"[object BigUint64Array]"===xl(e)}function Hz(e){return"[object Map]"===xl(e)}function Iz(e){return"[object Set]"===xl(e)}function Jz(e){return"[object WeakMap]"===xl(e)}function dE(e){return"[object WeakSet]"===xl(e)}function Kz(e){return"[object ArrayBuffer]"===xl(e)}function $M(e){return"undefined"!=typeof ArrayBuffer&&(Kz.working?Kz(e):e instanceof ArrayBuffer)}function Lz(e){return"[object DataView]"===
xl(e)}function aN(e){return"undefined"!=typeof DataView&&(Lz.working?Lz(e):e instanceof DataView)}function Mz(e){return"[object SharedArrayBuffer]"===xl(e)}function bN(e){return"undefined"!=typeof SharedArrayBuffer&&(Mz.working?Mz(e):e instanceof SharedArrayBuffer)}function cN(e){return Nw(e,fZ)}function dN(e){return Nw(e,gZ)}function eN(e){return Nw(e,hZ)}function fN(e){return gN&&Nw(e,iZ)}function hN(e){return eE&&Nw(e,jZ)}function tr(e,h){var l={seen:[],stylize:kZ};return 3<=arguments.length&&
(l.depth=arguments[2]),4<=arguments.length&&(l.colors=arguments[3]),fE(h)?l.showHidden=h:h&&Dg._extend(l,h),Ks(l.showHidden)&&(l.showHidden=!1),Ks(l.depth)&&(l.depth=2),Ks(l.colors)&&(l.colors=!1),Ks(l.customInspect)&&(l.customInspect=!0),l.colors&&(l.stylize=lZ),Nz(l,e,l.depth)}function lZ(e,h){return(h=tr.styles[h])?"\u001b["+tr.colors[h][0]+"m"+e+"\u001b["+tr.colors[h][1]+"m":e}function kZ(e,h){return e}function Nz(e,h,l){if(e.customInspect&&h&&Oz(h.inspect)&&h.inspect!==Dg.inspect&&(!h.constructor||
h.constructor.prototype!==h)){var b=h.inspect(l,e);return Pz(b)||(b=Nz(e,b,l)),b}var c=function(k,n){if(Ks(n))return k.stylize("undefined","undefined");if(Pz(n))return n="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",k.stylize(n,"string");if(iN(n))return k.stylize(""+n,"number");if(fE(n))return k.stylize(""+n,"boolean");if(null===n)return k.stylize("null","null")}(e,h);if(c)return c;c=Object.keys(h);var g=function(k){var n={};return k.forEach(function(p,q){n[p]=
!0}),n}(c);if(e.showHidden&&(c=Object.getOwnPropertyNames(h)),Ow(h)&&(0<=c.indexOf("message")||0<=c.indexOf("description")))return gE(h);if(0===c.length){if(Oz(h))return e.stylize("[Function"+(h.name?": "+h.name:"")+"]","special");if(Pw(h))return e.stylize(RegExp.prototype.toString.call(h),"regexp");if(Qz(h))return e.stylize(Date.prototype.toString.call(h),"date");if(Ow(h))return gE(h)}var a="",d=!1,f=["{","}"];(jN(h)&&(d=!0,f=["[","]"]),Oz(h))&&(a=" [Function"+(h.name?": "+h.name:"")+"]");return Pw(h)&&
(a=" "+RegExp.prototype.toString.call(h)),Qz(h)&&(a=" "+Date.prototype.toUTCString.call(h)),Ow(h)&&(a=" "+gE(h)),0!==c.length||d&&0!=h.length?0>l?Pw(h)?e.stylize(RegExp.prototype.toString.call(h),"regexp"):e.stylize("[Object]","special"):(e.seen.push(h),b=d?function(k,n,p,q,r){for(var u=[],x=0,y=n.length;x<y;++x)Object.prototype.hasOwnProperty.call(n,String(x))?u.push(hE(k,n,p,q,String(x),!0)):u.push("");return r.forEach(function(D){D.match(/^\d+$/)||u.push(hE(k,n,p,q,D,!0))}),u}(e,h,l,g,c):c.map(function(k){return hE(e,
h,l,g,k,d)}),e.seen.pop(),function(k,n,p){var q=0;return 60<k.reduce(function(r,u){return q++,0<=u.indexOf("\n")&&q++,r+u.replace(/\u001b\[\d\d?m/g,"").length+1},0)?p[0]+(""===n?"":n+"\n ")+" "+k.join(",\n  ")+" "+p[1]:p[0]+n+" "+k.join(", ")+" "+p[1]}(b,a,f)):f[0]+a+f[1]}function gE(e){return"["+Error.prototype.toString.call(e)+"]"}function hE(e,h,l,b,c,g){var a,d,f;if((f=Object.getOwnPropertyDescriptor(h,c)||{value:h[c]}).get?d=f.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):
f.set&&(d=e.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(b,c)||(a="["+c+"]"),d||(0>e.seen.indexOf(f.value)?-1<(d=null===l?Nz(e,f.value,null):Nz(e,f.value,l-1)).indexOf("\n")&&(d=g?d.split("\n").map(function(k){return"  "+k}).join("\n").substr(2):"\n"+d.split("\n").map(function(k){return"   "+k}).join("\n")):d=e.stylize("[Circular]","special")),Ks(a)){if(g&&c.match(/^\d+$/))return d;(a=JSON.stringify(""+c)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,
"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+d}function jN(e){return Array.isArray(e)}function fE(e){return"boolean"==typeof e}function iN(e){return"number"==typeof e}function Pz(e){return"string"==typeof e}function Ks(e){return void 0===e}function Pw(e){return Gu(e)&&"[object RegExp]"===Object.prototype.toString.call(e)}function Gu(e){return"object"==ad(e)&&null!==e}function Qz(e){return Gu(e)&&"[object Date]"===Object.prototype.toString.call(e)}
function Ow(e){return Gu(e)&&("[object Error]"===Object.prototype.toString.call(e)||e instanceof Error)}function Oz(e){return"function"==typeof e}function iE(e){return 10>e?"0"+e.toString(10):e.toString(10)}function mZ(){var e=new Date,h=[iE(e.getHours()),iE(e.getMinutes()),iE(e.getSeconds())].join(":");return[e.getDate(),nZ[e.getMonth()],h].join(" ")}function oZ(e,h){if(!e){var l=Error("Promise was rejected with a falsy value");l.reason=e;e=l}return h(e)}function Ls(e){if("object"!==typeof e||null===
e)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||Gq).db=e;(this||Gq)._ended=!1;(this||Gq)._nexting=!1}function Lp(e){if("object"!==typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||dm).db=e;(this||dm)._operations=[];(this||dm)._written=!1}function pZ(){function e(a){var d=a.length;if(0<d%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");-1===a&&(a=d);return[a,a===
d?0:4-a%4]}function h(a,d,f){for(var k=[],n=d;n<f;n+=3)d=(a[n]<<16&16711680)+(a[n+1]<<8&65280)+(a[n+2]&255),k.push(l[d>>18&63]+l[d>>12&63]+l[d>>6&63]+l[d&63]);return k.join("")}if(kN)return Qw;kN=!0;Qw.byteLength=function(a){a=e(a);var d=a[1];return 3*(a[0]+d)/4-d};Qw.toByteArray=function(a){var d=e(a);var f=d[0];d=d[1];var k=new c(3*(f+d)/4-d),n=0,p=0<d?f-4:f,q;for(q=0;q<p;q+=4)f=b[a.charCodeAt(q)]<<18|b[a.charCodeAt(q+1)]<<12|b[a.charCodeAt(q+2)]<<6|b[a.charCodeAt(q+3)],k[n++]=f>>16&255,k[n++]=
f>>8&255,k[n++]=f&255;2===d&&(f=b[a.charCodeAt(q)]<<2|b[a.charCodeAt(q+1)]>>4,k[n++]=f&255);1===d&&(f=b[a.charCodeAt(q)]<<10|b[a.charCodeAt(q+1)]<<4|b[a.charCodeAt(q+2)]>>2,k[n++]=f>>8&255,k[n++]=f&255);return k};Qw.fromByteArray=function(a){for(var d=a.length,f=d%3,k=[],n=0,p=d-f;n<p;n+=16383)k.push(h(a,n,n+16383>p?p:n+16383));1===f?(a=a[d-1],k.push(l[a>>2]+l[a<<4&63]+"==")):2===f&&(a=(a[d-2]<<8)+a[d-1],k.push(l[a>>10]+l[a>>4&63]+l[a<<2&63]+"="));return k.join("")};for(var l=[],b=[],c="undefined"!==
typeof Uint8Array?Uint8Array:Array,g=0;64>g;++g)l[g]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g],b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(g)]=g;b[45]=62;b[95]=63;return Qw}function qZ(){if(lN)return Rz;lN=!0;Rz.read=function(e,h,l,b,c){var g=8*c-b-1;var a=(1<<g)-1,d=a>>1,f=-7;c=l?c-1:0;var k=l?-1:1,n=e[h+c];c+=k;l=n&(1<<-f)-1;n>>=-f;for(f+=g;0<f;l=256*l+e[h+c],c+=k,f-=8);g=l&(1<<-f)-1;l>>=-f;for(f+=b;0<f;g=256*g+e[h+c],c+=k,f-=8);if(0===
l)l=1-d;else{if(l===a)return g?NaN:Infinity*(n?-1:1);g+=Math.pow(2,b);l-=d}return(n?-1:1)*g*Math.pow(2,l-b)};Rz.write=function(e,h,l,b,c,g){var a,d=8*g-c-1,f=(1<<d)-1,k=f>>1,n=23===c?Math.pow(2,-24)-Math.pow(2,-77):0;g=b?0:g-1;var p=b?1:-1,q=0>h||0===h&&0>1/h?1:0;h=Math.abs(h);isNaN(h)||Infinity===h?(h=isNaN(h)?1:0,b=f):(b=Math.floor(Math.log(h)/Math.LN2),1>h*(a=Math.pow(2,-b))&&(b--,a*=2),h=1<=b+k?h+n/a:h+n*Math.pow(2,1-k),2<=h*a&&(b++,a/=2),b+k>=f?(h=0,b=f):1<=b+k?(h=(h*a-1)*Math.pow(2,c),b+=k):
(h=h*Math.pow(2,k-1)*Math.pow(2,c),b=0));for(;8<=c;e[l+g]=h&255,g+=p,h/=256,c-=8);b=b<<c|h;for(d+=c;0<d;e[l+g]=b&255,g+=p,b/=256,d-=8);e[l+g-p]|=128*q};return Rz}function Jl(){(this||Mp).status="new"}function Hu(e){mN.call(this||Uo,e);(this||Uo)._options=e;(this||Uo)._iterator=null;(this||Uo)._operations=[]}function Iu(e){nN.call(this||Tm,"");(this||Tm)._db=e;(this||Tm)._operations=[];(this||Tm)._iterators=[];oN(this||Tm)}function rZ(e){pN.concat("iterator").forEach(function(h){e["_"+h]=function(){return(this||
Tm)._db[h].apply((this||Tm)._db,arguments)}});e._db.approximateSize&&(e.approximateSize=function(){return(this||Tm)._db.approximateSize.apply((this||Tm)._db,arguments)})}function oN(e){pN.forEach(function(h){e["_"+h]=function(){(this||Tm)._operations.push({method:h,args:arguments})}});"function"===typeof e._db.approximateSize&&(e.approximateSize=function(){(this||Tm)._operations.push({method:"approximateSize",args:arguments})});e._iterator=function(h){h=new qN(h);(this||Tm)._iterators.push(h);return h}}
function rN(){if(sN)return tN;sN=!0;return tN=Dl.EventEmitter}function Ju(){function e(b,c,g){g||(g=Error);var a=function(d){function f(n,p,q){Sd(this,f);return k.call(this,"string"===typeof c?c:c(n,p,q))}vd(f,d);var k=qb(f);return f}(g);a.prototype.name=g.name;a.prototype.code=b;l[b]=a}function h(b,c){if(Array.isArray(b)){var g=b.length;b=b.map(function(a){return String(a)});return 2<g?"one of ".concat(c," ").concat(b.slice(0,g-1).join(", "),", or ")+b[g-1]:2===g?"one of ".concat(c," ").concat(b[0],
" or ").concat(b[1]):"of ".concat(c," ").concat(b[0])}return"of ".concat(c," ").concat(String(b))}if(uN)return jE;uN=!0;var l={};e("ERR_INVALID_OPT_VALUE",function(b,c){return'The value "'+c+'" is invalid for option "'+b+'"'},TypeError);e("ERR_INVALID_ARG_TYPE",function(b,c,g){var a;if(a="string"===typeof c)a="not "===c.substr(0,4);a?(a="must not be",c=c.replace(/^not /,"")):a="must be";var d=void 0;if(void 0===d||d>b.length)d=b.length;" argument"===b.substring(d-9,d)?b="The ".concat(b," ").concat(a,
" ").concat(h(c,"type")):(d=void 0,"number"!==typeof d&&(d=0),d=d+1>b.length?!1:-1!==b.indexOf(".",d),d=d?"property":"argument",b='The "'.concat(b,'" ').concat(d," ").concat(a," ").concat(h(c,"type")));return b+=". Received type ".concat(ad(g))},TypeError);e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");e("ERR_METHOD_NOT_IMPLEMENTED",function(b){return"The "+b+" method is not implemented"});e("ERR_STREAM_PREMATURE_CLOSE","Premature close");e("ERR_STREAM_DESTROYED",function(b){return"Cannot call "+
b+" after a stream was destroyed"});e("ERR_MULTIPLE_CALLBACK","Callback called multiple times");e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");e("ERR_STREAM_WRITE_AFTER_END","write after end");e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);e("ERR_UNKNOWN_ENCODING",function(b){return"Unknown encoding: "+b},TypeError);e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");jE.codes=l;return jE}function kE(e){try{if(!lE.localStorage)return!1}catch(h){return!1}e=
lE.localStorage[e];return null==e?!1:"true"===String(e).toLowerCase()}function vN(e,h){for(var l in e)h[l]=e[l]}function Ms(e,h,l){return Np(e,h,l)}function sZ(e){if(!e)return"utf8";for(var h;;)switch(e){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return e;default:if(h)return;e=(""+e).toLowerCase();h=!0}}function Rw(e){var h=sZ(e);if("string"!==typeof h&&
(mE.isEncoding===wN||!wN(e)))throw Error("Unknown encoding: "+e);this.encoding=h||e;switch(this.encoding){case "utf16le":this.text=tZ;this.end=uZ;e=4;break;case "utf8":this.fillLast=vZ;e=4;break;case "base64":this.text=wZ;this.end=xZ;e=3;break;default:this.write=yZ;this.end=zZ;return}this.lastTotal=this.lastNeed=0;this.lastChar=mE.allocUnsafe(e)}function nE(e){return 127>=e?0:6===e>>5?2:14===e>>4?3:30===e>>3?4:2===e>>6?-1:-2}function AZ(e,h,l){var b=h.length-1;if(b<l)return 0;var c=nE(h[b]);if(0<=
c)return 0<c&&(e.lastNeed=c-1),c;if(--b<l||-2===c)return 0;c=nE(h[b]);if(0<=c)return 0<c&&(e.lastNeed=c-2),c;if(--b<l||-2===c)return 0;c=nE(h[b]);return 0<=c?(0<c&&(2===c?c=0:e.lastNeed=c-3),c):0}function vZ(e){var h=this.lastTotal-this.lastNeed;a:if(128!==(e[0]&192)){this.lastNeed=0;var l="\ufffd"}else{if(1<this.lastNeed&&1<e.length){if(128!==(e[1]&192)){this.lastNeed=1;l="\ufffd";break a}if(2<this.lastNeed&&2<e.length&&128!==(e[2]&192)){this.lastNeed=2;l="\ufffd";break a}}l=void 0}if(void 0!==l)return l;
if(this.lastNeed<=e.length)return e.copy(this.lastChar,h,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,h,0,e.length);this.lastNeed-=e.length}function tZ(e,h){if(0===(e.length-h)%2){if(h=e.toString("utf16le",h)){var l=h.charCodeAt(h.length-1);if(55296<=l&&56319>=l)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],h.slice(0,-1)}return h}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=e[e.length-1];return e.toString("utf16le",
h,e.length-1)}function uZ(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):e}function wZ(e,h){var l=(e.length-h)%3;if(0===l)return e.toString("base64",h);this.lastNeed=3-l;this.lastTotal=3;1===l?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]);return e.toString("base64",h,e.length-l)}function xZ(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",
0,3-this.lastNeed):e}function yZ(e){return e.toString(this.encoding)}function zZ(e){return e&&e.length?this.write(e):""}function oE(){function e(c){var g=!1;return function(){if(!g){g=!0;for(var a=arguments.length,d=Array(a),f=0;f<a;f++)d[f]=arguments[f];c.apply(this,d)}}}function h(){}function l(c,g,a){if("function"===typeof g)return l(c,null,g);g||(g={});a=e(a||h);var d=g.readable||!1!==g.readable&&c.readable,f=g.writable||!1!==g.writable&&c.writable,k=function(){c.writable||p()},n=c._writableState&&
c._writableState.finished,p=function(){f=!1;n=!0;d||a.call(c)},q=c._readableState&&c._readableState.endEmitted,r=function(){d=!1;q=!0;f||a.call(c)},u=function(D){a.call(c,D)},x=function(){var D;if(d&&!q)return c._readableState&&c._readableState.ended||(D=new b),a.call(c,D);if(f&&!n)return c._writableState&&c._writableState.ended||(D=new b),a.call(c,D)},y=function(){c.req.on("finish",p)};if(c.setHeader&&"function"===typeof c.abort)if(c.on("complete",p),c.on("abort",x),c.req)y();else c.on("request",
y);else f&&!c._writableState&&(c.on("end",k),c.on("close",k));c.on("end",r);c.on("finish",p);if(!1!==g.error)c.on("error",u);c.on("close",x);return function(){c.removeListener("complete",p);c.removeListener("abort",x);c.removeListener("request",y);c.req&&c.req.removeListener("finish",p);c.removeListener("end",k);c.removeListener("close",k);c.removeListener("finish",p);c.removeListener("end",r);c.removeListener("error",u);c.removeListener("close",x)}}if(xN)return yN;xN=!0;var b=Ju().codes.ERR_STREAM_PREMATURE_CLOSE;
return yN=l}function BZ(){if(zN)return AN;zN=!0;return AN=function(){throw Error("Readable.from is not available in the browser");}}function CZ(){function e(d,f){var k=Object.keys(d);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(d);f&&(n=n.filter(function(p){return Object.getOwnPropertyDescriptor(d,p).enumerable}));k.push.apply(k,n)}return k}function h(d){for(var f=1;f<arguments.length;f++){var k=null!=arguments[f]?arguments[f]:{};f%2?e(Object(k),!0).forEach(function(n){var p=
k[n];n in d?Object.defineProperty(d,n,{value:p,enumerable:!0,configurable:!0,writable:!0}):d[n]=p}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(k)):e(Object(k)).forEach(function(n){Object.defineProperty(d,n,Object.getOwnPropertyDescriptor(k,n))})}return d}function l(d,f){for(var k=0;k<f.length;k++){var n=f[k];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(d,n.key,n)}}function b(d,f,k){f&&l(d.prototype,
f);k&&l(d,k);return d}if(BN)return CN;BN=!0;var c=rl.Buffer,g=DN.inspect,a=g&&g.custom||"inspect";return CN=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}b(d,[{key:"push",value:function(f){f={data:f,next:null};0<this.length?this.tail.next=f:this.head=f;this.tail=f;++this.length}},{key:"unshift",value:function(f){f={data:f,next:this.head};0===this.length&&(this.tail=f);this.head=f;++this.length}},{key:"shift",
value:function(){if(0!==this.length){var f=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return f}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(f){if(0===this.length)return"";for(var k=this.head,n=""+k.data;k=k.next;)n+=f+k.data;return n}},{key:"concat",value:function(f){if(0===this.length)return c.alloc(0);f=c.allocUnsafe(f>>>0);for(var k=this.head,n=0;k;)c.prototype.copy.call(k.data,f,n),n+=k.data.length,
k=k.next;return f}},{key:"consume",value:function(f,k){f<this.head.data.length?(k=this.head.data.slice(0,f),this.head.data=this.head.data.slice(f)):k=f===this.head.data.length?this.shift():k?this._getString(f):this._getBuffer(f);return k}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(f){var k=this.head,n=1,p=k.data;for(f-=p.length;k=k.next;){var q=k.data,r=f>q.length?q.length:f;p=r===q.length?p+q:p+q.slice(0,f);f-=r;if(0===f){r===q.length?(++n,this.head=k.next?
k.next:this.tail=null):(this.head=k,k.data=q.slice(r));break}++n}this.length-=n;return p}},{key:"_getBuffer",value:function(f){var k=c.allocUnsafe(f),n=this.head,p=1;n.data.copy(k);for(f-=n.data.length;n=n.next;){var q=n.data,r=f>q.length?q.length:f;q.copy(k,k.length-f,0,r);f-=r;if(0===f){r===q.length?(++p,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=q.slice(r));break}++p}this.length-=p;return k}},{key:a,value:function(f,k){return g(this,h({},k,{depth:0,customInspect:!1}))}}]);return d}()}
function EN(){function e(c,g){l(c,g);h(c)}function h(c){c._writableState&&!c._writableState.emitClose||c._readableState&&!c._readableState.emitClose||c.emit("close")}function l(c,g){c.emit("error",g)}if(FN)return GN;FN=!0;var b=Pl;return GN={destroy:function(c,g){var a=this,d=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||d)return g?g(c):c&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,b.nextTick(l,
this,c)):b.nextTick(l,this,c)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(c||null,function(f){!g&&f?a._writableState?a._writableState.errorEmitted?b.nextTick(h,a):(a._writableState.errorEmitted=!0,b.nextTick(e,a,f)):b.nextTick(e,a,f):g?(b.nextTick(h,a),g(f)):b.nextTick(h,a)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=
!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(c,g){var a=c._readableState,d=c._writableState;a&&a.autoDestroy||d&&d.autoDestroy?c.destroy(g):c.emit("error",g)}}}function HN(){if(IN)return JN;IN=!0;var e=Ju().codes.ERR_INVALID_OPT_VALUE;
return JN={getHighWaterMark:function(h,l,b,c){l=null!=l.highWaterMark?l.highWaterMark:c?l[b]:null;if(null!=l){if(!isFinite(l)||Math.floor(l)!==l||0>l)throw new e(c?b:"highWaterMark",l);return Math.floor(l)}return h.objectMode?16:16384}}}function KN(){function e(Ua){var xa=this;this.entry=this.next=null;this.finish=function(){var rc=xa.entry;for(xa.entry=null;rc;){var Lb=rc.callback;Ua.pendingcb--;Lb(void 0);rc=rc.next}Ua.corkedRequestsFree.next=xa}}function h(){}function l(Ua,xa,rc){p=p||Ku();Ua=
Ua||{};"boolean"!==typeof rc&&(rc=xa instanceof p);this.objectMode=!!Ua.objectMode;rc&&(this.objectMode=this.objectMode||!!Ua.writableObjectMode);this.highWaterMark=D(this,Ua,"writableHighWaterMark",rc);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==Ua.decodeStrings;this.defaultEncoding=Ua.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(Lb){var Ac=xa._writableState,
Xb=Ac.sync,qd=Ac.writecb;if("function"!==typeof qd)throw new J;Ac.writing=!1;Ac.writecb=null;Ac.length-=Ac.writelen;Ac.writelen=0;Lb?(--Ac.pendingcb,Xb?(n.nextTick(qd,Lb),n.nextTick(k,xa,Ac),xa._writableState.errorEmitted=!0,mc(xa,Lb)):(qd(Lb),xa._writableState.errorEmitted=!0,mc(xa,Lb),k(xa,Ac))):((Lb=d(Ac)||xa.destroyed)||Ac.corked||Ac.bufferProcessing||!Ac.bufferedRequest||a(xa,Ac),Xb?n.nextTick(g,xa,Ac,Lb,qd):g(xa,Ac,Lb,qd))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=
null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==Ua.emitClose;this.autoDestroy=!!Ua.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new e(this)}function b(Ua){p=p||Ku();var xa=this instanceof p;if(!xa&&!hc.call(b,this))return new b(Ua);this._writableState=new l(Ua,this,xa);this.writable=!0;Ua&&("function"===typeof Ua.write&&(this._write=Ua.write),"function"===typeof Ua.writev&&(this._writev=Ua.writev),"function"===typeof Ua.destroy&&(this._destroy=Ua.destroy),
"function"===typeof Ua["final"]&&(this._final=Ua["final"]));r.call(this)}function c(Ua,xa,rc,Lb,Ac,Xb,qd){xa.writelen=Lb;xa.writecb=qd;xa.writing=!0;xa.sync=!0;if(xa.destroyed)xa.onwrite(new ja("write"));else rc?Ua._writev(Ac,xa.onwrite):Ua._write(Ac,Xb,xa.onwrite);xa.sync=!1}function g(Ua,xa,rc,Lb){!rc&&0===xa.length&&xa.needDrain&&(xa.needDrain=!1,Ua.emit("drain"));xa.pendingcb--;Lb();k(Ua,xa)}function a(Ua,xa){xa.bufferProcessing=!0;var rc=xa.bufferedRequest;if(Ua._writev&&rc&&rc.next){var Lb=
Array(xa.bufferedRequestCount),Ac=xa.corkedRequestsFree;Ac.entry=rc;for(var Xb=0,qd=!0;rc;)Lb[Xb]=rc,rc.isBuf||(qd=!1),rc=rc.next,Xb+=1;Lb.allBuffers=qd;c(Ua,xa,!0,xa.length,Lb,"",Ac.finish);xa.pendingcb++;xa.lastBufferedRequest=null;Ac.next?(xa.corkedRequestsFree=Ac.next,Ac.next=null):xa.corkedRequestsFree=new e(xa);xa.bufferedRequestCount=0}else{for(;rc&&(Lb=rc.chunk,c(Ua,xa,!1,xa.objectMode?1:Lb.length,Lb,rc.encoding,rc.callback),rc=rc.next,xa.bufferedRequestCount--,!xa.writing););null===rc&&(xa.lastBufferedRequest=
null)}xa.bufferedRequest=rc;xa.bufferProcessing=!1}function d(Ua){return Ua.ending&&0===Ua.length&&null===Ua.bufferedRequest&&!Ua.finished&&!Ua.writing}function f(Ua,xa){Ua._final(function(rc){xa.pendingcb--;rc&&mc(Ua,rc);xa.prefinished=!0;Ua.emit("prefinish");k(Ua,xa)})}function k(Ua,xa){var rc=d(xa);rc&&(xa.prefinished||xa.finalCalled||("function"!==typeof Ua._final||xa.destroyed?(xa.prefinished=!0,Ua.emit("prefinish")):(xa.pendingcb++,xa.finalCalled=!0,n.nextTick(f,Ua,xa))),0===xa.pendingcb&&(xa.finished=
!0,Ua.emit("finish"),xa.autoDestroy&&(xa=Ua._readableState,(!xa||xa.autoDestroy&&xa.endEmitted)&&Ua.destroy())));return rc}if(LN)return pE;LN=!0;var n=Pl;pE=b;var p;b.WritableState=l;var q={deprecate:DZ},r=rN(),u=rl.Buffer,x=EZ.Uint8Array||function(){},y=EN(),D=HN().getHighWaterMark,H=Ju().codes,I=H.ERR_INVALID_ARG_TYPE,N=H.ERR_METHOD_NOT_IMPLEMENTED,J=H.ERR_MULTIPLE_CALLBACK,sa=H.ERR_STREAM_CANNOT_PIPE,ja=H.ERR_STREAM_DESTROYED,Ha=H.ERR_STREAM_NULL_VALUES,Qa=H.ERR_STREAM_WRITE_AFTER_END,ec=H.ERR_UNKNOWN_ENCODING,
mc=y.errorOrDestroy;sl(b,r);l.prototype.getBuffer=function(){for(var Ua=this.bufferedRequest,xa=[];Ua;)xa.push(Ua),Ua=Ua.next;return xa};(function(){try{Object.defineProperty(l.prototype,"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(Ua){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var hc=Function.prototype[Symbol.hasInstance];
Object.defineProperty(b,Symbol.hasInstance,{value:function(Ua){return hc.call(this,Ua)?!0:this!==b?!1:Ua&&Ua._writableState instanceof l}})}else hc=function(Ua){return Ua instanceof this};b.prototype.pipe=function(){mc(this,new sa)};b.prototype.write=function(Ua,xa,rc){var Lb=this._writableState,Ac=!1,Xb;if(Xb=!Lb.objectMode)Xb=Ua,Xb=u.isBuffer(Xb)||Xb instanceof x;Xb&&!u.isBuffer(Ua)&&(Ua=u.from(Ua));"function"===typeof xa&&(rc=xa,xa=null);Xb?xa="buffer":xa||(xa=Lb.defaultEncoding);"function"!==
typeof rc&&(rc=h);if(Lb.ending)Lb=rc,rc=new Qa,mc(this,rc),n.nextTick(Lb,rc);else{var qd;if(!(qd=Xb)){qd=Ua;var La=rc,Fd;null===qd?Fd=new Ha:"string"===typeof qd||Lb.objectMode||(Fd=new I("chunk",["string","Buffer"],qd));Fd?(mc(this,Fd),n.nextTick(La,Fd),qd=!1):qd=!0}qd&&(Lb.pendingcb++,Ac=Xb,Ac||(Fd=Ua,Lb.objectMode||!1===Lb.decodeStrings||"string"!==typeof Fd||(Fd=u.from(Fd,xa)),Ua!==Fd&&(Ac=!0,xa="buffer",Ua=Fd)),Xb=Lb.objectMode?1:Ua.length,Lb.length+=Xb,Fd=Lb.length<Lb.highWaterMark,Fd||(Lb.needDrain=
!0),Lb.writing||Lb.corked?(Xb=Lb.lastBufferedRequest,Lb.lastBufferedRequest={chunk:Ua,encoding:xa,isBuf:Ac,callback:rc,next:null},Xb?Xb.next=Lb.lastBufferedRequest:Lb.bufferedRequest=Lb.lastBufferedRequest,Lb.bufferedRequestCount+=1):c(this,Lb,!1,Xb,Ua,xa,rc),Ac=Fd)}return Ac};b.prototype.cork=function(){this._writableState.corked++};b.prototype.uncork=function(){var Ua=this._writableState;Ua.corked&&(Ua.corked--,Ua.writing||Ua.corked||Ua.bufferProcessing||!Ua.bufferedRequest||a(this,Ua))};b.prototype.setDefaultEncoding=
function(Ua){"string"===typeof Ua&&(Ua=Ua.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((Ua+"").toLowerCase())))throw new ec(Ua);this._writableState.defaultEncoding=Ua;return this};Object.defineProperty(b.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});
b.prototype._write=function(Ua,xa,rc){rc(new N("_write()"))};b.prototype._writev=null;b.prototype.end=function(Ua,xa,rc){var Lb=this._writableState;"function"===typeof Ua?(rc=Ua,xa=Ua=null):"function"===typeof xa&&(rc=xa,xa=null);null!==Ua&&void 0!==Ua&&this.write(Ua,xa);Lb.corked&&(Lb.corked=1,this.uncork());if(!Lb.ending){Ua=rc;Lb.ending=!0;k(this,Lb);if(Ua)if(Lb.finished)n.nextTick(Ua);else this.once("finish",Ua);Lb.ended=!0;this.writable=!1}return this};Object.defineProperty(b.prototype,"writableLength",
{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(Ua){this._writableState&&(this._writableState.destroyed=Ua)}});b.prototype.destroy=y.destroy;b.prototype._undestroy=y.undestroy;b.prototype._destroy=function(Ua,xa){xa(Ua)};return pE}function Ku(){function e(k){if(!(this instanceof e))return new e(k);g.call(this,k);a.call(this,
k);this.allowHalfOpen=!0;k&&(!1===k.readable&&(this.readable=!1),!1===k.writable&&(this.writable=!1),!1===k.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||b.nextTick(l,this)}function l(k){k.end()}if(MN)return qE;MN=!0;var b=Pl,c=Object.keys||function(k){var n=[],p;for(p in k)n.push(p);return n};qE=e;var g=NN(),a=KN();sl(e,g);c=c(a.prototype);for(var d=0;d<c.length;d++){var f=c[d];e.prototype[f]||(e.prototype[f]=a.prototype[f])}Object.defineProperty(e.prototype,
"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?
!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(k){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=k,this._writableState.destroyed=k)}});return qE}function FZ(){function e(D,H,I){H in D?Object.defineProperty(D,H,{value:I,enumerable:!0,configurable:!0,writable:!0}):D[H]=I;return D}function h(D,H){return{value:D,done:H}}function l(D){var H=D[f];if(null!==H){var I=D[u].read();null!==I&&(D[q]=null,D[f]=null,D[k]=null,H(h(I,!1)))}}
function b(D){g.nextTick(l,D)}function c(D,H){return function(I,N){D.then(function(){if(H[p])I(h(void 0,!0));else H[r](I,N)},N)}}if(ON)return PN;ON=!0;var g=Pl,a,d=oE(),f=Symbol("lastResolve"),k=Symbol("lastReject"),n=Symbol("error"),p=Symbol("ended"),q=Symbol("lastPromise"),r=Symbol("handlePromise"),u=Symbol("stream"),x=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((a={get stream(){return this[u]},next:function(){var D=this,H=this[n];if(null!==H)return Promise.reject(H);if(this[p])return Promise.resolve(h(void 0,
!0));if(this[u].destroyed)return new Promise(function(I,N){g.nextTick(function(){D[n]?N(D[n]):I(h(void 0,!0))})});if(H=this[q])H=new Promise(c(H,this));else{H=this[u].read();if(null!==H)return Promise.resolve(h(H,!1));H=new Promise(this[r])}return this[q]=H}},e(a,Symbol.asyncIterator,function(){return this}),e(a,"return",function(){var D=this;return new Promise(function(H,I){D[u].destroy(null,function(N){N?I(N):H(h(void 0,!0))})})}),a),x);return PN=function(D){var H,I=Object.create(y,(H={},e(H,u,
{value:D,writable:!0}),e(H,f,{value:null,writable:!0}),e(H,k,{value:null,writable:!0}),e(H,n,{value:null,writable:!0}),e(H,p,{value:D._readableState.endEmitted,writable:!0}),e(H,r,{value:function(N,J){var sa=I[u].read();sa?(I[q]=null,I[f]=null,I[k]=null,N(h(sa,!1))):(I[f]=N,I[k]=J)},writable:!0}),H));I[q]=null;d(D,function(N){if(N&&"ERR_STREAM_PREMATURE_CLOSE"!==N.code){var J=I[k];null!==J&&(I[q]=null,I[f]=null,I[k]=null,J(N));I[n]=N}else N=I[f],null!==N&&(I[q]=null,I[f]=null,I[k]=null,N(h(void 0,
!0))),I[p]=!0});D.on("readable",b.bind(null,I));return I}}function NN(){function e(na,Va,yd){if("function"===typeof na.prependListener)return na.prependListener(Va,yd);if(na._events&&na._events[Va])Array.isArray(na._events[Va])?na._events[Va].unshift(yd):na._events[Va]=[yd,na._events[Va]];else na.on(Va,yd)}function h(na,Va,yd){N=N||Ku();na=na||{};"boolean"!==typeof yd&&(yd=Va instanceof N);this.objectMode=!!na.objectMode;yd&&(this.objectMode=this.objectMode||!!na.readableObjectMode);this.highWaterMark=
mc(this,na,"readableHighWaterMark",yd);this.buffer=new ec;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==na.emitClose;this.autoDestroy=!!na.autoDestroy;this.destroyed=!1;this.defaultEncoding=na.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;na.encoding&&(Ac||
(Ac=rE.StringDecoder),this.decoder=new Ac(na.encoding),this.encoding=na.encoding)}function l(na){N=N||Ku();if(!(this instanceof l))return new l(na);this._readableState=new h(na,this,this instanceof N);this.readable=!0;na&&("function"===typeof na.read&&(this._read=na.read),"function"===typeof na.destroy&&(this._destroy=na.destroy));J.call(this)}function b(na,Va,yd,me,ta){Qa("readableAddChunk",Va);var za=na._readableState;if(null===Va)za.reading=!1,Qa("onEofChunk"),za.ended||(za.decoder&&(Va=za.decoder.end())&&
Va.length&&(za.buffer.push(Va),za.length+=za.objectMode?1:Va.length),za.ended=!0,za.sync?a(na):(za.needReadable=!1,za.emittedReadable||(za.emittedReadable=!0,d(na))));else{if(!ta){ta=Va;var W;sa.isBuffer(ta)||ta instanceof ja||"string"===typeof ta||void 0===ta||za.objectMode||(W=new Ua("chunk",["string","Buffer","Uint8Array"],ta));var ea=W}if(ea)La(na,ea);else if(za.objectMode||Va&&0<Va.length)if("string"===typeof Va||za.objectMode||Object.getPrototypeOf(Va)===sa.prototype||(Va=sa.from(Va)),me)za.endEmitted?
La(na,new Lb):c(na,za,Va,!0);else if(za.ended)La(na,new xa);else{if(za.destroyed)return!1;za.reading=!1;za.decoder&&!yd?(Va=za.decoder.write(Va),za.objectMode||0!==Va.length?c(na,za,Va,!1):f(na,za)):c(na,za,Va,!1)}else me||(za.reading=!1,f(na,za))}return!za.ended&&(za.length<za.highWaterMark||0===za.length)}function c(na,Va,yd,me){Va.flowing&&0===Va.length&&!Va.sync?(Va.awaitDrain=0,na.emit("data",yd)):(Va.length+=Va.objectMode?1:yd.length,me?Va.buffer.unshift(yd):Va.buffer.push(yd),Va.needReadable&&
a(na));f(na,Va)}function g(na,Va){if(0>=na||0===Va.length&&Va.ended)return 0;if(Va.objectMode)return 1;if(na!==na)return Va.flowing&&Va.length?Va.buffer.head.data.length:Va.length;if(na>Va.highWaterMark){var yd=na;1073741824<=yd?yd=1073741824:(yd--,yd|=yd>>>1,yd|=yd>>>2,yd|=yd>>>4,yd|=yd>>>8,yd|=yd>>>16,yd++);Va.highWaterMark=yd}return na<=Va.length?na:Va.ended?Va.length:(Va.needReadable=!0,0)}function a(na){var Va=na._readableState;Qa("emitReadable",Va.needReadable,Va.emittedReadable);Va.needReadable=
!1;Va.emittedReadable||(Qa("emitReadable",Va.flowing),Va.emittedReadable=!0,I.nextTick(d,na))}function d(na){var Va=na._readableState;Qa("emitReadable_",Va.destroyed,Va.length,Va.ended);Va.destroyed||!Va.length&&!Va.ended||(na.emit("readable"),Va.emittedReadable=!1);Va.needReadable=!Va.flowing&&!Va.ended&&Va.length<=Va.highWaterMark;u(na)}function f(na,Va){Va.readingMore||(Va.readingMore=!0,I.nextTick(k,na,Va))}function k(na,Va){for(;!Va.reading&&!Va.ended&&(Va.length<Va.highWaterMark||Va.flowing&&
0===Va.length);){var yd=Va.length;Qa("maybeReadMore read 0");na.read(0);if(yd===Va.length)break}Va.readingMore=!1}function n(na){return function(){var Va=na._readableState;Qa("pipeOnDrain",Va.awaitDrain);Va.awaitDrain&&Va.awaitDrain--;0===Va.awaitDrain&&na.listeners("data").length&&(Va.flowing=!0,u(na))}}function p(na){var Va=na._readableState;Va.readableListening=0<na.listenerCount("readable");Va.resumeScheduled&&!Va.paused?Va.flowing=!0:0<na.listenerCount("data")&&na.resume()}function q(na){Qa("readable nexttick read 0");
na.read(0)}function r(na,Va){Qa("resume",Va.reading);Va.reading||na.read(0);Va.resumeScheduled=!1;na.emit("resume");u(na);Va.flowing&&!Va.reading&&na.read(0)}function u(na){var Va=na._readableState;for(Qa("flow",Va.flowing);Va.flowing&&null!==na.read(););}function x(na,Va){if(0===Va.length)return null;Va.objectMode?na=Va.buffer.shift():!na||na>=Va.length?(na=Va.decoder?Va.buffer.join(""):1===Va.buffer.length?Va.buffer.first():Va.buffer.concat(Va.length),Va.buffer.clear()):na=Va.buffer.consume(na,
Va.decoder);return na}function y(na){var Va=na._readableState;Qa("endReadable",Va.endEmitted);Va.endEmitted||(Va.ended=!0,I.nextTick(D,Va,na))}function D(na,Va){Qa("endReadableNT",na.endEmitted,na.length);na.endEmitted||0!==na.length||(na.endEmitted=!0,Va.readable=!1,Va.emit("end"),na.autoDestroy&&(na=Va._writableState,(!na||na.autoDestroy&&na.finished)&&Va.destroy()))}function H(na,Va){for(var yd=0,me=na.length;yd<me;yd++)if(na[yd]===Va)return yd;return-1}if(QN)return sE;QN=!0;var I=Pl;sE=l;var N;
l.ReadableState=h;Dl.EventEmitter;var J=rN(),sa=rl.Buffer,ja=GZ.Uint8Array||function(){},Ha=DN;var Qa=Ha&&Ha.debuglog?Ha.debuglog("stream"):function(){};var ec=CZ();Ha=EN();var mc=HN().getHighWaterMark,hc=Ju().codes,Ua=hc.ERR_INVALID_ARG_TYPE,xa=hc.ERR_STREAM_PUSH_AFTER_EOF,rc=hc.ERR_METHOD_NOT_IMPLEMENTED,Lb=hc.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Ac,Xb,qd;sl(l,J);var La=Ha.errorOrDestroy,Fd=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===
this._readableState?!1:this._readableState.destroyed},set:function(na){this._readableState&&(this._readableState.destroyed=na)}});l.prototype.destroy=Ha.destroy;l.prototype._undestroy=Ha.undestroy;l.prototype._destroy=function(na,Va){Va(na)};l.prototype.push=function(na,Va){var yd=this._readableState;if(yd.objectMode)var me=!0;else"string"===typeof na&&(Va=Va||yd.defaultEncoding,Va!==yd.encoding&&(na=sa.from(na,Va),Va=""),me=!0);return b(this,na,Va,!1,me)};l.prototype.unshift=function(na){return b(this,
na,null,!0,!1)};l.prototype.isPaused=function(){return!1===this._readableState.flowing};l.prototype.setEncoding=function(na){Ac||(Ac=rE.StringDecoder);na=new Ac(na);this._readableState.decoder=na;this._readableState.encoding=this._readableState.decoder.encoding;for(var Va=this._readableState.buffer.head,yd="";null!==Va;)yd+=na.write(Va.data),Va=Va.next;this._readableState.buffer.clear();""!==yd&&this._readableState.buffer.push(yd);this._readableState.length=yd.length;return this};l.prototype.read=
function(na){Qa("read",na);na=parseInt(na,10);var Va=this._readableState,yd=na;0!==na&&(Va.emittedReadable=!1);if(0===na&&Va.needReadable&&((0!==Va.highWaterMark?Va.length>=Va.highWaterMark:0<Va.length)||Va.ended))return Qa("read: emitReadable",Va.length,Va.ended),0===Va.length&&Va.ended?y(this):a(this),null;na=g(na,Va);if(0===na&&Va.ended)return 0===Va.length&&y(this),null;var me=Va.needReadable;Qa("need readable",me);if(0===Va.length||Va.length-na<Va.highWaterMark)me=!0,Qa("length less than watermark",
me);Va.ended||Va.reading?Qa("reading or ended",!1):me&&(Qa("do read"),Va.reading=!0,Va.sync=!0,0===Va.length&&(Va.needReadable=!0),this._read(Va.highWaterMark),Va.sync=!1,Va.reading||(na=g(yd,Va)));me=0<na?x(na,Va):null;null===me?(Va.needReadable=Va.length<=Va.highWaterMark,na=0):(Va.length-=na,Va.awaitDrain=0);0===Va.length&&(Va.ended||(Va.needReadable=!0),yd!==na&&Va.ended&&y(this));null!==me&&this.emit("data",me);return me};l.prototype._read=function(na){La(this,new rc("_read()"))};l.prototype.pipe=
function(na,Va){function yd(Td,nf){Qa("onunpipe");Td===V&&nf&&!1===nf.hasUnpiped&&(nf.hasUnpiped=!0,Qa("cleanup"),na.removeListener("close",W),na.removeListener("finish",ea),na.removeListener("drain",U),na.removeListener("error",za),na.removeListener("unpipe",yd),V.removeListener("end",me),V.removeListener("end",Kb),V.removeListener("data",ta),fd=!0,!Oa.awaitDrain||na._writableState&&!na._writableState.needDrain||U())}function me(){Qa("onend");na.end()}function ta(Td){Qa("ondata");Td=na.write(Td);
Qa("dest.write",Td);!1===Td&&((1===Oa.pipesCount&&Oa.pipes===na||1<Oa.pipesCount&&-1!==H(Oa.pipes,na))&&!fd&&(Qa("false write response, pause",Oa.awaitDrain),Oa.awaitDrain++),V.pause())}function za(Td){Qa("onerror",Td);Kb();na.removeListener("error",za);0===na.listeners("error").length&&La(na,Td)}function W(){na.removeListener("finish",ea);Kb()}function ea(){Qa("onfinish");na.removeListener("close",W);Kb()}function Kb(){Qa("unpipe");V.unpipe(na)}var V=this,Oa=this._readableState;switch(Oa.pipesCount){case 0:Oa.pipes=
na;break;case 1:Oa.pipes=[Oa.pipes,na];break;default:Oa.pipes.push(na)}Oa.pipesCount+=1;Qa("pipe count=%d opts=%j",Oa.pipesCount,Va);Va=Va&&!1===Va.end||na===I.stdout||na===I.stderr?Kb:me;if(Oa.endEmitted)I.nextTick(Va);else V.once("end",Va);na.on("unpipe",yd);var U=n(V);na.on("drain",U);var fd=!1;V.on("data",ta);e(na,"error",za);na.once("close",W);na.once("finish",ea);na.emit("pipe",V);Oa.flowing||(Qa("pipe resume"),V.resume());return na};l.prototype.unpipe=function(na){var Va=this._readableState,
yd={hasUnpiped:!1};if(0===Va.pipesCount)return this;if(1===Va.pipesCount){if(na&&na!==Va.pipes)return this;na||(na=Va.pipes);Va.pipes=null;Va.pipesCount=0;Va.flowing=!1;na&&na.emit("unpipe",this,yd);return this}if(!na){na=Va.pipes;yd=Va.pipesCount;Va.pipes=null;Va.pipesCount=0;Va.flowing=!1;for(Va=0;Va<yd;Va++)na[Va].emit("unpipe",this,{hasUnpiped:!1});return this}var me=H(Va.pipes,na);if(-1===me)return this;Va.pipes.splice(me,1);--Va.pipesCount;1===Va.pipesCount&&(Va.pipes=Va.pipes[0]);na.emit("unpipe",
this,yd);return this};l.prototype.on=function(na,Va){Va=J.prototype.on.call(this,na,Va);var yd=this._readableState;"data"===na?(yd.readableListening=0<this.listenerCount("readable"),!1!==yd.flowing&&this.resume()):"readable"!==na||yd.endEmitted||yd.readableListening||(yd.readableListening=yd.needReadable=!0,yd.flowing=!1,yd.emittedReadable=!1,Qa("on readable",yd.length,yd.reading),yd.length?a(this):yd.reading||I.nextTick(q,this));return Va};l.prototype.addListener=l.prototype.on;l.prototype.removeListener=
function(na,Va){Va=J.prototype.removeListener.call(this,na,Va);"readable"===na&&I.nextTick(p,this);return Va};l.prototype.removeAllListeners=function(na){var Va=J.prototype.removeAllListeners.apply(this,arguments);"readable"!==na&&void 0!==na||I.nextTick(p,this);return Va};l.prototype.resume=function(){var na=this._readableState;na.flowing||(Qa("resume"),na.flowing=!na.readableListening,na.resumeScheduled||(na.resumeScheduled=!0,I.nextTick(r,this,na)));na.paused=!1;return this};l.prototype.pause=
function(){Qa("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(Qa("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};l.prototype.wrap=function(na){var Va=this,yd=this._readableState,me=!1;na.on("end",function(){Qa("wrapped end");if(yd.decoder&&!yd.ended){var za=yd.decoder.end();za&&za.length&&Va.push(za)}Va.push(null)});na.on("data",function(za){Qa("wrapped data");yd.decoder&&(za=yd.decoder.write(za));yd.objectMode&&
(null===za||void 0===za)||!(yd.objectMode||za&&za.length)||Va.push(za)||(me=!0,na.pause())});for(var ta in na)void 0===this[ta]&&"function"===typeof na[ta]&&(this[ta]=function(za){return function(){return na[za].apply(na,arguments)}}(ta));for(ta=0;ta<Fd.length;ta++)na.on(Fd[ta],this.emit.bind(this,Fd[ta]));this._read=function(za){Qa("wrapped _read",za);me&&(me=!1,na.resume())};return this};"function"===typeof Symbol&&(l.prototype[Symbol.asyncIterator]=function(){void 0===Xb&&(Xb=FZ());return Xb(this)});
Object.defineProperty(l.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(l.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(l.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(na){this._readableState&&(this._readableState.flowing=na)}});l._fromList=x;Object.defineProperty(l.prototype,
"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(l.from=function(na,Va){void 0===qd&&(qd=BZ());return qd(l,na,Va)});return sE}function RN(){function e(n,p){var q=this._transformState;q.transforming=!1;var r=q.writecb;if(null===r)return this.emit("error",new a);q.writechunk=null;q.writecb=null;null!=p&&this.push(p);r(n);n=this._readableState;n.reading=!1;(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function h(n){if(!(this instanceof
h))return new h(n);k.call(this,n);this._transformState={afterTransform:e.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;n&&("function"===typeof n.transform&&(this._transform=n.transform),"function"===typeof n.flush&&(this._flush=n.flush));this.on("prefinish",l)}function l(){var n=this;"function"!==typeof this._flush||this._readableState.destroyed?b(this,null,null):this._flush(function(p,q){b(n,
p,q)})}function b(n,p,q){if(p)return n.emit("error",p);null!=q&&n.push(q);if(n._writableState.length)throw new f;if(n._transformState.transforming)throw new d;return n.push(null)}if(SN)return tE;SN=!0;tE=h;var c=Ju().codes,g=c.ERR_METHOD_NOT_IMPLEMENTED,a=c.ERR_MULTIPLE_CALLBACK,d=c.ERR_TRANSFORM_ALREADY_TRANSFORMING,f=c.ERR_TRANSFORM_WITH_LENGTH_0,k=Ku();sl(h,k);h.prototype.push=function(n,p){this._transformState.needTransform=!1;return k.prototype.push.call(this,n,p)};h.prototype._transform=function(n,
p,q){q(new g("_transform()"))};h.prototype._write=function(n,p,q){var r=this._transformState;r.writecb=q;r.writechunk=n;r.writeencoding=p;r.transforming||(n=this._readableState,(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};h.prototype._read=function(n){n=this._transformState;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};h.prototype._destroy=function(n,p){k.prototype._destroy.call(this,
n,function(q){p(q)})};return tE}function Lu(e,h){if(!((this||Vo)instanceof Lu))return new Lu(e,h);h=h||{};TN.call(this||Vo,HZ(h,{objectMode:!0}));(this||Vo)._iterator=e;(this||Vo)._options=h;this.on("end",(this||Vo).destroy.bind(this||Vo,null,null))}function UN(e,h,l){h&&"string"!=typeof h&&(h=h.message||h.name);IZ(this||Sl,{type:e,name:e,cause:"string"!=typeof h?h:l,message:h},"ewr")}function uE(e,h){Error.call(this||Sl);Error.captureStackTrace&&Error.captureStackTrace(this||Sl,(this||Sl).constructor);
UN.call(this||Sl,"CustomError",e,h)}function JZ(e,h,l){var b=function(c,g){UN.call(this||Sl,h,c,g);"FilesystemError"==h&&((this||Sl).code=(this||Sl).cause.code,(this||Sl).path=(this||Sl).cause.path,(this||Sl).errno=(this||Sl).cause.errno,(this||Sl).message=(e.errno[(this||Sl).cause.errno]?e.errno[(this||Sl).cause.errno].description:(this||Sl).cause.message)+((this||Sl).cause.path?" ["+(this||Sl).cause.path+"]":""));Error.call(this||Sl);Error.captureStackTrace&&Error.captureStackTrace(this||Sl,b)};
b.prototype=l?new l:new uE;return b}function Sw(e){(this||em)._levelup=e;(this||em).batch=e.db.batch();(this||em).ops=[];(this||em).length=0}function VN(e,h){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var l=Object(e),b=1;b<arguments.length;b++){var c=arguments[b];if(null!=c)for(var g=Object.keys(Object(c)),a=0,d=g.length;a<d;a++){var f=g[a],k=Object.getOwnPropertyDescriptor(c,f);void 0!==k&&k.enumerable&&(l[f]=c[f])}}return l}function WN(){function e(f){return(e=
"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(f)}function h(f){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(f)}function l(f,k){return(l=Object.setPrototypeOf||function(n,p){return n.__proto__=p,n})(f,k)}function b(f,k,n){n||(n=Error);n=function(p){function q(r,u,x){if(!(this instanceof
q))throw new TypeError("Cannot call a class as a function");!0;r=h(q).call(this,"string"==typeof k?k:k(r,u,x));if(!r||"object"!==e(r)&&"function"!=typeof r){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");r=this}return r.code=f,r}return!function(r,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(u&&u.prototype,{constructor:{value:r,writable:!0,configurable:!0}});
u&&l(r,u)}(q,p),q}(n);d[f]=n}function c(f,k){if(Array.isArray(f)){var n=f.length;return f=f.map(function(p){return String(p)}),2<n?"one of ".concat(k," ").concat(f.slice(0,n-1).join(", "),", or ")+f[n-1]:2===n?"one of ".concat(k," ").concat(f[0]," or ").concat(f[1]):"of ".concat(k," ").concat(f[0])}return"of ".concat(k," ").concat(String(f))}if(XN)return vE;XN=!0;var g,a,d={};return b("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),b("ERR_INVALID_ARG_TYPE",function(f,k,n){var p;
if(void 0===g&&(g=wE()),g("string"==typeof f,"'name' must be a string"),"string"==typeof k&&"not "===k.substr(0,4)?(p="must not be",k=k.replace(/^not /,"")):p="must be",function(r,u,x){return(void 0===x||x>r.length)&&(x=r.length),r.substring(x-u.length,x)===u}(f," argument"))f="The ".concat(f," ").concat(p," ").concat(c(k,"type"));else{var q=function(r,u,x){return"number"!=typeof x&&(x=0),!(x+u.length>r.length)&&-1!==r.indexOf(u,x)}(f,".")?"property":"argument";f='The "'.concat(f,'" ').concat(q," ").concat(p,
" ").concat(c(k,"type"))}return f+=". Received type ".concat(e(n))},TypeError),b("ERR_INVALID_ARG_VALUE",function(f,k){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===a&&(a=Dg);var p=a.inspect(k);return 128<p.length&&(p="".concat(p.slice(0,128),"...")),"The argument '".concat(f,"' ").concat(n,". Received ").concat(p)},TypeError),b("ERR_INVALID_RETURN_VALUE",function(f,k,n){var p;return p=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):
"type ".concat(e(n)),"Expected ".concat(f,' to be returned from the "').concat(k,'"')+" function but got ".concat(p,".")},TypeError),b("ERR_MISSING_ARGS",function(){for(var f=arguments.length,k=Array(f),n=0;n<f;n++)k[n]=arguments[n];void 0===g&&(g=wE());g(0<k.length,"At least one arg needs to be specified");f="The ";n=k.length;switch(k=k.map(function(p){return'"'.concat(p,'"')}),n){case 1:f+="".concat(k[0]," argument");break;case 2:f+="".concat(k[0]," and ").concat(k[1]," arguments");break;default:f+=
k.slice(0,n-1).join(", "),f+=", and ".concat(k[n-1]," arguments")}return"".concat(f," must be specified")},TypeError),vE.codes=d,vE}function KZ(){function e(J,sa){for(var ja=0;ja<sa.length;ja++){var Ha=sa[ja];Ha.enumerable=Ha.enumerable||!1;Ha.configurable=!0;"value"in Ha&&(Ha.writable=!0);Object.defineProperty(J,Ha.key,Ha)}}function h(J,sa){return!sa||"object"!==f(sa)&&"function"!=typeof sa?l(J):sa}function l(J){if(void 0===J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return J}function b(J){var sa="function"==typeof Map?new Map:void 0;return(b=function(ja){function Ha(){return g(ja,arguments,d(this).constructor)}if(null===ja||(Qa=ja,-1===Function.toString.call(Qa).indexOf("[native code]")))return ja;var Qa;if("function"!=typeof ja)throw new TypeError("Super expression must either be null or a function");if(void 0!==sa){if(sa.has(ja))return sa.get(ja);sa.set(ja,Ha)}return Ha.prototype=Object.create(ja.prototype,{constructor:{value:Ha,enumerable:!1,writable:!0,configurable:!0}}),
a(Ha,ja)})(J)}function c(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(J){return!1}}function g(J,sa,ja){return(g=c()?Reflect.construct:function(Ha,Qa,ec){var mc=[null];mc.push.apply(mc,Qa);Ha=new (Function.bind.apply(Ha,mc));return ec&&a(Ha,ec.prototype),Ha}).apply(null,arguments)}function a(J,sa){return(a=Object.setPrototypeOf||function(ja,
Ha){return ja.__proto__=Ha,ja})(J,sa)}function d(J){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(sa){return sa.__proto__||Object.getPrototypeOf(sa)})(J)}function f(J){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(sa){return typeof sa}:function(sa){return sa&&"function"==typeof Symbol&&sa.constructor===Symbol&&sa!==Symbol.prototype?"symbol":typeof sa})(J)}function k(J,sa,ja){return(void 0===ja||ja>J.length)&&(ja=J.length),J.substring(ja-sa.length,ja)===
sa}function n(J){var sa=Object.keys(J),ja=Object.create(Object.getPrototypeOf(J));return sa.forEach(function(Ha){ja[Ha]=J[Ha]}),Object.defineProperty(ja,"message",{value:J.message}),ja}function p(J){return u(J,{compact:!1,customInspect:!1,depth:1E3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function q(J,sa,ja){var Ha="",Qa="",ec=0,mc="",hc=!1,Ua=p(J),xa=Ua.split("\n"),rc=p(sa).split("\n"),Lb=0,Ac="";if("strictEqual"===ja&&"object"===f(J)&&"object"===f(sa)&&
null!==J&&null!==sa&&(ja="strictEqualObject"),1===xa.length&&1===rc.length&&xa[0]!==rc[0]){var Xb=xa[0].length+rc[0].length;if(10>=Xb){if(!("object"===f(J)&&null!==J||"object"===f(sa)&&null!==sa||0===J&&0===sa))return"".concat(N[ja],"\n\n")+"".concat(xa[0]," !== ").concat(rc[0],"\n")}else if("strictEqualObject"!==ja&&Xb<(r.stderr&&r.stderr.isTTY?r.stderr.columns:80)){for(;xa[0][Lb]===rc[0][Lb];)Lb++;2<Lb&&(Ac="\n  ".concat(function(na,Va){if(Va=Math.floor(Va),0==na.length||0==Va)return"";var yd=na.length*
Va;for(Va=Math.floor(Math.log(Va)/Math.log(2));Va;)na+=na,Va--;return na+na.substring(0,yd-na.length)}(" ",Lb),"^"),Lb=0)}}J=xa[xa.length-1];for(sa=rc[rc.length-1];J===sa&&(2>Lb++?mc="\n  ".concat(J).concat(mc):Ha=J,xa.pop(),rc.pop(),0!==xa.length&&0!==rc.length);)J=xa[xa.length-1],sa=rc[rc.length-1];J=Math.max(xa.length,rc.length);if(0===J){Ha=Ua.split("\n");if(30<Ha.length)for(Ha[26]="".concat(y,"...").concat(I);27<Ha.length;)Ha.pop();return"".concat(N.notIdentical,"\n\n").concat(Ha.join("\n"),
"\n")}3<Lb&&(mc="\n".concat(y,"...").concat(I).concat(mc),hc=!0);""!==Ha&&(mc="\n  ".concat(Ha).concat(mc),Ha="");Ua=0;ja=N[ja]+"\n".concat(D,"+ actual").concat(I," ").concat(H,"- expected").concat(I);sa=" ".concat(y,"...").concat(I," Lines skipped");for(Lb=0;Lb<J;Lb++){Xb=Lb-ec;if(xa.length<Lb+1)1<Xb&&2<Lb&&(4<Xb?(Qa+="\n".concat(y,"...").concat(I),hc=!0):3<Xb&&(Qa+="\n  ".concat(rc[Lb-2]),Ua++),Qa+="\n  ".concat(rc[Lb-1]),Ua++),ec=Lb,Ha+="\n".concat(H,"-").concat(I," ").concat(rc[Lb]),Ua++;else if(rc.length<
Lb+1)1<Xb&&2<Lb&&(4<Xb?(Qa+="\n".concat(y,"...").concat(I),hc=!0):3<Xb&&(Qa+="\n  ".concat(xa[Lb-2]),Ua++),Qa+="\n  ".concat(xa[Lb-1]),Ua++),ec=Lb,Qa+="\n".concat(D,"+").concat(I," ").concat(xa[Lb]),Ua++;else{var qd=rc[Lb],La=xa[Lb],Fd=La!==qd&&(!k(La,",")||La.slice(0,-1)!==qd);Fd&&k(qd,",")&&qd.slice(0,-1)===La&&(Fd=!1,La+=",");Fd?(1<Xb&&2<Lb&&(4<Xb?(Qa+="\n".concat(y,"...").concat(I),hc=!0):3<Xb&&(Qa+="\n  ".concat(xa[Lb-2]),Ua++),Qa+="\n  ".concat(xa[Lb-1]),Ua++),ec=Lb,Qa+="\n".concat(D,"+").concat(I,
" ").concat(La),Ha+="\n".concat(H,"-").concat(I," ").concat(qd),Ua+=2):(Qa+=Ha,Ha="",1!==Xb&&0!==Lb||(Qa+="\n  ".concat(La),Ua++))}if(20<Ua&&Lb<J-2)return"".concat(ja).concat(sa,"\n").concat(Qa,"\n").concat(y,"...").concat(I).concat(Ha,"\n")+"".concat(y,"...").concat(I)}return"".concat(ja).concat(hc?sa:"","\n").concat(Qa).concat(Ha).concat(mc).concat(Ac)}if(YN)return ZN;YN=!0;var r=jl,u=Dg.inspect,x=WN().codes.ERR_INVALID_ARG_TYPE,y="",D="",H="",I="",N={deepStrictEqual:"Expected values to be strictly deep-equal:",
strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',
notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};return ZN=function(J){function sa(Ha){if(!(this instanceof sa))throw new TypeError("Cannot call a class as a function");if(!0,"object"!==f(Ha)||null===Ha)throw new x("options","Object",Ha);var Qa=Ha.message,ec=Ha.operator,mc=Ha.stackStartFn,hc=Ha.actual;Ha=Ha.expected;var Ua=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=Qa)var xa=h(this,d(sa).call(this,String(Qa)));else if(r.stderr&&
r.stderr.isTTY&&(r.stderr&&r.stderr.getColorDepth&&1!==r.stderr.getColorDepth()?(y="\u001b[34m",D="\u001b[32m",I="\u001b[39m",H="\u001b[31m"):(y="",D="",I="",H="")),"object"===f(hc)&&null!==hc&&"object"===f(Ha)&&null!==Ha&&"stack"in hc&&hc instanceof Error&&"stack"in Ha&&Ha instanceof Error&&(hc=n(hc),Ha=n(Ha)),"deepStrictEqual"===ec||"strictEqual"===ec)xa=h(this,d(sa).call(this,q(hc,Ha,ec)));else if("notDeepStrictEqual"===ec||"notStrictEqual"===ec){xa=N[ec];var rc=p(hc).split("\n");if("notStrictEqual"===
ec&&"object"===f(hc)&&null!==hc&&(xa=N.notStrictEqualObject),30<rc.length)for(rc[26]="".concat(y,"...").concat(I);27<rc.length;)rc.pop();xa=1===rc.length?h(this,d(sa).call(this,"".concat(xa," ").concat(rc[0]))):h(this,d(sa).call(this,"".concat(xa,"\n\n").concat(rc.join("\n"),"\n")))}else{xa=p(hc);rc="";var Lb=N[ec];"notDeepEqual"===ec||"notEqual"===ec?1024<(xa="".concat(N[ec],"\n\n").concat(xa)).length&&(xa="".concat(xa.slice(0,1021),"...")):(rc="".concat(p(Ha)),512<xa.length&&(xa="".concat(xa.slice(0,
509),"...")),512<rc.length&&(rc="".concat(rc.slice(0,509),"...")),"deepEqual"===ec||"equal"===ec?xa="".concat(Lb,"\n\n").concat(xa,"\n\nshould equal\n\n"):rc=" ".concat(ec," ").concat(rc));xa=h(this,d(sa).call(this,"".concat(xa).concat(rc)))}return Error.stackTraceLimit=Ua,xa.generatedMessage=!Qa,Object.defineProperty(l(xa),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),xa.code="ERR_ASSERTION",xa.actual=hc,xa.expected=Ha,xa.operator=ec,Error.captureStackTrace&&
Error.captureStackTrace(l(xa),mc),xa.stack,xa.name="AssertionError",h(xa)}var ja;return!function(Ha,Qa){if("function"!=typeof Qa&&null!==Qa)throw new TypeError("Super expression must either be null or a function");Ha.prototype=Object.create(Qa&&Qa.prototype,{constructor:{value:Ha,writable:!0,configurable:!0}});Qa&&a(Ha,Qa)}(sa,J),ja=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:u.custom,value:function(Ha,Qa){return u(this,function(ec){for(var mc=
1;mc<arguments.length;mc++){var hc=null!=arguments[mc]?arguments[mc]:{},Ua=Object.keys(hc);"function"==typeof Object.getOwnPropertySymbols&&(Ua=Ua.concat(Object.getOwnPropertySymbols(hc).filter(function(xa){return Object.getOwnPropertyDescriptor(hc,xa).enumerable})));Ua.forEach(function(xa){var rc=hc[xa];xa in ec?Object.defineProperty(ec,xa,{value:rc,enumerable:!0,configurable:!0,writable:!0}):ec[xa]=rc})}return ec}({},Qa,{customInspect:!1,depth:0}))}}],e(sa.prototype,ja),sa}(b(Error))}function $N(e,
h){if(!(e=function(l){if(Array.isArray(l))return l}(e)||function(l,b){var c=[],g=!0,a=!1,d=void 0;try{for(var f,k=l[Symbol.iterator]();!(g=(f=k.next()).done)&&(c.push(f.value),!b||c.length!==b);g=!0);}catch(n){a=!0,d=n}finally{try{g||null==k.return||k.return()}finally{if(a)throw d;}}return c}(e,h)))throw new TypeError("Invalid attempt to destructure non-iterable instance");return e}function Wo(e){return(Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&
"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(e)}function xE(e){return e.call.bind(e)}function LZ(e){if(0===e.length||10<e.length)return!0;for(var h=0;h<e.length;h++){var l=e.charCodeAt(h);if(48>l||57<l)return!0}return 10===e.length&&e>=Math.pow(2,32)}function Sz(e){return Object.keys(e).filter(LZ).concat(Tz(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function aO(e,h){if(e===h)return 0;for(var l=e.length,b=h.length,c=0,g=Math.min(l,b);c<
g;++c)if(e[c]!==h[c]){l=e[c];b=h[c];break}return l<b?-1:b<l?1:0}function oo(e,h,l,b){if(e===h)return 0!==e||!l||bO(e,h);if(l){if("object"!==Wo(e))return"number"==typeof e&&yE(e)&&yE(h);if("object"!==Wo(h)||null===e||null===h||Object.getPrototypeOf(e)!==Object.getPrototypeOf(h))return!1}else{if(null===e||"object"!==Wo(e))return(null===h||"object"!==Wo(h))&&e==h;if(null===h||"object"!==Wo(h))return!1}var c=cO(e);if(c!==cO(h))return!1;if(Array.isArray(e)){if(e.length!==h.length)return!1;c=Sz(e);var g=
Sz(h);return c.length===g.length&&Tw(e,h,l,b,1,c)}if("[object Object]"===c&&(!Uz(e)&&Uz(h)||!Vz(e)&&Vz(h)))return!1;if(dO(e)){if(!dO(h)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(h))return!1}else if(eO(e)){if(!eO(h)||(MZ?e.source!==h.source||e.flags!==h.flags:RegExp.prototype.toString.call(e)!==RegExp.prototype.toString.call(h)))return!1}else if(NZ(e)||e instanceof Error){if(e.message!==h.message||e.name!==h.name)return!1}else{if(OZ(e)){if(l||!PZ(e)&&!QZ(e)){if(!function(a,d){return a.byteLength===
d.byteLength&&0===aO(new Uint8Array(a.buffer,a.byteOffset,a.byteLength),new Uint8Array(d.buffer,d.byteOffset,d.byteLength))}(e,h))return!1}else if(!function(a,d){if(a.byteLength!==d.byteLength)return!1;for(var f=0;f<a.byteLength;f++)if(a[f]!==d[f])return!1;return!0}(e,h))return!1;c=Sz(e);g=Sz(h);return c.length===g.length&&Tw(e,h,l,b,0,c)}if(Vz(e))return!(!Vz(h)||e.size!==h.size)&&Tw(e,h,l,b,2);if(Uz(e))return!(!Uz(h)||e.size!==h.size)&&Tw(e,h,l,b,3);if(RZ(e)){if(e.byteLength!==h.byteLength||0!==
aO(new Uint8Array(e),new Uint8Array(h)))return!1}else if(SZ(e)&&!function(a,d){return fO(a)?fO(d)&&bO(Number.prototype.valueOf.call(a),Number.prototype.valueOf.call(d)):gO(a)?gO(d)&&String.prototype.valueOf.call(a)===String.prototype.valueOf.call(d):hO(a)?hO(d)&&Boolean.prototype.valueOf.call(a)===Boolean.prototype.valueOf.call(d):iO(a)?iO(d)&&BigInt.prototype.valueOf.call(a)===BigInt.prototype.valueOf.call(d):TZ(d)&&Symbol.prototype.valueOf.call(a)===Symbol.prototype.valueOf.call(d)}(e,h))return!1}return Tw(e,
h,l,b,0)}function jO(e,h){return h.filter(function(l){return Wz(e,l)})}function Tw(e,h,l,b,c,g){if(5===arguments.length){g=Object.keys(e);var a=Object.keys(h);if(g.length!==a.length)return!1}for(var d=0;d<g.length;d++)if(!Uw(h,g[d]))return!1;if(l&&5===arguments.length)if(a=Tz(e),0!==a.length){var f=0;for(d=0;d<a.length;d++){var k=a[d];if(Wz(e,k)){if(!Wz(h,k))return!1;g.push(k);f++}else if(Wz(h,k))return!1}d=Tz(h);if(a.length!==d.length&&jO(h,d).length!==f)return!1}else if(a=Tz(h),0!==a.length&&0!==
jO(h,a).length)return!1;if(0===g.length&&(0===c||1===c&&0===e.length||0===e.size))return!0;if(void 0===b)b={val1:new Map,val2:new Map,position:0};else{a=b.val1.get(e);if(void 0!==a&&(f=b.val2.get(h),void 0!==f))return a===f;b.position++}b.val1.set(e,b.position);b.val2.set(h,b.position);a=UZ(e,h,l,g,b,c);return b.val1.delete(e),b.val2.delete(h),a}function kO(e,h,l,b){for(var c=Xz(e),g=0;g<c.length;g++){var a=c[g];if(oo(h,a,l,b))return e.delete(a),!0}return!1}function lO(e){switch(Wo(e)){case "undefined":return null;
case "object":return;case "symbol":return!1;case "string":e=+e;case "number":if(yE(e))return!1}return!0}function mO(e,h,l,b,c,g){for(var a=Xz(e),d=0;d<a.length;d++){var f=a[d];if(oo(l,f,c,g)&&oo(b,h.get(f),c,g))return e.delete(f),!0}return!1}function UZ(e,h,l,b,c,g){var a=0;if(2===g){if(!function(d,f,k,n){for(var p=null,q=Xz(d),r=0;r<q.length;r++){var u=q[r];if("object"===Wo(u)&&null!==u)null===p&&(p=new Set),p.add(u);else if(!f.has(u)){if(k)return!1;var x=d,y=f,D=lO(u);if(null!=D?!D:!y.has(D)||x.has(D))return!1;
null===p&&(p=new Set);p.add(u)}}if(null!==p){f=Xz(f);for(q=0;q<f.length;q++)if(r=f[q],"object"===Wo(r)&&null!==r){if(!kO(p,r,k,n))return!1}else if(!k&&!d.has(r)&&!kO(p,r,k,n))return!1;return 0===p.size}return!0}(e,h,l,c))return!1}else if(3===g){if(!function(d,f,k,n){for(var p=null,q=nO(d),r=0;r<q.length;r++){var u=$N(q[r],2),x=u[0],y=u[1];if("object"===Wo(x)&&null!==x)null===p&&(p=new Set),p.add(x);else if(u=f.get(x),void 0===u&&!f.has(x)||!oo(y,u,k,n)){if(k)return!1;u=d;var D=f,H=n,I=lO(x);if(null!=
I)u=I;else{var N=D.get(I);u=!(void 0===N&&!D.has(I)||!oo(y,N,!1,H))&&!u.has(I)&&oo(y,N,!1,H)}if(!u)return!1;null===p&&(p=new Set);p.add(x)}}if(null!==p){f=nO(f);for(q=0;q<f.length;q++)if(r=$N(f[q],2),r=(x=r[0],r[1]),"object"===Wo(x)&&null!==x){if(!mO(p,d,x,r,k,n))return!1}else if(!(k||d.has(x)&&oo(d.get(x),r,!1,n)||mO(p,d,x,r,!1,n)))return!1;return 0===p.size}return!0}(e,h,l,c))return!1}else if(1===g)for(;a<e.length;a++){if(!Uw(e,a)){if(Uw(h,a))return!1;for(b=Object.keys(e);a<b.length;a++)if(g=b[a],
!Uw(h,g)||!oo(e[g],h[g],l,c))return!1;return b.length===Object.keys(h).length}if(!Uw(h,a)||!oo(e[a],h[a],l,c))return!1}for(a=0;a<b.length;a++)if(g=b[a],!oo(e[g],h[g],l,c))return!1;return!0}function wE(){function e(xa){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(rc){return typeof rc}:function(rc){return rc&&"function"==typeof Symbol&&rc.constructor===Symbol&&rc!==Symbol.prototype?"symbol":typeof rc})(xa)}function h(){r=oO.isDeepEqual;u=oO.isDeepStrictEqual}function l(xa){if(xa.message instanceof
Error)throw xa.message;throw new J(xa);}function b(xa,rc,Lb,Ac){if(!Lb){var Xb=!1;if(0===rc)Xb=!0,Ac="No value argument passed to `assert.ok()`";else if(Ac instanceof Error)throw Ac;xa=new J({actual:Lb,expected:!0,message:Ac,operator:"==",stackStartFn:xa});throw xa.generatedMessage=Xb,xa;}}function c(){for(var xa=arguments.length,rc=Array(xa),Lb=0;Lb<xa;Lb++)rc[Lb]=arguments[Lb];b.apply(void 0,[c,rc.length].concat(rc))}function g(xa,rc,Lb,Ac){if("function"!=typeof rc){if(Ha(rc))return rc.test(xa);
if(2===arguments.length)throw new D("expected",["Function","RegExp"],rc);if("object"!==e(xa)||null===xa){var Xb=new J({actual:xa,expected:rc,message:Lb,operator:"deepStrictEqual",stackStartFn:Ac});throw Xb.operator=Ac.name,Xb;}var qd=Object.keys(rc);if(rc instanceof Error)qd.push("name","message");else if(0===qd.length)throw new H("error",rc,"may not be an empty object");return void 0===r&&h(),qd.forEach(function(La){if(!("string"==typeof xa[La]&&Ha(rc[La])&&rc[La].test(xa[La])||La in xa&&u(xa[La],
rc[La]))){if(!Lb){La=new Ua(xa,qd);var Fd=new Ua(rc,qd,xa);La=new J({actual:La,expected:Fd,operator:"deepStrictEqual",stackStartFn:Ac});throw La.actual=xa,La.expected=rc,La.operator=Ac.name,La;}l({actual:xa,expected:rc,message:Lb,operator:Ac.name,stackStartFn:Ac})}}),!0}return void 0!==rc.prototype&&xa instanceof rc||!Error.isPrototypeOf(rc)&&!0===rc.call({},xa)}function a(xa){if("function"!=typeof xa)throw new D("fn","Function",xa);try{xa()}catch(rc){return rc}return hc}function d(xa){return ja(xa)||
null!==xa&&"object"===e(xa)&&"function"==typeof xa.then&&"function"==typeof xa.catch}function f(xa){return Promise.resolve().then(function(){var rc;if("function"==typeof xa){if(!d(rc=xa()))throw new I("instance of Promise","promiseFn",rc);}else{if(!d(xa))throw new D("promiseFn",["Function","Promise"],xa);rc=xa}return Promise.resolve().then(function(){return rc}).then(function(){return hc}).catch(function(Lb){return Lb})})}function k(xa,rc,Lb,Ac){if("string"==typeof Lb){if(4===arguments.length)throw new D("error",
["Object","Error","Function","RegExp"],Lb);if("object"===e(rc)&&null!==rc){if(rc.message===Lb)throw new y("error/message",'The error message "'.concat(rc.message,'" is identical to the message.'));}else if(rc===Lb)throw new y("error/message",'The error "'.concat(rc,'" is identical to the message.'));Ac=Lb;Lb=void 0}else if(null!=Lb&&"object"!==e(Lb)&&"function"!=typeof Lb)throw new D("error",["Object","Error","Function","RegExp"],Lb);if(rc===hc){var Xb="";Lb&&Lb.name&&(Xb+=" (".concat(Lb.name,")"));
Xb+=Ac?": ".concat(Ac):".";l({actual:void 0,expected:Lb,operator:xa.name,message:"Missing expected ".concat("rejects"===xa.name?"rejection":"exception").concat(Xb),stackStartFn:xa})}if(Lb&&!g(rc,Lb,Ac,xa))throw rc;}function n(xa,rc,Lb,Ac){if(rc!==hc){if("string"==typeof Lb&&(Ac=Lb,Lb=void 0),!Lb||g(rc,Lb))Ac=Ac?": ".concat(Ac):".",l({actual:rc,expected:Lb,operator:xa.name,message:"Got unwanted ".concat("doesNotReject"===xa.name?"rejection":"exception").concat(Ac,"\n")+'Actual message: "'.concat(rc&&
rc.message,'"'),stackStartFn:xa});throw rc;}}function p(){for(var xa=arguments.length,rc=Array(xa),Lb=0;Lb<xa;Lb++)rc[Lb]=arguments[Lb];b.apply(void 0,[p,rc.length].concat(rc))}if(pO)return zE;pO=!0;var q=jl,r,u,x=WN().codes,y=x.ERR_AMBIGUOUS_ARGUMENT,D=x.ERR_INVALID_ARG_TYPE,H=x.ERR_INVALID_ARG_VALUE,I=x.ERR_INVALID_RETURN_VALUE,N=x.ERR_MISSING_ARGS,J=KZ(),sa=Dg.inspect;x=Dg.types;var ja=x.isPromise,Ha=x.isRegExp;x=Object.assign?Object.assign:VZ.assign;var Qa=Object.is?Object.is:qO,ec=!1,mc=zE=c,
hc={};mc.fail=function La(rc,Lb,Ac,Xb,qd){var Fd=arguments.length;if(0===Fd)var na="Failed";else 1===Fd?(Ac=rc,rc=void 0):(!1===ec&&(ec=!0,(q.emitWarning?q.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===Fd&&(Xb="!="));if(Ac instanceof Error)throw Ac;Fd={actual:rc,expected:Lb,operator:void 0===Xb?"fail":Xb,stackStartFn:qd||La};void 0!==Ac&&(Fd.message=
Ac);Fd=new J(Fd);throw na&&(Fd.message=na,Fd.generatedMessage=!0),Fd;};mc.AssertionError=J;mc.ok=c;mc.equal=function qd(Lb,Ac,Xb){if(2>arguments.length)throw new N("actual","expected");Lb!=Ac&&l({actual:Lb,expected:Ac,message:Xb,operator:"==",stackStartFn:qd})};mc.notEqual=function La(Ac,Xb,qd){if(2>arguments.length)throw new N("actual","expected");Ac==Xb&&l({actual:Ac,expected:Xb,message:qd,operator:"!=",stackStartFn:La})};mc.deepEqual=function Fd(Xb,qd,La){if(2>arguments.length)throw new N("actual",
"expected");void 0===r&&h();r(Xb,qd)||l({actual:Xb,expected:qd,message:La,operator:"deepEqual",stackStartFn:Fd})};mc.notDeepEqual=function na(qd,La,Fd){if(2>arguments.length)throw new N("actual","expected");void 0===r&&h();r(qd,La)&&l({actual:qd,expected:La,message:Fd,operator:"notDeepEqual",stackStartFn:na})};mc.deepStrictEqual=function Va(La,Fd,na){if(2>arguments.length)throw new N("actual","expected");void 0===r&&h();u(La,Fd)||l({actual:La,expected:Fd,message:na,operator:"deepStrictEqual",stackStartFn:Va})};
mc.notDeepStrictEqual=function yd(Fd,na,Va){if(2>arguments.length)throw new N("actual","expected");void 0===r&&h();u(Fd,na)&&l({actual:Fd,expected:na,message:Va,operator:"notDeepStrictEqual",stackStartFn:yd})};mc.strictEqual=function me(na,Va,yd){if(2>arguments.length)throw new N("actual","expected");Qa(na,Va)||l({actual:na,expected:Va,message:yd,operator:"strictEqual",stackStartFn:me})};mc.notStrictEqual=function ta(Va,yd,me){if(2>arguments.length)throw new N("actual","expected");Qa(Va,yd)&&l({actual:Va,
expected:yd,message:me,operator:"notStrictEqual",stackStartFn:ta})};var Ua=function za(yd,me,ta){var W=this;if(!(this instanceof za))throw new TypeError("Cannot call a class as a function");!0;me.forEach(function(ea){ea in yd&&(void 0!==ta&&"string"==typeof ta[ea]&&Ha(yd[ea])&&yd[ea].test(ta[ea])?W[ea]=ta[ea]:W[ea]=yd[ea])})};return mc.throws=function ta(me){for(var za=arguments.length,W=Array(1<za?za-1:0),ea=1;ea<za;ea++)W[ea-1]=arguments[ea];k.apply(void 0,[ta,a(me)].concat(W))},mc.rejects=function za(ta){for(var W=
arguments.length,ea=Array(1<W?W-1:0),Kb=1;Kb<W;Kb++)ea[Kb-1]=arguments[Kb];return f(ta).then(function(V){return k.apply(void 0,[za,V].concat(ea))})},mc.doesNotThrow=function W(za){for(var ea=arguments.length,Kb=Array(1<ea?ea-1:0),V=1;V<ea;V++)Kb[V-1]=arguments[V];n.apply(void 0,[W,a(za)].concat(Kb))},mc.doesNotReject=function ea(W){for(var Kb=arguments.length,V=Array(1<Kb?Kb-1:0),Oa=1;Oa<Kb;Oa++)V[Oa-1]=arguments[Oa];return f(W).then(function(U){return n.apply(void 0,[ea,U].concat(V))})},mc.ifError=
function Kb(ea){if(null!=ea){var V="ifError got unwanted exception: ";"object"===e(ea)&&"string"==typeof ea.message?0===ea.message.length&&ea.constructor?V+=ea.constructor.name:V+=ea.message:V+=sa(ea);V=new J({actual:ea,expected:null,operator:"ifError",message:V,stackStartFn:Kb});ea=ea.stack;if("string"==typeof ea){ea=ea.split("\n");ea.shift();for(var Oa=V.stack.split("\n"),U=0;U<ea.length;U++){var fd=Oa.indexOf(ea[U]);if(-1!==fd){Oa=Oa.slice(0,fd);break}}V.stack="".concat(Oa.join("\n"),"\n").concat(ea.join("\n"))}throw V;
}},mc.strict=x(p,mc,{equal:mc.strictEqual,deepEqual:mc.deepStrictEqual,notEqual:mc.notStrictEqual,notDeepEqual:mc.notDeepStrictEqual}),mc.strict.strict=mc.strict,zE}function kl(e,h,l){if(!((this||Hk)instanceof kl))return new kl(e,h,l);Yz.call(this||Hk);this.setMaxListeners(Infinity);"function"===typeof h&&(l=h,h={});h=h||{};if(!e||"object"!==typeof e){e=new WZ("First argument must be an abstract-leveldown compliant store");if("function"===typeof l)return Zz.nextTick(l,e);throw e;}XZ.strictEqual(typeof e.status,
"string",".status required, old abstract-leveldown");(this||Hk).options=Vw(h);(this||Hk)._db=e;(this||Hk).db=new rO(e);this.open(l)}function $z(e,h){if(!e._isOpening()&&!e.isOpen())return Zz.nextTick(h,new AE("Database is not open")),!0}function Op(e,h){return Object.hasOwnProperty.call(e,h)&&h}function YZ(e){return e}function aA(e){return e}function BE(e){return void 0===e||null===e||CE.isBuffer(e)}function en(e){if(!((this||Hq)instanceof en))return new en(e);(this||Hq).opts=e||{};(this||Hq).encodings=
DE}function sO(e){var h=e.length;if(0<h%4)throw Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("=");return-1===e&&(e=h),[e,e===h?0:4-e%4]}function ZZ(e,h,l){for(var b,c=[],g=h;g<l;g+=3)h=(e[g]<<16&16711680)+(e[g+1]<<8&65280)+(255&e[g+2]),c.push(Pp[(b=h)>>18&63]+Pp[b>>12&63]+Pp[b>>6&63]+Pp[63&b]);return c.join("")}function Iq(e){if(2147483647<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return Object.setPrototypeOf(e,Zg.prototype),
e}function Zg(e,h,l){if("number"==typeof e){if("string"==typeof h)throw new TypeError('The "string" argument must be of type string. Received type number');return EE(e)}return tO(e,h,l)}function tO(e,h,l){if("string"==typeof e)return function(c,g){"string"==typeof g&&""!==g||(g="utf8");if(!Zg.isEncoding(g))throw new TypeError("Unknown encoding: "+g);var a=0|uO(c,g),d=Iq(a);c=d.write(c,g);c!==a&&(d=d.slice(0,c));return d}(e,h);if(ArrayBuffer.isView(e))return FE(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
ad(e));if(Jq(e,ArrayBuffer)||e&&Jq(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(Jq(e,SharedArrayBuffer)||e&&Jq(e.buffer,SharedArrayBuffer)))return $Z(e,h,l);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var b=e.valueOf&&e.valueOf();if(null!=b&&b!==e)return Zg.from(b,h,l);if(b=function(c){if(Zg.isBuffer(c)){var g=0|GE(c.length),a=Iq(g);return 0===a.length||c.copy(a,0,0,g),a}if(void 0!==c.length)return(g="number"!=
typeof c.length)||(g=c.length,g=g!=g),g?Iq(0):FE(c);if("Buffer"===c.type&&Array.isArray(c.data))return FE(c.data)}(e))return b;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Zg.from(e[Symbol.toPrimitive]("string"),h,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+ad(e));}function vO(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');
if(0>e)throw new RangeError('The value "'+e+'" is invalid for option "size"');}function EE(e){return vO(e),Iq(0>e?0:0|GE(e))}function FE(e){for(var h=0>e.length?0:0|GE(e.length),l=Iq(h),b=0;b<h;b+=1)l[b]=255&e[b];return l}function $Z(e,h,l){if(0>h||e.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<h+(l||0))throw new RangeError('"length" is outside of buffer bounds');var b;return b=void 0===h&&void 0===l?new Uint8Array(e):void 0===l?new Uint8Array(e,h):new Uint8Array(e,
h,l),Object.setPrototypeOf(b,Zg.prototype),b}function GE(e){if(2147483647<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return 0|e}function uO(e,h){if(Zg.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Jq(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+ad(e));var l=e.length,b=2<arguments.length&&!0===arguments[2];
if(!b&&0===l)return 0;for(var c=!1;;)switch(h){case "ascii":case "latin1":case "binary":return l;case "utf8":case "utf-8":return HE(e).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*l;case "hex":return l>>>1;case "base64":return wO(e).length;default:if(c)return b?-1:HE(e).length;h=(""+h).toLowerCase();c=!0}}function a_(e,h,l){var b=!1;if(((void 0===h||0>h)&&(h=0),h>this.length)||((void 0===l||l>this.length)&&(l=this.length),0>=l)||(l>>>=0)<=(h>>>=0))return"";for(e||(e="utf8");;)switch(e){case "hex":e=
this.length;(!h||0>h)&&(h=0);(!l||0>l||l>e)&&(l=e);for(e="";h<l;++h)e+=b_[this[h]];return e;case "utf8":case "utf-8":return xO(this,h,l);case "ascii":e="";for(l=Math.min(this.length,l);h<l;++h)e+=String.fromCharCode(127&this[h]);return e;case "latin1":case "binary":e="";for(l=Math.min(this.length,l);h<l;++h)e+=String.fromCharCode(this[h]);return e;case "base64":return 0===h&&l===this.length?IE.fromByteArray(this):IE.fromByteArray(this.slice(h,l));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":h=
this.slice(h,l);l="";for(e=0;e<h.length;e+=2)l+=String.fromCharCode(h[e]+256*h[e+1]);return l;default:if(b)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();b=!0}}function Ns(e,h,l){var b=e[h];e[h]=e[l];e[l]=b}function yO(e,h,l,b,c){if(0===e.length)return-1;"string"==typeof l?(b=l,l=0):2147483647<l?l=2147483647:-2147483648>l&&(l=-2147483648);var g=l=+l;if(g!=g&&(l=c?0:e.length-1),0>l&&(l=e.length+l),l>=e.length){if(c)return-1;l=e.length-1}else if(0>l){if(!c)return-1;l=0}if("string"==
typeof h&&(h=Zg.from(h,b)),Zg.isBuffer(h))return 0===h.length?-1:zO(e,h,l,b,c);if("number"==typeof h)return h&=255,"function"==typeof Uint8Array.prototype.indexOf?c?Uint8Array.prototype.indexOf.call(e,h,l):Uint8Array.prototype.lastIndexOf.call(e,h,l):zO(e,[h],l,b,c);throw new TypeError("val must be string, number or Buffer");}function zO(e,h,l,b,c){function g(k,n){return 1===a?k[n]:k.readUInt16BE(n*a)}var a=1,d=e.length,f=h.length;if(void 0!==b&&("ucs2"===(b=String(b).toLowerCase())||"ucs-2"===b||
"utf16le"===b||"utf-16le"===b)){if(2>e.length||2>h.length)return-1;a=2;d/=2;f/=2;l/=2}if(c)for(b=-1;l<d;l++)if(g(e,l)===g(h,-1===b?0:l-b)){if(-1===b&&(b=l),l-b+1===f)return b*a}else-1!==b&&(l-=l-b),b=-1;else for(l+f>d&&(l=d-f);0<=l;l--){d=!0;for(b=0;b<f;b++)if(g(e,l+b)!==g(h,b)){d=!1;break}if(d)return l}return-1}function AO(e,h,l,b){for(var c=[],g=0;g<h.length;++g)c.push(255&h.charCodeAt(g));return bA(c,e,l,b)}function xO(e,h,l){l=Math.min(e.length,l);for(var b=[];h<l;){var c,g,a=e[h],d=null,f=239<
a?4:223<a?3:191<a?2:1;if(h+f<=l)switch(f){case 1:128>a&&(d=a);break;case 2:128==(192&(c=e[h+1]))&&127<(g=(31&a)<<6|63&c)&&(d=g);break;case 3:c=e[h+1];var k=e[h+2];128==(192&c)&&128==(192&k)&&2047<(g=(15&a)<<12|(63&c)<<6|63&k)&&(55296>g||57343<g)&&(d=g);break;case 4:c=e[h+1];k=e[h+2];var n=e[h+3];128==(192&c)&&128==(192&k)&&128==(192&n)&&65535<(g=(15&a)<<18|(63&c)<<12|(63&k)<<6|63&n)&&1114112>g&&(d=g)}null===d?(d=65533,f=1):65535<d&&(d-=65536,b.push(d>>>10&1023|55296),d=56320|1023&d);b.push(d);h+=
f}e=b.length;if(4096>=e)b=String.fromCharCode.apply(String,b);else{l="";for(c=0;c<e;)l+=String.fromCharCode.apply(String,b.slice(c,c+=4096));b=l}return b}function pm(e,h,l){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+h>l)throw new RangeError("Trying to access beyond buffer length");}function xn(e,h,l,b,c,g){if(!Zg.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>c||h<g)throw new RangeError('"value" argument is out of bounds');if(l+b>e.length)throw new RangeError("Index out of range");
}function BO(e,h,l,b,c,g){if(l+b>e.length)throw new RangeError("Index out of range");if(0>l)throw new RangeError("Index out of range");}function CO(e,h,l,b,c){return h=+h,l>>>=0,c||BO(e,0,l,4),Mu.write(e,h,l,b,23,4),l+4}function DO(e,h,l,b,c){return h=+h,l>>>=0,c||BO(e,0,l,8),Mu.write(e,h,l,b,52,8),l+8}function HE(e,h){var l;h=h||1/0;for(var b=e.length,c=null,g=[],a=0;a<b;++a){if(55295<(l=e.charCodeAt(a))&&57344>l){if(!c){if(56319<l){-1<(h-=3)&&g.push(239,191,189);continue}if(a+1===b){-1<(h-=3)&&
g.push(239,191,189);continue}c=l;continue}if(56320>l){-1<(h-=3)&&g.push(239,191,189);c=l;continue}l=65536+(c-55296<<10|l-56320)}else c&&-1<(h-=3)&&g.push(239,191,189);if(c=null,128>l){if(0>--h)break;g.push(l)}else if(2048>l){if(0>(h-=2))break;g.push(l>>6|192,63&l|128)}else if(65536>l){if(0>(h-=3))break;g.push(l>>12|224,l>>6&63|128,63&l|128)}else{if(!(1114112>l))throw Error("Invalid code point");if(0>(h-=4))break;g.push(l>>18|240,l>>12&63|128,l>>6&63|128,63&l|128)}}return g}function wO(e){return IE.toByteArray(function(h){if(2>
(h=(h=h.split("=")[0]).trim().replace(c_,"")).length)return"";for(;0!=h.length%4;)h+="=";return h}(e))}function bA(e,h,l,b){for(var c=0;c<b&&!(c+l>=h.length||c>=e.length);++c)h[c+l]=e[c];return c}function Jq(e,h){return e instanceof h||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===h.name}function EO(e,h){for(var l in e)h[l]=e[l]}function Os(e,h,l){return Qp(e,h,l)}function Ww(e){switch(this.encoding=function(h){var l=function(b){if(!b)return"utf8";for(var c;;)switch(b){case "utf8":case "utf-8":return"utf8";
case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return b;default:if(c)return;b=(""+b).toLowerCase();c=!0}}(h);if("string"!=typeof l&&(JE.isEncoding===FO||!FO(h)))throw Error("Unknown encoding: "+h);return l||h}(e),this.encoding){case "utf16le":this.text=d_;this.end=e_;e=4;break;case "utf8":this.fillLast=f_;e=4;break;case "base64":this.text=g_;this.end=h_;e=3;break;default:return this.write=i_,
this.end=j_,void 0}this.lastTotal=this.lastNeed=0;this.lastChar=JE.allocUnsafe(e)}function KE(e){return 127>=e?0:6==e>>5?2:14==e>>4?3:30==e>>3?4:2==e>>6?-1:-2}function f_(e){var h=this.lastTotal-this.lastNeed;a:if(128!=(192&e[0]))var l=(this.lastNeed=0,"\ufffd");else{if(1<this.lastNeed&&1<e.length){if(128!=(192&e[1])){l=(this.lastNeed=1,"\ufffd");break a}if(2<this.lastNeed&&2<e.length&&128!=(192&e[2])){l=(this.lastNeed=2,"\ufffd");break a}}l=void 0}return void 0!==l?l:this.lastNeed<=e.length?(e.copy(this.lastChar,
h,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,h,0,e.length),this.lastNeed-=e.length,void 0)}function d_(e,h){if(0==(e.length-h)%2){if(h=e.toString("utf16le",h)){var l=h.charCodeAt(h.length-1);if(55296<=l&&56319>=l)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],h.slice(0,-1)}return h}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",h,e.length-1)}function e_(e){e=
e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):e}function g_(e,h){var l=(e.length-h)%3;return 0===l?e.toString("base64",h):(this.lastNeed=3-l,this.lastTotal=3,1===l?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",h,e.length-l))}function h_(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function i_(e){return e.toString(this.encoding)}
function j_(e){return e&&e.length?this.write(e):""}function k_(){function e(a){var d=a.length;if(0<d%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");-1===a&&(a=d);return[a,a===d?0:4-a%4]}function h(a,d,f){for(var k=[],n=d;n<f;n+=3)d=(a[n]<<16&16711680)+(a[n+1]<<8&65280)+(a[n+2]&255),k.push(l[d>>18&63]+l[d>>12&63]+l[d>>6&63]+l[d&63]);return k.join("")}if(GO)return Xw;GO=!0;Xw.byteLength=function(a){a=e(a);var d=a[1];return 3*(a[0]+d)/4-d};Xw.toByteArray=function(a){var d=
e(a);var f=d[0];d=d[1];var k=new c(3*(f+d)/4-d),n=0,p=0<d?f-4:f,q;for(q=0;q<p;q+=4)f=b[a.charCodeAt(q)]<<18|b[a.charCodeAt(q+1)]<<12|b[a.charCodeAt(q+2)]<<6|b[a.charCodeAt(q+3)],k[n++]=f>>16&255,k[n++]=f>>8&255,k[n++]=f&255;2===d&&(f=b[a.charCodeAt(q)]<<2|b[a.charCodeAt(q+1)]>>4,k[n++]=f&255);1===d&&(f=b[a.charCodeAt(q)]<<10|b[a.charCodeAt(q+1)]<<4|b[a.charCodeAt(q+2)]>>2,k[n++]=f>>8&255,k[n++]=f&255);return k};Xw.fromByteArray=function(a){for(var d=a.length,f=d%3,k=[],n=0,p=d-f;n<p;n+=16383)k.push(h(a,
n,n+16383>p?p:n+16383));1===f?(a=a[d-1],k.push(l[a>>2]+l[a<<4&63]+"==")):2===f&&(a=(a[d-2]<<8)+a[d-1],k.push(l[a>>10]+l[a>>4&63]+l[a<<2&63]+"="));return k.join("")};for(var l=[],b=[],c="undefined"!==typeof Uint8Array?Uint8Array:Array,g=0;64>g;++g)l[g]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g],b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(g)]=g;b[45]=62;b[95]=63;return Xw}function l_(){if(HO)return cA;HO=!0;cA.read=function(e,h,l,b,c){var g=
8*c-b-1;var a=(1<<g)-1,d=a>>1,f=-7;c=l?c-1:0;var k=l?-1:1,n=e[h+c];c+=k;l=n&(1<<-f)-1;n>>=-f;for(f+=g;0<f;l=256*l+e[h+c],c+=k,f-=8);g=l&(1<<-f)-1;l>>=-f;for(f+=b;0<f;g=256*g+e[h+c],c+=k,f-=8);if(0===l)l=1-d;else{if(l===a)return g?NaN:Infinity*(n?-1:1);g+=Math.pow(2,b);l-=d}return(n?-1:1)*g*Math.pow(2,l-b)};cA.write=function(e,h,l,b,c,g){var a,d=8*g-c-1,f=(1<<d)-1,k=f>>1,n=23===c?Math.pow(2,-24)-Math.pow(2,-77):0;g=b?0:g-1;var p=b?1:-1,q=0>h||0===h&&0>1/h?1:0;h=Math.abs(h);isNaN(h)||Infinity===h?(h=
isNaN(h)?1:0,b=f):(b=Math.floor(Math.log(h)/Math.LN2),1>h*(a=Math.pow(2,-b))&&(b--,a*=2),h=1<=b+k?h+n/a:h+n*Math.pow(2,1-k),2<=h*a&&(b++,a/=2),b+k>=f?(h=0,b=f):1<=b+k?(h=(h*a-1)*Math.pow(2,c),b+=k):(h=h*Math.pow(2,k-1)*Math.pow(2,c),b=0));for(;8<=c;e[l+g]=h&255,g+=p,h/=256,c-=8);b=b<<c|h;for(d+=c;0<d;e[l+g]=b&255,g+=p,b/=256,d-=8);e[l+g-p]|=128*q};return cA}function Nu(){if(IO)return JO;IO=!0;return JO="function"===typeof Object.create?function(e,h){h&&(e.super_=h,e.prototype=Object.create(h.prototype,
{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,h){if(h){e.super_=h;var l=function(){};l.prototype=h.prototype;e.prototype=new l;e.prototype.constructor=e}}}function KO(){if(LO)return MO;LO=!0;return MO=Dl.EventEmitter}function m_(){function e(d,f){var k=Object.keys(d);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(d);f&&(n=n.filter(function(p){return Object.getOwnPropertyDescriptor(d,p).enumerable}));k.push.apply(k,n)}return k}function h(d){for(var f=
1;f<arguments.length;f++){var k=null!=arguments[f]?arguments[f]:{};f%2?e(Object(k),!0).forEach(function(n){var p=k[n];n in d?Object.defineProperty(d,n,{value:p,enumerable:!0,configurable:!0,writable:!0}):d[n]=p}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(k)):e(Object(k)).forEach(function(n){Object.defineProperty(d,n,Object.getOwnPropertyDescriptor(k,n))})}return d}function l(d,f){for(var k=0;k<f.length;k++){var n=f[k];n.enumerable=n.enumerable||!1;
n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(d,n.key,n)}}function b(d,f,k){f&&l(d.prototype,f);k&&l(d,k);return d}if(NO)return OO;NO=!0;var c=Ps.Buffer,g=Dg.inspect,a=g&&g.custom||"inspect";return OO=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}b(d,[{key:"push",value:function(f){f={data:f,next:null};0<this.length?this.tail.next=f:this.head=f;this.tail=f;++this.length}},{key:"unshift",
value:function(f){f={data:f,next:this.head};0===this.length&&(this.tail=f);this.head=f;++this.length}},{key:"shift",value:function(){if(0!==this.length){var f=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return f}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(f){if(0===this.length)return"";for(var k=this.head,n=""+k.data;k=k.next;)n+=f+k.data;return n}},{key:"concat",value:function(f){if(0===this.length)return c.alloc(0);
f=c.allocUnsafe(f>>>0);for(var k=this.head,n=0;k;)c.prototype.copy.call(k.data,f,n),n+=k.data.length,k=k.next;return f}},{key:"consume",value:function(f,k){f<this.head.data.length?(k=this.head.data.slice(0,f),this.head.data=this.head.data.slice(f)):k=f===this.head.data.length?this.shift():k?this._getString(f):this._getBuffer(f);return k}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(f){var k=this.head,n=1,p=k.data;for(f-=p.length;k=k.next;){var q=k.data,r=
f>q.length?q.length:f;p=r===q.length?p+q:p+q.slice(0,f);f-=r;if(0===f){r===q.length?(++n,this.head=k.next?k.next:this.tail=null):(this.head=k,k.data=q.slice(r));break}++n}this.length-=n;return p}},{key:"_getBuffer",value:function(f){var k=c.allocUnsafe(f),n=this.head,p=1;n.data.copy(k);for(f-=n.data.length;n=n.next;){var q=n.data,r=f>q.length?q.length:f;q.copy(k,k.length-f,0,r);f-=r;if(0===f){r===q.length?(++p,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=q.slice(r));break}++p}this.length-=
p;return k}},{key:a,value:function(f,k){return g(this,h({},k,{depth:0,customInspect:!1}))}}]);return d}()}function PO(){function e(c,g){l(c,g);h(c)}function h(c){c._writableState&&!c._writableState.emitClose||c._readableState&&!c._readableState.emitClose||c.emit("close")}function l(c,g){c.emit("error",g)}if(QO)return RO;QO=!0;var b=yk;return RO={destroy:function(c,g){var a=this,d=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||d)return g?g(c):
c&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,b.nextTick(l,this,c)):b.nextTick(l,this,c)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(c||null,function(f){!g&&f?a._writableState?a._writableState.errorEmitted?b.nextTick(h,a):(a._writableState.errorEmitted=!0,b.nextTick(e,a,f)):b.nextTick(e,a,f):g?(b.nextTick(h,a),g(f)):b.nextTick(h,a)});return this},undestroy:function(){this._readableState&&
(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(c,g){var a=c._readableState,d=c._writableState;a&&a.autoDestroy||d&&d.autoDestroy?c.destroy(g):
c.emit("error",g)}}}function Ou(){function e(b,c,g){g||(g=Error);var a=function(d){function f(n,p,q){Sd(this,f);return k.call(this,"string"===typeof c?c:c(n,p,q))}vd(f,d);var k=qb(f);return f}(g);a.prototype.name=g.name;a.prototype.code=b;l[b]=a}function h(b,c){if(Array.isArray(b)){var g=b.length;b=b.map(function(a){return String(a)});return 2<g?"one of ".concat(c," ").concat(b.slice(0,g-1).join(", "),", or ")+b[g-1]:2===g?"one of ".concat(c," ").concat(b[0]," or ").concat(b[1]):"of ".concat(c," ").concat(b[0])}return"of ".concat(c,
" ").concat(String(b))}if(SO)return LE;SO=!0;var l={};e("ERR_INVALID_OPT_VALUE",function(b,c){return'The value "'+c+'" is invalid for option "'+b+'"'},TypeError);e("ERR_INVALID_ARG_TYPE",function(b,c,g){var a;if(a="string"===typeof c)a="not "===c.substr(0,4);a?(a="must not be",c=c.replace(/^not /,"")):a="must be";var d=void 0;if(void 0===d||d>b.length)d=b.length;" argument"===b.substring(d-9,d)?b="The ".concat(b," ").concat(a," ").concat(h(c,"type")):(d=void 0,"number"!==typeof d&&(d=0),d=d+1>b.length?
!1:-1!==b.indexOf(".",d),d=d?"property":"argument",b='The "'.concat(b,'" ').concat(d," ").concat(a," ").concat(h(c,"type")));return b+=". Received type ".concat(ad(g))},TypeError);e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");e("ERR_METHOD_NOT_IMPLEMENTED",function(b){return"The "+b+" method is not implemented"});e("ERR_STREAM_PREMATURE_CLOSE","Premature close");e("ERR_STREAM_DESTROYED",function(b){return"Cannot call "+b+" after a stream was destroyed"});e("ERR_MULTIPLE_CALLBACK","Callback called multiple times");
e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");e("ERR_STREAM_WRITE_AFTER_END","write after end");e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);e("ERR_UNKNOWN_ENCODING",function(b){return"Unknown encoding: "+b},TypeError);e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");LE.codes=l;return LE}function TO(){if(UO)return VO;UO=!0;var e=Ou().codes.ERR_INVALID_OPT_VALUE;return VO={getHighWaterMark:function(h,l,b,c){l=null!=l.highWaterMark?
l.highWaterMark:c?l[b]:null;if(null!=l){if(!isFinite(l)||Math.floor(l)!==l||0>l)throw new e(c?b:"highWaterMark",l);return Math.floor(l)}return h.objectMode?16:16384}}}function n_(){function e(h){try{if(!ME.localStorage)return!1}catch(l){return!1}h=ME.localStorage[h];return null==h?!1:"true"===String(h).toLowerCase()}if(WO)return XO;WO=!0;return XO=function(h,l){if(e("noDeprecation"))return h;var b=!1;return function(){if(!b){if(e("throwDeprecation"))throw Error(l);e("traceDeprecation")?console.trace(l):
console.warn(l);b=!0}return h.apply(this||ME,arguments)}}}function YO(){function e(Ua){var xa=this;this.entry=this.next=null;this.finish=function(){var rc=xa.entry;for(xa.entry=null;rc;){var Lb=rc.callback;Ua.pendingcb--;Lb(void 0);rc=rc.next}Ua.corkedRequestsFree.next=xa}}function h(){}function l(Ua,xa,rc){p=p||Pu();Ua=Ua||{};"boolean"!==typeof rc&&(rc=xa instanceof p);this.objectMode=!!Ua.objectMode;rc&&(this.objectMode=this.objectMode||!!Ua.writableObjectMode);this.highWaterMark=D(this,Ua,"writableHighWaterMark",
rc);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==Ua.decodeStrings;this.defaultEncoding=Ua.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(Lb){var Ac=xa._writableState,Xb=Ac.sync,qd=Ac.writecb;if("function"!==typeof qd)throw new J;Ac.writing=!1;Ac.writecb=null;Ac.length-=Ac.writelen;Ac.writelen=0;Lb?(--Ac.pendingcb,Xb?(n.nextTick(qd,Lb),n.nextTick(k,xa,Ac),
xa._writableState.errorEmitted=!0,mc(xa,Lb)):(qd(Lb),xa._writableState.errorEmitted=!0,mc(xa,Lb),k(xa,Ac))):((Lb=d(Ac)||xa.destroyed)||Ac.corked||Ac.bufferProcessing||!Ac.bufferedRequest||a(xa,Ac),Xb?n.nextTick(g,xa,Ac,Lb,qd):g(xa,Ac,Lb,qd))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==Ua.emitClose;this.autoDestroy=!!Ua.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=
new e(this)}function b(Ua){p=p||Pu();var xa=this instanceof p;if(!xa&&!hc.call(b,this))return new b(Ua);this._writableState=new l(Ua,this,xa);this.writable=!0;Ua&&("function"===typeof Ua.write&&(this._write=Ua.write),"function"===typeof Ua.writev&&(this._writev=Ua.writev),"function"===typeof Ua.destroy&&(this._destroy=Ua.destroy),"function"===typeof Ua["final"]&&(this._final=Ua["final"]));r.call(this)}function c(Ua,xa,rc,Lb,Ac,Xb,qd){xa.writelen=Lb;xa.writecb=qd;xa.writing=!0;xa.sync=!0;if(xa.destroyed)xa.onwrite(new ja("write"));
else rc?Ua._writev(Ac,xa.onwrite):Ua._write(Ac,Xb,xa.onwrite);xa.sync=!1}function g(Ua,xa,rc,Lb){!rc&&0===xa.length&&xa.needDrain&&(xa.needDrain=!1,Ua.emit("drain"));xa.pendingcb--;Lb();k(Ua,xa)}function a(Ua,xa){xa.bufferProcessing=!0;var rc=xa.bufferedRequest;if(Ua._writev&&rc&&rc.next){var Lb=Array(xa.bufferedRequestCount),Ac=xa.corkedRequestsFree;Ac.entry=rc;for(var Xb=0,qd=!0;rc;)Lb[Xb]=rc,rc.isBuf||(qd=!1),rc=rc.next,Xb+=1;Lb.allBuffers=qd;c(Ua,xa,!0,xa.length,Lb,"",Ac.finish);xa.pendingcb++;
xa.lastBufferedRequest=null;Ac.next?(xa.corkedRequestsFree=Ac.next,Ac.next=null):xa.corkedRequestsFree=new e(xa);xa.bufferedRequestCount=0}else{for(;rc&&(Lb=rc.chunk,c(Ua,xa,!1,xa.objectMode?1:Lb.length,Lb,rc.encoding,rc.callback),rc=rc.next,xa.bufferedRequestCount--,!xa.writing););null===rc&&(xa.lastBufferedRequest=null)}xa.bufferedRequest=rc;xa.bufferProcessing=!1}function d(Ua){return Ua.ending&&0===Ua.length&&null===Ua.bufferedRequest&&!Ua.finished&&!Ua.writing}function f(Ua,xa){Ua._final(function(rc){xa.pendingcb--;
rc&&mc(Ua,rc);xa.prefinished=!0;Ua.emit("prefinish");k(Ua,xa)})}function k(Ua,xa){var rc=d(xa);rc&&(xa.prefinished||xa.finalCalled||("function"!==typeof Ua._final||xa.destroyed?(xa.prefinished=!0,Ua.emit("prefinish")):(xa.pendingcb++,xa.finalCalled=!0,n.nextTick(f,Ua,xa))),0===xa.pendingcb&&(xa.finished=!0,Ua.emit("finish"),xa.autoDestroy&&(xa=Ua._readableState,(!xa||xa.autoDestroy&&xa.endEmitted)&&Ua.destroy())));return rc}if(ZO)return NE;ZO=!0;var n=yk;NE=b;var p;b.WritableState=l;var q={deprecate:n_()},
r=KO(),u=Ps.Buffer,x=o_.Uint8Array||function(){},y=PO(),D=TO().getHighWaterMark,H=Ou().codes,I=H.ERR_INVALID_ARG_TYPE,N=H.ERR_METHOD_NOT_IMPLEMENTED,J=H.ERR_MULTIPLE_CALLBACK,sa=H.ERR_STREAM_CANNOT_PIPE,ja=H.ERR_STREAM_DESTROYED,Ha=H.ERR_STREAM_NULL_VALUES,Qa=H.ERR_STREAM_WRITE_AFTER_END,ec=H.ERR_UNKNOWN_ENCODING,mc=y.errorOrDestroy;Nu()(b,r);l.prototype.getBuffer=function(){for(var Ua=this.bufferedRequest,xa=[];Ua;)xa.push(Ua),Ua=Ua.next;return xa};(function(){try{Object.defineProperty(l.prototype,
"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(Ua){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var hc=Function.prototype[Symbol.hasInstance];Object.defineProperty(b,Symbol.hasInstance,{value:function(Ua){return hc.call(this,Ua)?!0:this!==b?!1:Ua&&Ua._writableState instanceof l}})}else hc=function(Ua){return Ua instanceof
this};b.prototype.pipe=function(){mc(this,new sa)};b.prototype.write=function(Ua,xa,rc){var Lb=this._writableState,Ac=!1,Xb;if(Xb=!Lb.objectMode)Xb=Ua,Xb=u.isBuffer(Xb)||Xb instanceof x;Xb&&!u.isBuffer(Ua)&&(Ua=u.from(Ua));"function"===typeof xa&&(rc=xa,xa=null);Xb?xa="buffer":xa||(xa=Lb.defaultEncoding);"function"!==typeof rc&&(rc=h);if(Lb.ending)Lb=rc,rc=new Qa,mc(this,rc),n.nextTick(Lb,rc);else{var qd;if(!(qd=Xb)){qd=Ua;var La=rc,Fd;null===qd?Fd=new Ha:"string"===typeof qd||Lb.objectMode||(Fd=
new I("chunk",["string","Buffer"],qd));Fd?(mc(this,Fd),n.nextTick(La,Fd),qd=!1):qd=!0}qd&&(Lb.pendingcb++,Ac=Xb,Ac||(Fd=Ua,Lb.objectMode||!1===Lb.decodeStrings||"string"!==typeof Fd||(Fd=u.from(Fd,xa)),Ua!==Fd&&(Ac=!0,xa="buffer",Ua=Fd)),Xb=Lb.objectMode?1:Ua.length,Lb.length+=Xb,Fd=Lb.length<Lb.highWaterMark,Fd||(Lb.needDrain=!0),Lb.writing||Lb.corked?(Xb=Lb.lastBufferedRequest,Lb.lastBufferedRequest={chunk:Ua,encoding:xa,isBuf:Ac,callback:rc,next:null},Xb?Xb.next=Lb.lastBufferedRequest:Lb.bufferedRequest=
Lb.lastBufferedRequest,Lb.bufferedRequestCount+=1):c(this,Lb,!1,Xb,Ua,xa,rc),Ac=Fd)}return Ac};b.prototype.cork=function(){this._writableState.corked++};b.prototype.uncork=function(){var Ua=this._writableState;Ua.corked&&(Ua.corked--,Ua.writing||Ua.corked||Ua.bufferProcessing||!Ua.bufferedRequest||a(this,Ua))};b.prototype.setDefaultEncoding=function(Ua){"string"===typeof Ua&&(Ua=Ua.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((Ua+"").toLowerCase())))throw new ec(Ua);
this._writableState.defaultEncoding=Ua;return this};Object.defineProperty(b.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});b.prototype._write=function(Ua,xa,rc){rc(new N("_write()"))};b.prototype._writev=null;b.prototype.end=function(Ua,xa,rc){var Lb=this._writableState;"function"===typeof Ua?(rc=
Ua,xa=Ua=null):"function"===typeof xa&&(rc=xa,xa=null);null!==Ua&&void 0!==Ua&&this.write(Ua,xa);Lb.corked&&(Lb.corked=1,this.uncork());if(!Lb.ending){Ua=rc;Lb.ending=!0;k(this,Lb);if(Ua)if(Lb.finished)n.nextTick(Ua);else this.once("finish",Ua);Lb.ended=!0;this.writable=!1}return this};Object.defineProperty(b.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?
!1:this._writableState.destroyed},set:function(Ua){this._writableState&&(this._writableState.destroyed=Ua)}});b.prototype.destroy=y.destroy;b.prototype._undestroy=y.undestroy;b.prototype._destroy=function(Ua,xa){xa(Ua)};return NE}function Pu(){function e(k){if(!(this instanceof e))return new e(k);g.call(this,k);a.call(this,k);this.allowHalfOpen=!0;k&&(!1===k.readable&&(this.readable=!1),!1===k.writable&&(this.writable=!1),!1===k.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||
b.nextTick(l,this)}function l(k){k.end()}if($O)return OE;$O=!0;var b=yk,c=Object.keys||function(k){var n=[],p;for(p in k)n.push(p);return n};OE=e;var g=aP(),a=YO();Nu()(e,g);c=c(a.prototype);for(var d=0;d<c.length;d++){var f=c[d];e.prototype[f]||(e.prototype[f]=a.prototype[f])}Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&
this._writableState.getBuffer()}});Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(k){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=k,this._writableState.destroyed=k)}});
return OE}function PE(){function e(c){var g=!1;return function(){if(!g){g=!0;for(var a=arguments.length,d=Array(a),f=0;f<a;f++)d[f]=arguments[f];c.apply(this,d)}}}function h(){}function l(c,g,a){if("function"===typeof g)return l(c,null,g);g||(g={});a=e(a||h);var d=g.readable||!1!==g.readable&&c.readable,f=g.writable||!1!==g.writable&&c.writable,k=function(){c.writable||p()},n=c._writableState&&c._writableState.finished,p=function(){f=!1;n=!0;d||a.call(c)},q=c._readableState&&c._readableState.endEmitted,
r=function(){d=!1;q=!0;f||a.call(c)},u=function(D){a.call(c,D)},x=function(){var D;if(d&&!q)return c._readableState&&c._readableState.ended||(D=new b),a.call(c,D);if(f&&!n)return c._writableState&&c._writableState.ended||(D=new b),a.call(c,D)},y=function(){c.req.on("finish",p)};if(c.setHeader&&"function"===typeof c.abort)if(c.on("complete",p),c.on("abort",x),c.req)y();else c.on("request",y);else f&&!c._writableState&&(c.on("end",k),c.on("close",k));c.on("end",r);c.on("finish",p);if(!1!==g.error)c.on("error",
u);c.on("close",x);return function(){c.removeListener("complete",p);c.removeListener("abort",x);c.removeListener("request",y);c.req&&c.req.removeListener("finish",p);c.removeListener("end",k);c.removeListener("close",k);c.removeListener("finish",p);c.removeListener("end",r);c.removeListener("error",u);c.removeListener("close",x)}}if(bP)return cP;bP=!0;var b=Ou().codes.ERR_STREAM_PREMATURE_CLOSE;return cP=l}function p_(){function e(D,H,I){H in D?Object.defineProperty(D,H,{value:I,enumerable:!0,configurable:!0,
writable:!0}):D[H]=I;return D}function h(D,H){return{value:D,done:H}}function l(D){var H=D[f];if(null!==H){var I=D[u].read();null!==I&&(D[q]=null,D[f]=null,D[k]=null,H(h(I,!1)))}}function b(D){g.nextTick(l,D)}function c(D,H){return function(I,N){D.then(function(){if(H[p])I(h(void 0,!0));else H[r](I,N)},N)}}if(dP)return eP;dP=!0;var g=yk,a,d=PE(),f=Symbol("lastResolve"),k=Symbol("lastReject"),n=Symbol("error"),p=Symbol("ended"),q=Symbol("lastPromise"),r=Symbol("handlePromise"),u=Symbol("stream"),x=
Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((a={get stream(){return this[u]},next:function(){var D=this,H=this[n];if(null!==H)return Promise.reject(H);if(this[p])return Promise.resolve(h(void 0,!0));if(this[u].destroyed)return new Promise(function(I,N){g.nextTick(function(){D[n]?N(D[n]):I(h(void 0,!0))})});if(H=this[q])H=new Promise(c(H,this));else{H=this[u].read();if(null!==H)return Promise.resolve(h(H,!1));H=new Promise(this[r])}return this[q]=H}},e(a,Symbol.asyncIterator,function(){return this}),
e(a,"return",function(){var D=this;return new Promise(function(H,I){D[u].destroy(null,function(N){N?I(N):H(h(void 0,!0))})})}),a),x);return eP=function(D){var H,I=Object.create(y,(H={},e(H,u,{value:D,writable:!0}),e(H,f,{value:null,writable:!0}),e(H,k,{value:null,writable:!0}),e(H,n,{value:null,writable:!0}),e(H,p,{value:D._readableState.endEmitted,writable:!0}),e(H,r,{value:function(N,J){var sa=I[u].read();sa?(I[q]=null,I[f]=null,I[k]=null,N(h(sa,!1))):(I[f]=N,I[k]=J)},writable:!0}),H));I[q]=null;
d(D,function(N){if(N&&"ERR_STREAM_PREMATURE_CLOSE"!==N.code){var J=I[k];null!==J&&(I[q]=null,I[f]=null,I[k]=null,J(N));I[n]=N}else N=I[f],null!==N&&(I[q]=null,I[f]=null,I[k]=null,N(h(void 0,!0))),I[p]=!0});D.on("readable",b.bind(null,I));return I}}function q_(){if(fP)return gP;fP=!0;return gP=function(){throw Error("Readable.from is not available in the browser");}}function aP(){function e(na,Va,yd){if("function"===typeof na.prependListener)return na.prependListener(Va,yd);if(na._events&&na._events[Va])Array.isArray(na._events[Va])?
na._events[Va].unshift(yd):na._events[Va]=[yd,na._events[Va]];else na.on(Va,yd)}function h(na,Va,yd){N=N||Pu();na=na||{};"boolean"!==typeof yd&&(yd=Va instanceof N);this.objectMode=!!na.objectMode;yd&&(this.objectMode=this.objectMode||!!na.readableObjectMode);this.highWaterMark=mc(this,na,"readableHighWaterMark",yd);this.buffer=new ec;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=
this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==na.emitClose;this.autoDestroy=!!na.autoDestroy;this.destroyed=!1;this.defaultEncoding=na.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;na.encoding&&(Ac||(Ac=QE.StringDecoder),this.decoder=new Ac(na.encoding),this.encoding=na.encoding)}function l(na){N=N||Pu();if(!(this instanceof l))return new l(na);this._readableState=new h(na,this,this instanceof N);this.readable=!0;na&&("function"===
typeof na.read&&(this._read=na.read),"function"===typeof na.destroy&&(this._destroy=na.destroy));J.call(this)}function b(na,Va,yd,me,ta){Qa("readableAddChunk",Va);var za=na._readableState;if(null===Va)za.reading=!1,Qa("onEofChunk"),za.ended||(za.decoder&&(Va=za.decoder.end())&&Va.length&&(za.buffer.push(Va),za.length+=za.objectMode?1:Va.length),za.ended=!0,za.sync?a(na):(za.needReadable=!1,za.emittedReadable||(za.emittedReadable=!0,d(na))));else{if(!ta){ta=Va;var W;sa.isBuffer(ta)||ta instanceof ja||
"string"===typeof ta||void 0===ta||za.objectMode||(W=new Ua("chunk",["string","Buffer","Uint8Array"],ta));var ea=W}if(ea)La(na,ea);else if(za.objectMode||Va&&0<Va.length)if("string"===typeof Va||za.objectMode||Object.getPrototypeOf(Va)===sa.prototype||(Va=sa.from(Va)),me)za.endEmitted?La(na,new Lb):c(na,za,Va,!0);else if(za.ended)La(na,new xa);else{if(za.destroyed)return!1;za.reading=!1;za.decoder&&!yd?(Va=za.decoder.write(Va),za.objectMode||0!==Va.length?c(na,za,Va,!1):f(na,za)):c(na,za,Va,!1)}else me||
(za.reading=!1,f(na,za))}return!za.ended&&(za.length<za.highWaterMark||0===za.length)}function c(na,Va,yd,me){Va.flowing&&0===Va.length&&!Va.sync?(Va.awaitDrain=0,na.emit("data",yd)):(Va.length+=Va.objectMode?1:yd.length,me?Va.buffer.unshift(yd):Va.buffer.push(yd),Va.needReadable&&a(na));f(na,Va)}function g(na,Va){if(0>=na||0===Va.length&&Va.ended)return 0;if(Va.objectMode)return 1;if(na!==na)return Va.flowing&&Va.length?Va.buffer.head.data.length:Va.length;if(na>Va.highWaterMark){var yd=na;1073741824<=
yd?yd=1073741824:(yd--,yd|=yd>>>1,yd|=yd>>>2,yd|=yd>>>4,yd|=yd>>>8,yd|=yd>>>16,yd++);Va.highWaterMark=yd}return na<=Va.length?na:Va.ended?Va.length:(Va.needReadable=!0,0)}function a(na){var Va=na._readableState;Qa("emitReadable",Va.needReadable,Va.emittedReadable);Va.needReadable=!1;Va.emittedReadable||(Qa("emitReadable",Va.flowing),Va.emittedReadable=!0,I.nextTick(d,na))}function d(na){var Va=na._readableState;Qa("emitReadable_",Va.destroyed,Va.length,Va.ended);Va.destroyed||!Va.length&&!Va.ended||
(na.emit("readable"),Va.emittedReadable=!1);Va.needReadable=!Va.flowing&&!Va.ended&&Va.length<=Va.highWaterMark;u(na)}function f(na,Va){Va.readingMore||(Va.readingMore=!0,I.nextTick(k,na,Va))}function k(na,Va){for(;!Va.reading&&!Va.ended&&(Va.length<Va.highWaterMark||Va.flowing&&0===Va.length);){var yd=Va.length;Qa("maybeReadMore read 0");na.read(0);if(yd===Va.length)break}Va.readingMore=!1}function n(na){return function(){var Va=na._readableState;Qa("pipeOnDrain",Va.awaitDrain);Va.awaitDrain&&Va.awaitDrain--;
0===Va.awaitDrain&&na.listeners("data").length&&(Va.flowing=!0,u(na))}}function p(na){var Va=na._readableState;Va.readableListening=0<na.listenerCount("readable");Va.resumeScheduled&&!Va.paused?Va.flowing=!0:0<na.listenerCount("data")&&na.resume()}function q(na){Qa("readable nexttick read 0");na.read(0)}function r(na,Va){Qa("resume",Va.reading);Va.reading||na.read(0);Va.resumeScheduled=!1;na.emit("resume");u(na);Va.flowing&&!Va.reading&&na.read(0)}function u(na){var Va=na._readableState;for(Qa("flow",
Va.flowing);Va.flowing&&null!==na.read(););}function x(na,Va){if(0===Va.length)return null;Va.objectMode?na=Va.buffer.shift():!na||na>=Va.length?(na=Va.decoder?Va.buffer.join(""):1===Va.buffer.length?Va.buffer.first():Va.buffer.concat(Va.length),Va.buffer.clear()):na=Va.buffer.consume(na,Va.decoder);return na}function y(na){var Va=na._readableState;Qa("endReadable",Va.endEmitted);Va.endEmitted||(Va.ended=!0,I.nextTick(D,Va,na))}function D(na,Va){Qa("endReadableNT",na.endEmitted,na.length);na.endEmitted||
0!==na.length||(na.endEmitted=!0,Va.readable=!1,Va.emit("end"),na.autoDestroy&&(na=Va._writableState,(!na||na.autoDestroy&&na.finished)&&Va.destroy()))}function H(na,Va){for(var yd=0,me=na.length;yd<me;yd++)if(na[yd]===Va)return yd;return-1}if(hP)return RE;hP=!0;var I=yk;RE=l;var N;l.ReadableState=h;Dl.EventEmitter;var J=KO(),sa=Ps.Buffer,ja=r_.Uint8Array||function(){},Ha=Dg;var Qa=Ha&&Ha.debuglog?Ha.debuglog("stream"):function(){};var ec=m_();Ha=PO();var mc=TO().getHighWaterMark,hc=Ou().codes,Ua=
hc.ERR_INVALID_ARG_TYPE,xa=hc.ERR_STREAM_PUSH_AFTER_EOF,rc=hc.ERR_METHOD_NOT_IMPLEMENTED,Lb=hc.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Ac,Xb,qd;Nu()(l,J);var La=Ha.errorOrDestroy,Fd=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(na){this._readableState&&(this._readableState.destroyed=na)}});l.prototype.destroy=Ha.destroy;l.prototype._undestroy=Ha.undestroy;
l.prototype._destroy=function(na,Va){Va(na)};l.prototype.push=function(na,Va){var yd=this._readableState;if(yd.objectMode)var me=!0;else"string"===typeof na&&(Va=Va||yd.defaultEncoding,Va!==yd.encoding&&(na=sa.from(na,Va),Va=""),me=!0);return b(this,na,Va,!1,me)};l.prototype.unshift=function(na){return b(this,na,null,!0,!1)};l.prototype.isPaused=function(){return!1===this._readableState.flowing};l.prototype.setEncoding=function(na){Ac||(Ac=QE.StringDecoder);na=new Ac(na);this._readableState.decoder=
na;this._readableState.encoding=this._readableState.decoder.encoding;for(var Va=this._readableState.buffer.head,yd="";null!==Va;)yd+=na.write(Va.data),Va=Va.next;this._readableState.buffer.clear();""!==yd&&this._readableState.buffer.push(yd);this._readableState.length=yd.length;return this};l.prototype.read=function(na){Qa("read",na);na=parseInt(na,10);var Va=this._readableState,yd=na;0!==na&&(Va.emittedReadable=!1);if(0===na&&Va.needReadable&&((0!==Va.highWaterMark?Va.length>=Va.highWaterMark:0<
Va.length)||Va.ended))return Qa("read: emitReadable",Va.length,Va.ended),0===Va.length&&Va.ended?y(this):a(this),null;na=g(na,Va);if(0===na&&Va.ended)return 0===Va.length&&y(this),null;var me=Va.needReadable;Qa("need readable",me);if(0===Va.length||Va.length-na<Va.highWaterMark)me=!0,Qa("length less than watermark",me);Va.ended||Va.reading?Qa("reading or ended",!1):me&&(Qa("do read"),Va.reading=!0,Va.sync=!0,0===Va.length&&(Va.needReadable=!0),this._read(Va.highWaterMark),Va.sync=!1,Va.reading||(na=
g(yd,Va)));me=0<na?x(na,Va):null;null===me?(Va.needReadable=Va.length<=Va.highWaterMark,na=0):(Va.length-=na,Va.awaitDrain=0);0===Va.length&&(Va.ended||(Va.needReadable=!0),yd!==na&&Va.ended&&y(this));null!==me&&this.emit("data",me);return me};l.prototype._read=function(na){La(this,new rc("_read()"))};l.prototype.pipe=function(na,Va){function yd(Td,nf){Qa("onunpipe");Td===V&&nf&&!1===nf.hasUnpiped&&(nf.hasUnpiped=!0,Qa("cleanup"),na.removeListener("close",W),na.removeListener("finish",ea),na.removeListener("drain",
U),na.removeListener("error",za),na.removeListener("unpipe",yd),V.removeListener("end",me),V.removeListener("end",Kb),V.removeListener("data",ta),fd=!0,!Oa.awaitDrain||na._writableState&&!na._writableState.needDrain||U())}function me(){Qa("onend");na.end()}function ta(Td){Qa("ondata");Td=na.write(Td);Qa("dest.write",Td);!1===Td&&((1===Oa.pipesCount&&Oa.pipes===na||1<Oa.pipesCount&&-1!==H(Oa.pipes,na))&&!fd&&(Qa("false write response, pause",Oa.awaitDrain),Oa.awaitDrain++),V.pause())}function za(Td){Qa("onerror",
Td);Kb();na.removeListener("error",za);0===na.listeners("error").length&&La(na,Td)}function W(){na.removeListener("finish",ea);Kb()}function ea(){Qa("onfinish");na.removeListener("close",W);Kb()}function Kb(){Qa("unpipe");V.unpipe(na)}var V=this,Oa=this._readableState;switch(Oa.pipesCount){case 0:Oa.pipes=na;break;case 1:Oa.pipes=[Oa.pipes,na];break;default:Oa.pipes.push(na)}Oa.pipesCount+=1;Qa("pipe count=%d opts=%j",Oa.pipesCount,Va);Va=Va&&!1===Va.end||na===I.stdout||na===I.stderr?Kb:me;if(Oa.endEmitted)I.nextTick(Va);
else V.once("end",Va);na.on("unpipe",yd);var U=n(V);na.on("drain",U);var fd=!1;V.on("data",ta);e(na,"error",za);na.once("close",W);na.once("finish",ea);na.emit("pipe",V);Oa.flowing||(Qa("pipe resume"),V.resume());return na};l.prototype.unpipe=function(na){var Va=this._readableState,yd={hasUnpiped:!1};if(0===Va.pipesCount)return this;if(1===Va.pipesCount){if(na&&na!==Va.pipes)return this;na||(na=Va.pipes);Va.pipes=null;Va.pipesCount=0;Va.flowing=!1;na&&na.emit("unpipe",this,yd);return this}if(!na){na=
Va.pipes;yd=Va.pipesCount;Va.pipes=null;Va.pipesCount=0;Va.flowing=!1;for(Va=0;Va<yd;Va++)na[Va].emit("unpipe",this,{hasUnpiped:!1});return this}var me=H(Va.pipes,na);if(-1===me)return this;Va.pipes.splice(me,1);--Va.pipesCount;1===Va.pipesCount&&(Va.pipes=Va.pipes[0]);na.emit("unpipe",this,yd);return this};l.prototype.on=function(na,Va){Va=J.prototype.on.call(this,na,Va);var yd=this._readableState;"data"===na?(yd.readableListening=0<this.listenerCount("readable"),!1!==yd.flowing&&this.resume()):
"readable"!==na||yd.endEmitted||yd.readableListening||(yd.readableListening=yd.needReadable=!0,yd.flowing=!1,yd.emittedReadable=!1,Qa("on readable",yd.length,yd.reading),yd.length?a(this):yd.reading||I.nextTick(q,this));return Va};l.prototype.addListener=l.prototype.on;l.prototype.removeListener=function(na,Va){Va=J.prototype.removeListener.call(this,na,Va);"readable"===na&&I.nextTick(p,this);return Va};l.prototype.removeAllListeners=function(na){var Va=J.prototype.removeAllListeners.apply(this,arguments);
"readable"!==na&&void 0!==na||I.nextTick(p,this);return Va};l.prototype.resume=function(){var na=this._readableState;na.flowing||(Qa("resume"),na.flowing=!na.readableListening,na.resumeScheduled||(na.resumeScheduled=!0,I.nextTick(r,this,na)));na.paused=!1;return this};l.prototype.pause=function(){Qa("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(Qa("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};l.prototype.wrap=
function(na){var Va=this,yd=this._readableState,me=!1;na.on("end",function(){Qa("wrapped end");if(yd.decoder&&!yd.ended){var za=yd.decoder.end();za&&za.length&&Va.push(za)}Va.push(null)});na.on("data",function(za){Qa("wrapped data");yd.decoder&&(za=yd.decoder.write(za));yd.objectMode&&(null===za||void 0===za)||!(yd.objectMode||za&&za.length)||Va.push(za)||(me=!0,na.pause())});for(var ta in na)void 0===this[ta]&&"function"===typeof na[ta]&&(this[ta]=function(za){return function(){return na[za].apply(na,
arguments)}}(ta));for(ta=0;ta<Fd.length;ta++)na.on(Fd[ta],this.emit.bind(this,Fd[ta]));this._read=function(za){Qa("wrapped _read",za);me&&(me=!1,na.resume())};return this};"function"===typeof Symbol&&(l.prototype[Symbol.asyncIterator]=function(){void 0===Xb&&(Xb=p_());return Xb(this)});Object.defineProperty(l.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(l.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&
this._readableState.buffer}});Object.defineProperty(l.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(na){this._readableState&&(this._readableState.flowing=na)}});l._fromList=x;Object.defineProperty(l.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(l.from=function(na,Va){void 0===qd&&(qd=q_());return qd(l,na,Va)});return RE}function iP(){function e(n,p){var q=this._transformState;
q.transforming=!1;var r=q.writecb;if(null===r)return this.emit("error",new a);q.writechunk=null;q.writecb=null;null!=p&&this.push(p);r(n);n=this._readableState;n.reading=!1;(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function h(n){if(!(this instanceof h))return new h(n);k.call(this,n);this._transformState={afterTransform:e.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=
!1;n&&("function"===typeof n.transform&&(this._transform=n.transform),"function"===typeof n.flush&&(this._flush=n.flush));this.on("prefinish",l)}function l(){var n=this;"function"!==typeof this._flush||this._readableState.destroyed?b(this,null,null):this._flush(function(p,q){b(n,p,q)})}function b(n,p,q){if(p)return n.emit("error",p);null!=q&&n.push(q);if(n._writableState.length)throw new f;if(n._transformState.transforming)throw new d;return n.push(null)}if(jP)return SE;jP=!0;SE=h;var c=Ou().codes,
g=c.ERR_METHOD_NOT_IMPLEMENTED,a=c.ERR_MULTIPLE_CALLBACK,d=c.ERR_TRANSFORM_ALREADY_TRANSFORMING,f=c.ERR_TRANSFORM_WITH_LENGTH_0,k=Pu();Nu()(h,k);h.prototype.push=function(n,p){this._transformState.needTransform=!1;return k.prototype.push.call(this,n,p)};h.prototype._transform=function(n,p,q){q(new g("_transform()"))};h.prototype._write=function(n,p,q){var r=this._transformState;r.writecb=q;r.writechunk=n;r.writeencoding=p;r.transforming||(n=this._readableState,(r.needTransform||n.needReadable||n.length<
n.highWaterMark)&&this._read(n.highWaterMark))};h.prototype._read=function(n){n=this._transformState;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};h.prototype._destroy=function(n,p){k.prototype._destroy.call(this,n,function(q){p(q)})};return SE}function s_(){function e(l){if(!(this instanceof e))return new e(l);h.call(this,l)}if(kP)return TE;kP=!0;TE=e;var h=iP();Nu()(e,h);e.prototype._transform=function(l,
b,c){c(null,l)};return TE}function t_(){function e(k){var n=!1;return function(){n||(n=!0,k.apply(void 0,arguments))}}function h(k){if(k)throw k;}function l(k,n,p,q){q=e(q);var r=!1;k.on("close",function(){r=!0});void 0===g&&(g=PE());g(k,{readable:n,writable:p},function(x){if(x)return q(x);r=!0;q()});var u=!1;return function(x){if(!r&&!u){u=!0;if(k.setHeader&&"function"===typeof k.abort)return k.abort();if("function"===typeof k.destroy)return k.destroy();q(x||new f("pipe"))}}}function b(k){k()}function c(k,
n){return k.pipe(n)}if(lP)return mP;lP=!0;var g,a=Ou().codes,d=a.ERR_MISSING_ARGS,f=a.ERR_STREAM_DESTROYED;return mP=function(){for(var k=arguments.length,n=Array(k),p=0;p<k;p++)n[p]=arguments[p];var q=n.length?"function"!==typeof n[n.length-1]?h:n.pop():h;Array.isArray(n[0])&&(n=n[0]);if(2>n.length)throw new d("streams");var r,u=n.map(function(x,y){var D=y<n.length-1;return l(x,D,0<y,function(H){r||(r=H);H&&u.forEach(b);D||(u.forEach(b),q(r))})});return n.reduce(c)}}function u_(e){return e.toString((this||
Ni).encoding)}function v_(e){(this||Ni).charReceived=e.length%2;(this||Ni).charLength=(this||Ni).charReceived?2:0}function w_(e){(this||Ni).charReceived=e.length%3;(this||Ni).charLength=(this||Ni).charReceived?3:0}function nP(){function e(N,J){N=N||{};J=N.highWaterMark;(this||ri).highWaterMark=J||0===J?J:16384;(this||ri).highWaterMark=~~(this||ri).highWaterMark;(this||ri).buffer=[];(this||ri).length=0;(this||ri).pipes=null;(this||ri).pipesCount=0;(this||ri).flowing=!1;(this||ri).ended=!1;(this||ri).endEmitted=
!1;(this||ri).reading=!1;(this||ri).calledRead=!1;(this||ri).sync=!0;(this||ri).needReadable=!1;(this||ri).emittedReadable=!1;(this||ri).readableListening=!1;(this||ri).objectMode=!!N.objectMode;(this||ri).defaultEncoding=N.defaultEncoding||"utf8";(this||ri).ranOut=!1;(this||ri).awaitDrain=0;(this||ri).readingMore=!1;(this||ri).decoder=null;(this||ri).encoding=null;N.encoding&&(I||(I=UE.StringDecoder),(this||ri).decoder=new I(N.encoding),(this||ri).encoding=N.encoding)}function h(N){if(!((this||ri)instanceof
h))return new h(N);(this||ri)._readableState=new e(N,this||ri);(this||ri).readable=!0;D.call(this||ri)}function l(N,J,sa,ja,Ha){var Qa=sa;var ec=null;x.isBuffer(Qa)||"string"===typeof Qa||null===Qa||void 0===Qa||J.objectMode||(ec=new TypeError("Invalid non-string/buffer chunk"));(Qa=ec)?N.emit("error",Qa):null===sa||void 0===sa?(J.reading=!1,J.ended||(J.decoder&&!J.ended&&(sa=J.decoder.end())&&sa.length&&(J.buffer.push(sa),J.length+=J.objectMode?1:sa.length),J.ended=!0,0<J.length?c(N):p(N))):J.objectMode||
sa&&0<sa.length?J.ended&&!Ha?(sa=Error("stream.push() after EOF"),N.emit("error",sa)):J.endEmitted&&Ha?(sa=Error("stream.unshift() after end event"),N.emit("error",sa)):(!J.decoder||Ha||ja||(sa=J.decoder.write(sa)),J.length+=J.objectMode?1:sa.length,Ha?J.buffer.unshift(sa):(J.reading=!1,J.buffer.push(sa)),J.needReadable&&c(N),g(N,J)):Ha||(J.reading=!1);return!J.ended&&(J.needReadable||J.length<J.highWaterMark||0===J.length)}function b(N,J){if(0===J.length&&J.ended)return 0;if(J.objectMode)return 0===
N?0:1;if(null===N||isNaN(N))return J.flowing&&J.buffer.length?J.buffer[0].length:J.length;if(0>=N)return 0;if(N>J.highWaterMark){var sa=N;if(8388608<=sa)sa=8388608;else{sa--;for(var ja=1;32>ja;ja<<=1)sa|=sa>>ja;sa++}J.highWaterMark=sa}if(N>J.length){if(J.ended)return J.length;J.needReadable=!0;return 0}return N}function c(N){var J=N._readableState;J.needReadable=!1;J.emittedReadable||(J.emittedReadable=!0,J.sync?r.nextTick(function(){N.emit("readable")}):N.emit("readable"))}function g(N,J){J.readingMore||
(J.readingMore=!0,r.nextTick(function(){for(var sa=J.length;!J.reading&&!J.flowing&&!J.ended&&J.length<J.highWaterMark&&(N.read(0),sa!==J.length);)sa=J.length;J.readingMore=!1}))}function a(N){return function(){var J=N._readableState;J.awaitDrain--;0===J.awaitDrain&&d(N)}}function d(N){function J(Ha,Qa,ec){!1===Ha.write(ja)&&sa.awaitDrain++}var sa=N._readableState,ja;for(sa.awaitDrain=0;sa.pipesCount&&null!==(ja=N.read());)if(1===sa.pipesCount?J(sa.pipes):q(sa.pipes,J),N.emit("data",ja),0<sa.awaitDrain)return;
0===sa.pipesCount?(sa.flowing=!1,0<y.listenerCount(N,"data")&&k(N)):sa.ranOut=!0}function f(){(this||ri)._readableState.ranOut&&((this||ri)._readableState.ranOut=!1,d(this||ri))}function k(N,J){if(N._readableState.flowing)throw Error("Cannot switch to old mode now.");var sa=J||!1,ja=!1;N.readable=!0;N.pipe=D.prototype.pipe;N.on=N.addListener=D.prototype.on;N.on("readable",function(){ja=!0;for(var Ha;!sa&&null!==(Ha=N.read());)N.emit("data",Ha);null===Ha&&(ja=!1,N._readableState.needReadable=!0)});
N.pause=function(){sa=!0;this.emit("pause")};N.resume=function(){sa=!1;ja?r.nextTick(function(){N.emit("readable")}):this.read(0);this.emit("resume")};N.emit("readable")}function n(N,J){var sa=J.buffer,ja=J.length,Ha=!!J.decoder;J=!!J.objectMode;if(0===sa.length)return null;if(0===ja)ja=null;else if(J)ja=sa.shift();else if(!N||N>=ja)ja=Ha?sa.join(""):x.concat(sa,ja),sa.length=0;else if(N<sa[0].length)J=sa[0],ja=J.slice(0,N),sa[0]=J.slice(N);else if(N===sa[0].length)ja=sa.shift();else{ja=Ha?"":new x(N);
for(var Qa=0,ec=0,mc=sa.length;ec<mc&&Qa<N;ec++){J=sa[0];var hc=Math.min(N-Qa,J.length);Ha?ja+=J.slice(0,hc):J.copy(ja,Qa,0,hc);hc<J.length?sa[0]=J.slice(hc):sa.shift();Qa+=hc}}return ja}function p(N){var J=N._readableState;if(0<J.length)throw Error("endReadable called on non-empty stream");!J.endEmitted&&J.calledRead&&(J.ended=!0,r.nextTick(function(){J.endEmitted||0!==J.length||(J.endEmitted=!0,N.readable=!1,N.emit("end"))}))}function q(N,J){for(var sa=0,ja=N.length;sa<ja;sa++)J(N[sa],sa)}if(oP)return VE;
oP=!0;var r=Pl;VE=h;var u=x_,x=rl.Buffer;h.ReadableState=e;var y=Dl.EventEmitter;y.listenerCount||(y.listenerCount=function(N,J){return N.listeners(J).length});var D=yn,H=Kl;H.inherits=sl;var I;H.inherits(h,D);h.prototype.push=function(N,J){var sa=(this||ri)._readableState;"string"!==typeof N||sa.objectMode||(J=J||sa.defaultEncoding,J!==sa.encoding&&(N=new x(N,J),J=""));return l(this||ri,sa,N,J,!1)};h.prototype.unshift=function(N){return l(this||ri,(this||ri)._readableState,N,"",!0)};h.prototype.setEncoding=
function(N){I||(I=UE.StringDecoder);(this||ri)._readableState.decoder=new I(N);(this||ri)._readableState.encoding=N};h.prototype.read=function(N){var J=(this||ri)._readableState;J.calledRead=!0;var sa=N;if("number"!==typeof N||0<N)J.emittedReadable=!1;if(0===N&&J.needReadable&&(J.length>=J.highWaterMark||J.ended))return c(this||ri),null;N=b(N,J);if(0===N&&J.ended)return sa=null,0<J.length&&J.decoder&&(sa=n(N,J),J.length-=sa.length),0===J.length&&p(this||ri),sa;var ja=J.needReadable;J.length-N<=J.highWaterMark&&
(ja=!0);if(J.ended||J.reading)ja=!1;ja&&(J.reading=!0,J.sync=!0,0===J.length&&(J.needReadable=!0),this._read(J.highWaterMark),J.sync=!1);ja&&!J.reading&&(N=b(sa,J));sa=0<N?n(N,J):null;null===sa&&(J.needReadable=!0,N=0);J.length-=N;0!==J.length||J.ended||(J.needReadable=!0);J.ended&&!J.endEmitted&&0===J.length&&p(this||ri);return sa};h.prototype._read=function(N){this.emit("error",Error("not implemented"))};h.prototype.pipe=function(N,J){function sa(rc){rc===hc&&Ha()}function ja(){N.end()}function Ha(){N.removeListener("close",
ec);N.removeListener("finish",mc);N.removeListener("drain",xa);N.removeListener("error",Qa);N.removeListener("unpipe",sa);hc.removeListener("end",ja);hc.removeListener("end",Ha);N._writableState&&!N._writableState.needDrain||xa()}function Qa(rc){hc.unpipe(N);N.removeListener("error",Qa);0===y.listenerCount(N,"error")&&N.emit("error",rc)}function ec(){N.removeListener("finish",mc);hc.unpipe(N)}function mc(){N.removeListener("close",ec);hc.unpipe(N)}var hc=this||ri,Ua=(this||ri)._readableState;switch(Ua.pipesCount){case 0:Ua.pipes=
N;break;case 1:Ua.pipes=[Ua.pipes,N];break;default:Ua.pipes.push(N)}Ua.pipesCount+=1;J=J&&!1===J.end||N===r.stdout||N===r.stderr?Ha:ja;if(Ua.endEmitted)r.nextTick(J);else hc.once("end",J);N.on("unpipe",sa);var xa=a(hc);N.on("drain",xa);if(N._events&&N._events.error)u(N._events.error)?N._events.error.unshift(Qa):N._events.error=[Qa,N._events.error];else N.on("error",Qa);N.once("close",ec);N.once("finish",mc);N.emit("pipe",hc);Ua.flowing||(this.on("readable",f),Ua.flowing=!0,r.nextTick(function(){d(hc)}));
return N};h.prototype.unpipe=function(N){var J=(this||ri)._readableState;if(0===J.pipesCount)return this||ri;if(1===J.pipesCount){if(N&&N!==J.pipes)return this||ri;N||(N=J.pipes);J.pipes=null;J.pipesCount=0;this.removeListener("readable",f);J.flowing=!1;N&&N.emit("unpipe",this||ri);return this||ri}if(!N){N=J.pipes;var sa=J.pipesCount;J.pipes=null;J.pipesCount=0;this.removeListener("readable",f);J.flowing=!1;for(var ja=0;ja<sa;ja++)N[ja].emit("unpipe",this||ri);return this||ri}a:{ja=J.pipes;sa=0;for(var Ha=
ja.length;sa<Ha;sa++)if(ja[sa]===N){ja=sa;break a}ja=-1}if(-1===ja)return this||ri;J.pipes.splice(ja,1);--J.pipesCount;1===J.pipesCount&&(J.pipes=J.pipes[0]);N.emit("unpipe",this||ri);return this||ri};h.prototype.on=function(N,J){J=D.prototype.on.call(this||ri,N,J);"data"!==N||(this||ri)._readableState.flowing||k(this||ri);"readable"===N&&(this||ri).readable&&(N=(this||ri)._readableState,N.readableListening||(N.readableListening=!0,N.emittedReadable=!1,N.needReadable=!0,N.reading?N.length&&c(this||
ri):this.read(0)));return J};h.prototype.addListener=h.prototype.on;h.prototype.resume=function(){k(this||ri);this.read(0);this.emit("resume")};h.prototype.pause=function(){k(this||ri,!0);this.emit("pause")};h.prototype.wrap=function(N){var J=(this||ri)._readableState,sa=!1,ja=this||ri;N.on("end",function(){if(J.decoder&&!J.ended){var Qa=J.decoder.end();Qa&&Qa.length&&ja.push(Qa)}ja.push(null)});N.on("data",function(Qa){J.decoder&&(Qa=J.decoder.write(Qa));J.objectMode&&(null===Qa||void 0===Qa)||!(J.objectMode||
Qa&&Qa.length)||ja.push(Qa)||(sa=!0,N.pause())});for(var Ha in N)"function"===typeof N[Ha]&&"undefined"===typeof(this||ri)[Ha]&&((this||ri)[Ha]=function(Qa){return function(){return N[Qa].apply(N,arguments)}}(Ha));q(["error","close","destroy","pause","resume"],function(Qa){N.on(Qa,ja.emit.bind(ja,Qa))});ja._read=function(Qa){sa&&(sa=!1,N.resume())};return ja};h._fromList=n;return VE}function WE(){function e(d){if(!((this||Xo)instanceof e))return new e(d);g.call(this||Xo,d);a.call(this||Xo,d);d&&!1===
d.readable&&((this||Xo).readable=!1);d&&!1===d.writable&&((this||Xo).writable=!1);(this||Xo).allowHalfOpen=!0;d&&!1===d.allowHalfOpen&&((this||Xo).allowHalfOpen=!1);this.once("end",h)}function h(){(this||Xo).allowHalfOpen||(this||Xo)._writableState.ended||l.nextTick((this||Xo).end.bind(this||Xo))}if(pP)return XE;pP=!0;var l=Pl;XE=e;var b=Object.keys||function(d){var f=[],k;for(k in d)f.push(k);return f},c=Kl;c.inherits=sl;var g=nP(),a=qP();c.inherits(e,g);(function(d,f){for(var k=0,n=d.length;k<n;k++)f(d[k],
k)})(b(a.prototype),function(d){e.prototype[d]||(e.prototype[d]=a.prototype[d])});return XE}function qP(){function e(y,D,H){(this||qk).chunk=y;(this||qk).encoding=D;(this||qk).callback=H}function h(y,D){y=y||{};var H=y.highWaterMark;(this||qk).highWaterMark=H||0===H?H:16384;(this||qk).objectMode=!!y.objectMode;(this||qk).highWaterMark=~~(this||qk).highWaterMark;(this||qk).needDrain=!1;(this||qk).ending=!1;(this||qk).ended=!1;(this||qk).finished=!1;(this||qk).decodeStrings=!1!==y.decodeStrings;(this||
qk).defaultEncoding=y.defaultEncoding||"utf8";(this||qk).length=0;(this||qk).writing=!1;(this||qk).sync=!0;(this||qk).bufferProcessing=!1;(this||qk).onwrite=function(I){f(D,I)};(this||qk).writecb=null;(this||qk).writelen=0;(this||qk).buffer=[];(this||qk).errorEmitted=!1}function l(y){var D=WE();if(!((this||qk)instanceof l||(this||qk)instanceof D))return new l(y);(this||qk)._writableState=new h(y,this||qk);(this||qk).writable=!0;x.call(this||qk)}function b(y,D,H){var I=Error("write after end");y.emit("error",
I);q.nextTick(function(){H(I)})}function c(y,D,H,I){var N=!0;if(!r.isBuffer(H)&&"string"!==typeof H&&null!==H&&void 0!==H&&!D.objectMode){var J=new TypeError("Invalid non-string/buffer chunk");y.emit("error",J);q.nextTick(function(){I(J)});N=!1}return N}function g(y,D,H,I,N){D.objectMode||!1===D.decodeStrings||"string"!==typeof H||(H=new r(H,I));r.isBuffer(H)&&(I="buffer");var J=D.objectMode?1:H.length;D.length+=J;var sa=D.length<D.highWaterMark;sa||(D.needDrain=!0);D.writing?D.buffer.push(new e(H,
I,N)):(D.writelen=J,D.writecb=N,D.writing=!0,D.sync=!0,y._write(H,I,D.onwrite),D.sync=!1);return sa}function a(y,D,H,I,N){H?q.nextTick(function(){N(I)}):N(I);y._writableState.errorEmitted=!0;y.emit("error",I)}function d(y){y.writing=!1;y.writecb=null;y.length-=y.writelen;y.writelen=0}function f(y,D){var H=y._writableState,I=H.sync,N=H.writecb;d(H);if(D)a(y,H,I,D,N);else{var J=H.ending&&0===H.length&&!H.finished&&!H.writing;J||H.bufferProcessing||!H.buffer.length||n(y,H);I?q.nextTick(function(){k(y,
H,J,N)}):k(y,H,J,N)}}function k(y,D,H,I){!H&&0===D.length&&D.needDrain&&(D.needDrain=!1,y.emit("drain"));I();H&&p(y,D)}function n(y,D){D.bufferProcessing=!0;for(var H=0;H<D.buffer.length;H++){var I=D.buffer[H],N=I.chunk,J=y,sa=D,ja=N,Ha=I.encoding;I=I.callback;sa.writelen=D.objectMode?1:N.length;sa.writecb=I;sa.writing=!0;sa.sync=!0;J._write(ja,Ha,sa.onwrite);sa.sync=!1;if(D.writing){H++;break}}D.bufferProcessing=!1;H<D.buffer.length?D.buffer=D.buffer.slice(H):D.buffer.length=0}function p(y,D){var H=
D.ending&&0===D.length&&!D.finished&&!D.writing;H&&(D.finished=!0,y.emit("finish"));return H}if(rP)return YE;rP=!0;var q=Pl;YE=l;var r=rl.Buffer;l.WritableState=h;var u=Kl;u.inherits=sl;var x=yn;u.inherits(l,x);l.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};l.prototype.write=function(y,D,H){var I=(this||qk)._writableState,N=!1;"function"===typeof D&&(H=D,D=null);r.isBuffer(y)?D="buffer":D||(D=I.defaultEncoding);"function"!==typeof H&&(H=function(){});I.ended?b(this||
qk,I,H):c(this||qk,I,y,H)&&(N=g(this||qk,I,y,D,H));return N};l.prototype._write=function(y,D,H){H(Error("not implemented"))};l.prototype.end=function(y,D,H){var I=(this||qk)._writableState;"function"===typeof y?(H=y,D=y=null):"function"===typeof D&&(H=D,D=null);"undefined"!==typeof y&&null!==y&&this.write(y,D);if(!I.ending&&!I.finished){y=this||qk;I.ending=!0;p(y,I);if(H)if(I.finished)q.nextTick(H);else y.once("finish",H);I.ended=!0}};return YE}function sP(){function e(g,a){(this||qm).afterTransform=
function(d,f){var k=a._transformState;k.transforming=!1;var n=k.writecb;n?(k.writechunk=null,k.writecb=null,null!==f&&void 0!==f&&a.push(f),n&&n(d),d=a._readableState,d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&a._read(d.highWaterMark),d=void 0):d=a.emit("error",Error("no writecb in Transform class"));return d};(this||qm).needTransform=!1;(this||qm).transforming=!1;(this||qm).writecb=null;(this||qm).writechunk=null}function h(g){if(!((this||qm)instanceof h))return new h(g);b.call(this||
qm,g);(this||qm)._transformState=new e(g,this||qm);var a=this||qm;(this||qm)._readableState.needReadable=!0;(this||qm)._readableState.sync=!1;this.once("finish",function(){"function"===typeof(this||qm)._flush?this._flush(function(d){l(a,d)}):l(a)})}function l(g,a){if(a)return g.emit("error",a);a=g._writableState;g._readableState;var d=g._transformState;if(a.length)throw Error("calling transform done when ws.length != 0");if(d.transforming)throw Error("calling transform done when still transforming");
return g.push(null)}if(tP)return ZE;tP=!0;ZE=h;var b=WE(),c=Kl;c.inherits=sl;c.inherits(h,b);h.prototype.push=function(g,a){(this||qm)._transformState.needTransform=!1;return b.prototype.push.call(this||qm,g,a)};h.prototype._transform=function(g,a,d){throw Error("not implemented");};h.prototype._write=function(g,a,d){var f=(this||qm)._transformState;f.writecb=d;f.writechunk=g;f.writeencoding=a;f.transforming||(g=(this||qm)._readableState,(f.needTransform||g.needReadable||g.length<g.highWaterMark)&&
this._read(g.highWaterMark))};h.prototype._read=function(g){g=(this||qm)._transformState;null!==g.writechunk&&g.writecb&&!g.transforming?(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform)):g.needTransform=!0};return ZE}function y_(){function e(b){if(!((this||uP)instanceof e))return new e(b);h.call(this||uP,b)}if(vP)return $E;vP=!0;$E=e;var h=sP(),l=Kl;l.inherits=sl;l.inherits(e,h);e.prototype._transform=function(b,c,g){g(null,b)};return $E}function Yw(e){return e&&"object"===
typeof e&&"default"in e?e["default"]:e}function z_(e){var h={},l;for(l in e)h[l]=e[l];return h}function A_(e,h,l){e.open(function(){});return{apply:function(b,c,g){c=c||{};for(var a=[],d=-1,f=b.length;++d<f;){var k=b[d],n=k,p=k.prefix;p&&p.options&&(n.keyEncoding=n.keyEncoding||p.options.keyEncoding,n.valueEncoding=n.valueEncoding||p.options.valueEncoding);n=k;p=k.prefix;p="function"===typeof p.prefix?p.prefix():p;n.prefix=p;a.push({key:h.encode([k.prefix,l.encodeKey(k.key,c,k)]),value:"del"!==k.type&&
l.encodeValue(k.value,c,k),type:k.type})}e.db.batch(a,c,g)},get:function(b,c,g,a){g.asBuffer=l.valueAsBuffer(g);return e.db.get(h.encode([c,l.encodeKey(b,g,void 0)]),g,function(d,f){d?a(d):a(null,l.decodeValue(f,g))})},createDecoder:function(b){return function(c,g){return{key:l.decodeKey(h.decode(c)[1],b),value:l.decodeValue(g,b)}}},isClosed:function(){return e.isClosed()},close:function(b){return e.close(b)},iterator:function(b){var c=z_(b||{}),g=b.prefix||[];B_.toLtgt(b,c,function(a){return h.encode([g,
l.encodeKey(a,c,{})])},h.lowerBound,h.upperBound);c.prefix=null;c.keyAsBuffer=c.valueAsBuffer=!1;"number"!==typeof c.limit&&(c.limit=-1);c.keyAsBuffer=h.buffer;c.valueAsBuffer=l.valueAsBuffer(c);return function(a){return{next:function(d){return a.next(d)},end:function(d){a.end(d)}}}(e.db.iterator(c))}}}function aF(){Error.call(this)}function ur(e,h){if(!(this instanceof ur))return new ur(e,h);wP.call(this,{objectMode:!0,highWaterMark:e.highWaterMark});this._waiting=!1;this._options=e;this._makeData=
h}function Qu(e){xP.call(this||Kq,e);(this||Kq)._destroyed=!1}function C_(e,h,l){l(null,e)}function bF(e){return function(h,l,b){"function"==typeof h&&(b=l,l=h,h={});"function"!=typeof l&&(l=C_);"function"!=typeof b&&(b=null);return e(h,l,b)}}function Ek(e){this._capacity=yP(e);this._front=this._length=0;if(zP(e)){for(var h=e.length,l=0;l<h;++l)this[l]=e[l];this._length=h}}function yP(e){if("number"!==typeof e)if(zP(e))e=e.length;else return 16;e=Math.min(Math.max(16,e),1073741824);e=(e>>>0)-1;e|=
e>>1;e|=e>>2;e|=e>>4;e|=e>>8;return(e|e>>16)+1}function cF(e){e=e.rev_tree.slice();for(var h;h=e.pop();){var l=h.ids,b=l[2];h=h.pos;if(b.length){l=0;for(var c=b.length;l<c;l++)e.push({pos:h+1,ids:b[l]})}else if(b=!!l[1].deleted,l=l[0],!g||(d!==b?d:a!==h?a<h:g<l)){var g=l;var a=h;var d=b}}return a+"-"+g}function dA(e,h){e=e.slice();for(var l;l=e.pop();){var b=l.pos,c=l.ids,g=c[2];l=h(0===g.length,b,c[0],l.ctx,c[1]);c=0;for(var a=g.length;c<a;c++)e.push({pos:b+1,ids:g[c],ctx:l})}}function D_(e,h){return e.pos-
h.pos}function AP(e){var h=[];dA(e,function(b,c,g,a,d){b&&h.push({rev:c+"-"+g,pos:c,opts:d})});h.sort(D_).reverse();e=0;for(var l=h.length;e<l;e++)delete h[e].pos;return h}function BP(e){var h=[];e=e.slice();for(var l;l=e.pop();){var b=l.pos,c=l.ids,g=c[0],a=c[1];c=c[2];var d=0===c.length;l=l.history?l.history.slice():[];l.push({id:g,opts:a});d&&h.push({pos:b+1-l.length,ids:l});g=0;for(a=c.length;g<a;g++)e.push({pos:b+1,ids:c[g],history:l})}return h.reverse()}function E_(e,h){return e.pos-h.pos}function CP(e,
h){for(var l,b,c=e.length;h<c;h++){var g=e[h];g=[g.id,g.opts,[]];b?(b[2].push(g),b=g):l=b=g}return l}function F_(e,h){return e[0]<h[0]?-1:1}function DP(e,h){h=[{tree1:e,tree2:h}];for(var l=!1;0<h.length;){var b=h.pop(),c=b.tree1;b=b.tree2;if(c[1].status||b[1].status)c[1].status="available"===c[1].status||"available"===b[1].status?"available":"missing";for(var g=0;g<b[2].length;g++)if(c[2][0]){for(var a=!1,d=0;d<c[2].length;d++)c[2][d][0]===b[2][g][0]&&(h.push({tree1:c[2][d],tree2:b[2][g]}),a=!0);
if(!a){l="new_branch";a=c[2];d=b[2][g];for(var f,k=a,n=d,p=F_,q=0,r=k.length;q<r;)f=q+r>>>1,0>p(k[f],n)?q=f+1:r=f;a.splice(q,0,d)}}else l="new_leaf",c[2][0]=b[2][g]}return{conflicts:l,tree:e}}function EP(e,h,l){var b=[],c=!1,g=!1;if(!e.length)return{tree:[h],conflicts:"new_leaf"};for(var a=0,d=e.length;a<d;a++){var f=e[a];if(f.pos===h.pos&&f.ids[0]===h.ids[0])g=DP(f.ids,h.ids),b.push({pos:f.pos,ids:g.tree}),c=c||g.conflicts,g=!0;else if(!0!==l){var k=f.pos<h.pos?f:h,n=f.pos<h.pos?h:f,p=[],q=[];for(q.push({ids:k.ids,
diff:n.pos-k.pos,parent:null,parentIdx:null});0<q.length;){var r=q.pop();if(0===r.diff)r.ids[0]===n.ids[0]&&p.push(r);else for(var u=r.ids[2],x=0,y=u.length;x<y;x++)q.push({ids:u[x],diff:r.diff-1,parent:r.ids,parentIdx:x})}(p=p[0])?(g=DP(p.ids,n.ids),p.parent[2][p.parentIdx]=g.tree,b.push({pos:k.pos,ids:k.ids}),c=c||g.conflicts,g=!0):b.push(f)}else b.push(f)}g||b.push(h);b.sort(E_);return{tree:b,conflicts:c||"internal_node"}}function G_(e,h){e=BP(e);for(var l,b,c=0,g=e.length;c<g;c++){var a=e[c],
d=a.ids;if(d.length>h){l||(l={});var f=d.length-h;var k={pos:a.pos+f,ids:CP(d,f)};for(var n=0;n<f;n++)l[a.pos+n+"-"+d[n].id]=!0}else k={pos:a.pos,ids:CP(d,0)};b=b?EP(b,k,!0).tree:[k]}l&&dA(b,function(p,q,r){delete l[q+"-"+r]});return{tree:b,revs:l?Object.keys(l):[]}}function H_(e){return e.ids}function FP(e){return e.reduce(function(h,l){h[l]=!0;return h},{})}function GP(e){if(!/^\d+-/.test(e))return On.createError(On.INVALID_REV);var h=e.indexOf("-"),l=e.substring(0,h);e=e.substring(h+1);return{prefix:parseInt(l,
10),id:e}}function HP(e,h,l){l||(l={deterministic_revs:!0});var b={status:"available"};e._deleted&&(b.deleted=!0);if(h){e._id||(e._id=Qs.uuid());var c=Qs.rev(e,l.deterministic_revs);if(e._rev){h=GP(e._rev);if(h.error)return h;e._rev_tree=[{pos:h.prefix,ids:[h.id,{status:"missing"},[[c,b,[]]]]}];var g=h.prefix+1}else e._rev_tree=[{pos:1,ids:[c,b,[]]}],g=1}else{if(e._revisions){c=e._revisions;g=c.start-c.ids.length+1;c=c.ids;h=[c[0],b,[]];l=1;for(var a=c.length;l<a;l++)h=[c[l],{status:"missing"},[h]];
e._rev_tree=[{pos:g,ids:h}];g=e._revisions.start;c=e._revisions.ids[0]}if(!e._rev_tree){h=GP(e._rev);if(h.error)return h;g=h.prefix;c=h.id;e._rev_tree=[{pos:g,ids:[c,b,[]]}]}}Qs.invalidIdError(e._id);e._rev=g+"-"+c;b={metadata:{},data:{}};for(var d in e)if(Object.prototype.hasOwnProperty.call(e,d)){if((g="_"===d[0])&&!I_[d])throw e=On.createError(On.DOC_VALIDATION,d),e.message=On.DOC_VALIDATION.message+": "+d,e;g&&!J_[d]?b.metadata[d.slice(1)]=e[d]:b.data[d]=e[d]}return b}function K_(e,h,l){try{var b=
Zw.atob(e.data)}catch(c){b={error:On.createError(On.BAD_ARG,"Attachment is not a valid base64 string")}}if(b.error)return l(b.error);e.length=b.length;e.data="blob"===h?Zw.binaryStringToBlobOrBuffer(b,e.content_type):"base64"===h?Zw.btoa(b):b;IP.binaryMd5(b,function(c){e.digest="md5-"+c;l()})}function L_(e,h,l){IP.binaryMd5(e.data,function(b){e.digest="md5-"+b;e.length=e.data.size||e.data.length||0;"binary"===h?Zw.blobOrBufferToBinaryString(e.data,function(c){e.data=c;l()}):"base64"===h?Zw.blobOrBufferToBase64(e.data,
function(c){e.data=c;l()}):l()})}function M_(e,h,l){if(e.stub)return l();"string"===typeof e.data?K_(e,h,l):L_(e,h,l)}function JP(e,h,l,b,c,g,a,d){if(zn.revExists(h.rev_tree,l.metadata.rev)&&!d)return b[c]=l,g();var f=h.winningRev||zn.winningRev(h),k="deleted"in h?h.deleted:zn.isDeleted(h,f),n="deleted"in l.metadata?l.metadata.deleted:zn.isDeleted(l.metadata),p=/^1-/.test(l.metadata.rev);k&&!n&&d&&p&&(p=l.data,p._rev=f,p._id=l.metadata.id,l=HP(p,d));e=zn.merge(h.rev_tree,l.metadata.rev_tree[0],e);
if(d&&(k&&n&&"new_leaf"!==e.conflicts||!k&&"new_leaf"!==e.conflicts||k&&!n&&"new_branch"===e.conflicts))return l=On.createError(On.REV_CONFLICT),b[c]=l,g();b=l.metadata.rev;l.metadata.rev_tree=e.tree;l.stemmedRevs=e.stemmedRevs||[];h.rev_map&&(l.metadata.rev_map=h.rev_map);h=zn.winningRev(l.metadata);d=zn.isDeleted(l.metadata,h);k=k===d?0:k<d?-1:1;b=b===h?d:zn.isDeleted(l.metadata,b);a(l,h,d,b,!0,k,c,g)}function $w(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}function KP(e,h){e=
new Uint8Array(e);return ax.blob([e],{type:h})}function N_(e,h){ax.readAsBinaryString(e,h)}function LP(e,h){h=h.prefix()[0];e=e._cache;var l=e.get(h);l||(l=new Yo.Map,e.set(h,l));return l}function Rs(){this._batch=[];this._cache=new Yo.Map}function dF(e){return"winningRev"in e?e.winningRev:bx.winningRev(e)}function O_(e,h,l){var b=e.content_type;return new Promise(function(c,g){h.binaryStore.get(e.digest,function(a,d){if(a){if("NotFoundError"!==a.name)return g(a);a=l.binary?ax.binaryStringToBlobOrBuffer("",
b):""}else a=l.binary?KP(d,b):d.toString("base64");delete e.stub;delete e.length;e.data=a;c()})})}function eF(e,h,l){var b=[];e.forEach(function(c){c.doc&&c.doc._attachments&&Object.keys(c.doc._attachments).forEach(function(g){g=c.doc._attachments[g];"data"in g||b.push(g)})});return Promise.all(b.map(function(c){return O_(c,h,l)}))}function fF(e){(this||Ss).db=e;(this||Ss)._ended=!1;(this||Ss)._nexting=!1}function Ru(e){(this||ll)._db=e;(this||ll)._operations=[];(this||ll)._written=!1}function Pn(e){if(!arguments.length||
void 0===e)throw Error("constructor requires at least a location argument");if("string"!=typeof e)throw Error("constructor requires a location string argument");(this||bl).location=e;(this||bl).status="new"}function Rp(e,h){return Object.hasOwnProperty.call(e,h)&&h}function P_(e){return e}function Qn(e,h,l,b,c,g){this._color=e;this.key=h;this.value=l;this.left=b;this.right=c;this._count=g}function Sp(e){return new Qn(e._color,e.key,e.value,e.left,e.right,e._count)}function vr(e,h){return new Qn(e,
h.key,h.value,h.left,h.right,h._count)}function tl(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function Su(e,h){this._compare=e;this.root=h}function gF(e,h){if(h.left){var l=gF(e,h.left);if(l)return l}if(l=e(h.key,h.value))return l;if(h.right)return gF(e,h.right)}function hF(e,h,l,b){if(0>=h(e,b.key)){if(b.left){var c=hF(e,h,l,b.left);if(c)return c}if(c=l(b.key,b.value))return c}if(b.right)return hF(e,h,l,b.right)}function iF(e,h,l,b,c){var g=l(e,c.key),a=l(h,c.key);if(0>=g&&
(c.left&&(g=iF(e,h,l,b,c.left))||0<a&&(g=b(c.key,c.value))))return g;if(0<a&&c.right)return iF(e,h,l,b,c.right)}function Rn(e,h){this.tree=e;this._stack=h}function MP(e,h){e.key=h.key;e.value=h.value;e.left=h.left;e.right=h.right;e._color=h._color;e._count=h._count}function Q_(e,h){return e<h?-1:e>h?1:0}function R_(){Tu&&Ts&&(Tu=!1,Ts.length?wr=Ts.concat(wr):cx=-1,wr.length&&NP())}function NP(){if(!Tu){jF=!1;Tu=!0;for(var e=wr.length,h=setTimeout(R_);e;){Ts=wr;for(wr=[];Ts&&++cx<e;)Ts[cx].run();cx=
-1;e=wr.length}Ts=null;cx=-1;Tu=!1;clearTimeout(h)}}function OP(e,h){this.fun=e;this.array=h}function S_(e){return 0<Sn.compare(e,(this||Uh)._end)}function T_(e){return 0<=Sn.compare(e,(this||Uh)._end)}function U_(e){return 0>Sn.compare(e,(this||Uh)._end)}function V_(e){return 0>=Sn.compare(e,(this||Uh)._end)}function eA(e,h){PP.call(this||Uh,e);(this||Uh)._limit=h.limit;-1===(this||Uh)._limit&&((this||Uh)._limit=Infinity);e=e._store[e._location];(this||Uh).keyAsBuffer=!1!==h.keyAsBuffer;(this||Uh).valueAsBuffer=
!1!==h.valueAsBuffer;(this||Uh)._reverse=h.reverse;(this||Uh)._options=h;(this||Uh)._done=0;(this||Uh)._reverse?((this||Uh)._incr="prev",(this||Uh)._start=Sn.upperBound(h),(this||Uh)._end=Sn.lowerBound(h),"undefined"===typeof(this||Uh)._start?(this||Uh)._tree=e.end:Sn.upperBoundInclusive(h)?(this||Uh)._tree=e.le((this||Uh)._start):(this||Uh)._tree=e.lt((this||Uh)._start),(this||Uh)._end&&(Sn.lowerBoundInclusive(h)?(this||Uh)._test=T_:(this||Uh)._test=S_)):((this||Uh)._incr="next",(this||Uh)._start=
Sn.lowerBound(h),(this||Uh)._end=Sn.upperBound(h),"undefined"===typeof(this||Uh)._start?(this||Uh)._tree=e.begin:Sn.lowerBoundInclusive(h)?(this||Uh)._tree=e.ge((this||Uh)._start):(this||Uh)._tree=e.gt((this||Uh)._start),(this||Uh)._end&&(Sn.upperBoundInclusive(h)?(this||Uh)._test=V_:(this||Uh)._test=U_))}function Tn(e){if(!((this||Uh)instanceof Tn))return new Tn(e);QP.call(this||Uh,"string"==typeof e?e:"");(this||Uh)._location=(this||Uh).location?"$"+(this||Uh).location:"_tree";(this||Uh)._store=
(this||Uh).location?Uu:this||Uh;(this||Uh)._store[(this||Uh)._location]=(this||Uh)._store[(this||Uh)._location]||W_(Sn.compare)}function RP(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}function kF(e,h){e=X_.assign({db:Y_},e);Z_.call(this,e,h)}function SP(e){e&&(e.__serialize__=function(){var h=e.name,l=e._id;return{__expr__:'({type: "'.concat(e.type,'", name: "').concat(h,'", _id: "').concat(l,'"})')}});return e}function dx(e){return lF.apply(this,arguments)}function lF(){lF=Cb(regeneratorRuntime.mark(function l(h){var b,
c,g;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(h&&!hj.obj.isEmpty(h)){a.next=2;break}return a.abrupt("return",!1);case 2:if(!h||!h._rev){a.next=4;break}return a.abrupt("return",h);case 4:return b=h.type,c=h.name,g=h._id,a.prev=5,a.t0=Object,a.t1=h,a.next=10,hj.MorphicDB["default"].fetchCommit(b,c,g);case 10:a.t2=a.sent,a.t0.assign.call(a.t0,a.t1,a.t2);case 12:return a.prev=12,a.abrupt("return",h);case 15:case "end":return a.stop()}},l,null,[[5,,12,15]])}));return lF.apply(this,
arguments)}function mF(e){return[]}function fA(e){return nF.apply(this,arguments)}function nF(){nF=Cb(regeneratorRuntime.mark(function l(h){var b,c,g,a,d,f=arguments;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return b=1<f.length&&void 0!==f[1]?f[1]:{},c=b.morphicDB||kh.MorphicDB["default"],k.next=4,c.load("part","string"===typeof h?h:h.name,b,"string"===typeof h?void 0:h);case 4:g=k.sent;if(!g.isWindow||!g.targetMorph){k.next=11;break}a=g.targetMorph;k.next=9;return kh.ensureCommitInfo(g.metadata&&
g.metadata.commit);case 9:(d=k.sent)&&a.changeMetaData("commit",d,!0,!1);case 11:return k.abrupt("return",g);case 12:case "end":return k.stop()}},l)}));return nF.apply(this,arguments)}function oF(e,h,l,b,c,g){return pF.apply(this,arguments)}function pF(){pF=Cb(regeneratorRuntime.mark(function d(h,l,b,c,g,a){var f,k,n,p,q,r,u,x;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:y.prev=0;if(!h.isMorph){y.next=14;break}f=[];h.withAllSubmorphsDo(function(D){"function"===typeof D.beforePublish&&
f.push(D)});k=0;n=f;case 5:if(!(k<n.length)){y.next=12;break}p=n[k];y.next=9;return p.beforePublish();case 9:k++;y.next=5;break;case 12:y.next=17;break;case 14:if("function"!==typeof h.beforePublish){y.next=17;break}y.next=17;return h.beforePublish(l,h);case 17:y.next=23;break;case 19:y.prev=19,y.t0=y["catch"](0),q="Error in beforePublish of ".concat(h,"\n").concat(y.t0.stack),"function"===typeof h.world&&h.world()?h.world().logError(Error(q)):console.error(q);case 23:return r=Object.assign({previewWidth:100,
previewHeight:100,previewType:"png"},b),u=b.morphicDB||kh.MorphicDB["default"],y.next=27,u.snapshotAndCommit("part",l,h,r,c,g,a);case 27:return x=y.sent,kh.emit("lively.partsbin/partpublished",x),y.abrupt("return",x);case 30:case "end":return y.stop()}},d,null,[[0,19]])}));return pF.apply(this,arguments)}function Vu(e){return qF.apply(this,arguments)}function qF(){qF=Cb(regeneratorRuntime.mark(function l(h){var b,c,g,a,d,f,k,n,p,q,r,u,x,y,D,H,I,N,J,sa,ja,Ha,Qa,ec,mc,hc,Ua,xa,rc,Lb,Ac,Xb,qd,La,Fd,
na,Va,yd,me,ta,za,W,ea,Kb,V,Oa,U,fd,Td,nf=arguments;return regeneratorRuntime.wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return b=1<nf.length&&void 0!==nf[1]?nf[1]:{},c=b.showPublishDialog,g=void 0===c?!0:c,a=b.notifications,d=void 0===a?!0:a,f=b.loadingIndicator,k=void 0===f?!0:f,n=b.preferWindow,p=void 0===n?!0:n,u=h,x=h.world()||h.env.world,y=h.name,D=[],H="",Je.next=9,kh.ensureCommitInfo(kh.Path("metadata.commit").get(h)||kh.Path("metadata.commit").get(u));case 9:I=Je.sent;N=b.morphicDB||
kh.MorphicDB["default"];I||(I={type:"part",name:h.name,author:x.getCurrentUser(),tags:[],description:"no description"});if(!g){Je.next=29;break}Je.t0=x;Je.next=16;return kh.loadPart("publish part dialog");case 16:return Je.t1=Je.sent,Je.t2={part:h},Je.next=20,Je.t0.openPrompt.call(Je.t0,Je.t1,Je.t2);case 20:J=Je.sent;sa=J.db;if(ja=J.commit){Je.next=25;break}return Je.abrupt("return",null);case 25:sa&&(b.morphicDB=N=sa);kh.__inter0__=ja;y=kh.__inter0__.name;D=kh.__inter0__.tags;H=kh.__inter0__.description;
Je.next=30;break;case 29:I&&(kh.__inter1__=I,y=kh.__inter1__.name,D=kh.__inter1__.tags,H=kh.__inter1__.description);case 30:if(!k){Je.next=34;break}Ha=$world.execCommand("open loading indicator","saving ".concat(y,"..."));Je.next=34;return kh.promise.delay(80);case 34:Je.prev=34;Qa="HEAD";ec=I?I.name:h.name;if(ec===y){Je.next=53;break}Je.next=40;return N.exists("part",y);case 40:hc=Je.sent;Ua=hc.exists;xa=hc.commitId;if(!Ua){Je.next=50;break}Je.next=46;return x.confirm('A part "'.concat(y,'" already exists, overwrite?'));
case 46:if(rc=Je.sent){Je.next=49;break}return Je.abrupt("return",null);case 49:mc=xa;case 50:u.name=y;Je.next=54;break;case 53:mc=I?I._id:void 0;case 54:return p&&!h.isWindow&&(Lb=h.getWindow())&&Lb.targetMorph===h&&(h=Lb,r=Lb.metadata,q=!0),Ac={author:h.world().getCurrentUser(),message:"published",tags:D,description:H},Je.next=58,kh.savePart(h,y,b,Ac,Qa,mc);case 58:Xb=Je.sent;if(!q){Je.next=71;break}if(!u.metadata){Je.next=66;break}Je.next=63;return kh.ensureCommitInfo(win.metadata.commit);case 63:u.metadata.commit=
Je.sent;Je.next=70;break;case 66:return Je.next=68,kh.ensureCommitInfo(win.metadata.commit);case 68:Je.t3=Je.sent,u.metadata={commit:Je.t3};case 70:win.metadata=r;case 71:return d&&h.setStatusMessage("saved part ".concat(y)),Je.abrupt("return",Xb);case 75:Je.prev=75;Je.t4=Je["catch"](34);qd=Je.t4.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[];La=Wb(qd,4);Fd=La[2];na=La[3];if(!Fd||!na){Je.next=94;break}Je.next=81;return N.log(na,
1,!0);case 81:return Va=Je.sent,yd=Wb(Va,1),me=yd[0],ta=me.author.name,za=me.timestamp,W='The current version of part "'.concat(y,'" is not the most recent!\n')+"A newer version by ".concat(ta," was saved on ")+"".concat(kh.date.format(new Date(za),"yyyy-mm-dd HH:MM"),". Overwrite?"),Je.next=88,x.confirm(["Version Mismatch\n",{},W,{fontWeight:"normal",fontSize:16}]);case 88:if(ea=Je.sent){Je.next=91;break}return Je.abrupt("return",null);case 91:return Kb=kh.obj.dissoc(me,["preview"]),u.changeMetaData("commit",
Kb,!0,!1),Je.abrupt("return",Vu(u,Object.assign({},b,{morphicDB:N,showPublishDialog:!1})));case 94:V=Je.t4.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but no version entry exists/)||[];Oa=Wb(V,3);U=Oa[2];if(!U){Je.next=104;break}fd="Part ".concat(y," no longer exist in the object database.\n")+"Do you still want to publish it?";Je.next=99;return x.confirm(fd);case 99:if(Td=Je.sent){Je.next=102;break}return Je.abrupt("return",null);case 102:return u.changeMetaData("commit",
null,!0,!1),Je.abrupt("return",Vu(u,Object.assign({},b,{morphicDB:N,showPublishDialog:!1})));case 104:throw console.error(Je.t4),d&&x.logError("Error saving part: "+Je.t4),Je.t4;case 107:return Je.prev=107,Ha&&Ha.remove(),Je.finish(107);case 110:case "end":return Je.stop()}},l,null,[[34,75,107,110]])}));return qF.apply(this,arguments)}function rF(){return sF.apply(this,arguments)}function sF(){sF=Cb(regeneratorRuntime.mark(function h(){var l,b,c,g,a,d,f,k=arguments;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=
n.next){case 0:return l=0<k.length&&void 0!==k[0]?k[0]:{},b=l.morphicDB||kh.MorphicDB["default"],n.next=4,b.latestCommits("part");case 4:return c=n.sent,g=c.map(function(p){return{isListItem:!0,string:p.name,value:p}}),n.next=8,$world.filterableListPrompt("Select part to load",g,{fuzzy:!0});case 8:return a=n.sent,d=Wb(a.selected,1),f=d[0],n.abrupt("return",f?kh.loadPart(f):null);case 12:case "end":return n.stop()}},h)}));return sF.apply(this,arguments)}function tF(e){return uF.apply(this,arguments)}
function uF(){uF=Cb(regeneratorRuntime.mark(function l(h){var b;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,$world.prompt("Enter part name to publish object under",{input:h.name||"part-name",historyId:"lively.partsbin-partname-publish-to-folder-input-hist"});case 2:if(b=c.sent){c.next=5;break}throw"canceled";case 5:return c.abrupt("return",kh.saveObjectToPartsbinFolder(h,b,{previewWidth:h.width,previewHeight:h.height}));case 6:case "end":return c.stop()}},
l)}));return uF.apply(this,arguments)}function vF(e,h){return wF.apply(this,arguments)}function wF(){wF=Cb(regeneratorRuntime.mark(function b(h,l){var c,g,a,d,f,k,n,p,q,r=arguments;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:c=2<r.length&&void 0!==r[2]?r[2]:{};c=Object.assign({preferWindow:!0},c);c.preferWindow&&(h=(g=h.getWindow())&&g.targetMorph===h?g:h);u.prev=3;if(!h.isMorph){u.next=17;break}a=[];h.withAllSubmorphsDo(function(x){"function"===typeof x.beforePublish&&
a.push(x)});d=0;f=a;case 8:if(!(d<f.length)){u.next=15;break}k=f[d];u.next=12;return k.beforePublish();case 12:d++;u.next=8;break;case 15:u.next=20;break;case 17:if("function"!==typeof h.beforePublish){u.next=20;break}u.next=20;return h.beforePublish(l,h);case 20:u.next=26;break;case 22:u.prev=22,u.t0=u["catch"](3),n="Error in beforePublish of ".concat(h,"\n").concat(u.t0.stack),"function"===typeof h.world&&h.world()?h.world().logError(Error(n)):console.error(n);case 26:return u.next=28,kh.resource(c.partsbinFolder).ensureExistance();
case 28:return p=kh.resource(c.partsbinFolder).join(l+".json"),u.next=31,kh.createMorphSnapshot(h,c);case 31:return q=u.sent,u.next=34,p.write(JSON.stringify(q,null,2));case 34:return u.abrupt("return",{partName:l,url:p.url});case 35:case "end":return u.stop()}},b,null,[[3,22]])}));return wF.apply(this,arguments)}function gA(e){return xF.apply(this,arguments)}function xF(){xF=Cb(regeneratorRuntime.mark(function l(h){var b,c=arguments;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=
g.next){case 0:return b=1<c.length&&void 0!==c[1]?c[1]:{},g.abrupt("return",kh.loadPart(h,b));case 2:case "end":return g.stop()}},l)}));return xF.apply(this,arguments)}function yF(e){return new kh.CommitEditor(e)}function Us(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(mi.evaluateAsSpec)return e.extend(h);if(e.isComponentDescriptor)return e.getInstance(h);if(e.isPolicy)return e.instantiate(h)}function ex(e,h){var l;if(h)var b=h;else b=e,e=null;if(mi.evaluateAsSpec)return e?
new mi.PolicyApplicator(b,e):b;console.log("[COMPONENT] Defining: "+b.name);if(e){var c=mi.part(e,h);c.defaultViewModel=e.defaultViewModel;c.viewModelClass=e.viewModelClass}else c=mi.morph(Object.assign({},b));h&&(l=h.type)&&(mi.obj.isString(l)&&(l=mi.getClassForName(l)),mi.obj.adoptObject(c,l));if(b.defaultViewModel||b.viewModelClass)c.defaultViewModel=b.defaultViewModel,c.viewModelClass=b.viewModelClass;c.withAllSubmorphsDo(function(g){if(g.viewModel)g.viewModel.onDeactivate();g.master&&g.master.applyIfNeeded(!g.master._appliedMaster)});
c.updateDerivedMorphs();c._snap=mi.serializeMorph(c);delete c._snap.snapshot[c.id].props.isComponent;delete c._snap.snapshot[c.id].props.master;c.isComponent=!0;return c}function fx(e){return{COMMAND:"remove",target:e}}function gx(e){return{COMMAND:"add",props:e,before:1<arguments.length&&void 0!==arguments[1]?arguments[1]:null}}function hA(e){return mi.morph(e.stylePolicy.asBuildSpecSimple())}function hx(e){if("undefined"!==typeof $world)for(var h in e)$world.env.fontMetric.isFontSupported(mi.sanitizeFont(h))||
mi.insertFontCSS(h,e[h])}function zF(){zF=Cb(regeneratorRuntime.mark(function l(h){var b,c,g,a,d;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return b=h.getCurrentUser(),c={world:h.name},b&&(c.userToken=b.token,c.userRealm=b.realm),f.next=5,lively.modules.importPackage("lively.2lively");case 5:return f.next=7,Promise.resolve().then(function(){return TP});case 7:return g=f.sent,a=g["default"],f.next=11,a.forLivelyInBrowser(c);case 11:return d=f.sent,console.log("[lively] lively2lively client created ".concat(d)),
d._onUserChange?bi.reportWorldLoad(h,b):(d._onUserChange=function(k){d.isOnline()&&k.user&&(k=k.user,d.info=Object.assign({},d.info,{userToken:k.token,userRealm:k.realm}),d.unregister().then(function(){return d.register()}).then(function(){return console.log("re-registered after user change")}))},bi.subscribe("lively.user/userchanged",d._onUserChange,System),d.once("registered",function(){bi.reportWorldLoad(h,b)}),d.on("registered",function(){var k=h.get("user flap");k&&k.updateNetworkIndicator(d)}),
d.on("connected",function(){var k=h.get("user flap");k&&k.updateNetworkIndicator(d)}),d.on("reconnecting",function(){var k=h.get("user flap");k&&k.updateNetworkIndicator(d)}),d.on("disconnected",function(){var k=h.get("user flap");k&&k.updateNetworkIndicator(d)})),f.abrupt("return",d);case 15:case "end":return f.stop()}},l)}));return zF.apply(this,arguments)}function AF(){AF=Cb(regeneratorRuntime.mark(function l(h){var b,c,g,a,d;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=
2,lively.modules.importPackage("lively.shell");case 2:return f.next=4,Promise.resolve().then(function(){return UP});case 4:return b=f.sent,c=b["default"],f.next=8,Promise.resolve().then(function(){return VP});case 8:g=f.sent,a=g.resourceExtension,d=h.l2lClient,c.installLively2LivelyServices(d),a.resourceClass.defaultL2lClient=d,bi.registerResourceExension(a),console.log("[lively] lively.shell setup");case 15:case "end":return f.stop()}},l)}));return AF.apply(this,arguments)}function BF(){BF=Cb(regeneratorRuntime.mark(function h(){var l;
return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return l=lively.modules.module("localconfig.js"),b.prev=1,b.next=4,bi.resource(l.id).exists();case 4:if(!b.sent){b.next=7;break}b.next=7;return l.reload({resetEnv:!1,reloadDeps:!1});case 7:b.next=13;break;case 9:b.prev=9,b.t0=b["catch"](1),console.error("Error loading localconfig:",b.t0),"undefined"!==typeof $world&&$world.showError("Error loading localconfig.js: ".concat(b.t0));case 13:case "end":return b.stop()}},h,null,
[[1,9]])}));return BF.apply(this,arguments)}function CF(e,h){return DF.apply(this,arguments)}function DF(){DF=Cb(regeneratorRuntime.mark(function b(h,l){var c,g,a,d,f,k,n,p,q,r,u,x,y,D,H,I,N,J,sa=arguments;return regeneratorRuntime.wrap(function(ja){for(;;)switch(ja.prev=ja.next){case 0:c=2<sa.length&&void 0!==sa[2]?sa[2]:{};g=c.env;a=c.root;d=c.verbose;f=void 0===d?!0:d;k=c.localconfig;n=void 0===k?!0:k;p=c.l2l;q=void 0===p?!0:p;r=c.shell;u=void 0===r?!0:r;x=c.worldLoadDialog;y=void 0===x?!1:x;D=
c.showUserFlap;H=void 0===D?"undefined"===typeof h.showsUserFlap?!0:h.showsUserFlap:D;g=g||(l?l.env:bi.MorphicEnv["default"]());I=g.domEnv.document||document;N=I.getElementById("dom-loading-indicator");ja.prev=5;ja.t0=q;if(!ja.t0){ja.next=11;break}ja.next=10;return bi.setupLively2Lively(h);case 10:ja.t0=ja.sent;case 11:J=ja.t0;if(!J||!u){ja.next=15;break}ja.next=15;return bi.setupLivelyShell({l2lClient:J});case 15:f&&N&&(N.style.display="");ja.t1=n;if(!ja.t1){ja.next=20;break}ja.next=20;return bi.loadLocalConfig();
case 20:return ja.next=22,g.setWorld(h,a);case 22:y&&h.execCommand("load world");c.pathForBrowserHistory&&window.history.pushState({},"lively.next",c.pathForBrowserHistory);h.showsUserFlap=H;if(l)l.onUnload();bi.emit("world/loaded",h);return ja.abrupt("return",h);case 30:ja.prev=30;ja.t2=ja["catch"](5);console.error("Error loading world: ",ja.t2);if(!l){ja.next=37;break}ja.next=36;return g.setWorld(l);case 36:l.showError(ja.t2);case 37:throw ja.t2;case 38:return ja.prev=38,N&&(N.style.display="none"),
ja.finish(38);case 41:case "end":return ja.stop()}},b,null,[[5,30,38,41]])}));return DF.apply(this,arguments)}function EF(e,h,l){return FF.apply(this,arguments)}function FF(){FF=Cb(regeneratorRuntime.mark(function c(h,l,b){var g,a,d;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return l&&(l.name=null,l.metadata&&(l.metadata.commit={})),g=bi.MorphicDB["default"],f.next=4,g.load("world",void 0,b,h);case 4:return a=f.sent,d="undefined"!==typeof document?document.location.search:
"",b=Object.assign({pathForBrowserHistory:bi.pathForBrowserHistory(a.name,d)},b),f.abrupt("return",bi.loadWorld(a,l,b));case 8:case "end":return f.stop()}},c)}));return FF.apply(this,arguments)}function GF(e,h,l,b){return HF.apply(this,arguments)}function HF(){HF=Cb(regeneratorRuntime.mark(function g(h,l,b,c){var a,d,f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return b&&(b.name=null,b.metadata&&(b.metadata.commit={})),a=bi.MorphicDB["default"],k.next=4,a.load("world",
h,c,void 0,l||void 0);case 4:return d=k.sent,f="undefined"!==typeof document?document.location.search:"",c=Object.assign({pathForBrowserHistory:bi.pathForBrowserHistory(h,f)},c),k.abrupt("return",bi.loadWorld(d,b,c));case 8:case "end":return k.stop()}},g)}));return HF.apply(this,arguments)}function IF(e,h,l){return JF.apply(this,arguments)}function JF(){JF=Cb(regeneratorRuntime.mark(function c(h,l,b){var g,a;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return g=h.isResource?
h:bi.resource(System.decanonicalize(h)),a=g.nameWithoutExt(),d.abrupt("return",bi.loadWorldFromDB(a,void 0,l,b));case 3:case "end":return d.stop()}},c)}));return JF.apply(this,arguments)}function ix(e,h){return KF.apply(this,arguments)}function KF(){KF=Cb(regeneratorRuntime.mark(function b(h,l){var c,g,a,d,f,k,n,p,q,r,u,x,y,D,H,I,N,J,sa,ja,Ha,Qa,ec,mc,hc,Ua,xa,rc,Lb,Ac,Xb,qd,La,Fd,na,Va,yd,me,ta,za,W;return regeneratorRuntime.wrap(function(ea){for(;;)switch(ea.prev=ea.next){case 0:return l=Object.assign({showSaveDialog:!0,
useExpectedCommit:!0,errorOnMissingExpectedCommit:!1,confirmOverwrite:!0},l),ea.next=3,Dd.import("./dialogs.cp-10a842b8.js");case 3:return c=ea.sent,g=c.SaveWorldDialog,a=h.name,d=[],f="",ea.next=10,bi.ensureCommitInfo(bi.Path("metadata.commit").get(h));case 10:k=ea.sent;n=l.morphicdb||bi.MorphicDB["default"];p="";q="db";if(!l.showSaveDialog){ea.next=31;break}r=bi.part(g,{viewModel:k||{}});ea.next=18;return h.openPrompt(r,{targetWorld:h});case 18:u=ea.sent;x=u.commit;y=u.db;D=u.mode;H=u.filePath;
y&&(n=y);q=D;p=H;bi.__inter0__=x||{};a=bi.__inter0__.name;d=bi.__inter0__.tags;f=bi.__inter0__.description;if(a){ea.next=29;break}return ea.abrupt("return",null);case 29:ea.next=32;break;case 31:k&&(bi.__inter1__=k,a=bi.__inter1__.name,d=bi.__inter1__.tags,f=bi.__inter1__.description);case 32:return I=$world.execCommand("open loading indicator","saving ".concat(a,"...")),ea.next=35,bi.promise.delay(80);case 35:if("json"!==q){ea.next=71;break}N=bi.resource(System.baseURL).join(p).withRelativePartsResolved();
ea.next=39;return N.exists();case 39:if(!ea.sent){ea.next=50;break}I.visible=!1;ea.next=43;return $world.confirm(["File Conflict\n",{},"The file you want to save the world to\n",{fontSize:15,fontWeight:"normal"},N.url,{textStyle:"italic",fontSize:15,fontWeight:"normal"},"\n already exists. Overwrite?",{fontSize:15,fontWeight:"normal"}],{lineWrapping:!1});case 43:if(J=ea.sent){ea.next=47;break}I.remove();return ea.abrupt("return");case 47:I.visible=!0;ea.next=52;break;case 50:return ea.next=52,N.ensureExistance();
case 52:return h.changeMetaData("file",p,!1,!1),ea.next=55,bi.createMorphSnapshot(h);case 55:return sa=ea.sent,ea.next=58,N.writeJson(sa);case 58:return ea.t0=bi,ea.next=61,bi.defaultDirectory(bi.ShellClientResource.defaultL2lClient);case 61:return ea.t1=ea.sent,ea.t2=ea.t1+"/..",ea.t3=p.replace(".json",".br.json"),ea.t4=JSON.stringify(sa),ea.next=67,ea.t0.resource.call(ea.t0,ea.t2).join(ea.t3).withRelativePartsResolved().brotli(ea.t4);case 67:return bi.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(a).read(),
I.remove(),h.setStatusMessage("saved world ".concat(a," to file: ").concat(N.url)),ea.abrupt("return");case 71:ea.prev=71;ja={previewWidth:200,previewHeight:200,previewType:"png",ignoreMorphs:[I],moduleManager:l.moduleManager};Ha="HEAD";Qa=k?k.name:h.name;if(!l.useExpectedCommit){ea.next=96;break}if(Qa===a||!l.confirmOverwrite){ea.next=95;break}ea.next=79;return n.exists("world",a);case 79:mc=ea.sent;hc=mc.exists;Ua=mc.commitId;if(!hc){ea.next=92;break}I.center=h.windowBounds().center();I.visible=
!1;ea.next=87;return h.confirm(["The world\n",{fontWeight:"normal"},'"'.concat(a,'"'),{},"\nalready exists, overwrite?",{fontWeight:"normal"}],{hasFixedPosition:!0,width:350});case 87:xa=ea.sent;I.visible=!0;if(xa){ea.next=91;break}return ea.abrupt("return",null);case 91:ec=Ua;case 92:h.name=a;ea.next=96;break;case 95:ec=k?k._id:void 0;case 96:return rc={author:h.getCurrentUser(),message:"world save",tags:d,description:f},ea.next=99,n.snapshotAndCommit("world",a,h,ja,rc,Ha,ec);case 99:return Lb=ea.sent,
window.history&&(Ac=bi.pathForBrowserHistory(a),window.history.pushState({},"lively.next",Ac)),bi.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(a).read(),h.setStatusMessage("saved world ".concat(a)),h.get("world-list")&&h.get("world-list").onWorldSaved(a),ea.abrupt("return",Lb);case 107:ea.prev=107;ea.t5=ea["catch"](71);if(!ea.t5.message.includes("but no version entry exists")||l.errorOnMissingExpectedCommit){ea.next=111;break}return ea.abrupt("return",ix(h,Object.assign({},
l,{morphicdb:n,useExpectedCommit:!1,showSaveDialog:!1})));case 111:Xb=ea.t5.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[];qd=Wb(Xb,4);La=qd[2];Fd=qd[3];if(!La||!Fd){ea.next=129;break}ea.next=115;return n.log(Fd,1,!0);case 115:na=ea.sent;Va=Wb(na,1);yd=Va[0];me=!0;if(!l.confirmOverwrite){ea.next=125;break}ta=yd.author.name;za=yd.timestamp;W="The current version of world ".concat(a," is not the most recent!\n")+"A newer version by ".concat(ta,
" was saved on ")+"".concat(bi.date.format(new Date(za),"yyyy-mm-dd HH:MM"),". Overwrite?");ea.next=124;return h.confirm(["Version Conflict\n",null,W,{fontSize:16,fontWeight:"normal"}],{width:600});case 124:me=ea.sent;case 125:if(me){ea.next=127;break}return ea.abrupt("return",null);case 127:return h.changeMetaData("commit",bi.obj.dissoc(yd,["preview"]),!0,!1),ea.abrupt("return",ix(h,Object.assign({},l,{morphicdb:n,showSaveDialog:!1})));case 129:console.error(ea.t5),h.logError("Error saving world: "+
ea.t5);case 131:return ea.prev=131,I.remove(),ea.finish(131);case 134:case "end":return ea.stop()}},b,null,[[71,107,131,134]])}));return KF.apply(this,arguments)}function LF(){LF=Cb(regeneratorRuntime.mark(function b(h,l){var c,g,a;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return"string"!==typeof l&&(l=JSON.stringify(l)),d.next=3,Ok.makeRequest(h,"POST",l,{});case 3:return c=d.sent,d.prev=4,d.next=7,c.text();case 7:g=d.sent;d.next=12;break;case 10:d.prev=10,d.t0=
d["catch"](4);case 12:if(g&&"application/json"===c.headers.get("content-type"))try{a=JSON.parse(g)}catch(f){}if(a){d.next=15;break}throw Error("Unexpected response: "+g);case 15:return d.abrupt("return",a);case 16:case "end":return d.stop()}},b,null,[[4,10]])}));return LF.apply(this,arguments)}function WP(e,h){var l=e.row;e=e.column;var b=h.row;h=h.column;return l<b?-2:l===b?e<h?-1:e===h?0:1:2}function Tp(e,h){return 0>Bm.comparePosition(e,h)}function Wu(e,h){return 0>=Bm.comparePosition(e,h)}function Lq(e,
h){return 0===Bm.comparePosition(e,h)}function jx(e,h){return Bm.lessPosition(e,h)?e:h}function kx(e,h){return Bm.lessPosition(e,h)?h:e}function XP(e,h){if(!e||!h)return e==h;var l=!0,b={},c;for(c in e)if(b[c]=!0,!h.hasOwnProperty(c)||e[c]!==h[c]){l=!1;break}if(l)for(var g in h)if(!(b[g]||e.hasOwnProperty(g)&&e[g]===h[g])){l=!1;break}return l}function MF(e,h,l,b){var c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"",g="string"!==typeof e,a="string"!==typeof l;if(g||a){var d=[];g?d.push(e,
h):d.push(e+c,h);a?d.push(l,b):d.push(l+c,b);return d}return!h&&!b||h==b?[e+c+l,h]:h&&b?Vj.shallowEquals(h,b)?[e+c+l,h]:[e+c,h,l,b]:[e+c,h,l,b]}function NF(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";if(2>=e.length)return e;var l=[],b=Wb(e,2),c=b[0],g=b[1];for(b=2;b<e.length;b+=2)g=Vj.concatAttributePair(c,g,e[b],e[b+1],h),2>=g.length?(c=g[0],g=g[1]):(l.push.apply(l,db(g.slice(0,-2))),c=g.slice(-2),g=Wb(c,2),c=g[0],g=g[1]);l.push(c,g);return l}function OF(e,h){for(var l=0,b=
0;b<e.length;b+=2){var c=e[b],g=l+("string"===typeof c?c.length:1);if(g<h)l=g;else{if(l===h)return[e.slice(0,b),e.slice(b)];if(g===h)return[e.slice(0,b+2),e.slice(b+2)];if("string"!==typeof c)throw Error("Assuming text is a string for splitting it, got ".concat(c," instead!"));var a=e[b+1],d=h-l;g=[].concat(db(e.slice(0,b)),[c.slice(0,d),a]);e=c.length===d?e.slice(b+2):[c.slice(h-l),a].concat(db(e.slice(b+2)));return[g,e]}}return[e,[]]}function PF(e,h){var l=e;e=0;for(var b=[],c=0;c<h.length;c++){l=
Vj.splitTextAndAttributesAt(l,h[c]-e);var g=Wb(l,2);l=g[0];g=g[1];b.push(l);for(var a=0;a<l.length;a+=2)e+="string"===typeof l[a]?l[a].length:1;l=g}b.push(l);return b}function QF(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;if(!e.length||2===e.length&&""==e[0])return l?h:h.slice();if(!h.length||2===h.length&&""==h[0])return l?e:e.slice();l=l?e:e.slice();for(var b=0;b<h.length;b+=2)l.push(h[b],h[b+1]);return l}function RF(e,h,l){var b=h.start;h=h.end;if(Vj.eqPosition(b,h))return null;
Vj.lessPosition(h,b)&&(h=[h,b],b=h[0],h=h[1]);var c=b;b=c.row;var g=c.column;c=h;h=c.row;c=c.column;var a=e.getLine(b),d=a.textAndAttributes,f=0;e=Vj.splitTextAndAttributesAt(d,g);g=Wb(e,2);e=g[0];g=g[1];d.length=0;Vj.textAndAttributesDo(e,function(p,q){f+="string"===typeof p?p.length:1;d.push(p,q)});if(b===h){var k=Vj.splitTextAndAttributesAt(g,c-f);k=Wb(k,2);g=k[0];k=k[1]}Vj.textAndAttributesDo(g,function(p,q){return d.push(p,l(a,q))});b===h&&Vj.textAndAttributesDo(k,function(p,q){return d.push(p,
q)});a._textAttributes=null;a.textAndAttributes=Vj.joinTextAttributes(d);if(b!==h){k=function(p){a=a.nextLine();var q=a.textAndAttributes;p=q.slice();q.length=0;Vj.textAndAttributesDo(p,function(r,u){return q.push(r,l(a,u))});a._textAttributes=null;a.textAndAttributes=Vj.joinTextAttributes(q)};for(b+=1;b<h;b++)k();a=a.nextLine();var n=a.textAndAttributes;b=Vj.splitTextAndAttributesAt(n,c);k=Wb(b,2);b=k[0];k=k[1];n.length=0;Vj.textAndAttributesDo(b,function(p,q){return n.push(p,l(a,q))});Vj.textAndAttributesDo(k,
function(p,q){return n.push(p,q)});a._textAttributes=null;a.textAndAttributes=Vj.joinTextAttributes(n)}}function SF(e,h){var l=e.column;e=e.row;var b=[],c=[];h=fa(Vj.splitTextAndAttributesIntoLines(h));var g;try{for(h.s();!(g=h.n()).done;){for(var a=g.value,d=0;d<a.length;d+=2){var f=a[d],k=l+("string"===typeof f?f.length:1);b.push({start:{row:e,column:l},end:{row:e,column:k}});c.push(a[d],a[d+1]);l=k}l=0;e++}}catch(n){h.e(n)}finally{h.f()}return{ranges:b,textAndAttributes:c}}function lx(e){var h=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:"\n";if(!e.length)return[];for(var l=[],b=[],c=0;c<e.length;c+=2){var g=e[c],a=e[c+1];if("string"!==typeof g)b.push(g,a);else for(;g.length;){var d=g.indexOf(h);if(-1===d){b.push(g,a);break}0<d&&b.push(g.slice(0,d),a);l.push(b);g=g.slice(d+1);b=[]}}b.length?l.push(b):(b=e.slice(-2),c=Wb(b,2),b=c[0],c=c[1],"string"===typeof b&&b.endsWith(h)&&l.push(["",c]));return l}function TF(){TF=Cb(regeneratorRuntime.mark(function l(h){var b;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=
c.next){case 0:return lh.cssInstalled=!0,c.next=3,lh.waitFor(2E4,function(){return h.renderer&&h.renderer.domNode});case 3:b=c.sent,lh.addOrChangeCSSDeclaration("new-text-css","\n\n    /* markers */\n\n    .newtext-marker-layer {\n      position: absolute;\n    }\n\n    /* selection / cursor */\n\n    .newtext-cursor {\n      z-index: 5;\n      pointer-events: none;\n      position: absolute;\n      background-color: black;\n    }\n\n    .hidden-cursor .newtext-cursor {\n      background-color: transparent !important;\n    }\n\n    .newtext-cursor.diminished {\n      background-color: gray;\n    }\n\n    .newtext-selection-layer {\n      position: absolute;\n    }\n\n    /*-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* text layer / content */\n\n    .newtext-text-layer {\n      box-sizing: border-box;\n      position: absolute;\n      white-space: pre;\n      z-index: 0;\n      min-width: 100%;\n      pointer-events: none;\n    }\n\n    .newtext-before-filler {}\n\n    .newtext-text-layer.wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-word;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.only-wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.wrap-by-chars {\n      white-space: pre-wrap;\n      word-break: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.no-wrapping {\n    }\n\n    .newtext-text-layer a {\n       pointer-events: auto;\n    }\n\n    .newtext-text-layer.auto-width .line {\n      width: fit-content;\n    }\n\n    .newtext-text-layer .line {\n      -moz-border-radius: 0;\n      -webkit-border-radius: 0;\n      border-radius: 0;\n      border-width: 0;\n      background: transparent;\n      font-family: inherit;\n      font-size: inherit;\n      margin: 0;\n      word-wrap: normal;\n      line-height: inherit;\n      color: inherit;\n      position: relative;\n      overflow: visible;\n      -webkit-tap-highlight-color: transparent;\n      -webkit-font-variant-ligatures: contextual;\n      font-variant-ligatures: contextual;\n    }\n\n    .line > .Morph {\n      display: inline-block !important;\n      vertical-align: top !important;\n    }\n\n    blockquote {\n      margin: 0;\n      -webkit-margin-start: 0;\n      -webkit-margin-end: 0;\n    }\n\n    .newtext-text-layer blockquote {\n      margin-left: 2em;\n      margin-right: 2em;\n      border-left: 2px lightgray solid;\n      padding-left: 2%;\n    }\n\n    /* -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* debug styling */\n\n    .debug-info {\n      position: absolute;\n      outline: 1px solid green;\n      pointer-events: none;\n      z-index: 4;\n      text-align: center;\n      font-family: monospace;\n      color: green;\n      background-color: white;\n      font-size: small;\n      vertical-align: baseline;\n    }\n\n    .debug-line {\n      position: absolute;\n      outline: 1px solid red;\n      pointer-events: none;\n      z-index: 4,\n      text-align: right;\n      font-family: monospace;\n      font-size: small;\n      vertical-align: baseline;\n      color: red;\n    }\n\n    .debug-char {\n      position: absolute;\n      outline: 1px solid orange;\n      pointer-events: none;\n      z-index: 3\n    }\n\n  ",
b.getRootNode());case 5:case "end":return c.stop()}},l)}));return TF.apply(this,arguments)}function UF(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e.textAndAttributesInRange(e.selection.range),l=new e.constructor(Object.assign({},e.defaultTextStyle,{width:e.width,textAndAttributes:h})),b=l.textRenderer.directRenderTextLayerFn(l);h=l.textRenderer.directRenderLineFn(l);b=b();var c=System.global&&System.global.getComputedStyle?System.global.getComputedStyle(b):null;c&&(b.ownerDocument.body.appendChild(b),
b.style.whiteSpace=c.whiteSpace,b.style.overflowWrap=c.overflowWrap,b.style.wordBreak=c.wordBreak,b.style.minWidth=c.minWidth,b.parentNode.removeChild(b));l=fa(l.document.lines);var g;try{for(l.s();!(g=l.n()).done;)b.appendChild(h(g.value))}catch(a){l.e(a)}finally{l.f()}return b.outerHTML}function Mq(e){return e?e.replace(/^\s+|\s+$/g,""):""}function VF(e,h){var l=e&&"string"===typeof e.type,b=l?e:h,c;for(c in e){var g=e[c];Array.isArray(g)?g.forEach(function(a){VF(a,b)}):g&&"object"===typeof g&&
VF(g,b)}l&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:h||null});return e}function iA(e){(this||$_).options=e||{}}function Tl(e){e=e||{};YP.call(this||xr,e);(this||xr).indentation=e.indent}function mx(e){return(e=e.match(ZP))?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}function Xu(e){var h="";e.scheme&&(h+=e.scheme+":");h+="//";e.auth&&(h+=e.auth+"@");e.host&&(h+=e.host);e.port&&(h+=":"+e.port);e.path&&(h+=e.path);return h}function WF(e){var h=
e,l=mx(e);if(l){if(!l.path)return e;h=l.path}e=zk.isAbsolute(h);h=h.split(/\/+/);for(var b,c=0,g=h.length-1;0<=g;g--)b=h[g],"."===b?h.splice(g,1):".."===b?c++:0<c&&(""===b?(h.splice(g+1,c),c=0):(h.splice(g,2),c--));h=h.join("/");""===h&&(h=e?"/":".");return l?(l.path=h,Xu(l)):h}function $P(e,h){""===e&&(e=".");""===h&&(h=".");var l=mx(h),b=mx(e);b&&(e=b.path||"/");if(l&&!l.scheme)return b&&(l.scheme=b.scheme),Xu(l);if(l||h.match(a0))return h;if(b&&!b.host&&!b.path)return b.host=h,Xu(b);e="/"===h.charAt(0)?
h:WF(e.replace(/\/+$/,"")+"/"+h);return b?(b.path=e,Xu(b)):e}function aQ(e){return e}function b0(e){return bQ(e)?"$"+e:e}function c0(e){return bQ(e)?e.slice(1):e}function bQ(e){if(!e)return!1;var h=e.length;if(9>h||95!==e.charCodeAt(h-1)||95!==e.charCodeAt(h-2)||111!==e.charCodeAt(h-3)||116!==e.charCodeAt(h-4)||111!==e.charCodeAt(h-5)||114!==e.charCodeAt(h-6)||112!==e.charCodeAt(h-7)||95!==e.charCodeAt(h-8)||95!==e.charCodeAt(h-9))return!1;for(h-=10;0<=h;h--)if(36!==e.charCodeAt(h))return!1;return!0}
function Yu(e,h){return e===h?0:null===e?1:null===h?-1:e>h?1:-1}function Up(){(this||Cm)._array=[];(this||Cm)._set=Vs?new Map:Object.create(null)}function jA(){(this||po)._array=[];(this||po)._sorted=!0;(this||po)._last={generatedLine:-1,generatedColumn:0}}function qo(e){e||(e={});(this||Dj)._file=Ul.getArg(e,"file",null);(this||Dj)._sourceRoot=Ul.getArg(e,"sourceRoot",null);(this||Dj)._skipValidation=Ul.getArg(e,"skipValidation",!1);(this||Dj)._sources=new kA;(this||Dj)._names=new kA;(this||Dj)._mappings=
new d0;(this||Dj)._sourcesContents=null}function XF(e,h,l,b,c,g){var a=Math.floor((h-e)/2)+e,d=c(l,b[a],!0);return 0===d?a:0<d?1<h-a?XF(a,h,l,b,c,g):g==lA.LEAST_UPPER_BOUND?h<b.length?h:-1:a:1<a-e?XF(e,a,l,b,c,g):g==lA.LEAST_UPPER_BOUND?a:0>e?-1:e}function YF(e,h,l){var b=e[h];e[h]=e[l];e[l]=b}function ZF(e,h,l,b){if(l<b){var c=l-1;YF(e,Math.round(l+Math.random()*(b-l)),b);for(var g=e[b],a=l;a<b;a++)0>=h(e[a],g)&&(c+=1,YF(e,c,a));YF(e,c+1,a);c+=1;ZF(e,h,l,c-1);ZF(e,h,c+1,b)}}function ml(e,h){var l=
e;"string"===typeof e&&(l=Bi.parseSourceMapInput(e));return null!=l.sections?new Vp(l,h):new Um(l,h)}function Um(e,h){var l=e;"string"===typeof e&&(l=Bi.parseSourceMapInput(e));e=Bi.getArg(l,"version");var b=Bi.getArg(l,"sources"),c=Bi.getArg(l,"names",[]),g=Bi.getArg(l,"sourceRoot",null),a=Bi.getArg(l,"sourcesContent",null),d=Bi.getArg(l,"mappings");l=Bi.getArg(l,"file",null);if(e!=(this||hh)._version)throw Error("Unsupported version: "+e);g&&(g=Bi.normalize(g));b=b.map(String).map(Bi.normalize).map(function(f){return g&&
Bi.isAbsolute(g)&&Bi.isAbsolute(f)?Bi.relative(g,f):f});(this||hh)._names=Zu.fromArray(c.map(String),!0);(this||hh)._sources=Zu.fromArray(b,!0);(this||hh)._absoluteSources=(this||hh)._sources.toArray().map(function(f){return Bi.computeSourceURL(g,f,h)});(this||hh).sourceRoot=g;(this||hh).sourcesContent=a;(this||hh)._mappings=d;(this||hh)._sourceMapURL=h;(this||hh).file=l}function cQ(){(this||hh).generatedLine=0;(this||hh).generatedColumn=0;(this||hh).source=null;(this||hh).originalLine=null;(this||
hh).originalColumn=null;(this||hh).name=null}function Vp(e,h){var l=e;"string"===typeof e&&(l=Bi.parseSourceMapInput(e));e=Bi.getArg(l,"version");l=Bi.getArg(l,"sections");if(e!=(this||hh)._version)throw Error("Unsupported version: "+e);(this||hh)._sources=new Zu;(this||hh)._names=new Zu;var b={line:-1,column:0};(this||hh)._sections=l.map(function(c){if(c.url)throw Error("Support for url field in sections not implemented.");var g=Bi.getArg(c,"offset"),a=Bi.getArg(g,"line"),d=Bi.getArg(g,"column");
if(a<b.line||a===b.line&&d<b.column)throw Error("Section offsets must be ordered and non-overlapping.");b=g;return{generatedOffset:{generatedLine:a+1,generatedColumn:d+1},consumer:new ml(Bi.getArg(c,"map"),h)}})}function Ws(e){throw new RangeError(e0[e]);}function dQ(e,h){var l=e.split("@"),b="";1<l.length&&(b=l[0]+"@",e=l[1]);e=e.replace(f0,".").split(".");l=[];for(var c=e.length;c--;)l[c]=h(e[c]);h=l.join(".");return b+h}function eQ(e){for(var h=[],l=0,b=e.length;l<b;){var c=e.charCodeAt(l++);if(55296<=
c&&56319>=c&&l<b){var g=e.charCodeAt(l++);56320==(64512&g)?h.push(((1023&c)<<10)+(1023&g)+65536):(h.push(c),l--)}else h.push(c)}return h}function ro(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function nx(e,h,l){if(e&&Wp.isObject(e)&&e instanceof ro)return e;var b=new ro;return b.parse(e,h,l),b}function fQ(e){if("string"===typeof e)e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");
if("file:"!==e.protocol)throw new Deno.errors.InvalidData("invalid url scheme");if($F){var h=e.hostname;e=e.pathname;for(var l=0;l<e.length;l++)if("%"===e[l]){const b=e.codePointAt(l+2)||32;if("2"===e[l+1]&&102===b||"5"===e[l+1]&&99===b)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters");}e=e.replace(g0,"\\");e=decodeURIComponent(e);if(""!==h)e=`\\\\${h}${e}`;else{h=e.codePointAt(1)|32;l=e[2];if(97>h||122<h||":"!==l)throw new Deno.errors.InvalidData("file url path must be absolute");
e=e.slice(1)}}else{if(""!==e.hostname)throw new Deno.errors.InvalidData("invalid file url hostname");e=e.pathname;for(h=0;h<e.length;h++)if("%"===e[h]&&(l=e.codePointAt(h+2)||32,"2"===e[h+1]&&102===l))throw new Deno.errors.InvalidData("must not include encoded / characters");e=decodeURIComponent(e)}return e}function aG(e,h){try{return decodeURIComponent(e.join(""))}catch(b){}if(1===e.length)return e;h=h||1;var l=e.slice(0,h);e=e.slice(h);return Array.prototype.concat.call([],aG(l),aG(e))}function bG(){return Array.prototype.reduce.call(arguments,
function(e,h){return h0.resolve(e,h)})}function gQ(e){return"\\"===i0.sep?e.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):e}function ox(e){return j0(e.replace(/\+/g,"%2B"))}function mA(e,h,l){k0.nextTick(function(){e(h,l)})}function $u(e,h){try{return JSON.parse(e.replace(/^\)\]\}'/,""))}catch(l){throw l.sourceMapData=h,l;}}function hQ(e,h,l){h=ox(h);try{return String(e(h))}catch(b){throw b.sourceMapData=l,b;}}function iQ(e,h,l,b){try{var c=jQ(e,h)}catch(g){return mA(b,g)}if(!c||c.map)return mA(b,
null,c);e=ox(c.url);l(e,function(g,a){if(g)return g.sourceMapData=c,b(g);c.map=String(a);try{c.map=$u(c.map,c)}catch(d){return b(d)}b(null,c)})}function kQ(e,h,l){e=jQ(e,h);if(!e||e.map)return e;e.map=hQ(l,e.url,e);e.map=$u(e.map,e);return e}function jQ(e,h){h=gQ(h);e=(e=e.match(l0))?e[1]||e[2]||"":null;if(!e)return null;var l=e.match(m0);if(l){var b=l[1]||"text/plain",c=l[2]||"";l=l[3]||"";h={sourceMappingURL:e,url:null,sourcesRelativeTo:h,map:l};if(!n0.test(b)){var g=Error("Unuseful data uri mime type: "+
b);g.sourceMapData=h;throw g;}try{if(";base64"===c)if("undefined"===typeof TextDecoder||"undefined"===typeof Uint8Array)g=lQ(l);else{var a=lQ(l),d=a.length,f=new Uint8Array(d);for(e=0;e<d;e++)f[e]=a.charCodeAt(e);g=(new TextDecoder(o0,{fatal:!0})).decode(f)}else g=decodeURIComponent(l);h.map=$u(g,h)}catch(k){throw k.sourceMapData=h,k;}return h}g=bG(h,e);return{sourceMappingURL:e,url:g,sourcesRelativeTo:g,map:null}}function mQ(e,h,l,b,c){"function"===typeof b&&(c=b,b={});var g=e.sources?e.sources.length:
0,a={sourcesResolved:[],sourcesContent:[]};if(0===g)mA(c,null,a);else{var d=function(){g--;0===g&&c(null,a)};nQ(e,h,b,function(f,k,n){a.sourcesResolved[n]=f;"string"===typeof k?(a.sourcesContent[n]=k,mA(d,null)):(f=ox(f),l(f,function(p,q){a.sourcesContent[n]=p?p:String(q);d()}))})}}function oQ(e,h,l,b){var c={sourcesResolved:[],sourcesContent:[]};if(!e.sources||0===e.sources.length)return c;nQ(e,h,b,function(g,a,d){c.sourcesResolved[d]=g;if(null!==l)if("string"===typeof a)c.sourcesContent[d]=a;else{g=
ox(g);try{c.sourcesContent[d]=String(l(g))}catch(f){c.sourcesContent[d]=f}}});return c}function nQ(e,h,l,b){l=l||{};h=gQ(h);for(var c,g,a=0,d=e.sources.length;a<d;a++)c=null,"string"===typeof l.sourceRoot?c=l.sourceRoot:"string"===typeof e.sourceRoot&&!1!==l.sourceRoot&&(c=e.sourceRoot),c=null===c||""===c?bG(h,e.sources[a]):bG(h,c.replace(p0,"/"),e.sources[a]),g=(e.sourcesContent||[])[a],b(c,g,a)}function px(){if(pQ)return nA;pQ=!0;Object.defineProperty(nA,"__esModule",{value:!0});nA.constants={O_RDONLY:0,
O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,
UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4};return nA}function q0(){if(qQ)return cG;qQ=!0;cG.default="function"===typeof BigInt?BigInt:function(){throw Error("BigInt is not supported in this environment.");};return cG}function dG(){if(rQ)return av;rQ=!0;Object.defineProperty(av,"__esModule",{value:!0});av.Stats=void 0;var e=px(),h=q0(),l=e.constants.S_IFMT,b=e.constants.S_IFDIR,c=e.constants.S_IFREG,g=e.constants.S_IFBLK,a=e.constants.S_IFCHR,
d=e.constants.S_IFLNK,f=e.constants.S_IFIFO,k=e.constants.S_IFSOCK;e=function(){function n(){}n.build=function(p,q){void 0===q&&(q=!1);var r=new n,u=p.gid,x=p.atime,y=p.mtime,D=p.ctime;q=q?h.default:function(H){return H};r.uid=q(p.uid);r.gid=q(u);r.rdev=q(0);r.blksize=q(4096);r.ino=q(p.ino);r.size=q(p.getSize());r.blocks=q(1);r.atime=x;r.mtime=y;r.ctime=D;r.birthtime=D;r.atimeMs=q(x.getTime());r.mtimeMs=q(y.getTime());u=q(D.getTime());r.ctimeMs=u;r.birthtimeMs=u;r.dev=q(0);r.mode=q(p.mode);r.nlink=
q(p.nlink);return r};n.prototype._checkModeProperty=function(p){return(Number(this.mode)&l)===p};n.prototype.isDirectory=function(){return this._checkModeProperty(b)};n.prototype.isFile=function(){return this._checkModeProperty(c)};n.prototype.isBlockDevice=function(){return this._checkModeProperty(g)};n.prototype.isCharacterDevice=function(){return this._checkModeProperty(a)};n.prototype.isSymbolicLink=function(){return this._checkModeProperty(d)};n.prototype.isFIFO=function(){return this._checkModeProperty(f)};
n.prototype.isSocket=function(){return this._checkModeProperty(k)};return n}();av.Stats=e;av.default=e;return av}function eG(){function e(b){for(var c=[],g=1;g<arguments.length;g++)c[g-1]=arguments[g];return new (l.Buffer.bind.apply(l.Buffer,h([void 0,b],c,!1)))}if(sQ)return Zo;sQ=!0;var h=Zo&&Zo.__spreadArray||function(b,c,g){if(g||2===arguments.length)for(var a=0,d=c.length,f;a<d;a++)!f&&a in c||(f||(f=Array.prototype.slice.call(c,0,a)),f[a]=c[a]);return b.concat(f||Array.prototype.slice.call(c))};
Object.defineProperty(Zo,"__esModule",{value:!0});Zo.bufferFrom=Zo.bufferAllocUnsafe=Zo.Buffer=void 0;var l=Ps;Object.defineProperty(Zo,"Buffer",{enumerable:!0,get:function(){return l.Buffer}});Zo.bufferAllocUnsafe=l.Buffer.allocUnsafe||e;Zo.bufferFrom=l.Buffer.from||e;return Zo}function tQ(){function e(p){return function(q){function r(u){for(var x=[],y=1;y<arguments.length;y++)x[y-1]=arguments[y];x=q.call(this,h(u,x))||this;x.code=u;x[d]=u;x.name=q.prototype.name+" ["+x[d]+"]";return x}c(r,q);return r}(p)}
function h(p,q){g.strictEqual(typeof p,"string");var r=f[p];g(r,"An invalid error message key was used: "+p+".");if("function"===typeof r)p=r;else{p=a.format;if(void 0===q||0===q.length)return r;q.unshift(r)}return String(p.apply(null,q))}function l(p,q){f[p]="function"===typeof q?q:String(q)}function b(p,q){g(p,"expected is required");g("string"===typeof q,"thing is required");if(Array.isArray(p)){var r=p.length;g(0<r,"At least one expected value needs to be specified");p=p.map(function(u){return String(u)});
return 2<r?"one of "+q+" "+p.slice(0,r-1).join(", ")+", or "+p[r-1]:2===r?"one of "+q+" "+p[0]+" or "+p[1]:"of "+q+" "+p[0]}return"of "+q+" "+String(p)}if(uQ)return fm;uQ=!0;var c=fm&&fm.__extends||function(){var p=function(q,r){p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,x){u.__proto__=x}||function(u,x){for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(u[y]=x[y])};return p(q,r)};return function(q,r){function u(){this.constructor=q}if("function"!==typeof r&&null!==
r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");p(q,r);q.prototype=null===r?Object.create(r):(u.prototype=r.prototype,new u)}}();Object.defineProperty(fm,"__esModule",{value:!0});fm.E=fm.AssertionError=fm.message=fm.RangeError=fm.TypeError=fm.Error=void 0;var g=Xi,a=Dg,d="undefined"===typeof Symbol?"_kCode":Symbol("code"),f={},k="undefined"!==typeof globalThis?globalThis:r0,n=function(p){function q(r){if("object"!==typeof r||null===r)throw new fm.TypeError("ERR_INVALID_ARG_TYPE",
"options","object");var u=r.message?p.call(this,r.message)||this:p.call(this,a.inspect(r.actual).slice(0,128)+" "+(r.operator+" "+a.inspect(r.expected).slice(0,128)))||this;u.generatedMessage=!r.message;u.name="AssertionError [ERR_ASSERTION]";u.code="ERR_ASSERTION";u.actual=r.actual;u.expected=r.expected;u.operator=r.operator;fm.Error.captureStackTrace(u,r.stackStartFunction);return u}c(q,p);return q}(k.Error);fm.AssertionError=n;fm.message=h;fm.E=l;fm.Error=e(k.Error);fm.TypeError=e(k.TypeError);
fm.RangeError=e(k.RangeError);l("ERR_ARG_NOT_ITERABLE","%s must be iterable");l("ERR_ASSERTION","%s");l("ERR_BUFFER_OUT_OF_BOUNDS",function(p,q){return q?"Attempt to write outside buffer bounds":'"'+p+'" is outside of buffer bounds'});l("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received");l("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s");l("ERR_CPU_USAGE","Unable to obtain cpu usage %s");l("ERR_DNS_SET_SERVERS_FAILED",function(p,q){return'c-ares failed to set servers: "'+
p+'" ['+q+"]"});l("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value");l("ERR_ENCODING_NOT_SUPPORTED",function(p){return'The "'+p+'" encoding is not supported'});l("ERR_ENCODING_INVALID_ENCODED_DATA",function(p){return"The encoded data was not valid for encoding "+p});l("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client");l("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s");l("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding");
l("ERR_INDEX_OUT_OF_RANGE","Index out of range");l("ERR_INVALID_ARG_TYPE",function(p,q,r){g(p,"name is required");if(q.includes("not ")){var u="must not be";q=q.split("not ")[1]}else u="must be";if(Array.isArray(p))u="The "+p.map(function(y){return'"'+y+'"'}).join(", ")+" arguments "+u+" "+b(q,"type");else if(p.includes(" argument"))u="The "+p+" "+u+" "+b(q,"type");else{var x=p.includes(".")?"property":"argument";u='The "'+p+'" '+x+" "+u+" "+b(q,"type")}3<=arguments.length&&(u+=". Received type "+
(null!==r?typeof r:"null"));return u});l("ERR_INVALID_ARRAY_LENGTH",function(p,q,r){g.strictEqual(typeof r,"number");return'The array "'+p+'" (length '+r+") must be of length "+q+"."});l("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s");l("ERR_INVALID_CALLBACK","Callback must be a function");l("ERR_INVALID_CHAR","Invalid character in %s");l("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column");l("ERR_INVALID_FD",'"fd" must be a positive integer: %s');l("ERR_INVALID_FILE_URL_HOST",
'File URL host must be "localhost" or empty on %s');l("ERR_INVALID_FILE_URL_PATH","File URL path %s");l("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent");l("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s");l("ERR_INVALID_OPT_VALUE",function(p,q){return'The value "'+String(q)+'" is invalid for option "'+p+'"'});l("ERR_INVALID_OPT_VALUE_ENCODING",function(p){return'The value "'+String(p)+'" is invalid for option "encoding"'});l("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL');
l("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s");l("ERR_INVALID_THIS",'Value of "this" must be of type %s');l("ERR_INVALID_TUPLE","%s must be an iterable %s tuple");l("ERR_INVALID_URL","Invalid URL: %s");l("ERR_INVALID_URL_SCHEME",function(p){return"The URL must be "+b(p,"scheme")});l("ERR_IPC_CHANNEL_CLOSED","Channel closed");l("ERR_IPC_DISCONNECTED","IPC channel is already disconnected");l("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe");
l("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks");l("ERR_MISSING_ARGS",function(){for(var p=[],q=0;q<arguments.length;q++)p[q]=arguments[q];g(0<p.length,"At least one arg needs to be specified");q="The ";var r=p.length;p=p.map(function(u){return'"'+u+'"'});switch(r){case 1:q+=p[0]+" argument";break;case 2:q+=p[0]+" and "+p[1]+" arguments";break;default:q+=p.slice(0,r-1).join(", "),q+=", and "+p[r-1]+" arguments"}return q+" must be specified"});l("ERR_MULTIPLE_CALLBACK","Callback called multiple times");
l("ERR_NAPI_CONS_FUNCTION","Constructor must be a function");l("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object");l("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support");l("ERR_NO_LONGER_SUPPORTED","%s is no longer supported");l("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s");l("ERR_SOCKET_ALREADY_BOUND","Socket is already bound");l("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536");l("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6");
l("ERR_SOCKET_CANNOT_SEND","Unable to send data");l("ERR_SOCKET_CLOSED","Socket is closed");l("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running");l("ERR_STDERR_CLOSE","process.stderr cannot be closed");l("ERR_STDOUT_CLOSE","process.stdout cannot be closed");l("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode");l("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s");l("ERR_TLS_DH_PARAM_SIZE",function(p){return"DH parameter size "+p+" is less than 2048"});
l("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout");l("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate");l("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext');l("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected");l("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming");l("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0");l("ERR_UNKNOWN_ENCODING","Unknown encoding: %s");
l("ERR_UNKNOWN_SIGNAL","Unknown signal: %s");l("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type");l("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type");l("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl");return fm}function vQ(){if(wQ)return Xp;wQ=!0;Object.defineProperty(Xp,"__esModule",{value:!0});Xp.strToEncoding=Xp.assertEncoding=Xp.ENCODING_UTF8=void 0;var e=eG(),h=tQ();Xp.ENCODING_UTF8="utf8";Xp.assertEncoding=function(l){if(l&&!e.Buffer.isEncoding(l))throw new h.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",
l);};Xp.strToEncoding=function(l,b){return b&&b!==Xp.ENCODING_UTF8?"buffer"===b?new e.Buffer(l):(new e.Buffer(l)).toString(b):l};return Xp}function xQ(){if(yQ)return bv;yQ=!0;Object.defineProperty(bv,"__esModule",{value:!0});bv.Dirent=void 0;var e=px(),h=vQ(),l=e.constants.S_IFMT,b=e.constants.S_IFDIR,c=e.constants.S_IFREG,g=e.constants.S_IFBLK,a=e.constants.S_IFCHR,d=e.constants.S_IFLNK,f=e.constants.S_IFIFO,k=e.constants.S_IFSOCK;e=function(){function n(){this.name="";this.mode=0}n.build=function(p,
q){var r=new n,u=p.getNode().mode;r.name=(0,h.strToEncoding)(p.getName(),q);r.mode=u;return r};n.prototype._checkModeProperty=function(p){return(this.mode&l)===p};n.prototype.isDirectory=function(){return this._checkModeProperty(b)};n.prototype.isFile=function(){return this._checkModeProperty(c)};n.prototype.isBlockDevice=function(){return this._checkModeProperty(g)};n.prototype.isCharacterDevice=function(){return this._checkModeProperty(a)};n.prototype.isSymbolicLink=function(){return this._checkModeProperty(d)};
n.prototype.isFIFO=function(){return this._checkModeProperty(f)};n.prototype.isSocket=function(){return this._checkModeProperty(k)};return n}();bv.Dirent=e;bv.default=e;return bv}function zQ(){if(AQ)return oA;AQ=!0;var e=yk;Object.defineProperty(oA,"__esModule",{value:!0});e="function"===typeof e.nextTick?e.nextTick.bind("undefined"!==typeof globalThis?globalThis:BQ):setTimeout.bind("undefined"!==typeof globalThis?globalThis:BQ);oA.default=e;return oA}function CQ(){function e(){var l="undefined"!==
typeof h?h:yk;l=l||{};l.getuid||(l.getuid=function(){return 0});l.getgid||(l.getgid=function(){return 0});l.cwd||(l.cwd=function(){return"/"});l.nextTick||(l.nextTick=zQ().default);l.emitWarning||(l.emitWarning=function(b,c){console.warn(""+c+(c?": ":"")+b)});l.env||(l.env={});return l}if(DQ)return cv;DQ=!0;var h=yk;Object.defineProperty(cv,"__esModule",{value:!0});cv.createProcess=void 0;cv.createProcess=e;cv.default=e();return cv}function s0(){if(EQ)return An;EQ=!0;var e=An&&An.__extends||function(){var p=
function(q,r){p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,x){u.__proto__=x}||function(u,x){for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(u[y]=x[y])};return p(q,r)};return function(q,r){function u(){this.constructor=q}if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");p(q,r);q.prototype=null===r?Object.create(r):(u.prototype=r.prototype,new u)}}();Object.defineProperty(An,"__esModule",{value:!0});
An.File=An.Link=An.Node=An.SEP=void 0;var h=CQ(),l=eG(),b=px(),c=Dl,g=dG(),a=b.constants.S_IFMT,d=b.constants.S_IFDIR,f=b.constants.S_IFREG,k=b.constants.S_IFLNK,n=b.constants.O_APPEND;An.SEP="/";b=function(p){function q(r,u){void 0===u&&(u=438);var x=p.call(this)||this;x.uid=h.default.getuid();x.gid=h.default.getgid();x.atime=new Date;x.mtime=new Date;x.ctime=new Date;x.perm=438;x.mode=f;x.nlink=1;x.perm=u;x.mode|=u;x.ino=r;return x}e(q,p);q.prototype.getString=function(r){void 0===r&&(r="utf8");
return this.getBuffer().toString(r)};q.prototype.setString=function(r){this.buf=(0,l.bufferFrom)(r,"utf8");this.touch()};q.prototype.getBuffer=function(){this.buf||this.setBuffer((0,l.bufferAllocUnsafe)(0));return(0,l.bufferFrom)(this.buf)};q.prototype.setBuffer=function(r){this.buf=(0,l.bufferFrom)(r);this.touch()};q.prototype.getSize=function(){return this.buf?this.buf.length:0};q.prototype.setModeProperty=function(r){this.mode=this.mode&~a|r};q.prototype.setIsFile=function(){this.setModeProperty(f)};
q.prototype.setIsDirectory=function(){this.setModeProperty(d)};q.prototype.setIsSymlink=function(){this.setModeProperty(k)};q.prototype.isFile=function(){return(this.mode&a)===f};q.prototype.isDirectory=function(){return(this.mode&a)===d};q.prototype.isSymlink=function(){return(this.mode&a)===k};q.prototype.makeSymlink=function(r){this.symlink=r;this.setIsSymlink()};q.prototype.write=function(r,u,x,y){void 0===u&&(u=0);void 0===x&&(x=r.length);void 0===y&&(y=0);this.buf||(this.buf=(0,l.bufferAllocUnsafe)(0));
if(y+x>this.buf.length){var D=(0,l.bufferAllocUnsafe)(y+x);this.buf.copy(D,0,0,this.buf.length);this.buf=D}r.copy(this.buf,y,u,u+x);this.touch();return x};q.prototype.read=function(r,u,x,y){void 0===u&&(u=0);void 0===x&&(x=r.byteLength);void 0===y&&(y=0);this.buf||(this.buf=(0,l.bufferAllocUnsafe)(0));x>r.byteLength&&(x=r.byteLength);x+y>this.buf.length&&(x=this.buf.length-y);this.buf.copy(r,u,y,y+x);return x};q.prototype.truncate=function(r){void 0===r&&(r=0);if(r)if(this.buf||(this.buf=(0,l.bufferAllocUnsafe)(0)),
r<=this.buf.length)this.buf=this.buf.slice(0,r);else{var u=(0,l.bufferAllocUnsafe)(0);this.buf.copy(u);u.fill(0,r)}else this.buf=(0,l.bufferAllocUnsafe)(0);this.touch()};q.prototype.chmod=function(r){this.perm=r;this.mode=this.mode&-512|r;this.touch()};q.prototype.chown=function(r,u){this.uid=r;this.gid=u;this.touch()};q.prototype.touch=function(){this.mtime=new Date;this.emit("change",this)};q.prototype.canRead=function(r,u){void 0===r&&(r=h.default.getuid());void 0===u&&(u=h.default.getgid());return this.perm&
4||u===this.gid&&this.perm&32||r===this.uid&&this.perm&256?!0:!1};q.prototype.canWrite=function(r,u){void 0===r&&(r=h.default.getuid());void 0===u&&(u=h.default.getgid());return this.perm&2||u===this.gid&&this.perm&16||r===this.uid&&this.perm&128?!0:!1};q.prototype.del=function(){this.emit("delete",this)};q.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,
symlink:this.symlink,data:this.getString()}};return q}(c.EventEmitter);An.Node=b;c=function(p){function q(r,u,x){var y=p.call(this)||this;y.children={};y.steps=[];y.ino=0;y.length=0;y.vol=r;y.parent=u;y.steps=u?u.steps.concat([x]):[x];return y}e(q,p);q.prototype.setNode=function(r){this.node=r;this.ino=r.ino};q.prototype.getNode=function(){return this.node};q.prototype.createChild=function(r,u){void 0===u&&(u=this.vol.createNode());var x=new q(this.vol,this,r);x.setNode(u);u.isDirectory();this.setChild(r,
x);return x};q.prototype.setChild=function(r,u){void 0===u&&(u=new q(this.vol,this,r));this.children[r]=u;u.parent=this;this.length++;this.emit("child:add",u,this);return u};q.prototype.deleteChild=function(r){delete this.children[r.getName()];this.length--;this.emit("child:delete",r,this)};q.prototype.getChild=function(r){if(Object.hasOwnProperty.call(this.children,r))return this.children[r]};q.prototype.getPath=function(){return this.steps.join(An.SEP)};q.prototype.getName=function(){return this.steps[this.steps.length-
1]};q.prototype.walk=function(r,u,x){void 0===u&&(u=r.length);void 0===x&&(x=0);if(x>=r.length||x>=u)return this;var y=this.getChild(r[x]);return y?y.walk(r,u,x+1):null};q.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}};return q}(c.EventEmitter);An.Link=c;c=function(){function p(q,r,u,x){this.position=0;this.link=q;this.node=r;this.flags=u;this.fd=x}p.prototype.getString=function(q){return this.node.getString()};p.prototype.setString=function(q){this.node.setString(q)};
p.prototype.getBuffer=function(){return this.node.getBuffer()};p.prototype.setBuffer=function(q){this.node.setBuffer(q)};p.prototype.getSize=function(){return this.node.getSize()};p.prototype.truncate=function(q){this.node.truncate(q)};p.prototype.seekTo=function(q){this.position=q};p.prototype.stats=function(){return g.default.build(this.node)};p.prototype.write=function(q,r,u,x){void 0===r&&(r=0);void 0===u&&(u=q.length);"number"!==typeof x&&(x=this.position);this.flags&n&&(x=this.getSize());q=
this.node.write(q,r,u,x);this.position=x+q;return q};p.prototype.read=function(q,r,u,x){void 0===r&&(r=0);void 0===u&&(u=q.byteLength);"number"!==typeof x&&(x=this.position);q=this.node.read(q,r,u,x);this.position=x+q;return q};p.prototype.chmod=function(q){this.node.chmod(q)};p.prototype.chown=function(q,r){this.node.chown(q,r)};return p}();An.File=c;return An}function t0(){if(FQ)return pA;FQ=!0;Object.defineProperty(pA,"__esModule",{value:!0});pA.default=function(e,h,l){var b=setTimeout.apply("undefined"!==
typeof globalThis?globalThis:u0,arguments);b&&"object"===typeof b&&"function"===typeof b.unref&&b.unref();return b};return pA}function v0(){function e(b,c,g){void 0===g&&(g=function(a){return a});return function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return new Promise(function(f,k){b[c].bind(b).apply(void 0,h(h([],a,!1),[function(n,p){return n?k(n):f(g(p))}],!1))})}}if(GQ)return yr;GQ=!0;var h=yr&&yr.__spreadArray||function(b,c,g){if(g||2===arguments.length)for(var a=0,d=c.length,
f;a<d;a++)!f&&a in c||(f||(f=Array.prototype.slice.call(c,0,a)),f[a]=c[a]);return b.concat(f||Array.prototype.slice.call(c))};Object.defineProperty(yr,"__esModule",{value:!0});yr.FileHandle=void 0;var l=function(){function b(c,g){this.vol=c;this.fd=g}b.prototype.appendFile=function(c,g){return e(this.vol,"appendFile")(this.fd,c,g)};b.prototype.chmod=function(c){return e(this.vol,"fchmod")(this.fd,c)};b.prototype.chown=function(c,g){return e(this.vol,"fchown")(this.fd,c,g)};b.prototype.close=function(){return e(this.vol,
"close")(this.fd)};b.prototype.datasync=function(){return e(this.vol,"fdatasync")(this.fd)};b.prototype.read=function(c,g,a,d){return e(this.vol,"read",function(f){return{bytesRead:f,buffer:c}})(this.fd,c,g,a,d)};b.prototype.readFile=function(c){return e(this.vol,"readFile")(this.fd,c)};b.prototype.stat=function(c){return e(this.vol,"fstat")(this.fd,c)};b.prototype.sync=function(){return e(this.vol,"fsync")(this.fd)};b.prototype.truncate=function(c){return e(this.vol,"ftruncate")(this.fd,c)};b.prototype.utimes=
function(c,g){return e(this.vol,"futimes")(this.fd,c,g)};b.prototype.write=function(c,g,a,d){return e(this.vol,"write",function(f){return{bytesWritten:f,buffer:c}})(this.fd,c,g,a,d)};b.prototype.writeFile=function(c,g){return e(this.vol,"writeFile")(this.fd,c,g)};return b}();yr.FileHandle=l;yr.default=function(b){return"undefined"===typeof Promise?null:{FileHandle:l,access:function(c,g){return e(b,"access")(c,g)},appendFile:function(c,g,a){return e(b,"appendFile")(c instanceof l?c.fd:c,g,a)},chmod:function(c,
g){return e(b,"chmod")(c,g)},chown:function(c,g,a){return e(b,"chown")(c,g,a)},copyFile:function(c,g,a){return e(b,"copyFile")(c,g,a)},lchmod:function(c,g){return e(b,"lchmod")(c,g)},lchown:function(c,g,a){return e(b,"lchown")(c,g,a)},link:function(c,g){return e(b,"link")(c,g)},lstat:function(c,g){return e(b,"lstat")(c,g)},mkdir:function(c,g){return e(b,"mkdir")(c,g)},mkdtemp:function(c,g){return e(b,"mkdtemp")(c,g)},open:function(c,g,a){return e(b,"open",function(d){return new l(b,d)})(c,g,a)},readdir:function(c,
g){return e(b,"readdir")(c,g)},readFile:function(c,g){return e(b,"readFile")(c instanceof l?c.fd:c,g)},readlink:function(c,g){return e(b,"readlink")(c,g)},realpath:function(c,g){return e(b,"realpath")(c,g)},rename:function(c,g){return e(b,"rename")(c,g)},rmdir:function(c){return e(b,"rmdir")(c)},stat:function(c,g){return e(b,"stat")(c,g)},symlink:function(c,g,a){return e(b,"symlink")(c,g,a)},truncate:function(c,g){return e(b,"truncate")(c,g)},unlink:function(c){return e(b,"unlink")(c)},utimes:function(c,
g,a){return e(b,"utimes")(c,g,a)},writeFile:function(c,g,a){return e(b,"writeFile")(c instanceof l?c.fd:c,g,a)}}};return yr}function w0(){function e(c,g){c=c[g];return 0<g&&("/"===c||b&&"\\"===c)}function h(c){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;if(b){var a=c;if("string"!==typeof a)throw new TypeError("expected a string");a=a.replace(/[\\\/]+/g,"/");if(!1!==g)if(g=a,a=g.length-1,2>a)a=g;else{for(;e(g,a);)a--;a=g.substr(0,a+1)}return a.replace(/^([a-zA-Z]+:|\.\/)/,"")}return c}
if(HQ)return qx;HQ=!0;var l=yk;Object.defineProperty(qx,"__esModule",{value:!0});qx.unixify=h;qx.correctPath=function(c){return h(c.replace(/^\\\\\?\\.:\\/,"\\"))};var b="win32"===l.platform;return qx}function IQ(){function e(zd,Eb,cc,Xc){void 0===Eb&&(Eb="");void 0===cc&&(cc="");void 0===Xc&&(Xc="");var Ae="";cc&&(Ae=" '"+cc+"'");Xc&&(Ae+=" -> '"+Xc+"'");switch(zd){case "ENOENT":return"ENOENT: no such file or directory, "+Eb+Ae;case "EBADF":return"EBADF: bad file descriptor, "+Eb+Ae;case "EINVAL":return"EINVAL: invalid argument, "+
Eb+Ae;case "EPERM":return"EPERM: operation not permitted, "+Eb+Ae;case "EPROTO":return"EPROTO: protocol error, "+Eb+Ae;case "EEXIST":return"EEXIST: file already exists, "+Eb+Ae;case "ENOTDIR":return"ENOTDIR: not a directory, "+Eb+Ae;case "EISDIR":return"EISDIR: illegal operation on a directory, "+Eb+Ae;case "EACCES":return"EACCES: permission denied, "+Eb+Ae;case "ENOTEMPTY":return"ENOTEMPTY: directory not empty, "+Eb+Ae;case "EMFILE":return"EMFILE: too many open files, "+Eb+Ae;case "ENOSYS":return"ENOSYS: function not implemented, "+
Eb+Ae;default:return zd+": error occurred, "+Eb+Ae}}function h(zd,Eb,cc,Xc,Ae){void 0===Eb&&(Eb="");void 0===cc&&(cc="");void 0===Xc&&(Xc="");void 0===Ae&&(Ae=Error);Eb=new Ae(e(zd,Eb,cc,Xc));Eb.code=zd;return Eb}function l(zd){if("number"===typeof zd)return zd;if("string"===typeof zd){var Eb=vk[zd];if("undefined"!==typeof Eb)return Eb}throw new na.TypeError("ERR_INVALID_OPT_VALUE","flags",zd);}function b(zd,Eb){if(Eb){var cc=typeof Eb;switch(cc){case "string":zd=Object.assign({},zd,{encoding:Eb});
break;case "object":zd=Object.assign({},zd,Eb);break;default:throw TypeError("Expected options to be either an object or a string, but got "+cc+" instead");}}else return zd;"buffer"!==zd.encoding&&(0,Fd.assertEncoding)(zd.encoding);return zd}function c(zd){return function(Eb){return b(zd,Eb)}}function g(zd){if("function"!==typeof zd)throw TypeError(Fj.CB);return zd}function a(zd){return function(Eb,cc){return"function"===typeof Eb?[zd(),Eb]:[zd(Eb),g(cc)]}}function d(zd){if("string"!==typeof zd&&
!xa.Buffer.isBuffer(zd)){try{if(!(zd instanceof Uk.URL))throw new TypeError(Fj.PATH_STR);}catch(Xc){throw new TypeError(Fj.PATH_STR);}if(""!==zd.hostname)throw new na.TypeError("ERR_INVALID_FILE_URL_HOST",Lb.default.platform);zd=zd.pathname;for(var Eb=0;Eb<zd.length;Eb++)if("%"===zd[Eb]){var cc=zd.codePointAt(Eb+2)|32;if("2"===zd[Eb+1]&&102===cc)throw new na.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters");}zd=decodeURIComponent(zd)}zd=String(zd);q(zd);return zd}function f(zd,
Eb){return(zd=Io(zd,Eb).substr(1))?zd.split(rf):[]}function k(zd){return f(d(zd))}function n(zd,Eb){void 0===Eb&&(Eb=Fd.ENCODING_UTF8);return xa.Buffer.isBuffer(zd)?zd:zd instanceof Uint8Array?(0,xa.bufferFrom)(zd):(0,xa.bufferFrom)(String(zd),Eb)}function p(zd,Eb){return Eb&&"buffer"!==Eb?zd.toString(Eb):zd}function q(zd,Eb){if(-1!==(""+zd).indexOf("\x00")){zd=Error("Path must be a string without null bytes");zd.code="ENOENT";if("function"!==typeof Eb)throw zd;Lb.default.nextTick(Eb,zd);return!1}return!0}
function r(zd,Eb){zd="number"===typeof zd?zd:"string"===typeof zd?parseInt(zd,8):Eb?r(Eb):void 0;if("number"!==typeof zd||isNaN(zd))throw new TypeError(Fj.MODE_INT);return zd}function u(zd){if(zd>>>0!==zd)throw TypeError(Fj.FD);}function x(zd){if("string"===typeof zd&&+zd==zd)return+zd;if(zd instanceof Date)return zd.getTime()/1E3;if(isFinite(zd))return 0>zd?Date.now()/1E3:zd;throw Error("Cannot parse time: "+zd);}function y(zd){if("number"!==typeof zd)throw TypeError(Fj.UID);}function D(zd){if("number"!==
typeof zd)throw TypeError(Fj.GID);}function H(zd){function Eb(Xc,Ae){for(var cg in Ae){var wh=Ae[cg],Pk=zi(Xc,cg);"string"===typeof wh?cc[Pk]=wh:"object"===typeof wh&&null!==wh&&0<Object.keys(wh).length?Eb(Pk,wh):cc[Pk]=null}}var cc={};Eb("",zd);return cc}function I(zd){zd.emit("stop")}function N(zd){Dm=(0,xa.bufferAllocUnsafe)(zd);Dm.used=0}function J(zd,Eb,cc){if(!(this instanceof J))return new J(zd,Eb,cc);this._vol=zd;cc=Object.assign({},b(cc,{}));void 0===cc.highWaterMark&&(cc.highWaterMark=65536);
Xb.Readable.call(this,cc);this.path=d(Eb);this.fd=void 0===cc.fd?null:cc.fd;this.flags=void 0===cc.flags?"r":cc.flags;this.mode=void 0===cc.mode?438:cc.mode;this.start=cc.start;this.end=cc.end;this.autoClose=void 0===cc.autoClose?!0:cc.autoClose;this.pos=void 0;this.bytesRead=0;if(void 0!==this.start){if("number"!==typeof this.start)throw new TypeError('"start" option must be a Number');if(void 0===this.end)this.end=Infinity;else if("number"!==typeof this.end)throw new TypeError('"end" option must be a Number');
if(this.start>this.end)throw Error('"start" option must be <= "end" option');this.pos=this.start}"number"!==typeof this.fd&&this.open();this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}function sa(zd){this.close()}function ja(zd,Eb,cc){if(!(this instanceof ja))return new ja(zd,Eb,cc);this._vol=zd;cc=Object.assign({},b(cc,{}));Xb.Writable.call(this,cc);this.path=d(Eb);this.fd=void 0===cc.fd?null:cc.fd;this.flags=void 0===cc.flags?"w":cc.flags;this.mode=void 0===cc.mode?438:cc.mode;
this.start=cc.start;this.autoClose=void 0===cc.autoClose?!0:!!cc.autoClose;this.pos=void 0;this.bytesWritten=0;if(void 0!==this.start){if("number"!==typeof this.start)throw new TypeError('"start" option must be a Number');if(0>this.start)throw Error('"start" must be >= zero');this.pos=this.start}cc.encoding&&this.setDefaultEncoding(cc.encoding);"number"!==typeof this.fd&&this.open();this.once("finish",function(){this.autoClose&&this.close()})}if(JQ)return rk;JQ=!0;var Ha=rk&&rk.__extends||function(){var zd=
function(Eb,cc){zd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Xc,Ae){Xc.__proto__=Ae}||function(Xc,Ae){for(var cg in Ae)Object.prototype.hasOwnProperty.call(Ae,cg)&&(Xc[cg]=Ae[cg])};return zd(Eb,cc)};return function(Eb,cc){function Xc(){this.constructor=Eb}if("function"!==typeof cc&&null!==cc)throw new TypeError("Class extends value "+String(cc)+" is not a constructor or null");zd(Eb,cc);Eb.prototype=null===cc?Object.create(cc):(Xc.prototype=cc.prototype,new Xc)}}(),Qa=rk&&rk.__spreadArray||
function(zd,Eb,cc){if(cc||2===arguments.length)for(var Xc=0,Ae=Eb.length,cg;Xc<Ae;Xc++)!cg&&Xc in Eb||(cg||(cg=Array.prototype.slice.call(Eb,0,Xc)),cg[Xc]=Eb[Xc]);return zd.concat(cg||Array.prototype.slice.call(Eb))};Object.defineProperty(rk,"__esModule",{value:!0});rk.FSWatcher=rk.StatWatcher=rk.Volume=rk.toUnixTimestamp=rk.bufferToEncoding=rk.dataToBuffer=rk.dataToStr=rk.pathToSteps=rk.filenameToSteps=rk.pathToFilename=rk.flagsToNumber=rk.FLAGS=void 0;var ec=Vl,mc=s0(),hc=dG(),Ua=xQ(),xa=eG(),rc=
zQ(),Lb=CQ(),Ac=t0(),Xb=yn,qd=px(),La=Dl,Fd=vQ(),na=tQ(),Va=Dg,yd=v0(),me=ec.resolve,ta=qd.constants.O_RDONLY,za=qd.constants.O_WRONLY,W=qd.constants.O_RDWR,ea=qd.constants.O_CREAT,Kb=qd.constants.O_EXCL,V=qd.constants.O_TRUNC,Oa=qd.constants.O_APPEND,U=qd.constants.O_SYNC,fd=qd.constants.O_DIRECTORY,Td=qd.constants.F_OK,nf=qd.constants.COPYFILE_EXCL,Je=qd.constants.COPYFILE_FICLONE_FORCE;ec=ec.posix?ec.posix:ec;var rf=ec.sep,fh=ec.relative,zi=ec.join,Sh=ec.dirname,Hi="win32"===Lb.default.platform,
Fj={PATH_STR:"path must be a string or Buffer",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"},
vk;(function(zd){zd[zd.r=ta]="r";zd[zd["r+"]=W]="r+";zd[zd.rs=ta|U]="rs";zd[zd.sr=zd.rs]="sr";zd[zd["rs+"]=W|U]="rs+";zd[zd["sr+"]=zd["rs+"]]="sr+";zd[zd.w=za|ea|V]="w";zd[zd.wx=za|ea|V|Kb]="wx";zd[zd.xw=zd.wx]="xw";zd[zd["w+"]=W|ea|V]="w+";zd[zd["wx+"]=W|ea|V|Kb]="wx+";zd[zd["xw+"]=zd["wx+"]]="xw+";zd[zd.a=za|Oa|ea]="a";zd[zd.ax=za|Oa|ea|Kb]="ax";zd[zd.xa=zd.ax]="xa";zd[zd["a+"]=W|Oa|ea]="a+";zd[zd["ax+"]=W|Oa|ea|Kb]="ax+";zd[zd["xa+"]=zd["ax+"]]="xa+"})(vk=rk.FLAGS||(rk.FLAGS={}));rk.flagsToNumber=
l;ec={encoding:"utf8"};var Hl=c(ec),pl=a(Hl),pk=c({flag:"r"}),Sk={encoding:"utf8",mode:438,flag:vk[vk.w]},L=c(Sk),Ka={encoding:"utf8",mode:438,flag:vk[vk.a]},B=c(Ka),Y=a(B),nb=c(ec),ld=a(nb),ue={mode:511,recursive:!1},pg=function(zd){return"number"===typeof zd?Object.assign({},ue,{mode:zd}):Object.assign({},ue,zd)},Kg={recursive:!1},uh=c({encoding:"utf8",withFileTypes:!1}),fj=a(uh),Mj={bigint:!1},Ck=function(zd){void 0===zd&&(zd={});return Object.assign({},Mj,zd)},un=function(zd,Eb){return"function"===
typeof zd?[Ck(),zd]:[Ck(zd),g(Eb)]};rk.pathToFilename=d;var Io=function(zd,Eb){void 0===Eb&&(Eb=Lb.default.cwd());return me(Eb,zd)};if(Hi){var qq=Io,rx=w0().unixify;Io=function(zd,Eb){return rx(qq(zd,Eb))}}rk.filenameToSteps=f;rk.pathToSteps=k;rk.dataToStr=function(zd,Eb){void 0===Eb&&(Eb=Fd.ENCODING_UTF8);return xa.Buffer.isBuffer(zd)?zd.toString(Eb):zd instanceof Uint8Array?(0,xa.bufferFrom)(zd).toString(Eb):String(zd)};rk.dataToBuffer=n;rk.bufferToEncoding=p;rk.toUnixTimestamp=x;ec=function(){function zd(Eb){void 0===
Eb&&(Eb={});this.ino=0;this.inodes={};this.releasedInos=[];this.fds={};this.releasedFds=[];this.maxFiles=1E4;this.openFiles=0;this.promisesApi=(0,yd.default)(this);this.statWatchers={};this.props=Object.assign({Node:mc.Node,Link:mc.Link,File:mc.File},Eb);Eb=this.createLink();Eb.setNode(this.createNode(!0));var cc=this;this.StatWatcher=function(Xc){function Ae(){return Xc.call(this,cc)||this}Ha(Ae,Xc);return Ae}($o);this.ReadStream=function(Xc){function Ae(){for(var cg=[],wh=0;wh<arguments.length;wh++)cg[wh]=
arguments[wh];return Xc.apply(this,Qa([cc],cg,!1))||this}Ha(Ae,Xc);return Ae}(J);this.WriteStream=function(Xc){function Ae(){for(var cg=[],wh=0;wh<arguments.length;wh++)cg[wh]=arguments[wh];return Xc.apply(this,Qa([cc],cg,!1))||this}Ha(Ae,Xc);return Ae}(ja);this.FSWatcher=function(Xc){function Ae(){return Xc.call(this,cc)||this}Ha(Ae,Xc);return Ae}(zr);this.root=Eb}zd.fromJSON=function(Eb,cc){var Xc=new zd;Xc.fromJSON(Eb,cc);return Xc};zd.fromNestedJSON=function(Eb,cc){var Xc=new zd;Xc.fromNestedJSON(Eb,
cc);return Xc};Object.defineProperty(zd.prototype,"promises",{get:function(){if(null===this.promisesApi)throw Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!1,configurable:!0});zd.prototype.createLink=function(Eb,cc,Xc,Ae){void 0===Xc&&(Xc=!1);if(!Eb)return new this.props.Link(this,null,"");if(!cc)throw Error("createLink: name cannot be empty");return Eb.createChild(cc,this.createNode(Xc,Ae))};zd.prototype.deleteLink=function(Eb){var cc=Eb.parent;return cc?
(cc.deleteChild(Eb),!0):!1};zd.prototype.newInoNumber=function(){var Eb=this.releasedInos.pop();return Eb?Eb:this.ino=(this.ino+1)%4294967295};zd.prototype.newFdNumber=function(){var Eb=this.releasedFds.pop();return"number"===typeof Eb?Eb:zd.fd--};zd.prototype.createNode=function(Eb,cc){void 0===Eb&&(Eb=!1);cc=new this.props.Node(this.newInoNumber(),cc);Eb&&cc.setIsDirectory();return this.inodes[cc.ino]=cc};zd.prototype.getNode=function(Eb){return this.inodes[Eb]};zd.prototype.deleteNode=function(Eb){Eb.del();
delete this.inodes[Eb.ino];this.releasedInos.push(Eb.ino)};zd.prototype.genRndStr=function(){var Eb=(Math.random()+1).toString(36).substr(2,6);return 6===Eb.length?Eb:this.genRndStr()};zd.prototype.getLink=function(Eb){return this.root.walk(Eb)};zd.prototype.getLinkOrThrow=function(Eb,cc){var Xc=f(Eb);Xc=this.getLink(Xc);if(!Xc)throw h("ENOENT",cc,Eb);return Xc};zd.prototype.getResolvedLink=function(Eb){Eb="string"===typeof Eb?f(Eb):Eb;for(var cc=this.root,Xc=0;Xc<Eb.length;){cc=cc.getChild(Eb[Xc]);
if(!cc)return null;var Ae=cc.getNode();Ae.isSymlink()?(Eb=Ae.symlink.concat(Eb.slice(Xc+1)),cc=this.root,Xc=0):Xc++}return cc};zd.prototype.getResolvedLinkOrThrow=function(Eb,cc){var Xc=this.getResolvedLink(Eb);if(!Xc)throw h("ENOENT",cc,Eb);return Xc};zd.prototype.resolveSymlinks=function(Eb){return this.getResolvedLink(Eb.steps.slice(1))};zd.prototype.getLinkAsDirOrThrow=function(Eb,cc){var Xc=this.getLinkOrThrow(Eb,cc);if(!Xc.getNode().isDirectory())throw h("ENOTDIR",cc,Eb);return Xc};zd.prototype.getLinkParent=
function(Eb){return this.root.walk(Eb,Eb.length-1)};zd.prototype.getLinkParentAsDirOrThrow=function(Eb,cc){Eb=Eb instanceof Array?Eb:f(Eb);var Xc=this.getLinkParent(Eb);if(!Xc)throw h("ENOENT",cc,rf+Eb.join(rf));if(!Xc.getNode().isDirectory())throw h("ENOTDIR",cc,rf+Eb.join(rf));return Xc};zd.prototype.getFileByFd=function(Eb){return this.fds[String(Eb)]};zd.prototype.getFileByFdOrThrow=function(Eb,cc){if(Eb>>>0!==Eb)throw TypeError(Fj.FD);Eb=this.getFileByFd(Eb);if(!Eb)throw h("EBADF",cc);return Eb};
zd.prototype.getNodeByIdOrCreate=function(Eb,cc,Xc){if("number"===typeof Eb){Eb=this.getFileByFd(Eb);if(!Eb)throw Error("File nto found");return Eb.node}var Ae=k(Eb),cg=this.getLink(Ae);if(cg)return cg.getNode();if(cc&ea&&(cc=this.getLinkParent(Ae)))return cg=this.createLink(cc,Ae[Ae.length-1],!1,Xc),cg.getNode();throw h("ENOENT","getNodeByIdOrCreate",d(Eb));};zd.prototype.wrapAsync=function(Eb,cc,Xc){var Ae=this;g(Xc);(0,rc.default)(function(){try{var cg=Eb.apply(Ae,cc)}catch(wh){Xc(wh);return}Xc(null,
cg)})};zd.prototype._toJSON=function(Eb,cc,Xc){var Ae;void 0===Eb&&(Eb=this.root);void 0===cc&&(cc={});var cg=!0,wh=Eb.children;Eb.getNode().isFile()&&(wh=(Ae={},Ae[Eb.getName()]=Eb.parent.getChild(Eb.getName()),Ae),Eb=Eb.parent);for(var Pk in wh){cg=!1;wh=Eb.getChild(Pk);if(!wh)throw Error("_toJSON: unexpected undefined");Ae=wh.getNode();Ae.isFile()?(wh=wh.getPath(),Xc&&(wh=fh(Xc,wh)),cc[wh]=Ae.getString()):Ae.isDirectory()&&this._toJSON(wh,cc,Xc)}Eb=Eb.getPath();Xc&&(Eb=fh(Xc,Eb));Eb&&cg&&(cc[Eb]=
null);return cc};zd.prototype.toJSON=function(Eb,cc,Xc){void 0===cc&&(cc={});void 0===Xc&&(Xc=!1);var Ae=[];if(Eb){Eb instanceof Array||(Eb=[Eb]);for(var cg=0;cg<Eb.length;cg++){var wh=d(Eb[cg]);(wh=this.getResolvedLink(wh))&&Ae.push(wh)}}else Ae.push(this.root);if(!Ae.length)return cc;for(cg=0;cg<Ae.length;cg++)wh=Ae[cg],this._toJSON(wh,cc,Xc?wh.getPath():"");return cc};zd.prototype.fromJSON=function(Eb,cc){void 0===cc&&(cc=Lb.default.cwd());for(var Xc in Eb){var Ae=Eb[Xc];Xc=Io(Xc,cc);if("string"===
typeof Ae){var cg=Sh(Xc);this.mkdirpBase(cg,511);this.writeFileSync(Xc,Ae)}else this.mkdirpBase(Xc,511)}};zd.prototype.fromNestedJSON=function(Eb,cc){this.fromJSON(H(Eb),cc)};zd.prototype.reset=function(){this.ino=0;this.inodes={};this.releasedInos=[];this.fds={};this.releasedFds=[];this.openFiles=0;this.root=this.createLink();this.root.setNode(this.createNode(!0))};zd.prototype.mountSync=function(Eb,cc){this.fromJSON(cc,Eb)};zd.prototype.openLink=function(Eb,cc,Xc){void 0===Xc&&(Xc=!0);if(this.openFiles>=
this.maxFiles)throw h("EMFILE","open",Eb.getPath());var Ae=Eb;Xc&&(Ae=this.resolveSymlinks(Eb));if(!Ae)throw h("ENOENT","open",Eb.getPath());Xc=Ae.getNode();if(Xc.isDirectory()){if((cc&(ta|W|za))!==ta)throw h("EISDIR","open",Eb.getPath());}else if(cc&fd)throw h("ENOTDIR","open",Eb.getPath());if(!(cc&za||Xc.canRead()))throw h("EACCES","open",Eb.getPath());Eb=new this.props.File(Eb,Xc,cc,this.newFdNumber());this.fds[Eb.fd]=Eb;this.openFiles++;cc&V&&Eb.truncate();return Eb};zd.prototype.openFile=function(Eb,
cc,Xc,Ae){void 0===Ae&&(Ae=!0);var cg=f(Eb),wh=Ae?this.getResolvedLink(cg):this.getLink(cg);if(!wh&&cc&ea){var Pk=this.getResolvedLink(cg.slice(0,cg.length-1));if(!Pk)throw h("ENOENT","open",rf+cg.join(rf));cc&ea&&"number"===typeof Xc&&(wh=this.createLink(Pk,cg[cg.length-1],!1,Xc))}if(wh)return this.openLink(wh,cc,Ae);throw h("ENOENT","open",Eb);};zd.prototype.openBase=function(Eb,cc,Xc,Ae){void 0===Ae&&(Ae=!0);cc=this.openFile(Eb,cc,Xc,Ae);if(!cc)throw h("ENOENT","open",Eb);return cc.fd};zd.prototype.openSync=
function(Eb,cc,Xc){void 0===Xc&&(Xc=438);Xc=r(Xc);Eb=d(Eb);cc=l(cc);return this.openBase(Eb,cc,Xc)};zd.prototype.open=function(Eb,cc,Xc,Ae){var cg=Xc;"function"===typeof Xc&&(cg=438,Ae=Xc);Xc=r(cg||438);Eb=d(Eb);cc=l(cc);this.wrapAsync(this.openBase,[Eb,cc,Xc],Ae)};zd.prototype.closeFile=function(Eb){this.fds[Eb.fd]&&(this.openFiles--,delete this.fds[Eb.fd],this.releasedFds.push(Eb.fd))};zd.prototype.closeSync=function(Eb){u(Eb);Eb=this.getFileByFdOrThrow(Eb,"close");this.closeFile(Eb)};zd.prototype.close=
function(Eb,cc){u(Eb);this.wrapAsync(this.closeSync,[Eb],cc)};zd.prototype.openFileOrGetById=function(Eb,cc,Xc){if("number"===typeof Eb){Eb=this.fds[Eb];if(!Eb)throw h("ENOENT");return Eb}return this.openFile(d(Eb),cc,Xc)};zd.prototype.readBase=function(Eb,cc,Xc,Ae,cg){return this.getFileByFdOrThrow(Eb).read(cc,Number(Xc),Number(Ae),cg)};zd.prototype.readSync=function(Eb,cc,Xc,Ae,cg){u(Eb);return this.readBase(Eb,cc,Xc,Ae,cg)};zd.prototype.read=function(Eb,cc,Xc,Ae,cg,wh){var Pk=this;g(wh);if(0===
Ae)return Lb.default.nextTick(function(){wh&&wh(null,0,cc)});(0,rc.default)(function(){try{var Em=Pk.readBase(Eb,cc,Xc,Ae,cg);wh(null,Em,cc)}catch(Fm){wh(Fm)}})};zd.prototype.readFileBase=function(Eb,cc,Xc){var Ae="number"===typeof Eb&&Eb>>>0===Eb;if(!Ae){var cg=d(Eb);cg=f(cg);if((cg=this.getResolvedLink(cg))&&cg.getNode().isDirectory())throw h("EISDIR","open",cg.getPath());Eb=this.openSync(Eb,cc)}try{var wh=p(this.getFileByFdOrThrow(Eb).getBuffer(),Xc)}finally{Ae||this.closeSync(Eb)}return wh};zd.prototype.readFileSync=
function(Eb,cc){cc=pk(cc);var Xc=l(cc.flag);return this.readFileBase(Eb,Xc,cc.encoding)};zd.prototype.readFile=function(Eb,cc,Xc){Xc=a(pk)(cc,Xc);cc=Xc[0];Xc=Xc[1];var Ae=l(cc.flag);this.wrapAsync(this.readFileBase,[Eb,Ae,cc.encoding],Xc)};zd.prototype.writeBase=function(Eb,cc,Xc,Ae,cg){return this.getFileByFdOrThrow(Eb,"write").write(cc,Xc,Ae,cg)};zd.prototype.writeSync=function(Eb,cc,Xc,Ae,cg){u(Eb);var wh="string"!==typeof cc;if(wh){var Pk=(Xc||0)|0;var Em=Ae;Xc=cg}else var Fm=Ae;cc=n(cc,Fm);wh?
"undefined"===typeof Em&&(Em=cc.length):(Pk=0,Em=cc.length);return this.writeBase(Eb,cc,Pk,Em,Xc)};zd.prototype.write=function(Eb,cc,Xc,Ae,cg,wh){var Pk=this;u(Eb);var Em=typeof cc,Fm=typeof Xc,dv=typeof Ae,Xs=typeof cg;if("string"!==Em)if("function"===Fm)var gm=Xc;else if("function"===dv){var Nq=Xc|0;gm=Ae}else if("function"===Xs){Nq=Xc|0;var ap=Ae;gm=cg}else{Nq=Xc|0;ap=Ae;var Ar=cg;gm=wh}else if("function"===Fm)gm=Xc;else if("function"===dv)Ar=Xc,gm=Ae;else if("function"===Xs){Ar=Xc;var ev=Ae;gm=
cg}var Br=n(cc,ev);"string"!==Em?"undefined"===typeof ap&&(ap=Br.length):(Nq=0,ap=Br.length);var Ys=g(gm);(0,rc.default)(function(){try{var fv=Pk.writeBase(Eb,Br,Nq,ap,Ar);"string"!==Em?Ys(null,fv,Br):Ys(null,fv,cc)}catch(Cr){Ys(Cr)}})};zd.prototype.writeFileBase=function(Eb,cc,Xc,Ae){var cg="number"===typeof Eb;Eb=cg?Eb:this.openBase(d(Eb),Xc,Ae);Ae=0;var wh=cc.length;Xc=Xc&Oa?void 0:0;try{for(;0<wh;){var Pk=this.writeSync(Eb,cc,Ae,wh,Xc);Ae+=Pk;wh-=Pk;void 0!==Xc&&(Xc+=Pk)}}finally{cg||this.closeSync(Eb)}};
zd.prototype.writeFileSync=function(Eb,cc,Xc){var Ae=L(Xc);Xc=l(Ae.flag);var cg=r(Ae.mode);cc=n(cc,Ae.encoding);this.writeFileBase(Eb,cc,Xc,cg)};zd.prototype.writeFile=function(Eb,cc,Xc,Ae){var cg=Xc;"function"===typeof Xc&&(cg=Sk,Ae=Xc);Xc=g(Ae);var wh=L(cg);cg=l(wh.flag);Ae=r(wh.mode);cc=n(cc,wh.encoding);this.wrapAsync(this.writeFileBase,[Eb,cc,cg,Ae],Xc)};zd.prototype.linkBase=function(Eb,cc){var Xc=f(Eb),Ae=this.getLink(Xc);if(!Ae)throw h("ENOENT","link",Eb,cc);var cg=f(cc);Xc=this.getLinkParent(cg);
if(!Xc)throw h("ENOENT","link",Eb,cc);cg=cg[cg.length-1];if(Xc.getChild(cg))throw h("EEXIST","link",Eb,cc);Eb=Ae.getNode();Eb.nlink++;Xc.createChild(cg,Eb)};zd.prototype.copyFileBase=function(Eb,cc,Xc){var Ae=this.readFileSync(Eb);if(Xc&nf&&this.existsSync(cc))throw h("EEXIST","copyFile",Eb,cc);if(Xc&Je)throw h("ENOSYS","copyFile",Eb,cc);this.writeFileBase(cc,Ae,vk.w,438)};zd.prototype.copyFileSync=function(Eb,cc,Xc){Eb=d(Eb);cc=d(cc);return this.copyFileBase(Eb,cc,(Xc||0)|0)};zd.prototype.copyFile=
function(Eb,cc,Xc,Ae){Eb=d(Eb);cc=d(cc);if("function"===typeof Xc)var cg=0;else cg=Xc,Xc=Ae;g(Xc);this.wrapAsync(this.copyFileBase,[Eb,cc,cg],Xc)};zd.prototype.linkSync=function(Eb,cc){Eb=d(Eb);cc=d(cc);this.linkBase(Eb,cc)};zd.prototype.link=function(Eb,cc,Xc){Eb=d(Eb);cc=d(cc);this.wrapAsync(this.linkBase,[Eb,cc],Xc)};zd.prototype.unlinkBase=function(Eb){var cc=f(Eb);cc=this.getLink(cc);if(!cc)throw h("ENOENT","unlink",Eb);if(cc.length)throw Error("Dir not empty...");this.deleteLink(cc);Eb=cc.getNode();
Eb.nlink--;0>=Eb.nlink&&this.deleteNode(Eb)};zd.prototype.unlinkSync=function(Eb){Eb=d(Eb);this.unlinkBase(Eb)};zd.prototype.unlink=function(Eb,cc){Eb=d(Eb);this.wrapAsync(this.unlinkBase,[Eb],cc)};zd.prototype.symlinkBase=function(Eb,cc){var Xc=f(cc),Ae=this.getLinkParent(Xc);if(!Ae)throw h("ENOENT","symlink",Eb,cc);Xc=Xc[Xc.length-1];if(Ae.getChild(Xc))throw h("EEXIST","symlink",Eb,cc);cc=Ae.createChild(Xc);cc.getNode().makeSymlink(f(Eb));return cc};zd.prototype.symlinkSync=function(Eb,cc,Xc){Eb=
d(Eb);cc=d(cc);this.symlinkBase(Eb,cc)};zd.prototype.symlink=function(Eb,cc,Xc,Ae){Xc=g("function"===typeof Xc?Xc:Ae);Eb=d(Eb);cc=d(cc);this.wrapAsync(this.symlinkBase,[Eb,cc],Xc)};zd.prototype.realpathBase=function(Eb,cc){var Xc=f(Eb);Xc=this.getResolvedLink(Xc);if(!Xc)throw h("ENOENT","realpath",Eb);return(0,Fd.strToEncoding)(Xc.getPath(),cc)};zd.prototype.realpathSync=function(Eb,cc){return this.realpathBase(d(Eb),nb(cc).encoding)};zd.prototype.realpath=function(Eb,cc,Xc){Xc=ld(cc,Xc);cc=Xc[0];
Xc=Xc[1];Eb=d(Eb);this.wrapAsync(this.realpathBase,[Eb,cc.encoding],Xc)};zd.prototype.lstatBase=function(Eb,cc){void 0===cc&&(cc=!1);var Xc=this.getLink(f(Eb));if(!Xc)throw h("ENOENT","lstat",Eb);return hc.default.build(Xc.getNode(),cc)};zd.prototype.lstatSync=function(Eb,cc){return this.lstatBase(d(Eb),Ck(cc).bigint)};zd.prototype.lstat=function(Eb,cc,Xc){Xc=un(cc,Xc);cc=Xc[0];Xc=Xc[1];this.wrapAsync(this.lstatBase,[d(Eb),cc.bigint],Xc)};zd.prototype.statBase=function(Eb,cc){void 0===cc&&(cc=!1);
var Xc=this.getResolvedLink(f(Eb));if(!Xc)throw h("ENOENT","stat",Eb);return hc.default.build(Xc.getNode(),cc)};zd.prototype.statSync=function(Eb,cc){return this.statBase(d(Eb),Ck(cc).bigint)};zd.prototype.stat=function(Eb,cc,Xc){Xc=un(cc,Xc);cc=Xc[0];Xc=Xc[1];this.wrapAsync(this.statBase,[d(Eb),cc.bigint],Xc)};zd.prototype.fstatBase=function(Eb,cc){void 0===cc&&(cc=!1);Eb=this.getFileByFd(Eb);if(!Eb)throw h("EBADF","fstat");return hc.default.build(Eb.node,cc)};zd.prototype.fstatSync=function(Eb,
cc){return this.fstatBase(Eb,Ck(cc).bigint)};zd.prototype.fstat=function(Eb,cc,Xc){cc=un(cc,Xc);this.wrapAsync(this.fstatBase,[Eb,cc[0].bigint],cc[1])};zd.prototype.renameBase=function(Eb,cc){var Xc=this.getLink(f(Eb));if(!Xc)throw h("ENOENT","rename",Eb,cc);var Ae=f(cc),cg=this.getLinkParent(Ae);if(!cg)throw h("ENOENT","rename",Eb,cc);(Eb=Xc.parent)&&Eb.deleteChild(Xc);Ae=Ae[Ae.length-1];Xc.steps=Qa(Qa([],cg.steps,!0),[Ae],!1);cg.setChild(Xc.getName(),Xc)};zd.prototype.renameSync=function(Eb,cc){Eb=
d(Eb);cc=d(cc);this.renameBase(Eb,cc)};zd.prototype.rename=function(Eb,cc,Xc){Eb=d(Eb);cc=d(cc);this.wrapAsync(this.renameBase,[Eb,cc],Xc)};zd.prototype.existsBase=function(Eb){return!!this.statBase(Eb)};zd.prototype.existsSync=function(Eb){try{return this.existsBase(d(Eb))}catch(cc){return!1}};zd.prototype.exists=function(Eb,cc){var Xc=this,Ae=d(Eb);if("function"!==typeof cc)throw Error(Fj.CB);(0,rc.default)(function(){try{cc(Xc.existsBase(Ae))}catch(cg){cc(!1)}})};zd.prototype.accessBase=function(Eb,
cc){this.getLinkOrThrow(Eb,"access")};zd.prototype.accessSync=function(Eb,cc){void 0===cc&&(cc=Td);Eb=d(Eb);this.accessBase(Eb,cc|0)};zd.prototype.access=function(Eb,cc,Xc){var Ae=Td;"function"!==typeof cc&&(Ae=cc|0,cc=g(Xc));Eb=d(Eb);this.wrapAsync(this.accessBase,[Eb,Ae],cc)};zd.prototype.appendFileSync=function(Eb,cc,Xc){void 0===Xc&&(Xc=Ka);Xc=B(Xc);Xc.flag&&Eb>>>0!==Eb||(Xc.flag="a");this.writeFileSync(Eb,cc,Xc)};zd.prototype.appendFile=function(Eb,cc,Xc,Ae){Ae=Y(Xc,Ae);Xc=Ae[0];Ae=Ae[1];Xc.flag&&
Eb>>>0!==Eb||(Xc.flag="a");this.writeFile(Eb,cc,Xc,Ae)};zd.prototype.readdirBase=function(Eb,cc){var Xc=f(Eb);Xc=this.getResolvedLink(Xc);if(!Xc)throw h("ENOENT","readdir",Eb);if(!Xc.getNode().isDirectory())throw h("ENOTDIR","scandir",Eb);if(cc.withFileTypes){var Ae=[];for(cg in Xc.children)(Eb=Xc.getChild(cg))&&Ae.push(Ua.default.build(Eb,cc.encoding));Hi||"buffer"===cc.encoding||Ae.sort(function(wh,Pk){return wh.name<Pk.name?-1:wh.name>Pk.name?1:0});return Ae}var cg=[];for(Ae in Xc.children)cg.push((0,
Fd.strToEncoding)(Ae,cc.encoding));Hi||"buffer"===cc.encoding||cg.sort();return cg};zd.prototype.readdirSync=function(Eb,cc){cc=uh(cc);Eb=d(Eb);return this.readdirBase(Eb,cc)};zd.prototype.readdir=function(Eb,cc,Xc){Xc=fj(cc,Xc);cc=Xc[0];Xc=Xc[1];Eb=d(Eb);this.wrapAsync(this.readdirBase,[Eb,cc],Xc)};zd.prototype.readlinkBase=function(Eb,cc){var Xc=this.getLinkOrThrow(Eb,"readlink").getNode();if(!Xc.isSymlink())throw h("EINVAL","readlink",Eb);Eb=rf+Xc.symlink.join(rf);return(0,Fd.strToEncoding)(Eb,
cc)};zd.prototype.readlinkSync=function(Eb,cc){cc=Hl(cc);Eb=d(Eb);return this.readlinkBase(Eb,cc.encoding)};zd.prototype.readlink=function(Eb,cc,Xc){Xc=pl(cc,Xc);cc=Xc[0];Xc=Xc[1];Eb=d(Eb);this.wrapAsync(this.readlinkBase,[Eb,cc.encoding],Xc)};zd.prototype.fsyncBase=function(Eb){this.getFileByFdOrThrow(Eb,"fsync")};zd.prototype.fsyncSync=function(Eb){this.fsyncBase(Eb)};zd.prototype.fsync=function(Eb,cc){this.wrapAsync(this.fsyncBase,[Eb],cc)};zd.prototype.fdatasyncBase=function(Eb){this.getFileByFdOrThrow(Eb,
"fdatasync")};zd.prototype.fdatasyncSync=function(Eb){this.fdatasyncBase(Eb)};zd.prototype.fdatasync=function(Eb,cc){this.wrapAsync(this.fdatasyncBase,[Eb],cc)};zd.prototype.ftruncateBase=function(Eb,cc){this.getFileByFdOrThrow(Eb,"ftruncate").truncate(cc)};zd.prototype.ftruncateSync=function(Eb,cc){this.ftruncateBase(Eb,cc)};zd.prototype.ftruncate=function(Eb,cc,Xc){var Ae="number"===typeof cc?cc:0;cc=g("number"===typeof cc?Xc:cc);this.wrapAsync(this.ftruncateBase,[Eb,Ae],cc)};zd.prototype.truncateBase=
function(Eb,cc){Eb=this.openSync(Eb,"r+");try{this.ftruncateSync(Eb,cc)}finally{this.closeSync(Eb)}};zd.prototype.truncateSync=function(Eb,cc){if(Eb>>>0===Eb)return this.ftruncateSync(Eb,cc);this.truncateBase(Eb,cc)};zd.prototype.truncate=function(Eb,cc,Xc){var Ae="number"===typeof cc?cc:0;cc=g("number"===typeof cc?Xc:cc);if(Eb>>>0===Eb)return this.ftruncate(Eb,Ae,cc);this.wrapAsync(this.truncateBase,[Eb,Ae],cc)};zd.prototype.futimesBase=function(Eb,cc,Xc){Eb=this.getFileByFdOrThrow(Eb,"futimes").node;
Eb.atime=new Date(1E3*cc);Eb.mtime=new Date(1E3*Xc)};zd.prototype.futimesSync=function(Eb,cc,Xc){this.futimesBase(Eb,x(cc),x(Xc))};zd.prototype.futimes=function(Eb,cc,Xc,Ae){this.wrapAsync(this.futimesBase,[Eb,x(cc),x(Xc)],Ae)};zd.prototype.utimesBase=function(Eb,cc,Xc){Eb=this.openSync(Eb,"r+");try{this.futimesBase(Eb,cc,Xc)}finally{this.closeSync(Eb)}};zd.prototype.utimesSync=function(Eb,cc,Xc){this.utimesBase(d(Eb),x(cc),x(Xc))};zd.prototype.utimes=function(Eb,cc,Xc,Ae){this.wrapAsync(this.utimesBase,
[d(Eb),x(cc),x(Xc)],Ae)};zd.prototype.mkdirBase=function(Eb,cc){var Xc=f(Eb);if(!Xc.length)throw h("EEXIST","mkdir",Eb);var Ae=this.getLinkParentAsDirOrThrow(Eb,"mkdir");Xc=Xc[Xc.length-1];if(Ae.getChild(Xc))throw h("EEXIST","mkdir",Eb);Ae.createChild(Xc,this.createNode(!0,cc))};zd.prototype.mkdirpBase=function(Eb,cc){Eb=f(Eb);for(var Xc=this.root,Ae=0;Ae<Eb.length;Ae++){var cg=Eb[Ae];if(!Xc.getNode().isDirectory())throw h("ENOTDIR","mkdir",Xc.getPath());var wh=Xc.getChild(cg);if(wh)if(wh.getNode().isDirectory())Xc=
wh;else throw h("ENOTDIR","mkdir",wh.getPath());else Xc=Xc.createChild(cg,this.createNode(!0,cc))}};zd.prototype.mkdirSync=function(Eb,cc){cc=pg(cc);var Xc=r(cc.mode,511);Eb=d(Eb);cc.recursive?this.mkdirpBase(Eb,Xc):this.mkdirBase(Eb,Xc)};zd.prototype.mkdir=function(Eb,cc,Xc){var Ae=pg(cc);cc=g("function"===typeof cc?cc:Xc);Xc=r(Ae.mode,511);Eb=d(Eb);Ae.recursive?this.wrapAsync(this.mkdirpBase,[Eb,Xc],cc):this.wrapAsync(this.mkdirBase,[Eb,Xc],cc)};zd.prototype.mkdirpSync=function(Eb,cc){this.mkdirSync(Eb,
{mode:cc,recursive:!0})};zd.prototype.mkdirp=function(Eb,cc,Xc){var Ae="function"===typeof cc?void 0:cc;cc=g("function"===typeof cc?cc:Xc);this.mkdir(Eb,{mode:Ae,recursive:!0},cc)};zd.prototype.mkdtempBase=function(Eb,cc,Xc){void 0===Xc&&(Xc=5);var Ae=Eb+this.genRndStr();try{return this.mkdirBase(Ae,511),(0,Fd.strToEncoding)(Ae,cc)}catch(cg){if("EEXIST"===cg.code){if(1<Xc)return this.mkdtempBase(Eb,cc,Xc-1);throw Error("Could not create temp dir.");}throw cg;}};zd.prototype.mkdtempSync=function(Eb,
cc){cc=Hl(cc).encoding;if(!Eb||"string"!==typeof Eb)throw new TypeError("filename prefix is required");q(Eb);return this.mkdtempBase(Eb,cc)};zd.prototype.mkdtemp=function(Eb,cc,Xc){Xc=pl(cc,Xc);cc=Xc[0].encoding;Xc=Xc[1];if(!Eb||"string"!==typeof Eb)throw new TypeError("filename prefix is required");q(Eb)&&this.wrapAsync(this.mkdtempBase,[Eb,cc],Xc)};zd.prototype.rmdirBase=function(Eb,cc){cc=Object.assign({},Kg,cc);var Xc=this.getLinkAsDirOrThrow(Eb,"rmdir");if(Xc.length&&!cc.recursive)throw h("ENOTEMPTY",
"rmdir",Eb);this.deleteLink(Xc)};zd.prototype.rmdirSync=function(Eb,cc){this.rmdirBase(d(Eb),cc)};zd.prototype.rmdir=function(Eb,cc,Xc){var Ae=Object.assign({},Kg,cc);cc=g("function"===typeof cc?cc:Xc);this.wrapAsync(this.rmdirBase,[d(Eb),Ae],cc)};zd.prototype.fchmodBase=function(Eb,cc){this.getFileByFdOrThrow(Eb,"fchmod").chmod(cc)};zd.prototype.fchmodSync=function(Eb,cc){this.fchmodBase(Eb,r(cc))};zd.prototype.fchmod=function(Eb,cc,Xc){this.wrapAsync(this.fchmodBase,[Eb,r(cc)],Xc)};zd.prototype.chmodBase=
function(Eb,cc){Eb=this.openSync(Eb,"r+");try{this.fchmodBase(Eb,cc)}finally{this.closeSync(Eb)}};zd.prototype.chmodSync=function(Eb,cc){cc=r(cc);Eb=d(Eb);this.chmodBase(Eb,cc)};zd.prototype.chmod=function(Eb,cc,Xc){cc=r(cc);Eb=d(Eb);this.wrapAsync(this.chmodBase,[Eb,cc],Xc)};zd.prototype.lchmodBase=function(Eb,cc){Eb=this.openBase(Eb,W,0,!1);try{this.fchmodBase(Eb,cc)}finally{this.closeSync(Eb)}};zd.prototype.lchmodSync=function(Eb,cc){cc=r(cc);Eb=d(Eb);this.lchmodBase(Eb,cc)};zd.prototype.lchmod=
function(Eb,cc,Xc){cc=r(cc);Eb=d(Eb);this.wrapAsync(this.lchmodBase,[Eb,cc],Xc)};zd.prototype.fchownBase=function(Eb,cc,Xc){this.getFileByFdOrThrow(Eb,"fchown").chown(cc,Xc)};zd.prototype.fchownSync=function(Eb,cc,Xc){y(cc);D(Xc);this.fchownBase(Eb,cc,Xc)};zd.prototype.fchown=function(Eb,cc,Xc,Ae){y(cc);D(Xc);this.wrapAsync(this.fchownBase,[Eb,cc,Xc],Ae)};zd.prototype.chownBase=function(Eb,cc,Xc){this.getResolvedLinkOrThrow(Eb,"chown").getNode().chown(cc,Xc)};zd.prototype.chownSync=function(Eb,cc,
Xc){y(cc);D(Xc);this.chownBase(d(Eb),cc,Xc)};zd.prototype.chown=function(Eb,cc,Xc,Ae){y(cc);D(Xc);this.wrapAsync(this.chownBase,[d(Eb),cc,Xc],Ae)};zd.prototype.lchownBase=function(Eb,cc,Xc){this.getLinkOrThrow(Eb,"lchown").getNode().chown(cc,Xc)};zd.prototype.lchownSync=function(Eb,cc,Xc){y(cc);D(Xc);this.lchownBase(d(Eb),cc,Xc)};zd.prototype.lchown=function(Eb,cc,Xc,Ae){y(cc);D(Xc);this.wrapAsync(this.lchownBase,[d(Eb),cc,Xc],Ae)};zd.prototype.watchFile=function(Eb,cc,Xc){Eb=d(Eb);var Ae=cc;"function"===
typeof Ae&&(Xc=cc,Ae=null);if("function"!==typeof Xc)throw Error('"watchFile()" requires a listener function');cc=5007;var cg=!0;Ae&&"object"===typeof Ae&&("number"===typeof Ae.interval&&(cc=Ae.interval),"boolean"===typeof Ae.persistent&&(cg=Ae.persistent));Ae=this.statWatchers[Eb];Ae||(Ae=new this.StatWatcher,Ae.start(Eb,cg,cc),this.statWatchers[Eb]=Ae);Ae.addListener("change",Xc);return Ae};zd.prototype.unwatchFile=function(Eb,cc){Eb=d(Eb);var Xc=this.statWatchers[Eb];Xc&&("function"===typeof cc?
Xc.removeListener("change",cc):Xc.removeAllListeners("change"),0===Xc.listenerCount("change")&&(Xc.stop(),delete this.statWatchers[Eb]))};zd.prototype.createReadStream=function(Eb,cc){return new this.ReadStream(Eb,cc)};zd.prototype.createWriteStream=function(Eb,cc){return new this.WriteStream(Eb,cc)};zd.prototype.watch=function(Eb,cc,Xc){Eb=d(Eb);var Ae=cc;"function"===typeof cc&&(Xc=cc,Ae=null);var cg=Hl(Ae);cc=cg.persistent;Ae=cg.recursive;cg=cg.encoding;void 0===cc&&(cc=!0);void 0===Ae&&(Ae=!1);
var wh=new this.FSWatcher;wh.start(Eb,cc,Ae,cg);Xc&&wh.addListener("change",Xc);return wh};zd.fd=2147483647;return zd}();rk.Volume=ec;var $o=function(zd){function Eb(cc){var Xc=zd.call(this)||this;Xc.onInterval=function(){try{var Ae=Xc.vol.statSync(Xc.filename);Xc.hasChanged(Ae)&&(Xc.emit("change",Ae,Xc.prev),Xc.prev=Ae)}finally{Xc.loop()}};Xc.vol=cc;return Xc}Ha(Eb,zd);Eb.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)};Eb.prototype.hasChanged=function(cc){return cc.mtimeMs>
this.prev.mtimeMs||cc.nlink!==this.prev.nlink?!0:!1};Eb.prototype.start=function(cc,Xc,Ae){void 0===Xc&&(Xc=!0);void 0===Ae&&(Ae=5007);this.filename=d(cc);this.setTimeout=Xc?setTimeout.bind("undefined"!==typeof globalThis?globalThis:x0):Ac.default;this.interval=Ae;this.prev=this.vol.statSync(this.filename);this.loop()};Eb.prototype.stop=function(){clearTimeout(this.timeoutRef);Lb.default.nextTick(I,this)};return Eb}(La.EventEmitter);rk.StatWatcher=$o;var Dm;Va.inherits(J,Xb.Readable);rk.ReadStream=
J;J.prototype.open=function(){var zd=this;this._vol.open(this.path,this.flags,this.mode,function(Eb,cc){Eb?(zd.autoClose&&zd.destroy&&zd.destroy(),zd.emit("error",Eb)):(zd.fd=cc,zd.emit("open",cc),zd.read())})};J.prototype._read=function(zd){if("number"!==typeof this.fd)return this.once("open",function(){this._read(zd)});if(!this.destroyed){(!Dm||128>Dm.length-Dm.used)&&N(this._readableState.highWaterMark);var Eb=Dm,cc=Math.min(Dm.length-Dm.used,zd),Xc=Dm.used;void 0!==this.pos&&(cc=Math.min(this.end-
this.pos+1,cc));if(0>=cc)return this.push(null);var Ae=this;this._vol.read(this.fd,Dm,Dm.used,cc,this.pos,function(cg,wh){cg?(Ae.autoClose&&Ae.destroy&&Ae.destroy(),Ae.emit("error",cg)):(cg=null,0<wh&&(Ae.bytesRead+=wh,cg=Eb.slice(Xc,Xc+wh)),Ae.push(cg))});void 0!==this.pos&&(this.pos+=cc);Dm.used+=cc}};J.prototype._destroy=function(zd,Eb){this.close(function(cc){Eb(zd||cc)})};J.prototype.close=function(zd){var Eb=this;if(zd)this.once("close",zd);if(this.closed||"number"!==typeof this.fd){if("number"!==
typeof this.fd){this.once("open",sa);return}return Lb.default.nextTick(function(){return Eb.emit("close")})}this.closed=!0;this._vol.close(this.fd,function(cc){cc?Eb.emit("error",cc):Eb.emit("close")});this.fd=null};Va.inherits(ja,Xb.Writable);rk.WriteStream=ja;ja.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(zd,Eb){zd?(this.autoClose&&this.destroy&&this.destroy(),this.emit("error",zd)):(this.fd=Eb,this.emit("open",Eb))}.bind(this))};ja.prototype._write=function(zd,
Eb,cc){if(!(zd instanceof xa.Buffer))return this.emit("error",Error("Invalid data"));if("number"!==typeof this.fd)return this.once("open",function(){this._write(zd,Eb,cc)});var Xc=this;this._vol.write(this.fd,zd,0,zd.length,this.pos,function(Ae,cg){if(Ae)return Xc.autoClose&&Xc.destroy&&Xc.destroy(),cc(Ae);Xc.bytesWritten+=cg;cc()});void 0!==this.pos&&(this.pos+=zd.length)};ja.prototype._writev=function(zd,Eb){if("number"!==typeof this.fd)return this.once("open",function(){this._writev(zd,Eb)});for(var cc=
this,Xc=zd.length,Ae=Array(Xc),cg=0,wh=0;wh<Xc;wh++){var Pk=zd[wh].chunk;Ae[wh]=Pk;cg+=Pk.length}Xc=xa.Buffer.concat(Ae);this._vol.write(this.fd,Xc,0,Xc.length,this.pos,function(Em,Fm){if(Em)return cc.destroy&&cc.destroy(),Eb(Em);cc.bytesWritten+=Fm;Eb()});void 0!==this.pos&&(this.pos+=cg)};ja.prototype._destroy=J.prototype._destroy;ja.prototype.close=J.prototype.close;ja.prototype.destroySoon=ja.prototype.end;var zr=function(zd){function Eb(cc){var Xc=zd.call(this)||this;Xc._filename="";Xc._filenameEncoded=
"";Xc._recursive=!1;Xc._encoding=Fd.ENCODING_UTF8;Xc._onNodeChange=function(){Xc._emit("change")};Xc._onParentChild=function(Ae){Ae.getName()===Xc._getName()&&Xc._emit("rename")};Xc._emit=function(Ae){Xc.emit("change",Ae,Xc._filenameEncoded)};Xc._persist=function(){Xc._timer=setTimeout(Xc._persist,1E6)};Xc._vol=cc;return Xc}Ha(Eb,zd);Eb.prototype._getName=function(){return this._steps[this._steps.length-1]};Eb.prototype.start=function(cc,Xc,Ae,cg){void 0===Xc&&(Xc=!0);void 0===Ae&&(Ae=!1);void 0===
cg&&(cg=Fd.ENCODING_UTF8);this._filename=d(cc);this._steps=f(this._filename);this._filenameEncoded=(0,Fd.strToEncoding)(this._filename);this._recursive=Ae;this._encoding=cg;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(wh){throw Xc=Error("watch "+this._filename+" "+wh.code),Xc.code=wh.code,Xc.errno=wh.code,Xc;}this._link.getNode().on("change",this._onNodeChange);this._link.on("child:add",this._onNodeChange);this._link.on("child:delete",this._onNodeChange);if(cc=this._link.parent)cc.setMaxListeners(cc.getMaxListeners()+
1),cc.on("child:delete",this._onParentChild);Xc&&this._persist()};Eb.prototype.close=function(){clearTimeout(this._timer);this._link.getNode().removeListener("change",this._onNodeChange);var cc=this._link.parent;cc&&cc.removeListener("child:delete",this._onParentChild)};return Eb}(La.EventEmitter);rk.FSWatcher=zr;return rk}function Un(e){throw Error(`Node.js fs ${e} is not supported by JSPM core in the browser`);}function KQ(e,h,l){let b=0;const c=new TextDecoder;Oq.watch(e,"utf8",()=>{const {size:g}=
Oq.fstatSync(h),a=fG.alloc(g-b);Oq.readSync(h,a,0,a.length,b);b=g;l(c.decode(a,{stream:!0}))})}function gG(e,h){if("file:"===e.protocol)return fQ(e);if("https:"===e.protocol||"http:"===e.protocol){const l="\\\\url\\"+e.href.replaceAll(/\//g,"\\\\");if(y0(l))return l;if(h)throw Error(`Cannot sync request URL ${e} via FS. JSPM FS support for network URLs requires using async FS methods or priming the MemFS cache first with an async request before a sync request.`);return(async()=>{var b=await fetch(e);
if(!b.ok)throw Error(`Unable to fetch ${e.href}, ${b.status}`);b=await b.arrayBuffer();z0(l,fG.from(b));return l})()}throw Error("URL "+e+" not supported in JSPM FS implementation.");}function rm(e){LQ.call(this||hG,e)}bd({$:Cl,A:ss,B:us,D:UB,E:SB,G:$c,J:vf,K:Wb,N:fa,O:lc,Q:ts,R:qu,U:ww,V:QB,X:RB,Y:yw,Z:Il,_:Cb,a:yj,a0:Bl,a2:nw,a3:Vy,a6:kr,a7:gr,a8:ye,aF:hu,aG:Ln,aI:vw,aN:vd,aO:qb,aP:Sd,aQ:uc,aR:ic,aS:Ed,aU:jo,aV:tq,aX:fg,aY:ms,aZ:ir,a_:ns,aa:ju,af:Sm,an:gA,ao:fA,ap:ix,aq:iu,ar:ad,as:dd,av:zs,ax:ps,
ay:Mo,b:wl,b0:Bq,b1:os,b4:gz,b5:sw,bD:pu,bE:lw,bF:ou,bG:fz,bI:Hh,bK:WB,bL:TB,bM:XB,bN:PB,bO:VB,bT:VC,bV:nu,ba:hx,bc:fx,be:mw,bf:fu,bg:sq,bj:qc,bk:Qe,bl:cd,bn:Th,bo:Pa,bp:Jc,bs:jk,bt:Aq,bx:Wu,by:Tp,bz:dx,c:ex,c1:ez,c2:jf,c3:He,c4:Vu,c6:async function(e=document.body){const {main:h,WORLD_CLASS:l=gv,TITLE:b}=await Dd.import("./landing-page.cp-2f37e6af.js");if(!Yp.default().world){let c=window.$world=window.$$world=new l({extent:wl(window.innerWidth,window.innerHeight),name:b});c.stealFocus=!0;Yp.default().setWorldRenderedOn(c,
e,window.prerenderNode)}System.trace=!1;h()},d:lr,i:Ve,j:gx,k:Am,m:db,o:nz,p:Us,r:ko,u:qj,w:am,x:hr,y:du,z:Lo});var Zs=window.lively.FreezerRuntime.recorderFor("lively.lang/closure.js");Zs.evalJS=Pc;Zs.parameterRegex=/function[^\(]*\(([^\)]*)\)|\(?([^\)=]*)\)?\s*=>/;var bp=bd("aE",function(){function e(h,l,b,c){Sd(this,e);this.originalFunc=h;this.varMapping=l||{};this.setFuncSource(b||h);this.setFuncProperties(h||c)}uc(e,null,[{key:"fromFunction",value:function(h,l){return new Zs.Closure(h,l||{})}},
{key:"fromSource",value:function(h,l){return new this(null,l||{},h)}}]);uc(e,[{key:"setFuncSource",value:function(h){return this.source=h="undefined"!==typeof lively&&lively.sourceTransform&&"function"===typeof lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder?lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder(h):String(h)}},{key:"getFuncSource",value:function(){return this.source||this.setFuncSource(this.originalFunc)}},{key:"hasFuncSource",value:function(){return this.source&&
!0}},{key:"getFunc",value:function(){return this.originalFunc||this.recreateFunc()}},{key:"getFuncProperties",value:function(){return this.funcProperties||(this.funcProperties={})}},{key:"setFuncProperties",value:function(h){var l=this.getFuncProperties(),b;for(b in h)h.hasOwnProperty(b)&&(l[b]=h[b])}},{key:"lookup",value:function(h){return this.varMapping[h]}},{key:"parameterNames",value:function(h){return"undefined"!==typeof lively&&lively.ast&&lively.ast.parseFunction?(lively.ast.parseFunction(h).params||
[]).map(function(l){return"Identifier"===l.type?l.name:l.left&&"Identifier"===l.left.type?l.left.name:null}).filter(Boolean):(h=Zs.parameterRegex.exec(h))?(h[1]||h[2]||"").split(",").map(function(l){return l.trim()}):[]}},{key:"firstParameter",value:function(h){return this.parameterNames(h)[0]||null}},{key:"recreateFunc",value:function(){return this.recreateFuncFromSource(this.getFuncSource(),this.originalFunc)}},{key:"recreateFuncFromSource",value:function(h,l){l=[];var b="$super"===this.firstParameter(h);
for(c in this.varMapping)this.varMapping.hasOwnProperty(c)&&"this"!==c&&l.push("var "+c+" = this.varMapping."+c+";\n");var c="";0<l.length&&(c+=l.join("\n"));b&&(c+="(function superWrapperForClosure() { return ");c+="("+h+")";b&&(c+=".apply(this, [$super.bind(this)].concat(Array.from(arguments))) })");try{var g=Zs.evalJS.call(this,c)||this.couldNotCreateFunc(c);this.addFuncProperties(g);return this.originalFunc=g}catch(a){throw h="Cannot create function "+a+" src: "+c,console.error(h),Error(h);}}},
{key:"addFuncProperties",value:function(h){var l=this.getFuncProperties(),b;for(b in l)l.hasOwnProperty(b)&&(h[b]=l[b]);this.addClosureInformation(h)}},{key:"couldNotCreateFunc",value:function(h){var l="Could not recreate closure from source: \n"+h;console.error(l);return function(){throw Error(l);}}},{key:"asFunction",value:function(){return this.recreateFunc()}},{key:"addClosureInformation",value:function(h){h.hasLivelyClosure=!0;h.livelyClosure=this;return h}},{key:"isLivelyClosure",get:function(){return!0}},
{key:"doNotSerialize",get:function(){return["originalFunc"]}}]);return e}());Zs.Closure=bp;Zs["default"]=bp;var lg=window.lively.FreezerRuntime.recorderFor("lively.lang/function.js");lg.Empty=Db;lg.K=ab;lg.Null=eb;lg.False=kc;lg.True=Vb;lg.notYetImplemented=pb;lg.all=Nb;lg.own=zb;lg.argumentNames=rb;lg.qualifiedMethodName=Ib;lg.extractBody=da;lg.timeToRun=ka;lg.timeToRunN=va;lg.delay=Fa;lg.throttle=M;lg.debounce=Aa;lg.throttleNamed=wb;lg.debounceNamed=Na;lg.createQueue=hb;lg.workerWithCallbackQueue=
Bb;lg._composeAsyncDefaultEndCallback=function(e,h){e&&console.error("lively.lang.composeAsync error",e)};lg.composeAsync=ba;lg.compose=dc;lg.flip=la;lg.withNull=Fb;lg.waitFor=vb;lg.waitForAll=Ia;lg.curry=xb;lg.wrap=Rb;lg.getOriginal=yc;lg.wrapperChain=id;lg.replaceMethodForOneCall=ob;lg.once=Pb;lg.either=tb;lg.eitherNamed=xc;lg.evalJS=Pc;lg.fromString=nd;lg.asScript=Id;lg.asScriptOf=Hb;lg.addToObject=Kd;lg.setLocalVarValue=vc;lg.getVarMapping=Qc;lg.setProperty=kb;lg.functionNames=Cc;lg.localFunctionNames=
zc;lg.logErrors=Fc;lg.logCompletion=xd;lg.logCalls=Uc;lg.traceCalls=Md;lg.webkitStack=Ob;lg.objectMerge=Eh;lg.safeToString=Ti;lg.Closure=bp;lg._throttledByName={};lg._debouncedByName={};lg._queues={};lg._queueUntilCallbacks={};lg._eitherNameRegistry={};lg.binds=lg.asScript;var MQ=lg.binds;lg.Empty=Db;lg.K=ab;lg.Null=eb;lg.False=kc;lg.True=Vb;lg.notYetImplemented=pb;lg.withNull=Fb;lg.all=Nb;lg.own=zb;lg.argumentNames=rb;lg.qualifiedMethodName=Ib;lg.extractBody=da;lg.timeToRun=ka;lg.timeToRunN=va;lg.delay=
Fa;lg.throttle=M;lg.debounce=Aa;lg.throttleNamed=wb;lg.debounceNamed=Na;lg.createQueue=hb;lg.workerWithCallbackQueue=Bb;lg.composeAsync=ba;lg.compose=dc;lg.waitFor=vb;lg.waitForAll=Ia;lg.flip=la;lg.curry=xb;lg.wrap=Rb;lg.binds=MQ;lg.getOriginal=yc;lg.wrapperChain=id;lg.replaceMethodForOneCall=ob;lg.once=Pb;lg.either=tb;lg.eitherNamed=xc;lg.evalJS=Pc;lg.fromString=nd;lg.asScript=Id;lg.asScriptOf=Hb;lg.addToObject=Kd;lg.setLocalVarValue=vc;lg.getVarMapping=Qc;lg.setProperty=kb;lg.functionNames=Cc;lg.localFunctionNames=
zc;lg.logErrors=Fc;lg.logCompletion=xd;lg.logCalls=Uc;lg.traceCalls=Md;lg.webkitStack=Ob;var cp=Object.freeze({__proto__:null,Empty:Db,K:ab,Null:eb,False:kc,True:Vb,notYetImplemented:pb,withNull:Fb,all:Nb,own:zb,argumentNames:rb,qualifiedMethodName:Ib,extractBody:da,timeToRun:ka,timeToRunN:va,delay:Fa,throttle:M,debounce:Aa,throttleNamed:wb,debounceNamed:Na,createQueue:hb,workerWithCallbackQueue:Bb,composeAsync:ba,compose:dc,waitFor:vb,waitForAll:Ia,flip:la,curry:xb,wrap:Rb,binds:MQ,getOriginal:yc,
wrapperChain:id,replaceMethodForOneCall:ob,once:Pb,either:tb,eitherNamed:xc,evalJS:Pc,fromString:nd,asScript:Id,asScriptOf:Hb,addToObject:Kd,setLocalVarValue:vc,getVarMapping:Qc,setProperty:kb,functionNames:Cc,localFunctionNames:zc,logErrors:Fc,logCompletion:xd,logCalls:Uc,traceCalls:Md,webkitStack:Ob});bd("l",cp);var Dr=window.lively.FreezerRuntime.recorderFor("lively.lang/Group.js");Dr.groupBy=Sc;var hv=function(){function e(){Sd(this,e)}uc(e,[{key:"toArray",value:function(){return this.reduceGroups(function(h,
l,b){return h.concat([b])},[])}},{key:"forEach",value:function(h,l){var b=this;Object.keys(b).forEach(function(c){b[c].forEach(h.bind(l,c))});return b}},{key:"forEachGroup",value:function(h,l){var b=this;Object.keys(b).forEach(function(c){h.call(l,c,b[c])});return b}},{key:"map",value:function(h,l){var b=new Dr.Group;this.forEachGroup(function(c,g){b[c]=g.map(h.bind(l,c))});return b}},{key:"mapGroups",value:function(h,l){var b=new Dr.Group;this.forEachGroup(function(c,g){b[c]=h.call(l,c,g)});return b}},
{key:"keys",value:function(){return Object.keys(this)}},{key:"reduceGroups",value:function(h,l,b){this.forEachGroup(function(c,g){l=h.call(b,l,c,g)});return l}},{key:"count",value:function(){return this.reduceGroups(function(h,l,b){h[l]=b.length;return h},{})}}],[{key:"fromArray",value:function(h,l,b){for(var c=new Dr.Group,g=0,a=h.length;g<a;g++){var d=l.call(b,h[g],g);Dr.Group.prototype.hasOwnProperty(d)&&(d="_"+d);c[d]||(c[d]=[]);c[d].push(h[g])}return c}},{key:"by",get:function(){return Dr.groupBy}}]);
return e}();Dr.Group=hv;Dr["default"]=hv;var Ef=window.lively.FreezerRuntime.recorderFor("lively.lang/array.js");Ef.range=Le;Ef.withN=We;Ef.genN=xe;Ef.binarySearchFor=Fg;Ef.findAndGet=Zc;Ef.filterByKey=rd;Ef.grep=ti;Ef.mask=dg;Ef.reject=Of;Ef.rejectByKey=mg;Ef.without=wf;Ef.withoutAll=mf;Ef.uniq=Mb;Ef.uniqBy=gd;Ef.uniqByKey=Vd;Ef.compact=sf;Ef.mutableCompact=hg;Ef.zip=bh;Ef.interpose=Qf;Ef.invoke=he;Ef.pluck=Uf;Ef.equals=$g;Ef.deepEquals=Ta;Ef.isSorted=th;Ef.sortBy=Be;Ef.sortByKey=cb;Ef.reversed=
Yb;Ef.reMatches=de;Ef.first=P;Ef.last=pa;Ef.intersect=wa;Ef.union=Ea;Ef.pushAt=ia;Ef.removeAt=Ca;Ef.remove=w;Ef.pushAll=ma;Ef.pushAllAt=ua;Ef.pushIfNotIncluded=ha;Ef.replaceAt=ra;Ef.clear=mb;Ef.isSubset=E;Ef.doAndContinue=R;Ef.nestedDelay=Ya;Ef.swap=gb;Ef.rotate=$b;Ef.groupBy=Sc;Ef.groupByKey=Ic;Ef.partition=Pd;Ef.batchify=Zd;Ef.toTuples=ge;Ef.combinationsPick=Ce;Ef.combinations=$e;Ef.take=pf;Ef.drop=ig;Ef.takeWhile=Xf;Ef.dropWhile=Vg;Ef.shuffle=Re;Ef.max=ae;Ef.min=Sb;Ef.sum=Hd;Ef.count=hf;Ef.histogram=
zf;Ef.clone=Gg;Ef.filter=vg;Ef.find=tg;Ef.map=pd;Ef.flat=Z;Ef.flatMap=Ga;Ef.slice=fb;Ef.objectEquals=oa;Ef.NullFunction=eb;Ef.Group=hv;Ef.permutations=function(){function e(h,l){return h.length?h.flatMap(function(b,c){return e(h.slice(0,c).concat(h.slice(c+1)),l.concat([b]))}):[l]}return function(h){return e(h,[])}}();var NQ=Ef.permutations;Ef.range=Le;Ef.withN=We;Ef.genN=xe;Ef.binarySearchFor=Fg;Ef.findAndGet=Zc;Ef.filterByKey=rd;Ef.grep=ti;Ef.mask=dg;Ef.reject=Of;Ef.rejectByKey=mg;Ef.without=wf;
Ef.withoutAll=mf;Ef.uniq=Mb;Ef.uniqBy=gd;Ef.uniqByKey=Vd;Ef.compact=sf;Ef.mutableCompact=hg;Ef.zip=bh;Ef.interpose=Qf;Ef.invoke=he;Ef.pluck=Uf;Ef.equals=$g;Ef.deepEquals=Ta;Ef.isSorted=th;Ef.sortBy=Be;Ef.sortByKey=cb;Ef.reversed=Yb;Ef.reMatches=de;Ef.first=P;Ef.last=pa;Ef.intersect=wa;Ef.union=Ea;Ef.pushAt=ia;Ef.removeAt=Ca;Ef.remove=w;Ef.pushAll=ma;Ef.pushAllAt=ua;Ef.pushIfNotIncluded=ha;Ef.replaceAt=ra;Ef.clear=mb;Ef.isSubset=E;Ef.doAndContinue=R;Ef.nestedDelay=Ya;Ef.swap=gb;Ef.rotate=$b;Ef.groupBy=
Sc;Ef.groupByKey=Ic;Ef.partition=Pd;Ef.batchify=Zd;Ef.toTuples=ge;Ef.permutations=NQ;Ef.combinationsPick=Ce;Ef.combinations=$e;Ef.take=pf;Ef.drop=ig;Ef.takeWhile=Xf;Ef.dropWhile=Vg;Ef.shuffle=Re;Ef.max=ae;Ef.min=Sb;Ef.sum=Hd;Ef.count=hf;Ef.histogram=zf;Ef.clone=Gg;Ef.flat=Z;Ef.filter=vg;Ef.find=tg;Ef.map=pd;Ef.flatMap=Ga;Ef.slice=fb;var aj=Object.freeze({__proto__:null,range:Le,withN:We,genN:xe,binarySearchFor:Fg,findAndGet:Zc,filterByKey:rd,grep:ti,mask:dg,reject:Of,rejectByKey:mg,without:wf,withoutAll:mf,
uniq:Mb,uniqBy:gd,uniqByKey:Vd,compact:sf,mutableCompact:hg,zip:bh,interpose:Qf,invoke:he,pluck:Uf,equals:$g,deepEquals:Ta,isSorted:th,sortBy:Be,sortByKey:cb,reversed:Yb,reMatches:de,first:P,last:pa,intersect:wa,union:Ea,pushAt:ia,removeAt:Ca,remove:w,pushAll:ma,pushAllAt:ua,pushIfNotIncluded:ha,replaceAt:ra,clear:mb,isSubset:E,doAndContinue:R,nestedDelay:Ya,swap:gb,rotate:$b,groupBy:Sc,groupByKey:Ic,partition:Pd,batchify:Zd,toTuples:ge,permutations:NQ,combinationsPick:Ce,combinations:$e,take:pf,
drop:ig,takeWhile:Xf,dropWhile:Vg,shuffle:Re,max:ae,min:Sb,sum:Hd,count:hf,histogram:zf,clone:Gg,flat:Z,filter:vg,find:tg,map:pd,flatMap:Ga,slice:fb});bd("s",aj);var ch=window.lively.FreezerRuntime.recorderFor("lively.lang/object.js");ch.print=ya;ch.indent=function(e,h,l){if(!l||0>=l)return e;for(;0<l;)l--,e=h+e;return e};ch.isArray=tc;ch.isElement=Mc;ch.isFunction=Cd;ch.isBoolean=Ee;ch.isString=bf;ch.isNumber=Oe;ch.isUndefined=Fe;ch.isRegExp=Pf;ch.isObject=eg;ch.isPrimitive=be;ch.isEmpty=v;ch.equals=
oa;ch.values=Oc;ch.select=Tb;ch.dissoc=ne;ch.addScript=Ye;ch.extend=Kf;ch.clone=jg;ch.extract=Og;ch.inspect=te;ch.merge=Eh;ch.deepMerge=$h;ch.sortKeysWithBeforeAndAfterConstraints=Gi;ch.inherit=Ng;ch.valuesInPropertyHierarchy=Ii;ch.mergePropertyInHierarchy=fi;ch.deepCopy=Ji;ch.typeStringOf=gi;ch.isMutableType=xj;ch.shortPrintStringOf=yg;ch.safeToString=Ti;ch.asObject=ke;ch.newKeyIn=Mg;ch.adoptObject=Hh;ch.functionFromString=nd;ch.asScriptOf=Hb;ch.argumentNames=rb;ch.arrayDeepEquals=Ta;ch.isSubset=
E;ch.getOwnPropertyDescriptors="function"===typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:function(e){var h={},l;for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&Object.defineProperty(h,l,{configurable:!0,enumerable:!0,writable:!0,value:Object.getOwnPropertyDescriptor(e,l)});return h};ch.keys=Object.keys;ch.setPrototypeOf="function"===typeof Object.setPrototypeOf?function(e,h){return Object.setPrototypeOf(e,h)}:function(e,h){return e.__proto__=h};var OQ=ch.keys,PQ=
ch.getOwnPropertyDescriptors,iG=ch.setPrototypeOf;ch.isArray=tc;ch.isElement=Mc;ch.isFunction=Cd;ch.isBoolean=Ee;ch.isString=bf;ch.isNumber=Oe;ch.isUndefined=Fe;ch.isRegExp=Pf;ch.isObject=eg;ch.isPrimitive=be;ch.isEmpty=v;ch.equals=oa;ch.keys=OQ;ch.values=Oc;ch.select=Tb;ch.dissoc=ne;ch.addScript=Ye;ch.extend=Kf;ch.clone=jg;ch.extract=Og;ch.inspect=te;ch.merge=Eh;ch.deepMerge=$h;ch.inherit=Ng;ch.valuesInPropertyHierarchy=Ii;ch.mergePropertyInHierarchy=fi;ch.sortKeysWithBeforeAndAfterConstraints=Gi;
ch.deepCopy=Ji;ch.typeStringOf=gi;ch.shortPrintStringOf=yg;ch.isMutableType=xj;ch.safeToString=Ti;ch.asObject=ke;ch.newKeyIn=Mg;ch.getOwnPropertyDescriptors=PQ;ch.adoptObject=Hh;ch.setPrototypeOf=iG;var bj=Object.freeze({__proto__:null,isArray:tc,isElement:Mc,isFunction:Cd,isBoolean:Ee,isString:bf,isNumber:Oe,isUndefined:Fe,isRegExp:Pf,isObject:eg,isPrimitive:be,isEmpty:v,equals:oa,keys:OQ,values:Oc,select:Tb,dissoc:ne,addScript:Ye,extend:Kf,clone:jg,extract:Og,inspect:te,merge:Eh,deepMerge:$h,inherit:Ng,
valuesInPropertyHierarchy:Ii,mergePropertyInHierarchy:fi,sortKeysWithBeforeAndAfterConstraints:Gi,deepCopy:Ji,typeStringOf:gi,shortPrintStringOf:yg,isMutableType:xj,safeToString:Ti,asObject:ke,newKeyIn:Mg,getOwnPropertyDescriptors:PQ,adoptObject:Hh,setPrototypeOf:iG});bd("v",bj);var sx={};(function(){var e=[].slice;var h={0:{8:{_:"an"},9:{_:"an"},"-":{1:{1:{_:"an"}},4:{" ":{_:"a"},_:"an"},6:{"-":{_:"an"}},8:{_:"an"}}},1:{1:{0:{_:"a"},1:{_:"a"},2:{_:"a"},3:{_:"a"},4:{_:"a"},5:{_:"a"},6:{_:"a"},7:{_:"a"},
8:{_:"a"},9:{_:"a"},_:"an",".":{4:{_:"a"}}},8:{0:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},7:{_:"an"},8:{_:"an"},9:{_:"an"},_:"a"},1:{"-":{_:"a"}," ":{_:"a"}},2:{"-":{_:"a"}," ":{_:"a"}},3:{"-":{_:"a"}," ":{_:"a"}},4:{"-":{_:"a"}," ":{_:"a"}},5:{"-":{_:"a"}," ":{_:"a"}},6:{"-":{_:"a"}," ":{_:"a"}},7:{"-":{_:"a"}," ":{_:"a"}},8:{"-":{_:"a"}," ":{_:"a"}},9:{"-":{_:"a"}," ":{_:"a"}},_:"an"}},8:{0:{0:{x:{_:"a"}}},9:{0:{_:"a"}},_:"an",",":{1:{_:"a"}}},"`":{a:{_:"an"}},
"\u00a3":{8:{_:"an"}},"\u221e":{_:"an"},a:{" ":{_:"a"},b:{o:{u:{t:{"-":{_:"an"}},_:"a"}}},g:{a:{i:{_:"a"}}},l:{"-":{I:{_:"a"}},g:{u:{_:"a"}},t:{h:{_:"a"}}},m:{o:{n:{_:"a"}}},n:{" ":{_:"a"},d:{a:{_:"an"},e:{_:"an"},r:{_:"an"},_:"a"},o:{t:{_:"a"}},y:{w:{_:"a"}}},p:{r:{e:{_:"a"}}},r:{e:{" ":{_:"a"},":":{_:"a"}},t:{"\u00ed":{_:"a"}}},_:"an"},A:{$:{_:"a"},A:{A:{_:"a"}},n:{d:{a:{l:{u:{c:{_:"a"}}}}}},r:{m:{a:{t:{_:"a"}}}},s:{t:{u:{r:{i:{a:{s:{_:"a"}}}}}}},t:{h:{l:{e:{t:{i:{_:"an"}}},o:{_:"an"},_:"a"}}},
U:{$:{_:"a"},D:{_:"a"},S:{C:{_:"a"}}},_:"an"},"\u00c1":{_:"an"},"\u00e1":{";":{_:"an"}},"\u00e0":{_:"an"},"\u00c4":{_:"an"},"\u0101":{_:"an"},"\u00c5":{_:"an"},"\u00e6":{_:"an"},"\u00c6":{n:{_:"a"},_:"an"},D:{"\u00fa":{n:{_:"a"}}},e:{".":{g:{_:"a"}},a:{c:{h:{" ":{_:"a"}}}},i:{t:{h:{e:{r:{" ":{_:"a"},".":{_:"a"}}}}}},l:{"-":{_:"a"},l:{a:{_:"a"}}},m:{p:{e:{z:{_:"a"}}}},n:{o:{u:{g:{_:"a"}}}},u:{p:{" ":{_:"an"}},_:"a"},w:{_:"a"},x:{i:{s:{t:{s:{_:"a"}}}}},_:"an"},E:{m:{p:{e:{z:{_:"a"}}}},n:{a:{m:{_:"a"}}},
s:{p:{a:{d:{_:"an"}},e:{_:"an"},o:{_:"an"},_:"a"}},u:{l:{_:"an"},_:"a"},U:{R:{_:"a"}},_:"an"},"\u00e9":{g:{_:"a"},t:{a:{_:"an"},u:{_:"an"},_:"a"},_:"an"},"\u00c9":{_:"an"},f:{"-":{_:"an"}," ":{_:"an"},"/":{_:"an"},M:{_:"an"},p:{_:"an"},t:{_:"an"}},F:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"#":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},"\u201d":{_:"an"},A:{C:{_:"a"},D:{_:"a"},I:{R:{_:"a"}},L:{_:"a"},
M:{_:"a"},N:{_:"a"},P:{_:"a"},Q:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},c:{_:"an"},D:{_:"an"},E:{C:{_:"an"},I:{_:"an"}},F:{" ":{_:"a"},_:"an"},f:{_:"an"},h:{_:"an"},H:{_:"an"},I:{A:{T:{_:"a"},_:"an"},D:{" ":{_:"an"}},R:{" ":{_:"an"}},S:{" ":{_:"an"}}},K:{_:"an"},L:{C:{_:"an"},N:{_:"an"},P:{_:"an"}},M:{R:{_:"a"},_:"an"},O:{" ":{_:"an"},I:{" ":{_:"an"}}},P:{".":{_:"a"},"?":{_:"a"},C:{"?":{_:"a"}},_:"an"},R:{C:{_:"an"},S:{_:"an"}},S:{_:"an"},T:{S:{_:"a"},T:{_:"a"},_:"an"},
U:{" ":{_:"an"},",":{_:"an"},".":{_:"an"}},V:{_:"an"},W:{D:{_:"a"},_:"an"},X:{_:"an"},Y:{_:"an"},"\u03c3":{_:"an"}},G:{h:{a:{e:{_:"an"},i:{_:"an"}}}},h:{"'":{_:"an"},"-":{U:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},C:{_:"an"},e:{i:{r:{a:{_:"a"},_:"an"}}},i:{m:{s:{_:"an"}},s:{t:{o:{r:{i:{c:{_:"a"}}}}}}},o:{m:{a:{_:"an"},m:{_:"an"}},n:{e:{y:{_:"a"}},k:{_:"a"},v:{_:"a"},_:"an"},r:{s:{" ":{_:"an"}}},u:{r:{_:"an"}}},t:{t:{p:{" ":{_:"an"}},_:"a"},_:"an"}},H:{1:{_:"an"},2:{_:"an"},3:{_:"an"},
4:{_:"an"},5:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{_:"a"},_:"an"},"+":{_:"an"},a:{b:{i:{l:{i:{t:{a:{t:{i:{o:{n:{s:{_:"an"}}}}}}}}}}}},B:{_:"an"},C:{_:"an"},D:{B:{_:"a"},_:"an"},e:{i:{r:{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{D:{_:"a"},G:{_:"a"},M:{_:"a"},P:{_:"a"},_:"an"},L:{A:{"-":{D:{_:"a"}}},_:"an"},M:{_:"an"},N:{_:"an"},o:{n:{d:{_:"a"},e:{s:{_:"an"},_:"a"},g:{_:"a"},k:{_:"a"},o:{l:{_:"a"}},_:"an"},u:{r:{_:"an"}}},O:{" ":{_:"an"},
V:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{T:{_:"a"},_:"an"},S:{" ":{_:"a"},R:{_:"a"},T:{_:"a"},_:"an"},T:{P:{_:"a"},_:"an"},V:{_:"an"},W:{T:{_:"an"}}},i:{".":{e:{_:"a"}},b:{n:{_:"a"}},f:{" ":{_:"a"}},i:{_:"a"},n:{c:{l:{u:{d:{i:{_:"a"}}}}},d:{i:{c:{a:{t:{e:{s:{_:"a"}}}}}}},s:{t:{e:{a:{d:{"?":{_:"an"}},_:"a"}}}}},s:{" ":{_:"a"},".":{_:"a"}},t:{" ":{_:"a"}},u:{_:"a"},_:"an"},I:{"-":{A:{_:"a"},I:{_:"a"}},I:{I:{_:"a"}},l:{b:{_:"a"}},M:{H:{_:"a"}},m:{a:{m:{s:{_:"a"}}}},R:{"\u00a3":{_:"a"}},s:{l:{a:{m:{" ":{_:"a"},
",":{_:"a"},".":{_:"a"}},n:{d:{s:{_:"a"}}}}}},_:"an"},"\u0130":{_:"an"},J:{i:{a:{n:{_:"a"},_:"an"}}},k:{u:{" ":{_:"an"}}},l:{" ":{_:"an"},'"':{_:"an"},p:{_:"an"}},L:{1:{_:"an"},2:{_:"an"},3:{_:"an"},5:{_:"an"},"'":{A:{_:"a"},_:"an"},"-":{a:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},a:{e:{_:"an"},o:{i:{g:{_:"an"}}}},A:{" ":{_:"an"},L:{_:"an"},P:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"a"},E:{_:"a"},G:{_:"a"},O:{_:"a"},P:{_:"a"},T:{_:"a"},
_:"an"},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{R:{_:"an"}},L:{_:"an"},M:{X:{_:"a"},_:"an"},N:{_:"an"},o:{c:{h:{a:{_:"an"}}}},O:{E:{_:"an"}},P:{_:"an"},R:{_:"an"},S:{_:"an"},T:{_:"an"},U:{" ":{_:"an"}},V:{_:"an"},X:{_:"an"},Z:{_:"an"}},m:{"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},a:{k:{e:{s:{" ":{_:"an"}}}}},b:{_:"an"},e:{i:{n:{_:"an"}},n:{t:{i:{o:{n:{s:{_:"an"}}}}}}},f:{_:"an"},p:{_:"an"},R:{_:"an"},t:{_:"an"}},M:{1:{9:{0:{_:"an"},_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},
6:{_:"an"},7:{_:"an"},8:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{t:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{".":{S:{_:"a"}}},_:"an"},"/":{_:"an"},A:{C:{_:"a"},D:{_:"a"},F:{_:"a"},G:{_:"a"},J:{_:"a"},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},X:{_:"a"},Y:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},D:{_:"an"},e:{"-":{_:"an"}},E:{d:{_:"an"},n:{_:"an"},P:{_:"an"}},F:{_:"an"},f:{_:"an"},G:{_:"an"},H:{_:"an"},h:{_:"an"},i:{e:{_:"an"}},I:{5:{_:"an"},6:{_:"an"},
" ":{_:"an"},A:{_:"an"},T:{_:"an"}},K:{_:"an"},L:{_:"an"},M:{T:{_:"a"},_:"an"},N:{_:"an"},o:{U:{_:"an"}},O:{" ":{_:"an"},T:{" ":{_:"an"}},U:{_:"an"}},P:{_:"an"},R:{_:"an"},S:{_:"an"},s:{c:{_:"an"}},T:{R:{_:"a"},_:"an"},U:{V:{_:"an"}},V:{_:"an"},X:{_:"an"}},N:{4:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{a:{_:"a"},S:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},".":{Y:{_:"a"},_:"an"},"=":{_:"an"},"\u00b2":{_:"an"},a:{o:{_:"an"}},A:{" ":{_:"an"},A:{F:{_:"a"},_:"an"},I:{_:"an"},S:{L:{_:"an"}}},B:{_:"an"},
C:{_:"an"},D:{_:"an"},E:{A:{_:"an"},H:{_:"an"},S:{" ":{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{C:{_:"a"},L:{_:"a"},M:{H:{_:"an"},_:"a"},N:{_:"a"},S:{_:"a"},_:"an"},J:{C:{_:"an"}},K:{_:"an"},L:{S:{_:"a"},_:"an"},M:{_:"an"},N:{R:{_:"an"},T:{_:"an"}},P:{O:{V:{"-":{_:"an"}},_:"a"},_:"an"},R:{J:{_:"a"},T:{_:"a"},_:"an"},S:{W:{_:"a"},_:"an"},T:{$:{_:"a"},_:"an"},U:{S:{_:"an"}},V:{_:"an"},v:{_:"an"},W:{A:{_:"an"}},X:{_:"an"},Y:{P:{_:"an"},U:{_:"an"}}},n:{"-":{_:"an"},"\u2212":{_:"an"}," ":{_:"an"},
'"':{_:"an"},"&":{_:"an"},",":{_:"an"},"+":{_:"an"},"\u00d7":{_:"an"},d:{a:{_:"an"}},p:{a:{_:"an"}},t:{_:"an"},V:{_:"an"},W:{_:"an"}},o:{b:{r:{_:"a"}},c:{c:{u:{r:{s:{_:"a"}}}},h:{o:{_:"a"}}},f:{" ":{_:"a"}},n:{"-":{_:"an"},"/":{_:"an"},b:{_:"an"},c:{o:{_:"an"}},d:{_:"an"},e:{r:{_:"an"}},g:{_:"an"},i:{_:"an"},l:{_:"an"},m:{_:"an"},o:{_:"an"},r:{_:"an"},s:{_:"an"},t:{_:"an"},u:{_:"an"},w:{_:"an"},y:{_:"an"},_:"a"},r:{" ":{_:"a"},",":{_:"a"}},u:{i:{_:"a"}},_:"an"},O:{b:{e:{r:{s:{t:{" ":{_:"an"},l:{_:"an"}},
_:"a"}}}},l:{v:{_:"a"}},n:{e:{i:{_:"an"},_:"a"}},N:{E:{_:"a"}},o:{p:{_:"a"}},u:{i:{_:"a"}},_:"an"},"\u00d3":{_:"an"},"\u00d6":{_:"an"},"\u00f6":{_:"an"},"\u014c":{_:"an"},"\u014d":{_:"an"},P:{h:{o:{b:{_:"an"},i:{_:"an"}}}},r:{"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},".":{_:"an"},e:{f:{e:{r:{s:{_:"an"}}}}},f:{_:"an"},m:{_:"an"},s:{_:"an"}},R:{1:{0:{_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},
",":{_:"an"},".":{C:{_:"a"},_:"an"},"/":{_:"an"},A:{" ":{_:"an"},F:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{" ":{_:"an"},R:{_:"an"}},F:{_:"an"},f:{_:"an"},G:{_:"an"},H:{S:{_:"an"}},I:{A:{_:"an"},C:{" ":{_:"an"}}},J:{_:"an"},K:{_:"an"},L:{" ":{_:"a"},_:"an"},M:{1:{_:"a"},_:"an"},N:{G:{_:"a"},_:"an"},O:{T:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{_:"an"},S:{" ":{_:"a"},")":{_:"a"},",":{_:"a"},".":{_:"a"},"?":{_:"a"},T:{_:"a"},_:"an"},T:{_:"an"},U:{_:"an"},V:{_:"an"},X:{_:"an"}},s:{"-":{_:"an"},'"':{_:"an"},
")":{_:"an"},",":{_:"an"},".":{_:"an"},a:{y:{s:{_:"an"}}},i:{c:{h:{_:"an"}}},p:{3:{_:"an"},r:{o:{t:{_:"an"}}}},s:{h:{_:"an"}},t:{a:{t:{e:{s:{" ":{_:"an"},":":{_:"an"}}}}}},v:{a:{_:"a"},e:{_:"a"},_:"an"}},S:{1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{W:{_:"a"},_:"an"},",":{_:"an"},".":{B:{_:"an"},M:{_:"an"},O:{_:"an"}},"\u201d":{_:"an"},A:{"-":{1:{_:"a"},_:"an"}," ":{_:"an"},C:{D:{_:"an"}},E:{_:"an"},S:{E:{_:"a"},_:"an"},
T:{" ":{_:"an"},B:{_:"an"}}},B:{_:"an"},C:{A:{" ":{_:"an"}},C:{_:"an"},M:{_:"an"},O:{" ":{_:"an"}},R:{A:{_:"a"},_:"an"},T:{_:"an"}},D:{_:"an"},E:{" ":{_:"an"},C:{O:{_:"a"},R:{_:"a"},_:"an"},I:{_:"an"},O:{_:"an"}},F:{_:"an"},G:{_:"an"},H:{2:{_:"an"},3:{_:"an"},"-":{_:"an"}},I:{" ":{_:"an"}},J:{_:"an"},K:{_:"an"},L:{A:{_:"a"},I:{_:"a"},O:{_:"a"},_:"an"},M:{A:{_:"a"},E:{" ":{_:"an"},_:"a"},I:{_:"a"},_:"an"},N:{A:{_:"a"},E:{_:"a"},O:{_:"a"},_:"an"},O:{"(":{_:"an"},A:{" ":{_:"an"},I:{_:"an"}},E:{_:"an"},
I:{_:"an"},S:{_:"an"},V:{_:"an"}},P:{A:{C:{_:"a"},D:{_:"a"},M:{_:"a"},N:{_:"a"},R:{_:"a"}},E:{" ":{_:"an"},_:"a"},I:{C:{_:"a"}},O:{_:"a"},U:{_:"a"},_:"an"},R:{_:"an"},S:{_:"an"},T:{"-":{_:"an"},A:{" ":{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},F:{_:"an"},L:{_:"an"},M:{_:"an"},S:{_:"an"},V:{_:"an"}},u:{r:{a:{" ":{_:"an"}}}},U:{B:{_:"a"},L:{_:"a"},N:{_:"a"},P:{_:"a"},S:{_:"a"},_:"an"},V:{_:"an"},W:{F:{_:"an"},P:{_:"an"},R:{_:"an"}},X:{S:{_:"a"},_:"an"}},t:{"-":{S:{_:"an"}},S:{_:"an"}},T:{a:{v:{e:{s:{_:"an"}}}},
"\u00e0":{_:"an"}},u:{"-":{_:"a"}," ":{_:"a"},'"':{_:"a"},".":{_:"a"},b:{e:{_:"an"},_:"a"},f:{_:"a"},k:{a:{_:"an"},_:"a"},l:{u:{_:"a"}},m:{" ":{_:"a"}},n:{" ":{_:"a"},a:{" ":{_:"a"},n:{a:{_:"an"},n:{_:"an"},s:{_:"an"},t:{_:"an"},_:"a"},r:{y:{_:"a"}}},e:{" ":{_:"a"}},i:{c:{o:{r:{p:{_:"an"}}}},d:{i:{_:"a"},_:"an"},m:{o:{_:"a"},_:"an"},n:{_:"an"},v:{o:{_:"an"}},_:"a"},l:{e:{s:{_:"a"}}}},p:{o:{_:"a"}},r:{a:{_:"a"},e:{_:"a"},i:{_:"a"},l:{_:"a"},o:{_:"a"}},s:{"-":{_:"an"}," ":{_:"an"},h:{_:"an"},_:"a"},
t:{m:{_:"an"},t:{_:"an"},_:"a"},v:{_:"a"},w:{_:"a"},_:"an"},U:{1:{_:"an"},"-":{B:{o:{_:"a"},_:"an"}},a:{_:"an"},b:{i:{_:"a"},_:"an"},D:{P:{"-":{_:"an"}}},d:{_:"an"},g:{l:{_:"an"}},h:{_:"an"},i:{_:"an"},l:{i:{_:"a"},_:"an"},m:{_:"an"},M:{N:{_:"an"}},n:{"-":{_:"an"},a:{n:{_:"a"},_:"an"},b:{_:"an"},c:{_:"an"},d:{_:"an"},e:{s:{_:"a"},_:"an"},f:{_:"an"},g:{_:"an"},h:{_:"an"},i:{d:{_:"an"},n:{_:"an"}},k:{_:"an"},l:{_:"an"},m:{_:"an"},n:{_:"an"},o:{_:"an"},p:{_:"an"},r:{_:"an"},s:{_:"an"},t:{e:{r:{s:{_:"a"}}},
_:"an"},u:{_:"an"},w:{_:"an"}},p:{_:"an"},r:{a:{_:"a"},i:{_:"a"},u:{g:{u:{a:{y:{a:{n:{"-":{_:"an"}}}}}}},k:{_:"an"},_:"a"},_:"an"},s:{h:{_:"an"},t:{_:"an"}},t:{n:{_:"an"},o:{"-":{_:"an"}},r:{_:"an"},t:{_:"an"}},x:{_:"an"},z:{_:"an"}},"\u00fc":{_:"an"},"\u00dc":{_:"an"},V:{I:{I:{_:"an"}}},x:{a:{_:"a"},e:{_:"a"},i:{_:"a"},o:{_:"a"},x:{_:"a"},y:{_:"a"},_:"an"},X:{a:{_:"a"},A:{_:"a"},e:{_:"a"},h:{_:"a"},i:{_:"a"},I:{V:{_:"a"},X:{_:"a"}},o:{_:"a"},u:{_:"a"},U:{_:"a"},V:{_:"a"},X:{" ":{_:"an"},_:"a"},y:{_:"a"},
_:"an"},Y:{p:{_:"an"}},"\u03b1":{_:"an"},"\u03b5":{_:"an"},"\u03c9":{_:"an"}};var l=function(b,c,g){null==c&&(c=h);null==g&&(g="a");if(null==b)return g;var a=b.slice(0,1);c=c[a];return null!=a&&null!=c?l(b.slice(1),c,c._||g):g};sx={find:l,articlize:function(){var b=1<=arguments.length?e.call(arguments,0):[];var c;var g=[];var a=0;for(c=b.length;a<c;a++){var d=b[a];null!=d&&g.push(l(d)+" "+d)}return 1===b.length?g[0]:g}}}).call(sx);var A0=sx;sx.find;sx.articlize;var of=window.lively.FreezerRuntime.recorderFor("lively.lang/string.js");
of.format=Zf;of.formatFromArray=z;of.indent=C;of.minIndent=K;of.changeIndent=T;of.quote=O;of.articlize=qa;of.findArticle=Ba;of.print=ib;of.printNested=Ub;of.pad=pc;of.printTable=Dc;of.printTree=kd;of.toArray=Ad;of.lines=Rd;of.paragraphs=cf;of.nonEmptyLines=Ud;of.tokens=Ge;of.tableize=Se;of.unescapeCharacterEntities=mh;of.toQueryParams=Rh;of.base64EncodeUnicode=dh;of.base64DecodeUnicode=eh;of.normalizePath=Rg;of.joinPath=$c;of.ensureFolder=vf;of.newUUID=ye;of.createDataURI=Yc;of.hashCode=Tc;of.md5=
td;of.reMatches=hd;of.stringMatch=aa;of.peekRight=Sa;of.peekLeft=Ma;of.lineIndexComputer=jb;of.lineNumberToIndexesComputer=Jb;of.lineRanges=gc;of.findLineWithIndexInLineRanges=ac;of.regexIndexOf=Kc;of.regexLastIndexOf=md;of.diff=ud;of.empty=oe;of.startsWithVowel=ze;of.withDecimalPrecision=Ue;of.capitalize=Me;of.camelCaseString=xf;of.camelize=lf;of.decamelize=Rf;of.truncate=Hg;of.truncateLeft=ng;of.regExpEscape=fg;of.succ=gg;of.digitValue=Wh;of.longestCommonSubstring=wg;of.applyChange=xh;of.applyChanges=
Qi;of.levenshtein=Di;of.inspectObject=te;of.min=Sb;of.last=pa;of.articles=A0;of.features={repeat:!!String.prototype.repeat,includes:!!String.prototype.includes,startsWith:!!String.prototype.startsWith,endsWith:!!String.prototype.endsWith};of.pathDotRe=/\/\.\//g;of.pathDoubleDotRe=/\/[^\/]+\/\.\./;of.pathDoubleSlashRe=/(^|[^:])[\/]+/g;of.urlStartRe=/^[a-z0-9-_\.]+:\/\//;of.slashEndRe=/\/+$/;of.newUUIDTemplate="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";of.newUUIDRe=/[xy]/g;of.newUUIDReplacer=function(e){var h=
16*Math.random()|0;return("x"==e?h:h&3|8).toString(16)};of.includes=of.features.includes?function(e,h){return e.includes(h)}:function(e,h){return-1<e.indexOf(h)};of.include=of.includes;of.startsWith=of.features.startsWith?function(e,h){return e.startsWith(h)}:function(e,h){return 0===e.indexOf(h)};of.endsWith=of.features.endsWith?function(e,h){return e.endsWith(h)}:function(e,h){var l=e.length-h.length;return 0<=l&&e.lastIndexOf(h)===l};of.times=of.features.repeat?function(e,h){return e.repeat(h)}:
function(e,h){return 1>h?"":Array(h+1).join(e)};var QQ=of.includes,RQ=of.include,SQ=of.startsWith,TQ=of.endsWith,UQ=of.times;of.format=Zf;of.formatFromArray=z;of.indent=C;of.minIndent=K;of.changeIndent=T;of.quote=O;of.articlize=qa;of.findArticle=Ba;of.print=ib;of.printNested=Ub;of.pad=pc;of.printTable=Dc;of.printTree=kd;of.toArray=Ad;of.lines=Rd;of.paragraphs=cf;of.nonEmptyLines=Ud;of.tokens=Ge;of.tableize=Se;of.unescapeCharacterEntities=mh;of.base64EncodeUnicode=dh;of.base64DecodeUnicode=eh;of.toQueryParams=
Rh;of.normalizePath=Rg;of.joinPath=$c;of.newUUID=ye;of.createDataURI=Yc;of.hashCode=Tc;of.md5=td;of.reMatches=hd;of.stringMatch=aa;of.peekRight=Sa;of.peekLeft=Ma;of.lineIndexComputer=jb;of.lineNumberToIndexesComputer=Jb;of.findLineWithIndexInLineRanges=ac;of.regexIndexOf=Kc;of.regexLastIndexOf=md;of.lineRanges=gc;of.diff=ud;of.empty=oe;of.includes=QQ;of.include=RQ;of.startsWith=SQ;of.startsWithVowel=ze;of.endsWith=TQ;of.withDecimalPrecision=Ue;of.capitalize=Me;of.camelCaseString=xf;of.camelize=lf;
of.truncate=Hg;of.truncateLeft=ng;of.regExpEscape=fg;of.succ=gg;of.digitValue=Wh;of.times=UQ;of.longestCommonSubstring=wg;of.applyChange=xh;of.applyChanges=Qi;of.levenshtein=Di;of.decamelize=Rf;of.ensureFolder=vf;var Xj=Object.freeze({__proto__:null,format:Zf,formatFromArray:z,indent:C,minIndent:K,changeIndent:T,quote:O,articlize:qa,findArticle:Ba,print:ib,printNested:Ub,pad:pc,printTable:Dc,printTree:kd,toArray:Ad,lines:Rd,paragraphs:cf,nonEmptyLines:Ud,tokens:Ge,tableize:Se,unescapeCharacterEntities:mh,
base64EncodeUnicode:dh,base64DecodeUnicode:eh,toQueryParams:Rh,normalizePath:Rg,joinPath:$c,newUUID:ye,createDataURI:Yc,hashCode:Tc,md5:td,reMatches:hd,stringMatch:aa,peekRight:Sa,peekLeft:Ma,lineIndexComputer:jb,lineNumberToIndexesComputer:Jb,findLineWithIndexInLineRanges:ac,regexIndexOf:Kc,regexLastIndexOf:md,lineRanges:gc,diff:ud,empty:oe,includes:QQ,include:RQ,startsWith:SQ,startsWithVowel:ze,endsWith:TQ,withDecimalPrecision:Ue,capitalize:Me,camelCaseString:xf,camelize:lf,truncate:Hg,truncateLeft:ng,
regExpEscape:fg,succ:gg,digitValue:Wh,times:UQ,longestCommonSubstring:wg,applyChange:xh,applyChanges:Qi,levenshtein:Di,decamelize:Rf,ensureFolder:vf});bd("t",Xj);var Kj=window.lively.FreezerRuntime.recorderFor("lively.lang/number.js");Kj.random=Zi;Kj.normalRandom=ni;Kj.randomSmallerInteger=Xd;Kj.humanReadableByteSize=ff;Kj.average=af;Kj.averageInc=Gf;Kj.median=Jh;Kj.between=ci;Kj.clamp=di;Kj.sort=vj;Kj.parseLength=pj;Kj.precision=kj;Kj.roundTo=Ih;Kj.detent=mk;Kj.toDegrees=fl;Kj.toRadians=Al;Kj.backoff=
rg;Kj.interpolate=Sg;Kj.convertLength=function(){function e(h,l){if("cm"===l)return h;if("mm"===l)return.1*h;if("in"===l)return 2.54*h;if("px"===l)return h*e(1/96,"in");if("pt"===l)return h*e(1/72,"in");if("pc"===l)return h*e(12,"pt")}return function g(l,b,c){return b===c?l:"cm"===c?e(l,b):"cm"===b?l/e(1,c):g(g(l,b,"cm"),"cm",c)}}();var VQ=Kj.convertLength;Kj.random=Zi;Kj.normalRandom=ni;Kj.randomSmallerInteger=Xd;Kj.humanReadableByteSize=ff;Kj.average=af;Kj.averageInc=Gf;Kj.median=Jh;Kj.between=
ci;Kj.sort=vj;Kj.parseLength=pj;Kj.convertLength=VQ;Kj.roundTo=Ih;Kj.detent=mk;Kj.toDegrees=fl;Kj.toRadians=Al;Kj.backoff=rg;Kj.interpolate=Sg;Kj.clamp=di;Kj.precision=kj;var Gm=Object.freeze({__proto__:null,random:Zi,normalRandom:ni,randomSmallerInteger:Xd,humanReadableByteSize:ff,average:af,averageInc:Gf,median:Jh,between:ci,sort:vj,parseLength:pj,convertLength:VQ,roundTo:Ih,detent:mk,toDegrees:fl,toRadians:Al,backoff:rg,interpolate:Sg,clamp:di,precision:kj});bd("b3",Gm);var El=window.lively.FreezerRuntime.recorderFor("lively.lang/properties.js");
El.all=Lj;El.allPropertyDescriptors=gl;El.allOwnPropertiesOrFunctions=ao;El.own=Dn;El.forEachOwn=xm;El.nameFor=Nl;El.values=En;El.ownValues=lq;El.any=lm;El.allProperties=yo;El.hash=Fl;El.all=Lj;El.allOwnPropertiesOrFunctions=ao;El.allPropertyDescriptors=gl;El.own=Dn;El.forEachOwn=xm;El.nameFor=Nl;El.values=En;El.ownValues=lq;El.any=lm;El.allProperties=yo;El.hash=Fl;var Pq=Object.freeze({__proto__:null,all:Lj,allOwnPropertiesOrFunctions:ao,allPropertyDescriptors:gl,own:Dn,forEachOwn:xm,nameFor:Nl,
values:En,ownValues:lq,any:lm,allProperties:yo,hash:Fl});bd("a4",Pq);var lp=window.lively.FreezerRuntime.recorderFor("lively.lang/date.js");lp.format=mq;lp.equals=mp;lp.relativeTo=bo;lp.dateFormat=function(){var e=function(){var h=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,l=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,b=/[^-+\dA-Z]/g,c=function(g,a){g=String(g);for(a=a||2;g.length<a;)g=
"0"+g;return g};return function(g,a,d){var f=e;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(g)||/\d/.test(g)||(a=g,g=void 0);g=g?new Date(g):new Date;if(isNaN(g))throw SyntaxError("invalid date");a=String(f.masks[a]||a||f.masks["default"]);"UTC:"==a.slice(0,4)&&(a=a.slice(4),d=!0);var k=d?"getUTC":"get",n=g[k+"Date"](),p=g[k+"Day"](),q=g[k+"Month"](),r=g[k+"FullYear"](),u=g[k+"Hours"](),x=g[k+"Minutes"](),y=g[k+"Seconds"]();k=g[k+"Milliseconds"]();var D=d?0:g.getTimezoneOffset(),
H={d:n,dd:c(n),ddd:f.i18n.dayNames[p],dddd:f.i18n.dayNames[p+7],m:q+1,mm:c(q+1),mmm:f.i18n.monthNames[q],mmmm:f.i18n.monthNames[q+12],yy:String(r).slice(2),yyyy:r,h:u%12||12,hh:c(u%12||12),H:u,HH:c(u),M:x,MM:c(x),s:y,ss:c(y),l:c(k,3),L:c(99<k?Math.round(k/10):k),t:12>u?"a":"p",tt:12>u?"am":"pm",T:12>u?"A":"P",TT:12>u?"AM":"PM",Z:d?"UTC":(String(g).match(l)||[""]).pop().replace(b,""),o:(0<D?"-":"+")+c(100*Math.floor(Math.abs(D)/60)+Math.abs(D)%60,4),S:["th","st","nd","rd"][3<n%10?0:(10!=n%100-n%10)*
n%10]};return a.replace(h,function(I){return I in H?H[I]:I.slice(1,I.length-1)})}}();e.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};e.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};return e}();var WQ=lp.dateFormat;lp.format=mq;lp.equals=mp;lp.relativeTo=bo;lp.dateFormat=WQ;var $s=Object.freeze({__proto__:null,format:mq,equals:mp,relativeTo:bo,dateFormat:WQ});bd("aj",$s);var Aj=window.lively.FreezerRuntime.recorderFor("lively.lang/promise.js");Aj.promise=yj;Aj.delay=Fn;Aj.delayReject=np;Aj.timeout=Ym;Aj.timeToRun=on;Aj.waitFor=
pn;Aj.deferred=zo;Aj.convertCallbackFun=op;Aj.convertCallbackFunWithManyArgs=zj;Aj._chainResolveNext=Oh;Aj.chain=ym;Aj.promise_finally=qn;Aj.parallel=pp;Aj.waitForClosures={};Object.assign(Aj.promise,{delay:Aj.delay,delayReject:Aj.delayReject,timeout:Aj.timeout,waitFor:Aj.waitFor,deferred:Aj.deferred,convertCallbackFun:Aj.convertCallbackFun,convertCallbackFunWithManyArgs:Aj.convertCallbackFunWithManyArgs,chain:Aj.chain,"finally":Aj.promise_finally,parallel:Aj.parallel});Aj.promise=yj;Aj.delay=Fn;
Aj.delayReject=np;Aj.timeout=Ym;Aj.timeToRun=on;Aj.waitFor=pn;Aj.deferred=zo;Aj.convertCallbackFun=op;Aj.convertCallbackFunWithManyArgs=zj;Aj.chain=ym;Aj["finally"]=qn;Aj.promise_finally=qn;Aj.parallel=pp;Aj["default"]=yj;var Zp=window.lively.FreezerRuntime.recorderFor("lively.lang/Path.js");Zp.Path=qj;Zp.inspect=te;Object.assign(Zp.Path.prototype,{get isPathAccessor(){return!0},fromPath:function(e){"string"===typeof e&&""!==e&&e!==this.splitter?(this._parts=e.split(this.splitter),this._path=e):Array.isArray(e)?
(this._parts=[].concat(e),this._path=e.join(this.splitter)):(this._parts=[],this._path="");return this},setSplitter:function(e){e&&(this.splitter=e);return this},map:function(e){this._mapper=e;return this},parts:function(){return this._parts},size:function(){return this._parts.length},slice:function(e,h){return Zp.Path(this.parts().slice(e,h))},normalizePath:function(){return this._path},isRoot:function(e){return 0===this._parts.length},isIn:function(e){return this.isRoot()?!0:(e=this.get(e,-1))&&
e.hasOwnProperty(this._parts[this._parts.length-1])},equals:function(e){return e&&e.isPathAccessor&&this.parts().equals(e.parts())},isParentPathOf:function(e){e=e&&e.isPathAccessor?e:Zp.Path(e);var h=this.parts();e=e.parts();for(var l=0;l<h.length;l++)if(h[l]!=e[l])return!1;return!0},relativePathTo:function(e){e=Zp.Path(e);return this.isParentPathOf(e)?e.slice(this.size(),e.size()):void 0},del:function(e){if(this.isRoot())return!1;for(var h=0;h<this._parts.length-1;h++){var l=this._parts[h];if(e.hasOwnProperty(l))e=
e[l];else return!1}return delete e[this._parts[this._parts.length-1]]},withParentAndKeyDo:function(e,h,l){if(this.isRoot())return l(null,null);for(var b=0;b<this._parts.length-1;b++){var c=this._parts[b];if(!e.hasOwnProperty(c)||"object"!==ad(e[c])&&"function"!==typeof e[c])if(h)e=e[c]={};else return l(null,c);else e=e[c]}return l(e,this._parts[this._parts.length-1])},set:function(e,h,l){return this.withParentAndKeyDo(e,l,function(b,c){return b?b[c]=h:void 0})},defineProperty:function(e,h,l){return this.withParentAndKeyDo(e,
l,function(b,c){return b?Object.defineProperty(b,c,h):void 0})},get:function(e,h){var l=this;return(h?this._parts.slice(0,h):this._parts).reduce(function(b,c){return b?l._mapper?l._mapper(c,b[c]):b[c]:b},e)},concat:function(e,h){return Zp.Path(this.parts().concat(Zp.Path(e,h).parts()))},toString:function(){return this.normalizePath()},serializeExpr:function(){return"lively.lang.Path("+Zp.inspect(this.parts())+")"},watch:function(e){if(e&&!this.isRoot()){var h=e.target,l=this.get(h,-1),b=this.parts().slice(-1)[0],
c="propertyWatcher$"+b,g=l&&l.hasOwnProperty(c),a=e.uninstall,d=e.haltWhenChanged,f=e.showStack,k=l.__lookupGetter__(b),n=l.__lookupSetter__(b);h&&b&&l&&(a?g&&(delete l[b],l[b]=l[c],delete l[c]):g||(k||n?console.log(l+'["'+b+'"] is a getter/setter, watching not support'):(l[c]=l[b],l.__defineSetter__(b,function(p){var q=l[c];if(e.onSet)e.onSet(p,q);q=l+"."+b+" changed: "+q+" -> "+p;f&&(q+="\n"+("undefined"!==typeof lively?lively.printStack():console.trace()));e.verbose&&console.log(q);if(d)debugger;
return l[c]=p}),l.__defineGetter__(b,function(){if(e.onGet)e.onGet(l[c]);return l[c]}),console.log("Watcher for "+l+"."+b+" installed"))))}},debugFunctionWrapper:function(e){var h=e.target,l=this.get(h,-1),b=this.parts().slice(-1)[0],c=e.uninstall,g=void 0===e.haltWhenChanged?!0:e.haltWhenChanged;e.showStack;var a=(e=l&&b&&l[b])&&e.isDebugFunctionWrapper;h&&b&&e&&l&&(c?a&&(l[b]=l[b].debugTargetFunction,console.log("Uninstalled debugFunctionWrapper for "+l+"."+b)):a?console.log("debugFunctionWrapper for "+
l+"."+b+" already installed"):(h=l[b]=e.wrap(function(d){var f=Array.from(arguments);if(g)debugger;return f.shift().apply(l,f)}),h.isDebugFunctionWrapper=!0,h.debugTargetFunction=e,console.log("debugFunctionWrapper for "+l+"."+b+" installed")))}});Zp["default"]=qj;var ul=window.lively.FreezerRuntime.recorderFor("lively.lang/graph.js");ul.clone=Mm;ul.without=Ao;ul.hull=Nm;ul.subgraphReachableBy=Om;ul.invert=co;ul.sortByReference=qp;ul.reduce=rp;ul.random=sp;ul.range=Le;ul.shuffle=Re;ul.withoutAll=
mf;ul.clone=Mm;ul.without=Ao;ul.hull=Nm;ul.subgraphReachableBy=Om;ul.invert=co;ul.sortByReference=qp;ul.reduce=rp;ul.random=sp;var iv=Object.freeze({__proto__:null,clone:Mm,without:Ao,hull:Nm,subgraphReachableBy:Om,invert:co,sortByReference:qp,reduce:rp,random:sp});bd("ai",iv);var nk=window.lively.FreezerRuntime.recorderFor("lively.lang/interval.js");nk.isInterval=Bo;nk.sort=tp;nk.compare=rn;nk.coalesce=up;nk.coalesceOverlapping=sn;nk.mergeOverlapping=vp;nk.intervalsInRangeDo=Gn;nk.intervalsInbetween=
Hn;nk.mapToMatchingIndexes=Zm;nk.benchmark=function(){function e(h,l,b){return"".concat(h.name," ").concat(nk.timeToRunN(function(){return h.apply(null,l,1E5)},b),"ms")}return["Friday, 20. July 2012:\ncoalesceOverlapping: 0.0003ms\nintervalsInbetween: 0.002ms\nmapToMatchingIndexes: 0.02ms","vs.\n"+new Date+":",e(nk.coalesceOverlapping,[[[9,10],[1,8],[3,7],[15,20],[14,21]]],1E5),e(nk.intervalsInbetween,[0,10,[[8,10],[0,2],[3,5]]],1E5),e(nk.mapToMatchingIndexes,[nk.range(0,1E3).map(function(h){return[h,
h+1]}),[[4,8],[500,504],[900,1004]]],1E3)].join("\n")};nk.range=Le;nk.timeToRunN=va;nk.GLOB="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;nk.isInterval=Bo;nk.sort=tp;nk.compare=rn;nk.coalesce=up;nk.coalesceOverlapping=sn;nk.mergeOverlapping=vp;nk.intervalsInRangeDo=Gn;nk.intervalsInbetween=Hn;nk.mapToMatchingIndexes=Zm;var jG=Object.freeze({__proto__:null,isInterval:Bo,sort:tp,compare:rn,coalesce:up,coalesceOverlapping:sn,mergeOverlapping:vp,intervalsInRangeDo:Gn,
intervalsInbetween:Hn,mapToMatchingIndexes:Zm}),Co=window.lively.FreezerRuntime.recorderFor("lively.lang/array-projection.js");Co.create=wp;Co.toArray=eo;Co.originalToProjectedIndex=In;Co.projectedToOriginalIndex=nq;Co.transformToIncludeIndex=Jn;Co.create=wp;Co.toArray=eo;Co.originalToProjectedIndex=In;Co.projectedToOriginalIndex=nq;Co.transformToIncludeIndex=Jn;var kG=Object.freeze({__proto__:null,create:wp,toArray:eo,originalToProjectedIndex:In,projectedToOriginalIndex:nq,transformToIncludeIndex:Jn}),
dk=window.lively.FreezerRuntime.recorderFor("lively.lang/grid.js");dk.get=xp;dk.set=Kn;dk.getRow=Do;dk.setRow=Eo;dk.getCol=oq;dk.setCol=Bc;dk.create=Gc;dk.mapCreate=ed;dk.forEach=Nc;dk.map=Hc;dk.toObjects=Jd;dk.tableFromObjects=De;dk.benchmark=function(){var e=[],h=dk.create(1E3,200,1);var l=dk.timeToRunN(function(){dk.forEach(h,function(c){})},10);e.push("forEach: ".concat(l.toFixed(2),"ms"));l=dk.timeToRunN(function(){dk.map(h,function(c,g,a){return g+a+Math.round(100*Math.random())})},10);e.push("map: ".concat(l.toFixed(2),
"ms"));var b=dk.create(1E3,2E3);l=dk.timeToRunN(function(){b=Array(1E3);for(var c=0;1E3>c;c++)b[c]=Array(2E3);dk.forEach(h,function(g,a,d){b[a][d]=a+d+Math.round(100*Math.random())})},10);e.push("map with forEach: "+l+"ms");e.push("--= 2012-09-22 =--\nforEach: 14.9ms\nmap: 19.8ms\nmap with forEach: 38.7ms\n");return e.join("\n")};dk.arrayWithN=We;dk.timeToRunN=va;dk.get=xp;dk.set=Kn;dk.getRow=Do;dk.setRow=Eo;dk.getCol=oq;dk.setCol=Bc;dk.create=Gc;dk.mapCreate=ed;dk.forEach=Nc;dk.map=Hc;dk.toObjects=
Jd;dk.tableFromObjects=De;var qA=Object.freeze({__proto__:null,get:xp,set:Kn,getRow:Do,setRow:Eo,getCol:oq,setCol:Bc,create:Gc,mapCreate:ed,forEach:Nc,map:Hc,toObjects:Jd,tableFromObjects:De}),Vm=window.lively.FreezerRuntime.recorderFor("lively.lang/tree.js");Vm.prewalk=df;Vm.postwalk=uf;Vm.find=Yf;Vm.filter=Ch;Vm.map=Fh;Vm.mapTree=oi;Vm.detect=Vm.find;var XQ=Vm.detect;Vm.prewalk=df;Vm.postwalk=uf;Vm.find=Yf;Vm.detect=XQ;Vm.filter=Ch;Vm.map=Fh;Vm.mapTree=oi;var Er=Object.freeze({__proto__:null,prewalk:df,
postwalk:uf,find:Yf,detect:XQ,filter:Ch,map:Fh,mapTree:oi});bd("ak",Er);Ri.prototype=Object.create(null);Th.EventEmitter=Th;Th.usingDomains=!1;Th.prototype.domain=void 0;Th.prototype._events=void 0;Th.prototype._maxListeners=void 0;Th.defaultMaxListeners=10;Th.init=function(){this.domain=null;this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Ri,this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};Th.prototype.setMaxListeners=function(e){if("number"!==
typeof e||0>e||isNaN(e))throw new TypeError('"n" argument must be a positive number');this._maxListeners=e;return this};Th.prototype.getMaxListeners=function(){return void 0===this._maxListeners?Th.defaultMaxListeners:this._maxListeners};Th.prototype.emit=function(e){var h,l;var b="error"===e;if(h=this._events)b=b&&null==h.error;else if(!b)return!1;var c=this.domain;if(b){h=arguments[1];if(c)h||(h=Error('Uncaught, unspecified "error" event')),h.domainEmitter=this,h.domain=c,h.domainThrown=!1,c.emit("error",
h);else{if(h instanceof Error)throw h;c=Error('Uncaught, unspecified "error" event. ('+h+")");c.context=h;throw c;}return!1}c=h[e];if(!c)return!1;h="function"===typeof c;var g=arguments.length;switch(g){case 1:if(h)c.call(this);else for(h=c.length,c=ok(c,h),b=0;b<h;++b)c[b].call(this);break;case 2:b=arguments[1];if(h)c.call(this,b);else for(h=c.length,c=ok(c,h),g=0;g<h;++g)c[g].call(this,b);break;case 3:b=arguments[1];g=arguments[2];if(h)c.call(this,b,g);else for(h=c.length,c=ok(c,h),l=0;l<h;++l)c[l].call(this,
b,g);break;case 4:b=arguments[1];g=arguments[2];l=arguments[3];if(h)c.call(this,b,g,l);else{h=c.length;c=ok(c,h);for(var a=0;a<h;++a)c[a].call(this,b,g,l)}break;default:b=Array(g-1);for(l=1;l<g;l++)b[l-1]=arguments[l];if(h)c.apply(this,b);else for(h=c.length,c=ok(c,h),g=0;g<h;++g)c[g].apply(this,b)}return!0};Th.prototype.addListener=function(e,h){return Ui(this,e,h,!1)};Th.prototype.on=Th.prototype.addListener;Th.prototype.prependListener=function(e,h){return Ui(this,e,h,!0)};Th.prototype.once=function(e,
h){if("function"!==typeof h)throw new TypeError('"listener" argument must be a function');this.on(e,Vk(this,e,h));return this};Th.prototype.prependOnceListener=function(e,h){if("function"!==typeof h)throw new TypeError('"listener" argument must be a function');this.prependListener(e,Vk(this,e,h));return this};Th.prototype.removeListener=function(e,h){var l;if("function"!==typeof h)throw new TypeError('"listener" argument must be a function');var b=this._events;if(!b)return this;var c=b[e];if(!c)return this;
if(c===h||c.listener&&c.listener===h)0===--this._eventsCount?this._events=new Ri:(delete b[e],b.removeListener&&this.emit("removeListener",e,c.listener||h));else if("function"!==typeof c){var g=-1;for(l=c.length;0<l--;)if(c[l]===h||c[l].listener&&c[l].listener===h){var a=c[l].listener;g=l;break}if(0>g)return this;if(1===c.length){c[0]=void 0;if(0===--this._eventsCount)return this._events=new Ri,this;delete b[e]}else{l=g+1;for(var d=c.length;l<d;g+=1,l+=1)c[g]=c[l];c.pop()}b.removeListener&&this.emit("removeListener",
e,a||h)}return this};Th.prototype.off=function(e,h){return this.removeListener(e,h)};Th.prototype.removeAllListeners=function(e){var h=this._events;if(!h)return this;if(!h.removeListener)return 0===arguments.length?(this._events=new Ri,this._eventsCount=0):h[e]&&(0===--this._eventsCount?this._events=new Ri:delete h[e]),this;if(0===arguments.length){h=Object.keys(h);for(var l=0,b;l<h.length;++l)b=h[l],"removeListener"!==b&&this.removeAllListeners(b);this.removeAllListeners("removeListener");this._events=
new Ri;this._eventsCount=0;return this}h=h[e];if("function"===typeof h)this.removeListener(e,h);else if(h){do this.removeListener(e,h[h.length-1]);while(h[0])}return this};Th.prototype.listeners=function(e){var h=this._events;if(h)if(e=h[e])if("function"===typeof e)e=[e.listener||e];else{h=Array(e.length);for(var l=0;l<h.length;++l)h[l]=e[l].listener||e[l];e=h}else e=[];else e=[];return e};Th.listenerCount=function(e,h){return"function"===typeof e.listenerCount?e.listenerCount(h):Mk.call(e,h)};Th.prototype.listenerCount=
Mk;Th.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var at=window.lively.FreezerRuntime.recorderFor("lively.lang/events.js");at._events=Th;at.isNode="undefined"!==typeof process&&process.versions&&process.versions.node;at.makeEmitter=at.isNode?function(e,h){if(e.on&&e.removeListener)return e;var l=at._events;l||(l=System._nodeRequire("events"));Object.assign(e,l.EventEmitter.prototype);l.EventEmitter.call(e);h&&h.maxListenerLimit&&e.setMaxListeners(h.maxListenerLimit);
return e}:function(e){if(e.on&&e.removeListener)return e;e.listeners={};e.on=function(h,l){l&&(e.listeners[h]||(e.listeners[h]=[]),e.listeners[h].push(l))};e.once=function(h,l){function b(){e.removeListener(h,b);l.apply(this,arguments)}if(l)e.on(h,b)};e.removeListener=function(h,l){e.listeners[h]&&(e.listeners[h]=e.listeners[h].filter(function(b){return b!==l}))};e.removeAllListeners=function(h){e.listeners[h]&&(e.listeners[h]=[])};e.emit=function(){var h=Array.prototype.slice.call(arguments),l=h.shift();
(l=e.listeners[l])&&l.length&&l.forEach(function(b){try{b.apply(null,h)}catch(c){console.error("Error in event handler: %s",c.stack||String(c))}})};return e};var rA=at.makeEmitter;at.makeEmitter=rA;var bt=Object.freeze({__proto__:null,makeEmitter:rA}),Gl=window.lively.FreezerRuntime.recorderFor("lively.lang/messenger.js");Gl.create=mm;Gl.remove=w;Gl.pluck=Uf;Gl.makeEmitter=rA;Gl.newUUID=ye;Gl.OFFLINE="offline";Gl.ONLINE="online";Gl.CONNECTING="connecting";Gl.create=mm;var lG=Object.freeze({__proto__:null,
create:mm}),Wl=Object.freeze({__proto__:null,commonjsGlobal:"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},getDefaultExportFromCjs:function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e},getDefaultExportFromNamespaceIfPresent:function(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e},getDefaultExportFromNamespaceIfNotNamed:function(e){return e&&
Object.prototype.hasOwnProperty.call(e,"default")&&1===Object.keys(e).length?e["default"]:e},getAugmentedNamespace:Ol});bd("n",Wl);var Fo=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/babel-plugin-transform-es2015-modules-systemjs/6.19.0/lib/index.js");Fo.requireLib=$m;Fo.commonjsHelpers=Wl;Fo.lib={};Fo.hasRequiredLib=Fo.hasRequiredLib||void 0;Fo.__require=$m;Fo.requireLib=$m;var JI,IB=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,B0={extname:X,basename:Q,dirname:F,
sep:"/",delimiter:":",relative:A,join:t,isAbsolute:Wq,normalize:yp,resolve:Ho},$V="b"==="ab".substr(-1)?function(e,h,l){return e.substr(h,l)}:function(e,h,l){0>h&&(h=e.length+h);return e.substr(h,l)},C0=Object.freeze({__proto__:null,resolve:Ho,normalize:yp,isAbsolute:Wq,join:t,relative:A,sep:"/",delimiter:":",dirname:F,basename:Q,extname:X,"default":B0}),D0=Ol(C0),zp="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},Dy,E0=Object.freeze({__proto__:null,
endianness:Wa,hostname:Ab,loadavg:fc,uptime:Lc,freemem:wd,totalmem:le,cpus:je,type:pe,release:qe,networkInterfaces:nc,getNetworkInterfaces:Ke,arch:$f,platform:Te,tmpDir:ug,tmpdir:ug,EOL:"\n","default":{EOL:"\n",arch:$f,platform:Te,tmpdir:ug,tmpDir:ug,networkInterfaces:nc,getNetworkInterfaces:Ke,release:qe,type:pe,cpus:je,totalmem:le,freemem:wd,uptime:Lc,loadavg:fc,hostname:Ab,endianness:Wa}}),F0=Ol(E0),G0=Object.freeze({__proto__:null,"default":{},createWriteStream:void 0,createReadStream:void 0,
readFile:void 0,writeFile:void 0,exists:void 0,mkdir:void 0,rmdir:void 0,unlink:void 0,readdir:void 0,lstat:void 0,rename:void 0}),H0=Ol(G0),I0=Object.freeze({__proto__:null,"default":{}}),J0=Ol(I0),Ap=[],fo=[],bW="undefined"!==typeof Uint8Array?Uint8Array:Array,JB=!1,K0={}.toString,KI=Array.isArray||function(e){return"[object Array]"==K0.call(e)};Qe.TYPED_ARRAY_SUPPORT=void 0!==zp.TYPED_ARRAY_SUPPORT?zp.TYPED_ARRAY_SUPPORT:!0;Qe.poolSize=8192;Qe._augment=function(e){e.__proto__=Qe.prototype;return e};
Qe.from=function(e,h,l){return zg(null,e,h,l)};Qe.TYPED_ARRAY_SUPPORT&&(Qe.prototype.__proto__=Uint8Array.prototype,Qe.__proto__=Uint8Array);Qe.alloc=function(e,h,l){Dh(e);e=0>=e?yf(null,e):void 0!==h?"string"===typeof l?yf(null,e).fill(h,l):yf(null,e).fill(h):yf(null,e);return e};Qe.allocUnsafe=function(e){return Jg(null,e)};Qe.allocUnsafeSlow=function(e){return Jg(null,e)};Qe.isBuffer=function(e){return null!=e&&(!!e._isBuffer||G(e)||"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&
G(e.slice(0,0)))};Qe.compare=function(e,h){if(!ah(e)||!ah(h))throw new TypeError("Arguments must be Buffers");if(e===h)return 0;for(var l=e.length,b=h.length,c=0,g=Math.min(l,b);c<g;++c)if(e[c]!==h[c]){l=e[c];b=h[c];break}return l<b?-1:b<l?1:0};Qe.isEncoding=function(e){switch(String(e).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};Qe.concat=function(e,h){if(!KI(e))throw new TypeError('"list" argument must be an Array of Buffers');
if(0===e.length)return Qe.alloc(0);var l;if(void 0===h)for(l=h=0;l<e.length;++l)h+=e[l].length;h=Qe.allocUnsafe(h);var b=0;for(l=0;l<e.length;++l){var c=e[l];if(!ah(c))throw new TypeError('"list" argument must be an Array of Buffers');c.copy(h,b);b+=c.length}return h};Qe.byteLength=nh;Qe.prototype._isBuffer=!0;Qe.prototype.swap16=function(){var e=this.length;if(0!==e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var h=0;h<e;h+=2)vi(this,h,h+1);return this};Qe.prototype.swap32=
function(){var e=this.length;if(0!==e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var h=0;h<e;h+=4)vi(this,h,h+3),vi(this,h+1,h+2);return this};Qe.prototype.swap64=function(){var e=this.length;if(0!==e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var h=0;h<e;h+=8)vi(this,h,h+7),vi(this,h+1,h+6),vi(this,h+2,h+5),vi(this,h+3,h+4);return this};Qe.prototype.toString=function(){var e=this.length|0;return 0===e?"":0===arguments.length?sj(this,0,e):
Fi.apply(this,arguments)};Qe.prototype.equals=function(e){if(!ah(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===Qe.compare(this,e)};Qe.prototype.inspect=function(){var e="";0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... "));return"<Buffer "+e+">"};Qe.prototype.compare=function(e,h,l,b,c){if(!ah(e))throw new TypeError("Argument must be a Buffer");void 0===h&&(h=0);void 0===l&&(l=e?e.length:0);void 0===b&&(b=0);void 0===c&&
(c=this.length);if(0>h||l>e.length||0>b||c>this.length)throw new RangeError("out of range index");if(b>=c&&h>=l)return 0;if(b>=c)return-1;if(h>=l)return 1;h>>>=0;l>>>=0;b>>>=0;c>>>=0;if(this===e)return 0;var g=c-b,a=l-h,d=Math.min(g,a);b=this.slice(b,c);e=e.slice(h,l);for(h=0;h<d;++h)if(b[h]!==e[h]){g=b[h];a=e[h];break}return g<a?-1:a<g?1:0};Qe.prototype.includes=function(e,h,l){return-1!==this.indexOf(e,h,l)};Qe.prototype.indexOf=function(e,h,l){return Bj(this,e,h,l,!0)};Qe.prototype.lastIndexOf=
function(e,h,l){return Bj(this,e,h,l,!1)};Qe.prototype.write=function(e,h,l,b){if(void 0===h)b="utf8",l=this.length,h=0;else if(void 0===l&&"string"===typeof h)b=h,l=this.length,h=0;else if(isFinite(h))h|=0,isFinite(l)?(l|=0,void 0===b&&(b="utf8")):(b=l,l=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var c=this.length-h;if(void 0===l||l>c)l=c;if(0<e.length&&(0>l||0>h)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");
b||(b="utf8");for(c=!1;;)switch(b){case "hex":a:{h=Number(h)||0;b=this.length-h;l?(l=Number(l),l>b&&(l=b)):l=b;b=e.length;if(0!==b%2)throw new TypeError("Invalid hex string");l>b/2&&(l=b/2);for(b=0;b<l;++b){c=parseInt(e.substr(2*b,2),16);if(isNaN(c)){e=b;break a}this[h+b]=c}e=b}return e;case "utf8":case "utf-8":return Bg(Ei(e,this.length-h),this,h,l);case "ascii":return Bg(oh(e),this,h,l);case "latin1":case "binary":return Bg(oh(e),this,h,l);case "base64":return Bg(Xe(e),this,h,l);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=
e;c=this.length-h;for(var g=[],a=0;a<b.length&&!(0>(c-=2));++a){var d=b.charCodeAt(a);e=d>>8;d%=256;g.push(d);g.push(e)}return Bg(g,this,h,l);default:if(c)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase();c=!0}};Qe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var LI=4096;Qe.prototype.slice=function(e,h){var l=this.length;e=~~e;h=void 0===h?l:~~h;0>e?(e+=l,0>e&&(e=0)):e>l&&(e=l);0>h?(h+=l,0>h&&(h=0)):h>l&&(h=l);h<e&&(h=e);if(Qe.TYPED_ARRAY_SUPPORT)h=
this.subarray(e,h),h.__proto__=Qe.prototype;else{l=h-e;h=new Qe(l,void 0);for(var b=0;b<l;++b)h[b]=this[b+e]}return h};Qe.prototype.readUIntLE=function(e,h,l){e|=0;h|=0;l||Qd(e,h,this.length);l=this[e];for(var b=1,c=0;++c<h&&(b*=256);)l+=this[e+c]*b;return l};Qe.prototype.readUIntBE=function(e,h,l){e|=0;h|=0;l||Qd(e,h,this.length);l=this[e+--h];for(var b=1;0<h&&(b*=256);)l+=this[e+--h]*b;return l};Qe.prototype.readUInt8=function(e,h){h||Qd(e,1,this.length);return this[e]};Qe.prototype.readUInt16LE=
function(e,h){h||Qd(e,2,this.length);return this[e]|this[e+1]<<8};Qe.prototype.readUInt16BE=function(e,h){h||Qd(e,2,this.length);return this[e]<<8|this[e+1]};Qe.prototype.readUInt32LE=function(e,h){h||Qd(e,4,this.length);return(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]};Qe.prototype.readUInt32BE=function(e,h){h||Qd(e,4,this.length);return 16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Qe.prototype.readIntLE=function(e,h,l){e|=0;h|=0;l||Qd(e,h,this.length);l=this[e];for(var b=
1,c=0;++c<h&&(b*=256);)l+=this[e+c]*b;l>=128*b&&(l-=Math.pow(2,8*h));return l};Qe.prototype.readIntBE=function(e,h,l){e|=0;h|=0;l||Qd(e,h,this.length);l=h;for(var b=1,c=this[e+--l];0<l&&(b*=256);)c+=this[e+--l]*b;c>=128*b&&(c-=Math.pow(2,8*h));return c};Qe.prototype.readInt8=function(e,h){h||Qd(e,1,this.length);return this[e]&128?-1*(255-this[e]+1):this[e]};Qe.prototype.readInt16LE=function(e,h){h||Qd(e,2,this.length);e=this[e]|this[e+1]<<8;return e&32768?e|4294901760:e};Qe.prototype.readInt16BE=
function(e,h){h||Qd(e,2,this.length);e=this[e+1]|this[e]<<8;return e&32768?e|4294901760:e};Qe.prototype.readInt32LE=function(e,h){h||Qd(e,4,this.length);return this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Qe.prototype.readInt32BE=function(e,h){h||Qd(e,4,this.length);return this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Qe.prototype.readFloatLE=function(e,h){h||Qd(e,4,this.length);return Tg(this,e,!0,23,4)};Qe.prototype.readFloatBE=function(e,h){h||Qd(e,4,this.length);return Tg(this,e,!1,23,
4)};Qe.prototype.readDoubleLE=function(e,h){h||Qd(e,8,this.length);return Tg(this,e,!0,52,8)};Qe.prototype.readDoubleBE=function(e,h){h||Qd(e,8,this.length);return Tg(this,e,!1,52,8)};Qe.prototype.writeUIntLE=function(e,h,l,b){e=+e;h|=0;l|=0;b||Ec(this,e,h,l,Math.pow(2,8*l)-1,0);b=1;var c=0;for(this[h]=e&255;++c<l&&(b*=256);)this[h+c]=e/b&255;return h+l};Qe.prototype.writeUIntBE=function(e,h,l,b){e=+e;h|=0;l|=0;b||Ec(this,e,h,l,Math.pow(2,8*l)-1,0);b=l-1;var c=1;for(this[h+b]=e&255;0<=--b&&(c*=256);)this[h+
b]=e/c&255;return h+l};Qe.prototype.writeUInt8=function(e,h,l){e=+e;h|=0;l||Ec(this,e,h,1,255,0);Qe.TYPED_ARRAY_SUPPORT||(e=Math.floor(e));this[h]=e&255;return h+1};Qe.prototype.writeUInt16LE=function(e,h,l){e=+e;h|=0;l||Ec(this,e,h,2,65535,0);Qe.TYPED_ARRAY_SUPPORT?(this[h]=e&255,this[h+1]=e>>>8):If(this,e,h,!0);return h+2};Qe.prototype.writeUInt16BE=function(e,h,l){e=+e;h|=0;l||Ec(this,e,h,2,65535,0);Qe.TYPED_ARRAY_SUPPORT?(this[h]=e>>>8,this[h+1]=e&255):If(this,e,h,!1);return h+2};Qe.prototype.writeUInt32LE=
function(e,h,l){e=+e;h|=0;l||Ec(this,e,h,4,4294967295,0);Qe.TYPED_ARRAY_SUPPORT?(this[h+3]=e>>>24,this[h+2]=e>>>16,this[h+1]=e>>>8,this[h]=e&255):Mf(this,e,h,!0);return h+4};Qe.prototype.writeUInt32BE=function(e,h,l){e=+e;h|=0;l||Ec(this,e,h,4,4294967295,0);Qe.TYPED_ARRAY_SUPPORT?(this[h]=e>>>24,this[h+1]=e>>>16,this[h+2]=e>>>8,this[h+3]=e&255):Mf(this,e,h,!1);return h+4};Qe.prototype.writeIntLE=function(e,h,l,b){e=+e;h|=0;b||(b=Math.pow(2,8*l-1),Ec(this,e,h,l,b-1,-b));b=0;var c=1,g=0;for(this[h]=
e&255;++b<l&&(c*=256);)0>e&&0===g&&0!==this[h+b-1]&&(g=1),this[h+b]=(e/c>>0)-g&255;return h+l};Qe.prototype.writeIntBE=function(e,h,l,b){e=+e;h|=0;b||(b=Math.pow(2,8*l-1),Ec(this,e,h,l,b-1,-b));b=l-1;var c=1,g=0;for(this[h+b]=e&255;0<=--b&&(c*=256);)0>e&&0===g&&0!==this[h+b+1]&&(g=1),this[h+b]=(e/c>>0)-g&255;return h+l};Qe.prototype.writeInt8=function(e,h,l){e=+e;h|=0;l||Ec(this,e,h,1,127,-128);Qe.TYPED_ARRAY_SUPPORT||(e=Math.floor(e));0>e&&(e=255+e+1);this[h]=e&255;return h+1};Qe.prototype.writeInt16LE=
function(e,h,l){e=+e;h|=0;l||Ec(this,e,h,2,32767,-32768);Qe.TYPED_ARRAY_SUPPORT?(this[h]=e&255,this[h+1]=e>>>8):If(this,e,h,!0);return h+2};Qe.prototype.writeInt16BE=function(e,h,l){e=+e;h|=0;l||Ec(this,e,h,2,32767,-32768);Qe.TYPED_ARRAY_SUPPORT?(this[h]=e>>>8,this[h+1]=e&255):If(this,e,h,!1);return h+2};Qe.prototype.writeInt32LE=function(e,h,l){e=+e;h|=0;l||Ec(this,e,h,4,2147483647,-2147483648);Qe.TYPED_ARRAY_SUPPORT?(this[h]=e&255,this[h+1]=e>>>8,this[h+2]=e>>>16,this[h+3]=e>>>24):Mf(this,e,h,!0);
return h+4};Qe.prototype.writeInt32BE=function(e,h,l){e=+e;h|=0;l||Ec(this,e,h,4,2147483647,-2147483648);0>e&&(e=4294967295+e+1);Qe.TYPED_ARRAY_SUPPORT?(this[h]=e>>>24,this[h+1]=e>>>16,this[h+2]=e>>>8,this[h+3]=e&255):Mf(this,e,h,!1);return h+4};Qe.prototype.writeFloatLE=function(e,h,l){l||sg(this,e,h,4);Lf(this,e,h,!0,23,4);return h+4};Qe.prototype.writeFloatBE=function(e,h,l){l||sg(this,e,h,4);Lf(this,e,h,!1,23,4);return h+4};Qe.prototype.writeDoubleLE=function(e,h,l){l||sg(this,e,h,8);Lf(this,
e,h,!0,52,8);return h+8};Qe.prototype.writeDoubleBE=function(e,h,l){l||sg(this,e,h,8);Lf(this,e,h,!1,52,8);return h+8};Qe.prototype.copy=function(e,h,l,b){l||(l=0);b||0===b||(b=this.length);h>=e.length&&(h=e.length);h||(h=0);0<b&&b<l&&(b=l);if(b===l||0===e.length||0===this.length)return 0;if(0>h)throw new RangeError("targetStart out of bounds");if(0>l||l>=this.length)throw new RangeError("sourceStart out of bounds");if(0>b)throw new RangeError("sourceEnd out of bounds");b>this.length&&(b=this.length);
e.length-h<b-l&&(b=e.length-h+l);var c=b-l;if(this===e&&l<h&&h<b)for(b=c-1;0<=b;--b)e[b+h]=this[b+l];else if(1E3>c||!Qe.TYPED_ARRAY_SUPPORT)for(b=0;b<c;++b)e[b+h]=this[b+l];else Uint8Array.prototype.set.call(e,this.subarray(l,l+c),h);return c};Qe.prototype.fill=function(e,h,l,b){if("string"===typeof e){"string"===typeof h?(b=h,h=0,l=this.length):"string"===typeof l&&(b=l,l=this.length);if(1===e.length){var c=e.charCodeAt(0);256>c&&(e=c)}if(void 0!==b&&"string"!==typeof b)throw new TypeError("encoding must be a string");
if("string"===typeof b&&!Qe.isEncoding(b))throw new TypeError("Unknown encoding: "+b);}else"number"===typeof e&&(e&=255);if(0>h||this.length<h||this.length<l)throw new RangeError("Out of range index");if(l<=h)return this;h>>>=0;l=void 0===l?this.length:l>>>0;e||(e=0);if("number"===typeof e)for(b=h;b<l;++b)this[b]=e;else for(e=ah(e)?e:Ei((new Qe(e,b)).toString()),c=e.length,b=0;b<l-h;++b)this[b+h]=e[b%c];return this};var aW=/[^+\/0-9A-Za-z-_]/g,Xq=ca,Yq=lb;"function"===typeof zp.setTimeout&&(Xq=setTimeout);
"function"===typeof zp.clearTimeout&&(Yq=clearTimeout);var pq=[],Jt=!1,Zr,Ey=-1;Za.prototype.run=function(){this.fun.apply(null,this.array)};var jv=zp.performance||{},L0=jv.now||jv.mozNow||jv.msNow||jv.oNow||jv.webkitNow||function(){return(new Date).getTime()},M0=new Date,MI=bd("bq",{nextTick:Pa,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Zb,addListener:Zb,once:Zb,off:Zb,removeListener:Zb,removeAllListeners:Zb,emit:Zb,binding:function(e){throw Error("process.binding is not supported");
},cwd:function(){return"/"},chdir:function(e){throw Error("process.chdir is not supported");},umask:function(){return 0},hrtime:function(e){var h=.001*L0.call(jv),l=Math.floor(h);h=Math.floor(h%1*1E9);e&&(l-=e[0],h-=e[1],0>h&&(l--,h+=1E9));return[l,h]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-M0)/1E3}}),YQ=bd("bm","function"===typeof Object.create?function(e,h){e.super_=h;e.prototype=Object.create(h.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:
function(e,h){e.super_=h;var l=function(){};l.prototype=h.prototype;e.prototype=new l;e.prototype.constructor=e}),cW=/%[sdj%]/g,Fy={},KB;sd.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};sd.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};var dW="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
N0=Object.freeze({__proto__:null,format:Vc,deprecate:Jc,debuglog:cd,inspect:sd,isArray:hk,isBoolean:tk,isNull:Zl,isNullOrUndefined:Ph,isNumber:vl,isString:Uj,isSymbol:$l,isUndefined:Wk,isRegExp:Ie,isObject:ce,isDate:Xg,isError:Ld,isFunction:Ff,isPrimitive:Wf,isBuffer:Nf,log:li,inherits:YQ,_extend:Yh,"default":{inherits:YQ,_extend:Yh,log:li,isBuffer:Nf,isPrimitive:Wf,isFunction:Ff,isError:Ld,isDate:Xg,isObject:ce,isRegExp:Ie,isUndefined:Wk,isSymbol:$l,isString:Uj,isNumber:vl,isNullOrUndefined:Ph,isNull:Zl,
isBoolean:tk,isArray:hk,inspect:sd,deprecate:Jc,format:Vc,debuglog:cd}}),O0=Ol(N0),wi=window.lively.FreezerRuntime.recorderFor("lively.lang/worker.js");wi.fork=ai;wi.create=Yj;wi.commonjsHelpers=Wl;wi.createCommonjsRequire=It;wi.require$$0=D0;wi.require$$1=F0;wi.require$$2=H0;wi.require$$3=J0;wi.require$$4=O0;wi.makeEmitter=rA;wi.newUUID=ye;wi.waitFor=vb;wi.messengerCreate=mm;wi.Closure=bp;wi.isNodejs="undefined"!==typeof wi.createCommonjsRequire("/lively.lang")&&"undefined"!==typeof process;wi.WorkerSetup=
{loadDependenciesBrowser:function(e){importScripts.apply("undefined"!==typeof self?self:this,e.scriptsToLoad||[])},loadDependenciesNodejs:function(e){(global.lively||(global.lively={})).lang=wi.createCommonjsRequire("/lively.lang")(wi.require$$0.join(e.libLocation,"index"))},initBrowserGlobals:function(e){remoteWorker.send=function(h){postMessage(h)};e="undefined"!==typeof self?self:this;e=e.Global=e;e.window=e;e.console=e.console||function(){var h={};["log","error","warn"].forEach(function(l){h[l]=
function(){for(var b=arguments[0],c=1;c<arguments.length;c++)b=b.replace("%s",arguments[c]);remoteWorker.send({type:l,message:["[",l.toUpperCase(),"] ",b].join("")})}});return h}()},initOnMessageHandler:function(e){function h(l){l=l.data.data?l.data:l;if(remoteWorker.messenger)remoteWorker.messenger.onMessage(l);else"close"==l.action&&(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())}if(remoteWorker.on)remoteWorker.on("message",h);else remoteWorker.onmessage=h},initWorkerInterface:function(e){remoteWorker.callStringifiedFunction=
function(h,l,b){try{var c=eval("("+h+")")}catch(d){b(Error("Cannot create function from string: "+d.stack||d));return}h=c.length===l.length+1;var g=lively.lang.fun.once(function(d,f){remoteWorker.isBusy=!1;b(d,f)});remoteWorker.isBusy=!0;h&&l.push(g);try{var a=c.apply(remoteWorker,l.concat([g]))}catch(d){g(d,null);return}h||g(null,a)};remoteWorker.httpRequest=function(h){if(h.url){var l=new XMLHttpRequest,b=h.method||"GET";l.onreadystatechange=function(){4===l.readyState&&h.done&&h.done(l)};l.open(b,
h.url);l.send()}else console.log("Error, httpRequest needs url")};remoteWorker.terminateIfNotBusyIn=function(h){setTimeout(function(){remoteWorker.isBusy?remoteWorker.terminateIfNotBusyIn(h):(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())},h)}},initWorkerMessenger:function(e){if(!e.useMessenger)return null;if(!lively.lang.messenger)throw Error("worker.create requires messenger.js to be loaded!");if(!lively.lang.events)throw Error("worker.create requires events.js to be loaded!");
return remoteWorker.messenger=lively.lang.messenger.create({services:{remoteEval:function(h,l){try{var b=eval(h.data.expr)}catch(c){b=c.stack||c}l.answer(h,{result:String(b)})},run:function(h,l){var b=h.data.func,c=h.data.args;b?remoteWorker.callStringifiedFunction(b,c,function(g,a){l.answer(h,{error:g?String(g):null,result:a})}):l.answer(h,{error:"no funcString"})},close:function(h,l){l.answer(h,{status:"OK"});remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}},isOnline:function(){return!0},
send:function(h,l){remoteWorker.send(h);l()},listen:function(h){h()},close:function(h){remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}})}};wi.BrowserWorker={create:function(e){e=e||{};if(!e.libLocation&&!e.scriptsToLoad){var h=document.querySelector('script[src$="worker.js"]');if(!h)throw Error('Cannot find library path to start worker. Use worker.create({libLocation: "..."}) to explicitly define the path!');e.libLocation=h.src.replace(/worker.js$/,"")}h=String(function(){self.onmessage=
function(l){if("setup"!==l.data.action)throw Error("expected setup to be first message but got "+JSON.stringify(l.data));l=l.data.options||{};initBrowserGlobals(l);loadDependenciesBrowser(l);initOnMessageHandler(l);initWorkerInterface(l);initWorkerMessenger(l);postMessage({workerReady:!0})};__FUNCTIONDECLARATIONS__}).split("__lvVarRecorder.").join("").replace("__FUNCTIONDECLARATIONS__",[wi.WorkerSetup.initBrowserGlobals,wi.WorkerSetup.loadDependenciesBrowser,wi.WorkerSetup.initOnMessageHandler,wi.WorkerSetup.initWorkerInterface,
wi.WorkerSetup.initWorkerMessenger].join("\n"));h="("+wi.Closure.fromSource(h).getFuncSource()+")();";h=new Worker(function(l){try{var b=new Blob([l],{type:"text/javascript"})}catch(c){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,b=new BlobBuilder,b.append(l),b=b.getBlob()}return("undefined"!==typeof webkitURL?webkitURL:URL).createObjectURL(b)}(h));(function(l,b){wi.makeEmitter(b);l.scriptsToLoad||(l.scriptsToLoad="base.js events.js object.js collection.js function.js string.js number.js date.js messenger.js worker.js".split(" ").map(function(g){return l.libLocation+
g}));var c=Object.keys(l).reduce(function(g,a){"function"!==typeof l[a]&&(g[a]=l[a]);return g},{});b.onmessage=function(g){void 0!==g.data.workerReady?(b.ready=!!g.data.workerReady,b.ready?b.emit("ready"):b.emit("close")):b.emit("message",g.data)};b.errors=[];b.onerror=function(g){console.error(g);b.errors.push(g);b.emit("error",g)};b.postMessage({action:"setup",options:c})})(e,h);return h}};wi.NodejsWorker={debug:!1,initCodeFileCreated:!1,create:function(e){e=e||{};var h,l=wi.makeEmitter({ready:!1,
errors:[],postMessage:function(b){h?l.ready?h.send(b):l.emit("error",Error("nodejs worker process not ready or already closed")):l.emit("error",Error("nodejs worker process not yet created"))}});wi.NodejsWorker.startWorker(e,function(b,c){b?(l.ready=!1,l.emit("error",b)):(h=c,h.on("message",function(g){wi.NodejsWorker.debug&&console.log("[WORKER PARENT] got message:",g);l.emit("message",g)}),h.on("close",function(){console.log("[WORKER PARENT] worker closed");l.emit("close")}),h.on("error",function(g){console.log("[WORKER PARENT] error ",
g);l.errors.push(g);l.emit("error",g)}),l.ready=!0,l.emit("ready"))});return l},workerSetupFunction:function(){var e=process;console.log("[WORKER] Starting init");e.on("message",function(h){if("setup"!==h.action)throw Error("expected setup to be first message but got "+JSON.stringify(h.data));e.removeAllListeners("message");h=h.data.options||{};console.log("[WORKER] running setup with options",h);loadDependenciesNodejs(h);initOnMessageHandler(h);initWorkerInterface(h);initWorkerMessenger(h);e.send({workerReady:!0})});
__FUNCTIONDECLARATIONS__},ensureInitCodeFile:function(e,h,l){var b=wi.require$$0,c=wi.require$$2,g=b.join(wi.require$$1.tmpDir(),"lively-nodejs-workers/"),a=b.join(g,"nodejs-worker-init.js");wi.NodejsWorker.initCodeFileCreated?c.exists(a,function(d){d?l(null,a):wi.NodejsWorker.createWorkerCodeFile(e,a,h,l)}):wi.NodejsWorker.createWorkerCodeFile(e,a,h,l)},createWorkerCodeFile:function(e,h,l,b){var c=wi.require$$2;e=wi.require$$3.exec;e("mkdir -p "+wi.require$$0.dirname(h),function(g,a,d){g?b(Error(["[WORKER PARENT] Could not create worker temp dir:",
a,d].join("\n"))):c.writeFile(h,l,function(f){wi.NodejsWorker.debug&&console.log("worker code file %s created",h);wi.NodejsWorker.initCodeFileCreated=!0;b(f,h)})})},startWorker:function(e,h){var l=wi.require$$4,b=wi.require$$3.fork,c=String(wi.NodejsWorker.workerSetupFunction).replace("__FUNCTIONDECLARATIONS__",[wi.WorkerSetup.loadDependenciesNodejs,wi.WorkerSetup.initOnMessageHandler,wi.WorkerSetup.initWorkerInterface,wi.WorkerSetup.initWorkerMessenger].join("\n"));l=l.format("(%s)();\n",c);wi.NodejsWorker.ensureInitCodeFile(e,
l,function(g,a){if(g)return h(g);var d=b(a,{});wi.NodejsWorker.debug&&console.log("worker forked");d.on("message",function(f){"pong"===f.action?console.log("[WORKER pong] ",f):"log"===f.action&&console.log("[Message from WORKER] ",f.data)});d.once("message",function(f){wi.NodejsWorker.debug&&console.log("worker setup done");h(null,d,f)});d.on("close",function(){wi.NodejsWorker.debug&&console.log("[WORKER PARENT] worker closed")});d.send({action:"setup",data:{options:e}});global.WORKER=d})}};wi.fork=
ai;wi.create=Yj;var sA=Object.freeze({__proto__:null,fork:ai,create:Yj});bd("a5",sA);var og=window.lively.FreezerRuntime.recorderFor("lively.lang/index.js");og.createLivelyLangObject=function(){return{chain:og.chain,noConflict:og.noConflict,installGlobals:og.installGlobals,uninstallGlobals:og.uninstallGlobals,globalInterfaceSpec:og.globalInterfaceSpec,toString:function(){return"[object lively.lang]"}}};og.globalInstall=ik;og.chain=jk;og.createChain=function(e,h){return Object.keys(e).reduce(function(l,
b){l[b]=function(){var c=Array.from(arguments);c=e[b].apply(null,[h].concat(c));return og.chain(c)};return l},{value:function(){return h}})};og.noConflict=Pm;og.installGlobals=Qm;og.installProperty=function(e,h){if(!e.isIn(og.livelyLang))throw h=Error("property not provided by lively.lang: "+e),console.error(h.stack||h),h;e=e.get(og.livelyLang);if("function"===typeof e&&"prototype"===h.slice(-2,-1).toString()){var l=e;e=function(){var b=Array.prototype.slice.call(arguments);b.unshift(this);return l.apply(null,
b)};e.toString=function(){return l.toString()}}h.set(og.GLOB,e,!0)};og.uninstallGlobals=Bp;og.string=Xj;og.num=Gm;og.fun=cp;og.Closure=bp;og.arr=aj;og.obj=bj;og.properties=Pq;og.date=$s;og.promise=yj;og.Path=qj;og.graph=iv;og.interval=jG;og.arrayProjection=kG;og.Group=hv;og.grid=qA;og.tree=Er;og.events=bt;og.messenger=lG;og.worker=sA;og.worker=sA;og.messenger=lG;og.events=bt;og.tree=Er;og.grid=qA;og.arrayProjection=kG;og.interval=jG;og.graph=iv;og.date=$s;og.properties=Pq;og.obj=bj;og.arr=aj;og.fun=
cp;og.num=Gm;og.string=Xj;og.Closure=bp;og.promise=yj;og.Path=qj;og.Group=hv;og.GLOB="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;og.isNode="undefined"!==typeof process&&process.env&&"function"===typeof process.exit;og.globalInterfaceSpec=[{action:"installMethods",target:"Array",sources:["arr"],methods:["genN","range","withN"]},{action:"installMethods",target:"Array.prototype",sources:["arr"],methods:"batchify clear clone compact doAndContinue equals filterByKey first grep groupByKey histogram intersect invoke last mask max min mutableCompact nestedDelay partition pluck pushAll pushAllAt pushAt pushIfNotIncluded reMatches reject rejectByKey remove removeAt replaceAt rotate shuffle sortBy sortByKey sum swap toTuples union uniq uniqBy uniqByKey without withoutAll zip".split(" "),
alias:[["select","filter"]]},{action:"installMethods",target:"Date",sources:["date"],methods:[]},{action:"installMethods",target:"Date.prototype",sources:["date"],methods:["equals","format","relativeTo"]},{action:"installMethods",target:"Function",sources:["fun"],methods:["fromString"]},{action:"installMethods",target:"Function.prototype",sources:["fun"],methods:"addToObject argumentNames asScript asScriptOf binds curry delay functionNames localFunctionNames getOriginal getVarMapping logCalls logCompletion logErrors qualifiedMethodName setProperty traceCalls wrap".split(" ")},
{action:"installMethods",target:"Number",sources:["num"],methods:[]},{action:"installMethods",target:"Number.prototype",sources:["num"],methods:["detent","randomSmallerInteger","roundTo","toDegrees","toRadians"]},{action:"installMethods",target:"Object",sources:["obj"],methods:"addScript clone deepCopy extend inherit isArray isBoolean isElement isEmpty isFunction isNumber isObject isRegExp isString isUndefined merge mergePropertyInHierarchy values valuesInPropertyHierarchy".split(" ")},{action:"installMethods",
target:"Object.prototype",sources:["obj"],methods:[]},{action:"installMethods",target:"String.prototype",sources:["string"],methods:"camelize capitalize digitValue empty hashCode include pad regExpEscape startsWithVowel succ times toArray toQueryParams truncate".split(" ")},{action:"installObject",target:"Numbers",source:"num",methods:"average between convertLength humanReadableByteSize median normalRandom parseLength random sort".split(" ")},{action:"installObject",target:"Properties",source:"properties",
methods:"all allOwnPropertiesOrFunctions allProperties any forEachOwn hash nameFor own ownValues values".split(" ")},{action:"installObject",target:"Strings",source:"string",methods:"camelCaseString createDataURI diff format formatFromArray indent lineIndexComputer lines md5 newUUID nonEmptyLines pad paragraphs peekLeft peekRight print printNested printTable printTree quote reMatches stringMatch tableize tokens unescapeCharacterEntities withDecimalPrecision".split(" ")},{action:"installObject",target:"Objects",
source:"obj",methods:"asObject equals inspect isMutableType safeToString shortPrintStringOf typeStringOf".split(" ")},{action:"installObject",target:"Functions",source:"fun",methods:"all compose composeAsync createQueue debounce debounceNamed either extractBody flip notYetImplemented once own throttle throttleNamed timeToRun timeToRunN waitFor workerWithCallbackQueue wrapperChain".split(" ")},{action:"installObject",target:"Grid",source:"grid"},{action:"installObject",target:"Interval",source:"interval"},
{action:"installObject",target:"lively.ArrayProjection",source:"arrayProjection"},{action:"installObject",target:"lively.Closure",source:"Closure"},{action:"installObject",target:"lively.Grouping",source:"Group"},{action:"installObject",target:"lively.PropertyPath",source:"Path"},{action:"installObject",target:"lively.Worker",source:"worker"},{action:"installObject",target:"lively.Class",source:"classHelper"}];var mG=og.createLivelyLangObject();og.livelyLang=mG;og.livelyLang=mG;og.globalInstall=ik;
og.chain=jk;og.noConflict=Pm;og.installGlobals=Qm;og.uninstallGlobals=Bp;var ZQ=Object.freeze({__proto__:null,worker:sA,messenger:lG,events:bt,tree:Er,grid:qA,arrayProjection:kG,interval:jG,graph:iv,date:$s,properties:Pq,obj:bj,arr:aj,fun:cp,num:Gm,string:Xj,Closure:bp,promise:yj,Path:qj,Group:hv,livelyLang:mG,globalInstall:ik,chain:jk,noConflict:Pm,installGlobals:Qm,uninstallGlobals:Bp});bd("c7",ZQ);var $Q=window.lively.FreezerRuntime.recorderFor("lively.ast/generated/estree-visitor.js"),Vn=bd("aM",
function(){function e(){Sd(this,e)}uc(e,[{key:"accept",value:function(h,l,b){if(!h)throw Error("Undefined AST node in Visitor.accept:\n  "+b.join(".")+"\n  "+h);if(!h.type)throw Error("Strangee AST node without type in Visitor.accept:\n  "+b.join(".")+"\n  "+JSON.stringify(h));switch(h.type){case "Node":return this.visitNode(h,l,b);case "SourceLocation":return this.visitSourceLocation(h,l,b);case "Position":return this.visitPosition(h,l,b);case "Program":return this.visitProgram(h,l,b);case "Function":return this.visitFunction(h,
l,b);case "Statement":return this.visitStatement(h,l,b);case "SwitchCase":return this.visitSwitchCase(h,l,b);case "CatchClause":return this.visitCatchClause(h,l,b);case "VariableDeclarator":return this.visitVariableDeclarator(h,l,b);case "Expression":return this.visitExpression(h,l,b);case "Property":return this.visitProperty(h,l,b);case "Pattern":return this.visitPattern(h,l,b);case "Super":return this.visitSuper(h,l,b);case "SpreadElement":return this.visitSpreadElement(h,l,b);case "TemplateElement":return this.visitTemplateElement(h,
l,b);case "Class":return this.visitClass(h,l,b);case "ClassBody":return this.visitClassBody(h,l,b);case "MethodDefinition":return this.visitMethodDefinition(h,l,b);case "ModuleDeclaration":return this.visitModuleDeclaration(h,l,b);case "ModuleSpecifier":return this.visitModuleSpecifier(h,l,b);case "JSXEmptyExpression":return this.visitJSXEmptyExpression(h,l,b);case "JSXExpressionContainer":return this.visitJSXExpressionContainer(h,l,b);case "JSXSpreadChild":return this.visitJSXSpreadChild(h,l,b);
case "JSXBoundaryElement":return this.visitJSXBoundaryElement(h,l,b);case "JSXAttribute":return this.visitJSXAttribute(h,l,b);case "JSXText":return this.visitJSXText(h,l,b);case "JSXOpeningFragment":return this.visitJSXOpeningFragment(h,l,b);case "JSXClosingFragment":return this.visitJSXClosingFragment(h,l,b);case "ChainElement":return this.visitChainElement(h,l,b);case "PropertyDefinition":return this.visitPropertyDefinition(h,l,b);case "PrivateIdentifier":return this.visitPrivateIdentifier(h,l,
b);case "Decorator":return this.visitDecorator(h,l,b);case "AccessorProperty":return this.visitAccessorProperty(h,l,b);case "Identifier":return this.visitIdentifier(h,l,b);case "Literal":return this.visitLiteral(h,l,b);case "ExpressionStatement":return this.visitExpressionStatement(h,l,b);case "BlockStatement":return this.visitBlockStatement(h,l,b);case "EmptyStatement":return this.visitEmptyStatement(h,l,b);case "DebuggerStatement":return this.visitDebuggerStatement(h,l,b);case "WithStatement":return this.visitWithStatement(h,
l,b);case "ReturnStatement":return this.visitReturnStatement(h,l,b);case "LabeledStatement":return this.visitLabeledStatement(h,l,b);case "BreakStatement":return this.visitBreakStatement(h,l,b);case "ContinueStatement":return this.visitContinueStatement(h,l,b);case "IfStatement":return this.visitIfStatement(h,l,b);case "SwitchStatement":return this.visitSwitchStatement(h,l,b);case "ThrowStatement":return this.visitThrowStatement(h,l,b);case "TryStatement":return this.visitTryStatement(h,l,b);case "WhileStatement":return this.visitWhileStatement(h,
l,b);case "DoWhileStatement":return this.visitDoWhileStatement(h,l,b);case "ForStatement":return this.visitForStatement(h,l,b);case "ForInStatement":return this.visitForInStatement(h,l,b);case "Declaration":return this.visitDeclaration(h,l,b);case "ThisExpression":return this.visitThisExpression(h,l,b);case "ArrayExpression":return this.visitArrayExpression(h,l,b);case "ObjectExpression":return this.visitObjectExpression(h,l,b);case "FunctionExpression":return this.visitFunctionExpression(h,l,b);
case "UnaryExpression":return this.visitUnaryExpression(h,l,b);case "UpdateExpression":return this.visitUpdateExpression(h,l,b);case "BinaryExpression":return this.visitBinaryExpression(h,l,b);case "AssignmentExpression":return this.visitAssignmentExpression(h,l,b);case "LogicalExpression":return this.visitLogicalExpression(h,l,b);case "MemberExpression":return this.visitMemberExpression(h,l,b);case "ConditionalExpression":return this.visitConditionalExpression(h,l,b);case "CallExpression":return this.visitCallExpression(h,
l,b);case "NewExpression":return this.visitNewExpression(h,l,b);case "SequenceExpression":return this.visitSequenceExpression(h,l,b);case "ArrowFunctionExpression":return this.visitArrowFunctionExpression(h,l,b);case "YieldExpression":return this.visitYieldExpression(h,l,b);case "TemplateLiteral":return this.visitTemplateLiteral(h,l,b);case "TaggedTemplateExpression":return this.visitTaggedTemplateExpression(h,l,b);case "AssignmentProperty":return this.visitAssignmentProperty(h,l,b);case "ObjectPattern":return this.visitObjectPattern(h,
l,b);case "ArrayPattern":return this.visitArrayPattern(h,l,b);case "RestElement":return this.visitRestElement(h,l,b);case "AssignmentPattern":return this.visitAssignmentPattern(h,l,b);case "ClassExpression":return this.visitClassExpression(h,l,b);case "MetaProperty":return this.visitMetaProperty(h,l,b);case "ImportDeclaration":return this.visitImportDeclaration(h,l,b);case "ImportSpecifier":return this.visitImportSpecifier(h,l,b);case "ImportDefaultSpecifier":return this.visitImportDefaultSpecifier(h,
l,b);case "ImportNamespaceSpecifier":return this.visitImportNamespaceSpecifier(h,l,b);case "ExportNamedDeclaration":return this.visitExportNamedDeclaration(h,l,b);case "ExportSpecifier":return this.visitExportSpecifier(h,l,b);case "AnonymousDefaultExportedFunctionDeclaration":return this.visitAnonymousDefaultExportedFunctionDeclaration(h,l,b);case "AnonymousDefaultExportedClassDeclaration":return this.visitAnonymousDefaultExportedClassDeclaration(h,l,b);case "ExportDefaultDeclaration":return this.visitExportDefaultDeclaration(h,
l,b);case "ExportAllDeclaration":return this.visitExportAllDeclaration(h,l,b);case "AwaitExpression":return this.visitAwaitExpression(h,l,b);case "JSXMemberExpression":return this.visitJSXMemberExpression(h,l,b);case "JSXNamespacedName":return this.visitJSXNamespacedName(h,l,b);case "JSXOpeningElement":return this.visitJSXOpeningElement(h,l,b);case "JSXClosingElement":return this.visitJSXClosingElement(h,l,b);case "JSXSpreadAttribute":return this.visitJSXSpreadAttribute(h,l,b);case "JSXElement":return this.visitJSXElement(h,
l,b);case "JSXFragment":return this.visitJSXFragment(h,l,b);case "ChainExpression":return this.visitChainExpression(h,l,b);case "ImportExpression":return this.visitImportExpression(h,l,b);case "RegExpLiteral":return this.visitRegExpLiteral(h,l,b);case "Directive":return this.visitDirective(h,l,b);case "FunctionBody":return this.visitFunctionBody(h,l,b);case "FunctionDeclaration":return this.visitFunctionDeclaration(h,l,b);case "VariableDeclaration":return this.visitVariableDeclaration(h,l,b);case "ForOfStatement":return this.visitForOfStatement(h,
l,b);case "ClassDeclaration":return this.visitClassDeclaration(h,l,b);case "JSXIdentifier":return this.visitJSXIdentifier(h,l,b);case "BigIntLiteral":return this.visitBigIntLiteral(h,l,b);case "StaticBlock":return this.visitStaticBlock(h,l,b)}throw Error("No visit function in AST visitor Visitor for:\n  "+b.join(".")+"\n  "+JSON.stringify(h));}},{key:"visitNode",value:function(h,l,b){return h}},{key:"visitSourceLocation",value:function(h,l,b){h.start=this.accept(h.start,l,b.concat(["start"]));h.end=
this.accept(h.end,l,b.concat(["end"]));return h}},{key:"visitPosition",value:function(h,l,b){return h}},{key:"visitProgram",value:function(h,l,b){for(var c=[],g=0;g<h.body.length;g++){var a=h.body[g];a=a?this.accept(a,l,b.concat(["body",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.body=c;return h}},{key:"visitFunction",value:function(h,l,b){h.id&&(h.id=this.accept(h.id,l,b.concat(["id"])));for(var c=[],g=0;g<h.params.length;g++){var a=h.params[g];a=a?this.accept(a,l,b.concat(["params",g])):
a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.params=c;h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitStatement",value:function(h,l,b){return h}},{key:"visitSwitchCase",value:function(h,l,b){h.test&&(h.test=this.accept(h.test,l,b.concat(["test"])));for(var c=[],g=0;g<h.consequent.length;g++){var a=h.consequent[g];a=a?this.accept(a,l,b.concat(["consequent",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.consequent=c;return h}},{key:"visitCatchClause",value:function(h,
l,b){h.param&&(h.param=this.accept(h.param,l,b.concat(["param"])));h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitVariableDeclarator",value:function(h,l,b){h.id=this.accept(h.id,l,b.concat(["id"]));h.init&&(h.init=this.accept(h.init,l,b.concat(["init"])));return h}},{key:"visitExpression",value:function(h,l,b){return h}},{key:"visitProperty",value:function(h,l,b){h.key=this.accept(h.key,l,b.concat(["key"]));h.value=this.accept(h.value,l,b.concat(["value"]));return h}},{key:"visitPattern",
value:function(h,l,b){return h}},{key:"visitSuper",value:function(h,l,b){return h}},{key:"visitSpreadElement",value:function(h,l,b){h.argument=this.accept(h.argument,l,b.concat(["argument"]));return h}},{key:"visitTemplateElement",value:function(h,l,b){return h}},{key:"visitClass",value:function(h,l,b){h.id&&(h.id=this.accept(h.id,l,b.concat(["id"])));h.superClass&&(h.superClass=this.accept(h.superClass,l,b.concat(["superClass"])));h.body=this.accept(h.body,l,b.concat(["body"]));for(var c=[],g=0;g<
h.decorators.length;g++){var a=h.decorators[g];a=a?this.accept(a,l,b.concat(["decorators",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.decorators=c;return h}},{key:"visitClassBody",value:function(h,l,b){for(var c=[],g=0;g<h.body.length;g++){var a=h.body[g];a=a?this.accept(a,l,b.concat(["body",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.body=c;return h}},{key:"visitMethodDefinition",value:function(h,l,b){h.key=this.accept(h.key,l,b.concat(["key"]));h.value=this.accept(h.value,l,
b.concat(["value"]));for(var c=[],g=0;g<h.decorators.length;g++){var a=h.decorators[g];a=a?this.accept(a,l,b.concat(["decorators",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.decorators=c;return h}},{key:"visitModuleDeclaration",value:function(h,l,b){return h}},{key:"visitModuleSpecifier",value:function(h,l,b){h.local=this.accept(h.local,l,b.concat(["local"]));return h}},{key:"visitJSXEmptyExpression",value:function(h,l,b){return h}},{key:"visitJSXExpressionContainer",value:function(h,l,
b){h.expression=this.accept(h.expression,l,b.concat(["expression"]));return h}},{key:"visitJSXSpreadChild",value:function(h,l,b){h.expression=this.accept(h.expression,l,b.concat(["expression"]));return h}},{key:"visitJSXBoundaryElement",value:function(h,l,b){h.name=this.accept(h.name,l,b.concat(["name"]));return h}},{key:"visitJSXAttribute",value:function(h,l,b){h.name=this.accept(h.name,l,b.concat(["name"]));h.value&&(h.value=this.accept(h.value,l,b.concat(["value"])));return h}},{key:"visitJSXText",
value:function(h,l,b){return h}},{key:"visitJSXOpeningFragment",value:function(h,l,b){return h}},{key:"visitJSXClosingFragment",value:function(h,l,b){return h}},{key:"visitChainElement",value:function(h,l,b){return h}},{key:"visitPropertyDefinition",value:function(h,l,b){h.key=this.accept(h.key,l,b.concat(["key"]));h.value&&(h.value=this.accept(h.value,l,b.concat(["value"])));for(var c=[],g=0;g<h.decorators.length;g++){var a=h.decorators[g];a=a?this.accept(a,l,b.concat(["decorators",g])):a;Array.isArray(a)?
c.push.apply(c,a):c.push(a)}h.decorators=c;return h}},{key:"visitPrivateIdentifier",value:function(h,l,b){return h}},{key:"visitDecorator",value:function(h,l,b){h.expression=this.accept(h.expression,l,b.concat(["expression"]));return h}},{key:"visitAccessorProperty",value:function(h,l,b){h.key=this.accept(h.key,l,b.concat(["key"]));h.value&&(h.value=this.accept(h.value,l,b.concat(["value"])));for(var c=[],g=0;g<h.decorators.length;g++){var a=h.decorators[g];a=a?this.accept(a,l,b.concat(["decorators",
g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.decorators=c;return h}},{key:"visitIdentifier",value:function(h,l,b){return h}},{key:"visitLiteral",value:function(h,l,b){return h}},{key:"visitExpressionStatement",value:function(h,l,b){h.expression=this.accept(h.expression,l,b.concat(["expression"]));return h}},{key:"visitBlockStatement",value:function(h,l,b){for(var c=[],g=0;g<h.body.length;g++){var a=h.body[g];a=a?this.accept(a,l,b.concat(["body",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.body=
c;return h}},{key:"visitEmptyStatement",value:function(h,l,b){return h}},{key:"visitDebuggerStatement",value:function(h,l,b){return h}},{key:"visitWithStatement",value:function(h,l,b){h.object=this.accept(h.object,l,b.concat(["object"]));h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitReturnStatement",value:function(h,l,b){h.argument&&(h.argument=this.accept(h.argument,l,b.concat(["argument"])));return h}},{key:"visitLabeledStatement",value:function(h,l,b){h.label=this.accept(h.label,
l,b.concat(["label"]));h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitBreakStatement",value:function(h,l,b){h.label&&(h.label=this.accept(h.label,l,b.concat(["label"])));return h}},{key:"visitContinueStatement",value:function(h,l,b){h.label&&(h.label=this.accept(h.label,l,b.concat(["label"])));return h}},{key:"visitIfStatement",value:function(h,l,b){h.test=this.accept(h.test,l,b.concat(["test"]));h.consequent=this.accept(h.consequent,l,b.concat(["consequent"]));h.alternate&&
(h.alternate=this.accept(h.alternate,l,b.concat(["alternate"])));return h}},{key:"visitSwitchStatement",value:function(h,l,b){h.discriminant=this.accept(h.discriminant,l,b.concat(["discriminant"]));for(var c=[],g=0;g<h.cases.length;g++){var a=h.cases[g];a=a?this.accept(a,l,b.concat(["cases",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.cases=c;return h}},{key:"visitThrowStatement",value:function(h,l,b){h.argument=this.accept(h.argument,l,b.concat(["argument"]));return h}},{key:"visitTryStatement",
value:function(h,l,b){h.block=this.accept(h.block,l,b.concat(["block"]));h.handler&&(h.handler=this.accept(h.handler,l,b.concat(["handler"])));h.finalizer&&(h.finalizer=this.accept(h.finalizer,l,b.concat(["finalizer"])));return h}},{key:"visitWhileStatement",value:function(h,l,b){h.test=this.accept(h.test,l,b.concat(["test"]));h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitDoWhileStatement",value:function(h,l,b){h.body=this.accept(h.body,l,b.concat(["body"]));h.test=this.accept(h.test,
l,b.concat(["test"]));return h}},{key:"visitForStatement",value:function(h,l,b){h.init&&(h.init=this.accept(h.init,l,b.concat(["init"])));h.test&&(h.test=this.accept(h.test,l,b.concat(["test"])));h.update&&(h.update=this.accept(h.update,l,b.concat(["update"])));h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitForInStatement",value:function(h,l,b){h.left=this.accept(h.left,l,b.concat(["left"]));h.right=this.accept(h.right,l,b.concat(["right"]));h.body=this.accept(h.body,l,b.concat(["body"]));
return h}},{key:"visitDeclaration",value:function(h,l,b){return h}},{key:"visitThisExpression",value:function(h,l,b){return h}},{key:"visitArrayExpression",value:function(h,l,b){if(h.elements){for(var c=[],g=0;g<h.elements.length;g++){var a=h.elements[g];a=a?this.accept(a,l,b.concat(["elements",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.elements=c}return h}},{key:"visitObjectExpression",value:function(h,l,b){for(var c=[],g=0;g<h.properties.length;g++){var a=h.properties[g];a=a?this.accept(a,
l,b.concat(["properties",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.properties=c;return h}},{key:"visitFunctionExpression",value:function(h,l,b){h.id&&(h.id=this.accept(h.id,l,b.concat(["id"])));for(var c=[],g=0;g<h.params.length;g++){var a=h.params[g];a=a?this.accept(a,l,b.concat(["params",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.params=c;h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitUnaryExpression",value:function(h,l,b){h.argument=this.accept(h.argument,
l,b.concat(["argument"]));return h}},{key:"visitUpdateExpression",value:function(h,l,b){h.argument=this.accept(h.argument,l,b.concat(["argument"]));return h}},{key:"visitBinaryExpression",value:function(h,l,b){h.left=this.accept(h.left,l,b.concat(["left"]));h.right=this.accept(h.right,l,b.concat(["right"]));return h}},{key:"visitAssignmentExpression",value:function(h,l,b){h.left=this.accept(h.left,l,b.concat(["left"]));h.right=this.accept(h.right,l,b.concat(["right"]));return h}},{key:"visitLogicalExpression",
value:function(h,l,b){h.left=this.accept(h.left,l,b.concat(["left"]));h.right=this.accept(h.right,l,b.concat(["right"]));return h}},{key:"visitMemberExpression",value:function(h,l,b){h.object=this.accept(h.object,l,b.concat(["object"]));h.property=this.accept(h.property,l,b.concat(["property"]));return h}},{key:"visitConditionalExpression",value:function(h,l,b){h.test=this.accept(h.test,l,b.concat(["test"]));h.alternate=this.accept(h.alternate,l,b.concat(["alternate"]));h.consequent=this.accept(h.consequent,
l,b.concat(["consequent"]));return h}},{key:"visitCallExpression",value:function(h,l,b){h.callee=this.accept(h.callee,l,b.concat(["callee"]));for(var c=[],g=0;g<h.arguments.length;g++){var a=h.arguments[g];a=a?this.accept(a,l,b.concat(["arguments",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.arguments=c;return h}},{key:"visitNewExpression",value:function(h,l,b){h.callee=this.accept(h.callee,l,b.concat(["callee"]));for(var c=[],g=0;g<h.arguments.length;g++){var a=h.arguments[g];a=a?this.accept(a,
l,b.concat(["arguments",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.arguments=c;return h}},{key:"visitSequenceExpression",value:function(h,l,b){for(var c=[],g=0;g<h.expressions.length;g++){var a=h.expressions[g];a=a?this.accept(a,l,b.concat(["expressions",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.expressions=c;return h}},{key:"visitArrowFunctionExpression",value:function(h,l,b){h.body=this.accept(h.body,l,b.concat(["body"]));h.id&&(h.id=this.accept(h.id,l,b.concat(["id"])));
for(var c=[],g=0;g<h.params.length;g++){var a=h.params[g];a=a?this.accept(a,l,b.concat(["params",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.params=c;return h}},{key:"visitYieldExpression",value:function(h,l,b){h.argument&&(h.argument=this.accept(h.argument,l,b.concat(["argument"])));return h}},{key:"visitTemplateLiteral",value:function(h,l,b){for(var c=[],g=0;g<h.quasis.length;g++){var a=h.quasis[g];a=a?this.accept(a,l,b.concat(["quasis",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.quasis=
c;c=[];for(g=0;g<h.expressions.length;g++)a=(a=h.expressions[g])?this.accept(a,l,b.concat(["expressions",g])):a,Array.isArray(a)?c.push.apply(c,a):c.push(a);h.expressions=c;return h}},{key:"visitTaggedTemplateExpression",value:function(h,l,b){h.tag=this.accept(h.tag,l,b.concat(["tag"]));h.quasi=this.accept(h.quasi,l,b.concat(["quasi"]));return h}},{key:"visitAssignmentProperty",value:function(h,l,b){h.value=this.accept(h.value,l,b.concat(["value"]));h.key=this.accept(h.key,l,b.concat(["key"]));return h}},
{key:"visitObjectPattern",value:function(h,l,b){for(var c=[],g=0;g<h.properties.length;g++){var a=h.properties[g];a=a?this.accept(a,l,b.concat(["properties",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.properties=c;return h}},{key:"visitArrayPattern",value:function(h,l,b){if(h.elements){for(var c=[],g=0;g<h.elements.length;g++){var a=h.elements[g];a=a?this.accept(a,l,b.concat(["elements",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.elements=c}return h}},{key:"visitRestElement",value:function(h,
l,b){h.argument=this.accept(h.argument,l,b.concat(["argument"]));return h}},{key:"visitAssignmentPattern",value:function(h,l,b){h.left=this.accept(h.left,l,b.concat(["left"]));h.right=this.accept(h.right,l,b.concat(["right"]));return h}},{key:"visitClassExpression",value:function(h,l,b){h.id&&(h.id=this.accept(h.id,l,b.concat(["id"])));h.superClass&&(h.superClass=this.accept(h.superClass,l,b.concat(["superClass"])));h.body=this.accept(h.body,l,b.concat(["body"]));for(var c=[],g=0;g<h.decorators.length;g++){var a=
h.decorators[g];a=a?this.accept(a,l,b.concat(["decorators",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.decorators=c;return h}},{key:"visitMetaProperty",value:function(h,l,b){h.meta=this.accept(h.meta,l,b.concat(["meta"]));h.property=this.accept(h.property,l,b.concat(["property"]));return h}},{key:"visitImportDeclaration",value:function(h,l,b){for(var c=[],g=0;g<h.specifiers.length;g++){var a=h.specifiers[g];a=a?this.accept(a,l,b.concat(["specifiers",g])):a;Array.isArray(a)?c.push.apply(c,
a):c.push(a)}h.specifiers=c;h.source=this.accept(h.source,l,b.concat(["source"]));return h}},{key:"visitImportSpecifier",value:function(h,l,b){h.imported=this.accept(h.imported,l,b.concat(["imported"]));h.local=this.accept(h.local,l,b.concat(["local"]));return h}},{key:"visitImportDefaultSpecifier",value:function(h,l,b){h.local=this.accept(h.local,l,b.concat(["local"]));return h}},{key:"visitImportNamespaceSpecifier",value:function(h,l,b){h.local=this.accept(h.local,l,b.concat(["local"]));return h}},
{key:"visitExportNamedDeclaration",value:function(h,l,b){h.declaration&&(h.declaration=this.accept(h.declaration,l,b.concat(["declaration"])));for(var c=[],g=0;g<h.specifiers.length;g++){var a=h.specifiers[g];a=a?this.accept(a,l,b.concat(["specifiers",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.specifiers=c;h.source&&(h.source=this.accept(h.source,l,b.concat(["source"])));return h}},{key:"visitExportSpecifier",value:function(h,l,b){h.exported=this.accept(h.exported,l,b.concat(["exported"]));
h.local=this.accept(h.local,l,b.concat(["local"]));return h}},{key:"visitAnonymousDefaultExportedFunctionDeclaration",value:function(h,l,b){h.id&&(h.id=this.accept(h.id,l,b.concat(["id"])));for(var c=[],g=0;g<h.params.length;g++){var a=h.params[g];a=a?this.accept(a,l,b.concat(["params",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.params=c;h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitAnonymousDefaultExportedClassDeclaration",value:function(h,l,b){h.id&&(h.id=this.accept(h.id,
l,b.concat(["id"])));h.superClass&&(h.superClass=this.accept(h.superClass,l,b.concat(["superClass"])));h.body=this.accept(h.body,l,b.concat(["body"]));for(var c=[],g=0;g<h.decorators.length;g++){var a=h.decorators[g];a=a?this.accept(a,l,b.concat(["decorators",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.decorators=c;return h}},{key:"visitExportDefaultDeclaration",value:function(h,l,b){h.declaration=this.accept(h.declaration,l,b.concat(["declaration"]));return h}},{key:"visitExportAllDeclaration",
value:function(h,l,b){h.source=this.accept(h.source,l,b.concat(["source"]));h.exported&&(h.exported=this.accept(h.exported,l,b.concat(["exported"])));return h}},{key:"visitAwaitExpression",value:function(h,l,b){h.argument=this.accept(h.argument,l,b.concat(["argument"]));return h}},{key:"visitJSXMemberExpression",value:function(h,l,b){h.object=this.accept(h.object,l,b.concat(["object"]));h.property=this.accept(h.property,l,b.concat(["property"]));return h}},{key:"visitJSXNamespacedName",value:function(h,
l,b){h.namespace=this.accept(h.namespace,l,b.concat(["namespace"]));h.name=this.accept(h.name,l,b.concat(["name"]));return h}},{key:"visitJSXOpeningElement",value:function(h,l,b){for(var c=[],g=0;g<h.attributes.length;g++){var a=h.attributes[g];a=a?this.accept(a,l,b.concat(["attributes",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.attributes=c;h.name=this.accept(h.name,l,b.concat(["name"]));return h}},{key:"visitJSXClosingElement",value:function(h,l,b){h.name=this.accept(h.name,l,b.concat(["name"]));
return h}},{key:"visitJSXSpreadAttribute",value:function(h,l,b){h.argument=this.accept(h.argument,l,b.concat(["argument"]));return h}},{key:"visitJSXElement",value:function(h,l,b){h.openingElement=this.accept(h.openingElement,l,b.concat(["openingElement"]));for(var c=[],g=0;g<h.children.length;g++){var a=h.children[g];a=a?this.accept(a,l,b.concat(["children",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.children=c;h.closingElement&&(h.closingElement=this.accept(h.closingElement,l,b.concat(["closingElement"])));
return h}},{key:"visitJSXFragment",value:function(h,l,b){h.openingFragment=this.accept(h.openingFragment,l,b.concat(["openingFragment"]));for(var c=[],g=0;g<h.children.length;g++){var a=h.children[g];a=a?this.accept(a,l,b.concat(["children",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.children=c;h.closingFragment=this.accept(h.closingFragment,l,b.concat(["closingFragment"]));return h}},{key:"visitChainExpression",value:function(h,l,b){h.expression=this.accept(h.expression,l,b.concat(["expression"]));
return h}},{key:"visitImportExpression",value:function(h,l,b){h.source=this.accept(h.source,l,b.concat(["source"]));return h}},{key:"visitRegExpLiteral",value:function(h,l,b){return h}},{key:"visitDirective",value:function(h,l,b){h.expression=this.accept(h.expression,l,b.concat(["expression"]));return h}},{key:"visitFunctionBody",value:function(h,l,b){for(var c=[],g=0;g<h.body.length;g++){var a=h.body[g];a=a?this.accept(a,l,b.concat(["body",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.body=
c;return h}},{key:"visitFunctionDeclaration",value:function(h,l,b){h.id&&(h.id=this.accept(h.id,l,b.concat(["id"])));for(var c=[],g=0;g<h.params.length;g++){var a=h.params[g];a=a?this.accept(a,l,b.concat(["params",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.params=c;h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitVariableDeclaration",value:function(h,l,b){for(var c=[],g=0;g<h.declarations.length;g++){var a=h.declarations[g];a=a?this.accept(a,l,b.concat(["declarations",
g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.declarations=c;return h}},{key:"visitForOfStatement",value:function(h,l,b){h.left=this.accept(h.left,l,b.concat(["left"]));h.right=this.accept(h.right,l,b.concat(["right"]));h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitClassDeclaration",value:function(h,l,b){h.id=this.accept(h.id,l,b.concat(["id"]));h.superClass&&(h.superClass=this.accept(h.superClass,l,b.concat(["superClass"])));h.body=this.accept(h.body,l,b.concat(["body"]));
var c=[];if(!h.decorators)debugger;for(var g=0;g<h.decorators.length;g++){var a=h.decorators[g];a=a?this.accept(a,l,b.concat(["decorators",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.decorators=c;return h}},{key:"visitJSXIdentifier",value:function(h,l,b){return h}},{key:"visitBigIntLiteral",value:function(h,l,b){return h}},{key:"visitStaticBlock",value:function(h,l,b){for(var c=[],g=0;g<h.body.length;g++){var a=h.body[g];a=a?this.accept(a,l,b.concat(["body",g])):a;Array.isArray(a)?c.push.apply(c,
a):c.push(a)}h.body=c;return h}}]);return e}());$Q.Visitor=Vn;$Q["default"]=Vn;var Wm=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitors.js");Wm.obj=bj;Wm.Path=qj;Wm.Visitor=Vn;var nG=function(e){function h(){Sd(this,h);return l.apply(this,arguments)}vd(h,e);var l=qb(h);uc(h,[{key:"accept",value:function(b,c,g){var a=g.map(function(f){return"string"===typeof f?".".concat(f):"[".concat(f,"]")}).join(""),d=[];g=ic(Ed(h.prototype),"accept",this).call(this,b,{index:c.index,
tree:d},g);c.tree.push({node:b,path:a,index:c.index++,children:d});return g}}]);return h}(Wm.Visitor);Wm.PrinterVisitor=nG;var oG=function(e){function h(){Sd(this,h);return l.apply(this,arguments)}vd(h,e);var l=qb(h);uc(h,[{key:"recordNotEqual",value:function(b,c,g,a){g.comparisons.errors.push({node1:b,node2:c,path:g.completePath,msg:a})}},{key:"compareType",value:function(b,c,g){return this.compareField("type",b,c,g)}},{key:"compareField",value:function(b,c,g,a){g=Wm.Path(a.completePath.join(".")).get(g);
if(c&&g&&c[b]===g[b]||c&&"*"===c[b]||g&&"*"===g[b])return!0;var d=a.completePath.join(".")+"."+b;this.recordNotEqual(c,g,a,c?g?d+" is not equal: "+c[b]+" vs. "+g[b]:"node2 not defined but node1 ("+d+") is: "+c[b]:"node1 on "+d+" not defined");return!1}},{key:"accept",value:function(b,c,g,a){var d=Wm.Path(a.join(".")).get(c);if("*"!==b&&"*"!==d&&(g={completePath:a,comparisons:g.comparisons},this.compareType(b,c,g)))this["visit"+b.type](b,c,g,a)}},{key:"visitFunction",value:function(b,c,g,a){b.generator&&
this.compareField("generator",b,c,g);b.expression&&this.compareField("expression",b,c,g);return ic(Ed(h.prototype),"visitFunction",this).call(this,b,c,g,a)}},{key:"visitSwitchStatement",value:function(b,c,g,a){b.lexical&&this.compareField("lexical",b,c,g);return ic(Ed(h.prototype),"visitSwitchStatement",this).call(this,b,c,g,a)}},{key:"visitForInStatement",value:function(b,c,g,a){b.each&&this.compareField("each",b,c,g);return ic(Ed(h.prototype),"visitForInStatement",this).call(this,b,c,g,a)}},{key:"visitFunctionDeclaration",
value:function(b,c,g,a){b.generator&&this.compareField("generator",b,c,g);b.expression&&this.compareField("expression",b,c,g);return ic(Ed(h.prototype),"visitFunctionDeclaration",this).call(this,b,c,g,a)}},{key:"visitVariableDeclaration",value:function(b,c,g,a){this.compareField("kind",b,c,g);return ic(Ed(h.prototype),"visitVariableDeclaration",this).call(this,b,c,g,a)}},{key:"visitUnaryExpression",value:function(b,c,g,a){this.compareField("operator",b,c,g);b.prefix&&this.compareField("prefix",b,
c,g);return ic(Ed(h.prototype),"visitUnaryExpression",this).call(this,b,c,g,a)}},{key:"visitBinaryExpression",value:function(b,c,g,a){this.compareField("operator",b,c,g);return ic(Ed(h.prototype),"visitBinaryExpression",this).call(this,b,c,g,a)}},{key:"visitAssignmentExpression",value:function(b,c,g,a){this.compareField("operator",b,c,g);return ic(Ed(h.prototype),"visitAssignmentExpression",this).call(this,b,c,g,a)}},{key:"visitUpdateExpression",value:function(b,c,g,a){this.compareField("operator",
b,c,g);b.prefix&&this.compareField("prefix",b,c,g);return ic(Ed(h.prototype),"visitUpdateExpression",this).call(this,b,c,g,a)}},{key:"visitLogicalExpression",value:function(b,c,g,a){this.compareField("operator",b,c,g);return ic(Ed(h.prototype),"visitLogicalExpression",this).call(this,b,c,g,a)}},{key:"visitMemberExpression",value:function(b,c,g,a){b.computed&&this.compareField("computed",b,c,g);return ic(Ed(h.prototype),"visitMemberExpression",this).call(this,b,c,g,a)}},{key:"visitComprehensionBlock",
value:function(b,c,g,a){b.each&&this.compareField("each",b,c,g);return ic(Ed(h.prototype),"visitComprehensionBlock",this).call(this,b,c,g,a)}},{key:"visitIdentifier",value:function(b,c,g,a){this.compareField("name",b,c,g);return ic(Ed(h.prototype),"visitIdentifier",this).call(this,b,c,g,a)}},{key:"visitLiteral",value:function(b,c,g,a){this.compareField("value",b,c,g);return ic(Ed(h.prototype),"visitLiteral",this).call(this,b,c,g,a)}},{key:"visitClassDeclaration",value:function(b,c,g,a){this.compareField("id",
b,c,g);b.superClass&&this.compareField("superClass",b,c,g);this.compareField("body",b,c,g);return ic(Ed(h.prototype),"visitClassDeclaration",this).call(this,b,c,g,a)}},{key:"visitClassBody",value:function(b,c,g,a){this.compareField("body",b,c,g);return ic(Ed(h.prototype),"visitClassBody",this).call(this,b,c,g,a)}},{key:"visitMethodDefinition",value:function(b,c,g,a){this.compareField("static",b,c,g);this.compareField("computed",b,c,g);this.compareField("kind",b,c,g);this.compareField("key",b,c,g);
this.compareField("value",b,c,g);return ic(Ed(h.prototype),"visitMethodDefinition",this).call(this,b,c,g,a)}}]);return h}(Wm.Visitor);Wm.ComparisonVisitor=oG;var pG=function(e){function h(){Sd(this,h);return l.apply(this,arguments)}vd(h,e);var l=qb(h);uc(h,[{key:"newScope",value:function(b,c){b={node:b,varDecls:[],varDeclPaths:[],funcDecls:[],funcDeclPaths:[],classDecls:[],classDeclPaths:[],classExprs:[],classExprPaths:[],methodDecls:[],methodDeclPaths:[],importSpecifiers:[],importSpecifierPaths:[],
exportDecls:[],exportDeclPaths:[],refs:[],thisRefs:[],params:[],catches:[],subScopes:[],resolvedRefMap:new Map};c&&c.subScopes.push(b);return b}},{key:"visitVariableDeclaration",value:function(b,c,g){c.varDecls.push(b);c.varDeclPaths.push(g);return ic(Ed(h.prototype),"visitVariableDeclaration",this).call(this,b,c,g)}},{key:"visitVariableDeclarator",value:function(b,c,g){b.init&&(b.init=this.accept(b.init,c,g.concat(["init"])));return b}},{key:"visitFunction",value:function(b,c,g){var a=this,d=this.newScope(b,
c);b.params.forEach(function(f,k){"AssignmentPattern"===f.type&&a.accept(f.right,d,g.concat("params",k,"right"))});d.params=Array.prototype.slice.call(b.params);return d}},{key:"visitFunctionDeclaration",value:function(b,c,g){var a=this.visitFunction(b,c,g);c.funcDecls.push(b);c.funcDeclPaths.push(g);var d=this;b.defaults&&(b.defaults=b.defaults.reduce(function(f,k,n){k=d.accept(k,a,g.concat(["defaults",n]));Array.isArray(k)?f.push.apply(f,k):f.push(k);return f},[]));b.rest&&(b.rest=d.accept(b.rest,
a,g.concat(["rest"])));b.body=d.accept(b.body,a,g.concat(["body"]));b.loc&&(b.loc=d.accept(b.loc,a,g.concat(["loc"])));return b}},{key:"visitFunctionExpression",value:function(b,c,g){var a=this.visitFunction(b,c,g),d=this;b.defaults&&(b.defaults=b.defaults.reduce(function(f,k,n){k=d.accept(k,a,g.concat(["defaults",n]));Array.isArray(k)?f.push.apply(f,k):f.push(k);return f},[]));b.rest&&(b.rest=d.accept(b.rest,a,g.concat(["rest"])));b.body=d.accept(b.body,a,g.concat(["body"]));b.loc&&(b.loc=d.accept(b.loc,
a,g.concat(["loc"])));return b}},{key:"visitArrowFunctionExpression",value:function(b,c,g){var a=this.visitFunction(b,c,g),d=this;b.defaults&&(b.defaults=b.defaults.reduce(function(f,k,n){k=d.accept(k,a,g.concat(["defaults",n]));Array.isArray(k)?f.push.apply(f,k):f.push(k);return f},[]));b.rest&&(b.rest=d.accept(b.rest,a,g.concat(["rest"])));b.body=d.accept(b.body,a,g.concat(["body"]));b.loc&&(b.loc=d.accept(b.loc,a,g.concat(["loc"])));return b}},{key:"visitIdentifier",value:function(b,c,g){c.refs.push(b);
return ic(Ed(h.prototype),"visitIdentifier",this).call(this,b,c,g)}},{key:"visitMemberExpression",value:function(b,c,g){b.object=this.accept(b.object,c,g.concat(["object"]));b.computed&&(b.property=this.accept(b.property,c,g.concat(["property"])));return b}},{key:"visitProperty",value:function(b,c,g){b.computed&&(b.key=this.accept(b.key,c,g.concat(["key"])));b.value=this.accept(b.value,c,g.concat(["value"]));return b}},{key:"visitThisExpression",value:function(b,c,g){c.thisRefs.push(b);return ic(Ed(h.prototype),
"visitThisExpression",this).call(this,b,c,g)}},{key:"visitTryStatement",value:function(b,c,g){b.block=this.accept(b.block,c,g.concat(["block"]));b.handler&&(b.handler=this.accept(b.handler,c,g.concat(["handler"])),c.catches.push(b.handler.param));b.finalizer&&(b.finalizer=this.accept(b.finalizer,c,g.concat(["finalizer"])));return b}},{key:"visitLabeledStatement",value:function(b,c,g){b.body=this.accept(b.body,c,g.concat(["body"]));return b}},{key:"visitClassDeclaration",value:function(b,c,g){c.classDecls.push(b);
c.classDeclPaths.push(g);b.superClass&&(b.superClass=this.accept(b.superClass,c,g.concat(["superClass"])));b.body=this.accept(b.body,c,g.concat(["body"]));return b}},{key:"visitClassExpression",value:function(b,c,g){b.id&&(c.classExprs.push(b),c.classExprPaths.push(g));b.superClass&&(b.superClass=this.accept(b.superClass,c,g.concat(["superClass"])));b.body=this.accept(b.body,c,g.concat(["body"]));return b}},{key:"visitMethodDefinition",value:function(b,c,g){b.value=this.accept(b.value,c,g.concat(["value"]));
return b}},{key:"visitMetaProperty",value:function(b,c,g){return b}},{key:"visitBreakStatement",value:function(b,c,g){return b}},{key:"visitContinueStatement",value:function(b,c,g){return b}},{key:"visitImportSpecifier",value:function(b,c,g){c.importSpecifiers.push(b.local);c.importSpecifierPaths.push(g);return b}},{key:"visitImportDefaultSpecifier",value:function(b,c,g){c.importSpecifiers.push(b.local);c.importSpecifierPaths.push(g);return b}},{key:"visitImportNamespaceSpecifier",value:function(b,
c,g){c.importSpecifiers.push(b.local);c.importSpecifierPaths.push(g);return b}},{key:"visitExportSpecifier",value:function(b,c,g){b.local=this.accept(b.local,c,g.concat(["local"]));return b}},{key:"visitExportNamedDeclaration",value:function(b,c,g){c.exportDecls.push(b);c.exportDeclPaths.push(g);b.source||ic(Ed(h.prototype),"visitExportNamedDeclaration",this).call(this,b,c,g);return b}},{key:"visitExportDefaultDeclaration",value:function(b,c,g){c.exportDecls.push(b);c.exportDeclPaths.push(g);return ic(Ed(h.prototype),
"visitExportDefaultDeclaration",this).call(this,b,c,g)}},{key:"visitExportAllDeclaration",value:function(b,c,g){c.exportDecls.push(b);c.exportDeclPaths.push(g);return ic(Ed(h.prototype),"visitExportAllDeclaration",this).call(this,b,c,g)}}]);return h}(Wm.Visitor);Wm.ScopeVisitor=pG;Wm.BaseVisitor=Vn;Wm.Visitor=Vn;Wm.PrinterVisitor=nG;Wm.ComparisonVisitor=oG;Wm.ScopeVisitor=pG;var tx={},kv=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/@javascript-obfuscator__SLASH__estraverse/5.4.0/estraverse.js");
kv.commonjsHelpers=Wl;kv.estraverse=tx;(function(e){(function b(l){function c(I){var N={},J;for(J in I)if(I.hasOwnProperty(J)){var sa=I[J];"object"===ad(sa)&&null!==sa?N[J]=c(sa):N[J]=sa}return N}function g(I,N){var J;var sa=I.length;for(J=0;sa;){var ja=sa>>>1;var Ha=J+ja;N(I[Ha])?sa=ja:(J=Ha+1,sa-=ja+1)}return J}function a(I,N){this.parent=I;this.key=N}function d(I,N,J,sa){this.node=I;this.path=N;this.wrap=J;this.ref=sa}function f(){}function k(I){return null==I?!1:"object"===ad(I)&&"string"===typeof I.type}
function n(I,N){for(var J=I.length-1;0<=J;--J)if(I[J].node===N)return!0;return!1}function p(I,N){return(new f).traverse(I,N)}function q(I,N){var J=g(N,function(sa){return sa.range[0]>I.range[0]});I.extendedRange=[I.range[0],I.range[1]];J!==N.length&&(I.extendedRange[1]=N[J].range[0]);--J;0<=J&&(I.extendedRange[0]=N[J].range[1]);return I}var r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",
AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",
DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",
GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",
NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",StaticBlock:"StaticBlock",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",
TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};var u={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],
ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],
ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id",
"params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],
NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],StaticBlock:["body"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis",
"expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};var x={};var y={};var D={};var H={Break:x,Skip:y,Remove:D};a.prototype.replace=function(I){this.parent[this.key]=I};a.prototype.remove=function(){if(Array.isArray(this.parent))return this.parent.splice(this.key,
1),!0;this.replace(null);return!1};f.prototype.path=function(){function I(ec,mc){if(Array.isArray(mc))for(J=0,sa=mc.length;J<sa;++J)ec.push(mc[J]);else ec.push(mc)}var N,J,sa;if(!this.__current.path)return null;var ja=[];var Ha=2;for(N=this.__leavelist.length;Ha<N;++Ha){var Qa=this.__leavelist[Ha];I(ja,Qa.path)}I(ja,this.__current.path);return ja};f.prototype.type=function(){return this.current().type||this.__current.wrap};f.prototype.parents=function(){var I;var N=[];var J=1;for(I=this.__leavelist.length;J<
I;++J)N.push(this.__leavelist[J].node);return N};f.prototype.current=function(){return this.__current.node};f.prototype.__execute=function(I,N){var J=void 0;var sa=this.__current;this.__current=N;this.__state=null;I&&(J=I.call(this,N.node,this.__leavelist[this.__leavelist.length-1].node));this.__current=sa;return J};f.prototype.notify=function(I){this.__state=I};f.prototype.skip=function(){this.notify(y)};f.prototype["break"]=function(){this.notify(x)};f.prototype.remove=function(){this.notify(D)};
f.prototype.__initialize=function(I,N){this.visitor=N;this.root=I;this.__worklist=[];this.__leavelist=[];this.__fallback=this.__state=this.__current=null;"iteration"===N.fallback?this.__fallback=Object.keys:"function"===typeof N.fallback&&(this.__fallback=N.fallback);this.__keys=u;N.keys&&(this.__keys=Object.assign(Object.create(this.__keys),N.keys))};f.prototype.traverse=function(I,N){var J,sa,ja;this.__initialize(I,N);var Ha={};var Qa=this.__worklist;var ec=this.__leavelist;Qa.push(new d(I,null,
null,null));for(ec.push(new d(null,null,null,null));Qa.length;)if(I=Qa.pop(),I===Ha){I=ec.pop();var mc=this.__execute(N.leave,I);if(this.__state===x||mc===x)break}else if(I.node){mc=this.__execute(N.enter,I);if(this.__state===x||mc===x)break;Qa.push(Ha);ec.push(I);if(this.__state!==y&&mc!==y){mc=I.node;var hc=mc.type||I.wrap;var Ua=this.__keys[hc];if(!Ua)if(this.__fallback)Ua=this.__fallback(mc);else throw Error("Unknown node type "+hc+".");for(J=Ua.length;0<=--J;){var xa=Ua[J];if(ja=mc[xa])if(Array.isArray(ja))for(sa=
ja.length;0<=--sa;){if(ja[sa]&&!n(ec,ja[sa])){if(hc!==r.ObjectExpression&&hc!==r.ObjectPattern||"properties"!==Ua[J])if(k(ja[sa]))I=new d(ja[sa],[xa,sa],null,null);else continue;else I=new d(ja[sa],[xa,sa],"Property",null);Qa.push(I)}}else k(ja)&&!n(ec,ja)&&Qa.push(new d(ja,xa,null,null))}}}};f.prototype.replace=function(I,N){function J(Ac){if(Ac.ref.remove()){var Xb=Ac.ref.key;var qd=Ac.ref.parent;for(Ac=ec.length;Ac--;){var La=ec[Ac];if(La.ref&&La.ref.parent===qd){if(La.ref.key<Xb)break;--La.ref.key}}}}
var sa,ja,Ha;this.__initialize(I,N);var Qa={};var ec=this.__worklist;var mc=this.__leavelist;var hc={root:I};var Ua=new d(I,null,null,new a(hc,"root"));ec.push(Ua);for(mc.push(Ua);ec.length;)if(Ua=ec.pop(),Ua===Qa){Ua=mc.pop();var xa=this.__execute(N.leave,Ua);void 0!==xa&&xa!==x&&xa!==y&&xa!==D&&Ua.ref.replace(xa);this.__state!==D&&xa!==D||J(Ua);if(this.__state===x||xa===x)break}else{xa=this.__execute(N.enter,Ua);void 0!==xa&&xa!==x&&xa!==y&&xa!==D&&(Ua.ref.replace(xa),Ua.node=xa);if(this.__state===
D||xa===D)J(Ua),Ua.node=null;if(this.__state===x||xa===x)break;if(I=Ua.node)if(ec.push(Qa),mc.push(Ua),this.__state!==y&&xa!==y){xa=I.type||Ua.wrap;var rc=this.__keys[xa];if(!rc)if(this.__fallback)rc=this.__fallback(I);else throw Error("Unknown node type "+xa+".");for(sa=rc.length;0<=--sa;){var Lb=rc[sa];if(Ha=I[Lb])if(Array.isArray(Ha))for(ja=Ha.length;0<=--ja;){if(Ha[ja]){if(xa!==r.ObjectExpression&&xa!==r.ObjectPattern||"properties"!==rc[sa])if(k(Ha[ja]))Ua=new d(Ha[ja],[Lb,ja],null,new a(Ha,ja));
else continue;else Ua=new d(Ha[ja],[Lb,ja],"Property",new a(Ha,ja));ec.push(Ua)}}else k(Ha)&&ec.push(new d(Ha,Lb,null,new a(I,Lb)))}}}return hc.root};l.Syntax=r;l.traverse=p;l.replace=function(I,N){return(new f).replace(I,N)};l.attachComments=function(I,N,J){var sa=[],ja;if(!I.range)throw Error("attachComments needs range information");if(!J.length){if(N.length){var Ha=0;for(ja=N.length;Ha<ja;Ha+=1)J=c(N[Ha]),J.extendedRange=[0,I.range[0]],sa.push(J);I.leadingComments=sa}return I}Ha=0;for(ja=N.length;Ha<
ja;Ha+=1)sa.push(q(c(N[Ha]),J));var Qa=0;p(I,{enter:function(ec){for(var mc;Qa<sa.length;){mc=sa[Qa];if(mc.extendedRange[1]>ec.range[0])break;mc.extendedRange[1]===ec.range[0]?(ec.leadingComments||(ec.leadingComments=[]),ec.leadingComments.push(mc),sa.splice(Qa,1)):Qa+=1}if(Qa===sa.length)return H.Break;if(sa[Qa].extendedRange[0]>ec.range[1])return H.Skip}});Qa=0;p(I,{leave:function(ec){for(var mc;Qa<sa.length;){mc=sa[Qa];if(ec.range[1]<mc.extendedRange[0])break;ec.range[1]===mc.extendedRange[0]?
(ec.trailingComments||(ec.trailingComments=[]),ec.trailingComments.push(mc),sa.splice(Qa,1)):Qa+=1}if(Qa===sa.length)return H.Break;if(sa[Qa].extendedRange[0]>ec.range[1])return H.Skip}});return I};l.VisitorKeys=u;l.VisitorOption=H;l.Controller=f;l.cloneEnvironment=function(){return b({})};return l})(e)})(kv.estraverse);kv.__moduleExports=tx;kv.estraverse=tx;kv["default"]=tx;var lv={},ct={exports:{}},Fr=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/esutils/2.0.3/lib/ast.js");
Fr.commonjsHelpers=Wl;Fr.astModule=ct;Fr.ast=ct.exports;(function(){function e(l){if(null==l)return!1;switch(l.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "DebuggerStatement":case "DoWhileStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "IfStatement":case "LabeledStatement":case "ReturnStatement":case "SwitchStatement":case "ThrowStatement":case "TryStatement":case "VariableDeclaration":case "WhileStatement":case "WithStatement":return!0}return!1}
function h(l){switch(l.type){case "IfStatement":return null!=l.alternate?l.alternate:l.consequent;case "LabeledStatement":case "ForStatement":case "ForInStatement":case "WhileStatement":case "WithStatement":return l.body}return null}Fr.astModule.exports={isExpression:function(l){if(null==l)return!1;switch(l.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "ConditionalExpression":case "FunctionExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "NewExpression":case "ObjectExpression":case "SequenceExpression":case "ThisExpression":case "UnaryExpression":case "UpdateExpression":return!0}return!1},
isStatement:e,isIterationStatement:function(l){if(null==l)return!1;switch(l.type){case "DoWhileStatement":case "ForInStatement":case "ForStatement":case "WhileStatement":return!0}return!1},isSourceElement:function(l){return e(l)||null!=l&&"FunctionDeclaration"===l.type},isProblematicIfStatement:function(l){if("IfStatement"!==l.type||null==l.alternate)return!1;l=l.consequent;do{if("IfStatement"===l.type&&null==l.alternate)return!0;l=h(l)}while(l);return!1},trailingStatement:h}})();Fr.__moduleExports=
ct.exports;Fr.ast=ct.exports;Fr["default"]=ct.exports;Fr.ast=ct.exports;var Gr={exports:{}},Hr=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/esutils/2.0.3/lib/code.js");Hr.commonjsHelpers=Wl;Hr.codeModule=Gr;Hr.code=Gr.exports;(function(){function e(k){if(65535>=k)return String.fromCharCode(k);var n=String.fromCharCode(Math.floor((k-65536)/1024)+55296);k=String.fromCharCode((k-65536)%1024+56320);return n+k}var h;var l=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var b=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var c=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/;
var g=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
var a=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];var d=Array(128);for(h=0;128>h;++h)d[h]=97<=h&&122>=h||65<=h&&90>=h||36===h||95===h;var f=Array(128);for(h=0;128>h;++h)f[h]=97<=h&&122>=h||65<=h&&90>=h||48<=h&&57>=h||36===h||95===h;Hr.codeModule.exports={isDecimalDigit:function(k){return 48<=k&&57>=k},isHexDigit:function(k){return 48<=k&&57>=k||97<=k&&102>=k||65<=k&&70>=k},isOctalDigit:function(k){return 48<=k&&55>=k},isWhiteSpace:function(k){return 32===k||
9===k||11===k||12===k||160===k||5760<=k&&0<=a.indexOf(k)},isLineTerminator:function(k){return 10===k||13===k||8232===k||8233===k},isIdentifierStartES5:function(k){return 128>k?d[k]:l.test(e(k))},isIdentifierPartES5:function(k){return 128>k?f[k]:b.test(e(k))},isIdentifierStartES6:function(k){return 128>k?d[k]:c.test(e(k))},isIdentifierPartES6:function(k){return 128>k?f[k]:g.test(e(k))}}})();Hr.__moduleExports=Gr.exports;Hr.code=Gr.exports;Hr["default"]=Gr.exports;Hr.code=Gr.exports;var dt={exports:{}},
$p=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/esutils/2.0.3/lib/keyword.js");$p.commonjsHelpers=Wl;$p.keywordModule=dt;$p.keyword=dt.exports;$p.require$$0=Gr.exports;(function(){function e(d,f){return f||"yield"!==d?h(d,f):!1}function h(d,f){if(f)a:switch(d){case "implements":case "interface":case "package":case "private":case "protected":case "public":case "static":case "let":f=!0;break a;default:f=!1}if(f)return!0;switch(d.length){case 2:return"if"===d||"in"===d||"do"===
d;case 3:return"var"===d||"for"===d||"new"===d||"try"===d;case 4:return"this"===d||"else"===d||"case"===d||"void"===d||"with"===d||"enum"===d;case 5:return"while"===d||"break"===d||"catch"===d||"throw"===d||"const"===d||"yield"===d||"class"===d||"super"===d;case 6:return"return"===d||"typeof"===d||"delete"===d||"switch"===d||"export"===d||"import"===d;case 7:return"default"===d||"finally"===d||"extends"===d;case 8:return"function"===d||"continue"===d||"debugger"===d;case 10:return"instanceof"===d;
default:return!1}}function l(d,f){return"null"===d||"true"===d||"false"===d||e(d,f)}function b(d,f){return"null"===d||"true"===d||"false"===d||h(d,f)}function c(d){var f;if(0===d.length)return!1;var k=d.charCodeAt(0);if(!a.isIdentifierStartES5(k))return!1;var n=1;for(f=d.length;n<f;++n)if(k=d.charCodeAt(n),!a.isIdentifierPartES5(k))return!1;return!0}function g(d){var f;if(0===d.length)return!1;var k=a.isIdentifierStartES6;var n=0;for(f=d.length;n<f;++n){var p=d.charCodeAt(n);if(55296<=p&&56319>=p){++n;
if(n>=f)return!1;var q=d.charCodeAt(n);if(!(56320<=q&&57343>=q))return!1;p=1024*(p-55296)+(q-56320)+65536}if(!k(p))return!1;k=a.isIdentifierPartES6}return!0}var a=$p.require$$0;$p.keywordModule.exports={isKeywordES5:e,isKeywordES6:h,isReservedWordES5:l,isReservedWordES6:b,isRestrictedWord:function(d){return"eval"===d||"arguments"===d},isIdentifierNameES5:c,isIdentifierNameES6:g,isIdentifierES5:function(d,f){return c(d)&&!l(d,f)},isIdentifierES6:function(d,f){return g(d)&&!b(d,f)}}})();$p.__moduleExports=
dt.exports;$p.keyword=dt.exports;$p["default"]=dt.exports;$p.keyword=dt.exports;var Ik=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/esutils/2.0.3/lib/utils.js");Ik.commonjsHelpers=Wl;Ik.utils=lv;Ik.require$$0=ct.exports;Ik.require$$1=Gr.exports;Ik.require$$2=dt.exports;Ik.keyword=Ik.keyword||void 0;Ik.code=Ik.code||void 0;Ik.ast=Ik.ast||void 0;Ik.ast=Ik.utils.ast=Ik.require$$0;Ik.code=Ik.utils.code=Ik.require$$1;Ik.keyword=Ik.utils.keyword=Ik.require$$2;var P0=Ik.ast,Q0=Ik.code,
R0=Ik.keyword;Ik.__moduleExports=lv;Ik.utils=lv;Ik.ast=P0;Ik.code=Q0;Ik.keyword=R0;Ik["default"]=lv;Ik.utils=lv;var Pj=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/stringify.js");Pj.ESCODEGEN=function(){function e(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},
moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function h(V,Oa){var U="";for(Oa|=0;0<Oa;Oa>>>=1,V+=V)Oa&1&&(U+=V);return U}function l(V){var Oa=V.length;return Oa&&Pj.esutils.code.isLineTerminator(V.charCodeAt(Oa-1))}function b(V,Oa){for(var U in Oa)Oa.hasOwnProperty(U)&&(V[U]=Oa[U]);return V}function c(V,Oa){function U(nf){return"object"===ad(nf)&&nf instanceof Object&&
!(nf instanceof RegExp)}var fd;for(fd in Oa)if(Oa.hasOwnProperty(fd)){var Td=Oa[fd];U(Td)?U(V[fd])?c(V[fd],Td):V[fd]=c({},Td):V[fd]=Td}return V}function g(V,Oa){return 8232===(V&-2)?(Oa?"u":"\\u")+(8232===V?"2028":"2029"):10===V||13===V?(Oa?"":"\\")+(10===V?"n":"r"):String.fromCharCode(V)}function a(V,Oa){if(8===V)return"\\b";if(12===V)return"\\f";if(9===V)return"\\t";var U=V.toString(16).toUpperCase();return ec||255<V?"\\u"+"0000".slice(U.length)+U:0!==V||Pj.esutils.code.isDecimalDigit(Oa)?11===
V?"\\x0B":"\\x"+"00".slice(U.length)+U:"\\0"}function d(V){if(92===V)return"\\\\";if(10===V)return"\\n";if(13===V)return"\\r";if(8232===V)return"\\u2028";if(8233===V)return"\\u2029";throw Error("Incorrectly classified character");}function f(V){var Oa,U="";var fd=0;for(Oa=V.length;fd<Oa;++fd){var Td=V[fd];U+=Array.isArray(Td)?f(Td):Td}return U}function k(V,Oa){if(!Va)return Array.isArray(V)?f(V):V;if(null==Oa){if(V instanceof ja)return V;Oa={}}return null==Oa.loc?new ja(null,null,Va,V,Oa.name||null):
new ja(Oa.loc.start.line,Oa.loc.start.column,!0===Va?Oa.loc.source||null:Va,V,Oa.name||null)}function n(){return Lb||" "}function p(V,Oa){var U=k(V).toString();if(0===U.length)return[Oa];var fd=k(Oa).toString();if(0===fd.length)return[V];U=U.charCodeAt(U.length-1);fd=fd.charCodeAt(0);return(43===U||45===U)&&U===fd||Pj.esutils.code.isIdentifierPartES5(U)&&Pj.esutils.code.isIdentifierPartES5(fd)||47===U&&105===fd?[V,n(),Oa]:Pj.esutils.code.isWhiteSpace(U)||Pj.esutils.code.isLineTerminator(U)||Pj.esutils.code.isWhiteSpace(fd)||
Pj.esutils.code.isLineTerminator(fd)?[V,Oa]:[V,Lb,Oa]}function q(V){var Oa=Ha;Ha+=Qa;V(Ha);Ha=Oa}function r(V,Oa){if("Line"===V.type){if(l(V.value))return"//"+V.value;Oa="//"+V.value;me||(Oa+="\n");return Oa}if(Fd.format.indent.adjustMultilineComment&&/[\n\r]/.test(V.value)){var U,fd;V=("/*"+V.value+"*/").split(/\r\n|[\r\n]/);var Td=Number.MAX_VALUE;var nf=1;for(U=V.length;nf<U;++nf){var Je=V[nf];for(fd=0;fd<Je.length&&Pj.esutils.code.isWhiteSpace(Je.charCodeAt(fd));)++fd;Td>fd&&(Td=fd)}"undefined"!==
typeof Oa?(Je=Ha,"*"===V[1][Td]&&(Oa+=" "),Ha=Oa):(Td&1&&--Td,Je=Ha);nf=1;for(U=V.length;nf<U;++nf)Oa=k([Ha,V[nf].slice(Td)]),V[nf]=Va?Oa.join(""):Oa;Ha=Je;return V.join("\n")}return"/*"+V.value+"*/"}function u(V,Oa){var U;if(V.leadingComments&&0<V.leadingComments.length){var fd=Oa;if(me){var Td=V.leadingComments[0];Oa=[];var nf=Td.extendedRange;var Je=Td.range;var rf=yd.substring(nf[0],Je[0]);var fh=(rf.match(/\n/g)||[]).length;0<fh?(Oa.push(h("\n",fh)),Oa.push([Ha,r(Td)])):(Oa.push(rf),Oa.push(r(Td)));
fh=Je;rf=1;for(U=V.leadingComments.length;rf<U;rf++)Td=V.leadingComments[rf],Je=Td.range,fh=yd.substring(fh[1],Je[0]),fh=(fh.match(/\n/g)||[]).length,Oa.push(h("\n",fh)),Oa.push([Ha,r(Td)]),fh=Je;rf=yd.substring(Je[1],nf[1]);fh=(rf.match(/\n/g)||[]).length;Oa.push(h("\n",fh))}else for(Td=V.leadingComments[0],Oa=[],qd&&V.type===ta.Program&&0===V.body.length&&Oa.push("\n"),Oa.push(r(Td)),l(k(Oa).toString())||Oa.push("\n"),rf=1,U=V.leadingComments.length;rf<U;++rf)Td=V.leadingComments[rf],Td=[r(Td)],
l(k(Td).toString())||Td.push("\n"),Oa.push([Ha,Td]);Oa.push([Ha,fd])}if(V.trailingComments)if(me)Td=V.trailingComments[0],nf=Td.extendedRange,Je=Td.range,rf=yd.substring(nf[0],Je[0]),fh=(rf.match(/\n/g)||[]).length,0<fh?(Oa.push(h("\n",fh)),Oa.push([Ha,r(Td)])):(Oa.push(rf),Oa.push(r(Td)));else{fd=!l(k(Oa).toString());rf=k([Ha,Oa,Qa]).toString();for(U=rf.length-1;0<=U&&!Pj.esutils.code.isLineTerminator(rf.charCodeAt(U));--U);nf=h(" ",rf.length-1-U);rf=0;for(U=V.trailingComments.length;rf<U;++rf)Td=
V.trailingComments[rf],fd?(Oa=0===rf?[Oa,Qa]:[Oa,nf],Oa.push(r(Td,nf))):Oa=[Oa,[Ha,r(Td)]],rf===U-1||l(k(Oa).toString())||(Oa=[Oa,"\n"])}return Oa}function x(V,Oa,U){for(var fd=0;V<Oa;V++)"\n"===yd[V]&&fd++;for(V=1;V<fd;V++)U.push(rc)}function y(V,Oa,U){return Oa<U?["(",V,")"]:V}function D(V){var Oa;var U=V.split(/\r\n|\n/);V=1;for(Oa=U.length;V<Oa;V++)U[V]=rc+Ha+U[V];return U}function H(){}function I(V){var Oa=V.name;V.type===ta.PrivateIdentifier&&(Oa="#"+Oa);return k(Oa,V)}function N(V,Oa){return V.async?
"async"+(Oa?n():Lb):""}function J(V){return V.generator&&!Fd.moz.starlessGenerator?"*"+Lb:""}function sa(V){var Oa=V.value,U="";Oa.async&&(U+=N(Oa,!V.computed));Oa.generator&&(U+=J(Oa)?"*":"");return U}var ja,Ha,Qa,ec,mc,hc,Ua,xa,rc,Lb,Ac,Xb,qd,La,Fd,na,Va,yd,me;var ta=Pj.estraverse.Syntax;var za={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,NullishCoalescing:3,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,
Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21};var W={"??":za.NullishCoalescing,"||":za.LogicalOR,"&&":za.LogicalAND,"|":za.BitwiseOR,"^":za.BitwiseXOR,"&":za.BitwiseAND,"==":za.Equality,"!=":za.Equality,"===":za.Equality,"!==":za.Equality,is:za.Equality,isnt:za.Equality,"<":za.Relational,">":za.Relational,"<=":za.Relational,">=":za.Relational,"in":za.Relational,"instanceof":za.Relational,"<<":za.BitwiseSHIFT,">>":za.BitwiseSHIFT,
">>>":za.BitwiseSHIFT,"+":za.Additive,"-":za.Additive,"*":za.Multiplicative,"%":za.Multiplicative,"/":za.Multiplicative,"**":za.Exponentiation};H.prototype.maybeBlock=function(V,Oa){var U,fd=this;var Td=!Fd.comment||!V.leadingComments;if(V.type===ta.BlockStatement&&Td)return[Lb,this.generateStatement(V,Oa)];if(V.type===ta.EmptyStatement&&Td)return";";q(function(){U=[rc,[Ha,fd.generateStatement(V,Oa)]]});return U};H.prototype.maybeBlockSuffix=function(V,Oa){var U=l(k(Oa).toString());return V.type!==
ta.BlockStatement||Fd.comment&&V.leadingComments||U?U?[Oa,Ha]:[Oa,rc,Ha]:[Oa,Lb]};H.prototype.generatePattern=function(V,Oa,U){return V.type===ta.Identifier?I(V):this.generateExpression(V,Oa,U)};H.prototype.generateFunctionParams=function(V){var Oa;var U=!1;if(V.type!==ta.ArrowFunctionExpression||V.rest||V.defaults&&0!==V.defaults.length||1!==V.params.length||V.params[0].type!==ta.Identifier){var fd=V.type===ta.ArrowFunctionExpression?[N(V,!1)]:[];fd.push("(");V.defaults&&(U=!0);var Td=0;for(Oa=V.params.length;Td<
Oa;++Td)U&&V.defaults[Td]?fd.push(this.generateAssignment(V.params[Td],V.defaults[Td],"=",za.Assignment,7)):fd.push(this.generatePattern(V.params[Td],za.Assignment,7)),Td+1<Oa&&fd.push(","+Lb);V.rest&&(V.params.length&&fd.push(","+Lb),fd.push("..."),fd.push(I(V.rest)));fd.push(")")}else fd=[N(V,!0),I(V.params[0])];return fd};H.prototype.generateFunctionBody=function(V){var Oa=this.generateFunctionParams(V);V.type===ta.ArrowFunctionExpression&&(Oa.push(Lb),Oa.push("=>"));V.expression?(Oa.push(Lb),
V=this.generateExpression(V.body,za.Assignment,7),"{"===V.toString().charAt(0)&&(V=["(",V,")"]),Oa.push(V)):Oa.push(this.maybeBlock(V.body,9));return Oa};H.prototype.generateIterationForStatement=function(V,Oa,U){var fd=["for"+(Oa.await?n()+"await":"")+Lb+"("],Td=this;q(function(){Oa.left.type===ta.VariableDeclaration?q(function(){fd.push(Oa.left.kind+n());fd.push(Td.generateStatement(Oa.left.declarations[0],0))}):fd.push(Td.generateExpression(Oa.left,za.Call,7));fd=p(fd,V);fd=[p(fd,Td.generateExpression(Oa.right,
za.Assignment,7)),")"]});fd.push(this.maybeBlock(Oa.body,U));return fd};H.prototype.generatePropertyKey=function(V,Oa){var U=[];Oa&&U.push("[");U.push(this.generateExpression(V,za.Assignment,7));Oa&&U.push("]");return U};H.prototype.generateAssignment=function(V,Oa,U,fd,Td){za.Assignment<fd&&(Td|=1);return y([this.generateExpression(V,za.Call,Td),Lb+U+Lb,this.generateExpression(Oa,za.Assignment,Td)],za.Assignment,fd)};H.prototype.semicolon=function(V){return!Xb&&V&32?"":";"};H.Statement={BlockStatement:function(V,
Oa){var U,fd,Td=["{",rc],nf=this;q(function(){0===V.body.length&&me&&(U=V.range,2<U[1]-U[0]&&(fd=yd.substring(U[0]+1,U[1]-1),"\n"===fd[0]&&(Td=["{"]),Td.push(fd)));var Je;var rf=1;Oa&8&&(rf|=16);var fh=0;for(Je=V.body.length;fh<Je;++fh){me&&(0===fh&&(V.body[0].leadingComments&&(U=V.body[0].leadingComments[0].extendedRange,fd=yd.substring(U[0],U[1]),"\n"===fd[0]&&(Td=["{"])),V.body[0].leadingComments||x(V.range[0],V.body[0].range[0],Td)),0<fh&&(V.body[fh-1].trailingComments||V.body[fh].leadingComments||
x(V.body[fh-1].range[1],V.body[fh].range[0],Td)));fh===Je-1&&(rf|=32);var zi=V.body[fh].leadingComments&&me?nf.generateStatement(V.body[fh],rf):[Ha,nf.generateStatement(V.body[fh],rf)];Td.push(zi);l(k(zi).toString())||(me&&fh<Je-1?V.body[fh+1].leadingComments||Td.push(rc):Td.push(rc));me&&fh===Je-1&&(V.body[fh].trailingComments||x(V.body[fh].range[1],V.range[1],Td))}});Td.push([Ha,"}"]);return Td},BreakStatement:function(V,Oa){return V.label?"break "+V.label.name+this.semicolon(Oa):"break"+this.semicolon(Oa)},
ContinueStatement:function(V,Oa){return V.label?"continue "+V.label.name+this.semicolon(Oa):"continue"+this.semicolon(Oa)},ClassBody:function(V,Oa){var U=["{",rc],fd=this;q(function(Td){var nf;var Je=0;for(nf=V.body.length;Je<nf;++Je)U.push(Td),U.push(fd.generateExpression(V.body[Je],za.Sequence,7)),Je+1<nf&&U.push(rc)});l(k(U).toString())||U.push(rc);U.push(Ha);U.push("}");return U},ClassDeclaration:function(V,Oa){Oa=[];var U;if(V.decorators.length){var fd=fa(V.decorators);try{for(fd.s();!(U=fd.n()).done;)Oa.push(this.generateStatement(U.value)),
Oa.push(Ha)}catch(Td){fd.e(Td)}finally{fd.f()}}Oa.push("class");V.id&&(Oa=p(Oa,this.generateExpression(V.id,za.Sequence,7)));V.superClass&&(U=p("extends",this.generateExpression(V.superClass,za.Unary,7)),Oa=p(Oa,U));Oa.push(Lb);Oa.push(this.generateStatement(V.body,33));return Oa},DirectiveStatement:function(V,Oa){if(Fd.raw&&V.raw)return V.raw+this.semicolon(Oa);V=V.directive;var U;var fd="double"===Ua?'"':"'";var Td=0;for(U=V.length;Td<U;++Td){var nf=V.charCodeAt(Td);if(39===nf){fd='"';break}else if(34===
nf){fd="'";break}else 92===nf&&++Td}return fd+V+fd+this.semicolon(Oa)},DoWhileStatement:function(V,Oa){var U=p("do",this.maybeBlock(V.body,1));U=this.maybeBlockSuffix(V.body,U);return p(U,["while"+Lb+"(",this.generateExpression(V.test,za.Sequence,7),")"+this.semicolon(Oa)])},CatchClause:function(V,Oa){var U,fd=this;q(function(){if(V.param){if(U=["catch"+Lb+"(",fd.generateExpression(V.param,za.Sequence,7),")"],V.guard){var Td=fd.generateExpression(V.guard,za.Sequence,7);U.splice(2,0," if ",Td)}}else U=
["catch"]});U.push(this.maybeBlock(V.body,1));return U},DebuggerStatement:function(V,Oa){return"debugger"+this.semicolon(Oa)},EmptyStatement:function(V,Oa){return";"},ExportDefaultDeclaration:function(V,Oa){var U=["export"];var fd=Oa&32?33:1;U=p(U,"default");return U=H.Statement.hasOwnProperty(V.declaration.type)?p(U,this.generateStatement(V.declaration,fd)):p(U,this.generateExpression(V.declaration,za.Assignment,7)+this.semicolon(Oa))},ExportNamedDeclaration:function(V,Oa){var U=["export"],fd=this;
var Td=Oa&32?33:1;if(V.declaration)return p(U,this.generateStatement(V.declaration,Td));V.specifiers&&(0===V.specifiers.length?U=p(U,"{"+Lb+"}"):V.specifiers[0].type===ta.ExportBatchSpecifier?U=p(U,this.generateExpression(V.specifiers[0],za.Sequence,7)):(U=p(U,"{"),q(function(nf){var Je;U.push(rc);var rf=0;for(Je=V.specifiers.length;rf<Je;++rf)U.push(nf),U.push(fd.generateExpression(V.specifiers[rf],za.Sequence,7)),rf+1<Je&&U.push(","+rc)}),l(k(U).toString())||U.push(rc),U.push(Ha+"}")),V.source?
U=p(U,["from"+Lb,this.generateExpression(V.source,za.Sequence,7),this.semicolon(Oa)]):U.push(this.semicolon(Oa)));return U},ExportAllDeclaration:function(V,Oa){var U=["export"+Lb,"*"+Lb];V.exported&&U.push("as "+V.exported.name+" ");return U=p(U,["from"+Lb,this.generateExpression(V.source,za.Sequence,7),this.semicolon(Oa)])},ExpressionStatement:function(V,Oa){function U(rf){if("class"!==rf.slice(0,5))return!1;rf=rf.charCodeAt(5);return 123===rf||Pj.esutils.code.isWhiteSpace(rf)||Pj.esutils.code.isLineTerminator(rf)}
function fd(rf){if("function"!==rf.slice(0,8))return!1;rf=rf.charCodeAt(8);return 40===rf||Pj.esutils.code.isWhiteSpace(rf)||42===rf||Pj.esutils.code.isLineTerminator(rf)}function Td(rf){var fh;if("async"!==rf.slice(0,5)||!Pj.esutils.code.isWhiteSpace(rf.charCodeAt(5)))return!1;var zi=6;for(fh=rf.length;zi<fh&&Pj.esutils.code.isWhiteSpace(rf.charCodeAt(zi));++zi);if(zi===fh||"function"!==rf.slice(zi,zi+8))return!1;rf=rf.charCodeAt(zi+8);return 40===rf||Pj.esutils.code.isWhiteSpace(rf)||42===rf||Pj.esutils.code.isLineTerminator(rf)}
var nf=[this.generateExpression(V.expression,za.Sequence,7)];var Je=k(nf).toString();123===Je.charCodeAt(0)||U(Je)||fd(Je)||Td(Je)||La&&Oa&16&&V.expression.type===ta.Literal&&"string"===typeof V.expression.value?nf=["(",nf,")"+this.semicolon(Oa)]:nf.push(this.semicolon(Oa));return nf},ImportDeclaration:function(V,Oa){var U=this;if(0===V.specifiers.length)return["import",Lb,this.generateExpression(V.source,za.Sequence,7),this.semicolon(Oa)];var fd=["import"];var Td=0;V.specifiers[Td].type===ta.ImportDefaultSpecifier&&
(fd=p(fd,[this.generateExpression(V.specifiers[Td],za.Sequence,7)]),++Td);V.specifiers[Td]&&(0!==Td&&fd.push(","),V.specifiers[Td].type===ta.ImportNamespaceSpecifier?fd=p(fd,[Lb,this.generateExpression(V.specifiers[Td],za.Sequence,7)]):(fd.push(Lb+"{"),1===V.specifiers.length-Td?(fd.push(Lb),fd.push(this.generateExpression(V.specifiers[Td],za.Sequence,7)),fd.push(Lb+"}"+Lb)):(q(function(nf){var Je;fd.push(rc);var rf=Td;for(Je=V.specifiers.length;rf<Je;++rf)fd.push(nf),fd.push(U.generateExpression(V.specifiers[rf],
za.Sequence,7)),rf+1<Je&&fd.push(","+rc)}),l(k(fd).toString())||fd.push(rc),fd.push(Ha+"}"+Lb))));return fd=p(fd,["from"+Lb,this.generateExpression(V.source,za.Sequence,7),this.semicolon(Oa)])},VariableDeclarator:function(V,Oa){Oa=Oa&1?7:6;return V.init?[this.generateExpression(V.id,za.Assignment,Oa),Lb,"=",Lb,this.generateExpression(V.init,za.Assignment,Oa)]:this.generatePattern(V.id,za.Assignment,Oa)},VariableDeclaration:function(V,Oa){function U(){nf=V.declarations[0];Fd.comment&&nf.leadingComments?
(rf.push("\n"),rf.push([Ha,Je.generateStatement(nf,fh)])):(rf.push(n()),rf.push(Je.generateStatement(nf,fh)));fd=1;for(Td=V.declarations.length;fd<Td;++fd)nf=V.declarations[fd],Fd.comment&&nf.leadingComments?(rf.push(","+rc),rf.push([Ha,Je.generateStatement(nf,fh)])):(rf.push(","+Lb),rf.push(Je.generateStatement(nf,fh)))}var fd,Td,nf,Je=this;var rf=[V.kind];var fh=Oa&1?1:0;1<V.declarations.length?q(U):U();rf.push(this.semicolon(Oa));return rf},StaticBlock:function(V,Oa){return["static"+Lb,this.BlockStatement(V,
Oa)]},ThrowStatement:function(V,Oa){return[p("throw",this.generateExpression(V.argument,za.Sequence,7)),this.semicolon(Oa)]},TryStatement:function(V,Oa){var U;Oa=["try",this.maybeBlock(V.block,1)];Oa=this.maybeBlockSuffix(V.block,Oa);if(V.handlers){var fd=0;for(U=V.handlers.length;fd<U;++fd)if(Oa=p(Oa,this.generateStatement(V.handlers[fd],1)),V.finalizer||fd+1!==U)Oa=this.maybeBlockSuffix(V.handlers[fd].body,Oa)}else{var Td=V.guardedHandlers||[];fd=0;for(U=Td.length;fd<U;++fd)if(Oa=p(Oa,this.generateStatement(Td[fd],
1)),V.finalizer||fd+1!==U)Oa=this.maybeBlockSuffix(Td[fd].body,Oa);if(V.handler)if(Array.isArray(V.handler))for(fd=0,U=V.handler.length;fd<U;++fd){if(Oa=p(Oa,this.generateStatement(V.handler[fd],1)),V.finalizer||fd+1!==U)Oa=this.maybeBlockSuffix(V.handler[fd].body,Oa)}else Oa=p(Oa,this.generateStatement(V.handler,1)),V.finalizer&&(Oa=this.maybeBlockSuffix(V.handler.body,Oa))}V.finalizer&&(Oa=p(Oa,["finally",this.maybeBlock(V.finalizer,1)]));return Oa},SwitchStatement:function(V,Oa){var U,fd,Td=this;
q(function(){U=["switch"+Lb+"(",Td.generateExpression(V.discriminant,za.Sequence,7),")"+Lb+"{"+rc]});if(V.cases){var nf=1;var Je=0;for(fd=V.cases.length;Je<fd;++Je)Je===fd-1&&(nf|=32),Oa=[Ha,this.generateStatement(V.cases[Je],nf)],U.push(Oa),l(k(Oa).toString())||U.push(rc)}U.push([Ha,"}"]);return U},SwitchCase:function(V,Oa){var U,fd,Td,nf,Je,rf=this;q(function(){U=V.test?[p("case",rf.generateExpression(V.test,za.Sequence,7)),":"]:["default:"];Td=0;(nf=V.consequent.length)&&V.consequent[0].type===
ta.BlockStatement&&(fd=rf.maybeBlock(V.consequent[0],1),U.push(fd),Td=1);Td===nf||l(k(U).toString())||U.push(rc);for(Je=1;Td<nf;++Td)Td===nf-1&&Oa&32&&(Je|=32),fd=[Ha,rf.generateStatement(V.consequent[Td],Je)],U.push(fd),Td+1===nf||l(k(fd).toString())||U.push(rc)});return U},IfStatement:function(V,Oa){var U=this;q(function(){Td=["if"+Lb+"(",U.generateExpression(V.test,za.Sequence,7),")"]});var fd=1;Oa&32&&(fd|=32);if(V.alternate){Td.push(this.maybeBlock(V.consequent,1));var Td=this.maybeBlockSuffix(V.consequent,
Td);Td=V.alternate.type===ta.IfStatement?p(Td,["else ",this.generateStatement(V.alternate,fd)]):p(Td,p("else",this.maybeBlock(V.alternate,fd)))}else Td.push(this.maybeBlock(V.consequent,fd));return Td},ForStatement:function(V,Oa){var U,fd=this;q(function(){U=["for"+Lb+"("];V.init?V.init.type===ta.VariableDeclaration?U.push(fd.generateStatement(V.init,0)):(U.push(fd.generateExpression(V.init,za.Sequence,6)),U.push(";")):U.push(";");V.test&&(U.push(Lb),U.push(fd.generateExpression(V.test,za.Sequence,
7)));U.push(";");V.update&&(U.push(Lb),U.push(fd.generateExpression(V.update,za.Sequence,7)));U.push(")")});U.push(this.maybeBlock(V.body,Oa&32?33:1));return U},ForInStatement:function(V,Oa){return this.generateIterationForStatement("in",V,Oa&32?33:1)},ForOfStatement:function(V,Oa){return this.generateIterationForStatement("of",V,Oa&32?33:1)},LabeledStatement:function(V,Oa){return[V.label.name+":",this.maybeBlock(V.body,Oa&32?33:1)]},Program:function(V,Oa){var U;var fd=V.body.length;Oa=[qd&&0<fd?
"\n":""];var Td=17;for(U=0;U<fd;++U){qd||U!==fd-1||(Td|=32);me&&(0===U&&(V.body[0].leadingComments||x(V.range[0],V.body[U].range[0],Oa)),0<U&&(V.body[U-1].trailingComments||V.body[U].leadingComments||x(V.body[U-1].range[1],V.body[U].range[0],Oa)));var nf=[Ha,this.generateStatement(V.body[U],Td)];Oa.push(nf);U+1<fd&&!l(k(nf).toString())&&(me?V.body[U+1].leadingComments||Oa.push(rc):Oa.push(rc));me&&U===fd-1&&(V.body[U].trailingComments||x(V.body[U].range[1],V.range[1],Oa))}return Oa},FunctionDeclaration:function(V,
Oa){return[N(V,!0),"function",J(V)||n(),V.id?I(V.id):"",this.generateFunctionBody(V)]},ReturnStatement:function(V,Oa){return V.argument?[p("return",this.generateExpression(V.argument,za.Sequence,7)),this.semicolon(Oa)]:["return"+this.semicolon(Oa)]},WhileStatement:function(V,Oa){var U,fd=this;q(function(){U=["while"+Lb+"(",fd.generateExpression(V.test,za.Sequence,7),")"]});U.push(this.maybeBlock(V.body,Oa&32?33:1));return U},WithStatement:function(V,Oa){var U,fd=this;q(function(){U=["with"+Lb+"(",
fd.generateExpression(V.object,za.Sequence,7),")"]});U.push(this.maybeBlock(V.body,Oa&32?33:1));return U}};b(H.prototype,H.Statement);H.Expression={SequenceExpression:function(V,Oa,U){var fd;za.Sequence<Oa&&(U|=1);var Td=[];var nf=0;for(fd=V.expressions.length;nf<fd;++nf)Td.push(this.generateExpression(V.expressions[nf],za.Assignment,U)),nf+1<fd&&Td.push(","+Lb);return y(Td,za.Sequence,Oa)},AssignmentExpression:function(V,Oa,U){return this.generateAssignment(V.left,V.right,V.operator,Oa,U)},ArrowFunctionExpression:function(V,
Oa,U){return y(this.generateFunctionBody(V),za.ArrowFunction,Oa)},ConditionalExpression:function(V,Oa,U){za.Conditional<Oa&&(U|=1);return y([this.generateExpression(V.test,za.LogicalOR,U),Lb+"?"+Lb,this.generateExpression(V.consequent,za.Assignment,U),Lb+":"+Lb,this.generateExpression(V.alternate,za.Assignment,U)],za.Conditional,Oa)},LogicalExpression:function(V,Oa,U){return this.BinaryExpression(V,Oa,U)},BinaryExpression:function(V,Oa,U){var fd;var Td=fd=W[V.operator];var nf=fd+1;switch(V.operator){case "**":Td=
za.Postfix;nf=fd;break;case "??":V.left.type!==ta.LogicalExpression||"||"!==V.left.operator&&"&&"!==V.left.operator||(Td=W[V.left.operator]+1);V.right.type===ta.LogicalExpression&&"&&"===V.right.operator&&(nf=W[V.right.operator]+1);break;case "||":V.left.type===ta.LogicalExpression&&"??"===V.left.operator&&(Td=W[V.left.operator]+1)}fd<Oa&&(U|=1);Td=this.generateExpression(V.left,Td,U);var Je=Td.toString();Je=47===Je.charCodeAt(Je.length-1)&&Pj.esutils.code.isIdentifierPartES5(V.operator.charCodeAt(0))?
[Td,n(),V.operator]:p(Td,V.operator);Td=this.generateExpression(V.right,nf,U);"/"===V.operator&&"/"===Td.toString().charAt(0)||"<"===V.operator.slice(-1)&&"!--"===Td.toString().slice(0,3)?(Je.push(n()),Je.push(Td)):Je=p(Je,Td);return"in"!==V.operator||U&1?y(Je,fd,Oa):["(",Je,")"]},CallExpression:function(V,Oa,U){var fd;var Td=[this.generateExpression(V.callee,za.Call,3)];V.optional&&Td.push("?.");Td.push("(");var nf=0;for(fd=V.arguments.length;nf<fd;++nf)Td.push(this.generateExpression(V.arguments[nf],
za.Assignment,7)),nf+1<fd&&Td.push(","+Lb);Td.push(")");return U&2?null===V.callee.id&&0===V.callee.params.length?y(Td,Oa,za.Call):y(Td,za.Call,Oa):["(",Td,")"]},ChainExpression:function(V,Oa,U){za.OptionalChaining<Oa&&(U|=2);V=this.generateExpression(V.expression,za.OptionalChaining,U);return y(V,za.OptionalChaining,Oa)},NewExpression:function(V,Oa,U){var fd=V.arguments.length;var Td=p("new",this.generateExpression(V.callee,za.New,U&4&&!Ac&&0===fd?5:1));if(!(U&4)||Ac||0<fd){Td.push("(");for(U=0;U<
fd;++U)Td.push(this.generateExpression(V.arguments[U],za.Assignment,7)),U+1<fd&&Td.push(","+Lb);Td.push(")")}return y(Td,za.New,Oa)},MemberExpression:function(V,Oa,U){var fd=[this.generateExpression(V.object,za.Call,U&2?3:1)];V.computed?(V.optional&&fd.push("?."),fd.push("["),fd.push(this.generateExpression(V.property,za.Sequence,U&2?7:5)),fd.push("]")):(V.optional||V.object.type!==ta.Literal||"number"!==typeof V.object.value||(U=k(fd).toString(),0>U.indexOf(".")&&!/[eExX]/.test(U)&&Pj.esutils.code.isDecimalDigit(U.charCodeAt(U.length-
1))&&!(2<=U.length&&48===U.charCodeAt(0))&&fd.push(" ")),fd.push(V.optional?"?.":"."),fd.push(I(V.property)));return y(fd,za.Member,Oa)},MetaProperty:function(V,Oa,U){U=[];U.push("string"===typeof V.meta?V.meta:I(V.meta));U.push(".");U.push("string"===typeof V.property?V.property:I(V.property));return y(U,za.Member,Oa)},UnaryExpression:function(V,Oa,U){var fd=this.generateExpression(V.argument,za.Unary,7);if(""===Lb)U=p(V.operator,fd);else if(U=[V.operator],2<V.operator.length)U=p(U,fd);else{V=k(U).toString();
var Td=V.charCodeAt(V.length-1);V=fd.toString().charCodeAt(0);((43===Td||45===Td)&&Td===V||Pj.esutils.code.isIdentifierPartES5(Td)&&Pj.esutils.code.isIdentifierPartES5(V))&&U.push(n());U.push(fd)}return y(U,za.Unary,Oa)},YieldExpression:function(V,Oa,U){U=V.delegate?"yield*":"yield";V.argument&&(U=p(U,this.generateExpression(V.argument,za.Yield,7)));return y(U,za.Yield,Oa)},AwaitExpression:function(V,Oa,U){V=p(V.all?"await*":"await",this.generateExpression(V.argument,za.Await,7));return y(V,za.Await,
Oa)},UpdateExpression:function(V,Oa,U){return V.prefix?y([V.operator,this.generateExpression(V.argument,za.Unary,7)],za.Unary,Oa):y([this.generateExpression(V.argument,za.Postfix,7),V.operator],za.Postfix,Oa)},FunctionExpression:function(V,Oa,U){Oa=[N(V,!0),"function"];V.id?(Oa.push(J(V)||n()),Oa.push(I(V.id))):Oa.push(J(V)||Lb);Oa.push(this.generateFunctionBody(V));return Oa},ArrayPattern:function(V,Oa,U){return this.ArrayExpression(V,Oa,U,!0)},ArrayExpression:function(V,Oa,U,fd){var Td=this;if(!V.elements.length)return"[]";
var nf=fd?!1:1<V.elements.length;var Je=["[",nf?rc:""];q(function(rf){var fh;var zi=0;for(fh=V.elements.length;zi<fh;++zi)V.elements[zi]?(Je.push(nf?rf:""),Je.push(Td.generateExpression(V.elements[zi],za.Assignment,7))):(nf&&Je.push(rf),zi+1===fh&&Je.push(",")),zi+1<fh&&Je.push(","+(nf?rc:Lb))});nf&&!l(k(Je).toString())&&Je.push(rc);Je.push(nf?Ha:"");Je.push("]");return Je},RestElement:function(V,Oa,U){return"..."+this.generatePattern(V.argument)},ClassExpression:function(V,Oa,U){Oa=["class"];V.id&&
(Oa=p(Oa,this.generateExpression(V.id,za.Sequence,7)));V.superClass&&(U=p("extends",this.generateExpression(V.superClass,za.Unary,7)),Oa=p(Oa,U));Oa.push(Lb);Oa.push(this.generateStatement(V.body,33));return Oa},MethodDefinition:function(V,Oa,U){Oa=[];if(V.decorators.length){U=fa(V.decorators);var fd;try{for(U.s();!(fd=U.n()).done;)Oa.push(this.generateStatement(fd.value)),Oa.push(Ha)}catch(Td){U.e(Td)}finally{U.f()}}V["static"]&&Oa.push("static"+Lb);V="get"===V.kind||"set"===V.kind?[p(V.kind,this.generatePropertyKey(V.key,
V.computed)),this.generateFunctionBody(V.value)]:[sa(V),this.generatePropertyKey(V.key,V.computed),this.generateFunctionBody(V.value)];return p(Oa,V)},PrivateIdentifier:function(V,Oa,U){return I(V)},Decorator:function(V,Oa,U){return["@",this.generateExpression(V.expression,za.Call,2),rc]},Property:function(V,Oa,U){return"get"===V.kind||"set"===V.kind?[V.kind,n(),this.generatePropertyKey(V.key,V.computed),this.generateFunctionBody(V.value)]:V.shorthand?"AssignmentPattern"===V.value.type?this.AssignmentPattern(V.value,
za.Sequence,7):this.generatePropertyKey(V.key,V.computed):V.method?[sa(V),this.generatePropertyKey(V.key,V.computed),this.generateFunctionBody(V.value)]:[this.generatePropertyKey(V.key,V.computed),":"+Lb,this.generateExpression(V.value,za.Assignment,7)]},PropertyDefinition:function(V,Oa,U){Oa=V["static"]?["static "]:[];Oa.push(this.generatePropertyKey(V.key,V.computed));V.value&&(Oa.push(Lb+"="+Lb),Oa.push(this.generateExpression(V.value,za.Assignment,7)));Oa.push(this.semicolon(U));return Oa},ObjectExpression:function(V,
Oa,U){var fd,Td,nf=this;if(!V.properties.length)return"{}";var Je=1<V.properties.length;q(function(){Td=nf.generateExpression(V.properties[0],za.Sequence,7)});if(!Je&&!/[\r\n]/g.test(k(Td).toString()))return["{",Lb,Td,Lb,"}"];q(function(rf){var fh;fd=["{",rc,rf,Td];if(Je){fd.push(","+rc);var zi=1;for(fh=V.properties.length;zi<fh;++zi)fd.push(rf),fd.push(nf.generateExpression(V.properties[zi],za.Sequence,7)),zi+1<fh&&fd.push(","+rc)}});l(k(fd).toString())||fd.push(rc);fd.push(Ha);fd.push("}");return fd},
AssignmentPattern:function(V,Oa,U){return this.generateAssignment(V.left,V.right,"=",Oa,U)},ObjectPattern:function(V,Oa,U){var fd=this;if(!V.properties.length)return"{}";var Td=!1;if(1===V.properties.length){var nf=V.properties[0];nf.type===ta.Property&&nf.value.type!==ta.Identifier&&(Td=!0)}else for(Oa=0,U=V.properties.length;Oa<U;++Oa)if(nf=V.properties[Oa],nf.type===ta.Property&&!nf.shorthand){Td=!0;break}var Je=["{",Td?rc:""];q(function(rf){var fh;var zi=0;for(fh=V.properties.length;zi<fh;++zi)Je.push(Td?
rf:""),Je.push(fd.generateExpression(V.properties[zi],za.Sequence,7)),zi+1<fh&&Je.push(","+(Td?rc:Lb))});Td&&!l(k(Je).toString())&&Je.push(rc);Je.push(Td?Ha:"");Je.push("}");return Je},ThisExpression:function(V,Oa,U){return"this"},Super:function(V,Oa,U){return"super"},Identifier:function(V,Oa,U){return I(V)},ImportDefaultSpecifier:function(V,Oa,U){return I(V.id||V.local)},ImportNamespaceSpecifier:function(V,Oa,U){Oa=["*"];(V=V.id||V.local)&&Oa.push(Lb+"as"+n()+I(V));return Oa},ImportSpecifier:function(V,
Oa,U){Oa=V.imported;U=[Oa.name];(V=V.local)&&V.name!==Oa.name&&U.push(n()+"as"+n()+I(V));return U},ExportSpecifier:function(V,Oa,U){Oa=V.local;U=[Oa.name];(V=V.exported)&&V.name!==Oa.name&&U.push(n()+"as"+n()+I(V));return U},Literal:function(V,Oa,U){if(V.hasOwnProperty("raw")&&na&&Fd.raw)try{var fd=na(V.raw).body[0].expression;if(fd.type===ta.Literal&&fd.value===V.value)return V.raw}catch(zi){}if(V.regex)return"/"+V.regex.pattern+"/"+V.regex.flags;if("string"===typeof V.bigint&&V.raw)return V.raw;
if(null===V.value)return"null";if("string"===typeof V.value){V=V.value;Oa="";var Td=0,nf=0,Je;U=0;for(fd=V.length;U<fd;++U){var rf=V.charCodeAt(U);if(39===rf)++Td;else if(34===rf)++nf;else if(47===rf&&ec)Oa+="\\";else if(Pj.esutils.code.isLineTerminator(rf)||92===rf){Oa+=d(rf);continue}else if(!Pj.esutils.code.isIdentifierPartES5(rf)&&(ec&&32>rf||!ec&&!xa&&(32>rf||126<rf))){Oa+=a(rf,V.charCodeAt(U+1));continue}Oa+=String.fromCharCode(rf)}var fh=(Je=!("double"===Ua||"auto"===Ua&&nf<Td))?"'":'"';if(Je?
Td:nf){V=Oa;Oa=fh;U=0;for(fd=V.length;U<fd;++U){rf=V.charCodeAt(U);if(39===rf&&Je||34===rf&&!Je)Oa+="\\";Oa+=String.fromCharCode(rf)}V=Oa+fh}else V=fh+Oa+fh;return V}if("number"===typeof V.value){if(V.raw&&-1!==V.raw.indexOf("_"))return V.raw;V=V.value;if(V!==V)throw Error("Numeric literal whose value is NaN");if(0>V||0===V&&0>1/V)throw Error("Numeric literal whose value is negative");if(V===1/0)V=ec?"null":mc?"1e400":"1e+400";else{Oa=""+V;if(mc&&!(3>Oa.length)){U=Oa.indexOf(".");ec||48!==Oa.charCodeAt(0)||
1!==U||(U=0,Oa=Oa.slice(1));fd=Oa;Oa=Oa.replace("e+","e");rf=0;0<(Td=fd.indexOf("e"))&&(rf=+fd.slice(Td+1),fd=fd.slice(0,Td));0<=U&&(rf-=fd.length-U-1,fd=+(fd.slice(0,U)+fd.slice(U+1))+"");for(Td=0;48===fd.charCodeAt(fd.length+Td-1);)--Td;0!==Td&&(rf-=Td,fd=fd.slice(0,Td));0!==rf&&(fd+="e"+rf);(fd.length<Oa.length||hc&&1E12<V&&Math.floor(V)===V&&(fd="0x"+V.toString(16)).length<Oa.length)&&+fd===V&&(Oa=fd)}V=Oa}return V}if("boolean"===typeof V.value)return V.value?"true":"false";V=V.value;Oa=V.toString();
if(V.source)if(U=Oa.match(/\/([^/]*)$/)){U=U[1];Oa="";Je=nf=!1;fd=0;for(rf=V.source.length;fd<rf;++fd)Td=V.source.charCodeAt(fd),Je?(Oa+=g(Td,Je),Je=!1):(nf?93===Td&&(nf=!1):47===Td?Oa+="\\":91===Td&&(nf=!0),Oa+=g(Td,Je),Je=92===Td);V="/"+Oa+"/"+U}else V=Oa;else V=Oa;return V},GeneratorExpression:function(V,Oa,U){return this.ComprehensionExpression(V,Oa,U)},ComprehensionExpression:function(V,Oa,U){var fd,Td,nf=this;var Je=V.type===ta.GeneratorExpression?["("]:["["];if(Fd.moz.comprehensionExpressionStartsWithAssignment){var rf=
this.generateExpression(V.body,za.Assignment,7);Je.push(rf)}V.blocks&&q(function(){fd=0;for(Td=V.blocks.length;fd<Td;++fd)rf=nf.generateExpression(V.blocks[fd],za.Sequence,7),0<fd||Fd.moz.comprehensionExpressionStartsWithAssignment?Je=p(Je,rf):Je.push(rf)});V.filter&&(Je=p(Je,"if"+Lb),rf=this.generateExpression(V.filter,za.Sequence,7),Je=p(Je,["(",rf,")"]));Fd.moz.comprehensionExpressionStartsWithAssignment||(rf=this.generateExpression(V.body,za.Assignment,7),Je=p(Je,rf));Je.push(V.type===ta.GeneratorExpression?
")":"]");return Je},ComprehensionBlock:function(V,Oa,U){Oa=V.left.type===ta.VariableDeclaration?[V.left.kind,n(),this.generateStatement(V.left.declarations[0],0)]:this.generateExpression(V.left,za.Call,7);Oa=p(Oa,V.of?"of":"in");Oa=p(Oa,this.generateExpression(V.right,za.Sequence,7));return["for"+Lb+"(",Oa,")"]},SpreadElement:function(V,Oa,U){return["...",this.generateExpression(V.argument,za.Assignment,7)]},TaggedTemplateExpression:function(V,Oa,U){var fd=3;U&2||(fd=1);V=[this.generateExpression(V.tag,
za.Call,fd),this.generateExpression(V.quasi,za.Primary,4)];return y(V,za.TaggedTemplate,Oa)},TemplateElement:function(V,Oa,U){return V.value.raw},TemplateLiteral:function(V,Oa,U){var fd;Oa=["`"];U=0;for(fd=V.quasis.length;U<fd;++U)Oa.push(this.generateExpression(V.quasis[U],za.Primary,7)),U+1<fd&&(Oa.push("${"+Lb),Oa.push(this.generateExpression(V.expressions[U],za.Sequence,7)),Oa.push(Lb+"}"));Oa.push("`");return Oa},ModuleSpecifier:function(V,Oa,U){return this.Literal(V,Oa,U)},ImportExpression:function(V,
Oa,U){return y(["import(",this.generateExpression(V.source,za.Assignment,7),")"],za.Call,Oa)}};b(H.prototype,H.Expression);H.prototype.generateExpression=function(V,Oa,U){var fd=V.type||ta.Property;if(Fd.verbatim&&V.hasOwnProperty(Fd.verbatim))return fd=V[Fd.verbatim],"string"===typeof fd?U=y(D(fd),za.Sequence,Oa):(U=D(fd.content),fd=null!=fd.precedence?fd.precedence:za.Sequence,U=y(U,fd,Oa)),k(U,V);Oa=this[fd](V,Oa,U);Fd.comment&&(Oa=u(V,Oa));return k(Oa,V)};H.prototype.generateStatement=function(V,
Oa){Oa=this[V.type](V,Oa);Fd.comment&&(Oa=u(V,Oa));var U=k(Oa).toString();V.type!==ta.Program||qd||""!==rc||"\n"!==U.charAt(U.length-1)||(Oa=Va?k(Oa).replaceRight(/\s+$/,""):U.replace(/\s+$/,""));return k(Oa,V)};var ea={};var Kb=e().format;ea.generate=function(V,Oa){var U=e();null!=Oa?("string"===typeof Oa.indent&&(U.format.indent.style=Oa.indent),"number"===typeof Oa.base&&(U.format.indent.base=Oa.base),Oa=c(U,Oa),Qa=Oa.format.indent.style,Ha="string"===typeof Oa.base?Oa.base:h(Qa,Oa.format.indent.base)):
(Oa=U,Qa=Oa.format.indent.style,Ha=h(Qa,Oa.format.indent.base));ec=Oa.format.json;mc=Oa.format.renumber;hc=ec?!1:Oa.format.hexadecimal;Ua=ec?"double":Oa.format.quotes;xa=Oa.format.escapeless;rc=Oa.format.newline;Lb=Oa.format.space;Oa.format.compact&&(rc=Lb=Qa=Ha="");Ac=Oa.format.parentheses;Xb=Oa.format.semicolons;qd=Oa.format.safeConcatenation;La=Oa.directive;na=ec?null:Oa.parse;Va=Oa.sourceMap;yd=Oa.sourceCode;me=Oa.format.preserveBlankLines&&null!==yd;Fd=Oa;Va&&(ja=ea.browser?global.sourceMap.SourceNode:
System._nodeRequire("source-map").SourceNode);U=new H;if(H.Statement.hasOwnProperty(V.type))V=U.generateStatement(V,1);else if(H.Expression.hasOwnProperty(V.type))V=U.generateExpression(V,za.Sequence,7);else throw Error("Unknown node type: "+V.type);if(!Va)return V={code:V.toString(),map:null},Oa.sourceMapWithCode?V:V.code;V=V.toStringWithSourceMap({file:Oa.file,sourceRoot:Oa.sourceMapRoot});Oa.sourceContent&&V.map.setSourceContent(Oa.sourceMap,Oa.sourceContent);return Oa.sourceMapWithCode?V:V.map.toString()};
ea.attachComments=Pj.estraverse.attachComments;ea.Precedence=c({},za);ea.browser=!1;ea.FORMAT_MINIFY={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1};ea.FORMAT_DEFAULTS=Kb;return ea};Pj.stringify=Bl;Pj.obj=bj;Pj.estraverse=tx;Pj.esutils=lv;Pj.es=Pj.ESCODEGEN();var ux=Pj.es;Pj.escodegen=ux;Pj.es=ux;Pj["default"]=Bl;var aR={exports:{}},an=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/acorn/8.0.4/dist/acorn.js");
an.requireAcorn=al;an.commonjsHelpers=Wl;an.acornModule=aR;an.acorn=aR.exports;an.hasRequiredAcorn=an.hasRequiredAcorn||void 0;an.__require=al;an.requireAcorn=al;const hm=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/acorn-decorators.cjs");hm.commonjsHelpers=Wl;hm.require$$0=al;hm.acorn=hm.require$$0();hm.getAcorn=e=>{if(e.acorn)return e.acorn;if(0!==hm.acorn.version.indexOf("6.")&&0===hm.acorn.version.indexOf("6.0.")&&0!==hm.acorn.version.indexOf("7."))throw Error(`acorn-private-class-elements requires acorn@^6.1.0 or acorn@7.0.0, not ${hm.acorn.version}`);
for(;e&&e!==hm.acorn.Parser;e=Object.getPrototypeOf(e))if(e!==hm.acorn.Parser)throw Error("acorn-private-class-elements does not support mixing different acorn copies");return hm.acorn};hm.acornDecorators=function(e){if(e.prototype._parseDecorator)return e;const h=hm.getAcorn(e);class l extends e{_parseDecorator(){let b=this.startNode();this.next();b.expression=this.parseMaybeUnary();return this.finishNode(b,"Decorator")}getTokenFromCode(b){return 64===b?(++this.pos,this.finishToken(this.decoratorIdentifier)):
super.getTokenFromCode(b)}parseStatement(b,c,g){let a=[];switch(this.type){case this.decoratorIdentifier:for(;this.type===this.decoratorIdentifier;)a.push(this._parseDecorator());this.type!==h.tokTypes._class&&this.raise(this.start,"Leading decorators must be attached to a class declaration");case h.tokTypes._class:return b&&this.unexpected(),b=super.parseStatement(b,c,g),b.decorators=a,a.length&&(b.start=b.decorators[0].start),b}return super.parseStatement(b,c,g)}parseClass(b,c){b=super.parseClass(b,
c);b.decorators=[];return b}parseClassElement(b){let c=[];switch(this.type){case this.decoratorIdentifier:for(;this.type===this.decoratorIdentifier;)c.push(this._parseDecorator());this.type!==h.tokTypes.name&&this.type!==h.tokTypes.star&&this.raise(this.start,"Inline decorators must be attached to a property declaration");case this.privateIdentifierToken:case h.tokTypes.star:case h.tokTypes.bracketL:case h.tokTypes.name:case h.tokTypes._with:case h.tokTypes._delete:return b=super.parseClassElement(b),
b.decorators=c,c.length&&(b.start=b.decorators[0].start),b}return super.parseClassElement(b)}}l.prototype.decoratorIdentifier=new h.TokenType("decorator-Identifier");return l};var vx=hm.acornDecorators,S0=vx;vx=hm.acornDecorators;hm.__moduleExports=vx;hm.acornDecorators=vx;hm.default=vx;var Wn=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/acorn-private-class-elements/1.0.0/index.js");Wn.commonjsHelpers=Wl;Wn.require$$0=al;Wn.getPrototype=Object.getPrototypeOf||function(e){return e.__proto__};
Wn.getAcorn=function(e){if(e.acorn)return e.acorn;var h=Wn.require$$0();if(0!=h.version.indexOf("6.")&&0==h.version.indexOf("6.0.")&&0!=h.version.indexOf("7."))throw Error("acorn-private-class-elements requires acorn@^6.1.0 or acorn@7.0.0, not ".concat(h.version));for(;e&&e!==h.Parser;e=Wn.getPrototype(e))if(e!==h.Parser)throw Error("acorn-private-class-elements does not support mixing different acorn copies");return h};Wn._1_0_0=function(e){if(e.prototype.parsePrivateName)return e;var h=Wn.getAcorn(e);
e=function(l){function b(){Sd(this,b);return c.apply(this,arguments)}vd(b,l);var c=qb(b);uc(b,[{key:"_branch",value:function(){this.__branch=this.__branch||new e({ecmaVersion:this.options.ecmaVersion},this.input);this.__branch.end=this.end;this.__branch.pos=this.pos;this.__branch.type=this.type;this.__branch.value=this.value;this.__branch.containsEsc=this.containsEsc;return this.__branch}},{key:"parsePrivateClassElementName",value:function(g){g.computed=!1;g.key=this.parsePrivateName();"constructor"==
g.key.name&&this.raise(g.key.start,"Classes may not have a private element named constructor");var a={get:"set",set:"get"}[g.kind],d=this._privateBoundNames;Object.prototype.hasOwnProperty.call(d,g.key.name)&&d[g.key.name]!==a&&this.raise(g.start,"Duplicate private element");d[g.key.name]=g.kind||!0;delete this._unresolvedPrivateNames[g.key.name];return g.key}},{key:"parsePrivateName",value:function(){var g=this.startNode();g.name=this.value;this.next();this.finishNode(g,"PrivateIdentifier");"never"==
this.options.allowReserved&&this.checkUnreserved(g);return g}},{key:"getTokenFromCode",value:function(g){return 35===g?(++this.pos,g=this.readWord1(),this.finishToken(this.privateIdentifierToken,g)):ic(Ed(b.prototype),"getTokenFromCode",this).call(this,g)}},{key:"parseClass",value:function(g,a){var d=this._outerPrivateBoundNames;this._outerPrivateBoundNames=this._privateBoundNames;this._privateBoundNames=Object.create(this._privateBoundNames||null);var f=this._outerUnresolvedPrivateNames;this._outerUnresolvedPrivateNames=
this._unresolvedPrivateNames;this._unresolvedPrivateNames=Object.create(null);g=ic(Ed(b.prototype),"parseClass",this).call(this,g,a);var k=this._unresolvedPrivateNames;this._privateBoundNames=this._outerPrivateBoundNames;this._outerPrivateBoundNames=d;this._unresolvedPrivateNames=this._outerUnresolvedPrivateNames;this._outerUnresolvedPrivateNames=f;this._unresolvedPrivateNames?Object.assign(this._unresolvedPrivateNames,k):(d=Object.keys(k),d.length&&(d.sort(function(n,p){return k[n]-k[p]}),this.raise(k[d[0]],
"Usage of undeclared private name")));return g}},{key:"parseClassSuper",value:function(g){var a=this._privateBoundNames;this._privateBoundNames=this._outerPrivateBoundNames;var d=this._unresolvedPrivateNames;this._unresolvedPrivateNames=this._outerUnresolvedPrivateNames;g=ic(Ed(b.prototype),"parseClassSuper",this).call(this,g);this._privateBoundNames=a;this._unresolvedPrivateNames=d;return g}},{key:"parseSubscript",value:function(g,a,d,f,k,n){var p=11<=this.options.ecmaVersion&&h.tokTypes.questionDot,
q=this._branch();if(!(q.eat(h.tokTypes.dot)||p&&q.eat(h.tokTypes.questionDot))||q.type!=this.privateIdentifierToken)return ic(Ed(b.prototype),"parseSubscript",this).apply(this,arguments);q=!1;this.eat(h.tokTypes.dot)||(this.expect(h.tokTypes.questionDot),q=!0);var r=this.startNodeAt(a,d);r.object=g;r.computed=!1;p&&(r.optional=q);this.type==this.privateIdentifierToken?("Super"==g.type&&this.raise(this.start,"Cannot access private element on super"),r.property=this.parsePrivateName(),this._privateBoundNames&&
this._privateBoundNames[r.property.name]||(this._unresolvedPrivateNames||this.raise(r.property.start,"Usage of undeclared private name"),this._unresolvedPrivateNames[r.property.name]=r.property.start)):r.property=this.parseIdent(!0);return this.finishNode(r,"MemberExpression")}},{key:"parseMaybeUnary",value:function(g,a){g=ic(Ed(b.prototype),"parseMaybeUnary",this).call(this,g,a);"delete"==g.operator&&"MemberExpression"==g.argument.type&&"PrivateIdentifier"==g.argument.property.type&&this.raise(g.start,
"Private elements may not be deleted");return g}}]);return b}(e);e.prototype.privateIdentifierToken=new h.TokenType("privateIdentifier");return e};var et=Wn._1_0_0;et=Wn._1_0_0;Wn.__moduleExports=et;Wn._1_0_0=et;Wn["default"]=et;var Xn=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/acorn-class-fields/1.0.0/index.js");Xn.commonjsHelpers=Wl;Xn.require$$0=et;Xn.require$$1=al;Xn.privateClassElements=Xn.require$$0;Xn._1_0_0=function(e){var h=(e.acorn||Xn.require$$1()).tokTypes;e=Xn.privateClassElements(e);
return function(l){function b(){Sd(this,b);return c.apply(this,arguments)}vd(b,l);var c=qb(b);uc(b,[{key:"_maybeParseFieldValue",value:function(g){if(this.eat(h.eq)){var a=this._inFieldValue;this._inFieldValue=!0;g.value=this.type===h.name&&"await"===this.value&&(this.inAsync||this.options.allowAwaitOutsideFunction)?this.parseAwait():this.parseExpression();this._inFieldValue=a}else g.value=null}},{key:"parseClassElement",value:function(g){if(8<=this.options.ecmaVersion&&(this.type==h.name||this.type.keyword||
this.type==this.privateIdentifierToken||this.type==h.bracketL||this.type==h.string||this.type==h.num)){var a=this._branch();if(a.type==h.bracketL){var d=0;do a.eat(h.bracketL)?++d:a.eat(h.bracketR)?--d:a.next();while(0<d)}else a.next(!0);d=a.type==h.eq||a.type==h.semi;!d&&a.canInsertSemicolon()&&(d=a.type!=h.parenL);if(d)return a=this.startNode(),this.type==this.privateIdentifierToken?this.parsePrivateClassElementName(a):this.parsePropertyName(a),("Identifier"===a.key.type&&"constructor"===a.key.name||
"Literal"===a.key.type&&"constructor"===a.key.value)&&this.raise(a.key.start,"Classes may not have a field called constructor"),this.enterScope(67),this._maybeParseFieldValue(a),this.exitScope(),this.finishNode(a,"PropertyDefinition"),this.semicolon(),a}return ic(Ed(b.prototype),"parseClassElement",this).apply(this,arguments)}},{key:"parseIdent",value:function(g,a){g=ic(Ed(b.prototype),"parseIdent",this).call(this,g,a);this._inFieldValue&&"arguments"==g.name&&this.raise(g.start,"A class field initializer may not contain arguments");
return g}}]);return b}(e)};var wx=Xn._1_0_0,T0=wx;wx=Xn._1_0_0;Xn.__moduleExports=wx;Xn._1_0_0=wx;Xn["default"]=wx;var Yn=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/acorn-static-class-features/1.0.0/index.js");Yn.commonjsHelpers=Wl;Yn.require$$0=et;Yn.require$$1=al;Yn.privateClassElements=Yn.require$$0;Yn._1_0_0=function(e){var h=Yn.privateClassElements(e),l=(e.acorn||Yn.require$$1()).tokTypes;return function(b){function c(){Sd(this,c);return g.apply(this,arguments)}vd(c,b);
var g=qb(c);uc(c,[{key:"_maybeParseFieldValue",value:function(a){if(this.eat(l.eq)){var d=this._inStaticFieldScope;this._inStaticFieldScope=this.currentThisScope();a.value=this.parseExpression();this._inStaticFieldScope=d}else a.value=null}},{key:"parseClassElement",value:function(a){if(8>this.options.ecmaVersion||!this.isContextual("static"))return ic(Ed(c.prototype),"parseClassElement",this).apply(this,arguments);var d=this._branch();d.next();if(-1==[l.name,l.bracketL,l.string,l.num,this.privateIdentifierToken].indexOf(d.type)&&
!d.type.keyword)return ic(Ed(c.prototype),"parseClassElement",this).apply(this,arguments);if(d.type==l.bracketL){var f=0;do d.eat(l.bracketL)?++f:d.eat(l.bracketR)?--f:d.next();while(0<f)}else d.next();if(d.type!=l.eq&&!d.canInsertSemicolon()&&d.type!=l.semi)return ic(Ed(c.prototype),"parseClassElement",this).apply(this,arguments);d=this.startNode();d["static"]=this.eatContextual("static");this.type==this.privateIdentifierToken?this.parsePrivateClassElementName(d):this.parsePropertyName(d);("Identifier"===
d.key.type&&"constructor"===d.key.name||"Literal"===d.key.type&&!d.computed&&"constructor"===d.key.value)&&this.raise(d.key.start,"Classes may not have a field called constructor");"prototype"!==(d.key.name||d.key.value)||d.computed||this.raise(d.key.start,"Classes may not have a static property named prototype");this.enterScope(67);this._maybeParseFieldValue(d);this.exitScope();this.finishNode(d,"PropertyDefinition");this.semicolon();return d}},{key:"parsePropertyName",value:function(a){a["static"]&&
this.type==this.privateIdentifierToken?this.parsePrivateClassElementName(a):ic(Ed(c.prototype),"parsePropertyName",this).call(this,a)}},{key:"parseIdent",value:function(a,d){a=ic(Ed(c.prototype),"parseIdent",this).call(this,a,d);this._inStaticFieldScope&&this.currentThisScope()===this._inStaticFieldScope&&"arguments"==a.name&&this.raise(a.start,"A static class field initializer may not contain arguments");return a}}]);return c}(h)};var xx=Yn._1_0_0,U0=xx;xx=Yn._1_0_0;Yn.__moduleExports=xx;Yn._1_0_0=
xx;Yn["default"]=xx;var Hm=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/acorn-private-methods/1.0.0/dist/acorn-private-methods.js");Hm._interopDefaultLegacy=function(e){return e&&"object"===ad(e)&&"default"in e?e:{"default":e}};Hm.privateMethods=function(e){return function(h){function l(){Sd(this,l);return b.apply(this,arguments)}vd(l,h);var b=qb(l);uc(l,[{key:"parseClassElement",value:function(c){var g=this._inClassMemberName;this._inClassMemberName=!0;var a=ic(Ed(l.prototype),
"parseClassElement",this).apply(this,arguments);this._inClassMemberName=g;return a}},{key:"parsePropertyName",value:function(c){var g=8<=this.options.ecmaVersion&&this._inClassMemberName&&this.type==this.privateIdentifierToken&&!c["static"];this._inClassMemberName=!1;return g?this.parsePrivateClassElementName(c):ic(Ed(l.prototype),"parsePropertyName",this).call(this,c)}}]);return l}(Hm.privateClassElements__default["default"](e))};Hm.commonjsHelpers=Wl;Hm.require$$0=et;Hm.privateClassElements=Hm.require$$0;
Hm.privateClassElements__default=Hm._interopDefaultLegacy(Hm.privateClassElements);Hm.acornPrivateMethods=Hm.privateMethods;var yx=Hm.acornPrivateMethods,V0=yx;yx=Hm.acornPrivateMethods;Hm.__moduleExports=yx;Hm.acornPrivateMethods=yx;Hm["default"]=yx;var bR=al(),W0=Object.freeze(Rc({__proto__:null,"default":bR},[bR])),ft={exports:{}},Qq=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/acorn-walk/8.2.0/dist/walk.js");Qq.commonjsHelpers=Wl;Qq.walkModule=ft;Qq.walk=ft.exports;(function(e,
h){(function(l,b){b(h)})(Qq.commonjsHelpers.commonjsGlobal,function(l){function b(k){return"string"===typeof k?function(n){return n===k}:k?k:function(){return!0}}function c(k,n){n=Object.create(n||f);for(var p in k)n[p]=k[p];return n}function g(k,n,p){p(k,n)}function a(k,n,p){}var d=function(k,n){this.node=k;this.state=n},f={};f.Program=f.BlockStatement=f.StaticBlock=function(k,n,p){var q=0;for(k=k.body;q<k.length;q+=1)p(k[q],n,"Statement")};f.Statement=g;f.EmptyStatement=a;f.ExpressionStatement=
f.ParenthesizedExpression=f.ChainExpression=function(k,n,p){return p(k.expression,n,"Expression")};f.IfStatement=function(k,n,p){p(k.test,n,"Expression");p(k.consequent,n,"Statement");k.alternate&&p(k.alternate,n,"Statement")};f.LabeledStatement=function(k,n,p){return p(k.body,n,"Statement")};f.BreakStatement=f.ContinueStatement=a;f.WithStatement=function(k,n,p){p(k.object,n,"Expression");p(k.body,n,"Statement")};f.SwitchStatement=function(k,n,p){p(k.discriminant,n,"Expression");var q=0;for(k=k.cases;q<
k.length;q+=1){var r=k[q];r.test&&p(r.test,n,"Expression");var u=0;for(r=r.consequent;u<r.length;u+=1)p(r[u],n,"Statement")}};f.SwitchCase=function(k,n,p){k.test&&p(k.test,n,"Expression");var q=0;for(k=k.consequent;q<k.length;q+=1)p(k[q],n,"Statement")};f.ReturnStatement=f.YieldExpression=f.AwaitExpression=function(k,n,p){k.argument&&p(k.argument,n,"Expression")};f.ThrowStatement=f.SpreadElement=function(k,n,p){return p(k.argument,n,"Expression")};f.TryStatement=function(k,n,p){p(k.block,n,"Statement");
k.handler&&p(k.handler,n);k.finalizer&&p(k.finalizer,n,"Statement")};f.CatchClause=function(k,n,p){k.param&&p(k.param,n,"Pattern");p(k.body,n,"Statement")};f.WhileStatement=f.DoWhileStatement=function(k,n,p){p(k.test,n,"Expression");p(k.body,n,"Statement")};f.ForStatement=function(k,n,p){k.init&&p(k.init,n,"ForInit");k.test&&p(k.test,n,"Expression");k.update&&p(k.update,n,"Expression");p(k.body,n,"Statement")};f.ForInStatement=f.ForOfStatement=function(k,n,p){p(k.left,n,"ForInit");p(k.right,n,"Expression");
p(k.body,n,"Statement")};f.ForInit=function(k,n,p){"VariableDeclaration"===k.type?p(k,n):p(k,n,"Expression")};f.DebuggerStatement=a;f.FunctionDeclaration=function(k,n,p){return p(k,n,"Function")};f.VariableDeclaration=function(k,n,p){var q=0;for(k=k.declarations;q<k.length;q+=1)p(k[q],n)};f.VariableDeclarator=function(k,n,p){p(k.id,n,"Pattern");k.init&&p(k.init,n,"Expression")};f.Function=function(k,n,p){k.id&&p(k.id,n,"Pattern");for(var q=0,r=k.params;q<r.length;q+=1)p(r[q],n,"Pattern");p(k.body,
n,k.expression?"Expression":"Statement")};f.Pattern=function(k,n,p){"Identifier"===k.type?p(k,n,"VariablePattern"):"MemberExpression"===k.type?p(k,n,"MemberPattern"):p(k,n)};f.VariablePattern=a;f.MemberPattern=g;f.RestElement=function(k,n,p){return p(k.argument,n,"Pattern")};f.ArrayPattern=function(k,n,p){var q=0;for(k=k.elements;q<k.length;q+=1){var r=k[q];r&&p(r,n,"Pattern")}};f.ObjectPattern=function(k,n,p){var q=0;for(k=k.properties;q<k.length;q+=1){var r=k[q];"Property"===r.type?(r.computed&&
p(r.key,n,"Expression"),p(r.value,n,"Pattern")):"RestElement"===r.type&&p(r.argument,n,"Pattern")}};f.Expression=g;f.ThisExpression=f.Super=f.MetaProperty=a;f.ArrayExpression=function(k,n,p){var q=0;for(k=k.elements;q<k.length;q+=1){var r=k[q];r&&p(r,n,"Expression")}};f.ObjectExpression=function(k,n,p){var q=0;for(k=k.properties;q<k.length;q+=1)p(k[q],n)};f.FunctionExpression=f.ArrowFunctionExpression=f.FunctionDeclaration;f.SequenceExpression=function(k,n,p){var q=0;for(k=k.expressions;q<k.length;q+=
1)p(k[q],n,"Expression")};f.TemplateLiteral=function(k,n,p){for(var q=0,r=k.quasis;q<r.length;q+=1)p(r[q],n);q=0;for(k=k.expressions;q<k.length;q+=1)p(k[q],n,"Expression")};f.TemplateElement=a;f.UnaryExpression=f.UpdateExpression=function(k,n,p){p(k.argument,n,"Expression")};f.BinaryExpression=f.LogicalExpression=function(k,n,p){p(k.left,n,"Expression");p(k.right,n,"Expression")};f.AssignmentExpression=f.AssignmentPattern=function(k,n,p){p(k.left,n,"Pattern");p(k.right,n,"Expression")};f.ConditionalExpression=
function(k,n,p){p(k.test,n,"Expression");p(k.consequent,n,"Expression");p(k.alternate,n,"Expression")};f.NewExpression=f.CallExpression=function(k,n,p){p(k.callee,n,"Expression");if(k.arguments){var q=0;for(k=k.arguments;q<k.length;q+=1)p(k[q],n,"Expression")}};f.MemberExpression=function(k,n,p){p(k.object,n,"Expression");k.computed&&p(k.property,n,"Expression")};f.ExportNamedDeclaration=f.ExportDefaultDeclaration=function(k,n,p){k.declaration&&p(k.declaration,n,"ExportNamedDeclaration"===k.type||
k.declaration.id?"Statement":"Expression");k.source&&p(k.source,n,"Expression")};f.ExportAllDeclaration=function(k,n,p){k.exported&&p(k.exported,n);p(k.source,n,"Expression")};f.ImportDeclaration=function(k,n,p){for(var q=0,r=k.specifiers;q<r.length;q+=1)p(r[q],n);p(k.source,n,"Expression")};f.ImportExpression=function(k,n,p){p(k.source,n,"Expression")};f.ImportSpecifier=f.ImportDefaultSpecifier=f.ImportNamespaceSpecifier=f.Identifier=f.PrivateIdentifier=f.Literal=a;f.TaggedTemplateExpression=function(k,
n,p){p(k.tag,n,"Expression");p(k.quasi,n,"Expression")};f.ClassDeclaration=f.ClassExpression=function(k,n,p){return p(k,n,"Class")};f.Class=function(k,n,p){k.id&&p(k.id,n,"Pattern");k.superClass&&p(k.superClass,n,"Expression");p(k.body,n)};f.ClassBody=function(k,n,p){var q=0;for(k=k.body;q<k.length;q+=1)p(k[q],n)};f.MethodDefinition=f.PropertyDefinition=f.Property=function(k,n,p){k.computed&&p(k.key,n,"Expression");k.value&&p(k.value,n,"Expression")};l.ancestor=function(k,n,p,q,r){var u=[];p||(p=
f);(function I(y,D,H){H=H||y.type;var N=n[H],J=y!==u[u.length-1];J&&u.push(y);p[H](y,D,I);N&&N(y,D||u,u);J&&u.pop()})(k,q,r)};l.base=f;l.findNodeAfter=function(k,n,p,q,r){p=b(p);q||(q=f);try{(function H(x,y,D){if(!(x.end<n)){D=D||x.type;if(x.start>=n&&p(D,x))throw new d(x,y);q[D](x,y,H)}})(k,r)}catch(u){if(u instanceof d)return u;throw u;}};l.findNodeAround=function(k,n,p,q,r){p=b(p);q||(q=f);try{(function H(x,y,D){D=D||x.type;if(!(x.start>n||x.end<n)&&(q[D](x,y,H),p(D,x)))throw new d(x,y);})(k,r)}catch(u){if(u instanceof
d)return u;throw u;}};l.findNodeAt=function(k,n,p,q,r,u){r||(r=f);q=b(q);try{(function I(y,D,H){H=H||y.type;if((null==n||y.start<=n)&&(null==p||y.end>=p))r[H](y,D,I);if(!(null!=n&&y.start!==n||null!=p&&y.end!==p)&&q(H,y))throw new d(y,D);})(k,u)}catch(x){if(x instanceof d)return x;throw x;}};l.findNodeBefore=function(k,n,p,q,r){p=b(p);q||(q=f);var u;(function I(y,D,H){y.start>n||(H=H||y.type,y.end<=n&&(!u||u.node.end<y.end)&&p(H,y)&&(u=new d(y,D)),q[H](y,D,I))})(k,r);return u};l.full=function(k,n,
p,q,r){p||(p=f);var u;(function I(y,D,H){H=H||y.type;p[H](y,D,I);u!==y&&(n(y,D,H),u=y)})(k,q,r)};l.fullAncestor=function(k,n,p,q){p||(p=f);var r=[],u;(function I(y,D,H){H=H||y.type;var N=y!==r[r.length-1];N&&r.push(y);p[H](y,D,I);u!==y&&(n(y,D||r,r,H),u=y);N&&r.pop()})(k,q)};l.make=c;l.recursive=function(k,n,p,q,r){var u=p?c(p,q||void 0):q;(function I(y,D,H){u[H||y.type](y,D,I)})(k,n,r)};l.simple=function(k,n,p,q,r){p||(p=f);(function H(x,y,D){D=D||x.type;var I=n[D];p[D](x,y,H);I&&I(x,y)})(k,q,r)};
Object.defineProperty(l,"__esModule",{value:!0})})})(Qq.walkModule,Qq.walk);var X0=ft.exports;Qq.__moduleExports=ft.exports;Qq.walk=ft.exports;Qq["default"]=ft.exports;var Ir=Object.freeze(Rc({__proto__:null,"default":X0},[ft.exports]));bd("c0",Ir);var gt={exports:{}},cR={exports:{}},bn=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/acorn/8.5.0/dist/acorn.js");bn.requireAcorn=tn;bn.commonjsHelpers=Wl;bn.acornModule=cR;bn.acorn=cR.exports;bn.hasRequiredAcorn=bn.hasRequiredAcorn||
void 0;bn.__require=tn;bn.requireAcorn=tn;var dp=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/acorn-loose/8.3.0/dist/acorn-loose.js");dp.commonjsHelpers=Wl;dp.acornLooseModule=gt;dp.acornLoose=gt.exports;dp.require$$0=tn;(function(e,h){(function(l,b){b(h,dp.require$$0())})(dp.commonjsHelpers.commonjsGlobal,function(l,b){function c(k){return"\u2716"===k.name}function g(){}function a(k){return 14>k&&8<k||32===k||160===k||b.isNewLine(k)}var d=function(k,n){void 0===n&&(n={});this.toks=
this.constructor.BaseParser.tokenizer(k,n);this.options=this.toks.options;this.input=this.toks.input;this.tok=this.last={type:b.tokTypes.eof,start:0,end:0};this.tok.validateRegExpFlags=g;this.tok.validateRegExpPattern=g;this.options.locations&&(k=this.toks.curPosition(),this.tok.loc=new b.SourceLocation(this.toks,k,k));this.ahead=[];this.context=[];this.curLineStart=this.curIndent=0;this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.inFunction=this.inGenerator=this.inAsync=!1};d.prototype.startNode=
function(){return new b.Node(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)};d.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start};d.prototype.startNodeAt=function(k){return this.options.locations?new b.Node(this.toks,k[0],k[1]):new b.Node(this.toks,k)};d.prototype.finishNode=function(k,n){k.type=n;k.end=this.last.end;this.options.locations&&(k.loc.end=this.last.loc.end);this.options.ranges&&(k.range[1]=this.last.end);
return k};d.prototype.dummyNode=function(k){var n=this.startNode();n.type=k;n.end=n.start;this.options.locations&&(n.loc.end=n.loc.start);this.options.ranges&&(n.range[1]=n.start);this.last={type:b.tokTypes.name,start:n.start,end:n.start,loc:n.loc};return n};d.prototype.dummyIdent=function(){var k=this.dummyNode("Identifier");k.name="\u2716";return k};d.prototype.dummyString=function(){var k=this.dummyNode("Literal");k.value=k.raw="\u2716";return k};d.prototype.eat=function(k){return this.tok.type===
k?(this.next(),!0):!1};d.prototype.isContextual=function(k){return this.tok.type===b.tokTypes.name&&this.tok.value===k};d.prototype.eatContextual=function(k){return this.tok.value===k&&this.eat(b.tokTypes.name)};d.prototype.canInsertSemicolon=function(){return this.tok.type===b.tokTypes.eof||this.tok.type===b.tokTypes.braceR||b.lineBreak.test(this.input.slice(this.last.end,this.tok.start))};d.prototype.semicolon=function(){return this.eat(b.tokTypes.semi)};d.prototype.expect=function(k){if(this.eat(k))return!0;
for(var n=1;2>=n;n++)if(this.lookAhead(n).type===k){for(k=0;k<n;k++)this.next();return!0}};d.prototype.pushCx=function(){this.context.push(this.curIndent)};d.prototype.popCx=function(){this.curIndent=this.context.pop()};d.prototype.lineEnd=function(k){for(;k<this.input.length&&!b.isNewLine(this.input.charCodeAt(k));)++k;return k};d.prototype.indentationAfter=function(k){for(var n=0;;++k){var p=this.input.charCodeAt(k);if(32===p)++n;else if(9===p)n+=this.options.tabSize;else return n}};d.prototype.closes=
function(k,n,p,q){return this.tok.type===k||this.tok.type===b.tokTypes.eof?!0:p!==this.curLineStart&&this.curIndent<n&&this.tokenStartsLine()&&(!q||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<n)};d.prototype.tokenStartsLine=function(){for(var k=this.tok.start-1;k>=this.curLineStart;--k){var n=this.input.charCodeAt(k);if(9!==n&&32!==n)return!1}return!0};d.prototype.extend=function(k,n){this[k]=n(this[k])};d.prototype.parse=function(){this.next();return this.parseTopLevel()};
d.extend=function(){for(var k=[],n=arguments.length;n--;)k[n]=arguments[n];n=this;for(var p=0;p<k.length;p++)n=k[p](n);return n};d.parse=function(k,n){return(new this(k,n)).parse()};d.BaseParser=b.Parser;var f=d.prototype;f.next=function(){this.last=this.tok;this.tok=this.ahead.length?this.ahead.shift():this.readToken();if(this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.curIndent=
this.indentationAfter(this.curLineStart)}};f.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===b.tokTypes.dot&&"."===this.input.substr(this.toks.end,1)&&6<=this.options.ecmaVersion&&(this.toks.end++,this.toks.type=b.tokTypes.ellipsis),new b.Token(this.toks)}catch(q){if(!(q instanceof SyntaxError))throw q;var k=q.message,n=q.raisedAt,p=!0;if(/unterminated/i.test(k))if(n=this.lineEnd(q.pos+1),/string/.test(k))p={start:q.pos,end:n,type:b.tokTypes.string,value:this.input.slice(q.pos+
1,n)};else if(/regular expr/i.test(k)){p=this.input.slice(q.pos,n);try{p=new RegExp(p)}catch(r){}p={start:q.pos,end:n,type:b.tokTypes.regexp,value:p}}else p=/template/.test(k)?{start:q.pos,end:n,type:b.tokTypes.template,value:this.input.slice(q.pos,n)}:!1;else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(k))for(;n<this.input.length&&!a(this.input.charCodeAt(n));)++n;else if(/character escape|expected hexadecimal/i.test(k))for(;n<
this.input.length&&(k=this.input.charCodeAt(n++),34!==k&&39!==k&&!b.isNewLine(k)););else if(/unexpected character/i.test(k))n++,p=!1;else if(/regular expression/i.test(k))p=!0;else throw q;this.resetTo(n);!0===p&&(p={start:n,end:n,type:b.tokTypes.name,value:"\u2716"});if(p)return this.options.locations&&(p.loc=new b.SourceLocation(this.toks,b.getLineInfo(this.input,p.start),b.getLineInfo(this.input,p.end))),p}};f.resetTo=function(k){this.toks.pos=k;var n=this.input.charAt(k-1);this.toks.exprAllowed=
!n||/[[{(,;:?/*=+\-~!|&%^<>]/.test(n)||/[enwfd]/.test(n)&&/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(k-10,k));if(this.options.locations){this.toks.curLine=1;this.toks.lineStart=b.lineBreakG.lastIndex=0;for(var p;(p=b.lineBreakG.exec(this.input))&&p.index<k;)++this.toks.curLine,this.toks.lineStart=p.index+p[0].length}};f.lookAhead=function(k){for(;k>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[k-1]};f=d.prototype;f.parseTopLevel=
function(){var k=this.startNodeAt(this.options.locations?[0,b.getLineInfo(this.input,0)]:0);for(k.body=[];this.tok.type!==b.tokTypes.eof;)k.body.push(this.parseStatement());this.toks.adaptDirectivePrologue(k.body);this.last=this.tok;k.sourceType=this.options.sourceType;return this.finishNode(k,"Program")};f.parseStatement=function(){var k=this.tok.type,n=this.startNode();if(this.toks.isLet()){k=b.tokTypes._var;var p="let"}switch(k){case b.tokTypes._break:case b.tokTypes._continue:this.next();var q=
k===b.tokTypes._break;this.semicolon()||this.canInsertSemicolon()?n.label=null:(n.label=this.tok.type===b.tokTypes.name?this.parseIdent():null,this.semicolon());return this.finishNode(n,q?"BreakStatement":"ContinueStatement");case b.tokTypes._debugger:return this.next(),this.semicolon(),this.finishNode(n,"DebuggerStatement");case b.tokTypes._do:return this.next(),n.body=this.parseStatement(),n.test=this.eat(b.tokTypes._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(n,
"DoWhileStatement");case b.tokTypes._for:this.next();q=9<=this.options.ecmaVersion&&this.eatContextual("await");this.pushCx();this.expect(b.tokTypes.parenL);if(this.tok.type===b.tokTypes.semi)return this.parseFor(n,null);if((k=this.toks.isLet())||this.tok.type===b.tokTypes._var||this.tok.type===b.tokTypes._const)return k=this.parseVar(this.startNode(),!0,k?"let":this.tok.value),1!==k.declarations.length||this.tok.type!==b.tokTypes._in&&!this.isContextual("of")?this.parseFor(n,k):(9<=this.options.ecmaVersion&&
this.tok.type!==b.tokTypes._in&&(n.await=q),this.parseForIn(n,k));k=this.parseExpression(!0);return this.tok.type===b.tokTypes._in||this.isContextual("of")?(9<=this.options.ecmaVersion&&this.tok.type!==b.tokTypes._in&&(n.await=q),this.parseForIn(n,this.toAssignable(k))):this.parseFor(n,k);case b.tokTypes._function:return this.next(),this.parseFunction(n,!0);case b.tokTypes._if:return this.next(),n.test=this.parseParenExpression(),n.consequent=this.parseStatement(),n.alternate=this.eat(b.tokTypes._else)?
this.parseStatement():null,this.finishNode(n,"IfStatement");case b.tokTypes._return:return this.next(),this.eat(b.tokTypes.semi)||this.canInsertSemicolon()?n.argument=null:(n.argument=this.parseExpression(),this.semicolon()),this.finishNode(n,"ReturnStatement");case b.tokTypes._switch:k=this.curIndent;p=this.curLineStart;this.next();n.discriminant=this.parseParenExpression();n.cases=[];this.pushCx();for(this.expect(b.tokTypes.braceL);!this.closes(b.tokTypes.braceR,k,p,!0);)if(this.tok.type===b.tokTypes._case||
this.tok.type===b.tokTypes._default){var r=this.tok.type===b.tokTypes._case;q&&this.finishNode(q,"SwitchCase");n.cases.push(q=this.startNode());q.consequent=[];this.next();q.test=r?this.parseExpression():null;this.expect(b.tokTypes.colon)}else q||(n.cases.push(q=this.startNode()),q.consequent=[],q.test=null),q.consequent.push(this.parseStatement());q&&this.finishNode(q,"SwitchCase");this.popCx();this.eat(b.tokTypes.braceR);return this.finishNode(n,"SwitchStatement");case b.tokTypes._throw:return this.next(),
n.argument=this.parseExpression(),this.semicolon(),this.finishNode(n,"ThrowStatement");case b.tokTypes._try:return this.next(),n.block=this.parseBlock(),n.handler=null,this.tok.type===b.tokTypes._catch&&(q=this.startNode(),this.next(),this.eat(b.tokTypes.parenL)?(q.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(b.tokTypes.parenR)):q.param=null,q.body=this.parseBlock(),n.handler=this.finishNode(q,"CatchClause")),n.finalizer=this.eat(b.tokTypes._finally)?this.parseBlock():null,n.handler||
n.finalizer?this.finishNode(n,"TryStatement"):n.block;case b.tokTypes._var:case b.tokTypes._const:return this.parseVar(n,!1,p||this.tok.value);case b.tokTypes._while:return this.next(),n.test=this.parseParenExpression(),n.body=this.parseStatement(),this.finishNode(n,"WhileStatement");case b.tokTypes._with:return this.next(),n.object=this.parseParenExpression(),n.body=this.parseStatement(),this.finishNode(n,"WithStatement");case b.tokTypes.braceL:return this.parseBlock();case b.tokTypes.semi:return this.next(),
this.finishNode(n,"EmptyStatement");case b.tokTypes._class:return this.parseClass(!0);case b.tokTypes._import:return 10<this.options.ecmaVersion&&(q=this.lookAhead(1).type,q===b.tokTypes.parenL||q===b.tokTypes.dot)?(n.expression=this.parseExpression(),this.semicolon(),this.finishNode(n,"ExpressionStatement")):this.parseImport();case b.tokTypes._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),this.next(),this.parseFunction(n,!0,!0);q=this.parseExpression();
if(c(q))return this.next(),this.tok.type===b.tokTypes.eof?this.finishNode(n,"EmptyStatement"):this.parseStatement();if(k===b.tokTypes.name&&"Identifier"===q.type&&this.eat(b.tokTypes.colon))return n.body=this.parseStatement(),n.label=q,this.finishNode(n,"LabeledStatement");n.expression=q;this.semicolon();return this.finishNode(n,"ExpressionStatement")}};f.parseBlock=function(){var k=this.startNode();this.pushCx();this.expect(b.tokTypes.braceL);var n=this.curIndent,p=this.curLineStart;for(k.body=[];!this.closes(b.tokTypes.braceR,
n,p,!0);)k.body.push(this.parseStatement());this.popCx();this.eat(b.tokTypes.braceR);return this.finishNode(k,"BlockStatement")};f.parseFor=function(k,n){k.init=n;k.test=k.update=null;this.eat(b.tokTypes.semi)&&this.tok.type!==b.tokTypes.semi&&(k.test=this.parseExpression());this.eat(b.tokTypes.semi)&&this.tok.type!==b.tokTypes.parenR&&(k.update=this.parseExpression());this.popCx();this.expect(b.tokTypes.parenR);k.body=this.parseStatement();return this.finishNode(k,"ForStatement")};f.parseForIn=function(k,
n){var p=this.tok.type===b.tokTypes._in?"ForInStatement":"ForOfStatement";this.next();k.left=n;k.right=this.parseExpression();this.popCx();this.expect(b.tokTypes.parenR);k.body=this.parseStatement();return this.finishNode(k,p)};f.parseVar=function(k,n,p){k.kind=p;this.next();k.declarations=[];do p=this.startNode(),p.id=6<=this.options.ecmaVersion?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),p.init=this.eat(b.tokTypes.eq)?this.parseMaybeAssign(n):null,k.declarations.push(this.finishNode(p,
"VariableDeclarator"));while(this.eat(b.tokTypes.comma));k.declarations.length||(p=this.startNode(),p.id=this.dummyIdent(),k.declarations.push(this.finishNode(p,"VariableDeclarator")));n||this.semicolon();return this.finishNode(k,"VariableDeclaration")};f.parseClass=function(k){var n=this.startNode();this.next();n.id=this.tok.type===b.tokTypes.name?this.parseIdent():!0===k?this.dummyIdent():null;n.superClass=this.eat(b.tokTypes._extends)?this.parseExpression():null;n.body=this.startNode();n.body.body=
[];this.pushCx();var p=this.curIndent+1,q=this.curLineStart;this.eat(b.tokTypes.braceL);this.curIndent+1<p&&(p=this.curIndent,q=this.curLineStart);for(;!this.closes(b.tokTypes.braceR,p,q);){var r=this.parseClassElement();r&&n.body.body.push(r)}this.popCx();this.eat(b.tokTypes.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));this.semicolon();this.finishNode(n.body,"ClassBody");return this.finishNode(n,k?"ClassDeclaration":"ClassExpression")};f.parseClassElement=
function(){if(this.eat(b.tokTypes.semi))return null;var k=this.options,n=k.ecmaVersion,p=k.locations,q=this.curIndent,r=this.curLineStart;k=this.startNode();var u="",x=!1,y=!1,D="method",H=!1;if(this.eatContextual("static")){if(13<=n&&this.eat(b.tokTypes.braceL))return this.parseClassStaticBlock(k),k;this.isClassElementNameStart()||this.toks.type===b.tokTypes.star?H=!0:u="static"}k["static"]=H;!u&&8<=n&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.toks.type!==b.tokTypes.star||
this.canInsertSemicolon()?u="async":y=!0);!u&&(x=this.eat(b.tokTypes.star),H=this.toks.value,this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?D=H:u=H);if(u)k.computed=!1,k.key=this.startNodeAt(p?[this.toks.lastTokStart,this.toks.lastTokStartLoc]:this.toks.lastTokStart),k.key.name=u,this.finishNode(k.key,"Identifier");else if(this.parseClassElementName(k),c(k.key))return c(this.parseMaybeAssign())&&this.next(),this.eat(b.tokTypes.comma),null;13>n||this.toks.type===
b.tokTypes.parenL||"method"!==D||x||y?(k.kind=k.computed||k["static"]||x||y||"method"!==D||!("Identifier"===k.key.type&&"constructor"===k.key.name||"Literal"===k.key.type&&"constructor"===k.key.value)?D:"constructor",k.value=this.parseMethod(x,y),this.finishNode(k,"MethodDefinition")):(this.eat(b.tokTypes.eq)?this.curLineStart!==r&&this.curIndent<=q&&this.tokenStartsLine()?k.value=null:(n=this.inAsync,p=this.inGenerator,this.inGenerator=this.inAsync=!1,k.value=this.parseMaybeAssign(),this.inAsync=
n,this.inGenerator=p):k.value=null,this.semicolon(),this.finishNode(k,"PropertyDefinition"));return k};f.parseClassStaticBlock=function(k){var n=this.curIndent,p=this.curLineStart;k.body=[];for(this.pushCx();!this.closes(b.tokTypes.braceR,n,p,!0);)k.body.push(this.parseStatement());this.popCx();this.eat(b.tokTypes.braceR);return this.finishNode(k,"StaticBlock")};f.isClassElementNameStart=function(){return this.toks.isClassElementNameStart()};f.parseClassElementName=function(k){this.toks.type===b.tokTypes.privateId?
(k.computed=!1,k.key=this.parsePrivateIdent()):this.parsePropertyName(k)};f.parseFunction=function(k,n,p){var q=this.inAsync,r=this.inGenerator,u=this.inFunction;this.initFunction(k);6<=this.options.ecmaVersion&&(k.generator=this.eat(b.tokTypes.star));8<=this.options.ecmaVersion&&(k.async=!!p);this.tok.type===b.tokTypes.name?k.id=this.parseIdent():!0===n&&(k.id=this.dummyIdent());this.inAsync=k.async;this.inGenerator=k.generator;this.inFunction=!0;k.params=this.parseFunctionParams();k.body=this.parseBlock();
this.toks.adaptDirectivePrologue(k.body.body);this.inAsync=q;this.inGenerator=r;this.inFunction=u;return this.finishNode(k,n?"FunctionDeclaration":"FunctionExpression")};f.parseExport=function(){var k=this.startNode();this.next();if(this.eat(b.tokTypes.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?k.exported=this.parseExprAtom():k.exported=null),k.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.semicolon(),this.finishNode(k,"ExportAllDeclaration");
if(this.eat(b.tokTypes._default)){var n;if(this.tok.type===b.tokTypes._function||(n=this.toks.isAsyncFunction())){var p=this.startNode();this.next();n&&this.next();k.declaration=this.parseFunction(p,"nullableID",n)}else this.tok.type===b.tokTypes._class?k.declaration=this.parseClass("nullableID"):(k.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(k,"ExportDefaultDeclaration")}this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(k.declaration=this.parseStatement(),
k.specifiers=[],k.source=null):(k.declaration=null,k.specifiers=this.parseExportSpecifierList(),k.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon());return this.finishNode(k,"ExportNamedDeclaration")};f.parseImport=function(){var k=this.startNode();this.next();if(this.tok.type===b.tokTypes.string)k.specifiers=[],k.source=this.parseExprAtom();else{if(this.tok.type===b.tokTypes.name&&"from"!==this.tok.value){var n=this.startNode();n.local=this.parseIdent();this.finishNode(n,
"ImportDefaultSpecifier");this.eat(b.tokTypes.comma)}k.specifiers=this.parseImportSpecifiers();k.source=this.eatContextual("from")&&this.tok.type===b.tokTypes.string?this.parseExprAtom():this.dummyString();n&&k.specifiers.unshift(n)}this.semicolon();return this.finishNode(k,"ImportDeclaration")};f.parseImportSpecifiers=function(){var k=[];if(this.tok.type===b.tokTypes.star){var n=this.startNode();this.next();n.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent();k.push(this.finishNode(n,
"ImportNamespaceSpecifier"))}else{n=this.curIndent;var p=this.curLineStart,q=this.nextLineStart;this.pushCx();this.eat(b.tokTypes.braceL);this.curLineStart>q&&(q=this.curLineStart);for(;!this.closes(b.tokTypes.braceR,n+(this.curLineStart<=q?1:0),p);){var r=this.startNode();if(this.eat(b.tokTypes.star))r.local=this.eatContextual("as")?this.parseModuleExportName():this.dummyIdent(),this.finishNode(r,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;r.imported=this.parseModuleExportName();
if(c(r.imported))break;r.local=this.eatContextual("as")?this.parseModuleExportName():r.imported;this.finishNode(r,"ImportSpecifier")}k.push(r);this.eat(b.tokTypes.comma)}this.eat(b.tokTypes.braceR);this.popCx()}return k};f.parseExportSpecifierList=function(){var k=[],n=this.curIndent,p=this.curLineStart,q=this.nextLineStart;this.pushCx();this.eat(b.tokTypes.braceL);this.curLineStart>q&&(q=this.curLineStart);for(;!this.closes(b.tokTypes.braceR,n+(this.curLineStart<=q?1:0),p)&&!this.isContextual("from");){var r=
this.startNode();r.local=this.parseModuleExportName();if(c(r.local))break;r.exported=this.eatContextual("as")?this.parseModuleExportName():r.local;this.finishNode(r,"ExportSpecifier");k.push(r);this.eat(b.tokTypes.comma)}this.eat(b.tokTypes.braceR);this.popCx();return k};f.parseModuleExportName=function(){return 13<=this.options.ecmaVersion&&this.tok.type===b.tokTypes.string?this.parseExprAtom():this.parseIdent()};f=d.prototype;f.checkLVal=function(k){if(!k)return k;switch(k.type){case "Identifier":case "MemberExpression":return k;
case "ParenthesizedExpression":return k.expression=this.checkLVal(k.expression),k;default:return this.dummyIdent()}};f.parseExpression=function(k){var n=this.storeCurrentPos(),p=this.parseMaybeAssign(k);if(this.tok.type===b.tokTypes.comma){n=this.startNodeAt(n);for(n.expressions=[p];this.eat(b.tokTypes.comma);)n.expressions.push(this.parseMaybeAssign(k));return this.finishNode(n,"SequenceExpression")}return p};f.parseParenExpression=function(){this.pushCx();this.expect(b.tokTypes.parenL);var k=this.parseExpression();
this.popCx();this.expect(b.tokTypes.parenR);return k};f.parseMaybeAssign=function(k){if(this.inGenerator&&this.toks.isContextual("yield"))return k=this.startNode(),this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==b.tokTypes.star&&!this.tok.type.startsExpr?(k.delegate=!1,k.argument=null):(k.delegate=this.eat(b.tokTypes.star),k.argument=this.parseMaybeAssign()),this.finishNode(k,"YieldExpression");var n=this.storeCurrentPos(),p=this.parseMaybeConditional(k);return this.tok.type.isAssign?
(n=this.startNodeAt(n),n.operator=this.tok.value,n.left=this.tok.type===b.tokTypes.eq?this.toAssignable(p):this.checkLVal(p),this.next(),n.right=this.parseMaybeAssign(k),this.finishNode(n,"AssignmentExpression")):p};f.parseMaybeConditional=function(k){var n=this.storeCurrentPos(),p=this.parseExprOps(k);return this.eat(b.tokTypes.question)?(n=this.startNodeAt(n),n.test=p,n.consequent=this.parseMaybeAssign(),n.alternate=this.expect(b.tokTypes.colon)?this.parseMaybeAssign(k):this.dummyIdent(),this.finishNode(n,
"ConditionalExpression")):p};f.parseExprOps=function(k){var n=this.storeCurrentPos(),p=this.curIndent,q=this.curLineStart;return this.parseExprOp(this.parseMaybeUnary(!1),n,-1,k,p,q)};f.parseExprOp=function(k,n,p,q,r,u){if(this.curLineStart!==u&&this.curIndent<r&&this.tokenStartsLine())return k;var x=this.tok.type.binop;if(null!=x&&(!q||this.tok.type!==b.tokTypes._in)&&x>p){var y=this.startNodeAt(n);y.left=k;y.operator=this.tok.value;this.next();this.curLineStart!==u&&this.curIndent<r&&this.tokenStartsLine()?
y.right=this.dummyIdent():(k=this.storeCurrentPos(),y.right=this.parseExprOp(this.parseMaybeUnary(!1),k,x,q,r,u));this.finishNode(y,/&&|\|\||\?\?/.test(y.operator)?"LogicalExpression":"BinaryExpression");return this.parseExprOp(y,n,p,q,r,u)}return k};f.parseMaybeUnary=function(k){var n=this.storeCurrentPos();if(8<=this.options.ecmaVersion&&this.toks.isContextual("await")&&(this.inAsync||this.toks.inModule&&13<=this.options.ecmaVersion||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var p=
this.parseAwait();k=!0}else if(this.tok.type.prefix){p=this.startNode();var q=this.tok.type===b.tokTypes.incDec;q||(k=!0);p.operator=this.tok.value;p.prefix=!0;this.next();p.argument=this.parseMaybeUnary(!0);q&&(p.argument=this.checkLVal(p.argument));p=this.finishNode(p,q?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===b.tokTypes.ellipsis)p=this.startNode(),this.next(),p.argument=this.parseMaybeUnary(k),p=this.finishNode(p,"SpreadElement");else if(k||this.tok.type!==b.tokTypes.privateId)for(p=
this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();)q=this.startNodeAt(n),q.operator=this.tok.value,q.prefix=!1,q.argument=this.checkLVal(p),this.next(),p=this.finishNode(q,"UpdateExpression");else p=this.parsePrivateIdent();return!k&&this.eat(b.tokTypes.starstar)?(k=this.startNodeAt(n),k.operator="**",k.left=p,k.right=this.parseMaybeUnary(!1),this.finishNode(k,"BinaryExpression")):p};f.parseExprSubscripts=function(){var k=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),
k,!1,this.curIndent,this.curLineStart)};f.parseSubscripts=function(k,n,p,q,r){for(var u=11<=this.options.ecmaVersion,x=!1;;){if(this.curLineStart!==r&&this.curIndent<=q&&this.tokenStartsLine())if(this.tok.type===b.tokTypes.dot&&this.curIndent===q)--q;else break;var y="Identifier"===k.type&&"async"===k.name&&!this.canInsertSemicolon(),D=u&&this.eat(b.tokTypes.questionDot);D&&(x=!0);if(D&&this.tok.type!==b.tokTypes.parenL&&this.tok.type!==b.tokTypes.bracketL&&this.tok.type!==b.tokTypes.backQuote||this.eat(b.tokTypes.dot)){var H=
this.startNodeAt(n);H.object=k;this.curLineStart!==r&&this.curIndent<=q&&this.tokenStartsLine()?H.property=this.dummyIdent():H.property=this.parsePropertyAccessor()||this.dummyIdent();H.computed=!1;u&&(H.optional=D);k=this.finishNode(H,"MemberExpression")}else if(this.tok.type===b.tokTypes.bracketL)this.pushCx(),this.next(),H=this.startNodeAt(n),H.object=k,H.property=this.parseExpression(),H.computed=!0,u&&(H.optional=D),this.popCx(),this.expect(b.tokTypes.bracketR),k=this.finishNode(H,"MemberExpression");
else if(p||this.tok.type!==b.tokTypes.parenL)if(this.tok.type===b.tokTypes.backQuote)D=this.startNodeAt(n),D.tag=k,D.quasi=this.parseTemplate(),k=this.finishNode(D,"TaggedTemplateExpression");else break;else{H=this.parseExprList(b.tokTypes.parenR);if(y&&this.eat(b.tokTypes.arrow))return this.parseArrowExpression(this.startNodeAt(n),H,!0);y=this.startNodeAt(n);y.callee=k;y.arguments=H;u&&(y.optional=D);k=this.finishNode(y,"CallExpression")}}x&&(n=this.startNodeAt(n),n.expression=k,k=this.finishNode(n,
"ChainExpression"));return k};f.parseExprAtom=function(){switch(this.tok.type){case b.tokTypes._this:case b.tokTypes._super:var k=this.tok.type===b.tokTypes._this?"ThisExpression":"Super";var n=this.startNode();this.next();return this.finishNode(n,k);case b.tokTypes.name:n=this.storeCurrentPos();k=this.parseIdent();var p=!1;if("async"===k.name&&!this.canInsertSemicolon()){if(this.eat(b.tokTypes._function))return this.toks.overrideContext(b.tokContexts.f_expr),this.parseFunction(this.startNodeAt(n),
!1,!0);this.tok.type===b.tokTypes.name&&(k=this.parseIdent(),p=!0)}return this.eat(b.tokTypes.arrow)?this.parseArrowExpression(this.startNodeAt(n),[k],p):k;case b.tokTypes.regexp:return n=this.startNode(),k=this.tok.value,n.regex={pattern:k.pattern,flags:k.flags},n.value=k.value,n.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(n,"Literal");case b.tokTypes.num:case b.tokTypes.string:return n=this.startNode(),n.value=this.tok.value,n.raw=this.input.slice(this.tok.start,
this.tok.end),this.tok.type===b.tokTypes.num&&110===n.raw.charCodeAt(n.raw.length-1)&&(n.bigint=n.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(n,"Literal");case b.tokTypes._null:case b.tokTypes._true:case b.tokTypes._false:return n=this.startNode(),n.value=this.tok.type===b.tokTypes._null?null:this.tok.type===b.tokTypes._true,n.raw=this.tok.type.keyword,this.next(),this.finishNode(n,"Literal");case b.tokTypes.parenL:n=this.storeCurrentPos();this.next();k=this.parseExpression();this.expect(b.tokTypes.parenR);
if(this.eat(b.tokTypes.arrow))return k=k.expressions||[k],k.length&&c(k[k.length-1])&&k.pop(),this.parseArrowExpression(this.startNodeAt(n),k);this.options.preserveParens&&(n=this.startNodeAt(n),n.expression=k,k=this.finishNode(n,"ParenthesizedExpression"));return k;case b.tokTypes.bracketL:return n=this.startNode(),n.elements=this.parseExprList(b.tokTypes.bracketR,!0),this.finishNode(n,"ArrayExpression");case b.tokTypes.braceL:return this.toks.overrideContext(b.tokContexts.b_expr),this.parseObj();
case b.tokTypes._class:return this.parseClass(!1);case b.tokTypes._function:return n=this.startNode(),this.next(),this.parseFunction(n,!1);case b.tokTypes._new:return this.parseNew();case b.tokTypes.backQuote:return this.parseTemplate();case b.tokTypes._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.dummyIdent();default:return this.dummyIdent()}};f.parseExprImport=function(){var k=this.startNode(),n=this.parseIdent(!0);switch(this.tok.type){case b.tokTypes.parenL:return this.parseDynamicImport(k);
case b.tokTypes.dot:return k.meta=n,this.parseImportMeta(k);default:return k.name="import",this.finishNode(k,"Identifier")}};f.parseDynamicImport=function(k){k.source=this.parseExprList(b.tokTypes.parenR)[0]||this.dummyString();return this.finishNode(k,"ImportExpression")};f.parseImportMeta=function(k){this.next();k.property=this.parseIdent(!0);return this.finishNode(k,"MetaProperty")};f.parseNew=function(){var k=this.startNode(),n=this.curIndent,p=this.curLineStart,q=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&
this.eat(b.tokTypes.dot))return k.meta=q,k.property=this.parseIdent(!0),this.finishNode(k,"MetaProperty");q=this.storeCurrentPos();k.callee=this.parseSubscripts(this.parseExprAtom(),q,!0,n,p);k.arguments=this.tok.type===b.tokTypes.parenL?this.parseExprList(b.tokTypes.parenR):[];return this.finishNode(k,"NewExpression")};f.parseTemplateElement=function(){var k=this.startNode();k.value=this.tok.type===b.tokTypes.invalidTemplate?{raw:this.tok.value,cooked:null}:{raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,
"\n"),cooked:this.tok.value};this.next();k.tail=this.tok.type===b.tokTypes.backQuote;return this.finishNode(k,"TemplateElement")};f.parseTemplate=function(){var k=this.startNode();this.next();k.expressions=[];var n=this.parseTemplateElement();for(k.quasis=[n];!n.tail;)this.next(),k.expressions.push(this.parseExpression()),this.expect(b.tokTypes.braceR)?n=this.parseTemplateElement():(n=this.startNode(),n.value={cooked:"",raw:""},n.tail=!0,this.finishNode(n,"TemplateElement")),k.quasis.push(n);this.expect(b.tokTypes.backQuote);
return this.finishNode(k,"TemplateLiteral")};f.parseObj=function(){var k=this.startNode();k.properties=[];this.pushCx();var n=this.curIndent+1,p=this.curLineStart;this.eat(b.tokTypes.braceL);this.curIndent+1<n&&(n=this.curIndent,p=this.curLineStart);for(;!this.closes(b.tokTypes.braceR,n,p);){var q=this.startNode(),r=void 0,u=void 0;if(9<=this.options.ecmaVersion&&this.eat(b.tokTypes.ellipsis))q.argument=this.parseMaybeAssign(),k.properties.push(this.finishNode(q,"SpreadElement"));else{6<=this.options.ecmaVersion&&
(u=this.storeCurrentPos(),q.method=!1,q.shorthand=!1,r=this.eat(b.tokTypes.star));this.parsePropertyName(q);if(this.toks.isAsyncProp(q)){var x=!0;r=9<=this.options.ecmaVersion&&this.eat(b.tokTypes.star);this.parsePropertyName(q)}else x=!1;c(q.key)?c(this.parseMaybeAssign())&&this.next():(this.eat(b.tokTypes.colon)?(q.kind="init",q.value=this.parseMaybeAssign()):6<=this.options.ecmaVersion&&(this.tok.type===b.tokTypes.parenL||this.tok.type===b.tokTypes.braceL)?(q.kind="init",q.method=!0,q.value=this.parseMethod(r,
x)):5<=this.options.ecmaVersion&&"Identifier"===q.key.type&&!q.computed&&("get"===q.key.name||"set"===q.key.name)&&this.tok.type!==b.tokTypes.comma&&this.tok.type!==b.tokTypes.braceR&&this.tok.type!==b.tokTypes.eq?(q.kind=q.key.name,this.parsePropertyName(q),q.value=this.parseMethod(!1)):(q.kind="init",6<=this.options.ecmaVersion?this.eat(b.tokTypes.eq)?(r=this.startNodeAt(u),r.operator="=",r.left=q.key,r.right=this.parseMaybeAssign(),q.value=this.finishNode(r,"AssignmentExpression")):q.value=q.key:
q.value=this.dummyIdent(),q.shorthand=!0),k.properties.push(this.finishNode(q,"Property")))}this.eat(b.tokTypes.comma)}this.popCx();this.eat(b.tokTypes.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return this.finishNode(k,"ObjectExpression")};f.parsePropertyName=function(k){if(6<=this.options.ecmaVersion){if(this.eat(b.tokTypes.bracketL)){k.computed=!0;k.key=this.parseExpression();this.expect(b.tokTypes.bracketR);return}k.computed=!1}var n=
this.tok.type===b.tokTypes.num||this.tok.type===b.tokTypes.string?this.parseExprAtom():this.parseIdent();k.key=n||this.dummyIdent()};f.parsePropertyAccessor=function(){if(this.tok.type===b.tokTypes.name||this.tok.type.keyword)return this.parseIdent();if(this.tok.type===b.tokTypes.privateId)return this.parsePrivateIdent()};f.parseIdent=function(){var k=this.tok.type===b.tokTypes.name?this.tok.value:this.tok.type.keyword;if(!k)return this.dummyIdent();var n=this.startNode();this.next();n.name=k;return this.finishNode(n,
"Identifier")};f.parsePrivateIdent=function(){var k=this.startNode();k.name=this.tok.value;this.next();return this.finishNode(k,"PrivateIdentifier")};f.initFunction=function(k){k.id=null;k.params=[];6<=this.options.ecmaVersion&&(k.generator=!1,k.expression=!1);8<=this.options.ecmaVersion&&(k.async=!1)};f.toAssignable=function(k,n){if(k&&"Identifier"!==k.type&&("MemberExpression"!==k.type||n))if("ParenthesizedExpression"===k.type)this.toAssignable(k.expression,n);else{if(6>this.options.ecmaVersion)return this.dummyIdent();
if("ObjectExpression"===k.type){k.type="ObjectPattern";for(var p=0,q=k.properties;p<q.length;p+=1)this.toAssignable(q[p],n)}else if("ArrayExpression"===k.type)k.type="ArrayPattern",this.toAssignableList(k.elements,n);else if("Property"===k.type)this.toAssignable(k.value,n);else if("SpreadElement"===k.type)k.type="RestElement",this.toAssignable(k.argument,n);else if("AssignmentExpression"===k.type)k.type="AssignmentPattern",delete k.operator;else return this.dummyIdent()}return k};f.toAssignableList=
function(k,n){for(var p=0;p<k.length;p+=1)this.toAssignable(k[p],n);return k};f.parseFunctionParams=function(k){k=this.parseExprList(b.tokTypes.parenR);return this.toAssignableList(k,!0)};f.parseMethod=function(k,n){var p=this.startNode(),q=this.inAsync,r=this.inGenerator,u=this.inFunction;this.initFunction(p);6<=this.options.ecmaVersion&&(p.generator=!!k);8<=this.options.ecmaVersion&&(p.async=!!n);this.inAsync=p.async;this.inGenerator=p.generator;this.inFunction=!0;p.params=this.parseFunctionParams();
p.body=this.parseBlock();this.toks.adaptDirectivePrologue(p.body.body);this.inAsync=q;this.inGenerator=r;this.inFunction=u;return this.finishNode(p,"FunctionExpression")};f.parseArrowExpression=function(k,n,p){var q=this.inAsync,r=this.inGenerator,u=this.inFunction;this.initFunction(k);8<=this.options.ecmaVersion&&(k.async=!!p);this.inAsync=k.async;this.inGenerator=!1;this.inFunction=!0;k.params=this.toAssignableList(n,!0);k.expression=this.tok.type!==b.tokTypes.braceL;k.expression?k.body=this.parseMaybeAssign():
(k.body=this.parseBlock(),this.toks.adaptDirectivePrologue(k.body.body));this.inAsync=q;this.inGenerator=r;this.inFunction=u;return this.finishNode(k,"ArrowFunctionExpression")};f.parseExprList=function(k,n){this.pushCx();var p=this.curIndent,q=this.curLineStart,r=[];for(this.next();!this.closes(k,p+1,q);)if(this.eat(b.tokTypes.comma))r.push(n?null:this.dummyIdent());else{var u=this.parseMaybeAssign();if(c(u)){if(this.closes(k,p,q))break;this.next()}else r.push(u);this.eat(b.tokTypes.comma)}this.popCx();
this.eat(k)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return r};f.parseAwait=function(){var k=this.startNode();this.next();k.argument=this.parseMaybeUnary();return this.finishNode(k,"AwaitExpression")};b.defaultOptions.tabSize=4;l.LooseParser=d;l.isDummy=c;l.parse=function(k,n){return d.parse(k,n)};Object.defineProperty(l,"__esModule",{value:!0})})})(dp.acornLooseModule,dp.acornLoose);var Y0=gt.exports;dp.__moduleExports=gt.exports;dp.acornLoose=
gt.exports;dp["default"]=gt.exports;var qG=Object.freeze(Rc({__proto__:null,"default":Y0},[gt.exports])),Cg=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/acorn-extension.js");Cg.forEachNode=function(e,h,l,b){b=b||{};var c=b.traversal||"preorder",g=Cg.obj.clone(b.visitors?b.visitors:Cg.walk.make(Cg.custom.visitors.withMemberExpression)),a="preorder"===c?function(d,f,k,n,p){h(k,l,n,f);return d(k,n+1,p)}:function(d,f,k,n,p){d=d(k,n+1,p);h(k,l,n,f);return d};Object.keys(g).forEach(function(d){var f=
g[d];g[d]=function(k,n,p){return a(f,d,k,n,p)}});Cg.walk.recursive(e,0,null,g);return e};Cg.matchNodes=function(e,h,l,b){return Cg.forEachNode(e,function(c,g,a,d){if(h[c.type])h[c.type](c,g,a,d)},l,b)};Cg.findNodesIncluding=Zq;Cg.withParentInfo=function(e,h,l){function b(f){var k={id:Cg.string.newUUID(),parentScope:f,containingScopes:[]};f&&f.containingScopes.push(k);return k}l=l||{};var c=Cg.walk.make({Function:function(f,k,n){k&&k.scope&&(k.scope=b(k.scope));n(f.body,k,"ScopeBody")},VariableDeclarator:function(f,
k,n){f.init&&n(f.init,k,"Expression")},VariableDeclaration:function(f,k,n){for(var p=0;p<f.declarations.length;++p){var q=f.declarations[p];q&&n(q,k,"VariableDeclarator")}},ObjectExpression:function(f,k,n){for(var p=0;p<f.properties.length;++p){var q=f.properties[p];n(q.key,k,"Expression");n(q.value,k,"Expression")}},MemberExpression:function(f,k,n){n(f.object,k,"Expression");n(f.property,k,"Expression")}},Cg.walk.base),g,a=[];Cg.forEachNode(e,function(f){Cg.arr.withoutAll(Object.keys(f),["end","start",
"type","source","raw"]).forEach(function(k){if(!f.__lookupGetter__(k)){var n=f[k];f.__defineGetter__(k,function(){g=k;return n});a.push([f,k,f[k]])}})},null,{visitors:c});var d=[];Object.keys(c).forEach(function(f){var k=c[f];c[f]=function(n,p,q){return f===n.type||l.visitAllNodes?(d.push(h.call(null,n,{scope:p.scope,depth:p.depth,parent:p.parent,type:f,propertyInParent:g})),k(n,{scope:p.scope,parent:n,depth:p.depth+1},q)):k(n,p,q)}});Cg.walk.recursive(e,{scope:b(),parent:null,propertyInParent:"",
depth:0},null,c);a.forEach(function(f){delete f[0][f[1]];f[0][f[1]]=f[2]});return d};Cg.copy=Tk;Cg.findSiblings=rq;Cg.findNodeByAstIndex=$r;Cg.findStatementOfNode=go;Cg.addAstIndex=$q;Cg.obj=bj;Cg.arr=aj;Cg.string=Xj;Cg.Path=qj;Cg.withMozillaAstDo=zx;Cg._Decorators=S0;Cg._ClassFields=T0;Cg._StaticClassFeatures=U0;Cg._PrivateMethods=V0;Cg.acornDefault=W0;Cg.walk=Ir;Cg.loose=qG;Cg.isNode="undefined"!==typeof System?System.get("@system-env").node:!1;Cg.Decorators=Cg.Decorators||void 0;Cg.ClassFields=
Cg.ClassFields||void 0;Cg.StaticClassFeatures=Cg.StaticClassFeatures||void 0;Cg.PrivateMethods=Cg.PrivateMethods||void 0;Cg.isNode?(Cg.Decorators=Cg._ClassFields?Cg._Decorators:System._nodeRequire("lively.ast/lib/acorn-decorators.cjs"),Cg.ClassFields=Cg._ClassFields||System._nodeRequire("acorn-class-fields"),Cg.StaticClassFeatures=Cg._StaticClassFeatures||System._nodeRequire("acorn-static-class-features"),Cg.PrivateMethods=Cg._PrivateMethods||System._nodeRequire("acorn-private-methods")):(Cg.Decorators=
Cg._Decorators,Cg.ClassFields=Cg._ClassFields,Cg.StaticClassFeatures=Cg._StaticClassFeatures,Cg.PrivateMethods=Cg._PrivateMethods);Cg.custom={};Cg.custom.forEachNode=Cg.forEachNode;Cg.custom.matchNodes=Cg.matchNodes;Cg.custom.findNodesIncluding=Cg.findNodesIncluding;Cg.custom.withParentInfo=Cg.withParentInfo;Cg.custom.copy=Cg.copy;Cg.custom.findSiblings=Cg.findSiblings;Cg.custom.findNodeByAstIndex=Cg.findNodeByAstIndex;Cg.custom.findStatementOfNode=Cg.findStatementOfNode;Cg.custom.addAstIndex=Cg.addAstIndex;
Cg.Parser=Cg.acornDefault.Parser.extend(Cg.ClassFields,Cg.StaticClassFeatures,Cg.PrivateMethods,Cg.Decorators);Cg.acorn={};Object.assign(Cg.acorn,Cg.acornDefault);Cg.acorn.Parser=Cg.Parser;Cg.acorn.parse=function(e,h){return Cg.Parser.parse(e,h)};var Ax=bd("b_",Cg.acorn),mv=bd("b$",Cg.custom);Cg.walk=Ir;Cg.loose=qG;Cg.acorn=Ax;Cg.custom=mv;Cg.findStatementOfNode=go;Cg.addAstIndex=$q;Cg.findNodesIncluding=Zq;Cg.findSiblings=rq;Cg.findNodeByAstIndex=$r;Cg.copy=Tk;Cg.custom.visitors={stopAtFunctions:Cg.walk.make(Object.assign({Function:function(){}},
Cg.walk.base)),withMemberExpression:Cg.walk.make({MemberExpression:function(e,h,l){l(e.object,h,"Expression");l(e.property,h,"Expression")}},Cg.walk.base)};var nv={exports:{}},im=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/astq/2.7.5/lib/astq.browser.js");im.commonjsHelpers=Wl;im.createCommonjsRequire=It;im.astq_browserModule=nv;im.astq_browser=nv.exports;(function(e,h){e.exports=function(){return function(){function l(b,c,g){function a(k,n){if(!c[k]){if(!b[k]){var p="function"==
typeof im.createCommonjsRequire("/lively.next-node_modules/astq/2.7.5/lib")&&im.createCommonjsRequire("/lively.next-node_modules/astq/2.7.5/lib");if(!n&&p)return p(k,!0);if(d)return d(k,!0);n=Error("Cannot find module '"+k+"'");throw n.code="MODULE_NOT_FOUND",n;}n=c[k]={exports:{}};b[k][0].call(n.exports,function(q){return a(b[k][1][q]||q)},n,n.exports,l,b,c,g)}return c[k].exports}for(var d="function"==typeof im.createCommonjsRequire("/lively.next-node_modules/astq/2.7.5/lib")&&im.createCommonjsRequire("/lively.next-node_modules/astq/2.7.5/lib"),
f=0;f<g.length;f++)a(g[f]);return a}return l}()({1:[function(l,b,c){(function(g){(function(){!function(a){"object"==ad(c)&&"undefined"!=typeof b?b.exports=a():("undefined"!=typeof window?window:"undefined"!=typeof g?g:"undefined"!=typeof self?self:this).ASTY=a()}(function(){return function(){return function n(d,f,k){function p(u,x){if(!f[u]){if(!d[u]){var y="function"==typeof l&&l;if(!x&&y)return y(u,!0);if(q)return q(u,!0);x=Error("Cannot find module '"+u+"'");throw x.code="MODULE_NOT_FOUND",x;}x=
f[u]={exports:{}};d[u][0].call(x.exports,function(D){return p(d[u][1][D]||D)},x,x.exports,n,d,f,k)}return f[u].exports}for(var q="function"==typeof l&&l,r=0;r<k.length;r++)p(k[r]);return p}}()({1:[function(a,d,f){function k(p){return(k="function"==typeof Symbol&&"symbol"==ad(Symbol.iterator)?function(q){return ad(q)}:function(q){return q&&"function"==typeof Symbol&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":ad(q)})(p)}function n(p,q){for(var r=0;r<q.length;r++){var u=q[r];u.enumerable=
u.enumerable||!1;u.configurable=!0;"value"in u&&(u.writable=!0);Object.defineProperty(p,u.key,u)}}Object.defineProperty(f,"__esModule",{value:!0});f["default"]=void 0;a=function(){function p(){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");!0}return function(q,r,u){r&&n(q.prototype,r);u&&n(q,u)}(p,[{key:"init",value:function(q,r,u,x){if(2>arguments.length)throw Error("init: invalid number of arguments");if(this.ctx=q,this.ASTy=!0,this.T=r,this.L={L:0,C:0,O:0},this.A=
{},this.C=[],this.P=null,"object"===k(u))for(var y in u)Object.prototype.hasOwnProperty.call(u,y)&&this.set(y,u[y]);return"object"===k(x)&&x instanceof Array&&this.add(x),this}},{key:"create",value:function(q,r,u){return this.ctx.create(q,r,u)}},{key:"type",value:function(q){if(0===arguments.length)return this.T;if(1===arguments.length)return this.T=q,this;throw Error("type: invalid number of arguments");}},{key:"pos",value:function(q,r,u){if(0===arguments.length)return{line:this.L.L,column:this.L.C,
offset:this.L.O};if(3>=arguments.length)return this.L.L=q||0,this.L.C=r||0,this.L.O=u||0,this;throw Error("pos: invalid number of arguments");}},{key:"set",value:function(){for(var q=this,r=arguments.length,u=Array(r),x=0;x<r;x++)u[x]=arguments[x];if(1===u.length&&"object"===k(u[0]))Object.keys(u[0]).forEach(function(y){void 0!==u[0][y]?q.A[y]=u[0][y]:delete q.A[y]});else{if(2!==u.length)throw Error("set: invalid number of arguments");void 0!==u[1]?this.A[u[0]]=u[1]:delete this.A[u[0]]}return this}},
{key:"unset",value:function(){for(var q=this,r=arguments.length,u=Array(r),x=0;x<r;x++)u[x]=arguments[x];if(1===u.length&&"object"===k(u[0])&&u[0]instanceof Array)u[0].forEach(function(y){delete q.A[y]});else{if(1!==u.length)throw Error("unset: invalid number of arguments");delete this.A[u[0]]}return this}},{key:"get",value:function(){for(var q=this,r=arguments.length,u=Array(r),x=0;x<r;x++)u[x]=arguments[x];if(1!==u.length)throw Error("get: invalid number of arguments");if("object"===k(u[0])&&u[0]instanceof
Array)return u[0].map(function(y){if("string"!=typeof y)throw Error("get: invalid key argument");return q.A[y]});r=u[0];if("string"!=typeof r)throw Error("get: invalid key argument");return this.A[r]}},{key:"attrs",value:function(){return Object.keys(this.A)}},{key:"nth",value:function(){if(null===this.P)return 1;var q=this.P.C.indexOf(this);if(0>q)throw Error("nth: internal error -- node not in childs of its parent");return q}},{key:"ins",value:function(q){for(var r=this,u=arguments.length,x=Array(1<
u?u-1:0),y=1;y<u;y++)x[y-1]=arguments[y];if(0===x.length)throw Error("ins: invalid number of arguments");if(0>q&&(q=this.C.length+1-q),!(0<=q&&q<=this.C.length))throw Error("ins: invalid position");var D=function(H){if(!r.ctx.isA(H))throw Error("ins: invalid AST node argument");r.C.splice(q++,0,H);H.P=r};return x.forEach(function(H){"object"===k(H)&&H instanceof Array?H.forEach(function(I){D(I)}):null!==H&&D(H)}),this}},{key:"add",value:function(){for(var q=this,r=arguments.length,u=Array(r),x=0;x<
r;x++)u[x]=arguments[x];if(0===u.length)throw Error("add: invalid number of arguments");var y=function(D){if(!q.ctx.isA(D))throw Error("add: invalid AST node argument");q.C.push(D);D.P=q};return u.forEach(function(D){"object"===k(D)&&D instanceof Array?D.forEach(function(H){y(H)}):null!==D&&y(D)}),this}},{key:"del",value:function(){for(var q=this,r=arguments.length,u=Array(r),x=0;x<r;x++)u[x]=arguments[x];if(0===u.length)throw Error("del: invalid number of arguments");return u.forEach(function(y){if(!q.ctx.isA(y))throw Error("del: invalid AST node argument");
for(var D=!1,H=0;H<q.C.length;H++)if(q.C[H]===y){q.C.splice(H,1);y.P=null;D=!0;break}if(!D)throw Error("del: AST node not found in childs");}),this}},{key:"childs",value:function(){if(2<arguments.length)throw Error("childs: invalid number of arguments");if(2===arguments.length&&"number"==typeof(0>=arguments.length?void 0:arguments[0])&&"number"==typeof(1>=arguments.length?void 0:arguments[1]))return this.C.slice(0>=arguments.length?void 0:arguments[0],1>=arguments.length?void 0:arguments[1]);if(1===
arguments.length&&"number"==typeof(0>=arguments.length?void 0:arguments[0]))return this.C.slice(0>=arguments.length?void 0:arguments[0]);if(0===arguments.length)return this.C;throw Error("childs: invalid type of arguments");}},{key:"child",value:function(q){if("number"!=typeof q)throw Error("child: invalid argument");return q<this.C.length?this.C[q]:null}},{key:"parent",value:function(){return this.P}},{key:"serialize",value:function(){return this.ctx.__serialize(this)}}]),p}();f["default"]=a},{}],
2:[function(a,d,f){function k(x){return(k="function"==typeof Symbol&&"symbol"==ad(Symbol.iterator)?function(y){return ad(y)}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":ad(y)})(x)}function n(x,y){for(var D=0;D<y.length;D++){var H=y[D];H.enumerable=H.enumerable||!1;H.configurable=!0;"value"in H&&(H.writable=!0);Object.defineProperty(x,H.key,H)}}Object.defineProperty(f,"__esModule",{value:!0});f["default"]=void 0;var p=String.fromCharCode(9500),
q=String.fromCharCode(9492),r=String.fromCharCode(9474),u=String.fromCharCode(9472);a=function(){function x(){if(!(this instanceof x))throw new TypeError("Cannot call a class as a function");!0}return function(y,D,H){D&&n(y.prototype,D);H&&n(y,H)}(x,[{key:"dump",value:function(){var y=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1/0,D=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(J,sa){return sa},H=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],I="",N=this;
return this.walk(function(J,sa){if(!(sa>y)){if(0<sa){sa=function(mc){var hc=0,Ua=0;return null!==mc.P&&(hc=mc.P.C.indexOf(mc),Ua=mc.P.C.length-1),{nth:hc,max:Ua}};var ja=sa(J),Ha=ja.nth,Qa=ja.max;ja=" ";ja=H?"".concat(u).concat(u).concat(ja):"".concat("-").concat("-").concat(ja);ja=Ha<Qa?"".concat(H?p:"+").concat(ja):"".concat(H?q:"+").concat(ja);for(Ha=J.P;null!==Ha&&Ha!==N;Ha=Ha.P)null!==Ha.P&&(Qa=sa(Ha),ja=Qa.nth<Qa.max?"".concat(H?r:"|","   ").concat(ja):"    ".concat(ja));I+=D("tree",ja)}I+=
D("type",J.T)+" ";sa=Object.keys(J.A).filter(function(mc){return!mc.match(/^__/)});if(0<sa.length){I+=D("parenthesis","(");var ec=!0;sa.forEach(function(mc){ec?ec=!1:I+=D("comma",",")+" ";I+=D("key",mc)+D("colon",":")+" ";mc=J.A[mc];switch(k(mc)){case "boolean":case "number":I+=D("value",mc.toString());break;case "string":var hc=function(Ua){return Ua.charCodeAt(0).toString(16).toUpperCase()};I+=D("value",'"'+mc.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,
"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(Ua){return"\\x0"+hc(Ua)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(Ua){return"\\x"+hc(Ua)}).replace(/[\u0100-\u0FFF]/g,function(Ua){return"\\u0"+hc(Ua)}).replace(/[\u1000-\uFFFF]/g,function(Ua){return"\\u"+hc(Ua)})+'"');break;case "object":mc instanceof RegExp?I+=D("value","/"+mc.source+"/"):I+=D("value",JSON.stringify(mc));break;default:I+=D("value",JSON.stringify(mc))}});I+=D("parenthesis",")")+" "}I+=D("position",
D("bracket","[")+D("line",J.L.L)+D("slash",",")+D("column",J.L.C)+D("bracket","]"));I+="\n"}},"downward"),I}}]),x}();f["default"]=a},{}],3:[function(a,d,f){function k(n,p){for(var q=0;q<p.length;q++){var r=p[q];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(n,r.key,r)}}Object.defineProperty(f,"__esModule",{value:!0});f["default"]=void 0;a=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");!0}
return function(p,q,r){q&&k(p.prototype,q);r&&k(p,r)}(n,[{key:"merge",value:function(p){var q=this,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(null===p)return this;if(!this.ctx.isA(p))throw Error("merge: invalid AST node argument");r&&(r=p.pos(),this.pos(r.line,r.column,r.offset));p.attrs().forEach(function(x){var y=void 0!==u[x]?u[x]:x;null!==y&&q.set(y,p.get(x))});p.childs().forEach(function(x){p.del(x);q.add(x)});r=p.parent();
return null!==r&&r.del(p),this}}]),n}();f["default"]=a},{}],4:[function(a,d,f){function k(p){return(k="function"==typeof Symbol&&"symbol"==ad(Symbol.iterator)?function(q){return ad(q)}:function(q){return q&&"function"==typeof Symbol&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":ad(q)})(p)}function n(p,q){for(var r=0;r<q.length;r++){var u=q[r];u.enumerable=u.enumerable||!1;u.configurable=!0;"value"in u&&(u.writable=!0);Object.defineProperty(p,u.key,u)}}Object.defineProperty(f,"__esModule",
{value:!0});f["default"]=void 0;a=function(){function p(){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");!0}return function(q,r,u){r&&n(q.prototype,r);u&&n(q,u)}(p,null,[{key:"serialize",value:function(q,r){if(!q.isA(r))throw Error("serialize: not an ASTy node");return JSON.stringify({ASTy:function y(x){var D={T:x.T,L:{L:x.L.L,C:x.L.C,O:x.L.O}},H=Object.keys(x.A);return 0<H.length&&(D.A={},H.forEach(function(I){var N=x.A[I];switch(k(N)){case "boolean":case "number":case "string":D.A[I]=
N;break;default:D.A[I]=JSON.parse(JSON.stringify(N))}})),0<x.C.length&&(D.C=x.C.map(function(I){return y(I)})),D}(r)})}},{key:"unserialize",value:function(q,r){r=JSON.parse(r);if("object"!==k(r)||"object"!==k(r.ASTy))throw Error("unserialize: not an ASTy JSON export");return function y(x){var D=q.create(x.T);return D.pos(x.L.L,x.L.C,x.L.O),"object"===k(x.A)&&Object.keys(x.A).forEach(function(H){var I=x.A[H];switch(k(I)){case "boolean":case "number":case "string":D.set(H,I);break;default:D.set(H,JSON.parse(JSON.stringify(I)))}}),
"object"===k(x.C)&&x.C instanceof Array&&D.add(x.C.map(function(H){return y(H)})),D}(r.ASTy)}}]),p}();f["default"]=a},{}],5:[function(a,d,f){Object.defineProperty(f,"__esModule",{value:!0});f["default"]=void 0;f["default"]={major:1,minor:8,micro:13,date:20210107}},{}],6:[function(a,d,f){function k(n,p){for(var q=0;q<p.length;q++){var r=p[q];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(n,r.key,r)}}Object.defineProperty(f,"__esModule",{value:!0});
f["default"]=void 0;a=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");!0}return function(p,q,r){q&&k(p.prototype,q);r&&k(p,r)}(n,[{key:"walk",value:function(p){var q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"downward";return function D(u,x,y){"downward"!==q&&"both"!==q||p(u,x,y,"downward");u.C.forEach(function(H){D(H,x+1,u)});"upward"!==q&&"both"!==q||p(u,x,y,"upward")}(this,0,null),this}}]),n}();f["default"]=a},{}],7:[function(a,
d,f){function k(I){return I&&I.__esModule?I:{"default":I}}function n(I){return(n="function"==typeof Symbol&&"symbol"==ad(Symbol.iterator)?function(N){return ad(N)}:function(N){return N&&"function"==typeof Symbol&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":ad(N)})(I)}function p(I,N){if(!(I instanceof N))throw new TypeError("Cannot call a class as a function");}function q(I,N){for(var J=0;J<N.length;J++){var sa=N[J];sa.enumerable=sa.enumerable||!1;sa.configurable=!0;"value"in sa&&(sa.writable=
!0);Object.defineProperty(I,sa.key,sa)}}var r=k(a("./asty-base.js")),u=k(a("./asty-merge.js")),x=k(a("./asty-walk.js")),y=k(a("./asty-dump.js")),D=k(a("./asty-serialize.js")),H=k(a("./asty-version.js"));a=function(){function I(){var N=this;return p(this,I),this.ASTYNode=function sa(){p(this,sa)},[[r["default"],"init","create","type","pos","set","unset","get","attrs","nth","ins","add","del","childs","child","parent","serialize"],[u["default"],"merge"],[x["default"],"walk"],[y["default"],"dump"]].forEach(function(sa){var ja=
sa[0].prototype;sa.slice(1).forEach(function(Ha){N.ASTYNode.prototype[Ha]=ja[Ha]})}),this}return function(N,J,sa){J&&q(N.prototype,J);sa&&q(N,sa)}(I,[{key:"version",value:function(){return H["default"]}},{key:"extend",value:function(N){for(var J in N)Object.prototype.hasOwnProperty.call(N,J)&&(this.ASTYNode.prototype[J]=N[J]);return this}},{key:"create",value:function(N,J,sa){return(new this.ASTYNode).init(this,N,J,sa)}},{key:"isA",value:function(N){return"object"===n(N)&&N instanceof this.ASTYNode&&
"boolean"==typeof N.ASTy&&!0===N.ASTy}},{key:"__serialize",value:function(N){return I.serialize(N)}}],[{key:"serialize",value:function(N){return D["default"].serialize(N.ctx,N)}},{key:"unserialize",value:function(N){return D["default"].unserialize(new this,N)}}]),I}();d.exports=a},{"./asty-base.js":1,"./asty-dump.js":2,"./asty-merge.js":3,"./asty-serialize.js":4,"./asty-version.js":5,"./asty-walk.js":6}]},{},[1,2,3,4,5,6,7])(7)})}).call(this)}).call(this,"undefined"!==typeof im.commonjsHelpers.commonjsGlobal?
im.commonjsHelpers.commonjsGlobal:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(l,b,c){(function(g){(function(){!function(a){"object"==ad(c)&&"undefined"!=typeof b?b.exports=a():("undefined"!=typeof window?window:"undefined"!=typeof g?g:"undefined"!=typeof self?self:this).CacheLRU=a()}(function(){return function(){return function n(d,f,k){function p(u,x){if(!f[u]){if(!d[u]){var y="function"==typeof l&&l;if(!x&&y)return y(u,!0);if(q)return q(u,!0);x=Error("Cannot find module '"+
u+"'");throw x.code="MODULE_NOT_FOUND",x;}x=f[u]={exports:{}};d[u][0].call(x.exports,function(D){return p(d[u][1][D]||D)},x,x.exports,n,d,f,k)}return f[u].exports}for(var q="function"==typeof l&&l,r=0;r<k.length;r++)p(k[r]);return p}}()({1:[function(a,d,f){function k(n,p){for(var q=0;q<p.length;q++){var r=p[q];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(n,r.key,r)}}a=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");
return this._index={},this._LRU={newer:null},this._MRU={older:null},this._LRU.newer=this._MRU,this._MRU.older=this._LRU,this._cur=0,this._max=1/0,this._dispose=function(){},this}return function(p,q,r){q&&k(p.prototype,q);r&&k(p,r)}(n,[{key:"limit",value:function(p){var q=this._max;return 0<arguments.length&&(this._max=p,this._purge()),q}},{key:"dispose",value:function(p){return this._dispose=p,this}},{key:"length",value:function(){return this._cur}},{key:"keys",value:function(){return this.each(function(p,
q){this.push(q)},[])}},{key:"values",value:function(){return this.each(function(p){this.push(p)},[])}},{key:"each",value:function(p,q){2>arguments&&(q=this);for(var r=0,u=this._MRU.older;u!==this._LRU;)p.call(q,u.val,u.key,r++),u=u.older;return q}},{key:"has",value:function(p){p=this._index[p];return void 0!==p&&p.expires>=Date.now()}},{key:"peek",value:function(p){p=this._index[p];if(void 0!==p){if(!(p.expires<Date.now()))return p.val;this.del(p.key)}}},{key:"touch",value:function(p){p=this._index[p];
if(void 0===p)throw Error("touch: no such item");return this._promote(p),this}},{key:"get",value:function(p){p=this._index[p];if(void 0!==p){if(!(p.expires<Date.now()))return this._promote(p),p.val;this.del(p.key)}}},{key:"set",value:function(p,q,r){3>arguments.length&&(r=1/0);r+=Date.now();var u=this._index[p];if(void 0===u)u={older:null,newer:null,key:p,val:q,expires:r},this._index[p]=u,this._attach(u),this._cur++,this._purge();else{var x=u.val;u.val=q;this._promote(u);this._dispose.call(void 0,
u.key,x,"set")}return this}},{key:"del",value:function(p){var q=this._index[p];if(void 0===q)throw Error("del: no such item");return delete this._index[p],this._detach(q),this._cur--,this._dispose.call(void 0,p,q.val,"del"),this}},{key:"clear",value:function(){for(;0<this._cur;)this.del(this._LRU.newer.key);return this}},{key:"_purge",value:function(){for(;this._cur>this._max;)this.del(this._LRU.newer.key)}},{key:"_promote",value:function(p){this._detach(p);this._attach(p)}},{key:"_detach",value:function(p){p.older.newer=
p.newer;p.newer.older=p.older;p.older=null;p.newer=null}},{key:"_attach",value:function(p){p.older=this._MRU.older;p.newer=this._MRU;p.newer.older=p;p.older.newer=p}}]),n}();d.exports=a},{}]},{},[1])(1)})}).call(this)}).call(this,"undefined"!==typeof im.commonjsHelpers.commonjsGlobal?im.commonjsHelpers.commonjsGlobal:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],3:[function(l,b,c){(function(g){(function(){!function(a,d,f){"object"==ad(b)&&"object"==ad(b.exports)?b.exports=
f():a.PEGUtil=f()}("undefined"!=typeof g?g:"undefined"!=typeof window?window:this,0,function(){var a={makeAST:function(f,k){return function(){return k.util.__makeAST.call(null,f().start.line,f().start.column,f().start.offset,arguments)}},makeUnroll:function(f,k){return function(n,p,q){if("object"!=ad(p)||!(p instanceof Array))throw new k.util.__SyntaxError("unroll: invalid list argument for unrolling",ad(p),"Array",f());if(void 0!==q){"number"==typeof q&&(q=[q]);var r=[];null!==n&&r.push(n);for(n=
0;n<p.length;n++)for(var u=0;u<q.length;u++)r.push(p[n][q[u]]);return r}return null!==n&&p.unshift(n),p}}},d=function(f,k){var n=f.length,p=k-20;0>p&&(p=0);var q=k+20;q>n&&(q=n);var r=function(u){return u.charCodeAt(0).toString(16).toUpperCase()};n=function(u,x,y){return u.substr(x,y).replace(/\\/g,"\\\\").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(D){return"\\x0"+r(D)}).replace(/[\x10-\x1F\x80-\xFF]/g,
function(D){return"\\x"+r(D)}).replace(/[\u0100-\u0FFF]/g,function(D){return"\\u0"+r(D)}).replace(/[\u1000-\uFFFF]/g,function(D){return"\\u"+r(D)})};return{prolog:n(f,p,k-p),token:n(f,k,1),epilog:n(f,k+1,q-(k+1))}};return a.parse=function(f,k,n){if("object"!=ad(f))throw Error("invalid parser object (not an object)");if("function"!=typeof f.parse)throw Error('invalid parser object (no "parse" function)');if("string"!=typeof k)throw Error("invalid input text (not a string)");if(void 0!==n&&"object"!=
ad(n))throw Error("invalid options (not an object)");void 0===n&&(n={});var p={ast:null,error:null};try{n.util={makeUnroll:a.makeUnroll,makeAST:a.makeAST,__makeAST:"function"==typeof n.makeAST?n.makeAST:function(q,r){return{line:q().start.line,column:q().start.column,offset:q().start.offset,args:r}},__SyntaxError:f.SyntaxError},p.ast=f.parse(k,n),p.error=null}catch(q){(p.ast=null,q instanceof f.SyntaxError)?(f=function(r,u){return void 0!==r?r:u},p.error={line:f(q.location.start.line,0),column:f(q.location.start.column,
0),message:q.message,found:f(q.found,""),expected:f(q.expected,""),location:d(k,f(q.location.start.offset,0))}):p.error={line:0,column:0,message:q.message,found:"",expected:"",location:d("",0)}}return p},a.errorMessage=function(f,k){for(var n=f.location,p="line "+f.line+" (column "+f.column+"): ",q="",r=0;r<p.length+n.prolog.length;r++)q+="-";return p+n.prolog+n.token+n.epilog+"\n"+q+"^\n"+f.message+(k?"":"\n")},a})}).call(this)}).call(this,"undefined"!==typeof im.commonjsHelpers.commonjsGlobal?im.commonjsHelpers.commonjsGlobal:
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],4:[function(l,b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==ad(Symbol.iterator)?function(k){return ad(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":ad(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,p.key,p)}}function d(f,k,n){return k&&
a(f.prototype,k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"taste",value:function(k){return"object"===g(k)&&null!==k&&"boolean"==typeof k.ASTy}},{key:"getParentNode",value:function(k){return k.parent()}},{key:"getChildNodes",value:function(k){return k.childs()}},{key:"getNodeType",value:function(k){return k.type()}},{key:"getNodeAttrNames",
value:function(k){return k.attrs()}},{key:"getNodeAttrValue",value:function(k,n){return k.get(n)}}]),f}();c["default"]=l},{}],5:[function(l,b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==ad(Symbol.iterator)?function(k){return ad(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":ad(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,
p.key,p)}}function d(f,k,n){return k&&a(f.prototype,k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"taste",value:function(k){return"object"===g(k)&&null!==k&&!("object"===("undefined"==typeof Node?"undefined":g(Node))&&k instanceof Node)&&"string"==typeof k.tagName&&""!==k.tagName}},{key:"getParentNode",value:function(k){return k.parentNode}},
{key:"getChildNodes",value:function(k){return"object"===g(k.childNodes)&&k.childNodes instanceof Array?k.childNodes:[]}},{key:"getNodeType",value:function(k){return k.tagName||"#".concat(k.type||"unknown")}},{key:"getNodeAttrNames",value:function(k){var n=["value"];return"object"===g(k.attribs)&&(n=n.concat(Object.keys(k.attribs))),n}},{key:"getNodeAttrValue",value:function(k,n){var p;return"value"===n?p=k.nodeValue:"object"===g(k.attribs)&&(p=k.attribs[n]),p}}]),f}();c["default"]=l},{}],6:[function(l,
b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==ad(Symbol.iterator)?function(k){return ad(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":ad(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,p.key,p)}}function d(f,k,n){return k&&a(f.prototype,k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=
void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"taste",value:function(k){return"object"===g(k)&&null!==k&&"string"==typeof k.kind&&""!==k.kind}},{key:"getParentNode",value:function(k,n){throw Error("GraphQL AST does not support parent node traversal");}},{key:"getChildNodes",value:function(k,n){var p=this,q=[],r=function(x,y){Object.prototype.hasOwnProperty.call(x,y)&&p.taste(x[y])?q.push(x[y]):Object.prototype.hasOwnProperty.call(x,
y)&&"object"===g(x[y])&&x[y]instanceof Array&&x[y].forEach(function(D){p.taste(D)&&q.push(D)})};if("*"===n)for(var u in k)r(k,u);else void 0!==k[n]&&r(k,n);return q}},{key:"getNodeType",value:function(k){return k.kind}},{key:"getNodeAttrNames",value:function(k){var n=[],p;for(p in k)Object.prototype.hasOwnProperty.call(k,p)&&"object"!==g(k[p])&&"kind"!==p&&"loc"!==p&&n.push(p);return n}},{key:"getNodeAttrValue",value:function(k,n){return Object.prototype.hasOwnProperty.call(k,n)&&"object"!==g(k[n])&&
"kind"!==n&&"loc"!==n?k[n]:void 0}}]),f}();c["default"]=l},{}],7:[function(l,b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==ad(Symbol.iterator)?function(k){return ad(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":ad(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,p.key,p)}}function d(f,k,n){return k&&a(f.prototype,
k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"taste",value:function(k){return"object"===g(k)&&null!==k}},{key:"getParentNode",value:function(k,n){throw Error("JSON does not support parent node traversal");}},{key:"getChildNodes",value:function(k,n){var p=this,q=[],r=function(x,y){Object.prototype.hasOwnProperty.call(x,y)&&p.taste(x[y])?
q.push(x[y]):Object.prototype.hasOwnProperty.call(x,y)&&"object"===g(x[y])&&x[y]instanceof Array&&x[y].forEach(function(D){p.taste(D)&&q.push(D)})};if("*"===n)for(var u in k)r(k,u);else void 0!==k[n]&&r(k,n);return q}},{key:"getNodeType",value:function(k){return null===k?"Null":k instanceof Boolean?"Boolean":k instanceof Number?"Number":k instanceof String?"String":"object"===g(k)?k instanceof Array?"Array":"function"==typeof k.constructor&&"string"==typeof k.constructor.name?k.constructor.name:"Object":
"Unknown"}},{key:"getNodeAttrNames",value:function(k){var n=[],p;for(p in k)Object.prototype.hasOwnProperty.call(k,p)&&"object"!==g(k[p])&&n.push(p);return n}},{key:"getNodeAttrValue",value:function(k,n){return Object.prototype.hasOwnProperty.call(k,n)&&"object"!==g(k[n])?k[n]:void 0}}]),f}();c["default"]=l},{}],8:[function(l,b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==ad(Symbol.iterator)?function(k){return ad(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===
Symbol&&k!==Symbol.prototype?"symbol":ad(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,p.key,p)}}function d(f,k,n){return k&&a(f.prototype,k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"taste",value:function(k){return"object"===
g(k)&&null!==k&&"string"==typeof k.type&&""!==k.type}},{key:"getParentNode",value:function(k,n){if("*"!==n&&"parent"!==n)throw Error('no such axis named "'+n+'" for walking to parent nodes');if(void 0!==k.parent)return k.parent;throw Error("Your Mozilla SpiderMonkey AST does not support parent node traversal");}},{key:"getChildNodes",value:function(k,n){var p=this,q=[],r=function(x,y){Object.prototype.hasOwnProperty.call(x,y)&&p.taste(x[y])?q.push(x[y]):Object.prototype.hasOwnProperty.call(x,y)&&
"object"===g(x[y])&&x[y]instanceof Array&&x[y].forEach(function(D){p.taste(D)&&q.push(D)})};if("*"===n)for(var u in k)r(k,u);else void 0!==k[n]&&r(k,n);return q}},{key:"getNodeType",value:function(k){return k.type}},{key:"getNodeAttrNames",value:function(k){var n=[],p;for(p in k)Object.prototype.hasOwnProperty.call(k,p)&&"object"!==g(k[p])&&"type"!==p&&"loc"!==p&&n.push(p);return n}},{key:"getNodeAttrValue",value:function(k,n){return Object.prototype.hasOwnProperty.call(k,n)&&"object"!==g(k[n])&&
"type"!==n&&"loc"!==n?k[n]:void 0}}]),f}();c["default"]=l},{}],9:[function(l,b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==ad(Symbol.iterator)?function(k){return ad(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":ad(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,p.key,p)}}function d(f,k,n){return k&&a(f.prototype,
k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"taste",value:function(k){return"object"===g(k)&&null!==k&&!("object"===("undefined"==typeof Node?"undefined":g(Node))&&k instanceof Node)&&"string"==typeof k.nodeName&&""!==k.nodeName}},{key:"getParentNode",value:function(k){return k.parentNode}},{key:"getChildNodes",value:function(k){return"object"===
g(k.childNodes)&&k.childNodes instanceof Array?k.childNodes:[]}},{key:"getNodeType",value:function(k){return k.nodeName}},{key:"getNodeAttrNames",value:function(k){var n=["value"];return"object"===g(k.attrs)&&k.attrs instanceof Array&&(n=n.concat(k.attrs.map(function(p){return p.name}))),n}},{key:"getNodeAttrValue",value:function(k,n){if("value"===n)var p=k.value;else"object"===g(k.attrs)&&k.attrs instanceof Array&&(k=k.attrs.filter(function(q){return q.name===n}).map(function(q){return q.value}),
1===k.length&&(p=k[0]));return p}}]),f}();c["default"]=l},{}],10:[function(l,b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==ad(Symbol.iterator)?function(k){return ad(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":ad(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,p.key,p)}}function d(f,k,n){return k&&a(f.prototype,
k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"taste",value:function(k){return"object"===g(k)&&null!==k&&"string"==typeof k.type&&""!==k.type}},{key:"getParentNode",value:function(k){if("object"===g(k.parent)&&null!==k.parent)return k.parent;throw Error("Your UniST AST does not support parent node traversal");}},{key:"getChildNodes",
value:function(k){return"object"===g(k.children)&&k.children instanceof Array?k.children:[]}},{key:"getNodeType",value:function(k){return k.type}},{key:"getNodeAttrNames",value:function(k){var n=[],p;for(p in k)Object.prototype.hasOwnProperty.call(k,p)&&"type"!==p&&"data"!==p&&"position"!==p&&"children"!==p&&"object"!==g(k[p])&&n.push(p);return n}},{key:"getNodeAttrValue",value:function(k,n){return Object.prototype.hasOwnProperty.call(k,n)&&"type"!==n&&"data"!==n&&"position"!==n&&"children"!==n&&
"object"!==g(k[n])?k[n]:void 0}}]),f}();c["default"]=l},{}],11:[function(l,b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==ad(Symbol.iterator)?function(k){return ad(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":ad(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,p.key,p)}}function d(f,k,n){return k&&a(f.prototype,
k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"taste",value:function(k){return"object"===("undefined"==typeof Node?"undefined":g(Node))&&null!==k&&k instanceof Node&&"object"===g(k)&&"number"==typeof k.nodeType&&"string"==typeof k.nodeName}},{key:"getParentNode",value:function(k){return k.parentNode}},{key:"getChildNodes",value:function(k){return"object"===
g(k.childNodes)&&null!==k.childNodes&&k.hasChildNodes()?Array.prototype.slice.call(k.childNodes,0):[]}},{key:"getNodeType",value:function(k){return"string"==typeof k.nodeName?k.nodeName:"unknown"}},{key:"getNodeAttrNames",value:function(k){return"object"===g(k.attributes)&&null!==k.attributes&&k.hasAttributes()?Array.prototype.slice.call(k.attributes,0).map(function(n){return n.nodeName}):[]}},{key:"getNodeAttrValue",value:function(k,n){return"object"===g(k.attributes)&&null!==k.attributes&&k.hasAttributes()?
k.getAttribute(n):void 0}}]),f}();c["default"]=l},{}],12:[function(l,b,c){function g(d,f){for(var k=0;k<f.length;k++){var n=f[k];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(d,n.key,n)}}function a(d,f,k){return f&&g(d.prototype,f),k&&g(d,k),d}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");return this._adapters=[],this}
return a(d,[{key:"register",value:function(f){return this._adapters.unshift({adapter:f,force:1<arguments.length&&void 0!==arguments[1]&&arguments[1]}),this}},{key:"unregister",value:function(f){if(void 0===f)this._adapters=[];else{for(var k=[],n=0;n<this._adapters.length;n++)this._adapters[n].adapter!==f&&k.push(this._adapters[n]);this._adapters=k}return this}},{key:"select",value:function(f){for(var k=0;k<this._adapters.length;k++)if(this._adapters[k].force||this._adapters[k].adapter.taste(f))return this._adapters[k].adapter}}]),
d}();c["default"]=l},{}],13:[function(l,b,c){function g(k){return(g="function"==typeof Symbol&&"symbol"==ad(Symbol.iterator)?function(n){return ad(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":ad(n)})(k)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var a=function(k,n){var p=k.getParentNode(n,"*");if(null===p)return 1;k=k.getChildNodes(p,"*");for(p=0;p<k.length;p++)if(k[p]===n)return p+1;throw Error("cannot find myself");
},d=function(k,n){for(var p=[];null!==(n=k.getParentNode(n,"*"));)p.push(n);return p},f={type:function(k,n){return k.getNodeType(n)},attrs:function(k,n,p){return void 0===p&&(p=" "),p+k.getNodeAttrNames(n).join(p)+p},depth:function(k,n){for(var p=1;null!==(n=k.getParentNode(n,"*"));)p++;return p},pos:function(k,n){return a(k,n)},nth:function(k,n,p){p=parseInt(p,10);var q=k.getParentNode(n,"*");if(null!==q){k=k.getChildNodes(q,"*");0>p&&(p=k.length-(p+1));for(q=0;q<k.length;q++)if(k[q]===n)return q+
1===p;return!1}return 1===p},first:function(k,n){return f.nth(k,n,1)},last:function(k,n){return f.nth(k,n,-1)},count:function(k,n,p){return"object"===g(p)&&p instanceof Array?p.length:"object"===g(p)?Object.keys(p).length:"string"==typeof p?p.length:String(p).length},below:function(k,n,p){if(!k.taste(p))throw Error('invalid argument to function "below" (node expected)');for(;null!==(n=k.getParentNode(n,"*"));)if(n===p)return!0;return!1},follows:function(k,n,p){if(!k.taste(p))throw Error('invalid argument to function "follows" (node expected)');
if(n===p)return!1;n=[n].concat(d(k,n)).reverse();var q=[p].concat(d(k,p)).reverse(),r=Math.min(n.length,q.length);for(p=0;p<r&&n[p]===q[p];p++);if(0===p)throw Error("internal error: root nodes have to be same same");return p===r?q.length<n.length:a(k,n[p])>a(k,q[p])},"in":function(k,n,p){if(!("object"===g(p)&&p instanceof Array))throw Error('invalid argument to function "in" (array expected)');for(k=0;k<p.length;k++)if(p[k]===n)return!0;return!1},substr:function(k,n,p,q,r){return String(p).substr(q,
r)},index:function(k,n,p,q,r){return String(p).indexOf(q,r)},trim:function(k,n,p){return String(p).trim()},lc:function(k,n,p){return String(p).toLowerCase()},uc:function(k,n,p){return String(p).toUpperCase()}};c["default"]=f},{}],14:[function(l,b,c){function g(d,f){for(var k=0;k<f.length;k++){var n=f[k];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(d,n.key,n)}}function a(d,f,k){return f&&g(d.prototype,f),k&&g(d,k),d}Object.defineProperty(c,"__esModule",
{value:!0});c["default"]=void 0;l=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");return this._funcs={},this}return a(d,[{key:"register",value:function(f,k){this._funcs[f]=k}},{key:"run",value:function(f,k){var n=this._funcs[f];if("function"!=typeof n)throw Error('invalid function "'+f+'"');return n.apply(null,k)}}]),d}();c["default"]=l},{}],15:[function(l,b,c){function g(y){return(g="function"==typeof Symbol&&"symbol"==ad(Symbol.iterator)?
function(D){return ad(D)}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":ad(D)})(y)}function a(y){return y&&y.__esModule?y:{"default":y}}function d(y,D){for(var H=0;H<D.length;H++){var I=D[H];I.enumerable=I.enumerable||!1;I.configurable=!0;"value"in I&&(I.writable=!0);Object.defineProperty(y,I.key,I)}}function f(y,D,H){return D&&d(y.prototype,D),H&&d(y,H),y}function k(y,D){if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");
y.prototype=Object.create(D&&D.prototype,{constructor:{value:y,writable:!0,configurable:!0}});D&&n(y,D)}function n(y,D){return(n=Object.setPrototypeOf||function(H,I){return H.__proto__=I,H})(y,D)}function p(y){var D=q();return function(){var H=r(y);if(D){var I=r(this).constructor;H=Reflect.construct(H,arguments,I)}else H=H.apply(this,arguments);if(!H||"object"!==g(H)&&"function"!=typeof H){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");H=this}return H}}
function q(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(y){return!1}}function r(y){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(y)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var u=a(l("./astq-util.js")),x=a(l("./astq-query-trace.js"));l=function(y){function D(I,
N,J,sa){var ja;if(!(this instanceof D))throw new TypeError("Cannot call a class as a function");return(ja=H.call(this)).adapter=I,ja.params=N,ja.funcs=J,ja.trace=sa,ja}k(D,x["default"]);var H=p(D);return f(D,[{key:"execQuery",value:function(I,N){var J=this;this.traceBegin(I,N);var sa=[];return I.childs().forEach(function(ja){sa=sa.concat(J.execPath(ja,N))}),this.traceEnd(I,N,sa),sa}},{key:"execPath",value:function(I,N){var J=this;this.traceBegin(I,N);var sa=[N],ja=[],Ha=!1;return I.childs().forEach(function(Qa){var ec=
[];sa.forEach(function(mc){ec=ec.concat(J.execStep(Qa,mc))});sa=ec;Qa.get("isResult")&&(Ha=!0,ja=ja.concat(sa))}),this.traceEnd(I,N,sa),Ha?ja:sa}},{key:"execStep",value:function(I,N){var J=this;this.traceBegin(I,N);var sa=I.childs(),ja=null,Ha=null,Qa=null,ec=0;if(ec<sa.length&&"Axis"===sa[ec].type()&&(ja=sa[ec++]),ec<sa.length&&"Match"===sa[ec].type()&&(Ha=sa[ec++]),ec<sa.length&&"Filter"===sa[ec].type()&&(Qa=sa[ec++]),null===Ha)throw Error("no matching part in query step");var mc=[],hc=Ha.get("id"),
Ua=function(qd){var La=J.adapter.getNodeType(qd);if("*"===hc||hc===La)La=!0,null!==Qa&&(J.execFilter(Qa,qd)||(La=!1)),La&&mc.push(qd)};if(null!==ja){sa=ja.get("op");var xa=ja.get("type");if("/"===sa)this.adapter.getChildNodes(N,xa).forEach(function(qd){return Ua(qd)});else if("//"===sa)this.adapter.getChildNodes(N,xa).forEach(function(qd){return function na(Fd){Ua(Fd);J.adapter.getChildNodes(Fd,xa).forEach(function(Va){return na(Va)})}(qd)});else if("./"===sa)Ua(N),this.adapter.getChildNodes(N,xa).forEach(function(qd){return Ua(qd)});
else if(".//"===sa)Ua(N),this.adapter.getChildNodes(N,xa).forEach(function(qd){return function na(Fd){Ua(Fd);J.adapter.getChildNodes(Fd,xa).forEach(function(Va){return na(Va)})}(qd)});else if("-/"===sa){if(ja=this.adapter.getParentNode(N,"*"),null!==ja){ja=this.adapter.getChildNodes(ja,xa);sa=null;for(Ha=0;Ha<ja.length&&ja[Ha]!==N;Ha++)sa=ja[Ha];null!==sa&&Ua(sa)}}else if("-//"===sa){if(ja=this.adapter.getParentNode(N,"*"),null!==ja){ja=this.adapter.getChildNodes(ja,xa);for(sa=0;sa<ja.length&&ja[sa]!==
N;sa++);for(sa--;0<=sa;sa--)Ua(ja[sa])}}else if("+/"===sa){if(ja=this.adapter.getParentNode(N,"*"),null!==ja){sa=this.adapter.getChildNodes(ja,xa);for(ja=0;ja<sa.length&&sa[ja]!==N;ja++);ja<sa.length&&Ua(sa[++ja])}}else if("+//"===sa){if(ja=this.adapter.getParentNode(N,"*"),null!==ja){sa=this.adapter.getChildNodes(ja,xa);for(ja=0;ja<sa.length&&sa[ja]!==N;ja++);if(ja<sa.length)for(ja++;ja<sa.length;ja++)Ua(sa[ja])}}else if("~/"===sa){if(ja=this.adapter.getParentNode(N,"*"),null!==ja){sa=this.adapter.getChildNodes(ja,
xa);for(ja=0;ja<sa.length&&sa[ja]!==N;ja++);0<ja&&Ua(sa[ja-1]);ja<sa.length-1&&Ua(sa[ja+1])}}else if("~//"===sa){if(ja=this.adapter.getParentNode(N,"*"),null!==ja)for(ja=this.adapter.getChildNodes(ja,xa),sa=0;sa<ja.length;sa++)ja[sa]!==N&&Ua(ja[sa])}else if("../"===sa)ja=this.adapter.getParentNode(N,xa),null!==ja&&Ua(ja);else if("..//"===sa)for(ja=N;;){ja=this.adapter.getParentNode(ja,xa);if(null===ja)break;Ua(ja)}else if("<//"===sa){for(var rc=N,Lb=!0;;){ja=this.adapter.getParentNode(N,"*");if(null===
ja)break;N=ja}N!==rc&&(Ua(N),this.adapter.getChildNodes(N,xa).forEach(function(qd){return function na(Fd){Fd===rc&&(Lb=!1);Lb&&Ua(Fd);Lb&&J.adapter.getChildNodes(Fd,xa).forEach(function(Va){return na(Va)})}(qd)}));mc=mc.reverse()}else if(">//"===sa){for(var Ac=N,Xb=!1;;){ja=this.adapter.getParentNode(N,"*");if(null===ja)break;N=ja}this.adapter.getChildNodes(N,xa).forEach(function(qd){return function na(Fd){Xb&&Ua(Fd);Fd===Ac&&(Xb=!0);J.adapter.getChildNodes(Fd,xa).forEach(function(Va){return na(Va)})}(qd)})}}else Ua(N);
return this.traceEnd(I,N,mc),mc}},{key:"execFilter",value:function(I,N){this.traceBegin(I,N);var J=I.childs()[0];J=this.execExpr(J,N);return J=u["default"].truthy(J),this.traceEnd(I,N,J),J}},{key:"execExpr",value:function(I,N){switch(I.type()){case "ConditionalBinary":return this.execExprConditionalBinary(I,N);case "ConditionalTernary":return this.execExprConditionalTernary(I,N);case "Logical":return this.execExprLogical(I,N);case "Bitwise":return this.execExprBitwise(I,N);case "Relational":return this.execExprRelational(I,
N);case "Arithmetical":return this.execExprArithmetical(I,N);case "Unary":return this.execExprUnary(I,N);case "FuncCall":return this.execExprFuncCall(I,N);case "Attribute":return this.execExprAttribute(I,N);case "Param":return this.execExprParam(I,N);case "LiteralString":return this.execExprLiteralString(I,N);case "LiteralRegExp":return this.execExprLiteralRegExp(I,N);case "LiteralNumber":return this.execExprLiteralNumber(I,N);case "LiteralValue":return this.execExprLiteralValue(I,N);case "Path":return this.execExprPath(I,
N)}}},{key:"execExprConditionalBinary",value:function(I,N){this.traceBegin(I,N);var J=this.execExpr(I.childs()[0],N);return u["default"].truthy(J)||(J=this.execExpr(I.childs()[1],N)),this.traceEnd(I,N,J),J}},{key:"execExprConditionalTernary",value:function(I,N){this.traceBegin(I,N);var J=this.execExpr(I.childs()[0],N);return J=u["default"].truthy(J)?this.execExpr(I.childs()[1],N):this.execExpr(I.childs()[2],N),this.traceEnd(I,N,J),J}},{key:"execExprLogical",value:function(I,N){this.traceBegin(I,N);
var J=!1;switch(I.get("op")){case "&&":(J=u["default"].truthy(this.execExpr(I.childs()[0],N)))&&(J=J&&u["default"].truthy(this.execExpr(I.childs()[1],N)));break;case "||":(J=u["default"].truthy(this.execExpr(I.childs()[0],N)))||(J=J||u["default"].truthy(this.execExpr(I.childs()[1],N)))}return this.traceEnd(I,N,J),J}},{key:"execExprBitwise",value:function(I,N){this.traceBegin(I,N);var J=u["default"].coerce(this.execExpr(I.childs()[0],N),"number"),sa=u["default"].coerce(this.execExpr(I.childs()[1],
N),"number");switch(I.get("op")){case "&":var ja=J&sa;break;case "|":ja=J|sa;break;case "<<":ja=J<<sa;break;case ">>":ja=J>>sa}return this.traceEnd(I,N,ja),ja}},{key:"execExprRelational",value:function(I,N){this.traceBegin(I,N);var J=this.execExpr(I.childs()[0],N),sa=this.execExpr(I.childs()[1],N);switch(I.get("op")){case "==":var ja=J===sa;break;case "!=":ja=J!==sa;break;case "<=":ja=u["default"].coerce(J,"number")<=u["default"].coerce(sa,"number");break;case ">=":ja=u["default"].coerce(J,"number")>=
u["default"].coerce(sa,"number");break;case "<":ja=u["default"].coerce(J,"number")<u["default"].coerce(sa,"number");break;case ">":ja=u["default"].coerce(J,"number")>u["default"].coerce(sa,"number");break;case "=~":ja=null!==u["default"].coerce(J,"string").match(u["default"].coerce(sa,"regexp"));break;case "!~":ja=null===u["default"].coerce(J,"string").match(u["default"].coerce(sa,"regexp"))}return this.traceEnd(I,N,ja),ja}},{key:"execExprArithmetical",value:function(I,N){this.traceBegin(I,N);var J=
this.execExpr(I.childs()[0],N),sa=this.execExpr(I.childs()[1],N);switch(I.get("op")){case "+":var ja="string"==typeof J?J+u["default"].coerce(sa,"string"):u["default"].coerce(J,"number")+u["default"].coerce(sa,"number");break;case "-":ja=u["default"].coerce(J,"number")+u["default"].coerce(sa,"number");break;case "*":ja=u["default"].coerce(J,"number")*u["default"].coerce(sa,"number");break;case "/":ja=u["default"].coerce(J,"number")/u["default"].coerce(sa,"number");break;case "%":ja=u["default"].coerce(J,
"number")%u["default"].coerce(sa,"number");break;case "**":ja=Math.pow(u["default"].coerce(J,"number"),u["default"].coerce(sa,"number"))}return this.traceEnd(I,N,ja),ja}},{key:"execExprUnary",value:function(I,N){this.traceBegin(I,N);var J=this.execExpr(I.childs()[0],N);switch(I.get("op")){case "!":var sa=!u["default"].coerce(J,"boolean");break;case "~":sa=~u["default"].coerce(J,"number")}return this.traceEnd(I,N,sa),sa}},{key:"execExprFuncCall",value:function(I,N){var J=this;this.traceBegin(I,N);
var sa=I.get("id"),ja=[this.adapter,N];I.childs().forEach(function(Ha){ja.push(J.execExpr(Ha,N))});sa=this.funcs.run(sa,ja);return this.traceEnd(I,N,sa),sa}},{key:"execExprAttribute",value:function(I,N){this.traceBegin(I,N);var J=I.get("id");J=this.adapter.getNodeAttrValue(N,J);return this.traceEnd(I,N,J),J}},{key:"execExprParam",value:function(I,N){this.traceBegin(I,N);var J=I.get("id");if(void 0===this.params[J])throw Error('invalid parameter "'+J+'"');J=this.params[J];return this.traceEnd(I,N,
J),J}},{key:"execExprLiteralString",value:function(I,N){this.traceBegin(I,N);var J=I.get("value");return this.traceEnd(I,N,J),J}},{key:"execExprLiteralRegExp",value:function(I,N){this.traceBegin(I,N);var J=I.get("value");return this.traceEnd(I,N,J),J}},{key:"execExprLiteralNumber",value:function(I,N){this.traceBegin(I,N);var J=I.get("value");return this.traceEnd(I,N,J),J}},{key:"execExprLiteralValue",value:function(I,N){this.traceBegin(I,N);var J=I.get("value");return this.traceEnd(I,N,J),J}},{key:"execExprPath",
value:function(I,N){this.traceBegin(I,N);var J=this.execPath(I,N);return this.traceEnd(I,N,J),J}}]),D}();c["default"]=l},{"./astq-query-trace.js":16,"./astq-util.js":18}],16:[function(l,b,c){function g(k){return(g="function"==typeof Symbol&&"symbol"==ad(Symbol.iterator)?function(n){return ad(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":ad(n)})(k)}function a(k,n){for(var p=0;p<n.length;p++){var q=n[p];q.enumerable=q.enumerable||!1;q.configurable=
!0;"value"in q&&(q.writable=!0);Object.defineProperty(k,q.key,q)}}function d(k,n,p){return n&&a(k.prototype,n),p&&a(k,p),k}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var f=function(k){return k&&k.__esModule?k:{"default":k}}(l("./astq-util.js"));l=function(){function k(){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");}return d(k,[{key:"prefixOf",value:function(n,p){for(var q=0;null!==(n=n.parent());)q++;var r=f["default"].pad("",4*q);q=0;
for(n=p;null!==(n=this.adapter.getParentNode(n,"*"));)q++;return{prefix1:r,prefix2:f["default"].pad("",4*q)}}},{key:"traceBegin",value:function(n,p){if(this.trace){var q=this.prefixOf(n,p),r=q.prefix2;console.log("ASTQ: execute: | "+f["default"].pad(q.prefix1+n.type()+" (",-60)+" | "+r+this.adapter.getNodeType(p))}}},{key:"traceEnd",value:function(n,p,q){var r=this;if(this.trace){var u,x=this.prefixOf(n,p);n=x.prefix1;x=x.prefix2;void 0===q?u="undefined":"object"===g(q)&&q instanceof Array?(u="[",
q.forEach(function(y){u+="node("+r.adapter.getNodeType(y)+"),"}),u=u.replace(/,$/,"")+"]"):u=g(q)+"("+q+")";60<u.length&&(u=u.substr(0,60)+"...");console.log("ASTQ: execute: | "+f["default"].pad(n+"): "+u,-60)+" | "+x+this.adapter.getNodeType(p))}}}]),k}();c["default"]=l},{"./astq-util.js":18}],17:[function(l,b,c){function g(q){return q&&q.__esModule?q:{"default":q}}function a(q,r){for(var u=0;u<r.length;u++){var x=r[u];x.enumerable=x.enumerable||!1;x.configurable=!0;"value"in x&&(x.writable=!0);
Object.defineProperty(q,x.key,x)}}function d(q,r,u){return r&&a(q.prototype,r),u&&a(q,u),q}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var f=g(l("asty")),k=g(l("pegjs-util")),n=g(l("./astq-query-exec.js")),p=function(){function q(r,u,x,y){this.message=r;this.expected=u;this.found=x;this.location=y;this.name="SyntaxError";"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,q)}return function(r,u){function x(){this.constructor=r}x.prototype=u.prototype;
r.prototype=new x}(q,Error),q.buildMessage=function(r,u){function x(I){return I.charCodeAt(0).toString(16).toUpperCase()}function y(I){return I.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(N){return"\\x0"+x(N)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(N){return"\\x"+x(N)})}function D(I){return I.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(N){return"\\x0"+x(N)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(N){return"\\x"+x(N)})}var H={literal:function(I){return'"'+y(I.text)+'"'},"class":function(I){var N,J="";for(N=0;N<I.parts.length;N++)J+=I.parts[N]instanceof Array?D(I.parts[N][0])+"-"+D(I.parts[N][1]):D(I.parts[N]);return"["+(I.inverted?"^":"")+J+"]"},any:function(I){return"any character"},end:function(I){return"end of input"},other:function(I){return I.description}};
return"Expected "+function(I){var N,J,sa=Array(I.length);for(N=0;N<I.length;N++)sa[N]=(J=I[N],H[J.type](J));if(sa.sort(),0<sa.length){for(I=N=1;N<sa.length;N++)sa[N-1]!==sa[N]&&(sa[I]=sa[N],I++);sa.length=I}switch(sa.length){case 1:return sa[0];case 2:return sa[0]+" or "+sa[1];default:return sa.slice(0,-1).join(", ")+", or "+sa[sa.length-1]}}(r)+" but "+(u?'"'+y(u)+'"':"end of input")+" found."},{SyntaxError:q,parse:function(r,u){function x(){return N(Oi,yb)}function y(od,Yd){return{type:"literal",
text:od,ignoreCase:Yd}}function D(od,Yd,kf){return{type:"class",parts:od,inverted:Yd,ignoreCase:kf}}function H(od){return{type:"other",description:od}}function I(od){var Yd,kf=tA[od];if(kf)return kf;for(Yd=od-1;!tA[Yd];)Yd--;for(kf={line:(kf=tA[Yd]).line,column:kf.column};Yd<od;)10===r.charCodeAt(Yd)?(kf.line++,kf.column=1):kf.column++,Yd++;return tA[od]=kf,kf}function N(od,Yd){var kf=I(od),ef=I(Yd);return{start:{offset:od,line:kf.line,column:kf.column},end:{offset:Yd,line:ef.line,column:ef.column}}}
function J(od){yb<aq||(yb>aq&&(aq=yb,rG=[]),rG.push(od))}function sa(){var od,Yd,kf=38*yb,ef=Xh[kf];return ef?(yb=ef.nextPos,ef.result):(od=yb,ea()!==U&&(Yd=function(){var Vf,ih,Cf,sh,gh,Wi,ij,oj=38*yb+1;if(Cf=Xh[oj])return yb=Cf.nextPos,Cf.result;if(Vf=yb,(ih=ja())!==U){Cf=[];var cl=yb;for((sh=ea())!==U?(44===r.charCodeAt(yb)?(gh=nf,yb++):(gh=U,0===qf&&J(Je)),gh!==U&&(Wi=ea())!==U&&(ij=ja())!==U?cl=sh=[sh,gh,Wi,ij]:(yb=cl,cl=U)):(yb=cl,cl=U);cl!==U;)Cf.push(cl),cl=yb,(sh=ea())!==U?(44===r.charCodeAt(yb)?
(gh=nf,yb++):(gh=U,0===qf&&J(Je)),gh!==U&&(Wi=ea())!==U&&(ij=ja())!==U?cl=sh=[sh,gh,Wi,ij]:(yb=cl,cl=U)):(yb=cl,cl=U);Cf!==U?(Oi=Vf,sh=ih,Vf=ih=Ak("Query").add(sG(sh,Cf,3))):(yb=Vf,Vf=U)}else yb=Vf,Vf=U;return Xh[oj]={nextPos:yb,result:Vf},Vf}())!==U&&ea()!==U&&function(){var Vf,ih,Cf=38*yb+37,sh=Xh[Cf];return sh?(yb=sh.nextPos,sh.result):(qf++,Vf=yb,qf++,r.length>yb?(ih=r.charAt(yb),yb++):(ih=U,0===qf&&J(tG)),qf--,ih===U?Vf=void 0:(yb=Vf,Vf=U),qf--,Vf===U&&0===qf&&J(Z0),Xh[Cf]={nextPos:yb,result:Vf},
Vf)}()!==U?(Oi=od,od=Yd):(yb=od,od=U),Xh[kf]={nextPos:yb,result:od},od)}function ja(){var od,Yd,kf,ef,Vf,ih=38*yb+2;if(od=Xh[ih])return yb=od.nextPos,od.result;od=yb;var Cf,sh,gh;var Wi=38*yb+3;var ij=Xh[Wi];if((Wi=ij?(yb=ij.nextPos,ij.result):(Yd=yb,(kf=Qa())===U&&(kf=null),kf!==U&&ea()!==U&&(Cf=ec())!==U&&ea()!==U?(33===r.charCodeAt(yb)?(sh=rf,yb++):(sh=U,0===qf&&J(fh)),sh===U&&(sh=null),sh!==U&&ea()!==U?((gh=mc())===U&&(gh=null),gh!==U?(Oi=Yd,kf=zi(kf,Cf,sh,gh),Yd=kf):(yb=Yd,Yd=U)):(yb=Yd,Yd=U)):
(yb=Yd,Yd=U),Xh[Wi]={nextPos:yb,result:Yd},Yd))!==U){Yd=[];kf=yb;for((ef=ea())!==U&&(Vf=Ha())!==U?kf=ef=[ef,Vf]:(yb=kf,kf=U);kf!==U;)Yd.push(kf),kf=yb,(ef=ea())!==U&&(Vf=Ha())!==U?kf=ef=[ef,Vf]:(yb=kf,kf=U);Yd!==U?(Oi=od,od=Ak("Path").add(sG(Wi,Yd,1))):(yb=od,od=U)}else yb=od,od=U;return Xh[ih]={nextPos:yb,result:od},od}function Ha(){var od,Yd,kf,ef,Vf,ih=38*yb+4,Cf=Xh[ih];return Cf?(yb=Cf.nextPos,Cf.result):(od=yb,(Yd=Qa())!==U&&ea()!==U&&(kf=ec())!==U&&ea()!==U?(33===r.charCodeAt(yb)?(ef=rf,yb++):
(ef=U,0===qf&&J(fh)),ef===U&&(ef=null),ef!==U&&ea()!==U?((Vf=mc())===U&&(Vf=null),Vf!==U?(Oi=od,od=zi(Yd,kf,ef,Vf)):(yb=od,od=U)):(yb=od,od=U)):(yb=od,od=U),Xh[ih]={nextPos:yb,result:od},od)}function Qa(){var od,Yd,kf=38*yb+5;if(od=Xh[kf])kf=(yb=od.nextPos,od.result);else{qf++;var ef=od=yb;r.substr(yb,2)===Hi?(Yd=Hi,yb+=2):(Yd=U,0===qf&&J(Fj));Yd===U&&(47===r.charCodeAt(yb)?(Yd=vk,yb++):(Yd=U,0===qf&&J(Hl)),Yd===U&&(r.substr(yb,3)===pl?(Yd=pl,yb+=3):(Yd=U,0===qf&&J(pk)),Yd===U&&(r.substr(yb,2)===
Sk?(Yd=Sk,yb+=2):(Yd=U,0===qf&&J(L)),Yd===U&&(r.substr(yb,3)===Ka?(Yd=Ka,yb+=3):(Yd=U,0===qf&&J(B)),Yd===U&&(r.substr(yb,2)===Y?(Yd=Y,yb+=2):(Yd=U,0===qf&&J(nb)),Yd===U&&(r.substr(yb,3)===ld?(Yd=ld,yb+=3):(Yd=U,0===qf&&J(ue)),Yd===U&&(r.substr(yb,2)===pg?(Yd=pg,yb+=2):(Yd=U,0===qf&&J(Kg)),Yd===U&&(r.substr(yb,4)===uh?(Yd=uh,yb+=4):(Yd=U,0===qf&&J(fj)),Yd===U&&(r.substr(yb,3)===Mj?(Yd=Mj,yb+=3):(Yd=U,0===qf&&J(Ck)),Yd===U&&(r.substr(yb,3)===un?(Yd=un,yb+=3):(Yd=U,0===qf&&J(Io)),Yd===U&&(r.substr(yb,
2)===qq?(Yd=qq,yb+=2):(Yd=U,0===qf&&J(rx)),Yd===U&&(r.substr(yb,3)===$o?(Yd=$o,yb+=3):(Yd=U,0===qf&&J(Dm)),Yd===U&&(r.substr(yb,3)===zr?(Yd=zr,yb+=3):(Yd=U,0===qf&&J(zd)))))))))))))));if((ef=Yd!==U?r.substring(ef,yb):Yd)!==U){var Vf,ih,Cf;Yd=38*yb+6;var sh=Xh[Yd];(Yd=sh?(yb=sh.nextPos,sh.result):(Vf=yb,58===r.charCodeAt(yb)?(ih=Eb,yb++):(ih=U,0===qf&&J(cc)),ih!==U&&(Cf=yd())!==U?(Oi=Vf,ih=Cf.get("id"),Vf=ih):(yb=Vf,Vf=U),Vf===U&&(Vf=yb,58===r.charCodeAt(yb)?(ih=Eb,yb++):(ih=U,0===qf&&J(cc)),ih!==
U&&(Cf=me())!==U?(Oi=Vf,ih=Cf.get("value"),Vf=ih):(yb=Vf,Vf=U)),Xh[Yd]={nextPos:yb,result:Vf},Vf))===U&&(Yd=null);Yd!==U?(Oi=od,Vf=ef,ih=Yd,od=Ak("Axis").set({op:Vf,type:null!==ih?ih:"*"})):(yb=od,od=U)}else yb=od,od=U;kf=(qf--,od===U&&0===qf&&J(Sh),Xh[kf]={nextPos:yb,result:od},od)}return kf}function ec(){var od,Yd,kf=38*yb+7;(od=Xh[kf])?kf=(yb=od.nextPos,od.result):(od=yb,(Yd=yd())!==U&&(Oi=od,od=Yd,Yd=Ak("Match").merge(od)),(od=Yd)===U&&(od=yb,(Yd=me())!==U&&(Oi=od,Yd=Ak("Match").set({id:Yd.get("value")})),
(od=Yd)===U&&(od=yb,42===r.charCodeAt(yb)?(Yd=Xc,yb++):(Yd=U,0===qf&&J(Ae)),Yd!==U&&(Oi=od,Yd=Ak("Match").set({id:"*"})),od=Yd)),kf=(Xh[kf]={nextPos:yb,result:od},od));return kf}function mc(){var od,Yd,kf,ef,Vf=38*yb+8;(od=Xh[Vf])?Vf=(yb=od.nextPos,od.result):(od=yb,91===r.charCodeAt(yb)?(Yd=cg,yb++):(Yd=U,0===qf&&J(wh)),Yd!==U&&ea()!==U&&(kf=hc())!==U&&ea()!==U?(93===r.charCodeAt(yb)?(ef=Pk,yb++):(ef=U,0===qf&&J(Em)),ef!==U?(Oi=od,Yd=kf,od=Ak("Filter").add(Yd)):(yb=od,od=U)):(yb=od,od=U),Vf=(Xh[Vf]=
{nextPos:yb,result:od},od));return Vf}function hc(){var od,Yd,kf,ef,Vf,ih,Cf=38*yb+9;(od=Xh[Cf])?Cf=(yb=od.nextPos,od.result):(od=yb,(Yd=Ua())!==U&&ea()!==U?(r.substr(yb,2)===Fm?(kf=Fm,yb+=2):(kf=U,0===qf&&J(dv)),kf!==U&&ea()!==U&&(ef=hc())!==U?(Oi=od,od=Yd,Yd=ef,od=Ak("ConditionalBinary").add(od,Yd)):(yb=od,od=U)):(yb=od,od=U),od===U&&(od=yb,(Yd=Ua())!==U&&ea()!==U?(63===r.charCodeAt(yb)?(kf=Xs,yb++):(kf=U,0===qf&&J(gm)),kf!==U&&ea()!==U&&(ef=hc())!==U&&ea()!==U?(58===r.charCodeAt(yb)?(Vf=Eb,yb++):
(Vf=U,0===qf&&J(cc)),Vf!==U&&ea()!==U&&(ih=hc())!==U?(Oi=od,kf=Yd,od=Ak("ConditionalTernary").add(kf,ef,ih)):(yb=od,od=U)):(yb=od,od=U)):(yb=od,od=U),od===U&&(od=Ua())),Cf=(Xh[Cf]={nextPos:yb,result:od},od));return Cf}function Ua(){var od,Yd,kf,ef,Vf,ih=38*yb+10,Cf=Xh[ih];return Cf?(yb=Cf.nextPos,Cf.result):(od=yb,(Yd=xa())!==U&&ea()!==U?(kf=yb,r.substr(yb,2)===Nq?(ef=Nq,yb+=2):(ef=U,0===qf&&J(ap)),(kf=ef!==U?r.substring(kf,yb):ef)!==U&&ea()!==U&&(Vf=Ua())!==U?(Oi=od,od=Ar(Yd,kf,Vf)):(yb=od,od=U)):
(yb=od,od=U),od===U&&(od=xa()),Xh[ih]={nextPos:yb,result:od},od)}function xa(){var od,Yd,kf,ef,Vf,ih=38*yb+11,Cf=Xh[ih];return Cf?(yb=Cf.nextPos,Cf.result):(od=yb,(Yd=rc())!==U&&ea()!==U?(kf=yb,r.substr(yb,2)===ev?(ef=ev,yb+=2):(ef=U,0===qf&&J(Br)),(kf=ef!==U?r.substring(kf,yb):ef)!==U&&ea()!==U&&(Vf=xa())!==U?(Oi=od,od=Ar(Yd,kf,Vf)):(yb=od,od=U)):(yb=od,od=U),od===U&&(od=rc()),Xh[ih]={nextPos:yb,result:od},od)}function rc(){var od,Yd,kf,ef,Vf,ih=38*yb+12,Cf=Xh[ih];return Cf?(yb=Cf.nextPos,Cf.result):
(od=yb,(Yd=Lb())!==U&&ea()!==U?(kf=yb,124===r.charCodeAt(yb)?(ef=Ys,yb++):(ef=U,0===qf&&J(fv)),(kf=ef!==U?r.substring(kf,yb):ef)!==U&&ea()!==U&&(Vf=rc())!==U?(Oi=od,od=Cr(Yd,kf,Vf)):(yb=od,od=U)):(yb=od,od=U),od===U&&(od=Lb()),Xh[ih]={nextPos:yb,result:od},od)}function Lb(){var od,Yd,kf,ef,Vf,ih=38*yb+13,Cf=Xh[ih];return Cf?(yb=Cf.nextPos,Cf.result):(od=yb,(Yd=Ac())!==U&&ea()!==U?(kf=yb,94===r.charCodeAt(yb)?(ef=uA,yb++):(ef=U,0===qf&&J(uG)),(kf=ef!==U?r.substring(kf,yb):ef)!==U&&ea()!==U&&(Vf=Lb())!==
U?(Oi=od,od=Cr(Yd,kf,Vf)):(yb=od,od=U)):(yb=od,od=U),od===U&&(od=Ac()),Xh[ih]={nextPos:yb,result:od},od)}function Ac(){var od,Yd,kf,ef,Vf,ih=38*yb+14,Cf=Xh[ih];return Cf?(yb=Cf.nextPos,Cf.result):(od=yb,(Yd=Xb())!==U&&ea()!==U?(kf=yb,38===r.charCodeAt(yb)?(ef=vA,yb++):(ef=U,0===qf&&J(wA)),(kf=ef!==U?r.substring(kf,yb):ef)!==U&&ea()!==U&&(Vf=Ac())!==U?(Oi=od,od=Cr(Yd,kf,Vf)):(yb=od,od=U)):(yb=od,od=U),od===U&&(od=Xb()),Xh[ih]={nextPos:yb,result:od},od)}function Xb(){var od,Yd,kf,ef=38*yb+15;if(od=
Xh[ef])ef=(yb=od.nextPos,od.result);else{var Vf=yb;if((od=qd())!==U&&ea()!==U){var ih=yb;r.substr(yb,2)===xA?(Yd=xA,yb+=2):(Yd=U,0===qf&&J(vG));Yd===U&&(r.substr(yb,2)===$a?(Yd=$a,yb+=2):(Yd=U,0===qf&&J(bc)),Yd===U&&(r.substr(yb,2)===Qb?(Yd=Qb,yb+=2):(Yd=U,0===qf&&J(oc)),Yd===U&&(r.substr(yb,2)===Wc?(Yd=Wc,yb+=2):(Yd=U,0===qf&&J(Wd)),Yd===U&&(60===r.charCodeAt(yb)?(Yd=wc,yb++):(Yd=U,0===qf&&J(Nd)),Yd===U&&(62===r.charCodeAt(yb)?(Yd=Bd,yb++):(Yd=U,0===qf&&J(Ze)),Yd===U&&(r.substr(yb,2)===Gd?(Yd=Gd,
yb+=2):(Yd=U,0===qf&&J(Sf)),Yd===U&&(r.substr(yb,2)===Ag?(Yd=Ag,yb+=2):(Yd=U,0===qf&&J(Qh)))))))));(ih=Yd!==U?r.substring(ih,yb):Yd)!==U&&ea()!==U&&(kf=Xb())!==U?(Oi=Vf,Vf=ih,Vf=Ak("Relational").set({op:Vf}).add(od,kf)):(yb=Vf,Vf=U)}else yb=Vf,Vf=U;ef=(Vf===U&&(Vf=qd()),Xh[ef]={nextPos:yb,result:Vf},Vf)}return ef}function qd(){var od,Yd,kf,ef,Vf,ih=38*yb+16,Cf=Xh[ih];return Cf?(yb=Cf.nextPos,Cf.result):(od=yb,(Yd=La())!==U&&ea()!==U?(kf=yb,r.substr(yb,2)===Mh?(ef=Mh,yb+=2):(ef=U,0===qf&&J(Yg)),ef===
U&&(r.substr(yb,2)===Nh?(ef=Nh,yb+=2):(ef=U,0===qf&&J(Xm))),(kf=ef!==U?r.substring(kf,yb):ef)!==U&&ea()!==U&&(Vf=qd())!==U?(Oi=od,od=Cr(Yd,kf,Vf)):(yb=od,od=U)):(yb=od,od=U),od===U&&(od=La()),Xh[ih]={nextPos:yb,result:od},od)}function La(){var od,Yd,kf,ef,Vf,ih=38*yb+17,Cf=Xh[ih];return Cf?(yb=Cf.nextPos,Cf.result):(od=yb,(Yd=Fd())!==U&&ea()!==U?(kf=yb,43===r.charCodeAt(yb)?(ef=wG,yb++):(ef=U,0===qf&&J(xG)),ef===U&&(45===r.charCodeAt(yb)?(ef=$0,yb++):(ef=U,0===qf&&J(a1))),(kf=ef!==U?r.substring(kf,
yb):ef)!==U&&ea()!==U&&(Vf=La())!==U?(Oi=od,od=dR(Yd,kf,Vf)):(yb=od,od=U)):(yb=od,od=U),od===U&&(od=Fd()),Xh[ih]={nextPos:yb,result:od},od)}function Fd(){var od,Yd,kf,ef,Vf,ih=38*yb+18,Cf=Xh[ih];return Cf?(yb=Cf.nextPos,Cf.result):(od=yb,(Yd=na())!==U&&ea()!==U?(kf=yb,r.substr(yb,2)===eR?(ef=eR,yb+=2):(ef=U,0===qf&&J(b1)),ef===U&&(42===r.charCodeAt(yb)?(ef=Xc,yb++):(ef=U,0===qf&&J(Ae)),ef===U&&(47===r.charCodeAt(yb)?(ef=vk,yb++):(ef=U,0===qf&&J(Hl)),ef===U&&(37===r.charCodeAt(yb)?(ef=c1,yb++):(ef=
U,0===qf&&J(d1))))),(kf=ef!==U?r.substring(kf,yb):ef)!==U&&ea()!==U&&(Vf=Fd())!==U?(Oi=od,od=dR(Yd,kf,Vf)):(yb=od,od=U)):(yb=od,od=U),od===U&&(od=na()),Xh[ih]={nextPos:yb,result:od},od)}function na(){var od,Yd,kf=38*yb+19;if(od=Xh[kf])kf=(yb=od.nextPos,od.result);else{var ef=od=yb;33===r.charCodeAt(yb)?(Yd=rf,yb++):(Yd=U,0===qf&&J(fh));Yd===U&&(126===r.charCodeAt(yb)?(Yd=e1,yb++):(Yd=U,0===qf&&J(f1)));(ef=Yd!==U?r.substring(ef,yb):Yd)!==U&&(Yd=Va())!==U?(Oi=od,od=ef,od=Ak("Unary").set({op:od}).add(Yd)):
(yb=od,od=U);kf=(od===U&&(od=Va()),Xh[kf]={nextPos:yb,result:od},od)}return kf}function Va(){var od,Yd=38*yb+20,kf=Xh[Yd];return kf?(yb=kf.nextPos,kf.result):((od=function(){var ef,Vf,ih,Cf=38*yb+21;if(ef=Xh[Cf])Cf=(yb=ef.nextPos,ef.result);else{var sh=yb;if((ef=yd())!==U&&ea()!==U)if(40===r.charCodeAt(yb)?(Vf=fR,yb++):(Vf=U,0===qf&&J(gR)),Vf!==U&&ea()!==U){var gh,Wi,ij,oj,cl;Vf=38*yb+22;if(gh=Xh[Vf])var uk=(yb=gh.nextPos,gh.result);else{if(gh=yb,(Wi=hc())!==U){var Jr=[];var Xl=yb;for((uk=ea())!==
U?(44===r.charCodeAt(yb)?(ij=nf,yb++):(ij=U,0===qf&&J(Je)),ij!==U&&(oj=ea())!==U&&(cl=hc())!==U?Xl=uk=[uk,ij,oj,cl]:(yb=Xl,Xl=U)):(yb=Xl,Xl=U);Xl!==U;)Jr.push(Xl),Xl=yb,(uk=ea())!==U?(44===r.charCodeAt(yb)?(ij=nf,yb++):(ij=U,0===qf&&J(Je)),ij!==U&&(oj=ea())!==U&&(cl=hc())!==U?Xl=uk=[uk,ij,oj,cl]:(yb=Xl,Xl=U)):(yb=Xl,Xl=U);Jr!==U?(Oi=gh,Wi=sG(Wi,Jr,3),gh=Wi):(yb=gh,gh=U)}else yb=gh,gh=U;uk=(Xh[Vf]={nextPos:yb,result:gh},gh)}uk===U&&(uk=null);uk!==U&&ea()!==U?(41===r.charCodeAt(yb)?(ih=hR,yb++):(ih=
U,0===qf&&J(iR)),ih!==U?(Oi=sh,ih=ef,sh=uk,sh=ef=Ak("FuncCall").merge(ih).add(sh)):(yb=sh,sh=U)):(yb=sh,sh=U)}else yb=sh,sh=U;else yb=sh,sh=U;Cf=(Xh[Cf]={nextPos:yb,result:sh},sh)}return Cf}())===U&&(od=function(){var ef,Vf,ih,Cf=38*yb+23;(ef=Xh[Cf])?Cf=(yb=ef.nextPos,ef.result):(qf++,ef=yb,64===r.charCodeAt(yb)?(Vf=jR,yb++):(Vf=U,0===qf&&J(kR)),Vf!==U&&(ih=yd())!==U?(Oi=ef,Vf=ih,ef=Vf=Ak("Attribute").merge(Vf)):(yb=ef,ef=U),ef===U&&(ef=yb,64===r.charCodeAt(yb)?(Vf=jR,yb++):(Vf=U,0===qf&&J(kR)),Vf!==
U&&(ih=me())!==U?(Oi=ef,ef=Vf=Ak("Attribute").set({id:ih.get("value")})):(yb=ef,ef=U)),Cf=(qf--,ef===U&&0===qf&&J(g1),Xh[Cf]={nextPos:yb,result:ef},ef));return Cf}())===U&&(od=function(){var ef,Vf,ih,Cf,sh=38*yb+24;(ef=Xh[sh])?sh=(yb=ef.nextPos,ef.result):(qf++,ef=yb,123===r.charCodeAt(yb)?(Vf=h1,yb++):(Vf=U,0===qf&&J(i1)),Vf!==U&&ea()!==U&&(ih=yd())!==U&&ea()!==U?(125===r.charCodeAt(yb)?(Cf=j1,yb++):(Cf=U,0===qf&&J(k1)),Cf!==U?(Oi=ef,Vf=ih,ef=Vf=Ak("Param").merge(Vf)):(yb=ef,ef=U)):(yb=ef,ef=U),
sh=(qf--,ef===U&&0===qf&&J(l1),Xh[sh]={nextPos:yb,result:ef},ef));return sh}())===U&&(od=function(){var ef,Vf=38*yb+25,ih=Xh[Vf];return ih?(yb=ih.nextPos,ih.result):((ef=me())===U&&(ef=function(){var Cf,sh,gh,Wi=38*yb+31;if(Cf=Xh[Wi])return yb=Cf.nextPos,Cf.result;if(qf++,Cf=yb,96===r.charCodeAt(yb)?(sh=lR,yb++):(sh=U,0===qf&&J(mR)),sh!==U){sh=yb;var ij=[];r.substr(yb,2)===yA?(gh=yA,yb+=2):(gh=U,0===qf&&J(nR));for(gh===U&&(oR.test(r.charAt(yb))?(gh=r.charAt(yb),yb++):(gh=U,0===qf&&J(pR)));gh!==U;)ij.push(gh),
r.substr(yb,2)===yA?(gh=yA,yb+=2):(gh=U,0===qf&&J(nR)),gh===U&&(oR.test(r.charAt(yb))?(gh=r.charAt(yb),yb++):(gh=U,0===qf&&J(pR)));if((sh=ij!==U?r.substring(sh,yb):ij)!==U)if(96===r.charCodeAt(yb)?(ij=lR,yb++):(ij=U,0===qf&&J(mR)),ij!==U){Oi=Cf;try{var oj=new RegExp(sh.replace(/\\`/g,"`"))}catch(cl){throw gh=cl.message,Wi=void 0,Wi=void 0!==Wi?Wi:N(Oi,yb),new q(gh,null,null,Wi);}Cf=sh=Ak("LiteralRegExp").set({value:oj})}else yb=Cf,Cf=U;else yb=Cf,Cf=U}else yb=Cf,Cf=U;return qf--,Cf===U&&0===qf&&J(m1),
Xh[Wi]={nextPos:yb,result:Cf},Cf}())===U&&(ef=function(){var Cf,sh,gh,Wi,ij,oj,cl,uk,Jr,Xl,Bx,ht,qR=38*yb+32;if(Cf=Xh[qR])return yb=Cf.nextPos,Cf.result;if(qf++,Cf=yb,sh=yb,ov.test(r.charAt(yb))?(gh=r.charAt(yb),yb++):(gh=U,0===qf&&J(pv)),gh===U&&(gh=null),(sh=gh!==U?r.substring(sh,yb):gh)!==U)if(r.substr(yb,2)===rR?(gh=rR,yb+=2):(gh=U,0===qf&&J(n1)),gh!==U){if(Wi=yb,ij=[],sR.test(r.charAt(yb))?(oj=r.charAt(yb),yb++):(oj=U,0===qf&&J(tR)),oj!==U)for(;oj!==U;)ij.push(oj),sR.test(r.charAt(yb))?(oj=r.charAt(yb),
yb++):(oj=U,0===qf&&J(tR));else ij=U;(Wi=ij!==U?r.substring(Wi,yb):ij)!==U?(Oi=Cf,Cf=Wi,Cf=sh=Ak("LiteralNumber").set({value:parseInt(sh+Cf,2)})):(yb=Cf,Cf=U)}else yb=Cf,Cf=U;else yb=Cf,Cf=U;if(Cf===U){if(Cf=yb,sh=yb,ov.test(r.charAt(yb))?(gh=r.charAt(yb),yb++):(gh=U,0===qf&&J(pv)),gh===U&&(gh=null),(sh=gh!==U?r.substring(sh,yb):gh)!==U)if(r.substr(yb,2)===uR?(gh=uR,yb+=2):(gh=U,0===qf&&J(o1)),gh!==U){if(Wi=yb,ij=[],vR.test(r.charAt(yb))?(oj=r.charAt(yb),yb++):(oj=U,0===qf&&J(wR)),oj!==U)for(;oj!==
U;)ij.push(oj),vR.test(r.charAt(yb))?(oj=r.charAt(yb),yb++):(oj=U,0===qf&&J(wR));else ij=U;(Wi=ij!==U?r.substring(Wi,yb):ij)!==U?(Oi=Cf,Cf=Wi,Cf=sh=Ak("LiteralNumber").set({value:parseInt(sh+Cf,8)})):(yb=Cf,Cf=U)}else yb=Cf,Cf=U;else yb=Cf,Cf=U;if(Cf===U){if(Cf=yb,sh=yb,ov.test(r.charAt(yb))?(gh=r.charAt(yb),yb++):(gh=U,0===qf&&J(pv)),gh===U&&(gh=null),(sh=gh!==U?r.substring(sh,yb):gh)!==U)if(r.substr(yb,2)===xR?(gh=xR,yb+=2):(gh=U,0===qf&&J(p1)),gh!==U){if(Wi=yb,ij=[],Kr.test(r.charAt(yb))?(oj=r.charAt(yb),
yb++):(oj=U,0===qf&&J(Lr)),oj!==U)for(;oj!==U;)ij.push(oj),Kr.test(r.charAt(yb))?(oj=r.charAt(yb),yb++):(oj=U,0===qf&&J(Lr));else ij=U;(Wi=ij!==U?r.substring(Wi,yb):ij)!==U?(Oi=Cf,gh=sh,sh=Wi,Cf=sh=Ak("LiteralNumber").set({value:parseInt(gh+sh,16)})):(yb=Cf,Cf=U)}else yb=Cf,Cf=U;else yb=Cf,Cf=U;if(Cf===U){if(Cf=yb,sh=yb,gh=yb,ov.test(r.charAt(yb))?(Wi=r.charAt(yb),yb++):(Wi=U,0===qf&&J(pv)),Wi===U&&(Wi=null),Wi!==U){ij=[];for(Mr.test(r.charAt(yb))?(oj=r.charAt(yb),yb++):(oj=U,0===qf&&J(Nr));oj!==
U;)ij.push(oj),Mr.test(r.charAt(yb))?(oj=r.charAt(yb),yb++):(oj=U,0===qf&&J(Nr));if(ij!==U)if(46===r.charCodeAt(yb)?(oj=q1,yb++):(oj=U,0===qf&&J(r1)),oj!==U){if(cl=[],Mr.test(r.charAt(yb))?(uk=r.charAt(yb),yb++):(uk=U,0===qf&&J(Nr)),uk!==U)for(;uk!==U;)cl.push(uk),Mr.test(r.charAt(yb))?(uk=r.charAt(yb),yb++):(uk=U,0===qf&&J(Nr));else cl=U;if(cl!==U){if(uk=yb,s1.test(r.charAt(yb))?(Jr=r.charAt(yb),yb++):(Jr=U,0===qf&&J(t1)),Jr!==U)if(ov.test(r.charAt(yb))?(Xl=r.charAt(yb),yb++):(Xl=U,0===qf&&J(pv)),
Xl===U&&(Xl=null),Xl!==U){if(Bx=[],Mr.test(r.charAt(yb))?(ht=r.charAt(yb),yb++):(ht=U,0===qf&&J(Nr)),ht!==U)for(;ht!==U;)Bx.push(ht),Mr.test(r.charAt(yb))?(ht=r.charAt(yb),yb++):(ht=U,0===qf&&J(Nr));else Bx=U;Bx!==U?uk=[Jr,Xl,Bx]:(yb=uk,uk=U)}else yb=uk,uk=U;else yb=uk,uk=U;uk===U&&(uk=null);uk!==U?gh=Wi=[Wi,ij,oj,cl,uk]:(yb=gh,gh=U)}else yb=gh,gh=U}else yb=gh,gh=U;else yb=gh,gh=U}else yb=gh,gh=U;(sh=gh!==U?r.substring(sh,yb):gh)!==U&&(Oi=Cf,uk=sh,sh=Ak("LiteralNumber").set({value:parseFloat(uk)}));
if((Cf=sh)===U){if(Cf=yb,sh=yb,gh=yb,ov.test(r.charAt(yb))?(Wi=r.charAt(yb),yb++):(Wi=U,0===qf&&J(pv)),Wi===U&&(Wi=null),Wi!==U){if(ij=[],Mr.test(r.charAt(yb))?(oj=r.charAt(yb),yb++):(oj=U,0===qf&&J(Nr)),oj!==U)for(;oj!==U;)ij.push(oj),Mr.test(r.charAt(yb))?(oj=r.charAt(yb),yb++):(oj=U,0===qf&&J(Nr));else ij=U;ij!==U?gh=[Wi,ij]:(yb=gh,gh=U)}else yb=gh,gh=U;(sh=gh!==U?r.substring(sh,yb):gh)!==U&&(Oi=Cf,Wi=sh,sh=Ak("LiteralNumber").set({value:parseInt(Wi,10)}));Cf=sh}}}}return qf--,Cf===U&&0===qf&&
J(u1),Xh[qR]={nextPos:yb,result:Cf},Cf}())===U&&(ef=W()),Xh[Vf]={nextPos:yb,result:ef},ef)}())===U&&(od=function(){var ef,Vf,ih,Cf,sh=38*yb+26,gh=Xh[sh];return gh?(yb=gh.nextPos,gh.result):(ef=yb,40===r.charCodeAt(yb)?(Vf=fR,yb++):(Vf=U,0===qf&&J(gR)),Vf!==U&&ea()!==U&&(ih=hc())!==U&&ea()!==U?(41===r.charCodeAt(yb)?(Cf=hR,yb++):(Cf=U,0===qf&&J(iR)),Cf!==U?(Oi=ef,Vf=ih,ef=Vf):(yb=ef,ef=U)):(yb=ef,ef=U),Xh[sh]={nextPos:yb,result:ef},ef)}())===U&&(od=ja()),Xh[Yd]={nextPos:yb,result:od},od)}function yd(){var od,
Yd,kf,ef,Vf,ih,Cf=38*yb+27;if(od=Xh[Cf])return yb=od.nextPos,od.result;if(qf++,od=yb,Yd=yb,kf=yb,ef=yb,qf++,Vf=W(),qf--,Vf===U?ef=void 0:(yb=ef,ef=U),ef!==U)if(v1.test(r.charAt(yb))?(Vf=r.charAt(yb),yb++):(Vf=U,0===qf&&J(w1)),Vf!==U){var sh=[];for(yR.test(r.charAt(yb))?(ih=r.charAt(yb),yb++):(ih=U,0===qf&&J(zR));ih!==U;)sh.push(ih),yR.test(r.charAt(yb))?(ih=r.charAt(yb),yb++):(ih=U,0===qf&&J(zR));sh!==U?kf=[ef,Vf,sh]:(yb=kf,kf=U)}else yb=kf,kf=U;else yb=kf,kf=U;(Yd=kf!==U?r.substring(Yd,yb):kf)!==
U&&(Oi=od,ef=Yd,Yd=Ak("Identifier").set({id:ef}));return qf--,(od=Yd)===U&&0===qf&&J(x1),Xh[Cf]={nextPos:yb,result:od},od}function me(){var od,Yd,kf,ef=38*yb+28;if(od=Xh[ef])return yb=od.nextPos,od.result;if(qf++,od=yb,34===r.charCodeAt(yb)?(Yd=AR,yb++):(Yd=U,0===qf&&J(BR)),Yd!==U){var Vf=[];for((kf=ta())===U&&(CR.test(r.charAt(yb))?(kf=r.charAt(yb),yb++):(kf=U,0===qf&&J(DR)));kf!==U;)Vf.push(kf),(kf=ta())===U&&(CR.test(r.charAt(yb))?(kf=r.charAt(yb),yb++):(kf=U,0===qf&&J(DR)));Vf!==U?(34===r.charCodeAt(yb)?
(kf=AR,yb++):(kf=U,0===qf&&J(BR)),kf!==U?(Oi=od,od=Yd=ER(Vf)):(yb=od,od=U)):(yb=od,od=U)}else yb=od,od=U;if(od===U)if(od=yb,39===r.charCodeAt(yb)?(Yd=FR,yb++):(Yd=U,0===qf&&J(GR)),Yd!==U){Vf=[];for((kf=za())===U&&(HR.test(r.charAt(yb))?(kf=r.charAt(yb),yb++):(kf=U,0===qf&&J(IR)));kf!==U;)Vf.push(kf),(kf=za())===U&&(HR.test(r.charAt(yb))?(kf=r.charAt(yb),yb++):(kf=U,0===qf&&J(IR)));Vf!==U?(39===r.charCodeAt(yb)?(kf=FR,yb++):(kf=U,0===qf&&J(GR)),kf!==U?(Oi=od,od=ER(Vf)):(yb=od,od=U)):(yb=od,od=U)}else yb=
od,od=U;return qf--,od===U&&0===qf&&J(y1),Xh[ef]={nextPos:yb,result:od},od}function ta(){var od,Yd,kf,ef,Vf,ih,Cf,sh,gh=38*yb+29,Wi=Xh[gh];return Wi?(yb=Wi.nextPos,Wi.result):(qf++,od=yb,r.substr(yb,2)===JR?(Yd=JR,yb+=2):(Yd=U,0===qf&&J(z1)),Yd!==U&&(Oi=od,Yd="\\"),(od=Yd)===U&&(od=yb,r.substr(yb,2)===KR?(Yd=KR,yb+=2):(Yd=U,0===qf&&J(A1)),Yd!==U&&(Oi=od,Yd='"'),(od=Yd)===U&&(od=yb,r.substr(yb,2)===LR?(Yd=LR,yb+=2):(Yd=U,0===qf&&J(B1)),Yd!==U&&(Oi=od,Yd="\b"),(od=Yd)===U&&(od=yb,r.substr(yb,2)===MR?
(Yd=MR,yb+=2):(Yd=U,0===qf&&J(C1)),Yd!==U&&(Oi=od,Yd="\x0B"),(od=Yd)===U&&(od=yb,r.substr(yb,2)===NR?(Yd=NR,yb+=2):(Yd=U,0===qf&&J(D1)),Yd!==U&&(Oi=od,Yd="\f"),(od=Yd)===U&&(od=yb,r.substr(yb,2)===OR?(Yd=OR,yb+=2):(Yd=U,0===qf&&J(E1)),Yd!==U&&(Oi=od,Yd="\t"),(od=Yd)===U&&(od=yb,r.substr(yb,2)===PR?(Yd=PR,yb+=2):(Yd=U,0===qf&&J(F1)),Yd!==U&&(Oi=od,Yd="\r"),(od=Yd)===U&&(od=yb,r.substr(yb,2)===QR?(Yd=QR,yb+=2):(Yd=U,0===qf&&J(G1)),Yd!==U&&(Oi=od,Yd="\n"),(od=Yd)===U&&(od=yb,r.substr(yb,2)===RR?(Yd=
RR,yb+=2):(Yd=U,0===qf&&J(H1)),Yd!==U&&(Oi=od,Yd="\u001b"),(od=Yd)===U&&(od=yb,r.substr(yb,2)===SR?(Yd=SR,yb+=2):(Yd=U,0===qf&&J(I1)),Yd!==U?(kf=yb,ef=yb,Kr.test(r.charAt(yb))?(Vf=r.charAt(yb),yb++):(Vf=U,0===qf&&J(Lr)),Vf!==U?(Kr.test(r.charAt(yb))?(ih=r.charAt(yb),yb++):(ih=U,0===qf&&J(Lr)),ih!==U?ef=[Vf,ih]:(yb=ef,ef=U)):(yb=ef,ef=U),(kf=ef!==U?r.substring(kf,yb):ef)!==U?(Oi=od,od=String.fromCharCode(parseInt(kf,16))):(yb=od,od=U)):(yb=od,od=U),od===U&&(od=yb,r.substr(yb,2)===TR?(Yd=TR,yb+=2):
(Yd=U,0===qf&&J(J1)),Yd!==U?(kf=yb,ef=yb,Kr.test(r.charAt(yb))?(Vf=r.charAt(yb),yb++):(Vf=U,0===qf&&J(Lr)),Vf!==U?(Kr.test(r.charAt(yb))?(ih=r.charAt(yb),yb++):(ih=U,0===qf&&J(Lr)),ih!==U?(Kr.test(r.charAt(yb))?(Cf=r.charAt(yb),yb++):(Cf=U,0===qf&&J(Lr)),Cf!==U?(Kr.test(r.charAt(yb))?(sh=r.charAt(yb),yb++):(sh=U,0===qf&&J(Lr)),sh!==U?ef=[Vf,ih,Cf,sh]:(yb=ef,ef=U)):(yb=ef,ef=U)):(yb=ef,ef=U)):(yb=ef,ef=U),(kf=ef!==U?r.substring(kf,yb):ef)!==U?(Oi=od,od=String.fromCharCode(parseInt(kf,16))):(yb=od,
od=U)):(yb=od,od=U))))))))))),qf--,od===U&&0===qf&&J(K1),Xh[gh]={nextPos:yb,result:od},od)}function za(){var od,Yd,kf=38*yb+30,ef=Xh[kf];return ef?(yb=ef.nextPos,ef.result):(qf++,od=yb,r.substr(yb,2)===UR?(Yd=UR,yb+=2):(Yd=U,0===qf&&J(L1)),Yd!==U&&(Oi=od,Yd="'"),qf--,(od=Yd)===U&&0===qf&&J(M1),Xh[kf]={nextPos:yb,result:od},od)}function W(){var od,Yd,kf=38*yb+33,ef=Xh[kf];return ef?(yb=ef.nextPos,ef.result):(qf++,od=yb,r.substr(yb,4)===VR?(Yd=VR,yb+=4):(Yd=U,0===qf&&J(N1)),Yd!==U&&(Oi=od,Yd=Ak("LiteralValue").set({value:!0})),
(od=Yd)===U&&(od=yb,r.substr(yb,5)===WR?(Yd=WR,yb+=5):(Yd=U,0===qf&&J(O1)),Yd!==U&&(Oi=od,Yd=Ak("LiteralValue").set({value:!1})),(od=Yd)===U&&(od=yb,r.substr(yb,4)===YR?(Yd=YR,yb+=4):(Yd=U,0===qf&&J(P1)),Yd!==U&&(Oi=od,Yd=Ak("LiteralValue").set({value:null})),(od=Yd)===U&&(od=yb,r.substr(yb,3)===ZR?(Yd=ZR,yb+=3):(Yd=U,0===qf&&J(Q1)),Yd!==U&&(Oi=od,Yd=Ak("LiteralValue").set({value:NaN})),(od=Yd)===U&&(od=yb,r.substr(yb,9)===$R?(Yd=$R,yb+=9):(Yd=U,0===qf&&J(R1)),Yd!==U&&(Oi=od,Yd=Ak("LiteralValue").set({value:void 0})),
od=Yd)))),qf--,od===U&&0===qf&&J(S1),Xh[kf]={nextPos:yb,result:od},od)}function ea(){var od,Yd,kf=38*yb+34;if(od=Xh[kf])return yb=od.nextPos,od.result;qf++;od=[];for((Yd=Kb())===U&&(Yd=V());Yd!==U;)od.push(Yd),(Yd=Kb())===U&&(Yd=V());return qf--,od===U&&0===qf&&J(T1),Xh[kf]={nextPos:yb,result:od},od}function Kb(){var od,Yd,kf,ef,Vf=38*yb+35;if(od=Xh[Vf])return yb=od.nextPos,od.result;if(qf++,od=yb,r.substr(yb,2)===aS?(Yd=aS,yb+=2):(Yd=U,0===qf&&J(U1)),Yd!==U){var ih=[];var Cf=kf=yb;qf++;r.substr(yb,
2)===qv?(ef=qv,yb+=2):(ef=U,0===qf&&J(yG));qf--;ef===U?Cf=void 0:(yb=Cf,Cf=U);for(Cf!==U?(r.length>yb?(ef=r.charAt(yb),yb++):(ef=U,0===qf&&J(tG)),ef!==U?kf=[Cf,ef]:(yb=kf,kf=U)):(yb=kf,kf=U);kf!==U;)ih.push(kf),Cf=kf=yb,qf++,r.substr(yb,2)===qv?(ef=qv,yb+=2):(ef=U,0===qf&&J(yG)),qf--,ef===U?Cf=void 0:(yb=Cf,Cf=U),Cf!==U?(r.length>yb?(ef=r.charAt(yb),yb++):(ef=U,0===qf&&J(tG)),ef!==U?kf=[Cf,ef]:(yb=kf,kf=U)):(yb=kf,kf=U);ih!==U?(r.substr(yb,2)===qv?(kf=qv,yb+=2):(kf=U,0===qf&&J(yG)),kf!==U?od=[Yd,
ih,kf]:(yb=od,od=U)):(yb=od,od=U)}else yb=od,od=U;return qf--,od===U&&0===qf&&J(V1),Xh[Vf]={nextPos:yb,result:od},od}function V(){var od,Yd,kf=38*yb+36;if(od=Xh[kf])return yb=od.nextPos,od.result;if(qf++,od=[],bS.test(r.charAt(yb))?(Yd=r.charAt(yb),yb++):(Yd=U,0===qf&&J(cS)),Yd!==U)for(;Yd!==U;)od.push(Yd),bS.test(r.charAt(yb))?(Yd=r.charAt(yb),yb++):(Yd=U,0===qf&&J(cS));else od=U;return qf--,od===U&&0===qf&&J(W1),Xh[kf]={nextPos:yb,result:od},od}u=void 0!==u?u:{};var Oa,U={},fd={query:sa},Td=sa,
nf=",",Je=y(",",!1),rf="!",fh=y("!",!1),zi=function(od,Yd,kf,ef){return Ak("Step").add(od,Yd,ef).set(null!==kf?{isResult:!0}:{})},Sh=H("axis"),Hi="//",Fj=y("//",!1),vk="/",Hl=y("/",!1),pl="-//",pk=y("-//",!1),Sk="-/",L=y("-/",!1),Ka="+//",B=y("+//",!1),Y="+/",nb=y("+/",!1),ld="~//",ue=y("~//",!1),pg="~/",Kg=y("~/",!1),uh="..//",fj=y("..//",!1),Mj="../",Ck=y("../",!1),un=".//",Io=y(".//",!1),qq="./",rx=y("./",!1),$o="<//",Dm=y("<//",!1),zr=">//",zd=y(">//",!1),Eb=":",cc=y(":",!1),Xc="*",Ae=y("*",!1),
cg="[",wh=y("[",!1),Pk="]",Em=y("]",!1),Fm="?:",dv=y("?:",!1),Xs="?",gm=y("?",!1),Nq="||",ap=y("||",!1),Ar=function(od,Yd,kf){return Ak("Logical").set({op:Yd}).add(od,kf)},ev="&&",Br=y("&&",!1),Ys="|",fv=y("|",!1),Cr=function(od,Yd,kf){return Ak("Bitwise").set({op:Yd}).add(od,kf)},uA="^",uG=y("^",!1),vA="&",wA=y("&",!1),xA="==",vG=y("==",!1),$a="!=",bc=y("!=",!1),Qb="<=",oc=y("<=",!1),Wc=">=",Wd=y(">=",!1),wc="<",Nd=y("<",!1),Bd=">",Ze=y(">",!1),Gd="=~",Sf=y("=~",!1),Ag="!~",Qh=y("!~",!1),Mh="<<",
Yg=y("<<",!1),Nh=">>",Xm=y(">>",!1),wG="+",xG=y("+",!1),$0="-",a1=y("-",!1),dR=function(od,Yd,kf){return Ak("Arithmetical").set({op:Yd}).add(od,kf)},eR="**",b1=y("**",!1),c1="%",d1=y("%",!1),e1="~",f1=y("~",!1),fR="(",gR=y("(",!1),hR=")",iR=y(")",!1),g1=H("node attribute"),jR="@",kR=y("@",!1),l1=H("query parameter reference"),h1="{",i1=y("{",!1),j1="}",k1=y("}",!1),x1=H("identifier"),v1=/^[a-zA-Z_]/,w1=D([["a","z"],["A","Z"],"_"],!1,!1),yR=/^[a-zA-Z0-9_\-]/,zR=D([["a","z"],["A","Z"],["0","9"],"_",
"-"],!1,!1),y1=H("quoted string literal"),AR='"',BR=y('"',!1),CR=/^[^"]/,DR=D(['"'],!0,!1),ER=function(od){return Ak("LiteralString").set({value:od.join("")})},FR="'",GR=y("'",!1),HR=/^[^']/,IR=D(["'"],!0,!1),K1=H("escaped double-quoted-string character"),JR="\\\\",z1=y("\\\\",!1),KR='\\"',A1=y('\\"',!1),LR="\\b",B1=y("\\b",!1),MR="\\v",C1=y("\\v",!1),NR="\\f",D1=y("\\f",!1),OR="\\t",E1=y("\\t",!1),PR="\\r",F1=y("\\r",!1),QR="\\n",G1=y("\\n",!1),RR="\\e",H1=y("\\e",!1),SR="\\x",I1=y("\\x",!1),Kr=
/^[0-9a-fA-F]/,Lr=D([["0","9"],["a","f"],["A","F"]],!1,!1),TR="\\u",J1=y("\\u",!1),M1=H("escaped single-quoted-string character"),UR="\\'",L1=y("\\'",!1),m1=H("regular expression literal"),lR="`",mR=y("`",!1),yA="\\`",nR=y("\\`",!1),oR=/^[^`]/,pR=D(["`"],!0,!1),u1=H("numeric literal"),ov=/^[+\-]/,pv=D(["+","-"],!1,!1),rR="0b",n1=y("0b",!1),sR=/^[01]/,tR=D(["0","1"],!1,!1),uR="0o",o1=y("0o",!1),vR=/^[0-7]/,wR=D([["0","7"]],!1,!1),xR="0x",p1=y("0x",!1),Mr=/^[0-9]/,Nr=D([["0","9"]],!1,!1),q1=".",r1=
y(".",!1),s1=/^[eE]/,t1=D(["e","E"],!1,!1),S1=H("global value"),VR="true",N1=y("true",!1),WR="false",O1=y("false",!1),YR="null",P1=y("null",!1),ZR="NaN",Q1=y("NaN",!1),$R="undefined",R1=y("undefined",!1),T1=H("optional blank"),V1=H("multi-line comment"),aS="/*",U1=y("/*",!1),qv="*/",yG=y("*/",!1),tG={type:"any"},W1=H("any whitespaces"),bS=/^[ \t\r\n]/,cS=D([" ","\t","\r","\n"],!1,!1),Z0=H("end of file"),yb=0,Oi=0,tA=[{line:1,column:1}],aq=0,rG=[],qf=0,Xh={};if("startRule"in u){if(!(u.startRule in
fd))throw Error("Can't start parsing from rule \""+u.startRule+'".');Td=fd[u.startRule]}var sG=u.util.makeUnroll(x,u),Ak=u.util.makeAST(x,u);if((Oa=Td())!==U&&yb===r.length)return Oa;throw Oa!==U&&yb<r.length&&J({type:"end"}),function(od,Yd,kf){return new q(q.buildMessage(od,Yd),od,Yd,kf)}(rG,aq<r.length?r.charAt(aq):null,aq<r.length?N(aq,aq+1):N(aq,aq));}}}();l=function(){function q(r){if(!(this instanceof q))throw new TypeError("Cannot call a class as a function");this.asty=new f["default"];this.ast=
null;r&&this.compile(r)}return d(q,[{key:"compile",value:function(r,u){var x=this;u&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\nASTQ: compile: | "+r);r=k["default"].parse(p,r,{startRule:"query",makeAST:function(y,D,H,I){return x.asty.create.apply(x.asty,I).pos(y,D,H)}});if(null!==r.error)throw Error("ASTQ: compile: query parsing failed:\n"+k["default"].errorMessage(r.error,!0).replace(/^/gm,"ERROR: "));return this.ast=
r.ast,u&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\n"+this.dump().replace(/\n$/,"").replace(/^/gm,"ASTQ: compile: | ")),this}},{key:"dump",value:function(){return this.ast.dump()}},{key:"execute",value:function(r,u,x,y,D){return D&&console.log("ASTQ: execute: +-------------------------------------------------------------------------------------------------------"),(new n["default"](u,x,y,D)).execQuery(this.ast,
r)}}]),q}();c["default"]=l},{"./astq-query-exec.js":15,asty:1,"pegjs-util":3}],18:[function(l,b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==ad(Symbol.iterator)?function(k){return ad(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":ad(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,p.key,p)}}function d(f,k,n){return k&&
a(f.prototype,k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"pad",value:function(k,n){var p=0>n?-n:n;k.length>p?k=k.substr(0,p):(p=Array(p+1-k.length).join(" "),k=0>n?k+p:p+k);return k}},{key:"truthy",value:function(k){switch(g(k)){case "boolean":var n=k;break;case "number":n=0!==k&&!isNaN(k);break;case "string":n=""!==k;break;case "object":n=
!1;null!==k&&(n=!0,k instanceof Array&&(n=0<k.length));break;default:n=!1}return n}},{key:"coerce",value:function(k,n){if(g(k)!==n)try{switch(n){case "boolean":"boolean"!=typeof k&&(k=!!k);break;case "number":"number"!=typeof k&&(k=Number(k));break;case "string":"string"!=typeof k&&(k=String(k));break;case "regexp":"object"===g(k)&&k instanceof RegExp||(k=new RegExp(k))}}catch(p){throw Error("cannot coerce value into type "+n);}return k}}]),f}();c["default"]=l},{}],19:[function(l,b,c){Object.defineProperty(c,
"__esModule",{value:!0});c["default"]=void 0;c["default"]={major:2,minor:7,micro:5,date:20210107}},{}],20:[function(l,b,c){function g(Ha){return Ha&&Ha.__esModule?Ha:{"default":Ha}}function a(Ha){return(a="function"==typeof Symbol&&"symbol"==ad(Symbol.iterator)?function(Qa){return ad(Qa)}:function(Qa){return Qa&&"function"==typeof Symbol&&Qa.constructor===Symbol&&Qa!==Symbol.prototype?"symbol":ad(Qa)})(Ha)}function d(Ha,Qa){if(!(Ha instanceof Qa))throw new TypeError("Cannot call a class as a function");
}function f(Ha,Qa){for(var ec=0;ec<Qa.length;ec++){var mc=Qa[ec];mc.enumerable=mc.enumerable||!1;mc.configurable=!0;"value"in mc&&(mc.writable=!0);Object.defineProperty(Ha,mc.key,mc)}}function k(Ha,Qa,ec){return Qa&&f(Ha.prototype,Qa),ec&&f(Ha,ec),Ha}var n=g(l("cache-lru")),p=g(l("./astq-adapter.js")),q=g(l("./astq-adapter-xmldom.js")),r=g(l("./astq-adapter-parse5.js")),u=g(l("./astq-adapter-mozast.js")),x=g(l("./astq-adapter-graphql.js")),y=g(l("./astq-adapter-json.js")),D=g(l("./astq-adapter-cheerio.js")),
H=g(l("./astq-adapter-unist.js")),I=g(l("./astq-adapter-asty.js")),N=g(l("./astq-funcs.js")),J=g(l("./astq-funcs-std.js")),sa=g(l("./astq-query.js")),ja=g(l("./astq-version.js"));l=function(){function Ha(){for(var Qa in d(this,Ha),this._adapter=(new p["default"]).register(q["default"],!1).register(r["default"],!1).register(u["default"],!1).register(x["default"],!1).register(y["default"],!1).register(D["default"],!1).register(H["default"],!1).register(I["default"],!1),this._funcs=new N["default"],
J["default"])this.func(Qa,J["default"][Qa]);this._cache=new n["default"]}return k(Ha,[{key:"version",value:function(){return ja["default"]}},{key:"adapter",value:function(Qa){var ec=this,mc=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(1>arguments.length||2<arguments.length)throw Error("ASTQ#adapter: invalid number of arguments");if(this._adapter.unregister(),"object"===a(Qa)&&Qa instanceof Array||(Qa=[Qa]),1<Qa.length&&mc)throw Error("ASTQ#adapter: you can force just a single adapter to not taste the AST node");
return Qa.forEach(function(hc){if("string"==typeof hc)if("mozast"===hc)hc=u["default"];else if("graphql"===hc)hc=x["default"];else if("xmldom"===hc)hc=q["default"];else if("parse5"===hc)hc=r["default"];else if("json"===hc)hc=y["default"];else if("cheerio"===hc)hc=D["default"];else if("unist"===hc)hc=H["default"];else{if("asty"!==hc)throw Error("ASTQ#adapter: unknown built-in adapter");hc=I["default"]}ec._adapter.register(hc,mc)}),this}},{key:"func",value:function(Qa,ec){if(2!==arguments.length)throw Error("ASTQ#func: invalid number of arguments");
return this._funcs.register(Qa,ec),this}},{key:"cache",value:function(Qa){if(1!==arguments.length)throw Error("ASTQ#cache: invalid number of arguments");return this._cache.limit(Qa),this}},{key:"compile",value:function(Qa,ec){if(1>arguments.length)throw Error("ASTQ#compile: too less arguments");if(2<arguments.length)throw Error("ASTQ#compile: too many arguments");void 0===ec&&(ec=!1);var mc=this._cache.get(Qa);return void 0===mc&&((mc=new sa["default"]).compile(Qa,ec),this._cache.set(Qa,mc)),mc}},
{key:"execute",value:function(Qa,ec,mc,hc){if(2>arguments.length)throw Error("ASTQ#execute: too less arguments");if(4<arguments.length)throw Error("ASTQ#execute: too many arguments");void 0===mc&&(mc={});void 0===hc&&(hc=!1);var Ua=this._adapter.select(Qa);if(void 0===Ua)throw Error("ASTQ#execute: no suitable adapter found for node");return ec.execute(Qa,Ua,mc,this._funcs,hc)}},{key:"query",value:function(Qa,ec,mc,hc){if(2>arguments.length)throw Error("ASTQ#query: too less arguments");if(4<arguments.length)throw Error("ASTQ#query: too many arguments");
return void 0===mc&&(mc={}),void 0===hc&&(hc=!1),this.execute(Qa,this.compile(ec,hc),mc,hc)}}]),Ha}();b.exports=l},{"./astq-adapter-asty.js":4,"./astq-adapter-cheerio.js":5,"./astq-adapter-graphql.js":6,"./astq-adapter-json.js":7,"./astq-adapter-mozast.js":8,"./astq-adapter-parse5.js":9,"./astq-adapter-unist.js":10,"./astq-adapter-xmldom.js":11,"./astq-adapter.js":12,"./astq-funcs-std.js":13,"./astq-funcs.js":14,"./astq-query.js":17,"./astq-version.js":19,"cache-lru":2}]},{},[4,5,6,7,8,9,10,11,12,
13,14,15,16,17,18,19,20])(20)}()})(im.astq_browserModule,im.astq_browser);var X1=nv.exports;im.__moduleExports=nv.exports;im.astq_browser=nv.exports;im["default"]=nv.exports;var Jk=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/visitors.js");Jk.blockInliner=function(e){if(Array.isArray(e.body))for(var h=e.body.length-1;0<=h;h--){var l=e.body[h];"BlockStatement"===l.type&&l[Jk.canBeInlinedSym]&&e.body.splice.apply(e.body,[h,1].concat(l.body))}return e};Jk.block=function(e){return{type:"BlockStatement",
body:e}};Jk.Visitor=Vn;Jk._ASTQ=X1;Jk.ASTQ=Jk._ASTQ||System._nodeRequire("astq");var Cx=function(e){function h(){Sd(this,h);return l.apply(this,arguments)}vd(h,e);var l=qb(h);uc(h,[{key:"accept",value:function(b,c,g){this.doFunc(b,c,g);return ic(Ed(h.prototype),"accept",this).call(this,b,c,g)}}],[{key:"run",value:function(b,c,g){var a=new this;a.doFunc=c;a.accept(b,g,[]);return g}}]);return h}(Jk.Visitor);Jk.AllNodesVisitor=Cx;var zG=function(e){function h(){Sd(this,h);return l.apply(this,arguments)}
vd(h,e);var l=qb(h);uc(h,[{key:"accept",value:function(b,c,g){switch(b.type){case "ArrowFunctionExpression":return b;case "FunctionExpression":return b;case "FunctionDeclaration":return c.unshift({node:b,path:g}),b;default:return ic(Ed(h.prototype),"accept",this).call(this,b,c,g)}}}],[{key:"run",value:function(b){var c=[];(new this).accept(b,c,[]);return c}}]);return h}(Jk.Visitor);Jk.FindToplevelFuncDeclVisitor=zG;Jk.canBeInlinedSym=Symbol("canBeInlined");var Dx=function(e){function h(){Sd(this,
h);return l.apply(this,arguments)}vd(h,e);var l=qb(h);uc(h,[{key:"accept",value:function(b,c,g){b=this.replacer(ic(Ed(h.prototype),"accept",this).call(this,b,c,g));return Array.isArray(b)?1===b.length?b[0]:Object.assign(Jk.block(b),dd({},Jk.canBeInlinedSym,!0)):b}},{key:"visitBlockStatement",value:function(b,c,g){return Jk.blockInliner(ic(Ed(h.prototype),"visitBlockStatement",this).call(this,b,c,g))}},{key:"visitProgram",value:function(b,c,g){return Jk.blockInliner(ic(Ed(h.prototype),"visitProgram",
this).call(this,b,c,g))}}],[{key:"run",value:function(b,c){var g=new this;g.replacer=c;return g.accept(b,null,[])}}]);return h}(Jk.Visitor);Jk.ReplaceManyVisitor=Dx;var rv=function(e){function h(){Sd(this,h);return l.apply(this,arguments)}vd(h,e);var l=qb(h);uc(h,[{key:"accept",value:function(b,c,g){return this.replacer(ic(Ed(h.prototype),"accept",this).call(this,b,c,g),g)}}],[{key:"run",value:function(b,c){var g=new this;g.replacer=c;return g.accept(b,null,[])}}]);return h}(Jk.Visitor);Jk.ReplaceVisitor=
rv;Jk.astq=new Jk.ASTQ;Jk.astq.adapter("mozast");var dS=function(e){function h(){Sd(this,h);return l.apply(this,arguments)}vd(h,e);var l=qb(h);uc(h,null,[{key:"run",value:function(b,c,g){var a=Jk.astq.query(b,c);return ic(Ed(h),"run",this).call(this,b,function(d){return a.includes(d)?g(d):d})}}]);return h}(Jk.ReplaceManyVisitor);Jk.QueryReplaceManyVisitor=dS;Jk.AllNodesVisitor=Cx;Jk.FindToplevelFuncDeclVisitor=zG;Jk.ReplaceVisitor=rv;Jk.ReplaceManyVisitor=Dx;var Nj=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/parser.js");
Nj.addSource=Kt;Nj.nodesAt=function(e,h){h="string"===typeof h?this.parse(h):h;return Nj.findNodesIncluding(h,e)};Nj.parseFunction=sq;Nj.fuzzyParse=tq;Nj.acornParseAsyncAware=function(e,h){var l="async () => {\n".concat(e,"\n}");if(h.onComment){var b=h.onComment;h.onComment=function(g,a,d,f,k,n){return b.call(this,g,a,d-14,f-14,k,n)}}l=Nj.acorn.parse(l,h);if(l.loc)var c=l.loc.constructor;l={body:l.body[0].expression.body.body,sourceType:"module",type:"Program"};Nj.AllNodesVisitor.run(l,function(g,
a,d){if(!g._positionFixed){g._positionFixed=!0;if(g.start||0===g.start)g.start-=14,g.end-=14;g.loc&&c&&(d=g.loc,a=d.start,d=d.end,g.loc=new c(h,{column:a.column,line:a.line-1},{column:d.column,line:d.line-1}));h.addSource&&!g.source&&(g.source=e.slice(g.start,g.end))}});l.start=l.body[0].start;l.end=Nj.arr.last(l.body).end;h.addSource&&(l.source=e);l.body[0].loc&&c&&(l.loc=new c(h,l.body[0].loc.start,Nj.arr.last(l.body).loc.end));return l};Nj.parse=Cl;Nj.arr=aj;Nj.acorn=Ax;Nj.loose=qG;Nj.walk=Ir;
Nj.addAstIndex=$q;Nj.findNodesIncluding=Zq;Nj.custom=mv;Nj.AllNodesVisitor=Cx;Nj.walk=Ir;Nj.parse=Cl;Nj.parseFunction=sq;Nj.fuzzyParse=tq;Nj.addSource=Kt;Nj.custom.addSource=Nj.addSource;var wj=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitor-interface.js");wj.string=Xj;wj.Path=qj;wj.BaseVisitor=Vn;wj.PrinterVisitor=nG;wj.ComparisonVisitor=oG;wj.stringify=Bl;wj.addAstIndex=$q;wj.parse=Cl;wj.addSource=Kt;wj.methods={withMozillaAstDo:function(e,h,l){var b=new wj.BaseVisitor,
c=b.accept;b.accept=function(g,a,d){h=l(function(){c.call(b,g,a,d)},g,a,d);return g};b.accept(e,h,[]);return h},printAst:function(e,h){h=h||{};var l=h.printSource||!1,b=h.printPositions||!1,c=h.printIndex||!1,g=[];if("string"===typeof e){var a=e;e=wj.parse(e)}else a=h.source||e.source;l&&!e.source&&(a||(a=wj.stringify(e),e=wj.parse(a)),wj.addSource(e,a));(new wj.PrinterVisitor).accept(e,{index:0,tree:g},[]);return wj.string.printTree(g[0],function(d){var f=d.path+":"+d.node.type,k=[];c&&k.push(d.index);
b&&k.push(d.node.start+"-"+d.node.end);l&&(d=d.node.source||a.slice(d.node.start,d.node.end),d=wj.string.print(d.truncate(60).replace(/\n/g,"").replace(/\s+/g," ")),k.push(d));k.length&&(f+="("+k.join(",")+")");return f},function(d){return d.children},"  ")},compareAst:function(e,h){if(!e||!h)throw Error("node"+(e?"1":"2")+" not defined");var l={completePath:[],comparisons:{errors:[]}};(new wj.ComparisonVisitor).accept(e,h,l,[]);return l.comparisons.errors.length?l.comparisons.errors.pluck("msg"):
null},pathToNode:function(e,h,l){e.astIndex||wj.addAstIndex(e);l=new wj.BaseVisitor;var b=null;(l.accept=function(c,g,a,d){if(!b)return g=g.concat(d),c.astIndex===h&&(b={pathString:g.map(function(f){return"string"===typeof f?"."+f:"["+f+"]"}).join(""),path:g,node:c}),this["visit"+c.type](c,g,a,d)}).call(l,e,[],{},[]);return b},rematchAstWithSource:function(e,h,l,b){l=!!l;h=wj.parse(h,l?{locations:!0}:void 0);var c=new wj.BaseVisitor;b&&(h=wj.Path(b).get(h));c.accept=function(g,a,d){d=d||[];var f=
d.reduce(function(k,n){return k[n]},e);f.start=g.start;f.end=g.end;l&&(f.loc=g.loc);return this["visit"+g.type](g,a,d)};c.accept(h)}};wj.withMozillaAstDo=wj.methods.withMozillaAstDo;wj.printAst=wj.methods.printAst;wj.compareAst=wj.methods.compareAst;wj.pathToNode=wj.methods.pathToNode;wj.rematchAstWithSource=wj.methods.rematchAstWithSource;var zx=wj.withMozillaAstDo,AG=wj.printAst,BG=wj.compareAst,CG=wj.pathToNode,DG=wj.rematchAstWithSource;wj.BaseVisitor=Vn;wj.withMozillaAstDo=zx;wj.printAst=AG;
wj.compareAst=BG;wj.pathToNode=CG;wj.rematchAstWithSource=DG;var Zh=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/nodes.js");Zh.isIdentifier=Jv;Zh.id=as;Zh.literal=bs;Zh.exprStmt=uq;Zh.sqncExpr=cs;Zh.returnStmt=ar;Zh.empty=ds;Zh.binaryExpr=Lt;Zh.funcExpr=es;Zh.funcCall=Cp;Zh.varDecl=br;Zh.member=fs;Zh.memberChain=Mt;Zh.assign=vq;Zh.block=Dp;Zh.program=Nt;Zh.tryStmt=gs;Zh.prop=Kv;Zh.objectLiteral=Lv;Zh.ifStmt=Ot;Zh.forIn=Pt;Zh.conditional=Qt;Zh.logical=Mv;Zh.identifierRe=/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;
Zh.isIdentifier=Jv;Zh.id=as;Zh.literal=bs;Zh.objectLiteral=Lv;Zh.prop=Kv;Zh.exprStmt=uq;Zh.returnStmt=ar;Zh.empty=ds;Zh.sqncExpr=cs;Zh.binaryExpr=Lt;Zh.funcExpr=es;Zh.funcCall=Cp;Zh.varDecl=br;Zh.member=fs;Zh.memberChain=Mt;Zh.assign=vq;Zh.block=Dp;Zh.program=Nt;Zh.tryStmt=gs;Zh.ifStmt=Ot;Zh.forIn=Pt;Zh.conditional=Qt;Zh.logical=Mv;var it=Object.freeze({__proto__:null,isIdentifier:Jv,id:as,literal:bs,objectLiteral:Lv,prop:Kv,exprStmt:uq,returnStmt:ar,empty:ds,sqncExpr:cs,binaryExpr:Lt,funcExpr:es,
funcCall:Cp,varDecl:br,member:fs,memberChain:Mt,assign:vq,block:Dp,program:Nt,tryStmt:gs,ifStmt:Ot,forIn:Pt,conditional:Qt,logical:Mv});bd("aL",it);var Lg=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/query.js");Lg.scopes=Rt;Lg.nodesAtIndex=St;Lg.scopesAtIndex=Tt;Lg.scopeAtIndex=Nv;Lg.scopesAtPos=hs;Lg.nodesInScopeOf=Ut;Lg.declarationsOfScope=Ov;Lg.declarationsWithIdsOfScope=function(e){var h=Lg.arr.compact(Lg.helpers.declIds(e.params).concat(e.catches)),l=[].concat(db(e.node.id&&e.node.id.name?
[e.node]:[]),db(e.funcDecls.filter(function(b){return b.id})),db(e.classDecls.filter(function(b){return b.id})));return h.map(function(b){return[b,b]}).concat(l.map(function(b){return[b,b.id]})).concat(Lg.helpers.varDecls(e)).concat(e.importSpecifiers.map(function(b){return[Lg.statementOf(e.node,b),b]}))};Lg._declaredVarNames=Pv;Lg._findJsLintGlobalDeclarations=Qv;Lg.topLevelFuncDecls=is;Lg.resolveReference=Rv;Lg.resolveReferences=Vt;Lg.refWithDeclAt=Sv;Lg.topLevelDeclsAndRefs=Il;Lg.findGlobalVarRefs=
Wt;Lg.findNodesIncludingLines=Xt;Lg.__varDeclIdsFor=function(e,h){var l=[],b=fa(e.params),c;try{for(b.s();!(c=b.n()).done;){var g=c.value;g.name===h&&l.push(g)}}catch(n){b.e(n)}finally{b.f()}b=fa(e.funcDecls);var a;try{for(b.s();!(a=b.n()).done;)g=a.value,g.id&&g.id.name===h&&l.push(g.id)}catch(n){b.e(n)}finally{b.f()}a=fa(e.classDecls);var d;try{for(a.s();!(d=a.n()).done;)g=d.value,g.id&&g.id.name===h&&l.push(g.id)}catch(n){a.e(n)}finally{a.f()}d=fa(e.importSpecifiers);var f;try{for(d.s();!(f=d.n()).done;)g=
f.value,g.name===h&&l.push(g)}catch(n){d.e(n)}finally{d.f()}e=fa(Lg.helpers.varDeclIds(e));var k;try{for(e.s();!(k=e.n()).done;)g=k.value,g.name===h&&l.push(g)}catch(n){e.e(n)}finally{e.f()}return l};Lg.findReferencesAndDeclsInScope=cr;Lg.findDeclarationClosestToIndex=Tv;Lg.nodesAt=dr;Lg.statementOf=ho;Lg.imports=js;Lg.exports=ks;Lg.arr=aj;Lg.num=Gm;Lg.tree=Er;Lg.fun=cp;Lg.BaseVisitor=Vn;Lg.ScopeVisitor=pG;Lg.FindToplevelFuncDeclVisitor=zG;Lg.withMozillaAstDo=zx;Lg.parse=Cl;Lg.custom=mv;Lg.stringify=
Bl;Lg.helpers={declIds:function(e){for(var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],l=0;l<e.length;l++){var b=e[l];if(b)if("Identifier"===b.type)h.push(b);else if("RestElement"===b.type)h.push(b.argument);else if("AssignmentPattern"===b.type)Lg.helpers.declIds([b.left],h);else if("ObjectPattern"===b.type)for(var c=0;c<b.properties.length;c++){var g=b.properties[c];Lg.helpers.declIds([g.value||g],h)}else"ArrayPattern"===b.type&&Lg.helpers.declIds(b.elements,h)}return h},varDecls:function(e){var h=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],l=fa(e.varDecls),b;try{for(l.s();!(b=l.n()).done;){var c=fa(b.value.declarations),g;try{for(c.s();!(g=c.n()).done;){var a=g.value,d=fa(Lg.helpers.declIds([a.id])),f;try{for(d.s();!(f=d.n()).done;)h.push([a,f.value])}catch(k){d.e(k)}finally{d.f()}}}catch(k){c.e(k)}finally{c.f()}}}catch(k){l.e(k)}finally{l.f()}return h},varDeclIds:function(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],l=fa(e.varDecls),b;try{for(l.s();!(b=
l.n()).done;){var c=fa(b.value.declarations),g;try{for(c.s();!(g=c.n()).done;)Lg.helpers.declIds([g.value.id],h)}catch(a){c.e(a)}finally{c.f()}}}catch(a){l.e(a)}finally{l.f()}return h},objPropertiesAsList:function(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],c=fa(e.properties),g;try{for(c.s();!(g=c.n()).done;){var a=g.value,d=a.key.name,f={key:h.concat([d]),value:a.value};switch(a.value.type){case "ArrayExpression":case "ArrayPattern":l||b.push(f);for(var k=0;k<a.value.elements.length;k++)Lg.helpers.objPropertiesAsList(a.value.elements[k],
h.concat([d,k]),l,b);break;case "ObjectExpression":case "ObjectPattern":l||b.push(f);Lg.helpers.objPropertiesAsList(a.value,h.concat([d]),l,b);break;case "AssignmentPattern":l||b.push(f);Lg.helpers.objPropertiesAsList(a.left,h.concat([d]),l,b);break;default:b.push(f)}}}catch(n){c.e(n)}finally{c.f()}return b},isDeclaration:function(e){return"FunctionDeclaration"===e.type||"VariableDeclaration"===e.type||"ClassDeclaration"===e.type}};Lg.knownGlobals="closed true false null undefined arguments Object Function Array Number parseFloat parseInt Infinity NaN Boolean String Symbol Date Promise RegExp Error EvalError RangeError ReferenceError SyntaxError TypeError URIError JSON Math console ArrayBuffer Uint8Array Int8Array Uint16Array Int16Array Uint32Array Int32Array Float32Array Float64Array Uint8ClampedArray DataView Map Set WeakMap WeakSet Proxy Reflect decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape eval isFinite isNaN Intl navigator window document Blob setTimeout clearTimeout setInterval clearInterval requestAnimationFrame cancelAnimationFrame btoa atob sessionStorage localStorage $world lively System customElements performance addEventListener closed".split(" ");
Lg.globalDeclRe=/^\s*global\s*/;Lg._stmtTypes="EmptyStatement BlockStatement ExpressionStatement IfStatement BreakStatement ContinueStatement WithStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement ForOfStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration ImportDeclaration ImportDeclaration ExportNamedDeclaration ExportDefaultDeclaration ExportAllDeclaration".split(" ");var EG=Lg.helpers,eS=Lg.knownGlobals;
Lg.helpers=EG;Lg.knownGlobals=eS;Lg.scopes=Rt;Lg.nodesAtIndex=St;Lg.scopesAtIndex=Tt;Lg.scopeAtIndex=Nv;Lg.scopesAtPos=hs;Lg.nodesInScopeOf=Ut;Lg.declarationsOfScope=Ov;Lg._declaredVarNames=Pv;Lg._findJsLintGlobalDeclarations=Qv;Lg.topLevelDeclsAndRefs=Il;Lg.topLevelFuncDecls=is;Lg.findGlobalVarRefs=Wt;Lg.findNodesIncludingLines=Xt;Lg.findReferencesAndDeclsInScope=cr;Lg.findDeclarationClosestToIndex=Tv;Lg.nodesAt=dr;Lg.statementOf=ho;Lg.resolveReferences=Vt;Lg.refWithDeclAt=Sv;Lg.imports=js;Lg.exports=
ks;var jt=Object.freeze({__proto__:null,helpers:EG,knownGlobals:eS,scopes:Rt,nodesAtIndex:St,scopesAtIndex:Tt,scopeAtIndex:Nv,scopesAtPos:hs,nodesInScopeOf:Ut,declarationsOfScope:Ov,_declaredVarNames:Pv,_findJsLintGlobalDeclarations:Qv,topLevelDeclsAndRefs:Il,topLevelFuncDecls:is,findGlobalVarRefs:Wt,findNodesIncludingLines:Xt,findReferencesAndDeclsInScope:cr,findDeclarationClosestToIndex:Tv,nodesAt:dr,statementOf:ho,resolveReferences:Vt,refWithDeclAt:Sv,imports:js,exports:ks});bd("aK",jt);var Ko=
window.lively.FreezerRuntime.recorderFor("lively.ast/lib/object-spread-transform.js");Ko.objectSpreadTransform=Jo;Ko.Visitor=Vn;Ko.funcCall=Cp;Ko.member=fs;var Y1=function(e){function h(){Sd(this,h);return l.apply(this,arguments)}vd(h,e);var l=qb(h);uc(h,[{key:"accept",value:function(b,c,g){"ObjectExpression"===b.type&&(b=this.transformSpreadElement(b));return ic(Ed(h.prototype),"accept",this).call(this,b,c,g)}},{key:"transformSpreadElement",value:function(b){var c=[],g=[c];b.properties.forEach(function(a){"SpreadElement"!==
a.type?(a.shorthand=!1,c.push(a)):(g.push(a),c=[],g.push(c))});if(1===g.length)return b;c.length||g.pop();return Ko.funcCall.apply(Ko,[Ko.member("Object","assign")].concat(db(g.map(function(a){return"SpreadElement"===a.type?a.argument:{properties:a,type:"ObjectExpression"}}))))}}]);return h}(Ko.Visitor);Ko.ObjectSpreadTransformer=Y1;Ko["default"]=Jo;var Qg=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/transform.js");Qg._node2string=function(e){return e.source||Qg.stringify(e)};Qg._findIndentAt=
function(e,h){var l=Qg.string.peekLeft(e,h,/\s+$/);e="number"===typeof l?e.slice(l,h):"";"\n"===e[0]&&(e=e.slice(1));return e};Qg._applyChanges=function(e,h){for(var l=0;l<e.length;l++){var b=e[l];if("del"===b.type)h=h.slice(0,b.pos)+h.slice(b.pos+b.length);else if("add"===b.type)h=h.slice(0,b.pos)+b.string+h.slice(b.pos);else throw Error("Unexpected change "+Qg.obj.inspect(b));}return h};Qg._compareNodesForReplacement=Uv;Qg.replaceNode=Vv;Qg.replaceNodes=Yt;Qg.replace=nm;Qg.__findVarDecls=Zt;Qg.oneDeclaratorPerVarDecl=
ls;Qg.oneDeclaratorForVarsInDestructoring=$t;Qg.returnLastStatement=Wv;Qg.wrapInFunction=au;Qg.wrapInStartEndCall=Xv;Qg.transformSingleExpression=Yv;Qg.arr=aj;Qg.obj=bj;Qg.string=Xj;Qg.Path=qj;Qg.helpers=EG;Qg.scopes=Rt;Qg.topLevelFuncDecls=is;Qg.parse=Cl;Qg.fuzzyParse=tq;Qg.objectSpreadTransform=Jo;Qg.varDecl=br;Qg.memberChain=Mt;Qg.id=as;Qg.exprStmt=uq;Qg.funcCall=Cp;Qg.returnStmt=ar;Qg.tryStmt=gs;Qg.program=Nt;Qg.block=Dp;Qg.funcExpr=es;Qg.stringify=Bl;Qg.isProbablySingleExpressionRe=/^\s*(\{|function\s*\()/;
Qg.replaceNode=Vv;Qg.replaceNodes=Yt;Qg.replace=nm;Qg._compareNodesForReplacement=Uv;Qg.oneDeclaratorPerVarDecl=ls;Qg.oneDeclaratorForVarsInDestructoring=$t;Qg.returnLastStatement=Wv;Qg.wrapInFunction=au;Qg.wrapInStartEndCall=Xv;Qg.transformSingleExpression=Yv;Qg.objectSpreadTransform=Jo;var sv=Object.freeze({__proto__:null,replaceNode:Vv,replaceNodes:Yt,replace:nm,_compareNodesForReplacement:Uv,oneDeclaratorPerVarDecl:ls,oneDeclaratorForVarsInDestructoring:$t,returnLastStatement:Wv,wrapInFunction:au,
wrapInStartEndCall:Xv,transformSingleExpression:Yv,objectSpreadTransform:Jo});bd("bw",sv);var ui=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/comments.js");ui.getCommentPrecedingNode=Zv;ui.extractComments=$v;ui.obj=bj;ui.string=Xj;ui.Path=qj;ui.chain=jk;ui.arr=aj;ui.fun=cp;ui.parse=Cl;ui.statementOf=ho;ui.Visitor=Vn;ui.stringify=Bl;ui.getCommentPrecedingNode=Zv;ui.extractComments=$v;var FG=Object.freeze({__proto__:null,getCommentPrecedingNode:Zv,extractComments:$v}),Vi=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/code-categorizer.js");
Vi.findDecls=aw;Vi.es6ClassDef=function(e){var h;if("ClassDeclaration"!==e.type)return null;var l={type:"class-decl",name:e.id.name,node:e,children:[]};(h=l.children).push.apply(h,db(Vi.arr.compact(e.body.body.map(function(b,c){return Vi.es6ClassMethod(b,l,c)}))));return[l].concat(db(l.children))};Vi.es6ClassMethod=function(e,h,l){if("MethodDefinition"!==e.type)return null;var b;"constructor"===e.kind?b="class-constructor":"method"===e.kind?b=e["static"]?"class-class-method":"class-instance-method":
"get"===e.kind?b=e["static"]?"class-class-getter":"class-instance-getter":"set"===e.kind&&(b=e["static"]?"class-class-setter":"class-instance-setter");return"class-instance-getter"===b&&"commands"===e.key.name?Vi.parseCommandsMethod(e,h,b):"class-class-getter"===b&&"properties"===e.key.name?Vi.parsePropertiesMethod(e,h,b):b?{type:b,parent:h,node:e,name:e.key.name}:null};Vi.parsePropertiesMethod=function(e,h,l){var b={type:l,parent:h,node:e,name:e.key.name};try{var c=[];b.node.value.body.body[0].argument.properties.forEach(function(g){c.push({type:g.type,
parent:b,node:g,name:g.key?g.key.name:g.argument.arguments[0].value})});b.children=c}finally{return b}};Vi.parseCommandsMethod=function(e,h,l){var b={type:l,parent:h,node:e,name:e.key.name};try{var c=[];if(b.node.value.body.body){var g=b.node.value.body.body[0].argument.elements;g&&(g.forEach(function(a){c.push({type:a.type,parent:b,node:a,name:a.properties[0].value.value})}),b.children=c)}}finally{return b}};Vi.varDefs=function(e){if("VariableDeclaration"!==e.type)return null;var h=[];e=fa(Vi.withVarDeclIds(e));
var l;try{var b=function(){var c=l.value,g={name:c.id.name,node:c.node,type:"var-decl"};h.push(g);if(!g.node.init)return"continue";for(c=g.node.init;"AssignmentExpression"===c.type;)c=c.right;if("ObjectExpression"===c.type)return g.type="object-decl",g.children=Vi.objectKeyValsAsDefs(c).map(function(a){return Object.assign({},a,{type:"object-"+a.type,parent:g})}),h.push.apply(h,db(g.children)),"continue";if("ArrayExpression"===c.type){g.type="array-decl";try{g.children=Vi.arrayEntriesAsDefs(c).map(function(a){return Object.assign({},
a,{type:"object-"+a.type,parent:g})}),h.push.apply(h,db(g.children))}finally{return"continue"}}if(c=Vi.someObjectExpressionCall(c,g))g.children=c.map(function(a){return Object.assign({},a,{parent:g})}),h.push.apply(h,db(g.children))};for(e.s();!(l=e.n()).done;)b()}catch(c){e.e(c)}finally{e.f()}return h};Vi.funcDef=function(e){return"FunctionStatement"!==e.type&&"FunctionDeclaration"!==e.type||!e.id?null:[{name:e.id.name,node:e,type:"function-decl"}]};Vi.someObjectExpressionCall=function(e,h){"ExpressionStatement"===
e.type&&(e=e.expression);return"CallExpression"!==e.type?null:(e=e.arguments.find(function(l){return"ObjectExpression"===l.type}))?Vi.objectKeyValsAsDefs(e,h):null};Vi.parseDescribeBlock=bw;Vi.describe=function(e){if("ExpressionStatement"!==e.type||e.expression&&"describe"!==Vi.Path("expression.callee.name").get(e)&&"xdescribe"!==Vi.Path("expression.callee.name").get(e))return null;var h={name:e.expression.arguments[0].value,node:e,type:e.expression.callee.name};h.children=Vi.parseDescribeBlock(e);
return[h]};Vi.functionWrapper=function(e,h){if(!Vi.isFunctionWrapper(e))return null;var l=Vi.Path("expression.arguments.0").get(e);h=l&&"FunctionExpression"===l.type&&5<Vi.string.lines(l.source||"").length?Vi.findDecls(l,h):Vi.findDecls(Vi.Path("expression.callee").get(e),h);var b={node:e,name:Vi.Path("expression.callee.id.name").get(e)};h.forEach(function(c){return c.parent||(c.parent=b)});return h};Vi.unwrapExport=function(e){return"ExportNamedDeclaration"!==e.type&&"ExportDefaultDeclaration"!==
e.type||!e.declaration?e:e.declaration};Vi.objectKeyValsAsDefs=function(e,h){return e.properties.map(function(l){return{name:l.key.name||l.key.value,type:"FunctionExpression"===l.value.type?"method":"property",node:l,parent:h}})};Vi.arrayEntriesAsDefs=function(e,h){return e.elements.map(function(l){return{name:l.value||l.properties[0].value.value,type:l.type,node:l,parent:h}})};Vi.isFunctionWrapper=function(e){return"CallExpression"===Vi.Path("expression.type").get(e)&&"FunctionExpression"===Vi.Path("expression.callee.type").get(e)};
Vi.declIds=er;Vi.withVarDeclIds=function(e){return e.declarations.map(function(h){!h.source&&h.init&&(h.source=h.id.name+" = "+h.init.source);return{node:h,id:h.id}})};Vi.parse=Cl;Vi.arr=aj;Vi.Path=qj;Vi.string=Xj;Vi.obj=bj;Vi.findDecls=aw;var Ex=Object.freeze({__proto__:null,findDecls:aw});bd("bW",Ex);var Qj=window.lively.FreezerRuntime.recorderFor("lively.ast/index.js");Qj.isValidIdentifier=ms;Qj.BaseVisitor=Vn;Qj.withMozillaAstDo=zx;Qj.printAst=AG;Qj.compareAst=BG;Qj.pathToNode=CG;Qj.rematchAstWithSource=
DG;Qj.ReplaceManyVisitor=Dx;Qj.ReplaceVisitor=rv;Qj.AllNodesVisitor=Cx;Qj.parse=Cl;Qj.parseFunction=sq;Qj.fuzzyParse=tq;Qj.acorn=Ax;Qj.walk=Ir;Qj.custom=mv;Qj.stringify=Bl;Qj.escodegen=ux;Qj.escodegen=ux;Qj.acorn=Ax;Qj.walk=Ir;Qj.nodes=it;Qj.query=jt;Qj.transform=sv;Qj.comments=FG;Qj.categorizer=Ex;Qj.query=jt;Qj.transform=sv;Qj.comments=FG;Qj.categorizer=Ex;Qj.stringify=Bl;Qj.nodes=it;Qj.custom=mv;Qj.isValidIdentifierRe=/^(?!(?:do|if|in|for|let|new|try|var|case|default|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/;
Qj.isValidIdentifier=ms;Qj.parse=Cl;Qj.Node=Qj.parse("").constructor;Object.defineProperty(Qj.Node.prototype,"__serialize__",{configurable:!0,value:function(){return{__expr__:"("+JSON.stringify(this)+")"}}});var fS=Object.freeze({__proto__:null,BaseVisitor:Vn,withMozillaAstDo:zx,printAst:AG,compareAst:BG,pathToNode:CG,rematchAstWithSource:DG,ReplaceManyVisitor:Dx,ReplaceVisitor:rv,AllNodesVisitor:Cx,parse:Cl,parseFunction:sq,fuzzyParse:tq,escodegen:ux,acorn:Ax,walk:Ir,query:jt,transform:sv,comments:FG,
categorizer:Ex,stringify:Bl,nodes:it,custom:mv,isValidIdentifier:ms});bd("q",fS);var Zj=window.lively.FreezerRuntime.recorderFor("lively.vm/lib/util.js");Zj.getGlobal=io;Zj.signatureOf=bu;Zj.isClass=Gy;Zj.pluck=cw;Zj.printSymbol=dw;Zj.safeToString=cu;Zj.printEvalResult=fr;Zj.obj=bj;Zj.string=Xj;Zj.getGlobal=io;Zj.signatureOf=bu;Zj.isClass=Gy;Zj.pluck=cw;Zj.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(e){return"symbol"===ad(Symbol[e])}).reduce(function(e,h){return e.set(Symbol[h],
"Symbol."+h)},new Map)}();Zj.symMatcher=/^Symbol\((.*)\)$/;Zj.printSymbol=dw;Zj.safeToString=cu;Zj.printEvalResult=fr;var gS=function(){function e(c,g){"object"===ad(g)&&(g=g.maxDepth||2);if(!c)return String(c);if("string"===typeof c)return g=c.includes("\n")?"`":'"',c=c.split("\n").slice(0,1E3).join("\n"),g+c+g;if(c instanceof Error)return c.stack||Zj.safeToString(c);if(!Zj.obj.isObject(c))return Zj.safeToString(c);try{var a=Zj.obj.inspect(c,{customPrinter:l,maxNumberOfKeys:100,maxDepth:g,printFunctionSource:!0})}catch(d){}return"{}"===
a?Zj.safeToString(c):a}function h(c,g){if("string"===typeof c||Array.isArray(c)||!b||"function"!==typeof c[b])return g;var a="function"===typeof c.entries,d=a?c.entries():c[b](),f=[];g=a?"{":"[";var k=a?"}":"]";c=c.constructor&&c.constructor.name||"Iterable";for(var n=0,p;10>n;n++){p=d.next();if(p.done)break;f.push(p.value)}d=f.map(function(q){return a?"".concat(String(q[0]),": ").concat(String(q[1])):e(q,2)}).join(", ");return"".concat(c,"(").concat(g).concat(d).concat(k,")")}function l(c,g,a){if(!c)return g;
if("symbol"===ad(c))return Zj.printSymbol(c);if("string"===typeof c)return Zj.string.print(Zj.string.truncate(c,100));if(c.isMorph)return Zj.safeToString(c);if(c instanceof Promise)return"Promise()";if("undefined"!==typeof Node&&c instanceof Node||"undefined"!==typeof ImageData&&c instanceof ImageData)return Zj.safeToString(c);var d=c.length||c.byteLength;if(void 0!==d&&10<d&&c.slice)return"["+("string"===typeof c||c.byteLength?Zj.safeToString(c.slice(0,10)):c.slice(0,10).map(a))+",...]";c=h(c,g);
return c!==g?c:g}var b="undefined"!==typeof Symbol&&Symbol.iterator;return e}();Zj.printInspectEvalValue=gS;Zj.printInspectEvalValue=gS;var Wj=window.lively.FreezerRuntime.recorderFor("lively.vm/lib/completions.js");Wj.getObjectForCompletion=ew;Wj.propertyExtract=function(e,h,l){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h).map(Wj.printSymbol)).filter(function(b){return-1===e.indexOf(b)}).map(l).filter(function(b){return!!b}).sort(function(b,c){return b.name<c.name?-1:
b.name>c.name?1:0})};Wj.getMethodsOf=function(e,h){return Wj.propertyExtract(e,h,function(l){return h.__lookupGetter__&&h.__lookupGetter__(l)||"function"!==typeof h[l]?null:{name:l,completion:Wj.signatureOf(l,h[l])}})};Wj.getAttributesOf=function(e,h){return Wj.propertyExtract(e,h,function(l){return h.__lookupGetter__&&!h.__lookupGetter__(l)&&"function"===typeof h[l]?null:{name:l,completion:l}})};Wj.getProtoChain=function(e){for(var h=[];e;)h.push(e),e=e.__proto__;return h};Wj.getDescriptorOf=function(e,
h){function l(b,c){b.length>c&&(b=b.slice(0,c)+"...");return b.replace(/\n/g,"").replace(/\s+/g," ")}if(e===h){if("function"!==typeof e)return l(Wj.safeToString(e),50);h=e.toString();h=l(h.slice(h.indexOf("{")+1,h.lastIndexOf("}")),50);return Wj.signatureOf(e.displayName||e.name||"function",e)+" {"+h+"}"}return(e=h.hasOwnProperty("constructor")&&h.constructor)?"string"===typeof e.type&&e.type.length?l(e.type,50):"string"===typeof e.name&&e.name.length?l(e.name,50):"anonymous class":"prototype"};Wj.getCompletionsOfObj=
function(e,h){try{var l=[];var b=Wj.getProtoChain(e).map(function(g){var a=Wj.getDescriptorOf(e,g);g=Wj.getMethodsOf(l,g).concat(Wj.getAttributesOf(l,g));l=l.concat(Wj.pluck(g,"name"));return[a,Wj.pluck(g,"completion")]})}catch(g){var c=g}h(c,b)};Wj.descriptorsOfObjAndProtoProperties=function(e){var h=[];return Wj.getProtoChain(e).map(function(l){var b=Wj.getDescriptorOf(e,l);l=Wj.getMethodsOf(h,l).concat(Wj.getAttributesOf(h,l));h=h.concat(Wj.pluck(l,"name"));return[b,Wj.pluck(l,"completion")]})};
Wj.getCompletions=fw;Wj.lang=ZQ;Wj.signatureOf=bu;Wj.pluck=cw;Wj.safeToString=cu;Wj.printSymbol=dw;Wj.getObjectForCompletion=ew;Wj.getCompletions=fw;var zA=Object.freeze({__proto__:null,getObjectForCompletion:ew,getCompletions:fw});bd("aw",zA);var ee=window.lively.FreezerRuntime.recorderFor("lively.source-transform/capturing.js");ee.rewriteToCaptureTopLevelVariables=du;ee.removeJspmGlobalRef=function(e){var h=!1;return ee.ReplaceVisitor.run(e,function(l){h||"VariableDeclarator"!=l.type||"_global"!=
l.id.name||(h='_global = typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : global'==ee.stringify(l));return h&&"LogicalExpression"==l.type&&"_global"==l.right.name?l.left:l})};ee.transformImportMeta=function(e,h){return ee.ReplaceVisitor.run(e,function(l){return"MetaProperty"==l.type&&"import"==l.meta.name?h.classToFunction.currentModuleAccessor?ee.nodes.objectLiteral(["url",ee.nodes.member(h.classToFunction.currentModuleAccessor,"id")]):ee.parse('({url: eval("_context").id})').body[0].expression:
l})};ee.rewriteToRegisterModuleToCaptureSetters=gw;ee.clearEmptyExports=function(e,h){h=ee.topLevelDeclsAndRefs(e);h=fa(h.scope.exportDecls);var l;try{for(h.s();!(l=h.n()).done;){var b=l.value;b.declaration||!b.specifiers||b.specifiers.length||ee.arr.remove(e.body,b)}}catch(c){h.e(c)}finally{h.f()}return e};ee.replaceRefs=function(e,h){var l=ee.topLevelDeclsAndRefs(e),b=l.refs.filter(function(a){return ee.shouldRefBeCaptured(a,l,h)}),c=[],g=0;e=ee.ReplaceVisitor.run(e,function(a,d){if("Property"===
a.type&&b.includes(a.key)&&a.shorthand)return ee.prop(ee.id(a.key.name),a.value);if("ExportNamedDeclaration"===a.type){d=a.declaration;var f=a.specifiers;d&&(d.id?c.push(d.id):d.declarations&&c.push.apply(c,db(d.declarations.map(function(n){return n.id}))));f&&f.forEach(function(n){return c.push(n.local)});return a}if("AssignmentExpression"===a.type&&b.includes(a.left)&&h.declarationWrapper)return Object.assign({},a,{right:ee.declarationWrapperCall(h.declarationWrapper,null,ee.literal(a.left.name),
ee.literal("assignment"),a.right,h.captureObj,h)});if("AssignmentExpression"===a.type&&"ObjectPattern"===a.left.type){var k=ee.id("__inter".concat(g++,"__"));return(f=ee.nodes).sqncExpr.apply(f,[ee.assign(ee.member(h.captureObj,k),a.right)].concat(db(a.left.properties.map(function(n){return ee.assign(n.value||n.key,ee.member(ee.member(h.captureObj,k),n.key))}))))}return a});return ee.ReplaceVisitor.run(e,function(a,d,f){return b.includes(a)&&!c.includes(a)?ee.member(h.captureObj,a):a})};ee.replaceVarDecls=
function(e,h){var l=ee.topLevelDeclsAndRefs(e);return ee.ReplaceManyVisitor.run(e,function(b){if(!l.varDecls.includes(b)||b.declarations.every(function(n){return!ee.shouldDeclBeCaptured(n,h)}))return b;for(var c=[],g=0;g<b.declarations.length;g++){var a=b.declarations[g];if(ee.shouldDeclBeCaptured(a,h)){var d=a.init||{operator:"||",type:"LogicalExpression",left:{computed:!1,object:h.captureObj,property:a.id,type:"MemberExpression"},right:{name:"undefined",type:"Identifier"}};d=h.declarationWrapper&&
a.id.name?ee.declarationWrapperCall(h.declarationWrapper,a,ee.literal(a.id.name),ee.literal(b.kind),d,h.captureObj,h):d;if(a.id.type.includes("Pattern")){var f=ee.generateUniqueName(l.declaredNames,"destructured_1"),k={type:"Identifier",name:f};a=ee.transformPattern(a.id,{parent:k,declaredNames:l.declaredNames}).map(function(n){return n[ee.annotationSym]&&n[ee.annotationSym].capture?ee.assignExpr(h.captureObj,n.declarations[0].id,h.declarationWrapper?ee.declarationWrapperCall(h.declarationWrapper,
null,ee.literal(n.declarations[0].id.name),ee.literal(b.kind),n.declarations[0].init,h.captureObj,h):n.declarations[0].init,!1):n});l.declaredNames.push(f);c.push.apply(c,db([ee.varDecl(k,d,b.kind)].concat(a)))}else c.push(ee.assignExpr(h.captureObj,a.id,d,!1)),h.keepTopLevelVarDecls&&c.push(ee.varDecl(a.id,ee.member(h.captureObj,a.id)))}else c.push({type:"VariableDeclaration",kind:b.kind||"var",declarations:[a]})}return c})};ee.generateUniqueName=function(e,h){for(var l=1;-1<e.indexOf(h);){if(1E3<
l)throw Error("Endless loop searching for unique variable "+h);h=h.replace(/_[0-9]+$|$/,"_"+ ++l)}return h};ee.additionalIgnoredDecls=function(e,h){h=ee.topLevelDeclsAndRefs(e);for(var l=[],b=0;b<h.scope.varDecls.length;b++){var c=h.scope.varDecls[b],g=ee.Path(h.scope.varDeclPaths[b]).slice(0,-1).get(e);"ForStatement"!==g.type&&"ForInStatement"!==g.type&&"ForOfStatement"!==g.type&&"ExportNamedDeclaration"!==g.type||l.push.apply(l,db(c.declarations))}return h.scope.catches.map(function(a){return a.name}).concat(l.map(function(a){return a.id.name}))};
ee.additionalIgnoredRefs=function(e,h){h=ee.topLevelDeclsAndRefs(e);for(var l=[],b=0;b<h.scope.varDecls.length;b++){var c=h.scope.varDecls[b],g=ee.Path(h.scope.varDeclPaths[b]).slice(0,-1).get(e);"ForStatement"!==g.type&&"ForInStatement"!==g.type&&"ForOfStatement"!==g.type||l.push.apply(l,db(c.declarations))}return h.scope.catches.map(function(a){return a.name}).concat(ee.queryHelpers.declIds(l.map(function(a){return a.id})).map(function(a){return a.name}))};ee.shouldDeclBeCaptured=function(e,h){return-1===
h.excludeDecls.indexOf(e.id.name)&&(!h.includeDecls||-1<h.includeDecls.indexOf(e.id.name))};ee.shouldRefBeCaptured=function(e,h,l){if(h.scope.importSpecifiers.includes(e))return!1;for(var b=0;b<h.scope.exportDecls.length;b++){var c=h.scope.exportDecls[b];if(c.declarations&&c.declarations.includes(e)||c.declaration===e)return!1}return l.excludeRefs.includes(e.name)||l.includeRefs&&!l.includeRefs.includes(e.name)?!1:!0};ee.replaceClassDecls=function(e,h){if(h.classToFunction&&h.classToFunction.transform)return h.classToFunction.transform(e,
h.classToFunction);var l=ee.topLevelDeclsAndRefs(e);if(!l.classDecls.length)return e;for(var b=e.body.length-1;0<=b;b--){var c=e.body[b];c.id&&l.classDecls.includes(c)&&e.body.splice(b+1,0,ee.assignExpr(h.captureObj,c.id,c.id,!1))}return e};ee.splitExportDeclarations=function(e,h){h=e.body;for(var l=e.body=[],b=0;b<h.length;b++){var c=h[b];if("ExportNamedDeclaration"!==c.type||!c.declaration||"VariableDeclaration"!==c.declaration.type||1>=c.declaration.declarations.length)l.push(c);else for(var g=
c.declaration.declarations,a=0;a<g.length;a++)l.push({type:"ExportNamedDeclaration",specifiers:[],declaration:ee.varDecl(g[a].id,g[a].init,c.declaration.kind)})}return e};ee.insertCapturesForExportedImports=Lo;ee.insertCapturesForExportDeclarations=function(e,h){for(var l=[],b=0;b<e.body.length;b++){var c=e.body[b];l.push(c);if(("ExportNamedDeclaration"===c.type||"ExportDefaultDeclaration"===c.type)&&c.declaration)if("ExportDefaultDeclaration"===c.type&&"Literal"===c.declaration.type){var g=c.declaration;
g.raw;var a=ee.generateUniqueName(ee.topLevelDeclsAndRefs(e).declaredNames,"$"+g.raw.split('"').join(""));c.declaration=ee.id(a);ee.arr.pushAt(l,ee.assignExpr(h.captureObj,a,g.raw,!1),l.indexOf(c))}else c.declaration.declarations?l.push.apply(l,db(c.declaration.declarations.map(function(d){var f=d.id;h.declarationWrapper&&(d.init.callee&&d.init.callee.name===h.declarationWrapper.name||(f=ee.declarationWrapperCall(h.declarationWrapper,d,ee.literal(d.id.name),ee.literal("assignment"),d.id,h.captureObj,
h)));return ee.assignExpr(h.captureObj,d.id,f,!1)}))):"FunctionDeclaration"!==c.declaration.type&&"ClassDeclaration"===c.declaration.type&&l.push(ee.assignExpr(h.captureObj,c.declaration.id,c.declaration.id,!1))}e.body=l;return e};ee.insertCapturesForImportDeclarations=function(e,h){e.body=e.body.reduce(function(l,b){return l.concat("ImportDeclaration"===b.type&&b.specifiers.length?[b].concat(b.specifiers.map(function(c){return ee.assignExpr(h.captureObj,c.local,c.local,!1)})):[b])},[]);return e};
ee.insertDeclarationsForExports=function(e,h){for(var l=ee.topLevelDeclsAndRefs(e),b=[],c=0;c<e.body.length;c++){var g=e.body[c];"ExportDefaultDeclaration"!==g.type||!g.declaration||g.declaration.type.includes("Declaration")||"Identifier"!==g.declaration.type&&!g.declaration.id||l.declaredNames.includes(g.declaration.name)?"ExportNamedDeclaration"!==g.type||!g.specifiers.length||g.source?b.push(g):b=b.concat(g.specifiers.map(function(a){return l.declaredNames.includes(a.local.name)?null:ee.varDeclOrAssignment(e,
{type:"VariableDeclarator",id:a.local,init:ee.member(h.captureObj,a.local)})}).filter(Boolean)).concat(g):b=b.concat([ee.varDeclOrAssignment(e,{type:"VariableDeclarator",id:g.declaration,init:ee.member(h.captureObj,g.declaration)}),g])}e.body=b;return e};ee.fixDefaultAsyncFunctionExportForRegeneratorBug=function(e,h){h=[];for(var l=0;l<e.body.length;l++){var b=e.body[l];"ExportDefaultDeclaration"===b.type&&"FunctionDeclaration"===b.declaration.type&&b.declaration.id&&b.declaration.async&&(h.push(b.declaration),
b.declaration={type:"Identifier",name:b.declaration.id.name});h.push(b)}e.body=h;return e};ee.es6ModuleTransforms=function(e,h){e.body=e.body.reduce(function(l,b){if("ExportNamedDeclaration"===b.type)if(b.source){var c=a=b.source;var g=b.specifiers.map(function(d){return{type:"ExpressionStatement",expression:ee.exportFromImport({type:"Literal",value:d.exported.name},{type:"Literal",value:d.local.name},a,h.moduleExportFunc,h.moduleImportFunc)}})}else g=b.declaration?(g=b.declaration.declarations)?
g.map(function(d){h.excludeDecls.push(d.id);return ee.varDecl(d.id,ee.assignExpr(h.captureObj,d.id,h.declarationWrapper?ee.declarationWrapperCall(h.declarationWrapper,null,ee.literal(d.id.name),ee.literal(b.declaration.kind),d,h.captureObj,h):d.init,!1),b.declaration.kind)}).concat(g.map(function(d){return ee.exportCallStmt(h.moduleExportFunc,d.id.name,d.id)})):[b.declaration].concat(ee.exportCallStmt(h.moduleExportFunc,b.declaration.id.name,b.declaration.id)):b.specifiers.map(function(d){return ee.exportCallStmt(h.moduleExportFunc,
d.exported.name,ee.shouldDeclBeCaptured({id:d.local},h)?ee.member(h.captureObj,d.local):d.local)});else if("ExportDefaultDeclaration"===b.type)g=b.declaration&&b.declaration.id?[b.declaration].concat(ee.exportCallStmt(h.moduleExportFunc,"default",b.declaration.id)):[ee.exportCallStmt(h.moduleExportFunc,"default",b.declaration)];else if("ExportAllDeclaration"===b.type){c={name:h.es6ExportFuncId+"__iterator__",type:"Identifier"};var a=b.source;g=[{type:"ForInStatement",body:{type:"ExpressionStatement",
expression:ee.exportFromImport(c,c,a,h.moduleExportFunc,h.moduleImportFunc)},left:{type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:c,init:null}]},right:ee.importCall(null,a,h.moduleImportFunc)}];h.excludeRefs.push(c.name);h.excludeDecls.push(c.name)}else g="ImportDeclaration"===b.type?b.specifiers.length?b.specifiers.map(function(d){return ee.varDeclAndImportCall(e,d.local,"ImportSpecifier"===d.type&&d.imported.name||"ImportDefaultSpecifier"===d.type&&"default"||
null,b.source,h.moduleImportFunc)}):ee.importCallStmt(null,b.source,h.moduleImportFunc):[b];return l.concat(g)},[]);return e};ee.putFunctionDeclsInFront=function(e,h){var l=ee.topLevelDeclsAndRefs(e).scope,b=l.funcDecls;if(!b.length)return e;for(var c=[],g=b.length;g--;){var a=b[g];if(a.id&&ee.shouldDeclBeCaptured(a,h)){var d=l.funcDeclPaths[g].slice(0,-1),f=ee.Path(d).get(l.node);d={type:"Identifier",name:a.id.name};var k=h.declarationWrapper?ee.declarationWrapperCall(h.declarationWrapper,a,ee.literal(d.name),
ee.literal("function"),d,h.captureObj,h):d,n=Object.assign({},a);Array.isArray(f)?f.splice(f.indexOf(a),1,ee.exprStmt(a.id)):"ExportNamedDeclaration"===f.type?(f=l.node.body.indexOf(f),-1<f&&l.node.body.splice(f,1,{type:"ExportNamedDeclaration",specifiers:[{type:"ExportSpecifier",exported:a.id,local:a.id}]})):"ExportDefaultDeclaration"===f.type&&(f.declaration=a.id);c.unshift(ee.assignExpr(h.captureObj,d,k,!1));c.unshift(n)}}e.body=c.concat(e.body);return e};ee.computeDefRanges=function(e,h){e=ee.topLevelDeclsAndRefs(e);
return ee.chain(e.scope.varDecls).pluck("declarations").flat().value().concat(e.scope.funcDecls.filter(function(l){return l.id})).reduce(function(l,b){l[b.id.name]||(l[b.id.name]=[]);l[b.id.name].push({type:b.type,start:b.start,end:b.end});return l},{})};ee.transformPattern=function(e,h){return"ArrayPattern"===e.type?ee.transformArrayPattern(e,h):"ObjectPattern"===e.type?ee.transformObjectPattern(e,h):[]};ee.transformArrayPattern=function(e,h){for(var l=h.declaredNames,b=ee.annotationSym,c=[],g=0;g<
e.elements.length;g++){var a=e.elements[g];if("Identifier"===a.type)a=ee.varDecl(a,ee.member(h.parent,ee.id(g),!0)),a[b]={capture:!0},c.push(a);else if("RestElement"===a.type)a=ee.varDecl(a.argument,{type:"CallExpression",arguments:[{type:"Literal",value:g}],callee:ee.member(h.parent,ee.id("slice"),!1)}),a[b]={capture:!0},c.push(a);else if("AssignmentPattern"==a.type)a=ee.varDecl(a.left,ee.conditional(ee.binaryExpr(ee.member(h.parent,ee.id(g),!0),"===",ee.id("undefined")),a.right,ee.member(h.parent,
ee.id(g),!0))),a[b]={capture:!0},c.push(a);else{var d=ee.id(ee.generateUniqueName(l,h.parent.name+"$"+g)),f=ee.varDecl(d,ee.member(h.parent,g));l.push(d.name);c.push(f);c.push.apply(c,db(ee.transformPattern(a,{parent:d,declaredNames:l})))}}return c};ee.transformObjectPattern=function(e,h){for(var l=h.declaredNames,b=ee.annotationSym,c=[],g=0;g<e.properties.length;g++){var a=e.properties[g];if("RestElement"==a.type){var d,f=e.properties.map(function(p){return p.key&&p.key.name}).filter(Boolean),k=
ee.nodes.varDecl(a.argument.name,ee.nodes.objectLiteral([])),n=ee.nodes.varDecl(a.argument.name,ee.id(a.argument.name));a=ee.nodes.exprStmt(ee.nodes.funcCall(ee.nodes.funcExpr({},[],ee.nodes.forIn("__key",h.parent,(d=ee.nodes).block.apply(d,db(f.length?f.map(function(p){return ee.nodes.ifStmt(ee.nodes.binaryExpr(ee.nodes.id("__key"),"===",ee.nodes.literal(p)),{type:"ContinueStatement",label:null},null)}):[]).concat([ee.nodes.exprStmt(ee.nodes.assign(ee.nodes.member(a.argument.name,ee.nodes.id("__key"),
!0),ee.nodes.member(h.parent,ee.nodes.id("__key"),!0)))]))))));n[b]={capture:!0};c.push(k,n,a)}else"Identifier"==a.value.type?(k=ee.varDecl(a.value,ee.member(h.parent,a.key)),k[b]={capture:!0},c.push(k)):"AssignmentPattern"==a.value.type?(k=ee.varDecl(a.value.left,ee.conditional(ee.binaryExpr(ee.member(h.parent,a.key),"===",ee.id("undefined")),a.value.right,ee.member(h.parent,a.key))),k[b]={capture:!0},c.push(k)):(k=ee.id(ee.generateUniqueName(l,h.parent.name+"$"+a.key.name)),n=ee.varDecl(k,ee.member(h.parent,
a.key)),n[b]={capture:!1},l.push(k.name),c.push.apply(c,db([n].concat(ee.transformPattern(a.value,{parent:k,declaredNames:l})))))}return c};ee.varDeclOrAssignment=function(e,h,l){return-1<ee.topLevelDeclsAndRefs(e).declaredNames.indexOf(h.id.name)?ee.exprStmt(ee.assign(h.id,h.init)):{declarations:[h],kind:l||"var",type:"VariableDeclaration"}};ee.assignExpr=function(e,h,l,b){return ee.exprStmt(ee.assign(ee.member(e,h,b),l||ee.id("undefined")))};ee.exportFromImport=function(e,h,l,b,c){return ee.exportCall(b,
e,ee.importCall(h,l,c))};ee.varDeclAndImportCall=function(e,h,l,b,c){return ee.varDecl(h,ee.importCall(l,b,c))};ee.importCall=function(e,h,l){"string"===typeof e&&(e=ee.literal(e));return{arguments:[h].concat(e||[]),callee:l,type:"CallExpression"}};ee.importCallStmt=function(e,h,l){return ee.exprStmt(ee.importCall(e,h,l))};ee.exportCall=function(e,h,l){"string"===typeof h&&(h=ee.literal(h));l=ee.obj.deepCopy(l);return ee.funcCall(e,h,l)};ee.exportCallStmt=function(e,h,l){return ee.exprStmt(ee.exportCall(e,
h,l))};ee.declarationWrapperCall=function(e,h,l,b,c,g,a){if(h){var d=[],f=!1;if(h["x-lively-object-meta"]){f=h["x-lively-object-meta"];h=f.start;var k=f.end,n=f.evalId,p=f.sourceAccessorName;f=!0;d.push("start",ee.nodes.literal(h),"end",ee.nodes.literal(k))}void 0===n&&a.hasOwnProperty("evalId")&&(n=a.evalId,f=!0);void 0===p&&a.hasOwnProperty("sourceAccessorName")&&(p=a.sourceAccessorName,f=!0);void 0!==n&&d.push("evalId",ee.nodes.literal(n));p&&d.push("moduleSource",ee.nodes.id(p));if(f)return ee.funcCall(e,
l,b,c,g,ee.nodes.objectLiteral(d))}return ee.funcCall(e,l,b,c,g)};ee.obj=bj;ee.chain=jk;ee.arr=aj;ee.Path=qj;ee.parse=Cl;ee.stringify=Bl;ee.query=jt;ee.transform=sv;ee.nodes=it;ee.ReplaceManyVisitor=Dx;ee.ReplaceVisitor=rv;var ep=ee.nodes;ee.member=ep.member;ee.prop=ep.prop;ee.varDecl=ep.varDecl;ee.assign=ep.assign;ee.id=ep.id;ee.literal=ep.literal;ee.exprStmt=ep.exprStmt;ee.conditional=ep.conditional;ee.binaryExpr=ep.binaryExpr;ee.funcCall=ep.funcCall;ee.block=ep.block;var hS=ee.query;ee.topLevelDeclsAndRefs=
hS.topLevelDeclsAndRefs;ee.queryHelpers=hS.helpers;var iS=ee.transform;ee.transformSingleExpression=iS.transformSingleExpression;ee.wrapInStartEndCall=iS.wrapInStartEndCall;ee.rewriteToCaptureTopLevelVariables=du;ee.rewriteToRegisterModuleToCaptureSetters=gw;ee.insertCapturesForExportedImports=Lo;ee.annotationSym=Symbol("lively.ast-destructuring-transform");var AA=Object.freeze({__proto__:null,rewriteToCaptureTopLevelVariables:du,rewriteToRegisterModuleToCaptureSetters:gw,insertCapturesForExportedImports:Lo}),
Rj=window.lively.FreezerRuntime.recorderFor("lively.source-transform/index.js");Rj.ensureOptionalCatchBinding=function(){Rj.catchBinding&&("undefined"===typeof babel||babel.availablePlugins["optional-catch-binding"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("optional-catch-binding",Rj.catchBinding["default"]))};Rj.ensureImportMeta=function(){Rj.importMeta&&("undefined"===typeof babel||babel.availablePlugins["syntax-import-meta"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("syntax-import-meta",
Rj.importMeta["default"]))};Rj.stringifyFunctionWithoutToplevelRecorder=gr;Rj.es5Transpilation=am;Rj.ensureModuleMetaForComponentDefinition=hw;Rj.ensureComponentDescriptors=hr;Rj.parseFunction=sq;Rj.parse=Cl;Rj.stringify=Bl;Rj.ReplaceVisitor=rv;Rj.QueryReplaceManyVisitor=dS;Rj.catchBinding=se;Rj.importMeta=se;Rj.capturing=AA;Rj.topLevelDeclsAndRefs=Il;Rj.arr=aj;Rj.capturing=AA;Rj.stringifyFunctionWithoutToplevelRecorder=gr;Rj.es5Transpilation=am;Rj.ensureModuleMetaForComponentDefinition=hw;Rj.ensureComponentDescriptors=
hr;var Z1=Object.freeze({__proto__:null,capturing:AA,stringifyFunctionWithoutToplevelRecorder:gr,es5Transpilation:am,ensureModuleMetaForComponentDefinition:hw,ensureComponentDescriptors:hr});bd("c8",Z1);var Si=window.lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-support.js");Si.processInlineCodeTransformOptions=function(e,h){if(!e.comments)return h;e=e.comments.find(function(b){return b.text.startsWith("lively.vm ")});if(!e)return h;try{var l=eval("({"+e.text.slice(10)+"});");return Object.assign(h,
l)}catch(b){return h}};Si.evalCodeTransform=ir;Si.evalCodeTransformOfSystemRegisterSetters=ns;Si.copyProperties=function(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)).forEach(function(b){return-1===l.indexOf(b)&&Object.defineProperty(h,b,Object.getOwnPropertyDescriptor(e,b))})};Si.arr=aj;Si.Path=qj;Si.parse=Cl;Si.stringify=Bl;Si.transform=sv;Si.query=jt;Si.nodes=it;Si.capturing=AA;Si.es5Transpilation=am;Si.ensureComponentDescriptors=
hr;Si.getGlobal=io;var BA=Si.nodes;Si.id=BA.id;Si.literal=BA.literal;Si.member=BA.member;Si.objectLiteral=BA.objectLiteral;Si.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Si.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";var CA=bd("aW","initializeES6ClassForLively");Si.defaultClassToFunctionConverterName=CA;Si.defaultClassToFunctionConverterName=CA;Si.evalCodeTransform=ir;Si.evalCodeTransformOfSystemRegisterSetters=ns;var gj=window.lively.FreezerRuntime.recorderFor("lively.vm/lib/eval.js");
gj._normalizeEvalOptions=function(e){e||(e={});e=Object.assign({targetModule:null,sourceURL:e.targetModule,runtime:null,context:gj.getGlobal(),varRecorderName:gj.defaultTopLevelVarRecorderName,dontTransform:[],recordGlobals:null,returnPromise:!0,promiseTimeout:200,waitForPromise:!0,wrapInStartEndCall:!1,onStartEval:null,onEndEval:null},e);if(e.targetModule){var h=e.runtime&&e.runtime.modules&&e.runtime.modules[e.targetModule];h&&(e=Object.assign(e,h))}e.wrapInStartEndCall&&(e.startFuncNode={type:"MemberExpression",
object:{type:"Identifier",name:e.varRecorderName},property:{type:"Literal",value:gj.startEvalFunctionName},computed:!0},e.endFuncNode={type:"MemberExpression",object:{type:"Identifier",name:e.varRecorderName},property:{type:"Literal",value:gj.endEvalFunctionName},computed:!0});return e};gj.runEval=jr;gj.finishEval=function(e,h,l,b,c,g,a){b.wrapInStartEndCall&&(delete c[gj.startEvalFunctionName],delete c[gj.endEvalFunctionName]);e?(l.isError=!0,l.value=e):l.value=h;l.value instanceof Promise&&(l.isPromise=
!0);if(b.sync){if(l.processSync(b),"function"===typeof b.onEndEval)b.onEndEval(e,h)}else l.process(b).then(function(){"function"===typeof a&&a(null,l);"function"===typeof b.onEndEval&&b.onEndEval(e,h);return l},function(d){"function"===typeof a&&a(d,void 0);"function"===typeof b.onEndEval&&b.onEndEval(d,void 0);return l}).then(g.resolve,g.reject)};gj.syncEval=eu;gj.tryToWaitForPromise=function(e,h){console.assert(e.isPromise,"no promise in tryToWaitForPromise???");var l={},b=new Promise(function(c){return setTimeout(c,
h,l)});return Promise.race([b,e.value]).then(function(c){return Object.assign(e,c!==l?{promiseStatus:"fulfilled",promisedValue:c}:{promiseStatus:"pending"})})["catch"](function(c){return Object.assign(e,{promiseStatus:"rejected",promisedValue:c})})};gj.arr=aj;gj.obj=bj;gj.string=Xj;gj.Path=qj;gj.promise=yj;gj.Closure=bp;gj.evalCodeTransform=ir;gj.printEvalResult=fr;gj.getGlobal=io;gj.defaultTopLevelVarRecorderName="__lvVarRecorder";gj.startEvalFunctionName="lively.vm-on-eval-start";gj.endEvalFunctionName=
"lively.vm-on-eval-end";gj._eval=gj.Closure.fromSource("function _eval(__lvEvalStatement, __lvVarRecorder/*needed as arg for capturing*/, __lvOriginalCode) {\n  return eval(__lvEvalStatement);\n}").getFunc();var $1=function(){function e(){Sd(this,e);this.isEvalResult=!0;this.value=void 0;this.warnings=[];this.isPromise=this.isError=!1;this.promisedValue=void 0;this.promiseStatus="unknown"}uc(e,[{key:"addWarning",value:function(h){this.warnings.push(h);return h}},{key:"printed",value:function(){this.value=
gj.printEvalResult(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"processSync",value:function(h){if(h.inspect||h.asString)this.value=this.print(this.value,h);return this}},{key:"process",value:function(h){var l=this;if(l.isPromise&&h.waitForPromise)return gj.tryToWaitForPromise(l,h.promiseTimeout).then(function(){(h.inspect||h.asString)&&l.printed(h);return l});(h.inspect||h.asString)&&l.printed(h);return Promise.resolve(l)}}]);return e}();gj.EvalResult=$1;var DA=gj.defaultTopLevelVarRecorderName;
gj.defaultTopLevelVarRecorderName=DA;gj.getGlobal=io;gj.runEval=jr;gj.syncEval=eu;var a2=Object.freeze({__proto__:null,defaultTopLevelVarRecorderName:DA,getGlobal:io,runEval:jr,syncEval:eu}),mj=window.lively.FreezerRuntime.recorderFor("lively.notifications/index.js");mj.getEnv=function(e){if(void 0===e){if("undefined"===typeof System)return void 0!==mj.env?mj.env:mj.env||(mj.env={emitter:mj.events.makeEmitter({},{maxListenerLimit:1E4}),notifications:[]});e=System}var h=e.get("@lively-env");h||e.set("@lively-env",
e.newModule({options:{}}));h=h.options;if(!h)throw Error("@lively-env registered read-only");h.emitter||Object.assign(h,{emitter:e["__lively.notifications_emitter"]||(e["__lively.notifications_emitter"]=mj.events.makeEmitter({},{maxListenerLimit:1E4})),notifications:e["__lively.notifications_notifications"]||(e["__lively.notifications_notifications"]=[])});return{emitter:h.emitter,notifications:h.notifications}};mj.subscribe=kr;mj.subscribeOnce=Hy;mj.emit=jo;mj.unsubscribe=os;mj.unsubscribeAll=Iy;
mj.record=function(e,h){e.push(h);e.limit&&e.splice(0,e.length-e.limit)};mj.startRecording=Jy;mj.stopRecording=Ky;mj.clearRecord=Ly;mj.getRecord=My;mj.log=function(e){var h=e.type+" ".repeat(Math.max(0,32-e.type.length));console.log(h+" "+mj.obj.inspect(e,{maxDepth:2}))};mj.startLogging=Ny;mj.stopLogging=iw;mj.events=bt;mj.obj=bj;mj.env=null;mj.subscribe=kr;mj.subscribeOnce=Hy;mj.emit=jo;mj.unsubscribe=os;mj.unsubscribeAll=Iy;mj.startRecording=Jy;mj.stopRecording=Ky;mj.clearRecord=Ly;mj.getRecord=
My;mj.startLogging=Ny;mj.stopLogging=iw;var Gj=window.lively.FreezerRuntime.recorderFor("lively.vm/lib/esm-eval.js");Gj.ensureImportsAreImported=function(e,h,l){return jw.apply(this,arguments)};Gj.hasUnimportedImports=function(e,h,l){h=Gj.parse(h).body.filter(function(b){return"ImportDeclaration"===b.type});return 0<Gj.arr.uniq(h.map(function(b){return b.source.value})).filter(Boolean).filter(function(b){return!e.get(e.decanonicalize(b,l))}).length};Gj.babelTranspilerForAsyncAwaitCode=function(e,
h,l,b){return function(c,g){g=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:l,code:!0,ast:!1},g);c="(async function(__rec) {\n".concat(c,"\n}).call(this);");g=h.transform(c,g).code;return g=g.replace(/\}\)\.call\(undefined\);$/,"}).call(this)")}};Gj.babelPluginTranspilerForAsyncAwaitCode=function(e,h,l,b){return function(c,g){var a=e.babelOptions||{},d=[];d.push(h.presetES2015);a.stage3&&d.push({plugins:h.pluginsStage3});a.stage2&&d.push({plugins:h.pluginsStage2});a.stage1&&d.push({plugins:h.pluginsStage1});
g=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:l,babelrc:!1,presets:d,moduleIds:!1,code:!0,ast:!1},g);c="(async function(__rec) {\n".concat(c,"\n}).call(this);");g=h.babel.transform(c,g).code;return g=g.replace(/\}\)\.call\(undefined\);$/,"}).call(this)")}};Gj.getEs6Transpiler=function(e,h,l){if(h.transpiler)return h.transpiler;if(!h.es6Transpile)return null;if("babel"===e.transpiler){var b=e.global[e.transpiler]||e.get(e.decanonicalize(e.transpiler));return b?Gj.babelTranspilerForAsyncAwaitCode(e,
b,h.targetModule,l):e["import"](e.transpiler).then(function(a){return Gj.babelTranspilerForAsyncAwaitCode(e,a,h.targetModule,l)})}if("plugin-babel"===e.transpiler){b=e.decanonicalize("plugin-babel").split("/").slice(0,-1).concat("systemjs-babel-browser.js").join("/");var c=e.get(b);return c?Gj.babelPluginTranspilerForAsyncAwaitCode(e,c,h.targetModule,l):e["import"](b).then(function(a){return Gj.babelPluginTranspilerForAsyncAwaitCode(e,a,h.targetModule,l)})}if("lively.transpiler"===e.transpiler){var g=
new (e.get(e.decanonicalize("lively.transpiler"))["default"])(e,h.targetModule,l);return function(a,d){return g.transpileDoit(a,d)}}throw Error("Sorry, currently only babel is supported as es6 transpiler for runEval!");};Gj.runEval=wq;Gj.evalEnd=function(e,h,l,b){e.get("@lively-env").evaluationEnd(l.targetModule);e.debug&&console.log("[lively.module] runEval in module ".concat(l.targetModule," done"));Gj.emit("lively.vm/doitresult",{code:h,result:b,waitForPromise:l.waitForPromise,targetModule:l.targetModule},
Date.now(),e);return b};Gj.parse=Cl;Gj.nodes=it;Gj.stringify=Bl;Gj.emit=jo;var EA=Gj.nodes;Gj.funcCall=EA.funcCall;Gj.member=EA.member;Gj.id=EA.id;Gj.literal=EA.literal;Gj.arr=aj;Gj.vmRunEval=jr;Gj.runEval=wq;var b2=Object.freeze({__proto__:null,runEval:wq}),jm=window.lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-strategies.js");jm.obj=bj;var GG=function(){function e(){Sd(this,e)}uc(e,[{key:"runEval",value:function(){var h=Cb(regeneratorRuntime.mark(function g(b,c){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=
a.next){case 0:return a.abrupt("return",Promise.reject("runEval(source, options) not yet implemented for ".concat(this.constructor.name)));case 1:case "end":return a.stop()}},g,this)}));return function(b,c){return h.apply(this,arguments)}}()},{key:"keysOfObject",value:function(){var h=Cb(regeneratorRuntime.mark(function g(b,c){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.reject("keysOfObject(prefix, options) not yet implemented for ".concat(this.constructor.name)));
case 1:case "end":return a.stop()}},g,this)}));return function(b,c){return h.apply(this,arguments)}}()}]);return e}();jm.EvalStrategy=GG;var HG=function(e){function h(){Sd(this,h);return l.apply(this,arguments)}vd(h,e);var l=qb(h);uc(h,[{key:"runEval",value:function(){var b=Cb(regeneratorRuntime.mark(function d(g,a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",Promise.resolve().then(function(){try{return Promise.resolve({value:eval(g)})}catch(k){return{isError:!0,
value:k}}}));case 1:case "end":return f.stop()}},d)}));return function(g,a){return b.apply(this,arguments)}}()},{key:"keysOfObject",value:function(){var b=Cb(regeneratorRuntime.mark(function d(g,a){var f=this,k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,lively.vm.completions.getCompletions(function(p){return f.runEval(p,a)},g);case 2:return k=n.sent,n.abrupt("return",{completions:k.completions,prefix:k.startLetters});case 4:case "end":return n.stop()}},
d)}));return function(g,a){return b.apply(this,arguments)}}()}]);return h}(jm.EvalStrategy);jm.SimpleEvalStrategy=HG;var IG=function(e){function h(){Sd(this,h);return l.apply(this,arguments)}vd(h,e);var l=qb(h);uc(h,[{key:"normalizeOptions",value:function(b){if(!b.targetModule)throw Error("runEval called but options.targetModule not specified!");return Object.assign({sourceURL:b.targetModule+"_doit_"+Date.now()},b)}},{key:"runEval",value:function(){var b=Cb(regeneratorRuntime.mark(function d(g,a){var f;
return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return a=this.normalizeOptions(a),f=a.System||lively.modules.System,f.config({meta:dd({},a.targetModule,{format:"esm"})}),k.abrupt("return",lively.vm.runEval(g,a));case 4:case "end":return k.stop()}},d,this)}));return function(g,a){return b.apply(this,arguments)}}()},{key:"keysOfObject",value:function(){var b=Cb(regeneratorRuntime.mark(function d(g,a){var f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=
k.next){case 0:return k.next=2,lively.vm.completions.getCompletions(function(n){return lively.vm.runEval(n,a)},g);case 2:return f=k.sent,k.abrupt("return",{completions:f.completions,prefix:f.startLetters});case 4:case "end":return k.stop()}},d)}));return function(g,a){return b.apply(this,arguments)}}()}]);return h}(jm.EvalStrategy);jm.LivelyVmEvalStrategy=IG;var jS=function(e){function h(){Sd(this,h);return l.apply(this,arguments)}vd(h,e);var l=qb(h);uc(h,[{key:"sourceForRemote",value:function(b,
c,g){var a=jm.obj.isString(g.context)?g.context:!1;g=jm.obj.dissoc(g,["systemInterface","System","context","classTransform"]);return"\n(async function() {\n  var arg = ".concat(JSON.stringify(c),",\n      options = ").concat(JSON.stringify(g),';\n  const { runEval, completions } = await System.import("lively.vm");\n  const { classToFunctionTransform } = await System.import("lively.classes");\n  var hasSystem = typeof System !== "undefined"\n  options.context = ').concat(a,';\n  options.classTransform = classToFunctionTransform;\n  if (!options.context) {\n    options.context = hasSystem\n      ? System.global\n      : typeof window !== "undefined"\n          ? window\n          : typeof global !== "undefined"\n              ? global\n              : typeof self !== "undefined" ? self : this;\n  }\n  async function evalFunction(source, options) {\n    if (hasSystem) {\n      var conf = {meta: {}}; conf.meta[options.targetModule] = {format: "esm"};\n      System.config(conf);\n    } else {\n      options = Object.assign({topLevelVarRecorderName: "GLOBAL"}, options);\n      delete options.targetModule;\n    }\n    let res = await runEval(source, options);\n    try {\n       JSON.stringify(res.value);\n    } catch(e) {\n       res.value = String(res.value);\n    }\n    return res;\n  }\n  function keysOfObjectFunction(prefix, options) {\n    return completions.getCompletions(code => evalFunction(code, options), prefix)\n      .then(result => ({isEvalResult: true, completions: result.completions, prefix: result.startLetters}));\n  }\n  return ').concat("eval"===
b?"evalFunction":"keysOfObjectFunction","(arg, options)\n    .catch(err => ({isEvalResult: true, isError: true, value: String(err.stack || err)}));\n})();\n")}},{key:"runEval",value:function(){var b=Cb(regeneratorRuntime.mark(function d(g,a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this.remoteEval(this.sourceForRemote("eval",g,a),a));case 1:case "end":return f.stop()}},d,this)}));return function(g,a){return b.apply(this,arguments)}}()},
{key:"keysOfObject",value:function(){var b=Cb(regeneratorRuntime.mark(function d(g,a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this.remoteEval(this.sourceForRemote("keysOfObject",g,a),a));case 1:case "end":return f.stop()}},d,this)}));return function(g,a){return b.apply(this,arguments)}}()},{key:"remoteEval",value:function(){var b=Cb(regeneratorRuntime.mark(function d(g,a){var f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=
k.next){case 0:return k.prev=0,k.next=3,this.basicRemoteEval(g,a);case 3:return f=k.sent,k.abrupt("return","string"===typeof f?JSON.parse(f):f);case 7:return k.prev=7,k.t0=k["catch"](0),k.abrupt("return",{isError:!0,value:"Remote eval failed: ".concat(f||k.t0)});case 10:case "end":return k.stop()}},d,this,[[0,7]])}));return function(g,a){return b.apply(this,arguments)}}()},{key:"basicRemoteEval",value:function(){var b=Cb(regeneratorRuntime.mark(function d(g,a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=
f.next){case 0:throw Error("Not yet implemented");case 1:case "end":return f.stop()}},d)}));return function(g,a){return b.apply(this,arguments)}}()}]);return h}(jm.LivelyVmEvalStrategy);jm.RemoteEvalStrategy=jS;var JG=function(e){function h(b){Sd(this,h);var c=l.call(this);c.url=b||c.constructor.defaultURL;return c}vd(h,e);var l=qb(h);uc(h,null,[{key:"defaultURL",get:function(){return"http://localhost:3000/lively"}}]);uc(h,[{key:"normalizeOptions",value:function(b){b=ic(Ed(h.prototype),"normalizeOptions",
this).call(this,b);return Object.assign({serverEvalURL:this.url},b,{context:null})}},{key:"basicRemoteEval",value:function(){var b=Cb(regeneratorRuntime.mark(function d(g,a){var f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return a=this.normalizeOptions(a),f="basicRemoteEval_"+(System.get("@system-env").node?"node":"web"),k.next=4,this[f]({method:"POST",body:g},a.serverEvalURL);case 4:return k.abrupt("return",k.sent);case 5:case "end":return k.stop()}},d,this)}));
return function(g,a){return b.apply(this,arguments)}}()},{key:"basicRemoteEval_web",value:function(){var b=Cb(regeneratorRuntime.mark(function d(g,a){var f,k,n,p,q,r;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:f=a.match(/[^:]+:\/\/[^\/]+/)||[a];k=Wb(f,1);n=k[0];p=System.get("@system-env").worker?window.location:document.location;if(q=p.origin!==n)g.headers=Object.assign({},g.headers,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":a}),a=p.origin;
u.prev=4;u.next=7;return window.fetch(a,g);case 7:r=u.sent;u.next=13;break;case 10:throw u.prev=10,u.t0=u["catch"](4),Error("Cannot reach server at ".concat(a,": ").concat(u.t0.message));case 13:if(r.ok){u.next=15;break}throw Error("Server at ".concat(a,": ").concat(r.statusText));case 15:return u.abrupt("return",r.text());case 16:case "end":return u.stop()}},d,null,[[4,10]])}));return function(g,a){return b.apply(this,arguments)}}()},{key:"basicRemoteEval_node",value:function(){var b=Cb(regeneratorRuntime.mark(function d(g,
a){var f,k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return f=System._nodeRequire("url").parse,k=System._nodeRequire(a.startsWith("https:")?"https":"http"),n=Object.assign({method:g.method||"GET"},f(a)),p.abrupt("return",new Promise(function(q,r){var u=k.request(n,function(x){x.setEncoding("utf8");var y="";x.on("data",function(D){return y+=D});x.on("end",function(){return q(y)});x.on("error",function(D){return r(D)})});u.on("error",function(x){return r(x)});
u.end(g.body)}));case 4:case "end":return p.stop()}},d)}));return function(g,a){return b.apply(this,arguments)}}()}]);return h}(jm.RemoteEvalStrategy);jm.HttpEvalStrategy=JG;var KG=function(e){function h(b,c){Sd(this,h);var g=l.call(this);g.l2lClient=b;g.targetId=c;return g}vd(h,e);var l=qb(h);uc(h,[{key:"basicRemoteEval",value:function(){var b=Cb(regeneratorRuntime.mark(function d(g,a){var f,k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return f=this.l2lClient,
k=this.targetId,q.next=3,f.sendToAndWait(k,"remote-eval",{source:g},{ackTimeout:a.ackTimeout||3500});case 3:return n=q.sent,(p=n.data)&&p.value&&p.value.isEvalResult&&(p=p.value),q.abrupt("return",p);case 7:case "end":return q.stop()}},d,this)}));return function(g,a){return b.apply(this,arguments)}}()}]);return h}(jm.RemoteEvalStrategy);jm.L2LEvalStrategy=KG;jm.EvalStrategy=GG;jm.SimpleEvalStrategy=HG;jm.LivelyVmEvalStrategy=IG;jm.HttpEvalStrategy=JG;jm.L2LEvalStrategy=KG;var FA=Object.freeze({__proto__:null,
RemoteEvalStrategy:jS,EvalStrategy:GG,SimpleEvalStrategy:HG,LivelyVmEvalStrategy:IG,HttpEvalStrategy:JG,L2LEvalStrategy:KG});bd("bv",FA);var zm=window.lively.FreezerRuntime.recorderFor("lively.vm/index.js");zm.runEval=ps;zm.syncEval=fu;zm.completions=zA;zm.completions=zA;zm.globalEval=a2;zm.esmEval=b2;zm.defaultTopLevelVarRecorderName=DA;zm.defaultClassToFunctionConverterName=CA;zm.evalCodeTransform=ir;zm.evalCodeTransformOfSystemRegisterSetters=ns;zm.runEval=ps;zm.syncEval=fu;zm.evalStrategies=FA;
zm.evalStrategies=FA;var c2=Object.freeze({__proto__:null,completions:zA,defaultTopLevelVarRecorderName:DA,defaultClassToFunctionConverterName:CA,evalCodeTransform:ir,evalCodeTransformOfSystemRegisterSetters:ns,runEval:ps,syncEval:fu,evalStrategies:FA});bd("bu",c2);var Jj=window.lively.FreezerRuntime.recorderFor("lively.classes/source-descriptors.js");Jj.string=Xj;Jj.arr=aj;Jj.parse=Cl;Jj.query=jt;Jj.runEval=ps;Jj.objMetaSym=Symbol["for"]("lively-object-meta");Jj.moduleSym=Symbol["for"]("lively-module-meta");
Jj.G="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Jj.descriptorCache=new Map;Jj.localSystem=Jj.G.System;var d2=function(){function e(h,l){Sd(this,e);h&&l?this.update(l,h):this.reset()}uc(e,[{key:"reset",value:function(){this._sourceLocation=null;this._source="";this._ast=null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null}},{key:"update",value:function(h,l){this._moduleSource===
h&&l&&this._sourceLocation&&l.start===this._sourceLocation.start&&l.end===this._sourceLocation.end||(this.reset(),this._moduleSource=h,this._sourceLocation=l)}},{key:"changeSource",value:function(h){var l=this.moduleSource,b=this.sourceLocation,c=b.start;b=b.end;l=l.slice(0,c)+h+l.slice(b);this.update(l,{start:c,end:c+h.length});this._source=h;return this}},{key:"toString",value:function(){var h=Jj.string.truncate(this._source||"NO SOURCE",35).replace(/\n/g,"");return"".concat(this.constructor.name,
"(").concat(h,")")}},{key:"sourceLocation",get:function(){if(!this._sourceLocation)throw Error("_sourceLocation not defined");return this._sourceLocation}},{key:"moduleSource",get:function(){if(!this._moduleSource)throw Error("_moduleSource not defined!");return this._moduleSource}},{key:"moduleAst",get:function(){return this._moduleAst||(this._moduleAst=Jj.parse(this.moduleSource,{withComments:!0}))}},{key:"moduleScope",get:function(){return this._moduleScope||(this._moduleScope=Jj.query.topLevelDeclsAndRefs(this.ast).scope)}},
{key:"moduleImports",get:function(){return this._moduleImports||(this._moduleImports=Jj.query.imports(this.moduleScope))}},{key:"ast",get:function(){if(this._ast)return this._ast;var h=Jj.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===h.type&&(h=h.expression);return this._ast=h}},{key:"source",get:function(){if(this._source)return this._source;var h=this.sourceLocation;return this._source=this.moduleSource.slice(h.start,h.end)}},{key:"type",get:function(){return this.ast.type}},
{key:"declaredAndUndeclaredNames",get:function(){if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var h=this.ast,l=Jj.query.topLevelDeclsAndRefs(this.moduleAst).declaredNames,b=Jj.arr.uniq(this.moduleImports.map(function(g){return g.local})),c=Jj.arr.withoutAll(l,b);h=Jj.arr.withoutAll(Jj.query.findGlobalVarRefs(h).map(function(g){return g.name}),l);return this._declaredAndUndeclaredNames={declaredNames:l,declaredImports:b,localDeclaredNames:c,undeclaredNames:h}}}]);return e}();
Jj.SourceDescriptor=d2;var kS=bd("bh",function(){function e(h,l){Sd(this,e);this.obj=h;this.System=l;this.reset()}uc(e,null,[{key:"forObjectWithModuleSource",value:function(h,l,b){h=this["for"](h,b);h.ensureSourceDescriptor(h.sourceLocation,l);return h}},{key:"for",value:function(h,l){var b=Jj.descriptorCache.get(h);b||(b=new this(h,l),Jj.descriptorCache.set(h,b));return b}}]);uc(e,[{key:"reset",value:function(){this._source="";this._ast=this._sourceLocation=null;this._moduleSource="";this._declaredAndUndeclaredNames=
this._moduleImports=this._moduleScope=this._moduleAst=null}},{key:"resetIfChanged",value:function(){var h=this.meta.moduleSource;this._moduleSource&&h&&this._moduleSource!==h&&this.reset()}},{key:"changeSourceSync",value:function(h){var l=this.System;this._basicChangeSource(h);this.module.changeSource(this.moduleSource,{doSave:!0});h=Jj.runEval(h,{sync:!0,targetModule:this.module.id,System:l});if(h.isError)throw h.value;return this}},{key:"changeSource",value:function(){var h=Cb(regeneratorRuntime.mark(function c(b){var g=
this,a;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return a=this.module,d.next=3,a.changeSourceAction(function(f){if(f!==g.moduleSource)throw Error("source of module ".concat(a.id," and source of ").concat(g," don't match"));g._basicChangeSource(b);return g.moduleSource});case 3:return d.abrupt("return",this);case 4:case "end":return d.stop()}},c,this)}));return function(b){return h.apply(this,arguments)}}()},{key:"_modifiedSource",value:function(h){var l=this.moduleSource,
b=this.sourceLocation,c=b.start;b=b.end;return{moduleSource:l.slice(0,c)+h+l.slice(b),sourceLocation:{start:c,end:c+h.length}}}},{key:"_renamedSource",value:function(h){var l=this.ast,b=l.type,c=l.id;l=c.start;c=c.end;if("ClassDeclaration"!==b)throw Error("Don't know how to rename ".concat(b));return this._modifiedSource(this.source.slice(0,l)+h+this.source.slice(c))}},{key:"_basicChangeSource",value:function(h){var l=this.meta,b=this._modifiedSource(h),c=b.moduleSource;b=b.sourceLocation;this.reset();
this.meta=Object.assign({},l,{moduleSource:c},b);this._sourceLocation=b;this._moduleSource=c;this._source=h;return this}},{key:"toString",value:function(){var h=Jj.string.truncate(this.source||String(this.obj),35).replace(/\n/g,"");try{var l=this.module.shortName()}catch(b){l="NO MODULE!"}return"".concat(this.constructor.name,"(").concat(h," in ").concat(l,")")}},{key:"System",get:function(){return this._System||Jj.localSystem},set:function(h){this._System=h}},{key:"module",get:function(){var h=this.obj,
l=this.System;if(!h[Jj.moduleSym])throw Error("runtime object of source descriptor has no module data");var b=h[Jj.moduleSym];h=b["package"].name;b=b.pathInPackage;h=b.includes("://")?b:h+"/"+b;l=this.System._scripting.module(l,h);l._frozenModule||l._source||!this.moduleSource||l.setSource(this.moduleSource);return l}},{key:"meta",get:function(){var h=this.obj;if(!h[Jj.objMetaSym])throw Error("runtime object of source descriptor has no lively meta data");return h[Jj.objMetaSym]},set:function(h){this.obj[Jj.objMetaSym]=
h;h.hasOwnProperty("start")&&h.hasOwnProperty("end")&&(this._sourceLocation={start:h.start,end:h.end});h.hasOwnProperty("moduleSource")&&(this._moduleSource=h.moduleSource)}},{key:"sourceLocation",get:function(){this.resetIfChanged();if(this._sourceLocation)return this._sourceLocation;var h=this.meta,l=h.start;h=h.end;if(void 0===l||void 0===h)throw Error("lively meta data has no start/end");return this._sourceLocation={start:l,end:h}}},{key:"moduleSource",get:function(){this.resetIfChanged();if(this._moduleSource)return this._moduleSource;
var h=this.meta.moduleSource;if(void 0===h)throw Error("lively meta data has no moduleSource");return this._moduleSource=h}},{key:"moduleAst",get:function(){this.resetIfChanged();return this._moduleAst||(this._moduleAst=Jj.parse(this.moduleSource,{withComments:!0}))}},{key:"moduleScope",get:function(){this.resetIfChanged();return this._moduleScope||(this._moduleScope=Jj.query.topLevelDeclsAndRefs(this.moduleAst).scope)}},{key:"moduleImports",get:function(){this.resetIfChanged();return this._moduleImports||
(this._moduleImports=Jj.query.imports(this.moduleScope))}},{key:"declaredAndUndeclaredNames",get:function(){this.resetIfChanged();if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var h=this.ast,l=Jj.query.topLevelDeclsAndRefs(this.moduleAst,{jslintGlobalComment:!0}).declaredNames,b=Jj.arr.uniq(this.moduleImports.map(function(g){return g.local})),c=Jj.arr.withoutAll(l,b);h=Jj.arr.withoutAll(Jj.query.findGlobalVarRefs(h).map(function(g){return g.name}),l);return this._declaredAndUndeclaredNames=
{declaredNames:l,declaredImports:b,localDeclaredNames:c,undeclaredNames:h}}},{key:"source",get:function(){this.resetIfChanged();if(this._source)return this._source;var h=this.sourceLocation;return this._source=this.moduleSource.slice(h.start,h.end)}},{key:"ast",get:function(){this.resetIfChanged();if(this._ast)return this._ast;var h=Jj.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===h.type&&(h=h.expression);return this._ast=h}},{key:"type",get:function(){return this.ast.type}},
{key:"name",get:function(){if("ClassDeclaration"===this.type){var h=this.ast.id;return this.source.slice(h.start,h.end)}return"unknown"}}]);return e}());Jj.RuntimeSourceDescriptor=kS;var pi=window.lively.FreezerRuntime.recorderFor("lively.classes/util.js");pi.superclasses=kw;pi.getClassHierarchy=qs;pi.withSuperclasses=qc;pi.inheritsFrom=jd;pi.changeClass=$d;pi.isClass=He;pi.isOverridden=function(e,h){for(;e!=Object;)if(e=e[Symbol["for"]("lively-instance-superclass")],e.prototype.hasOwnProperty(h))return!0;
return!1};pi.lexicalClassMembers=jf;pi.runtimeClassMembers=Bf;pi.runtimeClassMembersInProtoChain=function(e){return pi.arr.uniq(pi.arr.without(pi.withSuperclasses(e),Object).flatMap(function(h){return pi.runtimeClassMembers(h)}))};pi.runtimeNonStaticMembers=function(e){var h=e.prototype,l=pi.obj.getOwnPropertyDescriptors(h);return pi.arr.withoutAll(Object.keys(l),["constructor"]).map(function(b){var c=l[b],g="function"===typeof c.value?"method":"get"in c?"get":"set"in c?"set":"unknown";return{"static":!1,
name:b,value:"method"===g?c.value:"get"===g?c.get:"set"===g?c.set:null,kind:g,owner:h}})};pi.runtimeNonstaticClassMembersInProtoChain=function(e){return pi.arr.uniq(pi.arr.without(pi.withSuperclasses(e),Object).flatMap(function(h){return pi.runtimeNonStaticMembers(h)}))};pi.runtimeStaticClassMembers=vh;pi.runtimeStaticClassMembersInProtoChain=ei;pi.arr=aj;pi.obj=bj;pi.Path=qj;pi.RuntimeSourceDescriptor=kS;pi.superclasses=kw;var GA=Symbol["for"]("lively-instance-initialize");pi.initializeSymbol=GA;
pi.initializeSymbol=GA;var LG=Symbol["for"]("lively-instance-restorer");pi.instanceRestorerSymbol=LG;pi.instanceRestorerSymbol=LG;var HA=Symbol["for"]("lively-instance-superclass");pi.superclassSymbol=HA;pi.superclassSymbol=HA;var IA=Symbol["for"]("lively-module-meta");pi.moduleMetaSymbol=IA;pi.moduleMetaSymbol=IA;var JA=Symbol["for"]("lively-object-meta");pi.objMetaSymbol=JA;pi.objMetaSymbol=JA;var KA=Symbol["for"]("lively-klass-changes-subscriber");pi.moduleSubscribeToToplevelChangesSym=KA;pi.moduleSubscribeToToplevelChangesSym=
KA;pi.getClassHierarchy=qs;pi.withSuperclasses=qc;pi.inheritsFrom=jd;pi.changeClass=$d;pi.isClass=He;pi.lexicalClassMembers=jf;pi.runtimeClassMembers=Bf;pi.runtimeStaticClassMembers=vh;pi.runtimeStaticClassMembersInProtoChain=ei;var MG=bd("bi",function(){function e(a){return a.replace(g,function(d,f){return f[f.length-1].toUpperCase()})}var h="break case catch class const continue debugger default delete do else enum export extends false finally for function if implements import in instanceof interface let new null package private protected public return static switch super this throw true try typeof undefined var void while with yield".split(" "),
l={"~":"_tilde_","`":"_backtick_","!":"_exclamationmark_","@":"_at_","#":"_pound_","%":"_percent_","^":"_carat_","&":"_amperstand_","*":"_asterisk_","(":"_leftparen_",")":"_rightparen_","+":"_plus_","=":"_equals_","{":"_leftcurly_","}":"_rightcurly_","[":"_leftsquare_","]":"_rightsquare_","|":"_pipe_","-":"_dash_","\\":"_backslash_",'"':"_doublequote_","'":"_singlequote_",":":"_colon_",";":"_semicolon_","<":"_leftangle_",">":"_rightangle_",",":"_comma_",".":"_period_","?":"_questionmark_","/":"_forwardslash_",
"\t":"_tab_","\n":"_newline_","\r":"_carriagereturn_"},b={0:"_zero_",1:"_one_",2:"_two_",3:"_three_",4:"_four_",5:"_five_",6:"_siz_",7:"_seven_",8:"_eight_",9:"_nine_"},c=function(a){return l[a]||"ASCII_"+a.charCodeAt(0)},g=/([\s-]+.)/g;return function(a){a=e(a);return 0<=h.indexOf(a)?a:0===a.length?"_null_":a.replace(/^\d/,function(d){return b[d]}).replace(/[^\w\$_]/g,c)}}());pi.toJsIdentifier=MG;pi.toJsIdentifier=MG;var mX=Object.freeze({__proto__:null,superclasses:kw,initializeSymbol:GA,instanceRestorerSymbol:LG,
superclassSymbol:HA,moduleMetaSymbol:IA,objMetaSymbol:JA,moduleSubscribeToToplevelChangesSym:KA,getClassHierarchy:qs,withSuperclasses:qc,inheritsFrom:jd,changeClass:$d,isClass:He,lexicalClassMembers:jf,runtimeClassMembers:Bf,runtimeStaticClassMembers:vh,runtimeStaticClassMembersInProtoChain:ei,toJsIdentifier:MG}),Hj=window.lively.FreezerRuntime.recorderFor("lively.classes/properties.js");Hj.hasManagedProperties=function(e){return e.hasOwnProperty(Hj.defaultPropertiesKey)};Hj.prepareClassForManagedPropertiesAfterCreation=
kk;Hj.prepareClassForProperties=function(e,h,l){Hj.ensurePropertyInitializer(e);var b=h.valueStoreProperty,c=h.defaultGetter,g=h.defaultSetter,a=e.prototype;Object.keys(l).forEach(function(d){var f=l[d],k=a.hasOwnProperty(d)&&a.__lookupGetter__(d);if(!k||k._wasGenerated)k=f.get||"function"===typeof c&&function(){return c.call(this,d)}||function(){return this[b][d]},k._wasGenerated=!0,a.__defineGetter__(d,k);k=a.hasOwnProperty(d)&&a.__lookupSetter__(d);if(!k||k._wasGenerated)if(f.hasOwnProperty("set")||
!f.readOnly)f=f.set||"function"===typeof g&&function(n){g.call(this,d,n)}||function(n){this[b][d]=n},f._wasGenerated=!0,a.__defineSetter__(d,f)})};Hj.ensurePropertyInitializer=function(e){Object.defineProperty(e.prototype,"propertiesAndPropertySettings",{enumerable:!1,configurable:!0,writable:!0,value:function(){var h=this.constructor,l=h[Hj.propertiesAndSettingsCacheSym];if(l)if(l.classHierarchy!=Hj.getClassHierarchy(h)){var b=Hj.propertiesAndSettingsInHierarchyOf(h);l=b.properties;b=b.propertySettings;
h[Hj.propertiesAndSettingsCacheSym]={properties:l,propertySettings:b,order:Hj.obj.sortKeysWithBeforeAndAfterConstraints(l),classHierarchy:Hj.getClassHierarchy(h)};Hj.prepareClassForProperties(h,b,l)}else return l;return h[Hj.propertiesAndSettingsCacheSym]||Hj.propertiesAndSettingsInHierarchyOf(h)}});Object.defineProperty(e.prototype,"initializeProperties",{enumerable:!1,configurable:!0,writable:!0,value:function(h){var l=this.propertiesAndPropertySettings();Hj.prepareInstanceForProperties(this,l.propertySettings,
l.properties,h,l.order);return this}});Object.defineProperty(e.prototype,"defaultProperties",{configurable:!0,get:function(){var h=e[Symbol["for"]("lively-instance-superclass")];if(!e[Hj.defaultPropertiesCacheSym]||e[Hj.defaultPropertiesCacheSym]==(h&&h[Hj.defaultPropertiesCacheSym])){h=e[Hj.defaultPropertiesCacheSym]={};var l=this.propertiesAndPropertySettings().properties,b;for(b in l){var c=l[b];c.hasOwnProperty("defaultValue")&&(c=c.defaultValue,Array.isArray(c)&&(c=c.slice()),h[b]=c)}}return e[Hj.defaultPropertiesCacheSym]}})};
Hj.propertiesAndSettingsInHierarchyOf=function(e){for(var h=Object.assign({},Hj.defaultPropertySettings),l={},b=Hj.obj.valuesInPropertyHierarchy(e,"propertySettings"),c=Hj.obj.valuesInPropertyHierarchy(e,"properties"),g=0;g<b.length;g++){var a=b[g];a&&"object"===ad(a)&&Object.assign(h,a)}for(g=0;g<c.length;g++)if(b=c[g],"object"!==ad(b))console.error("[initializeProperties] ".concat(e," encountered property declaration ")+"that is not a JS object: ".concat(b));else for(var d in b)l.hasOwnProperty(d)?
Object.assign(l[d],b[d]):l[d]=b[d];return{properties:l,propertySettings:h}};Hj.prepareInstanceForProperties=function(e,h,l,b,c){var g=h.valueStoreProperty;c=c||Hj.obj.sortKeysWithBeforeAndAfterConstraints(l);h=[];var a={};"undefined"===typeof e[g]&&(e[g]={});for(var d=0;d<c.length;d++){var f=c[d],k=l[f],n=k.derived,p=!!k.foldable,q="undefined"!==typeof k.defaultValue?k.defaultValue:void 0;Array.isArray(q)&&(q=q.slice());n||p||(e[g][f]=q);var r=void 0;"undefined"!==typeof k.initialize?(r=a[f]={initialize:q},
h.push(f)):n&&void 0!==q?(r=a[f]={derived:q},h.push(f)):p&&void 0!==q&&(r=a[f]={folded:q},h.push(f));b&&f in b&&(k.readOnly?console.warn("Trying to initialize read-only property ".concat(f," in ").concat(e,", ")+"skipping setting value"):(r||(r=a[f]={},h.push(f)),r.value=b[f]))}for(d=0;d<h.length;d++)b=h[d],c=a[b],g=c.hasOwnProperty("value"),c.hasOwnProperty("initialize")?(l[b].initialize.call(e,g?c.value:c.initialize),g&&(e[b]=c.value)):c.hasOwnProperty("derived")?e[b]=g?c.value:c.derived:c.hasOwnProperty("folded")?
e[b]=g?c.value:c.folded:g&&(e[b]=c.value)};Hj.obj=bj;Hj.getClassHierarchy=qs;Hj.defaultPropertiesSettingKey="propertySettings";Hj.defaultPropertiesKey="properties";Hj.defaultInstanceInitializerMethod="initializeProperties";Hj.propertiesAndSettingsCacheSym=Symbol["for"]("lively.classes-properties-and-settings");Hj.defaultPropertiesCacheSym=Symbol["for"]("lively.classes-default-properties");Hj.defaultPropertySettings={defaultSetter:null,defaultGetter:null,valueStoreProperty:"_state"};Hj.prepareClassForManagedPropertiesAfterCreation=
kk;var xi=window.lively.FreezerRuntime.recorderFor("lively.classes/runtime.js");xi.setSuperclass=hl;xi.installValueDescriptor=function(e,h,l){l=Object.assign(l,xi.defaultPropertyDescriptorForValue);l.value.displayName=l.key;if(l.needsDeclaringClass){var b=l.value.originalFunction||l.value;l.value=Object.assign(function(){return b.call.apply(b,[this,h].concat(Array.prototype.slice.call(arguments)))},{originalFunction:b,toString:function(){return b.toString()},displayName:l.key})}Object.defineProperty(e,
l.key,l)};xi.installGetterSetterDescriptor=function(e,h){h=Object.assign(h,xi.defaultPropertyDescriptorForGetterSetter);Object.defineProperty(e,h.key,h)};xi.installMethods=function(e,h,l){l&&l.forEach(function(a){a.value?xi.installValueDescriptor(e,e,a):xi.installGetterSetterDescriptor(e,a)});h&&h.forEach(function(a){a.value?xi.installValueDescriptor(e.prototype,e,a):xi.installGetterSetterDescriptor(e.prototype,a)});if(e.prototype[xi.initializeSymbol]){var b=Object.getOwnPropertySymbols(e.prototype).includes(xi.initializeSymbol),
c=h.find(function(a){return a.key==xi.initializeSymbol});b&&(b=e[xi.superclassSymbol].prototype[xi.initializeSymbol],e.prototype[xi.initializeSymbol].isDefaultInitializer&&b?delete e.prototype[xi.initializeSymbol]:c||(b?delete e.prototype[xi.initializeSymbol]:e.prototype[xi.initializeSymbol]=function(){}))}else Object.defineProperty(e.prototype,xi.initializeSymbol,{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),e.prototype[xi.initializeSymbol].isDefaultInitializer=!0,e.prototype[xi.initializeSymbol].displayName=
"lively-initialize";h=h.map(function(a){return a.key}).concat(["constructor","arguments","caller"]);c=Object.getOwnPropertyNames(e.prototype);for(b=0;b<c.length;b++){var g=c[b];h.includes(g)||delete e.prototype[g]}l=l.map(function(a){return a.key}).concat(["length","name","prototype","arguments","caller"]);h=Object.getOwnPropertyNames(e);for(c=0;c<h.length;c++)b=h[c],l.includes(b)||delete e[b]};xi.ensureInitializeStub=function(e){e===Object||e.prototype[xi.initializeSymbol]||(Object.defineProperty(e.prototype,
xi.initializeSymbol,{enumerable:!1,configurable:!0,writable:!0,value:function(){e.apply(this,arguments)}}),e.prototype[xi.initializeSymbol].displayName="lively-initialize-stub")};xi.initializeClass=Ve;xi.prepareClassForManagedPropertiesAfterCreation=kk;xi.superclassSymbol=HA;xi.moduleSubscribeToToplevelChangesSym=KA;xi.moduleMetaSymbol=IA;xi.objMetaSymbol=JA;xi.initializeSymbol=GA;xi.setPrototypeOf=iG;xi.constructorArgMatcher=/\([^\\)]*\)/;xi.defaultPropertyDescriptorForGetterSetter={enumerable:!1,
configurable:!0};xi.defaultPropertyDescriptorForValue={enumerable:!1,configurable:!0,writable:!0};xi.setSuperclass=hl;xi.initializeClass=Ve;xi.initializeClass._get=function c(h,l,b){null===h&&(h=Function.prototype);var g=Object.getOwnPropertyDescriptor(h,l);if(void 0===g)return h=Object.getPrototypeOf(h),null===h?void 0:c(h,l,b);if("value"in g)return g.value;l=g.get;return void 0===l?void 0:l.call(b)};xi.initializeClass._set=function a(l,b,c,g){var d=Object.getOwnPropertyDescriptor(l,b);void 0===
d?(l=Object.getPrototypeOf(l),null!==l&&a(l,b,c,g)):"value"in d&&d.writable?d.value=c:(b=d.set,void 0!==b&&b.call(g,c));return c};var e2=Object.freeze({__proto__:null,setSuperclass:hl,initializeClass:Ve,adoptObject:void 0});bd("aT",e2);var Df=window.lively.FreezerRuntime.recorderFor("lively.graphics/color-parser.js");Df.parse=rs;Df.Color=function(l){this._listeners={};this.subscribe(Df.Events.RGB_UPDATED,this._RGBUpdated);this.subscribe(Df.Events.HEX_UPDATED,this._HEXUpdated);this.subscribe(Df.Events.HSL_UPDATED,
this._HSLUpdated);this.subscribe(Df.Events.HSV_UPDATED,this._HSVUpdated);this.subscribe(Df.Events.INT_UPDATED,this._INTUpdated);this.parse(l)};Df.parse=rs;Df.Events={RGB_UPDATED:"RGBUpdated",HSL_UPDATED:"HSLUpdated",HSV_UPDATED:"HSVUpdated",HEX_UPDATED:"HexUpdated",INT_UPDATED:"IntUpdated",UPDATED:"updated"};Df.namedColors={transparent:"rgba(0, 0, 0, 0)",aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",
blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",
darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",
indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",
limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",
orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",
springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE"};Df.absround=function(l){return.5+l<<0};Df.hue2rgb=function(l,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?l+6*(b-l)*c:.5>c?b:c<2/3?l+(b-l)*(2/3-c)*6:l};Df.p2v=function(l){return Df.isPercent.test(l)?Df.absround(2.55*parseInt(l)):l};Df.isHex=/^#?([0-9a-f]{3}|[0-9a-f]{6})$/i;Df.isHSL=/^hsla?\((\d{1,3}?),\s*(\d{1,3}%),\s*(\d{1,3}%)(,\s*[01]?\.?\d*)?\)$/;Df.isRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*[01]?\.?\d*)?\)$/;
Df.isPercent=/^\d+(\.\d+)*%$/;Df.hexBit=/([0-9a-f])/gi;Df.leadHex=/^#/;Df.matchHSL=/^hsla?\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%(,\s*([01]?\.?\d*))?\)$/;Df.matchRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*([01]?\.?\d*))?\)$/;Df.Color.prototype._decimal=0;Df.Color.prototype._hex="#000000";Df.Color.prototype._red=0;Df.Color.prototype._green=0;Df.Color.prototype._blue=0;Df.Color.prototype._hue=0;Df.Color.prototype._saturation=0;Df.Color.prototype._lightness=0;Df.Color.prototype._brightness=
0;Df.Color.prototype._alpha=1;Df.Color.prototype.parse=function(l){if("undefined"===typeof l)return this;switch(!0){case isFinite(l):this.decimal(l);this.output=Df.Color.INT;break;case l instanceof Df.Color:this.copy(l);break;default:switch(ad(l)){case "object":this.set(l);break;case "string":switch(!0){case Df.namedColors.hasOwnProperty(l):l=Df.namedColors[l];l=l.replace(Df.leadHex,"");this.decimal(parseInt(l,16));break;case Df.isHex.test(l):l=l.replace(Df.leadHex,"");3==l.length&&(l=l.replace(Df.hexBit,
"$1$1"));this.decimal(parseInt(l,16));break;case Df.isRGB.test(l):l=l.match(Df.matchRGB);this.red(Df.p2v(l[1]));this.green(Df.p2v(l[2]));this.blue(Df.p2v(l[3]));this.alpha(parseFloat(l[5])||1);this.output=(Df.isPercent.test(l[1])?2:1)+(l[5]?2:0);break;case Df.isHSL.test(l):l=l.match(Df.matchHSL),this.hue(parseInt(l[1])),this.saturation(parseInt(l[2])),this.lightness(parseInt(l[3])),this.alpha(parseFloat(l[5])||1),this.output=l[5]?6:5}}}return this};Df.Color.prototype.clone=function(){return new Df.Color(this.decimal())};
Df.Color.prototype.copy=function(l){this.set(l.decimal());return this};Df.Color.prototype.set=function(l,b){if(1==arguments.length)if("object"===ad(l))for(var c in l){if("function"===typeof this[c])this[c](l[c])}else isFinite(l)&&this.decimal(l);else if("function"===typeof this[l])this[l](b);return this};Df.Color.prototype.interpolate=function(l,b){l instanceof Df.Color||(l=new Df.Color(l));this._red=Df.absround(+this._red+(l._red-this._red)*b);this._green=Df.absround(+this._green+(l._green-this._green)*
b);this._blue=Df.absround(+this._blue+(l._blue-this._blue)*b);this._alpha=Df.absround(+this._alpha+(l._alpha-this._alpha)*b);this.broadcast(Df.Events.RGB_UPDATED);this.broadcast(Df.Events.UPDATED);return this};Df.Color.prototype._RGB2HSL=function(){var l=this._red/255,b=this._green/255,c=this._blue/255,g=Math.max(l,b,c),a=Math.min(l,b,c),d=(g+a)/2;if(g==a)this._saturation=this._hue=0;else{var f=g-a;a=f/(.5>=d?g+a:2-g-a);this._hue=Df.absround((g==l?(b-c)/f+(b<c?6:0):g==b?(c-l)/f+2:(l-b)/f+4)/6*360);
this._saturation=Df.absround(100*a)}this._lightness=Df.absround(100*d);this._brightness=Df.absround(100*g)};Df.Color.prototype._HSL2RGB=function(){var l=this._hue/360,b=this._saturation/100,c=this._lightness/100;b=.5>c?c*(1+b):c+b-c*b;c=2*c-b;this._red=Df.absround(255*Df.hue2rgb(c,b,l+1/3));this._green=Df.absround(255*Df.hue2rgb(c,b,l));this._blue=Df.absround(255*Df.hue2rgb(c,b,l-1/3))};Df.Color.prototype._HSV2RGB=function(){var l=this._hue/360,b=this._saturation/100,c=this._brightness/100,g=0,a=
0,d=0,f=Math.floor(6*l),k=6*l-f;l=c*(1-b);var n=c*(1-k*b);b=c*(1-(1-k)*b);switch(f%6){case 0:g=c;a=b;d=l;break;case 1:g=n;a=c;d=l;break;case 2:g=l;a=c;d=b;break;case 3:g=l;a=n;d=c;break;case 4:g=b;a=l;d=c;break;case 5:g=c,a=l,d=n}this._red=Df.absround(255*g);this._green=Df.absround(255*a);this._blue=Df.absround(255*d)};Df.Color.prototype._INT2HEX=function(){var l=this._decimal.toString(16);l="000000".substr(0,6-l.length)+l;this._hex="#"+l.toUpperCase()};Df.Color.prototype._INT2RGB=function(){this._red=
this._decimal>>16;this._green=this._decimal>>8&255;this._blue=this._decimal&255};Df.Color.prototype._HEX2INT=function(){this._decimal=parseInt(this._hex,16)};Df.Color.prototype._RGB2INT=function(){this._decimal=this._red<<16|this._green<<8&65535|this._blue};Df.Color.prototype._RGBUpdated=function(){this._RGB2INT();this._RGB2HSL();this._INT2HEX()};Df.Color.prototype._HSLUpdated=function(){this._HSL2RGB();this._RGB2INT();this._INT2HEX()};Df.Color.prototype._HSVUpdated=function(){this._HSV2RGB();this._RGB2INT();
this._INT2HEX()};Df.Color.prototype._HEXUpdated=function(){this._HEX2INT();this._INT2RGB();this._RGB2HSL()};Df.Color.prototype._INTUpdated=function(){this._INT2RGB();this._RGB2HSL();this._INT2HEX()};Df.Color.prototype._broadcastUpdate=function(){this.broadcast(Df.Events.UPDATED)};Df.Color.prototype.decimal=function(l){return this._handle("_decimal",l,Df.Events.INT_UPDATED)};Df.Color.prototype.hex=function(l){return this._handle("_hex",l,Df.Events.HEX_UPDATED)};Df.Color.prototype.red=function(l){return this._handle("_red",
l,Df.Events.RGB_UPDATED)};Df.Color.prototype.green=function(l){return this._handle("_green",l,Df.Events.RGB_UPDATED)};Df.Color.prototype.blue=function(l){return this._handle("_blue",l,Df.Events.RGB_UPDATED)};Df.Color.prototype.hue=function(l){return this._handle("_hue",l,Df.Events.HSL_UPDATED)};Df.Color.prototype.saturation=function(l){return this._handle("_saturation",l,Df.Events.HSL_UPDATED)};Df.Color.prototype.lightness=function(l){return this._handle("_lightness",l,Df.Events.HSL_UPDATED)};Df.Color.prototype.brightness=
function(l){return this._handle("_brightness",l,Df.Events.HSV_UPDATED)};Df.Color.prototype.alpha=function(l){return this._handle("_alpha",l)};Df.Color.prototype._handle=function(l,b,c){"undefined"!==typeof this[l]&&"undefined"!==typeof b&&(b!=this[l]&&(this[l]=b,c&&this.broadcast(c)),this.broadcast(Df.Events.UPDATED));return this[l]};Df.Color.prototype.getHex=function(){return this._hex};Df.Color.prototype.getRGB=function(){return"rgb("+[Df.absround(this._red),Df.absround(this._green),Df.absround(this._blue)].join(", ")+
")"};Df.Color.prototype.getPRGB=function(){return"rgb("+[Df.absround(100*this._red/255)+"%",Df.absround(100*this._green/255)+"%",Df.absround(100*this._blue/255)+"%"].join(", ")+")"};Df.Color.prototype.getRGBA=function(){return"rgba("+[Df.absround(this._red),Df.absround(this._green),Df.absround(this._blue),this._alpha].join(", ")+")"};Df.Color.prototype.getPRGBA=function(){return"rgba("+[Df.absround(100*this._red/255)+"%",Df.absround(100*this._green/255)+"%",Df.absround(100*this._blue/255)+"%",this._alpha].join(", ")+
")"};Df.Color.prototype.getHSL=function(){return"hsl("+[Df.absround(this._hue),Df.absround(this._saturation)+"%",Df.absround(this._lightness)+"%"].join(", ")+")"};Df.Color.prototype.getHSLA=function(){return"hsla("+[Df.absround(this._hue),Df.absround(this._saturation)+"%",Df.absround(this._lightness)+"%",this._alpha].join(", ")+")"};Df.Color.prototype.format=function(l){var b={r:this._red,g:this._green,b:this._blue,h:this._hue,s:this._saturation,l:this._lightness,v:this._brightness,a:this._alpha,
x:this._hex,d:this._decimal},c;for(c in b)l=l.split("%"+c+"%").join(b[c]);return l};Df.Color.prototype.output=0;Df.Color.HEX=0;Df.Color.RGB=1;Df.Color.PRGB=2;Df.Color.RGBA=3;Df.Color.PRGBA=4;Df.Color.HSL=5;Df.Color.HSLA=6;Df.Color.INT=7;Df.Color.prototype.toString=function(){switch(this.output){case 1:return this.getRGB();case 2:return this.getPRGB();case 3:return this.getRGBA();case 4:return this.getPRGBA();case 5:return this.getHSL();case 6:return this.getHSLA();case 7:return this._decimal}return this.getHex()};
Df.Color.prototype._listeners=null;Df.Color.prototype._isSubscribed=function(l){return null!=this._listeners[l]};Df.Color.prototype.subscribe=function(l,b){this._isSubscribed(l)||(this._listeners[l]=[]);this._listeners[l].push(b)};Df.Color.prototype.unsubscribe=function(l,b){if(this._isSubscribed(l))for(var c=this._listeners[l],g=0,a=c.length;g<a;g++)if(c[g]===b)return c.splice(g,1),this.unsubscribe(l,b)};Df.Color.prototype.broadcast=function(l,b){if(this._isSubscribed(l)){l=this._listeners[l];for(var c=
l.length,g=0;g<c;g++)l[g].apply(this,b)}};Df.Color.prototype.tween=function(l,b){b instanceof Df.Color||(b=new Df.Color(b));var c=+new Date,g=this;this.broadcast("tweenStart");var a=setInterval(function(){var d=Math.min(1,(+new Date-c)/l);g.interpolate(b,d);g.broadcast("tweenProgress");1==d&&(clearInterval(a),g.broadcast("tweenComplete"))},20);return a};Df.Color.prototype.bind=function(l,b){var c=this;this.subscribe("updated",function(){l[b]=c.toString()})};Df.Color.random=function(){return new Df.Color(Df.absround(16777215*
Math.random()))};Df.Color.bind=function(l,b){var c=new Df.Color(l[b]);c.bind(l,b);return c};var ek=window.lively.FreezerRuntime.recorderFor("lively.graphics/convert-css-length.js");ek.parseUnit=function(l,b){b||(b=[0,""]);l=String(l);var c=parseFloat(l,10);b[0]=c;b[1]=l.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return b};ek.unit=function(l){return ek.parseUnit(l)[1]};ek.unitLess=function(l){return ek.parseUnit(l)[0]};ek.genericCssLengthParser=NI;ek.cssLengthToPixels=LB;ek.baseFontSize="16px";if("undefined"!==
typeof System&&System.get("@system-env").browser)try{ek.newBaseFontSize=ek.genericCssLengthParser(ek.baseFontSize)(window.getComputedStyle(document.body).fontSize),ek.newBaseFontSize&&"NaN"!==ek.newBaseFontSize.slice(0,3)&&(ek.baseFontSize=ek.newBaseFontSize)}catch(l){}ek.genericCssLengthParser=NI;var lS=ek.genericCssLengthParser(ek.baseFontSize);ek.parseCssLength=lS;ek.parseCssLength=lS;ek.cssLengthToPixels=LB;var bg=window.lively.FreezerRuntime.recorderFor("lively.graphics/geometry-2d.js");bg.rect=
ko;bg.pt=wl;bg.num=Gm;bg.string=Xj;bg.grid=qA;bg.cssLengthToPixels=LB;var kt=bd("P",function(){function l(b,c){Sd(this,l);this.x=b||0;this.y=c||0}uc(l,null,[{key:"ensure",value:function(b){return b&&b.isPoint?b:new bg.Point(b.x,b.y)}},{key:"polar",value:function(b,c){return new bg.Point(b*Math.cos(c),b*Math.sin(c))}},{key:"random",value:function(b){return new bg.Point(bg.num.randomSmallerInteger(b.x),bg.num.randomSmallerInteger(b.y))}},{key:"fromLiteral",value:function(b){return bg.pt(b.x,b.y)}},
{key:"fromTuple",value:function(b){return bg.pt(b[0],b[1])}}]);uc(l,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"toFixed",value:function(b){return new bg.Point(this.x.toFixed(b),this.y.toFixed(b))}},{key:"addPt",value:function(b){return new bg.Point(this.x+b.x,this.y+b.y)}},{key:"addXY",value:function(b,c){return new bg.Point(this.x+b,this.y+c)}},{key:"midPt",value:function(b){return new bg.Point((this.x+b.x)/2,(this.y+b.y)/2)}},{key:"subPt",value:function(b){return new bg.Point(this.x-
b.x,this.y-b.y)}},{key:"subXY",value:function(b,c){return new bg.Point(this.x-b,this.y-c)}},{key:"scaleBy",value:function(b,c){return new bg.Point(this.x*b,this.y*(c||b))}},{key:"scaleByPt",value:function(b){return new bg.Point(this.x*b.x,this.y*b.y)}},{key:"negated",value:function(){return new bg.Point(-this.x,-this.y)}},{key:"inverted",value:function(){return new bg.Point(1/this.x,1/this.y)}},{key:"invertedSafely",value:function(){return new bg.Point(this.x&&1/this.x,this.y&&1/this.y)}},{key:"lessPt",
value:function(b){return this.x<b.x&&this.y<b.y}},{key:"leqPt",value:function(b){return this.x<=b.x&&this.y<=b.y}},{key:"eqPt",value:function(b){return this.x==b.x&&this.y==b.y}},{key:"equals",value:function(b){return this.x==b.x&&this.y==b.y}},{key:"withX",value:function(b){return bg.pt(b,this.y)}},{key:"withY",value:function(b){return bg.pt(this.x,b)}},{key:"copy",value:function(){return new bg.Point(this.x,this.y)}},{key:"minPt",value:function(b,c){c||(c=new bg.Point(0,0));c.x=Math.min(this.x,
b.x);c.y=Math.min(this.y,b.y);return c}},{key:"maxPt",value:function(b,c){c||(c=new bg.Point(0,0));c.x=Math.max(this.x,b.x);c.y=Math.max(this.y,b.y);return c}},{key:"random",value:function(){return bg.Point.random(this)}},{key:"normalized",value:function(){var b=this.r();return bg.pt(this.x/b,this.y/b)}},{key:"fastNormalized",value:function(){var b=this.fastR();return bg.pt(this.x/b,this.y/b)}},{key:"dotProduct",value:function(b){return this.x*b.x+this.y*b.y}},{key:"matrixTransform",value:function(b,
c){var g=b.a*this.x+b.c*this.y+b.e;b=b.b*this.x+b.d*this.y+b.f;return c?Object.assign(c,{x:g,y:b}):bg.pt(g,b)}},{key:"matrixTransformDirection",value:function(b,c){var g=b.a*this.x+b.c*this.y;b=b.b*this.x+b.d*this.y;return c?Object.assign(c,{x:g,y:b}):bg.pt(g,b)}},{key:"griddedBy",value:function(b){return bg.pt(this.x-this.x%b.x,this.y-this.y%b.y)}},{key:"roundTo",value:function(b){return new bg.Point(bg.num.roundTo(this.x,b),bg.num.roundTo(this.y,b))}},{key:"dist",value:function(b){var c=this.x-
b.x;b=this.y-b.y;return Math.sqrt(c*c+b*b)}},{key:"distSquared",value:function(b){var c=this.x-b.x;b=this.y-b.y;return c*c+b*b}},{key:"nearestPointOnLineBetween",value:function(b,c){if(b.x==c.x)return bg.pt(b.x,this.y);if(b.y==c.y)return bg.pt(this.x,b.y);var g=b.x;b=b.y;var a=c.x-g;c=c.y-b;var d=((this.y-b)/a+(this.x-g)/c)/(a/c+c/a);return bg.pt(g+d*a,b+d*c)}},{key:"interpolate",value:function(b,c){return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:1)?bg.pt(bg.num.interpolate(b,this.x,
c.x),bg.num.interpolate(b,this.y,c.y)):bg.Point.polar(bg.num.interpolate(b,this.r(),c.r()),bg.num.interpolate(b,this.theta(),c.theta()))}},{key:"r",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"fastR",value:function(){for(var b=this.x*this.x+this.y*this.y,c=17,g=0;6>g;g++)c=(c+b/c)/2;return c}},{key:"theta",value:function(){return Math.atan2(this.y,this.x)}},{key:"asRectangle",value:function(){return new bg.Rectangle(this.x,this.y,0,0)}},{key:"extent",value:function(b){return new bg.Rectangle(this.x,
this.y,b.x,b.y)}},{key:"extentAsRectangle",value:function(){return new bg.Rectangle(0,0,this.x,this.y)}},{key:"lineTo",value:function(b){return new bg.Line(this,b)}},{key:"toTuple",value:function(){return[this.x,this.y]}},{key:"toLiteral",value:function(){return{x:this.x,y:this.y}}},{key:"toString",value:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)?bg.string.format("pt(%1.f,%1.f)",this.x,this.y):bg.string.format("pt(%10.d,%10.d)",this.x,this.y)}},{key:"inspect",value:function(){return JSON.stringify(this)}},
{key:"__serialize__",value:function(){return{__expr__:this.toString(!1),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}}},{key:"isPoint",get:function(){return!0}}]);return l}());bg.Point=kt;var fn=bd("a9",function(){function l(b,c,g,a){Sd(this,l);this.x=b||0;this.y=c||0;this.width=g||0;this.height=a||0}uc(l,[{key:"corners",get:function(){return["topLeft","topRight","bottomRight","bottomLeft"]}},{key:"sides",get:function(){return["leftCenter","rightCenter","topCenter","bottomCenter"]}}],[{key:"fromAny",
value:function(b,c){return bg.rect(b.minPt(c),b.maxPt(c))}},{key:"fromLiteral",value:function(b){return new bg.Rectangle(b.x,b.y,b.width,b.height)}},{key:"fromTuple",value:function(b){return new bg.Rectangle(b[0],b[1],b[2],b[3])}},{key:"unionPts",value:function(b){for(var c=b[0],g=b[0],a=1;a<b.length;a++)c=c.minPt(b[a]),g=g.maxPt(b[a]);return bg.rect(c,g)}},{key:"ensure",value:function(b){return b&&b.isRectangle?b:new bg.Rectangle(b.x,b.y,b.width,b.height)}},{key:"fromElement",value:function(b){if("function"===
typeof b.getBoundingClientRect){var c=b.getBoundingClientRect();return bg.rect(c.left,c.top,c.width,c.height)}if("http://www.w3.org/1999/xhtml"==b.namespaceURI){c=bg.cssLengthToPixels(b.style.left||"0px");var g=bg.cssLengthToPixels(b.style.top||"0px"),a=bg.cssLengthToPixels(b.style.width||"0px");b=bg.cssLengthToPixels(b.style.hieght||"0px");return new bg.Rectangle(c,g,a,b)}if("http://www.w3.org/2000/svg"==b.namespaceURI)return new bg.Rectangle(b.x.baseVal.value,b.y.baseVal.value,b.width.baseVal.value,
b.height.baseVal.value);throw Error("Cannot create Rectangle from "+b);}},{key:"inset",value:function(b,c,g,a){void 0===c&&(c=b);void 0===g&&(g=b);void 0===a&&(a=c);return new bg.Rectangle(b,c,g-b,a-c)}}]);uc(l,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"copy",value:function(){return new bg.Rectangle(this.x,this.y,this.width,this.height)}},
{key:"toFixed",value:function(b){return new bg.Rectangle(this.x.toFixed(b),this.y.toFixed(b),this.width.toFixed(b),this.height.toFixed(b))}},{key:"withWidth",value:function(b){return new bg.Rectangle(this.x,this.y,b,this.height)}},{key:"withHeight",value:function(b){return new bg.Rectangle(this.x,this.y,this.width,b)}},{key:"withX",value:function(b){return new bg.Rectangle(b,this.y,this.width,this.height)}},{key:"withY",value:function(b){return new bg.Rectangle(this.x,b,this.width,this.height)}},
{key:"withExtent",value:function(b){return new bg.Rectangle(this.x,this.y,b.x,b.y)}},{key:"withTopLeft",value:function(b){return bg.Rectangle.fromAny(b,this.bottomRight())}},{key:"withTopRight",value:function(b){return bg.Rectangle.fromAny(this.bottomLeft(),b)}},{key:"withBottomRight",value:function(b){return bg.Rectangle.fromAny(b,this.topLeft())}},{key:"withBottomLeft",value:function(b){return bg.Rectangle.fromAny(b,this.topRight())}},{key:"withLeftCenter",value:function(b){return new bg.Rectangle(b.x,
this.y,this.width+(this.x-b.x),this.height)}},{key:"withRightCenter",value:function(b){return new bg.Rectangle(this.x,this.y,b.x-this.x,this.height)}},{key:"withTopCenter",value:function(b){return new bg.Rectangle(this.x,b.y,this.width,this.height+(this.y-b.y))}},{key:"withBottomCenter",value:function(b){return new bg.Rectangle(this.x,this.y,this.width,b.y-this.y)}},{key:"withCenter",value:function(b){return new bg.Rectangle(b.x-this.width/2,b.y-this.height/2,this.width,this.height)}},{key:"insetBy",
value:function(b){return new bg.Rectangle(this.x+b,this.y+b,this.width-2*b,this.height-2*b)}},{key:"insetByPt",value:function(b){return new bg.Rectangle(this.x+b.x,this.y+b.y,this.width-2*b.x,this.height-2*b.y)}},{key:"grid",value:function(b,c){var g=this.width/c,a=this.height/b;return bg.grid.mapCreate(b,c,function(d,f){return new bg.Rectangle(g*f,a*d,g,a)})}},{key:"divide",value:function(b){var c=this;return b.map(function(g){return bg.rect(c.x+c.width*g.x,c.y+c.height*g.y,c.width*g.width,c.height*
g.height)})}},{key:"toTuple",value:function(){return[this.x,this.y,this.width,this.height]}},{key:"lineTo",value:function(b){var c=this.center(),g=b.center();g=c.lineTo(g);c=this.lineIntersection(g)[0];b=b.lineIntersection(g)[0];return c&&b&&c.lineTo(b)}},{key:"equals",value:function(b){return b?this.x==b.x&&this.y==b.y&&this.width==b.width&&this.height==b.height:!1}},{key:"inspect",value:function(){return JSON.stringify(this)}},{key:"topLeft",value:function(){return new bg.Point(this.x,this.y)}},
{key:"topRight",value:function(){return new bg.Point(this.maxX(),this.y)}},{key:"bottomRight",value:function(){return new bg.Point(this.maxX(),this.maxY())}},{key:"bottomLeft",value:function(){return new bg.Point(this.x,this.maxY())}},{key:"leftCenter",value:function(){return new bg.Point(this.x,this.center().y)}},{key:"rightCenter",value:function(){return new bg.Point(this.maxX(),this.center().y)}},{key:"topCenter",value:function(){return new bg.Point(this.center().x,this.y)}},{key:"bottomCenter",
value:function(){return new bg.Point(this.center().x,this.maxY())}},{key:"extent",value:function(){return new bg.Point(this.width,this.height)}},{key:"center",value:function(){return new bg.Point(this.x+this.width/2,this.y+this.height/2)}},{key:"topEdge",value:function(){return new bg.Line(this.topLeft(),this.topRight())}},{key:"bottomEdge",value:function(){return new bg.Line(this.bottomLeft(),this.bottomRight())}},{key:"leftEdge",value:function(){return new bg.Line(this.topLeft(),this.bottomLeft())}},
{key:"rightEdge",value:function(){return new bg.Line(this.topRight(),this.bottomRight())}},{key:"edges",value:function(){return[this.topEdge(),this.rightEdge(),this.bottomEdge(),this.leftEdge()]}},{key:"allPoints",value:function(){for(var b=this.x,c=this.y,g=this.width,a=this.height,d=[],f=c;f<c+a;f++)for(var k=b;k<b+g;k++)d.push(bg.pt(k,f));return d}},{key:"isNonEmpty",value:function(b){return 0<this.width&&0<this.height}},{key:"containsRect",value:function(b){return this.x<=b.x&&this.y<=b.y&&b.maxX()<=
this.maxX()&&b.maxY()<=this.maxY()}},{key:"intersects",value:function(b){return this.intersection(b).isNonEmpty()}},{key:"containsPoint",value:function(b){return this.x<=b.x&&b.x<=this.x+this.width&&this.y<=b.y&&b.y<=this.y+this.height}},{key:"translatedBy",value:function(b){return new bg.Rectangle(this.x+b.x,this.y+b.y,this.width,this.height)}},{key:"scaleByRect",value:function(b){return new bg.Rectangle(this.x+b.x*this.width,this.y+b.y*this.height,b.width*this.width,b.height*this.height)}},{key:"scaleRectIn",
value:function(b){return new bg.Rectangle((this.x-b.x)/b.width,(this.y-b.y)/b.height,this.width/b.width,this.height/b.height)}},{key:"scaleRectTo",value:function(b){var c,g;this.width>this.height?g=this.width:c=this.height;b=g?b.width/g:b.height/c;return this.withExtent(this.extent().scaleBy(b)).withCenter(this.center())}},{key:"expandBy",value:function(b){return this.insetBy(0-b)}},{key:"translateForInclusion",value:function(b){var c=b.x,g=b.y,a=c+b.width,d=g+b.height;a>this.right()&&(c-=a-this.right());
d>this.bottom()&&(g-=d-this.bottom());c<this.x&&(c=this.x);g<this.y&&(g=this.y);return bg.rect(c,g,b.width,b.height)}},{key:"transformRectForInclusion",value:function(b){var c=this.topLeft().maxPt(b.topLeft());b=c.addPt(b.extent());b=this.bottomRight().minPt(b);return bg.rect(c,b)}},{key:"insetByRect",value:function(b){return new bg.Rectangle(this.x+b.left(),this.y+b.top(),this.width-(b.left()+b.right()),this.height-(b.top()+b.bottom()))}},{key:"outsetByRect",value:function(b){return new bg.Rectangle(this.x-
b.left(),this.y-b.top(),this.width+(b.left()+b.right()),this.height+(b.top()+b.bottom()))}},{key:"interpolate",value:function(b,c){var g=this.topLeft(),a=this.bottomRight(),d=c.topLeft();c=c.bottomRight();return bg.Rectangle.fromAny(g.interpolate(b,d),a.interpolate(b,c))}},{key:"intersection",value:function(b){var c=Math.max(this.x,b.x),g=Math.max(this.y,b.y);return new bg.Rectangle(c,g,Math.min(this.x+this.width,b.x+b.width)-c,Math.min(this.y+this.height,b.y+b.height)-g)}},{key:"union",value:function(b){return bg.rect(this.topLeft().minPt(b.topLeft()),
this.bottomRight().maxPt(b.bottomRight()))}},{key:"lineIntersection",value:function(b){return this.edges().map(function(c){return c.intersection(b)}).filter(function(c){return!!c})}},{key:"dist",value:function(b){var c=this.closestPointToPt(b.center());b=b.closestPointToPt(c);return c.dist(b)}},{key:"relativeToAbsPoint",value:function(b){return new bg.Point(this.x+this.width*b.x,this.y+this.height*b.y)}},{key:"closestPointToPt",value:function(b){return bg.pt(Math.min(Math.max(this.x,b.x),this.maxX()),
Math.min(Math.max(this.y,b.y),this.maxY()))}},{key:"maxX",value:function(){return this.x+this.width}},{key:"maxY",value:function(){return this.y+this.height}},{key:"realWidth",value:function(){return 0>this.x?-this.x+this.width:this.width}},{key:"realHeight",value:function(){return 0>this.y?-this.y+this.height:this.height}},{key:"area",value:function(){return(0>this.width&&0>this.height?-1:1)*this.width*this.height}},{key:"randomPoint",value:function(){return bg.Point.random(bg.pt(this.width,this.height)).addPt(this.topLeft())}},
{key:"constrainPt",value:function(b){return b.maxPt(this.topLeft()).minPt(this.bottomRight())}},{key:"left",value:function(){return this.x}},{key:"right",value:function(){return this.maxX()}},{key:"top",value:function(){return this.y}},{key:"bottom",value:function(){return this.maxY()}},{key:"toInsetTuple",value:function(){return[this.left(),this.top(),this.right(),this.bottom()]}},{key:"toAttributeValue",value:function(b){b=.01;var c=[this.left()];this.top()===this.bottom()&&this.left()===this.right()?
this.top()===this.left()&&c.push(this.top()):c=c.concat([this.top(),this.right(),this.bottom()]);return c.invoke("roundTo",b||.01)}},{key:"toLiteral",value:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},{key:"partNamed",value:function(b){return this[b].call(this)}},{key:"withPartNamed",value:function(b,c){return this[this.setterName(b)].call(this,c)}},{key:"setterName",value:function(b){return"with"+b[0].toUpperCase()+b.slice(1)}},{key:"partNameNear",value:function(b,c,
g){b=this.partNameNearest(b,c);return c.dist(this.partNamed(b))<g?b:null}},{key:"partNameNearest",value:function(b,c){for(var g=1E99,a,d=0;d<b.length;d++){a=b[d];var f=c.dist(this.partNamed(a));if(f<g){var k=a;g=f}}return k}},{key:"toString",value:function(){return bg.string.format("rect(%s,%s,%s,%s)",this.x,this.y,this.width,this.height)}},{key:"__serialize__",value:function(){return{__expr__:this.toString(),bindings:{"lively.graphics/geometry-2d.js":["rect"]}}}},{key:"isRectangle",get:function(){return!0}}]);
return l}());bg.Rectangle=fn;var Fx=function(){function l(b,c,g){Sd(this,l);b?b.isPoint?(c=c||0,void 0===g&&(g=bg.pt(1,1)),this.a=this.ensureNumber(g.x*Math.cos(c)),this.b=this.ensureNumber(g.y*Math.sin(c)),this.c=this.ensureNumber(g.x*-Math.sin(c)),this.d=this.ensureNumber(g.y*Math.cos(c)),this.e=this.ensureNumber(b.x),this.f=this.ensureNumber(b.y),1<this.a&&(this.a=Math.round(this.a*Math.pow(10,2))/Math.pow(10,2)),1<this.d&&(this.d=Math.round(this.d*Math.pow(10,2))/Math.pow(10,2))):this.fromMatrix(b):
(this.a=this.d=1,this.b=this.c=this.e=this.f=0)}uc(l,[{key:"exp",get:function(){return 1E-4}}]);uc(l,[{key:"copy",value:function(){return new bg.Transform(this)}},{key:"fromMatrix",value:function(b){this.a=this.ensureNumber(b.a);this.b=this.ensureNumber(b.b);this.c=this.ensureNumber(b.c);this.d=this.ensureNumber(b.d);this.e=this.ensureNumber(b.e);this.f=this.ensureNumber(b.f)}},{key:"getRotation",value:function(){var b=bg.num.toDegrees(Math.atan2(-this.c,this.a));return Math.abs(b)<this.eps?0:b}},
{key:"getScale",value:function(){var b=this.a,c=this.c;b=Math.sqrt(b*b+c*c);return Math.abs(b-1)<this.eps?1:b}},{key:"getScalePoint",value:function(){var b=this.a,c=this.b,g=this.c,a=this.d,d=Math.atan2(-g,b);return bg.pt(Math.sqrt(b*b+g*g),Math.abs(c)>Math.abs(a)?c/Math.sin(d):a/Math.cos(d))}},{key:"getTranslation",value:function(){return bg.pt(this.e,this.f)}},{key:"isTranslation",value:function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d}},{key:"toSVGAttributeValue",value:function(){var b=
this.getTranslation();b="translate("+b.x+","+b.y+")";var c=this.getRotation(),g=this.getScalePoint();0!=c&&(b+=" rotate("+this.getRotation()+")");if(1!=g.x||1!=g.y)b+=" scale("+g.x+","+g.y+")";return b}},{key:"toCSSValue",value:function(b){var c="",g=this.getTranslation();c+="translate("+g.x.toFixed(2)+"px,"+g.y.toFixed(2)+"px)";if(b){g=b.width/2;var a=b.height/2;c+=" translate("+g.toFixed(2)+"px,"+a.toFixed(2)+"px)"}0!=this.getRotation()&&(c+=" rotate("+this.getRotation().toFixed(2)+"deg)");b&&(g=
b.width/2,a=b.height/2,c+=" translate("+(-1*g).toFixed(2)+"px,"+(-1*a).toFixed(2)+"px)");b=this.getScalePoint();if(1!=b.x||1!=b.y)c+=" scale("+b.x.toFixed(2)+","+b.y.toFixed(2)+")";return c}},{key:"toCSSTransformString",value:function(){var b=this.getRotation(),c=this.getScale();return"translate(".concat(this.e,"px,").concat(this.f,"px) rotate(").concat(b,"deg) scale(").concat(c,",").concat(c,")")}},{key:"toString",value:function(){return this.toCSSTransformString()}},{key:"toMatrix",value:function(){return this.copy()}},
{key:"transformPoint",value:function(b,c){return b.matrixTransform(this,c)}},{key:"transformDirection",value:function(b,c){return b.matrixTransformDirection(this,c)}},{key:"matrixTransformForMinMax",value:function(b,c,g){var a=this.a*b.x+this.c*b.y+this.e;b=this.b*b.x+this.d*b.y+this.f;a>g.x&&(g.x=a);b>g.y&&(g.y=b);a<c.x&&(c.x=a);b<c.y&&(c.y=b)}},{key:"transformRectToRect",value:function(b){var c=bg.pt(Infinity,Infinity),g=bg.pt(-Infinity,-Infinity);this.matrixTransformForMinMax(b.topLeft(),c,g);
this.matrixTransformForMinMax(b.bottomRight(),c,g);this.isTranslation()||(this.matrixTransformForMinMax(b.topRight(),c,g),this.matrixTransformForMinMax(b.bottomLeft(),c,g));return bg.rect(c,g)}},{key:"preConcatenate",value:function(b){var c=this.matrix_||this.toMatrix();this.a=b.a*c.a+b.c*c.b;this.b=b.b*c.a+b.d*c.b;this.c=b.a*c.c+b.c*c.d;this.d=b.b*c.c+b.d*c.d;this.e=b.a*c.e+b.c*c.f+b.e;this.f=b.b*c.e+b.d*c.f+b.f;this.matrix_=this.toMatrix();return this}},{key:"invert",value:function(){var b=this.copy(),
c=1/(b.a*b.d-b.c*b.b);this.a=b.d*c;this.b=-b.b*c;this.c=-b.c*c;this.d=b.a*c;this.e=(b.c*b.f-b.e*b.d)*c;this.f=-(b.a*b.f-b.b*b.e)*c;return this}},{key:"inverse",value:function(){var b=this.matrix_||this.toMatrix();b=new this.constructor(b);b.invert();return b}},{key:"ensureNumber",value:function(b){if(isNaN(b))throw Error("not a number");return b}},{key:"__serialize__",value:function(){return{__expr__:"new Transform({a: ".concat(this.a,", b: ").concat(this.b,", c: ").concat(this.c,", d: ").concat(this.d,
", e: ").concat(this.e,", f: ").concat(this.f,"})"),bindings:{"lively.graphics/geometry-2d.js":["Transform"]}}}},{key:"isTransform",get:function(){return!0}}]);return l}();bg.Transform=Fx;var LA=function(){function l(b,c){Sd(this,l);this.start=b;this.end=c}uc(l,null,[{key:"fromCoords",value:function(b,c,g,a){return new bg.Line(bg.pt(b,c),bg.pt(g,a))}}]);uc(l,[{key:"withStart",value:function(b){return new bg.Line(b,this.end)}},{key:"withEnd",value:function(b){return new bg.Line(this.start,b)}},{key:"sampleN",
value:function(b){b=b||10;for(var c=this.end.subPt(this.start).scaleBy(1/b),g=[],a=0;a<=b;a++)g.push(this.start.addPt(c.scaleBy(a)));return g}},{key:"sample",value:function(b){return this.sampleN(this.length()/b)}},{key:"length",value:function(){return this.start.dist(this.end)}},{key:"equals",value:function(b){return b?this.start.eqPt(b.start)&&this.end.eqPt(b.end):!1}},{key:"distanceFromLine",value:function(b){var c=this.start.x,g=this.start.y,a=this.end.x,d=this.end.y;return Math.abs((d-g)*b.x-
(a-c)*b.y+a*g-d*c)/Math.sqrt(Math.pow(d-g,2)+Math.pow(a-c,2))}},{key:"includesPoint",value:function(b,c){var g=this.start.x,a=this.start.y,d=this.end.x,f=this.end.y,k=b.x;b=b.y;var n=0===(d-g)*(b-a)-(k-g)*(f-a);if(c||!n)return n;c=Math.min(a,f);n=Math.max(g,d);a=Math.max(a,f);return Math.min(g,d)<=k&&k<=n&&c<=b&&b<=a}},{key:"intersection",value:function(b,c){var g=this.start,a=this.end,d=b.start,f=b.end;b=g.x;g=g.y;var k=a.x;a=a.y;var n=d.x;d=d.y;var p=f.x;f=f.y;var q=((b*a-g*k)*(n-p)-(b-k)*(n*f-
d*p))/((b-k)*(d-f)-(g-a)*(n-p)),r=((b*a-g*k)*(d-f)-(g-a)*(n*f-d*p))/((b-k)*(d-f)-(g-a)*(n-p));return Infinity!==q&&Infinity!==r&&(c||bg.num.between(q,b,k,1E-4)&&bg.num.between(r,g,a,1E-4)&&bg.num.between(q,n,p,1E-4)&&bg.num.between(r,d,f,1E-4))?bg.pt(q,r):null}},{key:"perpendicularLine",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"cc",a=this.start,
d=this.toVector();b=a.addPt(d.scaleBy(b));g=d.theta()+("cc"===g?-1:1)*Math.PI/2;return new bg.Line(b,b.addPt(bg.Point.polar(c,g)))}},{key:"toVector",value:function(){return this.end.subPt(this.start)}},{key:"toString",value:function(){return bg.string.format("Line((%s,%s), (%s,%s))",this.start.x,this.start.y,this.end.x,this.end.y)}},{key:"__serialize__",value:function(){return{__expr__:"Line.fromCoords(".concat(this.start.x,", ").concat(this.start.y,", ").concat(this.end.x,", ").concat(this.end.y,
")"),bindings:{"lively.graphics/geometry-2d.js":["Line"]}}}},{key:"isLine",get:function(){return!0}}]);return l}();bg.Line=LA;bg.rect=ko;bg.pt=wl;var f2=Object.freeze({__proto__:null,Point:kt,Rectangle:fn,Transform:Fx,Line:LA,rect:ko,pt:wl}),Tf=window.lively.FreezerRuntime.recorderFor("lively.graphics/color.js");Tf.floor=function(l){return Math.floor(255.99*l)};Tf.pad=function(l,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Tf.arr.last;return[].concat(db(l),db(Array(Math.max(b-l.length,
0)).fill(c(l))))};Tf.num=Gm;Tf.obj=bj;Tf.arr=aj;Tf.parse=rs;Tf.Rectangle=fn;Tf.rect=ko;Tf.pt=wl;Tf.Point=kt;Tf.rgbaRegex=/\s*rgba?\s*\(\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*(?:,\s*([0-9\.]+)\s*)?\)\s*/;var g2=function(){function l(){Sd(this,l)}uc(l,[{key:"offsets",value:function(){return null}},{key:"stepCount",value:function(){return 0}},{key:"stepSize",value:function(){return 0}},{key:"chord",value:function(b){var c=this,g=b.hue,a=b.saturation,d=b.brightness;return(this.offsets()||Tf.arr.range(0,
this.steps()).map(function(f){return f*c.stepSize()})).map(function(f){return Tf.Color.hsb(g+f%360,a,d)})}},{key:"name",get:function(){return"Color Harmony"}}]);return l}();Tf.ColorHarmony=g2;var NG=function(l){function b(){Sd(this,b);return c.apply(this,arguments)}vd(b,l);var c=qb(b);uc(b,[{key:"steps",value:function(){return 1}},{key:"stepSize",value:function(){return 180}},{key:"name",get:function(){return"Complement"}}]);return b}(Tf.ColorHarmony);Tf.Complementary=NG;var OG=function(l){function b(){Sd(this,
b);return c.apply(this,arguments)}vd(b,l);var c=qb(b);uc(b,[{key:"steps",value:function(){return 2}},{key:"stepSize",value:function(){return 120}},{key:"name",get:function(){return"Triadic"}}]);return b}(Tf.ColorHarmony);Tf.Triadic=OG;var PG=function(l){function b(){Sd(this,b);return c.apply(this,arguments)}vd(b,l);var c=qb(b);uc(b,[{key:"offsets",value:function(){return[0,60,180,240]}},{key:"name",get:function(){return"Tetradic"}}]);return b}(Tf.ColorHarmony);Tf.Tetradic=PG;var QG=function(l){function b(){Sd(this,
b);return c.apply(this,arguments)}vd(b,l);var c=qb(b);uc(b,[{key:"steps",value:function(){return 3}},{key:"stepSize",value:function(){return 90}},{key:"name",get:function(){return"Quadratic"}}]);return b}(Tf.ColorHarmony);Tf.Quadratic=QG;var RG=function(l){function b(){Sd(this,b);return c.apply(this,arguments)}vd(b,l);var c=qb(b);uc(b,[{key:"steps",value:function(){return 5}},{key:"offsets",value:function(){return[-60,-30,0,30,60]}},{key:"name",get:function(){return"Analogous"}}]);return b}(Tf.ColorHarmony);
Tf.Analogous=RG;var SG=function(l){function b(){Sd(this,b);return c.apply(this,arguments)}vd(b,l);var c=qb(b);uc(b,[{key:"offsets",value:function(){return[-30,-15,0,15,30]}},{key:"name",get:function(){return"Neutral"}}]);return b}(Tf.ColorHarmony);Tf.Neutral=SG;var Bn=bd("C",function(){function l(b,c,g,a){Sd(this,l);this.r=b?Tf.num.roundTo(Number.parseFloat(b),1E-4):0;this.g=c?Tf.num.roundTo(Number.parseFloat(c),1E-4):0;this.b=g?Tf.num.roundTo(Number.parseFloat(g),1E-4):0;this.a=a?Tf.num.roundTo(Number.parseFloat(a),
1E-4):0===a?0:1}uc(l,[{key:"isColor",get:function(){return!0}}],[{key:"random",value:function(b,c){void 0===b&&(b=0);void 0===c&&(c=255);return Tf.Color.rgb(Tf.num.random(b,c),Tf.num.random(b,c),Tf.num.random(b,c))}},{key:"hsb",value:function(b,c,g){if(0==c)return new Tf.Color(g,g,g);var a=b%360/60;b=Math.floor(a);var d=a-b;a=(1-c)*g;var f=(1-c*d)*g;c=(1-c*(1-d))*g;switch(b){case 0:return new Tf.Color(g,c,a);case 1:return new Tf.Color(f,g,a);case 2:return new Tf.Color(a,g,c);case 3:return new Tf.Color(a,
f,g);case 4:return new Tf.Color(c,a,g);case 5:return new Tf.Color(g,a,f);default:return new Tf.Color(0,0,0)}}},{key:"wheel",value:function(){return Tf.Color.wheelHsb(0<arguments.length&&void 0!==arguments[0]?arguments[0]:10,0,.9,.7)}},{key:"wheelHsb",value:function(b,c,g,a){for(var d=Array(b),f=360/Math.max(b,1),k=0;k<b;k++)d[k]=Tf.Color.hsb(c+k*f,g,a);return d}},{key:"rgb",value:function(b,c,g){return new Tf.Color(b/255,c/255,g/255)}},{key:"rgbHex",value:function(b){return(b=this.parseHex(b))&&0<=
b[0]&&0<=b[1]&&0<=b[2]?new Tf.Color(b[0],b[1],b[2]):null}},{key:"rgba",value:function(b,c,g,a){return new Tf.Color(b/255,c/255,g/255,a)}},{key:"fromLiteral",value:function(b){return new Tf.Color(b.r,b.g,b.b,b.a)}},{key:"fromTuple",value:function(b){return new Tf.Color(b[0],b[1],b[2],b[3])}},{key:"fromTuple8Bit",value:function(b){return new Tf.Color(b[0]/255,b[1]/255,b[2]/255,b[3]/255)}},{key:"fromString",value:function(b){return b&&"none"!==b?this.fromTuple(this.parse(b)):null}},{key:"parse",value:function(b){return b&&
"none"!==b?(b=Tf.parse(b),[b.red,b.green,b.blue,b.alpha]):null}},{key:"parseRGB",value:function(b){var c=b.match(this.rgbaRegex);if(c){b=parseInt(c[1])/(c[2]?100:255);var g=parseInt(c[3])/(c[4]?100:255),a=parseInt(c[5])/(c[6]?100:255);c=c[7]?parseFloat(c[7]):1;return[b,g,a,c]}return null}},{key:"parseHex",value:function(b){var c;var g="";for(c=0;c<b.length;c++){var a=b[c].toLowerCase();if("a"==a||"b"==a||"c"==a||"d"==a||"e"==a||"f"==a||"0"==a||"1"==a||"2"==a||"3"==a||"4"==a||"5"==a||"6"==a||"7"==
a||"8"==a||"9"==a)g+=a}if(6==g.length)c=g.substring(0,2),b=g.substring(2,4),g=g.substring(4,6);else if(3==g.length)c=g.substring(0,1),c+=c,b=g.substring(1,2),b+=b,g=g.substring(2,3),g+=g;else return null;c=parseInt(c,16)/255;b=parseInt(b,16)/255;g=parseInt(g,16)/255;return[c,b,g]}},{key:"rgbaRegex",get:function(){return Tf.rgbaRegex}},{key:"named",get:function(){return this._named?this._named:this._named={black:new Tf.Color(0,0,0),almostBlack:Tf.Color.rgb(64,64,64),white:new Tf.Color(1,1,1),gray:new Tf.Color(.8,
.8,.8),red:new Tf.Color(.8,0,0),green:new Tf.Color(0,.8,0),yellow:new Tf.Color(.8,.8,0),blue:new Tf.Color(0,0,.8),purple:new Tf.Color(.5,0,.5),magenta:new Tf.Color(1,0,1),pink:Tf.Color.rgb(255,30,153),turquoise:Tf.Color.rgb(0,240,255),tangerine:Tf.Color.rgb(242,133,0),orange:Tf.Color.rgb(255,153,0),cyan:Tf.Color.rgb(0,255,255),brown:Tf.Color.rgb(182,67,0),limeGreen:Tf.Color.rgb(51,255,0),darkGray:Tf.Color.rgb(102,102,102),lightGray:Tf.Color.rgb(230,230,230),veryLightGray:Tf.Color.rgb(243,243,243),
transparent:Tf.Color.rgba(69,85,134,0),lively:Tf.Color.rgb(245,124,0)}}}]);uc(l,[{key:"grayValue",value:function(){return(this.r+this.g+this.b)/3}},{key:"luma",value:function(){return.299*this.r+.587*this.g+.114*this.b}},{key:"equals",value:function(b){return b?this.r===b.r&&this.g===b.g&&this.b===b.b&&this.a===b.a:!1}},{key:"darker",value:function(b){var c=this.mixedWith(Tf.Color.black,.5);return 1<b?c.darker(b-1):c}},{key:"lighter",value:function(b){if(0==b)return this;var c=this.mixedWith(Tf.Color.white,
.5);return 1<b?c.lighter(b-1):c}},{key:"interpolate",value:function(b,c){if(c.isGradient)return c.interpolate(1-b,this);c=Tf.obj.isArray(c)?c:c.toTuple();return Tf.Color.fromTuple(this.toTuple().map(function(g,a){return Tf.num.interpolate(b,g,c[a])}))}},{key:"toString",value:function(){return 1===this.a?"rgb("+Tf.floor(this.r)+","+Tf.floor(this.g)+","+Tf.floor(this.b)+")":this.toRGBAString()}},{key:"toRGBAString",value:function(){return"rgba("+Math.floor(255.99*this.r)+","+Math.floor(255.99*this.g)+
","+Math.floor(255.99*this.b)+","+this.a+")"}},{key:"toHexString",value:function(){function b(c){for(;2>c.length;)c="0"+c;return c}return b(Math.floor(255.99*this.r).toString(16))+b(Math.floor(255.99*this.g).toString(16))+b(Math.floor(255.99*this.b).toString(16))}},{key:"toTuple",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toTuple8Bit",value:function(){return[255*this.r,255*this.g,255*this.b,255*this.a]}},{key:"toHSB",value:function(){var b=Math.max(this.r,this.g,this.b),c=Math.min(this.r,
this.g,this.b),g;b==c?g=0:b==this.r?g=(this.g-this.b)/(b-c)*60:b==this.g?g=60*(2+(this.b-this.r)/(b-c)):b==this.b&&(g=60*(4+(this.r-this.g)/(b-c)));return[(g+360)%360,0==b?0:(b-c)/b,b]}},{key:"withA",value:function(b){return new Tf.Color(this.r,this.g,this.b,b)}},{key:"mixedWith",value:function(b,c){var g=1-c;return new Tf.Color(this.r*c+b.r*g,this.g*c+b.g*g,this.b*c+b.b*g,this.a*c+b.a*g)}},{key:"invert",value:function(){return Tf.Color.rgb(255*(1-this.r),255*(1-this.g),255*(1-this.b))}},{key:"toCSSString",
value:function(){return this.toRGBAString()}},{key:"__serialize__",value:function(){return{__expr__:"Color."+this.toString(),bindings:{"lively.graphics/color.js":["Color"]}}}},{key:"toJSExpr",value:function(){return"Color.".concat(this.name||this.toString())}},{key:"name",get:function(){var b=this,c=Tf.Color.named;return Object.keys(c).find(function(g){return c[g].equals(b)})}}]);return l}());Tf.Color=Bn;Object.assign(Tf.Color,Tf.Color.named);var h2=function(){function l(b){Sd(this,l);this.stops=
b?b.map(function(c){return c}):[]}uc(l,null,[{key:"create",value:function(b){var c=[],g;for(g in b)c.push({offset:Number(g),color:b[g]});return new this({stops:c})}},{key:"parse",value:function(b){return b.startsWith("radial-gradient")?Tf.RadialGradient.parse(b):b.startsWith("linear-gradient")?Tf.LinearGradient.parse(b):Tf.Color.fromTuple(Tf.Color.parse(b))}}]);uc(l,[{key:"equals",value:function(b){return b&&b.isGradient?this.toString()==b.toString():!1}},{key:"getStopsLighter",value:function(b){return this.stops.map(function(c){return{offset:c.offset,
color:c.color.lighter(b)}})}},{key:"getStopsDarker",value:function(b){return this.stops.map(function(c){return{offset:c.offset,color:c.color.darker(b)}})}},{key:"interpolateStops",value:function(b,c){var g=Tf.pad(this.stops,c.length);c=Tf.pad(c,this.stops.length);var a=[],d;for(d=0;d<g.length;d++){Tf.__inter0__=g[d];var f=Tf.__inter0__.color;var k=Tf.__inter0__.offset;Tf.__inter1__=c[d];var n=Tf.__inter1__.color;var p=Tf.__inter1__.offset;a.push({color:f.interpolate(b,n),offset:Tf.num.interpolate(b,
k,p)})}return a}},{key:"__serialize__",value:function(){return{__expr__:this.toJSExpr(),bindings:{"lively.graphics/color.js":["Color","RadialGradient","LinearGradient"],"lively.graphics/geometry-2d.js":["pt","rect"]}}}},{key:"isGradient",get:function(){return!0}}]);return l}();Tf.Gradient=h2;var TG=bd("ah",function(l){function b(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};var a=g.stops;g=g.vector;Sd(this,b);a=c.call(this,a);a.vector=g;return a}vd(b,l);var c=qb(b);uc(b,null,[{key:"parse",
value:function(g){g.match(/\((.*)\)/)[1].split(",")}}]);uc(b,[{key:"angleToRect",value:function(g){return Tf.Point.polar(1,g).extentAsRectangle().withCenter(Tf.pt(.5,.5))}},{key:"vectorAsAngle",value:function(){return this.vector.extent().theta()}},{key:"toString",value:function(){return this.toCSSString()}},{key:"lighter",value:function(g){return new this.constructor({stops:this.getStopsLighter(g),vector:this.vector})}},{key:"darker",value:function(g){return new this.constructor({stops:this.getStopsDarker(g),
vector:this.vector})}},{key:"interpolate",value:function(g,a){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{width:1E3,height:1E3};a.isColor&&(a=new Tf.LinearGradient({vector:this.vector,stops:this.stops.map(function(f){return{color:a,offset:f.offset}})}));if("radialGradient"==a.type){if(.5>g)return new Tf.LinearGradient({vector:this.vector.interpolate(g,Tf.rect(0,0,0,1)),stops:this.interpolateStops(g,a.stops.map(function(f,k){k=f.color;f.offset;return{color:k,offset:1}}))});if(.5<=
g)return new Tf.RadialGradient({stops:this.interpolateStops(g,a.stops),focus:Tf.pt(.5,0).interpolate(g,a.focus),bounds:Tf.rect(0,0,100*d.width,2*d.height).interpolate(g,a.bounds)})}return new Tf.LinearGradient({stops:this.interpolateStops(g,a.stops),vector:this.vector.interpolate(g,a.vector)})}},{key:"toCSSString",value:function(){var g="linear-gradient("+(Tf.num.toDegrees(this.vectorAsAngle())+90+"deg,")+this.stops.map(function(a){return"".concat(a.color.toRGBAString()," ").concat((100*a.offset).toFixed()+
"%")}).join(",");return g+")"}},{key:"toJSExpr",value:function(){var g=this.stops.map(function(a){return"{offset: ".concat(a.offset,", color: ").concat(a.color.toJSExpr(),"}")}).join(", ");return"new LinearGradient({stops: [".concat(g,"], vector: ").concat(this.vector,"})")}},{key:"type",get:function(){return"linearGradient"}},{key:"vectors",get:function(){return{northsouth:Tf.rect(Tf.pt(0,0),Tf.pt(0,1)),northeast:Tf.rect(Tf.pt(1,0),Tf.pt(0,1)),westeast:Tf.rect(Tf.pt(1,0),Tf.pt(0,0)),southeast:Tf.rect(Tf.pt(1,
1),Tf.pt(0,0)),southnorth:Tf.rect(Tf.pt(0,1),Tf.pt(0,0)),southwest:Tf.rect(Tf.pt(0,1),Tf.pt(1,0)),eastwest:Tf.rect(Tf.pt(0,0),Tf.pt(1,0)),northwest:Tf.rect(Tf.pt(0,0),Tf.pt(1,1))}}},{key:"vector",get:function(){return this._vector},set:function(g){this._vector=g?"string"===typeof g?this.vectors[g.toLowerCase()]:"number"===typeof g?this.angleToRect(g):g:this.vectors.northsouth}}]);return b}(Tf.Gradient));Tf.LinearGradient=TG;var UG=bd("b6",function(l){function b(){var g=0<arguments.length&&void 0!==
arguments[0]?arguments[0]:{};var a=g.stops;var d=g.focus;g=g.bounds;Sd(this,b);a=c.call(this,a);a.focus=d||Tf.pt(.5,.5);a.bounds=g||new Tf.Rectangle(0,0,20,20);return a}vd(b,l);var c=qb(b);uc(b,null,[{key:"parse",value:function(g){g.match(/\((.*)\)/)[1].split(",")}}]);uc(b,[{key:"toString",value:function(){return this.toCSSString()}},{key:"lighter",value:function(g){return new this.constructor({stops:this.getStopsLighter(g),focus:this.focus,bounds:this.bounds})}},{key:"darker",value:function(){return new this.constructor({stops:this.getStopsDarker(),
focus:this.focus,bounds:this.bounds})}},{key:"interpolate",value:function(g,a){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{height:1E3,width:1E3};a.isColor&&(a=new Tf.RadialGradient({vector:this.vector,bounds:this.bounds,stops:this.stops.map(function(f){return{color:a,offset:f.offset}})}));return"linearGradient"==a.type?a.interpolate(1-g,this,d):new Tf.RadialGradient({bounds:this.bounds.interpolate(g,a.bounds),stops:this.interpolateStops(g,a.stops),focus:this.focus.interpolate(g,
a.focus)})}},{key:"toCSSString",value:function(){var g=this.focus.scaleBy(100),a=this.bounds.extent();g="radial-gradient(".concat(a.x/2,"px ").concat(a.y/2,"px at ").concat(g.x,"% ").concat(g.y,"%");for(a=0;a<this.stops.length;a++)g+=",".concat(this.stops[a].color.toRGBAString()," ").concat((100*this.stops[a].offset).toFixed()+"%");return g+")"}},{key:"toJSExpr",value:function(){var g=this.stops.map(function(a){return"{offset: ".concat(a.offset,", color: ").concat(a.color.toJSExpr(),"}")}).join(", ");
return"new RadialGradient({stops: [".concat(g,"], bounds: ").concat(this.bounds,", focus: ").concat(this.focus.toString(!1),"})")}},{key:"type",get:function(){return"radialGradient"}}]);return b}(Tf.Gradient));Tf.RadialGradient=UG;var MA=bd("b8","#1abc9c #e8f8f5 #d1f2eb #a3e4d7 #76d7c4 #48c9b0 #1abc9c #17a589 #148f77 #117864 #0e6251 #16a085 #e8f6f3 #d0ece7 #a2d9ce #73c6b6 #45b39d #16a085 #138d75 #117a65 #0e6655 #0b5345 #2ecc71 #eafaf1 #d5f5e3 #abebc6 #82e0aa #58d68d #2ecc71 #28b463 #239b56 #1d8348 #186a3b #27ae60 #e9f7ef #d4efdf #a9dfbf #7dcea0 #52be80 #27ae60 #229954 #1e8449 #196f3d #145a32 #3498db #ebf5fb #d6eaf8 #aed6f1 #85c1e9 #5dade2 #3498db #2e86c1 #2874a6 #21618c #1b4f72 #2980b9 #eaf2f8 #d4e6f1 #a9cce3 #7fb3d5 #5499c7 #2980b9 #2471a3 #1f618d #1a5276 #154360 #9b59b6 #f5eef8 #ebdef0 #d7bde2 #c39bd3 #af7ac5 #9b59b6 #884ea0 #76448a #633974 #512e5f #8e44ad #f4ecf7 #e8daef #d2b4de #bb8fce #a569bd #8e44ad #7d3c98 #6c3483 #5b2c6f #4a235a #34495e #ebedef #d6dbdf #aeb6bf #85929e #5d6d7e #34495e #2e4053 #283747 #212f3c #1b2631 #2c3e50 #eaecee #d5d8dc #abb2b9 #808b96 #566573 #2c3e50 #273746 #212f3d #1c2833 #17202a #f1c40f #fef9e7 #fcf3cf #f9e79f #f7dc6f #f4d03f #f1c40f #d4ac0d #b7950b #9a7d0a #7d6608 #f39c12 #fef5e7 #fdebd0 #fad7a0 #f8c471 #f5b041 #f39c12 #d68910 #b9770e #9c640c #7e5109 #e67e22 #fdf2e9 #fae5d3 #f5cba7 #f0b27a #eb984e #e67e22 #ca6f1e #af601a #935116 #784212 #d35400 #fbeee6 #f6ddcc #edbb99 #e59866 #dc7633 #d35400 #ba4a00 #a04000 #873600 #6e2c00 #e74c3c #fdedec #fadbd8 #f5b7b1 #f1948a #ec7063 #e74c3c #cb4335 #b03a2e #943126 #78281f #c0392b #f9ebea #f2d7d5 #e6b0aa #d98880 #cd6155 #c0392b #a93226 #922b21 #7b241c #641e16 #ecf0f1 #fdfefe #fbfcfc #f7f9f9 #f4f6f7 #f0f3f4 #ecf0f1 #d0d3d4 #b3b6b7 #979a9a #7b7d7d #bdc3c7 #f8f9f9 #f2f3f4 #e5e7e9 #d7dbdd #cacfd2 #bdc3c7 #a6acaf #909497 #797d7f #626567 #95a5a6 #f4f6f6 #eaeded #d5dbdb #bfc9ca #aab7b8 #95a5a6 #839192 #717d7e #5f6a6a #4d5656 #7f8c8d #f2f4f4 #e5e8e8 #ccd1d1 #b2babb #99a3a4 #7f8c8d #707b7c #616a6b #515a5a #424949".split(" "));
Tf.flatDesignColors=MA;Tf.flatDesignColors=MA;var NA=bd("b9","#f44336 #ffebee #ffcdd2 #ef9a9a #e57373 #ef5350 #f44336 #e53935 #d32f2f #c62828 #b71c1c #ff8a80 #ff5252 #ff1744 #d50000 #e91e63 #fce4ec #f8bbd0 #f48fb1 #f06292 #ec407a #e91e63 #d81b60 #c2185b #ad1457 #880e4f #ff80ab #ff4081 #f50057 #c51162 #9c27b0 #f3e5f5 #e1bee7 #ce93d8 #ba68c8 #ab47bc #9c27b0 #8e24aa #7b1fa2 #6a1b9a #4a148c #ea80fc #e040fb #d500f9 #aa00ff #673ab7 #ede7f6 #d1c4e9 #b39ddb #9575cd #7e57c2 #673ab7 #5e35b1 #512da8 #4527a0 #311b92 #b388ff #7c4dff #651fff #6200ea #3f51b5 #e8eaf6 #c5cae9 #9fa8da #7986cb #5c6bc0 #3f51b5 #3949ab #303f9f #283593 #1a237e #8c9eff #536dfe #3d5afe #304ffe #2196f3 #e3f2fd #bbdefb #90caf9 #64b5f6 #42a5f5 #2196f3 #1e88e5 #1976d2 #1565c0 #0d47a1 #82b1ff #448aff #2979ff #2962ff #03a9f4 #e1f5fe #b3e5fc #81d4fa #4fc3f7 #29b6f6 #03a9f4 #039be5 #0288d1 #0277bd #01579b #80d8ff #40c4ff #00b0ff #0091ea #00bcd4 #e0f7fa #b2ebf2 #80deea #4dd0e1 #26c6da #00bcd4 #00acc1 #0097a7 #00838f #006064 #84ffff #18ffff #00e5ff #00b8d4 #009688 #e0f2f1 #b2dfdb #80cbc4 #4db6ac #26a69a #009688 #00897b #00796b #00695c #004d40 #a7ffeb #64ffda #1de9b6 #00bfa5 #4caf50 #e8f5e9 #c8e6c9 #a5d6a7 #81c784 #66bb6a #4caf50 #43a047 #388e3c #2e7d32 #1b5e20 #b9f6ca #69f0ae #00e676 #00c853 #8bc34a #f1f8e9 #dcedc8 #c5e1a5 #aed581 #9ccc65 #8bc34a #7cb342 #689f38 #558b2f #33691e #ccff90 #b2ff59 #76ff03 #64dd17 #cddc39 #f9fbe7 #f0f4c3 #e6ee9c #dce775 #d4e157 #cddc39 #c0ca33 #afb42b #9e9d24 #827717 #f4ff81 #eeff41 #c6ff00 #aeea00 #ffeb3b #fffde7 #fff9c4 #fff59d #fff176 #ffee58 #ffeb3b #fdd835 #fbc02d #f9a825 #f57f17 #ffff8d #ffff00 #ffea00 #ffd600 #ffc107 #fff8e1 #ffecb3 #ffe082 #ffd54f #ffca28 #ffc107 #ffb300 #ffa000 #ff8f00 #ff6f00 #ffe57f #ffd740 #ffc400 #ffab00 #ff9800 #fff3e0 #ffe0b2 #ffcc80 #ffb74d #ffa726 #ff9800 #fb8c00 #f57c00 #ef6c00 #e65100 #ffd180 #ffab40 #ff9100 #ff6d00 #ff5722 #fbe9e7 #ffccbc #ffab91 #ff8a65 #ff7043 #ff5722 #f4511e #e64a19 #d84315 #bf360c #ff9e80 #ff6e40 #ff3d00 #dd2c00 #795548 #efebe9 #d7ccc8 #bcaaa4 #a1887f #8d6e63 #795548 #6d4c41 #5d4037 #4e342e #3e2723 #9e9e9e #fafafa #f5f5f5 #eeeeee #e0e0e0 #bdbdbd #9e9e9e #757575 #616161 #424242 #212121 #607d8b #eceff1 #cfd8dc #b0bec5 #90a4ae #78909c #607d8b #546e7a #455a64 #37474f #263238 #ffffff #000000".split(" "));
Tf.materialDesignColors=NA;Tf.materialDesignColors=NA;var OA=bd("b7","ccff00 ccff33 ccff66 ccff99 ccffcc ccffff ffffff ffffcc ffff99 ffff66 ffff33 ffff00 cccc00 cccc33 cccc66 cccc99 cccccc ccccff ffccff ffcccc ffcc99 ffcc66 ffcc33 ffcc00 cc9900 cc9933 cc9966 cc9999 cc99cc cc99ff ff99ff ff99cc ff9999 ff9966 ff9933 ff9900 cc6600 cc6633 cc6666 cc6699 cc66cc cc66ff ff66ff ff66cc ff6699 ff6666 ff6633 ff6600 cc3300 cc3333 cc3366 cc3399 cc33cc cc33ff ff33ff ff33cc ff3399 ff3366 ff3333 ff3300 cc0000 cc0033 cc0066 cc0099 cc00cc cc00ff ff00ff ff00cc ff0099 ff0066 ff0033 ff0000 660000 660033 660066 660099 6600cc 6600ff 9900ff 9900cc 990099 990066 990033 990000 663300 663333 663366 663399 6633cc 6633ff 9933ff 9933cc 993399 993366 993333 993300 666600 666633 666666 666699 6666cc 6666ff 9966ff 9966cc 996699 996666 996633 996600 669900 669933 669966 669999 6699cc 6699ff 9999ff 9999cc 999999 999966 999933 999900 66cc00 66cc33 66cc66 66cc99 66cccc 66ccff 99ccff 99cccc 99cc99 99cc66 99cc33 99cc00 66ff00 66ff33 66ff66 66ff99 66ffcc 66ffff 99ffff 99ffcc 99ff99 99ff66 99ff33 99ff00 00ff00 00ff33 00ff66 00ff99 00ffcc 00ffff 33ffff 33ffcc 33ff99 33ff66 33ff33 33ff00 00cc00 00cc33 00cc66 00cc99 00cccc 00ccff 33ccff 33cccc 33cc99 33cc66 33cc33 33cc00 009900 009933 009966 009999 0099cc 0099ff 3399ff 3399cc 339999 339966 339933 339900 006600 006633 006666 006699 0066cc 0066ff 3366ff 3366cc 336699 336666 336633 336600 003300 003333 003366 003399 0033cc 0033ff 3333ff 3333cc 333399 333366 333333 333300 000000 000033 000066 000099 0000cc 0000ff 3300ff 3300cc 330099 330066 330033 330000".split(" "));
Tf.webSafeColors=OA;Tf.webSafeColors=OA;var i2=Object.freeze({__proto__:null,Complementary:NG,Triadic:OG,Tetradic:PG,Quadratic:QG,Analogous:RG,Neutral:SG,Color:Bn,LinearGradient:TG,RadialGradient:UG,flatDesignColors:MA,materialDesignColors:NA,webSafeColors:OA}),mS=window.lively.FreezerRuntime.recorderFor("lively.graphics/index.js");Object.assign(mS,i2);Object.assign(mS,f2);var j2=Object.freeze({__proto__:null,Complementary:NG,Triadic:OG,Tetradic:PG,Quadratic:QG,Analogous:RG,Neutral:SG,Color:Bn,LinearGradient:TG,
RadialGradient:UG,flatDesignColors:MA,materialDesignColors:NA,webSafeColors:OA,Point:kt,Rectangle:fn,Transform:Fx,Line:LA,rect:ko,pt:wl});bd("c9",j2);var Im=window.lively.FreezerRuntime.recorderFor("lively.morphic/config.js");Im.parseURLQuery=function(){if("undefined"===typeof document||!document.location)return{};var l=(document.location.hash||document.location.search).slice(1);l=l&&l.split("&");var b={};if(l)for(var c=0;c<l.length;c++){var g=l[c].split("="),a=g[0],d=!0;if(1<g.length&&(d=decodeURIComponent(g.slice(1).join("=")),
d.match(/^(true|false|null|[0-9"[{].*)$/)))try{d=JSON.parse(d)}catch(f){"["===d[0]&&(d=d.slice(1,-1).split(","))}b[a]=d}return b};Im.Rectangle=fn;Im.Color=Bn;Im.joinPath=$c;Im.baseURL="undefined"!==typeof window&&window.SERVER_URL||"undefined"!==typeof System&&System.baseURL||"undefined"!==typeof document&&document.location.origin||"undefined"!==typeof process&&"file://"+process.env.lv_next_dir;"undefined"!==typeof $world&&$world.withAllSubmorphsDo(function(l){return l.hasOwnProperty("_cachedKeyhandlers")&&
(l._cachedKeyhandlers=null)});Im.config={onloadURLQuery:Im.parseURLQuery(),defaultShadow:{fast:!0,distance:18,blur:30,color:Im.Color.black.withA(.2),spread:0},undoLevels:20,halosEnabled:!0,altClickDefinesThat:!0,verboseLogging:!0,maxStatusMessages:5,repeatClickInterval:250,longClick:{minDur:500,maxDur:1E3,maxDist:2},showTooltipsAfter:.8,users:{authServerURL:"undefined"!==typeof window&&window.AUTH_SERVER_URL||"https://auth.lively-next.org",autoLoginAsGuest:!1},ide:{workerEnabled:!1,js:{ignoredPackages:["lively.web",
"no group",function(l){return l.includes("lively.morphic/objectdb")||l.includes("lively.next-node_modules")||l.includes("node_modules")||l.includes("custom-npm-modules")||l.includes("mocha-es6")||l.includes("test-resources/es6")}],defaultInspectorImports:{"lively.graphics":["pt","Color"]}},modes:{aliases:{text:"text",sh:"shell",markdown:"md",javascript:"js",htmlmixed:"html",haskell:"hs",python:"py",less:"css/less"}}},globalKeyBindings:[{keys:{mac:"Meta-Z",win:"Ctrl-Z"},command:"undo"},{keys:{mac:"Meta-Shift-Z",
win:"Ctrl-Shift-Z"},command:"redo"},{keys:"Alt-X",command:"run command"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"save world"},{keys:"Meta-Shift-L s a v e",command:"save this world"},{keys:"Meta-H",command:"show halo for focused morph"},{keys:"Meta-Shift-L C O P Y",command:"copy morph"},{keys:"Alt-M",command:"select morph"},{keys:"Escape",command:"escape"},{keys:{win:"Ctrl-Escape",mac:"Meta-Escape"},command:"close active window or morph"},{keys:"Alt-Shift-C",command:"toggle minimize active window"},
{keys:{mac:"Meta-Shift-L W S",win:"Ctrl-Shift-L W S"},command:"search workspaces"},{keys:{mac:"Meta-O",win:"Ctrl-O"},command:"open status message of focused morph"},{keys:{win:"Ctrl-K",mac:"Meta-K"},command:{command:"open javascript workspace",onlyWhenFocused:!1}},{keys:"Alt-Shift-1",command:{command:"open shell terminal",onlyWhenFocused:!1}},{keys:{win:"Ctrl-B",mac:"Meta-B"},command:{command:"open browser",onlyWhenFocused:!1}},{keys:{win:"Ctrl-P",mac:"Meta-P"},command:{command:"open PartsBin",onlyWhenFocused:!0}},
{keys:"Alt-T",command:{command:"choose and browse module",onlyWhenFocused:!1}},{keys:"Alt-Shift-T",command:{command:"choose and browse package resources",onlyWhenFocused:!1}},{keys:{mac:"Ctrl-X D"},command:"open file browser"},{keys:{mac:"Ctrl-X Ctrl-F"},command:"open file"},{keys:{win:"Ctrl-Shift-F",mac:"Meta-Shift-F"},command:{command:"open code search",onlyWhenFocused:!1}},{keys:"Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:1}}},{keys:"Right",command:{command:"move or resize halo target",
args:{what:"move",direction:"right",offset:1}}},{keys:"Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:1}}},{keys:"Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:1}}},{keys:"Meta-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:10}}},{keys:"Meta-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:10}}},{keys:"Meta-Up",command:{command:"move or resize halo target",
args:{what:"move",direction:"up",offset:10}}},{keys:"Meta-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:10}}},{keys:"Alt-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:100}}},{keys:"Alt-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:100}}},{keys:"Alt-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:100}}},{keys:"Alt-Down",
command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:100}}},{keys:"Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:1}}},{keys:"Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:1}}},{keys:"Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:1}}},{keys:"Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",
direction:"down",offset:1}}},{keys:"Meta-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:10}}},{keys:"Meta-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:10}}},{keys:"Meta-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:10}}},{keys:"Meta-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:10}}},
{keys:"Alt-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:100}}},{keys:"Alt-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:100}}},{keys:"Alt-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:100}}},{keys:"Alt-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:100}}},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},
command:"close halo target"},{keys:{win:"Ctrl-`|Alt-`",mac:"Meta-1"},command:"window switcher"},{keys:{mac:"Meta-Shift-L R E S 1",win:"Ctrl-Shift-L R E S 1"},command:{command:"resize active window",args:{how:"col1"}}},{keys:{mac:"Meta-Shift-L R E S 2",win:"Ctrl-Shift-L R E S 2"},command:{command:"resize active window",args:{how:"col2"}}},{keys:{mac:"Meta-Shift-L R E S 3",win:"Ctrl-Shift-L R E S 3"},command:{command:"resize active window",args:{how:"col3"}}},{keys:{mac:"Meta-Shift-L R E S C",win:"Ctrl-Shift-L R E S C"},
command:{command:"resize active window",args:{how:"center"}}},{keys:{mac:"Meta-Shift-L R E S L",win:"Ctrl-Shift-L R E S L"},command:{command:"resize active window",args:{how:"left"}}},{keys:{mac:"Meta-Shift-L R E S R",win:"Ctrl-Shift-L R E S R"},command:{command:"resize active window",args:{how:"right"}}},{keys:{mac:"Meta-Shift-L R E S F",win:"Ctrl-Shift-L R E S F"},command:{command:"resize active window",args:{how:"full"}}},{keys:{mac:"Meta-Shift-L R E S T",win:"Ctrl-Shift-L R E S T"},command:{command:"resize active window",
args:{how:"top"}}},{keys:{mac:"Meta-Shift-L R E S B",win:"Ctrl-Shift-L R E S B"},command:{command:"resize active window",args:{how:"bottom"}}},{keys:{mac:"Meta-Shift-L R E S Escape",win:"Ctrl-Shift-L R E S Escape"},command:{command:"resize active window",args:{how:"reset"}}}],text:{basicFontItems:"Sans-serif;serif;Monospace;Arial Black;Arial Narrow;Comic Sans MS;Garamond;Tahoma;Trebuchet MS;Verdana;custom...".split(";"),cursorBlinkPeriod:.5,useSoftTabs:!0,tabWidth:2,markStackSize:16,undoLevels:50,
clipboardBufferLength:100,useMultiSelect:!0,undoGroupDelay:600,defaultKeyBindings:[{keys:{win:"Ctrl-C",mac:"Meta-C"},command:{command:"clipboard copy",passEvent:!0}},{keys:"Ctrl-W",command:{command:"manual clipboard copy",args:{"delete":!0}}},{keys:"Alt-W",command:"manual clipboard copy"},{keys:"Ctrl-Y",command:"manual clipboard paste"},{keys:"Alt-Y",command:{command:"manual clipboard paste",args:{killRingCycleBack:!0}}},{keys:{win:"Ctrl-X",mac:"Meta-X"},command:{command:"clipboard cut",passEvent:!0}},
{keys:{win:"Ctrl-V",mac:"Meta-V"},command:{command:"clipboard paste",passEvent:!0}},{keys:{win:"Ctrl-Z|Ctrl-Shift--",mac:"Meta-Z|Ctrl-Shift--|Ctrl-x u"},command:"text undo"},{keys:{win:"Ctrl-Shift-Z",mac:"Meta-Shift-Z"},command:"text redo"},{keys:{win:"Ctrl-A|Ctrl-X H",mac:"Meta-A|Ctrl-X H"},command:"select all"},{keys:{win:"Alt-Enter",mac:"Meta-D|Alt-Enter"},command:"doit"},{keys:{mac:"Meta-Shift-L X B"},command:"eval all"},{keys:{win:"Alt-Ctrl-Enter",mac:"Meta-P"},command:"printit"},{keys:{win:"Alt-Ctrl-Shift-Enter",
mac:"Meta-I"},command:"print inspectit"},{keys:{win:"Ctrl-Shift-I",mac:"Meta-Shift-I"},command:"inspectit"},{keys:{win:"Ctrl-Shift-E",mac:"Meta-Shift-E"},command:"editit"},{keys:{win:"Ctrl-Shift-U",mac:"Meta-Shift-U"},command:"undefine variable"},{keys:{win:"Alt-B",mac:"Alt-B"},command:"blame line"},{keys:{win:"Shift-Ctrl-B",mac:"Shift-Ctrl-B"},command:"blame selection"},{keys:"Backspace",command:"delete backwards"},{keys:"Shift-Backspace",command:"delete backwards"},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},
command:"delete"},{keys:{win:"Left|Ctrl-B",mac:"Left|Ctrl-B"},command:"go left"},{keys:{win:"Right|Ctrl-F",mac:"Right|Ctrl-F"},command:"go right"},{keys:{win:"Up|Ctrl-P",mac:"Up|Ctrl-P"},command:"go up"},{keys:{win:"Down|Ctrl-N",mac:"Down|Ctrl-N"},command:"go down"},{keys:"Shift-Left",command:"select left"},{keys:"Shift-Right",command:"select right"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-Right",mac:"Alt-Right|Alt-F"},command:"goto word right"},
{keys:{win:"Ctrl-Left",mac:"Alt-Left|Alt-B"},command:"goto word left"},{keys:{win:"Ctrl-Shift-Right",mac:"Alt-Shift-Right|Alt-Shift-F"},command:{command:"goto word right",args:{select:!0}}},{keys:{win:"Ctrl-Shift-Left",mac:"Alt-Shift-Left|Alt-Shift-B"},command:{command:"goto word left",args:{select:!0}}},{keys:{win:"Ctrl-Backspace",mac:"Alt-Backspace"},command:"delete word left"},{keys:"Alt-D",command:"delete word right"},{keys:{win:"Alt-Ctrl-K",mac:"Alt-Ctrl-K"},command:"delete word right"},{keys:"Alt-Shift-2",
command:"select word right"},{keys:"Ctrl-X Ctrl-X",command:"reverse selection"},{keys:{win:"Ctrl-Shift-L",mac:"Meta-L"},command:"select line"},{keys:{win:"Shift-Home",mac:"Shift-Home|Ctrl-Shift-A"},command:{command:"goto line start",args:{select:!0}}},{keys:{win:"Home",mac:"Home|Ctrl-A"},command:{command:"goto line start",args:{select:!1}}},{keys:{win:"Shift-End",mac:"Shift-End|Ctrl-Shift-E"},command:{command:"goto line end",args:{select:!0}}},{keys:{win:"End",mac:"End|Ctrl-E"},command:{command:"goto line end",
args:{select:!1}}},{keys:"Ctrl-C J",command:{command:"join line",args:{withLine:"before"}}},{keys:"Ctrl-C Shift-J",command:{command:"join line",args:{withLine:"after"}}},{keys:{win:"Ctrl-Shift-D",mac:"Meta-Shift-D|Ctrl-C P"},command:"duplicate line or selection"},{keys:{win:"Ctrl-Shift-Backspace",mac:"Meta-Backspace"},command:"delete left until beginning of line"},{keys:"Ctrl-K",command:"delete emtpy line or until end of line"},{keys:{win:"Ctrl-Alt-Up|Ctrl-Alt-P",mac:"Ctrl-Meta-Up|Ctrl-Meta-P"},command:"move lines up"},
{keys:{win:"Ctrl-Alt-Down|Ctrl-Alt-N",mac:"Ctrl-Meta-Down|Ctrl-Meta-N"},command:"move lines down"},{keys:{win:"PageDown",mac:"PageDown|Ctrl-V"},command:"goto page down"},{keys:{win:"PageUp",mac:"PageUp|Alt-V"},command:"goto page up"},{keys:{win:"Shift-PageDown",mac:"Shift-PageDown"},command:"goto page down and select"},{keys:{win:"Shift-PageUp",mac:"Shift-PageUp"},command:"goto page up and select"},{keys:"Alt-Ctrl-,",command:"move cursor to screen top in 1/3 steps"},{keys:"Alt-Ctrl-.",command:"move cursor to screen bottom in 1/3 steps"},
{keys:{win:"Alt-Left",mac:"Meta-Left"},command:"goto matching left"},{keys:{win:"Alt-Shift-Left",mac:"Meta-Shift-Left"},command:{command:"goto matching left",args:{select:!0}}},{keys:{win:"Alt-Right",mac:"Meta-Right"},command:"goto matching right"},{keys:{win:"Alt-Shift-Right",mac:"Meta-Shift-Right"},command:{command:"goto matching right",args:{select:!0}}},{keys:"Alt-Ctrl-B",command:"goto matching left"},{keys:"Alt-Ctrl-F",command:"goto matching right"},{keys:"Ctrl-Up",command:"goto paragraph above"},
{keys:"Ctrl-Down",command:"goto paragraph below"},{keys:{win:"Ctrl-Shift-Home",mac:"Meta-Shift-Up"},command:{command:"goto start",args:{select:!0}}},{keys:{win:"Ctrl-Shift-End",mac:"Meta-Shift-Down"},command:{command:"goto end",args:{select:!0}}},{keys:{win:"Ctrl-Home",mac:"Meta-Up|Meta-Home|Alt-Shift-,"},command:"goto start"},{keys:{win:"Ctrl-End",mac:"Meta-Down|Meta-End|Alt-Shift-."},command:"goto end"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{win:"Ctrl-Shift-L",mac:"Ctrl-Shift-L|Alt-G G"},
command:"goto line"},{keys:"Enter",command:"newline"},{keys:"Space",command:{command:"insertstring",args:{string:" ",undoGroup:!0}}},{keys:"Tab",command:{command:"tab - snippet expand or indent"}},{keys:{win:"Ctrl-]",mac:"Meta-]"},command:"indent"},{keys:{win:"Ctrl-[",mac:"Meta-["},command:"outdent"},{keys:{win:"Ctrl-Enter",mac:"Meta-Enter"},command:{command:"insert line",args:{where:"below"}}},{keys:"Shift-Enter",command:{command:"insert line",args:{where:"above"}}},{keys:"Ctrl-O",command:"split line"},
{keys:{mac:"Ctrl-X Ctrl-T"},command:"transpose chars"},{keys:{mac:"Ctrl-C Ctrl-U"},command:"uppercase"},{keys:{mac:"Ctrl-C Ctrl-L"},command:"lowercase"},{keys:{mac:"Meta-Shift-L W t"},command:"remove trailing whitespace"},{keys:{mac:"Ctrl-Space"},command:"toggle active mark"},{keys:{mac:"Meta-Shift-L M O D E"},command:"change editor mode"},{keys:{mac:"Meta-Shift-L L T"},command:"toggle line wrapping"},{keys:"Esc|Ctrl-G",command:"cancel input"},{keys:{win:"Ctrl-/",mac:"Meta-/"},command:"toggle comment"},
{keys:{win:"Alt-Ctrl-/",mac:"Alt-Meta-/|Alt-Meta-\u00f7"},command:"toggle block comment"},{keys:"Meta-Shift-L /  D",command:"comment box"},{keys:{win:"Ctrl-.",mac:"Meta-."},command:"[IyGotoChar] activate"},{keys:{win:"Ctrl-,",mac:"Meta-,"},command:{command:"[IyGotoChar] activate",args:{backwards:!0}}},{keys:{win:"Ctrl-Space|Ctrl-Shift-P",mac:"Alt-Shift-Space|Alt-Space|Meta-Shift-P"},command:"text completion"},{keys:"\u00f7|Alt-/",command:"text completion first match"},{keys:"Alt-Q",command:"fit text to column"},
{keys:{win:"Ctrl-F|Ctrl-G|F3",mac:"Meta-F|Meta-G|Ctrl-S"},command:"search in text"},{keys:{win:"Ctrl-Shift-F|Ctrl-Shift-G",mac:"Meta-Shift-F|Meta-Shift-G|Ctrl-R"},command:{command:"search in text",args:{backwards:!0}}},{keys:"Ctrl-Shift-/|Ctrl-C Ctrl-Shift-,",command:"[multi select] all like this"},{keys:"Alt-Ctrl-P",command:"[multi select] add cursor above"},{keys:"Alt-Ctrl-N",command:"[multi select] add cursor below"},{keys:"Ctrl-Shift-,",command:"[multi select] more like this backward"},{keys:"Ctrl-Shift-.",
command:"[multi select] more like this forward"},{keys:{mac:"Meta-Shift-,"},command:"[multi select] goto previous focused cursor"},{keys:{mac:"Meta-Shift-."},command:"[multi select] goto next focused cursor"},{keys:"Ctrl-Shift-;",command:"[multi select] remove focused cursor"},{keys:"Alt-Ctrl-A",command:"[multi select] align cursors"},{keys:"Ctrl-X R",command:"[multi select] create rectangular selection"},{keys:{win:"Shift-Ctrl-S|Ctrl-Alt-Space",mac:"Ctrl-Command-space|Ctrl-Alt-Space"},command:"contractRegion"},
{keys:{win:"Shift-Ctrl-E|Ctrl-Shift-Space",mac:"Shift-Command-Space|Ctrl-Shift-Space"},command:"expandRegion"},{keys:"Ctrl-Alt-h",command:"markDefun"},{keys:"Ctrl-Alt-d|Ctrl-Alt-Down",command:"forwardDownSexp"},{keys:"Ctrl-Alt-u|Ctrl-Alt-Up",command:"backwardUpSexp"},{keys:"Ctrl-Alt-b|Ctrl-Alt-Left",command:"backwardSexp"},{keys:"Ctrl-Alt-f|Ctrl-Alt-Right",command:"forwardSexp"},{keys:"Alt-.",command:"selectDefinition"},{keys:"Ctrl-Shift-'",command:"selectSymbolReferenceOrDeclaration"},{keys:"Ctrl-Shift-[",
command:"selectSymbolReferenceOrDeclarationPrev"},{keys:"Ctrl-Shift-]",command:"selectSymbolReferenceOrDeclarationNext"},{keys:{win:"Ctrl-=",mac:"Meta-="},command:"increase font size"},{keys:{win:"Ctrl--",mac:"Meta--"},command:"decrease font size"},{keys:"Alt-K",command:"set link of selection"},{keys:"Alt-O",command:"set doit of selection"},{keys:{win:"Ctrl-\\",mac:"Meta-\\"},command:"reset text style"},{keys:{win:"Ctrl-Shift-L T U I",mac:"Meta-Shift-L T U I"},command:"open text attribute controls"},
{keys:{win:"Ctrl-Shift-L T D",mac:"Meta-Shift-L T D"},command:"[todo] toggle todo marker"},{keys:{win:"Ctrl-Shift-L D A T E",mac:"Meta-Shift-L D A T E"},command:"insert date"},{keys:"Ctrl-C Ctrl-I",command:"change string inflection"},{keys:"Alt-Shift-4",command:"spell check word"},{keys:"Alt-Shift-\\",command:"[shell] run shell command on region"},{keys:"Alt-Shift-;",command:"run code on text morph"},{keys:{win:"Ctrl-Shift-L O P E N",mac:"Meta-Shift-L O P E N"},command:"open file at cursor"},{keys:"Meta-F1",
command:"report token at cursor"}]},codeEditor:{defaultTheme:"default",collapseSelection:!1,search:{maxCharsPerLine:1E4,fastHighlightLineCount:4E3,showTextMap:!0},defaultStyle:{fontFamily:"IBM Plex Mono",padding:Im.Rectangle.inset(4,2,4,2),fontSize:12,clipMode:"auto"},modes:{text:{style:{}}}},systemBrowser:{fixUndeclaredVarsOnSave:!0},objectEditor:{fixUndeclaredVarsOnSave:!0},remotes:{server:"undefined"!==typeof System&&System.get("@system-env").browser?"".concat(document.location.origin,"/eval"):
null},css:{ibmPlex:Im.joinPath(Im.baseURL,"lively.morphic/assets/ibm-plex/css/ibm-plex.css"),fontAwesome:Im.joinPath(Im.baseURL,"/lively.morphic/assets/fontawesome-free-6.1.1-web/css/all.css"),inconsolata:Im.joinPath(Im.baseURL,"/lively.morphic/assets/inconsolata/inconsolata.css")},defaultImage:"data:image/svg+xml;base64,PCEtLT94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8tLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHY9IiIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSI+CiAgPHRpdGxlPkxpdmVseSBXZWIgTG9nbzwvdGl0bGU+CiAgPGRlc2NyaXB0aW9uPmh0dHBzOi8vbGl2ZWx5LW5leHQub3JnPC9kZXNjcmlwdGlvbj4KICA8ZGVmcz48L2RlZnM+CiAgPGcgaWQ9ImxvZ28iIHRyYW5zZm9ybT0ic2NhbGUoMikiPgogICAgPHBhdGggZD0iTTU3LjExMzEwNzksMTQuNzA3IEM1Ni4zMDUxMDc5LDE3LjAxNyA1NS42MDcxMDc5LDE5LjM2MiA1NC43OTkxMDc5LDIxLjY3MSBDNTQuMzYxMTA3OSwyMi45MjYgNTMuODk0MTA3OSwyMy41MTggNTMuMjAxMTA3OSwyMy41MTggQzUyLjc0MzEwNzksMjMuNTE4IDUyLjE4NTEwNzksMjMuMjYgNTEuNDc0MTA3OSwyMi43NjcgQzQ5LjQwMTEwNzksMjEuMzIgNDcuNDAzMTA3OSwxOS43NjUgNDUuMzE4MTA3OSwxOC4zMjggQzQ0LjIyNzEwNzksMTcuNTczIDQzLjE4NTEwNzksMTcuMTk2IDQyLjIwMTEwNzksMTcuMTk2IEM0MC44NDcxMDc5LDE3LjE5NiAzOS41OTgxMDc5LDE3LjkwNCAzOC40NTUxMDc5LDE5LjMyNCBDMzcuMzE2MTA3OSwyMC43MzcgMzYuMjY5MTA3OSwyMi4yMzEgMzUuMjMyMTA3OSwyMy43MjUgQzMzLjI3NjEwNzksMjYuNTI1IDMzLjY0NDEwNzksMjguODUgMzYuMzcxMTA3OSwzMC45MDMgQzM4LjMzMTEwNzksMzIuMzc3IDQwLjM1MTEwNzksMzMuNzY4IDQyLjMwOTEwNzksMzUuMjQ0IEM0NC4xNTExMDc5LDM2LjYyOSA0NC4xMjgxMDc5LDM3LjQ2NyA0Mi4yMzcxMDc5LDM4Ljg3IEM0MC4yMDYxMDc5LDQwLjM4MiAzOC4xMDUxMDc5LDQxLjggMzYuMTEyMTA3OSw0My4zNTMgQzMzLjczNDEwNzksNDUuMjAzIDMzLjM1OTEwNzksNDcuNTMzIDM1LjAxNjEwNzksNTAuMDE0IEMzNi4xMTIxMDc5LDUxLjY1NyAzNy4yNjQxMDc5LDUzLjI3MSAzOC41MTkxMDc5LDU0Ljc5NyBDMzkuNjY1MTA3OSw1Ni4xOTggNDAuODcyMTA3OSw1Ni44ODcgNDIuMTgyMTA3OSw1Ni44ODcgQzQzLjE4MDEwNzksNTYuODg3IDQ0LjIzNjEwNzksNTYuNDg4IDQ1LjM4MDEwNzksNTUuNjk1IEM0Ny4zMzAxMDc5LDU0LjM0NCA0OS4yMTcxMDc5LDUyLjkwMSA1MS4xNDIxMDc5LDUxLjUxOSBDNTIuMDg3MTA3OSw1MC44MzggNTIuNzQ0MTA3OSw1MC40NzcgNTMuMjUzMTA3OSw1MC40NzcgQzUzLjk0NzEwNzksNTAuNDc3IDU0LjM2NDEwNzksNTEuMTYgNTQuODcwMTA3OSw1Mi42MzggQzU1LjY3OTEwNzksNTUuMDI4IDU2LjM4NTEwNzksNTcuNDU4IDU3LjI1NTEwNzksNTkuODI1IEM1OC4wNTExMDc5LDYxLjk5NSA1OS41MDUxMDc5LDYzLjA5NCA2MS40NDAxMDc5LDYzLjA5NCBDNjIuMDE4MTA3OSw2My4wOTQgNjIuNjM5MTA3OSw2Mi45OTYgNjMuMzAxMTA3OSw2Mi44IEM2NC45NjQxMDc5LDYyLjMwNyA2Ni42MjAxMDc5LDYxLjc4IDY4LjI2MTEwNzksNjEuMjE2IEM3MS43MjExMDc5LDYwLjAzMSA3Mi44MDQxMDc5LDU3Ljk0NCA3MS43MzYxMDc5LDU0LjQwNyBDNzEuMDI4MTA3OSw1Mi4wNjYgNzAuMjMxMTA3OSw0OS43NTEgNjkuNDQ1MTA3OSw0Ny40MzcgQzY4LjgwNDEwNzksNDUuNTUgNjkuNTU2MTA3OSw0NC43MzcgNzEuNDM4MTA3OSw0NC43MzQgQzcxLjU5NzEwNzksNDQuNzM0IDcxLjc2MDEwNzksNDQuNzMyIDcxLjkyMjEwNzksNDQuNzMyIEM3My4xOTcxMDc5LDQ0LjczMiA3NC40NzMxMDc5LDQ0Ljc0MyA3NS43NTExMDc5LDQ0Ljc0MyBDNzYuOTI0MTA3OSw0NC43NDMgNzguMDk2MTA3OSw0NC43MzQgNzkuMjcwMTA3OSw0NC42OTggQzgyLjM5NDEwNzksNDQuNiA4NC4wNDMxMDc5LDQyLjkwOSA4NC4xNDQxMDc5LDM5Ljc4MSBDODQuMTk1MTA3OSwzOC4xMTkgODQuMTY2MTA3OSwzNi40NTcgODQuMTUzMTA3OSwzNC43OTUgQzg0LjEyMTEwNzksMzEuMTY0IDgyLjQ2NDEwNzksMjkuMzkxIDc4Ljg0NzEwNzksMjkuMjUgQzc4LjAxODEwNzksMjkuMjE5IDc3LjE4ODEwNzksMjkuMjEgNzYuMzU5MTA3OSwyOS4yMSBDNzUuMTMwMTA3OSwyOS4yMSA3My44OTkxMDc5LDI5LjIzIDcyLjY2OTEwNzksMjkuMjMgTDcyLjIwMTEwNzksMjkuMjMgQzY5LjAwODEwNzksMjkuMjE0IDY4Ljc2MzEwNzksMjguODM4IDY5Ljc1NDEwNzksMjUuNzQyIEM3MC42NDMxMDc5LDIyLjk2OSA3MS40OTIxMDc5LDIwLjE4MiA3Mi4xNjExMDc5LDE4LjAzMiBDNzIuMDk2MTA3OSwxNS4zNTQgNzEuMDI4MTA3OSwxMy44NDQgNjguOTQ2MTA3OSwxMy4wNzUgQzY3LjE3MjEwNzksMTIuNDIyIDY1LjM1NzEwNzksMTEuODY1IDYzLjUzODEwNzksMTEuMzM0IEM2Mi43NzcxMDc5LDExLjExMSA2Mi4wODIxMDc5LDExIDYxLjQ1MTEwNzksMTEgQzU5LjM4MjEwNzksMTEgNTcuOTg3MTA3OSwxMi4yMDcgNTcuMTEzMTA3OSwxNC43MDcgWiBNNjIuMTA3MjE5OCwxNS4zMjQ0ODc0IEM2My42NjI2MzIsMTUuNzc5NTA4MSA2NS40OTQ1ODQxLDE2LjMzMTUzMzIgNjcuMjQyNjc1OCwxNi45NzY1NjI1IEM2Ny40OTcyNTIyLDE3LjA3MDU2NjggNjcuNjEyMDYxMiwxNy4xNTM1NzA1IDY3LjYzMTAyOTcsMTcuMTczNTcxNSBDNjcuNjMxMDI5NywxNy4xNzU1NzE1IDY3LjcxMjg5MzUsMTcuMjk3NTc3MSA2Ny43NjU4MDU0LDE3LjY2MDU5MzYgTDY3LjM0MjUwOTcsMTkuMDI4NjU1OCBDNjYuODEyMzkxNywyMC43NDc3MzM5IDY2LjQxNDcyNTYsMjIuNTMyMzQyNCA2NS43OTg3NTA0LDI0LjQ1NzQyOTkgQzY1LjI0ODY2NTYsMjYuMTY4NTA3NyA2NC40MjQwMzc1LDI4Ljc1MzYyNTIgNjYuMDM5MzUwMSwzMC45ODM3MjY1IEM2Ny42NTE2Njc2LDMzLjIxMDgyNzggNzAuMzEwMjQ0NSwzMy4yMjI4MjgzIDcyLjA2OTMxNzksMzMuMjI4ODI4NiBMNzIuNTU2NTA3MywzMy4yMzE4Mjg3IEM3My4xODE0Njc1LDMzLjIzMTgyODcgNzMuODA2NDI3OCwzMy4yMjQ4Mjg0IDc0LjQzMjM4NjQsMzMuMjIwODI4MiBDNzUuMDM0Mzg0OCwzMy4yMTY4MjggNzQuNzE5NjA1NywzMy4xNzc3MzI1IDc1LjMyMTYwNDEsMzMuMTc3NzMyNSBDNzYuMjI5MDk0MywzMy4xNzc3MzI1IDc0LjgzMjY2NTksMzMuMTcwOTkyNCA3NS41MTE1MzY0LDMzLjE5Njk5MzUgQzc2LjM2NjExNDYsMzMuMjI4OTk1IDc2LjY5MDU3NDgsMzMuMzkxMDAyNCA3Ni43MTU1MzMzLDMzLjM5MTAwMjQgQzc2Ljc0MDQ5MTgsMzMuNDM0MDA0MyA3Ni45MTMyMDQ0LDMzLjc3ODAyIDc2LjkyMDE5MjgsMzQuNzMyMDYzMyBMNzYuOTI5MTc3OCwzNS41NTAxMDA1IEM3Ni45NDMxNTQ2LDM2LjkzOTE2MzYgNzYuOTU3MTMxMywzOC4yNDkyMjMyIDc2LjkxNDIwMjgsMzkuNTUxMjgyNCBDNzYuOTAwMjI2LDQwLjA0MDMwNDYgNzYuODIwMzU4OSw0MC4zMTczMTcyIDc2Ljc3MzQzNyw0MC40MjQzMjIxIEM3Ni42NzI2MDQ3LDQwLjQ2NTMyMzkgNzYuNDE1MDMzMiw0MC41MzgzMjcyIDc1Ljk2Mzc4NCw0MC41NTMzMjc5IEM3NC45ODQ0MTM0LDQwLjU4MzMyOTMgNzYuMDc5MzQzNCw0MC42MTYwNzA2IDc0LjcxNDYxNCw0MC42MTYwNzA2IEM3NC4wODE2NjcsNDAuNjE2MDcwNiA3NC4zNzA0ODkzLDQwLjY0NjE2NTcgNzMuNzM5NTM5MSw0MC42NDQxNjU2IEM3My4wOTc2MDcxLDQwLjY0MDE2NTUgNzIuNDUwNjgzNCw0MC42MzYxNjUzIDcxLjgxMDc0ODEsNDAuNjM2MTY1MyBMNzEuMzE2NTcwMiw0MC42MzkxNjU0IEM2OC4zNzk0NTY4LDQwLjY0NDE2NTYgNjYuODQyMDE0Nyw0MS45MzUyMjQzIDY2LjA2ODMwMTksNDMuMDE3MjczNSBDNjUuMzAxNTc3Niw0NC4wOTUzMjI1IDY0LjU4MDc3NjgsNDUuOTU0NDA3IDY1LjUxMDIzMDQsNDguNjkzNTMxNSBMNjUuNzUwODMwMSw0OS4zOTE1NjMzIEM2Ni40MzE2OTczLDUxLjQwNjY1NDggNjUuNTE2MTIzNiw0OC4zMDA1NDIzIDY2LjEyNzEwNzEsNTAuMzM4NjM0OSBDNjYuMzUxNzMzMyw1MS4wODA2Njg2IDY2LjM1NzcyMzQsNTEuNDYxNjg1OSA2Ni4zNDY3NDE3LDUxLjYwMTY5MjMgQzY2LjI0MDkxNzcsNTEuNjkwNjk2NCA2NS45MzU0MjYsNTEuOTAzNzA2IDY1LjIxOTYxNjksNTIuMTQ4NzE3MiBDNjMuNjM3MjQ5NSw1Mi42OTE3NDE5IDYyLjAyNzkyNyw1My4yMDU3NjUyIDYwLjQyNzU4OTUsNTMuNjgwNzg2OCBDNjAuMDU4MjA0MSw1My43ODk3OTE4IDU5LjgyNjU4OTQsNTMuODA2NzkyNSA1OS43MjA3NjU1LDUzLjgwNjc5MjUgQzU5LjU4Nzk4NjQsNTMuNzI5Nzg5IDU5LjQ2MzE5NCw1My41Mzc3ODAzIDU5LjMzNDQwODMsNTMuMTg3NzY0NCBDNTguODM2MjM3MSw1MS44Mjc3MDI2IDU5LjEzNjE0ODcsNTIuOTQzNjQxMSA1OC42Njg5MjYsNTEuNDgyNTc0NiBDNTguMzYwNDM5Myw1MC41MTc1MzA4IDU4LjkzNzE2NjIsNTIuMjQ3NjkzMSA1OC42MTA3MDkzLDUxLjI4NzY0OTQgQzU4LjE5OTM5MzcsNTAuMDc0NTk0MyA1Ni45NDc0NzY1LDQ2LjM4MjQyNjUgNTMuMTcyNzU2Niw0Ni4zODI0MjY1IEM1MS4zNjQ3NjQ2LDQ2LjM4MjQyNjUgNDkuOTIwMTY4MSw0Ny4zMTI0Njg3IDQ4LjcwNzE4NjEsNDguMTgzNTA4MyBDNDcuOTM5NDYzNCw0OC43Mzc1MzM1IDQ5LjM0OTQxNCw0Ny43MjEwNDU4IDQ4LjU4NjY4Myw0OC4yODMwNzE0IEM0Ny40MTc2MjgsNDkuMTQ2MTEwNiA0OC44NTIwMzYxLDQ4LjA1MjEyNzcgNDcuNzE3OTIzLDQ4Ljg0MDE2MzUgQzQ3LjI3OTY1MjIsNDkuMTQ0MTc3MyA0Ny4wMTAxMDA2LDQ5LjI1MzE4MjMgNDYuODk1MjkxNiw0OS4yOTIxODQxIEM0Ni43OTY0NTYxLDQ5LjIyNDE4MSA0Ni41ODg4MDE1LDQ5LjA1NzE3MzQgNDYuMjk4Mjg0OSw0OC43MDIxNTcyIEM0NS4yNjc5OTksNDcuNDQyMSA0NC4yMDE3NzI5LDQ1Ljk4NDAzMzcgNDMuMDM2NzExMyw0NC4yMzU5NTQyIEM0Mi43OTQxMTQ5LDQzLjg3MTkzNzcgNDIuNzI3MjI2Miw0My42NTE5Mjc3IDQyLjcwOTI1NjEsNDMuNTY4OTIzOSBDNDIuNzUyMTg0Niw0My40OTQ5MjA1IDQyLjg4OTk1NTQsNDMuMzAxOTExOCA0My4yNDkzNTc1LDQzLjAxNzg5ODkgQzQ0LjM3MzQ4NzIsNDIuMTQyODU5MSA0Mi45ODk5OTQ0LDQzLjIyMjg0MTQgNDQuMjE1OTU0Nyw0Mi4zNDU4MDE1IEM0NS4wNjY1Mzk2LDQxLjczNDc3MzcgNDMuNzQ3NDM3OCw0Mi42OTkyNTkxIDQ0LjU4NzA0MDksNDIuMDczMjMwNiBDNDUuNDIyNjUwNyw0MS40NTEyMDIzIDQ3LjY0Mjk1NjcsMzkuNzk5MTI3MiA0Ny42NDg5NDY4LDM2Ljk5Njk5OTkgQzQ3LjY1OTkyODUsMzQuMjA4ODczMSA0NS40OTM1MzI4LDMyLjU3Njc5ODkgNDQuNjc4ODg4MSwzMS45NjA3NzA5IEM0My42Nzk1NTA4LDMxLjIwOTczNjggNDIuNjY0MjQsMzAuNDczNzAzNCA0MS42NDQ5MzU4LDI5Ljc0MTY3MDEgQzQwLjY3NTU0ODYsMjkuMDQzNjM4MyA0Mi42MzkxNTI0LDMwLjU5NTkyOTEgNDEuNjg1NzM4NiwyOS44NzY4OTY0IEM0MS4yMDU1Mzc2LDI5LjUxMzg3OTkgNDEuMDEwODYxNCwyOS4yNjY4Njg3IDQwLjk0MTk3NjEsMjkuMTU5ODYzOCBDNDAuOTc1OTE5NiwyOS4wMzY4NTgyIDQxLjA4NTczNjksMjguNzM4ODQ0NyA0MS40MjcxNjg4LDI4LjI0MzgyMjIgQzQyLjQwNjUzOTQsMjYuODQxNzU4NSA0My40MTI4NjUyLDI1LjM5MjY5MjYgNDQuNDc5MDkxMywyNC4wNjk2MzI1IEM0NC43ODA1ODk2LDIzLjY5MjYxNTMgNDUuMDA3MjEyNiwyMy41MTc2MDc0IDQ1LjExMDA0MTUsMjMuNDU5NjA0NyBDNDUuMjI3ODQ1NSwyMy40ODY2MDYgNDUuNDk0NDAyLDIzLjU4OTYxMDYgNDUuODkyNzM5MywyMy44NjQ2MjMxIEM0Ni45MjMwMjUyLDI0LjU3NzY1NTUgNDQuOTk3MzU4MywyMy4wNjYzNjY3IDQ2LjA2MDU4OTQsMjMuODUxNDAyMyBDNDcuMDM5OTU5OSwyNC41NzM0MzUyIDQ4LjA1MjI3NTcsMjUuMzE1NDY4OSA0OS4wODc1NTMzLDI2LjAzOTUwMTggQzQ5Ljk5NjA0MTgsMjYuNjc1NTMwNyA1MS40MDM2OTk5LDI3LjUxODU2OSA1My4xMjA4NDMsMjcuNTE4NTY5IEM1NC44NjE5NDYzLDI3LjUxODU2OSA1Ny4yMTQwMzMsMjYuNzI2NTMzIDU4LjUyOTg0MzksMjIuOTU5MzYxOCBDNTguOTQ0MTU0NiwyMS43NjgzMDc3IDU5LjMzNDUwNTEsMjAuNTcwMjUzMiA1OS43MjM4NTc0LDE5LjM3MDE5ODYgQzYwLjA4NzI1MjgsMTguMjQyMTQ3NCA2MC4yNTMzMDQyLDE3LjI2NDU3NTYgNjAuNjQxNjU4MSwxNi4xNDU1MjQ3IEM2MC44NTQzMDQzLDE1LjU0MjQ5NzMgNjEuMDM3MDAwMywxNS4yNjA0ODQ1IDYxLjEyMzg1NTgsMTUuMTQ5NDc5NSBDNjEuMjkzNTczNSwxNS4xNDk0Nzk1IDYxLjU5NTA3MTksMTUuMTcxNDgwNSA2Mi4xMDcyMTk4LDE1LjMyNDQ4NzQgWiIgaWQ9ImVuZ2luZSIgZmlsbD0iI2ZmNzcwMCI+PC9wYXRoPgogIDwvZz4KPC9zdmc+Cg=="};
var Jm=bd("F",Im.config);Im["default"]=Jm;var Dk=window.lively.FreezerRuntime.recorderFor("lively.serializer2/class-helper.js");Dk.getClassName=Mo;Dk.getSerializableClassMeta=gu;Dk.locateClass=ss;Dk.arr=aj;Dk.string=Xj;Dk.classMetaForSerializationProp="lively.serializer-class-info";Dk.classSuperClassProp=Symbol["for"]("lively-instance-superclass");Dk.classNameProp=Symbol["for"]("__LivelyClassName__");Dk.moduleMetaInClassProp=Symbol["for"]("lively-module-meta");Dk.getClassName=Mo;Dk.getSerializableClassMeta=
gu;Dk.locateClass=ss;var PA=bd("bP",function(){function l(b){Sd(this,l);this.options=Object.assign({ignoreClassNotFound:!0},b);this[Symbol["for"]("lively-instance-restorer")]=!0}uc(l,[{key:"sourceModuleNameProperty",get:function(){return"__SourceModuleName__"}}],[{key:"moduleMetaInClassProp",get:function(){return Dk.moduleMetaInClassProp}},{key:"classMetaForSerializationProp",get:function(){return Dk.classMetaForSerializationProp}},{key:"classSuperClassProp",get:function(){return Dk.classSuperClassProp}},
{key:"classNameProperty",get:function(){return Dk.classNameProp}}]);uc(l,[{key:"addClassInfo",value:function(b,c,g){(b=Dk.getSerializableClassMeta(c))&&(g[Dk.classMetaForSerializationProp]=b)}},{key:"restoreIfClassInstance",value:function(b,c){if(c.hasOwnProperty(Dk.classMetaForSerializationProp)&&(b=c[Dk.classMetaForSerializationProp],b.className)){c=Dk.locateClass(b);if(!c||"function"!==typeof c){c="Trying to deserialize instance of ".concat(JSON.stringify(b)," but this class cannot be found!");
if(!this.options.ignoreClassNotFound)throw Error(c);console.error(c);return{isClassPlaceHolder:!0,className:b.className}}return c.hasOwnProperty(Symbol["for"]("lively-instance-superclass"))?new c(this):new c}}}],[{key:"sourceModulesInObjRef",value:function(b){var c=[];(b=b&&b[Dk.classMetaForSerializationProp])&&b.module&&c.push(b.module);return c}},{key:"sourceModulesIn",value:function(b){var c=[];Object.keys(b).forEach(function(g){(g=b[g])&&g[Dk.classMetaForSerializationProp]&&c.push(g[Dk.classMetaForSerializationProp])});
return Dk.arr.uniqBy(c,function(g,a){var d=g.module,f=a.module;return!d&&!f||d&&!f||!d&&f?g.className===a.className:g.className===a.className&&d["package"].name===f["package"].name&&d["package"].pathInPackage===f["package"].pathInPackage})}}]);return l}());Dk.ClassHelper=PA;Dk["default"]=PA;var qi=window.lively.FreezerRuntime.recorderFor("lively.serializer2/plugins/expression-serializer.js");qi.deserializeSpec=xq;qi.serializeNestedProp=OI;qi.getExpression=function(l,b,c){var g=c.exprSerializer,a=
c.asExpression;c=c.nestedExpressions;try{if(b=b[Symbol["for"]("__LivelyClassName__")]?g.exprStringDecode(g.getExpressionForFunction(b)):b.__serialize__(),a){var d=qi.string.newUUID();c[d]=b;b=d}else b=b.__expr__?g.exprStringEncode(b):b}catch(f){console.log("[export to JSON] failed converting ".concat(l," to serialized expression"))}return b};qi.getArrayExpression=function(l,b,c,g){return b.map(function(a,d){return a&&a.isMorph?qi.serializeSpec(a,Object.assign({},g,{path:c?c+"."+l+"."+d:l+"."+d})):
a&&a.__serialize__?qi.getExpression(l+"."+d,a,g):a})};qi.serializeSpec=Ep;qi.string=Xj;qi.Closure=bp;qi.Path=qj;qi.obj=bj;qi.properties=Pq;qi.arr=aj;qi.getSerializableClassMeta=gu;qi.getClassName=Mo;qi.connect=lr;qi.joinPath=$c;var Fp=bd("bb",function(){function l(b){Sd(this,l);b=Object.assign({prefix:"__lv_expr__"},b).prefix;this._decanonicalized={};this.prefix=b+":"}uc(l,[{key:"isSerializedExpression",value:function(b){return 0===b.indexOf(this.prefix)}},{key:"requiredModulesOf__expr__",value:function(b){return this.isSerializedExpression(b)?
(b=this.exprStringDecode(b).bindings)?Object.keys(b):null:null}},{key:"exprStringDecode",value:function(b){var c=b.indexOf(":");b=b.slice(c+1);for(var g={},a=!1;b&&b.startsWith("{")&&0<=(c=b.indexOf("}:"));){a=!0;var d=b.slice(1,c);b=b.slice(c+2);b.includes("https:")&&b.indexOf("https:")<b.indexOf(":")&&(b=b.replace("https:","__HTTP_PLACEHOLDER__"),c=b.indexOf(":")-20+6,b=b.replace("__HTTP_PLACEHOLDER__","https:"));b.includes("local:")&&b.indexOf("local:")<b.indexOf(":")?(b=b.replace("local:","__HTTP_PLACEHOLDER__"),
c=b.indexOf(":")-20+6,b=b.replace("__HTTP_PLACEHOLDER__","local:")):c=b.indexOf(":");var f=b.slice(0,c);d=d.split(",").filter(function(k){return!!k.trim()}).map(function(k){if(!k.includes(":"))return k;k=k.split(":");k=Wb(k,2);return{exported:k[0],local:k[1]}});g[f]=d;b=b.slice(c+1)}return{__expr__:b,bindings:a?g:null}}},{key:"exprStringEncode",value:function(b){var c=b.bindings;b=String(b.__expr__);if(c)for(var g=Object.keys(c),a=0;a<g.length;a++){var d=g[a],f=c[d];Array.isArray(f)&&(f=f.map(function(k){return"string"===
typeof k?k:k.exported+":"+k.local}).join(","));b="{".concat(f,"}:").concat(d,":").concat(b)}return this.prefix+b}},{key:"getExpressionForFunction",value:function(b){var c=b[Symbol["for"]("lively-module-meta")];return this.exprStringEncode({__expr__:b.name,bindings:dd({},qi.joinPath(c["package"].name,c.pathInPackage),[b.name])})}},{key:"convert__expr__obj",value:function(b){console.assert("__expr__"in b,"obj has no property __expr__");return this.prefix+b.__expr__}},{key:"__eval__",value:function(b,
c){return qi.__eval__(b,c)}},{key:"deserializeExpr",value:function(b){if(!b.startsWith(this.prefix))throw Error('"'.concat(b,'" is not a serialized expression, missing prefix "').concat(this.prefix,'"'));return this.deserializeExprObj(this.exprStringDecode(b))}},{key:"resolveModule",value:function(b){return this._decanonicalized[b]||(this._decanonicalized[b]=System.decanonicalize(b))}},{key:"getModuleRecorder",value:function(b){return(b=System.get("@lively-env").loadedModules[this.resolveModule(b)])?
b.recorder:{}}},{key:"getModuleExports",value:function(b){return(b=System.get("@lively-env").loadedModules[this.resolveModule(b)])?b.record().exports:{}}},{key:"deserializeExprObj",value:function(b){var c=b.__expr__;b=b.bindings;var g={};if(b)for(var a=b?Object.keys(b):[],d=0;d<a.length;d++){var f=a[d],k=b[f];if(lively.FreezerRuntime){var n=lively.FreezerRuntime.get(lively.FreezerRuntime.decanonicalize(f));if(!n){var p=lively.FreezerRuntime.fetchStandaloneFor(f);p&&(n=p.exports)}n.exports&&(n=n.exports)}else(n=
System.get(this.resolveModule(f)))||(n=this.getModuleExports(f));if(!n)throw Error("[lively.serializer] expression eval: bindings specify to import ".concat(f," but this module is not loaded!\nSource: ").concat(c));for(p=0;p<k.length;p++){var q=k[p],r=void 0,u=void 0;"string"===typeof q?u=r=q:"object"===ad(q)&&(qi.__inter0__=q,r=qi.__inter0__.local,u=qi.__inter0__.exported);g[r]=n[u]?n[u]:this.getModuleRecorder(f)[u];c="var ".concat(r," = __boundValues__.").concat(r,";\n").concat(c)}}return this.__eval__(c,
g)}},{key:"embedValue",value:function(b,c){if(b&&b.__serialize__&&(b=b.__serialize__())&&b.__expr__)if(c){var g=qi.string.newUUID();c[g]=b;b=g}else b=this.exprStringEncode(b);return b}}]);return l}());qi.ExpressionSerializer=Fp;qi.__eval__=qi.Closure.fromSource("function __eval__(__source__, __boundValues__) { \n  return eval(__source__); \n}").getFunc();qi.deserializeSpec=xq;qi.serializeNestedProp=OI;qi.serializeSpec=Ep;qi["default"]=Fp;var nj=window.lively.FreezerRuntime.recorderFor("lively.bindings/index.js");
nj.connect=lr;nj.epiConnect=lw;nj.disconnect=hu;nj.disconnectAll=mw;nj.once=iu;nj.signal=Ln;nj.callWhenNotNull=MB;nj.callWhenPathNotNull=NB;nj.noUpdate=ju;nj.string=Xj;nj.arr=aj;nj.Closure=bp;nj.obj=bj;nj.stringifyFunctionWithoutToplevelRecorder=gr;nj.ExpressionSerializer=Fp;var VG=function(l){var b=window.lively.FreezerRuntime.recorderFor("lively.bindings/index.js"),c=b.hasOwnProperty("AttributeConnection")&&"function"===typeof b.AttributeConnection?b.AttributeConnection:b.AttributeConnection=function(g){if(!g||
!g[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(c,l,[{key:Symbol["for"]("lively-instance-initialize"),value:function(g,a,d,f,k){this.init(g,a,d,f,k)}},{key:"init",value:function(g,a,d,f,k){this.doNotSerialize=["isActive","converter","updater"];this.sourceObj=g;this.sourceAttrName=a;this.targetObj=d;this.targetMethodName=f;this.varMapping={source:g,target:d};k=Object.assign({removeAfterUpdate:!1,forceAttributeConnection:!1,
garbageCollect:!1,signalOnAssignment:!0,override:!1},k);k.removeAfterUpdate&&(this.removeAfterUpdate=!0);k.forceAttributeConnection&&(this.forceAttributeConnection=!0);"boolean"===typeof k.garbageCollect&&(this.garbageCollect=k.garbageCollect);"boolean"===typeof k.signalOnAssignment&&(this.signalOnAssignment=k.signalOnAssignment);k.converter&&this.setConverter(k.converter);k.updater&&this.setUpdater(k.updater);k.varMapping&&(this.varMapping=Object.assign(k.varMapping,this.varMapping));k.isEpiConnection&&
(this._isEpiConnection=!0);this.override=k.override;this.getSpec();return this}},{key:"__additionally_serialize__",value:function(g,a,d,f){delete this.varMapping._rev;nj.arr.equals(Object.keys(this.varMapping),["source","target"])?delete g.props.varMapping:f("varMapping",this._getSerializableVarMapping())}},{key:"__after_deserialize__",value:function(g,a){this.varMapping||(this.varMapping={},this.varMapping.source=this.sourceObj,this.varMapping.target=this.targetObj);this.onSourceAndTargetRestored()}},
{key:"_getSerializableVarMapping",value:function(){for(var g=Object.assign({},this.varMapping),a=0,d=Object.keys(g);a<d.length;a++){var f=d[a];try{nj.obj.isFunction(g[f])&&(g[f]=(new nj.ExpressionSerializer).getExpressionForFunction(g[f]))}catch(k){throw Error("Cannot be serialized due to lack of module information: ".concat(f," in ").concat(this));}}return g}},{key:"onSourceAndTargetRestored",value:function(){this.sourceObj&&this.targetObj&&this.connect()}},{key:"copy",value:function(g){return nj.AttributeConnection.fromLiteral(this.toLiteral(),
g)}},{key:"fixInstanceAfterCopyingFromSite",value:function(g,a,d){this.disconnect()}},{key:"clone",value:function(){var g=new this.constructor(this.getSourceObj(),this.getSourceAttrName(),this.getTargetObj(),this.getTargetMethodName(),this.getSpec());this.dependedBy&&(g.dependedBy=this.dependedBy);return g}},{key:"getTargetObj",value:function(){return this.targetObj}},{key:"getSourceObj",value:function(){return this.sourceObj}},{key:"getSourceAttrName",value:function(){return this.sourceAttrName}},
{key:"getTargetMethodName",value:function(){return this.targetMethodName}},{key:"getSourceValue",value:function(){return this.getSourceObj()[this.getSourceAttrName()]}},{key:"getPrivateSourceValue",value:function(){return this.sourceObj[this.privateAttrName(this.sourceAttrName)]}},{key:"getConverter",value:function(){if(!this.converterString)return null;this.converter||(this.converter=nj.Closure.fromSource(this.converterString,this.varMapping).recreateFunc());return this.converter}},{key:"setConverter",
value:function(g){delete this.converter;return this.converterString=g?String(g):null}},{key:"getUpdater",value:function(){if(!this.updaterString)return null;this.updater||(this.updater=nj.Closure.fromSource(this.updaterString,this.varMapping).recreateFunc());return this.updater}},{key:"setUpdater",value:function(g){delete this.updater;return this.updaterString=g?nj.stringifyFunctionWithoutToplevelRecorder(g):null}},{key:"getSpec",value:function(){var g={};this.updaterString&&(g.updater=this.getUpdater());
this.converterString&&(g.converter=this.getConverter());this.removeAfterUpdate&&(g.removeAfterUpdate=!0);this.forceAttributeConnection&&(g.forceAttributeConnection=!0);this.hasOwnProperty("garbageCollect")&&(g.garbageCollect=this.garbageCollect);this.hasOwnProperty("signalOnAssignment")&&(g.signalOnAssignment=this.signalOnAssignment);g.override=!!this.override;return g}},{key:"resetSpec",value:function(){delete this.garbageCollect;delete this.signalOnAssignment;delete this.removeAfterUpdate;delete this.forceAttributeConnection;
delete this.converter;delete this.converterString;delete this.updater;delete this.updaterString}},{key:"privateAttrName",value:function(g){return"$$"+g}},{key:"activate",value:function(){this.isActive=!0}},{key:"deactivate",value:function(){delete this.isActive}},{key:"connect",value:function(){var g=this.getExistingConnection();g!==this&&(g&&g.disconnect(),this.addAttributeConnection());g=this.sourceObj;var a=this.sourceAttrName,d=this.forceAttributeConnection,f=g.__lookupSetter__(a),k=g.__lookupGetter__(a),
n=!f&&!k&&(this.getSourceValue()||this.getPrivateSourceValue());"function"!==typeof n||d?this.addSourceObjGetterAndSetter(k,f):n.isWrapped||this.addConnectionWrapper(g,a,n);return this}},{key:"disconnect",value:function(){var g=this,a=this.sourceObj;if(!a||!a.attributeConnections)return this.removeSourceObjGetterAndSetter();a.attributeConnections=a.attributeConnections.filter(function(f){return!g.isSimilarConnection(f)});var d=a.attributeConnections.filter(function(f){return g.getSourceAttrName()===
f.getSourceAttrName()});0===a.attributeConnections.length&&delete a.attributeConnections;0===d.length&&this.removeSourceObjGetterAndSetter();return null}},{key:"update",value:function(g,a){if(this.isActive)return null;var d=this,f=this.getUpdater(),k=this.getConverter(),n=this.targetObj,p=this.targetMethodName;if(!n||!p)return a="Cannot update "+this.toString(g)+" because of no target ("+n+") or targetProp ("+p+") ",this.isWeakConnection&&this.disconnect(),console.error(a),null;var q=n[p],r=function(x,
y,D,H,I,N){D=[x,y,D,H,I,N];k&&(g=k.call(d,x,y),x=D[0]=g);x="function"===typeof q?q.apply(n,D):n[p]=x;d.removeAfterUpdate&&d.disconnect();return x};try{return this.isActive=!0,f?f.call(this,r,g,a):r(g,a)}catch(x){var u=this.sourceObj&&"function"===typeof this.sourceObj.world&&this.sourceObj.world()||this.targetObj&&"function"===typeof this.targetObj.world&&this.targetObj.world();u?u.logError(x,"AttributeConnection>>update: "):console.error("Error when trying to update "+this+" with value "+g+":\n"+
x+"\n"+x.stack)}finally{delete this.isActive}return null}},{key:"addSourceObjGetterAndSetter",value:function(g,a){if(!(g&&g.isAttributeConnectionGetter||a&&a.isAttributeConnectionSetter)){var d=this.sourceObj,f=this.sourceAttrName,k=this.privateAttrName(f);d[k]&&console.warn("newAttrName "+k+" already exists.Are there already other connections?");d.hasOwnProperty("doNotSerialize")||(d.doNotSerialize=[]);nj.arr.pushIfNotIncluded(d.doNotSerialize,k);d.hasOwnProperty("doNotCopyProperties")||(d.doNotCopyProperties=
[]);nj.arr.pushIfNotIncluded(d.doNotCopyProperties,k);g&&(d.hasOwnProperty(f)?d.__defineGetter__(k,g):d.__defineGetter__(k,function(){return d.constructor.prototype.__lookupGetter__(f).bind(d)()}));a&&(d.hasOwnProperty(f)?d.__defineSetter__(k,a):d.__defineSetter__(k,function(n){d.constructor.prototype.__lookupSetter__(f).bind(d)(n)}));g||a||!d.hasOwnProperty(f)||(d[k]=d[f]);d.__defineSetter__(f,function(n){var p=d[k];d[k]=n;if(void 0===d.attributeConnections)return console.error("Sth wrong with sourceObj, has no attributeConnections"),
null;d.attributeConnections.forEach(function(q){q&&q.getSourceAttrName()===f&&q.signalOnAssignment&&q.update(n,p)});return n});d.__lookupSetter__(f).isAttributeConnectionSetter=!0;d.__defineGetter__(f,function(){return d[k]});d.__lookupGetter__(f).isAttributeConnectionGetter=!0}}},{key:"addConnectionWrapper",value:function(g,a,d){if("function"!==typeof d)throw Error("addConnectionWrapper didnt get a method to wrap");var f;if(f=g.hasOwnProperty(a)){g[this.privateAttrName(a)]=d;var k=function(){return d}}else k=
function(){return Object.getPrototypeOf(g)[a]};g[a]=function(){var n=this;if(void 0===this.attributeConnections)throw Error("[lively.bindings] Something is wrong with connection source object, it has no attributeConnections");var p=this.attributeConnections.filter(function(x){return x.getSourceAttrName()===a}),q=p.find(function(x){return!!x.hasOverride});if(q){var r;var u=(r=q.targetObj)[q.targetMethodName].apply(r,[function(){for(var x=arguments.length,y=Array(x),D=0;D<x;D++)y[D]=arguments[D];return n[a].originalFunction.apply(n,
y)}].concat(Array.prototype.slice.call(arguments)))}else u=this[a].originalFunction.apply(this,arguments);for(r=0;r<p.length;r++)p[r]!==q&&p[r].update(arguments[0]);return u};g[a].isOwnProperty=f;g[a].isWrapped=!0;g[a].isConnectionWrapper=!0;Object.defineProperty(g[a],"originalFunction",{get:k});g[a].toString=function(){return"<Wrapped ".concat(k(),">")}}},{key:"removeSourceObjGetterAndSetter",value:function(){var g=this.sourceAttrName,a=this.privateAttrName(g),d=this.sourceObj;if(d){if(d.__lookupGetter__(g)){if(delete d[g],
d.hasOwnProperty(a)){try{d[g]=d[a]}catch(k){}delete d[a]}}else if(d[g]&&d[g].isConnectionWrapper){var f=d[g];delete d[g];d[g]||(d[g]=f.originalFunction)}d.doNotSerialize&&d.doNotSerialize.includes(a)&&(d.doNotSerialize=nj.arr.without(d.doNotSerialize,a),0===d.doNotSerialize.length&&delete d.doNotSerialize);d.doNotCopyProperties&&d.doNotCopyProperties.includes(a)&&(d.doNotCopyProperties=nj.arr.without(d.doNotCopyProperties,a),0===d.doNotCopyProperties.length&&delete d.doNotCopyProperties)}}},{key:"addAttributeConnection",
value:function(){this.sourceObj.attributeConnections||(this.sourceObj.attributeConnections=[]);this.sourceObj.attributeConnections.push(this)}},{key:"getExistingConnection",value:function(){var g=this.sourceObj&&this.sourceObj.attributeConnections;if(!g)return null;for(var a=0,d=g.length;a<d;a++)if(this.isSimilarConnection(g[a]))return g[a];return null}},{key:"isRecursivelyActivated",value:function(){return this.isActive}},{key:"isSimilarConnection",value:function(g){return g&&g.constructor===this.constructor?
this.sourceObj===g.sourceObj&&this.sourceAttrName===g.sourceAttrName&&this.targetObj===g.targetObj&&this.targetMethodName===g.targetMethodName:!1}},{key:"hasOverride",get:function(){return this.override}},{key:"toString",value:function(g){try{return nj.string.format("AttributeConnection(%s.%s %s %s.%s)",this.getSourceObj(),this.getSourceAttrName(),g?"--\x3e"+String(g)+"--\x3e":"--\x3e",this.getTargetObj(),this.getTargetMethodName())}catch(a){return"<Error in AttributeConnection>>toString>"}}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"AttributeConnection"}}],b,{pathInPackage:function(){return"./index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.bindings",version:"0.1.2"}}},{start:236,end:18276})}(void 0);nj.AttributeConnection=VG;nj.AttributeConnection=VG;nj.callWhenNotNull=MB;nj.callWhenPathNotNull=NB;nj.connect=lr;nj.epiConnect=lw;nj.disconnect=hu;nj.disconnectAll=
mw;nj.once=iu;nj.signal=Ln;nj.noUpdate=ju;var k2=Object.freeze({__proto__:null,AttributeConnection:VG,callWhenNotNull:MB,callWhenPathNotNull:NB,connect:lr,epiConnect:lw,disconnect:hu,disconnectAll:mw,once:iu,signal:Ln,noUpdate:ju});bd("ca",k2);var WG=window.lively.FreezerRuntime.recorderFor("lively.serializer2/object-extensions.js");Object.defineProperty(Symbol.prototype,"__serialize__",{configurable:!0,value:function(){var l=function(){return Object.getOwnPropertyNames(Symbol).filter(function(c){return"symbol"===
ad(Symbol[c])}).reduce(function(c,g){return c.set(Symbol[g],"Symbol."+g)},new Map)}(),b=/^Symbol\((.*)\)$/;return function(){var c="function"===typeof this[Symbol.toPrimitive]?this[Symbol.toPrimitive]():this,g=Symbol.keyFor(c);if(g)return{__expr__:'Symbol.for("'.concat(g,'")')};if(l.get(c))return{__expr__:l.get(c)};c=String(c).match(b);return{__expr__:c?'Symbol("'.concat(c[1],'")'):"Symbol()"}}}()});WG.hasSystem="undefined"!==typeof System;WG.hasSystem&&Object.defineProperty(System,"__serialize__",
{configurable:!0,value:function(){return{__expr__:"System"}}});WG.hasSystem&&Object.defineProperty(System.global,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System.global"}}});Object.defineProperty(Map.prototype,"__serialize__",{configurable:!0,value:function(l,b,c){var g=l.add(this),a=g.currentRev,d=g.currentSnapshot,f=d.entries=[],k=0;b[g.id]=d;l.classHelper.addClassInfo(g,this,d);d=fa(this);var n;try{for(d.s();!(n=d.n()).done;){var p=Wb(n.value,2),q=p[0],r=p[1];k++;var u=
g.snapshotProperty(g.id,q,c.concat("key",String(k)),b,l),x=g.snapshotProperty(g.id,r,c.concat("value",String(k)),b,l);f.push(u,x)}}catch(y){d.e(y)}finally{d.f()}return g.asRefForSerializedObjMap(a)}});Object.defineProperty(Map.prototype,"__deserialize__",{configurable:!0,value:function(l,b,c,g,a){l=l.entries;for(var d=0;d<l.length;d+=2){var f=l[d+1],k=b.recreateProperty("key."+d,l[d],c,g,a.concat("key",d));f=b.recreateProperty("value."+d,f,c,g,a.concat("value",d));this.set(k,f)}}});Object.defineProperty(Set.prototype,
"__serialize__",{configurable:!0,value:function(l,b,c){var g=l.add(this),a=g.currentRev,d=g.currentSnapshot,f=d.entries=[],k=0;b[g.id]=d;l.classHelper.addClassInfo(g,this,d);d=fa(this);var n;try{for(d.s();!(n=d.n()).done;){var p=n.value;k++;var q=g.snapshotProperty(g.id,p,c.concat("entry",String(k)),b,l);f.push(q)}}catch(r){d.e(r)}finally{d.f()}return g.asRefForSerializedObjMap(a)}});Object.defineProperty(Set.prototype,"__deserialize__",{configurable:!0,value:function(l,b,c,g,a){l=l.entries;for(var d=
0;d<l.length;d++){var f=b.recreateProperty("entry."+d,l[d],c,g,a.concat("key",d));this.add(f)}}});var nS=window.lively.FreezerRuntime.recorderFor("lively.serializer2/util.js");nS.isPrimitive=OB;nS.isPrimitive=OB;var gk=window.lively.FreezerRuntime.recorderFor("lively.serializer2/plugins.js");gk.obj=bj;gk.properties=Pq;gk.Plugin=function b(){Sd(this,b)};var l2=function(){function b(){Sd(this,b)}uc(b,[{key:"serializeObject",value:function(c,g,a,d,f){if("function"!==typeof c.__serialize__)return null;
(c=c.__serialize__(a,d,f))&&c.hasOwnProperty("__expr__")&&(a=a.expressionSerializer.exprStringEncode(c),c=g?a:{__expr__:a});return c}},{key:"deserializeObject",value:function(c,g,a,d){return(g=a.__expr__)?c.expressionSerializer.deserializeExpr(g):null}}]);return b}();gk.CustomSerializePlugin=l2;var m2=function(){function b(){Sd(this,b)}uc(b,[{key:"additionallySerialize",value:function(c,g,a,d){c.classHelper.addClassInfo(g,g.realObj,a)}},{key:"deserializeObject",value:function(c,g,a,d){return c.classHelper.restoreIfClassInstance(g,
a)}}]);return b}();gk.ClassPlugin=m2;var n2=function(){function b(){Sd(this,b)}uc(b,[{key:"serializeObject",value:function(c,g,a,d,f){c&&c.isMorph&&(c.__isBeingSerialized__=!0);return null}}]);return b}();gk.SerializationIndicationPlugin=n2;var o2=function(){function b(){Sd(this,b)}uc(b,[{key:"additionallySerialize",value:function(c,g,a,d){g.realObj&&g.realObj.isMorph&&(g.realObj.__isBeingSerialized__=!1)}}]);return b}();gk.SerializationFinishPlugin=o2;var p2=function(){function b(){Sd(this,b)}uc(b,
[{key:"additionallySerialize",value:function(c,g,a,d){var f=g.realObj;f&&"function"===typeof f.__additionally_serialize__&&f.__additionally_serialize__(a,g,c,d)}},{key:"additionallyDeserializeBeforeProperties",value:function(c,g,a,d,f,k,n){"function"===typeof a.__deserialize__&&a.__deserialize__(f,g,k,c,n)}},{key:"additionallyDeserializeAfterProperties",value:function(c,g,a,d,f,k){"function"===typeof a.__after_deserialize__&&a.__after_deserialize__(d,g,c);delete a._rev}}]);return b}();gk.AdditionallySerializePlugin=
p2;var q2=function(){function b(){Sd(this,b)}uc(b,[{key:"propertiesToSerialize",value:function(c,g,a,d){return(c=g.realObj)&&c.__only_serialize__||null}}]);return b}();gk.OnlySerializePropsPlugin=q2;var r2=function(){function b(){Sd(this,b)}uc(b,[{key:"propertiesToSerialize",value:function(c,g,a,d){c=g.realObj;if(!c||!c.__dont_serialize__)return null;c=gk.obj.mergePropertyInHierarchy(c,"__dont_serialize__");g=[];for(a=0;a<d.length;a++){var f=d[a];c.includes(f)||g.push(f)}return g}}]);return b}();
gk.DontSerializePropsPlugin=r2;var s2=function(){function b(){Sd(this,b)}uc(b,[{key:"propertiesToSerialize",value:function(c,g,a,d){var f=g.realObj;g=f.constructor[Symbol["for"]("lively.classes-properties-and-settings")];if(!g)return null;c=g.properties;a=g.propertySettings.valueStoreProperty||"_state";g=[];if(f[a]){if(f.__only_serialize__){for(var k=0;k<d.length;k++){f=d[k];var n=c[f];f!==a&&(n&&n&&(n.derived||n.readOnly||n.hasOwnProperty("serialize")&&!n.serialize)||g.push(f))}return g}a=d.indexOf(a);
-1<a&&d.splice(a,1);for(k in c)a=c[k],f=d.indexOf(k),a.derived||a.readOnly||a.hasOwnProperty("serialize")&&!a.serialize?-1<f&&d.splice(f,1):-1===f&&g.push(k);return g.concat(d)}}},{key:"additionallyDeserializeBeforeProperties",value:function(c,g,a,d,f,k,n){var p=a.constructor[Symbol["for"]("lively.classes-properties-and-settings")];if(!p)return d;var q=p.properties,r=p.order;p=p.propertySettings.valueStoreProperty||"_state";d=f.props;if(d[p])return d;d=gk.obj.clone(d);a.hasOwnProperty(p)||a.initializeProperties();
a[p];for(f=0;f<r.length;f++)p=r[f],q[p],d.hasOwnProperty(p)&&(g.recreatePropertyAndSetProperty(a,d,p,k,c,n),delete d[p]);return d}}]);return b}();gk.LivelyClassPropertiesPlugin=s2;var t2=function(){function b(){Sd(this,b)}uc(b,[{key:"additionallySerialize",value:function(c,g,a,d){var f=this,k=g.realObj;k&&(this._serializable(k)?gk.properties.allOwnPropertiesOrFunctions(k,function(n,p){f._serializable(k[p])||console.warn("Attribute cannot be serialized: ".concat(p," of ").concat(k,". Might be an anonymous function?"))}):
console.warn("Cannot serialize anonymous function ".concat(k)))}},{key:"_serializable",value:function(c){return"function"!==typeof c||!!c.isWrapped||!!c.hasLivelyClosure}}]);return b}();gk.SerializableCheckPlugin=t2;var oS={livelyClassPropertiesPlugin:new gk.LivelyClassPropertiesPlugin,dontSerializePropsPlugin:new gk.DontSerializePropsPlugin,onlySerializePropsPlugin:new gk.OnlySerializePropsPlugin,additionallySerializePlugin:new gk.AdditionallySerializePlugin,classPlugin:new gk.ClassPlugin,customSerializePlugin:new gk.CustomSerializePlugin,
indicationPlugin:new gk.SerializationIndicationPlugin,serializableCheckPlugin:new gk.SerializableCheckPlugin,finishPlugin:new gk.SerializationFinishPlugin};gk.plugins=oS;gk.plugins=oS;var lt=bd("a1",[gk.plugins.indicationPlugin,gk.plugins.customSerializePlugin,gk.plugins.classPlugin,gk.plugins.additionallySerializePlugin,gk.plugins.onlySerializePropsPlugin,gk.plugins.dontSerializePropsPlugin,gk.plugins.livelyClassPropertiesPlugin,gk.plugins.finishPlugin]);gk.allPlugins=lt;gk.allPlugins=lt;var Fk=
window.lively.FreezerRuntime.recorderFor("lively.serializer2/object-pool.js");Fk.__additionally_serialize__addObjectFunction=function(b,c,g,a){var d=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[];return function(f,k){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;return c.props[f]=n?{value:k,verbatim:n}:{value:b.snapshotProperty(b.id,k,d.concat([f]),g,a)}}};Fk.arr=aj;Fk.Path=qj;Fk.obj=bj;Fk.string=Xj;Fk.isPrimitive=OB;Fk.ClassHelper=PA;Fk.ExpressionSerializer=Fp;Fk.allPlugins=
lt;Fk.debugSerialization=!1;Fk.debugDeserialization=!1;var QA=bd("bJ",function(){function b(c){Sd(this,b);this.options=Object.assign({checkForLeaks:!1,ignoreClassNotFound:!0,idPropertyName:"id"},c);this.reset()}uc(b,null,[{key:"withDefaultPlugins",value:function(c){return new this(Object.assign({plugins:Fk.allPlugins},c))}},{key:"resolveFromSnapshotAndId",value:function(c,g){return(new this(g)).resolveFromSnapshotAndId(c)}},{key:"fromSnapshot",value:function(c,g){return(new this(g)).readSnapshot(c)}},
{key:"withObject",value:function(c,g){g=new this(g);g.add(c);return g}}]);uc(b,[{key:"reset",value:function(){this.uuidGen=Fk.string.newUUID;this._obj_ref_map=new Map;this._id_ref_map={};var c=this.options;this.classHelper=new Fk.ClassHelper(c);this.expressionSerializer=new Fk.ExpressionSerializer;c.idPropertyName&&(this.idPropertyName=c.idPropertyName);c.uuidGen&&(this.uuidGen=c.uuidGen);c.reinitializeIds&&(this.reinitializeIds=c.reinitializeIds);c.hasOwnProperty("ignoreClassNotFound")&&(this.classHelper.options.ignoreClassNotFound=
c.ignoreClassNotFound);var g=this.plugins={serializeObject:[],additionallySerialize:[],propertiesToSerialize:[],deserializeObject:[],additionallyDeserializeBeforeProperties:[],additionallyDeserializeAfterProperties:[],afterDeserialization:[],beforeDeserialization:[],afterSerialization:[],beforeSerialization:[]};c.plugins&&c.plugins.forEach(function(a){"function"===typeof a.serializeObject&&g.serializeObject.push(a);"function"===typeof a.additionallySerialize&&g.additionallySerialize.push(a);"function"===
typeof a.propertiesToSerialize&&g.propertiesToSerialize.push(a);"function"===typeof a.deserializeObject&&g.deserializeObject.push(a);"function"===typeof a.additionallyDeserializeBeforeProperties&&g.additionallyDeserializeBeforeProperties.push(a);"function"===typeof a.additionallyDeserializeAfterProperties&&g.additionallyDeserializeAfterProperties.push(a);"function"===typeof a.beforeDeserialization&&g.beforeDeserialization.push(a);"function"===typeof a.afterDeserialization&&g.afterDeserialization.push(a);
"function"===typeof a.beforeSerialization&&g.beforeSerialization.push(a);"function"===typeof a.afterSerialization&&g.afterSerialization.push(a)})}},{key:"knowsId",value:function(c){return!!this._id_ref_map[c]}},{key:"refForId",value:function(c){return this._id_ref_map[c]}},{key:"resolveToObj",value:function(c){return(c=this._id_ref_map[c])?c.realObj:void 0}},{key:"ref",value:function(c){return this._obj_ref_map.get(c)}},{key:"objects",value:function(){return Array.from(this._obj_ref_map.keys())}},
{key:"objectRefs",value:function(){return Array.from(this._obj_ref_map.values())}},{key:"internalAddRef",value:function(c){c.realObj&&this._obj_ref_map.set(c.realObj,c);return this._id_ref_map[c.id]=c}},{key:"add",value:function(c){var g=this;if(!Fk.isPrimitive(c)){if(Array.isArray(c))return c.map(function(d){return g.add(d)});var a=c.__serialization_id_property__||this.idPropertyName;return this.ref(c)||this.internalAddRef(new Fk.ObjectRef(c[a]||this.uuidGen(),c,void 0,this.idPropertyName))}}},{key:"snapshot",
value:function(c){var g={};this.plugin_beforeSerialization(g,c);for(var a=0,d=Object.keys(this._id_ref_map);a<d.length;a++)this._id_ref_map[d[a]].snapshotObject(g,this);return g=this.plugin_afterSerialization(g,c)}},{key:"snapshotObject",value:function(c){c=this.add(c).id;var g=this.snapshot(c);return{id:c,snapshot:g}}},{key:"readSnapshot",value:function(c,g){if(c.hasOwnProperty("id"))throw Error("readSnapshot expects simple serialized object map, not id-snapshot pair!");if(this.options.skipMigrations)Fk.ObjectRef.fromSnapshot(g,
c,this,[],this.idPropertyName);else{g=0;for(var a=Object.keys(c);g<a.length;g++)this.resolveToObj(a[g])||Fk.ObjectRef.fromSnapshot(a[g],c,this,[],this.idPropertyName)}return this}},{key:"resolveFromSnapshotAndId",value:function(c){if(!c.hasOwnProperty("id"))throw Error("idAndSnapshot does not have id");if(!c.hasOwnProperty("snapshot"))throw Error("idAndSnapshot does not have snapshot");var g=c=this.plugin_beforeDeserialization(c),a=g.id;this.readSnapshot(g.snapshot,a);this.plugin_afterDeserialization(c);
return this.resolveToObj(a)}},{key:"plugin_beforeSerialization",value:function(c,g){for(var a=0;a<this.plugins.beforeSerialization.length;a++)this.plugins.beforeSerialization[a].beforeSerialization(this,c,g)}},{key:"plugin_afterSerialization",value:function(c,g){for(var a=0;a<this.plugins.afterSerialization.length;a++){var d=this.plugins.afterSerialization[a].afterSerialization(this,c,g);d&&(c=d)}return c}},{key:"plugin_beforeDeserialization",value:function(c){for(var g=0;g<this.plugins.beforeDeserialization.length;g++){var a=
this.plugins.beforeDeserialization[g].beforeDeserialization(this,c);a&&(c=a)}return c}},{key:"plugin_afterDeserialization",value:function(c){for(var g=0;g<this.plugins.afterDeserialization.length;g++)this.plugins.afterDeserialization[g].afterDeserialization(this,c)}},{key:"plugin_serializeObject",value:function(c,g,a,d){for(var f=0;f<this.plugins.serializeObject.length;f++){var k=this.plugins.serializeObject[f].serializeObject(c,g,this,a,d);if(k)return k}}},{key:"plugin_propertiesToSerialize",value:function(c,
g,a){for(var d=0;d<this.plugins.propertiesToSerialize.length;d++){var f=this.plugins.propertiesToSerialize[d].propertiesToSerialize(this,c,g,a);f&&(a=f)}return a}},{key:"plugin_additionallySerialize",value:function(c,g,a,d){a=this.plugins.additionallySerialize.length?Fk.__additionally_serialize__addObjectFunction(c,g,a,this,d):null;for(d=0;d<this.plugins.additionallySerialize.length;d++)this.plugins.additionallySerialize[d].additionallySerialize(this,c,g,a)}},{key:"plugin_deserializeObject",value:function(c,
g,a){for(var d=0;d<this.plugins.deserializeObject.length;d++){var f=this.plugins.deserializeObject[d].deserializeObject(this,c,g,a);if(f)return f}}},{key:"plugin_additionallyDeserializeBeforeProperties",value:function(c,g,a,d,f,k){for(var n=0;n<this.plugins.additionallyDeserializeBeforeProperties.length;n++){var p=this.plugins.additionallyDeserializeBeforeProperties[n].additionallyDeserializeBeforeProperties(this,c,g,a,d,f,k);p&&(a=p)}return a}},{key:"plugin_additionallyDeserializeAfterProperties",
value:function(c,g,a,d,f){for(var k=0;k<this.plugins.additionallyDeserializeAfterProperties.length;k++)this.plugins.additionallyDeserializeAfterProperties[k].additionallyDeserializeAfterProperties(this,c,g,a,d,f)}}]);return b}());Fk.ObjectPool=QA;var XG=function(){function b(c,g,a){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"id";Sd(this,b);this.id=c;this.idPropertyName=d;this.realObj=g;this.snapshotVersions=[];this.snapshots={};a&&(d=a.rev||0,this.snapshotVersions.push(d),this.snapshots[d]=
a)}uc(b,null,[{key:"fromSnapshot",value:function(c,g,a){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],f=new this(c,void 0,void 0,4<arguments.length?arguments[4]:void 0);try{return a.internalAddRef(f).recreateObjFromSnapshot(g,a,d)}catch(k){if(a.options.highlightBuggyMorphs)for(;d.length;){if((f=Fk.Path(d).map(function(n,p){return"submorphs"==n?p.filter(function(q){return!q.isHand&&!q.isEpiMorph}):p}).get(a.options.rootObject))&&f.isMorph&&f.world()){f.show(!0);a.options.highlightBuggyMorphs=
!1;break}d.pop()}throw k;}}}]);uc(b,[{key:"asRefForSerializedObjMap",value:function(){return{__ref__:!0,id:this.id,rev:0<arguments.length&&void 0!==arguments[0]?arguments[0]:"????"}}},{key:"snapshotObject",value:function(c,g){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];Fk.debugSerialization&&console.log("[serialize] ".concat(a.join(".")));if(100<a.length)throw Error("Stopping serializer, encountered a possibly infinit loop: ".concat(a.join(".")));var d=this.id,f=this.realObj,k=
this.snapshots;if(!f)return console.error("Cannot marshall object ref ".concat(d,", no real object!")),Object.assign({},this.asRefForSerializedObjMap(),{isMissing:!0});var n=f._rev||0;var p=this.asRefForSerializedObjMap(n);Fk.arr.pushIfNotIncluded(this.snapshotVersions,n);if(k[n])return c[d]||(c[d]=k[n]),p;var q=ad(d);"number"===q&&(d=String(d),q="string");if("string"!==q)throw Error("Error snapshoting ".concat(f,": ")+"id is not a string but ".concat(d," ")+"(serialization path: ".concat(a.join("."),
")"));if(q=g.plugin_serializeObject(f,!1,c,a))return k[n]=c[d]=q,p;q=Object.getOwnPropertyNames(f);var r={};k=k[n]=c[d]={rev:n,props:r};(n=g.plugin_propertiesToSerialize(this,k,q))&&(q=n);for(n=0;n<q.length;n++){var u=q[n];r[u]={value:this.snapshotProperty(d,f[u],a.concat([u]),c,g)}}g.plugin_additionallySerialize(this,k,c,a);return p}},{key:"snapshotProperty",value:function(c,g,a,d,f){var k=this;if(Fk.isPrimitive(g))return g;var n=f.plugin_serializeObject(g,!0,d,a);if(n)return n;if("function"!==typeof g)return Array.isArray(g)?
g.map(function(p,q){return k.snapshotProperty(c,p,a.concat(q),d,f)}):(g=f.add(g))&&g.isObjectRef?g.snapshotObject(d,f,a):g}},{key:"recreateObjFromSnapshot",value:function(c,g,a){if(this.realObj)return this;Fk.debugDeserialization&&console.log("[deserialize] ".concat(this.id," (via ").concat(a.join("."),")"));var d=c[this.id];if(!d)return console.error("Cannot recreateObjFromSnapshot ObjectRef "+"".concat(this.id," b/c of missing snapshot in snapshot map!")),this;var f=d.rev,k;f=f||0;this.snapshotVersions.push(f);
this.snapshots[f]=d;(k=g.plugin_deserializeObject(this,d,a))||(k={});"undefined"===typeof k._rev&&"object"===ad(k)&&(k._rev=f||0);this.realObj=k;g.internalAddRef(this);if(!k)return this;f=d.props;var n=g.plugin_additionallyDeserializeBeforeProperties(this,k,f,d,c,a);n&&(f=n);if(f)for(var p in f)this.recreatePropertyAndSetProperty(k,f,p,c,g,a);p=k.__serialization_id_property__||this.idPropertyName;g.reinitializeIds&&k.hasOwnProperty(p)&&(k[p]=g.reinitializeIds(this.id,this));g.plugin_additionallyDeserializeAfterProperties(this,
k,d,c,a);return this}},{key:"recreatePropertyAndSetProperty",value:function(c,g,a,d,f,k){try{var n=g[a]||{value:"NON EXISTING"},p=n.value;c[a]=n.verbatim?p:this.recreateProperty(a,p,d,f,k.concat(a))}catch(r){try{var q=String(c)}catch(u){q="[some ".concat(c.constructor.name,"]")}r.__seen?console.error("Error deserializing property ".concat(a," of ").concat(q)):(c="".concat(a," of ").concat(q," (").concat(JSON.stringify(p),")"),console.error("Error deserializing property ".concat(c)),r.__seen=!0)}}},
{key:"recreateProperty",value:function(c,g,a,d,f){var k=this;if("string"===typeof g&&d.expressionSerializer.isSerializedExpression(g))return d.expressionSerializer.deserializeExpr(g);if(Fk.isPrimitive(g))return g;if(Array.isArray(g))return g.map(function(n,p){return k.recreateProperty(p,n,a,d,f.concat(p))});c=g.__serialization_id_property__||this.idPropertyName;return(d.refForId(g[c])||Fk.ObjectRef.fromSnapshot(g[c],a,d,f,this.idPropertyName)).realObj}},{key:"isObjectRef",get:function(){return!0}},
{key:"currentSnapshot",get:function(){if(this.snapshotVersions.length)var c=Fk.arr.last(this.snapshotVersions);else c=0,this.snapshotVersions.push(c);return this.snapshots[c]||(this.snapshots[c]={rev:c,props:{}})}},{key:"currentRev",get:function(){return this.snapshotVersions.length?Fk.arr.last(this.snapshotVersions):0}}]);return b}();Fk.ObjectRef=XG;var ji=window.lively.FreezerRuntime.recorderFor("lively.serializer2/snapshot-navigation.js");ji.referenceGraph=PB;ji.isReference=QB;ji.referencesOfRef=
PI;ji.referencesOfId=RB;ji.referencesInArray=QI;ji.moduleOfId=SB;ji.referencesAndClassNamesOfId=TB;ji.classNameOfId=UB;ji.findPathFromToId=VB;ji.lookupPath=WB;ji.modifyProperty=XB;ji.removeUnreachableObjects=ts;ji.clearDanglingConnections=YB;ji.removeEpiConnections=ZB;ji.requiredModulesOfSnapshot=us;ji.Path=qj;ji.obj=bj;ji.arr=aj;ji.graph=iv;ji.ClassHelper=PA;ji.ExpressionSerializer=Fp;ji.referenceGraph=PB;ji.isReference=QB;ji.referencesOfRef=PI;ji.referencesOfId=RB;ji.moduleOfId=SB;ji.referencesAndClassNamesOfId=
TB;ji.classNameOfId=UB;ji.findPathFromToId=VB;ji.lookupPath=WB;ji.modifyProperty=XB;ji.removeUnreachableObjects=ts;ji.clearDanglingConnections=YB;ji.removeEpiConnections=ZB;ji.defaultExprSerializer=new ji.ExpressionSerializer;ji.requiredModulesOfSnapshot=us;var yq=[],ku=!1,vs,Oy=-1;SI.prototype.run=function(){this.fun.apply(null,this.array)};var u2={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},YG=function(){return{}},mr={now:"undefined"!==typeof performance?performance.now.bind(performance):
void 0,timing:"undefined"!==typeof performance?performance.timing:void 0};if(void 0===mr.now){var pS=Date.now();mr.timing&&mr.timing.navigationStart&&(pS=mr.timing.navigationStart);mr.now=()=>Date.now()-pS}aC.bigint=function(b){b=aC(b);return"undefined"===typeof BigInt?1E9*b[0]+b[1]:BigInt(1E9*b[0])+BigInt(b[1])};var Pl={version:"v16.8.0",versions:{},arch:"x64",platform:"browser",release:{name:"node",sourceUrl:"",headersUrl:"",libUrl:""},_rawDebug:Rm,moduleLoadList:[],binding:function(b){$B("binding")},
_linkedBinding:function(b){$B("_linkedBinding")},_events:{},_eventsCount:0,_maxListeners:10,on:nr,addListener:nr,once:nr,off:nr,removeListener:nr,removeAllListeners:nr,emit:Rm,prependListener:nr,prependOnceListener:nr,listeners:function(b){return[]},domain:{},_exiting:!1,config:{},dlopen:function(b){$B("dlopen")},uptime:function(){return mr.now()/1E3},_getActiveRequests:function(){return[]},_getActiveHandles:function(){return[]},reallyExit:Rm,_kill:Rm,cpuUsage:YG,resourceUsage:YG,memoryUsage:YG,kill:Rm,
exit:Rm,openStdin:Rm,allowedNodeEnvironmentFlags:{},assert:function(b,c){if(!b)throw Error(c||"assertion error");},features:{inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},_fatalExceptions:Rm,setUncaughtExceptionCaptureCallback:Rm,hasUncaughtExceptionCaptureCallback:function(){return!1},emitWarning:function(b,c){console.warn((c?c+": ":"")+b)},nextTick:function(b){var c=Array(arguments.length-1);if(1<arguments.length)for(var g=1;g<arguments.length;g++)c[g-
1]=arguments[g];yq.push(new SI(b,c));1!==yq.length||ku||setTimeout(RI,0)},_tickCallback:Rm,_debugProcess:Rm,_debugEnd:Rm,_startProfilerIdleNotifier:Rm,_stopProfilerIdleNotifier:Rm,stdout:void 0,stdin:void 0,stderr:void 0,abort:Rm,umask:function(b){return 0},chdir:function(b){},cwd:function(){return"/"},env:u2,title:"browser",argv:["/usr/bin/node"],execArgv:[],pid:2,ppid:1,execPath:"/bin/usr/node",debugPort:9229,hrtime:aC,argv0:"node",_preload_modules:[],setSourceMapsEnabled:Rm},UI={},TI=!1,WI={},
VI=!1,Gp={},XI=!1,ZI={},YI=!1,aJ={},$I=!1,cJ={},bJ=!1,eJ={},dJ=!1,gJ={},fJ=!1,iJ={},hJ=!1,kJ={},jJ=!1,mJ={},lJ=!1,oJ={},nJ=!1,qJ={},pJ=!1,sJ={},rJ=!1,uJ={},tJ=!1,wJ={},vJ=!1,yJ={},xJ=!1,AJ={},zJ=!1,CJ={},BJ=!1,EJ={},DJ=!1,GJ={},FJ=!1,JJ={},IJ=!1,LJ={},KJ=!1,OJ={},NJ=!1,QJ={},PJ=!1,v2={},w2=v2=function(b){b.prototype[Symbol.iterator]=function*(){for(let c=this.head;c;c=c.next)yield c.value}},qS={};qS=wk;wk.Node=ws;wk.create=wk;wk.prototype.removeNode=function(b){if(b.list!==this)throw Error("removing node which does not belong to this list");
var c=b.next,g=b.prev;c&&(c.prev=g);g&&(g.next=c);b===this.head&&(this.head=c);b===this.tail&&(this.tail=g);b.list.length--;b.next=null;b.prev=null;b.list=null;return c};wk.prototype.unshiftNode=function(b){if(b!==this.head){b.list&&b.list.removeNode(b);var c=this.head;b.list=this;if(b.next=c)c.prev=b;this.head=b;this.tail||(this.tail=b);this.length++}};wk.prototype.pushNode=function(b){if(b!==this.tail){b.list&&b.list.removeNode(b);var c=this.tail;b.list=this;if(b.prev=c)c.next=b;this.tail=b;this.head||
(this.head=b);this.length++}};wk.prototype.push=function(){for(var b=0,c=arguments.length;b<c;b++)this.tail=new ws(arguments[b],this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length};wk.prototype.unshift=function(){for(var b=0,c=arguments.length;b<c;b++)this.head=new ws(arguments[b],null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length};wk.prototype.pop=function(){if(this.tail){var b=this.tail.value;(this.tail=this.tail.prev)?this.tail.next=
null:this.head=null;this.length--;return b}};wk.prototype.shift=function(){if(this.head){var b=this.head.value;(this.head=this.head.next)?this.head.prev=null:this.tail=null;this.length--;return b}};wk.prototype.forEach=function(b,c){c=c||this;for(var g=this.head,a=0;null!==g;a++)b.call(c,g.value,a,this),g=g.next};wk.prototype.forEachReverse=function(b,c){c=c||this;for(var g=this.tail,a=this.length-1;null!==g;a--)b.call(c,g.value,a,this),g=g.prev};wk.prototype.get=function(b){for(var c=0,g=this.head;null!==
g&&c<b;c++)g=g.next;if(c===b&&null!==g)return g.value};wk.prototype.getReverse=function(b){for(var c=0,g=this.tail;null!==g&&c<b;c++)g=g.prev;if(c===b&&null!==g)return g.value};wk.prototype.map=function(b,c){c=c||this;for(var g=new wk,a=this.head;null!==a;)g.push(b.call(c,a.value,this)),a=a.next;return g};wk.prototype.mapReverse=function(b,c){c=c||this;for(var g=new wk,a=this.tail;null!==a;)g.push(b.call(c,a.value,this)),a=a.prev;return g};wk.prototype.reduce=function(b,c){var g=this.head;if(1<arguments.length)var a=
c;else if(this.head)g=this.head.next,a=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=0;null!==g;d++)a=b(a,g.value,d),g=g.next;return a};wk.prototype.reduceReverse=function(b,c){var g=this.tail;if(1<arguments.length)var a=c;else if(this.tail)g=this.tail.prev,a=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=this.length-1;null!==g;d--)a=b(a,g.value,d),g=g.prev;return a};wk.prototype.toArray=function(){for(var b=
Array(this.length),c=0,g=this.head;null!==g;c++)b[c]=g.value,g=g.next;return b};wk.prototype.toArrayReverse=function(){for(var b=Array(this.length),c=0,g=this.tail;null!==g;c++)b[c]=g.value,g=g.prev;return b};wk.prototype.slice=function(b,c){c=c||this.length;0>c&&(c+=this.length);b=b||0;0>b&&(b+=this.length);var g=new wk;if(c<b||0>c)return g;0>b&&(b=0);c>this.length&&(c=this.length);for(var a=0,d=this.head;null!==d&&a<b;a++)d=d.next;for(;null!==d&&a<c;a++,d=d.next)g.push(d.value);return g};wk.prototype.sliceReverse=
function(b,c){c=c||this.length;0>c&&(c+=this.length);b=b||0;0>b&&(b+=this.length);var g=new wk;if(c<b||0>c)return g;0>b&&(b=0);c>this.length&&(c=this.length);for(var a=this.length,d=this.tail;null!==d&&a>c;a--)d=d.prev;for(;null!==d&&a>b;a--,d=d.prev)g.push(d.value);return g};wk.prototype.splice=function(b,c,...g){b>this.length&&(b=this.length-1);0>b&&(b=this.length+b);for(var a=0,d=this.head;null!==d&&a<b;a++)d=d.next;b=[];for(a=0;d&&a<c;a++)b.push(d.value),d=this.removeNode(d);null===d&&(d=this.tail);
d!==this.head&&d!==this.tail&&(d=d.prev);for(a=0;a<g.length;a++)c=d,d=g[a],c=c===this.head?new ws(d,null,c,this):new ws(d,c,c.next,this),null===c.next&&(this.tail=c),null===c.prev&&(this.head=c),this.length++,d=c;return b};wk.prototype.reverse=function(){for(var b=this.head,c=this.tail,g=b;null!==g;g=g.prev){var a=g.prev;g.prev=g.next;g.next=a}this.head=c;this.tail=b;return this};try{w2(wk)}catch(b){}var x2={};const y2=qS,mt=Symbol("max"),Zn=Symbol("length"),tv=Symbol("lengthCalculator"),Gx=Symbol("allowStale"),
nt=Symbol("maxAge"),Rq=Symbol("dispose"),rS=Symbol("noDisposeOnSet"),sm=Symbol("lruList"),fp=Symbol("cache"),sS=Symbol("updateAgeOnGet"),ZG=()=>1;class z2{constructor(b){"number"===typeof b&&(b={max:b});b||(b={});if(b.max&&("number"!==typeof b.max||0>b.max))throw new TypeError("max must be a non-negative number");this[mt]=b.max||Infinity;const c=b.length||ZG;this[tv]="function"!==typeof c?ZG:c;this[Gx]=b.stale||!1;if(b.maxAge&&"number"!==typeof b.maxAge)throw new TypeError("maxAge must be a number");
this[nt]=b.maxAge||0;this[Rq]=b.dispose;this[rS]=b.noDisposeOnSet||!1;this[sS]=b.updateAgeOnGet||!1;this.reset()}set max(b){if("number"!==typeof b||0>b)throw new TypeError("max must be a non-negative number");this[mt]=b||Infinity;Hx(this)}get max(){return this[mt]}set allowStale(b){this[Gx]=!!b}get allowStale(){return this[Gx]}set maxAge(b){if("number"!==typeof b)throw new TypeError("maxAge must be a non-negative number");this[nt]=b;Hx(this)}get maxAge(){return this[nt]}set lengthCalculator(b){"function"!==
typeof b&&(b=ZG);b!==this[tv]&&(this[tv]=b,this[Zn]=0,this[sm].forEach(c=>{c.length=this[tv](c.value,c.key);this[Zn]+=c.length}));Hx(this)}get lengthCalculator(){return this[tv]}get length(){return this[Zn]}get itemCount(){return this[sm].length}rforEach(b,c){c=c||this;for(let g=this[sm].tail;null!==g;){const a=g.prev;tS(this,b,g,c);g=a}}forEach(b,c){c=c||this;for(let g=this[sm].head;null!==g;){const a=g.next;tS(this,b,g,c);g=a}}keys(){return this[sm].toArray().map(b=>b.key)}values(){return this[sm].toArray().map(b=>
b.value)}reset(){this[Rq]&&this[sm]&&this[sm].length&&this[sm].forEach(b=>this[Rq](b.key,b.value));this[fp]=new Map;this[sm]=new y2;this[Zn]=0}dump(){return this[sm].map(b=>RA(this,b)?!1:{k:b.key,v:b.value,e:b.now+(b.maxAge||0)}).toArray().filter(b=>b)}dumpLru(){return this[sm]}set(b,c,g){if((g=g||this[nt])&&"number"!==typeof g)throw new TypeError("maxAge must be a number");const a=g?Date.now():0,d=this[tv](c,b);if(this[fp].has(b)){if(d>this[mt])return uv(this,this[fp].get(b)),!1;const f=this[fp].get(b).value;
if(this[Rq]&&!this[rS])this[Rq](b,f.value);f.now=a;f.maxAge=g;f.value=c;this[Zn]+=d-f.length;f.length=d;this.get(b);Hx(this);return!0}g=new A2(b,c,d,a,g);if(g.length>this[mt]){if(this[Rq])this[Rq](b,c);return!1}this[Zn]+=g.length;this[sm].unshift(g);this[fp].set(b,this[sm].head);Hx(this);return!0}has(b){if(!this[fp].has(b))return!1;b=this[fp].get(b).value;return!RA(this,b)}get(b){return $G(this,b,!0)}peek(b){return $G(this,b,!1)}pop(){const b=this[sm].tail;if(!b)return null;uv(this,b);return b.value}del(b){uv(this,
this[fp].get(b))}load(b){this.reset();const c=Date.now();for(let a=b.length-1;0<=a;a--){const d=b[a];var g=d.e||0;0===g?this.set(d.k,d.v):(g-=c,0<g&&this.set(d.k,d.v,g))}}prune(){this[fp].forEach((b,c)=>$G(this,c,!1))}}const $G=(b,c,g)=>{if(c=b[fp].get(c)){const a=c.value;if(RA(b,a)){if(uv(b,c),!b[Gx])return}else g&&(b[sS]&&(c.value.now=Date.now()),b[sm].unshiftNode(c));return a.value}},RA=(b,c)=>{if(!c||!c.maxAge&&!b[nt])return!1;const g=Date.now()-c.now;return c.maxAge?g>c.maxAge:b[nt]&&g>b[nt]},
Hx=b=>{if(b[Zn]>b[mt])for(let c=b[sm].tail;b[Zn]>b[mt]&&null!==c;){const g=c.prev;uv(b,c);c=g}},uv=(b,c)=>{if(c){const g=c.value;if(b[Rq])b[Rq](g.key,g.value);b[Zn]-=g.length;b[fp].delete(g.key);b[sm].removeNode(c)}};class A2{constructor(b,c,g,a,d){this.key=b;this.value=c;this.length=g;this.now=a;this.maxAge=d||0}}const tS=(b,c,g,a)=>{let d=g.value;RA(b,d)&&(uv(b,g),b[Gx]||(d=void 0));d&&c.call(a,d.value,d.key,b)};var uS=x2=z2,vS=Object.freeze({__proto__:null,"default":uS}),oW="default"in vS?uS:vS,
hC={},RJ=!1,iC={},SJ=!1,UJ={},TJ=!1,WJ={},VJ=!1,YJ={},XJ=!1,$J={},ZJ=!1,bK={},aK=!1,dK={},cK=!1,fK={},eK=!1,hK={},gK=!1,jK={},iK=!1,lK={},kK=!1,nK={},mK=!1,pK={},oK=!1,rK={},qK=!1,tK={},sK=!1,vK={},uK=!1,xK={},wK=!1,wS={},xS=!1;const yS=function(){if(xS)return wS;xS=!0;var b=lu();return wS={re:b.re,src:b.src,tokens:b.t,SEMVER_SPEC_VERSION:Py().SEMVER_SPEC_VERSION,SemVer:cn(),compareIdentifiers:bC().compareIdentifiers,rcompareIdentifiers:bC().rcompareIdentifiers,parse:mu(),valid:fW(),clean:gW(),inc:hW(),
diff:sW(),major:iW(),minor:jW(),patch:tW(),prerelease:kW(),compare:No(),rcompare:lW(),compareLoose:uW(),compareBuild:dC(),sort:vW(),rsort:mW(),gt:Sy(),lt:eC(),eq:cC(),neq:HJ(),gte:fC(),lte:gC(),cmp:MJ(),coerce:nW(),Comparator:Ty(),Range:Oo(),satisfies:Uy(),toComparators:wW(),maxSatisfying:pW(),minSatisfying:xW(),minVersion:yW(),validRange:qW(),outside:jC(),gtr:zW(),ltr:AW(),intersects:rW(),simplifyRange:BW(),subset:CW()}}();yS.re;var Mi=window.lively.FreezerRuntime.recorderFor("lively.serializer2/index.js");
Mi.normalizeOptions=kC;Mi.normalizeMigrations=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return{before:b.filter(function(c){return"function"===typeof c.snapshotConverter}),after:b.filter(function(c){return"function"===typeof c.objectConverter})}};Mi.runMigrations=function(b,c,g,a){for(var d=0;d<b.length;d++){var f=b[d];try{g=f[c](g,a)}catch(k){console.error("migration ".concat(f.name," failed:")),console.error(k)}}return g};Mi.serialize=nw;Mi.deserialize=Vy;Mi.deserializeWithMigrations=
Wy;Mi.copy=lC;Mi.ObjectPool=QA;Mi.requiredModulesOfSnapshot=us;Mi.removeUnreachableObjects=ts;Mi.clearDanglingConnections=YB;Mi.removeEpiConnections=ZB;Mi.allPlugins=lt;Mi.semver=yS;Mi.serializerVersion="0.1.3";Mi.normalizeOptions=kC;Mi.majorAndMinorVersionRe=/\.[^\.]+$/;Mi.ObjectRef=XG;Mi.ObjectPool=QA;Mi.requiredModulesOfSnapshot=us;Mi.removeUnreachableObjects=ts;Mi.serialize=nw;Mi.deserialize=Vy;Mi.deserializeWithMigrations=Wy;Mi.copy=lC;Mi.ExpressionSerializer=Fp;Mi.serializeSpec=Ep;Mi.deserializeSpec=
xq;Mi.getSerializableClassMeta=gu;Mi.locateClass=ss;Mi.getClassName=Mo;Mi.ExpressionSerializer=Fp;Mi.getSerializableClassMeta=gu;Mi.locateClass=ss;Mi.serializeSpec=Ep;Mi.deserializeSpec=xq;Mi.getClassName=Mo;Mi.allPlugins=lt;var B2=Object.freeze({__proto__:null,normalizeOptions:kC,ObjectRef:XG,ObjectPool:QA,requiredModulesOfSnapshot:us,removeUnreachableObjects:ts,serialize:nw,deserialize:Vy,deserializeWithMigrations:Wy,copy:lC,ExpressionSerializer:Fp,getSerializableClassMeta:gu,locateClass:ss,serializeSpec:Ep,
deserializeSpec:xq,getClassName:Mo,allPlugins:lt});bd("cb",B2);var C2={},EW=Object.prototype.toString,aH=C2=Array.isArray||DW,D2={},Ix=D2="2",mC="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,zS={};lo.NONE=0;lo.VTEXT=1;lo.VNODE=2;lo.WIDGET=3;lo.PROPS=4;lo.ORDER=5;lo.INSERT=6;lo.REMOVE=7;lo.THUNK=8;zS=lo;lo.prototype.version=Ix;lo.prototype.type="VirtualPatch";var Sq=zS,E2={},Jx=E2=function(b){return b&&"VirtualNode"===b.type&&b.version===Ix},F2={},SA=F2=function(b){return b&&
"VirtualText"===b.type&&b.version===Ix},G2={},Or=G2=function(b){return b&&"Widget"===b.type},H2={},Kx=H2=function(b){return b&&"Thunk"===b.type},I2={},FW=Jx,GW=SA,HW=Or,AS=I2=function(b,c){var g=b,a=c;Kx(c)&&(a=yK(c,b));Kx(b)&&(g=yK(b,null));return{a:g,b:a}},J2={},TA=J2=function(b){return"object"===typeof b&&null!==b},K2={},Lx=K2=function(b){return b&&("function"===typeof b.hook&&!b.hasOwnProperty("hook")||"function"===typeof b.unhook&&!b.hasOwnProperty("unhook"))},BS={},AK=TA,IW=Lx;BS=zK;var CS=
{},LW=aH,ql=Sq,xs=Jx,FK=SA,Yy=Or,Xy=Kx,KW=AS,JW=BS;CS=CK;var L2={},M2=L2=CS,N2=Object.freeze({}),DS="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,O2={},ES="undefined"!==typeof DS?DS:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var bH=document;else(bH=ES["__GLOBAL_DOCUMENT_CACHE@4"])||(bH=ES["__GLOBAL_DOCUMENT_CACHE@4"]=N2);var FS=O2=bH,P2={},HK=Lx,GS=P2=function(b,c,g){for(var a in c){var d=c[a];if(void 0===d)GK(b,a,d,g);else if(HK(d))GK(b,
a,d,g),d.hook&&d.hook(b,a,g?g[a]:void 0);else if(TA(d)){var f=void 0,k=void 0,n=b,p=a,q=g?g[p]:void 0;if("attributes"===p)for(k in d)f=d[k],void 0===f?n.removeAttribute(k):n.setAttribute(k,f);else if(q&&TA(q)&&IK(q)!==IK(d))n[p]=d;else for(f in TA(n[p])||(n[p]={}),k="style"===p?"":void 0,d)q=d[f],n[p][f]=void 0===q?k:q}else b[a]=d}},Q2={},KK=FS,QW=GS,PW=Jx,OW=SA,NW=Or,MW=AS,HS=Q2=JK,R2={},S2=R2=function(b,c){return Or(b)&&Or(c)?"name"in b&&"name"in c?b.id===c.id:b.init===c.init:!1},T2={},RW={},U2=
T2=function(b,c,g,a){return g&&0!==g.length?(g.sort(SW),LK(b,c,g,a,0)):{}},IS={},TW=Or;IS=function(b,c,g){var a=b.vNode,d=b.patch;switch(b.type){case Sq.REMOVE:return(d=c.parentNode)&&d.removeChild(c),NK(c,a),null;case Sq.INSERT:return d=g.render(d,g),c&&c.appendChild(d),c;case Sq.VTEXT:return 3===c.nodeType?(c.replaceData(0,c.length,d.text),d=c):(a=c.parentNode,d=g.render(d,g),a&&d!==c&&a.replaceChild(d,c)),d;case Sq.WIDGET:return d=(b=S2(a,d))?d.update(a,c)||c:g.render(d,g),(g=c.parentNode)&&d!==
c&&g.replaceChild(d,c),b||NK(c,a),d;case Sq.VNODE:return a=c.parentNode,d=g.render(d,g),a&&d!==c&&a.replaceChild(d,c),d;case Sq.ORDER:a=c.childNodes;g={};for(var f,k=0;k<d.removes.length;k++)f=d.removes[k],b=a[f.from],f.key&&(g[f.key]=b),c.removeChild(b);k=a.length;for(var n=0;n<d.inserts.length;n++)f=d.inserts[n],b=g[f.key],c.insertBefore(b,f.to>=k++?null:a[f.to]);return c;case Sq.PROPS:return GS(c,d,a.properties),c;case Sq.THUNK:return d=g.patch(c,d,g),c&&d&&c!==d&&c.parentNode&&c.parentNode.replaceChild(d,
c),d;default:return c}};var JS={},XW=FS,YW=aH,VW=HS,WW=U2,PK=IS;JS=OK;var V2={},W2=V2=JS,Hp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,KS={},bX=Jx,cX=Or,dX=Kx,aX=Lx;KS=qC;var ZW={},$W=[];qC.prototype.version=Ix;qC.prototype.type="VirtualNode";var cH=KS,eX="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,LS={};LS=rC;rC.prototype.version=Ix;rC.prototype.type="VirtualText";var dH=LS,MS={};MS=function(b){var c=String.prototype.split,
g=/()??/.exec("")[1]===b;return function(a,d,f){if("[object RegExp]"!==Object.prototype.toString.call(d))return c.call(a,d,f);var k=[],n=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.extended?"x":"")+(d.sticky?"y":""),p=0;d=new RegExp(d.source,n+"g");var q,r;a+="";g||(q=new RegExp("^"+d.source+"$(?!\\s)",n));for(f=f===b?4294967295:f>>>0;r=d.exec(a);){n=r.index+r[0].length;if(n>p){k.push(a.slice(p,r.index));!g&&1<r.length&&r[0].replace(q,function(){for(var x=1;x<arguments.length-2;x++)arguments[x]===
b&&(r[x]=b)});1<r.length&&r.index<a.length&&Array.prototype.push.apply(k,r.slice(1));var u=r[0].length;p=n;if(k.length>=f)break}d.lastIndex===r.index&&d.lastIndex++}p===a.length?(u||!d.test(""))&&k.push(""):k.push(a.slice(p));return k.length>f?k.slice(0,f):k}}();var X2={},Y2=MS,Z2=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,$2=/^\.|#/,a3=X2=function(b,c){if(!b)return"DIV";var g=!c.hasOwnProperty("id");b=Y2(b,Z2);var a=null;$2.test(b[1])&&(a="DIV");var d,f;for(f=0;f<b.length;f++)if(d=b[f]){var k=d.charAt(0);
if(a)if("."===k){var n=n||[];n.push(d.substring(1,d.length))}else"#"===k&&g&&(c.id=d.substring(1,d.length));else a=d}n&&(c.className&&n.push(c.className),c.className=n.join(" "));return c.namespace?a:a.toUpperCase()},NS={};NS=$y;$y.prototype.hook=function(b,c){b[c]!==this.value&&(b[c]=this.value)};var b3=NS,OS="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,PS={},eH="undefined"!==typeof window?window:"undefined"!==typeof OS?OS:{};PS=function(b,c){return b in eH?eH[b]:
eH[b]=c};var QS={},RS=PS;QS=function(b,c,g){var a="__INDIVIDUAL_ONE_VERSION_"+b,d=RS(a+"_ENFORCE_SINGLETON",c);if(d!==c)throw Error("Can only have one copy of "+b+".\nYou already have version "+d+" installed.\nThis means you cannot install version "+c);return RS(a,g)};var SS={};QS("ev-store","7");SS=function(b){var c=b["__EV_STORE_KEY@7"];c||(c=b["__EV_STORE_KEY@7"]={});return c};var TS={},US=SS;TS=ow;ow.prototype.hook=function(b,c){b=US(b);c=c.substr(3);b[c]=this.value};ow.prototype.unhook=function(b,
c){b=US(b);c=c.substr(3);b[c]=void 0};var VS={},TK=aH,RK=dH,fX=Jx,gX=SA,hX=Or,iX=Kx,c3=TS;VS=function(b,c,g){var a=[],d;if(d=!g)d="string"===typeof c||TK(c)||SK(c);if(d){g=c;var f={}}f=f||c||{};b=a3(b,f);if(f.hasOwnProperty("key")){var k=f.key;f.key=void 0}if(f.hasOwnProperty("namespace")){var n=f.namespace;f.namespace=void 0}"INPUT"!==b||n||!f.hasOwnProperty("value")||void 0===f.value||Lx(f.value)||(f.value=b3(f.value));c=f;for(var p in c)c.hasOwnProperty(p)&&(d=c[p],Lx(d)||"ev-"===p.substr(0,3)&&
(c[p]=c3(d)));void 0!==g&&null!==g&&QK(g,a,b,f);return new cH(b,f,a,k,n)};var d3={},e3=d3=VS,WS={};WS=HS;var ot={},Mx=ot={diff:M2,patch:W2,h:e3,create:WS,VNode:cH,VText:dH};ot.diff;ot.patch;ot.h;bd("bS",ot.create);ot.VNode;ot.VText;var f3={},g3=f3={abbr:"abbr",accept:"accept","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",alt:"alt",async:"async",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",
cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charset",checked:"checked",cite:"cite","class":"className",cols:"cols",colspan:"colSpan",command:"command",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",coords:"coords",crossorigin:"crossOrigin",data:"data",datetime:"dateTime","default":"default",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",dropzone:"dropzone",enctype:"encType",
"for":"htmlFor",form:"form",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameBorder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang","http-equiv":"httpEquiv",icon:"icon",id:"id",inputmode:"inputMode",ismap:"isMap",itemid:"itemId",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",kind:"kind",label:"label",lang:"lang",list:"list",
loop:"loop",manifest:"manifest",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",ping:"ping",placeholder:"placeholder",poster:"poster",preload:"preload",radiogroup:"radioGroup",readonly:"readOnly",rel:"rel",required:"required",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",
scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",sortable:"sortable",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srcset:"srcSet",start:"start",step:"step",style:"style",tabindex:"tabIndex",target:"target",title:"title",translate:"translate",type:"type",typemustmatch:"typeMustMatch",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap"},XS={};XS={about:null,"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,
alphabetic:null,amplitude:null,"arabic-form":null,ascent:null,attributeName:null,attributeType:null,azimuth:null,bandwidth:null,baseFrequency:null,baseProfile:null,"baseline-shift":null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,"class":null,clip:null,"clip-path":null,"clip-rule":null,clipPathUnits:null,color:null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,"color-rendering":null,content:null,contentScriptType:null,contentStyleType:null,
cursor:null,cx:null,cy:null,d:null,datatype:null,defaultAction:null,descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,editable:null,elevation:null,"enable-background":null,end:null,"ev:event":"http://www.w3.org/2001/xml-events",event:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,
focusHighlight:null,focusable:null,"font-family":null,"font-size":null,"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:null,height:null,"horiz-adv-x":null,"horiz-origin-x":null,"horiz-origin-y":null,id:null,ideographic:null,"image-rendering":null,
"in":null,in2:null,initialVisibility:null,intercept:null,k:null,k1:null,k2:null,k3:null,k4:null,kernelMatrix:null,kernelUnitLength:null,kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lang:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,"marker-mid":null,"marker-start":null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,
mediaContentEncodings:null,mediaSize:null,mediaTime:null,method:null,min:null,mode:null,name:null,"nav-down":null,"nav-down-left":null,"nav-down-right":null,"nav-left":null,"nav-next":null,"nav-prev":null,"nav-right":null,"nav-up":null,"nav-up-left":null,"nav-up-right":null,numOctaves:null,observer:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,"overline-position":null,"overline-thickness":null,"panose-1":null,path:null,pathLength:null,
patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,playbackOrder:null,"pointer-events":null,points:null,pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:null,r:null,radius:null,refX:null,refY:null,rel:null,"rendering-intent":null,repeatCount:null,repeatDur:null,requiredExtensions:null,requiredFeatures:null,requiredFonts:null,requiredFormats:null,resource:null,restart:null,result:null,rev:null,
role:null,rotate:null,rx:null,ry:null,scale:null,seed:null,"shape-rendering":null,slope:null,snapshotTime:null,spacing:null,specularConstant:null,specularExponent:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,
"stroke-opacity":null,"stroke-width":null,surfaceScale:null,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:null,tableValues:null,target:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,"text-rendering":null,textLength:null,timelineBegin:null,title:null,to:null,transform:null,transformBehavior:null,type:null,"typeof":null,u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,
"unicode-bidi":null,"unicode-range":null,"units-per-em":null,"v-alphabetic":null,"v-hanging":null,"v-ideographic":null,"v-mathematical":null,values:null,version:null,"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,"word-spacing":null,"writing-mode":null,x:null,"x-height":null,x1:null,x2:null,xChannelSelector:null,"xlink:actuate":"http://www.w3.org/1999/xlink","xlink:arcrole":"http://www.w3.org/1999/xlink","xlink:href":"http://www.w3.org/1999/xlink",
"xlink:role":"http://www.w3.org/1999/xlink","xlink:show":"http://www.w3.org/1999/xlink","xlink:title":"http://www.w3.org/1999/xlink","xlink:type":"http://www.w3.org/1999/xlink","xml:base":"http://www.w3.org/XML/1998/namespace","xml:id":"http://www.w3.org/XML/1998/namespace","xml:lang":"http://www.w3.org/XML/1998/namespace","xml:space":"http://www.w3.org/XML/1998/namespace",y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null};var h3={},kX=cH,VK=dH,fH,WK=g3,jX=XS,i3=h3=function(b,c){if(!b)return sC(document.createTextNode(""));
if("string"===typeof b){if(!("DOMParser"in window))throw Error("DOMParser is not available, so parsing string to DOM node is not possible.");fH=fH||new DOMParser;b=fH.parseFromString(b,"text/html");b=b.body.firstChild?b.getElementsByTagName("body")[0].firstChild:b.head.firstChild&&("TITLE"!==b.head.firstChild.tagName||b.title)?b.head.firstChild:b.firstChild&&"HTML"!==b.firstChild.tagName?b.firstChild:document.createTextNode("")}if("object"!==typeof b||!b||!b.nodeType)throw Error("invalid dom node",
b);return sC(b,c)},j3="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,gH={};!function(b,c){gH?gH=c():(this||j3)[b]=c()}("bowser",function(){function b(f){function k(Ua){return(Ua=f.match(Ua))&&1<Ua.length&&Ua[1]||""}function n(Ua){return(Ua=f.match(Ua))&&1<Ua.length&&Ua[2]||""}var p=k(/(ipod|iphone|ipad)/i).toLowerCase(),q=!/like android/i.test(f)&&/android/i.test(f),r=/nexus\s*[0-6]\s*/i.test(f),u=!r&&/nexus\s*[0-9]+/i.test(f),x=/CrOS/.test(f),y=/silk/i.test(f),D=
/sailfish/i.test(f),H=/tizen/i.test(f),I=/(web|hpw)os/i.test(f),N=/windows phone/i.test(f),J=!N&&/windows/i.test(f),sa=!p&&!y&&/macintosh/i.test(f),ja=!q&&!D&&!H&&!I&&/linux/i.test(f),Ha=k(/edge\/(\d+(\.\d+)?)/i),Qa=k(/version\/(\d+(\.\d+)?)/i),ec=/tablet/i.test(f),mc=!ec&&/[^-]mobi/i.test(f),hc=/xbox/i.test(f);/opera|opr|opios/i.test(f)?x={name:"Opera",opera:!0,version:Qa||k(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(f)?x={name:"Opera Coast",coast:!0,version:Qa||k(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:
/yabrowser/i.test(f)?x={name:"Yandex Browser",yandexbrowser:!0,version:Qa||k(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(f)?x={name:"UC Browser",ucbrowser:!0,version:k(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(f)?x={name:"Maxthon",maxthon:!0,version:k(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(f)?x={name:"Epiphany",epiphany:!0,version:k(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(f)?x={name:"Puffin",puffin:!0,version:k(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:
/sleipnir/i.test(f)?x={name:"Sleipnir",sleipnir:!0,version:k(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(f)?x={name:"K-Meleon",kMeleon:!0,version:k(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:N?(x={name:"Windows Phone",windowsphone:!0},Ha?(x.msedge=!0,x.version=Ha):(x.msie=!0,x.version=k(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(f)?x={name:"Internet Explorer",msie:!0,version:k(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:x?x={name:"Chrome",chromeos:!0,chromeBook:!0,chrome:!0,version:k(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:
/chrome.+? edge/i.test(f)?x={name:"Microsoft Edge",msedge:!0,version:Ha}:/vivaldi/i.test(f)?x={name:"Vivaldi",vivaldi:!0,version:k(/vivaldi\/(\d+(\.\d+)?)/i)||Qa}:D?x={name:"Sailfish",sailfish:!0,version:k(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(f)?x={name:"SeaMonkey",seamonkey:!0,version:k(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(f)?(x={name:"Firefox",firefox:!0,version:k(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(f)&&
(x.firefoxos=!0)):y?x={name:"Amazon Silk",silk:!0,version:k(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(f)?x={name:"PhantomJS",phantom:!0,version:k(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(f)?x={name:"SlimerJS",slimer:!0,version:k(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(f)||/rim\stablet/i.test(f)?x={name:"BlackBerry",blackberry:!0,version:Qa||k(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:I?(x={name:"WebOS",webos:!0,version:Qa||k(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(f)&&
(x.touchpad=!0)):/bada/i.test(f)?x={name:"Bada",bada:!0,version:k(/dolfin\/(\d+(\.\d+)?)/i)}:H?x={name:"Tizen",tizen:!0,version:k(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||Qa}:/qupzilla/i.test(f)?x={name:"QupZilla",qupzilla:!0,version:k(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||Qa}:/chromium/i.test(f)?x={name:"Chromium",chromium:!0,version:k(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||Qa}:/chrome|crios|crmo/i.test(f)?x={name:"Chrome",chrome:!0,version:k(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:q?x={name:"Android",
version:Qa}:/safari|applewebkit/i.test(f)?(x={name:"Safari",safari:!0},Qa&&(x.version=Qa)):p?(x={name:"iphone"==p?"iPhone":"ipad"==p?"iPad":"iPod"},Qa&&(x.version=Qa)):x=/googlebot/i.test(f)?{name:"Googlebot",googlebot:!0,version:k(/googlebot\/(\d+(\.\d+))/i)||Qa}:{name:k(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)};!x.msedge&&/(apple)?webkit/i.test(f)?(/(apple)?webkit\/537\.36/i.test(f)?(x.name=x.name||"Blink",x.blink=!0):(x.name=x.name||"Webkit",x.webkit=!0),!x.version&&Qa&&(x.version=Qa)):!x.opera&&
/gecko\//i.test(f)&&(x.name=x.name||"Gecko",x.gecko=!0,x.version=x.version||k(/gecko\/(\d+(\.\d+)?)/i));x.msedge||!q&&!x.silk?p?(x[p]=!0,x.ios=!0):sa?x.mac=!0:hc?x.xbox=!0:J?x.windows=!0:ja&&(x.linux=!0):x.android=!0;J="";x.windowsphone?J=k(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):p?(J=k(/os (\d+([_\s]\d+)*) like mac os x/i),J=J.replace(/[_\s]/g,".")):q?J=k(/android[ \/-](\d+(\.\d+)*)/i):x.webos?J=k(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):x.blackberry?J=k(/rim\stablet\sos\s(\d+(\.\d+)*)/i):x.bada?J=k(/bada\/(\d+(\.\d+)*)/i):
x.tizen&&(J=k(/tizen[\/\s](\d+(\.\d+)*)/i));J&&(x.osversion=J);J=J.split(".")[0];if(ec||u||"ipad"==p||q&&(3==J||4<=J&&!mc)||x.silk)x.tablet=!0;else if(mc||"iphone"==p||"ipod"==p||q||r||x.blackberry||x.webos||x.bada)x.mobile=!0;x.msedge||x.msie&&10<=x.version||x.yandexbrowser&&15<=x.version||x.vivaldi&&1<=x.version||x.chrome&&20<=x.version||x.firefox&&20<=x.version||x.safari&&6<=x.version||x.opera&&10<=x.version||x.ios&&x.osversion&&6<=x.osversion.split(".")[0]||x.blackberry&&10.1<=x.version||x.chromium&&
20<=x.version?x.a=!0:x.msie&&10>x.version||x.chrome&&20>x.version||x.firefox&&20>x.version||x.safari&&6>x.version||x.opera&&10>x.version||x.ios&&x.osversion&&6>x.osversion.split(".")[0]||x.chromium&&20>x.version?x.c=!0:x.x=!0;return x}function c(f,k){var n=[],p;if(Array.prototype.map)return Array.prototype.map.call(f,k);for(p=0;p<f.length;p++)n=k(f[p]);return n}function g(f){var k=Math.max(f[0].split(".").length,f[1].split(".").length);for(f=c(f,function(n){var p=k-n.split(".").length;n+=Array(p+
1).join(".0");return c(n.split("."),function(q){return Array(20-q.length).join("0")+q}).reverse()});0<=--k;){if(f[0][k]>f[1][k])return 1;if(f[0][k]===f[1][k]){if(0===k)return 0}else return-1}}function a(f,k,n){var p=d;"string"===typeof k&&(n=k,k=void 0);void 0===k&&(k=!1);n&&(p=b(n));n=""+p.version;for(var q in f)if(f.hasOwnProperty(q)&&p[q])return 0>g([n,f[q]]);return k}var d=b("undefined"!==typeof navigator?navigator.userAgent:"");d.test=function(f){for(var k=0;k<f.length;++k){var n=f[k];if("string"===
typeof n&&n in d)return!0}return!1};d.isUnsupportedBrowser=a;d.compareVersions=g;d.check=function(f,k,n){return!a(f,k,n)};d._detect=b;return d});var pt=gH,Ij=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/property-dom-mapping.js");Ij.styleProps=az;Ij.canBePromotedToCompositionLayer=tC;Ij.addTransform=XK;Ij.addTransformOrigin=function(b,c){if(b=b.origin)c.transformOrigin="".concat(b.x,"px ").concat(b.y,"px")};Ij.addDisplay=function(b,c){b=b.visible;null!=b&&(c.display=b?"":"none")};
Ij.addBorderRadius=function(b,c){var g=b.borderRadiusTopRight,a=b.borderRadiusBottomRight,d=b.borderRadiusBottomLeft;c.borderRadius="".concat(b.borderRadiusTopLeft,"px ").concat(g,"px ").concat(a,"px ").concat(d,"px")};Ij.addBorder=function(b,c){var g=b.borderWidthLeft,a=b.borderColorLeft,d=b.borderStyleLeft,f=b.borderWidthRight,k=b.borderColorRight,n=b.borderStyleRight,p=b.borderColor,q=b.borderWidthBottom,r=b.borderColorBottom,u=b.borderStyleBottom,x=b.borderWidthTop,y=b.borderColorTop;b=b.borderStyleTop;
var D=function(H){return Ij.bowser.safari?Ij.string.camelize(H):H};c[D("border-left-style")]="".concat(d);c[D("border-right-style")]="".concat(n);c[D("border-bottom-style")]="".concat(u);c[D("border-top-style")]="".concat(b);c[D("border-left-width")]="".concat(g,"px");c[D("border-right-width")]="".concat(f,"px");c[D("border-bottom-width")]="".concat(q,"px");c[D("border-top-width")]="".concat(x,"px");c[D("border-top-color")]=y?y.toString():"transparent";c[D("border-right-color")]=k?k.toString():"transparent";
c[D("border-bottom-color")]=r?r.toString():"transparent";c[D("border-left-color")]=a?a.toString():"transparent";p&&p.isGradient&&(c["border-image"]=p.toString())};Ij.addFill=function(b,c){(b=b.fill)?b.isGradient?c.backgroundImage=b.toString():c.background=b.toString():c.background=Ij.Color.transparent.toString()};Ij.addExtentStyle=function(b,c){b=b.extent;c.width=b.x+"px";c.height=b.y+"px"};Ij.shadowCss=function(b){return b.dropShadow?b.dropShadow.toFilterCss():""};Ij.addShadowStyle=function(b,c){b.isSvgMorph||
b.isImage?c.filter=Ij.shadowCss(b):(b=b.dropShadow)&&b.fast||b&&b.inset?c.boxShadow=b?b.toCss():"none":c.filter=b?b.toFilterCss():""};Ij.addSvgAttributes=uC;Ij.getSvgVertices=pw;Ij.addPathAttributes=bz;Ij.addSvgBorderStyle=function(b,c){var g=b.borderStyle.valueOf();"dashed"===g?(b=b.borderWidth.valueOf(),c["stroke-dasharray"]=1.61*b+" "+b):"dotted"===g&&(c["stroke-dasharray"]="1 "+2*b.borderWidth.valueOf(),c["stroke-linecap"]="round",c["stroke-linejoin"]="round");return c};Ij.Color=Bn;Ij.string=
Xj;Ij.Path=qj;Ij.bowser=pt;Ij.styleProps=az;Ij.canBePromotedToCompositionLayer=tC;Ij.addTransform=XK;Ij.addSvgAttributes=uC;Ij.getSvgVertices=pw;Ij.addPathAttributes=bz;var qh=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js");qh.defaultStyle=qw;qh.MorphAfterRenderHook=function(b,c){this.morph=b;this.renderer=c};qh.Animation=function(b){this.morph=b};qh.SvgAnimation=YK;qh.defaultAttributes=rw;qh.svgAttributes=vC;qh.pathAttributes=wC;qh.renderGradient=xC;qh.initDOMState=
function(b,c){b.rootNode.appendChild(b.domNode);b.ensureDefaultCSS().then(function(){return qh.promise.delay(500)}).then(function(){return c.env.fontMetric&&c.env.fontMetric.reset()}).then(function(){return c.withAllSubmorphsDo(function(g){if(g.isText||g.isLabel){var a=(g.metadata||{}).serializationInfo;a&&a.recoveredTextBounds||g.forceRerender()}})})["catch"](function(g){return console.error(g)})};qh.renderMorph=yC;qh.renderSubTree=zC;qh.renderRootMorph=AC;qh.vdom=Mx;qh.parser=i3;qh.num=Gm;qh.Path=
qj;qh.obj=bj;qh.arr=aj;qh.promise=yj;qh.Color=Bn;qh.Point=kt;qh.config=Jm;qh.styleProps=az;qh.addSvgAttributes=uC;qh.addPathAttributes=bz;qh.bowser=pt;var UA=qh.vdom;qh.h=UA.h;qh.diff=UA.diff;qh.patch=UA.patch;qh.createNode=UA.create;qh.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n.hiddenScrollbar {\n  scrollbar-width: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
qh.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n.hiddenScrollbar {\n  scrollbar-width: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
var Pr=bd("S",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js"),g=c.hasOwnProperty("ShadowObject")&&"function"===typeof c.ShadowObject?c.ShadowObject:c.ShadowObject=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){qh.obj.isBoolean(a)&&(a=qh.config.defaultShadow);var d=
a;a=d.rotation;var f=d.distance,k=d.blur,n=d.color,p=d.morph,q=d.inset,r=d.spread;d=d.fast;this.rotation=qh.obj.isNumber(a)?a:45;this.distance=qh.obj.isNumber(f)?f:2;this.blur=qh.obj.isNumber(k)?k:6;this.inset=q||!1;this.spread=r||0;this.color=n||qh.Color.gray.darker();this.morph=p;this.fast="boolean"===typeof d?d:!0}},{key:"__dont_serialize__",get:function(){return["morph"]}},{key:"distance",get:function(){return this._distance}},{key:"blur",get:function(){return this._blur}},{key:"rotation",get:function(){return this._rotation}},
{key:"color",get:function(){return this._color}},{key:"inset",get:function(){return this._inset}},{key:"inset",set:function(a){this._inset=a;this.morph&&(this.morph.dropShadow=this)}},{key:"distance",set:function(a){this._distance=a;this.morph&&(this.morph.dropShadow=this)}},{key:"blur",set:function(a){this._blur=a;this.morph&&(this.morph.dropShadow=this)}},{key:"rotation",set:function(a){this._rotation=a;this.morph&&(this.morph.dropShadow=this)}},{key:"color",set:function(a){this._color=a;this.morph&&
(this.morph.dropShadow=this)}},{key:"isShadowObject",get:function(){return!0}},{key:"__serialize__",value:function(){var a=this.toJson(),d=a.distance,f=a.rotation,k=a.color,n=a.inset,p=a.blur,q=a.spread;a=a.fast;k&&(k=k.toJSExpr());return{__expr__:"new ShadowObject({".concat(qh.arr.compact(Object.entries({distance:d,rotation:f,color:k,inset:n,blur:p,spread:q,fast:a}).map(function(r){var u=Wb(r,2);r=u[0];u=u[1];return void 0===u?null:"".concat(r,":").concat(u)})).join(","),"})"),bindings:{"lively.graphics/color.js":["Color"],
"lively.morphic":["ShadowObject"]}}}},{key:"with",value:function(a){return new qh.ShadowObject(Object.assign({distance:this.distance,rotation:this.rotation,color:this.color,inset:this.inset,blur:this.blur,spread:this.spread,fast:this.fast},a))}},{key:"toCss",value:function(){var a=this.color,d=this.inset,f=this.blur,k=this.spread,n=qh.Point.polar(this.distance,qh.num.toRadians(this.rotation)),p=n.x;n=n.y;return"".concat(d?"inset":""," ").concat(a.toString()," ").concat(p.toFixed(2),"px ").concat(n.toFixed(2),
"px ").concat(f,"px ").concat(k,"px")}},{key:"toJson",value:function(){var a={};45!==this.rotation&&(a.rotation=this.rotation);2!==this.distance&&(a.distance=this.distance);6!==this.blur&&(a.blur=this.blur);this.color.equals(qh.Color.gray.darker())||(a.color=this.color);!0===this.inset&&(a.inset=this.inset);0!==this.spread&&(a.spread=this.spread);this.fast||(a.fast=this.fast);return a}},{key:"equals",value:function(a){return!!a&&a.isShadowObject&&qh.obj.equals(this.toJson(),a.toJson())}},{key:"toFilterCss",
value:function(){var a=this.blur,d=this.color,f=qh.Point.polar(this.distance,qh.num.toRadians(this.rotation)),k=f.x;f=f.y;a=qh.bowser.chrome?a/3:a/2;return"drop-shadow(".concat(k.toFixed(2),"px ").concat(f.toFixed(2),"px ").concat(a.toFixed(2),"px ").concat(d.toString(),")")}},{key:"interpolate",value:function(a,d){return new qh.ShadowObject({distance:qh.num.interpolate(a,this.distance,d.distance),rotation:qh.num.interpolate(a,this.rotation,d.rotation),color:this.color.interpolate(a,d.color),blur:qh.num.interpolate(a,
this.blur,d.blur),spread:qh.num.interpolate(a,this.spread,d.spread),inset:d.inset,fast:d.fast})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ShadowObject"}}],c,{pathInPackage:function(){return"./rendering/morphic-default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3443,end:7949})}(void 0));qh.ShadowObject=
Pr;qh.ShadowObject=Pr;qh.defaultStyle=qw;qh.MorphAfterRenderHook.prototype.hook=function(b,c,g){var a=this,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,f=!!b.parentNode;f&&(this.morph._submorphOrderChanged&&this.morph.submorphs.length?(this.morph._submorphOrderChanged=!1,this.updateScrollOfSubmorphs(this.morph,this.renderer)):this.morph.isClip()&&this.updateScroll(this.morph,b),qh.Path("morph.owner.layout.renderViaCSS").get(this)&&this.morph.owner.layout.ensureBoundsMonitor(b,this.morph),
qh.Path("morph.layout.renderViaCSS").get(this)&&this.morph.layout.ensureBoundsMonitor(b,this.morph));qh.Path("morph.owner.layout.renderViaCSS").get(this)&&this.morph.owner.layout.ensureBoundsMonitor(b,this.morph);qh.Path("morph.layout.renderViaCSS").get(this)&&this.morph.layout.ensureBoundsMonitor(b,this.morph);f||3<d?(this.morph._rendering=!1,this.morph.onAfterRender(b)):(d++,setTimeout(function(){return a.hook(b,c,g,d)},20*d))};qh.MorphAfterRenderHook.prototype.updateScroll=function(b,c,g){var a=
this,d=b.env.eventDispatcher.eventState.scroll.interactiveScrollInProgress;if(c&&d)return d.then(function(){return a.updateScroll(b,c,!0)});if(!b.isWorld&&c){d=b.scroll;var f=d.x,k=d.y;if(!b._animationQueue.animations.find(function(p){return p.animatedProps.scroll})){var n=b.isText&&b.viewState.fastScroll?c.querySelector(".scrollLayer"):c;!b._skipScrollUpdate&&n&&(n.scrollTop!==k&&(n.scrollTop=k),n.scrollLeft!==f&&(n.scrollLeft=f),!g&&requestAnimationFrame(function(){n.scrollTop!==k&&(n.scrollTop=
k);n.scrollLeft!==f&&(n.scrollLeft=f)},b.id))}}};qh.MorphAfterRenderHook.prototype.updateScrollOfSubmorphs=function(b,c){var g=this;b.submorphs.forEach(function(a){a.isClip()&&g.updateScroll(a,c.getNodeForMorph(a));g.updateScrollOfSubmorphs(a,c)})};qh.Animation.prototype.hook=function(b){this.morph._animationQueue.startAnimationsFor(b)};qh.SvgAnimation=YK;qh.SvgAnimation.prototype.hook=function(b){this.morph._animationQueue.startSvgAnimationsFor(b,this.type)};qh.defaultAttributes=rw;qh.svgAttributes=
vC;qh.pathAttributes=wC;qh.renderGradient=xC;qh.renderMorph=yC;qh.renderSubTree=zC;qh.renderRootMorph=AC;var we="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,hH={};!function(b,c){c(hH)}(hH,function(b){function c($a){return 10===$a||13===$a||8232===$a||8233===$a||32===$a||9===$a||11===$a||12===$a||160===$a||5760<=$a&&0<=Ck.indexOf($a)}function g($a){return 48<=$a&&57>=$a}function a($a){(this||we).index=0;(this||we).path=$a;(this||we).max=$a.length;(this||we).result=
[];(this||we).param=0;(this||we).err="";(this||we).segmentStart=0;(this||we).data=[]}function d($a){for(;$a.index<$a.max&&c($a.path.charCodeAt($a.index));)$a.index++}function f($a){var bc,Qb=$a.index,oc=Qb,Wc=$a.max,Wd=!1,wc=!1,Nd=!1,Bd=!1;if(oc>=Wc)return void($a.err="SvgPath: missed param (at pos "+oc+")");if(bc=$a.path.charCodeAt(oc),43!==bc&&45!==bc||(oc++,bc=oc<Wc?$a.path.charCodeAt(oc):0),!g(bc)&&46!==bc)return void($a.err="SvgPath: param should start with 0..9 or `.` (at pos "+oc+")");if(46!==
bc){if(Wd=48===bc,oc++,bc=oc<Wc?$a.path.charCodeAt(oc):0,Wd&&oc<Wc&&bc&&g(bc))return void($a.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+Qb+")");for(;oc<Wc&&g($a.path.charCodeAt(oc));)oc++,wc=!0;bc=oc<Wc?$a.path.charCodeAt(oc):0}if(46===bc){Bd=!0;for(oc++;g($a.path.charCodeAt(oc));)oc++,Nd=!0;bc=oc<Wc?$a.path.charCodeAt(oc):0}if(101===bc||69===bc){if(Bd&&!wc&&!Nd||(oc++,bc=oc<Wc?$a.path.charCodeAt(oc):0,43!==bc&&45!==bc||oc++,!(oc<Wc&&g($a.path.charCodeAt(oc)))))return void($a.err=
"SvgPath: invalid float exponent (at pos "+oc+")");for(;oc<Wc&&g($a.path.charCodeAt(oc));)oc++}$a.index=oc;$a.param=parseFloat($a.path.slice(Qb,oc))+0}function k(){if(!((this||we)instanceof k))return new k;(this||we).queue=[];(this||we).cache=null}function n($a,bc,Qb,oc){var Wc=($a*Qb+bc*oc)/(Math.sqrt($a*$a+bc*bc)*Math.sqrt($a*$a+bc*bc));return 1<Wc&&(Wc=1),-1>Wc&&(Wc=-1),(0>$a*oc-bc*Qb?-1:1)*Math.acos(Wc)}function p($a,bc,Qb,oc,Wc,Wd,wc,Nd,Bd,Ze){var Gd=Ze*($a-Qb)/2+Bd*(bc-oc)/2,Sf=-Bd*($a-Qb)/
2+Ze*(bc-oc)/2,Ag=wc*wc,Qh=Nd*Nd,Mh=Gd*Gd,Yg=Sf*Sf,Nh=Ag*Qh-Ag*Yg-Qh*Mh;0>Nh&&(Nh=0);Nh=Math.sqrt(Nh/(Ag*Yg+Qh*Mh))*(Wc===Wd?-1:1);Wc=Nh*wc/Nd*Sf;Nh=Nh*-Nd/wc*Gd;$a=Ze*Wc-Bd*Nh+($a+Qb)/2;bc=Bd*Wc+Ze*Nh+(bc+oc)/2;oc=(Gd-Wc)/wc;Bd=(Sf-Nh)/Nd;wc=(-Gd-Wc)/wc;Sf=(-Sf-Nh)/Nd;Nd=n(1,0,oc,Bd);Sf=n(oc,Bd,wc,Sf);return 0===Wd&&0<Sf&&(Sf-=$o),1===Wd&&0>Sf&&(Sf+=$o),[$a,bc,Nd,Sf]}function q($a,bc){var Qb=4/3*Math.tan(bc/4),oc=Math.cos($a),Wc=Math.sin($a),Wd=Math.cos($a+bc);$a=Math.sin($a+bc);return[oc,Wc,oc-
Wc*Qb,Wc+oc*Qb,Wd+$a*Qb,$a-Wd*Qb,Wd,$a]}function r($a,bc,Qb){if(!((this||we)instanceof r))return new r($a,bc,Qb);(this||we).rx=$a;(this||we).ry=bc;(this||we).ax=Qb}function u($a){if(!((this||we)instanceof u))return new u($a);$a=new a($a);var bc=$a.max;for(d($a);$a.index<bc&&!$a.err.length;)a:{var Qb,oc=void 0,Wc=$a,Wd=Wc.max;Wc.segmentStart=Wc.index;var wc=Wc.path.charCodeAt(Wc.index);b:{switch(32|wc){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:wc=
!0;break b}wc=!1}if(wc){if(oc=Mj[Wc.path[Wc.index].toLowerCase()],Wc.index++,d(Wc),Wc.data=[],oc)for(wc=!1;;){for(Qb=oc;0<Qb;Qb--){if(f(Wc),Wc.err.length)break a;Wc.data.push(Wc.param);d(Wc);wc=!1;Wc.index<Wd&&44===Wc.path.charCodeAt(Wc.index)&&(Wc.index++,d(Wc),wc=!0)}if(!wc){if(Wc.index>=Wc.max)break;Qb=Wc.path.charCodeAt(Wc.index);if(!(48<=Qb&&57>=Qb||43===Qb||45===Qb||46===Qb))break}}Wd=Wc;Wc=Wd.path[Wd.segmentStart];oc=Wc.toLowerCase();wc=Wd.data;if("m"===oc&&2<wc.length&&(Wd.result.push([Wc,
wc[0],wc[1]]),wc=wc.slice(2),oc="l",Wc="m"===Wc?"l":"L"),"r"===oc)Wd.result.push([Wc].concat(wc));else for(;wc.length>=Mj[oc]&&(Wd.result.push([Wc].concat(wc.splice(0,Mj[oc]))),Mj[oc]););}else Wc.err="SvgPath: bad command "+Wc.path[Wc.index]+" (at pos "+Wc.index+")"}$a=($a.err.length?$a.result=[]:$a.result.length&&(0>"mM".indexOf($a.result[0][0])?($a.err="SvgPath: string should start with `M` or `m`",$a.result=[]):$a.result[0][0]="M"),{err:$a.err,segments:$a.result});(this||we).segments=$a.segments;
(this||we).err=$a.err;(this||we).__stack=[]}function x($a,bc,Qb,oc,Wc,Wd,wc,Nd){(this||we).a={x:$a,y:bc};(this||we).b={x:Qb,y:oc};(this||we).c={x:Wc,y:Wd};(this||we).d={x:wc,y:Nd};null!==wc&&void 0!==wc&&null!==Nd&&void 0!==Nd?((this||we).getArcLength=ja,(this||we).getPoint=N,(this||we).getDerivative=D):((this||we).getArcLength=J,(this||we).getPoint=I,(this||we).getDerivative=y);this.init()}function y($a,bc,Qb){return{x:2*(1-Qb)*($a[1]-$a[0])+2*Qb*($a[2]-$a[1]),y:2*(1-Qb)*(bc[1]-bc[0])+2*Qb*(bc[2]-
bc[1])}}function D($a,bc,Qb){return I([3*($a[1]-$a[0]),3*($a[2]-$a[1]),3*($a[3]-$a[2])],[3*(bc[1]-bc[0]),3*(bc[2]-bc[1]),3*(bc[3]-bc[2])],Qb)}function H($a,bc,Qb,oc,Wc){for(var Wd=1,wc=$a/bc,Nd=($a-Qb(oc,Wc,wc))/bc;.001<Wd;){var Bd=Qb(oc,Wc,wc+Nd),Ze=Qb(oc,Wc,wc-Nd);Bd=Math.abs($a-Bd)/bc;Ze=Math.abs($a-Ze)/bc;Bd<Wd?(Wd=Bd,wc+=Nd):Ze<Wd?(Wd=Ze,wc-=Nd):Nd/=2}return wc}function I($a,bc,Qb){return{x:(1-Qb)*(1-Qb)*$a[0]+2*(1-Qb)*Qb*$a[1]+Qb*Qb*$a[2],y:(1-Qb)*(1-Qb)*bc[0]+2*(1-Qb)*Qb*bc[1]+Qb*Qb*bc[2]}}
function N($a,bc,Qb){return{x:(1-Qb)*(1-Qb)*(1-Qb)*$a[0]+3*(1-Qb)*(1-Qb)*Qb*$a[1]+3*(1-Qb)*Qb*Qb*$a[2]+Qb*Qb*Qb*$a[3],y:(1-Qb)*(1-Qb)*(1-Qb)*bc[0]+3*(1-Qb)*(1-Qb)*Qb*bc[1]+3*(1-Qb)*Qb*Qb*bc[2]+Qb*Qb*Qb*bc[3]}}function J($a,bc,Qb){void 0===Qb&&(Qb=1);var oc=$a[0]-2*$a[1]+$a[2],Wc=bc[0]-2*bc[1]+bc[2],Wd=2*$a[1]-2*$a[0],wc=2*bc[1]-2*bc[0],Nd=4*(oc*oc+Wc*Wc);if(0===Nd)return Qb*Math.sqrt(Math.pow($a[2]-$a[0],2)+Math.pow(bc[2]-bc[0],2));$a=4*(oc*Wd+Wc*wc)/(2*Nd);Qb+=$a;Wd=(Wd*Wd+wc*wc)/Nd-$a*$a;return Math.sqrt(Nd)/
2*(Qb*Math.sqrt(Qb*Qb+Wd)-$a*Math.sqrt($a*$a+Wd)+Wd*Math.log(Math.abs((Qb+Math.sqrt(Qb*Qb+Wd))/($a+Math.sqrt($a*$a+Wd)))))}function sa($a,bc,Qb){var oc,Wc=Qb.length-1;if(0===Wc)return 0;if(0===$a){for(oc=$a=0;oc<=Wc;oc++)$a+=Em[Wc][oc]*Math.pow(1-bc,Wc-oc)*Math.pow(bc,oc)*Qb[oc];return $a}var Wd=Array(Wc);for(oc=0;oc<Wc;oc++)Wd[oc]=Wc*(Qb[oc+1]-Qb[oc]);return sa($a-1,bc,Wd)}function ja($a,bc,Qb){var oc,Wc;void 0===Qb&&(Qb=1);Qb/=2;for(Wc=oc=0;20>Wc;Wc++){var Wd=Qb*wh[20][Wc]+Qb;var wc=Pk[20][Wc],
Nd=bc,Bd=Wd;Wd=sa(1,Bd,$a);Nd=sa(1,Bd,Nd);oc+=wc*Math.sqrt(Wd*Wd+Nd*Nd)}return Qb*oc}function Ha($a,bc,Qb,oc){var Wc=$a*Qb+bc*oc;return 1<Wc&&(Wc=1),-1>Wc&&(Wc=-1),(0>$a*oc-bc*Qb?-1:1)*Math.acos(Wc)}function Qa($a,bc,Qb,oc,Wc,Wd,wc,Nd,Bd,Ze){var Gd=Ze*($a-Qb)/2+Bd*(bc-oc)/2,Sf=-Bd*($a-Qb)/2+Ze*(bc-oc)/2,Ag=wc*wc,Qh=Nd*Nd,Mh=Gd*Gd,Yg=Sf*Sf,Nh=Ag*Qh-Ag*Yg-Qh*Mh;0>Nh&&(Nh=0);Nh=Math.sqrt(Nh/(Ag*Yg+Qh*Mh))*(Wc===Wd?-1:1);Wc=Nh*wc/Nd*Sf;Nh=Nh*-Nd/wc*Gd;$a=Ze*Wc-Bd*Nh+($a+Qb)/2;bc=Bd*Wc+Ze*Nh+(bc+oc)/2;
oc=(Gd-Wc)/wc;Bd=(Sf-Nh)/Nd;wc=(-Gd-Wc)/wc;Sf=(-Sf-Nh)/Nd;Nd=Ha(1,0,oc,Bd);Sf=Ha(oc,Bd,wc,Sf);return 0===Wd&&0<Sf&&(Sf-=Fm),1===Wd&&0>Sf&&(Sf+=Fm),[$a,bc,Nd,Sf]}function ec($a,bc){var Qb=4/3*Math.tan(bc/4),oc=Math.cos($a),Wc=Math.sin($a),Wd=Math.cos($a+bc);$a=Math.sin($a+bc);return[oc,Wc,oc-Wc*Qb,Wc+oc*Qb,Wd+$a*Qb,$a-Wd*Qb,Wd,$a]}function mc($a,bc,Qb,oc,Wc,Wd,wc,Nd,Bd){var Ze=0,Gd=[],Sf=[];dv($a,bc,Qb,oc,Wc,Wd,wc,Nd,Bd).forEach(function(Ag){Ag=new cg(Ag[0],Ag[1],Ag[2],Ag[3],Ag[4],Ag[5],Ag[6],Ag[7]);
var Qh=Ag.getTotalLength();Ze+=Qh;Gd.push(Qh);Sf.push(Ag)});(this||we).length=Ze;(this||we).partialLengths=Gd;(this||we).curves=Sf}function hc($a,bc,Qb,oc){(this||we).x0=$a;(this||we).x1=bc;(this||we).y0=Qb;(this||we).y1=oc}function Ua($a,bc){return Math.sqrt(($a[0]-bc[0])*($a[0]-bc[0])+($a[1]-bc[1])*($a[1]-bc[1]))}function xa($a,bc,Qb){return[$a[0]+(bc[0]-$a[0])*Qb,$a[1]+(bc[1]-$a[1])*Qb]}function rc($a,bc,Qb){var oc=$a.map(function(Wc,Wd){return Lb(Wc,bc[Wd])});return function(Wc){var Wd=oc.map(function(wc){return wc(Wc)});
return Qb?La(Wd):Wd}}function Lb($a,bc){return function(Qb){return $a.map(function(oc,Wc){return oc+Qb*(bc[Wc]-oc)})}}function Ac($a){return"number"==typeof $a&&isFinite($a)}function Xb($a){var bc;a:{for(bc=0;bc<$a.length-2;bc++){var Qb=$a[bc],oc=$a[bc+1],Wc=$a[bc+2];if(Qb[0]*(oc[1]-Wc[1])+oc[0]*(Wc[1]-Qb[1])+Wc[0]*(Qb[1]-oc[1])){bc=!0;break a}}bc=!1}if(bc){Wc=-1;var Wd=$a.length,wc=0,Nd=0,Bd=$a[Wd-1];for(bc=0;++Wc<Wd;)Qb=Bd,Bd=$a[Wc],bc+=oc=Qb[0]*Bd[1]-Bd[0]*Qb[1],wc+=(Qb[0]+Bd[0])*oc,Nd+=(Qb[1]+
Bd[1])*oc;$a=(bc*=3,[wc/bc,Nd/bc])}else $a=[($a[0][0]+$a[$a.length-1][0])/2,($a[0][1]+$a[$a.length-1][1])/2];return $a}function qd($a){return $a.toString().split("M").map(function(bc,Qb){return bc=bc.trim(),Qb&&bc?"M"+bc:bc}).filter(function(bc){return bc})}function La($a){return"M"+$a.join("L")+"Z"}function Fd($a,bc){var Qb=$a.length+bc;bc=fj($a)/bc;for(var oc=0,Wc=0,Wd=bc/2;$a.length<Qb;){var wc=$a[oc],Nd=$a[(oc+1)%$a.length],Bd=Ua(wc,Nd);Wd<=Wc+Bd?($a.splice(oc+1,0,Bd?xa(wc,Nd,(Wd-Wc)/Bd):wc.slice(0)),
Wd+=bc):(Wc+=Bd,oc++)}}function na($a,bc){var Qb;if("string"==typeof $a){$a=(new zd($a)).abs();a:{var oc=$a.segments||[];var Wc=[];if(oc.length&&"M"===oc[0][0]){for(var Wd=0;Wd<oc.length;Wd++){var wc=oc[Wd],Nd=wc[0],Bd=wc[1];wc=wc[2];if("M"===Nd&&Wd||"Z"===Nd)break;if("M"===Nd||"L"===Nd)Wc.push([Bd,wc]);else if("H"===Nd)Wc.push([Bd,Wc[Wc.length-1][1]]);else{if("V"!==Nd){oc=!1;break a}Wc.push([Wc[Wc.length-1][0],Bd])}}oc=!!Wc.length&&{ring:Wc}}else oc=!1}if(!oc){Wc=qd($a)[0];$a=[];oc=3;if(!Wc)throw new TypeError(ap);
a:{if("undefined"!=typeof window&&window&&window.document)try{var Ze=window.document.createElementNS("http://www.w3.org/2000/svg","path");var Gd=(Ze.setAttributeNS(null,"d",Wc),Ze);break a}catch(Sf){}Gd=Nq(Wc)}Ze=Gd;Gd=Ze.getTotalLength();bc&&Ac(bc)&&0<bc&&(oc=Math.max(oc,Math.ceil(Gd/bc)));for(Wc=0;Wc<oc;Wc++)Wd=Ze.getPointAtLength(Gd*Wc/oc),$a.push([Wd.x,Wd.y]);oc={ring:$a,skipBisect:!0}}Gd=oc;$a=Gd.ring;oc=Gd.skipBisect}else if(!Array.isArray($a))throw new TypeError(ap);if(Qb=$a.slice(0),!Va(Qb))throw new TypeError(ap);
1<Qb.length&&1E-9>Ua(Qb[0],Qb[Qb.length-1])&&Qb.pop();0<uh(Qb)&&Qb.reverse();if(!oc&&bc&&Ac(bc)&&0<bc)for(void 0===bc&&(bc=1/0),Gd=0;Gd<Qb.length;Gd++)for(Ze=Qb[Gd],$a=Gd===Qb.length-1?Qb[0]:Qb[Gd+1];Ua(Ze,$a)>bc;)$a=xa(Ze,$a,.5),Qb.splice(Gd+1,0,$a);return Qb}function Va($a){return $a.every(function(bc){return Array.isArray(bc)&&2<=bc.length&&Ac(bc[0])&&Ac(bc[1])})}function yd($a,bc,Qb){var oc;return oc=$a.length-bc.length,Fd($a,0>oc?-1*oc:0),Fd(bc,0<oc?oc:0),Ar($a,bc),rc($a,bc,Qb)}function me($a,
bc,Qb){Qb=Qb||2;var oc=bc&&bc.length,Wc=oc?bc[0]*Qb:$a.length,Wd=ta($a,0,Wc,Qb,!0),wc=[];if(!Wd)return wc;var Nd;if(oc){var Bd=Qb,Ze;var Gd=[];oc=0;for(Ze=bc.length;oc<Ze;oc++){var Sf=bc[oc]*Bd;var Ag=oc<Ze-1?bc[oc+1]*Bd:$a.length;Sf=ta($a,Sf,Ag,Bd,!1);Sf===Sf.next&&(Sf.steiner=!0);Gd.push(Oa(Sf))}Gd.sort(ea);for(oc=0;oc<Gd.length;oc++){bc=Gd[oc];Bd=Wd;if(Bd=Kb(bc,Bd))bc=rf(Bd,bc),za(bc,bc.next);Wd=za(Wd,Wd.next)}}if($a.length>80*Qb){var Qh=Nd=$a[0];var Mh=oc=$a[1];for(Bd=Qb;Bd<Wc;Bd+=Qb)Gd=$a[Bd],
bc=$a[Bd+1],Gd<Qh&&(Qh=Gd),bc<Mh&&(Mh=bc),Gd>Nd&&(Nd=Gd),bc>oc&&(oc=bc);Nd=Math.max(Nd-Qh,oc-Mh)}return W(Wd,wc,Qb,Qh,Mh,Nd),wc}function ta($a,bc,Qb,oc,Wc){if(Wc===0<Hi($a,bc,Qb,oc))for(Wc=bc;Wc<Qb;Wc+=oc)var Wd=fh(Wc,$a[Wc],$a[Wc+1],Wd);else for(Wc=Qb-oc;Wc>=bc;Wc-=oc)Wd=fh(Wc,$a[Wc],$a[Wc+1],Wd);return Wd&&Td(Wd,Wd.next)&&(zi(Wd),Wd=Wd.next),Wd}function za($a,bc){if(!$a)return $a;bc||(bc=$a);var Qb=$a;do if($a=!1,Qb.steiner||!Td(Qb,Qb.next)&&0!==fd(Qb.prev,Qb,Qb.next))Qb=Qb.next;else{if(zi(Qb),
(Qb=bc=Qb.prev)===Qb.next)return null;$a=!0}while($a||Qb!==bc);return bc}function W($a,bc,Qb,oc,Wc,Wd,wc){if($a){if(!wc&&Wd){var Nd=$a,Bd=Nd;do null===Bd.z&&(Bd.z=V(Bd.x,Bd.y,oc,Wc,Wd)),Bd.prevZ=Bd.prev,Bd=Bd.nextZ=Bd.next;while(Bd!==Nd);Bd.prevZ.nextZ=null;Bd.prevZ=null;Nd=Bd;var Ze,Gd,Sf,Ag,Qh=1;do{Bd=Nd;var Mh=Nd=null;for(Sf=0;Bd;){Sf++;var Yg=Bd;for(Ze=Ag=0;Ze<Qh&&(Ag++,Yg=Yg.nextZ);Ze++);for(Ze=Qh;0<Ag||0<Ze&&Yg;)0===Ag?(Gd=Yg,Yg=Yg.nextZ,Ze--):0!==Ze&&Yg?Bd.z<=Yg.z?(Gd=Bd,Bd=Bd.nextZ,Ag--):
(Gd=Yg,Yg=Yg.nextZ,Ze--):(Gd=Bd,Bd=Bd.nextZ,Ag--),Mh?Mh.nextZ=Gd:Nd=Gd,Gd.prevZ=Mh,Mh=Gd;Bd=Yg}Mh.nextZ=null;Qh*=2}while(1<Sf)}for(Bd=$a;$a.prev!==$a.next;){Gd=$a.prev;Nd=$a.next;if(Wd)a:{Yg=$a;Ze=oc;var Nh=Wc,Xm=Wd;Mh=Yg.prev;Sf=Yg;Ag=Yg.next;if(0<=fd(Mh,Sf,Ag))Yg=!1;else{var wG=Mh.x>Sf.x?Mh.x>Ag.x?Mh.x:Ag.x:Sf.x>Ag.x?Sf.x:Ag.x,xG=Mh.y>Sf.y?Mh.y>Ag.y?Mh.y:Ag.y:Sf.y>Ag.y?Sf.y:Ag.y;Qh=V(Mh.x<Sf.x?Mh.x<Ag.x?Mh.x:Ag.x:Sf.x<Ag.x?Sf.x:Ag.x,Mh.y<Sf.y?Mh.y<Ag.y?Mh.y:Ag.y:Sf.y<Ag.y?Sf.y:Ag.y,Ze,Nh,Xm);Ze=
V(wG,xG,Ze,Nh,Xm);for(Nh=Yg.nextZ;Nh&&Nh.z<=Ze;){if(Nh!==Yg.prev&&Nh!==Yg.next&&U(Mh.x,Mh.y,Sf.x,Sf.y,Ag.x,Ag.y,Nh.x,Nh.y)&&0<=fd(Nh.prev,Nh,Nh.next)){Yg=!1;break a}Nh=Nh.nextZ}for(Nh=Yg.prevZ;Nh&&Nh.z>=Qh;){if(Nh!==Yg.prev&&Nh!==Yg.next&&U(Mh.x,Mh.y,Sf.x,Sf.y,Ag.x,Ag.y,Nh.x,Nh.y)&&0<=fd(Nh.prev,Nh,Nh.next)){Yg=!1;break a}Nh=Nh.prevZ}Yg=!0}}else a:if(Yg=$a,Mh=Yg.prev,Sf=Yg,Ag=Yg.next,0<=fd(Mh,Sf,Ag))Yg=!1;else{for(Qh=Yg.next.next;Qh!==Yg.prev;){if(U(Mh.x,Mh.y,Sf.x,Sf.y,Ag.x,Ag.y,Qh.x,Qh.y)&&0<=fd(Qh.prev,
Qh,Qh.next)){Yg=!1;break a}Qh=Qh.next}Yg=!0}if(Yg)bc.push(Gd.i/Qb),bc.push($a.i/Qb),bc.push(Nd.i/Qb),zi($a),Bd=$a=Nd.next;else if(($a=Nd)===Bd){if(wc)if(1===wc){wc=bc;Gd=Qb;Nd=$a;do Bd=Nd.prev,Yg=Nd.next.next,!Td(Bd,Yg)&&nf(Bd,Nd,Nd.next,Yg)&&Je(Bd,Yg)&&Je(Yg,Bd)&&(wc.push(Bd.i/Gd),wc.push(Nd.i/Gd),wc.push(Yg.i/Gd),zi(Nd),zi(Nd.next),Nd=$a=Yg),Nd=Nd.next;while(Nd!==$a);$a=Nd;W($a,bc,Qb,oc,Wc,Wd,2)}else{if(2===wc)a:{wc=$a;do{for(Gd=wc.next.next;Gd!==wc.prev;){if(Nd=wc.i!==Gd.i){Nd=wc;Bd=Gd;if(Yg=Nd.next.i!==
Bd.i&&Nd.prev.i!==Bd.i){b:{Yg=Nd;do{if(Yg.i!==Nd.i&&Yg.next.i!==Nd.i&&Yg.i!==Bd.i&&Yg.next.i!==Bd.i&&nf(Yg,Yg.next,Nd,Bd)){Yg=!0;break b}Yg=Yg.next}while(Yg!==Nd);Yg=!1}Yg=!Yg}if(Yg=Yg&&Je(Nd,Bd)&&Je(Bd,Nd)){Yg=Nd;Mh=!1;Sf=(Nd.x+Bd.x)/2;Bd=(Nd.y+Bd.y)/2;do Yg.y>Bd!=Yg.next.y>Bd&&Sf<(Yg.next.x-Yg.x)*(Bd-Yg.y)/(Yg.next.y-Yg.y)+Yg.x&&(Mh=!Mh),Yg=Yg.next;while(Yg!==Nd);Yg=Mh}Nd=Yg}if(Nd){$a=rf(wc,Gd);wc=za(wc,wc.next);$a=za($a,$a.next);W(wc,bc,Qb,oc,Wc,Wd);W($a,bc,Qb,oc,Wc,Wd);break a}Gd=Gd.next}wc=wc.next}while(wc!==
$a)}}else W(za($a),bc,Qb,oc,Wc,Wd,1);break}}}}function ea($a,bc){return $a.x-bc.x}function Kb($a,bc){var Qb=bc,oc=$a.x,Wc=$a.y,Wd=-1/0;do{if(Wc<=Qb.y&&Wc>=Qb.next.y){var wc=Qb.x+(Wc-Qb.y)*(Qb.next.x-Qb.x)/(Qb.next.y-Qb.y);if(wc<=oc&&wc>Wd){if(Wd=wc,wc===oc){if(Wc===Qb.y)return Qb;if(Wc===Qb.next.y)return Qb.next}var Nd=Qb.x<Qb.next.x?Qb:Qb.next}}Qb=Qb.next}while(Qb!==bc);if(!Nd)return null;if(oc===Wd)return Nd.prev;var Bd;bc=Nd;wc=Nd.x;var Ze=Nd.y,Gd=1/0;for(Qb=Nd.next;Qb!==bc;)oc>=Qb.x&&Qb.x>=wc&&
U(Wc<Ze?oc:Wd,Wc,wc,Ze,Wc<Ze?Wd:oc,Wc,Qb.x,Qb.y)&&((Bd=Math.abs(Wc-Qb.y)/(oc-Qb.x))<Gd||Bd===Gd&&Qb.x>Nd.x)&&Je(Qb,$a)&&(Nd=Qb,Gd=Bd),Qb=Qb.next;return Nd}function V($a,bc,Qb,oc,Wc){return $a=32767*($a-Qb)/Wc,bc=32767*(bc-oc)/Wc,$a=16711935&($a|$a<<8),$a=252645135&($a|$a<<4),$a=858993459&($a|$a<<2),$a=1431655765&($a|$a<<1),bc=16711935&(bc|bc<<8),bc=252645135&(bc|bc<<4),bc=858993459&(bc|bc<<2),bc=1431655765&(bc|bc<<1),$a|bc<<1}function Oa($a){var bc=$a,Qb=$a;do bc.x<Qb.x&&(Qb=bc),bc=bc.next;while(bc!==
$a);return Qb}function U($a,bc,Qb,oc,Wc,Wd,wc,Nd){return 0<=(Wc-wc)*(bc-Nd)-($a-wc)*(Wd-Nd)&&0<=($a-wc)*(oc-Nd)-(Qb-wc)*(bc-Nd)&&0<=(Qb-wc)*(Wd-Nd)-(Wc-wc)*(oc-Nd)}function fd($a,bc,Qb){return(bc.y-$a.y)*(Qb.x-bc.x)-(bc.x-$a.x)*(Qb.y-bc.y)}function Td($a,bc){return $a.x===bc.x&&$a.y===bc.y}function nf($a,bc,Qb,oc){return!!(Td($a,bc)&&Td(Qb,oc)||Td($a,oc)&&Td(Qb,bc))||0<fd($a,bc,Qb)!=0<fd($a,bc,oc)&&0<fd(Qb,oc,$a)!=0<fd(Qb,oc,bc)}function Je($a,bc){return 0>fd($a.prev,$a,$a.next)?0<=fd($a,bc,$a.next)&&
0<=fd($a,$a.prev,bc):0>fd($a,bc,$a.prev)||0>fd($a,$a.next,bc)}function rf($a,bc){var Qb=new Sh($a.i,$a.x,$a.y),oc=new Sh(bc.i,bc.x,bc.y),Wc=$a.next,Wd=bc.prev;return $a.next=bc,bc.prev=$a,Qb.next=Wc,Wc.prev=Qb,oc.next=Qb,Qb.prev=oc,Wd.next=oc,oc.prev=Wd,oc}function fh($a,bc,Qb,oc){$a=new Sh($a,bc,Qb);return oc?($a.next=oc.next,$a.prev=oc,oc.next.prev=$a,oc.next=$a):($a.prev=$a,$a.next=$a),$a}function zi($a){$a.next.prev=$a.prev;$a.prev.next=$a.next;$a.prevZ&&($a.prevZ.nextZ=$a.nextZ);$a.nextZ&&($a.nextZ.prevZ=
$a.prevZ)}function Sh($a,bc,Qb){(this||we).i=$a;(this||we).x=bc;(this||we).y=Qb;(this||we).prev=null;(this||we).next=null;(this||we).z=null;(this||we).prevZ=null;(this||we).nextZ=null;(this||we).steiner=!1}function Hi($a,bc,Qb,oc){for(var Wc=0,Wd=Qb-oc;bc<Qb;bc+=oc)Wc+=($a[Wd]-$a[bc])*($a[bc+1]+$a[Wd+1]),Wd=bc;return Wc}function Fj($a,bc){var Qb=bc.id,oc=bc.bbox,Wc=null==bc.properties?{}:bc.properties;$a=vk($a,bc);return null==Qb&&null==oc?{type:"Feature",properties:Wc,geometry:$a}:null==oc?{type:"Feature",
id:Qb,properties:Wc,geometry:$a}:{type:"Feature",id:Qb,bbox:oc,properties:Wc,geometry:$a}}function vk($a,bc){function Qb(Ze){return Nd(Ze)}function oc(Ze){for(var Gd=[],Sf=0,Ag=Ze.length;Sf<Ag;++Sf){var Qh=Ze[Sf],Mh=Gd;Mh.length&&Mh.pop();for(var Yg=Bd[0>Qh?~Qh:Qh],Nh=0,Xm=Yg.length;Nh<Xm;++Nh)Mh.push(Nd(Yg[Nh],Nh));if(0>Qh)for(Qh=Mh,Mh=Qh.length,Yg=Mh-Xm;Yg<--Mh;)Xm=Qh[Yg],Qh[Yg++]=Qh[Mh],Qh[Mh]=Xm}return 2>Gd.length&&Gd.push(Gd[0]),Gd}function Wc(Ze){for(Ze=oc(Ze);4>Ze.length;)Ze.push(Ze[0]);return Ze}
function Wd(Ze){return Ze.map(Wc)}function wc(Ze){var Gd=Ze.type;switch(Gd){case "GeometryCollection":return{type:Gd,geometries:Ze.geometries.map(wc)};case "Point":Ze=Nd(Ze.coordinates);break;case "MultiPoint":Ze=Ze.coordinates.map(Qb);break;case "LineString":Ze=oc(Ze.arcs);break;case "MultiLineString":Ze=Ze.arcs.map(oc);break;case "Polygon":Ze=Wd(Ze.arcs);break;case "MultiPolygon":Ze=Ze.arcs.map(Wd);break;default:return null}return{type:Gd,coordinates:Ze}}var Nd=Ys($a.transform),Bd=$a.arcs;return wc(bc)}
function Hl($a,bc){function Qb(Bd){switch(Bd.type){case "GeometryCollection":Bd.geometries.forEach(Qb);break;case "Polygon":oc(Bd.arcs);break;case "MultiPolygon":Bd.arcs.forEach(oc)}}function oc(Bd){Bd.forEach(function(Ze){Ze.forEach(function(Gd){(Wd[Gd=0>Gd?~Gd:Gd]||(Wd[Gd]=[])).push(Bd)})});wc.push(Bd)}function Wc(Bd){Bd=vk($a,{type:"Polygon",arcs:[Bd]}).coordinates[0];for(var Ze,Gd=-1,Sf=Bd.length,Ag=Bd[Sf-1],Qh=0;++Gd<Sf;)Ze=Ag,Ag=Bd[Gd],Qh+=Ze[0]*Ag[1]-Ze[1]*Ag[0];return Math.abs(Qh)}var Wd=
{},wc=[],Nd=[];return bc.forEach(Qb),wc.forEach(function(Bd){if(!Bd._){var Ze=[],Gd=[Bd];Bd._=1;for(Nd.push(Ze);Bd=Gd.pop();)Ze.push(Bd),Bd.forEach(function(Sf){Sf.forEach(function(Ag){Wd[0>Ag?~Ag:Ag].forEach(function(Qh){Qh._||(Qh._=1,Gd.push(Qh))})})})}}),wc.forEach(function(Bd){delete Bd._}),{type:"MultiPolygon",arcs:Nd.map(function(Bd){var Ze=[];if(Bd.forEach(function(Mh){Mh.forEach(function(Yg){Yg.forEach(function(Nh){2>Wd[0>Nh?~Nh:Nh].length&&Ze.push(Nh)})})}),Ze=Cr($a,Ze),1<(Bd=Ze.length))for(var Gd,
Sf,Ag=1,Qh=Wc(Ze[0]);Ag<Bd;++Ag)(Gd=Wc(Ze[Ag]))>Qh&&(Sf=Ze[0],Ze[0]=Ze[Ag],Ze[Ag]=Sf,Qh=Gd);return Ze})}}function pl($a){return function(bc,Qb){return vA($a(bc),Qb)}}function pk($a,bc){var Qb={},oc={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return $a.forEach(function(Wc){var Wd=[];Wc.forEach(function(wc,Nd){Nd=wc[0]<wc[1]?wc.join(","):wc[1]+","+wc[0];wc=wc.map(function(Bd){return bc[Bd]});Nd in Qb?Wd.push(~Qb[Nd]):(Wd.push(Qb[Nd]=oc.arcs.length),oc.arcs.push(wc))});
oc.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(uh(Wc.map(function(wc){return bc[wc[0]]}))),arcs:[Wd]})}),oc.objects.triangles.geometries.sort(function(Wc,Wd){return Wc.area-Wd.area}),oc}function Sk($a,bc){for(var Qb=$a.objects.triangles.geometries,oc=wA(function(Wc){return Wc.area}).left;Qb.length>bc;)!function(){var Wc=Qb[0],Wd=uG(Qb)[0][0],wc=Qb[Wd],Nd=Hl($a,[Wc,wc]);Nd.area=Wc.area+wc.area;Nd.type="Polygon";Nd.arcs=Nd.arcs[0];Qb.splice(Wd,1);Qb.shift();Qb.splice(oc(Qb,Nd.area),
0,Nd)}();if(bc>Qb.length)throw new RangeError("Can't collapse topology into "+bc+" pieces.");return fv($a,$a.objects.triangles).features.map(function(Wc){return Wc.geometry.coordinates[0].pop(),Wc.geometry.coordinates[0]})}function L($a){$a=ev($a.reduce(function(Wc,Wd){return Wc.concat([Wd[0]],[Wd[1]])},[]));for(var bc=[],Qb=0,oc=$a.length;Qb<oc;Qb+=3)bc.push([[$a[Qb],$a[Qb+1]],[$a[Qb+1],$a[Qb+2]],[$a[Qb+2],$a[Qb]]]);return bc}function Ka($a,bc,Qb){function oc(wc,Nd,Bd){void 0===Nd&&(Nd=[]);void 0===
Bd&&(Bd=0);for(var Ze=0;Ze<wc.length;Ze++){var Gd=wc.splice(Ze,1),Sf=Qb[Gd[0]][Nd.length];Bd+Sf<Wc&&(wc.length?oc(wc.slice(),Nd.concat(Gd),Bd+Sf):(Wc=Bd+Sf,Wd=Nd.concat(Gd)));wc.length&&wc.splice(Ze,0,Gd[0])}}var Wc=1/0,Wd=$a.map(function(wc,Nd){return Nd});return oc(Wd),Wd}function B($a,bc,Qb){void 0===Qb&&(Qb={});var oc=Qb.maxSegmentLength;void 0===oc&&(oc=10);var Wc=Qb.string;void 0===Wc&&(Wc=!0);Qb=Qb.single;void 0===Qb&&(Qb=!1);var Wd=na($a,oc);Wd.length<bc.length+2&&Fd(Wd,bc.length+2-Wd.length);
var wc;Wd=xA(Wd,bc.length);var Nd=bc.map(function(Bd){return na(Bd,oc)});$a="string"==typeof $a&&$a;return Qb&&!bc.every(function(Bd){return"string"==typeof Bd})||(wc=bc.slice(0)),Y(Wd,Nd,{match:!0,string:Wc,single:Qb,t0:$a,t1:wc})}function Y($a,bc,Qb){void 0===Qb&&(Qb={});var oc=Qb.string,Wc=Qb.single,Wd=Qb.t0,wc=Qb.t1,Nd=(Qb=Qb.match)?vG($a,bc):$a.map(function(Gd,Sf){return Sf}),Bd=Nd.map(function(Gd,Sf){return yd($a[Gd],bc[Sf],oc)});if(Qb&&Array.isArray(Wd)&&(Wd=Nd.map(function(Gd){return Wd[Gd]})),
Wc&&oc&&(Array.isArray(Wd)&&(Wd=Wd.join(" ")),Array.isArray(wc)&&(wc=wc.join(" "))),Wc){var Ze=oc?function(Gd){return Bd.map(function(Sf){return Sf(Gd)}).join(" ")}:function(Gd){return Bd.map(function(Sf){return Sf(Gd)})};return oc&&(Wd||wc)?function(Gd){return 1E-4>Gd&&Wd||1E-4>1-Gd&&wc||Ze(Gd)}:Ze}return oc?(Wd=Array.isArray(Wd)?Wd.map(function(Gd){return"string"==typeof Gd&&Gd}):[],wc=Array.isArray(wc)?wc.map(function(Gd){return"string"==typeof Gd&&Gd}):[],Bd.map(function(Gd,Sf){return Wd[Sf]||
wc[Sf]?function(Ag){return 1E-4>Ag&&Wd[Sf]||1E-4>1-Ag&&wc[Sf]||Gd(Ag)}:Gd})):Bd}function nb($a,bc,Qb,oc,Wc){var Wd=pg($a,bc,Qb),wc=$a-Qb+","+bc,Nd="A"+Qb+","+Qb+",0,1,1,";return ue(Wd,oc,"M"+wc+Nd+($a+Qb+","+bc)+Nd+wc+"Z",2*Math.PI*Qb,Wc)}function ld($a,bc,Qb,oc,Wc,Wd){var wc=Kg($a,bc,Qb,oc),Nd=$a+Qb,Bd=bc+oc;return ue(wc,Wc,"M"+$a+","+bc+"L"+Nd+","+bc+"L"+Nd+","+Bd+"L"+$a+","+Bd+"Z",2*Qb+2*oc,Wd)}function ue($a,bc,Qb,oc,Wc){void 0===Wc&&(Wc={});var Wd=Wc.maxSegmentLength;void 0===Wd&&(Wd=10);Wc=
Wc.string;void 0===Wc&&(Wc=!0);var wc,Nd;bc=na(bc,Wd);return Ac(oc)&&bc.length<oc/Wd&&Fd(bc,Math.ceil(oc/Wd-bc.length)),wc=$a(bc),Nd=rc(wc,bc,Wc),Wc?function(Bd){return 1E-4>Bd?Qb:Nd(Bd)}:Nd}function pg($a,bc,Qb){return function(oc){var Wc=Xb(oc),Wd=fj(oc.concat([oc[0]])),wc=Math.atan2(oc[0][1]-Wc[1],oc[0][0]-Wc[0]),Nd=0;return oc.map(function(Bd,Ze){var Gd;return Ze&&(Nd+=Ua(Bd,oc[Ze-1])),Gd=wc+2*Math.PI*(Wd?Nd/Wd:Ze/oc.length),[Math.cos(Gd)*Qb+$a,Math.sin(Gd)*Qb+bc]})}}function Kg($a,bc,Qb,oc){return function(Wc){var Wd=
Xb(Wc),wc=fj(Wc.concat([Wc[0]]));Wd=Math.atan2(Wc[0][1]-Wd[1],Wc[0][0]-Wd[0]);var Nd=0;0>Wd&&(Wd=2*Math.PI+Wd);var Bd=Wd/(2*Math.PI);return Wc.map(function(Ze,Gd){Gd&&(Nd+=Ua(Ze,Wc[Gd-1]));Ze=(Bd+(wc?Nd/wc:Gd/Wc.length))%1;Ze=.125>=Ze?[1,.5+4*Ze]:.375>=Ze?[1.5-4*Ze,1]:.625>=Ze?[0,2.5-4*Ze]:.875>=Ze?[4*Ze-2.5,0]:[1,4*Ze-3.5];return[$a+Ze[0]*Qb,bc+Ze[1]*oc]})}}var uh=function($a){for(var bc,Qb=-1,oc=$a.length,Wc=$a[oc-1],Wd=0;++Qb<oc;)bc=Wc,Wc=$a[Qb],Wd+=bc[1]*Wc[0]-bc[0]*Wc[1];return Wd/2},fj=function($a){var bc=
-1,Qb=$a.length,oc=$a[Qb-1],Wc=oc[0];oc=oc[1];for(var Wd=0;++bc<Qb;){var wc=Wc;var Nd=oc;oc=$a[bc];Wc=oc[0];oc=oc[1];wc-=Wc;Nd-=oc;Wd+=Math.sqrt(wc*wc+Nd*Nd)}return Wd},Mj={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},Ck=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];k.prototype.matrix=function($a){return 1===$a[0]&&0===$a[1]&&0===$a[2]&&1===$a[3]&&0===$a[4]&&0===$a[5]?this||we:((this||we).cache=null,(this||we).queue.push($a),this||we)};k.prototype.translate=
function($a,bc){return 0===$a&&0===bc||((this||we).cache=null,(this||we).queue.push([1,0,0,1,$a,bc])),this||we};k.prototype.scale=function($a,bc){return 1===$a&&1===bc||((this||we).cache=null,(this||we).queue.push([$a,0,0,bc,0,0])),this||we};k.prototype.rotate=function($a,bc,Qb){var oc,Wc,Wd;return 0!==$a&&(this.translate(bc,Qb),oc=$a*Math.PI/180,Wc=Math.cos(oc),Wd=Math.sin(oc),(this||we).queue.push([Wc,Wd,-Wd,Wc,0,0]),(this||we).cache=null,this.translate(-bc,-Qb)),this||we};k.prototype.skewX=function($a){return 0!==
$a&&((this||we).cache=null,(this||we).queue.push([1,0,Math.tan($a*Math.PI/180),1,0,0])),this||we};k.prototype.skewY=function($a){return 0!==$a&&((this||we).cache=null,(this||we).queue.push([1,Math.tan($a*Math.PI/180),0,1,0,0])),this||we};k.prototype.toArray=function(){var $a=this||we;if((this||we).cache)return(this||we).cache;if(!(this||we).queue.length)return(this||we).cache=[1,0,0,1,0,0],(this||we).cache;if((this||we).cache=(this||we).queue[0],1===(this||we).queue.length)return(this||we).cache;
for(var bc=1;bc<(this||we).queue.length;bc++){var Qb=$a.cache,oc=$a.queue[bc];$a.cache=[Qb[0]*oc[0]+Qb[2]*oc[1],Qb[1]*oc[0]+Qb[3]*oc[1],Qb[0]*oc[2]+Qb[2]*oc[3],Qb[1]*oc[2]+Qb[3]*oc[3],Qb[0]*oc[4]+Qb[2]*oc[5]+Qb[4],Qb[1]*oc[4]+Qb[3]*oc[5]+Qb[5]]}return(this||we).cache};k.prototype.calc=function($a,bc,Qb){var oc;return(this||we).queue.length?((this||we).cache||((this||we).cache=this.toArray()),oc=(this||we).cache,[$a*oc[0]+bc*oc[2]+(Qb?0:oc[4]),$a*oc[1]+bc*oc[3]+(Qb?0:oc[5])]):[$a,bc]};var un={matrix:!0,
scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},Io=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,qq=/[\s,]+/,rx=function($a){var bc,Qb,oc=new k;return $a.split(Io).forEach(function(Wc){if(Wc.length){if(void 0!==un[Wc])return void(bc=Wc);switch(Qb=Wc.split(qq).map(function(Wd){return+Wd||0}),bc){case "matrix":return void(6===Qb.length&&oc.matrix(Qb));case "scale":return void(1===Qb.length?oc.scale(Qb[0],Qb[0]):2===Qb.length&&oc.scale(Qb[0],Qb[1]));case "rotate":return void(1===
Qb.length?oc.rotate(Qb[0],0,0):3===Qb.length&&oc.rotate(Qb[0],Qb[1],Qb[2]));case "translate":return void(1===Qb.length?oc.translate(Qb[0],0):2===Qb.length&&oc.translate(Qb[0],Qb[1]));case "skewX":return void(1===Qb.length&&oc.skewX(Qb[0]));case "skewY":return void(1===Qb.length&&oc.skewY(Qb[0]))}}}),oc},$o=2*Math.PI,Dm=function($a,bc,Qb,oc,Wc,Wd,wc,Nd,Bd){var Ze=Math.sin(Bd*$o/360),Gd=Math.cos(Bd*$o/360);Bd=Gd*($a-Qb)/2+Ze*(bc-oc)/2;var Sf=-Ze*($a-Qb)/2+Gd*(bc-oc)/2;if(0===Bd&&0===Sf||0===wc||0===
Nd)return[];wc=Math.abs(wc);Nd=Math.abs(Nd);Bd=Bd*Bd/(wc*wc)+Sf*Sf/(Nd*Nd);1<Bd&&(wc*=Math.sqrt(Bd),Nd*=Math.sqrt(Bd));var Ag=p($a,bc,Qb,oc,Wc,Wd,wc,Nd,Ze,Gd);$a=[];bc=Ag[2];Qb=Ag[3];oc=Math.max(Math.ceil(Math.abs(Qb)/($o/4)),1);Qb/=oc;for(Wc=0;Wc<oc;Wc++)$a.push(q(bc,Qb)),bc+=Qb;return $a.map(function(Qh){for(var Mh=0;Mh<Qh.length;Mh+=2){var Yg=Qh[Mh+0],Nh=Qh[Mh+1];Yg*=wc;Nh*=Nd;var Xm=Ze*Yg+Gd*Nh;Qh[Mh+0]=Gd*Yg-Ze*Nh+Ag[0];Qh[Mh+1]=Xm+Ag[1]}return Qh})},zr=Math.PI/180;r.prototype.transform=function($a){var bc=
Math.cos((this||we).ax*zr),Qb=Math.sin((this||we).ax*zr),oc=[(this||we).rx*($a[0]*bc+$a[2]*Qb),(this||we).rx*($a[1]*bc+$a[3]*Qb),(this||we).ry*(-$a[0]*Qb+$a[2]*bc),(this||we).ry*(-$a[1]*Qb+$a[3]*bc)];$a=oc[0]*oc[0]+oc[2]*oc[2];bc=oc[1]*oc[1]+oc[3]*oc[3];Qb=((oc[0]-oc[3])*(oc[0]-oc[3])+(oc[2]+oc[1])*(oc[2]+oc[1]))*((oc[0]+oc[3])*(oc[0]+oc[3])+(oc[2]-oc[1])*(oc[2]-oc[1]));var Wc=($a+bc)/2;if(Qb<1E-10*Wc)return(this||we).rx=(this||we).ry=Math.sqrt(Wc),(this||we).ax=0,this||we;oc=oc[0]*oc[1]+oc[2]*oc[3];
Qb=Math.sqrt(Qb);var Wd=Wc+Qb/2;Qb=Wc-Qb/2;return(this||we).ax=1E-10>Math.abs(oc)&&1E-10>Math.abs(Wd-bc)?90:180*Math.atan(Math.abs(oc)>Math.abs(Wd-bc)?(Wd-$a)/oc:oc/(Wd-bc))/Math.PI,0<=(this||we).ax?((this||we).rx=Math.sqrt(Wd),(this||we).ry=Math.sqrt(Qb)):((this||we).ax+=90,(this||we).rx=Math.sqrt(Qb),(this||we).ry=Math.sqrt(Wd)),this||we};r.prototype.isDegenerate=function(){return(this||we).rx<1E-10*(this||we).ry||(this||we).ry<1E-10*(this||we).rx};u.prototype.__matrix=function($a){var bc,Qb=this||
we;$a.queue.length&&this.iterate(function(oc,Wc,Wd,wc){switch(oc[0]){case "v":var Nd=$a.calc(0,oc[1],!0);Wd=0===Nd[0]?["v",Nd[1]]:["l",Nd[0],Nd[1]];break;case "V":Nd=$a.calc(Wd,oc[1],!1);Wd=Nd[0]===$a.calc(Wd,wc,!1)[0]?["V",Nd[1]]:["L",Nd[0],Nd[1]];break;case "h":Nd=$a.calc(oc[1],0,!0);Wd=0===Nd[1]?["h",Nd[0]]:["l",Nd[0],Nd[1]];break;case "H":Nd=$a.calc(oc[1],wc,!1);Wd=Nd[1]===$a.calc(Wd,wc,!1)[1]?["H",Nd[0]]:["L",Nd[0],Nd[1]];break;case "a":case "A":Nd=$a.toArray();var Bd=r(oc[1],oc[2],oc[3]).transform(Nd);
if(0>Nd[0]*Nd[3]-Nd[1]*Nd[2]&&(oc[5]=oc[5]?"0":"1"),Nd=$a.calc(oc[6],oc[7],"a"===oc[0]),"A"===oc[0]&&oc[6]===Wd&&oc[7]===wc||"a"===oc[0]&&0===oc[6]&&0===oc[7]){Wd=["a"===oc[0]?"l":"L",Nd[0],Nd[1]];break}Wd=Bd.isDegenerate()?["a"===oc[0]?"l":"L",Nd[0],Nd[1]]:[oc[0],Bd.rx,Bd.ry,Bd.ax,oc[4],oc[5],Nd[0],Nd[1]];break;case "m":Nd=$a.calc(oc[1],oc[2],0<Wc);Wd=["m",Nd[0],Nd[1]];break;default:for(Nd=oc[0],Wd=[Nd],wc=Nd.toLowerCase()===Nd,bc=1;bc<oc.length;bc+=2)Nd=$a.calc(oc[bc],oc[bc+1],wc),Wd.push(Nd[0],
Nd[1])}Qb.segments[Wc]=Wd},!0)};u.prototype.__evaluateStack=function(){var $a,bc=this||we;if((this||we).__stack.length){if(1===(this||we).__stack.length)return this.__matrix((this||we).__stack[0]),void((this||we).__stack=[]);var Qb=k();for($a=(this||we).__stack.length;0<=--$a;)Qb.matrix(bc.__stack[$a].toArray());this.__matrix(Qb);(this||we).__stack=[]}};u.prototype.toString=function(){var $a=this||we,bc=[];this.__evaluateStack();for(var Qb=0;Qb<(this||we).segments.length;Qb++){var oc=$a.segments[Qb][0];
oc=0<Qb&&"m"!==oc&&"M"!==oc&&oc===$a.segments[Qb-1][0];bc=bc.concat(oc?$a.segments[Qb].slice(1):$a.segments[Qb])}return bc.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")};u.prototype.translate=function($a,bc){return(this||we).__stack.push(k().translate($a,bc||0)),this||we};u.prototype.scale=function($a,bc){return(this||we).__stack.push(k().scale($a,bc||0===bc?bc:$a)),this||we};u.prototype.rotate=function($a,bc,Qb){return(this||we).__stack.push(k().rotate($a,
bc||0,Qb||0)),this||we};u.prototype.skewX=function($a){return(this||we).__stack.push(k().skewX($a)),this||we};u.prototype.skewY=function($a){return(this||we).__stack.push(k().skewY($a)),this||we};u.prototype.matrix=function($a){return(this||we).__stack.push(k().matrix($a)),this||we};u.prototype.transform=function($a){return $a.trim()?((this||we).__stack.push(rx($a)),this||we):this||we};u.prototype.round=function($a){var bc,Qb=0,oc=0,Wc=0,Wd=0;return $a=$a||0,this.__evaluateStack(),(this||we).segments.forEach(function(wc){var Nd=
wc[0].toLowerCase()===wc[0];switch(wc[0]){case "H":case "h":return Nd&&(wc[1]+=Wc),Wc=wc[1]-wc[1].toFixed($a),void(wc[1]=+wc[1].toFixed($a));case "V":case "v":return Nd&&(wc[1]+=Wd),Wd=wc[1]-wc[1].toFixed($a),void(wc[1]=+wc[1].toFixed($a));case "Z":case "z":return Wc=Qb,void(Wd=oc);case "M":case "m":return Nd&&(wc[1]+=Wc,wc[2]+=Wd),Wc=wc[1]-wc[1].toFixed($a),Wd=wc[2]-wc[2].toFixed($a),Qb=Wc,oc=Wd,wc[1]=+wc[1].toFixed($a),void(wc[2]=+wc[2].toFixed($a));case "A":case "a":return Nd&&(wc[6]+=Wc,wc[7]+=
Wd),Wc=wc[6]-wc[6].toFixed($a),Wd=wc[7]-wc[7].toFixed($a),wc[1]=+wc[1].toFixed($a),wc[2]=+wc[2].toFixed($a),wc[3]=+wc[3].toFixed($a+2),wc[6]=+wc[6].toFixed($a),void(wc[7]=+wc[7].toFixed($a));default:return bc=wc.length,Nd&&(wc[bc-2]+=Wc,wc[bc-1]+=Wd),Wc=wc[bc-2]-wc[bc-2].toFixed($a),Wd=wc[bc-1]-wc[bc-1].toFixed($a),void wc.forEach(function(Bd,Ze){Ze&&(wc[Ze]=+wc[Ze].toFixed($a))})}}),this||we};u.prototype.iterate=function($a,bc){var Qb,oc=(this||we).segments,Wc={},Wd=!1,wc=0,Nd=0,Bd=0,Ze=0;if(bc||
this.__evaluateStack(),oc.forEach(function(Sf,Ag){var Qh=$a(Sf,Ag,wc,Nd);Array.isArray(Qh)&&(Wc[Ag]=Qh,Wd=!0);Ag=Sf[0]===Sf[0].toLowerCase();switch(Sf[0]){case "m":case "M":return wc=Sf[1]+(Ag?wc:0),Nd=Sf[2]+(Ag?Nd:0),Bd=wc,void(Ze=Nd);case "h":case "H":return void(wc=Sf[1]+(Ag?wc:0));case "v":case "V":return void(Nd=Sf[1]+(Ag?Nd:0));case "z":case "Z":return wc=Bd,void(Nd=Ze);default:wc=Sf[Sf.length-2]+(Ag?wc:0),Nd=Sf[Sf.length-1]+(Ag?Nd:0)}}),!Wd)return this||we;var Gd=[];for(bc=0;bc<oc.length;bc++)if(void 0!==
Wc[bc])for(Qb=0;Qb<Wc[bc].length;Qb++)Gd.push(Wc[bc][Qb]);else Gd.push(oc[bc]);return(this||we).segments=Gd,this||we};u.prototype.abs=function(){return this.iterate(function($a,bc,Qb,oc){bc=$a[0];var Wc=bc.toUpperCase();if(bc!==Wc)switch($a[0]=Wc,bc){case "v":return void($a[1]+=oc);case "a":return $a[6]+=Qb,void($a[7]+=oc);default:for(bc=1;bc<$a.length;bc++)$a[bc]+=bc%2?Qb:oc}},!0),this||we};u.prototype.rel=function(){return this.iterate(function($a,bc,Qb,oc){var Wc=$a[0],Wd=Wc.toLowerCase();if(Wc!==
Wd&&(0!==bc||"M"!==Wc))switch($a[0]=Wd,Wc){case "V":return void($a[1]-=oc);case "A":return $a[6]-=Qb,void($a[7]-=oc);default:for(bc=1;bc<$a.length;bc++)$a[bc]-=bc%2?Qb:oc}},!0),this||we};u.prototype.unarc=function(){return this.iterate(function($a,bc,Qb,oc){var Wc,Wd,wc,Nd=[];bc=$a[0];return"A"!==bc&&"a"!==bc?null:("a"===bc?(Wd=Qb+$a[6],wc=oc+$a[7]):(Wd=$a[6],wc=$a[7]),Wc=Dm(Qb,oc,Wd,wc,$a[4],$a[5],$a[1],$a[2],$a[3]),0===Wc.length?[["a"===$a[0]?"l":"L",$a[6],$a[7]]]:(Wc.forEach(function(Bd){Nd.push(["C",
Bd[2],Bd[3],Bd[4],Bd[5],Bd[6],Bd[7]])}),Nd))}),this||we};u.prototype.unshort=function(){var $a,bc,Qb,oc,Wc,Wd=(this||we).segments;return this.iterate(function(wc,Nd,Bd,Ze){var Gd,Sf=wc[0],Ag=Sf.toUpperCase();Nd&&("T"===Ag?(Gd="t"===Sf,Qb=Wd[Nd-1],"Q"===Qb[0]?($a=Qb[1]-Bd,bc=Qb[2]-Ze):"q"===Qb[0]?($a=Qb[1]-Qb[3],bc=Qb[2]-Qb[4]):($a=0,bc=0),oc=-$a,Wc=-bc,Gd||(oc+=Bd,Wc+=Ze),Wd[Nd]=[Gd?"q":"Q",oc,Wc,wc[1],wc[2]]):"S"===Ag&&(Gd="s"===Sf,Qb=Wd[Nd-1],"C"===Qb[0]?($a=Qb[3]-Bd,bc=Qb[4]-Ze):"c"===Qb[0]?($a=
Qb[3]-Qb[5],bc=Qb[4]-Qb[6]):($a=0,bc=0),oc=-$a,Wc=-bc,Gd||(oc+=Bd,Wc+=Ze),Wd[Nd]=[Gd?"c":"C",oc,Wc,wc[1],wc[2],wc[3],wc[4]]))}),this||we};var zd=u,Eb={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},cc=/([astvzqmhlc])([^astvzqmhlc]*)/gi,Xc=function($a){var bc=[];return $a.replace(cc,function(Qb,oc,Wc){Qb=oc.toLowerCase();Wc=(Wc=Wc.match(Ae))?Wc.map(Number):[];for("m"===Qb&&2<Wc.length&&(bc.push([oc].concat(Wc.splice(0,2))),Qb="l",oc="m"===oc?"l":"L");0<=Wc.length;){if(Wc.length===Eb[Qb])return Wc.unshift(oc),
bc.push(Wc);if(Wc.length<Eb[Qb])throw Error("malformed path data");bc.push([oc].concat(Wc.splice(0,Eb[Qb])))}}),bc},Ae=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,cg=function($a,bc,Qb,oc,Wc,Wd,wc,Nd){return new x($a,bc,Qb,oc,Wc,Wd,wc,Nd)};x.prototype={constructor:x,init:function(){(this||we).length=this.getArcLength([(this||we).a.x,(this||we).b.x,(this||we).c.x,(this||we).d.x],[(this||we).a.y,(this||we).b.y,(this||we).c.y,(this||we).d.y])},getTotalLength:function(){return(this||we).length},getPointAtLength:function($a){$a=
H($a,(this||we).length,(this||we).getArcLength,[(this||we).a.x,(this||we).b.x,(this||we).c.x,(this||we).d.x],[(this||we).a.y,(this||we).b.y,(this||we).c.y,(this||we).d.y]);return this.getPoint([(this||we).a.x,(this||we).b.x,(this||we).c.x,(this||we).d.x],[(this||we).a.y,(this||we).b.y,(this||we).c.y,(this||we).d.y],$a)},getTangentAtLength:function($a){$a=H($a,(this||we).length,(this||we).getArcLength,[(this||we).a.x,(this||we).b.x,(this||we).c.x,(this||we).d.x],[(this||we).a.y,(this||we).b.y,(this||
we).c.y,(this||we).d.y]);$a=this.getDerivative([(this||we).a.x,(this||we).b.x,(this||we).c.x,(this||we).d.x],[(this||we).a.y,(this||we).b.y,(this||we).c.y,(this||we).d.y],$a);var bc=Math.sqrt($a.x*$a.x+$a.y*$a.y);return 0<bc?{x:$a.x/bc,y:$a.y/bc}:{x:0,y:0}},getPropertiesAtLength:function($a){$a=H($a,(this||we).length,(this||we).getArcLength,[(this||we).a.x,(this||we).b.x,(this||we).c.x,(this||we).d.x],[(this||we).a.y,(this||we).b.y,(this||we).c.y,(this||we).d.y]);var bc=this.getDerivative([(this||
we).a.x,(this||we).b.x,(this||we).c.x,(this||we).d.x],[(this||we).a.y,(this||we).b.y,(this||we).c.y,(this||we).d.y],$a);var Qb=Math.sqrt(bc.x*bc.x+bc.y*bc.y);bc=0<Qb?{x:bc.x/Qb,y:bc.y/Qb}:{x:0,y:0};$a=this.getPoint([(this||we).a.x,(this||we).b.x,(this||we).c.x,(this||we).d.x],[(this||we).a.y,(this||we).b.y,(this||we).c.y,(this||we).d.y],$a);return{x:$a.x,y:$a.y,tangentX:bc.x,tangentY:bc.y}}};var wh=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,
.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],
[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,
.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,
-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,
.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,
-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,
.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,
.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,
-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,
.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,
-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],Pk=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,
.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,
.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,
.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,
.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,
.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,
.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,
.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,
.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,
.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,
.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,
.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Em=[[1],[1,1],[1,2,1],[1,3,3,1]],Fm=2*Math.PI,dv=function($a,bc,Qb,oc,Wc,Wd,wc,Nd,Bd){var Ze=Math.sin(Wc*Fm/360),Gd=Math.cos(Wc*Fm/360);Wc=Gd*($a-Nd)/2+Ze*(bc-Bd)/2;var Sf=-Ze*($a-Nd)/2+Gd*(bc-Bd)/2;if(0===Wc&&0===Sf||0===Qb||0===oc)return[];
Qb=Math.abs(Qb);oc=Math.abs(oc);Wc=Wc*Wc/(Qb*Qb)+Sf*Sf/(oc*oc);1<Wc&&(Qb*=Math.sqrt(Wc),oc*=Math.sqrt(Wc));var Ag=Qa($a,bc,Nd,Bd,Wd,wc,Qb,oc,Ze,Gd);$a=[];bc=Ag[2];Wd=Ag[3];wc=Math.max(Math.ceil(Math.abs(Wd)/(Fm/4)),1);Wd/=wc;for(Nd=0;Nd<wc;Nd++)$a.push(ec(bc,Wd)),bc+=Wd;return $a.map(function(Qh){for(var Mh=0;Mh<Qh.length;Mh+=2){var Yg=Qh[Mh+0],Nh=Qh[Mh+1];Yg*=Qb;Nh*=oc;var Xm=Ze*Yg+Gd*Nh;Qh[Mh+0]=Gd*Yg-Ze*Nh+Ag[0];Qh[Mh+1]=Xm+Ag[1]}return Qh})},Xs=function($a,bc,Qb,oc,Wc,Wd,wc,Nd,Bd){return new mc($a,
bc,Qb,oc,Wc,Wd,wc,Nd,Bd)};mc.prototype={constructor:mc,init:function(){},getTotalLength:function(){return(this||we).length},getPointAtLength:function($a){var bc=this||we;0>$a?$a=0:$a>(this||we).length&&($a=(this||we).length);for(var Qb=(this||we).partialLengths.length-1;(this||we).partialLengths[Qb]>=$a&&0<(this||we).partialLengths[Qb];)Qb--;Qb<(this||we).partialLengths.length-1&&Qb++;for(var oc=0,Wc=0;Wc<Qb;Wc++)oc+=bc.partialLengths[Wc];return(this||we).curves[Qb].getPointAtLength($a-oc)},getTangentAtLength:function($a){var bc=
this||we;0>$a?$a=0:$a>(this||we).length&&($a=(this||we).length);for(var Qb=(this||we).partialLengths.length-1;(this||we).partialLengths[Qb]>=$a&&0<(this||we).partialLengths[Qb];)Qb--;Qb<(this||we).partialLengths.length-1&&Qb++;for(var oc=0,Wc=0;Wc<Qb;Wc++)oc+=bc.partialLengths[Wc];return(this||we).curves[Qb].getTangentAtLength($a-oc)},getPropertiesAtLength:function($a){var bc=this.getTangentAtLength($a);$a=this.getPointAtLength($a);return{x:$a.x,y:$a.y,tangentX:bc.x,tangentY:bc.y}}};var gm=function($a,
bc,Qb,oc){return new hc($a,bc,Qb,oc)};hc.prototype.getTotalLength=function(){return Math.sqrt(Math.pow((this||we).x0-(this||we).x1,2)+Math.pow((this||we).y0-(this||we).y1,2))};hc.prototype.getPointAtLength=function($a){$a/=Math.sqrt(Math.pow((this||we).x0-(this||we).x1,2)+Math.pow((this||we).y0-(this||we).y1,2));return{x:(this||we).x0+((this||we).x1-(this||we).x0)*$a,y:(this||we).y0+((this||we).y1-(this||we).y0)*$a}};hc.prototype.getTangentAtLength=function(){var $a=Math.sqrt(((this||we).x1-(this||
we).x0)*((this||we).x1-(this||we).x0)+((this||we).y1-(this||we).y0)*((this||we).y1-(this||we).y0));return{x:((this||we).x1-(this||we).x0)/$a,y:((this||we).y1-(this||we).y0)/$a}};hc.prototype.getPropertiesAtLength=function($a){$a=this.getPointAtLength($a);var bc=this.getTangentAtLength();return{x:$a.x,y:$a.y,tangentX:bc.x,tangentY:bc.y}};var Nq=function($a){function bc(wc){if(!wc)return null;var Nd;wc=Xc(wc);for(var Bd=[0,0],Ze=[0,0],Gd=0;Gd<wc.length;Gd++)"M"===wc[Gd][0]?(Bd=[wc[Gd][1],wc[Gd][2]],
Wc.push(null)):"m"===wc[Gd][0]?(Bd=[wc[Gd][1]+Bd[0],wc[Gd][2]+Bd[1]],Wc.push(null)):"L"===wc[Gd][0]?(Qb+=Math.sqrt(Math.pow(Bd[0]-wc[Gd][1],2)+Math.pow(Bd[1]-wc[Gd][2],2)),Wc.push(new gm(Bd[0],wc[Gd][1],Bd[1],wc[Gd][2])),Bd=[wc[Gd][1],wc[Gd][2]]):"l"===wc[Gd][0]?(Qb+=Math.sqrt(Math.pow(wc[Gd][1],2)+Math.pow(wc[Gd][2],2)),Wc.push(new gm(Bd[0],wc[Gd][1]+Bd[0],Bd[1],wc[Gd][2]+Bd[1])),Bd=[wc[Gd][1]+Bd[0],wc[Gd][2]+Bd[1]]):"H"===wc[Gd][0]?(Qb+=Math.abs(Bd[0]-wc[Gd][1]),Wc.push(new gm(Bd[0],wc[Gd][1],Bd[1],
Bd[1])),Bd[0]=wc[Gd][1]):"h"===wc[Gd][0]?(Qb+=Math.abs(wc[Gd][1]),Wc.push(new gm(Bd[0],Bd[0]+wc[Gd][1],Bd[1],Bd[1])),Bd[0]=wc[Gd][1]+Bd[0]):"V"===wc[Gd][0]?(Qb+=Math.abs(Bd[1]-wc[Gd][1]),Wc.push(new gm(Bd[0],Bd[0],Bd[1],wc[Gd][1])),Bd[1]=wc[Gd][1]):"v"===wc[Gd][0]?(Qb+=Math.abs(wc[Gd][1]),Wc.push(new gm(Bd[0],Bd[0],Bd[1],Bd[1]+wc[Gd][1])),Bd[1]=wc[Gd][1]+Bd[1]):"z"===wc[Gd][0]||"Z"===wc[Gd][0]?(Qb+=Math.sqrt(Math.pow(wc[0][1]-Bd[0],2)+Math.pow(wc[0][2]-Bd[1],2)),Wc.push(new gm(Bd[0],wc[0][1],Bd[1],
wc[0][2])),Bd=[wc[0][1],wc[0][2]]):"C"===wc[Gd][0]?(Nd=new cg(Bd[0],Bd[1],wc[Gd][1],wc[Gd][2],wc[Gd][3],wc[Gd][4],wc[Gd][5],wc[Gd][6]),Qb+=Nd.getTotalLength(),Bd=[wc[Gd][5],wc[Gd][6]],Wc.push(Nd)):"c"===wc[Gd][0]?(Nd=new cg(Bd[0],Bd[1],Bd[0]+wc[Gd][1],Bd[1]+wc[Gd][2],Bd[0]+wc[Gd][3],Bd[1]+wc[Gd][4],Bd[0]+wc[Gd][5],Bd[1]+wc[Gd][6]),Qb+=Nd.getTotalLength(),Bd=[wc[Gd][5]+Bd[0],wc[Gd][6]+Bd[1]],Wc.push(Nd)):"S"===wc[Gd][0]?(Nd=0<Gd&&-1<["C","c","S","s"].indexOf(wc[Gd-1][0])?new cg(Bd[0],Bd[1],2*Bd[0]-
wc[Gd-1][wc[Gd-1].length-4],2*Bd[1]-wc[Gd-1][wc[Gd-1].length-3],wc[Gd][1],wc[Gd][2],wc[Gd][3],wc[Gd][4]):new cg(Bd[0],Bd[1],Bd[0],Bd[1],wc[Gd][1],wc[Gd][2],wc[Gd][3],wc[Gd][4]),Qb+=Nd.getTotalLength(),Bd=[wc[Gd][3],wc[Gd][4]],Wc.push(Nd)):"s"===wc[Gd][0]?(Nd=0<Gd&&-1<["C","c","S","s"].indexOf(wc[Gd-1][0])?new cg(Bd[0],Bd[1],Bd[0]+Nd.d.x-Nd.c.x,Bd[1]+Nd.d.y-Nd.c.y,Bd[0]+wc[Gd][1],Bd[1]+wc[Gd][2],Bd[0]+wc[Gd][3],Bd[1]+wc[Gd][4]):new cg(Bd[0],Bd[1],Bd[0],Bd[1],Bd[0]+wc[Gd][1],Bd[1]+wc[Gd][2],Bd[0]+wc[Gd][3],
Bd[1]+wc[Gd][4]),Qb+=Nd.getTotalLength(),Bd=[wc[Gd][3]+Bd[0],wc[Gd][4]+Bd[1]],Wc.push(Nd)):"Q"===wc[Gd][0]?(Nd=new cg(Bd[0],Bd[1],wc[Gd][1],wc[Gd][2],wc[Gd][3],wc[Gd][4]),Qb+=Nd.getTotalLength(),Wc.push(Nd),Bd=[wc[Gd][3],wc[Gd][4]],Ze=[wc[Gd][1],wc[Gd][2]]):"q"===wc[Gd][0]?(Nd=new cg(Bd[0],Bd[1],Bd[0]+wc[Gd][1],Bd[1]+wc[Gd][2],Bd[0]+wc[Gd][3],Bd[1]+wc[Gd][4]),Qb+=Nd.getTotalLength(),Ze=[Bd[0]+wc[Gd][1],Bd[1]+wc[Gd][2]],Bd=[wc[Gd][3]+Bd[0],wc[Gd][4]+Bd[1]],Wc.push(Nd)):"T"===wc[Gd][0]?(Nd=0<Gd&&-1<
["Q","q","T","t"].indexOf(wc[Gd-1][0])?new cg(Bd[0],Bd[1],2*Bd[0]-Ze[0],2*Bd[1]-Ze[1],wc[Gd][1],wc[Gd][2]):new gm(Bd[0],wc[Gd][1],Bd[1],wc[Gd][2]),Wc.push(Nd),Qb+=Nd.getTotalLength(),Ze=[2*Bd[0]-Ze[0],2*Bd[1]-Ze[1]],Bd=[wc[Gd][1],wc[Gd][2]]):"t"===wc[Gd][0]?(Nd=0<Gd&&-1<["Q","q","T","t"].indexOf(wc[Gd-1][0])?new cg(Bd[0],Bd[1],2*Bd[0]-Ze[0],2*Bd[1]-Ze[1],Bd[0]+wc[Gd][1],Bd[1]+wc[Gd][2]):new gm(Bd[0],Bd[0]+wc[Gd][1],Bd[1],Bd[1]+wc[Gd][2]),Qb+=Nd.getTotalLength(),Ze=[2*Bd[0]-Ze[0],2*Bd[1]-Ze[1]],Bd=
[wc[Gd][1]+Bd[0],wc[Gd][2]+Bd[0]],Wc.push(Nd)):"A"===wc[Gd][0]?(Nd=new Xs(Bd[0],Bd[1],wc[Gd][1],wc[Gd][2],wc[Gd][3],wc[Gd][4],wc[Gd][5],wc[Gd][6],wc[Gd][7]),Qb+=Nd.getTotalLength(),Bd=[wc[Gd][6],wc[Gd][7]],Wc.push(Nd)):"a"===wc[Gd][0]&&(Nd=new Xs(Bd[0],Bd[1],wc[Gd][1],wc[Gd][2],wc[Gd][3],wc[Gd][4],wc[Gd][5],Bd[0]+wc[Gd][6],Bd[1]+wc[Gd][7]),Qb+=Nd.getTotalLength(),Bd=[Bd[0]+wc[Gd][6],Bd[1]+wc[Gd][7]],Wc.push(Nd)),oc.push(Qb);return bc}var Qb=0,oc=[],Wc=[];bc.getTotalLength=function(){return Qb};bc.getPointAtLength=
function(wc){wc=Wd(wc);return Wc[wc.i].getPointAtLength(wc.fraction)};bc.getTangentAtLength=function(wc){wc=Wd(wc);return Wc[wc.i].getTangentAtLength(wc.fraction)};bc.getPropertiesAtLength=function(wc){wc=Wd(wc);return Wc[wc.i].getPropertiesAtLength(wc.fraction)};var Wd=function(wc){0>wc?wc=0:wc>Qb&&(wc=Qb);for(var Nd=oc.length-1;oc[Nd]>=wc&&0<oc[Nd];)Nd--;return Nd++,{fraction:wc-oc[Nd-1],i:Nd}};return bc($a)},ap='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n',
Ar=function($a,bc){for(var Qb,oc,Wc,Wd=$a.length,wc=1/0,Nd=0;Nd<Wd;Nd++)!function(Bd){oc=0;bc.forEach(function(Ze,Gd){Ze=Ua($a[(Bd+Gd)%Wd],Ze);oc+=Ze*Ze});oc<wc&&(wc=oc,Qb=Bd)}(Nd);Qb&&(Wc=$a.splice(0,Qb),$a.splice.apply($a,[$a.length,0].concat(Wc)))},ev=me;me.deviation=function($a,bc,Qb,oc){var Wc=bc&&bc.length,Wd=Math.abs(Hi($a,0,Wc?bc[0]*Qb:$a.length,Qb));if(Wc){Wc=0;for(var wc=bc.length;Wc<wc;Wc++)Wd-=Math.abs(Hi($a,bc[Wc]*Qb,Wc<wc-1?bc[Wc+1]*Qb:$a.length,Qb))}for(Wc=bc=0;Wc<oc.length;Wc+=3){wc=
oc[Wc]*Qb;var Nd=oc[Wc+1]*Qb,Bd=oc[Wc+2]*Qb;bc+=Math.abs(($a[wc]-$a[Bd])*($a[Nd+1]-$a[wc+1])-($a[wc]-$a[Nd])*($a[Bd+1]-$a[wc+1]))}return 0===Wd&&0===bc?0:Math.abs((bc-Wd)/Wd)};me.flatten=function($a){for(var bc=$a[0][0].length,Qb={vertices:[],holes:[],dimensions:bc},oc=0,Wc=0;Wc<$a.length;Wc++){for(var Wd=0;Wd<$a[Wc].length;Wd++)for(var wc=0;wc<bc;wc++)Qb.vertices.push($a[Wc][Wd][wc]);0<Wc&&(oc+=$a[Wc-1].length,Qb.holes.push(oc))}return Qb};var Br=function($a){return $a},Ys=function($a){if(null==
$a)return Br;var bc,Qb,oc=$a.scale[0],Wc=$a.scale[1],Wd=$a.translate[0],wc=$a.translate[1];return function(Nd,Bd){Bd||(bc=Qb=0);Bd=2;var Ze=Nd.length,Gd=Array(Ze);Gd[0]=(bc+=Nd[0])*oc+Wd;for(Gd[1]=(Qb+=Nd[1])*Wc+wc;Bd<Ze;)Gd[Bd]=Nd[Bd],++Bd;return Gd}},fv=function($a,bc){return"GeometryCollection"===bc.type?{type:"FeatureCollection",features:bc.geometries.map(function(Qb){return Fj($a,Qb)})}:Fj($a,bc)},Cr=function($a,bc){function Qb(Ze){var Gd,Sf=$a.arcs[0>Ze?~Ze:Ze],Ag=Sf[0];return $a.transform?
(Gd=[0,0],Sf.forEach(function(Qh){Gd[0]+=Qh[0];Gd[1]+=Qh[1]})):Gd=Sf[Sf.length-1],0>Ze?[Gd,Ag]:[Ag,Gd]}function oc(Ze,Gd){for(var Sf in Ze){var Ag=Ze[Sf];delete Gd[Ag.start];delete Ag.start;delete Ag.end;Ag.forEach(function(Qh){Wc[0>Qh?~Qh:Qh]=1});Nd.push(Ag)}}var Wc={},Wd={},wc={},Nd=[],Bd=-1;return bc.forEach(function(Ze,Gd){var Sf,Ag=$a.arcs[0>Ze?~Ze:Ze];3>Ag.length&&!Ag[1][0]&&!Ag[1][1]&&(Sf=bc[++Bd],bc[Bd]=Ze,bc[Gd]=Sf)}),bc.forEach(function(Ze){var Gd=Qb(Ze);var Sf=Gd[0],Ag=Gd[1];(Gd=wc[Sf])?
(delete wc[Gd.end],Gd.push(Ze),Gd.end=Ag,Ze=Wd[Ag])?(delete Wd[Ze.start],Sf=Ze===Gd?Gd:Gd.concat(Ze),Wd[Sf.start=Gd.start]=wc[Sf.end=Ze.end]=Sf):Wd[Gd.start]=wc[Gd.end]=Gd:(Gd=Wd[Ag])?(delete Wd[Gd.start],Gd.unshift(Ze),Gd.start=Sf,Ze=wc[Sf])?(delete wc[Ze.end],Sf=Ze===Gd?Gd:Ze.concat(Gd),Wd[Sf.start=Ze.start]=wc[Sf.end=Gd.end]=Sf):Wd[Gd.start]=wc[Gd.end]=Gd:(Gd=[Ze],Wd[Gd.start=Sf]=wc[Gd.end=Ag]=Gd)}),oc(wc,Wd),oc(Wd,wc),bc.forEach(function(Ze){Wc[0>Ze?~Ze:Ze]||Nd.push([Ze])}),Nd},uA=function($a,
bc){for(var Qb=0,oc=$a.length;Qb<oc;){var Wc=Qb+oc>>>1;$a[Wc]<bc?Qb=Wc+1:oc=Wc}return Qb},uG=function($a){function bc(Mh,Yg){Mh.forEach(function(Nh){0>Nh&&(Nh=~Nh);var Xm=Wc[Nh];Xm?Xm.push(Yg):Wc[Nh]=[Yg]})}function Qb(Mh,Yg){Mh.forEach(function(Nh){bc(Nh,Yg)})}function oc(Mh,Yg){"GeometryCollection"===Mh.type?Mh.geometries.forEach(function(Nh){oc(Nh,Yg)}):Mh.type in wc&&wc[Mh.type](Mh.arcs,Yg)}var Wc={},Wd=$a.map(function(){return[]}),wc={LineString:bc,MultiLineString:Qb,Polygon:Qb,MultiPolygon:function(Mh,
Yg){Mh.forEach(function(Nh){Qb(Nh,Yg)})}};$a.forEach(oc);for(var Nd in Wc){$a=Wc[Nd];for(var Bd=$a.length,Ze=0;Ze<Bd;++Ze)for(var Gd=Ze+1;Gd<Bd;++Gd){var Sf,Ag=$a[Ze],Qh=$a[Gd];(Sf=Wd[Ag])[Nd=uA(Sf,Qh)]!==Qh&&Sf.splice(Nd,0,Qh);(Sf=Wd[Qh])[Nd=uA(Sf,Ag)]!==Ag&&Sf.splice(Nd,0,Ag)}}return Wd},vA=function($a,bc){return $a<bc?-1:$a>bc?1:$a>=bc?0:NaN},wA=function($a){return 1===$a.length&&($a=pl($a)),{left:function(bc,Qb,oc,Wc){null==oc&&(oc=0);for(null==Wc&&(Wc=bc.length);oc<Wc;){var Wd=oc+Wc>>>1;0>$a(bc[Wd],
Qb)?oc=Wd+1:Wc=Wd}return oc},right:function(bc,Qb,oc,Wc){null==oc&&(oc=0);for(null==Wc&&(Wc=bc.length);oc<Wc;){var Wd=oc+Wc>>>1;0<$a(bc[Wd],Qb)?Wc=Wd:oc=Wd+1}return oc}}};wA(vA);var xA=function($a,bc){return Sk(pk(L($a),$a),bc)},vG=function($a,bc){if(8<$a.length)return $a.map(function(oc,Wc){return Wc});var Qb=$a.map(function(oc){return bc.map(function(Wc){Wc=Ua(Xb(oc),Xb(Wc));return Wc*Wc})});return Ka($a,bc,Qb)};b.interpolate=function($a,bc,Qb){void 0===Qb&&(Qb={});var oc=Qb.maxSegmentLength;void 0===
oc&&(oc=10);Qb=Qb.string;void 0===Qb&&(Qb=!0);var Wc=na($a,oc);oc=na(bc,oc);var Wd=yd(Wc,oc,Qb);return!Qb||"string"!=typeof $a&&"string"!=typeof bc?Wd:function(wc){return 1E-4>wc&&"string"==typeof $a?$a:1E-4>1-wc&&"string"==typeof bc?bc:Wd(wc)}};b.separate=B;b.combine=function($a,bc,Qb){void 0===Qb&&(Qb={});var oc=Qb.maxSegmentLength;void 0===oc&&(oc=10);var Wc=Qb.string;void 0===Wc&&(Wc=!0);Qb=Qb.single;void 0===Qb&&(Qb=!1);var Wd=B(bc,$a,{maxSegmentLength:oc,string:Wc,single:Qb});return Qb?function(wc){return Wd(1-
wc)}:Wd.map(function(wc){return function(Nd){return wc(1-Nd)}})};b.interpolateAll=function($a,bc,Qb){void 0===Qb&&(Qb={});var oc=Qb.maxSegmentLength;void 0===oc&&(oc=10);var Wc=Qb.string;void 0===Wc&&(Wc=!0);Qb=Qb.single;if(void 0===Qb&&(Qb=!1),!Array.isArray($a)||!Array.isArray(bc)||$a.length!==bc.length||!$a.length)throw new TypeError("flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).");
var Wd,wc,Nd=function(Ze){return na(Ze,oc)},Bd=$a.map(Nd);Nd=bc.map(Nd);return Qb?($a.every(function(Ze){return"string"==typeof Ze})&&(Wd=$a.slice(0)),bc.every(function(Ze){return"string"==typeof Ze})&&(wc=bc.slice(0))):(Wd=$a.slice(0),wc=bc.slice(0)),Y(Bd,Nd,{string:Wc,single:Qb,t0:Wd,t1:wc,match:!1})};b.splitPathString=function($a){return qd((new zd($a)).abs())};b.toPathString=La;b.fromCircle=nb;b.toCircle=function($a,bc,Qb,oc,Wc){var Wd=nb(bc,Qb,oc,$a,Wc);return function(wc){return Wd(1-wc)}};
b.fromRect=ld;b.toRect=function($a,bc,Qb,oc,Wc,Wd){var wc=ld(bc,Qb,oc,Wc,$a,Wd);return function(Nd){return wc(1-Nd)}};Object.defineProperty(b,"__esModule",{value:!0})});var k3={},l3="function"===typeof Float32Array,m3=k3=function(b,c,g,a){if(!(0<=b&&1>=b&&0<=g&&1>=g))throw Error("bezier x values must be in [0, 1] range");if(b===c&&g===a)return lX;for(var d=l3?new Float32Array(11):Array(11),f=0;11>f;++f)d[f]=cz(.1*f,b,g);return function(k){if(0===k)return 0;if(1===k)return 1;for(var n=0,p=1;10!==p&&
d[p]<=k;++p)n+=.1;--p;p=n+(k-d[p])/(d[p+1]-d[p])*.1;var q=3*(1-3*g+3*b)*p*p+2*(3*g-6*b)*p+3*b;if(.001<=q){for(n=0;4>n;++n){q=3*(1-3*g+3*b)*p*p+2*(3*g-6*b)*p+3*b;if(0===q)break;var r=cz(p,b,g)-k;p-=r/q}k=p}else if(0===q)k=p;else{p=n;n+=.1;var u=0;do r=p+(n-p)/2,q=cz(r,b,g)-k,0<q?n=r:p=r;while(1E-7<Math.abs(q)&&10>++u);k=r}return cz(k,c,a)}},ie="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;!function(){var b={},c={};!function(g,a){function d(){(this||ie)._delay=0;(this||
ie)._endDelay=0;(this||ie)._fill="none";(this||ie)._iterationStart=0;(this||ie)._iterations=1;(this||ie)._duration=0;(this||ie)._playbackRate=1;(this||ie)._direction="normal";(this||ie)._easing="linear";(this||ie)._easingFunction=D}function f(){return g.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function k(xa,rc,Lb){var Ac=new d;return rc&&(Ac.fill="both",Ac.duration="auto"),"number"!=typeof xa||isNaN(xa)?void 0!==xa&&Object.getOwnPropertyNames(xa).forEach(function(Xb){"auto"==
xa[Xb]||("number"==typeof Ac[Xb]||"duration"==Xb)&&("number"!=typeof xa[Xb]||isNaN(xa[Xb]))||"fill"==Xb&&-1==x.indexOf(xa[Xb])||"direction"==Xb&&-1==y.indexOf(xa[Xb])||"playbackRate"==Xb&&1!==xa[Xb]&&g.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead.")||(Ac[Xb]=xa[Xb])}):Ac.duration=xa,Ac}function n(xa,rc,Lb,Ac){return 0>xa||1<xa||0>Lb||1<Lb?D:function(Xb){if(0>=Xb){var qd=0;return 0<xa?qd=rc/xa:!rc&&0<Lb&&(qd=Ac/Lb),qd*Xb}if(1<=Xb)return qd=0,1>
Lb?qd=(Ac-1)/(Lb-1):1==Lb&&1>xa&&(qd=(rc-1)/(xa-1)),1+qd*(Xb-1);qd=0;for(var La=1;qd<La;){var Fd=(qd+La)/2,na=3*xa*(1-Fd)*(1-Fd)*Fd+3*Lb*(1-Fd)*Fd*Fd+Fd*Fd*Fd;if(1E-5>Math.abs(Xb-na))break;na<Xb?qd=Fd:La=Fd}return 3*rc*(1-Fd)*(1-Fd)*Fd+3*Ac*(1-Fd)*Fd*Fd+Fd*Fd*Fd}}function p(xa,rc){return function(Lb){if(1<=Lb)return 1;var Ac=1/xa;return(Lb+=rc*Ac)-Lb%Ac}}function q(xa){sa||(sa=document.createElement("div").style);sa.animationTimingFunction="";sa.animationTimingFunction=xa;var rc=sa.animationTimingFunction;
if(""==rc&&f())throw new TypeError(xa+" is not a valid value for easing");return rc}function r(xa){if("linear"==xa)return D;var rc=ja.exec(xa);return rc?n.apply(this||ie,rc.slice(1).map(Number)):(rc=Ha.exec(xa))?p(Number(rc[1]),N):(rc=Qa.exec(xa))?p(Number(rc[1]),{start:H,middle:I,end:N}[rc[2]]):J[xa]||D}function u(xa,rc,Lb){if(null==rc)return ec;var Ac=Lb.delay+xa+Lb.endDelay;return rc<Math.min(Lb.delay,Ac)?mc:rc>=Math.min(Lb.delay+xa,Ac)?hc:Ua}var x=["backwards","forwards","both","none"],y=["reverse",
"alternate","alternate-reverse"],D=function(xa){return xa};d.prototype={_setMember:function(xa,rc){(this||ie)["_"+xa]=rc;(this||ie)._effect&&((this||ie)._effect._timingInput[xa]=rc,(this||ie)._effect._timing=g.normalizeTimingInput((this||ie)._effect._timingInput),(this||ie)._effect.activeDuration=g.calculateActiveDuration((this||ie)._effect._timing),(this||ie)._effect._animation&&(this||ie)._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return(this||ie)._playbackRate},set delay(xa){this._setMember("delay",
xa)},get delay(){return(this||ie)._delay},set endDelay(xa){this._setMember("endDelay",xa)},get endDelay(){return(this||ie)._endDelay},set fill(xa){this._setMember("fill",xa)},get fill(){return(this||ie)._fill},set iterationStart(xa){if((isNaN(xa)||0>xa)&&f())throw new TypeError("iterationStart must be a non-negative number, received: "+xa);this._setMember("iterationStart",xa)},get iterationStart(){return(this||ie)._iterationStart},set duration(xa){if("auto"!=xa&&(isNaN(xa)||0>xa)&&f())throw new TypeError("duration must be non-negative or auto, received: "+
xa);this._setMember("duration",xa)},get duration(){return(this||ie)._duration},set direction(xa){this._setMember("direction",xa)},get direction(){return(this||ie)._direction},set easing(xa){(this||ie)._easingFunction=r(q(xa));this._setMember("easing",xa)},get easing(){return(this||ie)._easing},set iterations(xa){if((isNaN(xa)||0>xa)&&f())throw new TypeError("iterations must be non-negative, received: "+xa);this._setMember("iterations",xa)},get iterations(){return(this||ie)._iterations}};var H=1,I=
.5,N=0,J={ease:n(.25,.1,.25,1),"ease-in":n(.42,0,1,1),"ease-out":n(0,0,.58,1),"ease-in-out":n(.42,0,.58,1),"step-start":p(1,H),"step-middle":p(1,I),"step-end":p(1,N)},sa=null,ja=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,Ha=/steps\(\s*(\d+)\s*\)/,Qa=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,ec=0,mc=1,hc=2,Ua=3;g.cloneTimingInput=function(xa){if("number"==typeof xa)return xa;var rc={},Lb;for(Lb in xa)rc[Lb]=
xa[Lb];return rc};g.makeTiming=k;g.numericTimingToObject=function(xa){return"number"==typeof xa&&(xa=isNaN(xa)?{duration:0}:{duration:xa}),xa};g.normalizeTimingInput=function(xa,rc){return xa=g.numericTimingToObject(xa),k(xa,rc)};g.calculateActiveDuration=function(xa){return Math.abs((0===xa.duration||0===xa.iterations?0:xa.duration*xa.iterations)/xa.playbackRate)};g.calculateIterationProgress=function(xa,rc,Lb){var Ac=u(xa,rc,Lb);a:{var Xb=Lb.fill;switch(Ac){case mc:xa="backwards"==Xb||"both"==Xb?
0:null;break a;case Ua:xa=rc-Lb.delay;break a;case hc:xa="forwards"==Xb||"both"==Xb?xa:null;break a;case ec:xa=null;break a}xa=void 0}if(null===xa)return null;rc=Lb.duration;Xb=Lb.iterationStart;rc=(0===rc?Ac!==mc&&(Xb+=Lb.iterations):Xb+=xa/rc,Xb);Xb=rc===1/0?Lb.iterationStart%1:rc%1;xa=(0!==Xb||Ac!==hc||0===Lb.iterations||0===xa&&0!==Lb.duration||(Xb=1),Xb);Xb=Ac===hc&&Lb.iterations===1/0?1/0:1===xa?Math.floor(rc)-1:Math.floor(rc);rc=Ac=Lb.direction;"normal"!==Ac&&"reverse"!==Ac&&("alternate-reverse"===
Ac&&(Xb+=1),rc="normal",Xb!==1/0&&0!=Xb%2&&(rc="reverse"));return Lb._easingFunction("normal"===rc?xa:1-xa)};g.calculatePhase=u;g.normalizeEasing=q;g.parseEasingFunction=r}(b);(function(g,a){function d(p){var q=[],r;for(r in p)if(!(r in["easing","offset","composite"])){var u=p[r];Array.isArray(u)||(u=[u]);for(var x,y=u.length,D=0;D<y;D++)x={},x.offset="offset"in p?p.offset:1==y?1:D/(y-1),"easing"in p&&(x.easing=p.easing),"composite"in p&&(x.composite=p.composite),x[r]=u[D],q.push(x)}return q.sort(function(H,
I){return H.offset-I.offset}),q}var f={background:"backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundAttachment backgroundOrigin backgroundClip backgroundColor".split(" "),border:"borderTopColor borderTopStyle borderTopWidth borderRightColor borderRightStyle borderRightWidth borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth".split(" "),borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor",
"borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],
font:"fontFamily fontSize fontStyle fontVariant fontWeight lineHeight".split(" "),margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle","outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},k=document.createElementNS("http://www.w3.org/1999/xhtml","div");a={thin:"1px",medium:"3px",thick:"5px"};var n={borderBottomWidth:a,borderLeftWidth:a,borderRightWidth:a,borderTopWidth:a,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",
medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:a,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};g.convertToArrayForm=d;g.normalizeKeyframes=function(p){function q(){var D=r.length;null==r[D-1].offset&&(r[D-1].offset=1);1<D&&null==r[0].offset&&(r[0].offset=0);for(var H=0,I=r[0].offset,N=1;N<D;N++){var J=r[N].offset;if(null!=J){for(var sa=1;sa<N-H;sa++)r[H+sa].offset=I+(J-I)*sa/(N-H);H=N;I=
J}}}if(null==p)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&p[Symbol.iterator]&&(p=Array.from(p));Array.isArray(p)||(p=d(p));var r=p.map(function(D){var H={},I;for(I in D){var N=D[I];if("offset"==I){if(null!=N){if(N=Number(N),!isFinite(N))throw new TypeError("Keyframe offsets must be numbers.");if(0>N||1<N)throw new TypeError("Keyframe offsets must be between 0 and 1.");}}else if("composite"==I){if("add"==N||"accumulate"==N)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",
message:"add compositing is not supported"};if("replace"!=N)throw new TypeError("Invalid composite mode "+N+".");}else N="easing"==I?g.normalizeEasing(N):""+N;var J=void 0,sa=I,ja=N;N=H;var Ha=sa;if("display"!==Ha&&0!==Ha.lastIndexOf("animation",0)&&0!==Ha.lastIndexOf("transition",0))if(Ha=f[sa])for(J in k.style[sa]=ja,Ha)sa=Ha[J],ja=k.style[sa],N[sa]=sa in n?n[sa][ja]||ja:ja;else N[sa]=sa in n?n[sa][ja]||ja:ja}return void 0==H.offset&&(H.offset=null),void 0==H.easing&&(H.easing="linear"),H});p=!0;
for(var u=-1/0,x=0;x<r.length;x++){var y=r[x].offset;if(null!=y){if(y<u)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");u=y}else p=!1}return r=r.filter(function(D){return 0<=D.offset&&1>=D.offset}),p||q(),r}})(b);(function(g){var a={};g.isDeprecated=function(d,f,k,n){n=n?"are":"is";var p=new Date;f=new Date(f);return f.setMonth(f.getMonth()+3),!(p<f&&(d in a||console.warn("Web Animations: "+d+" "+n+" deprecated and will stop working on "+f.toDateString()+
". "+k),a[d]=!0,1))};g.deprecated=function(d,f,k,n){var p=n?"are":"is";if(g.isDeprecated(d,f,k,n))throw Error(d+" "+p+" no longer supported. "+k);}})(b);(function(){if(document.documentElement.animate){var g=document.documentElement.animate([],0),a=!0;if(g&&(a=!1,"play currentTime pause reverse playbackRate cancel finish startTime playState".split(" ").forEach(function(d){void 0===g[d]&&(a=!0)})),!a)return}!function(d,f,k){function n(q){for(var r={},u=0;u<q.length;u++)for(var x in q[u])if("offset"!=
x&&"easing"!=x&&"composite"!=x){var y={offset:q[u].offset,easing:q[u].easing,value:q[u][x]};r[x]=r[x]||[];r[x].push(y)}for(var D in r)if(q=r[D],0!=q[0].offset||1!=q[q.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"Partial keyframes are not supported"};return r}function p(q){var r=[],u;for(u in q)for(var x=q[u],y=0;y<x.length-1;y++){var D=y,H=y+1,I=x[D].offset,N=x[H].offset,J=I,sa=N;0==y&&(J=-1/0,0==N&&(H=D));y==x.length-2&&(sa=1/0,1==I&&(D=H));r.push({applyFrom:J,
applyTo:sa,startOffset:x[D].offset,endOffset:x[H].offset,easingFunction:d.parseEasingFunction(x[D].easing),property:u,interpolation:f.propertyInterpolation(u,x[D].value,x[H].value)})}return r.sort(function(ja,Ha){return ja.startOffset-Ha.startOffset}),r}f.convertEffectInput=function(q){q=d.normalizeKeyframes(q);var r=n(q),u=p(r);return function(x,y){if(null!=y)u.filter(function(H){return y>=H.applyFrom&&y<H.applyTo}).forEach(function(H){var I=y-H.startOffset,N=H.endOffset-H.startOffset;I=0==N?0:H.easingFunction(I/
N);f.apply(x,H.property,H.interpolation(I))});else for(var D in r)"offset"!=D&&"easing"!=D&&"composite"!=D&&f.clear(x,D)}}}(b,c);(function(d,f,k){function n(r){return r.replace(/-(.)/g,function(u,x){return x.toUpperCase()})}var p={};f.addPropertiesHandler=function(r,u,x){for(var y=0;y<x.length;y++){var D=r,H=u,I=n(x[y]);p[I]=p[I]||[];p[I].push([D,H])}};var q={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",
borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",
maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};f.propertyInterpolation=function(r,u,x){var y=r;/-/.test(r)&&!d.isDeprecated("Hyphenated property names",
"2016-03-22","Use camelCase instead.",!0)&&(y=n(r));"initial"!=u&&"initial"!=x||("initial"==u&&(u=q[y]),"initial"==x&&(x=q[y]));r=u==x?[]:p[y];for(y=0;r&&y<r.length;y++){var D=r[y][0](u),H=r[y][0](x);if(void 0!==D&&void 0!==H&&(D=r[y][1](D,H))){var I=f.Interpolation.apply(null,D);return function(N){return 0==N?u:1==N?x:I(N)}}}return f.Interpolation(!1,!0,function(N){return N?x:u})}})(b,c);(function(d,f,k){function n(p){var q=d.calculateActiveDuration(p),r=function(u){return d.calculateIterationProgress(q,
u,p)};return r._totalDuration=p.delay+q+p.endDelay,r}f.KeyframeEffect=function(p,q,r,u){var x,y=n(d.normalizeTimingInput(r)),D=f.convertEffectInput(q);q=function(){D(p,x)};return q._update=function(H){return null!==(x=y(H))},q._clear=function(){D(p,null)},q._hasSameTarget=function(H){return p===H},q._target=p,q._totalDuration=y._totalDuration,q._id=u,q}})(b,c);(function(d,f){function k(D,H,I){I.enumerable=!0;I.configurable=!0;Object.defineProperty(D,H,I)}function n(D){(this||ie)._element=D;(this||
ie)._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style;(this||ie)._style=D.style;(this||ie)._length=0;(this||ie)._isAnimatedProperty={};var H=window;D=!(!D.namespaceURI||-1==D.namespaceURI.indexOf("/svg"))&&(q in H||(H[q]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(H.navigator.userAgent)),H[q]);(this||ie)._updateSvgTransformAttr=D;(this||ie)._savedTransformAttr=null;for(D=0;D<(this||ie)._style.length;D++)H=(this||ie)._style[D],(this||ie)._surrogateStyle[H]=(this||
ie)._style[H];this._updateIndices()}function p(D){if(!D._webAnimationsPatchedStyle){var H=new n(D);try{k(D,"style",{get:function(){return H}})}catch(I){D.style._set=function(N,J){D.style[N]=J},D.style._clear=function(N){D.style[N]=""}}D._webAnimationsPatchedStyle=D.style}}var q="_webAnimationsUpdateSvgTransformAttr";f={cssText:1,length:1,parentRule:1};var r={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},u={removeProperty:1,setProperty:1};n.prototype=
{get cssText(){return(this||ie)._surrogateStyle.cssText},set cssText(D){for(var H={},I=0;I<(this||ie)._surrogateStyle.length;I++)H[(this||ie)._surrogateStyle[I]]=!0;(this||ie)._surrogateStyle.cssText=D;this._updateIndices();for(I=0;I<(this||ie)._surrogateStyle.length;I++)H[(this||ie)._surrogateStyle[I]]=!0;for(var N in H)(this||ie)._isAnimatedProperty[N]||(this||ie)._style.setProperty(N,(this||ie)._surrogateStyle.getPropertyValue(N))},get length(){return(this||ie)._surrogateStyle.length},get parentRule(){return(this||
ie)._style.parentRule},_updateIndices:function(){for(;(this||ie)._length<(this||ie)._surrogateStyle.length;)Object.defineProperty(this||ie,(this||ie)._length,{configurable:!0,enumerable:!1,get:function(D){return function(){return(this||ie)._surrogateStyle[D]}}((this||ie)._length)}),(this||ie)._length++;for(;(this||ie)._length>(this||ie)._surrogateStyle.length;)(this||ie)._length--,Object.defineProperty(this||ie,(this||ie)._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(D,H){(this||
ie)._style[D]=H;(this||ie)._isAnimatedProperty[D]=!0;(this||ie)._updateSvgTransformAttr&&"transform"==d.unprefixedPropertyName(D)&&(null==(this||ie)._savedTransformAttr&&((this||ie)._savedTransformAttr=(this||ie)._element.getAttribute("transform")),(this||ie)._element.setAttribute("transform",d.transformToSvgMatrix(H)))},_clear:function(D){(this||ie)._style[D]=(this||ie)._surrogateStyle[D];(this||ie)._updateSvgTransformAttr&&"transform"==d.unprefixedPropertyName(D)&&((this||ie)._savedTransformAttr?
(this||ie)._element.setAttribute("transform",(this||ie)._savedTransformAttr):(this||ie)._element.removeAttribute("transform"),(this||ie)._savedTransformAttr=null);delete (this||ie)._isAnimatedProperty[D]}};for(var x in r)n.prototype[x]=function(D,H){return function(){var I=(this||ie)._surrogateStyle[D].apply((this||ie)._surrogateStyle,arguments);return H&&((this||ie)._isAnimatedProperty[arguments[0]]||(this||ie)._style[D].apply((this||ie)._style,arguments),this._updateIndices()),I}}(x,x in u);for(var y in document.documentElement.style)y in
f||y in r||function(D){k(n.prototype,D,{get:function(){return(this||ie)._surrogateStyle[D]},set:function(H){(this||ie)._surrogateStyle[D]=H;this._updateIndices();(this||ie)._isAnimatedProperty[D]||((this||ie)._style[D]=H)}})}(y);d.apply=function(D,H,I){p(D);D.style._set(d.propertyName(H),I)};d.clear=function(D,H){D._webAnimationsPatchedStyle&&D.style._clear(d.propertyName(H))}})(c);(function(d){window.Element.prototype.animate=function(f,k){var n="";return k&&k.id&&(n=k.id),d.timeline._play(d.KeyframeEffect(this||
ie,f,k,n))}})(c);(function(d,f){function k(n,p,q){if("number"==typeof n&&"number"==typeof p)return n*(1-q)+p*q;if("boolean"==typeof n&&"boolean"==typeof p)return.5>q?n:p;if(n.length==p.length){for(var r=[],u=0;u<n.length;u++)r.push(k(n[u],p[u],q));return r}throw"Mismatched interpolation arguments "+n+":"+p;}d.Interpolation=function(n,p,q){return function(r){return q(k(n,p,r))}}})(c);(function(d,f){f=function(){function k(n,p){for(var q=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;4>r;r++)for(var u=
0;4>u;u++)for(var x=0;4>x;x++)q[r][u]+=p[r][x]*n[x][u];return q}return function(n,p,q,r,u){for(var x=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],y=0;4>y;y++)x[y][3]=u[y];for(y=0;3>y;y++)for(u=0;3>u;u++)x[3][y]+=n[u]*x[u][y];n=r[0];y=r[1];u=r[2];r=r[3];var D=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];D[0][0]=1-2*(y*y+u*u);D[0][1]=2*(n*y-u*r);D[0][2]=2*(n*u+y*r);D[1][0]=2*(n*y+u*r);D[1][1]=1-2*(n*n+u*u);D[1][2]=2*(y*u-n*r);D[2][0]=2*(n*u-y*r);D[2][1]=2*(y*u+n*r);D[2][2]=1-2*(n*n+y*y);x=k(x,D);r=[[1,0,
0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];q[2]&&(r[2][1]=q[2],x=k(x,r));q[1]&&(r[2][1]=0,r[2][0]=q[0],x=k(x,r));q[0]&&(r[2][0]=0,r[1][0]=q[0],x=k(x,r));for(y=0;3>y;y++)for(u=0;3>u;u++)x[y][u]*=p[y];return 0==x[0][2]&&0==x[0][3]&&0==x[1][2]&&0==x[1][3]&&0==x[2][0]&&0==x[2][1]&&1==x[2][2]&&0==x[2][3]&&0==x[3][2]&&1==x[3][3]?[x[0][0],x[0][1],x[1][0],x[1][1],x[3][0],x[3][1]]:x[0].concat(x[1],x[2],x[3])}}();d.composeMatrix=f;d.quat=function(k,n,p){var q=d.dot(k,n);q=Math.max(Math.min(q,1),-1);var r=[];if(1===
q)r=k;else for(var u=Math.acos(q),x=1*Math.sin(p*u)/Math.sqrt(1-q*q),y=0;4>y;y++)r.push(k[y]*(Math.cos(p*u)-q*x)+n[y]*x);return r}})(c);(function(d,f,k){d.sequenceNumber=0;var n=function(p,q,r){(this||ie).target=p;(this||ie).currentTime=q;(this||ie).timelineTime=r;(this||ie).type="finish";(this||ie).bubbles=!1;(this||ie).cancelable=!1;(this||ie).currentTarget=p;(this||ie).defaultPrevented=!1;(this||ie).eventPhase=Event.AT_TARGET;(this||ie).timeStamp=Date.now()};f.Animation=function(p){(this||ie).id=
"";p&&p._id&&((this||ie).id=p._id);(this||ie)._sequenceNumber=d.sequenceNumber++;(this||ie)._currentTime=0;(this||ie)._startTime=null;(this||ie)._paused=!1;(this||ie)._playbackRate=1;(this||ie)._inTimeline=!0;(this||ie)._finishedFlag=!0;(this||ie).onfinish=null;(this||ie)._finishHandlers=[];(this||ie)._effect=p;(this||ie)._inEffect=(this||ie)._effect._update(0);(this||ie)._idle=!0;(this||ie)._currentTimePending=!1};f.Animation.prototype={_ensureAlive:function(){0>(this||ie).playbackRate&&0===(this||
ie).currentTime?(this||ie)._inEffect=(this||ie)._effect._update(-1):(this||ie)._inEffect=(this||ie)._effect._update((this||ie).currentTime);(this||ie)._inTimeline||!(this||ie)._inEffect&&(this||ie)._finishedFlag||((this||ie)._inTimeline=!0,f.timeline._animations.push(this||ie))},_tickCurrentTime:function(p,q){p!=(this||ie)._currentTime&&((this||ie)._currentTime=p,(this||ie)._isFinished&&!q&&((this||ie)._currentTime=0<(this||ie)._playbackRate?(this||ie)._totalDuration:0),this._ensureAlive())},get currentTime(){return(this||
ie)._idle||(this||ie)._currentTimePending?null:(this||ie)._currentTime},set currentTime(p){p=+p;isNaN(p)||(f.restart(),(this||ie)._paused||null==(this||ie)._startTime||((this||ie)._startTime=(this||ie)._timeline.currentTime-p/(this||ie)._playbackRate),(this||ie)._currentTimePending=!1,(this||ie)._currentTime!=p&&((this||ie)._idle&&((this||ie)._idle=!1,(this||ie)._paused=!0),this._tickCurrentTime(p,!0),f.applyDirtiedAnimation(this||ie)))},get startTime(){return(this||ie)._startTime},set startTime(p){p=
+p;isNaN(p)||(this||ie)._paused||(this||ie)._idle||((this||ie)._startTime=p,this._tickCurrentTime(((this||ie)._timeline.currentTime-(this||ie)._startTime)*(this||ie).playbackRate),f.applyDirtiedAnimation(this||ie))},get playbackRate(){return(this||ie)._playbackRate},set playbackRate(p){if(p!=(this||ie)._playbackRate){var q=(this||ie).currentTime;(this||ie)._playbackRate=p;(this||ie)._startTime=null;"paused"!=(this||ie).playState&&"idle"!=(this||ie).playState&&((this||ie)._finishedFlag=!1,(this||ie)._idle=
!1,this._ensureAlive(),f.applyDirtiedAnimation(this||ie));null!=q&&((this||ie).currentTime=q)}},get _isFinished(){return!(this||ie)._idle&&(0<(this||ie)._playbackRate&&(this||ie)._currentTime>=(this||ie)._totalDuration||0>(this||ie)._playbackRate&&0>=(this||ie)._currentTime)},get _totalDuration(){return(this||ie)._effect._totalDuration},get playState(){return(this||ie)._idle?"idle":null==(this||ie)._startTime&&!(this||ie)._paused&&0!=(this||ie).playbackRate||(this||ie)._currentTimePending?"pending":
(this||ie)._paused?"paused":(this||ie)._isFinished?"finished":"running"},_rewind:function(){if(0<=(this||ie)._playbackRate)(this||ie)._currentTime=0;else{if(!((this||ie)._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");(this||ie)._currentTime=(this||ie)._totalDuration}},play:function(){(this||ie)._paused=!1;((this||ie)._isFinished||(this||ie)._idle)&&(this._rewind(),(this||ie)._startTime=null);(this||ie)._finishedFlag=
!1;(this||ie)._idle=!1;this._ensureAlive();f.applyDirtiedAnimation(this||ie)},pause:function(){(this||ie)._isFinished||(this||ie)._paused||(this||ie)._idle?(this||ie)._idle&&(this._rewind(),(this||ie)._idle=!1):(this||ie)._currentTimePending=!0;(this||ie)._startTime=null;(this||ie)._paused=!0},finish:function(){(this||ie)._idle||((this||ie).currentTime=0<(this||ie)._playbackRate?(this||ie)._totalDuration:0,(this||ie)._startTime=(this||ie)._totalDuration-(this||ie).currentTime,(this||ie)._currentTimePending=
!1,f.applyDirtiedAnimation(this||ie))},cancel:function(){(this||ie)._inEffect&&((this||ie)._inEffect=!1,(this||ie)._idle=!0,(this||ie)._paused=!1,(this||ie)._finishedFlag=!0,(this||ie)._currentTime=0,(this||ie)._startTime=null,(this||ie)._effect._update(null),f.applyDirtiedAnimation(this||ie))},reverse:function(){(this||ie).playbackRate*=-1;this.play()},addEventListener:function(p,q){"function"==typeof q&&"finish"==p&&(this||ie)._finishHandlers.push(q)},removeEventListener:function(p,q){"finish"==
p&&(p=(this||ie)._finishHandlers.indexOf(q),0<=p&&(this||ie)._finishHandlers.splice(p,1))},_fireEvents:function(p){if((this||ie)._isFinished){if(!(this||ie)._finishedFlag){var q=new n(this||ie,(this||ie)._currentTime,p),r=(this||ie)._finishHandlers.concat((this||ie).onfinish?[(this||ie).onfinish]:[]);setTimeout(function(){r.forEach(function(u){u.call(q.target,q)})},0);(this||ie)._finishedFlag=!0}}else(this||ie)._finishedFlag=!1},_tick:function(p,q){(this||ie)._idle||(this||ie)._paused||(null==(this||
ie)._startTime?q&&((this||ie).startTime=p-(this||ie)._currentTime/(this||ie).playbackRate):(this||ie)._isFinished||this._tickCurrentTime((p-(this||ie)._startTime)*(this||ie).playbackRate));q&&((this||ie)._currentTimePending=!1,this._fireEvents(p))},get _needsTick(){return(this||ie).playState in{pending:1,running:1}||!(this||ie)._finishedFlag},_targetAnimations:function(){var p=(this||ie)._effect._target;return p._activeAnimations||(p._activeAnimations=[]),p._activeAnimations},_markTarget:function(){var p=
this._targetAnimations();-1===p.indexOf(this||ie)&&p.push(this||ie)},_unmarkTarget:function(){var p=this._targetAnimations(),q=p.indexOf(this||ie);-1!==q&&p.splice(q,1)}}})(b,c);(function(d,f,k){function n(ja){var Ha=y;y=[];ja<sa.currentTime&&(ja=sa.currentTime);sa._animations.sort(p);sa._animations=u(ja,!0,sa._animations)[0];Ha.forEach(function(Qa){Qa[1](ja)});r()}function p(ja,Ha){return ja._sequenceNumber-Ha._sequenceNumber}function q(){(this||ie)._animations=[];(this||ie).currentTime=window.performance&&
performance.now?performance.now():0}function r(){N.forEach(function(ja){ja()});N.length=0}function u(ja,Ha,Qa){J=!0;I=!1;f.timeline.currentTime=ja;H=!1;var ec=[],mc=[],hc=[],Ua=[];return Qa.forEach(function(xa){xa._tick(ja,Ha);xa._inEffect?(mc.push(xa._effect),xa._markTarget()):(ec.push(xa._effect),xa._unmarkTarget());xa._needsTick&&(H=!0);var rc=xa._inEffect||xa._needsTick;(xa._inTimeline=rc)?hc.push(xa):Ua.push(xa)}),N.push.apply(N,ec),N.push.apply(N,mc),H&&requestAnimationFrame(function(){}),J=
!1,[hc,Ua]}var x=window.requestAnimationFrame,y=[],D=0;window.requestAnimationFrame=function(ja){var Ha=D++;return 0==y.length&&x(n),y.push([Ha,ja]),Ha};window.cancelAnimationFrame=function(ja){y.forEach(function(Ha){Ha[0]==ja&&(Ha[1]=function(){})})};q.prototype={_play:function(ja){ja._timing=d.normalizeTimingInput(ja.timing);ja=new f.Animation(ja);return ja._idle=!1,ja._timeline=this||ie,(this||ie)._animations.push(ja),f.restart(),f.applyDirtiedAnimation(ja),ja}};var H=!1,I=!1;f.restart=function(){return H||
(H=!0,requestAnimationFrame(function(){}),I=!0),I};f.applyDirtiedAnimation=function(ja){J||(ja._markTarget(),ja=ja._targetAnimations(),ja.sort(p),u(f.timeline.currentTime,!1,ja.slice())[1].forEach(function(Ha){Ha=sa._animations.indexOf(Ha);-1!==Ha&&sa._animations.splice(Ha,1)}),r())};var N=[],J=!1,sa=new q;f.timeline=sa})(b,c);(function(d,f){function k(x,y){for(var D=0,H=0;H<x.length;H++)D+=x[H]*y[H];return D}function n(x,y){return[x[0]*y[0]+x[4]*y[1]+x[8]*y[2]+x[12]*y[3],x[1]*y[0]+x[5]*y[1]+x[9]*
y[2]+x[13]*y[3],x[2]*y[0]+x[6]*y[1]+x[10]*y[2]+x[14]*y[3],x[3]*y[0]+x[7]*y[1]+x[11]*y[2]+x[15]*y[3],x[0]*y[4]+x[4]*y[5]+x[8]*y[6]+x[12]*y[7],x[1]*y[4]+x[5]*y[5]+x[9]*y[6]+x[13]*y[7],x[2]*y[4]+x[6]*y[5]+x[10]*y[6]+x[14]*y[7],x[3]*y[4]+x[7]*y[5]+x[11]*y[6]+x[15]*y[7],x[0]*y[8]+x[4]*y[9]+x[8]*y[10]+x[12]*y[11],x[1]*y[8]+x[5]*y[9]+x[9]*y[10]+x[13]*y[11],x[2]*y[8]+x[6]*y[9]+x[10]*y[10]+x[14]*y[11],x[3]*y[8]+x[7]*y[9]+x[11]*y[10]+x[15]*y[11],x[0]*y[12]+x[4]*y[13]+x[8]*y[14]+x[12]*y[15],x[1]*y[12]+x[5]*
y[13]+x[9]*y[14]+x[13]*y[15],x[2]*y[12]+x[6]*y[13]+x[10]*y[14]+x[14]*y[15],x[3]*y[12]+x[7]*y[13]+x[11]*y[14]+x[15]*y[15]]}function p(x){return 2*((x.deg||0)/360+(x.grad||0)/400+(x.turn||0))*Math.PI+(x.rad||0)}function q(x){switch(x.t){case "rotatex":return x=p(x.d[0]),[1,0,0,0,0,Math.cos(x),Math.sin(x),0,0,-Math.sin(x),Math.cos(x),0,0,0,0,1];case "rotatey":return x=p(x.d[0]),[Math.cos(x),0,-Math.sin(x),0,0,1,0,0,Math.sin(x),0,Math.cos(x),0,0,0,0,1];case "rotate":case "rotatez":return x=p(x.d[0]),
[Math.cos(x),Math.sin(x),0,0,-Math.sin(x),Math.cos(x),0,0,0,0,1,0,0,0,0,1];case "rotate3d":var y=x.d[0],D=x.d[1],H=x.d[2];x=p(x.d[3]);var I=y*y+D*D+H*H;0===I?(y=1,H=D=0):1!==I&&(I=Math.sqrt(I),y/=I,D/=I,H/=I);I=Math.sin(x/2);x=I*Math.cos(x/2);I*=I;return[1-2*(D*D+H*H)*I,2*(y*D*I+H*x),2*(y*H*I-D*x),0,2*(y*D*I-H*x),1-2*(y*y+H*H)*I,2*(D*H*I+y*x),0,2*(y*H*I+D*x),2*(D*H*I-y*x),1-2*(y*y+D*D)*I,0,0,0,0,1];case "scale":return[x.d[0],0,0,0,0,x.d[1],0,0,0,0,1,0,0,0,0,1];case "scalex":return[x.d[0],0,0,0,0,
1,0,0,0,0,1,0,0,0,0,1];case "scaley":return[1,0,0,0,0,x.d[0],0,0,0,0,1,0,0,0,0,1];case "scalez":return[1,0,0,0,0,1,0,0,0,0,x.d[0],0,0,0,0,1];case "scale3d":return[x.d[0],0,0,0,0,x.d[1],0,0,0,0,x.d[2],0,0,0,0,1];case "skew":return y=p(x.d[0]),D=p(x.d[1]),[1,Math.tan(D),0,0,Math.tan(y),1,0,0,0,0,1,0,0,0,0,1];case "skewx":return x=p(x.d[0]),[1,0,0,0,Math.tan(x),1,0,0,0,0,1,0,0,0,0,1];case "skewy":return x=p(x.d[0]),[1,Math.tan(x),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "translate":return y=x.d[0].px||0,D=
x.d[1].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,D,0,1];case "translatex":return y=x.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,0,0,1];case "translatey":return D=x.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,D,0,1];case "translatez":return H=x.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,H,1];case "translate3d":return y=x.d[0].px||0,D=x.d[1].px||0,H=x.d[2].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,D,H,1];case "perspective":return[1,0,0,0,0,1,0,0,0,0,1,x.d[0].px?-1/x.d[0].px:0,0,0,0,1];case "matrix":return[x.d[0],x.d[1],0,0,x.d[2],
x.d[3],0,0,0,0,1,0,x.d[4],x.d[5],0,1];case "matrix3d":return x.d}}function r(x){return 0===x.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:x.map(q).reduce(n)}var u=function(){function x(I){return I[0][0]*I[1][1]*I[2][2]+I[1][0]*I[2][1]*I[0][2]+I[2][0]*I[0][1]*I[1][2]-I[0][2]*I[1][1]*I[2][0]-I[1][2]*I[2][1]*I[0][0]-I[2][2]*I[0][1]*I[1][0]}function y(I){var N=D(I);return[I[0]/N,I[1]/N,I[2]/N]}function D(I){return Math.sqrt(I[0]*I[0]+I[1]*I[1]+I[2]*I[2])}function H(I,N,J,sa){return[J*I[0]+sa*N[0],J*I[1]+
sa*N[1],J*I[2]+sa*N[2]]}return function(I){I=[I.slice(0,4),I.slice(4,8),I.slice(8,12),I.slice(12,16)];if(1!==I[3][3])return null;for(var N=[],J=0;4>J;J++)N.push(I[J].slice());for(J=0;3>J;J++)N[J][3]=0;if(0===x(N))return null;var sa=[];if(I[0][3]||I[1][3]||I[2][3]){sa.push(I[0][3]);sa.push(I[1][3]);sa.push(I[2][3]);sa.push(I[3][3]);var ja=1/x(N),Ha=N[0][0],Qa=N[0][1];J=N[0][2];var ec=N[1][0],mc=N[1][1],hc=N[1][2],Ua=N[2][0],xa=N[2][1],rc=N[2][2];ja=[[(mc*rc-hc*xa)*ja,(J*xa-Qa*rc)*ja,(Qa*hc-J*mc)*ja,
0],[(hc*Ua-ec*rc)*ja,(Ha*rc-J*Ua)*ja,(J*ec-Ha*hc)*ja,0],[(ec*xa-mc*Ua)*ja,(Ua*Qa-Ha*xa)*ja,(Ha*mc-Qa*ec)*ja,0]];Ha=[];for(Qa=0;3>Qa;Qa++){for(ec=J=0;3>ec;ec++)J+=N[3][ec]*ja[ec][Qa];Ha.push(J)}N=(Ha.push(1),ja.push(Ha),ja);N=[[N[0][0],N[1][0],N[2][0],N[3][0]],[N[0][1],N[1][1],N[2][1],N[3][1]],[N[0][2],N[1][2],N[2][2],N[3][2]],[N[0][3],N[1][3],N[2][3],N[3][3]]];ja=[];for(Ha=0;4>Ha;Ha++){for(J=Qa=0;4>J;J++)Qa+=sa[J]*N[J][Ha];ja.push(Qa)}sa=ja}else sa=[0,0,0,1];N=I[3].slice(0,3);ja=[];ja.push(I[0].slice(0,
3));Ha=[];Ha.push(D(ja[0]));ja[0]=y(ja[0]);Qa=[];ja.push(I[1].slice(0,3));Qa.push(k(ja[0],ja[1]));ja[1]=H(ja[1],ja[0],1,-Qa[0]);Ha.push(D(ja[1]));ja[1]=y(ja[1]);Qa[0]/=Ha[1];ja.push(I[2].slice(0,3));Qa.push(k(ja[0],ja[2]));ja[2]=H(ja[2],ja[0],1,-Qa[1]);Qa.push(k(ja[1],ja[2]));ja[2]=H(ja[2],ja[1],1,-Qa[2]);Ha.push(D(ja[2]));ja[2]=y(ja[2]);Qa[1]/=Ha[2];Qa[2]/=Ha[2];I=ja[1];J=ja[2];if(0>k(ja[0],[I[1]*J[2]-I[2]*J[1],I[2]*J[0]-I[0]*J[2],I[0]*J[1]-I[1]*J[0]]))for(J=0;3>J;J++)Ha[J]*=-1,ja[J][0]*=-1,ja[J][1]*=
-1,ja[J][2]*=-1;var Lb,Ac;I=ja[0][0]+ja[1][1]+ja[2][2]+1;return 1E-4<I?(Lb=.5/Math.sqrt(I),Ac=[(ja[2][1]-ja[1][2])*Lb,(ja[0][2]-ja[2][0])*Lb,(ja[1][0]-ja[0][1])*Lb,.25/Lb]):ja[0][0]>ja[1][1]&&ja[0][0]>ja[2][2]?(Lb=2*Math.sqrt(1+ja[0][0]-ja[1][1]-ja[2][2]),Ac=[.25*Lb,(ja[0][1]+ja[1][0])/Lb,(ja[0][2]+ja[2][0])/Lb,(ja[2][1]-ja[1][2])/Lb]):ja[1][1]>ja[2][2]?(Lb=2*Math.sqrt(1+ja[1][1]-ja[0][0]-ja[2][2]),Ac=[(ja[0][1]+ja[1][0])/Lb,.25*Lb,(ja[1][2]+ja[2][1])/Lb,(ja[0][2]-ja[2][0])/Lb]):(Lb=2*Math.sqrt(1+
ja[2][2]-ja[0][0]-ja[1][1]),Ac=[(ja[0][2]+ja[2][0])/Lb,(ja[1][2]+ja[2][1])/Lb,.25*Lb,(ja[1][0]-ja[0][1])/Lb]),[N,Ha,Qa,Ac,sa]}}();d.dot=k;d.makeMatrixDecomposition=function(x){return[u(r(x))]};d.transformListToMatrix=r})(c);(function(d){function f(q,r){var u=q.exec(r);if(u)return u=q.ignoreCase?u[0].toLowerCase():u[0],[u,r.substr(u.length)]}function k(q,r){r=r.replace(/^\s*/,"");if(q=q(r))return[q[0],q[1].replace(/^\s*/,"")]}function n(q,r){for(var u=q,x=r;u&&x;)u>x?u%=x:x%=u;return q*r/(u+x)}function p(q,
r,u,x,y){for(var D=[],H=[],I=[],N=n(x.length,y.length),J=0;J<N;J++){var sa=r(x[J%x.length],y[J%y.length]);if(!sa)return;D.push(sa[0]);H.push(sa[1]);I.push(sa[2])}return[D,H,function(ja){ja=ja.map(function(Ha,Qa){return I[Qa](Ha)}).join(u);return q?q(ja):ja}]}d.consumeToken=f;d.consumeTrimmed=k;d.consumeRepeated=function(q,r,u){q=k.bind(null,q);for(var x=[];;){var y=q(u);if(!y||(x.push(y[0]),u=y[1],!(y=f(r,u))||""==y[1]))return[x,u];u=y[1]}};d.consumeParenthesised=function(q,r){for(var u=0,x=0;x<r.length&&
(!/\s|,/.test(r[x])||0!=u);x++)if("("==r[x])u++;else if(")"==r[x]&&(u--,0==u&&x++,0>=u))break;q=q(r.substr(0,x));return void 0==q?void 0:[q,r.substr(x)]};d.ignore=function(q){return function(r){r=q(r);return r&&(r[0]=void 0),r}};d.optional=function(q,r){return function(u){return q(u)||[r,u]}};d.consumeList=function(q,r){for(var u=[],x=0;x<q.length;x++){r=d.consumeTrimmed(q[x],r);if(!r||""==r[0])return;void 0!==r[0]&&u.push(r[0]);r=r[1]}if(""==r)return u};d.mergeNestedRepeated=p.bind(null,null);d.mergeWrappedNestedRepeated=
p;d.mergeList=function(q,r,u){for(var x=[],y=[],D=[],H=0,I=0;I<u.length;I++)if("function"==typeof u[I]){var N=u[I](q[H],r[H++]);x.push(N[0]);y.push(N[1]);D.push(N[2])}else!function(J){x.push(!1);y.push(!1);D.push(function(){return u[J]})}(I);return[x,y,function(J){for(var sa="",ja=0;ja<J.length;ja++)sa+=D[ja](J[ja]);return sa}]}})(c);(function(d){function f(n){var p={inset:!1,lengths:[],color:null};if((n=d.consumeRepeated(function(q){var r=d.consumeToken(/^inset/i,q);return r?(p.inset=!0,r):(r=d.consumeLengthOrPercent(q))?
(p.lengths.push(r[0]),r):(r=d.consumeColor(q),r?(p.color=r[0],r):void 0)},/^/,n))&&n[0].length)return[p,n[1]]}var k=function(n,p,q,r){function u(N){return{inset:N,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var x=[],y=[],D=0;D<q.length||D<r.length;D++){var H=q[D]||u(r[D].inset),I=r[D]||u(q[D].inset);x.push(H);y.push(I)}return d.mergeNestedRepeated(n,p,x,y)}.bind(null,function(n,p){for(;n.lengths.length<Math.max(n.lengths.length,p.lengths.length);)n.lengths.push({px:0});for(;p.lengths.length<
Math.max(n.lengths.length,p.lengths.length);)p.lengths.push({px:0});if(n.inset==p.inset&&!!n.color==!!p.color){for(var q,r=[],u=[[],0],x=[[],0],y=0;y<n.lengths.length;y++){var D=d.mergeDimensions(n.lengths[y],p.lengths[y],2==y);u[0].push(D[0]);x[0].push(D[1]);r.push(D[2])}n.color&&p.color&&(p=d.mergeColors(n.color,p.color),u[1]=p[0],x[1]=p[1],q=p[2]);return[u,x,function(H){for(var I=n.inset?"inset ":" ",N=0;N<r.length;N++)I+=r[N](H[0][N])+" ";return q&&(I+=q(H[1])),I}]}},", ");d.addPropertiesHandler(function(n){if((n=
d.consumeRepeated(f,/^,/,n))&&""==n[1])return n[0]},k,["box-shadow","text-shadow"])})(c);(function(d,f){function k(u){return u.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function n(u,x,y){return Math.min(x,Math.max(u,y))}function p(u){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(u))return Number(u)}function q(u,x){return function(y,D){return[y,D,function(H){return k(n(u,x,H))}]}}function r(u){u=u.trim().split(/\s*[\s,]\s*/);if(0!==u.length){for(var x=[],y=0;y<u.length;y++){var D=p(u[y]);if(void 0===D)return;
x.push(D)}return x}}d.clamp=n;d.addPropertiesHandler(r,function(u,x){if(u.length==x.length)return[u,x,function(y){return y.map(k).join(" ")}]},["stroke-dasharray"]);d.addPropertiesHandler(p,q(0,1/0),["border-image-width","line-height"]);d.addPropertiesHandler(p,q(0,1),["opacity","shape-image-threshold"]);d.addPropertiesHandler(p,function(u,x){if(0!=u)return q(0,1/0)(u,x)},["flex-grow","flex-shrink"]);d.addPropertiesHandler(p,function(u,x){return[u,x,function(y){return Math.round(n(1,1/0,y))}]},["orphans",
"widows"]);d.addPropertiesHandler(p,function(u,x){return[u,x,Math.round]},["z-index"]);d.parseNumber=p;d.parseNumberList=r;d.mergeNumbers=function(u,x){return[u,x,k]};d.numberToString=k})(c);(function(d,f){d.addPropertiesHandler(String,function(k,n){if("visible"==k||"visible"==n)return[0,1,function(p){return 0>=p?k:1<=p?n:"visible"}]},["visibility"])})(c);(function(d,f){function k(q){q=q.trim();p.fillStyle="#000";p.fillStyle=q;var r=p.fillStyle;if(p.fillStyle="#fff",p.fillStyle=q,r==p.fillStyle)return p.fillRect(0,
0,1,1),q=p.getImageData(0,0,1,1).data,p.clearRect(0,0,1,1),r=q[3]/255,[q[0]*r,q[1]*r,q[2]*r,r]}function n(q,r){return[q,r,function(u){if(u[3])for(var x=0;3>x;x++)u[x]=Math.round(Math.max(0,Math.min(255,u[x]/u[3])));return u[3]=d.numberToString(d.clamp(0,1,u[3])),"rgba("+u.join(",")+")"}]}f=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");f.width=f.height=1;var p=f.getContext("2d");d.addPropertiesHandler(k,n,"background-color border-bottom-color border-left-color border-right-color border-top-color color fill flood-color lighting-color outline-color stop-color stroke text-decoration-color".split(" "));
d.consumeColor=d.consumeParenthesised.bind(null,k);d.mergeColors=n})(c);(function(d,f){function k(y){function D(){var ja=sa.exec(y);J=ja?ja[0]:void 0}function H(){if("("!==J){var ja=Number(J);return D(),ja}D();ja=N();return")"!==J?NaN:(D(),ja)}function I(){for(var ja=H();"*"===J||"/"===J;){var Ha=J;D();var Qa=H();"*"===Ha?ja*=Qa:ja/=Qa}return ja}function N(){for(var ja=I();"+"===J||"-"===J;){var Ha=J;D();var Qa=I();"+"===Ha?ja+=Qa:ja-=Qa}return ja}var J,sa=/([\+\-\w\.]+|[\(\)\*\/])/g;return D(),N()}
function n(y,D){if("0"==(D=D.trim().toLowerCase())&&0<="px".search(y))return{px:0};if(/^[^(]*$|^calc/.test(D)){D=D.replace(/calc\(/g,"(");var H={};D=D.replace(y,function(ja){return H[ja]=null,"U"+ja});y="U("+y.source+")";for(var I=D.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+y,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),N=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],J=0;J<N.length;)N[J].test(I)?(I=I.replace(N[J],"$1"),J=0):J++;if("D"==I){for(var sa in H){I=
k(D.replace(new RegExp("U"+sa,"g"),"").replace(new RegExp(y,"g"),"*0"));if(!isFinite(I))return;H[sa]=I}return H}}}function p(y,D){return q(y,D,!0)}function q(y,D,H){var I,N=[];for(I in y)N.push(I);for(I in D)0>N.indexOf(I)&&N.push(I);return y=N.map(function(J){return y[J]||0}),D=N.map(function(J){return D[J]||0}),[y,D,function(J){var sa=J.map(function(ja,Ha){return 1==J.length&&H&&(ja=Math.max(ja,0)),d.numberToString(ja)+N[Ha]}).join(" + ");return 1<J.length?"calc("+sa+")":sa}]}var r=n.bind(null,
/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g);f=n.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g);var u=n.bind(null,/deg|rad|grad|turn/g);d.parseLength=r;d.parseLengthOrPercent=f;d.consumeLengthOrPercent=d.consumeParenthesised.bind(null,f);d.parseAngle=u;d.mergeDimensions=q;r=d.consumeParenthesised.bind(null,r);r=d.consumeRepeated.bind(void 0,r,/^/);var x=d.consumeRepeated.bind(void 0,r,/^,/);d.consumeSizePairList=x;r=d.mergeNestedRepeated.bind(void 0,p," ");u=d.mergeNestedRepeated.bind(void 0,
r,",");d.mergeNonNegativeSizePair=r;d.addPropertiesHandler(function(y){if((y=x(y))&&""==y[1])return y[0]},u,["background-size"]);d.addPropertiesHandler(f,p,"border-bottom-width border-image-width border-left-width border-right-width border-top-width flex-basis font-size height line-height max-height max-width outline-width width".split(" "));d.addPropertiesHandler(f,q,"border-bottom-left-radius border-bottom-right-radius border-top-left-radius border-top-right-radius bottom left letter-spacing margin-bottom margin-left margin-right margin-top min-height min-width outline-offset padding-bottom padding-left padding-right padding-top perspective right shape-margin stroke-dashoffset text-indent top vertical-align word-spacing".split(" "))})(c);
(function(d,f){function k(p){return d.consumeLengthOrPercent(p)||d.consumeToken(/^auto/,p)}function n(p){if((p=d.consumeList([d.ignore(d.consumeToken.bind(null,/^rect/)),d.ignore(d.consumeToken.bind(null,/^\(/)),d.consumeRepeated.bind(null,k,/^,/),d.ignore(d.consumeToken.bind(null,/^\)/))],p))&&4==p[0].length)return p[0]}f=d.mergeWrappedNestedRepeated.bind(null,function(p){return"rect("+p+")"},function(p,q){return"auto"==p||"auto"==q?[!0,!1,function(r){r=r?p:q;if("auto"==r)return"auto";r=d.mergeDimensions(r,
r);return r[2](r[0])}]:d.mergeDimensions(p,q)},", ");d.parseBox=n;d.mergeBoxes=f;d.addPropertiesHandler(n,f,["clip"])})(c);(function(d,f){function k(I){return function(N){var J=0;return I.map(function(sa){return sa===x?N[J++]:sa})}}function n(I){return I}function p(I){if("none"==(I=I.toLowerCase().trim()))return[];for(var N,J=/\s*(\w+)\(([^)]*)\)/g,sa=[],ja=0;(N=J.exec(I))&&N.index==ja;){ja=N.index+N[0].length;var Ha=N[1],Qa=H[Ha];if(!Qa)break;N=N[2].split(",");Qa=Qa[0];if(Qa.length<N.length)break;
for(var ec=[],mc=0;mc<Qa.length;mc++){var hc=N[mc];var Ua=Qa[mc];if(void 0===(hc=hc?{A:function(xa){return"0"==xa.trim()?D:d.parseAngle(xa)},N:d.parseNumber,T:d.parseLengthOrPercent,L:d.parseLength}[Ua.toUpperCase()](hc):{a:D,n:ec[0],t:y}[Ua]))return;ec.push(hc)}if(sa.push({t:Ha,d:ec}),J.lastIndex==I.length)return sa}}function q(I){return I.toFixed(6).replace(".000000","")}function r(I,N){if(I.decompositionPair!==N){I.decompositionPair=N;var J=d.makeMatrixDecomposition(I)}if(N.decompositionPair!==
I){N.decompositionPair=I;var sa=d.makeMatrixDecomposition(N)}return null==J[0]||null==sa[0]?[[!1],[!0],function(ja){return ja?N[0].d:I[0].d}]:(J[0].push(0),sa[0].push(1),[J,sa,function(ja){var Ha=d.quat(J[0][3],sa[0][3],ja[5]);return d.composeMatrix(ja[0],ja[1],ja[2],Ha,ja[4]).map(q).join(",")}])}function u(I){return I.replace(/(x|y|z|3d)?$/,"3d")}var x=null,y={px:0},D={deg:0},H={matrix:["NNNNNN",[x,x,0,0,x,x,0,0,0,0,1,0,x,x,0,1],n],matrix3d:["NNNNNNNNNNNNNNNN",n],rotate:["A"],rotatex:["A"],rotatey:["A"],
rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",k([x,x,1]),n],scalex:["N",k([x,1,1]),k([x,1])],scaley:["N",k([1,x,1]),k([1,x])],scalez:["N",k([1,1,x])],scale3d:["NNN",n],skew:["Aa",null,n],skewx:["A",null,k([x,D])],skewy:["A",null,k([D,x])],translate:["Tt",k([x,x,y]),n],translatex:["T",k([x,y,y]),k([x,y])],translatey:["T",k([y,x,y]),k([y,x])],translatez:["L",k([y,y,x])],translate3d:["TTL",n]};d.addPropertiesHandler(p,function(I,N){var J=d.makeMatrixDecomposition&&!0,sa=!1;if(!I.length||
!N.length){I.length||(sa=!0,I=N,N=[]);for(var ja=0;ja<I.length;ja++){var Ha=I[ja].t,Qa=I[ja].d,ec="scale"==Ha.substr(0,5)?1:0;N.push({t:Ha,d:Qa.map(function(La){if("number"==typeof La)return ec;var Fd={},na;for(na in La)Fd[na]=ec;return Fd})})}}Qa=[];var mc=[],hc=[];if(I.length!=N.length){if(!J)return;var Ua=r(I,N);Qa=[Ua[0]];mc=[Ua[1]];hc=[["matrix",[Ua[2]]]]}else for(ja=0;ja<I.length;ja++){Ha=I[ja].t;var xa=N[ja].t,rc=I[ja].d,Lb=N[ja].d;Ua=H[Ha];var Ac=H[xa];if("perspective"==Ha&&"perspective"==
xa||!("matrix"!=Ha&&"matrix3d"!=Ha||"matrix"!=xa&&"matrix3d"!=xa)){if(!J)return;Ua=r([I[ja]],[N[ja]]);Qa.push(Ua[0]);mc.push(Ua[1]);hc.push(["matrix",[Ua[2]]])}else{if(Ha!=xa)if(Ua[2]&&Ac[2]&&Ha.replace(/[xy]/,"")==xa.replace(/[xy]/,""))Ha=Ha.replace(/[xy]/,""),rc=Ua[2](rc),Lb=Ac[2](Lb);else{if(!Ua[1]||!Ac[1]||u(Ha)!=u(xa)){if(!J)return;Ua=r(I,N);Qa=[Ua[0]];mc=[Ua[1]];hc=[["matrix",[Ua[2]]]];break}Ha=u(Ha);rc=Ua[1](rc);Lb=Ac[1](Lb)}Ac=[];xa=[];for(var Xb=[],qd=0;qd<rc.length;qd++)Ua=("number"==typeof rc[qd]?
d.mergeNumbers:d.mergeDimensions)(rc[qd],Lb[qd]),Ac[qd]=Ua[0],xa[qd]=Ua[1],Xb.push(Ua[2]);Qa.push(Ac);mc.push(xa);hc.push([Ha,Xb])}}sa&&(I=Qa,Qa=mc,mc=I);return[Qa,mc,function(La){return La.map(function(Fd,na){Fd=Fd.map(function(Va,yd){return hc[na][1][yd](Va)}).join(",");return"matrix"==hc[na][0]&&16==Fd.split(",").length&&(hc[na][0]="matrix3d"),hc[na][0]+"("+Fd+")"}).join(" ")}]},["transform"]);d.transformToSvgMatrix=function(I){I=d.transformListToMatrix(p(I));return"matrix("+q(I[0])+" "+q(I[1])+
" "+q(I[4])+" "+q(I[5])+" "+q(I[12])+" "+q(I[13])+")"}})(c);(function(d){function f(k){return k=100*Math.round(k/100),k=d.clamp(100,900,k),400===k?"normal":700===k?"bold":String(k)}d.addPropertiesHandler(function(k){k=Number(k);if(!(isNaN(k)||100>k||900<k||0!=k%100))return k},function(k,n){return[k,n,f]},["font-weight"])})(c);(function(d){function f(r){return d.consumeToken(/^(left|center|right|top|bottom)\b/i,r)||d.consumeLengthOrPercent(r)}function k(r,u){if((u=d.consumeRepeated(f,/^/,u))&&""==
u[1]&&(u=u[0],u[0]=u[0]||"center",u[1]=u[1]||"center",3==r&&(u[2]=u[2]||{px:0}),u.length==r)){if(/top|bottom/.test(u[0])||/left|right/.test(u[1]))r=u[0],u[0]=u[1],u[1]=r;if(/left|right|center|Object/.test(u[0])&&/top|bottom|center|Object/.test(u[1]))return u.map(function(x){return"object"==typeof x?x:p[x]})}}function n(r){if(r=d.consumeRepeated(f,/^/,r)){for(var u=r[0],x=[{"%":50},{"%":50}],y=0,D=!1,H=0;H<u.length;H++){var I=u[H];if("string"==typeof I)D=/bottom|right/.test(I),y={left:0,right:0,center:y,
top:1,bottom:1}[I],x[y]=p[I],"center"==I&&y++;else{if(D){D=void 0;var N={};for(D in I)N[D]=-I[D];I=N;I["%"]=(I["%"]||0)+100}x[y]=I;y++;D=!1}}return[x,r[1]]}}var p={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},q=d.mergeNestedRepeated.bind(null,d.mergeDimensions," ");d.addPropertiesHandler(k.bind(null,3),q,["transform-origin"]);d.addPropertiesHandler(k.bind(null,2),q,["perspective-origin"]);d.consumePosition=n;d.mergeOffsetList=q;q=d.mergeNestedRepeated.bind(null,q,", ");
d.addPropertiesHandler(function(r){if((r=d.consumeRepeated(n,/^,/,r))&&""==r[1])return r[0]},q,["background-position","object-position"])})(c);(function(d){var f=d.consumeParenthesised.bind(null,d.parseLengthOrPercent),k=d.consumeRepeated.bind(void 0,f,/^/),n=d.mergeNestedRepeated.bind(void 0,d.mergeDimensions," "),p=d.mergeNestedRepeated.bind(void 0,n,",");d.addPropertiesHandler(function(q){var r=d.consumeToken(/^circle/,q);return r&&r[0]?["circle"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,
/^\(/)),f,d.ignore(d.consumeToken.bind(void 0,/^at/)),d.consumePosition,d.ignore(d.consumeToken.bind(void 0,/^\)/))],r[1])):(r=d.consumeToken(/^ellipse/,q))&&r[0]?["ellipse"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),k,d.ignore(d.consumeToken.bind(void 0,/^at/)),d.consumePosition,d.ignore(d.consumeToken.bind(void 0,/^\)/))],r[1])):(q=d.consumeToken(/^polygon/,q))&&q[0]?["polygon"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),d.optional(d.consumeToken.bind(void 0,
/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),d.consumeSizePairList,d.ignore(d.consumeToken.bind(void 0,/^\)/))],q[1])):void 0},function(q,r){if(q[0]===r[0])return"circle"==q[0]?d.mergeList(q.slice(1),r.slice(1),["circle(",d.mergeDimensions," at ",d.mergeOffsetList,")"]):"ellipse"==q[0]?d.mergeList(q.slice(1),r.slice(1),["ellipse(",d.mergeNonNegativeSizePair," at ",d.mergeOffsetList,")"]):"polygon"==q[0]&&q[1]==r[1]?d.mergeList(q.slice(2),r.slice(2),["polygon(",q[1],p,")"]):void 0},["shape-outside"])})(c);
(function(d,f){function k(q,r){r.concat([q]).forEach(function(u){u in document.documentElement.style&&(n[q]=u);p[u]=q})}var n={},p={};k("transform",["webkitTransform","msTransform"]);k("transformOrigin",["webkitTransformOrigin"]);k("perspective",["webkitPerspective"]);k("perspectiveOrigin",["webkitPerspectiveOrigin"]);d.propertyName=function(q){return n[q]||q};d.unprefixedPropertyName=function(q){return p[q]||q}})(c)})();(function(){if(void 0===document.createElement("div").animate([]).oncancel){var g=
window.performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};var a=function(f,k,n){(this||ie).target=f;(this||ie).currentTime=k;(this||ie).timelineTime=n;(this||ie).type="cancel";(this||ie).bubbles=!1;(this||ie).cancelable=!1;(this||ie).currentTarget=f;(this||ie).defaultPrevented=!1;(this||ie).eventPhase=Event.AT_TARGET;(this||ie).timeStamp=Date.now()},d=window.Element.prototype.animate;window.Element.prototype.animate=function(f,k){f=d.call(this||ie,f,k);
f._cancelHandlers=[];f.oncancel=null;var n=f.cancel;f.cancel=function(){n.call(this||ie);var r=new a(this||ie,null,g()),u=(this||ie)._cancelHandlers.concat((this||ie).oncancel?[(this||ie).oncancel]:[]);setTimeout(function(){u.forEach(function(x){x.call(r.target,r)})},0)};var p=f.addEventListener;f.addEventListener=function(r,u){"function"==typeof u&&"cancel"==r?(this||ie)._cancelHandlers.push(u):p.call(this||ie,r,u)};var q=f.removeEventListener;return f.removeEventListener=function(r,u){"cancel"==
r?(r=(this||ie)._cancelHandlers.indexOf(u),0<=r&&(this||ie)._cancelHandlers.splice(r,1)):q.call(this||ie,r,u)},f}}})();(function(g){var a=document.documentElement,d=null,f=!1;try{var k="0"==getComputedStyle(a).getPropertyValue("opacity")?"1":"0";d=a.animate({opacity:[k,k]},{duration:1});d.currentTime=0;f=getComputedStyle(a).getPropertyValue("opacity")==k}catch(p){}finally{d&&d.cancel()}if(!f){var n=window.Element.prototype.animate;window.Element.prototype.animate=function(p,q){return window.Symbol&&
Symbol.iterator&&Array.prototype.from&&p[Symbol.iterator]&&(p=Array.from(p)),Array.isArray(p)||null===p||(p=g.convertToArrayForm(p)),n.call(this||ie,p,q)}}})(b)}();var hi=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js");hi.stringToEasing=sw;hi.obj=bj;hi.promise=yj;hi.fun=cp;hi.num=Gm;hi.properties=Pq;hi.arr=aj;hi.string=Xj;hi.Color=Bn;hi.styleProps=az;hi.addPathAttributes=bz;hi.flubber=hH;hi.Bezier=m3;hi.ShadowObject=Pr;var Nx=bd("e",{inQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",
inCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",inQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",inQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",inSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",inExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",inCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",inBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",outQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",outCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",outQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",
outQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",outSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",outExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",outCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",outBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",inOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",inOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",inOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",inOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",inOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)",
inOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",inOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",inOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",linear:"cubic-bezier(0.5, 0.5, 0.5, 0.5)"});hi.easings=Nx;hi.easings=Nx;hi.stringToEasing=sw;var iH=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),g=c.hasOwnProperty("AnimationQueue")&&"function"===typeof c.AnimationQueue?c.AnimationQueue:c.AnimationQueue=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){this.morph=a;this.animations=[]}},{key:"maskedProps",value:function(a){return 0<this.animations.length?hi.obj.merge(this.animations.map(function(d){return d.getAnimationProps(a)[0]})):{}}},{key:"animationsActive",get:function(){return!0}},{key:"registerAnimation",value:function(a){var d=this,f=new hi.PropertyAnimation(this,this.morph,a);this.morph.makeDirty();return this.morph.withMetaDo({animation:f},function(){var k=
f.affectsMorph&&d.animations.find(function(p){return p.equals(f)});if(!k){var n;if(n=d.animations.find(function(p){return p.canMerge(f)}))return n.mergeWith(f),n;if(f.affectsMorph)return f.assignProps(),d.animations.push(f),f}return k})}},{key:"startAnimationsFor",value:function(a){for(var d=0;d<this.animations.length;d++)this.animations[d].start(a)}},{key:"startSvgAnimationsFor",value:function(a,d){this.animations.forEach(function(f){return f.startSvg(a,d)})}},{key:"removeAnimation",value:function(a){hi.arr.remove(this.animations,
a)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"AnimationQueue"}}],c,{pathInPackage:function(){return"./rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2043,end:3399})}(void 0);hi.AnimationQueue=iH;hi.AnimationQueue=iH;var YS=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),
g=c.hasOwnProperty("PropertyAnimation")&&"function"===typeof c.PropertyAnimation?c.PropertyAnimation:c.PropertyAnimation=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d,f){var k=this;this.queue=a;this.morph=d;if(d.isPath&&"fill"in f){var n=d.fill||hi.Color.transparent,p=f.fill;f.customTween=hi.fun.compose(function(D){d.fill=
n.interpolate(D,p);return D},f.customTween||function(D){});delete f.fill;d.fill=n}if("dropShadow"in f){var q=d.dropShadow||new hi.ShadowObject({blur:0,distance:0,spread:0}),r=f.dropShadow;f.customTween=hi.fun.compose(function(D){d.withMetaDo({metaInteraction:!0},function(){d.dropShadow=q.interpolate(D,r||new hi.ShadowObject({blur:0,distance:0,spread:0}));1===D&&(d.dropShadow=r)});return D},f.customTween||function(D){});delete f.dropShadow;d.dropShadow=q}if("visible"in f&&f.visible!==d.visible){var u=
a.originalOpacity,x=void 0===u?d.opacity:u;a.originalOpacity=x;var y=f.visible;f.customTween=hi.fun.compose(function(D){if(k._otherVisibleTransformationInProgress)return D;0===D&&!0===y&&(d.visible=!0);d.opacity=y?hi.num.interpolate(D,0,x):hi.num.interpolate(D,x,0);1===D&&(d.visible=y,d.opacity=x,delete a.originalOpacity);return D},f.customTween||function(D){});this.queue.animations.forEach(function(D){return D._otherVisibleTransformationInProgress=!0});delete f.visible}this.config=this.convertBounds(f);
this.needsAnimation={svg:d.isSvgMorph,path:d.isPath};this.capturedProperties=hi.obj.select(this.morph,this.propsToCapture)}},{key:"propsToCapture",get:function(){return["fill","origin"]}},{key:"stillNeedsAnimations",get:function(){return hi.obj.values(this.needsAnimation).some(Boolean)}},{key:"asPromise",value:function(){var a=this;return this._promise||(this._promise=new Promise(function(d,f){a.resolveCallback=function(){a.onFinish(a);a.subAnimations?a.subAnimations.then(d):d(a.morph)}}))}},{key:"finish",
value:function(a){var d=this;this.config.scale&&this.morph.whenRendered().then(function(){return d.morph.withAllSubmorphsDo(function(f){return f.isText&&f.invalidateTextLayout(!0,!0)})});this.needsAnimation[a]=!1;this.stillNeedsAnimations||(this.queue.removeAnimation(this),this.resolveCallback?this.resolveCallback():this.onFinish())}},{key:"convertBounds",value:function(a){var d=a.bounds,f=a.origin,k=a.rotation,n=a.scale;f=f||this.morph.origin;k=k||this.morph.rotation;n=n||this.morph.scale;return d?
Object.assign({},hi.obj.dissoc(a,["bounds"]),{origin:f,rotation:k,scale:n,position:d.topLeft().addPt(f),extent:d.extent()}):a}},{key:"equals",value:function(a){return!this.config.customTween&&!a.config.customTweem&&hi.obj.equals(this.animatedProps,a.animatedProps)}},{key:"canMerge",value:function(a){return this.easing===a.easing&&this.duratio===a.duration}},{key:"mergeWith",value:function(a){var d=this.config.customTween;Object.assign(this.morph,a.animatedProps);Object.assign(this.config,a.config);
this.config.customTween=function(f){d&&d(f);a.config.customTween&&a.config.customTween(f);return f};this.afterProps=this.gatherAnimationProps()}},{key:"affectsMorph",get:function(){var a=this;return!!this.config.customTween||hi.properties.any(this.animatedProps,function(d,f){return!hi.obj.equals(d[f],a.morph[f])})}},{key:"animatedProps",get:function(){return hi.obj.dissoc(this.config,["customTween","easing","onFinish","duration"])}},{key:"easing",get:function(){return this.config.easing||hi.easings.inOutQuad}},
{key:"onFinish",get:function(){return this.config.onFinish||function(){}}},{key:"setonFinish",value:function(a){this.config.onFinish=a}},{key:"duration",get:function(){return this.config.duration||1E3}},{key:"getChangedProps",value:function(a,d){var f=[],k;for(k in a)hi.obj.equals(d[k],a[k])&&f.push(k);return[hi.obj.dissoc(a,f),hi.obj.dissoc(d,f)]}},{key:"getAnimationProps",value:function(a){var d=this.getChangedProps(this.beforeProps[a],this.afterProps[a]),f=Wb(d,2);d=f[0];f=f[1];var k=this.capturedProperties.fill,
n=this.config.fill;this.morph.isPolygon&&"css"===a&&(k=n=!1,delete d.background,delete f.background,delete d.backgroundImage,delete f.backgroundImage);"none"===d.filter&&f.boxShadow&&(delete d.filter,d.boxShadow="none");"none"===f.filter&&d.boxShadow&&(delete f.filter,f.boxShadow="none");k&&n&&(k.isGradient||n.isGradient)&&(this.tweenGradient=this.interpolate("gradient",k,n));a=fa(hi.arr.union(hi.obj.keys(d),hi.obj.keys(f)));var p;try{for(a.s();!(p=a.n()).done;){var q=p.value;q in d||(d[q]=f[q]);
q in f||(f[q]=d[q])}}catch(r){a.e(r)}finally{a.f()}return[hi.obj.isEmpty(d)?!1:d,hi.obj.isEmpty(f)?!1:f]}},{key:"gatherAnimationProps",value:function(){var a=this.morph,d=a.isSvgMorph,f=a.isPath,k=a.isPolygon,n={};n.css=hi.styleProps(this.morph);d&&(n.svg=addSvgAttributes(a,{}));f&&(n.path=hi.addPathAttributes(a,{}));k&&(n.polygon=hi.addPathAttributes(a,{}));return n}},{key:"assignProps",value:function(){var a=this.morph.styleClasses;this.beforeProps=this.gatherAnimationProps();Object.assign(this.morph,
this.animatedProps);this.afterProps=this.gatherAnimationProps();this.config.styleClasses&&(this.morph._animatedStyleClasses={removed:hi.arr.withoutAll(a,this.morph.styleClasses),added:hi.arr.withoutAll(this.morph.styleClasses,a),animation:this})}},{key:"interpolate",value:function(a,d,f){var k=this;switch(a){case "scrollTop":case "scrollLeft":return function(n){return hi.num.interpolate(n,d,f)};case "d":return hi.flubber.interpolate(d,f);case "stroke-width":return function(n){return hi.num.interpolate(n,
d,f)};case "stroke":return function(n){return hi.Color.fromString(d).interpolate(n,hi.Color.fromString(f),k.morph.bounds())};case "gradient":return function(n){return d.interpolate(n,f,k.morph.bounds())};case "fill":return d=hi.Color.fromString(d),f=hi.Color.fromString(f),function(n){return d.interpolate(n,f)}}}},{key:"startSvg",value:function(a,d){var f=this;if(this.needsAnimation[d]){this.needsAnimation[d]=!1;var k=this.getAnimationProps(d),n=Wb(k,2);k=n[0];n=n[1];var p={},q=hi.stringToEasing(this.easing),
r;for(r in k)p[r]=this.interpolate(r,k[r],n[r]);var u;requestAnimationFrame(function D(y){u||(u=y);y-=u;if(1<y/f.duration)return f.finish(d);for(var H in p)p[H]&&a.setAttribute(H,p[H](q(y/f.duration)));requestAnimationFrame(D)})}}},{key:"start",value:function(a){if(!this.active)try{this.active=!0;var d=this.getAnimationProps("css"),f=Wb(d,2),k=f[0],n=f[1];a&&this.tween(a,k,n);if(this.config.origin){var p=this.capturedProperties.origin,q=this.config.origin,r=a.childNodes[0];r&&this.tween(r,r.style.top?
{left:"".concat(p.x,"px"),top:"".concat(p.y,"px")}:{transform:"translate3d(".concat(p.x,"px, ").concat(p.y,"px, 0px)")},r.style.top?{left:"".concat(p.x,"px"),top:"".concat(p.y,"px")}:{transform:"translate3d(".concat(q.x,"px, ").concat(q.y,"px, 0px)")})}}catch(u){this.active=!1}}},{key:"tween",value:function(a,d,f){var k=this,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,p=this.animatedProps.scroll,q=this.config.customTween,r=!1,u=function(){n&&(k.finish("css"),k.morph.makeDirty())};
if(q){var x,y=hi.stringToEasing(this.easing);requestAnimationFrame(function rc(xa){x||(x=xa);var Lb=Math.min(1,(xa-x)/k.duration);k.morph.dontRecordChangesWhile(function(){return q(y(Lb))});if(1<=Lb)return k.finish("css");requestAnimationFrame(rc)});r=!0}if(p){var D,H=this.morph.env.eventDispatcher.eventState;r=hi.promise.deferred();var I=r.promise,N=r.resolve,J=this.interpolate("scrollLeft",a.scrollLeft,p.x),sa=this.interpolate("scrollTop",a.scrollTop,p.y),ja=hi.stringToEasing(this.easing);I.debounce=
function(){};requestAnimationFrame(function rc(xa){D||(D=xa);xa-=D;var Lb=Math.min(1,xa/k.duration);a.scrollTop=sa(ja(Lb));a.scrollLeft=J(ja(Lb));if(1<=xa/k.duration)return H.scroll.interactiveScrollInProgress=null,N(),k.finish("css");requestAnimationFrame(rc)});r=!0}if(this.tweenGradient&&!this.morph.isPolygon){var Ha,Qa=hi.stringToEasing(this.easing);delete d.backgroundImage;delete f.backgroundImage;delete d.background;delete f.background;requestAnimationFrame(function rc(xa){Ha||(Ha=xa);xa-=Ha;
if(1<=xa/k.duration)return k.finish("css");a.style.setProperty("background-image",k.tweenGradient(Qa(xa/k.duration)));requestAnimationFrame(rc)});r=!0}else this.tweenGradient&&(r=!0);if(a&&d&&f){p={};I={};for(var ec in d)p[hi.string.camelize(ec)]=d[ec];for(var mc in f)I[hi.string.camelize(mc)]=f[mc];try{var hc=a.animate([p,I],{duration:this.duration,easing:this.easing,fill:"forwards",composite:"replace"});hc.onfinish=function(){u();setTimeout(function(){return hc.cancel()},200)};r=!0}catch(Ua){r=
!1}}r||u()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PropertyAnimation"}}],c,{pathInPackage:function(){return"./rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3407,end:17073})}(void 0);hi.PropertyAnimation=YS;hi.PropertyAnimation=YS;var Cj=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js");
Cj.cumulativeOffset=tw;Cj.createIFrame=function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"about:blank",g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new Cj.Rectangle(0,0,700,700);return new Promise(function(a,d){if(!b)throw Error("Need parent element!");var f=document.createElement("iframe");f.style.position="absolute";f.style.top=g.top()+"px";f.style.left=g.left()+"px";f.style.width=g.width+"px";f.style.height=g.height+"px";f.src=c;var k=!1;f.onload=function(n){k=
!0;f.onload=null;a(f)};Cj.promise.waitFor(1E3,function(){return!!k})["catch"](function(n){return d(Error("iframe load timeout"))});b.appendChild(f)})};Cj.requestAnimationFramePolyfill=function(b){for(var c=0,g=["ms","moz","webkit","o"],a=0;a<g.length&&!b.requestAnimationFrame;++a)b.requestAnimationFrame=b[g[a]+"RequestAnimationFrame"],b.cancelAnimationFrame=b[g[a]+"CancelAnimationFrame"]||b[g[a]+"CancelRequestAnimationFrame"];b.requestAnimationFrame||(b.requestAnimationFrame=function(d,f){var k=Date.now(),
n=Math.max(0,16-(k-c));f=b.setTimeout(function(){d(k+n)},n);c=k+n;return f});b.cancelAnimationFrame||(b.cancelAnimationFrame=function(d){clearTimeout(d)})};Cj.createDOMEnvironment_browser=function(){return BC.apply(this,arguments)};Cj.createDOMEnvironment_node=function(){System.decanonicalize("lively.morphic/").replace(/file:\/\//,"");var b=System._nodeRequire("jsdom"),c=b.createVirtualConsole().sendTo(console);return new Promise(function(g,a){b.env("<div></div>",["https://code.jquery.com/pep/0.4.1/pep.js"],
{virtualConsole:c},function(d,f){return d?a(d):g(new Cj.DomEnvironment(f,f.document,function(){return f.close()}))})})};Cj.createDOMEnvironment=ZK;Cj.defaultDOMEnv=CC;Cj.setCSSDef=function(b,c,g){Array.from(b.childNodes).forEach(function(a){return b.removeChild(a)});c=document.createTextNode(c);b.styleSheet?b.styleSheet.cssText=c.nodeValue:b.appendChild(c);return b};Cj.addCSSDef=function(b,c,g){var a=document.createElement("style");a.type="text/css";b&&a.setAttribute("id",b);Cj.setCSSDef(a,c,g);(g.head||
g).appendChild(a);return a};Cj.addOrChangeCSSDeclaration=zq;Cj.addOrChangeLinkedCSS=nu;Cj.promise=yj;Cj.obj=bj;Cj.arr=aj;Cj.Rectangle=fn;Cj.cumulativeOffset=tw;Cj.createDOMEnvironment=ZK;(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),g=c.hasOwnProperty("DomEnvironment")&&"function"===typeof c.DomEnvironment?c.DomEnvironment:c.DomEnvironment=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d,f){Cj.requestAnimationFramePolyfill(a);this.window=a;this.document=d;this.destroyFn=f}},{key:"destroy",value:function(){"function"===typeof this.destroyFn&&this.destroyFn()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DomEnvironment"}}],c,{pathInPackage:function(){return"./rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3057,end:3359})})(void 0);(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),g=c.hasOwnProperty("IFramedDomEnvironment")&&"function"===typeof c.IFramedDomEnvironment?c.IFramedDomEnvironment:c.IFramedDomEnvironment=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),
value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a.contentWindow,a.contentWindow.document,function(){a.contentWindow&&a.contentWindow.close();a.parentNode&&a.parentNode.removeChild(a)});this.iframe=a}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"IFramedDomEnvironment"}}],c,{pathInPackage:function(){return"./rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3361,end:3675})})(Cj.DomEnvironment);Cj._defaultEnv=Cj._defaultEnv||void 0;Cj.defaultDOMEnv=CC;Cj.addOrChangeCSSDeclaration=zq;Cj.addOrChangeLinkedCSS=nu;var jH=function(){return function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.document;return function(c,g,a){var d=g||void 0;"undefined"===typeof a&&(a=g,d=void 0);var f=c.split(".");
if(1<f.length)for(c=f.shift(),g=0;g<f.length;g++){var k=f[g],n;-1<(n=k.indexOf("#"))&&(k.slice(n+1),k.slice(0,n))}g=c.split("#");1<g.length&&(c=g[0]);c=b.createElement(c);if(d){for(var p in d)"style"!==p&&"dataset"!==p&&"attributes"!==p&&(c[p]=d[p]);if(p=d.style)for(var q in p)c.style[q]=p[q];if(q=d.dataset)if(c.dataset)for(var r in q)c.dataset[r]=q[r];else for(r in q)c.setAttribute("data-"+r,q[r]);if(d=d.attributes)for(var u in d)d[u]&&Cj.obj.isBoolean(d[u])?c.toggleAttribute(u):c.setAttribute(u,
d[u])}a||(a="");if("string"===typeof a)c.appendChild(b.createTextNode(a));else if(Array.isArray(a))for(g=0;g<a.length;g++)u=a[g],c.appendChild("string"===typeof u?b.createTextNode(u):u);else c.appendChild("string"===typeof a?b.createTextNode(a):a);return c}}}();Cj.hyperscriptFnForDocument=jH;Cj.hyperscriptFnForDocument=jH;var Ai=window.lively.FreezerRuntime.recorderFor("lively.resources/src/helpers.js");Ai.applyExclude=uw;Ai.parseQuery=ys;Ai.stringifyQuery=dz;Ai.withRelativePartsResolved=DC;Ai._relativePathBetween_checkPathes=
function(b,c){b.startsWith("/")&&(b=b.slice(1));c.startsWith("/")&&(c=c.slice(1));b=b.split("/");c=c.split("/");for(var g=0;g<c.length&&b[g]&&b[g]==c[g];g++);return"../".repeat(Math.max(0,c.length-g-1))+b.splice(g,b.length).join("/")};Ai.relativePathBetween=EC;Ai.join=$K;Ai.parent=aL;Ai.parents=bL;Ai.resource=Am;Ai.createFiles=Aq;Ai.registerExtension=Bq;Ai.unregisterExtension=ou;Ai.applyExclude=uw;Ai.parseQuery=ys;Ai.stringifyQuery=dz;Ai.slashEndRe=/\/+$/;Ai.slashStartRe=/^\/+/;Ai.protocolRe=/^[a-z0-9-_\.]+:/;
Ai.urlRe=/^([^:\/]+):\/\/([^\/]*)(.*)/;Ai.slashslashRe=/^\/\/[^\/]+/;Ai.pathDotRe=/\/\.\//g;Ai.pathDoubleDotRe=/\/[^\/]+\/\.\./;Ai.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Ai.withRelativePartsResolved=DC;Ai.relativePathBetween=EC;Ai.join=$K;Ai.parent=aL;Ai.parents=bL;var Ox=Ai.extensions||[];Ai.extensions=Ox;Ai.extensions=Ox;Ai.resource=Am;Ai.createFiles=Aq;Ai.registerExtension=Bq;Ai.unregisterExtension=ou;var kH=/^file:\/\/\/[a-z]:\//i;Ai.windowsURLPrefixRe=kH;Ai.windowsURLPrefixRe=kH;var lH=/^[a-z]:\//i;
Ai.windowsPathPrefixRe=lH;Ai.windowsPathPrefixRe=lH;var mH=/^[a-z]:\/$/i;Ai.windowsRootPathRe=mH;Ai.windowsRootPathRe=mH;var lk=window.lively.FreezerRuntime.recorderFor("lively.resources/src/resource.js");lk.nyi=function(b,c){throw Error("".concat(c," for ").concat(b.constructor.name," not yet implemented"));};lk.resource=Am;lk.parseQuery=ys;lk.withRelativePartsResolved=DC;lk.relativePathBetween=EC;lk.windowsPathPrefixRe=lH;lk.stringifyQuery=dz;lk.ensureFolder=vf;lk.slashEndRe=/\/+$/;lk.slashStartRe=
/^\/+/;lk.protocolRe=/^[a-z0-9-_\.]+:/;lk.slashslashRe=/^\/\/[^\/]+/;var so=bd("a$",function(){function b(c){Sd(this,b);if(!c)throw Error("Cannot create resource without url");this.url=String(c);this.binary=!1;this.linkCount=this._isLink=this._isDirectory=this.mode=this.group=this.user=this.contentType=this.type=this.size=this.etag=this.created=this.lastModified=void 0}uc(b,null,[{key:"fromProps",value:function(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(new this(c.url)).assignProperties(c)}}]);
uc(b,[{key:"equals",value:function(c){if(!c||this.constructor!==c.constructor)return!1;var g=this.url;c=c.url;"/"===g[g.length-1]&&(g=g.slice(0,-1));"/"===c[c.length-1]&&(c=c.slice(0,-1));return g===c}},{key:"toString",value:function(){return"".concat(this.constructor.name,'("').concat(this.url,'")')}},{key:"newResource",value:function(c){return lk.resource(c,this)}},{key:"path",value:function(){var c=this.url.replace(lk.protocolRe,"").replace(lk.slashslashRe,"");return""===c?"/":c}},{key:"pathWithoutQuery",
value:function(){return this.path().split("?")[0]}},{key:"name",value:function(){var c=this.path(),g=c.lastIndexOf("?");-1<g&&(c=c.slice(0,g));c.endsWith("/")&&(c=c.slice(0,-1));c=c.split("/");return decodeURIComponent(c[c.length-1])}},{key:"ext",value:function(){var c=this.url;if(c.endsWith("/"))return"";c=c.match(/\.([^\/\.]+$)/)||["",""];c=Wb(c,2);c[0];return c[1].toLowerCase()}},{key:"nameWithoutExt",value:function(){var c=this.name(),g=c.lastIndexOf(".");0<g&&(c=c.slice(0,g));return c}},{key:"scheme",
value:function(){return this.url.split(":")[0]}},{key:"host",value:function(){var c=this.url.indexOf("://");if(-1===c)return null;c=this.url.slice(c+3);var g=c.indexOf("/");return c.slice(0,-1<g?g:c.length)}},{key:"schemeAndHost",value:function(){return this.isRoot()?this.asFile().url:this.url.slice(0,this.url.length-this.path().length)}},{key:"parent",value:function(){return this.isRoot()?null:this.newResource(this.url.split("?")[0].replace(lk.slashEndRe,"").split("/").slice(0,-1).join("/")+"/")}},
{key:"parents",value:function(){for(var c=[],g=this.parent();g;)c.unshift(g),g=g.parent();return c}},{key:"isParentOf",value:function(c){var g=this;return c.schemeAndHost()===this.schemeAndHost()&&c.parents().some(function(a){return a.equals(g)})}},{key:"query",value:function(){return lk.parseQuery(this.url)}},{key:"withQuery",value:function(c){c=Object.assign({},this.query(),{},c);var g=this.url.split("?");g=Wb(g,1)[0];c=lk.stringifyQuery(c);return this.newResource("".concat(g,"?").concat(c))}},
{key:"commonDirectory",value:function(c){if(c.schemeAndHost()!==this.schemeAndHost())return null;if(this.isDirectory()&&this.equals(c))return this;if(this.isRoot())return this.asDirectory();if(c.isRoot())return c.asDirectory();c=c.parents();for(var g=this.parents(),a=this.root(),d=0;d<g.length;d++){var f=g[d],k=c[d];if(!k||!f.equals(k))break;a=f}return a}},{key:"withRelativePartsResolved",value:function(){var c=this.path(),g=lk.withRelativePartsResolved(c);if(g===c)return this;g.startsWith("/")&&
(g=g.slice(1));g[1]===":".startsWith("/")?g=g.slice(1):":"===g[1]&&g.match(lk.windowsPathPrefixRe)&&(g=g.slice(3));return this.newResource(this.root().url+g)}},{key:"relativePathFrom",value:function(c){return lk.relativePathBetween(c.url,this.url)}},{key:"withPath",value:function(c){return(this.isRoot()?this:this.root()).join(c)}},{key:"join",value:function(c){return this.newResource(this.url.replace(lk.slashEndRe,"")+"/"+c.replace(lk.slashStartRe,""))}},{key:"isRoot",value:function(){return"/"===
this.path()}},{key:"isFile",value:function(){return!this.isRoot()&&!this.url.match(lk.slashEndRe)}},{key:"isDirectory",value:function(){return!this.isFile()}},{key:"asDirectory",value:function(){return this.url.endsWith("/")?this:this.newResource(lk.ensureFolder(this.url))}},{key:"root",value:function(){if(this.isRoot())return this;var c=this.url.slice(0,-this.path().length);return this.newResource(c+"/")}},{key:"asFile",value:function(){return this.url.endsWith("/")?this.newResource(this.url.replace(lk.slashEndRe,
"")):this}},{key:"assignProperties",value:function(c){for(var g in c)if("url"!==g){var a=g;if("isLink"===g||"isDirectory"===g)a="_"+g;this[a]=c[g]}return this}},{key:"ensureExistance",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.exists();case 2:if(!f.sent){f.next=4;break}return f.abrupt("return",this);case 4:return f.next=6,this.parent().ensureExistance();case 6:if(!this.isFile()){f.next=
11;break}f.next=9;return this.write(a||"");case 9:f.next=13;break;case 11:return f.next=13,this.mkdir();case 13:return f.abrupt("return",this);case 14:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"copyTo",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f=this,k,n,p,q,r=arguments;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:k=1<r.length&&void 0!==r[1]?r[1]:!0;if(!this.isFile()){u.next=14;break}n=
a.isFile()?a:a.join(this.name());if(!k){u.next=6;break}u.next=6;return n.parent().ensureExistance();case 6:return u.t0=n,u.next=9,this.read();case 9:return u.t1=u.sent,u.next=12,u.t0.write.call(u.t0,u.t1);case 12:u.next=26;break;case 14:if(a.isDirectory()){u.next=16;break}throw Error("Cannot copy a directory to a file!");case 16:return u.next=18,this.dirList("infinity");case 18:return p=u.sent,q=p.map(function(x){return a.join(x.relativePathFrom(f))}),u.next=22,a.ensureExistance();case 22:return u.next=
24,p.reduceRight(function(x,y,D){return function(){return Promise.resolve(y.isDirectory()&&q[D].ensureExistance()).then(x)}},function(){return Promise.resolve()})();case 24:return u.next=26,p.reduceRight(function(x,y,D){return function(){return Promise.resolve(y.isFile()&&y.copyTo(q[D],!1)).then(x)}},function(){return Promise.resolve()})();case 26:return u.abrupt("return",this);case 27:case "end":return u.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"rename",value:function(){var c=
Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.copyTo(a);case 2:return this.remove(),f.abrupt("return",a);case 4:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"beBinary",value:function(c){return this.setBinary(!0)}},{key:"setBinary",value:function(c){this.binary=c;return this}},{key:"read",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=
d.next){case 0:lk.nyi(this,"read");case 1:case "end":return d.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"write",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:lk.nyi(this,"write");case 1:case "end":return d.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"mkdir",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=
d.next){case 0:lk.nyi(this,"mkdir");case 1:case "end":return d.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"exists",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:lk.nyi(this,"exists");case 1:case "end":return d.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"remove",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=
d.next){case 0:lk.nyi(this,"remove");case 1:case "end":return d.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"dirList",value:function(){var c=Cb(regeneratorRuntime.mark(function f(a,d){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:lk.nyi(this,"dirList");case 1:case "end":return k.stop()}},f,this)}));return function(a,d){return c.apply(this,arguments)}}()},{key:"readProperties",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=
f.next){case 0:lk.nyi(this,"readProperties");case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"writeJson",value:function(c){return this.write(1<arguments.length&&void 0!==arguments[1]&&arguments[1]?JSON.stringify(c,null,2):JSON.stringify(c))}},{key:"readJson",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.t0=JSON,f.next=3,this.read();case 3:return f.t1=
f.sent,f.abrupt("return",f.t0.parse.call(f.t0,f.t1));case 5:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"__serialize__",value:function(){return{__expr__:'var r = null; try { r = resource("'.concat(this.url,'");} catch (err) {}; r'),bindings:{"lively.resources":["resource"]}}}},{key:"isResource",get:function(){return!0}},{key:"canDealWithJSON",get:function(){return!1}}]);return b}());lk.Resource=so;lk["default"]=so;var rj=window.lively.FreezerRuntime.recorderFor("lively.resources/src/http-resource.js");
rj.davNs=function(b){return(b=b.match(/\/([a-z]+?):multistatus/i))?b[1]:"d"};rj.propfindRequestPayload=function(){return'<?xml version="1.0" encoding="utf-8" ?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:creationdate/>\n        <D:getcontentlength/>\n        <D:getcontenttype/>\n        <D:getetag/>\n        <D:getlastmodified/>\n        <D:resourcetype/>\n      </D:prop>\n    </D:propfind>'};rj.readPropertyNode=function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
{},g=b.tagName.replace(/[^:]+:/,"");g=rj.propertyNodeMap[g];var a=b.textContent;switch(g){case "lastModified":case "created":a=new Date(a);break;case "size":a=Number(a)}c[g]=a;return c};rj.readXMLPropfindResult=function(b){var c=(new DOMParser).parseFromString(b,"text/xml");b=rj.davNs(b);c=(new rj.XPathQuery("/".concat(b,":multistatus/").concat(b,":response"))).findAll(c.documentElement);var g=new rj.XPathQuery("".concat(b,":href")),a=new rj.XPathQuery("".concat(b,":propstat/").concat(b,":prop"));
return c.map(function(d){var f=a.findFirst(d);f=Array.from(f.childNodes).reduce(function(k,n){return rj.readPropertyNode(n,k)},{});d=g.findFirst(d);f.url=d.textContent||d.text;return f})};rj.defaultOrigin=function(){return System.baseURL||document.location.origin};rj.makeRequest=function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"GET",g=2<arguments.length?arguments[2]:void 0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},d=b.url,f=b.useCors,k=b.useProxy,n=b.headers;
f="undefined"!==typeof f?f:!0;c={method:c};if("undefined"!==typeof k?k:1)Object.assign(a,{"cache-control":"no-cache","x-lively-proxy-request":d}),d=b.proxyDomain||rj.defaultOrigin();f&&(c.mode="cors");g&&(c.body=g);c.redirect="follow";c.headers=Object.assign({},a,{},n);return fetch(d,c)};rj.upload=cL;rj.Resource=so;rj.applyExclude=uw;rj.promise=yj;rj.num=Gm;var n3=function(){function b(c){Sd(this,b);this.expression=c;this.contextNode=null;this.xpe=new XPathEvaluator}uc(b,[{key:"establishContext",
value:function(c){this.nsResolver||(c=c.ownerDocument?c.ownerDocument.documentElement:c.documentElement,c!==this.contextNode&&(this.contextNode=c,this.nsResolver=this.xpe.createNSResolver(c)))}},{key:"manualNSLookup",value:function(){this.nsResolver=function(c){return Namespace[c.toUpperCase()]||null};return this}},{key:"findAll",value:function(c,g){this.establishContext(c);c=this.xpe.evaluate(this.expression,c,this.nsResolver,XPathResult.ANY_TYPE,null);for(var a=[],d;d=c.iterateNext();)a.push(d);
return 0<a.length||void 0===g?a:g}},{key:"findFirst",value:function(c){this.establishContext(c);return this.xpe.evaluate(this.expression,c,this.nsResolver,XPathResult.ANY_TYPE,null).iterateNext()}}]);return b}();rj.XPathQuery=n3;rj.propertyNodeMap={getlastmodified:"lastModified",creationDate:"created",getetag:"etag",getcontentlength:"size",resourcetype:"type",getcontenttype:"contentType"};rj.binaryExtensions="3ds 3g2 3gp 7z a aac adp ai aif aiff alz ape apk ar arj asf au avi bak bh bin bk bmp btif bz2 bzip2 cab caf cgm class cmx cpio cr2 csv cur dat deb dex djvu dll dmg dng doc docm docx dot dotm dra DS_Store dsk dts dtshd dvb dwg dxf ecelp4800 ecelp7470 ecelp9600 egg eol eot epub exe f4v fbs fh fla flac fli flv fpx fst fvt g3 gif graffle gz gzip h261 h263 h264 icns ico ief img ipa iso jar jpeg jpg jpgv jpm jxr key ktx lha lvp lz lzh lzma lzo m3u m4a m4v mar mdi mht mid midi mj2 mka mkv mmr mng mobi mov movie mp3 mp4 mp4a mpeg mpg mpga mxu nef npx numbers o oga ogg ogv otf pages pbm pcx pdf pea pgm pic png pnm pot potm potx ppa ppam ppm pps ppsm ppsx ppt pptm pptx psd pya pyc pyo pyv qt rar ras raw rgb rip rlc rmf rmvb rtf rz s3m s7z scpt sgi shar sil sketch slk smv so sub swf tar tbz tbz2 tga tgz thmx tif tiff tlz ttc ttf txz udf uvh uvi uvm uvp uvs uvu viv vob war wav wax wbmp wdp weba webm webp whl wim wm wma wmv wmx woff woff2 wvx xbm xif xla xlam xls xlsb xlsm xlsx xlt xltm xltx xm xmind xpi xpm xwd xz z zip zipx".split(" ");
rj.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof global&&"undefined"!==typeof process;rj.upload=cL;var ZS=function(b){function c(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Sd(this,c);var f=g.call(this,a,d);f.onLoad=d.onLoad||function(){};f.onProgress=d.onProgress||function(){};f.useProxy=d.hasOwnProperty("useProxy")?d.useProxy:!1;f.proxyDomain=d.proxyDomain||void 0;f.useCors=d.hasOwnProperty("useCors")?d.useCors:!1;f.headers=d.headers||
{};f.binary=f.isFile()?rj.binaryExtensions.includes(f.ext()):!1;f.errorOnHTTPStatusCodes=d.hasOwnProperty("errorOnHTTPStatusCodes")?d.errorOnHTTPStatusCodes:!0;return f}vd(c,b);var g=qb(c);uc(c,[{key:"join",value:function(a){return Object.assign(ic(Ed(c.prototype),"join",this).call(this,a),{headers:this.headers,useCors:this.useCors,useProxy:this.useProxy,proxyDomain:this.proxyDomain})}},{key:"makeProxied",value:function(a){void 0!==a&&(this.proxyDomain=a);return this.useProxy?this:new this.constructor(this.url,
{headers:this.headers,useCors:this.useCors,useProxy:!0,proxyDomain:this.proxyDomain})}},{key:"noErrorOnHTTPStatusCodes",value:function(){this.errorOnHTTPStatusCodes=!1;return this}},{key:"read",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,rj.makeRequest(this);case 2:k=n.sent;if(k.ok||!this.errorOnHTTPStatusCodes){n.next=5;break}throw Error("Cannot read ".concat(this.url,": ").concat(k.statusText,
" ").concat(k.status));case 5:if(this.binary){n.next=7;break}return n.abrupt("return",k.text());case 7:if("blob"!==this.binary){n.next=9;break}return n.abrupt("return",k.blob());case 9:if("function"!==typeof k.arrayBuffer){n.next=11;break}return n.abrupt("return",k.arrayBuffer());case 11:if("function"!==typeof k.buffer){n.next=13;break}return n.abrupt("return",k.buffer());case 13:throw Error("Don't now how to read binary resource ".concat(this,"'"));case 14:case "end":return n.stop()}},f,this)}));
return function(){return a.apply(this,arguments)}}()},{key:"write",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this.isFile()){p.next=2;break}throw Error("Cannot write a non-file: ".concat(this.url));case 2:return p.next=4,rj.upload(this,f);case 4:n=p.sent;if(rj.num.between(n.status,200,300)||!this.errorOnHTTPStatusCodes){p.next=7;break}throw Error("Cannot write ".concat(this.url,": ").concat(n.statusText,
" ").concat(n.status));case 7:return p.abrupt("return",this);case 8:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"mkdir",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.isFile()){n.next=2;break}throw Error("Cannot mkdir on a file: ".concat(this.url));case 2:return n.next=4,rj.makeRequest(this,"MKCOL");case 4:k=n.sent;if(k.ok||!this.errorOnHTTPStatusCodes){n.next=
7;break}throw Error("Cannot create directory ".concat(this.url,": ").concat(k.statusText," ").concat(k.status));case 7:return n.abrupt("return",this);case 8:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"exists",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!this.isRoot()){k.next=4;break}k.t0=!0;k.next=7;break;case 4:return k.next=6,rj.makeRequest(this,
"HEAD");case 6:k.t0=!!k.sent.ok;case 7:return k.abrupt("return",k.t0);case 8:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"remove",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,rj.makeRequest(this,"DELETE");case 2:return k.abrupt("return",this);case 3:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},
{key:"_propfind",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,rj.makeRequest(this,"PROPFIND",null,{"Content-Type":"text/xml"});case 2:k=q.sent;if(k.ok||!this.errorOnHTTPStatusCodes){q.next=5;break}throw Error("Error in dirList for ".concat(this.url,": ").concat(k.statusText));case 5:return q.next=7,k.text();case 7:return n=q.sent,p=this.root(),q.abrupt("return",rj.readXMLPropfindResult(n).map(function(r){return p.join(r.url).assignProperties(r)}));
case 10:case "end":return q.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"dirList",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,u,x=arguments;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:k=0<x.length&&void 0!==x[0]?x[0]:1;n=1<x.length&&void 0!==x[1]?x[1]:{};if("number"===typeof k||"infinity"===k){y.next=4;break}throw Error("dirList \u2013 invalid depth argument: ".concat(k));case 4:p=n.exclude;0>=k&&
(k=1);if(1!==k){y.next=15;break}y.next=9;return this._propfind();case 9:return q=y.sent,q.shift(),p&&(q=rj.applyExclude(p,q)),y.abrupt("return",q);case 15:return y.next=17,this.dirList(1,n);case 17:return r=y.sent,u=r.filter(function(D){return D.isDirectory()}),y.abrupt("return",Promise.all(u.map(function(D){return D.dirList("number"===typeof k?k-1:k,n)})).then(function(D){return D.reduce(function(H,I){return H.concat(I)},r)}));case 20:case "end":return y.stop()}},f,this)}));return function(){return a.apply(this,
arguments)}}()},{key:"readProperties",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this._propfind();case 2:return n=p.sent[0],p.abrupt("return",this.assignProperties(n));case 4:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"post",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n,p,q,r=arguments;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=
u.next){case 0:return k=0<r.length&&void 0!==r[0]?r[0]:null,"string"!==typeof k&&(k=JSON.stringify(k)),u.next=4,rj.makeRequest(this,"POST",k,{});case 4:return n=u.sent,u.prev=5,u.next=8,n.text();case 8:p=u.sent;u.next=13;break;case 11:u.prev=11,u.t0=u["catch"](5);case 13:if(p&&"application/json"===n.headers.get("content-type"))try{q=JSON.parse(p)}catch(x){}if(n.ok||!this.errorOnHTTPStatusCodes){u.next=18;break}throw Error("Error in POST ".concat(this.url,": ").concat(p||n.statusText));case 18:return u.abrupt("return",
q||p);case 19:case "end":return u.stop()}},f,this,[[5,11]])}));return function(){return a.apply(this,arguments)}}()},{key:"copyTo",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p,q=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=1<q.length&&void 0!==q[1]?q[1]:!0;if(!this.isFile()){r.next=8;break}p=f.isFile()?f:f.join(this.name());if(!rj.isNode){r.next=8;break}if(!p.isHTTPResource){r.next=6;break}return r.abrupt("return",this._copyTo_file_nodejs_http(p,
n));case 6:if(!p.isNodeJSFileResource){r.next=8;break}return r.abrupt("return",this._copyTo_file_nodejs_fs(p,n));case 8:return r.abrupt("return",ic(Ed(c.prototype),"copyTo",this).call(this,f,n));case 9:case "end":return r.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"_copyFrom_file_nodejs_fs",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p,q,r,u=arguments;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:n=1<u.length&&
void 0!==u[1]?u[1]:!0;if(!n){x.next=4;break}x.next=4;return this.parent().ensureExistance();case 4:return q=f._createReadStream(),q.on("error",function(y){return p=y}),x.next=8,rj.makeRequest(this,"PUT",q);case 8:r=x.sent;if(!p){x.next=11;break}throw p;case 11:if(r.ok||!this.errorOnHTTPStatusCodes){x.next=13;break}throw Error("copyTo: Cannot GET: ".concat(r.statusText," ").concat(r.status));case 13:return x.abrupt("return",this);case 14:case "end":return x.stop()}},k,this)}));return function(f){return a.apply(this,
arguments)}}()},{key:"_copyTo_file_nodejs_fs",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n=this,p,q,r,u=arguments;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:p=1<u.length&&void 0!==u[1]?u[1]:!0;if(!p){x.next=4;break}x.next=4;return f.parent().ensureExistance();case 4:return x.next=6,rj.makeRequest(this,"GET");case 6:q=x.sent;if(q.ok||!this.errorOnHTTPStatusCodes){x.next=9;break}throw Error("copyTo: Cannot GET: ".concat(q.statusText," ").concat(q.status));
case 9:return x.abrupt("return",new Promise(function(y,D){return q.body.pipe(f._createWriteStream()).on("error",function(H){return r=H}).on("finish",function(){return r?D(r):y(n)})}));case 10:case "end":return x.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"_copyTo_file_nodejs_http",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p,q,r=arguments;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:n=1<r.length&&void 0!==
r[1]?r[1]:!0;if(!n){u.next=4;break}u.next=4;return f.parent().ensureExistance();case 4:return u.next=6,rj.makeRequest(this,"GET");case 6:p=u.sent;if(p.ok||!this.errorOnHTTPStatusCodes){u.next=9;break}throw Error("copyTo: Cannot GET: ".concat(p.statusText," ").concat(p.status));case 9:return u.next=11,rj.makeRequest(f,"PUT",p.body);case 11:q=u.sent;if(p.ok||!this.errorOnHTTPStatusCodes){u.next=14;break}throw Error("copyTo: Cannot PUT: ".concat(q.statusText," ").concat(q.status));case 14:case "end":return u.stop()}},
k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"isHTTPResource",get:function(){return!0}}]);return c}(rj.Resource);rj.WebDAVResource=ZS;var nH={name:"http-webdav-resource",matches:function(b){return b.startsWith("http:")||b.startsWith("https:")},resourceClass:rj.WebDAVResource};rj.resourceExtension=nH;rj.resourceExtension=nH;rj["default"]=ZS;var yi=window.lively.FreezerRuntime.recorderFor("lively.resources/src/fs-resource.js");yi.wrapInPromise=function(b){return function(){for(var c=
arguments.length,g=Array(c),a=0;a<c;a++)g[a]=arguments[a];return new Promise(function(d,f){return b.apply(null,g.concat(function(k,n){return k?f(k):d(n)}))})}};yi.Resource=so;yi.applyExclude=uw;yi.windowsURLPrefixRe=kH;yi.windowsRootPathRe=mH;yi.createWriteStream=void 0;yi.createReadStream=void 0;yi.readFile=void 0;yi.writeFile=void 0;yi.exists=void 0;yi.mkdir=void 0;yi.rmdir=void 0;yi.unlink=void 0;yi.readdir=void 0;yi.lstat=void 0;yi.rename=void 0;yi.readFileP=yi.wrapInPromise(yi.readFile);yi.writeFileP=
yi.wrapInPromise(yi.writeFile);yi.existsP=function(b){return new Promise(function(c,g){return yi.exists(b,function(a){return c(!!a)})})};yi.readdirP=yi.wrapInPromise(yi.readdir);yi.mkdirP=yi.wrapInPromise(yi.mkdir);yi.rmdirP=yi.wrapInPromise(yi.rmdir);yi.unlinkP=yi.wrapInPromise(yi.unlink);yi.lstatP=yi.wrapInPromise(yi.lstat);yi.renameP=yi.wrapInPromise(yi.rename);var o3=function(b){function c(){Sd(this,c);return g.apply(this,arguments)}vd(c,b);var g=qb(c);uc(c,[{key:"path",value:function(){return this.url.replace("file://",
"")}},{key:"stat",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",yi.lstatP(this.path()));case 1:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"read",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return k=yi.readFileP(this.path()),
n.abrupt("return",this.binary?k:k.then(String));case 2:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"write",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.isDirectory()){n.next=2;break}throw Error("Cannot write into a directory: ".concat(this.path()));case 2:return n.next=4,yi.writeFileP(this.path(),f);case 4:return n.abrupt("return",this);
case 5:case "end":return n.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"mkdir",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!this.isFile()){k.next=2;break}throw Error("Cannot mkdir on a file: ".concat(this.path()));case 2:return k.next=4,yi.mkdirP(this.path());case 4:return k.abrupt("return",this);case 5:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,
arguments)}}()},{key:"exists",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",this.isRoot()?!0:yi.existsP(this.path()));case 1:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"dirList",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,u,x,y,D,H,I,N=arguments;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=
J.next){case 0:k=0<N.length&&void 0!==N[0]?N[0]:1;n=1<N.length&&void 0!==N[1]?N[1]:{};if("number"===typeof k||"infinity"===k){J.next=4;break}throw Error("dirList \u2013 invalid depth argument: ".concat(k));case 4:p=n.exclude;0>=k&&(k=1);if(1!==k){J.next=36;break}q=[];J.t0=fa;J.next=11;return yi.readdirP(this.path());case 11:J.t1=J.sent,r=(0,J.t0)(J.t1),J.prev=13,r.s();case 15:if((u=r.n()).done){J.next=26;break}x=u.value;y=this.join(x);J.next=20;return y.stat();case 20:D=J.sent,y=D.isDirectory()?y.asDirectory():
y,y._assignPropsFromStat(D),q.push(y);case 24:J.next=15;break;case 26:J.next=31;break;case 28:J.prev=28,J.t2=J["catch"](13),r.e(J.t2);case 31:return J.prev=31,r.f(),J.finish(31);case 34:return p&&(q=yi.applyExclude(p,q)),J.abrupt("return",q);case 36:return J.next=38,this.dirList(1,n);case 38:return H=J.sent,I=H.filter(function(sa){return sa.isDirectory()}),J.abrupt("return",Promise.all(I.map(function(sa){return sa.dirList("number"===typeof k?k-1:k,n)})).then(function(sa){return sa.reduce(function(ja,
Ha){return ja.concat(Ha)},H)}));case 41:case "end":return J.stop()}},f,this,[[13,28,31,34]])}));return function(){return a.apply(this,arguments)}}()},{key:"isEmptyDirectory",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,this.dirList();case 2:return k.t0=k.sent.length,k.abrupt("return",0===k.t0);case 4:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},
{key:"rename",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p,q,r,u,x,y,D,H,I,N;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(f instanceof this.constructor){J.next=2;break}return J.abrupt("return",ic(Ed(c.prototype),"rename",this).call(this,f));case 2:if(!this.isFile()){J.next=7;break}f=f.asFile();yi.renameP(this.path(),f.path());J.next=36;break;case 7:return f=f.asDirectory(),J.next=10,f.ensureExistance();case 10:return n=[],p=[],J.t0=fa,
J.next=15,this.dirList("infinity");case 15:J.t1=J.sent;q=(0,J.t0)(J.t1);try{for(q.s();!(r=q.n()).done;)u=r.value,u.isDirectory()?p.push(u):n.push(u)}catch(sa){q.e(sa)}finally{q.f()}x=0;y=p;case 19:if(!(x<y.length)){J.next=26;break}D=y[x];J.next=23;return f.join(D.relativePathFrom(this)).ensureExistance();case 23:x++;J.next=19;break;case 26:H=0,I=n;case 27:if(!(H<I.length)){J.next=34;break}N=I[H];J.next=31;return N.rename(f.join(N.relativePathFrom(this)));case 31:H++;J.next=27;break;case 34:return J.next=
36,this.remove();case 36:return J.abrupt("return",f);case 37:case "end":return J.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"remove",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,this.exists();case 2:if(q.sent){q.next=5;break}q.next=33;break;case 5:if(!this.isDirectory()){q.next=31;break}q.t0=fa;q.next=9;return this.dirList();case 9:q.t1=q.sent,
k=(0,q.t0)(q.t1),q.prev=11,k.s();case 13:if((n=k.n()).done){q.next=19;break}p=n.value;q.next=17;return p.remove();case 17:q.next=13;break;case 19:q.next=24;break;case 21:q.prev=21,q.t2=q["catch"](11),k.e(q.t2);case 24:return q.prev=24,k.f(),q.finish(24);case 27:return q.next=29,yi.rmdirP(this.path());case 29:q.next=33;break;case 31:return q.next=33,yi.unlinkP(this.path());case 33:return q.abrupt("return",this);case 34:case "end":return q.stop()}},f,this,[[11,21,24,27]])}));return function(){return a.apply(this,
arguments)}}()},{key:"readProperties",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.t0=this,k.next=3,this.stat();case 3:return k.t1=k.sent,k.abrupt("return",k.t0._assignPropsFromStat.call(k.t0,k.t1));case 5:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"makeProxied",value:function(){return this}},{key:"copyTo",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,
p,q=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=1<q.length&&void 0!==q[1]?q[1]:!0;if(!this.isFile()){r.next=5;break}p=f.isFile()?f:f.join(this.name());if(!p.isHTTPResource){r.next=5;break}return r.abrupt("return",p._copyFrom_file_nodejs_fs(this,n=!0));case 5:return r.abrupt("return",ic(Ed(c.prototype),"copyTo",this).call(this,f,n));case 6:case "end":return r.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"_assignPropsFromStat",
value:function(a){return this.assignProperties({lastModified:a.mtime,created:a.ctime,size:a.size,type:a.isDirectory()?"directory":"file",isLink:a.isSymbolicLink()})}},{key:"_createWriteStream",value:function(){return yi.createWriteStream(this.path())}},{key:"_createReadStream",value:function(){return yi.createReadStream(this.path())}},{key:"isNodeJSFileResource",get:function(){return!0}}]);return c}(yi.Resource);yi.NodeJSFileResource=o3;var p3=function(b){function c(a,d){Sd(this,c);"file:///"!==a.slice(0,
8)&&"file://"===a.slice(0,7)&&(a="file:///"+a.slice(7));a.includes("\\")&&(a=a.replace(/\\/g,"/"));return g.call(this,a,d)}vd(c,b);var g=qb(c);uc(c,[{key:"path",value:function(){return this.url.replace("file:///","")}},{key:"isRoot",value:function(){return!!this.path().match(yi.windowsRootPathRe)}},{key:"root",value:function(){if(this.isRoot())return this;console.log(this.url);var a=this.url.match(yi.windowsURLPrefixRe);if(a)return this.newResource(a[0]);throw Error("Could not determine root path of windows file resource for url "+
this.url);}}]);return c}(yi.NodeJSFileResource);yi.NodeJSWindowsFileResource=p3;var oH={name:"nodejs-file-resource",matches:function(b){return b.startsWith("file:")},resourceClass:"undefined"!==typeof process&&"win32"===process.platform?yi.NodeJSWindowsFileResource:yi.NodeJSFileResource};yi.resourceExtension=oH;yi.resourceExtension=oH;var yl=window.lively.FreezerRuntime.recorderFor("lively.resources/src/local-resource.js");yl.applyExclude=function(b,c){return c?"string"===typeof c?!b.url.includes(c):
"function"===typeof c?!c(b):c instanceof RegExp?!c.test(b.url):!0:!0};yl.Resource=so;yl.createFiles=Aq;yl.debug=!1;yl.slashRe=/\//g;var q3=function(){function b(c){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Sd(this,b);if(!c||"string"!==typeof c)throw Error("LocalResourceInMemoryBackend needs name!");this.name=c;this._filespec=g}uc(b,null,[{key:"removeHost",value:function(c){delete this.hosts[c]}},{key:"ensure",value:function(c){var g=this,a=this.named((1<arguments.length&&void 0!==
arguments[1]?arguments[1]:{}).host);return Promise.resolve().then(function(){return c?yl.createFiles("local://".concat(a.name),c):null}).then(function(){return g})}},{key:"named",value:function(c){c||(c="default");return this.hosts[c]||(this.hosts[c]=new this(c))}},{key:"hosts",get:function(){return this._hosts||(this._hosts={})}}]);uc(b,[{key:"get",value:function(c){return this._filespec[c]}},{key:"set",value:function(c,g){this._filespec[c]=g}},{key:"write",value:function(c,g){var a=this._filespec[c];
a||(a=this._filespec[c]={created:new Date});a.content=g;a.isDirectory=!1;a.lastModified=new Date}},{key:"read",value:function(c){return(c=this._filespec[c])&&c.content?c.content:""}},{key:"mkdir",value:function(c){var g=this._filespec[c];g&&g.isDirectory||(g||(g=this._filespec[c]={created:new Date}),g.content&&delete g.content,g.isDirectory=!0,g.lastModified=new Date)}},{key:"partialFilespec",value:function(){for(var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"/",g=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:Infinity,a={},d=this.filespec,f=Object.keys(d),k=0;k<f.length;k++){var n=f[k];if(n.startsWith(c)&&c!==n){var p=n.slice(c.length);(p.includes("/")?p.match(yl.slashRe).length+1:1)>g||(a[n]=d[n])}}return a}},{key:"filespec",get:function(){return this._filespec},set:function(c){this._filespec=c}}]);return b}();yl.LocalResourceInMemoryBackend=q3;var $S=function(b){function c(){Sd(this,c);return g.apply(this,arguments)}vd(c,b);var g=qb(c);uc(c,[{key:"read",value:function(){return Promise.resolve(this.localBackend.read(this.path()))}},
{key:"write",value:function(a){yl.debug&&console.log("[".concat(this,"] write"));if(this.isDirectory())throw Error("Cannot write into a directory! (".concat(this.url,")"));var d=this.localBackend.get(this.path());if(d&&d.isDirectory)throw Error("".concat(this.url," already exists and is a directory (cannot write into it!)"));this.localBackend.write(this.path(),a);return Promise.resolve(this)}},{key:"mkdir",value:function(){yl.debug&&console.log("[".concat(this,"] mkdir"));if(!this.isDirectory())throw Error("Cannot mkdir a file! (".concat(this.url,
")"));var a=this.localBackend.get(this.path());if(a&&a.isDirectory)return Promise.resolve(this);if(a&&!a.isDirectory)throw Error("".concat(this.url," already exists and is a file (cannot mkdir it!)"));this.localBackend.mkdir(this.path());return Promise.resolve(this)}},{key:"exists",value:function(){yl.debug&&console.log("[".concat(this,"] exists"));return Promise.resolve(this.isRoot()||this.path()in this.localBackend.filespec)}},{key:"remove",value:function(){var a=this;yl.debug&&console.log("[".concat(this,
"] remove"));var d=this.path();Object.keys(this.localBackend.filespec).forEach(function(f){return f.startsWith(d)&&delete a.localBackend.filespec[f]});return Promise.resolve(this)}},{key:"readProperties",value:function(){yl.debug&&console.log("[".concat(this,"] readProperties"));throw Error("not yet implemented");}},{key:"dirList",value:function(){var a=this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};yl.debug&&console.log("[".concat(this,
"] dirList"));if(!this.isDirectory())return this.asDirectory().dirList(d,f);f=f.exclude;var k=this.path(),n=[],p=Object.keys(this.localBackend.filespec);"infinity"===d&&(d=Infinity);for(var q=0;q<p.length;q++){var r=p[q];if(r.startsWith(k)&&k!==r){var u=r.slice(k.length);(u.includes("/")?u.match(yl.slashRe).length+1:1)>d&&"continue"===function(){var x=a.join(u.split("/").slice(0,d).join("/")+"/");n.some(function(y){return y.equals(x)})||n.push(x);return"continue"}()||(r=this.join(u),f&&!yl.applyExclude(r,
f)||n.push(r))}}return Promise.resolve(n)}},{key:"localBackend",get:function(){return yl.LocalResourceInMemoryBackend.named(this.host())}}]);return c}(yl.Resource);yl.LocalResource=$S;var pH={name:"local-resource",matches:function(b){return b.startsWith("local:")},resourceClass:yl.LocalResource};yl.resourceExtension=pH;yl.resourceExtension=pH;yl["default"]=$S;var km=window.lively.FreezerRuntime.recorderFor("lively.resources/src/esm-resource.js");km.Resource=so;km.resource=Am;km.string=Xj;km.requestMap=
{};var r3=function(b){function c(){Sd(this,c);return g.apply(this,arguments)}vd(c,b);var g=qb(c);uc(c,[{key:"read",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,u,x,y;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:n="https://jspm.dev/";p=this.url.replace("esm://cache/","");q=p.split("/").filter(Boolean);if(1===q.length||!q[q.length-1].endsWith("js")&&!q[q.length-1].endsWith("!cjs"))1===q.length&&(q[0]=q[0].replace("!cjs","")),q.push("index.js");
D.next=6;return this.findOrCreatePathStructure(q);case 6:r=D.sent;u=Wb(r,2);x=u[0];if(y=u[1]){D.next=16;break}D.next=13;return x.read();case 13:k=D.sent;D.next=20;break;case 16:return D.next=18,km.resource(n+p).read();case 18:k=D.sent,x.write(k);case 20:return D.abrupt("return",k);case 21:case "end":return D.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"findOrCreatePathStructure",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p,q,r,u,x,y,D,
H,I,N;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:p=n=km.string.joinPath(System.baseURL,"/esm_cache/");f[f.length-1].endsWith("js")||f[f.length-1].endsWith("!cjs")||(f[f.length-1]+="/");r=f.join("/");u=km.requestMap[n+r];if(!u){J.next=8;break}J.next=8;return u;case 8:return x=km.resource(n+r),J.next=11,x.exists();case 11:y=J.sent;if(!y){J.next=14;break}return J.abrupt("return",[x,!1]);case 14:D=fa(f),J.prev=15,D.s();case 17:if((H=D.n()).done){J.next=46;break}I=H.value;
I!==f[f.length-1]&&(I+="/");if(q=km.requestMap[p+I]){J.next=40;break}q=km.resource(p).join(I);if(!I.endsWith("/")){J.next=38;break}J.next=26;return q.exists();case 26:N=J.sent;if(!km.requestMap[p+I]&&!N){J.next=34;break}J.next=30;return km.requestMap[p+I];case 30:return p=q.url,J.abrupt("continue",44);case 34:return km.requestMap[p+I]=q.mkdir(),J.next=37,km.requestMap[p+I];case 37:q=J.sent;case 38:J.next=43;break;case 40:return J.next=42,q;case 42:q=J.sent;case 43:p=q.url;case 44:J.next=17;break;
case 46:J.next=51;break;case 48:J.prev=48,J.t0=J["catch"](15),D.e(J.t0);case 51:return J.prev=51,D.f(),J.finish(51);case 54:return J.abrupt("return",[q,!0]);case 55:case "end":return J.stop()}},k,null,[[15,48,51,54]])}));return function(f){return a.apply(this,arguments)}}()},{key:"write",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:console.error("Not supported by resource type.");case 1:case "end":return n.stop()}},
k)}));return function(f){return a.apply(this,arguments)}}()},{key:"mkdir",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:console.error("Not supported by resource type.");case 1:case "end":return k.stop()}},f)}));return function(){return a.apply(this,arguments)}}()},{key:"exists",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=
k.next){case 0:case "end":return k.stop()}},f)}));return function(){return a.apply(this,arguments)}}()},{key:"remove",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:console.error("Not supported by resource type.");case 1:case "end":return k.stop()}},f)}));return function(){return a.apply(this,arguments)}}()},{key:"isESMResource",get:function(){return!0}}]);return c}(km.Resource);km.ESMREesource=r3;var qH=
{name:"ecma-script-module-resource",matches:function(b){return b.startsWith("esm://")},resourceClass:km.ESMREesource};km.resourceExtension=qH;km.resourceExtension=qH;var Sj=window.lively.FreezerRuntime.recorderFor("lively.resources/index.js");Sj.createFileSpec=GC;Sj.importModuleViaNative=ez;Sj.loadViaScript=fz;Sj.ensureFetch=JC;Sj["default"]=so;Sj.Resource=so;Sj.unregisterExtension=ou;Sj.registerExtension=Bq;Sj.parseQuery=ys;Sj.extensions=Ox;Sj.createFiles=Aq;Sj.resource=Am;Sj.httpResourceExtension=
nH;Sj.fileResourceExtension=oH;Sj.localResourceExtension=pH;Sj.esmResourceExtension=qH;Sj.newUUID=ye;Sj.waitFor=pn;Sj.registerExtension(Sj.localResourceExtension);Sj.registerExtension(Sj.httpResourceExtension);Sj.registerExtension(Sj.fileResourceExtension);Sj.registerExtension(Sj.esmResourceExtension);Sj.createFileSpec=GC;Sj.importModuleViaNative=ez;Sj.loadViaScript=fz;Sj.ensureFetch=JC;Sj.registerExtension=Bq;Sj.unregisterExtension=ou;Sj.parseQuery=ys;Sj.extensions=Ox;Sj.createFiles=Aq;Sj.resource=
Am;var s3=Object.freeze({__proto__:null,Resource:so,createFileSpec:GC,importModuleViaNative:ez,loadViaScript:fz,ensureFetch:JC,registerExtension:Bq,unregisterExtension:ou,parseQuery:ys,extensions:Ox,createFiles:Aq,resource:Am});bd("cc",s3);var ii=window.lively.FreezerRuntime.recorderFor("lively.morphic/helpers.js");ii.getClassForName=LC;ii.sanitizeFont=pu;ii.pathForBrowserHistory=vw;ii.addClassMappings=gz;ii.clearStylePropertiesForClassesIn=MC;ii.getPropSettings=function(b){b=!b||ii.obj.isString(b)?
ii.getClassForName(b||"default"):b;var c=b[Symbol["for"]("lively-module-meta")],g=c["package"];c=c.pathInPackage;return{props:b[Symbol["for"]("lively.classes-properties-and-settings")].properties,moduleId:ii.string.joinPath(g.name,c)}};ii.getStylePropertiesFor=NC;ii.getDefaultValueFor=OC;ii.morph=Sm;ii.newMorphId=hz;ii.lazyInspect=function(b){return PC.apply(this,arguments)};ii.locateClass=ss;ii.string=Xj;ii.obj=bj;ii.parseQuery=ys;ii.stringifyQuery=dz;ii.touchInput=ii.touchInput||void 0;try{document.createEvent("TouchEvent"),
ii.touchInput=!0}catch(b){ii.touchInput=!1}var bq=bd("ae",ii.touchInput);ii.touchInputDevice=bq;ii.touchInputDevice=bq;ii.CachedDefaultValues=ii.CachedDefaultValues||void 0;ii.CachedDefaultValues=ii.CachedDefaultValues||new Map;ii.CachedStyleProperties=ii.CachedStyleProperties||void 0;ii.CachedStyleProperties=ii.CachedStyleProperties||new Map;ii.nameToClassMapping=ii.nameToClassMapping||void 0;ii.nameToClassMapping=ii.nameToClassMapping||{};ii.getClassForName=LC;ii.sanitizeFont=pu;ii.pathForBrowserHistory=
vw;ii.addClassMappings=gz;ii.clearStylePropertiesForClassesIn=MC;ii.getStylePropertiesFor=NC;ii.getDefaultValueFor=OC;ii.morph=Sm;ii.newMorphId=hz;var Px=bd("al",ii.lazyInspect);ii.inspect=Px;ii.inspect=Px;var cq=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js");cq.obj=bj;cq.morph=Sm;var qt=bd("f",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js"),g=c.hasOwnProperty("Icon")&&"function"===typeof c.Icon?c.Icon:c.Icon=function(a){if(!a||
!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,void 0,[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Icon"}},{key:"makeLabel",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{prefix:"",suffix:""},f=d.prefix,k=d.suffix,n=[];f&&n.push.apply(n,db("string"===typeof f?[f||"",{}]:f));n.push.apply(n,db(this.textAttribute(a,cq.obj.dissoc(d,["fontSize"]))));k&&n.push.apply(n,
db("string"===typeof k?[k||"",{}]:k));return cq.morph(Object.assign({type:"label",value:n},cq.obj.dissoc(d,["prefix","suffix"])))}},{key:"textAttribute",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f=d.textStyleClasses&&d.textStyleClasses.includes("far");return[cq.Icons[a].code||"icon ".concat(a," not found"),Object.assign({fontFamily:'"Font Awesome 5 Free", "Font Awesome 5 Brands"',fontWeight:f?"400":"900",textStyleClasses:["fas"]},d)]}},{key:"setIcon",value:function(a,
d){a.textAndAttributes=this.textAttribute(d)}}],c,{pathInPackage:function(){return"./text/icons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:673,end:1848})}(void 0));cq.Icon=qt;cq.Icon=qt;var rH={0:{code:"0"},1:{code:"1"},2:{code:"2"},3:{code:"3"},4:{code:"4"},5:{code:"5"},6:{code:"6"},7:{code:"7"},8:{code:"8"},9:{code:"9"},
a:{code:'"'},"address-book":{code:"\uf2b9"},"contact-book":{code:"\uf2b9"},"address-card":{code:"\uf2bb"},"contact-card":{code:"\uf2bb"},vcard:{code:"\uf2bb"},"align-center":{code:"\uf037"},"align-justify":{code:"\uf039"},"align-left":{code:"\uf036"},"align-right":{code:"\uf038"},anchor:{code:"\uf13d"},"anchor-circle-check":{code:"\ue4aa"},"anchor-circle-exclamation":{code:"\ue4ab"},"anchor-circle-xmark":{code:"\ue4ac"},"anchor-lock":{code:"\ue4ad"},"angle-down":{code:"\uf107"},"angle-left":{code:"\uf104"},
"angle-right":{code:"\uf105"},"angle-up":{code:"\uf106"},"angles-down":{code:"\uf103"},"angle-double-down":{code:"\uf103"},"angles-left":{code:"\uf100"},"angle-double-left":{code:"\uf100"},"angles-right":{code:"\uf101"},"angle-double-right":{code:"\uf101"},"angles-up":{code:"\uf102"},"angle-double-up":{code:"\uf102"},ankh:{code:"\uf644"},"apple-whole":{code:"\uf5d1"},"apple-alt":{code:"\uf5d1"},archway:{code:"\uf557"},"arrow-down":{code:"\uf063"},"arrow-down-1-9":{code:"\uf162"},"sort-numeric-asc":{code:"\uf162"},
"sort-numeric-down":{code:"\uf162"},"arrow-down-9-1":{code:"\uf886"},"sort-numeric-desc":{code:"\uf886"},"sort-numeric-down-alt":{code:"\uf886"},"arrow-down-a-z":{code:"\uf15d"},"sort-alpha-asc":{code:"\uf15d"},"sort-alpha-down":{code:"\uf15d"},"arrow-down-long":{code:"\uf175"},"long-arrow-down":{code:"\uf175"},"arrow-down-short-wide":{code:"\uf884"},"sort-amount-desc":{code:"\uf884"},"sort-amount-down-alt":{code:"\uf884"},"arrow-down-up-across-line":{code:"\ue4af"},"arrow-down-up-lock":{code:"\ue4b0"},
"arrow-down-wide-short":{code:"\uf160"},"sort-amount-asc":{code:"\uf160"},"sort-amount-down":{code:"\uf160"},"arrow-down-z-a":{code:"\uf881"},"sort-alpha-desc":{code:"\uf881"},"sort-alpha-down-alt":{code:"\uf881"},"arrow-left":{code:"\uf060"},"arrow-left-long":{code:"\uf177"},"long-arrow-left":{code:"\uf177"},"arrow-pointer":{code:"\uf245"},"mouse-pointer":{code:"\uf245"},"arrow-right":{code:"\uf061"},"arrow-right-arrow-left":{code:"\uf0ec"},exchange:{code:"\uf0ec"},"arrow-right-from-bracket":{code:"\uf08b"},
"sign-out":{code:"\uf08b"},"arrow-right-long":{code:"\uf178"},"long-arrow-right":{code:"\uf178"},"arrow-right-to-bracket":{code:"\uf090"},"sign-in":{code:"\uf090"},"arrow-right-to-city":{code:"\ue4b3"},"arrow-rotate-left":{code:"\uf0e2"},"arrow-left-rotate":{code:"\uf0e2"},"arrow-rotate-back":{code:"\uf0e2"},"arrow-rotate-backward":{code:"\uf0e2"},undo:{code:"\uf0e2"},"arrow-rotate-right":{code:"\uf01e"},"arrow-right-rotate":{code:"\uf01e"},"arrow-rotate-forward":{code:"\uf01e"},redo:{code:"\uf01e"},
"arrow-trend-down":{code:"\ue097"},"arrow-trend-up":{code:"\ue098"},"arrow-turn-down":{code:"\uf149"},"level-down":{code:"\uf149"},"arrow-turn-up":{code:"\uf148"},"level-up":{code:"\uf148"},"arrow-up":{code:"\uf062"},"arrow-up-1-9":{code:"\uf163"},"sort-numeric-up":{code:"\uf163"},"arrow-up-9-1":{code:"\uf887"},"sort-numeric-up-alt":{code:"\uf887"},"arrow-up-a-z":{code:"\uf15e"},"sort-alpha-up":{code:"\uf15e"},"arrow-up-from-bracket":{code:"\ue09a"},"arrow-up-from-ground-water":{code:"\ue4b5"},"arrow-up-from-water-pump":{code:"\ue4b6"},
"arrow-up-long":{code:"\uf176"},"long-arrow-up":{code:"\uf176"},"arrow-up-right-dots":{code:"\ue4b7"},"arrow-up-right-from-square":{code:"\uf08e"},"external-link":{code:"\uf08e"},"arrow-up-short-wide":{code:"\uf885"},"sort-amount-up-alt":{code:"\uf885"},"arrow-up-wide-short":{code:"\uf161"},"sort-amount-up":{code:"\uf161"},"arrow-up-z-a":{code:"\uf882"},"sort-alpha-up-alt":{code:"\uf882"},"arrows-down-to-line":{code:"\ue4b8"},"arrows-down-to-people":{code:"\ue4b9"},"arrows-left-right":{code:"\uf07e"},
"arrows-h":{code:"\uf07e"},"arrows-left-right-to-line":{code:"\ue4ba"},"arrows-rotate":{code:"\uf021"},refresh:{code:"\uf021"},sync:{code:"\uf021"},"arrows-spin":{code:"\ue4bb"},"arrows-split-up-and-left":{code:"\ue4bc"},"arrows-to-circle":{code:"\ue4bd"},"arrows-to-dot":{code:"\ue4be"},"arrows-to-eye":{code:"\ue4bf"},"arrows-turn-right":{code:"\ue4c0"},"arrows-turn-to-dots":{code:"\ue4c1"},"arrows-up-down":{code:"\uf07d"},"arrows-v":{code:"\uf07d"},"arrows-up-down-left-right":{code:"\uf047"},arrows:{code:"\uf047"},
"arrows-up-to-line":{code:"\ue4c2"},asterisk:{code:"*"},at:{code:"@"},atom:{code:"\uf5d2"},"audio-description":{code:"\uf29e"},"austral-sign":{code:"\ue0a9"},award:{code:"\uf559"},b:{code:"B"},baby:{code:"\uf77c"},"baby-carriage":{code:"\uf77d"},"carriage-baby":{code:"\uf77d"},backward:{code:"\uf04a"},"backward-fast":{code:"\uf049"},"fast-backward":{code:"\uf049"},"backward-step":{code:"\uf048"},"step-backward":{code:"\uf048"},bacon:{code:"\uf7e5"},bacteria:{code:"\ue059"},bacterium:{code:"\ue05a"},
"bag-shopping":{code:"\uf290"},"shopping-bag":{code:"\uf290"},bahai:{code:"\uf666"},"baht-sign":{code:"\ue0ac"},ban:{code:"\uf05e"},cancel:{code:"\uf05e"},"ban-smoking":{code:"\uf54d"},"smoking-ban":{code:"\uf54d"},bandage:{code:"\uf462"},"band-aid":{code:"\uf462"},barcode:{code:"\uf02a"},bars:{code:"\uf0c9"},navicon:{code:"\uf0c9"},"bars-progress":{code:"\uf828"},"tasks-alt":{code:"\uf828"},"bars-staggered":{code:"\uf550"},reorder:{code:"\uf550"},stream:{code:"\uf550"},baseball:{code:"\uf433"},"baseball-ball":{code:"\uf433"},
"baseball-bat-ball":{code:"\uf432"},"basket-shopping":{code:"\uf291"},"shopping-basket":{code:"\uf291"},basketball:{code:"\uf434"},"basketball-ball":{code:"\uf434"},bath:{code:"\uf2cd"},bathtub:{code:"\uf2cd"},"battery-empty":{code:"\uf244"},"battery-0":{code:"\uf244"},"battery-full":{code:"\uf240"},battery:{code:"\uf240"},"battery-5":{code:"\uf240"},"battery-half":{code:"\uf242"},"battery-3":{code:"\uf242"},"battery-quarter":{code:"\uf243"},"battery-2":{code:"\uf243"},"battery-three-quarters":{code:"\uf241"},
"battery-4":{code:"\uf241"},bed:{code:"\uf236"},"bed-pulse":{code:"\uf487"},procedures:{code:"\uf487"},"beer-mug-empty":{code:"\uf0fc"},beer:{code:"\uf0fc"},bell:{code:"\uf0f3"},"bell-concierge":{code:"\uf562"},"concierge-bell":{code:"\uf562"},"bell-slash":{code:"\uf1f6"},"bezier-curve":{code:"\uf55b"},bicycle:{code:"\uf206"},binoculars:{code:"\uf1e5"},biohazard:{code:"\uf780"},"bitcoin-sign":{code:"\ue0b4"},blender:{code:"\uf517"},"blender-phone":{code:"\uf6b6"},blog:{code:"\uf781"},bold:{code:"\uf032"},
bolt:{code:"\uf0e7"},zap:{code:"\uf0e7"},"bolt-lightning":{code:"\ue0b7"},bomb:{code:"\uf1e2"},bone:{code:"\uf5d7"},bong:{code:"\uf55c"},book:{code:"\uf02d"},"book-atlas":{code:"\uf558"},atlas:{code:"\uf558"},"book-bible":{code:"\uf647"},bible:{code:"\uf647"},"book-bookmark":{code:"\ue0bb"},"book-journal-whills":{code:"\uf66a"},"journal-whills":{code:"\uf66a"},"book-medical":{code:"\uf7e6"},"book-open":{code:"\uf518"},"book-open-reader":{code:"\uf5da"},"book-reader":{code:"\uf5da"},"book-quran":{code:"\uf687"},
quran:{code:"\uf687"},"book-skull":{code:"\uf6b7"},"book-dead":{code:"\uf6b7"},bookmark:{code:"\uf02e"},"border-all":{code:"\uf84c"},"border-none":{code:"\uf850"},"border-top-left":{code:"\uf853"},"border-style":{code:"\uf853"},"bore-hole":{code:"\ue4c3"},"bottle-droplet":{code:"\ue4c4"},"bottle-water":{code:"\ue4c5"},"bowl-food":{code:"\ue4c6"},"bowl-rice":{code:"\ue2eb"},"bowling-ball":{code:"\uf436"},box:{code:"\uf466"},"box-archive":{code:"\uf187"},archive:{code:"\uf187"},"box-open":{code:"\uf49e"},
"box-tissue":{code:"\ue05b"},"boxes-packing":{code:"\ue4c7"},"boxes-stacked":{code:"\uf468"},boxes:{code:"\uf468"},"boxes-alt":{code:"\uf468"},braille:{code:"\uf2a1"},brain:{code:"\uf5dc"},"brazilian-real-sign":{code:"\ue46c"},"bread-slice":{code:"\uf7ec"},bridge:{code:"\ue4c8"},"bridge-circle-check":{code:"\ue4c9"},"bridge-circle-exclamation":{code:"\ue4ca"},"bridge-circle-xmark":{code:"\ue4cb"},"bridge-lock":{code:"\ue4cc"},"bridge-water":{code:"\ue4ce"},briefcase:{code:"\uf0b1"},"briefcase-medical":{code:"\uf469"},
broom:{code:"\uf51a"},"broom-ball":{code:"\uf458"},quidditch:{code:"\uf458"},"quidditch-broom-ball":{code:"\uf458"},brush:{code:"\uf55d"},bucket:{code:"\ue4cf"},bug:{code:"\uf188"},"bug-slash":{code:"\ue490"},bugs:{code:"\ue4d0"},building:{code:"\uf1ad"},"building-circle-arrow-right":{code:"\ue4d1"},"building-circle-check":{code:"\ue4d2"},"building-circle-exclamation":{code:"\ue4d3"},"building-circle-xmark":{code:"\ue4d4"},"building-columns":{code:"\uf19c"},bank:{code:"\uf19c"},institution:{code:"\uf19c"},
museum:{code:"\uf19c"},university:{code:"\uf19c"},"building-flag":{code:"\ue4d5"},"building-lock":{code:"\ue4d6"},"building-ngo":{code:"\ue4d7"},"building-shield":{code:"\ue4d8"},"building-un":{code:"\ue4d9"},"building-user":{code:"\ue4da"},"building-wheat":{code:"\ue4db"},bullhorn:{code:"\uf0a1"},bullseye:{code:"\uf140"},burger:{code:"\uf805"},hamburger:{code:"\uf805"},burst:{code:"\ue4dc"},bus:{code:"\uf207"},"bus-simple":{code:"\uf55e"},"bus-alt":{code:"\uf55e"},"business-time":{code:"\uf64a"},
"briefcase-clock":{code:"\uf64a"},c:{code:"C"},"cake-candles":{code:"\uf1fd"},"birthday-cake":{code:"\uf1fd"},cake:{code:"\uf1fd"},calculator:{code:"\uf1ec"},calendar:{code:"\uf133"},"calendar-check":{code:"\uf274"},"calendar-day":{code:"\uf783"},"calendar-days":{code:"\uf073"},"calendar-alt":{code:"\uf073"},"calendar-minus":{code:"\uf272"},"calendar-plus":{code:"\uf271"},"calendar-week":{code:"\uf784"},"calendar-xmark":{code:"\uf273"},"calendar-times":{code:"\uf273"},camera:{code:"\uf030"},"camera-alt":{code:"\uf030"},
"camera-retro":{code:"\uf083"},"camera-rotate":{code:"\ue0d8"},campground:{code:"\uf6bb"},"candy-cane":{code:"\uf786"},cannabis:{code:"\uf55f"},capsules:{code:"\uf46b"},car:{code:"\uf1b9"},automobile:{code:"\uf1b9"},"car-battery":{code:"\uf5df"},"battery-car":{code:"\uf5df"},"car-burst":{code:"\uf5e1"},"car-crash":{code:"\uf5e1"},"car-on":{code:"\ue4dd"},"car-rear":{code:"\uf5de"},"car-alt":{code:"\uf5de"},"car-side":{code:"\uf5e4"},"car-tunnel":{code:"\ue4de"},caravan:{code:"\uf8ff"},"caret-down":{code:"\uf0d7"},
"caret-left":{code:"\uf0d9"},"caret-right":{code:"\uf0da"},"caret-up":{code:"\uf0d8"},carrot:{code:"\uf787"},"cart-arrow-down":{code:"\uf218"},"cart-flatbed":{code:"\uf474"},"dolly-flatbed":{code:"\uf474"},"cart-flatbed-suitcase":{code:"\uf59d"},"luggage-cart":{code:"\uf59d"},"cart-plus":{code:"\uf217"},"cart-shopping":{code:"\uf07a"},"shopping-cart":{code:"\uf07a"},"cash-register":{code:"\uf788"},cat:{code:"\uf6be"},"cedi-sign":{code:"\ue0df"},"cent-sign":{code:"\ue3f5"},certificate:{code:"\uf0a3"},
chair:{code:"\uf6c0"},chalkboard:{code:"\uf51b"},blackboard:{code:"\uf51b"},"chalkboard-user":{code:"\uf51c"},"chalkboard-teacher":{code:"\uf51c"},"champagne-glasses":{code:"\uf79f"},"glass-cheers":{code:"\uf79f"},"charging-station":{code:"\uf5e7"},"chart-area":{code:"\uf1fe"},"area-chart":{code:"\uf1fe"},"chart-bar":{code:"\uf080"},"bar-chart":{code:"\uf080"},"chart-column":{code:"\ue0e3"},"chart-gantt":{code:"\ue0e4"},"chart-line":{code:"\uf201"},"line-chart":{code:"\uf201"},"chart-pie":{code:"\uf200"},
"pie-chart":{code:"\uf200"},"chart-simple":{code:"\ue473"},check:{code:"\uf00c"},"check-double":{code:"\uf560"},"check-to-slot":{code:"\uf772"},"vote-yea":{code:"\uf772"},cheese:{code:"\uf7ef"},chess:{code:"\uf439"},"chess-bishop":{code:"\uf43a"},"chess-board":{code:"\uf43c"},"chess-king":{code:"\uf43f"},"chess-knight":{code:"\uf441"},"chess-pawn":{code:"\uf443"},"chess-queen":{code:"\uf445"},"chess-rook":{code:"\uf447"},"chevron-down":{code:"\uf078"},"chevron-left":{code:"\uf053"},"chevron-right":{code:"\uf054"},
"chevron-up":{code:"\uf077"},child:{code:"\uf1ae"},"child-dress":{code:"\ue59c"},"child-reaching":{code:"\ue59d"},"child-rifle":{code:"\ue4e0"},children:{code:"\ue4e1"},church:{code:"\uf51d"},circle:{code:"\uf111"},"circle-arrow-down":{code:"\uf0ab"},"arrow-circle-down":{code:"\uf0ab"},"circle-arrow-left":{code:"\uf0a8"},"arrow-circle-left":{code:"\uf0a8"},"circle-arrow-right":{code:"\uf0a9"},"arrow-circle-right":{code:"\uf0a9"},"circle-arrow-up":{code:"\uf0aa"},"arrow-circle-up":{code:"\uf0aa"},
"circle-check":{code:"\uf058"},"check-circle":{code:"\uf058"},"circle-chevron-down":{code:"\uf13a"},"chevron-circle-down":{code:"\uf13a"},"circle-chevron-left":{code:"\uf137"},"chevron-circle-left":{code:"\uf137"},"circle-chevron-right":{code:"\uf138"},"chevron-circle-right":{code:"\uf138"},"circle-chevron-up":{code:"\uf139"},"chevron-circle-up":{code:"\uf139"},"circle-dollar-to-slot":{code:"\uf4b9"},donate:{code:"\uf4b9"},"circle-dot":{code:"\uf192"},"dot-circle":{code:"\uf192"},"circle-down":{code:"\uf358"},
"arrow-alt-circle-down":{code:"\uf358"},"circle-exclamation":{code:"\uf06a"},"exclamation-circle":{code:"\uf06a"},"circle-h":{code:"\uf47e"},"hospital-symbol":{code:"\uf47e"},"circle-half-stroke":{code:"\uf042"},adjust:{code:"\uf042"},"circle-info":{code:"\uf05a"},"info-circle":{code:"\uf05a"},"circle-left":{code:"\uf359"},"arrow-alt-circle-left":{code:"\uf359"},"circle-minus":{code:"\uf056"},"minus-circle":{code:"\uf056"},"circle-nodes":{code:"\ue4e2"},"circle-notch":{code:"\uf1ce"},"circle-pause":{code:"\uf28b"},
"pause-circle":{code:"\uf28b"},"circle-play":{code:"\uf144"},"play-circle":{code:"\uf144"},"circle-plus":{code:"\uf055"},"plus-circle":{code:"\uf055"},"circle-question":{code:"\uf059"},"question-circle":{code:"\uf059"},"circle-radiation":{code:"\uf7ba"},"radiation-alt":{code:"\uf7ba"},"circle-right":{code:"\uf35a"},"arrow-alt-circle-right":{code:"\uf35a"},"circle-stop":{code:"\uf28d"},"stop-circle":{code:"\uf28d"},"circle-up":{code:"\uf35b"},"arrow-alt-circle-up":{code:"\uf35b"},"circle-user":{code:"\uf2bd"},
"user-circle":{code:"\uf2bd"},"circle-xmark":{code:"\uf057"},"times-circle":{code:"\uf057"},"xmark-circle":{code:"\uf057"},city:{code:"\uf64f"},clapperboard:{code:"\ue131"},clipboard:{code:"\uf328"},"clipboard-check":{code:"\uf46c"},"clipboard-list":{code:"\uf46d"},"clipboard-question":{code:"\ue4e3"},"clipboard-user":{code:"\uf7f3"},clock:{code:"\uf017"},"clock-four":{code:"\uf017"},"clock-rotate-left":{code:"\uf1da"},history:{code:"\uf1da"},clone:{code:"\uf24d"},"closed-captioning":{code:"\uf20a"},
cloud:{code:"\uf0c2"},"cloud-arrow-down":{code:"\uf0ed"},"cloud-download":{code:"\uf0ed"},"cloud-download-alt":{code:"\uf0ed"},"cloud-arrow-up":{code:"\uf0ee"},"cloud-upload":{code:"\uf0ee"},"cloud-upload-alt":{code:"\uf0ee"},"cloud-bolt":{code:"\uf76c"},thunderstorm:{code:"\uf76c"},"cloud-meatball":{code:"\uf73b"},"cloud-moon":{code:"\uf6c3"},"cloud-moon-rain":{code:"\uf73c"},"cloud-rain":{code:"\uf73d"},"cloud-showers-heavy":{code:"\uf740"},"cloud-showers-water":{code:"\ue4e4"},"cloud-sun":{code:"\uf6c4"},
"cloud-sun-rain":{code:"\uf743"},clover:{code:"\ue139"},code:{code:"\uf121"},"code-branch":{code:"\uf126"},"code-commit":{code:"\uf386"},"code-compare":{code:"\ue13a"},"code-fork":{code:"\ue13b"},"code-merge":{code:"\uf387"},"code-pull-request":{code:"\ue13c"},coins:{code:"\uf51e"},"colon-sign":{code:"\ue140"},comment:{code:"\uf075"},"comment-dollar":{code:"\uf651"},"comment-dots":{code:"\uf4ad"},commenting:{code:"\uf4ad"},"comment-medical":{code:"\uf7f5"},"comment-slash":{code:"\uf4b3"},"comment-sms":{code:"\uf7cd"},
sms:{code:"\uf7cd"},comments:{code:"\uf086"},"comments-dollar":{code:"\uf653"},"compact-disc":{code:"\uf51f"},compass:{code:"\uf14e"},"compass-drafting":{code:"\uf568"},"drafting-compass":{code:"\uf568"},compress:{code:"\uf066"},computer:{code:"\ue4e5"},"computer-mouse":{code:"\uf8cc"},mouse:{code:"\uf8cc"},cookie:{code:"\uf563"},"cookie-bite":{code:"\uf564"},copy:{code:"\uf0c5"},copyright:{code:"\uf1f9"},couch:{code:"\uf4b8"},cow:{code:"\uf6c8"},"credit-card":{code:"\uf09d"},"credit-card-alt":{code:"\uf09d"},
crop:{code:"\uf125"},"crop-simple":{code:"\uf565"},"crop-alt":{code:"\uf565"},cross:{code:"\uf654"},crosshairs:{code:"\uf05b"},crow:{code:"\uf520"},crown:{code:"\uf521"},crutch:{code:"\uf7f7"},"cruzeiro-sign":{code:"\ue152"},cube:{code:"\uf1b2"},cubes:{code:"\uf1b3"},"cubes-stacked":{code:"\ue4e6"},d:{code:"D"},database:{code:"\uf1c0"},"delete-left":{code:"\uf55a"},backspace:{code:"\uf55a"},democrat:{code:"\uf747"},desktop:{code:"\uf390"},"desktop-alt":{code:"\uf390"},dharmachakra:{code:"\uf655"},
"diagram-next":{code:"\ue476"},"diagram-predecessor":{code:"\ue477"},"diagram-project":{code:"\uf542"},"project-diagram":{code:"\uf542"},"diagram-successor":{code:"\ue47a"},diamond:{code:"\uf219"},"diamond-turn-right":{code:"\uf5eb"},directions:{code:"\uf5eb"},dice:{code:"\uf522"},"dice-d20":{code:"\uf6cf"},"dice-d6":{code:"\uf6d1"},"dice-five":{code:"\uf523"},"dice-four":{code:"\uf524"},"dice-one":{code:"\uf525"},"dice-six":{code:"\uf526"},"dice-three":{code:"\uf527"},"dice-two":{code:"\uf528"},
disease:{code:"\uf7fa"},display:{code:"\ue163"},divide:{code:"\uf529"},dna:{code:"\uf471"},dog:{code:"\uf6d3"},"dollar-sign":{code:"$"},dollar:{code:"$"},usd:{code:"$"},dolly:{code:"\uf472"},"dolly-box":{code:"\uf472"},"dong-sign":{code:"\ue169"},"door-closed":{code:"\uf52a"},"door-open":{code:"\uf52b"},dove:{code:"\uf4ba"},"down-left-and-up-right-to-center":{code:"\uf422"},"compress-alt":{code:"\uf422"},"down-long":{code:"\uf309"},"long-arrow-alt-down":{code:"\uf309"},download:{code:"\uf019"},dragon:{code:"\uf6d5"},
"draw-polygon":{code:"\uf5ee"},droplet:{code:"\uf043"},tint:{code:"\uf043"},"droplet-slash":{code:"\uf5c7"},"tint-slash":{code:"\uf5c7"},drum:{code:"\uf569"},"drum-steelpan":{code:"\uf56a"},"drumstick-bite":{code:"\uf6d7"},dumbbell:{code:"\uf44b"},dumpster:{code:"\uf793"},"dumpster-fire":{code:"\uf794"},dungeon:{code:"\uf6d9"},e:{code:"E"},"ear-deaf":{code:"\uf2a4"},deaf:{code:"\uf2a4"},deafness:{code:"\uf2a4"},"hard-of-hearing":{code:"\uf2a4"},"ear-listen":{code:"\uf2a2"},"assistive-listening-systems":{code:"\uf2a2"},
"earth-africa":{code:"\uf57c"},"globe-africa":{code:"\uf57c"},"earth-americas":{code:"\uf57d"},earth:{code:"\uf57d"},"earth-america":{code:"\uf57d"},"globe-americas":{code:"\uf57d"},"earth-asia":{code:"\uf57e"},"globe-asia":{code:"\uf57e"},"earth-europe":{code:"\uf7a2"},"globe-europe":{code:"\uf7a2"},"earth-oceania":{code:"\ue47b"},"globe-oceania":{code:"\ue47b"},egg:{code:"\uf7fb"},eject:{code:"\uf052"},elevator:{code:"\ue16d"},ellipsis:{code:"\uf141"},"ellipsis-h":{code:"\uf141"},"ellipsis-vertical":{code:"\uf142"},
"ellipsis-v":{code:"\uf142"},envelope:{code:"\uf0e0"},"envelope-circle-check":{code:"\ue4e8"},"envelope-open":{code:"\uf2b6"},"envelope-open-text":{code:"\uf658"},"envelopes-bulk":{code:"\uf674"},"mail-bulk":{code:"\uf674"},equals:{code:"="},eraser:{code:"\uf12d"},ethernet:{code:"\uf796"},"euro-sign":{code:"\uf153"},eur:{code:"\uf153"},euro:{code:"\uf153"},exclamation:{code:"!"},expand:{code:"\uf065"},explosion:{code:"\ue4e9"},eye:{code:"\uf06e"},"eye-dropper":{code:"\uf1fb"},"eye-dropper-empty":{code:"\uf1fb"},
eyedropper:{code:"\uf1fb"},"eye-low-vision":{code:"\uf2a8"},"low-vision":{code:"\uf2a8"},"eye-slash":{code:"\uf070"},f:{code:"F"},"face-angry":{code:"\uf556"},angry:{code:"\uf556"},"face-dizzy":{code:"\uf567"},dizzy:{code:"\uf567"},"face-flushed":{code:"\uf579"},flushed:{code:"\uf579"},"face-frown":{code:"\uf119"},frown:{code:"\uf119"},"face-frown-open":{code:"\uf57a"},"frown-open":{code:"\uf57a"},"face-grimace":{code:"\uf57f"},grimace:{code:"\uf57f"},"face-grin":{code:"\uf580"},grin:{code:"\uf580"},
"face-grin-beam":{code:"\uf582"},"grin-beam":{code:"\uf582"},"face-grin-beam-sweat":{code:"\uf583"},"grin-beam-sweat":{code:"\uf583"},"face-grin-hearts":{code:"\uf584"},"grin-hearts":{code:"\uf584"},"face-grin-squint":{code:"\uf585"},"grin-squint":{code:"\uf585"},"face-grin-squint-tears":{code:"\uf586"},"grin-squint-tears":{code:"\uf586"},"face-grin-stars":{code:"\uf587"},"grin-stars":{code:"\uf587"},"face-grin-tears":{code:"\uf588"},"grin-tears":{code:"\uf588"},"face-grin-tongue":{code:"\uf589"},
"grin-tongue":{code:"\uf589"},"face-grin-tongue-squint":{code:"\uf58a"},"grin-tongue-squint":{code:"\uf58a"},"face-grin-tongue-wink":{code:"\uf58b"},"grin-tongue-wink":{code:"\uf58b"},"face-grin-wide":{code:"\uf581"},"grin-alt":{code:"\uf581"},"face-grin-wink":{code:"\uf58c"},"grin-wink":{code:"\uf58c"},"face-kiss":{code:"\uf596"},kiss:{code:"\uf596"},"face-kiss-beam":{code:"\uf597"},"kiss-beam":{code:"\uf597"},"face-kiss-wink-heart":{code:"\uf598"},"kiss-wink-heart":{code:"\uf598"},"face-laugh":{code:"\uf599"},
laugh:{code:"\uf599"},"face-laugh-beam":{code:"\uf59a"},"laugh-beam":{code:"\uf59a"},"face-laugh-squint":{code:"\uf59b"},"laugh-squint":{code:"\uf59b"},"face-laugh-wink":{code:"\uf59c"},"laugh-wink":{code:"\uf59c"},"face-meh":{code:"\uf11a"},meh:{code:"\uf11a"},"face-meh-blank":{code:"\uf5a4"},"meh-blank":{code:"\uf5a4"},"face-rolling-eyes":{code:"\uf5a5"},"meh-rolling-eyes":{code:"\uf5a5"},"face-sad-cry":{code:"\uf5b3"},"sad-cry":{code:"\uf5b3"},"face-sad-tear":{code:"\uf5b4"},"sad-tear":{code:"\uf5b4"},
"face-smile":{code:"\uf118"},smile:{code:"\uf118"},"face-smile-beam":{code:"\uf5b8"},"smile-beam":{code:"\uf5b8"},"face-smile-wink":{code:"\uf4da"},"smile-wink":{code:"\uf4da"},"face-surprise":{code:"\uf5c2"},surprise:{code:"\uf5c2"},"face-tired":{code:"\uf5c8"},tired:{code:"\uf5c8"},fan:{code:"\uf863"},faucet:{code:"\ue005"},"faucet-drip":{code:"\ue006"},fax:{code:"\uf1ac"},feather:{code:"\uf52d"},"feather-pointed":{code:"\uf56b"},"feather-alt":{code:"\uf56b"},ferry:{code:"\ue4ea"},file:{code:"\uf15b"},
"file-arrow-down":{code:"\uf56d"},"file-download":{code:"\uf56d"},"file-arrow-up":{code:"\uf574"},"file-upload":{code:"\uf574"},"file-audio":{code:"\uf1c7"},"file-circle-check":{code:"\ue493"},"file-circle-exclamation":{code:"\ue4eb"},"file-circle-minus":{code:"\ue4ed"},"file-circle-plus":{code:"\ue4ee"},"file-circle-question":{code:"\ue4ef"},"file-circle-xmark":{code:"\ue494"},"file-code":{code:"\uf1c9"},"file-contract":{code:"\uf56c"},"file-csv":{code:"\uf6dd"},"file-excel":{code:"\uf1c3"},"file-export":{code:"\uf56e"},
"arrow-right-from-file":{code:"\uf56e"},"file-image":{code:"\uf1c5"},"file-import":{code:"\uf56f"},"arrow-right-to-file":{code:"\uf56f"},"file-invoice":{code:"\uf570"},"file-invoice-dollar":{code:"\uf571"},"file-lines":{code:"\uf15c"},"file-alt":{code:"\uf15c"},"file-text":{code:"\uf15c"},"file-medical":{code:"\uf477"},"file-pdf":{code:"\uf1c1"},"file-pen":{code:"\uf31c"},"file-edit":{code:"\uf31c"},"file-powerpoint":{code:"\uf1c4"},"file-prescription":{code:"\uf572"},"file-shield":{code:"\ue4f0"},
"file-signature":{code:"\uf573"},"file-video":{code:"\uf1c8"},"file-waveform":{code:"\uf478"},"file-medical-alt":{code:"\uf478"},"file-word":{code:"\uf1c2"},"file-zipper":{code:"\uf1c6"},"file-archive":{code:"\uf1c6"},fill:{code:"\uf575"},"fill-drip":{code:"\uf576"},film:{code:"\uf008"},filter:{code:"\uf0b0"},"filter-circle-dollar":{code:"\uf662"},"funnel-dollar":{code:"\uf662"},"filter-circle-xmark":{code:"\ue17b"},fingerprint:{code:"\uf577"},fire:{code:"\uf06d"},"fire-burner":{code:"\ue4f1"},"fire-extinguisher":{code:"\uf134"},
"fire-flame-curved":{code:"\uf7e4"},"fire-alt":{code:"\uf7e4"},"fire-flame-simple":{code:"\uf46a"},burn:{code:"\uf46a"},fish:{code:"\uf578"},"fish-fins":{code:"\ue4f2"},flag:{code:"\uf024"},"flag-checkered":{code:"\uf11e"},"flag-usa":{code:"\uf74d"},flask:{code:"\uf0c3"},"flask-vial":{code:"\ue4f3"},"floppy-disk":{code:"\uf0c7"},save:{code:"\uf0c7"},"florin-sign":{code:"\ue184"},folder:{code:"\uf07b"},"folder-blank":{code:"\uf07b"},"folder-closed":{code:"\ue185"},"folder-minus":{code:"\uf65d"},"folder-open":{code:"\uf07c"},
"folder-plus":{code:"\uf65e"},"folder-tree":{code:"\uf802"},font:{code:"\uf031"},football:{code:"\uf44e"},"football-ball":{code:"\uf44e"},forward:{code:"\uf04e"},"forward-fast":{code:"\uf050"},"fast-forward":{code:"\uf050"},"forward-step":{code:"\uf051"},"step-forward":{code:"\uf051"},"franc-sign":{code:"\ue18f"},frog:{code:"\uf52e"},futbol:{code:"\uf1e3"},"futbol-ball":{code:"\uf1e3"},"soccer-ball":{code:"\uf1e3"},g:{code:"G"},gamepad:{code:"\uf11b"},"gas-pump":{code:"\uf52f"},gauge:{code:"\uf624"},
dashboard:{code:"\uf624"},"gauge-med":{code:"\uf624"},"tachometer-alt-average":{code:"\uf624"},"gauge-high":{code:"\uf625"},"tachometer-alt":{code:"\uf625"},"tachometer-alt-fast":{code:"\uf625"},"gauge-simple":{code:"\uf629"},"gauge-simple-med":{code:"\uf629"},"tachometer-average":{code:"\uf629"},"gauge-simple-high":{code:"\uf62a"},tachometer:{code:"\uf62a"},"tachometer-fast":{code:"\uf62a"},gavel:{code:"\uf0e3"},legal:{code:"\uf0e3"},gear:{code:"\uf013"},cog:{code:"\uf013"},gears:{code:"\uf085"},
cogs:{code:"\uf085"},gem:{code:"\uf3a5"},genderless:{code:"\uf22d"},ghost:{code:"\uf6e2"},gift:{code:"\uf06b"},gifts:{code:"\uf79c"},"glass-water":{code:"\ue4f4"},"glass-water-droplet":{code:"\ue4f5"},glasses:{code:"\uf530"},globe:{code:"\uf0ac"},"golf-ball-tee":{code:"\uf450"},"golf-ball":{code:"\uf450"},gopuram:{code:"\uf664"},"graduation-cap":{code:"\uf19d"},"mortar-board":{code:"\uf19d"},"greater-than":{code:">"},"greater-than-equal":{code:"\uf532"},grip:{code:"\uf58d"},"grip-horizontal":{code:"\uf58d"},
"grip-lines":{code:"\uf7a4"},"grip-lines-vertical":{code:"\uf7a5"},"grip-vertical":{code:"\uf58e"},"group-arrows-rotate":{code:"\ue4f6"},"guarani-sign":{code:"\ue19a"},guitar:{code:"\uf7a6"},gun:{code:"\ue19b"},h:{code:"H"},hammer:{code:"\uf6e3"},hamsa:{code:"\uf665"},hand:{code:"\uf256"},"hand-paper":{code:"\uf256"},"hand-back-fist":{code:"\uf255"},"hand-rock":{code:"\uf255"},"hand-dots":{code:"\uf461"},allergies:{code:"\uf461"},"hand-fist":{code:"\uf6de"},"fist-raised":{code:"\uf6de"},"hand-holding":{code:"\uf4bd"},
"hand-holding-dollar":{code:"\uf4c0"},"hand-holding-usd":{code:"\uf4c0"},"hand-holding-droplet":{code:"\uf4c1"},"hand-holding-water":{code:"\uf4c1"},"hand-holding-hand":{code:"\ue4f7"},"hand-holding-heart":{code:"\uf4be"},"hand-holding-medical":{code:"\ue05c"},"hand-lizard":{code:"\uf258"},"hand-middle-finger":{code:"\uf806"},"hand-peace":{code:"\uf25b"},"hand-point-down":{code:"\uf0a7"},"hand-point-left":{code:"\uf0a5"},"hand-point-right":{code:"\uf0a4"},"hand-point-up":{code:"\uf0a6"},"hand-pointer":{code:"\uf25a"},
"hand-scissors":{code:"\uf257"},"hand-sparkles":{code:"\ue05d"},"hand-spock":{code:"\uf259"},handcuffs:{code:"\ue4f8"},hands:{code:"\uf2a7"},"sign-language":{code:"\uf2a7"},signing:{code:"\uf2a7"},"hands-asl-interpreting":{code:"\uf2a3"},"american-sign-language-interpreting":{code:"\uf2a3"},"asl-interpreting":{code:"\uf2a3"},"hands-american-sign-language-interpreting":{code:"\uf2a3"},"hands-bound":{code:"\ue4f9"},"hands-bubbles":{code:"\ue05e"},"hands-wash":{code:"\ue05e"},"hands-clapping":{code:"\ue1a8"},
"hands-holding":{code:"\uf4c2"},"hands-holding-child":{code:"\ue4fa"},"hands-holding-circle":{code:"\ue4fb"},"hands-praying":{code:"\uf684"},"praying-hands":{code:"\uf684"},handshake:{code:"\uf2b5"},"handshake-angle":{code:"\uf4c4"},"hands-helping":{code:"\uf4c4"},"handshake-simple":{code:"\uf4c6"},"handshake-alt":{code:"\uf4c6"},"handshake-simple-slash":{code:"\ue05f"},"handshake-alt-slash":{code:"\ue05f"},"handshake-slash":{code:"\ue060"},hanukiah:{code:"\uf6e6"},"hard-drive":{code:"\uf0a0"},hdd:{code:"\uf0a0"},
hashtag:{code:"#"},"hat-cowboy":{code:"\uf8c0"},"hat-cowboy-side":{code:"\uf8c1"},"hat-wizard":{code:"\uf6e8"},"head-side-cough":{code:"\ue061"},"head-side-cough-slash":{code:"\ue062"},"head-side-mask":{code:"\ue063"},"head-side-virus":{code:"\ue064"},heading:{code:"\uf1dc"},header:{code:"\uf1dc"},headphones:{code:"\uf025"},"headphones-simple":{code:"\uf58f"},"headphones-alt":{code:"\uf58f"},headset:{code:"\uf590"},heart:{code:"\uf004"},"heart-circle-bolt":{code:"\ue4fc"},"heart-circle-check":{code:"\ue4fd"},
"heart-circle-exclamation":{code:"\ue4fe"},"heart-circle-minus":{code:"\ue4ff"},"heart-circle-plus":{code:"\ue500"},"heart-circle-xmark":{code:"\ue501"},"heart-crack":{code:"\uf7a9"},"heart-broken":{code:"\uf7a9"},"heart-pulse":{code:"\uf21e"},heartbeat:{code:"\uf21e"},helicopter:{code:"\uf533"},"helicopter-symbol":{code:"\ue502"},"helmet-safety":{code:"\uf807"},"hard-hat":{code:"\uf807"},"hat-hard":{code:"\uf807"},"helmet-un":{code:"\ue503"},highlighter:{code:"\uf591"},"hill-avalanche":{code:"\ue507"},
"hill-rockslide":{code:"\ue508"},hippo:{code:"\uf6ed"},"hockey-puck":{code:"\uf453"},"holly-berry":{code:"\uf7aa"},horse:{code:"\uf6f0"},"horse-head":{code:"\uf7ab"},hospital:{code:"\uf0f8"},"hospital-alt":{code:"\uf0f8"},"hospital-wide":{code:"\uf0f8"},"hospital-user":{code:"\uf80d"},"hot-tub-person":{code:"\uf593"},"hot-tub":{code:"\uf593"},hotdog:{code:"\uf80f"},hotel:{code:"\uf594"},hourglass:{code:"\uf254"},"hourglass-2":{code:"\uf254"},"hourglass-half":{code:"\uf254"},"hourglass-empty":{code:"\uf252"},
"hourglass-end":{code:"\uf253"},"hourglass-3":{code:"\uf253"},"hourglass-start":{code:"\uf251"},"hourglass-1":{code:"\uf251"},house:{code:"\uf015"},home:{code:"\uf015"},"home-alt":{code:"\uf015"},"home-lg-alt":{code:"\uf015"},"house-chimney":{code:"\ue3af"},"home-lg":{code:"\ue3af"},"house-chimney-crack":{code:"\uf6f1"},"house-damage":{code:"\uf6f1"},"house-chimney-medical":{code:"\uf7f2"},"clinic-medical":{code:"\uf7f2"},"house-chimney-user":{code:"\ue065"},"house-chimney-window":{code:"\ue00d"},
"house-circle-check":{code:"\ue509"},"house-circle-exclamation":{code:"\ue50a"},"house-circle-xmark":{code:"\ue50b"},"house-crack":{code:"\ue3b1"},"house-fire":{code:"\ue50c"},"house-flag":{code:"\ue50d"},"house-flood-water":{code:"\ue50e"},"house-flood-water-circle-arrow-right":{code:"\ue50f"},"house-laptop":{code:"\ue066"},"laptop-house":{code:"\ue066"},"house-lock":{code:"\ue510"},"house-medical":{code:"\ue3b2"},"house-medical-circle-check":{code:"\ue511"},"house-medical-circle-exclamation":{code:"\ue512"},
"house-medical-circle-xmark":{code:"\ue513"},"house-medical-flag":{code:"\ue514"},"house-signal":{code:"\ue012"},"house-tsunami":{code:"\ue515"},"house-user":{code:"\ue1b0"},"home-user":{code:"\ue1b0"},"hryvnia-sign":{code:"\uf6f2"},hryvnia:{code:"\uf6f2"},hurricane:{code:"\uf751"},i:{code:"I"},"i-cursor":{code:"\uf246"},"ice-cream":{code:"\uf810"},icicles:{code:"\uf7ad"},icons:{code:"\uf86d"},"heart-music-camera-bolt":{code:"\uf86d"},"id-badge":{code:"\uf2c1"},"id-card":{code:"\uf2c2"},"drivers-license":{code:"\uf2c2"},
"id-card-clip":{code:"\uf47f"},"id-card-alt":{code:"\uf47f"},igloo:{code:"\uf7ae"},image:{code:"\uf03e"},"image-portrait":{code:"\uf3e0"},portrait:{code:"\uf3e0"},images:{code:"\uf302"},inbox:{code:"\uf01c"},indent:{code:"\uf03c"},"indian-rupee-sign":{code:"\ue1bc"},"indian-rupee":{code:"\ue1bc"},inr:{code:"\ue1bc"},industry:{code:"\uf275"},infinity:{code:"\uf534"},info:{code:"\uf129"},italic:{code:"\uf033"},j:{code:"J"},jar:{code:"\ue516"},"jar-wheat":{code:"\ue517"},jedi:{code:"\uf669"},"jet-fighter":{code:"\uf0fb"},
"fighter-jet":{code:"\uf0fb"},"jet-fighter-up":{code:"\ue518"},joint:{code:"\uf595"},"jug-detergent":{code:"\ue519"},k:{code:"K"},kaaba:{code:"\uf66b"},key:{code:"\uf084"},keyboard:{code:"\uf11c"},khanda:{code:"\uf66d"},"kip-sign":{code:"\ue1c4"},"kit-medical":{code:"\uf479"},"first-aid":{code:"\uf479"},"kitchen-set":{code:"\ue51a"},"kiwi-bird":{code:"\uf535"},l:{code:"L"},"land-mine-on":{code:"\ue51b"},landmark:{code:"\uf66f"},"landmark-dome":{code:"\uf752"},"landmark-alt":{code:"\uf752"},"landmark-flag":{code:"\ue51c"},
language:{code:"\uf1ab"},laptop:{code:"\uf109"},"laptop-code":{code:"\uf5fc"},"laptop-file":{code:"\ue51d"},"laptop-medical":{code:"\uf812"},"lari-sign":{code:"\ue1c8"},"layer-group":{code:"\uf5fd"},leaf:{code:"\uf06c"},"left-long":{code:"\uf30a"},"long-arrow-alt-left":{code:"\uf30a"},"left-right":{code:"\uf337"},"arrows-alt-h":{code:"\uf337"},lemon:{code:"\uf094"},"less-than":{code:"<"},"less-than-equal":{code:"\uf537"},"life-ring":{code:"\uf1cd"},lightbulb:{code:"\uf0eb"},"lines-leaning":{code:"\ue51e"},
link:{code:"\uf0c1"},chain:{code:"\uf0c1"},"link-slash":{code:"\uf127"},"chain-broken":{code:"\uf127"},"chain-slash":{code:"\uf127"},unlink:{code:"\uf127"},"lira-sign":{code:"\uf195"},list:{code:"\uf03a"},"list-squares":{code:"\uf03a"},"list-check":{code:"\uf0ae"},tasks:{code:"\uf0ae"},"list-ol":{code:"\uf0cb"},"list-1-2":{code:"\uf0cb"},"list-numeric":{code:"\uf0cb"},"list-ul":{code:"\uf0ca"},"list-dots":{code:"\uf0ca"},"litecoin-sign":{code:"\ue1d3"},"location-arrow":{code:"\uf124"},"location-crosshairs":{code:"\uf601"},
location:{code:"\uf601"},"location-dot":{code:"\uf3c5"},"map-marker-alt":{code:"\uf3c5"},"location-pin":{code:"\uf041"},"map-marker":{code:"\uf041"},"location-pin-lock":{code:"\ue51f"},lock:{code:"\uf023"},"lock-open":{code:"\uf3c1"},locust:{code:"\ue520"},lungs:{code:"\uf604"},"lungs-virus":{code:"\ue067"},m:{code:"M"},magnet:{code:"\uf076"},"magnifying-glass":{code:"\uf002"},search:{code:"\uf002"},"magnifying-glass-arrow-right":{code:"\ue521"},"magnifying-glass-chart":{code:"\ue522"},"magnifying-glass-dollar":{code:"\uf688"},
"search-dollar":{code:"\uf688"},"magnifying-glass-location":{code:"\uf689"},"search-location":{code:"\uf689"},"magnifying-glass-minus":{code:"\uf010"},"search-minus":{code:"\uf010"},"magnifying-glass-plus":{code:"\uf00e"},"search-plus":{code:"\uf00e"},"manat-sign":{code:"\ue1d5"},map:{code:"\uf279"},"map-location":{code:"\uf59f"},"map-marked":{code:"\uf59f"},"map-location-dot":{code:"\uf5a0"},"map-marked-alt":{code:"\uf5a0"},"map-pin":{code:"\uf276"},marker:{code:"\uf5a1"},mars:{code:"\uf222"},"mars-and-venus":{code:"\uf224"},
"mars-and-venus-burst":{code:"\ue523"},"mars-double":{code:"\uf227"},"mars-stroke":{code:"\uf229"},"mars-stroke-right":{code:"\uf22b"},"mars-stroke-h":{code:"\uf22b"},"mars-stroke-up":{code:"\uf22a"},"mars-stroke-v":{code:"\uf22a"},"martini-glass":{code:"\uf57b"},"glass-martini-alt":{code:"\uf57b"},"martini-glass-citrus":{code:"\uf561"},cocktail:{code:"\uf561"},"martini-glass-empty":{code:"\uf000"},"glass-martini":{code:"\uf000"},mask:{code:"\uf6fa"},"mask-face":{code:"\ue1d7"},"mask-ventilator":{code:"\ue524"},
"masks-theater":{code:"\uf630"},"theater-masks":{code:"\uf630"},"mattress-pillow":{code:"\ue525"},maximize:{code:"\uf31e"},"expand-arrows-alt":{code:"\uf31e"},medal:{code:"\uf5a2"},memory:{code:"\uf538"},menorah:{code:"\uf676"},mercury:{code:"\uf223"},message:{code:"\uf27a"},"comment-alt":{code:"\uf27a"},meteor:{code:"\uf753"},microchip:{code:"\uf2db"},microphone:{code:"\uf130"},"microphone-lines":{code:"\uf3c9"},"microphone-alt":{code:"\uf3c9"},"microphone-lines-slash":{code:"\uf539"},"microphone-alt-slash":{code:"\uf539"},
"microphone-slash":{code:"\uf131"},microscope:{code:"\uf610"},"mill-sign":{code:"\ue1ed"},minimize:{code:"\uf78c"},"compress-arrows-alt":{code:"\uf78c"},minus:{code:"\uf068"},subtract:{code:"\uf068"},mitten:{code:"\uf7b5"},mobile:{code:"\uf3ce"},"mobile-android":{code:"\uf3ce"},"mobile-phone":{code:"\uf3ce"},"mobile-button":{code:"\uf10b"},"mobile-retro":{code:"\ue527"},"mobile-screen":{code:"\uf3cf"},"mobile-android-alt":{code:"\uf3cf"},"mobile-screen-button":{code:"\uf3cd"},"mobile-alt":{code:"\uf3cd"},
"money-bill":{code:"\uf0d6"},"money-bill-1":{code:"\uf3d1"},"money-bill-alt":{code:"\uf3d1"},"money-bill-1-wave":{code:"\uf53b"},"money-bill-wave-alt":{code:"\uf53b"},"money-bill-transfer":{code:"\ue528"},"money-bill-trend-up":{code:"\ue529"},"money-bill-wave":{code:"\uf53a"},"money-bill-wheat":{code:"\ue52a"},"money-bills":{code:"\ue1f3"},"money-check":{code:"\uf53c"},"money-check-dollar":{code:"\uf53d"},"money-check-alt":{code:"\uf53d"},monument:{code:"\uf5a6"},moon:{code:"\uf186"},"mortar-pestle":{code:"\uf5a7"},
mosque:{code:"\uf678"},mosquito:{code:"\ue52b"},"mosquito-net":{code:"\ue52c"},motorcycle:{code:"\uf21c"},mound:{code:"\ue52d"},mountain:{code:"\uf6fc"},"mountain-city":{code:"\ue52e"},"mountain-sun":{code:"\ue52f"},"mug-hot":{code:"\uf7b6"},"mug-saucer":{code:"\uf0f4"},coffee:{code:"\uf0f4"},music:{code:"\uf001"},n:{code:"N"},"naira-sign":{code:"\ue1f6"},"network-wired":{code:"\uf6ff"},neuter:{code:"\uf22c"},newspaper:{code:"\uf1ea"},"not-equal":{code:"\uf53e"},"note-sticky":{code:"\uf249"},"sticky-note":{code:"\uf249"},
"notes-medical":{code:"\uf481"},o:{code:"O"},"object-group":{code:"\uf247"},"object-ungroup":{code:"\uf248"},"oil-can":{code:"\uf613"},"oil-well":{code:"\ue532"},om:{code:"\uf679"},otter:{code:"\uf700"},outdent:{code:"\uf03b"},dedent:{code:"\uf03b"},p:{code:"P"},pager:{code:"\uf815"},"paint-roller":{code:"\uf5aa"},paintbrush:{code:"\uf1fc"},"paint-brush":{code:"\uf1fc"},palette:{code:"\uf53f"},pallet:{code:"\uf482"},panorama:{code:"\ue209"},"paper-plane":{code:"\uf1d8"},paperclip:{code:"\uf0c6"},
"parachute-box":{code:"\uf4cd"},paragraph:{code:"\uf1dd"},passport:{code:"\uf5ab"},paste:{code:"\uf0ea"},"file-clipboard":{code:"\uf0ea"},pause:{code:"\uf04c"},paw:{code:"\uf1b0"},peace:{code:"\uf67c"},pen:{code:"\uf304"},"pen-clip":{code:"\uf305"},"pen-alt":{code:"\uf305"},"pen-fancy":{code:"\uf5ac"},"pen-nib":{code:"\uf5ad"},"pen-ruler":{code:"\uf5ae"},"pencil-ruler":{code:"\uf5ae"},"pen-to-square":{code:"\uf044"},edit:{code:"\uf044"},pencil:{code:"\uf303"},"pencil-alt":{code:"\uf303"},"people-arrows-left-right":{code:"\ue068"},
"people-arrows":{code:"\ue068"},"people-carry-box":{code:"\uf4ce"},"people-carry":{code:"\uf4ce"},"people-group":{code:"\ue533"},"people-line":{code:"\ue534"},"people-pulling":{code:"\ue535"},"people-robbery":{code:"\ue536"},"people-roof":{code:"\ue537"},"pepper-hot":{code:"\uf816"},percent:{code:"%"},percentage:{code:"%"},person:{code:"\uf183"},male:{code:"\uf183"},"person-arrow-down-to-line":{code:"\ue538"},"person-arrow-up-from-line":{code:"\ue539"},"person-biking":{code:"\uf84a"},biking:{code:"\uf84a"},
"person-booth":{code:"\uf756"},"person-breastfeeding":{code:"\ue53a"},"person-burst":{code:"\ue53b"},"person-cane":{code:"\ue53c"},"person-chalkboard":{code:"\ue53d"},"person-circle-check":{code:"\ue53e"},"person-circle-exclamation":{code:"\ue53f"},"person-circle-minus":{code:"\ue540"},"person-circle-plus":{code:"\ue541"},"person-circle-question":{code:"\ue542"},"person-circle-xmark":{code:"\ue543"},"person-digging":{code:"\uf85e"},digging:{code:"\uf85e"},"person-dots-from-line":{code:"\uf470"},diagnoses:{code:"\uf470"},
"person-dress":{code:"\uf182"},female:{code:"\uf182"},"person-dress-burst":{code:"\ue544"},"person-drowning":{code:"\ue545"},"person-falling":{code:"\ue546"},"person-falling-burst":{code:"\ue547"},"person-half-dress":{code:"\ue548"},"person-harassing":{code:"\ue549"},"person-hiking":{code:"\uf6ec"},hiking:{code:"\uf6ec"},"person-military-pointing":{code:"\ue54a"},"person-military-rifle":{code:"\ue54b"},"person-military-to-person":{code:"\ue54c"},"person-praying":{code:"\uf683"},pray:{code:"\uf683"},
"person-pregnant":{code:"\ue31e"},"person-rays":{code:"\ue54d"},"person-rifle":{code:"\ue54e"},"person-running":{code:"\uf70c"},running:{code:"\uf70c"},"person-shelter":{code:"\ue54f"},"person-skating":{code:"\uf7c5"},skating:{code:"\uf7c5"},"person-skiing":{code:"\uf7c9"},skiing:{code:"\uf7c9"},"person-skiing-nordic":{code:"\uf7ca"},"skiing-nordic":{code:"\uf7ca"},"person-snowboarding":{code:"\uf7ce"},snowboarding:{code:"\uf7ce"},"person-swimming":{code:"\uf5c4"},swimmer:{code:"\uf5c4"},"person-through-window":{code:"\ue433"},
"person-walking":{code:"\uf554"},walking:{code:"\uf554"},"person-walking-arrow-loop-left":{code:"\ue551"},"person-walking-arrow-right":{code:"\ue552"},"person-walking-dashed-line-arrow-right":{code:"\ue553"},"person-walking-luggage":{code:"\ue554"},"person-walking-with-cane":{code:"\uf29d"},blind:{code:"\uf29d"},"peseta-sign":{code:"\ue221"},"peso-sign":{code:"\ue222"},phone:{code:"\uf095"},"phone-flip":{code:"\uf879"},"phone-alt":{code:"\uf879"},"phone-slash":{code:"\uf3dd"},"phone-volume":{code:"\uf2a0"},
"volume-control-phone":{code:"\uf2a0"},"photo-film":{code:"\uf87c"},"photo-video":{code:"\uf87c"},"piggy-bank":{code:"\uf4d3"},pills:{code:"\uf484"},"pizza-slice":{code:"\uf818"},"place-of-worship":{code:"\uf67f"},plane:{code:"\uf072"},"plane-arrival":{code:"\uf5af"},"plane-circle-check":{code:"\ue555"},"plane-circle-exclamation":{code:"\ue556"},"plane-circle-xmark":{code:"\ue557"},"plane-departure":{code:"\uf5b0"},"plane-lock":{code:"\ue558"},"plane-slash":{code:"\ue069"},"plane-up":{code:"\ue22d"},
"plant-wilt":{code:"\ue43b"},"plate-wheat":{code:"\ue55a"},play:{code:"\uf04b"},plug:{code:"\uf1e6"},"plug-circle-bolt":{code:"\ue55b"},"plug-circle-check":{code:"\ue55c"},"plug-circle-exclamation":{code:"\ue55d"},"plug-circle-minus":{code:"\ue55e"},"plug-circle-plus":{code:"\ue55f"},"plug-circle-xmark":{code:"\ue560"},plus:{code:"+"},add:{code:"+"},"plus-minus":{code:"\ue43c"},podcast:{code:"\uf2ce"},poo:{code:"\uf2fe"},"poo-storm":{code:"\uf75a"},"poo-bolt":{code:"\uf75a"},poop:{code:"\uf619"},
"power-off":{code:"\uf011"},prescription:{code:"\uf5b1"},"prescription-bottle":{code:"\uf485"},"prescription-bottle-medical":{code:"\uf486"},"prescription-bottle-alt":{code:"\uf486"},print:{code:"\uf02f"},"pump-medical":{code:"\ue06a"},"pump-soap":{code:"\ue06b"},"puzzle-piece":{code:"\uf12e"},q:{code:"Q"},qrcode:{code:"\uf029"},question:{code:"?"},"quote-left":{code:"\uf10d"},"quote-left-alt":{code:"\uf10d"},"quote-right":{code:"\uf10e"},"quote-right-alt":{code:"\uf10e"},r:{code:"R"},radiation:{code:"\uf7b9"},
radio:{code:"\uf8d7"},rainbow:{code:"\uf75b"},"ranking-star":{code:"\ue561"},receipt:{code:"\uf543"},"record-vinyl":{code:"\uf8d9"},"rectangle-ad":{code:"\uf641"},ad:{code:"\uf641"},"rectangle-list":{code:"\uf022"},"list-alt":{code:"\uf022"},"rectangle-xmark":{code:"\uf410"},"rectangle-times":{code:"\uf410"},"times-rectangle":{code:"\uf410"},"window-close":{code:"\uf410"},recycle:{code:"\uf1b8"},registered:{code:"\uf25d"},repeat:{code:"\uf363"},reply:{code:"\uf3e5"},"mail-reply":{code:"\uf3e5"},"reply-all":{code:"\uf122"},
"mail-reply-all":{code:"\uf122"},republican:{code:"\uf75e"},restroom:{code:"\uf7bd"},retweet:{code:"\uf079"},ribbon:{code:"\uf4d6"},"right-from-bracket":{code:"\uf2f5"},"sign-out-alt":{code:"\uf2f5"},"right-left":{code:"\uf362"},"exchange-alt":{code:"\uf362"},"right-long":{code:"\uf30b"},"long-arrow-alt-right":{code:"\uf30b"},"right-to-bracket":{code:"\uf2f6"},"sign-in-alt":{code:"\uf2f6"},ring:{code:"\uf70b"},road:{code:"\uf018"},"road-barrier":{code:"\ue562"},"road-bridge":{code:"\ue563"},"road-circle-check":{code:"\ue564"},
"road-circle-exclamation":{code:"\ue565"},"road-circle-xmark":{code:"\ue566"},"road-lock":{code:"\ue567"},"road-spikes":{code:"\ue568"},robot:{code:"\uf544"},rocket:{code:"\uf135"},rotate:{code:"\uf2f1"},"sync-alt":{code:"\uf2f1"},"rotate-left":{code:"\uf2ea"},"rotate-back":{code:"\uf2ea"},"rotate-backward":{code:"\uf2ea"},"undo-alt":{code:"\uf2ea"},"rotate-right":{code:"\uf2f9"},"redo-alt":{code:"\uf2f9"},"rotate-forward":{code:"\uf2f9"},route:{code:"\uf4d7"},rss:{code:"\uf09e"},feed:{code:"\uf09e"},
"ruble-sign":{code:"\uf158"},rouble:{code:"\uf158"},rub:{code:"\uf158"},ruble:{code:"\uf158"},rug:{code:"\ue569"},ruler:{code:"\uf545"},"ruler-combined":{code:"\uf546"},"ruler-horizontal":{code:"\uf547"},"ruler-vertical":{code:"\uf548"},"rupee-sign":{code:"\uf156"},rupee:{code:"\uf156"},"rupiah-sign":{code:"\ue23d"},s:{code:"S"},"sack-dollar":{code:"\uf81d"},"sack-xmark":{code:"\ue56a"},sailboat:{code:"\ue445"},satellite:{code:"\uf7bf"},"satellite-dish":{code:"\uf7c0"},"scale-balanced":{code:"\uf24e"},
"balance-scale":{code:"\uf24e"},"scale-unbalanced":{code:"\uf515"},"balance-scale-left":{code:"\uf515"},"scale-unbalanced-flip":{code:"\uf516"},"balance-scale-right":{code:"\uf516"},school:{code:"\uf549"},"school-circle-check":{code:"\ue56b"},"school-circle-exclamation":{code:"\ue56c"},"school-circle-xmark":{code:"\ue56d"},"school-flag":{code:"\ue56e"},"school-lock":{code:"\ue56f"},scissors:{code:"\uf0c4"},cut:{code:"\uf0c4"},screwdriver:{code:"\uf54a"},"screwdriver-wrench":{code:"\uf7d9"},tools:{code:"\uf7d9"},
scroll:{code:"\uf70e"},"scroll-torah":{code:"\uf6a0"},torah:{code:"\uf6a0"},"sd-card":{code:"\uf7c2"},section:{code:"\ue447"},seedling:{code:"\uf4d8"},sprout:{code:"\uf4d8"},server:{code:"\uf233"},shapes:{code:"\uf61f"},"triangle-circle-square":{code:"\uf61f"},share:{code:"\uf064"},"arrow-turn-right":{code:"\uf064"},"mail-forward":{code:"\uf064"},"share-from-square":{code:"\uf14d"},"share-square":{code:"\uf14d"},"share-nodes":{code:"\uf1e0"},"share-alt":{code:"\uf1e0"},"sheet-plastic":{code:"\ue571"},
"shekel-sign":{code:"\uf20b"},ils:{code:"\uf20b"},shekel:{code:"\uf20b"},sheqel:{code:"\uf20b"},"sheqel-sign":{code:"\uf20b"},shield:{code:"\uf132"},"shield-blank":{code:"\uf132"},"shield-cat":{code:"\ue572"},"shield-dog":{code:"\ue573"},"shield-halved":{code:"\uf3ed"},"shield-alt":{code:"\uf3ed"},"shield-heart":{code:"\ue574"},"shield-virus":{code:"\ue06c"},ship:{code:"\uf21a"},shirt:{code:"\uf553"},"t-shirt":{code:"\uf553"},tshirt:{code:"\uf553"},"shoe-prints":{code:"\uf54b"},shop:{code:"\uf54f"},
"store-alt":{code:"\uf54f"},"shop-lock":{code:"\ue4a5"},"shop-slash":{code:"\ue070"},"store-alt-slash":{code:"\ue070"},shower:{code:"\uf2cc"},shrimp:{code:"\ue448"},shuffle:{code:"\uf074"},random:{code:"\uf074"},"shuttle-space":{code:"\uf197"},"space-shuttle":{code:"\uf197"},"sign-hanging":{code:"\uf4d9"},sign:{code:"\uf4d9"},signal:{code:"\uf012"},"signal-5":{code:"\uf012"},"signal-perfect":{code:"\uf012"},signature:{code:"\uf5b7"},"signs-post":{code:"\uf277"},"map-signs":{code:"\uf277"},"sim-card":{code:"\uf7c4"},
sink:{code:"\ue06d"},sitemap:{code:"\uf0e8"},skull:{code:"\uf54c"},"skull-crossbones":{code:"\uf714"},slash:{code:"\uf715"},sleigh:{code:"\uf7cc"},sliders:{code:"\uf1de"},"sliders-h":{code:"\uf1de"},smog:{code:"\uf75f"},smoking:{code:"\uf48d"},snowflake:{code:"\uf2dc"},snowman:{code:"\uf7d0"},snowplow:{code:"\uf7d2"},soap:{code:"\ue06e"},socks:{code:"\uf696"},"solar-panel":{code:"\uf5ba"},sort:{code:"\uf0dc"},unsorted:{code:"\uf0dc"},"sort-down":{code:"\uf0dd"},"sort-desc":{code:"\uf0dd"},"sort-up":{code:"\uf0de"},
"sort-asc":{code:"\uf0de"},spa:{code:"\uf5bb"},"spaghetti-monster-flying":{code:"\uf67b"},pastafarianism:{code:"\uf67b"},"spell-check":{code:"\uf891"},spider:{code:"\uf717"},spinner:{code:"\uf110"},splotch:{code:"\uf5bc"},spoon:{code:"\uf2e5"},"utensil-spoon":{code:"\uf2e5"},"spray-can":{code:"\uf5bd"},"spray-can-sparkles":{code:"\uf5d0"},"air-freshener":{code:"\uf5d0"},square:{code:"\uf0c8"},"square-arrow-up-right":{code:"\uf14c"},"external-link-square":{code:"\uf14c"},"square-caret-down":{code:"\uf150"},
"caret-square-down":{code:"\uf150"},"square-caret-left":{code:"\uf191"},"caret-square-left":{code:"\uf191"},"square-caret-right":{code:"\uf152"},"caret-square-right":{code:"\uf152"},"square-caret-up":{code:"\uf151"},"caret-square-up":{code:"\uf151"},"square-check":{code:"\uf14a"},"check-square":{code:"\uf14a"},"square-envelope":{code:"\uf199"},"envelope-square":{code:"\uf199"},"square-full":{code:"\uf45c"},"square-h":{code:"\uf0fd"},"h-square":{code:"\uf0fd"},"square-minus":{code:"\uf146"},"minus-square":{code:"\uf146"},
"square-nfi":{code:"\ue576"},"square-parking":{code:"\uf540"},parking:{code:"\uf540"},"square-pen":{code:"\uf14b"},"pen-square":{code:"\uf14b"},"pencil-square":{code:"\uf14b"},"square-person-confined":{code:"\ue577"},"square-phone":{code:"\uf098"},"phone-square":{code:"\uf098"},"square-phone-flip":{code:"\uf87b"},"phone-square-alt":{code:"\uf87b"},"square-plus":{code:"\uf0fe"},"plus-square":{code:"\uf0fe"},"square-poll-horizontal":{code:"\uf682"},"poll-h":{code:"\uf682"},"square-poll-vertical":{code:"\uf681"},
poll:{code:"\uf681"},"square-root-variable":{code:"\uf698"},"square-root-alt":{code:"\uf698"},"square-rss":{code:"\uf143"},"rss-square":{code:"\uf143"},"square-share-nodes":{code:"\uf1e1"},"share-alt-square":{code:"\uf1e1"},"square-up-right":{code:"\uf360"},"external-link-square-alt":{code:"\uf360"},"square-virus":{code:"\ue578"},"square-xmark":{code:"\uf2d3"},"times-square":{code:"\uf2d3"},"xmark-square":{code:"\uf2d3"},"staff-aesculapius":{code:"\ue579"},"rod-asclepius":{code:"\ue579"},"rod-snake":{code:"\ue579"},
"staff-snake":{code:"\ue579"},stairs:{code:"\ue289"},stamp:{code:"\uf5bf"},star:{code:"\uf005"},"star-and-crescent":{code:"\uf699"},"star-half":{code:"\uf089"},"star-half-stroke":{code:"\uf5c0"},"star-half-alt":{code:"\uf5c0"},"star-of-david":{code:"\uf69a"},"star-of-life":{code:"\uf621"},"sterling-sign":{code:"\uf154"},gbp:{code:"\uf154"},"pound-sign":{code:"\uf154"},stethoscope:{code:"\uf0f1"},stop:{code:"\uf04d"},stopwatch:{code:"\uf2f2"},"stopwatch-20":{code:"\ue06f"},store:{code:"\uf54e"},"store-slash":{code:"\ue071"},
"street-view":{code:"\uf21d"},strikethrough:{code:"\uf0cc"},stroopwafel:{code:"\uf551"},subscript:{code:"\uf12c"},suitcase:{code:"\uf0f2"},"suitcase-medical":{code:"\uf0fa"},medkit:{code:"\uf0fa"},"suitcase-rolling":{code:"\uf5c1"},sun:{code:"\uf185"},"sun-plant-wilt":{code:"\ue57a"},superscript:{code:"\uf12b"},swatchbook:{code:"\uf5c3"},synagogue:{code:"\uf69b"},syringe:{code:"\uf48e"},t:{code:"T"},table:{code:"\uf0ce"},"table-cells":{code:"\uf00a"},th:{code:"\uf00a"},"table-cells-large":{code:"\uf009"},
"th-large":{code:"\uf009"},"table-columns":{code:"\uf0db"},columns:{code:"\uf0db"},"table-list":{code:"\uf00b"},"th-list":{code:"\uf00b"},"table-tennis-paddle-ball":{code:"\uf45d"},"ping-pong-paddle-ball":{code:"\uf45d"},"table-tennis":{code:"\uf45d"},tablet:{code:"\uf3fb"},"tablet-android":{code:"\uf3fb"},"tablet-button":{code:"\uf10a"},"tablet-screen-button":{code:"\uf3fa"},"tablet-alt":{code:"\uf3fa"},tablets:{code:"\uf490"},"tachograph-digital":{code:"\uf566"},"digital-tachograph":{code:"\uf566"},
tag:{code:"\uf02b"},tags:{code:"\uf02c"},tape:{code:"\uf4db"},tarp:{code:"\ue57b"},"tarp-droplet":{code:"\ue57c"},taxi:{code:"\uf1ba"},cab:{code:"\uf1ba"},teeth:{code:"\uf62e"},"teeth-open":{code:"\uf62f"},"temperature-arrow-down":{code:"\ue03f"},"temperature-down":{code:"\ue03f"},"temperature-arrow-up":{code:"\ue040"},"temperature-up":{code:"\ue040"},"temperature-empty":{code:"\uf2cb"},"temperature-0":{code:"\uf2cb"},"thermometer-0":{code:"\uf2cb"},"thermometer-empty":{code:"\uf2cb"},"temperature-full":{code:"\uf2c7"},
"temperature-4":{code:"\uf2c7"},"thermometer-4":{code:"\uf2c7"},"thermometer-full":{code:"\uf2c7"},"temperature-half":{code:"\uf2c9"},"temperature-2":{code:"\uf2c9"},"thermometer-2":{code:"\uf2c9"},"thermometer-half":{code:"\uf2c9"},"temperature-high":{code:"\uf769"},"temperature-low":{code:"\uf76b"},"temperature-quarter":{code:"\uf2ca"},"temperature-1":{code:"\uf2ca"},"thermometer-1":{code:"\uf2ca"},"thermometer-quarter":{code:"\uf2ca"},"temperature-three-quarters":{code:"\uf2c8"},"temperature-3":{code:"\uf2c8"},
"thermometer-3":{code:"\uf2c8"},"thermometer-three-quarters":{code:"\uf2c8"},"tenge-sign":{code:"\uf7d7"},tenge:{code:"\uf7d7"},tent:{code:"\ue57d"},"tent-arrow-down-to-line":{code:"\ue57e"},"tent-arrow-left-right":{code:"\ue57f"},"tent-arrow-turn-left":{code:"\ue580"},"tent-arrows-down":{code:"\ue581"},tents:{code:"\ue582"},terminal:{code:"\uf120"},"text-height":{code:"\uf034"},"text-slash":{code:"\uf87d"},"remove-format":{code:"\uf87d"},"text-width":{code:"\uf035"},thermometer:{code:"\uf491"},"thumbs-down":{code:"\uf165"},
"thumbs-up":{code:"\uf164"},thumbtack:{code:"\uf08d"},"thumb-tack":{code:"\uf08d"},ticket:{code:"\uf145"},"ticket-simple":{code:"\uf3ff"},"ticket-alt":{code:"\uf3ff"},timeline:{code:"\ue29c"},"toggle-off":{code:"\uf204"},"toggle-on":{code:"\uf205"},toilet:{code:"\uf7d8"},"toilet-paper":{code:"\uf71e"},"toilet-paper-slash":{code:"\ue072"},"toilet-portable":{code:"\ue583"},"toilets-portable":{code:"\ue584"},toolbox:{code:"\uf552"},tooth:{code:"\uf5c9"},"torii-gate":{code:"\uf6a1"},tornado:{code:"\uf76f"},
"tower-broadcast":{code:"\uf519"},"broadcast-tower":{code:"\uf519"},"tower-cell":{code:"\ue585"},"tower-observation":{code:"\ue586"},tractor:{code:"\uf722"},trademark:{code:"\uf25c"},"traffic-light":{code:"\uf637"},trailer:{code:"\ue041"},train:{code:"\uf238"},"train-subway":{code:"\uf239"},subway:{code:"\uf239"},"train-tram":{code:"\uf7da"},tram:{code:"\uf7da"},transgender:{code:"\uf225"},"transgender-alt":{code:"\uf225"},trash:{code:"\uf1f8"},"trash-arrow-up":{code:"\uf829"},"trash-restore":{code:"\uf829"},
"trash-can":{code:"\uf2ed"},"trash-alt":{code:"\uf2ed"},"trash-can-arrow-up":{code:"\uf82a"},"trash-restore-alt":{code:"\uf82a"},tree:{code:"\uf1bb"},"tree-city":{code:"\ue587"},"triangle-exclamation":{code:"\uf071"},"exclamation-triangle":{code:"\uf071"},warning:{code:"\uf071"},trophy:{code:"\uf091"},trowel:{code:"\ue589"},"trowel-bricks":{code:"\ue58a"},truck:{code:"\uf0d1"},"truck-arrow-right":{code:"\ue58b"},"truck-droplet":{code:"\ue58c"},"truck-fast":{code:"\uf48b"},"shipping-fast":{code:"\uf48b"},
"truck-field":{code:"\ue58d"},"truck-field-un":{code:"\ue58e"},"truck-front":{code:"\ue2b7"},"truck-medical":{code:"\uf0f9"},ambulance:{code:"\uf0f9"},"truck-monster":{code:"\uf63b"},"truck-moving":{code:"\uf4df"},"truck-pickup":{code:"\uf63c"},"truck-plane":{code:"\ue58f"},"truck-ramp-box":{code:"\uf4de"},"truck-loading":{code:"\uf4de"},tty:{code:"\uf1e4"},teletype:{code:"\uf1e4"},"turkish-lira-sign":{code:"\ue2bb"},"try":{code:"\ue2bb"},"turkish-lira":{code:"\ue2bb"},"turn-down":{code:"\uf3be"},
"level-down-alt":{code:"\uf3be"},"turn-up":{code:"\uf3bf"},"level-up-alt":{code:"\uf3bf"},tv:{code:"\uf26c"},television:{code:"\uf26c"},"tv-alt":{code:"\uf26c"},u:{code:"U"},umbrella:{code:"\uf0e9"},"umbrella-beach":{code:"\uf5ca"},underline:{code:"\uf0cd"},"universal-access":{code:"\uf29a"},unlock:{code:"\uf09c"},"unlock-keyhole":{code:"\uf13e"},"unlock-alt":{code:"\uf13e"},"up-down":{code:"\uf338"},"arrows-alt-v":{code:"\uf338"},"up-down-left-right":{code:"\uf0b2"},"arrows-alt":{code:"\uf0b2"},
"up-long":{code:"\uf30c"},"long-arrow-alt-up":{code:"\uf30c"},"up-right-and-down-left-from-center":{code:"\uf424"},"expand-alt":{code:"\uf424"},"up-right-from-square":{code:"\uf35d"},"external-link-alt":{code:"\uf35d"},upload:{code:"\uf093"},user:{code:"\uf007"},"user-astronaut":{code:"\uf4fb"},"user-check":{code:"\uf4fc"},"user-clock":{code:"\uf4fd"},"user-doctor":{code:"\uf0f0"},"user-md":{code:"\uf0f0"},"user-gear":{code:"\uf4fe"},"user-cog":{code:"\uf4fe"},"user-graduate":{code:"\uf501"},"user-group":{code:"\uf500"},
"user-friends":{code:"\uf500"},"user-injured":{code:"\uf728"},"user-large":{code:"\uf406"},"user-alt":{code:"\uf406"},"user-large-slash":{code:"\uf4fa"},"user-alt-slash":{code:"\uf4fa"},"user-lock":{code:"\uf502"},"user-minus":{code:"\uf503"},"user-ninja":{code:"\uf504"},"user-nurse":{code:"\uf82f"},"user-pen":{code:"\uf4ff"},"user-edit":{code:"\uf4ff"},"user-plus":{code:"\uf234"},"user-secret":{code:"\uf21b"},"user-shield":{code:"\uf505"},"user-slash":{code:"\uf506"},"user-tag":{code:"\uf507"},"user-tie":{code:"\uf508"},
"user-xmark":{code:"\uf235"},"user-times":{code:"\uf235"},users:{code:"\uf0c0"},"users-between-lines":{code:"\ue591"},"users-gear":{code:"\uf509"},"users-cog":{code:"\uf509"},"users-line":{code:"\ue592"},"users-rays":{code:"\ue593"},"users-rectangle":{code:"\ue594"},"users-slash":{code:"\ue073"},"users-viewfinder":{code:"\ue595"},utensils:{code:"\uf2e7"},cutlery:{code:"\uf2e7"},v:{code:"V"},"van-shuttle":{code:"\uf5b6"},"shuttle-van":{code:"\uf5b6"},vault:{code:"\ue2c5"},"vector-square":{code:"\uf5cb"},
venus:{code:"\uf221"},"venus-double":{code:"\uf226"},"venus-mars":{code:"\uf228"},vest:{code:"\ue085"},"vest-patches":{code:"\ue086"},vial:{code:"\uf492"},"vial-circle-check":{code:"\ue596"},"vial-virus":{code:"\ue597"},vials:{code:"\uf493"},video:{code:"\uf03d"},"video-camera":{code:"\uf03d"},"video-slash":{code:"\uf4e2"},vihara:{code:"\uf6a7"},virus:{code:"\ue074"},"virus-covid":{code:"\ue4a8"},"virus-covid-slash":{code:"\ue4a9"},"virus-slash":{code:"\ue075"},viruses:{code:"\ue076"},voicemail:{code:"\uf897"},
volcano:{code:"\uf770"},volleyball:{code:"\uf45f"},"volleyball-ball":{code:"\uf45f"},"volume-high":{code:"\uf028"},"volume-up":{code:"\uf028"},"volume-low":{code:"\uf027"},"volume-down":{code:"\uf027"},"volume-off":{code:"\uf026"},"volume-xmark":{code:"\uf6a9"},"volume-mute":{code:"\uf6a9"},"volume-times":{code:"\uf6a9"},"vr-cardboard":{code:"\uf729"},w:{code:"W"},"walkie-talkie":{code:"\uf8ef"},wallet:{code:"\uf555"},"wand-magic":{code:"\uf0d0"},magic:{code:"\uf0d0"},"wand-magic-sparkles":{code:"\ue2ca"},
"magic-wand-sparkles":{code:"\ue2ca"},"wand-sparkles":{code:"\uf72b"},warehouse:{code:"\uf494"},water:{code:"\uf773"},"water-ladder":{code:"\uf5c5"},"ladder-water":{code:"\uf5c5"},"swimming-pool":{code:"\uf5c5"},"wave-square":{code:"\uf83e"},"weight-hanging":{code:"\uf5cd"},"weight-scale":{code:"\uf496"},weight:{code:"\uf496"},"wheat-awn":{code:"\ue2cd"},"wheat-alt":{code:"\ue2cd"},"wheat-awn-circle-exclamation":{code:"\ue598"},wheelchair:{code:"\uf193"},"wheelchair-move":{code:"\ue2ce"},"wheelchair-alt":{code:"\ue2ce"},
"whiskey-glass":{code:"\uf7a0"},"glass-whiskey":{code:"\uf7a0"},wifi:{code:"\uf1eb"},"wifi-3":{code:"\uf1eb"},"wifi-strong":{code:"\uf1eb"},wind:{code:"\uf72e"},"window-maximize":{code:"\uf2d0"},"window-minimize":{code:"\uf2d1"},"window-restore":{code:"\uf2d2"},"wine-bottle":{code:"\uf72f"},"wine-glass":{code:"\uf4e3"},"wine-glass-empty":{code:"\uf5ce"},"wine-glass-alt":{code:"\uf5ce"},"won-sign":{code:"\uf159"},krw:{code:"\uf159"},won:{code:"\uf159"},worm:{code:"\ue599"},wrench:{code:"\uf0ad"},x:{code:"X"},
"x-ray":{code:"\uf497"},xmark:{code:"\uf00d"},close:{code:"\uf00d"},multiply:{code:"\uf00d"},remove:{code:"\uf00d"},times:{code:"\uf00d"},"xmarks-lines":{code:"\ue59a"},y:{code:"Y"},"yen-sign":{code:"\uf157"},cny:{code:"\uf157"},jpy:{code:"\uf157"},rmb:{code:"\uf157"},yen:{code:"\uf157"},"yin-yang":{code:"\uf6ad"},z:{code:"Z"},"42-group":{code:"\ue080"},innosoft:{code:"\ue080"},"500px":{code:"\uf26e"},"accessible-icon":{code:"\uf368"},accusoft:{code:"\uf369"},adn:{code:"\uf170"},adversal:{code:"\uf36a"},
affiliatetheme:{code:"\uf36b"},airbnb:{code:"\uf834"},algolia:{code:"\uf36c"},alipay:{code:"\uf642"},amazon:{code:"\uf270"},"amazon-pay":{code:"\uf42c"},amilia:{code:"\uf36d"},android:{code:"\uf17b"},angellist:{code:"\uf209"},angrycreative:{code:"\uf36e"},angular:{code:"\uf420"},"app-store":{code:"\uf36f"},"app-store-ios":{code:"\uf370"},apper:{code:"\uf371"},apple:{code:"\uf179"},"apple-pay":{code:"\uf415"},artstation:{code:"\uf77a"},asymmetrik:{code:"\uf372"},atlassian:{code:"\uf77b"},audible:{code:"\uf373"},
autoprefixer:{code:"\uf41c"},avianex:{code:"\uf374"},aviato:{code:"\uf421"},aws:{code:"\uf375"},bandcamp:{code:"\uf2d5"},"battle-net":{code:"\uf835"},behance:{code:"\uf1b4"},"behance-square":{code:"\uf1b5"},bilibili:{code:"\ue3d9"},bimobject:{code:"\uf378"},bitbucket:{code:"\uf171"},bitcoin:{code:"\uf379"},bity:{code:"\uf37a"},"black-tie":{code:"\uf27e"},blackberry:{code:"\uf37b"},blogger:{code:"\uf37c"},"blogger-b":{code:"\uf37d"},bluetooth:{code:"\uf293"},"bluetooth-b":{code:"\uf294"},bootstrap:{code:"\uf836"},
bots:{code:"\ue340"},btc:{code:"\uf15a"},buffer:{code:"\uf837"},buromobelexperte:{code:"\uf37f"},"buy-n-large":{code:"\uf8a6"},buysellads:{code:"\uf20d"},"canadian-maple-leaf":{code:"\uf785"},"cc-amazon-pay":{code:"\uf42d"},"cc-amex":{code:"\uf1f3"},"cc-apple-pay":{code:"\uf416"},"cc-diners-club":{code:"\uf24c"},"cc-discover":{code:"\uf1f2"},"cc-jcb":{code:"\uf24b"},"cc-mastercard":{code:"\uf1f1"},"cc-paypal":{code:"\uf1f4"},"cc-stripe":{code:"\uf1f5"},"cc-visa":{code:"\uf1f0"},centercode:{code:"\uf380"},
centos:{code:"\uf789"},chrome:{code:"\uf268"},chromecast:{code:"\uf838"},cloudflare:{code:"\ue07d"},cloudscale:{code:"\uf383"},cloudsmith:{code:"\uf384"},cloudversify:{code:"\uf385"},cmplid:{code:"\ue360"},codepen:{code:"\uf1cb"},codiepie:{code:"\uf284"},confluence:{code:"\uf78d"},connectdevelop:{code:"\uf20e"},contao:{code:"\uf26d"},"cotton-bureau":{code:"\uf89e"},cpanel:{code:"\uf388"},"creative-commons":{code:"\uf25e"},"creative-commons-by":{code:"\uf4e7"},"creative-commons-nc":{code:"\uf4e8"},
"creative-commons-nc-eu":{code:"\uf4e9"},"creative-commons-nc-jp":{code:"\uf4ea"},"creative-commons-nd":{code:"\uf4eb"},"creative-commons-pd":{code:"\uf4ec"},"creative-commons-pd-alt":{code:"\uf4ed"},"creative-commons-remix":{code:"\uf4ee"},"creative-commons-sa":{code:"\uf4ef"},"creative-commons-sampling":{code:"\uf4f0"},"creative-commons-sampling-plus":{code:"\uf4f1"},"creative-commons-share":{code:"\uf4f2"},"creative-commons-zero":{code:"\uf4f3"},"critical-role":{code:"\uf6c9"},css3:{code:"\uf13c"},
"css3-alt":{code:"\uf38b"},cuttlefish:{code:"\uf38c"},"d-and-d":{code:"\uf38d"},"d-and-d-beyond":{code:"\uf6ca"},dailymotion:{code:"\ue052"},dashcube:{code:"\uf210"},deezer:{code:"\ue077"},delicious:{code:"\uf1a5"},deploydog:{code:"\uf38e"},deskpro:{code:"\uf38f"},dev:{code:"\uf6cc"},deviantart:{code:"\uf1bd"},dhl:{code:"\uf790"},diaspora:{code:"\uf791"},digg:{code:"\uf1a6"},"digital-ocean":{code:"\uf391"},discord:{code:"\uf392"},discourse:{code:"\uf393"},dochub:{code:"\uf394"},docker:{code:"\uf395"},
draft2digital:{code:"\uf396"},dribbble:{code:"\uf17d"},"dribbble-square":{code:"\uf397"},dropbox:{code:"\uf16b"},drupal:{code:"\uf1a9"},dyalog:{code:"\uf399"},earlybirds:{code:"\uf39a"},ebay:{code:"\uf4f4"},edge:{code:"\uf282"},"edge-legacy":{code:"\ue078"},elementor:{code:"\uf430"},ello:{code:"\uf5f1"},ember:{code:"\uf423"},empire:{code:"\uf1d1"},envira:{code:"\uf299"},erlang:{code:"\uf39d"},ethereum:{code:"\uf42e"},etsy:{code:"\uf2d7"},evernote:{code:"\uf839"},expeditedssl:{code:"\uf23e"},facebook:{code:"\uf09a"},
"facebook-f":{code:"\uf39e"},"facebook-messenger":{code:"\uf39f"},"facebook-square":{code:"\uf082"},"fantasy-flight-games":{code:"\uf6dc"},fedex:{code:"\uf797"},fedora:{code:"\uf798"},figma:{code:"\uf799"},firefox:{code:"\uf269"},"firefox-browser":{code:"\ue007"},"first-order":{code:"\uf2b0"},"first-order-alt":{code:"\uf50a"},firstdraft:{code:"\uf3a1"},flickr:{code:"\uf16e"},flipboard:{code:"\uf44d"},fly:{code:"\uf417"},"font-awesome":{code:"\uf2b4"},"font-awesome-flag":{code:"\uf2b4"},"font-awesome-logo-full":{code:"\uf2b4"},
fonticons:{code:"\uf280"},"fonticons-fi":{code:"\uf3a2"},"fort-awesome":{code:"\uf286"},"fort-awesome-alt":{code:"\uf3a3"},forumbee:{code:"\uf211"},foursquare:{code:"\uf180"},"free-code-camp":{code:"\uf2c5"},freebsd:{code:"\uf3a4"},fulcrum:{code:"\uf50b"},"galactic-republic":{code:"\uf50c"},"galactic-senate":{code:"\uf50d"},"get-pocket":{code:"\uf265"},gg:{code:"\uf260"},"gg-circle":{code:"\uf261"},git:{code:"\uf1d3"},"git-alt":{code:"\uf841"},"git-square":{code:"\uf1d2"},github:{code:"\uf09b"},"github-alt":{code:"\uf113"},
"github-square":{code:"\uf092"},gitkraken:{code:"\uf3a6"},gitlab:{code:"\uf296"},gitter:{code:"\uf426"},glide:{code:"\uf2a5"},"glide-g":{code:"\uf2a6"},gofore:{code:"\uf3a7"},golang:{code:"\ue40f"},goodreads:{code:"\uf3a8"},"goodreads-g":{code:"\uf3a9"},google:{code:"\uf1a0"},"google-drive":{code:"\uf3aa"},"google-pay":{code:"\ue079"},"google-play":{code:"\uf3ab"},"google-plus":{code:"\uf2b3"},"google-plus-g":{code:"\uf0d5"},"google-plus-square":{code:"\uf0d4"},"google-wallet":{code:"\uf1ee"},gratipay:{code:"\uf184"},
grav:{code:"\uf2d6"},gripfire:{code:"\uf3ac"},grunt:{code:"\uf3ad"},guilded:{code:"\ue07e"},gulp:{code:"\uf3ae"},"hacker-news":{code:"\uf1d4"},"hacker-news-square":{code:"\uf3af"},hackerrank:{code:"\uf5f7"},hashnode:{code:"\ue499"},hips:{code:"\uf452"},"hire-a-helper":{code:"\uf3b0"},hive:{code:"\ue07f"},hooli:{code:"\uf427"},hornbill:{code:"\uf592"},hotjar:{code:"\uf3b1"},houzz:{code:"\uf27c"},html5:{code:"\uf13b"},hubspot:{code:"\uf3b2"},ideal:{code:"\ue013"},imdb:{code:"\uf2d8"},instagram:{code:"\uf16d"},
"instagram-square":{code:"\ue055"},instalod:{code:"\ue081"},intercom:{code:"\uf7af"},"internet-explorer":{code:"\uf26b"},invision:{code:"\uf7b0"},ioxhost:{code:"\uf208"},"itch-io":{code:"\uf83a"},itunes:{code:"\uf3b4"},"itunes-note":{code:"\uf3b5"},java:{code:"\uf4e4"},"jedi-order":{code:"\uf50e"},jenkins:{code:"\uf3b6"},jira:{code:"\uf7b1"},joget:{code:"\uf3b7"},joomla:{code:"\uf1aa"},js:{code:"\uf3b8"},"js-square":{code:"\uf3b9"},jsfiddle:{code:"\uf1cc"},kaggle:{code:"\uf5fa"},keybase:{code:"\uf4f5"},
keycdn:{code:"\uf3ba"},kickstarter:{code:"\uf3bb"},"kickstarter-k":{code:"\uf3bc"},korvue:{code:"\uf42f"},laravel:{code:"\uf3bd"},lastfm:{code:"\uf202"},"lastfm-square":{code:"\uf203"},leanpub:{code:"\uf212"},less:{code:"\uf41d"},line:{code:"\uf3c0"},linkedin:{code:"\uf08c"},"linkedin-in":{code:"\uf0e1"},linode:{code:"\uf2b8"},linux:{code:"\uf17c"},lyft:{code:"\uf3c3"},magento:{code:"\uf3c4"},mailchimp:{code:"\uf59e"},mandalorian:{code:"\uf50f"},markdown:{code:"\uf60f"},mastodon:{code:"\uf4f6"},maxcdn:{code:"\uf136"},
mdb:{code:"\uf8ca"},medapps:{code:"\uf3c6"},medium:{code:"\uf23a"},"medium-m":{code:"\uf23a"},medrt:{code:"\uf3c8"},meetup:{code:"\uf2e0"},megaport:{code:"\uf5a3"},mendeley:{code:"\uf7b3"},microblog:{code:"\ue01a"},microsoft:{code:"\uf3ca"},mix:{code:"\uf3cb"},mixcloud:{code:"\uf289"},mixer:{code:"\ue056"},mizuni:{code:"\uf3cc"},modx:{code:"\uf285"},monero:{code:"\uf3d0"},napster:{code:"\uf3d2"},neos:{code:"\uf612"},"nfc-directional":{code:"\ue530"},"nfc-symbol":{code:"\ue531"},nimblr:{code:"\uf5a8"},
node:{code:"\uf419"},"node-js":{code:"\uf3d3"},npm:{code:"\uf3d4"},ns8:{code:"\uf3d5"},nutritionix:{code:"\uf3d6"},"octopus-deploy":{code:"\ue082"},odnoklassniki:{code:"\uf263"},"odnoklassniki-square":{code:"\uf264"},"old-republic":{code:"\uf510"},opencart:{code:"\uf23d"},openid:{code:"\uf19b"},opera:{code:"\uf26a"},"optin-monster":{code:"\uf23c"},orcid:{code:"\uf8d2"},osi:{code:"\uf41a"},padlet:{code:"\ue4a0"},page4:{code:"\uf3d7"},pagelines:{code:"\uf18c"},palfed:{code:"\uf3d8"},patreon:{code:"\uf3d9"},
paypal:{code:"\uf1ed"},perbyte:{code:"\ue083"},periscope:{code:"\uf3da"},phabricator:{code:"\uf3db"},"phoenix-framework":{code:"\uf3dc"},"phoenix-squadron":{code:"\uf511"},php:{code:"\uf457"},"pied-piper":{code:"\uf2ae"},"pied-piper-alt":{code:"\uf1a8"},"pied-piper-hat":{code:"\uf4e5"},"pied-piper-pp":{code:"\uf1a7"},"pied-piper-square":{code:"\ue01e"},pinterest:{code:"\uf0d2"},"pinterest-p":{code:"\uf231"},"pinterest-square":{code:"\uf0d3"},pix:{code:"\ue43a"},playstation:{code:"\uf3df"},"product-hunt":{code:"\uf288"},
pushed:{code:"\uf3e1"},python:{code:"\uf3e2"},qq:{code:"\uf1d6"},quinscape:{code:"\uf459"},quora:{code:"\uf2c4"},"r-project":{code:"\uf4f7"},"raspberry-pi":{code:"\uf7bb"},ravelry:{code:"\uf2d9"},react:{code:"\uf41b"},reacteurope:{code:"\uf75d"},readme:{code:"\uf4d5"},rebel:{code:"\uf1d0"},"red-river":{code:"\uf3e3"},reddit:{code:"\uf1a1"},"reddit-alien":{code:"\uf281"},"reddit-square":{code:"\uf1a2"},redhat:{code:"\uf7bc"},renren:{code:"\uf18b"},replyd:{code:"\uf3e6"},researchgate:{code:"\uf4f8"},
resolving:{code:"\uf3e7"},rev:{code:"\uf5b2"},rocketchat:{code:"\uf3e8"},rockrms:{code:"\uf3e9"},rust:{code:"\ue07a"},safari:{code:"\uf267"},salesforce:{code:"\uf83b"},sass:{code:"\uf41e"},schlix:{code:"\uf3ea"},screenpal:{code:"\ue570"},scribd:{code:"\uf28a"},searchengin:{code:"\uf3eb"},sellcast:{code:"\uf2da"},sellsy:{code:"\uf213"},servicestack:{code:"\uf3ec"},shirtsinbulk:{code:"\uf214"},shopify:{code:"\ue057"},shopware:{code:"\uf5b5"},simplybuilt:{code:"\uf215"},sistrix:{code:"\uf3ee"},sith:{code:"\uf512"},
sitrox:{code:"\ue44a"},sketch:{code:"\uf7c6"},skyatlas:{code:"\uf216"},skype:{code:"\uf17e"},slack:{code:"\uf198"},"slack-hash":{code:"\uf198"},slideshare:{code:"\uf1e7"},snapchat:{code:"\uf2ab"},"snapchat-ghost":{code:"\uf2ab"},"snapchat-square":{code:"\uf2ad"},soundcloud:{code:"\uf1be"},sourcetree:{code:"\uf7d3"},speakap:{code:"\uf3f3"},"speaker-deck":{code:"\uf83c"},spotify:{code:"\uf1bc"},"square-font-awesome":{code:"\uf425"},"square-font-awesome-stroke":{code:"\uf35c"},"font-awesome-alt":{code:"\uf35c"},
squarespace:{code:"\uf5be"},"stack-exchange":{code:"\uf18d"},"stack-overflow":{code:"\uf16c"},stackpath:{code:"\uf842"},staylinked:{code:"\uf3f5"},steam:{code:"\uf1b6"},"steam-square":{code:"\uf1b7"},"steam-symbol":{code:"\uf3f6"},"sticker-mule":{code:"\uf3f7"},strava:{code:"\uf428"},stripe:{code:"\uf429"},"stripe-s":{code:"\uf42a"},studiovinari:{code:"\uf3f8"},stumbleupon:{code:"\uf1a4"},"stumbleupon-circle":{code:"\uf1a3"},superpowers:{code:"\uf2dd"},supple:{code:"\uf3f9"},suse:{code:"\uf7d6"},
swift:{code:"\uf8e1"},symfony:{code:"\uf83d"},teamspeak:{code:"\uf4f9"},telegram:{code:"\uf2c6"},"telegram-plane":{code:"\uf2c6"},"tencent-weibo":{code:"\uf1d5"},"the-red-yeti":{code:"\uf69d"},themeco:{code:"\uf5c6"},themeisle:{code:"\uf2b2"},"think-peaks":{code:"\uf731"},tiktok:{code:"\ue07b"},"trade-federation":{code:"\uf513"},trello:{code:"\uf181"},tumblr:{code:"\uf173"},"tumblr-square":{code:"\uf174"},twitch:{code:"\uf1e8"},twitter:{code:"\uf099"},"twitter-square":{code:"\uf081"},typo3:{code:"\uf42b"},
uber:{code:"\uf402"},ubuntu:{code:"\uf7df"},uikit:{code:"\uf403"},umbraco:{code:"\uf8e8"},uncharted:{code:"\ue084"},uniregistry:{code:"\uf404"},unity:{code:"\ue049"},unsplash:{code:"\ue07c"},untappd:{code:"\uf405"},ups:{code:"\uf7e0"},usb:{code:"\uf287"},usps:{code:"\uf7e1"},ussunnah:{code:"\uf407"},vaadin:{code:"\uf408"},viacoin:{code:"\uf237"},viadeo:{code:"\uf2a9"},"viadeo-square":{code:"\uf2aa"},viber:{code:"\uf409"},vimeo:{code:"\uf40a"},"vimeo-square":{code:"\uf194"},"vimeo-v":{code:"\uf27d"},
vine:{code:"\uf1ca"},vk:{code:"\uf189"},vnv:{code:"\uf40b"},vuejs:{code:"\uf41f"},"watchman-monitoring":{code:"\ue087"},waze:{code:"\uf83f"},weebly:{code:"\uf5cc"},weibo:{code:"\uf18a"},weixin:{code:"\uf1d7"},whatsapp:{code:"\uf232"},"whatsapp-square":{code:"\uf40c"},whmcs:{code:"\uf40d"},"wikipedia-w":{code:"\uf266"},windows:{code:"\uf17a"},wirsindhandwerk:{code:"\ue2d0"},wsh:{code:"\ue2d0"},wix:{code:"\uf5cf"},"wizards-of-the-coast":{code:"\uf730"},wodu:{code:"\ue088"},"wolf-pack-battalion":{code:"\uf514"},
wordpress:{code:"\uf19a"},"wordpress-simple":{code:"\uf411"},wpbeginner:{code:"\uf297"},wpexplorer:{code:"\uf2de"},wpforms:{code:"\uf298"},wpressr:{code:"\uf3e4"},xbox:{code:"\uf412"},xing:{code:"\uf168"},"xing-square":{code:"\uf169"},"y-combinator":{code:"\uf23b"},yahoo:{code:"\uf19e"},yammer:{code:"\uf840"},yandex:{code:"\uf413"},"yandex-international":{code:"\uf414"},yarn:{code:"\uf7e3"},yelp:{code:"\uf1e9"},yoast:{code:"\uf2b1"},youtube:{code:"\uf167"},"youtube-square":{code:"\uf431"},zhihu:{code:"\uf63f"}};
cq.Icons=rH;cq.Icons=rH;var xg=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js");xg.vdom=Mx;xg.promise=yj;xg.arr=aj;xg.tree=Er;xg.obj=bj;xg.string=Xj;xg.addOrChangeCSSDeclaration=zq;xg.addOrChangeLinkedCSS=nu;xg.defaultStyle=qw;xg.renderGradient=xC;xg.defaultAttributes=rw;xg.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n.hiddenScrollbar {\n  scrollbar-width: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
xg.pathAttributes=wC;xg.svgAttributes=vC;xg.renderMorph=yC;xg.Transform=Fx;xg.pt=wl;xg.getSvgVertices=pw;xg.canBePromotedToCompositionLayer=tC;xg.config=Jm;var VA=xg.vdom;xg.h=VA.h;xg.diff=VA.diff;xg.patch=VA.patch;xg.createNode=VA.create;xg.svgNs="http://www.w3.org/2000/svg";xg.CanvasHook=function(b){this.canvasMorph=b};xg.CanvasHook.prototype.hook=function(b,c,g){this.canvasMorph.afterRender(b,this.canvasMorph._canvas!==b&&"CANVAS"==b.tagName)};xg.InitStroke=function(b,c,g){this.path=b;this.renderer=
c;this.reverse=g};xg.InitStroke.prototype.hook=function(b,c,g){c=this.path.drawnProportion||0;0!=c&&(b.setAttribute("stroke-width",this.path.borderWidth.valueOf()+1),b.setAttribute("stroke-dasharray",b.getTotalLength()),b.setAttribute("stroke-dashoffset",b.getTotalLength()*(this.reverse?1-c:-1+(1-c))))};var sH=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js"),g=c.hasOwnProperty("Renderer")&&"function"===typeof c.Renderer?c.Renderer:c.Renderer=function(a){if(!a||
!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d,f){if(!a||!a.isMorph)throw Error("Trying to initialize renderer with an invalid world morph: ".concat(a));if(!(d&&"nodeType"in d))throw Error("Trying to initialize renderer with an invalid root node: ".concat(d));f||(f=d.getRootNode(),f={window:System.global,document:f});this.worldMorph=a;a._renderer=
this;this.rootNode=d;this.domNode=null;this.domEnvironment=f;this.renderMap=new WeakMap;this.fixedMorphNodeMap=new Map;this.renderWorldLoopLater=this.renderWorldLoopProcess=null;this.requestAnimationFrame=f.window.requestAnimationFrame.bind(f.window)}},{key:"clear",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return k=this.domNode,p.prev=1,p.next=4,this.stopRenderWorldLoop();case 4:p.next=8;break;
case 6:p.prev=6,p.t0=p["catch"](1);case 8:k&&(n=k.parentNode,n.removeChild(k),db(this.fixedMorphNodeMap.values()).forEach(function(q){return n.removeChild(q)})),this.domNode=null,this.renderMap=new WeakMap;case 11:case "end":return p.stop()}},f,this,[[1,6]])}));return function(){return a.apply(this,arguments)}}()},{key:"ensureDefaultCSS",value:function(){var a=this,d=this.worldMorph.env.fontMetric;return xg.promise.waitFor(3E3,function(){return a.domNode.getRootNode()}).then(function(f){return Promise.all([xg.addOrChangeCSSDeclaration("lively-morphic-css",
xg.defaultCSS,f),xg.promise.waitFor(1E3,function(){return d.isFontSupported("IBM Plex Sans")&&d.isFontSupported("IBM Plex Mono")},!1).then(function(k){return!k&&xg.addOrChangeLinkedCSS("lively-ibm-plex",xg.config.css.ibmPlex)}),xg.addOrChangeLinkedCSS("lively-font-awesome",xg.config.css.fontAwesome,f,!1),xg.addOrChangeLinkedCSS("lively-font-inconsolata",xg.config.css.inconsolata,f,!1)])})}},{key:"startRenderWorldLoop",value:function(){var a=this;this._stopped=!1;this._renderWorldLoopLater=null;this.renderWorldLoopProcess=
this.requestAnimationFrame(function(){return a.startRenderWorldLoop()});return this.renderStep()}},{key:"stopRenderWorldLoop",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this._stopped=!0,this.domEnvironment.window.cancelAnimationFrame(this.renderWorldLoopProcess),this.renderWorldLoopProcess=null,this.domEnvironment.window.cancelAnimationFrame(this.renderWorldLoopLater),this.renderWorldLoopLater=
null,n.next=7,xg.promise.waitFor(2E3,function(){return!k.worldMorph.needsRerender()});case 7:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"renderLater",value:function(){var a=this;this.renderWorldLoopLaterCounter=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;this.renderWorldLoopLater||this._stopped||(this.renderWorldLoopLater=this.requestAnimationFrame(function(){a.renderWorldLoopLater=null;0<a.renderWorldLoopLaterCounter&&a.renderLater(a.renderWorldLoopLaterCounter-
1);try{a.renderStep()}catch(d){console.error("Error rendering morphs:",d)}}))}},{key:"renderStep",value:function(){this.worldMorph.renderAsRoot(this);return this}},{key:"getNodeForMorph",value:function(a){var d="#"+xg.string.regExpEscape(a.id),f=this.domNode&&this.domNode.querySelector(d);this.domNode&&this.domNode.id==a.id&&(f=this.domNode);if(f)return f;a=fa(this.fixedMorphNodeMap.values());var k;try{for(a.s();!(k=a.n()).done;)if(f=k.value.querySelector(d))return f}catch(n){a.e(n)}finally{a.f()}return null}},
{key:"getMorphForNode",value:function(a){return this.worldMorph?this.worldMorph.withAllSubmorphsDetect(function(d){return d.id===a.id}):null}},{key:"render",value:function(a){if(!a.needsRerender()){var d=this.renderMap.get(a);if(d)return d}a.aboutToRender(this);d=a.render(this);this.renderMap.set(a,d);return d}},{key:"renderAsFixed",value:function(a){var d=this.render(a);a.isHTMLMorph||(d.properties.style.position="fixed");if(this.worldMorph.isEmbedded){var f=this.domNode.getBoundingClientRect(),
k=a.origin,n=a.owner,p=a.position,q=Math.round(p.x-k.x-(a._skipWrapping&&n?n.borderWidthLeft:0));k=Math.round(p.y-k.y-(a._skipWrapping&&n?n.borderWidthTop:0));a=xg.canBePromotedToCompositionLayer(a)?xg.pt(0,0):xg.pt(q,k);q=a.x;d.properties.style.top=a.y+f.y+"px";d.properties.style.left=q+f.x+"px"}return d}},{key:"renderFixedMorphs",value:function(a,d){var f=this;d=this.domNode;var k=this.fixedMorphNodeMap;if((a.length||k.size)&&d&&d.parentNode){d=d.parentNode;var n=fa(k),p;try{for(n.s();!(p=n.n()).done;){var q=
Wb(p.value,2),r=q[0],u=q[1];a.includes(r)||(u.parentNode&&u.parentNode.removeChild(u),k["delete"](r))}}catch(Ha){n.e(Ha)}finally{n.f()}p=a.map(function(Ha){return k.get(Ha)});var x=a.map(function(Ha){return Ha.id});q=db(d.children).map(function(Ha){return Ha.id}).filter(function(Ha){return x.includes(Ha)});q=!xg.arr.equals(x,q);var y=new WeakMap;if(q){var D=new WeakMap;r=xg.arr.compact(a.map(function(Ha){return Ha.withAllSubmorphsDo(function(Qa){return f.getNodeForMorph(Qa)})}).flat());r.forEach(function(Ha){return D.set(Ha,
Ha.scrollTop)});p.map(function(Ha){return Ha&&Ha.parentNode&&Ha.parentNode.removeChild(Ha)});r.forEach(function(Ha){D.get(Ha)!=Ha.scrollTop&&y.set(Ha,D.get(Ha))})}a=fa(a);var H;try{for(a.s();!(H=a.n()).done;){var I=H.value,N=this.renderMap.get(I)||this.renderAsFixed(I),J=this.renderAsFixed(I),sa=xg.diff(N,J),ja=k.get(I);ja||(ja=xg.createNode(N,this.domEnvironment),k.set(I,ja));ja.parentNode||d.appendChild(ja);q&&I.withAllSubmorphsDo(function(Ha){return f.getNodeForMorph(Ha)}).forEach(function(Ha){y.has(Ha)&&
(Ha.scrollTop=y.get(Ha))});xg.patch(ja,sa)}}catch(Ha){a.e(Ha)}finally{a.f()}}}},{key:"renderMorph",value:function(a){var d=this.renderSubmorphs(a);return xg.h("div",Object.assign({style:xg.defaultStyle(a)},xg.defaultAttributes(a,this)),d)}},{key:"renderEllipse",value:function(a){var d=this.renderSubmorphs(a),f=xg.defaultStyle(a);delete f.borderRadius;f["border-radius"]="50%";return xg.h("div",Object.assign({style:f},xg.defaultAttributes(a,this)),d)}},{key:"renderSubmorphs",value:function(a){return this.renderSelectedSubmorphs(a,
a.submorphs)}},{key:"renderSelectedSubmorphs",value:function(a,d){var f=a.borderWidthLeft,k=a.borderWidthTop,n=a.origin,p=n.x;n=n.y;for(var q=d.length-1,r=Array(q+1),u=a.layout&&a.layout.renderViaCSS;0<=q;q--)r[q]=this.render(d[q]);return u||0==r.length?r:xg.h("div",{key:"submorphs-"+a.id,style:Object.assign({position:"absolute",left:"".concat(p-(a.isPath?0:f),"px"),top:"".concat(n-(a.isPath?0:k),"px")},a.isPolygon?Object.assign({height:"100%",width:"100%",overflow:a.clipMode},"visible"!==a.clipMode?
dd({},navigator.userAgent.includes("AppleWebKit")?"-webkit-clip-path":"clip-path","url(#clipPath".concat(a.id,")")):{}):{})},r)}},{key:"renderWorld",value:function(a){for(var d=a.submorphs,f=[],k=[],n=0;n<d.length;n++){var p=d[n];p.hasFixedPosition?k.push(p):f.push(p)}d=this.renderSelectedSubmorphs(a,f);a=xg.h("div",Object.assign({},xg.defaultAttributes(a,this),{style:xg.defaultStyle(a)}),d);a.fixedMorphs=k;return a}},{key:"renderImage",value:function(a){var d=a.imageUrl;if(d.startsWith("data:")){var f=
d.indexOf(","),k=d.substring(5,f).split(";"),n=Wb(k,2);k=n[0];n=n[1];f=d.substring(f+1);"base64"!==n&&(d=xg.string.createDataURI(f,k))}return xg.h("div",Object.assign({},xg.defaultAttributes(a,this),{style:xg.defaultStyle(a)}),[xg.h("img",{src:d,alt:a.tooltip||"",draggable:!1,style:{"pointer-events":"none",position:"absolute",left:0,width:"100%",height:"100%"}}),this.renderSubmorphs(a)])}},{key:"renderCanvas",value:function(a){return xg.h("div",Object.assign({},xg.defaultAttributes(a,this),{style:xg.defaultStyle(a)}),
[xg.h("canvas",{width:a.width,height:a.height,style:{"pointer-events":"none",position:"absolute"},canvasHook:new xg.CanvasHook(a)}),this.renderSubmorphs(a)])}},{key:"renderCheckBox",value:function(a){return xg.h("div",Object.assign({},xg.defaultAttributes(a,this),{style:xg.defaultStyle(a)}),[xg.h("input",{type:"checkbox",checked:a.checked,disabled:!a.active,draggable:!1,style:{"pointer-events":"none",width:"15px",height:"15px",position:"absolute"}}),this.renderSubmorphs(a)])}},{key:"renderPath",value:function(a){a.id;
var d=a.startMarker,f=a.endMarker,k=a.showControlPoints;a.origin;a.drawnProportion;a.borderWidth;var n=xg.getSvgVertices(a.vertices),p=xg.h("path",Object.assign({namespace:xg.svgNs,id:"svg"+a.id},xg.pathAttributes(a))),q=xg.h("mask",{namespace:xg.svgNs,id:"mask"+a.id},[xg.h("rect",{namespace:xg.svgNs,attributes:{fill:"white",x:0,y:0,width:a.width+20,height:a.height+20}}),xg.h("path",{namespace:xg.svgNs,initStroke:new xg.InitStroke(a,this,!0),attributes:{d:n,stroke:"black",fill:"none"}}),xg.h("path",
{namespace:xg.svgNs,initStroke:new xg.InitStroke(a,this,!1),attributes:{d:n,stroke:"white",fill:"none"}})]);n=[xg.h("clipPath",{namespace:xg.svgNs,id:"clipPath"+a.id},xg.h("path",{namespace:xg.svgNs,attributes:{d:n,fill:"white"}})),q];d&&(d.id||(d.id="start-marker"),p.properties.attributes["marker-start"]="url(#".concat(a.id,"-").concat(d.id,")"),n=[],n.push(this._renderPath_Marker(a,d)));f&&(f.id||(f.id="end-marker"),p.properties.attributes["marker-end"]="url(#".concat(a.id,"-").concat(f.id,")"),
n||(n=[]),n.push(this._renderPath_Marker(a,f)));var r;k&&(r=xg.h("g",{namespace:xg.svgNs},this._renderPath_ControlPoints(a)));return this.renderSvgMorph(a,p,n,r)}},{key:"_renderPath_ControlPoints",value:function(a,d){function f(sa,ja,Ha,Qa,ec,mc){var hc=Qa?12:Math.min(8,Math.max(3,p));Ha="path-point path-point-"+Ha;Qa=Qa?"orange":q;"string"===typeof ec&&(Ha+="-"+ec);mc&&(hc=Math.max(3,Math.ceil(hc/2)));return mc?xg.h("circle",{namespace:xg.svgNs,style:{fill:"white","stroke-width":2,stroke:Qa},attributes:{"class":Ha,
cx:sa,cy:ja,r:hc}}):xg.h("circle",{namespace:xg.svgNs,style:{fill:Qa},attributes:{"class":Ha,cx:sa,cy:ja,r:hc}})}var k=a.vertices;d=a.borderWidth;var n=a.showControlPoints;a=a._controlPointDrag;var p=0==d?6:d+2,q="red";d=[];if("object"===ad(n)){var r=n.radius;(n=n.fill)&&(q=String(n));"number"===typeof r&&(p=r)}if(k.length){n=0;var u=k[0];r=u.x;var x=u.y;u=u.controlPoints.next;var y=a&&a.maybeMerge&&a.maybeMerge.includes(n);d.push(f(r,x,n,y));for(n=1;n<k.length-1;n++){var D=k[n];y=D.isSmooth;var H=
D.x,I=D.y,N=D.controlPoints;D=N.previous;N=N.next;var J=a&&a.maybeMerge&&a.maybeMerge.includes(n);y?d.push(f(H,I,n,J),f(r+u.x,x+u.y,n-1,!1,"control-2",!0),f(H+D.x,I+D.y,n,!1,"control-1",!0)):d.push(f(H,I,n,J));r=H;x=I;u=N}I=k[k.length-1];k=I.isSmooth;y=I.x;H=I.y;I=I.controlPoints.previous;a=a&&a.maybeMerge&&a.maybeMerge.includes(n);k?d.push(f(y,H,n,a),f(r+u.x,x+u.y,n-1,!1,"control-2",!0),f(y+I.x,H+I.y,n,!1,"control-1",!0)):d.push(f(y,H,n,a))}return d}},{key:"_renderPath_Marker",value:function(a,d){function f(k){var n=
k.tagName,p=k.id,q=k.children,r=k.style;q=q?q.map(f):void 0;p&&(p=a.id+"-"+p);return xg.h(n,{namespace:xg.svgNs,id:p,style:r,attributes:xg.obj.dissoc(k,["tagName","id","children","style"])},q)}return f(d)}},{key:"renderSvgMorph",value:function(a,d,f){var k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],n=xg.svgAttributes(a),p=a.innerBounds(),q=p.width;p=p.height;var r,u=[];a.fill&&a.fill.isGradient&&(r||(r=[]),r.push(xg.renderGradient("fill"+a.id,a.extent,a.fill)));a.borderColor&&a.borderColor.valueOf().isGradient&&
(r||(r=[]),r.push(xg.renderGradient("borderColor"+a.id,a.extent,a.borderColor)));if(f&&f.length){var x;r||(r=[]);(x=r).push.apply(x,db(f))}u.push(d);r&&u.push(xg.h("defs",{namespace:xg.svgNs},r));r=xg.obj.select(xg.defaultStyle(a),"position filter display opacity transform top left transformOrigin cursor overflow".split(" "));return xg.h("div",Object.assign({},xg.defaultAttributes(a,this),{style:Object.assign({},r,{width:q+"px",height:p+"px","pointer-events":a.reactsToPointer?"auto":"none"})}),[xg.h("svg",
Object.assign({namespace:xg.svgNs,version:"1.1",style:{position:"absolute","stroke-linejoin":a.cornerStyle||"mint","stroke-linecap":a.endStyle||"round",overflow:"visible"}},n),u),this.renderSubmorphs(a),xg.h("svg",Object.assign({namespace:xg.svgNs,version:"1.1",style:{position:"absolute",overflow:"visible"}},n),k)])}},{key:"renderPreview",value:function(a,d){var f=d.width;f=void 0===f?100:f;var k=d.height;k=void 0===k?100:k;var n=d.center;n=void 0===n?!0:n;var p=d.ignoreMorphs,q=void 0===p?[]:p;p=
d.asNode;p=void 0===p?!1:p;d.includeStyles;d.disableScroll;a.borderWidthLeft;a.borderWidthTop;a.borderWidthBottom;a.borderWidthRight;d=a.origin;var r=a.rotation,u=Math.max(.1,1/a.scale);u=(new xg.Transform(a.position.negated(),0,xg.pt(u,u))).transformRectToRect(a.bounds());var x=Math.max(.1,Math.min(f/u.width,k/u.height));d=new xg.Transform(u.topLeft().negated().scaleBy(x).subPt(d),r,xg.pt(x,x));r=(r=this.getNodeForMorph(a))?r.cloneNode(!0):xg.renderMorph(a);n&&(a=d.transformRectToRect(a.extent.extentAsRectangle()),
d=d.preConcatenate(new xg.Transform(xg.pt(a.width<f?(f-a.width)/2:0,a.height<k?(k-a.height)/2:0))));r.style.transform=d.toCSSTransformString();r.style.pointerEvents="";xg.tree.prewalk(r,function(y){if("string"===typeof y.className){var D=y.className.split(" ").map(function(H){return H.trim()}).filter(Boolean);D.includes("Morph")&&(y.className=xg.arr.withoutAll(D,["morph","Morph"]).join(" "),q.find(function(H){return H.id===y.id})&&y.remove(),y.id="")}},function(y){return Array.from(y.childNodes)});
return p?r:r.outerHTML}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Renderer"}},{key:"default",value:function(){return this._default||new this}}],c,{pathInPackage:function(){return"./rendering/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1435,end:22855})}(void 0);xg.Renderer=sH;xg.Renderer=
sH;var WA=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),aT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),g=c.hasOwnProperty("FontDetector")&&"function"===typeof c.FontDetector?c.FontDetector:c.FontDetector=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),
value:function(a){this.document=a;this.prepared=!1;this.defaultWidth={};this.defaultHeight={};this.possibleFontWeights="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ");this.namedToNumeric=new Map("Thin;Extra Light;Light;Normal;Medium;Semi Bold;Bold;Extra Bold;Ultra Bold".split(";").map(function(d,f){return[d,String(100*(f+1))]}));this.baseFonts=["monospace","sans-serif","serif","Comic Sans MS"];this.span=null}},{key:"prepare",value:function(){var a=this.defaultWidth,d=this.defaultHeight,
f=this.possibleFontWeights,k=this.baseFonts,n=this.document.getElementsByTagName("body")[0],p=this.span||this.document.createElement("span");p.style.fontSize="72px";p.style.opacity=0;p.innerHTML="mmmmmmmmmmlli";if(!p.parentNode){var q=this.document.createElement("div");q.style.position="absolute";q.style.width="100%";q.style.overflow="hidden";q.style["pointer-events"]="none";q.style["-webkit-user-select"]="none";q.appendChild(p);n.appendChild(q)}for(var r in f)for(var u in k)p.style.fontFamily=k[u],
p.style.fontWeight=f[r],a[k[u]+"@"+f[r]]=p.offsetWidth,d[k[u]+"@"+f[r]]=p.offsetHeight;this.span=p;this.prepared=!0}},{key:"isFontSupported",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"normal";this.possibleFontWeights.includes(d)||(d=this.namedToNumeric.get(d)||"normal");this.prepared||this.prepare();var f=this.defaultWidth,k=this.defaultHeight,n=this.baseFonts,p=this.span,q=this.document.body;p.parentNode||q.appendChild(p);for(var r in n)if(p.style.fontWeight=
d,p.style.fontFamily=a+","+n[r],p.offsetWidth!=f[n[r]+"@"+d]||p.offsetHeight!=k[n[r]+"@"+d])return!0;return!1}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"FontDetector"}},{key:"fonts",get:function(){return WA.fonts}}],c,{pathInPackage:function(){return"./rendering/font-detector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:15,end:3610})}(void 0),bT=[{name:"serif",type:"default"},{name:"sans-serif",type:"default"},{name:"monospace",type:"default"},{name:"Adobe Jenson",type:"serif"},{name:"Albertus",type:"serif"},{name:"Aldus",type:"serif"},{name:"Alexandria",type:"serif"},{name:"Algerian",type:"serif"},{name:"American Typewriter",type:"serif"},{name:"Antiqua",type:"serif"},{name:"Arno",type:"serif"},{name:"Aster",type:"serif"},{name:"Aurora",type:"serif"},{name:"News 706",type:"serif"},{name:"Baskerville",type:"serif"},
{name:"Bell",type:"serif"},{name:"Belwe Roman",type:"serif"},{name:"Bembo",type:"serif"},{name:"Berkeley Old Style",type:"serif"},{name:"Bernhard Modern",type:"serif"},{name:"Bodoni",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Bookman",type:"serif"},{name:"Bulmer",type:"serif"},{name:"Caledonia",type:"serif"},{name:"Californian FB",type:"serif"},{name:"Calisto MT",type:"serif"},{name:"Cambria",type:"serif"},{name:"Capitals",type:"serif"},{name:"Cartier",type:"serif"},{name:"Caslon",type:"serif"},
{name:"Wyld",type:"serif"},{name:"Caslon Antique / Fifteenth Century",type:"serif"},{name:"Catull",type:"serif"},{name:"Centaur",type:"serif"},{name:"Century Old Style",type:"serif"},{name:"Century Schoolbook",type:"serif"},{name:"New Century Schoolbook",type:"serif"},{name:"Century Schoolbook Infant",type:"serif"},{name:"Charis SIL",type:"serif"},{name:"Charter (typeface)",type:"serif"},{name:"Cheltenham",type:"serif"},{name:"Clearface",type:"serif"},{name:"Cochin",type:"serif"},{name:"Colonna",
type:"serif"},{name:"Computer Modern",type:"serif"},{name:"Concrete Roman",type:"serif"},{name:"Constantia",type:"serif"},{name:"Cooper Black",type:"serif"},{name:"Copperplate Gothic",type:"serif"},{name:"Corona",type:"serif"},{name:"News 705",type:"serif"},{name:"DejaVu Serif",type:"serif"},{name:"Didot",type:"serif"},{name:"Droid Serif",type:"serif"},{name:"Elephant",type:"serif"},{name:"Emerson",type:"serif"},{name:"Excelsior",type:"serif"},{name:"News 702",type:"serif"},{name:"Fairfield",type:"serif"},
{name:"FF Scala",type:"serif"},{name:"Footlight",type:"serif"},{name:"FreeSerif",type:"serif"},{name:"Friz Quadrata",type:"serif"},{name:"Garamond",type:"serif"},{name:"Gentium",type:"serif"},{name:"Georgia",type:"serif"},{name:"Gloucester",type:"serif"},{name:"Goudy",type:"serif"},{name:"Granjon",type:"serif"},{name:"High Tower Text",type:"serif"},{name:"Hoefler Text",type:"serif"},{name:"Imprint",type:"serif"},{name:"Ionic No. 5",type:"serif"},{name:"News 701",type:"serif"},{name:"ITC Benguiat",
type:"serif"},{name:"Janson",type:"serif"},{name:"Jokerman",type:"serif"},{name:"Joanna",type:"serif"},{name:"Korinna",type:"serif"},{name:"Lexicon",type:"serif"},{name:"Liberation Serif",type:"serif"},{name:"Linux Libertine",type:"serif"},{name:"Literaturnaya",type:"serif"},{name:"Lucida Bright",type:"serif"},{name:"Melior",type:"serif"},{name:"Memphis",type:"serif"},{name:"Miller",type:"serif"},{name:"Minion",type:"serif"},{name:"Modern",type:"serif"},{name:"Mona Lisa",type:"serif"},{name:"Mrs Eaves",
type:"serif"},{name:"MS Serif",type:"serif"},{name:"New York",type:"serif"},{name:"Nimbus Roman",type:"serif"},{name:"NPS Rawlinson Roadway",type:"serif"},{name:"OCR A Extended",type:"serif"},{name:"Palatino",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Perpetua",type:"serif"},{name:"Plantin",type:"serif"},{name:"Playbill",type:"serif"},{name:"Primer",type:"serif"},{name:"Renault",type:"serif"},{name:"Requiem",type:"serif"},{name:"Rotis Serif",type:"serif"},{name:"Sabon",type:"serif"},
{name:"Sistina",type:"serif"},{name:"Souvenir",type:"serif"},{name:"XITS",type:"serif"},{name:"Sylfaen",type:"serif"},{name:"Times New Roman",type:"serif"},{name:"Times",type:"serif"},{name:"Torino",type:"serif"},{name:"Trajan",type:"serif"},{name:"Trinit\u00e9",type:"serif"},{name:"Trump Mediaeval",type:"serif"},{name:"Utopia",type:"serif"},{name:"Vera Serif",type:"serif"},{name:"Wide Latin",type:"serif"},{name:"Windsor",type:"serif"},{name:"XITS",type:"serif"},{name:"Playfair Display",type:"serif",
isGoogleFont:!0},{name:"Cormorant",type:"serif",isGoogleFont:!0},{name:"Eczar",type:"serif",isGoogleFont:!0},{name:"Alegreya",type:"serif",isGoogleFont:!0},{name:"Lora",type:"serif",isGoogleFont:!0},{name:"Source Serif Pro",type:"serif",isGoogleFont:!0},{name:"Roboto Slab",type:"serif",isGoogleFont:!0},{name:"BioRhyme",type:"serif",isGoogleFont:!0},{name:"Libre Baskerville",type:"serif",isGoogleFont:!0},{name:"Crimson Text",type:"serif",isGoogleFont:!0},{name:"Old Standard TT",type:"serif",isGoogleFont:!0},
{name:"Domine",type:"serif",isGoogleFont:!0},{name:"Bitter",type:"serif",isGoogleFont:!0},{name:"Gentium Basic",type:"serif",isGoogleFont:!0},{name:"PT Serif",type:"serif",isGoogleFont:!0},{name:"Cardo",type:"serif",isGoogleFont:!0},{name:"Neuton",type:"serif",isGoogleFont:!0},{name:"Arvo",type:"serif",isGoogleFont:!0},{name:"Merriweather",type:"serif",isGoogleFont:!0},{name:"Alexandria",type:"slab serif"},{name:"American Typewriter",type:"slab serif"},{name:"Archer",type:"slab serif"},{name:"Athens",
type:"slab serif"},{name:"Candida",type:"slab serif"},{name:"Cholla Slab",type:"slab serif"},{name:"City",type:"slab serif"},{name:"Clarendon",type:"slab serif"},{name:"Concrete Roman",type:"slab serif"},{name:"Courier",type:"slab serif"},{name:"Egyptienne",type:"slab serif"},{name:"Guardian Egyptian",type:"slab serif"},{name:"Ionic No. 5",type:"slab serif"},{name:"Lexia",type:"slab serif"},{name:"Memphis",type:"slab serif"},{name:"Nilland",type:"slab serif"},{name:"Roboto Slab",type:"slab serif"},
{name:"Rockwell",type:"slab serif"},{name:"Schadow",type:"slab serif"},{name:"Serifa",type:"slab serif"},{name:"Skeleton Antique",type:"slab serif"},{name:"Sreda",type:"slab serif"},{name:"Swift",type:"slab serif"},{name:"Tower",type:"slab serif"},{name:"Agency FB",type:"sans-serif"},{name:"Akzidenz-Grotesk",type:"sans-serif"},{name:"Andal\u00e9 Sans",type:"sans-serif"},{name:"Antique Olive",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Arial Unicode MS",type:"sans-serif"},{name:"Avant Garde Gothic",
type:"sans-serif"},{name:"Avenir",type:"sans-serif"},{name:"Bank Gothic",type:"sans-serif"},{name:"Bauhaus",type:"sans-serif"},{name:"Bell Centennial",type:"sans-serif"},{name:"Bell Gothic",type:"sans-serif"},{name:"Benguiat Gothic",type:"sans-serif"},{name:"Berlin Sans",type:"sans-serif"},{name:"Brandon Grotesque",type:"sans-serif"},{name:"Calibri",type:"sans-serif"},{name:"Casey",type:"sans-serif"},{name:"Century Gothic",type:"sans-serif"},{name:"Charcoal",type:"sans-serif"},{name:"Chicago",type:"sans-serif"},
{name:"Clearview",type:"sans-serif"},{name:"Comic Sans",type:"sans-serif"},{name:"Compacta",type:"sans-serif"},{name:"Corbel",type:"sans-serif"},{name:"DejaVu Sans",type:"sans-serif"},{name:"DIN",type:"sans-serif"},{name:"Dotum",type:"sans-serif"},{name:"Droid Sans",type:"sans-serif"},{name:"Dyslexie",type:"sans-serif"},{name:"Ecofont",type:"sans-serif"},{name:"Eras",type:"sans-serif"},{name:"Esseltub",type:"sans-serif"},{name:"Espy Sans",type:"sans-serif"},{name:"Eurocrat",type:"sans-serif"},{name:"Eurostile",
type:"sans-serif"},{name:"Square 721",type:"sans-serif"},{name:"FF Dax",type:"sans-serif"},{name:"FF Meta",type:"sans-serif"},{name:"FF Scala Sans",type:"sans-serif"},{name:"Fira Sans",type:"sans-serif"},{name:"Folio",type:"sans-serif"},{name:"Franklin Gothic",type:"sans-serif"},{name:"FreeSans",type:"sans-serif"},{name:"Frutiger",type:"sans-serif"},{name:"Futura",type:"sans-serif"},{name:"Geneva",type:"sans-serif"},{name:"Gill Sans",type:"sans-serif"},{name:"Gill Sans Schoolbook",type:"sans-serif"},
{name:"Gotham",type:"sans-serif"},{name:"Haettenschweiler",type:"sans-serif"},{name:"Handel Gothic",type:"sans-serif"},{name:"Hei",type:"sans-serif"},{name:"Helvetica",type:"sans-serif"},{name:"Helvetica Neue",type:"sans-serif"},{name:"Swiss 721",type:"sans-serif"},{name:"Highway Gothic",type:"sans-serif"},{name:"Hobo",type:"sans-serif"},{name:"Impact",type:"sans-serif"},{name:"Industria",type:"sans-serif"},{name:"Interstate",type:"sans-serif"},{name:"Johnston/New Johnston",type:"sans-serif"},{name:"Kabel",
type:"sans-serif"},{name:"Klavika",type:"sans-serif"},{name:"Lexia Readable",type:"sans-serif"},{name:"Liberation Sans",type:"sans-serif"},{name:"Linux Biolinum",type:"sans-serif"},{name:"Lucida Sans",type:"sans-serif"},{name:"Lucida Grande",type:"sans-serif"},{name:"Lucida Sans Unicode",type:"sans-serif"},{name:"Lydian",type:"sans-serif"},{name:"Meiryo",type:"sans-serif"},{name:"Meta",type:"sans-serif"},{name:"Microgramma",type:"sans-serif"},{name:"Modern",type:"sans-serif"},{name:"Motorway",type:"sans-serif"},
{name:"Arial",type:"sans-serif"},{name:"Myriad",type:"sans-serif"},{name:"Neutraface",type:"sans-serif"},{name:"Neuzeit S",type:"sans-serif"},{name:"News Gothic",type:"sans-serif"},{name:"Nimbus Sans L",type:"sans-serif"},{name:"Open Sans",type:"sans-serif"},{name:"Optima",type:"sans-serif"},{name:"Paris",type:"sans-serif"},{name:"Product Sans",type:"sans-serif"},{name:"Proxima Nova",type:"sans-serif"},{name:"Russian Federation",type:"sans-serif"},{name:"Rail Alphabet",type:"sans-serif"},{name:"Roboto",
type:"sans-serif"},{name:"Rotis Sans",type:"sans-serif"},{name:"Segoe UI",type:"sans-serif"},{name:"Skia",type:"sans-serif"},{name:"Source Sans Pro",type:"sans-serif"},{name:"Sweden Sans",type:"sans-serif"},{name:"Syntax",type:"sans-serif"},{name:"Tahoma",type:"sans-serif"},{name:"Template Gothic",type:"sans-serif"},{name:"Thesis Sans",type:"sans-serif"},{name:"Tiresias",type:"sans-serif"},{name:"Trade Gothic",type:"sans-serif"},{name:"Transport",type:"sans-serif"},{name:"Trebuchet MS",type:"sans-serif"},
{name:"Twentieth Century (Tw Cen MT)",type:"sans-serif"},{name:"Ubuntu",type:"sans-serif"},{name:"Univers",type:"sans-serif"},{name:"Zurich",type:"sans-serif"},{name:"Vera Sans",type:"sans-serif"},{name:"Verdana",type:"sans-serif"},{name:"Work Sans",type:"sans-serif",isGoogleFont:!0},{name:"Rubik",type:"sans-serif",isGoogleFont:!0},{name:"Libre Franklin",type:"sans-serif",isGoogleFont:!0},{name:"Fira Sans",type:"sans-serif",isGoogleFont:!0},{name:"Alegreya Sans",type:"sans-serif",isGoogleFont:!0},
{name:"Chivo",type:"sans-serif",isGoogleFont:!0},{name:"Source Sans Pro",type:"sans-serif",isGoogleFont:!0},{name:"Roboto",type:"sans-serif",isGoogleFont:!0},{name:"Poppins",type:"sans-serif",isGoogleFont:!0},{name:"Archivo Narrow",type:"sans-serif",isGoogleFont:!0},{name:"Karla",type:"sans-serif",isGoogleFont:!0},{name:"Montserrat",type:"sans-serif",isGoogleFont:!0},{name:"Rajdhani",type:"sans-serif",isGoogleFont:!0},{name:"PT Sans",type:"sans-serif",isGoogleFont:!0},{name:"Lato",type:"sans-serif",
isGoogleFont:!0},{name:"Open Sans",type:"sans-serif",isGoogleFont:!0},{name:"Cabin",type:"sans-serif",isGoogleFont:!0},{name:"Raleway",type:"sans-serif",isGoogleFont:!0},{name:"Nyala",type:"semi-serif"},{name:"Rotis Semi Serif",type:"semi-serif"},{name:"Easyreading",type:"semi-serif"},{name:"Andal\u00e9 Mono",type:"monospace"},{name:"Arial",type:"monospace"},{name:"Bitstream Vera (Vera Sans Mono)",type:"monospace"},{name:"Consolas",type:"monospace"},{name:"Courier",type:"monospace"},{name:"Courier New",
type:"monospace"},{name:"DejaVu Sans Mono",type:"monospace"},{name:"Droid Sans Mono",type:"monospace"},{name:"Everson Mono",type:"monospace"},{name:"Fixed",type:"monospace"},{name:"Fixedsys",type:"monospace"},{name:"Fixedsys Excelsior",type:"monospace"},{name:"HyperFont",type:"monospace"},{name:"Inconsolata",type:"monospace"},{name:"Letter Gothic",type:"monospace"},{name:"Liberation Mono",type:"monospace"},{name:"Lucida Console",type:"monospace"},{name:"Lucida Sans Typewriter",type:"monospace"},{name:"Lucida Typewriter",
type:"monospace"},{name:"Menlo",type:"monospace"},{name:"MICR",type:"monospace"},{name:"Monaco",type:"monospace"},{name:"Monospace",type:"monospace"},{name:"MS Gothic",type:"monospace"},{name:"MS Mincho",type:"monospace"},{name:"Nimbus Mono L",type:"monospace"},{name:"OCR-A",type:"monospace"},{name:"OCR-B",type:"monospace"},{name:"PragmataPro",type:"monospace"},{name:"Prestige Elite",type:"monospace"},{name:"ProFont",type:"monospace"},{name:"Proggy programming fonts",type:"monospace"},{name:"SimHei",
type:"monospace"},{name:"SimSun",type:"monospace"},{name:"Source Code Pro",type:"monospace"},{name:"Terminal",type:"monospace"},{name:"Trixie",type:"monospace"},{name:"Ubuntu Mono",type:"monospace"},{name:"Vera Sans Mono (Bitstream Vera)",type:"monospace"},{name:"Space Mono",type:"monospace",isGoogleFont:!0},{name:"Inconsolata",type:"monospace",isGoogleFont:!0},{name:"Anonymous Pro",type:"monospace",isGoogleFont:!0},{name:"Balloon",type:"script"},{name:"Brush Script",type:"script"},{name:"Choc",type:"script"},
{name:"Dom Casual",type:"script"},{name:"Mistral",type:"script"},{name:"Papyrus",type:"script"},{name:"Segoe Script",type:"script"},{name:"Utopia",type:"script"},{name:"Coronet",type:"script"},{name:"Curlz",type:"script"},{name:"Gravura",type:"script"},{name:"Script",type:"script"},{name:"Wiesbaden Swing",type:"script"},{name:"American Scribe",type:"script"},{name:"AMS Euler",type:"script"},{name:"Apple Chancery",type:"script"},{name:"Forte",type:"script"},{name:"French Script",type:"script"},{name:"ITC Zapf Chancery",
type:"script"},{name:"Kuenstler Script",type:"script"},{name:"Monotype Corsiva",type:"script"},{name:"Old English Text MT",type:"script"},{name:"Zapfino",type:"script"},{name:"Andy",type:"handwriting"},{name:"Ashley Script",type:"handwriting"},{name:"C\u00e9zanne",type:"handwriting"},{name:"Chalkboard",type:"handwriting"},{name:"Comic Sans MS",type:"handwriting"},{name:"Dom Casual",type:"handwriting"},{name:"Kristen",type:"handwriting"},{name:"Lucida Handwriting",type:"handwriting"},{name:"Bastard",
type:"blackletter"},{name:"Breitkopf Fraktur",type:"blackletter"},{name:"Cloister Black",type:"blackletter"},{name:"Fette Fraktur",type:"blackletter"},{name:"Fletcher",type:"blackletter"},{name:"Fraktur",type:"blackletter"},{name:"Lucida Blackletter",type:"blackletter"},{name:"Old English Text",type:"blackletter"},{name:"Schwabacher",type:"blackletter"},{name:"Aharoni",type:"non-latin"},{name:"Aparajita",type:"non-latin"},{name:"Arial",type:"non-latin"},{name:"Calibri",type:"non-latin"},{name:"Chandas",
type:"non-latin"},{name:"Gadugi",type:"non-latin"},{name:"Grecs du roi",type:"non-latin"},{name:"Javanese script",type:"non-latin"},{name:"Japanese Gothic",type:"non-latin"},{name:"Jomolhari",type:"non-latin"},{name:"Kiran",type:"non-latin"},{name:"Kochi",type:"non-latin"},{name:"Koren",type:"non-latin"},{name:"Kruti Dev",type:"non-latin"},{name:"Malgun Gothic",type:"non-latin"},{name:"Meiryo",type:"non-latin"},{name:"Microsoft JhengHei",type:"non-latin"},{name:"Microsoft YaHei",type:"non-latin"},
{name:"Minch\u014d",type:"non-latin"},{name:"Ming",type:"non-latin"},{name:"Mona",type:"non-latin"},{name:"MS Gothic",type:"non-latin"},{name:"Nastaliq Navees",type:"non-latin"},{name:"Porson",type:"non-latin"},{name:"Segoe UI Symbol",type:"non-latin"},{name:"Shruti",type:"non-latin"},{name:"SimSun",type:"non-latin"},{name:"Sylfaen",type:"non-latin"},{name:"Tahoma",type:"non-latin"},{name:"Tengwar",type:"non-latin"},{name:"Tibetan Machine Uni",type:"non-latin"},{name:"Wilson Greek",type:"non-latin"},
{name:"SMP",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Bitstream Cyberbit",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"Charis SIL",type:"unicode"},{name:"BMP",type:"unicode"},{name:"SMP",type:"unicode"},{name:"Code2002",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"IPA",type:"unicode"},{name:"Everson Mono",type:"unicode"},{name:"Windows",type:"unicode"},{name:"Fixedsys Excelsior",type:"unicode"},{name:"FreeFont",type:"unicode"},{name:"Gentium",type:"unicode"},
{name:"GNU Unifont",type:"unicode"},{name:"Georgia Ref",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Junicode",type:"unicode"},{name:"Mac OS 8.5",type:"unicode"},{name:"macOS",type:"unicode"},{name:"ISO 8859-x",type:"unicode"},{name:"MS Gothic",type:"unicode"},{name:"MS Mincho",type:"unicode"},{name:"Nimbus Sans Global",type:"unicode"},{name:"Noto",type:"unicode"},{name:"Fabrizio Schiavi",type:"unicode"},{name:"Squarish Sans CT",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Titus Cyberbit Basic",
type:"unicode"},{name:"Verdana Ref",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Apple Symbols",type:"symbol"},{name:"Asana-Math",type:"symbol"},{name:"Blackboard bold",type:"symbol"},{name:"Bookshelf Symbol 7",type:"symbol"},{name:"Cambria Math",type:"symbol"},{name:"Computer Modern",type:"symbol"},{name:"Lucida Math",type:"symbol"},{name:"Marlett",type:"symbol"},{name:"Symbol",type:"symbol"},{name:"Webdings",type:"symbol"},{name:"Wingdings",type:"symbol"},{name:"Wingdings 2",type:"symbol"},
{name:"Wingdings 3",type:"symbol"},{name:"Zapf Dingbats",type:"symbol"},{name:"Ad Lib",type:"decorative"},{name:"Allegro",type:"decorative"},{name:"Andreas",type:"decorative"},{name:"Arnold B\u00f6cklin",type:"decorative"},{name:"Astur",type:"decorative"},{name:"Banco",type:"decorative"},{name:"Bauhaus",type:"decorative"},{name:"Braggadocio",type:"decorative"},{name:"Broadway",type:"decorative"},{name:"Caslon Antique",type:"decorative"},{name:"Cooper Black",type:"decorative"},{name:"Curlz",type:"decorative"},
{name:"Ellington",type:"decorative"},{name:"Exocet",type:"decorative"},{name:"FIG Script",type:"decorative"},{name:"Forte",type:"decorative"},{name:"Gabriola",type:"decorative"},{name:"Horizon",type:"decorative"},{name:"Jim Crow",type:"decorative"},{name:"Lo-Type",type:"decorative"},{name:"Neuland",type:"decorative"},{name:"Peignot",type:"decorative"},{name:"San Francisco",type:"decorative"},{name:"Stencil",type:"decorative"},{name:"Umbra",type:"decorative"},{name:"Westminster",type:"decorative"},
{name:"Willow",type:"decorative"},{name:"Windsor",type:"decorative"},{name:"Lithos",type:"mimicry"},{name:"Skia",type:"mimicry"},{name:"3x3",type:"misc"},{name:"Compatil",type:"misc"},{name:"Generis",type:"misc"},{name:"Grasset",type:"misc"},{name:"LED",type:"misc"},{name:"Luxi",type:"misc"},{name:"System",type:"misc"}];WA.fonts=bT;WA.fonts=bT;WA["default"]=aT;var si=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js");si.textlayerNodeForFontMeasure=function(b){var c=
b.viewState,g=c.text_layer_node;c=c.fontmetric_text_layer_node;g&&!g.className.includes("newtext-text-layer")&&(b.viewState.text_layer_node=g=g.parentNode.querySelector(".newtext-text-layer.actual"));c&&!c.className.includes("newtext-text-layer")&&(b.viewState.fontmetric_text_layer_node=c=null);g&&!c&&g.parentNode&&(c=b.viewState.fontmetric_text_layer_node=g.parentNode.querySelector(".newtext-text-layer.font-measure"));return c};si.isExtendingChar=function(b){return 768<=b.charCodeAt(0)&&si.extendingChars.test(b)};
si.skipExtendingChars=function(b,c,g){for(;(0>g?0<c:c<b.length)&&si.isExtendingChar(b.charAt(c));)c+=g;return c};si.charBoundsOfBigMonospacedLine=function(b,c,g,a){var d=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,f=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,k=6<arguments.length?arguments[6]:void 0,n=7<arguments.length?arguments[7]:void 0,p=g.text.length;if(500>p||c.isProportional(si.getComputedFontFamily(a)))return null;var q=Infinity,r=k.defaultTextStyle;k.lineWrapping&&
(si.__inter4__=a.getBoundingClientRect(),q=si.__inter4__.width,si.__inter4__.height);n=c._domMeasure.defaultCharExtent(b,{defaultTextStyle:r},n);k=n.width;n=n.height;r=Array(p);for(var u=0;u<p;u++)d+k>q&&(d=0,f+=n),r[u]={x:d,y:f,width:k,height:n},d+=k;return r};si.charBoundsOfLine=function(b,c){var g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,d=c.ELEMENT_NODE,f=c.TEXT_NODE;c.childNodes;var k=c.ownerDocument,n=[],p=0;if(c)if(c.className.includes("line")){g-=
c.offsetLeft;a-=c.offsetTop;var q=c.childNodes[0]}else q=c.getElementsByClassName("line")[0].childNodes[0],g=g-c.offsetLeft+si.getComputedMarginLeft(c),a-=c.offsetTop;else q=null;if(!q){var r=q=k.createElement("br");c.appendChild(r)}for(;q&&!(Infinity<p);){var u="BR"!==q.tagName&&q.nodeType===d&&q.childNodes[0]||q;if(u.nodeType===f)for(var x=u.length,y=0;y<x;y++){si.__inter5__=si.measureCharInner(k,u,y,"right");var D=si.__inter5__.left;var H=si.__inter5__.top;var I=si.__inter5__.width;var N=si.__inter5__.height;
D+=g;H+=a;n[p++]={x:D,y:H,width:I,height:N}}else if(q.nodeType===d)si.__inter6__=q.getBoundingClientRect(),D=si.__inter6__.left,H=si.__inter6__.top,I=si.__inter6__.width,N=si.__inter6__.height,D+=g,H+=a,n[p++]={x:D,y:H,width:I,height:N};else throw Error("Cannot deal with node ".concat(q));q=q.nextSibling}r&&r.parentNode.removeChild(r);return n};si.measureCharInner=function(b,c,g){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"left",d=g,f=g+1;if(3==c.nodeType)for(var k=0;4>k;k++){var n=
si.getUsefulRect(si.range(b,c,d,f).getClientRects(),a);if(n.left||n.right||0==d)break;f=d;--d}return n};si.range=function(b,c,g,a,d){b=b.createRange();b.setEnd(d||c,a);b.setStart(c,g);return b};si.getUsefulRect=function(b,c){var g={left:0,right:0,top:0,bottom:0};if("left"==c)for(c=0;c<b.length&&(g=b[c]).left==g.right;c++);else for(c=b.length-1;0<=c&&(g=b[c]).left==g.right;c--);return g};si.string=Xj;si.arr=aj;si.obj=bj;si.FontDetector=aT;si.cumulativeOffset=tw;si.config=Jm;si.debug=!!si.config.onloadURLQuery["debug-font-metric"];
si.checkTimeout=1E3;var cT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),g=c.hasOwnProperty("FontMetric")&&"function"===typeof c.FontMetric?c.FontMetric:c.FontMetric=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){this.charMap={};this.cachedBoundsInfo={};this.supportedFontCache=
{};this.element=null;this.isProportionalCache={}}},{key:"reset",value:function(a){if(this.element){var d=this.element.parentNode;var f=this.element.getRootNode()}this.uninstall();this.charMap={};this.cachedBoundsInfo={};f&&d&&this.install(f,d,a)}},{key:"install",value:function(a,d,f){this.element=a.createElement("div");this.element.name="fontMetric";this.setMeasureNodeStyles(this.element.style,!0);d.appendChild(this.element);this._domMeasure=(new si.DOMTextMeasure).install(a,d,f)}},{key:"uninstall",
value:function(){this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this._domMeasure&&this._domMeasure.uninstall())}},{key:"setMeasureNodeStyles",value:function(a,d){a.width=a.height="auto";a.left=a.top="0px";a.visibility="hidden";a.position="absolute";a.whiteSpace="pre";a.font="inherit";a.overflow=d?"hidden":"visible"}},{key:"measure",value:function(a,d){var f=a.fontFamily,k=a.fontSize,n=a.fontWeight,p=a.fontStyle,q=a.textDecoration,r=a.textStyleClasses;
a=a.transform;var u=this.element;a&&(a=a.inverse());u.textContent=d;Object.assign(u.style,{"-webkit-text-size-adjust":"none",fontFamily:f,fontWeight:n,fontStyle:p,textDecoration:q,transform:a,fontSize:k+"px"});u.className=r?r.join(" "):"";try{si.__inter0__=u.getBoundingClientRect();var x=si.__inter0__.width;var y=si.__inter0__.height}catch(D){return{width:0,height:0}}return{height:y,width:x}}},{key:"charBoundsFor",value:function(a,d){var f=d.length,k=Array(f),n=this.cachedBoundsInfo,p=n.bounds,q=
n.str;n=n.style;if(this.isProportional(a.fontFamily)){n=p&&si.obj.equals(n,a);for(var r=!a.fixedCharacterSpacing,u=0,x=0;u<f;u++){var y=d[u];if(r)if(n=n&&y===q[u]){si.__inter1__=p[u];y=si.__inter1__.width;var D=si.__inter1__.height}else y=d.substr(0,u+1),si.__inter2__=this.measure(a,y),y=si.__inter2__.width,D=si.__inter2__.height,y-=x;else si.__inter3__=this.sizeFor(a,y),y=si.__inter3__.width,D=si.__inter3__.height;k[u]={x,y:0,width:Math.ceil(y),height:Math.ceil(D)};x+=y}r&&(this.cachedBoundsInfo=
{bounds:k,str:d,style:a})}else for(d=this.sizeFor(a,"x",!0),a=this.sizeFor(a,"xx",!0).width-d.width,d=d.height,q=0;q<f;q++)p=a*q,k[q]={x:p,y:0,width:a,height:d};return k}},{key:"isProportional",value:function(a){if(this.isProportionalCache.hasOwnProperty(a))return this.isProportionalCache[a];var d={fontFamily:a,fontSize:12},f=this.sizeFor(d,"w").width;d=this.sizeFor(d,"i").width;return this.isProportionalCache[a]=f!==d}},{key:"sizeFor",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:"",f=a.fontFamily,k=a.fontSize,n=a.fontWeight,p=a.fontStyle,q=a.textDecoration,r=a.textStyleClasses,u={fontFamily:f,fontSize:k,fontWeight:n,fontStyle:p,textDecoration:q,textStyleClasses:r};if(!(2<arguments.length&&void 0!==arguments[2]&&arguments[2])&&1<d.length)return this.measure(u,d);r=r?r.join(" "):"";f=[f,k,n,p,q,r].join("-");this.charMap[f]||(this.charMap[f]={});this.charMap[f][d]||(this.charMap[f][d]=this.measure(u,d));return this.charMap[f][d]}},{key:"defaultLineHeight",value:function(a){return this.sizeFor(a,
" ").height}},{key:"supportedFonts",get:function(){return si.arr.uniq(Object.keys(this.supportedFontCache).map(function(a){return a.split(",")[0].replaceAll(/-bold|-Medium|"|-normal/g,"")}))}},{key:"isFontSupported",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"normal",f=this.fontDetector||(this.fontDetector=new si.FontDetector(this.element.ownerDocument));if(this.supportedFontCache[a+"-"+d]){var k=this.supportedFontCache[a+"-"+d],n=k.ts;k=k.value;if(Date.now()-n<
si.checkTimeout)return k}f=f.isFontSupported(a,d);this.supportedFontCache[a+"-"+d]={ts:Date.now(),value:f};return f}},{key:"defaultCharExtent",value:function(a,d,f){return this._domMeasure.defaultCharExtent(a,d,f)}},{key:"manuallyComputeCharBoundsOfLine",value:function(a,d){return this._domMeasure.computeCharBBoxes(a,d,0,0,4<arguments.length?arguments[4]:void 0,5<arguments.length?arguments[5]:void 0,6<arguments.length?arguments[6]:void 0,this)}},{key:"manuallyComputeBoundsOfLines",value:function(a,
d){return this._domMeasure.computeBBoxesOfLines(a,d,0,0,4<arguments.length?arguments[4]:void 0,5<arguments.length?arguments[5]:void 0,6<arguments.length?arguments[6]:void 0)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"FontMetric"}},{key:"default",value:function(){if(!this._fontMetric)throw Error("FontMetric has not yet been initialized!");return this._fontMetric}},{key:"initDefault",value:function(a){if(!this._fontMetric){if(!a&&"undefined"===typeof document)throw Error("Cannot initialize FontMetric without document");
a||(a={document});this._fontMetric=this.forDOMEnv(a)}return this._fontMetric}},{key:"removeDefault",value:function(){this._fontMetric&&(this._fontMetric.uninstall(),this._fontMetric=null)}},{key:"forDOMEnv",value:function(a){a=a.document;var d=new si.FontMetric;d.install(a,a.body);return d}}],c,{pathInPackage:function(){return"./rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:318,end:8058})}(void 0);si.extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),g=c.hasOwnProperty("DOMTextMeasure")&&"function"===typeof c.DOMTextMeasure?c.DOMTextMeasure:c.DOMTextMeasure=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"reset",value:function(){if(this.element){var a=this.element.parentNode;var d=this.element.ownerDocument}this.uninstall();d&&
a&&this.install(d,a);return this}},{key:"install",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;this.maxLineBBoxCacheCount=(this.debug=f)?1:3E3;this.lineBBoxCacheCount=0;this.lineBBoxCache={};this.maxTextlayerNodeCacheCount=f?1:30;this.textlayerNodeCacheCount=0;this.textlayerNodeCache={};this.defaultCharWidthHeightCache={};this.doc=a;var k=this.element=a.createElement("div");k.className="dom-measure"+(f?" debug":"");this.setMeasureNodeStyles(k.style,!0);d.appendChild(k);
return this}},{key:"uninstall",value:function(){var a=this.element;a&&(a.parentNode&&a.parentNode.removeChild(a),this.element=null)}},{key:"setMeasureNodeStyles",value:function(a,d){a.width=a.height="auto";this.debug||(a.left=a.top="0px",a.visibility="hidden");a.position="absolute";a.whiteSpace="pre";a.font="inherit";a.overflow=d&&!this.debug?"hidden":"visible"}},{key:"generateStyleKey",value:function(a){var d=a.defaultTextStyle;return[d.fontFamily,d.fontSize,d.fontWeight,d.fontStyle,d.textDecoration,
d.textStyleClasses,a.paddingLeft,a.paddingRight,a.paddingTop,a.paddingBottom,a.width,a.height,a.clipMode,a.lineWrapping,a.textAlign].join("-")}},{key:"defaultCharExtent",value:function(a,d,f){var k=this,n=this.generateStyleKey(d),p=this.defaultCharWidthHeightCache[n];if("undefined"!==typeof p&&(0!==p.height||0!==p.width))return p;var q=this.doc;return this.withTextLayerNodeDo(a,f,d,n,function(r){var u=q.createElement("span");u.className="line";u.style.whiteSpace="pre";r.appendChild(u);u.textContent=
"abcdefghijklmnopqrstufwxyz ABCDEFGHIJKLMNOPQRSTUFWXYZ 1234567890 {}[];,./<>?'\"!@#$%^&*()-=_+";var x=u.getBoundingClientRect().width,y=q.createElement("span");y.className="line";y.style.whiteSpace="pre";r.appendChild(y);y.textContent="H\ne\nll\no";var D=y.getBoundingClientRect().height;r.removeChild(u);r.removeChild(y);return k.defaultCharWidthHeightCache[n]={width:x/92,height:Math.ceil(D/4)}})}},{key:"computeBBoxesOfLines",value:function(a,d){for(var f=this,k=2<arguments.length&&void 0!==arguments[2]?
arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,p=4<arguments.length?arguments[4]:void 0,q=5<arguments.length?arguments[5]:void 0,r=6<arguments.length?arguments[6]:void 0,u=this.generateStyleKey(p),x=Array(d.length),y=!0,D=0;D<d.length;D++){var H=!d[D].textAttributes.length&&this.lineBBoxCache[u+"_"+d[D].text];H&&H.height&&H.width?x[D]=H:y=!1}return y?x:this.withTextLayerNodeDo(a,q,p,u,function(I,N,J){var sa=Array(d.length),ja=Array(d.length);f.doc;for(var Ha=0;Ha<d.length;Ha++)if(!ja[Ha]){var Qa=
r(d[Ha]);Qa.style.display="inline-block";I.appendChild(Qa);sa[Ha]=Qa}for(Ha=0;Ha<sa.length;Ha++)if(!ja[Ha]){Qa=sa[Ha];var ec=Qa.getBoundingClientRect();f.lineBBoxCache[u+"_"+d[Ha].text]=ja[Ha]={x:ec.left-Qa.offsetLeft+k-N,y:ec.top-Qa.offsetTop+n-J,width:ec.width,height:ec.height}}for(N=0;N<sa.length;N++)I.removeChild(sa[N]);return ja})}},{key:"computeCharBBoxes",value:function(a,d){var f=this,k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:
0,p=4<arguments.length?arguments[4]:void 0,q=5<arguments.length?arguments[5]:void 0,r=6<arguments.length?arguments[6]:void 0,u=7<arguments.length?arguments[7]:void 0;return this.withTextLayerNodeDo(a,q,p,this.generateStyleKey(p),function(x,y,D){var H=r(d);x.appendChild(H);f.doc;x=1E4<d.stringSize&&si.charBoundsOfBigMonospacedLine(a,u,d,H,k,n,p,q)||si.charBoundsOfLine(d,H,k-y,n-D);f.debug||H.parentNode.removeChild(H);return x})}},{key:"withTextLayerNodeDo",value:function(a,d,f,k,n){var p=this.doc,
q=this.textlayerNodeCache,r=this.element,u=si.textlayerNodeForFontMeasure(a);u||(u=q[k]);if(!u){this.textlayerNodeCacheCount++;u=q[k]=d(f,[]);u.id=k;d=f.width;var x=f.clipMode;f.width||f.clipMode&&"visible"!==f.clipMode?(f=p.createElement("div"),f.style.position="absolute",x&&(f.style.overflow=x),d&&(f.style.width=d+"px"),f.id=k,f.appendChild(u),r.appendChild(f)):r.appendChild(u)}k=a.getGlobalTransform().inverse();a.env.renderer&&a.env.renderer.getNodeForMorph(a)&&(1!=k.getScale()||0!=k.getRotation())&&
(k.e=k.f=0,u.style.transform=k.toString());k=u.getBoundingClientRect();a=k.left;k=k.top;try{return n(u,a,k)}finally{if(u.style.transform="",!this.debug&&this.textlayerNodeCacheCount>this.maxTextlayerNodeCacheCount){n=Math.ceil(this.maxTextlayerNodeCacheCount/2);for(var y;n--&&(y=r.childNodes[0]);)q[y.id]=null,r.removeChild(y);this.textlayerNodeCacheCount-=n}}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DOMTextMeasure"}}],c,{pathInPackage:function(){return"./rendering/font-metric.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11739,end:20015})})(void 0);si.GLOBAL="undefined"!==typeof System?System.global:window||global||self||void 0;si.getComputedFontFamily="function"===typeof si.GLOBAL.getComputedStyle?function(b){return si.GLOBAL.getComputedStyle(b).fontFamily}:function(){return""};si.getComputedMarginLeft=
"function"===typeof si.GLOBAL.getComputedStyle?function(b){return parseInt(si.GLOBAL.getComputedStyle(b).marginLeft)||0}:function(){return 0};si["default"]=cT;var Kk=window.lively.FreezerRuntime.recorderFor("lively.morphic/changes.js");Kk.signalBindings=function(b,c,g){if(b=b.attributeConnections){b=b.slice();for(var a=0;a<b.length;a++)b[a].sourceAttrName===c&&b[a].update(g)}};Kk.informMorph=function(b,c,g){try{g.onChange(c);Kk.signalBindings(g,"change",c);for(var a=g.owner;a;)a.onSubmorphChange(c,
g),a=a.owner}catch(d){console.error("Error in informMorph: ".concat(d.stack))}};Kk.arr=aj;Kk.obj=bj;Kk.signal=Ln;(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),g=c.hasOwnProperty("Change")&&"function"===typeof c.Change?c.Change:c.Change=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){this.target=
a;this.group=null}},{key:"type",get:function(){return"abstract change"}},{key:"apply",value:function(){throw Error("Not yet implemented");}},{key:"reverseApply",value:function(){throw Error("Not yet implemented");}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Change"}}],c,{pathInPackage:function(){return"./changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:750,end:1023})})(void 0);var dT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),g=c.hasOwnProperty("GroupChange")&&"function"===typeof c.GroupChange?c.GroupChange:c.GroupChange=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.changes=[]}},{key:"consumesChanges",value:function(){return!0}},{key:"addChange",value:function(a){this.changes.push(a);a.group=this}},{key:"apply",value:function(){this.changes.slice().forEach(function(a){return a.apply()});return this}},{key:"reverseApply",value:function(){this.changes.slice().reverse().forEach(function(a){return a.reverseApply()});return this}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"GroupChange"}}],
c,{pathInPackage:function(){return"./changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1032,end:1463})}(Kk.Change);Kk.GroupChange=dT;Kk.GroupChange=dT;var eT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),g=c.hasOwnProperty("ValueChange")&&"function"===typeof c.ValueChange?c.ValueChange:
c.ValueChange=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"type",get:function(){return"setter"}},{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d,f,k){Ve._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.prop=d;this.value=f;this.prevValue=null;this.meta=k}},{key:"apply",value:function(){this.target[this.prop]=
this.value}},{key:"reverseApply",value:function(){this.target[this.prop]=this.prevValue}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ValueChange"}}],c,{pathInPackage:function(){return"./changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1471,end:1939})}(Kk.Change);Kk.ValueChange=eT;Kk.ValueChange=
eT;var fT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),g=c.hasOwnProperty("MethodCallChange")&&"function"===typeof c.MethodCallChange?c.MethodCallChange:c.MethodCallChange=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"type",get:function(){return"method-call"}},{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d,f,k,n){Ve._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.selector=d;this.args=f;this.undo=k;this.meta=n}},{key:"apply",value:function(){var a=this.target;a[this.selector].apply(a,this.args)}},{key:"reverseApply",value:function(){if(this.undo)if("function"===typeof this.undo)this.undo();else{var a=this.undo,d=a.target;d[a.selector].apply(d,a.args)}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MethodCallChange"}}],c,{pathInPackage:function(){return"./changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1947,end:2581})}(Kk.GroupChange);Kk.MethodCallChange=fT;Kk.MethodCallChange=fT;var tH=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),g=c.hasOwnProperty("ChangeManager")&&"function"===typeof c.ChangeManager?c.ChangeManager:c.ChangeManager=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.changes=[];this.changeRecordedListeners=[];this.revision=0;this.changeRecordersPerMorph=new WeakMap;this.changeRecorders={};this.changeGroupStack=[];this.defaultMeta={};this.metaStack=[]}},{key:"changesFor",value:function(a){return this.changes.filter(function(d){return d.target===a})}},{key:"apply",value:function(a,d){d.apply()}},{key:"doWithValueChangeMeta",
value:function(a,d,f){this.defaultMeta=a;this.metaStack.push(a);try{var k=f(d)}finally{return this.metaStack.pop(),this.defaultMeta=Kk.arr.last(this.metaStack)||{},k}}},{key:"addValueChange",value:function(a,d,f,k){d=new Kk.ValueChange(a,d,f,Object.assign({},this.defaultMeta,{},k));return this._record(a,d)}},{key:"addMethodCallChangeDoing",value:function(a,d,f){var k=a.target,n=a.selector,p=a.args;(a=a.undo)||(a=function(){return console.warn("No undo recorded for ".concat(k,".").concat(n))});p=new Kk.MethodCallChange(k,
n,p,a,this.defaultMeta);d.groupChangesWhile(p,f);return p}},{key:"_record",value:function(a,d){Kk.signal(this,"changeRecorded",d);d.hasOwnProperty("value")&&(d.prevValue=a._morphicState[d.prop],a._morphicState[d.prop]=d.value);a.makeDirty(d);var f=Kk.arr.last(this.changeGroupStack);f&&f.consumesChanges()?f.addChange(d):(this.changes.push(d),a._rev=++this.revision,this.informChangeListeners(d));Kk.informMorph(this,d,a);return d}},{key:"groupChangesWhile",value:function(a,d,f){var k=3<arguments.length&&
void 0!==arguments[3]?arguments[3]:!0;d||(d=new Kk.GroupChange(a));this.changeGroupStack.push(d);try{return f(),Kk.arr.remove(this.changeGroupStack,d),k?this._record(a,d):d}catch(n){throw Kk.arr.remove(this.changeGroupStack,d),n;}}},{key:"dontRecordChangesWhile",value:function(a,d){return this.groupChangesWhile(a,void 0,d,!1)}},{key:"recordChangesWhile",value:function(a,d){var f=this.changes.length;a();a=this.changes.slice(f,this.changes.length);return d?a.filter(d):a}},{key:"addChangeListener",value:function(a){Kk.arr.pushIfNotIncluded(this.changeRecordedListeners,
a)}},{key:"removeChangeListener",value:function(a){Kk.arr.remove(this.changeRecordedListeners,a)}},{key:"informChangeListeners",value:function(a){this.changeRecordedListeners.forEach(function(d){return d(a)})}},{key:"recordChangesStart",value:function(a){var d=Kk.obj.newKeyIn(this.changeRecorders,(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"")+"__change_recorder_"+Date.now()),f=a?function(n){return a(n)&&k.changes.push(n)}:function(n){return k.changes.push(n)},k=this.changeRecorders[d]=
{id:d,filter:a,changes:[],listener:f};this.addChangeListener(f);return k}},{key:"recordChangesStop",value:function(a){if(!(a in this.changeRecorders))return[];var d=this.changeRecorders[a],f=d.changes;d=d.listener;delete this.changeRecorders[a];this.removeChangeListener(d);return f}},{key:"recordChangesStartForMorph",value:function(a,d){d=this.recordChangesStart(d,a.id);var f=this.changeRecordersPerMorph.get(a);f||(f=[],this.changeRecordersPerMorph.set(a,f));f.push(d.id);return d}},{key:"recordChangesStopForMorph",
value:function(a,d){var f=this.changeRecordersPerMorph.get(a);if(!f||!f.length)return console.warn("Cannot endMorphChangeRecorder for morph ".concat(a,": recorder not found")),[];(a=d)?Kk.arr.remove(f,a):a=f.pop();return this.recordChangesStop(a)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ChangeManager"}}],c,{pathInPackage:function(){return"./changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2589,end:7762})}(void 0);Kk.ChangeManager=tH;Kk.ChangeManager=tH;var tm=window.lively.FreezerRuntime.recorderFor("lively.morphic/undo.js");tm.printArg=function(b){return tm.obj.inspect(b,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};tm.obj=bj;tm.arr=aj;tm.events=bt;tm.fun=cp;(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),g=c.hasOwnProperty("Undo")&&"function"===typeof c.Undo?c.Undo:
c.Undo=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;this.name=a;this.targets=d;this.timestamp=this.changes=this.recorder=null;this.no=f}},{key:"recorded",value:function(){return!!this.changes}},{key:"isRecording",
value:function(){return!!this.recorder}},{key:"startRecording",value:function(a){var d=this;if(this.recorded()||this.isRecording())throw Error("Undo already recorded / recording");if(!this.targets.length)throw Error("Undo has no target morphs");this.timestamp=Date.now();this.recorder=this.targets[0].recordChangesStart(function(f){var k=f.target;return k.isUsedAsEpiMorph()||!d.targets.some(function(n){return n===k||n.isAncestorOf(k)})?!1:"function"===typeof a?a(f):!0});return this}},{key:"stopRecording",
value:function(){this.name;var a=this.recorder,d=a.id;a.changes;this.changes=Wb(this.targets,1)[0].recordChangesStop(d);this.recorder=this.targets=null}},{key:"apply",value:function(){if(!this.recorded())throw Error("Cannot apply undo that has no changes recorded yet");this.changes.slice().forEach(function(a){return a.apply()});return this}},{key:"reverseApply",value:function(){if(!this.recorded())throw Error("Cannot reverseApply undo that has no changes recorded yet");this.changes.slice().reverse().forEach(function(a){return a.reverseApply()});
return this}},{key:"addTarget",value:function(a){tm.arr.pushIfNotIncluded(this.targets,a)}},{key:"addUndos",value:function(a){a=tm.arr.sortBy(a.concat(this).filter(function(d){return d.recorded()}),function(d){return d.no});a.length&&(this.changes=a.flatMap(function(d){return d.changes}),this.timestamp=a[0].timestamp,this.no=a[0].no,this.name=a.map(function(d){return d.name}).join("-"))}},{key:"toString",value:function(){var a=this.name,d=this.changes,f=this.no,k=this.isRecording();d=d.length?"\n  "+
d.map(function(n){var p=n.selector,q=n.args,r=n.prop,u=n.value;n=n.target;return p?"".concat(n,".").concat(p,"(").concat(q.map(tm.printArg),")"):"".concat(n,".").concat(r," = ").concat(tm.printArg(u))}).join("\n  "):"no changes";return"Undo(".concat(f,":").concat(a," ").concat(k?"RECORDING ":"").concat(d,")")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Undo"}}],c,{pathInPackage:function(){return"./undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:54,end:2646})})(void 0);var XA=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),g=c.hasOwnProperty("UndoManager")&&"function"===typeof c.UndoManager?c.UndoManager:c.UndoManager=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};
return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){this.reset();this.filter=a}},{key:"reset",value:function(){this.undos=[];this.redos=[];this.undoInProgress=null;this.counter=this.applyCount=0;this.grouping={current:[],debounce:null,debouncedCanceled:!1,debounceTime:31}}},{key:"group",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.groupLaterCancel();a&&this.undos.includes(a)&&(this.grouping.current=tm.arr.uniq(this.undos.slice(this.undos.indexOf(a)).concat(this.grouping.current)));
this.grouping.current.length&&(a=this.grouping.current.slice(1),this.grouping.current[0].addUndos(a),this.undos=tm.arr.withoutAll(this.undos,a),this.grouping.current=[])}},{key:"ensureNewGroup",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"new undo group";this.group();this.undoStart(a,d);return this.undoStop()}},{key:"groupLaterCancel",value:function(){var a=this.grouping;a.debounce&&(a.debouncedCanceled=!0,this.grouping=Object.assign({},a,{debounce:null,debouncedCanceled:!1}))}},
{key:"groupLater",value:function(a){var d=this,f=this.grouping;(f.debounce||(f.debounce=tm.fun.debounce(a||f.debounceTime,function(){f.debounce=null;f.debouncedCanceled||d.group()})))()}},{key:"undoStart",value:function(a,d){if(!this.applyCount)if(this.undoInProgress)console.warn("There is already an undo being recorded. Tried to start undo ".concat(d," for ").concat(a.name,", but ").concat(this.undoInProgress.name," is currently in progress."));else return this.undoInProgress=(new tm.Undo(d,[a],
this.counter++)).startRecording(this.filter)}},{key:"undoStop",value:function(){var a=this.undoInProgress;if(!a)return null;a.stopRecording();this.undoInProgress=null;this.undos.push(a);this.grouping.current.push(a);this.redos.length&&(this.redos.length=0);return a}},{key:"removeLatestUndo",value:function(){this.undoStop();var a=this.undos.pop();tm.arr.remove(this.grouping.current,a);return a}},{key:"undo",value:function(){var a=this.removeLatestUndo();if(a){tm.arr.remove(this.grouping.current,a);
this.redos.unshift(a);this.applyCount++;try{a.reverseApply()}finally{this.applyCount--}return a}}},{key:"redo",value:function(){this.undoStop();var a=this.redos.shift();if(a){this.undos.push(a);this.applyCount++;try{a.apply()}finally{this.applyCount--}return a}}},{key:"toString",value:function(){var a=0===this.undos.length?"":"\n  ".concat(20<this.undos.length?"...\n  ":"").concat(this.undos.slice(-20).join("\n  ")),d=!!this.undoInProgress;return"UndoManager(".concat(this.undos.length," undos, ").concat(this.redos.length,
" redos, ").concat(d?", UNDO IN PROGRESS":"").concat(a,")")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"UndoManager"}}],c,{pathInPackage:function(){return"./undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2786,end:6113})}(void 0);tm.UndoManager=XA;tm.UndoManager=XA;var Km=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js");
Km.promise=yj;Km.bowser=pt;Km.touchInputDevice=bq;Km.placeholderValue="\u0001\u0001";Km.placeholderRe=/\u0001/g;var gT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js"),g=c.hasOwnProperty("TextInput")&&"function"===typeof c.TextInput?c.TextInput:c.TextInput=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),
value:function(a){this.eventDispatcher=a;this.domState={rootNode:null,textareaNode:null,eventHandlers:[],isInstalled:!1};this.inputState={composition:null,manualCopy:null,manualPaste:null,positionChangedTime:0,scrollLeftWhenChanged:0,scrollTopWhenChanged:0}}},{key:"install",value:function(a,d){var f=this,k=this.domState,n=k.isInstalled,p=k.rootNode;this.world=d;if(n){if(p===a)return;this.uninstall()}k.isInstalled=!0;k.rootNode=a;a.tabIndex=1;d=k.textareaNode=a.ownerDocument.createElement("textarea");
d.setAttribute("style","\n      position: absolute;\n      /*extent cannot be 0, input won't work correctly in Chrome 52.0*/\n      width: 20px; height: 20px;\n      z-index: 0;\n      opacity: 1;\n      background: transparent;\n      -moz-appearance: none;\n      appearance: none;\n      border: none;\n      resize: none;\n      outline: none;\n      overflow: hidden;\n      font: inherit;\n      padding: 0 1px;\n      margin: 0 -1px;\n      text-indent: -1em;\n      -ms-user-select: text;\n      -moz-user-select: text;\n      -webkit-user-select: text;\n      user-select: text;\n      /*with pre-line chrome inserts &nbsp; instead of space*/\n      white-space: pre!important;");
Km.touchInputDevice&&d.setAttribute("x-palm-disable-auto-cap",!0);d.setAttribute("wrap","off");d.setAttribute("autocorrect","off");d.setAttribute("autocapitalize","off");d.setAttribute("spellcheck",!1);d.setAttribute("aria-label","Lively Textinput Node");d.className="lively-text-input";d.value="";a.insertBefore(d,a.firstChild);Km.touchInputDevice&&(d.setAttribute("disabled",!0),d.style.setProperty("transform","scale(0)"));k.eventHandlers=[{type:"focusin",node:a,fn:function(q){return f.onRootNodeFocus(q)},
capturing:!0},{type:"focusin",node:k.textareaNode,fn:function(q){return f.onTextAreaFocus(q)},capturing:!0},{type:"blur",node:k.textareaNode,fn:function(q){return f.onTextAreaBlur(q)},capturing:!0},{type:"keydown",node:k.textareaNode,fn:function(q){return f.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"keyup",node:k.textareaNode,fn:function(q){return f.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"cut",node:k.textareaNode,fn:function(q){return f.eventDispatcher.dispatchDOMEvent(q)},
capturing:!1},{type:"copy",node:k.textareaNode,fn:function(q){return f.inputState.manualCopy?f.inputState.manualCopy.onEvent(q):f.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"paste",node:k.textareaNode,fn:function(q){return f.inputState.manualPaste?f.inputState.manualPaste.onEvent(q):f.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"compositionstart",node:k.textareaNode,fn:function(q){return f.onCompositionStart(q)},capturing:!1},{type:"compositionend",node:k.textareaNode,fn:function(q){return f.onCompositionEnd(q)},
capturing:!1},{type:"compositionupdate",node:k.textareaNode,fn:function(q){return f.onCompositionUpdate(q)},capturing:!1},{type:"input",node:k.textareaNode,fn:function(q){return f.onInput(q)},capturing:!1}];k.eventHandlers.forEach(function(q){return q.node.addEventListener(q.type,q.fn,q.capturing)});return this}},{key:"uninstall",value:function(){var a=this.domState;a.isInstalled=!1;a.eventHandlers.forEach(function(f){return f.node.removeEventListener(f.type,f.fn,f.capturing)});var d=a.textareaNode;
d&&d.parentNode&&d.parentNode.removeChild(d);a.rootNode=null;return this}},{key:"resetValue",value:function(){var a=this.domState.textareaNode;a&&(a.value=Km.placeholderValue)}},{key:"readValue",value:function(){var a=this.domState.textareaNode;return a?a.value.replace(Km.placeholderRe,""):""}},{key:"focus",value:function(a,d){var f=this.domState.textareaNode;f&&(Km.touchInputDevice&&a&&a.isText&&!a.readOnly&&f.removeAttribute("disabled"),a&&a.stealFocus||f.getRootNode().activeElement!==f&&f.focus(),
Km.bowser.firefox&&Promise.resolve().then(function(){return f.getRootNode().activeElement!==f&&f.focus()}),a&&a.isText&&a.focusable?(Km.touchInputDevice&&f.focus(),this.ensureBeingAtCursorOfText(a)):d&&this.ensureBeingInVisibleBoundsOfWorld(d))}},{key:"blur",value:function(){var a=this.domState.textareaNode;Km.touchInputDevice&&a.setAttribute("disabled",!0);a&&a.blur()}},{key:"doCopyWithMimeTypes",value:function(a){var d=this;return this.execCommand("manualCopy",function(){var f=d.domState.textareaNode,
k=function q(p){f.removeEventListener("copy",q);p.preventDefault();a.forEach(function(r){return p.clipboardData.setData(r.type,r.data)})};setTimeout(function(){return f.removeEventListener("copy",k)},300);f.addEventListener("copy",k);f.value="";f.select();f.ownerDocument.execCommand("copy")})}},{key:"doCopy",value:function(a){var d=this;return this.execCommand("manualCopy",function(){var f=d.domState.textareaNode;f.value=a;f.select();f.ownerDocument.execCommand("copy")})}},{key:"doPaste",value:function(){var a=
this;return this.execCommand("manualPaste",function(){var d=a.domState.textareaNode;d.value="";d.select();d.ownerDocument.execCommand("paste")})}},{key:"execCommand",value:function(){var a=Cb(regeneratorRuntime.mark(function n(f,k){var p,q,r;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.domState.isInstalled){u.next=2;break}throw Error("Cannot copy to clipboard \u2013 input helper is not installed into DOM!");case 2:p=this.inputState;if(!p[f]){u.next=11;break}u.prev=
4;u.next=7;return p[f].promise;case 7:u.next=11;break;case 9:u.prev=9,u.t0=u["catch"](4);case 11:return q=Km.promise.deferred(),r=!1,p[f]={onEvent:function(x){r||(p[f]=null,r=!0,q.resolve(x))},promise:q.promise},k(),u.prev=15,u.next=18,Km.promise.waitFor(1E3,function(){return r});case 18:u.next=25;break;case 20:u.prev=20,u.t1=u["catch"](15),p[f]=null,r=!0,q.reject(u.t1);case 25:return u.abrupt("return",q.promise);case 26:case "end":return u.stop()}},n,this,[[4,9],[15,20]])}));return function(f,k){return a.apply(this,
arguments)}}()},{key:"onTextAreaBlur",value:function(a){var d=this;setTimeout(function(){var f=d.domState||{},k=f.textareaNode;f=f.rootNode;if(k&&f){var n=k.getRootNode(),p=!(d.world.focusedMorph&&d.world.focusedMorph.stealFocus);(n.activeElement===f||d.world.isEmbedded&&!n.activeElement)&&p&&!Km.touchInputDevice&&k.focus()}})}},{key:"onTextAreaFocus",value:function(a){}},{key:"onRootNodeFocus",value:function(a){var d=this.domState||{},f=d.rootNode;if(a.target===d.textareaNode||a.target===f)this.world.focusedMorph&&
this.world.focusedMorph.stealFocus||this.focus();this.inputState.composition=null}},{key:"onInput",value:function(a){if(!this.inputState.composition){if(!a.data){var d=this.readValue();a.__defineGetter__("data",function(){return d})}this.resetValue();this.eventDispatcher.dispatchDOMEvent(a)}}},{key:"onCompositionStart",value:function(a){this.inputState.composition={};this.eventDispatcher.dispatchDOMEvent(a)}},{key:"onCompositionUpdate",value:function(a){var d=this.inputState.composition,f=this.readValue();
d.lastValue!==f&&(d.lastValue=f,this.eventDispatcher.dispatchDOMEvent(a))}},{key:"onCompositionEnd",value:function(a){this.inputState.composition=null;this.eventDispatcher.dispatchDOMEvent(a)}},{key:"setPosition",value:function(a){var d=(this.domState||{}).textareaNode;d&&(d.style.left=a.x+"px",d.style.top=a.y+"px")}},{key:"ensureBeingInVisibleBoundsOfWorld",value:function(a){this.setPosition(a.visibleBounds().center())}},{key:"ensureBeingAtCursorOfText",value:function(a){var d=a.world();if(d){var f=
a.whatsVisible,k=a.cursorPosition,n=k.row;k=k.column;n=Math.max(f.startRow,Math.min(n,f.endRow));f=a.charBoundsFromTextPosition({row:n,column:k}).topLeft();a=d.visibleBounds().insetBy(10).constrainPt(a.worldPoint(f.subPt(a.scroll)));this.inputState.positionChangedTime=Date.now();this.inputState.scrollLeftWhenChanged=document.documentElement.scrollLeft;this.inputState.scrollTopWhenChanged=document.documentElement.scrollTop;this.setPosition(a)}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TextInput"}}],
c,{pathInPackage:function(){return"./events/TextInput.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:235,end:12837})}(void 0);Km["default"]=gT;var hT=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js");hT.arr=aj;var iT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js"),
g=c.hasOwnProperty("KillRing")&&"function"===typeof c.KillRing?c.KillRing:c.KillRing=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){this.size=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.buffer=[];this.pointer=-1}},{key:"isCycling",value:function(){return this.pointer!==this.buffer.length-1}},{key:"add",
value:function(a){var d=this.buffer;d.push(a);this.size&&d.length>this.size&&d.splice(0,d.length-this.size);this.pointer=this.buffer.length-1;return a}},{key:"yank",value:function(){return this.buffer[this.pointer]||""}},{key:"back",value:function(){this.pointer=(0>=this.pointer?this.buffer.length:this.pointer)-1;return this.yank()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"KillRing"}}],c,{pathInPackage:function(){return"./events/KillRing.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:50,end:628})}(void 0);hT["default"]=iT;var Ej=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/Keys.js");Ej.canonicalizeFunctionKey=function(b){b&&(b=b.toLowerCase());switch(b){case "space":b="space";break;case "esc":b="escape";break;case "return":b="enter";break;case "arrowleft":b="left";break;case "arrowright":b="right";break;case "arrowup":b=
"up";break;case "arrowdown":b="down"}return Ej.FUNCTION_KEYS.includes(b)?Ej.string.capitalize(b):""};Ej.computeHashIdOfEvent=function(b){var c=b.key;b=0|(b.ctrlKey?1:0)|(b.altKey?2:0)|(b.shiftKey?4:0)|(b.metaKey?8:0);0===b&&!Ej.canonicalizeFunctionKey(c)&&c&&Ej.letterRe.test(c)&&(b=-1);return b};Ej.isModifier=function(b){if(Ej.isNumber(b))return!1;b=b.replace(/-$/,"").toLowerCase();return Ej.arr.withoutAll(Object.keys(Ej.KEY_MODS),["","input-"]).includes(b)};Ej.decodeKeyIdentifier=function(b,c){var g=
/u\+?([\d\w]{4})/gi,a=function(d,f){return String.fromCharCode(parseInt(f,16))};b=b&&b.replace(g,a);if("Command"===b||"Cmd"===b)b="Meta";" "===b&&(b="Space");8===c&&(b="Backspace");return b};Ej.identifyKeyFromCode=function(b){b=b.code;if("string"!==typeof b)return null;if(b.startsWith("Key"))return b.slice(3);if(b.startsWith("Numpad"))return b;if(b.startsWith("Digit")||b.startsWith("Arrow"))return b.slice(5);if(b.match(/^F[0-9]{1-2}$/))return b;switch(b){case "Insert":case "Home":case "PageUp":case "PageDown":return b;
case "Period":return".";case "Comma":return",";case "Help":return"Insert";case "Equal":return"=";case "Backslash":case "IntlBackslash":return"\\";case "Equal":return"=";case "Minus":return"-";case "BracketRight":return"]";case "BracketLeft":return"[";case "Quote":return"'";case "Backquote":return"`";case "Semicolon":return";"}return null};Ej.dedasherize=function(b){for(var c=[];;){var g=b.indexOf("-");if(-1===g)return b&&c.push(b),c;0===g?(c.push(b[0]),b=b.slice(2)):(c.push(b.slice(0,g)),b=b.slice(g+
1))}};Ej.arr=aj;Ej.string=Xj;Ej.letterRe=/[a-z]/i;Ej.FUNCTION_KEYS="backspace;tab;enter;pause;escape; ;pageup;pagedown;end;home;left;up;right;down;print;insert;delete;numpad0;numpad1;numpad2;numpad3;numpad4;numpad5;numpad6;numpad7;numpad8;numpad9;numpadenter;f1;f2;f3;f4;f5;f6;f7;f8;f9;f10;f11;f12;numlock;scrolllock".split(";");Ej.MODIFIER_KEYS={16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"};Ej.KEY_MODS=function(){for(var b={control:1,ctrl:1,alt:2,option:2,shift:4,"super":8,win:8,meta:8,command:8,cmd:8},
c=["alt","ctrl","meta","shift"],g=function(d){b[d]=c.filter(function(f){return d&b[f]}).join("-")+"-"},a=Math.pow(2,c.length);a--;)g(a);b[0]="";b[-1]="input-";return b}();Ej.isNumber=function(){var b=/^[0-9]+$/;return function(c){return b.test(c)}}();Ej.Keys={computeHashIdOfEvent:Ej.computeHashIdOfEvent,keyComboToEventSpec:function(b,c){c=Object.assign({_isLivelyKeyEventSpec:!0,keyCombo:"",key:"",ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,isFunctionKey:!1,isModified:!1,onlyModifiers:!1},
c);var g=Ej.dedasherize(b),a={shift:"shiftKey",control:"ctrlKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",command:"metaKey",cmd:"metaKey"};if("input"===g[0]&&2===g.length)return c.keyCombo=b,c.key=g[1],c;for(var d=g.length-1;0<=d;d--){var f=a[g[d].toLowerCase()];f&&(g.splice(d,1),c.isModified=!0,c[f]=!0)}if(!g.length)return c.keyCombo=Ej.Keys.eventToKeyCombo(c),c.key=Ej.arr.last(Ej.dedasherize(c.keyCombo)),c.onlyModifiers=!0,c;1<g.length&&console.warn('Strange key "'.concat(b,'" encountered in keyComboToEventSpec, parsing probably failed'));
b=Ej.arr.last(g);(g=Ej.canonicalizeFunctionKey(b))?(c.isFunctionKey=!0,c.key=g):c.key=c.isModified?Ej.string.capitalize(b):b;c.keyCombo=Ej.Keys.eventToKeyCombo(c);return c},eventToKeyCombo:function(b,c){c=b.key;var g=b.data,a=b.keyIdentifier;if("string"===typeof g)return"input-"+g;if(!c&&a&&(c=Ej.decodeKeyIdentifier(a,b.which||b.keyCode),b.key=c=c[b.shiftKey?"toUpperCase":"toLowerCase"](),Ej.isModifier(c)))return Ej.string.capitalize(c);g=Ej.KEY_MODS[Ej.computeHashIdOfEvent(b)];if("input-"===g)return g+
c;b.code&&(c=Ej.identifyKeyFromCode(b)||c);b=!c||Ej.isModifier(c)?g.replace(/-$/,""):g+c;b.match(/\s$/)&&(b=b.replace(/\s$/,"Space"));return b.replace(/(^|-)([a-z])/g,function(d,f,k){return f+k.toUpperCase()})},canonicalizeKeyCombo:function(b){return Ej.Keys.eventToKeyCombo(Ej.Keys.keyComboToEventSpec(b))},canonicalizeEvent:function(b){return b._isLivelyKeyEventSpec?b:Ej.Keys.keyComboToEventSpec(Ej.Keys.eventToKeyCombo(b))}};var uH=Ej.Keys;Ej["default"]=uH;var ak=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js");
ak.bowser=pt;ak.obj=bj;ak.pt=wl;ak.Keys=uH;ak.cumulativeOffset=tw;var jT="pointerover pointerenter pointerout pointerleave pointerdown pointermove pointerup pointercancel gotpointercapture lostpointercapture".split(" ");ak.pointerEvents=jT;ak.pointerEvents=jT;var kT="mouseover mouseenter mousedown mousemove mouseup mouseout mouseleave click dblclick contextmenu mousewheel".split(" ");ak.mouseEvents=kT;ak.mouseEvents=kT;var lT=["keydown","keyup","keypress"];ak.keyboardEvents=lT;ak.keyboardEvents=lT;
var vH=ak.keyboardEvents.concat("input","compositionstart","compositionupdate","compositionend");ak.keyLikeEvents=vH;ak.keyLikeEvents=vH;var wH=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),g=c.hasOwnProperty("Event")&&"function"===typeof c.Event?c.Event:c.Event=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),
value:function(a,d,f,k,n,p,q){this.type=a;this.domEvt=d;this.dispatcher=f;this.targetMorphs=k;this.hand=n;this.halo=p;this.layoutHalo=q;this.stopped=!1;this._keyCombo=void 0;this.onDispatchCallbacks=[];this.onAfterDispatchCallbacks=[];this.onStopCallbacks=[]}},{key:"onDispatch",value:function(a){this.onDispatchCallbacks.push(a);return this}},{key:"onAfterDispatch",value:function(a){this.onAfterDispatchCallbacks.push(a);return this}},{key:"onStop",value:function(a){this.onStopCallbacks.push(a);return this}},
{key:"data",get:function(){return this.domEvt.data}},{key:"world",get:function(){return this.dispatcher.world}},{key:"state",get:function(){return this.dispatcher.eventState}},{key:"keyInputState",get:function(){return this.state.keyInputState}},{key:"isMouseEvent",value:function(){return ak.pointerEvents.includes(this.type)||ak.mouseEvents.includes(this.type)}},{key:"isKeyboardEvent",value:function(){return!this.isMouseEvent()&&ak.keyboardEvents.includes(this.type)}},{key:"stop",value:function(){this.stopped=
!0;this.domEvt&&"function"===typeof this.domEvt.stopPropagation&&this.domEvt.stopPropagation();this.domEvt&&"function"===typeof this.domEvt.preventDefault&&this.domEvt.preventDefault();this.onStopCallbacks.forEach(function(a){return a()})}},{key:"targetMorph",get:function(){return this.targetMorphs[0]}},{key:"timestamp",get:function(){return this.domEvt.timeStamp}},{key:"position",get:function(){if(!this.domEvt)return ak.pt(0,0);for(var a=this.domEvt.composedPath()[0];a&&a.id!==this.world.id;)a=a.parentNode;
if(!a){a=this.domEvt.composedPath()[0]||this.domEvt.target;var d=this.world.env.domEnv.document;a=(a.nodeType===a.DOCUMENT_NODE?a:d).getElementById(this.world.id)}if(!a)return console.error("event position: cannot find world node for determining the position!"),ak.pt(0,0);a=ak.cumulativeOffset(a);d=this.domEvt;a=ak.pt((d.pageX||0)-a.left,(d.pageY||0)-a.top);1!==this.world.scale&&(a=a.scaleBy(1/this.world.scale));return a}},{key:"startPosition",get:function(){return this.state.clickedOnPosition}},
{key:"pressure",get:function(){return this.domEvt?this.domEvt.pressure:.5}},{key:"positionIn",value:function(a){return a.localize(this.position)}},{key:"isClickTarget",value:function(a){var d=this.state.clickedOnMorph;return d&&(a===d||a.isAncestorOf(d))}},{key:"leftMouseButtonPressed",value:function(){return this.domEvt?1===this.domEvt.buttons:!1}},{key:"rightMouseButtonPressed",value:function(){return this.domEvt?2===this.domEvt.buttons:!1}},{key:"middleMouseButtonPressed",value:function(){return this.domEvt?
4===this.domEvt.buttons:!1}},{key:"isCommandKey",value:function(){var a=this.domEvt;if(!a)return!1;var d=!1;ak.bowser.mac||(d=d||a.ctrlKey);if(ak.bowser.tablet||ak.bowser.tablet)d=d||!1;return d||a.metaKey||"Meta"===a.keyIdentifier}},{key:"isShiftDown",value:function(){return this.domEvt&&!!this.domEvt.shiftKey}},{key:"isCtrlDown",value:function(){return this.domEvt&&!!this.domEvt.ctrlKey}},{key:"isAltDown",value:function(){return this.domEvt&&!!this.domEvt.altKey}},{key:"keyCombo",get:function(){return this._keyCombo||
(this._keyCombo=ak.Keys.eventToKeyCombo(this.domEvt))}},{key:"keyCombo",set:function(a){return this._keyCombo=a}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Event"}}],c,{pathInPackage:function(){return"./events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:907,end:5030})}(void 0);ak.Event=wH;ak.Event=
wH;var xH=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),g=c.hasOwnProperty("KeyEvent")&&"function"===typeof c.KeyEvent?c.KeyEvent:c.KeyEvent=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d,f,k,n,p,q){console.assert(ak.keyLikeEvents.includes(a),"not a keyboard event: "+a);Ve._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,a,d,f,k,n,p,q);Object.assign(this,ak.Keys.canonicalizeEvent(d))}},{key:"isKeyEvent",get:function(){return!0}},{key:"hasArrowPressed",get:function(){var a=this.domEvt.keyCode;return 37<=a||40>=a?!0:!1}},{key:"hasCharacterPressed",get:function(){var a=this.domEvt.keyCode;return 48<=a&&57>=a||65<=a&&90>=a||97<=a&&122>=a?!0:!1}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"KeyEvent"}}],c,{pathInPackage:function(){return"./events/Event.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5038,end:5982})}(ak.Event);ak.KeyEvent=xH;ak.KeyEvent=xH;var yH=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),g=c.hasOwnProperty("SimulatedDOMEvent")&&"function"===typeof c.SimulatedDOMEvent?c.SimulatedDOMEvent:c.SimulatedDOMEvent=function(a){if(!a||
!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(a.position){var d=a.position,f=d.x;d=d.y;a=ak.obj.dissoc(a,["position"]);a.pageX=f;a.pageY=d}!a.hasOwnProperty("pointerId")&&ak.mouseEvents.concat(ak.pointerEvents).includes(a.type)&&(a=Object.assign({},a,{pointerId:1}));Object.assign(this,
Object.assign({type:void 0,target:void 0,pageX:void 0,pageY:void 0,pointerId:void 0,pointerType:"mouse",buttons:0,keyCode:void 0,keyString:"",keyIdentifier:void 0,altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,stopped:!1},a))}},{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"composedPath",value:function(){return[this.target]}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"SimulatedDOMEvent"}}],
c,{pathInPackage:function(){return"./events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5990,end:7010})}(void 0);ak.SimulatedDOMEvent=yH;ak.SimulatedDOMEvent=yH;var Bh=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js");Bh.dragStartEvent=function(b,c,g,a,d,f,k){var n=(new Bh.Event("morphicdragstart",
b,c,[g],d,f,k)).onDispatch(function(){a.draggedMorph=g;a.dragStartMorphPosition=g.position;a.dragStartPosition=n.position;a.lastDragPosition=n.position;a.dragDelta=Bh.pt(0,0);a.absDragDelta=Bh.pt(0,0)}).onStop(function(){a.draggedMorph=null;c.schedule(Bh.dragEndEvent(b,c,g,a,d,f,k))});return n};Bh.dragEvent=function(b,c,g,a,d,f,k){var n=(new Bh.Event("morphicdrag",b,c,[a.draggedMorph],d,f,k)).onDispatch(function(){a.dragDelta=(a.draggedMorph.owner||c.world).getInverseTransform().transformDirection(n.position.subPt(a.lastDragPosition));
a.absDragDelta=n.position.subPt(a.clickedOnPosition)}).onAfterDispatch(function(){return a.lastDragPosition=n.position}).onStop(function(){a.draggedMorph=null;c.schedule(Bh.dragEndEvent(b,c,g,a,d,f,k))});return n};Bh.dragEndEvent=function(b,c,g,a,d,f,k){var n=a.draggedMorph||g,p=(new Bh.Event("morphicdragend",b,c,[n],d,f,k)).onDispatch(function(){a.dragDelta=(n.owner||c.world).getInverseTransform().transformDirection(p.position.subPt(a.lastDragPosition));a.absDragDelta=p.position.subPt(a.clickedOnPosition)}).onAfterDispatch(function(){a.draggedMorph=
null;a.lastDragPosition=null;a.dragDelta=Bh.pt(0,0);a.absDragDelta=Bh.pt(0,0);a.dragStartMorphPosition=null;a.dragStartPosition=null});return p};Bh.focusEvents=function(b,c){var g=b.eventState;if(g.focusedMorph===c)return[];b=[];g.focusedMorph&&b.push((new Bh.Event("blur",null,this,[g.focusedMorph],null,null,null)).onDispatch(function(){return g.focusedMorph=null}));b.push((new Bh.Event("focus",null,this,[c],null,null,null)).onDispatch(function(){return g.focusedMorph=c}));return b};Bh.arr=aj;Bh.fun=
cp;Bh.Path=qj;Bh.promise=yj;Bh.pt=wl;Bh.config=Jm;Bh.TextInput=gT;Bh.KillRing=iT;Bh.Event=wH;Bh.KeyEvent=xH;Bh.SimulatedDOMEvent=yH;Bh.keyLikeEvents=vH;Bh.cumulativeOffset=tw;Bh.bowser=pt;Bh.touchInputDevice=bq;Bh.domEventsWeListenTo=[{type:"pointerdown",capturing:!1},{type:"pointerup",capturing:!1},{type:"pointermove",capturing:!1,passive:!1},{type:"pointerover",capturing:!1,passive:!1},{type:"pointerout",capturing:!1,passive:!1},{type:"contextmenu",capturing:!1},{type:"wheel",capturing:!1,passive:!1},
{type:"scroll",capturing:!0,passive:!1},{type:"drag",capturing:!1},{type:"dragstart",capturing:!1},{type:"dragend",capturing:!1},{type:"dragover",capturing:!1},{type:"dragenter",capturing:!1},{type:"dragleave",capturing:!1},{type:"drop",capturing:!1}];Bh.eventsCausingImmediateRender=new Set(["pointerdown","pointerup","keydown","keyup","input"]);Bh.globalDomEventsWeListenTo=[{type:"resize",capturing:!1,morphMethod:"onWindowResize"},{type:"orientationchange",capturing:!1,morphMethod:"onWindowResize"},
{type:"scroll",capturing:!1,passive:!1,morphMethod:"onWindowScroll"},{type:"wheel",capturing:!1,passive:!1,morphToMethod:"onMouseWheel"},{type:"beforeunload",capturing:!1,passive:!1,morphMethod:"onBeforeUnload"}];Bh.typeToMethodMap={pointerdown:"onMouseDown",pointerup:"onMouseUp",pointermove:"onMouseMove",longclick:"onLongClick",hoverin:"onHoverIn",hoverout:"onHoverOut",morphicdrag:"onDrag",morphicdragstart:"onDragStart",morphicdragend:"onDragEnd",grab:"onGrab",morphicdrop:"onDrop",morphicdrophoverin:"onDropHoverIn",
morphicdrophoverout:"onDropHoverOut",morphicdrophoverupdate:"onDropHoverUpdate",keydown:"onKeyDown",keyup:"onKeyUp",input:"onTextInput",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd",blur:"onBlur",focus:"onFocus",contextmenu:"onContextMenu",cut:"onCut",copy:"onCopy",paste:"onPaste",scroll:"onScroll",wheel:"onMouseWheel",drag:"onNativeDrag",dragstart:"onNativeDragstart",dragend:"onNativeDragend",dragover:"onNativeDragover",dragenter:"onNativeDragenter",
dragleave:"onNativeDragleave",drop:"onNativeDrop"};Bh.focusTargetingEvents="keydown keyup keypress input compositionstart compositionupdate compositionend cut copy paste".split(" ");Bh.textOnlyEvents=["input","compositionstart","compositionupdate","compositionend"];var mT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js"),g=c.hasOwnProperty("EventDispatcher")&&"function"===typeof c.EventDispatcher?c.EventDispatcher:c.EventDispatcher=function(a){if(!a||
!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d){this.activations=0;this.emitter=a;this.keyInputHelper=null;this.world=d;this.installed=!1;this.handlerFunctions=[];this.killRing=new Bh.KillRing(Bh.config.text.clipboardBufferLength);this.nodeMorphMap=new WeakMap;this.timestampBase=Bh.Path("performance.timing.navigationStart").get(a)||0;this.resetState()}},
{key:"resetState",value:function(){this.eventState={timeOfLastActivity:0,focusedMorph:null,clickedOnPosition:null,clickedOnMorph:null,clickCount:0,prevClick:{},draggedMorph:null,dragDelta:null,absDragDelta:null,lastDragPosition:null,dragStartMorphPosition:null,dragStartPosition:null,hover:{hoveredOverMorphs:[],unresolvedPointerOut:!1},scroll:{interactiveScrollInProgress:null},keyInputState:null,pressedKeys:{},html5Drag:{},dropHoverTarget:null};this.resetKeyInputState()}},{key:"resetKeyInputState",
value:function(){this.eventState.keyInputState={keyChain:"",count:void 0}}},{key:"focusMorph",value:function(a){var d=this;this.keyInputHelper&&this.keyInputHelper.focus(a,this.world);Bh.focusEvents(this,a).forEach(function(f){return d.dispatchEvent(f)})}},{key:"isMorphFocused",value:function(a){return this.eventState.focusedMorph===a}},{key:"isMorphHovered",value:function(a){return this.eventState.hover.hoveredOverMorphs.includes(a)}},{key:"isMorphClicked",value:function(a){return this.eventState.clickedMorph==
a}},{key:"isKeyPressed",value:function(a){return Object.keys(this.eventState.pressedKeys).map(function(d){return d.toLowerCase()}).includes(a.toLowerCase())}},{key:"whenIdle",value:function(){var a=this;return Bh.promise.waitFor(function(){return 0===a.activations})}},{key:"install",value:function(a){var d=this;if(this.installed)return this;this.installed=!0;var f=this.emitter,k=System.global;Bh.domEventsWeListenTo.forEach(function(n){var p=n.type,q=n.capturing;n=n.passive;var r=function(u){return d.dispatchDOMEvent(u)};
d.handlerFunctions.push({node:f,type:p,fn:r,capturing:q});f.addEventListener(p,r,{capture:q,passive:n})});k.addEventListener&&Bh.globalDomEventsWeListenTo.forEach(function(n){var p=n.type,q=n.capturing,r=n.morphMethod;n=n.passive;var u=function(x){return d.dispatchDOMEvent(x,d.world,r)};d.handlerFunctions.push({node:k,type:p,fn:u,capturing:q});k.addEventListener(p,u,{capture:q,passive:n})});this.keyInputHelper=(new Bh.TextInput(this)).install(a,this.world);Bh.bowser.ios&&a.setAttribute("touch-action",
"auto");return this}},{key:"uninstallHandler",value:function(a){var d=this.handlerFuntions.find(function(f){return f.type==a});d&&d.node.removeEventListener(d.node,d.fn,d.capturing)}},{key:"uninstall",value:function(){this.installed=!1;var a=this.handlerFunctions;a.forEach(function(d){d.node.removeEventListener(d.type,d.fn,d.capturing)});a.length=0;this.keyInputHelper&&this.keyInputHelper.uninstall();this.keyInputHelper=null;return this}},{key:"processDOMEvent",value:function(a,d){var f=this,k=a.type,
n=this.eventState,p=[d].concat(d.ownerChain()),q="touch"===a.pointerType,r=a.pointerId,u=a.composedPath()[0],x="number"===typeof r&&(Bh.touchInputDevice||a.isPrimary),y=x?this.world.handForPointerId(r,a.isPrimary):this.world.firstHand,D=x&&!q?this.world.haloForPointerId(r):null,H=x&&!q?this.world.layoutHaloForPointerId(r):null,I=new (Bh.keyLikeEvents.includes(k)?Bh.KeyEvent:Bh.Event)(k,a,this,p,y,D,H),N=[I];x=[];switch(k){case "keydown":n.pressedKeys[I.key]=!0;break;case "keyup":"Meta"===I.key?n.pressedKeys=
{}:delete n.pressedKeys[I.key];break;case "click":N=this.processDOMEvent(new Bh.SimulatedDOMEvent(Object.assign({},a,{type:"pointerdown"})),d).events;k=this.processDOMEvent(new Bh.SimulatedDOMEvent(Object.assign({},a,{type:"pointerup"})),d).events;N=N.concat(k);break;case "pointerdown":I.onDispatch(function(){f.focusMorph(d);n.clickedOnMorph=d;n.clickedOnPosition=I.position;n.downTimeStamp=a.timeStamp;var J=!1,sa=0;if(n.prevClick){sa=n.prevClick;J=sa.clickedOnMorph;sa.clickedOnPosition;var ja=sa.clickedAtTime;
sa=sa.clickCount;ja=Date.now()-ja;J=J===d&&ja<Bh.config.repeatClickInterval}n.clickCount=J?sa+1:1});break;case "pointerup":I.onAfterDispatch(function(){var J=n.clickedOnMorph,sa=n.clickedOnPosition,ja=n.clickCount,Ha=Date.now();n.prevClick={clickedOnMorph:J,clickedOnPosition:sa,clickedAtTime:Ha,clickCount:ja};n.clickedOnMorph=null;n.clickCount=0;J=a.timeStamp-n.downTimeStamp;sa=n.clickedOnPosition.dist(I.position);ja=Bh.config.longClick;Ha=ja.minDur;var Qa=ja.maxDur;sa<ja.maxDist&&J>=Ha&&J<=Qa&&(J=
new Bh.Event("longclick",a,f,p,y,D,H),f.schedule(J))});n.draggedMorph&&(N.push(Bh.dragEndEvent(a,this,d,n,y,D,H)),I.targetMorphs=Bh.arr.uniq([n.draggedMorph].concat(db(I.targetMorphs),[this.world])));y.carriesMorphs()&&(n.dropHoverTarget?(N.push(new Bh.Event("morphicdrophoverout",a,this,[n.dropHoverTarget],y,D,H)),d=n.dropHoverTarget,n.dropHoverTarget=null):d=y.findDropTarget(I.position,y.grabbedMorphs),y.isAncestorOf(d)&&(d=this.world),N.push(new Bh.Event("morphicdrop",a,this,[d],y,D,H)),I.targetMorphs=
[this.world]);break;case "pointermove":y.carriesMorphs()?(I.targetMorphs=[this.world],k=y.findDropTarget(I.position,y.grabbedMorphs)||this.world,n.dropHoverTarget===k?N.push(new Bh.Event("morphicdrophoverupdate",a,this,[k],y,D,H)):(n.dropHoverTarget&&N.push(new Bh.Event("morphicdrophoverout",a,this,[n.dropHoverTarget],y,D,H)),n.dropHoverTarget=k,N.push(new Bh.Event("morphicdrophoverin",a,this,[k],y,D,H)))):n.draggedMorph?(I.targetMorphs=[this.world],N.push(Bh.dragEvent(a,this,d,n,y,D,H))):n.clickedOnMorph&&
n.clickedOnPosition&&n.clickedOnMorph.draggable&&!n.draggedMorph&&!y.carriesMorphs()&&(k=n.clickedOnPosition.dist(I.position),q=n.clickedOnMorph,k>q.dragTriggerDistance&&(q.grabbable?N.push(new Bh.Event("grab",a,this,[q],y,D,H)):q.draggable&&N.push(Bh.dragStartEvent(a,this,q,n,y,D,H)),I.targetMorphs=[this.world]));break;case "pointerover":n.hover.unresolvedPointerOut&&(n.hover.unresolvedPointerOut=!1);k=[d].concat(d.ownerChain()).reverse();N=Bh.arr.withoutAll(n.hover.hoveredOverMorphs,k).map(function(J){return(new Bh.Event("hoverout",
a,f,[J],y,D,H)).onDispatch(function(){return Bh.arr.remove(n.hover.hoveredOverMorphs,J)})});k=Bh.arr.withoutAll(k,n.hover.hoveredOverMorphs).map(function(J){return(new Bh.Event("hoverin",a,f,[J],y,D,H)).onDispatch(function(){return Bh.arr.pushIfNotIncluded(n.hover.hoveredOverMorphs,J)})});N=N.concat(k);break;case "pointerout":N=[];n.hover.unresolvedPointerOut=!0;x.push(function(){if(n.hover.unresolvedPointerOut)return Promise.all(n.hover.hoveredOverMorphs.map(function(J){return f.schedule((new Bh.Event("hoverout",
a,f,[J],y,D,H)).onAfterDispatch(function(){return Bh.arr.remove(n.hover.hoveredOverMorphs,J)}))}))});q&&this.world.removeHandForPointerId(r);break;case "blur":N=[(new Bh.Event(k,a,this,[d],y,D,H)).onDispatch(function(){return n.focusedMorph=null})];break;case "focus":N=Bh.focusEvents(this,d);break;case "scroll":N=[(new Bh.Event(k,a,this,[d],y,D,H)).onDispatch(function(){if(!n.scroll.interactiveScrollInProgress){var J=Bh.promise.deferred(),sa=J.promise,ja=J.resolve;J="Firefox"==Bh.bowser.name?500:
250;"Safari"==Bh.bowser.name&&(J=1E3);n.scroll.interactiveScrollInProgress=sa;sa.debounce=Bh.fun.debounce(J,function(){n.scroll.interactiveScrollInProgress=null;ja()})}n.scroll.interactiveScrollInProgress.debounce();sa=u.documentElement||u;J=sa.scrollLeft;var Ha=sa.scrollTop,Qa=d.scroll,ec=Qa.x;Qa=Qa.y;if("hidden"!=sa.style.overflow&&ec!==J||Qa!==Ha)d.scroll=Bh.pt(J,Ha)})];break;case "input":case "compositionstart":case "compositionupdate":case "compositionend":d.isText?I.targetMorphs=[d]:N=[];break;
case "drag":case "dragstart":case "dragend":case "dragover":case "dragenter":case "dragleave":case "drop":"drop"!==k&&"dragover"!==k||a.preventDefault()}return{events:N,later:x}}},{key:"schedule",value:function(a){var d=this;this.activations++;return Promise.resolve().then(function(){return d.dispatchEvent(a)}).then(function(){return d.activations--},function(f){d.activations--;throw f;})}},{key:"dispatchEvent",value:function(a,d){d=d||Bh.typeToMethodMap[a.type];if(!d)throw Error("dispatchEvent: ".concat(a.type,
" not yet supported!"));a.onDispatchCallbacks.forEach(function(n){return n()});this.activations++;for(var f,k=a.targetMorphs.length-1;0<=k;k--){try{a.targetMorphs[k][d](a)}catch(n){f=Error("Error in event handler ".concat(a.targetMorphs[k],".").concat(d,": ").concat(n.stack||n)),f.originalError=n,"undefined"!==typeof this.world?this.world.logError(f):console.error(f)}if(f||a.stopped)break}this.activations--;a.onAfterDispatchCallbacks.forEach(function(n){return n()});if(f)throw f;}},{key:"dispatchDOMEvent",
value:function(a,d,f){var k=this,n=this.world,p=this.eventState,q=this.nodeMorphMap,r=a.type;p.timeOfLastActivity=this.timestampBase+a.timeStamp;if(!d&&Bh.focusTargetingEvents.includes(r))d=p.focusedMorph||n;else if(!d){for(p=a.composedPath()[0];;){d=p.className||"";"string"!==typeof d&&"baseVal"in d&&(d=d.baseVal);if(d&&d.includes("Morph"))break;if(!(p=p.parentNode))return}d=q.get(p);if(!d){var u=p.id;(d=n.withAllSubmorphsDetect(function(x){return x.id===u}))&&q.set(p,d)}}d&&(a=this.processDOMEvent(a,
d),q=a.events,a.later.map(function(x){k.activations++;return Bh.promise.delay(0).then(x).then(function(){return k.activations--},function(y){k.activations--;throw y;})}),q.forEach(function(x){return k.dispatchEvent(x,f)}),n&&n.needsRerender()&&Bh.eventsCausingImmediateRender.has(r)&&n.env.renderer.renderLater())}},{key:"simulateDOMEvents",value:function(){for(var a=this.emitter.document||this.emitter.ownerDocument,d=[],f=arguments.length,k=Array(f),n=0;n<f;n++)k[n]=arguments[n];for(f=0;f<k.length;f++){var p=
n=k[f],q=p.target,r=p.position;p=p.type;if(Bh.focusTargetingEvents.includes(p)){if(!this.keyInputHelper.domState.textareaNode)throw Error("Cannot simulate event of type ".concat(p,", no keyInputHelper installed!"));n=Object.assign({},n,{target:this.keyInputHelper.textareaNode})}q||(q=r?this.world.morphsContainingPoint(r)[0]:this.world);q.isMorph&&(n=Object.assign({},n,{target:a.getElementById(q.id)}));n.position&&(q=Bh.cumulativeOffset(a.getElementById(this.world.id)),n.position=n.position.addXY(q.left,
q.top));"scroll"===p&&("scrollLeft"in n||"scrollTop"in n)&&(n.target.scrollLeft=n.scrollLeft||0,n.target.scrollTop=n.scrollTop||0);n=new Bh.SimulatedDOMEvent(n);d.push(n);this.dispatchDOMEvent(n)}return d}},{key:"doCopy",value:function(a){return this.keyInputHelper.doCopy(a)}},{key:"doCopyWithMimeTypes",value:function(a){return this.keyInputHelper.doCopyWithMimeTypes(a)}},{key:"doPaste",value:function(){return this.keyInputHelper.doPaste()}},{key:"cancelGrab",value:function(a,d){var f=this,k=[],n=
this.eventState;n.clickedOnMorph=null;n.dropHoverTarget&&(k.push(new Bh.Event("morphicdrophoverout",d.domEvt,this,[n.dropHoverTarget],a,null,null)),n.dropHoverTarget=null);k.forEach(function(p){return f.dispatchEvent(p)})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"EventDispatcher"}}],c,{pathInPackage:function(){return"./events/EventDispatcher.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7012,end:30503})}(void 0);Bh["default"]=mT;var zl=window.lively.FreezerRuntime.recorderFor("lively.morphic/env.js");zl.defaultDOMEnv=CC;zl.Renderer=sH;zl.FontMetric=cT;zl.ChangeManager=tH;zl.UndoManager=XA;zl.EventDispatcher=mT;zl.subscribe=kr;zl.unsubscribe=os;zl.clearStylePropertiesForClassesIn=MC;var Yp=bd("bd",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/env.js"),g=c.hasOwnProperty("MorphicEnv")&&
"function"===typeof c.MorphicEnv?c.MorphicEnv:c.MorphicEnv=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:zl.defaultDOMEnv();this.initialized=!1;this.synchronizer=this.objPool=this.systemChangeHandlers=this.world=this.eventDispatcher=this.renderer=this.fontMetric=
null;this.changeManager=new zl.ChangeManager;this.undoManager=new zl.UndoManager;this.installSystemChangeHandlers();this.whenRenderedRequesters=new Map;this.whenRenderedTickingProcess=null;"function"===typeof d.then?this._waitForDOMEnv=d.then(function(f){a._waitForDOMEnv=null;a.initWithDOMEnv(f);a.initialized=!0})["catch"](function(f){return console.error("Error initializing MorphicEnv with dom env: ".concat(f.stack))}):(this.initWithDOMEnv(d),this.initialized=!0)}},{key:"isDefault",value:function(){return this.constructor["default"]()===
this}},{key:"initWithDOMEnv",value:function(a){this.domEnv=a;this.fontMetric=zl.FontMetric.forDOMEnv(a)}},{key:"uninstallWorldRelated",value:function(){this.renderer&&this.renderer.clear();this.eventDispatcher&&this.eventDispatcher.uninstall();this.world&&this.world.suspendSteppingAll()}},{key:"uninstall",value:function(){var a=this;if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return a.uninstall()});this.deleteHistory();this.uninstallWorldRelated();this.fontMetric&&(this.fontMetric.uninstall(),
this.fontMetric=null);this.domEnv&&this.whenRenderedTickingProcess&&(this.domEnv.window.cancelAnimationFrame(this.whenRenderedTickingProcess),this.whenRenderedTickingProcess=null);this.whenRenderedRequesters=new Map;this.domEnv&&this.domEnv.destroy();this.initialized=!1;return Promise.resolve()}},{key:"setWorld",value:function(a){var d=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.renderer?this.renderer.rootNode:this.domEnv.document.body;return this._waitForDOMEnv?this._waitForDOMEnv.then(function(){return d.setWorld(a)}):
this.setWorldRenderedOn(a,f)}},{key:"setWorldRenderedOn",value:function(a,d){var f=this,k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!a||!a.isWorld)throw Error("world object does not look like a morphic world");if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return f.setWorldRenderedOn(a,d,k)});this.deleteHistory();this.uninstallWorldRelated();this.world=a;this.renderer=new zl.Renderer(a,d,this.domEnv);this.renderer.domNode=k;this.eventDispatcher=(new zl.EventDispatcher(a.isEmbedded?
d:this.domEnv.window,a)).install(d);a.resumeSteppingAll();this.isDefault()&&(this.domEnv.window.$world=a);a.stealFocus||a.focus();a.makeDirty();this.renderer.renderLater();return a.whenRendered().then(function(){return f})}},{key:"installSystemChangeHandlers",value:function(){var a=this;if(!this.systemChangeHandlers){var d=this.systemChangeHandlers={};d["lively.modules/moduleloaded"]=[zl.subscribe("lively.modules/moduleloaded",function(f){return a.getTargetsFor("onModuleLoaded").forEach(function(k){return k.onModuleLoaded(f)})})];
d["lively.modules/modulechanged"]=[zl.subscribe("lively.modules/modulechanged",function(f){zl.clearStylePropertiesForClassesIn(f.module);a.getTargetsFor("onModuleChanged").forEach(function(k){return k.onModuleChanged(f)})})];d["lively.partsbin/partpublished"]=[zl.subscribe("lively.partsbin/partpublished",function(f){return a.getTargetsFor("onPartPublished").forEach(function(k){return k.onPartPublished(f)})})];d["lively.user/userchanged"]=[zl.subscribe("lively.user/userchanged",function(f){return a.getTargetsFor("onUserChanged").forEach(function(k){return k.onUserChanged(f)})})]}}},
{key:"uninstallSystemChangeHandlers",value:function(){var a=this.systemChangeHandlers;a&&(this.systemChangeHandlers=null,Object.keys(a).forEach(function(d){return a[d].forEach(function(f){return zl.unsubscribe(d,f)})}))}},{key:"getTargetsFor",value:function(a){var d=this.world,f=[];if(!d||!d.submorphs)return f;"function"===typeof d[a]&&f.push(d);d=fa(d.submorphs);var k;try{for(d.s();!(k=d.n()).done;){var n=k.value;"function"===typeof n[a]&&f.push(n);n.isWindow&&n.targetMorph&&"function"===typeof n.targetMorph[a]&&
f.push(n.targetMorph)}}catch(p){d.e(p)}finally{d.f()}return f}},{key:"cleanupCaches",value:function(){this.world.withAllSubmorphsDo(function(a){return a._pathDependants=a._pathDependants.filter(function(d){return d.world()})})}},{key:"deleteHistory",value:function(){var a=this.changeManager,d=this.world,f=this.fontMetric;a&&(a.changes.length=0);d&&d.withAllSubmorphsDo(function(k){return k.undoManager&&k.undoManager.reset()});f&&f.reset()}},{key:"printStatus",value:function(){var a=this.changeManager,
d=this.world,f=0,k=0;d&&d.withAllSubmorphsDo(function(n){n.undoManager&&(f++,k+=n.undoManager.undos.length+n.undoManager.redos.length)});return"".concat(a.changes.length," changes recorded\n").concat(f," morphs with undos\n").concat(k," undo changes")}},{key:"updateWhenRenderedRequests",value:function(){var a=this,d=this.whenRenderedRequesters,f=0,k=fa(d),n;try{for(k.s();!(n=k.n()).done;){var p=Wb(n.value,2),q=p[0],r=p[1],u=r.maxAttempts,x=r.resolve,y=r.reject;q._dirty||q._rendering?++r.currentAttempt>
u?(d["delete"](q),y(Error("Failed to wait for whenRendered of ".concat(q," (tried ").concat(u,"x)")))):f++:(d["delete"](q),x(q))}}catch(D){k.e(D)}finally{k.f()}this.whenRenderedTickingProcess=f?this.domEnv.window.requestAnimationFrame(function(){return a.updateWhenRenderedRequests()}):null}},{key:"whenRendered",value:function(a){var d=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:50,k=this.whenRenderedRequesters,n=this.whenRenderedTickingProcess,p=k.get(a);if(!p){var q,r;p=new Promise(function(u,
x){q=u;r=x});k.set(a,p={maxAttempts:f,currentAttempt:0,resolve:q,reject:r,promise:p})}n||(this.whenRenderedTickingProcess=this.domEnv.window.requestAnimationFrame(function(){return d.updateWhenRenderedRequests()}));return p.promise}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MorphicEnv"}},{key:"reset",value:function(){for(;;){var a=this.popDefault();if(!a)break;try{a.uninstall()}catch(d){console.error("Error uninstalling MorphicEnv: ".concat(d.stack||d))}}}},{key:"default",
value:function(){var a=this.envs;a.length||this.pushDefault(new this);return a[a.length-1]}},{key:"pushDefault",value:function(a){this.envs.push(a);return a}},{key:"popDefault",value:function(){return this.envs.pop()}},{key:"envs",get:function(){return this._envs||(this._envs=[])}}],c,{pathInPackage:function(){return"./env.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:469,end:8637})}(void 0));zl.MorphicEnv=Yp;zl.MorphicEnv=Yp;var t3=Object.freeze({__proto__:null,MorphicEnv:Yp}),rt=window.lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js");rt.printArg=function(b){return rt.obj.inspect(b,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};rt.obj=bj;rt.promise=yj;var nT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js"),g=c.hasOwnProperty("CommandHandler")&&"function"===typeof c.CommandHandler?
c.CommandHandler:c.CommandHandler=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){this.history=[];this.maxHistorySize=1E3}},{key:"addToHistory",value:function(a){this.history.push(a);this.history.length>this.maxHistorySize&&this.history.splice(0,this.history.length-this.maxHistorySize)}},{key:"printHistory",value:function(){return this.history.map(this.printCommand).join("\n")}},
{key:"printCommand",value:function(a){var d=a.target.string,f=a.args,k=a.count,n=a.evt,p=a.keyCombo;return'"'.concat(a.name,'" ').concat(n?n+" ":"").concat(p?p+" ":"").concat(f?rt.printArg(f):"").concat("number"===typeof k?" x".concat(k):""," ").concat(d)}},{key:"lookupCommand",value:function(a,d){var f;if(!a)return{};"string"===typeof a&&(f=a);"string"===typeof a.command&&(f=a.command);if(a.exec){var k=a;f=k.name}k||(k=d.commands.find(function(n){return n.name===f}));return{name:f,command:k}}},{key:"exec",
value:function(a,d,f,k,n){var p=this,q=this.lookupCommand(a,d)||{},r=q.name,u=q.command;if(!u)return console.warn("Cannot find command ".concat(r||a)),null;if(r){if(n){var x=n.type;if(n.isKeyEvent)var y=n.keyCombo}this.addToHistory({name:r,target:{string:String(d),id:d.id},args:f,count:k,time:Date.now(),evt:x,keyCombo:y})}var D=d.world();"string"===typeof u.progressIndicator&&(this.progressIndicator=D.execCommand("open loading indicator",u.progressIndicator));if("function"===typeof u.exec)try{var H=
u.exec(d,f,u.handlesCount?k:void 0,n)}catch(I){H=I,a="Error in interactive command ".concat(r,": ").concat(I.stack||I),D?D.logError(a):console.error(a)}else console.error("command ".concat(r," has no exec function!"));this.progressIndicator&&this.progressIndicator.remove();H&&"function"===typeof H["catch"]?(H["catch"](function(I){var N="Error in interactive command ".concat(r,": ").concat(I,"\n").concat(I.stack||I);D?D.logError(N):console.error(N);throw I;}),this.progressIndicator&&rt.promise["finally"](H,
function(){return p.progressIndicator.remove()})):this.progressIndicator&&this.progressIndicator.remove();H&&"number"===typeof k&&1<k&&!u.handlesCount&&(H="function"===typeof H.then?H.then(function(){return p.exec(u,d,f,k-1,n,null)}):this.exec(u,d,f,k-1,n,null));return H}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"CommandHandler"}}],c,{pathInPackage:function(){return"./CommandHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:174,end:3752})}(void 0);rt["default"]=nT;var Ki=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js");Ki.ensureSpaces=function(b){return b.length?b:" "};Ki.invokeKeyHandlers=function(b,c){var g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,a=c=Ki.Keys.canonicalizeEvent(c),d=a.key,f=a.data,k,n=!1,p=b.keyhandlers,q=c.keyInputState||{};a=a.keyCombo.startsWith("input-");var r=!1,u=q.count,
x=q.keyChain||"",y=!1;if(!p||g&&a)return!1;for(g=p.length;g--;)if((k=p[g].eventCommandLookup(b,c))&&k.command){y=k;k=y.command;var D=y.args,H=y.passEvent,I=y.count;r=y.keyChain;var N=y.onlyWhenFocused;y=!0;u=I;x=r;r="null"===k;if(N&&(N=b.world())&&N.focusedMorph&&N.focusedMorph!==b)continue;n=r?!1:b.execCommand(k,D,I,c);!n||a&&"insertstring"===k||H||"function"!==typeof c.stop||c.stop();if(n||r)break}n||r||!a||!b.onTextInput||x||(n=b.execCommand("insertstring",{string:f||d,undoGroup:Ki.config.text.undoGroupDelay},
q.count,c));if(y)if("function"===typeof c.onAfterDispatch)c.onAfterDispatch(function(){q.count=n?void 0:u;q.keyChain=n?"":x});else q.count=n?void 0:u,q.keyChain=n?"":x;return n&&!r};Ki.simulateKeys=function(b,c){return QC.apply(this,arguments)};Ki.simulateKey=function(b,c,g){return Ki.invokeKeyHandlers(b,Object.assign({},Ki.Keys.keyComboToEventSpec(c),{keyInputState:g}))};Ki.bowserOS=function(){return Ki.bowser.mac?"mac":Ki.bowser.windows?"windows":Ki.bowser.windowsphone?"windowsphone":Ki.bowser.linux?
"linux":Ki.bowser.chromeos?"chromeos":Ki.bowser.android?"android":Ki.bowser.ios?"ios":Ki.bowser.blackberry?"blackberry":Ki.bowser.firefoxos?"firefoxos":Ki.bowser.webos?"webos":Ki.bowser.bada?"bada":Ki.bowser.tizen?"tizen":Ki.bowser.sailfish?"sailfish":"unknown"};Ki.findKeysForPlatform=RC;Ki.Keys=uH;Ki.bowser=pt;Ki.config=Jm;Ki.arr=aj;Ki.findKeysForPlatform=RC;Ki.regexps={meta:/Meta|Cmd|Command/gi,alt:/Alt/gi,ctrl:/Ctrl|Control/gi,tab:/Tab/gi,enter:/Enter|Return/gi,shift:/Shift/gi,backspace:/Backspace/gi,
"delete":/del(ete)?/gi,left:/left/gi,right:/right/gi,up:/up/gi,down:/down/gi,keySpacer:/([^-])-/g,seqSpacer:/([^\s])\s/g};var YA=bd("am",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js"),g=c.hasOwnProperty("KeyHandler")&&"function"===typeof c.KeyHandler?c.KeyHandler:c.KeyHandler=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),
value:function(){this.platform=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ki.bowserOS();this.keyBindings={}}},{key:"eventCommandLookup",value:function(a,d){return this.lookup(d.keyCombo,d.keyInputState)}},{key:"lookup",value:function(a){var d=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{keyChain:void 0,count:void 0};a=Ki.Keys.canonicalizeKeyCombo(a);var k=f.keyChain||"";f=f.count;if(!k&&a.startsWith("Ctrl-")){var n=a.match(/^Ctrl-([0-9]+)/);if(n)return{command:"null",
count:parseInt(("number"===typeof f?f:"")+n[1])};if("Ctrl-U"===a)return{command:"null",count:4,keyChain:"Ctrl-U"}}n=[a];if(!q&&a.startsWith("input-")){q=a.replace(/^(input-)(.*)$/,function(r,u,x){return u+x.toUpperCase()});var p=a.replace(/^(input-)(.*)$/,function(r,u,x){return u+x.toLowerCase()});n.push(q,p)}var q=n.map(function(r){return d.keyBindings[r]})[0];k&&(n=n.find(function(r){return d.keyBindings[k+" "+r]}))&&(k+=" "+n,q=this.keyBindings[k]||q);if(q&&"chainKeys"===q)return k=k||a,q={command:"null",
keyChain:k},void 0!==f&&(q.count=f),q;if(q)return q="object"===ad(q)?Object.assign({},q):{command:q},void 0!==f&&(q.count=f),q}},{key:"bindKey",value:function(a,d){var f=this;"object"===ad(a)&&a&&!Array.isArray(a)&&(a=Ki.findKeysForPlatform(a,this.platform));if(a){if("function"===typeof d)return this.addCommand({exec:d,bindKey:a,name:d.name||a});(Array.isArray(a)?a:a.includes("|")?a.split("|"):[a]).forEach(function(k){var n="";if(-1!=k.indexOf(" ")){var p=k.split(/\s+/);k=p.pop();p.forEach(function(q){q=
Ki.Keys.canonicalizeKeyCombo(q);n+=(n?" ":"")+q;f.addCommandToBinding(n,"chainKeys")});n+=" "}f.addCommandToBinding(n+Ki.Keys.canonicalizeKeyCombo(k),d)});this.cleanupUnusedKeyChains()}}},{key:"unbindKey",value:function(a){this.bindKey(a,null)}},{key:"cleanupUnusedKeyChains",value:function(){var a=this,d=Object.keys(this.keyBindings),f=d.filter(function(k){return"chainKeys"===a.keyBindings[k]});f=Ki.arr.sortBy(f,function(k){return k.length}).reverse();f.forEach(function(k){d.some(function(n){return k!==
n&&n.startsWith(k)})||(delete a.keyBindings[k],Ki.arr.remove(d,k),Ki.arr.remove(f,k))})}},{key:"addCommand",value:function(a){return a&&a.bindKey?this.addCommandToBinding(a.bindKey,a):void 0}},{key:"addCommandToBinding",value:function(a,d){var f=this;"chainKeys"===this.keyBindings[a]&&"chainKeys"!=d&&Object.keys(this.keyBindings).forEach(function(k){k.startsWith(a)&&delete f.keyBindings[k]});d?this.keyBindings[a]=d:delete this.keyBindings[a];"chainKeys"!==d&&this.cleanupUnusedKeyChains()}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"KeyHandler"}},{key:"invokeKeyHandlers",value:function(a,d){return Ki.invokeKeyHandlers(a,d,2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1)}},{key:"simulateKeys",value:function(a,d,f){return Ki.simulateKeys(a,d,f)}},{key:"withBindings",value:function(a,d){var f=new this(d);a.forEach(function(k){return f.bindKey(k.keys,k.command)});return f}},{key:"prettyCombo",value:function(a){var d=this._prettyCombos||(this._prettyCombos={});return this._prettyCombos[a]?d[a]:d[a]=
a.replace(Ki.regexps.meta,"mac"==Ki.bowserOS()?"\u2318":"\u229e ").replace(Ki.regexps.alt,"mac"==Ki.bowserOS()?"\u2325":"Alt ").replace(Ki.regexps.ctrl,"mac"==Ki.bowserOS()?"\u2303":"Ctrl ").replace(Ki.regexps.tab,"\u21e5").replace(Ki.regexps.enter,"\u23ce").replace(Ki.regexps.shift,"\u21e7").replace(Ki.regexps.backspace,"\u232b").replace(Ki.regexps["delete"],"\u2326").replace(Ki.regexps.left,"\u2192").replace(Ki.regexps.right,"\u2190").replace(Ki.regexps.up,"\u2191").replace(Ki.regexps.down,"\u2193").replace(Ki.regexps.keySpacer,
"$1").replace(Ki.regexps.seqSpacer,"$1-")}},{key:"generateCommandToKeybindingMap",value:function(a){function d(q){if(p[q.id])return p[q.id];var r=n[q.id]||(n[q.id]=q.keyCommandMap);return p[q.id]=Ki.arr.groupBy(Object.keys(r),function(u){return r[u].name})}var f=this,k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,n={},p={};return(1<arguments.length&&void 0!==arguments[1]&&arguments[1]?a.commandsIncludingOwners:a.commands.map(function(q){return{command:q,target:a}})).map(function(q){var r=
q.target;q=q.command;var u=d(r)[q.name];return{keys:u,target:r,command:q,prettyKeys:u&&k?u.map(function(x){return f.prettyCombo(x)}):null}})}}],c,{pathInPackage:function(){return"./events/KeyHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6162,end:13254})}(void 0));Ki["default"]=YA;var Qx=window.lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),
u3=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),g=c.hasOwnProperty("Script")&&"function"===typeof c.Script?c.Script:c.Script=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){this.suspended=!1;this.stopped=!0;this.currentTimeout=this.type=this.tickTime=null}},{key:"__additionally_serialize__",
value:function(a,d,f){a.props.suspended.value=!0}},{key:"isScript",get:function(){return!0}},{key:"global",get:function(){return System.global}},{key:"execute",value:function(){throw Error("subclass responsibility");}},{key:"tick",value:function(){try{this.execute()}catch(a){console.error("Error executing script "+this+": "+a+"\n"+a.stack);return}this.stopped||this.startTicking(this.tickTime)}},{key:"startTicking",value:function(a){this.stopped=!1;this.tickTime=a;this.type="number"===typeof a?"setTimeout":
"requestAnimationFrame";this.currentTimeout="setTimeout"===this.type?this.global.setTimeout(this.tick.bind(this),a):this.global.requestAnimationFrame(this.tick.bind(this))}},{key:"stop",value:function(){this.global["setTimeout"===this.type?"clearTimeout":"cancelAnimationFrame"](this.currentTimeout);this.stopped=!0}},{key:"resume",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.tickTime;this.suspended&&(this.suspended=!1,this.startTicking(this.tickTime=a))}},{key:"suspend",
value:function(){this.stop();this.suspended=!0}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Script"}}],c,{pathInPackage:function(){return"./ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:20,end:1374})}(void 0),oT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),
g=c.hasOwnProperty("TargetScript")&&"function"===typeof c.TargetScript?c.TargetScript:c.TargetScript=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d,f){Ve._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this);this.target=a;this.selector=d;this.args=f||[]}},{key:"execute",value:function(){this.target.isMorph&&
!this.target.tickingScripts.includes(this)&&this.stop();"function"===typeof this.target[this.selector]&&this.target[this.selector].apply(this.target,this.args)}},{key:"equals",value:function(a){return a.isScript&&this.target==a.target&&this.selector==a.selector}},{key:"toString",value:function(){return"Script(".concat(this.target,">>").concat(this.selector,"(").concat(this.args.join(","),"))")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TargetScript"}}],c,{pathInPackage:function(){return"./ticking.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1376,end:1991})}(Qx.Script),v3=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),g=c.hasOwnProperty("FunctionScript")&&"function"===typeof c.FunctionScript?c.FunctionScript:c.FunctionScript=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this);this.callback=a}},{key:"execute",value:function(){this.callback()}},{key:"equals",value:function(a){return a.isScript&&this.callback==a.callback}},{key:"toString",value:function(){return"Script(".concat(this.callback.toString().replace(/\n/g,"").slice(0,40)+"...",")")}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"FunctionScript"}}],c,{pathInPackage:function(){return"./ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1993,end:2341})}(Qx.Script);Qx.Script=u3;Qx.TargetScript=oT;Qx.FunctionScript=v3;var um=window.lively.FreezerRuntime.recorderFor("lively.morphic/object-migration.js");um.isReference=dL;um.removeUnreachableObjects=
ts;um.obj=bj;um.Path=qj;um.connect=lr;um.disconnectAll=mw;um.isReference=dL;var zH=[{date:"2017-04-08",name:"Text and Label textAndAttributes format change",description:"\nChanging the format from\n  [[string1, attr1_1, attr1_2], [string2, attr2_1, attr2_2], ...]\nto\n  [string1, attr1, string2, attr2, ...].\n    ",snapshotConverter:function(b){var c=b.snapshot,g;for(g in c){var a=c[g],d=a.props&&a.props.textAndAttributes;if(d){var f=d.value;if(!Array.isArray(f))console.warn("object migrator found textAndAttributes field but it is not an Array!");
else if(f.length&&"string"!==typeof f[0]){f=[].concat.apply([],f);for(var k=0;k<f.length;k+=2){var n=f[k+1];n&&Array.isArray(n)&&(f[k+1]=Object.assign.apply(Object,[{}].concat(db(n))))}a.props.textAndAttributes=Object.assign({},d,{value:f})}}}return b}},{date:"2017-04-29",name:"Window button fix",description:'\nA recent change in the structure of windows, that now adds a "button wrapper"\nmorph breaks old windows without it.\n',objectConverter:function(b,c){(c=c.refForId(b.id).realObj)&&c.isMorph&&
c.withAllSubmorphsDo(function(g){g.isWindow&&(g.submorphs.some(function(a){return"button wrapper"===a.name})&&g.get("button wrapper").submorphs.some(function(a){return"window menu button"===a.name}),g.minimizedBounds=null,um.disconnectAll(g.get("minimize")),um.connect(g.get("minimize"),"onMouseDown",g,"minimized",{updater:function(a){a(!this.targetObj.minimized)}}))});return b}},{date:"2017-05-03",name:"Style Sheet Status Fix",description:"\nState management of the style sheets has changes substantially, moving all of the style sheets that are being applied to the world.\n",
snapshotConverter:function(b){var c=b.id,g=b.snapshot,a;for(a in g){var d=g[a].props;d&&d.styleSheets&&(d.styleSheets.value||(d.styleSheets.value=[]),d.styleSheets.value=d.styleSheets.value&&d.styleSheets.value.filter(function(f){f=g[f.id];var k=g[f.props.rules.value.id];return!f.props.styledMorphs&&!("lively.serializer-class-info"in k)}))}um.removeUnreachableObjects([c],g);return b}},{date:"2017-05-22",name:"Removal of ChromeTheme and GithubTheme",description:"\nFor now only a simple default theme...\n",
snapshotConverter:function(b){var c=b.snapshot,g;for(g in c){var a=c[g],d=a["lively.serializer-class-info"];d&&("ChromeTheme"===d.className||"GithubTheme"===d.className?(d.className="DefaultTheme",d.module.pathInPackage="ide/themes/default.js"):"JavaScriptTokenizer"===d.className&&delete a["lively.serializer-class-info"])}return b}},{date:"2017-06-20",name:"Unwrapped Style Sheet Props",description:"Style Sheets now store foldable props in their nested format.",objectConverter:function(b,c){(c=c.refForId(b.id).realObj)&&
c.isMorph&&c.withAllSubmorphsDo(function(g){g.styleSheets&&0<g.styleSheets.length&&g.styleSheets.forEach(function(a){for(var d in um.obj.dissoc(a.rules,["_rev"]))a.rules[d]=a.unwrapFoldedProps(a.rules[d])})});return b}},{date:"2017-07-13",name:"Renamed style-rules.js to style-sheets.js",snapshotConverter:function(b){var c=b.snapshot,g;for(g in c){var a=c[g]["lively.serializer-class-info"];a&&"StyleSheet"===a.className&&(a.module.pathInPackage="style-sheets.js")}return b}},{date:"2017-07-26",name:"components, ide, and halo extraction",
snapshotConverter:function(b){var c=b.snapshot,g=b.packages,a=g&&g["local://lively-object-modules/"]||{};g=[["lively.morphic/halo","lively.halos"],["lively.morphic/components/markers.js","lively.halos"],["lively.morphic/components/icons.js","lively.morphic"],["lively.morphic/components/loading-indicator.js","lively.components",function(ja){return"{".concat(ja,"}")}],["lively.components/markers.js","lively.halos"],["lively.morphic/ide","lively.ide"],["lively.morphic/text/ui.js","lively.ide",null,"text/ui.js"]];
for(var d in a){var f=a[d]["index.js"],k=fa(g),n;try{for(k.s();!(n=k.n()).done;){var p=Wb(n.value,3),q=p[0],r=p[1],u=p[2];if(u){var x=new RegExp('(import\\s)(.*)(\\sfrom \\"'+q+")","g"),y=x.exec(f);y&&(f=f.replace(x,"import "+u(y[2])+'from "'+r))}else f=f.replace(new RegExp(q,"g"),r)}}catch(ja){k.e(ja)}finally{k.f()}a[d]["index.js"]=f}for(var D in c)if((d=c[D]["lively.serializer-class-info"])&&d.module){n=d.module["package"].name+"/"+d.module.pathInPackage;p=fa(g);var H;try{for(p.s();!(H=p.n()).done;){var I=
Wb(H.value,3),N=I[0],J=I[1],sa=I[2];if(n.includes(N)){d.module["package"].name=J;d.module["package"].version="0.1.0";d.module.pathInPackage=sa||n.substring(n.indexOf(N)+N.length+1)||"index.js";break}}}catch(ja){p.e(ja)}finally{p.f()}}return b}},{date:"2017-10-16",name:"change scroll implementation of list items",objectConverter:function(b,c){c=fa(c.objectRefs());var g;try{for(c.s();!(g=c.n()).done;){var a=g.value.realObj;a.isList&&"function"===typeof a.initializeSubmorphs&&a.initializeSubmorphs()}}catch(d){c.e(d)}finally{c.f()}return b}},
{date:"2017-10-30",name:"change implementation of tree",snapshotConverter:function(b){var c=b.snapshot,g;for(g in c){var a=c[g],d=a["lively.serializer-class-info"];d&&d.module&&("Tree"===d.className&&a.props.submorphs&&(a.props.submorphs.value=[]),"TreeNode"===d.className&&delete c[g],"InspectorTreeData"===d.className&&delete c[g],["PropertyNode","InspectionNode","MorphNode","FoldedNode"].includes(d.className)&&(d.module.pathInPackage="js/inspector/context.js"),"nodeItemContainer"===a.props.name&&
delete c[g])}return b}},{date:"2019-02-17",name:"change storage of commit metadata",snapshotConverter:function(b){var c=b.id,g=b.snapshot;Object.values(g).map(function(a){if(a.props&&a.props.metadata&&um.isReference(a.props.metadata.value)&&(a=g[a.props.metadata.value.id],a.props.commit&&um.isReference(a.props.commit.value))){var d=g[a.props.commit.value.id].props,f=d.type,k=d.name;d=d._id;f&&k&&d&&(a.props.commit.value='__lv_expr__:({type: "'.concat(f.value,'", name: "').concat(k.value,'", _id: "').concat(d.value,
'"})'))}});um.removeUnreachableObjects([c],g);return b}},{date:"2019-07-25",name:"world superclass extraction",snapshotConverter:function(b){var c=b.packages,g,a=um.Path(["local://lively-object-modules/","EmptyWorld","index.js"]);if(g=a.get(c))g=g.replace('import { World, morph } from "lively.morphic";','import { morph } from "lively.morphic";\nimport { LivelyWorld as World } from "lively.ide/world.js"').replace('import { World } from "lively.morphic";','import { LivelyWorld as World } from "lively.ide/world.js"'),
a.set(c,g);return b}},{date:"2019-08-05",name:"remove Camphor from system",snapshotConverter:function(b){Object.values(b.snapshot).map(function(c){c.props.fontFamily&&"Camphor"===c.props.fontFamily.value&&(c.props.fontFamily.value="Nunito")});return b}},{date:"2020-10-09",name:"remove style guide",snapshotConverter:function(b){var c=b.snapshot;Object.values(c).map(function(g){g.props.master&&"string"===typeof g.props.master.value&&(g.props.master.value=g.props.master.value.split("styleguide://style guide").join("styleguide://System"));
g.props.master&&g.props.master.value.id&&(g=c[g.props.master.value.id],g.props.auto&&"string"===typeof g.props.auto.value&&(g.props.auto.value=g.props.auto.value.split("styleguide://style guide").join("styleguide://System")))});return b}},{date:"2022-01-10",name:"change semantic of borderRadius property to allow definiton on per-corner basis",snapshotConverter:function(b){Object.values(b.snapshot).map(function(c){if(c.props.borderRadius&&"object"===ad(c.props.borderRadius.value)&&!c.props.borderRadius.value.hasOwnProperty("topLeft")){var g=
c.props.borderRadius.value;g=g.left===g.right===g.bottom===g.top?g.left:Math.max(g.left,g.right,g.bottom,g.top);c.props.borderRadius.value={topLeft:g,topRight:g,bottomRight:g,bottomLeft:g}}});return b}},{date:"2022-01-14",name:"migrate comments browser to new components architecture and rebuild rather than save the instances",snapshotConverter:function(b){var c=b.id,g=b.snapshot,a=[],d=[];Object.keys(g).map(function(f){var k=g[f];k.props.commentBrowser&&delete g[f].props.commentBrowser;k["lively.serializer-class-info"]&&
("CommentBrowser"===k["lively.serializer-class-info"].className&&a.push(f),"AttributeConnection"===k["lively.serializer-class-info"].className&&d.push(f))});d.forEach(function(f){g[f].props.targetObj.value.id in a&&delete g[f]});a.forEach(function(f){return delete g[f]});um.removeUnreachableObjects([c],g);return b}},{date:"2022-01-11",name:"remove prompts.js",snapshotConverter:function(b){var c=b.snapshot,g;for(g in c){var a,d=c[g],f=d["lively.serializer-class-info"];(null===f||void 0===f?0:null===
(a=f.module)||void 0===a?0:a.pathInPackage.endsWith("prompts.js"))&&delete d["lively.serializer-class-info"]}return b}},{date:"2022-01-18",name:"remove old Browser",snapshotConverter:function(b){var c=b.snapshot,g;for(g in c){var a,d=c[g]["lively.serializer-class-info"];(null===d||void 0===d?0:null===(a=d.module)||void 0===a?0:a.pathInPackage.endsWith("browser/index.js"))&&"Browser"===d.name&&delete c[g]}return b}}];um.migrations=zH;um.migrations=zH;var Kh=window.lively.FreezerRuntime.recorderFor("lively.morphic/serialization.js");
Kh.normalizeOptions=function(b){b=Object.assign({reinitializeIds:!1,plugins:Kh.allPlugins},b);b.reinitializeIds&&(b.reinitializeIds="function"===typeof b.reinitializeIds?b.reinitializeIds:function(c,g){return g.realObj.isMorph?Kh.newMorphId(g.realObj.constructor):null});return b};Kh.serializeMorph=ww;Kh.deserializeMorph=SC;Kh.copyMorph=TC;Kh.resourceToJSON=eL;Kh.findPackagesInFileSpec=fL;Kh.packagesOfSnapshot=VC;Kh.loadPackagesAndModulesOfSnapshot=gL;Kh.loadMorphFromSnapshot=zs;Kh.loadWorldFromResource=
hL;Kh.findRequiredPackagesOfSnapshot=iL;Kh.createMorphSnapshot=qu;Kh.saveWorldToResource=jL;Kh.requiredModulesOfSnapshot=us;Kh.deserializeWithMigrations=Wy;Kh.serialize=nw;Kh.allPlugins=lt;Kh.resource=Am;Kh.ast=fS;Kh.createFiles=Aq;Kh.promise=yj;Kh.Path=qj;Kh.graph=iv;Kh.arr=aj;Kh.MorphicEnv=Yp;Kh.newMorphId=hz;Kh.morph=Sm;Kh.pathForBrowserHistory=vw;Kh.migrations=zH;Kh.objectScriptingEnabled=!1;Kh.serializeMorph=ww;Kh.deserializeMorph=SC;Kh.copyMorph=TC;Kh.packagesOfSnapshot=VC;Kh.loadPackagesAndModulesOfSnapshot=
gL;Kh.loadMorphFromSnapshot=zs;Kh.loadWorldFromResource=hL;Kh.findRequiredPackagesOfSnapshot=iL;Kh.createMorphSnapshot=qu;Kh.saveWorldToResource=jL;var Lh=window.lively.FreezerRuntime.recorderFor("lively.morphic/components/policy.js");Lh.mergeInHierarchy=kL;Lh.getEventState=function(b,c){c||(c=[]);var g=b.env,a=g.world,d=g.eventDispatcher;a=a&&a.colorScheme;g=d&&d.isMorphHovered(b);d=d&&d.isMorphClicked(b);c=c.find(function(f){if(f.minWidth||f.maxWidth){var k=f.minWidth;f=f.maxWidth;f=void 0===f?
Infinity:f;return(void 0===k?-Infinity:k)<=b.width&&b.width<f}if(f.minHeight||f.maxHeight)return k=f.minHeight,f=f.maxHeight,f=void 0===f?Infinity:f,(void 0===k?-Infinity:k)<=b.height&&b.height<f});return{matchingBreakpoint:c&&c.master,mode:a,isHovered:g,isClicked:d}};Lh.arr=aj;Lh.tree=Er;Lh.promise=yj;Lh.obj=bj;Lh.pt=wl;Lh.morph=Sm;Lh.getStylePropertiesFor=NC;Lh.getDefaultValueFor=OC;Lh.skippedValue=Symbol["for"]("lively.skip-property");Lh.PROPS_TO_RESET=["dropShadow","fill","opacity","borderWidth",
"fontColor"];var pT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/components/policy.js"),g=c.hasOwnProperty("StylePolicy")&&"function"===typeof c.StylePolicy?c.StylePolicy:c.StylePolicy=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
!0;d&&(this.parent=d);this.inheritStructure=f;this.spec=this.ensureStylePoliciesInSpec(a);if(this.spec.isPolicy)return this.spec}},{key:"parent",get:function(){var a;return(null===(a=this._parent)||void 0===a?0:a.isComponentDescriptor)?this._parent.stylePolicy:this._parent}},{key:"type",get:function(){return this.spec.type}},{key:"name",get:function(){return this.spec.name}},{key:"parent",set:function(a){if(a.isPolicy||a.isComponentDescriptor)this._parent=a;else{var d=a.click,f=a.hover,k=a.light,
n=a.dark,p=a.breakpoints;a=a.auto;this._autoMaster=this._parent=a=void 0===a?this._parent:a;d&&(this._clickMaster=d);f&&(this._hoverMaster=f);k&&(this._lightModeMaster=k);n&&(this._darkModeMaster=n);p&&(this._breakpointMasters=p)}}},{key:"isPolicy",get:function(){return!0}},{key:"isEventPolicy",get:function(){return this._clickMaster||this._hoverMaster}},{key:"isLightDarkModePolicy",get:function(){return this._lightModeMaster||this._darkModeMaster}},{key:"isBreakpointPolicy",get:function(){return!!this._breakpointMasters}},
{key:"overriddenMaster",get:function(){var a=this._getOverriddenMaster(this.spec,this);return a&&a===this?null:(null===a||void 0===a?0:a.isComponentDescriptor)?a.stylePolicy:a}},{key:"_getOverriddenMaster",value:function(a,d){var f;(a=(null===(f=a.master)||void 0===f?void 0:f.stylePolicy)||a.master)&&Lh.arr.isSubset(Lh.obj.keys(a),["click","auto","hover"])&&!a.auto&&(a.auto=d.parent);return a&&!a.isPolicy?new Lh.PolicyApplicator({},a):a}},{key:"__serialize__",value:function(a){var d=this[Symbol["for"]("lively-module-meta")];
if(d)return a.expressionSerializer.exprStringEncode({__expr__:d.exportedName+(d.path.length?".stylePolicy.getSubSpecAt(".concat(d.path.map(function(f){return JSON.stringify(f)}).join(","),")"):".stylePolicy"),bindings:dd({},d.moduleId,d.exportedName)})}},{key:"addMetaInfo",value:function(a){var d=a.exportedName,f=a.moduleId,k=a.path;k=void 0===k?[]:k;var n=a.range;n=void 0===n?!1:n;var p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this;p.isPolicy&&(p[Symbol["for"]("lively-module-meta")]=
{exportedName:d,moduleId:f,path:k,range:n},p=p.spec);n=fa(p.submorphs||[]);var q;try{for(n.s();!(q=n.n()).done;){var r,u=q.value;"add"===u.COMMAND&&(u=u.props);u.isPolicy&&(k=[].concat(db(k),[null===(r=u.spec)||void 0===r?void 0:r.name]));this.addMetaInfo({exportedName:d,moduleId:f,path:k},u)}}catch(x){n.e(x)}finally{n.f()}}},{key:"ensureStylePoliciesInSpec",value:function(a){var d=this,f=this.constructor,k=this._getOverriddenMaster(a,this),n=function(u){u=k&&k.getSubSpecFor(u);return!u||u.isPolicy||
u.isComponentDescriptor?u:!1},p=function(u){return Lh.tree.mapTree(u,function(x,y){return x.isPolicy?x:x.master&&x!==u||x.master?new f(Object.assign({},Lh.obj.dissoc(x,["master"]),{submorphs:y}),x.master,!1):Object.assign({},x,{submorphs:y})},function(x){return x.submorphs||[]})};if(!this.parent||!this.inheritStructure)return p(a);if(this.parent){var q=Lh.tree.mapTree(this.parent.spec,function(u,x){var y;"add"===u.COMMAND&&(u=u.props);if("remove"===u.COMMAND)return null;var D=n(u.name||(null===(y=
u.spec)||void 0===y?void 0:y.name));if(u.isPolicy)return new f(D?{master:D}:{},u);u=Lh.obj.dissoc(u,["master","submorphs"].concat(db(Lh.getStylePropertiesFor(u.type))));0<x.length&&(u.submorphs=Lh.arr.compact(x));return u},function(u){var x;return u.submorphs||(null===(x=u.props)||void 0===x?void 0:x.submorphs)||[]}),r=new WeakMap;Lh.mergeInHierarchy(q,a,function(u,x){if(x===a)x.name||(x.name=u.name);else if(!x.isPolicy){var y=x.master||n(u.name);if(y&&u.isPolicy)y=y.isComponentDescriptor?y.stylePolicy:
y,x=new f(Object.assign({},x,{master:y}),u.parent),r.set(u,x);else if(y){var D=u.name;y=y.isComponentDescriptor?y.stylePolicy:y;x=new f(Object.assign({},x,{master:y}),d.parent.extractInlinePolicyFor(D));r.set(u,x)}else u.isPolicy?(x=new f(x,u.parent),r.set(u,x)):Object.assign(u,Lh.obj.dissoc(x,["submorphs"]))}},!0,function(u,x){r.set(x,{COMMAND:"remove",target:x.name})},function(u,x,y){y=y?u.submorphs.indexOf(y):u.submorphs.length;x.isPolicyApplicator||(x=p(x));Lh.arr.pushAt(u.submorphs,{COMMAND:"add",
props:x},y)});q.viewModel&&a.viewModel&&(a.viewModel=Lh.obj.deepMerge(q.viewModel,a.viewModel));return Object.assign({},Lh.obj.dissoc(q,["master","submorphs"].concat(db(Lh.getStylePropertiesFor(q.type)))),{},a,{submorphs:Lh.tree.mapTree(q,function(u,x){if(r.has(u))return r.get(u);!u.isPolicy&&0<x.length&&(u.submorphs=x);return u},function(u){return u.submorphs||[]}).submorphs||[]})}}},{key:"extractInlinePolicyFor",value:function(a){var d=this.getSubSpecFor(a),f=this.constructor;return d?new f(d,this.parent?
this.parent.extractInlinePolicyFor(a):null):null}},{key:"instantiate",value:function(){var a=Lh.morph((new Lh.PolicyApplicator(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},this)).asBuildSpecSimple());a.master.applyIfNeeded(!0);var d=[];a.withAllSubmorphsDo(function(f){f.viewModel&&d.unshift(f)});d.forEach(function(f){return f.viewModel.attach(f)});return a}},{key:"asBuildSpecSimple",value:function(){var a=this,d=Lh.tree.mapTree(this.spec,function(f,k){"add"===f.COMMAND&&(f=f.props);if("remove"===
f.COMMAND)return null;if(f.isPolicy)return f.asBuildSpecSimple();var n=f.defaultViewModel||f.viewModelClass,p=f.viewModel||{},q;for(q in p){var r;if(null===(r=p[q])||void 0===r?0:r.isPolicyApplicator)p[q]=p[q].instantiate()}f=Lh.obj.dissoc(f,["submorphs","defaultViewModel","viewModelClass","viewModel"].concat(db(a.parent?Lh.getStylePropertiesFor(f.type):[])));0<k.length&&(f.submorphs=Lh.arr.compact(k));n&&(f.viewModel=new n(p));return f},function(f){return f.submorphs});if(this.parent||this.overriddenMaster)d.master=
this;return d}},{key:"asBuildSpec",value:function(){function a(p){return Lh.tree.mapTree(p,function(q,r){var u=f,x=q;q.isPolicy?q=q.asBuildSpec(u):(u(d)&&(x=Object.assign({},Lh.obj.dissoc(q,["master"].concat(db(Lh.getStylePropertiesFor(q.type)))))),0<r.length&&(x.submorphs=r),q=x);return q},function(q){return q.submorphs||[]})}var d=this,f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){return!0};if(this.parent)var k=this.parent.asBuildSpec();else return k=a(this.spec);f(this)&&
(k.master=this);if(!this.inheritStructure){var n=new Set;Lh.mergeInHierarchy(k,this.spec,function(p){n.add(p)});k=Lh.tree.mapTree(k,function(p,q){p.submorphs=q.filter(function(r){return n.has(r)});return p},function(p){return p.submorphs})}Lh.mergeInHierarchy(k,this.spec,function(p,q){var r=Lh.getStylePropertiesFor(p.type||q.type);if(q.isPolicy){for(var u in r)delete p[u];f(d)&&(p.master=q);f(d)||(Object.assign(p,q.asBuildSpec(f)),q.parent&&(p.master=q.parent))}else f(d)&&Object.assign(p,Lh.obj.dissoc(q,
[].concat(db(r),["master","submorphs"]))),f(d)||Object.assign(p,Lh.obj.dissoc(q,["submorphs"]))},!0,function(p,q){Lh.arr.remove(p.submorphs,q)},function(p,q,r){r=r?p.submorphs.indexOf(r):p.submorphs.length;if(q.isPolicy){var u=q.asBuildSpec(f);f(d)?u.master=q:q.parent&&(u.master=q.parent)}else u=a(q);Lh.arr.pushAt(p.submorphs,u,r)});return k}},{key:"determineMaster",value:function(a){if(!a)return this._autoMaster||this._parent;var d=Lh.getEventState(a,this._breakpointMasters);a=d.isHovered;var f=
d.isClicked,k=d.mode;d=d.breakpointMaster;if(this.isEventPolicy)return f?this._clickMaster||this._autoMaster:a?this._hoverMaster||this._autoMaster:this._autoMaster;if(this.isLightDarkModePolicy)switch(k){case "dark":return this._darkModeMaster;case "light":return this._lightModeMaster;default:return this._autoMaster}return this.isBreakpointPolicy?d||this._autoMaster:this._parent}},{key:"synthesizeSubSpec",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){return!0},
k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(!f(this))return{};var n=this.getSubSpecFor(a)||{},p=this.determineMaster(d);if(!p||n.isPolicy)return n;var q={};p.isComponentDescriptor&&(p=p.stylePolicy);if(f(p)&&(q=p.synthesizeSubSpec(a,d,f,k),q.isPolicy))return q;f={};if(p=this.overriddenMaster){var r=p.synthesizeSubSpec(a,d,function(){return!0},!0);q.fontColor&&!r.fontColor&&p.managesMorph(a)&&(r.fontColor=Lh.getDefaultValueFor(q.type,"fontColor"));q.fill&&!r.fill&&p.managesMorph(a)&&
(r.fill=Lh.getDefaultValueFor(q.type,"fill"));Object.assign(f,q,Lh.obj.dissoc(r,!a&&q.extent?["extent"]:[]),n)}else Object.assign(f,q,n);delete f.submorphs;delete f.master;delete f.name;for(var u in f){var x;if(null===(x=f[u])||void 0===x?0:x.onlyAtInstantiation)k?delete f[u]:f[u]=f[u].value}return f}},{key:"getSubSpecFor",value:function(a){if(!a)return this.spec;var d=Lh.tree.find(this.spec,function(f){return"add"===f.COMMAND?f.props.name===a:f.name===a},function(f){var k;return f.submorphs||(null===
(k=f.props)||void 0===k?void 0:k.submorphs)});return d?d.props||d:null}},{key:"getSubSpecAt",value:function(){for(var a=arguments.length,d=Array(a),f=0;f<a;f++)d[f]=arguments[f];return(a=this.getSubSpecFor(d.shift()))&&0<d.length?a.getSubSpecAt(d):a}},{key:"managesMorph",value:function(a){return a?!!Lh.tree.find(this.spec,function(d){return d.name===a},function(d){return d.submorphs}):!0}},{key:"propsToSerializeForMorph",value:function(a,d){return d}},{key:"isPositionedByLayout",value:function(a){var d,
f,k=null===(d=a.owner)||void 0===d?void 0:d.layout;return"Proportional"!==(null===k||void 0===k?void 0:k.name())&&(null===k||void 0===k?void 0:null===(f=k.layoutableSubmorphs)||void 0===f?void 0:f.includes(a))}},{key:"isResizedByLayout",value:function(a){var d=a.owner&&a.owner.layout;if(!d)return!1;if(d.resizePolicies){var f=d.getResizeHeightPolicyFor(a);a=d.getResizeWidthPolicyFor(a);if("fill"===f||"fill"===a)return{widthPolicy:a,heightPolicy:f}}return!1}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"StylePolicy"}}],c,{pathInPackage:function(){return"./components/policy.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3048,end:30452})}(void 0);Lh.StylePolicy=pT;Lh.StylePolicy=pT;var ZA=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/components/policy.js"),g=c.hasOwnProperty("PolicyApplicator")&&
"function"===typeof c.PolicyApplicator?c.PolicyApplicator:c.PolicyApplicator=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"isPolicyApplicator",get:function(){return!0}},{key:"toString",value:function(){return"<PolicyApplicator>"}},{key:"respondsToClick",get:function(){var a,d;return this._clickMaster?!0:!(null===(a=this.parent)||void 0===a||!a.respondsToClick)||!(null===(d=this.overriddenMaster)||
void 0===d||!d.respondsToHover)}},{key:"respondsToHover",get:function(){var a,d;return this._hoverMaster?!0:!(null===(a=this.parent)||void 0===a||!a.respondsToHover)||!(null===(d=this.overriddenMaster)||void 0===d||!d.respondsToHover)}},{key:"asBuildSpec",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){return!0};a=Ve._get(Object.getPrototypeOf(g.prototype),"asBuildSpec",this).call(this,a);return Lh.tree.mapTree(a,function(d,f){return d.master&&!d.master.isPolicyApplicator?
Object.assign({},d,{submorphs:f,master:new Lh.PolicyApplicator({},d.master)}):Object.assign({},d,{submorphs:f})},function(d){return d.submorphs})}},{key:"attach",value:function(a){this.targetMorph=a}},{key:"apply",value:function(a){var d=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;a.withMetaDo({metaInteraction:!0},function(){d.withSubmorphsInScopeDo(a,function(k){var n=null;k!==a&&(n=k.name);n=d.synthesizeSubSpec(n,a);if(!Lh.obj.isEmpty(n)&&(n.isPolicy?(k.setProperty("master",
n),n.targetMorph=k):d.applySpecToMorph(k,n,f),k!==a&&k.master))return k._requestMasterStyling=!1,k.master.apply(k)})})}},{key:"synthesizeSubSpec",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){return!0},k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;f=Ve._get(Object.getPrototypeOf(g.prototype),"synthesizeSubSpec",this).call(this,a,d,f,k);return f.isPolicy&&!f.isPolicyApplicator?new Lh.PolicyApplicator({},f):f}},{key:"applyIfNeeded",value:function(){var a=
this,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,f=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1)&&this.targetMorph;if(d&&f){Lh.__inter0__=Lh.promise.deferred();this._animating=Lh.__inter0__.promise;var k=Lh.__inter0__.resolve;this.targetMorph.withAnimationDo(function(){return a.apply(a.targetMorph)},d).then(function(){a._animating=!1;k(!0)});return this._animating}f&&this.apply(this.targetMorph)}},{key:"whenApplied",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=
k.next){case 0:case "end":return k.stop()}},f)}));return function(){return a.apply(this,arguments)}}()},{key:"applyAnimated",value:function(){return this.applyIfNeeded(!0,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{duration:1E3})}},{key:"applySpecToMorph",value:function(a,d,f){var k=this,n=fa(Lh.getStylePropertiesFor(a.constructor)),p;try{for(n.s();!(p=n.n()).done;){var q,r=p.value,u=d[r];if(u!==Lh.skippedValue){if(void 0===u&&(Lh.PROPS_TO_RESET.includes(r)&&(u=Lh.getDefaultValueFor(a.constructor,
r)),void 0===u))continue;if("layout"!==r||"continue"!==function(){var y,D,H;if((null===(y=a.layout)||void 0===y?void 0:y.name())===(null===(D=u)||void 0===D?void 0:D.name())&&(null===(H=a.layout)||void 0===H?0:H.equals(u)))return"continue";var I=u?u.copy():void 0;if(k._animating){var N=I.renderViaCSS;I.renderViaCSS=!1;k._animating.then(function(){return I.renderViaCSS=N})}a.layout=I;return"continue"}())if(!this.isPositionedByLayout(a)||"position"!==r){var x=void 0;if("extent"===r&&(x=this.isResizedByLayout(a)))"fixed"===
x.widthPolicy&&(a.width=u.x),"fixed"===x.heightPolicy&&(a.height=u.y);else{if(f){if("extent"===r&&!a.extent.equals(Lh.pt(10,10))&&(!a.owner||a.owner.isWorld||a.ownerChain().find(function(y){return y.master&&y.master.managesMorph(a.name)})))continue;if("position"===r)continue}a.isLabel&&"extent"===r||["border","borderTop","borderBottom","borderRight","borderLeft"].includes(r)||(Lh.obj.equals(a[r],u)||(a[r]=u),["fixedHeight","fixedWidth"].includes(r)&&(null===(q=a._parametrizedProps)||void 0===q?0:
q.extent)&&(a.extent=a._parametrizedProps.extent))}}}}}catch(y){n.e(y)}finally{n.f()}}},{key:"withSubmorphsInScopeDo",value:function(a,d){return a.withAllSubmorphsDoExcluding(d,function(f){return a!==f&&f.master})}},{key:"onMorphChange",value:function(a,d){var f;if((null===(f=d.meta)||void 0===f||!f.metaInteraction)&&this.targetMorph&&!this._animating){f=this.ensureSubSpecFor(a);if(null===f||void 0===f?0:f.isPolicyApplicator)return f.onMorphChange(a,d);d.value!==this&&("addMorphAt"===d.selector&&
this.insertSpecIfMentioned(d.args[0]),Lh.getStylePropertiesFor(a.constructor).includes(d.prop)&&(f[d.prop]=Lh.skippedValue),"extent"===d.prop&&(d.value.y!==d.prevValue.y&&(f.height=Lh.skippedValue),d.value.x!==d.prevValue.x&&(f.width=Lh.skippedValue)))}}},{key:"ensureSubSpecFor",value:function(a){var d=this.targetMorph===a?null:a.name,f=this.getSubSpecFor(d);if(f)return f;f={name:a.name};if(!this.mentionedInHierarchy(d))return f;a=this.ensureSubSpecFor(a.owner);d=a.submorphs;d=void 0===d?[]:d;d.push(f);
a.submorphs=d;return f}},{key:"mentionedInHierarchy",value:function(a){for(var d=!1,f=this;f=f.parent;)d=!!f.getSubSpecFor(a);return d}},{key:"insertSpecIfMentioned",value:function(a){return this.mentionedInHierarchy(a.name)?this.ensureSubSpecFor(a):null}},{key:"adoptOverriddenPropsFrom",value:function(a){Lh.mergeInHierarchy(this.spec,a.spec,function(d,f){var k=fa(Lh.arr.intersect(Lh.obj.keys(f),Lh.getStylePropertiesFor(f.type))),n;try{for(k.s();!(n=k.n()).done;){var p=n.value;d[p]=f[p]}}catch(q){k.e(q)}finally{k.f()}})}}],
[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PolicyApplicator"}},{key:"for",value:function(a,d){var f;d.constructor===Lh.PolicyApplicator?f=d:d.isComponentDescriptor&&d.stylePolicy?f=new this({},{auto:d}):d.constructor===Lh.StylePolicy?f=new this({},d):Lh.arr.isSubset(Lh.obj.keys(d),["auto","hover","click"])&&(f=new this({},d));a.master&&f.adoptOverriddenPropsFrom(a.master);return f}}],c,{pathInPackage:function(){return"./components/policy.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:31066,end:42552})}(Lh.StylePolicy);Lh.PolicyApplicator=ZA;Lh.PolicyApplicator=ZA;var re=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js");re.generateUnfolded=function(b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"core",g={},a=fa(1<arguments.length&&void 0!==arguments[1]?arguments[1]:["top","left","right","bottom"]),d;
try{var f=function(){var k=d.value;g[b+re.string.capitalize(k)]={group:c,derived:!0,generated:!0,after:[b],get:function(){return this.getProperty(b)[k]},set:function(n){this[b]=Object.assign({},this.getProperty(b),dd({},k,n))}}};for(a.s();!(d=a.n()).done;)f()}catch(k){a.e(k)}finally{a.f()}return g};re.Color=Bn;re.Line=LA;re.Point=kt;re.pt=wl;re.rect=ko;re.Rectangle=fn;re.Transform=Fx;re.string=Xj;re.obj=bj;re.arr=aj;re.num=Gm;re.promise=yj;re.tree=Er;re.PropertyPath=qj;re.signal=Ln;re.deserializeSpec=
xq;re.ExpressionSerializer=Fp;re.serializeSpec=Ep;re.getClassName=Mo;re.renderRootMorph=AC;re.ShadowObject=Pr;re.AnimationQueue=iH;re.easings=Nx;re.addOrChangeCSSDeclaration=zq;re.Icon=qt;re.morph=Sm;re.newMorphId=hz;re.sanitizeFont=pu;re.MorphicEnv=Yp;re.config=Jm;re.CommandHandler=nT;re.KeyHandler=YA;re.findKeysForPlatform=RC;re.TargetScript=oT;re.copyMorph=TC;re.PolicyApplicator=ZA;re.defaultCommandHandler=new re.CommandHandler;var gp=bd("M",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),
g=c.hasOwnProperty("Morph")&&"function"===typeof c.Morph?c.Morph:c.Morph=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){a||(a={});var d=a.env||re.MorphicEnv["default"]();this._env=d;this._rev=d.changeManager.revision;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=re.newMorphId(re.getClassName(this));
this._animationQueue=new re.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=re.obj.select(a,re.arr.intersect(Object.keys(a),[].concat(db(this.styleProperties),["master"])));this.initializeProperties(a);a.bounds&&(this.setBounds(a.bounds),this._parametrizedProps.extent=this.extent,this._parametrizedProps.position=this.position);if(void 0!==a.height||void 0!==a.width)this._parametrizedProps.extent=this.extent;if("function"===typeof this.onLoad&&
!this.isComponent)this.onLoad()}},{key:"__serialization_id_property__",get:function(){return"_id"}},{key:"__deserialize__",value:function(a,d,f,k){this._env=re.MorphicEnv["default"]();this._rev=a.rev;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=d.id;this._animationQueue=new re.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=re.obj.select(a.props,re.arr.intersect(Object.keys(a.props),db(this.styleProperties).concat(a._masterOverridden?
["master"]:[])));this._parametrizedProps.__takenFromSnapshot__=!0;a=k.expressionSerializer;for(var n in this._parametrizedProps)(d=this._parametrizedProps[n].value)&&re.obj.isString(d)&&a.isSerializedExpression(d)&&(this._parametrizedProps[n]=a.deserializeExpr(d));this.initializeProperties();this._pool=k}},{key:"__after_deserialize__",value:function(a,d,f){this.resumeStepping();if("function"===typeof this.onLoad)try{this.onLoad()}catch(k){console.error("[lively.morphic] ".concat(this,".onLoad() error: ").concat(k.stack))}this.isComponent&&
!this.owner||delete this._pool;this.master&&(f.mastersInSubHierarchy?f.mastersInSubHierarchy.push(this.master):f.mastersInSubHierarchy=[this.master]);this.viewModel&&this.viewModel.attach(this)}},{key:"__only_serialize__",get:function(){var a=this.defaultProperties,d=this.propertiesAndPropertySettings().properties,f=[];0<this._tickingScripts.length&&f.push("_tickingScripts");this.attributeConnections&&f.push("attributeConnections");var k=[this].concat(db(this.ownerChain())).map(function(q){return q.__isBeingSerialized__&&
q.master}).find(Boolean),n;for(n in d){var p=d[n];k&&k.managesMorph(this)&&void 0!==k._overriddenProps.get(this)[n]?(f.push(n),"master"===n&&(this._masterOverridden=!0)):p.readOnly||p.derived||p.isComponent||p.hasOwnProperty("serialize")&&!p.serialize||re.obj.equals(this[n],a[n])||f.push(n)}return k&&!this.isComponent?k.propsToSerializeForMorph(this,f):f}},{key:"__additionally_serialize__",value:function(a,d,f,k){if((d=a.props.submorphs)&&!this.isEpiMorph){d=d.value;for(var n=d.length;n--;){var p=
d[n];p.__ref__&&f.refForId(p.id).realObj.isEpiMorph&&re.arr.removeAt(d,n)}}d=fa(re.arr.intersect(this.__only_serialize__,["borderColor","borderWidth","borderStyle","borderRadius"]));var q;try{for(d.s();!(q=d.n()).done;){var r=q.value;a.props[r]={key:r,verbatim:!0,value:re.obj.extract(this[r],this.propertiesAndPropertySettings().properties[r].foldable,function(x,y){return y&&y.isColor?y.toTuple():y})}}}catch(x){d.e(x)}finally{d.f()}q=this.propertiesAndPropertySettings().properties;for(var u in q)q[u].isComponent&&
this[u]&&(r=this[u][Symbol["for"]("lively-module-meta")])&&k(u,f.expressionSerializer.exprStringEncode({__expr__:r["export"],bindings:dd({},r.module,r["export"])}));this._masterOverridden&&(a._masterOverridden=!0)}},{key:"isMorph",get:function(){return!0}},{key:"id",get:function(){return this._id}},{key:"env",get:function(){return this._env}},{key:"spec",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new WeakMap,
f=this.defaultProperties,k=this.propertiesAndPropertySettings().properties,n={submorphs:!0},p={};if(d.has(this))return d.get(this);d.set(this,p);for(var q in k){var r=k[q];r&&(r.readOnly||r.derived||r.hasOwnProperty("serialize")&&!r.serialize||q in n||a&&(re.obj.equals(this[q],f[q])||this[q]&&f[q]&&this[q].valueOf&&f[q].valueOf&&re.obj.equals(this[q].valueOf(),f[q].valueOf()))||(p[q]=this[q]&&this[q].isMorph?this[q].spec(a,d):this[q]&&"layout"===q?this[q].copy():this[q]))}p.submorphs=this.submorphs.map(function(u){return u.spec(a,
d)});p.type=this.constructor;return p}},{key:"printSpec",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;a=a||this.spec();var f={name:!0,type:!0,submorphs:!0},k="  ".repeat(d+1),n="  ".repeat(d)+"{\n"+"".concat(k,'name: "').concat(a.name,'",\n')+"".concat(k,'type: "').concat(a.type,'",\n'),p;for(p in a)f[p]||(n+="".concat(k).concat(p,": ").concat(re.string.print(a[p]),",\n"));if(a.submorphs){n+="".concat(k,
"submorphs: [\n");a=fa(a.submorphs);var q;try{for(a.s();!(q=a.n()).done;)n+=this.printSpec(q.value,d+1)}catch(r){a.e(r)}finally{a.f()}n+="]\n"}return n+="  ".repeat(d)+"}\n"}},{key:"defaultProperty",value:function(a){return this.defaultProperties[a]}},{key:"getProperty",value:function(a){return this._morphicState[a]}},{key:"setProperty",value:function(a,d,f){return this.addValueChange(a,d,f)}},{key:"changeMetaData",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,
k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,n=this.metadata;n||(n={});(new re.PropertyPath(a)).withParentAndKeyDo(n,!0,function(p,q){p[q]=k?Object.assign({},p[q],{},d):d;var r=p.__dont_serialize__;f?r&&r.includes(q)&&(re.arr.remove(r,q),0===r.length&&delete p.__dont_serialize__):(r||(r=p.__dont_serialize__=[]),re.arr.pushIfNotIncluded(r,q))});this.metadata=n}},{key:"installFont",value:function(a,d){this.installedFonts=Object.assign({},this.installedFonts,dd({},a,d));this.insertFontCSS(a,
d)}},{key:"uninstallFont",value:function(a){delete this.installedFonts[a];(a=document.getElementById("".concat(this.id,"-").concat(a)))&&a.remove()}},{key:"ensureInstalledFonts",value:function(a,d){a=fa(a);var f;try{for(a.s();!(f=a.n()).done;){var k=f.value,n=document.getElementById("".concat(this.id,"-").concat(k));n&&n.remove()}}catch(r){a.e(r)}finally{a.f()}d=fa(d);var p;try{for(d.s();!(p=d.n()).done;){var q=p.value;this.env.fontMetric.isFontSupported(re.sanitizeFont(q))||this.insertFontCSS(q,
this.installedFonts[q])}}catch(r){d.e(r)}finally{d.f()}}},{key:"insertFontCSS",value:function(){var a=Cb(regeneratorRuntime.mark(function n(f,k){return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.whenRendered();case 2:k.endsWith(".otf")?re.addOrChangeCSSDeclaration("".concat(this.id,"-").concat(f),"@font-face {\n             font-family: ".concat(f,';\n             src: url("').concat(this.installedFonts[f],'") format("opentype");\n         }')):re.addOrChangeCSSDeclaration("".concat(this.id,
"-").concat(f),'@import url("'.concat(this.installedFonts[f],'");'));case 3:case "end":return p.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"toString",value:function(){return"<".concat(re.getClassName(this)," - ").concat(this.name?this.name:this.id,">")}},{key:"edit",value:function(a){return this.env.world.execCommand("open object editor",Object.assign({className:re.getClassName(this)},a,{target:this}))}},{key:"inspect",value:function(a){if(!re.obj.isNumber(a))return this.env.world.execCommand("open object inspector",
Object.assign({},a,{target:this}))}},{key:"livelyCustomInspect",value:function(){var a={_id:!0,_owner:!0},d={},f=this.propertiesAndPropertySettings().properties,k=[],n;for(n in f)a[n]||f[n].derived&&!f[n].showInInspector||(d[n]=!0,k.push({key:n,value:this[n]}));k.push({key:"id",value:this.id});k.push({key:"owner",value:this.owner});k=k.sort(function(u,x){u=u.key.toLowerCase();x=x.key.toLowerCase();return u<x?-1:u===x?0:1});if(this.attributeConnections){f=fa(this.attributeConnections);var p;try{for(f.s();!(p=
f.n()).done;){var q=p.value;a["$$".concat(q.sourceAttrName),"".concat(q.sourceAttrName)]=!0}}catch(u){f.e(u)}finally{f.f()}}Object.assign(d,a);a=0;for(p="attributeConnections _animationQueue _morphicState _dirty doNotCopyProperties doNotSerialize _env _cachedPaths _pathDependants _rendering _rev _submorphOrderChanged _tickingScripts _transform _invTransform _styleSheetProps _renderer _tooltipViewer layout".split(" ");a<p.length;a++)q=p[a],q in this&&(d[q]=!0,k.push({key:q,value:this[q],keyString:"[internal] ".concat(q)}));
for(var r in this)!d[r]&&this.hasOwnProperty(r)&&k.unshift({key:r,value:this[r],keyString:"[UNKNOWN PROPERTY] ".concat(r)});return{sort:!1,includeDefault:!1,properties:k}}},{key:"show",value:function(a){return $world.execCommand("show morph",{morph:this,loop:a})}},{key:"setStatusMessage",value:function(a,d,f,k){var n=this.world();k=Object.assign({maxLines:7,isCompact:!0},k);return n?n.setStatusMessageFor(this,a,d,f,k):console.log(a)}},{key:"showError",value:function(a){var d=this.world();return d?
d.showErrorFor(this,a):console.error(a)}},{key:"onChange",value:function(a){var d=a.meta&&a.meta.animation,f=a.prop,k=a.value;if("position"===f||"rotation"===f||"scale"===f||"origin"===f||"reactsToPointer"===f)this.onBoundsChanged(this.bounds()),this.updateTransform(dd({},f,k));else if("extent"===f)this.onBoundsChanged(this.bounds());else"layout"===f&&(d?k&&k.attachAnimated(d.duration,this,d.easing):k&&k.attach());this.layout&&this.layout.onChange(a);this.isComponent&&!re.PropertyPath("meta.metaInteraction").get(a)&&
this.updateDerivedMorphs();if(this.master)this.master.onMorphChange(this,a)}},{key:"updateDerivedMorphs",value:function(){var a=this,d=this.world()||$world;delete this._preview;(d?d.withAllSubmorphsSelect(function(f){return f.master&&f.master.uses(a)}):[]).forEach(function(f){f.requestMasterStyling()})}},{key:"onBoundsChanged",value:function(a){re.signal(this,"bounds",a);var d=fa(a.corners),f;try{for(d.s();!(f=d.n()).done;){var k=f.value;re.signal(this,k,a.partNamed(k))}}catch(q){d.e(q)}finally{d.f()}d=
fa(a.sides);var n;try{for(d.s();!(n=d.n()).done;){var p=n.value;re.signal(this,p,a.partNamed(p))}}catch(q){d.e(q)}finally{d.f()}}},{key:"onSubmorphChange",value:function(a,d){var f,k;null===(f=this.master)||void 0===f?void 0:f.onMorphChange(d,a);null===(k=this.layout)||void 0===k?void 0:k.onSubmorphChange(d,a)}},{key:"changes",get:function(){return this.env.changeManager.changesFor(this)}},{key:"applyChange",value:function(a){this.env.changeManager.apply(this,a)}},{key:"addValueChange",value:function(a,
d,f){return this.env.changeManager.addValueChange(this,a,d,f)}},{key:"addMethodCallChangeDoing",value:function(a,d){return this.env.changeManager.addMethodCallChangeDoing(a,this,d)}},{key:"groupChangesWhile",value:function(a,d){return this.env.changeManager.groupChangesWhile(this,a,d)}},{key:"dontRecordChangesWhile",value:function(a){return this.env.changeManager.dontRecordChangesWhile(this,a)}},{key:"recordChangesWhile",value:function(a,d){return this.env.changeManager.recordChangesWhile(a,d)}},
{key:"recordChangesStart",value:function(a){return this.env.changeManager.recordChangesStartForMorph(this,a)}},{key:"recordChangesStop",value:function(a){return this.env.changeManager.recordChangesStopForMorph(this,a)}},{key:"withMetaDo",value:function(a,d){return this.env.changeManager.doWithValueChangeMeta(a,this,d)}},{key:"undoStart",value:function(a){return this.env.undoManager.undoStart(this,a)}},{key:"undoStop",value:function(a){return this.env.undoManager.undoStop(this,a)}},{key:"undoInProgress",
get:function(){return this.env.undoManager.undoInProgress}},{key:"animate",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:n=this._animationQueue.registerAnimation(f);if(this._animationQueue.animationsActive){p.next=4;break}n&&n.finish();return p.abrupt("return",Promise.resolve(this));case 4:if(!n){p.next=8;break}p.next=7;return n.asPromise();case 7:return p.abrupt("return",p.sent);case 8:return p.abrupt("return",
Promise.resolve(this));case 9:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"withAnimationDo",value:function(){var a=Cb(regeneratorRuntime.mark(function n(f,k){var p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return p=this.groupChangesWhile(!1,f),q=p.changes,r.next=3,Promise.all(Object.values(re.arr.groupBy(q,function(u){return u.target.id})).map(function(u){var x=Object.assign({},k),y;u.forEach(function(D){y=
D.target;D.reverseApply();x[D.prop]=D.value});return y&&y.animate(x)}));case 3:case "end":return r.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"isClip",value:function(){return"visible"!==this.clipMode}},{key:"scrollExtent",get:function(){return(this.submorphs.length?this.innerBounds().union(this.submorphBounds()):this.innerBounds()).extent().addPt(this.scrollbarOffset)}},{key:"horizontalScrollbarVisible",get:function(){return this.scrollExtent.x-this.scrollbarOffset.x>
this.extent.x||"scroll"===this.clipMode}},{key:"verticalScrollbarVisible",get:function(){return this.scrollExtent.y-this.scrollbarOffset.y>this.extent.y||"scroll"===this.clipMode}},{key:"scrollBounds",value:function(){var a=this.scroll,d=this.scrollExtent;return new re.Rectangle(a.x,a.y,d.x,d.y)}},{key:"scrollDown",value:function(a){this.scroll=this.scroll.addXY(0,a)}},{key:"scrollUp",value:function(a){this.scrollDown(50*-a)}},{key:"scrollLeft",value:function(a){this.scroll=this.scroll.addXY(a,0)}},
{key:"scrollRight",value:function(a){this.scrollLeft(-a)}},{key:"scrollPageDown",value:function(){this.scrollDown(this.height)}},{key:"scrollPageUp",value:function(){this.scrollUp(this.height)}},{key:"addStyleClass",value:function(a){this.styleClasses=re.arr.uniq(this.styleClasses.concat(a))}},{key:"removeStyleClass",value:function(a){this.styleClasses=this.styleClasses.filter(function(d){return d!==a})}},{key:"adjustOrigin",value:function(a){var d=this.origin,f=this.globalBounds().topLeft();this.origin=
a;this.submorphs.forEach(function(n){return n.position=n.position.subPt(a.subPt(d))});var k=this.globalBounds().topLeft();f=f.subPt(k);this.globalPosition=this.globalPosition.addPt(f)}},{key:"setBounds",value:function(a){this.extent=a.extent();this.position=a.topLeft().addPt(this.origin)}},{key:"innerBounds",value:function(){var a=this.extent;return re.rect(0,0,a.x,a.y)}},{key:"relativeBounds",value:function(a){a=a||this.world();var d=this.origin.negated().extent(this.extent);d=a?this.transformRectToMorph(a,
d):this.getGlobalTransform().transformRectToRect(d);this.isClip()||this.submorphs.forEach(function(f){d=d.union(f.relativeBounds(a))});return d}},{key:"bounds",value:function(){return this.relativeBounds(this.owner)}},{key:"relativeSubmorphBounds",value:function(){var a=this.innerBounds();return this.submorphs.map(function(d){d=d.bounds();return re.rect(d.x/a.width,d.y/a.height,d.width/a.width,d.height/a.height)})}},{key:"globalBounds",value:function(){return this.relativeBounds(this.world())}},{key:"submorphBounds",
value:function(){var a=this.submorphs.filter(0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){return!0});return 1>a.length?this.innerBounds():a.map(function(d){return d.bounds()}).reduce(function(d,f){return d.union(f)})}},{key:"fitToSubmorphs",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:re.Rectangle.inset(0),d=this.submorphs;if(d.length){d=d.reduce(function(n,p){return n.union(p.bounds())},d[0].bounds());var f=d.top()-a.top(),k=d.left()-a.left();
this.moveBy(re.pt(k,f));re.arr.invoke(this.submorphs,"moveBy",re.pt(-k,-f));this.extent=re.pt(d.width+a.left()+a.right(),d.height+a.top()+a.bottom())}}},{key:"align",value:function(a,d){return this.moveBy(d.subPt(a))}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);return this}},{key:"rotateBy",value:function(a){this.rotation+=a}},{key:"resizeBy",value:function(a){this.extent=this.extent.addPt(a)}},{key:"snap",value:function(a){this.position=this.position.roundTo(a||1)}},{key:"isEpiMorph",
get:function(){return this.getProperty("epiMorph")&&!this.isComponent}},{key:"isUsedAsEpiMorph",value:function(){for(var a=this;a;){if(a.isEpiMorph)return!0;a=a.owner}return!1}},{key:"replaceWith",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;if(this===a||!a)return a;if(this===a.owner)return a.replaceWith(this),a;var k=this.owner,n=this.submorphs,p=this.getTransform().copy(),q="number"===typeof d?d:k?k.submorphs.indexOf(this):-1,r=a.owner,u=re.arr.without(a.submorphs,
this),x=a.getTransform().copy(),y=r?r.submorphs.indexOf(a):-1;k&&this.remove();r&&a.remove();f&&(this.submorphs=[],a.submorphs=[]);k===a?(r&&r.addMorphAt(this,y),f&&(this.submorphs=u.slice(0,q).concat(a).concat(u.slice(q)),a.submorphs=n)):(k&&k.addMorphAt(a,q),r&&r.addMorphAt(this,y),f&&(a.submorphs=n,this.submorphs=u));a.setTransform(p);this.setTransform(x);return a}},{key:"addMorphAt",value:function(a,d){var f=this;if(!a||"object"!==ad(a))throw Error("".concat(a," cannot be added as a submorph to ").concat(this));
if(a.isMorph){if(a.isAncestorOf(this))return this.env.world.logError(Error("addMorph: Circular relationships between morphs not allowed\ntried to add ".concat(a," to ").concat(this))),null;if(a===this)return this.env.world.logError(Error("addMorph: Trying to add itself as a submorph: ".concat(this))),null}a.isMorph||(a=re.morph(a));var k=this.submorphs.indexOf(a);if(!(-1<k&&k===d))return this.requestMasterStyling(),this.addMethodCallChangeDoing({target:this,selector:"addMorphAt",args:[a,d],undo:{target:this,
selector:"removeMorph",args:[a]}},function(){var n=a.owner,p=f.submorphs;if(n&&n!==f){var q=a.transformForNewOwner(f);a.remove()}a._env!==f._env&&(a._env=f._env);d=Math.min(p.length,Math.max(0,d));-1<k&&(p.splice(k,1),k<d&&d--);p.splice(d,0,a);a._owner=f;a._cachedPaths={};q&&a.setTransform(q);a.requestStyling();f._morphicState.submorphs=p;f._submorphOrderChanged=!0;f.makeDirty();a.resumeSteppingAll();a.withAllSubmorphsDo(function(r){return r.onOwnerChanged(f)});f.world()&&a._requestMasterStyling&&
(a.master&&a.master.applyIfNeeded(!0),a._requestMasterStyling=!1)}),a}},{key:"addMorph",value:function(a,d){var f=this.submorphs;d=d?f.indexOf(d):-1;return this.addMorphAt(a,-1===d?f.length:d)}},{key:"addMorphBack",value:function(a){return this.addMorph(a,a===this.submorphs[0]?this.submorphs[1]:this.submorphs[0])}},{key:"removeMorph",value:function(a){var d=this.submorphs.indexOf(a);-1!==d&&((this.getProperty("submorphs")||[]).splice(d,1),this.addMethodCallChangeDoing({target:this,selector:"removeMorph",
args:[a],undo:{target:this,selector:"addMorphAt",args:[a,d]}},function(){a.suspendSteppingAll();a._owner=null}),this._pathDependants=re.arr.withoutAll(this._pathDependants,a._pathDependants))}},{key:"remove",value:function(){var a=this;re.signal(this,"onRemove");this.ownerChain().forEach(function(d){d._stylingVisitor&&d._stylingVisitor.deleteFromCache(a)});this.owner&&this.owner.removeMorph(this);this._cachedPaths={};this._pathDependants.forEach(function(d){return d._cachedPaths={}});this._pathDependants=
[];this.withAllSubmorphsDo(function(d){return d.onOwnerChanged(null)});return this}},{key:"abandon",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;re.signal(this,"onAbandon");$world.isIDEWorld&&$world.emptyCommentsFor(this);a&&this.remove();this.submorphs.forEach(function(d){return d.abandon(!1)})}},{key:"onOwnerChanged",value:function(a){}},{key:"fadeOut",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n=arguments;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=
p.next){case 0:return k=0<n.length&&void 0!==n[0]?n[0]:1E3,p.next=3,this.animate({opacity:0,duration:k,easing:re.easings.outQuad});case 3:this.remove(),this.opacity=1;case 5:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"fadeIn",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n=arguments;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return k=0<n.length&&void 0!==n[0]?n[0]:1E3,this.opacity=0,
this.animate({opacity:1,duration:k}),p.abrupt("return",this);case 4:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"fadeIntoWorld",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,u=arguments;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return k=0<u.length&&void 0!==u[0]?u[0]:$world.visibleBounds().center(),n=1<u.length&&void 0!==u[1]?u[1]:200,p=new re.Morph({opacity:0,scale:0,epiMorph:!0,
hasFixedPosition:!0,fill:re.Color.transparent}),q=this.env.world,p.openInWorld(),p.addMorph(this),this.position=p.extent.scaleBy(.5),p.center=k,p.scale=.8,x.next=11,p.animate({opacity:1,scale:1,duration:n});case 11:return r=this.globalBounds(),q.addMorph(this),this.top=r.top(),this.left=r.left(),p.remove(),x.abrupt("return",this);case 17:case "end":return x.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"removeAllMorphs",value:function(){this.submorphs=[]}},{key:"bringToFront",
value:function(){this.owner&&re.arr.last(this.owner.submorphs)!==this&&this.owner.addMorph(this);return this}},{key:"owner",get:function(){return this._owner}},{key:"withAllSubmorphsDetect",value:function(a){if(a(this))return this;var d=fa(this.submorphs),f;try{for(d.s();!(f=d.n()).done;){var k=f.value.withAllSubmorphsDetect(a);if(k)return k}}catch(n){d.e(n)}finally{d.f()}}},{key:"withAllSubmorphsDoExcluding",value:function(a,d){var f=[a(this)];if(d(this))return f;var k=fa(this.submorphs),n;try{for(k.s();!(n=
k.n()).done;)re.arr.pushAll(f,n.value.withAllSubmorphsDoExcluding(a,d))}catch(p){k.e(p)}finally{k.f()}return f}},{key:"withAllSubmorphsDo",value:function(a){var d=[a(this)],f=fa(this.submorphs),k;try{for(f.s();!(k=f.n()).done;)re.arr.pushAll(d,k.value.withAllSubmorphsDo(a))}catch(n){f.e(n)}finally{f.f()}return d}},{key:"withAllSubmorphsSelect",value:function(a){var d=[];this.withAllSubmorphsDo(function(f){return a(f)&&d.push(f)});return d}},{key:"ownerChain",value:function(){return this.owner?[this.owner].concat(this.owner.ownerChain()):
[]}},{key:"world",value:function(){return this.owner?this.owner.world():null}},{key:"getWindow",value:function(){return this.isWindow?this:this.ownerChain().find(function(a){return a.isWindow})}},{key:"openInWorldNear",value:function(a,d){var f=this;d=d||this.world()||this.env.world;if(!d)return this;this.master&&(this.opacity=0,this.master.whenApplied().then(Cb(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,f.whenRendered();
case 2:f.opacity=1;case 3:case "end":return p.stop()}},n)}))));this.center=a;this.setBounds(d.visibleBoundsExcludingTopBar().translateForInclusion(this.bounds()));return this.openInWorld(this.position)}},{key:"openInWorldNearHand",value:function(a){a=a||this.world()||this.env.world;var d=a.firstHand?a.firstHand.position.addPt(this.hasFixedPosition?re.pt(0,0):a.scroll):re.pt(0,0);return a?this.openInWorldNear(d):void 0}},{key:"openInWorld",value:function(a,d){d=d||this.world()||this.env.world;if(!d)return console.warn("Cannot open morph ".concat(this,
", world morph not found;")),this;a?this.position=a:(this.center=this.hasFixedPosition?d.visibleBounds().extent().scaleBy(.5,.5):d.visibleBounds().center(),this.snap());d.addMorph(this);return this}},{key:"openInHand",value:function(a){a||(a=(this.world()||this.env.world).firstHand);a.grab(this);this.center=re.pt(0,0)}},{key:"openInWindow",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{title:this.name,name:"window for "+this.name,world:null};return(a.world||this.world()||
this.env.world).openInWindow(this,re.obj.dissoc(a,["world"]))}},{key:"isAncestorOf",value:function(a){for(a=a.owner;a;){if(a===this)return!0;a=a.owner}return!1}},{key:"morphsContainingPoint",value:function(a,d){d||(d=[]);if(!this.fullContainsWorldPoint(a))return d;for(var f=this.submorphs.length-1;0<=f;f--)this.submorphs[f].morphsContainingPoint(a,d);this.innerBoundsContainsWorldPoint(a)&&d.push(this);return d}},{key:"morphBeneath",value:function(a){var d=this.world()||this.owner;if(!d)return null;
a=d.morphsContainingPoint(a);d=a.indexOf(this);return a[d+1]}},{key:"transformTillMorph",value:function(a){if("down"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"up"))return a.transformTillMorph(this,"up").inverse();for(var d=new re.Transform,f=this;f&&f!==a;f=f.owner){var k=f,n=k.origin;k=k.scroll;0===n.x&&0===n.y||d.preConcatenate(new re.Transform(f.origin));d.preConcatenate(f.getTransform());f!==this&&(0===k.x&&0===k.y||!f.owner||d.preConcatenate(new re.Transform(k.negated())));f.hasFixedPosition&&
f.owner&&d.preConcatenate(new re.Transform(f.owner.scroll))}return d}},{key:"localize",value:function(a){var d=this.world(),f=a.x,k=a.y;return d?d.transformPointToMorph(this,re.pt(f,k)):a}},{key:"worldPoint",value:function(a){var d=this.world(),f=a.x,k=a.y;return d?this.transformPointToMorph(d,re.pt(f,k)):a.addPt(this.position)}},{key:"transformToMorph",value:function(a){var d=this.getGlobalTransform(),f=a.getGlobalTransform().inverse();d.preConcatenate(f);f=a.scroll;0===f.x&&0===f.y||!a.owner||d.preConcatenate(new re.Transform(f));
return d}},{key:"transformPointToMorph",value:function(a,d){var f=this.pathToMorph(a),k=!!f.find(function(u){u=Wb(u,2);u[0];u=u[1];return u.hasFixedPosition&&u.owner&&u.owner.isWorld});k&&this.isWorld&&(d.x=d.x+this.position.x-this.scroll.x,d.y=d.y+this.position.y-this.scroll.y);f=fa(f);var n;try{for(f.s();!(n=f.n()).done;){var p=Wb(n.value,2),q=p[0],r=p[1];this!==r&&"up"===q&&(d.x-=r.scroll.x,d.y-=r.scroll.y,r.hasFixedPosition&&r.owner&&r.owner.owner&&(d.x+=r.owner.scroll.x,d.y+=r.owner.scroll.y));
this.applyTransform(q,r,d);this!==r&&"down"===q&&(d.x+=r.scroll.x,d.y+=r.scroll.y,r.hasFixedPosition&&r.owner&&r.owner.owner&&(d.x-=r.owner.scroll.x,d.y-=r.owner.scroll.y))}}catch(u){f.e(u)}finally{f.f()}k&&a.isWorld&&(d.x=d.x-a.position.x+a.scroll.x,d.y=d.y-a.position.y+a.scroll.y);return d}},{key:"transformRectToMorph",value:function(a,d){var f=this,k,n,p;[k=d.topLeft(),n=d.topRight(),p=d.bottomRight(),d=d.bottomLeft()].forEach(function(q){return f.transformPointToMorph(a,q)});return re.Rectangle.unionPts([k,
n,p,d])}},{key:"applyTransform",value:function(a,d,f){"up"===a?(f.x+=d.origin.x,f.y+=d.origin.y,f.matrixTransform(d.getTransform(),f)):(f.matrixTransform(d.getInverseTransform(),f),f.x-=d.origin.x,f.y-=d.origin.y)}},{key:"_addPathDependant",value:function(a){this._pathDependants.includes(a)||this._pathDependants.push(a)}},{key:"pathToMorph",value:function(a){var d;if(d=this._cachedPaths[a.id])return d;d=[];var f=this.closestCommonAncestor(a)||this,k=this;for(f._addPathDependant(this);k&&k!==f;)d.push(["up",
k]),k._addPathDependant(this),k=k.owner;k=a;for(var n=d.length;k&&k!==f;)re.arr.pushAt(d,["down",k],n),k._addPathDependant(this),k=k.owner;return this._cachedPaths[a.id]=d}},{key:"closestCommonAncestor",value:function(a){return re.arr.intersect([this].concat(db(this.ownerChain())),[a].concat(db(a.ownerChain())))[0]}},{key:"transformForNewOwner",value:function(a){return new re.Transform(this.transformToMorph(a))}},{key:"localizePointFrom",value:function(a,d){var f=a.x;a=a.y;try{return d.transformPointToMorph(this,
re.pt(f,a))}catch(k){return console.warn("problem "+k+" in localizePointFrom"),re.pt}}},{key:"getGlobalTransform",value:function(){return this.transformTillMorph(this.world())}},{key:"globalPosition",get:function(){return this.worldPoint(re.pt(0,0))}},{key:"globalPosition",set:function(a){return this.position=this.owner?this.owner.localize(a):a}},{key:"ensureToBeInWorldBounds",value:function(){var a=this.world();if(a){var d=this.globalBounds();a=a.innerBounds().translateForInclusion(d).topLeft().subPt(d.topLeft());
this.moveBy(a)}}},{key:"getTransform",value:function(){this._transform||this.updateTransform();return this._transform}},{key:"getInverseTransform",value:function(){this._invTransform||this.updateTransform();return this._invTransform}},{key:"updateTransform",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=a.position,f=a.scale,k=a.origin,n=a.rotation;a=this._transform||new re.Transform;var p=this._invTransform||new re.Transform;d=d||this.position;k=k||this.origin;
f=f||this.scale;n=n||this.rotation;a.a=f*Math.cos(n);a.b=f*Math.sin(n);a.c=f*-Math.sin(n);a.d=f*Math.cos(n);a.e=a.a*-k.x+a.c*-k.y+d.x;a.f=a.b*-k.x+a.d*-k.y+d.y;d=a.a;f=a.b;k=a.c;n=a.d;var q=a.e,r=a.f,u=1/(d*n-k*f);p.a=n*u;p.b=-f*u;p.c=-k*u;p.d=d*u;p.e=(k*r-q*n)*u;p.f=-(d*r-f*q)*u;this._transform=a;this._invTransform=p}},{key:"setTransform",value:function(a){this.position=a.getTranslation();this.rotation=re.num.toRadians(a.getRotation());this.scale=a.getScalePoint().x;this.updateTransform(this)}},
{key:"fullContainsWorldPoint",value:function(a){return this.fullContainsPoint(null===this.owner?a:this.owner.localize(a))}},{key:"fullContainsPoint",value:function(a){return this.bounds().containsPoint(a)}},{key:"innerBoundsContainsWorldPoint",value:function(a){return this.innerBoundsContainsPoint(this.localize(a))}},{key:"innerBoundsContainsPoint",value:function(a){return this.innerBounds().containsPoint(a.addPt(this.origin).subPt(this.scroll))}},{key:"get",value:function(a){if(!a)return null;try{return this.getSubmorphNamed(a)||
this.getNameTest(this,a)&&this||this.getOwnerOrOwnerSubmorphNamed(a)}catch(d){if(d.constructor===RangeError&&"Maximum call stack size exceeded"===d.message)throw Error("'get' failed due to a stack overflow. The most\nlikely source of the problem is using 'get' as part of\ntoString, because 'get' calls 'getOwnerOrOwnerSubmorphNamed', which\ncalls 'toString' on this. Try using 'getSubmorphNamed' instead,\nwhich only searches in this' children.\nOriginal error:\n"+d.stack);throw d;}}},{key:"getNameTest",
value:function(a,d){if(re.obj.isRegExp(d)){if(d.test(a.name)||d.test(String(a)))return!0}else if(a.name===d||String(a)===d)return!0;return!1}},{key:"getAllNamed",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!this._morphicState||!this.submorphs.length)return d;for(var f=0;f<this.submorphs.length;f++){var k=this.submorphs[f];this.getNameTest(k,a)&&d.push(k)}for(f=0;f<this.submorphs.length;f++)this.submorphs[f].getAllNamed(a,d);return d}},{key:"getSubmorphNamed",
value:function(a){if(!this._morphicState||!this.submorphs.length)return null;for(var d=0;d<this.submorphs.length;d++){var f=this.submorphs[d];if(this.getNameTest(f,a))return f}for(d=0;d<this.submorphs.length;d++)if(f=this.submorphs[d].getSubmorphNamed(a))return f;return null}},{key:"getSubmorphsByStyleClassName",value:function(a){return this.withAllSubmorphsSelect(function(d){return d.styleClasses.includes(a)})}},{key:"getOwnerNamed",value:function(a){return this.ownerChain().find(function(d){return d.name===
a})}},{key:"getOwnerOrOwnerSubmorphNamed",value:function(a){var d=this.owner;if(!d)return null;if(d.name===a)return d;for(var f=0;f<d.submorphs.length;f++){var k=d.submorphs[f];if(k!==this&&(this.getNameTest(k,a)||(k=k.getSubmorphNamed(a))))return k}return this.owner.getOwnerOrOwnerSubmorphNamed(a)}},{key:"getMorphWithId",value:function(a){return this.withAllSubmorphsDetect(function(d){return a===d.id})}},{key:"setMirrored",value:function(a){a?this.removeStyleClass("hidden-in-mirror"):this.addStyleClass("hidden-in-mirror")}},
{key:"isMirrored",value:function(){return 0<=this.styleClasses.indexOf("hidden-in-mirror")?!0:!1}},{key:"dragTriggerDistance",get:function(){return 0}},{key:"onHaloMouseDown",value:function(a){}},{key:"onMouseDown",value:function(a){if(this===a.targetMorph&&(a.state.clickedMorph=this,1===a.state.prevClick.clickCount&&200>=Date.now()-a.state.prevClick.clickedAtTime)){this.onDoubleMouseDown(a);return}this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onDoubleMouseDown",value:function(a){}},
{key:"onMouseUp",value:function(a){a.state.clickedMorph=null;this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseMove",value:function(a){}},{key:"onLongClick",value:function(a){}},{key:"addKeyBindings",value:function(a){var d=this;this.addMethodCallChangeDoing({target:this,selector:"addKeyBindings",args:[a],undo:null},function(){var f;d._keybindings||(d._keybindings=[]);d._cachedKeyhandlers=null;(f=d._keybindings).unshift.apply(f,db(a))})}},{key:"keybindings",get:function(){return this._keybindings||
[]}},{key:"keybindings",set:function(a){this._cachedKeyhandlers=null;return this._keybindings=a}},{key:"keyhandlers",get:function(){return this._cachedKeyhandlers||(this._cachedKeyhandlers=[re.KeyHandler.withBindings(this.keybindings)])}},{key:"keyCommandMap",get:function(){var a=this.keyhandlers[0].platform;return this.keybindings.reduce(function(d,f){var k=re.findKeysForPlatform(f.keys,a),n=f.command,p="string"===typeof n?n:n.command||n.name;return"string"!==typeof k?d:k.split("|").reduce(function(q,
r){return Object.assign(q,dd({},r,{name:p,command:n,prettyKeys:re.KeyHandler.prettyCombo(r)}))},d)},{})}},{key:"keysForCommand",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,f=this.keyCommandMap,k=Object.keys(f).find(function(n){return f[n].name===a});return k&&d?f[k].prettyKeys:k}},{key:"simulateKeys",value:function(a){return re.KeyHandler.simulateKeys(this,a)}},{key:"onKeyDown",value:function(a){re.KeyHandler.invokeKeyHandlers(this,a,!1)&&a.stop()}},{key:"onKeyUp",
value:function(a){}},{key:"onContextMenu",value:function(a){var d=this;a.targetMorph===this&&(lively.FreezerRuntime||a.stop(),Promise.resolve(this.menuItems(a)).then(function(f){return d.openMenu(f,a)})["catch"](function(f){return $world.logError(f)}))}},{key:"openMenu",value:function(a,d){var f=this.world();return a&&a.length&&f?f.openWorldMenu(d,a):null}},{key:"menuItems",value:function(a){return $world.defaultMenuItems(this,a)}},{key:"onCut",value:function(a){}},{key:"onCopy",value:function(a){}},
{key:"onPaste",value:function(a){}},{key:"onDragStart",value:function(a){this.undoStart("drag-move");a=a.state;this.position=a.dragStartMorphPosition.addPt(a.absDragDelta)}},{key:"onDragEnd",value:function(a){this.undoStop("drag-move");$world.execCommand("remove snap to guides",this)}},{key:"onDrag",value:function(a){var d=a.state;this.position=d.dragStartMorphPosition.addPt(d.absDragDelta);$world.execCommand("show and snap to guides",{target:this,showGuides:a.isCtrlDown(),snap:a.isCtrlDown()})}},
{key:"onGrab",value:function(a){if(a.isShiftDown()){var d=this.copy();d.position=this.transformPointToMorph(a.hand,re.pt(0,0));a.hand.grab(d)}else a.hand.grab(this)}},{key:"onDrop",value:function(a){a.hand.dropMorphsOn(this)}},{key:"doNotAcceptDropsForThisAndSubmorphs",value:function(){this.withAllSubmorphsDo(function(a){return a.acceptsDrops=!1})}},{key:"acceptDropsForThisAndSubmorphs",value:function(){this.withAllSubmorphsDo(function(a){return a.acceptsDrops=!0})}},{key:"wantsToBeDroppedOn",value:function(a){return!0}},
{key:"onDropHoverIn",value:function(a){}},{key:"onDropHoverUpdate",value:function(a){}},{key:"onDropHoverOut",value:function(a){}},{key:"onBeingDroppedOn",value:function(a,d){d.addMorph(this)}},{key:"onHoverIn",value:function(a){var d;(null===(d=this.master)||void 0===d?0:d.respondsToHover)&&this.requestMasterStyling()}},{key:"onHoverOut",value:function(a){var d;(null===(d=this.master)||void 0===d?0:d.respondsToHover)&&this.requestMasterStyling()}},{key:"onScroll",value:function(a){}},{key:"onMouseWheel",
value:function(a){}},{key:"onNativeDrop",value:function(a){}},{key:"onNativeDragleave",value:function(a){}},{key:"onNativeDragenter",value:function(a){}},{key:"onNativeDragover",value:function(a){}},{key:"onNativeDragend",value:function(a){}},{key:"onNativeDragstart",value:function(a){}},{key:"onNativeDrag",value:function(a){}},{key:"focus",value:function(){var a=this.env.eventDispatcher;a&&a.focusMorph(this)}},{key:"onWindowActivated",value:function(){}},{key:"onWindowDeactivated",value:function(){}},
{key:"onFocus",value:function(a){}},{key:"onBlur",value:function(a){}},{key:"isFocused",value:function(){var a=this.env.eventDispatcher;return a&&a.isMorphFocused(this)}},{key:"exportToJSON",value:function(a){return re.serializeSpec(this,a)}},{key:"initFromJSON",value:function(a){var d=this;this._env=a.env||a._env||re.MorphicEnv["default"]();this._rev=0;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=a._id||re.newMorphId(re.getClassName(this));this._animationQueue=
new re.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this.dontRecordChangesWhile(function(){d.initializeProperties();re.deserializeSpec(a,function(f){return re.morph(f)},d)});return this}},{key:"copyViaJSON",value:function(){var a=this.exportToJSON();re.tree.prewalk(a,function(d){return d._id=re.newMorphId(d.type)},function(d){return d.submorphs});a.name=a.name.replace(/copy( [0-9]+)?$/,function(d,f){return"copy ".concat(f&&f.trim()?Number(f)+1:"1")});return re.morph({type:a.type}).initFromJSON(a)}},
{key:"canBeCopied",value:function(){return!0}},{key:"copy",value:function(){return re.copyMorph(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1)}},{key:"interactivelyPublish",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return k=this.world()||this.env.world,r.prev=1,r.next=4,Promise.resolve().then(function(){return qT});case 4:return n=r.sent,p=n.interactivelySavePart,r.next=
8,p(this,{notifications:!1,loadingIndicator:!0});case 8:q=r.sent;k.setStatusMessage(q?"Published ".concat(this," as ").concat(q.name):"Failed to publish part ".concat(this),q?re.Color.green:re.Color.red);r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](1),"canceled"!==r.t0&&k.showError(r.t0);case 15:case "end":return r.stop()}},f,this,[[1,12]])}));return function(){return a.apply(this,arguments)}}()},{key:"makeDirty",value:function(a){this._dirty=!0;this.owner&&this.owner.makeDirty()}},{key:"needsRerender",
value:function(){return this._dirty}},{key:"aboutToRender",value:function(a){this._dirty=!1;this._rendering=!0}},{key:"onAfterRender",value:function(a){}},{key:"whenRendered",value:function(){return this.env.whenRendered(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:50).then(function(){return!0})["catch"](function(){return!1})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderMorph(this)}},
{key:"applyLayoutIfNeeded",value:function(){if(this._dirty){for(var a=0;a<this.submorphs.length;a++)this.submorphs[a].applyLayoutIfNeeded();this.layout&&!this.layout.manualUpdate&&this.layout.onContainerRender()}}},{key:"requestMasterStyling",value:function(){var a=this;this._rendering||(this.master&&this.master._hasUnresolvedMaster&&(this.master._capturedExtents=new WeakMap,this.withAllSubmorphsDo(function(d){return a.master._capturedExtents.set(d,d.extent)})),this.master&&(this._requestMasterStyling=
!0,this.makeDirty()))}},{key:"requestStyling",value:function(){this.withAllSubmorphsDo(function(a){a._wantsStyling=!0;a.makeDirty()})}},{key:"borderOptions",get:function(){return"none hidden dotted dashed solid double groove ridge inset outset".split(" ")}},{key:"renderAsRoot",value:function(a){var d=this;this.dontRecordChangesWhile(function(){d.applyLayoutIfNeeded()});return re.renderRootMorph(this,a)}},{key:"renderPreview",value:function(){return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:
this.env.renderer).renderPreview(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"startStepping",value:function(){var a=Array.from(arguments),d="number"===typeof a[0]?a.shift():null,f=a.shift();a=new re.TargetScript(this,f,a);this.removeEqualScripts(a);this._tickingScripts.push(a);a.startTicking(d);return a}},{key:"tickingScripts",get:function(){return this._tickingScripts}},{key:"stopStepping",value:function(){re.arr.invoke(this._tickingScripts,"stop");this._tickingScripts.length=
[]}},{key:"stopSteppingScriptNamed",value:function(a){var d=this._tickingScripts.filter(function(f){return f.selector===a});this.stopScripts(d)}},{key:"stopScripts",value:function(a){re.arr.invoke(a,"stop");this._tickingScripts=re.arr.withoutAll(this._tickingScripts,a)}},{key:"suspendStepping",value:function(){this._tickingScripts&&re.arr.invoke(this._tickingScripts,"suspend")}},{key:"suspendSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return a.suspendStepping()})}},{key:"resumeStepping",
value:function(){re.arr.invoke(this._tickingScripts,"resume")}},{key:"resumeSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return re.arr.invoke(a._tickingScripts,"resume")})}},{key:"removeEqualScripts",value:function(a){this.stopScripts(this._tickingScripts.filter(function(d){return d.equals(a)}))}},{key:"comments",get:function(){if(!$world.isIDEWorld)return[];var a=$world.morphCommentMap;return a.has(this)?a.get(this):[]}},{key:"commands",get:function(){return this._commands||
[]}},{key:"commands",set:function(a){this._commands&&this.removeCommands(this._commands);this.addCommands(a)}},{key:"commandsIncludingOwners",get:function(){return[this].concat(this.ownerChain()).flatMap(function(a){return re.arr.sortByKey(a.commands,"name").map(function(d){return{target:a,command:d}})})}},{key:"addCommands",value:function(a){var d=this;this.addMethodCallChangeDoing({target:this,selector:"addCommands",args:[a],undo:{target:this,selector:"removeCommands",args:[a]}},function(){d.removeCommands(a);
d._commands=(d._commands||[]).concat(a)})}},{key:"removeCommands",value:function(a){var d=this;this.addMethodCallChangeDoing({target:this,selector:"removeCommands",args:[a],undo:{target:this,selector:"addCommands",args:[a]}},function(){var f=a.map(function(n){return"string"===typeof n?n:n.name}),k=(d._commands||[]).filter(function(n){return!f.includes(n.name)});k.length?d._commands=k:delete d._commands})}},{key:"commandHandler",get:function(){return this._commandHandler||re.defaultCommandHandler}},
{key:"lookupCommand",value:function(a){return(a=this.commandHandler.lookupCommand(a,this))&&a.command?a:null}},{key:"execCommand",value:function(a,d,f,k){return this.commandHandler.exec(a,this,d,f,k)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Morph"}},{key:"propertySettings",get:function(){return{defaultGetter:function(a){return this.getProperty(a)},defaultSetter:function(a,d){this.setProperty(a,d)},valueStoreProperty:"_morphicState"}}},{key:"properties",get:function(){return Object.assign({name:{group:"core",
initialize:function(a){a||(a=re.getClassName(this),a=re.string.findArticle(a)+a);this.name=a}},isComponent:{group:"core",defaultValue:!1,after:["master"],set:function(a){this.setProperty("isComponent",a);a&&(this.master||delete this._parametrizedProps)}},master:{before:["metadata"],after:["clipMode"],group:"core",set:function(a){var d,f,k;a=a?re.PolicyApplicator["for"](this,a):!1===a?!1:null;(null===(d=this.master)||void 0===d?0:d.isPolicyApplicator)&&(null===(f=this.master)||void 0===f?0:null===
(k=f.parent[Symbol["for"]("lively-module-meta")])||void 0===k?0:k.path.length)?this.master.spec.master=a:(this.setProperty("master",a),(null===a||void 0===a?0:a.isPolicyApplicator)&&a.attach(this));this.master&&this.requestMasterStyling()}},viewModel:{after:["submorphs"],set:function(a){if(this.viewModel&&this.viewModel!==a)this.viewModel.onDeactivate();this.setProperty("viewModel",a)}},renderOnGPU:{group:"core",defaultValue:!1},draggable:{group:"interaction",isStyleProp:!0,defaultValue:!1},grabbable:{group:"interaction",
isStyleProp:!0,defaultValue:!1,set:function(a){a&&!this.draggable&&(this.draggable=!0);this.setProperty("grabbable",a)}},acceptsDrops:{group:"interaction",isStyleProp:!0,defaultValue:!0},grayscale:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,max:1,isFloat:!0},blur:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,isFloat:!0},dropShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null,set:function(a){a&&!a.isShadowObject&&(a=new re.ShadowObject(a),
a.morph=this);this.setProperty("dropShadow",a)}},tooltip:{group:"core",defaultValue:null},focusable:{group:"interaction",defaultValue:!0},nativeCursor:{group:"interaction",type:"Enum",values:"auto default none context-menu help pointer progress wait cell crosshair text vertical-text alias copy move no-drop not-allowed e-resize n-resize ne-resize nw-resize s-resize se-resize sw-resize w-resize ew-resize ns-resize nesw-resize nwse-resize col-resize row-resize all-scroll zoom-in zoom-out grab grabbing".split(" "),
isStyleProp:!0,defaultValue:"auto"},halosEnabled:{group:"interaction",isStyleProp:!0,defaultValue:!!re.config.halosEnabled},reactsToPointer:{group:"interaction",isStyleProp:!0,defaultValue:!0},origin:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:re.pt(0,0)},position:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:re.pt(0,0),get:function(){this._askLayoutForBounds&&this.owner&&this.owner.layout&&(this._askLayoutForBounds=!1,this.owner.layout.updateBoundsFor(this));return this.getProperty("position")}},
extent:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:re.pt(10,10),get:function(){this._askLayoutForBounds&&this.owner&&this.owner.layout&&(this._askLayoutForBounds=!1,this.owner.layout.updateBoundsFor(this));return this.getProperty("extent")},set:function(a){var d=this.extent;this.setProperty("extent",a);this.origin.equals(re.pt(0,0))||(a=re.pt(a.x/d.x,a.y/d.y),this.adjustOrigin(this.origin.scaleByPt(a)))}},width:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.x},
set:function(a){return this.extent=re.pt(a,this.extent.y)}},height:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.y},set:function(a){return this.extent=re.pt(this.extent.x,a)}},left:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().left()},set:function(a){return this.moveBy(re.pt(a-this.left),0)}},right:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().right()},
set:function(a){return this.moveBy(re.pt(a-this.right),0)}},top:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().top()},set:function(a){return this.moveBy(re.pt(0,a-this.top))}},bottom:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottom()},set:function(a){return this.moveBy(re.pt(0,a-this.bottom))}},center:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().center()},
set:function(a){return this.align(this.center,a)}},topLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topLeft()},set:function(a){return this.align(this.topLeft,a)}},topRight:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topRight()},set:function(a){return this.align(this.topRight,a)}},bottomRight:{group:"geometry",derived:!0,after:["extent","layout"],get:function(){return this.bounds().bottomRight()},
set:function(a){return this.align(this.bottomRight,a)}},bottomLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomLeft()},set:function(a){return this.align(this.bottomLeft,a)}},bottomCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomCenter()},set:function(a){return this.align(this.bottomCenter,a)}},topCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],
get:function(){return this.bounds().topCenter()},set:function(a){return this.align(this.topCenter,a)}},leftCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().leftCenter()},set:function(a){return this.align(this.leftCenter,a)}},rightCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().rightCenter()},set:function(a){return this.align(this.rightCenter,a)}},rotation:{group:"geometry",type:"Number",isFloat:!0,
isStyleProp:!0,defaultValue:0},flipped:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},tilted:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},perspective:{group:"geometry",type:"Number",isStyleProp:!0,defaultValue:0,min:0},scale:{group:"geometry",type:"Number",min:0,isFloat:!0,isStyleProp:!0,defaultValue:1},hasFixedPosition:{group:"geometry",doc:"When morph is submorph of world hasFixedPosition == true will keep the morph at the same position relative to top left of the browser window. This means, when the world is scrolled, the morph keeps its place.",
defaultValue:!1},opacity:{group:"styling",type:"Number",isFloat:!0,min:0,max:1,isStyleProp:!0,defaultValue:1},fill:{group:"styling",type:"ColorGradient",isStyleProp:!0,defaultValue:re.Color.white},visible:{group:"styling",isStyleProp:!0,defaultValue:!0,set:function(a){a||this.makeDirty();this.setProperty("visible",a)}},submorphs:{group:"core",defaultValue:[],after:["isLayoutable","origin","position","rotation","scale"],get:function(){return(this.getProperty("submorphs")||[]).concat()},set:function(a){var d=
this,f=this.layout,k=f&&f.isEnabled();k&&f.disable();this.submorphs.forEach(function(n){return a.includes(n)||n.remove()});a.forEach(function(n,p){return d.submorphs[p]!==n&&d.addMorph(n,d.submorphs[p])});k&&f.enable()}},clipMode:{group:"styling",type:"Enum",values:["visible","hidden","scroll","auto"],isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.isClip()||(this.scroll=re.pt(0,0))}},hideScrollbars:{group:"styling",type:"Boolean",isStyleProp:!0,defaultValue:!1},
scroll:{group:"geometry",defaultValue:re.pt(0,0),after:["clipMode","submorphs"],type:"Point",set:function(a){var d=a.x;a=a.y;if(this.isClip()){var f=this.scrollExtent.subPt(this.extent),k=f.y;d=Math.max(0,Math.min(f.x,d));a=Math.max(0,Math.min(k,a));this.setProperty("scroll",re.pt(d,a));this.makeDirty()}}},scrollbarOffset:{group:"styling",defaultValue:re.pt(15,15)},styleClasses:{group:"styling",isStyleProp:!0,defaultValue:["morph"],get:function(){return this._cachedStyleClasses||(this._cachedStyleClasses=
this.constructor.styleClasses.concat(this.getProperty("styleClasses")))},set:function(a){this._cachedStyleClasses=null;this.setProperty("styleClasses",re.arr.withoutAll(a,this.constructor.styleClasses));this.requestStyling()}},layout:{group:"layouting",isStyleProp:!0,type:"Layout",after:["submorphs","extent","origin","position","isLayoutable"],set:function(a){a&&(a.container=this);this.setProperty("layout",a)}},isLayoutable:{group:"layouting",isStyleProp:!0,defaultValue:!0},borderLeft:{group:"styling",
isStyleProp:!0,derived:!0,after:["borderStyleLeft","borderWidthLeft","borderColorLeft"],get:function(){return{style:this.borderStyleLeft,width:this.borderWidthLeft,color:this.borderColorLeft}},set:function(a){"style"in a&&(this.borderStyleLeft=a.style);"width"in a&&(this.borderWidthLeft=a.width);"color"in a&&(this.borderColorLeft=a.color)}},borderRight:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleRight","borderWidthRight","borderColorRight"],get:function(){return{style:this.borderStyleRight,
width:this.borderWidthRight,color:this.borderColorRight}},set:function(a){"style"in a&&(this.borderStyleRight=a.style);"width"in a&&(this.borderWidthRight=a.width);"color"in a&&(this.borderColorRight=a.color)}},borderBottom:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleBottom","borderWidthBottom","borderColorBottom"],get:function(){return{style:this.borderStyleBottom,width:this.borderWidthBottom,color:this.borderColorBottom}},set:function(a){"style"in a&&(this.borderStyleBottom=a.style);
"width"in a&&(this.borderWidthBottom=a.width);"color"in a&&(this.borderColorBottom=a.color)}},borderTop:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleTop","borderWidthTop","borderColorTop"],get:function(){return{style:this.borderStyleTop,width:this.borderWidthTop,color:this.borderColorTop}},set:function(a){"style"in a&&(this.borderStyleTop=a.style);"width"in a&&(this.borderWidthTop=a.width);"color"in a&&(this.borderColorTop=a.color)}},borderWidth:{group:"styling",isStyleProp:!0,type:"Number",
foldable:["top","left","right","bottom"],min:0,defaultValue:{top:0,bottom:0,left:0,right:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderWidth");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){re.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderWidth",a)}}},re.generateUnfolded("borderWidth",void 0,"styling"),{borderRadius:{group:"styling",isStyleProp:!0,type:"Number",min:0,foldable:["topLeft","topRight","bottomRight",
"bottomLeft"],defaultValue:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderRadius");return Object.assign({},a,{valueOf:function(){return a.topLeft}})},set:function(a){a||(a=0);re.obj.isNumber(a)&&(a={topLeft:a,topRight:a,bottomRight:a,bottomLeft:a});this.setProperty("borderRadius",a)}}},re.generateUnfolded("borderRadius",["topLeft","topRight","bottomRight","bottomLeft"],"styling"),{borderStyle:{group:"styling",isStyleProp:!0,
type:"Enum",foldable:["top","left","right","bottom"],values:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),defaultValue:{top:"solid",left:"solid",bottom:"solid",right:"solid",valueOf:function(){return"solid"}},get:function(){var a=this.getProperty("borderStyle");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){re.obj.isString(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderStyle",a)}}},re.generateUnfolded("borderStyle",
void 0,"styling"),{borderColor:{group:"styling",isStyleProp:!0,type:"Color",foldable:["top","left","right","bottom"],defaultValue:{top:re.Color.white,left:re.Color.white,bottom:re.Color.white,right:re.Color.white,valueOf:function(){return re.Color.white}},get:function(){var a=this.getProperty("borderColor");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||(a=re.Color.white);a.isColor&&(a={top:a,left:a,right:a,bottom:a});this.setProperty("borderColor",a?re.obj.extract(a,
["top","left","right","bottom"],function(d,f){return re.obj.isArray(f)?re.Color.fromTuple(f):f}):a)}}},re.generateUnfolded("borderColor",void 0,"styling"),{border:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyle","borderWidth","borderColor","borderRadius"],get:function(){var a=this;return{get style(){return a.borderStyle},set style(d){a.borderStyle=d},get width(){return a.borderWidth},set width(d){a.borderWidth=d},get color(){return a.borderColor},set color(d){a.borderColor=d},get radius(){return a.borderRadius},
set radius(d){a.borderRadius=d}}},set:function(a){"style"in a&&(this.borderStyle=a.style);"width"in a&&(this.borderWidth=a.width);"color"in a&&(this.borderColor=a.color);"radius"in a&&(this.borderRadius=a.radius)}},styleProperties:{group:"styling",derived:!0,readOnly:!0,get:function(){var a=this.propertiesAndPropertySettings(),d=a.properties,f=[];a=fa(a.order);var k;try{for(a.s();!(k=a.n()).done;){var n=k.value;d[n].isStyleProp&&f.push(n)}}catch(p){a.e(p)}finally{a.f()}return f}},style:{group:"styling",
derived:!0,readOnly:!0,get:function(){for(var a=this.styleProperties,d={},f=0;f<a.length;f++){var k=a[f];d[k]=this[k]}return d}},epiMorph:{group:"core",doc:"epi morphs are 'transient' morphs, i.e. meta objects that should not be serialized like halo items, menus, etc.",defaultValue:!1},respondsToVisibleWindow:{group:"interaction",doc:"Morphs will respond to changes to the visible browser window and a call will be made to the morph's relayout function, supplying the event generated",defaultValue:!1},
installedFonts:{doc:"custom fonts can be installed from a respective morph, and are then kept as part of this morph's state in order to be loaded again the next time the it is cold loaded. (i.e. deserialization of a part)",defaultValue:{},set:function(a){var d=re.arr.without(re.obj.keys(this.installedFonts||{}),"_rev"),f=re.arr.without(re.obj.keys(a||{}),"_rev");this.setProperty("installedFonts",a);this.ensureInstalledFonts(d,f)},get:function(){return this.getProperty("installedFonts")||{}}},metadata:{group:"core"}})}},
{key:"styleClasses",get:function(){if(this.hasOwnProperty("_styclassNames"))return this._styleClasses;for(var a=this,d=[];a&&a!==Object;)d.push(a[Symbol["for"]("__LivelyClassName__")]),a=a[Symbol["for"]("lively-instance-superclass")];return this._styleClasses=d}}],c,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:1689,end:87315})}(void 0));re.Morph=gp;re.Morph=gp;var Rx=bd("aC",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),g=c.hasOwnProperty("Ellipse")&&"function"===typeof c.Ellipse?c.Ellipse:c.Ellipse=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),
this._requestMasterStyling=!1);return a.renderEllipse(this)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Ellipse"}},{key:"properties",get:function(){return{isEllipse:{get:function(){return!0}}}}}],c,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:87461,end:87830})}(re.Morph));
re.Ellipse=Rx;re.Ellipse=Rx;var Sx=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),g=c.hasOwnProperty("Triangle")&&"function"===typeof c.Triangle?c.Triangle:c.Triangle=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Ve._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.update()}},{key:"onChange",value:function(a){("extent"===a.prop||"direction"===a.prop||"fill"===a.prop&&a.value)&&this.update();Ve._get(Object.getPrototypeOf(g.prototype),"onChange",this).call(this,a)}},{key:"update",value:function(){var a,d=this.extent,f=d.x;d=d.y;f!==d&&(this.extent=re.pt(Math.max(f,d),Math.max(f,d)));this.origin=re.pt(f/2,d/2);var k=this.triangleFill=this.fill||this.triangleFill;this.fill=null;f={width:f/2,style:"solid",
color:k};d={width:d/2,style:"solid",color:re.Color.transparent};switch(this.direction){case "down":var n="borderLeft";var p="borderRight";var q="borderTop";break;case "up":n="borderLeft";p="borderRight";q="borderBottom";break;case "left":n="borderBottom";p="borderTop";q="borderRight";break;case "right":n="borderBottom",p="borderTop",q="borderLeft"}Object.assign(this,(a={},dd(a,n,d),dd(a,p,d),dd(a,q,f),a))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Triangle"}},{key:"properties",
get:function(){return{direction:{defaultValue:"up"},triangleFill:{after:["fill"],initialize:function(){this.triangleFill=this.fill}}}}}],c,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:87838,end:89553})}(re.Morph);re.Triangle=Sx;re.Triangle=Sx;var Tx=bd("I",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),
g=c.hasOwnProperty("Image")&&"function"===typeof c.Image?c.Image:c.Image=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"__deserialize__",value:function(a,d,f,k){this._isDeserializing=!0;Ve._get(Object.getPrototypeOf(g.prototype),"__deserialize__",this).call(this,a,d,f,k)}},{key:"__after_deserialize__",value:function(a,d,f){delete this._isDeserializing;Ve._get(Object.getPrototypeOf(g.prototype),
"__after_deserialize__",this).call(this,a,d,f)}},{key:"isImage",get:function(){return!0}},{key:"ratio",get:function(){var a=this.naturalExtent;return a.x/a.y}},{key:"setWidthKeepingRatio",value:function(a){this.width=a;this.height=a/this.ratio}},{key:"setHeightKeepingRatio",value:function(a){this.width=this.ratio*a;this.height=a}},{key:"loadUrl",value:function(a){var d=this,f=this.autoResize;this.autoResize=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.autoResize;this.imageUrl=a;return re.promise["finally"](this.whenLoaded(),
function(){return d.autoResize=f})}},{key:"whenLoaded",value:function(){var a=this;return this.isLoaded?Promise.resolve(this):new Promise(function(d,f){var k=a.imageUrl;a.imageElement(function(n){a.imageUrl!==k&&f(Error("url changed (".concat(k," => ").concat(a.imageUrl,")")));a.naturalExtent=re.pt(n.width,n.height);a.isLoaded=!0;d(a)})})}},{key:"determineNaturalExtent",value:function(){var a=this;return this.whenLoaded().then(function(){return a.naturalExtent})}},{key:"render",value:function(a){this._requestMasterStyling&&
(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderImage(this)}},{key:"clear",value:function(){return this.loadUrl("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",!1)}},{key:"imageElement",value:function(a){var d=this;return new Promise(function(f,k){var n=d.env.domEnv.document.createElement("img");n.onload=function(){f(n);"function"===typeof a&&a(n)};n.src=d.imageUrl})}},{key:"canvasElementAndContext",value:function(){var a=
Cb(regeneratorRuntime.mark(function f(){var k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return k=this.env.domEnv.document,r.next=3,this.imageElement();case 3:return n=r.sent,p=k.createElement("canvas"),q=p.getContext("2d"),p.width=n.width,p.height=n.height,q.drawImage(n,0,0,n.width,n.height),r.abrupt("return",{canvas:p,ctx:q,image:n});case 10:case "end":return r.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"imageData",value:function(){var a=
Cb(regeneratorRuntime.mark(function k(f){var n,p,q,r,u,x,y,D;return regeneratorRuntime.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,this.canvasElementAndContext();case 2:return n=H.sent,p=n.ctx,q=n.image,f||(f=re.rect(0,0,q.width,q.height)),r=f,u=r.x,x=r.y,y=r.width,D=r.height,H.abrupt("return",p.getImageData(u,x,y,D));case 8:case "end":return H.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"pixelAt",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=
n.next){case 0:return n.next=2,this.imageData(f.extent(re.pt(1,1)));case 2:return n.abrupt("return",n.sent.data);case 3:case "end":return n.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"colorAt",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=re.Color,n.next=3,this.pixelAt(f);case 3:return n.t1=n.sent,n.abrupt("return",n.t0.fromTuple8Bit.call(n.t0,n.t1));case 5:case "end":return n.stop()}},
k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"loadArrayBuffer",value:function(a){a=new Uint8Array(a);a=new Blob([a],{type:"image/jpeg"});this.imageUrl=(window.URL||window.webkitURL).createObjectURL(a);this.makeDirty()}},{key:"convertToBase64",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,u,x;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return k=this.imageUrl,n=k.slice(k.lastIndexOf(".")+1,k.length).toLowerCase(),
"jpg"===n?n="jpeg":"svg"===n&&(n="svg+xml"),["gif","jpeg","png","tiff","svg+xml"].includes(n)||(n="gif"),k.startsWith("http")||(k=re.string.joinPath(System.baseURL,k)),y.next=7,Promise.resolve().then(function(){return rT});case 7:return p=y.sent,q=p.runCommand,r='curl --silent "'.concat(k,'" | openssl base64'),y.next=12,q(r).whenDone();case 12:return u=y.sent,x=u.stdout,y.abrupt("return",this.loadUrl("data:image/".concat(n,";base64,").concat(x),!1));case 15:case "end":return y.stop()}},f,this)}));
return function(){return a.apply(this,arguments)}}()},{key:"downloadImage",value:function(){var a=this.imageUrl;if(a.match(/^data:image/)){var d=this.name||"image-from-lively";var f=a.match(/image\/([^;]+)/);f&&f[1]&&(d+="."+f[1])}else d||(d=re.arr.last(a.split("/")));f=document.createElement("a");f.download=d;f.href=a;f.click()}},{key:"convertTo",value:function(){var a=Cb(regeneratorRuntime.mark(function n(f,k){var p,q,r,u,x,y,D,H,I=arguments;return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=
N.next){case 0:return p=2<I.length&&void 0!==I[2]?I[2]:!1,k||(k=1),N.next=4,this.canvasElementAndContext();case 4:return q=N.sent,r=q.ctx,u=q.canvas,x=q.image,N.next=10,this.determineNaturalExtent();case 10:return y=N.sent,D=y.x,H=y.y,u.width=x.width,u.height=x.height,p&&(r.filter=p),r.drawImage(x,0,0,D,H),N.abrupt("return",this.loadUrl(u.toDataURL(f,k),!1));case 18:case "end":return N.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"resampleImageToFitBounds",value:function(){var a=
Cb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,u,x,y,D;return regeneratorRuntime.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,this.canvasElementAndContext();case 2:return k=H.sent,n=k.ctx,p=k.canvas,q=k.image,r=this.width,u=this.height,x=q.width,y=q.height,p.width=x,p.height=y,n.drawImage(q,0,0,r,u),D=n.getImageData(0,0,x,y),p.width=r,p.height=u,n.putImageData(D,0,0),H.abrupt("return",this.loadUrl(p.toDataURL(),!1));case 16:case "end":return H.stop()}},f,this)}));return function(){return a.apply(this,
arguments)}}()},{key:"crop",value:function(a){var d=this.canvasElementAndContext(),f=d.ctx,k=d.canvas;d=d.image;var n=this.innerBounds(),p=d.width,q=d.height;a=n.intersection(a);a=new re.Rectangle(a.x/n.width,a.y/n.height,a.width/n.width,a.height/n.height);a=(new re.Rectangle(0,0,p,q)).divide([a]);a=Wb(a,1)[0];k.width=p;k.height=q;f.drawImage(d,0,0,p,q);d=f.getImageData(a.x,a.y,a.width,a.height);k.width=a.width;k.height=a.height;f.putImageData(d,0,0);return this.loadUrl(k.toDataURL(),!1)}},{key:"interactivelyChangeImageURL",
value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.world().prompt("Enter image url",{historyId:"lively.morphic-image-url-inputs",input:this.imageUrl.startsWith("data:")?"":this.imageUrl,requester:this,selectInput:!0});case 2:k=n.sent,"string"===typeof k&&(this.imageUrl=k);case 4:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"menuItems",
value:function(a){var d=this;a=Ve._get(Object.getPrototypeOf(g.prototype),"menuItems",this).call(this,a);a.unshift(["change image url...",function(){return d.interactivelyChangeImageURL()}],["resize image to to fit world",function(){var f=Math.min(d.world().visibleBounds().width/d.naturalExtent.x,d.world().visibleBounds().height/d.naturalExtent.y);d.extent=d.naturalExtent.scaleBy(f)}],["resize image to its real image size",Cb(regeneratorRuntime.mark(function k(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=
n.next){case 0:return n.next=2,d.determineNaturalExtent();case 2:return n.abrupt("return",d.extent=n.sent);case 3:case "end":return n.stop()}},k)}))],["resample image to fit current bounds",function(){return d.resampleImageToFitBounds()}],{isDivider:!0});return a}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Image"}},{key:"properties",get:function(){return{imageUrl:{isStyleProp:!0,copyAssetOnFreeze:!0,after:["extent","autoResize"],defaultValue:re.config.defaultImage,set:function(a){var d=
this;this.isLoaded=!1;this.setProperty("imageUrl",a);this.setProperty("naturalExtent",null);var f=this.autoResize&&!this._isDeserializing;this.whenLoaded().then(function(){d.imageUrl===a&&(d.isLoaded=!0,f&&(d.extent=d.naturalExtent))})["catch"](function(k){})}},fill:{defaultValue:re.Color.transparent},naturalExtent:{defaultValue:null},isLoaded:{defaultValue:!1,serialize:!1},autoResize:{isStyleProp:!0,defaultValue:!1},clipMode:{defaultValue:"auto"}}}}],c,{pathInPackage:function(){return"./morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:89561,end:99322})}(re.Morph));re.Image=Tx;re.Image=Tx;var $A=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),g=c.hasOwnProperty("PathPoint")&&"function"===typeof c.PathPoint?c.PathPoint:c.PathPoint=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.path=a;this._isSmooth=d.isSmooth||!1;this.x=d.position?d.position.x:d.x||0;this.y=d.position?d.position.y:d.y||0;this._controlPoints=d.controlPoints}},{key:"__dont_serialize__",get:function(){return["attributeConnections","$$controlPoints","$$position","doNotCopyProperties","doNotSerialize"]}},{key:"isPathPoint",get:function(){return!0}},
{key:"isSmooth",get:function(){return this._isSmooth||!1}},{key:"isSmooth",set:function(a){this._isSmooth!==a&&(this._isSmooth=a,this.adaptControlPoints(a))}},{key:"position",get:function(){return re.pt(this.x,this.y)}},{key:"position",set:function(a){var d=a.y;this.x=a.x;this.y=d;this.path.makeDirty()}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);this.path.onVertexChanged(this);return this}},{key:"copy",value:function(){var a=new re.ExpressionSerializer;return new re.PathPoint(this.path,
a.deserializeExprObj(this.__serialize__()))}},{key:"__serialize__",value:function(){return{__expr__:"({\n         position: ".concat(this.position.toString(!1),",\n         isSmooth: ").concat(this.isSmooth,",\n         controlPoints: {\n           next: ").concat(this.controlPoints.next.toString(!1),",\n           previous: ").concat(this.controlPoints.previous.toString(!1),"\n         }\n      })").replace(/[\n|\s]/g,""),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}}},{key:"controlPoints",
get:function(){return this._controlPoints||{next:re.pt(0,0),previous:re.pt(0,0)}}},{key:"controlPoints",set:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=a.next;a=a.previous;this._controlPoints={next:d?re.Point.fromLiteral(d):re.pt(0,0),previous:a?re.Point.fromLiteral(a):re.pt(0,0)};this.path.makeDirty()}},{key:"moveNextControlPoint",value:function(a){this.moveControlPoint("next",a)}},{key:"movePreviousControlPoint",value:function(a){this.moveControlPoint("previous",
a)}},{key:"moveControlPoint",value:function(a,d){var f,k=this.controlPoints[a];k=k?k.addPt(d):d;d="next"===a?"previous":"next";var n=this.controlPoints[d];this.isSmooth&&(n=k.negated().normalized().scaleBy(n.r()));this.controlPoints=(f={},dd(f,a,k),dd(f,d,n),f);this.path.onVertexChanged(this)}},{key:"pointOnLine",value:function(a,d,f,k){a=re.pt(a.x,a.y);d=re.pt(d.x,d.y);a=d.subPt(a);var n=a.scaleBy(1/a.r());f=d.subPt(f).dotProduct(n);return d.subPt(n.scaleBy(Math.max(1,Math.min(f,a.r())))).addXY(k,
k)}},{key:"nextVertex",get:function(){return this.path.vertexAfter(this)}},{key:"previousVertex",get:function(){return this.path.vertexBefore(this)}},{key:"interpolate",value:function(a,d){var f=this.copy();f.position=f.position.interpolate(a,d);return f}},{key:"adaptControlPoints",value:function(a){var d=this.nextVertex,f=this.previousVertex,k=this.position,n=this.path,p=n.vertices,q=p.indexOf(this),r=0===q;p=q===p.length-1;f=f?f.position:k;d=d?d.position:k;a?(a=this.pointOnLine(f,d,k,n.borderWidth),
this.controlPoints={previous:r?re.pt(0,0):a.subPt(d),next:a.subPt(f)}):this.controlPoints={previous:r?re.pt(0,0):f.subPt(k).scaleBy(.5),next:p?re.pt(0,0):d.subPt(k).scaleBy(.5)};n.onVertexChanged(this)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PathPoint"}}],c,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:99330,end:103385})}(void 0);re.PathPoint=$A;re.PathPoint=$A;var Ux=bd("aB",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),g=c.hasOwnProperty("Path")&&"function"===typeof c.Path?c.Path:c.Path=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{};Ve._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,Object.assign({},re.obj.dissoc(a,"origin")));this.adjustOrigin(a.origin||this.origin);this.position=a.position||this.position;this.updateBounds(this.vertices)}},{key:"__after_deserialize__",value:function(a,d,f){Ve._get(Object.getPrototypeOf(g.prototype),"__after_deserialize__",this).call(this,a,d,f);this.updateBounds(this.vertices)}},{key:"__additionally_serialize__",
value:function(a,d,f,k){Ve._get(Object.getPrototypeOf(g.prototype),"__additionally_serialize__",this).call(this,a,d,f,k);d=this.getProperty("draggable");d!==this.propertiesAndPropertySettings().properties.draggable.defaultValue&&(a.props.draggable={value:d});if(d=this.borderColor.valueOf())a.props.borderColor={key:"borderColor",value:f.expressionSerializer.exprStringEncode({__expr__:d.toJSExpr(),bindings:{"lively.graphics/geometry-2d.js":["pt","rect"],"lively.graphics/color.js":["Color",re.getClassName(d)]}})}}},
{key:"isPath",get:function(){return!0}},{key:"isSvgMorph",get:function(){return!0}},{key:"onVertexChanged",value:function(a){this.makeDirty();this.updateBounds(this.vertices)}},{key:"copyVertices",value:function(){return this.vertices.map(function(a){return a.copy()})}},{key:"updateBounds",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.vertices;if(a.length&&!this._adjustingVertices){this._adjustingVertices=!0;var d=this.origin,f=this.extent,k=d.x/f.x;f=d.y/f.y;
var n=[];a.forEach(function(q,r){var u=q.isSmooth,x=q.position,y=q.controlPoints||{};q=y.next;y=y.previous;n.push(x);u&&0<r&&r<a.length-1&&n.push(x.addPt(q),x.addPt(y))});d=re.Rectangle.unionPts(n);k=re.pt(d.width*k,d.height*f);var p=d.topLeft();a.forEach(function(q){return q.moveBy(p.negated())});this.moveBy(this.getTransform().transformDirection(p));this.extent=d.extent().maxPt(re.pt(this.borderWidth,this.borderWidth));this.origin=k;this._adjustingVertices=!1}}},{key:"onChange",value:function(a){var d=
a.prop,f=a.value,k=a.prevValue,n=this._adjustingVertices,p=this._adjustingOrigin;"extent"===d&&f&&k&&!n&&this.adjustVertices(f.scaleByPt(k.inverted()));(!p&&"vertices"===d||"borderWidthLeft"===d)&&this.updateBounds("vertices"===d?f:this.vertices);n||"origin"!==d||this.updateBounds(this.vertices);Ve._get(Object.getPrototypeOf(g.prototype),"onChange",this).call(this,a)}},{key:"vertexBefore",value:function(a){a=this.vertices.indexOf(a)-1;return this.vertices[0<=a?a:this.vertices.length-1]}},{key:"vertexAfter",
value:function(a){a=this.vertices.indexOf(a)+1;return this.vertices[a>this.vertices.length-1?0:a]}},{key:"adjustVertices",value:function(a){var d=this,f=this.vertices;f&&f.forEach(function(k){var n=k.controlPoints,p=n.next;n=n.previous;p=p.scaleByPt(a);n=n.scaleByPt(a);k.position=k.position.addPt(d.origin).scaleByPt(a).subPt(d.origin);k.controlPoints={next:p,previous:n}})}},{key:"adjustOrigin",value:function(a){this._adjustingOrigin=!0;var d=this.origin;this.vertices.forEach(function(f){return f.position=
d.subPt(a).addXY(f.x,f.y)});Ve._get(Object.getPrototypeOf(g.prototype),"adjustOrigin",this).call(this,a);this._adjustingOrigin=!1}},{key:"addVertex",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,f=this.vertices;d="number"===typeof d?d:d&&d.isPathPoint?f.indexOf(d):void 0;"number"===typeof d&&-1<d?f.splice(d,0,a):f.push(a);this.vertices=f}},{key:"addVertexCloseTo",value:function(a){var d=this.verticesCloseTo(a),f=d.closest,k=f.length;f=f.vertex;d=d.next;a=this.findClosestPointOnPath(a,
10,3);return this.addVertex(a.point,a.length<=k?f:d?d.vertex:null)}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderPath(this)}},{key:"_pathNode",get:function(){var a=re.PropertyPath("env.renderer").get(this);return(a=a&&a.getNodeForMorph(this))&&a.querySelector("#svg"+re.string.regExpEscape(this.id))}},{key:"verticesCloseTo",value:function(a){for(var d=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:!0,f=this.vertices,k=Infinity,n=-1,p=0;p<f.length;p++){var q=f[p].position.dist(a);q>=k||(k=q,n=p)}k=0===n?null:{index:n-1,vertex:f[n-1]};p=n===f.length-1?null:{index:n+1,vertex:f[n+1]};f={index:n,vertex:f[n]};d&&(d=this._pathNode,k&&(n=this.findClosestPointOnPath(k.vertex.position,6,3,d).length,k.length=n),p&&(n=this.findClosestPointOnPath(p.vertex.position,6,3,d).length,p.length=n),d=this.findClosestPointOnPath(f.vertex.position,20,3,d).length,f.length=d);return{previous:k,next:p,closest:f}}},
{key:"findClosestPointOnPath",value:function(a,d,f,k){function n(p,q){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:10,u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:3,x=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,y=5<arguments.length&&void 0!==arguments[5]?arguments[5]:p.getTotalLength(),D=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,H=y;y=[];var I=(x-H)/(r-1),N=0;y.push([re.Point.ensure(p.getPointAtLength(H)),H,N]);for(N=1;N<r-1;N++){var J=H+N*I;
y.push([re.Point.ensure(p.getPointAtLength(J)),J,N])}y.push([re.Point.ensure(p.getPointAtLength(x)),x,N]);x=Infinity;H=-1;I=fa(y);var sa;try{for(I.s();!(sa=I.n()).done;){var ja=Wb(sa.value,3),Ha=ja[2],Qa=q.dist(ja[0]);Qa>=x||(x=Qa,H=Ha)}}catch(ec){I.e(ec)}finally{I.f()}if(D>=u)return r=Wb(y[H],2),{point:r[0],length:r[1]};x=y[Math.max(0,H-1)][1];y=y[Math.min(y.length-1,H+1)][1];return n(p,q,r,u,x,y,D+1)}k||(k=(k=this.env.renderer.getNodeForMorph(this))&&k.querySelector("#svg"+re.string.regExpEscape(this.id)));
return k?n(k,a,d,f):{length:0,point:a}}},{key:"onDragStart",value:function(a){var d=a.domEvt.target,f=(new re.PropertyPath("attributes.class.value")).get(d);if(f&&f.includes("path-point"))a=f.match(/path-point-([0-9]+)(?:-control-([0-9]+))?$/),a=Wb(a,3),a[0],f=a[2],this._controlPointDrag={marker:d,n:Number(a[1])},void 0!==f&&(this._controlPointDrag.ctrlN=Number(f));else return Ve._get(Object.getPrototypeOf(g.prototype),"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){if(!this._controlPointDrag)return Ve._get(Object.getPrototypeOf(g.prototype),
"onDrag",this).call(this,a);var d=this._controlPointDrag,f=d.n,k=d.ctrlN,n=this.vertices;if(d=n[f])a=this.getInverseTransform().transformDirection(a.state.dragDelta),void 0===k?(d.moveBy(a),a=n[f-1],n=n[f+1],a&&10>a.position.dist(d.position)?this._controlPointDrag.maybeMerge=[f-1,f]:n&&10>n.position.dist(d.position)?this._controlPointDrag.maybeMerge=[f,f+1]:this._controlPointDrag.maybeMerge=void 0):1===k?d.movePreviousControlPoint(a):2===k&&d.moveNextControlPoint(a)}},{key:"onDragEnd",value:function(a){a=
this.vertices;var d=this._controlPointDrag;if(d&&(d=d.maybeMerge,delete this._controlPointDrag,d)){d=Wb(d,2);var f=d[1];a[d[0]].controlPoints.next=a[f].controlPoints.next;a.splice(f,1);this.vertices=a}}},{key:"onDoubleMouseDown",value:function(a){this.showControlPoints&&this.addVertexCloseTo(this.localize(a.position))}},{key:"menuItems",value:function(){var a=this,d=re.Icon.textAttribute("check-square",{textStyleClasses:["far"]}),f=re.Icon.textAttribute("square",{textStyleClasses:["far"]});f[1].paddingRight=
"7px";d[1].paddingRight="5px";return[[[].concat(db(this.showControlPoints?d:f),[" control points"]),function(){return a.showControlPoints=!a.showControlPoints}],[[].concat(db(this.isSmooth?d:f),[" smooth"]),function(){return a.isSmooth=!a.isSmooth}],{isDivider:!0}].concat(db(Ve._get(Object.getPrototypeOf(g.prototype),"menuItems",this).call(this)))}},{key:"getPointOnPath",value:function(a){if(!this._pathNode)return re.pt(0,0);a=this._pathNode.getPointAtLength(this._pathNode.getTotalLength()*a)||re.pt(0,
0);return re.pt(a.x,a.y)}},{key:"borderOptions",get:function(){return["solid","dotted","dashed"]}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Path"}},{key:"properties",get:function(){return{borderColor:{isStyleProp:!0,type:"ColorGradient",foldable:["top","left","right","bottom"],set:function(a){a||(a=re.Color.white);if(a.isColor||a.isGradient)a={top:a,left:a,right:a,bottom:a};this.setProperty("borderColor",re.obj.extract(a,["top","left","right","bottom"],function(d,f){return re.obj.isArray(f)?
re.Color.fromTuple(f):f}))}},showControlPoints:{defaultValue:!1},vertices:{defaultValue:[],after:["isSmooth","borderWidth"],before:["extent","origin"],type:"Vertices",set:function(a){var d=this,f=this.isSmooth;this._adjustingVertices=!0;a=a.map(function(k){return k.isPathPoint?Object.assign(k,{path:d}):new re.PathPoint(d,Object.assign({isSmooth:f},k))});this.setProperty("vertices",a);this._adjustingVertices=!1;this.updateBounds(a)}},startMarker:{defaultValue:null,type:"Object"},endMarker:{defaultValue:null,
type:"Object"},endStyle:{isStyleProp:!0,type:"Enum",values:["butt","round","square"],defaultValue:"butt"},drawnProportion:{type:"Number",isStyleProp:!0,isFloat:!0,min:-1,max:1,defaultValue:0},cornerStyle:{type:"Enum",isStyleProp:!0,values:["arcs","bevel","miter","miter-clip","round"],defaultValue:"miter"},draggable:{get:function(){return this.getProperty("draggable")||this.showControlPoints}},isSmooth:{defaultValue:!1,before:["vertices"],type:"Boolean",set:function(a){this.setProperty("isSmooth",
a);this.vertices&&(this._adjustingVertices=!0,this.vertices.forEach(function(d){return d.isSmooth=a}),this._adjustingVertices=!1,this.updateBounds(this.vertices))}}}}}],c,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:103393,end:117795})}(re.Morph));re.Path=Ux;re.Path=Ux;var Vx=bd("aA",
function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),g=c.hasOwnProperty("Polygon")&&"function"===typeof c.Polygon?c.Polygon:c.Polygon=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){if(a.vertices&&2<a.vertices.length)Ve._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),
this).call(this,a);else throw Error("A polygon requires 3 or more vertices!");}},{key:"isPolygon",get:function(){return!0}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Polygon"}}],c,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:117803,end:118062})}(re.Path));re.Polygon=
Vx;re.Polygon=Vx;var Wx=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),g=c.hasOwnProperty("LineMorph")&&"function"===typeof c.LineMorph?c.LineMorph:c.LineMorph=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"isPolygon",get:function(){return!0}},{key:"update",value:function(){if(!this._isUpdating){this._isUpdating=!0;var a=this.line,d=this.height,
f=a.toVector();this.setProperty("position",this.position.addPt(a.perpendicularLine(0,d,"cc").toVector()));this.width=f.fastR();this.rotation=f.theta();this.vec=f;this._isUpdating=!1}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LineMorph"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:0},fill:{defaultValue:re.Color.black},height:{defaultValue:1},line:{defaultValue:re.Line.fromCoords(0,0,0,0),set:function(a){this.setProperty("line",a);this.update(a)}},start:{derived:!0,
after:["line"],get:function(a){return this.line.start},set:function(a){this.line=this.line.withStart(a)}},end:{derived:!0,after:["line"],get:function(a){return this.line.end},set:function(a){this.line=this.line.withEnd(a)}},position:{derived:!0,after:["line"],get:function(a){return this.start},set:function(a){var d=a.subPt(this.start),f=this.rotation;this.line=new re.Line(a,this.end.addPt(d));this.rotation=f}}}}}],c,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:118070,end:119715})}(re.Morph);re.LineMorph=Wx;re.LineMorph=Wx;var w3=Object.freeze({__proto__:null,Morph:gp,Ellipse:Rx,Triangle:Sx,Image:Tx,PathPoint:$A,Path:Ux,Polygon:Vx,LineMorph:Wx}),gn=window.lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js");gn.pt=wl;gn.Morph=gp;gn.morph=Sm;gn.touchInputDevice=bq;gn.config=Jm;var Xx=bd("az",function(b){var c=
window.lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),g=c.hasOwnProperty("Tooltip")&&"function"===typeof c.Tooltip?c.Tooltip:c.Tooltip=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"update",value:function(a){this.position=a.globalBounds().bottomCenter().subPt(a.world().scroll).addPt(gn.pt(0,7))}},{key:"softRemove",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=
n.next){case 0:return n.next=2,this.animate({opacity:0,duration:300});case 2:f&&f(this),this.remove();case 4:case "end":return n.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Tooltip"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},reactsToPointer:{defaultValue:!1},isEpiMorph:{defaultValue:!0},description:{after:["submorphs"],derived:!0,get:function(){return Wb(this.submorphs,
1)[0].value},set:function(a){var d=Wb(this.submorphs,1)[0];d.value=a;d.fit()}},submorphs:{initialize:function(){this.submorphs=[new gn.morph({reactsToPointer:!1,type:"label",name:"label",width:200})]}}}}}],c,{pathInPackage:function(){return"./tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:171,end:1294})}(gn.Morph));
gn.Tooltip=Xx;gn.Tooltip=Xx;var Yx=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),g=c.hasOwnProperty("TooltipViewer")&&"function"===typeof c.TooltipViewer?c.TooltipViewer:c.TooltipViewer=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){this.currentMorph=a}},{key:"__dont_serialize__",
get:function(){return["currentTooltip","currentMorph"]}},{key:"notPartOfCurrentTooltip",value:function(a){return!a.ownerChain().includes(this.currentMorph)}},{key:"invalidatesCurrentTooltip",value:function(a){return a.tooltip||this.notPartOfCurrentTooltip(a)}},{key:"mouseMove",value:function(a){var d=this;if(!gn.touchInputDevice&&!a.state.draggedMorph){var f=a.hand,k=$world.morphsContainingPoint(a.positionIn($world)).filter(function(u){return u.reactsToPointer||u.tooltip});k=fa(k.slice(k.indexOf(f)+
1));var n;try{for(k.s();!(n=k.n()).done;){var p=n.value;if(r&&!r.ownerChain().includes(p))break;if(p.tooltip){var q=p;break}var r=p}}catch(u){k.e(u)}finally{k.f()}for(;q&&!q.visible;)q=q.morphBeneath(a.positionIn($world));q?this.currentMorph!==q&&this.invalidatesCurrentTooltip(q)&&(this.hoverOutOfMorph(this.currentMorph),this.hoverIntoMorph(q,f),this.currentMorph=q):this.currentTooltip?this.currentTooltip.softRemove().then(function(){d.currentTooltip&&!d.currentTooltip.owner&&(d.currentTooltip=null)}):
this.currentMorph=null}}},{key:"mouseDown",value:function(a){a.targetMorph;this.currentTooltip&&this.currentTooltip.remove();this.currentTooltip=null}},{key:"hoverIntoMorph",value:function(a,d){this.clearScheduledTooltip();this.currentTooltip?this.showTooltipFor(a,d):this.scheduleTooltipFor(a,d)}},{key:"hoverOutOfMorph",value:function(a){var d=this;(a=this.currentTooltip)&&a.softRemove(function(f){return d.currentTooltip===f&&(d.currentTooltip=null)})}},{key:"scheduleTooltipFor",value:function(a,
d){var f=this;this.timer=setTimeout(function(){f.currentMorph&&f.showTooltipFor(a,d)},1E3*gn.config.showTooltipsAfter)}},{key:"clearScheduledTooltip",value:function(){clearTimeout(this.timer)}},{key:"clearCurrentTooltip",value:function(){var a=this.currentTooltip;a&&a.remove()}},{key:"showTooltipFor",value:function(a,d){var f=this;a.tooltip&&a.world()&&!d.env.eventDispatcher.eventState.draggedMorph&&(this.clearCurrentTooltip(),d=d?d.position.addXY(10,7):a.globalBounds().bottomRight(),this.currentTooltip=
new gn.Tooltip({position:d,description:a.tooltip}),Dd.import("./tooltips.cp-3c41b378.js").then(function(k){f.currentTooltip.master=k.SystemTooltip;$world.addMorph(f.currentTooltip);f.currentTooltip.update(a)}))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TooltipViewer"}}],c,{pathInPackage:function(){return"./tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:1302,end:4622})}(void 0);gn.TooltipViewer=Yx;gn.TooltipViewer=Yx;var x3=Object.freeze({__proto__:null,Tooltip:Xx,TooltipViewer:Yx}),Yl=window.lively.FreezerRuntime.recorderFor("lively.2lively/interface.js");Yl.nyi=function(b){throw Error("Not yet implemented: ".concat(b));};Yl.string=Xj;Yl.promise=yj;Yl.debugMessageOrder=!1;var AH=function(){function b(c){Sd(this,b);this.id=Yl.string.newUUID();this.actions={};this.options={ackTimeout:3500,debug:!1};this._incomingOrderNumberingBySenders=
new Map;this._outgoingOrderNumberingByTargets=new Map;this._outOfOrderCacheBySenders=new Map}uc(b,[{key:"isOnline",value:function(){Yl.nyi("isOnline")}},{key:"open",value:function(){Yl.nyi("open")}},{key:"close",value:function(){Yl.nyi("close")}},{key:"remove",value:function(){Yl.nyi("remove")}},{key:"whenOnline",value:function(c){var g=this;return Yl.promise.waitFor(c,function(){return g.isOnline()}).then(function(){return g})["catch"](function(a){return Promise.reject(/timeout/i.test(String(a))?
Error("Timeout in ".concat(g,".whenOnline")):a)})}},{key:"onError",value:function(c){this.debug&&console.log("[".concat(this,"] error: ").concat(c))}},{key:"removeService",value:function(c){delete this.actions[c]}},{key:"removeServices",value:function(c){var g=this;c.forEach(function(a){return g.removeService(a)})}},{key:"addService",value:function(c,g){this.actions[c]=g}},{key:"addServices",value:function(c){var g=this;Object.keys(c).forEach(function(a){return g.addService(a,c[a])})}},{key:"ping",
value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return f=Date.now(),q.next=3,this.sendToAndWait(a,"l2l-ping",{timestamp:f});case 3:return k=q.sent,n=k.data.timestamp,p=Date.now(),q.abrupt("return",{to:n-f,from:p-n,roundtrip:p-f});case 7:case "end":return q.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"send",value:function(c,g){Yl.nyi("send")}},{key:"sendAndWait",
value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f=this,k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:k=new Promise(function(u,x){return f.send(a,u)});n={};p=this.options.ackTimeout+400;"ackTimeout"in a&&(p=!a.ackTimeout||0>a.ackTimeout?null:a.ackTimeout+400);if(!p){r.next=8;break}r.next=5;return Promise.race([Yl.promise.delay(p,n),k]);case 5:q=r.sent;r.next=11;break;case 8:return r.next=10,k;case 10:q=r.sent;case 11:if(q!==n){r.next=13;
break}throw Error("Timeout sending ".concat(a.action));case 13:return r.abrupt("return",q);case 14:case "end":return r.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"sendTo",value:function(c,g,a,d){return this.send({target:c,action:g,data:a},d)}},{key:"sendToAndWait",value:function(c,g,a,d){return this.sendAndWait(Object.assign({target:c,action:g,data:a},d))}},{key:"prepareSend",value:function(c,g){var a=c.target,d=c.action,f=c.messageId;c.data;var k=c.sender;if(!d)throw Error("Trying to send a message without specifying action!");
if(!a)throw Error("Trying to send message ".concat(d," without specifying target!"));f||(c.messageId=Yl.string.newUUID());k||(c.sender=this.id);d=c.n=this._outgoingOrderNumberingByTargets.get(a)||0;this._outgoingOrderNumberingByTargets.set(a,d+1);if("function"===typeof g){k=this;var n=g;g=function(p){var q=k._incomingOrderNumberingBySenders.get(p.sender)||0;k.debug&&Yl.debugMessageOrder&&console.log("[MSG ORDER] ".concat(k," received ack for ").concat(p.action," as msg ").concat(q));try{n.apply(null,
arguments)}catch(r){console.error("Error in ack fn of ".concat(k,": ").concat(r.stack))}k._incomingOrderNumberingBySenders.set(p.sender,q+1);setTimeout(function(){return k.invokeOutOfOrderMessages(p.sender)},0)}}this.debug&&Yl.debugMessageOrder&&console.log("[MSG ORDER] ".concat(this," sending ").concat(d," (").concat(c.action,") to ").concat(a));return[c,g]}},{key:"prepareAnswerMessage",value:function(c,g){return{action:c.action+"-response",inResponseTo:c.messageId,target:c.sender,data:g,sender:this.id}}},
{key:"installEventToMessageTranslator",value:function(c){var g=this,a=c.onevent;c.onevent=function(d){var f=d.data||[];a.call(this,d);d.data=["*"].concat(f);a.call(this,d)};c.on("*",function(d,f){d&&"object"===ad(d)&&d.action&&(f=d,d=f.action);var k=arguments[arguments.length-1];k="function"===typeof k?k:null;(f=f===k?null:f)&&f.data&&("number"===typeof f.n||f.broadcast)&&f.sender?g.receive(f,c,k):(console.warn("".concat(g," received non-conformant message ").concat(d,":"),arguments),"function"===
typeof k&&k({data:{error:"invalid l2l message"}}))})}},{key:"receive",value:function(c,g,a){this.dispatchL2LMessageToSelf(c,g,a)}},{key:"dispatchL2LMessageToSelf",value:function(c,g,a){var d=this,f=c.action;if(c.broadcast)this.safeInvokeServiceHandler(f,c,a,g);else try{var k=this._incomingOrderNumberingBySenders.get(c.sender)||0,n="register"===f||"unregister";if(!n&&c.n<k)console.error("[MSG ORDER] [".concat(this,"] received message no. ").concat(c.n," but expected >= ").concat(k,", dropping ").concat(f));
else if(!n&&c.n>k){this.debug&&Yl.debugMessageOrder&&console.log("[MSG ORDER] [".concat(this,"] storing out of order message ").concat(f," (").concat(c.n,") for later invocation"));var p=this._outOfOrderCacheBySenders.get(c.sender);p||(p=[],this._outOfOrderCacheBySenders.set(c.sender,p));p.push([f,c,a,g])}else this.safeInvokeServiceHandler(f,c,a,g),setTimeout(function(){return d.invokeOutOfOrderMessages(c.sender)},0)}catch(q){console.error("Error message ordering when handling ".concat(f,": ").concat(q.stack||
q)),"function"===typeof a&&a(this.prepareAnswerMessage(c,{isError:!0,error:String(q.stack||q)}))}}},{key:"invokeOutOfOrderMessages",value:function(c){var g=this._outOfOrderCacheBySenders.get(c);if(g&&g.length){var a=this._incomingOrderNumberingBySenders.get(c)||0;c=g.findIndex(function(d){d=Wb(d,2);d[0];return d[1].n===a});-1!==c&&(g.splice(c,1),this.invokeServiceHandler.apply(this,g[c]))}}},{key:"renameTarget",value:function(c,g){if(c!==g){var a=this._outgoingOrderNumberingByTargets.get(c);this._outgoingOrderNumberingByTargets["delete"](c);
this._outgoingOrderNumberingByTargets.set(g,a)}}},{key:"safeInvokeServiceHandler",value:function(c,g,a,d){try{"function"===typeof this.actions[c]?this.invokeServiceHandler(c,g,a,d):d._events&&Object.keys(d._events).includes(c)||(console.warn("WARNING [".concat(this,"] Unhandled message: ").concat(c)),"function"===typeof a&&a(this.prepareAnswerMessage(g,{isError:!0,error:"message not understood: "+c})))}catch(f){console.error("Error when handling ".concat(c,": ").concat(f.stack||f)),"function"===typeof a&&
a(this.prepareAnswerMessage(g,{isError:!0,error:String(f.stack||f)}))}}},{key:"invokeServiceHandler",value:function(c,g,a,d){var f=this;this.debug&&Yl.debugMessageOrder&&console.log("[MSG ORDER] ".concat(this," received ").concat(g.n," (").concat(g.action,") from ").concat(g.sender));this._incomingOrderNumberingBySenders.set(g.sender,g.n+1);if("function"===typeof a){var k=!1,n=!1,p="ackTimeout"in g?g.ackTimeout:this.options.ackTimeout,q=this._outgoingOrderNumberingByTargets.get(g.sender)||0;this._outgoingOrderNumberingByTargets.set(g.sender,
q+1);var r=function(u){n?console.warn("[".concat(f,"] ackFn for ").concat(g.action," called after it timed out, dropping answer!")):k?console.warn("[".concat(f,"] ack function called repeatedly when handling ").concat(g.action)):(k=!0,a(f.prepareAnswerMessage(g,u)),f.debug&&Yl.debugMessageOrder&&console.log("[MSG ORDER] ".concat(f," sending ").concat(q," (ack for ").concat(g.action,")")))};p&&setTimeout(function(){k||(r({isError:!0,error:"Timeout error: ".concat(f," did not send answer for ").concat(g.action,
" after ").concat(p,"ms")}),n=!0)},p)}try{this.actions[c].call(this,this,g,r,d)}catch(u){console.error("[".concat(this,"] Error handling ").concat(c,": ").concat(u.stack||u)),r&&r({error:u.stack})}}},{key:"debug",get:function(){return this.options.debug},set:function(c){this.options.debug=c}}]);return b}();Yl.L2LConnection=AH;Yl["default"]=AH;var vv=window.lively.FreezerRuntime.recorderFor("lively.2lively/default-actions.js"),BH={"l2l-ping":function(b,c,g,a){a=c.sender;c=c.data.timestamp;var d=Date.now();
"function"===typeof g&&g({timestamp:d});b.debug&&console.log("[".concat(void 0,"] got ping from ").concat(a,", time: ").concat(d-c,"ms"))},"remote-eval":function(b,c,g,a){c.sender;var d=c.data.source;Promise.resolve().then(function(){return eval(d)}).then(function(f){return g({value:f})})["catch"](function(f){f.originalErr&&(f=f.originalErr);console.error("eval error: "+f);"function"===typeof g&&g({isError:!0,value:String(f.stack||f)})})},"remote-eval-2":function(b,c,g,a){c.sender;var d=c.data.source;
Promise.resolve().then(function(){var f=eval(d);if(!(f instanceof Promise))throw console.error("unexpected eval result:"+f),Error("unexpected eval result:"+f);return f}).then(function(f){return g(f)})["catch"](function(f){console.error("eval error: "+f);f.originalErr&&(f=f.originalErr);"function"===typeof g&&g({isError:!0,value:String(f.stack||f)})})}};vv.defaultActions=BH;vv.defaultActions=BH;var sT={"[broadcast] send":function(b,c,g,a){return Cb(regeneratorRuntime.mark(function f(){var k,n,p,q,
r,u,x,y,D,H,I,N;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:k=c.sender,n=c.data,p=n.action,q=n.broadcast,r=n.room,u=n.namespace,x=n.isSystemBroadcast,y=n.isMultiServerBroadcast,D=[],y?(console.log(".......isMultiServerBroadcast"),H=b.id,I=b.getTrackerList(),console.log(I),D=I.map(function(sa){return sa.id!==H?sa.io._nsps.get("/"+sa.namespace):a.broadcast})):(x&&(u=b.namespace),D.push(u?b.io._nsps.get("/"+u):a.broadcast)),D.forEach(function(sa){console.log(p,{action:p,
sender:k,broadcast:!0,data:q});debugger;sa.to(r).emit(p,{action:p,sender:k,broadcast:!0,data:q})}),g&&"function"===typeof g&&(N="message broadcasted to "+r,u&&(N+=" in namespace "+u),1<D.length&&(N+=" "+D.length+" trackers"),console.log(N),g({status:N}));case 6:case "end":return J.stop()}},f)}))()},"[broadcast] join room":function(b,c,g,a){return Cb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,u;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:k=c.sender;n=c.data.room;
q=!1;r=b.io._nsps.get("/"+b.namespace).adapter.rooms;u=r.get(n)&&r.get(n).has(a.id);if(!u){x.next=8;break}p="".concat(k," already in ").concat(n);x.next=12;break;case 8:return x.next=10,a.join(n);case 10:p="".concat(k," joined ").concat(n),q=!0;case 12:g&&"function"===typeof g&&g({status:p,joined:q});case 13:case "end":return x.stop()}},f)}))()},"[broadcast] leave room":function(b,c,g,a){return Cb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,u;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=
x.next){case 0:k=c.sender;n=c.data.room;q=!1;r=b.io._nsps.get("/"+b.namespace).adapter.rooms;if(u=r.get(n)&&r.get(n).has(a.id)){x.next=8;break}p="".concat(k," not in ").concat(n);x.next=12;break;case 8:return x.next=10,a.leave(n);case 10:p="".concat(k," left room ").concat(n),q=!0;case 12:console.log(p),g&&"function"===typeof g&&g({left:q,status:p});case 14:case "end":return x.stop()}},f)}))()},"[broadcast] my rooms":function(b,c,g,a){if(null==c)throw new TypeError("Cannot destructure undefined");
g(a.rooms)},"[broadcast] all rooms":function(b,c,g,a){c.sender;g(b.io._nsps.get("/"+b.namespace).adapter.rooms)},"[broadcast] list room members":function(b,c,g,a){c.sender;c=c.data.room;a=b.io;c?(b=a._nsps.get("/"+b.namespace).adapter.rooms.get(c),g({room:c,sockets:b?db(b.entries()).reduce(function(d,f){f=Wb(f,1)[0];return d[f]=!0,d},{}):{},length:b?b.size:0})):g({isError:!0,error:"`room` paramerter missing!"})},getClients:function(b,c,g){c.trackerId;b.removeDisconnectedClients();g(Array.from(b.clients))}};
vv.defaultTrackerActions=sT;vv.defaultTrackerActions=sT;var CH={getRoomList:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,d,f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:a=b.client,d=b.ackFn,f=a._socketioClient.rooms,d(f);case 3:case "end":return k.stop()}},g)}))()},"ask for":function(b,c,g,a){var d=this;return Cb(regeneratorRuntime.mark(function k(){var n,p,q,r;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return n=
c.sender,p=c.data.query,q=p.match(/password|sudo/i)?"passwordPrompt":"prompt",u.next=4,$world[q](p);case 4:r=u.sent,"function"===typeof g&&g({answer:r}),b.debug&&console.log("[".concat(d,"] message 'ask for' from ").concat(n,", query: ").concat(p));case 7:case "end":return u.stop()}},k)}))()},"open editor":function(b,c,g,a){return Cb(regeneratorRuntime.mark(function f(){var k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:k=c.data.args;if(k.length){p.next=4;break}g({error:"no file specified"});
return p.abrupt("return");case 4:return p.next=6,$world.execCommand("open file for EDITOR",{url:k[0]});case 6:n=p.sent,"function"===typeof g&&g("aborted"===n?{error:String(n)}:{status:n});case 8:case "end":return p.stop()}},f)}))()},changeWorkingDirectory:function(b,c,g,a){return Cb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,u,x,y;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:n=(k=c.data.args)||[];p=Wb(n,2);q=p[0];r=p[1];u="OK";try{if(q)if(r){if(x=$world.getMorphWithId(r))if(x.__lookupSetter__("cwd"))x.cwd=
q;else if("function"===typeof x.changeWorkingDirectory)x.changeWorkingDirectory(q);else if("function"===typeof x.pluginFind){if(y=x.pluginFind(function(H){return H.isShellEditorPlugin}))y.cwd=q}else u="[changeWorkingDirectory] cannot figure pout how to set dir"}else u="[changeWorkingDirectory] No command morph";else u="[changeWorkingDirectory] No directory received"}catch(H){u=String(H)}"OK"!==u&&console.warn(u);"function"===typeof g&&g(u);case 6:case "end":return D.stop()}},f)}))()}};vv.defaultClientActions=
CH;vv.defaultClientActions=CH;var y3={},z3=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,A3="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),fD=y3=function(b){var c=b,g=b.indexOf("["),a=b.indexOf("]");-1!=g&&-1!=a&&(b=b.substring(0,g)+b.substring(g,
a).replace(/:/g,";")+b.substring(a,b.length));var d=z3.exec(b||"");b={};for(var f=14;f--;)b[A3[f]]=d[f]||"";-1!=g&&-1!=a&&(b.source=c,b.host=b.host.substring(1,b.host.length-1).replace(/;/g,":"),b.authority=b.authority.replace("[","").replace("]","").replace(/;/g,":"),b.ipv6uri=!0);c=b.path;g=c.replace(/\/{2,9}/g,"/").split("/");"/"!=c.substr(0,1)&&0!==c.length||g.splice(0,1);"/"==c.substr(c.length-1,1)&&g.splice(g.length-1,1);b.pathNames=g;b.queryKey=nX(b,b.query);return b},DH={};try{DH="undefined"!==
typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(b){DH=!1}var oX=DH,nl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;Ql.prototype.on=Ql.prototype.addEventListener=function(b,c){(this||nl)._callbacks=(this||nl)._callbacks||{};((this||nl)._callbacks["$"+b]=(this||nl)._callbacks["$"+b]||[]).push(c);return this||nl};Ql.prototype.once=function(b,c){function g(){this.off(b,g);c.apply(this||nl,arguments)}g.fn=c;this.on(b,g);return this||nl};Ql.prototype.off=
Ql.prototype.removeListener=Ql.prototype.removeAllListeners=Ql.prototype.removeEventListener=function(b,c){(this||nl)._callbacks=(this||nl)._callbacks||{};if(0==arguments.length)return(this||nl)._callbacks={},this||nl;var g=(this||nl)._callbacks["$"+b];if(!g)return this||nl;if(1==arguments.length)return delete (this||nl)._callbacks["$"+b],this||nl;for(var a,d=0;d<g.length;d++)if(a=g[d],a===c||a.fn===c){g.splice(d,1);break}0===g.length&&delete (this||nl)._callbacks["$"+b];return this||nl};Ql.prototype.emit=
function(b){(this||nl)._callbacks=(this||nl)._callbacks||{};for(var c=Array(arguments.length-1),g=(this||nl)._callbacks["$"+b],a=1;a<arguments.length;a++)c[a-1]=arguments[a];if(g){g=g.slice(0);a=0;for(var d=g.length;a<d;++a)g[a].apply(this||nl,c)}return this||nl};Ql.prototype.emitReserved=Ql.prototype.emit;Ql.prototype.listeners=function(b){(this||nl)._callbacks=(this||nl)._callbacks||{};return(this||nl)._callbacks["$"+b]||[]};Ql.prototype.hasListeners=function(b){return!!this.listeners(b).length};
const dq=Object.create(null);dq.open="0";dq.close="1";dq.ping="2";dq.pong="3";dq.message="4";dq.upgrade="5";dq.noop="6";const aB=Object.create(null);Object.keys(dq).forEach(b=>{aB[dq[b]]=b});const B3={type:"error",data:"parser error"},C3="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),D3="function"===typeof ArrayBuffer,uT=({type:b,data:c},g,a)=>{if(C3&&c instanceof Blob)return g?a(c):tT(c,a);var d;if(d=D3)(d=c instanceof ArrayBuffer)||
(d="function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(c):c&&c.buffer instanceof ArrayBuffer);return d?g?a(c):tT(new Blob([c]),a):a(dq[b]+(c||""))},tT=(b,c)=>{const g=new FileReader;g.onload=function(){const a=g.result.split(",")[1];c("b"+a)};return g.readAsDataURL(b)},Zx="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let b=0;64>b;b++)Zx["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(b)]=b;const E3="function"===typeof ArrayBuffer,wT=(b,c)=>{if("string"!==
typeof b)return{type:"message",data:vT(b,c)};var g=b.charAt(0);if("b"===g){b=b.substring(1);if(E3){{var a=.75*b.length;g=b.length;let d=0,f,k,n,p;"="===b[b.length-1]&&(a--,"="===b[b.length-2]&&a--);const q=new ArrayBuffer(a),r=new Uint8Array(q);for(a=0;a<g;a+=4)f=Zx[b.charCodeAt(a)],k=Zx[b.charCodeAt(a+1)],n=Zx[b.charCodeAt(a+2)],p=Zx[b.charCodeAt(a+3)],r[d++]=f<<2|k>>4,r[d++]=(k&15)<<4|n>>2,r[d++]=(n&3)<<6|p&63;b=q}c=vT(b,c)}else c={base64:!0,data:b};return{type:"message",data:c}}return aB[g]?1<
b.length?{type:aB[g],data:b.substring(1)}:{type:aB[g]}:B3},vT=(b,c)=>{switch(c){case "blob":return b instanceof ArrayBuffer?new Blob([b]):b;default:return b}},xT=String.fromCharCode(30),F3=(b,c)=>{const g=b.length,a=Array(g);let d=0;b.forEach((f,k)=>{uT(f,!1,n=>{a[k]=n;++d===g&&c(a.join(xT))})})},G3=(b,c)=>{b=b.split(xT);const g=[];for(let a=0;a<b.length;a++){const d=wT(b[a],c);g.push(d);if("error"===d.type)break}return g};for(var H3={},lL="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),
yT={},nL=0,Qr=0,mL;64>Qr;Qr++)yT[lL[Qr]]=Qr;bD.encode=aD;bD.decode=function(b){var c=0;for(Qr=0;Qr<b.length;Qr++)c=64*c+yT[b.charAt(Qr)];return c};var zT=H3=bD,$x={encode:function(b){var c="",g;for(g in b)b.hasOwnProperty(g)&&(c.length&&(c+="&"),c+=encodeURIComponent(g)+"="+encodeURIComponent(b[g]));return c},decode:function(b){var c={};b=b.split("&");for(var g=0,a=b.length;g<a;g++){var d=b[g].split("=");c[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return c}};$x.encode;$x.decode;var or="undefined"!==
typeof self?self:"undefined"!==typeof window?window:Function("return this")();const pX=setTimeout,qX=clearTimeout;class AT extends Ql{constructor(b){super();this.writable=!1;iz(this,b);this.opts=b;this.query=b.query;this.readyState="";this.socket=b.socket}onError(b,c){b=Error(b);b.type="TransportError";b.description=c;super.emit("error",b);return this}open(){if("closed"===this.readyState||""===this.readyState)this.readyState="opening",this.doOpen();return this}close(){if("opening"===this.readyState||
"open"===this.readyState)this.doClose(),this.onClose();return this}send(b){"open"===this.readyState&&this.write(b)}onOpen(){this.readyState="open";this.writable=!0;super.emit("open")}onData(b){b=wT(b,this.socket.binaryType);this.onPacket(b)}onPacket(b){super.emit("packet",b)}onClose(){this.readyState="closed";super.emit("close")}}class I3 extends AT{constructor(){super(...arguments);this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(b){this.readyState="pausing";const c=()=>{this.readyState=
"paused";b()};if(this.polling||!this.writable){let g=0;this.polling&&(g++,this.once("pollComplete",function(){--g||c()}));this.writable||(g++,this.once("drain",function(){--g||c()}))}else c()}poll(){this.polling=!0;this.doPoll();this.emit("poll")}onData(b){G3(b,this.socket.binaryType).forEach(c=>{if("opening"===this.readyState&&"open"===c.type)this.onOpen();if("close"===c.type)return this.onClose(),!1;this.onPacket(c)});"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===
this.readyState&&this.poll())}doClose(){const b=()=>{this.write([{type:"close"}])};if("open"===this.readyState)b();else this.once("open",b)}write(b){this.writable=!1;F3(b,c=>{this.doWrite(c,()=>{this.writable=!0;this.emit("drain")})})}uri(){var b=this.query||{};const c=this.opts.secure?"https":"http";let g="";!1!==this.opts.timestampRequests&&(b[this.opts.timestampParam]=zT());this.supportsBinary||b.sid||(b.b64=1);this.opts.port&&("https"===c&&443!==Number(this.opts.port)||"http"===c&&80!==Number(this.opts.port))&&
(g=":"+this.opts.port);b=$x.encode(b);const a=-1!==this.opts.hostname.indexOf(":");return c+"://"+(a?"["+this.opts.hostname+"]":this.opts.hostname)+g+this.opts.path+(b.length?"?"+b:"")}}const J3=null!=(new oL({xdomain:!1})).responseType;class K3 extends I3{constructor(b){super(b);if("undefined"!==typeof location){const c="https:"===location.protocol;let g=location.port;g||(g=c?"443":"80");this.xd="undefined"!==typeof location&&b.hostname!==location.hostname||g!==b.port;this.xs=b.secure!==c}b=b&&b.forceBase64;
this.supportsBinary=J3&&!b}request(b={}){Object.assign(b,{xd:this.xd,xs:this.xs},this.opts);return new Cq(this.uri(),b)}doWrite(b,c){b=this.request({method:"POST",data:b});b.on("success",c);b.on("error",g=>{this.onError("xhr post error",g)})}doPoll(){const b=this.request();b.on("data",this.onData.bind(this));b.on("error",c=>{this.onError("xhr poll error",c)});this.pollXhr=b}}class Cq extends Ql{constructor(b,c){super();iz(this,c);this.opts=c;this.method=c.method||"GET";this.uri=b;this.async=!1!==
c.async;this.data=void 0!==c.data?c.data:null;this.create()}create(){const b=pL(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");b.xdomain=!!this.opts.xd;b.xscheme=!!this.opts.xs;const c=this.xhr=new oL(b);try{c.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){c.setDisableHeaderCheck&&c.setDisableHeaderCheck(!0);for(let g in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(g)&&c.setRequestHeader(g,this.opts.extraHeaders[g])}}catch(g){}if("POST"===
this.method)try{c.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(g){}try{c.setRequestHeader("Accept","*/*")}catch(g){}"withCredentials"in c&&(c.withCredentials=this.opts.withCredentials);this.opts.requestTimeout&&(c.timeout=this.opts.requestTimeout);c.onreadystatechange=()=>{if(4===c.readyState)if(200===c.status||1223===c.status)this.onLoad();else this.setTimeoutFn(()=>{this.onError("number"===typeof c.status?c.status:0)},0)};c.send(this.data)}catch(g){this.setTimeoutFn(()=>{this.onError(g)},
0);return}"undefined"!==typeof document&&(this.index=Cq.requestsCount++,Cq.requests[this.index]=this)}onSuccess(){this.emit("success");this.cleanup()}onData(b){this.emit("data",b);this.onSuccess()}onError(b){this.emit("error",b);this.cleanup(!0)}cleanup(b){if("undefined"!==typeof this.xhr&&null!==this.xhr){this.xhr.onreadystatechange=rX;if(b)try{this.xhr.abort()}catch(c){}"undefined"!==typeof document&&delete Cq.requests[this.index];this.xhr=null}}onLoad(){const b=this.xhr.responseText;if(null!==
b)this.onData(b)}abort(){this.cleanup()}}Cq.requestsCount=0;Cq.requests={};"undefined"!==typeof document&&("function"===typeof attachEvent?attachEvent("onunload",qL):"function"===typeof addEventListener&&addEventListener("onpagehide"in or?"pagehide":"unload",qL,!1));const L3=(()=>"function"===typeof Promise&&"function"===typeof Promise.resolve?b=>Promise.resolve().then(b):(b,c)=>c(b,0))(),ay=or.WebSocket||or.MozWebSocket,BT="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===
navigator.product.toLowerCase();class CT extends AT{constructor(b){super(b);this.supportsBinary=!b.forceBase64}get name(){return"websocket"}doOpen(){if(this.check()){var b=this.uri(),c=this.opts.protocols,g=BT?{}:pL(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(g.headers=this.opts.extraHeaders);try{this.ws=BT?new ay(b,c,g):c?new ay(b,
c):new ay(b)}catch(a){return this.emit("error",a)}this.ws.binaryType=this.socket.binaryType||"arraybuffer";this.addEventListeners()}}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref();this.onOpen()};this.ws.onclose=this.onClose.bind(this);this.ws.onmessage=b=>this.onData(b.data);this.ws.onerror=b=>this.onError("websocket error",b)}write(b){this.writable=!1;for(let c=0;c<b.length;c++){const g=c===b.length-1;uT(b[c],this.supportsBinary,a=>{try{this.ws.send(a)}catch(d){}g&&
L3(()=>{this.writable=!0;this.emit("drain")},this.setTimeoutFn)})}}doClose(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}uri(){var b=this.query||{};const c=this.opts.secure?"wss":"ws";let g="";this.opts.port&&("wss"===c&&443!==Number(this.opts.port)||"ws"===c&&80!==Number(this.opts.port))&&(g=":"+this.opts.port);this.opts.timestampRequests&&(b[this.opts.timestampParam]=zT());this.supportsBinary||(b.b64=1);b=$x.encode(b);const a=-1!==this.opts.hostname.indexOf(":");return c+"://"+
(a?"["+this.opts.hostname+"]":this.opts.hostname)+g+this.opts.path+(b.length?"?"+b:"")}check(){return!!ay&&!("__initialize"in ay&&this.name===CT.prototype.name)}}const M3={websocket:CT,polling:K3};class Rr extends Ql{constructor(b,c={}){super();b&&"object"===typeof b&&(c=b,b=null);b?(b=fD(b),c.hostname=b.host,c.secure="https"===b.protocol||"wss"===b.protocol,c.port=b.port,b.query&&(c.query=b.query)):c.host&&(c.hostname=fD(c.host).host);iz(this,c);this.secure=null!=c.secure?c.secure:"undefined"!==
typeof location&&"https:"===location.protocol;c.hostname&&!c.port&&(c.port=this.secure?"443":"80");this.hostname=c.hostname||("undefined"!==typeof location?location.hostname:"localhost");this.port=c.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80");this.transports=c.transports||["polling","websocket"];this.readyState="";this.writeBuffer=[];this.prevBufferLen=0;this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",
rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},c);this.opts.path=this.opts.path.replace(/\/$/,"")+"/";"string"===typeof this.opts.query&&(this.opts.query=$x.decode(this.opts.query));this.pingTimeoutTimer=this.pingTimeout=this.pingInterval=this.upgrades=this.id=null;"function"===typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},
!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1)));this.open()}createTransport(b){{var c=this.opts.query;const g={};for(let a in c)c.hasOwnProperty(a)&&(g[a]=c[a]);c=g}c.EIO=4;c.transport=b;this.id&&(c.sid=this.id);c=Object.assign({},this.opts.transportOptions[b],this.opts,{query:c,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new M3[b](c)}open(){let b;if(this.opts.rememberUpgrade&&
Rr.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))b="websocket";else{if(0===this.transports.length){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}b=this.transports[0]}this.readyState="opening";try{b=this.createTransport(b)}catch(c){this.transports.shift();this.open();return}b.open();this.setTransport(b)}setTransport(b){this.transport&&this.transport.removeAllListeners();this.transport=b;b.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",
this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(b){function c(){k||(k=!0,q(),f.close(),f=null)}function g(){p("transport closed")}function a(){p("socket closed")}function d(r){f&&r.name!==f.name&&c()}let f=this.createTransport(b),k=!1;Rr.priorWebsocketSuccess=!1;const n=()=>{k||(f.send([{type:"ping",data:"probe"}]),f.once("packet",r=>{k||("pong"===r.type&&"probe"===r.data?(this.upgrading=!0,this.emitReserved("upgrading",f),f&&(Rr.priorWebsocketSuccess="websocket"===
f.name,this.transport.pause(()=>{k||"closed"===this.readyState||(q(),this.setTransport(f),f.send([{type:"upgrade"}]),this.emitReserved("upgrade",f),f=null,this.upgrading=!1,this.flush())}))):(r=Error("probe error"),r.transport=f.name,this.emitReserved("upgradeError",r)))}))},p=r=>{r=Error("probe error: "+r);r.transport=f.name;c();this.emitReserved("upgradeError",r)},q=()=>{f.removeListener("open",n);f.removeListener("error",p);f.removeListener("close",g);this.off("close",a);this.off("upgrading",d)};
f.once("open",n);f.once("error",p);f.once("close",g);this.once("close",a);this.once("upgrading",d);f.open()}onOpen(){this.readyState="open";Rr.priorWebsocketSuccess="websocket"===this.transport.name;this.emitReserved("open");this.flush();if("open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let b=0;const c=this.upgrades.length;for(;b<c;b++)this.probe(this.upgrades[b])}}onPacket(b){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",
b),this.emitReserved("heartbeat"),b.type){case "open":this.onHandshake(JSON.parse(b.data));break;case "ping":this.resetPingTimeout();this.sendPacket("pong");this.emitReserved("ping");this.emitReserved("pong");break;case "error":const c=Error("server error");c.code=b.data;this.onError(c);break;case "message":this.emitReserved("data",b.data),this.emitReserved("message",b.data)}}onHandshake(b){this.emitReserved("handshake",b);this.id=b.sid;this.transport.query.sid=b.sid;this.upgrades=this.filterUpgrades(b.upgrades);
this.pingInterval=b.pingInterval;this.pingTimeout=b.pingTimeout;this.onOpen();"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer);this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout);this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){"closed"!==
this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(b,c,g){this.sendPacket("message",b,c,g);return this}send(b,c,g){this.sendPacket("message",b,c,g);return this}sendPacket(b,c,g,a){"function"===typeof c&&(a=c,c=void 0);"function"===typeof g&&(a=g,g=null);if("closing"!==this.readyState&&"closed"!==this.readyState){g=g||{};g.compress=!1!==g.compress;b={type:b,
data:c,options:g};this.emitReserved("packetCreate",b);this.writeBuffer.push(b);if(a)this.once("flush",a);this.flush()}}close(){const b=()=>{this.onClose("forced close");this.transport.close()},c=()=>{this.off("upgrade",c);this.off("upgradeError",c);b()},g=()=>{this.once("upgrade",c);this.once("upgradeError",c)};if("opening"===this.readyState||"open"===this.readyState)if(this.readyState="closing",this.writeBuffer.length)this.once("drain",()=>{this.upgrading?g():b()});else this.upgrading?g():b();return this}onError(b){Rr.priorWebsocketSuccess=
!1;this.emitReserved("error",b);this.onClose("transport error",b)}onClose(b,c){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",b,c),this.writeBuffer=[],this.prevBufferLen=
0}filterUpgrades(b){const c=[];let g=0;const a=b.length;for(;g<a;g++)~this.transports.indexOf(b[g])&&c.push(b[g]);return c}}Rr.protocol=4;Rr.protocol;const sX="function"===typeof ArrayBuffer,DT=Object.prototype.toString,tX="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===DT.call(Blob),uX="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===DT.call(File);var sk;(function(b){b[b.CONNECT=0]="CONNECT";b[b.DISCONNECT=1]="DISCONNECT";b[b.EVENT=
2]="EVENT";b[b.ACK=3]="ACK";b[b.CONNECT_ERROR=4]="CONNECT_ERROR";b[b.BINARY_EVENT=5]="BINARY_EVENT";b[b.BINARY_ACK=6]="BINARY_ACK"})(sk||(sk={}));class N3{encode(b){return b.type!==sk.EVENT&&b.type!==sk.ACK||!jz(b)?[this.encodeAsString(b)]:(b.type=b.type===sk.EVENT?sk.BINARY_EVENT:sk.BINARY_ACK,this.encodeAsBinary(b))}encodeAsString(b){let c=""+b.type;if(b.type===sk.BINARY_EVENT||b.type===sk.BINARY_ACK)c+=b.attachments+"-";b.nsp&&"/"!==b.nsp&&(c+=b.nsp+",");null!=b.id&&(c+=b.id);null!=b.data&&(c+=
JSON.stringify(b.data));return c}encodeAsBinary(b){var c=[];b.data=dD(b.data,c);b.attachments=c.length;b=this.encodeAsString(b);c.unshift(b);return c}}class ET extends Ql{constructor(){super()}add(b){if("string"===typeof b)b=this.decodeString(b),b.type===sk.BINARY_EVENT||b.type===sk.BINARY_ACK?(this.reconstructor=new O3(b),0===b.attachments&&super.emitReserved("decoded",b)):super.emitReserved("decoded",b);else if(cD(b)||b.base64)if(this.reconstructor){if(b=this.reconstructor.takeBinaryData(b))this.reconstructor=
null,super.emitReserved("decoded",b)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+b);}decodeString(b){let c=0;const g={type:Number(b.charAt(0))};if(void 0===sk[g.type])throw Error("unknown packet type "+g.type);if(g.type===sk.BINARY_EVENT||g.type===sk.BINARY_ACK){for(var a=c+1;"-"!==b.charAt(++c)&&c!=b.length;);a=b.substring(a,c);if(a!=Number(a)||"-"!==b.charAt(c))throw Error("Illegal attachments");g.attachments=Number(a)}if("/"===b.charAt(c+
1)){for(a=c+1;++c&&","!==b.charAt(c)&&c!==b.length;);g.nsp=b.substring(a,c)}else g.nsp="/";a=b.charAt(c+1);if(""!==a&&Number(a)==a){for(a=c+1;++c;){const f=b.charAt(c);if(null==f||Number(f)!=f){--c;break}if(c===b.length)break}g.id=Number(b.substring(a,c+1))}if(b.charAt(++c)){b=b.substr(c);try{var d=JSON.parse(b)}catch(f){d=!1}if(ET.isPayloadValid(g.type,d))g.data=d;else throw Error("invalid payload");}return g}static isPayloadValid(b,c){switch(b){case sk.CONNECT:return"object"===typeof c;case sk.DISCONNECT:return void 0===
c;case sk.CONNECT_ERROR:return"string"===typeof c||"object"===typeof c;case sk.EVENT:case sk.BINARY_EVENT:return Array.isArray(c)&&0<c.length;case sk.ACK:case sk.BINARY_ACK:return Array.isArray(c)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class O3{constructor(b){this.packet=b;this.buffers=[];this.reconPack=b}takeBinaryData(b){this.buffers.push(b);return this.buffers.length===this.reconPack.attachments?(b=this.reconPack,b.data=eD(b.data,this.buffers),b.attachments=
void 0,this.finishedReconstruction(),b):null}finishedReconstruction(){this.reconPack=null;this.buffers=[]}}var P3=Object.freeze({__proto__:null,Decoder:ET,Encoder:N3,get PacketType(){return sk},protocol:5}),dn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,FT={};FT=ru;ru.prototype.duration=function(){var b=(this||dn).ms*Math.pow((this||dn).factor,(this||dn).attempts++);if((this||dn).jitter){var c=Math.random(),g=Math.floor(c*(this||dn).jitter*b);b=0==(Math.floor(10*
c)&1)?b-g:b+g}return Math.min(b,(this||dn).max)|0};ru.prototype.reset=function(){(this||dn).attempts=0};ru.prototype.setMin=function(b){(this||dn).ms=b};ru.prototype.setMax=function(b){(this||dn).max=b};ru.prototype.setJitter=function(b){(this||dn).jitter=b};var Q3=FT;const R3=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class GT extends Ql{constructor(b,c,g){super();this.connected=!1;this.disconnected=!0;this.receiveBuffer=[];this.sendBuffer=
[];this.ids=0;this.acks={};this.flags={};this.io=b;this.nsp=c;g&&g.auth&&(this.auth=g.auth);this.io._autoConnect&&this.open()}subEvents(){if(!this.subs){var b=this.io;this.subs=[Qo(b,"open",this.onopen.bind(this)),Qo(b,"packet",this.onpacket.bind(this)),Qo(b,"error",this.onerror.bind(this)),Qo(b,"close",this.onclose.bind(this))]}}get active(){return!!this.subs}connect(){if(this.connected)return this;this.subEvents();this.io._reconnecting||this.io.open();if("open"===this.io._readyState)this.onopen();
return this}open(){return this.connect()}send(...b){b.unshift("message");this.emit.apply(this,b);return this}emit(b,...c){if(R3.hasOwnProperty(b))throw Error('"'+b+'" is a reserved event name');c.unshift(b);b={type:sk.EVENT,data:c,options:{}};b.options.compress=!1!==this.flags.compress;if("function"===typeof c[c.length-1]){const g=this.ids++;c=c.pop();this._registerAckCallback(g,c);b.id=g}c=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;if(!this.flags.volatile||c&&this.connected)this.connected?
this.packet(b):this.sendBuffer.push(b);this.flags={};return this}_registerAckCallback(b,c){const g=this.flags.timeout;if(void 0===g)this.acks[b]=c;else{var a=this.io.setTimeoutFn(()=>{delete this.acks[b];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===b&&this.sendBuffer.splice(d,1);c.call(this,Error("operation has timed out"))},g);this.acks[b]=(...d)=>{this.io.clearTimeoutFn(a);c.apply(this,[null,...d])}}}packet(b){b.nsp=this.nsp;this.io._packet(b)}onopen(){"function"==typeof this.auth?
this.auth(b=>{this.packet({type:sk.CONNECT,data:b})}):this.packet({type:sk.CONNECT,data:this.auth})}onerror(b){this.connected||this.emitReserved("connect_error",b)}onclose(b){this.connected=!1;this.disconnected=!0;delete this.id;this.emitReserved("disconnect",b)}onpacket(b){if(b.nsp===this.nsp)switch(b.type){case sk.CONNECT:if(b.data&&b.data.sid)this.onconnect(b.data.sid);else this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));
break;case sk.EVENT:this.onevent(b);break;case sk.BINARY_EVENT:this.onevent(b);break;case sk.ACK:this.onack(b);break;case sk.BINARY_ACK:this.onack(b);break;case sk.DISCONNECT:this.ondisconnect();break;case sk.CONNECT_ERROR:this.destroy();const c=Error(b.data.message);c.data=b.data.data;this.emitReserved("connect_error",c)}}onevent(b){const c=b.data||[];null!=b.id&&c.push(this.ack(b.id));this.connected?this.emitEvent(c):this.receiveBuffer.push(Object.freeze(c))}emitEvent(b){if(this._anyListeners&&
this._anyListeners.length){const c=this._anyListeners.slice();for(const g of c)g.apply(this,b)}super.emit.apply(this,b)}ack(b){const c=this;let g=!1;return function(...a){g||(g=!0,c.packet({type:sk.ACK,id:b,data:a}))}}onack(b){const c=this.acks[b.id];"function"===typeof c&&(c.apply(this,b.data),delete this.acks[b.id])}onconnect(b){this.id=b;this.connected=!0;this.disconnected=!1;this.emitBuffered();this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(b=>this.emitEvent(b));this.receiveBuffer=
[];this.sendBuffer.forEach(b=>this.packet(b));this.sendBuffer=[]}ondisconnect(){this.destroy();this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(b=>b()),this.subs=void 0);this.io._destroy(this)}disconnect(){this.connected&&this.packet({type:sk.DISCONNECT});this.destroy();if(this.connected)this.onclose("io client disconnect");return this}close(){return this.disconnect()}compress(b){this.flags.compress=b;return this}get volatile(){this.flags.volatile=!0;return this}timeout(b){this.flags.timeout=
b;return this}onAny(b){this._anyListeners=this._anyListeners||[];this._anyListeners.push(b);return this}prependAny(b){this._anyListeners=this._anyListeners||[];this._anyListeners.unshift(b);return this}offAny(b){if(!this._anyListeners)return this;if(b){const c=this._anyListeners;for(let g=0;g<c.length;g++)if(b===c[g]){c.splice(g,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}class gD extends Ql{constructor(b,c){var g;super();this.nsps={};this.subs=[];
b&&"object"===typeof b&&(c=b,b=void 0);c=c||{};c.path=c.path||"/socket.io";this.opts=c;iz(this,c);this.reconnection(!1!==c.reconnection);this.reconnectionAttempts(c.reconnectionAttempts||Infinity);this.reconnectionDelay(c.reconnectionDelay||1E3);this.reconnectionDelayMax(c.reconnectionDelayMax||5E3);this.randomizationFactor(null!==(g=c.randomizationFactor)&&void 0!==g?g:.5);this.backoff=new Q3({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==
c.timeout?2E4:c.timeout);this._readyState="closed";this.uri=b;b=c.parser||P3;this.encoder=new b.Encoder;this.decoder=new b.Decoder;(this._autoConnect=!1!==c.autoConnect)&&this.open()}reconnection(b){if(!arguments.length)return this._reconnection;this._reconnection=!!b;return this}reconnectionAttempts(b){if(void 0===b)return this._reconnectionAttempts;this._reconnectionAttempts=b;return this}reconnectionDelay(b){var c;if(void 0===b)return this._reconnectionDelay;this._reconnectionDelay=b;null===(c=
this.backoff)||void 0===c?void 0:c.setMin(b);return this}randomizationFactor(b){var c;if(void 0===b)return this._randomizationFactor;this._randomizationFactor=b;null===(c=this.backoff)||void 0===c?void 0:c.setJitter(b);return this}reconnectionDelayMax(b){var c;if(void 0===b)return this._reconnectionDelayMax;this._reconnectionDelayMax=b;null===(c=this.backoff)||void 0===c?void 0:c.setMax(b);return this}timeout(b){if(!arguments.length)return this._timeout;this._timeout=b;return this}maybeReconnectOnOpen(){!this._reconnecting&&
this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(b){if(~this._readyState.indexOf("open"))return this;const c=this.engine=new Rr(this.uri,this.opts),g=this;this._readyState="opening";this.skipReconnect=!1;const a=Qo(c,"open",function(){g.onopen();b&&b()}),d=Qo(c,"error",f=>{g.cleanup();g._readyState="closed";this.emitReserved("error",f);b?b(f):g.maybeReconnectOnOpen()});if(!1!==this._timeout){const f=this._timeout;0===f&&a();const k=this.setTimeoutFn(()=>{a();c.close();c.emit("error",
Error("timeout"))},f);this.opts.autoUnref&&k.unref();this.subs.push(function(){clearTimeout(k)})}this.subs.push(a);this.subs.push(d);return this}connect(b){return this.open(b)}onopen(){this.cleanup();this._readyState="open";this.emitReserved("open");const b=this.engine;this.subs.push(Qo(b,"ping",this.onping.bind(this)),Qo(b,"data",this.ondata.bind(this)),Qo(b,"error",this.onerror.bind(this)),Qo(b,"close",this.onclose.bind(this)),Qo(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(b){this.decoder.add(b)}ondecoded(b){this.emitReserved("packet",
b)}onerror(b){this.emitReserved("error",b)}socket(b,c){let g=this.nsps[b];g||(g=new GT(this,b,c),this.nsps[b]=g);return g}_destroy(b){b=Object.keys(this.nsps);for(const c of b)if(this.nsps[c].active)return;this._close()}_packet(b){const c=this.encoder.encode(b);for(let g=0;g<c.length;g++)this.engine.write(c[g],b.options)}cleanup(){this.subs.forEach(b=>b());this.subs.length=0;this.decoder.destroy()}_close(){this.skipReconnect=!0;this._reconnecting=!1;this.onclose("forced close");this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(b){this.cleanup();
this.backoff.reset();this._readyState="closed";this.emitReserved("close",b);this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const b=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const c=this.backoff.duration();this._reconnecting=!0;const g=this.setTimeoutFn(()=>{b.skipReconnect||(this.emitReserved("reconnect_attempt",b.backoff.attempts),
b.skipReconnect||b.open(a=>{if(a)b._reconnecting=!1,b.reconnect(),this.emitReserved("reconnect_error",a);else b.onreconnect()}))},c);this.opts.autoUnref&&g.unref();this.subs.push(function(){clearTimeout(g)})}}onreconnect(){const b=this.backoff.attempts;this._reconnecting=!1;this.backoff.reset();this.emitReserved("reconnect",b)}}const xw={};Object.assign(kz,{Manager:gD,Socket:GT,io:kz,connect:kz});var cj=window.lively.FreezerRuntime.recorderFor("lively.2lively/client.js");cj.determineLocation=function(){return"undefined"!==
typeof document&&document.location?System.baseURL||document.location.origin:cj.isNode?System._nodeRequire("os").hostname():System.baseURL};cj.promise=yj;cj.fun=cp;cj.obj=bj;cj.events=bt;cj.num=Gm;cj.L2LConnection=AH;cj.defaultActions=BH;cj.defaultClientActions=CH;cj.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof process&&process.env;cj._ioClient=kz;cj.resource=Am;cj.ioClient=cj.ioClient||void 0;cj.isNode?(cj.require=System._nodeRequire("module")._load,cj.ioClient=
cj.require("socket.io-client")):cj.ioClient=cj._ioClient;cj.urlHelper={isRoot:function(b){return"/"===cj.urlHelper.path(b)},root:function(b){return cj.urlHelper.isRoot(b)?b:b.slice(0,-cj.urlHelper.path(b).length)+"/"},path:function(){var b=/^[a-z0-9-_\.]+:/,c=/^\/\/[^\/]+/;return function(g){g=g.replace(b,"").replace(c,"");return""===g?"/":g}}(),join:function(b,c){b.endsWith("/")&&(b=b.slice(0,-1));c.startsWith("/")&&(c=c.slice(1));return b+"/"+c}};var bB=bd("bZ",function(b){function c(a,d,f,k){Sd(this,
c);var n=g.call(this);cj.events.makeEmitter(Od(n));n.info=k;n.origin=a;n.path=d;n.namespace=f.replace(/^\/?/,"/");n.trackerId=null;n._socketioClient=null;n._reconnectState={closed:!1,autoReconnect:!0,isReconnecting:!1,isReconnectingViaSocketio:!1,registerAttempt:0,registerProcess:null,isOpening:!1};Object.keys(cj.defaultActions).forEach(function(p){return n.addService(p,cj.defaultActions[p])});Object.keys(cj.defaultClientActions).forEach(function(p){return n.addService(p,cj.defaultClientActions[p])});
return n}vd(c,b);var g=qb(c);uc(c,null,[{key:"clientKey",value:function(a,d,f){a=a.replace(/\/$/,"");d=d.replace(/^\//,"");f=f.replace(/^\//,"");return"".concat(a,"-").concat(d,"-").concat(f)}},{key:"forLivelyInBrowser",value:function(a){var d=!!a;a=Object.assign({type:"lively.morphic browser"},a);var f=this["default"]();if(!f)return cj.L2LClient.ensure({url:cj.resource(cj.determineLocation()).join("/lively-socket.io").url,namespace:"l2l",info:a});d&&!cj.obj.equals(f.info,a)&&f.isRegistered()&&(f.info=
a,f.unregister().then(function(){return f.register()})["catch"](function(k){return console.error("l2l re-register on info change errored: "+k)}));return f}},{key:"default",value:function(){var a=cj.L2LClient.clients.keys().next().value;return cj.L2LClient.clients.get(a)}},{key:"create",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=a.debug;d=void 0===d?!1:d;var f=a.url,k=a.namespace,n=a.autoOpen;n=void 0===n?!0:n;a=a.info;a=void 0===a?{}:a;if(!f)throw Error("L2LClient needs server url!");
var p=cj.urlHelper.root(f).replace(/\/+$/,"");f=cj.urlHelper.path(f);k=new this(p,f,k||"",a);n&&k.register();k.debug=d;return k}},{key:"ensure",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=a.url,f=a.namespace;if(!d)throw Error("L2LClient needs server url!");var k=cj.urlHelper.root(d).replace(/\/+$/,""),n=cj.urlHelper.path(d);k=this.clientKey(k,n,f||"");(n=this.clients.get(k))||this.clients.set(k,n=this.create(Object.assign({},a,{url:d,namespace:f})));return n}},
{key:"clients",get:function(){return this._clients||(this._clients=new Map)}}]);uc(c,[{key:"isOnline",value:function(){return this.socket&&this.socket.connected}},{key:"isRegistered",value:function(){return this.isOnline()&&!!this.trackerId}},{key:"open",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k=this,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.isOnline()){r.next=2;break}return r.abrupt("return",this);case 2:if(!this._reconnectState.isOpening){r.next=
4;break}return r.abrupt("return",this);case 4:return r.next=6,this.close();case 6:return this._reconnectState.closed=!1,n=cj.urlHelper.join(this.origin,this.namespace),p={path:this.path,transports:["websocket","polling"]},q=this._socketioClient=cj.ioClient(n,p),this.debug&&console.log("[".concat(this,"] connecting")),q.on("error",function(u){k._reconnectState.isOpening=!1;k.debug&&console.log("[".concat(k,"] errored: ").concat(u))}),q.on("close",function(u){return k.debug&&console.log("[".concat(k,
"] closed: ").concat(u))}),q.on("reconnect_failed",function(){return k.debug&&console.log("[".concat(k,"] could not reconnect"))}),q.on("reconnect_error",function(u){return k.debug&&console.log("[".concat(k,"] reconnect error ").concat(u))}),q.on("connect",function(){k.debug&&console.log("[".concat(k,"] connected"));k.emit("connected",k);k._reconnectState.isOpening=!1;k._reconnectState.isReconnecting=!1;k._reconnectState.isReconnectingViaSocketio=!1}),q.on("disconnect",function(){k._reconnectState.isOpening=
!1;k.debug&&console.log("[".concat(k,"] disconnected"));k.emit("disconnected",k);k.trackerId?("tracker"!==k.trackerId&&(k.renameTarget(k.trackerId,"tracker"),k.trackerId=null),k._reconnectState.closed?k.debug&&console.log("[".concat(k,"] won't reconnect b/c client is marked as closed")):k._reconnectState.autoReconnect?(k._reconnectState.isReconnecting=!0,setTimeout(function(){k._reconnectState.closed?k.debug&&console.log("[".concat(k,"] won't reconnect b/c client is marked as closed 2")):k._reconnectState.isReconnectingViaSocketio?
k.debug&&console.log("[".concat(k,"] won't reconnect again, client already reconnecting")):(k.debug&&console.log("[".concat(k,"] initiating reconnection to tracker")),k.register())},20)):k.debug&&console.log("[".concat(k,"] won't reconnect b/c client has reconnection disabled"))):(k.debug&&console.log("[".concat(k,"] disconnect: don't have a tracker id, won't try reconnect")),k.trackerId="tracker")}),q.on("reconnecting",function(){k.debug&&console.log("[".concat(k,"] reconnecting"),k._reconnectState);
k.emit("reconnecting",k);k._reconnectState.closed?(k._reconnectState.isReconnecting=!1,k._reconnectState.isReconnectingViaSocketio=!1,q.close(),k.close()):(k._reconnectState.isReconnecting=!0,k._reconnectState.isReconnectingViaSocketio=!0)}),q.on("reconnect",function(){k.debug&&console.log("[".concat(k,"] reconnected"));k._reconnectState.isReconnecting=!1;k._reconnectState.isReconnectingViaSocketio=!1;k.register();if(k.onReconnect&&"function"===typeof k.onReconnect)k.onReconnect()}),this.installEventToMessageTranslator(q),
this._reconnectState.isOpening=!0,r.abrupt("return",(new Promise(function(u,x){q.once("error",x);q.once("connect",u)})).then(function(){return k}));case 22:case "end":return r.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"onReconnect",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:k=(new Date).toTimeString(),console.log("Reconnected at ".concat(k));case 2:case "end":return n.stop()}},
f)}));return function(){return a.apply(this,arguments)}}()},{key:"close",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k=this,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:this._reconnectState.closed=!0;if(n=this.socket)n.removeAllListeners("reconnect"),n.removeAllListeners("reconnecting"),n.removeAllListeners("disconnect"),n.removeAllListeners("connect"),n.removeAllListeners("reconnect_error"),n.removeAllListeners("reconnect_failed"),n.removeAllListeners("close"),
n.removeAllListeners("error"),n.close();this.debug&&console.log("[".concat(this,"] closing..."));if(!this.isRegistered()){q.next=7;break}q.next=7;return this.unregister();case 7:if(this.isOnline()||this.socket){q.next=10;break}this.debug&&(p=this.isOnline()?"no socket":"not online",this.debug&&console.log("[".concat(this,"] cannot close: ").concat(p)));return q.abrupt("return",this);case 10:if(!n||n.connected){q.next=13;break}this.debug&&console.log("[".concat(this,"] socket not connected, considering client closed"));
return q.abrupt("return",this);case 13:return q.abrupt("return",Promise.race([cj.promise.delay(2E3).then(function(){return n.removeAllListeners("disconnect")}),new Promise(function(r){return n.once("disconnect",r)})]).then(function(){k.debug&&console.log("[".concat(k,"] closed"));return k}));case 14:case "end":return q.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"remove",value:function(){var a=this.constructor.clientKey(this.origin,this.path,this.namespace);this.constructor.clients["delete"](a);
return this.close()}},{key:"register",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k=this,n,p,q,r,u,x,y,D;return regeneratorRuntime.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!this.isRegistered()){H.next=2;break}return H.abrupt("return");case 2:if(!this._reconnectState.closed){H.next=6;break}this.debug&&console.log("[".concat(this,"] not registering this b/c closed"));this._reconnectState.registerAttempt=0;return H.abrupt("return");case 6:if(!this._reconnectState.registerProcess){H.next=
9;break}this.debug&&console.log("[".concat(this,"] not registering this b/c register process exists"));return H.abrupt("return");case 9:H.prev=9;if(this.isOnline()){H.next=13;break}H.next=13;return this.open();case 13:return this.debug&&console.log("[".concat(this,"] register")),H.next=16,this.sendToAndWait("tracker","register",Object.assign({userName:"unknown",type:"l2l "+(cj.isNode?"node":"browser"),location:cj.determineLocation()},this.info));case 16:n=H.sent;if(n.data){H.next=21;break}p=Error("Register answer is empty!");
this.emit("error",p);throw p;case 21:if(!n.data.isError){H.next=25;break}q=Error(n.data.error);this.emit("error",q);throw q;case 25:this._reconnectState.registerAttempt=0;r=n.data;u=r.trackerId;x=r.messageNumber;this.trackerId=u;this._incomingOrderNumberingBySenders.set(u,x||0);this.emit("registered",{trackerId:u});if(this.onReconnect&&"function"===typeof this.onReconnect)this.onReconnect();H.next=39;break;case 33:H.prev=33,H.t0=H["catch"](9),console.error("Error in register request of ".concat(this,
": ").concat(H.t0)),y=this._reconnectState.registerAttempt++,D=cj.num.backoff(y,4,3E5),this._reconnectState.registerProcess=setTimeout(function(){k._reconnectState.registerProcess=null;k.register()},D);case 39:case "end":return H.stop()}},f,this,[[9,33]])}));return function(){return a.apply(this,arguments)}}()},{key:"unregister",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.isRegistered()){n.next=
2;break}return n.abrupt("return");case 2:return this.debug&&console.log("[".concat(this,"] unregister")),k=this.trackerId,n.prev=4,n.next=7,this.sendToAndWait(this.trackerId,"unregister",{});case 7:n.next=11;break;case 9:n.prev=9,n.t0=n["catch"](4);case 11:this.renameTarget(k,"tracker"),this.trackerId=null,this.emit("unregistered",this);case 14:case "end":return n.stop()}},f,this,[[4,9]])}));return function(){return a.apply(this,arguments)}}()},{key:"whenRegistered",value:function(a){var d=this;return cj.promise.waitFor(a,
function(){return d.isRegistered()})["catch"](function(f){return Promise.reject(/timeout/i.test(String(f))?Error("Timeout in ".concat(d,".whenRegistered")):f)})}},{key:"send",value:function(a,d){var f=this,k=this.prepareSend(a,d);k=Wb(k,2);a=k[0];d=k[1];this.whenOnline().then(function(){var n=f.socket,p=a,q=p.action;p=p.target;if(!n)throw Error("Trying to send message ".concat(q," to ").concat(p," but cannot find a connection to it!"));"function"===typeof d?n.emit(q,a,d):n.emit(q,a)})}},{key:"joinRoom",
value:function(a){var d=this;return this.whenOnline().then(function(){return d.sendToAndWait(d.trackerId,"[broadcast] join room",{room:a})})}},{key:"leaveRoom",value:function(a){var d=this;return this.whenOnline().then(function(){return d.sendToAndWait(d.trackerId,"[broadcast] leave room",{room:a})})}},{key:"broadcast",value:function(a,d,f){var k=this,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!1,p={action:d,room:a,broadcast:f};3<arguments.length&&void 0!==arguments[3]&&arguments[3]&&
(p.isSystemBroadcast=!0);n&&(p.isMultiServerBroadcast=!0);return this.whenOnline().then(function(){return k.sendToAndWait(k.trackerId,"[broadcast] send",p)})}},{key:"listRoomMembers",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,this.sendToAndWait(this.trackerId,"[broadcast] list room members",{room:f});case 2:return n=q.sent,p=n.data,q.abrupt("return",p);case 5:case "end":return q.stop()}},
k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"joinedRooms",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.sendToAndWait(this.trackerId,"[broadcast] my rooms",{});case 2:return k=p.sent,n=k.data,p.abrupt("return",n);case 5:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"listRooms",value:function(){var a=
Cb(regeneratorRuntime.mark(function f(){var k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.sendToAndWait(this.trackerId,"[broadcast] all rooms",{});case 2:return k=p.sent,n=k.data,p.abrupt("return",n);case 5:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"listPeers",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,u,x=arguments;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=
y.next){case 0:k=0<x.length&&void 0!==x[0]?x[0]:!1;n=this._peersCached;p=Date.now();if(!(!k&&n&&1E3>p-n.timestamp)){y.next=6;break}return y.abrupt("return",this._peersCached.sessions);case 6:if(this.isOnline()){y.next=8;break}return y.abrupt("return",[]);case 8:return y.next=10,this.sendToAndWait(this.trackerId,"getClients",{});case 10:return q=y.sent,r=q.data,u=r.map(function(D){var H=Wb(D,2);D=H[0];var I=H[1],N=I.info||{};H=N.userRealm;var J=N.userToken,sa=N.l2lUserToken,ja=N.location,Ha=N.type;
N=N.world;D=Object.assign({},cj.obj.dissoc(I,["info"]),{id:D,world:N,location:ja,type:Ha});(J=J||sa)&&"null"!==J&&(lively.user?D.user=lively.user.ClientUser.fromToken(J,H):(D.userToken=J,D.userRealm=H));return D}),this._peersCached={timestamp:p,sessions:u},y.abrupt("return",u);case 15:case "end":return y.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"toString",value:function(){var a=this.origin,d=this.path,f=this.namespace,k=this.id,n=this.isOnline()?this.isRegistered()?
"registered":"unregistered":"disconnected";k=(k||"").slice(0,5);return"L2LClient(".concat(k," ").concat(a).concat(d," - ").concat(f," ").concat(n,")")}},{key:"socket",get:function(){return this._socketioClient}},{key:"socketId",get:function(){return this.socket?this.socket.id:null}}]);return c}(cj.L2LConnection));cj.L2LClient=bB;cj["default"]=bB;var TP=Object.freeze({__proto__:null,"default":bB});bd("cd",TP);var st=window.lively.FreezerRuntime.recorderFor("lively.shell/command-interface.js");st.promise=
yj;st.events=bt;var EH=function(){function b(){Sd(this,b);this._stderr=this._stdout="";this.exitCode=void 0;this.commandString="";this.process=null;this._whenDone=st.promise.deferred();this._whenStarted=st.promise.deferred();this.startTime=0;this.lastSignal=null;st.events.makeEmitter(this)}uc(b,null,[{key:"findCommand",value:function(c){return this.commands.find(function(g){return g.pid===c})}},{key:"commands",get:function(){return this._commands||(this._commands=[])}}]);uc(b,[{key:"isRunning",value:function(){return this.process&&
void 0===this.exitCode}},{key:"isDone",value:function(){return void 0!==this.exitCode}},{key:"whenStarted",value:function(){return this._whenStarted.promise}},{key:"whenDone",value:function(){return this._whenDone.promise}},{key:"spawn",value:function(){throw Error("not yet implemented");}},{key:"kill",value:function(){this.lastSignal=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"KILL"}},{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.commandString,
", ").concat(this.status,")")}},{key:"isShellCommand",get:function(){return!0}},{key:"status",get:function(){return this.process?void 0===this.exitCode?"running, pid ".concat(this.pid):"exited ".concat(this.exitCode,", pid ").concat(this.pid):"not started"}},{key:"pid",get:function(){return this.process?this.process.pid:null}},{key:"output",get:function(){return this.stdout+(this.stderr?"\n"+this.stderr:"")}},{key:"stdout",get:function(){return this._stdout}},{key:"stderr",get:function(){return this._stderr}}]);
return b}();st.CommandInterface=EH;st["default"]=EH;var Li=window.lively.FreezerRuntime.recorderFor("lively.shell/client-command.js");Li.runCommand=su;Li.defaultDirectory=lz;Li.env=mz;Li.readFile=iD;Li.writeFile=jD;Li.CommandInterface=EH;Li.promise=yj;Li.arr=aj;Li.obj=bj;Li.signal=Ln;Li.debug=!1;var FH=function(b){function c(a){Sd(this,c);var d=g.call(this);d.debug=Li.debug;d.l2lClient=a;return d}vd(c,b);var g=qb(c);uc(c,null,[{key:"installLively2LivelyServices",value:function(a){Object.keys(Li.L2LServices).forEach(function(d){return a.addService(d,
function(){var f=Cb(regeneratorRuntime.mark(function r(n,p,q){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Li.L2LServices[d](n,p,q));case 1:case "end":return u.stop()}},r)}));return function(n,p,q){return f.apply(this,arguments)}}())})}}]);uc(c,[{key:"envForCommand",value:function(a){var d=this.l2lClient,f=d.id,k=d.origin,n=d.path;d=d.namespace;var p=a||{};a=p.env;p=p.owner;a=a||{};p&&(a.LIVELY_COMMAND_OWNER=p);return Object.assign({ASKPASS_SESSIONID:f,
L2L_EDITOR_SESSIONID:f,L2L_SESSIONTRACKER_SERVER:k,L2L_SESSIONTRACKER_PATH:n,L2L_SESSIONTRACKER_NS:d},a)}},{key:"spawn",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k=this,n,p,q,r,u,x,y,D,H,I=arguments;return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:n=0<I.length&&void 0!==I[0]?I[0]:{command:null,env:{},cwd:null,stdin:null};p=this.l2lClient;q=n.command;r=n.env;u=n.cwd;x=n.stdin;this.startTime=new Date;r=this.envForCommand(n);this.debug&&console.log("".concat(this,
" spawning ").concat(q));this.debug&&this.whenStarted().then(function(){return console.log("".concat(k," started"))});this.debug&&this.whenDone().then(function(){return console.log("".concat(k," exited"))});Li.arr.pushIfNotIncluded(this.constructor.commands,this);this.commandString=Array.isArray(q)?q.join(""):q;if(p.isOnline()){N.next=14;break}y="L2L not connected";N.next=18;break;case 14:return N.next=16,p.sendToAndWait(p.trackerId,"lively.shell.spawn",{command:q,env:r,cwd:u,stdin:x},{ackTimeout:3E4});
case 16:Li.__inter0__=N.sent,H=Li.__inter0__.data,y=H.error,D=H.pid;case 18:if(!y){N.next=25;break}Li.debug&&console.error("[".concat(this,"] error at start: ").concat(y));this.process={error:y};this.exitCode=1;Li.signal(this,"error",y);this._whenDone.reject(y);return N.abrupt("return");case 25:return this.process={pid:D},Li.debug&&console.log("[".concat(this,"] got pid ").concat(D)),Li.signal(this,"pid",D),this._whenStarted.resolve(),N.abrupt("return",this);case 30:case "end":return N.stop()}},f,
this)}));return function(){return a.apply(this,arguments)}}()},{key:"writeToStdin",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(this.isRunning()){q.next=2;break}return q.abrupt("return");case 2:return n=this.l2lClient,p=this.pid,q.next=5,n.sendToAndWait(n.trackerId,"lively.shell.writeToStdin",{pid:p,stdin:String(f)});case 5:case "end":return q.stop()}},k,this)}));return function(f){return a.apply(this,
arguments)}}()},{key:"kill",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,u,x,y=arguments;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:k=0<y.length&&void 0!==y[0]?y[0]:"KILL";if(this.isRunning()){D.next=3;break}return D.abrupt("return");case 3:return Li.debug&&console.log("".concat(this," signaling ").concat(k)),this.lastSignal=k,n=this.pid,p=this.l2lClient,D.next=8,p.sendToAndWait(p.trackerId,"lively.shell.kill",{pid:n});case 8:q=D.sent;
r=q.data;u=r.status;x=r.error;Li.debug&&console.log("".concat(this," kill send: ").concat(x||u));if(!x){D.next=15;break}throw Error(x);case 15:return D.abrupt("return",this.whenDone());case 16:case "end":return D.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"onOutput",value:function(a){var d=a.stdout;a=a.stderr;d&&(this._stdout+=d,Li.signal(this,"stdout",d),this.emit("stdout",d));a&&(this._stderr+=a,Li.signal(this,"stderr",a),this.emit("stderr",a))}},{key:"onClose",
value:function(a){Li.arr.remove(this.constructor.commands,this);this.exitCode=a;this.emit("close",a);Li.signal(this,"close",a);this._whenDone.resolve(this)}},{key:"onError",value:function(a){Li.arr.remove(this.constructor.commands,this);this._stderr+=a.stack;this.exitCode=1;this.emit("error",a.stack);Li.signal(this,"error",a.stack);this._whenDone.reject(a)}}]);return c}(Li.CommandInterface);Li.ClientCommand=FH;Li.runCommand=su;Li.dirCache={};Li.defaultDirectory=lz;Li.env=mz;Li.readFile=iD;Li.writeFile=
jD;Li.cmd=Li.cmd||void 0;Li.L2LServices={"lively.shell.onOutput":function(){var b=Cb(regeneratorRuntime.mark(function k(g,a,d,f){var n,p,q,r;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return n=a.data,p=n.pid,q=n.stdout,r=n.stderr,Li.debug&&console.log("[lively.shell] client received lively.shell.onOutput for command ".concat(p)),u.prev=2,u.next=5,Li.promise.waitFor(1E3,function(){return Li.ClientCommand.findCommand(p)});case 5:Li.cmd=u.sent;u.next=12;break;case 8:return u.prev=
8,u.t0=u["catch"](2),console.warn("[lively.shell] received output for command ".concat(p," but it isn't registered!'")),u.abrupt("return");case 12:Li.cmd.onOutput({stdout:q,stderr:r});case 13:case "end":return u.stop()}},k,null,[[2,8]])}));return function(g,a,d,f){return b.apply(this,arguments)}}(),"lively.shell.onExit":function(){var b=Cb(regeneratorRuntime.mark(function k(g,a,d,f){var n,p,q,r;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return n=a.data,p=n.pid,
q=n.code,r=n.error,Li.debug&&console.log("[lively.shell] client received lively.shell.onExit for command ".concat(p)),u.prev=2,u.next=5,Li.promise.waitFor(1E3,function(){return Li.ClientCommand.findCommand(p)});case 5:Li.cmd=u.sent;u.next=12;break;case 8:return u.prev=8,u.t0=u["catch"](2),console.warn("[lively.shell] received exit message for command ".concat(p," but it isn't registered!'")),u.abrupt("return");case 12:if(r)"string"===typeof r&&(r=Error(r)),Li.cmd.onError(r);else Li.cmd.onClose(q);
case 13:case "end":return u.stop()}},k,null,[[2,8]])}));return function(g,a,d,f){return b.apply(this,arguments)}}()};Li["default"]=FH;var UP=Object.freeze({__proto__:null,"default":FH,runCommand:su,defaultDirectory:lz,env:mz,readFile:iD,writeFile:jD});bd("ce",UP);var xk=window.lively.FreezerRuntime.recorderFor("lively.ide/shell/shell-interface.js");xk.runCommand=nz;xk.defaultDirectory=yw;xk.env=lD;xk.readFile=function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};c=c||{};var g=
xk.runCommand('cat "'.concat(b,'"'),c);return g.whenDone().then(function(){return g.output})};xk.writeFile=function(b,c,g){"string"===typeof c&&(c={content:c});c=c||{};c.content=c.content||"";"win32"!==this.PLATFORM&&(b='"'+b+'"');b=this.run("tee "+b,{stdin:c.content,cwd:c.cwd});c.onEnd&&lively.bindings.connect(b,"end",c,"onEnd");g&&lively.bindings.connect(b,"end",{thenDo:g},"thenDo");return b};xk.parseCommand=mD;xk.doGrep=nD;xk.L2LClient=bB;xk._runCommand=su;xk._env=mz;xk._defaultDirectory=lz;xk.string=
Xj;xk.defaultConnection={url:"".concat(document.location.origin,"/lively-socket.io"),namespace:"l2l"};xk.runCommand=nz;xk.defaultDirectory=yw;xk.env=lD;xk.parseCommand=mD;xk.defaultGrepExclusions=".svn .git node_modules dist .module_cache lively.next-node_modules".split(" ");xk.doGrep=nD;var rT=Object.freeze({__proto__:null,runCommand:nz,defaultDirectory:yw,env:lD,parseCommand:mD,doGrep:nD}),fk=window.lively.FreezerRuntime.recorderFor("lively.shell/client-fs-helper.js");fk.fileInfoCommandString=function(b){var c=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},g=c.rootDirectory;g=void 0===g?".":g;c=c.platform;var a="win32"===c?"\\":"/";"win32"===c||g.endsWith(a)||(g+=a);return"win32"===c?"cd ".concat(g,' && ls -lLd --time-style=locale "').concat(b,'"'):'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && '+"env TZ=GMT LANG=en_US.UTF-8 cd ".concat(g,' && ls -lLd "$timeformat" "').concat(b,'"')};fk.parseDirectoryListFromLs=rL;
fk.fileInfo=oD;fk.findFilesCommandString=function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},g=c.rootDirectory;g=void 0===g?".":g;var a=c.exclude,d=c.depth,f=c.platform;a||(a="-iname "+fk.defaultExcludes.map(fk.string.print).join(" -o -iname "));var k="win32"===f?"\\":"/";"win32"===f||g.endsWith(k)||(g+=k);k=fk.string.format('%s "%s"',c.re?"-iregex":c.matchPath?"-ipath":"-iname",b);d="number"===typeof d?" -maxdepth "+d:"";return"win32"===f?fk.string.format("find %s %s ( %s ) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd --time-style=locale {}",
g,c.re?"-E ":"",a.replace(/"/g,""),k.replace(/"/g,""),d):'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && '+fk.string.format('env TZ=GMT LANG=en_US.UTF-8 find %s %s \\( %s \\) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd "$timeformat" "{}"',g,c.re?"-E ":"",a,k,d)};fk.findFiles=qD;fk.convertDirectoryUploadEntriesToFileInfos=sL;fk.runCommand=su;fk.string=Xj;fk.promise=yj;fk.arr=aj;var S3=function(){function b(c){Sd(this,
b);this.rootDirectory=c;this.fileName=this.path="";this.isDirectory=!1;this.lastModified=null;this.mode="";this.isLink=!1;this.linkCount=0;this.group=this.user="";this.size=0;this.rootDirectory=null}uc(b,[{key:"readFromDirectoryListLine",value:function(c){var g=this;if(!c.trim().length)return null;var a=c;this.reader.forEach(function(d){return a=d(a,g)});return this}},{key:"toString",value:function(){return this.path}},{key:"reader",get:function(){return[function(c,g){var a=c.indexOf(" ");g.mode=
c.slice(0,a);g.isDirectory="d"===g.mode[0];return c.slice(a+1).trim()},function(c,g){var a=c.indexOf(" ");g.linkCount=Number(c.slice(0,a));return c.slice(a+1).trim()},function(c,g){var a=c.indexOf(" ");g.user=c.slice(0,a);return c.slice(a+1).trim()},function(c,g){var a=fk.string.peekRight(c,0,/\s+[0-9]/);g.group=c.slice(0,a).trim();return c.slice(a).trim()},function(c,g){var a=c.indexOf(" ");g.size=Number(c.slice(0,a));return c.slice(a+1).trim()},function(c,g){var a=fk.string.reMatches(c,/[^s]+\s+[0-9:\s]+/);
if(!a||!a[0])return c;g.lastModified=new Date(a[0].match+" GMT");return c.slice(a[0].end).trim()},function(c,g){var a=(c=c.replace(/^\.\/+/g,"").replace(/\/\//g,"/"))&&c.split(" -> "),d=""===c?!1:c&&2===a.length,f=(a=d?a[0]:c)&&0===a.indexOf(g.rootDirectory)?a.slice(g.rootDirectory.length):a;g.fileName=""===c?".":f;g.path=a;g.isLink=d;return f}]}}]);return b}();fk.FileInfo=S3;fk.parseDirectoryListFromLs=rL;fk.fileInfo=oD;fk.findFilesProcesses={};fk.defaultExcludes=[".svn",".git","node_modules",".module_cache"];
fk.findFiles=qD;fk.convertDirectoryUploadEntriesToFileInfos=sL;var Qk=window.lively.FreezerRuntime.recorderFor("lively.shell/client-resource.js");Qk.Resource=so;Qk.runCommand=su;Qk.fileInfo=oD;Qk.findFiles=qD;Qk.string=Xj;Qk.obj=bj;var cB=function(b){function c(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};Sd(this,c);var k=g.call(this,a);k.options=Object.assign({},f,{l2lClient:d||k.constructor.defaultL2lClient});return k}vd(c,b);var g=qb(c);uc(c,null,[{key:"defaultL2lClient",
get:function(){return this._defaultL2lClient||Qk._defaultL2LClient},set:function(a){this._defaultL2lClient=Qk._defaultL2LClient=a}}]);uc(c,[{key:"newResource",value:function(a){return new this.constructor(a,this.options.l2lClient,this.options)}},{key:"read",value:function(){var a=this,d=Qk.runCommand('cat "'.concat(this.url,'"'),this.options);return d.whenDone().then(function(){if(d.exitCode)throw Error("Read ".concat(a.url," failed: ").concat(d.stderr));return d.output})}},{key:"write",value:function(){var a=
Cb(regeneratorRuntime.mark(function k(f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(f){p.next=6;break}p.next=3;return Qk.runCommand('echo -n > "'.concat(this.url,'"'),Object.assign({},this.options)).whenDone();case 3:p.t0=p.sent;p.next=9;break;case 6:return p.next=8,Qk.runCommand('touch "'.concat(this.url,'" && tee "').concat(this.url,'"'),Object.assign({stdin:String(f)},this.options)).whenDone();case 8:p.t0=p.sent;case 9:n=p.t0;if(!n.exitCode){p.next=
12;break}throw Error("Write ".concat(this.url," failed: ").concat(n.stderr));case 12:return p.abrupt("return",this);case 13:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"mkdir",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Qk.runCommand('mkdir -p "'.concat(this.url,'"'),this.options).whenDone();case 2:k=n.sent;if(!k.exitCode){n.next=
5;break}throw Error("".concat(this," cannot create directory: ").concat(k.stderr));case 5:return n.abrupt("return",this);case 6:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"exists",value:function(){var a=Qk.runCommand('test -d "'.concat(this.url,'" || test -f "').concat(this.url,'"'),this.options);return a.whenDone().then(function(){return 0===a.exitCode})}},{key:"remove",value:function(){var a=this,d=Qk.runCommand('rm -rf "'.concat(this.url,
'"'),this.options);return d.whenDone().then(function(){if(d.exitCode)throw Error("Remove of ".concat(a.url," failed: ").concat(d.stderr));return a})}},{key:"gzip",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n=this,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return p=Qk.runCommand('gzip > "'.concat(this.url,'"'),Object.assign({stdin:String(f)},this.options)),q.abrupt("return",p.whenDone().then(function(){if(p.exitCode)throw Error("Gzip compression of ".concat(n.url,
" failed: ").concat(p.stderr));return n}));case 2:case "end":return q.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"brotli",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n=this,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return p=Qk.runCommand('brotli > "'.concat(this.url,'"'),Object.assign({stdin:String(f)},this.options)),q.abrupt("return",p.whenDone().then(function(){if(p.exitCode)throw Error("Brotli compression of ".concat(n.url,
" failed: ").concat(p.stderr));return n}));case 2:case "end":return q.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"readProperties",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Qk.fileInfo(this.url,this.options);case 2:return k=n.sent,this.assignProperties(Qk.obj.dissoc(k,["fileName","path","rootDirectory"])),n.abrupt("return",this);case 5:case "end":return n.stop()}},
f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"dirList",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k=this,n,p,q,r,u,x,y=arguments;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return n=0<y.length&&void 0!==y[0]?y[0]:1,p=1<y.length&&void 0!==y[1]?y[1]:{},q=p.exclude,Array.isArray(q)&&(q="-iname "+q.map(Qk.string.print).join(" -o -iname ")),r=this.url,u=this.options.l2lClient,D.next=7,Qk.findFiles("*",{exclude:q,depth:n,
rootDirectory:r,l2lClient:u});case 7:return x=D.sent,x[0].path.replace(/\/$/,"")===this.url.replace(/\/$/,"")&&x.shift(),D.abrupt("return",x.map(function(H){var I=H.path;H.isDirectory&&(I=I.replace(/\/?$/,"/"));I=new k.constructor(I,u,k.options);I.assignProperties(Qk.obj.dissoc(H,["fileName","path","rootDirectory"]));return I}));case 10:case "end":return D.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()}]);return c}(Qk.Resource);Qk.ShellClientResource=cB;Qk._defaultL2LClient=
Qk._defaultL2LClient||void 0;var GH={name:"shell-client",matches:function(b){return b.startsWith("/")||b.match(/[a-z]:\\/i)},resourceClass:Qk.ShellClientResource};Qk.resourceExtension=GH;Qk.resourceExtension=GH;Qk["default"]=cB;var VP=Object.freeze({__proto__:null,"default":cB,resourceExtension:GH});bd("cf",VP);var T3=Object.freeze({__proto__:null,"default":{}}),U3=Ol(T3),eq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,V3={},HT=eq.MutationObserver||eq.WebKitMutationObserver;
if(HT){var IT=0,W3=new HT(oz),JT=eq.document.createTextNode("");W3.observe(JT,{characterData:!0});var HH=function(){JT.data=IT=++IT%2}}else if(eq.setImmediate||"undefined"===typeof eq.MessageChannel)HH="document"in eq&&"onreadystatechange"in eq.document.createElement("script")?function(){var b=eq.document.createElement("script");b.onreadystatechange=function(){oz();b.onreadystatechange=null;b.parentNode.removeChild(b);b=null};eq.document.documentElement.appendChild(b)}:function(){setTimeout(oz,0)};
else{var KT=new eq.MessageChannel;KT.port1.onmessage=oz;HH=function(){KT.port2.postMessage(0)}}var sD,zw=[],LT=V3=function(b){1!==zw.push(b)||sD||HH()},IH={},MT="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(MT){var NT=new Uint8Array(16);IH=function(){MT(NT);return NT}}else{var OT=Array(16);IH=function(){for(var b=0,c;16>b;b++)0===(b&
3)&&(c=4294967296*Math.random()),OT[b]=c>>>((b&3)<<3)&255;return OT}}var PT=IH,X3={},Lm=[];for(var dB=0;256>dB;++dB)Lm[dB]=(dB+256).toString(16).substr(1);var QT=X3=function(b,c){c=c||0;return[Lm[b[c++]],Lm[b[c++]],Lm[b[c++]],Lm[b[c++]],"-",Lm[b[c++]],Lm[b[c++]],"-",Lm[b[c++]],Lm[b[c++]],"-",Lm[b[c++]],Lm[b[c++]],"-",Lm[b[c++]],Lm[b[c++]],Lm[b[c++]],Lm[b[c++]],Lm[b[c++]],Lm[b[c++]]].join("")},Y3={},RT,JH,KH=0,LH=0,Z3=Y3=function(b,c,g){g=c&&g||0;var a=c||[];b=b||{};var d=b.node||RT,f=void 0!==b.clockseq?
b.clockseq:JH;if(null==d||null==f){var k=PT();null==d&&(d=RT=[k[0]|1,k[1],k[2],k[3],k[4],k[5]]);null==f&&(f=JH=(k[6]<<8|k[7])&16383)}k=void 0!==b.msecs?b.msecs:(new Date).getTime();var n=void 0!==b.nsecs?b.nsecs:LH+1,p=k-KH+(n-LH)/1E4;0>p&&void 0===b.clockseq&&(f=f+1&16383);(0>p||k>KH)&&void 0===b.nsecs&&(n=0);if(1E4<=n)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");KH=k;LH=n;JH=f;k+=122192928E5;b=(1E4*(k&268435455)+n)%4294967296;a[g++]=b>>>24&255;a[g++]=b>>>16&255;a[g++]=b>>>8&255;
a[g++]=b&255;b=k/4294967296*1E4&268435455;a[g++]=b>>>8&255;a[g++]=b&255;a[g++]=b>>>24&15|16;a[g++]=b>>>16&255;a[g++]=f>>>8|128;a[g++]=f&255;for(f=0;6>f;++f)a[g+f]=d[f];return c?c:QT(a)},ST={};ST=function(b,c,g){g=c&&g||0;"string"==typeof b&&(c="binary"===b?Array(16):null,b=null);b=b||{};b=b.random||(b.rng||PT)();b[6]=b[6]&15|64;b[8]=b[8]&63|128;if(c)for(var a=0;16>a;++a)c[g+a]=b[a];return c||QT(b)};var $3={},MH=ST;MH.v1=Z3;var TT=$3=MH.v4=MH,tj="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,a4={},wv=a4=function(b){function c(r,u){var x=r[0],y=r[1],D=r[2],H=r[3];x+=(y&D|~y&H)+u[0]-680876936|0;x=(x<<7|x>>>25)+y|0;H+=(x&y|~x&D)+u[1]-389564586|0;H=(H<<12|H>>>20)+x|0;D+=(H&x|~H&y)+u[2]+606105819|0;D=(D<<17|D>>>15)+H|0;y+=(D&H|~D&x)+u[3]-1044525330|0;y=(y<<22|y>>>10)+D|0;x+=(y&D|~y&H)+u[4]-176418897|0;x=(x<<7|x>>>25)+y|0;H+=(x&y|~x&D)+u[5]+1200080426|0;H=(H<<12|H>>>20)+x|0;D+=(H&x|~H&y)+u[6]-1473231341|0;D=(D<<17|D>>>15)+H|0;y+=(D&H|~D&x)+u[7]-45705983|0;y=(y<<22|y>>>
10)+D|0;x+=(y&D|~y&H)+u[8]+1770035416|0;x=(x<<7|x>>>25)+y|0;H+=(x&y|~x&D)+u[9]-1958414417|0;H=(H<<12|H>>>20)+x|0;D+=(H&x|~H&y)+u[10]-42063|0;D=(D<<17|D>>>15)+H|0;y+=(D&H|~D&x)+u[11]-1990404162|0;y=(y<<22|y>>>10)+D|0;x+=(y&D|~y&H)+u[12]+1804603682|0;x=(x<<7|x>>>25)+y|0;H+=(x&y|~x&D)+u[13]-40341101|0;H=(H<<12|H>>>20)+x|0;D+=(H&x|~H&y)+u[14]-1502002290|0;D=(D<<17|D>>>15)+H|0;y+=(D&H|~D&x)+u[15]+1236535329|0;y=(y<<22|y>>>10)+D|0;x+=(y&H|D&~H)+u[1]-165796510|0;x=(x<<5|x>>>27)+y|0;H+=(x&D|y&~D)+u[6]-1069501632|
0;H=(H<<9|H>>>23)+x|0;D+=(H&y|x&~y)+u[11]+643717713|0;D=(D<<14|D>>>18)+H|0;y+=(D&x|H&~x)+u[0]-373897302|0;y=(y<<20|y>>>12)+D|0;x+=(y&H|D&~H)+u[5]-701558691|0;x=(x<<5|x>>>27)+y|0;H+=(x&D|y&~D)+u[10]+38016083|0;H=(H<<9|H>>>23)+x|0;D+=(H&y|x&~y)+u[15]-660478335|0;D=(D<<14|D>>>18)+H|0;y+=(D&x|H&~x)+u[4]-405537848|0;y=(y<<20|y>>>12)+D|0;x+=(y&H|D&~H)+u[9]+568446438|0;x=(x<<5|x>>>27)+y|0;H+=(x&D|y&~D)+u[14]-1019803690|0;H=(H<<9|H>>>23)+x|0;D+=(H&y|x&~y)+u[3]-187363961|0;D=(D<<14|D>>>18)+H|0;y+=(D&x|H&~x)+
u[8]+1163531501|0;y=(y<<20|y>>>12)+D|0;x+=(y&H|D&~H)+u[13]-1444681467|0;x=(x<<5|x>>>27)+y|0;H+=(x&D|y&~D)+u[2]-51403784|0;H=(H<<9|H>>>23)+x|0;D+=(H&y|x&~y)+u[7]+1735328473|0;D=(D<<14|D>>>18)+H|0;y+=(D&x|H&~x)+u[12]-1926607734|0;y=(y<<20|y>>>12)+D|0;x+=(y^D^H)+u[5]-378558|0;x=(x<<4|x>>>28)+y|0;H+=(x^y^D)+u[8]-2022574463|0;H=(H<<11|H>>>21)+x|0;D+=(H^x^y)+u[11]+1839030562|0;D=(D<<16|D>>>16)+H|0;y+=(D^H^x)+u[14]-35309556|0;y=(y<<23|y>>>9)+D|0;x+=(y^D^H)+u[1]-1530992060|0;x=(x<<4|x>>>28)+y|0;H+=(x^y^D)+
u[4]+1272893353|0;H=(H<<11|H>>>21)+x|0;D+=(H^x^y)+u[7]-155497632|0;D=(D<<16|D>>>16)+H|0;y+=(D^H^x)+u[10]-1094730640|0;y=(y<<23|y>>>9)+D|0;x+=(y^D^H)+u[13]+681279174|0;x=(x<<4|x>>>28)+y|0;H+=(x^y^D)+u[0]-358537222|0;H=(H<<11|H>>>21)+x|0;D+=(H^x^y)+u[3]-722521979|0;D=(D<<16|D>>>16)+H|0;y+=(D^H^x)+u[6]+76029189|0;y=(y<<23|y>>>9)+D|0;x+=(y^D^H)+u[9]-640364487|0;x=(x<<4|x>>>28)+y|0;H+=(x^y^D)+u[12]-421815835|0;H=(H<<11|H>>>21)+x|0;D+=(H^x^y)+u[15]+530742520|0;D=(D<<16|D>>>16)+H|0;y+=(D^H^x)+u[2]-995338651|
0;y=(y<<23|y>>>9)+D|0;x+=(D^(y|~H))+u[0]-198630844|0;x=(x<<6|x>>>26)+y|0;H+=(y^(x|~D))+u[7]+1126891415|0;H=(H<<10|H>>>22)+x|0;D+=(x^(H|~y))+u[14]-1416354905|0;D=(D<<15|D>>>17)+H|0;y+=(H^(D|~x))+u[5]-57434055|0;y=(y<<21|y>>>11)+D|0;x+=(D^(y|~H))+u[12]+1700485571|0;x=(x<<6|x>>>26)+y|0;H+=(y^(x|~D))+u[3]-1894986606|0;H=(H<<10|H>>>22)+x|0;D+=(x^(H|~y))+u[10]-1051523|0;D=(D<<15|D>>>17)+H|0;y+=(H^(D|~x))+u[1]-2054922799|0;y=(y<<21|y>>>11)+D|0;x+=(D^(y|~H))+u[8]+1873313359|0;x=(x<<6|x>>>26)+y|0;H+=(y^(x|
~D))+u[15]-30611744|0;H=(H<<10|H>>>22)+x|0;D+=(x^(H|~y))+u[6]-1560198380|0;D=(D<<15|D>>>17)+H|0;y+=(H^(D|~x))+u[13]+1309151649|0;y=(y<<21|y>>>11)+D|0;x+=(D^(y|~H))+u[4]-145523070|0;x=(x<<6|x>>>26)+y|0;H+=(y^(x|~D))+u[11]-1120210379|0;H=(H<<10|H>>>22)+x|0;D+=(x^(H|~y))+u[2]+718787259|0;D=(D<<15|D>>>17)+H|0;y+=(H^(D|~x))+u[9]-343485551|0;r[0]=x+r[0]|0;r[1]=((y<<21|y>>>11)+D|0)+r[1]|0;r[2]=D+r[2]|0;r[3]=H+r[3]|0}function g(r){var u=[],x;for(x=0;64>x;x+=4)u[x>>2]=r.charCodeAt(x)+(r.charCodeAt(x+1)<<8)+
(r.charCodeAt(x+2)<<16)+(r.charCodeAt(x+3)<<24);return u}function a(r){var u=[],x;for(x=0;64>x;x+=4)u[x>>2]=r[x]+(r[x+1]<<8)+(r[x+2]<<16)+(r[x+3]<<24);return u}function d(r){var u=r.length,x=[1732584193,-271733879,-1732584194,271733878],y;for(y=64;y<=u;y+=64)c(x,g(r.substring(y-64,y)));r=r.substring(y-64);var D=r.length;var H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(y=0;y<D;y+=1)H[y>>2]|=r.charCodeAt(y)<<(y%4<<3);H[y>>2]|=128<<(y%4<<3);if(55<y)for(c(x,H),y=0;16>y;y+=1)H[y]=0;u=(8*u).toString(16).match(/(.*?)(.{0,8})$/);
r=parseInt(u[2],16);u=parseInt(u[1],16)||0;H[14]=r;H[15]=u;c(x,H);return x}function f(r){var u;for(u=0;u<r.length;u+=1){var x=u,y,D=r[u],H="";for(y=0;4>y;y+=1)H+=q[D>>8*y+4&15]+q[D>>8*y&15];r[x]=H}return r.join("")}function k(r){/[\u0080-\uFFFF]/.test(r)&&(r=unescape(encodeURIComponent(r)));return r}function n(r){var u=[],x=r.length,y;for(y=0;y<x-1;y+=2)u.push(parseInt(r.substr(y,2),16));return String.fromCharCode.apply(String,u)}function p(){this.reset()}var q="0123456789abcdef".split("");f(d("hello"));
"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function r(u,x){u=u|0||0;return 0>u?Math.max(u+x,0):Math.min(u,x)}ArrayBuffer.prototype.slice=function(u,x){var y=(this||tj).byteLength;u=r(u,y);var D=y;x!==b&&(D=r(x,y));if(u>D)return new ArrayBuffer(0);D-=u;x=new ArrayBuffer(D);y=new Uint8Array(x);u=new Uint8Array(this||tj,u,D);y.set(u);return x}}();p.prototype.append=function(r){this.appendBinary(k(r));return this||tj};p.prototype.appendBinary=function(r){(this||tj)._buff+=
r;(this||tj)._length+=r.length;r=(this||tj)._buff.length;var u;for(u=64;u<=r;u+=64)c((this||tj)._hash,g((this||tj)._buff.substring(u-64,u)));(this||tj)._buff=(this||tj)._buff.substring(u-64);return this||tj};p.prototype.end=function(r){var u=(this||tj)._buff,x=u.length,y,D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(y=0;y<x;y+=1)D[y>>2]|=u.charCodeAt(y)<<(y%4<<3);this._finish(D,x);u=f((this||tj)._hash);r&&(u=n(u));this.reset();return u};p.prototype.reset=function(){(this||tj)._buff="";(this||tj)._length=
0;(this||tj)._hash=[1732584193,-271733879,-1732584194,271733878];return this||tj};p.prototype.getState=function(){return{buff:(this||tj)._buff,length:(this||tj)._length,hash:(this||tj)._hash}};p.prototype.setState=function(r){(this||tj)._buff=r.buff;(this||tj)._length=r.length;(this||tj)._hash=r.hash;return this||tj};p.prototype.destroy=function(){delete (this||tj)._hash;delete (this||tj)._buff;delete (this||tj)._length};p.prototype._finish=function(r,u){r[u>>2]|=128<<(u%4<<3);if(55<u)for(c((this||
tj)._hash,r),u=0;16>u;u+=1)r[u]=0;var x=8*(this||tj)._length;x=x.toString(16).match(/(.*?)(.{0,8})$/);u=parseInt(x[2],16);x=parseInt(x[1],16)||0;r[14]=u;r[15]=x;c((this||tj)._hash,r)};p.hash=function(r,u){return p.hashBinary(k(r),u)};p.hashBinary=function(r,u){r=d(r);r=f(r);return u?n(r):r};p.ArrayBuffer=function(){this.reset()};p.ArrayBuffer.prototype.append=function(r){var u=(this||tj)._buff.buffer,x=new Uint8Array(u.byteLength+r.byteLength);x.set(new Uint8Array(u));x.set(new Uint8Array(r),u.byteLength);
u=x.length;(this||tj)._length+=r.byteLength;for(r=64;r<=u;r+=64)c((this||tj)._hash,a(x.subarray(r-64,r)));(this||tj)._buff=r-64<u?new Uint8Array(x.buffer.slice(r-64)):new Uint8Array(0);return this||tj};p.ArrayBuffer.prototype.end=function(r){var u=(this||tj)._buff,x=u.length,y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],D;for(D=0;D<x;D+=1)y[D>>2]|=u[D]<<(D%4<<3);this._finish(y,x);u=f((this||tj)._hash);r&&(u=n(u));this.reset();return u};p.ArrayBuffer.prototype.reset=function(){(this||tj)._buff=new Uint8Array(0);
(this||tj)._length=0;(this||tj)._hash=[1732584193,-271733879,-1732584194,271733878];return this||tj};p.ArrayBuffer.prototype.getState=function(){var r=p.prototype.getState.call(this||tj);r.buff=String.fromCharCode.apply(null,new Uint8Array(r.buff));return r};p.ArrayBuffer.prototype.setState=function(r){var u=r.buff,x=u.length,y=new ArrayBuffer(x);y=new Uint8Array(y);var D;for(D=0;D<x;D+=1)y[D]=u.charCodeAt(D);r.buff=y;return p.prototype.setState.call(this||tj,r)};p.ArrayBuffer.prototype.destroy=p.prototype.destroy;
p.ArrayBuffer.prototype._finish=p.prototype._finish;p.ArrayBuffer.hash=function(r,u){var x=new Uint8Array(r),y=x.length;r=[1732584193,-271733879,-1732584194,271733878];var D;for(D=64;D<=y;D+=64)c(r,a(x.subarray(D-64,D)));x=D-64<y?x.subarray(D-64):new Uint8Array(0);var H=x.length;var I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(D=0;D<H;D+=1)I[D>>2]|=x[D]<<(D%4<<3);I[D>>2]|=128<<(D%4<<3);if(55<D)for(c(r,I),D=0;16>D;D+=1)I[D]=0;y=(8*y).toString(16).match(/(.*?)(.{0,8})$/);x=parseInt(y[2],16);y=parseInt(y[1],
16)||0;I[14]=x;I[15]=y;c(r,I);r=f(r);return u?n(r):r};return p}(),Sr={stringify:function(b){var c=[];c.push({obj:b});b="";for(var g,a,d,f,k,n,p;g=c.pop();)if(a=g.obj,d=g.prefix||"",g=g.val||"",b+=d,g)b+=g;else if("object"!==typeof a)b+="undefined"===typeof a?null:JSON.stringify(a);else if(null===a)b+="null";else if(Array.isArray(a)){c.push({val:"]"});for(d=a.length-1;0<=d;d--)g=0===d?"":",",c.push({obj:a[d],prefix:g});c.push({val:"["})}else{g=[];for(f in a)a.hasOwnProperty(f)&&g.push(f);c.push({val:"}"});
for(d=g.length-1;0<=d;d--)k=g[d],n=a[k],p=0<d?",":"",p+=JSON.stringify(k)+":",c.push({obj:n,prefix:p});c.push({val:"{"})}return b},parse:function(b){for(var c=[],g=[],a=0,d,f,k,n;;)if(d=b[a++],"}"===d||"]"===d||"undefined"===typeof d){if(1===c.length)return c.pop();tu(c.pop(),c,g)}else switch(d){case " ":case "\t":case "\n":case ":":case ",":break;case "n":a+=3;tu(null,c,g);break;case "t":a+=3;tu(!0,c,g);break;case "f":a+=4;tu(!1,c,g);break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "-":d=
"";for(a--;;)if(f=b[a++],/[\d\.\-e\+]/.test(f))d+=f;else{a--;break}tu(parseFloat(d),c,g);break;case '"':d="";f=void 0;for(k=0;;)if(n=b[a++],'"'!==n||"\\"===f&&1===k%2)d+=n,f=n,"\\"===f?k++:k=0;else break;tu(JSON.parse('"'+d+'"'),c,g);break;case "[":d={element:[],index:c.length};c.push(d.element);g.push(d);break;case "{":d={element:{},index:c.length};c.push(d.element);g.push(d);break;default:throw Error("unexpectedly reached end of input: "+d);}}};Sr.stringify;Sr.parse;var b4={},NH=b4=function(b){return function(){var c=
arguments.length;if(c){for(var g=[],a=-1;++a<c;)g[a]=arguments[a];return b.call(this,g)}return b.call(this,[])}},c4={},sl=c4="function"===typeof Object.create?function(b,c){c&&(b.super_=c,b.prototype=Object.create(c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}))}:function(b,c){if(c){b.super_=c;var g=function(){};g.prototype=c.prototype;b.prototype=new g;b.prototype.constructor=b}},xv="object"==("undefined"===typeof Reflect?"undefined":ad(Reflect))?Reflect:null,UT=xv&&
"function"==typeof xv.apply?xv.apply:function(b,c,g){return Function.prototype.apply.call(b,c,g)};var d4=xv&&"function"==typeof xv.ownKeys?xv.ownKeys:Object.getOwnPropertySymbols?function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:function(b){return Object.getOwnPropertyNames(b)};var VT=Number.isNaN||function(b){return b!=b};Nk.EventEmitter=Nk;Nk.prototype._events=void 0;Nk.prototype._eventsCount=0;Nk.prototype._maxListeners=void 0;var WT=10;Object.defineProperty(Nk,
"defaultMaxListeners",{enumerable:!0,get:function(){return WT},set:function(b){if("number"!=typeof b||0>b||VT(b))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+b+".");WT=b}});Nk.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};Nk.prototype.setMaxListeners=function(b){if("number"!=typeof b||
0>b||VT(b))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+b+".");return this._maxListeners=b,this};Nk.prototype.getMaxListeners=function(){return void 0===this._maxListeners?Nk.defaultMaxListeners:this._maxListeners};Nk.prototype.emit=function(b){for(var c=[],g=1;g<arguments.length;g++)c.push(arguments[g]);g="error"===b;var a=this._events;if(void 0!==a)g=g&&void 0===a.error;else if(!g)return!1;if(g){var d;if(0<c.length&&(d=c[0]),d instanceof Error)throw d;
c=Error("Unhandled error."+(d?" ("+d.message+")":""));throw c.context=d,c;}g=a[b];if(void 0===g)return!1;if("function"==typeof g)UT(g,this,c);else for(d=g.length,a=wL(g,d),g=0;g<d;++g)UT(a[g],this,c);return!0};Nk.prototype.addListener=function(b,c){return tL(this,b,c,!1)};Nk.prototype.on=Nk.prototype.addListener;Nk.prototype.prependListener=function(b,c){return tL(this,b,c,!0)};Nk.prototype.once=function(b,c){return pz(c),this.on(b,uL(this,b,c)),this};Nk.prototype.prependOnceListener=function(b,c){return pz(c),
this.prependListener(b,uL(this,b,c)),this};Nk.prototype.removeListener=function(b,c){var g,a,d;if((pz(c),void 0===(a=this._events))||void 0===(g=a[b]))return this;if(g===c||g.listener===c)0==--this._eventsCount?this._events=Object.create(null):(delete a[b],a.removeListener&&this.emit("removeListener",b,g.listener||c));else if("function"!=typeof g){var f=-1;for(d=g.length-1;0<=d;d--)if(g[d]===c||g[d].listener===c){var k=g[d].listener;f=d;break}if(0>f)return this;if(0===f)g.shift();else{for(;f+1<g.length;f++)g[f]=
g[f+1];g.pop();!0}1===g.length&&(a[b]=g[0]);void 0!==a.removeListener&&this.emit("removeListener",b,k||c)}return this};Nk.prototype.off=Nk.prototype.removeListener;Nk.prototype.removeAllListeners=function(b){var c,g;if(void 0===(g=this._events))return this;if(void 0===g.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==g[b]&&(0==--this._eventsCount?this._events=Object.create(null):delete g[b]),this;if(0===arguments.length){var a=Object.keys(g);
for(g=0;g<a.length;++g)"removeListener"!==(c=a[g])&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(c=g[b]))this.removeListener(b,c);else if(void 0!==c)for(g=c.length-1;0<=g;g--)this.removeListener(b,c[g]);return this};Nk.prototype.listeners=function(b){return vL(this,b,!0)};Nk.prototype.rawListeners=function(b){return vL(this,b,!1)};Nk.listenerCount=function(b,c){return"function"==typeof b.listenerCount?
b.listenerCount(c):xL.call(b,c)};Nk.prototype.listenerCount=xL;Nk.prototype.eventNames=function(){return 0<this._eventsCount?d4(this._events):[]};var Dl=Nk;Dl.EventEmitter;Dl.defaultMaxListeners;Dl.init;Dl.listenerCount;Dl.EventEmitter;Dl.defaultMaxListeners;Dl.init;Dl.listenerCount;Dl.once=function(b,c){return new Promise((g,a)=>{function d(...k){void 0!==f&&b.removeListener("error",f);g(k)}let f;"error"!==c&&(f=k=>{b.removeListener(name,d);a(k)},b.once("error",f));b.once(c,d)})};Dl.on=function(b,
c){function g(...q){const r=f.shift();r?r.resolve(createIterResult(q,!1)):d.push(q)}function a(q){n=!0;const r=f.shift();r?r.reject(q):k=q;p.return()}const d=[],f=[];let k=null,n=!1;const p={async next(){var q=d.shift();return q?createIterResult(q,!1):k?(q=Promise.reject(k),k=null,q):n?createIterResult(void 0,!0):new Promise((r,u)=>f.push({resolve:r,reject:u}))},async return(){b.removeListener(c,g);b.removeListener("error",a);n=!0;for(const q of f)q.resolve(createIterResult(void 0,!0));return createIterResult(void 0,
!0)},throw(q){k=q;b.removeListener(c,g);b.removeListener("error",a)},[Symbol.asyncIterator](){return this}};b.on(c,g);b.on("error",a);return p};var XT="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,e4={},yz=Pl,Jp=uu(LT),ML=uu(TT),tz=uu(wv),fM=uu(Sr),vu=uu(NH),hp=uu(sl),vn=Dl;pr.prototype.get=function(b){return this._store["$"+b]};pr.prototype.set=function(b,c){this._store["$"+b]=c;return!0};pr.prototype.has=function(b){return"$"+b in this._store};pr.prototype.delete=
function(b){b="$"+b;var c=b in this._store;delete this._store[b];return c};pr.prototype.forEach=function(b){for(var c=Object.keys(this._store),g=0,a=c.length;g<a;g++){var d=c[g],f=this._store[d];d=d.substring(1);b(f,d)}};Object.defineProperty(pr.prototype,"size",{get:function(){return Object.keys(this._store).length}});Aw.prototype.add=function(b){return this._store.set(b,!0)};Aw.prototype.has=function(b){return this._store.has(b)};Aw.prototype.forEach=function(b){this._store.forEach(function(c,g){b(g)})};
Object.defineProperty(Aw.prototype,"size",{get:function(){return this._store.size}});if(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var b=Object.getOwnPropertyDescriptor(Map,Symbol.species);return b&&"get"in b&&Map[Symbol.species]===Map}()){var Iw=Set;var Mn=Map}else Iw=Aw,Mn=pr;var yL=Function.prototype.toString,xX=yL.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var Cw=!!localStorage.getItem("_pouch_check_localstorage")}catch(b){Cw=
!1}hp(wu,vn.EventEmitter);wu.prototype.addListener=function(b,c,g,a){function d(){if(f._listeners[c])if(k)k="waiting";else{k=!0;var n=Bw(a,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));g.changes(n).on("change",function(p){p.seq>a.since&&!a.cancelled&&(a.since=p.seq,a.onChange(p))}).on("complete",function(){"waiting"===k&&Jp(d);k=!1}).on("error",function(){k=!1})}}if(!this._listeners[c]){var f=this,k=!1;this._listeners[c]=d;this.on(b,
d)}};wu.prototype.removeListener=function(b,c){c in this._listeners&&(vn.EventEmitter.prototype.removeListener.call(this,b,this._listeners[c]),delete this._listeners[c])};wu.prototype.notifyLocalWindows=function(b){Cw&&(localStorage[b]="a"===localStorage[b]?"b":"a")};wu.prototype.notify=function(b){this.emit(b);this.notifyLocalWindows(b)};var Au="function"===typeof Object.assign?Object.assign:function(b){for(var c=Object(b),g=1;g<arguments.length;g++){var a=arguments[g];if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,
d)&&(c[d]=a[d])}return c};hp(Xk,Error);Xk.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new Xk(401,"unauthorized","Name or password is incorrect.");var f4=new Xk(400,"bad_request","Missing JSON list of 'docs'"),So=new Xk(404,"not_found","missing"),zu=new Xk(409,"conflict","Document update conflict"),FL=new Xk(400,"bad_request","_id field must contain a string"),DX=new Xk(412,"missing_id","_id is required for puts"),
CX=new Xk(400,"bad_request","Only reserved document ids may start with underscore.");new Xk(412,"precondition_failed","Database not open");var DL=new Xk(500,"unknown_error","Database encountered an unknown error"),eM=new Xk(500,"badarg","Some query argument is invalid");new Xk(400,"invalid_request","Request was invalid");var g4=new Xk(400,"query_parse_error","Some query parameter is invalid"),dM=new Xk(500,"doc_validation","Bad special document member"),qz=new Xk(400,"bad_request","Something wrong with the request"),
OH=new Xk(400,"bad_request","Document must be a JSON object");new Xk(404,"not_found","Database not found");var HD=new Xk(500,"indexed_db_went_bad","unknown");new Xk(500,"web_sql_went_bad","unknown");new Xk(500,"levelDB_went_went_bad","unknown");new Xk(403,"forbidden","Forbidden by design doc validate_doc_update function");var bM=new Xk(400,"bad_request","Invalid rev format");new Xk(412,"file_exists","The database could not be created, the file already exists.");var tY=new Xk(412,"missing_stub","A pre-existing attachment stub wasn't found");
new Xk(413,"invalid_url","Provided URL is invalid");var IL="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),FX=/(?:^|&)([^&=]*)=?([^&]*)/g,EX=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,LX=XT.setImmediate||XT.setTimeout,uz=ML.v4;hp(Dw,vn.EventEmitter);Dw.prototype.cancel=function(){this.isCancelled=
!0;this.db.taskqueue.isReady&&this.emit("cancel")};Dw.prototype.validateChanges=function(b){var c=b.complete,g=this;Oj._changesFilterPlugin?Oj._changesFilterPlugin.validate(b,function(a){if(a)return c(a);g.doChanges(b)}):g.doChanges(b)};Dw.prototype.doChanges=function(b){var c=this,g=b.complete;b=bm(b);"live"in b&&!("continuous"in b)&&(b.continuous=b.live);b.processChange=TX;"latest"===b.since&&(b.since="now");b.since||(b.since=0);if("now"===b.since)this.db.info().then(function(f){c.isCancelled?g(null,
{status:"cancelled"}):(b.since=f.update_seq,c.doChanges(b))},g);else{if(Oj._changesFilterPlugin){if(Oj._changesFilterPlugin.normalize(b),Oj._changesFilterPlugin.shouldFilter(this,b))return Oj._changesFilterPlugin.filter(this,b)}else["doc_ids","filter","selector","view"].forEach(function(f){f in b&&mo("warn",'The "'+f+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in
b||(b.descending=!1);b.limit=0===b.limit?1:b.limit;b.complete=g;var a=this.db._changes(b);if(a&&"function"===typeof a.cancel){var d=c.cancel;c.cancel=vu(function(f){a.cancel();d.apply(this,f)})}}};hp(il,vn.EventEmitter);il.prototype.post=Rl("post",function(b,c,g){"function"===typeof c&&(g=c,c={});if("object"!==typeof b||Array.isArray(b))return g(Tj(OH));this.bulkDocs({docs:[b]},c,ED(g,b._id))});il.prototype.put=Rl("put",function(b,c,g){function a(){var k=b._rev.split("-"),n=k[1];k=parseInt(k[0],10)+
1;var p=LL();b._revisions={start:k,ids:[p,n]};b._rev=k+"-"+p;c.new_edits=!1}function d(k){"function"===typeof f._put&&!1!==c.new_edits?f._put(b,c,k):f.bulkDocs({docs:[b]},c,ED(k,b._id))}"function"===typeof c&&(g=c,c={});if("object"!==typeof b||Array.isArray(b))return g(Tj(OH));EL(b._id);if(Cs(b._id)&&"function"===typeof this._putLocal)return b._deleted?this._removeLocal(b,g):this._putLocal(b,g);var f=this;c.force&&b._rev?(a(),d(function(k){g(k,k?null:{ok:!0,id:b._id,rev:b._rev})})):d(g)});il.prototype.putAttachment=
Rl("putAttachment",function(b,c,g,a,d){function f(n){var p="_rev"in n?parseInt(n._rev,10):0;n._attachments=n._attachments||{};n._attachments[c]={content_type:d,data:a,revpos:++p};return k.put(n)}var k=this;"function"===typeof d&&(d=a,a=g,g=null);"undefined"===typeof d&&(d=a,a=g,g=null);d||mo("warn","Attachment",c,"on document",b,"is missing content_type");return k.get(b).then(function(n){if(n._rev!==g)throw Tj(zu);return f(n)},function(n){if(n.reason===So.message)return f({_id:b});throw n;})});il.prototype.removeAttachment=
Rl("removeAttachment",function(b,c,g,a){var d=this;d.get(b,function(f,k){if(f)a(f);else if(k._rev!==g)a(Tj(zu));else{if(!k._attachments)return a();delete k._attachments[c];0===Object.keys(k._attachments).length&&delete k._attachments;d.put(k,a)}})});il.prototype.remove=Rl("remove",function(b,c,g,a){"string"===typeof c?(b={_id:b,_rev:c},"function"===typeof g&&(a=g,g={})):"function"===typeof c?(a=c,g={}):(a=g,g=c);g=g||{};g.was_delete=!0;c={_id:b._id,_rev:b._rev||g.rev,_deleted:!0};if(Cs(c._id)&&"function"===
typeof this._removeLocal)return this._removeLocal(b,a);this.bulkDocs({docs:[c]},g,ED(a,c._id))});il.prototype.revsDiff=Rl("revsDiff",function(b,c,g){function a(p,q){n.has(p)||n.set(p,{missing:[]});n.get(p).missing.push(q)}function d(p,q){var r=b[p].slice(0);Bs(q,function(u,x,y,D,H){u=x+"-"+y;x=r.indexOf(u);-1!==x&&(r.splice(x,1),"available"!==H.status&&a(p,u))});r.forEach(function(u){a(p,u)})}"function"===typeof c&&(g=c,c={});var f=Object.keys(b);if(!f.length)return g(null,{});var k=0,n=new Mn;f.map(function(p){this._getRevisionTree(p,
function(q,r){if(q&&404===q.status&&"missing"===q.message)n.set(p,{missing:b[p]});else{if(q)return g(q);d(p,r)}if(++k===f.length){var u={};n.forEach(function(x,y){u[y]=x});return g(null,u)}})},this)});il.prototype.bulkGet=Rl("bulkGet",function(b,c){CL(this,b,c)});il.prototype.compactDocument=Rl("compactDocument",function(b,c,g){var a=this;this._getRevisionTree(b,function(d,f){if(d)return g(d);var k=WX(f),n=[],p=[];Object.keys(k).forEach(function(q){k[q]>c&&n.push(q)});Bs(f,function(q,r,u,x,y){q=r+
"-"+u;"available"===y.status&&-1!==n.indexOf(q)&&p.push(q)});a._doCompaction(b,p,g)})});il.prototype.compact=Rl("compact",function(b,c){"function"===typeof b&&(c=b,b={});b=b||{};this._compactionQueue=this._compactionQueue||[];this._compactionQueue.push({opts:b,callback:c});1===this._compactionQueue.length&&SL(this)});il.prototype._compact=function(b,c){var g=this,a=[];g.changes({return_docs:!1,last_seq:b.last_seq||0}).on("change",function(d){a.push(g.compactDocument(d.id,0))}).on("complete",function(d){var f=
d.last_seq;Promise.all(a).then(function(){return sz(g,"_local/compaction",function(k){return!k.last_seq||k.last_seq<f?(k.last_seq=f,k):!1})}).then(function(){c(null,{ok:!0})}).catch(c)}).on("error",c)};il.prototype.get=Rl("get",function(b,c,g){function a(){var p=[],q=d.length;if(!q)return g(null,p);d.forEach(function(r){f.get(b,{rev:r,revs:c.revs,latest:c.latest,attachments:c.attachments,binary:c.binary},function(u,x){if(u)p.push({missing:r});else{u=0;for(var y=p.length;u<y;u++)if(p[u].ok&&p[u].ok._rev===
x._rev){var D=!0;break}D||p.push({ok:x})}q--;q||g(null,p)})})}"function"===typeof c&&(g=c,c={});if("string"!==typeof b)return g(Tj(FL));if(Cs(b)&&"function"===typeof this._getLocal)return this._getLocal(b,g);var d=[],f=this;if(c.open_revs)if("all"===c.open_revs)this._getRevisionTree(b,function(p,q){if(p)return g(p);d=CD(q).map(function(r){return r.rev});a()});else if(Array.isArray(c.open_revs)){d=c.open_revs;for(var k=0;k<d.length;k++){var n=d[k];if("string"!==typeof n||!/^\d+-/.test(n))return g(Tj(bM))}a()}else return g(Tj(DL,
"function_clause"));else return this._get(b,c,function(p,q){if(p)return p.docId=b,g(p);var r=q.doc,u=q.metadata,x=q.ctx;c.conflicts&&(q=DD(u),q.length&&(r._conflicts=q));Dq(u,r._rev)&&(r._deleted=!0);if(c.revs||c.revs_info){p=r._rev.split("-");q=parseInt(p[0],10);p=p[1];var y=NL(u.rev_tree);u=null;for(var D=0;D<y.length;D++){var H=y[D],I=H.ids.map(function(Ha){return Ha.id}).indexOf(p);if(I===q-1||!u&&-1!==I)u=H}if(!u)return p=Error("invalid rev tree"),p.docId=b,g(p);q=u.ids.map(function(Ha){return Ha.id}).indexOf(r._rev.split("-")[1])+
1;u.ids.splice(q,u.ids.length-q);u.ids.reverse();c.revs&&(r._revisions={start:u.pos+u.ids.length-1,ids:u.ids.map(function(Ha){return Ha.id})});if(c.revs_info){var N=u.pos+u.ids.length;r._revs_info=u.ids.map(function(Ha){N--;return{rev:N+"-"+Ha.id,status:Ha.opts.status}})}}if(c.attachments&&r._attachments){var J=r._attachments,sa=Object.keys(J).length;if(0===sa)return g(null,r);Object.keys(J).forEach(function(Ha){this._getAttachment(r._id,Ha,J[Ha],{rev:r._rev,binary:c.binary,ctx:x},function(Qa,ec){Qa=
r._attachments[Ha];Qa.data=ec;delete Qa.stub;delete Qa.length;--sa||g(null,r)})},f)}else{if(r._attachments)for(var ja in r._attachments)r._attachments.hasOwnProperty(ja)&&(r._attachments[ja].stub=!0);g(null,r)}})});il.prototype.getAttachment=Rl("getAttachment",function(b,c,g,a){var d=this;g instanceof Function&&(a=g,g={});this._get(b,g,function(f,k){if(f)return a(f);if(k.doc._attachments&&k.doc._attachments[c])g.ctx=k.ctx,g.binary=!0,d._getAttachment(b,c,k.doc._attachments[c],g,a);else return a(Tj(So))})});
il.prototype.allDocs=Rl("allDocs",function(b,c){"function"===typeof b&&(c=b,b={});b.skip="undefined"!==typeof b.skip?b.skip:0;b.start_key&&(b.startkey=b.start_key);b.end_key&&(b.endkey=b.end_key);if("keys"in b){if(!Array.isArray(b.keys))return c(new TypeError("options.keys must be an array"));var g=["startkey","endkey","key"].filter(function(a){return a in b})[0];if(g){c(Tj(g4,"Query parameter `"+g+"` is not compatible with multi-get"));return}if(!Ip(this)&&(XX(b),0===b.keys.length))return this._allDocs({limit:0},
c)}return this._allDocs(b,c)});il.prototype.changes=function(b,c){"function"===typeof b&&(c=b,b={});b=b||{};b.return_docs="return_docs"in b?b.return_docs:!b.live;return new Dw(this,b,c)};il.prototype.close=Rl("close",function(b){this._closed=!0;this.emit("closed");return this._close(b)});il.prototype.info=Rl("info",function(b){var c=this;this._info(function(g,a){if(g)return b(g);a.db_name=a.db_name||c.name;a.auto_compaction=!(!c.auto_compaction||Ip(c));a.adapter=c.adapter;b(null,a)})});il.prototype.id=
Rl("id",function(b){return this._id(b)});il.prototype.type=function(){return"function"===typeof this._type?this._type():this.adapter};il.prototype.bulkDocs=Rl("bulkDocs",function(b,c,g){"function"===typeof c&&(g=c,c={});c=c||{};Array.isArray(b)&&(b={docs:b});if(!b||!b.docs||!Array.isArray(b.docs))return g(Tj(f4));for(var a=0;a<b.docs.length;++a)if("object"!==typeof b.docs[a]||Array.isArray(b.docs[a]))return g(Tj(OH));var d;b.docs.forEach(function(n){n._attachments&&Object.keys(n._attachments).forEach(function(p){var q;
(q=d)||(q="_"===p.charAt(0)?p+" is not a valid attachment name, attachment names cannot start with '_'":!1);d=q;n._attachments[p].content_type||mo("warn","Attachment",p,"on document",n._id,"is missing content_type")})});if(d)return g(Tj(qz,d));"new_edits"in c||(c.new_edits="new_edits"in b?b.new_edits:!0);var f=this;c.new_edits||Ip(f)||b.docs.sort(VX);UX(b.docs);var k=b.docs.map(function(n){return n._id});return this._bulkDocs(b,c,function(n,p){if(n)return g(n);c.new_edits||(p=p.filter(function(r){return r.error}));
if(!Ip(f)){n=0;for(var q=p.length;n<q;n++)p[n].id=p[n].id||k[n]}g(null,p)})});il.prototype.registerDependentDatabase=Rl("registerDependentDatabase",function(b,c){var g=new this.constructor(b,this.__opts);sz(this,"_local/_pouch_dependentDbs",function(a){a.dependentDbs=a.dependentDbs||{};if(a.dependentDbs[b])return!1;a.dependentDbs[b]=!0;return a}).then(function(){c(null,{db:g})}).catch(c)});il.prototype.destroy=Rl("destroy",function(b,c){function g(){a._destroy(b,function(f,k){if(f)return c(f);a._destroyed=
!0;a.emit("destroyed");c(null,k||{ok:!0})})}"function"===typeof b&&(c=b,b={});var a=this,d="use_prefix"in a?a.use_prefix:!0;if(Ip(a))return g();a.get("_local/_pouch_dependentDbs",function(f,k){if(f)return 404!==f.status?c(f):g();var n=a.constructor;f=Object.keys(k.dependentDbs).map(function(p){p=d?p.replace(new RegExp("^"+n.prefix),""):p;return(new n(p,a.__opts)).destroy()});Promise.all(f).then(g,c)})});Ew.prototype.execute=function(){var b;if(this.failed)for(;b=this.queue.shift();)b(this.failed);
else for(;b=this.queue.shift();)b()};Ew.prototype.fail=function(b){this.failed=b;this.execute()};Ew.prototype.ready=function(b){this.isReady=!0;this.db=b;this.execute()};Ew.prototype.addTask=function(b){this.queue.push(b);this.failed&&this.execute()};hp(Oj,il);var HY="undefined"!==typeof AbortController?AbortController:function(){return{abort:function(){}}},nM=fetch,Cu=Headers;Oj.adapters={};Oj.preferredAdapters=[];Oj.prefix="_pouch_";var YT=new vn.EventEmitter;(function(b){Object.keys(vn.EventEmitter.prototype).forEach(function(g){"function"===
typeof vn.EventEmitter.prototype[g]&&(b[g]=YT[g].bind(YT))});var c=b._destructionListeners=new Mn;b.on("ref",function(g){c.has(g.name)||c.set(g.name,[]);c.get(g.name).push(g)});b.on("unref",function(g){if(c.has(g.name)){var a=c.get(g.name),d=a.indexOf(g);0>d||(a.splice(d,1),1<a.length?c.set(g.name,a):c.delete(g.name))}});b.on("destroyed",function(g){if(c.has(g)){var a=c.get(g);c.delete(g);a.forEach(function(d){d.emit("destroyed",!0)})}})})(Oj);Oj.adapter=function(b,c,g){c.valid()&&(Oj.adapters[b]=
c,g&&Oj.preferredAdapters.push(b))};Oj.plugin=function(b){if("function"===typeof b)b(Oj);else{if("object"!==typeof b||0===Object.keys(b).length)throw Error('Invalid plugin: got "'+b+'", expected an object or a function');Object.keys(b).forEach(function(c){Oj.prototype[c]=b[c]})}this.__defaults&&(Oj.__defaults=Au({},this.__defaults));return Oj};Oj.defaults=function(b){function c(g,a){if(!(this instanceof c))return new c(g,a);a=a||{};g&&"object"===typeof g&&(a=g,g=a.name,delete a.name);a=Au({},c.__defaults,
a);Oj.call(this,g,a)}hp(c,Oj);c.preferredAdapters=Oj.preferredAdapters.slice();Object.keys(Oj).forEach(function(g){g in c||(c[g]=Oj[g])});c.__defaults=Au({},this.__defaults,b);return c};Oj.fetch=function(b,c){return nM(b,c)};var VL=["$or","$nor","$not"],YL={$elemMatch:function(b,c,g,a){return Array.isArray(a)&&0!==a.length?"object"===typeof a[0]?a.some(function(d){return yu(d,c,Object.keys(c))}):a.some(function(d){return GD(c,b,g,d)}):!1},$allMatch:function(b,c,g,a){return Array.isArray(a)&&0!==a.length?
"object"===typeof a[0]?a.every(function(d){return yu(d,c,Object.keys(c))}):a.every(function(d){return GD(c,b,g,d)}):!1},$eq:function(b,c,g,a){return Es(a)&&0===om(a,c)},$gte:function(b,c,g,a){return Es(a)&&0<=om(a,c)},$gt:function(b,c,g,a){return Es(a)&&0<om(a,c)},$lte:function(b,c,g,a){return Es(a)&&0>=om(a,c)},$lt:function(b,c,g,a){return Es(a)&&0>om(a,c)},$exists:function(b,c,g,a){return c?Es(a):!Es(a)},$mod:function(b,c,g,a){if(b=Gw(a)){b=c[0];c=c[1];if(0===b)throw Error("Bad divisor, cannot divide by zero");
if(parseInt(b,10)!==b)throw Error("Divisor is not an integer");if(parseInt(c,10)!==c)throw Error("Modulus is not an integer");b=parseInt(a,10)!==a?!1:a%b===c}return b},$ne:function(b,c,g,a){return c.every(function(d){return 0!==om(a,d)})},$in:function(b,c,g,a){return Gw(a)&&ZL(a,c)},$nin:function(b,c,g,a){return Gw(a)&&!ZL(a,c)},$size:function(b,c,g,a){return Gw(a)&&a.length===c},$all:function(b,c,g,a){return Array.isArray(a)&&fY(a,c)},$regex:function(b,c,g,a){if(b=Gw(a))b=(new RegExp(c)).test(a);
return b},$type:function(b,c,g,a){return gY(a,c)}};Oj.plugin(function(b){b._changesFilterPlugin={validate:hY,normalize:iY,shouldFilter:jY,filter:kY}});Oj.version="7.2.1";var lY=$L("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),mY=$L("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" ")),
Hw=new wu,KD=!1,LD=[],Bu=new Mn,ND,MD=new Mn;lM.valid=function(){return"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange};var QD={};PD.valid=function(){return!0};hp(Hs,Error);hp(zz,Error);hp(Az,Error);var KY=mo.bind(null,"log"),LY=Array.isArray,MY=JSON.parse;Jw.prototype.add=function(b){return this.promise=this.promise.catch(function(){}).then(function(){return b()})};Jw.prototype.finish=function(){return this.promise};var ZT={},$T=new Jw,h4=function(b,c){return TD(c)},i4=function(b,
c){return c.length},j4=function(b,c){b=TD(c);for(var g=Math.min.apply(null,c),a=Math.max.apply(null,c),d=c.length,f=0,k=0,n=c.length;k<n;k++){var p=c[k];f+=p*p}return{sum:b,min:g,max:a,count:d,sumsqr:f}},aU=function(b,c,g,a){function d(Lb,Ac,Xb,qd,La){try{return{output:Ac(Xb,qd,La)}}catch(Fd){return uM(Lb,Fd),{error:Fd}}}function f(Lb,Ac){var Xb=om(Lb.key,Ac.key);return 0!==Xb?Xb:om(Lb.value,Ac.value)}function k(Lb,Ac,Xb){Xb=Xb||0;return"number"===typeof Ac?Lb.slice(Xb,Ac+Xb):0<Xb?Lb.slice(Xb):Lb}
function n(Lb){var Ac=Lb.value;return Ac&&"object"===typeof Ac&&Ac._id||Lb.id}function p(Lb){Lb.rows.forEach(function(Ac){var Xb=Ac.doc&&Ac.doc._attachments;Xb&&Object.keys(Xb).forEach(function(qd){var La=Xb[qd];Xb[qd].data=zD(La.data,La.content_type)})})}function q(Lb){return function(Ac){Lb.include_docs&&Lb.attachments&&Lb.binary&&p(Ac);return Ac}}function r(Lb,Ac,Xb,qd){Ac=Ac[Lb];"undefined"!==typeof Ac&&(qd&&(Ac=encodeURIComponent(JSON.stringify(Ac))),Xb.push(Lb+"="+Ac))}function u(Lb){if("undefined"!==
typeof Lb){var Ac=Number(Lb);return isNaN(Ac)||Ac!==parseInt(Lb,10)?Lb:Ac}}function x(Lb){Lb.group_level=u(Lb.group_level);Lb.limit=u(Lb.limit);Lb.skip=u(Lb.skip);return Lb}function y(Lb,Ac){var Xb=Lb.descending?"endkey":"startkey",qd=Lb.descending?"startkey":"endkey";if("undefined"!==typeof Lb[Xb]&&"undefined"!==typeof Lb[qd]&&0<om(Lb[Xb],Lb[qd]))throw new Hs("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(Ac.reduce&&!1!==Lb.reduce){if(Lb.include_docs)throw new Hs("{include_docs:true} is invalid for reduce");
if(Lb.keys&&1<Lb.keys.length&&!Lb.group&&!Lb.group_level)throw new Hs("Multi-key fetches for reduce views must use {group: true}");}["group_level","limit","skip"].forEach(function(La){a:{if(La=Lb[La]){if("number"!==typeof La){La=new Hs('Invalid value for integer: "'+La+'"');break a}if(0>La){La=new Hs('Invalid value for positive integer: "'+La+'"');break a}}La=void 0}if(La)throw La;})}function D(Lb,Ac,Xb){var qd=[],La,Fd="GET",na,Va;r("reduce",Xb,qd);r("include_docs",Xb,qd);r("attachments",Xb,qd);
r("limit",Xb,qd);r("descending",Xb,qd);r("group",Xb,qd);r("group_level",Xb,qd);r("skip",Xb,qd);r("stale",Xb,qd);r("conflicts",Xb,qd);r("startkey",Xb,qd,!0);r("start_key",Xb,qd,!0);r("endkey",Xb,qd,!0);r("end_key",Xb,qd,!0);r("inclusive_end",Xb,qd);r("key",Xb,qd,!0);r("update_seq",Xb,qd);qd=qd.join("&");qd=""===qd?"":"?"+qd;if("undefined"!==typeof Xb.keys){var yd="keys="+encodeURIComponent(JSON.stringify(Xb.keys));2E3>=yd.length+qd.length+1?qd+=("?"===qd[0]?"&":"?")+yd:(Fd="POST","string"===typeof Ac?
La={keys:Xb.keys}:Ac.keys=Xb.keys)}if("string"===typeof Ac)return yd=UD(Ac),Lb.fetch("_design/"+yd[0]+"/_view/"+yd[1]+qd,{headers:new Cu({"Content-Type":"application/json"}),method:Fd,body:JSON.stringify(La)}).then(function(me){na=me.ok;Va=me.status;return me.json()}).then(function(me){if(!na)throw me.status=Va,xu(me);me.rows.forEach(function(ta){if(ta.value&&ta.value.error&&"builtin_reduce_error"===ta.value.error)throw Error(ta.reason);});return me}).then(q(Xb));La=La||{};Object.keys(Ac).forEach(function(me){Array.isArray(Ac[me])?
La[me]=Ac[me]:La[me]=Ac[me].toString()});return Lb.fetch("_temp_view"+qd,{headers:new Cu({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(La)}).then(function(me){na=me.ok;Va=me.status;return me.json()}).then(function(me){if(!na)throw me.status=Va,xu(me);return me}).then(q(Xb))}function H(Lb,Ac,Xb){return new Promise(function(qd,La){Lb._query(Ac,Xb,function(Fd,na){if(Fd)return La(Fd);qd(na)})})}function I(Lb){return new Promise(function(Ac,Xb){Lb._viewCleanup(function(qd,La){if(qd)return Xb(qd);
Ac(La)})})}function N(Lb){return function(Ac){if(404===Ac.status)return Lb;throw Ac;}}function J(Lb,Ac,Xb){function qd(Va,yd){for(var me=[],ta=new Iw,za=0,W=yd.rows.length;za<W;za++){var ea=yd.rows[za].doc;if(ea&&(me.push(ea),ta.add(ea._id),ea._deleted=!na.has(ea._id),!ea._deleted)){var Kb=na.get(ea._id);"value"in Kb&&(ea.value=Kb.value)}}yd=SD(na);yd.forEach(function(V){if(!ta.has(V)){var Oa={_id:V};V=na.get(V);"value"in V&&(Oa.value=V.value);me.push(Oa)}});Va.keys=pM(yd.concat(Va.keys));me.push(Va);
return me}var La="_local/doc_"+Lb,Fd={_id:La,keys:[]};Lb=Xb.get(Lb);var na=Lb[0];La=OY(Lb[1])?Promise.resolve(Fd):Ac.db.get(La).catch(N(Fd));return La.then(function(Va){return(Va.keys.length?Ac.db.allDocs({keys:Va.keys,include_docs:!0}):Promise.resolve({rows:[]})).then(function(yd){return qd(Va,yd)})})}function sa(Lb,Ac,Xb){return Lb.db.get("_local/lastSeq").catch(N({_id:"_local/lastSeq",seq:0})).then(function(qd){var La=SD(Ac);return Promise.all(La.map(function(Fd){return J(Fd,Lb,Ac)})).then(function(Fd){Fd=
rz(Fd);qd.seq=Xb;Fd.push(qd);return Lb.db.bulkDocs({docs:Fd})})})}function ja(Lb){Lb="string"===typeof Lb?Lb:Lb.name;var Ac=ZT[Lb];Ac||(Ac=ZT[Lb]=new Jw);return Ac}function Ha(Lb){return RD(ja(Lb),function(){return Qa(Lb)})()}function Qa(Lb){function Ac(me,ta){return function(){return sa(Lb,me,ta)}}function Xb(){return Lb.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:Va,limit:50}).then(qd)}function qd(me){me=me.results;if(me.length){for(var ta=new Mn,za=0,W=
me.length;za<W;za++){var ea=me[za];if("_"!==ea.doc._id[0]){La=[];Fd=ea.doc;if(!Fd._deleted){var Kb=Lb.sourceDB;try{na(Fd)}catch(Je){uM(Kb,Je)}}La.sort(f);Kb=void 0;for(var V=La,Oa=new Mn,U=0,fd=V.length;U<fd;U++){var Td=V[U],nf=[Td.key,Td.id];0<U&&0===om(Td.key,Kb)&&nf.push(U);Oa.set(Ro(nf),Td);Kb=Td.key}ta.set(ea.doc._id,[Oa,ea.changes])}Va=ea.seq}yd.add(Ac(ta,Va));if(!(50>me.length))return Xb()}}var La,Fd,na=c(Lb.mapFun,function(me,ta){me={id:Fd._id,key:Ds(me)};"undefined"!==typeof ta&&null!==ta&&
(me.value=Ds(ta));La.push(me)}),Va=Lb.seq||0,yd=new Jw;return Xb().then(function(){return yd.finish()}).then(function(){Lb.seq=Va})}function ec(Lb,Ac,Xb){0===Xb.group_level&&delete Xb.group_level;var qd=Xb.group||Xb.group_level,La=g(Lb.reduceFun),Fd=[],na=isNaN(Xb.group_level)?Number.POSITIVE_INFINITY:Xb.group_level;Ac.forEach(function(za){var W=Fd[Fd.length-1],ea=qd?za.key:null;qd&&Array.isArray(ea)&&(ea=ea.slice(0,na));W&&0===om(W.groupKey,ea)?(W.keys.push([za.key,za.id]),W.values.push(za.value)):
Fd.push({keys:[[za.key,za.id]],values:[za.value],groupKey:ea})});Ac=[];for(var Va=0,yd=Fd.length;Va<yd;Va++){var me=Fd[Va],ta=d(Lb.sourceDB,La,me.keys,me.values,!1);if(ta.error&&ta.error instanceof Az)throw ta.error;Ac.push({value:ta.error?null:ta.output,key:me.groupKey})}return{rows:k(Ac,Xb.limit,Xb.skip)}}function mc(Lb,Ac){return RD(ja(Lb),function(){return hc(Lb,Ac)})()}function hc(Lb,Ac){function Xb(ta){ta.include_docs=!0;return Lb.db.allDocs(ta).then(function(za){La=za.total_rows;return za.rows.map(function(W){if("value"in
W.doc&&"object"===typeof W.doc.value&&null!==W.doc.value){var ea=Object.keys(W.doc.value).sort(),Kb=["id","key","value"];if(!(ea<Kb||ea>Kb))return W.doc.value}a:{ea=W.doc._id;Kb=[];for(var V=[],Oa=0;;){var U=ea[Oa++];if("\x00"===U)if(1===Kb.length){ea=Kb.pop();break a}else{var fd=Kb;var Td=V;U=fd.pop();if(Td.length){var nf=Td[Td.length-1];U===nf.element&&(Td.pop(),nf=Td[Td.length-1]);Td=nf.element;nf=nf.index;Array.isArray(Td)?Td.push(U):nf===fd.length-2?(fd=fd.pop(),Td[fd]=U):fd.push(U)}continue}switch(U){case "1":Kb.push(null);
break;case "2":Kb.push("1"===ea[Oa]);Oa++;break;case "3":nf=ea;fd=U=Oa;if("1"===nf[U])nf=0,U++;else{Td="0"===nf[U];U++;var Je="",rf=nf.substring(U,U+3);rf=parseInt(rf,10)+-324;Td&&(rf=-rf);for(U+=3;;){var fh=nf[U];if("\x00"===fh)break;else Je+=fh;U++}Je=Je.split(".");nf=1===Je.length?parseInt(Je,10):parseFloat(Je[0]+"."+Je[1]);Td&&(nf-=10);0!==rf&&(nf=parseFloat(nf+"e"+rf))}Td=nf;U-=fd;Kb.push(Td);Oa+=U;break;case "4":for(U="";;){fd=ea[Oa];if("\x00"===fd)break;U+=fd;Oa++}U=U.replace(/\u0001\u0001/g,
"\x00").replace(/\u0001\u0002/g,"\u0001").replace(/\u0002\u0002/g,"\u0002");Kb.push(U);break;case "5":U={element:[],index:Kb.length};Kb.push(U.element);V.push(U);break;case "6":U={element:{},index:Kb.length};Kb.push(U.element);V.push(U);break;default:throw Error("bad collationIndex or unexpectedly reached end of input: "+U);}}}return{key:ea[0],id:ea[1],value:"value"in W.doc?W.doc.value:null}})})}function qd(ta){var za=Fd?ec(Lb,ta,Ac):{total_rows:La,offset:na,rows:ta};Ac.update_seq&&(za.update_seq=
Lb.seq);if(Ac.include_docs){var W=pM(ta.map(n));return Lb.sourceDB.allDocs({keys:W,include_docs:!0,conflicts:Ac.conflicts,attachments:Ac.attachments,binary:Ac.binary}).then(function(ea){var Kb=new Mn;ea.rows.forEach(function(V){Kb.set(V.id,V.doc)});ta.forEach(function(V){var Oa=n(V);if(Oa=Kb.get(Oa))V.doc=Oa});return za})}return za}var La,Fd=Lb.reduceFun&&!1!==Ac.reduce,na=Ac.skip||0;"undefined"===typeof Ac.keys||Ac.keys.length||(Ac.limit=0,delete Ac.keys);if("undefined"!==typeof Ac.keys){var Va=
Ac.keys.map(function(ta){ta={startkey:Ro([ta]),endkey:Ro([ta,{}])};Ac.update_seq&&(ta.update_seq=!0);return Xb(ta)});return Promise.all(Va).then(rz).then(qd)}Va={descending:Ac.descending};Ac.update_seq&&(Va.update_seq=!0);if("start_key"in Ac)var yd=Ac.start_key;"startkey"in Ac&&(yd=Ac.startkey);if("end_key"in Ac)var me=Ac.end_key;"endkey"in Ac&&(me=Ac.endkey);"undefined"!==typeof yd&&(Va.startkey=Ac.descending?Ro([yd,{}]):Ro([yd]));"undefined"!==typeof me&&(yd=!1!==Ac.inclusive_end,Ac.descending&&
(yd=!yd),Va.endkey=Ro(yd?[me,{}]:[me]));"undefined"!==typeof Ac.key&&(me=Ro([Ac.key]),yd=Ro([Ac.key,{}]),Va.descending?(Va.endkey=me,Va.startkey=yd):(Va.startkey=me,Va.endkey=yd));Fd||("number"===typeof Ac.limit&&(Va.limit=Ac.limit),Va.skip=na);return Xb(Va).then(qd)}function Ua(Lb){return Lb.fetch("_view_cleanup",{headers:new Cu({"Content-Type":"application/json"}),method:"POST"}).then(function(Ac){return Ac.json()})}function xa(Lb){return Lb.get("_local/"+b).then(function(Ac){var Xb=new Mn;Object.keys(Ac.views).forEach(function(La){var Fd=
UD(La);La="_design/"+Fd[0];Fd=Fd[1];var na=Xb.get(La);na||(na=new Iw,Xb.set(La,na));na.add(Fd)});var qd={keys:SD(Xb),include_docs:!0};return Lb.allDocs(qd).then(function(La){var Fd={};La.rows.forEach(function(na){var Va=na.key.substring(8);Xb.get(na.key).forEach(function(yd){var me=Va+"/"+yd;Ac.views[me]||(me=yd);me=Object.keys(Ac.views[me]);var ta=na.doc&&na.doc.views&&na.doc.views[yd];me.forEach(function(za){Fd[za]=Fd[za]||ta})})});La=Object.keys(Fd).filter(function(na){return!Fd[na]}).map(function(na){return RD(ja(na),
function(){return(new Lb.constructor(na,Lb.__opts)).destroy()})()});return Promise.all(La).then(function(){return{ok:!0}})})},N({ok:!0}))}function rc(Lb,Ac,Xb){if("function"===typeof Lb._query)return H(Lb,Ac,Xb);if(Ip(Lb))return D(Lb,Ac,Xb);if("string"!==typeof Ac)return y(Xb,Ac),$T.add(function(){return tM(Lb,"temp_view/temp_view",Ac.map,Ac.reduce,!0,b).then(function(Fd){return JY(Ha(Fd).then(function(){return mc(Fd,Xb)}),function(){return Fd.db.destroy()})})}),$T.finish();var qd=UD(Ac),La=qd[1];
return Lb.get("_design/"+qd[0]).then(function(Fd){var na=Fd.views&&Fd.views[La];if(!na)throw new zz("ddoc "+Fd._id+" has no view named "+La);a(Fd,La);y(Xb,na);return tM(Lb,Ac,na.map,na.reduce,!1,b).then(function(Va){return"ok"===Xb.stale||"update_after"===Xb.stale?("update_after"===Xb.stale&&Jp(function(){Ha(Va)}),mc(Va,Xb)):Ha(Va).then(function(){return mc(Va,Xb)})})})}return{query:function(Lb,Ac,Xb){var qd=this;"function"===typeof Ac&&(Xb=Ac,Ac={});Ac=Ac?x(Ac):{};"function"===typeof Lb&&(Lb={map:Lb});
var La=Promise.resolve().then(function(){return rc(qd,Lb,Ac)});oM(La,Xb);return La},viewCleanup:IY(function(){return"function"===typeof this._viewCleanup?I(this):Ip(this)?Ua(this):xa(this)})}}("mrviews",function(b,c){return"function"===typeof b&&2===b.length?function(g){return b(g,c)}:rM(b.toString(),c)},function(b){b=b.toString();if(/^_sum/.test(b))var c=h4;else if(/^_count/.test(b))c=i4;else if(/^_stats/.test(b))c=j4;else{if(/^_/.test(b))throw Error(b+" is not a supported reduce function.");c=void 0}return c?
c:rM(b)},function(b,c){var g=b.views&&b.views[c];if("string"!==typeof g.map)throw new zz("ddoc "+b._id+" has no string view named "+c+", instead found object of type: "+typeof g.map);});Kw.prototype.writeCheckpoint=function(b,c){var g=this;return this.updateTarget(b,c).then(function(){return g.updateSource(b,c)})};Kw.prototype.updateTarget=function(b,c){return this.opts.writeTargetCheckpoint?VD(this.target,this.id,b,c,this.returnValue):Promise.resolve(!0)};Kw.prototype.updateSource=function(b,c){if(this.opts.writeSourceCheckpoint){var g=
this;return VD(this.src,this.id,b,c,this.returnValue).catch(function(a){if(xM(a))return g.opts.writeSourceCheckpoint=!1,!0;throw a;})}return Promise.resolve(!0)};var bU={undefined:function(b,c){return 0===om(b.last_seq,c.last_seq)?c.last_seq:0},1:function(b,c){b=c.session_id===b.session_id?{last_seq:c.last_seq,history:c.history}:wM(c.history,b.history);return b.last_seq}};Kw.prototype.getCheckpoint=function(){var b=this;return b.opts&&b.opts.writeSourceCheckpoint&&!b.opts.writeTargetCheckpoint?b.src.get(b.id).then(function(c){return c.last_seq||
0}).catch(function(c){if(404!==c.status)throw c;return 0}):b.target.get(b.id).then(function(c){return b.opts&&b.opts.writeTargetCheckpoint&&!b.opts.writeSourceCheckpoint?c.last_seq||0:b.src.get(b.id).then(function(g){if(c.version!==g.version)return 0;var a=c.version?c.version.toString():"undefined";return a in bU?bU[a](c,g):0},function(g){if(404===g.status&&c.last_seq)return b.src.put({_id:b.id,last_seq:0}).then(function(){return 0},function(a){return xM(a)?(b.opts.writeSourceCheckpoint=!1,c.last_seq):
0});throw g;})}).catch(function(c){if(404!==c.status)throw c;return 0})};hp(Bz,vn.EventEmitter);Bz.prototype.cancel=function(){this.cancelled=!0;this.state="cancelled";this.emit("cancel")};Bz.prototype.ready=function(b,c){function g(){a.cancel()}var a=this;a._readyCalled||(a._readyCalled=!0,b.once("destroyed",g),c.once("destroyed",g),a.once("complete",function(){b.removeListener("destroyed",g);c.removeListener("destroyed",g)}))};hp(YD,vn.EventEmitter);YD.prototype.cancel=function(){this.canceled||
(this.canceled=!0,this.push.cancel(),this.pull.cancel())};Oj.plugin(function(b){b.adapter("idb",lM,!0)}).plugin(function(b){b.adapter("http",PD,!1);b.adapter("https",PD,!1)}).plugin({query:function(b,c,g){return aU.query.call(this,b,c,g)},viewCleanup:function(b){return aU.viewCleanup.call(this,b)}}).plugin(function(b){b.replicate=XD;b.sync=VY;Object.defineProperty(b.prototype,"replicate",{get:function(){var c=this;"undefined"===typeof this.replicateMethods&&(this.replicateMethods={from:function(g,
a,d){return c.constructor.replicate(g,c,a,d)},to:function(g,a,d){return c.constructor.replicate(c,g,a,d)}});return this.replicateMethods}});b.prototype.sync=function(c,g,a){return this.constructor.sync(this,c,g,a)}});var cU=e4=Oj,k4=Object.freeze({__proto__:null,"default":cU}),l4=Ol(k4),ip={};Object.defineProperty(ip,"__esModule",{value:!0});qr.prototype.get=function(b){return this._store["$"+b]};qr.prototype.set=function(b,c){this._store["$"+b]=c;return!0};qr.prototype.has=function(b){return"$"+
b in this._store};qr.prototype.delete=function(b){b="$"+b;var c=b in this._store;delete this._store[b];return c};qr.prototype.forEach=function(b){for(var c=Object.keys(this._store),g=0,a=c.length;g<a;g++){var d=c[g],f=this._store[d];d=d.substring(1);b(f,d)}};Object.defineProperty(qr.prototype,"size",{get:function(){return Object.keys(this._store).length}});Lw.prototype.add=function(b){return this._store.set(b,!0)};Lw.prototype.has=function(b){return this._store.has(b)};Lw.prototype.forEach=function(b){this._store.forEach(function(c,
g){b(g)})};Object.defineProperty(Lw.prototype,"size",{get:function(){return this._store.size}});(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var b=Object.getOwnPropertyDescriptor(Map,Symbol.species);return b&&"get"in b&&Map[Symbol.species]===Map})()?(ip.Set=Set,ip.Map=Map):(ip.Set=Lw,ip.Map=qr);ip.__esModule;ip.Set;ip.Map;var Gh={};Object.defineProperty(Gh,"__esModule",{value:!0});(sl&&"object"===typeof sl&&"default"in sl?sl["default"]:sl)(Yk,
Error);Yk.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var m4=new Yk(401,"unauthorized","Name or password is incorrect."),n4=new Yk(400,"bad_request","Missing JSON list of 'docs'"),o4=new Yk(404,"not_found","missing"),p4=new Yk(409,"conflict","Document update conflict"),q4=new Yk(400,"bad_request","_id field must contain a string"),r4=new Yk(412,"missing_id","_id is required for puts"),s4=new Yk(400,"bad_request",
"Only reserved document ids may start with underscore."),t4=new Yk(412,"precondition_failed","Database not open"),dU=new Yk(500,"unknown_error","Database encountered an unknown error"),u4=new Yk(500,"badarg","Some query argument is invalid"),v4=new Yk(400,"invalid_request","Request was invalid"),w4=new Yk(400,"query_parse_error","Some query parameter is invalid"),x4=new Yk(500,"doc_validation","Bad special document member"),y4=new Yk(400,"bad_request","Something wrong with the request"),z4=new Yk(400,
"bad_request","Document must be a JSON object"),A4=new Yk(404,"not_found","Database not found"),B4=new Yk(500,"indexed_db_went_bad","unknown"),C4=new Yk(500,"web_sql_went_bad","unknown"),D4=new Yk(500,"levelDB_went_went_bad","unknown"),E4=new Yk(403,"forbidden","Forbidden by design doc validate_doc_update function"),F4=new Yk(400,"bad_request","Invalid rev format"),G4=new Yk(412,"file_exists","The database could not be created, the file already exists."),H4=new Yk(412,"missing_stub","A pre-existing attachment stub wasn't found"),
I4=new Yk(413,"invalid_url","Provided URL is invalid");Gh.UNAUTHORIZED=m4;Gh.MISSING_BULK_DOCS=n4;Gh.MISSING_DOC=o4;Gh.REV_CONFLICT=p4;Gh.INVALID_ID=q4;Gh.MISSING_ID=r4;Gh.RESERVED_ID=s4;Gh.NOT_OPEN=t4;Gh.UNKNOWN_ERROR=dU;Gh.BAD_ARG=u4;Gh.INVALID_REQUEST=v4;Gh.QUERY_PARSE_ERROR=w4;Gh.DOC_VALIDATION=x4;Gh.BAD_REQUEST=y4;Gh.NOT_AN_OBJECT=z4;Gh.DB_MISSING=A4;Gh.WSQ_ERROR=C4;Gh.LDB_ERROR=D4;Gh.FORBIDDEN=E4;Gh.INVALID_REV=F4;Gh.FILE_EXISTS=G4;Gh.MISSING_STUB=H4;Gh.IDB_ERROR=B4;Gh.INVALID_URL=I4;Gh.createError=
function(b,c){function g(a){for(var d in b)"function"!==typeof b[d]&&(this[d]=b[d]);void 0!==a&&(this.reason=a)}g.prototype=Yk.prototype;return new g(c)};Gh.generateErrorFromResponse=function(b){if("object"!==typeof b){var c=b;b=dU;b.data=c}"error"in b&&"conflict"===b.error&&(b.name="conflict",b.status=409);"name"in b||(b.name=b.error||"unknown");"status"in b||(b.status=500);"message"in b||(b.message=b.message||b.reason);return b};Gh.__esModule;Gh.UNAUTHORIZED;Gh.MISSING_BULK_DOCS;Gh.MISSING_DOC;
Gh.REV_CONFLICT;Gh.INVALID_ID;Gh.MISSING_ID;Gh.RESERVED_ID;Gh.NOT_OPEN;Gh.UNKNOWN_ERROR;Gh.BAD_ARG;Gh.INVALID_REQUEST;Gh.QUERY_PARSE_ERROR;Gh.DOC_VALIDATION;Gh.BAD_REQUEST;Gh.NOT_AN_OBJECT;Gh.DB_MISSING;Gh.WSQ_ERROR;Gh.LDB_ERROR;Gh.FORBIDDEN;Gh.INVALID_REV;Gh.FILE_EXISTS;Gh.MISSING_STUB;Gh.IDB_ERROR;Gh.INVALID_URL;Gh.createError;Gh.generateErrorFromResponse;var Zk={};Object.defineProperty(Zk,"__esModule",{value:!0});Zk.atob=function(b){return eU(b)};Zk.btoa=function(b){return fU(b)};Zk.base64StringToBlobOrBuffer=
function(b,c){return BM(eU(b),c)};Zk.binaryStringToArrayBuffer=AM;Zk.binaryStringToBlobOrBuffer=BM;Zk.blob=zM;Zk.blobOrBufferToBase64=function(b,c){DM(b,function(g){c(fU(g))})};Zk.blobOrBufferToBinaryString=DM;Zk.readAsArrayBuffer=function(b,c){var g=new FileReader;g.onloadend=function(a){a=a.target.result||new ArrayBuffer(0);c(a)};g.readAsArrayBuffer(b)};Zk.readAsBinaryString=CM;Zk.typedBuffer=function(){};Zk.__esModule;const eU=Zk.atob,fU=Zk.btoa;Zk.base64StringToBlobOrBuffer;Zk.binaryStringToBlobOrBuffer;
Zk.blob;Zk.blobOrBufferToBase64;Zk.blobOrBufferToBinaryString;Zk.binaryStringToArrayBuffer;Zk.readAsArrayBuffer;Zk.readAsBinaryString;Zk.typedBuffer;var gU="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Tq={};Object.defineProperty(Tq,"__esModule",{value:!0});var EM=Zk,PH=wv&&"object"===typeof wv&&"default"in wv?wv["default"]:wv,J4=gU.setImmediate||gU.setTimeout;Tq.binaryMd5=function(b,c){function g(){J4(d)}function a(){var x=r.end(!0);x=EM.btoa(x);c(x);r.destroy()}
function d(){var x=q*n,y=x+n;q++;q<p?u(r,b,x,y,g):u(r,b,x,y,a)}var f="string"===typeof b,k=f?b.length:b.size,n=Math.min(32768,k),p=Math.ceil(k/n),q=0,r=f?new PH:new PH.ArrayBuffer,u=f?YY:XY;d()};Tq.stringMd5=function(b){return PH.hash(b)};Tq.__esModule;Tq.binaryMd5;Tq.stringMd5;var Vh={};Object.defineProperty(Vh,"__esModule",{value:!0});var ZD=Dz(NH),K4=Dz(sl),hU=Dz(LT),Fz=Dl,iU=Dz(TT),FM=Function.prototype.toString,ZY=FM.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var Ez=
!!localStorage.getItem("_pouch_check_localstorage")}catch(b){Ez=!1}K4(Du,Fz.EventEmitter);Du.prototype.addListener=function(b,c,g,a){function d(){if(f._listeners[c])if(k)k="waiting";else{k=!0;var n=$D(a,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));g.changes(n).on("change",function(p){p.seq>a.since&&!a.cancelled&&(a.since=p.seq,a.onChange(p))}).on("complete",function(){"waiting"===k&&hU(d);k=!1}).on("error",function(){k=!1})}}if(!this._listeners[c]){var f=
this,k=!1;this._listeners[c]=d;this.on(b,d)}};Du.prototype.removeListener=function(b,c){c in this._listeners&&(Fz.EventEmitter.prototype.removeListener.call(this,b,this._listeners[c]),delete this._listeners[c])};Du.prototype.notifyLocalWindows=function(b){Ez&&(localStorage[b]="a"===localStorage[b]?"b":"a")};Du.prototype.notify=function(b){this.emit(b);this.notifyLocalWindows(b)};var L4="function"===typeof Object.assign?Object.assign:function(b){for(var c=Object(b),g=1;g<arguments.length;g++){var a=
arguments[g];if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d])}return c},M4=function(){}.name?function(b){return b.name}:function(b){return(b=b.toString().match(/^\s*function\s*(?:(\S+)\s*)?\(/))&&b[1]?b[1]:""},jU="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),N4=/(?:^|&)([^&=]*)=?([^&]*)/g,O4=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
P4=iU.v4;Vh.adapterFun=function(b,c){return HM(ZD(function(g){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var a=this;$Y(a,b,g);return this.taskqueue.isReady?c.apply(this,g):new Promise(function(d,f){a.taskqueue.addTask(function(k){k?f(k):d(a[b].apply(a,g))})})}))};Vh.assign=L4;Vh.bulkGetShim=function(b,c,g){function a(){var y=[];r.forEach(function(D){D.docs.forEach(function(H){y.push({id:D.id,docs:[H]})})});
g(null,{results:y})}function d(){if(!(x>=u.length)){var y=u.slice(x,Math.min(x+6,u.length));f(y,x);x+=y.length}}function f(y,D){y.forEach(function(H,I){var N=D+I;I=n.get(H);var J=$D(I[0],["atts_since","attachments"]);J.open_revs=I.map(function(ja){return ja.rev});J.open_revs=J.open_revs.filter(IM);var sa=IM;0===J.open_revs.length&&(delete J.open_revs,sa=aZ);["revs","attachments","binary","ajax","latest"].forEach(function(ja){ja in c&&(J[ja]=c[ja])});b.get(H,J,function(ja,Ha){ja=ja?[{error:ja}]:sa(Ha);
r[N]={id:H,docs:ja};++q===p&&a();d()})})}var k=c.docs,n=new ip.Map;k.forEach(function(y){n.has(y.id)?n.get(y.id).push(y):n.set(y.id,[y])});var p=n.size,q=0,r=Array(p),u=[];n.forEach(function(y,D){u.push(D)});var x=0;d()};Vh.changesHandler=Du;Vh.clone=Mw;Vh.defaultBackOff=function(b){var c=0;b||(c=2E3);b=parseInt(b,10)||0;c=parseInt(c,10);c=c!==c||c<=b?(b||1)<<1:c+1;6E5<c&&(b=3E5,c=6E5);return~~((c-b)*Math.random()+b)};Vh.explainError=function(b,c){aE("info","The above "+b+" is totally normal. "+c)};
Vh.filterChange=function(b){var c={},g=b.filter&&"function"===typeof b.filter;c.query=b.query_params;return function(a){a.doc||(a.doc={});var d;if(d=g)try{d=!(0,b.filter)(a.doc,c)}catch(k){d=Gh.createError(Gh.BAD_REQUEST,"Filter function threw: "+k.toString())}if("object"===typeof d)return d;if(d)return!1;if(!b.include_docs)delete a.doc;else if(!b.attachments)for(var f in a.doc._attachments)a.doc._attachments.hasOwnProperty(f)&&(a.doc._attachments[f].stub=!0);return!0}};Vh.flatten=function(b){for(var c=
[],g=0,a=b.length;g<a;g++)c=c.concat(b[g]);return c};Vh.functionName=M4;Vh.guardedConsole=aE;Vh.hasLocalStorage=function(){return Ez};Vh.invalidIdError=function(b){var c;b?"string"!==typeof b?c=Gh.createError(Gh.INVALID_ID):/^_/.test(b)&&!/^_(design|local)/.test(b)&&(c=Gh.createError(Gh.RESERVED_ID)):c=Gh.createError(Gh.MISSING_ID);if(c)throw c;};Vh.isRemote=function(b){return"boolean"===typeof b._remote?b._remote:"function"===typeof b.type?(aE("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),
"http"===b.type()):!1};Vh.listenerCount=function(b,c){return"listenerCount"in b?b.listenerCount(c):Fz.EventEmitter.listenerCount(b,c)};Vh.nextTick=hU;Vh.normalizeDdocFunctionName=function(b){return(b=JM(b))?b.join("/"):null};Vh.once=GM;Vh.parseDdocFunctionName=JM;Vh.parseUri=function(b){b=O4.exec(b);for(var c={},g=14;g--;){var a=jU[g],d=b[g]||"",f=-1!==["user","password"].indexOf(a);c[a]=f?decodeURIComponent(d):d}c.queryKey={};c[jU[12]].replace(N4,function(k,n,p){n&&(c.queryKey[n]=p)});return c};
Vh.pick=$D;Vh.rev=function(b,c){b=Mw(b);if(!c)return iU.v4().replace(/-/g,"").toLowerCase();delete b._rev_tree;return Tq.stringMd5(JSON.stringify(b))};Vh.scopeEval=function(b,c){var g=[],a=[],d;for(d in c)c.hasOwnProperty(d)&&(g.push(d),a.push(c[d]));g.push(b);return Function.apply(null,g).apply(null,a)};Vh.toPromise=HM;Vh.upsert=KM;Vh.uuid=P4;Vh.__esModule;Vh.bulkGetShim;Vh.changesHandler;Vh.functionName;Vh.nextTick;Vh.normalizeDdocFunctionName;Vh.parseDdocFunctionName;Vh.adapterFun;Vh.assign;Vh.clone;
Vh.defaultBackOff;Vh.explainError;Vh.filterChange;Vh.flatten;Vh.guardedConsole;Vh.hasLocalStorage;Vh.invalidIdError;Vh.isRemote;Vh.listenerCount;Vh.once;Vh.parseUri;Vh.pick;Vh.rev;Vh.scopeEval;Vh.toPromise;Vh.upsert;Vh.uuid;var kU,Eu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Ll=kU={};try{var rr="function"==typeof setTimeout?setTimeout:bE}catch(b){rr=bE}try{var sr="function"==typeof clearTimeout?clearTimeout:cE}catch(b){sr=cE}!0;var Is,Eq=[],Fu=!1,Gz=-1;Ll.nextTick=
function(b){var c=Array(arguments.length-1);if(1<arguments.length)for(var g=1;g<arguments.length;g++)c[g-1]=arguments[g];Eq.push(new NM(b,c));1!==Eq.length||Fu||LM(MM)};NM.prototype.run=function(){(this||Eu).fun.apply(null,(this||Eu).array)};Ll.title="browser";Ll.browser=!0;Ll.env={};Ll.argv=[];Ll.version="";Ll.versions={};Ll.on=Fq;Ll.addListener=Fq;Ll.once=Fq;Ll.off=Fq;Ll.removeListener=Fq;Ll.removeAllListeners=Fq;Ll.emit=Fq;Ll.prependListener=Fq;Ll.prependOnceListener=Fq;Ll.listeners=function(b){return[]};
Ll.binding=function(b){throw Error("process.binding is not supported");};Ll.cwd=function(){return"/"};Ll.chdir=function(b){throw Error("process.chdir is not supported");};Ll.umask=function(){return 0};var jl=kU;jl.addListener;jl.argv;jl.binding;jl.browser;jl.chdir;jl.cwd;jl.emit;jl.env;jl.listeners;jl.nextTick;jl.off;jl.on;jl.once;jl.prependListener;jl.prependOnceListener;jl.removeAllListeners;jl.removeListener;jl.title;jl.umask;jl.version;jl.versions;var Q4="function"==typeof Symbol&&"symbol"==ad(Symbol.toStringTag),
QH=Object.prototype.toString,eB=function(b){return!(Q4&&b&&"object"==ad(b)&&Symbol.toStringTag in b)&&"[object Arguments]"===QH.call(b)},lU=function(b){return!!eB(b)||null!==b&&"object"==ad(b)&&"number"==typeof b.length&&0<=b.length&&"[object Array]"!==QH.call(b)&&"[object Function]"===QH.call(b.callee)},R4=function(){return eB(arguments)}();eB.isLegacyArguments=lU;var S4=R4?eB:lU,T4=Object.prototype.toString,U4=Function.prototype.toString,V4=/^\s*(?:function)?\*/,mU="function"==typeof Symbol&&"symbol"==
ad(Symbol.toStringTag),nU=Object.getPrototypeOf;a:if(mU){try{var fB=Function("return function*() {}")();break a}catch(b){}fB=void 0}else fB=!1;var W4=fB?nU(fB):{},X4="function"==typeof Object.create?function(b,c){c&&(b.super_=c,b.prototype=Object.create(c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}))}:function(b,c){if(c){b.super_=c;var g=function(){};g.prototype=c.prototype;b.prototype=new g;b.prototype.constructor=b}},oU=function(b){return b&&"object"==ad(b)&&"function"==
typeof b.copy&&"function"==typeof b.fill&&"function"==typeof b.readUInt8},bk={},eZ=oU,gN="undefined"!=typeof BigInt,eE="undefined"!=typeof Symbol,Nn=eE&&void 0!==Symbol.toStringTag,wn="undefined"!=typeof Uint8Array,Y4="undefined"!=typeof ArrayBuffer;if(wn&&Nn)var Z4=Object.getPrototypeOf(Uint8Array.prototype),no=Js(Object.getOwnPropertyDescriptor(Z4,Symbol.toStringTag).get);var xl=Js(Object.prototype.toString),fZ=Js(Number.prototype.valueOf),gZ=Js(String.prototype.valueOf),hZ=Js(Boolean.prototype.valueOf);
if(gN)var iZ=Js(BigInt.prototype.valueOf);if(eE)var jZ=Js(Symbol.prototype.valueOf);bk.isArgumentsObject=S4;bk.isGeneratorFunction=function(b){return"function"==typeof b&&(!!V4.test(U4.call(b))||(mU?nU(b)===W4:"[object GeneratorFunction]"===T4.call(b)))};bk.isPromise=function(b){return"undefined"!=typeof Promise&&b instanceof Promise||null!==b&&"object"==ad(b)&&"function"==typeof b.then&&"function"==typeof b["catch"]};bk.isArrayBufferView=function(b){return Y4&&ArrayBuffer.isView?ArrayBuffer.isView(b):
OM(b)||aN(b)};bk.isTypedArray=OM;bk.isUint8Array=PM;bk.isUint8ClampedArray=QM;bk.isUint16Array=RM;bk.isUint32Array=SM;bk.isInt8Array=TM;bk.isInt16Array=UM;bk.isInt32Array=VM;bk.isFloat32Array=WM;bk.isFloat64Array=XM;bk.isBigInt64Array=YM;bk.isBigUint64Array=ZM;Hz.working="undefined"!=typeof Map&&Hz(new Map);bk.isMap=function(b){return"undefined"!=typeof Map&&(Hz.working?Hz(b):b instanceof Map)};Iz.working="undefined"!=typeof Set&&Iz(new Set);bk.isSet=function(b){return"undefined"!=typeof Set&&(Iz.working?
Iz(b):b instanceof Set)};Jz.working="undefined"!=typeof WeakMap&&Jz(new WeakMap);bk.isWeakMap=function(b){return"undefined"!=typeof WeakMap&&(Jz.working?Jz(b):b instanceof WeakMap)};dE.working="undefined"!=typeof WeakSet&&dE(new WeakSet);bk.isWeakSet=function(b){return dE(b)};Kz.working="undefined"!=typeof ArrayBuffer&&Kz(new ArrayBuffer);bk.isArrayBuffer=$M;Lz.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&Lz(new DataView(new ArrayBuffer(1),0,1));bk.isDataView=aN;Mz.working=
"undefined"!=typeof SharedArrayBuffer&&Mz(new SharedArrayBuffer);bk.isSharedArrayBuffer=bN;bk.isAsyncFunction=function(b){return"[object AsyncFunction]"===xl(b)};bk.isMapIterator=function(b){return"[object Map Iterator]"===xl(b)};bk.isSetIterator=function(b){return"[object Set Iterator]"===xl(b)};bk.isGeneratorObject=function(b){return"[object Generator]"===xl(b)};bk.isWebAssemblyCompiledModule=function(b){return"[object WebAssembly.Module]"===xl(b)};bk.isNumberObject=cN;bk.isStringObject=dN;bk.isBooleanObject=
eN;bk.isBigIntObject=fN;bk.isSymbolObject=hN;bk.isBoxedPrimitive=function(b){return cN(b)||dN(b)||eN(b)||fN(b)||hN(b)};bk.isAnyArrayBuffer=function(b){return wn&&($M(b)||bN(b))};["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(b){Object.defineProperty(bk,b,{enumerable:!1,value:function(){throw Error(b+" is not supported in userland");}})});var by="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Dg={},fq=jl,pU=Object.getOwnPropertyDescriptors||function(b){for(var c=
Object.keys(b),g={},a=0;a<c.length;a++)g[c[a]]=Object.getOwnPropertyDescriptor(b,c[a]);return g},$4=/%[sdj%]/g;Dg.format=function(b){if(!Pz(b)){for(var c=[],g=0;g<arguments.length;g++)c.push(tr(arguments[g]));return c.join(" ")}g=1;var a=arguments,d=a.length;c=String(b).replace($4,function(k){if("%%"===k)return"%";if(g>=d)return k;switch(k){case "%s":return String(a[g++]);case "%d":return Number(a[g++]);case "%j":try{return JSON.stringify(a[g++])}catch(n){return"[Circular]"}default:return k}});for(var f=
a[g];g<d;f=a[++g])null!==f&&Gu(f)?c+=" "+tr(f):c+=" "+f;return c};Dg.deprecate=function(b,c){if(void 0!==fq&&!0===fq.noDeprecation)return b;if(void 0===fq)return function(){return Dg.deprecate(b,c).apply(this||by,arguments)};var g=!1;return function(){if(!g){if(fq.throwDeprecation)throw Error(c);fq.traceDeprecation?console.trace(c):console.error(c);g=!0}return b.apply(this||by,arguments)}};var gB={},qU=/^$/;if(fq.env.NODE_DEBUG){var RH=fq.env.NODE_DEBUG;RH=RH.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,
".*").replace(/,/g,"$|^").toUpperCase();qU=new RegExp("^"+RH+"$","i")}Dg.debuglog=function(b){if(b=b.toUpperCase(),!gB[b])if(qU.test(b)){var c=fq.pid;gB[b]=function(){var g=Dg.format.apply(Dg,arguments);console.error("%s %d: %s",b,c,g)}}else gB[b]=function(){};return gB[b]};Dg.inspect=tr;tr.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};tr.styles={special:"cyan",
number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};Dg.types=bk;Dg.isArray=jN;Dg.isBoolean=fE;Dg.isNull=function(b){return null===b};Dg.isNullOrUndefined=function(b){return null==b};Dg.isNumber=iN;Dg.isString=Pz;Dg.isSymbol=function(b){return"symbol"==ad(b)};Dg.isUndefined=Ks;Dg.isRegExp=Pw;Dg.types.isRegExp=Pw;Dg.isObject=Gu;Dg.isDate=Qz;Dg.types.isDate=Qz;Dg.isError=Ow;Dg.types.isNativeError=Ow;Dg.isFunction=Oz;Dg.isPrimitive=function(b){return null===
b||"boolean"==typeof b||"number"==typeof b||"string"==typeof b||"symbol"==ad(b)||void 0===b};Dg.isBuffer=oU;var nZ="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");Dg.log=function(){console.log("%s - %s",mZ(),Dg.format.apply(Dg,arguments))};Dg.inherits=X4;Dg._extend=function(b,c){if(!c||!Gu(c))return b;for(var g=Object.keys(c),a=g.length;a--;)b[g[a]]=c[g[a]];return b};var tt="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;Dg.promisify=function(b){function c(){for(var g,
a,d=new Promise(function(n,p){g=n;a=p}),f=[],k=0;k<arguments.length;k++)f.push(arguments[k]);f.push(function(n,p){n?a(n):g(p)});try{b.apply(this||by,f)}catch(n){a(n)}return d}if("function"!=typeof b)throw new TypeError('The "original" argument must be of type Function');if(tt&&b[tt]){if("function"!=typeof(c=b[tt]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(c,tt,{value:c,enumerable:!1,writable:!1,configurable:!0}),c}return Object.setPrototypeOf(c,
Object.getPrototypeOf(b)),tt&&Object.defineProperty(c,tt,{value:c,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(c,pU(b))};Dg.promisify.custom=tt;Dg.callbackify=function(b){function c(){for(var g=[],a=0;a<arguments.length;a++)g.push(arguments[a]);var d=g.pop();if("function"!=typeof d)throw new TypeError("The last argument must be of type Function");var f=this||by,k=function(){return d.apply(f,arguments)};b.apply(this||by,g).then(function(n){fq.nextTick(k.bind(null,null,n))},function(n){fq.nextTick(oZ.bind(null,
n,k))})}if("function"!=typeof b)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(c,Object.getPrototypeOf(b)),Object.defineProperties(c,pU(b)),c};Dg._extend;Dg.callbackify;Dg.debuglog;Dg.deprecate;Dg.format;Dg.inherits;Dg.inspect;Dg.isArray;Dg.isBoolean;Dg.isBuffer;Dg.isDate;Dg.isError;Dg.isFunction;Dg.isNull;Dg.isNullOrUndefined;Dg.isNumber;Dg.isObject;Dg.isPrimitive;Dg.isRegExp;Dg.isString;Dg.isSymbol;Dg.isUndefined;Dg.log;Dg.promisify;Dg._extend;
Dg.callbackify;Dg.debuglog;Dg.deprecate;Dg.format;Dg.inherits;Dg.inspect;Dg.isArray;Dg.isBoolean;Dg.isBuffer;Dg.isDate;Dg.isError;Dg.isFunction;Dg.isNull;Dg.isNullOrUndefined;Dg.isNumber;Dg.isObject;Dg.isPrimitive;Dg.isRegExp;Dg.isString;Dg.isSymbol;Dg.isUndefined;Dg.log;Dg.promisify;Dg.types;Dg._extend;Dg.callbackify;Dg.debuglog;Dg.deprecate;Dg.format;Dg.inherits;Dg.inspect;Dg.isArray;Dg.isBoolean;Dg.isBuffer;Dg.isDate;Dg.isError;Dg.isFunction;Dg.isNull;Dg.isNullOrUndefined;Dg.isNumber;Dg.isObject;
Dg.isPrimitive;Dg.isRegExp;Dg.isString;Dg.isSymbol;Dg.isUndefined;Dg.log;var rU=Dg.promisify;Dg.types;Dg.TextEncoder=globalThis.TextEncoder;Dg.TextDecoder=globalThis.TextDecoder;var sU={};sU=function(){for(var b={},c=0;c<arguments.length;c++){var g=arguments[c],a;for(a in g)a5.call(g,a)&&(b[a]=g[a])}return b};var a5=Object.prototype.hasOwnProperty,yv=sU,Gq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,b5={},cy=Pl;Ls.prototype.next=function(b){var c=this||Gq;if("function"!==
typeof b)throw Error("next() requires a callback argument");if(c._ended)return cy.nextTick(b,Error("cannot call next() after end()")),c;if(c._nexting)return cy.nextTick(b,Error("cannot call next() before previous next() has completed")),c;c._nexting=!0;c._next(function(){c._nexting=!1;b.apply(null,arguments)});return c};Ls.prototype._next=function(b){cy.nextTick(b)};Ls.prototype.seek=function(b){if((this||Gq)._ended)throw Error("cannot call seek() after end()");if((this||Gq)._nexting)throw Error("cannot call seek() before next() has completed");
b=(this||Gq).db._serializeKey(b);this._seek(b)};Ls.prototype._seek=function(b){};Ls.prototype.end=function(b){if("function"!==typeof b)throw Error("end() requires a callback argument");if((this||Gq)._ended)return cy.nextTick(b,Error("end() already called on iterator"));(this||Gq)._ended=!0;this._end(b)};Ls.prototype._end=function(b){cy.nextTick(b)};var tU=b5=Ls,dm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,c5={};Lp.prototype._checkWritten=function(){if((this||
dm)._written)throw Error("write() already called on this batch");};Lp.prototype.put=function(b,c){this._checkWritten();var g=(this||dm).db._checkKey(b)||(this||dm).db._checkValue(c);if(g)throw g;b=(this||dm).db._serializeKey(b);c=(this||dm).db._serializeValue(c);this._put(b,c);return this||dm};Lp.prototype._put=function(b,c){(this||dm)._operations.push({type:"put",key:b,value:c})};Lp.prototype.del=function(b){this._checkWritten();var c=(this||dm).db._checkKey(b);if(c)throw c;b=(this||dm).db._serializeKey(b);
this._del(b);return this||dm};Lp.prototype._del=function(b){(this||dm)._operations.push({type:"del",key:b})};Lp.prototype.clear=function(){this._checkWritten();this._clear();return this||dm};Lp.prototype._clear=function(){(this||dm)._operations=[]};Lp.prototype.write=function(b,c){this._checkWritten();"function"===typeof b&&(c=b);if("function"!==typeof c)throw Error("write() requires a callback argument");if("object"!==typeof b||null===b)b={};(this||dm)._written=!0;this._write(b,c)};Lp.prototype._write=
function(b,c){(this||dm).db._batch((this||dm)._operations,b,c)};var d5=c5=Lp,Qw={},kN=!1,Rz={},lN=!1,ut={},uU=!1;const rl=function(){function b(ta){if(2147483647<ta)throw new RangeError('The value "'+ta+'" is invalid for option "size"');ta=new Uint8Array(ta);Object.setPrototypeOf(ta,c.prototype);return ta}function c(ta,za,W){if("number"===typeof ta){if("string"===typeof za)throw new TypeError('The "string" argument must be of type string. Received type number');return d(ta)}return g(ta,za,W)}function g(ta,
za,W){if("string"===typeof ta){var ea=za;if("string"!==typeof ea||""===ea)ea="utf8";if(!c.isEncoding(ea))throw new TypeError("Unknown encoding: "+ea);za=q(ta,ea)|0;W=b(za);ta=W.write(ta,ea);ta!==za&&(W=W.slice(0,ta));return ta=W}if(ArrayBuffer.isView(ta))return Ac(ta,Uint8Array)?(ta=new Uint8Array(ta),ta=k(ta.buffer,ta.byteOffset,ta.byteLength)):ta=f(ta),ta;if(null==ta)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof ta);if(Ac(ta,ArrayBuffer)||ta&&Ac(ta.buffer,ArrayBuffer)||"undefined"!==typeof SharedArrayBuffer&&(Ac(ta,SharedArrayBuffer)||ta&&Ac(ta.buffer,SharedArrayBuffer)))return k(ta,za,W);if("number"===typeof ta)throw new TypeError('The "value" argument must not be of type number. Received type number');ea=ta.valueOf&&ta.valueOf();if(null!=ea&&ea!==ta)return c.from(ea,za,W);if(ea=n(ta))return ea;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof ta[Symbol.toPrimitive])return c.from(ta[Symbol.toPrimitive]("string"),
za,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ta);}function a(ta){if("number"!==typeof ta)throw new TypeError('"size" argument must be of type number');if(0>ta)throw new RangeError('The value "'+ta+'" is invalid for option "size"');}function d(ta){a(ta);return b(0>ta?0:p(ta)|0)}function f(ta){const za=0>ta.length?0:p(ta.length)|0,W=b(za);for(let ea=0;ea<za;ea+=1)W[ea]=ta[ea]&255;return W}function k(ta,
za,W){if(0>za||ta.byteLength<za)throw new RangeError('"offset" is outside of buffer bounds');if(ta.byteLength<za+(W||0))throw new RangeError('"length" is outside of buffer bounds');ta=void 0===za&&void 0===W?new Uint8Array(ta):void 0===W?new Uint8Array(ta,za):new Uint8Array(ta,za,W);Object.setPrototypeOf(ta,c.prototype);return ta}function n(ta){if(c.isBuffer(ta)){var za=p(ta.length)|0;const W=b(za);if(0===W.length)return W;ta.copy(W,0,0,za);return W}if(void 0!==ta.length)return(za="number"!==typeof ta.length)||
(za=ta.length,za=za!==za),za?b(0):f(ta);if("Buffer"===ta.type&&Array.isArray(ta.data))return f(ta.data)}function p(ta){if(2147483647<=ta)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return ta|0}function q(ta,za){if(c.isBuffer(ta))return ta.length;if(ArrayBuffer.isView(ta)||Ac(ta,ArrayBuffer))return ta.byteLength;if("string"!==typeof ta)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof ta);const W=ta.length,ea=2<arguments.length&&!0===arguments[2];if(!ea&&0===W)return 0;let Kb=!1;for(;;)switch(za){case "ascii":case "latin1":case "binary":return W;case "utf8":case "utf-8":return rc(ta).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*W;case "hex":return W>>>1;case "base64":return La.toByteArray(xa(ta)).length;default:if(Kb)return ea?-1:rc(ta).length;za=(""+za).toLowerCase();Kb=!0}}function r(ta,za,W){let ea=!1;if(void 0===za||0>za)za=0;if(za>this.length)return"";
if(void 0===W||W>this.length)W=this.length;if(0>=W)return"";W>>>=0;za>>>=0;if(W<=za)return"";for(ta||(ta="utf8");;)switch(ta){case "hex":ta=za;za=this.length;if(!ta||0>ta)ta=0;if(!W||0>W||W>za)W=za;for(za="";ta<W;++ta)za+=me[this[ta]];return W=za;case "utf8":case "utf-8":return D(this,za,W);case "ascii":ta=za;za="";for(W=Math.min(this.length,W);ta<W;++ta)za+=String.fromCharCode(this[ta]&127);return W=za;case "latin1":case "binary":ta=za;za="";for(W=Math.min(this.length,W);ta<W;++ta)za+=String.fromCharCode(this[ta]);
return W=za;case "base64":return ta=za,W=0===ta&&W===this.length?La.fromByteArray(this):La.fromByteArray(this.slice(ta,W)),W;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":W=this.slice(za,W);ta="";for(za=0;za<W.length-1;za+=2)ta+=String.fromCharCode(W[za]+256*W[za+1]);return W=ta;default:if(ea)throw new TypeError("Unknown encoding: "+ta);ta=(ta+"").toLowerCase();ea=!0}}function u(ta,za,W){const ea=ta[za];ta[za]=ta[W];ta[W]=ea}function x(ta,za,W,ea,Kb){if(0===ta.length)return-1;"string"===
typeof W?(ea=W,W=0):2147483647<W?W=2147483647:-2147483648>W&&(W=-2147483648);W=+W;W!==W&&(W=Kb?0:ta.length-1);0>W&&(W=ta.length+W);if(W>=ta.length){if(Kb)return-1;W=ta.length-1}else if(0>W)if(Kb)W=0;else return-1;"string"===typeof za&&(za=c.from(za,ea));if(c.isBuffer(za))return 0===za.length?-1:y(ta,za,W,ea,Kb);if("number"===typeof za)return za&=255,"function"===typeof Uint8Array.prototype.indexOf?Kb?Uint8Array.prototype.indexOf.call(ta,za,W):Uint8Array.prototype.lastIndexOf.call(ta,za,W):y(ta,[za],
W,ea,Kb);throw new TypeError("val must be string, number or Buffer");}function y(ta,za,W,ea,Kb){function V(Td,nf){return 1===Oa?Td[nf]:Td.readUInt16BE(nf*Oa)}let Oa=1;var U=ta.length;let fd=za.length;if(void 0!==ea&&(ea=String(ea).toLowerCase(),"ucs2"===ea||"ucs-2"===ea||"utf16le"===ea||"utf-16le"===ea)){if(2>ta.length||2>za.length)return-1;Oa=2;U/=2;fd/=2;W/=2}if(Kb)for(ea=-1;W<U;W++)if(V(ta,W)===V(za,-1===ea?0:W-ea)){if(-1===ea&&(ea=W),W-ea+1===fd)return ea*Oa}else-1!==ea&&(W-=W-ea),ea=-1;else for(W+
fd>U&&(W=U-fd);0<=W;W--){U=!0;for(ea=0;ea<fd;ea++)if(V(ta,W+ea)!==V(za,ea)){U=!1;break}if(U)return W}return-1}function D(ta,za,W){W=Math.min(ta.length,W);for(var ea=[];za<W;){var Kb=ta[za];let V=null,Oa=239<Kb?4:223<Kb?3:191<Kb?2:1;if(za+Oa<=W){let U,fd,Td;switch(Oa){case 1:128>Kb&&(V=Kb);break;case 2:U=ta[za+1];128===(U&192)&&(Kb=(Kb&31)<<6|U&63,127<Kb&&(V=Kb));break;case 3:U=ta[za+1];fd=ta[za+2];128===(U&192)&&128===(fd&192)&&(Kb=(Kb&15)<<12|(U&63)<<6|fd&63,2047<Kb&&(55296>Kb||57343<Kb)&&(V=Kb));
break;case 4:U=ta[za+1],fd=ta[za+2],Td=ta[za+3],128===(U&192)&&128===(fd&192)&&128===(Td&192)&&(Kb=(Kb&15)<<18|(U&63)<<12|(fd&63)<<6|Td&63,65535<Kb&&1114112>Kb&&(V=Kb))}}null===V?(V=65533,Oa=1):65535<V&&(V-=65536,ea.push(V>>>10&1023|55296),V=56320|V&1023);ea.push(V);za+=Oa}za=ea.length;if(4096>=za)ea=String.fromCharCode.apply(String,ea);else{ta="";for(W=0;W<za;)ta+=String.fromCharCode.apply(String,ea.slice(W,W+=4096));ea=ta}return ea}function H(ta,za,W){if(0!==ta%1||0>ta)throw new RangeError("offset is not uint");
if(ta+za>W)throw new RangeError("Trying to access beyond buffer length");}function I(ta,za,W,ea,Kb,V){if(!c.isBuffer(ta))throw new TypeError('"buffer" argument must be a Buffer instance');if(za>Kb||za<V)throw new RangeError('"value" argument is out of bounds');if(W+ea>ta.length)throw new RangeError("Index out of range");}function N(ta,za,W,ea,Kb){mc(za,ea,Kb,ta,W,7);ea=Number(za&BigInt(4294967295));ta[W++]=ea;ea>>=8;ta[W++]=ea;ea>>=8;ta[W++]=ea;ta[W++]=ea>>8;za=Number(za>>BigInt(32)&BigInt(4294967295));
ta[W++]=za;za>>=8;ta[W++]=za;za>>=8;ta[W++]=za;ta[W++]=za>>8;return W}function J(ta,za,W,ea,Kb){mc(za,ea,Kb,ta,W,7);ea=Number(za&BigInt(4294967295));ta[W+7]=ea;ea>>=8;ta[W+6]=ea;ea>>=8;ta[W+5]=ea;ta[W+4]=ea>>8;za=Number(za>>BigInt(32)&BigInt(4294967295));ta[W+3]=za;za>>=8;ta[W+2]=za;za>>=8;ta[W+1]=za;ta[W]=za>>8;return W+8}function sa(ta,za,W,ea,Kb,V){if(W+ea>ta.length)throw new RangeError("Index out of range");if(0>W)throw new RangeError("Index out of range");}function ja(ta,za,W,ea,Kb){za=+za;W>>>=
0;Kb||sa(ta,za,W,4);Fd.write(ta,za,W,ea,23,4);return W+4}function Ha(ta,za,W,ea,Kb){za=+za;W>>>=0;Kb||sa(ta,za,W,8);Fd.write(ta,za,W,ea,52,8);return W+8}function Qa(ta,za,W){Va[ta]=class extends W{constructor(){super();Object.defineProperty(this,"message",{value:za.apply(this,arguments),writable:!0,configurable:!0});this.name=`${this.name} [${ta}]`;this.stack;delete this.name}get code(){return ta}set code(ea){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ea,writable:!0})}toString(){return`${this.name} [${ta}]: ${this.message}`}}}
function ec(ta){let za="",W=ta.length;const ea="-"===ta[0]?1:0;for(;W>=ea+4;W-=3)za=`_${ta.slice(W-3,W)}${za}`;return`${ta.slice(0,W)}${za}`}function mc(ta,za,W,ea,Kb,V){if(ta>W||ta<za)throw ea="bigint"===typeof za?"n":"",new Va.ERR_OUT_OF_RANGE("value",3<V?0===za||za===BigInt(0)?`>= 0${ea} and < 2${ea} ** ${8*(V+1)}${ea}`:`>= -(2${ea} ** ${8*(V+1)-1}${ea}) and < 2 ** `+`${8*(V+1)-1}${ea}`:`>= ${za}${ea} and <= ${W}${ea}`,ta);hc(Kb,"offset");void 0!==ea[Kb]&&void 0!==ea[Kb+V]||Ua(Kb,ea.length-(V+
1))}function hc(ta,za){if("number"!==typeof ta)throw new Va.ERR_INVALID_ARG_TYPE(za,"number",ta);}function Ua(ta,za,W){if(Math.floor(ta)!==ta)throw hc(ta,W),new Va.ERR_OUT_OF_RANGE(W||"offset","an integer",ta);if(0>za)throw new Va.ERR_BUFFER_OUT_OF_BOUNDS;throw new Va.ERR_OUT_OF_RANGE(W||"offset",`>= ${W?1:0} and <= ${za}`,ta);}function xa(ta){ta=ta.split("=")[0];ta=ta.trim().replace(yd,"");if(2>ta.length)return"";for(;0!==ta.length%4;)ta+="=";return ta}function rc(ta,za){za=za||Infinity;let W;const ea=
ta.length;let Kb=null;const V=[];for(let Oa=0;Oa<ea;++Oa){W=ta.charCodeAt(Oa);if(55295<W&&57344>W){if(!Kb){if(56319<W){-1<(za-=3)&&V.push(239,191,189);continue}else if(Oa+1===ea){-1<(za-=3)&&V.push(239,191,189);continue}Kb=W;continue}if(56320>W){-1<(za-=3)&&V.push(239,191,189);Kb=W;continue}W=(Kb-55296<<10|W-56320)+65536}else Kb&&-1<(za-=3)&&V.push(239,191,189);Kb=null;if(128>W){if(0>--za)break;V.push(W)}else if(2048>W){if(0>(za-=2))break;V.push(W>>6|192,W&63|128)}else if(65536>W){if(0>(za-=3))break;
V.push(W>>12|224,W>>6&63|128,W&63|128)}else if(1114112>W){if(0>(za-=4))break;V.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw Error("Invalid code point");}return V}function Lb(ta,za,W,ea){let Kb;for(Kb=0;Kb<ea&&!(Kb+W>=za.length||Kb>=ta.length);++Kb)za[Kb+W]=ta[Kb];return Kb}function Ac(ta,za){return ta instanceof za||null!=ta&&null!=ta.constructor&&null!=ta.constructor.name&&ta.constructor.name===za.name}function Xb(ta){return"undefined"===typeof BigInt?qd:ta}function qd(){throw Error("BigInt not supported");
}if(uU)return ut;uU=!0;const La=pZ(),Fd=qZ(),na="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;ut.Buffer=c;ut.SlowBuffer=function(ta){+ta!=ta&&(ta=0);return c.alloc(+ta)};ut.INSPECT_MAX_BYTES=50;ut.kMaxLength=2147483647;c.TYPED_ARRAY_SUPPORT=function(){try{const ta=new Uint8Array(1),za={foo:function(){return 42}};Object.setPrototypeOf(za,Uint8Array.prototype);Object.setPrototypeOf(ta,za);return 42===ta.foo()}catch(ta){return!1}}();c.TYPED_ARRAY_SUPPORT||
"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}});Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});c.poolSize=8192;c.from=function(ta,za,W){return g(ta,
za,W)};Object.setPrototypeOf(c.prototype,Uint8Array.prototype);Object.setPrototypeOf(c,Uint8Array);c.alloc=function(ta,za,W){a(ta);ta=0>=ta?b(ta):void 0!==za?"string"===typeof W?b(ta).fill(za,W):b(ta).fill(za):b(ta);return ta};c.allocUnsafe=function(ta){return d(ta)};c.allocUnsafeSlow=function(ta){return d(ta)};c.isBuffer=function(ta){return null!=ta&&!0===ta._isBuffer&&ta!==c.prototype};c.compare=function(ta,za){Ac(ta,Uint8Array)&&(ta=c.from(ta,ta.offset,ta.byteLength));Ac(za,Uint8Array)&&(za=c.from(za,
za.offset,za.byteLength));if(!c.isBuffer(ta)||!c.isBuffer(za))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ta===za)return 0;let W=ta.length,ea=za.length;for(let Kb=0,V=Math.min(W,ea);Kb<V;++Kb)if(ta[Kb]!==za[Kb]){W=ta[Kb];ea=za[Kb];break}return W<ea?-1:ea<W?1:0};c.isEncoding=function(ta){switch(String(ta).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};c.concat=function(ta,za){if(!Array.isArray(ta))throw new TypeError('"list" argument must be an Array of Buffers');if(0===ta.length)return c.alloc(0);let W;if(void 0===za)for(W=za=0;W<ta.length;++W)za+=ta[W].length;za=c.allocUnsafe(za);let ea=0;for(W=0;W<ta.length;++W){let Kb=ta[W];if(Ac(Kb,Uint8Array))ea+Kb.length>za.length?(c.isBuffer(Kb)||(Kb=c.from(Kb)),Kb.copy(za,ea)):Uint8Array.prototype.set.call(za,Kb,ea);else if(c.isBuffer(Kb))Kb.copy(za,ea);else throw new TypeError('"list" argument must be an Array of Buffers');
ea+=Kb.length}return za};c.byteLength=q;c.prototype._isBuffer=!0;c.prototype.swap16=function(){const ta=this.length;if(0!==ta%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let za=0;za<ta;za+=2)u(this,za,za+1);return this};c.prototype.swap32=function(){const ta=this.length;if(0!==ta%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let za=0;za<ta;za+=4)u(this,za,za+3),u(this,za+1,za+2);return this};c.prototype.swap64=function(){const ta=this.length;if(0!==
ta%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let za=0;za<ta;za+=8)u(this,za,za+7),u(this,za+1,za+6),u(this,za+2,za+5),u(this,za+3,za+4);return this};c.prototype.toString=function(){const ta=this.length;return 0===ta?"":0===arguments.length?D(this,0,ta):r.apply(this,arguments)};c.prototype.toLocaleString=c.prototype.toString;c.prototype.equals=function(ta){if(!c.isBuffer(ta))throw new TypeError("Argument must be a Buffer");return this===ta?!0:0===c.compare(this,ta)};c.prototype.inspect=
function(){let ta;const za=ut.INSPECT_MAX_BYTES;ta=this.toString("hex",0,za).replace(/(.{2})/g,"$1 ").trim();this.length>za&&(ta+=" ... ");return"<Buffer "+ta+">"};na&&(c.prototype[na]=c.prototype.inspect);c.prototype.compare=function(ta,za,W,ea,Kb){Ac(ta,Uint8Array)&&(ta=c.from(ta,ta.offset,ta.byteLength));if(!c.isBuffer(ta))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ta);void 0===za&&(za=0);void 0===W&&(W=ta?ta.length:0);void 0===ea&&
(ea=0);void 0===Kb&&(Kb=this.length);if(0>za||W>ta.length||0>ea||Kb>this.length)throw new RangeError("out of range index");if(ea>=Kb&&za>=W)return 0;if(ea>=Kb)return-1;if(za>=W)return 1;za>>>=0;W>>>=0;ea>>>=0;Kb>>>=0;if(this===ta)return 0;let V=Kb-ea,Oa=W-za;const U=Math.min(V,Oa);ea=this.slice(ea,Kb);ta=ta.slice(za,W);for(za=0;za<U;++za)if(ea[za]!==ta[za]){V=ea[za];Oa=ta[za];break}return V<Oa?-1:Oa<V?1:0};c.prototype.includes=function(ta,za,W){return-1!==this.indexOf(ta,za,W)};c.prototype.indexOf=
function(ta,za,W){return x(this,ta,za,W,!0)};c.prototype.lastIndexOf=function(ta,za,W){return x(this,ta,za,W,!1)};c.prototype.write=function(ta,za,W,ea){if(void 0===za)ea="utf8",W=this.length,za=0;else if(void 0===W&&"string"===typeof za)ea=za,W=this.length,za=0;else if(isFinite(za))za>>>=0,isFinite(W)?(W>>>=0,void 0===ea&&(ea="utf8")):(ea=W,W=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Kb=this.length-za;if(void 0===W||W>Kb)W=Kb;if(0<ta.length&&
(0>W||0>za)||za>this.length)throw new RangeError("Attempt to write outside buffer bounds");ea||(ea="utf8");for(Kb=!1;;)switch(ea){case "hex":a:{za=Number(za)||0;ea=this.length-za;W?(W=Number(W),W>ea&&(W=ea)):W=ea;ea=ta.length;W>ea/2&&(W=ea/2);for(ea=0;ea<W;++ea){Kb=parseInt(ta.substr(2*ea,2),16);if(Kb!==Kb){ta=ea;break a}this[za+ea]=Kb}ta=ea}return ta;case "utf8":case "utf-8":return Lb(rc(ta,this.length-za),this,za,W);case "ascii":case "latin1":case "binary":ea=[];for(Kb=0;Kb<ta.length;++Kb)ea.push(ta.charCodeAt(Kb)&
255);ta=ea;return Lb(ta,this,za,W);case "base64":return Lb(La.toByteArray(xa(ta)),this,za,W);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":{var V=void 0;ea=this.length-za;const Oa=[];for(let U=0;U<ta.length&&!(0>(ea-=2));++U)V=ta.charCodeAt(U),Kb=V>>8,V%=256,Oa.push(V),Oa.push(Kb);ta=Oa}return Lb(ta,this,za,W);default:if(Kb)throw new TypeError("Unknown encoding: "+ea);ea=(""+ea).toLowerCase();Kb=!0}};c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||
this,0)}};c.prototype.slice=function(ta,za){const W=this.length;ta=~~ta;za=void 0===za?W:~~za;0>ta?(ta+=W,0>ta&&(ta=0)):ta>W&&(ta=W);0>za?(za+=W,0>za&&(za=0)):za>W&&(za=W);za<ta&&(za=ta);ta=this.subarray(ta,za);Object.setPrototypeOf(ta,c.prototype);return ta};c.prototype.readUintLE=c.prototype.readUIntLE=function(ta,za,W){ta>>>=0;za>>>=0;W||H(ta,za,this.length);W=this[ta];let ea=1,Kb=0;for(;++Kb<za&&(ea*=256);)W+=this[ta+Kb]*ea;return W};c.prototype.readUintBE=c.prototype.readUIntBE=function(ta,za,
W){ta>>>=0;za>>>=0;W||H(ta,za,this.length);W=this[ta+--za];let ea=1;for(;0<za&&(ea*=256);)W+=this[ta+--za]*ea;return W};c.prototype.readUint8=c.prototype.readUInt8=function(ta,za){ta>>>=0;za||H(ta,1,this.length);return this[ta]};c.prototype.readUint16LE=c.prototype.readUInt16LE=function(ta,za){ta>>>=0;za||H(ta,2,this.length);return this[ta]|this[ta+1]<<8};c.prototype.readUint16BE=c.prototype.readUInt16BE=function(ta,za){ta>>>=0;za||H(ta,2,this.length);return this[ta]<<8|this[ta+1]};c.prototype.readUint32LE=
c.prototype.readUInt32LE=function(ta,za){ta>>>=0;za||H(ta,4,this.length);return(this[ta]|this[ta+1]<<8|this[ta+2]<<16)+16777216*this[ta+3]};c.prototype.readUint32BE=c.prototype.readUInt32BE=function(ta,za){ta>>>=0;za||H(ta,4,this.length);return 16777216*this[ta]+(this[ta+1]<<16|this[ta+2]<<8|this[ta+3])};c.prototype.readBigUInt64LE=Xb(function(ta){ta>>>=0;hc(ta,"offset");var za=this[ta];const W=this[ta+7];void 0!==za&&void 0!==W||Ua(ta,this.length-8);za=za+256*this[++ta]+65536*this[++ta]+this[++ta]*
2**24;ta=this[++ta]+256*this[++ta]+65536*this[++ta]+W*2**24;return BigInt(za)+(BigInt(ta)<<BigInt(32))});c.prototype.readBigUInt64BE=Xb(function(ta){ta>>>=0;hc(ta,"offset");var za=this[ta];const W=this[ta+7];void 0!==za&&void 0!==W||Ua(ta,this.length-8);za=za*2**24+65536*this[++ta]+256*this[++ta]+this[++ta];ta=this[++ta]*2**24+65536*this[++ta]+256*this[++ta]+W;return(BigInt(za)<<BigInt(32))+BigInt(ta)});c.prototype.readIntLE=function(ta,za,W){ta>>>=0;za>>>=0;W||H(ta,za,this.length);W=this[ta];let ea=
1,Kb=0;for(;++Kb<za&&(ea*=256);)W+=this[ta+Kb]*ea;W>=128*ea&&(W-=Math.pow(2,8*za));return W};c.prototype.readIntBE=function(ta,za,W){ta>>>=0;za>>>=0;W||H(ta,za,this.length);W=za;let ea=1,Kb=this[ta+--W];for(;0<W&&(ea*=256);)Kb+=this[ta+--W]*ea;Kb>=128*ea&&(Kb-=Math.pow(2,8*za));return Kb};c.prototype.readInt8=function(ta,za){ta>>>=0;za||H(ta,1,this.length);return this[ta]&128?-1*(255-this[ta]+1):this[ta]};c.prototype.readInt16LE=function(ta,za){ta>>>=0;za||H(ta,2,this.length);ta=this[ta]|this[ta+
1]<<8;return ta&32768?ta|4294901760:ta};c.prototype.readInt16BE=function(ta,za){ta>>>=0;za||H(ta,2,this.length);ta=this[ta+1]|this[ta]<<8;return ta&32768?ta|4294901760:ta};c.prototype.readInt32LE=function(ta,za){ta>>>=0;za||H(ta,4,this.length);return this[ta]|this[ta+1]<<8|this[ta+2]<<16|this[ta+3]<<24};c.prototype.readInt32BE=function(ta,za){ta>>>=0;za||H(ta,4,this.length);return this[ta]<<24|this[ta+1]<<16|this[ta+2]<<8|this[ta+3]};c.prototype.readBigInt64LE=Xb(function(ta){ta>>>=0;hc(ta,"offset");
const za=this[ta],W=this[ta+7];void 0!==za&&void 0!==W||Ua(ta,this.length-8);return(BigInt(this[ta+4]+256*this[ta+5]+65536*this[ta+6]+(W<<24))<<BigInt(32))+BigInt(za+256*this[++ta]+65536*this[++ta]+this[++ta]*2**24)});c.prototype.readBigInt64BE=Xb(function(ta){ta>>>=0;hc(ta,"offset");var za=this[ta];const W=this[ta+7];void 0!==za&&void 0!==W||Ua(ta,this.length-8);za=(za<<24)+65536*this[++ta]+256*this[++ta]+this[++ta];return(BigInt(za)<<BigInt(32))+BigInt(this[++ta]*2**24+65536*this[++ta]+256*this[++ta]+
W)});c.prototype.readFloatLE=function(ta,za){ta>>>=0;za||H(ta,4,this.length);return Fd.read(this,ta,!0,23,4)};c.prototype.readFloatBE=function(ta,za){ta>>>=0;za||H(ta,4,this.length);return Fd.read(this,ta,!1,23,4)};c.prototype.readDoubleLE=function(ta,za){ta>>>=0;za||H(ta,8,this.length);return Fd.read(this,ta,!0,52,8)};c.prototype.readDoubleBE=function(ta,za){ta>>>=0;za||H(ta,8,this.length);return Fd.read(this,ta,!1,52,8)};c.prototype.writeUintLE=c.prototype.writeUIntLE=function(ta,za,W,ea){ta=+ta;
za>>>=0;W>>>=0;ea||I(this,ta,za,W,Math.pow(2,8*W)-1,0);ea=1;let Kb=0;for(this[za]=ta&255;++Kb<W&&(ea*=256);)this[za+Kb]=ta/ea&255;return za+W};c.prototype.writeUintBE=c.prototype.writeUIntBE=function(ta,za,W,ea){ta=+ta;za>>>=0;W>>>=0;ea||I(this,ta,za,W,Math.pow(2,8*W)-1,0);ea=W-1;let Kb=1;for(this[za+ea]=ta&255;0<=--ea&&(Kb*=256);)this[za+ea]=ta/Kb&255;return za+W};c.prototype.writeUint8=c.prototype.writeUInt8=function(ta,za,W){ta=+ta;za>>>=0;W||I(this,ta,za,1,255,0);this[za]=ta&255;return za+1};
c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(ta,za,W){ta=+ta;za>>>=0;W||I(this,ta,za,2,65535,0);this[za]=ta&255;this[za+1]=ta>>>8;return za+2};c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(ta,za,W){ta=+ta;za>>>=0;W||I(this,ta,za,2,65535,0);this[za]=ta>>>8;this[za+1]=ta&255;return za+2};c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(ta,za,W){ta=+ta;za>>>=0;W||I(this,ta,za,4,4294967295,0);this[za+3]=ta>>>24;this[za+2]=ta>>>16;this[za+1]=ta>>>8;this[za]=ta&
255;return za+4};c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(ta,za,W){ta=+ta;za>>>=0;W||I(this,ta,za,4,4294967295,0);this[za]=ta>>>24;this[za+1]=ta>>>16;this[za+2]=ta>>>8;this[za+3]=ta&255;return za+4};c.prototype.writeBigUInt64LE=Xb(function(ta,za=0){return N(this,ta,za,BigInt(0),BigInt("0xffffffffffffffff"))});c.prototype.writeBigUInt64BE=Xb(function(ta,za=0){return J(this,ta,za,BigInt(0),BigInt("0xffffffffffffffff"))});c.prototype.writeIntLE=function(ta,za,W,ea){ta=+ta;za>>>=0;
ea||(ea=Math.pow(2,8*W-1),I(this,ta,za,W,ea-1,-ea));ea=0;let Kb=1,V=0;for(this[za]=ta&255;++ea<W&&(Kb*=256);)0>ta&&0===V&&0!==this[za+ea-1]&&(V=1),this[za+ea]=(ta/Kb>>0)-V&255;return za+W};c.prototype.writeIntBE=function(ta,za,W,ea){ta=+ta;za>>>=0;ea||(ea=Math.pow(2,8*W-1),I(this,ta,za,W,ea-1,-ea));ea=W-1;let Kb=1,V=0;for(this[za+ea]=ta&255;0<=--ea&&(Kb*=256);)0>ta&&0===V&&0!==this[za+ea+1]&&(V=1),this[za+ea]=(ta/Kb>>0)-V&255;return za+W};c.prototype.writeInt8=function(ta,za,W){ta=+ta;za>>>=0;W||
I(this,ta,za,1,127,-128);0>ta&&(ta=255+ta+1);this[za]=ta&255;return za+1};c.prototype.writeInt16LE=function(ta,za,W){ta=+ta;za>>>=0;W||I(this,ta,za,2,32767,-32768);this[za]=ta&255;this[za+1]=ta>>>8;return za+2};c.prototype.writeInt16BE=function(ta,za,W){ta=+ta;za>>>=0;W||I(this,ta,za,2,32767,-32768);this[za]=ta>>>8;this[za+1]=ta&255;return za+2};c.prototype.writeInt32LE=function(ta,za,W){ta=+ta;za>>>=0;W||I(this,ta,za,4,2147483647,-2147483648);this[za]=ta&255;this[za+1]=ta>>>8;this[za+2]=ta>>>16;
this[za+3]=ta>>>24;return za+4};c.prototype.writeInt32BE=function(ta,za,W){ta=+ta;za>>>=0;W||I(this,ta,za,4,2147483647,-2147483648);0>ta&&(ta=4294967295+ta+1);this[za]=ta>>>24;this[za+1]=ta>>>16;this[za+2]=ta>>>8;this[za+3]=ta&255;return za+4};c.prototype.writeBigInt64LE=Xb(function(ta,za=0){return N(this,ta,za,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});c.prototype.writeBigInt64BE=Xb(function(ta,za=0){return J(this,ta,za,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});
c.prototype.writeFloatLE=function(ta,za,W){return ja(this,ta,za,!0,W)};c.prototype.writeFloatBE=function(ta,za,W){return ja(this,ta,za,!1,W)};c.prototype.writeDoubleLE=function(ta,za,W){return Ha(this,ta,za,!0,W)};c.prototype.writeDoubleBE=function(ta,za,W){return Ha(this,ta,za,!1,W)};c.prototype.copy=function(ta,za,W,ea){if(!c.isBuffer(ta))throw new TypeError("argument should be a Buffer");W||(W=0);ea||0===ea||(ea=this.length);za>=ta.length&&(za=ta.length);za||(za=0);0<ea&&ea<W&&(ea=W);if(ea===W||
0===ta.length||0===this.length)return 0;if(0>za)throw new RangeError("targetStart out of bounds");if(0>W||W>=this.length)throw new RangeError("Index out of range");if(0>ea)throw new RangeError("sourceEnd out of bounds");ea>this.length&&(ea=this.length);ta.length-za<ea-W&&(ea=ta.length-za+W);const Kb=ea-W;this===ta&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(za,W,ea):Uint8Array.prototype.set.call(ta,this.subarray(W,ea),za);return Kb};c.prototype.fill=function(ta,za,W,ea){if("string"===
typeof ta){"string"===typeof za?(ea=za,za=0,W=this.length):"string"===typeof W&&(ea=W,W=this.length);if(void 0!==ea&&"string"!==typeof ea)throw new TypeError("encoding must be a string");if("string"===typeof ea&&!c.isEncoding(ea))throw new TypeError("Unknown encoding: "+ea);if(1===ta.length){var Kb=ta.charCodeAt(0);if("utf8"===ea&&128>Kb||"latin1"===ea)ta=Kb}}else"number"===typeof ta?ta&=255:"boolean"===typeof ta&&(ta=Number(ta));if(0>za||this.length<za||this.length<W)throw new RangeError("Out of range index");
if(W<=za)return this;za>>>=0;W=void 0===W?this.length:W>>>0;ta||(ta=0);if("number"===typeof ta)for(ea=za;ea<W;++ea)this[ea]=ta;else{Kb=c.isBuffer(ta)?ta:c.from(ta,ea);const V=Kb.length;if(0===V)throw new TypeError('The value "'+ta+'" is invalid for argument "value"');for(ea=0;ea<W-za;++ea)this[ea+za]=Kb[ea%V]}return this};const Va={};Qa("ERR_BUFFER_OUT_OF_BOUNDS",function(ta){return ta?`${ta} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Qa("ERR_INVALID_ARG_TYPE",
function(ta,za){return`The "${ta}" argument must be of type number. Received type ${typeof za}`},TypeError);Qa("ERR_OUT_OF_RANGE",function(ta,za,W){ta=`The value of "${ta}" is out of range.`;let ea=W;if(Number.isInteger(W)&&Math.abs(W)>2**32)ea=ec(String(W));else if("bigint"===typeof W){ea=String(W);if(W>BigInt(2)**BigInt(32)||W<-(BigInt(2)**BigInt(32)))ea=ec(ea);ea+="n"}return ta+` It must be ${za}. Received ${ea}`},RangeError);const yd=/[^+/0-9A-Za-z-_]/g,me=function(){const ta=Array(256);for(let za=
0;16>za;++za){const W=16*za;for(let ea=0;16>ea;++ea)ta[W+ea]="0123456789abcdef"[za]+"0123456789abcdef"[ea]}return ta}();return ut}();rl.Buffer;rl.SlowBuffer;rl.INSPECT_MAX_BYTES;rl.kMaxLength;var fG=rl.Buffer,vU=Object.freeze({__proto__:null,"default":rl,Buffer:fG,INSPECT_MAX_BYTES:rl.INSPECT_MAX_BYTES,kMaxLength:rl.kMaxLength}),Mp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wU={},e5=rl.Buffer,hn=Pl,f5=Object.prototype.hasOwnProperty,g5="start end gt gte lt lte".split(" ");
Jl.prototype.open=function(b,c){var g=this||Mp,a=(this||Mp).status;"function"===typeof b&&(c=b);if("function"!==typeof c)throw Error("open() requires a callback argument");if("object"!==typeof b||null===b)b={};b.createIfMissing=!1!==b.createIfMissing;b.errorIfExists=!!b.errorIfExists;(this||Mp).status="opening";this._open(b,function(d){if(d)return g.status=a,c(d);g.status="open";c()})};Jl.prototype._open=function(b,c){hn.nextTick(c)};Jl.prototype.close=function(b){var c=this||Mp,g=(this||Mp).status;
if("function"!==typeof b)throw Error("close() requires a callback argument");(this||Mp).status="closing";this._close(function(a){if(a)return c.status=g,b(a);c.status="closed";b()})};Jl.prototype._close=function(b){hn.nextTick(b)};Jl.prototype.get=function(b,c,g){"function"===typeof c&&(g=c);if("function"!==typeof g)throw Error("get() requires a callback argument");var a=this._checkKey(b);if(a)return hn.nextTick(g,a);b=this._serializeKey(b);if("object"!==typeof c||null===c)c={};c.asBuffer=!1!==c.asBuffer;
this._get(b,c,g)};Jl.prototype._get=function(b,c,g){hn.nextTick(function(){g(Error("NotFound"))})};Jl.prototype.put=function(b,c,g,a){"function"===typeof g&&(a=g);if("function"!==typeof a)throw Error("put() requires a callback argument");var d=this._checkKey(b)||this._checkValue(c);if(d)return hn.nextTick(a,d);b=this._serializeKey(b);c=this._serializeValue(c);if("object"!==typeof g||null===g)g={};this._put(b,c,g,a)};Jl.prototype._put=function(b,c,g,a){hn.nextTick(a)};Jl.prototype.del=function(b,c,
g){"function"===typeof c&&(g=c);if("function"!==typeof g)throw Error("del() requires a callback argument");var a=this._checkKey(b);if(a)return hn.nextTick(g,a);b=this._serializeKey(b);if("object"!==typeof c||null===c)c={};this._del(b,c,g)};Jl.prototype._del=function(b,c,g){hn.nextTick(g)};Jl.prototype.batch=function(b,c,g){if(!arguments.length)return this._chainedBatch();"function"===typeof c&&(g=c);"function"===typeof b&&(g=b);if("function"!==typeof g)throw Error("batch(array) requires a callback argument");
if(!Array.isArray(b))return hn.nextTick(g,Error("batch(array) requires an array argument"));if(0===b.length)return hn.nextTick(g);if("object"!==typeof c||null===c)c={};for(var a=Array(b.length),d=0;d<b.length;d++){if("object"!==typeof b[d]||null===b[d])return hn.nextTick(g,Error("batch(array) element must be an object and not `null`"));var f=yv(b[d]);if("put"!==f.type&&"del"!==f.type)return hn.nextTick(g,Error("`type` must be 'put' or 'del'"));var k=this._checkKey(f.key);if(k)return hn.nextTick(g,
k);f.key=this._serializeKey(f.key);if("put"===f.type){if(k=this._checkValue(f.value))return hn.nextTick(g,k);f.value=this._serializeValue(f.value)}a[d]=f}this._batch(a,c,g)};Jl.prototype._batch=function(b,c,g){hn.nextTick(g)};Jl.prototype._setupIteratorOptions=function(b){var c=this||Mp,g={},a;for(a in b)if(f5.call(b,a)){var d=b[a];-1!==g5.indexOf(a)&&(d=c._serializeKey(d));g[a]=d}b=g;b.reverse=!!b.reverse;b.keys=!1!==b.keys;b.values=!1!==b.values;b.limit="limit"in b?b.limit:-1;b.keyAsBuffer=!1!==
b.keyAsBuffer;b.valueAsBuffer=!1!==b.valueAsBuffer;return b};Jl.prototype.iterator=function(b){if("object"!==typeof b||null===b)b={};b=this._setupIteratorOptions(b);return this._iterator(b)};Jl.prototype._iterator=function(b){return new tU(this||Mp)};Jl.prototype._chainedBatch=function(){return new d5(this||Mp)};Jl.prototype._serializeKey=function(b){return b};Jl.prototype._serializeValue=function(b){return b};Jl.prototype._checkKey=function(b){if(null===b||void 0===b)return Error("key cannot be `null` or `undefined`");
if(e5.isBuffer(b)&&0===b.length)return Error("key cannot be an empty Buffer");if(""===b)return Error("key cannot be an empty String");if(Array.isArray(b)&&0===b.length)return Error("key cannot be an empty Array")};Jl.prototype._checkValue=function(b){if(null===b||void 0===b)return Error("value cannot be `null` or `undefined`")};wU=Jl;var h5=wU;var Uo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,xU={},mN=tU;sl(Hu,mN);Hu.prototype.setDb=function(b){var c=(this||Uo)._iterator=
b.iterator((this||Uo)._options);(this||Uo)._operations.forEach(function(g){c[g.method].apply(c,g.args)})};Hu.prototype._operation=function(b,c){if((this||Uo)._iterator)return(this||Uo)._iterator[b].apply((this||Uo)._iterator,c);(this||Uo)._operations.push({method:b,args:c})};["next","end"].forEach(function(b){Hu.prototype["_"+b]=function(){this._operation(b,arguments)}});Hu.prototype.seek=function(){this._operation("seek",arguments)};xU=Hu;var Tm="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,hB={},nN=h5,qN=xU,pN=["put","get","del","batch"];sl(Iu,nN);Iu.prototype._open=function(b,c){var g=this||Tm;(this||Tm)._db.open(b,function(a){if(a)return c(a);g._operations.forEach(function(d){g._db[d.method].apply(g._db,d.args)});g._operations=[];g._iterators.forEach(function(d){d.setDb(g._db)});g._iterators=[];rZ(g);c()})};Iu.prototype._close=function(b){var c=this||Tm;(this||Tm)._db.close(function(g){if(g)return b(g);oN(c);b()})};Iu.prototype._serializeKey=function(b){return b};
Iu.prototype._serializeValue=function(b){return b};hB=Iu;hB.DeferredIterator=qN;var i5=hB;hB.DeferredIterator;var tN={},sN=!1,jE={},uN=!1,lE="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,j5={},DZ=j5=function(b,c){if(kE("noDeprecation"))return b;var g=!1;return function(){if(!g){if(kE("throwDeprecation"))throw Error(c);kE("traceDeprecation")?console.trace(c):console.warn(c);g=!0}return b.apply(this||lE,arguments)}},dy={},iB=rl,Np=iB.Buffer;Np.from&&Np.alloc&&Np.allocUnsafe&&
Np.allocUnsafeSlow?dy=iB:(vN(iB,dy),dy.Buffer=Ms);Ms.prototype=Object.create(Np.prototype);vN(Np,Ms);Ms.from=function(b,c,g){if("number"===typeof b)throw new TypeError("Argument must not be a number");return Np(b,c,g)};Ms.alloc=function(b,c,g){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=Np(b);void 0!==c?"string"===typeof g?b.fill(c,g):b.fill(c):b.fill(0);return b};Ms.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return Np(b)};
Ms.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return iB.SlowBuffer(b)};var k5=dy;dy.Buffer;var rE={},mE=k5.Buffer,wN=mE.isEncoding||function(b){b=""+b;switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};rE.StringDecoder=Rw;Rw.prototype.write=function(b){if(0===b.length)return"";if(this.lastNeed){var c=
this.fillLast(b);if(void 0===c)return"";var g=this.lastNeed;this.lastNeed=0}else g=0;return g<b.length?c?c+this.text(b,g):this.text(b,g):c||""};Rw.prototype.end=function(b){b=b&&b.length?this.write(b):"";return this.lastNeed?b+"\ufffd":b};Rw.prototype.text=function(b,c){var g=AZ(this,b,c);if(!this.lastNeed)return b.toString("utf8",c);this.lastTotal=g;g=b.length-(g-this.lastNeed);b.copy(this.lastChar,0,g);return b.toString("utf8",c,g)};Rw.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length);this.lastNeed-=b.length};var yN={},xN=!1,AN={},zN=!1,DN=Object.freeze({}),CN={},BN=!1,GN={},FN=!1,JN={},IN=!1,pE={},LN=!1,EZ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,qE={},MN=!1,PN={},ON=!1,sE={},QN=!1,GZ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,tE={},SN=!1,
SH={},yU=!1,zU={},AU=!1,$n={},BU=!1;BU||(BU=!0,$n=$n=NN(),$n.Stream=$n,$n.Readable=$n,$n.Writable=KN(),$n.Duplex=Ku(),$n.Transform=RN(),$n.PassThrough=function(){function b(g){if(!(this instanceof b))return new b(g);c.call(this,g)}if(yU)return SH;yU=!0;SH=b;var c=RN();sl(b,c);b.prototype._transform=function(g,a,d){d(null,g)};return SH}(),$n.finished=oE(),$n.pipeline=function(){function b(q){var r=!1;return function(){r||(r=!0,q.apply(void 0,arguments))}}function c(q){if(q)throw q;}function g(q,r,
u,x){x=b(x);var y=!1;q.on("close",function(){y=!0});void 0===f&&(f=oE());f(q,{readable:r,writable:u},function(H){if(H)return x(H);y=!0;x()});var D=!1;return function(H){if(!y&&!D){D=!0;if(q.setHeader&&"function"===typeof q.abort)return q.abort();if("function"===typeof q.destroy)return q.destroy();x(H||new p("pipe"))}}}function a(q){q()}function d(q,r){return q.pipe(r)}if(AU)return zU;AU=!0;var f,k=Ju().codes,n=k.ERR_MISSING_ARGS,p=k.ERR_STREAM_DESTROYED;return zU=function(){for(var q=arguments.length,
r=Array(q),u=0;u<q;u++)r[u]=arguments[u];var x=r.length?"function"!==typeof r[r.length-1]?c:r.pop():c;Array.isArray(r[0])&&(r=r[0]);if(2>r.length)throw new n("streams");var y,D=r.map(function(H,I){var N=I<r.length-1;return g(H,N,0<I,function(J){y||(y=J);J&&D.forEach(a);N||(D.forEach(a),x(y))})});return r.reduce(d)}}());var gq=$n;gq.Stream;gq.Readable;gq.Writable;gq.Duplex;gq.Transform;gq.PassThrough;gq.finished;gq.pipeline;var Vo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,CU={},l5=sl,TN=gq.Readable,HZ=yv;CU=Lu;l5(Lu,TN);Lu.prototype._read=function(){var b=this||Vo,c=(this||Vo)._options;(this||Vo).destroyed||(this||Vo)._iterator.next(function(g,a,d){if(!b.destroyed){if(g)return b.destroy(g);void 0===a&&void 0===d?b.push(null):!1!==c.keys&&!1===c.values?b.push(a):!1===c.keys&&!1!==c.values?b.push(d):b.push({key:a,value:d})}})};Lu.prototype._destroy=function(b,c){(this||Vo)._iterator.end(function(g){c(b||g)})};var m5=CU,jB={};(function(b,c,g){jB?jB=g():c[b]=
g()})("prr",jB,function(){var b="function"==typeof Object.defineProperty?function(g,a,d){Object.defineProperty(g,a,d);return g}:function(g,a,d){g[a]=d.value;return g},c=function(g,a){var d="object"==typeof a,f=!d&&"string"==typeof a,k=function(n){return d?!!a[n]:f?-1<a.indexOf(n[0]):!1};return{enumerable:k("enumerable"),configurable:k("configurable"),writable:k("writable"),value:g}};return function(g,a,d,f){var k;f=c(d,f);if("object"==typeof a){for(k in a)Object.hasOwnProperty.call(a,k)&&(f.value=
a[k],b(g,k,f));return g}return b(g,a,f)}});var Sl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,n5={},IZ=jB;uE.prototype=Error();var o5=n5=function(b){var c=function(g,a){return JZ(b,g,a)};return{CustomError:uE,FilesystemError:c("FilesystemError"),createError:c}},jn={},p5=jn.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},
{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},
{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",
description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},
{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},
{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},
{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},
{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];jn.errno={};jn.code={};p5.forEach(function(b){jn.errno[b.errno]=
b;jn.code[b.code]=b});jn.custom=o5(jn);jn.create=jn.custom.createError;jn.errno;jn.code;jn.custom;jn.create;jn.all;var TH={},vt=jn.create,wt=vt("LevelUPError"),UH=vt("NotFoundError",wt);UH.prototype.notFound=!0;UH.prototype.status=404;var xt=TH={LevelUPError:wt,InitializationError:vt("InitializationError",wt),OpenError:vt("OpenError",wt),ReadError:vt("ReadError",wt),WriteError:vt("WriteError",wt),NotFoundError:UH,EncodingError:vt("EncodingError",wt)};TH.InitializationError;TH.LevelUPError;var q5=
{},yt=q5=function(){var b,c=new Promise(function(g,a){b=function(d,f){d?a(d):g(f)}});b.promise=c;return b};var ey=function(b,c){return"function"===typeof b?b:c};var DU=function(b){return"object"===ad(b)&&null!==b?b:{}};var em="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,r5={},fy=xt.WriteError;Sw.prototype.put=function(b,c){try{(this||em).batch.put(b,c)}catch(g){throw new fy(g);}(this||em).ops.push({type:"put",key:b,value:c});(this||em).length++;return this||em};
Sw.prototype.del=function(b){try{(this||em).batch.del(b)}catch(c){throw new fy(c);}(this||em).ops.push({type:"del",key:b});(this||em).length++;return this||em};Sw.prototype.clear=function(){try{(this||em).batch.clear()}catch(b){throw new fy(b);}(this||em).ops=[];(this||em).length=0;return this||em};Sw.prototype.write=function(b,c){var g=(this||em)._levelup,a=(this||em).ops;c=ey(b,c);if(!c){c=yt();var d=c.promise}b=DU(b);try{(this||em).batch.write(b,function(f){if(f)return c(new fy(f));g.emit("batch",
a);c()})}catch(f){throw new fy(f);}return d};var s5=r5=Sw,VZ={assign:VN,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:VN})}},EU=Object.prototype.toString,FU=function(b){var c=EU.call(b),g="[object Arguments]"===c;return g||(g="[object Array]"!==c&&null!==b&&"object"==typeof b&&"number"==typeof b.length&&0<=b.length&&"[object Function]"===EU.call(b.callee)),g};if(!Object.keys){var kB=Object.prototype.hasOwnProperty,GU=Object.prototype.toString,
HU=Object.prototype.propertyIsEnumerable,t5=!HU.call({toString:null},"toString"),u5=HU.call(function(){},"prototype"),lB="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),VH=function(b){var c=b.constructor;return c&&c.prototype===b},v5={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,
$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},w5=function(){if("undefined"==typeof window)return!1;for(var b in window)try{if(!v5["$"+b]&&kB.call(window,b)&&null!==window[b]&&"object"==typeof window[b])try{VH(window[b])}catch(c){return!0}}catch(c){return!0}return!1}();var x5=function(b){var c=null!==b&&"object"==typeof b,g="[object Function]"===GU.call(b),a=FU(b),d=c&&"[object String]"===GU.call(b),f=
[];if(!c&&!g&&!a)throw new TypeError("Object.keys called on a non-object");c=u5&&g;if(d&&0<b.length&&!kB.call(b,0))for(d=0;d<b.length;++d)f.push(String(d));if(a&&0<b.length)for(a=0;a<b.length;++a)f.push(String(a));else for(var k in b)c&&"prototype"===k||!kB.call(b,k)||f.push(String(k));if(t5){if("undefined"!=typeof window&&w5)try{var n=VH(b)}catch(p){n=!1}else n=VH(b);for(a=0;a<lB.length;++a)n&&"constructor"===lB[a]||!kB.call(b,lB[a])||f.push(lB[a])}return f}}var y5=x5,z5=Array.prototype.slice,IU=
Object.keys,mB=IU?function(b){return IU(b)}:y5,JU=Object.keys;mB.shim=function(){Object.keys?function(){var b=Object.keys(arguments);return b&&b.length===arguments.length}(1,2)||(Object.keys=function(b){return FU(b)?JU(z5.call(b)):JU(b)}):Object.keys=mB;return Object.keys||mB};var A5="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),B5=Object.prototype.toString,C5=Array.prototype.concat,WH=Object.defineProperty,KU=WH&&function(){var b={};try{for(var c in WH(b,"x",{enumerable:!1,value:b}),
b)return!1;return b.x===b}catch(g){return!1}}(),gy=function(b,c){var g=2<arguments.length?arguments[2]:{},a=mB(c);A5&&(a=C5.call(a,Object.getOwnPropertySymbols(c)));for(var d=0;d<a.length;d+=1){var f=void 0,k=b,n=a[d],p=c[a[d]],q=g[a[d]];(!(n in k)||"function"==typeof(f=q)&&"[object Function]"===B5.call(f)&&q())&&(KU?WH(k,n,{configurable:!0,enumerable:!1,value:p,writable:!0}):k[n]=p)}};gy.supportsDescriptors=!!KU;var LU=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global).Symbol,
D5=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var b={},c=Symbol("test"),g=Object(c);if("string"==typeof c||"[object Symbol]"!==Object.prototype.toString.call(c)||"[object Symbol]"!==Object.prototype.toString.call(g))return!1;for(c in b[c]=42,b)return!1;if("function"==typeof Object.keys&&0!==Object.keys(b).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(b).length)return!1;
g=Object.getOwnPropertySymbols(b);return 1!==g.length||g[0]!==c||!Object.prototype.propertyIsEnumerable.call(b,c)||"function"==typeof Object.getOwnPropertyDescriptor&&(b=Object.getOwnPropertyDescriptor(b,c),42!==b.value||!0!==b.enumerable)?!1:!0},XH=Array.prototype.slice,E5=Object.prototype.toString,F5=function(b){var c=this;if("function"!=typeof c||"[object Function]"!==E5.call(c))throw new TypeError("Function.prototype.bind called on incompatible "+c);for(var g,a=XH.call(arguments,1),d=Math.max(0,
c.length-a.length),f=[],k=0;k<d;k++)f.push("$"+k);if(g=Function("binder","return function ("+f.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof g){var n=c.apply(this,a.concat(XH.call(arguments)));return Object(n)===n?n:this}return c.apply(b,a.concat(XH.call(arguments)))}),c.prototype)d=function(){},d.prototype=c.prototype,g.prototype=new d,d.prototype=null;return g},YH=Function.prototype.bind||F5,hy=TypeError,zt=Object.getOwnPropertyDescriptor;if(zt)try{zt({},"")}catch(b){zt=
null}var ZH=function(){throw new hy;},G5=zt?function(){try{return arguments.callee,ZH}catch(b){try{return zt(arguments,"callee").get}catch(c){return ZH}}}():ZH,At="function"==typeof LU&&"function"==typeof Symbol&&"symbol"==typeof LU("foo")&&"symbol"==typeof Symbol("bar")&&D5(),Bt=Object.getPrototypeOf||function(b){return b.__proto__},$H="undefined"==typeof Uint8Array?void 0:Bt(Uint8Array),aI={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==
typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":At?Bt([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,
"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,
"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,
"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,
"%IteratorPrototype%":At?Bt(Bt([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&At?Bt((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,
"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,
"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&At?Bt((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:
Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":At?Bt(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":At?Symbol:void 0,"%SymbolPrototype%":At?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":G5,"%TypedArray%":$H,
"%TypedArrayPrototype%":$H?$H.prototype:void 0,"%TypeError%":hy,"%TypeErrorPrototype%":hy.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,
"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==
typeof WeakSet?void 0:WeakSet.prototype},MU=YH.call(Function.call,String.prototype.replace),H5=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,I5=/\\(\\)?/g,J5=function(b){var c=[];return MU(b,H5,function(g,a,d,f){c[c.length]=d?MU(f,I5,"$1"):a||g}),c},NU,OU=function(b,c){if("string"!=typeof b||0===b.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof c)throw new TypeError('"allowMissing" argument must be a boolean');
var g=J5(b);var a="%"+(0<g.length?g[0]:"")+"%";if(!(a in aI))throw new SyntaxError("intrinsic "+a+" does not exist!");if(void 0===aI[a]&&!c)throw new hy("intrinsic "+a+" exists, but is not available. Please file an issue!");a=aI[a];for(var d=1;d<g.length;d+=1)if(null!=a)if(zt&&d+1>=g.length){var f=zt(a,g[d]);if(!(c||g[d]in a))throw new hy("base intrinsic for "+b+" exists, but the property is not available.");a=f?f.get||f.value:a[g[d]]}else a=a[g[d]];return a}("%Function%"),K5=OU.apply,L5=OU.call;
(NU=function(){return YH.apply(L5,arguments)}).apply=function(){return YH.apply(K5,arguments)};var bI,nB,M5=(bI=function(b,c){return 0===b&&0===c?1/b==1/c:b===c||!(b==b||c==c)},bI),N5=(nB=function(){return"function"==typeof Object.is?Object.is:M5},nB),PU=NU(nB(),Object);gy(PU,{getPolyfill:nB,implementation:bI,shim:function(){var b=N5();return gy(Object,{is:b},{is:function(){return Object.is!==b}}),b}});var qO=PU;var QU=function(b){return b!=b};var oB,O5=QU,P5=(oB=function(){return Number.isNaN&&Number.isNaN(NaN)&&
!Number.isNaN("a")?Number.isNaN:O5},gy),Q5=QU,RU=oB();gy(RU,{getPolyfill:oB,implementation:Q5,shim:function(){var b=oB();return P5(Number,{isNaN:b},{isNaN:function(){return Number.isNaN!==b}}),b}});var vE={},XN=!1,ZN={},YN=!1,MZ=void 0!==/a/g.flags,Xz=function(b){var c=[];return b.forEach(function(g){return c.push(g)}),c},nO=function(b){var c=[];return b.forEach(function(g,a){return c.push([a,g])}),c},bO=Object.is?Object.is:qO,Tz=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},
yE=Number.isNaN?Number.isNaN:RU,Uw=xE(Object.prototype.hasOwnProperty),Wz=xE(Object.prototype.propertyIsEnumerable),cO=xE(Object.prototype.toString),kn=Dg.types,RZ=kn.isAnyArrayBuffer,OZ=kn.isArrayBufferView,dO=kn.isDate,Uz=kn.isMap,eO=kn.isRegExp,Vz=kn.isSet,NZ=kn.isNativeError,SZ=kn.isBoxedPrimitive,fO=kn.isNumberObject,gO=kn.isStringObject,hO=kn.isBooleanObject,iO=kn.isBigIntObject,TZ=kn.isSymbolObject,PZ=kn.isFloat32Array,QZ=kn.isFloat64Array,oO={isDeepEqual:function(b,c){return oo(b,c,!1)},isDeepStrictEqual:function(b,
c){return oo(b,c,!0)}},zE={},pO=!1,Xi=wE();Xi.AssertionError;Xi.deepEqual;Xi.deepStrictEqual;Xi.doesNotReject;Xi.doesNotThrow;Xi.equal;Xi.fail;Xi.ifError;Xi.notDeepEqual;Xi.notDeepStrictEqual;Xi.notEqual;Xi.notStrictEqual;Xi.ok;Xi.rejects;Xi.strict;Xi.strictEqual;Xi.throws;Xi.AssertionError;Xi.deepEqual;Xi.deepStrictEqual;Xi.doesNotReject;Xi.doesNotThrow;Xi.equal;Xi.fail;Xi.ifError;Xi.notDeepEqual;Xi.notDeepStrictEqual;Xi.notEqual;Xi.notStrictEqual;Xi.ok;Xi.rejects;Xi.strict;Xi.strictEqual;Xi.throws;
Xi.AssertionError;Xi.deepEqual;Xi.deepStrictEqual;Xi.doesNotReject;Xi.doesNotThrow;Xi.equal;Xi.fail;Xi.ifError;Xi.notDeepEqual;Xi.notDeepStrictEqual;Xi.notEqual;Xi.notStrictEqual;Xi.ok;Xi.rejects;Xi.strict;Xi.strictEqual;Xi.throws;var Hk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,R5={},Zz=Pl,Yz=Dl.EventEmitter,S5=Dg.inherits,rO=i5,XZ=Xi,Vw=DU,zv=xt.WriteError,AE=xt.ReadError,T5=xt.NotFoundError,U5=xt.OpenError,WZ=xt.InitializationError;kl.prototype.emit=Yz.prototype.emit;
kl.prototype.once=Yz.prototype.once;S5(kl,Yz);kl.prototype.open=function(b,c){var g=this||Hk;"function"===typeof b&&(c=b,b=null);if(!c){c=yt();var a=c.promise}b||(b=(this||Hk).options);if(this.isOpen())return Zz.nextTick(c,null,g),a;if(this._isOpening())return this.once("open",function(){c(null,g)}),a;this.emit("opening");(this||Hk).db.open(b,function(d){if(d)return c(new U5(d));g.db=g._db;c(null,g);g.emit("open");g.emit("ready")});return a};kl.prototype.close=function(b){var c=this||Hk;if(!b){b=
yt();var g=b.promise}if(this.isOpen())(this||Hk).db.close(function(){c.emit("closed");b.apply(null,arguments)}),this.emit("closing"),(this||Hk).db=new rO((this||Hk)._db);else if(this.isClosed())Zz.nextTick(b);else if("closing"===(this||Hk).db.status)this.once("closed",b);else if(this._isOpening())this.once("open",function(){c.close(b)});return g};kl.prototype.isOpen=function(){return"open"===(this||Hk).db.status};kl.prototype._isOpening=function(){return"opening"===(this||Hk).db.status};kl.prototype.isClosed=
function(){return/^clos|new/.test((this||Hk).db.status)};kl.prototype.get=function(b,c,g){if(null===b||void 0===b)throw new AE("get() requires a key argument");g=ey(c,g);if(!g){g=yt();var a=g.promise}if($z(this||Hk,g))return a;c=Vw(c);(this||Hk).db.get(b,c,function(d,f){if(d)return d=/notfound/i.test(d)||d.notFound?new T5("Key not found in database ["+b+"]",d):new AE(d),g(d);g(null,f)});return a};kl.prototype.put=function(b,c,g,a){if(null===b||void 0===b)throw new zv("put() requires a key argument");
var d=this||Hk;a=ey(g,a);if(!a){a=yt();var f=a.promise}if($z(this||Hk,a))return f;g=Vw(g);(this||Hk).db.put(b,c,g,function(k){if(k)return a(new zv(k));d.emit("put",b,c);a()});return f};kl.prototype.del=function(b,c,g){if(null===b||void 0===b)throw new zv("del() requires a key argument");var a=this||Hk;g=ey(c,g);if(!g){g=yt();var d=g.promise}if($z(this||Hk,g))return d;c=Vw(c);(this||Hk).db.del(b,c,function(f){if(f)return g(new zv(f));a.emit("del",b);g()});return d};kl.prototype.batch=function(b,c,
g){if(!arguments.length)return new s5(this||Hk);if(!Array.isArray(b))throw new zv("batch() requires an array argument");var a=this||Hk;g=ey(c,g);if(!g){g=yt();var d=g.promise}if($z(this||Hk,g))return d;c=Vw(c);(this||Hk).db.batch(b,c,function(f){if(f)return g(new zv(f));a.emit("batch",b);g()});return d};kl.prototype.iterator=function(b){return(this||Hk).db.iterator(b)};kl.prototype.readStream=kl.prototype.createReadStream=function(b){b=yv({keys:!0,values:!0},b);"number"!==typeof b.limit&&(b.limit=
-1);return new m5((this||Hk).db.iterator(b),b)};kl.prototype.keyStream=kl.prototype.createKeyStream=function(b){return this.createReadStream(yv(b,{keys:!0,values:!1}))};kl.prototype.valueStream=kl.prototype.createValueStream=function(b){return this.createReadStream(yv(b,{keys:!1,values:!0}))};kl.prototype.toString=function(){return"LevelUP"};kl.errors=xt;var V5=R5=kl.default=kl,ck={},W5=rl.Buffer;ck.compare=function(b,c){if(W5.isBuffer(b)){for(var g=Math.min(b.length,c.length),a=0;a<g;a++){var d=
b[a]-c[a];if(d)return d}return b.length-c.length}return b<c?-1:b>c?1:0};var X5=ck.lowerBoundKey=function(b){return Op(b,"gt")||Op(b,"gte")||Op(b,"min")||(b.reverse?Op(b,"end"):Op(b,"start"))||void 0},cI=ck.lowerBound=function(b,c){var g=X5(b);return g?b[g]:c},dI=ck.lowerBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"gt")?!1:!0},eI=ck.upperBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"lt")?!1:!0},Y5=ck.lowerBoundExclusive=function(b){return!dI(b)},Z5=ck.upperBoundExclusive=
function(b){return!eI(b)},$5=ck.upperBoundKey=function(b){return Op(b,"lt")||Op(b,"lte")||Op(b,"max")||(b.reverse?Op(b,"start"):Op(b,"end"))||void 0},fI=ck.upperBound=function(b,c){var g=$5(b);return g?b[g]:c};ck.start=function(b,c){return b.reverse?fI(b,c):cI(b,c)};ck.end=function(b,c){return b.reverse?cI(b,c):fI(b,c)};ck.startInclusive=function(b){return b.reverse?eI(b):dI(b)};ck.endInclusive=function(b){return b.reverse?dI(b):eI(b)};ck.toLtgt=function(b,c,g,a,d){c=c||{};g=g||YZ;var f=3<arguments.length,
k=ck.lowerBoundKey(b),n=ck.upperBoundKey(b);k?"gt"===k?c.gt=g(b.gt,!1):c.gte=g(b[k],!1):f&&(c.gte=g(a,!1));n?"lt"===n?c.lt=g(b.lt,!0):c.lte=g(b[n],!0):f&&(c.lte=g(d,!0));null!=b.reverse&&(c.reverse=!!b.reverse);Object.hasOwnProperty.call(c,"max")&&delete c.max;Object.hasOwnProperty.call(c,"min")&&delete c.min;Object.hasOwnProperty.call(c,"start")&&delete c.start;Object.hasOwnProperty.call(c,"end")&&delete c.end;return c};ck.contains=function(b,c,g){g=g||ck.compare;var a=cI(b);if(void 0!==a&&""!==
a&&(a=g(c,a),0>a||0===a&&Y5(b)))return!1;a=fI(b);return void 0!==a&&""!==a&&(a=g(c,a),0<a||0===a&&Z5(b))?!1:!0};ck.filter=function(b,c){return function(g){return ck.contains(b,g,c)}};ck.compare;ck.start;ck.end;ck.startInclusive;ck.endInclusive;ck.toLtgt;ck.contains;ck.filter;ck.lowerBoundKey;ck.lowerBound;ck.lowerBoundInclusive;ck.upperBoundInclusive;ck.lowerBoundExclusive;ck.upperBoundExclusive;ck.upperBoundKey;ck.upperBound;var Cn={},CE=rl.Buffer;Cn.utf8=Cn["utf-8"]={encode:function(b){return BE(b)?
b:String(b)},decode:aA,buffer:!1,type:"utf8"};Cn.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"};Cn.binary={encode:function(b){return BE(b)?b:CE.from(b)},decode:aA,buffer:!0,type:"binary"};Cn.none={encode:aA,decode:aA,buffer:!1,type:"id"};Cn.id=Cn.none;"hex ascii base64 ucs2 ucs-2 utf16le utf-16le".split(" ").forEach(function(b){Cn[b]={encode:function(c){return BE(c)?c:CE.from(c,b)},decode:function(c){return c.toString(b)},buffer:!0,type:b}});Cn.utf8;Cn.json;Cn.binary;Cn.none;
Cn.id;var Hq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,SU={},DE=Cn;SU=en;en.prototype._encoding=function(b){"string"===typeof b&&(b=DE[b]);b||(b=DE.id);return b};en.prototype._keyEncoding=function(b,c){return this._encoding(c&&c.keyEncoding||b&&b.keyEncoding||(this||Hq).opts.keyEncoding)};en.prototype._valueEncoding=function(b,c){return this._encoding(c&&(c.valueEncoding||c.encoding)||b&&(b.valueEncoding||b.encoding)||(this||Hq).opts.valueEncoding||(this||Hq).opts.encoding)};
en.prototype.encodeKey=function(b,c,g){return this._keyEncoding(c,g).encode(b)};en.prototype.encodeValue=function(b,c,g){return this._valueEncoding(c,g).encode(b)};en.prototype.decodeKey=function(b,c){return this._keyEncoding(c).decode(b)};en.prototype.decodeValue=function(b,c){return this._valueEncoding(c).decode(b)};en.prototype.encodeBatch=function(b,c){var g=this||Hq;return b.map(function(a){var d={type:a.type,key:g.encodeKey(a.key,c,a)};g.keyAsBuffer(c,a)&&(d.keyEncoding="binary");a.prefix&&
(d.prefix=a.prefix);"value"in a&&(d.value=g.encodeValue(a.value,c,a),g.valueAsBuffer(c,a)&&(d.valueEncoding="binary"));return d})};var a6="lt gt lte gte start end".split(" ");en.prototype.encodeLtgt=function(b){var c=this||Hq,g={};Object.keys(b).forEach(function(a){g[a]=-1<a6.indexOf(a)?c.encodeKey(b[a],b):b[a]});return g};en.prototype.createStreamDecoder=function(b){var c=this||Hq;return b.keys&&b.values?function(g,a){return{key:c.decodeKey(g,b),value:c.decodeValue(a,b)}}:b.keys?function(g){return c.decodeKey(g,
b)}:b.values?function(g,a){return c.decodeValue(a,b)}:function(){}};en.prototype.keyAsBuffer=function(b){return this._keyEncoding(b).buffer};en.prototype.valueAsBuffer=function(b){return this._valueEncoding(b).buffer};var b6=SU,gI={},TU=!1,Av="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,yk=function(){function b(){throw Error("setTimeout has not been defined");}function c(){throw Error("clearTimeout has not been defined");}function g(H){if(q===setTimeout)return setTimeout(H,
0);if((q===b||!q)&&setTimeout)return q=setTimeout,setTimeout(H,0);try{return q(H,0)}catch(I){try{return q.call(null,H,0)}catch(N){return q.call(this||Av,H,0)}}}function a(H){if(r===clearTimeout)return clearTimeout(H);if((r===c||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(H);try{return r(H)}catch(I){try{return r.call(null,H)}catch(N){return r.call(this||Av,H)}}}function d(){x&&y&&(x=!1,y.length?u=y.concat(u):D=-1,u.length&&f())}function f(){if(!x){var H=g(d);x=!0;for(var I=u.length;I;){y=
u;for(u=[];++D<I;)y&&y[D].run();D=-1;I=u.length}y=null;x=!1;a(H)}}function k(H,I){(this||Av).fun=H;(this||Av).array=I}function n(){}if(TU)return gI;TU=!0;var p=gI={};try{var q="function"===typeof setTimeout?setTimeout:b}catch(H){q=b}try{var r="function"===typeof clearTimeout?clearTimeout:c}catch(H){r=c}var u=[],x=!1,y,D=-1;p.nextTick=function(H){var I=Array(arguments.length-1);if(1<arguments.length)for(var N=1;N<arguments.length;N++)I[N-1]=arguments[N];u.push(new k(H,I));1!==u.length||x||g(f)};k.prototype.run=
function(){(this||Av).fun.apply(null,(this||Av).array)};p.title="browser";p.browser=!0;p.env={};p.argv=[];p.version="";p.versions={};p.on=n;p.addListener=n;p.once=n;p.off=n;p.removeListener=n;p.removeAllListeners=n;p.emit=n;p.prependListener=n;p.prependOnceListener=n;p.listeners=function(H){return[]};p.binding=function(H){throw Error("process.binding is not supported");};p.cwd=function(){return"/"};p.chdir=function(H){throw Error("process.chdir is not supported");};p.umask=function(){return 0};return gI}();
yk.platform="browser";yk.addListener;yk.argv;yk.binding;yk.browser;yk.chdir;yk.cwd;yk.emit;yk.env;yk.listeners;yk.nextTick;yk.off;yk.on;yk.once;yk.prependListener;yk.prependOnceListener;yk.removeAllListeners;yk.removeListener;yk.title;yk.umask;yk.version;yk.versions;for(var d6={byteLength:function(b){b=sO(b);var c=b[1];return 3*(b[0]+c)/4-c},toByteArray:function(b){var c=sO(b);var g=c[0];c=c[1];var a=new c6(3*(g+c)/4-c),d=0,f=0<c?g-4:g;for(g=0;g<f;g+=4){var k=to[b.charCodeAt(g)]<<18|to[b.charCodeAt(g+
1)]<<12|to[b.charCodeAt(g+2)]<<6|to[b.charCodeAt(g+3)];a[d++]=k>>16&255;a[d++]=k>>8&255;a[d++]=255&k}2===c&&(k=to[b.charCodeAt(g)]<<2|to[b.charCodeAt(g+1)]>>4,a[d++]=255&k);1===c&&(k=to[b.charCodeAt(g)]<<10|to[b.charCodeAt(g+1)]<<4|to[b.charCodeAt(g+2)]>>2,a[d++]=k>>8&255,a[d++]=255&k);return a},fromByteArray:function(b){for(var c,g=b.length,a=g%3,d=[],f=0,k=g-a;f<k;f+=16383)d.push(ZZ(b,f,f+16383>k?k:f+16383));1===a?(c=b[g-1],d.push(Pp[c>>2]+Pp[c<<4&63]+"==")):2===a&&(c=(b[g-2]<<8)+b[g-1],d.push(Pp[c>>
10]+Pp[c>>4&63]+Pp[c<<2&63]+"="));return d.join("")}},Pp=[],to=[],c6="undefined"!=typeof Uint8Array?Uint8Array:Array,hI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bv=0,e6=hI.length;Bv<e6;++Bv)Pp[Bv]=hI[Bv],to[hI.charCodeAt(Bv)]=Bv;to[45]=62;to[95]=63;var uo={},IE=d6,Mu={read:function(b,c,g,a,d){var f=8*d-a-1;var k=(1<<f)-1,n=k>>1,p=-7;d=g?d-1:0;var q=g?-1:1,r=b[c+d];d+=q;g=r&(1<<-p)-1;r>>=-p;for(p+=f;0<p;g=256*g+b[c+d],d+=q,p-=8);f=g&(1<<-p)-1;g>>=-p;for(p+=a;0<p;f=256*f+b[c+
d],d+=q,p-=8);if(0===g)g=1-n;else{if(g===k)return f?NaN:1/0*(r?-1:1);f+=Math.pow(2,a);g-=n}return(r?-1:1)*f*Math.pow(2,g-a)},write:function(b,c,g,a,d,f){var k,n,p,q=8*f-d-1,r=(1<<q)-1,u=r>>1,x=23===d?Math.pow(2,-24)-Math.pow(2,-77):0;f=a?0:f-1;a=a?1:-1;var y=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);for(isNaN(c)||c===1/0?(n=isNaN(c)?1:0,k=r):(k=Math.floor(Math.log(c)/Math.LN2),1>c*(p=Math.pow(2,-k))&&(k--,p*=2),2<=(c+=1<=k+u?x/p:x*Math.pow(2,1-u))*p&&(k++,p/=2),k+u>=r?(n=0,k=r):1<=k+u?(n=(c*p-1)*Math.pow(2,
d),k+=u):(n=c*Math.pow(2,u-1)*Math.pow(2,d),k=0));8<=d;b[g+f]=255&n,f+=a,n/=256,d-=8);k=k<<d|n;for(q+=d;0<q;b[g+f]=255&k,f+=a,k/=256,q-=8);b[g+f-a]|=128*y}},UU="function"==typeof Symbol&&"function"==typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;uo.Buffer=Zg;uo.SlowBuffer=function(b){+b!=b&&(b=0);return Zg.alloc(+b)};uo.INSPECT_MAX_BYTES=50;uo.kMaxLength=2147483647;Zg.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,
Uint8Array.prototype),Object.setPrototypeOf(b,c),42===b.foo()}catch(g){return!1}}();Zg.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(Zg.prototype,"parent",{enumerable:!0,get:function(){if(Zg.isBuffer(this))return this.buffer}});Object.defineProperty(Zg.prototype,"offset",{enumerable:!0,
get:function(){if(Zg.isBuffer(this))return this.byteOffset}});Zg.poolSize=8192;Zg.from=function(b,c,g){return tO(b,c,g)};Object.setPrototypeOf(Zg.prototype,Uint8Array.prototype);Object.setPrototypeOf(Zg,Uint8Array);Zg.alloc=function(b,c,g){return vO(b),0>=b?Iq(b):void 0!==c?"string"==typeof g?Iq(b).fill(c,g):Iq(b).fill(c):Iq(b)};Zg.allocUnsafe=function(b){return EE(b)};Zg.allocUnsafeSlow=function(b){return EE(b)};Zg.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==Zg.prototype};Zg.compare=
function(b,c){if(Jq(b,Uint8Array)&&(b=Zg.from(b,b.offset,b.byteLength)),Jq(c,Uint8Array)&&(c=Zg.from(c,c.offset,c.byteLength)),!Zg.isBuffer(b)||!Zg.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===c)return 0;for(var g=b.length,a=c.length,d=0,f=Math.min(g,a);d<f;++d)if(b[d]!==c[d]){g=b[d];a=c[d];break}return g<a?-1:a<g?1:0};Zg.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};Zg.concat=function(b,c){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return Zg.alloc(0);var g;if(void 0===c)for(g=c=0;g<b.length;++g)c+=b[g].length;c=Zg.allocUnsafe(c);var a=0;for(g=0;g<b.length;++g){var d=b[g];if(Jq(d,Uint8Array)&&(d=Zg.from(d)),!Zg.isBuffer(d))throw new TypeError('"list" argument must be an Array of Buffers');d.copy(c,a);a+=d.length}return c};Zg.byteLength=uO;Zg.prototype._isBuffer=!0;Zg.prototype.swap16=
function(){var b=this.length;if(0!=b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<b;c+=2)Ns(this,c,c+1);return this};Zg.prototype.swap32=function(){var b=this.length;if(0!=b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var c=0;c<b;c+=4)Ns(this,c,c+3),Ns(this,c+1,c+2);return this};Zg.prototype.swap64=function(){var b=this.length;if(0!=b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var c=0;c<b;c+=8)Ns(this,c,
c+7),Ns(this,c+1,c+6),Ns(this,c+2,c+5),Ns(this,c+3,c+4);return this};Zg.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?xO(this,0,b):a_.apply(this,arguments)};Zg.prototype.toLocaleString=Zg.prototype.toString;Zg.prototype.equals=function(b){if(!Zg.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Zg.compare(this,b)};Zg.prototype.inspect=function(){var b="",c=uo.INSPECT_MAX_BYTES;return b=this.toString("hex",0,c).replace(/(.{2})/g,
"$1 ").trim(),this.length>c&&(b+=" ... "),"<Buffer "+b+">"};UU&&(Zg.prototype[UU]=Zg.prototype.inspect);Zg.prototype.compare=function(b,c,g,a,d){if(Jq(b,Uint8Array)&&(b=Zg.from(b,b.offset,b.byteLength)),!Zg.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+ad(b));if(void 0===c&&(c=0),void 0===g&&(g=b?b.length:0),void 0===a&&(a=0),void 0===d&&(d=this.length),0>c||g>b.length||0>a||d>this.length)throw new RangeError("out of range index");
if(a>=d&&c>=g)return 0;if(a>=d)return-1;if(c>=g)return 1;if(this===b)return 0;var f=(d>>>=0)-(a>>>=0),k=(g>>>=0)-(c>>>=0),n=Math.min(f,k);a=this.slice(a,d);b=b.slice(c,g);for(c=0;c<n;++c)if(a[c]!==b[c]){f=a[c];k=b[c];break}return f<k?-1:k<f?1:0};Zg.prototype.includes=function(b,c,g){return-1!==this.indexOf(b,c,g)};Zg.prototype.indexOf=function(b,c,g){return yO(this,b,c,g,!0)};Zg.prototype.lastIndexOf=function(b,c,g){return yO(this,b,c,g,!1)};Zg.prototype.write=function(b,c,g,a){if(void 0===c)a="utf8",
g=this.length,c=0;else if(void 0===g&&"string"==typeof c)a=c,g=this.length,c=0;else{if(!isFinite(c))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");c>>>=0;isFinite(g)?(g>>>=0,void 0===a&&(a="utf8")):(a=g,g=void 0)}var d=this.length-c;if((void 0===g||g>d)&&(g=d),0<b.length&&(0>g||0>c)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(d=!1;;)switch(a){case "hex":a:{c=Number(c)||0;a=this.length-c;g?(g=Number(g))>a&&
(g=a):g=a;a=b.length;g>a/2&&(g=a/2);for(a=0;a<g;++a){d=parseInt(b.substr(2*a,2),16);if(d!=d){g=a;break a}this[c+a]=d}g=a}return g;case "utf8":case "utf-8":return bA(HE(b,this.length-c),this,c,g);case "ascii":return AO(this,b,c,g);case "latin1":case "binary":return AO(this,b,c,g);case "base64":return bA(wO(b),this,c,g);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=g;d=this.length-c;for(var f=[],k=0;k<b.length&&!(0>(d-=2));++k){var n=b.charCodeAt(k);g=n>>8;n%=256;f.push(n);f.push(g)}return bA(f,
this,c,a);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();d=!0}};Zg.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};Zg.prototype.slice=function(b,c){var g=this.length;0>(b=~~b)?0>(b+=g)&&(b=0):b>g&&(b=g);0>(c=void 0===c?g:~~c)?0>(c+=g)&&(c=0):c>g&&(c=g);c<b&&(c=b);b=this.subarray(b,c);return Object.setPrototypeOf(b,Zg.prototype),b};Zg.prototype.readUIntLE=function(b,c,g){b>>>=0;c>>>=0;g||pm(b,c,this.length);g=this[b];
for(var a=1,d=0;++d<c&&(a*=256);)g+=this[b+d]*a;return g};Zg.prototype.readUIntBE=function(b,c,g){b>>>=0;c>>>=0;g||pm(b,c,this.length);g=this[b+--c];for(var a=1;0<c&&(a*=256);)g+=this[b+--c]*a;return g};Zg.prototype.readUInt8=function(b,c){return b>>>=0,c||pm(b,1,this.length),this[b]};Zg.prototype.readUInt16LE=function(b,c){return b>>>=0,c||pm(b,2,this.length),this[b]|this[b+1]<<8};Zg.prototype.readUInt16BE=function(b,c){return b>>>=0,c||pm(b,2,this.length),this[b]<<8|this[b+1]};Zg.prototype.readUInt32LE=
function(b,c){return b>>>=0,c||pm(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};Zg.prototype.readUInt32BE=function(b,c){return b>>>=0,c||pm(b,4,this.length),16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};Zg.prototype.readIntLE=function(b,c,g){b>>>=0;c>>>=0;g||pm(b,c,this.length);g=this[b];for(var a=1,d=0;++d<c&&(a*=256);)g+=this[b+d]*a;return g>=128*a&&(g-=Math.pow(2,8*c)),g};Zg.prototype.readIntBE=function(b,c,g){b>>>=0;c>>>=0;g||pm(b,c,this.length);g=c;for(var a=
1,d=this[b+--g];0<g&&(a*=256);)d+=this[b+--g]*a;return d>=128*a&&(d-=Math.pow(2,8*c)),d};Zg.prototype.readInt8=function(b,c){return b>>>=0,c||pm(b,1,this.length),128&this[b]?-1*(255-this[b]+1):this[b]};Zg.prototype.readInt16LE=function(b,c){b>>>=0;c||pm(b,2,this.length);b=this[b]|this[b+1]<<8;return 32768&b?4294901760|b:b};Zg.prototype.readInt16BE=function(b,c){b>>>=0;c||pm(b,2,this.length);b=this[b+1]|this[b]<<8;return 32768&b?4294901760|b:b};Zg.prototype.readInt32LE=function(b,c){return b>>>=0,
c||pm(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};Zg.prototype.readInt32BE=function(b,c){return b>>>=0,c||pm(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};Zg.prototype.readFloatLE=function(b,c){return b>>>=0,c||pm(b,4,this.length),Mu.read(this,b,!0,23,4)};Zg.prototype.readFloatBE=function(b,c){return b>>>=0,c||pm(b,4,this.length),Mu.read(this,b,!1,23,4)};Zg.prototype.readDoubleLE=function(b,c){return b>>>=0,c||pm(b,8,this.length),Mu.read(this,b,!0,52,8)};
Zg.prototype.readDoubleBE=function(b,c){return b>>>=0,c||pm(b,8,this.length),Mu.read(this,b,!1,52,8)};Zg.prototype.writeUIntLE=function(b,c,g,a){(b=+b,c>>>=0,g>>>=0,a)||xn(this,b,c,g,Math.pow(2,8*g)-1,0);a=1;var d=0;for(this[c]=255&b;++d<g&&(a*=256);)this[c+d]=b/a&255;return c+g};Zg.prototype.writeUIntBE=function(b,c,g,a){(b=+b,c>>>=0,g>>>=0,a)||xn(this,b,c,g,Math.pow(2,8*g)-1,0);a=g-1;var d=1;for(this[c+a]=255&b;0<=--a&&(d*=256);)this[c+a]=b/d&255;return c+g};Zg.prototype.writeUInt8=function(b,c,
g){return b=+b,c>>>=0,g||xn(this,b,c,1,255,0),this[c]=255&b,c+1};Zg.prototype.writeUInt16LE=function(b,c,g){return b=+b,c>>>=0,g||xn(this,b,c,2,65535,0),this[c]=255&b,this[c+1]=b>>>8,c+2};Zg.prototype.writeUInt16BE=function(b,c,g){return b=+b,c>>>=0,g||xn(this,b,c,2,65535,0),this[c]=b>>>8,this[c+1]=255&b,c+2};Zg.prototype.writeUInt32LE=function(b,c,g){return b=+b,c>>>=0,g||xn(this,b,c,4,4294967295,0),this[c+3]=b>>>24,this[c+2]=b>>>16,this[c+1]=b>>>8,this[c]=255&b,c+4};Zg.prototype.writeUInt32BE=function(b,
c,g){return b=+b,c>>>=0,g||xn(this,b,c,4,4294967295,0),this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=255&b,c+4};Zg.prototype.writeIntLE=function(b,c,g,a){(b=+b,c>>>=0,a)||(a=Math.pow(2,8*g-1),xn(this,b,c,g,a-1,-a));a=0;var d=1,f=0;for(this[c]=255&b;++a<g&&(d*=256);)0>b&&0===f&&0!==this[c+a-1]&&(f=1),this[c+a]=(b/d>>0)-f&255;return c+g};Zg.prototype.writeIntBE=function(b,c,g,a){(b=+b,c>>>=0,a)||(a=Math.pow(2,8*g-1),xn(this,b,c,g,a-1,-a));a=g-1;var d=1,f=0;for(this[c+a]=255&b;0<=--a&&(d*=
256);)0>b&&0===f&&0!==this[c+a+1]&&(f=1),this[c+a]=(b/d>>0)-f&255;return c+g};Zg.prototype.writeInt8=function(b,c,g){return b=+b,c>>>=0,g||xn(this,b,c,1,127,-128),0>b&&(b=255+b+1),this[c]=255&b,c+1};Zg.prototype.writeInt16LE=function(b,c,g){return b=+b,c>>>=0,g||xn(this,b,c,2,32767,-32768),this[c]=255&b,this[c+1]=b>>>8,c+2};Zg.prototype.writeInt16BE=function(b,c,g){return b=+b,c>>>=0,g||xn(this,b,c,2,32767,-32768),this[c]=b>>>8,this[c+1]=255&b,c+2};Zg.prototype.writeInt32LE=function(b,c,g){return b=
+b,c>>>=0,g||xn(this,b,c,4,2147483647,-2147483648),this[c]=255&b,this[c+1]=b>>>8,this[c+2]=b>>>16,this[c+3]=b>>>24,c+4};Zg.prototype.writeInt32BE=function(b,c,g){return b=+b,c>>>=0,g||xn(this,b,c,4,2147483647,-2147483648),0>b&&(b=4294967295+b+1),this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=255&b,c+4};Zg.prototype.writeFloatLE=function(b,c,g){return CO(this,b,c,!0,g)};Zg.prototype.writeFloatBE=function(b,c,g){return CO(this,b,c,!1,g)};Zg.prototype.writeDoubleLE=function(b,c,g){return DO(this,
b,c,!0,g)};Zg.prototype.writeDoubleBE=function(b,c,g){return DO(this,b,c,!1,g)};Zg.prototype.copy=function(b,c,g,a){if(!Zg.isBuffer(b))throw new TypeError("argument should be a Buffer");if((g||(g=0),a||0===a||(a=this.length),c>=b.length&&(c=b.length),c||(c=0),0<a&&a<g&&(a=g),a===g)||0===b.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>g||g>=this.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("sourceEnd out of bounds");
a>this.length&&(a=this.length);b.length-c<a-g&&(a=b.length-c+g);var d=a-g;if(this===b&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(c,g,a);else if(this===b&&g<c&&c<a)for(a=d-1;0<=a;--a)b[a+c]=this[a+g];else Uint8Array.prototype.set.call(b,this.subarray(g,a),c);return d};Zg.prototype.fill=function(b,c,g,a){if("string"==typeof b){if("string"==typeof c?(a=c,c=0,g=this.length):"string"==typeof g&&(a=g,g=this.length),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");
if("string"==typeof a&&!Zg.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===b.length){var d=b.charCodeAt(0);("utf8"===a&&128>d||"latin1"===a)&&(b=d)}}else"number"==typeof b?b&=255:"boolean"==typeof b&&(b=Number(b));if(0>c||this.length<c||this.length<g)throw new RangeError("Out of range index");if(g<=c)return this;if(c>>>=0,g=void 0===g?this.length:g>>>0,b||(b=0),"number"==typeof b)for(a=c;a<g;++a)this[a]=b;else{d=Zg.isBuffer(b)?b:Zg.from(b,a);var f=d.length;if(0===f)throw new TypeError('The value "'+
b+'" is invalid for argument "value"');for(a=0;a<g-c;++a)this[a+c]=d[a%f]}return this};var c_=/[^+/0-9A-Za-z-_]/g,b_=function(){for(var b=Array(256),c=0;16>c;++c)for(var g=16*c,a=0;16>a;++a)b[g+a]="0123456789abcdef"[c]+"0123456789abcdef"[a];return b}();uo.Buffer;uo.INSPECT_MAX_BYTES;uo.kMaxLength;var pB={},Qp=uo.Buffer;Qp.from&&Qp.alloc&&Qp.allocUnsafe&&Qp.allocUnsafeSlow?pB=uo:(EO(uo,pB),pB.Buffer=Os);Os.prototype=Object.create(Qp.prototype);EO(Qp,Os);Os.from=function(b,c,g){if("number"==typeof b)throw new TypeError("Argument must not be a number");
return Qp(b,c,g)};Os.alloc=function(b,c,g){if("number"!=typeof b)throw new TypeError("Argument must be a number");b=Qp(b);return void 0!==c?"string"==typeof g?b.fill(c,g):b.fill(c):b.fill(0),b};Os.allocUnsafe=function(b){if("number"!=typeof b)throw new TypeError("Argument must be a number");return Qp(b)};Os.allocUnsafeSlow=function(b){if("number"!=typeof b)throw new TypeError("Argument must be a number");return uo.SlowBuffer(b)};var QE={},JE=pB.Buffer,FO=JE.isEncoding||function(b){switch((b=""+b)&&
b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};QE.StringDecoder=Ww;Ww.prototype.write=function(b){if(0===b.length)return"";var c;if(this.lastNeed){if(void 0===(c=this.fillLast(b)))return"";var g=this.lastNeed;this.lastNeed=0}else g=0;return g<b.length?c?c+this.text(b,g):this.text(b,g):c||""};Ww.prototype.end=function(b){b=b&&b.length?this.write(b):"";return this.lastNeed?
b+"\ufffd":b};Ww.prototype.text=function(b,c){var g=b.length-1;if(g<c)g=0;else{var a=KE(b[g]);g=0<=a?(0<a&&(this.lastNeed=a-1),a):--g<c||-2===a?0:0<=(a=KE(b[g]))?(0<a&&(this.lastNeed=a-2),a):--g<c||-2===a?0:0<=(a=KE(b[g]))?(0<a&&(2===a?a=0:this.lastNeed=a-3),a):0}if(!this.lastNeed)return b.toString("utf8",c);this.lastTotal=g;a=b.length-(g-this.lastNeed);return b.copy(this.lastChar,0,a),b.toString("utf8",c,a)};Ww.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length);this.lastNeed-=b.length};var Xw={},GO=!1,cA={},HO=!1,Ct={},VU=!1,Ps=function(){function b(W){if(W>Va)throw new RangeError('The value "'+W+'" is invalid for option "size"');W=new Uint8Array(W);Object.setPrototypeOf(W,c.prototype);return W}function c(W,ea,Kb){if("number"===typeof W){if("string"===typeof ea)throw new TypeError('The "string" argument must be of type string. Received type number');
return d(W)}return g(W,ea,Kb)}function g(W,ea,Kb){if("string"===typeof W){var V=ea;if("string"!==typeof V||""===V)V="utf8";if(!c.isEncoding(V))throw new TypeError("Unknown encoding: "+V);ea=q(W,V)|0;Kb=b(ea);W=Kb.write(W,V);W!==ea&&(Kb=Kb.slice(0,W));return Kb}if(ArrayBuffer.isView(W))return Ac(W,Uint8Array)?(W=new Uint8Array(W),W=k(W.buffer,W.byteOffset,W.byteLength)):W=f(W),W;if(null==W)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
ad(W));if(Ac(W,ArrayBuffer)||W&&Ac(W.buffer,ArrayBuffer)||"undefined"!==typeof SharedArrayBuffer&&(Ac(W,SharedArrayBuffer)||W&&Ac(W.buffer,SharedArrayBuffer)))return k(W,ea,Kb);if("number"===typeof W)throw new TypeError('The "value" argument must not be of type number. Received type number');V=W.valueOf&&W.valueOf();if(null!=V&&V!==W)return c.from(V,ea,Kb);if(V=n(W))return V;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof W[Symbol.toPrimitive])return c.from(W[Symbol.toPrimitive]("string"),
ea,Kb);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+ad(W));}function a(W){if("number"!==typeof W)throw new TypeError('"size" argument must be of type number');if(0>W)throw new RangeError('The value "'+W+'" is invalid for option "size"');}function d(W){a(W);return b(0>W?0:p(W)|0)}function f(W){for(var ea=0>W.length?0:p(W.length)|0,Kb=b(ea),V=0;V<ea;V+=1)Kb[V]=W[V]&255;return Kb}function k(W,ea,Kb){if(0>ea||W.byteLength<
ea)throw new RangeError('"offset" is outside of buffer bounds');if(W.byteLength<ea+(Kb||0))throw new RangeError('"length" is outside of buffer bounds');W=void 0===ea&&void 0===Kb?new Uint8Array(W):void 0===Kb?new Uint8Array(W,ea):new Uint8Array(W,ea,Kb);Object.setPrototypeOf(W,c.prototype);return W}function n(W){if(c.isBuffer(W)){var ea=p(W.length)|0,Kb=b(ea);if(0===Kb.length)return Kb;W.copy(Kb,0,0,ea);return Kb}if(void 0!==W.length)return(ea="number"!==typeof W.length)||(ea=W.length,ea=ea!==ea),
ea?b(0):f(W);if("Buffer"===W.type&&Array.isArray(W.data))return f(W.data)}function p(W){if(W>=Va)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Va.toString(16)+" bytes");return W|0}function q(W,ea){if(c.isBuffer(W))return W.length;if(ArrayBuffer.isView(W)||Ac(W,ArrayBuffer))return W.byteLength;if("string"!==typeof W)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+ad(W));var Kb=W.length,V=2<arguments.length&&
!0===arguments[2];if(!V&&0===Kb)return 0;for(var Oa=!1;;)switch(ea){case "ascii":case "latin1":case "binary":return Kb;case "utf8":case "utf-8":return rc(W).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*Kb;case "hex":return Kb>>>1;case "base64":return La.toByteArray(xa(W)).length;default:if(Oa)return V?-1:rc(W).length;ea=(""+ea).toLowerCase();Oa=!0}}function r(W,ea,Kb){var V=!1;if(void 0===ea||0>ea)ea=0;if(ea>this.length)return"";if(void 0===Kb||Kb>this.length)Kb=this.length;
if(0>=Kb)return"";Kb>>>=0;ea>>>=0;if(Kb<=ea)return"";for(W||(W="utf8");;)switch(W){case "hex":W=this.length;if(!ea||0>ea)ea=0;if(!Kb||0>Kb||Kb>W)Kb=W;for(W="";ea<Kb;++ea)W+=za[this[ea]];return W;case "utf8":case "utf-8":return D(this,ea,Kb);case "ascii":W="";for(Kb=Math.min(this.length,Kb);ea<Kb;++ea)W+=String.fromCharCode(this[ea]&127);return W;case "latin1":case "binary":W="";for(Kb=Math.min(this.length,Kb);ea<Kb;++ea)W+=String.fromCharCode(this[ea]);return W;case "base64":return ea=0===ea&&Kb===
this.length?La.fromByteArray(this):La.fromByteArray(this.slice(ea,Kb)),ea;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":ea=this.slice(ea,Kb);Kb="";for(W=0;W<ea.length-1;W+=2)Kb+=String.fromCharCode(ea[W]+256*ea[W+1]);return Kb;default:if(V)throw new TypeError("Unknown encoding: "+W);W=(W+"").toLowerCase();V=!0}}function u(W,ea,Kb){var V=W[ea];W[ea]=W[Kb];W[Kb]=V}function x(W,ea,Kb,V,Oa){if(0===W.length)return-1;"string"===typeof Kb?(V=Kb,Kb=0):2147483647<Kb?Kb=2147483647:-2147483648>Kb&&
(Kb=-2147483648);Kb=+Kb;Kb!==Kb&&(Kb=Oa?0:W.length-1);0>Kb&&(Kb=W.length+Kb);if(Kb>=W.length){if(Oa)return-1;Kb=W.length-1}else if(0>Kb)if(Oa)Kb=0;else return-1;"string"===typeof ea&&(ea=c.from(ea,V));if(c.isBuffer(ea))return 0===ea.length?-1:y(W,ea,Kb,V,Oa);if("number"===typeof ea)return ea&=255,"function"===typeof Uint8Array.prototype.indexOf?Oa?Uint8Array.prototype.indexOf.call(W,ea,Kb):Uint8Array.prototype.lastIndexOf.call(W,ea,Kb):y(W,[ea],Kb,V,Oa);throw new TypeError("val must be string, number or Buffer");
}function y(W,ea,Kb,V,Oa){function U(Je,rf){return 1===fd?Je[rf]:Je.readUInt16BE(rf*fd)}var fd=1,Td=W.length,nf=ea.length;if(void 0!==V&&(V=String(V).toLowerCase(),"ucs2"===V||"ucs-2"===V||"utf16le"===V||"utf-16le"===V)){if(2>W.length||2>ea.length)return-1;fd=2;Td/=2;nf/=2;Kb/=2}if(Oa)for(V=-1;Kb<Td;Kb++)if(U(W,Kb)===U(ea,-1===V?0:Kb-V)){if(-1===V&&(V=Kb),Kb-V+1===nf)return V*fd}else-1!==V&&(Kb-=Kb-V),V=-1;else for(Kb+nf>Td&&(Kb=Td-nf);0<=Kb;Kb--){Td=!0;for(V=0;V<nf;V++)if(U(W,Kb+V)!==U(ea,V)){Td=
!1;break}if(Td)return Kb}return-1}function D(W,ea,Kb){Kb=Math.min(W.length,Kb);for(var V=[];ea<Kb;){var Oa=W[ea],U=null,fd=239<Oa?4:223<Oa?3:191<Oa?2:1;if(ea+fd<=Kb)switch(fd){case 1:128>Oa&&(U=Oa);break;case 2:var Td=W[ea+1];128===(Td&192)&&(Oa=(Oa&31)<<6|Td&63,127<Oa&&(U=Oa));break;case 3:Td=W[ea+1];var nf=W[ea+2];128===(Td&192)&&128===(nf&192)&&(Oa=(Oa&15)<<12|(Td&63)<<6|nf&63,2047<Oa&&(55296>Oa||57343<Oa)&&(U=Oa));break;case 4:Td=W[ea+1];nf=W[ea+2];var Je=W[ea+3];128===(Td&192)&&128===(nf&192)&&
128===(Je&192)&&(Oa=(Oa&15)<<18|(Td&63)<<12|(nf&63)<<6|Je&63,65535<Oa&&1114112>Oa&&(U=Oa))}null===U?(U=65533,fd=1):65535<U&&(U-=65536,V.push(U>>>10&1023|55296),U=56320|U&1023);V.push(U);ea+=fd}W=V.length;if(W<=yd)V=String.fromCharCode.apply(String,V);else{Kb="";for(ea=0;ea<W;)Kb+=String.fromCharCode.apply(String,V.slice(ea,ea+=yd));V=Kb}return V}function H(W,ea,Kb){if(0!==W%1||0>W)throw new RangeError("offset is not uint");if(W+ea>Kb)throw new RangeError("Trying to access beyond buffer length");}
function I(W,ea,Kb,V,Oa,U){if(!c.isBuffer(W))throw new TypeError('"buffer" argument must be a Buffer instance');if(ea>Oa||ea<U)throw new RangeError('"value" argument is out of bounds');if(Kb+V>W.length)throw new RangeError("Index out of range");}function N(W,ea,Kb,V,Oa){mc(ea,V,Oa,W,Kb,7);V=Number(ea&BigInt(4294967295));W[Kb++]=V;V>>=8;W[Kb++]=V;V>>=8;W[Kb++]=V;W[Kb++]=V>>8;ea=Number(ea>>BigInt(32)&BigInt(4294967295));W[Kb++]=ea;ea>>=8;W[Kb++]=ea;ea>>=8;W[Kb++]=ea;W[Kb++]=ea>>8;return Kb}function J(W,
ea,Kb,V,Oa){mc(ea,V,Oa,W,Kb,7);V=Number(ea&BigInt(4294967295));W[Kb+7]=V;V>>=8;W[Kb+6]=V;V>>=8;W[Kb+5]=V;W[Kb+4]=V>>8;ea=Number(ea>>BigInt(32)&BigInt(4294967295));W[Kb+3]=ea;ea>>=8;W[Kb+2]=ea;ea>>=8;W[Kb+1]=ea;W[Kb]=ea>>8;return Kb+8}function sa(W,ea,Kb,V,Oa,U){if(Kb+V>W.length)throw new RangeError("Index out of range");if(0>Kb)throw new RangeError("Index out of range");}function ja(W,ea,Kb,V,Oa){ea=+ea;Kb>>>=0;Oa||sa(W,ea,Kb,4);Fd.write(W,ea,Kb,V,23,4);return Kb+4}function Ha(W,ea,Kb,V,Oa){ea=+ea;
Kb>>>=0;Oa||sa(W,ea,Kb,8);Fd.write(W,ea,Kb,V,52,8);return Kb+8}function Qa(W,ea,Kb){me[W]=function(V){function Oa(){Sd(this,Oa);var fd=U.call(this);Object.defineProperty(Od(fd),"message",{value:ea.apply(Od(fd),arguments),writable:!0,configurable:!0});fd.name="".concat(fd.name," [").concat(W,"]");fd.stack;delete fd.name;return fd}vd(Oa,V);var U=qb(Oa);uc(Oa,[{key:"toString",value:function(){return"".concat(this.name," [").concat(W,"]: ").concat(this.message)}},{key:"code",get:function(){return W},
set:function(fd){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:fd,writable:!0})}}]);return Oa}(Kb)}function ec(W){for(var ea="",Kb=W.length,V="-"===W[0]?1:0;Kb>=V+4;Kb-=3)ea="_".concat(W.slice(Kb-3,Kb)).concat(ea);return"".concat(W.slice(0,Kb)).concat(ea)}function mc(W,ea,Kb,V,Oa,U){if(W>Kb||W<ea)throw V="bigint"===typeof ea?"n":"",ea=3<U?0===ea||ea===BigInt(0)?">= 0".concat(V," and < 2").concat(V," ** ").concat(8*(U+1)).concat(V):">= -(2".concat(V," ** ").concat(8*(U+1)-
1).concat(V,") and < 2 ** ")+"".concat(8*(U+1)-1).concat(V):">= ".concat(ea).concat(V," and <= ").concat(Kb).concat(V),new me.ERR_OUT_OF_RANGE("value",ea,W);hc(Oa,"offset");void 0!==V[Oa]&&void 0!==V[Oa+U]||Ua(Oa,V.length-(U+1))}function hc(W,ea){if("number"!==typeof W)throw new me.ERR_INVALID_ARG_TYPE(ea,"number",W);}function Ua(W,ea,Kb){if(Math.floor(W)!==W)throw hc(W,Kb),new me.ERR_OUT_OF_RANGE(Kb||"offset","an integer",W);if(0>ea)throw new me.ERR_BUFFER_OUT_OF_BOUNDS;throw new me.ERR_OUT_OF_RANGE(Kb||
"offset",">= ".concat(Kb?1:0," and <= ").concat(ea),W);}function xa(W){W=W.split("=")[0];W=W.trim().replace(ta,"");if(2>W.length)return"";for(;0!==W.length%4;)W+="=";return W}function rc(W,ea){ea=ea||Infinity;for(var Kb,V=W.length,Oa=null,U=[],fd=0;fd<V;++fd){Kb=W.charCodeAt(fd);if(55295<Kb&&57344>Kb){if(!Oa){if(56319<Kb){-1<(ea-=3)&&U.push(239,191,189);continue}else if(fd+1===V){-1<(ea-=3)&&U.push(239,191,189);continue}Oa=Kb;continue}if(56320>Kb){-1<(ea-=3)&&U.push(239,191,189);Oa=Kb;continue}Kb=
(Oa-55296<<10|Kb-56320)+65536}else Oa&&-1<(ea-=3)&&U.push(239,191,189);Oa=null;if(128>Kb){if(0>--ea)break;U.push(Kb)}else if(2048>Kb){if(0>(ea-=2))break;U.push(Kb>>6|192,Kb&63|128)}else if(65536>Kb){if(0>(ea-=3))break;U.push(Kb>>12|224,Kb>>6&63|128,Kb&63|128)}else if(1114112>Kb){if(0>(ea-=4))break;U.push(Kb>>18|240,Kb>>12&63|128,Kb>>6&63|128,Kb&63|128)}else throw Error("Invalid code point");}return U}function Lb(W,ea,Kb,V){var Oa;for(Oa=0;Oa<V&&!(Oa+Kb>=ea.length||Oa>=W.length);++Oa)ea[Oa+Kb]=W[Oa];
return Oa}function Ac(W,ea){return W instanceof ea||null!=W&&null!=W.constructor&&null!=W.constructor.name&&W.constructor.name===ea.name}function Xb(W){return"undefined"===typeof BigInt?qd:W}function qd(){throw Error("BigInt not supported");}if(VU)return Ct;VU=!0;var La=k_(),Fd=l_(),na="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;Ct.Buffer=c;Ct.SlowBuffer=function(W){+W!=W&&(W=0);return c.alloc(+W)};Ct.INSPECT_MAX_BYTES=50;var Va=2147483647;
Ct.kMaxLength=Va;c.TYPED_ARRAY_SUPPORT=function(){try{var W=new Uint8Array(1),ea={foo:function(){return 42}};Object.setPrototypeOf(ea,Uint8Array.prototype);Object.setPrototypeOf(W,ea);return 42===W.foo()}catch(Kb){return!1}}();c.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(c.prototype,
"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}});Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});c.poolSize=8192;c.from=function(W,ea,Kb){return g(W,ea,Kb)};Object.setPrototypeOf(c.prototype,Uint8Array.prototype);Object.setPrototypeOf(c,Uint8Array);c.alloc=function(W,ea,Kb){a(W);W=0>=W?b(W):void 0!==ea?"string"===typeof Kb?b(W).fill(ea,Kb):b(W).fill(ea):b(W);return W};c.allocUnsafe=function(W){return d(W)};
c.allocUnsafeSlow=function(W){return d(W)};c.isBuffer=function(W){return null!=W&&!0===W._isBuffer&&W!==c.prototype};c.compare=function(W,ea){Ac(W,Uint8Array)&&(W=c.from(W,W.offset,W.byteLength));Ac(ea,Uint8Array)&&(ea=c.from(ea,ea.offset,ea.byteLength));if(!c.isBuffer(W)||!c.isBuffer(ea))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(W===ea)return 0;for(var Kb=W.length,V=ea.length,Oa=0,U=Math.min(Kb,V);Oa<U;++Oa)if(W[Oa]!==ea[Oa]){Kb=W[Oa];V=ea[Oa];
break}return Kb<V?-1:V<Kb?1:0};c.isEncoding=function(W){switch(String(W).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};c.concat=function(W,ea){if(!Array.isArray(W))throw new TypeError('"list" argument must be an Array of Buffers');if(0===W.length)return c.alloc(0);var Kb;if(void 0===ea)for(Kb=ea=0;Kb<W.length;++Kb)ea+=W[Kb].length;ea=c.allocUnsafe(ea);var V=
0;for(Kb=0;Kb<W.length;++Kb){var Oa=W[Kb];if(Ac(Oa,Uint8Array))V+Oa.length>ea.length?(c.isBuffer(Oa)||(Oa=c.from(Oa)),Oa.copy(ea,V)):Uint8Array.prototype.set.call(ea,Oa,V);else if(c.isBuffer(Oa))Oa.copy(ea,V);else throw new TypeError('"list" argument must be an Array of Buffers');V+=Oa.length}return ea};c.byteLength=q;c.prototype._isBuffer=!0;c.prototype.swap16=function(){var W=this.length;if(0!==W%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ea=0;ea<W;ea+=2)u(this,
ea,ea+1);return this};c.prototype.swap32=function(){var W=this.length;if(0!==W%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ea=0;ea<W;ea+=4)u(this,ea,ea+3),u(this,ea+1,ea+2);return this};c.prototype.swap64=function(){var W=this.length;if(0!==W%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ea=0;ea<W;ea+=8)u(this,ea,ea+7),u(this,ea+1,ea+6),u(this,ea+2,ea+5),u(this,ea+3,ea+4);return this};c.prototype.toString=function(){var W=this.length;return 0===
W?"":0===arguments.length?D(this,0,W):r.apply(this,arguments)};c.prototype.toLocaleString=c.prototype.toString;c.prototype.equals=function(W){if(!c.isBuffer(W))throw new TypeError("Argument must be a Buffer");return this===W?!0:0===c.compare(this,W)};c.prototype.inspect=function(){var W=Ct.INSPECT_MAX_BYTES;var ea=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim();this.length>W&&(ea+=" ... ");return"<Buffer "+ea+">"};na&&(c.prototype[na]=c.prototype.inspect);c.prototype.compare=function(W,ea,
Kb,V,Oa){Ac(W,Uint8Array)&&(W=c.from(W,W.offset,W.byteLength));if(!c.isBuffer(W))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+ad(W));void 0===ea&&(ea=0);void 0===Kb&&(Kb=W?W.length:0);void 0===V&&(V=0);void 0===Oa&&(Oa=this.length);if(0>ea||Kb>W.length||0>V||Oa>this.length)throw new RangeError("out of range index");if(V>=Oa&&ea>=Kb)return 0;if(V>=Oa)return-1;if(ea>=Kb)return 1;ea>>>=0;Kb>>>=0;V>>>=0;Oa>>>=0;if(this===W)return 0;var U=Oa-V,fd=
Kb-ea,Td=Math.min(U,fd);V=this.slice(V,Oa);W=W.slice(ea,Kb);for(ea=0;ea<Td;++ea)if(V[ea]!==W[ea]){U=V[ea];fd=W[ea];break}return U<fd?-1:fd<U?1:0};c.prototype.includes=function(W,ea,Kb){return-1!==this.indexOf(W,ea,Kb)};c.prototype.indexOf=function(W,ea,Kb){return x(this,W,ea,Kb,!0)};c.prototype.lastIndexOf=function(W,ea,Kb){return x(this,W,ea,Kb,!1)};c.prototype.write=function(W,ea,Kb,V){if(void 0===ea)V="utf8",Kb=this.length,ea=0;else if(void 0===Kb&&"string"===typeof ea)V=ea,Kb=this.length,ea=0;
else if(isFinite(ea))ea>>>=0,isFinite(Kb)?(Kb>>>=0,void 0===V&&(V="utf8")):(V=Kb,Kb=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Oa=this.length-ea;if(void 0===Kb||Kb>Oa)Kb=Oa;if(0<W.length&&(0>Kb||0>ea)||ea>this.length)throw new RangeError("Attempt to write outside buffer bounds");V||(V="utf8");for(Oa=!1;;)switch(V){case "hex":a:{ea=Number(ea)||0;V=this.length-ea;Kb?(Kb=Number(Kb),Kb>V&&(Kb=V)):Kb=V;V=W.length;Kb>V/2&&(Kb=V/2);for(V=0;V<Kb;++V){Oa=
parseInt(W.substr(2*V,2),16);if(Oa!==Oa){W=V;break a}this[ea+V]=Oa}W=V}return W;case "utf8":case "utf-8":return Lb(rc(W,this.length-ea),this,ea,Kb);case "ascii":case "latin1":case "binary":V=[];for(Oa=0;Oa<W.length;++Oa)V.push(W.charCodeAt(Oa)&255);return Lb(V,this,ea,Kb);case "base64":return Lb(La.toByteArray(xa(W)),this,ea,Kb);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":V=W;Oa=this.length-ea;for(var U=[],fd=0;fd<V.length&&!(0>(Oa-=2));++fd){var Td=V.charCodeAt(fd);W=Td>>8;Td%=256;U.push(Td);
U.push(W)}return Lb(U,this,ea,Kb);default:if(Oa)throw new TypeError("Unknown encoding: "+V);V=(""+V).toLowerCase();Oa=!0}};c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var yd=4096;c.prototype.slice=function(W,ea){var Kb=this.length;W=~~W;ea=void 0===ea?Kb:~~ea;0>W?(W+=Kb,0>W&&(W=0)):W>Kb&&(W=Kb);0>ea?(ea+=Kb,0>ea&&(ea=0)):ea>Kb&&(ea=Kb);ea<W&&(ea=W);W=this.subarray(W,ea);Object.setPrototypeOf(W,c.prototype);return W};c.prototype.readUintLE=
c.prototype.readUIntLE=function(W,ea,Kb){W>>>=0;ea>>>=0;Kb||H(W,ea,this.length);Kb=this[W];for(var V=1,Oa=0;++Oa<ea&&(V*=256);)Kb+=this[W+Oa]*V;return Kb};c.prototype.readUintBE=c.prototype.readUIntBE=function(W,ea,Kb){W>>>=0;ea>>>=0;Kb||H(W,ea,this.length);Kb=this[W+--ea];for(var V=1;0<ea&&(V*=256);)Kb+=this[W+--ea]*V;return Kb};c.prototype.readUint8=c.prototype.readUInt8=function(W,ea){W>>>=0;ea||H(W,1,this.length);return this[W]};c.prototype.readUint16LE=c.prototype.readUInt16LE=function(W,ea){W>>>=
0;ea||H(W,2,this.length);return this[W]|this[W+1]<<8};c.prototype.readUint16BE=c.prototype.readUInt16BE=function(W,ea){W>>>=0;ea||H(W,2,this.length);return this[W]<<8|this[W+1]};c.prototype.readUint32LE=c.prototype.readUInt32LE=function(W,ea){W>>>=0;ea||H(W,4,this.length);return(this[W]|this[W+1]<<8|this[W+2]<<16)+16777216*this[W+3]};c.prototype.readUint32BE=c.prototype.readUInt32BE=function(W,ea){W>>>=0;ea||H(W,4,this.length);return 16777216*this[W]+(this[W+1]<<16|this[W+2]<<8|this[W+3])};c.prototype.readBigUInt64LE=
Xb(function(W){W>>>=0;hc(W,"offset");var ea=this[W],Kb=this[W+7];void 0!==ea&&void 0!==Kb||Ua(W,this.length-8);ea=ea+this[++W]*Math.pow(2,8)+this[++W]*Math.pow(2,16)+this[++W]*Math.pow(2,24);W=this[++W]+this[++W]*Math.pow(2,8)+this[++W]*Math.pow(2,16)+Kb*Math.pow(2,24);return BigInt(ea)+(BigInt(W)<<BigInt(32))});c.prototype.readBigUInt64BE=Xb(function(W){W>>>=0;hc(W,"offset");var ea=this[W],Kb=this[W+7];void 0!==ea&&void 0!==Kb||Ua(W,this.length-8);ea=ea*Math.pow(2,24)+this[++W]*Math.pow(2,16)+this[++W]*
Math.pow(2,8)+this[++W];W=this[++W]*Math.pow(2,24)+this[++W]*Math.pow(2,16)+this[++W]*Math.pow(2,8)+Kb;return(BigInt(ea)<<BigInt(32))+BigInt(W)});c.prototype.readIntLE=function(W,ea,Kb){W>>>=0;ea>>>=0;Kb||H(W,ea,this.length);Kb=this[W];for(var V=1,Oa=0;++Oa<ea&&(V*=256);)Kb+=this[W+Oa]*V;Kb>=128*V&&(Kb-=Math.pow(2,8*ea));return Kb};c.prototype.readIntBE=function(W,ea,Kb){W>>>=0;ea>>>=0;Kb||H(W,ea,this.length);Kb=ea;for(var V=1,Oa=this[W+--Kb];0<Kb&&(V*=256);)Oa+=this[W+--Kb]*V;Oa>=128*V&&(Oa-=Math.pow(2,
8*ea));return Oa};c.prototype.readInt8=function(W,ea){W>>>=0;ea||H(W,1,this.length);return this[W]&128?-1*(255-this[W]+1):this[W]};c.prototype.readInt16LE=function(W,ea){W>>>=0;ea||H(W,2,this.length);W=this[W]|this[W+1]<<8;return W&32768?W|4294901760:W};c.prototype.readInt16BE=function(W,ea){W>>>=0;ea||H(W,2,this.length);W=this[W+1]|this[W]<<8;return W&32768?W|4294901760:W};c.prototype.readInt32LE=function(W,ea){W>>>=0;ea||H(W,4,this.length);return this[W]|this[W+1]<<8|this[W+2]<<16|this[W+3]<<24};
c.prototype.readInt32BE=function(W,ea){W>>>=0;ea||H(W,4,this.length);return this[W]<<24|this[W+1]<<16|this[W+2]<<8|this[W+3]};c.prototype.readBigInt64LE=Xb(function(W){W>>>=0;hc(W,"offset");var ea=this[W],Kb=this[W+7];void 0!==ea&&void 0!==Kb||Ua(W,this.length-8);return(BigInt(this[W+4]+this[W+5]*Math.pow(2,8)+this[W+6]*Math.pow(2,16)+(Kb<<24))<<BigInt(32))+BigInt(ea+this[++W]*Math.pow(2,8)+this[++W]*Math.pow(2,16)+this[++W]*Math.pow(2,24))});c.prototype.readBigInt64BE=Xb(function(W){W>>>=0;hc(W,
"offset");var ea=this[W],Kb=this[W+7];void 0!==ea&&void 0!==Kb||Ua(W,this.length-8);ea=(ea<<24)+this[++W]*Math.pow(2,16)+this[++W]*Math.pow(2,8)+this[++W];return(BigInt(ea)<<BigInt(32))+BigInt(this[++W]*Math.pow(2,24)+this[++W]*Math.pow(2,16)+this[++W]*Math.pow(2,8)+Kb)});c.prototype.readFloatLE=function(W,ea){W>>>=0;ea||H(W,4,this.length);return Fd.read(this,W,!0,23,4)};c.prototype.readFloatBE=function(W,ea){W>>>=0;ea||H(W,4,this.length);return Fd.read(this,W,!1,23,4)};c.prototype.readDoubleLE=function(W,
ea){W>>>=0;ea||H(W,8,this.length);return Fd.read(this,W,!0,52,8)};c.prototype.readDoubleBE=function(W,ea){W>>>=0;ea||H(W,8,this.length);return Fd.read(this,W,!1,52,8)};c.prototype.writeUintLE=c.prototype.writeUIntLE=function(W,ea,Kb,V){W=+W;ea>>>=0;Kb>>>=0;V||I(this,W,ea,Kb,Math.pow(2,8*Kb)-1,0);V=1;var Oa=0;for(this[ea]=W&255;++Oa<Kb&&(V*=256);)this[ea+Oa]=W/V&255;return ea+Kb};c.prototype.writeUintBE=c.prototype.writeUIntBE=function(W,ea,Kb,V){W=+W;ea>>>=0;Kb>>>=0;V||I(this,W,ea,Kb,Math.pow(2,8*
Kb)-1,0);V=Kb-1;var Oa=1;for(this[ea+V]=W&255;0<=--V&&(Oa*=256);)this[ea+V]=W/Oa&255;return ea+Kb};c.prototype.writeUint8=c.prototype.writeUInt8=function(W,ea,Kb){W=+W;ea>>>=0;Kb||I(this,W,ea,1,255,0);this[ea]=W&255;return ea+1};c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(W,ea,Kb){W=+W;ea>>>=0;Kb||I(this,W,ea,2,65535,0);this[ea]=W&255;this[ea+1]=W>>>8;return ea+2};c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(W,ea,Kb){W=+W;ea>>>=0;Kb||I(this,W,ea,2,65535,0);this[ea]=
W>>>8;this[ea+1]=W&255;return ea+2};c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(W,ea,Kb){W=+W;ea>>>=0;Kb||I(this,W,ea,4,4294967295,0);this[ea+3]=W>>>24;this[ea+2]=W>>>16;this[ea+1]=W>>>8;this[ea]=W&255;return ea+4};c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(W,ea,Kb){W=+W;ea>>>=0;Kb||I(this,W,ea,4,4294967295,0);this[ea]=W>>>24;this[ea+1]=W>>>16;this[ea+2]=W>>>8;this[ea+3]=W&255;return ea+4};c.prototype.writeBigUInt64LE=Xb(function(W){return N(this,W,1<arguments.length&&
void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))});c.prototype.writeBigUInt64BE=Xb(function(W){return J(this,W,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))});c.prototype.writeIntLE=function(W,ea,Kb,V){W=+W;ea>>>=0;V||(V=Math.pow(2,8*Kb-1),I(this,W,ea,Kb,V-1,-V));V=0;var Oa=1,U=0;for(this[ea]=W&255;++V<Kb&&(Oa*=256);)0>W&&0===U&&0!==this[ea+V-1]&&(U=1),this[ea+V]=(W/Oa>>0)-U&255;return ea+Kb};c.prototype.writeIntBE=function(W,
ea,Kb,V){W=+W;ea>>>=0;V||(V=Math.pow(2,8*Kb-1),I(this,W,ea,Kb,V-1,-V));V=Kb-1;var Oa=1,U=0;for(this[ea+V]=W&255;0<=--V&&(Oa*=256);)0>W&&0===U&&0!==this[ea+V+1]&&(U=1),this[ea+V]=(W/Oa>>0)-U&255;return ea+Kb};c.prototype.writeInt8=function(W,ea,Kb){W=+W;ea>>>=0;Kb||I(this,W,ea,1,127,-128);0>W&&(W=255+W+1);this[ea]=W&255;return ea+1};c.prototype.writeInt16LE=function(W,ea,Kb){W=+W;ea>>>=0;Kb||I(this,W,ea,2,32767,-32768);this[ea]=W&255;this[ea+1]=W>>>8;return ea+2};c.prototype.writeInt16BE=function(W,
ea,Kb){W=+W;ea>>>=0;Kb||I(this,W,ea,2,32767,-32768);this[ea]=W>>>8;this[ea+1]=W&255;return ea+2};c.prototype.writeInt32LE=function(W,ea,Kb){W=+W;ea>>>=0;Kb||I(this,W,ea,4,2147483647,-2147483648);this[ea]=W&255;this[ea+1]=W>>>8;this[ea+2]=W>>>16;this[ea+3]=W>>>24;return ea+4};c.prototype.writeInt32BE=function(W,ea,Kb){W=+W;ea>>>=0;Kb||I(this,W,ea,4,2147483647,-2147483648);0>W&&(W=4294967295+W+1);this[ea]=W>>>24;this[ea+1]=W>>>16;this[ea+2]=W>>>8;this[ea+3]=W&255;return ea+4};c.prototype.writeBigInt64LE=
Xb(function(W){return N(this,W,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});c.prototype.writeBigInt64BE=Xb(function(W){return J(this,W,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});c.prototype.writeFloatLE=function(W,ea,Kb){return ja(this,W,ea,!0,Kb)};c.prototype.writeFloatBE=function(W,ea,Kb){return ja(this,W,ea,!1,Kb)};c.prototype.writeDoubleLE=function(W,
ea,Kb){return Ha(this,W,ea,!0,Kb)};c.prototype.writeDoubleBE=function(W,ea,Kb){return Ha(this,W,ea,!1,Kb)};c.prototype.copy=function(W,ea,Kb,V){if(!c.isBuffer(W))throw new TypeError("argument should be a Buffer");Kb||(Kb=0);V||0===V||(V=this.length);ea>=W.length&&(ea=W.length);ea||(ea=0);0<V&&V<Kb&&(V=Kb);if(V===Kb||0===W.length||0===this.length)return 0;if(0>ea)throw new RangeError("targetStart out of bounds");if(0>Kb||Kb>=this.length)throw new RangeError("Index out of range");if(0>V)throw new RangeError("sourceEnd out of bounds");
V>this.length&&(V=this.length);W.length-ea<V-Kb&&(V=W.length-ea+Kb);var Oa=V-Kb;this===W&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(ea,Kb,V):Uint8Array.prototype.set.call(W,this.subarray(Kb,V),ea);return Oa};c.prototype.fill=function(W,ea,Kb,V){if("string"===typeof W){"string"===typeof ea?(V=ea,ea=0,Kb=this.length):"string"===typeof Kb&&(V=Kb,Kb=this.length);if(void 0!==V&&"string"!==typeof V)throw new TypeError("encoding must be a string");if("string"===typeof V&&!c.isEncoding(V))throw new TypeError("Unknown encoding: "+
V);if(1===W.length){var Oa=W.charCodeAt(0);if("utf8"===V&&128>Oa||"latin1"===V)W=Oa}}else"number"===typeof W?W&=255:"boolean"===typeof W&&(W=Number(W));if(0>ea||this.length<ea||this.length<Kb)throw new RangeError("Out of range index");if(Kb<=ea)return this;ea>>>=0;Kb=void 0===Kb?this.length:Kb>>>0;W||(W=0);if("number"===typeof W)for(V=ea;V<Kb;++V)this[V]=W;else{Oa=c.isBuffer(W)?W:c.from(W,V);var U=Oa.length;if(0===U)throw new TypeError('The value "'+W+'" is invalid for argument "value"');for(V=0;V<
Kb-ea;++V)this[V+ea]=Oa[V%U]}return this};var me={};Qa("ERR_BUFFER_OUT_OF_BOUNDS",function(W){return W?"".concat(W," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError);Qa("ERR_INVALID_ARG_TYPE",function(W,ea){return'The "'.concat(W,'" argument must be of type number. Received type ').concat(ad(ea))},TypeError);Qa("ERR_OUT_OF_RANGE",function(W,ea,Kb){W='The value of "'.concat(W,'" is out of range.');var V=Kb;if(Number.isInteger(Kb)&&Math.abs(Kb)>Math.pow(2,
32))V=ec(String(Kb));else if("bigint"===typeof Kb){V=String(Kb);if(Kb>Math.pow(BigInt(2),BigInt(32))||Kb<-Math.pow(BigInt(2),BigInt(32)))V=ec(V);V+="n"}return W+=" It must be ".concat(ea,". Received ").concat(V)},RangeError);var ta=/[^+/0-9A-Za-z-_]/g,za=function(){for(var W=Array(256),ea=0;16>ea;++ea)for(var Kb=16*ea,V=0;16>V;++V)W[Kb+V]="0123456789abcdef"[ea]+"0123456789abcdef"[V];return W}();return Ct}();Ps.Buffer;Ps.INSPECT_MAX_BYTES;Ps.kMaxLength;var JO={},IO=!1,MO={},LO=!1,OO={},NO=!1,RO={},
QO=!1,LE={},SO=!1,VO={},UO=!1,XO={},WO=!1,ME="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,NE={},ZO=!1,o_="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,OE={},$O=!1,cP={},bP=!1,eP={},dP=!1,gP={},fP=!1,RE={},hP=!1,r_="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,SE={},jP=!1,TE={},kP=!1,mP={},lP=!1,iI={},WU=!1,jI="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,yn=
function(){function b(){c.call(this||jI)}if(WU)return iI;WU=!0;iI=b;var c=Dl.EventEmitter;Nu()(b,c);b.Readable=aP();b.Writable=YO();b.Duplex=Pu();b.Transform=iP();b.PassThrough=s_();b.finished=PE();b.pipeline=t_();b.Stream=b;b.prototype.pipe=function(g,a){function d(x){g.writable&&!1===g.write(x)&&r.pause&&r.pause()}function f(){r.readable&&r.resume&&r.resume()}function k(){u||(u=!0,g.end())}function n(){u||(u=!0,"function"===typeof g.destroy&&g.destroy())}function p(x){q();if(0===c.listenerCount(this||
jI,"error"))throw x;}function q(){r.removeListener("data",d);g.removeListener("drain",f);r.removeListener("end",k);r.removeListener("close",n);r.removeListener("error",p);g.removeListener("error",p);r.removeListener("end",q);r.removeListener("close",q);g.removeListener("close",q)}var r=this||jI;r.on("data",d);g.on("drain",f);g._isStdio||a&&!1===a.end||(r.on("end",k),r.on("close",n));var u=!1;r.on("error",p);g.on("error",p);r.on("end",q);r.on("close",q);g.on("close",q);g.emit("pipe",r);return g};return iI}(),
XU=yn.Readable;XU.wrap=function(b,c){c=Object.assign({objectMode:null!=b.readableObjectMode||null!=b.objectMode||!0},c);c.destroy=function(g,a){b.destroy(g);a(g)};return(new XU(c)).wrap(b)};yn.Writable;yn.Duplex;yn.Transform;yn.PassThrough;yn.finished;yn.pipeline;yn.Stream;rU(yn.finished);rU(yn.pipeline);var f6={},x_=f6=Array.isArray||function(b){return"[object Array]"==Object.prototype.toString.call(b)},Kl={isArray:function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)},
isBoolean:function(b){return"boolean"===typeof b},isNull:function(b){return null===b},isNullOrUndefined:function(b){return null==b},isNumber:function(b){return"number"===typeof b},isString:function(b){return"string"===typeof b},isSymbol:function(b){return"symbol"===typeof b},isUndefined:function(b){return void 0===b},isRegExp:function(b){return"[object RegExp]"===Object.prototype.toString.call(b)},isObject:function(b){return"object"===typeof b&&null!==b},isDate:function(b){return"[object Date]"===
Object.prototype.toString.call(b)},isError:function(b){return"[object Error]"===Object.prototype.toString.call(b)||b instanceof Error},isFunction:function(b){return"function"===typeof b},isPrimitive:function(b){return null===b||"boolean"===typeof b||"number"===typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b}};Kl.isBuffer=("default"in vU?rl:vU).Buffer.isBuffer;Kl.isBuffer;Kl.isArray;Kl.isBoolean;Kl.isNull;Kl.isNullOrUndefined;Kl.isNumber;Kl.isString;Kl.isSymbol;Kl.isUndefined;
Kl.isRegExp;Kl.isObject;Kl.isDate;Kl.isError;Kl.isFunction;Kl.isPrimitive;var Ni="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,UE={},YU=rl.Buffer,g6=YU.isEncoding||function(b){switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}},kI=UE.StringDecoder=function(b){(this||Ni).encoding=(b||"utf8").toLowerCase().replace(/[-_]/,
"");if(b&&!g6(b))throw Error("Unknown encoding: "+b);switch((this||Ni).encoding){case "utf8":(this||Ni).surrogateSize=3;break;case "ucs2":case "utf16le":(this||Ni).surrogateSize=2;(this||Ni).detectIncompleteChar=v_;break;case "base64":(this||Ni).surrogateSize=3;(this||Ni).detectIncompleteChar=w_;break;default:(this||Ni).write=u_;return}(this||Ni).charBuffer=new YU(6);(this||Ni).charReceived=0;(this||Ni).charLength=0};kI.prototype.write=function(b){for(var c="";(this||Ni).charLength;){c=b.length>=
(this||Ni).charLength-(this||Ni).charReceived?(this||Ni).charLength-(this||Ni).charReceived:b.length;b.copy((this||Ni).charBuffer,(this||Ni).charReceived,0,c);(this||Ni).charReceived+=c;if((this||Ni).charReceived<(this||Ni).charLength)return"";b=b.slice(c,b.length);c=(this||Ni).charBuffer.slice(0,(this||Ni).charLength).toString((this||Ni).encoding);var g=c.charCodeAt(c.length-1);if(55296<=g&&56319>=g)(this||Ni).charLength+=(this||Ni).surrogateSize,c="";else{(this||Ni).charReceived=(this||Ni).charLength=
0;if(0===b.length)return c;break}}this.detectIncompleteChar(b);var a=b.length;(this||Ni).charLength&&(b.copy((this||Ni).charBuffer,0,b.length-(this||Ni).charReceived,a),a-=(this||Ni).charReceived);c+=b.toString((this||Ni).encoding,0,a);a=c.length-1;g=c.charCodeAt(a);return 55296<=g&&56319>=g?(g=(this||Ni).surrogateSize,(this||Ni).charLength+=g,(this||Ni).charReceived+=g,(this||Ni).charBuffer.copy((this||Ni).charBuffer,g,0,g),b.copy((this||Ni).charBuffer,0,0,g),c.substring(0,a)):c};kI.prototype.detectIncompleteChar=
function(b){for(var c=3<=b.length?3:b.length;0<c;c--){var g=b[b.length-c];if(1==c&&6==g>>5){(this||Ni).charLength=2;break}if(2>=c&&14==g>>4){(this||Ni).charLength=3;break}if(3>=c&&30==g>>3){(this||Ni).charLength=4;break}}(this||Ni).charReceived=c};kI.prototype.end=function(b){var c="";b&&b.length&&(c=this.write(b));(this||Ni).charReceived&&(b=(this||Ni).encoding,c+=(this||Ni).charBuffer.slice(0,(this||Ni).charReceived).toString(b));return c};var VE={},oP=!1,ri="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,XE={},pP=!1,Xo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,YE={},rP=!1,qk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ZE={},tP=!1,qm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,$E={},vP=!1,uP="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,jp={},ZU=!1;const Dt=function(){if(ZU)return jp;ZU=!0;var b=yn;jp=jp=nP();jp.Stream=
b;jp.Readable=jp;jp.Writable=qP();jp.Duplex=WE();jp.Transform=sP();jp.PassThrough=y_();return jp}();Dt.Stream;Dt.Readable;Dt.Writable;Dt.Duplex;Dt.Transform;Dt.PassThrough;var h6={},B_=Yw(ck),i6=Yw(Dl),j6=Yw(b6),k6=Yw(Dt),$U=Yw(sl);$U(aF,Error);aF.prototype.name="NotFoundError";var l6=i6.EventEmitter,m6=new aF,aV=function(b,c,g,a){function d(k){var n={},p;if(a)for(p in a)"undefined"!==typeof a[p]&&(n[p]=a[p]);if(k)for(p in k)"undefined"!==typeof k[p]&&(n[p]=k[p]);return n}var f=new l6;f.sublevels=
{};f.options=a;f.version="6.5.4";f.methods={};c=c||[];f.put=function(k,n,p,q){"function"===typeof p&&(q=p,p={});b.apply([{key:k,value:n,prefix:c.slice(),type:"put"}],d(p),function(r){if(r)return q(r);f.emit("put",k,n);q(null)})};f.prefix=function(){return c.slice()};f.batch=function(k,n,p){"function"===typeof n&&(p=n,n={});k=k.map(function(q){return{key:q.key,value:q.value,prefix:q.prefix||c,keyEncoding:q.keyEncoding,valueEncoding:q.valueEncoding,type:q.type}});b.apply(k,d(n),function(q){if(q)return p(q);
f.emit("batch",k);p(null)})};f.get=function(k,n,p){"function"===typeof n&&(p=n,n={});b.get(k,c,d(n),function(q,r){q?p(m6):p(null,r)})};f.sublevel=function(k,n){return f.sublevels[k]=f.sublevels[k]||aV(b,c.concat(k),g,d(n))};f.readStream=f.createReadStream=function(k){k=d(k);k.prefix=c;var n=b.iterator(k);k=g(k,b.createDecoder(k));k.setIterator(n);return k};f.close=function(k){b.close(k)};f.isOpen=b.isOpen;f.isClosed=b.isClosed;return f},wP=k6.Readable;$U(ur,wP);ur.prototype.setIterator=function(b){this._iterator=
b;return this._destroyed?b.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this};ur.prototype._read=function(){var b=this;if(!b._destroyed){if(!b._iterator)return this._waiting=!0;b._iterator.next(function(c,g,a){if(c||void 0===g&&void 0===a)return c||b._destroyed||b.push(null),b._cleanup(c);a=b._makeData(g,a);b._destroyed||b.push(a)})}};ur.prototype._cleanup=function(b){if(!this._destroyed){this._destroyed=!0;var c=this;b&&"iterator has ended"!==b.message&&c.emit("error",b);c._iterator?
c._iterator.end(function(){c._iterator=null;c.emit("close")}):c.emit("close")}};ur.prototype.destroy=function(){this._cleanup()};var n6={encode:function(b){return"\u00ff"+b[0]+"\u00ff"+b[1]},decode:function(b){b=b.toString();var c=b.indexOf("\u00ff",1);return[b.substring(1,c),b.substring(c+1)]},lowerBound:"\x00",upperBound:"\u00ff"},o6=new j6,p6=h6=function(b){return aV(A_(b,n6,o6),[],ur,b.options)},Kq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Cv={},q6=Pl,xP=
gq.Transform,bV=Dg.inherits;bV(Qu,xP);Qu.prototype.destroy=function(b){if(!(this||Kq)._destroyed){(this||Kq)._destroyed=!0;var c=this||Kq;q6.nextTick(function(){b&&c.emit("error",b);c.emit("close")})}};Cv=bF(function(b,c,g){b=new Qu(b);b._transform=c;g&&(b._flush=g);return b});Cv.ctor=bF(function(b,c,g){function a(d){if(!((this||Kq)instanceof a))return new a(d);(this||Kq).options=Object.assign({},b,d);Qu.call(this||Kq,(this||Kq).options)}bV(a,Qu);a.prototype._transform=c;g&&(a.prototype._flush=g);
return a});Cv.obj=bF(function(b,c,g){b=new Qu(Object.assign({objectMode:!0,highWaterMark:16},b));b._transform=c;g&&(b._flush=g);return b});var cV=Cv;Cv.ctor;Cv.obj;var r6={};Ek.prototype.toArray=function(){for(var b=this._length,c=Array(b),g=this._front,a=this._capacity,d=0;d<b;++d)c[d]=this[g+d&a-1];return c};Ek.prototype.push=function(b){var c=arguments.length,g=this._length;if(1<c){var a=this._capacity;if(g+c>a){for(var d=0;d<c;++d){this._checkCapacity(g+1);var f=this._front+g&this._capacity-1;
this[f]=arguments[d];g++;this._length=g}return g}f=this._front;for(d=0;d<c;++d)this[f+g&a-1]=arguments[d],f++;this._length=g+c;return g+c}if(0===c)return g;this._checkCapacity(g+1);d=this._front+g&this._capacity-1;this[d]=b;this._length=g+1;return g+1};Ek.prototype.pop=function(){var b=this._length;if(0!==b){var c=this._front+b-1&this._capacity-1,g=this[c];this[c]=void 0;this._length=b-1;return g}};Ek.prototype.shift=function(){var b=this._length;if(0!==b){var c=this._front,g=this[c];this[c]=void 0;
this._front=c+1&this._capacity-1;this._length=b-1;return g}};Ek.prototype.unshift=function(b){var c=this._length,g=arguments.length;if(1<g){var a=this._capacity;if(c+g>a){for(var d=g-1;0<=d;d--){this._checkCapacity(c+1);a=this._capacity;var f=(this._front-1&a-1^a)-a;this[f]=arguments[d];c++;this._length=c;this._front=f}return c}f=this._front;for(d=g-1;0<=d;d--)f=(f-1&a-1^a)-a,this[f]=arguments[d];this._front=f;this._length=c+g;return c+g}if(0===g)return c;this._checkCapacity(c+1);a=this._capacity;
d=(this._front-1&a-1^a)-a;this[d]=b;this._length=c+1;this._front=d;return c+1};Ek.prototype.peekBack=function(){var b=this._length;if(0!==b)return this[this._front+b-1&this._capacity-1]};Ek.prototype.peekFront=function(){if(0!==this._length)return this[this._front]};Ek.prototype.get=function(b){if(b===(b|0)){var c=this._length;0>b&&(b+=c);if(!(0>b||b>=c))return this[this._front+b&this._capacity-1]}};Ek.prototype.isEmpty=function(){return 0===this._length};Ek.prototype.clear=function(){for(var b=this._length,
c=this._front,g=this._capacity,a=0;a<b;++a)this[c+a&g-1]=void 0;this._front=this._length=0};Ek.prototype.toString=function(){return this.toArray().toString()};Ek.prototype.valueOf=Ek.prototype.toString;Ek.prototype.removeFront=Ek.prototype.shift;Ek.prototype.removeBack=Ek.prototype.pop;Ek.prototype.insertFront=Ek.prototype.unshift;Ek.prototype.insertBack=Ek.prototype.push;Ek.prototype.enqueue=Ek.prototype.push;Ek.prototype.dequeue=Ek.prototype.shift;Ek.prototype.toJSON=Ek.prototype.toArray;Object.defineProperty(Ek.prototype,
"length",{get:function(){return this._length},set:function(){throw new RangeError("");}});Ek.prototype._checkCapacity=function(b){this._capacity<b&&this._resizeTo(yP(1.5*this._capacity+16))};Ek.prototype._resizeTo=function(b){var c=this._capacity;this._capacity=b;b=this._front;var g=this._length;if(b+g>c)for(b=b+g&c-1,g=0;g<b;++g)this[g+c]=this[g+0],this[g+0]=void 0};var zP=Array.isArray,s6=r6=Ek,t6={},hq=rl.Buffer,u6=Object.prototype.toString,lI="function"===typeof hq.alloc&&"function"===typeof hq.allocUnsafe&&
"function"===typeof hq.from,v6=t6=function(b,c,g){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("ArrayBuffer"===u6.call(b).slice(8,-1)){c>>>=0;var a=b.byteLength-c;if(0>a)throw new RangeError("'offset' is out of bounds");if(void 0===g)g=a;else if(g>>>=0,g>a)throw new RangeError("'length' is out of bounds");return lI?hq.from(b.slice(c,c+g)):new hq(new Uint8Array(b.slice(c,c+g)))}if("string"===typeof b){g=c;if("string"!==typeof g||""===g)g="utf8";if(!hq.isEncoding(g))throw new TypeError('"encoding" must be a valid string encoding');
return lI?hq.from(b,g):new hq(b,g)}return lI?hq.from(b):new hq(b)},dl={};Object.defineProperty(dl,"__esModule",{value:!0});dl.collectConflicts=function(b){var c=cF(b);b=AP(b.rev_tree);for(var g=[],a=0,d=b.length;a<d;a++){var f=b[a];f.rev===c||f.opts.deleted||g.push(f.rev)}return g};dl.collectLeaves=AP;dl.compactTree=function(b){var c=[];dA(b.rev_tree,function(g,a,d,f,k){"available"!==k.status||g||(c.push(a+"-"+d),k.status="missing")});return c};dl.isDeleted=function(b,c){c||(c=cF(b));c=c.substring(c.indexOf("-")+
1);b=b.rev_tree.map(H_);for(var g;g=b.pop();){if(g[0]===c)return!!g[1].deleted;b=b.concat(g[2])}};dl.isLocalId=function(b){return/^_local/.test(b)};dl.merge=function(b,c,g){b=EP(b,c);g=G_(b.tree,g);return{tree:g.tree,stemmedRevs:g.revs,conflicts:b.conflicts}};dl.revExists=function(b,c){b=b.slice();var g=c.split("-");c=parseInt(g[0],10);g=g[1];for(var a;a=b.pop();){if(a.pos===c&&a.ids[0]===g)return!0;for(var d=a.ids[2],f=0,k=d.length;f<k;f++)b.push({pos:a.pos+1,ids:d[f]})}return!1};dl.rootToLeaf=BP;
dl.traverseRevTree=dA;dl.winningRev=cF;dl.latest=function(b,c){for(var g=c.rev_tree.slice(),a;a=g.pop();){var d=a.pos,f=a.ids,k=f[0],n=f[1];f=f[2];var p=0===f.length;a=a.history?a.history.slice():[];a.push({id:k,pos:d,opts:n});if(p)for(n=0,p=a.length;n<p;n++){var q=a[n];if(q.pos+"-"+q.id===b)return d+"-"+k}k=0;for(n=f.length;k<n;k++)g.push({pos:d+1,ids:f[k],history:a})}throw Error("Unable to resolve latest revision for id "+c.id+", rev "+b);};dl.__esModule;dl.collectConflicts;dl.collectLeaves;dl.compactTree;
dl.isDeleted;dl.isLocalId;dl.merge;dl.revExists;dl.rootToLeaf;dl.traverseRevTree;dl.winningRev;dl.latest;var Lk={};Object.defineProperty(Lk,"__esModule",{value:!0});var Qs=Vh,Zw=Zk,IP=Tq,On=Gh,zn=dl,I_=FP("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),J_=FP("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" "));
Lk.invalidIdError=Qs.invalidIdError;Lk.normalizeDdocFunctionName=Qs.normalizeDdocFunctionName;Lk.parseDdocFunctionName=Qs.parseDdocFunctionName;Lk.isDeleted=zn.isDeleted;Lk.isLocalId=zn.isLocalId;Lk.allDocsKeysQuery=function(b,c){var g={offset:c.skip};return Promise.all(c.keys.map(function(a){var d=Qs.assign({key:a,deleted:"ok"},c);["limit","skip","keys"].forEach(function(f){delete d[f]});return new Promise(function(f,k){b._allDocs(d,function(n,p){if(n)return k(n);c.update_seq&&void 0!==p.update_seq&&
(g.update_seq=p.update_seq);g.total_rows=p.total_rows;f(p.rows[0]||{key:a,error:"not_found"})})})})).then(function(a){g.rows=a;return g})};Lk.parseDoc=HP;Lk.preprocessAttachments=function(b,c,g){function a(){d++;b.length===d&&(f?g(f):g())}if(!b.length)return g();var d=0,f;b.forEach(function(k){function n(u){f=u;q++;q===p.length&&a()}var p=k.data&&k.data._attachments?Object.keys(k.data._attachments):[],q=0;if(!p.length)return a();for(var r in k.data._attachments)k.data._attachments.hasOwnProperty(r)&&
M_(k.data._attachments[r],c,n)})};Lk.processDocs=function(b,c,g,a,d,f,k,n,p){b=b||1E3;var q=n.new_edits,r=new ip.Map,u=0,x=c.length;c.forEach(function(y,D){if(y._id&&zn.isLocalId(y._id))g[y._deleted?"_removeLocal":"_putLocal"](y,{ctx:d},function(I,N){f[D]=I||N;++u===x&&p&&p()});else{var H=y.metadata.id;r.has(H)?(x--,r.get(H).push([y,D])):r.set(H,[[y,D]])}});r.forEach(function(y,D){function H(){++N<y.length?I():++u===x&&p&&p()}function I(){var J=y[N],sa=J[0];J=J[1];if(a.has(D))JP(b,a.get(D),sa,f,J,
H,k,q);else{var ja=zn.merge([],sa.metadata.rev_tree[0],b);sa.metadata.rev_tree=ja.tree;sa.stemmedRevs=ja.stemmedRevs||[];ja=zn.winningRev(sa.metadata);var Ha=zn.isDeleted(sa.metadata,ja);"was_delete"in n&&Ha?(f[J]=On.createError(On.MISSING_DOC,"deleted"),H()):q&&"missing"===sa.metadata.rev_tree[0].ids[1].status?(sa=On.createError(On.REV_CONFLICT),f[J]=sa,H()):k(sa,ja,Ha,Ha,!1,Ha?0:1,J,H)}}var N=0;I()})};Lk.updateDoc=JP;Lk.__esModule;Lk.invalidIdError;Lk.normalizeDdocFunctionName;Lk.parseDdocFunctionName;
Lk.isDeleted;Lk.isLocalId;Lk.allDocsKeysQuery;Lk.parseDoc;Lk.preprocessAttachments;Lk.processDocs;Lk.updateDoc;var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});var dV=Sr&&"object"===typeof Sr&&"default"in Sr?Sr["default"]:Sr;Tr.safeJsonParse=function(b){try{return JSON.parse(b)}catch(c){return dV.parse(b)}};Tr.safeJsonStringify=function(b){try{return JSON.stringify(b)}catch(c){return dV.stringify(b)}};Tr.__esModule;Tr.safeJsonParse;Tr.safeJsonStringify;var w6={},x6=$w(V5),y6=$w(p6),qB=
$w(NH),z6=$w(s6),A6=$w(v6),bx=dl,ax=Zk,Yo=ip;Rs.prototype.get=function(b,c,g){var a=LP(this,b),d=a.get(c);if(d)return Vh.nextTick(function(){g(null,d)});if(null===d)return Vh.nextTick(function(){g({name:"NotFoundError"})});b.get(c,function(f,k){if(f)return"NotFoundError"===f.name&&a.set(c,null),g(f);a.set(c,k);g(null,k)})};Rs.prototype.batch=function(b){for(var c=0,g=b.length;c<g;c++){var a=b[c],d=LP(this,a.prefix);"put"===a.type?d.set(a.key,a.value):d.set(a.key,null)}this._batch=this._batch.concat(b)};
Rs.prototype.execute=function(b,c){for(var g=new Yo.Set,a=[],d=this._batch.length-1;0<=d;d--){var f=this._batch[d],k=f.prefix.prefix()[0]+"\u00ff"+f.key;g.has(k)||(g.add(k),a.push(f))}b.batch(a,c)};var iy=new Yo.Map,B6={encode:Tr.safeJsonStringify,decode:Tr.safeJsonParse,buffer:!1,type:"cheap-json"},jy=new Vh.changesHandler,C6=w6=function(b,c){function g(){H.docStore=Ha.sublevel("document-store",{valueEncoding:B6});H.bySeqStore=Ha.sublevel("by-sequence",{valueEncoding:"json"});H.attachmentStore=Ha.sublevel("attach-store",
{valueEncoding:"json"});H.binaryStore=Ha.sublevel("attach-binary-store",{valueEncoding:"binary"});H.localStore=Ha.sublevel("local-store",{valueEncoding:"json"});H.metaStore=Ha.sublevel("meta-store",{valueEncoding:"json"});"object"===typeof b.migrate?b.migrate.doMigrationTwo(Ha,H,a):a()}function a(){H.metaStore.get("_local_last_update_seq",function(Qa,ec){"undefined"===typeof Ha._updateSeq&&(Ha._updateSeq=ec||0);H.metaStore.get("_local_doc_count",function(mc,hc){Ha._docCount=mc?0:hc;H.metaStore.get("_local_uuid",
function(Ua,xa){D=Ua?Vh.uuid():xa;H.metaStore.put("_local_uuid",D,function(){Vh.nextTick(function(){c(null,y)})})})})})}function d(Qa){return Ha.isClosed()?Qa(Error("database is closed")):Qa(null,Ha._docCount)}function f(Qa,ec){try{Qa.apply(null,ec)}catch(mc){ec[ec.length-1](mc)}}function k(){var Qa=Ha._queue.peekFront();"read"===Qa.type?n(Qa):p(Qa)}function n(Qa){var ec=[Qa];Qa=1;for(var mc=Ha._queue.get(Qa);"undefined"!==typeof mc&&"read"===mc.type;)ec.push(mc),Qa++,mc=Ha._queue.get(Qa);var hc=
0;ec.forEach(function(Ua){var xa=Ua.args,rc=xa[xa.length-1];xa[xa.length-1]=qB(function(Lb){rc.apply(null,Lb);++hc===ec.length&&Vh.nextTick(function(){ec.forEach(function(){Ha._queue.shift()});Ha._queue.length&&k()})});f(Ua.fun,xa)})}function p(Qa){var ec=Qa.args,mc=ec[ec.length-1];ec[ec.length-1]=qB(function(hc){mc.apply(null,hc);Vh.nextTick(function(){Ha._queue.shift();Ha._queue.length&&k()})});f(Qa.fun,ec)}function q(Qa){return qB(function(ec){Ha._queue.push({fun:Qa,args:ec,type:"write"});1===
Ha._queue.length&&Vh.nextTick(k)})}function r(Qa){return qB(function(ec){Ha._queue.push({fun:Qa,args:ec,type:"read"});1===Ha._queue.length&&Vh.nextTick(k)})}function u(Qa){return("0000000000000000"+Qa).slice(-16)}function x(Qa,ec){"destroy"in J?J.destroy(Qa,ec):ec(null)}b=Vh.clone(b);var y=this,D,H={},I=b.revs_limit,N=b.name;"undefined"===typeof b.createIfMissing&&(b.createIfMissing=!0);var J=b.db,sa=Vh.functionName(J);if(iy.has(sa))var ja=iy.get(sa);else ja=new Yo.Map,iy.set(sa,ja);if(ja.has(N)){var Ha=
ja.get(N);g()}else ja.set(N,y6(x6(J(N),b,function(Qa){if(Qa)return ja.delete(N),c(Qa);Ha=ja.get(N);Ha._docCount=-1;Ha._queue=new z6;"object"===typeof b.migrate?b.migrate.doMigrationOne(N,Ha,g):g()})));y._remote=!1;y.type=function(){return"leveldb"};y._id=function(Qa){Qa(null,D)};y._info=function(Qa){var ec={doc_count:Ha._docCount,update_seq:Ha._updateSeq,backend_adapter:Vh.functionName(J)};return Vh.nextTick(function(){Qa(null,ec)})};y._get=r(function(Qa,ec,mc){ec=Vh.clone(ec);H.docStore.get(Qa,function(hc,
Ua){if(hc||!Ua)return mc(Gh.createError(Gh.MISSING_DOC,"missing"));if(ec.rev)var xa=ec.latest?bx.latest(ec.rev,Ua):ec.rev;else if(xa=dF(Ua),"deleted"in Ua?Ua.deleted:Lk.isDeleted(Ua,xa))return mc(Gh.createError(Gh.MISSING_DOC,"deleted"));H.bySeqStore.get(u(Ua.rev_map[xa]),function(rc,Lb){if(!Lb)return mc(Gh.createError(Gh.MISSING_DOC));if("_id"in Lb&&Lb._id!==Ua.id)return mc(Error("wrong doc returned"));Lb._id=Ua.id;if("_rev"in Lb){if(Lb._rev!==xa)return mc(Error("wrong doc returned"))}else Lb._rev=
xa;return mc(null,{doc:Lb,metadata:Ua})})})});y._getAttachment=function(Qa,ec,mc,hc,Ua){var xa=mc.content_type;H.binaryStore.get(mc.digest,function(rc,Lb){if(rc)return"NotFoundError"!==rc.name?Ua(rc):Ua(null,hc.binary?ax.blob([""],{type:xa}):"");hc.binary?Ua(null,KP(Lb,xa)):Ua(null,Lb.toString("base64"))})};y._bulkDocs=q(function(Qa,ec,mc){function hc(V,Oa){me.get(H.attachmentStore,V,function(U){U?(U=Gh.createError(Gh.MISSING_STUB,"unknown stub attachment with digest "+V),Oa(U)):Oa()})}function Ua(V){function Oa(){if(++U===
W.length)return V(fd)}var U=0,fd;W.forEach(function(Td){if(Td._id&&Lk.isLocalId(Td._id))return Oa();me.get(H.docStore,Td._id,function(nf,Je){nf?"NotFoundError"!==nf.name&&(fd=nf):Va.set(Td._id,Je);Oa()})})}function xa(V,Oa){var U=Promise.resolve();V.forEach(function(fd,Td){U=U.then(function(){return new Promise(function(nf,Je){y._doCompactionNoLock(Td,fd,{ctx:me},function(rf){if(rf)return Je(rf);nf()})})})});U.then(function(){Oa()},Oa)}function rc(V){var Oa=new Yo.Map;Va.forEach(function(U,fd){Oa.set(fd,
bx.compactTree(U))});xa(Oa,V)}function Lb(){xa(yd,function(V){V&&La(V);if(y.auto_compaction)return rc(La);La()})}function Ac(V,Oa,U,fd,Td,nf,Je,rf){function fh(pk){vk++;Fj||(pk?(Fj=pk,rf(Fj)):vk===Hl.length&&Hi())}function zi(pk,Sk,L,Ka){return function(B){qd(pk,"md5-"+B,Sk,L,Ka)}}function Sh(pk,Sk,L){return function(Ka){Tq.binaryMd5(Ka,zi(pk,Sk,Ka,L))}}function Hi(){var pk=V.metadata.rev_map[V.metadata.rev];if(pk)return rf();pk=++za;V.metadata.rev_map[V.metadata.rev]=V.metadata.seq=pk;pk=[{key:u(pk),
value:V.data,prefix:H.bySeqStore,type:"put"},{key:V.metadata.id,value:V.metadata,prefix:H.docStore,type:"put"}];me.batch(pk);na[Je]={ok:!0,id:V.metadata.id,rev:V.metadata.rev};Va.set(V.metadata.id,V.metadata);rf()}ta+=nf;var Fj=null,vk=0;V.metadata.winningRev=Oa;V.metadata.deleted=U;V.data._id=V.metadata.id;V.data._rev=V.metadata.rev;fd&&(V.data._deleted=!0);V.stemmedRevs.length&&yd.set(V.metadata.id,V.stemmedRevs);var Hl=V.data._attachments?Object.keys(V.data._attachments):[];for(Oa=0;Oa<Hl.length;Oa++)if(U=
Hl[Oa],fd=V.data._attachments[U],fd.stub)Xb(V.data._id,V.data._rev,fd.digest,fh);else if("string"===typeof fd.data){try{var pl=ax.atob(fd.data)}catch(pk){mc(Gh.createError(Gh.BAD_ARG,"Attachment is not a valid base64 string"));return}Sh(V,U,fh)(pl)}else N_(fd.data,Sh(V,U,fh));Hl.length||Hi()}function Xb(V,Oa,U,fd){function Td(){return new Promise(function(rf,fh){me.get(H.attachmentStore,U,function(zi,Sh){if(zi&&"NotFoundError"!==zi.name)return fh(zi);rf(Sh)})})}function nf(rf){var fh=[V,Oa].join("@"),
zi={};rf?rf.refs&&(zi.refs=rf.refs,zi.refs[fh]=!0):(zi.refs={},zi.refs[fh]=!0);return new Promise(function(Sh){me.batch([{type:"put",prefix:H.attachmentStore,key:U,value:zi}]);Sh(!rf)})}var Je=Kb[U]||Promise.resolve();Kb[U]=Je.then(function(){return Td().then(nf).then(function(rf){fd(null,rf)},fd)})}function qd(V,Oa,U,fd,Td){U=V.data._attachments[U];delete U.data;U.digest=Oa;U.length=fd.length;var nf=V.metadata.id;V=V.metadata.rev;U.revpos=parseInt(V,10);Xb(nf,V,Oa,function(Je,rf){if(Je||0===fd.length||
!rf)return Td(Je);me.batch([{type:"put",prefix:H.binaryStore,key:Oa,value:A6(fd,"binary")}]);Td()})}function La(V){if(V)return Vh.nextTick(function(){mc(V)});me.batch([{prefix:H.metaStore,type:"put",key:"_local_last_update_seq",value:za},{prefix:H.metaStore,type:"put",key:"_local_doc_count",value:Ha._docCount+ta}]);me.execute(Ha,function(Oa){if(Oa)return mc(Oa);Ha._docCount+=ta;Ha._updateSeq=za;jy.notify(N);Vh.nextTick(function(){mc(null,na)})})}var Fd=ec.new_edits,na=Array(Qa.docs.length),Va=new Yo.Map,
yd=new Yo.Map,me=new Rs,ta=0,za=Ha._updateSeq,W=Qa.docs,ea=W.map(function(V){if(V._id&&Lk.isLocalId(V._id))return V;V=Lk.parseDoc(V,Fd,y.__opts);V.metadata&&!V.metadata.rev_map&&(V.metadata.rev_map={});return V});Qa=ea.filter(function(V){return V.error});if(Qa.length)return mc(Qa[0]);var Kb={};if(!ea.length)return mc(null,[]);(function(V){var Oa=[];W.forEach(function(Td){Td&&Td._attachments&&Object.keys(Td._attachments).forEach(function(nf){nf=Td._attachments[nf];nf.stub&&Oa.push(nf.digest)})});if(!Oa.length)return V();
var U=0,fd;Oa.forEach(function(Td){hc(Td,function(nf){nf&&!fd&&(fd=nf);++U===Oa.length&&V(fd)})})})(function(V){if(V)return mc(V);Ua(function(Oa){if(Oa)return mc(Oa);Lk.processDocs(I,ea,y,Va,me,na,Ac,ec,Lb)})})});y._allDocs=function(Qa,ec){return"keys"in Qa?Lk.allDocsKeysQuery(this,Qa):r(function(mc,hc){mc=Vh.clone(mc);d(function(Ua,xa){if(Ua)return hc(Ua);Ua={};var rc=mc.skip||0;mc.startkey&&(Ua.gte=mc.startkey);mc.endkey&&(Ua.lte=mc.endkey);mc.key&&(Ua.gte=Ua.lte=mc.key);if(mc.descending){Ua.reverse=
!0;var Lb=Ua.lte;Ua.lte=Ua.gte;Ua.gte=Lb}if("number"===typeof mc.limit)var Ac=mc.limit;if(0===Ac||"gte"in Ua&&"lte"in Ua&&Ua.gte>Ua.lte)return Ua={total_rows:xa,offset:mc.skip,rows:[]},mc.update_seq&&(Ua.update_seq=Ha._updateSeq),hc(null,Ua);var Xb=[],qd=H.docStore.readStream(Ua),La=cV.obj(function(Fd,na,Va){function yd(W){var ea={id:me.id,key:me.id,value:{rev:ta}};if(mc.include_docs){ea.doc=W;ea.doc._rev=ea.value.rev;mc.conflicts&&(W=bx.collectConflicts(me),W.length&&(ea.doc._conflicts=W));for(var Kb in ea.doc._attachments)ea.doc._attachments.hasOwnProperty(Kb)&&
(ea.doc._attachments[Kb].stub=!0)}if(!1===mc.inclusive_end&&me.id===mc.endkey)return Va();if(za)if("ok"===mc.deleted)ea.value.deleted=!0,ea.doc=null;else return Va();Xb.push(ea);Va()}var me=Fd.value,ta=dF(me),za="deleted"in me?me.deleted:Lk.isDeleted(me,ta);if(!za){if(0<rc--){Va();return}if("number"===typeof Ac&&0>=Ac--){qd.unpipe();qd.destroy();Va();return}}else if("ok"!==mc.deleted){Va();return}mc.include_docs?H.bySeqStore.get(u(me.rev_map[ta]),function(W,ea){yd(ea)}):yd()},function(Fd){Promise.resolve().then(function(){if(mc.include_docs&&
mc.attachments)return eF(Xb,H,mc)}).then(function(){var na={total_rows:xa,offset:mc.skip,rows:Xb};mc.update_seq&&(na.update_seq=Ha._updateSeq);hc(null,na)},hc);Fd()}).on("unpipe",function(){La.end()});qd.on("error",hc);qd.pipe(La)})})(Qa,ec)};y._changes=function(Qa){function ec(){Qa.done=!0;Qa.return_docs&&Qa.limit&&Qa.limit<Ua.length&&(Ua.length=Qa.limit);Fd.unpipe(na);Fd.destroy();Qa.continuous||Qa.cancelled||(Qa.include_docs&&Qa.attachments&&Qa.return_docs?eF(Ua,H,Qa).then(function(){Qa.complete(null,
{results:Ua,last_seq:xa})}):Qa.complete(null,{results:Ua,last_seq:xa}))}Qa=Vh.clone(Qa);if(Qa.continuous){var mc=N+":"+Vh.uuid();jy.addListener(N,mc,y,Qa);jy.notify(N);return{cancel:function(){jy.removeListener(N,mc)}}}var hc=Qa.descending,Ua=[],xa=Qa.since||0,rc=0,Lb={reverse:hc};if("limit"in Qa&&0<Qa.limit)var Ac=Qa.limit;Lb.reverse||(Lb.start=u(Qa.since||0));var Xb=Qa.doc_ids&&new Yo.Set(Qa.doc_ids),qd=Vh.filterChange(Qa),La=new Yo.Map,Fd=H.bySeqStore.readStream(Lb),na=cV.obj(function(Va,yd,me){function ta(ea){function Kb(Oa){var U=
Qa.processChange(Oa,ea,Qa);U.seq=ea.seq;Oa=qd(U);if("object"===typeof Oa)return Qa.complete(Oa);if(Oa){rc++;if(Qa.attachments&&Qa.include_docs)eF([U],H,Qa).then(function(){Qa.onChange(U)});else Qa.onChange(U);Qa.return_docs&&Ua.push(U)}me()}var V=dF(ea);if(ea.seq!==za)return me();xa=za;if(V===W._rev)return Kb(W);H.bySeqStore.get(u(ea.rev_map[V]),function(Oa,U){Kb(U)})}if(Ac&&rc>=Ac)return ec(),me();if(Qa.cancelled||Qa.done)return me();var za=parseInt(Va.key,10),W=Va.value;if(za===Qa.since&&!hc||Xb&&
!Xb.has(W._id))return me();if(Va=La.get(W._id))return ta(Va);H.docStore.get(W._id,function(ea,Kb){if(Qa.cancelled||Qa.done||Ha.isClosed()||Lk.isLocalId(Kb.id))return me();La.set(W._id,Kb);ta(Kb)})},function(Va){if(Qa.cancelled)return Va();Qa.return_docs&&Qa.limit&&Qa.limit<Ua.length&&(Ua.length=Qa.limit);Va()}).on("unpipe",function(){na.end();ec()});Fd.pipe(na);return{cancel:function(){Qa.cancelled=!0;ec()}}};y._close=function(Qa){if(Ha.isClosed())return Qa(Gh.createError(Gh.NOT_OPEN));Ha.close(function(ec){ec?
Qa(ec):(ja.delete(N),Qa())})};y._getRevisionTree=function(Qa,ec){H.docStore.get(Qa,function(mc,hc){mc?ec(Gh.createError(Gh.MISSING_DOC)):ec(null,hc.rev_tree)})};y._doCompaction=q(function(Qa,ec,mc,hc){y._doCompactionNoLock(Qa,ec,mc,hc)});y._doCompactionNoLock=function(Qa,ec,mc,hc){"function"===typeof mc&&(hc=mc,mc={});if(!ec.length)return hc();var Ua=mc.ctx||new Rs;Ua.get(H.docStore,Qa,function(xa,rc){function Lb(Va){Va&&(na=Va);if(++Fd===ec.length){if(na)return hc(na);Xb()}}function Ac(Va){if(Va)return hc(Va);
Ua.batch(qd);if(mc.ctx)return hc();Ua.execute(Ha,hc)}function Xb(){function Va(W){W&&(ta=W);++me===yd.length&&Ac(ta)}var yd=Object.keys(La);if(!yd.length)return Ac();var me=0,ta,za=new Yo.Map;ec.forEach(function(W){za.set(Qa+"@"+W,!0)});yd.forEach(function(W){Ua.get(H.attachmentStore,W,function(ea,Kb){if(ea)return"NotFoundError"===ea.name?Va():Va(ea);ea=Object.keys(Kb.refs||{}).filter(function(Oa){return!za.has(Oa)});var V={};ea.forEach(function(Oa){V[Oa]=!0});ea.length?qd.push({key:W,type:"put",
value:{refs:V},prefix:H.attachmentStore}):qd=qd.concat([{key:W,type:"del",prefix:H.attachmentStore},{key:W,type:"del",prefix:H.binaryStore}]);Va()})})}if(xa)return hc(xa);xa=ec.map(function(Va){var yd=rc.rev_map[Va];delete rc.rev_map[Va];return yd});bx.traverseRevTree(rc.rev_tree,function(Va,yd,me,ta,za){-1!==ec.indexOf(yd+"-"+me)&&(za.status="missing")});var qd=[];qd.push({key:rc.id,value:rc,type:"put",prefix:H.docStore});var La={},Fd=0,na;xa.forEach(function(Va){qd.push({key:u(Va),type:"del",prefix:H.bySeqStore});
Ua.get(H.bySeqStore,u(Va),function(yd,me){if(yd)return"NotFoundError"===yd.name?Lb():Lb(yd);Object.keys(me._attachments||{}).forEach(function(ta){La[me._attachments[ta].digest]=!0});Lb()})})})};y._getLocal=function(Qa,ec){H.localStore.get(Qa,function(mc,hc){mc?ec(Gh.createError(Gh.MISSING_DOC)):ec(null,hc)})};y._putLocal=function(Qa,ec,mc){"function"===typeof ec&&(mc=ec,ec={});ec.ctx?y._putLocalNoLock(Qa,ec,mc):y._putLocalWithLock(Qa,ec,mc)};y._putLocalWithLock=q(function(Qa,ec,mc){y._putLocalNoLock(Qa,
ec,mc)});y._putLocalNoLock=function(Qa,ec,mc){delete Qa._revisions;var hc=Qa._rev,Ua=Qa._id,xa=ec.ctx||new Rs;xa.get(H.localStore,Ua,function(rc,Lb){if(rc&&hc||Lb&&Lb._rev!==hc)return mc(Gh.createError(Gh.REV_CONFLICT));Qa._rev=hc?"0-"+(parseInt(hc.split("-")[1],10)+1):"0-1";xa.batch([{type:"put",prefix:H.localStore,key:Ua,value:Qa}]);var Ac={ok:!0,id:Qa._id,rev:Qa._rev};if(ec.ctx)return mc(null,Ac);xa.execute(Ha,function(Xb){if(Xb)return mc(Xb);mc(null,Ac)})})};y._removeLocal=function(Qa,ec,mc){"function"===
typeof ec&&(mc=ec,ec={});ec.ctx?y._removeLocalNoLock(Qa,ec,mc):y._removeLocalWithLock(Qa,ec,mc)};y._removeLocalWithLock=q(function(Qa,ec,mc){y._removeLocalNoLock(Qa,ec,mc)});y._removeLocalNoLock=function(Qa,ec,mc){var hc=ec.ctx||new Rs;hc.get(H.localStore,Qa._id,function(Ua,xa){if(Ua)return"NotFoundError"!==Ua.name?mc(Ua):mc(Gh.createError(Gh.MISSING_DOC));if(xa._rev!==Qa._rev)return mc(Gh.createError(Gh.REV_CONFLICT));hc.batch([{prefix:H.localStore,type:"del",key:Qa._id}]);var rc={ok:!0,id:Qa._id,
rev:"0-0"};if(ec.ctx)return mc(null,rc);hc.execute(Ha,function(Lb){if(Lb)return mc(Lb);mc(null,rc)})})};y._destroy=function(Qa,ec){Qa=Vh.functionName(J);if(iy.has(Qa))var mc=iy.get(Qa);else return x(N,ec);mc.has(N)?(jy.removeAllListeners(N),mc.get(N).close(function(){mc.delete(N);x(N,ec)})):x(N,ec)}},Ss="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,D6={},eV=Pl;fF.prototype.next=function(b){var c=this||Ss;if("function"!=typeof b)throw Error("next() requires a callback argument");
if(c._ended)return b(Error("cannot call next() after end()"));if(c._nexting)return b(Error("cannot call next() before previous next() has completed"));c._nexting=!0;if("function"==typeof c._next)return c._next(function(){c._nexting=!1;b.apply(null,arguments)});eV.nextTick(function(){c._nexting=!1;b()})};fF.prototype.end=function(b){if("function"!=typeof b)throw Error("end() requires a callback argument");if((this||Ss)._ended)return b(Error("end() already called on iterator"));(this||Ss)._ended=!0;
if("function"==typeof(this||Ss)._end)return this._end(b);eV.nextTick(b)};var fV=D6=fF,ll="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,E6={},F6=Pl;Ru.prototype._checkWritten=function(){if((this||ll)._written)throw Error("write() already called on this batch");};Ru.prototype.put=function(b,c){this._checkWritten();var g=(this||ll)._db._checkKey(b,"key",(this||ll)._db._isBuffer);if(g)throw g;(this||ll)._db._isBuffer(b)||(b=String(b));(this||ll)._db._isBuffer(c)||(c=
String(c));"function"==typeof(this||ll)._put?this._put(b,c):(this||ll)._operations.push({type:"put",key:b,value:c});return this||ll};Ru.prototype.del=function(b){this._checkWritten();var c=(this||ll)._db._checkKey(b,"key",(this||ll)._db._isBuffer);if(c)throw c;(this||ll)._db._isBuffer(b)||(b=String(b));"function"==typeof(this||ll)._del?this._del(b):(this||ll)._operations.push({type:"del",key:b});return this||ll};Ru.prototype.clear=function(){this._checkWritten();(this||ll)._operations=[];"function"==
typeof(this||ll)._clear&&this._clear();return this||ll};Ru.prototype.write=function(b,c){this._checkWritten();"function"==typeof b&&(c=b);if("function"!=typeof c)throw Error("write() requires a callback argument");"object"!=typeof b&&(b={});(this||ll)._written=!0;if("function"==typeof(this||ll)._write)return this._write(c);if("function"==typeof(this||ll)._db._batch)return(this||ll)._db._batch((this||ll)._operations,b,c);F6.nextTick(c)};var G6=E6=Ru,bl="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,gV={},H6=rl.Buffer,Ur=Pl;Pn.prototype.open=function(b,c){var g=this||bl,a=(this||bl).status;"function"==typeof b&&(c=b);if("function"!=typeof c)throw Error("open() requires a callback argument");"object"!=typeof b&&(b={});b.createIfMissing=0!=b.createIfMissing;b.errorIfExists=!!b.errorIfExists;"function"==typeof(this||bl)._open?((this||bl).status="opening",this._open(b,function(d){if(d)return g.status=a,c(d);g.status="open";c()})):((this||bl).status="open",Ur.nextTick(c))};
Pn.prototype.close=function(b){var c=this||bl,g=(this||bl).status;if("function"!=typeof b)throw Error("close() requires a callback argument");"function"==typeof(this||bl)._close?((this||bl).status="closing",this._close(function(a){if(a)return c.status=g,b(a);c.status="closed";b()})):((this||bl).status="closed",Ur.nextTick(b))};Pn.prototype.get=function(b,c,g){var a;"function"==typeof c&&(g=c);if("function"!=typeof g)throw Error("get() requires a callback argument");if(a=this._checkKey(b,"key",(this||
bl)._isBuffer))return g(a);this._isBuffer(b)||(b=String(b));"object"!=typeof c&&(c={});c.asBuffer=0!=c.asBuffer;if("function"==typeof(this||bl)._get)return this._get(b,c,g);Ur.nextTick(function(){g(Error("NotFound"))})};Pn.prototype.put=function(b,c,g,a){var d;"function"==typeof g&&(a=g);if("function"!=typeof a)throw Error("put() requires a callback argument");if(d=this._checkKey(b,"key",(this||bl)._isBuffer))return a(d);this._isBuffer(b)||(b=String(b));null==c||this._isBuffer(c)||Ur.browser||(c=
String(c));"object"!=typeof g&&(g={});if("function"==typeof(this||bl)._put)return this._put(b,c,g,a);Ur.nextTick(a)};Pn.prototype.del=function(b,c,g){var a;"function"==typeof c&&(g=c);if("function"!=typeof g)throw Error("del() requires a callback argument");if(a=this._checkKey(b,"key",(this||bl)._isBuffer))return g(a);this._isBuffer(b)||(b=String(b));"object"!=typeof c&&(c={});if("function"==typeof(this||bl)._del)return this._del(b,c,g);Ur.nextTick(g)};Pn.prototype.batch=function(b,c,g){if(!arguments.length)return this._chainedBatch();
"function"==typeof c&&(g=c);"function"==typeof b&&(g=b);if("function"!=typeof g)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return g(Error("batch(array) requires an array argument"));c&&"object"==typeof c||(c={});for(var a=0,d=b.length,f,k;a<d;a++)if(f=b[a],"object"==typeof f&&((k=this._checkKey(f.type,"type",(this||bl)._isBuffer))||(k=this._checkKey(f.key,"key",(this||bl)._isBuffer))))return g(k);if("function"==typeof(this||bl)._batch)return this._batch(b,c,g);Ur.nextTick(g)};
Pn.prototype.approximateSize=function(b,c,g){if(null==b||null==c||"function"==typeof b||"function"==typeof c)throw Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof g)throw Error("approximateSize() requires a callback argument");this._isBuffer(b)||(b=String(b));this._isBuffer(c)||(c=String(c));if("function"==typeof(this||bl)._approximateSize)return this._approximateSize(b,c,g);Ur.nextTick(function(){g(null,0)})};Pn.prototype._setupIteratorOptions=
function(b){var c=this||bl;b=yv(b);"start end gt gte lt lte".split(" ").forEach(function(g){b[g]&&c._isBuffer(b[g])&&0===b[g].length&&delete b[g]});b.reverse=!!b.reverse;b.keys=0!=b.keys;b.values=0!=b.values;b.limit="limit"in b?b.limit:-1;b.keyAsBuffer=0!=b.keyAsBuffer;b.valueAsBuffer=0!=b.valueAsBuffer;return b};Pn.prototype.iterator=function(b){"object"!=typeof b&&(b={});b=this._setupIteratorOptions(b);return"function"==typeof(this||bl)._iterator?this._iterator(b):new fV(this||bl)};Pn.prototype._chainedBatch=
function(){return new G6(this||bl)};Pn.prototype._isBuffer=function(b){return H6.isBuffer(b)};Pn.prototype._checkKey=function(b,c){if(null===b||void 0===b)return Error(c+" cannot be `null` or `undefined`");if(this._isBuffer(b)){if(0===b.length)return Error(c+" cannot be an empty Buffer")}else if(""===String(b))return Error(c+" cannot be an empty String")};gV=Pn;var I6=gV;var Rk={},J6=rl.Buffer;Rk.compare=function(b,c){if(J6.isBuffer(b)){for(var g=Math.min(b.length,c.length),a=0;a<g;a++){var d=b[a]-
c[a];if(d)return d}return b.length-c.length}return b<c?-1:b>c?1:0};var K6=Rk.lowerBoundKey=function(b){return Rp(b,"gt")||Rp(b,"gte")||Rp(b,"min")||(b.reverse?Rp(b,"end"):Rp(b,"start"))||void 0},L6=Rk.lowerBound=function(b){var c=K6(b);return c&&b[c]},M6=Rk.lowerBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"gt")?!1:!0},N6=Rk.upperBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"lt")?!1:!0},O6=Rk.lowerBoundExclusive=function(b){return!M6(b)},P6=Rk.upperBoundExclusive=
function(b){return!N6(b)},Q6=Rk.upperBoundKey=function(b){return Rp(b,"lt")||Rp(b,"lte")||Rp(b,"max")||(b.reverse?Rp(b,"start"):Rp(b,"end"))||void 0},R6=Rk.upperBound=function(b){var c=Q6(b);return c&&b[c]};Rk.toLtgt=function(b,c,g,a,d){c=c||{};g=g||P_;var f=3<arguments.length,k=Rk.lowerBoundKey(b),n=Rk.upperBoundKey(b);k?"gt"===k?c.gt=g(b.gt,!1):c.gte=g(b[k],!1):f&&(c.gte=g(a,!1));n?"lt"===n?c.lt=g(b.lt,!0):c.lte=g(b[n],!0):f&&(c.lte=g(d,!0));null!=b.reverse&&(c.reverse=!!b.reverse);Object.hasOwnProperty.call(c,
"max")&&delete c.max;Object.hasOwnProperty.call(c,"min")&&delete c.min;Object.hasOwnProperty.call(c,"start")&&delete c.start;Object.hasOwnProperty.call(c,"end")&&delete c.end;return c};Rk.contains=function(b,c,g){g=g||Rk.compare;var a=L6(b);if(void 0!==a&&""!==a&&(a=g(c,a),0>a||0===a&&O6(b)))return!1;a=R6(b);return void 0!==a&&""!==a&&(a=g(c,a),0<a||0===a&&P6(b))?!1:!0};Rk.filter=function(b,c){return function(g){return Rk.contains(b,g,c)}};Rk.compare;Rk.toLtgt;Rk.contains;Rk.filter;Rk.lowerBoundKey;
Rk.lowerBound;Rk.lowerBoundInclusive;Rk.upperBoundInclusive;Rk.lowerBoundExclusive;Rk.upperBoundExclusive;Rk.upperBoundKey;Rk.upperBound;var hV={};hV=function(b){return new Su(b||Q_,null)};var ln=Su.prototype;Object.defineProperty(ln,"keys",{get:function(){var b=[];this.forEach(function(c,g){b.push(c)});return b}});Object.defineProperty(ln,"values",{get:function(){var b=[];this.forEach(function(c,g){b.push(g)});return b}});Object.defineProperty(ln,"length",{get:function(){return this.root?this.root._count:
0}});ln.insert=function(b,c){for(var g=this._compare,a=this.root,d=[],f=[];a;){var k=g(b,a.key);d.push(a);f.push(k);a=0>=k?a.left:a.right}d.push(new Qn(0,b,c,null,null,1));for(b=d.length-2;0<=b;--b)a=d[b],d[b]=0>=f[b]?new Qn(a._color,a.key,a.value,d[b+1],a.right,a._count+1):new Qn(a._color,a.key,a.value,a.left,d[b+1],a._count+1);for(b=d.length-1;1<b;--b){f=d[b-1];a=d[b];if(1===f._color||1===a._color)break;c=d[b-2];if(c.left===f)if(f.left===a)if((k=c.right)&&0===k._color)f._color=1,c.right=vr(1,k),
c._color=0,--b;else{c._color=0;c.left=f.right;f._color=1;f.right=c;d[b-2]=f;d[b-1]=a;tl(c);tl(f);3<=b&&(b=d[b-3],b.left===c?b.left=f:b.right=f);break}else if((k=c.right)&&0===k._color)f._color=1,c.right=vr(1,k),c._color=0,--b;else{f.right=a.left;c._color=0;c.left=a.right;a._color=1;a.left=f;a.right=c;d[b-2]=a;d[b-1]=f;tl(c);tl(f);tl(a);3<=b&&(b=d[b-3],b.left===c?b.left=a:b.right=a);break}else if(f.right===a)if((k=c.left)&&0===k._color)f._color=1,c.left=vr(1,k),c._color=0,--b;else{c._color=0;c.right=
f.left;f._color=1;f.left=c;d[b-2]=f;d[b-1]=a;tl(c);tl(f);3<=b&&(b=d[b-3],b.right===c?b.right=f:b.left=f);break}else if((k=c.left)&&0===k._color)f._color=1,c.left=vr(1,k),c._color=0,--b;else{f.left=a.right;c._color=0;c.right=a.left;a._color=1;a.right=f;a.left=c;d[b-2]=a;d[b-1]=f;tl(c);tl(f);tl(a);3<=b&&(b=d[b-3],b.right===c?b.right=a:b.left=a);break}}d[0]._color=1;return new Su(g,d[0])};ln.forEach=function(b,c,g){if(this.root)switch(arguments.length){case 1:return gF(b,this.root);case 2:return hF(c,
this._compare,b,this.root);case 3:if(!(0<=this._compare(c,g)))return iF(c,g,this._compare,b,this.root)}};Object.defineProperty(ln,"begin",{get:function(){for(var b=[],c=this.root;c;)b.push(c),c=c.left;return new Rn(this,b)}});Object.defineProperty(ln,"end",{get:function(){for(var b=[],c=this.root;c;)b.push(c),c=c.right;return new Rn(this,b)}});ln.at=function(b){if(0>b)return new Rn(this,[]);for(var c=this.root,g=[];;){g.push(c);if(c.left){if(b<c.left._count){c=c.left;continue}b-=c.left._count}if(!b)return new Rn(this,
g);--b;if(c.right){if(b>=c.right._count)break;c=c.right}else break}return new Rn(this,[])};ln.ge=function(b){for(var c=this._compare,g=this.root,a=[],d=0;g;){var f=c(b,g.key);a.push(g);0>=f&&(d=a.length);g=0>=f?g.left:g.right}a.length=d;return new Rn(this,a)};ln.gt=function(b){for(var c=this._compare,g=this.root,a=[],d=0;g;){var f=c(b,g.key);a.push(g);0>f&&(d=a.length);g=0>f?g.left:g.right}a.length=d;return new Rn(this,a)};ln.lt=function(b){for(var c=this._compare,g=this.root,a=[],d=0;g;){var f=c(b,
g.key);a.push(g);0<f&&(d=a.length);g=0>=f?g.left:g.right}a.length=d;return new Rn(this,a)};ln.le=function(b){for(var c=this._compare,g=this.root,a=[],d=0;g;){var f=c(b,g.key);a.push(g);0<=f&&(d=a.length);g=0>f?g.left:g.right}a.length=d;return new Rn(this,a)};ln.find=function(b){for(var c=this._compare,g=this.root,a=[];g;){var d=c(b,g.key);a.push(g);if(0===d)return new Rn(this,a);g=0>=d?g.left:g.right}return new Rn(this,[])};ln.remove=function(b){return(b=this.find(b))?b.remove():this};ln.get=function(b){for(var c=
this._compare,g=this.root;g;){var a=c(b,g.key);if(0===a)return g.value;g=0>=a?g.left:g.right}};var vo=Rn.prototype;Object.defineProperty(vo,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(vo,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});vo.clone=function(){return new Rn(this.tree,this._stack.slice())};vo.remove=function(){var b=this._stack;if(0===b.length)return this.tree;var c=Array(b.length),g=b[b.length-1];
c[c.length-1]=new Qn(g._color,g.key,g.value,g.left,g.right,g._count);for(var a=b.length-2;0<=a;--a)g=b[a],c[a]=g.left===b[a+1]?new Qn(g._color,g.key,g.value,c[a+1],g.right,g._count):new Qn(g._color,g.key,g.value,g.left,c[a+1],g._count);g=c[c.length-1];if(g.left&&g.right){b=c.length;for(g=g.left;g.right;)c.push(g),g=g.right;a=c[b-1];c.push(new Qn(g._color,a.key,a.value,g.left,g.right,g._count));c[b-1].key=g.key;c[b-1].value=g.value;for(a=c.length-2;a>=b;--a)g=c[a],c[a]=new Qn(g._color,g.key,g.value,
g.left,c[a+1],g._count);c[b-1].left=c[b]}g=c[c.length-1];if(0===g._color)for(a=c[c.length-2],a.left===g?a.left=null:a.right===g&&(a.right=null),c.pop(),a=0;a<c.length;++a)c[a]._count--;else if(g.left||g.right)for(g.left?MP(g,g.left):g.right&&MP(g,g.right),g._color=1,a=0;a<c.length-1;++a)c[a]._count--;else{if(1===c.length)return new Su(this.tree._compare,null);for(a=0;a<c.length;++a)c[a]._count--;a=c[c.length-2];for(var d,f,k,n=c.length-1;0<=n;--n){b=c[n];if(0===n){b._color=1;break}d=c[n-1];if(d.left===
b){f=d.right;if(f.right&&0===f.right._color){f=d.right=Sp(f);k=f.right=Sp(f.right);d.right=f.left;f.left=d;f.right=k;f._color=d._color;b._color=1;d._color=1;k._color=1;tl(d);tl(f);if(1<n){var p=c[n-2];p.left===d?p.left=f:p.right=f}c[n-1]=f;break}else if(f.left&&0===f.left._color){f=d.right=Sp(f);k=f.left=Sp(f.left);d.right=k.left;f.left=k.right;k.left=d;k.right=f;k._color=d._color;d._color=1;f._color=1;b._color=1;tl(d);tl(f);tl(k);1<n&&(p=c[n-2],p.left===d?p.left=k:p.right=k);c[n-1]=k;break}if(1===
f._color)if(0===d._color){d._color=1;d.right=vr(0,f);break}else d.right=vr(0,f);else f=Sp(f),d.right=f.left,f.left=d,f._color=d._color,d._color=0,tl(d),tl(f),1<n&&(p=c[n-2],p.left===d?p.left=f:p.right=f),c[n-1]=f,c[n]=d,n+1<c.length?c[n+1]=b:c.push(b),n+=2}else{f=d.left;if(f.left&&0===f.left._color){f=d.left=Sp(f);k=f.left=Sp(f.left);d.left=f.right;f.right=d;f.left=k;f._color=d._color;b._color=1;d._color=1;k._color=1;tl(d);tl(f);1<n&&(p=c[n-2],p.right===d?p.right=f:p.left=f);c[n-1]=f;break}else if(f.right&&
0===f.right._color){f=d.left=Sp(f);k=f.right=Sp(f.right);d.left=k.right;f.right=k.left;k.right=d;k.left=f;k._color=d._color;d._color=1;f._color=1;b._color=1;tl(d);tl(f);tl(k);1<n&&(p=c[n-2],p.right===d?p.right=k:p.left=k);c[n-1]=k;break}if(1===f._color)if(0===d._color){d._color=1;d.left=vr(0,f);break}else d.left=vr(0,f);else f=Sp(f),d.left=f.right,f.right=d,f._color=d._color,d._color=0,tl(d),tl(f),1<n&&(p=c[n-2],p.right===d?p.right=f:p.left=f),c[n-1]=f,c[n]=d,n+1<c.length?c[n+1]=b:c.push(b),n+=2}}a.left===
g?a.left=null:a.right=null}return new Su(this.tree._compare,c[0])};Object.defineProperty(vo,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(vo,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(vo,"index",{get:function(){var b=0,c=this._stack;if(0===c.length)return(b=this.tree.root)?b._count:0;c[c.length-1].left&&(b=c[c.length-1].left._count);
for(var g=c.length-2;0<=g;--g)c[g+1]===c[g].right&&(++b,c[g].left&&(b+=c[g].left._count));return b},enumerable:!0});vo.next=function(){var b=this._stack;if(0!==b.length){var c=b[b.length-1];if(c.right)for(c=c.right;c;)b.push(c),c=c.left;else for(b.pop();0<b.length&&b[b.length-1].right===c;)c=b[b.length-1],b.pop()}};Object.defineProperty(vo,"hasNext",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].right)return!0;for(var c=b.length-1;0<c;--c)if(b[c-1].left===b[c])return!0;
return!1}});vo.update=function(b){var c=this._stack;if(0===c.length)throw Error("Can't update empty node!");var g=Array(c.length),a=c[c.length-1];g[g.length-1]=new Qn(a._color,a.key,b,a.left,a.right,a._count);for(b=c.length-2;0<=b;--b)a=c[b],g[b]=a.left===c[b+1]?new Qn(a._color,a.key,a.value,g[b+1],a.right,a._count):new Qn(a._color,a.key,a.value,a.left,g[b+1],a._count);return new Su(this.tree._compare,g[0])};vo.prev=function(){var b=this._stack;if(0!==b.length){var c=b[b.length-1];if(c.left)for(c=
c.left;c;)b.push(c),c=c.right;else for(b.pop();0<b.length&&b[b.length-1].left===c;)c=b[b.length-1],b.pop()}};Object.defineProperty(vo,"hasPrev",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].left)return!0;for(var c=b.length-1;0<c;--c)if(b[c-1].right===b[c])return!0;return!1}});var S6=hV,ky={},mI=Pl;ky.test=function(){return"undefined"!==typeof mI&&!mI.browser};ky.install=function(b){return function(){mI.nextTick(b)}};ky.test;ky.install;var iV="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,nI="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,oI={},jV=nI.MutationObserver||nI.WebKitMutationObserver;oI.test=function(){return jV};oI.install=function(b){var c=0;b=new jV(b);var g=nI.document.createTextNode("");b.observe(g,{characterData:!0});return function(){g.data=c=++c%2}};var pI="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,rB="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,kV={},ly=[ky,{test:function(){return"function"===typeof iV.queueMicrotask},install:function(b){return function(){iV.queueMicrotask(b)}}},oI,{test:function(){return pI.setImmediate?!1:"undefined"!==typeof pI.MessageChannel},install:function(b){var c=new pI.MessageChannel;c.port1.onmessage=b;return function(){c.port2.postMessage(0)}}},{test:function(){return"document"in rB&&"onreadystatechange"in rB.document.createElement("script")},install:function(b){return function(){var c=
rB.document.createElement("script");c.onreadystatechange=function(){b();c.onreadystatechange=null;c.parentNode.removeChild(c);c=null};rB.document.documentElement.appendChild(c);return b}}},{test:function(){return!0},install:function(b){return function(){setTimeout(b,0)}}}],Tu,Ts,cx=-1,wr=[],jF=!1,my=-1,T6=ly.length;for(;++my<T6;)if(ly[my]&&ly[my].test&&ly[my].test()){var U6=ly[my].install(NP);break}OP.prototype.run=function(){var b=this.fun,c=this.array;switch(c.length){case 0:return b();case 1:return b(c[0]);
case 2:return b(c[0],c[1]);case 3:return b(c[0],c[1],c[2]);default:return b.apply(null,c)}};kV=function(b){var c=Array(arguments.length-1);if(1<arguments.length)for(var g=1;g<arguments.length;g++)c[g-1]=arguments[g];wr.push(new OP(b,c));jF||Tu||(jF=!0,U6())};var Uh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,V6={},sB=rl.Buffer,lV=sl,QP=I6,PP=fV,Sn=Rk,W_=S6,Uu={},iq=kV;lV(eA,PP);eA.prototype._next=function(b){if((this||Uh)._done++>=(this||Uh)._limit||!(this||Uh)._tree.valid)return iq(b);
var c=(this||Uh)._tree.key;var g=(this||Uh)._tree.value;if(!this._test(c))return iq(b);(this||Uh).keyAsBuffer&&(c=new sB(c));(this||Uh).valueAsBuffer&&(g=new sB(g));(this||Uh)._tree[(this||Uh)._incr]();iq(function(){b(null,c,g)})};eA.prototype._test=function(){return!0};Tn.clearGlobalStore=function(b){b?Object.keys(Uu).forEach(function(c){delete Uu[c]}):Uu={}};lV(Tn,QP);Tn.prototype._open=function(b,c){var g=this||Uh;iq(function(){c(null,g)})};Tn.prototype._put=function(b,c,g,a){if("undefined"===
typeof c||null===c)c="";g=(this||Uh)._store[(this||Uh)._location].find(b);(this||Uh)._store[(this||Uh)._location]=g.valid?g.update(c):(this||Uh)._store[(this||Uh)._location].insert(b,c);iq(a)};Tn.prototype._get=function(b,c,g){var a=(this||Uh)._store[(this||Uh)._location].get(b);if("undefined"===typeof a)return iq(function(){g(Error("NotFound"))});!1===c.asBuffer||this._isBuffer(a)||(a=new sB(String(a)));iq(function(){g(null,a)})};Tn.prototype._del=function(b,c,g){(this||Uh)._store[(this||Uh)._location]=
(this||Uh)._store[(this||Uh)._location].remove(b);iq(g)};Tn.prototype._batch=function(b,c,g){c=-1;for(var a,d,f,k=b.length,n=(this||Uh)._store[(this||Uh)._location];++c<k;)b[c]&&(a=this._isBuffer(b[c].key)?b[c].key:String(b[c].key),f=n.find(a),"put"===b[c].type?(d=this._isBuffer(b[c].value)?b[c].value:String(b[c].value),n=f.valid?f.update(d):n.insert(a,d)):n=f.remove());(this||Uh)._store[(this||Uh)._location]=n;iq(g)};Tn.prototype._iterator=function(b){return new eA(this||Uh,b)};Tn.prototype._isBuffer=
function(b){return sB.isBuffer(b)};Tn.destroy=function(b,c){b="$"+b;b in Uu&&delete Uu[b];iq(c)};var W6=V6=Tn,X6={},X_=Vh,Z_=RP(C6),Y_=RP(W6);kF.valid=function(){return!0};kF.use_prefix=!1;var Y6=X6=function(b){b.adapter("memory",kF,!0)},dj=window.lively.FreezerRuntime.recorderFor("lively.storage/database.js");dj.nodejsRequire=function(b){if(!dj.isNode)throw Error("nodejsRequire can only be used in nodejs!");return"undefined"!==typeof System?System._nodeRequire(b):dj.require$$0._load(b)};dj.nodejs_leveldbPath=
function(b){if(b.startsWith("/"))return b;if(b.match(/[^\/]+:\/\//))return b.startsWith("file:")&&(b=b.replace(/^file:\/\//,"")),b;if(!dj.isNode)throw Error("nodejs_leveldbPath called under non-nodejs environment");var c="undefined"!==typeof System&&System.baseURL.startsWith("file://")?System.baseURL.replace("file://",""):dj.GLOB.process.cwd(),g=dj.nodejsRequire("path").join,a=dj.nodejsRequire("fs"),d=a.mkdirSync,f=a.existsSync;a.readdirSync;a=a.readFileSync;if(b.includes("/"))return g(c,b);try{var k=
a(g(c,"../package.json")),n=JSON.parse(k);if("lively.web"===n.name||"lively.next"===n.name){var p=g(c,"../.livelydbs");f(p)||d(p);return g(p,b)}}catch(q){}c=g(c,".livelydbs");f(c)||d(c);return g(c,b)};dj.nodejs_attemptToLoadProperPouchDB=function(){if(!dj.isNode)throw Error("nodejs_attemptToLoadProperPouchDB called under non-nodejs environment");if("undefined"!==typeof System){var b=System._nodeRequire("path").join,c=System.normalizeSync("lively.storage/index.js");c=System.normalizeSync("pouchdb",
c).replace(/file:\/\//,"");b=b(c,"../../lib/index.js");try{return dj.PouchDB=System._nodeRequire(b),dj.PouchDB.plugin(dj.pouchdbAdapterMem),!0}catch(g){return!1}}try{return dj.PouchDB=dj.require$$1,dj.PouchDB.plugin(dj.pouchdbAdapterMem),!0}catch(g){return!1}};dj.commonjsHelpers=Wl;dj.require$$0=U3;dj.require$$1=l4;dj._PouchDB=cU;dj.pouchdbAdapterMem=Y6;dj.Path=qj;dj.GLOB="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;dj.isNode="undefined"!==
typeof global&&"undefined"!==typeof process;dj.PouchDB=dj._PouchDB;dj.PouchDB&&dj.PouchDB.plugin&&dj.pouchdbAdapterMem&&dj.PouchDB.plugin(dj.pouchdbAdapterMem);dj.createPouchDB=dj.isNode?function(){var b=!1,c=!1;return function(g){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};b||(b=!0,c=dj.nodejs_attemptToLoadProperPouchDB());a.adapter||(a.adapter=g.startsWith("http")?"http":c?"leveldb":"memory");"leveldb"==a.adapter&&(g=dj.nodejs_leveldbPath(g));a=Object.assign({},a,{name:g});return new dj.PouchDB(a)}}():
function(b,c){return new dj.PouchDB(Object.assign({name:b},c))};var Vr=function(){function b(c){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Sd(this,b);this.name=c;this.options=g;this._pouchdb=null}uc(b,null,[{key:"findDB",value:function(c){return this.databases.get(c)}},{key:"ensureDB",value:function(c,g){var a=this.findDB(c);if(a)return a;a=new this(c,g);this.databases.set(c,a);c.endsWith("lively.storage-meta")||this.createMetaEntryForDB(c,g);return a}},{key:"knownDBs",value:function(c,
g){return dj.Database.ensureDB("lively.storage-meta").getAll().then(function(a){return a.map(function(d){return d._id})})}},{key:"createMetaEntryForDB",value:function(c,g){var a=dj.Database.ensureDB("lively.storage-meta");a.has(c).then(function(d){return!d&&a.set(c,{created:Date.now(),options:g})})}},{key:"knowsDB",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return f=this.ensureDB(a),n.next=
3,f.docCount();case 3:k=n.sent;if(!(0<k)){n.next=6;break}return n.abrupt("return",!0);case 6:return n.next=8,f.destroy();case 8:return n.abrupt("return",!1);case 9:case "end":return n.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"PouchDB",get:function(){return dj.PouchDB},set:function(c){dj.PouchDB=c}},{key:"databases",get:function(){return this._databases||(this._databases=new Map)}}]);uc(b,[{key:"close",value:function(){this._pouchdb&&(this._pouchdb.close(),delete this._pouchdb)}},
{key:"isDestroyed",value:function(){return!!this.pouchdb._destroyed}},{key:"destroy",value:function(c){this.constructor.databases["delete"](this.name);return this.isDestroyed()?{ok:!0}:this.pouchdb.destroy(c)}},{key:"update",value:function(){var c=Cb(regeneratorRuntime.mark(function k(a,d,f){var n,p,q,r,u,x,y,D,H,I,N,J,sa,ja,Ha=arguments;return regeneratorRuntime.wrap(function(Qa){for(;;)switch(Qa.prev=Qa.next){case 0:return n=3<Ha.length&&void 0!==Ha[3]?Ha[3]:0,p=f=f||{},q=p.ensure,r=void 0===q?
!0:q,u=p.retryOnConflict,x=void 0===u?!0:u,y=p.maxUpdateAttempts,D=void 0===y?10:y,H={latest:!0},I=this.pouchdb,Qa.prev=5,Qa.next=8,I.get(a,H);case 8:N=Qa.sent;Qa.next=15;break;case 11:Qa.prev=11;Qa.t0=Qa["catch"](5);if("not_found"===Qa.t0.name&&r){Qa.next=15;break}throw Qa.t0;case 15:return Qa.next=17,d(N);case 17:if((J=Qa.sent)&&"object"===ad(J)){Qa.next=20;break}return Qa.abrupt("return",null);case 20:return J._id!==a&&(J._id=a),N&&J._rev!==N._rev&&(J._rev=N._rev),Qa.prev=22,Qa.next=25,I.put(J);
case 25:return sa=Qa.sent,ja=sa.rev,Qa.abrupt("return",Object.assign(J,{_rev:ja}));case 31:Qa.prev=31;Qa.t1=Qa["catch"](22);if(!("conflict"===Qa.t1.name&&x&&n<D)){Qa.next=35;break}return Qa.abrupt("return",this.update(a,d,f,n+1));case 35:throw Qa.t1;case 36:case "end":return Qa.stop()}},k,this,[[5,11],[22,31]])}));return function(a,d,f){return c.apply(this,arguments)}}()},{key:"mixin",value:function(){var c=Cb(regeneratorRuntime.mark(function k(a,d,f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=
n.next){case 0:return n.abrupt("return",this.update(a,function(p){return Object.assign(p||{_id:a},d)},f));case 1:case "end":return n.stop()}},k,this)}));return function(a,d,f){return c.apply(this,arguments)}}()},{key:"set",value:function(){var c=Cb(regeneratorRuntime.mark(function k(a,d,f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.update(a,function(p){return d},f));case 1:case "end":return n.stop()}},k,this)}));return function(a,d,
f){return c.apply(this,arguments)}}()},{key:"get",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k=arguments;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return f=1<k.length&&void 0!==k[1]?k[1]:{},n.prev=1,n.next=4,this.pouchdb.get(a,f);case 4:return n.abrupt("return",n.sent);case 7:n.prev=7;n.t0=n["catch"](1);if("not_found"!==n.t0.name){n.next=11;break}return n.abrupt("return",void 0);case 11:throw n.t0;case 12:case "end":return n.stop()}},
d,this,[[1,7]])}));return function(a){return c.apply(this,arguments)}}()},{key:"has",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.get(a);case 2:return f.abrupt("return",!!f.sent);case 3:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"add",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=
f.next){case 0:return f.abrupt("return",this.pouchdb.post(a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"docList",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){var d,f,k,n,p,q,r,u,x=arguments;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return d=0<x.length&&void 0!==x[0]?x[0]:{},y.next=3,this.pouchdb.allDocs(d);case 3:f=y.sent;k=f.rows;n=[];for(p=0;p<k.length;p++)q=k[p],r=q.id,u=q.value.rev,
n.push({id:r,rev:u});return y.abrupt("return",n);case 8:case "end":return y.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"docCount",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){var d;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.pouchdb.allDocs();case 2:return d=f.sent,f.abrupt("return",d.rows.length);case 4:case "end":return f.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},
{key:"revList",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,this.pouchdb.get(a,{revs:!0});case 2:return f=q.sent,k=f._revisions,n=k.start,p=k.ids,q.abrupt("return",p.map(function(r){return"".concat(n--,"-").concat(r)}));case 8:case "end":return q.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"getAllRevisions",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,
k,n,p,q,r,u,x=arguments;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return f=1<x.length&&void 0!==x[1]?x[1]:{},k=f.skip,n=void 0===k?0:k,p=f.limit,q=void 0===p?0:p,y.next=4,this.revList(a);case 4:return r=y.sent,0<n&&(r=r.slice(n)),0<q&&(r=r.slice(0,q)),u=r.map(function(D){return{rev:D,id:a}}),y.next=10,this.getDocuments(u);case 10:return y.abrupt("return",y.sent);case 11:case "end":return y.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},
{key:"getAll",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){var d,f,k,n=arguments;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=0<n.length&&void 0!==n[0]?n[0]:{},p.next=3,this.pouchdb.allDocs(Object.assign({},d,{include_docs:!0}));case 3:return f=p.sent,k=f.rows,p.abrupt("return",k.map(function(q){return q.doc}));case 6:case "end":return p.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"setDocuments",value:function(){var c=
Cb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q,r,u,x;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.pouchdb.bulkDocs(a,d);case 2:k=y.sent,n=0;case 4:if(!(n<k.length)){y.next=17;break}p=a[n];q=k[n];if(q.ok||"conflict"!==q.name||p._rev){y.next=14;break}y.next=10;return this.set(p._id,p);case 10:r=y.sent,u=r._id,x=r._rev,k[n]={ok:!0,id:u,rev:x};case 14:n++;y.next=4;break;case 17:return y.abrupt("return",k);case 18:case "end":return y.stop()}},
f,this)}));return function(a,d){return c.apply(this,arguments)}}()},{key:"updateDocuments",value:function(){var c=Cb(regeneratorRuntime.mark(function k(a,d,f){var n,p,q,r,u,x,y,D;return regeneratorRuntime.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,this.pouchdb.bulkDocs(a,f);case 2:n=H.sent,p=[],q={},r=0;case 6:if(!(r<n.length)){H.next=19;break}u=a[r];x=n[r];q[x._id||u._id]=x;if(x.ok||"conflict"!==x.name){H.next=16;break}H.next=13;return this.get(u._id);case 13:if(y=H.sent,
D=d(y,u))D._id||(D._id=u._id),D._rev||(D._rev=y._rev),p.push(D);case 16:r++;H.next=6;break;case 19:if(!p.length){H.next=28;break}H.t0=Object;H.t1={};H.t2=q;H.t3={};H.next=26;return this.updateDocuments(p,d,f);case 26:H.t4=H.sent,q=H.t0.assign.call(H.t0,H.t1,H.t2,H.t3,H.t4);case 28:return H.abrupt("return",q);case 29:case "end":return H.stop()}},k,this)}));return function(a,d,f){return c.apply(this,arguments)}}()},{key:"getDocuments",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,
k,n,p,q,r,u,x,y,D,H,I,N=arguments;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return f=1<N.length&&void 0!==N[1]?N[1]:{},k=f.ignoreErrors,n=void 0===k?!0:k,J.next=4,this.pouchdb.bulkGet({docs:a});case 4:p=J.sent,q=p.results,r=[],u=0;case 8:if(!(u<q.length)){J.next=23;break}x=q[u];y=x.docs;D=x.id;console.assert(1===y.length,"getDocuments: expected only one doc for ".concat(D));H=0;case 12:if(!(H<y.length)){J.next=20;break}I=y[H];if(!n||I.ok){J.next=16;break}return J.abrupt("continue",
17);case 16:r.push(I.ok||I.error||I);case 17:H++;J.next=12;break;case 20:u++;J.next=8;break;case 23:return J.abrupt("return",r);case 24:case "end":return J.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"query",value:function(c,g){return this.pouchdb.query(c,g)}},{key:"remove",value:function(){var c=Cb(regeneratorRuntime.mark(function k(a,d,f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if("undefined"===typeof d){p.next=4;break}p.t0=
{_id:a,_rev:d};p.next=7;break;case 4:return p.next=6,this.get(a);case 6:p.t0=p.sent;case 7:return n=p.t0,p.abrupt("return",n?this.pouchdb.remove(n):void 0);case 9:case "end":return p.stop()}},k,this)}));return function(a,d,f){return c.apply(this,arguments)}}()},{key:"removeAll",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){var d,f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return d=this.pouchdb,k.next=3,d.allDocs();case 3:return f=k.sent,k.next=
6,Promise.all(f.rows.map(function(n){return d.remove(n.id,n.value.rev)}));case 6:return k.abrupt("return",k.sent);case 7:case "end":return k.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"replicateTo",value:function(c,g){c instanceof dj.Database&&(c=c.pouchdb);return this.pouchdb.replicate.to(c,g)}},{key:"replicateFrom",value:function(c,g){c instanceof dj.Database&&(c=c.pouchdb);return this.pouchdb.replicate.from(c,g)}},{key:"sync",value:function(c,g){c instanceof
dj.Database&&(c=c.pouchdb);return this.pouchdb.sync(c,g)}},{key:"getConflicts",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.pouchdb.query("conflict_index/conflict_index",Object.assign({reduce:!1,include_docs:!0,conflicts:!0},a));case 2:return f=n.sent,k=f.rows,n.abrupt("return",k.map(function(p){var q={id:p.id,rev:p.doc._rev,doc:p.doc};p.doc._conflicts&&(q.conflicts=p.doc._conflicts,
delete p.doc._conflicts);return q}));case 5:case "end":return n.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"resolveConflicts",value:function(){var c=Cb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q,r,u,x;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.pouchdb.get(a,{conflicts:!0});case 2:return k=y.sent,n=k._conflicts.map(function(D){return{id:a,rev:D}}),y.next=6,this.getDocuments(n);case 6:p=y.sent,q=k,
r=fa(p),y.prev=9,r.s();case 11:if((u=r.n()).done){y.next=25;break}x=u.value;y.next=15;return d(q,x);case 15:if(q=y.sent){y.next=18;break}return y.abrupt("return",null);case 18:return y.next=20,this.set(a,q);case 20:return q=y.sent,y.next=23,this.pouchdb.remove(x);case 23:y.next=11;break;case 25:y.next=30;break;case 27:y.prev=27,y.t0=y["catch"](9),r.e(y.t0);case 30:return y.prev=30,r.f(),y.finish(30);case 33:return y.abrupt("return",q);case 34:case "end":return y.stop()}},f,this,[[9,27,30,33]])}));
return function(a,d){return c.apply(this,arguments)}}()},{key:"diffWith",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r,u,x,y,D,H,I,N;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,a.docList();case 2:return f=J.sent,J.next=5,this.docList();case 5:k=J.sent;n=f.reduce(function(sa,ja){return Object.assign(sa,dd({},ja.id,ja.rev))},{});p=k.reduce(function(sa,ja){return Object.assign(sa,dd({},ja.id,ja.rev))},{});q=[];r=[];
u=[];for(x in n)y=n[x],(D=p[x])?y!=D&&u.push({right:{id:x,rev:y},left:{id:x,rev:D}}):r.push({id:x,rev:y});for(H in p)I=p[H],(N=n[H])||q.push({id:H,rev:I});return J.abrupt("return",{inLeft:q,inRight:r,changed:u});case 14:case "end":return J.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"dump",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){var d,f,k,n,p,q,r,u,x,y,D=arguments;return regeneratorRuntime.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return d=
0<D.length&&void 0!==D[0]?D[0]:{},f=d.filterFn,k=d.name,n=d.type,p=d.dbInfo,q=this.name,r=this.pouchdb,u=k||q,H.t0=u,H.t1=n||r.type(),H.t2=(new Date).toJSON(),H.t3=Object,H.t4={},H.next=11,r.info();case 11:return H.t5=H.sent,H.t6={db_name:u},H.t7=p,H.t8=H.t3.assign.call(H.t3,H.t4,H.t5,H.t6,H.t7),x={name:H.t0,db_type:H.t1,start_time:H.t2,db_info:H.t8},H.next=18,this.getAll({attachments:!0});case 18:return y=H.sent,"function"===typeof f&&(y=f(y,x)),H.abrupt("return",{header:x,docs:y});case 21:case "end":return H.stop()}},
a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"backup",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){var d,f,k,n=arguments;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=0<n.length&&void 0!==n[0]?n[0]:1,f="".concat(this.name,"_backup_").concat(d),k=this.constructor.ensureDB(f),p.next=5,this.replicateTo(k);case 5:return p.abrupt("return",k);case 6:case "end":return p.stop()}},a,this)}));return function(){return c.apply(this,
arguments)}}()},{key:"migrate",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.getAll();case 2:f=u.sent,k=[],n=[],p=0;case 6:if(!(p<f.length)){u.next=18;break}q=f[p];if(r=a(q,p)){u.next=12;break}n.push(q);return u.abrupt("continue",15);case 12:r.hasOwnProperty("_id")||(r._id=q._id),r.hasOwnProperty("_rev")&&delete r._rev,k.push(r);case 15:p++;u.next=6;break;case 18:return u.next=
20,this.setDocuments(k);case 20:return u.abrupt("return",{migrated:k.length,unchanged:n.length});case 21:case "end":return u.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"createDesignDocs",value:function(c){return c.map(this.createDesignDoc)}},{key:"createDesignDoc",value:function(c){var g=c.name,a=c.mapFn,d=c.reduceFn,f=c.filterFn;c=c.version;c={_id:"_design/"+g,version:void 0===c?1:c};f&&dj.Path("filters."+g).set(c,f.toString(),!0);a&&dj.Path("views."+g+".map").set(c,
a.toString(),!0);d&&dj.Path("views."+g+".reduce").set(c,d.toString(),!0);return c}},{key:"addDesignDocs",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f=this,k,n,p,q=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return k=1<q.length&&void 0!==q[1]?q[1]:!1,n=this.createDesignDocs(a),r.next=4,this.updateDocuments(n,function(u,x){return!u.hasOwnProperty("version")||x.hasOwnProperty("version")&&x.version>u.version?x:null});case 4:p=r.sent;
if(!k){r.next=8;break}r.next=8;return Promise.all(n.map(function(u){return f.designDocDoQueryStale(u._id)}));case 8:return r.abrupt("return",p);case 9:case "end":return r.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"addDesignDoc",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r,u,x=arguments;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return f=a.name,k=a.mapFn,n=a.reduceFn,p=a.version,q=1<x.length&&
void 0!==x[1]?x[1]:!1,r=this.createDesignDoc({name:f,mapFn:k,reduceFn:n,version:p}),y.next=5,this.set(r._id,r);case 5:u=y.sent;if(!q){y.next=9;break}y.next=9;return this.designDocDoQueryStale(r._id);case 9:return y.abrupt("return",u);case 10:case "end":return y.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"removeDesignDoc",value:function(c){return this.remove("_design/"+c)}},{key:"designDocDoQueryStale",value:function(c){c=c.split("/");c=Wb(c,2);c[0];return this.query(c[1],
{stale:"update_after"})}},{key:"pouchdb",get:function(){return this._pouchdb?this._pouchdb:this._pouchdb=dj.createPouchDB(this.name,this.options)}}],[{key:"loadDump",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r=arguments;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return f=1<r.length&&void 0!==r[1]?r[1]:{},k=a.header,n=a.docs,p=f.name||k.name,q=this.ensureDB(p),u.next=6,q.setDocuments(n,{new_edits:!1});case 6:return u.abrupt("return",
q);case 7:case "end":return u.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()}]);return b}();dj.Database=Vr;dj["default"]=Vr;var Z6=Object.freeze({__proto__:null,"default":{}}),$6=Ol(Z6),Eg=window.lively.FreezerRuntime.recorderFor("lively.storage/objectdb.js");Eg.isHash=function(b){return"string"===typeof b&&40===b.length&&b.match(Eg.hashRe)};Eg.checkArg=function(b,c,g){if("undefined"===typeof c&&"string"===typeof g&&!g.includes("undefined"))throw Error("parameter ".concat(b,
" is undefined"));if(null===c&&"string"===typeof g&&!g.includes("null"))throw Error("parameter ".concat(b," is null"));if("string"===typeof g){var a=ad(c),d=c?c.constructor.name:"";if(!g.split("|").some(function(f){return a===f||d===f}))throw Error('parameter "'.concat(b,'" expected to be of type ').concat(g," but is ").concat(d||a));}if("function"===typeof g&&(c=g(c))&&c.error)throw Error('check of parameter "'.concat(b,'" failed: ').concat(c.error));};Eg.checkArgs=function(b,c,g){for(var a in c)Eg.checkArg(a,
b[a],c[a]);if("function"===typeof g&&(c=g(b))&&c.error)throw Error(c.error);return b};Eg.commonjsHelpers=Wl;Eg.require$$0=$6;Eg.Database=Vr;Eg.resource=Am;Eg.obj=bj;Eg.promise=yj;Eg.arr=aj;Eg.string=Xj;Eg.Path=qj;Eg.parse=Cl;Eg.categorizer=Ex;Eg.sha1=function(){function b(){var f=d.createHash("sha1");return{update:function(k){return f.update(k)},digest:function(){return f.digest("hex")}}}function c(f){function k(J){q[H]|=(255&J)<<I;I?I-=8:(H++,I=24);16===H&&n()}function n(){for(var J=16;80>J;J++){var sa=
q[J-3]^q[J-8]^q[J-14]^q[J-16];q[J]=sa<<1|sa>>>31}var ja,Ha;sa=r;var Qa=u,ec=x,mc=y,hc=D;for(J=0;80>J;J++){20>J?(ja=mc^Qa&(ec^mc),Ha=1518500249):40>J?(ja=Qa^ec^mc,Ha=1859775393):60>J?(ja=Qa&ec|mc&(Qa|ec),Ha=2400959708):(ja=Qa^ec^mc,Ha=3395469782);var Ua=(sa<<5|sa>>>27)+ja+hc+Ha+(0|q[J]);hc=mc;mc=ec;ec=Qa<<30|Qa>>>2;Qa=sa;sa=Ua}r=r+sa|0;u=u+Qa|0;x=x+ec|0;y=y+mc|0;D=D+hc|0;for(J=H=0;16>J;J++)q[J]=0}function p(J){for(var sa="",ja=28;0<=ja;ja-=4)sa+=(J>>ja&15).toString(16);return sa}var q,r=1732584193,
u=4023233417,x=2562383102,y=271733878,D=3285377520,H=0,I=24,N=0;return q=f?g:new Uint32Array(80),{update:function(J){if("string"===typeof J){var sa=J.length;N+=8*sa;for(var ja=0;ja<sa;ja++)k(J.charCodeAt(ja))}else for(sa=J.length,N+=8*sa,ja=0;ja<sa;ja++)k(J[ja])},digest:function(){k(128);(14<H||14===H&&24>I)&&n();H=14;I=24;k(0);k(0);k(0xffffffffff<N?N/1099511627776:0);k(4294967295<N?N/4294967296:0);for(var J=24;0<=J;J-=8)k(N>>J);return p(r)+p(u)+p(x)+p(y)+p(D)}}}var g,a,d;return"object"===("undefined"===
typeof process?"undefined":ad(process))&&"object"===ad(process.versions)&&process.versions.node&&"renderer"!==process.__atom_type?(d="undefined"!==typeof System?System._nodeRequire("crypto"):Eg.require$$0,a=b):(g=new Uint32Array(80),a=c),function(f){if(void 0===f)return a(!1);var k=a(!0);return k.update(f),k.digest()}}();Eg.hashRe=/^[0-9a-f]+$/i;Eg.objectDBs=Eg.objectDBs||new Map;var ny=function(){function b(c,g){Sd(this,b);this.name=c;if(!g.snapshotLocation||!g.snapshotLocation.isResource)throw Error("ObjectDB needs snapshotLocation!");
this.snapshotLocation=g.snapshotLocation;this.__versionDB=this.__commitDB=null}uc(b,null,[{key:"dbList",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){var d;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return d=Eg.Database.ensureDB("internal__objectdb-meta"),f.next=3,d.getAll();case 3:return f.t0=function(k){return k._id},f.abrupt("return",f.sent.map(f.t0));case 5:case "end":return f.stop()}},a)}));return function(){return c.apply(this,arguments)}}()},
{key:"find",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:f=Eg.objectDBs.get(a);if(!f){p.next=3;break}return p.abrupt("return",f);case 3:return k=Eg.Database.ensureDB("internal__objectdb-meta"),p.next=6,k.get(a);case 6:if(n=p.sent){p.next=9;break}return p.abrupt("return");case 9:return p.abrupt("return",this.named(a,n));case 10:case "end":return p.stop()}},d,this)}));return function(a){return c.apply(this,
arguments)}}()},{key:"named",value:function(c){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=Eg.objectDBs.get(c);if(a)return a;if(!g||!g.snapshotLocation)throw Error("need snapshotLocation");if("string"===typeof g.snapshotLocation)try{g.snapshotLocation=Eg.resource(g.snapshotLocation)}catch(d){g.snapshotLocation=Eg.resource(System.baseURL).join(g.snapshotLocation)}a=new this(c,g);Eg.objectDBs.set(c,a);Eg.Database.ensureDB("internal__objectdb-meta").set(c,Object.assign({},g,{snapshotLocation:g.snapshotLocation.url}))["catch"](function(d){return console.error("error writing objectdb meta:",
d)});return a}}]);uc(b,[{key:"destroy",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){var d,f,k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:d=Eg.Database.findDB(this.name+"-commits");if(!d){n.next=4;break}n.next=4;return d.destroy();case 4:f=Eg.Database.findDB(this.name+"-version-graph");if(!f){n.next=8;break}n.next=8;return f.destroy();case 8:return Eg.objectDBs["delete"](this.name),k=Eg.Database.ensureDB("internal__objectdb-meta"),n.next=12,k.remove(this.name);
case 12:case "end":return n.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"snapshotResourceFor",value:function(c){var g=c.content.slice(0,2);c=c.content.slice(2);return this.snapshotLocation.join("".concat(g,"/").concat(c,".json"))}},{key:"snapshotObject",value:function(){var c=Cb(regeneratorRuntime.mark(function u(a,d,f,k,n,p,q,r){var x,y;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return k=k||{},x=function(H){return H},D.next=4,
x(f,k);case 4:return y=D.sent,D.abrupt("return",this.commit(a,d,y,n,p,q,r));case 6:case "end":return D.stop()}},u,this)}));return function(a,d,f,k,n,p,q,r){return c.apply(this,arguments)}}()},{key:"loadObject",value:function(){var c=Cb(regeneratorRuntime.mark(function p(a,d,f,k,n){var q,r;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return f=f||{},u.next=3,this.loadSnapshot(a,d,k,n);case 3:return q=u.sent,r=function(x){return x},u.abrupt("return",r(q,f));case 6:case "end":return u.stop()}},
p,this)}));return function(a,d,f,k,n){return c.apply(this,arguments)}}()},{key:"has",value:function(){var c=Cb(regeneratorRuntime.mark(function f(a,d){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,this.objectStats(a,d);case 2:return k.abrupt("return",!!k.sent);case 3:case "end":return k.stop()}},f,this)}));return function(a,d){return c.apply(this,arguments)}}()},{key:"objects",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,
n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.objectStats(a);case 2:f=p.sent;if(!a){p.next=5;break}return p.abrupt("return",Object.keys(f||{}));case 5:k={};for(n in f)k[n]=Object.keys(f[n]);return p.abrupt("return",k);case 8:case "end":return p.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"objectStats",value:function(){var c=Cb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q,r,u,x,y,D,H,I,N,J,sa,ja,Ha,Qa,
ec;return regeneratorRuntime.wrap(function(mc){for(;;)switch(mc.prev=mc.next){case 0:k={};mc.t0=this.__commitDB;if(mc.t0){mc.next=6;break}mc.next=5;return this._commitDB();case 5:mc.t0=mc.sent;case 6:return n=mc.t0,p={reduce:!0,group:!0},a&&d?p.key="".concat(a,"\x00").concat(d):a&&(p.startkey="".concat(a,"\x00"),p.endkey="".concat(a,"\ufff0")),mc.prev=9,mc.next=12,n.pouchdb.query("nameWithMaxMinTimestamp_index",p);case 12:q=mc.sent;r=q.rows;u=fa(r);try{for(u.s();!(x=u.n()).done;)y=x.value,D=y.key,
H=y.value,I=H.count,N=H.max,J=H.min,sa=D.split("\x00"),ja=Wb(sa,2),Ha=ja[0],Qa=ja[1],ec=k[Ha]||(k[Ha]={}),ec[Qa]={count:I,newest:N,oldest:J}}catch(hc){u.e(hc)}finally{u.f()}mc.next=22;break;case 18:return mc.prev=18,mc.t1=mc["catch"](9),console.error(mc.t1),mc.abrupt("return",k);case 22:if(!a||!d){mc.next=24;break}return mc.abrupt("return",(k[a]||{})[d]);case 24:if(!a){mc.next=26;break}return mc.abrupt("return",k[a]);case 26:return mc.abrupt("return",k);case 27:case "end":return mc.stop()}},f,this,
[[9,18]])}));return function(a,d){return c.apply(this,arguments)}}()},{key:"getCommits",value:function(){var c=Cb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q,r,u=arguments;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return k=2<u.length&&void 0!==u[2]?u[2]:"HEAD",n=3<u.length&&void 0!==u[3]?u[3]:Infinity,x.next=4,this._log(a,d,k,n);case 4:p=x.sent;if(p.length){x.next=7;break}return x.abrupt("return",[]);case 7:x.t0=this.__commitDB;if(x.t0){x.next=12;break}x.next=
11;return this._commitDB();case 11:x.t0=x.sent;case 12:return q=x.t0,x.next=15,q.getDocuments(p.map(function(y){return{id:y}}));case 15:return r=x.sent,x.abrupt("return",r);case 17:case "end":return x.stop()}},f,this)}));return function(a,d){return c.apply(this,arguments)}}()},{key:"getCommit",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:k.t0=this.__commitDB;if(k.t0){k.next=5;break}k.next=4;return this._commitDB();
case 4:k.t0=k.sent;case 5:return f=k.t0,k.abrupt("return",f.get(a));case 7:case "end":return k.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"getCommitsWithIds",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(a.length){k.next=2;break}return k.abrupt("return",[]);case 2:k.t0=this.__commitDB;if(k.t0){k.next=7;break}k.next=6;return this._commitDB();case 6:k.t0=k.sent;
case 7:return f=k.t0,k.abrupt("return",f.getDocuments(a.map(function(n){return{id:n}})));case 9:case "end":return k.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"getLatestCommit",value:function(){var c=Cb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q,r,u,x,y=arguments;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return k=2<y.length&&void 0!==y[2]?y[2]:"HEAD",n=3<y.length&&void 0!==y[3]?y[3]:!1,D.next=4,this._log(a,d,k,1);case 4:p=
D.sent;q=Wb(p,1);if(r=q[0]){D.next=9;break}return D.abrupt("return",null);case 9:D.t0=this.__commitDB;if(D.t0){D.next=14;break}D.next=13;return this._commitDB();case 13:D.t0=D.sent;case 14:return u=D.t0,D.next=17,u.get(r);case 17:x=D.sent;if(!x||!x.deleted||n){D.next=20;break}return D.abrupt("return",null);case 20:return D.abrupt("return",x);case 21:case "end":return D.stop()}},f,this)}));return function(a,d){return c.apply(this,arguments)}}()},{key:"commit",value:function(){var c=Cb(regeneratorRuntime.mark(function p(a,
d,f,k,n){var q,r,u,x,y,D,H,I,N,J,sa,ja,Ha,Qa,ec,mc,hc,Ua,xa,rc,Lb,Ac=arguments;return regeneratorRuntime.wrap(function(Xb){for(;;)switch(Xb.prev=Xb.next){case 0:q=5<Ac.length&&void 0!==Ac[5]?Ac[5]:"HEAD";r=6<Ac.length?Ac[6]:void 0;u=k.author;x=k.description;y=void 0===x?"no description":x;D=k.tags;H=void 0===D?[]:D;I=k.timestamp;N=k.message;J=void 0===N?"":N;sa=k.metadata;ja=k.preview;if(a){Xb.next=5;break}throw Error("object needs a type");case 5:if(d){Xb.next=7;break}throw Error("object needs a name");
case 7:if(u){Xb.next=9;break}throw Error("Cannot commit ".concat(a,"/").concat(d," without user"));case 9:Xb.t0=this.__versionDB;if(Xb.t0){Xb.next=14;break}Xb.next=13;return this._versionDB();case 13:Xb.t0=Xb.sent;case 14:return Ha=Xb.t0,Xb.next=17,this.versionGraph(a,d);case 17:mc=(ec=(Qa=Xb.sent)?Qa.refs[q]:null)?[ec]:[];if(!r){Xb.next=25;break}if(Qa){Xb.next=23;break}throw Error('Trying to store "'.concat(a,"/").concat(d,'" on top of expected version ').concat(r," but no version entry exists!"));
case 23:if(ec===r){Xb.next=25;break}throw Error('Trying to store "'.concat(a,"/").concat(d,'" on top of expected version ').concat(r," but ref ").concat(q," is of version ").concat(ec,"!"));case 25:Ua=(hc=Eg.isHash(f))?null:f?JSON.stringify(f):null;xa=this._createCommit(a,d,y,H,sa,u,I,J,mc,hc?null:f,Ua,n||ja,hc?f:null);if(!f||hc){Xb.next=39;break}rc=this.snapshotResourceFor(xa);Xb.next=32;return rc.parent().ensureExistance();case 32:if(!rc.canDealWithJSON){Xb.next=37;break}Xb.next=35;return rc.writeJson(f);
case 35:Xb.next=39;break;case 37:return Xb.next=39,rc.write(Ua);case 39:Xb.t1=this.__commitDB;if(Xb.t1){Xb.next=44;break}Xb.next=43;return this._commitDB();case 43:Xb.t1=Xb.sent;case 44:return Lb=Xb.t1,Xb.next=47,Lb.set(xa._id,xa);case 47:return xa=Xb.sent,Qa||(Qa={refs:{},history:{}}),Qa.refs[q]=xa._id,Qa.history[xa._id]=mc,Xb.next=53,Ha.set(a+"/"+d,Qa);case 53:return Xb.abrupt("return",xa);case 54:case "end":return Xb.stop()}},p,this)}));return function(a,d,f,k,n){return c.apply(this,arguments)}}()},
{key:"loadSnapshot",value:function(){var c=Cb(regeneratorRuntime.mark(function k(a,d,f){var n,p,q,r=arguments;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:n=3<r.length&&void 0!==r[3]?r[3]:"HEAD";if(!f||"string"===typeof f){u.next=5;break}p=f;u.next=20;break;case 5:if(!f){u.next=17;break}u.t0=this.__commitDB;if(u.t0){u.next=11;break}u.next=10;return this._commitDB();case 10:u.t0=u.sent;case 11:return q=u.t0,u.next=14,q.get(f);case 14:p=u.sent;u.next=20;break;case 17:return u.next=
19,this.getLatestCommit(a,d,n);case 19:p=u.sent;case 20:if(p){u.next=22;break}throw Error("Cannot find commit to loadSnapshot for ".concat(a,"/").concat(d," (using ").concat(f,")"));case 22:return u.abrupt("return",this.snapshotResourceFor(p).readJson());case 23:case "end":return u.stop()}},k,this)}));return function(a,d,f){return c.apply(this,arguments)}}()},{key:"revert",value:function(){var c=Cb(regeneratorRuntime.mark(function n(a,d,f,k){var p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=
r.next){case 0:r.t0=this.__versionDB;if(r.t0){r.next=5;break}r.next=4;return this._versionDB();case 4:r.t0=r.sent;case 5:return p=r.t0,r.next=8,p.get(a+"/"+d);case 8:return q=r.sent,q.refs[f||"HEAD"]=k,delete q.deleted,r.next=13,p.set("".concat(a,"/").concat(d),q);case 13:return r.abrupt("return",q);case 14:case "end":return r.stop()}},n,this)}));return function(a,d,f,k){return c.apply(this,arguments)}}()},{key:"_createCommit",value:function(c,g,a,d,f,k,n){var p=7<arguments.length&&void 0!==arguments[7]?
arguments[7]:"",q=8<arguments.length&&void 0!==arguments[8]?arguments[8]:[],r=9<arguments.length?arguments[9]:void 0,u=10<arguments.length?arguments[10]:void 0,x=11<arguments.length?arguments[11]:void 0,y=12<arguments.length?arguments[12]:void 0;!x&&r&&r.preview&&(x=r.preview);return this._createCommitFromSpec({name:g,type:c,timestamp:n||Date.now(),author:{name:k.name,email:k.email,realm:k.realm},tags:d,description:a,preview:x,message:p,content:y||u&&Eg.sha1(u)||null,deleted:!y&&!r,metadata:f,ancestors:q},
!0)}},{key:"_createCommitFromSpec",value:function(c){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!c.name)throw Error("commit needs name");if(!c.type)throw Error("commit needs type");if(!c.author)throw Error("commit needs author");if(!c.author.name)throw Error("commit needs author.name");c.timestamp||(c.timestamp=Date.now());c.tags||(c.tags=[]);!g&&c.content&&(g=Eg.isHash(c.content),g||(c.content=Eg.sha1(c.content)));g=Eg.obj.dissoc(c,["preview"]);g=Eg.sha1(JSON.stringify(g));
return Object.assign(c,{_id:g})}},{key:"_commitDB",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){var d,f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!this.__commitDB){k.next=2;break}return k.abrupt("return",this.__commitDB);case 2:d=this.name+"-commits";f=Eg.Database.findDB(d);if(!f){k.next=6;break}return k.abrupt("return",this.__commitDB=f);case 6:return f=Eg.Database.ensureDB(d),k.next=9,f.addDesignDocs(this._commitdb_indexes);case 9:return k.abrupt("return",
this.__commitDB=f);case 10:case "end":return k.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"close",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!this.__commitDB){d.next=4;break}d.next=3;return this.__commitDB.close();case 3:this.__commitDB=null;case 4:if(!this.__versionDB){d.next=8;break}d.next=7;return this.__versionDB.close();case 7:this.__versionDB=null;case 8:case "end":return d.stop()}},
a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"versionGraph",value:function(){var c=Cb(regeneratorRuntime.mark(function f(a,d){var k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:p.t0=this.__versionDB;if(p.t0){p.next=5;break}p.next=4;return this._versionDB();case 4:p.t0=p.sent;case 5:return k=p.t0,p.next=8,k.get(a+"/"+d);case 8:return n=p.sent,p.abrupt("return",!n||n.deleted||n._deleted?null:n);case 10:case "end":return p.stop()}},f,this)}));
return function(a,d){return c.apply(this,arguments)}}()},{key:"_log",value:function(){var c=Cb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q,r,u,x=arguments;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return k=3<x.length&&void 0!==x[3]?x[3]:Infinity,y.next=4,this.versionGraph(a,d);case 4:if((n=y.sent)&&!n.deleted&&!n._deleted){y.next=7;break}return y.abrupt("return",[]);case 7:p=n.refs.HEAD,q=[];case 9:if(!q.includes(p)){y.next=12;break}throw Error("cyclic version graph???");
case 12:q.push(p);r=n.history[p]||[];u=Wb(r,1);if((p=u[0])&&!(q.length>=k)){y.next=18;break}return y.abrupt("break",20);case 18:y.next=9;break;case 20:return y.abrupt("return",q);case 21:case "end":return y.stop()}},f,this)}));return function(a,d){return c.apply(this,arguments)}}()},{key:"_findTimestampedVersionsOfObjectNamed",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r,u,x,y,D,H,I,N,J,sa=arguments;return regeneratorRuntime.wrap(function(ja){for(;;)switch(ja.prev=
ja.next){case 0:f=1<sa.length&&void 0!==sa[1]?sa[1]:{};k=f.include_docs;n=void 0===k?!0:k;p=f.descending;q=void 0===p?!0:p;r=f.startTime;u=void 0===r?"0".repeat(13):r;x=f.endTime;y=void 0===x?"9".repeat(13):x;D="".concat(a,"\x00").concat(q?y:u);H="".concat(a,"\x00").concat(q?u:y);ja.t0=this.__commitDB;if(ja.t0){ja.next=9;break}ja.next=8;return this._commitDB();case 8:ja.t0=ja.sent;case 9:return I=ja.t0,ja.next=12,I.pouchdb.query("nameAndTimestamp_index",Object.assign({},f,{descending:q,include_docs:n,
startkey:D,endkey:H}));case 12:return N=ja.sent,J=N.rows,ja.abrupt("return",n?J.map(function(Ha){return Ha.doc}):J.map(function(Ha){return Ha.id}));case 15:case "end":return ja.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"_versionDB",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){var d,f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!this.__versionDB){k.next=2;break}return k.abrupt("return",this.__versionDB);case 2:d=
this.name+"-version-graph";f=Eg.Database.findDB(d);if(!f){k.next=6;break}return k.abrupt("return",this.__versionDB=f);case 6:return f=Eg.Database.ensureDB(d),k.next=9,f.addDesignDocs(this._versiondb_indexes);case 9:return k.abrupt("return",this.__versionDB=f);case 10:case "end":return k.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"exportToDir",value:function(){var c=Cb(regeneratorRuntime.mark(function f(a,d){var k=this,n,p,q,r,u,x,y,D,H,I,N,J,sa,ja,Ha,Qa,ec,mc,hc,
Ua,xa,rc,Lb,Ac,Xb,qd,La,Fd,na,Va,yd,me=arguments;return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=ta.next){case 0:n=2<me.length&&void 0!==me[2]?me[2]:!1;p=3<me.length&&void 0!==me[3]?me[3]:!1;"string"===typeof a&&(a=Eg.resource(a));ta.t0=this.__commitDB;if(ta.t0){ta.next=8;break}ta.next=7;return this._commitDB();case 7:ta.t0=ta.sent;case 8:ta.t1=this.__versionDB;if(ta.t1){ta.next=14;break}ta.next=13;return this._versionDB();case 13:ta.t1=ta.sent;case 14:q=ta.t1;r=[];if(d){ta.next=
50;break}ta.next=19;return q.getAll();case 19:u=ta.sent,x=fa(u),ta.prev=21,x.s();case 23:if((y=x.n()).done){ta.next=40;break}D=y.value;H=D.refs;I=D.history;N=D._id;if(!N.startsWith("_")){ta.next=27;break}return ta.abrupt("continue",38);case 27:return ta.next=29,this.getCommit(H.HEAD||Object.keys(I)[0]);case 29:return J=ta.sent,sa=J.type,ja=J.name,Ha=a.join(sa).join(ja).asDirectory(),Qa=Object.keys(I),ta.next=36,this.getCommitsWithIds(Qa);case 36:ec=ta.sent,r.push({refs:H,history:I,currentExportDir:Ha,
commits:ec,name:ja,type:sa});case 38:ta.next=23;break;case 40:ta.next=45;break;case 42:ta.prev=42,ta.t2=ta["catch"](21),x.e(ta.t2);case 45:return ta.prev=45,x.f(),ta.finish(45);case 48:ta.next=76;break;case 50:mc=fa(d),ta.prev=51,mc.s();case 53:if((hc=mc.n()).done){ta.next=68;break}Ua=hc.value;xa=Ua.name;rc=Ua.type;Lb=a.join(rc).join(xa).asDirectory();ta.next=58;return this.versionGraph(rc,xa);case 58:return Ac=ta.sent,Xb=Ac.refs,qd=Ac.history,La=Object.keys(qd),ta.next=64,this.getCommitsWithIds(La);
case 64:Fd=ta.sent,r.push({refs:Xb,history:qd,currentExportDir:Lb,commits:Fd,name:xa,type:rc});case 66:ta.next=53;break;case 68:ta.next=73;break;case 70:ta.prev=70,ta.t3=ta["catch"](51),mc.e(ta.t3);case 73:return ta.prev=73,mc.f(),ta.finish(73);case 76:na=regeneratorRuntime.mark(function W(){var ea,Kb,V,Oa,U,fd,Td,nf,Je,rf,fh,zi,Sh;return regeneratorRuntime.wrap(function(Hi){for(;;)switch(Hi.prev=Hi.next){case 0:return ea=yd[Va],Kb=ea.refs,V=ea.history,Oa=ea.currentExportDir,U=ea.commits,fd=ea.name,
Td=ea.type,p||(U=U.filter(function(Fj){return!Fj.deleted})),nf=n?U.map(function(Fj){if(Fj.deleted||Fj._deleted||!Fj.content)return null;delete Fj._rev;Fj=k.snapshotResourceFor(Fj);var vk=Oa.join(Fj.parent().name()+"/"+Fj.name());return{from:Fj,to:vk}}).filter(Boolean):[],n||U.forEach(function(Fj){delete Fj._rev}),Hi.next=6,Oa.ensureExistance();case 6:return Hi.next=8,Oa.join("index.json").writeJson({name:fd,type:Td});case 8:return Hi.next=10,Oa.join("commits.json").writeJson(U);case 10:return Hi.next=
12,Oa.join("history.json").writeJson({refs:Kb,history:V});case 12:Je=fa(nf),Hi.prev=13,Je.s();case 15:if((rf=Je.n()).done){Hi.next=21;break}fh=rf.value;zi=fh.from;Sh=fh.to;Hi.next=19;return zi.copyTo(Sh);case 19:Hi.next=15;break;case 21:Hi.next=26;break;case 23:Hi.prev=23,Hi.t0=Hi["catch"](13),Je.e(Hi.t0);case 26:return Hi.prev=26,Je.f(),Hi.finish(26);case 29:case "end":return Hi.stop()}},W,null,[[13,23,26,29]])}),Va=0,yd=r;case 78:if(!(Va<yd.length)){ta.next=83;break}return ta.delegateYield(na(),
"t4",80);case 80:Va++;ta.next=78;break;case 83:case "end":return ta.stop()}},f,this,[[21,42,45,48],[51,70,73,76]])}));return function(a,d){return c.apply(this,arguments)}}()},{key:"exportToSpecs",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r,u,x,y,D,H,I,N,J,sa,ja=arguments;return regeneratorRuntime.wrap(function(Ha){for(;;)switch(Ha.prev=Ha.next){case 0:f=1<ja.length&&void 0!==ja[1]?ja[1]:!1;k=[];if(a){Ha.next=11;break}a=[];Ha.next=6;return this.objectStats();case 6:Ha.t0=
Ha.sent;if(Ha.t0){Ha.next=9;break}Ha.t0={};case 9:for(p in n=Ha.t0,n)for(q in n[p])a.push({type:p,name:q});case 11:r=fa(a),Ha.prev=12,r.s();case 14:if((u=r.n()).done){Ha.next=30;break}x=u.value;y=x.name;D=x.type;Ha.next=18;return this.versionGraph(D,y);case 18:return H=Ha.sent,I=H.refs,N=H.history,J=Object.keys(N),Ha.next=24,this.getCommitsWithIds(J);case 24:sa=Ha.sent,f||(sa=sa.filter(function(Qa){return!Qa.deleted})),sa.forEach(function(Qa){delete Qa._rev}),k.push({type:D,name:y,commits:sa,history:{refs:I,
history:N}});case 28:Ha.next=14;break;case 30:Ha.next=35;break;case 32:Ha.prev=32,Ha.t1=Ha["catch"](12),r.e(Ha.t1);case 35:return Ha.prev=35,r.f(),Ha.finish(35);case 38:return Ha.abrupt("return",k);case 39:case "end":return Ha.stop()}},d,this,[[12,32,35,38]])}));return function(a){return c.apply(this,arguments)}}()},{key:"importFromDir",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r,u,x,y,D,H=arguments;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=
I.next){case 0:return D=function(){D=Cb(regeneratorRuntime.mark(function sa(J){var ja,Ha,Qa,ec,mc,hc,Ua,xa;return regeneratorRuntime.wrap(function(rc){for(;;)switch(rc.prev=rc.next){case 0:return rc.next=2,Promise.all([J.join("index.json").readJson(),J.join("commits.json").readJson(),J.join("history.json").readJson()]);case 2:ja=rc.sent;Ha=Wb(ja,3);Qa=Ha[0];ec=Qa.type;mc=Qa.name;hc=Ha[1];Ua=Ha[2];if(!k){rc.next=15;break}rc.next=12;return J.dirList(1,{exclude:function(Lb){return!Lb.isDirectory()}});
case 12:rc.t0=rc.sent;rc.next=16;break;case 15:rc.t0=[];case 16:return xa=rc.t0,rc.abrupt("return",{dir:J,type:ec,name:mc,commits:hc,history:Ua,snapshotDirs:xa});case 18:case "end":return rc.stop()}},sa)}));return D.apply(this,arguments)},y=function(N){return D.apply(this,arguments)},f=1<H.length&&void 0!==H[1]?H[1]:!1,k=2<H.length&&void 0!==H[2]?H[2]:!1,I.next=6,a.dirList(3,{exclude:function(N){return!N.isDirectory()&&"index.json"!==N.name()}});case 6:n=I.sent,n=n.filter(function(N){return"index.json"===
N.name()}),p=n.map(function(N){return N.parent()}),q=[],r=fa(p),I.prev=12,r.s();case 14:if((u=r.n()).done){I.next=23;break}x=u.value;I.t0=q;I.next=19;return y(x);case 19:I.t1=I.sent,I.t0.push.call(I.t0,I.t1);case 21:I.next=14;break;case 23:I.next=28;break;case 25:I.prev=25,I.t2=I["catch"](12),r.e(I.t2);case 28:return I.prev=28,r.f(),I.finish(28);case 31:return I.abrupt("return",this.importFromSpecs(q,f,k));case 32:case "end":return I.stop()}},d,this,[[12,25,28,31]])}));return function(a){return c.apply(this,
arguments)}}()},{key:"importFromSpecs",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r,u,x,y,D,H,I=arguments;return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:f=1<I.length&&void 0!==I[1]?I[1]:!1;k=2<I.length&&void 0!==I[2]?I[2]:!1;if(f){N.next=28;break}N.t0=this.__versionDB;if(N.t0){N.next=8;break}N.next=7;return this._versionDB();case 7:N.t0=N.sent;case 8:n=N.t0,p=fa(a),N.prev=10,p.s();case 12:if((q=p.n()).done){N.next=20;break}r=q.value;
u=r.type;x=r.name;N.next=16;return n.get("".concat(u,"/").concat(x));case 16:if(!N.sent){N.next=18;break}throw Error("Import failed: object ".concat(u,"/").concat(x," already exists and overwrite is not allowed"));case 18:N.next=12;break;case 20:N.next=25;break;case 22:N.prev=22,N.t1=N["catch"](10),p.e(N.t1);case 25:return N.prev=25,p.f(),N.finish(25);case 28:y=fa(a),N.prev=29,y.s();case 31:if((D=y.n()).done){N.next=37;break}H=D.value;N.next=35;return this.importFromSpec(H,!0,k);case 35:N.next=31;
break;case 37:N.next=42;break;case 39:N.prev=39,N.t2=N["catch"](29),y.e(N.t2);case 42:return N.prev=42,y.f(),N.finish(42);case 45:return N.abrupt("return",a);case 46:case "end":return N.stop()}},d,this,[[10,22,25,28],[29,39,42,45]])}));return function(a){return c.apply(this,arguments)}}()},{key:"importFromSpec",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r,u,x,y,D,H=arguments;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:f=1<H.length&&
void 0!==H[1]?H[1]:!1;k=2<H.length&&void 0!==H[2]?H[2]:!1;I.t0=this.__versionDB;if(I.t0){I.next=7;break}I.next=6;return this._versionDB();case 6:I.t0=I.sent;case 7:n=I.t0;I.t1=this.__commitDB;if(I.t1){I.next=13;break}I.next=12;return this._commitDB();case 12:I.t1=I.sent;case 13:p=I.t1;q=this.snapshotLocation;r=a.type;u=a.name;x=a.commits;y=a.history;D=a.snapshotDirs;I.t2=!f;if(!I.t2){I.next=21;break}I.next=20;return n.get("".concat(r,"/").concat(u));case 20:I.t2=I.sent;case 21:if(!I.t2){I.next=23;
break}throw Error("Import failed: object ".concat(r,"/").concat(u," already exists and overwrite is not allowed"));case 23:return I.next=25,Promise.all([p.setDocuments(x),n.set("".concat(r,"/").concat(u),y)].concat(db(D&&k?D.map(function(N){return N.copyTo(q.join(N.name()).asDirectory())}):[])));case 25:return I.abrupt("return",a);case 26:case "end":return I.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"importFromResource",value:function(){var c=Cb(regeneratorRuntime.mark(function n(a,
d,f,k){var p,q,r=arguments;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return p=4<r.length&&void 0!==r[4]?r[4]:!1,u.next=3,f.readJson();case 3:q=u.sent;u.t0=p;if(!u.t0){u.next=9;break}u.next=8;return this.has(a,d);case 8:u.t0=u.sent;case 9:if(!u.t0){u.next=12;break}u.next=12;return this["delete"](a,d,!1);case 12:return u.abrupt("return",this.commit(a,d,q,k));case 13:case "end":return u.stop()}},n,this)}));return function(a,d,f,k){return c.apply(this,arguments)}}()},
{key:"replicateTo",value:function(c,g,a,d){return(new Eg.Synchronization(this,c,g,a,Object.assign({method:"replicateTo"},d))).start()}},{key:"replicateFrom",value:function(c,g,a,d){return(new Eg.Synchronization(this,c,g,a,Object.assign({method:"replicateFrom"},d))).start()}},{key:"sync",value:function(c,g,a,d){return(new Eg.Synchronization(this,c,g,a,Object.assign({method:"sync"},d))).start()}},{key:"getConflicts",value:function(){var c=Cb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=
r.next){case 0:q=function(){q=Cb(regeneratorRuntime.mark(function D(x,y){var H;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,x.getConflicts({include_docs:!0});case 2:return H=I.sent,I.next=5,Promise.all(H.map(function(){var N=Cb(regeneratorRuntime.mark(function ja(sa){var Ha,Qa,ec,mc,hc;return regeneratorRuntime.wrap(function(Ua){for(;;)switch(Ua.prev=Ua.next){case 0:Ha=sa.id;Qa=sa.rev;ec=sa.conflicts;mc=sa.doc;if(!d||!d[y]||d[y][Ha]){Ua.next=3;break}return Ua.abrupt("return",
null);case 3:if(!a){Ua.next=8;break}hc=ec.map(function(xa){return{id:Ha,rev:xa}});Ua.next=7;return x.getDocuments(hc);case 7:ec=Ua.sent;case 8:return a?Eg.obj.dissoc(mc,["_conflicts"]):mc=null,Ua.abrupt("return",{id:Ha,rev:Qa,conflicts:ec,kind:y,doc:mc});case 10:case "end":return Ua.stop()}},ja)}));return function(sa){return N.apply(this,arguments)}}()));case 5:return I.t0=Boolean,I.abrupt("return",I.sent.filter(I.t0));case 7:case "end":return I.stop()}},D)}));return q.apply(this,arguments)};p=function(u,
x){return q.apply(this,arguments)};r.t0=this.__commitDB;if(r.t0){r.next=7;break}r.next=6;return this._commitDB();case 6:r.t0=r.sent;case 7:k=r.t0;r.t1=this.__versionDB;if(r.t1){r.next=13;break}r.next=12;return this._versionDB();case 12:r.t1=r.sent;case 13:return n=r.t1,r.next=16,p(n,"versions");case 16:return r.t2=r.sent,r.next=19,p(k,"commits");case 19:return r.t3=r.sent,r.abrupt("return",{versionConflicts:r.t2,commitConflicts:r.t3});case 21:case "end":return r.stop()}},f,this)}));return function(a,
d){return c.apply(this,arguments)}}()},{key:"resolveConflict",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:f=a.resolved;k=a["delete"];n=a.kind;p=a.id;if("versions"!==n){r.next=10;break}r.t0=this.__versionDB;if(r.t0){r.next=7;break}r.next=6;return this._versionDB();case 6:r.t0=r.sent;case 7:q=r.t0;r.next=20;break;case 10:if("commits"!==n){r.next=19;break}r.t1=this.__commitDB;if(r.t1){r.next=
16;break}r.next=15;return this._commitDB();case 15:r.t1=r.sent;case 16:q=r.t1;r.next=20;break;case 19:throw Error("Unknown conflict kind: ".concat(n));case 20:return r.next=22,q.set(p,f);case 22:return r.next=24,Promise.all(k.map(function(u){return q.pouchdb.remove(p,u)}));case 24:case "end":return r.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"getDiff",value:function(){var c=Cb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q,r,u,x,y,D,H,I,N,J,sa,ja,Ha,Qa,ec,
mc,hc,Ua,xa,rc,Lb,Ac;return regeneratorRuntime.wrap(function(Xb){for(;;)switch(Xb.prev=Xb.next){case 0:k=a;"string"===typeof a&&(k=Eg.Database.ensureDB("".concat(a,"-commits")),d=Eg.Database.ensureDB("".concat(a,"-version-graph")));Xb.t0=this.__commitDB;if(Xb.t0){Xb.next=7;break}Xb.next=6;return this._commitDB();case 6:Xb.t0=Xb.sent;case 7:n=Xb.t0;Xb.t1=this.__versionDB;if(Xb.t1){Xb.next=13;break}Xb.next=12;return this._versionDB();case 12:Xb.t1=Xb.sent;case 13:return p=Xb.t1,Xb.next=16,n.diffWith(k);
case 16:return q=Xb.sent,Xb.next=19,p.diffWith(d);case 19:return r=Xb.sent,Xb.next=22,Promise.all(r.inLeft.map(function(){var qd=Cb(regeneratorRuntime.mark(function na(Fd){return regeneratorRuntime.wrap(function(Va){for(;;)switch(Va.prev=Va.next){case 0:return Va.t0=Fd.id,Va.next=3,p.get(Fd.id);case 3:return Va.t1=Va.sent,Va.abrupt("return",{id:Va.t0,doc:Va.t1});case 5:case "end":return Va.stop()}},na)}));return function(Fd){return qd.apply(this,arguments)}}()));case 22:return u=Xb.sent,Xb.t2=Eg.arr,
Xb.next=26,d.getAll();case 26:return Xb.t3=Xb.sent,Xb.t4=function(qd){return qd._id},x=Xb.t2.groupBy.call(Xb.t2,Xb.t3,Xb.t4),Xb.next=31,Promise.all(r.inRight.map(function(){var qd=Cb(regeneratorRuntime.mark(function na(Fd){return regeneratorRuntime.wrap(function(Va){for(;;)switch(Va.prev=Va.next){case 0:return Va.abrupt("return",{id:Fd.id,doc:x[Fd.id]});case 1:case "end":return Va.stop()}},na)}));return function(Fd){return qd.apply(this,arguments)}}()));case 31:return y=Xb.sent,Xb.next=34,Promise.all(r.changed.map(function(){var qd=
Cb(regeneratorRuntime.mark(function na(Fd){return regeneratorRuntime.wrap(function(Va){for(;;)switch(Va.prev=Va.next){case 0:return Va.t0=Object,Va.t1={},Va.t2=Fd.left,Va.next=5,p.get(Fd.left.id);case 5:return Va.t3=Va.sent,Va.next=8,d.get(Fd.right.id);case 8:return Va.t4=Va.sent,Va.t5={docA:Va.t3,docB:Va.t4},Va.abrupt("return",Va.t0.assign.call(Va.t0,Va.t1,Va.t2,Va.t5));case 11:case "end":return Va.stop()}},na)}));return function(Fd){return qd.apply(this,arguments)}}()));case 34:return D=Xb.sent,
Xb.t5=Eg.arr,Xb.next=38,k.getAll();case 38:Xb.t6=Xb.sent,Xb.t7=function(qd){return qd._id},H=Xb.t5.groupBy.call(Xb.t5,Xb.t6,Xb.t7),I=[],N=[],J=[],sa=fa(q.inLeft),Xb.prev=45,sa.s();case 47:if((ja=sa.n()).done){Xb.next=56;break}Ha=ja.value;Xb.t8=I;Xb.next=52;return n.get(Ha.id);case 52:Xb.t9=Xb.sent,Xb.t8.push.call(Xb.t8,Xb.t9);case 54:Xb.next=47;break;case 56:Xb.next=61;break;case 58:Xb.prev=58,Xb.t10=Xb["catch"](45),sa.e(Xb.t10);case 61:return Xb.prev=61,sa.f(),Xb.finish(61);case 64:Qa=fa(q.inRight),
Xb.prev=65,Qa.s();case 67:if((ec=Qa.n()).done){Xb.next=76;break}mc=ec.value;Xb.t11=N;Xb.next=72;return H[mc.id];case 72:Xb.t12=Xb.sent,Xb.t11.push.call(Xb.t11,Xb.t12);case 74:Xb.next=67;break;case 76:Xb.next=81;break;case 78:Xb.prev=78,Xb.t13=Xb["catch"](65),Qa.e(Xb.t13);case 81:return Xb.prev=81,Qa.f(),Xb.finish(81);case 84:hc=fa(q.changed),Xb.prev=85,hc.s();case 87:if((Ua=hc.n()).done){Xb.next=101;break}xa=Ua.value;Xb.t14=J;Xb.next=92;return n.get(xa.left.id);case 92:return Xb.t15=Xb.sent,Xb.t14.push.call(Xb.t14,
Xb.t15),Xb.t16=J,Xb.next=97,k.get(xa.right.id);case 97:Xb.t17=Xb.sent,Xb.t16.push.call(Xb.t16,Xb.t17);case 99:Xb.next=87;break;case 101:Xb.next=106;break;case 103:Xb.prev=103,Xb.t18=Xb["catch"](85),hc.e(Xb.t18);case 106:return Xb.prev=106,hc.f(),Xb.finish(106);case 109:return rc=I.map(function(qd){return Eg.obj.select(qd,["_id","name","type"])}),Lb=N.map(function(qd){return Eg.obj.select(qd,["_id","name","type"])}),Ac=J.map(function(qd){return Eg.obj.select(qd,["_id","name","type"])}),Xb.abrupt("return",
{changed:D,remote:y,local:u,changedCommitTypeAndNames:Ac,remoteCommitTypeAndNames:Lb,localCommitTypeAndNames:rc});case 113:case "end":return Xb.stop()}},f,this,[[45,58,61,64],[65,78,81,84],[85,103,106,109]])}));return function(a,d){return c.apply(this,arguments)}}()},{key:"delete",value:function(){var c=Cb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q,r,u,x,y,D,H,I,N,J,sa,ja,Ha=arguments;return regeneratorRuntime.wrap(function(Qa){for(;;)switch(Qa.prev=Qa.next){case 0:k=2<Ha.length&&void 0!==
Ha[2]?Ha[2]:!0;n=[];p=[];Qa.t0=this.__commitDB;if(Qa.t0){Qa.next=8;break}Qa.next=7;return this._commitDB();case 7:Qa.t0=Qa.sent;case 8:return q=Qa.t0,r={include_docs:!0,startkey:"".concat(a,"\x00").concat(d,"\x00"),endkey:"".concat(a,"\x00").concat(d,"\uffff")},Qa.next=12,q.query("nameAndTimestamp_index",r);case 12:u=Qa.sent;x=u.rows;y=fa(x);try{for(y.s();!(D=y.n()).done;)H=D.value.doc,H.deleted||H._deleted||!H.content||n.push(this.snapshotResourceFor(H)),p.push(Object.assign({},H,{_deleted:!0}))}catch(ec){y.e(ec)}finally{y.f()}Qa.t1=
this.__versionDB;if(Qa.t1){Qa.next=21;break}Qa.next=20;return this._versionDB();case 20:Qa.t1=Qa.sent;case 21:return I=Qa.t1,Qa.next=24,I.get(a+"/"+d);case 24:N=Qa.sent;J=N._id;sa=N._rev;ja={_id:J,_rev:sa,_deleted:!0};if(k){Qa.next=34;break}Qa.next=31;return q.setDocuments(p);case 31:return Qa.next=33,I.setDocuments([ja]);case 33:Promise.all(n.map(function(ec){return ec.remove()}));case 34:return Qa.abrupt("return",{commits:p,history:ja,resources:n});case 35:case "end":return Qa.stop()}},f,this)}));
return function(a,d){return c.apply(this,arguments)}}()},{key:"deleteCommit",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r,u,x,y,D,H,I,N,J,sa,ja=arguments;return regeneratorRuntime.wrap(function(Ha){for(;;)switch(Ha.prev=Ha.next){case 0:f=1<ja.length&&void 0!==ja[1]?ja[1]:!0;k=2<ja.length&&void 0!==ja[2]?ja[2]:"HEAD";if(!a||"string"===typeof a){Ha.next=6;break}n=a;Ha.next=16;break;case 6:if(!a){Ha.next=16;break}Ha.t0=this.__commitDB;if(Ha.t0){Ha.next=12;break}Ha.next=
11;return this._commitDB();case 11:Ha.t0=Ha.sent;case 12:return p=Ha.t0,Ha.next=15,p.get(a);case 15:n=Ha.sent;case 16:if(n){Ha.next=18;break}throw Error("commit needed!");case 18:Ha.t1=this.__versionDB;if(Ha.t1){Ha.next=23;break}Ha.next=22;return this._versionDB();case 22:Ha.t1=Ha.sent;case 23:q=Ha.t1;Ha.t2=this.__commitDB;if(Ha.t2){Ha.next=29;break}Ha.next=28;return this._commitDB();case 28:Ha.t2=Ha.sent;case 29:return r=Ha.t2,u=n,x=u.name,y=u.type,D=n.deleted||n._deleted||!n.content?[]:[this.snapshotResourceFor(n)],
H=[Object.assign({},n,{_deleted:!0})],Ha.next=35,q.get(y+"/"+x);case 35:if(I=Ha.sent){Ha.next=38;break}throw Error("No history for ".concat(y,"/").concat(x,"@").concat(n._id));case 38:if(I.refs[k]){Ha.next=40;break}throw Error("Cannot delete commit ".concat(y,"/").concat(x,"@").concat(n._id," b/c it is not where ref ").concat(k," is pointing!"));case 40:N=I.history[n._id]||[];J=Wb(N,1);if((sa=J[0])||!(1>=Object.keys(I.history).length)){Ha.next=45;break}I._deleted=!0;Ha.next=51;break;case 45:if(sa){Ha.next=
49;break}throw Error("Cannot delete commit ".concat(y,"/").concat(x,"@").concat(n._id," b/c it has no ancestor but there are still other commits!"));case 49:delete I.history[n._id],I.refs[k]=sa;case 51:if(f){Ha.next=58;break}Ha.next=54;return q.set(y+"/"+x,I);case 54:return Ha.next=56,r.setDocuments(H);case 56:return Ha.next=58,Promise.all(D.map(function(Qa){return Qa.remove()}));case 58:return Ha.abrupt("return",{commits:H,history:I,resources:D});case 59:case "end":return Ha.stop()}},d,this)}));
return function(a){return c.apply(this,arguments)}}()},{key:"_commitdb_indexes",get:function(){return[{name:"name_index",version:4,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name); }'},{name:"nameAndTimestamp_index",version:3,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name + "\x00" + doc.timestamp + "\x00" + doc._id); }'},{name:"nameWithMaxMinTimestamp_index",version:3,mapFn:'function(doc) { emit(doc.type + "\x00" + doc.name, doc.timestamp); }',reduceFn:"_stats"},{name:"nameTypeFilter",
version:9,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames)\n            return !!req.query.onlyTypesAndNames[doc.type + "/" + doc.name];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}},{key:"_versiondb_indexes",get:function(){return[{name:"nameTypeFilter",
version:3,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames) return !!req.query.onlyTypesAndNames[doc._id];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}}]);return b}();Eg.ObjectDB=ny;var a7=function(){function b(c,g,a,d){var f=4<arguments.length&&
void 0!==arguments[4]?arguments[4]:{};Sd(this,b);this.options=Object.assign({debug:!1,live:!1,method:"sync",replicationFilter:void 0},f);this.state="not started";this.method="";this.fromObjectDB=c;this.remoteCommitDB=g;this.remoteVersionDB=a;this.remoteLocation=d;this.deferred=Eg.promise.deferred();this.conflicts=[];this.changes=[];this.errors=[]}uc(b,[{key:"whenPaused",value:function(){var c=this;return Promise.resolve().then(function(){return Eg.promise.waitFor(function(){return c.isPaused||c.isComplete})}).then(function(){return c})}},
{key:"waitForIt",value:function(){return this.deferred.promise}},{key:"start",value:function(){if(!this.isSynchonizing)this._startReplicationAndCopy()["catch"](function(c){return console.error("Error starting synchronization: ",c)});return this}},{key:"_startReplicationAndCopy",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){var d=this,f,k,n,p,q,r,u,x,y,D,H,I,N,J,sa,ja,Ha,Qa,ec,mc,hc,Ua,xa,rc,Lb,Ac,Xb,qd,La,Fd,na,Va,yd,me;return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=
ta.next){case 0:me=function(za){if(!za.content)return null;var W=za.content.slice(0,2);za=za.content.slice(2);return"".concat(W,"/").concat(za,".json")};yd=function(za,W){if(W.length||"complete"===Fd&&"complete"===na&&La.isComplete()){mc.cancel();if(W.length){za.state="complete";za.errors=W;Xb.cancel();qd.cancel();var ea=Error("Synchronization error:\n  ".concat(W.join("\n  ")));ea.errors=W;console.log("".concat(za," errored"))}else console.log("".concat(za," completed"));ea?za.deferred.reject(ea):
za.deferred.resolve(za)}};Va=function(za){return"paused"===na&&"paused"===Fd&&0>=La.copyCalls&&0>=La.copyCallsWaiting?za.state="paused":"complete"===na&&"complete"===Fd&&La.isComplete()?za.state="complete":za.state="running"};f=this.fromObjectDB;k=this.remoteCommitDB;n=this.remoteVersionDB;p=this.remoteLocation;q=this.options;r=q.debug;u=q.live;x=void 0===u?!1:u;y=q.retry;D=void 0===y?!1:y;H=q.method;I=q.replicationFilter;N=q.pushDesignDocToRemote;J=void 0===N?!1:N;ta.t0=f.__versionDB;if(ta.t0){ta.next=
9;break}ta.next=8;return f._versionDB();case 8:ta.t0=ta.sent;case 9:sa=ta.t0;ta.t1=f.__commitDB;if(ta.t1){ta.next=15;break}ta.next=14;return f._commitDB();case 14:ta.t1=ta.sent;case 15:ja=ta.t1;Ha=f._commitdb_indexes;Qa=f._versiondb_indexes;ec=f.snapshotLocation;this.method=H;Ua=Ha.find(function(za){return"nameTypeFilter"===za.name});xa=Qa.find(function(za){return"nameTypeFilter"===za.name});if(!J){ta.next=27;break}console.log("adding commitNameTypeFilter");ta.next=24;return k.addDesignDoc(Ua);case 24:return console.log("adding versionNameTypeFilter"),
ta.next=27,n.addDesignDoc(xa);case 27:return rc={live:x,retry:D},Lb=Object.assign({},rc),Ac=Object.assign({},rc),I&&(Lb.filter=eval("(".concat(Ua.filterFn,")")),Lb.query_params=I,Ac.filter=eval("(".concat(xa.filterFn,")")),Ac.query_params=I),Xb=ja[H](k,Lb),qd=sa[H](n,Ac),La={copyCalls:0,copyCallsWaiting:0,nFilesToCopy:0,nFilesCopied:0,stopped:!1,isComplete:function(){return this.stopped||0>=this.copyCalls&&0>=this.copyCallsWaiting}},na=Fd="not started",this.versionReplication=qd,this.commitReplication=
Xb,this.snapshotReplication=La,hc=k.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),mc=n.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),hc.on("change",function(za){var W=za.id,ea=za.changes;za=za.doc._conflicts;r&&console.log("commit changes ".concat(W,":"),ea,za);za&&(console.log("commit conflict ".concat(W,":"),ea,za),d.conflicts.push({db:"commits",id:W,changes:ea,conflicts:za}))}),mc.on("change",function(za){var W=za.id,ea=za.changes;za=za.doc._conflicts;r&&console.log("version changes ".concat(W,
":"),ea,za);za&&(console.log("version conflict ".concat(W,":"),ea,za),d.conflicts.push({db:"versions",id:W,changes:ea,conflicts:za}))}),Xb.on("change",function(){var za=Cb(regeneratorRuntime.mark(function Kb(ea){var V,Oa,U,fd,Td,nf,Je,rf,fh,zi;return regeneratorRuntime.wrap(function(Sh){for(;;)switch(Sh.prev=Sh.next){case 0:"replicateTo"===H?ea={direction:"push",change:ea}:"replicateFrom"===H&&(ea={direction:"pull",change:ea}),V=ea,Oa=V.direction,U=V.change,fd=U.docs,console.log("".concat(d," ").concat("push"===
Oa?"send":"received"," ").concat(fd.length," commits")),Sh.prev=3,nf=[],Je=fa(fd),Sh.prev=6,Je.s();case 8:if((rf=Je.n()).done){Sh.next=17;break}fh=rf.value;if(!fh._id.startsWith("_")){Sh.next=12;break}return Sh.abrupt("continue",15);case 12:d.changes.push({direction:Oa,kind:"commits",id:fh._id,type:fh.type,name:fh.name}),(zi=me(fh))&&nf.push(zi);case 15:Sh.next=8;break;case 17:Sh.next=22;break;case 19:Sh.prev=19,Sh.t0=Sh["catch"](6),Je.e(Sh.t0);case 22:return Sh.prev=22,Je.f(),Sh.finish(22);case 25:La.nFilesToCopy+=
nf.length;if(!(0<La.copyCalls)){Sh.next=31;break}La.copyCallsWaiting++;Sh.next=30;return Eg.promise.waitFor(function(){return 0>=La.copyCalls});case 30:La.copyCallsWaiting--;case 31:return La.copyCalls++,Va(d),console.log("".concat(d," copying ").concat(nf.length," snapshots...")),Sh.next=36,Eg.promise.parallel(nf.map(function(Hi){return function(){var Fj=("push"===Oa?ec:p).join(Hi),vk=("push"===Oa?p:ec).join(Hi);return La.stopped?(console.warn("".concat(d," Stopping copying resources b/c synchronization ended (").concat(La.copyCalls,
", ").concat(Fj.url," => ").concat(vk.url,")")),Promise.resolve()):vk.exists().then(function(Hl){function pl(){var pk=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return Fj.copyTo(vk)["catch"](function(Sk){if(5<=pk)throw Sk;return pl(pk+1)})}return Hl?(r&&console.log("Skip copying to ".concat(vk.url,", already exist")),Promise.resolve()):Fj.exists().then(function(pk){if(!pk)return console.warn("Skip copying ".concat(Fj.url,", does not exist")),Promise.resolve();r&&console.log("".concat(d,
" Copying ").concat(Fj.url," => ").concat(vk.url));return pl(0).then(function(Sk){La.nFilesCopied++;La.stopped||0!==La.nFilesCopied%10||console.log("".concat(d," copied ").concat(La.nFilesCopied," of ").concat(La.nFilesToCopy," snapshots"));return Sk})})})}}),5);case 36:console.log("".concat(d," sending files done"));Sh.next=44;break;case 39:throw Sh.prev=39,Sh.t1=Sh["catch"](3),console.error("error in commitReplication onChange",Sh.t1),Td=Sh.t1,Sh.t1;case 44:return Sh.prev=44,La.copyCalls--,Va(d),
yd(d,Td?[Td]:[]),Sh.finish(44);case 49:case "end":return Sh.stop()}},Kb,null,[[3,39,44,49],[6,19,22,25]])}));return function(ea){return za.apply(this,arguments)}}()).on("paused",function(){Fd="paused";Va(d);r&&console.log("".concat(d," commit replication paused"))}).on("active",function(){Fd="active";Va(d);r&&console.log("".concat(d," commit replication active"))}).on("error",function(za){Fd="complete";Va(d);console.error("".concat(d," commit replication error"),za);yd(d,[za])}).on("complete",function(za){Fd=
"complete";Va(d);za="sync"===H?za.push.errors.concat(za.pull.errors):za.errors;yd(d,za)}),qd.on("change",function(za){"replicateTo"===H?za={direction:"push",change:za}:"replicateFrom"===H&&(za={direction:"pull",change:za});var W=za.direction;za=za.change;za.ok;var ea=za.docs;za.errors;r&&console.log("".concat(d," ").concat("push"===W?"send":"received"," ").concat(ea.length," histories"));ea.forEach(function(Kb){Kb._id.startsWith("_")||d.changes.push({direction:W,kind:"versions",id:Kb._id})})}).on("paused",
function(){na="paused";Va(d);r&&console.log("".concat(d," version replication paused"))}).on("active",function(za){na="active";Va(d);r&&console.log("".concat(d," version replication active"),za)}).on("error",function(za){na="complete";Va(d);console.error("".concat(d," version replication error"),za);yd(d,[za])}).on("complete",function(za){na="complete";Va(d);za="sync"===H?za.push.errors.concat(za.pull.errors):za.errors;yd(d,za)}),this.state="running",ta.abrupt("return",this);case 47:case "end":return ta.stop()}},
a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"safeStop",value:function(){var c=Cb(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if("not started"!==this.state&&this.isSynchonizing){d.next=2;break}return d.abrupt("return",this);case 2:return d.next=4,this.whenPaused();case 4:return d.abrupt("return",this.stop());case 5:case "end":return d.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},
{key:"stop",value:function(){if("not started"===this.state||!this.isSynchonizing)return this;this.commitReplication.cancel();this.versionReplication.cancel();this.snapshotReplication.stopped=!0;return this}},{key:"toString",value:function(){var c=this.method,g=this.fromObjectDB.name;c="sync"===c?"<=>":"replicateTo"===c?"=>":"replicateFrom"===c?"<=":"??";return"Synchronization(".concat(this.state,": ").concat(g," ").concat(c,")")}},{key:"isSynchonizing",get:function(){return this.isPaused||this.isRunning}},
{key:"isComplete",get:function(){return"complete"===this.state}},{key:"isRunning",get:function(){return"running"===this.state}},{key:"isPaused",get:function(){return"paused"===this.state}},{key:"changesByTypeAndName",get:function(){var c={push:{},pull:{}};this.changes.forEach(function(g){var a=g.direction,d=g.id,f=g.kind;if("_"!==d[0]){if("versions"===f)var k=c[a][d]||(c[a][d]=[]);else"commits"===f&&(d="".concat(g.type,"/").concat(g.name),k=c[a][d]||(c[a][d]=[]));k.push(g)}});return c}}]);return b}();
Eg.Synchronization=a7;var oy={describe:function(b){var c=this;return Cb(regeneratorRuntime.mark(function a(){var d,f,k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:n=function(q,r){q=q.find(function(J){return J.name===r}).node.value.body;var u=q.body||[],x=(q.comments||[]).find(function(J){return J.end<u[0].start});q={name:r,parameters:[],sideEffect:!1,returns:null,description:""};if(x&&x.text.trim()){x=Eg.string.changeIndent(x.text," ",0).split("\n");x=fa(x);var y;
try{for(x.s();!(y=x.n()).done;){var D=y.value;if(D.startsWith("ignore-in-doc")){q.description="";break}D.startsWith("side effect:")?q.sideEffect=JSON.parse(D.split(":")[1]):D.startsWith("returns:")?q.returns=D.split(":")[1].trim():q.description+=D+"\n"}}catch(J){x.e(J)}finally{x.f()}}y=fa(u);var H;try{for(y.s();!(H=y.n()).done;){var I=H.value;if("checkArgs"===Eg.Path("declarations.0.init.callee.name").get(I)){var N=Eg.Path("declarations.0.id.properties").get(I);N&&(q.parameters=N.map(function(J){return J.key.name}))}}}catch(J){y.e(J)}finally{y.f()}return q};
p.prev=1;if(c._methodSpecs){p.next=9;break}p.next=5;return lively.modules.module("lively.storage/objectdb.js").source();case 5:d=p.sent,f=Eg.parse(d,{withComments:!0}),k=Eg.categorizer.findDecls(f),c._methodSpecs=k.filter(function(q){return q.parent&&"ObjectDBInterface"===q.parent.name});case 9:return p.abrupt("return",b?n(c._methodSpecs,b):c._methodSpecs.map(function(q){return n(c._methodSpecs,q.name)}).filter(Boolean));case 12:return p.prev=12,p.t0=p["catch"](1),p.abrupt("return","Error in describe ".concat(p.t0));
case 15:case "end":return p.stop()}},a,null,[[1,12]])}))()},ensureDB:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,d,f,k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=Eg.checkArgs(b,{db:"string",snapshotLocation:"string|Resource"}),d=a.db,f=a.snapshotLocation,n.next=3,Eg.ObjectDB.find(d);case 3:k=n.sent;if(!k){n.next=6;break}return n.abrupt("return",!1);case 6:return Eg.ObjectDB.named(d,{snapshotLocation:f}),n.abrupt("return",!0);case 8:case "end":return n.stop()}},
g)}))()},destroyDB:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,d,f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return a=Eg.checkArgs(b,{db:"string"}),d=a.db,k.next=3,Eg.ObjectDB.find(d);case 3:if(f=k.sent){k.next=6;break}return k.abrupt("return",!1);case 6:return k.next=8,f.destroy();case 8:return k.abrupt("return",!0);case 9:case "end":return k.stop()}},g)}))()},fetchCommits:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,d,
f,k,n,p,q,r,u,x,y,D,H,I,N,J,sa,ja,Ha,Qa,ec,mc,hc,Ua,xa,rc,Lb,Ac,Xb,qd;return regeneratorRuntime.wrap(function(La){for(;;)switch(La.prev=La.next){case 0:return a=Eg.checkArgs(b,{db:"string",ref:"string|undefined",type:"string|undefined",typesAndNames:"Array|undefined",knownCommitIds:"object|undefined",includeDeleted:"boolean|undefined",filterFn:"string|undefined"}),d=a.db,f=a.ref,k=a.type,n=a.typesAndNames,p=a.knownCommitIds,q=a.includeDeleted,r=a.filterFn,La.next=3,Eg.ObjectDB.find(d);case 3:u=La.sent;
f||(f="HEAD");if(u){La.next=7;break}throw Error("db ".concat(d," does not exist"));case 7:La.t0=u.__commitDB;if(La.t0){La.next=12;break}La.next=11;return u._commitDB();case 11:La.t0=La.sent;case 12:La.t1=u.__versionDB;if(La.t1){La.next=18;break}La.next=17;return u._versionDB();case 17:La.t1=La.sent;case 18:x=La.t1;y={};D={};if(n){H=y.keys=[];I=fa(n);try{for(I.s();!(N=I.n()).done;)J=N.value,sa=J.type,ja=J.name,Ha=J.ref,H.push("".concat(sa,"/").concat(ja)),Ha&&(D["".concat(sa,"/").concat(ja)]=Ha)}catch(Fd){I.e(Fd)}finally{I.f()}}else k&&
(y.startkey="".concat(k,'/\x00"'),y.endkey="".concat(k,'/\uffff"'));La.next=24;return x.getAll(y);case 24:Qa=La.sent,ec=[],mc=fa(Qa),La.prev=27,mc.s();case 29:if((hc=mc.n()).done){La.next=42;break}if(Ua=hc.value){La.next=33;break}return La.abrupt("continue",40);case 33:if(!Ua.deleted&&!Ua._deleted){La.next=35;break}return La.abrupt("continue",40);case 35:xa=Ua._id;rc=Ua.refs;if(!xa.startsWith("_")){La.next=38;break}return La.abrupt("continue",40);case 38:Lb=rc[D[xa]||f]||f,!Lb||p&&p.hasOwnProperty(Lb)||
ec.push(Lb);case 40:La.next=29;break;case 42:La.next=47;break;case 44:La.prev=44,La.t2=La["catch"](27),mc.e(La.t2);case 47:return La.prev=47,mc.f(),La.finish(47);case 50:return La.next=52,u.getCommitsWithIds(ec);case 52:Ac=La.sent;q||(Ac=Ac.filter(function(Fd){return Fd&&!Fd.deleted}));if(!r){La.next=70;break}La.prev=55;Xb=eval("(".concat(r,")"));if("function"===typeof Xb){La.next=59;break}throw Error("".concat(r," does not eval to a function!"));case 59:qd=Ac.filter(Xb);if(Array.isArray(qd)){La.next=
64;break}throw Error("".concat(r," does not return an array!"));case 64:Ac=qd;case 65:La.next=70;break;case 67:La.prev=67,La.t3=La["catch"](55),console.error("fetchCommits filterFn failed:",La.t3);case 70:return La.abrupt("return",Ac);case 71:case "end":return La.stop()}},g,null,[[27,44,47,50],[55,67]])}))()},fetchVersionGraph:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q,r;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=Eg.checkArgs(b,
{db:"string",type:"string",name:"string"}),d=a.db,f=a.type,k=a.name,u.next=3,Eg.ObjectDB.find(d);case 3:if(n=u.sent){u.next=6;break}throw Error("db ".concat(d," does not exist"));case 6:return u.next=8,n.versionGraph(f,k);case 8:return p=u.sent,q=p.refs,r=p.history,u.abrupt("return",{refs:q,history:r});case 12:case "end":return u.stop()}},g)}))()},exists:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q,r;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=
Eg.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined"}),d=a.db,f=a.type,k=a.name,n=a.ref,u.next=3,Eg.ObjectDB.find(d);case 3:return p=u.sent,u.next=6,p.versionGraph(f,k);case 6:if(q=u.sent){u.next=9;break}return u.abrupt("return",{exists:!1,commitId:void 0});case 9:n=n||"HEAD";if(r=q.refs[n]){u.next=13;break}return u.abrupt("return",{exists:!1,commitId:void 0});case 13:return u.abrupt("return",{exists:!0,commitId:r});case 14:case "end":return u.stop()}},g)}))()},fetchLog:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,
d,f,k,n,p,q,r,u,x,y,D,H,I,N,J,sa,ja,Ha,Qa;return regeneratorRuntime.wrap(function(ec){for(;;)switch(ec.prev=ec.next){case 0:return a=Eg.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined",limit:"number|undefined",includeCommits:"boolean|undefined",knownCommitIds:"object|undefined"},function(mc){return mc.type&&mc.name||mc.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),d=a.db,f=a.type,k=a.name,n=a.ref,p=a.commit,
q=a.limit,r=a.includeCommits,u=a.knownCommitIds,ec.next=3,Eg.ObjectDB.find(d);case 3:x=ec.sent;y=n||"HEAD";if(x){ec.next=7;break}throw Error("db ".concat(d," does not exist"));case 7:q||(q=Infinity);p||n||(n=y);if(!p){ec.next=18;break}D=p;if(f&&k){ec.next=18;break}ec.next=14;return x.getCommit(p);case 14:if(H=ec.sent){ec.next=17;break}throw Error("fetchLog: specified commit ".concat(p," but no commit with this id is in the database!"));case 17:Eg.__inter0__=H,f=Eg.__inter0__.type,k=Eg.__inter0__.name;
case 18:return ec.next=20,x.versionGraph(f,k);case 20:if(I=ec.sent){ec.next=23;break}throw Error("Unknown object ".concat(f,"/").concat(k));case 23:N=I.refs,J=I.history,D||(D=N[n]),sa=D,ja=[];case 27:if(!(ja.length<q)||ja.includes(sa)){ec.next=36;break}ja.push(sa);if((Ha=J[sa])&&Ha.length){ec.next=32;break}return ec.abrupt("break",36);case 32:Qa=Wb(Ha,1);sa=Qa[0];ec.next=27;break;case 36:if(!r){ec.next=41;break}u&&(ja=ja.filter(function(mc){return!u.hasOwnProperty(mc)}));ec.next=40;return x.getCommitsWithIds(ja);
case 40:ja=ec.sent;case 41:return ec.abrupt("return",ja);case 42:case "end":return ec.stop()}},g)}))()},fetchSnapshot:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q,r,u;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return a=Eg.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined"},function(y){return y.type&&y.name||y.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),
d=a.db,f=a.type,k=a.name,n=a.ref,p=a.commit,x.next=3,Eg.ObjectDB.find(d);case 3:q=x.sent;n=n||"HEAD";if(q){x.next=8;break}throw Error("db ".concat(d," does not exist"));case 8:if(p){x.next=17;break}x.next=11;return q.versionGraph(f,k);case 11:if(r=x.sent){x.next=14;break}throw Error("Unknown object ".concat(f,"/").concat(k));case 14:if(p=r.refs[n]){x.next=17;break}throw Error("Cannot find commit for ref ".concat(n," of ").concat(f,"/").concat(k));case 17:return x.next=19,q.getCommit(p);case 19:if(u=
x.sent){x.next=22;break}throw Error("Cannot find commit ".concat(p));case 22:return x.abrupt("return",q.loadSnapshot(void 0,void 0,u));case 23:case "end":return x.stop()}},g)}))()},revert:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=Eg.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",toCommitId:"string"}),d=a.db,f=a.type,k=a.name,n=a.ref,p=a.toCommitId,
r.next=3,Eg.ObjectDB.find(d);case 3:return q=r.sent,n||(n="HEAD"),r.abrupt("return",q.revert(f,k,n,p));case 6:case "end":return r.stop()}},g)}))()},commit:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q,r,u,x;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return a=Eg.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",snapshot:"object|string|undefined",preview:"string|undefined",commitSpec:"object",expectedParentCommit:"string|undefined"}),
d=a.db,f=a.type,k=a.name,n=a.ref,p=a.expectedParentCommit,q=a.commitSpec,r=a.snapshot,u=a.preview,y.next=3,Eg.ObjectDB.find(d);case 3:return x=y.sent,n||(n="HEAD"),y.abrupt("return",x.commit(f,k,r,q,u,n,p));case 6:case "end":return y.stop()}},g)}))()},exportToSpecs:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,d,f,k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=Eg.checkArgs(b,{db:"string",nameAndTypes:"Array|undefined",includeDeleted:"boolean|undefined"}),
d=a.db,f=a.nameAndTypes,n.next=3,Eg.ObjectDB.find(d);case 3:if(k=n.sent){n.next=6;break}throw Error("db ".concat(d," does not exist"));case 6:return n.abrupt("return",k.exportToSpecs(f));case 7:case "end":return n.stop()}},g)}))()},exportToDir:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q,r;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=Eg.checkArgs(b,{db:"string",url:"string",nameAndTypes:"Array|undefined",copyResources:"boolean|undefined",
includeDeleted:"boolean|undefined"}),d=a.db,f=a.url,k=a.nameAndTypes,n=a.copyResources,p=a.includeDeleted,u.next=3,Eg.ObjectDB.find(d);case 3:if(q=u.sent){u.next=6;break}throw Error("db ".concat(d," does not exist"));case 6:try{r=Eg.resource(f)}catch(x){r=Eg.resource(System.baseURL).join(f)}return u.abrupt("return",q.exportToDir(r,k,n,p));case 8:case "end":return u.stop()}},g)}))()},importFromDir:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=
r.next){case 0:return a=Eg.checkArgs(b,{db:"string",url:"string",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),d=a.db,f=a.url,k=a.overwrite,n=a.copyResources,r.next=3,Eg.ObjectDB.find(d);case 3:if(p=r.sent){r.next=6;break}throw Error("db ".concat(d," does not exist"));case 6:try{q=Eg.resource(f)}catch(u){q=Eg.resource(System.baseURL).join(f)}return r.abrupt("return",p.importFromDir(q,k,n));case 8:case "end":return r.stop()}},g)}))()},importFromSpecs:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,
d,f,k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return a=Eg.checkArgs(b,{db:"string",specs:"object",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),d=a.db,f=a.specs,k=a.overwrite,n=a.copyResources,q.next=3,Eg.ObjectDB.find(d);case 3:if(p=q.sent){q.next=6;break}throw Error("db ".concat(d," does not exist"));case 6:return q.abrupt("return",p.importFromSpecs(f,k,n));case 7:case "end":return q.stop()}},g)}))()},importFromResource:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,
d,f,k,n,p,q,r,u;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return a=Eg.checkArgs(b,{db:"string",type:"string",name:"string",url:"string",commitSpec:"object",purgeHistory:"boolean|undefined"}),d=a.db,f=a.type,k=a.name,n=a.url,p=a.commitSpec,q=a.purgeHistory,x.next=3,Eg.ObjectDB.find(d);case 3:if(r=x.sent){x.next=6;break}throw Error("db ".concat(d," does not exist"));case 6:try{u=Eg.resource(n)}catch(y){u=Eg.resource(System.baseURL).join(n)}return x.abrupt("return",
r.importFromResource(f,k,u,p,q));case 8:case "end":return x.stop()}},g)}))()},"delete":function(b){return Cb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return a=Eg.checkArgs(b,{db:"string",type:"string",name:"string",dryRun:"boolean|undefined"}),d=a.db,f=a.type,k=a.name,n=a.dryRun,q.next=3,Eg.ObjectDB.find(d);case 3:return p=q.sent,q.abrupt("return",p["delete"](f,k,"undefined"===typeof n||n));case 5:case "end":return q.stop()}},
g)}))()},deleteCommit:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,d,f,k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return a=Eg.checkArgs(b,{db:"string",commit:"string",dryRun:"boolean|undefined"}),d=a.db,f=a.commit,k=a.dryRun,p.next=3,Eg.ObjectDB.find(d);case 3:return n=p.sent,p.abrupt("return",n.deleteCommit(f,"undefined"===typeof k||k));case 5:case "end":return p.stop()}},g)}))()},fetchConflicts:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,
d,f,k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return a=Eg.checkArgs(b,{db:"string",includeDocs:"boolean|undefined",only:"object|undefined"}),d=a.db,f=a.includeDocs,k=a.only,p.next=3,Eg.ObjectDB.find(d);case 3:return n=p.sent,p.abrupt("return",n.getConflicts(f,k));case 5:case "end":return p.stop()}},g)}))()},resolveConflict:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=
r.next){case 0:return a=Eg.checkArgs(b,{db:"string",id:"string",kind:"string","delete":"Array",resolved:"object"}),d=a.db,f=a.resolved,k=a["delete"],n=a.kind,p=a.id,r.next=3,Eg.ObjectDB.find(d);case 3:return q=r.sent,r.abrupt("return",q.resolveConflict({resolved:f,"delete":k,kind:n,id:p}));case 5:case "end":return r.stop()}},g)}))()},fetchDiff:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,d,f,k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=
Eg.checkArgs(b,{db:"string",otherDB:"string"}),d=a.db,f=a.otherDB,n.next=3,Eg.ObjectDB.find(d);case 3:return k=n.sent,n.abrupt("return",k.getDiff(f));case 5:case "end":return n.stop()}},g)}))()},synchronize:function(b){return Cb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q,r,u,x,y,D,H;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return a=Eg.checkArgs(b,{db:"string",otherDB:"string",otherDBSnapshotLocation:"string|undefined",onlyTypesAndNames:"object|undefined",
method:"string|undefined"}),d=a.db,f=a.otherDB,k=a.otherDBSnapshotLocation,n=a.onlyTypesAndNames,p=a.method,I.next=3,Eg.ObjectDB.find(d);case 3:return k||(k=f.replace(/\/$/,"")+"/snapshots"),p||(p="replicateTo"),I.next=8,Eg.ObjectDB.find(d);case 8:return q=I.sent,I.next=11,Eg.ObjectDB.named(f,{snapshotLocation:k});case 11:return r=I.sent,I.next=14,r._commitDB();case 14:return u=I.sent,I.next=17,r._versionDB();case 17:return x=I.sent,y=r.snapshotLocation,D={replicationFilter:n?{onlyTypesAndNames:n}:
void 0,retry:!0,live:!0},H=q[p](u,x,y,D),I.next=23,H.whenPaused();case 23:return I.next=25,H.safeStop();case 25:return I.next=27,H.waitForIt();case 27:return I.abrupt("return",Eg.obj.select(H,["state","method","conflicts","errors","changesByTypeAndName"]));case 28:case "end":return I.stop()}},g)}))()}};Eg.ObjectDBInterface=oy;Eg.ObjectDBInterface=oy;var py=function(){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.location.origin+"/objectdb/";Sd(this,b);this.serverURL=
c}uc(b,[{key:"_processResponse",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return f=a.headers.get("content-type"),p.next=3,a.text();case 3:k=p.sent;if("application/json"===f)try{n=JSON.parse(k)}catch(q){}if(!(!a.ok||n&&n.error)){p.next=7;break}throw Error(n&&n.error||k||a.statusText);case 7:return p.abrupt("return",n||k);case 8:case "end":return p.stop()}},d)}));return function(a){return c.apply(this,
arguments)}}()},{key:"_GET",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,n,p=arguments;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return f=1<p.length&&void 0!==p[1]?p[1]:{},k=Object.keys(f).map(function(r){var u=f[r];"object"===ad(u)&&(u=JSON.stringify(u));return"".concat(r,"=").concat(encodeURIComponent(u))}).join("&"),n=this.serverURL+a+"?"+k,q.t0=this,q.next=6,fetch(n);case 6:return q.t1=q.sent,q.abrupt("return",q.t0._processResponse.call(q.t0,
q.t1));case 8:case "end":return q.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"_POST",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){var f,k,n=arguments;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return f=1<n.length&&void 0!==n[1]?n[1]:{},k=this.serverURL+a,p.t0=this,p.next=5,fetch(k,{method:"POST",body:JSON.stringify(f),headers:{"content-type":"application/json"}});case 5:return p.t1=p.sent,p.abrupt("return",
p.t0._processResponse.call(p.t0,p.t1));case 7:case "end":return p.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"describe",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._GET("describe",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"ensureDB",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=
f.next){case 0:return f.abrupt("return",this._POST("ensureDB",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"destroyDB",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("destroyDB",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"fetchCommits",
value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._GET("fetchCommits",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"fetchVersionGraph",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._GET("fetchVersionGraph",
a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"exists",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._GET("exists",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"fetchLog",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=
f.next){case 0:return f.abrupt("return",this._GET("fetchLog",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"fetchSnapshot",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._GET("fetchSnapshot",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"revert",
value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("revert",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"commit",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("commit",a));case 1:case "end":return f.stop()}},
d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"exportToSpecs",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._GET("exportToSpecs",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"exportToDir",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=
f.next){case 0:return f.abrupt("return",this._POST("exportToDir",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"importFromDir",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("importFromDir",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"importFromSpecs",
value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("importFromSpecs",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"importFromResource",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("importFromResource",
a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"delete",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("delete",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"deleteCommit",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=
f.next){case 0:return f.abrupt("return",this._POST("deleteCommit",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"fetchConflicts",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._GET("fetchConflicts",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"resolveConflict",
value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("resolveConflict",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"fetchDiff",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._GET("fetchDiff",
a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"synchronize",value:function(){var c=Cb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("synchronize",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()}]);return b}();Eg.ObjectDBHTTPInterface=py;Eg["default"]=ny;var el=window.lively.FreezerRuntime.recorderFor("lively.storage/storage-resource.js");
el.applyExclude=function(b,c){return c?"string"===typeof c?!b.url.includes(c):"function"===typeof c?!c(b):c instanceof RegExp?!c.test(b.url):!0:!0};el.Resource=so;el.Database=Vr;el.debug=!1;el.slashRe=/\//g;var b7=function(b){function c(){Sd(this,c);return g.apply(this,arguments)}vd(c,b);var g=qb(c);uc(c,null,[{key:"ensureDB",value:function(a,d){return ic(Ed(c),"ensureDB",this).call(this,"lively.storage-"+a,d)}}]);return c}(el.Database);el.StorageDatabase=b7;var mV=function(b){function c(){Sd(this,
c);return g.apply(this,arguments)}vd(c,b);var g=qb(c);uc(c,[{key:"read",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return el.debug&&console.log("[".concat(this,"] read")),p.next=3,this.db.get(this.pathWithoutQuery());case 3:return n=(k=p.sent)&&k.content,p.abrupt("return",n?"string"===typeof n?n:JSON.stringify(n):"");case 6:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,
arguments)}}()},{key:"readJson",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.read();case 2:return k=n.sent,n.abrupt("return","string"===typeof k?JSON.parse(k):k);case 4:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"write",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n=this;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=
p.next){case 0:el.debug&&console.log("[".concat(this,"] write"));f||(f="");if(!this.isDirectory()){p.next=4;break}throw Error("Cannot write into a directory! (".concat(this.url,")"));case 4:return p.next=6,this.db.update(this.pathWithoutQuery(),function(q){if(q&&q.isDirectory)throw Error("".concat(n.url," already exists and is a directory (cannot write into it!)"));var r=Date.now();return q?Object.assign({},q,{lastModified:r,size:f.length,content:f}):{etag:void 0,type:void 0,contentType:void 0,user:void 0,
group:void 0,mode:void 0,lastModified:r,created:r,size:"string"===typeof f?f.length:0,content:f}});case 6:return p.abrupt("return",this);case 7:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"writeJson",value:function(a){return this.write(a)}},{key:"mkdir",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:el.debug&&console.log("[".concat(this,"] mkdir"));
if(this.isDirectory()){p.next=3;break}throw Error("Cannot mkdir a file! (".concat(this.url,")"));case 3:return p.next=5,this.db.get(this.pathWithoutQuery());case 5:k=p.sent;if(!k){p.next=10;break}if(k.isDirectory){p.next=9;break}throw Error("".concat(this.url," already exists and is a file (cannot mkdir it!)"));case 9:return p.abrupt("return",this);case 10:return n=Date.now(),p.next=13,this.db.set(this.pathWithoutQuery(),{etag:void 0,type:void 0,contentType:void 0,user:void 0,group:void 0,mode:void 0,
lastModified:n,created:n,isDirectory:!0});case 13:return p.abrupt("return",this);case 14:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"exists",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:el.debug&&console.log("[".concat(this,"] exists"));k.t0=this.isRoot();if(k.t0){k.next=6;break}k.next=5;return this.db.get(this.pathWithoutQuery());case 5:k.t0=!!k.sent;
case 6:return k.abrupt("return",k.t0);case 7:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"remove",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return el.debug&&console.log("[".concat(this,"] remove")),k=this.pathWithoutQuery(),n=this.db,q.next=5,n.docList({startkey:k,endkey:k+"\uffff"});case 5:return p=q.sent,q.next=8,n.setDocuments(p.map(function(r){return{_id:r.id,
_rev:r.rev,_deleted:!0}}));case 8:return q.abrupt("return",this);case 9:case "end":return q.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"readProperties",value:function(){el.debug&&console.log("[".concat(this,"] readProperties"));return this.db.get(this.pathWithoutQuery())}},{key:"dirList",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k=this,n,p,q,r,u,x,y,D,H,I,N,J,sa,ja,Ha,Qa=arguments;return regeneratorRuntime.wrap(function(ec){for(;;)switch(ec.prev=
ec.next){case 0:n=0<Qa.length&&void 0!==Qa[0]?Qa[0]:1;p=1<Qa.length&&void 0!==Qa[1]?Qa[1]:{};el.debug&&console.log("[".concat(this,"] dirList"));if(this.isDirectory()){ec.next=5;break}return ec.abrupt("return",this.asDirectory().dirList(n,p));case 5:return q=p.exclude,r=this.pathWithoutQuery(),u=[],ec.next=10,this.db.getAll({startkey:r,endkey:r+"\uffff"});case 10:x=ec.sent,"infinity"===n&&(n=Infinity),y=0;case 13:if(!(y<x.length)){ec.next=34;break}D=x[y];H=D._id;if(H.startsWith(r)&&r!==H){ec.next=
18;break}return ec.abrupt("continue",31);case 18:I=H.slice(r.length);N=I.includes("/")?I.match(el.slashRe).length+1:1;if(!(N>n)){ec.next=24;break}J=function(){var mc=k.join(I.split("/").slice(0,n).join("/")+"/");u.some(function(hc){return hc.equals(mc)})||u.push(mc);return"continue"}();if("continue"!==J){ec.next=24;break}return ec.abrupt("continue",31);case 24:sa=this.join(I);if(!q||el.applyExclude(sa,q)){ec.next=27;break}return ec.abrupt("continue",31);case 27:for(u.push(sa),ja="created lastModified mode group user contentType type etag size".split(" "),
Ha=0;Ha<ja.length;Ha++)sa[ja[Ha]]=D[ja[Ha]];case 31:y++;ec.next=13;break;case 34:return ec.abrupt("return",u);case 35:case "end":return ec.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"canDealWithJSON",get:function(){return!0}},{key:"db",get:function(){return this._db||(this._db=el.StorageDatabase.ensureDB(this.host()))}}]);return c}(el.Resource);el.LivelyStorageResource=mV;var nV={name:"lively.storage",matches:function(b){return b.startsWith("lively.storage:")},
resourceClass:el.LivelyStorageResource};el.resourceExtension=nV;el.resourceExtension=nV;el.registerExtension=Bq;el.registerExtension(el.resourceExtension);el["default"]=mV;var Wr=window.lively.FreezerRuntime.recorderFor("lively.storage/index.js");Wr["default"]=Vr;Wr.Database=Vr;Wr.ObjectDB=ny;Wr.ObjectDBInterface=oy;Wr.ObjectDBHTTPInterface=py;Wr.ObjectDB=ny;Wr.ObjectDBInterface=oy;Wr.ObjectDBHTTPInterface=py;var c7=Object.freeze({__proto__:null,Database:Vr,ObjectDB:ny,ObjectDBInterface:oy,ObjectDBHTTPInterface:py});
bd("cg",c7);var hj=window.lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js");hj.convertToSerializableCommit=SP;hj.ensureCommitInfo=dx;hj.ObjectDBHTTPInterface=py;hj.Database=Vr;hj.loadMorphFromSnapshot=zs;hj.createMorphSnapshot=qu;hj.resource=Am;hj.obj=bj;hj.Path=qj;hj.arr=aj;hj.string=Xj;hj.morphicDBs=hj.morphicDBs||(hj.morphicDBs=new Map);hj.getDefaultServerUrl=function(){return hj.resource("undefined"!==typeof document?window.SERVER_URL||System.baseURL:"http://localhost:9001").join("objectdb/").url};
hj.convertToSerializableCommit=SP;hj.ensureCommitInfo=dx;var Et=bd("ab",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),g=c.hasOwnProperty("MorphicDB")&&"function"===typeof c.MorphicDB?c.MorphicDB:c.MorphicDB=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d){var f=d.snapshotLocation;
d=d.serverURL;this.name=a;this.serverURL=d;this.snapshotLocation=f||"".concat(a,"/snapshots/");this.httpDB=new hj.ObjectDBHTTPInterface(d);this._initialized=!1}},{key:"__serialize__",value:function(){var a=this.serverURL,d=this.snapshotLocation;return{__expr__:'MorphicDB.named("'.concat(this.name,'", {snapshotLocation: "').concat(d,'", serverURL: "').concat(a,'"})'),bindings:{"lively.morphic/morphicdb/index.js":["MorphicDB"]}}}},{key:"initializeIfNecessary",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=
k.next){case 0:if(!this._initialized){k.next=2;break}return k.abrupt("return");case 2:return k.next=4,this.ensureDB();case 4:this._initialized=!0;case 5:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"snapshotResourceFor",value:function(a){var d=a.content.slice(0,2);a=a.content.slice(2);return hj.resource(System.decanonicalize(this.snapshotLocation)).join("".concat(d,"/").concat(a,".json"))}},{key:"ensureDB",value:function(){return this.httpDB.ensureDB({db:this.name,
snapshotLocation:this.snapshotLocation})}},{key:"destroyDB",value:function(){this._initialized=!1;return this.httpDB.destroyDB({db:this.name})}},{key:"latestCommits",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n,p,q,r=arguments;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return k=0<r.length&&void 0!==r[0]?r[0]:"world",n=1<r.length&&void 0!==r[1]?r[1]:!1,u.next=4,this.initializeIfNecessary();case 4:return p=this.name,q={},u.abrupt("return",
this.httpDB.fetchCommits({db:p,type:k,ref:"HEAD",knownCommitIds:q,includeDeleted:n}));case 8:case "end":return u.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"fetchCommit",value:function(){var a=Cb(regeneratorRuntime.mark(function p(f,k,n){var q,r;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.initializeIfNecessary();case 2:return q=[{type:f,name:k,ref:n}],u.next=5,this.httpDB.fetchCommits({db:this.name,ref:n,type:f,
typesAndNames:q,knownCommitIds:{}});case 5:return r=u.sent,u.abrupt("return",hj.convertToSerializableCommit(r[0]));case 8:case "end":return u.stop()}},p,this)}));return function(f,k,n){return a.apply(this,arguments)}}()},{key:"fetchSnapshot",value:function(){var a=Cb(regeneratorRuntime.mark(function q(f,k,n,p){var r,u,x=arguments;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return r=f,1===x.length&&r.type&&r.name&&(f=r.type,k=r.name,n=r._id),y.next=4,this.initializeIfNecessary();
case 4:return u=this.name,y.abrupt("return",this.httpDB.fetchSnapshot({db:u,type:f,name:k,ref:p,commit:n}));case 6:case "end":return y.stop()}},q,this)}));return function(f,k,n,p){return a.apply(this,arguments)}}()},{key:"exists",value:function(){var a=Cb(regeneratorRuntime.mark(function p(f,k,n){var q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.initializeIfNecessary();case 2:return q=this.name,r.abrupt("return",this.httpDB.exists({db:q,type:f,
name:k,ref:n}));case 4:case "end":return r.stop()}},p,this)}));return function(f,k,n){return a.apply(this,arguments)}}()},{key:"history",value:function(){var a=Cb(regeneratorRuntime.mark(function n(f,k){var p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,this.initializeIfNecessary();case 2:return p=this.name,q.abrupt("return",this.httpDB.fetchVersionGraph({db:p,type:f,name:k}));case 4:case "end":return q.stop()}},n,this)}));return function(f,k){return a.apply(this,
arguments)}}()},{key:"log",value:function(){var a=Cb(regeneratorRuntime.mark(function n(f,k){var p,q,r,u=arguments;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return p=2<u.length&&void 0!==u[2]?u[2]:!1,q=3<u.length?u[3]:void 0,x.next=4,this.initializeIfNecessary();case 4:return r=this.name,x.next=7,this.httpDB.fetchLog({db:r,commit:f,limit:k,includeCommits:p,knownCommitIds:q});case 7:return x.t0=hj.convertToSerializableCommit,x.abrupt("return",x.sent.map(x.t0));
case 9:case "end":return x.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"revert",value:function(){var a=Cb(regeneratorRuntime.mark(function p(f,k,n){var q,r,u=arguments;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return q=3<u.length&&void 0!==u[3]?u[3]:"HEAD",x.next=3,this.initializeIfNecessary();case 3:return r=this.name,x.abrupt("return",this.httpDB.revert({db:r,type:f,name:k,toCommitId:n,ref:q}));case 5:case "end":return x.stop()}},
p,this)}));return function(f,k,n){return a.apply(this,arguments)}}()},{key:"snapshotAndCommit",value:function(){var a=Cb(regeneratorRuntime.mark(function x(f,k,n,p,q,r,u){var y,D;return regeneratorRuntime.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,hj.createMorphSnapshot(n,p);case 2:return y=H.sent,H.next=5,this.commit(f,k,y,q,r,u);case 5:return D=H.sent,D=hj.convertToSerializableCommit(D),n.changeMetaData("commit",hj.obj.dissoc(D,["preview"]),!0,!1),H.abrupt("return",D);
case 9:case "end":return H.stop()}},x,this)}));return function(f,k,n,p,q,r,u){return a.apply(this,arguments)}}()},{key:"commit",value:function(){var a=Cb(regeneratorRuntime.mark(function u(f,k,n,p,q,r){var x,y,D=arguments;return regeneratorRuntime.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return x=f,1===D.length&&x.type&&x.name&&(f=x.type,k=x.name,n=x.snapshot||x.content,p=hj.obj.dissoc(x,["snapshot","_rev","_id","ancestors","deleted"]),r=x._id),H.next=4,this.initializeIfNecessary();case 4:return y=
this.name,H.abrupt("return",this.httpDB.commit({db:y,type:f,name:k,ref:q,expectedParentCommit:r,commitSpec:p,snapshot:n}));case 6:case "end":return H.stop()}},u,this)}));return function(f,k,n,p,q,r){return a.apply(this,arguments)}}()},{key:"load",value:function(){var a=Cb(regeneratorRuntime.mark(function r(f,k,n,p,q){var u,x,y,D,H,I;return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:"object"===ad(f)?p=f:u=f;if(x=p){N.next=8;break}N.next=5;return this.fetchCommit(u,k,q);
case 5:x=N.sent;N.next=14;break;case 8:if("string"!==typeof x){N.next=14;break}N.next=11;return this.log(x,1,!0);case 11:y=N.sent,D=Wb(y,1),x=D[0];case 14:return N.next=16,this.fetchSnapshot(void 0,void 0,x._id);case 16:return H=N.sent,N.next=19,hj.loadMorphFromSnapshot(H,n);case 19:return I=N.sent,x=hj.convertToSerializableCommit(x),I.changeMetaData("commit",hj.obj.dissoc(x,["preview"]),!0,!1),N.abrupt("return",I);case 23:case "end":return N.stop()}},r,this)}));return function(f,k,n,p,q){return a.apply(this,
arguments)}}()},{key:"fetchDiff",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.initializeIfNecessary();case 2:return n=this.name,p.abrupt("return",this.httpDB.fetchDiff({db:n,otherDB:f}));case 4:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"fetchConflicts",value:function(){var a=Cb(regeneratorRuntime.mark(function n(f,k){var p;
return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,this.initializeIfNecessary();case 2:return p=this.name,q.abrupt("return",this.httpDB.fetchConflicts({db:p,includeDocs:f,only:k}));case 4:case "end":return q.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"resolveConflict",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=
2,this.initializeIfNecessary();case 2:return n=this.name,p.abrupt("return",this.httpDB.resolveConflict(Object.assign({db:n},f)));case 4:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"synchronize",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p,q,r,u;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return n=f.method,p=f.otherDB,q=f.otherDBSnapshotLocation,r=f.onlyTypesAndNames,x.next=3,this.initializeIfNecessary();
case 3:return u=this.name,x.abrupt("return",this.httpDB.synchronize({db:u,method:n,otherDB:p,otherDBSnapshotLocation:q,onlyTypesAndNames:r}));case 5:case "end":return x.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"softDelete",value:function(){var a=Cb(regeneratorRuntime.mark(function r(f,k,n,p,q){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.commit(f,k,void 0,n,p,q));case 1:case "end":return u.stop()}},
r,this)}));return function(f,k,n,p,q){return a.apply(this,arguments)}}()},{key:"delete",value:function(){var a=Cb(regeneratorRuntime.mark(function n(f,k){var p,q,r=arguments;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return p=2<r.length&&void 0!==r[2]?r[2]:!0,u.next=3,this.initializeIfNecessary();case 3:return q=this.name,u.abrupt("return",this.httpDB["delete"]({db:q,type:f,name:k,dryRun:p}));case 5:case "end":return u.stop()}},n,this)}));return function(f,k){return a.apply(this,
arguments)}}()},{key:"deleteCommit",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p,q=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=1<q.length&&void 0!==q[1]?q[1]:!0,r.next=3,this.initializeIfNecessary();case 3:return p=this.name,r.abrupt("return",this.httpDB.deleteCommit({db:p,commit:f,dryRun:n}));case 5:case "end":return r.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"codeSearchInPackages",
value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p,q,r,u,x,y,D,H,I,N=arguments;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return n=1<N.length&&void 0!==N[1]?N[1]:"part",p=2<N.length?N[2]:void 0,q=3<N.length?N[3]:void 0,J.next=5,this.latestCommits(n);case 5:r=J.sent,u=[],x=0,"function"===typeof q&&(r=r.filter(q)),y=fa(r),J.prev=10,y.s();case 12:if((D=y.n()).done){J.next=21;break}H=D.value;"function"===typeof p&&p(H.name,x++,r.length);J.next=
17;return this._textSearchInSnapshotOfCommit(f,H);case 17:I=J.sent,I.length&&u.push.apply(u,db(I));case 19:J.next=12;break;case 21:J.next=26;break;case 23:J.prev=23,J.t0=J["catch"](10),y.e(J.t0);case 26:return J.prev=26,y.f(),J.finish(26);case 29:return J.abrupt("return",u);case 30:case "end":return J.stop()}},k,this,[[10,23,26,29]])}));return function(f){return a.apply(this,arguments)}}()},{key:"_textSearchInSnapshotOfCommit",value:function(){var a=Cb(regeneratorRuntime.mark(function p(f,k,n){var q,
r;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:q=k._id;u.t0=n;if(u.t0){u.next=6;break}u.next=5;return this.fetchSnapshot(void 0,void 0,q);case 5:u.t0=u.sent;case 6:return r=u.t0,u.abrupt("return",(new hj.SnapshotPackageHelper(r)).textSearch(f,k));case 8:case "end":return u.stop()}},p,this)}));return function(f,k,n){return a.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MorphicDB"}},{key:"default",get:function(){return this.named("lively.morphic/objectdb/morphicdb",
{serverURL:hj.getDefaultServerUrl()})}},{key:"named",value:function(a,d){var f=hj.morphicDBs.get(a);if(f)return f;if(!d.serverURL)throw Error("Needs serverURL!");d=new this(a,d);hj.morphicDBs.set(a,d);return d}},{key:"wellKnownMorphicDBs",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k=this,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=hj.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),r.next=3,n.getAll();case 3:return p=
r.sent,q=p.reduce(function(u,x){return Object.assign(u,dd({},x._id,k.named(x.name,{serverURL:x.serverURL,snapshotLocation:x.snapshotLocation})))},{}),q["default"]||(q["default"]=this["default"]),r.abrupt("return",q);case 7:case "end":return r.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"addWellKnownMorphicDB",value:function(){var a=Cb(regeneratorRuntime.mark(function n(f,k){var p,q,r,u;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return p=
k.name,q=k.snapshotLocation,r=k.serverURL,u=hj.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),x.next=4,u.set(f,{name:p,snapshotLocation:q,serverURL:r});case 4:case "end":return x.stop()}},n)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"removeWellKnownMorphicDB",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return n=hj.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),
p.next=3,n.remove(f);case 3:case "end":return p.stop()}},k)}));return function(f){return a.apply(this,arguments)}}()}],c,{pathInPackage:function(){return"./morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1609,end:11119})}(void 0)),qI=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),
g=c.hasOwnProperty("SnapshotPackageHelper")&&"function"===typeof c.SnapshotPackageHelper?c.SnapshotPackageHelper:c.SnapshotPackageHelper=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){this.snapshot=a}},{key:"textSearch",value:function(a,d){var f=this,k=a&&a instanceof RegExp,n=[];if(!a)return n;var p=fa(this.filesInPackages()),
q;try{var r=function(){var u=q.value,x=u.get(f.snapshot),y=hj.string.lineIndexComputer(x),D=hj.string.lineRanges(x);if(k)x=hj.string.reMatches(x,a),x.length&&n.push.apply(n,db(x.map(function(Qa){return Object.assign(Qa,{commit:d,file:u})})));else for(var H=0,I=0;0<=(H=x.indexOf(a));){var N,J=H+I,sa=J+a.length,ja=y(J),Ha=(N=x).slice.apply(N,db(D[ja]));n.push({match:a,start:J,end:sa,length:a.length,line:ja,lineString:Ha,commit:d,file:u});I+=H+a.length;x=x.slice(H+a.length)}};for(p.s();!(q=p.n()).done;)r()}catch(u){p.e(u)}finally{p.f()}return n}},
{key:"filesInPackages",value:function(){function a(k,n,p,q){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[];if(k["package.json"]&&"string"===typeof k["package.json"])try{var u=JSON.parse(k["package.json"]);q={url:p,path:n,name:u.name||hj.arr.last(n)}}catch(y){}u=[];for(var x in k)"string"===typeof k[x]?r.push({path:n.concat(x),url:hj.string.joinPath(p,x),"package":q,get:function(y){return hj.Path(this.path).get(y.packages)},set:function(y,D){hj.Path(this.path).set(y.packages,D)}}):
u.push(x);u.forEach(function(y){return a(k[y],n.concat(y),hj.string.joinPath(p,y),q,r)});return r}var d=[],f;for(f in this.snapshot.packages)a(this.snapshot.packages[f],[f],f,null,d);return d}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"SnapshotPackageHelper"}}],c,{pathInPackage:function(){return"./morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:11127,end:14362})}(void 0);hj.SnapshotPackageHelper=qI;hj.SnapshotPackageHelper=qI;hj["default"]=Et;var oV=window.lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/index.js");oV["default"]=Et;oV.MorphicDB=Et;var d7=Object.freeze({__proto__:null,MorphicDB:Et}),qg=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js");qg.nyi=function(b){throw Error("Not yet implemented: ".concat(b));};qg.pt=wl;qg.Rectangle=fn;qg.rect=ko;qg.arr=aj;qg.Path=qj;qg.promise=
yj;qg.Closure=bp;qg.num=Gm;qg.obj=bj;qg.once=iu;qg.signal=Ln;(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("Layout")&&"function"===typeof c.Layout?c.Layout:c.Layout=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
{},d=a.spacing,f=a.padding,k=a.border,n=a.container,p=a.manualUpdate,q=a.autoResize,r=a.ignore,u=a.onScheduleApply,x=a.layoutOrder,y=a.reactToSubmorphAnimations;this.config=a;this.applyRequests=!1;this.border=Object.assign({top:0,left:0,right:0,bottom:0},k);this.ignore=r||[];this.active=!1;this.container=n;this.manualUpdate=p;this.reactToSubmorphAnimations=y||!1;this.autoResize=void 0!==q?q:!0;this.onScheduleApply=u||function(D,H,I){};x&&(this.layoutOrder=x,this.layoutOrderSource=JSON.stringify(String(x)));
this.spacing=d||0;this._padding=f?"number"===typeof f?qg.Rectangle.inset(f):qg.Rectangle.fromLiteral(f):qg.Rectangle.inset(0)}},{key:"hasEmbeddedContainer",value:function(){return qg.Path("container.owner.isText").get(this)?this.container.owner.embeddedMorphMap.has(this.container):!1}},{key:"attach",value:function(){var a=this;this.renderViaCSS?this.layoutableSubmorphs.forEach(function(d){return d.makeDirty()}):(this.apply(),this.container.master&&this.container.master.whenApplied().then(function(){a.applyRequests=
!0;a.forceLayout()}),this.refreshBoundsCache())}},{key:"getNodeFor",value:function(a){var d=a.env.renderer;return d?d.getNodeForMorph(a):null}},{key:"copy",value:function(){return new this.constructor(this)}},{key:"with",value:function(a){var d=this.copy();Object.assign(d,a);return d}},{key:"description",value:function(){return"Describe the layout behavior here."}},{key:"name",value:function(){return"Name presented to the user."}},{key:"isEnabled",value:function(){return!this.active}},{key:"disable",
value:function(){this.active=!0}},{key:"enable",value:function(a){this.active=!1;this.scheduleApply(null,a)}},{key:"padding",get:function(){return this._padding}},{key:"padding",set:function(a){"number"===typeof a&&(a=qg.Rectangle.inset(a));this._padding=a;this.apply()}},{key:"boundsChanged",value:function(a){return!(this.lastBoundsExtent&&a.bounds().extent().equals(this.lastBoundsExtent))}},{key:"extentChanged",value:function(a){return!(this.lastExtent&&a.extent.equals(this.lastExtent))}},{key:"equals",
value:function(a){return a.name()===this.name()}},{key:"layoutableSubmorphs",get:function(){var a=this;this.layoutOrder||(this.layoutOrder=qg.Closure.fromSource(JSON.parse(this.layoutOrderSource)).recreateFunc());return this.container?qg.arr.sortBy(this.container.submorphs.filter(function(d){return d.isLayoutable&&!a.ignore.includes(d.name)}),function(d){return a.layoutOrder(d)}):[]}},{key:"layoutOrder",value:function(a){return this.container.submorphs.indexOf(a)}},{key:"submorphBoundsChanged",get:function(){var a=
this.layoutableSubmorphs,d=this.layoutableSubmorphBounds;if(!d||a.length!==d.length)return!0;for(var f=0;f<a.length;f++)if(!d[f].equals(a[f].bounds()))return!0;return!1}},{key:"refreshBoundsCache",value:function(){this.lastExtent=this.container.extent;this.lastBoundsExtent=this.container.bounds().extent();this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(a){return a.bounds()})}},{key:"onContainerRender",value:function(){this.forceLayout()}},{key:"noLayoutActionNeeded",get:function(){return!this.submorphBoundsChanged&&
!this.boundsChanged(this.container)&&!this.extentChanged(this.container)&&!this.submorphsChanged}},{key:"__dont_serialize__",get:function(){return["lastAnim","animationPromise"]}},{key:"forceLayout",value:function(){var a=this;this.applyRequests&&(this.applyRequests=!1,this.noLayoutActionNeeded||(this.refreshBoundsCache(),this.container.withMetaDo({isLayoutAction:!0,animation:this.lastAnim},function(){return a.apply(a.lastAnim)}),this.lastAnim=!1))}},{key:"forceLayoutsOfMorph",value:function(a){var d=
this;a.layout?a.layout.forceLayout():a.submorphs.forEach(function(f){return d.forceLayoutsOfMorph(f)})}},{key:"forceLayoutsInNextLevel",value:function(){var a=this;this.layoutableSubmorphs.forEach(function(d){return a.forceLayoutsOfMorph(d)})}},{key:"scheduleApply",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if("function"===typeof this.onScheduleApply)this.onScheduleApply(a,d,f);this.active||(d&&(this.lastAnim=d),this.applyRequests=!0)}},{key:"onSubmorphResized",
value:function(a,d){this.scheduleApply(a,this.reactToSubmorphAnimations&&d.meta.animation,d)}},{key:"onSubmorphAdded",value:function(a,d){this.submorphsChanged=!0;this.scheduleApply(a,d)}},{key:"onSubmorphRemoved",value:function(a,d){this.submorphsChanged=!0;this.scheduleApply(a,d)}},{key:"onChange",value:function(a){var d=a.args,f=a.prop,k=a.value,n=a.prevValue,p=a.meta;p=this.reactToSubmorphAnimations&&p&&p.animation;d=d&&d[0];switch(a.selector){case "removeMorph":this.onSubmorphRemoved(d,p);break;
case "addMorphAt":this.onSubmorphAdded(d,p)}"borderWidth"===f&&this.renderViaCSS&&this.layoutableSubmorphs.forEach(function(q){return q.makeDirty()});"extent"===f&&k&&n&&(n.x!==k.x||n.y!==k.y)&&this.scheduleApply(d,p)}},{key:"affectsLayout",value:function(a,d){a=d.value;var f=d.prevValue;return["position","scale","rotation","isLayoutable","extent"].includes(d.prop)&&!qg.obj.equals(a,f)}},{key:"onSubmorphChange",value:function(a,d){if(d.meta&&d.meta.isLayoutAction)return this.scheduleApply(a,this.reactToSubmorphAnimation&&
d.meta.animation);if(this.affectsLayout(a,d))this.onSubmorphResized(a,d)}},{key:"changePropertyAnimated",value:function(a,d,f,k){if(k){var n,p=k.duration;k=k.easing;this.animationPromise=a.animate((n={},dd(n,d,f),dd(n,"duration",p),dd(n,"easing",k),n))}else a[d]=f}},{key:"attachAnimated",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,d=1<arguments.length?arguments[1]:void 0,f=2<arguments.length?arguments[2]:void 0;this.active||(this.container=d,this.active=!0,d.layout=
this,this.active=!1,this.lastAnim={duration:a,easing:f})}},{key:"apply",value:function(a){this.active||(this.active=!0,this.submorphsChanged=!1,this.lastBoundsExtent=this.container&&this.container.bounds().extent(),this.active=!1)}},{key:"ensureBoundsMonitor",value:function(a,d){}},{key:"resizesMorphVertically",value:function(a){return!1}},{key:"resizesMorphHorizontally",value:function(a){return!1}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Layout"}}],c,{pathInPackage:function(){return"./layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:266,end:8028})})(void 0);var tB=bd("T",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("TilingLayout")&&"function"===typeof c.TilingLayout?c.TilingLayout:c.TilingLayout=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Ve._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a);this._renderViaCSS="undefined"!==typeof a.renderViaCSS?a.renderViaCSS:!0;this._axis=a.axis||"row";this._align=a.align||"left";this._axisAlign=a.axisAlign||"left";this._justifySubmorphs=a.justifySubmorphs||"packed";this._hugContentsVertically=
a.hugContentsVertically||!1;this._hugContentsHorizontally=a.hugContentsHorizontally||!1;this._orderByIndex=a.orderByIndex||!1;this._wrapSubmorphs=!0;"undefined"!==typeof a.wrapSubmorphs&&(this._wrapSubmorphs=a.wrapSubmorphs);this._resizePolicies=a.resizePolicies||new WeakMap}},{key:"equals",value:function(a){return this.__serialize__().__expr__===(a&&a.__serialize__().__expr__)}},{key:"name",value:function(){return"Tiling"}},{key:"inspect",value:function(a){}},{key:"onConfigUpdate",value:function(){this.apply();
this.renderViaCSS&&!this._configChanged&&(this._configChanged=!0,this.layoutableSubmorphs.forEach(function(a){return a.makeDirty()}))}},{key:"__serialize__",value:function(){return{__expr__:"new TilingLayout(".concat(qg.obj.inspect(this.getSpec(),{customPrinter:function(a,d,f){return a&&a.isRectangle?a.toString():d}}),")"),bindings:{"lively.morphic":["TilingLayout"],"lively.graphics/geometry-2d.js":["rect"]}}}},{key:"attach",value:function(){this.initializeResizePolicies();Ve._get(Object.getPrototypeOf(g.prototype),
"attach",this).call(this)}},{key:"initializeResizePolicies",value:function(){var a=this,d=this._resizePolicies;if(!d||Array.isArray(d)){var f=this.layoutableSubmorphs;this._resizePolicies=new WeakMap;Array.isArray(d)?d.map(function(k){k=Wb(k,2);var n=k[0];k=k[1];var p=f.find(function(q){return q.name===n});p&&a.setResizePolicyFor(p,k);qg.arr.remove(f,p)}):this.layoutableSubmorphs.forEach(function(k){a.setResizePolicyFor(k,{width:"fixed",height:"fixed"})})}}},{key:"reactToSubmorphAnimations",get:function(){return this._reactToSubmorphAnimations}},
{key:"reactToSubmorphAnimations",set:function(a){this._reactToSubmorphAnimations=a}},{key:"resizePolicies",get:function(){var a=this;return this.layoutableSubmorphs.map(function(d){return[d.name,a._resizePolicies.get(d)||{width:"fixed",height:"fixed"}]})}},{key:"padding",set:function(a){this._padding=a;this.onConfigUpdate()}},{key:"padding",get:function(){return this._padding}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"getSpec",value:function(){if(!this.container)return this.config;
Array.isArray(this._resizePolicies)&&this.initializeResizePolicies();var a=this.axis,d=this.align,f=this.axisAlign,k=this.spacing,n=this.orderByIndex,p=this.reactToSubmorphAnimations,q=this.renderViaCSS,r=this.padding,u=this.wrapSubmorphs,x=this.justifySubmorphs,y=this._hugContentsVertically,D=this._hugContentsHorizontally,H={},I=fa(this.resizePolicies),N;try{for(I.s();!(N=I.n()).done;){var J=Wb(N.value,2),sa=J[0],ja=J[1];if("fixed"!==ja.width||"fixed"!==ja.height)H.resizePolicies||(H.resizePolicies=
[]),H.resizePolicies.push([sa,Object.assign({},ja)])}}catch(Ha){I.e(Ha)}finally{I.f()}0!==k&&(H.spacing=k);!0!==q&&(H.renderViaCSS=q);"row"!==a&&(H.axis=a);"left"!==d&&(H.align=d);"left"!==f&&(H.axisAlign=f);"packed"!==x&&(H.justifySubmorphs=x);!1!==y&&(H.hugContentsVertically=!0);!1!==D&&(H.hugContentsHorizontally=!0);!1!==n&&(H.orderByIndex=!0);!0!==u&&(H.wrapSubmorphs=!1);qg.rect(0).equals(r)||(H.padding=r);p&&(H.reactToSubmorphAnimations=!0);return H}},{key:"possibleAxisValues",get:function(){return["row",
"column"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"orderByIndex",get:function(){return this._orderByIndex||this.renderViaCSS}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.onConfigUpdate()}},{key:"axis",get:function(){return this._axis}},{key:"axis",set:function(a){this._axis=a;this.onConfigUpdate()}},{key:"align",get:function(){return this._align}},{key:"align",set:function(a){this._align=a;this.onConfigUpdate()}},{key:"axisAlign",get:function(){return this._axisAlign}},
{key:"axisAlign",set:function(a){this._axisAlign=a;this.onConfigUpdate()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.onConfigUpdate()}},{key:"wrapSubmorphs",get:function(){return this._wrapSubmorphs}},{key:"wrapSubmorphs",set:function(a){this._wrapSubmorphs=a;this.onConfigUpdate()}},{key:"hugContentsVertically",get:function(){return this.wrapSubmorphs&&"column"===this.axis?!1:this._hugContentsVertically}},{key:"hugContentsVertically",
set:function(a){this._hugContentsVertically=a;this.onConfigUpdate()}},{key:"hugContentsHorizontally",get:function(){return this.wrapSubmorphs&&"row"===this.axis?!1:this._hugContentsHorizontally}},{key:"hugContentsHorizontally",set:function(a){this._hugContentsHorizontally=a;this.onConfigUpdate()}},{key:"justifySubmorphs",get:function(){return this._justifySubmorphs}},{key:"justifySubmorphs",set:function(a){this._justifySubmorphs=a;this.onConfigUpdate()}},{key:"getResizeHeightPolicyFor",value:function(a){a=
this._resizePolicies.get(a)||{width:"fixed",height:"fixed"};return this.wrapSubmorphs||this.hugContentsVertically?"fixed":a.height}},{key:"getResizeWidthPolicyFor",value:function(a){a=this._resizePolicies.get(a)||{width:"fixed",height:"fixed"};return this.wrapSubmorphs||this.hugContentsHorizontally?"fixed":a.width}},{key:"setResizePolicyFor",value:function(a,d){if(Array.isArray(this._resizePolicies)){var f=this._resizePolicies.find(function(k){k=Wb(k,1)[0];return a.name===k});f?f[1]=d:this._resizePolicies.push([a.name,
d])}else this._resizePolicies.set(a,d),this.onConfigUpdate()}},{key:"resizesMorphHorizontally",value:function(a){return"fill"===this.getResizeWidthPolicyFor(a)}},{key:"resizesMorphVertially",value:function(a){return"fill"===this.getResizeHeightPolicyFor(a)}},{key:"renderViaCSS",get:function(){return this._renderViaCSS}},{key:"renderViaCSS",set:function(a){this._renderViaCSS=a;this.onConfigUpdate()}},{key:"onDomResize",value:function(a,d){var f=this;d===this.container?d.withMetaDo({isLayoutAction:!0},
function(){f.updateContainerViaDom(a,!0)}):d&&d.withMetaDo({isLayoutAction:!0},function(){f.updateSubmorphViaDom(d,a,!0)})}},{key:"onSubmorphAdded",value:function(a,d){this._resizePolicies.get(a)||this.setResizePolicyFor(a,{width:"fixed",height:"fixed"})}},{key:"onSubmorphResized",value:function(a,d){var f=this;this.renderViaCSS?(a=[a].concat(db(a.ownerChain())).find(function(k){return k.owner===f.container}),a.isLayoutable&&this.tryToMeasureNodeNow(a)):Ve._get(Object.getPrototypeOf(g.prototype),
"onSubmorphResized",this).call(this,a,d)}},{key:"tryToMeasureNodeNow",value:function(a){var d=this.getNodeFor(a);d&&this.orderByIndex?this.updateSubmorphViaDom(a,d):this.measureAfterRender(a)}},{key:"updateSubmorphViaDom",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,k=this.container,n=Math.floor(d.offsetLeft+k.borderWidthLeft);k=Math.floor(d.offsetTop+k.borderWidthTop);var p=Math.floor(d.offsetWidth),q=Math.floor(d.offsetHeight),r=this.getResizeHeightPolicyFor(a),
u=this.getResizeWidthPolicyFor(a),x=!1;if(n!==a.position.x||k!==a.position.y)f?a.position=qg.pt(n,k):(a._morphicState.position=qg.pt(n,k),x=!0,qg.signal(a,"position",a.position));"fill"===u&&p!==a.width&&(f?a.width=p:(a._morphicState.extent=a.extent.withX(p),x=!0,qg.signal(a,"extent",a.extent),a.layout&&"Proportional"===a.layout.name()&&(a.layout.applyRequests=!0,a.layout.forceLayout())));"fill"===r&&q!==a.height&&(f?a.height=q:(a._morphicState.extent=a.extent.withY(q),x=!0,qg.signal(a,"extent",a.extent)));
if(a.layout&&a.layout.renderViaCSS)a.layout.onDomResize(d,a);x&&a.updateTransform()}},{key:"updateContainerViaDom",value:function(a){var d=this.container,f=this.hugContentsVertically,k=this.hugContentsHorizontally;if(a||(a=this.getNodeFor(d))){a&&this.hasEmbeddedContainer()&&a.style.setProperty("display","inline-flex","important");var n=Math.round(a.offsetWidth);a=Math.round(a.offsetHeight);(0!==n||0!==a)&&0<this.container.submorphs.length&&(f&&d.height!==a&&(d.height=a),k&&d.width!==n&&(d.width=
n))}}},{key:"updateBoundsFor",value:function(a){var d=this.getNodeFor(a);d?this.updateSubmorphViaDom(a,d):(this.measureAfterRender(a),a.makeDirty());a._askLayoutForBounds=!1}},{key:"addSubmorphCSS",value:function(a,d){var f=this;if(a.isLayoutable){var k=this.axis,n=this.layoutableSubmorphs,p=this.getNodeFor(a),q="visible"!==a.clipMode;k="column"===k;p?this.updateSubmorphViaDom(a,p):a._correctRender=function(y){f.addSubmorphCSS(a,y.style)};var r=qg.pt(0,0);q=q?qg.rect(0,0,a.width,a.height):a.submorphBounds().union(a.innerBounds());
1!==a.scale&&(q=q.withWidth(q.width*a.scale).withHeight(q.height*a.scale));0!==a.rotation&&(r=a.getInverseTransform().transformRectToRect(q),q.width=r.width,q.height=r.height,r=a.bounds().topLeft().subPt(a.position).negated());var u=this.computeOffset(a),x={top:0,left:0,bottom:0,right:0};p&&(x.top=Math.max(0,-q.top())+r.y-u.top,x.bottom=q.bottom()-a.height-r.y-u.bottom,x.left=Math.max(0,-q.left())+r.x-u.left,x.right=q.right()-a.width-r.x-u.right);this.adjustMargin(x,a);"fill"===this.getResizeWidthPolicyFor(a)&&
(k?(d.width="calc(100% + ".concat(x.offset,"px)"),x.left=0,x.right=0):(d.width="unset",d.flexGrow=1,d.flexShrink=1));"fill"===this.getResizeHeightPolicyFor(a)&&(k?(d.height="unset",d.flexGrow=1,d.flexShrink=1):(d.height="calc(100% + ".concat(x.offset,"px)"),x.bottom=0,x.top=0));d.position="relative";a.owner&&a.owner.isText&&a.owner.embeddedMorphMap.get(a)&&(d.position="sticky");d.top="unset";d.left="unset";d.order=n.indexOf(a);d.marginTop="".concat(x.top,"px");d.marginBottom="".concat(x.bottom,"px");
d.marginLeft="".concat(x.left,"px");d.marginRight="".concat(x.right,"px");1!==Number.parseInt(d.flexGrow)&&(d.flexShrink=0);this.measureAfterRender(a)}}},{key:"measureAfterRender",value:function(a){var d=this;a.whenRendered().then(function(){var f=d.getNodeFor(a);f&&d.ensureBoundsMonitor(f,a)})}},{key:"ensureBoundsMonitor",value:function(a,d){if(d===this.container||d.isLayoutable)this.onDomResize(a,d),d._correctRender&&(d._correctRender(a),delete d._correctRender)}},{key:"adjustMargin",value:function(a,
d){d=this.container;a.offset="column"===this.axis?d.borderWidthLeft+d.borderWidthRight:d.borderWidthTop+d.borderWidthBottom}},{key:"computeOffset",value:function(a){a=this.container;var d={top:0,bottom:0,left:0,right:0};"column"===this.axis?(d.top=a.borderWidthTop,d.bottom=a.borderWidthBottom,d.left=a.borderWidthLeft,d.right=a.borderWidthRight):(d.left=a.borderWidthLeft,d.right=a.borderWidthRight,d.top=a.borderWidthTop,d.bottom=a.borderWidthBottom);return d}},{key:"addContainerCSS",value:function(a,
d){var f=this.axis,k=this.padding,n=this._align,p=this.axisAlign,q=this.hugContentsHorizontally,r=this.hugContentsVertically,u=this.wrapSubmorphs,x=this.spacing,y=this.justifySubmorphs,D=this.container;this._configChanged=!1;a.visible&&(d.display="flex");d.gap="".concat(x+("row"===f?D.borderWidthLeft+D.borderWidthRight:D.borderWidthTop+D.borderWidthBottom),"px");d.justifyContent={left:"flex-start",center:"center",right:"flex-end"}[n];d.flexFlow=f;u&&(d.flexFlow+=" wrap");d.alignItems={center:"center",
left:"flex-start",right:"flex-end"}[p];d.alignContent={center:"center",left:"flex-start",right:"flex-end"}[p];"spaced"===y&&(d.justifyContent="space-between");d.paddingTop="".concat(k.top(),"px");d.paddingLeft="".concat(k.left(),"px");d.paddingRight="".concat(k.right(),"px");d.paddingBottom="".concat(k.bottom(),"px");q&&(d.width="auto");r&&(d.height="auto");this.measureAfterRender(a);this.delaySubmorphBounds()}},{key:"hasBoundsConnection",value:function(a){return a.attributeConnections&&a.attributeConnections.find(function(d){return["position",
"extent","width","height"].includes(d.sourceAttrName)})}},{key:"delaySubmorphBounds",value:function(){var a=this;this.layoutableSubmorphs.forEach(function(d){a.hasBoundsConnection(d)?a.measureAfterRender(d):d.isEllipse?a.measureAfterRender(d):d._askLayoutForBounds=!0;d.layout&&"Tiling"===d.layout.name()&&d.layout.delaySubmorphBounds()})}},{key:"apply",value:function(){var a=this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;if(!this.active&&this.container&&!this.renderViaCSS){this.active=
!0;Ve._get(Object.getPrototypeOf(g.prototype),"apply",this).call(this,d);var f=this.container,k=this.axis,n=this._align,p=this.spacing,q=this.axisAlign,r=this.layoutableSubmorphs,u=this.padding,x=this.wrapSubmorphs,y=this.justifySubmorphs,D=this.hugContentsVertically,H=this.hugContentsHorizontally,I=db(r),N="spaced"===y,J=this.getOptimalWidth(f),sa="row"===k,ja=sa?"left":"top",Ha=sa?"x":"y",Qa=sa?"y":"x",ec;"left"===q&&(ec="topLeft");"right"===q&&(ec="topRight");"center"===q&&(ec=sa?"leftCenter":
"topCenter");var mc=[],hc;for(k=function(){var Lb=J+p,Ac=qg.arr.takeWhile(I,function(ta){ta=ta.bounds().extent();ta=Lb-(Math.round(ta[Ha])+p);if(x&&0>ta)return!1;Lb=ta;return!0});0<Ac.length?I.splice(0,Ac.length):(Ac=[I.shift()],Lb=0);var Xb=u.top()+u.bottom()-a.spacing,qd=u.left()+u.right()-a.spacing,La=0;Ac.forEach(function(ta){sa&&(qd+=a.spacing,"fill"===a.getResizeHeightPolicyFor(ta)&&(ta.height=f.height-u.top()-u.bottom()),"fixed"===a.getResizeWidthPolicyFor(ta)?qd+=ta.width:La++);sa||(Xb+=a.spacing,
"fill"===a.getResizeWidthPolicyFor(ta)&&(ta.width=f.width-u.left()-u.right()),"fixed"===a.getResizeHeightPolicyFor(ta)?Xb+=ta.height:La++);a.forceLayoutsOfMorph(ta)});Ac.forEach(function(ta){sa&&"fill"===a.getResizeWidthPolicyFor(ta)&&(ta.width=Math.max(0,f.width-qd)/La);sa||"fill"!==a.getResizeHeightPolicyFor(ta)||(ta.height=Math.max(0,f.height-Xb)/La)});var Fd=void 0;mc.push(hc=[qg.arr.max(Ac.map(function(ta){return ta.bounds().extent()[Qa]}))]);if(N){if(sa){var na=u.left();var Va=u.right()}else na=
u.top(),Va=u.bottom();Fd=na;na=(f.extent[Ha]-na-Va-qg.arr.sum(Ac.map(function(ta){return ta.bounds().extent()[Ha]})))/Math.max(1,Ac.length-1);Ac=fa(Ac);var yd;try{for(Ac.s();!(yd=Ac.n()).done;){var me=yd.value;hc.push([me,Fd]);Fd=Fd+me.bounds().extent()[Ha]+na}}catch(ta){Ac.e(ta)}finally{Ac.f()}}else{switch(n){case "left":Fd=u[ja]();break;case "center":Fd=Lb/2+u[ja]();break;case "right":Fd=Lb+u[ja]()}yd=fa(Ac);try{for(yd.s();!(na=yd.n()).done;)Va=na.value,hc.push([Va,qg.num.roundTo(Fd,1)]),Fd=Fd+
p+Va.bounds().extent()[Ha]}catch(ta){yd.e(ta)}finally{yd.f()}}};I.length;)k();var Ua=[];if("center"===this.axisAlign){var xa=-p;mc.forEach(function(Lb){Lb=Wb(Lb,1)[0];return xa+=Lb+p});var rc=f.extent[Qa]/2-xa/2;mc.map(function(Lb){Lb=Wb(Lb,1)[0];Ua.push(rc+Lb/2);rc+=Lb+p})}"right"===this.axisAlign&&(rc=f.extent[Qa]-(sa?u.bottom():u.right()),mc=mc.reverse(),mc.map(function(Lb){Lb=Wb(Lb,1)[0];Ua.push(rc);rc-=Lb+p}));"left"===this.axisAlign&&(rc=sa?u.top():u.left(),mc.map(function(Lb){Lb=Wb(Lb,1)[0];
Ua.push(rc);rc+=p;rc+=Lb}));mc.forEach(function(Lb,Ac){Lb=lc(Lb);Lb[0];Lb.slice(1).forEach(function(Xb){var qd=Wb(Xb,2);Xb=qd[0];qd=qd[1];qd=sa?qg.pt(qd,Ua[Ac]):qg.pt(Ua[Ac],qd);a.changePropertyAnimated(Xb,ec,qd,d)})});D&&(f.height=f.submorphBounds(function(Lb){return r.includes(Lb)}).height+u.top()+u.bottom());H&&(f.width=f.submorphBounds(function(Lb){return r.includes(Lb)}).width+ +u.left()+u.right());this.active=!1;this.forceLayoutsInNextLevel()}}},{key:"forceLayout",value:function(){this.renderViaCSS||
Ve._get(Object.getPrototypeOf(g.prototype),"forceLayout",this).call(this)}},{key:"getMinWidth",value:function(){var a=this.padding;return this.layoutableSubmorphs.reduce(function(d,f){return f.bounds().width>d?f.bounds().width:d},0)+a.left()+a.right()}},{key:"getMinHeight",value:function(){var a=this.padding;return this.layoutableSubmorphs.reduce(function(d,f){return f.bounds().height>d?f.bounds().height:d},0)+a.top()+a.bottom()}},{key:"getOptimalWidth",value:function(a){var d=this.axis,f=this.padding;
a="row"===d?a.width-f.left()-f.right():a.height-f.top()-f.bottom();d="row"===d?this.getMinWidth():this.getMinHeight();return Math.max(a,d)}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.getProperty("submorphs").indexOf(a):"row"===this.axis?1E6*(a.top-a.top%15)+a.left:1E6*(a.left-a.left%15)+a.top}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TilingLayout"}}],c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:8367,end:39900})}(qg.Layout));qg.TilingLayout=tB;qg.TilingLayout=tB;var qy=bd("au",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("VerticalLayout")&&"function"===typeof c.VerticalLayout?c.VerticalLayout:c.VerticalLayout=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,{renderViaCSS:a.renderViaCSS,reactToSubmorphAnimations:a.reactToSubmorphAnimations});this.config=a;this.align=a.align||"left";this.resizeSubmorphs=a.resizeSubmorphs||!1;this.direction=a.direction||"topToBottom";this.spacing=a.spacing||0;this.autoResize=void 0!==a.autoResize?a.autoResize:!0}},{key:"possibleDirectionValues",
get:function(){return["topToBottom","bottomToTop","centered"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"name",value:function(){return"Vertical"}},{key:"__serialize__",value:function(){return{__expr__:"new VerticalLayout(".concat(qg.obj.inspect(this.getSpec()),")"),bindings:{"lively.morphic":["VerticalLayout"]}}}},{key:"getSpec",value:function(){if(!this.container)return this.config;var a=this.autoResize,d=this.direction,f=this.resizeSubmorphs;return Object.assign({},
qg.obj.dissoc(Ve._get(Object.getPrototypeOf(g.prototype),"getSpec",this).call(this),"hugContentsVertically hugContentsHorizontally axis axisAlign padding wrapSubmorphs".split(" ")),{autoResize:a,resizeSubmorphs:f,direction:d})}},{key:"axis",get:function(){return"column"}},{key:"wrapSubmorphs",get:function(){return!1}},{key:"padding",get:function(){return qg.Rectangle.inset(this._spacing)}},{key:"getResizeHeightPolicyFor",value:function(a){return"fixed"}},{key:"direction",get:function(){return this._direction}},
{key:"direction",set:function(a){this._direction=a;this._align={topToBottom:"left",bottomToTop:"right",centered:"center"}[a];this.onConfigUpdate()}},{key:"align",get:function(){return this.axisAlign}},{key:"align",set:function(a){this.axisAlign=a}},{key:"autoResize",get:function(){return this._autoResize}},{key:"autoResize",set:function(a){this._hugContentsVertically=this._hugContentsHorizontally=this._autoResize=a;this.onConfigUpdate()}},{key:"hugContentsVertically",get:function(){return this.autoResize}},
{key:"hugContentsHorizontally",get:function(){return this.autoResize&&!this.resizeSubmorphs}},{key:"getResizeWidthPolicyFor",value:function(a){return this.resizeSubmorphs?"fill":"fixed"}},{key:"resizeSubmorphs",get:function(){return this._resizeSubmorphs}},{key:"resizeSubmorphs",set:function(a){this._resizeSubmorphs=a;this.onConfigUpdate()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"VerticalLayout"}}],c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:39908,end:42356})}(qg.TilingLayout));qg.VerticalLayout=qy;qg.VerticalLayout=qy;var ry=bd("H",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("HorizontalLayout")&&"function"===typeof c.HorizontalLayout?c.HorizontalLayout:c.HorizontalLayout=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,{renderViaCSS:a.renderViaCSS,reactToSubmorphAnimations:a.reactToSubmorphAnimations});this.config=a;this.align=a.align||"top";this.resizeSubmorphs=a.resizeSubmorphs||!1;this.direction=a.direction||"leftToRight";this.spacing=a.spacing||0;this.autoResize=void 0!==a.autoResize?a.autoResize:!0}},{key:"possibleDirectionValues",
get:function(){return["leftToRight","rightToLeft","centered"]}},{key:"possibleAlignValues",get:function(){return["top","center","bottom"]}},{key:"name",value:function(){return"Horizontal"}},{key:"__serialize__",value:function(){return{__expr__:"new HorizontalLayout(".concat(qg.obj.inspect(this.getSpec()),")"),bindings:{"lively.morphic":["HorizontalLayout"]}}}},{key:"axis",get:function(){return"row"}},{key:"wrapSubmorphs",get:function(){return!1}},{key:"padding",get:function(){return qg.Rectangle.inset(this._spacing)}},
{key:"getResizeWidthPolicyFor",value:function(a){return"fixed"}},{key:"direction",get:function(){return this._direction}},{key:"direction",set:function(a){this._direction=a;this._align={leftToRight:"left",rightToLeft:"right",centered:"center"}[a];this.onConfigUpdate()}},{key:"align",get:function(){return{left:"top",right:"bottom",center:"center"}[this.axisAlign]}},{key:"align",set:function(a){this.axisAlign={top:"left",bottom:"right",center:"center"}[a]}},{key:"autoResize",get:function(){return this._autoResize}},
{key:"autoResize",set:function(a){this._hugContentsHorizontally=this._hugContentsVertically=this._autoResize=a;this.onConfigUpdate()}},{key:"hugContentsVertically",get:function(){return this.autoResize&&!this.resizeSubmorphs}},{key:"hugContentsHorizontally",get:function(){return this.autoResize}},{key:"getResizeHeightPolicyFor",value:function(a){return this.resizeSubmorphs?"fill":"fixed"}},{key:"resizeSubmorphs",get:function(){return this._resizeSubmorphs}},{key:"resizeSubmorphs",set:function(a){this._resizeSubmorphs=
a;this.onConfigUpdate()}},{key:"expressMeasure",value:function(a){this.tryToMeasureNodeNow(a)}},{key:"getSpec",value:function(){return this.container?{spacing:this.spacing,resizeSubmorphs:this.resizeSubmorphs,autoResize:this.autoResize,align:this.align,direction:this.direction,padding:this.padding,reactToSubmorphAnimations:this.reactToSubmorphAnimations,orderByIndex:this.orderByIndex,renderViaCSS:this.renderViaCSS}:this.config}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"HorizontalLayout"}}],
c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:42364,end:45157})}(qg.TilingLayout));qg.HorizontalLayout=ry;qg.HorizontalLayout=ry;var uB=bd("g",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("ProportionalLayout")&&"function"===
typeof c.ProportionalLayout?c.ProportionalLayout:c.ProportionalLayout=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"name",value:function(){return"Proportional"}},{key:"description",value:function(){return"Resizes, scales, and moves morphs according to their original position."}},{key:Symbol["for"]("lively-instance-initialize"),value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.extentDelta=qg.pt(0,0);this.proportionalLayoutSettingsForMorphs=new WeakMap;this.submorphSettings=a&&a.submorphSettings||[];this.lastExtent=a.lastExtent;delete this.spacing;delete this.autoResize}},{key:"getSpec",value:function(){return this.container?{submorphSettings:this.submorphSettings,reactToSubmorphAnimations:this.reactToSubmorphAnimations,lastExtent:this.lastExtent}:this.config}},{key:"__serialize__",value:function(){return{__expr__:"new ProportionalLayout(".concat(qg.obj.inspect(this.getSpec()),
")"),bindings:{"lively.morphic":["ProportionalLayout"]}}}},{key:"__dont_serialize__",get:function(){return[].concat(db(Ve._get(Object.getPrototypeOf(g.prototype),"__dont_serialize__",this)),["extentDelta","lastExtent"])}},{key:"__after_deserialize__",value:function(a,d){var f=this._submorphSettings;a=this.container;d=this.proportionalLayoutSettingsForMorphs||new WeakMap;this.extentDelta=qg.pt(0,0);if(f&&a){f=fa(f);var k;try{for(f.s();!(k=f.n()).done;){var n=Wb(k.value,2),p=n[1],q=this._morphsMatchingSelector(a,
n[0]),r=Wb(q,1)[0];r&&d.set(r,p)}}catch(u){f.e(u)}finally{f.f()}this.proportionalLayoutSettingsForMorphs=d}}},{key:"onSubmorphChange",value:function(a,d,f,k){"name"===d.prop&&(f=this.proportionalLayoutSettingsForMorphs.get(a))&&this.changeSettingsFor(a,f,!0);return Ve._get(Object.getPrototypeOf(g.prototype),"onSubmorphChange",this).call(this,a,d)}},{key:"settingsFor",value:function(a){return this.proportionalLayoutSettingsForMorphs.get(a)||{x:"scale",y:"scale"}}},{key:"changeSettingsFor",value:function(a,
d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;"string"===typeof d&&(d={x:d,y:d});this.proportionalLayoutSettingsForMorphs.set(a,Object.assign({},this.settingsFor(a),{},d));f&&(f=this.submorphSettings.filter(function(k){return k[0]!==a.name}),f.push([a.name,this.settingsFor(a)]),this._submorphSettings=f)}},{key:"submorphSettings",get:function(){return this._submorphSettings}},{key:"submorphSettings",set:function(a){if(this.container)this._submorphSettings=a,this.changeSubmorphSettings(a);
else qg.once(this,"container",this,"submorphSettings",{converter:"function () { return submorphSettings }",varMapping:{submorphSettings:a}})}},{key:"changeSubmorphSettings",value:function(a){var d=this;a=fa(a);var f;try{var k=function(){var n=Wb(f.value,2),p=n[1];d._morphsMatchingSelector(d.container,n[0]).forEach(function(q){return d.changeSettingsFor(q,p)})};for(a.s();!(f=a.n()).done;)k()}catch(n){a.e(n)}finally{a.f()}}},{key:"_morphsMatchingSelector",value:function(a,d){var f=this,k=[];if(!d)return k;
d.isMorph?k=[d]:d instanceof RegExp?k=a.submorphs.filter(function(n){return n.name.match(d)}):"string"===typeof d?k=a.submorphs.filter(function(n){return n.name===d}):Array.isArray(d)&&(k=d.flatMap(function(n){return f._morphsMatchingSelector(a,n)}));return k}},{key:"refreshBoundsCache",value:function(){var a=this.container.extent,d=this.lastExtent;d&&!a.eqPt(d)&&(this.extentDelta=this.extentDelta.addPt(a.subPt(d)));this.lastExtent=a.copy();this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(f){return f.bounds()})}},
{key:"apply",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,d=this.container,f=this.extentDelta,k=f.x;f=f.y;var n=(d||{}).extent;if(!this.active&&d&&(0!==k||0!==f)){this.extentDelta=qg.pt(0,0);this.active=!0;Ve._get(Object.getPrototypeOf(g.prototype),"apply",this).call(this,a);var p=this.layoutableSubmorphs;d=n.scaleByPt(n.addXY(-k,-f).invertedSafely());n=fa(p);var q;try{for(n.s();!(q=n.n()).done;){var r=q.value,u=this.settingsFor(r),x=u.x,y=u.y,D=p=0,H=0,I=0;"move"===
x&&(p=k);"move"===y&&(D=f);"resize"===x&&(H=k);"resize"===y&&(I=f);if("scale"===x||"scale"===y){var N=qg.pt("scale"===x?d.x:1,"scale"===y?d.y:1);this.changePropertyAnimated(r,"position",r.position.scaleByPt(N),a);this.changePropertyAnimated(r,"extent",r.extent.scaleByPt(N),a)}(p||D)&&this.changePropertyAnimated(r,"position",r.position.addXY(p,D),a);(H||I)&&this.changePropertyAnimated(r,"extent",r.extent.addXY(H,I),a)}}catch(J){n.e(J)}finally{n.f()}this.forceLayoutsInNextLevel();this.active=!1}}},
{key:"copy",value:function(){return new this.constructor(this.getSpec())}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ProportionalLayout"}}],c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:45295,end:51066})}(qg.Layout));qg.ProportionalLayout=uB;qg.ProportionalLayout=
uB;var vB=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("CellGroup")&&"function"===typeof c.CellGroup?c.CellGroup:c.CellGroup=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){var d=a.morph,f=a.layout,k=a.resize;this.state={cells:[a.cell],layout:f,align:a.align,resize:void 0===
k?f.fitToCell:k};f&&f.addGroup(this);this.morph=d}},{key:"resize",get:function(){return this.state.resize}},{key:"resize",set:function(a){this.state.resize=a;this.layout.apply()}},{key:"align",get:function(){return this.state.align||"topLeft"}},{key:"align",set:function(a){this.state.align=a;this.layout.apply()}},{key:"area",get:function(){var a,d,f,k;this.cells.map(function(q){var r=q.before.length;if(void 0===a||a>r)a=r;if(void 0===d||d<r)d=r;q=q.above.length;if(void 0===f||f>q)f=q;if(void 0===
k||k<q)k=q});var n=this.layout.row(f).col(a).padding,p=this.layout.row(k).col(d).padding;return{minCol:a,maxCol:d,minRow:f,maxRow:k,padding:qg.Rectangle.inset(n.left(),n.top(),p.right(),p.bottom())}}},{key:"morph",get:function(){var a=this.state,d=a.morph;a=a.layout;return d?d.isMorph?d:a.layoutableSubmorphs.find(function(f){return f.name===d}):null}},{key:"morph",set:function(a){var d=a&&this.layout.getCellGroupFor(a);d&&(d.morph=null);this.state.morph=a;this.layout.apply()}},{key:"manages",value:function(a){return this.morph&&
(this.morph===a||this.morph.name===a)}},{key:"apply",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,d=this.morph;if(d){var f=this.bounds(),k=this.layout.container.origin.negated();if(a){var n,p=this.resize?f.extent():d.extent,q=a.duration;a=a.easing;d.animate((n={},dd(n,this.alignedProperty||this.align,f[this.align]().addPt(k)),dd(n,"extent",p),dd(n,"duration",q),dd(n,"easing",a),n))}else this.resize&&!d.extent.equals(f.extent())&&(d.extent=f.extent()),d[this.alignedProperty||
this.align]=f[this.align]().addPt(k);this.layout.forceLayoutsInNextLevel()}}},{key:"cells",get:function(){return this.state.cells}},{key:"layout",get:function(){return this.state.layout}},{key:"bounds",value:function(){return 0<this.cells.length?this.cells.map(function(a){return a.bounds()}).reduce(function(a,d){return a.union(d)}):qg.rect(0,0,0,0)}},{key:"includes",value:function(a){return!!this.cells.find(function(d){return d===a})}},{key:"connect",value:function(a){if(void 0===this.morph||null===
this.morph)this.morph=a.group.morph;a.group?a.group.disconnect(a,this):a.group=this;this.cells.push(a)}},{key:"disconnect",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new qg.CellGroup({morph:null,layout:this.layout,cell:a});a.group=d;qg.arr.remove(this.cells,a);1>this.cells.length&&this.layout&&this.layout.removeGroup(this)}},{key:"merge",value:function(a){var d=this;a.cells.forEach(function(f){d.connect(f)})}},{key:"topLeft",get:function(){var a=this;return this.cells.find(function(d){return(null===
d.left||d.left.group!==a)&&(null===d.top||d.top.group!==a)})}},{key:"bottomRight",get:function(){var a=this;return this.cells.find(function(d){return(null===d.right||d.right.group!==a)&&(null===d.bottom||d.bottom.group!==a)})}},{key:"position",get:function(){return this.topLeft.position}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"CellGroup"}}],c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:51379,end:57927})}(void 0);qg.CellGroup=vB;qg.CellGroup=vB;(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("LayoutAxis")&&"function"===typeof c.LayoutAxis?c.LayoutAxis:c.LayoutAxis=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),
value:function(a){this.origin=a}},{key:"otherAxis",get:function(){return[].concat(db(this.axisBefore),db(this.axisAfter))}},{key:"axisBefore",get:function(){for(var a=this,d=[];a=a.before;)d=[a].concat(db(d));return d}},{key:"axisAfter",get:function(){for(var a=this,d=[];a=a.after;)d=[].concat(db(d),[a]);return d}},{key:"before",get:function(){throw Error("before() not implemented!");}},{key:"after",get:function(){throw Error("after() not implemented!");}},{key:"containerLength",get:function(){return this.container[this.dimension]}},
{key:"containerLength",set:function(a){this.container[this.dimension]=a}},{key:"getRoot",value:function(){return(this.axisBefore[0]||this).items[0]}},{key:"container",get:function(){return this.origin.container}},{key:"layout",get:function(){return this.origin.layout}},{key:"frozen",get:function(){return this.origin.frozen[this.dimension]}},{key:"frozen",set:function(a){this.origin.frozen[this.dimension]=a}},{key:"align",set:function(a){this.items.forEach(function(d){return d.group.state.align=a})}},
{key:"fixed",get:function(){return this.origin.fixed[this.dimension]}},{key:"fixed",set:function(a){var d=this;if(qg.obj.isNumber(a)){var f=a;a=!0}this.items.forEach(function(n){n.fixed[d.dimension]=a});var k=this.containerLength;void 0!==f&&(this[this.dimension]=f);this.adjustOtherProportions(a);this.containerLength=k}},{key:"length",get:function(){return this.origin[this.dimension]}},{key:"length",set:function(a){var d=this;this.items.forEach(function(f){f[d.dimension]=qg.num.roundTo(a,1)})}},{key:"proportion",
get:function(){return this.origin.proportion[this.dimension]}},{key:"proportion",set:function(a){var d=this;this.items.forEach(function(f){f.proportion[d.dimension]=a})}},{key:"min",get:function(){return this.origin.min[this.dimension]}},{key:"min",set:function(a){this._adjustMin(a-this.min)}},{key:"_adjustMin",value:function(a){var d=this;this.items.forEach(function(f){f.min[d.dimension]=0>f.min[d.dimension]+a?0:f.min[d.dimension]+a});this.layout.apply()}},{key:"adjustOtherProportions",value:function(a){var d=
this,f=this.axisBefore,k=this.axisAfter,n=qg.arr.sum([].concat(db(f),db(k)).filter(function(r){return!r.fixed}).map(function(r){return r.proportion})),p=function(r){return r.proportion/=n},q=function(r){return r.proportion*=d.origin.removedDynamicProportions};a&&(this.origin.removedDynamicProportions=n);f.forEach(a?p:q);k.forEach(a?p:q)}},{key:"adjustLengthToProportion",value:function(a){a=this.proportion*Math.max(0,a-this.staticLength);this.frozen&&a>=this.min?(this.fixed=this.frozen=!1,this.length=
a):!this.frozen&&this.min>a&&(this.fixed=this.frozen=!0,this.length=this.min);return this}},{key:"adjustLength",value:function(a){var d;0>this.length+a&&(a=-this.length);(d=this.axisAfter.find(function(f){return!f.fixed}))?(a=Math.min(a,d.length),this.length+=a,d.length-=a,this.adjustProportion(),d.adjustProportion()):(d=this.axisBefore.reverse().find(function(f){return!f.fixed}))?(d.length-=a,this.length+=a,this.adjustProportion(),d.adjustProportion()):(this.length+=a,this.adjustProportion(),this.otherAxis.forEach(function(f){return f.adjustProportion()}),
this.containerLength+=a)}},{key:"adjustProportion",value:function(){this.fixed||(this.proportion=0<this.dynamicLength?this.length/this.dynamicLength:0)}},{key:"equalizeDynamicAxis",value:function(){var a=[].concat(db(this.otherAxis.filter(function(f){return!f.fixed})),db(this.fixed?[]:[this])),d=(this.containerLength-this.staticLength)/a.length;a.map(function(f){f.fixed||(f.length=d);return f}).forEach(function(f){return f.adjustProportion()})}},{key:"addBefore",value:function(){var a=this.emptyAxis();
this.before&&this.before.attachTo(a);a.attachTo(this);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}},{key:"addAfter",value:function(){var a=this.emptyAxis();this.after&&a.attachTo(this.after);this.attachTo(a);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}},{key:"emptyAxis",value:function(){qg.nyi("emptyAxis")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LayoutAxis"}}],c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:58596,end:68536})})(void 0);var wB=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("LayoutColumn")&&"function"===typeof c.LayoutColumn?c.LayoutColumn:c.LayoutColumn=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.items=[].concat(db(a.above),[a],db(a.below))}},{key:"dimension",get:function(){return"width"}},{key:"before",get:function(){return this._before||(this._before=this.origin.left&&new qg.LayoutColumn(this.origin.left))}},{key:"after",get:function(){return this._after||(this._after=this.origin.right&&
new qg.LayoutColumn(this.origin.right))}},{key:"row",value:function(a){return this.items[a]}},{key:"dynamicLength",get:function(){return this.origin.dynamicWidth}},{key:"staticLength",get:function(){return this.origin.totalStaticWidth}},{key:"width",get:function(){return this.length}},{key:"width",set:function(a){a-=this.width;this.fixed?(this.length+=a,this.container.width+=a):this.adjustLength(a);this.layout.renderViaCSS&&(this.layout.patchContainer(),this.layout.measureMorphsIn(this,this.after));
!this.layout.manualUpdate&&this.layout.apply()}},{key:"paddingLeft",set:function(a){this.items.forEach(function(d){d.padding.x=a});this.layout.apply()}},{key:"paddingLeft",get:function(){return this.items[0].padding.x}},{key:"paddingRight",set:function(a){this.items.forEach(function(d){d.padding.width=a});this.layout.apply()}},{key:"paddingRight",get:function(){return this.items[0].padding.width}},{key:"emptyAxis",value:function(){var a=new qg.LayoutColumn(new qg.LayoutCell({column:qg.arr.withN(this.items.length,
null),layout:this.layout}));qg.arr.zip(a.items,this.items).forEach(function(d){var f=Wb(d,2);d=f[0];f=f[1];d.height=f.height;d.fixed.height=f.fixed.height;d.frozen.height=f.frozen.height;d.proportion.height=f.proportion.height;d.min.height=f.min.height});return a}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=null;qg.arr.zip(this.items,a.items).forEach(function(d){var f=Wb(d,2);d=f[0];f=f[1];d.right=f;f.left=d});this.equalizeDynamicAxis();return a}},{key:"remove",
value:function(){var a=this,d=this.before||this.after;this.items.forEach(function(f){f.left&&(f.left.right=f.right);f.right&&(f.right.left=f.left);f.group.disconnect(f);a.layout.removeGroup(f.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=this.after.getRoot());d.equalizeDynamicAxis()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LayoutColumn"}}],c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:68624,end:71163})}(qg.LayoutAxis);qg.LayoutColumn=wB;qg.LayoutColumn=wB;var xB=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("LayoutRow")&&"function"===typeof c.LayoutRow?c.LayoutRow:c.LayoutRow=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.items=[].concat(db(a.before),[a],db(a.after))}},{key:"dimension",get:function(){return"height"}},{key:"emptyAxis",value:function(){var a=new qg.LayoutRow(new qg.LayoutCell({row:qg.arr.withN(this.items.length,null),layout:this.layout}));qg.arr.zip(a.items,this.items).forEach(function(d){var f=Wb(d,
2);d=f[0];f=f[1];d.width=f.width;d.fixed.width=f.fixed.width;d.frozen.width=f.frozen.width;d.proportion.width=f.proportion.width;d.min.width=f.min.width});return a}},{key:"paddingTop",set:function(a){this.items.forEach(function(d){d.padding.y=a});this.layout.apply()}},{key:"paddingTop",get:function(){return this.items[0].padding.y}},{key:"paddingBottom",set:function(a){this.items.forEach(function(d){d.padding.height=a});this.layout.apply()}},{key:"paddingBottom",get:function(){return this.items[0].padding.height}},
{key:"before",get:function(){return this._before||(this._before=this.origin.top&&new qg.LayoutRow(this.origin.top))}},{key:"after",get:function(){return this._after||(this._after=this.origin.bottom&&new qg.LayoutRow(this.origin.bottom))}},{key:"dynamicLength",get:function(){return this.origin.dynamicHeight}},{key:"staticLength",get:function(){return this.origin.totalStaticHeight}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=null;qg.arr.zip(this.items,a.items).forEach(function(d){var f=
Wb(d,2);d=f[0];f=f[1];d.bottom=f;f.top=d});this.equalizeDynamicAxis();return a}},{key:"col",value:function(a){return this.items[a]}},{key:"height",get:function(){return this.length}},{key:"height",set:function(a){a-=this.height;this.fixed?(this.length+=a,this.container.height+=a):(this.adjustLength(a),this.proportion=0<this.origin.dynamicHeight?this.height/this.origin.dynamicHeight:0);this.layout.renderViaCSS&&(this.layout.patchContainer(),this.layout.measureMorphsIn(this,this.after));!this.layout.manualUpdate&&
this.layout.apply()}},{key:"remove",value:function(){var a=this,d=this.before||this.after;this.items.forEach(function(f){f.top&&(f.top.bottom=f.bottom);f.bottom&&(f.bottom.top=f.top);f.group.disconnect(f);a.layout.removeGroup(f.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=this.after.getRoot());d.equalizeDynamicAxis()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LayoutRow"}}],c,{pathInPackage:function(){return"./layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:71247,end:73872})}(qg.LayoutAxis);qg.LayoutRow=xB;qg.LayoutRow=xB;var yB=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("LayoutCell")&&"function"===typeof c.LayoutCell?c.LayoutCell:c.LayoutCell=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){var d=a.row,f=a.column,k=a.top,n=a.left,p=a.right,q=a.bottom;a=a.layout;var r;d=lc(d||[]);var u=d[0];d=d.slice(1);f=lc(f||[]);var x=f[0];f=f.slice(1);this.layout=a;this.fixed={width:!1,height:!1};this.frozen={width:!1,height:!1};this.min={width:0,height:0};this.top=k;this.left=n;this.bottom=q;this.right=p;this.padding=qg.rect(0,0,0,0);0<d.length?this.right=new qg.LayoutCell({row:d,left:this,layout:a}):0<
f.length&&(this.bottom=new qg.LayoutCell({column:f,top:this,layout:a}));this.proportion={width:1/(1+this.before.length+this.after.length),height:1/(1+this.above.length+this.below.length)};this.height=this.container.height*this.proportion.height;this.width=this.container.width*this.proportion.width;(r=a&&a.getCellGroupFor(u||x))?r.connect(this):this.group=new qg.CellGroup({cell:this,morph:u||x,layout:a})}},{key:"container",get:function(){return this.layout.container}},{key:"above",get:function(){return this.collect({neighbor:"top",
prepend:!0})}},{key:"below",get:function(){return this.collect({neighbor:"bottom",append:!0})}},{key:"before",get:function(){return this.collect({neighbor:"left",prepend:!0})}},{key:"after",get:function(){return this.collect({neighbor:"right",append:!0})}},{key:"collect",value:function(a){var d=a.neighbor,f=a.prepend;a=a.append;for(var k=[],n=this;n=n[d];)f&&(k=[n].concat(db(k))),a&&(k=[].concat(db(k),[n]));return k}},{key:"col",value:function(a){for(var d=this,f=a;0<f&&d;)d=d.right,f--;if(!d)throw Error("".concat(a,
" out of bounds! Last column was ").concat(a-f-1));return new qg.LayoutColumn(d)}},{key:"row",value:function(a){for(var d=this,f=a;0<f&&d;)d=d.bottom,f--;if(!d)throw Error("".concat(a," out of bounds! Last row was ").concat(a-f-1));return new qg.LayoutRow(d)}},{key:"staticWidth",get:function(){return this.fixed.width||this.min.width===this.width}},{key:"staticHeight",get:function(){return this.fixed.height||this.min.height===this.height}},{key:"totalStaticWidth",get:function(){return qg.arr.sum([this].concat(db(this.before),
db(this.after)).filter(function(a){return a.staticWidth}).map(function(a){return a.width}))}},{key:"totalStaticHeight",get:function(){return qg.arr.sum([this].concat(db(this.above),db(this.below)).filter(function(a){return a.staticHeight}).map(function(a){return a.height}))}},{key:"dynamicWidth",get:function(){return qg.arr.sum([this].concat(db(this.before),db(this.after)).filter(function(a){return!a.staticWidth}).map(function(a){return a.width}))}},{key:"dynamicHeight",get:function(){return qg.arr.sum([this].concat(db(this.above),
db(this.below)).filter(function(a){return!a.staticHeight}).map(function(a){return a.height}))}},{key:"height",get:function(){return Math.max(this.min.height,this._height||0)}},{key:"height",set:function(a){this._height=a}},{key:"width",get:function(){return Math.max(this.min.width,this._width||0)}},{key:"width",set:function(a){this._width=a}},{key:"extent",get:function(){return qg.pt(this.width,this.height)}},{key:"position",get:function(){return qg.pt(qg.arr.sum(this.before.map(function(a){return a.width})),
qg.arr.sum(this.above.map(function(a){return a.height})))}},{key:"bounds",value:function(){return this.position.addPt(this.padding.topLeft()).extent(this.extent.subPt(this.padding.extent()).subPt(this.padding.topLeft()))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LayoutCell"}}],c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:73934,end:82018})}(void 0);qg.LayoutCell=yB;qg.LayoutCell=yB;var zB=bd("at",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("GridLayout")&&"function"===typeof c.GridLayout?c.GridLayout:c.GridLayout=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,a);a=Object.assign({autoAssign:!0,fitToCell:!0},a);this.cellGroups=[];this.renderViaCSS="undefined"!==typeof a.renderViaCSS?a.renderViaCSS:!0}},{key:"forceLayout",value:function(){this.renderViaCSS||Ve._get(Object.getPrototypeOf(g.prototype),"forceLayout",this).call(this)}},{key:"name",value:function(){return"Grid"}},{key:"attach",value:function(){this.renderViaCSS?this.initGrid():Ve._get(Object.getPrototypeOf(g.prototype),"attach",this).call(this)}},
{key:"disable",value:function(){this.renderViaCSS&&(this.renderViaCSS=!1,this._revertToCSSOnEnable=!0,this.apply());Ve._get(Object.getPrototypeOf(g.prototype),"disable",this).call(this)}},{key:"enable",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n=this;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Ve._get(Object.getPrototypeOf(g.prototype),"enable",this).call(this,f);case 2:if(!f){p.next=5;break}p.next=5;return qg.promise.delay(f.duration);
case 5:this._revertToCSSOnEnable&&(this.renderViaCSS=!0,this.layoutableSubmorphs.forEach(function(q){return n.tryToMeasureNodeNow(q)}),delete this._revertToCSSOnEnble);case 6:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"getSpec",value:function(){if(!this.container)return this.config;var a=[],d=[],f=[],k={},n=fa(qg.arr.range(0,this.rowCount-1)),p;try{for(n.s();!(p=n.n()).done;)a.push(this.grid.row(p.value).items.map(function(sa){return sa.group.state.morph?
sa.group.state.morph.name||sa.group.state.morph:null}))}catch(sa){n.e(sa)}finally{n.f()}n=fa(qg.arr.range(0,this.rowCount-1));var q;try{for(n.s();!(q=n.n()).done;){var r=q.value,u=this.grid.row(r),x=u.fixed?{fixed:u.length}:{height:u.height};u.paddingTop&&(x.paddingTop=u.paddingTop);u.paddingBottom&&(x.paddingBottom=u.paddingBottom);d.push(r,x)}}catch(sa){n.e(sa)}finally{n.f()}q=fa(qg.arr.range(0,this.columnCount-1));var y;try{for(q.s();!(y=q.n()).done;){var D=y.value,H=this.grid.col(D),I=Object.assign({},
H.fixed?{fixed:H.length}:{width:H.width});H.paddingLeft&&(I.paddingLeft=H.paddingLeft);H.paddingRight&&(I.paddingRight=H.paddingRight);f.push(D,I)}}catch(sa){q.e(sa)}finally{q.f()}y=fa(this.cellGroups);var N;try{for(y.s();!(N=y.n()).done;){var J=N.value;J.state.morph&&(k["string"===typeof J.state.morph?J.state.morph:J.morph.name]=qg.obj.select(J,["align","resize"]))}}catch(sa){y.e(sa)}finally{y.f()}return{autoAssign:!1,grid:a,rows:d,columns:f,groups:k}}},{key:"__serialize__",value:function(){return{__expr__:"new GridLayout(".concat(qg.obj.inspect(this.getSpec(),
{escapeKeys:!0}),")"),bindings:{"lively.morphic":["GridLayout"]}}}},{key:"initGrid",value:function(){var a=this,d=this.sanitizeGrid(this.config).map(function(f){return new qg.LayoutRow(new qg.LayoutCell({row:f,layout:a}))});d.reduce(function(f,k){return f.attachTo(k)});this.config.autoAssign&&this.autoAssign(this.notInLayout);this.grid=d[0].col(0);this.col(0).equalizeDynamicAxis();this.row(0).equalizeDynamicAxis();this._initRowsAndColumns();this._initGroups()}},{key:"_initGroups",value:function(){var a=
this.config.groups;if(a)for(var d in a){var f=this.getCellGroupFor(this.container.getSubmorphNamed(d)),k=a[d],n=k.resize,p=k.align;p=void 0===p?"topLeft":p;k=k.alignedProperty;k=void 0===k?"topLeft":k;f&&(void 0!==n&&(f.resize=n),f.align=p,f.alignedProperty=k)}}},{key:"_initRowsAndColumns",value:function(){var a=this.config,d=a.rows;a=a.columns;a=void 0===a?[]:a;d=fa(qg.arr.toTuples(void 0===d?[]:d,2));var f;try{for(d.s();!(f=d.n()).done;){var k=Wb(f.value,2),n=k[1];Object.assign(this.row(k[0]),n)}}catch(u){d.e(u)}finally{d.f()}f=
fa(qg.arr.toTuples(a,2));var p;try{for(f.s();!(p=f.n()).done;){var q=Wb(p.value,2),r=q[1];Object.assign(this.col(q[0]),r)}}catch(u){f.e(u)}finally{f.f()}}},{key:"fitToCell",get:function(){return this.config.fitToCell}},{key:"fitToCell",set:function(a){this.config.fitToCell=a;this.cellGroups.forEach(function(d){return d.resize=a});this.apply()}},{key:"notInLayout",get:function(){return qg.arr.withoutAll(this.layoutableSubmorphs,this.cellGroups.map(function(a){return a.morph}))}},{key:"col",value:function(a){return this.grid.col(a)}},
{key:"row",value:function(a){return this.grid.row(a)}},{key:"rowCount",get:function(){return this.grid.col(0).items.length}},{key:"columnCount",get:function(){return this.grid.row(0).items.length}},{key:"addGroup",value:function(a){this.cellGroups.push(a)}},{key:"removeGroup",value:function(a){qg.arr.remove(this.cellGroups,a)}},{key:"getCellGroupFor",value:function(a){return a&&this.cellGroups.find(function(d){return d.morph===a})}},{key:"submorphBoundsChanged",get:function(){var a=fa(this.cellGroups),
d;try{for(a.s();!(d=a.n()).done;){var f=d.value;if(f.morph&&!f.bounds().equals(f.morph.bounds()))return!0}}catch(k){a.e(k)}finally{a.f()}return!1}},{key:"sanitizeGrid",value:function(a){var d=this,f=a.grid,k=a.rowCount,n=a.columnCount;f=f||[[]];k=k||f.length;n=n||qg.arr.max(f.map(function(p){return p.length}));f.length<k&&(f=f.concat(qg.arr.withN(k-f.length,[])));return f=f.map(function(p){p.length<n&&(p=p.concat(qg.arr.withN(n-p.length,null)));return p.map(function(q){return q&&q.isMorph?(q.owner!==
d.container&&d.container.addMorph(q),q):q?d.container.getSubmorphNamed(q)||q:q})})}},{key:"autoAssign",value:function(a){var d=this;a.forEach(function(f){var k,n=Infinity;d.cellGroups.forEach(function(p){p.morph||p.cells.forEach(function(q){q=q.position.dist(f.position);q<n&&(k=p,n=q)})});k&&(k.morph=f)})}},{key:"apply",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;this.active||this.renderViaCSS||(this.active=!0,Ve._get(Object.getPrototypeOf(g.prototype),"apply",
this).call(this,a),this.grid||this.initGrid(),this.fitAxis(),this.container.extent=qg.pt(Math.max(this.grid.totalStaticWidth,this.container.width),Math.max(this.grid.totalStaticHeight,this.container.height)),this.fitAxis(),this.cellGroups.forEach(function(d){d&&d.apply(a)}),this.lastBoundsExtent=this.container.bounds().extent(),this.active=!1)}},{key:"fitAxis",value:function(){var a=this,d,f;[this.grid.row(0)].concat(db(this.grid.row(0).axisAfter)).map(function(k){k.adjustLengthToProportion(a.container.height);
d=a.grid.totalStaticHeight;return k}).forEach(function(k){k.fixed||(k.length=k.proportion*Math.max(0,a.container.height-d))});[this.grid.col(0)].concat(db(this.grid.col(0).axisAfter)).map(function(k){k.adjustLengthToProportion(a.container.width);f=a.grid.totalStaticWidth;return k}).forEach(function(k){k.fixed||(k.length=k.proportion*Math.max(0,a.container.width-f))})}},{key:"renderViaCSS",set:function(a){this._renderViaCSS=a;this.layoutableSubmorphs.forEach(function(d){return d.makeDirty()})}},{key:"renderViaCSS",
get:function(){return this._renderViaCSS}},{key:"onSubmorphAdded",value:function(a,d){Ve._get(Object.getPrototypeOf(g.prototype),"onSubmorphAdded",this).call(this,a,d);this.renderViaCSS&&this.measureAfterRender(a)}},{key:"onChange",value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),"onChange",this).call(this,a);"extent"===a.prop&&this.renderViaCSS&&this.measureAfterRender(this.container)}},{key:"onSubmorphRemoved",value:function(a,d){var f=this.getCellGroupFor(a);f&&(f.morph=null);Ve._get(Object.getPrototypeOf(g.prototype),
"onSubmorphRemoved",this).call(this,a,d)}},{key:"onSubmorphResized",value:function(a,d){this.renderViaCSS?a.isLayoutable&&a.owner===this.container&&this.measureAfterRender(a):Ve._get(Object.getPrototypeOf(g.prototype),"onSubmorphResized",this).call(this,a,d)}},{key:"measureAfterRender",value:function(a){var d=this;a.whenRendered().then(function(){d.onDomResize()})}},{key:"tryToMeasureNodeNow",value:function(a){var d=this.getCellGroupFor(a);if(d){var f=this.getNodeFor(a);f?this.updateSubmorphViaDom(a,
f,d.resize):this.measureAfterRender(a)}}},{key:"onDomResize",value:function(){this.updateContainerViaDom();var a=fa(this.cellGroups),d;try{for(a.s();!(d=a.n()).done;){var f=d.value,k=f.resize,n=f.morph;if(n){var p=this.getNodeFor(n);p&&this.updateSubmorphViaDom(n,p,k,!0)}}}catch(q){a.e(q)}finally{a.f()}}},{key:"updateSubmorphViaDom",value:function(a,d,f){var k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;a.withMetaDo({isLayoutAction:!0},function(){if(f){var n=qg.pt(d.offsetWidth,d.offsetHeight);
a.extent.equals(n)||(k?a.extent=n:(a._morphicState.extent=n,a.updateTransform({extent:n}),qg.signal(a,"extent")))}n=qg.pt(d.offsetLeft,d.offsetTop);a.position.equals(n)||(k?a.position=n:(a._morphicState.position=n,a.updateTransform({position:n}),qg.signal(a,"position")))});if(a.layout&&a.layout.renderViaCSS)a.layout.onDomResize(d,a)}},{key:"updateContainerViaDom",value:function(){if(this.container.env.renderer){var a=this.getNodeFor(this.container);a&&this.hasEmbeddedContainer()&&a.style.setProperty("display",
"inline-grid","important")}}},{key:"addSubmorphCSS",value:function(a,d){if(a.isLayoutable){var f=this.getCellGroupFor(a)||{},k=f.area;a=f.resize;f=f.align;if(k){var n=k.minCol,p=k.maxCol,q=k.minRow,r=k.maxRow;k=k.padding;d.margin=k.top()+"px "+k.right()+"px "+k.bottom()+"px "+k.left()+"px";d.gridColumnStart=n+1;d.gridColumnEnd=p+2;d.gridRowStart=q+1;d.gridRowEnd=r+2;d.position="relative";d.top="unset";d.left="unset";Object.assign(d,{topLeft:{},topRight:{justifySelf:"end",alignSelf:"start"},bottomRight:{justifySelf:"end",
alignSelf:"end"},bottomLeft:{justifySelf:"start",alignSelf:"end"},center:{justifySelf:"center",alignSelf:"center"},topCenter:{justifySelf:"center",alignSelf:"start"},bottomCenter:{justifySelf:"center",alignSelf:"end"},leftCenter:{justifySelf:"start",alignSelf:"center"},rightCenter:{justifySelf:"end",alignSelf:"center"}}[f]);a&&(d.width="auto",d.height="auto")}}}},{key:"addContainerCSS",value:function(a,d){var f=this;a.visible&&(d.display="grid");a=qg.arr.range(0,this.columnCount-1).map(function(n){n=
f.col(n);return n.fixed?n.length+"px":n.proportion+"fr"});var k=qg.arr.range(0,this.rowCount-1).map(function(n){n=f.row(n);return n.fixed?n.length+"px":n.proportion+"fr"});d.gridTemplateColumns=a.join(" ");d.gridTemplateRows=k.join(" ")}},{key:"patchContainer",value:function(){if(this.container.owner){var a=this.container,d=this.getNodeFor(a);d&&this.addContainerCSS(a,d.style)}}},{key:"measureMorphsIn",value:function(){for(var a=this,d=arguments.length,f=Array(d),k=0;k<d;k++)f[k]=arguments[k];qg.arr.compact(f).map(function(n){return n.items.map(function(p){return p.group})}).flat().forEach(function(n){var p=
n.morph;n=n.resize;if(p){var q=a.getNodeFor(p);q&&a.updateSubmorphViaDom(p,q,n)}})}},{key:"resizesMorphHorizontally",value:function(a){return(a=this.getCellGroupFor(a))&&a.resize}},{key:"resizesMorphVertically",value:function(a){return(a=this.getCellGroupFor(a))&&a.resize}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"GridLayout"}}],c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:82294,end:104170})}(qg.Layout));qg.GridLayout=zB;qg.GridLayout=zB;var e7=Object.freeze({__proto__:null,TilingLayout:tB,VerticalLayout:qy,HorizontalLayout:ry,ProportionalLayout:uB,CellGroup:vB,LayoutColumn:wB,LayoutRow:xB,LayoutCell:yB,GridLayout:zB}),kh=window.lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js");kh.getAllPartResources=mF;kh.loadPart=fA;kh.savePart=oF;kh.interactivelySavePart=Vu;kh.interactivelyLoadObjectFromPartsBinFolder=
rF;kh.interactivelySaveObjectToPartsBinFolder=tF;kh.saveObjectToPartsbinFolder=vF;kh.loadObjectFromPartsbinFolder=gA;kh.buildCommitEditor=yF;kh.resource=Am;kh.Resource=so;kh.registerExtension=Bq;kh.Path=qj;kh.obj=bj;kh.date=$s;kh.promise=yj;kh.HorizontalLayout=ry;kh.VerticalLayout=qy;kh.Morph=gp;kh.pt=wl;kh.Color=Bn;kh.Rectangle=fn;kh.connect=lr;kh.emit=jo;kh.SnapshotPackageHelper=qI;kh.ensureCommitInfo=dx;kh.MorphicDB=Et;kh.createMorphSnapshot=qu;kh.getClassName=Mo;kh.getAllPartResources=mF;kh.loadPart=
fA;kh.savePart=oF;kh.interactivelySavePart=Vu;kh.interactivelyLoadObjectFromPartsBinFolder=rF;kh.interactivelySaveObjectToPartsBinFolder=tF;kh.saveObjectToPartsbinFolder=vF;kh.loadObjectFromPartsbinFolder=gA;var rI=bd("ac",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),g=c.hasOwnProperty("SnapshotEditor")&&"function"===typeof c.SnapshotEditor?c.SnapshotEditor:c.SnapshotEditor=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d,f){this.commit=a;this.snapshot=d;this._db=f}},{key:"db",get:function(){return this._db||kh.MorphicDB["default"]}},{key:"saveModifiedSnapshot",value:function(){var a=Cb(regeneratorRuntime.mark(function n(f,k){var p,q,r,u;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:p=f;q=p._id;r=p.name;u=p.type;if(q){x.next=3;break}throw Error("No id of commit, cannot save!");case 3:return x.next=
5,this.db.commit(u,r,k,f,void 0,q);case 5:return this.commit=f=x.sent,this.snapshot=k,x.abrupt("return",f);case 9:case "end":return x.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"interactivelySaveModifiedSnapshot",value:function(){var a=Cb(regeneratorRuntime.mark(function n(f,k){var p,q,r,u,x;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=kh.promise.deferred(),q=p.promise,r=p.resolve,u=p.reject,x=this,Object.assign(kh.buildCommitEditor(),
{commit:Object.assign({},this.commit,{},f),cancel:function(){(this.getWindow()||this).remove();u("canceled")},accept:function(){var D=this;return Cb(regeneratorRuntime.mark(function I(){var N;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.prev=0,J.next=3,x.saveModifiedSnapshot(D.commit,k);case 3:N=J.sent;(D.getWindow()||D).remove();r(D.commit=N);J.next=12;break;case 8:J.prev=8,J.t0=J["catch"](0),D.showError(J.t0),u(J.t0);case 12:case "end":return J.stop()}},
I,null,[[0,8]])}))()}}).openInWindow({title:"commit"}),y.abrupt("return",q);case 4:case "end":return y.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"interactivelyEditMetadata",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.interactivelySaveModifiedSnapshot(this.commit,this.snapshot);case 2:return n=p.sent,"function"===typeof f&&f({commit:n,
snapshot:this.snapshot}),p.abrupt("return",n);case 5:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"interactivelyEditSnapshotJSON",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n=this,p,q,r,u,x,y,D,H,I;return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return p=this.commit,q=this.snapshot,r=p,u=r._id,x=r.name,y=r.type,N.next=4,Dd.import("./text-editor-7eb763f4.js");case 4:H=N.sent,I=H["default"],
I.openURL("<".concat(y,"/").concat(x,">"),{historyId:"object-serialization-debugger-editor",customSaveAction:function(){var J=Cb(regeneratorRuntime.mark(function Ha(ja){var Qa,ec,mc,hc,Ua;return regeneratorRuntime.wrap(function(xa){for(;;)switch(xa.prev=xa.next){case 0:xa.t0=q;if(xa.t0){xa.next=5;break}xa.next=4;return n.db.fetchSnapshot(void 0,void 0,u);case 4:xa.t0=xa.sent;case 5:Qa=xa.t0;ec=JSON.stringify(Qa,null,2);if(ec===D){xa.next=13;break}xa.next=10;return $world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",
{fontWeight:"normal"}]);case 10:if(mc=xa.sent){xa.next=13;break}return xa.abrupt("return",{saved:!1,message:"canceled"});case 13:return hc=JSON.parse(ja.ui.contentText.textString),xa.next=16,n.interactivelySaveModifiedSnapshot(n.commit,hc);case 16:return p=xa.sent,q=hc,D=ja.ui.contentText.textString,Ua={saved:!0,snapshot:hc,commit:p},"function"===typeof f&&f(Ua),xa.abrupt("return",Ua);case 22:case "end":return xa.stop()}},Ha)}));return function(ja){return J.apply(this,arguments)}}(),customLoadContentAction:function(){var J=
Cb(regeneratorRuntime.mark(function Qa(ja,Ha){var ec;return regeneratorRuntime.wrap(function(mc){for(;;)switch(mc.prev=mc.next){case 0:mc.t0=q;if(mc.t0){mc.next=5;break}mc.next=4;return n.db.fetchSnapshot(void 0,void 0,u);case 4:mc.t0=mc.sent;case 5:return ec=mc.t0,mc.abrupt("return",{content:D=JSON.stringify(ec,null,2),url:"".concat(y,"/").concat(x,".json")});case 7:case "end":return mc.stop()}},Qa)}));return function(ja,Ha){return J.apply(this,arguments)}}()});case 7:case "end":return N.stop()}},
k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"interactivelyEditPackageCode",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p,q,r,u,x,y,D,H;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:n=this.commit;p=this.snapshot;q=n._id;I.t0=p;if(I.t0){I.next=7;break}I.next=6;return this.db.fetchSnapshot(void 0,void 0,q);case 6:I.t0=I.sent;case 7:return r=I.t0,u=(new kh.SnapshotPackageHelper(r)).filesInPackages(),x=u.map(function(N){return{isListItem:!0,
string:N.url,value:N}}),I.next=12,$world.filterableListPrompt("Select file to edit",x,{historyId:"object-serialization-debugger-hist"});case 12:y=I.sent;D=Wb(y.selected,1);if(H=D[0]){I.next=17;break}return I.abrupt("return");case 17:return I.abrupt("return",this.interactivelyEditFileInSnapshotPackage(H,f));case 18:case "end":return I.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"interactivelyEditFileInSnapshotPackage",value:function(){var a=Cb(regeneratorRuntime.mark(function p(f,
k,n){var q=this,r,u,x,y,D,H,I,N,J,sa;return regeneratorRuntime.wrap(function(ja){for(;;)switch(ja.prev=ja.next){case 0:r=this.snapshot;u=this.commit;x=u._id;y=u.name;D=u.type;ja.t0=r;if(ja.t0){ja.next=6;break}ja.next=5;return this.db.fetchSnapshot(void 0,void 0,x);case 5:ja.t0=ja.sent;case 6:return H=ja.t0,I=f.get(H),ja.next=10,Dd.import("./text-editor-7eb763f4.js");case 10:return N=ja.sent,J=N["default"],sa=J.openURL("<".concat(D,"/").concat(y," - ").concat(f.path.slice(1).join("/"),">"),{historyId:"interactivelyEditFileInSnapshotPackage-hist",
customSaveAction:function(){var Ha=Cb(regeneratorRuntime.mark(function mc(ec){var hc,Ua,xa;return regeneratorRuntime.wrap(function(rc){for(;;)switch(rc.prev=rc.next){case 0:hc=f.get(H);if(hc===I){rc.next=7;break}rc.next=4;return $world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]);case 4:if(Ua=rc.sent){rc.next=7;break}return rc.abrupt("return",{saved:!1,message:"canceled"});case 7:return f.set(H,
ec.ui.contentText.textString),rc.next=10,q.interactivelySaveModifiedSnapshot(q.commit,H);case 10:return q.commit=rc.sent,xa={commit:q.commit,snapshot:H,saved:!0},"function"===typeof k&&k(xa),rc.abrupt("return",xa);case 14:case "end":return rc.stop()}},mc)}));return function(ec){return Ha.apply(this,arguments)}}(),customLoadContentAction:function(Ha,Qa){return{content:f.get(H),url:f.url}}}),n&&sa.whenRendered().then(function(){return sa.lineNumber=n.row}),ja.abrupt("return",sa);case 15:case "end":return ja.stop()}},
p,this)}));return function(f,k,n){return a.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"SnapshotEditor"}}],c,{pathInPackage:function(){return"./partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10066,end:15785})}(void 0));kh.SnapshotEditor=rI;kh.SnapshotEditor=rI;kh.partURLRe=
/^part:\/\/([^\/]+)\/(.*)$/;var sI=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),g=c.hasOwnProperty("PartResource")&&"function"===typeof c.PartResource?c.PartResource:c.PartResource=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"canDealWithJSON",get:function(){return!1}},{key:"dirList",value:function(){var a=Cb(regeneratorRuntime.mark(function n(f,
k){return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,kh.resource(this.url.replace("part://","styleguide://")).dirList(f,k);case 2:return p.abrupt("return",p.sent);case 3:case "end":return p.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"write",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:throw Error("Part urls are ready only! Please go to the world they are defined in and change the exported component directly.");
case 1:case "end":return n.stop()}},k)}));return function(f){return a.apply(this,arguments)}}()},{key:"read",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,u;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,kh.resource(this.url.replace("part://","styleguide://")).read();case 2:k=x.sent;if(!k.master){x.next=6;break}x.next=6;return k.master.whenReady();case 6:n=k.copy();n.isComponent=!1;n.name="a"+kh.getClassName(n);n.withAllSubmorphsDoExcluding(function(y){y!==
n&&y.master||delete y._parametrizedProps},function(y){return y.master&&y!==n});p=n.master;n.master=k;if(!n._pool.mastersInSubHierarchy){x.next=33;break}q=fa(n._pool.mastersInSubHierarchy);x.prev=14;q.s();case 16:if((r=q.n()).done){x.next=25;break}u=r.value;if(p!==u){x.next=20;break}return x.abrupt("continue",23);case 20:return x.next=22,u.applyIfNeeded(!0);case 22:u.derivedMorph.ownerChain().includes(n)||u.derivedMorph.requestMasterStyling();case 23:x.next=16;break;case 25:x.next=30;break;case 27:x.prev=
27,x.t0=x["catch"](14),q.e(x.t0);case 30:return x.prev=30,q.f(),x.finish(30);case 33:return n.master.applyIfNeeded(!0),delete n._pool,n.withAllSubmorphsDo(function(y){if("function"===typeof y.onLoad)y.onLoad()}),x.abrupt("return",n);case 37:case "end":return x.stop()}},f,this,[[14,27,30,33]])}));return function(){return a.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PartResource"}}],c,{pathInPackage:function(){return"./partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:15840,end:17625})}(kh.Resource);kh.PartResource=sI;kh.PartResource=sI;var tI=bd("bH",{name:"part",matches:function(b){return b.match(kh.partURLRe)},resourceClass:kh.PartResource});kh.resourceExtension=tI;kh.resourceExtension=tI;kh.registerExtension(kh.resourceExtension);(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),
g=c.hasOwnProperty("CommitEditor")&&"function"===typeof c.CommitEditor?c.CommitEditor:c.CommitEditor=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"onLoad",value:function(){kh.connect(this.ui.okButton,"fire",this,"accept");kh.connect(this.ui.cancelButton,"fire",this,"cancel")}},{key:"accept",value:function(){}},{key:"cancel",value:function(){}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"CommitEditor"}},{key:"properties",get:function(){return{name:{defaultValue:"commit editor"},extent:{defaultValue:kh.pt(420,24)},layout:{initialize:function(){this.layout=new kh.VerticalLayout({resizeSubmorphs:!0,spacing:3})}},commit:{set:function(a){this._commit=a;var d=a.type,f=a.timestamp,k=a.author,n=a.tags,p=a.description,q=a.metadata,r=this.ui,u=r.typeInput,x=r.timestampInput,y=r.authorNameInput,D=r.authorEmailInput,H=r.authorRealmInput,I=r.tagsInput,N=r.descriptionInput,
J=r.messageInput,sa=r.metadataInput;r.nameInput.input=a.name;u.input=d;x.input=String(new Date(f));y.input=k.name;D.input=k.email;H.input=k.realm;I.input=n.join(" ");N.textString=p;J.textString="";sa.textString=q?JSON.stringify(q,null,2):""},get:function(){var a=this._commit;if(!a)throw Error("commit editor does not have a _commit object");var d=this.ui,f=d.authorNameInput,k=d.authorEmailInput,n=d.authorRealmInput,p=d.tagsInput,q=d.descriptionInput,r=d.messageInput,u=d.metadataInput,x=d.nameInput.input;
d=d.typeInput.input;if(a.name!==x)throw Error("name does not match _commit.name: ".concat(x," vs ").concat(a.name));if(a.type!==d)throw Error("type does not match _commit.type: ".concat(d," vs ").concat(a.type));a.author.name=f.input;a.author.email=k.input;a.author.realm=n.input;a.tags=p.input.split(" ").map(function(y){return y.trim()}).filter(Boolean);a.description=q.textString;a.message=r.textString;a.metadata=u.textString?JSON.parse(u.textString):null;return a}},ui:{get:function(){return{metadataInput:this.get("metadata input"),
messageInput:this.get("message input"),descriptionInput:this.get("description input"),tagsInput:this.get("tags input"),authorRealmInput:this.get("author.realm input"),authorEmailInput:this.get("author.email input"),authorNameInput:this.get("author.name input"),timestampInput:this.get("timestamp input"),typeInput:this.get("type input"),nameInput:this.get("name input"),cancelButton:this.get("cancel button"),okButton:this.get("ok button")}}},submorphs:{initialize:function(){var a={type:"input",extent:kh.pt(420,
24),fixedWidth:!0,fixedHeight:!0,padding:kh.Rectangle.inset(4,4),border:{color:kh.Color.gray,width:1}};this.submorphs=[Object.assign({},a,{name:"name input",placeholder:"name"}),Object.assign({},a,{name:"type input",placeholder:"type"}),Object.assign({},a,{name:"timestamp input",placeholder:"timestamp"}),{layout:new kh.VerticalLayout({resizeSubmorphs:!0,spacing:3}),submorphs:[Object.assign({},a,{name:"author.name input",placeholder:"author name"}),Object.assign({},a,{name:"author.email input",placeholder:"author email"}),
Object.assign({},a,{name:"author.realm input",placeholder:"author realm"})]},Object.assign({},a,{name:"tags input",placeholder:"tags"}),Object.assign({},a,{height:70,name:"description input",type:"text"}),Object.assign({},a,{height:70,name:"message input",type:"text"}),Object.assign({},a,{height:70,name:"metadata input",type:"text"}),{layout:new kh.HorizontalLayout({spacing:3,direction:"centered"}),submorphs:[{type:"button",name:"ok button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}]}}}}}],
c,{pathInPackage:function(){return"./partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:17808,end:23414})})(kh.Morph);kh.buildCommitEditor=yF;var qT=Object.freeze({__proto__:null,getAllPartResources:mF,loadPart:fA,savePart:oF,interactivelySavePart:Vu,interactivelyLoadObjectFromPartsBinFolder:rF,interactivelySaveObjectToPartsBinFolder:tF,
saveObjectToPartsbinFolder:vF,loadObjectFromPartsbinFolder:gA,SnapshotEditor:rI,PartResource:sI,resourceExtension:tI,buildCommitEditor:yF});bd("ch",qT);var mi=window.lively.FreezerRuntime.recorderFor("lively.morphic/components/core.js");mi.part=Us;mi.component=ex;mi.without=fx;mi.add=gx;mi.edit=hA;mi.insertFontCSS=function(b,c){c.endsWith(".otf")?mi.addOrChangeCSSDeclaration("".concat(b),"@font-face {\n             font-family: ".concat(b,';\n             src: url("').concat(c,'") format("opentype");\n         }')):
mi.addOrChangeCSSDeclaration("".concat(b),'@import url("'.concat(c,'");'))};mi.ensureFont=hx;mi.addOrChangeCSSDeclaration=zq;mi.string=Xj;mi.properties=Pq;mi.obj=bj;mi.getClassName=Mo;mi.epiConnect=lw;mi.serializeMorph=ww;mi.sanitizeFont=pu;mi.getClassForName=LC;mi.morph=Sm;mi.PolicyApplicator=ZA;mi.evaluateAsSpec=!1;var AB=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/components/core.js"),g=c.hasOwnProperty("ComponentDescriptor")&&"function"===typeof c.ComponentDescriptor?
c.ComponentDescriptor:c.ComponentDescriptor=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"__serialize__",value:function(a){var d=this[Symbol["for"]("lively-module-meta")];return a.expressionSerializer.exprStringEncode({__expr__:d["export"],bindings:dd({},d.module,d["export"])})}},{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d){this.init(a,d)}},{key:"isComponentDescriptor",
get:function(){return!0}},{key:"init",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{moduleId:{pathInPackage:function(){return"./components/core.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}}.id};delete this._snap;delete this._cachedComponent;a.isPolicy?(this.stylePolicy=a,this.stylePolicy.addMetaInfo(d)):
this.generatorFunction=a;this[Symbol["for"]("lively-module-meta")]=d;return this}},{key:"extend",value:function(a){return new mi.PolicyApplicator(a,this)}},{key:"derive",value:function(a){return this.stylePolicy.instantiate(a)}},{key:"getInstance",value:function(a){return this.derive(a)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ComponentDescriptor"}},{key:"for",value:function(a,d,f){a=this.extractSpec(a);return f&&f.isComponentDescriptor?f.init(a,d):new mi.ComponentDescriptor(a,
d)}},{key:"extractSpec",value:function(a){mi.evaluateAsSpec=!0;var d={};try{d=a(),d.isPolicy||(d=new mi.PolicyApplicator(d))}finally{mi.evaluateAsSpec=!1}return d}}],c,{pathInPackage:function(){return"./components/core.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1947,end:5517})}(void 0);mi.ComponentDescriptor=AB;mi.ComponentDescriptor=
AB;var sy=bd("aD",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/components/core.js"),g=c.hasOwnProperty("ViewModel")&&"function"===typeof c.ViewModel?c.ViewModel:c.ViewModel=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"toString",value:function(){return this.view?"<".concat(mi.getClassName(this)," - ").concat(this.view.name,">"):"<Unattached ".concat(mi.getClassName(this),
">")}},{key:Symbol["for"]("lively-instance-initialize"),value:function(){this.initializeProperties(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"__only_serialize__",get:function(){var a=this.defaultProperties,d=this.propertiesAndPropertySettings().properties,f=[];this.attributeConnections&&f.push("attributeConnections");for(var k in d){var n=d[k];n.readOnly||n.derived||n.isComponent||n.hasOwnProperty("serialize")&&!n.serialize||mi.obj.equals(this[k],a[k])||f.push(k)}return f}},
{key:"__additionally_serialize__",value:function(a,d,f,k){a=this.propertiesAndPropertySettings().properties;for(var n in a)a[n].isComponent&&this[n]&&(d=this[n][Symbol["for"]("lively-module-meta")])&&k(n,f.expressionSerializer.exprStringEncode({__expr__:d["export"],bindings:dd({},d.module,d["export"])}))}},{key:"getProperty",value:function(a){return this._viewState[a]}},{key:"setProperty",value:function(a,d){this._viewState[a]=d;if(!this._isRefreshing){this._isRefreshing=!0;try{if(this.view)this.onRefresh(a)}catch(f){}this._isRefreshing=
!1}}},{key:"world",value:function(){return this.view.world()}},{key:"execCommand",value:function(a,d){return this.view.execCommand(a,d)}},{key:"doWithScope",value:function(a){var d=this;return this.view&&this.view.withAllSubmorphsDoExcluding(a,function(f){return f.ignoreScope||f.viewModel&&f.viewModel!==d})}},{key:"onDeactivate",value:function(){this.getBindingConnections().forEach(function(k){return k.disconnect()});if(this.view){var a=fa(this.expose||[]),d;try{for(a.s();!(d=a.n()).done;){var f=
d.value;mi.obj.isArray(f)&&(f=f[0]);delete this.view[f]}}catch(k){a.e(k)}finally{a.f()}}}},{key:"onActivate",value:function(){this.view.viewModel===this&&(this.reifyExposedProps(),this.reifyBindings())}},{key:"viewDidLoad",value:function(){}},{key:"onRefresh",value:function(a){}},{key:"reifyBindings",value:function(){delete this._ui;var a=fa(this.bindings),d;try{for(a.s();!(d=a.n()).done;){var f=d.value,k=f.target,n=f.model,p=f.signal,q=f.handler,r=f.override,u=void 0===r?!1:r,x=f.converter,y=void 0===
x?!1:x,D=f.updater,H=void 0===D?!1:D;try{n&&(k=this.view.getSubmorphNamed(n).viewModel),k||(k=this.view),"string"===typeof k&&(k=this.view.getSubmorphNamed(k)),k&&(mi.obj.isFunction(q)?mi.epiConnect(k,p,q):mi.epiConnect(k,p,this,q,{override:u,converter:y,updater:H}))}catch(I){console.warn("Failed to reify biniding: ",k,n,p,q)}}}catch(I){a.e(I)}finally{a.f()}}},{key:"reifyExposedProps",value:function(){var a=this,d=this.propertiesAndPropertySettings().properties,f=mi.properties.allPropertyDescriptors(this),
k=fa(this.expose||[]),n;try{var p=function(){var q=n.value;if(mi.obj.isArray(q)){var r=Wb(q,2),u=r[0],x=r[1];r=x.model;x=x.target;if(r)var y=a.view.getSubmorphNamed(r).viewModel;x&&(y=a.view.getSubmorphNamed(x));Object.defineProperty(a.view,u,{configurable:!0,get:function(){var H=y[u];return mi.obj.isFunction(H)?H.bind(y):H},set:function(H){return y[u]=H}});return"continue"}if(mi.obj.isObject(q)){var D=q.method;r=q.as;a.view[r]=function(){return a[D].apply(a,arguments)};a.view[r].toString=function(){return a[D].toString()};
return"continue"}r=f[q];if(d[q]||r&&(r.get||r.set))return Object.defineProperty(a.view,q,{configurable:!0,get:function(){return a[q]},set:function(H){return a[q]=H}}),"continue";a.view[q]=function(){return a[q].apply(a,arguments)};mi.obj.isFunction(a[q])&&(a.view[q].toString=function(){return a[q].toString()})};for(k.s();!(n=k.n()).done;)p()}catch(q){k.e(q)}finally{k.f()}}},{key:"withoutBindingsDo",value:function(a){var d=this;this.onDeactivate();try{var f=a()}catch(k){console.error(k.message)}if(f&&
f.then)return f.then(function(){return d.onActivate()});this.onActivate()}},{key:"getBindingConnections",value:function(){var a=this,d=[],f=this.bindings,k=function(n){n.forEach(function(p){p.targetObj===a&&f.find(function(q){return mi.obj.isFunction(q.handler)?p.targetObj.toString()===q.handler.toString():p.sourceAttrName===q.signal&&p.targetMethodName===q.handler})&&d.push(p)})};this.doWithScope(function(n){n.attributeConnections&&k(n.attributeConnections);n.viewModel&&n.viewModel.attributeConnections&&
k(n.viewModel.attributeConnections)});return d}},{key:"attach",value:function(a){var d=this;this.view=a;this.reifyBindings();this.reifyExposedProps();a.toString=function(){return"<".concat(mi.getClassName(a),"[").concat(mi.getClassName(d),"]>")};this.onRefresh();this.viewDidLoad()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ViewModel"}},{key:"propertySettings",get:function(){return{defaultGetter:function(a){return this.getProperty(a)},defaultSetter:function(a,d){this.setProperty(a,
d)},valueStoreProperty:"_viewState"}}},{key:"properties",get:function(){return{view:{serialize:!1,set:function(a){this.setProperty("view",a);a&&(a.viewModel=this)}},bindings:{serialize:!1,readOnly:!0,get:function(){return[]}},models:{serialize:!1,derived:!0,get:function(){var a={};if(lively.FreezerRuntime&&this._models)return this._models;this.doWithScope(function(d){d.viewModel&&(a[mi.string.camelize(d.name.split(" ").join("-"))]=d.viewModel)});return this._models=a}},expose:{serialize:!1,get:function(){return[]}},
styleProperties:{group:"styling",derived:!0,readOnly:!0,get:function(){var a=this.propertiesAndPropertySettings(),d=a.properties,f=[];a=fa(a.order);var k;try{for(a.s();!(k=a.n()).done;){var n=k.value;(d[n].isStyleProp||d[n].isComponent)&&f.push(n)}}catch(p){a.e(p)}finally{a.f()}return f}},ui:{serialize:!1,derived:!0,get:function(){var a={},d={};if(lively.FreezerRuntime&&this._ui)return this._ui;this.doWithScope(function(f){a[mi.string.camelize(f.name.split(" ").join("-"))]=f;var k=mi.getClassName(f);
k=k.charAt(0).toLowerCase()+k.slice(1)+"s";var n=d[k]||[];n.push(f);d[k]=n});return this._ui=Object.assign({},a,{},d)}}}}}],c,{pathInPackage:function(){return"./components/core.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6380,end:17789})}(void 0));mi.ViewModel=sy;mi.ViewModel=sy;mi.part=Us;mi.component=ex;mi.component["for"]=
function(b,c,g){return mi.ComponentDescriptor["for"](b,{moduleId:c.module,exportedName:c["export"],range:c.range},g)};mi.without=fx;mi.add=gx;mi.edit=hA;mi.ensureFont=hx;var f7=Object.freeze({__proto__:null,ComponentDescriptor:AB,ViewModel:sy,part:Us,component:ex,without:fx,add:gx,edit:hA,ensureFont:hx}),bi=window.lively.FreezerRuntime.recorderFor("lively.morphic/world-loading.js");bi.reportWorldLoad=function(b,c){c=c?"".concat(c.name," (").concat((c.token||"").slice(0,5),")"):"---";fetch(bi.string.joinPath(System.baseURL,
"/report-world-load"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"".concat(c," logged in at ").concat(b.name," [").concat(window._livelyLoadId,"]")})})["catch"](function(g){return console.warn("report-world-load failed: ".concat(g))})};bi.setupLively2Lively=function(b){return zF.apply(this,arguments)};bi.setupLivelyShell=function(b){return AF.apply(this,arguments)};bi.loadLocalConfig=function(){return BF.apply(this,arguments)};bi.loadWorld=CF;bi.loadWorldFromCommit=
EF;bi.loadWorldFromDB=GF;bi.loadWorldFromURL=IF;bi.interactivelySaveWorld=ix;bi.resource=Am;bi.registerResourceExension=Bq;bi.subscribe=kr;bi.emit=jo;bi.Path=qj;bi.obj=bj;bi.date=$s;bi.promise=yj;bi.string=Xj;bi.defaultDirectory=yw;bi.ShellClientResource=cB;bi.MorphicEnv=Yp;bi.createMorphSnapshot=qu;bi.MorphicDB=Et;bi.ensureCommitInfo=dx;bi.pathForBrowserHistory=vw;bi.part=Us;bi.loadWorld=CF;bi.loadWorldFromCommit=EF;bi.loadWorldFromDB=GF;bi.loadWorldFromURL=IF;bi.interactivelySaveWorld=ix;var Ok=
window.lively.FreezerRuntime.recorderFor("lively.user/client/user.js");Ok.jwtTokenDecode=function(b){b=b.split(".");b=Wb(b,3);b[0];var c=b[1];b[2];return JSON.parse(atob(c))};Ok.guid=function(){var b=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};Ok.makeRequest=function(b){var c=2<arguments.length?arguments[2]:void 0,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},a={method:1<arguments.length&&void 0!==
arguments[1]?arguments[1]:"GET",mode:"cors"};c&&(a.body=c);a.redirect="follow";a.headers=Object.assign({},g);return fetch(b,a)};Ok.POST=function(b,c){return LF.apply(this,arguments)};Ok.resource=Am;var Dv=bd("aJ",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),g=c.hasOwnProperty("User")&&"function"===typeof c.User?c.User:c.User=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d){this.realm=d;this.name=a;this.roles={};this.createdAt=0;this.token=this.email=null}},{key:"isLoggedIn",value:function(){return!!this.token}},{key:"loginOrRegister",value:function(){var a=Cb(regeneratorRuntime.mark(function p(f,k,n){var q,r,u,x,y,D,H,I;return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return q=this.email,r=this.createdAt,u=this.roles,x=this.name,y="register"===
f?{password:k,email:q,createdAt:r,roles:u,name:x}:{password:k,name:x},N.next=4,Ok.POST(n+"/"+f,y);case 4:D=N.sent;if(!D.error){N.next=7;break}return N.abrupt("return",D);case 7:return H=D.token,I=Ok.jwtTokenDecode(H),u=I.roles,r=I.createdAt,q=I.email,Object.assign(this,{roles:u,createdAt:r,email:q,token:H}),N.abrupt("return",{status:D.status});case 11:case "end":return N.stop()}},p,this)}));return function(f,k,n){return a.apply(this,arguments)}}()},{key:"verify",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,
n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Ok.POST(this.realm+"/verify",{token:this.token});case 2:return k=p.sent,n=k.error,p.abrupt("return",!n);case 6:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"login",value:function(a){return this.loginOrRegister("login",a,this.realm)}},{key:"register",value:function(a){return this.loginOrRegister("register",a,this.realm)}},{key:"checkPassword",value:function(){var a=
Cb(regeneratorRuntime.mark(function k(f){var n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.isLoggedIn){r.next=2;break}throw Error("To check password, user needs to login.");case 2:return r.next=4,Ok.POST(this.realm+"/check-password",{token:this.token,password:f});case 4:n=r.sent;p=n.error;q=n.status;if(!p){r.next=9;break}throw Error(p);case 9:return r.abrupt("return",q);case 10:case "end":return r.stop()}},k,this)}));return function(f){return a.apply(this,
arguments)}}()},{key:"modify",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p,q,r,u,x,y,D;return regeneratorRuntime.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,Ok.POST(this.realm+"/modify",{token:this.token,changes:f});case 2:n=H.sent;p=n.error;q=n.status;r=n.token;if(!p){H.next=8;break}return H.abrupt("return",{error:p});case 8:return r&&(u=Ok.jwtTokenDecode(r),x=u.roles,y=u.createdAt,D=u.email,Object.assign(this,{roles:x,createdAt:y,email:D,token:r})),
H.abrupt("return",{status:q});case 10:case "end":return H.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"getDir",value:function(){return Ok.resource(System.baseURL).join("users").join(this.name)}},{key:"toString",value:function(){return"<".concat(this.constructor.name," ").concat(this.name," ").concat(this.isLoggedIn()?"":"not ","logged in>")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"User"}},{key:"guest",get:function(){return Ok.guestUser}},
{key:"named",value:function(a,d){var f=a+"-"+d,k=Ok.userMap.get(f);k||(k=new this(a,d),Ok.userMap.set(f,k));return k}},{key:"fromToken",value:function(a,d){var f=Ok.jwtTokenDecode(a),k=f.roles,n=f.createdAt,p=f.email;return Object.assign(this.named(f.name,d),{roles:k,createdAt:n,email:p,token:a})}},{key:"clearCache",value:function(){Ok.userMap=new Map}}],c,{pathInPackage:function(){return"./client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.user",version:"0.2.0"}}},{start:1134,end:4112})}(void 0));Ok.User=Dv;Ok.User=Dv;var ty=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),g=c.hasOwnProperty("GuestUser")&&"function"===typeof c.GuestUser?c.GuestUser:c.GuestUser=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"isGuestUser",get:function(){return!0}},
{key:"isLoggedIn",value:function(){return!1}},{key:"loginOrRegister",value:function(){var a=Cb(regeneratorRuntime.mark(function p(f,k,n){return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:throw Error("Guest user cannot "+f+"!");case 1:case "end":return q.stop()}},p)}));return function(f,k,n){return a.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"GuestUser"}}],c,{pathInPackage:function(){return"./client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.user",version:"0.2.0"}}},{start:4120,end:4358})}(Ok.User);Ok.GuestUser=ty;Ok.GuestUser=ty;Ok.userMap=Ok.userMap||new Map;Ok.guestUser=Ok.guestUser||Ok.GuestUser.named("guest-"+Ok.guid(),null);var jq=window.lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js");jq.User=Dv;jq.GuestUser=ty;jq.emit=jo;var uy=bd("aH",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js"),
g=c.hasOwnProperty("UserRegistry")&&"function"===typeof c.UserRegistry?c.UserRegistry:c.UserRegistry=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"isTrackingGuestUsers",get:function(){return!1}},{key:"hasUserStored",value:function(){try{return!!localStorage["lively.user"]||!!sessionStorage["lively.user"]}catch(a){return!1}}},{key:"login",value:function(){var a=Cb(regeneratorRuntime.mark(function n(f,
k){var p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(f.isGuestUser){r.next=7;break}r.next=3;return f.login(k);case 3:p=r.sent;q=p.error;if(!q){r.next=7;break}throw Error(q);case 7:return this.saveUserToLocalStorage(f),r.abrupt("return",f);case 9:case "end":return r.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"logout",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=
n.next){case 0:try{this.isTrackingGuestUsers||(delete localStorage["lively.user"],delete sessionStorage["lively.user"])}catch(p){}f=f&&f.isGuestUser?f:jq.User.guest;jq.emit("lively.user/userchanged",{user:f},Date.now(),System);return n.abrupt("return",f);case 4:case "end":return n.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"register",value:function(){var a=Cb(regeneratorRuntime.mark(function n(f,k){var p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=
r.next){case 0:if(f&&!f.isGuestUser){r.next=2;break}throw Error("guest users cannot register");case 2:return r.next=4,f.register(k);case 4:p=r.sent;q=p.error;if(!q){r.next=8;break}throw Error(q);case 8:return this.saveUserToLocalStorage(f),r.abrupt("return",f);case 10:case "end":return r.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"loadUserFromLocalStorage",value:function(a){try{var d=localStorage["lively.user"]||sessionStorage["lively.user"];if(d)return d=JSON.parse(d),
d.isGuest?jq.GuestUser.named(d.name,null):jq.User.fromToken(d.token,a)}catch(f){console.warn("Could not read user from localStorage: ".concat(f))}return this.isTrackingGuestUsers?!1:jq.GuestUser.guest}},{key:"saveUserToLocalStorage",value:function(a){if(!a||!a.isGuestUser&&!a.token)return!1;jq.emit("lively.user/userchanged",{user:a},Date.now(),System);try{return a.isGuestUser&&!this.isTrackingGuestUsers?(sessionStorage["lively.user"]=JSON.stringify({isGuest:!0,name:a.name}),delete localStorage["lively.user"]):
localStorage["lively.user"]=a.isGuestUser&&this.isTrackingGuestUsers?JSON.stringify({isGuest:!0,name:a.name}):JSON.stringify({token:a.token}),!0}catch(d){return console.warn("Could not save user into local/sessionStorage: ".concat(d)),!1}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"UserRegistry"}},{key:"current",get:function(){return this._current||(this._current=new this)}}],c,{pathInPackage:function(){return"./client/user-registry.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.user",version:"0.2.0"}}},{start:132,end:2650})}(void 0));jq["default"]=uy;var vy=window.lively.FreezerRuntime.recorderFor("lively.user/index.js");vy.User=Dv;vy.ClientUser=Dv;vy.GuestUser=ty;vy["default"]=uy;vy.UserRegistry=uy;var g7=Object.freeze({__proto__:null,ClientUser:Dv,GuestUser:ty,UserRegistry:uy});bd("ci",g7);var Ci=window.lively.FreezerRuntime.recorderFor("lively.morphic/world.js");
Ci.bowser=pt;Ci.Rectangle=fn;Ci.Color=Bn;Ci.pt=wl;Ci.arr=aj;Ci.promise=yj;Ci.Path=qj;Ci.obj=bj;Ci.signal=Ln;Ci.config=Jm;Ci.MorphicEnv=Yp;Ci.Morph=gp;Ci.TooltipViewer=Yx;Ci.Tooltip=Xx;Ci.loadWorldFromURL=IF;Ci.loadWorldFromDB=GF;Ci.loadWorldFromCommit=EF;Ci.loadWorld=CF;Ci.touchInputDevice=bq;Ci.UserRegistry=uy;Ci.emit=jo;Ci.resource=Am;Ci.loadMorphFromSnapshot=zs;var gv=bd("W",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),g=c.hasOwnProperty("World")&&"function"===
typeof c.World?c.World:c.World=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a);this._renderer=null;this._tooltipViewer=new Ci.TooltipViewer(this)}},{key:"__deserialize__",value:function(a,d,f,k){Ve._get(Object.getPrototypeOf(g.prototype),
"__deserialize__",this).call(this,a,d,f,k);this._renderer=null;this._tooltipViewer=new Ci.TooltipViewer(this)}},{key:"__additionally_serialize__",value:function(a,d,f,k){Ve._get(Object.getPrototypeOf(g.prototype),"__additionally_serialize__",this).call(this,a,d,f,k);if(a.props.submorphs)for(a=a.props.submorphs.value,d=a.length;d--;)f.refForId(a[d].id).realObj.isHand&&Ci.arr.removeAt(a,d)}},{key:"commands",get:function(){return[].concat(db(Ve._get(Object.getPrototypeOf(g.prototype),"commands",this)),
[{name:"resize to fit window",exec:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=function(){f.extent=lively.FreezerRuntime?f.windowBounds().extent():f.windowBounds().union(f.submorphBounds(function(u){return!u.isEpiMorph&&!u.hasFixedPosition})).extent()},p=function(){var u=Cb(regeneratorRuntime.mark(function y(){return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=
2,f.whenRendered();case 2:return delete f._cachedWindowBounds,D.abrupt("return",!f.windowBounds().extent().equals(f.extent));case 4:case "end":return D.stop()}},y)}));return function(){return u.apply(this,arguments)}}(),q=0;case 3:r.t0=5>q;if(!r.t0){r.next=8;break}r.next=7;return p();case 7:r.t0=r.sent;case 8:if(!r.t0){r.next=13;break}q++;n();r.next=3;break;case 13:return f.relayout(),r.abrupt("return",!0);case 15:case "end":return r.stop()}},k)}));return function(f){return a.apply(this,arguments)}}()}])}},
{key:"isWorld",get:function(){return!0}},{key:"whenReady",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",!0);case 1:case "end":return k.stop()}},f)}));return function(){return a.apply(this,arguments)}}()},{key:"render",value:function(a){return a.renderWorld(this)}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",set:function(a){}},{key:"existingHandForPointerId",value:function(a){return this.submorphs.find(function(d){return d instanceof
Ci.Hand&&d.pointerId===a})}},{key:"layoutHaloForPointerId",value:function(a){}},{key:"haloForPointerId",value:function(a){}},{key:"handForPointerId",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,f=this.existingHandForPointerId(a);return f?f:!f&&this.firstHand&&d?(this.firstHand.pointerId=a,this.firstHand):this.addMorph(new Ci.Hand(a),this.submorphs[0])}},{key:"removeHandForPointerId",value:function(a){(a=this.existingHandForPointerId(a))&&1<this.hands.length&&a.remove()}},
{key:"world",value:function(){return this}},{key:"makeDirty",value:function(){if(!this._dirty){this._dirty=!0;var a=this.env.renderer;a&&a.renderLater()}}},{key:"hands",get:function(){return Ci.arr.sortBy(this.submorphs.filter(function(a){return a.isHand}),function(a){return a.pointerId})}},{key:"firstHand",get:function(){return this.hands[0]}},{key:"getCurrentUser",value:function(){var a=Ci.UserRegistry&&Ci.UserRegistry.current;return a&&a.loadUserFromLocalStorage(window.AUTH_SERVER_URL||Ci.config.users.authServerURL)}},
{key:"focusedMorph",get:function(){var a=this.env.eventDispatcher;return(a=a&&a.eventState.focusedMorph)&&a.world()===this?a:this}},{key:"onMouseMove",value:function(a){a.hand&&a.hand.update(a);this._tooltipViewer.mouseMove(a)}},{key:"onHoverOut",value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),"onHoverOut",this).call(this,a);if(a.state.draggedMorph){var d=a.state;d.dragDelta=(d.draggedMorph.owner||this).getInverseTransform().transformDirection(a.position.subPt(d.lastDragPosition));d.absDragDelta=
a.position.subPt(d.clickedOnPosition);a.onAfterDispatch(function(){return d.lastDragPosition=a.position});a.state.draggedMorph.onDrag(a)}}},{key:"onMouseDown",value:function(a){a.state.menu&&a.state.menu.remove();this.onWindowScroll();this._tooltipViewer.mouseDown(a)}},{key:"onMouseWheel",value:function(a){a.isShiftDown()&&(window.scrollBy(-a.domEvt.wheelDeltaX,-a.domEvt.wheelDeltaY),a.stop())}},{key:"onBeforeUnload",value:function(a){return this.onUnload(a)}},{key:"onUnload",value:function(a){this.submorphs.forEach(function(d){if("function"===
typeof d.onWorldUnload)d.onWorldUnload(a)})}},{key:"updateVisibleWindowMorphs",value:function(){this.withAllSubmorphsDo(function(a){if(a.respondsToVisibleWindow){if("function"!==typeof a.relayout)return a.showError(Error("".concat(a," listed as responding to visible window")+" change, but has no relayout instruction"));a.relayout()}})}},{key:"onWindowScroll",value:function(){var a=this.env.eventDispatcher.keyInputHelper.inputState,d=a.positionChangedTime,f=a.scrollLeftWhenChanged;a=a.scrollTopWhenChanged;
var k=document.documentElement;500>Date.now()-d&&!Ci.bowser.firefox?(k.scrollLeft=f,k.scrollTop=a):(this.setProperty("scroll",Ci.pt(k.scrollLeft,k.scrollTop)),this._cachedWindowBounds=null,this.updateVisibleWindowMorphs())}},{key:"onWindowResize",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.whenRendered();case 2:this._cachedWindowBounds=null;if("elastic"!==this.resizePolicy){r.next=
6;break}r.next=6;return this.execCommand("resize to fit window");case 6:this.updateVisibleWindowMorphs();n=fa(this.submorphs);try{for(n.s();!(p=n.n()).done;)if(q=p.value,"function"===typeof q.onWorldResize)q.onWorldResize(f)}catch(u){n.e(u)}finally{n.f()}case 9:case "end":return r.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"relayCommandExecutionToFocusedMorph",value:function(a){if(!a)return null;var d=this.focusedMorph,f=Ci.arr.findAndGet(Ci.arr.without([d].concat(db(d.ownerChain())),
this),function(k){return Ci.arr.findAndGet(k.keyhandlers,function(n){return(n=n.eventCommandLookup(k,a))?{command:n,morph:k}:null})})||{};d=f.command;f=f.morph;return d?f.execCommand(d):null}},{key:"visibleBounds",value:function(){var a=this.env.renderer?this.windowBounds().intersection(this.innerBounds()):this.innerBounds();if(Ci.bowser.mac)return a;if(a.height<this.extent.y||a.width<this.extent.x)a.width-=this.scrollbarOffset.x;return a}},{key:"visibleBoundsExcludingTopBar",value:function(){return this.visibleBounds()}},
{key:"windowBounds",value:function(a){if(this._cachedWindowBounds)return this._cachedWindowBounds;a=this.env.domEnv.window;var d=1/this.scale;return this._cachedWindowBounds=new Ci.Rectangle(a.scrollX*d,a.scrollY*d,(a.innerWidth||this.width)*d,(a.innerHeight||this.height)*d)}},{key:"logError",value:function(a){console.log(a)}},{key:"relayout",value:function(){}},{key:"defaultMenuItems",value:function(a){return[]}},{key:"serveFileAsDownload",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:{},f=d.fileName;f=void 0===f?"file.txt":f;d=d.type;d=void 0===d?"text/plain":d;var k=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+=[a-z\-]+)?)?(;base64)?,[a-z0-9!\$&',\(\)\*\+,;=\-\._~:@\/\?%\s]*\s*$/i,n=a instanceof Blob,p=window.document.createElement("a");p.href=Ci.obj.isString(a)&&a.match(k)?a:window.URL.createObjectURL(n?a:new Blob([a],{type:d}));p.download=f;document.body.appendChild(p);p.click();document.body.removeChild(p)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"World"}},
{key:"properties",get:function(){return{resizePolicy:{doc:"how the world behaves on window size changes 'elastic': resizes to window extent, 'static': leaves its extent unchanged",defaultValue:"elastic",after:["clipMode"],type:"Enum",values:["static","elastic"],set:function(a){this.setProperty("resizePolicy",a);this.clipMode="static"===a?"visible":"hidden";"elastic"==a&&this.execCommand("resize to fit window")}},colorScheme:{derived:!0,get:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?
"dark":"light"}},showsUserFlap:{defaultValue:!0,set:function(a){var d=this,f=Ci.resource(document.location.href).query().showsUserFlap;"undefined"!==typeof f&&(a=f);this.setProperty("showsUserFlap",a);Dd.import("./user-ui-98206202.js").then(function(k){return k.UserUI[a?"showUserFlap":"hideUserFlap"](d)})}}}}},{key:"defaultWorld",value:function(){return Ci.MorphicEnv["default"]().world}},{key:"loadWorldFromURL",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.defaultWorld();
return Ci.loadWorldFromURL(a,d,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}},{key:"loadWorld",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.defaultWorld();return Ci.loadWorld(a,d,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}},{key:"loadFromCommit",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.defaultWorld();return Ci.loadWorldFromCommit(a,d,2<arguments.length&&void 0!==arguments[2]?arguments[2]:
{})}},{key:"loadFromDB",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.defaultWorld();return Ci.loadWorldFromDB(a,d,f,3<arguments.length&&void 0!==arguments[3]?arguments[3]:{})}},{key:"loadFromResource",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p,q=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=1<q.length&&void 0!==q[1]?q[1]:this.defaultWorld(),p=2<q.length&&void 0!==q[2]?q[2]:{},
r.t0=Ci,r.t1=Ci,r.next=6,f.readJson();case 6:return r.t2=r.sent,r.next=9,r.t1.loadMorphFromSnapshot.call(r.t1,r.t2);case 9:return r.t3=r.sent,r.t4=n,r.t5=p,r.next=14,r.t0.loadWorld.call(r.t0,r.t3,r.t4,r.t5);case 14:return r.abrupt("return",r.sent);case 15:case "end":return r.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()}],c,{pathInPackage:function(){return"./world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:772,end:12558})}(Ci.Morph));Ci.World=gv;Ci.World=gv;var wy=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),g=c.hasOwnProperty("Hand")&&"function"===typeof c.Hand?c.Hand:c.Hand=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,{pointerId:a})}},{key:"__deserialize__",value:function(a,d,f,k){Ve._get(Object.getPrototypeOf(g.prototype),"__deserialize__",this).call(this,a,d,f,k);this.reset()}},{key:"reset",value:function(){this._grabbedMorphProperties=new WeakMap}},{key:"carriesMorphs",value:function(){return!!this.grabbedMorphs.length}},{key:"morphsContainingPoint",value:function(a,d){return d}},{key:"update",value:function(a){this.position=a.position.subXY(window.scrollX,
window.scrollY)}},{key:"cancelGrab",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,u,x,y,D,H,I,N=arguments;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:k=0<N.length&&void 0!==N[0]?N[0]:!0;n=1<N.length?N[1]:void 0;if(this.grabbedMorphs.length){J.next=4;break}return J.abrupt("return");case 4:this.env.eventDispatcher.cancelGrab(this,n),p=[],q=fa(this.grabbedMorphs),J.prev=7,q.s();case 9:if((r=q.n()).done){J.next=20;break}u=r.value;x=this._grabbedMorphProperties.get(u)||
{};y=x.prevOwner;D=x.prevIndex;H=x.prevPosition;I=x.pointerAndShadow;Object.assign(u,I);if(y){J.next=16;break}u.remove();return J.abrupt("continue",18);case 16:y.addMorphAt(u,D),k?p.push(u.animate({position:H})):u.position=H;case 18:J.next=9;break;case 20:J.next=25;break;case 22:J.prev=22,J.t0=J["catch"](7),q.e(J.t0);case 25:return J.prev=25,q.f(),J.finish(25);case 28:return J.abrupt("return",p.length?Promise.all(p):null);case 29:case "end":return J.stop()}},f,this,[[7,22,25,28]])}));return function(){return a.apply(this,
arguments)}}()},{key:"grab",value:function(a){var d=this;if(Ci.obj.isArray(a))return a.forEach(function(f){return d.grab(f)});this.withMetaDo({metaInteraction:!0},function(){d._grabbedMorphProperties.set(a,{prevOwner:a.owner,prevPosition:a.position,prevIndex:a.owner?a.owner.submorphs.indexOf(a):-1,pointerAndShadow:Ci.obj.select(a,["dropShadow","reactsToPointer"])});a.reactsToPointer=!1;a.dropShadow=!0;d.addMorph(a)});Ci.signal(this,"grab",a)}},{key:"dropMorphsOn",value:function(a){var d=this;this.withMetaDo({metaInteraction:!0},
function(){d.grabbedMorphs.forEach(function(f){try{var k=(d._grabbedMorphProperties.get(f)||{}).pointerAndShadow;Object.assign(f,k);Ci.signal(d,"drop",f);f.onBeingDroppedOn(d,a)}catch(n){console.error(n),d.world().showError("Error dropping ".concat(f," onto ").concat(a,":\n").concat(n.stack)),f.owner!==a&&d.world().addMorph(a)}})})}},{key:"findDropTarget",value:function(){var a=this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.globalPosition,f=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:this.grabbedMorphs,k=2<arguments.length?arguments[2]:void 0;d=this.world().morphsContainingPoint(d);return Ci.arr.sortBy(d,function(n){return[n].concat(db(n.ownerChain())).find(function(p){return Ci.Path("owner.isWorld").get(p)&&p.hasFixedPosition})?0:1}).find("function"===typeof k?function(n,p){return!a.isAncestorOf(n)&&n.acceptsDrops&&!f.includes(n)&&f.every(function(q){return q.wantsToBeDroppedOn(n)})&&k(n,p)}:function(n){return!a.isAncestorOf(n)&&n.acceptsDrops&&n.ownerChain().every(function(p){return p.visible})&&
f.every(function(p){return p.wantsToBeDroppedOn(n)})})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Hand"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},fill:{defaultValue:lively.FreezerRuntime?Ci.Color.transparent:Ci.Color.orange},extent:{defaultValue:Ci.pt(1,1)},reactsToPointer:{defaultValue:!1},pointerId:{},isHand:{readOnly:!0,get:function(){return!0}},draggable:{readOnly:!0,get:function(){return!1}},grabbable:{readOnly:!0,get:function(){return!1}},
grabbedMorphs:{readOnly:!0,get:function(){return this.submorphs}},_grabbedMorphProperties:{serialize:!1,initialize:function(){this._grabbedMorphProperties=new WeakMap}}}}}],c,{pathInPackage:function(){return"./world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:12566,end:16838})}(Ci.Morph);Ci.Hand=wy;Ci.Hand=wy;var h7=Object.freeze({__proto__:null,
World:gv,Hand:wy}),Bm=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/position.js");Bm.comparePosition=WP;Bm.lessPosition=Tp;Bm.lessEqPosition=Wu;Bm.eqPosition=Lq;Bm.minPosition=jx;Bm.maxPosition=kx;Bm.comparePosition=WP;Bm.lessPosition=Tp;Bm.lessEqPosition=Wu;Bm.eqPosition=Lq;Bm.minPosition=jx;Bm.maxPosition=kx;var ej=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js");ej.lessPosition=Tp;ej.lessEqPosition=Wu;ej.eqPosition=Lq;ej.minPosition=jx;ej.maxPosition=kx;
var Ft=bd("br",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js"),g=c.hasOwnProperty("Range")&&"function"===typeof c.Range?c.Range:c.Range=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{start:{row:0,column:0},end:{row:0,
column:0}},d=a.start,f=d.row;d=d.column;var k=a.end;a=k.row;k=k.column;if(a<f||a===f&&k<d)d=[f,d,a,k],a=d[0],k=d[1],f=d[2],d=d[3];this.start={row:f,column:d};this.end={row:a,column:k}}},{key:"isRange",get:function(){return!0}},{key:"isEmpty",value:function(){return this.start.row===this.end.row&&this.start.column===this.end.column}},{key:"equals",value:function(a){return a&&a.start&&a.end?ej.eqPosition(this.start,a.start)&&ej.eqPosition(this.end,a.end):!1}},{key:"copy",value:function(){return new ej.Range(this)}},
{key:"toLiteral",value:function(){return{start:this.start,end:this.end}}},{key:"merge",value:function(a){a.isRange||(a=new ej.Range(a));return ej.lessPosition(this.end,a.start)||ej.lessPosition(a.end,this.start)?this:ej.Range.fromPositions(ej.minPosition(this.start,a.start),ej.maxPosition(this.end,a.end))}},{key:"without",value:function(a){a.isRange||(a=new ej.Range(a));var d=ej.Range.compare(this,a);return 0===d?ej.Range.fromPositions(this.start,this.start):5<=Math.abs(d)?this:0>d?ej.Range.fromPositions(this.start,
a.start):ej.Range.fromPositions(a.end,this.end)}},{key:"intersect",value:function(a){a.isRange||(a=new ej.Range(a));var d=ej.Range.compare(this,a),f=0>d?this:a;a=0>d?a:this;switch(Math.abs(d)){case 0:case 1:return new ej.Range(f);case 2:case 3:return new ej.Range(a);case 4:return ej.Range.fromPositions(a.start,f.end);case 5:return ej.Range.at(a.start);case 6:return ej.Range.at(f.end)}}},{key:"subtract",value:function(a){a.isRange||(a=new ej.Range(a));switch(ej.Range.compare(this,a)){case -6:case -5:case 5:case 6:return[new ej.Range(this)];
case -1:case 0:case 2:case 3:return[ej.Range.at(this.start)];case 1:case 4:return[ej.Range.fromPositions(a.end,this.end)];case -4:case -3:return[ej.Range.fromPositions(this.start,a.start)];case -2:return[ej.Range.fromPositions(this.start,a.start),ej.Range.fromPositions(a.end,this.end)]}}},{key:"containsPosition",value:function(a){return ej.lessEqPosition(this.start,a)&&ej.lessEqPosition(a,this.end)}},{key:"toString",value:function(){var a=this.start,d=a.column,f=this.end,k=f.row;f=f.column;return"Range(".concat(a.row,
"/").concat(d," -> ").concat(k,"/").concat(f,")")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Range"}},{key:"sort",value:function(a){return a.sort(ej.Range.compare)}},{key:"compare",value:function(a,d){var f=a.start,k=a.end,n=d.start,p=d.end;return ej.lessPosition(f,n)?ej.lessPosition(k,n)?-6:ej.eqPosition(k,n)?-5:ej.lessPosition(k,p)?-4:ej.eqPosition(k,p)?-3:-2:ej.eqPosition(f,n)?ej.eqPosition(k,p)?0:ej.lessPosition(k,p)?-1:1:-1*ej.Range.compare(d,a)}},{key:"at",value:function(a){return new this({start:a,
end:a})}},{key:"fromPositions",value:function(a,d){return new this({start:a,end:d})}},{key:"create",value:function(a,d,f,k){return new this({start:{row:a,column:d},end:{row:f,column:k}})}},{key:"isValidLiteral",value:function(a){return a?a.isRange?!0:a.start&&a.end&&"number"===typeof a.start.row&&"number"===typeof a.start.column&&"number"===typeof a.end.row&&"number"===typeof a.end.column:!1}}],c,{pathInPackage:function(){return"./text/range.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:107,end:5851})}(void 0));ej.Range=Ft;ej.Range=Ft;var uI=new ej.Range;ej.defaultRange=uI;ej.defaultRange=uI;var $k=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js");$k.lessPosition=Tp;$k.Range=Ft;$k.defaultRange=uI;$k.config=Jm;$k.string=Xj;$k.arr=aj;$k.signal=Ln;var vI=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),
g=c.hasOwnProperty("Selection")&&"function"===typeof c.Selection?c.Selection:c.Selection=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d){this.textMorph=a;this.initialize(d)}},{key:"isSelection",get:function(){return!0}},{key:"initialize",value:function(a){this._goalX=this._goalColumn=void 0;this._isReverse=!1;var d=$k.string.newUUID();
this.startAnchor=this.textMorph.addAnchor("selection-start-"+d);this.endAnchor=this.textMorph.addAnchor("selection-end-"+d);this.range=a;this._cursorVisible=!0;this.cursorBlinkProcess=null}},{key:"uninstall",value:function(){this.cursorBlinkStop();this.textMorph.removeAnchor(this.startAnchor);this.textMorph.removeAnchor(this.endAnchor)}},{key:"compareRangesForMerge",value:function(a,d){var f=a.start,k=f.row;f=f.column;var n=a.end,p=n.row;n=n.column;var q=d.start,r=q.row;q=q.column;var u=d.end,x=u.row;
u=u.column;return k<r||k===r&&f<q?p<r||p===r&&n<q?"separate":p===r&&n===q?r===x&&q===u?"overlapping":"bordering":"overlapping":k===r&&f===q?p===x&&n===u?"equal":"overlapping":this.compareRangesForMerge(d,a)}},{key:"mergeWith",value:function(a){if(!a||!a.isSelection)return!1;var d=this.compareRangesForMerge(this.range,a.range);if("separate"===d||"bordering"===d)return!1;this.range=this.range.merge(a.range);a.isReverse()!=this.isReverse()&&this.reverse();return!0}},{key:"range",get:function(){return this._range||
$k.defaultRange}},{key:"range",set:function(a){if(a){var d=a,f=d.start;d=d.end;if(void 0!==f&&void 0!==d){var k=this.textMorph.document;"number"===typeof f&&(a.start=f=k.indexToPosition(f));"number"===typeof d&&(a.end=d=k.indexToPosition(d));if($k.Range.isValidLiteral(a)){f=k.clipPositionToLines(f);d=k.clipPositionToLines(d);if(this._isReverse=$k.lessPosition(d,f))d=[d,f],f=d[0],d=d[1];a.start=f;a.end=d;a.isRange||(a=new $k.Range(a));a.equals(this._range)||(this._range=a,this._goalColumn=this.textMorph.lineWrapping?
this.textMorph.columnInWrappedLine(this.lead):this.lead.column,this._goalX=this.textMorph.charBoundsFromTextPosition(this.lead).x,this.startAnchor.position=a.start,this.endAnchor.position=a.end,this.textMorph.makeDirty(),$k.signal(this.textMorph,"selectionChange",this))}}}}},{key:"directedRange",get:function(){return{end:this.lead,start:this.anchor}}},{key:"updateFromAnchors",value:function(){this.range={start:this.startAnchor.position,end:this.endAnchor.position}}},{key:"start",get:function(){return this.range.start}},
{key:"start",set:function(a){this.range=$k.Range.fromPositions(a,this.end)}},{key:"end",get:function(){return this.range.end}},{key:"end",set:function(a){this.range=$k.Range.fromPositions(this.start,a)}},{key:"selectionColor",get:function(){return this.textMorph.selectionColor||"#bed8f7"}},{key:"anchor",get:function(){return this.isReverse()?this.range.end:this.range.start}},{key:"anchor",set:function(a){this.range={start:a,end:this.lead}}},{key:"lead",get:function(){return this.isReverse()?this.range.start:
this.range.end}},{key:"lead",set:function(a){this.range={start:this.anchor,end:a}}},{key:"text",get:function(){return this.textMorph.document.textInRange(this.range)}},{key:"text",set:function(a){this.replace(a)}},{key:"replace",value:function(a,d,f,k){var n=this.range,p=this.textMorph,q=this.isReverse();this.range=p.replace(n,a,d,f,k);q&&this.reverse();return this.range}},{key:"selectedRows",get:function(){return{first:this.start.row,last:this.end.row}}},{key:"reverse",value:function(){this._isReverse=
!this.isEmpty()&&!this._isReverse;return this}},{key:"isReverse",value:function(){return this._isReverse&&!this.isEmpty()}},{key:"isEmpty",value:function(){return this.range.isEmpty()}},{key:"collapse",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.start;this.range={start:a,end:a};return this}},{key:"collapseToEnd",value:function(){this.collapse(this.end);return this}},{key:"growLeft",value:function(a){var d=this.textMorph.document,f=d.positionToIndex(this.end);
a=Math.min(f,d.positionToIndex(this.start)-a);f=this.isReverse();this.start=d.indexToPosition(a);this._isReverse=f;return this}},{key:"growRight",value:function(a){var d=this.textMorph.document,f=d.positionToIndex(this.start);a=Math.max(f,d.positionToIndex(this.end)+a);f=this.isReverse();this.end=d.indexToPosition(a);this._isReverse=f;return this}},{key:"selectAll",value:function(){this.range={start:{row:0,column:0},end:this.textMorph.document.endPosition};return this}},{key:"selectLine",value:function(){var a=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.lead.row;this.includingLineEnd=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;this.range={start:{row:a,column:0},end:{row:a,column:this.textMorph.getLine(a).length}};return this}},{key:"gotoLineEnd",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.lead.row;a={row:a,column:this.textMorph.getLine(a).length};this.range={start:a,end:a}}},{key:"selectLeft",value:function(){var a=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:1;this.isEmpty()?(this.growLeft(a),this.reverse()):this.isReverse()?this.growLeft(a):this.growRight(-a);return this}},{key:"selectRight",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.isReverse()?this.growLeft(-a):this.growRight(a);return this}},{key:"selectUp",value:function(){return this.goUp(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,1<arguments.length?arguments[1]:void 0,!0)}},{key:"selectDown",value:function(){return this.selectUp(-(0<
arguments.length&&void 0!==arguments[0]?arguments[0]:1),1<arguments.length?arguments[1]:void 0)}},{key:"goUp",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;if(0===a)return this;var f=this._goalColumn,k=this._goalX;this.lead=this.textMorph.getPositionAboveOrBelow(a,this.lead,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,f,k);d||(this.anchor=this.lead);this._goalColumn=f;this._goalX=k;return this}},
{key:"goDown",value:function(){return this.goUp(-(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1),1<arguments.length?arguments[1]:void 0)}},{key:"goLeft",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.isEmpty()&&this.growLeft(a);this.collapse();return this}},{key:"goRight",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.isEmpty()&&this.growRight(a);this.collapseToEnd();return this}},{key:"cursorVisible",get:function(){return this._cursorVisible&&
this.textMorph.isFocused()&&!this.textMorph.rejectsInput()}},{key:"cursorBlinkStart",value:function(){var a=this;this.cursorBlinkStop();var d=$k.config.text.cursorBlinkPeriod;if(d){var f=this.textMorph,k=f.env.renderer.getNodeForMorph(f);this.cursorBlinkProcess=setInterval(function(){k||(k=f.env.renderer.getNodeForMorph(f));if(k){a._cursorVisible=!a._cursorVisible;var n=k.className.split(" "),p=n.indexOf("hidden-cursor");a._cursorVisible&&-1<p&&(n.splice(p,1),k.className=n.join(" "));a._cursorVisible||
-1!==p||(k.className=[].concat(db(n),["hidden-cursor"]).join(" "))}},1E3*d)}}},{key:"cursorBlinkStop",value:function(){this.cursorBlinkProcess&&clearInterval(this.cursorBlinkProcess);this.cursorBlinkProcess=null;this._cursorVisible=!0;var a=this.textMorph;if(a=a.env.renderer.getNodeForMorph(a)){var d=a.className.split(" "),f=d.indexOf("hidden-cursor");-1<f&&(d.splice(f,1),a.className=d.join(" "))}}},{key:"toString",value:function(){var a=this.anchor,d=a.column,f=this.lead,k=f.row;f=f.column;return"Selection(".concat(a.row,
"/").concat(d," -> ").concat(k,"/").concat(f,")")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Selection"}}],c,{pathInPackage:function(){return"./text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:223,end:9746})}(void 0);$k.Selection=vI;$k.Selection=vI;var wI=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),
g=c.hasOwnProperty("MultiSelection")&&"function"===typeof c.MultiSelection?c.MultiSelection:c.MultiSelection=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"initialize",value:function(a){this._selections=[new $k.Selection(this.textMorph,a)]}},{key:"__deserialize__",value:function(a,d){this._selections=[]}},{key:"selections",get:function(){return this._selections}},{key:"selections",
set:function(a){var d=this._selections?this._selections.filter(function(f){return!a.includes(f)}):[];this._selections=a;d.forEach(function(f){return f.uninstall()})}},{key:"isMultiSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.selections.forEach(function(a){return a.uninstall()})}},{key:"defaultSelection",get:function(){return $k.arr.last(this.selections)}},{key:"removeSelections",value:function(){var a=this.selections.slice(0<arguments.length&&void 0!==arguments[0]?arguments[0]:
1);a.forEach(function(d){return d.uninstall()});this.selections=$k.arr.withoutAll(this.selections,a)}},{key:"disableMultiSelect",value:function(){$k.arr.without(this.selections,this.defaultSelection).forEach(function(a){return a.uninstall()});this.selections=[this.defaultSelection]}},{key:"range",get:function(){return this.defaultSelection.range}},{key:"range",set:function(a){this.disableMultiSelect();this.defaultSelection.range=a}},{key:"updateFromAnchors",value:function(){this.selections.forEach(function(a){return a.updateFromAnchors()})}},
{key:"start",get:function(){return this.defaultSelection.start}},{key:"start",set:function(a){this.defaultSelection.start=a}},{key:"end",get:function(){return this.defaultSelection.end}},{key:"end",set:function(a){this.defaultSelection.end=a}},{key:"anchor",get:function(){return this.defaultSelection.anchor}},{key:"anchor",set:function(a){this.defaultSelection.anchor=a}},{key:"lead",get:function(){return this.defaultSelection.lead}},{key:"lead",set:function(a){this.defaultSelection.lead=a}},{key:"text",
get:function(){return this.selections.map(function(a){return a.text}).join("\n")}},{key:"text",set:function(a){this.selections.forEach(function(d){return d.text=a})}},{key:"selectedRows",get:function(){return this.defaultSelection.selectedRows}},{key:"reverse",value:function(){this.defaultSelection.reverse()}},{key:"isReverse",value:function(){return this.defaultSelection.isReverse()}},{key:"isEmpty",value:function(){return this.defaultSelection.isEmpty()}},{key:"collapse",value:function(a){this.defaultSelection.collapse(a);
return this}},{key:"collapseToEnd",value:function(){this.defaultSelection.collapseToEnd();return this}},{key:"growLeft",value:function(a){this.defaultSelection.growLeft(a);return this}},{key:"growRight",value:function(a){this.defaultSelection.growRight(a);return this}},{key:"selectAll",value:function(){this.disableMultiSelect();this.defaultSelection.selectAll();return this}},{key:"selectLine",value:function(a,d){this.includingLineEnd=d;this.defaultSelection.selectLine(a,d);return this}},{key:"gotoLineEnd",
value:function(a){this.defaultSelection.gotoLineEnd(a)}},{key:"selectLeft",value:function(a){this.defaultSelection.selectLeft(a);return this}},{key:"selectRight",value:function(a){this.defaultSelection.selectRight(a);return this}},{key:"selectUp",value:function(a,d){this.defaultSelection.selectUp(a,d);return this}},{key:"selectDown",value:function(a,d){this.defaultSelection.selectDown(a,d);return this}},{key:"goUp",value:function(a,d){return this.defaultSelection.goUp(a,d)}},{key:"goDown",value:function(a,
d){return this.defaultSelection.goDown(a,d)}},{key:"goLeft",value:function(a){return this.defaultSelection.goLeft(a)}},{key:"goRight",value:function(a){return this.defaultSelection.goRight(a)}},{key:"cursorVisible",get:function(){return this.defaultSelection.cursorVisible}},{key:"style",set:function(a){this.defaultSelection.style=a}},{key:"getTextAttributes",value:function(){return this.defaultSelection.getTextAttributes()}},{key:"toString",value:function(){return"MultiSelection(".concat(this.selections.join(", "),
")")}},{key:"mergeSelections",value:function(){for(var a=this.selections.slice(),d=a.length-1;0<=d;d--)for(var f=a.length-1;0<=f;f--)if(d!==f&&a[f].mergeWith(a[d])){a.splice(d,1);break}this.selections=a}},{key:"ranges",get:function(){return this.selections.map(function(a){return a.range})}},{key:"ranges",set:function(a){for(var d=0;d<a.length;d++){var f=this.selections[d];f?f.range=a[d]:this.addRange(a[d],!1)}this.removeSelections(d);this.mergeSelections()}},{key:"addRange",value:function(a){var d=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;this.selections.push(new $k.Selection(this.textMorph,a));d&&this.mergeSelections();return $k.arr.last(this.selections).range}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MultiSelection"}}],c,{pathInPackage:function(){return"./text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:9754,end:14658})}($k.Selection);$k.MultiSelection=wI;$k.MultiSelection=wI;var Vj=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/attributes.js");Vj.shallowEquals=XP;Vj.concatAttributePair=MF;Vj.joinTextAttributes=NF;Vj.splitTextAndAttributesAt=OF;Vj.splitTextAndAttributesAtColumns=PF;Vj.concatTextAndAttributes=QF;Vj.modifyAttributesInRange=RF;Vj.textAndAttributesWithSubRanges=SF;Vj.textAndAttributesDo=function(b,c){for(var g=0;g<b.length;g+=2)c(b[g],b[g+1])};
Vj.splitTextAndAttributesIntoLines=lx;Vj.eqPosition=Lq;Vj.lessPosition=Tp;Vj.shallowEquals=XP;Vj.concatAttributePair=MF;Vj.joinTextAttributes=NF;Vj.splitTextAndAttributesAt=OF;Vj.splitTextAndAttributesAtColumns=PF;Vj.concatTextAndAttributes=QF;Vj.modifyAttributesInRange=RF;Vj.textAndAttributesWithSubRanges=SF;Vj.splitTextAndAttributesIntoLines=lx;var kg=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js");kg.arr=aj;kg.num=Gm;kg.string=Xj;kg.lessEqPosition=Wu;kg.minPosition=
jx;kg.maxPosition=kx;kg.lessPosition=Tp;kg.eqPosition=Lq;kg.concatTextAndAttributes=QF;kg.splitTextAndAttributesAtColumns=PF;kg.splitTextAndAttributesIntoLines=lx;kg.joinTextAttributes=NF;kg.modifyAttributesInRange=RF;kg.concatAttributePair=MF;kg.splitTextAndAttributesAt=OF;var BB=bd("bX","\ufffd");kg.objectReplacementChar=BB;kg.objectReplacementChar=BB;kg.defaultOptions={maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5};(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),
g=c.hasOwnProperty("TreeNode")&&"function"===typeof c.TreeNode?c.TreeNode:c.TreeNode=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){this.parent=a}},{key:"root",get:function(){return this.parent?this.parent.root:this}},{key:"isRoot",get:function(){return!this.parent}},{key:"withParents",value:function(){for(var a=this,d=
[];a;)d.push(a),a=a.parent;return d}},{key:"traverse",value:function(a){var d=[a.call(null,this)];if(this.isLeaf)return d;for(var f=0;f<this.children.length;f++)d.push.apply(d,db(this.children[f].traverse(a)));return d}},{key:"consistencyCheck",value:function(){var a=[],d=this.isRoot,f=this.isLeaf,k=this.children,n=this.size,p=this.stringSize,q=this.height,r=this.width,u=this.options,x=u.maxLeafSize,y=u.maxNodeSize,D=u.minLeafSize;u=u.minNodeSize;d||0!==n||a.push({error:"size of ".concat(this," expected to be > 0!")});
if(!Array.isArray(k))return a.push({error:"".concat(this,".children is not an array but ").concat(k)}),a;var H=kg.arr.sum(kg.arr.pluck(k,"size"));H!=n&&a.push({error:"Sum of child sizes is not size of ".concat(this,": ").concat(H," != ").concat(n)});n=kg.arr.sum(kg.arr.pluck(k,"stringSize"));n!=p&&a.push({error:"Sum of child stringSize is not stringSIze of ".concat(this,": ").concat(n," != ").concat(p)});p=kg.arr.sum(kg.arr.pluck(k,"height"));Number.parseInt(p)!=Number.parseInt(q)&&a.push({error:"Sum of child Height is not Height of ".concat(this,
": ").concat(p," != ").concat(q)});q=k.length?Math.max.apply(null,kg.arr.pluck(k,"width")):0;(k.find(function(I){return I.isLine&&I.hasEstimatedExtent})?Number.parseInt(q)>Number.parseInt(r):Number.parseInt(q)!=Number.parseInt(r))&&a.push({error:"max width of children of ".concat(this," is not node width: ").concat(q," != ").concat(r)});r=f?x:y;D=f?D:u;!d&&k.length>r&&a.push({error:"children count of ".concat(this," expected to be between ").concat(D," and ").concat(r," but is ").concat(k.length)});
for(d=0;d<k.length;d++)(D=k[d])?(f&&!D.isLine?a.push({error:"child ".concat(d," of leaf ").concat(this," is not a line!")}):!f&&D.isLine&&a.push({error:"child of non-leaf ".concat(this," is a line!")}),this!==D.parent&&a.push({error:"child.parent is ".concat(D.parent," but should be ").concat(this)})):a.push({error:"child ".concat(d," of ").concat(this," is nullish!")});a.push.apply(a,db(k.flatMap(function(I){return I.consistencyCheck()}).filter(Boolean)));return a}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"TreeNode"}}],c,{pathInPackage:function(){return"./text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1395,end:4948})})(void 0);(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),g=c.hasOwnProperty("InnerTreeNode")&&"function"===typeof c.InnerTreeNode?
c.InnerTreeNode:c.InnerTreeNode=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a.parent);this.options=a.options;this.children=a.children;this.size=a.size;this.stringSize=a.stringSize;this.height=a.height;this.width=a.width;
this.isLeaf=!0}},{key:"isNode",get:function(){return!0}},{key:"resize",value:function(a,d,f){this.size+=a;this.height+=d;this.stringSize+=f;for(var k=0,n=0;n<this.children.length;n++){var p=this.children[n].width;p>k&&(k=p)}this.width=k;this.parent&&this.parent.resize(a,d,f)}},{key:"lines",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(this.isLeaf)return a.push.apply(a,db(this.children)),a;for(var d=0;d<this.children.length;d++)this.children[d].lines(a);return a}},
{key:"findRow",value:function(a){if(0>a||a>=this.size)return null;if(this.isLeaf)return this.children[a];for(var d=0;d<this.children.length;d++){var f=this.children[d],k=f.size;if(a<k)return f.findRow(a);a-=k}return null}},{key:"findLineByVerticalOffset",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(0>a||a>this.height)return null;for(var k=0;k<this.children.length;k++){var n=this.children[k],p=n.height;
if(a<=p)return this.isLeaf?{line:n,offset:a,y:d,row:f}:n.findLineByVerticalOffset(a,d,f);a-=p;d+=p;f+=n.size}return null}},{key:"computeVerticalOffsetOf",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(0>a||a>=this.size)return console.warn("strange row in computeVerticalOffsetOf: ".concat(a)),d;if(this.isLeaf){for(var f=0;f<Math.min(a,this.children.length);f++)d+=this.children[f].height;return d}for(f=0;f<this.children.length;f++){var k=this.children[f],n=k.size;
if(a<n)return k.computeVerticalOffsetOf(a,d);a-=n;d+=k.height}return d}},{key:"ensureLine",value:function(a){a||(a="");var d="string"===typeof a;return!d&&a.isLine?(a.parent=this,a):new kg.Line({parent:this,width:d?0:a.width||0,height:d?0:a.height||0,textAndAttributes:d?[a,null]:a.textAndAttributes||[a.text||"",null]})}},{key:"insert",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.size,f=this.children,k=this.options;if(this.isLeaf){var n=[],p=0,q=0;for(k=0;k<a.length;k++){var r=
this.ensureLine(a[k]);n.push(r);p+=r.height;q+=r.stringSize;f.splice(d++,0,r)}this.resize(n.length,p,q);this.balanceAfterGrowth();return n}0===f.length&&f.push(new kg.InnerTreeNode({parent:this,children:[],size:0,stringSize:0,width:0,height:0,options:k}));for(k=0;k<f.length;k++){n=f[k];p=n.size;if(d<=p)return n.insert(a,d);d-=p}d=f[k-1];return d.insert(a,d.size)}},{key:"withParentChainsUpToCommonParentDo",value:function(a,d,f){for(var k=this.withParents(),n,p=0;a;){if(k.includes(a)){n=a;break}d(a,
p++);a=a.parent}d=k.indexOf(n);0>d&&(d=k.length);k=k.slice(0,d);for(d=0;d<k.length;d++)f(k[d],d)}},{key:"findLineWithTextIndex",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(this.isLeaf){for(var f=0;f<this.children.length;f++){var k=this.children[f],n=k.stringSize;if(a<n)return{line:k,column:a,row:d};a-=n;d++}f=kg.arr.last(this.children);return{line:f,row:d-1,column:f.stringSize-1}}for(k=f=0;k<this.children.length;k++){n=this.children[k];var p=n.stringSize;if(a<
f+p)return n.findLineWithTextIndex(a-f,d);d+=n.size;f+=p}return kg.arr.last(this.children).findLineWithTextIndex(a-f)}},{key:"findLeafs",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(a>f+this.size||d<f)return[];if(this.isLeaf){var k=Math.max(0,a-f),n=this.children.length-1;f=Math.min(n,d-f);var p=!1;0===k&&f===n&&(p=!0,f=n);return[{node:this,firstLine:k,lastLine:f,full:p}]}k=[];for(n=0;n<this.children.length;n++)p=this.children[n],k.push.apply(k,db(p.findLeafs(a,
d,f))),f+=p.size;return k}},{key:"removeFromToInRoot",value:function(a,d,f){var k=this;if(!this.isRoot)throw Error("removeFromTo() should be called on the root node");a>d&&(d=[d,a],a=d[0],d=d[1]);var n=this.size,p=this.options;p.maxLeafSize;var q=p.minLeafSize,r=this.findLeafs(a,d),u=r.shift();d=r.pop();p=[];var x=!1,y=!1;if(!(a>=n)){d&&u.node===d.node&&(d=null);u.full?(f&&f.log("Removing complete first line ".concat(u)),r.push(u)):x=u.node.children.length-(u.lastLine-u.firstLine+1)<q;d&&(d.full?
(f&&f.log("Removing complete last line ".concat(d)),r.push(d)):(y=d,y=y.node.children.length-(y.lastLine-y.firstLine+1)<q));if(x||y){var D=(D=u.node.children[0].prevLine())?D.parent:null;var H=(H=kg.arr.last(d?d.node.children:u.node.children).nextLine())?H.parent:null}for(a=0;a<r.length;a++){n=r[a].node;q=n.children.length;for(var I=0,N=0,J=0;J<q;J++){var sa=n.children[J];I+=sa.height;N+=sa.stringSize;sa.parent=null}n.children.length=0;n.resize(-q,-I,-N);if(q=n.parent)n.parent=null,q.children.splice(q.children.indexOf(n),
1),p.includes(q)||p.push(q)}if(!u.full){a=u.lastLine;n=u.firstLine;r=u.node;q=r.children;r.options;a=a-n+1;n=q.splice(n,a);for(N=I=q=0;N<n.length;N++)J=n[N],q+=J.height,I+=J.stringSize,J.parent=null;r.resize(-a,-q,-I)}if(d&&!d.full){a=d;n=a.firstLine;r=a.node;a=a.lastLine-n+1;n=r.children.splice(n,a);for(N=I=q=0;N<n.length;N++)J=n[N],q+=J.height,I+=J.stringSize,J.parent=null;r.resize(-a,-q,-I)}f&&f.dump("".concat(this.print(!1)));x&&u.node.balanceByMergeOrTheft(D,!d||d.full?H:d.node,f);d&&y&&d.node.root===
this&&(y=!0,D=u.full||!u.node.parent?D:u.node,x&&(d.node.root!==this&&(y=!1),D&&D.root!==this&&(D=null),H&&H.root!==this&&(H=null)),y&&d.node.balanceByMergeOrTheft(D,H,f));p.forEach(function(ja){return ja.root===k&&ja.balanceAfterShrink(f)})}}},{key:"balanceByMergeOrTheft",value:function(a,d,f){var k=this,n=this.children,p=this.options,q=this.isLeaf,r=q?p.maxLeafSize:p.maxNodeSize;p=q?p.minLeafSize:p.minNodeSize;n.length<p;q=a&&a.children.length+n.length<=r;r=!q&&d&&d.children.length+n.length<=r;
var u=q?a:r?d:null;if(u){var x,y;f&&f.log("[balanceByMergeOrTheft] merging ".concat(this," ").concat(q?"left":"right"," into ").concat(u));var D=this.size,H=this.width,I=this.height,N=this.stringSize;n.forEach(function(Ua){return Ua.parent=u});q?(x=u.children).push.apply(x,db(n)):(y=u.children).unshift.apply(y,db(n));this.width=n.length=0;this.withParentChainsUpToCommonParentDo(u,function(Ua){H>Ua.width&&(Ua.width=H);Ua.height+=I;Ua.size+=D;Ua.stringSize+=N},function(Ua){if(H===Ua.width)for(var xa=
0;xa<Ua.children.length;xa++){var rc=Ua.children[xa];rc.width>Ua.width&&(Ua.width=rc.width)}Ua.height-=I;Ua.size-=D;Ua.stringSize-=N})}else if(r=a?Math.ceil((a.children.length-p)/2):0,p=d?Math.ceil((d.children.length-p)/2):0,(x=0<r&&r>=p)||!x&&0<p){var J,sa;y=x?a.children.splice(a.children.length-r,r):d.children.splice(0,p);var ja=x?a:d,Ha=x?r:p,Qa=0,ec=0,mc=0,hc=0;f&&f.log("[balanceByMergeOrTheft] ".concat(this," steals from ").concat(x?"left":"right"," node ").concat(ja," ").concat(Ha," nodes"));
for(a=0;a<y.length;a++)Qa+=y[a].height,ec+=y[a].stringSize,mc=Math.max(mc,y[a].width);for(a=0;a<ja.children.length;a++)hc=Math.max(hc,ja.children[a].width);this.withParentChainsUpToCommonParentDo(ja,function(Ua){if(hc<mc&&hc<Ua.width){if(Ua===ja)Ua.width=hc;else{for(var xa=!1,rc=0;rc<Ua.children.length;rc++)if(Ua.children[rc].width>hc){xa=!0;break}xa||(Ua.width=hc)}Ua.width=mc}Ua.height-=Qa;Ua.size-=Ha;Ua.stringSize-=ec},function(Ua){Ua.width<mc&&(Ua.width=mc);Ua.height+=Qa;Ua.size+=Ha;Ua.stringSize+=
ec});y.forEach(function(Ua){return Ua.parent=k});x?(J=this.children).unshift.apply(J,db(y)):(sa=this.children).push.apply(sa,db(y))}J=this.parent;0===n.length&&(this.parent=null,J&&J.children.splice(J.children.indexOf(this),1));J&&J.balanceAfterShrink(f)}},{key:"balanceAfterGrowth",value:function(){var a=this.isLeaf,d=this.size,f=this.stringSize,k=this.parent,n=this.children,p=this.width,q=this.height,r=this.options,u=a?r.maxLeafSize:r.maxNodeSize;if(n.length>u){k||(k=this.parent=new kg.InnerTreeNode({parent:null,
children:[this],size:d,width:p,height:q,stringSize:f,options:r}),k.isLeaf=!1);var x=Math.floor(n.length/2),y=0,D=0,H=d=0,I=f=0,N=p=0;for(q=0;y<x;y++)D+=n[y].size,H=Math.max(H,n[y].width),I+=n[y].height,N+=n[y].stringSize;for(;y<n.length;y++)d+=n[y].size,f=Math.max(f,n[y].width),p+=n[y].height,q+=n[y].stringSize;this.children=n.slice(0,x);this.size=D;this.width=H;this.height=I;this.stringSize=N;y=k.children.indexOf(this);n=n.slice(x);var J=new kg.InnerTreeNode({parent:k,children:n,size:d,height:p,
width:f,stringSize:q,options:r});J.isLeaf=a;n.forEach(function(sa){return sa.parent=J});k.children.splice(y+1,0,J);J.children.length>u&&J.balanceAfterGrowth();this.children.length>u&&this.balanceAfterGrowth();this.parent.balanceAfterGrowth()}}},{key:"balanceAfterShrink",value:function(a){var d=this,f=this.isLeaf,k=this.parent,n=this.children,p=this.options,q=p.maxLeafSize,r=p.maxNodeSize,u=p.minLeafSize,x=p.minNodeSize;p=f?q:r;u=f?u:x;x=!1;for(var y=n.length;y--;)0===n[y].size&&(n.splice(y,1),x=!0,
a&&a.log("[balanceAfterShrink] ".concat(this," removes node ").concat(y," b/c it is empty, remaining children: ").concat(n.length," (min: ").concat(u,", max: ").concat(p,")")));x&&a&&a.dump("".concat(this.root.print(!1)));if(n.length>=u)k&&k.balanceAfterShrink(a);else if(0===n.length)k&&k.balanceAfterShrink(a);else if(f){if(k)if(1===k.children.length){var D;a&&a.log("[balanceAfterShrink] ".concat(this," is the only child - will remove it's parent and take its position"));a&&a.dump("".concat(this.root.print(!1)));
this.parent=null;k.children.length=0;(D=k.children).push.apply(D,db(n));n.forEach(function(H){return H.parent=k});k.isLeaf=!0}else q=(q=n[0].prevLine())&&q.parent,n=kg.arr.last(n).nextLine(),this.balanceByMergeOrTheft(q,n&&n.parent,a);this.parent&&this.parent.balanceAfterShrink(a)}else{f=[];D=u=p=!1;for(x=0;x<n.length;x++){y=n[x];!p&&y.isLeaf&&(p=!0);u||y.isLeaf||(u=!0);if(p&&u){D=!0;break}f.push.apply(f,db(y.children))}!D&&f.length<=(p?q:r)&&(a&&a.log("[balanceAfterShrink] ".concat(this," grandChildren.length is ").concat(f.length,
" and <= max size so it is removing all its children and adopting their children")),n.forEach(function(H){return H.parent=null}),f.forEach(function(H){return H.parent=d}),n.length=0,n.push.apply(n,f),this.isLeaf=p,a&&a.log("[balanceAfterShrink] ".concat(n.join("\n"))),a&&a.dump("".concat(this.root.print(!1))));k&&k.balanceAfterShrink(a)}}},{key:"print",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,f=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:0,k=this.isLeaf,n=this.size,p=this.stringSize,q=this.width,r=this.height,u=this.children;k=(3<arguments.length?arguments[3]:void 0)||(k?"leaf":"node");var x=" ".repeat(f);p="".concat(x).concat(k," (size: ").concat(n," width: ").concat(Math.round(q)," height: ").concat(Math.round(r)," text length: ").concat(p,")");if(u.length){q="";d+=n;for(n=u.length;n--;)r=u[n],d-=r.size,q="\n"+r.print(a,d,f+1)+q;p+=q}return p}},{key:"toString",value:function(){var a=this.isLeaf,
d=this.size,f=this.width,k=this.height,n=this.children;return"node (".concat(a?"leaf, ":"")+"".concat(a&&n.length?"rows: ".concat(n[0].row,"-").concat(kg.arr.last(n).row," "):"")+"size: ".concat(d," ").concat(f,"x").concat(k,")")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InnerTreeNode"}}],c,{pathInPackage:function(){return"./text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4950,end:30225})})(kg.TreeNode);var pV=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),g=c.hasOwnProperty("Line")&&"function"===typeof c.Line?c.Line:c.Line=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,a.parent);this.textAndAttributes=kg.joinTextAttributes(a.textAndAttributes||[]);this._text="";this._textAttributes=null;this.width=a.width;this.height=a.height;this.hasEstimatedExtent=!1;this.modeState=null;this.textAlign="left";this.lineHeight=null;this.marginBottom=this.marginTop=0}},{key:"isLine",get:function(){return!0}},{key:"size",get:function(){return 1}},{key:"stringSize",get:function(){return this.text.length+1}},{key:"text",get:function(){if(this._text)return this._text;
for(var a="",d=this.textAndAttributes,f=0;f<d.length;f+=2)a+="string"===typeof d[f]?d[f]:kg.objectReplacementChar;return this._text=a}},{key:"textAttributes",get:function(){if(this._textAttributes)return this._textAttributes;for(var a=[],d=this.textAndAttributes,f=0;f<d.length;f+=2){var k=d[f+1];k&&!a.includes(k)&&a.push(k)}return this._textAttributes=a}},{key:"row",get:function(){if(!this.parent)return 0;var a=this.withParents();if(1===a.length)return a.children.indexOf(this);for(var d=0,f=a.length-
1;1<=f;f--)for(var k=a[f],n=k.children.indexOf(a[f-1]),p=0;p<n;p++)d+=k.children[p].size;return d}},{key:"nextLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)+1])?a:this.root.findRow(this.row+1):null}},{key:"prevLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)-1])?a:this.root.findRow(this.row-1):null}},{key:"changeExtent",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,k=this.height,
n=this.width,p=this.parent;this.width=a;this.height=d;this.hasEstimatedExtent=f;if(n!==a||k!==d)for(f=d-k;p;){p.height+=f;if(a>=p.width)p.width=a;else if(n===p.width){for(var q=k=0;q<p.children.length;q++){var r=p.children[q].width;r>k&&(k=r)}p.width=k}p=p.parent}return this}},{key:"changeText",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,f=this.parent,k=this.height,n=a.length+1-(this.text.length+1),p=0;this.modeState&&this.modeState._string!==a&&(this.modeState=
null);this.height||this.width?this.hasEstimatedExtent=!0:(this.width=this.height=0,this.hasEstimatedExtent=!1,p=-k);this._text=a;this._textAttributes=null;this.textAndAttributes=d||(d=[a,null]);if(0!==d.length%2)throw Error("textAndAttributes list is strange, expected flat pairs of text/attr");for(k=0;k<d.length;k+=2){d[k];var q=d[k+1];if(q&&Array.isArray(q))throw Error("invalid attr part of text/attr pair, its an array: "+q);}for(;f;){f.stringSize+=n;f.height+=p;for(k=d=0;k<f.children.length;k++)q=
f.children[k].width,q>d&&(d=q);f.width=d;f=f.parent}return this}},{key:"changeTextAndAttributes",value:function(a){a=kg.joinTextAttributes(a);for(var d="",f=0;f<a.length;f+=2)d+="string"===typeof a[f]?a[f]:kg.objectReplacementChar;return this.changeText(d,a)}},{key:"print",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,f=" ".repeat(2<arguments.length&&void 0!==arguments[2]?arguments[2]:0),k=this.width,n=this.height,
p=this.stringSize,q=this.textAndAttributes;d="".concat(f,"line ").concat(d," (size: 1 width: ").concat(Math.round(k)," height: ").concat(Math.round(n)," text length: ").concat(p);q=kg.arr.toTuples(q,2).map(function(r){var u=Wb(r,2);r=u[0];u=u[1];return("string"===typeof r?'"'.concat(r,'"'):String(r))+",".concat(JSON.stringify(u))}).join(",");return d+(a?")":" content: [".concat(q,"])"))}},{key:"toString",value:function(){var a=this.width,d=this.height;return'line ("'.concat(kg.string.truncate(this._text,
30),'", ').concat(a,"x").concat(d,")")}},{key:"consistencyCheck",value:function(){var a=[];if(!this.parent)return a.push("line ".concat(this," has no parent!")),a}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Line"}}],c,{pathInPackage:function(){return"./text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:30234,end:36897})}(kg.TreeNode);kg.Line=pV;kg.Line=pV;kg.documentFuzzier={makeString:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:5,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:50,g=kg.arr.range(65,90).map(function(a){return String.fromCharCode(a)}).join("");g+=g.toLowerCase()+" \n";b=kg.num.random(b,c);return kg.arr.shuffle(Array.from(g.repeat(Math.ceil(b/g.length)))).slice(0,b).join("")},randomDocPosition:function(b){var c=0===b.rowCount?0:kg.num.random(0,
b.rowCount-1);b=kg.num.random(0,b.getLineString(c).length-1);return{row:c,column:b}},insertRandom:function(b,c,g,a){g=[this.makeString(g,a),null];a=this.randomDocPosition(b);c.push(["insertTextAndAttributes",g,a]);b.insertTextAndAttributes(g,a)},deleteRandom:function(b,c,g,a){g={start:this.randomDocPosition(b),end:this.randomDocPosition(b)};c.push(["remove",g]);b.remove(g)},maybe:function(){return.5>Math.random()},replay:function(b,c){var g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,
a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;g&&(b.debug=g,g=b.debugHelper(),g.reset());var d=new kg.Document([""]);c.forEach(function(f,k){var n=lc(f);f=n[0];n=n.slice(1);if(a&&k==c.length-1)debugger;d[f].apply(d,db(n).concat([g]))});b.changeDocument(d)},run:function(){var b=Date.now(),c=0,g=new kg.Document([],{maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5}),a=[];try{for(;1E4>g.stringSize&&1E4>c++;)this.maybe()?this.deleteRandom(g,a):this.insertRandom(g,
a),g.consistencyCheck()}catch(f){var d=f}b=Date.now()-b;return{error:d,doc:g,actions:a,time:b}}};kg.newline="\n";kg.newlineLength=1;var qV=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),g=c.hasOwnProperty("Document")&&"function"===typeof c.Document?c.Document:c.Document=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),
value:function(a,d){this.options=Object.assign({},kg.defaultOptions,{},d);this.lines=a}},{key:"balance",value:function(){this.root.balanceAfterGrowth();this.fixRoot()}},{key:"fixRoot",value:function(){var a=this.root.root;this.root!==a&&(this.root=a)}},{key:"height",get:function(){return this.root.height}},{key:"width",get:function(){return this.root.width}},{key:"rowCount",get:function(){return this.root.size}},{key:"stringSize",get:function(){return 0===this.rowCount?0:this.root.stringSize-1}},
{key:"lineStrings",get:function(){return this.lines.map(function(a){return a.text})}},{key:"lines",get:function(){return this.root.lines()}},{key:"lines",set:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];this.root=new kg.InnerTreeNode({parent:null,children:[],size:0,width:0,height:0,stringSize:0,options:this.options});this.insertLines(a)}},{key:"clipRow",value:function(a){return Math.max(0,Math.min(a,this.rowCount-1))}},{key:"clipPositionToLines",value:function(a){var d=
a.row;a=a.column;var f=this.rowCount;if(0===f)return{row:0,column:0};0>d?d=0:d>=f&&(d=f-1,a=Infinity);0>a?a=0:(f=this.getLineString(d).length,a>f&&(a=f));return{row:d,column:a}}},{key:"findLineByVerticalOffset",value:function(a){return this.root.findLineByVerticalOffset(a)}},{key:"computeVerticalOffsetOf",value:function(a){return this.root.computeVerticalOffsetOf(a)}},{key:"getLine",value:function(a){return this.root.findRow(this.clipRow(a))}},{key:"getLineString",value:function(a){return(a=this.getLine(a))?
a.text:""}},{key:"insertLine",value:function(a){return this.insertLines([a],1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.root.rowCount)[0]}},{key:"removeLine",value:function(a){this.root.removeFromToInRoot(a,a)}},{key:"removeLines",value:function(a,d,f){this.root.removeFromToInRoot(a,d,f)}},{key:"insertLines",value:function(a,d){a=this.root.insert(a,d);this.fixRoot();return a}},{key:"textString",get:function(){var a="",d=this.lines;if(!d.length)return a;for(var f=0;f<d.length-1;f++)a=
a+d[f].text+kg.newline;return a+=d[f].text}},{key:"textString",set:function(a){this.lines=a.split(kg.newline)}},{key:"endPosition",get:function(){var a=this.rowCount;if(0===a)return{row:0,column:0};--a;var d=this.getLine(a);return{row:a,column:d.stringSize-1}}},{key:"textAndAttributes",get:function(){var a=this.lines;if(!a.length)return[];for(var d=kg.newline,f=a.length-1,k=a[0].textAndAttributes.slice(),n=1;n<=f;n++){var p=a[n],q=k.pop()||null,r=k.pop()||"";p=p.textAndAttributes;k.push.apply(k,db(kg.concatAttributePair(r,
q,p[0]||"",p[1]||null,d)));for(q=2;q<p.length;q+=2)k.push(p[q],p[q+1])}return k}},{key:"textAndAttributes",set:function(a){this.lines=kg.splitTextAndAttributesIntoLines(a,kg.newline).map(function(d){return new kg.Line({parent:null,width:0,height:0,textAndAttributes:d})})}},{key:"getTextAndAttributesOfLine",value:function(a){return this.getLine(a).textAndAttributes}},{key:"setTextAndAttributesOfLine",value:function(a,d){this.getLine(a).changeTextAndAttributes(d);return d}},{key:"mixinTextAttribute",
value:function(a,d){kg.modifyAttributesInRange(this,d,function(f,k){f._textAttributes=null;return Object.assign({},k,a)})}},{key:"setTextAttribute",value:function(a,d){kg.modifyAttributesInRange(this,d,function(f,k){f._textAttributes=null;return a})}},{key:"mixoutTextAttribute",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{start:{row:0,column:0},end:this.endPosition};if(a){var f=Object.keys(a);kg.modifyAttributesInRange(this,d,function(k,n){if(!n)return n;k._textAttributes=
null;k=0;var p={},q;for(q in n)f.includes(q)||(p[q]=n[q],k++);return 0===k?null:p})}}},{key:"setTextAttributesWithSortedRanges",value:function(a){function d(y,D,H){var I=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,N=0,J=D.length;if(0>=H.length-I)return{attributes:[D,null],index:I};for(var sa=[];I<H.length&&!(N>=J);I+=2){var ja=H[I],Ha=ja.start;ja=ja.end;var Qa=H[I+1];if(ja.row<y)N=0;else{Ha.row===y&&N<Ha.column&&(sa.push(D.slice(N,Ha.column),null),N=Ha.column);if(ja.row>y){sa.push(Qa.embeddedMorph||
D.slice(N,J),Qa);N=J;break}N<ja.column&&sa.push(Qa.embeddedMorph||D.slice(N,ja.column),Qa);N=ja.column}}N<J&&sa.push(D.slice(N,J),null);return{attributes:sa,index:I}}if(!(2>a.length)){var f=a[0].start,k=a.slice(-2)[0].end,n=this.getLine(f.row);if(f.row===k.row){if(!(f.column>=k.column)){var p=d(f.row,n.text,a,0).attributes;a=kg.splitTextAndAttributesAtColumns(n.textAndAttributes,[f.column,k.column]);var q=Wb(a,3);a=q[0];q[1];q=q[2];k=kg.splitTextAndAttributesAtColumns(p,[f.column,k.column]);k=Wb(k,
3);k[0];f=k[1];k[2];n.changeTextAndAttributes([].concat(db(a),db(f),db(q)))}}else{q=f.row;var r=f.column;f=d(q,n.text,a,0);var u=f.attributes;f=f.index;p=kg.splitTextAndAttributesAt(n.textAndAttributes,r);var x=Wb(p,2);p=x[0];x[1];r=kg.splitTextAndAttributesAt(u,r);r=Wb(r,2);r[0];r=r[1];for(n.changeTextAndAttributes([].concat(db(p),db(r)));n=n.nextLine();){q++;if(q===k.row)break;f=d(q,n.text,a,f);p=f.attributes;f=f.index;n.changeTextAndAttributes(p)}n&&(k=k.column,a=d(q,n.text,a,f).attributes,q=kg.splitTextAndAttributesAt(n.textAndAttributes,
k),q=Wb(q,2),q[0],q=q[1],k=kg.splitTextAndAttributesAt(a,k),k=Wb(k,1)[0],n.changeTextAndAttributes([].concat(db(k),db(q))))}}}},{key:"resetTextAttributes",value:function(){this.lines.forEach(function(a){return a.changeText(a.text)})}},{key:"textAttributeAt",value:function(a){var d=a.row;a=a.column;a=Math.max(0,a);var f=this.getLine(d);if(!f)return null;d=0;f=f.textAndAttributes;for(var k=0;k<f.length;k+=2){var n=f[k],p=f[k+1];d+="string"===typeof n?n.length:1;if(a<d)return p}return f[f.length-1]}},
{key:"textAndAttributesInRange",value:function(a){var d=a.start,f=a.end;if(kg.eqPosition(d,f))return["",null];kg.lessPosition(f,d)&&(a=[f,d],d=a[0],f=a[1]);d=kg.maxPosition(d,{column:0,row:0});f=kg.minPosition(f,this.endPosition);var k=this.getLine(d.row),n=k;if(f.row===d.row)return a=d.column,f=f.column,a===f&&f++,a=kg.splitTextAndAttributesAtColumns(n.textAndAttributes,[a,f]),a=Wb(a,2),a[0],a[1];a=[k];for(var p=0;p<f.row-d.row;p++)a.push(k=k.nextLine());k=a[a.length-1];d=kg.splitTextAndAttributesAt(n.textAndAttributes,
d.column);d=Wb(d,2);d[0];d=d[1];f=kg.splitTextAndAttributesAt(k.textAndAttributes,f.column);f=Wb(f,1)[0];0===d.length&&(d=["",null]);if(1===a.length)return kg.concatTextAndAttributes(d,f,!0);for(n=1;n<a.length-1;n++)"string"===typeof d[d.length-2]&&(d[d.length-2]+=kg.newline),kg.concatTextAndAttributes(d,a[n].textAndAttributes,!0);"string"===typeof d[d.length-2]&&(d[d.length-2]+=kg.newline);kg.concatTextAndAttributes(d,f,!0);return kg.joinTextAttributes(d,"")}},{key:"textInRange",value:function(a){var d=
a.start,f=a.end;d=this.clipPositionToLines(d);f=this.clipPositionToLines(f);kg.lessPosition(f,d)&&(a=[f,d],d=a[0],f=a[1]);a=d;d=a.row;a=a.column;var k=f;f=k.row;k=k.column;if(d===f)return a===k?"":this.getLineString(d).slice(a,k);var n=this.getLine(d);for(a=n.text.slice(a);(n=n.nextLine())&&++d<f;)a+=kg.newline+n.text;return a+kg.newline+this.getLineString(f).slice(0,k)}},{key:"setTextInRange",value:function(a,d){this.remove(d);return this.insertText(a,d.start,!1)}},{key:"indexToPosition",value:function(a){0>
a&&(a=0);a=this.root.findLineWithTextIndex(a,0);return{row:a.row,column:a.column}}},{key:"positionToIndex",value:function(a){var d=a.column,f=this.getLine(a.row);d=Math.max(0,Math.min(d,f.stringSize-1));for(a=f.parent;a;){f=a.children.indexOf(f);f=a.children.slice(0,f);for(var k=0;k<f.length;k++)d+=f[k].stringSize;f=a;a=a.parent}return d}},{key:"insertTextAndAttributes",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;if(!a||!a.length||2===a.length&&!a[0])return{start:d,
end:d};f&&!f.debugDocumentUpdate&&(f=!1);f&&!f.log&&(f=console);var k=d.row,n=d.column;0>k&&(k=0);0>n&&(n=0);var p=this.getLine(k),q=kg.splitTextAndAttributesIntoLines(a,kg.newline);f&&(f.log||(f={log:console.log.bind(console),dump:console.log.bind(console)}));if(!p)return k=this.insertLines(q.map(function(J){return new kg.Line({parent:null,width:0,height:0,textAndAttributes:J})})),f&&f.log("insert ".concat(k.length," lines into empty text")),{start:{row:0,column:0},end:{row:k.length,column:kg.arr.last(k).text.length}};
if(k>=this.rowCount){var r=this.endPosition;f&&f.log("insertion after doc end, ".concat(k,"/").concat(n,", inserting ").concat(k-r.row," rows"));for(n=0;n<k-r.row;n++)q.unshift(["",null]);kg.__inter0__=r;k=kg.__inter0__.row;n=kg.__inter0__.column}if(1===q.length&&""===q[0][0])return f&&f.log("insert just newline at ".concat(k,"/").concat(n)),k=this.splitLineAt({row:k,column:n}),f&&f.dump("".concat(this.root.print(!1))),k;var u=q.shift(),x=q.length;r={row:k,column:n};var y=p.stringSize-1;n>y&&(f&&
f.log("filling up insertion column at ".concat(k,"/").concat(n,": ").concat(n-y)),y=" ".repeat(n-y),u.length?"string"===typeof u[0]?u[0]=y+u[0]:u.unshift(y,null):u.push(y,null));y=kg.splitTextAndAttributesAt(p.textAndAttributes,n);y=Wb(y,2);var D=y[0];y=y[1];""===D[0]&&(D=[]);D=kg.concatTextAndAttributes(D,u,!0);if(0===x){for(var H=0,I=0;I<u.length;I+=2){var N=u[I];H+="string"===typeof N?N.length:1}r.column=n+H;kg.concatTextAndAttributes(D,y,!0)}p.changeTextAndAttributes(D);if(0===x)return f&&(f.log("single line inserted at ".concat(k,
"/").concat(n)),f&&f.dump("".concat(this.root.print(!1)))),{start:{row:k,column:n},end:r};p=q[x-1];for(D=u=0;D<p.length;D+=2)H=p[D],u+="string"===typeof H?H.length:1;r.row+=x;r.column=u;q=this.insertLines(q.map(function(J){return new kg.Line({parent:null,width:0,height:0,textAndAttributes:J})}),k+1);x=kg.arr.last(q);x.changeTextAndAttributes(kg.concatTextAndAttributes(x.textAndAttributes,y,!0));f&&(f.log("".concat(q.length," inserted at ").concat(k,"/").concat(n)),f&&f.dump("".concat(this.root.print(!1))));
return{start:{row:k,column:n},end:r}}},{key:"insertText",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;if(!a)return{start:d,end:d};var k=d.row,n=d.column;0>k&&(k=0);0>n&&(n=0);var p=this.getLine(k);if(!p)return k=this.insertLines(a.split(kg.newline)),{start:{row:0,column:0},end:{row:k.length,column:kg.arr.last(k).text.length}};k>=this.rowCount&&(n=this.endPosition,a="\n".repeat(k-n.row)+a,kg.__inter1__=n,k=kg.__inter1__.row,n=kg.__inter1__.column);var q=a.split(kg.newline),
r=q.shift(),u=q.length,x={row:k,column:n},y=p.stringSize-1;n>y&&(r=" ".repeat(n-y)+r);y=kg.splitTextAndAttributesAt(p.textAndAttributes,n);y=Wb(y,2);var D=y[0];y=y[1];""===D[0]&&(D=[]);f=kg.concatTextAndAttributes(D,[r,f&&D.length?D[D.length-1]:null],!0);0===u&&(x.column=n+r.length,kg.concatTextAndAttributes(f,y,!0));p.changeTextAndAttributes(f);if(0===u)return{start:{row:k,column:n},end:x};x.row+=u;x.column=q[u-1].length;p=this.insertLines(q,k+1);p=kg.arr.last(p);p.changeTextAndAttributes(kg.concatTextAndAttributes(p.textAndAttributes,
y,!0));return{start:{row:k,column:n},end:x}}},{key:"remove",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(0!==this.rowCount){var f=a.start,k=a.end;if(f.row!==k.row||f.column!==k.column){kg.lessPosition(k,f)&&(k=[k,f],f=k[0],k=k[1]);var n=this.endPosition;if(!kg.lessEqPosition(n,f)){var p=kg.maxPosition(f,{column:0,row:0});f=p.row;var q=p.column;n=kg.minPosition(k,n);k=n.row;var r=n.column;0>q&&(q=0);0>r&&(r=0);d&&!d.debugDocumentUpdate&&(d=!1);d&&(d.log||(d=
{log:console.log.bind(console),dump:console.log.bind(console),group:console.group.bind(console),groupEnd:console.groupEnd.bind(console)}),d.group("document.remove "+JSON.stringify(a)),d.log("[text doc] removing ".concat(f,"/").concat(q," => ").concat(k,"/").concat(r)));var u=this.getLine(f);n=u;p=[u];for(var x=0;x<k-f;x++)p.push(u=u.nextLine());u=p[p.length-1];q=kg.splitTextAndAttributesAt(n.textAndAttributes,q);q=Wb(q,1)[0];r=kg.splitTextAndAttributesAt(u.textAndAttributes,r);r=Wb(r,2);r[0];n.changeTextAndAttributes(kg.concatTextAndAttributes(q,
r[1],!0));d&&d.log('[text doc removal] what remains of start/end line: "'.concat(n.textAndAttributes,'"'));1<p.length&&this.removeLines(f+1,k,d);d&&d.groupEnd("[text doc removal]")}}}}},{key:"splitLineAt",value:function(a){var d=a.row;a=a.column;var f=this.getLine(d),k=kg.splitTextAndAttributesAt(f.textAndAttributes,a);k=Wb(k,2);var n=k[1];f.changeTextAndAttributes(k[0]);f=new kg.Line({parent:null,width:0,height:0,textAndAttributes:n});this.insertLines([f],d+1);return{start:{row:d,column:a},end:{row:d+
1,column:0}}}},{key:"replace",value:function(a,d,f){var k=a.start;a=a.end;if(!d.length)return this.remove({start:k,end:a},f),{removed:{start:k,end:a},inserted:{start:k,end:k}};var n=this.clipPositionToLines(k),p=this.clipPositionToLines(a);n.row===p.row&&this.remove({start:n,end:p},f);if(n.row===p.row||kg.lessEqPosition(this.endPosition,k)){var q;"string"===typeof d?d.length&&(q=d.length&&this.insertText(d,k)):d.length&&(2!==d.length||d[0])&&(q=this.insertTextAndAttributes(d,k,f));q||(q={start:n,
end:n});return{removed:{start:k,end:a},inserted:q}}k=n;a=p;f=k;q=f.row;p=f.column;f=a;n=f.row;f.column;if("string"===typeof d){f=[];d=d.split(kg.newline);for(var r=0;r<d.length;r++)f.push([d[r],null])}else f=kg.splitTextAndAttributesIntoLines(d,kg.newline);var u=!f.length||1===f.length&&(!f[0].length||!f[0][0].length);u&&(f=[]);var x=d=this.getLine(q);r=this.getLine(n);p=kg.splitTextAndAttributesAt(x.textAndAttributes,p);p=Wb(p,2);var y=p[0];p[1];for(x.changeTextAndAttributes(u?y:kg.concatTextAndAttributes(y,
f.shift(),!0));f.length;){d=d.nextLine();q++;if(d===r)break;d.changeTextAndAttributes(f.shift())}if(!f.length)return f=d.stringSize-1,this.remove({start:{row:q,column:d.stringSize},end:a}),{removed:{start:k,end:a},inserted:{start:k,end:{row:q,column:f}}};console.assert(q==n,"not end row");console.assert(d.row==q,"row != last line.row");this.remove({start:{row:q,column:0},end:a});n=[];d=f.length;for(p=0;p<d-1;p++)r=f[p],r.length||(r=["",null]),"string"===typeof r[r.length-2]?r[r.length-2]+=kg.newline:
r.push(kg.newline,null),n.push.apply(n,db(r));n.push.apply(n,db(f[d-1]));f=this.insertTextAndAttributes(n,{row:q,column:0}).end;return{removed:{start:k,end:a},inserted:{start:k,end:f}}}},{key:"wordsOfLine",value:function(a){for(var d=this.getLineString(a),f=[],k,n=0;n<d.length;n++)/[^a-z0-9_]/i.test(d[n])?k&&(k.range.end.column=n,f.push(k),k=null):(k=k||{index:f.length,string:"",range:{start:{row:a,column:n},end:{row:a,column:n}}},k.string+=d[n]);k&&(k.range.end.column=n,f.push(k));return f}},{key:"wordAt",
value:function(a){var d=a.row,f=a.column;return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.wordsOfLine(d)).find(function(k){k=k.range;var n=k.end.column;return k.start.column<=f&&f<=n})||{range:{start:{column:f,row:d},end:{column:f,row:d}},string:""}}},{key:"wordLeft",value:function(a){var d=a.row,f=a.column,k=this.wordsOfLine(d);if(!k.length||kg.lessEqPosition(a,k[0].range.start)){for(;0<=--d;)if(k=this.wordsOfLine(d),k.length)return kg.arr.last(k);return{range:{start:a,end:a},string:""}}d=
this.wordAt(a);return d.string?kg.eqPosition(d.range.start,a)?k[d.index-1]:d:k.slice().reverse().find(function(n){return n.range.end.column<=f})||{range:{start:a,end:a},string:""}}},{key:"wordRight",value:function(a){var d=a.column,f=a.row,k=this.wordsOfLine(a.row);if(!k.length||kg.lessEqPosition(kg.arr.last(k).range.end,a)){for(;++f<this.lines.length;)if(k=this.wordsOfLine(f),k.length)return k[0];return{range:{start:a,end:a},string:""}}f=this.wordAt(a);return f.string?kg.eqPosition(f.range.end,a)?
k[f.index+1]:f:k.find(function(n){return n.range.start.column>=d})||{range:{start:a,end:a},string:""}}},{key:"scanForward",value:function(a,d){var f=a.row,k=a.column;a=this.getLine(f);for(var n=a.text;k<a.stringSize-1;k++){var p=d(n[k],{row:f,column:k});if(p)return p}for(;a=a.nextLine();)for(f++,n=a.text,k=0;k<a.stringSize-1;k++)if(p=d(n[k],{row:f,column:k}))return p;return null}},{key:"scanBackward",value:function(a,d){var f=a.row,k=a.column;a=this.getLine(f);var n=a.text;for(--k;0<=k;k--){var p=
d(n[k],{row:f,column:k});if(p)return p}for(;a=a.prevLine();)for(f--,n=a.text,k=a.stringSize-2;0<=k;k--)if(p=d(n[k],{row:f,column:k}))return p;return null}},{key:"copy",value:function(){return new this.constructor(this.lines.slice(),this.options)}},{key:"toString",value:function(){return"Document(".concat(this.rowCount," lines)")}},{key:"consistencyCheck",value:function(){var a=[],d=this.rowCount,f=this.stringSize,k=this.lines,n=this.textString,p=this.root;d!==k.length&&a.push({error:"document ".concat(this,
" row count: ").concat(d," !== ").concat(k.length)});n.length!==f&&a.push({error:"document ".concat(this," textString.length vs stringSize: ").concat(n.length," !== ").concat(f)});a.push.apply(a,db(p.consistencyCheck()));d=0;for(f=k[0];f;)f!=k[d]&&a.push({error:"line iteration at ".concat(d," is broken: nextLine() of ").concat(k[d-1]," is not ").concat(k[d],"!")}),d++,f=f.nextLine();k[d]&&a.push({error:"nextLine() of\n  ".concat(k[d-1],"\nis nullish but \n  ").concat(k[d],"\nexists in tree!")});if(a.length)throw Error("Consistency check of document revealed ".concat(a.length,
" error").concat(1<a.length?"s":"",":\n")+"".concat(a.map(function(q){return q.error}).filter(Boolean).join("\n")));}},{key:"print",value:function(){return this.root.print(!1,0,0,"root")}},{key:"print2",value:function(){var a=System.decanonicalize("lively.lang/text-graphics.js"),d=(System.get(a)||{}).printTree;return d?d(this.root,function(f){return f.toString()},function(f){return f.children},{padding:[2,1,2,1]}):(lively.module.module(a).load().then(function(){return console.log("lively.lang/text-graphics.js loaded")})["catch"](function(f){return console.error(f)}),
"Loading lively.lang/text-graphics.js lib, please try again later :P")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Document"}},{key:"fuzzyTest",value:function(){return kg.documentFuzzier.run()}},{key:"newline",get:function(){return kg.newline}},{key:"fromString",value:function(a,d){return new this(a.split(kg.newline),d)}}],c,{pathInPackage:function(){return"./text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:39223,end:75592})}(void 0);kg["default"]=qV;var wo=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js");wo.lessPosition=Tp;wo.lessEqPosition=Wu;wo.eqPosition=Lq;var xy=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js"),g=c.hasOwnProperty("Anchor")&&"function"===typeof c.Anchor?c.Anchor:c.Anchor=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{column:0,row:0},f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"move";this.id=a||""+(this.constructor._id=(this.constructor._id||0)+1);this.position=d;this.insertBehavior=f}},{key:"isAnchor",get:function(){return!0}},{key:"embeddedMorph",set:function(a){this._embeddedMorph=a;this.updateEmbeddedMorph()}},{key:"embeddedMorph",get:function(){return this._embeddedMorph}},
{key:"position",set:function(a){this._position=a;this.updateEmbeddedMorph()}},{key:"position",get:function(){return this._position}},{key:"updateEmbeddedMorph",value:function(){if(this.embeddedMorph){var a=this.embeddedMorph.owner;if(!a||a.isLineVisible(this.position.row)){var d=a&&a.isText?a.charBoundsFromTextPosition(this.position).topLeft().subPt(a.origin):this.embeddedMorph.position;a&&(a._positioningSubmorph=this.embeddedMorph);this.embeddedMorph.position=d;a&&(a._positioningSubmorph=!1)}}}},
{key:"onDelete",value:function(a){if(wo.lessEqPosition(this.position,a.start))return!1;if(wo.lessEqPosition(a.start,this.position)&&wo.lessEqPosition(this.position,a.end))return this.position=a.start,!0;var d=this.position,f=d.column,k=a.start,n=k.column,p=a.end;a=p.row;p=p.column;this.position={column:a!==this.position.row?f:n===p?f-(p-n):n+(f-p),row:d.row-(a-k.row)};return!0}},{key:"onInsert",value:function(a){if(wo.lessPosition(this.position,a.start)||wo.eqPosition(this.position,a.start)&&"stay"===
this.insertBehavior)return!1;var d=this.position,f=a.start,k=f.row;f=f.column;a=a.end;var n=a.column;this.position={column:d.column+(k!==this.position.row?0:n-f),row:d.row+(a.row-k)};return!0}},{key:"equalsPosition",value:function(a){return a?a.isAnchor?wo.eqPosition(this.position,a.position):wo.eqPosition(this.position,a):!1}},{key:"toString",value:function(){var a=this.position,d=a.row;a=a.column;return"Anchor(".concat(this.id," ").concat(d,"/").concat(a,")")}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"Anchor"}}],c,{pathInPackage:function(){return"./text/anchors.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:81,end:3951})}(void 0);wo.Anchor=xy;wo.Anchor=xy;var i7=Object.freeze({__proto__:null,Anchor:xy}),Bk=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js");Bk.pt=wl;Bk.once=iu;
Bk.Path=qj;Bk.morph=Sm;Bk.config=Jm;Bk.lessPosition=Tp;Bk.minPosition=jx;Bk.maxPosition=kx;Bk.ViewModel=sy;Bk.part=Us;var xI=bd("bA",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),g=c.hasOwnProperty("TextSearcher")&&"function"===typeof c.TextSearcher?c.TextSearcher:c.TextSearcher=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),
value:function(a){this.morph=a;this.STOP={}}},{key:"doc",get:function(){return this.morph.document}},{key:"processFind",value:function(a,d){var f=this.doc.positionToIndex(a);f=this.doc.indexToPosition(f+d.length);return{range:{start:a,end:f},match:d}}},{key:"stringSearch",value:function(a,d,f,k,n,p,q){if(n&&(Bk.lessPosition(q,n.start)||Bk.lessPosition(n.end,q)))return this.STOP;f||(p=p.toLowerCase());if(p!==d[0])return null;n=q.row;q=q.column;p=a[n];a=1>=k?"":"\n"+a.slice(n+1,n+1+(k-1)).join("\n");
a=p.slice(q)+a;return 0!==(f?a:a.toLowerCase()).indexOf(d)?null:this.processFind({row:n,column:q},a.slice(0,d.length))}},{key:"reSearch",value:function(a,d,f,k,n,p){if(k&&(Bk.lessPosition(p,k.start)||Bk.lessPosition(k.end,p)))return this.STOP;k=p.row;p=p.column;return(a=(a[k].slice(p)+(f?"\n"+a.slice(k+1).join("\n"):"")).match(d))?this.processFind({row:k,column:p},a[0]):null}},{key:"search",value:function(a){var d=Object.assign({start:this.morph.cursorPosition,needle:"",backwards:!1,caseSensitive:!1,
inRange:null},a);a=d.start;var f=d.needle,k=d.backwards,n=d.caseSensitive;d=d.inRange;if(!f)return null;d&&(a=k?Bk.minPosition(d.end,a):Bk.maxPosition(d.start,a));if(f instanceof RegExp){var p=(f.flags||"").split(""),q=!!f.multiline;p.splice(p.indexOf("m"),1);n||p.includes("i")||p.push("i");f=new RegExp("^"+f.source.replace(/^\^+/,""),p.join(""));f=this.reSearch.bind(this,this.doc.lineStrings,f,q,d)}else f=String(f),n||(f=f.toLowerCase()),p=f.split(this.doc.constructor.newline).length,f=this.stringSearch.bind(this,
this.doc.lineStrings,f,n,p,d);a=this.doc[k?"scanBackward":"scanForward"](a,f);return a===this.STOP?null:a}},{key:"searchForAll",value:function(a){for(var d=[],f=0;;){if(1E4<f++)throw Error("endless loop");var k=this.search(a);if(!k)return d;d.push(k);a=Object.assign({},a,{start:a.backwards?k.range.start:k.range.end})}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TextSearcher"}}],c,{pathInPackage:function(){return"./text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:452,end:3799})}(void 0));Bk.TextSearcher=xI;Bk.TextSearcher=xI;var rV=bd("bB",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),g=c.hasOwnProperty("SearchWidgetModel")&&"function"===typeof c.SearchWidgetModel?c.SearchWidgetModel:c.SearchWidgetModel=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:"viewDidLoad",value:function(){var a=this;this.targetText&&(this.target=this.targetText);if(!this.target)throw Error("SearchWidget needs a target text morph!");this.ui.searchInput.addCommands([{name:"realign top-bottom-center",exec:function(){var d=Cb(regeneratorRuntime.mark(function k(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.target.execCommand("realign top-bottom-center"),a.addSearchMarkersForPreview(a.state.inProgress&&
a.state.inProgress.found,!1,a.state.caseMode),n.abrupt("return",!0);case 3:case "end":return n.stop()}},k)}));return function(){return d.apply(this,arguments)}}()}])}},{key:"toggleRegexMode",value:function(){this.state.regexMode=!this.state.regexMode;this.ui.regexModeButton.opacity=this.state.regexMode?1:.5;this.cleanup();this.search()}},{key:"toggleCaseMode",value:function(){this.state.caseMode=!this.state.caseMode;this.ui.caseModeButton.opacity=this.state.caseMode?1:.5;this.cleanup();this.search()}},
{key:"focus",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return k=this.ui.searchInput,k.focus(),n.next=4,k.whenRendered();case 4:k.invalidateTextLayout(!0,!0);case 5:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"onBlur",value:function($super,d){var f=this,k=this.world(),n=this.view;d=this.ui;var p=d.searchInput,q=d.replaceInput;k&&setTimeout(function(){var r=
k.focusedMorph;n.withAllSubmorphsDetect(function(u){return u.isFocused()})?p!==r&&q!==r&&p.focus():f.cancelSearch(!1)})}},{key:"cleanup",value:function(){this.removeSearchMarkers();this.state.inProgress=null;this.textMap&&this.textMap.update()}},{key:"cancelSearch",value:function(a){this.state.inProgress&&(this.state.last=this.state.inProgress);this.cleanup();this.removeTextMap();if(this.state.before&&a){a=this.state.before;var d=a.scroll;this.target.selection=a.selectionRange;this.target.scroll=
d;this.state.before=null}this.view.remove();this.target.focus()}},{key:"acceptSearch",value:function(){this.state.inProgress&&(this.state.last=this.state.inProgress);this.applySearchResult(this.state.inProgress)&&this.state.before&&this.target.saveMark(this.state.before.position);this.ui.searchInput.acceptInput();this.cleanup();this.removeTextMap();this.state.before=null;this.view.remove();this.target.focus()}},{key:"applySearchResult",value:function(a){if(!a||!a.found)return null;var d=this.target,
f=d.selection,k=!!d.activeMark||!f.isEmpty(),n=a.found.range,p=n.start;n=n.end;p=a.backwards?p:n;k?f.lead=p:d.cursorPosition=p;d.isLineFullyVisible(p.row)||d.centerRow();return a}},{key:"removeSearchMarkers",value:function(){var a=this;(this.target.markers||[]).forEach(function(d){d=d.id;return d.startsWith("search-highlight")&&a.target.removeMarker(d)})}},{key:"addSearchMarkers",value:function(a){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;this.removeSearchMarkers();var f=this.target,
k=this.textMap,n=f.whatsVisible,p=n.startRow;n=n.endRow;var q=f.document.lineStrings,r=0,u=Bk.config.codeEditor.search,x=u.maxCharsPerLine;u=u.fastHighlightLineCount;k&&3<=a.match.length&&q.length<u&&(p=0,n=q.length-1);u=!1;for(var y=window.performance.now();p<=n&&!u;p++)for(var D=q[p]||"",H=0;H<Math.min(D.length,x);H++){if(300<window.performance.now()-y){u=!0;break}if(d?0===D.slice(H).indexOf(a.match):0===D.slice(H).toLowerCase().indexOf(a.match.toLowerCase()))f.addMarker({id:"search-highlight-"+
r++,range:{start:{row:p,column:H},end:{row:p,column:H+a.match.length}},style:{"border-radius":"4px","background-color":"rgba(255, 200, 0, 0.3)","box-shadow":"0 0 4px rgba(255, 200, 0, 0.3)","pointer-events":"none"}}),H+=a.match.length}this.state.backwards?(n=a.range.start,d=n.row,n=n.column,d={start:{row:d,column:n},end:{row:d,column:n+1}}):(n=a.range.end,d=n.row,n=n.column,d={start:{row:d,column:n-1},end:{row:d,column:n}});f.addMarker({id:"search-highlight-cursor",range:d,style:dd({"pointer-events":"none",
"box-sizing":"border-box"},this.state.backwards?"border-left":"border-right","3px red solid")});k&&k.update()}},{key:"addSearchMarkersForPreview",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;a&&(this.addSearchMarkers(a,!1,this.state.caseMode),d&&this.target.removeMarker("search-highlight-cursor"))}},{key:"prepareForNewSearch",value:function(){var a=this,d=this.target,f=this.state,k=this.view,n=this.ui.searchInput,p=d.world();if(p){k.openInWorld(p.visibleBounds().center(),
p);k.topRight=d.globalBounds().insetBy(5).topRight().addXY(0,d.padding.top());d.verticalScrollbarVisible&&(k.topRight=k.topRight.subXY(d.scrollbarOffset.x,0));if(d.getWindow())Bk.once(d.getWindow(),"remove",k,"remove");k=d.scroll;p=d.selection;f.position=p.lead;f.before={scroll:k,position:p.lead,selectionRange:p.range,selectionReverse:p.isReverse()};f.last&&f.last.found&&(this.withoutBindingsDo(function(){return a.input=f.last.needle}),this.addSearchMarkersForPreview(f.last.found,!1,f.caseMode));
this.focus();d.selection.isEmpty()?n.selectAll():(n.textString=d.selectionOrLineString(),d.selection.collapse())}}},{key:"advance",value:function(a){var d=this.state.inProgress;if(d&&d.found){var f=d.found.range;d=f.start;f=f.end;this.state.position=a!==this.state.backwards?a?f:d:a?d:f}this.state.backwards=a;return this.search()}},{key:"searchNext",value:function(){return this.advance(!1)}},{key:"searchPrev",value:function(){return this.advance(!0)}},{key:"search",value:function(){if(!this.input)return this.cleanup(),
null;var a=this.state,d=a.backwards,f=a.caseMode,k={backwards:d,start:a.position,caseSensitive:this.state.caseMode};a=this.target.search(this.input,k);k=this.state.inProgress=Object.assign({},k,{needle:this.input,found:a});this.applySearchResult(k);a?this.addSearchMarkers(a,d,f):this.cleanup();return k}},{key:"showTextMap",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Dd.import("./map-b5edafb7.js");
case 2:return k=this.view,n=this.textMap=Bk.morph({type:"textmap"}),n.attachTo(this.target),n.isLayoutable=!1,k.addMorph(n),n.topRight=k.innerBounds().bottomRight().addXY(0,5),n.height=this.target.height-this.target.padding.top()-k.height-15,n.update(),k.renderOnGPU=!0,p.abrupt("return",n);case 12:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"removeTextMap",value:function(){this.textMap&&(this.textMap.remove(),this.textMap.detachFromCurrentTextMorph(),
this.textMap=null)}},{key:"keybindings",get:function(){return[{keys:"Enter",command:"search next or replace and go to next"},{keys:"Alt-Enter",command:"only search prev"},{keys:"Tab",command:"change focus"},{keys:{mac:"Ctrl-O",win:"Alt-O"},command:"occur with search term"},{keys:"Ctrl-W",command:"yank next word from text"},{keys:"Escape",command:"cancel search"},{keys:{win:"Ctrl-F|Ctrl-S|Ctrl-G",mac:"Meta-F|Ctrl-S|Meta-G"},command:"search next"},{keys:{win:"Ctrl-Shift-F|Ctrl-R|Ctrl-Shift-G",mac:"Meta-Shift-F|Ctrl-R|Meta-Shift-G"},
command:"search prev"}]}},{key:"commands",get:function(){var a=this;return[{name:"occur with search term",exec:function(){var d=Cb(regeneratorRuntime.mark(function k(){var n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,Dd.import("./occur-e3b5a815.js");case 2:return n=q.sent,p=n.occurStartCommand,a.target.addCommands([p]),a.execCommand("accept search"),q.abrupt("return",a.target.execCommand("occur",{needle:a.input}));case 7:case "end":return q.stop()}},
k)}));return function(){return d.apply(this,arguments)}}()},{name:"accept search",exec:function(){a.acceptSearch();return!0}},{name:"cancel search and reset cursor in text",exec:function(){a.cancelSearch(!0);return!0}},{name:"cancel search",exec:function(){a.cancelSearch(!1);return!0}},{name:"search next",exec:function(){a.searchNext();return!0}},{name:"search prev",exec:function(){a.searchPrev();return!0}},{name:"only search prev",exec:function(){if(a.ui.searchInput.isFocused())return a.searchPrev(),
!0}},{name:"search next or replace and go to next",exec:function(d,f,k){a.ui.searchInput.acceptInput();return a.execCommand(a.ui.replaceInput.isFocused()?"replace and go to next":"search next",f,k)}},{name:"replace current search location with replace input",exec:function(){var d=Bk.Path("state.inProgress").get(a);if(d.found){var f=a.ui.replaceInput.textString;a.ui.replaceInput.acceptInput();d.needle instanceof RegExp&&(f=d.found.match.replace(d.needle,f));a.target.replace(d.found.range,f)}return!0}},
{name:"replace and go to next",exec:function(){a.execCommand("replace current search location with replace input");a.execCommand(a.state.backwards?"search prev":"search next");return!0}},{name:"replace all",exec:function(){var d=Bk.Path("state.inProgress").get(a),f=a.ui.replaceInput;if(d.found){d=Object.assign({},d,{start:{row:0,column:0}});var k=f.textString;f.acceptInput();f=(new Bk.TextSearcher(a.target)).searchForAll(d);a.target.undoManager.group();f.forEach(function(n){var p=n.range;n=n.match;
d.needle instanceof RegExp&&(k=n.replace(d.needle,k));a.target.replace(p,k,!0,!0,!1)});a.target.undoManager.group();a.acceptSearch()}return!0}},{name:"change focus",exec:function(){var d=a.ui,f=d.searchInput;d=d.replaceInput;f.isFocused()?d.focus():f.focus();return!0}},{name:"yank next word from text",exec:function(){var d=a.target,f=d.wordRight(),k=a.ui.searchInput;k.selection.isEmpty()||(k.selection.text="");d=d.textInRange({start:d.cursorPosition,end:f.range.end});k.textString+=d;return!0}}]}}],
[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"SearchWidgetModel"}},{key:"properties",get:function(){return{isEpiMorph:{defaultValue:!0},target:{},state:{initialize:function(){this.state={backwards:!1,before:null,position:null,inProgress:null,last:null,caseMode:!1,regexMode:!1}}},input:{get:function(){var a=this.ui.searchInput.textString;if(this.state.regexMode){var d=a.match(/^\/(.*)\/([a-z]*)$/);return d?RegExp(d[1],d[2]):new RegExp(a)}return a},set:function(a){this.ui.searchInput.textString=
String(a)}},textMap:{},expose:{get:function(){return"state prepareForNewSearch showTextMap commands keybindings isEpiMorph".split(" ")}},bindings:{get:function(){return[{target:"searchInput",signal:"onBlur",handler:"onBlur"},{target:"replaceInput",signal:"onBlur",handler:"onBlur"},{target:"acceptButton",signal:"fire",handler:"execCommand",converter:function(){return"accept search"}},{target:"cancelButton",signal:"fire",handler:"execCommand",converter:function(){return"cancel search and reset cursor in text"}},
{target:"nextButton",signal:"fire",handler:"execCommand",converter:function(){return"search next"}},{target:"prevButton",signal:"fire",handler:"execCommand",converter:function(){return"search prev"}},{target:"searchInput",signal:"inputChanged",handler:"search"},{target:"replaceButton",signal:"fire",handler:"execCommand",converter:function(){return"replace and go to next"}},{target:"replaceAllButton",signal:"fire",handler:"execCommand",converter:function(){return"replace all"}},{target:"caseModeButton",
signal:"fire",handler:"toggleCaseMode"},{target:"regexModeButton",signal:"fire",handler:"toggleRegexMode"},{signal:"onBlur",handler:"onBlur",override:!0}]}}}}}],c,{pathInPackage:function(){return"./text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3917,end:20684})}(Bk.ViewModel));Bk.SearchWidgetModel=rV;Bk.SearchWidgetModel=
rV;var yI=[{name:"search in text",exec:function(){var b=Cb(regeneratorRuntime.mark(function a(g){var d,f,k,n,p=arguments;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return d=1<p.length&&void 0!==p[1]?p[1]:{backwards:!1},q.next=3,Dd.import("./search.cp-1542fb31.js");case 3:return f=q.sent,k=f.SearchWidget,n=g._searchWidget||(g._searchWidget=Bk.part(k,{viewModel:{target:g},extent:Bk.pt(300,55)})),n.state.backwards=d.backwards,n.prepareForNewSearch(),Bk.config.codeEditor.search.showTextMap&&
n.showTextMap(),q.abrupt("return",!0);case 10:case "end":return q.stop()}},a)}));return function(g){return b.apply(this,arguments)}}()}];Bk.searchCommands=yI;Bk.searchCommands=yI;var vm=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js");vm.todo=function(b){throw Error("not yet implemented "+b);};vm.Rectangle=fn;vm.rect=ko;vm.pt=wl;vm.arr=aj;vm.Range=Ft;var sV=bd("bC",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js"),g=c.hasOwnProperty("TextLayout")&&
"function"===typeof c.TextLayout?c.TextLayout:c.TextLayout=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.resetLineCharBoundsCache()}},{key:"restore",value:function(a,d){var f=function(r){var u=0;return vm.arr.histogram(r,r.length/3).map(function(x){var y=Wb(x,3);x=y[0];var D=
y[1];y=y[2];for(var H=[],I=0;I<x;I++)H.push(vm.rect(u,0,D,y)),u+=D;return H}).flat()};a=fa(a);var k;try{for(a.s();!(k=a.n()).done;){var n=Wb(k.value,2),p=n[0],q=f(n[1]);this.lineCharBoundsCache.set(d.document.getLine(p),q)}}catch(r){a.e(r)}finally{a.f()}}},{key:"resetLineCharBoundsCache",value:function(a){this.lineCharBoundsCache=new WeakMap;a&&!a._isDeserializing&&(this.estimateLineHeights(a),a.makeDirty())}},{key:"resetLineCharBoundsCacheOfLine",value:function(a){a&&this.lineCharBoundsCache.set(a,
null)}},{key:"resetLineCharBoundsCacheOfRow",value:function(a,d){var f=a.document;a._isDeserializing&&a._initializedByCachedBounds||f&&this.resetLineCharBoundsCacheOfLine(f.getLine(d))}},{key:"resetLineCharBoundsCacheOfRange",value:function(a,d){for(var f=d.start.row;f<=d.end.row;f++)this.resetLineCharBoundsCacheOfRow(a,f)}},{key:"estimateLineHeightsInRange",value:function(a,d){for(var f=a.document,k=a.getGlobalTransform(),n=d.start.row;n<=d.end.row;n++)this.resetLineCharBoundsCacheOfRow(a,f.getLine(n),
k)}},{key:"estimateExtentOfLine",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a.getGlobalTransform(),k=a.fontMetric,n=a.lineWrapping,p=a.padding,q=a.textRenderer,r=a.debug,u=a.defaultTextStyle,x=a.getProperty("extent"),y=x.x;x.y;x=p.left();var D=p.right(),H=p.top();p=p.bottom();q=q.directRenderTextLayerFn(a);var I=d.textAndAttributes,N=[],J;y=y-x-D;if(I&&I.length)for(var sa=0,ja=0;sa<I.length;sa+=2)(J=I[sa])&&J.isMorph?(J.position=this.pixelPositionFor(a,{row:d.row,
column:ja}).subPt(a.origin),ja++):J&&(ja+=J.length),N.push(Object.assign({},u,{},I[sa+1]));else N.push(u);I=N.length;for(sa=u=J=0;sa<I;sa++){ja=k.defaultCharExtent(a,{defaultTextStyle:N[sa],width:1E3,transform:f,paddingBottom:p,paddingTop:H,paddingRight:D,paddingLeft:x},q);var Ha=ja.width;u=Math.max(ja.height,u);J+=Ha}f=u;k=d.text.length||1;x=Math.round(J/I);D=k*x;D=n?Math.min(D,y):D;n&&(f=Math.round((Math.ceil(k/Math.max(3,y/x))||1)*u));r&&console.log("".concat(d.row,": ").concat(d.height," => ").concat(f));
d.changeExtent(D,f,!0)}},{key:"estimateLineHeights",value:function(a,d){var f=a.fontMetric,k=a.textRenderer,n=a.document,p=a.defaultTextStyle,q=a.clipMode,r=a.textAlign,u=a.padding,x=a.lineWrapping,y=a.debug,D=a.getProperty("extent"),H=D.x,I=D.y;D=a.getGlobalTransform();var N=u.left(),J=u.right(),sa=u.top(),ja=u.bottom();u=n.lines;n.stringSize;n=k.directRenderTextLayerFn(a);y&&(y=a.debugHelper(y),y.debugTextLayout||(y=!1));if(!y&&10>a.lineCount()&&3E3>a.document.stringSize&&!a.textAndAttributes.some(function(Ha){return Ha&&
void 0!=Ha.fontFamily}))for(d=k.directRenderLineFn(a),d=f.manuallyComputeBoundsOfLines(a,u,0,0,{defaultTextStyle:p,width:H,height:I,clipMode:q,lineWrapping:x,textAlign:r,transform:D,paddingLeft:N,paddingRight:J,paddingTop:sa,paddingBottom:ja},n,d),p=0;p<u.length;p++)y=d[p],u[p].changeExtent(y.width,y.height,!f.isFontSupported(a.fontFamily,a.fontWeight));else{for(p=f=0;p<u.length;p++)q=u[p],!d&&0<q.height||(f++,this.estimateExtentOfLine(a,q,D));a.viewState._textLayoutStale=!1;y&&y.log("estimateLineHeights, ".concat(f,
"/").concat(u.length," updated, force: ").concat(d))}}},{key:"defaultCharExtent",value:function(a){var d=a.textRenderer,f=a.fontMetric,k=a.defaultTextStyle,n=a.getGlobalTransform();d=d.directRenderTextLayerFn(a);return f.defaultCharExtent(a,{transform:n,defaultTextStyle:k,width:1E3},d)}},{key:"textBounds",value:function(a){var d=a.document,f=a.padding,k=a.borderWidthLeft,n=a.borderWidthRight,p=a.borderWidthTop;a=a.borderWidthBottom;return new vm.Rectangle(f.left(),f.top(),Math.round(d.width+k+n),
Math.round(d.height+p+a))}},{key:"isFirstLineVisible",value:function(a){return 0>=a.viewState.firstVisibleRow}},{key:"isLastLineVisible",value:function(a){return a.viewState.lastVisibleRow>=a.lineCount()-1}},{key:"isLineVisible",value:function(a,d){return d>=a.viewState.firstVisibleRow&&d<=a.viewState.lastVisibleRow}},{key:"isLineFullyVisible",value:function(a,d){return d>=a.viewState.firstFullyVisibleRow&&d<=a.viewState.lastFullyVisibleRow}},{key:"whatsVisible",value:function(a){var d=a.viewState.firstVisibleRow,
f=a.viewState.lastVisibleRow;return{lines:a.document.lines.slice(d,f),startRow:d,endRow:f}}},{key:"firstFullVisibleLine",value:function(a){return a.viewState.firstFullyVisibleRow}},{key:"lastFullVisibleLine",value:function(a){return a.viewState.lastFullyVisibleRow}},{key:"screenLineRange",value:function(a,d,f){var k=d.row,n=d.column;n=Math.max(0,n);k=Math.min(a.lineCount()-1,Math.max(0,k));var p=this.charBoundsOfRow(a,k);n>p.length-1&&(n=p.length-1);for(var q=p[n],r=d=n,u=n+1;u<p.length&&!(p[u].y+
p[u].height>q.y+q.height);u++)r=u;r===p.length-1&&r++;for(u=n-1;0<=u&&!(p[u].y+p[u].height<q.y+q.height);u--)d=u;f&&(a=a.getLine(k).slice(d,r).match(/^\s*/)[0].length,d+=a);return new vm.Range({start:{row:k,column:d},end:{row:k,column:r}})}},{key:"rangesOfWrappedLine",value:function(a,d){for(var f=a.getLine(d).length,k=0,n=[];;){var p=this.screenLineRange(a,{row:d,column:k},!1);n.push(p);if(p.end.column>=f)break;var q=p.end.column+1;if(q>=f)break;if(q<=k){if(!a.env.renderer.getNodeForMorph(a))break;
throw Error("should not happen ".concat(p.end.column," vs ").concat(k));}k=q}return n}},{key:"chunkAtPos",value:function(a,d){vm.todo("chunkAtPos")}},{key:"charBoundsOfRow",value:function(a,d){d=a.document.getLine(d);a._initializedByCachedBounds&&!this._restored&&(this.restore(a._initializedByCachedBounds,a),this._restored=!0);var f=this.lineCharBoundsCache.get(d);if(f)return f;var k=a.getProperty("extent");f=k.x;k=k.y;var n=a.fontMetric,p=a.textRenderer,q=a.defaultTextStyle,r=a.clipMode,u=a.textAlign,
x=a.padding,y=a.lineWrapping,D=a.getGlobalTransform(),H=x.left(),I=x.right(),N=x.top();x=x.bottom();var J=p.directRenderLineFn(a);p=p.directRenderTextLayerFn(a);a=n.manuallyComputeCharBoundsOfLine(a,d,0,0,{defaultTextStyle:q,width:f,height:k,clipMode:r,lineWrapping:y,textAlign:u,paddingLeft:H,paddingRight:I,paddingTop:N,paddingBottom:x,transform:D},p,J);if(a.find(function(sa){return void 0==sa.width&&void 0==sa.height}))return a;this.lineCharBoundsCache.set(d,a);return a}},{key:"computeMaxBoundsForLineSelection",
value:function(a,d){var f=d.start,k=d.end,n=a.textLayout,p=n.rangesOfWrappedLine(a,f.row).find(function(q){return q.containsPosition(f)});k=a.lineWrapping&&p?p.intersect(d).end:k;k=k.row==f.row?k:{row:k.row,column:-1};d=n.charBoundsOfRow(a,f.row);d=0>k.column?d.slice(f.column):d.slice(f.column,k.column+1);k=f.column+(d?d.indexOf(vm.arr.max(d,function(q){return q.height})):0);return n.boundsFor(a,{row:f.row,column:k})}},{key:"boundsFor",value:function(a,d){var f=d.row;d=d.column;d=Math.max(0,d);f=
Math.min(a.lineCount()-1,Math.max(0,f));var k=this.charBoundsOfRow(a,f);if(0<k.length)if(d>=k.length){var n=k[k.length-1];n=new vm.Rectangle(n.x+n.width,n.y,0,n.height)}else n=vm.Rectangle.fromLiteral(k[d]);n||(console.warn("Cannot compute bounds for line ".concat(f,"/").concat(d)),n=new vm.Rectangle(0,0,0,0));d=a.document;a=a.padding;n.x+=a.left();n.y=n.y+d.computeVerticalOffsetOf(f)+a.top();return n}},{key:"pixelPositionFor",value:function(a,d){return this.boundsFor(a,d).topLeft()}},{key:"textPositionFromPoint",
value:function(a,d){var f=d.addPt(a.origin),k=f.x,n=f.y,p=a.document;f=a.padding;a.origin;var q=f.left(),r=f.top();if(n>p.height+r)return p.endPosition;if(n<r)return{row:0,column:0};f=p.findLineByVerticalOffset(n-r);if(!f)return{row:0,column:0};var u=f.line.row;a=this.charBoundsOfRow(a,u);var x=a.length,y=a[0],D=a[x-1];f={row:u,column:0};k-=q;n-=r+p.computeVerticalOffsetOf(u);if(0===x||k<=y.x+Math.round(y.width/2)&&n>=y.y&&n<=y.y+y.height)return f;if(k>D.x+Math.round(D.width/2)&&n>=D.y&&n<=D.y+D.height)return f.column=
x,f;q=[];for(p=x-1;0<=p;p--)if(r=a[p],u=r.x,x=r.width,y=r.y,D=r.height,!(n<y||n>y+D)&&(q.push(r),k>=u+Math.round(x/2)))return f.column=1===q.length?p:p+1,f;if(q.length)return f.column=a.indexOf(vm.arr.last(q)),f;k=Infinity;n=-1;for(p=0;p<a.length;p++)q=a[p],q=d.distSquared(vm.pt(q.x+q.width/2,q.y+q.height/2)),q>=k||(k=q,n=p);f.column=n;return f}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TextLayout"}}],c,{pathInPackage:function(){return"./text/layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:244,end:17832})}(void 0));vm["default"]=sV;var lh=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js");lh.printViewState=function(b){var c=b.viewState,g=c.scrollTop,a=c.scrollHeight;c.heightBefore;var d=c.textHeight,f=c.firstVisibleRow,k=c.lastVisibleRow;c.firstFullyVisibleRow;c.lastFullyVisibleRow;c.visibleLines;c=b.document.lines;
console.log("".concat(b," #").concat(b.id.slice(0,12),"\nscroll: ").concat(g," + ").concat(a,"\nlines: ").concat(f," - ").concat(k,"\nvisible lines: ").concat(k-f,"\nheight: ").concat(d,", ").concat(c.length," lines"))};lh.installCSS=function(b){return TF.apply(this,arguments)};lh.extractHTMLFromTextMorph=UF;lh.obj=bj;lh.Path=qj;lh.arr=aj;lh.num=Gm;lh.pt=wl;lh.Rectangle=fn;lh.vdom=Mx;lh.splitTextAndAttributesIntoLines=lx;lh.defaultAttributes=rw;lh.defaultStyle=qw;lh.addOrChangeCSSDeclaration=zq;lh.hyperscriptFnForDocument=
jH;lh.objectReplacementChar=BB;lh.config=Jm;lh.getSvgVertices=pw;lh.waitFor=pn;var CB=lh.vdom;lh.h=CB.h;lh.create=CB.create;lh.patch=CB.patch;lh.diff=CB.diff;lh.cssInstalled=!1;lh.debug=!!lh.config.onloadURLQuery["debug-text"];lh.nextTick=function(b,c,g,a,d,f){for(;!d&&g<c.length;)d=b[c[g++]+"equestAnimationFrame"];return d&&d.bind(b)||b.setImmediate||function(k){b.setTimeout(k,0)}}("undefined"!==typeof window?window:global,["r","webkitR","mozR","msR","oR"],0);(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),
g=c.hasOwnProperty("AfterTextRenderHook")&&"function"===typeof c.AfterTextRenderHook?c.AfterTextRenderHook:c.AfterTextRenderHook=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"reset",value:function(a){this.morph=a;this.needsRerender=this.called=!1}},{key:"updateLineHeightOfNode",value:function(a,d,f){if(0===d.height||d.hasEstimatedExtent){var k=a.getGlobalTransform().inverse();k.e=
k.f=0;var n=1!=k.getScale()||0!=k.getRotation();n&&(f.style.transform=k.toString());var p=f.getBoundingClientRect();k=p.height;p=p.width;n&&(f.style.transform="");k&&p&&(d.height!==k||d.width!==p)&&a.fontMetric.isFontSupported(a.fontFamily,a.fontWeight)&&(d.changeExtent(p,k,!1),a.textLayout.resetLineCharBoundsCacheOfLine(d),this.needsRerender=!0,a.viewState._needsFit=!0);if(d.textAndAttributes&&d.textAndAttributes.length)for(p=n=0;n<d.textAndAttributes.length;n+=2)(f=d.textAndAttributes[n])&&f.isMorph?
(a._positioningSubmorph=f,f.position=a.textLayout.pixelPositionFor(a,{row:d.row,column:p}).subPt(a.origin),f._dirty=!1,a._positioningSubmorph=null,p++):f&&(p+=f.length);return k}return d.height}},{key:"updateExtentsOfLines",value:function(a){var d=this.morph;d.textLayout;var f=d.viewState,k=d.fontMetric;f.dom_nodes=[];f.dom_nodeFirstRow=0;f.textWidth=a.scrollWidth;a=a.children;for(var n=0,p;n<a.length&&"line"!=a[n].className;)n++;if(n<a.length){p=a[n];var q=p.dataset;q=Number(q?q.row:p.getAttribute("data-row"));
if("number"===typeof q&&!isNaN(q)){f.dom_nodeFirstRow=q;p=0;q=d.document.getLine(q);for(var r;n<a.length;n++){var u=a[n];f.dom_nodes.push(u);q&&(r||(r=q.hasEstimatedExtent),q.hasEstimatedExtent=r,p+=this.updateLineHeightOfNode(d,q,u),q.hasEstimatedExtent=!k.isFontSupported(d.fontFamily,d.fontWeight),q=q.nextLine())}this.needsRerender?(d.fitIfNeeded(),d.makeDirty()):d._dirty=!!d.submorphs.find(function(x){return x.needsRerender()})}}}},{key:"hook",value:function(a,d,f){a&&a.parentNode&&(d=this.morph.viewState,
d.text_layer_node=a,d.fontmetric_text_layer_node=null,this.called=!0,this.updateExtentsOfLines(a))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"AfterTextRenderHook"}}],c,{pathInPackage:function(){return"./text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5215,end:9376})})(void 0);var tV=function(b){var c=
window.lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),g=c.hasOwnProperty("TextRenderer")&&"function"===typeof c.TextRenderer?c.TextRenderer:c.TextRenderer=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){a.domEnv?lh.cssInstalled||lh.installCSS(a):console.warn("Text renderer initialized without domEnv. Depending on what you want to do you might have bad luck...!");
this.domEnv=a.domEnv}},{key:"directRenderLineFn",value:function(a){var d=this,f=a.viewState._renderLineFn;if(!f){var k=lh.hyperscriptFnForDocument(this.domEnv.document);f=a.viewState._renderLineFn=function(n){return d.renderLine(k,null,a,n)}}return f}},{key:"directRenderTextLayerFn",value:function(a){var d=this,f=a.viewState._renderTextLayerFn;if(!f){var k=lh.hyperscriptFnForDocument(this.domEnv.document);f=a.viewState._renderTextLayerFn=function(n){return d.renderJustTextLayerNode(k,a,n,[])}}return f}},
{key:"renderMorph",value:function(a,d){var f=a.getProperty("selection");return f&&!f.isEmpty()||!a.readOnly?this.renderInteractiveText(a,d):this.renderMorphFast(a,d)}},{key:"renderMorphFast",value:function(a,d){var f=this,k=this.renderJustTextLayerNode(lh.h,a,null,this.renderAllLines(lh.h,d,a)),n=a.embeddedMorphMap,p=n?a.submorphs.filter(function(q){return!n.has(q)}):a.submorphs;k.properties.style.position="static";k.properties.className+=" actual";k.properties.style.overflow="visible"===a.clipMode?
"visible":"hidden";this.ensureLayoutUpdateHook(a,k);p=d.renderSelectedSubmorphs(a,p);k=[k];Array.isArray(p)?k.push.apply(k,db(p)):k.push(p);p=lh.defaultStyle(a);a.fixedHeight||delete p.height;a.fixedWidth||delete p.width;lh.nextTick(function(){f.manuallyTriggerTextRenderHook(a,d)});return lh.h("div",Object.assign({},lh.defaultAttributes(a,d),{style:Object.assign({},p,{"-moz-user-select":"none",cursor:"auto"===a.nativeCursor?a.readOnly?"default":"text":a.nativeCursor})}),k)}},{key:"renderInteractiveText",
value:function(a,d){var f=this.renderSelectionLayer(a),k=this.renderTextLayer(a,d),n=this.renderJustTextLayerNode(lh.h,a,null,[]),p=this.renderMarkerLayer(a,d),q=this.renderScrollLayer(a),r=a.embeddedMorphMap,u=r?a.submorphs.filter(function(x){return!r.has(x)}):a.submorphs;k.properties.className+=" actual";k.properties.style.overflow="visible"===a.clipMode?"visible":"hidden";n.properties.className+=" font-measure";u=d.renderSelectedSubmorphs(a,u);f=[].concat(db(f),[p,n,k]);Array.isArray(u)?f.push.apply(f,
db(u)):f.push(u);k=a.viewState.fastScroll&&!lh.Path("layout.renderViaCSS").get(a);return lh.h("div",Object.assign({},lh.defaultAttributes(a,d),{style:Object.assign({},lh.defaultStyle(a),{},a.viewState.fastScroll?{overflow:"visible"==a.clipMode?"visible":"hidden"}:{},{"-moz-user-select":"none",cursor:"auto"===a.nativeCursor?a.readOnly?"default":"text":a.nativeCursor})}),[q].concat(db(k?[lh.h("div",{className:"scrollWrapper",style:{"pointer-events":"none",position:"absolute",width:"100%",height:"100%",
transform:"translate(-".concat(a.scroll.x,"px, -").concat(a.scroll.y,"px)")}},f)]:f)))}},{key:"renderScrollLayer",value:function(a){var d=a.document.width>a.width?a.scrollbarOffset:lh.pt(0,0),f=a.padding.top()+a.padding.bottom();return lh.h("div",{className:"scrollLayer",style:Object.assign({position:"absolute",top:"0px"},a.viewState.fastScroll?{overflow:a.scrollActive?a.clipMode:"hidden"}:{},{width:"100%",height:"100%"})},[lh.h("div",{style:{width:Math.max(a.document.width,a.width)+"px",height:Math.max(a.document.height,
a.height)-d.y+f+"px"}})])}},{key:"renderSelectionLayer",value:function(a){var d=a.cursorWidth||1,f=a.selection;if(a.inMultiSelectMode()){d=[];f=f.selections;for(var k=0;k<f.length-1;k++)d.push.apply(d,db(this.renderSelectionPart(a,f[k],!0,2)));d.push.apply(d,db(this.renderSelectionPart(a,f[k],!1,4)));return d}return this.renderSelectionPart(a,f,!1,d)}},{key:"renderTextLayer",value:function(a,d){var f=this,k=a.debug?[].concat(db(this.renderDebugLayer(a)),db(this.renderVisibleLines(lh.h,d,a))):this.renderVisibleLines(lh.h,
d,a);k=this.renderJustTextLayerNode(lh.h,a,null,k);k.properties.style.position="absolute";this.ensureLayoutUpdateHook(a,k);lh.nextTick(function(){f.manuallyTriggerTextRenderHook(a,d)});return k}},{key:"ensureLayoutUpdateHook",value:function(a,d){var f=a.viewState.afterTextRenderHook||(a.viewState.afterTextRenderHook=new lh.AfterTextRenderHook);f.reset(a);d.properties["after-text-render-hook"]=f}},{key:"manuallyTriggerTextRenderHook",value:function(a,d){var f=a.viewState.afterTextRenderHook;f&&!f.called&&
((d=(d=d.getNodeForMorph(a))&&d.querySelector(".actual.newtext-text-layer"))&&f.hook(d),a.ownerChain().every(function(k){return k.visible})&&a.fit())}},{key:"renderJustTextLayerNode",value:function(a,d,f,k){d.height;var n=d.padding,p=n.x,q=n.y,r=n.width,u=n.height,x=d.lineWrapping,y=d.fixedWidth,D=d.fixedHeight,H=d.backgroundColor,I=d.fontColor,N=d.textAlign,J=d.fontSize,sa=d.textDecoration,ja=d.fontStyle,Ha=d.fontWeight,Qa=d.fontFamily,ec=d.lineHeight,mc=d.wordSpacing,hc=d.letterSpacing;d.document;
var Ua=d.tabWidth;n={overflow:"hidden",top:"0px",left:"0px"};r=p+r;u=q+u;d=Math.max(d.document.height,d.height);var xa="newtext-text-layer";switch(y&&x){case !0:case "by-words":xa+=" wrap-by-words";break;case "only-by-words":xa+=" only-wrap-by-words";break;case "by-chars":xa+=" wrap-by-chars";break;case !1:xa+=" no-wrapping"}y||(xa+=" auto-width");D||(xa+=" auto-height");x={className:xa,style:n};D&&(n.height=d+"px");0<p&&(n.paddingLeft=p+"px");0<r&&(n.paddingRight=r+"px");0<q&&(n.marginTop=q+"px");
0<u&&(n.marginBottom=u+"px");hc&&(n.letterSpacing=hc+"px");mc&&(n.wordSpacing=mc+"px");ec&&(n.lineHeight=ec);Qa&&(n.fontFamily=Qa);Ha&&(n.fontWeight=Ha);ja&&(n.fontStyle=ja);sa&&(n.textDecoration=sa);J&&(n.fontSize=J+"px");N&&(n.textAlign=N);I&&(n.color=String(I));H&&(n.backgroundColor=H);8!==Ua&&(n.tabSize=Ua);f&&(p=f.clipMode,q=f.height,f=f.width,"number"===typeof f&&(n.width=f+"px"),"number"===typeof q&&(n.height=q+"px"),p&&(n.overflow=p));return a("div",x,k)}},{key:"renderAllLines",value:function(a,
d,f){var k=f.height,n=f.scroll,p=f.padding;p.x;p.y;p.width;p.height;f.clipMode;f.textAndAttributes;d.getNodeForMorph(f);n=n.y;p=f.document.lines;for(var q=p.length,r=[],u=[],x=0;x<p.length;x++){r.push(p[x]);var y=this.renderLine(a,d,f,p[x]);u.push(y);y.key=x}Object.assign(f.viewState,{scrollTop:n,scrollHeight:k,scrollBottom:n+k,firstVisibleRow:0,lastVisibleRow:q,visibleLines:r});return u}},{key:"renderVisibleLines",value:function(a,d,f){var k=f.height,n=f.scroll,p=f.padding;p.x;var q=p.y;p.width;
p.height;var r=f.document,u=f.clipMode;d.getNodeForMorph(f);n=n.y;var x=r.rowCount-1;p=r.height;var y="visible"!==u,D=r.findLineByVerticalOffset(y?Math.max(0,y?n-q:0):0)||{row:0,y:0,offset:0,line:r.getLine(0)},H=D.line,I=D.offset;u=D.y;D=D.row;q=r.findLineByVerticalOffset(y?Math.min(p,n-q+k):p)||{row:x,offset:0,y:0,line:r.getLine(x)};r=q.line;var N=q.offset,J=q.row;q=y?D:0;I=0===I?D:D+1;x=y?J+1:x;y=r&&N!==r.height?J-1:J;this.maxVisibleLines=Math.max(this.maxVisibleLines||1,x-q+1);D=[];r=[];r.push(a("div.newtext-before-filler",
{key:"filler",style:{height:u+"px"}}));for(N=0;N<this.maxVisibleLines&&(D.push(H),J=this.renderLine(a,d,f,H),r.push(J),J.key=H.row%this.maxVisibleLines,N++,H=H.nextLine(),H););Object.assign(f.viewState,{scrollTop:n,scrollHeight:k,scrollBottom:n+k,heightBefore:u,textHeight:p,firstVisibleRow:q,lastVisibleRow:x,firstFullyVisibleRow:I,lastFullyVisibleRow:y,visibleLines:D});f.debug&&lh.printViewState(f);return r}},{key:"renderLine",value:function(a,d,f,k){var n=k.textAndAttributes,p=[],q=n.length,r=f.fontSize;
if(0<q)for(var u=0;u<q;u+=2){var x=n[u]||"\u00a0";var y=n[u+1];if("string"!==typeof x)p.push(x.isMorph?this.renderEmbeddedSubmorph(a,d,x,y):lh.objectReplacementChar);else if(y){var D=y.fontSize&&(lh.obj.isString(y.fontSize)?y.fontSize:y.fontSize+"px");var H=y.fontFamily;var I=y.fontWeight;var N=y.fontStyle;var J=y.textDecoration;var sa=y.fontColor;var ja=y.backgroundColor;var Ha=y.nativeCursor;var Qa=y.textStyleClasses;var ec=y.link;var mc=y.lineHeight||mc;var hc=y.textAlign||hc;var Ua=y.wordSpacing||
Ua;var xa=y.letterSpacing||xa;var rc=y.paddingRight;var Lb=y.paddingLeft;var Ac=y.paddingTop;var Xb=y.paddingBottom;var qd=y.verticalAlign;var La=y.textStroke;var Fd=y.quote||Fd;var na="span";var Va={};var yd={style:Va};D&&y.fontSize<r&&(r=y.fontSize);ec&&(na="a",(yd.href=ec)&&ec.startsWith("http")&&(yd.target="_blank"));if(ec||Ha)Va.pointerEvents="auto";D&&(Va.fontSize=D);H&&(Va.fontFamily=H);I&&(Va.fontWeight=I);N&&(Va.fontStyle=N);J&&(Va.textDecoration=J);sa&&(Va.color=String(sa));ja&&(Va.backgroundColor=
String(ja));Ha&&(Va.cursor=Ha);rc&&(Va.paddingRight=rc);Lb&&(Va.paddingLeft=Lb);Ac&&(Va.paddingTop=Ac);Xb&&(Va.paddingBottom=Xb);qd&&(Va.verticalAlign=qd);La&&(Va["-webkit-text-stroke"]=La);y.doit&&(Va.pointerEvents="auto",Va.cursor="pointer");Qa&&Qa.length&&(yd.className=Qa.join(" "));p.push(a(na,yd,x))}else p.push(x)}else p.push(a("br"));d={};f.fontSize>r&&(d.fontSize=r+"px");mc&&(d.lineHeight=mc);hc&&(d.textAlign=hc);xa&&(d.letterSpacing=xa+"px");Ua&&(d.wordSpacing=Ua+"px");f=a("div",{className:"line",
style:d,dataset:{row:k.row}},p);if(Fd)for("number"!==typeof Fd&&(Fd=1);Fd--;)f=a("blockquote",{},f);return f}},{key:"renderEmbeddedSubmorph",value:function(a,d,f,k){k=k||{};if(d)return a=d.render(f),a.properties.style.position="sticky",a.properties.style.transform="",a.properties.style.textAlign="initial",k.paddingTop&&(a.properties.style.marginTop=k.paddingTop),k.paddingLeft&&(a.properties.style.marginLeft=k.paddingLeft),k.paddingRight&&(a.properties.style.marginRight=k.paddingRight),k.paddingBottom&&
(a.properties.style.marginBottom=k.paddingBottom),a;d=f.extent;k=d.x+"px";d=d.y+"px";return a("div",{className:f.styleClasses.join(" "),style:{width:k,height:d}},[])}},{key:"renderSelectionPart",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:2;if(!d)return[];var n=a.textLayout,p=d.start,q=d.end,r=d.cursorVisible,u=d.selectionColor,x=a.document,y=a.cursorColor;a.fontColor;var D=d.isReverse();p=n.boundsFor(a,
p);var H=n.computeMaxBoundsForLineSelection(a,d),I=n.boundsFor(a,q);lh.pt(p.x,H.y);H=lh.pt(I.x,I.y);q=p.height;I=I.height;p=D?lh.pt(p.x,p.y):H;f=this.cursor(p,D?q:I,r,f,k,y);if(d.isEmpty())return[f];k=[];r=d.start.row;y=x.computeVerticalOffsetOf(r)+a.padding.top();D=a.padding.left();for(var N,J,sa;r<=d.end.row;){q=x.getLine(r);if(!(r<a.viewState.firstVisibleRow-50)){if(r>a.viewState.lastVisibleRow+50)break;p=n.charBoundsOfRow(a,r).map(lh.Rectangle.fromLiteral);I=r==d.start.row;if(H=p[0].bottom()<
lh.arr.last(p).top()){var ja=n.rangesOfWrappedLine(a,r).map(function(xa){return xa.intersect(d)}),Ha=I,Qa=0,ec=void 0,mc=void 0;ja=fa(ja);var hc;try{for(ja.s();!(hc=ja.n()).done;){var Ua=hc.value;Ua.isEmpty()||(ec=p.slice(Ua.start.column,Ua.end.column),Qa=Ha?lh.arr.min(ec.map(function(xa){return xa.top()})):Qa,mc=lh.arr.max(ec.map(function(xa){return xa.bottom()})),sa=ec[0],N=lh.pt(D+sa.left(),y+Qa),sa=lh.arr.last(ec),J=lh.pt(D+sa.right(),y+mc),Qa=mc,Ha=!1,k.push(lh.Rectangle.fromAny(N,J)))}}catch(xa){ja.e(xa)}finally{ja.f()}}H||
(J=r==d.end.row,N=I?d.start.column:0,H=J?d.end.column:p.length-1,I=I&&lh.arr.min(p.slice(N,H+1).map(function(xa){return xa.top()}))||0,Ha=N>=H?5:0,sa=p[N],N=lh.pt(D+(sa?sa.left():lh.arr.last(p).right()),y+I),sa=p[H],d.includingLineEnd?J=lh.pt(a.width-a.padding.right(),y+I+q.height):(J=J&&d.end.column<=p.length-1,J=lh.pt(D+(sa?J?sa.left():sa.right():lh.arr.last(p).right())+Ha,y+I+q.height)),k.push(lh.Rectangle.fromAny(N,J)))}y+=q.height;r++}n=this.selectionLayerRounded(k,u,a);n.push(f);return n}},
{key:"selectionLayerRounded",value:function(a,d,f){var k;f=[k={left:[],right:[]}];a=fa(a);var n;try{for(a.s();!(n=a.n()).done;){var p=n.value;q&&(q.left()>p.right()||q.right()<p.left())&&f.push(k={left:[],right:[]});k.left.push(p.topLeft(),p.bottomLeft());k.right.push(p.topRight(),p.bottomRight());var q=p}}catch(y){a.e(y)}finally{a.f()}var r=[];q=function(){var y=x[u];if(!y.left.length)return"continue";var D=y.left.reduce(function(Ha,Qa){return Ha.minPt(Qa)}),H=y.left.concat(y.right.reverse());y=
[];for(var I=0;I<H.length;I++){var N=H[I-1]||lh.arr.last(H),J=H[I],sa=H[I+1]||lh.arr.first(H),ja=N.subPt(J).normalized().scaleBy(6);N=J.addPt(ja);N._next=ja.scaleBy(-1);sa=sa.subPt(J).normalized().scaleBy(6);J=J.addPt(sa);J._prev=sa.scaleBy(-1);y.push(N,J)}y=y.map(function(Ha){return{position:Ha.subPt(D),isSmooth:!0,controlPoints:{next:Ha._next||lh.pt(0),previous:Ha._prev||lh.pt(0)}}});H=lh.getSvgVertices(y);J=y.map(function(Ha){return Ha.position}).reduce(function(Ha,Qa){return Ha.minPt(Qa)});I=
J.y;J=J.x;y=y.map(function(Ha){return Ha.position}).reduce(function(Ha,Qa){return Ha.maxPt(Qa)});r.push(lh.h("svg",{namespace:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute",left:D.x+"px",top:D.y+"px",width:y.x-J,height:y.y-I}},lh.h("path",{namespace:"http://www.w3.org/2000/svg",attributes:{d:H,fill:d.toString()}})))};for(var u=0,x=f;u<x.length;u++)q();return r}},{key:"cursor",value:function(a,d,f,k,n,p){return lh.h("div",{className:"newtext-cursor"+(k?" diminished":""),style:{left:a.x-
Math.ceil(n/2)+"px",top:a.y+"px",width:n+"px",height:d+"px",display:f?"":"none",background:p||"black"}})}},{key:"renderMarkerLayer",value:function(a){var d=a.markers;a.textLayout;var f=a.viewState,k=f.firstVisibleRow;f=f.lastVisibleRow;var n=[];if(!d)return n;d=fa(d);var p;try{for(d.s();!(p=d.n()).done;){var q=p.value,r=q.style,u=q.range,x=u.start,y=u.end;if(!(y.row<k||x.row>f))if(x.row===y.row)n.push(this.renderMarkerPart(a,x,y,r));else{n.push(this.renderMarkerPart(a,x,a.lineRange(x.row).end,r));
for(var D=x.row+1;D<=y.row-1;D++){var H=a.lineRange(D);n.push(this.renderMarkerPart(a,H.start,H.end,r,!0))}n.push(this.renderMarkerPart(a,{row:y.row,column:0},y,r))}}}catch(I){d.e(I)}finally{d.f()}return n}},{key:"renderMarkerPart",value:function(a,d,f,k){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!1;var p=a.document;var q=a.textLayout;var r=p.getLine(d.row);n?(q=a.padding,n=q.left(),p=q.top()+p.computeVerticalOffsetOf(d.row),q=n+r.width,r=r.height):(lh.__inter0__=q.boundsFor(a,
d),n=lh.__inter0__.x,p=lh.__inter0__.y,lh.__inter1__=q.boundsFor(a,f),q=lh.__inter1__.x,r=lh.__inter1__.height);r=Math.ceil(r);return lh.h("div.newtext-marker-layer",{style:Object.assign({},k,{left:n+"px",top:p+"px",height:r+"px",width:q-n+"px"})})}},{key:"renderDebugLayer",value:function(a){var d=a.viewState,f=[],k=d.heightBefore,n=d.firstVisibleRow,p=d.lastVisibleRow;d=d.visibleLines;var q=a.padding,r=a.scroll,u=r.x,x=r.y;r=q.left();var y=q.right();q.bottom();f.push(lh.h("div.debug-info",{style:{left:u+
r+"px",top:x+"px",width:a.width-y+"px"}},lh.h("span","visible rows: ".concat(n," - ").concat(p))));for(q=0;n<p;q++,n++){var D=d[q];x=a.textLayout.lineCharBoundsCache.get(D);D=D.height;f.push(lh.h("div.debug-line",{style:{left:u+r+"px",top:0+k+"px",width:a.width-y+"px",height:D+"px"}},lh.h("span",String(n))));if(x)for(var H=0;H<x.length;H++){var I=x[H];f.push(lh.h("div.debug-char",{style:{left:r+I.x+"px",top:0+k+I.y+"px",width:I.width+"px",height:I.height+"px"}}))}k+=D}return f}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"TextRenderer"}}],c,{pathInPackage:function(){return"./text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9393,end:46778})}(void 0);lh.extractHTMLFromTextMorph=UF;lh["default"]=tV;var xo=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js");xo.arr=aj;xo.eqPosition=Lq;
xo.KeyHandler=YA;xo.commands={activate:{name:"[IyGotoChar] activate",exec:function(b){xo.IyGotoCharKeyHandler.installInto(b,(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{backwards:!1}).backwards);return!0}},moveTo:{name:"[IyGotoChar] move to",exec:function(b,c){b.saveMark();var g=b.selection,a=g.lead,d=a.row,f=a.column;a=!!b.activeMark||!g.isEmpty();var k={row:d,column:f-1};b=b.document[c.backwards?"scanBackward":"scanForward"](k,function(n,p){return n!==c.needle||xo.eqPosition(k,p)?null:
p});if(!b)return!0;b.column++;g.lead=b;a||(g.anchor=b);return!0},multiSelectAction:"forEach",readOnly:!0}};var zI=xo.commands.activate;xo.activate=zI;xo.activate=zI;(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js"),g=c.hasOwnProperty("IyGotoCharKeyHandler")&&"function"===typeof c.IyGotoCharKeyHandler?c.IyGotoCharKeyHandler:c.IyGotoCharKeyHandler=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;Ve._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this);this.charToFind=void 0;this.backwards=a}},{key:"isIyGoToChar",get:function(){return!0}},{key:"uninstallFrom",value:function(a){a._cachedKeyhandlers=null;xo.arr.remove(a._keyhandlers||[],this)}},{key:"eventCommandLookup",value:function(a,d){var f=
d.keyCombo,k=f.startsWith("input-");if(d.onlyModifiers||f.startsWith("Shift-")||!k&&!d.isModified&&!d.isFunctionKey)return{command:"null",passEvent:!0};d=k&&f.slice(6);if(!this.charToFind)if(k)this.charToFind=d;else return this.uninstallFrom(a),null;return d!==this.charToFind?(this.uninstallFrom(a),null):{command:xo.commands.moveTo,args:{backwards:this.backwards,needle:d}}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"IyGotoCharKeyHandler"}},{key:"installInto",value:function(a){var d=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;a.keyhandlers.filter(function(f){return f.isIyGoToChar}).forEach(function(f){return f.uninstallFrom(a)});a._cachedKeyhandlers=null;a._keyhandlers=(a._keyhandlers||[]).concat(new this(d))}}],c,{pathInPackage:function(){return"./text/iy-goto-char.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1102,end:3128})})(xo.KeyHandler);var uV,vV,uj=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/commands.js");uj.chain=jk;uj.arr=aj;uj.string=Xj;uj.date=$s;uj.pt=wl;uj.Range=Ft;uj.eqPosition=Lq;uj.commands=[{name:"clipboard copy",doc:"placeholder for native copy",scrollCursorIntoView:!1,exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row);return!0}},{name:"manual clipboard copy",doc:"attempts to copy selection via browser interface",scrollCursorIntoView:!1,
multiSelectAction:"single",exec:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{collapseSelection:!0,"delete":!1,dontTryNativeClipboard:!1},g=b.selection,a=g.text,d=c.hasOwnProperty("collapseSelection")?c.collapseSelection:!0;b.saveMark(g.anchor);b.activeMark=null;(g.isMultiSelection?g.selections.slice():[g]).forEach(function(f){var k=f.isEmpty()?b.lineRange():f.range,n=b.textInRange(k);b.env.eventDispatcher.killRing.add(n);c["delete"]?b.deleteText(k):!f.isEmpty()&&d&&f.collapse(f.lead)});
c.dontTryNativeClipboard||b.env.eventDispatcher.doCopy(a);return!0}},{name:"clipboard cut",doc:"placeholder for native cut",exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row,!0);return!0}},{name:"clipboard paste",doc:"placeholder for native paste",exec:function(){return!0}},{name:"manual clipboard paste",doc:"attempts to paste from the clipboard to lively \u2013 currently requires browser extension!",multiSelectAction:"single",exec:function(){var b=Cb(regeneratorRuntime.mark(function a(g){var d,
f,k,n=arguments;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=1<n.length&&void 0!==n[1]?n[1]:{killRingCycleBack:!1},k=g.env.eventDispatcher.killRing,d.killRingCycleBack&&(uj.arr.last(uj.arr.pluck(g.commandHandler.history,"name"))||"").includes("clipboard paste")&&(f=k.back()),!f&&k.isCycling()&&(f=k.yank()),f||(f=k.yank()),g.selection.isMultiSelection?(g.undoManager.group(),g.selection.selections.slice(0,-1).reverse().map(function(q,r){r=k.pointer-1-r;0>r&&
(r=k.buffer.length-1);return{selection:q,pasted:k.buffer[r]||""}}).concat({selection:g.selection.defaultSelection,pasted:f}).forEach(function(q){return q.selection.text=q.pasted}),g.undoManager.group()):f&&(g.undoManager.group(),g.selection.text=f,g.undoManager.group()),p.abrupt("return",!0);case 7:case "end":return p.stop()}},a)}));return function(g){return b.apply(this,arguments)}}()},{name:"browse clipboard",exec:function(){var b=Cb(regeneratorRuntime.mark(function a(g){var d,f,k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=
r.next){case 0:return d=g.env.eventDispatcher.killRing,f=d.pointer,k=d.buffer,n=k.map(function(u){return{isListItem:!0,string:uj.string.truncate(u,80).replace(/\n/g,""),value:u}}),r.next=4,g.world().filterableListPrompt("select items to paste",n,{preselect:f,multiSelect:!0});case 4:return p=r.sent,q=p.selected,q.length&&(g.undoManager.group(),g.insertTextAndSelect(q.join("\n")),g.undoManager.group()),r.abrupt("return",!0);case 8:case "end":return r.stop()}},a)}));return function(g){return b.apply(this,
arguments)}}()},{name:"text undo",doc:"undo text changes",multiSelectAction:"single",exec:function(b){b.textUndo();return!0}},{name:"text redo",doc:"redo text changes",multiSelectAction:"single",exec:function(b){b.textRedo();return!0}},{name:"select all",doc:"Selects entire text contents.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.saveMark();b.selectAll();return!0}},{name:"delete backwards",doc:"Delete the character in front of the cursor or the selection.",exec:function(b){if(b.rejectsInput())return!1;
if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&b.editorPlugin.cmd_delete_backwards())return!0;var c=b.selection;c.isEmpty()&&c.growLeft(1);c.text="";c.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"delete",doc:"Delete the character following the cursor or the selection.",exec:function(b){var c=b.selection;if(b.rejectsInput())return!1;c.isEmpty()&&c.growRight(1);c.text="";c.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"indent",scrollCursorIntoView:!1,
exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(c,g){return b.insertText(b.tab,g.start)});b.undoManager.group();return!0}},{name:"outdent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(c,g){return c.startsWith(b.tab)&&b.deleteText({start:g.start,end:{row:g.start.row,column:b.tab.length}})});b.undoManager.group();return!0}},{name:"indent according to mode",exec:function(){var b=Cb(regeneratorRuntime.mark(function a(g){var d,f,k,
n,p,q,r,u=arguments;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:d=1<u.length&&void 0!==u[1]?u[1]:{};if(f=g.editorPlugin&&g.editorPlugin.mode){x.next=4;break}return x.abrupt("return",!0);case 4:return p=d.hasOwnProperty("undo")?d.undo:!0,d.hasOwnProperty("firstRow")&&d.hasOwnProperty("lastRow")?(uj.__inter0__=d,k=uj.__inter0__.firstRow,n=uj.__inter0__.lastRow):g.selection.isEmpty()?k=n=g.cursorPosition.row:(uj.__inter1__=g.selection.selectedRows,k=uj.__inter1__.first,
n=uj.__inter1__.last),x.next=8,Dd.import("./editor-modes-aae4d878.js");case 8:return q=x.sent,r=q.indentLines,p&&g.undoManager.group(),r(g,f,k,n,"smart",!0,d),p&&g.undoManager.group(),x.abrupt("return",!0);case 14:case "end":return x.stop()}},a)}));return function(g){return b.apply(this,arguments)}}()},{name:"tab - snippet expand or indent",scrollCursorIntoView:!0,exec:function(b){var c=b.snippets.find(function(g){return g.canExpand(b)});return c?(c.expandAtCursor(b),!0):b.selection.isEmpty()?b.execCommand("insertstring",
{string:b.tab}):b.execCommand("indent according to mode")}},{name:"browse snippets",scrollCursorIntoView:!0,exec:function(){var b=Cb(regeneratorRuntime.mark(function a(g){var d,f,k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=g.snippets.map(function(q){return{isListItem:!0,string:"".concat(q.trigger," - ").concat(q.expansion),value:q}}),p.next=3,g.world().filterableListPrompt("select snippet",d,{requester:g});case 3:return f=p.sent,k=Wb(f.selected,1),(n=
k[0])&&n.expandAtCursor(g),p.abrupt("return",!0);case 8:case "end":return p.stop()}},a)}));return function(g){return b.apply(this,arguments)}}()},{name:"transpose chars",exec:function(b){if(b.selection.isEmpty()){var c=b.cursorPosition,g=c.row,a=c.column;c=uj.Range.create(g,a-1,g,a+1);var d=b.getLine(g);g=d[a-1];a=d[a];g&&a&&b.replace(c,a+g,!0)}return!0}},{name:"cycle selection contents",documentation:"If there are multiple selections, will take the text of the first one and replace the second one with it, the text of the second will replace the third, the last selection contents will replace the contents of the first.",
multiSelectAction:"single",exec:function(b){var c=b.selection.selections;b.undoManager.group();c.reduce(function(g,a){var d=a.text;a.text=g;return d},uj.arr.last(c).text);b.undoManager.group();return!0}},{name:"go left",doc:"Move the cursor 1 character left. At the beginning of a line move the cursor up. If a selection is active, collapse the selection left.",exec:function(b){b.activeMark?b.selection.selectLeft(1):b.selection.goLeft(1);return!0}},{name:"go right",doc:"Move the cursor 1 character right. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",
exec:function(b){b.activeMark?b.selection.selectRight(1):b.selection.goRight(1);return!0}},{name:"go up",doc:"Move the cursor 1 line. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",scrollCursorIntoView:!0,exec:function(b){b.activeMark?b.selection.selectUp(1):b.selection.goUp(1,!0);return!0}},{name:"go down",exec:function(b){b.activeMark?b.selection.selectDown(1):b.selection.goDown(1,!0);return!0}},{name:"select left",exec:function(b){b.selection.selectLeft(1);
return!0}},{name:"select right",exec:function(b){b.selection.selectRight(1);return!0}},{name:"select up",exec:function(b){b.selection.selectUp(1,!0);return!0}},{name:"select down",exec:function(b){b.selection.selectDown(1,!0);return!0}},{name:"select line",exec:function(b){var c=b.selection,g=c.lead.row,a=b.lineRange(g,!1);c.range=c.range.equals(a)?b.lineRange(g,!0):a;return!0}},{name:"goto line start",exec:function(b){var c=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!1}).select||
!!b.activeMark,g=b.selection,a=g.lead,d=b.screenLineRange(a,!0);g.lead=uj.eqPosition(a,d.start)?{column:0,row:a.row}:d.start;!c&&(g.anchor=g.lead);return!0}},{name:"goto line end",exec:function(b){var c=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!1}).select||!!b.activeMark,g=b.selection,a=b.screenLineRange(g.lead,!0);g.lead=a.end;!c&&(g.anchor=g.lead);return!0}},{name:"goto page up",exec:function(b){b.pageUpOrDown({direction:"up",select:!!b.activeMark});return!0}},{name:"goto page down",
exec:function(b){b.pageUpOrDown({direction:"down",select:!!b.activeMark});return!0}},{name:"goto page up and select",exec:function(b){b.pageUpOrDown({direction:"up",select:!0});return!0}},{name:"goto page down and select",exec:function(b){b.pageUpOrDown({direction:"down",select:!0});return!0}},{name:"goto start",exec:function(b){b.gotoDocumentStart(Object.assign({},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!!b.activeMark}));return!0}},{name:"goto end",exec:function(b){b.gotoDocumentEnd(Object.assign({},
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!!b.activeMark}));return!0}},{name:"goto paragraph above",exec:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!!b.activeMark},g=b.paragraphRangeAbove(b.cursorPosition.row);g.start.row--;b.selection.lead=g.start;c.select||b.collapseSelection();return!0}},{name:"goto paragraph below",exec:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!!b.activeMark},g=b.paragraphRangeBelow(b.cursorPosition.row);
g.end.row++;b.selection.lead=g.end;c.select||b.collapseSelection();return!0}},{name:"move cursor to screen bottom in 1/3 steps",readOnly:!0,exec:function(b){var c=!!b.activeMark,g=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),d=b.textLayout.lastFullVisibleLine(b),f=a+Math.floor((d-a)/2);if(g.row<a)g.row=a;else if(g.row<f)g.row=f;else if(g.row<d)g.row=d;else return!0;b.selection.lead=g;c||(b.selection.anchor=b.selection.lead);return!0}},{name:"move cursor to screen top in 1/3 steps",readOnly:!0,
exec:function(b){var c=!!b.activeMark,g=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),d=b.textLayout.lastFullVisibleLine(b),f=a+Math.floor((d-a)/2);if(g.row<=a)return!0;g.row=g.row<=f?a:g.row<=d?f:d;b.selection.lead=g;c||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto line",exec:function(){var b=Cb(regeneratorRuntime.mark(function a(g){var d,f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return d=!!g.activeMark,k.t0=Number,k.next=4,g.world().prompt("Enter line number");
case 4:return k.t1=k.sent,f=(0,k.t0)(k.t1),isNaN(f)||(d?g.selection.lead={row:f,column:0}:g.cursorPosition={row:f,column:0},g.scrollCursorIntoView(),g.focus()),k.abrupt("return",!0);case 8:case "end":return k.stop()}},a)}));return function(g){return b.apply(this,arguments)}}()},{name:"join line",exec:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{withLine:"before"},g=b.selection,a=g.start,d=g.end;g=g.lead;if(!b.selection.isEmpty()){if(a.row===d.row)return!0;c=b.undoManager.ensureNewGroup(b,
"join line");d=uj.arr.range(0,d.row-1-a.row).map(function(f){return b.joinLine(a.row)});b.undoManager.group(c);b.selection.isMultiSelection&&(b.cursorPosition=d[0],d.slice(1).forEach(function(f){return b.selection.addRange({start:f,end:f})}));return!0}d=g.row;if("before"===c.withLine&&0>=d||"after"===c.withLine&&d>=b.document.endPosition.row)return!0;b.undoManager.group();b.cursorPosition=b.joinLine("before"===c.withLine?d-1:d);b.undoManager.group();return!0}},{name:"split line",exec:function(b){var c=
b.cursorPosition,g=b.getLine(c.row).match(/^\s*/)[0].length;b.insertText("\n"+" ".repeat(g),c);b.cursorPosition=c;return!0}},{name:"insert line",exec:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{where:"above"},g=b.cursorPosition.row,a=b.getLine(g).match(/^\s*/)[0].length;"below"===c.where&&g++;b.insertText(" ".repeat(a)+"\n",{column:0,row:g});b.cursorPosition={column:a,row:g};return!0}},{name:"duplicate line or selection",exec:function(b){b.undoManager.group();var c=b.selection.end;
if(b.selection.isEmpty())b.insertText(b.getLine(c.row)+"\n",{column:0,row:c.row+1});else{var g=b.selection.range;b.insertText(b.selection.text,c);b.selection=g}b.undoManager.group();return!0}},{name:"delete emtpy line or until end of line",exec:function(b){var c=b.cursorPosition,g=b.getLine(c.row);if(uj.eqPosition(b.document.endPosition,c))return!0;c=g.trim()?{start:c,end:{row:c.row,column:g.length}}:{start:{row:c.row,column:0},end:{row:c.row+1,column:0}};b.env.eventDispatcher.doCopy(b.textInRange(c));
b.undoManager.group();b.deleteText(c);b.undoManager.group();return!0}},{name:"delete left until beginning of line",exec:function(b){b.activeMark&&(b.activeMark=null);if(!b.selection.isEmpty())return b.selection.text="",!0;var c=b.lineRange(),g=b.cursorPosition;if(uj.eqPosition({row:g.row,column:0},g))return!0;c={start:uj.eqPosition(c.start,g)?{row:g.row,column:0}:c.start,end:g};b.deleteText(c);return!0}},{name:"move lines up",multiSelectAction:"single",exec:function(b){var c=b.selection;if(b.inMultiSelectMode()){var g=
c.selections.map(function(f){return f.range});g.slice().sort(uj.Range.compare).forEach(function(f){b.selection=f;b.execCommand("move lines up")});g.forEach(function(f){f.start.row--;f.end.row--});b.selection.ranges=g;return!0}c.isEmpty()||0!==c.end.column||c.growRight(-1);g=c.start;c=c.end;var a=b.getLine(g.row-1),d=b.undoManager.ensureNewGroup(b);b.insertText(a+"\n",{row:c.row+1,column:0});b.deleteText({start:{row:g.row-1,column:0},end:{row:g.row,column:0}});b.undoManager.group(d);return!0}},{name:"move lines down",
multiSelectAction:"single",exec:function(b){var c=b.selection;if(b.inMultiSelectMode()){var g=c.selections.map(function(f){return f.range});g.slice().sort(uj.Range.compare).reverse().forEach(function(f){b.selection=f;b.execCommand("move lines down")});g.forEach(function(f){f.start.row++;f.end.row++});b.selection.ranges=g;return!0}c.isEmpty()||0!==c.end.column||c.growRight(-1);var a=c.range,d=a;g=d.start;d=d.end;c.isEmpty()?a={start:{row:g.row,column:0},end:{row:g.row+1,column:0}}:0!==d.column&&(a=
{start:g,end:{row:d.row+1,column:0}});c=b.undoManager.ensureNewGroup(b);a=b.deleteText(a);b.insertText(a,{row:g.row+1,column:0});b.undoManager.group(c);b.selection={start:Object.assign({},g,{row:g.row+1}),end:Object.assign({},d,{row:d.row+1})};return!0}},{name:"old select word",exec:function(b){var c=b.selection;c.range=b.wordAt(c.lead).range;return!0}},{name:"select word",exec:function(b){var c=b.selection;if(b=b.selectMatchingBrackets(b.textString,b.positionToIndex(c.lead)))c.range={start:b[0],
end:b[1]+1};return!0}},{name:"select word right",exec:function(b){var c=b.selection;c.anchor=b.wordRight(c.end).range.end;return!0}},{name:"goto word left",exec:function(b){var c=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!1}).select||!!b.activeMark,g=b.wordLeft().range;b.selection.lead=g.start;c||(b.selection.anchor=g.start);return!0}},{name:"goto word right",exec:function(b){var c=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!1}).select||!!b.activeMark,g=
b.wordRight().range;b.selection.lead=g.end;c||(b.selection.anchor=g.end);return!0}},{name:"delete word right",exec:function(b){b.undoManager.group();var c=b.wordRight().range.end;c={start:b.cursorPosition,end:c};b.env.eventDispatcher.doCopy(b.textInRange(c));b.deleteText(c);b.undoManager.group();return!0}},{name:"delete word left",exec:function(b){b.undoManager.group();var c={start:b.wordLeft().range.start,end:b.cursorPosition};b.deleteText(c);b.undoManager.group();return!0}},{name:"goto matching right",
exec:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!!b.activeMark},g=c.pairs||{"{":"}","[":"]","(":")","<":">"};if(g=b.findMatchingForward(b.cursorPosition,"right",g)||b.findMatchingForward(b.cursorPosition,"left",g))b.selection.lead=g,c.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto matching left",exec:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!!b.activeMark},g=c.pairs||{"}":"{","]":"[",")":"(",">":"<"};
if(g=b.findMatchingBackward(b.cursorPosition,"left",g)||b.findMatchingBackward(b.cursorPosition,"right",g))b.selection.lead=g,c.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"realign top-bottom-center",doc:"Cycles through centering the cursor position, aligning it at the top, aligning it at the bottom.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){var c=b.charBoundsFromTextPosition(b.cursorPosition),g=c.topLeft();c=b.height-c.height;var a=b.scroll,d=a.x;a=a.y;
a=2>Math.abs(g.y-a)?g.y-c:2>Math.abs(g.y-a-.5*c)?g.y:g.y-.5*c;b.scroll=uj.pt(d,a);return!0}},{name:"reverse selection",doc:"switches the selection lead and anchor",exec:function(b){var c=b.selection;if(c.isEmpty()){var g=b.popSavedMark();g&&(b.saveMark(b.cursorPosition),c.lead=g.position)}else c.reverse();return!0}},{name:"toggle active mark",doc:"....",handlesCount:!0,multiSelectAction:"single",exec:function(b,c,g){var a=b.activeMark;c=b.selection;var d=!c.isEmpty();if(4===g){if(b=b.popSavedMark())c.lead=
b.position,d||(c.anchor=c.lead);return!0}if(!a&&!d)return b.activeMark=c.lead,!0;b.saveMark(a||c.anchor);b.activeMark=null;d&&(b.inMultiSelectMode()?c.selections:[c]).forEach(function(f){return f.anchor=f.lead});return!0}},{name:"fit text to column",handlesCount:!0,multiSelectAction:"forEach",exec:function(b,c,g){function a(p,q,r){if(p.length<=d)return[q+p.trim()];r=p.slice(0,d);var u=uj.arr.last(uj.string.reMatches(r,k)),x=u&&0<u.start?u.start:d;u=r.slice(0,x);p=q+(r.slice(x)+p.slice(d)).trimLeft();
return[u].concat(a(p,q))}if(4===g)return b.execCommand("join line");b.selection.isEmpty()&&b.selectLine();c=b.selection;var d=g||80,f=c.selectedRows;g=c.range;var k=/[ ]+/g,n=/^[\s\t]+/;c=uj.string.paragraphs(uj.arr.range(f.first,f.last).map(function(p){return b.getLine(p)}).join("\n"),{keepEmptyLines:!0});c=uj.chain(c.map(function(p){if(!/^\s*$/.test(p)){p=p.split("\n").join(" ");if(""===p.trim())p=[""];else{var q=p.match(n);q=q?q[0]:"";p=a(q+p.trim(),q)}p=p.join("\n")+"\n"}return p})).flat().value().join("\n");
b.undoManager.group();b.replace(g,c);b.undoManager.group();return!0}},{name:"lowercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toLowerCase();b.undoManager.group();return!0}},{name:"remove trailing whitespace",exec:function(b){b.undoManager.group();var c=0;b.withLinesDo(0,b.documentEndPosition.row,function(g,a){return g.match(/\s+$/)&&++c&&b.replace(a,g.trimRight())});b.world().setStatusMessage("".concat(c," lines cleaned up"));
b.undoManager.group();return!0}},{name:"uppercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toUpperCase();b.undoManager.group();return!0}},{name:"newline",exec:function(b){var c=b.cursorPosition,g=b.getLine(c.row),a=g.match(/^\s*/)[0].length;b.undoManager.group();!g.trim()&&a&&(b.deleteText({start:{row:c.row,column:0},end:{row:c.row,column:a}}),c.column=0);if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&
b.editorPlugin.cmd_newline(c,g,a))return!0;b.selection.text="\n"+" ".repeat(a);b.selection.collapseToEnd();b.undoManager.group();return!0}},{name:"insertstring",exec:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{string:null,undoGroup:!1},g=c.string;c=c.undoGroup;var a="string"===typeof g&&g.length;a||console.warn("command insertstring called with not string value");if(b.rejectsInput()||!a)return!1;b.saveActiveMarkAndDeactivate();if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_insertstring&&
b.editorPlugin.cmd_insertstring(g))return!0;a=b.selection;var d=!a.isEmpty();d&&b.undoManager.group();var f=a.lead;a.replace(g,!0,!0,!0,!(1===g.length&&"\n"!==g&&0<f.column));a.collapseToEnd();d&&b.undoManager.group();c&&(/^[\s\.,\?\+=]+$/.test(g)||"number"!==typeof c?b.undoManager.group():b.undoManager.groupLater(c));return!0}},{name:"toggle line wrapping",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.keepPosAtSameScrollOffsetWhile(function(){return b.lineWrapping=b.lineWrapping?
!1:b.fontMetric.isProportional(b.fontFamily)?!0:"by-chars"});return!0}},{name:"cancel input",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b,c,g,a){b.env.eventDispatcher.resetKeyInputState();b.selection.disableMultiSelect&&b.selection.disableMultiSelect();b.selection.isEmpty()||(b.selection.anchor=b.selection.lead);b.activeMark&&(b.activeMark=null);return!0}}];uj.usefulEditorCommands=[{name:"insert date",handlesCount:!0,exec:function(b,c,g){c=uj.date.format(new Date,g?"mediumDate":
"isoDate");b.undoManager.group();b.insertText(c);b.undoManager.group();return!0}},{name:"[todo] toggle todo marker",exec:function(b){var c=b.selection;c.isEmpty()&&b.selectLine();b=/\[\s*\]/g;var g=/\[X\]/g,a=c.text;a=b.test(a)?a.replace(b,"[X]"):g.test(a)?a.replace(g,"[ ]"):"[ ] "+a.trimLeft();c.text=a;return!0}},{name:"selected lines: sort",exec:function(b){var c=b.selection,g=c.start.row;c=c.end.row;var a=[];b.withLinesDo(g,c,function(d){var f=a.findIndex(function(k){return k>d});-1<f?a.splice(f,
0,d):a.push(d)});b.undoManager.group();b.replace({start:{row:g,column:0},end:{row:c+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: reverse",exec:function(b){var c=b.selection,g=c.start.row;c=c.end.row;var a=[];b.withLinesDo(g,c,function(d){return a.push(d)});b.undoManager.group();b.replace({start:{row:g,column:0},end:{row:c+1,column:0}},a.reverse().join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: remove duplicates (uniq)",exec:function(b){var c=
b.selection,g=c.start.row;c=c.end.row;var a=[];b.withLinesDo(g,c,function(d){return uj.arr.pushIfNotIncluded(a,d)});b.undoManager.group();b.replace({start:{row:g,column:0},end:{row:c+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"change string inflection",handlesCount:!0,multiSelectAction:"single",exec:function(){var b=Cb(regeneratorRuntime.mark(function f(g,a,d){var k,n,p,q,r,u,x,y,D;return regeneratorRuntime.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:D=function(I){return I.match(/[A-Z]/)?
"uppercased":I.match(/-/)?"dashed":I.match(/\s/)?"spaced":"unknown"};y=function(I,N){var J,sa,ja=D(I).trim();"uppercased"===ja?J=/\s*[A-Z0-9]+/g:"dashed"===ja?J=/-\w/g:"spaced"===ja&&(J=/\s+.?/g);"uppercased"===N?sa=function(Ha){return Ha.trim().replace(/^-/,"").toUpperCase()}:"dashed"===N?sa=function(Ha){return"-"+Ha.trim().replace(/^-/,"").toLowerCase()}:"spaced"===N&&(sa=function(Ha){return" "+Ha.trim().replace(/^-/,"").toLowerCase()});return I.replace(J,sa)};g.selection.isEmpty()&&(g.selection=
g.wordAt().range);k=g.selection.ranges;if(n=g.textInRange(k[0])){H.next=8;break}g.setStatusMessage("Please select some text");return H.abrupt("return",!0);case 8:return p=D(n),q=uj.arr.without(["uppercased","dashed","spaced"],p),H.next=12,g.world().listPrompt("Convert "+p+" into?",q,{});case 12:r=H.sent;u=Wb(r.selected,1);if(x=u[0]){H.next=17;break}return H.abrupt("return",!0);case 17:return g.undoManager.group(),k.forEach(function(I,N){N=g.textInRange(I);N=y(N,x);g.replace(I,N)}),g.undoManager.group(),
g.focus(),H.abrupt("return",!0);case 22:case "end":return H.stop()}},f)}));return function(g,a,d){return b.apply(this,arguments)}}()},{name:"spell check word",exec:function(){var b=Cb(regeneratorRuntime.mark(function d(g,a){var f,k,n,p,q,r,u;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:f=g.wordAt();if(f.string){x.next=4;break}g.setStatusMessage("no word for spellcheck!");return x.abrupt("return",!0);case 4:return x.next=6,Dd.import("./spell-checker-de66410c.js");
case 6:return k=x.sent,n=k.spellCheckWord,x.next=10,n(f.string);case 10:p=x.sent;if(p.length){x.next=14;break}g.setStatusMessage("no suggestions for word "+f.string);return x.abrupt("return",!0);case 14:return x.next=16,g.world().filterableListPrompt("Choose replacement for "+f.string,p);case 16:q=x.sent;r=Wb(q.selected,1);if(u=r[0])g.undoManager.group(),g.replace(f.range,u),g.undoManager.group();return x.abrupt("return",!0);case 21:case "end":return x.stop()}},d)}));return function(g,a){return b.apply(this,
arguments)}}()},{name:"[shell] run shell command on region",multiSelectAction:"single",exec:function(){var b=Cb(regeneratorRuntime.mark(function d(g,a){var f,k,n,p,q,r,u;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return k=(f=g.textInRange(g.selection))&&0!==f.length?{stdin:f}:{},x.next=4,g.world().prompt("Enter shell command to run on region.",{historyId:"lively.ide.execShellCommand"});case 4:return n=x.sent,x.next=7,Promise.resolve().then(function(){return rT});
case 7:p=x.sent;q=p.runCommand;if(n){x.next=11;break}return x.abrupt("return",g.setStatusMessage("No command entered, aborting...!"));case 11:return r=q(n,k),x.prev=12,x.next=15,r.whenDone();case 15:u=r.output.trim();g.undoManager.group();g.selection.selections.forEach(function(y){return y.text=u});g.undoManager.group();x.next=24;break;case 21:x.prev=21,x.t0=x["catch"](12),g.showError(x.t0);case 24:return x.abrupt("return",!0);case 25:case "end":return x.stop()}},d,null,[[12,21]])}));return function(g,
a){return b.apply(this,arguments)}}()},{name:"open file at cursor",exec:function(){var b=Cb(regeneratorRuntime.mark(function d(g,a){var f,k,n,p,q,r,u,x,y;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return g.getLine(),f=g.cursorPosition.row,k=g.document.scanBackward(g.cursorPosition,function(H,I){return(0>=I.column||H.match(/\s/))&&I})||{row:0,column:0},n=g.document.scanForward(g.cursorPosition,function(H,I){return(I.row!=f||H.match(/\s/))&&I})||g.documentEndPosition,
p=g.textInRange({start:k,end:n}).replace(/\s/g,""),q=p.split(":"),r=q[0].match(/^file|http/)?"".concat(q.shift(),":").concat(q.shift()):q.shift(),q[0].match(/^[0-9]+$/)&&(r+=":"+q.shift()),D.next=10,Dd.import("./text-editor-7eb763f4.js");case 10:return u=D.sent,x=u["default"],y=x.openInWindow(),y.location=r,D.abrupt("return",y);case 15:case "end":return D.stop()}},d)}));return function(g,a){return b.apply(this,arguments)}}()},{name:"run code on text morph",doc:"...",exec:function(){var b=Cb(regeneratorRuntime.mark(function d(g,
a){var f,k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return f={targetModule:"lively://code-on-text-morph",context:g},q.next=3,g.world().editPrompt("Run code on selection. Use this.selection.text to access it",{requester:g,mode:"js",evalEnvironment:f,historyId:"run-code-on-text-morph-hist"});case 3:return k=q.sent,q.prev=4,g.undoManager.group(),q.next=8,lively.vm.runEval(k,f);case 8:p=q.sent;g.undoManager.group();n=p.isError?p.value:null;q.next=16;break;case 13:q.prev=
13,q.t0=q["catch"](4),n=q.t0;case 16:return n&&g.showError(n),q.abrupt("return",void 0);case 18:case "end":return q.stop()}},d,null,[[4,13]])}));return function(g,a){return b.apply(this,arguments)}}()},{name:"change editor mode",exec:function(){var b=Cb(regeneratorRuntime.mark(function a(g){var d,f,k,n,p,q,r,u,x;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return d=function(D){return!D.endsWith("ide/editor-plugin.js")&&D.endsWith("editor-plugin.js")},y.next=3,lively.modules.getPackage("lively.ide").resources(d);
case 3:return f=y.sent,k=g.editorPlugin||{},n=k.shortName,p=0,q=["<no mode>"].concat(f.map(function(D,H){var I=D.url.match(/([^\/]+)\/editor-plugin.js/)[1];I===n&&(p=H);return{isListItem:!0,string:I,value:D}})),y.next=9,g.world().filterableListPrompt("choose mode",q,{requester:g,preselect:p,historyId:"lively.morphic/text-change-editor-mode-hist",fuzzy:!0});case 9:r=y.sent;u=Wb(r.selected,1);if(x=u[0]){y.next=14;break}return y.abrupt("return");case 14:if("<no mode>"!==x){y.next=19;break}y.next=17;
return g.changeEditorMode(null);case 17:return g.resetTextAttributes(),y.abrupt("return");case 19:if(x.isLoaded){y.next=22;break}y.next=22;return lively.modules.module(x.url).load();case 22:return y.next=24,g.changeEditorMode(x.url);case 24:case "end":return y.stop()}},a)}));return function(g){return b.apply(this,arguments)}}()},{name:"report token at cursor",exec:function(){var b=Cb(regeneratorRuntime.mark(function a(g){var d,f,k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=
p.next){case 0:return d=g.tokenAt(g.cursorPosition)||{},f=d.token,k=d.start,n=d.end,g.setStatusMessage(f?"".concat(f," ").concat(k.column," => ").concat(n.column):"no token"),p.abrupt("return",!0);case 3:case "end":return p.stop()}},a)}));return function(g){return b.apply(this,arguments)}}()}];(uV=uj.commands).push.apply(uV,db(uj.usefulEditorCommands));uj.iyGotoCharActivate=zI;uj.commands.push(uj.iyGotoCharActivate);uj.searchCommands=yI;(vV=uj.commands).push.apply(vV,db(uj.searchCommands));var wV=
uj.commands;uj["default"]=wV;var tf=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js");tf.Rectangle=fn;tf.Point=kt;tf.rect=ko;tf.Color=Bn;tf.pt=wl;tf.string=Xj;tf.num=Gm;tf.obj=bj;tf.fun=cp;tf.promise=yj;tf.arr=aj;tf.signal=Ln;tf.noUpdate=ju;tf.disconnect=hu;tf.morph=Sm;tf.touchInputDevice=bq;tf.sanitizeFont=pu;tf.config=Jm;tf.Morph=gp;tf.Selection=vI;tf.MultiSelection=wI;tf.Document=qV;tf.objectReplacementChar=BB;tf.Anchor=xy;tf.Range=Ft;tf.eqPosition=Lq;tf.lessPosition=Tp;
tf.KeyHandler=YA;tf.UndoManager=XA;tf.TextSearcher=xI;tf.TextLayout=sV;tf.Renderer=tV;tf.extractHTMLFromTextMorph=UF;tf.commands=wV;tf.textAndAttributesWithSubRanges=SF;tf.serializeMorph=ww;tf.deserializeMorph=SC;tf.getSvgVertices=pw;tf.renderSubTree=zC;tf.ShadowObject=Pr;tf.getClassName=Mo;var Ev=bd("h",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js"),g=c.hasOwnProperty("Text")&&"function"===typeof c.Text?c.Text:c.Text=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=a.position,f=a.rightCenter,k=a.leftCenter,n=a.topCenter,p=a.bottom,q=a.top,r=a.right,u=a.left,x=a.bottomCenter,y=a.bottomLeft,D=a.bottomRight,H=a.topRight,I=a.topLeft,N=a.center;Ve._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.undoManager.reset();this.fit();void 0!==d&&(this.position=
d);void 0!==f&&(this.rightCenter=f);void 0!==k&&(this.leftCenter=k);void 0!==n&&(this.topCenter=n);void 0!==p&&(this.bottom=p);void 0!==q&&(this.top=q);void 0!==r&&(this.right=r);void 0!==u&&(this.left=u);void 0!==x&&(this.bottomCenter=x);void 0!==y&&(this.bottomLeft=y);void 0!==D&&(this.bottomRight=D);void 0!==H&&(this.topRight=H);void 0!==I&&(this.topLeft=I);void 0!==N&&(this.center=N)}},{key:"__deserialize__",value:function(a,d,f,k){Ve._get(Object.getPrototypeOf(g.prototype),"__deserialize__",
this).call(this,a,d,f,k);this.viewState=this.defaultViewState;this.markers=[];this.textRenderer=new tf.Renderer(this.env);this.textLayout=new tf.TextLayout(this);this.changeDocument(tf.Document.fromString(""));this.ensureUndoManager();a.cachedLineBounds&&(this._initializedByCachedBounds=a.cachedLineBounds);this._isDeserializing=!0}},{key:"__after_deserialize__",value:function(a,d,f){var k=this;Ve._get(Object.getPrototypeOf(g.prototype),"__after_deserialize__",this).call(this,a,d,f);this._isDeserializing=
!1;this.whenRendered().then(function(){k.embeddedMorphs.forEach(function(n){return n.top=0})})}},{key:"__only_serialize__",get:function(){return tf.arr.withoutAll(Ve._get(Object.getPrototypeOf(g.prototype),"__only_serialize__",this),["document","textRenderer","viewState","undoManager","markers","textLayout","embeddedMorphMap",this.displacingMorphMap.size?"":"displacingMorphMap"])}},{key:"__additionally_serialize__",value:function(a,d,f,k){Ve._get(Object.getPrototypeOf(g.prototype),"__additionally_serialize__",
this).call(this,a,d,f,k);a.props.selections={key:"selections",verbatim:!0,value:(this.selection.isMultiSelection?this.selection.ranges:[this.selection.range]).map(function(I){return tf.obj.select(I,["start","end"])})};a.props.anchors&&this.selection.isEmpty()&&(a.props.anchors.value=a.props.anchors.value.filter(function(I){return!I.id.includes("selection-")}));a.props.textAndAttributes={key:"textAndAttributes",value:this.textAndAttributes.map(function(I){if(!I)return I;if(I.isMorph)return f.ref(I).asRefForSerializedObjMap();
if(tf.obj.isObject(I)){var N={};I=JSON.stringify(I,function(J,sa){return sa&&sa.__serialize__?(sa=sa.__serialize__(),Object.assign(N,sa.bindings),"->"+"[".concat(sa.__expr__,"]")):sa});I=I.replace(/"->\[.*\]"/g,function(J){return J.slice(4,-2)});return f.expressionSerializer.exprStringEncode({__expr__:"(".concat(I,")"),bindings:N})}return I})};d=[];k=fa(this.document.lines);var n;try{for(k.s();!(n=k.n()).done;){var p=n.value,q=this.textLayout.lineCharBoundsCache.get(p);if(q){var r=[],u=void 0,x=0;
if(q){var y=fa(q),D;try{for(y.s();!(D=y.n()).done;){var H=D.value;if(u){if(tf.num.roundTo(u.width,.001)===tf.num.roundTo(H.width||0,.001)&&H.height===u.height){x++;continue}r.push([x,tf.num.roundTo(u.width||0,.001),u.height||0])}x=1;u=H}}catch(I){y.e(I)}finally{y.f()}}u&&r.push([x,tf.num.roundTo(u.width||0,.001),u.height||0]);d.push([p.row,r.flat()])}}}catch(I){k.e(I)}finally{k.f()}a.cachedLineBounds=d}},{key:"spec",value:function(){var a=Ve._get(Object.getPrototypeOf(g.prototype),"spec",this).call(this);
a.textString=this.textString;return tf.obj.dissoc(a,"anchors embeddedMorphMap plugins savedMarks textLayout textRenderer viewState undoManager metadata document displacingMorphMap".split(" "))}},{key:"isText",get:function(){return!0}},{key:"makeDirty",value:function(){this._positioningSubmorph||Ve._get(Object.getPrototypeOf(g.prototype),"makeDirty",this).call(this)}},{key:"onChange",value:function(a){var d=this,f=a.prop,k=a.selector,n=a.meta,p=this.lineWrapping,q=!1,r=!1,u=!1,x=!1,y=!1,D=!1;if(k)q=
"replace"===k,x="addTextAttribute"===k,this._displacementChange=!this._displacing&&q;else switch(f){case "scroll":y=r=!0;break;case "extent":r=!0;f=a.prevValue.subPt(a.value);D=(u=this.fixedWidth&&!!this.lineWrapping&&!!f.x)&&(!this.fixedWidth||!this.fixedHeight);break;case "wordSpacing":case "letterSpacing":case "tabWidth":p&&(x=!0);break;case "fontFamily":case "fontSize":case "lineHeight":case "textAlign":case "fontWeight":case "fontStyle":case "textStyleClasses":case "fixedWidth":x=a.prevValue!==
a.value;break;case "lineWrapping":x=!0;break;case "borderWidth":case "fixedHeight":u=a.prevValue!==a.value;break;case "padding":u=!0}Ve._get(Object.getPrototypeOf(g.prototype),"onChange",this).call(this,a);f=function(){d._textChange=!0;y&&(d.viewState.wasScrolled=!0);(x||D||u&&!n.styleSheetChange)&&d.invalidateTextLayout(x,x);(u||x)&&d.document&&d.world()&&d.document.lines.forEach(function(H){return H.hasEstimatedExtent=!0});d._displacementChange&&(d._displacementChange=!1);q&&tf.signal(d,"textChange",
a);r&&tf.signal(d,"viewChange",a);d._textChange=!1};n.animation?tf.promise.delay(n.animation.duration).then(f):this.ownerChain().every(function(H){return H.visible})&&f()}},{key:"onSubmorphChange",value:function(){var a=Cb(regeneratorRuntime.mark(function n(f,k){var p=this,q,r,u,x,y,D,H,I;return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(!f.meta||!f.meta.styleSheetChange){N.next=2;break}return N.abrupt("return");case 2:Ve._get(Object.getPrototypeOf(g.prototype),"onSubmorphChange",
this).call(this,f,k);if(!f.meta.animation){N.next=6;break}N.next=6;return f.meta.animation.asPromise();case 6:if(!this._textChange&&this._positioningSubmorph!==k){N.next=8;break}return N.abrupt("return");case 8:q=f.prop;r="position"===q||"extent"===q||"scale"===q||"rotation"===q;this.displacingMorphMap.get(k)&&r&&db(this.displacingMorphMap.keys()).filter(function(J){return J.top>=k.top}).forEach(function(J){p._intersectionShapeCache&&p._intersectionShapeCache["delete"](J);p.updateTextDisplacementFor(J)});
u=this.embeddedMorphMap.get(k)||{};x=u.anchor;if(!x||!r){N.next=23;break}if("position"!==q){N.next=18;break}this._positioningSubmorph=k;k.position=f.prevValue;this._positioningSubmorph=null;return N.abrupt("return");case 18:y=k.bounds(),D=k._lastBounds,H=x.position.row,I=this.document.getLine(H),D&&D.height===y.height&&D.bottom()===y.bottom()||(I.hasEstimatedExtent=!0,k._lastBounds=y);case 23:case "end":return N.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"removeMorph",
value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,f=this.embeddedMorphMap,k=this.displacingMorphMap;k&&k.has(a)&&this.toggleTextWrappingAround(a,!1);if(f&&f.has(a)){if(k=f.get(a).anchor){var n=k.position;k=n.row;n=n.column;this.replace({start:{row:k,column:n},end:{row:k,column:n+1}},[],!0,d);this.replace}f["delete"](a)}return Ve._get(Object.getPrototypeOf(g.prototype),"removeMorph",this).call(this,a)}},{key:"toggleTextWrappingAround",value:function(a,d){var f=this;
if(d)this.displacingMorphMap.has(a)||(this.embeddedMorphMap.has(a)&&this.addMorph(a.remove()),this.displacingMorphMap.set(a,[]),this.updateTextDisplacementFor(a));else if(d=this.displacingMorphMap.get(a))this._displacing=!0,d.forEach(function(k){return f.removeMorph(k)}),this._displacing=!1,this.displacingMorphMap["delete"](a)}},{key:"updateTextDisplacementFor",value:function(a){var d=this;if(!this._displacing){this._displacing=!0;var f=this.displacingMorphMap.get(a),k=this.computeDisplacementRectsFor(a).values(),
n=[];f.forEach(function(y){return d.removeMorph(y,!1)});this.textLayout.resetLineCharBoundsCacheOfRange(this,a._displacementRange);k=fa(k);var p;try{for(k.s();!(p=k.n()).done;){var q=p.value,r=f.shift()||tf.morph({visible:!0,reactsToPointer:!1,isDisplacementMorph:!0}),u=this.textLayout.textPositionFromPoint(this,q.leftCenter());r.setBounds(q);this.insertText([r,{}],u);this.viewState._needsFit=!1;if(x===r.top)r.remove();else{var x=r.top;n.push(r)}}}catch(y){k.e(y)}finally{k.f()}f.forEach(function(y){return d.removeMorph(y,
!1)});this.displacingMorphMap.set(a,n);this._displacing=!1}}},{key:"computeDisplacementRectsFor",value:function(a){var d=this.textLayout,f=d.textPositionFromPoint(this,a.topLeft),k=d.textPositionFromPoint(this,a.bottomLeft),n=[];a._displacementRange=tf.Range.fromPositions(f,k);for(f=f.row;f<k.row+1;f++)n.push.apply(n,db(d.rangesOfWrappedLine(this,f)));this._intersectionShapeCache||(this._intersectionShapeCache=new Map);(k=this._intersectionShapeCache.get(a))||(k=a.isPath?Shapes.path(tf.getSvgVertices(a.vertices)):
"Ellipse"===tf.getClassName(a)?Shapes.ellipse(a.center.x,a.center.y,a.width/2,a.height/2):Shapes.rectangle(a.left,a.top,a.width,a.height));this._intersectionShapeCache.set(a,k);a=this.width;f=new Map;for(var p=0;p<n.length;p++){var q=n[p],r=d.computeMaxBoundsForLineSelection(this,q),u=r.height;r=r.y;var x=Shapes.rectangle(a,u,0,r);x=Intersection.intersect(x,k);1>x.points.length||(x=tf.Rectangle.unionPts(x.points.map(tf.Point.fromLiteral)),x.y=r,x.height=u,x.x-=15,x.width+=30,f.set(q,x))}return f}},
{key:"rejectsInput",value:function(){return this.readOnly}},{key:"addAnchor",value:function(a){if(a){"string"===typeof a&&(a={id:a,row:0,column:0});if(!a.isAnchor){var d=a,f=d.column,k=d.row;a=new tf.Anchor(d.id,"number"===typeof k&&"number"===typeof f?{row:k,column:f}:void 0,d.insertBehavior||"move")}if(d=a.id&&this.anchors.find(function(n){return n.id===a.id}))return Object.assign(d,a);this.anchors.push(a);return a}}},{key:"removeAnchor",value:function(a){for(var d=this.anchors,f,k=d.length;k--;){var n=
d[k];if(n.id===a||n===a)f=n,d.splice(k,1)}return f}},{key:"addMarker",value:function(a){this.removeMarker(a.id);this.markers.push(a);this.makeDirty();return a}},{key:"removeMarker",value:function(a){var d="string"===typeof a?a:a.id;this.markers=this.markers.filter(function(f){return f.id!==d});this.makeDirty()}},{key:"saveMark",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition,d=1<arguments.length?arguments[1]:void 0,f=this.activeMark;f&&f!==a&&!f.equalsPosition(a)&&
(this.savedMarks=this.savedMarks.concat(f));d?this.activeMark=a:this.savedMarks=this.savedMarks.concat(a)}},{key:"saveActiveMarkAndDeactivate",value:function(){var a=this.activeMark;a&&(this.saveMark(a),this.activeMark=null)}},{key:"popSavedMark",value:function(){var a=this.activeMark;if(a)return this.activeMark=null,a;a=tf.arr.last(this.savedMarks);this.savedMarks=this.savedMarks.slice(0,-1);return a}},{key:"lastSavedMark",get:function(){return this.activeMark||tf.arr.last(this.savedMarks)}},{key:"savedMarkForSelection",
value:function(a){var d=this.selection,f=this.savedMarks,k=this.multiSelect?this.multiSelect.getAllRanges().length:1;k=f.length-(k-(d.index||0));d=f[k]||d.anchor;a&&"row"in a&&"column"in a&&(this.savedMarks=f.slice(0,k).concat(a).concat(f.slice(k+1)));return d}},{key:"addPlugin",value:function(a){this.plugins.includes(a)||(this.plugins.push(a),this._cachedKeyhandlers=null,"function"===typeof a.attach&&a.attach(this));return a}},{key:"removePlugin",value:function(a){if(!this.plugins.includes(a))return!1;
this._cachedKeyhandlers=null;tf.arr.remove(this.plugins,a);"function"===typeof a.detach&&a.detach(this);return!0}},{key:"pluginCollect",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];this.plugins.forEach(function(f){return"function"===typeof f[a]&&(d=f[a](d))});return d}},{key:"pluginInvokeFirst",value:function(a){for(var d=this.pluginFind(function(p){return"function"===typeof p[a]}),f=arguments.length,k=Array(1<f?f-1:0),n=1;n<f;n++)k[n-1]=arguments[n];return d?
d[a].apply(d,k):void 0}},{key:"pluginFind",value:function(a){return this.plugins.slice().reverse().find(a)}},{key:"editorPlugin",get:function(){return this.pluginFind(function(a){return a.isEditorPlugin})}},{key:"lookupEditorPluginNamed",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p,q,r;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return f=tf.config.ide.modes.aliases[f]||f,p=(n=/^[^:\\]+:\/\//.test(f))?f:"lively.ide/".concat(f,"/editor-plugin.js"),
u.next=5,lively.modules.doesModuleExist(p);case 5:if(u.sent){u.next=7;break}return u.abrupt("return",null);case 7:return u.next=9,lively.modules.module(p).load();case 9:return q=u.sent,r=q["default"],u.abrupt("return",r);case 12:case "end":return u.stop()}},k)}));return function(f){return a.apply(this,arguments)}}()},{key:"changeEditorMode",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:n=this.plugins.filter(function(r){return!r.isEditorPlugin});
if(f){q.next=4;break}this.plugins=n;return q.abrupt("return",null);case 4:if("string"!==typeof f){q.next=12;break}q.next=7;return this.lookupEditorPluginNamed(f);case 7:if(p=q.sent){q.next=10;break}throw Error("Cannot find editor mode ".concat(f));case 10:f=new p(tf.config.codeEditor.defaultTheme),this.evalEnvironment&&(f.evalEnvironment=this.evalEnvironment);case 12:return this.plugins=n.concat(f),q.abrupt("return",f);case 14:case "end":return q.stop()}},k,this)}));return function(f){return a.apply(this,
arguments)}}()},{key:"invalidateTextLayout",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!this._isDeserializing){var f=this.viewState;f&&(this.fixedWidth&&this.fixedHeight||(f._needsFit=!0),f=this.textLayout)&&(a&&f.resetLineCharBoundsCache(this),f.estimateLineHeights(this,d))}}},{key:"textBounds",value:function(){return this.textLayout.textBounds(this)}},{key:"defaultCharExtent",value:function(){return this.textLayout.defaultCharExtent(this)}},
{key:"scrollExtent",get:function(){return this.textBounds().extent().addPt(this.padding.topLeft()).addPt(this.padding.bottomRight()).addPt(this.scrollbarOffset).maxPt(Ve._get(Object.getPrototypeOf(g.prototype),"scrollExtent",this))}},{key:"commands",get:function(){return this.pluginCollect("getCommands",(this._commands||[]).concat(tf.commands))}},{key:"execCommand",value:function(a,d,f,k){function n(N){(q.hasOwnProperty("scrollCursorIntoView")?q.scrollCursorIntoView:1)&&tf.fun.debounceNamed("execCommand-scrollCursorIntoView-"+
N.id,100,function(){return N.scrollCursorIntoView()})()}var p=this,q=(this.lookupCommand(a)||{}).command;if(q){var r=this.inMultiSelectMode(),u=q.hasOwnProperty("multiSelectAction")?q.multiSelectAction:"forEach";if(r&&"forEach"===u){var x=this.selection;r=this.selection.selections.slice().reverse();this.selection=r[0];this._multiSelection=x;try{var y=this.execCommand(a,d,f,k)}catch(N){throw this.selection=x,this._multiSelection=null,this.selection.mergeSelections(),N;}if(!y)return y;var D=[y];if("function"===
typeof y.then&&"function"===typeof y["catch"])return tf.promise["finally"](tf.promise.chain([function(){return y}].concat(r.slice(1).map(function(N){return function(){p.selection=N;return Promise.resolve(p.execCommand(a,d,f,k)).then(function(J){return D.push(J)})}}))).then(function(){return D}),function(){p.selection=x;p._multiSelection=null;p.selection.mergeSelections()});try{var H=fa(r.slice(1)),I;try{for(H.s();!(I=H.n()).done;)this.selection=I.value,D.push(this.execCommand(a,d,f,k))}catch(N){H.e(N)}finally{H.f()}}finally{this.selection=
x,this._multiSelection=null,this.selection.mergeSelections()}return D}(H=this.commandHandler.exec(a,this,d,f,k))&&("function"===typeof H.then&&"function"===typeof H["catch"]?H.then(function(){return n(p)}):n(this));return H}}},{key:"changeDocument",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,f;this.document?f=this.defaultTextStyle:d=!1;this.document=a;this.textLayout.reset();d&&(this.defaultTextStyle=f);this.makeDirty();this.consistencyCheck()}},{key:"textInRange",
value:function(a){return this.document.textInRange(a)}},{key:"charRight",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition,d=a.column;return this.getLine(a.row).slice(d,d+1)}},{key:"charLeft",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition,d=a.column;return this.getLine(a.row).slice(d-1,d)}},{key:"indexToPosition",value:function(a){return this.document.indexToPosition(a)}},{key:"positionToIndex",value:function(a){return this.document.positionToIndex(a)}},
{key:"getVisibleLine",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row;return this.textLayout.wrappedLines(this)[a].text}},{key:"isLineVisible",value:function(){return this.textLayout.isLineVisible(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row)}},{key:"isLineFullyVisible",value:function(){return this.textLayout.isLineFullyVisible(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row)}},
{key:"getLine",value:function(){return this.document.getLineString(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row)}},{key:"lineCount",value:function(){return this.document.rowCount}},{key:"isLineEmpty",value:function(a){return!this.getLine(a).trim()}},{key:"isAtLineEnd",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition,d=this.getLine(a.row);return a.column===d.length}},{key:"wordsOfLine",value:function(){return this.document.wordsOfLine(0<
arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row)}},{key:"wordAt",value:function(){return this.document.wordAt(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition)}},{key:"wordLeft",value:function(){return this.document.wordLeft(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition)}},{key:"wordRight",value:function(){return this.document.wordRight(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition)}},
{key:"lineRange",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;"number"!==typeof a&&this.cursorPosition.row;var f=this.getLine(a);a={start:{column:0,row:a},end:{column:f.length,row:a}};f=f.match(/^\s*/);f[0].length&&d&&(a.start.column+=f[0].length);return new tf.Range(a)}},{key:"screenLineRange",value:function(){return this.textLayout.screenLineRange(this,0<arguments.length&&void 0!==
arguments[0]?arguments[0]:this.cursorPosition,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0)}},{key:"insertTextAndSelect",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;a=String(a);d?this.selection.range=this.insertText(a,d):this.selection.text=a}},{key:"append",value:function(a){var d=this;return this.saveExcursion(function(){return d.insertText(a,d.documentEndPosition)})}},{key:"insertText",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:this.cursorPosition;return this.replace({start:d,end:d},a,2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0)}},{key:"deleteText",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,f=this.textAndAttributesInRange(a);this.replace(a,[],!1,d);return f}},{key:"replace",value:function(a,d){var f=this,k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,n=3<arguments.length&&void 0!==arguments[3]?
arguments[3]:!0,p=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!0,q=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!0;a=a.isRange?a:new tf.Range(a);var r="string"===typeof d?[d,null]:Array.isArray(d)?d:[String(d||""),null],u=!r.length||2===r.length&&!r[0],x=a.isEmpty();if(u&&x)return a;var y;k&&(y=this.textAttributeAt({row:a.start.row,column:a.start.column-(0<a.start.column?1:0)}));var D=[];for(k=0;k<r.length;k+=2)u=r[k],x=r[k+1],u.isMorph&&D.push(u),y&&(r[k+1]=Object.assign({},
y,{},x));p&&this.undoManager.undoStart(this,"replace");var H=this.textAndAttributesInRange(a),I=this.document.replace(a,r,this.debug&&this.debugHelper(this.debug)).inserted;this.addMethodCallChangeDoing({target:this,selector:"replace",args:[a,r],undo:{target:this,selector:"replace",args:[I,H,!1]}},function(){n&&(f.invalidateTextLayout(!1,!1),f.textLayout.resetLineCharBoundsCacheOfRange(f,I));if(!tf.eqPosition(a.end,I.end)){if(tf.lessPosition(I.end,a.end)){var N=(new tf.Range(a)).subtract(I),J=Wb(N,
1)[0];f.anchors.forEach(function(ja){return ja.onDelete(J)})}else{N=(new tf.Range(I)).subtract(a);var sa=Wb(N,1)[0];f.anchors.forEach(function(ja){return ja.onInsert(sa)})}f.selectable&&(f._multiSelection?f._multiSelection.updateFromAnchors():f.getProperty("selection")&&f.selection.updateFromAnchors())}f._updateEmbeddedMorphsDuringReplace(D,I,r,H);f._isDeserializing&&f._initializedByCachedBounds||f.textLayout.estimateLineHeights(f,!1);q&&f.consistencyCheck()});p&&this.undoManager.undoStop();return I}},
{key:"_updateEmbeddedMorphsDuringReplace",value:function(a,d,f,k){for(var n=this.embeddedMorphMap,p=0;p<k.length;p+=2){var q=k[p];if(q.isMorph&&!a.includes(q)){if(n){var r=n.get(q);r&&r.anchor&&(this.removeAnchor(r.anchor),tf.disconnect(r.anchor,"position",q,"position"));n.set(q,Object.assign({},r,{anchor:null}))}q.remove()}}if(a.length)for(f=tf.textAndAttributesWithSubRanges(d.start,f),d=f.ranges,f=f.textAndAttributes,k=0;k<d.length;k++)if(p=f[2*k],p.isMorph&&(console.assert(a.includes(p),"????"),
q=d[k].start,p.owner!==this&&this.addMorph(p),n))if(n.has(p)){if(tf.__inter0__=n.get(p),r=tf.__inter0__.anchor)r.position=q}else r=this.addAnchor(Object.assign({id:"embedded-"+p.id},q)),r.embeddedMorph=p,n.set(p,{anchor:r})}},{key:"applyJsDiffPatch",value:function(a){function d(x,y,D,H){var I=k.indexToPosition(x+D),N=k.indexToPosition(y+D);H.push(k.deleteText({start:I,end:N}));return D-(y-x)}function f(x,y,D,H){H.push(k.insertText(y,k.indexToPosition(x+D)));return D}var k=this,n=[],p=0,q=0;a=fa(a);
var r;try{for(a.s();!(r=a.n()).done;){var u=r.value;u.removed?q=d(p,p+u.count,q,n):u.added&&(q=f(p,u.value,q,n));p+=u.count}}catch(x){a.e(x)}finally{a.f()}return n}},{key:"applyTextChanges",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,k=3<arguments.length?arguments[3]:void 0,n=[],p=fa(a),q;try{for(p.s();!(q=p.n()).done;){var r=Wb(q.value,3),u=r[0],x=r[1],y=r[2];if(d){var D="number"===typeof x?x:this.positionToIndex(x);
x=D+d;y&&"string"!==typeof y&&!Array.isArray(y)&&(y=("number"===typeof y?y:this.positionToIndex(y))+d);x=D+d}var H="number"===typeof x?this.indexToPosition(x):x;switch(u){case "delete":case "remove":var I="number"===typeof y?this.indexToPosition(y):y;n.push(this.deleteText({start:H,end:I},k));break;case "insert":n.push(this.insertText(y,H,f,k));break;default:console.warn("[applyTextChanges] unknown type: ".concat(u))}}}catch(N){p.e(N)}finally{p.f()}return n}},{key:"modifyLines",value:function(a,d,
f){var k=this;f=tf.arr.range(a,d).map(function(n){return k.getLine(n)}).map(f).join("\n")+"\n";this.deleteText({start:{row:a,column:0},end:{row:d+1,column:0}},!1);this.insertText(f,{row:a,column:0})}},{key:"modifySelectedLines",value:function(a){var d=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range;return this.modifyLines(d.start.row,d.end.row,a)}},{key:"withLinesDo",value:function(a,d,f){var k=this;return tf.arr.range(a,d).map(function(n){var p=k.getLine(n);n=tf.Range.create(n,
0,n,p.length);return f(p,n)})}},{key:"withSelectedLinesDo",value:function(a){var d=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range,f=d.start.row;d=d.end;var k=d.row;return this.withLinesDo(f,0===d.column&&k>f?k-1:k,a)}},{key:"joinLine",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row,d=this.getLine(a),f=this.getLine(a+1);f=d+f.replace(/^\s+/,"")+this.document.constructor.newline;this.replace({start:{column:0,row:a},end:{column:0,
row:a+2}},f,!0);return{row:a,column:d.length}}},{key:"whatsVisible",get:function(){return this.textLayout.whatsVisible(this)}},{key:"flash",value:function(){var a=this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.selection.range,f=1<arguments.length?arguments[1]:void 0;f=Object.assign({time:1E3,fill:tf.Color.orange},f);var k=f.id||"flash"+tf.string.newUUID();this.addMarker({id:k,range:d,style:{"background-color":f.fill.toCSSString(),"pointer-events":"none"}});tf.fun.debounceNamed("flash-"+
k,f.time,function(){return a.removeMarker(k)})()}},{key:"addTextAttribute",value:function(a){var d=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selection,k={start:f.start,end:f.end};this.undoManager.undoStart(this,"addTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"addTextAttribute",args:[a,k],undo:{target:this,selector:"removeTextAttribute",args:[a,k]}},function(){d.document.mixinTextAttribute(a,k);d.onAttributesChanged(k);d.consistencyCheck()});this.undoManager.undoStop();
return a}},{key:"removeTextAttribute",value:function(a){var d=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selection,k={start:f.start,end:f.end};this.undoManager.undoStart(this,"removeTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"removeTextAttribute",args:[a,k],undo:{target:this,selector:"addTextAttribute",args:[a,k]}},function(){d.document.mixoutTextAttribute(a,k);d.onAttributesChanged(k);d.consistencyCheck()});this.undoManager.undoStop()}},{key:"setTextAttributesWithSortedRanges",
value:function(a){this.document.setTextAttributesWithSortedRanges(a);this.consistencyCheck();for(var d=0;d<a.length;)this.onAttributesChanged(a[d]),d+=2}},{key:"textAttributeAt",value:function(a){return this.document.textAttributeAt(a)}},{key:"textAttributeAtPoint",value:function(a){return this.textAttributeAt(this.textLayout.textPositionFromPoint(this,a))}},{key:"textAndAttributesInRange",value:function(){return this.document.textAndAttributesInRange(0<arguments.length&&void 0!==arguments[0]?arguments[0]:
this.selection.range)}},{key:"resetTextAttributes",value:function(){this.document.resetTextAttributes();this.onAttributesChanged(this.documentRange);this.consistencyCheck()}},{key:"onAttributesChanged",value:function(a){this.invalidateTextLayout(!1,!1);var d=this.textLayout;d&&d.resetLineCharBoundsCacheOfRange(this,a);this.makeDirty()}},{key:"styleAt",value:function(a){return(a=this.textLayout.chunkAtPos(this,a))?a.style:Object.assign({},this.defaultTextStyle)}},{key:"getStyleInRange",value:function(){return this.textAndAttributesInRange(0<
arguments.length&&void 0!==arguments[0]?arguments[0]:this.selection).filter(function(a,d){return 0!==d%2}).reduce(function(a,d){for(var f in d){var k=d[f];if(!a.hasOwnProperty(f)||void 0!==k&&null!==k)a[f]=k}return a},{})}},{key:"setStyleInRange",value:function(a){for(var d=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selection,k=this.textAndAttributesInRange(f),n={start:Object.assign({},f.start),end:Object.assign({},f.start)},p=[],q=0;q<k.length;q+=2){var r=k[q],u=k[q+1],x=
-1;"string"!==typeof r&&(r=tf.objectReplacementChar);for(;-1<(x=r.indexOf("\n"));)0<x&&(n.end.column+=x,p.push(n,u)),n={row:n.end.row+1,column:0},n={start:n,end:Object.assign({},n)},r=r.slice(x+1);n.end.column+=r.length;p.push(n,u);n={start:Object.assign({},n.end),end:Object.assign({},n.end)}}this.undoManager.undoStart(this,"setStyleInRange");this.addMethodCallChangeDoing({target:this,selector:"setStyleInRange",args:[a,f],undo:{target:this,selector:"setTextAttributesWithSortedRanges",args:[p]}},function(){d.document.setTextAttribute(a,
f);d.consistencyCheck();d.onAttributesChanged(f)});this.undoManager.undoStop()}},{key:"resetStyleInRange",value:function(){for(var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.selection,d=this.document.textAndAttributesInRange(a),f={},k=0;k<d.length;k+=2)Object.assign(f,d[k+1]);this.removeTextAttribute(f,a)}},{key:"changeStyleProperty",value:function(a,d){var f=this,k=this.getStyleInRange(2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.selection)[a],n=d(k);this.selections.forEach(function(p){return f.addTextAttribute(dd({},
a,n),p)})}},{key:"inMultiSelectMode",value:function(){return this.selection.selections&&1<this.selection.selections.length}},{key:"selectionBounds",value:function(){var a=this;return this.selections.map(function(d){var f=a.charBoundsFromTextPosition(d.start),k=a.charBoundsFromTextPosition(d.end);return d.start.row===d.end.row?f.union(k):tf.rect(tf.pt(a.padding.left(),f.top()),tf.pt(a.width-a.padding.left(),k.bottom()))}).reduce(function(d,f){return f.union(d)})}},{key:"documentEndPosition",get:function(){return this.document?
this.document.endPosition:{row:0,column:0}}},{key:"isAtDocumentEnd",value:function(){return tf.eqPosition(this.cursorPosition,this.documentEndPosition)}},{key:"documentRange",get:function(){return{start:{row:0,column:0},end:this.documentEndPosition}}},{key:"cursorUp",value:function(){return this.selection.goUp(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)}},{key:"cursorDown",value:function(){return this.selection.goDown(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)}},{key:"cursorLeft",
value:function(){return this.selection.goLeft(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)}},{key:"cursorRight",value:function(){return this.selection.goRight(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)}},{key:"getPositionAboveOrBelow",value:function(){function a(x,y){x=x.slice();x.push({x:tf.arr.last(x).x+tf.arr.last(x).width});for(var D=0,H=Infinity,I=0;I<x.length;I++){var N=Math.abs(x[I].x-y);N<H&&(H=N,D=I)}return D}var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
1,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.cursorPosition,k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,n=3<arguments.length?arguments[3]:void 0,p=4<arguments.length?arguments[4]:void 0;if(0===d)return f;"number"===typeof p&&(p-=this.padding.left());var q=f.row,r=f.column;if(k&&this.lineWrapping){q=this.textLayout.rangesOfWrappedLine(this,f.row);if(!q.length)return f;r=q.length-1-q.slice().reverse().findIndex(function(x){var y=x.start;x.end;return y.column<=f.column});
if(1<=d){var u=0===r?0>=f.row?null:tf.arr.last(this.textLayout.rangesOfWrappedLine(this,f.row-1)):q[r-1];if(!u)return f}else if(-1>=d&&(u=(q.length-1===r?f.row>=this.lineCount()-1?[]:this.textLayout.rangesOfWrappedLine(this,f.row+1):q.slice(r+1))[0],!u))return f;q=u.start.row;r=this.textLayout.charBoundsOfRow(this,q).slice(u.start.column,u.end.column+1);r=u.start.column+a(r,p)}else q=Math.min(Math.max(0,f.row-d),this.lineCount()-1),"number"===typeof p&&(u=this.textLayout.charBoundsOfRow(this,q),r=
a(u,p));u={row:q,column:r};return 1<Math.abs(d)?this.getPositionAboveOrBelow(d+(1<d?-1:1),u,k,n,p):u}},{key:"collapseSelection",value:function(){this.selection.collapse(this.selection.lead);return this.selection}},{key:"selectAll",value:function(){this.selection.selectAll();return this.selection}},{key:"selectLine",value:function(){this.selection.selectLine(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1);return this.selection}},
{key:"selectionOrLineString",value:function(){var a=this.selection,d=a.start;return a.text||this.getLine(d.row)}},{key:"scrollCursorIntoView",value:function(){this.scrollPositionIntoView(this.cursorPosition)}},{key:"centerRange",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.selection.range,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:tf.pt(0,0),f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,k=this.charBoundsFromTextPosition(a.start).top();
a=this.charBoundsFromTextPosition(a.end).bottom()-k;this.scroll=a<this.height||!1===f?this.scroll.withY(k+a/2-this.height/2).addPt(d):this.scroll.withY(k).addPt(d)}},{key:"centerRow",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:tf.pt(0,0);return this.alignRowAtTop(a,d.addXY(0,-this.height/2))}},{key:"alignRowAtTop",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
this.cursorPosition.row,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:tf.pt(0,0);this.scroll=this.charBoundsFromTextPosition({row:a,column:0}).topLeft().addXY(-this.padding.left(),0).addPt(d)}},{key:"alignRowAtBottom",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:tf.pt(0,0),f=this.charBoundsFromTextPosition({row:a,column:0}).height;this.alignRowAtTop(a,d.addXY(0,-this.textPageHeight()+
f))}},{key:"scrollPositionIntoView",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:tf.pt(0,0);if(this.isClip()){var f=this.scroll;f=this.innerBounds().translatedBy(f).insetByRect(this.padding).insetBy(this.borderWidth);var k=this.charBoundsFromTextPosition(a);this.lineWrapping||(k=k.insetByPt(tf.pt(-20,0)));var n=20<f.bottom()-k.bottom()?"bottomLeft":"topLeft";f=k[n]().subPt(f.translateForInclusion(k)[n]()).addPt(d);if(0!==f.x||0!==f.y)this.scroll=this.scroll.addPt(f).addPt(d),
this.isFocused()&&this.ensureKeyInputHelperAtCursor()}}},{key:"keepPosAtSameScrollOffsetWhile",value:function(a){var d=this;return function(f){var k=d.scroll;f=d.selection.lead;var n=d.charBoundsFromTextPosition(f).y-k.y;k=!1;var p=function(){return d.scroll=d.scroll.withY(d.charBoundsFromTextPosition(f).y-n)},q;try{k=(q=a())&&q instanceof Promise}finally{!k&&p()}if(k)tf.promise["finally"](q,p);return q}(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.cursorPosition)}},{key:"saveExcursion",
value:function(a,d){var f=this;d=Object.assign({useAnchors:!1},d);var k=this.selection.isMultiSelection?this.selection.selections.map(function(r){return r.directedRange}):[this.selection],n=d.useAnchors?k.map(function(r){var u=r.end;return[f.addAnchor(Object.assign({},r.start,{id:"save-excursion-"+tf.string.newUUID()})),f.addAnchor(Object.assign({},u,{id:"save-excursion-"+tf.string.newUUID()}))]}):null,p=!1;d=d.useAnchors?function(){var r=n.map(function(u){u=Wb(u,2);return{start:u[0].position,end:u[1].position}});
f.selections=r;n.forEach(function(u){u=Wb(u,2);var x=u[1];f.removeAnchor(u[0]);f.removeAnchor(x)})}:function(){return f.selections=k};var q;try{p=(q=this.keepPosAtSameScrollOffsetWhile(a))&&q instanceof Promise}finally{!p&&d()}if(p)tf.promise["finally"](q,d);return q}},{key:"alignRow",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"center";if(this.isClip()){var f=this.scroll,k=this.padding;f=this.innerBounds().insetByRect(k).translatedBy(f);k=this.charBoundsFromTextPosition({row:a,
column:0});if(d="top"===d||"bottom"===d?f[d]()-k[d]():"center"===d?f[d]().y-k[d]().y:0)this.scroll=this.scroll.addXY(0,-d)}}},{key:"fit",value:function(){var a=this,d=this.viewState,f=this.fixedWidth,k=this.fixedHeight;d._needsFit=!1;if(k&&f||!this.textLayout||this.master&&!this.master._appliedMaster)return this;var n=this.textBounds().outsetByRect(this.padding),p=function(){a.withMetaDo({metaInteraction:!0},function(){k||a.height===n.height||(a.height=n.height);f||a.width===n.width||(a.width=n.width);
a.embeddedMorphs.forEach(function(q){(q=a.embeddedMorphMap.get(q).anchor)&&q.updateEmbeddedMorph()})})};d._needsFit=!1;this.document.lines.find(function(q){return q.hasEstimatedExtent})?this.whenRendered().then(p):p();return this}},{key:"fitIfNeeded",value:function(){this.viewState._needsFit&&this.fit()}},{key:"defaultLineHeight",get:function(){var a=this.padding;return a.top()+a.bottom()+this.fontMetric.defaultLineHeight({fontSize:this.fontSize,fontFamily:this.fontFamily})}},{key:"columnInWrappedLine",
value:function(a){if(!this.lineWrapping)return a.column;var d=this.screenLineRange(a,!0).start.column;return a.column-d}},{key:"textPositionFromPoint",value:function(a){return this.textLayout.textPositionFromPoint(this,a)}},{key:"charBoundsFromTextPosition",value:function(a){return this.textLayout.boundsFor(this,a)}},{key:"forceRerender",value:function(){this.textLayout.reset();this.makeDirty()}},{key:"aboutToRender",value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),"aboutToRender",this).call(this,
a)}},{key:"applyLayoutIfNeeded",value:function(){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);this.fitIfNeeded();Ve._get(Object.getPrototypeOf(g.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){return this.textRenderer.renderMorph(this,a)}},{key:"directRender",value:function(){var a=this.env.renderer,d=this.textRenderer;a&&d&&!a._stopped&&(tf.renderSubTree(this,a),d.manuallyTriggerTextRenderHook(this,a))}},
{key:"onMouseDown",value:function(a){if(!a.rightMouseButtonPressed()){this.activeMark&&(this.activeMark=null);var d=a.state;if(d.clickedOnMorph===this){d=(d.clickCount-1)%3+1;var f=this.localize(a.position),k=this.textPositionFromPoint(f);a.leftMouseButtonPressed()&&!a.isShiftDown()&&!a.isAltDown()&&this.callTextAttributeDoitFromMouseEvent(a,f);this.selectable&&(a.isShiftDown()?this.selection.lead=k:a.isAltDown()?this.selection.addRange(tf.Range.at(k)):(this.selection.disableMultiSelect(),1===d?a.isShiftDown()?
this.selection.lead=k:this.selection={start:k,end:k}:2===d?this.execCommand("select word",null,1,a):3===d&&this.execCommand("select line",null,1,a)),this.isFocused()&&this.ensureKeyInputHelperAtCursor())}}}},{key:"evalEnvForDoit",value:function(a){var d="lively://text-doit/".concat(this.id);lively.modules.module(d);return{context:a.context||this,format:"esm",targetModule:d}}},{key:"callTextAttributeDoitFromMouseEvent",value:function(a,d){var f=this;d=(d=this.textAttributeAtPoint(d)||[],d.doit);if(!d||
!d.code)return!1;var k=this.evalEnvForDoit(d),n=lively.modules.module(k.targetModule);n.recorder.evt=a;lively.vm.runEval(d.code,k)["catch"](function(p){return f.world().logError(Error("Error in text doit: ".concat(p.stack)))}).then(function(){return n.recorder.evt=null});return!0}},{key:"onMouseMove",value:function(a){a.leftMouseButtonPressed()&&this.selectable&&a.state.clickedOnMorph===this&&(this.selection.lead=this.textPositionFromPoint(this.localize(a.position)))}},{key:"selectMatchingBrackets",
value:function(a,d){function f(u){return"\t"===u||" "===u}function k(u,x,y,D,H){for(var I=1;(0>H?0<=D-1:D+1<u.length)&&(D+=H,u[D]===x&&x!==y&&I++,u[D]===y&&I--,0!==I););return D}function n(u,x,y,D){for(var H=x;0>y?0<=H-1:H+1<u.length;)if(H+=y,u[H]===D)return 0<y?[x,H]:[H+1,x];return 0<y?[x+1,u.length-1]:[0,x]}if(!a)return d;if(0===d||d===a.length)return[0,a.length-1];var p=d-1;if(0<d){if("\n"===a[d-1]||"\r"===a[d-1])return n(a,d,1,a[d-1]);var q="*({[<'\"`".indexOf(a[d-1]);"*"===a[d-1]&&(0>d-2||"/"!==
a[d-2])&&(q=-1);if(0<=q)return p=k(a,"*({[<'\"`"[q],"*)}]>'\"`"[q],d-1,1),[d,p-1]}if(d<a.length){if("\n"===a[d]||"\r"===a[d])return n(a,d,-1,a[d]);q="*)}]>'\"`".indexOf(a[d]);"*"===a[d]&&(d+1>=a.length||"/"!==a[d+1])&&(q=-1);if(0<=q)return d=k(a,"*)}]>'\"`"[q],"*({[<'\"`"[q],d,-1),[d+1,p]}if("/"===a[d-1]&&"/"===a[d-2]){for(;p+1<a.length&&"\n"!==a[p+1]&&"\r"!==a[p+1];)p++;return[d,p]}q=d;for(var r=p;0<=q-1&&f(a[q-1]);)q--;for(;r<a.length&&f(a[r+1]);)r++;if(1<=r-q)return[q,r];for(q=d<a.length?a[d]:
"";0<=d-1&&((a[d-1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!==a[d-1]?0:0<="0123456789".indexOf(q)));)q=a[d-1],d--;for(;p+1<a.length&&((a[p+1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!==a[p+1]?0:0<="0123456789".indexOf(q)));)q=a[p+1],p++;return[d,p]}},{key:"onContextMenu",value:function(a){var d=this;if(a.targetMorph===this){a.stop();var f=this.textPositionFromPoint(this.localize(a.position)),k=this.selection.selections||[this.selection];if(this.selection.isEmpty()||k.every(function(n){return!n.range.containsPosition(f)}))this.cursorPosition=
f;Promise.resolve(this.menuItemsForContextMenu()).then(function(n){return d.openMenu(n,a)})["catch"](function(n){return $world.logError(n)})}}},{key:"onDrop",value:function(a){var d=a.hand.grabbedMorphs.filter(function(k){return k.isLayoutable});Ve._get(Object.getPrototypeOf(g.prototype),"onDrop",this).call(this,a);if(d[0]){var f=this.textPositionFromPoint(this.localize(a.hand.globalPosition));this.insertText([d[0],null],f);d[0].opacity=a.state.originalOpacity||1}}},{key:"buildDropHoverGrid",value:function(a){var d=
this;if(a.simpleDrop)return null;var f=this.whatsVisible,k=f.startRow;f=Math.min(this.documentEndPosition.row,f.endRow);var n=this.document,p=this.padding.left(),q=this.padding.top();k=tf.arr.range(k,f).reduce(function(r,u){var x=d.textLayout.charBoundsOfRow(d,u).slice();1<=x.length&&0===tf.arr.last(x).width&&(tf.arr.last(x).width=12);if(1<x.length){var y=tf.arr.last(x);x.push({x:y.x+y.width,y:y.y,height:y.height,width:y.width||12})}x=x.map(function(D,H){D=tf.Rectangle.fromLiteral(D).translatedBy(tf.pt(p,
q+n.computeVerticalOffsetOf(u)));var I=d.getGlobalTransform().transformRectToRect(D);return{textPos:{row:u,column:H},bounds:D,globalBounds:I,morph:a.showDropGrid?tf.morph({reactsToPointer:!1,acceptsDrops:!1,bounds:D,border:{width:1,color:tf.Color.green},fill:null}):null}});return r.concat(x)},[]);k.forEach(function(r){return r.morph&&d.addMorph(r.morph)});return k}},{key:"onDropHoverIn",value:function(a){var d={simpleDrop:window.hasOwnProperty("simpleDrop")?window.simpleDrop:!0,showDropGrid:window.hasOwnProperty("showDropGrid")?
window.showDropGrid:!1,useTextFlowPlaceholder:window.hasOwnProperty("useTextFlowPlaceholder")?window.useTextFlowPlaceholder:!1},f=a.hand.grabbedMorphs[0];f&&(a.state.originalOpacity=f.opacity,f.opacity=.3);f=this.buildDropHoverGrid(d);a=a.state.dropHover||(a.state.dropHover=new WeakMap);var k=a.get(this);k||(k={},a.set(this,k));k.config=d;k.dropGrid=f}},{key:"onDropHoverUpdate",value:function(a){var d=a.hand.grabbedMorphs[0];if(d){var f=a.state.dropHover;if(f&&(f=f.get(this)))if(f.dropGrid){var k=
f.config;a=a.positionIn(this);var n=Infinity,p=fa(f.dropGrid),q;try{for(p.s();!(q=p.n()).done;){var r=q.value;if(r.bounds.containsPoint(a)){var u=r;break}var x=r.bounds.closestPointToPt(a).dist(a);if(x<n){n=x;var y=r}}}catch(D){p.e(D)}finally{p.f()}u||(u=y);u&&(y=f.placeholder,y||(f.placeholder=y=tf.morph({fill:d.fill,extent:d.extent,reactsToPointer:!1,acceptsDrops:!1})),tf.obj.equals(y._textPos||{},u.textPos)||(this!==y.owner&&this.addMorph(y),y.position=u.bounds.topLeft(),k&&k.useTextFlowPlaceholder&&
(y.remove(),y._textPos=u.textPos,this.insertText([y,null],u.textPos))))}else d=this.textPositionFromPoint(a.positionIn(this)),this.focus(),this.cursorPosition=d}}},{key:"onDropHoverOut",value:function(a){var d=a.hand.grabbedMorphs[0];d&&(d.opacity=a.state.originalOpacity||1);if(a=a.state.dropHover)if(d=a.get(this))a["delete"](this),d.dropGrid&&(d.dropGrid.forEach(function(f){return f.morph&&f.morph.remove()}),d.dropGrid=null),d.placeholder&&(d.placeholder.remove(),d.placeholder=null)}},{key:"menuItems",
value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([Ve._get(Object.getPrototypeOf(g.prototype),"menuItems",this).call(this),this.menuItemsForContextMenu()]);case 2:return k=r.sent,n=Wb(k,2),p=n[0],q=n[1],r.abrupt("return",p.concat({isDivider:!0}).concat(q));case 7:case "end":return r.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"menuItemsForContextMenu",
value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k=this,n,p,q,r;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:n=[{command:"text undo",alias:"undo",target:this,showKeyShortcuts:!0},{command:"text redo",alias:"redo",target:this,showKeyShortcuts:!0},{command:"manual clipboard copy",alias:"copy",target:this,showKeyShortcuts:this.keysForCommand("clipboard copy"),args:{collapseSelection:!1,"delete":!1}},{command:"manual clipboard paste",alias:"paste",target:this,
showKeyShortcuts:this.keysForCommand("clipboard paste")},{command:"open text attribute controls",alias:"edit text attributes",target:this},{isDivider:!0},{command:"toggle line wrapping",alias:(this.lineWrapping?"disable":"enable")+" line wrapping",target:this,showKeyShortcuts:!0},["run command",function(){k.focus();k.world().execCommand("run command")}]],p=fa(this.plugins),u.prev=2,p.s();case 4:if((q=p.n()).done){u.next=12;break}r=q.value;if("function"!==typeof r.getMenuItems){u.next=10;break}u.next=
9;return r.getMenuItems(n);case 9:n=u.sent;case 10:u.next=4;break;case 12:u.next=17;break;case 14:u.prev=14,u.t0=u["catch"](2),p.e(u.t0);case 17:return u.prev=17,p.f(),u.finish(17);case 20:return u.abrupt("return",n);case 21:case "end":return u.stop()}},f,this,[[2,14,17,20]])}));return function(){return a.apply(this,arguments)}}()},{key:"keybindings",get:function(){var a=this.world();a=a&&a.getCurrentUser()&&a.getCurrentUser().config&&a.getCurrentUser().config.textKeyBindings||[];a=Ve._get(Object.getPrototypeOf(g.prototype),
"keybindings",this).concat(a).concat(tf.config.text.defaultKeyBindings);return this.pluginCollect("getKeyBindings",a)}},{key:"keybindings",set:function(a){Ve._set(Object.getPrototypeOf(g.prototype),"keybindings",a,this)}},{key:"keyhandlers",get:function(){if(this._cachedKeyhandlers)return this._cachedKeyhandlers;var a=Ve._get(Object.getPrototypeOf(g.prototype),"keyhandlers",this).concat(this._keyhandlers||[]);return this._cachedKeyhandlers=a=this.pluginCollect("getKeyHandlers",a)}},{key:"snippets",
get:function(){return this.pluginCollect("getSnippets",[])}},{key:"cleanupSnippetsExpansions",value:function(){this.markers=this.markers.filter(function(a){return!a.id.includes("snippet")});this.anchors=this.anchors.filter(function(a){return!a.id.includes("snippet")})}},{key:"onHoverIn",value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),"onHoverIn",this).call(this,a);this.scrollActive=!0;this.makeDirty()}},{key:"onHoverOut",value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),"onHoverOut",
this).call(this,a);tf.touchInputDevice||(this.scrollActive=!1,this.makeDirty())}},{key:"onKeyDown",value:function(a){this.compositionRange||a.targetMorph!==this||(this.selection.cursorBlinkStart(),tf.KeyHandler.invokeKeyHandlers(this,a,!0))}},{key:"onTextInput",value:function(a){tf.KeyHandler.invokeKeyHandlers(this,a,!1)}},{key:"onCompositionStart",value:function(a){this.insertTextAndSelect(a.data);this.compositionRange=this.selection.range}},{key:"onCompositionUpdate",value:function(a){this.selection.range=
this.compositionRange;this.selection.text=[a.data,{textDecoration:"underline"}];this.compositionRange=this.selection.range}},{key:"onCompositionEnd",value:function(a){this.selection.range=this.compositionRange;this.selection.text=a.data;this.cursorPosition=this.compositionRange.end;this.compositionRange=null}},{key:"onCut",value:function(a){if(!this.rejectsInput()&&this.isFocused()&&!tf.config.emacs)this.onCopy(a,!this.rejectsInput())}},{key:"onCopy",value:function(a){var d=1<arguments.length&&void 0!==
arguments[1]?arguments[1]:!1;if(this.isFocused()){a.stop();var f=this.selection;try{for(var k=this.textAndAttributesInRange(this.selection.range),n=this.defaultTextStyle,p={},q=0;q<k.length;q+=2){var r=k[q];if(r.isMorph)if(r.isDisplacementMorph)k[q]="";else{var u=p[q]=tf.serializeMorph(k[q]);k[q]=tf.deserializeMorph(u,{reinitializeIds:!0})}}var x=tf.extractHTMLFromTextMorph(this,k);a.domEvt.clipboardData.setData("text/html",x);for(var y in p)k[y]=p[y];var D=JSON.stringify({textAndAttributes:k,defaultTextStyle:n});
a.domEvt.clipboardData.setData("application/x-lively-text",D)}catch(H){$world.logError(H)}a.domEvt.clipboardData.setData("text/plain",f.text.replace(tf.objectReplacementChar,""));this.execCommand("manual clipboard copy",{collapseSelection:tf.config.codeEditor.collapseSelection||!1,"delete":d,dontTryNativeClipboard:!0})}}},{key:"onPaste",value:function(a){var d=this;if(!this.rejectsInput()){a.stop();var f="";try{f=a.domEvt.clipboardData.getData("text")}catch(q){console.warn(q)}if(!this.editorPlugin)try{var k=
a.domEvt.clipboardData.getData("application/x-lively-text");var n=k&&JSON.parse(k);var p=n.textAndAttributes;for(a=0;a<p.length;a+=2)"string"!==typeof p[a]&&(p[a]=tf.deserializeMorph(p[a],{reinitializeIds:!0}))}catch(q){console.warn(q)}p=this.selection;p=p.isMultiSelection?p.selections:[p];n&&this.undoManager.group();p.forEach(function(q){n?d.replace(q.range,n.textAndAttributes,!1,!0,!0):q.text=f;d.saveMark(q.start);q.collapseToEnd()});n&&this.undoManager.group()}}},{key:"onFocus",value:function(a){var d=
this;Ve._get(Object.getPrototypeOf(g.prototype),"onFocus",this).call(this,a);this.makeDirty();this.selection.cursorBlinkStart();if(!this._originalShadow){var f=this.haloShadow||this.propertiesAndPropertySettings().properties.haloShadow.defaultValue;f&&!f.equals&&(f=new tf.ShadowObject(f));f&&!f.equals(this.dropShadow)&&(this._originalShadow=this.dropShadow);this.withMetaDo({metaInteraction:!0},function(){d.highlightWhenFocused&&d.animate({dropShadow:f,duration:200})})}}},{key:"onBlur",value:function(a){this.makeDirty();
this.selection.cursorBlinkStop();this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null;Ve._get(Object.getPrototypeOf(g.prototype),"onBlur",this).call(this,a)}},{key:"ensureKeyInputHelperAtCursor",value:function(){this.env.eventDispatcher.keyInputHelper&&this.env.eventDispatcher.keyInputHelper.ensureBeingAtCursorOfText(this)}},{key:"textPageHeight",value:function(){var a=this.padding,d=this.borderWidthBottom,f=this.borderWidthTop;return this.height-
a.top()-a.bottom()-d-f}},{key:"scrollPageDown",value:function(){this.scrollDown(this.textPageHeight())}},{key:"scrollPageUp",value:function(){this.scrollUp(this.textPageHeight())}},{key:"pageUpOrDown",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{direction:"up",select:!1},d=a.direction;a=a.select;var f=this.textLayout["down"===d?"lastFullVisibleLine":"firstFullVisibleLine"](this),k=this.cursorPosition.column,n=this.padding;a?this.selection.lead={row:f,column:k}:this.cursorPosition=
{row:f,column:k};"down"===d?this.alignRowAtTop(f,tf.pt(0,-n.top()-n.bottom())):(this.alignRowAtBottom(f,tf.pt(0,0)),this.alignRowAtBottom(f,tf.pt(0,n.top()+n.bottom())))}},{key:"gotoDocumentStart",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{select:!1};this.selection.lead={row:0,column:0};a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"gotoDocumentEnd",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{select:!1};this.selection.lead=
this.documentEndPosition;a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"paragraphRangeAbove",value:function(a){if(this.isLineEmpty(a)){for(var d=a-1;0<=d;d--)if(!this.isLineEmpty(d)){var f=d;break}if(void 0===f)return{start:{row:a,column:0},end:{row:a,column:0}}}else f=a;return this.paragraphRange(f)}},{key:"paragraphRangeBelow",value:function(a){var d=this.isLineEmpty(a),f=this.documentEndPosition;if(d){for(d=a+1;d<=f.row;d++)if(!this.isLineEmpty(d)){var k=d;break}if(void 0===k)return{start:{row:a,
column:0},end:{row:a,column:0}}}else k=a;return this.paragraphRange(k)}},{key:"paragraphRange",value:function(a){if(this.isLineEmpty(a))return{start:{row:a,column:0},end:{row:a,column:0}};var d=this.documentEndPosition;for(a+=1;a<=d.row;a++)if(this.isLineEmpty(a)){var f={row:a-1,column:this.getLine(a-1).length};break}f||(f=d);for(d=f.row-1;0<=d;d--)if(this.isLineEmpty(d)){var k={row:d+1,column:0};break}k||(k={row:0,column:0});return{start:k,end:f}}},{key:"astNodeRange",value:function(a){return{start:this.document.indexToPosition(a.start),
end:this.document.indexToPosition(a.end)}}},{key:"parseIntoLines",value:function(a){return a.split("\n")}},{key:"computeTextRangeForChanges",value:function(a){function d(q,r){for(var u="",x=0;x<q.length;x+=2)u+="string"===typeof q[x]?q[x]:tf.objectReplacementChar;q=k.parseIntoLines(u);return 1===q.length?tf.Range.fromPositions(r,{row:r.row,column:r.column+q[0].length}):1<q.length?tf.Range.fromPositions(r,{row:r.row+q.length-1,column:tf.arr.last(q).length}):tf.Range.at(r)}var f=tf.Range.at(this.cursorPosition);
if(!a.length)return f;var k=this,n=a[0];f="replace"===n.selector?d(n.args[1],n.args[0].start):f;for(n=1;n<a.length;n++){var p=a[n];f="replace"===p.selector?f.merge(d(p.args[1],p.args[0].start)):f}return f}},{key:"ensureUndoManager",value:function(){if(this.undoManager)return this.undoManager;var a=["addTextAttribute","removeTextAttribute","setStyleInRange","replace"];return this.undoManager=new tf.UndoManager(function(d){return a.includes(d.selector)})}},{key:"textUndo",value:function(){var a=this.undoManager.undo();
a&&(a=a.changes.slice().reverse().map(function(d){return d.undo}),this.selection=this.computeTextRangeForChanges(a))}},{key:"textRedo",value:function(){var a=this.undoManager.redo();a&&(a=a.changes.slice(),this.selection=this.computeTextRangeForChanges(a))}},{key:"findMatchingForward",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"right",f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},k=this["right"===d?"charRight":"charLeft"](a),n=f[k];if(!n)return null;
var p="right"===d?-1:0;return this.document.scanForward(a,function(q,r){if(q===n){if(0===p)return"right"===d?{row:r.row,column:r.column+1}:r;p--}else q===k&&p++;return null})}},{key:"findMatchingBackward",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"right",f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},k=this["right"===d?"charRight":"charLeft"](a),n=f[k];if(!n)return null;var p="left"===d?-1:0;return this.document.scanBackward(a,function(q,r){if(q===
n){if(0===p)return"right"===d?{row:r.row,column:r.column+1}:r;p--}else q===k&&p++;return null})}},{key:"search",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{start:this.cursorPosition,backwards:!1,caseSensitive:!1};return(new tf.TextSearcher(this)).search(Object.assign({needle:a},d))}},{key:"searchForAll",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{caseSensitive:!1};return(new tf.TextSearcher(this)).searchForAll(Object.assign({needle:a},
d))}},{key:"tokenAt",value:function(a){return this.pluginInvokeFirst("tokenAt",a)}},{key:"astAt",value:function(a){return this.pluginInvokeFirst("astAt",a)}},{key:"evalEnvironment",get:function(){var a=this.editorPlugin;return a&&a.evalEnvironment}},{key:"evalEnvironment",set:function(a){var d=this.editorPlugin;d&&(d.evalEnvironment=a)}},{key:"doitContext",get:function(){return(this.evalEnvironment||{}).context}},{key:"doitContext",set:function(a){(this.evalEnvironment||{}).context=a}},{key:"logDoit",
value:function(a){var d=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).time;d=void 0===d?Date.now():d;if(!(12E4<a.length)){try{var f=JSON.parse(localStorage["lively.next-js-ide-doitlog"])}catch(k){}f||(f=[]);if(!f.some(function(k){return"string"===typeof k?k===a:k.source===a})){f.push({source:a,time:d});50<f.length&&(f=f.slice(-50));try{localStorage["lively.next-js-ide-doitlog"]=JSON.stringify(f)}catch(k){}}}}},{key:"doEval",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:this.selection.isEmpty()?this.lineRange():this.selection.range,d=1<arguments.length?arguments[1]:void 0;a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.textInRange(a);var f=this.pluginFind(function(k){return k.isEditorPlugin&&"function"===typeof k.runEval});if(!f)throw Error("doit not possible: cannot find js editor plugin of !".concat(this));d&&d.logDoit&&this.logDoit(a,d);return f.runEval(a,d)}},{key:"maybeSelectCommentOrLine",value:function(){var a=this.selection,d=a.lead,
f=d.row;d=d.column;var k=this.selectionOrLineString();if(a.isEmpty()){var n=k.indexOf("//");-1===n||d<n||0<n&&0<=":\"'".indexOf(k[n-1])?this.selectLine(f):a.range={start:{row:f,column:n+2},end:{row:f,column:k.length}}}}},{key:"debugHelper",value:function(a){a=Object.assign({debugDocumentUpdate:!0,debugTextLayout:!0},a);return this._debugHelper?Object.assign(this._debugHelper,a):this._debugHelper=Object.assign({},a,{logged:[],groups:[],reset:function(){this.groups=[[]];this.logged=this.groups[0]},
log:function(){for(var d,f=arguments.length,k=Array(f),n=0;n<f;n++)k[n]=arguments[n];(d=console).log.apply(d,k);this.logged.push({args:k})},dump:function(d){console.log(d.split("\n").map(function(f){return f.slice(0,100)}).join("\n"));this.logged.push({dump:d})},group:function(d){this.groups.push([]);this.logged=tf.arr.last(this.groups);console.group(d)},groupEnd:function(d){console.groupEnd(d)},steps:function(d){for(var f=[];d.length;){var k=tf.arr.takeWhile(d,function(p){return!p.dump});d=d.slice(k.length);
var n=(d.shift()||{}).dump;f.push({actions:k,dump:n})}return f},printToConsole:function(){var d=this;console.clear();this.groups.forEach(function(f){var k=d.steps(f);console.group(k.length);d.steps(f).forEach(function(n,p){n=n.actions;console.group("step ".concat(p+1));n.forEach(function(q){var r;q=q.args;return(r=console).log.apply(r,db(q))});console.groupEnd("step ".concat(p+1))});console.groupEnd(k.length)})},report:function(){var d=this;return Cb(regeneratorRuntime.mark(function k(){var n,p,q,
r,u,x,y;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,System["import"]("jsdiff",System.decanonicalize("lively.morphic"));case 2:return n=D.sent,D.next=5,Dd.import("./editor-plugin-2820dfc1.js");case 5:return p=D.sent,q=p["default"],r=0,u="",x=[],y=0,d.groups.forEach(function(H,I){u+=">>> group ".concat(I+1,"\n");y++;r++;var N=d.steps(H);N.forEach(function(J,sa){var ja=J.actions;J=J.dump;u+=tf.string.indent(">>> step ".concat(sa+1)," ",r)+"\n";y++;r++;
ja.forEach(function(Ha){Ha=tf.string.indent(tf.string.formatFromArray(Ha.args.slice()).trim()," ",r);y+=Ha.split("\n").length;u+=Ha+"\n"});1<=sa&&J&&N[sa-1].dump&&(ja=new q,J=n.createPatch(String(sa),N[sa-1].dump,J),ja.tokenize(J),x.push.apply(x,db(ja.styledRanges(y,r))),u+=J,y+=J.split("\n").length-1);u+=tf.string.indent("<< step ".concat(sa+1)," ",r)+"\n";y++;r--});u+="<<< group ".concat(I+1,"\n");y++;r--}),D.abrupt("return",{report:u,reportStyles:x});case 13:case "end":return D.stop()}},k)}))()},
openReport:function(){var d=this;return Cb(regeneratorRuntime.mark(function k(){var n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d.report();case 2:return n=r.sent,p=n.reportStyles,q=n.report,r.abrupt("return",$world.execCommand("open text window",{title:"text debug",fontFamily:"monospace",content:q,rangesAndStyles:p}));case 6:case "end":return r.stop()}},k)}))()}})}},{key:"consistencyCheck",value:function(){if(this.debug)return this.document.consistencyCheck();
try{return this.document.consistencyCheck()}catch(k){var a=this.document;this.brokenDocument||(this.brokenDocument=a);var d=this.world()||$world;try{var f=new tf.Document([]);f.textAndAttributes=a.textAndAttributes;this.changeDocument(f)}catch(n){d?d.logError("Broken document could not be fixed"):console.error("Broken document could not be fixed")}d?d.logError(k):console.error(k)}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Text"}},{key:"makeLabel",value:function(a,d){return new tf.morph(Object.assign({type:"label",
value:a,fontFamily:"IBM Plex, Helvetica Neue, Arial, sans-serif",fontColor:tf.Color.almostBlack,fontSize:11},d))}},{key:"makeInputLine",value:function(a){return new (System.get(System.decanonicalize("lively.morphic")).InputLine)(a)}},{key:"defaultTextStyle",get:function(){if(this._defaultTextStyle)return this._defaultTextStyle;for(var a=this.prototype.propertiesAndPropertySettings().properties,d=this.defaultTextStyleProps,f={},k=0;k<d.length;k++){var n=d[k];f[n]=a[n].defaultValue}return this._defaultTextStyle=
f}},{key:"defaultTextStyleProps",get:function(){if(this._defaultTextStyleProps)return this._defaultTextStyleProps;var a=this.prototype.propertiesAndPropertySettings().properties,d=[],f;for(f in a)a[f].isDefaultTextStyleProp&&d.push(f);return this._defaultTextStyleProps=d}},{key:"properties",get:function(){return{clipMode:{isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.fixedWidth=this.fixedHeight=this.isClip()}},fontMetric:{group:"_rendering",serialize:!1,
get:function(){return this.getProperty("fontMetric")||this.env.fontMetric}},undoManager:{group:"core",before:["document"],initialize:function(){this.ensureUndoManager()}},textRenderer:{group:"_rendering",after:["viewState"],initialize:function(){this.textRenderer=new tf.Renderer(this.env)}},debug:{group:"_debugging",isStyleProp:!0,after:["textRenderer","textLayout"],defaultValue:!1,doc:"For visualizing and debugging text layout and rendering"},defaultViewState:{group:"_rendering",derived:!0,readOnly:!0,
get:function(){return{_needsFit:!0,text_layer_node:null,fontmetric_text_layer_node:null,dom_nodes:[],dom_nodeFirstRow:[],scrollTop:0,scrollHeight:0,scrollBottom:0,textHeight:0,textWidth:0,firstVisibleRow:0,lastVisibleRow:0,heightBefore:0,wasScrolled:!1,afterTextRenderHook:null,fastScroll:!0}}},viewState:{group:"_rendering",initialize:function(){this.viewState=this.defaultViewState}},displacingMorphMap:{group:"_rendering",initialize:function(){this.displacingMorphMap=new Map}},embeddedMorphMap:{group:"_rendering",
initialize:function(){this.embeddedMorphMap=new Map}},embeddedMorphs:{group:"text",derived:!0,readOnly:!0,after:["embeddedMorphMap"],get:function(){return this.embeddedMorphMap?Array.from(this.embeddedMorphMap.keys()):[]}},textLayout:{group:"_rendering",after:["textRenderer"],initialize:function(){this.textLayout=new tf.TextLayout(this)}},document:{group:"text",initialize:function(){this.document=tf.Document.fromString("",{maxLeafSize:50,minLeafSize:25,maxNodeSize:35,minNodeSize:7});this.consistencyCheck()}},
draggable:{defaultValue:!1},useSoftTabs:{group:"text",isStyleProp:!0,defaultValue:void 0!==tf.config.text.useSoftTabs?tf.config.text.useSoftTabs:!0},tabWidth:{group:"text",isStyleProp:!0,defaultValue:tf.config.text.tabWidth||2},tab:{group:"text",after:["useSoftTabs","tabWidth"],readOnly:!0,derived:!0,get:function(){return this.useSoftTabs?" ".repeat(this.tabWidth):"\t"}},autoInsertPairs:{group:"text",defaultValue:!0},extent:{get:function(){var a=this,d=this.getProperty("extent");!this._textChange&&
this.viewState&&this.viewState._needsFit&&!this._rendering&&!this._measuringTextBox&&d&&this.owner&&(this._measuringTextBox=!0,tf.noUpdate(function(){a.directRender()}),this._measuringTextBox=!1);return this.getProperty("extent")}},fixedWidth:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},fixedHeight:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},readOnly:{group:"text",isStyleProp:!0,defaultValue:!1},selectable:{group:"selection",isStyleProp:!0,
defaultValue:!0,set:function(a){this.setProperty("selectable",a);a||!this.getProperty("selection")||this.selection.isEmpty()||this.selection.collapse()}},padding:{group:"styling",type:"Rectangle",isStyleProp:!0,after:["textLayout","viewState"],defaultValue:tf.Rectangle.inset(0),set:function(a){this.setProperty("padding","number"===typeof a?tf.Rectangle.inset(a):a)}},haloShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null},highlightWhenFocused:{group:"styling",defaultValue:!1,after:["haloShadow"],
set:function(a){this.setProperty("highlightWhenFocused",a);a&&!this.haloShadow&&(this.haloShadow={blur:6,color:tf.Color.rgb(52,152,219),distance:0,rotation:45})}},cursorPosition:{group:"selection",derived:!0,after:["selection","selectable","readOnly"],get:function(){return this.selection.lead},set:function(a){!this.readOnly&&this.selectable&&(this.selection.range={start:a,end:a})}},cursorWidth:{defaultValue:1,type:"Number"},selection:{group:"selection",derived:!0,after:["document","anchors","selectable"],
get:function(){var a=this.getProperty("selection");if(a)return a;a=new (tf.config.text.useMultiSelect?tf.MultiSelection:tf.Selection)(this);this.setProperty("selection",a);return a},set:function(a){var d=this.getProperty("selection");!a&&d?(d.isMultiSelection&&d.disableMultiSelect(),d.collapse()):a.isSelection?this.setProperty("selection",a):d&&(d.range=a)}},selections:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.isMultiSelection?this.selection.selections:
[this.selection]},set:function(a){var d=this;this.selection=a[0];this.selection.isMultiSelection&&a.slice(1).forEach(function(f){return d.selection.addRange(f)})}},textString:{group:"text",after:["document"],derived:!0,get:function(){return this.document?this.document.textString:""},set:function(a){a=null!==a?String(a):"";this.deleteText({start:{column:0,row:0},end:this.document.endPosition});this.insertText(a,{column:0,row:0})}},value:{group:"text",after:["document","embeddedMorphMap"],derived:!0,
get:function(){var a=this.textAndAttributes;if(1===a.length){var d=Wb(a[0],2),f=d[0];if(!Object.keys(d[1]||{}).length)return f}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textAndAttributes:{group:"text",derived:!0,after:["document"],get:function(){return this.document.textAndAttributes},set:function(a){this.replace({start:{row:0,column:0},end:this.documentEndPosition},a)}},defaultTextStyleProps:{group:"_internal",readOnly:!0,derived:!0,get:function(){return this.constructor.defaultTextStyleProps}},
defaultTextStyle:{group:"styling",after:["viewState"],derived:!0,get:function(){return tf.obj.select(this,this.defaultTextStyleProps)},set:function(a){Object.assign(this,a)}},customizedTextStyle:{group:"styling",readOnly:!0,derived:!0,get:function(){for(var a={},d=this.defaultTextStyleProps,f=this.constructor.defaultTextStyle,k=0;k<d.length;k++){var n=d[k],p=this[n];p!==f[n]&&(a[n]=p)}return a}},nativeCursor:{defaultValue:"text",isDefaultTextStyleProp:!0},fontFamily:{group:"text styling",type:"Enum",
values:tf.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"],set:function(a){this.setProperty("fontFamily",tf.sanitizeFont(a))}},fontSize:{group:"text styling",type:"Number",min:1,unit:"pt",defaultValue:12,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},selectionColor:{group:"text styling",type:"Color",defaultValue:tf.Color.rgba(212,230,241,.8),isStyleProp:!0,after:["defaultTextStyle"]},cursorColor:{group:"text styling",
type:"Color",isStyleProp:!0,after:["defaultTextStyle"],defaultValue:tf.Color.black},fontColor:{group:"text styling",type:"Color",defaultValue:tf.Color.black,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontWeight:{group:"text styling",type:"Enum",values:["bold","bolder","light","lighter","normal"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontStyle:{group:"text styling",type:"Enum",values:["normal","italic","oblique"],defaultValue:"normal",
isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textDecoration:{group:"text styling",type:"Enum",values:["none","underline"],defaultValue:"none",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textStyleClasses:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},backgroundColor:{group:"text styling",type:"Color",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textAlign:{group:"text styling",type:"Enum",
values:["center","justify","left","right"],isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineHeight:{group:"text styling",type:"Number",min:1,isFloat:!0,isStyleProp:!0,isDefaultTextStyleProp:!0,defaultValue:1.4,after:["document","defaultTextStyle","viewState"]},letterSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},wordSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,
after:["document","defaultTextStyle","viewState"]},lineWrapping:{group:"text",type:"Enum",values:[!1,!0,"by-words","anywhere","only-by-words","wider","by-chars"],isStyleProp:!0,defaultValue:!1,after:["document","viewState"]},anchors:{group:"core",defaultValue:[],set:function(a){var d=this,f=tf.arr.withoutAll(a,this.anchors);tf.arr.withoutAll(this.anchors,a).forEach(function(k){return d.removeAnchor(k)});f.forEach(function(k){return d.addAnchor(k)})}},markers:{group:"core",defaultValue:[]},savedMarks:{group:"core",
defaultValue:[],after:["anchors"],set:function(a){var d=this;a=a.map(function(k){return k.isAnchor?k:d.addAnchor(Object.assign({},k,{id:"saved-mark-"+tf.string.newUUID()}))});var f=this.savedMarks.filter(function(k){return!a.includes(k)});a>tf.config.text.markStackSize&&f.push.apply(f,db(a.splice(0,a.length-tf.config.text.markStackSize)));f.map(function(k){return d.removeAnchor(k)});return this.setProperty("savedMarks",a)}},activeMarkPosition:{group:"_internal",after:["activeMark"],derived:!0,get:function(){var a=
this.activeMark;return a?a.position:null}},activeMark:{group:"core",after:["anchors"],set:function(a){if(a)a=this.addAnchor(a.isAnchor?a:Object.assign({},a,{id:"saved-mark-"+tf.string.newUUID()}));else{var d=this.activeMark;this.savedMarks.includes(d)||this.removeAnchor(d)}this.setProperty("activeMark",a)}},plugins:{group:"plugins",defaultValue:[],after:["value"],set:function(a){var d=this,f=this.getProperty("plugins");tf.arr.withoutAll(f,a).forEach(function(k){return k&&d.removePlugin(k)});a.forEach(function(k){return k&&
d.addPlugin(k)})}},editorModeName:{group:"plugins",derived:!0,after:["plugins"],get:function(){var a=this.editorPlugin;return a?a.shortName:null},set:function(a){this.changeEditorMode(a)}}}}}],c,{pathInPackage:function(){return"./text/morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1279,end:114718})}(tf.Morph));tf.Text=
Ev;tf.Text=Ev;var j7=Object.freeze({__proto__:null,Text:Ev}),jj=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js");jj.obj=bj;jj.promise=yj;jj.string=Xj;jj.properties=Pq;jj.Rectangle=fn;jj.Color=Bn;jj.signal=Ln;jj.vdom=Mx;jj.Morph=gp;jj.config=Jm;jj.defaultStyle=qw;jj.defaultAttributes=rw;jj.Icon=qt;jj.Icons=rH;jj.splitTextAndAttributesIntoLines=lx;jj.h=jj.vdom.h;var yy=bd("L",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js"),g=c.hasOwnProperty("Label")&&
"function"===typeof c.Label?c.Label:c.Label=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"onChange",value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),"onChange",this).call(this,a);a.prop&&a.prop.includes("borderWidth")&&this.fit()}},{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=a.fontMetric,
f=a.position,k=a.rightCenter,n=a.leftCenter,p=a.topCenter,q=a.bottom,r=a.top,u=a.right,x=a.left,y=a.bottomCenter,D=a.bottomLeft,H=a.bottomRight,I=a.topRight,N=a.topLeft,J=a.center,sa=a.extent;Ve._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,jj.obj.dissoc(a,["fontMetric"]));d&&(this._fontMetric=d);this._cachedTextBounds=null;this.fit();void 0!==sa&&(this.extent=sa);void 0!==f&&(this.position=f);void 0!==k&&(this.rightCenter=k);void 0!==n&&(this.leftCenter=
n);void 0!==p&&(this.topCenter=p);void 0!==q&&(this.bottom=q);void 0!==r&&(this.top=r);void 0!==u&&(this.right=u);void 0!==x&&(this.left=x);void 0!==y&&(this.bottomCenter=y);void 0!==D&&(this.bottomLeft=D);void 0!==H&&(this.bottomRight=H);void 0!==I&&(this.topRight=I);void 0!==N&&(this.topLeft=N);void 0!==J&&(this.center=J)}},{key:"__additionally_serialize__",value:function(a,d,f,k){Ve._get(Object.getPrototypeOf(g.prototype),"__additionally_serialize__",this).call(this,a,d,f,k);this.autofit&&this.fitIfNeeded();
a._cachedTextBounds=this._cachedTextBounds&&this._cachedTextBounds.toTuple()}},{key:"__after_deserialize__",value:function(a,d,f){Ve._get(Object.getPrototypeOf(g.prototype),"__after_deserialize__",this).call(this,a,d,f);a._cachedTextBounds&&(this.changeMetaData("deserializeInfo",{recoveredTextBounds:!0}),this._cachedTextBounds=jj.Rectangle.fromTuple(a._cachedTextBounds))}},{key:"isLabel",get:function(){return!0}},{key:"textStyle",get:function(){return jj.obj.select(this,"textStyleClasses textDecoration fontStyle fontWeight textShadow fontColor fontSize fontFamily".split(" "))}},
{key:"fit",value:function(){var a=this;this.withMetaDo({skipReconciliation:!0},function(){a.extent=a.textBounds().extent().addXY(a.borderWidthLeft+a.borderWidthRight,a.borderWidthTop+a.borderWidthBottom)});this.visible?this._needsFit=!1:this._cachedTextBounds=null;return this}},{key:"fitIfNeeded",value:function(){var a=this;if(this._needsFit)if(this.allFontsLoaded())this.fit();else return this.whenFontLoaded().then(function(){return a.fit()})}},{key:"textAndAttributesOfLines",get:function(){return jj.splitTextAndAttributesIntoLines(this.textAndAttributes,
"\n")}},{key:"allFontsLoaded",value:function(a){var d=this,f=this.env.fontMetric;return[this].concat(db(this.textAndAttributes.map(function(k,n){if(n%2)return{fontFamily:k&&k.fontFamily||d.fontFamily,fontWeight:k&&k.fontWeight||d.fontWeight}}).filter(Boolean))).every(function(k){return a?!!a.find(function(n){return n.family==k.fontFamily&&n.weight==(f.fontDetector.namedToNumeric[k.fontWeight]||k.fontWeight)}):f.isFontSupported(k.fontFamily,k.fontWeight)})}},{key:"whenFontLoaded",value:function(){var a=
Cb(regeneratorRuntime.mark(function f(){var k=this,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!this.allFontsLoaded()){p.next=2;break}return p.abrupt("return",!0);case 2:return p.t0=db,p.next=5,document.fonts.ready;case 5:p.t1=p.sent;n=(0,p.t0)(p.t1);if(!this.allFontsLoaded(n.filter(function(q){return"loaded"==q.status}))){p.next=9;break}return p.abrupt("return",!0);case 9:return p.abrupt("return",jj.promise.waitFor(5E3,function(){return k.allFontsLoaded()}));
case 10:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"textBoundsSingleChunk",value:function(){var a=this._fontMetric||this.env.fontMetric,d=Wb(this.textAndAttributes,2),f=d[0],k=Object.assign({},this.textStyle,{},d[1]);d=this.padding;a.isProportional(k.fontFamily)?(jj.__inter0__=a.sizeFor(k,f),f=jj.__inter0__.width,a=jj.__inter0__.height):(k=a.sizeFor(k,"x"),a=k.height,f=f.length*k.width);return new jj.Rectangle(0,0,Math.ceil(d.left()+d.right()+
f),Math.ceil(d.top()+d.bottom()+a))}},{key:"textBoundsAllChunks",value:function(){for(var a=this._fontMetric||this.env.fontMetric,d=this.padding,f=this.textStyle,k=this.textAndAttributesOfLines,n=!a.isProportional(f.fontFamily),p=a.sizeFor(f,"x").height,q=0,r=0,u=0;u<k.length;u++){var x=k[u];if(x.length){for(var y=0,D=0,H=0;H<x.length;H+=2){var I=x[H],N=x[H+1]||{},J=Object.assign({},f,{},N);n&&!N.fontFamily||!a.isProportional(J.fontFamily)?(J.fontFamily+"-"+J.fontSize,J=a.sizeFor(J,"x"),N=J.height,
D+=I.length*J.width,y=Math.max(y,N)):(I=a.sizeFor(J,I),N=I.height,D+=I.width,J.paddingRight&&(D+=Number.parseInt(J.paddingRight)),J.paddingLeft&&(D+=Number.parseInt(J.paddingLeft)),y=Math.max(y,N))}q+=y;r=Math.max(r,D)}else q+=p}return new jj.Rectangle(0,0,Math.ceil(d.left()+d.right()+r),Math.ceil(d.top()+d.bottom()+q))}},{key:"invalidateTextLayout",value:function(){this._cachedTextBounds=null;this.autofit&&(this._needsFit=!0);this.makeDirty()}},{key:"textBounds",value:function(){var a=this.textAndAttributes;
return this._cachedTextBounds||(this._cachedTextBounds=2>=a.length?this.textBoundsSingleChunk():this.textBoundsAllChunks())}},{key:"forceRerender",value:function(){this._cachedTextBounds=null;this.makeDirty()}},{key:"applyLayoutIfNeeded",value:function(){this.fitIfNeeded();Ve._get(Object.getPrototypeOf(g.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);for(var d=
[],f=this.textAndAttributesOfLines.length,k=0;k<f;k++){for(var n=this.textAndAttributesOfLines[k],p=0;p<n.length;p+=2){var q=n[p+1];d.push(this.renderChunk(n[p],q))}k<f-1&&d.push(jj.h("br"))}q=this.textStyle;var r=q.fontColor,u=q.fontSize;f=q.fontStyle;k=q.fontWeight;n=q.textShadow;p=q.textDecoration;var x=q.textStyleClasses,y=this.padding;q={fontFamily:q.fontFamily,fontSize:"number"===typeof u?u+"px":u,color:r?String(r):"transparent",cursor:this.nativeCursor};r=jj.defaultAttributes(this,a);n&&(q.textShadow=
n);"normal"!==k&&(q.fontWeight=k);"normal"!==f&&(q.fontStyle=f);"none"!==p&&(q.textDecoration=p);x&&x.length&&(r.className=(r.className||"")+" "+x.join(" "));r.style=Object.assign({},jj.defaultStyle(this),{},q);return jj.h("div",r,[jj.h("div",{style:{pointerEvents:"none",paddingLeft:y.left()+"px",paddingRight:y.right()+"px",paddingTop:y.top()+"px",paddingBottom:y.bottom()+"px",width:"calc(100% - ".concat(y.left(),"px - ").concat(y.right(),"px)")}},d),a.renderSubmorphs(this)])}},{key:"renderChunk",
value:function(a,d){var f=d=d||{},k=f.backgroundColor,n=f.fontColor,p=f.fontFamily,q=f.fontStyle,r=f.fontWeight,u=f.textShadow,x=f.textDecoration,y=f.textStyleClasses,D=f.textAlign,H=f["float"],I=f.display,N=f.lineHeight,J=f.opacity;f={};var sa={style:f};H&&(f["float"]=H);I&&(f.display=I);k&&(f.backgroundColor=String(k));p&&(f.fontFamily=p);n&&(f.color=String(n));u&&(f.textShadow=u);"normal"!==r&&(f.fontWeight=r);"normal"!==q&&(f.fontStyle=q);"none"!==x&&(f.textDecoration=x);D&&(f.textAlign=D);N&&
(f.lineHeight=N);J&&(f.opacity=J);y&&y.length&&(sa.className=y.join(" "));k="fontSize width height maxWidth maxHeight top left padding paddingLeft paddingRight paddingBottom paddingTop marginTop marginRight marginLeft marginBottom".split(" ");for(n=0;n<k.length;n++)p=k[n],d.hasOwnProperty(p)&&(q=d[p],f[p]="number"===typeof q?q+"px":q);return jj.h("span",sa,a)}},{key:"interactivelyChangeLabel",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=
n.next){case 0:return n.next=2,this.world().prompt("edit label",{input:this.textString,historyId:"lively.morphic-label-edit-hist",selectInput:!0});case 2:k=n.sent,"string"===typeof k&&(this.textString=k);case 4:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"interactivelySetIcon",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,
this.world().filterableListPrompt("Select Icon",Object.keys(jj.Icons).map(function(r){return{isListItem:!0,label:[].concat(db(jj.Icon.textAttribute(r,{paddingRight:"10px"})),[r,{}]),value:r}}));case 2:if(k=q.sent,n=Wb(k.selected,1),p=n[0])this.value=jj.Icon.textAttribute(p);case 5:case "end":return q.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"menuItems",value:function(){var a=this,d=Ve._get(Object.getPrototypeOf(g.prototype),"menuItems",this).call(this);d.unshift({isDivider:!0});
d.unshift(["edit label as rich text",Cb(regeneratorRuntime.mark(function k(){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,$world.editPrompt("rich text",{input:a.value,resolveTextAttributes:!0});case 2:if(n=p.sent)a.value=n;case 4:case "end":return p.stop()}},k)}))]);d.unshift(["change label",function(){return a.interactivelyChangeLabel()}]);d.unshift(["set Icon",function(){return a.interactivelySetIcon()}]);return d}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"Label"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fill:{defaultValue:jj.Color.transparent},draggable:{defaultValue:!1},nativeCursor:{defaultValue:"default"},isIcon:{derived:!0,get:function(){return jj.properties.values(jj.Icons).map(function(a){return a.code}).includes(this.textString)}},value:{derived:!0,after:["textAndAttributes","textString"],get:function(){var a=this.textAndAttributes;if(2>=a.length){var d=Wb(a,2),f=d[0];if(!Object.keys(d[1]||
{}).length)return f||""}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textString:{derived:!0,after:["textAndAttributes"],get:function(){return this.textAndAttributes.map(function(a,d){return 0==d%2?a:""}).join("")},set:function(a){this.textAndAttributes=[a,null]}},textAndAttributes:{after:["autofit"],get:function(){var a=this.getProperty("textAndAttributes");if(!a||1>a.length)a=["",null];return a},set:function(a){Array.isArray(a)||(a=[String(a),{}]);0===
a.length&&(a=["",{}]);this.textAndAttributes;this.setProperty("textAndAttributes",a);this.autofit&&this.invalidateTextLayout();jj.signal(this,"value",a)}},valueAndAnnotation:{derived:!0,after:["textAndAttributes"],get:function(){var a=this.textAndAttributes,d=null;if(2<a.length){var f=a.slice(-2),k=Wb(f,2);f=k[0];(k=k[1])&&k.textStyleClasses&&k.textStyleClasses.includes("annotation")&&(a=a.slice(0,-2),d=[f,k])}return{value:a,annotation:d}},set:function(a){var d=a.value;a=a.annotation;d||(d="");"string"===
typeof d&&(d=[d,null]);Array.isArray(d)||(d=[String(d),null]);d=d.slice();if(a){"string"===typeof a&&(a=[a,null]);var f=a[1];f||(f=a[1]={});d.push.apply(d,db(a));f.textStyleClasses=(f.textStyleClasses||[]).concat("annotation");f.textStyleClasses.includes("annotation")||f.textStyleClasses.push("annotation")}this.textAndAttributes=d}},autofit:{defaultValue:!0,set:function(a){this.setProperty("autofit",a);a&&(this._needsFit=!0)}},master:{after:["padding"]},padding:{type:"Rectangle",isStyleProp:!0,defaultValue:jj.Rectangle.inset(0),
after:["autofit"],initialize:function(a){this.padding=a},set:function(a){a||(a=jj.Rectangle.inset(0));var d=this.padding;this.setProperty("padding","number"===typeof a?jj.Rectangle.inset(a):a);this.autofit&&!d.equals(a)&&this.invalidateTextLayout()}},fontFamily:{isStyleProp:!0,type:"Enum",values:jj.config.text.basicFontItems,after:["autofit"],defaultValue:"IBM Plex Sans, Sans-Serif",set:function(a){var d=this.fontFamily;this.setProperty("fontFamily",a);this.autofit&&d!=a&&this.invalidateTextLayout()}},
fontSize:{type:"Number",min:1,isStyleProp:!0,defaultValue:12,after:["autofit"],set:function(a){var d=this.fontSize;this.setProperty("fontSize",a);this.autofit&&a!=d&&this.invalidateTextLayout()}},fontColor:{type:"Color",isStyleProp:!0,defaultValue:jj.Color.black},fontWeight:{type:"Enum",values:["bold","bolder","light","lighter"],isStyleProp:!0,defaultValue:"normal",after:["autofit"],set:function(a){var d=this.fontWeight;this.setProperty("fontWeight",a);this.autofit&&d!=a&&this.invalidateTextLayout()}},
fontStyle:{type:"Enum",values:["normal","italic","oblique"],isStyleProp:!0,defaultValue:"normal",after:["autofit"],set:function(a){var d=this.fontStyle;this.setProperty("fontStyle",a);this.autofit&&d!=a&&this.invalidateTextLayout()}},textShadow:{type:"String",isStyleProp:!0,defaultValue:""},textDecoration:{defaultValue:"none"},textStyleClasses:{defaultValue:void 0,after:["autofit"],set:function(a){this.setProperty("textStyleClasses",a);this.autofit&&this.invalidateTextLayout()}}}}},{key:"icon",value:function(a){return jj.Icon.makeLabel(a,
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{prefix:"",suffix:""})}}],c,{pathInPackage:function(){return"./text/label.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:483,end:20213})}(jj.Morph));jj.Label=yy;jj.Label=yy;var k7=Object.freeze({__proto__:null,Label:yy}),AI="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,l7={},xV=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,m7=l7=function(b,c){function g(Ua){var xa=Ua.match(/\n/g);xa&&(ja+=xa.length);xa=Ua.lastIndexOf("\n");Ha=~xa?Ua.length-xa:Ha+Ua.length}function a(){var Ua={line:ja,column:Ha};return function(xa){xa.position=new d(Ua);q(/^\s*/);return xa}}function d(Ua){(this||AI).start=Ua;(this||AI).end={line:ja,column:Ha};(this||AI).source=c.source}function f(Ua){var xa=Error(c.source+":"+ja+":"+Ha+": "+Ua);xa.reason=Ua;xa.filename=c.source;xa.line=
ja;xa.column=Ha;xa.source=b;if(c.silent)Qa.push(xa);else throw xa;}function k(){return q(/^{\s*/)}function n(){return q(/^}/)}function p(){var Ua,xa=[];q(/^\s*/);for(r(xa);b.length&&"}"!=b.charAt(0)&&(Ua=J()||sa());)!1!==Ua&&(xa.push(Ua),r(xa));return xa}function q(Ua){if(Ua=Ua.exec(b)){var xa=Ua[0];g(xa);b=b.slice(xa.length);return Ua}}function r(Ua){var xa;for(Ua=Ua||[];xa=u();)!1!==xa&&Ua.push(xa);return Ua}function u(){var Ua=a();if("/"==b.charAt(0)&&"*"==b.charAt(1)){for(var xa=2;""!=b.charAt(xa)&&
("*"!=b.charAt(xa)||"/"!=b.charAt(xa+1));)++xa;xa+=2;if(""===b.charAt(xa-1))return f("End of comment missing");var rc=b.slice(2,xa-2);Ha+=2;g(rc);b=b.slice(xa);Ha+=2;return Ua({type:"comment",comment:rc})}}function x(){var Ua=q(/^([^{]+)/);if(Ua)return Mq(Ua[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(xa){return xa.replace(/,/g,"\u200c")}).split(/\s*(?![^(]*\)),\s*/).map(function(xa){return xa.replace(/\u200C/g,",")})}function y(){var Ua=
a(),xa=q(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(xa){xa=Mq(xa[0]);if(!q(/^:\s*/))return f("property missing ':'");var rc=q(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);Ua=Ua({type:"declaration",property:xa.replace(xV,""),value:rc?Mq(rc[0]).replace(xV,""):""});q(/^[;\s]*/);return Ua}}function D(){var Ua=[];if(!k())return f("missing '{'");r(Ua);for(var xa;xa=y();)!1!==xa&&(Ua.push(xa),r(Ua));return n()?Ua:f("missing '}'")}function H(){for(var Ua,xa=[],rc=a();Ua=q(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)xa.push(Ua[1]),
q(/^,\s*/);if(xa.length)return rc({type:"keyframe",values:xa,declarations:D()})}function I(){var Ua=a(),xa=q(/^@([-\w]+)?keyframes\s*/);if(xa){var rc=xa[1];xa=q(/^([-\w]+)\s*/);if(!xa)return f("@keyframes missing name");xa=xa[1];if(!k())return f("@keyframes missing '{'");for(var Lb,Ac=r();Lb=H();)Ac.push(Lb),Ac=Ac.concat(r());return n()?Ua({type:"keyframes",name:xa,vendor:rc,keyframes:Ac}):f("@keyframes missing '}'")}}function N(Ua){var xa=new RegExp("^@"+Ua+"\\s*([^;]+);");return function(){var rc=
a(),Lb=q(xa);if(Lb){var Ac={type:Ua};Ac[Ua]=Lb[1].trim();return rc(Ac)}}}function J(){if("@"==b[0]){var Ua;if(!(Ua=I())){Ua=a();var xa=q(/^@media *([^{]+)/);if(xa)if(xa=Mq(xa[1]),k()){var rc=r().concat(p());Ua=n()?Ua({type:"media",media:xa,rules:rc}):f("@media missing '}'")}else Ua=f("@media missing '{'");else Ua=void 0}Ua||(Ua=a(),Ua=(xa=q(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/))?Ua({type:"custom-media",name:Mq(xa[1]),media:Mq(xa[2])}):void 0);Ua||(Ua=a(),(xa=q(/^@supports *([^{]+)/))?(xa=Mq(xa[1]),
k()?(rc=r().concat(p()),Ua=n()?Ua({type:"supports",supports:xa,rules:rc}):f("@supports missing '}'")):Ua=f("@supports missing '{'")):Ua=void 0);if(!(Ua=Ua||ec()||mc()||hc()))if(Ua=a(),rc=q(/^@([-\w]+)?document *([^{]+)/))if(xa=Mq(rc[1]),rc=Mq(rc[2]),k()){var Lb=r().concat(p());Ua=n()?Ua({type:"document",document:rc,vendor:xa,rules:Lb}):f("@document missing '}'")}else Ua=f("@document missing '{'");else Ua=void 0;if(!Ua)if(Ua=a(),q(/^@page */))if(xa=x()||[],k()){for(rc=r();Lb=y();)rc.push(Lb),rc=rc.concat(r());
Ua=n()?Ua({type:"page",selectors:xa,declarations:rc}):f("@page missing '}'")}else Ua=f("@page missing '{'");else Ua=void 0;Ua||(Ua=a(),q(/^@host\s*/)?k()?(xa=r().concat(p()),Ua=n()?Ua({type:"host",rules:xa}):f("@host missing '}'")):Ua=f("@host missing '{'"):Ua=void 0);if(!Ua)if(Ua=a(),q(/^@font-face\s*/))if(k()){for(xa=r();rc=y();)xa.push(rc),xa=xa.concat(r());Ua=n()?Ua({type:"font-face",declarations:xa}):f("@font-face missing '}'")}else Ua=f("@font-face missing '{'");else Ua=void 0;return Ua}}function sa(){var Ua=
a(),xa=x();if(!xa)return f("selector missing");r();return Ua({type:"rule",selectors:xa,declarations:D()})}c=c||{};var ja=1,Ha=1;d.prototype.content=b;var Qa=[],ec=N("import"),mc=N("charset"),hc=N("namespace");return VF(function(){var Ua=p();return{type:"stylesheet",stylesheet:{source:c.source,rules:Ua,parsingErrors:Qa}}}())},$_="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,yV={};yV=iA;iA.prototype.emit=function(b){return b};iA.prototype.visit=function(b){return this[b.type](b)};
iA.prototype.mapVisit=function(b,c){var g="";c=c||"";for(var a=0,d=b.length;a<d;a++)g+=this.visit(b[a]),c&&a<d-1&&(g+=this.emit(c));return g};var zV=yV,xr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,AV={},YP=zV,n7=sl;AV=Tl;n7(Tl,YP);Tl.prototype.compile=function(b){return this.stylesheet(b)};Tl.prototype.stylesheet=function(b){return this.mapVisit(b.stylesheet.rules,"\n\n")};Tl.prototype.comment=function(b){return this.emit(this.indent()+"/*"+b.comment+"*/",b.position)};
Tl.prototype["import"]=function(b){return this.emit("@import "+b["import"]+";",b.position)};Tl.prototype.media=function(b){return this.emit("@media "+b.media,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Tl.prototype.document=function(b){return this.emit("@"+(b.vendor||"")+"document "+b.document,b.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Tl.prototype.charset=function(b){return this.emit("@charset "+
b.charset+";",b.position)};Tl.prototype.namespace=function(b){return this.emit("@namespace "+b.namespace+";",b.position)};Tl.prototype.supports=function(b){return this.emit("@supports "+b.supports,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Tl.prototype.keyframes=function(b){return this.emit("@"+(b.vendor||"")+"keyframes "+b.name,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.keyframes,"\n")+this.emit(this.indent(-1)+"}")};
Tl.prototype.keyframe=function(b){var c=b.declarations;return this.emit(this.indent())+this.emit(b.values.join(", "),b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(c,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")};Tl.prototype.page=function(b){var c=b.selectors.length?b.selectors.join(", ")+" ":"";return this.emit("@page "+c,b.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(b.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};Tl.prototype["font-face"]=
function(b){return this.emit("@font-face ",b.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(b.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};Tl.prototype.host=function(b){return this.emit("@host",b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Tl.prototype["custom-media"]=function(b){return this.emit("@custom-media "+b.name+" "+b.media+";",b.position)};Tl.prototype.rule=function(b){var c=this.indent(),
g=b.declarations;return g.length?this.emit(b.selectors.map(function(a){return c+a}).join(",\n"),b.position)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(g,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""};Tl.prototype.declaration=function(b){return this.emit(this.indent())+this.emit(b.property+": "+b.value,b.position)+this.emit(";")};Tl.prototype.indent=function(b){(this||xr).level=(this||xr).level||1;return null!=b?((this||xr).level+=b,""):Array((this||xr).level).join((this||
xr).indentation||"  ")};var o7=AV,zk={getArg:function(b,c,g){if(c in b)return b[c];if(3===arguments.length)return g;throw Error('"'+c+'" is a required argument.');}},ZP=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,a0=/^data:.+,.+$/;zk.urlParse=mx;zk.urlGenerate=Xu;zk.normalize=WF;zk.join=$P;zk.isAbsolute=function(b){return"/"===b.charAt(0)||ZP.test(b)};zk.relative=function(b,c){""===b&&(b=".");b=b.replace(/\/$/,"");for(var g=0;0!==c.indexOf(b+"/");){var a=b.lastIndexOf("/");if(0>
a)return c;b=b.slice(0,a);if(b.match(/^([^\/]+:\/)?\/*$/))return c;++g}return Array(g+1).join("../")+c.substr(b.length+1)};var BV=!("__proto__"in Object.create(null));zk.toSetString=BV?aQ:b0;zk.fromSetString=BV?aQ:c0;zk.compareByOriginalPositions=function(b,c,g){var a=Yu(b.source,c.source);if(0!==a)return a;a=b.originalLine-c.originalLine;if(0!==a)return a;a=b.originalColumn-c.originalColumn;if(0!==a||g)return a;a=b.generatedColumn-c.generatedColumn;if(0!==a)return a;a=b.generatedLine-c.generatedLine;
return 0!==a?a:Yu(b.name,c.name)};zk.compareByGeneratedPositionsDeflated=function(b,c,g){var a=b.generatedLine-c.generatedLine;if(0!==a)return a;a=b.generatedColumn-c.generatedColumn;if(0!==a||g)return a;a=Yu(b.source,c.source);if(0!==a)return a;a=b.originalLine-c.originalLine;if(0!==a)return a;a=b.originalColumn-c.originalColumn;return 0!==a?a:Yu(b.name,c.name)};zk.compareByGeneratedPositionsInflated=function(b,c){var g=b.generatedLine-c.generatedLine;if(0!==g)return g;g=b.generatedColumn-c.generatedColumn;
if(0!==g)return g;g=Yu(b.source,c.source);if(0!==g)return g;g=b.originalLine-c.originalLine;if(0!==g)return g;g=b.originalColumn-c.originalColumn;return 0!==g?g:Yu(b.name,c.name)};zk.parseSourceMapInput=function(b){return JSON.parse(b.replace(/^\)]}'[^\n]*\n/,""))};zk.computeSourceURL=function(b,c,g){c=c||"";b&&("/"!==b[b.length-1]&&"/"!==c[0]&&(b+="/"),c=b+c);if(g){b=mx(g);if(!b)throw Error("sourceMapURL could not be parsed");b.path&&(g=b.path.lastIndexOf("/"),0<=g&&(b.path=b.path.substring(0,g+
1)));c=$P(Xu(b),c)}return WF(c)};zk.isAbsolute;zk.getArg;zk.urlParse;zk.urlGenerate;zk.normalize;zk.join;zk.relative;zk.toSetString;zk.fromSetString;zk.compareByOriginalPositions;zk.compareByGeneratedPositionsDeflated;zk.compareByGeneratedPositionsInflated;zk.parseSourceMapInput;zk.computeSourceURL;var DB={},CV="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");DB.encode=function(b){if(0<=b&&b<CV.length)return CV[b];throw new TypeError("Must be between 0 and 63: "+b);};DB.decode=
function(b){return 65<=b&&90>=b?b-65:97<=b&&122>=b?b-97+26:48<=b&&57>=b?b-48+52:43==b?62:47==b?63:-1};var Fv={encode:function(b){var c="",g=0>b?(-b<<1)+1:b<<1;do b=g&31,g>>>=5,0<g&&(b|=32),c+=DB.encode(b);while(0<g);return c},decode:function(b,c,g){var a=b.length,d=0,f=0;do{if(c>=a)throw Error("Expected more digits in base 64 VLQ value.");var k=DB.decode(b.charCodeAt(c++));if(-1===k)throw Error("Invalid base64 digit: "+b.charAt(c-1));var n=!!(k&32);k&=31;d+=k<<f;f+=5}while(n);b=d>>1;g.value=1===(d&
1)?-b:b;g.rest=c}},Cm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,BI=zk,CI=Object.prototype.hasOwnProperty,Vs="undefined"!==typeof Map;Up.fromArray=function(b,c){for(var g=new Up,a=0,d=b.length;a<d;a++)g.add(b[a],c);return g};Up.prototype.size=function(){return Vs?(this||Cm)._set.size:Object.getOwnPropertyNames((this||Cm)._set).length};Up.prototype.add=function(b,c){var g=Vs?b:BI.toSetString(b),a=Vs?this.has(b):CI.call((this||Cm)._set,g),d=(this||Cm)._array.length;
a&&!c||(this||Cm)._array.push(b);a||(Vs?(this||Cm)._set.set(b,d):(this||Cm)._set[g]=d)};Up.prototype.has=function(b){if(Vs)return(this||Cm)._set.has(b);b=BI.toSetString(b);return CI.call((this||Cm)._set,b)};Up.prototype.indexOf=function(b){if(Vs){var c=(this||Cm)._set.get(b);if(0<=c)return c}else if(c=BI.toSetString(b),CI.call((this||Cm)._set,c))return(this||Cm)._set[c];throw Error('"'+b+'" is not in the set.');};Up.prototype.at=function(b){if(0<=b&&b<(this||Cm)._array.length)return(this||Cm)._array[b];
throw Error("No element indexed by "+b);};Up.prototype.toArray=function(){return(this||Cm)._array.slice()};var po="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,DV=zk;jA.prototype.unsortedForEach=function(b,c){(this||po)._array.forEach(b,c)};jA.prototype.add=function(b){var c=(this||po)._last,g=c.generatedLine,a=b.generatedLine,d=c.generatedColumn,f=b.generatedColumn;a>g||a==g&&f>=d||0>=DV.compareByGeneratedPositionsInflated(c,b)?(this||po)._last=b:(this||po)._sorted=
!1;(this||po)._array.push(b)};jA.prototype.toArray=function(){(this||po)._sorted||((this||po)._array.sort(DV.compareByGeneratedPositionsInflated),(this||po)._sorted=!0);return(this||po)._array};var Dj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Ul=zk,kA=Up,d0=jA;qo.prototype._version=3;qo.fromSourceMap=function(b){var c=b.sourceRoot,g=new qo({file:b.file,sourceRoot:c});b.eachMapping(function(a){var d={generated:{line:a.generatedLine,column:a.generatedColumn}};
null!=a.source&&(d.source=a.source,null!=c&&(d.source=Ul.relative(c,d.source)),d.original={line:a.originalLine,column:a.originalColumn},null!=a.name&&(d.name=a.name));g.addMapping(d)});b.sources.forEach(function(a){var d=a;null!==c&&(d=Ul.relative(c,a));g._sources.has(d)||g._sources.add(d);d=b.sourceContentFor(a);null!=d&&g.setSourceContent(a,d)});return g};qo.prototype.addMapping=function(b){var c=Ul.getArg(b,"generated"),g=Ul.getArg(b,"original",null),a=Ul.getArg(b,"source",null);b=Ul.getArg(b,
"name",null);(this||Dj)._skipValidation||this._validateMapping(c,g,a,b);null!=a&&(a=String(a),(this||Dj)._sources.has(a)||(this||Dj)._sources.add(a));null!=b&&(b=String(b),(this||Dj)._names.has(b)||(this||Dj)._names.add(b));(this||Dj)._mappings.add({generatedLine:c.line,generatedColumn:c.column,originalLine:null!=g&&g.line,originalColumn:null!=g&&g.column,source:a,name:b})};qo.prototype.setSourceContent=function(b,c){null!=(this||Dj)._sourceRoot&&(b=Ul.relative((this||Dj)._sourceRoot,b));null!=c?
((this||Dj)._sourcesContents||((this||Dj)._sourcesContents=Object.create(null)),(this||Dj)._sourcesContents[Ul.toSetString(b)]=c):(this||Dj)._sourcesContents&&(delete (this||Dj)._sourcesContents[Ul.toSetString(b)],0===Object.keys((this||Dj)._sourcesContents).length&&((this||Dj)._sourcesContents=null))};qo.prototype.applySourceMap=function(b,c,g){var a=c;if(null==c){if(null==b.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');
a=b.file}var d=(this||Dj)._sourceRoot;null!=d&&(a=Ul.relative(d,a));var f=new kA,k=new kA;(this||Dj)._mappings.unsortedForEach(function(n){if(n.source===a&&null!=n.originalLine){var p=b.originalPositionFor({line:n.originalLine,column:n.originalColumn});null!=p.source&&(n.source=p.source,null!=g&&(n.source=Ul.join(g,n.source)),null!=d&&(n.source=Ul.relative(d,n.source)),n.originalLine=p.line,n.originalColumn=p.column,null!=p.name&&(n.name=p.name))}p=n.source;null==p||f.has(p)||f.add(p);n=n.name;null==
n||k.has(n)||k.add(n)},this||Dj);(this||Dj)._sources=f;(this||Dj)._names=k;b.sources.forEach(function(n){var p=b.sourceContentFor(n);null!=p&&(null!=g&&(n=Ul.join(g,n)),null!=d&&(n=Ul.relative(d,n)),this.setSourceContent(n,p))},this||Dj)};qo.prototype._validateMapping=function(b,c,g,a){if(c&&"number"!==typeof c.line&&"number"!==typeof c.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");
if(!(b&&"line"in b&&"column"in b&&0<b.line&&0<=b.column&&!c&&!g&&!a||b&&"line"in b&&"column"in b&&c&&"line"in c&&"column"in c&&0<b.line&&0<=b.column&&0<c.line&&0<=c.column&&g))throw Error("Invalid mapping: "+JSON.stringify({generated:b,source:g,original:c,name:a}));};qo.prototype._serializeMappings=function(){for(var b=0,c=1,g=0,a=0,d=0,f=0,k="",n,p,q,r=(this||Dj)._mappings.toArray(),u=0,x=r.length;u<x;u++){p=r[u];n="";if(p.generatedLine!==c)for(b=0;p.generatedLine!==c;)n+=";",c++;else if(0<u){if(!Ul.compareByGeneratedPositionsInflated(p,
r[u-1]))continue;n+=","}n+=Fv.encode(p.generatedColumn-b);b=p.generatedColumn;null!=p.source&&(q=(this||Dj)._sources.indexOf(p.source),n+=Fv.encode(q-f),f=q,n+=Fv.encode(p.originalLine-1-a),a=p.originalLine-1,n+=Fv.encode(p.originalColumn-g),g=p.originalColumn,null!=p.name&&(p=(this||Dj)._names.indexOf(p.name),n+=Fv.encode(p-d),d=p));k+=n}return k};qo.prototype._generateSourcesContent=function(b,c){return b.map(function(g){if(!(this||Dj)._sourcesContents)return null;null!=c&&(g=Ul.relative(c,g));
g=Ul.toSetString(g);return Object.prototype.hasOwnProperty.call((this||Dj)._sourcesContents,g)?(this||Dj)._sourcesContents[g]:null},this||Dj)};qo.prototype.toJSON=function(){var b={version:(this||Dj)._version,sources:(this||Dj)._sources.toArray(),names:(this||Dj)._names.toArray(),mappings:this._serializeMappings()};null!=(this||Dj)._file&&(b.file=(this||Dj)._file);null!=(this||Dj)._sourceRoot&&(b.sourceRoot=(this||Dj)._sourceRoot);(this||Dj)._sourcesContents&&(b.sourcesContent=this._generateSourcesContent(b.sources,
b.sourceRoot));return b};qo.prototype.toString=function(){return JSON.stringify(this.toJSON())};var lA={GREATEST_LOWER_BOUND:1,LEAST_UPPER_BOUND:2,search:function(b,c,g,a){if(0===c.length)return-1;b=XF(-1,c.length,b,c,g,a||lA.GREATEST_LOWER_BOUND);if(0>b)return-1;for(;0<=b-1&&0===g(c[b],c[b-1],!0);)--b;return b}},hh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Bi=zk,DI=lA,Zu=Up,zy=function(b,c){ZF(b,c,0,b.length-1)};ml.fromSourceMap=function(b,c){return Um.fromSourceMap(b,
c)};ml.prototype._version=3;ml.prototype.__generatedMappings=null;Object.defineProperty(ml.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){(this||hh).__generatedMappings||this._parseMappings((this||hh)._mappings,(this||hh).sourceRoot);return(this||hh).__generatedMappings}});ml.prototype.__originalMappings=null;Object.defineProperty(ml.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){(this||hh).__originalMappings||this._parseMappings((this||hh)._mappings,
(this||hh).sourceRoot);return(this||hh).__originalMappings}});ml.prototype._charIsMappingSeparator=function(b,c){b=b.charAt(c);return";"===b||","===b};ml.prototype._parseMappings=function(b,c){throw Error("Subclasses must implement _parseMappings");};ml.GENERATED_ORDER=1;ml.ORIGINAL_ORDER=2;ml.GREATEST_LOWER_BOUND=1;ml.LEAST_UPPER_BOUND=2;ml.prototype.eachMapping=function(b,c,g){c=c||null;switch(g||ml.GENERATED_ORDER){case ml.GENERATED_ORDER:g=(this||hh)._generatedMappings;break;case ml.ORIGINAL_ORDER:g=
(this||hh)._originalMappings;break;default:throw Error("Unknown order of iteration.");}var a=(this||hh).sourceRoot;g.map(function(d){var f=null===d.source?null:(this||hh)._sources.at(d.source);f=Bi.computeSourceURL(a,f,(this||hh)._sourceMapURL);return{source:f,generatedLine:d.generatedLine,generatedColumn:d.generatedColumn,originalLine:d.originalLine,originalColumn:d.originalColumn,name:null===d.name?null:(this||hh)._names.at(d.name)}},this||hh).forEach(b,c)};ml.prototype.allGeneratedPositionsFor=
function(b){var c=Bi.getArg(b,"line"),g={source:Bi.getArg(b,"source"),originalLine:c,originalColumn:Bi.getArg(b,"column",0)};g.source=this._findSourceIndex(g.source);if(0>g.source)return[];var a=[];g=this._findMapping(g,(this||hh)._originalMappings,"originalLine","originalColumn",Bi.compareByOriginalPositions,DI.LEAST_UPPER_BOUND);if(0<=g){var d=(this||hh)._originalMappings[g];if(void 0===b.column)for(c=d.originalLine;d&&d.originalLine===c;)a.push({line:Bi.getArg(d,"generatedLine",null),column:Bi.getArg(d,
"generatedColumn",null),lastColumn:Bi.getArg(d,"lastGeneratedColumn",null)}),d=(this||hh)._originalMappings[++g];else for(b=d.originalColumn;d&&d.originalLine===c&&d.originalColumn==b;)a.push({line:Bi.getArg(d,"generatedLine",null),column:Bi.getArg(d,"generatedColumn",null),lastColumn:Bi.getArg(d,"lastGeneratedColumn",null)}),d=(this||hh)._originalMappings[++g]}return a};Um.prototype=Object.create(ml.prototype);Um.prototype.consumer=ml;Um.prototype._findSourceIndex=function(b){var c=b;null!=(this||
hh).sourceRoot&&(c=Bi.relative((this||hh).sourceRoot,c));if((this||hh)._sources.has(c))return(this||hh)._sources.indexOf(c);for(c=0;c<(this||hh)._absoluteSources.length;++c)if((this||hh)._absoluteSources[c]==b)return c;return-1};Um.fromSourceMap=function(b,c){var g=Object.create(Um.prototype),a=g._names=Zu.fromArray(b._names.toArray(),!0),d=g._sources=Zu.fromArray(b._sources.toArray(),!0);g.sourceRoot=b._sourceRoot;g.sourcesContent=b._generateSourcesContent(g._sources.toArray(),g.sourceRoot);g.file=
b._file;g._sourceMapURL=c;g._absoluteSources=g._sources.toArray().map(function(u){return Bi.computeSourceURL(g.sourceRoot,u,c)});b=b._mappings.toArray().slice();for(var f=g.__generatedMappings=[],k=g.__originalMappings=[],n=0,p=b.length;n<p;n++){var q=b[n],r=new cQ;r.generatedLine=q.generatedLine;r.generatedColumn=q.generatedColumn;q.source&&(r.source=d.indexOf(q.source),r.originalLine=q.originalLine,r.originalColumn=q.originalColumn,q.name&&(r.name=a.indexOf(q.name)),k.push(r));f.push(r)}zy(g.__originalMappings,
Bi.compareByOriginalPositions);return g};Um.prototype._version=3;Object.defineProperty(Um.prototype,"sources",{get:function(){return(this||hh)._absoluteSources.slice()}});Um.prototype._parseMappings=function(b,c){c=1;for(var g=0,a=0,d=0,f=0,k=0,n=b.length,p=0,q={},r={},u=[],x=[],y,D,H,I,N;p<n;)if(";"===b.charAt(p))c++,p++,g=0;else if(","===b.charAt(p))p++;else{y=new cQ;y.generatedLine=c;for(I=p;I<n&&!this._charIsMappingSeparator(b,I);I++);D=b.slice(p,I);if(H=q[D])p+=D.length;else{for(H=[];p<I;)Fv.decode(b,
p,r),N=r.value,p=r.rest,H.push(N);if(2===H.length)throw Error("Found a source, but no line and column");if(3===H.length)throw Error("Found a source and line, but no column");q[D]=H}y.generatedColumn=g+H[0];g=y.generatedColumn;1<H.length&&(y.source=f+H[1],f+=H[1],y.originalLine=a+H[2],a=y.originalLine,y.originalLine+=1,y.originalColumn=d+H[3],d=y.originalColumn,4<H.length&&(y.name=k+H[4],k+=H[4]));x.push(y);"number"===typeof y.originalLine&&u.push(y)}zy(x,Bi.compareByGeneratedPositionsDeflated);(this||
hh).__generatedMappings=x;zy(u,Bi.compareByOriginalPositions);(this||hh).__originalMappings=u};Um.prototype._findMapping=function(b,c,g,a,d,f){if(0>=b[g])throw new TypeError("Line must be greater than or equal to 1, got "+b[g]);if(0>b[a])throw new TypeError("Column must be greater than or equal to 0, got "+b[a]);return DI.search(b,c,d,f)};Um.prototype.computeColumnSpans=function(){for(var b=0;b<(this||hh)._generatedMappings.length;++b){var c=(this||hh)._generatedMappings[b];if(b+1<(this||hh)._generatedMappings.length){var g=
(this||hh)._generatedMappings[b+1];if(c.generatedLine===g.generatedLine){c.lastGeneratedColumn=g.generatedColumn-1;continue}}c.lastGeneratedColumn=Infinity}};Um.prototype.originalPositionFor=function(b){var c={generatedLine:Bi.getArg(b,"line"),generatedColumn:Bi.getArg(b,"column")};b=this._findMapping(c,(this||hh)._generatedMappings,"generatedLine","generatedColumn",Bi.compareByGeneratedPositionsDeflated,Bi.getArg(b,"bias",ml.GREATEST_LOWER_BOUND));if(0<=b&&(b=(this||hh)._generatedMappings[b],b.generatedLine===
c.generatedLine)){c=Bi.getArg(b,"source",null);null!==c&&(c=(this||hh)._sources.at(c),c=Bi.computeSourceURL((this||hh).sourceRoot,c,(this||hh)._sourceMapURL));var g=Bi.getArg(b,"name",null);null!==g&&(g=(this||hh)._names.at(g));return{source:c,line:Bi.getArg(b,"originalLine",null),column:Bi.getArg(b,"originalColumn",null),name:g}}return{source:null,line:null,column:null,name:null}};Um.prototype.hasContentsOfAllSources=function(){return(this||hh).sourcesContent?(this||hh).sourcesContent.length>=(this||
hh)._sources.size()&&!(this||hh).sourcesContent.some(function(b){return null==b}):!1};Um.prototype.sourceContentFor=function(b,c){if(!(this||hh).sourcesContent)return null;var g=this._findSourceIndex(b);if(0<=g)return(this||hh).sourcesContent[g];null!=(this||hh).sourceRoot&&(b=Bi.relative((this||hh).sourceRoot,b));var a;if(null!=(this||hh).sourceRoot&&(a=Bi.urlParse((this||hh).sourceRoot))){g=b.replace(/^file:\/\//,"");if("file"==a.scheme&&(this||hh)._sources.has(g))return(this||hh).sourcesContent[(this||
hh)._sources.indexOf(g)];if((!a.path||"/"==a.path)&&(this||hh)._sources.has("/"+b))return(this||hh).sourcesContent[(this||hh)._sources.indexOf("/"+b)]}if(c)return null;throw Error('"'+b+'" is not in the SourceMap.');};Um.prototype.generatedPositionFor=function(b){var c=Bi.getArg(b,"source");c=this._findSourceIndex(c);if(0>c)return{line:null,column:null,lastColumn:null};c={source:c,originalLine:Bi.getArg(b,"line"),originalColumn:Bi.getArg(b,"column")};b=this._findMapping(c,(this||hh)._originalMappings,
"originalLine","originalColumn",Bi.compareByOriginalPositions,Bi.getArg(b,"bias",ml.GREATEST_LOWER_BOUND));return 0<=b&&(b=(this||hh)._originalMappings[b],b.source===c.source)?{line:Bi.getArg(b,"generatedLine",null),column:Bi.getArg(b,"generatedColumn",null),lastColumn:Bi.getArg(b,"lastGeneratedColumn",null)}:{line:null,column:null,lastColumn:null}};Vp.prototype=Object.create(ml.prototype);Vp.prototype.constructor=ml;Vp.prototype._version=3;Object.defineProperty(Vp.prototype,"sources",{get:function(){for(var b=
[],c=0;c<(this||hh)._sections.length;c++)for(var g=0;g<(this||hh)._sections[c].consumer.sources.length;g++)b.push((this||hh)._sections[c].consumer.sources[g]);return b}});Vp.prototype.originalPositionFor=function(b){var c={generatedLine:Bi.getArg(b,"line"),generatedColumn:Bi.getArg(b,"column")},g=DI.search(c,(this||hh)._sections,function(a,d){var f=a.generatedLine-d.generatedOffset.generatedLine;return f?f:a.generatedColumn-d.generatedOffset.generatedColumn});return(g=(this||hh)._sections[g])?g.consumer.originalPositionFor({line:c.generatedLine-
(g.generatedOffset.generatedLine-1),column:c.generatedColumn-(g.generatedOffset.generatedLine===c.generatedLine?g.generatedOffset.generatedColumn-1:0),bias:b.bias}):{source:null,line:null,column:null,name:null}};Vp.prototype.hasContentsOfAllSources=function(){return(this||hh)._sections.every(function(b){return b.consumer.hasContentsOfAllSources()})};Vp.prototype.sourceContentFor=function(b,c){for(var g=0;g<(this||hh)._sections.length;g++){var a=(this||hh)._sections[g].consumer.sourceContentFor(b,
!0);if(a)return a}if(c)return null;throw Error('"'+b+'" is not in the SourceMap.');};Vp.prototype.generatedPositionFor=function(b){for(var c=0;c<(this||hh)._sections.length;c++){var g=(this||hh)._sections[c];if(-1!==g.consumer._findSourceIndex(Bi.getArg(b,"source"))){var a=g.consumer.generatedPositionFor(b);if(a)return{line:a.line+(g.generatedOffset.generatedLine-1),column:a.column+(g.generatedOffset.generatedLine===a.line?g.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}};Vp.prototype._parseMappings=
function(b,c){(this||hh).__generatedMappings=[];(this||hh).__originalMappings=[];for(b=0;b<(this||hh)._sections.length;b++){c=(this||hh)._sections[b];for(var g=c.consumer._generatedMappings,a=0;a<g.length;a++){var d=g[a],f=c.consumer._sources.at(d.source);f=Bi.computeSourceURL(c.consumer.sourceRoot,f,(this||hh)._sourceMapURL);(this||hh)._sources.add(f);f=(this||hh)._sources.indexOf(f);var k=null;d.name&&(k=c.consumer._names.at(d.name),(this||hh)._names.add(k),k=(this||hh)._names.indexOf(k));d={source:f,
generatedLine:d.generatedLine+(c.generatedOffset.generatedLine-1),generatedColumn:d.generatedColumn+(c.generatedOffset.generatedLine===d.generatedLine?c.generatedOffset.generatedColumn-1:0),originalLine:d.originalLine,originalColumn:d.originalColumn,name:k};(this||hh).__generatedMappings.push(d);"number"===typeof d.originalLine&&(this||hh).__originalMappings.push(d)}}zy((this||hh).__generatedMappings,Bi.compareByGeneratedPositionsDeflated);zy((this||hh).__originalMappings,Bi.compareByOriginalPositions)};
var EI={},EV=rl.Buffer;(function(b){var c=function(g){return"function"===typeof g?g:"function"===typeof EV?function(a){return(new EV(a,"base64")).toString("binary")}:"object"===typeof b.base64js?function(a){a=b.base64js.b64ToByteArray(a);return Array.prototype.map.call(a,function(d){return String.fromCharCode(d)}).join("")}:function(){throw Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.");}}(b.atob);b.atob=c;EI&&(EI=c)})(window);var p7=
EI,q7=/^xn--/,r7=/[^\0-\x7E]/,f0=/[\x2E\u3002\uFF0E\uFF61]/g,e0={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},kq=Math.floor,FI=String.fromCharCode,FV=function(b,c){return b+22+75*(26>b)-((0!=c)<<5)},GV=function(b,c,g){var a=0;b=g?kq(b/700):b>>1;for(b+=kq(b/c);455<b;a+=36)b=kq(b/35);return kq(a+36*b/(b+38))},HV=function(b){var c=[],g=b.length,a=0,d=128,f=72,k=b.lastIndexOf("-");0>k&&(k=0);for(var n=
0;n<k;++n)128<=b.charCodeAt(n)&&Ws("not-basic"),c.push(b.charCodeAt(n));for(k=0<k?k+1:0;k<g;){n=a;for(var p=1,q=36;;q+=36){k>=g&&Ws("invalid-input");var r=10>(x=b.charCodeAt(k++))-48?x-22:26>x-65?x-65:26>x-97?x-97:36;(36<=r||r>kq((2147483647-a)/p))&&Ws("overflow");a+=r*p;var u=q<=f?1:q>=f+26?26:q-f;if(r<u)break;r=36-u;p>kq(2147483647/r)&&Ws("overflow");p*=r}p=c.length+1;f=GV(a-n,p,0==n);kq(a/p)>2147483647-d&&Ws("overflow");d+=kq(a/p);a%=p;c.splice(a++,0,d)}var x;return String.fromCodePoint.apply(String,
c)},IV=function(b){var c=[],g=(b=eQ(b)).length,a=128,d=0,f=72,k=fa(b),n;try{for(k.s();!(n=k.n()).done;){var p=n.value;128>p&&c.push(FI(p))}}catch(sa){k.e(sa)}finally{k.f()}for((n=k=c.length)&&c.push("-");n<g;){var q=2147483647;p=fa(b);var r;try{for(p.s();!(r=p.n()).done;){var u=r.value;u>=a&&u<q&&(q=u)}}catch(sa){p.e(sa)}finally{p.f()}p=n+1;q-a>kq((2147483647-d)/p)&&Ws("overflow");d+=(q-a)*p;a=q;q=fa(b);var x;try{for(q.s();!(x=q.n()).done;){var y=x.value;if(y<a&&2147483647<++d&&Ws("overflow"),y==
a){for(var D=d,H=36;;H+=36){var I=H<=f?1:H>=f+26?26:H-f;if(D<I)break;var N=D-I,J=36-I;c.push(FI(FV(I+N%J,0)));D=kq(N/J)}c.push(FI(FV(D,0)));f=GV(d,p,n==k);d=0;++n}}}catch(sa){q.e(sa)}finally{q.f()}++d;++a}return c.join("")},Gt=bd("bU",{version:"2.1.0",ucs2:{decode:eQ,encode:function(b){return String.fromCodePoint.apply(String,db(b))}},decode:HV,encode:IV,toASCII:function(b){return dQ(b,function(c){return r7.test(c)?"xn--"+IV(c):c})},toUnicode:function(b){return dQ(b,function(c){return q7.test(c)?
HV(c.slice(4).toLowerCase()):c})}});Gt.decode;Gt.encode;Gt.toASCII;Gt.toUnicode;Gt.ucs2;Gt.version;var Ay=function(b){switch(ad(b)){case "string":return b;case "boolean":return b?"true":"false";case "number":return isFinite(b)?b:"";default:return""}},kp={};kp.decode=kp.parse=function(b,c,g,a){g=g||"=";var d={};if("string"!=typeof b||0===b.length)return d;var f=/\+/g;b=b.split(c||"&");c=1E3;a&&"number"==typeof a.maxKeys&&(c=a.maxKeys);a=b.length;0<c&&a>c&&(a=c);for(c=0;c<a;++c){var k,n;var p=b[c].replace(f,
"%20");var q=p.indexOf(g);0<=q?(k=p.substr(0,q),n=p.substr(q+1)):(k=p,n="");p=decodeURIComponent(k);q=decodeURIComponent(n);Object.prototype.hasOwnProperty.call(d,p)?Array.isArray(d[p])?d[p].push(q):d[p]=[d[p],q]:d[p]=q}return d};kp.encode=kp.stringify=function(b,c,g,a){return c=c||"&",g=g||"=",null===b&&(b=void 0),"object"==ad(b)?Object.keys(b).map(function(d){var f=encodeURIComponent(Ay(d))+g;return Array.isArray(b[d])?b[d].map(function(k){return f+encodeURIComponent(Ay(k))}).join(c):f+encodeURIComponent(Ay(b[d]))}).join(c):
a?encodeURIComponent(Ay(a))+g+encodeURIComponent(Ay(b)):""};kp.decode;kp.encode;kp.parse;kp.stringify;var JV={},KV=!1,Vl=function(){function b(d){if("string"!==typeof d)throw new TypeError("Path must be a string. Received "+JSON.stringify(d));}function c(d,f){for(var k="",n=0,p=-1,q=0,r,u=0;u<=d.length;++u){if(u<d.length)r=d.charCodeAt(u);else if(47===r)break;else r=47;if(47===r){if(p!==u-1&&1!==q)if(p!==u-1&&2===q){if(2>k.length||2!==n||46!==k.charCodeAt(k.length-1)||46!==k.charCodeAt(k.length-2))if(2<
k.length){if(p=k.lastIndexOf("/"),p!==k.length-1){-1===p?(k="",n=0):(k=k.slice(0,p),n=k.length-1-k.lastIndexOf("/"));p=u;q=0;continue}}else if(2===k.length||1===k.length){k="";n=0;p=u;q=0;continue}f&&(k=0<k.length?k+"/..":"..",n=2)}else k=0<k.length?k+("/"+d.slice(p+1,u)):d.slice(p+1,u),n=u-p-1;p=u;q=0}else 46===r&&-1!==q?++q:q=-1}return k}if(KV)return JV;KV=!0;var g=yk,a={resolve:function(){for(var d="",f=!1,k,n=arguments.length-1;-1<=n&&!f;n--){if(0<=n)var p=arguments[n];else void 0===k&&(k=g.cwd()),
p=k;b(p);0!==p.length&&(d=p+"/"+d,f=47===p.charCodeAt(0))}d=c(d,!f);return f?0<d.length?"/"+d:"/":0<d.length?d:"."},normalize:function(d){b(d);if(0===d.length)return".";var f=47===d.charCodeAt(0),k=47===d.charCodeAt(d.length-1);d=c(d,!f);0!==d.length||f||(d=".");0<d.length&&k&&(d+="/");return f?"/"+d:d},isAbsolute:function(d){b(d);return 0<d.length&&47===d.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var d,f=0;f<arguments.length;++f){var k=arguments[f];b(k);0<k.length&&(d=
void 0===d?k:d+("/"+k))}return void 0===d?".":a.normalize(d)},relative:function(d,f){b(d);b(f);if(d===f)return"";d=a.resolve(d);f=a.resolve(f);if(d===f)return"";for(var k=1;k<d.length&&47===d.charCodeAt(k);++k);for(var n=d.length,p=n-k,q=1;q<f.length&&47===f.charCodeAt(q);++q);for(var r=f.length-q,u=p<r?p:r,x=-1,y=0;y<=u;++y){if(y===u){if(r>u){if(47===f.charCodeAt(q+y))return f.slice(q+y+1);if(0===y)return f.slice(q+y)}else p>u&&(47===d.charCodeAt(k+y)?x=y:0===y&&(x=0));break}var D=d.charCodeAt(k+
y),H=f.charCodeAt(q+y);if(D!==H)break;else 47===D&&(x=y)}p="";for(y=k+x+1;y<=n;++y)if(y===n||47===d.charCodeAt(y))p=0===p.length?p+"..":p+"/..";if(0<p.length)return p+f.slice(q+x);q+=x;47===f.charCodeAt(q)&&++q;return f.slice(q)},_makeLong:function(d){return d},dirname:function(d){b(d);if(0===d.length)return".";for(var f=d.charCodeAt(0),k=47===f,n=-1,p=!0,q=d.length-1;1<=q;--q)if(f=d.charCodeAt(q),47===f){if(!p){n=q;break}}else p=!1;return-1===n?k?"/":".":k&&1===n?"//":d.slice(0,n)},basename:function(d,
f){if(void 0!==f&&"string"!==typeof f)throw new TypeError('"ext" argument must be a string');b(d);var k=0,n=-1,p=!0,q;if(void 0!==f&&0<f.length&&f.length<=d.length){if(f.length===d.length&&f===d)return"";var r=f.length-1,u=-1;for(q=d.length-1;0<=q;--q){var x=d.charCodeAt(q);if(47===x){if(!p){k=q+1;break}}else-1===u&&(p=!1,u=q+1),0<=r&&(x===f.charCodeAt(r)?-1===--r&&(n=q):(r=-1,n=u))}k===n?n=u:-1===n&&(n=d.length);return d.slice(k,n)}for(q=d.length-1;0<=q;--q)if(47===d.charCodeAt(q)){if(!p){k=q+1;
break}}else-1===n&&(p=!1,n=q+1);return-1===n?"":d.slice(k,n)},extname:function(d){b(d);for(var f=-1,k=0,n=-1,p=!0,q=0,r=d.length-1;0<=r;--r){var u=d.charCodeAt(r);if(47===u){if(!p){k=r+1;break}}else-1===n&&(p=!1,n=r+1),46===u?-1===f?f=r:1!==q&&(q=1):-1!==f&&(q=-1)}return-1===f||-1===n||0===q||1===q&&f===n-1&&f===k+1?"":d.slice(f,n)},format:function(d){if(null===d||"object"!==ad(d))throw new TypeError('The "pathObject" argument must be of type Object. Received type '+ad(d));var f=d.dir||d.root,k=d.base||
(d.name||"")+(d.ext||"");d=f?f===d.root?f+k:f+"/"+k:k;return d},parse:function(d){b(d);var f={root:"",dir:"",base:"",ext:"",name:""};if(0===d.length)return f;var k=d.charCodeAt(0),n=47===k;if(n){f.root="/";var p=1}else p=0;for(var q=-1,r=0,u=-1,x=!0,y=d.length-1,D=0;y>=p;--y)if(k=d.charCodeAt(y),47===k){if(!x){r=y+1;break}}else-1===u&&(x=!1,u=y+1),46===k?-1===q?q=y:1!==D&&(D=1):-1!==q&&(D=-1);-1===q||-1===u||0===D||1===D&&q===u-1&&q===r+1?-1!==u&&(f.base=0===r&&n?f.name=d.slice(1,u):f.name=d.slice(r,
u)):(0===r&&n?(f.name=d.slice(1,q),f.base=d.slice(1,u)):(f.name=d.slice(r,q),f.base=d.slice(r,u)),f.ext=d.slice(q,u));0<r?f.dir=d.slice(0,r-1):n&&(f.dir="/");return f},sep:"/",delimiter:":",win32:null,posix:null};return JV=a.posix=a}(),Uk={},Wp={isString:function(b){return"string"==typeof b},isObject:function(b){return"object"==typeof b&&null!==b},isNull:function(b){return null===b},isNullOrUndefined:function(b){return null==b}};Uk.parse=nx;Uk.resolve=function(b,c){return nx(b,!1,!0).resolve(c)};
Uk.resolveObject=function(b,c){return b?nx(b,!1,!0).resolveObject(c):c};Uk.format=function(b){Wp.isString(b)&&(b=nx(b));return b instanceof ro?b.format():ro.prototype.format.call(b)};Uk.Url=ro;var s7=/^([a-z0-9.+-]+:)/i,t7=/:[0-9]*$/,u7=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,v7="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),GI=["'"].concat(v7),LV=["%","/","?",";","#"].concat(GI),MV=["/","?","#"],NV=/^[+a-z0-9A-Z_-]{0,63}$/,w7=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x7={javascript:!0,"javascript:":!0},HI=
{javascript:!0,"javascript:":!0},Gv={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};ro.prototype.parse=function(b,c,g){if(!Wp.isString(b))throw new TypeError("Parameter 'url' must be a string, not "+typeof b);var a=b.indexOf("?");a=-1!==a&&a<b.indexOf("#")?"?":"#";b=b.split(a);b[0]=b[0].replace(/\\/g,"/");a=b=b.join(a);if(a=a.trim(),!g&&1===b.split("#").length)if(b=u7.exec(a))return this.path=a,this.href=a,this.pathname=b[1],b[2]?(this.search=b[2],
this.query=c?kp.parse(this.search.substr(1)):this.search.substr(1)):c&&(this.search="",this.query={}),this;if(b=s7.exec(a)){var d=(b=b[0]).toLowerCase();this.protocol=d;a=a.substr(b.length)}if(g||b||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var f="//"===a.substr(0,2);!f||b&&HI[b]||(a=a.substr(2),this.slashes=!0)}if(!HI[b]&&(f||b&&!Gv[b])){var k,n;f=-1;for(g=0;g<MV.length;g++)-1!==(p=a.indexOf(MV[g]))&&(-1===f||p<f)&&(f=p);-1!==(n=-1===f?a.lastIndexOf("@"):a.lastIndexOf("@",f))&&(k=a.slice(0,n),a=a.slice(n+
1),this.auth=decodeURIComponent(k));f=-1;for(g=0;g<LV.length;g++){var p;-1!==(p=a.indexOf(LV[g]))&&(-1===f||p<f)&&(f=p)}-1===f&&(f=a.length);this.host=a.slice(0,f);a=a.slice(f);this.parseHost();this.hostname=this.hostname||"";k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(f=this.hostname.split(/\./),n=(g=0,f.length);g<n;g++)if((p=f[g])&&!p.match(NV)){b="";for(var q=0,r=p.length;q<r;q++)127<p.charCodeAt(q)?b+="x":b+=p[q];if(!b.match(NV)){n=f.slice(0,g);g=f.slice(g+
1);(p=p.match(w7))&&(n.push(p[1]),g.unshift(p[2]));g.length&&(a="/"+g.join(".")+a);this.hostname=n.join(".");break}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase();k||(this.hostname=Gt.toASCII(this.hostname));g=this.port?":"+this.port:"";this.host=(this.hostname||"")+g;this.href+=this.host;k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!x7[d])for(g=0,n=GI.length;g<n;g++)k=GI[g],-1!==a.indexOf(k)&&(p=encodeURIComponent(k),
p===k&&(p=escape(k)),a=a.split(k).join(p));g=a.indexOf("#");-1!==g&&(this.hash=a.substr(g),a=a.slice(0,g));g=a.indexOf("?");if(-1!==g?(this.search=a.substr(g),this.query=a.substr(g+1),c&&(this.query=kp.parse(this.query)),a=a.slice(0,g)):c&&(this.search="",this.query={}),a&&(this.pathname=a),Gv[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search)g=this.pathname||"",this.path=g+(this.search||"");return this.href=this.format(),this};ro.prototype.format=function(){var b=
this.auth||"";b&&(b=(b=encodeURIComponent(b)).replace(/%3A/i,":"),b+="@");var c=this.protocol||"",g=this.pathname||"",a=this.hash||"",d=!1,f="";this.host?d=b+this.host:this.hostname&&(d=b+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(d+=":"+this.port));this.query&&Wp.isObject(this.query)&&Object.keys(this.query).length&&(f=kp.stringify(this.query));b=this.search||f&&"?"+f||"";return c&&":"!==c.substr(-1)&&(c+=":"),this.slashes||(!c||Gv[c])&&!1!==d?(d="//"+(d||""),
g&&"/"!==g.charAt(0)&&(g="/"+g)):d||(d=""),a&&"#"!==a.charAt(0)&&(a="#"+a),b&&"?"!==b.charAt(0)&&(b="?"+b),c+d+(g=g.replace(/[?#]/g,function(k){return encodeURIComponent(k)}))+(b=b.replace("#","%23"))+a};ro.prototype.resolve=function(b){return this.resolveObject(nx(b,!1,!0)).format()};ro.prototype.resolveObject=function(b){if(Wp.isString(b)){var c=new ro;c.parse(b,!1,!0);b=c}c=new ro;for(var g=Object.keys(this),a=0;a<g.length;a++){var d=g[a];c[d]=this[d]}if(c.hash=b.hash,""===b.href)return c.href=
c.format(),c;if(b.slashes&&!b.protocol){var f=Object.keys(b);for(g=0;g<f.length;g++)a=f[g],"protocol"!==a&&(c[a]=b[a]);return Gv[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(b.protocol&&b.protocol!==c.protocol){if(!Gv[b.protocol]){f=Object.keys(b);for(g=0;g<f.length;g++)a=f[g],c[a]=b[a];return c.href=c.format(),c}if(c.protocol=b.protocol,b.host||HI[b.protocol])c.pathname=b.pathname;else{for(var k=(b.pathname||"").split("/");k.length&&!(b.host=k.shift()););b.host||
(b.host="");b.hostname||(b.hostname="");""!==k[0]&&k.unshift("");2>k.length&&k.unshift("");c.pathname=k.join("/")}if(c.search=b.search,c.query=b.query,c.host=b.host||"",c.auth=b.auth,c.hostname=b.hostname||b.host,c.port=b.port,c.pathname||c.search)c.path=(c.pathname||"")+(c.search||"");return c.slashes=c.slashes||b.slashes,c.href=c.format(),c}g=c.pathname&&"/"===c.pathname.charAt(0);var n=b.host||b.pathname&&"/"===b.pathname.charAt(0),p=g=n||g||c.host&&b.pathname;a=c.pathname&&c.pathname.split("/")||
[];d=(k=b.pathname&&b.pathname.split("/")||[],c.protocol&&!Gv[c.protocol]);if(d&&(c.hostname="",c.port=null,c.host&&(""===a[0]?a[0]=c.host:a.unshift(c.host)),c.host="",b.protocol&&(b.hostname=null,b.port=null,b.host&&(""===k[0]?k[0]=b.host:k.unshift(b.host)),b.host=null),g=g&&(""===k[0]||""===a[0])),n)c.host=b.host||""===b.host?b.host:c.host,c.hostname=b.hostname||""===b.hostname?b.hostname:c.hostname,c.search=b.search,c.query=b.query,a=k;else if(k.length)a||(a=[]),a.pop(),a=a.concat(k),c.search=
b.search,c.query=b.query;else if(!Wp.isNullOrUndefined(b.search))return d&&(c.hostname=c.host=a.shift(),(f=!!(c.host&&0<c.host.indexOf("@"))&&c.host.split("@"))&&(c.auth=f.shift(),c.host=c.hostname=f.shift())),c.search=b.search,c.query=b.query,Wp.isNull(c.pathname)&&Wp.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c;if(!a.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;n=a.slice(-1)[0];k=(c.host||b.host||1<
a.length)&&("."===n||".."===n)||""===n;for(var q=0,r=a.length;0<=r;r--)"."===(n=a[r])?a.splice(r,1):".."===n?(a.splice(r,1),q++):q&&(a.splice(r,1),q--);if(!g&&!p)for(;q--;q)a.unshift("..");!g||""===a[0]||a[0]&&"/"===a[0].charAt(0)||a.unshift("");k&&"/"!==a.join("/").substr(-1)&&a.push("");p=""===a[0]||a[0]&&"/"===a[0].charAt(0);d&&(c.hostname=c.host=p?"":a.length?a.shift():"",(f=!!(c.host&&0<c.host.indexOf("@"))&&c.host.split("@"))&&(c.auth=f.shift(),c.host=c.hostname=f.shift()));return(g||c.host&&
a.length)&&!p&&a.unshift(""),a.length?c.pathname=a.join("/"):(c.pathname=null,c.path=null),Wp.isNull(c.pathname)&&Wp.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=b.auth||c.auth,c.slashes=c.slashes||b.slashes,c.href=c.format(),c};ro.prototype.parseHost=function(){var b=this.host,c=t7.exec(b);c&&(":"!==(c=c[0])&&(this.port=c.substr(1)),b=b.substr(0,b.length-c.length));b&&(this.hostname=b)};Uk.Url;Uk.format;Uk.resolve;Uk.resolveObject;var OV={},PV=!1,QV=function(){function b(d){if("string"!==
typeof d)throw new TypeError("Path must be a string. Received "+JSON.stringify(d));}function c(d,f){for(var k="",n=0,p=-1,q=0,r,u=0;u<=d.length;++u){if(u<d.length)r=d.charCodeAt(u);else if(47===r)break;else r=47;if(47===r){if(p!==u-1&&1!==q)if(p!==u-1&&2===q){if(2>k.length||2!==n||46!==k.charCodeAt(k.length-1)||46!==k.charCodeAt(k.length-2))if(2<k.length){if(p=k.lastIndexOf("/"),p!==k.length-1){-1===p?(k="",n=0):(k=k.slice(0,p),n=k.length-1-k.lastIndexOf("/"));p=u;q=0;continue}}else if(2===k.length||
1===k.length){k="";n=0;p=u;q=0;continue}f&&(k=0<k.length?k+"/..":"..",n=2)}else k=0<k.length?k+("/"+d.slice(p+1,u)):d.slice(p+1,u),n=u-p-1;p=u;q=0}else 46===r&&-1!==q?++q:q=-1}return k}if(PV)return OV;PV=!0;var g=jl,a={resolve:function(){for(var d="",f=!1,k,n=arguments.length-1;-1<=n&&!f;n--){if(0<=n)var p=arguments[n];else void 0===k&&(k=g.cwd()),p=k;b(p);0!==p.length&&(d=p+"/"+d,f=47===p.charCodeAt(0))}d=c(d,!f);return f?0<d.length?"/"+d:"/":0<d.length?d:"."},normalize:function(d){b(d);if(0===d.length)return".";
var f=47===d.charCodeAt(0),k=47===d.charCodeAt(d.length-1);d=c(d,!f);0!==d.length||f||(d=".");0<d.length&&k&&(d+="/");return f?"/"+d:d},isAbsolute:function(d){b(d);return 0<d.length&&47===d.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var d,f=0;f<arguments.length;++f){var k=arguments[f];b(k);0<k.length&&(d=void 0===d?k:d+("/"+k))}return void 0===d?".":a.normalize(d)},relative:function(d,f){b(d);b(f);if(d===f)return"";d=a.resolve(d);f=a.resolve(f);if(d===f)return"";for(var k=
1;k<d.length&&47===d.charCodeAt(k);++k);for(var n=d.length,p=n-k,q=1;q<f.length&&47===f.charCodeAt(q);++q);for(var r=f.length-q,u=p<r?p:r,x=-1,y=0;y<=u;++y){if(y===u){if(r>u){if(47===f.charCodeAt(q+y))return f.slice(q+y+1);if(0===y)return f.slice(q+y)}else p>u&&(47===d.charCodeAt(k+y)?x=y:0===y&&(x=0));break}var D=d.charCodeAt(k+y),H=f.charCodeAt(q+y);if(D!==H)break;else 47===D&&(x=y)}p="";for(y=k+x+1;y<=n;++y)if(y===n||47===d.charCodeAt(y))p=0===p.length?p+"..":p+"/..";if(0<p.length)return p+f.slice(q+
x);q+=x;47===f.charCodeAt(q)&&++q;return f.slice(q)},_makeLong:function(d){return d},dirname:function(d){b(d);if(0===d.length)return".";for(var f=d.charCodeAt(0),k=47===f,n=-1,p=!0,q=d.length-1;1<=q;--q)if(f=d.charCodeAt(q),47===f){if(!p){n=q;break}}else p=!1;return-1===n?k?"/":".":k&&1===n?"//":d.slice(0,n)},basename:function(d,f){if(void 0!==f&&"string"!==typeof f)throw new TypeError('"ext" argument must be a string');b(d);var k=0,n=-1,p=!0,q;if(void 0!==f&&0<f.length&&f.length<=d.length){if(f.length===
d.length&&f===d)return"";var r=f.length-1,u=-1;for(q=d.length-1;0<=q;--q){var x=d.charCodeAt(q);if(47===x){if(!p){k=q+1;break}}else-1===u&&(p=!1,u=q+1),0<=r&&(x===f.charCodeAt(r)?-1===--r&&(n=q):(r=-1,n=u))}k===n?n=u:-1===n&&(n=d.length);return d.slice(k,n)}for(q=d.length-1;0<=q;--q)if(47===d.charCodeAt(q)){if(!p){k=q+1;break}}else-1===n&&(p=!1,n=q+1);return-1===n?"":d.slice(k,n)},extname:function(d){b(d);for(var f=-1,k=0,n=-1,p=!0,q=0,r=d.length-1;0<=r;--r){var u=d.charCodeAt(r);if(47===u){if(!p){k=
r+1;break}}else-1===n&&(p=!1,n=r+1),46===u?-1===f?f=r:1!==q&&(q=1):-1!==f&&(q=-1)}return-1===f||-1===n||0===q||1===q&&f===n-1&&f===k+1?"":d.slice(f,n)},format:function(d){if(null===d||"object"!==typeof d)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof d);var f=d.dir||d.root,k=d.base||(d.name||"")+(d.ext||"");d=f?f===d.root?f+k:f+"/"+k:k;return d},parse:function(d){b(d);var f={root:"",dir:"",base:"",ext:"",name:""};if(0===d.length)return f;var k=d.charCodeAt(0),
n=47===k;if(n){f.root="/";var p=1}else p=0;for(var q=-1,r=0,u=-1,x=!0,y=d.length-1,D=0;y>=p;--y)if(k=d.charCodeAt(y),47===k){if(!x){r=y+1;break}}else-1===u&&(x=!1,u=y+1),46===k?-1===q?q=y:1!==D&&(D=1):-1!==q&&(D=-1);-1===q||-1===u||0===D||1===D&&q===u-1&&q===r+1?-1!==u&&(f.base=0===r&&n?f.name=d.slice(1,u):f.name=d.slice(r,u)):(0===r&&n?(f.name=d.slice(1,q),f.base=d.slice(1,u)):(f.name=d.slice(r,q),f.base=d.slice(r,u)),f.ext=d.slice(q,u));0<r?f.dir=d.slice(0,r-1):n&&(f.dir="/");return f},sep:"/",
delimiter:":",win32:null,posix:null};return OV=a.posix=a}();const y7="undefined"!==typeof Deno?"windows"===Deno.build.os?"win32":Deno.build.os:void 0;Uk.URL="undefined"!==typeof URL?URL:null;Uk.pathToFileURL=function(b){let c=QV.resolve(b);b=b.charCodeAt(b.length-1);(47===b||II&&92===b)&&c[c.length-1]!==QV.sep&&(c+="/");b=new URL("file://");c.includes("%")&&(c=c.replace(z7,"%25"));!II&&c.includes("\\")&&(c=c.replace(A7,"%5C"));c.includes("\n")&&(c=c.replace(B7,"%0A"));c.includes("\r")&&(c=c.replace(C7,
"%0D"));c.includes("\t")&&(c=c.replace(D7,"%09"));b.pathname=c;return b};Uk.fileURLToPath=function(b){if("string"===typeof b)b=new URL(b);else if(!(b instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if("file:"!==b.protocol)throw new Deno.errors.InvalidData("invalid url scheme");if(II){var c=b.hostname;b=b.pathname;for(var g=0;g<b.length;g++)if("%"===b[g]){const a=b.codePointAt(g+2)||32;if("2"===b[g+1]&&102===a||"5"===b[g+1]&&99===a)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters");
}b=b.replace(E7,"\\");b=decodeURIComponent(b);if(""!==c)b=`\\\\${c}${b}`;else{c=b.codePointAt(1)|32;g=b[2];if(97>c||122<c||":"!==g)throw new Deno.errors.InvalidData("file url path must be absolute");b=b.slice(1)}}else{if(""!==b.hostname)throw new Deno.errors.InvalidData("invalid file url hostname");b=b.pathname;for(c=0;c<b.length;c++)if("%"===b[c]&&(g=b.codePointAt(c+2)||32,"2"===b[c+1]&&102===g))throw new Deno.errors.InvalidData("must not include encoded / characters");b=decodeURIComponent(b)}return b};
Uk.Url;Uk.format;Uk.resolve;Uk.resolveObject;Uk.URL;const II="win32"===y7,E7=/\//g,z7=/%/g,A7=/\\/g,B7=/\n/g,C7=/\r/g,D7=/\t/g,F7="undefined"!==typeof Deno?"windows"===Deno.build.os?"win32":Deno.build.os:void 0;Uk.URL="undefined"!==typeof URL?URL:null;Uk.pathToFileURL=function(b){let c=Vl.resolve(b);b=b.charCodeAt(b.length-1);(47===b||$F&&92===b)&&c[c.length-1]!==Vl.sep&&(c+="/");b=new URL("file://");c.includes("%")&&(c=c.replace(G7,"%25"));!$F&&c.includes("\\")&&(c=c.replace(H7,"%5C"));c.includes("\n")&&
(c=c.replace(I7,"%0A"));c.includes("\r")&&(c=c.replace(J7,"%0D"));c.includes("\t")&&(c=c.replace(K7,"%09"));b.pathname=c;return b};Uk.fileURLToPath=fQ;Uk.Url;Uk.format;Uk.resolve;Uk.resolveObject;Uk.parse;Uk.URL;const $F="win32"===F7,g0=/\//g,G7=/%/g,H7=/\\/g,I7=/\n/g,J7=/\r/g,K7=/\t/g;Vl._makeLong;Vl.basename;Vl.delimiter;Vl.dirname;Vl.extname;Vl.format;Vl.isAbsolute;Vl.join;Vl.normalize;Vl.parse;Vl.posix;Vl.relative;Vl.resolve;Vl.sep;Vl.win32;var RV={},SV=/%[a-f0-9]{2}/gi,TV=/(%[a-f0-9]{2})+/gi;
RV=function(b){if("string"!==typeof b)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof b+"`");try{return b=b.replace(/\+/g," "),decodeURIComponent(b)}catch(k){for(var c={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},g=TV.exec(b);g;){try{c[g[0]]=decodeURIComponent(g[0])}catch(n){var a=g[0];try{var d=decodeURIComponent(a)}catch(p){d=a.match(SV);for(var f=1;f<d.length;f++)a=aG(d,f).join(""),d=a.match(SV);d=a}d!==g[0]&&(c[g[0]]=d)}g=TV.exec(b)}c["%C2"]="\ufffd";g=Object.keys(c);
for(a=0;a<g.length;a++)d=g[a],b=b.replace(new RegExp(d,"g"),c[d]);return b}};var Xr={},k0=Pl,lQ=p7,h0=Uk,i0=Vl,j0=RV,UV=/[#@] sourceMappingURL=([^\s'"]*)/,l0=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+UV.source+")\\s*\\*/|//(?:"+UV.source+"))\\s*"),m0=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,n0=/^(?:application|text)\/json$/,o0="utf-8",p0=/\/?$/,L7=Xr={resolveSourceMap:iQ,resolveSourceMapSync:kQ,resolveSources:mQ,resolveSourcesSync:oQ,resolve:function(b,c,g,a,d){function f(n){mQ(n.map,n.sourcesRelativeTo,
g,a,function(p,q){if(p)return d(p);n.sourcesResolved=q.sourcesResolved;n.sourcesContent=q.sourcesContent;d(null,n)})}"function"===typeof a&&(d=a,a={});if(null===b){var k={sourceMappingURL:null,url:c,sourcesRelativeTo:c,map:null};b=ox(c);g(b,function(n,p){if(n)return n.sourceMapData=k,d(n);k.map=String(p);try{k.map=$u(k.map,k)}catch(q){return d(q)}f(k)})}else iQ(b,c,g,function(n,p){if(n)return d(n);if(!p)return d(null,null);f(p)})},resolveSync:function(b,c,g,a){if(null===b)b={sourceMappingURL:null,
url:c,sourcesRelativeTo:c,map:null},b.map=hQ(g,c,b),b.map=$u(b.map,b);else if(b=kQ(b,c,g),!b)return null;c=oQ(b.map,b.sourcesRelativeTo,g,a);b.sourcesResolved=c.sourcesResolved;b.sourcesContent=c.sourcesContent;return b},parseMapToJSON:$u};Xr.resolveSourceMap;Xr.resolveSourceMapSync;Xr.resolveSources;Xr.resolveSourcesSync;Xr.resolve;Xr.resolveSync;Xr.parseMapToJSON;var nA={},pQ=!1,cG={},qQ=!1,av={},rQ=!1,Zo={},sQ=!1,fm={},uQ=!1,r0="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,Xp={},wQ=!1,bv={},yQ=!1,oA={},AQ=!1,BQ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,cv={},DQ=!1,An={},EQ=!1,pA={},FQ=!1,u0="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,yr={},GQ=!1,qx={},HQ=!1,rk={},JQ=!1,x0="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Hv={},VV=!1,wm={},WV=!1;const Ht=function(){function b(x){for(var y={F_OK:p,R_OK:q,W_OK:r,X_OK:u,constants:n.constants,Stats:g.default,
Dirent:a.default},D=0,H=f;D<H.length;D++){var I=H[D];"function"===typeof x[I]&&(y[I]=x[I].bind(x))}D=0;for(H=k;D<H.length;D++)I=H[D],"function"===typeof x[I]&&(y[I]=x[I].bind(x));y.StatWatcher=x.StatWatcher;y.FSWatcher=x.FSWatcher;y.WriteStream=x.WriteStream;y.ReadStream=x.ReadStream;y.promises=x.promises;y._toUnixTimestamp=d.toUnixTimestamp;return y}if(WV)return wm;WV=!0;var c=wm&&wm.__assign||function(){c=Object.assign||function(x){for(var y,D=1,H=arguments.length;D<H;D++){y=arguments[D];for(var I in y)Object.prototype.hasOwnProperty.call(y,
I)&&(x[I]=y[I])}return x};return c.apply(this,arguments)};Object.defineProperty(wm,"__esModule",{value:!0});wm.fs=wm.createFsFromVolume=wm.vol=wm.Volume=void 0;var g=dG(),a=xQ(),d=IQ();VV||(VV=!0,Object.defineProperty(Hv,"__esModule",{value:!0}),Hv.fsProps="constants F_OK R_OK W_OK X_OK Stats".split(" "),Hv.fsSyncMethods="renameSync ftruncateSync truncateSync chownSync fchownSync lchownSync chmodSync fchmodSync lchmodSync statSync lstatSync fstatSync linkSync symlinkSync readlinkSync realpathSync unlinkSync rmdirSync mkdirSync mkdirpSync readdirSync closeSync openSync utimesSync futimesSync fsyncSync writeSync readSync readFileSync writeFileSync appendFileSync existsSync accessSync fdatasyncSync mkdtempSync copyFileSync createReadStream createWriteStream".split(" "),
Hv.fsAsyncMethods="rename ftruncate truncate chown fchown lchown chmod fchmod lchmod stat lstat fstat link symlink readlink realpath unlink rmdir mkdir mkdirp readdir close open utimes futimes fsync write read readFile writeFile appendFile exists access fdatasync mkdtemp copyFile watchFile unwatchFile watch".split(" "));var f=Hv.fsSyncMethods,k=Hv.fsAsyncMethods,n=px(),p=n.constants.F_OK,q=n.constants.R_OK,r=n.constants.W_OK,u=n.constants.X_OK;wm.Volume=d.Volume;wm.vol=new d.Volume;wm.createFsFromVolume=
b;wm.fs=b(wm.vol);wm=c(c({},wm),wm.fs);wm.semantic=!0;return wm}();Ht.__esModule;Ht.fs;Ht.createFsFromVolume;Ht.vol;Ht.Volume;Ht.semantic;const mn=IQ();mn.__esModule;mn.FSWatcher;mn.StatWatcher;mn.Volume;mn.toUnixTimestamp;mn.bufferToEncoding;mn.dataToBuffer;mn.dataToStr;mn.pathToSteps;mn.filenameToSteps;mn.pathToFilename;mn.flagsToNumber;mn.FLAGS;mn.ReadStream;mn.WriteStream;const {vol:Oq,createFsFromVolume:M7}=Ht;Oq.fromNestedJSON({"/dev":{stdin:"",stdout:"",stderr:""},"/usr/bin":{},"/home":{},
"/tmp":{}});Oq.releasedFds=[2,1,0];Oq.openSync("/dev/stdin","w");Oq.openSync("/dev/stdout","r");Oq.openSync("/dev/stderr","r");KQ("/dev/stdout",1,console.log);KQ("/dev/stderr",2,console.error);const ol=M7(Oq);ol.opendir=()=>Un("opendir");ol.opendirSync=()=>Un("opendirSync");ol.promises.opendir=()=>Un("promises.opendir");ol.cp=()=>Un("cp");ol.cpSync=()=>Un("cpSync");ol.promises.cp=()=>Un("promises.cp");ol.readv=()=>Un("readv");ol.readvSync=()=>Un("readvSync");ol.rm=()=>Un("rm");ol.rmSync=()=>Un("rmSync");
ol.promises.rm=()=>Un("promises.rm");ol.Dir=()=>Un("Dir");ol.promises.watch=()=>Un("promises.watch");ol.FileReadStream=ol.ReadStream;ol.FileWriteStream=ol.WriteStream;ol.promises.readFile=function(b){return async function(c,...g){return c instanceof URL?b(await gG(c),...g):b(c,...g)}}(ol.promises.readFile);ol.readFile=function(b){return function(c,...g){const a=g[g.length-1];c instanceof URL&&"function"===typeof a?gG(c).then(d=>{b(d,...g)},a):b(c,...g)}}(ol.readFile);ol.readFileSync=function(b){return function(c,
...g){return c instanceof URL?b(gG(c,!0),...g):b(c,...g)}}(ol.readFileSync);const {existsSync:y0,writeFileSync:z0}=ol;var hG="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,XV={},LQ=zV,N7=sl;XV=rm;N7(rm,LQ);rm.prototype.compile=function(b){return b.stylesheet.rules.map((this||hG).visit,this||hG).join("")};rm.prototype.comment=function(b){return this.emit("",b.position)};rm.prototype.import=function(b){return this.emit("@import "+b.import+";",b.position)};rm.prototype.media=
function(b){return this.emit("@media "+b.media,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};rm.prototype.document=function(b){return this.emit("@"+(b.vendor||"")+"document "+b.document,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};rm.prototype.charset=function(b){return this.emit("@charset "+b.charset+";",b.position)};rm.prototype.namespace=function(b){return this.emit("@namespace "+b.namespace+";",b.position)};rm.prototype.supports=function(b){return this.emit("@supports "+
b.supports,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};rm.prototype.keyframes=function(b){return this.emit("@"+(b.vendor||"")+"keyframes "+b.name,b.position)+this.emit("{")+this.mapVisit(b.keyframes)+this.emit("}")};rm.prototype.keyframe=function(b){var c=b.declarations;return this.emit(b.values.join(","),b.position)+this.emit("{")+this.mapVisit(c)+this.emit("}")};rm.prototype.page=function(b){var c=b.selectors.length?b.selectors.join(", "):"";return this.emit("@page "+c,b.position)+
this.emit("{")+this.mapVisit(b.declarations)+this.emit("}")};rm.prototype["font-face"]=function(b){return this.emit("@font-face",b.position)+this.emit("{")+this.mapVisit(b.declarations)+this.emit("}")};rm.prototype.host=function(b){return this.emit("@host",b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};rm.prototype["custom-media"]=function(b){return this.emit("@custom-media "+b.name+" "+b.media+";",b.position)};rm.prototype.rule=function(b){var c=b.declarations;return c.length?
this.emit(b.selectors.join(","),b.position)+this.emit("{")+this.mapVisit(c)+this.emit("}"):""};rm.prototype.declaration=function(b){return this.emit(b.property+":"+b.value,b.position)+this.emit(";")};var O7=XV,nn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Uq={},YV=Vl;Uq=function(b){b._comment=b.comment;b.map=new qo;b.position={line:1,column:1};b.files={};for(var c in Uq)b[c]=Uq[c]};const ZV=function(b){return"\\"===YV.sep?b.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,
"/"):b};Uq.updatePosition=function(b){var c=b.match(/\n/g);c&&((this||nn).position.line+=c.length);c=b.lastIndexOf("\n");(this||nn).position.column=~c?b.length-c:(this||nn).position.column+b.length};Uq.emit=function(b,c){if(c){var g=ZV(c.source||"source.css");(this||nn).map.addMapping({source:g,generated:{line:(this||nn).position.line,column:Math.max((this||nn).position.column-1,0)},original:{line:c.start.line,column:c.start.column-1}});this.addFile(g,c)}this.updatePosition(b);return b};Uq.addFile=
function(b,c){"string"!==typeof c.content||Object.prototype.hasOwnProperty.call((this||nn).files,b)||((this||nn).files[b]=c.content)};Uq.applySourceMaps=function(){Object.keys((this||nn).files).forEach(function(b){var c=(this||nn).files[b];(this||nn).map.setSourceContent(b,c);if(!1!==(this||nn).options.inputSourcemaps&&(c=L7.resolveSync(c,b,ol.readFileSync))){var g=new ml(c.map);(this||nn).map.applySourceMap(g,b,ZV(YV.dirname(c.sourcesRelativeTo)))}},this||nn)};Uq.comment=function(b){return/^# sourceMappingURL=/.test(b.comment)?
this.emit("",b.position):this._comment(b)};var P7=Uq,Q7={},R7=Q7=function(b,c){c=c||{};var g=c.compress?new O7(c):new o7(c);return c.sourcemap?(P7(g),b=g.compile(b),g.applySourceMaps(),c="generator"===c.sourcemap?g.map:g.map.toJSON(),{code:b,map:c}):b=g.compile(b)},By={};By.parse=m7;By.stringify=R7;By.parse;By.stringify;var Gk=window.lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js");Gk.promise=yj;Gk.pt=wl;Gk.Morph=gp;Gk.vdom=Mx;Gk.addOrChangeCSSDeclaration=zq;Gk.css=By;var EB=Gk.vdom;
Gk.diff=EB.diff;Gk.patch=EB.patch;Gk.h=EB.h;Gk.createElement=EB.create;(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),g=c.hasOwnProperty("CustomVNode")&&"function"===typeof c.CustomVNode?c.CustomVNode:c.CustomVNode=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d){this.morph=a;
this.renderer=d;this.morphVtree=null;this.key="custom-".concat(a.id)}},{key:"type",get:function(){return"Widget"}},{key:"renderMorph",value:function(){var a=this.morph,d=this.morphVtree=this.renderer.renderMorph(a);"customNode-key-"+a.id;a._updateCSSDeclaration&&(a.ensureCSSDeclaration(),a._updateCSSDeclaration=!1);return d}},{key:"init",value:function(){var a=Gk.createElement(this.renderMorph(),this.renderer.domEnvironment);a.insertBefore(this.morph.domNode,a.childNodes[0]);this.morph.cssDeclaration&&
this.morph.ensureCSSDeclaration();return a}},{key:"update",value:function(a,d){a=a.morphVtree||this.renderMorph();var f=this.renderMorph();a=Gk.diff(a,f);Gk.patch(d,a);this.morph.afterRenderHook&&this.morph.afterRenderHook();return null}},{key:"destroy",value:function(a){(a=this.renderer.domEnvironment.document.getElementById("css-for-"+this.morph.id))&&a.remove();console.log("[HTMLMorph] node of ".concat(this.morph.name," gets removed from DOM"))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"CustomVNode"}}],
c,{pathInPackage:function(){return"./html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:397,end:2430})})(void 0);var Iv=bd("ag",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),g=c.hasOwnProperty("HTMLMorph")&&"function"===typeof c.HTMLMorph?c.HTMLMorph:c.HTMLMorph=function(a){if(!a||
!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"isHTMLMorph",get:function(){return!0}},{key:"ensureCSSDeclaration",value:function(){var a=this;try{var d=Gk.css.parse(this.cssDeclaration);this.whenRendered().then(function(){d.stylesheet.rules.forEach(function(f){f.selectors&&(f.selectors=f.selectors.map(function(k){return"#".concat(a.id," ").concat(k)}))});Gk.addOrChangeCSSDeclaration("css-for-"+a.id,
Gk.css.stringify(d))})}catch(f){console.error("Error setting cssDeclaration of ".concat(this,": ").concat(f))}}},{key:"defaultHTML",get:function(){return'\n<div style="display: flex;\n            align-items: center;\n            justify-content: center;\n            height: 100%;\n            background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n  <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;HTML&#x2F;&gt;</p>\n</div>'}},
{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return new Gk.CustomVNode(this,a)}},{key:"menuItems",value:function(){var a=this,d=Ve._get(Object.getPrototypeOf(g.prototype),"menuItems",this).call(this);d.unshift(["edit CSS...",function(){return a.world().execCommand("open workspace",{language:"css",content:a.cssDeclaration,target:a})}],["edit html...",function(){return a.world().execCommand("open workspace",{language:"html",
content:a.html,target:a})}],{isDivider:!0});return d}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"HTMLMorph"}},{key:"properties",get:function(){return{extent:{defaultValue:Gk.pt(420,330)},html:{after:["cssDeclaration"],isStyleProp:!0,initialize:function(){this.html=this.defaultHTML},get:function(){return this.domNode.innerHTML},set:function(a){this.domNode.innerHTML=a;var d=[this].concat(db(this.ownerChain())).find(function(D){return D.master});if(d)d.master.onMorphChange(this,
{prop:"html",value:a});if(a.includes("<script")){a=this.domNode.querySelectorAll("script");a=fa(a);var f;try{for(a.s();!(f=a.n()).done;){var k=f.value,n=k.parentNode;k.remove();var p=document.createElement("script"),q=fa(k.attributes),r;try{for(q.s();!(r=q.n()).done;){var u=r.value;p.setAttribute(u.name,u.value)}}catch(D){q.e(D)}finally{q.f()}var x=fa(k.childNodes),y;try{for(x.s();!(y=x.n()).done;)p.appendChild(y.value)}catch(D){x.e(D)}finally{x.f()}n.appendChild(p)}}catch(D){a.e(D)}finally{a.f()}}}},
domNodeTagName:{readOnly:!0,get:function(){return"div"}},domNodeStyle:{readOnly:!0,get:function(){return"position: absolute; width: 100%; height: 100%;"}},domNode:{derived:!0,get:function(){this._domNode||(this._domNode=this.document.createElement(this.domNodeTagName),this._domNode.setAttribute("style",this.domNodeStyle));return this._domNode},set:function(a){this.domNode.parentNode&&this.domNode.parentNode.replaceChild(a,this.domNode);return this._domNode=a}},document:{readOnly:!0,get:function(){return this.env.domEnv.document}},
scrollExtent:{readOnly:!0,get:function(){return Gk.pt(this.domNode.scrollWidth,this.domNode.scrollHeight)}},cssDeclaration:{isStyleProp:!0,set:function(a){this.setProperty("cssDeclaration",a);a?(this.makeDirty(),this._updateCSSDeclaration=!0):(a=this.env.domEnv.document.getElementById("css-for-"+this.id))&&a.remove()}}}}}],c,{pathInPackage:function(){return"./html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2755,end:7463})}(Gk.Morph));Gk.HTMLMorph=Iv;Gk.HTMLMorph=Iv;var FB=bd("bQ",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),g=c.hasOwnProperty("IFrameMorph")&&"function"===typeof c.IFrameMorph?c.IFrameMorph:c.IFrameMorph=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:"isIFrameMorph",
get:function(){return!0}},{key:"reload",value:function(){return this.src?this.loadURL(this.src):this.srcDoc?this.displayHTML(this.srcDoc):null}},{key:"whenLoaded",value:function(){return this._whenLoaded||Promise.resolve()}},{key:"displayHTML",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p,q,r,u=arguments;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:n=1<u.length&&void 0!==u[1]?u[1]:{};p=n.keepScroll;if(q=void 0===p?!0:p)r=this.iframeScroll;
this.srcDoc=f;x.next=6;return this.whenLoaded();case 6:return q&&r&&(this.iframeScroll=r),x.abrupt("return",this);case 8:case "end":return x.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"loadURL",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p,q,r,u=arguments;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:n=1<u.length&&void 0!==u[1]?u[1]:{};p=n.keepScroll;if(q=void 0===p?!0:p)r=this.iframeScroll;this.src=f;
x.next=6;return this.whenLoaded();case 6:return q&&r&&(this.iframeScroll=r),x.abrupt("return",this);case 8:case "end":return x.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"defaultSrcDoc",get:function(){return'\n    <div style="display: flex;\n                align-items: center;\n                justify-content: center;\n                height: 100%;\n                background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n      <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;iFrame&#x2F;&gt;</p>\n    </div>'}},
{key:"defaultHTML",get:function(){return'<iframe width="100%" height="100%" frameBorder="false" srcdoc=""></iframe>'}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"example",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return k=(new Gk.IFrameMorph).openInWindow({title:"iframe"}).targetMorph,k.srcDoc="",k.src="http://localhost:9011/worlds/html%20export",n.next=
5,k.loadURL("https://google.com");case 5:return k.iframe.src,k.iframe.srcDoc,k.src="",k.srcDoc="fooo",n.next=11,k.reload();case 11:case "end":return n.stop()}},f)}));return function(){return a.apply(this,arguments)}}()},{key:"properties",get:function(){return{html:{initialize:function(){this.html=this.defaultHTML;this.srcDoc=this.defaultSrcDoc}},iframe:{derived:!0,readOnly:!0,after:["domNode"],get:function(){return this.domNode.querySelector("iframe")}},src:{derived:!0,after:["iframe"],get:function(){return this.iframe.src},
set:function(a){this.iframe.removeAttribute("srcDoc");this.iframe.src=a;a=Gk.promise.deferred();var d=a.resolve;this._whenLoaded=a.promise;this.iframe.onload=function(f){return d(f)}}},srcDoc:{derived:!0,after:["iframe"],get:function(){return this.iframe.srcdoc},set:function(a){this.iframe.removeAttribute("src");this.iframe.srcdoc=a;this._whenLoaded=this.whenRendered().then(function(){return Gk.promise.delay(20)})}},iframeScroll:{derived:!0,after:["iframe"],get:function(){try{var a=this.iframe.contentWindow;
return Gk.pt(a.scrollX,a.scrollY)}catch(d){return Gk.pt(0,0)}},set:function(a){try{this.iframe.contentWindow.scrollTo(a.x,a.y)}catch(d){}}}}}}],c,{pathInPackage:function(){return"./html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7471,end:10907})}(Gk.HTMLMorph));Gk.IFrameMorph=FB;Gk.IFrameMorph=FB;var S7=Object.freeze({__proto__:null,
HTMLMorph:Iv,IFrameMorph:FB}),Ml=window.lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js");Ml.arr=aj;Ml.obj=bj;Ml.rect=ko;Ml.ShadowObject=Pr;Ml.morph=Sm;var GB=bd("bY",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js"),g=c.hasOwnProperty("StyleSheet")&&"function"===typeof c.StyleSheet?c.StyleSheet:c.StyleSheet=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d){Ml.obj.isObject(a)&&!d&&(d=a,a=null);this.rules=d;for(var f in d)d[f]=this.unwrapFoldedProps(d[f]);this.name=a}},{key:"copy",value:function(){var a={},d;for(d in this.rules)a[d]=Object.assign({},this.rules[d]);return new Ml.StyleSheet(this.name,a)}},{key:"__only_serialize__",get:function(){return["rules","context"]}},{key:"context",set:function(a){this._context=a}},{key:"context",get:function(){return this._context}},
{key:"unwrapFoldedProps",value:function(a){["borderRadius","borderWidth","borderColor","borderStyle"].forEach(function(d){if(d in a){var f=a[d];f||(f=0);a[d]=4==Ml.arr.intersect(Ml.obj.keys(f),"top left bottom right topLeft topRight bottomLeft bottomRight".split(" ")).length?f:{top:f,bottom:f,right:f,left:f,valueOf:function(){return f}}}});return a}},{key:"removeRule",value:function(a){delete this.rules[a];this.context.requestStyling()}},{key:"setRule",value:function(a,d){this.rules[a]=this.unwrapFoldedProps(d);
this.context.requestStyling()}},{key:"toggleRule",value:function(a,d){this.rules[a]._deactivated=!d;this.context.requestStyling()}},{key:"applicableRules",value:function(){var a={},d;for(d in this.rules)a[d]={styleSheet:this,rule:d};return a}},{key:"toJSExpr",value:function(){return"new StyleSheet(".concat(Ml.obj.inspect(this.rules,{customPrinter:function(a,d,f){return a&&a.isColor||a&&a.isGradient?a.toJSExpr():a&&a.isPoint?a.toString():a&&[a.top,a.left,a.right,a.bottom].every(function(k){return k&&
Ml.obj.equals(k,a.top)})?f(a.top):a&&Ml.obj.keys(a).includes("_rev")?f(Ml.obj.dissoc(a,["_rev","_deactivated"])):d},escapeKeys:!0}),")")}},{key:"applyRule",value:function(a,d,f){var k=this.rules[a];if(k._deactivated)return{};k=Ml.obj.dissoc(k,["_deactivated"]);return d.withMetaDo({styleSheetChange:!0},function(){if("layout"in k){var n=k.layout.copy();n.container=d;k.layout=n}"dropShadow"in k&&(k.dropShadow=new Ml.ShadowObject(k.dropShadow),k.dropShadow.morph=d);"padding"in k&&(k.padding=k.padding.isRect?
k.padding:Ml.rect(k.padding,k.padding));n=Ml.obj.keys(k).filter(function(u){return!Ml.obj.equals(d[u],k[u])});n=Ml.obj.select(k,n);var p=d.propertiesAndPropertySettings().properties,q={},r;for(r in k)q[r]=p[r]&&p[r].defaultValue||d[r];f?d.animate(Object.assign({},n,{duration:f.duration,easing:f.easing})):Object.assign(d,n);return q})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"StyleSheet"}}],c,{pathInPackage:function(){return"./style-sheets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:202,end:3947})}(void 0));Ml.StyleSheet=GB;Ml.StyleSheet=GB;var Yi=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js");Yi.obj=bj;Yi.arr=aj;Yi.num=Gm;Yi.Rectangle=fn;Yi.rect=ko;Yi.Color=Bn;Yi.pt=wl;Yi.connect=lr;Yi.noUpdate=ju;Yi.signal=Ln;Yi.disconnect=hu;Yi.Text=Ev;Yi.Range=Ft;Yi.HTMLMorph=Iv;Yi.Icon=qt;Yi.morph=Sm;var HB=bd("ad",
function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),g=c.hasOwnProperty("InputLine")&&"function"===typeof c.InputLine?c.InputLine:c.InputLine=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Ve._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,a);Yi.connect(this,"textChange",this,"onInputChanged");Yi.connect(this,"selectionChange",this,"fixCursor")}},{key:"menuItems",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.t0=[{command:"change placeholder",target:this},{isDivider:!0}],k.t1=db,k.next=4,Ve._get(Object.getPrototypeOf(g.prototype),"menuItems",this).call(this);case 4:return k.t2=
k.sent,k.t3=(0,k.t1)(k.t2),k.abrupt("return",k.t0.concat.call(k.t0,k.t3));case 7:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"onChange",value:function(a){"extent fontSize padding fontFamily position selection".split(" ").includes(a.prop)&&this.updatePlaceholder();return Ve._get(Object.getPrototypeOf(g.prototype),"onChange",this).call(this,a)}},{key:"isInputLine",get:function(){return!0}},{key:"allowDuplicatesInHistory",get:function(){return!1}},
{key:"resetHistory",value:function(){this.inputHistory={items:[],max:50,index:0}}},{key:"inputHistory",get:function(){return this._inputHistory?this._inputHistory:this._inputHistory=this.historyId?this.constructor.getHistory(this.historyId):{items:[],max:30,index:0}}},{key:"inputHistory",set:function(a){this._inputHistory=a;this.historyId&&this.constructor.setHistory(this.historyId,this._inputHistory)}},{key:"clear",value:function(){this.input=""}},{key:"focus",value:function(){this.fixCursor();Ve._get(Object.getPrototypeOf(g.prototype),
"focus",this).call(this)}},{key:"onBlur",value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),"onBlur",this).call(this,a);this.updatePlaceholder()}},{key:"fitToLineHeight",value:function(){this.height=this.defaultLineHeight+this.padding.top()+this.padding.bottom()}},{key:"indicateError",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.borderColor=Yi.Color.red,this._errorIcon=this.addMorph(this._errorIcon||
Yi.morph({type:"label",value:[" "+f,{fontSize:this.fontSize}," ",{}].concat(db(Yi.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:this.fontSize,fontColor:Yi.Color.red,opacity:0,reactsToPointer:!1,fill:Yi.Color.white.withA(.9)})),n.next=4,this.whenRendered();case 4:this._errorIcon.opacity=1,this._errorIcon.rightCenter=this.innerBounds().insetBy(10).rightCenter();case 6:case "end":return n.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"clearError",
value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=Yi.Color.transparent)}},{key:"updatePlaceholder",value:function(){var a=this.getSubmorphNamed("placeholder");if(a)if(this.input.length)a.visible=!1;else{var d=this.innerBounds();a.fontSize=this.fontSize;a.visible=!0;a.height=this.height;a.padding=this.padding;a.defaultTextStyle=this.defaultTextStyle;a.lineHeight=this.height+"px";a.fit();a.topLeft=this.label.length?d.topLeft().addXY(0,
this.borderWidth):d.topLeft().withX(0)}}},{key:"fixCursor",value:function(){this.label&&(this.positionToIndex(this.selection.lead)<this.label.length&&(this.selection.lead=this.indexToPosition(this.label.length)),this.positionToIndex(this.selection.anchor)<this.label.length&&(this.selection.anchor=this.indexToPosition(this.label.length)))}},{key:"acceptInput",value:function(){var a=this.input;this.onInput(a);return a}},{key:"onInput",value:function(a){0<this.input.length&&this.addInputToHistory(this.input);
this.clearOnInput&&this.clear();Yi.signal(this,"inputAccepted",a)}},{key:"onInputChanged",value:function(a){Yi.signal(this,"inputChanged",a);this.clearError();this.updatePlaceholder()}},{key:"onMouseDown",value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"deleteText",value:function(a){a=a.isRange?a:new Yi.Range(a);if(!a.isEmpty())return a=a.subtract({start:{row:0,column:0},end:{row:0,column:this.label.length}})[0],
Ve._get(Object.getPrototypeOf(g.prototype),"deleteText",this).call(this,a)}},{key:"addInputToHistory",value:function(a){var d=this.inputHistory,f=d.items;if(Yi.arr.last(f)!==a){f.push(a);f.length>d.max&&(d.items=f=f.slice(-d.max));d.index=f.length-1;if(!this.allowDuplicatesInHistory)for(f=d.items.length-1;f--;)d.items[f]===a&&(d.items.splice(f,1),d.index--);this.historyId&&this.constructor.addHistoryToLocalStorage(this.historyId,d)}}},{key:"browseHistory",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k,
n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return k=this.inputHistory.items.map(function(u,x){return{isListItem:!0,string:u,value:x}}).reverse(),r.next=3,this.world().filterableListPrompt("Choose item:",k,{commands:[this.histEditCommandForHistBrowse()]});case 3:n=r.sent,p=Wb(n.selected,1),q=p[0],"number"===typeof q&&this.setAndShowHistItem(q),this.focus();case 8:case "end":return r.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},
{key:"histEditCommandForHistBrowse",value:function(){var a=this;return{name:"edit history "+this.historyId,exec:function(){var d=Cb(regeneratorRuntime.mark(function n(k){var p,q,r,u;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return p=a.inputHistory.items.slice().reverse(),x.next=3,k.world().editListPrompt("edit history "+a.historyId,p);case 3:q=x.sent;r=q.status;u=q.list;if("canceled"!==r){x.next=8;break}return x.abrupt("return",!0);case 8:return p=p.filter(function(y){return y.isListItem?
u.includes(y.value):u.includes(y)}),a.inputHistory=Object.assign({},a.inputHistory,{items:p}),k.get("list").items=p.map(function(y,D){return{isListItem:!0,string:y,value:D}}).reverse(),x.abrupt("return",!0);case 12:case "end":return x.stop()}},n)}));return function(k){return d.apply(this,arguments)}}()}}},{key:"setAndShowHistItem",value:function(a){var d=this.inputHistory,f=d.items,k=f.length-1;Yi.num.between(a,0,k+1)?d.index=a:d.index=a=k;this.input!==f[a]&&"undefined"!==typeof f[a]&&(this.input=
f[a])}},{key:"showHistItem",value:function(a){a=a||"next";var d=this.inputHistory,f=d.items,k=f.length-1,n=d.index;Yi.num.between(n,0,k+1)||(d.index=n=k);if(this.input!==f[n]&&"undefined"!==typeof f[n])this.input=f[n];else{if("next"===a){if(n>k)return;n=++d.index}else{if(0>=n)return;n=--d.index}this.input=f[n]||""}}},{key:"commands",get:function(){var a=this;return[{name:"change placeholder",exec:function(){var d=Cb(regeneratorRuntime.mark(function k(){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=
p.next){case 0:return p.next=2,a.world().prompt("Enter Placeholder:",{input:a.placeholder});case 2:if(n=p.sent)a.placeholder=n;case 4:case "end":return p.stop()}},k)}));return function(){return d.apply(this,arguments)}}()},{name:"accept input",exec:function(){a.acceptInput();return!0}},{name:"show previous input from history",exec:function(){a.showHistItem("prev");return!0}},{name:"show next input from history",exec:function(){a.showHistItem("next");return!0}},{name:"browse history",exec:function(){a.browseHistory();
return!0}},{name:"remove items from history",exec:function(){var d=Cb(regeneratorRuntime.mark(function n(k){var p,q,r,u;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return p=k.inputHistory,q=p.items.map(function(y,D){return{isListItem:!0,string:y,value:D}}).reverse(),x.next=4,k.world().filterableListPrompt("Choose items to delete:",q,{multiSelect:!0});case 4:return r=x.sent,u=r.selected,u.reverse().forEach(function(y){y<p.index&&p.index--;p.items.splice(y,1)}),k.inputHistory=
p,x.abrupt("return",!0);case 9:case "end":return x.stop()}},n)}));return function(k){return d.apply(this,arguments)}}()}].concat(Ve._get(Object.getPrototypeOf(g.prototype),"commands",this))}},{key:"keybindings",get:function(){return Ve._get(Object.getPrototypeOf(g.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"},{keys:"Up|Ctrl-Up|Alt-P",command:"show previous input from history"},{keys:"Down|Ctrl-Down|Alt-N",command:"show next input from history"},
{keys:"Alt-H",command:"browse history"},{keys:"Alt-Shift-H",command:"remove items from history"}])}},{key:"htmlExport_transformNode",value:function(a){var d=a.getRootNode().createElement("input"),f=a.querySelector(".newtext-text-layer.actual");d.id=a.id;d.className=a.className;d.style=a.style.cssText;Object.assign(d.style,Yi.obj.select(f.style,"padding font-family font-weight font-style text-decoration font-size color".split(" ")));d.placeholder=this.placeholder;d.type="text";d.autocomplete=d.name=
this.name.replace(/[\s"]/g,"-");return d}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InputLine"}},{key:"getHistoryFromLocalSorage",value:function(a){if("undefined"===typeof localStorage)return null;try{var d=localStorage.getItem("lively.morphic-inputline-"+a);return d?JSON.parse(d):null}catch(f){return null}}},{key:"addHistoryToLocalStorage",value:function(a,d){if("undefined"!==typeof localStorage)try{localStorage.setItem("lively.morphic-inputline-"+a,JSON.stringify(d))}catch(f){console.error(f)}}},
{key:"histories",get:function(){this._histories||(this._histories=new Map);return this._histories}},{key:"getHistory",value:function(a){var d=this.histories.get(a);if(d)return d;d=this.getHistoryFromLocalSorage(a)||{items:[],max:50,index:0};this.histories.set(a,d);return d}},{key:"setHistory",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{items:[],max:50,index:0};this.histories.set(a,d);this.addHistoryToLocalStorage(a,d);return d}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},
fixedHeight:{defaultValue:!0},extent:{defaultValue:Yi.pt(100,20)},padding:{defaultValue:Yi.Rectangle.inset(2,4)},clipMode:{defaultValue:"hidden"},lineWrapping:{defaultValue:!1},historyId:{defaultValue:null},clearOnInput:{defaultValue:!1},label:{after:["textAndAttributes","extent","padding","submorphs"],defaultValue:"",set:function(a){var d=this;this.setProperty("label",a);this.textString.startsWith(a)||Yi.noUpdate(function(){d.textString=a+d.input})}},input:{after:["label"],derived:!0,get:function(){return this.textString.slice(this.label.length)},
set:function(a){this.textString=this.label+(a?String(a):"");this.updatePlaceholder()}},placeholder:{after:["submorphs","label","defaultTextStyle"],dervied:!0,get:function(){var a=this.getSubmorphNamed("placeholder");return a?a.value:null},set:function(a){var d=this.getSubmorphNamed("placeholder");a?d?(d.defaultTextStyle=Object.assign({},this.defaultTextStyle,{fontColor:Yi.Color.gray}),d.value=a):this.addMorph(Yi.Text.makeLabel(a,Object.assign({},this.defaultTextStyle,{name:"placeholder",reactsToPointer:!1,
fontColor:Yi.Color.gray}))):d&&d.remove();this.updatePlaceholder()}}}}}],c,{pathInPackage:function(){return"./text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:466,end:15419})}(Yi.Text)),Cy=bd("b2",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),g=c.hasOwnProperty("PasswordInputLine")&&
"function"===typeof c.PasswordInputLine?c.PasswordInputLine:c.PasswordInputLine=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ve(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Ve._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.onLoad()}},{key:"onChange",
value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),"onChange",this).call(this,a);["fill","borderRadius"].includes(a.prop)&&this.updateHtml(this.input)}},{key:"onLoad",value:function(){var a=Cb(regeneratorRuntime.mark(function f(){var k=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.whenRendered();case 2:this.ensureInputNode().then(function(p){k.updateHtml(k.input);p.onkeydown=function(q){return k.env.eventDispatcher.dispatchDOMEvent(q,
k,"onKeyDown")};p.onkeyup=function(q){return k.env.eventDispatcher.dispatchDOMEvent(q,k,"onKeyUp")}});case 3:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"onMouseDown",value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"onAfterRender",value:function(a){this.ensureInputNode()}},{key:"ensureInputNode",value:function(){var a=this;return this.whenRendered().then(function(){var d=
a.domNode;d.parentNode&&"INPUT"==d.parentNode.tagName&&(d.parentNode.remove(),d=a.env.renderer.getNodeForMorph(a),d.insertBefore(a.domNode,d.firstChild));return a.domNode})}},{key:"onKeyDown",value:function(a){Ve._get(Object.getPrototypeOf(g.prototype),"onKeyDown",this).call(this,a);if(this.input!=this.lastInput)this.onInputChanged(this.input);this.lastInput=this.input}},{key:"focus",value:function(){Ve._get(Object.getPrototypeOf(g.prototype),"focus",this).call(this);this.domNode&&this.domNode.focus()}},
{key:"onFocus",value:function(a){var d=this;Ve._get(Object.getPrototypeOf(g.prototype),"onFocus",this).call(this,a);this._originalShadow||(this._originalShadow=this.dropShadow,this.withAnimationDo(function(){d.withMetaDo({skipReconciliation:!0},function(){d.highlightWhenFocused&&(d.dropShadow=d.haloShadow)})},{duration:200}))}},{key:"onBlur",value:function(a){var d=this;Ve._get(Object.getPrototypeOf(g.prototype),"onBlur",this).call(this,a);this.withAnimationDo(function(){d.withMetaDo({skipReconciliation:!0},
function(){d.highlightWhenFocused&&(d.dropShadow=d._originalShadow||null)})},{duration:200});this._originalShadow=null}},{key:"indicateError",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.borderWidth=3,this.borderColor=Yi.Color.red,this._errorIcon=this.addMorph(this._errorIcon||Yi.morph({type:"label",value:[" "+f,{fontSize:18}," ",{}].concat(db(Yi.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),
fontSize:20,fontColor:Yi.Color.red,opacity:0,reactsToPointer:!1,fill:Yi.Color.white.withA(.9)})),n.next=5,this.whenRendered();case 5:this._errorIcon.opacity=1,this._errorIcon.rightCenter=this.innerBounds().insetBy(10).rightCenter();case 7:case "end":return n.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"clearError",value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=Yi.Color.transparent)}},{key:"acceptInput",
value:function(){var a=this.input;Yi.signal(this,"inputAccepted",a);return a}},{key:"onInputChanged",value:function(a){this.clearError();Yi.signal(this,"inputChanged",a)}},{key:"updateHtml",value:function(){var a=Cb(regeneratorRuntime.mark(function k(f){var n,p,q,r,u,x,y,D,H,I,N,J;return regeneratorRuntime.wrap(function(sa){for(;;)switch(sa.prev=sa.next){case 0:return n=this.fontSize,p=this.fontFamily,q=this.padding,r=this.placeholder,u=this.fill,x=void 0===u?Bn.white:u,y=this.borderRadius,D=q.top(),
H=q.right(),I=q.bottom(),N=q.left(),sa.next=7,this.ensureInputNode();case 7:J=sa.sent,J.setAttribute("type","password"),J.setAttribute("placeholder",r),J.setAttribute("value",f),Object.assign(J.style,{position:"absolute",width:"calc(100% - ".concat(N,"px - ").concat(H,"px)"),"border-width":0,outline:"none","border-radius":"".concat(y.valueOf(),"px"),background:x.toString(),padding:"".concat(D,"px ").concat(H,"px ").concat(I,"px ").concat(N,"px"),"font-size":"".concat(n,"px"),"font-family":"".concat(p)});
case 12:case "end":return sa.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"commands",get:function(){var a=this;return[{name:"accept input",exec:function(){a.acceptInput();return!0}}].concat(Ve._get(Object.getPrototypeOf(g.prototype),"commands",this))}},{key:"keybindings",get:function(){return Ve._get(Object.getPrototypeOf(g.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"}])}},{key:"htmlExport_transformNode",
value:function(a){var d=a.getRootNode(),f=d.createElement("div"),k=a.querySelector("input");d=d.createElement("input");k.childNodes[0]&&"INPUT"===k.childNodes[0].tagName&&(k=k.childNodes[0]);d.id=a.id;d.className=a.className;f.style=a.style.cssText;Object.assign(d.style,Yi.obj.select(k.style,"padding font-family font-weight font-style text-decoration font-size border-radius color".split(" ")));d.style.position="absolute";d.style.width=a.style.width;d.style.height=a.style.height;d.style["border-width"]=
a.style["border-width"];d.placeholder=this.placeholder;d.type="password";d.autocomplete=d.name=this.name.replace(/[\s"]/g,"-");f.appendChild(d);f.appendChild(a.childNodes[1]);return f}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PasswordInputLine"}},{key:"properties",get:function(){return{extent:{defaultValue:Yi.pt(100,20)},html:{derived:!0,initialize:function(){},get:function(){return""},set:function(a){}},highlightWhenFocused:{defaultValue:!0},isPasswordInput:{get:function(){return!0}},
haloShadow:{type:"Shadow"},domNodeTagName:{readOnly:!0,get:function(){return"input"}},domNodeStyle:{readOnly:!0,get:function(){return"background: grey"}},input:{derived:!0,after:["domNode"],get:function(){return this.domNode&&this.domNode.value||""},set:function(a){this.domNode.value=a;this.updateHtml(this.input)}},placeholder:{after:["domNode"],set:function(a){this.setProperty("placeholder",a);this.updateHtml(this.input)}},fontSize:{defaultValue:12,after:["input"],set:function(a){this.setProperty("fontSize",
a);this.updateHtml(this.input)}},fontFamily:{defaultValue:"sans-serif",after:["input"],set:function(a){this.setProperty("fontFamily",a);this.updateHtml(this.input)}},padding:{defaultValue:Yi.Rectangle.inset(2),after:["input"],set:function(a){this.setProperty("padding",a);this.updateHtml(this.input)}}}}}],c,{pathInPackage:function(){return"./text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:15493,end:22961})}(Yi.HTMLMorph));Yi.PasswordInputLine=Cy;Yi.PasswordInputLine=Cy;Yi["default"]=HB;var Pi=window.lively.FreezerRuntime.recorderFor("lively.morphic/index.js");Pi["default"]=Jm;Pi.config=Jm;Object.assign(Pi,w3);Object.assign(Pi,h7);Object.assign(Pi,j7);Object.assign(Pi,k7);Object.assign(Pi,i7);Object.assign(Pi,S7);Object.assign(Pi,t3);Object.assign(Pi,e7);Object.assign(Pi,f7);Pi.StyleSheet=GB;Pi.ShadowObject=
Pr;Pi.addOrChangeCSSDeclaration=zq;Pi.addOrChangeLinkedCSS=nu;Object.assign(Pi,x3);Pi.easings=Nx;Pi.stringToEasing=sw;Pi.Icon=qt;Pi.loadMorphFromSnapshot=zs;Object.assign(Pi,d7);Pi.World=gv;Pi.Hand=wy;Pi.Morph=gp;Pi.Image=Tx;Pi.Ellipse=Rx;Pi.Triangle=Sx;Pi.Path=Ux;Pi.Polygon=Vx;Pi.LineMorph=Wx;Pi.Text=Ev;Pi.Label=yy;Pi.HTMLMorph=Iv;Pi.InputLine=HB;Pi.PasswordInputLine=Cy;Pi.InputLine=HB;Pi.PasswordInputLine=Cy;Pi.morph=Sm;Pi.addClassMappings=gz;Pi.inspect=Px;Pi.touchInputDevice=bq;Pi.addClassMappings({"default":Pi.Morph,
world:Pi.World,hand:Pi.Hand,image:Pi.Image,ellipse:Pi.Ellipse,triangle:Pi.Triangle,path:Pi.Path,text:Pi.Text,input:Pi.InputLine,label:Pi.Label,polygon:Pi.Polygon,line:Pi.LineMorph,html:Pi.HTMLMorph});Pi.morph=Sm;Pi.inspect=Px;Pi.touchInputDevice=bq;var T7=Object.freeze({__proto__:null,config:Jm,StyleSheet:GB,ShadowObject:Pr,addOrChangeCSSDeclaration:zq,addOrChangeLinkedCSS:nu,easings:Nx,stringToEasing:sw,Icon:qt,loadMorphFromSnapshot:zs,InputLine:HB,PasswordInputLine:Cy,morph:Sm,inspect:Px,touchInputDevice:bq,
show:void 0,Morph:gp,Ellipse:Rx,Triangle:Sx,Image:Tx,PathPoint:$A,Path:Ux,Polygon:Vx,LineMorph:Wx,World:gv,Hand:wy,Text:Ev,Label:yy,Anchor:xy,HTMLMorph:Iv,IFrameMorph:FB,MorphicEnv:Yp,TilingLayout:tB,VerticalLayout:qy,HorizontalLayout:ry,ProportionalLayout:uB,CellGroup:vB,LayoutColumn:wB,LayoutRow:xB,LayoutCell:yB,GridLayout:zB,ComponentDescriptor:AB,ViewModel:sy,part:Us,component:ex,without:fx,add:gx,edit:hA,ensureFont:hx,Tooltip:Xx,TooltipViewer:Yx,MorphicDB:Et});bd("cj",T7);bd({bR:void 0,c5:void 0})}}});
