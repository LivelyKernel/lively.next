System.register(["./__rootModule___commonjs-entry-51a55f66.js","./index-616023be.js","@babel/plugin-syntax-import-meta"],function(bd,Dd){var se,Rc,ad,Ne,Cb,Sd,ve,uc,dd,vd,Ed;return{setters:[function(fe){se=fe._;Rc=fe.k;ad=fe.bF;Ne=fe.b0;Cb=fe.bG;Sd=fe.t;ve=fe.v;uc=fe.e;dd=fe.bH;vd=fe.bI},function(fe){Ed=fe.a},function(){}],execute:function(){function fe(){fe=se(regeneratorRuntime.mark(function Wb(){return regeneratorRuntime.wrap(function(lc){for(;;)switch(lc.prev=lc.next){case 0:return lc.next=2,
Dd.import("./top-bar.cp-fa0cb96d.js").then(function(db){return db.w});case 2:return lc.next=4,Dd.import("./editor-plugin-5397d87c.js");case 4:return lc.next=6,Dd.import("./editor-plugin-80c3c4f5.js");case 6:return lc.next=8,Dd.import("./index-c595fbe5.js");case 8:return lc.next=10,Dd.import("./__rootModule___commonjs-entry-51a55f66.js").then(function(db){return db.ce});case 10:return lc.next=12,Dd.import("./__rootModule___commonjs-entry-51a55f66.js").then(function(db){return db.cf});case 12:return lc.next=
14,Dd.import("./__rootModule___commonjs-entry-51a55f66.js").then(function(db){return db.ca});case 14:qb.extractModules("lively.bindings"),qb.extractModules("lively.shell"),qb.extractModules("lively.ide"),qb.extractModules("lively.components");case 18:case "end":return lc.stop()}},Wb)}));return fe.apply(this,arguments)}function jc(ic){return Od.apply(this,arguments)}function Od(){Od=se(regeneratorRuntime.mark(function lc(Wb){var db,Xa,Gb,sc,ub,sb,fa,Db,ab,eb,kc,Vb,pb,Nb,zb,rb,Ib,da,ka,va,Fa;return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=
M.next){case 0:return db=Wb.filePath,Xa=Wb.worldName,Gb=Wb.snapshot,sc=Wb.commit,ub=Wb.loadingIndicator,sb=Wb.progress,fa=Wb.logError,Db=void 0===fa?function(Aa){return console.log(Aa)}:fa,M.prev=1,ab=JSON.parse(localStorage.getItem("lively.load-config")||'{"lively.lang":"dynamic","lively.ast":"dynamic","lively.source-transform":"dynamic","lively.classes":"dynamic","lively.vm":"dynamic","lively.modules":"dynamic","lively.user":"dynamic","lively.storage":"dynamic","lively.morphic":"dynamic"}'),ub.center=
sb.bottomCenter,M.next=6,qb.polyfills();case 6:eb=$world.env;if(!qb.doBootstrap){M.next=12;break}M.next=10;return qb.bootstrapLivelySystem(ub,sb,ab);case 10:M.next=14;break;case 12:return M.next=14,qb.fastPrepLivelySystem(ub);case 14:return ub.label="Loading lively.2lively...",M.next=17,lively.modules.registerPackage("lively.2lively");case 17:qb.askBeforeQuit&&window.addEventListener("beforeunload",function(Aa){return Aa.returnValue="Really?"},!0);if("dynamic"!==ab["lively.morphic"]||qb.fastLoad){M.next=
26;break}ub.label="Loading lively.morphic...";M.next=22;return lively.modules.importPackage("lively.morphic");case 22:kc=M.sent;sb.finishPackage({packageName:"lively.morphic",loaded:!0});M.next=27;break;case 26:kc=lively.morphic;case 27:ub.label="Loading world...";window.onresize=null;window.loadCompiledFrozenPart=lively.modules.module("lively.morphic/partsbin.js")._recorder.loadPart;qb.unregisterExtension("part");qb.registerExtension(qb.partResourceExtension);qb.unregisterExtension("styleguide");
lively.FreezerRuntime=!1;Vb=document.location;window.worldLoadingIndicator=ub;M.prev=36;pb={root:$world.env.renderer.rootNode,verbose:!0,localconfig:!0,l2l:!0,shell:!0,moduleManager:lively.modules};if(!Gb){M.next=66;break}Gb.startsWith("http")||(Gb=qb.resource(System.baseURL).join(Gb).url);M.next=42;return lively.modules.module("lively.morphic/world.js").recorder;case 42:return qb.__inter0__=M.sent,Nb=qb.__inter0__.World,M.next=46,lively.modules.module("lively.morphic/world-loading.js").recorder;
case 46:return qb.__inter1__=M.sent,rb=qb.__inter1__.loadWorld,M.next=50,lively.modules.module("lively.morphic/serialization.js").recorder;case 50:return qb.__inter2__=M.sent,zb=qb.__inter2__.loadMorphFromSnapshot,M.t0=zb,M.next=55,qb.resource(Gb).readJson();case 55:return M.t1=M.sent,M.next=58,(0,M.t0)(M.t1);case 58:return Ib=M.sent,M.next=61,rb(new Nb({showsUserFlap:!1,extent:$world.extent}),void 0,pb);case 61:da=M.sent;da.addMorph(Ib);da.onWindowResize();M.next=103;break;case 66:if(!sc){M.next=
71;break}M.next=69;return kc.World.loadFromCommit(sc,void 0,Object.assign({},pb,{browserURL:"/worlds/load?name="+sc.name}));case 69:M.next=103;break;case 71:if(!Xa){M.next=100;break}if("__newWorld__"!==Xa){M.next=96;break}if(!Object.values(ab).every(function(Aa){return"frozen"===Aa})&&!qb.fastLoad){M.next=84;break}M.next=76;return lively.modules.module("lively.ide/world.js").recorder;case 76:return qb.__inter3__=M.sent,ka=qb.__inter3__.LivelyWorld,M.next=80,lively.modules.module("lively.morphic/world-loading.js").recorder;
case 80:qb.__inter4__=M.sent;va=qb.__inter4__.loadWorld;M.next=92;break;case 84:return M.next=86,lively.modules.System["import"]("lively.ide/world.js");case 86:return qb.__inter5__=M.sent,ka=qb.__inter5__.LivelyWorld,M.next=90,lively.modules.System["import"]("lively.morphic/world-loading.js");case 90:qb.__inter6__=M.sent,va=qb.__inter6__.loadWorld;case 92:return M.next=94,va(new ka({openNewProjectPrompt:!0}),void 0,pb);case 94:M.next=98;break;case 96:return M.next=98,kc.World.loadFromDB(Xa,void 0,
void 0,Object.assign({},pb,{browserURL:"/worlds/load?name="+Xa.replace(/\.json($|\?)/,"")}));case 98:M.next=103;break;case 100:if(!db){M.next=103;break}M.next=103;return kc.World.loadFromResource(qb.resource(System.baseURL).join(db),void 0,Object.assign({},pb,{browserURL:"/worlds/load?file="+db}));case 103:M.next=108;break;case 105:M.prev=105,M.t2=M["catch"](36),window.__loadError__=M.t2;case 108:return sb.finishPackage({packageName:"world",loaded:!0}),sb.fadeIntoBack(),window.addEventListener("popstate",
function(Aa){document.location===Vb&&document.location.reload()}),M.next=113,$world.whenReady();case 113:return ub.remove(),M.next=116,eb.renderer.worldMorph.whenRendered();case 116:"dynamic"!==ab["lively.morphic"]||qb.fastLoad||(eb.renderer.clear(),eb.fontMetric.uninstall(),eb.eventDispatcher.uninstall());M.next=126;break;case 119:throw M.prev=119,M.t3=M["catch"](1),M.t3.originalErr&&(M.t3=M.t3.originalErr),Fa=M.t3.message,M.t3.stack!==M.t3.message&&(Fa+=M.t3.stack.includes(M.t3.message)?M.t3.stack.replace(M.t3.message,
"\n"):M.t3.stack),Db(Fa),M.t3;case 126:case "end":return M.stop()}},lc,null,[[1,119],[36,105]])}));return Od.apply(this,arguments)}bd("bootstrap",jc);var qb=window.lively.FreezerRuntime.recorderFor("lively.freezer/src/util/bootstrap.js");qb.polyfills=function(){var ic=[];"PointerEvent"in window||ic.push(qb.loadViaScript(qb.resource(System.baseURL).join("/lively.next-node_modules/pepjs/dist/pep.js").url));"fetch"in window||ic.push(qb.loadViaScript("//cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.js"));
return Promise.all(ic)};qb.importPackageAndDo=function(ic,Wb,lc){var db=ic.split("/").slice(-1)[0];lc.label="loading ".concat(db);return lively.modules.importPackage(ic).then(Wb||function(){})};qb.extractModules=function(ic){Object.keys(lively.FreezerRuntime.registry).filter(function(Wb){return Wb.startsWith(ic)}).forEach(function(Wb){qb.extractedModules[qb.resource(System.baseURL).join(Wb).url]=Object.assign({},lively.FreezerRuntime.registry[Wb].exports)})};qb.loadComponents=function(){return fe.apply(this,
arguments)};qb.installFetchHook=function(ic){function Wb(lc,db){qb.loads++;ic.status="loading ".concat(qb.string.truncateLeft(db.name.replace(window.System.baseURL,""),25,"..."));ic.progress=qb.loads/(800-4*Object.keys(qb.extractedModules).length);ic.center=$world.innerBounds().center();return lc(db)}window.__logFetch=Wb;lively.modules.installHook("fetch",Wb)};qb.bootstrapLivelySystem=function(ic,Wb,lc){return Promise.resolve().then(function(){ic.status="starting bootstrap process..."}).then(se(regeneratorRuntime.mark(function Xa(){var Gb;
return regeneratorRuntime.wrap(function(sc){for(;;)switch(sc.prev=sc.next){case 0:return sc.next=2,Wb.whenRendered();case 2:if("frozen"!==lc["lively.lang"]&&!qb.fastLoad){sc.next=9;break}sc.next=5;return Dd.import("./__rootModule___commonjs-entry-51a55f66.js").then(function(ub){return ub.c7});case 5:Gb=sc.sent,qb.extractModules("lively.lang"),Wb.finishPackage({packageName:"lively.lang",frozen:!0}),delete Gb._prevLivelyGlobal;case 9:if("frozen"!==lc["lively.ast"]&&!qb.fastLoad){sc.next=15;break}sc.next=
12;return Dd.import("./__rootModule___commonjs-entry-51a55f66.js").then(function(ub){return ub.q});case 12:lively.ast=sc.sent,qb.extractModules("lively.ast"),Wb.finishPackage({packageName:"lively.ast",frozen:!0});case 15:if("frozen"!==lc["lively.source-transform"]&&!qb.fastLoad){sc.next=21;break}sc.next=18;return Dd.import("./__rootModule___commonjs-entry-51a55f66.js").then(function(ub){return ub.c8});case 18:lively.sourceTransform=sc.sent,qb.extractModules("lively.source-transform"),Wb.finishPackage({packageName:"lively.source-transform",
frozen:!0});case 21:if("frozen"!==lc["lively.classes"]&&!qb.fastLoad){sc.next=29;break}sc.next=24;return Dd.import("./object-classes-06d7e61a.js");case 24:return sc.next=26,Dd.import("./index-616023be.js").then(function(ub){return ub.c});case 26:lively.classes=sc.sent,qb.extractModules("lively.class"),Wb.finishPackage({packageName:"lively.classes",frozen:!0});case 29:if("frozen"!==lc["lively.vm"]&&!qb.fastLoad){sc.next=35;break}sc.next=32;return Dd.import("./__rootModule___commonjs-entry-51a55f66.js").then(function(ub){return ub.bu});
case 32:lively.vm=sc.sent,qb.extractModules("lively.vm"),Wb.finishPackage({packageName:"lively.vm",frozen:!0});case 35:if("frozen"!==lc["lively.modules"]&&!qb.fastLoad){sc.next=40;break}sc.next=38;return Dd.import("./index-616023be.js").then(function(ub){return ub.a});case 38:qb.extractModules("lively.modules"),Wb.finishPackage({packageName:"lively.modules",frozen:!0});case 40:if("frozen"!==lc["lively.user"]&&!qb.fastLoad){sc.next=47;break}sc.next=43;return Dd.import("./__rootModule___commonjs-entry-51a55f66.js").then(function(ub){return ub.ci});
case 43:return sc.next=45,Dd.import("./user-ui-98206202.js");case 45:qb.extractModules("lively.user"),Wb.finishPackage({packageName:"lively.user",frozen:!0});case 47:if("frozen"!==lc["lively.storage"]&&!qb.fastLoad){sc.next=52;break}sc.next=50;return Dd.import("./__rootModule___commonjs-entry-51a55f66.js").then(function(ub){return ub.cg});case 50:qb.extractModules("lively.storage"),Wb.finishPackage({packageName:"lively.storage",frozen:!0});case 52:if("frozen"!==lc["lively.morphic"]&&!qb.fastLoad){sc.next=
80;break}sc.next=55;return Dd.import("./__rootModule___commonjs-entry-51a55f66.js").then(function(ub){return ub.cc});case 55:return qb.extractModules("lively.resources"),sc.next=58,Dd.import("./__rootModule___commonjs-entry-51a55f66.js").then(function(ub){return ub.cd});case 58:return sc.next=60,Dd.import("./index-cd4986dd.js");case 60:return qb.extractModules("lively.2lively"),sc.next=63,Dd.import("./__rootModule___commonjs-entry-51a55f66.js").then(function(ub){return ub.cb});case 63:return qb.extractModules("lively.serializer2"),
sc.next=66,qb.loadComponents();case 66:return sc.next=68,Dd.import("./ui.cp-8dfc076f.js").then(function(ub){return ub.e});case 68:return qb.extractModules("lively.halos"),sc.next=71,Dd.import("./index-42118cd5.js");case 71:return qb.extractModules("lively-system-interface"),sc.next=74,Dd.import("./__rootModule___commonjs-entry-51a55f66.js").then(function(ub){return ub.c9});case 74:return qb.extractModules("lively.graphics"),sc.next=77,Dd.import("./__rootModule___commonjs-entry-51a55f66.js").then(function(ub){return ub.cj});
case 77:lively.morphic=sc.sent,qb.extractModules("lively.morphic"),Wb.finishPackage({packageName:"lively.morphic",frozen:!0});case 80:case "end":return sc.stop()}},Xa)}))).then(se(regeneratorRuntime.mark(function Gb(){var sc,ub,sb,fa,Db,ab,eb,kc;return regeneratorRuntime.wrap(function(Vb){for(;;)switch(Vb.prev=Vb.next){case 0:return sc=window.SYSTEM_BASE_URL||document.location.origin,ub=window.System,sb=ub.baseURL,sb.endsWith("/")&&(sb=sb.slice(0,-1)),Vb.next=6,qb.resource(sc).join("package-registry.json").readJson();
case 6:return fa=Vb.sent,Vb.next=9,qb.loadViaScript(qb.resource(sc).join("/lively.next-node_modules/@babel/standalone/babel.js").url);case 9:return Vb.next=11,qb.loadViaScript(qb.resource(sc).join("/lively.next-node_modules/systemjs/dist/system.src.js").url);case 11:return Vb.next=13,qb.loadViaScript(qb.resource(sc).join("/lively.modules/systemjs-init.js").url);case 13:Db=lively.modules.getSystem("bootstrapped",{baseURL:sc});lively.modules.changeSystem(Db,!0);Db["__lively.modules__packageRegistry"]=
lively.modules.PackageRegistry.fromJSON(Db,fa);for(ab in qb.extractedModules)eb=ab.replace(sb,sc),Db.set(eb,Db.newModule(qb.extractedModules[ab])),kc=lively.modules.module(eb),kc._recorder=qb.extractedModules[ab],kc._frozenModule=!0;ub.config({baseURL:sc});qb.installFetchHook(ic);case 19:case "end":return Vb.stop()}},Gb)}))).then(se(regeneratorRuntime.mark(function sc(){return regeneratorRuntime.wrap(function(ub){for(;;)switch(ub.prev=ub.next){case 0:if("dynamic"!==lc["lively.lang"]||qb.fastLoad){ub.next=
2;break}return ub.abrupt("return",qb.importPackageAndDo("lively.lang",function(sb){Wb.finishPackage({packageName:"lively.lang",loaded:!0});delete sb._prevLivelyGlobal},ic));case 2:case "end":return ub.stop()}},sc)}))).then(se(regeneratorRuntime.mark(function ub(){return regeneratorRuntime.wrap(function(sb){for(;;)switch(sb.prev=sb.next){case 0:Wb.animate({opacity:1,easing:qb.easings.outExpo});if("dynamic"!==lc["lively.ast"]||qb.fastLoad){sb.next=3;break}return sb.abrupt("return",qb.importPackageAndDo("lively.ast",
function(fa){Wb.finishPackage({packageName:"lively.ast",loaded:!0});lively.ast=fa},ic));case 3:case "end":return sb.stop()}},ub)}))).then(se(regeneratorRuntime.mark(function sb(){return regeneratorRuntime.wrap(function(fa){for(;;)switch(fa.prev=fa.next){case 0:if("dynamic"!==lc["lively.source-transform"]||qb.fastLoad){fa.next=2;break}return fa.abrupt("return",qb.importPackageAndDo("lively.source-transform",function(Db){Wb.finishPackage({packageName:"lively.source-transform",loaded:!0});lively.sourceTransform=
Db},ic));case 2:case "end":return fa.stop()}},sb)}))).then(se(regeneratorRuntime.mark(function fa(){return regeneratorRuntime.wrap(function(Db){for(;;)switch(Db.prev=Db.next){case 0:if("dynamic"!==lc["lively.classes"]||qb.fastLoad){Db.next=2;break}return Db.abrupt("return",qb.importPackageAndDo("lively.classes",function(ab){Wb.finishPackage({packageName:"lively.classes",loaded:!0});lively.classes=ab},ic));case 2:case "end":return Db.stop()}},fa)}))).then(se(regeneratorRuntime.mark(function Db(){return regeneratorRuntime.wrap(function(ab){for(;;)switch(ab.prev=
ab.next){case 0:if("dynamic"!==lc["lively.vm"]||qb.fastLoad){ab.next=2;break}return ab.abrupt("return",qb.importPackageAndDo("lively.vm",function(eb){Wb.finishPackage({packageName:"lively.vm",loaded:!0});lively.vm=eb},ic));case 2:case "end":return ab.stop()}},Db)}))).then(se(regeneratorRuntime.mark(function ab(){var eb;return regeneratorRuntime.wrap(function(kc){for(;;)switch(kc.prev=kc.next){case 0:eb=function(Vb){lively.modules=Vb;lively.modules.unwrapModuleLoad();lively.modules.unwrapModuleResolution();
lively.modules.wrapModuleLoad();lively.modules.wrapModuleResolution();qb.installFetchHook(ic);var pb=System["__lively.modules__packageRegistry"];delete System["__lively.modules__packageRegistry"];Vb=System["__lively.modules__packageRegistry"]=Vb.PackageRegistry.ofSystem(System);Object.assign(Vb,qb.obj.select(pb,["packageMap","individualPackageDirs","devPackageDirs","packageBaseDirs"]));Vb.resetByURL();pb=Vb.allPackages();var Nb=lively.modules.module("lively.modules/src/packages/package.js").recorder.Package;
pb.filter(function(rb){return!rb.constructor[Symbol["for"]("lively-module-meta")]}).forEach(function(rb){qb.adoptObject(rb,Nb)});pb=Object.values(System["__lively.modules__loadedModules"]);var zb=lively.modules.module("lively.modules/src/module.js").recorder.ModuleInterface;pb.filter(function(rb){return!rb.constructor[Symbol["for"]("lively-module-meta")]}).forEach(function(rb){qb.adoptObject(rb,zb)})};if("frozen"!==lc["lively.modules"]&&!qb.fastLoad){kc.next=5;break}System._scripting=lively.modules.scripting;
kc.next=7;break;case 5:return kc.next=7,qb.importPackageAndDo("lively.modules",eb,ic);case 7:Wb.finishPackage({packageName:"lively.modules",loaded:!0});case 8:case "end":return kc.stop()}},ab)}))).then(se(regeneratorRuntime.mark(function eb(){return regeneratorRuntime.wrap(function(kc){for(;;)switch(kc.prev=kc.next){case 0:if("dynamic"!==lc["lively.user"]||qb.fastLoad){kc.next=2;break}return kc.abrupt("return",qb.importPackageAndDo("lively.user",function(Vb){Wb.finishPackage({packageName:"lively.user",
loaded:!0});lively.user=Vb},ic));case 2:case "end":return kc.stop()}},eb)}))).then(se(regeneratorRuntime.mark(function kc(){return regeneratorRuntime.wrap(function(Vb){for(;;)switch(Vb.prev=Vb.next){case 0:if("dynamic"!==lc["lively.storage"]||qb.fastLoad){Vb.next=2;break}return Vb.abrupt("return",qb.importPackageAndDo("lively.storage",function(pb){Wb.finishPackage({packageName:"lively.storage",loaded:!0});lively.storage=pb},ic));case 2:case "end":return Vb.stop()}},kc)})))};qb.fastPrepLivelySystem=
function(ic){return Promise.resolve().then(function(){ic.status="starting fast system preparation..."}).then(function(){return qb.resource(System.baseURL).join("package-registry.json").readJson()}).then(function(Wb){System["__lively.modules__packageRegistry"]=lively.modules.PackageRegistry.fromJSON(System,Wb);return System}).then(function(){return qb.loadViaScript(qb.resource(System.baseURL).join("/lively.user/dist/lively.user-client.js").url)})};qb.bootstrap=jc;qb.resource=Rc;qb.unregisterExtension=
ad;qb.registerExtension=Ne;qb.loadViaScript=Cb;qb.string=Sd;qb.obj=ve;qb.modulePackage=Ed;qb.easings=uc;qb.partResourceExtension=dd;qb.adoptObject=vd;lively.modules=qb.modulePackage;qb.doBootstrap=!0;qb.askBeforeQuit=!0;qb.loc=document.location;qb.query=qb.resource(qb.loc.href).query();qb.fastLoad=!0===qb.query.fastLoad||window.FORCE_FAST_LOAD;qb.extractedModules={};qb.loads=0;qb.bootstrap=jc}}});