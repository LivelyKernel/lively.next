System.register("./__rootModule___commonjs-entry-51a55f66.js ./loading-indicator.cp-98e470a2.js ./index-61952933.js ./index-42118cd5.js ./index-616023be.js ./popups.cp-5b9fb681.js ./tooltips.cp-3c41b378.js ./list.cp-840d1cf8.js".split(" "),function(bd){var Dd,se,Rc,ad,Ne,Cb,Sd,ve,uc,dd,vd,Ed,fe,jc,Od,qb,ic,Wb,lc,db,Xa,Gb,sc,ub,sb,fa,Db,ab,eb,kc,Vb,pb,Nb,zb,rb,Ib,da,ka,va,Fa,M,Aa,wb,Na,hb,Bb,ba,dc,la,Fb,vb,Ia,xb,Rb,yc,id,ob,Pb,tb,xc,Pc,nd,Id,Hb,Kd,vc,Qc,kb,Cc,zc;return{setters:[function(Fc){Dd=Fc.v;
se=Fc.b3;Rc=Fc.s;ad=Fc.t;Ne=Fc.d;Cb=Fc.aG;Sd=Fc.a8;ve=Fc.ar;uc=Fc.i;dd=Fc.N;vd=Fc.as;Ed=Fc._;fe=Fc.C;jc=Fc.l;Od=Fc.b;qb=Fc.af;ic=Fc.K;Wb=Fc.m;lc=Fc.a;db=Fc.a9;Xa=Fc.e;Gb=Fc.M;sc=Fc.bd;ub=Fc.aq;sb=Fc.L;fa=Fc.H;Db=Fc.aB;ab=Fc.h;eb=Fc.at;kc=Fc.f;Vb=Fc.R;pb=Fc.r;Nb=Fc.ah;zb=Fc.u;rb=Fc.a4;Ib=Fc.aF;da=Fc.be;ka=Fc.aC;va=Fc.au;Fa=Fc.n;M=Fc.az;Aa=Fc.F;wb=Fc.bf;Na=Fc.aD;hb=Fc.p;Bb=Fc.c},function(Fc){ba=Fc.a;dc=Fc.L;la=Fc.B;Fb=Fc.D;vb=Fc.c},function(Fc){Ia=Fc.T;xb=Fc.c;Rb=Fc.d;yc=Fc.e;id=Fc.a;ob=Fc.f;Pb=Fc.S;
tb=Fc.D},function(Fc){xc=Fc.localInterface},function(Fc){Pc=Fc.a;nd=Fc.m},function(Fc){Id=Fc.N;Hb=Fc.v;Kd=Fc.C;vc=Fc.b;Qc=Fc.P;kb=Fc.c},function(Fc){Cc=Fc.SystemTooltip},function(Fc){zc=Fc.c}],execute:function(){function Fc(ha){if(!ha)return String(ha);if(Array.isArray(ha))return"[".concat(ha.map(Fc).join(","),"]");if("symbol"===ve(ha))return Mb.printSymbol(ha);try{return String(ha)}catch(ra){return"Cannot print object: ".concat(ra)}}function xd(ha,ra){return!ra.map(function(mb){return ha[mb]}).every(function(mb){return Mb.obj.equals(mb,
ha&&ha.valueOf())})}function Uc(ha){if(Mb.obj.isPrimitive(ha))var ra=Mb.string.print(ha);else Array.isArray(ha)?((ra=3<ha.length)&&(ha=ha.slice(0,3)),ha=Mb.string.print(ha),ra&&(ha=ha.slice(0,-1)+", ...]"),ra=ha):ra=Mb.string.print(ha);ra=ra.replace(/\n/g,"");500<ra.length&&(ra=ra.slice(0,20)+"...[".concat(ra.length-20,' CHARS]"'));return ra}function Md(ha){(ha=Uf.cachedGuideLines.get(ha))&&ha.forEach(function(ra){return ra.remove()})}function Ob(ha){var ra=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:!0,mb=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,E=3<arguments.length&&void 0!==arguments[3]?arguments[3]:10,R=4<arguments.length&&void 0!==arguments[4]?arguments[4]:100;if(ra||mb){var Ya=ha.owner,gb=Ya.world();Ya=Ya.getGlobalTransform();var $b=ha.owner.submorphs.filter(function(Oe){return Oe!==ha&&!Oe.isEpiMorph&&Oe.visible&&Oe.reactsToPointer}),Sc=Uf.findAlignedMorphs(ha,$b,E,R,"left top right bottom hCenter vCenter".split(" "),"left top right bottom hCenter vCenter".split(" "));
R=[];var Ic=0,Pd=0,Zd=0,ge=0;Ya.e-=gb.scroll.x;Ya.f-=gb.scroll.y;if(Sc){Sc=dd(Sc);var Ce;try{for(Sc.s();!(Ce=Sc.n()).done;){var $e=ic(Ce.value,2)[1],pf=$e.vertical,ig=dd($e.horizontal),Xf;try{for(ig.s();!(Xf=ig.n()).done;){var Vg=Xf.value,Re=Vg.edgeAVal,ae=Vg.refPointsA,Sb=Vg.refPointsB,Hd=Vg.edgeBVal,hf=Math.ceil(E-Vg.delta),zf=Math.min(ae.top,Sb.top),Gg=Math.max(ae.bottom,Sb.bottom);Vg.maxDist>E&&(hf-=E/2);Ic<hf&&(Ic=hf,Zd=Hd-Re);R.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Uf.guideWidth,
start:Ya.transformPoint(Uf.pt(Hd,zf)),end:Ya.transformPoint(Uf.pt(Hd,Gg)),fill:Uf.guideColor,guideType:"h",priority:hf})}}catch(Oe){ig.e(Oe)}finally{ig.f()}var vg=dd(pf),tg;try{for(vg.s();!(tg=vg.n()).done;){var pd=tg.value,Z=pd.edgeAVal,Ga=pd.refPointsA,fb=pd.refPointsB,ya=pd.edgeBVal,tc=Math.ceil(E-pd.delta),Mc=Math.min(Ga.left,fb.left),Cd=Math.max(Ga.right,fb.right);pd.maxDist>E&&(tc-=E/2);Pd<tc&&Math.abs(ya-Z)<=E&&(Pd=tc,ge=ya-Z);R.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Uf.guideWidth,
start:Ya.transformPoint(Uf.pt(Mc,ya)),end:Ya.transformPoint(Uf.pt(Cd,ya)),fill:Uf.guideColor,guideType:"v",priority:tc})}}catch(Oe){vg.e(Oe)}finally{vg.f()}}}catch(Oe){Sc.e(Oe)}finally{Sc.f()}}if(!Ic||!Pd){Ce=[ha].concat(Wb($b));Xf=Uf.computeClosestMorphs(Ce);ig=Xf[0];Ce=ig.l;$e=ig.r;pf=ig.t;ig=ig.b;var Ee;if(Ce||$e||pf||ig){var bf=(Ce||$e||pf||ig).refPointsA;for(Vg=1;Vg<Xf.length&&(Hd=Xf[Vg],Re=Hd.l,ae=Hd.r,Sb=Hd.t,Hd=Hd.b,Ic||(Ce&&Re&&Ce.index!==Re.index&&Math.abs(Re.dist-Ce.dist)<=E?Ee=Object.assign({neighbor:Vg,
direction:"left"},Re):$e&&ae&&$e!==ae.index&&Math.abs(ae.dist-$e.dist)<=E&&(Ee=Object.assign({neighbor:Vg,direction:"right"},ae))),Pd||(pf&&Sb&&pf.index!==Sb.index&&Math.abs(Sb.dist-pf.dist)<=E?Ee=Object.assign({neighbor:Vg,direction:"top"},Sb):ig&&Hd&&ig.index!==Hd.index&&Math.abs(Hd.dist-ig.dist)<=E&&(Ee=Object.assign({neighbor:Vg,direction:"bottom"},Hd))),!Ee);Vg++);}Ee&&(Xf=Ee,E=Xf.direction,Hd=Xf.refPointsA,Ga=Xf.refPointsB,Sb=Xf.dist,vg=bf.left,hf=bf.top,fb=bf.bottom,tc=bf.right,tg=bf.width,
pd=bf.height,bf=Hd.left,Xf=Hd.top,Vg=Hd.bottom,Re=Hd.right,ae=Hd.width,Hd=Hd.height,Z=Ga.left,zf=Ga.top,Gg=Ga.bottom,ya=Ga.right,Ga="left"===E?vg:"right"===E?tc:vg+tg/2,fb="bottom"===E?fb:"top"===E?hf:hf+pd/2,vg="left"===E?Ga-Sb:"right"===E?Ga+Sb:vg+tg/2,Sb="bottom"===E?fb+Sb:"top"===E?fb-Sb:hf+pd/2,hf="left"===E?ya:"right"===E?Z:bf+ae/2,zf="bottom"===E?zf:"top"===E?Gg:Xf+Hd/2,!mb||Ic||"right"!==E&&"left"!==E||(Ic=10,Zd=(Ee.dist-($e||Ce).dist)*("right"===E?-1:1),Ga+=Zd,vg+=Zd),!mb||Pd||"top"!==E&&
"bottom"!==E||(Pd=10,ge=((pf||ig).dist-Ee.dist)*("top"===E?-1:1),fb+=ge,Sb+=ge),R.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:Ya.transformPoint(Uf.pt("left"===E?bf:"right"===E?Re:bf+ae/2,"bottom"===E?Vg:"top"===E?Xf:Xf+Hd/2)),end:Ya.transformPoint(Uf.pt(hf,zf)),fill:Uf.Color.orange,height:Uf.guideWidth,guideType:E,priority:10},{type:"line",epiMorph:!0,hasFixedPosition:!0,start:Ya.transformPoint(Uf.pt(Ga,fb)),end:Ya.transformPoint(Uf.pt(vg,Sb)),fill:Uf.Color.orange,height:Uf.guideWidth,
guideType:E,priority:10}))}mb&&(Zd||ge)&&ha.moveBy(Uf.pt(Zd,ge));if(ra){R=R.filter(function(Oe){var Fe=Oe.guideType;Oe=Oe.priority;return"h"===Fe?Oe===Ic:"v"===Fe?Oe===Pd:!0});(ra=Uf.cachedGuideLines.get(ha))||Uf.cachedGuideLines.set(ha,ra=[]);for(mb=0;mb<R.length;mb++)Ee=void 0,ra[mb]?Ee=Object.assign(ra[mb],R[mb]):(Ee=Uf.morph(R[mb]),ra.push(Ee)),Ee.owner||gb.addMorph(Ee);ra.slice(mb).forEach(function(Oe){return Oe.remove()});Uf.fun.debounceNamed(ha.id+"-drag-guides-cleanup",1300,function(){var Oe=
Uf.cachedGuideLines.get(ha);Oe&&Oe.forEach(function(Fe){return Fe.remove()})})()}}}function Le(ha,ra){var mb=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,E=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,R=4<arguments.length&&void 0!==arguments[4]?arguments[4]:5,Ya=5<arguments.length&&void 0!==arguments[5]?arguments[5]:100;if(mb||E){var gb=ha.owner,$b=gb.world(),Sc=gb.getGlobalTransform(),Ic=ha.owner.submorphs.filter(function(Og){return Og!==ha&&!Og.isEpiMorph&&Og.visible&&
Og.reactsToPointer});gb=(ra.includes("left")||ra.includes("right")?"x":"")+(ra.includes("top")||ra.includes("bottom")?"y":"");var Pd=Uf.findMorphsWithSimilarWidthOrHeight(ha,gb,Ic,R,Ya),Zd=-Infinity,ge=-Infinity,Ce=0,$e=0,pf=0,ig=0,Xf=0,Vg=0;gb=[];Sc.e-=$b.scroll.x;Sc.f-=$b.scroll.y;if(Pd){Pd=dd(Pd);var Re;try{for(Pd.s();!(Re=Pd.n()).done;){var ae=ic(Re.value,2)[1],Sb=ae.similarIn,Hd=ae.delta,hf=ae.refPointsA,zf=ae.refPointsB,Gg=R-Hd+(Ya-ae.minDist);"width"===Sb?Zd<Gg&&(Zd=Gg,ra.includes("left")&&
($e=-Hd),ra.includes("right")&&(Ce=Hd)):ge<Gg&&(ge=Gg,ra.includes("top")&&(pf=-Hd),ra.includes("bottom")&&(ig=Hd));var vg={type:"line",epiMorph:!0,hasFixedPosition:!0,height:Uf.guideWidth,fill:Uf.guideColor,guideType:Sb,priority:Gg,start:Sc.transformPoint("width"===Sb?Uf.pt(hf.left,hf.top+hf.height/2):Uf.pt(hf.left+hf.width/2,hf.top)),end:Sc.transformPoint("width"===Sb?Uf.pt(hf.right,hf.top+hf.height/2):Uf.pt(hf.left+hf.width/2,hf.bottom))},tg=Object.assign({},vg,{start:Sc.transformPoint("width"===
Sb?Uf.pt(zf.left,zf.top+zf.height/2):Uf.pt(zf.left+zf.width/2,zf.top)),end:Sc.transformPoint("width"===Sb?Uf.pt(zf.right,zf.top+zf.height/2):Uf.pt(zf.left+zf.width/2,zf.bottom))});gb.push(vg,tg)}}catch(Og){Pd.e(Og)}finally{Pd.f()}}if(Ya=Uf.findAlignedMorphs(ha,Ic,R,Ya,ra,void 0)){Ya=dd(Ya);var pd;try{for(Ya.s();!(pd=Ya.n()).done;){var Z=ic(pd.value,2)[1],Ga=Z.vertical,fb=dd(Z.horizontal),ya;try{for(fb.s();!(ya=fb.n()).done;){var tc=ya.value,Mc=tc.edgeAVal,Cd=tc.refPointsA,Ee=tc.refPointsB,bf=tc.edgeBVal,
Oe=Math.ceil(R-tc.delta),Fe=Math.min(Cd.top,Ee.top),Pf=Math.max(Cd.bottom,Ee.bottom);tc.maxDist>R&&(Oe-=R/2);Xf<Oe&&(Xf=Oe,ra.includes("left")&&($e=-(bf-Mc)),ra.includes("right")&&(Ce=+(bf-Mc)));gb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Uf.guideWidth,start:Sc.transformPoint(Uf.pt(bf,Fe)),end:Sc.transformPoint(Uf.pt(bf,Pf)),fill:Uf.guideColor,guideType:"h",priority:Oe})}}catch(Og){fb.e(Og)}finally{fb.f()}var eg=dd(Ga),be;try{for(eg.s();!(be=eg.n()).done;){var v=be.value,oa=v.edgeAVal,
Oc=v.refPointsA,Tb=v.refPointsB,ne=v.edgeBVal,Ye=Math.ceil(R-v.delta),Kf=Math.min(Oc.left,Tb.left),jg=Math.max(Oc.right,Tb.right);v.maxDist>R&&(Ye-=R/2);Vg<Ye&&Math.abs(ne-oa)<=R&&(Vg=Ye,ra.includes("top")&&(pf=ne-oa),ra.includes("bottom")&&(ig=ne-oa));gb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Uf.guideWidth,start:Sc.transformPoint(Uf.pt(Kf,ne)),end:Sc.transformPoint(Uf.pt(jg,ne)),fill:Uf.guideColor,guideType:"v",priority:Ye})}}catch(Og){eg.e(Og)}finally{eg.f()}}}catch(Og){Ya.e(Og)}finally{Ya.f()}}E&&
($e&&(ha.left+=$e,ha.right-=$e),pf&&(ha.top+=pf,ha.bottom-=pf),Ce&&(ha.width+=Ce),ig&&(ha.height+=ig));if(mb){gb=gb.filter(function(Og){var te=Og.guideType;Og=Og.priority;return"width"===te?Og===Zd:"height"===te?Og===ge:"v"===te?Og===Vg:"h"===te?Og===Xf:!1});(mb=Uf.cachedGuideLines.get(ha))||Uf.cachedGuideLines.set(ha,mb=[]);for(E=0;E<gb.length;E++)R=void 0,mb[E]?R=Object.assign(mb[E],gb[E]):(R=Uf.morph(gb[E]),mb.push(R)),R.owner||$b.addMorph(R);mb.slice(E).forEach(function(Og){return Og.remove()});
Uf.fun.debounceNamed(ha.id+"-drag-guides-cleanup",1300,function(){var Og=Uf.cachedGuideLines.get(ha);Og&&Og.forEach(function(te){return te.remove()})})()}}}function We(){We=Ed(regeneratorRuntime.mark(function R(ra,mb,E){var Ya;return regeneratorRuntime.wrap(function(gb){for(;;)switch(gb.prev=gb.next){case 0:return $g.showThenHide(ra,mb,!1),gb.next=3,$g.promise.delay(300);case 3:Ya=!1,$g.once(ra,"onMouseDown",function(){return Ya=!0}),$g.once(ra,"hideMarkers",function(){return Ya=!0});case 6:if(Ya){gb.next=
11;break}gb.next=9;return mb.retract(E);case 9:gb.next=6;break;case 11:mb.fadeOut(2E3);case 12:case "end":return gb.stop()}},R)}));return We.apply(this,arguments)}function xe(ha){var ra=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,mb=$g.MorphicEnv["default"]().world;if(null===ha||void 0===ha)ha=String(ha);if(ha.isMorph)return $g.showRect(ha.world(),ha.globalBounds().translatedBy(mb.scroll.negated()),ra);if(ha.isPoint)return $g.showRect(mb,new $g.Rectangle(ha.x-5,ha.y-5,10,10));if(ha.isLine)return $g.showLine(mb,
ha);if(ha.isRectangle)return $g.showRect(mb,ha);if("undefined"!==typeof Element&&ha instanceof Element)return $g.showRect(mb,$g.Rectangle.fromElement(ha));if("number"===typeof ha||"symbol"===ve(ha)||"boolean"===typeof ha||"undefined"!==typeof Node&&ha instanceof Node||ha instanceof RegExp)ha=String(ha);"object"===ve(ha)&&(ha=$g.obj.inspect(ha,{maxDepth:1}));return"string"===typeof ha&&1===arguments.length?mb.setStatusMessage(ha):mb.setStatusMessage($g.string.formatFromArray(Array.from(arguments)))}
function Fg(){return Zc.apply(this,arguments)}function Zc(){Zc=Ed(regeneratorRuntime.mark(function ra(){var mb,E,R,Ya,gb;return regeneratorRuntime.wrap(function($b){for(;;)switch($b.prev=$b.next){case 0:if("undefined"!==typeof Ea.module){$b.next=2;break}return $b.abrupt("return");case 2:mb=Ea.module("lively://lively.morphic/inspector"),E=Ea.config.ide.js.defaultInspectorImports,R=regeneratorRuntime.mark(function Pd(Ic){var Zd;return regeneratorRuntime.wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return Zd=
void 0,ge.prev=1,ge.next=4,System["import"](Ic);case 4:Zd=ge.sent;ge.next=11;break;case 7:return ge.prev=7,ge.t0=ge["catch"](1),console.log("Failed to load inspector workspace default import: "+Ic),ge.abrupt("return","continue");case 11:E[Ic].forEach(function(Ce){mb.define(Ce,Zd[Ce],!1)});case 12:case "end":return ge.stop()}},Pd,null,[[1,7]])}),$b.t0=regeneratorRuntime.keys(E);case 6:if(($b.t1=$b.t0()).done){$b.next=14;break}Ya=$b.t1.value;return $b.delegateYield(R(Ya),"t2",9);case 9:gb=$b.t2;if("continue"!==
gb){$b.next=12;break}return $b.abrupt("continue",6);case 12:$b.next=6;break;case 14:case "end":return $b.stop()}},ra)}));return Zc.apply(this,arguments)}function rd(ha,ra){ra.initPos=ha.position;ra.factorLabel=(new Ea.Tooltip({master:Ea.SystemTooltip,description:"1x"})).openInWorld(ha.hand.position.addXY(10,10))}function ti(ha,ra){var mb=ha.position.subPt(ra.initPos);ha=mb.x;ra=Ea.num.roundTo(Math.exp(-mb.y/$world.height*6),.01)*ra.baseFactor;return{offset:ha,scale:ra}}function dg(ha,ra,mb){return Math.max(mb.min,
Math.min(mb.max,mb.scrubbedValue+(mb.floatingPoint?ha*ra:Math.round(ha*ra))))}function Of(ha,ra){var mb=Ea.getScaleAndOffset(ha,ra);ha=mb.offset;mb=mb.scale;ra.factorLabel.softRemove();return Ea.getCurrentValue(ha,mb,ra)}function mg(ha,ra){var mb=Ea.getScaleAndOffset(ha,ra),E=mb.scale;mb=mb.offset;ra.factorLabel.position=ha.hand.position.addXY(10,10);ra.factorLabel.description="".concat(E,"x");return Ea.getCurrentValue(mb,E,ra)}function wf(ha){function ra($b){var Sc=$b.name,Ic=$b.ownerChain(),Pd=
$b.owner,Zd=$b.world(),ge;$b===Ya&&(ge=[gb]);Zd===$b&&(ge=["$world"]);if(!ge&&Sc&&Pd){Pd===Zd&&1===Ea.arr.count(Ea.arr.pluck(Zd.submorphs,"name"),Sc)&&(ge=['$world.get("'.concat(Sc,'")')]);if(!ge&&Pd!==Zd)for(Zd=Ic.length-1;Zd--;)if(1===Ic[Zd].getAllNamed(Sc).length){ge=[].concat(Wb(ra(Ic[Zd])),['get("'.concat(Sc,'")')]);break}ge||(Sc=[].concat(Wb(ra(Pd)),['get("'.concat(Sc,'")')]),Ea.syncEval(Sc.join("."),{context:Ya}).value===$b&&(ge=Sc))}ge||(ge=["".concat(gb,'.getMorphById("').concat($b.id,'")')]);
return ge}var mb=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},E=ha.world(),R=mb.maxLength;R=void 0===R?10:R;mb=mb.fromMorph;var Ya=void 0===mb?E:mb;if(Ya===ha)return"this";var gb=E===Ya?"$world":"this";if(!(E||ha.name&&Ya.get(ha.name)===ha))return"morph";E=ra(ha);return E.length>R?'$world.getMorphWithId("'.concat(ha.id,'")'):E.join(".")}function mf(ha){return w.part(w.SystemInspector,{viewModel:ha}).openInWindow()}bd({a:Ob,i:xd,p:Uc,r:Md,s:xe});var Mb=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js");
Mb.printSymbol=function(ha){if(Symbol.keyFor(ha))return'Symbol.for("'.concat(Symbol.keyFor(ha),'")');if(Mb.knownSymbols.get(ha))return Mb.knownSymbols.get(ha);String(ha).match(Mb.symMatcher);return String(ha)};Mb.defaultSort=function(ha,ra){if(ha.hasOwnProperty("priority")||ra.hasOwnProperty("priority")){var mb=ha.priority||0,E=ra.priority||0;if(mb<E)return-1;if(mb>E)return 1}ha=(ha.keyString||ha.key).toLowerCase();ra=(ra.keyString||ra.key).toLowerCase();return ha<ra?-1:ha===ra?0:1};Mb.safeToString=
Fc;Mb.propertyNamesOf=function(ha,ra){if(!ha)return[];if(Array.isArray(ha)){var mb=ra?ra.offset:0;return Mb.arr.range(mb,mb+(ra?ra.partitionSize:ha.length-1))}return Mb.arr.sortBy(Object.keys(ha),function(E){return E.toLowerCase()})};Mb.isMultiValue=xd;Mb.printValue=Uc;Mb.partitionedChildren=function(ha){var ra=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},mb=ra.originalValue;mb=void 0===mb?ha:mb;var E=ra.offset;E=void 0===E?0:E;ra=ra.partitionSize;var R=void 0===ra?ha.length||Object.values(ha).length:
ra;if(Mb.obj.isArray(ha)){ra=Mb.num.roundTo(Math.max(Mb.MIN_PARTITION_SIZE,R/50),.1);R/=ra;for(var Ya=[],gb=0;gb<R;gb++){var $b="[".concat(E+gb*ra,"-").concat(E+(gb+1)*ra,"]");Ya.push({partition:{originalValue:mb,offset:E+gb*ra,partitionSize:ra},value:[],key:$b,keyString:$b,valueString:"...",isCollapsed:!0})}return Ya}ra=Mb.num.roundTo(Math.max(Mb.MIN_PARTITION_SIZE,R/50),.1);R/=ra;Ya=[];gb=Mb.obj.keys(mb).sort();for($b=0;$b<R;$b++){var Sc=E+$b*ra,Ic=E+($b+1)*ra,Pd=Mb.obj.select(mb,gb.slice(Sc,Ic));
Sc="[".concat(gb[Sc].slice(0,4),"-").concat((gb[Ic]||Mb.arr.last(gb)).slice(0,4),"]");Ya.push({partition:{originalValue:Pd,offset:E+$b*ra,partitionSize:ra},value:[],key:Sc,keyString:Sc,valueString:"...",isCollapsed:!0})}return Ya};Mb.propertiesOf=function(ha){var ra=ha.partition?ha.target:ha.value;if(!ra)return[];var mb={_rev:!0},E=[],R="function"===typeof ra.livelyCustomInspect?ra.livelyCustomInspect():{},Ya=Object.assign({},Mb.defaultPropertyOptions,{},R);if(R.properties){R=dd(R.properties);var gb;
try{for(R.s();!(gb=R.n()).done;){var $b=gb.value,Sc=$b.key,Ic=$b.hidden,Pd=$b.priority,Zd=$b.keyString,ge=$b.value,Ce=$b.valueString;mb[Sc]=!0;Ic||E.push(ha.getSubNode({priority:Pd,key:Sc,keyString:Zd||Mb.safeToString(Sc),value:ge,valueString:Ce,isCollapsed:!0}))}}catch(hf){R.e(hf)}finally{R.f()}}if(Ya.includeDefault){gb=Mb.propertyNamesOf(ra,ha.partition);if(gb.length>Mb.MAX_NODE_THRESHOLD){mb=dd(Mb.partitionedChildren(ra,ha.partition));var $e;try{for(mb.s();!($e=mb.n()).done;)E.push(ha.getSubNode($e.value))}catch(hf){mb.e(hf)}finally{mb.f()}}else{$e=
dd(gb);var pf;try{for($e.s();!(pf=$e.n()).done;){var ig=pf.value;if(!(ig in mb)){var Xf=ra[ig],Vg=Mb.printValue(Xf),Re={keyString:ig,key:ig,value:Xf,valueString:Vg,isCollapsed:!0};E.push(ha.getSubNode(Re))}}}catch(hf){$e.e(hf)}finally{$e.f()}}if(Ya.includeSymbols){mb=dd(Object.getOwnPropertySymbols(ra));var ae;try{for(mb.s();!(ae=mb.n()).done;){var Sb=ae.value,Hd=Mb.safeToString(Sb);Xf=ra[Sb];Vg=Mb.printValue(Xf);Re={key:Sb,keyString:Hd,value:Xf,valueString:Vg,isCollapsed:!0};E.push(ha.getSubNode(Re))}}catch(hf){mb.e(hf)}finally{mb.f()}}}Ya.sort&&
(E=Ya.sortFunction(ra,E));return E};Mb.obj=Dd;Mb.num=se;Mb.arr=Rc;Mb.string=ad;Mb.connect=Ne;Mb.signal=Cb;Mb.TreeData=Ia;Mb.Tree=xb;Mb.newUUID=Sd;Mb.localInterface=xc;Mb.MAX_NODE_THRESHOLD=1E3;Mb.MIN_PARTITION_SIZE=250;Mb.defaultPropertyOptions={includeDefault:!0,includeSymbols:!0,sort:!0,sortFunction:function(ha,ra){return Array.isArray(ha)?ra:ra.sort(Mb.defaultSort)}};Mb.symMatcher=/^Symbol\((.*)\)$/;Mb.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(ha){return"symbol"===
ve(Symbol[ha])}).reduce(function(ha,ra){return ha.set(Symbol[ra],"Symbol."+ra)},new Map)}();Mb.isMultiValue=xd;Mb.printValue=Uc;var gd=bd("d",function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),mb=ra.hasOwnProperty("InspectionTree")&&"function"===typeof ra.InspectionTree?ra.InspectionTree:ra.InspectionTree=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,
ha,[{key:Symbol["for"]("lively-instance-initialize"),value:function(E){uc._get(Object.getPrototypeOf(mb.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,E);this.inspector=E.inspector;this.root.isInspectionNode||(this.root=Mb.InspectionNode["for"](this.root,this))}},{key:"__only_serialize__",get:function(){return["root"]}},{key:"asListWithIndexAndDepth",value:function(){var E=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;return uc._get(Object.getPrototypeOf(mb.prototype),
"asListWithIndexAndDepth",this).call(this,function(R){R=R.node;return E?R.visible:!0})}},{key:"getContextFor",value:function(E){return E==this.root?this.root.value.inspectee:E.value}},{key:"dispose",value:function(){}},{key:"filter",value:function(){var E=Ed(regeneratorRuntime.mark(function gb(Ya){var $b=this,Sc,Ic,Pd,Zd,ge;return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Sc=Ya.maxDepth,Ic=void 0===Sc?1:Sc,Pd=Ya.iterator,Zd=Ya.showUnknown,ge=Ya.showInternal,
Ce.next=3,this.uncollapseAll(function($e,pf){return Ic>pf&&($e==$b.root||$e.value.submorphs)});case 3:this.asListWithIndexAndDepth(!1).forEach(function($e){var pf=$e.node;return 0==$e.depth?pf.visible=!0:!Zd&&pf.keyString&&pf.keyString.includes("UNKNOWN PROPERTY")||!ge&&pf.keyString&&pf.keyString.includes("internal")?pf.visible=!1:pf.value&&pf.value.submorphs?pf.visible=!0:pf.visible=Pd(pf)});case 4:case "end":return Ce.stop()}},gb,this)}));return function(Ya){return E.apply(this,arguments)}}()},
{key:"getChildren",value:function(E){return E.children}},{key:"display",value:function(E){return E.display(this.inspector)}},{key:"isCollapsed",value:function(E){return E.isCollapsed}},{key:"isLeaf",value:function(E){return Mb.obj.isPrimitive(E.value)}},{key:"collapse",value:function(E,R){var Ya=this;E.isCollapsed=R;R||this.isLeaf(E)||E.children.length||(E.children=Mb.propertiesOf(E).map(function(gb){Ya.parentMap.set(gb,E);return gb}))}},{key:"retrieveForRemoteProxy",value:function(E){E.uuid||(E.uuid=
Mb.newUUID(),this.idToNodeMap[E.uuid]=E);return{uuid:E.uuid,value:this.isLeaf(E)?E.value:{},keyString:E.keyString,key:E.keyString,valueString:Mb.safeToString(E.value),isCollapsed:!0,children:[]}}},{key:"systemInterface",get:function(){return Mb.localInterface}},{key:"getNodeViaId",value:function(E){return this.idToNodeMap[E]}},{key:"asRemoteDelegate",value:function(E){this.idToNodeMap={};this.isRemoteDelegate=!0;System.get("@lively-env").remoteInspectionContext||(System.get("@lively-env").remoteInspectionContext=
{});System.get("@lively-env").remoteInspectionContext[E]=this;return this.retrieveForRemoteProxy(this.root)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InspectionTree"}},{key:"forObject",value:function(E,R){return new this({key:"inspectee",value:{inspectee:E},isCollapsed:!0,inspector:R})}}],ra,{pathInPackage:function(){return"./js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5960,end:8759})}(Mb.TreeData));Mb.InspectionTree=gd;Mb.InspectionTree=gd;var Vd=bd("R",function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),mb=ra.hasOwnProperty("RemoteInspectionTree")&&"function"===typeof ra.RemoteInspectionTree?ra.RemoteInspectionTree:ra.RemoteInspectionTree=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(mb,ha,[{key:"systemInterface",get:function(){return this.evalEnvironment.systemInterface}},{key:Symbol["for"]("lively-instance-initialize"),value:function(E){uc._get(Object.getPrototypeOf(mb.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,E);this.parentMap=new WeakMap;this.root=E.proxy;this.evalEnvironment=E.evalEnvironment;this.inspector=E.inspector;this.delegateId=E.delegateId}},{key:"getContextFor",value:function(E){return"System.get('@lively-env').remoteInspectionContext[\"".concat(this.delegateId,
'"].getNodeViaId("').concat(E.uuid,'").value')}},{key:"dispose",value:function(){var E=Ed(regeneratorRuntime.mark(function Ya(){return regeneratorRuntime.wrap(function(gb){for(;;)switch(gb.prev=gb.next){case 0:return gb.next=2,this.evalEnvironment.systemInterface.runEval("\n      delete System.get('@lively-env').remoteInspectionContext['".concat(this.delegateId,"']\n    "),this.evalEnvironment);case 2:case "end":return gb.stop()}},Ya,this)}));return function(){return E.apply(this,arguments)}}()},
{key:"display",value:function(E){return"".concat(E.keyString,": ").concat(E.valueString)}},{key:"collapse",value:function(){var E=Ed(regeneratorRuntime.mark(function $b(Ya,gb){var Sc;return regeneratorRuntime.wrap(function(Ic){for(;;)switch(Ic.prev=Ic.next){case 0:Ya.isCollapsed=gb;if(!gb&&!this.isLeaf(Ya)){Ic.next=3;break}return Ic.abrupt("return");case 3:if(Ya.children.length){Ic.next=8;break}Ic.next=6;return this.evalEnvironment.systemInterface.runEval('\n         const node = this.getNodeViaId("'.concat(Ya.uuid,
'");\n         try {\n           this.collapse(node, false);\n         } catch (e) {\n\n         }\n         node.children.map(n => this.retrieveForRemoteProxy(n));\n      '),{targetModule:"/lively.ide/js/inspector/context.js",context:"System.get('@lively-env').remoteInspectionContext[\"".concat(this.delegateId,'"]')});case 6:Sc=Ic.sent,Ya.children=Sc.isError?[]:Sc.value;case 8:case "end":return Ic.stop()}},$b,this)}));return function(Ya,gb){return E.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"RemoteInspectionTree"}},{key:"forObject",value:function(){var E=Ed(regeneratorRuntime.mark(function $b(Ya,gb){var Sc,Ic,Pd,Zd;return regeneratorRuntime.wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.next=2,this.createRemoteContext(Ya,gb);case 2:return Sc=ge.sent,Ic=Sc.proxy,Pd=Sc.delegateId,Zd=Sc.evalEnvironment,ge.abrupt("return",new this({key:"inspectee",proxy:Ic,delegateId:Pd,evalEnvironment:Zd,inspector:gb}));case 7:case "end":return ge.stop()}},$b,this)}));
return function(Ya,gb){return E.apply(this,arguments)}}()},{key:"createRemoteContext",value:function(){var E=Ed(regeneratorRuntime.mark(function $b(Ya,gb){var Sc,Ic,Pd,Zd,ge;return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Sc=Ya.code,Ic=Ya.evalEnvironment,Pd=Ya.delegateId,Pd="lively://inspector-".concat(gb.id),Ce.next=5,Ic.systemInterface.runEval('\n       const { InspectionTree } = await System.import("lively.ide/js/inspector/context.js");\n       const t = (() => '.concat(Sc,
')();\n       const tree = InspectionTree.forObject(t);\n       tree.asRemoteDelegate("').concat(Pd,'");\n    '),Ic);case 5:return Zd=Ce.sent,ge=Zd.value,Ce.abrupt("return",{delegateId:Pd,evalEnvironment:Ic,proxy:ge});case 8:case "end":return Ce.stop()}},$b)}));return function(Ya,gb){return E.apply(this,arguments)}}()}],ra,{pathInPackage:function(){return"./js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:8767,end:11228})}(Mb.InspectionTree));Mb.RemoteInspectionTree=Vd;Mb.RemoteInspectionTree=Vd;(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),mb=ra.hasOwnProperty("InspectionNode")&&"function"===typeof ra.InspectionNode?ra.InspectionNode:ra.InspectionNode=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(mb,ha,[{key:Symbol["for"]("lively-instance-initialize"),value:function(E){var R=E.root,Ya=E.priority,gb=E.key,$b=E.keyString,Sc=E.value,Ic=E.valueString,Pd=E.isCollapsed,Zd=E.children;Zd=void 0===Zd?[]:Zd;var ge=E.isSelected;ge=void 0===ge?!1:ge;var Ce=E.visible;Ce=void 0===Ce?!0:Ce;E.draggable;this.partition=E.partition;this.priority=Ya;this.key=gb;this.keyString=String($b||gb);this.value=Sc;this.valueString=Ic||Mb.printValue(Sc);this.isCollapsed=Pd;this.children=Zd;this.isSelected=
ge;this.visible=Ce;this.root=R}},{key:"__only_serialize__",get:function(){return[]}},{key:"isInspectionNode",get:function(){return!0}},{key:"getSubNode",value:function(E){if(E.value&&E.value.isMorph)return new Mb.MorphNode(Object.assign({root:this.root},E));var R=E.key,Ya=E.keyString,gb=this.value,$b=E.partition;$b&&(gb=$b.originalValue,Ya=R);return new Mb.PropertyNode(Object.assign({},E,{keyString:Ya,key:R,target:gb,partition:$b,root:this.root,spec:{}}))}},{key:"display",value:function(E){var R=
this.keyString,Ya=this.valueString;if(!this.interactive)return"".concat(R,": ").concat(Ya);this._propertyWidget||(this._propertyWidget=E.renderDraggableTreeLabel({value:"".concat(R,": ").concat(Ya)}));this._propertyWidget.isSelected=this.isSelected;return this._propertyWidget}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InspectionNode"}},{key:"for",value:function(E){var R=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return E.value&&E.value.isMorph?new Mb.MorphNode(Object.assign({root:R},
E)):new Mb.InspectionNode(Object.assign({root:R},E))}}],ra,{pathInPackage:function(){return"./js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:11230,end:13927})})(void 0);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),mb=ra.hasOwnProperty("MorphNode")&&"function"===
typeof ra.MorphNode?ra.MorphNode:ra.MorphNode=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:Symbol["for"]("lively-instance-initialize"),value:function(E){uc._get(Object.getPrototypeOf(mb.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,E);this.target=this.value;this.propertyInfo=this.target.propertiesAndPropertySettings().properties}},{key:"getSubNode",value:function(E){var R=
this.propertyInfo[E.key]||{};return E.value&&E.value.isMorph?new Mb.MorphNode(Object.assign({},E,{root:this.root})):new Mb.PropertyNode(Object.assign({},E,{root:this.root,target:this.target,spec:R}))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MorphNode"}}],ra,{pathInPackage:function(){return"./js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:13929,end:15097})})(Mb.InspectionNode);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),mb=ra.hasOwnProperty("PropertyNode")&&"function"===typeof ra.PropertyNode?ra.PropertyNode:ra.PropertyNode=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:Symbol["for"]("lively-instance-initialize"),value:function(E){uc._get(Object.getPrototypeOf(mb.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,E);var R=E.spec,Ya=E.target;this.partition=E.partition;this.target=Ya;this.spec=R;this.foldedNodes={}}},{key:"__deserialize__",value:function(E,R){this.spec={}}},{key:"interactive",get:function(){return this._interactive}},{key:"interactive",set:function(E){this._interactive=E}},{key:"isFoldable",get:function(){return!!this.spec.foldable}},{key:"isInternalProperty",get:function(){return"id"==this.keyString||this.keyString.includes("internal")}},
{key:"getSubNode",value:function(E){return this.isFoldable?this.getFoldedContext(E):uc._get(Object.getPrototypeOf(mb.prototype),"getSubNode",this).call(this,E)}},{key:"getFoldedContext",value:function(E){return this.foldedNodes[E.key]=new Mb.FoldedNode(Object.assign({},E,{root:this.root,target:this.target,foldableNode:this,spec:Mb.obj.dissoc(this.spec,["foldable"])}))}},{key:"rerender",value:function(){this.root.inspector.refreshSelectedLine()}},{key:"refreshProperty",value:function(E){var R=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:!1;R&&(this.target[this.key]=E);this.value=this.target[this.key];this.valueString=Mb.printValue(this.value);this.interactive&&(R||this._propertyWidget.highlight());if(this.isFoldable)for(var Ya in this.foldedNodes)this.foldedNodes[Ya].value=this.value[Ya],this.foldedNodes[Ya].valueString=Mb.printValue(this.value[Ya]),this.foldedNodes[Ya]._propertyWidget&&Mb.signal(this.foldedNodes[Ya]._propertyWidget,"update",this.value[Ya])}},{key:"display",value:function(E){var R=
this,Ya=this._propertyWidget,gb=this.keyString,$b=this.valueString,Sc=this.target,Ic=this.value,Pd=this.spec;if(!(this.interactive||Pd.foldable&&Mb.isMultiValue(Ic,Pd.foldable)))return E.renderPropertyControl({target:Sc,keyString:gb,valueString:$b,tree:E.ui.propertyTree,value:Ic,spec:Pd,node:this,fastRender:!0});if(Ya)return Ya.keyString=gb,Ya.valueString=$b,Ya.isSelected=this.isSelected,Ya.control&&(Ya.control.isSelected=this.isSelected),Ya;Ya=this._propertyWidget=E.renderPropertyControl({target:Sc,
keyString:gb,valueString:$b,value:Ic,spec:Pd,node:this,isSelected:this.isSelected,fontColor:E.ui.propertyTree.fontColor});this.isInternalProperty||Pd.readOnly||(Mb.connect(Ya,"propertyValue",this,"refreshProperty",{updater:function(Zd,ge){return Zd(ge,!0)}}),Mb.connect(Ya,"openWidget",this.root,"onWidgetOpened",{converter:function(Zd){return{widget:Zd,node:R.sourceObj}}}));return Ya}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PropertyNode"}}],ra,{pathInPackage:function(){return"./js/inspector/context.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:15099,end:18667})})(Mb.InspectionNode);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),mb=ra.hasOwnProperty("FoldedNode")&&"function"===typeof ra.FoldedNode?ra.FoldedNode:ra.FoldedNode=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(mb,ha,[{key:Symbol["for"]("lively-instance-initialize"),value:function(E){uc._get(Object.getPrototypeOf(mb.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,E);this.foldableNode=E=E.foldableNode;this.foldedProp=E.key+Mb.string.capitalize(this.key)}},{key:"refreshProperty",value:function(E){var R=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;this.foldableNode.refreshProperty(Object.assign({},this.target[this.foldableNode.key],vd({},this.key,E)),
R)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"FoldedNode"}}],ra,{pathInPackage:function(){return"./js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:18669,end:19371})})(Mb.PropertyNode);var sf=function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),
mb=ra.hasOwnProperty("PropertyTree")&&"function"===typeof ra.PropertyTree?ra.PropertyTree:ra.PropertyTree=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"onDrag",value:function(E){this._onDragHandler&&this._onDragHandler(E)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PropertyTree"}}],ra,{pathInPackage:function(){return"./js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:21333,end:21444})}(Mb.Tree);Mb.PropertyTree=sf;Mb.PropertyTree=sf;var hg=window.lively.FreezerRuntime.recorderFor("lively.ide/themes/dark.js");hg.Color=fe;var bh=bd("c",function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.ide/themes/dark.js"),mb=ra.hasOwnProperty("DarkTheme")&&"function"===typeof ra.DarkTheme?ra.DarkTheme:ra.DarkTheme=function(E){if(!E||
!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"background",get:function(){return hg.Color.rgb(44,62,80)}},{key:"cursorColor",get:function(){return hg.Color.gray}},{key:"default",get:function(){return{fontColor:"#abb2bf"}}},{key:"header",get:function(){return{fontSize:"110%",fontColor:"#6b94ee"}}},{key:"header-1",get:function(){return{fontSize:"135%",fontColor:"#6b94ee"}}},{key:"header-2",get:function(){return{fontSize:"125%",
fontColor:"#6b94be"}}},{key:"header-3",get:function(){return{fontSize:"120%",fontColor:"#6b94be"}}},{key:"quote",get:function(){return{fontColor:"#090"}}},{key:"negative",get:function(){return{fontColor:"#d44"}}},{key:"positive",get:function(){return{fontColor:"#292"}}},{key:"strong",get:function(){return{fontWeight:"bold"}}},{key:"em",get:function(){return{fontStyle:"italic"}}},{key:"strikethrough",get:function(){return{textDecoration:"line-through"}}},{key:"hr",get:function(){return{fontColor:"#999"}}},
{key:"link",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},{key:"url",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},{key:"keyword",get:function(){return{fontColor:hg.Color.rgb(204,109,243)}}},{key:"atom",get:function(){return{fontColor:"#d19a66"}}},{key:"number",get:function(){return{fontColor:hg.Color.orange}}},{key:"def",get:function(){return{fontColor:"#e5c07b"}}},{key:"variable",get:function(){return{fontColor:"#d19a66"}}},{key:"punctuation",
get:function(){return{fontColor:"#05a"}}},{key:"property",get:function(){return{fontColor:hg.Color.rgb(33,150,243)}}},{key:"operator",get:function(){return{fontColor:"#abb2bf"}}},{key:"variable-2",get:function(){return{fontColor:"#e06c75"}}},{key:"variable-3",get:function(){return{fontColor:"#085"}}},{key:"comment",get:function(){return{fontColor:"#7F848E"}}},{key:"commentHighlight",get:function(){return{backgroundColor:"#FFFF00",fontColor:"#7F848E"}}},{key:"string",get:function(){return{fontColor:"#98c378"}}},
{key:"string-2",get:function(){return{fontColor:"#98c378"}}},{key:"meta",get:function(){return{fontColor:"#555"}}},{key:"qualifier",get:function(){return{fontColor:"#d19a66"}}},{key:"builtin",get:function(){return{fontColor:"#30a"}}},{key:"bracket",get:function(){return{fontColor:"#515a6b"}}},{key:"brace",get:function(){return{fontColor:"#abb2bf"}}},{key:"tag",get:function(){return{fontColor:"#170"}}},{key:"attribute",get:function(){return{fontColor:"#d19a66"}}},{key:"error",get:function(){return{backgroundColor:hg.Color.rgba(255,
76,76,.8)}}},{key:"invalidchar",get:function(){return{backgroundColor:"#ff4c4c"}}},{key:"warning",get:function(){return{"border-bottom":"2px dotted orange"}}},{key:"diff-file-header",get:function(){return{fontColor:hg.Color.white,fontWeight:"bold",backgroundColor:hg.Color.rgba(136,136,136,.7)}}},{key:"diff-hunk-header",get:function(){return{backgroundColor:hg.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"coord",get:function(){return{backgroundColor:hg.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},
{key:"inserted",get:function(){return{backgroundColor:"rgba(108,255,108, .3)"}}},{key:"deleted",get:function(){return{backgroundColor:"rgba(255,108,108, .3)"}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DarkTheme"}},{key:"instance",get:function(){return this._instance||(this._instance=new this)}}],ra,{pathInPackage:function(){return"./themes/dark.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:42,end:3846})}(void 0));hg["default"]=bh;var Qf=window.lively.FreezerRuntime.recorderFor("lively.ide/themes/default.js");Qf.Color=fe;var he=bd("D",function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.ide/themes/default.js"),mb=ra.hasOwnProperty("DefaultTheme")&&"function"===typeof ra.DefaultTheme?ra.DefaultTheme:ra.DefaultTheme=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(mb,ha,[{key:"background",get:function(){return Qf.Color.white}},{key:"default",get:function(){return{fontColor:"#333"}}},{key:"header",get:function(){return{fontSize:"110%",fontColor:"#6b94ee"}}},{key:"header-1",get:function(){return{fontSize:"135%",fontColor:"#6b94ee"}}},{key:"header-2",get:function(){return{fontSize:"125%",fontColor:"#6b94be"}}},{key:"header-3",get:function(){return{fontSize:"120%",fontColor:"#6b94be"}}},{key:"quote",get:function(){return{fontColor:"#090"}}},
{key:"negative",get:function(){return{fontColor:"#d44"}}},{key:"positive",get:function(){return{fontColor:"#292"}}},{key:"strong",get:function(){return{fontWeight:"bold"}}},{key:"em",get:function(){return{fontStyle:"italic"}}},{key:"strikethrough",get:function(){return{textDecoration:"line-through"}}},{key:"hr",get:function(){return{fontColor:"#999"}}},{key:"link",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},{key:"url",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},
{key:"keyword",get:function(){return{fontColor:"#708"}}},{key:"atom",get:function(){return{fontColor:"#219"}}},{key:"number",get:function(){return{fontColor:"#174"}}},{key:"def",get:function(){return{fontColor:"#22c"}}},{key:"variable",get:function(){return{fontColor:"#05a"}}},{key:"punctuation",get:function(){return{fontColor:"#05a"}}},{key:"property",get:function(){return{fontColor:"#222"}}},{key:"operator",get:function(){return{fontColor:"#05a"}}},{key:"variable-2",get:function(){return{fontColor:"#05a"}}},
{key:"variable-3",get:function(){return{fontColor:"#085"}}},{key:"comment",get:function(){return{fontColor:"#666"}}},{key:"commentHighlight",get:function(){return{backgroundColor:"#FFFF00",fontColor:"#666"}}},{key:"string",get:function(){return{fontColor:"#181"}}},{key:"string-2",get:function(){return{fontColor:"#0B2"}}},{key:"meta",get:function(){return{fontColor:"#555"}}},{key:"qualifier",get:function(){return{fontColor:"#555"}}},{key:"builtin",get:function(){return{fontColor:"#30a"}}},{key:"bracket",
get:function(){return{fontColor:"#997"}}},{key:"tag",get:function(){return{fontColor:"#170"}}},{key:"attribute",get:function(){return{fontColor:"#333"}}},{key:"error",get:function(){return{backgroundColor:Qf.Color.rgba(255,76,76,.53)}}},{key:"invalidchar",get:function(){return{backgroundColor:Qf.Color.rgba(255,76,76,.53)}}},{key:"warning",get:function(){return{"border-bottom":"2px dotted orange"}}},{key:"diff-file-header",get:function(){return{fontColor:Qf.Color.white,fontWeight:"bold",backgroundColor:Qf.Color.rgba(136,
136,136,.7)}}},{key:"diff-hunk-header",get:function(){return{backgroundColor:Qf.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"coord",get:function(){return{backgroundColor:Qf.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"inserted",get:function(){return{backgroundColor:"rgba(108,255,108, .3)"}}},{key:"deleted",get:function(){return{backgroundColor:"rgba(255,108,108, .3)"}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DefaultTheme"}},{key:"instance",get:function(){return this._instance||
(this._instance=new this)}}],ra,{pathInPackage:function(){return"./themes/default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:42,end:3662})}(void 0));Qf["default"]=he;var Uf=window.lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");Uf.removeSnapToGuidesOf=Md;Uf.computeRefPoints=function(ha){var ra=ha.x,mb=ha.y,
E=ha.width;ha=ha.height;return{left:ra,top:mb,hCenter:ra+E/2,vCenter:mb+ha/2,right:ra+E,bottom:mb+ha,width:E,height:ha}};Uf.closest=function(ha,ra,mb,E,R,Ya,gb){for(var $b=7<arguments.length&&void 0!==arguments[7]?arguments[7]:!0,Sc=E[ha],Ic=R[ha],Pd=Ya[ha],Zd=gb[ha],ge,Ce,$e,pf,ig=0;ig<R.length;ig++)ha===ig||Sc<R[ig]||ge&&R[ge.index]>=R[ig]||$b&&gb[ha]<Ya[ig]||Ya[ha]>gb[ig]||(ge={index:ig,dist:Sc-R[ig],refPointsA:mb[ha],refPointsB:mb[ig]});for(Sc=0;Sc<E.length;Sc++)ha===Sc||Ic>E[Sc]||Ce&&E[Ce.index]<=
E[Sc]||$b&&gb[ha]<Ya[Sc]||Ya[ha]>gb[Sc]||(Ce={index:Sc,dist:E[Sc]-Ic,refPointsA:mb[ha],refPointsB:mb[Sc]});for(Ic=0;Ic<gb.length;Ic++)ha===Ic||Pd<gb[Ic]||$e&&gb[$e.index]>=gb[Ic]||$b&&E[ha]>R[Ic]||R[ha]<E[Ic]||($e={index:Ic,dist:Pd-gb[Ic],refPointsA:mb[ha],refPointsB:mb[Ic]});for(Pd=0;Pd<Ya.length;Pd++)ha===Pd||Zd>Ya[Pd]||pf&&Ya[pf.index]<=Ya[Pd]||$b&&E[ha]>R[Pd]||R[ha]<E[Pd]||(pf={index:Pd,dist:Ya[Pd]-Zd,refPointsA:mb[ha],refPointsB:mb[Pd]});return{l:ge,r:Ce,t:$e,b:pf}};Uf.computeClosestMorphs=function(ha){for(var ra=
[],mb=[],E=[],R=[],Ya=[],gb=[],$b=0;$b<ha.length;$b++){var Sc=Uf.computeRefPoints(ha[$b].bounds());Ya.push(Sc);var Ic=Sc.right,Pd=Sc.top,Zd=Sc.bottom;ra.push(Sc.left);mb.push(Ic);E.push(Pd);R.push(Zd)}for($b=0;$b<ha.length;$b++)gb.push(Uf.closest($b,ha,Ya,ra,mb,E,R));return gb};Uf.findEdgesInAlignment=function(ha,ra){for(var mb=2<arguments.length&&void 0!==arguments[2]?arguments[2]:15,E=3<arguments.length?arguments[3]:void 0,R=4<arguments.length?arguments[4]:void 0,Ya=5<arguments.length&&void 0!==
arguments[5]?arguments[5]:0,gb=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,$b=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,Sc=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,Ic=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0,Pd=[],Zd=[],ge=0;ge<Uf.edges.length;ge++){var Ce=ic(Uf.edges[ge],3),$e=Ce[0],pf=Ce[1];Ce=Ce[2];var ig=ha[pf],Xf=ra[Ce],Vg=Math.max(ig,Xf)-Math.min(ig,Xf);Vg>mb||!(E&&!E.includes(pf)||R&&!R.includes(Ce))&&("vertical"===$e?Pd:Zd).push({delta:Vg,
edgeA:pf,edgeB:Ce,edgeAVal:ig,edgeBVal:Xf,refPointsA:ha,refPointsB:ra,distLeft:Ya,distTop:gb,distRight:$b,distBottom:Sc,maxDist:Ic})}return Pd.length||Zd.length?{vertical:Pd,horizontal:Zd}:null};Uf.findAlignedMorphs=function(ha,ra){for(var mb=2<arguments.length&&void 0!==arguments[2]?arguments[2]:15,E=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Infinity,R=4<arguments.length?arguments[4]:void 0,Ya=5<arguments.length?arguments[5]:void 0,gb,$b=Uf.computeRefPoints(ha.bounds()),Sc=0;Sc<ra.length;Sc++){var Ic=
ra[Sc];if(Ic!==ha){var Pd=Uf.computeRefPoints(Ic.bounds()),Zd=Math.max(0,$b.left-Pd.right),ge=Math.max(0,Pd.left-$b.right),Ce=Math.max(0,$b.top-Pd.bottom),$e=Math.max(0,Pd.top-$b.bottom);Math.max($e,Ce,ge,Zd)>E||!(Pd=Uf.findEdgesInAlignment($b,Pd,mb,R,Ya,Zd,Ce,ge,$e,Math.max($e,Ce,ge,Zd)))||(gb||(gb=new Map),gb.set(Ic,Pd))}}E=ha.owner;R=Uf.computeRefPoints(E.innerBounds());if(mb=Uf.findEdgesInAlignment($b,R,mb))gb||(gb=new Map),gb.set(E,mb);return gb};Uf.showAndSnapToGuides=Ob;Uf.findMorphsWithSimilarWidthOrHeight=
function(ha,ra,mb){for(var E=3<arguments.length&&void 0!==arguments[3]?arguments[3]:15,R=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Infinity,Ya,gb=Uf.computeRefPoints(ha.bounds()),$b=0;$b<mb.length;$b++){var Sc=mb[$b];if(Sc!==ha){var Ic=Uf.computeRefPoints(Sc.bounds()),Pd=Math.max(0,gb.left-Ic.right),Zd=Math.max(0,Ic.left-gb.right),ge=Math.max(0,gb.top-Ic.bottom),Ce=Math.max(0,Ic.top-gb.bottom),$e=Math.min(Ce,ge,Zd,Pd),pf=Math.max(Ce,ge,Zd,Pd);if(!(Math.max(Ce,ge,Zd,Pd)>R)){Pd=gb.width;
Zd=gb.height;ge=Ic.width;Ce=Ic.height;var ig=ge-Pd,Xf=Ce-Zd;("x"===ra||"xy"===ra)&&Math.abs(ig)<=E&&(Ya||(Ya=new Map),Ya.set(Sc,{similarIn:"width",minDist:$e,maxDist:pf,refPointsA:gb,refPointsB:Ic,valA:Pd,valB:ge,delta:ig}));("y"===ra||"xy"===ra)&&Math.abs(Xf)<=E&&(Ya||(Ya=new Map),Ya.set(Sc,{similarIn:"height",minDist:$e,maxDist:pf,refPointsA:gb,refPointsB:Ic,valA:Zd,valB:Ce,delta:Xf}))}}}return Ya};Uf.showAndSnapToResizeGuides=Le;Uf.fun=jc;Uf.pt=Od;Uf.Color=fe;Uf.morph=qb;Uf.cachedGuideLines=new WeakMap;
Uf.guideWidth=1;Uf.guideColor=Uf.Color.orange.lighter();Uf.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom","vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal",
"right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];Uf.removeSnapToGuidesOf=Md;Uf.showAndSnapToGuides=Ob;Uf.showAndSnapToResizeGuides=Le;var $g=window.lively.FreezerRuntime.recorderFor("lively.halos/markers.js");$g.showThenHide=function(ha,ra){var mb=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3;if(ha){var E=Array.isArray(ra)?ra:[ra];E.forEach(function(R){return ha.addMorph(R)});mb&&setTimeout(function(){return E.forEach(function(R){return R.fadeOut(2E3)})},
1E3*mb);return ra}};$g.showInLoop=function(ha,ra,mb){return We.apply(this,arguments)};$g.showRect=function(ha,ra,mb){var E=$g.BoundsMarker.highlightBounds(ra);return mb?$g.showInLoop(ha,E,ra):$g.showThenHide(ha,E)};$g.showLine=function(ha,ra){var mb=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3E3,E=ra.start,R=ra.end.subPt(E),Ya=ha.addMorph({position:E,rotation:R.theta(),border:{width:1,color:$g.Color.red},width:R.fastR(),height:0});mb&&setTimeout(function(){return Ya.fadeOut()},mb);return Ya};
$g.show=xe;$g.obj=Dd;$g.promise=lc;$g.string=ad;$g.pt=Od;$g.Color=fe;$g.Rectangle=db;$g.morph=qb;$g.easings=Xa;$g.Morph=Gb;$g.MorphicEnv=sc;$g.once=ub;(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),mb=ra.hasOwnProperty("BoundsMarker")&&"function"===typeof ra.BoundsMarker?ra.BoundsMarker:ra.BoundsMarker=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,
ha,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){uc._get(Object.getPrototypeOf(mb.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:$g.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",get:function(){return!0}},{key:"markerLength",value:function(E){E=E.insetBy(-2);E=Math.min(E.width,E.height);return Math.max(4,Math.floor(10>E/10?E/2-5:E/10))}},{key:"createMarkerEdge",value:function(){return $g.morph({fill:$g.Color.red,
reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var E=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),R=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),Ya=this.topRightH||(this.topRightH=this.addMorph(this.createMarkerEdge())),gb=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),$b=this.bottomRightH||(this.bottomRightH=this.addMorph(this.createMarkerEdge())),Sc=this.bottomRightV||(this.bottomRightV=
this.addMorph(this.createMarkerEdge())),Ic=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),Pd=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[E,R,Ya,gb,$b,Sc,Ic,Pd]}},{key:"alignWithMorph",value:function(E){return this.alignWithBounds(E.globalBounds().translatedBy($world.scroll.negated()))}},{key:"alignWithBounds",value:function(E){this.alignWithRect(E.insetBy(-20));return this.alignWithRect(E,!0)}},{key:"alignWithRect",value:function(E,
R){var Ya=this.ensureMarkerCorners(),gb=this.markerLength(E),$b=[E.topLeft().addXY(0,0).extent($g.pt(gb,5)),E.topLeft().addXY(0,0).extent($g.pt(5,gb)),E.topRight().addXY(-gb,0).extent($g.pt(gb,5)),E.topRight().addXY(-5,0).extent($g.pt(5,gb)),E.bottomRight().addXY(-5,-gb).extent($g.pt(5,gb)),E.bottomRight().addXY(-gb,-5).extent($g.pt(gb,5)),E.bottomLeft().addXY(0,-5).extent($g.pt(gb,5)),E.bottomLeft().addXY(0,-gb).extent($g.pt(5,gb))];Ya.forEach(function(Sc,Ic){return Sc.setBounds($b[Ic])});R&&(this.adjustOrigin(E.center()),
this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(){var E=Ed(regeneratorRuntime.mark(function gb(Ya){var $b;return regeneratorRuntime.wrap(function(Sc){for(;;)switch(Sc.prev=Sc.next){case 0:return Sc.next=2,this.animate({scale:Math.max(30/Ya.width,1.05)});case 2:return $b=this.center,Sc.next=5,this.animate({center:$b,scale:1,duration:300,easing:$g.easings.inOutExpo});case 5:case "end":return Sc.stop()}},gb,this)}));return function(Ya){return E.apply(this,
arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(E){return(new this).alignWithMorph(E)}},{key:"highlightBounds",value:function(E){return(new this).alignWithBounds(E)}}],ra,{pathInPackage:function(){return"./markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:244,end:3764})})($g.Morph);$g.show=xe;var Ta=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js");Ta.Morph=Gb;Ta.Label=sb;Ta.HorizontalLayout=fa;Ta.Path=Db;Ta.Text=ab;Ta.GridLayout=eb;Ta.morph=qb;Ta.Icon=kc;Ta.createMorphSnapshot=Vb;Ta.Color=fe;Ta.pt=Od;Ta.rect=pb;Ta.Rectangle=db;Ta.LinearGradient=Nb;Ta.obj=Dd;Ta.string=ad;Ta.PropertyPath=zb;Ta.promise=lc;Ta.properties=rb;Ta.num=se;Ta.arr=Rc;Ta.connect=Ne;Ta.signal=Cb;Ta.disconnect=Ib;Ta.disconnectAll=da;Ta.once=ub;Ta.moduleManager=
Pc;Ta.showAndSnapToGuides=Ob;Ta.showAndSnapToResizeGuides=Le;Ta.removeSnapToGuidesOf=Md;Ta.show=xe;Ta.haloBlue=Ta.Color.rgb(23,160,251);Ta.componentAccent=Ta.Color.magenta;var th=bd("M",function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),mb=ra.hasOwnProperty("MorphHighlighter")&&"function"===typeof ra.MorphHighlighter?ra.MorphHighlighter:ra.MorphHighlighter=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(mb,ha,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||
this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(E){this.layoutHalo&&this.layoutHalo.handleDrop(E)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();
this.remove()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Ta.Color.orange.withA(.3)},borderWidth:{defaultValue:2},borderColor:{defaultValue:Ta.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},
acceptsDrops:{get:function(){return!!this.layoutHalo}},highlightedSides:{defaultValue:[],set:function(E){var R=this;this.setProperty("highlightedSides",E);this.submorphs=E.map(function(Ya){return{type:"ellipse",isHaloItem:!0,fill:Ta.Color.orange,center:R.innerBounds()[Ya]()}});this.addMorph({type:"label",name:"name tag",padding:Ta.Rectangle.inset(5,5,5,5),fontColor:Ta.Color.white,fill:Ta.Color.orange,borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,
derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(){var E=0<arguments.length&&void 0!==arguments[0]?arguments[0]:$world,R=E._morphHighlighters,Ya;for(Ya in R)R[Ya].remove();delete E._morphHighlighters}},{key:"for",value:function(E,R){var Ya=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,gb=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],$b=E._morphHighlighters=E._morphHighlighters||{};Ta.properties.forEachOwn($b,
function(Sc,Ic){return Ic.alignWithHalo()});if(!R||R.ownerChain().find(function(Sc){return Sc.isHaloItem}))return null;$b[R.id]=$b[R.id]||new this({targetId:R.id,halo:E,showLayout:Ya});E.addMorph($b[R.id]);$b[R.id].highlightedSides=gb;return $b[R.id]}},{key:"interceptDrop",value:function(E,R,Ya){(E=E._morphHighlighters=E._morphHighlighters||{},E[R.id])&&E[R.id].handleDrop(Ya)}}],ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:910,end:4909})}(Ta.Morph));Ta.MorphHighlighter=th;Ta.MorphHighlighter=th;(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),mb=ra.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof ra.MultiSelectionTarget?ra.MultiSelectionTarget:ra.MultiSelectionTarget=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(mb,ha,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},{key:"selectsMorph",value:function(E){return this.selectedMorphs.includes(E)}},{key:"alignWithSelection",value:function(){var E=this.selectedMorphs.map(function(R){return R.globalBounds()}).reduce(function(R,Ya){return R.union(Ya)});this.setBounds(E)}},{key:"onGrab",value:function(E){this.grabbingHand=E.hand;this.selectionGrabbed=!0;E.hand.grab(this.selectedMorphs);Ta.once(E.hand,
"dropMorphsOn",this,"onGrabEnd");Ta.connect(E.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=!1;Ta.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(E){var R=E.value.subPt(E.prevValue);this.selectedMorphs.forEach(function(Ya){return Ya.resizeBy(R)})}},{key:"updatePosition",value:function(E){if(!this.selectionGrabbed){var R=E.value.subPt(E.prevValue);this.selectedMorphs.forEach(function(Ya){return Ya.moveBy(R)})}}},{key:"updateRotation",
value:function(E){var R=this,Ya=E.value-E.prevValue;this.selectedMorphs.forEach(function(gb){var $b=gb.origin;gb.adjustOrigin(gb.localize(R.worldPoint(Ta.pt(0,0))));gb.rotation+=Ya;gb.adjustOrigin($b)})}},{key:"updateScale",value:function(E){var R=this,Ya=E.value-E.prevValue;this.selectedMorphs.forEach(function(gb){var $b=gb.origin;gb.adjustOrigin(gb.localize(R.worldPoint(Ta.pt(0,0))));gb.scale+=Ya;gb.adjustOrigin($b)})}},{key:"onChange",value:function(E){uc._get(Object.getPrototypeOf(mb.prototype),
"onChange",this).call(this,E);if(this.modifiesSelectedMorphs){switch(E.prop){case "extent":this.updateExtent(E);break;case "scale":this.updateScale(E);break;case "position":this.updatePosition(E);break;case "rotation":this.updateRotation(E)}return E}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]},halosEnabled:{defaultValue:!1}}}}],
ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:4977,end:7407})})(Ta.Morph);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),mb=ra.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof ra.HaloPropertyDisplay?ra.HaloPropertyDisplay:ra.HaloPropertyDisplay=
function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},{key:"displayProperty",value:function(E){var R=this.halo.state.activeButton;E=String(E);this.visible=!0;this.textString=E;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(R.bounds())&&
(this.position=Ta.pt(R.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},{key:"defaultPosition",get:function(){return Ta.pt(25,0)}},{key:"for",value:function(E){return E.getSubmorphNamed(this.morphName)||E.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},
fill:{defaultValue:Ta.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:Ta.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:Ta.Color.white},position:{defaultValue:this.defaultPosition}}}}],ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:7598,end:9096})})(Ta.Label);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),mb=ra.hasOwnProperty("HaloItem")&&"function"===typeof ra.HaloItem?ra.HaloItem:ra.HaloItem=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"menuItems",value:function(){return[]}},
{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"HaloItem"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:Ta.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:Ta.pt(24,24)},halo:{},acceptsDrops:{defaultValue:!1}}}},{key:"for",value:function(E){return E.getSubmorphNamed(this.morphName)||
E.addMorph(new this({halo:E,name:this.morphName}))}}],ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:9260,end:10090})})(Ta.Morph);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),mb=ra.hasOwnProperty("NameHolder")&&"function"===typeof ra.NameHolder?
ra.NameHolder:ra.NameHolder=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"onHoverIn",value:function(E){this.highlightOnHover&&this.nameHolder.active&&(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=Ta.Color.orange)}},{key:"onHoverOut",value:function(E){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=
Ta.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(E){"Enter"===E.keyCombo?(this.accept(),this.halo.focus(),E.stop()):uc._get(Object.getPrototypeOf(mb.prototype),"onKeyDown",this).call(this,E)}},{key:"onMouseUp",value:function(){Ta.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(E){this.nameHolder.fontColor=Ta.Color.white;this.halo.toggleMorphHighlighter(!1,
this.target)}},{key:"onKeyUp",value:function(E){E=this.nameHolder.textString;var R=this.target.owner;this.validName=!R||!R.getSubmorphNamed(E)||this.target.name===E;Ta.signal(this,"valid",[this.validName,E])}},{key:"update",value:function(){var E=this;this.nameHolder.textString!==this.target.name&&(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return E.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},
{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(E){if(!this.forceUniqueName||this.validName)this.target.name=E,Ta.signal(this,"active",[!1,this]),(E=$world.getSubmorphNamed("Comment Browser"))&&E.viewModel.updateName(this.target)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},
draggable:{defaultValue:!1},fill:{defaultValue:Ta.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new Ta.HorizontalLayout({renderViaCSS:!0,resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new Ta.Text({fill:Ta.Color.transparent,fontColor:Ta.Color.white,fontWeight:"bold",active:!0}));Ta.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],ra,{pathInPackage:function(){return"./morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10126,end:13018})})(Ta.Morph);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),mb=ra.hasOwnProperty("NameHaloItem")&&"function"===typeof ra.NameHaloItem?ra.NameHaloItem:ra.NameHaloItem=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(mb,ha,[{key:Symbol["for"]("lively-instance-initialize"),value:function(E){uc._get(Object.getPrototypeOf(mb.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,E);this.initComponentLink();this.initNameHolders();this.validityIndicator=Ta.Icon.makeLabel("check",{fontColor:Ta.Color.green,fontSize:15,padding:Ta.rect(4,6,4,0)});this.fill=this.halo.target.isComponent?Ta.componentAccent:Ta.haloBlue;this.alignInHalo()}},{key:"initComponentLink",value:function(){var E=
this.halo.target;if(E&&!E.isMorphSelection&&E.master){var R=(E=E.master.determineMaster(E))?E[Symbol["for"]("lively-module-meta")]:!1;E=this.addMorph(Ta.Icon.makeLabel(R?"external-link-alt":"exclamation-triangle",{nativeCursor:"pointer",fontColor:Ta.Color.white,padding:Ta.rect(8,0,-8,0),name:"master link",tooltip:R?"Located in "+R.module:!1}));R&&Ta.connect(E,"onMouseDown",function(){$world.execCommand("open browser",{moduleName:R.module,codeEntity:R["export"]})})}}},{key:"showLocalMaster",value:function(E){var R;
if(R=E.getWindow())R.activate(),R.minimized&&(R.minimized=!1);E.show()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(E){return{target:E,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var E=this;this.nameHolders=this.targets().map(function(R){R=new Ta.NameHolder({halo:E.halo,highlightOnHover:R.highlightOnHover,target:R.target});Ta.connect(R,
"active",E,"toggleActive");Ta.connect(R,"valid",E,"toggleNameValid");return R});this.submorphs=[].concat(Wb(this.submorphs),Wb(Ta.arr.interpose(this.nameHolders,{extent:Ta.pt(1,28),fill:Ta.Color.black.withA(.4)})))}},{key:"toggleActive",value:function(E){var R=ic(E,2);E=R[0];var Ya=R[1];if(this.halo.changingName!==E){this.halo.changingName=E;if(R=this.get("master link"))R.visible=R.isLayoutable=!E;E?(this.nameHolders.forEach(function(gb){return gb!==Ya&&gb.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),
this.fill=Ta.Color.darkGray,setTimeout(function(){return Ya.nameHolder.selectAll()})):(this.fill=Ta.haloBlue,this.nameHolders.forEach(function(gb){return gb!==Ya&&gb.activate()}),this.borderWidth=0,this.validityIndicator.remove());this.alignInHalo()}}},{key:"toggleNameValid",value:function(E){var R=ic(E,2);E=R[0];R=R[1];(this.validName=E)?(this.conflictingMorph=null,this.borderColor=Ta.Color.green,this.validityIndicator.nativeCursor="auto",this.validityIndicator.fontColor=Ta.Color.green,Ta.Icon.setIcon(this.validityIndicator,
"check")):(this.conflictingMorph=this.get(R),this.borderColor=Ta.Color.red,this.validityIndicator.fontColor=Ta.Color.red,this.validityIndicator.nativeCursor="pointer",Ta.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){Ta.arr.zip(this.targets(),this.nameHolders).map(function(R){R=ic(R,2);var Ya=R[1];Ya.target=R[0].target;Ya.update()});var E=this.halo.innerBounds().bottomCenter().addPt(Ta.pt(0,2));this.topCenter=Ta.pt(Math.max(E.x,30),Math.max(E.y,80))}},
{key:"onMouseDown",value:function(E){var R=this,Ya=this.conflictingMorph;Ya&&(this.halo.toggleMorphHighlighter(!0,Ya),setTimeout(function(){return R.halo.toggleMorphHighlighter(!1,Ya)},1E3))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:4},fill:{defaultValue:Ta.haloBlue},borderColor:{defaultValue:Ta.Color.green},layout:{initialize:function(){this.layout=
new Ta.HorizontalLayout({resizeContainer:!0,spacing:0,align:"center",orderByIndex:!0})}}}}}],ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:13020,end:17645})})(Ta.HaloItem);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),mb=ra.hasOwnProperty("CloseHaloItem")&&
"function"===typeof ra.CloseHaloItem?ra.CloseHaloItem:ra.CloseHaloItem=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"update",value:function(){var E=this.halo,R=E.target.owner;R.undoStart("close-halo");E.target.selectedMorphs?E.target.selectedMorphs.forEach(function(Ya){return Ya.abandon()}):E.target.abandon();R.undoStop("close-halo");E.world().withTopBarDo(function(Ya){Ya.stylingPalette&&
Ya.stylingPalette.clearFocus();Ya.sideBar&&Ya.sideBar.clearFocus()});E.remove()}},{key:"onMouseDown",value:function(E){this.update()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{targetIsComponent:{derived:!0,get:function(){return this.halo.target.isComponent}},styleClasses:{after:["halo"],initialize:function(){this.styleClasses=["fas",this.targetIsComponent?"fa-eye-slash":
"fa-trash"]}},draggable:{defaultValue:!1},tooltip:{after:["halo"],initialize:function(){this.tooltip=this.targetIsComponent?"Hide this component":"Remove this morph from the world"}}}}}],ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:17647,end:18876})})(Ta.HaloItem);(function(ha){var ra=
window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),mb=ra.hasOwnProperty("GrabHaloItem")&&"function"===typeof ra.GrabHaloItem?ra.GrabHaloItem:ra.GrabHaloItem=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"adjustTarget",value:function(E,R){Ta.PropertyPath("owner.layout.autoResize").get(E)&&!E.globalBounds().insetBy(10).containsPoint(R)&&(E=E.owner);return E}},{key:"valueForPropertyDisplay",
value:function(){var E=this.hand,R=this.halo,Ya=this.prevDropTarget,gb=E.world(),$b=E.findDropTarget(E.globalPosition,[R.target],function(Sc){return!Sc.isHaloItem&&!Sc.ownerChain().some(function(Ic){return Ic.isHaloItem||!Ic.visible||0===Ic.opacity})});if($b)return $b=this.adjustTarget($b,E.globalPosition),R.toggleMorphHighlighter($b&&$b!==gb,$b,!0),Ya&&Ya!==$b&&R.toggleMorphHighlighter(!1,Ya),(this.prevDropTarget=$b)&&$b.name}},{key:"init",value:function(E){var R=this.halo,Ya=R.target.undoStart("grab-halo");
Ya&&Ya.addTarget(R.target.owner);this.hand=E;R.target.onGrab({halo:R,hand:E,isShiftDown:function(){return!1}});R.state.activeButton=this;this.opacity=.3;var gb=Ta.connect(E,"update",this,"update");Ta.once(R.target,"remove",function(){return gb.disconnect()})}},{key:"stop",value:function(E){var R=this.halo,Ya=this.prevDropTarget,gb=R.target.undoInProgress,$b=E.hand.findDropTarget(E.hand.globalPosition,[R.target],function(Sc){return!Sc.isHaloItem&&!Sc.ownerChain().some(function(Ic){return Ic.isHaloItem})});
$b=this.adjustTarget($b,E.hand.globalPosition);Ta.disconnect(E.hand,"update",this,"update");Ta.MorphHighlighter.interceptDrop(R,$b,R.target);gb.addTarget($b);$b.onDrop(E);R.state.activeButton=null;R.toggleMorphHighlighter(!1,Ya);Ta.MorphHighlighter.removeHighlighters(R);R.target.undoStop("grab-halo");this.opacity=1;R.target.owner.layout?(R.opacity=0,R.target.whenRendered().then(function(){R.alignWithTarget();R.opacity=1})):R.alignWithTarget()}},{key:"update",value:function(){this.halo.alignWithTarget()}},
{key:"onDragStart",value:function(E){this.init(E.hand)}},{key:"onDragEnd",value:function(E){this.stop(E)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["fa-solid","fa-hand-back-fist"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:18940,end:21788})})(Ta.HaloItem);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),mb=ra.hasOwnProperty("DragHaloItem")&&"function"===typeof ra.DragHaloItem?ra.DragHaloItem:ra.DragHaloItem=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(mb,ha,[{key:"valueForPropertyDisplay",value:function(){return this._dontShowPosition?void 0:this.halo.target.position}},{key:"updateAlignmentGuide",value:function(E){var R=this.halo.getSubmorphNamed("mesh");if(E)return R=this.halo.getMesh(this.halo.target.worldPoint(Ta.pt(0,0))),this.focus(),R;R&&R.remove()}},{key:"init",value:function(){var E=this.halo.target;if(E.owner){var R=E.owner.layout;E.undoStart("drag-halo");R&&"Tiling"===R.name()&&R.layoutableSubmorphs.includes(E)&&
(this._dontShowPosition=!0,this.halo.indicateLooseMovement(!0));this.halo.state.activeButton=this;this.actualPos=E.position;this.targetTransform=E.owner.getGlobalTransform().inverse()}}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.originHalo().alignInHalo();this.halo.indicateLooseMovement(!1);this._dontShowPosition=!1;this.updateAlignmentGuide(!1);Ta.removeSnapToGuidesOf(this.halo.target)}},{key:"update",
value:function(E){var R=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,Ya=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,gb=this.actualPos.addPt(this.targetTransform.transformDirection(E));this.actualPos=gb;R&&(gb=gb.griddedBy(Ta.pt(10,10)));this.halo.target.position=gb;this.updateAlignmentGuide(R);this.world().withTopBarDo(function($b){if($b.activeSideBars.includes("Styling Palette"))$b.stylingPalette.onHierarchyChange()});R||Ta.showAndSnapToGuides(this.halo.target,!0,Ya,5,
500)}},{key:"onDragStart",value:function(E){this.init()}},{key:"onDrag",value:function(E){this.update(E.state.dragDelta,E.isAltDown(),E.isCtrlDown())}},{key:"onDragEnd",value:function(E){this.stop()}},{key:"onKeyUp",value:function(E){this.updateAlignmentGuide(!1)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},
tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21790,end:24361})})(Ta.HaloItem);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
mb=ra.hasOwnProperty("InspectHaloItem")&&"function"===typeof ra.InspectHaloItem?ra.InspectHaloItem:ra.InspectHaloItem=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"onMouseDown",value:function(E){var R=this;Ed(regeneratorRuntime.mark(function gb(){var $b,Sc,Ic;return regeneratorRuntime.wrap(function(Pd){for(;;)switch(Pd.prev=Pd.next){case 0:return Pd.next=2,Promise.resolve().then(function(){return ua});
case 2:$b=Pd.sent,(Sc=R.world().getSubmorphsByStyleClassName("Inspector").find(function(Zd){return Zd.targetObject===R.halo.target}))&&(Ic=Sc.getWindow())?(Ic.minimized=!1,Ic.activate(),Ic.animate({center:R.world().visibleBounds().center(),duration:200})):$b.openInWindow({targetObject:R.halo.target}),R.halo.remove();case 6:case "end":return Pd.stop()}},gb)}))()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},
{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-magnifying-glass-chart"]}}}}],ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:24363,end:25370})})(Ta.HaloItem);(function(ha){var ra=
window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),mb=ra.hasOwnProperty("EditHaloItem")&&"function"===typeof ra.EditHaloItem?ra.EditHaloItem:ra.EditHaloItem=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"onMouseDown",value:function(){var E=Ed(regeneratorRuntime.mark(function gb(Ya){var $b,Sc,Ic,Pd;return regeneratorRuntime.wrap(function(Zd){for(;;)switch(Zd.prev=
Zd.next){case 0:$b=this.halo.target;Sc=this.world();if(!$b.viewModel){Zd.next=7;break}this.halo.remove();Zd.next=6;return Sc.multipleChoicePrompt(["Edit View or Morph?",null,"\nThe selected morph is attached to a view model. Please select which one you would like to edit.",{fontWeight:"normal",fontSize:16}],{choices:new Map([[[].concat(Wb(Ta.Icon.textAttribute("database",{paddingTop:"3px"})),["   Model",null]),$b.viewModel],[[].concat(Wb(Ta.Icon.textAttribute("eye",{paddingTop:"3px"})),["   View",
null]),$b]])});case 6:$b=Zd.sent;case 7:(Ic=Sc.getSubmorphsByStyleClassName("ObjectEditor").find(function(ge){return ge.target===$b}))?(Pd=Ic.getWindow(),Pd.bringToFront(),Pd.minimized=!1,Pd.animate({center:Sc.visibleBounds().center(),duration:200})):Sc.execCommand("open object editor",{target:$b}),this.halo.remove();case 10:case "end":return Zd.stop()}},gb,this)}));return function(Ya){return E.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"EditHaloItem"}},
{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:25372,end:26912})})(Ta.HaloItem);
(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),mb=ra.hasOwnProperty("RotateHaloItem")&&"function"===typeof ra.RotateHaloItem?ra.RotateHaloItem:ra.RotateHaloItem=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:Symbol["for"]("lively-instance-initialize"),value:function(E){uc._get(Object.getPrototypeOf(mb.prototype),Symbol["for"]("lively-instance-initialize"),
this).call(this,E);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(E){this.setProperty("angle",E)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(E){this.setProperty("scaleGauge",E)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(E){this.setProperty("initRotation",E)}},{key:"valueForPropertyDisplay",
value:function(){var E=this.halo.target;return this.scaleGauge?E.scale.toFixed(4).toString():Ta.num.toDegrees(E.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(E){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=E;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(E){this.detachFromLayout();this.halo.state.activeButton=this;this.scaleGauge=E.scaleBy(1/this.halo.target.scale);
this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(E){this.scaleGauge=null;E=this.initRotation+(E-this.angle);E=Ta.num.toRadians(Ta.num.detent(Ta.num.toDegrees(E),10,45));this.halo.target.rotation=E;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(E){var R=this.scaleGauge,Ya=this.halo;R||(R=this.scaleGauge=E.scaleBy(1/Ya.target.scale));this.angle=E.theta();this.initRotation=Ya.target.rotation;Ya.target.scale=Ta.num.detent(E.dist(Ta.pt(0,0))/R.dist(Ta.pt(0,
0)),.1,.5);Ya.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(E){this.styleClasses=["fas",E?"fa-search-plus":"fa-redo"];this.tooltip=E?"Scale morph":"Rotate morph"}},{key:"detachFromLayout",value:function(){}},{key:"attachToLayout",
value:function(){}},{key:"onDragStart",value:function(E){this.adaptAppearance(E.isShiftDown());E.isShiftDown()?this.initScale(E.position.subPt(this.halo.target.globalPosition)):this.init(E.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(E){this.globalPosition=E.position.addPt(Ta.pt(-10,-10));this.adaptAppearance(E.isShiftDown());E.isShiftDown()?this.updateScale(E.position.subPt(this.halo.target.globalPosition)):this.update(E.position.subPt(this.halo.target.globalPosition).theta())}},
{key:"onDragEnd",value:function(E){this.adaptAppearance(E.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(E){this.adaptAppearance(E.isShiftDown())}},{key:"onKeyUp",value:function(E){this.adaptAppearance(E.isShiftDown())}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:26914,end:30357})})(Ta.HaloItem);Ta.nameNumberRe=/(.+)([0-9]+)$/;(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),mb=ra.hasOwnProperty("ComponentHaloItem")&&"function"===typeof ra.ComponentHaloItem?ra.ComponentHaloItem:ra.ComponentHaloItem=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(mb,ha,[{key:"updateComponentIndicator",value:function(){var E=this.world(),R=this.halo.target;this.halo.remove();E.showHaloFor(R)}},{key:"checkForDuplicateNamesInHierarchy",value:function(){var E=Ed(regeneratorRuntime.mark(function Ya(){var gb,$b,Sc,Ic,Pd,Zd,ge,Ce,$e,pf,ig;return regeneratorRuntime.wrap(function(Xf){for(;;)switch(Xf.prev=Xf.next){case 0:gb=this.halo.target;$b=this.world();Sc=[];gb.withAllSubmorphsDoExcluding(function(Vg){Vg!==gb&&Sc.push(Vg)},function(Vg){return Vg.master&&
Vg!==gb});Ic=Ta.arr.groupBy(Sc,function(Vg){return Vg.name});Pd={fontWeight:"normal",fontSize:16};if(!Object.values(Ic).find(function(Vg){return 1<Vg.length})){Xf.next=13;break}Zd=Ta.arr.sum(Object.values(Ic).filter(function(Vg){return 1<Vg.length}).map(function(Vg){return Vg.length}));Xf.next=10;return $b.confirm(["Ambigous Names in Submorph Hierarchy  ",{}].concat(Wb(Ta.Icon.textAttribute("exclamation-triangle",{fontColor:Ta.Color.rgb(230,126,34),fontSize:30,lineHeight:"40px"})),["\nThe morph you are about to turn into a component has ".concat(Zd,
" morphs within its submorph hierarchy, that have ambigous names. This can lead to incorrect applications of style properties when you create derived instances from this component.\n\n"),Object.assign({},Pd,{textAlign:"left"}),"Usually ambigous names are caused if your component is in some kind of intermittent state, where it already displays an example state or code has run that automatically created interface elements. This can be fixed by resetting the submorphs of this morph, usually by implementing a ",
Object.assign({},Pd,{textAlign:"left",fontStyle:"italic"}),"reset()",Object.assign({},Pd,{fontStyle:"italic",fontFamily:"IBM Plex Mono"}),' routine you can invoke to put the morph into some kind of "neutral" state. Alternatively you can go ahead and rename the duplicate morphs to have proper unique names. If you have a hard time giving the conflicting morphs appropriate names, this can be an indication that the component you are declaring is too large, and you need to decompose your component into subcomponents further.',
Object.assign({},Pd,{textAlign:"left",fontStyle:"italic"})]),{width:600,confirmLabel:"PROCEED TO RENAME",rejectLabel:"CANCEL",align:"left"});case 10:if(ge=Xf.sent){Xf.next=13;break}return Xf.abrupt("return");case 13:Xf.t0=regeneratorRuntime.keys(Ic);case 14:if((Xf.t1=Xf.t0()).done){Xf.next=39;break}Ce=Xf.t1.value;if(!(2>Ic[Ce].length)){Xf.next=18;break}return Xf.abrupt("continue",14);case 18:$e=Ic[Ce];case 19:if(!(1<$e.length)){Xf.next=37;break}pf=$e[0];Ta.show(pf,!0);Xf.next=24;return $b.prompt(["Name Collision\n",
{},"The name of\n",Pd,pf.toString(),Object.assign({},Pd,{fontStyle:"italic",fontWeight:"bold"}),"\nis not unique within the submorph hierachy of\n",Object.assign({},Pd),gb.name,Object.assign({},Pd,{fontStyle:"italic",fontWeight:"bold"}),"\nThere ".concat(2<$e.length?"are "+($e.length-1)+" other morphs":"is one other morph"," with the exact same name located in this component."),Pd," Duplicate names can cause errors when applying styles to derived morphs of this master component, so it is essential that there is no name ambiguity. Please enter a new name for this or the other conflicting morphs:",
Pd],{input:pf.name,lineWrapping:!0,width:500,fontSize:12,rejectLabel:"IGNORE",confirmLabel:"RENAME",errorMessage:"Provided name is not unique",validate:function(Vg){return!Object.keys(Ic).includes(Vg)}});case 24:ig=Xf.sent;Ta.signal($b,"hideMarkers");ig&&(pf.name=ig);if(!(ig in Ic)){Xf.next=31;break}return Xf.abrupt("continue",19);case 31:if(ig){Xf.next=34;break}$e=Ta.arr.rotate($e);return Xf.abrupt("continue",19);case 34:Ta.arr.remove($e,pf);Xf.next=19;break;case 37:Xf.next=14;break;case 39:return Xf.abrupt("return",
!0);case 40:case "end":return Xf.stop()}},Ya,this)}));return function(){return E.apply(this,arguments)}}()},{key:"onMouseDown",value:function(){var E=Ed(regeneratorRuntime.mark(function Ya(){var gb,$b,Sc,Ic;return regeneratorRuntime.wrap(function(Pd){for(;;)switch(Pd.prev=Pd.next){case 0:gb=this.halo.target;$b=!gb.isComponent;Sc=$world.getAllNamed(gb.name).length;if(!($b&&1<Sc)){Pd.next=10;break}Pd.next=6;return $world.prompt(["Name Conflict\n",{},"The morph's name you are about to turn into a component is already used by ".concat(Sc-
1," other morph").concat(2<Sc?"s":"",". Please enter a "),{fontWeight:"normal"},"unique identifier",{fontStyle:"italic"}," for this component within this project.",{fontWeight:"normal",fontSize:16}],{input:gb.name,lineWrapping:!0,width:400,errorMessage:"Identifier not unique",validate:function(Zd){return 0===$world.getAllNamed(Zd).length}});case 6:if(Ic=Pd.sent){Pd.next=9;break}return Pd.abrupt("return");case 9:gb.name=Ic;case 10:Pd.t0=$b;if(!Pd.t0){Pd.next=15;break}Pd.next=14;return this.checkForDuplicateNamesInHierarchy();
case 14:Pd.t0=Pd.sent;case 15:gb.isComponent=Pd.t0,$b?(Ta.arr.pushIfNotIncluded(gb.world().localComponents,gb),Ta.arr.pushIfNotIncluded(gb.world().hiddenComponents,gb.name)):Ta.arr.remove(gb.world().localComponents,gb),this.world()?this.updateComponentIndicator():gb.world().showHaloFor(gb);case 18:case "end":return Pd.stop()}},Ya,this)}));return function(){return E.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},
{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:30398,end:36580})})(Ta.HaloItem);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),mb=ra.hasOwnProperty("CopyHaloItem")&&"function"===typeof ra.CopyHaloItem?ra.CopyHaloItem:ra.CopyHaloItem=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"init",value:function(E){function R(Zd,ge){return ge.match(Ta.nameNumberRe)?ge.replace(Ta.nameNumberRe,
function(Ce,$e,pf){pf||(pf="0");for(Ce=Number(pf);Zd.get($e+ ++Ce););return $e+Ce}):ge+"1"}var Ya=this.halo,gb=Ya.target,$b=Ya.world(),Sc=gb instanceof Ta.MultiSelectionTarget;Ya.remove();Ta.connect(E,"update",this,"update");if(Sc){var Ic=Ta.arr.compact(gb.selectedMorphs.map(function(Zd){if(Zd.canBeCopied())return Zd=Zd.copy(!0),$b.addMorph(Zd),Zd}));Sc=Ic.map(function(Zd){Zd.name=R(gb,Zd.name);return Zd.position});Ic[0].undoStart("copy-halo");$b.addMorph(Ya);Ya.refocus(Ic);E.grab(Ya.target);Ya.target.onGrab({halo:Ya,
hand:E,isShiftDown:function(){return!1}});Sc.forEach(function(Zd,ge){return Ic[ge].globalPosition=Zd});Ya.alignWithTarget()}else{Sc=gb.globalPosition;var Pd=gb.copy(!0);gb.isComponent&&(Pd.isComponent=!1,Pd.withAllSubmorphsDoExcluding(function(Zd){Zd!==Pd&&Zd.master||delete Zd._parametrizedProps},function(Zd){return Zd.master&&Zd!==Pd}),Pd.master=gb);Pd.name=R(gb,gb.name);$b.addMorph(Pd);Pd.globalPosition=Sc;Pd.undoStart("copy-halo");E.grab(Pd);$b.addMorph(Ya);Ya.visible=!1}}},{key:"stop",value:function(E){var R=
this.halo,Ya=ic(E.grabbedMorphs,1)[0],gb=E.findDropTarget(E.globalPosition,[R.target],function(Sc){return!Sc.isHaloItem&&!Sc.ownerChain().some(function(Ic){return Ic.isHaloItem})}),$b=R.target.undoInProgress;Ta.disconnect(E,"update",this,"update");$b.addTarget(gb);E.dropMorphsOn(gb);R.target.undoStop("copy-halo");R.remove();E.world().showHaloFor(Ya)}},{key:"onDragStart",value:function(E){this.init(E.hand)}},{key:"onDragEnd",value:function(E){this.stop(E.hand)}},{key:"update",value:function(){this.halo.alignWithTarget()}},
{key:"copyToClipBoard",value:function(){var E=Ed(regeneratorRuntime.mark(function Ya(){var gb,$b,Sc,Ic,Pd,Zd,ge,Ce,$e,pf,ig,Xf,Vg,Re;return regeneratorRuntime.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:gb=this.halo;if(!gb.nameHalo().nameHolders.find(function(Sb){return Sb.nameHolder===$world.focusedMorph})){ae.next=3;break}return ae.abrupt("return");case 3:return $b=gb.target,Sc=gb.world(),Ic=$b instanceof Ta.MultiSelectionTarget,Pd=$b.globalBounds().topLeft(),Zd=Ic?$b.selectedMorphs:
[$b],ae.next=10,Promise.all(Zd.filter(function(Sb){return!Sb.isCommentIndicator}).map(function(){var Sb=Ed(regeneratorRuntime.mark(function zf(hf){var Gg;return regeneratorRuntime.wrap(function(vg){for(;;)switch(vg.prev=vg.next){case 0:return Gg=hf.copy(!0),vg.next=3,Promise.all(Gg.withAllSubmorphsDo(function(tg){if(tg.master)return tg.master.applyIfNeeded(),tg.master.whenApplied()}));case 3:return vg.abrupt("return",Gg);case 4:case "end":return vg.stop()}},zf)}));return function(hf){return Sb.apply(this,
arguments)}}()));case 10:ge=ae.sent,Ce=[],$e='<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '.concat(document.querySelector("#lively-morphic-css").outerHTML,"\n          </head>\n          <body>"),gb.remove(),ae.prev=14,pf=dd(ge),ae.prev=16,pf.s();case 18:if((ig=pf.n()).done){ae.next=28;break}Xf=ig.value;ae.next=22;return Ta.createMorphSnapshot(Xf,{addPreview:!1,testLoad:!1,moduleManager:Ta.moduleManager});case 22:Vg=ae.sent,Vg.copyMeta=
{offset:Xf.worldPoint(Ta.pt(0,0)).subPt(Pd)},Ce.push(Vg),$e+=Xf.renderPreview();case 26:ae.next=18;break;case 28:ae.next=33;break;case 30:ae.prev=30,ae.t0=ae["catch"](16),pf.e(ae.t0);case 33:return ae.prev=33,pf.f(),ae.finish(33);case 36:return $e+="</body></html>",Re=JSON.stringify(Ce),ae.next=40,this.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:$e},{type:"application/morphic",data:Re}]);case 40:ae.next=46;break;case 42:return ae.prev=42,ae.t1=ae["catch"](14),Sc.logError(ae.t1),
ae.abrupt("return");case 46:Sc.addMorph(gb),gb.refocus(Zd),gb.setStatusMessage("copied");case 49:case "end":return ae.stop()}},Ya,this,[[14,42],[16,30,33,36]])}));return function(){return E.apply(this,arguments)}}()},{key:"onMouseUp",value:function(){var E=Ed(regeneratorRuntime.mark(function gb(Ya){return regeneratorRuntime.wrap(function($b){for(;;)switch($b.prev=$b.next){case 0:return Ya.stop(),$b.next=3,this.copyToClipBoard();case 3:case "end":return $b.stop()}},gb,this)}));return function(Ya){return E.apply(this,
arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},styleClasses:{defaultValue:["far","fa-clone"]}}}}],ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:36582,end:41478})})(Ta.HaloItem);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),mb=ra.hasOwnProperty("OriginHaloItem")&&"function"===typeof ra.OriginHaloItem?ra.OriginHaloItem:ra.OriginHaloItem=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"fill",get:function(){return Ta.Color.white.interpolate(.2,this.borderColorTop)}},
{key:"extent",get:function(){return Ta.pt(15,15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=
this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(E){var R=this.halo,Ya=R.target.origin,gb=R.target.worldPoint(Ya);E=R.target.localize(gb.addPt(E)).subPt(R.target.scroll).subPt(Ya);R.target.adjustOrigin(R.target.origin.addPt(E))}},{key:"onDragStart",value:function(E){this.init()}},{key:"onDragEnd",value:function(E){this.stop()}},{key:"onDrag",value:function(E){this.update(E.state.dragDelta)}}],
[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?Ta.componentAccent:Ta.haloBlue}}}}}],ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:41480,end:43233})})(Ta.HaloItem);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),mb=ra.hasOwnProperty("ResizeHandle")&&"function"===typeof ra.ResizeHandle?ra.ResizeHandle:ra.ResizeHandle=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(mb,ha,[{key:"valueForPropertyDisplay",value:function(){var E=this.halo.target.extent,R=E.y;return"".concat(E.x.toFixed(1),"x").concat(R.toFixed(1))}},{key:"positionInHalo",value:function(){var E=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(Ta.Rectangle.prototype.sides.includes(this.location)&&(this.visible=!1),E=E.insetBy(-4));return E.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(E){this.halo.state.activeButton===
this&&this.halo.toggleDiagonal(E.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(E){this.halo.state.activeButton===this&&this.halo.toggleDiagonal(E.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(E){this.init(E.position,E.isShiftDown())}},{key:"onDragEnd",value:function(E){this.stop(E.isShiftDown())}},{key:"onDrag",value:function(E){this.update(E.position,E.isShiftDown(),E.isAltDown(),E.isCtrlDown());this.focus()}},{key:"init",value:function(E){var R=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:!1,Ya=this.halo.target,gb=Ya.origin,$b=Ya.position;Ya=Ya.extent;this.startPos=E;this.startBounds=$b.subPt(gb).extent(Ya);this.startOrigin=this.halo.target.origin;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();gb=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=Ta.num.toRadians(gb%45);this.halo.toggleDiagonal(R,this.corner)}},{key:"update",value:function(E){var R=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:!1,Ya=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,gb=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,$b=this.corner,Sc=this.tfm,Ic=this.startPos.subPt(E);Sc=Sc.transformDirection(Ta.pt(Ic.x,Ic.y));Ya&&(Sc=Sc.griddedBy(Ta.pt(10,10)));this.halo.updateBoundsFor($b,R,Sc,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(R,$b);this.updateAlignmentGuide(Ya);R=[];$b=$b.toLowerCase();$b.includes("left")&&R.push("left");$b.includes("top")&&R.push("top");$b.includes("bottom")&&
R.push("bottom");$b.includes("right")&&R.push("right");Ta.showAndSnapToResizeGuides(this.halo.target,R,!0,gb,5,200)}},{key:"stop",value:function(E){E=this.halo;E.state.activeButton=null;E.alignWithTarget();E.toggleDiagonal(!1);this.updateAlignmentGuide(!1);Ta.removeSnapToGuidesOf(E.target)}},{key:"updateAlignmentGuide",value:function(E){var R=this.halo.getSubmorphNamed("mesh");if(E)return E=this.halo.target.extent,E=Ta.pt(E.x%10,E.y%10),R=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),
E),this.focus(),R;R&&R.remove()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(E){0<E&&(E-=360);E=-8-(E/45).toFixed();0===E&&(E=8);return Ta.arr.zip(Ta.arr.rotate([["topLeft",function(R){return R.negated()}],["topCenter",function(R){return R.withX(0).negated()}],["topRight",function(R){return R.withX(0).negated()}],
["rightCenter",function(R){return Ta.pt(0,0)}],["bottomRight",function(R){return Ta.pt(0,0)}],["bottomCenter",function(R){return Ta.pt(0,0)}],["bottomLeft",function(R){return R.withY(0).negated()}],["leftCenter",function(R){return R.withY(0).negated()}]],E),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize","rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",
value:function(E){var R=this;if(!E.target)return[];var Ya=E.target.getGlobalTransform().getRotation();return Ta.arr.compact(this.getResizeParts(Ya).map(function(gb){var $b=ic(gb,2),Sc=ic($b[0],3);gb=Sc[0];Sc[1];Sc[2];$b=ic($b[1],2);return R["for"](E,gb,$b[1],$b[0])})).map(function(gb){return gb.alignInHalo()})}},{key:"for",value:function(E,R,Ya,gb){var $b="Resize "+R;$b=E.getSubmorphNamed($b)||new this({name:$b,halo:E,corner:R,tooltip:"Resize "+Ta.string.decamelize(R.replace("Center","")),extent:Ta.pt(10,
10),borderWidth:1,borderRadius:0,borderColor:E.target.isComponent?Ta.componentAccent:Ta.haloBlue,fill:Ta.Color.white});if("topCenter"===R||"bottomCenter"===R)$b.width=E.borderBox.width-10,$b.opacity=0;if("rightCenter"===R||"leftCenter"===R)$b.height=E.borderBox.height-10,$b.opacity=0;return Object.assign($b,{nativeCursor:gb,location:Ya})}}],ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:43293,end:48912})})(Ta.HaloItem);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),mb=ra.hasOwnProperty("MenuHaloItem")&&"function"===typeof ra.MenuHaloItem?ra.MenuHaloItem:ra.MenuHaloItem=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"onMouseDown",value:function(){var E=
Ed(regeneratorRuntime.mark(function gb(Ya){var $b,Sc;return regeneratorRuntime.wrap(function(Ic){for(;;)switch(Ic.prev=Ic.next){case 0:return $b=this.halo.target,this.halo.remove(),Ic.next=4,$b.menuItems(Ya);case 4:Sc=Ic.sent,$b.world().openMenu(Sc).hasFixedPosition=this.halo.hasFixedPosition;case 6:case "end":return Ic.stop()}},gb,this)}));return function(Ya){return E.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},
{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:48914,end:49485})})(Ta.HaloItem);var Be=bd("b",function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
mb=ra.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof ra.InteractiveMorphSelector?ra.InteractiveMorphSelector:ra.InteractiveMorphSelector=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var E=0<arguments.length&&void 0!==arguments[0]?arguments[0]:$world,R=2<arguments.length?arguments[2]:void 0;this.controllingMorph=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=E;this.filterFn=R;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var E=Ta.promise.deferred();E.promise.resolve=E.resolve;this.whenDone=E.promise;this.selectorMorph=Ta.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();Ta.connect(this.world.firstHand,"position",this,"scanForTargetAt");Ta.once(this.selectorMorph,
"onMouseUp",this,"selectTarget");Ta.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var E=this.world.firstHand.globalPosition;this.selectorMorph.center=E;this.selectorMorph.focus();var R=this.selectorMorph.morphBeneath(E),Ya,gb=this.possibleTarget,$b=this.controllingMorph,Sc=this.filterFn,Ic=this.world,Pd=this.morphHighlighter;for(Pd===R?R=Pd.morphBeneath(E):R&&R.isEpiMorph&&
(R=R.morphBeneath(E));R&&(Ya=[R].concat(Wb(R.ownerChain())).find(function(Zd){return!Zd.visible}));)R=Ya=Ya.morphBeneath(E);if(R&&Sc&&!Sc(R))for(;R&&![R].concat(Wb(R.ownerChain())).find(Sc);)R=R.morphBeneath(E);!R||R===gb||$b&&R.ownerChain().includes($b.getWindow())||(Pd&&Pd.deactivate(),(this.possibleTarget=gb=R)&&!gb.isWorld&&(E=this.morphHighlighter=Ta.MorphHighlighter["for"](Ic,R))&&E.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",
value:function(){Ta.MorphHighlighter.removeHighlighters(this.world);Ta.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InteractiveMorphSelector"}},{key:"selectMorph",value:function(E,R,Ya){E=new this(E,R,Ya);E.selectNewTarget();return E.whenDone}}],ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:49494,end:52293})}(void 0));Ta.InteractiveMorphSelector=Be;Ta.InteractiveMorphSelector=Be;var cb=bd("H",function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),mb=ra.hasOwnProperty("Halo")&&"function"===typeof ra.Halo?ra.Halo:ra.Halo=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(mb,ha,[{key:"relayout",value:function(){this.alignWithTarget()}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(E){E.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var E=this;setTimeout(function(){E.target.owner||E.remove()})}},{key:"initLayout",
value:function(){var E=this.layout=new Ta.GridLayout({autoAssign:!1,fitToCell:!1,renderViaCSS:!0,columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],
[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name","name","name","name","name",null]]});E.col(1).row(7).group.align="topCenter";E.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=[].concat(Wb(this.ensureResizeHandles()),Wb(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},
{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||this.addMorphBack(Ta.morph({name:"border-box",halosEnabled:!1,reactsToPointer:!1,fill:Ta.Color.transparent,borderColor:this.target.isComponent?Ta.componentAccent:Ta.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(E){this.state||
(this.state={});this.state.pointerId=E}},{key:"prepareTarget",value:function(E){if(!Ta.obj.isArray(E))return E;if(1>=E.length)return E[0];E=E[0].world().addMorph(new Ta.MultiSelectionTarget({selectedMorphs:E}));E.alignWithSelection();E.modifiesSelectedMorphs=!0;return E}},{key:"refocus",value:function(E){this.target=E;this.alignWithTarget()}},{key:"alignWithTarget",value:function(E){var R=this;if((!E||["extent","position","scale","rotation"].includes(E.prop))&&!this.active&&this.target){E=this.target.world()||
$world;var Ya=this.maskBounds,gb=this.target.globalBounds(),$b=gb.insetBy(-36).intersection(Ya);Ya=gb.intersection(Ya);this.setBounds($b.translatedBy(E.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,Ya));this.resizeOnly||this.originHalo().alignInHalo();this.nameHalo().alignInHalo();this.state.activeButton?(this.buttonControls.forEach(function(Sc){return Sc.visible=!1}),this.ensureResizeHandles().forEach(function(Sc){return Sc.visible=!1}),this.state.activeButton.visible=
!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(Sc){return Sc.visible=!0}),this.buttonControls.filter(function(Sc){return R.activeItems.includes("*")?!0:R.activeItems.includes(Sc.name)}).forEach(function(Sc){Sc.visible=!0}),this.propertyDisplay.disable());this.ensureResizeHandles().forEach(function(Sc){return Sc.alignInHalo()});return this}}},{key:"detachFromTarget",value:function(){var E=this.target;
E&&(Ta.disconnect(E,"onChange",this,"alignWithTarget"),Ta.disconnect(E,"onOwnerChanged",this,"removeIfDetached"),E instanceof Ta.MultiSelectionTarget?(E.modifiesSelectedMorphs=!1,E.remove()):"function"===typeof E.detachedHalo&&E.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();uc._get(Object.getPrototypeOf(mb.prototype),"remove",this).call(this)}},{key:"propertyDisplay",get:function(){return Ta.HaloPropertyDisplay["for"](this)}},{key:"nameHalo",value:function(){return Ta.NameHaloItem["for"](this)}},
{key:"closeHalo",value:function(){return Ta.CloseHaloItem["for"](this)}},{key:"grabHalo",value:function(){return Ta.GrabHaloItem["for"](this)}},{key:"dragHalo",value:function(){return Ta.DragHaloItem["for"](this)}},{key:"menuHalo",value:function(){return Ta.MenuHaloItem["for"](this)}},{key:"inspectHalo",value:function(){return Ta.InspectHaloItem["for"](this)}},{key:"editHalo",value:function(){return Ta.EditHaloItem["for"](this)}},{key:"rotateHalo",value:function(){return Ta.RotateHaloItem["for"](this)}},
{key:"copyHalo",value:function(){return Ta.CopyHaloItem["for"](this)}},{key:"originHalo",value:function(){return Ta.OriginHaloItem["for"](this)}},{key:"componentHalo",value:function(){return Ta.ComponentHaloItem["for"](this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(E){return E.isHaloItem&&!E.isResizeHandle})}},{key:"addMorphToSelection",value:function(){var E=Ed(regeneratorRuntime.mark(function gb(Ya){var $b,Sc;return regeneratorRuntime.wrap(function(Ic){for(;;)switch(Ic.prev=
Ic.next){case 0:$b=this.world();Sc=this.target.isMorphSelection?this.target.selectedMorphs:[this.target];if(!Sc.includes(Ya)){Ic.next=4;break}return Ic.abrupt("return");case 4:return this.remove(),Ic.next=7,$b.showHaloForSelection([].concat(Wb(Sc),[Ya]),this.state.pointerId);case 7:return Ic.abrupt("return",Ic.sent);case 8:case "end":return Ic.stop()}},gb,this)}));return function(Ya){return E.apply(this,arguments)}}()},{key:"removeMorphFromSelection",value:function(){var E=Ed(regeneratorRuntime.mark(function gb(Ya){var $b;
return regeneratorRuntime.wrap(function(Sc){for(;;)switch(Sc.prev=Sc.next){case 0:$b=this.world();this.remove();if(!this.target.isMorphSelection){Sc.next=7;break}Ta.arr.remove(this.target.selectedMorphs,Ya);Sc.next=6;return $b.showHaloForSelection(this.target.selectedMorphs,this.state.pointerId);case 6:return Sc.abrupt("return",Sc.sent);case 7:case "end":return Sc.stop()}},gb,this)}));return function(Ya){return E.apply(this,arguments)}}()},{key:"isAlreadySelected",value:function(E){return this.target===
E||this.target.isMorphSelection&&this.target.selectsMorph(E)}},{key:"updateBoundsFor",value:function(E,R,Ya,gb,$b){var Sc={topLeft:Ta.rect(-1,-1,1,1),topCenter:R?Ta.rect(1,-1,0,1):Ta.rect(0,-1,0,1),topRight:Ta.rect(0,-1,1,1),rightCenter:R?Ta.rect(0,1,1,1):Ta.rect(0,0,1,0),bottomRight:Ta.rect(0,0,1,1),bottomCenter:R?Ta.rect(1,0,0,1):Ta.rect(0,0,0,1),bottomLeft:Ta.rect(-1,0,1,1),leftCenter:R?Ta.rect(-1,1,1,0):Ta.rect(-1,0,1,0)}[E];$b=Sc.x;var Ic=Sc.y,Pd=Sc.width;Sc=Sc.height;Ya=R?this.proportionalDelta(E,
Ya,gb):Ya;E=Ta.rect(Ya.x*$b,Ya.y*Ic,Ya.x*Pd,Ya.y*Sc);this.active=!0;this.targetIsPositionedByLayout?this.target.extent=gb.insetByRect(E).extent():(this.target.setBounds(gb.insetByRect(E)),(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated()));this.active=!1;this.alignWithTarget();this.world().withTopBarDo(function(Zd){if(Zd.activeSideBars.includes("Styling Palette"))Zd.stylingPalette.onHierarchyChange()})}},{key:"proportionalDelta",value:function(E,R,Ya){var gb=
Ya.width,$b=Ya.height;Ya={topLeft:Ta.pt(-1,-1),topCenter:Ta.pt(0,-1),topRight:Ta.pt(1,-1),leftCenter:Ta.pt(-1,0),rightCenter:Ta.pt(1,0),bottomLeft:Ta.pt(-1,1),bottomCenter:Ta.pt(0,1),bottomRight:Ta.pt(1,1)};var Sc=gb/Math.max(gb,$b),Ic=$b/Math.max($b,gb);gb={topLeft:Ta.pt(-Sc,-Ic),topCenter:Ta.pt(1/(2*$b/gb),-1),topRight:Ta.pt(Sc,-Ic),leftCenter:Ta.pt(-1,$b/(2*gb)),rightCenter:Ta.pt(1,$b/(3*gb)),bottomLeft:Ta.pt(-Sc,Ic),bottomCenter:Ta.pt(1/(2*$b/gb),1),bottomRight:Ta.pt(Sc,Ic)};Ya=Ya[E];return gb[E].scaleBy(Ya.dotProduct(R)/
Ya.dotProduct(Ya))}},{key:"ensureResizeHandles",value:function(){return Ta.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(E){E=E.valueForPropertyDisplay();"undefined"!==typeof E?this.propertyDisplay.displayProperty(E):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(E,R){if(!Ta.rect(0).sides.includes(R)){var Ya=this.getSubmorphNamed("diagonal");if(E){E=this.target.globalBounds();var gb=E.width,$b=E.height;E=this.localize(Ta.pt(E.x,E.y)).extent(Ta.pt(gb,
$b)).scaleRectTo(this.innerBounds());gb={topLeft:[Ta.pt(gb,$b),Ta.pt(0,0)],topRight:[Ta.pt(0,$b),Ta.pt(gb,0)],bottomRight:[Ta.pt(0,0),Ta.pt(gb,$b)],bottomLeft:[Ta.pt(gb,0),Ta.pt(0,$b)]};Ya?Ya.setBounds(E):(Ya=ic(gb[R],2),R=Ya[0],Ya=Ya[1],gb=new Ta.LinearGradient({stops:[{offset:0,color:Ta.Color.orange.withA(0)},{offset:.2,color:Ta.Color.orange},{offset:.8,color:Ta.Color.orange},{offset:1,color:Ta.Color.orange.withA(0)}]}),Ya=this.addMorphBack(new Ta.Path({opacity:0,name:"diagonal",borderStyle:"dotted",
borderWidth:5,bounds:E,borderColor:gb,vertices:[R,Ya]})),Ya.setBounds(E),Ya.animate({opacity:1,duration:500}))}else Ya&&Ya.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(E,R){var Ya=this.getSubmorphNamed("rotationIndicator");E&&R?(E=this.getSubmorphNamed("origin").center,Ya=Ya||this.addMorphBack(new Ta.Path({name:"rotationIndicator",borderColor:Ta.haloBlue,borderWidth:1,vertices:[]})),Ya.setBounds(R.bounds().union(this.innerBounds())),Ya.vertices=[Ya.localizePointFrom(E,this),Ya.localizePointFrom(R.center,
this)]):Ya&&Ya.remove()}},{key:"toggleMorphHighlighter",value:function(E,R){var Ya=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;if(R)if(R.onHaloGrabover)R.onHaloGrabover(E);else Ya=Ta.MorphHighlighter["for"](this,R,Ya),E&&R&&R!==this.world()?Ya&&Ya.show(R):Ya&&Ya.deactivate()}},{key:"temporaryEditTextMorph",value:function(E){if(this.target.isText){var R=this.target.readOnly;this.target.readOnly=!1;this.target.focus();this.target.cursorPosition=this.target.textPositionFromPoint(E.positionIn(this.target));
var Ya=this.world(),gb=this.target,$b=this.topBar,Sc=function Zd(Pd){$b.stylingPalette&&$b.stylingPalette.fullContainsWorldPoint(Ya.firstHand.position)?(gb.whenRendered().then(function(){Ta.once(gb,"onBlur",Zd)}),Ta.once(gb,"onBlur",Zd)):($b.setEditMode("Halo",!0),gb.readOnly=R,gb.collapseSelection(),$b.showHaloFor(gb))};this.target.whenRendered().then(function(){Ta.once(gb,"onBlur",Sc)});$b.setEditMode("Hand",!0);this.remove()}}},{key:"onDragStart",value:function(E){this.dragHalo().init();this._lastDragPos=
E.startPosition}},{key:"onDrag",value:function(E){this.world()&&(this.dragHalo().update(E.state.dragDelta),this.dragHalo().visible=!1)}},{key:"onDragEnd",value:function(E){this.dragHalo().stop();this.dragHalo().visible=!0}},{key:"customDrag",value:function(E){this.world()&&(this.dragHalo().update(E.position.subPt(this._lastDragPos)),this.dragHalo().visible=!1,this._lastDragPos=E.position)}},{key:"onMouseDown",value:function(E){var R=E.state.clickedOnMorph;if(!E.isCommandKey()&&R===this.borderBox&&
2===E.state.clickCount&&this.target.isText)this.temporaryEditTextMorph(E);else if(E.isShiftDown()&&E.isCommandKey())E=this.target.isMorphSelection?this.target.morphBeneath(E.position):this.morphBeneath(E.position),this.isAlreadySelected(E)?this.removeMorphFromSelection(E):this.addMorphToSelection(E);else{if(R===this&&E.isCommandKey()){var Ya=E.world.morphsContainingPoint(E.position).filter(function(gb){return gb.halosEnabled});(Ya=Ya.slice(Ya.indexOf(this.target)+1)[0]||Ya[0]||E.world)&&E.world.showHaloFor(Ya,
E.domEvt.pointerId);this.remove()}if(R===this&&this.target.isWorld||(R===this||R&&!R.isHaloItem&&!this.nameHalo().nameHolders.includes(R.owner))&&![this.target].concat(Wb(this.target.ownerChain())).includes(this.morphBeneath(E.position)))return this.remove();this.target.onHaloMouseDown(E)}}},{key:"onContextMenu",value:function(E){var R=this;E.stop();Promise.resolve($world.defaultMenuItems(this.target)).then(function(Ya){return R.target.openMenu(Ya,E)})["catch"](function(Ya){return $world.logError(Ya)})}},
{key:"onKeyUp",value:function(E){this.changingName||this.buttonControls.map(function(R){return R.onKeyUp(E)})}},{key:"indicateLooseMovement",value:function(E){this.borderBox.borderStyle=E?"dotted":"solid"}},{key:"getMesh",value:function(E){var R=E.x,Ya=E.y,gb=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ta.pt(0,0),$b=this.world().visibleBounds(),Sc=$b.height;$b=$b.width;var Ic={borderStyle:"dotted",borderWidth:2,borderColor:Ta.Color.orange};Ic=this.get("mesh")||this.addMorph(new Ta.Morph({name:"mesh",
styleClasses:["halo-mesh"],extent:Ta.pt($b,Sc),fill:null,submorphs:[new Ta.Path(Object.assign({name:"vertical"},Ic)),new Ta.Path(Object.assign({name:"horizontal"},Ic))]}));Ic.globalPosition=gb;Ic.getSubmorphNamed("vertical").vertices=[Ta.pt(R,0).subPt(gb),Ta.pt(R,Sc).subPt(gb)];Ic.getSubmorphNamed("horizontal").vertices=[Ta.pt(0,Ya).subPt(gb),Ta.pt($b,Ya).subPt(gb)];return Ic}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:Ta.Color.transparent},
resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},acceptsDrops:{defaultValue:!1},draggable:{defaultValue:!0},maskBounds:{initialize:function(){this.maskBounds=$world.visibleBounds()},set:function(E){this.setProperty("maskBounds",E);this.relayout()}},activeItems:{derived:!0,defaultValue:["*"],set:function(E){this.setProperty("activeItems",E);this.buttonControls.forEach(function(R){return R.visible=E.includes(R.name)})}},submorphs:{after:["target"],
initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,get:function(){return 40>this.target.bounds().extent().dist(Ta.pt(0))}},topBar:{serialize:!1,get:function(){return this.getProperty("topBar")||this.get("lively top bar")}},targetIsPositionedByLayout:{derived:!0,get:function(){return this.target.isLayoutable&&Ta.PropertyPath("target.owner.layout.renderViaCSS").get(this)}},target:{get:function(){return this.state?
this.state.target:null},set:function(E){this.state||(this.state={});var R=!!this.state.target;this.detachFromTarget();E=this.prepareTarget(E);this.state.target=E;R&&this.alignWithTarget();Ta.connect(E,"onChange",this,"alignWithTarget");Ta.connect(E,"onOwnerChanged",this,"removeIfDetached")}}}}}],ra,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:52500,end:71987})}(Ta.Morph));Ta["default"]=cb;var Yb=window.lively.FreezerRuntime.recorderFor("lively.halos/layout.js");Yb.Ellipse=ka;Yb.Icon=kc;Yb.Morph=Gb;Yb.Path=Db;Yb.Text=ab;Yb.HorizontalLayout=fa;Yb.VerticalLayout=va;Yb.morph=qb;Yb.Color=fe;Yb.pt=Od;Yb.rect=pb;Yb.Rectangle=db;Yb.arr=Rc;Yb.connect=Ne;Yb.disconnect=Ib;Yb.LabeledCheckBox=Rb;Yb.DropDownSelector=yc;Yb.Button=ba;Yb.Menu=id;Yb.NumberWidget=Id;Yb.InteractiveMorphSelector=Be;Yb.easings=Xa;(function(ha){var ra=
window.lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),mb=ra.hasOwnProperty("ProportionSlider")&&"function"===typeof ra.ProportionSlider?ra.ProportionSlider:ra.ProportionSlider=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"alignWithTarget",value:function(){this.setBounds(this.axis.getProportionSliderBounds(this))}},{key:"onDragStart",value:function(){this.view.visible=
!0}},{key:"onDrag",value:function(E){this.axis.adjustStretch(this.axis.getDelta(E));this.axis.halo.alignWithTarget()}},{key:"onDragEnd",value:function(){this.view.visible=!1}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ProportionSlider"}},{key:"properties",get:function(){return{axis:{},view:{},fill:{defaultValue:Yb.Color.transparent}}}}],ra,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:630,end:1125})})(Yb.Morph);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),mb=ra.hasOwnProperty("MinViewer")&&"function"===typeof ra.MinViewer?ra.MinViewer:ra.MinViewer=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"alignWithTarget",value:function(){this.textString=
"min: ".concat(this.axis.targetAxis.min.toFixed(),"px !")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MinViewer"}},{key:"properties",get:function(){return{axis:{}}}}],ra,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:1127,end:1358})})(Yb.Morph);(function(ha){var ra=
window.lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),mb=ra.hasOwnProperty("MinSlider")&&"function"===typeof ra.MinSlider?ra.MinSlider:ra.MinSlider=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"alignWithTarget",value:function(){this.position=this.axis.getMinSliderPosition()}},{key:"requestToShow",value:function(){this.visible=!this.axis.targetAxis.fixed}},{key:"requestToHide",
value:function(){this.active?this.shouldHide=!0:this.visible=!1}},{key:"onDragStart",value:function(){var E=ic(this.submorphs,2),R=E[0];E=E[1];this.axis.forceMenuHidden=!0;R.visible=!0;this.active=E.visible=!0}},{key:"onDrag",value:function(E){this.axis.targetAxis.min+=-this.getDelta(E);this.axis.halo.alignWithTarget()}},{key:"onDragEnd",value:function(){var E=ic(this.submorphs,2),R=E[0];E=E[1];this.axis.forceMenuHidden=!1;R.visible=!1;this.active=E.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=
!1)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MinSlider"}},{key:"properties",get:function(){return{axis:{},fill:{defaultValue:Yb.Color.green},visible:{defaultValue:!1},becomesActiveOnHover:{defaultValue:!0}}}}],ra,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:1360,
end:2554})})(Yb.Ellipse);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),mb=ra.hasOwnProperty("AxisHalo")&&"function"===typeof ra.AxisHalo?ra.AxisHalo:ra.AxisHalo=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"initialize",value:function(){this.setBounds(this.fetchBounds());var E=this.minSlider(),R=this.axisMenu(),Ya=this.proportionSlider();
Ya.addMorph(E);this.submorphs=[Ya,R];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(E){this._forceMenuHidden=E;this.axisMenu.visible=!E}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();
this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(E){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var E=this.proportionViewer();return this.halo.addGuide(new Yb.ProportionSlider({nativeCursor:this.getResizeCursor(),axis:this,view:E,submorphs:[this.devider(),E]}))}},{key:"devider",value:function(){return new Yb.Morph({visible:!this.lastAxis,
fill:Yb.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var E=this.minSpaceVisualizer(),R=this.minViewer();return this.halo.addGuide(new Yb.MinSlider({nativeCursor:this.getResizeCursor(),axis:this,submorphs:[E,R]}))}},{key:"minViewer",value:function(){return this.viewer(new Yb.MinViewer({axis:this,position:this.getMinViewerPosition()}))}},{key:"minSpaceBorder",value:function(){return new Yb.Path(Object.assign({position:Yb.pt(-1,
-1),borderStyle:"dashed",borderColor:Yb.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var E=this,R=this.minSpaceBorder();return this.halo.addGuide(new Yb.Morph({fill:Yb.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[R],alignWithTarget:function(){this.extent=E.getMinSpaceExtent();this.topLeft=Yb.pt(5,5)}}))}},{key:"axisMenu",value:function(){var E=this.lockButton(),R=this.menuButton(),Ya=this;return new Yb.Morph({layout:this.getMenuLayout(),
submorphs:[E,R],fill:Yb.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt(Ya.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var E=this;return this.halo.addGuide(new Yb.Morph({fill:Yb.Color.transparent,extent:Yb.pt(25,25),submorphs:[{center:Yb.pt(12.5,12.5),fill:Yb.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){E.targetAxis.fixed?(this.fontColor=Yb.Color.red,this.submorphs[0].styleClasses=
["fa","fa-lock"]):(this.fontColor=Yb.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){E.targetAxis.fixed=!E.targetAxis.fixed;E.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var E=this,R=this;return new Yb.Morph({fill:Yb.Color.transparent,extent:Yb.pt(25,25),submorphs:[{fill:Yb.Color.transparent,styleClasses:["fa","fa-cog"],center:Yb.pt(12.5,12.5)}],onMouseDown:function(Ya){R.forceMenuVisible=!0;this.addMorph(Ya.state.menu=
new Yb.Menu({position:Yb.pt(15,15),items:[["Remove ".concat(R.subject),function(){E.targetAxis.remove();E.halo.initGuides();E.halo.alignWithTarget()}],["Insert ".concat(R.subject," before"),function(){E.targetAxis.addBefore();E.halo.initGuides();E.halo.alignWithTarget()}],["Insert ".concat(R.subject," after"),function(){E.targetAxis.addAfter();E.halo.initGuides();E.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(E){var R=E.position;E=E.alignWithTarget;return this.halo.addGuide(new Yb.Text({styleClasses:["Halo"],
padding:Yb.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:Yb.Color.white,fill:Yb.Color.black.withA(.5),position:R,alignWithTarget:E,readOnly:!0}))}},{key:"proportionViewer",value:function(){var E=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString="".concat(E.targetAxis.length.toFixed(1),"px")}})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"AxisHalo"}},{key:"properties",get:function(){return{halo:{},targetAxis:{},
container:{},fill:{defaultValue:Yb.Color.transparent},submorphs:{initialize:function(){this.initialize()}}}}}],ra,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2556,end:8490})})(Yb.Morph);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),mb=ra.hasOwnProperty("RowHalo")&&
"function"===typeof ra.RowHalo?ra.RowHalo:ra.RowHalo=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(E){this.targetAxis.height+=E}},{key:"getDelta",value:function(E){return E.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return Yb.pt(-45,
this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return Yb.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(E){return this.targetAxis.length>E.height?Yb.pt(2,5):Yb.pt(26,10)}},{key:"getMenuLayout",value:function(){return new Yb.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return Yb.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return Yb.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",
value:function(){return Yb.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:Yb.pt(this.container.width+50,2),vertices:[Yb.pt(0,1),Yb.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return Yb.pt(40,20)}},{key:"getProportionSliderBounds",value:function(E){return Yb.pt(0,E.owner.height-5).extent(Yb.pt(40,10))}},{key:"getDeviderBounds",value:function(){return Yb.pt(15,4).extent(Yb.pt(25,2))}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"RowHalo"}},{key:"properties",get:function(){return{row:{},targetAxis:{derived:!0,get:function(){return this.halo.target.row(this.row)}}}}}],ra,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:8492,end:9919})})(Yb.AxisHalo);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
mb=ra.hasOwnProperty("ColumnHalo")&&"function"===typeof ra.ColumnHalo?ra.ColumnHalo:ra.ColumnHalo=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:Symbol["for"]("lively-instance-initialize"),value:function(E){var R=E.col;E=E.halo;uc._get(Object.getPrototypeOf(mb.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,{targetAxis:E.target.col(R),halo:E})}},{key:"subject",
get:function(){return"column"}},{key:"adjustStretch",value:function(E){this.targetAxis.width+=E}},{key:"getDelta",value:function(E){return E.state.dragDelta.x}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return Yb.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return Yb.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(E){return this.targetAxis.length>E.width?Yb.pt(5,3):Yb.pt(8,26)}},
{key:"getMenuLayout",value:function(){return new Yb.HorizontalLayout}},{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return Yb.pt(20,50)}},{key:"getMinSliderPosition",value:function(){return Yb.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return Yb.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:Yb.pt(2,this.container.height+50),vertices:[Yb.pt(1,0),Yb.pt(1,
this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return Yb.pt(20,40)}},{key:"getProportionSliderBounds",value:function(E){return Yb.pt(E.owner.width-5,0).extent(Yb.pt(10,40))}},{key:"getDeviderBounds",value:function(){return Yb.pt(4,15).extent(Yb.pt(2,25))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ColumnHalo"}}],ra,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:9921,end:11276})})(Yb.AxisHalo);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),mb=ra.hasOwnProperty("CellGuide")&&"function"===typeof ra.CellGuide?ra.CellGuide:ra.CellGuide=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"menuItems",value:function(){var E=this,R=Yb.Icon.textAttribute("check-square-o"),
Ya=Yb.Icon.textAttribute("square-o");R[1].textStyleClasses.push("annotation");Ya[1].textStyleClasses.push("annotation");Ya[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",null].concat(Wb(this.cellGroup.resize?Ya:R)),function(){E.cellGroup.resize=!1}],[["Space Filling  ",null].concat(Wb(this.cellGroup.resize?R:Ya)),function(){E.cellGroup.resize=!0}]]],["Align at...",["center"].concat(Wb((new Yb.Rectangle).sides),Wb((new Yb.Rectangle).corners)).map(function(gb){return[[gb,{paddingRight:"2px"}].concat(Wb(E.cellGroup.align===
gb?R:Ya),["  ",null]),function(){return E.cellGroup.align=gb}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var gb=E.cellGroup.morph;gb&&(E.world().firstHand.grab(gb),E.world().firstHand.longClickGrab=!0,gb.position=Yb.pt(0))}]]:[])}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],ra,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11278,end:12478})})(Yb.Morph);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),mb=ra.hasOwnProperty("LayoutHalo")&&"function"===typeof ra.LayoutHalo?ra.LayoutHalo:ra.LayoutHalo=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};
return uc(mb,ha,void 0,[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LayoutHalo"}},{key:"properties",get:function(){return{container:{},target:{get:function(){return this.container.layout}},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:Yb.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],ra,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12480,end:13052})})(Yb.Morph);var de=bd("G",function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),mb=ra.hasOwnProperty("GridLayoutHalo")&&"function"===typeof ra.GridLayoutHalo?ra.GridLayoutHalo:ra.GridLayoutHalo=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(mb,ha,[{key:"previewDrop",value:function(E){1>E.length||(E=this.cellGuides.find(function(R){return R.fullContainsWorldPoint($world.firstHand.position)}),E!==this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=E)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(E){var R=this;this.currentCell&&E.whenRendered().then(function(){return R.currentCell.cellGroup.morph=E})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();
this.focus()}},{key:"optionControls",value:function(){var E=this.target,R=new Yb.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:Yb.Color.transparent,checked:E.compensateOrigin}),Ya=new Yb.LabeledCheckBox({label:"Resize Submorphs",fill:Yb.Color.transparent,name:"fitToCell",checked:E.fitToCell});Yb.connect(R,"checked",E,"compensateOrigin");Yb.connect(Ya,"checked",E,"fitToCell");Yb.connect(R,"checked",this,"alignWithTarget");return[R,Ya]}},{key:"isLayoutHalo",get:function(){return!1}},
{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=this.container.extent;this.addMissingGuides();this.guides.reverse().forEach(function(E){return E.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var E=this;Yb.arr.withoutAll(this.target.cellGroups,this.guides.map(function(R){return R.cellGroup})).forEach(function(R){return E.addMorph(E.cellGuide(R))})}},
{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var E=this,R=this.addMorph({fill:Yb.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(Ya){R.addMorph(E.cellGuide(Ya))});this.cellGuides=R.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(E){E.isHaloItem=!0;this.guides.push(E);return E}},{key:"initRowGuides",
value:function(){var E=this,R=this;this.addGuide(this.addMorph(new Yb.Morph({width:25,fill:Yb.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:Yb.pt(-5,0),alignWithTarget:function(){this.height=R.container.height}})));Yb.arr.range(0,this.target.rowCount-1).forEach(function(Ya){E.addMorph(new Yb.RowHalo({row:Ya,halo:E}))})}},{key:"initColumnGuides",value:function(){var E=this,R=this;this.addGuide(this.addMorph(new Yb.Morph({height:25,fill:Yb.Color.gray.withA(.7),borderRadius:15,
width:this.container.width,bottomLeft:Yb.pt(0,-5),alignWithTarget:function(){this.width=R.container.width}})));Yb.arr.range(0,this.target.columnCount-1).forEach(function(Ya){E.addMorph(new Yb.ColumnHalo({col:Ya,halo:E}))})}},{key:"resizer",value:function(){var E=this;return this.addGuide(new Yb.Morph({fill:Yb.Color.transparent,extent:Yb.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(R){E.container.resizeBy(R.state.dragDelta);E.alignWithTarget()},alignWithTarget:function(){this.bottomRight=E.extent}}))}},
{key:"cellResizer",value:function(E,R){var Ya=this,gb="topLeft"===R?"bottomRight":"topLeft";return new Yb.Ellipse({borderWidth:1,visible:!1,borderColor:Yb.Color.black,nativeCursor:"nwse-resize",removeCell:function($b){E.disconnect($b);Ya.alignWithTarget()},addCell:function($b){E.connect($b);Ya.alignWithTarget()},start:function(){this.fixpointCell=E[gb];this.draggedDelta=E.bounds().partNamed(R);this.debugMorph=Ya.addMorph(new Yb.Morph({fill:Yb.Color.orange.withA(.5)}))},update:function($b){var Sc=
this;this.draggedDelta=this.draggedDelta.addPt($b);var Ic=Yb.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(Ic);Ya.cells.forEach(function(Pd){var Zd=Ic.intersection(Pd.bounds()).area()/Pd.bounds().area();E.includes(Pd)&&.1>Zd&&Sc.removeCell(Pd);!E.includes(Pd)&&Zd>1/3&&Sc.addCell(Pd)})},onDragEnd:function($b){this.debugMorph.remove()},onDragStart:function($b){this.start($b.position)},onDrag:function($b){this.update($b.state.dragDelta)}})}},{key:"cellGuide",
value:function(E){var R=this,Ya=this.cellResizer(E,"topLeft"),gb=this.cellResizer(E,"bottomRight");return this.addGuide(new Yb.CellGuide({cellGroup:E,bounds:E.bounds(),fill:Yb.Color.transparent,borderColor:Yb.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[Ya,gb],onMouseDown:function($b){this.becomeActive()},deactivate:function(){this.borderColor=Yb.Color.orange;this.fill=Yb.Color.transparent;this.submorphs.forEach(function($b){$b.visible=!1})},becomeActive:function(){R.guides.forEach(function($b){$b.isCell&&
$b.deactivate()});this.borderColor=Yb.Color.rgbHex("#1565C0");this.fill=Yb.Color.rgbHex("#1565C0").withA(.3);R.addMorph(this.remove());this.submorphs.forEach(function($b){$b.visible=!0})},startPreview:function($b){this.fill=Yb.Color.orange.withA(.7)},stopPreview:function($b){this.fill=Yb.Color.transparent},onDrop:function($b){var Sc=ic($b.hand.grabbedMorphs,1)[0];$b.hand.dropMorphsOn(R.container);E.morph=Sc},alignWithTarget:function(){E.bounds().isNonEmpty()?(this.setBounds(E.bounds()),Ya.center=
this.innerBounds().topLeft(),gb.center=this.innerBounds().bottomRight()):(Yb.arr.remove(R.guides,this),this.remove())}}))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Yb.Color.transparent},cells:{derived:!0,get:function(){return this.target.col(0).items.map(function(E){return E.row(0).items}).flat()}},submorphs:{after:["target"],initialize:function(){this.initialize()}}}}}],ra,{pathInPackage:function(){return"./layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:13061,end:20618})}(Yb.LayoutHalo));Yb.GridLayoutHalo=de;Yb.GridLayoutHalo=de;(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),mb=ra.hasOwnProperty("DropPreview")&&"function"===typeof ra.DropPreview?ra.DropPreview:ra.DropPreview=function(E){if(!E||
!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var E=Ed(regeneratorRuntime.mark(function Ya(){var gb;return regeneratorRuntime.wrap(function($b){for(;;)switch($b.prev=$b.next){case 0:return gb=Yb.easings.inOutQuad,$b.next=3,this.animate({opacity:.5,duration:(this.pulseDuration-10)/2,easing:gb});case 3:return $b.next=
5,this.animate({opacity:1,duration:(this.pulseDuration-10)/2,easing:gb});case 5:this.stopped||this.step();case 6:case "end":return $b.stop()}},Ya,this)}));return function(){return E.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:Yb.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},
borderColor:{defaultValue:Yb.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],ra,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:20620,end:21664})})(Yb.Morph);var P=function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
mb=ra.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof ra.TilingLayoutHalo?ra.TilingLayoutHalo:ra.TilingLayoutHalo=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"remove",value:function(){uc._get(Object.getPrototypeOf(mb.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},
{key:"handleDrop",value:function(E){}},{key:"removePreviews",value:function(){this.previews.forEach(function(E){return E.clear()})}},{key:"previewDrop",value:function(E){var R=this;0<this.previews.length||(this.previews=E.map(function(Ya){return R.container.addMorph({type:Yb.DropPreview,bounds:Ya.bounds()})}),this.previews.forEach(function(Ya){Ya.step()}))}},{key:"updateSpacing",value:function(E){this.target.spacing=E}},{key:"updateAxis",value:function(E){this.target.axis=E}},{key:"updateAlign",value:function(E){this.target.align=
E}},{key:"optionControls",value:function(){var E=this.target,R=new Yb.DropDownSelector({borderRadius:2,padding:3,selectedValue:E.axis,values:["row","column"]}),Ya=new Yb.DropDownSelector({borderRadius:2,padding:3,selectedValue:E.align,values:["left","center"]});E=new Yb.NumberWidget({min:0,number:E.spacing,padding:Yb.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:Yb.Color.gray,unit:"px"});Yb.connect(E,"update",this,"updateSpacing");Yb.connect(Ya,"update",this,"updateAlign");Yb.connect(R,"update",
this,"updateAxis");var gb={type:"label",padding:Yb.rect(0,5,5,5),fill:Yb.Color.transparent,fontColor:Yb.Color.gray.darker(),readOnly:!0};return[[Object.assign({},gb,{textString:"Submorph Spacing"}),E],[Object.assign({},gb,{textString:"Tiling Align"}),Ya],[Object.assign({},gb,{textString:"Tiling Axis"}),R]].map(function($b){return{submorphs:$b,fill:null,layout:new Yb.HorizontalLayout({spacing:3})}})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",
get:function(){return{fill:{defaultValue:Yb.Color.transparent},previews:{defaultValue:[]}}}}],ra,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21673,end:23839})}(Yb.LayoutHalo);Yb.TilingLayoutHalo=P;Yb.TilingLayoutHalo=P;P=bd("F",function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
mb=ra.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof ra.FlexLayoutHalo?ra.FlexLayoutHalo:ra.FlexLayoutHalo=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"handleDrop",value:function(E){}},{key:"previewDrop",value:function(E){var R=this;0<this.previews.length||(this.previews=E.map(function(Ya){return R.container.addMorph({type:Yb.DropPreview,position:R.container.localize(R.world().firstHand.position),
extent:Ya.bounds().extent()})}),this.previews.forEach(function(Ya){Ya.step()}))}},{key:"remove",value:function(){uc._get(Object.getPrototypeOf(mb.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(E){return E.clear()})}},{key:"onDrop",value:function(E){this.removePreviews();E.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",
value:function(E){E&&(this.originalExtent=this.container.extent);this.target.autoResize=E;E||(this.container.extent=this.originalExtent||this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(E){this.target.resizeSubmorphs=E;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(E){this.target.align=E}},{key:"updateDirectionPolicy",value:function(E){this.target.direction=E}},{key:"updateSpacing",value:function(E){this.target.spacing=E}},{key:"optionControls",
value:function(){var E=this.target,R=E.possibleAlignValues?{fill:Yb.Color.transparent,layout:new Yb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new Yb.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:E.align,values:E.possibleAlignValues})]}:null,Ya=E.possibleDirectionValues?{fill:Yb.Color.transparent,layout:new Yb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},
new Yb.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:E.direction,values:E.possibleDirectionValues})]}:null,gb=new Yb.NumberWidget({fill:Yb.Color.white,borderWidth:1,borderRadius:4,padding:Yb.rect(5,4,0,0),borderColor:Yb.Color.gray,min:0,number:E.spacing,unit:"px"}),$b=new Yb.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:Yb.Color.transparent,checked:E.autoResize});E=new Yb.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",
alignCheckBox:"right",fill:Yb.Color.transparent,checked:E.resizeSubmorphs});Yb.connect(gb,"update",this,"updateSpacing");Yb.connect($b,"checked",this,"updateAutoResizePolicy");Yb.connect(E,"checked",this,"updateResizeSubmorphsPolicy");R&&Yb.connect(R.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");Ya&&Yb.connect(Ya.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[$b,E].concat(Wb([R,Ya].filter(Boolean)),[{fill:Yb.Color.transparent,layout:new Yb.HorizontalLayout,submorphs:[{type:"label",
value:"Submorph Spacing",fontColor:Yb.Color.gray.darker(),padding:Yb.rect(0,5,5,5)},gb]}])}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Yb.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],ra,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:23847,end:27920})}(Yb.LayoutHalo));Yb.FlexLayoutHalo=P;Yb.FlexLayoutHalo=P;var pa=bd("P",function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),mb=ra.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof ra.ProportionalLayoutHalo?ra.ProportionalLayoutHalo:ra.ProportionalLayoutHalo=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(mb,ha,[{key:"handleDrop",value:function(E){}},{key:"onDrop",value:function(E){E.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",value:function(E){this.target.changeSettingsFor(E.submorph,vd({},E.axis,E.policy),!0)}},{key:"onSubmorphSettingsDragStart",value:function(E,R){var Ya=this;E.stop();var gb=this.target.settingsFor(R);R="";for(var $b in gb)R+="".concat($b,
":").concat(gb[$b]," ");var Sc=Yb.morph({type:"label",value:R,isLayoutable:!1});Sc.wantsToBeDroppedOn=function(Ic){return Ya.target.layoutableSubmorphs.includes(Ic)};Sc.onBeingDroppedOn=function(Ic,Pd){Sc.remove();if(Ic=Ya.target.layoutableSubmorphs.includes(Pd)?Pd:E.world.morphsContainingPoint(E.hand.position).find(function(Zd){return Ya.target.layoutableSubmorphs.includes(Zd)}))Ya.updateSubmorphProportionalLayoutSettings({policy:gb.x,axis:"x",submorph:Ic}),Ya.updateSubmorphProportionalLayoutSettings({policy:gb.y,
axis:"y",submorph:Ic}),Ic.show(),$world.setStatusMessage("layout settings applied")};E.hand.grab(Sc)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var E=Ed(regeneratorRuntime.mark(function Ya(){var gb,$b,Sc,Ic,Pd,Zd,ge,Ce,$e,pf,ig,Xf;return regeneratorRuntime.wrap(function(Vg){for(;;)switch(Vg.prev=Vg.next){case 0:gb=this.target.layoutableSubmorphs;if(!this.env.eventDispatcher.isKeyPressed("Shift")){Vg.next=9;break}Pd=gb.map(function(Re){return{isListItem:!0,string:String(Re),value:Re}});
Vg.next=5;return $world.listPrompt("Select morph",Pd,{requester:this,onSelection:function(Re){return Re.show()}});case 5:Yb.__inter0__=Vg.sent;Sc=Yb.__inter0__.selected;Ic=ic(Sc,1);$b=Ic[0];Vg.next=12;break;case 9:return Vg.next=11,Yb.InteractiveMorphSelector.selectMorph(this.world(),this,function(Re){return gb.includes(Re)});case 11:$b=Vg.sent;case 12:if($b){Vg.next=14;break}return Vg.abrupt("return");case 14:Zd=this.state.popover.get("controlContainer"),ge=Zd.getAllNamed(/submorph config/),Ce=["move",
"resize","scale","fixed"],$e=this.target.settingsFor($b),ge.length||(Zd.submorphs=[].concat(Wb(Zd.submorphs),[{name:"submorph config X-Axis policy",position:Yb.pt(0,this.height),fill:Yb.Color.transparent,layout:new Yb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new Yb.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:$e.x,values:Ce})]},{name:"submorph config Y-Axis policy",position:Yb.pt(0,
this.height),fill:Yb.Color.transparent,layout:new Yb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new Yb.DropDownSelector({name:"y-axis policy selector",borderRadius:2,padding:3,selectedValue:$e.y,values:Ce})]},Yb.morph({position:Yb.pt(0,this.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})])),pf=Zd.getSubmorphNamed("x-axis policy selector"),ig=Zd.getSubmorphNamed("y-axis policy selector"),
Xf=Zd.getSubmorphNamed("dragme"),Yb.disconnect(pf,"selectedValue",this,"updateSubmorphProportionalLayoutSettings"),Yb.disconnect(ig,"selectedValue",this,"updateSubmorphProportionalLayoutSettings"),pf.selectedValue=$e.x,ig.selectedValue=$e.y,Yb.connect(Xf,"onDragStart",this,"onSubmorphSettingsDragStart",{updater:function(Re,ae){return Re(ae,$b)},varMapping:{submorph:$b}}),Yb.connect(pf,"selectedValue",this,"updateSubmorphProportionalLayoutSettings",{converter:function(Re){return{policy:Re,axis:"x",
submorph:$b}},varMapping:{submorph:$b}}),Yb.connect(ig,"selectedValue",this,"updateSubmorphProportionalLayoutSettings",{converter:function(Re){return{policy:Re,axis:"y",submorph:$b}},varMapping:{submorph:$b}});case 29:case "end":return Vg.stop()}},Ya,this)}));return function(){return E.apply(this,arguments)}}()},{key:"optionControls",value:function(E){this.state.popover=E;var R=this.target;E=new Yb.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:Yb.Color.transparent,checked:R.xAxisEnabled});
R=new Yb.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:Yb.Color.transparent,checked:R.yAxisEnabled});var Ya=new Yb.Button({name:"modify submorph settings button",label:[].concat(Wb(Yb.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});Yb.connect(E,"checked",this,"updateXAxisEnabled");Yb.connect(R,"checked",this,"updateYAxisEnabled");Yb.connect(Ya,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[Ya]}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Yb.Color.transparent}}}}],ra,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27928,end:33939})}(Yb.LayoutHalo));Yb.ProportionalLayoutHalo=pa;Yb.ProportionalLayoutHalo=
pa;var wa=window.lively.FreezerRuntime.recorderFor("lively.halos/index.js");wa.Halo=cb;wa.MorphHighlighter=th;wa.InteractiveMorphSelector=Be;wa.show=xe;wa.ProportionalLayoutHalo=pa;wa.GridLayoutHalo=de;wa.FlexLayoutHalo=P;wa.showAndSnapToGuides=Ob;wa.removeSnapToGuidesOf=Md;wa.show=xe;wa.Halo=cb;wa.MorphHighlighter=th;wa.InteractiveMorphSelector=Be;wa.ProportionalLayoutHalo=pa;wa.GridLayoutHalo=de;wa.FlexLayoutHalo=P;wa.showAndSnapToGuides=Ob;wa.removeSnapToGuidesOf=Md;cb=Object.freeze({__proto__:null,
show:xe,Halo:cb,MorphHighlighter:th,InteractiveMorphSelector:Be,ProportionalLayoutHalo:pa,GridLayoutHalo:de,FlexLayoutHalo:P,showAndSnapToGuides:Ob,removeSnapToGuidesOf:Md});bd("e",cb);var Ea=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/helpers.js");Ea.ensureDefaultImports=Fg;Ea.onNumberDragStart=rd;Ea.getScaleAndOffset=ti;Ea.getCurrentValue=dg;Ea.onNumberDragEnd=Of;Ea.onNumberDrag=mg;Ea.generateReferenceExpression=wf;Ea.commonjsHelpers=Fa;Ea.Tooltip=M;Ea.config=Aa;Ea.SystemTooltip=
Cc;Ea.num=se;Ea.arr=Rc;Ea.syncEval=wb;Ea.module=nd;Ea.ensureDefaultImports=Fg;Ea.onNumberDragStart=rd;Ea.getScaleAndOffset=ti;Ea.getCurrentValue=dg;Ea.onNumberDragEnd=Of;Ea.onNumberDrag=mg;Ea.generateReferenceExpression=wf;var ia=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/index.js");ia.InspectionTree=gd;ia.isMultiValue=xd;ia.RemoteInspectionTree=Vd;ia.printValue=Uc;ia.arr=Rc;ia.num=se;ia.promise=lc;ia.obj=Dd;ia.Path=zb;ia.pt=Od;ia.rect=pb;ia.Color=fe;ia.config=Aa;ia.HorizontalLayout=
fa;ia.Label=sb;ia.VerticalLayout=va;ia.Morph=Gb;ia.morph=qb;ia.Icon=kc;ia.ViewModel=Na;ia.part=hb;ia.connect=Ne;ia.disconnect=Ib;ia.once=ub;ia.LoadingIndicator=dc;ia.DarkTheme=bh;ia.DefaultTheme=he;ia.DropDownSelector=yc;ia.InteractiveMorphSelector=Be;ia.MorphHighlighter=th;ia.valueWidgets=Hb;ia.onNumberDragStart=rd;ia.ensureDefaultImports=Fg;ia.generateReferenceExpression=wf;ia.onNumberDragEnd=Of;ia.onNumberDrag=mg;ia.InstructionWidget=ma;ia.ColorPicker=Kd;ia.ShadowPopup=vc;ia.PositionPopupLight=
Qc;ia.PaddingPopup=kb;ia.ensureDefaultImports();ia.inspectorCommands=[{name:"focus codeEditor",exec:function(ha){ha.get("codeEditor").show();ha.get("codeEditor").focus();return!0}},{name:"focus propertyTree",exec:function(ha){ha.get("propertyTree").show();ha.get("propertyTree").focus();return!0}}];(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/index.js"),mb=ra.hasOwnProperty("DraggedProp")&&"function"===typeof ra.DraggedProp?ra.DraggedProp:ra.DraggedProp=function(E){if(!E||
!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"applyToTarget",value:function(E){var R=this.currentTarget,Ya=this.control;this.remove();ia.MorphHighlighter.removeHighlighters(E.world);if(R)if(R.isText&&"js"===R.editorModeName){var gb=R.evalEnvironment.context;E=R.textPositionFromPoint(R.localize(E.position));gb=ia.generateReferenceExpression(this.sourceObject,{fromMorph:gb});Ya.keyString&&(gb+="."+
Ya.keyString);R.insertTextAndSelect(gb,E);R.focus()}else"propertyValue"in Ya&&(R[Ya.keyString]=Ya.propertyValue)}},{key:"update",value:function(E){E=E.hand.globalPosition;var R=this.morphBeneath(E);if(R){for(R===this.morphHighlighter&&(R=R.morphBeneath(E));[R].concat(Wb(R.ownerChain())).find(function(Ya){return!Ya.visible});)R=R.morphBeneath(E);if(R!==this.currentTarget){this.currentTarget=R;this.morphHighlighter&&this.morphHighlighter.deactivate();if(R.isWorld)return;this.morphHighlighter=ia.MorphHighlighter["for"]($world,
R);this.morphHighlighter.show()}this.position=E}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DraggedProp"}},{key:"properties",get:function(){return{control:{},sourceObject:{},borderColor:{defaultValue:ia.Color.rgb(169,204,227)},fill:{defaultValue:ia.Color.rgb(235,245,251).withA(.8)},borderWidth:{defaultValue:2},borderRadius:{defaultValue:4},submorphs:{after:["control"],initialize:function(){var E=this.control;if(!E)return this.submorphs=[];this.height=22;this.submorphs=[E];
E.top=0;E.fontSize=14;"function"===typeof E.relayout&&E.relayout();this.width=E.width+20;this.adjustOrigin(ia.pt(10,10))}}}}}],ra,{pathInPackage:function(){return"./js/inspector/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1440,end:3982})})(ia.Morph);(function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/index.js"),
mb=ra.hasOwnProperty("DraggableTreeLabel")&&"function"===typeof ra.DraggableTreeLabel?ra.DraggableTreeLabel:ra.DraggableTreeLabel=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"inspector",get:function(){return this.owner.owner}},{key:"onDragStart",value:function(E){this.draggedProp=new ia.DraggedProp({sourceObject:this.inspector.targetObject,control:this.copy()});this.draggedProp.openInWorld();
ia.connect(E.hand,"update",this.draggedProp,"update")}},{key:"onDrag",value:function(E){}},{key:"onDragEnd",value:function(E){ia.disconnect(E.hand,"update",this.draggedProp,"update");this.draggedProp.applyToTarget(E)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DraggableTreeLabel"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["TreeLabel"]},draggable:{defaultValue:!0},nativeCursor:{defaultValue:"-webkit-grab"},keyString:{},valueString:{},fontFamily:{defaultValue:ia.config.codeEditor.defaultStyle.fontFamily},
fill:{defaultValue:ia.Color.transparent},padding:{defaultValue:ia.rect(0,1,10,-1)},isSelected:{after:["submorphs"],set:function(E){this.setProperty("isSelected",E);E?(this.removeStyleClass("deselected"),this.addStyleClass("selected")):(this.addStyleClass("deselected"),this.removeStyleClass("selected"));this.control&&(this.control.isSelected=E)}}}}}],ra,{pathInPackage:function(){return"./js/inspector/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3984,end:5412})})(ia.Label);ma=function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/index.js"),mb=ra.hasOwnProperty("PropertyControl")&&"function"===typeof ra.PropertyControl?ra.PropertyControl:ra.PropertyControl=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,[{key:"menuItems",value:function(){return this._targetMenuItems||
[]}},{key:"renderValueSelector",value:function(E,R,Ya){E.control=new ia.DropDownSelector({opacity:.8,fill:ia.Color.white.withA(.5),name:"valueString",styleClasses:["TreeLabel"],selectedValue:R,padding:0,values:Ya});ia.connect(E.control,"update",E,"propertyValue",{updater:function(gb,$b){this.targetObj.propertyValue!==$b&&gb($b)}});ia.connect(E,"update",E.control,"selectedValue",{updater:function(gb,$b){$b=$b&&$b.valueOf?$b.valueOf():$b;this.targetObj.propertyValue!==$b&&gb($b)}});return E}},{key:"toggleMultiValuePlaceholder",
value:function(E){this.multiValuePlaceholder=this.multiValuePlaceholder||this.addMorph({fill:ia.Color.transparent,layout:new ia.HorizontalLayout({spacing:3}),name:"multi value placeholder",nativeCursor:"pointer",submorphs:ia.arr.range(0,2).map(function(R){return{type:"ellipse",fill:ia.Color.gray.withA(.5),reactsToPointer:!1,extent:ia.pt(7,7)}})});E?(ia.connect(this.multiValuePlaceholder,"onMouseDown",this,"propertyValue",{converter:function(){return this.targetObj.propertyValue.valueOf()}}),this.control.opacity=
0,this.multiValuePlaceholder.visible=!0):(ia.disconnect(this.multiValuePlaceholder,"onMouseDown",this,"propertyValue"),this.control.opacity=1,this.multiValuePlaceholder.visible=!1)}},{key:"toggleFoldableValue",value:function(E){this.foldableProperties&&this.toggleMultiValuePlaceholder(ia.isMultiValue(E,this.foldableProperties))}},{key:"asFoldable",value:function(E){this.foldableProperties=E;ia.connect(this,"update",this,"toggleFoldableValue")}},{key:"relayout",value:function(){this.fit();this.control&&
(this.control.topLeft=this.textBounds().topRight().addXY(-2,1),this.width=this.textBounds().width+this.control.bounds().width);this.height=18;this.multiValuePlaceholder&&(this.multiValuePlaceholder.leftCenter=this.textBounds().rightCenter())}},{key:"toString",value:function(){return"".concat(this.keyString,": ").concat(this.valueString)}},{key:"highlight",value:function(){this.highlighter&&this.highlighter.remove();var E=this.highlighter=this.addMorph({type:"label",name:"valueString",value:this.keyString});
E.isLayoutable=!1;E.fontWeight="bold";E.fontColor=ia.Color.orange;E.reactsToPointer=!1;E.fadeOut(2E3)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PropertyControl"}},{key:"properties",get:function(){return{root:{},keyString:{},valueString:{},propertyValue:{},control:{after:["submorphs"],derived:!0,get:function(){return this.submorphs[0]||!1},set:function(E){this.submorphs=[E]}},submorphs:{initialize:function(){this.value=this.keyString+":";this.submorphs=[];ia.connect(this,
"extent",this,"relayout")}}}}},{key:"inferType",value:function(E){E.keyString;return(E=E.value)&&(E.isColor||E.isGradient)?"Color":E&&E.isPoint?"Point":ia.obj.isBoolean(E)?"Boolean":ia.obj.isNumber(E)?"Number":ia.obj.isString(E)?"String":E&&E.isRectangle?"Rectangle":!1}},{key:"render",value:function(E){E.spec.type||(E.spec=Object.assign({},E.spec,{isFloat:!Number.isInteger(E.value),type:this.inferType(E)}));switch(E.spec.type){case "Color":var R=this.renderColorControl(E);break;case "ColorGradient":R=
this.renderColorControl(Object.assign({},E,{gradientEnabled:!0}));break;case "Number":R=this.renderNumberControl(E);break;case "String":R=this.renderStringControl(E);break;case "RichText":R=this.renderStringControl(E);break;case "Layout":R=this.renderLayoutControl(E);break;case "Enum":R=this.renderEnumControl(E);break;case "Shadow":R=this.renderShadowControl(E);break;case "Point":R=this.renderPointControl(E);break;case "Rectangle":R=this.renderRectangleControl(E);break;case "Boolean":R=this.renderBooleanControl(E);
break;default:R=this.renderItSomehow(E)}R.control&&(ia.connect(R.control,"openWidget",R,"openWidget"),R.toggleFoldableValue(E.value));return R}},{key:"baseControl",value:function(E){var R=E.spec;E=new this({keyString:E.keyString,valueString:E.valueString,isSelected:!1,propertyValue:E.value});R.foldable&&E.asFoldable(R.foldable);return E}},{key:"renderGrabbableKey",value:function(E){var R=this,Ya=E.target;return["".concat(E.keyString,":"),{nativeCursor:"-webkit-grab",onDragStart:function(gb){gb.state.draggedProp=
new ia.DraggedProp({sourceObject:Ya,control:R.baseControl(E)});gb.state.draggedProp.openInWorld();ia.connect(gb.hand,"update",gb.state.draggedProp,"update")},onDrag:function(gb){},onDragEnd:function(gb){ia.disconnect(gb.hand,"update",gb.state.draggedProp,"update");gb.state.draggedProp.applyToTarget(gb)}}]}},{key:"renderEnumControl",value:function(E){var R=E.value,Ya=E.spec.values;E.valueString;var gb=E.keyString,$b=E.target,Sc=E.node;E.tree;var Ic=function(){var Pd=Ed(regeneratorRuntime.mark(function $e(ge,
Ce){return regeneratorRuntime.wrap(function(pf){for(;;)switch(pf.prev=pf.next){case 0:$b.world().openWorldMenu(ge,Ya.map(function(ig){return{string:ig.toString(),action:function(){$b[gb]=ig;Sc.rerender()}}}));case 1:case "end":return pf.stop()}},$e)}));return function(ge,Ce){return Pd.apply(this,arguments)}}();return[].concat(Wb(this.renderGrabbableKey(E)),[" ".concat(R?R.valueOf?R.valueOf():R:"Not set"),{nativeCursor:"pointer",onMouseDown:Ic}],Wb(ia.Icon.textAttribute("angle-down",{paddingTop:"4px",
paddingLeft:"4px",opacity:.7,onMouseDown:Ic})))}},{key:"renderStringControl",value:function(E){var R=E.value;E.fastRender;E.keyString;E.valueString;E.node;return[].concat(Wb(this.renderGrabbableKey(E)),[" ".concat(200<R.length?R.slice(0,20)+"...":R),{fontColor:ia.Color.blue,paddingTop:"0px"}])}},{key:"renderRectangleControl",value:function(E){E.value;var R=E.keyString,Ya=E.valueString,gb=E.target,$b=E.node,Sc=function(){var Ic=Ed(regeneratorRuntime.mark(function ge(Zd){var Ce;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=
$e.next){case 0:return Ce=ia.part(ia.PaddingPopup,{hasFixedPosition:!0}),Ce.viewModel.startPadding(gb[R]),$e.next=4,Ce.fadeIntoWorld(Zd.positionIn(gb.world()));case 4:ia.connect(Ce.viewModel,"paddingChanged",function(pf){gb[R]=pf;$b.rerender()});case 5:case "end":return $e.stop()}},ge)}));return function(Zd){return Ic.apply(this,arguments)}}();return[].concat(Wb(this.renderGrabbableKey(E)),[" ".concat(Ya),{fontColor:ia.Color.black,nativeCursor:"pointer",onMouseDown:Sc}])}},{key:"renderBooleanControl",
value:function(E){var R=E.value,Ya=E.keyString,gb=E.valueString,$b=E.target,Sc=E.node;return[].concat(Wb(this.renderGrabbableKey(E)),[" ".concat(gb),{nativeCursor:"pointer",fontColor:R?ia.Color.green:ia.Color.red,onMouseDown:function(Ic){$b[Ya]=!$b[Ya];Sc.rerender()}}])}},{key:"renderNumberControl",value:function(E){var R=E.value,Ya=E.spec,gb=E.keyString,$b=E.valueString;E.fastRender;var Sc=E.node,Ic=E.target,Pd=E.tree,Zd=Sc._numberControls;Zd=void 0===Zd?new Ca:Zd;var ge=ic(Zd.submorphs,2),Ce=ge[0],
$e=ge[1];Zd.fontColor=Pd.fontColor;var pf=Sc._numberControls=Zd;"max"in Ya&&"min"in Ya&&-Infinity!==Ya.min&&Infinity!==Ya.max?(pf.baseFactor=(Ya.max-Ya.min)/100,pf.floatingPoint=Ya.isFloat,pf.max=Ya.max,pf.min=Ya.min):(pf.floatingPoint=Ya.isFloat,pf.baseFactor=.5,pf.min=void 0!==Ya.min?Ya.min:-Infinity,pf.max=void 0!==Ya.max?Ya.max:Infinity);var ig=ia.valueWidgets.NumberWidget.properties.fontColor.defaultValue;return[].concat(Wb(this.renderGrabbableKey(E)),Wb(Sc._inputMorph?[Sc._inputMorph,{}]:[" ".concat(void 0!==
R&&(R.valueOf?R.valueOf():R).toFixed(Ya.isFloat?Math.max(4,ia.num.precision(R)):0)," "),{fontColor:ig,onMouseUp:function(Xf){Sc._inputMorph=ia.morph({type:"input",fill:null,fontColor:ig,fontFamily:"IBM Plex Mono",fontSize:14,padding:ia.rect(8,2,-6,2),height:23,cursorColor:ia.Color.white,value:R.valueOf?R.valueOf():$b});Ic[gb]=R;Sc._inputMorph.focus();ia.once(Sc._inputMorph,"inputAccepted",function(Vg){delete Sc._inputMorph;Ic[gb]=Ya.isFloat?Number.parseFloat(Vg):Number.parseInt(Vg);Sc.rerender()});
ia.once(Sc._inputMorph,"onBlur",function(Vg){Sc._inputMorph&&(delete Sc._inputMorph,Ic[gb]=R,Sc.rerender())});Sc.rerender()},onDragStart:function(Xf){pf.scrubbedValue=R;ia.onNumberDragStart(Xf,pf)},onDrag:function(Xf){Ic[gb]=ia.onNumberDrag(Xf,pf);Sc.rerender()},onDragEnd:function(Xf){return ia.onNumberDragEnd(Xf,pf)}},Zd,{onMouseUp:function(){Ce.fill=$e.fill=null},onMouseDown:function(Xf){if(Xf.targetMorph===Ce){Ce.fill=ia.Color.white.withA(.2);if("max"in Ya&&Ic[gb]>=Ya.max)return;Ic[gb]+=1}if(Xf.targetMorph===
$e){$e.fill=ia.Color.white.withA(.2);if("min"in Ya&&Ic[gb]<=Ya.min)return;--Ic[gb]}Sc.rerender()}}]))}},{key:"renderShadowControl",value:function(E){var R=E.keyString;E.valueString;var Ya=E.value,gb=E.target,$b=E.node,Sc=function(){var Ic=Ed(regeneratorRuntime.mark(function ge(Zd){var Ce;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return Ce=ia.part(ia.ShadowPopup,{hasFixedPosition:!0}),Ce.viewModel.shadowValue=gb[R],$e.next=4,Ce.fadeIntoWorld(Zd.positionIn(gb.world()));
case 4:ia.connect(Ce.viewModel,"value",function(pf){gb[R]=pf;$b.rerender()});case 5:case "end":return $e.stop()}},ge)}));return function(Zd){return Ic.apply(this,arguments)}}();return[].concat(Wb(this.renderGrabbableKey(E)),["".concat(Ya?Ya.toFilterCss():"No Shadow"),{nativeCursor:"pointer",onMouseDown:Sc}])}},{key:"renderPointControl",value:function(E){var R=E.keyString;E.valueString;var Ya=E.value;E.fontColor;var gb=E.target,$b=E.node,Sc=ia.valueWidgets.NumberWidget.properties.fontColor.defaultValue,
Ic={nativeCursor:"pointer",onMouseDown:function(){var Pd=Ed(regeneratorRuntime.mark(function Ce(ge){var $e;return regeneratorRuntime.wrap(function(pf){for(;;)switch(pf.prev=pf.next){case 0:return $e=ia.part(ia.PositionPopupLight,{hasFixedPosition:!0}),$e.setPoint(gb[R]),pf.next=4,$e.fadeIntoWorld(ge.positionIn(gb.world()));case 4:ia.connect($e.viewModel,"value",function(ig){gb[R]=ig;$b.rerender()});case 5:case "end":return pf.stop()}},Ce)}));return function(ge){return Pd.apply(this,arguments)}}()};
return[].concat(Wb(this.renderGrabbableKey(E)),[" pt(",Object.assign({},Ic),"".concat(Ya.x.toFixed()),Object.assign({fontColor:Sc},Ic),",",Object.assign({},Ic),"".concat(Ya.y.toFixed()),Object.assign({fontColor:Sc},Ic),")",Object.assign({},Ic)])}},{key:"renderLayoutControl",value:function(E){E.target;E.fastRender;var R=E.valueString;E.keyString;var Ya=E.value;return[].concat(Wb(this.renderGrabbableKey(E)),[" ".concat(Ya?R:"No Layout"),{onMouseDown:function(gb){}}])}},{key:"renderColorControl",value:function(E){var R=
E.node,Ya=E.gradientEnabled;E.fastRender;var gb=E.valueString,$b=E.keyString,Sc=E.value,Ic=E.target,Pd=function(){var Zd=Ed(regeneratorRuntime.mark(function $e(Ce){var pf;return regeneratorRuntime.wrap(function(ig){for(;;)switch(ig.prev=ig.next){case 0:return pf=ia.part(ia.ColorPicker,{hasFixedPosition:!0}),pf.solidOnly=!Ya,pf.focusOnMorph(Ic,Sc),ig.next=5,pf.fadeIntoWorld(Ce.positionIn(Ic.world()));case 5:ia.connect(pf.viewModel,"value",function(Xf){Ic[$b]=Xf;R.rerender()});case 6:case "end":return ig.stop()}},
$e)}));return function(Ce){return Zd.apply(this,arguments)}}();return[].concat(Wb(this.renderGrabbableKey(E)),[ia.morph({fill:Sc.valueOf?Sc.valueOf():Sc,extent:ia.pt(15,15),borderColor:ia.Color.gray,borderWidth:1}),{paddingLeft:"5px",paddingTop:"4px",paddingRight:"5px"},"".concat(Sc?Sc.valueOf?Sc.valueOf():gb:"No Color"),{nativeCursor:"pointer",onMouseDown:Pd}])}},{key:"renderItSomehow",value:function(E){E.fastRender;E.keyString;var R=E.valueString;E.value;return[].concat(Wb(this.renderGrabbableKey(E)),
[" ".concat(R),{}])}}],ra,{pathInPackage:function(){return"./js/inspector/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5421,end:20828})}(ia.DraggableTreeLabel);ia.PropertyControl=ma;ia.PropertyControl=ma;var Ca=function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/index.js"),mb=ra.hasOwnProperty("NumberControls")&&
"function"===typeof ra.NumberControls?ra.NumberControls:ra.NumberControls=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(mb,ha,void 0,[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"NumberControls"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new ia.VerticalLayout({spacing:0,orderByIndex:!0})}},fill:{defaultValue:ia.Color.transparent},
width:{defaultValue:15},fontColor:{derived:!0,set:function(E){this.submorphs.map(function(R){return R.fontColor=E})}},submorphs:{initialize:function(){this.submorphs=[ia.Icon.makeLabel("sort-up",{autofit:!0,opacity:.6,nativeCursor:"pointer",padding:ia.rect(5,2,0,-6),fontSize:12}),ia.Icon.makeLabel("sort-up",{top:10,rotation:Math.PI,autofit:!0,padding:ia.rect(5,4,0,-9),opacity:.6,nativeCursor:"pointer",fontSize:12})]}}}}}],ra,{pathInPackage:function(){return"./js/inspector/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:20830,end:21874})}(ia.Morph);ma=function(ha){var ra=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/index.js"),mb=ra.hasOwnProperty("Inspector")&&"function"===typeof ra.Inspector?ra.Inspector:ra.Inspector=function(E){if(!E||!E[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};
return uc(mb,ha,[{key:"attach",value:function(E){uc._get(Object.getPrototypeOf(mb.prototype),"attach",this).call(this,E);var R=this;E=this.ui;var Ya=E.codeEditor,gb=E.thisBindingSelector,$b=E.propertyTree;E=ia.Icon.textAttribute("long-arrow-alt-right",{textStyleClasses:["fas"],paddingTop:"2px"});gb.items=[{isListItem:!0,value:"target",label:["this ",null].concat(Wb(E),[" target",null])},{isListItem:!0,value:"selection",label:["this ",null].concat(Wb(E),[" selection",null])}];Ya.changeEditorMode("js").then(function(){return Ya.evalEnvironment=
{targetModule:"lively://lively.morphic/inspector",get context(){return"selection"===gb.selection?R.selectedContext:R.targetObject},get systemInterface(){return ia.Path("treeData.systemInterface").get($b)},format:"esm"}})["catch"](function(Sc){return $world.logError(Sc)})}},{key:"viewDidLoad",value:function(){this.prepareForNewTargetObject(this.targetObject)}},{key:"fixUndeclaredVariables",value:function(){this.ui.codeEditor.execCommand("[javascript] fix undeclared variables",{autoApplyIfSingleChoice:!0})}},
{key:"renderDraggableTreeLabel",value:function(E){return new ia.DraggableTreeLabel(E)}},{key:"renderPropertyControl",value:function(E){return ia.PropertyControl.render(E)}},{key:"onWindowClose",value:function(){this.view.stopStepping();this.ui.propertyTree.treeData.dispose();this.openWidget&&this.closeOpenWidget()}},{key:"refreshSelectedLine",value:function(){var E=this.ui.propertyTree.selectedIndex-1,R=this.ui.propertyTree.selectedNode;this.ui.propertyTree.selectedNode.refreshProperty();R=this.ui.propertyTree.document.getLine(E).textAndAttributes.slice(0,
4).concat(R.display(this));E=this.ui.propertyTree.lineRange(E,!1);this.ui.propertyTree.replace(E,R,!1,!1,!1);this.ui.propertyTree.selectedNode=this.ui.propertyTree.selectedNode}},{key:"refreshAllProperties",value:function(){this.world()||this.stopStepping();if(this.targetObject&&this.targetObject.isMorph)if(this.targetObject._styleSheetProps!==this.lastStyleSheetProps)this.refreshTreeView(),this.lastStyleSheetProps=this.targetObject._styleSheetProps;else{var E=ia.arr.last(this.targetObject.env.changeManager.changesFor(this.targetObject));
if(E!==this.lastChange||this.lastSubmorphs!==ia.printValue(this.targetObject&&this.targetObject.submorphs))this.focusedNode&&this.focusedNode.keyString===E.prop&&this.repositionOpenWidget(),this.lastChange=E,this.lastSubmorphs=ia.printValue(this.targetObject&&this.targetObject.submorphs),this.refreshTreeView()}else this.stopStepping()}},{key:"refreshTreeView",value:function(){var E;this.originalTreeData&&this.originalTreeData.asListWithIndexAndDepth(!1).forEach(function(R){R=R.node;R.target&&(E=R.foldableNode?
R.target[R.foldableNode.key][R.key]:R.target[R.key],!ia.obj.equals(E,R.value)&&R.refreshProperty&&R.refreshProperty(E))});this.ui.propertyTree.update(!0);this.ui.propertyTree.doNotAcceptDropsForThisAndSubmorphs()}},{key:"prepareForNewTargetObject",value:function(){var E=Ed(regeneratorRuntime.mark(function gb(Ya){var $b,Sc,Ic,Pd,Zd,ge,Ce,$e,pf,ig,Xf,Vg,Re,ae=arguments;return regeneratorRuntime.wrap(function(Sb){for(;;)switch(Sb.prev=Sb.next){case 0:$b=1<ae.length&&void 0!==ae[1]?ae[1]:!1;if(!this.isUpdating()){Sb.next=
4;break}Sb.next=4;return this.whenUpdated();case 4:Sc=ia.promise.deferred();Ic=Sc.promise;Pd=!!this.target;this.updateInProgress=Ic;Sb.prev=7;$b&&(Zd=ia.LoadingIndicator.open("connecting to remote..."));if(!$b){Sb.next=15;break}Sb.next=12;return ia.RemoteInspectionTree.forObject(Ya,this);case 12:Sb.t0=Sb.sent;Sb.next=16;break;case 15:Sb.t0=ia.InspectionTree.forObject(Ya,this);case 16:return ge=Sb.t0,Ce=this.ui.propertyTree,Sb.next=21,ge.collapse(ge.root,!1);case 21:if(!ge.root.children){Sb.next=24;
break}Sb.next=24;return ge.collapse(ge.root.children[0],!1);case 24:$e=this.originalTreeData&&this.originalTreeData.diff(ge);if(!$e){Sb.next=30;break}pf=dd($e);try{for(pf.s();!(ig=pf.n()).done;)Xf=ic(ig.value,2),Vg=Xf[0],Re=Xf[1],Vg.refreshProperty(Re.value)}catch(Hd){pf.e(Hd)}finally{pf.f()}Sb.next=39;break;case 30:return Ce.treeData=ge,Sb.next=33,this.filterProperties();case 33:if(!Ce.treeData.root.isCollapsed){Sb.next=37;break}Sb.next=36;return Ce.onNodeCollapseChanged({node:ge.root,isCollapsed:!1});
case 36:Ce.selectedIndex=1;case 37:return Sb.next=39,Ce.execCommand("uncollapse selected node");case 39:this.toggleWindowStyle(Pd);Zd&&Zd.remove();Sb.next=46;break;case 43:Sb.prev=43,Sb.t1=Sb["catch"](7),this.view.showError(Sb.t1);case 46:this.view.startStepping(1E3,"refreshAllProperties"),this.updateInProgress=null;case 48:case "end":return Sb.stop()}},gb,this,[[7,43]])}));return function(Ya){return E.apply(this,arguments)}}()},{key:"toggleWindowStyle",value:function(){var E=Ed(regeneratorRuntime.mark(function Ya(){var gb,
$b,Sc,Ic,Pd,Zd,ge,Ce=arguments;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return gb=0<Ce.length&&void 0!==Ce[0]?Ce[0]:!0,$b=300,Pd=this.ui.codeEditor,Zd=Pd.pluginFind(function(pf){return pf.runEval}),ge=this.view.getWindow(),$e.next=7,Zd.runEval("System.get('@system-env').node");case 7:if(!$e.sent.value){$e.next=12;break}Ic=[].concat(Wb(ia.arr.without(ge.styleClasses,"local")),["node"]);Sc=ia.DarkTheme.instance;$e.next=14;break;case 12:Ic=["local"].concat(Wb(ge?
ia.arr.without(ge.styleClasses,"node"):[])),Sc=ia.DefaultTheme.instance;case 14:Zd.theme=Sc,gb?(ge&&ge.animate({duration:$b,styleClasses:Ic}),Pd.animate({fill:Sc.background,duration:$b})):ge&&(ge.styleClasses=Ic),Pd.textString=Pd.textString,Zd.highlight();case 18:case "end":return $e.stop()}},Ya,this)}));return function(){return E.apply(this,arguments)}}()},{key:"isUpdating",value:function(){return!!this.updateInProgress}},{key:"whenUpdated",value:function(){return this.updateInProgress||Promise.resolve()}},
{key:"focus",value:function(){this.ui.codeEditor.focus()}},{key:"selectTarget",value:function(){var E=Ed(regeneratorRuntime.mark(function Ya(){var gb,$b,Sc;return regeneratorRuntime.wrap(function(Ic){for(;;)switch(Ic.prev=Ic.next){case 0:if(!this.view.env.eventDispatcher.isKeyPressed("Shift")){Ic.next=8;break}Ic.next=3;return $world.execCommand("select morph",{justReturn:!0});case 3:$b=Ic.sent;Sc=ic($b,1);gb=Sc[0];Ic.next=13;break;case 8:return this.toggleSelectionInstructions(!0),Ic.next=11,ia.InteractiveMorphSelector.selectMorph();
case 11:gb=Ic.sent,this.toggleSelectionInstructions(!1);case 13:gb&&(this.targetObject=gb);case 14:case "end":return Ic.stop()}},Ya,this)}));return function(){return E.apply(this,arguments)}}()},{key:"toggleSelectionInstructions",value:function(E){E&&!this.instructionWidget?(this.instructionWidget=this.view.addMorph(ia.part(ia.InstructionWidget,{isLayoutable:!1,opacity:0,clipMode:"hidden",center:this.view.extent.scaleBy(.5)})),this.instructionWidget.animate({opacity:1,duration:200})):(this.instructionWidget.fadeOut(200),
this.instructionWidget=null)}},{key:"closeOpenWidget",value:function(){this.openWidget.close()}},{key:"onWidgetOpened",value:function(E){E=E.widget;this.openWidget&&this.openWidget.fadeOut();this.focusedNode=this.ui.propertyTree.selectedNode;E.epiMorph=!0;this.openWidget=E;ia.once(E,"close",this,"closeOpenWidget");ia.once(this.ui.propertyTree,"onMouseDown",this,"closeOpenWidget")}},{key:"getWidgetPosition",value:function(){var E=this.ui.propertyTree,R=E.textLayout.boundsFor(E,{column:0,row:E.selectedIndex-
1});R=E.worldPoint(ia.pt(R.x,R.y+R.height/2)).addPt(E.scroll.negated());E=E.globalBounds();R.x=this.globalBounds().center().x;R.y<E.top()?R=E.topCenter():E.bottom()-20<R.y&&(R=E.bottomCenter().addXY(0,-20));return R}},{key:"repositionOpenWidget",value:function(){this.openWidget&&this.focusedNode&&(this.openWidget.topCenter=this.getWidgetPosition())}},{key:"adjustProportions",value:function(E){this.view.layout.row(1).height+=E.state.dragDelta.y;this.relayout()}},{key:"isEditorVisible",value:function(){return 10<
this.ui.codeEditor.height}},{key:"makeEditorVisible",value:function(E){if(E!==this.isEditorVisible()){var R=this.view,Ya=R.extent;R=R.layout;var gb=this.ui,$b=gb.terminalToggler,Sc=gb.codeEditor,Ic=gb.thisBindingSelector;gb=gb.fixImportButton;R.disable();E?($b.fontColor=ia.Color.rgbHex("00e0ff"),R.row(3).height=this.codeEditorHeight||180,R.row(2).height=5,gb.animate({visible:!0,duration:200}),Ic.animate({visible:!0,duration:200})):(this.codeEditorHeight=R.row(3).height,$b.fontColor=ia.Color.white,
R.row(3).height=R.row(2).height=0,gb.animate({visible:!1,duration:200}),Ic.animate({visible:!1,duration:200}));this.view.extent=Ya;R.enable({duration:200});this.relayout({duration:200});Sc.focus();Sc.animate({opacity:E?1:0,duration:200})}}},{key:"toggleCodeEditor",value:function(){var E=Ed(regeneratorRuntime.mark(function Ya(){return regeneratorRuntime.wrap(function(gb){for(;;)switch(gb.prev=gb.next){case 0:this.makeEditorVisible(!this.isEditorVisible());case 1:case "end":return gb.stop()}},Ya,this)}));
return function(){return E.apply(this,arguments)}}()},{key:"filterProperties",value:function(){var E=Ed(regeneratorRuntime.mark(function Ya(){var gb,$b;return regeneratorRuntime.wrap(function(Sc){for(;;)switch(Sc.prev=Sc.next){case 0:return console.log("filter props"),gb=this.ui.searchField,$b=this.ui.propertyTree,this.originalTreeData||(this.originalTreeData=$b.treeData),ia.disconnect($b.treeData,"onWidgetOpened",this,"onWidgetOpened"),Sc.next=7,$b.treeData.filter({maxDepth:2,showUnknown:this.ui.unknowns.checked,
showInternal:this.ui.internals.checked,iterator:function(Ic){return gb.matches(Ic.key)}});case 7:$b.update(),ia.connect($b.treeData,"onWidgetOpened",this,"onWidgetOpened");case 9:case "end":return Sc.stop()}},Ya,this)}));return function(){return E.apply(this,arguments)}}()},{key:"onViewResized",value:function(E){this._lastExtent&&this._lastExtent.equals(E)||this.relayout();this.world()&&(this._lastExtent=E)}},{key:"relayout",value:function(){var E=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
{},R=this.ui,Ya=R.fixImportButton,gb=R.terminalToggler,$b=R.propertyTree,Sc=R.thisBindingSelector;R.codeEditor;(R=this.view.layout)&&R.forceLayout();R=$b.bounds().insetBy(5).bottomLeft();$b=$b.bounds().insetBy(5).bottomRight();var Ic=$b.subXY(Ya.width+10,0);gb.visible=!!this.world();E.duration?(gb.animate(Object.assign({bottomLeft:R},E)),Ya.animate(Object.assign({bottomRight:$b},E)),Sc.animate(Object.assign({bottomRight:Ic},E))):(gb.bottomLeft=R,Ya.bottomRight=$b,Sc.bottomRight=Ic)}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"Inspector"}},{key:"properties",get:function(){return{_serializableTarget:{defaultValue:null},remoteTarget:{set:function(E){this.setProperty("remoteTarget",E);this.ui.propertyTree&&(this.originalTreeData=null,this.prepareForNewTargetObject(E,!0))}},targetObject:{set:function(E){this._serializableTarget=E&&E.isMorph?E.id:E;this.setProperty("targetObject",E);this.ui.propertyTree&&(this.originalTreeData=null,this.prepareForNewTargetObject(E))}},selectedContext:{readOnly:!0,derived:!0,
get:function(){var E=this.ui.propertyTree,R=E.treeData;return R.getContextFor(E.selectedNode||R.root)}},originalTreeData:{serialize:!1},updateInProgress:{defaultValue:!1,serialize:!1},expose:{get:function(){return["isInspector","onWindowClose","commands","keybindings"]}},isInspector:{get:function(){return!0}},keybindings:{get:function(){return[{keys:"Alt-Up",command:"focus propertyTree"},{keys:"Alt-Down",command:"focus codeEditor"},{keys:"F1",command:"focus propertyTree"},{keys:"F2",command:"focus codeEditor"}]}},
commands:{get:function(){return ia.inspectorCommands}},bindings:{get:function(){return[{target:"target picker",signal:"onMouseUp",handler:"selectTarget",override:!1},{target:"property tree",signal:"onScroll",handler:"repositionOpenWidget",override:!1},{target:"resizer",signal:"onDrag",handler:"adjustProportions",override:!1},{target:"terminal toggler",signal:"onMouseDown",handler:"toggleCodeEditor",override:!1},{model:"unknowns",signal:"trigger",handler:"filterProperties",override:!1},{model:"internals",
signal:"trigger",handler:"filterProperties",override:!1},{model:"search field",signal:"searchInput",handler:"filterProperties",override:!1},{model:"property tree",signal:"nodeCollapseChanged",handler:"filterProperties",override:!1},{model:"fix import button",signal:"fire",handler:"fixUndeclaredVariables",override:!1},{signal:"extent",handler:"onViewResized",override:!1}]}}}}}],ra,{pathInPackage:function(){return"./js/inspector/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22129,end:37731})}(ia.ViewModel);ia.Inspector=ma;ia.Inspector=ma;var w=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/ui.cp.js");w.openInWindow=mf;w.GridLayout=eb;w.morph=qb;w.Text=ab;w.Icon=kc;w.Label=sb;w.component=Bb;w.part=hb;w.pt=Od;w.rect=pb;w.Color=fe;w.ButtonDefault=la;w.DarkButton=Fb;w.SystemButton=vb;w.LabeledCheckBox=ob;w.SearchField=
Pb;w.Inspector=ma;w.DropDownListModel=tb;w.DarkList=zc;w.PropertyTree=sf;w.InstructionWidget=w.component["for"](function(){return w.component({type:w.Text,fixedWidth:!0,fixedHeight:!0,lineWrapping:!0,name:"instruction widget",fontSize:13,borderRadius:3,padding:w.rect(10,10,0,0),fill:w.Color.rgba(0,0,0,.75),fontColor:w.Color.rgb(255,255,255),fontFamily:'"IBM Plex Sans",Sans-Serif',extent:w.pt(140,135),textAndAttributes:["Select a new morph to inspect by hovering over it and clicking left. You can exit this mode by pressing ",
{},w.morph({type:"label",name:"escapeKey",borderRadius:5,borderWidth:1,padding:w.rect(5,0,0,2),fontWeight:"bold",fontColor:w.Color.rgb(255,255,255),position:w.pt(62.5,100.9),value:"esc"}),{}]})},{module:"lively.ide/js/inspector/ui.cp.js","export":"InstructionWidget",range:{start:556,end:1284}},w.InstructionWidget);w.SmallList=w.component["for"](function(){return w.component(w.DarkList,{fontSize:10})},{module:"lively.ide/js/inspector/ui.cp.js","export":"SmallList",range:{start:1292,end:1343}},w.SmallList);
w.DarkDropDownList=w.component["for"](function(){return w.component(w.DarkButton,{defaultViewModel:w.DropDownListModel,name:"dark drop down list",submorphs:[{name:"label",fontSize:12}]})},{module:"lively.ide/js/inspector/ui.cp.js","export":"DarkDropDownList",range:{start:1432,end:1604}},w.DarkDropDownList);w.SystemInspector=w.component["for"](function(){return w.component({defaultViewModel:w.Inspector,name:"system inspector",extent:w.pt(365.9,502.7),fill:w.Color.transparent,layout:new w.GridLayout({autoAssign:!1,
grid:[["search bar"],["property tree"],["resizer"],["code editor"]],groups:{"search bar":{align:"topLeft",resize:!0},"property tree":{align:"topLeft",resize:!0},resizer:{align:"topLeft",resize:!0},"code editor":{align:"topLeft",resize:!0}},rows:[0,{fixed:30},1,{height:375},2,{fixed:0},3,{height:0}]}),submorphs:[{name:"search bar",fill:w.Color.rgba(0,0,0,0),layout:new w.GridLayout({autoAssign:!1,grid:[["search field","target picker","internals","unknowns"]],groups:{"search field":{align:"topLeft",
resize:!0},"target picker":{align:"topLeft",resize:!0},internals:{align:"topLeft",resize:!0},unknowns:{align:"topLeft",resize:!0}},columns:[0,{paddingLeft:5,paddingRight:2,width:100},1,{fixed:22},2,{fixed:80},3,{fixed:90,paddingRight:5}],rows:[0,{height:30,paddingBottom:3,paddingTop:3}]}),submorphs:[w.part(w.SearchField,{viewModel:{placeholder:"Search"},name:"search field"}),w.part(w.SystemButton,{viewModel:{label:{value:w.Icon.textAttribute("crosshairs")}},name:"target picker",borderRadius:20,padding:w.rect(2,
2,0,0),tooltip:"Change Inspection Target"}),w.part(w.LabeledCheckBox,{viewModel:{label:"internals"},name:"internals"}),w.part(w.LabeledCheckBox,{viewModel:{label:"unknowns"},name:"unknowns"})]},{type:w.PropertyTree,name:"property tree",readOnly:!0,borderColor:w.Color.rgb(204,204,204),borderWidth:1,clipMode:"hidden",draggable:!0,selectable:!0,fontFamily:'"IBM Plex Mono"',fontSize:14,treeData:{}},{type:w.Label,name:"terminal toggler",position:w.pt(7.3,572.6),isLayoutable:!1,extent:w.pt(27,19),borderRadius:5,
fill:w.Color.rgba(0,0,0,.5),fontColor:w.Color.rgb(255,255,255),fontSize:15,nativeCursor:"pointer",padding:w.rect(5,2,0,0),textAndAttributes:w.Icon.textAttribute("keyboard")},{name:"resizer",draggable:!0,fill:w.Color.rgb(230,230,230),nativeCursor:"ns-resize"},{type:w.Text,name:"code editor",borderColor:w.Color.rgb(204,204,204),borderWidth:1,clipMode:"auto",fixedHeight:!0,fixedWidth:!0,fontFamily:"IBM Plex Mono",lineWrapping:"by-chars",padding:w.rect(4,2,0,0)},w.part(w.DarkButton,{viewModel:{label:{value:"fix undeclared vars",
fontSize:12}},name:"fix import button",position:w.pt(221.4,570.8),isLayoutable:!1,extent:w.pt(136,22),visible:!1}),w.part(w.DarkDropDownList,{viewModel:{listAlign:"top",label:"this -> target",listMaster:w.SmallList,listOffset:w.pt(0,-5)},name:"this binding selector",position:w.pt(92.2,571.2),extent:w.pt(120,22),isLayoutable:!1,visible:!1})]})},{module:"lively.ide/js/inspector/ui.cp.js","export":"SystemInspector",range:{start:1842,end:5675}},w.SystemInspector);sf=w.DarkDropDownList;gd=w.SystemInspector;
var ma=w.InstructionWidget;w.DarkButton=Fb;w.DarkDropDownList=sf;w.SystemInspector=gd;w.InstructionWidget=ma;w.openInWindow=mf;var ua=Object.freeze({__proto__:null,DarkButton:Fb,DarkDropDownList:sf,SystemInspector:gd,InstructionWidget:ma,openInWindow:mf});bd("I",ua);bd("_",void 0)}}});