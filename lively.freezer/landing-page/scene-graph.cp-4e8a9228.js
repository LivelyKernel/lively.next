System.register("./__rootModule___commonjs-entry-51a55f66.js ./popups.cp-5b9fb681.js ./index-61952933.js @babel/plugin-syntax-import-meta ./list.cp-840d1cf8.js ./loading-indicator.cp-98e470a2.js ./tooltips.cp-3c41b378.js".split(" "),function(bd){var Dd,se,Rc,ad,Ne,Cb,Sd,ve,uc,dd,vd,Ed,fe,jc,Od,qb,ic,Wb,lc,db,Xa,Gb,sc,ub,sb,fa,Db,ab,eb,kc,Vb,pb;return{setters:[function(Nb){Dd=Nb.af;se=Nb.f;Rc=Nb.H;ad=Nb.e;Ne=Nb.M;Cb=Nb.C;Sd=Nb.a9;ve=Nb.r;uc=Nb.b;dd=Nb.aa;vd=Nb.aG;Ed=Nb.s;fe=Nb.v;jc=Nb.l;Od=Nb.ak;qb=
Nb.ay;ic=Nb.bC;Wb=Nb.i;lc=Nb.N;db=Nb.m;Xa=Nb._;Gb=Nb.c;sc=Nb.aD;ub=Nb.p;sb=Nb.ae;fa=Nb.T;Db=Nb.L;ab=Nb.d},function(Nb){eb=Nb.d},function(Nb){kc=Nb.c;Vb=Nb.T;pb=Nb.S},function(){},function(){},function(){},function(){}],execute:function(){var Nb=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/interactive-tree.js");Nb.Tree=kc;Nb.TreeData=Vb;Nb.morph=Dd;Nb.Icon=se;Nb.HorizontalLayout=Rc;Nb.easings=ad;Nb.Morph=Ne;Nb.Color=Cb;Nb.Rectangle=Sd;Nb.rect=ve;Nb.pt=uc;Nb.noUpdate=dd;Nb.signal=vd;
Nb.arr=Ed;Nb.obj=fe;Nb.fun=jc;Nb.tree=Od;Nb.getClassName=qb;Nb.TextLayout=ic;var zb=function(ka){var va=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/interactive-tree.js"),Fa=va.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof va.InteractiveTreeContainer?va.InteractiveTreeContainer:va.InteractiveTreeContainer=function(M){if(!M||!M[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Wb(Fa,ka,
[{key:"onChildRemoved",value:function(M){}},{key:"onChildAdded",value:function(M){}},{key:"toggleSelected",value:function(M){if(this.tree){var Aa=this.tree,wb=Aa.selectionFontColor,Na=Aa.nonSelectionFontColor;this.submorphs.filter(function(hb){return!hb._isControlElement&&hb.styleClasses.includes("Label")}).forEach(function(hb){hb.fontColor=M?wb:Na})}}},{key:"onGrab",value:function(M){var Aa=this.tree,wb=this.node;this.fill=Nb.Color.gray.withA(.5);this.fontColor=Aa.selectionFontColor;this.opacity=
.8;Wb._get(Object.getPrototypeOf(Fa.prototype),"onGrab",this).call(this,M);wb&&(this.toggleSelected(!1),Aa.collapse(wb),Aa.treeData.parentNode(wb).container.onChildRemoved(this),this._data=Aa.treeData.remove(wb),wb.container.target.remove(),Aa.update(!0))}},{key:"wantsToBeDroppedOn",value:function(M){this.showPreviewOn(M);return!0}},{key:"showPreviewOn",value:function(M){if(M.isContainer)var Aa=M.tree;M.isTree&&(Aa=M);Aa&&Aa.showDropPreviewFor&&Aa.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(){var M=
Xa(regeneratorRuntime.mark(function Na(wb){return regeneratorRuntime.wrap(function(hb){for(;;)switch(hb.prev=hb.next){case 0:return this.tree.treeData.add(wb._data,this.node,this.node.children[0]),this.tree.uncollapse(this.node),this.tree.treeData.remove(this.tree._previewNode),hb.next=5,this.tree.whenRendered();case 5:this.tree.update(!0),this.onChildAdded(wb);case 7:case "end":return hb.stop()}},Na,this)}));return function(wb){return M.apply(this,arguments)}}()},{key:"onBeingDroppedOn",value:function(M,
Aa){var wb=this;this.tree._dropInProgress=!0;Wb._get(Object.getPrototypeOf(Fa.prototype),"onBeingDroppedOn",this).call(this,M,Aa);M=function(){wb.fill=Nb.Color.gray.withA(.5);wb.opacity=1;wb.tree._dropInProgress=!1;wb.tree.refresh()};Aa.isTree?Aa.insertAtPlaceholder(this).then(M):Aa.isContainer?Aa.insertAsChild(this).then(M):M()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:Nb.Color.transparent},
isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var M=this,Aa=this.tree.treeData;return Aa&&Aa.asList().find(function(wb){return wb.container===M})}}}}}],va,{pathInPackage:function(){return"./studio/interactive-tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:455,end:2920})}(Nb.Morph);Nb.InteractiveTreeContainer=
zb;Nb.InteractiveTreeContainer=zb;zb=function(ka){var va=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/interactive-tree.js"),Fa=va.hasOwnProperty("InteractiveTreeData")&&"function"===typeof va.InteractiveTreeData?va.InteractiveTreeData:va.InteractiveTreeData=function(M){if(!M||!M[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Wb(Fa,ka,[{key:"display",value:function(M){M.container||(M.container=M.getContainer());
return[M.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(M){return M.isCollapsed}},{key:"collapse",value:function(M,Aa){M.isCollapsed=Aa}},{key:"getChildren",value:function(M){return M.isLeaf?null:this.filterActive?M.children.filter(function(Aa){return Aa&&Aa.visible}):M.children}},{key:"isLeaf",value:function(M){return 0==(this.getChildren(M)||[]).length}},{key:"add",value:function(M){var Aa=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.root,wb=2<arguments.length?
arguments[2]:void 0;Aa.children||(Aa.children=[]);wb?Nb.arr.pushAt(Aa.children,M,Aa.children.indexOf(wb)):Aa.children.push(M);Aa.isLeaf=!1}},{key:"replace",value:function(M,Aa){var wb=this.parentNode(M);M=wb.children.indexOf(M);wb.children[M]=Aa}},{key:"next",value:function(M){var Aa=this.parentNode(M);return Aa&&Aa.children[Aa.children.indexOf(M)+1]}},{key:"isBefore",value:function(M,Aa){this.next(M)===Aa}},{key:"isAfter",value:function(M,Aa){this.next(Aa)===M}},{key:"addBefore",value:function(M,
Aa){this.add(M,this.parentNode(Aa),Aa)}},{key:"addAfter",value:function(M,Aa){var wb=this.parentNode(Aa);Aa=wb.children.indexOf(Aa)+1;this.add(M,wb,wb.children[Aa])}},{key:"remove",value:function(M){var Aa=this.parentNode(M);if(Aa)return Nb.arr.remove(Aa.children,M),Aa.children==[]&&(Aa.children=null),M}},{key:"filter",value:function(){var M=Xa(regeneratorRuntime.mark(function Na(wb){var hb,Bb,ba=arguments;return regeneratorRuntime.wrap(function(dc){for(;;)switch(dc.prev=dc.next){case 0:return hb=
1<ba.length&&void 0!==ba[1]?ba[1]:1,dc.next=3,this.uncollapseAll(function(la,Fb){return Fb<hb+1});case 3:Bb=this.filterActive,this.filterActive=!1,this.asListWithIndexAndDepth(!1).reverse().forEach(function(la){var Fb=la.node;if(0==la.depth)return Fb.visible=!0;Fb.visible=wb(Fb);!Fb.isCollapsed&&Fb.children.find(function(vb){return vb.visible})?(Fb.visible=!0,Fb.container.opacity=.5):Fb.container.opacity=1;return Fb.visible}),this.filterActive=Bb;case 7:case "end":return dc.stop()}},Na,this)}));return function(wb){return M.apply(this,
arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],va,{pathInPackage:function(){return"./studio/interactive-tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2928,end:5432})}(Nb.TreeData);Nb.InteractiveTreeData=zb;Nb.InteractiveTreeData=zb;var rb=function(ka){var va=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/interactive-tree.js"),
Fa=va.hasOwnProperty("InteractiveTree")&&"function"===typeof va.InteractiveTree?va.InteractiveTree:va.InteractiveTree=function(M){if(!M||!M[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Wb(Fa,ka,[{key:"update",value:function(M){var Aa=this;Wb._get(Object.getPrototypeOf(Fa.prototype),"update",this).call(this,M);this.treeData&&this.relayoutContainers();M&&this.embeddedMorphs.forEach(function(wb){wb.isContainer&&(Nb.obj.equals(wb.fill,
Nb.Color.transparent)||(wb.fill=Nb.Color.transparent),wb.fontFamily!=Aa.fontFamily&&(wb.fontFamily=Aa.fontFamily),wb.fontSize!=Aa.fontSize&&(wb.fontSize=Aa.fontSize))})}},{key:"onDrop",value:function(M){Wb._get(Object.getPrototypeOf(Fa.prototype),"onDrop",this).call(this,M);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(M){}},{key:"onDropHoverUpdate",value:function(M){}},{key:"onDropHoverOut",value:function(M){}},{key:"onHoverOut",value:function(){var M=
Xa(regeneratorRuntime.mark(function Na(wb){return regeneratorRuntime.wrap(function(hb){for(;;)switch(hb.prev=hb.next){case 0:Wb._get(Object.getPrototypeOf(Fa.prototype),"onHoverOut",this).call(this,wb),this._previewNode&&this._previewNode.container.world()&&this.treeData.remove(this._previewNode),this.resetContainerSelection(),this.update(!0);case 4:case "end":return hb.stop()}},Na,this)}));return function(wb){return M.apply(this,arguments)}}()},{key:"insertAtPlaceholder",value:function(){var M=Xa(regeneratorRuntime.mark(function Na(wb){var hb;
return regeneratorRuntime.wrap(function(Bb){for(;;)switch(Bb.prev=Bb.next){case 0:return hb=this.treeData.parentNode(this._previewNode),this.treeData.replace(this._previewNode,wb._data),this.treeData.remove(this._previewNode),Bb.next=5,this.whenRendered();case 5:if(this.update(!0),hb.container)hb.container.onChildAdded(wb);case 7:case "end":return Bb.stop()}},Na,this)}));return function(wb){return M.apply(this,arguments)}}()},{key:"scrollUpSlowly",value:function(){var M=this;if(!this._scrollingUp){this._scrollingUp=
!0;var Aa=function(){var wb=Xa(regeneratorRuntime.mark(function hb(){return regeneratorRuntime.wrap(function(Bb){for(;;)switch(Bb.prev=Bb.next){case 0:if(!(M._scrollingUp&&0<M.scroll.y)){Bb.next=6;break}Bb.next=3;return M.animate({scroll:M.scroll.subXY(0,30),duration:300,easing:Nb.easings.linear});case 3:Aa();Bb.next=7;break;case 6:M._scrollingUp=!1;case 7:case "end":return Bb.stop()}},hb)}));return function(){return wb.apply(this,arguments)}}();Aa()}}},{key:"scrollDownSlowly",value:function(){var M=
this;if(!this._scrollingDown){this._scrollingDown=!0;var Aa=function(){var wb=Xa(regeneratorRuntime.mark(function hb(){return regeneratorRuntime.wrap(function(Bb){for(;;)switch(Bb.prev=Bb.next){case 0:if(!(M._scrollingDown&&M.scroll.y<M.scrollExtent.y-M.height)){Bb.next=6;break}Bb.next=3;return M.animate({scroll:M.scroll.addXY(0,30),duration:300,easing:Nb.easings.linear});case 3:Aa();Bb.next=7;break;case 6:M._scrollingDown=!1;case 7:case "end":return Bb.stop()}},hb)}));return function(){return wb.apply(this,
arguments)}}();Aa()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(M){M.isContainer&&(M.fill=Nb.Color.transparent)})}},{key:"showDropPreviewFor",value:function(M){var Aa=this;M=this.localize(M.globalBounds().center());var wb=this.textPositionFromPoint(M),Na=this.treeData.asListWithIndexAndDepth(function(Fb){Fb=Fb.node;return Fb!=Aa._previewNode&&Fb.container&&Fb.container.world()}),
hb=(Na.find(function(Fb){return Fb.i-1===wb.row})||{}).node,Bb=hb&&hb.container,ba=this.ensurePlaceholder(),dc=!!ba.container.world(),la=M.subPt(this.scroll).subPt(this.scrollbarOffset);10>la.y?this.scrollUpSlowly():la.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Bb){if(Na.length>wb.row||Nb.arr.last(this.treeData.root.children)===ba)return;this.treeData.remove(ba);this.treeData.add(ba);this.update(!0)}if(Bb){Na=this.textLayout.boundsFor(this,
wb);if(4>Math.abs(Na.top()-M.y)){if(this.treeData.isBefore(ba,hb))return;this.treeData.remove(ba);this.treeData.addBefore(ba,hb)}else if(4>Math.abs(Na.bottom()-M.y)&&(hb.isCollapsed||this.treeData.isLeaf(hb))){if(this.treeData.isAfter(ba,hb))return;this.treeData.remove(ba);this.treeData.addAfter(ba,hb)}else{Bb.fill=Nb.Color.gray.withA(.5);if(!dc)return;this.treeData.remove(ba)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var M=Nb.pt(this.width-100,this.document.getLine(0).height);
this._previewNode||(this._previewNode={container:Nb.morph({acceptsDrops:!1,reactsToPointer:!1,fill:Nb.Color.gray.withA(.5),borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=M;return this._previewNode}},{key:"relayoutContainers",value:function(){this.selectedIndex;var M=lc(this.treeData.asListWithIndexAndDepth()),Aa;try{for(M.s();!(Aa=M.n()).done;){var wb=Aa.value,Na=wb.node;if(Na.container&&this.isLineVisible(wb.i)){Na.container.nativeCursor="grab";var hb=this.width-Na.container.left-
25;Na.container.width!=hb&&(Na.container.width=hb)}}}catch(Bb){M.e(Bb)}finally{M.f()}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InteractiveTree"}}],va,{pathInPackage:function(){return"./studio/interactive-tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5440,end:10967})}(Nb.Tree);Nb.InteractiveTree=
rb;Nb.InteractiveTree=rb;(function(ka){var va=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/interactive-tree.js"),Fa=va.hasOwnProperty("SceneGraphTreeLayout")&&"function"===typeof va.SceneGraphTreeLayout?va.SceneGraphTreeLayout:va.SceneGraphTreeLayout=function(M){if(!M||!M[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Wb(Fa,ka,[{key:"estimateExtentOfLine",value:function(M,Aa){2<arguments.length&&void 0!==
arguments[2]?arguments[2]:M.getGlobalTransform();var wb=Aa.textAndAttributes.find(function(Na){return Na.isMorph});wb&&Aa.changeExtent(M.width,wb.height)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"SceneGraphTreeLayout"}}],va,{pathInPackage:function(){return"./studio/interactive-tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:10969,end:11252})})(Nb.TextLayout);rb=function(ka){var va=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/interactive-tree.js"),Fa=va.hasOwnProperty("SceneGraphTree")&&"function"===typeof va.SceneGraphTree?va.SceneGraphTree:va.SceneGraphTree=function(M){if(!M||!M[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Wb(Fa,ka,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},
{key:"selectMorphInTarget",value:function(M){var Aa=this,wb=this.treeData.asList().find(function(Na){return Na.container&&Na.container.target===M});wb&&this.selectedNode!=wb&&this.selectPath(this.treeData.pathOf(wb));wb||(this.refresh(),this.treeData.followPath([M].concat(db(M.ownerChain())).reverse(),function(Na,hb){hb.container||(hb.container=hb.getContainer());if(hb.container)return hb.container.target==Na}).then(function(Na){Na&&(Aa.selectedNode=Na)}))}},{key:"onLoad",value:function(){var M=Xa(regeneratorRuntime.mark(function wb(){return regeneratorRuntime.wrap(function(Na){for(;;)switch(Na.prev=
Na.next){case 0:return this.textLayout=new Nb.SceneGraphTreeLayout(this),Na.next=3,this.whenRendered();case 3:if(!this.ownerChain().find(function(hb){return hb.isComponent})){Na.next=5;break}return Na.abrupt("return");case 5:this.submorphs=[];case 6:case "end":return Na.stop()}},wb,this)}));return function(){return M.apply(this,arguments)}}()},{key:"adjustProportions",value:function(M){M=(M?M.state.dragDelta:{y:0}).y;var Aa=this.get("inspector"),wb=this.get("scene graph resizer"),Na=this.get("mode selector"),
hb=this.get("connections tree");this.height+=M;Aa.height-=M;hb.height-=M;wb.top=this.bottom;wb.left=0;Na.top=wb.bottom;hb.top=Aa.top=Na.bottom+5}},{key:"reset",value:function(){var M=this;this.treeData=new Nb.InteractiveTreeData({children:[],container:Nb.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(Aa){return null==Aa.id}).forEach(function(Aa){return M.removeAnchor(Aa)})}},{key:"setTarget",value:function(){var M=Xa(regeneratorRuntime.mark(function Na(wb){return regeneratorRuntime.wrap(function(hb){for(;;)switch(hb.prev=
hb.next){case 0:return this.target=wb,this.treeData=this.getTreeFromSubmorphHierarchy(wb),hb.next=4,this.uncollapse(this.treeData.root);case 4:this.refresh();case 5:case "end":return hb.stop()}},Na,this)}));return function(wb){return M.apply(this,arguments)}}()},{key:"isNodeOutOfSync",value:function(M){var Aa=this;if(M===this._previewNode)return!1;if(this.treeData.root==M)return this.treeData.root.children.length!=this.target.submorphs.filter(function(Na){return!Aa.ignoreMorph(Na)}).length;if(M.container.nameNeedsUpdate)return!0;
var wb=M.container.target.submorphs.filter(function(Na){return!Aa.ignoreMorph(Na)});return wb.length!=M.children.length||wb.map(function(Na){return Na.name}).join("")!=M.children.map(function(Na){return Na.target?Na.target.name:""}).join("")?!0:!1}},{key:"getTarget",value:function(M){return M==this.treeData.root?this.target:M.container.target}},{key:"getNewChildren",value:function(M){var Aa=this,wb=this.getTarget(M).submorphs.map(function(ba){return ba.__scene_graph_target__?ba.__scene_graph_target__():
ba}).filter(function(ba){return!Aa.ignoreMorph(ba)}),Na=[],hb=function(ba){var dc=wb[ba],la=Nb.arr.without(M.children,Aa._previewNode).find(function(Fb){return Fb.container&&Fb.container.target.id==dc.id});Na[ba]=la?la:Aa.readMorphHierarchy(dc)},Bb;for(Bb in wb)hb(Bb);return Na}},{key:"refresh",value:function(){var M=this;if(!this._updating&&!this._dropInProgress){var Aa=!1,wb=this.treeData.root;Nb.tree.prewalk(wb,function(Na){Na==wb&&M.isNodeOutOfSync(Na)&&(Na.children=M.getNewChildren(Na));Na.container&&
M.isNodeOutOfSync(Na)&&(Aa=!0,Na.name=Na.container.target.name,Na.container.refresh(),Na.children=M.getNewChildren(Na))},function(Na){return Na.children});this.update(Aa)}}},{key:"ignoreMorph",value:function(M){return M.isMorph?M.isContainer||M.isWindow||M.getWindow()||M.isEpiMorph||M.isHand||M.isHaloItem||M.isCommentIndicator||["lively.halos"].includes(M.constructor[Symbol["for"]("lively-module-meta")]["package"].name)||["Menu"].includes(M.constructor.name):!1}},{key:"onDropHoverOut",value:function(M){var Aa=
M.hand.grabbedMorphs[0];M=M.hand.findDropTarget();if(!(M===this||M&&M.ownerChain().includes(this))&&Aa&&Aa.isContainer)Aa.onDragOutside()}},{key:"onDropHoverIn",value:function(M){var Aa=M.hand.grabbedMorphs[0];Aa&&!Aa.isContainer&&($world.halos().forEach(function(wb){return wb.remove()}),Aa.remove(),Object.assign(Aa,M.hand._grabbedMorphProperties.get(Aa).pointerAndShadow),Aa=this.renderContainerFor(Aa,!1),M.hand.grab(Aa),Aa.leftCenter=Nb.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(M){return new Nb.InteractiveTreeData(this.readMorphHierarchy(M))}},
{key:"readMorphHierarchy",value:function(M){var Aa=this;return Nb.tree.mapTree(M,function(wb,Na){Na={name:wb.name,isCollapsed:!0,getContainer:function(){return Aa.renderContainerFor(wb)},visible:!0,children:Na};wb.isWorld&&(Na.container=Na.getContainer());return Na},function(wb){return wb.submorphs.filter(function(Na){return wb.isWorld?!Aa.ignoreMorph(Na):!0})})}},{key:"renderContainerFor",value:function(){var M=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Nb.morph({name:"root"}),Aa=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:!0,wb=new Nb.MorphContainer({tree:this,fill:Aa?Nb.Color.transparent:Nb.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:M,opacity:M.visible?1:.5});Aa||(wb.layout=new Nb.HorizontalLayout({spacing:2,align:"center"}));M._data?(wb._data=M._data,M._data.container=wb):wb._data={name:M.name,isCollapsed:!0,container:wb,children:[]};wb.whenRendered().then(function(){return wb.refresh()});return wb}},{key:"collapseAll",value:function(){var M=
this;this.treeData.asList().forEach(function(Aa){return Aa!=M.treeData.root?Aa.isCollapsed=!0:Aa.isCollapsed=!1})}},{key:"filterMorphs",value:function(){var M=Xa(regeneratorRuntime.mark(function Na(wb){var hb=this,Bb;return regeneratorRuntime.wrap(function(ba){for(;;)switch(ba.prev=ba.next){case 0:return Bb=wb.tokens[0],this.treeData.filterActive||this._collapseState||(this._collapseState=new WeakMap(this.treeData.asList().map(function(dc){return[dc,dc.isCollapsed]}))),this.treeData.filterActive=
!!Bb,ba.next=5,this.treeData.filter(function(dc){var la=!!Bb&&dc.name.includes(Bb);dc.container||(dc.container=dc.getContainer());la?dc.container.highlightTerm(Bb):dc.container.highlightTerm();return la},3);case 5:this.treeData.filterActive||(this.treeData.asList().forEach(function(dc){dc.container&&dc.container.highlightTerm();dc.visible=!0;dc.isCollapsed=hb._collapseState.has(dc)?hb._collapseState.get(dc):!0}),this._collapseState=null),this.refresh();case 7:case "end":return ba.stop()}},Na,this)}));
return function(wb){return M.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1},textLayout:{initialize:function(){this.textLayout=new Nb.SceneGraphTreeLayout(this)}}}}}],va,{pathInPackage:function(){return"./studio/interactive-tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:11261,end:19283})}(Nb.InteractiveTree);Nb.SceneGraphTree=rb;Nb.SceneGraphTree=rb;var Ib=function(ka){var va=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/interactive-tree.js"),Fa=va.hasOwnProperty("MorphContainer")&&"function"===typeof va.MorphContainer?va.MorphContainer:va.MorphContainer=function(M){if(!M||!M[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Wb(Fa,ka,[{key:"refresh",value:function(){var M=Xa(regeneratorRuntime.mark(function wb(){var Na,hb;return regeneratorRuntime.wrap(function(Bb){for(;;)switch(Bb.prev=Bb.next){case 0:if(Na=this.target){Bb.next=3;break}return Bb.abrupt("return");case 3:this.reactsToPointer=!0,this.dropShadow=!1,this.submorphs=[this.getLabel(),0<Na.comments.length&&this.getCommentControls(),Na.layout&&this.getLayoutControls(),this.getConnectionControls()].filter(Boolean).map(function(ba,dc){ba.fitIfNeeded();
ba.left=hb?hb.right+5:0;ba.top=2;return hb=ba}),this.height=20,this.opacity=Na.visible?1:.5;case 8:case "end":return Bb.stop()}},wb,this)}));return function(){return M.apply(this,arguments)}}()},{key:"applyLayoutIfNeeded",value:function(){}},{key:"getLabel",value:function(){var M=this.getSubmorphNamed("name label")||Nb.morph({type:"label",name:"name label",reactsToPointer:!1,padding:Nb.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),Aa=M.textString.slice(2,-1);Aa&&Aa==this.target.name||
(M.value=[].concat(db(this.getIcon(this.target)),[" "+this.target.name+" "]));return M}},{key:"getIcon",value:function(M){return Nb.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[Nb.getClassName(M)]||"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var M=this.getSubmorphNamed("layout label")||Nb.morph({type:"label",
name:"layout label",borderRadius:3,acceptsDrops:!1,padding:Nb.Rectangle.inset(4,2,4,2),fill:Nb.Color.orange,fontColor:Nb.Color.white});M._isControlElement=!0;M.textString!=this.target.layout.name()&&(M.value=this.target.layout.name());return M}},{key:"getCommentControls",value:function(){var M=this.getSubmorphNamed("comment label")||Nb.morph({type:"label",name:"comment label",tooltip:"Open comment browser to browse all comments",borderRadius:3,acceptsDrops:!1,padding:Nb.Rectangle.inset(4,2,4,2),fill:Nb.Color.rgb(241,
196,15),fontColor:Nb.Color.black});M._isControlElement=!0;var Aa="".concat(this.target.comments.length," comment").concat(1==this.target.comments.length?"":"s");M.textString!=Aa&&(M.value=Aa);return M}},{key:"getConnectionControls",value:function(){this.connectionCount=this.target.attributeConnections?this.target.attributeConnections.filter(function(wb){return!wb.targetObj.isHalo}).length:0;var M=this.getSubmorphNamed("connections label")||Nb.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",
padding:Nb.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:Nb.Color.red,fontColor:Nb.Color.white});M._isControlElement=!0;M.visible=!this.connectionHalo&&!!this.connectionCount;var Aa=this.connectionCount?"".concat(this.connectionCount," connection").concat(1<this.connectionCount?"s":""):"Manage Connections";M.textString!=Aa&&(M.value=Aa);return M}},{key:"highlightTerm",value:function(M){var Aa=this.submorphs[0],wb=Aa.textAndAttributes.slice(0,2),Na=Aa.textString.slice(1).split(M);1===Na.length?
Aa.textAndAttributes=[].concat(db(wb),[Na[0]]):(Aa.textAndAttributes=[].concat(db(wb),db(Nb.arr.interpose(Na.map(function(hb){return[hb,{}]}),[M,{fontWeight:"900"}]).flat())),Aa.whenRendered().then(function(){Aa.fitIfNeeded()}))}},{key:"getClassControls",value:function(){}},{key:"wantsToBeDroppedOn",value:function(M){var Aa=Wb._get(Object.getPrototypeOf(Fa.prototype),"wantsToBeDroppedOn",this).call(this,M);if(![M].concat(db(M.ownerChain())).includes(this.tree))this.onDragOutside();return Aa}},{key:"onGrab",
value:function(){var M=Xa(regeneratorRuntime.mark(function Na(wb){var hb;return regeneratorRuntime.wrap(function(Bb){for(;;)switch(Bb.prev=Bb.next){case 0:return this.tree._dropInProgress=!0,hb=this.target.globalPosition,Wb._get(Object.getPrototypeOf(Fa.prototype),"onGrab",this).call(this,wb),this._data.globalTargetPosition=hb,Bb.next=6,this.whenRendered();case 6:if(this.tree.fullContainsWorldPoint(this.globalPosition))this.leftCenter=Nb.pt(-20,0);else this.onDragOutside();this.tree._dropInProgress=
!1;case 8:case "end":return Bb.stop()}},Na,this)}));return function(wb){return M.apply(this,arguments)}}()},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=Nb.fun.createQueue("container-hover-queue",function(){var M=Xa(regeneratorRuntime.mark(function hb(wb,Na){var Bb,ba,dc;return regeneratorRuntime.wrap(function(la){for(;;)switch(la.prev=la.next){case 0:return Bb=wb.target,ba=Bb.opacity,dc=Bb.scale,wb.target.opacity=0,wb.target.scale=.5,
$world.halos().forEach(function(Fb){return Fb.remove()}),$world.firstHand.grab(wb.target),wb.target._data=wb._data,wb.remove(),wb.target.position=Nb.pt(0,0),la.next=10,wb.target.animate({opacity:ba,scale:dc,duration:200});case 10:Na();case 11:case "end":return la.stop()}},hb)}));return function(wb,Na){return M.apply(this,arguments)}}())),this.queue.push(this))}},{key:"onChildAdded",value:function(M){var Aa=this.node.children.indexOf(M.node||M._data)+1;Aa=this.node.children[Aa];M.target.remove();Aa?
(Aa=this.target.submorphs.indexOf(Aa.container.target),this.target.addMorphAt(M.target,Aa)):this.target.addMorph(M.target);M._data.globalTargetPosition&&(M.target.position=this.target.localize(M._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(M){}},{key:"toggleConnectionControl",value:function(M){this.getSubmorphNamed("connections label").visible=M}},{key:"toggleSelected",value:function(){var M=Xa(regeneratorRuntime.mark(function Na(wb){var hb=this,Bb,ba,dc;return regeneratorRuntime.wrap(function(la){for(;;)switch(la.prev=
la.next){case 0:if(this._active!==wb){la.next=2;break}return la.abrupt("return");case 2:this._active=wb;Wb._get(Object.getPrototypeOf(Fa.prototype),"toggleSelected",this).call(this,wb);if(!(wb&&this.target&&this.target.isMorph&&this.world())){la.next=30;break}la.next=7;return this.target.whenRendered();case 7:this.get("inspector").targetObject=this.target;this.get("connections tree").inspectConnectionsOf(this.target);if(!this.connectionHalo){la.next=11;break}return la.abrupt("return");case 11:Bb=
lc(this.world().halos()),la.prev=12,Bb.s();case 14:if((ba=Bb.n()).done){la.next=21;break}dc=ba.value;if(dc.target!==this.target){la.next=18;break}return la.abrupt("return");case 18:dc.remove();case 19:la.next=14;break;case 21:la.next=26;break;case 23:la.prev=23,la.t0=la["catch"](12),Bb.e(la.t0);case 26:return la.prev=26,Bb.f(),la.finish(26);case 29:Nb.noUpdate({sourceObj:this.world(),targetObj:this.sideBar,sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return hb.world().showHaloFor(hb.target)});
case 30:case "end":return la.stop()}},Na,this,[[12,23,26,29]])}));return function(wb){return M.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(M){this.submorphs[0].fontFamily=M}},fontColor:{after:["submorphs"],derived:!0,set:function(M){this.submorphs[0].fontColor=M}},fontSize:{derived:!0,set:function(M){this.submorphs[0].fontSize=M}},target:{serialize:!1},
dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],va,{pathInPackage:function(){return"./studio/interactive-tree.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:19291,end:27859})}(Nb.InteractiveTreeContainer);Nb.MorphContainer=Ib;Nb.MorphContainer=Ib;var da=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/scene-graph.cp.js");da.component=Gb;da.ViewModel=sc;da.part=ub;da.easings=ad;da.touchInputDevice=sb;da.Icon=se;da.morph=Dd;da.TilingLayout=
fa;da.pt=uc;da.Color=Cb;da.rect=ve;da.Label=Db;da.PropLabel=eb;da.SceneGraphTree=rb;da.InteractiveTreeData=zb;da.SearchField=pb;da.getClassName=qb;da.arr=Ed;da.fun=jc;da.connect=ab;zb=bd("MorphPanelModel",function(ka){var va=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/scene-graph.cp.js"),Fa=va.hasOwnProperty("MorphPanelModel")&&"function"===typeof va.MorphPanelModel?va.MorphPanelModel:va.MorphPanelModel=function(M){if(!M||!M[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Wb(Fa,ka,[{key:"showHaloFor",value:function(M){M&&(this.world().halos().forEach(function(Aa){return Aa.remove()}),this.world().showHaloFor(M.container.viewModel.target))}},{key:"relayout",value:function(){this.onWorldResize()}},{key:"attachToWorld",value:function(M){da.connect(M,"onChange",this,"onHierarchyChange",{garbageCollect:!0});da.connect(M,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});da.connect(M,"showHaloFor",this,"selectNode",{garbageCollect:!0});this.reset(M)}},
{key:"reset",value:function(M){this.ui.sceneGraph.setTarget(M)}},{key:"selectNode",value:function(M){Array.isArray(M)&&1===M.length&&(M=M[0]);M.isMorph&&this.ui.sceneGraph.selectMorphInTarget(M)}},{key:"clearFocus",value:function(){this.ui.sceneGraph.clearSelection()}},{key:"onHierarchyChange",value:function(M){if("addMorphAt"===M.selector||"removeMorph"===M.selector||"name"===M.prop){var Aa=this.ui.sceneGraph;!Aa||!Aa.owner.visible||M.target&&M.target.isHand||M.target&&Aa.ignoreMorph(M.target)||
M.args&&!M.args[0].isHalo&&Aa.ignoreMorph(M.args[0])||M.target.ownerChain().find(function(wb){return Aa.ignoreMorph(wb)})||da.fun.debounceNamed("scene-graph-update",50,function(){return Aa.refresh()})()}}},{key:"detachFromWorld",value:function(M){var Aa=this;M.attributeConnections.forEach(function(wb){wb.targetObj===Aa&&wb.disconnect()})}},{key:"onWorldResize",value:function(){var M=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,Aa=this.view,wb=$world.visibleBounds(),Na=navigator.standalone&&
da.touchInputDevice?25:0;Aa.height=wb.height-Na;Aa.top=Na+wb.top();M&&(Aa.visible?Aa.topLeft=wb.topLeft():Aa.topRight=wb.topLeft())}},{key:"toggle",value:function(){var M=Xa(regeneratorRuntime.mark(function Na(wb){var hb,Bb,ba;return regeneratorRuntime.wrap(function(dc){for(;;)switch(dc.prev=dc.next){case 0:hb=this.view;Bb=$world.visibleBounds();ba=$world.get("lively version checker");this.onWorldResize(!1);if(!wb){dc.next=12;break}$world.withTopBarDo(function(la){hb.opacity=0;$world.addMorph(hb,
la.view)});hb.topRight=Bb.topLeft();hb.withAnimationDo(function(){hb.opacity=1;hb.topLeft=Bb.topLeft();ba&&ba.relayout()},{duration:300,easing:da.easings.outCirc});this.attachToWorld($world);this.ui.sceneGraph.refresh();dc.next=16;break;case 12:return this.detachFromWorld($world),dc.next=15,hb.withAnimationDo(function(){hb.opacity=0;hb.topRight=Bb.topLeft();ba&&ba.relayout()},{duration:300});case 15:hb.remove();case 16:case "end":return dc.stop()}},Na,this)}));return function(wb){return M.apply(this,
arguments)}}()},{key:"resize",value:function(M,Aa){this.view.width+=Aa.state.dragDelta.x;this.ui.sceneGraph.refresh()}},{key:"filterMorphs",value:function(M){this.ui.sceneGraph.filterMorphs(M)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MorphPanelModel"}},{key:"properties",get:function(){return{expose:{get:function(){return["toggle","onWorldResize","relayout","clearFocus","reset"]}},bindings:{get:function(){return[{target:"scene graph",signal:"selectedNode",handler:"showHaloFor"},
{model:"search field",signal:"searchInput",handler:"filterMorphs"},{signal:"onDrag",handler:"resize",override:!0}]}}}}}],va,{pathInPackage:function(){return"./studio/scene-graph.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:645,end:4592})}(da.ViewModel));da.MorphPanelModel=zb;da.MorphPanelModel=zb;zb=bd("NewSceneGraphTree",
function(ka){var va=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/scene-graph.cp.js"),Fa=va.hasOwnProperty("NewSceneGraphTree")&&"function"===typeof va.NewSceneGraphTree?va.NewSceneGraphTree:va.NewSceneGraphTree=function(M){if(!M||!M[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Wb(Fa,ka,[{key:"renderContainerFor",value:function(){var M=0<arguments.length&&void 0!==arguments[0]?arguments[0]:da.morph({name:"root"}),
Aa=da.part(da.MorphNode,{width:this.width,viewModel:{tree:this,target:M}});M._data?(Aa._data=M._data,M._data.container=Aa):Aa._data={name:M.name,isCollapsed:!0,container:Aa,children:[]};Aa.refresh();return Aa}},{key:"clearSelection",value:function(){this.selectedNode=null}},{key:"onHoverOut",value:function(M){Wb._get(Object.getPrototypeOf(Fa.prototype),"onHoverOut",this).call(this,M);this.highlightLineAtCursor(M,{background:da.Color.transparent,borderColor:"#B2EBF2",borderWidth:"0px",borderStyle:"solid"})}},
{key:"highlightLineAtCursor",value:function(M,Aa){M=this.textPositionFromPoint(M.positionIn(this));this.removeMarker("hovered node");M=this.lineRange(M.row,!0);M.start.column=0;this.textAndAttributesInRange(M).find(function(wb){return wb&&wb.isMorph})&&this.addMarker({id:"hovered node",range:M,style:Aa})}},{key:"onMouseMove",value:function(M){Wb._get(Object.getPrototypeOf(Fa.prototype),"onMouseMove",this).call(this,M);this.highlightLineAtCursor(M,{background:da.Color.transparent,transform:"translateY(-6px)",
borderColor:"#B2EBF2",borderWidth:"1px",borderStyle:"solid"})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"NewSceneGraphTree"}}],va,{pathInPackage:function(){return"./studio/scene-graph.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4600,end:6321})}(da.SceneGraphTree));da.NewSceneGraphTree=zb;da.NewSceneGraphTree=
zb;zb=bd("MorphNodeModel",function(ka){var va=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/scene-graph.cp.js"),Fa=va.hasOwnProperty("MorphNodeModel")&&"function"===typeof va.MorphNodeModel?va.MorphNodeModel:va.MorphNodeModel=function(M){if(!M||!M[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Wb(Fa,ka,[{key:"onContextMenu",value:function(M){this.target.onContextMenu({targetMorph:this.target,stop:function(){}})}},
{key:"toggleVisibility",value:function(){this.target.visible=!this.target.visible;this.refresh()}},{key:"showControls",value:function(){this.ui.visibilityIcon.visible=!0}},{key:"hideControls",value:function(){this.ui.visibilityIcon.visible=!this.target.visible}},{key:"startRenaming",value:function(){var M=this.ui,Aa=M.nameInput;M.nameLabel.visible=!1;Aa.visible=!0;Aa.focus()}},{key:"finishRenaming",value:function(){var M=this.ui,Aa=M.nameInput;M.nameLabel.visible=!0;Aa.visible=!1;this.target.name=
Aa.textString;this.refresh()}},{key:"refresh",value:function(){var M=Xa(regeneratorRuntime.mark(function wb(){var Na,hb,Bb,ba,dc,la;return regeneratorRuntime.wrap(function(Fb){for(;;)switch(Fb.prev=Fb.next){case 0:if(Na=this.target){Fb.next=3;break}return Fb.abrupt("return");case 3:hb=this.ui,Bb=hb.morphIcon,ba=hb.layoutIndicator,dc=hb.nameLabel,la=hb.visibilityIcon,Bb.value=this.getIcon(Na),ba.visible=!1,Na.layout&&"TilingLayout"===Na.layout.name()&&(ba.visible=!0,ba.rotation="column"===Na.layout.axis?
Math.PI/2:0),dc.textString=Na.name,la.value=[Na.visible?"\ue8f4":"\ue8f5",{fontSize:16,textStyleClasses:["material-icons"]}];case 9:case "end":return Fb.stop()}},wb,this)}));return function(){return M.apply(this,arguments)}}()},{key:"applyLayoutIfNeeded",value:function(){}},{key:"getIcon",value:function(M){return da.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[da.getClassName(M)]||
"codepen",{paddingTop:"0px",fontSize:this.tree.fontSize-2,opacity:1})}},{key:"highlightTerm",value:function(M){var Aa=this.ui.nameLabel,wb=Aa.textString.split(M);Aa.textAndAttributes=1===wb.length?[wb[0]]:db(da.arr.interpose(wb.map(function(Na){return[Na,{}]}),[M,{fontWeight:"900"}]).flat())}},{key:"showPreviewOn",value:function(M){if(M.isContainer)var Aa=M.tree;M.isTree&&(Aa=M);Aa&&Aa.showDropPreviewFor&&Aa.showDropPreviewFor(this.view)}},{key:"wantsToBeDroppedOn",value:function($super,Aa){var wb=
$super(Aa);this.showPreviewOn(Aa);if(![Aa].concat(db(Aa.ownerChain())).includes(this.tree))this.onDragOutside();return wb}},{key:"onGrab",value:function(){var M=Xa(regeneratorRuntime.mark(function hb(wb,Na){var Bb,ba,dc,la;return regeneratorRuntime.wrap(function(Fb){for(;;)switch(Fb.prev=Fb.next){case 0:Bb=this.view;ba=this.tree;dc=this.node;ba._dropInProgress=!0;la=this.target.globalPosition;wb(Na);if(dc){Fb.next=6;break}return Fb.abrupt("return");case 6:return ba.collapse(dc),ba.treeData.parentNode(dc).container.onChildRemoved(this),
this._data=ba.treeData.remove(dc),dc.container.target.remove(),ba.update(!0),this._data.globalTargetPosition=la,Fb.next=14,Bb.whenRendered();case 14:if(ba.fullContainsWorldPoint(Bb.globalPosition))Bb.leftCenter=da.pt(-20,0);else this.onDragOutside();this.tree._dropInProgress=!1;case 16:case "end":return Fb.stop()}},hb,this)}));return function(wb,Na){return M.apply(this,arguments)}}()},{key:"onDragOutside",value:function(){this.queue||(this.queue=da.fun.createQueue("container-hover-queue",function(){var M=
Xa(regeneratorRuntime.mark(function hb(wb,Na){var Bb,ba,dc;return regeneratorRuntime.wrap(function(la){for(;;)switch(la.prev=la.next){case 0:return Bb=wb.target,ba=Bb.opacity,dc=Bb.scale,wb.target.opacity=0,wb.target.scale=.5,$world.halos().forEach(function(Fb){return Fb.remove()}),$world.firstHand.grab(wb.target),wb.target._data=wb._data,wb.remove(),wb.target.position=da.pt(0,0),la.next=10,wb.target.animate({opacity:ba,scale:dc,duration:200});case 10:Na();case 11:case "end":return la.stop()}},hb)}));
return function(wb,Na){return M.apply(this,arguments)}}()));this.queue.push(this.view)}},{key:"onChildAdded",value:function(M){var Aa=this.node.children.indexOf(M.node||M._data)+1;Aa=this.node.children[Aa];M.target.remove();Aa?(Aa=this.target.submorphs.indexOf(Aa.container.target),this.target.addMorphAt(M.target,Aa)):this.target.addMorph(M.target);M._data.globalTargetPosition&&(M.target.position=this.target.localize(M._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(M){}},{key:"insertAsChild",
value:function(){var M=Xa(regeneratorRuntime.mark(function Na(wb){return regeneratorRuntime.wrap(function(hb){for(;;)switch(hb.prev=hb.next){case 0:return this.tree.treeData.add(wb._data,this.node,this.node.children[0]),this.tree.uncollapse(this.node),this.tree.treeData.remove(this.tree._previewNode),hb.next=5,this.tree.whenRendered();case 5:this.tree.update(!0),this.onChildAdded(wb);case 7:case "end":return hb.stop()}},Na,this)}));return function(wb){return M.apply(this,arguments)}}()},{key:"onBeingDroppedOn",
value:function($super,Aa,wb){var Na=this,hb=this.view;this.tree._dropInProgress=!0;$super(Aa,wb);Aa=function(){hb.fill=da.Color.gray.withA(.5);hb.opacity=1;Na.tree._dropInProgress=!1;Na.tree.refresh()};wb.isTree?wb.insertAtPlaceholder(this.view).then(Aa):wb.isContainer?wb.insertAsChild(this).then(Aa):Aa()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MorphNodeModel"}},{key:"properties",get:function(){return{target:{serialize:!1},isContainer:{get:function(){return!0}},tree:{},
node:{readOnly:!0,get:function(){var M=this,Aa=this.tree.treeData;return Aa&&Aa.asList().find(function(wb){return wb.container===M.view})}},dragTriggerDistance:{defaultValue:15},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.ui.nameLabel.textString.slice(2,-1)===this.target.name&&this.connectionCount===(this.target.attributeConnections||[]).length?!1:!0}},sideBar:{derived:!0,get:function(){return this.view.owner.owner}},expose:{get:function(){return"refresh highlightTerm target dragTriggerDistance isContainer onDragOutside tree insertAsChild onChildAdded onChildRemoved nameNeedsUpdate".split(" ")}},
bindings:{get:function(){return[{signal:"onContextMenu",handler:"onContextMenu"},{signal:"onBeingDroppedOn",handler:"onBeingDroppedOn",override:!0},{signal:"wantsToBeDroppedOn",handler:"wantsToBeDroppedOn",override:!0},{signal:"onDoubleMouseDown",handler:"startRenaming"},{signal:"onGrab",handler:"onGrab",override:!0},{signal:"onHoverIn",handler:"showControls"},{signal:"onHoverOut",handler:"hideControls"},{target:"name input",signal:"onBlur",handler:"finishRenaming"},{target:"visibility icon",signal:"onMouseDown",
handler:"toggleVisibility"}]}}}}}],va,{pathInPackage:function(){return"./studio/scene-graph.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6329,end:14532})}(da.ViewModel));da.MorphNodeModel=zb;da.MorphNodeModel=zb;da.MorphNode=da.component["for"](function(){return da.component({name:"morph node",defaultViewModel:da.MorphNodeModel,
fill:da.Color.rgba(255,255,255,0),borderRadius:5,layout:new da.TilingLayout({axisAlign:"center",orderByIndex:!0,padding:da.rect(10,0,0,0),resizePolicies:[["name label",{height:"fixed",width:"fill"}]],spacing:10,wrapSubmorphs:!1}),draggable:!0,grabbable:!0,extent:da.pt(242.2,30.8),submorphs:[{type:da.Label,name:"morph icon",opacity:.4,fontSize:16,fill:da.Color.rgba(229,231,233,0),fontColor:da.Color.rgb(208,208,208),fontFamily:"Material Icons",reactsToPointer:!1,textAndAttributes:["\ue264",{fontSize:16,
textStyleClasses:["material-icons"]}]},da.part(da.PropLabel,{name:"name label",reactsToPointer:!1,master:da.PropLabel,padding:da.rect(0),textAndAttributes:["some text morph",null]}),{type:da.Label,name:"layout indicator",rotation:1.5707963267948966,fill:da.Color.rgba(229,231,233,0),fontColor:da.Color.rgb(208,208,208),fontFamily:"Material Icons",fontSize:16,nativeCursor:"pointer",textAndAttributes:["\ue8e9",{fontSize:16,textStyleClasses:["material-icons"]}]},{type:da.Label,name:"visibility icon",visible:!1,
fill:da.Color.rgba(229,231,233,0),fontColor:da.Color.rgb(208,208,208),fontFamily:"Material Icons",fontSize:16,nativeCursor:"pointer",textAndAttributes:["\ue8f4",{fontSize:16,textStyleClasses:["material-icons"]}]}]})},{module:"lively.ide/studio/scene-graph.cp.js","export":"MorphNode",range:{start:14567,end:16230}},da.MorphNode);da.MorphPanel=da.component["for"](function(){return da.component({defaultViewModel:da.MorphPanelModel,name:"morph panel",nativeCursor:"ew-resize",extent:da.pt(249.3,1E3),draggable:!0,
layout:new da.TilingLayout({axis:"column",orderByIndex:!0,padding:da.rect(0,0,5,0),resizePolicies:[["panel bg",{height:"fill",width:"fill"}]],wrapSubmorphs:!1}),fill:da.Color.transparent,submorphs:[{name:"panel bg",clipMode:"hidden",layout:new da.TilingLayout({axis:"column",orderByIndex:!0,padding:da.rect(0,60,0,-60),resizePolicies:[["search field",{height:"fixed",width:"fill"}],["scene graph",{height:"fill",width:"fill"}]],spacing:5,wrapSubmorphs:!1}),fill:da.Color.rgb(30,30,30).withA(.95),submorphs:[da.part(da.SearchField,
{name:"search field",fontColor:da.Color.rgb(247,247,247),fontSize:13,extent:da.pt(238,24.9),borderWidth:0,fill:da.Color.rgb(152,152,152),borderRadius:0,submorphs:[{name:"placeholder",fontSize:14}]}),{type:da.NewSceneGraphTree,treeData:new da.InteractiveTreeData({}),name:"scene graph",acceptsDrops:!0,selectionColor:da.Color.rgbHex("B2EBF2").withA(.25),fill:da.Color.rgba(255,255,255,0),clipMode:"hidden",lineHeight:2.5,fontColor:da.Color.white}]}]})},{module:"lively.ide/studio/scene-graph.cp.js","export":"MorphPanel",
range:{start:16267,end:17774}},da.MorphPanel);zb=bd("MorphNode",da.MorphNode);rb=bd("MorphPanel",da.MorphPanel);da.MorphNode=zb;da.MorphPanel=rb}}});