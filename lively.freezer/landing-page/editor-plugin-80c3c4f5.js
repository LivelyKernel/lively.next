System.register("./__rootModule___commonjs-entry-51a55f66.js ./mode-3092ef0b.js ./editor-plugin-5397d87c.js ./index-42118cd5.js @babel/plugin-syntax-import-meta ./ui.cp-8dfc076f.js ./loading-indicator.cp-98e470a2.js ./index-61952933.js ./tooltips.cp-3c41b378.js ./index-616023be.js ./popups.cp-5b9fb681.js ./list.cp-840d1cf8.js ./editor-modes-aae4d878.js ./interface-1a7f3c67.js".split(" "),function(bd){var Dd,se,Rc,ad,Ne,Cb,Sd,ve,uc,dd,vd,Ed,fe,jc,Od,qb,ic,Wb,lc,db,Xa,Gb,sc,ub;return{setters:[function(sb){Dd=
sb.i;se=sb.m;Rc=sb.aK;ad=sb.aV;Ne=sb.b_;Cb=sb.b$;Sd=sb.c0;ve=sb.bg;uc=sb.N;dd=sb.ar;vd=sb.t;Ed=sb.q;fe=sb.K;jc=sb._},function(sb){Od=sb.c;qb=sb.j;ic=sb.a;Wb=sb.b;lc=sb.S},function(sb){db=sb.CodeMirrorEnabledEditorPlugin},function(sb){Xa=sb.localInterface;Gb=sb.systemInterfaceNamed;sc=sb.serverInterfaceFor;ub=sb.l2lInterfaceFor},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var sb=window.lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js");
sb.defaultWarnStyle={"border-bottom":"2px dotted orange"};sb.defaultErrorStyle={"background-color":"red"};var fa=function(pb){var Nb=window.lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js"),zb=Nb.hasOwnProperty("JavaScriptChecker")&&"function"===typeof Nb.JavaScriptChecker?Nb.JavaScriptChecker:Nb.JavaScriptChecker=function(rb){if(!rb||!rb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Dd(zb,pb,[{key:"uninstall",
value:function(rb){var Ib=rb.text||rb;(Ib.markers||[]).forEach(function(da){return da.id.startsWith("js-checker-")&&Ib.removeMarker(da)});Ib.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(rb,Ib){return se(rb.embeddedMorphMap.values()).find(function(da){return Ib.containsPosition(da.anchor.position)})}},{key:"onDocumentChange",value:function(rb,Ib,da){var ka=Ib.document,va=da.theme;try{var Fa=da.parse()}catch(M){Fa=M}Fa&&(rb=(Ib.markers||[]).filter(function(M){return M.id.startsWith("js-checker-")}),
da=da.undeclaredVariables().map(function(M,Aa){var wb=M.start,Na=M.end;M.name;M.type;wb=ka.indexToPosition(wb);Na=ka.indexToPosition(Na);return Ib.addMarker({id:"js-checker-"+Aa,style:va?va.warning:sb.defaultWarnStyle,range:{start:wb,end:Na},type:"js-undeclared-var"})}),rb.slice(da.length).forEach(function(M){return Ib.removeMarker(M)}),Fa.parseError?(rb=Fa.parseError.loc,da=rb.column,rb=rb.line-1,sb.__inter0__=ka.indexToPosition(Fa.parseError.pos),da=sb.__inter0__.column,rb=sb.__inter0__.row,Fa=
{start:{column:da-1,row:rb},end:{column:da+1,row:rb}},this.hasEmbeddedMorphInRange(Ib,Fa)||Ib.addMarker({id:"js-syntax-error",range:Fa,style:va?va.error:sb.defaultErrorStyle,type:"js-syntax-error"})):Ib.removeMarker("js-syntax-error"))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"JavaScriptChecker"}}],Nb,{pathInPackage:function(){return"./js/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:143,end:2234})}(void 0);sb["default"]=fa;var Db=window.lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js");Db.query=Rc;Db.fuzzyParse=ad;Db.acorn=Ne;Db.custom=Cb;Db.walk=Sd;var ab=function(pb){var Nb=window.lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js"),zb=Nb.hasOwnProperty("JavaScriptNavigator")&&"function"===typeof Nb.JavaScriptNavigator?Nb.JavaScriptNavigator:Nb.JavaScriptNavigator=function(rb){if(!rb||
!rb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Dd(zb,pb,[{key:"ensureAST",value:function(rb){return this.parse(rb.textString)}},{key:"parse",value:function(rb){return Db.fuzzyParse(rb)}},{key:"move",value:function(rb,Ib){var da=!!Ib.activeMark||!Ib.selection.isEmpty(),ka=Ib.selection,va=Ib.positionToIndex(ka.lead);rb=this[rb](Ib.textString,va);rb=Ib.indexToPosition(rb);ka.isBackwards;ka.lead=rb;da||(ka.anchor=rb);
Ib.scrollCursorIntoView()}},{key:"forwardSexp",value:function(rb){this.move("_forwardSexp",rb)}},{key:"backwardSexp",value:function(rb){this.move("_backwardSexp",rb)}},{key:"backwardUpSexp",value:function(rb){this.move("_backwardUpSexp",rb)}},{key:"forwardDownSexp",value:function(rb){this.move("_forwardDownSexp",rb)}},{key:"_forwardSexp",value:function(rb,Ib){rb=this.parse(rb);rb=Db.custom.findNodesIncluding(rb,Ib).reverse().find(function(ka){return ka.end!==Ib});if(!rb)return Ib;if("BlockStatement"===
rb.type){var da=rb.body.find(function(ka){return ka.start>Ib});if(da)return da.start}return rb.end}},{key:"_backwardSexp",value:function(rb,Ib){rb=this.parse(rb);rb=Db.custom.findNodesIncluding(rb,Ib).reverse().find(function(ka){return ka.start!==Ib});if(!rb)return Ib;if("BlockStatement"===rb.type){var da=rb.body.slice().reverse().find(function(ka){return ka.end<Ib});if(da)return da.end}return rb?rb.start:Ib}},{key:"_backwardUpSexp",value:function(rb,Ib){rb=this.parse(rb);return(rb=Db.custom.findNodesIncluding(rb,
Ib).reverse().find(function(da){return da.start!==Ib}))?rb.start:Ib}},{key:"_forwardDownSexp",value:function(rb,Ib){rb=this.parse(rb);return(rb=Db.walk.findNodeAfter(rb,Ib,function(da,ka){return ka.start>Ib}))?rb.node.start:Ib}},{key:"markDefun",value:function(rb){var Ib=this.rangeForFunctionOrDefinition(rb.textString,[rb.positionToIndex(rb.selection.range.start),rb.positionToIndex(rb.selection.range.end)]);Ib&&rb.execCommand("expandRegion",{start:Ib[0],end:Ib[1]})}},{key:"rangeForNodesMatching",
value:function(rb,Ib,da){rb=this.parse(rb);return(Ib=Db.custom.findNodesIncluding(rb,Ib).reverse().find(da))?[Ib.start,Ib.end]:null}},{key:"rangeForFunctionOrDefinition",value:function(rb,Ib){var da=Ib[0]===Ib[1];return this.rangeForNodesMatching(rb,Ib[1],function(ka){return["AssignmentExpression","FunctionDeclaration","FunctionExpression","MethodDefinition"].includes(ka.type)&&(da&&ka.end!==Ib[1]||!da&&ka.start<Ib[0])?!0:!1})}},{key:"resolveIdentifierAt",value:function(rb,Ib){"number"!==typeof Ib&&
(Ib=rb.positionToIndex(Ib));rb=this.ensureAST(rb);var da=Db.query.nodesAt(Ib,rb).reverse(),ka=da.find(function(Fa){return"Identifier"===Fa.type});if(!ka&&((da=da[0])&&da.type.includes("Specifier")&&da.local&&"Identifier"===da.local.type&&(ka=da.local),!ka))return;Ib=(da=Db.query.findDeclarationClosestToIndex(rb,ka.name,Ib))?Db.query.scopeAtIndex(rb,da.start):Db.query.scopeAtIndex(rb,Ib);var va=Db.query.findReferencesAndDeclsInScope(Ib,ka.name).refs;return{parsed:rb,scope:Ib,id:ka,name:ka.name,decl:da,
refs:va}}},{key:"expandRegion",value:function(rb,Ib,da,ka){function va(wb){wb=rb.positionToIndex({column:0,row:M.row});return{range:[wb+Aa.start,wb+Aa.start+Aa.value.length],prev:ka}}var Fa=ka.range[0]!==ka.range[1],M=rb.indexToPosition(ka.range[0]),Aa=rb.tokenAt(M);if(!Fa&&Aa&&["keyword","identifier"].includes(Aa.type))return va();da=da||this.parse(Ib);Ib=Db.query.nodesAtIndex(da,ka.range[0]).reverse().find(function(wb){return wb.start<ka.range[0]||wb.end>ka.range[1]});if(!Ib)return ka;da=Ib.start;
Fa=Ib.end;return"Literal"===Ib.type&&(Ib.raw||"").match(/^['"`]/)&&ka.range[0]!==Ib.start&&ka.range[1]!==Ib.end&&(Ib.start+1<ka.range[0]||Ib.end-1>ka.range[1])?{range:[da+1,Fa-1],prev:ka}:{range:[da,Fa],prev:ka}}},{key:"contractRegion",value:function(rb,Ib,da,ka){return ka.prev||ka}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"JavaScriptNavigator"}}],Nb,{pathInPackage:function(){return"./js/navigator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:125,end:6937})}(void 0);Db["default"]=ab;var eb=window.lively.FreezerRuntime.recorderFor("lively.ide/js/snippets.js");eb.parseFunction=ve;var kc=[["typef",'typeof ${0:object} === "function"$1'],["types",'typeof ${0:object} === "string"$1'],["typen",'typeof ${0:object} === "number"$1'],["typeu",'typeof ${0:object} === "undefined"$1'],["typenu",'typeof ${0:object} !== "undefined"$1'],
["import",'import { ${0:name} } from "${1:module}";'],["importd",'import ${0:name} from "${1:module}";'],["import*",'import * as ${0:name} from "${1:module}";'],["subclass","class ${0:name} extends ${1:base} {\n  constructor(${2:args}) {\n    super(${3:args})\n    $4\n  }\n}"],["class","class ${0:name} {\n  constructor(${1:args}) {\n    $2\n  }\n}"],["switch","switch (${0:expression}) {\n  case '${2:case}':\n    ${3:// code}\n    break;\n    $4\n    default:\n    ${1:// code}\n}"],["tryf","try {${0:/* code */}} finally {}"],
["try","try {${0:/* code */}} catch (err) {}"],["do","do {${1:/* code */}} while (${0:/* condition */});"],["fori","for (let ${0:prop} in ${1:obj}) {\n  ${2:obj[prop]}\n}"],["foro","for (let ${0:value} of ${1:iterable}) {\n  ${2:value}\n}"],["for-","for (let ${0:i} = ${1:list}.length; ${2:i}--; ) {\n  $3\n}"],["for","for (let ${0:i} = 0; ${1:i} < ${3:list}.length; ${2:i}++) {\n  $4\n}"],["Prom","new Promise((resolve, reject) => {$0})"],["keys","Object.keys($0)"],["assign","Object.assign(${0:dest}, ${1:source})"],
["stringi","JSON.stringify(${0:object})"],["forE","forEach(${0:ea} => $1)"],["map","map(${0:ea} => $1)"],["reduce","reduce((${1:all}, ${2:ea}) => {$3}, ${0:init})"],["from","Array.from(${0:list})"],["last","arr.last(${0:list})"],["pluck",'arr.pluck(${0:list}, "${1:key}")'],["sortBy","arr.sortBy(${0:list}, ($1) => $2)"],["join",'join("\\n")'],["con","connect(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["once","once(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],
["sig","signal(${0:source}, '${1:sourceAttr}', ${2:value});"],["ll","lively.lang."],["lls","lively.lang.string."],["lla","lively.lang.arr."],["llo","lively.lang.obj."],["llf","lively.lang.fun."],["llp","lively.lang.promise."],["withA","withAllSubmorphsDo(ea => { return ${0:ea}; })"],["$w","$world"],["$m","$morph('${0:name}')"],["get",'get("${0:name}")'],["vm","viewModel"],["$","${$0}"],["cl","console.log($0)"],["cw","console.warn($0)"],["ce","console.error($0)"],["s","show(`$0`);"],["l2lC",'import L2LClient from "lively.2lively/client.js";\nlet l2lClient = L2LClient.default();$0'],
["afun","async function ${0:functionName}($1) {$2}"],["fun","function ${0:functionName}($1) {$2}"],["fn","function($0) {$1}"],["f","($0) => $1"],["aw","await $0"],["docstring",function(pb){try{var Nb=function(){for(var zb=pb.split("\n"),rb=zb[1],Ib=0,da="",ka=1;;){var va=zb[ka];se(va).forEach(function(Aa){"{"===Aa&&Ib++;"}"===Aa&&Ib--});ka++;da+=va;if(0===Ib)break}zb=/return/m.test(da);rb=rb.replace("get ","function ");rb=rb.replace("set ","function ");rb=rb.replace("function ","");rb=rb.replace("async ",
"");rb=rb.match(/.* \(.*\).*$/gm)[0];rb=rb.substring(0,rb.lastIndexOf(" "));rb=eval("(function "+rb+"{})");ka=eb.parseFunction(rb).params.map(function(Aa){if("Identifier"===Aa.type)return Aa.name;if("AssignmentPattern"===Aa.type)return Aa.left.name;if("RestElement"===Aa.type)return Aa.argument.name});rb="\n/**\n * ${0:description}\n";da=1;ka=uc(ka);var Fa;try{for(ka.s();!(Fa=ka.n()).done;){var M=Fa.value;rb=rb.concat(" * @param {${"+da++ +":type}} "+M+" - ${"+da++ +":description}\n")}}catch(Aa){ka.e(Aa)}finally{ka.f()}zb&&
(rb=rb.concat(" * @returns {${"+da++ +":type}} ${"+da++ +":description}\n"));rb=rb.concat(" */");return{v:rb}}();if("object"===dd(Nb))return Nb.v}catch(zb){return"\n/**\n * ${0:description}\n */"}}],["fdesl","/* eslint-disable ${0:rule} */"],["desl","// eslint-disable-line ${0:rule}"]];eb.snippets=kc;eb.snippets=kc;var Vb=window.lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js");Vb.string=vd;Vb.JavaScriptChecker=fa;Vb.JavaScriptNavigator=ab;Vb.completers=Od;Vb.jsSnippets=kc;Vb.jsIdeCommands=
qb;Vb.jsEditorCommands=ic;Vb.astEditorCommands=Wb;Vb.CodeMirrorEnabledEditorPlugin=db;Vb.Snippet=lc;Vb.parser=Ed;Vb.localInterface=Xa;Vb.systemInterfaceNamed=Gb;Vb.serverInterfaceFor=sc;Vb.l2lInterfaceFor=ub;fa=bd("default",function(pb){var Nb=window.lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js"),zb=Nb.hasOwnProperty("JavaScriptEditorPlugin")&&"function"===typeof Nb.JavaScriptEditorPlugin?Nb.JavaScriptEditorPlugin:Nb.JavaScriptEditorPlugin=function(rb){if(!rb||!rb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Dd(zb,pb,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){Dd._get(Object.getPrototypeOf(zb.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this);this.checker=new Vb.JavaScriptChecker;this.evalEnvironment={format:"esm",targetModule:null,context:null}}},{key:"isJSEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"js"}},{key:"longName",get:function(){return"javascript"}},{key:"attach",value:function(rb){Dd._get(Object.getPrototypeOf(zb.prototype),
"attach",this).call(this,rb);this.evalEnvironment=Object.assign({},this.evalEnvironment,{context:rb})}},{key:"detach",value:function(rb){this.checker.uninstall(this.textMorph);Dd._get(Object.getPrototypeOf(zb.prototype),"detach",this).call(this,rb)}},{key:"getNavigator",value:function(){return new Vb.JavaScriptNavigator}},{key:"getCompleters",value:function(rb){return Vb.completers.concat(rb)}},{key:"getCommands",value:function(rb){return[].concat(se(Dd._get(Object.getPrototypeOf(zb.prototype),"getCommands",
this).call(this,rb)),se(Vb.jsIdeCommands),se(Vb.jsEditorCommands),se(Vb.astEditorCommands))}},{key:"getKeyBindings",value:function(rb){return[].concat(se(rb),[{keys:"Shift-Tab",command:{command:"[javascript] auto format code"}},{keys:"Ctrl-C E",command:"[javascript] list errors and warnings"},{keys:{mac:"Meta-Shift-L L I N T R",win:"Ctrl-Shift-L L I N T R"},command:"[javascript] eslint report"},{keys:{mac:"Meta-Shift-L L I N T P",win:"Ctrl-Shift-L L I N T P"},command:"[javascript] eslint preview fixes"},
{keys:{mac:"Meta-Shift-L L I N T F",win:"Ctrl-Shift-L L I N T F"},command:"[javascript] eslint fix"},{keys:{mac:"Meta-Shift-L M O D E",win:"Ctrl-Shift-L M O D E"},command:"change editor mode"},{keys:"Ctrl-C I",command:"[javascript] inject import"},{keys:"Ctrl-C C I",command:"[javascript] fix undeclared variables"}])}},{key:"getMenuItems",value:function(){var rb=jc(regeneratorRuntime.mark(function ka(da){var va,Fa,M,Aa,wb;return regeneratorRuntime.wrap(function(Na){for(;;)switch(Na.prev=Na.next){case 0:return va=
this.textMorph,Fa=[{command:"doit",target:va,showKeyShortcuts:!0},{command:"inspectit",target:va,showKeyShortcuts:!0},{command:"editit",target:va,showKeyShortcuts:!0},{command:"printit",target:va,showKeyShortcuts:!0},{command:"print inspectit",alias:"print inspect",target:va,showKeyShortcuts:!0},{command:"log it",target:va,showKeyShortcuts:!0},{command:"eval all",target:va,showKeyShortcuts:!0},{command:"text completion",alias:"code completion",target:va,showKeyShortcuts:!0},{command:"blame line",
target:va,showKeyShortcuts:!0},{command:"[javascript] list errors and warnings",alias:"list errors and warnings",target:va,showKeyShortcuts:!0},{isDivider:!0}],this.evalEnvironment.targetModule&&Fa.push({command:"[javascript] inject import",alias:"add import",target:va},{command:"[javascript] fix undeclared variables",alias:"fix undeclared variables",target:va},{command:"[javascript] remove unused imports",alias:"remove unused imports",target:va}),M=this.getNavigator(),(Aa=M.resolveIdentifierAt(va,
va.cursorPosition))&&Fa.push({command:"selectDefinition",alias:'jump to definition of "'.concat(Aa.name,'"'),target:va},{command:"selectSymbolReferenceOrDeclaration",alias:'select all occurrences of "'.concat(Aa.name,'"'),target:va}),(wb=va.selection.text.trim())&&Fa.push({command:"open code search",alias:'code search for "'.concat(Vb.string.truncate(wb,30),'"'),target:va.world(),args:{input:wb,backend:this.backend()}}),Fa.push({isDivider:!0}),Na.abrupt("return",Fa.concat(da));case 10:case "end":return Na.stop()}},
ka,this)}));return function(da){return rb.apply(this,arguments)}}()},{key:"getSnippets",value:function(){return Vb.jsSnippets.map(function(rb){rb=fe(rb,2);return new Vb.Snippet({trigger:rb[0],expansion:rb[1]})})}},{key:"sanatizedJsEnv",value:function(rb){rb=Object.assign({},this.evalEnvironment,{},rb);rb.format||(rb.formatd="esm");rb.context||(rb.context=this.textMorph);rb.sourceURL||(rb.sourceURL=rb.targetModule+"_doit_"+Date.now());rb.systemInterface||(rb.systemInterface=Vb.localInterface);return rb}},
{key:"backend",value:function(rb){rb=this.sanatizedJsEnv(rb);return rb.remote?rb.remote:"local"}},{key:"systemInterface",value:function(rb){return this.sanatizedJsEnv(rb).systemInterface||Vb.localInterface}},{key:"setSystemInterface",value:function(rb){return this.evalEnvironment.systemInterface=rb}},{key:"setSystemInterfaceNamed",value:function(rb){return this.setSystemInterface(Vb.systemInterfaceNamed(rb))}},{key:"runEval",value:function(rb,Ib){Ib=this.sanatizedJsEnv(Ib);return this.systemInterface(Ib).runEval(rb,
Ib)}},{key:"parser",get:function(){return Vb.parser}},{key:"parse",value:function(){var rb=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(this._ast&&this._ast._astType===rb)return this._ast;var Ib=this.parser,da=this.textMorph.textString;if(!Ib)return null;var ka={withComments:!0,allowReturnOutsideFunction:!0};rb&&(ka.type=rb);if(da.startsWith("#!")){var va=da.indexOf("\n");da=" ".repeat(va)+da.slice(va)}Ib=Ib.fuzzyParse(da,ka);Ib._astType=rb;return this._ast=Ib}},{key:"undeclaredVariables",
value:function(){var rb=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,Ib=this.parser;this.textMorph.document;var da=this.evalEnvironment.knownGlobals||[];rb=this.parse(rb);return Ib&&rb?Ib.query.findGlobalVarRefs(rb,{jslintGlobalComment:!0}).filter(function(ka){return!da.includes(ka.name)}):[]}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"JavaScriptEditorPlugin"}}],Nb,{pathInPackage:function(){return"./js/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:646,end:7565})}(Vb.CodeMirrorEnabledEditorPlugin));Vb["default"]=fa}}});