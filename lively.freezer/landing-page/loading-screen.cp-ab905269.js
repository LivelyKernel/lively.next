System.register(["./__rootModule___commonjs-entry-51a55f66.js","./index-61952933.js","./loading-indicator.cp-98e470a2.js","@babel/plugin-syntax-import-meta","./tooltips.cp-3c41b378.js"],function(bd,Dd){var se,Rc,ad,Ne,Cb,Sd,ve,uc,dd,vd,Ed,fe,jc,Od,qb,ic,Wb,lc,db,Xa,Gb,sc;return{setters:[function(ub){se=ub._;Rc=ub.M;ad=ub.W;Ne=ub.ab;Cb=ub.T;Sd=ub.aB;ve=ub.p;uc=ub.aC;dd=ub.f;vd=ub.L;Ed=ub.c;fe=ub.b5;jc=ub.e;Od=ub.b;qb=ub.r;ic=ub.C;Wb=ub.b3;lc=ub.a;db=ub.l;Xa=ub.k;Gb=ub.i},function(){},function(ub){sc=
ub.L},function(){},function(){}],execute:function(){function ub(){return sb.apply(this,arguments)}function sb(){sb=se(regeneratorRuntime.mark(function kc(){var Vb;return regeneratorRuntime.wrap(function(pb){for(;;)switch(pb.prev=pb.next){case 0:return Vb=fa.part(fa.LoadingScreen),pb.next=3,Vb.get("icon").whenFontLoaded();case 3:Vb.respondsToVisibleWindow=!0,$world.addMorph(Vb),Vb.relayout();case 6:case "end":return pb.stop()}},kc)}));return sb.apply(this,arguments)}bd("main",ub);var fa=window.lively.FreezerRuntime.recorderFor("lively.freezer/src/loading-screen.cp.js");
fa.main=ub;fa.Morph=Rc;fa.World=ad;fa.MorphicDB=Ne;fa.TilingLayout=Cb;fa.Path=Sd;fa.part=ve;fa.Ellipse=uc;fa.Icon=dd;fa.Label=vd;fa.component=Ed;fa.stringToEasing=fe;fa.easings=jc;fa.pt=Od;fa.rect=qb;fa.Color=ic;fa.num=Wb;fa.promise=lc;fa.fun=db;fa.resource=Xa;fa.LoadingIndicator=sc;var Db=bd("WorldLoadingScreen",function(eb){var kc=window.lively.FreezerRuntime.recorderFor("lively.freezer/src/loading-screen.cp.js"),Vb=kc.hasOwnProperty("WorldLoadingScreen")&&"function"===typeof kc.WorldLoadingScreen?
kc.WorldLoadingScreen:kc.WorldLoadingScreen=function(pb){if(!pb||!pb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Gb(Vb,eb,[{key:"commands",get:function(){var pb=this;return[{name:"resize on client",exec:function(){pb.relayout()}}]}},{key:"__head_html__",get:function(){return'\n<script> window.AUTH_SERVER_URL; \x3c/script>\n<style type="text/css">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"onLoad",value:function(){var pb=se(regeneratorRuntime.mark(function zb(){var rb,Ib,da,ka,va;return regeneratorRuntime.wrap(function(Fa){for(;;)switch(Fa.prev=Fa.next){case 0:if(!lively.FreezerRuntime){Fa.next=11;break}rb=this.get("package loading indicator");Ib=this.get("css loading screen");da=this.getWorldName();ka=this.getFilePath();(va=this.getSnapshot())?(rb.isLayoutable=rb.visible=!1,Ib.isLayoutable=Ib.visible=!0):(rb.startStepping("updateProgressBar"),document.body.style.backgroundColor=
"black");ka&&this.get("json target indicator").animate({opacity:1,duration:300});Fa.next=10;return this.transitionToLivelyWorld({worldName:da,filePath:ka,snapshot:va},rb);case 10:rb.stopStepping();case 11:case "end":return Fa.stop()}},zb,this)}));return function(){return pb.apply(this,arguments)}}()},{key:"transitionToLivelyWorld",value:function(){var pb=se(regeneratorRuntime.mark(function Ib(zb,rb){var da,ka,va,Fa,M,Aa,wb;return regeneratorRuntime.wrap(function(Na){for(;;)switch(Na.prev=Na.next){case 0:return da=
zb.worldName,ka=zb.filePath,va=zb.snapshot,Fa=fa.resource(window.SYSTEM_BASE_URL||document.location.origin).join("objectdb/").url,Na.next=4,Dd.import("./bootstrap-c7e82401.js");case 4:M=Na.sent;Aa=M.bootstrap;Na.t0=da&&"__newWorld__"!==da;if(!Na.t0){Na.next=11;break}Na.next=10;return fa.MorphicDB.named("lively.morphic/objectdb/morphicdb",{serverURL:Fa}).exists("world",da);case 10:Na.t0=!Na.sent.exists;case 11:if(!Na.t0){Na.next=13;break}return Na.abrupt("return",this.indicateMissingWorld(!0));case 13:Na.t1=
ka;if(!Na.t1){Na.next=18;break}Na.next=17;return fa.resource(document.location.origin).join(ka).exists();case 17:Na.t1=!Na.sent;case 18:if(!Na.t1){Na.next=20;break}return Na.abrupt("return",this.indicateMissingWorld(!0));case 20:return wb=fa.LoadingIndicator.open("...starting bootstrap process...",{animated:!0,delay:1E3}),va&&(wb.visible=!1),Na.next=24,Aa({worldName:da,filePath:ka,loadingIndicator:wb,progress:rb,snapshot:va});case 24:case "end":return Na.stop()}},Ib,this)}));return function(zb,rb){return pb.apply(this,
arguments)}}()},{key:"getWorldName",value:function(){return document.location.href.endsWith("worlds/new")?"__newWorld__":fa.resource(document.location.href).query().name||window.WORLD_NAME||!1}},{key:"getFilePath",value:function(){return fa.resource(document.location.href).query().file||!1}},{key:"getSnapshot",value:function(){return fa.resource(document.location.href).query().snapshot||window.SNAPSHOT_PATH||!1}},{key:"relayout",value:function(){$world._cachedWindowBounds=null;this.setBounds($world.windowBounds());
this.get("json target indicator").topRight=this.innerBounds().insetBy(25).topRight()}},{key:"indicateMissingWorld",value:function(pb){this.get("package loading indicator").visible=!pb;this.get("broken heart").visible=this.get("broken heart").isLayoutable=pb}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"WorldLoadingScreen"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next (".concat(document.location.hostname,")")}}}}}],kc,{pathInPackage:function(){return"./src/loading-screen.cp.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.freezer",version:"0.1.0"}}},{start:348,end:3886})}(fa.Morph));fa.WorldLoadingScreen=Db;fa.WorldLoadingScreen=Db;Db=bd("default",function(eb){var kc=window.lively.FreezerRuntime.recorderFor("lively.freezer/src/loading-screen.cp.js"),Vb=kc.hasOwnProperty("ModuleProgress")&&"function"===typeof kc.ModuleProgress?kc.ModuleProgress:
kc.ModuleProgress=function(pb){if(!pb||!pb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Gb(Vb,eb,[{key:"fadeIntoBack",value:function(){this.animate({blur:5})}},{key:"relayout",value:function(){var pb;this.isComponent||(null===(pb=this.owner)||void 0===pb?0:pb.isWorld)||(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var pb=this.getAllNamed(/stage/);this.blur=0;this.stages=
new Map(pb.map(function(Nb){return[Nb,"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(Nb){Nb._cachedTextBounds=null;Nb.fit()})}},{key:"updateProgressBar",value:function(){if(this._lastWidth){this.relayout();var pb=this.get("progress path"),Nb=this.get("stage lang").get("checkmark"),zb=fa.stringToEasing(fa.easings.inOutExpo)(fa.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);pb.width=fa.num.interpolate(zb,this._lastWidth,this._currentProgress);pb.position=
Nb.transformPointToMorph(this,Nb.extent.scaleByPt(fa.pt(1,.5)))}}},{key:"fastLoadTest",value:function(){var pb=se(regeneratorRuntime.mark(function zb(){var rb,Ib,da,ka;return regeneratorRuntime.wrap(function(va){for(;;)switch(va.prev=va.next){case 0:this.reset(),rb="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),Ib=0,da=rb;case 3:if(!(Ib<da.length)){va.next=11;break}ka=da[Ib];this.finishPackage({packageName:ka,
loaded:!0});va.next=8;return fa.promise.delay(200);case 8:Ib++;va.next=3;break;case 11:case "end":return va.stop()}},zb,this)}));return function(){return pb.apply(this,arguments)}}()},{key:"finishPackage",value:function(pb){var Nb=this,zb=pb.frozen,rb=pb.loaded;pb="stage "+pb.packageName.replace("lively.","");pb=this.get(pb);zb&&this.stages.set(pb,"frozen");rb&&this.stages.set(pb,"loaded");fa.fun.debounceNamed("update progress",200,function(){Nb.updateProgressVisualization()})()}},{key:"updateProgressVisualization",
value:function(){var pb=this,Nb=this.getSubmorphNamed("progress path"),zb=this.getAllNamed(/stage/),rb=zb[0];zb.forEach(function(Ib){var da=Ib.get("checkmark"),ka=Ib.get("frozen indicator"),va=Ib.get("icon");Ib=pb.stages.get(Ib);if("not loaded"!==Ib){rb=da;if("loaded"===Ib){if(da.visible)return;da.animate({duration:300,visible:!0})}if("frozen"===Ib){if(ka.visible)return;ka.animate({duration:300,visible:!0})}va.opacity=1}else da.visible=!1,ka.visible=!1,va.opacity=.2});zb=this.localizePointFrom(fa.pt(-10,
0),rb).x;zb=Math.max(20,zb-Nb.left);Nb.visible=20===zb?!1:!0;this._lastWidth=Nb.width;this._timeStamp=Date.now();this._currentProgress=zb}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],initialize:function(){var pb=this;this.whenRendered().then(function(){pb.reset()})}}}}}],kc,{pathInPackage:function(){return"./src/loading-screen.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.freezer",version:"0.1.0"}}},{start:3902,end:7457})}(fa.Morph));fa.Stage=fa.component["for"](function(){return fa.component({name:"stage",extent:fa.pt(58,119),fill:fa.Color.rgba(46,75,223,0),layout:new fa.TilingLayout({direction:"topToBottom",orderByIndex:!0,align:"center",spacing:10}),submorphs:[{type:fa.Label,name:"icon",fontSize:30.108,opacity:.2,textAndAttributes:fa.Icon.textAttribute("language")},
{type:fa.Label,name:"label",fill:fa.Color.rgba(255,255,255,0),fontColor:fa.Color.rgb(64,64,64),fontSize:16,fontWeight:"Medium",nativeCursor:"pointer",textAndAttributes:["lang",null]},{type:fa.Ellipse,name:"stop",borderColor:fa.Color.rgb(127,140,141),borderWidth:4,extent:fa.pt(27,27),fill:fa.Color.rgb(253,254,254),submorphs:[{type:fa.Label,name:"checkmark",fontColor:fa.Color.rgb(100,221,23),fontSize:26,padding:fa.rect(.5,0,0,0),textAndAttributes:fa.Icon.textAttribute("check-circle"),visible:!0},{type:fa.Label,
name:"frozen indicator",borderRadius:30,fill:fa.Color.rgb(0,176,255),fontColor:fa.Color.rgb(255,255,255),fontSize:20,padding:fa.rect(4,3,0,0),textAndAttributes:fa.Icon.textAttribute("snowflake"),visible:!0}]}]})},{module:"lively.freezer/src/loading-screen.cp.js","export":"Stage",range:{start:7494,end:8808}},fa.Stage);fa.ProgressIndicator=fa.component["for"](function(){return fa.component({type:fa.ModuleProgress,borderRadius:6,dropShadow:!1,extent:fa.pt(1003,300),fill:fa.Color.rgba(253,254,254,0),
name:"progress indicator",layout:new fa.TilingLayout({align:"center",spacing:23}),submorphs:[{type:fa.Path,name:"progress path",borderColor:fa.Color.rgb(127,140,141),borderWidth:3,endMarker:{children:[{d:"M0,0 L10,5 L0,10 z",tagName:"path"}],fill:"rgba(127,140,141,1)",id:"end-marker",markerHeight:"5",markerWidth:"5",orient:"auto",refX:"5",refY:"5",tagName:"marker",viewBox:"0 0 10 10"},extent:fa.pt(20,3),fill:fa.Color.transparent,isLayoutable:!1,vertices:[{position:fa.pt(0,0),isSmooth:!1,controlPoints:{next:fa.pt(0,
0),previous:fa.pt(0,0)}},{position:fa.pt(20,0),isSmooth:!1,controlPoints:{next:fa.pt(0,0),previous:fa.pt(0,0)}}],visible:!1},fa.part(fa.Stage,{name:"stage lang",extent:fa.pt(58,119),submorphs:[{name:"icon",textAndAttributes:fa.Icon.textAttribute("language")},{name:"label",textString:"lang"}]}),fa.part(fa.Stage,{name:"stage ast",extent:fa.pt(47,119),submorphs:[{name:"icon",textAndAttributes:fa.Icon.textAttribute("tree")},{name:"label",textAndAttributes:["ast",null]}]}),fa.part(fa.Stage,{name:"stage source-transform",
extent:fa.pt(149,119),submorphs:[{name:"icon",textAndAttributes:fa.Icon.textAttribute("retweet")},{name:"label",textAndAttributes:["source transform",null]}]}),fa.part(fa.Stage,{name:"stage classes",extent:fa.pt(76,119),submorphs:[{name:"icon",textAndAttributes:fa.Icon.textAttribute("sitemap")},{name:"label",textAndAttributes:["classes",null]}]}),fa.part(fa.Stage,{name:"stage vm",extent:fa.pt(58,119),submorphs:[{name:"icon",textAndAttributes:fa.Icon.textAttribute("cogs")},{name:"label",textAndAttributes:["VM",
null]}]}),fa.part(fa.Stage,{name:"stage modules",extent:fa.pt(85,119),submorphs:[{name:"icon",textAndAttributes:fa.Icon.textAttribute("box-open")},{name:"label",textAndAttributes:["modules",null]}]}),fa.part(fa.Stage,{name:"stage user",extent:fa.pt(54,119),submorphs:[{name:"icon",textAndAttributes:fa.Icon.textAttribute("user-circle")},{name:"label",textAndAttributes:["user",null]}]}),fa.part(fa.Stage,{name:"stage storage",extent:fa.pt(77,119),submorphs:[{name:"icon",textAndAttributes:fa.Icon.textAttribute("database")},
{name:"label",textAndAttributes:["storage",null]}]}),fa.part(fa.Stage,{name:"stage morphic",extent:fa.pt(82,119),submorphs:[{name:"icon",textAndAttributes:fa.Icon.textAttribute("cube")},{name:"label",textAndAttributes:["morphic",null]}]}),fa.part(fa.Stage,{name:"stage world",extent:fa.pt(64,119),submorphs:[{name:"icon",textAndAttributes:fa.Icon.textAttribute("globe-europe")},{name:"label",textAndAttributes:["world",null]}]})]})},{module:"lively.freezer/src/loading-screen.cp.js","export":"ProgressIndicator",
range:{start:8858,end:12390}},fa.ProgressIndicator);fa.ErrorIndicator=fa.component["for"](function(){return fa.component({type:fa.Label,fontColor:fa.Color.rgb(231,76,60),fontSize:211,isLayoutable:!1,submorphs:[{type:"text",name:"error text",borderColor:fa.Color.rgb(23,160,251),extent:fa.pt(345.1,104.8),position:fa.pt(-67,206),fill:fa.Color.rgba(0,0,0,0),fixedHeight:!0,fixedWidth:!0,fontSize:22,fontWeight:"bold",lineWrapping:!0,nativeCursor:"default",readOnly:!0,textAlign:"center",textAndAttributes:["Sorry, the world you requested can not be found on the server.",
null]}],textAndAttributes:fa.Icon.textAttribute("heart-broken")})},{module:"lively.freezer/src/loading-screen.cp.js","export":"ErrorIndicator",range:{start:12438,end:13096}},fa.ErrorIndicator);fa.LoadingScreen=fa.component["for"](function(){return fa.component({type:fa.WorldLoadingScreen,name:"loading screen",extent:fa.pt(1E3,600),layout:new fa.TilingLayout({direction:"topToBottom",orderByIndex:!0,axisAlign:"center",align:"center",spacing:10}),submorphs:[{type:fa.Label,name:"json target indicator",
borderColor:fa.Color.rgb(0,0,0),borderRadius:6,borderWidth:2,fontSize:20,fontWeight:"bold",isLayoutable:!1,opacity:0,padding:fa.rect(5,2,5,2),textAndAttributes:["JSON",null]},fa.part(fa.ErrorIndicator,{name:"broken heart",visible:!1}),fa.part(fa.ProgressIndicator,{name:"package loading indicator",opacity:0}),{type:"html",name:"css loading screen",cssDeclaration:"#loading-bar {\n  height: 20px;\n  width: 400px;\n  color: gray;\n  border-style: solid;\n  border-color: gray;\n  border-width: 2px;\n  border-radius: 10px;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  overflow: hidden;\n  margin: 0px 0 0 -202px;\n}\n\n#progress {\n  background-color: gray;\n  height: 100%;\n  animation: load 5s;\n}\n\n@keyframes load {\n  from { width: 0% }\n  to { width: 100% }\n}",
extent:fa.pt(940,274.3),html:'<div style="position: fixed; z-index: 1; height: 100%; width: 100%; background-color: transparent">\n  <div id="loading-bar">\n     <div id="progress" style="width: 100%;">\n  </div>\n</div></div>',isLayoutable:!1,visible:!1}]})},{module:"lively.freezer/src/loading-screen.cp.js","export":"LoadingScreen",range:{start:13143,end:14696}},fa.LoadingScreen);fa.main=ub;var ab=bd("TITLE","lively.next");fa.TITLE=ab;fa.TITLE=ab;ab=bd("WORLD_CLASS",fa.World);fa.WORLD_CLASS=ab;fa.WORLD_CLASS=
ab;ab=bd("EXCLUDED_MODULES","lively.collab mocha-es6 mocha picomatch path-is-absolute fs.realpath rollup @babel/preset-env @babel/plugin-syntax-import-meta @rollup/plugin-json @rollup/plugin-commonjs rollup-plugin-polyfill-node babel-plugin-transform-es2015-modules-systemjs".split(" "));fa.EXCLUDED_MODULES=ab;fa.EXCLUDED_MODULES=ab;ab=bd("ProgressIndicator",fa.ProgressIndicator);fa.ProgressIndicator=ab;fa["default"]=Db}}});