System.register(["./__rootModule___commonjs-entry-51a55f66.js","./loading-indicator.cp-98e470a2.js","./tooltips.cp-3c41b378.js"],function(bd){var Dd,se,Rc,ad,Ne,Cb,Sd,ve,uc,dd,vd,Ed,fe,jc,Od,qb,ic,Wb,lc,db,Xa,Gb,sc,ub,sb,fa,Db,ab,eb,kc,Vb,pb,Nb,zb,rb,Ib,da,ka,va,Fa,M,Aa,wb,Na,hb,Bb,ba,dc,la,Fb,vb,Ia,xb,Rb,yc,id;return{setters:[function(ob){Dd=ob.M;se=ob.aD;Rc=ob.b;ad=ob.C;Ne=ob.aG;Cb=ob.s;Sd=ob.t;ve=ob.u;uc=ob.i;dd=ob.h;vd=ob.ad;Ed=ob.f;fe=ob.S;jc=ob.L;Od=ob.H;qb=ob.c;ic=ob.r;Wb=ob.af;lc=ob.ae;db=
ob.p;Xa=ob.a9;Gb=ob.aa;sc=ob.aq;ub=ob.d;sb=ob.K;fa=ob.m;Db=ob.as;ab=ob._;eb=ob.F;kc=ob.v;Vb=ob.a;pb=ob.l;Nb=ob.ar;zb=ob.ak;rb=ob.N;Ib=ob.ag;da=ob.ah;ka=ob.e;va=ob.T;Fa=ob.b2;M=ob.aC;Aa=ob.au;wb=ob.j;Na=ob.b3;hb=ob.a4;Bb=ob.aF;ba=ob.aB;dc=ob.az;la=ob.b4},function(ob){Fb=ob.a;vb=ob.b;Ia=ob.R;xb=ob.B;Rb=ob._;yc=ob.L},function(ob){id=ob.SystemTooltip}],execute:function(){function ob(Ea){if(Ea&&Ea.isListItem&&"string"===typeof Ea.string)return Ea;if(!Ea||!Ea.isListItem)return{isListItem:!0,string:String(Ea),
value:Ea};var ia=Ea.string||Ea.label||"no item.string";Ea.string=ia&&"string"!==typeof ia?Array.isArray(ia)?ia.map(function(Ca,w){return 0===w%2?String(Ca):""}).join(""):String(ia):String(ia);return Ea}var Pb=window.lively.FreezerRuntime.recorderFor("lively.components/inputs.js");Pb.Morph=Dd;Pb.ViewModel=se;Pb.pt=Rc;Pb.Color=ad;Pb.signal=Ne;Pb.arr=Cb;Pb.string=Sd;Pb.PropertyPath=ve;var tb=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/inputs.js"),Ca=ia.hasOwnProperty("LabeledCheckBoxModel")&&
"function"===typeof ia.LabeledCheckBoxModel?ia.LabeledCheckBoxModel:ia.LabeledCheckBoxModel=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"onRefresh",value:function(){var w=this;this.view&&this.view.withMetaDo({metaInteraction:!0},function(){w.labelMorph.value=w.label;w.checkboxMorph.checked=w.checked})}},{key:"onTrigger",value:function(w){this.setProperty("checked",w);Pb.signal(this,
"checked",w)}},{key:"disable",value:function(){this.active=!1;this.labelMorph.opacity=.5}},{key:"enable",value:function(){this.active=!0;this.labelMorph.opacity=1}},{key:"trigger",value:function(){this.checkboxMorph.trigger()}},{key:"onClick",value:function(w){this.active&&this.trigger();w.stop()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LabeledCheckBoxModel"}},{key:"properties",get:function(){return{alignCheckBox:{defaultValue:"left",type:"Enum",values:["left","right"]},
label:{defaultValue:"a label"},checked:{type:"Boolean"},active:{type:"Boolean",defaultValue:!0},labelMorph:{derived:!0,readOnly:!0,get:function(){return this.ui.label}},checkboxMorph:{derived:!0,readOnly:!0,get:function(){return this.ui.checkbox}},expose:{get:function(){return["checked","active","label"]}},bindings:{get:function(){return[{signal:"onMouseDown",handler:"onClick"},{target:"checkbox",signal:"checked",handler:"onTrigger"}]}}}}}],ia,{pathInPackage:function(){return"./inputs.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:236,end:1908})}(Pb.ViewModel);Pb.LabeledCheckBoxModel=tb;Pb.LabeledCheckBoxModel=tb;var xc=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/inputs.js"),Ca=ia.hasOwnProperty("SearchFieldModel")&&"function"===typeof ia.SearchFieldModel?ia.SearchFieldModel:ia.SearchFieldModel=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(Ca,Ea,[{key:"parseInput",value:function(){var w=Array.from(this.input).reduce(function(ua,ha){if("\\"===ha&&!ua.escaped)return ua.escaped=!0,ua;" "!==ha||ua.escaped?(ua.spaceSeen=!1,ua.current+=ha):(!ua.spaceSeen&&ua.current&&(ua.tokens.push(ua.current),ua.current=""),ua.spaceSeen=!0);ua.escaped=!1;return ua},{tokens:[],current:"",escaped:!1,spaceSeen:!1});w.current&&w.tokens.push(w.current);var ma=w.tokens.map(function(ua){return ua.toLowerCase()});return{tokens:w.tokens,lowercasedTokens:ma}}},
{key:"clearInput",value:function(){this.input="";Pb.signal(this,"searchInput",this.parseInput());this.onBlur()}},{key:"matches",value:function(w){return this.input?this.filterFunction.call(this,this.parseInput(),{string:w}):!0}},{key:"onInputChange",value:function(w){w="replace"===w.selector;this.view.isFocused()&&this.input;this.ui.placeholderIcon&&(this.ui.placeholderIcon.visible=!!this.input);this.input.includes("\n")&&(this.input=this.input.replace("\n",""),this.owner.focus());this.active&&w&&
Pb.signal(this,"searchInput",this.parseInput())}},{key:"onInputBlur",value:function(w){this.active=!1;this.ui.placeholder.visible=!this.input}},{key:"onInputFocus",value:function(w){this.ui.placeholder.visible=!1;this.active=!0}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"SearchFieldModel"}},{key:"properties",get:function(){return{input:{derived:!0,set:function(w){this.view.textString=w},get:function(){return this.view.textString}},fuzzy:{after:["filterFunction","sortFunction"],
set:function(w){this.setProperty("fuzzy",w);w?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var w=this.getProperty("filterFunction");if(!w)return this.defaultFilterFunction;"string"===typeof w&&
(w=eval("(".concat(w,")")));return w}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(w,ma){return w.lowercasedTokens.every(function(ua){return ma.string.toLowerCase().includes(ua)})})}},fuzzySortFunction:{readOnly:!0,get:function(){var w=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(ma,ua){var ha=String(Pb.PropertyPath("string"===typeof w.fuzzy?w.fuzzy:"string").get(ua)).toLowerCase(),
ra=0;ma.lowercasedTokens.forEach(function(mb){ha.startsWith(mb)?ra-=10:ha.includes(mb)&&(ra-=5)});return Pb.arr.sum(ma.lowercasedTokens.map(function(mb){return Pb.string.levenshtein(ha.toLowerCase(),mb)}))+ra})}},fuzzyFilterFunction:{get:function(){var w=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(ma,ua){var ha="string"===typeof w.fuzzy?w.fuzzy:"string";if(ma.lowercasedTokens.every(function(mb){return ua.string.toLowerCase().includes(mb)}))return!0;var ra=String(Pb.PropertyPath(ha).get(ua)).toLowerCase();
return 3>=Pb.arr.sum(ma.lowercasedTokens.map(function(mb){return Pb.string.levenshtein(ra,mb)}))})}},placeHolder:{defaultValue:"Search"},expose:{get:function(){return["matches"]}},bindings:{get:function(){return[{target:"placeholder icon",signal:"onMouseDown",handler:"clearInput"},{signal:"onChange",handler:"onInputChange"},{signal:"onBlur",handler:"onInputBlur"},{signal:"onFocus",handler:"onInputFocus"}]}}}}}],ia,{pathInPackage:function(){return"./inputs.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:1916,end:7491})}(Pb.ViewModel);Pb.SearchFieldModel=xc;Pb.SearchFieldModel=xc;var Pc=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/inputs.js"),Ca=ia.hasOwnProperty("CheckBoxMorph")&&"function"===typeof ia.CheckBoxMorph?ia.CheckBoxMorph:ia.CheckBoxMorph=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(Ca,Ea,[{key:"trigger",value:function(){try{this.checked=!this.checked,Pb.signal(this,"toggle",this.checked)}catch(ma){var w=this.world();w?w.logError(ma):console.error(ma)}}},{key:"onMouseDown",value:function(w){this.active&&this.trigger()}},{key:"render",value:function(w){return w.renderCheckBox(this)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"CheckBoxMorph"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},extent:{defaultValue:Pb.pt(15,
15)},borderWidth:{defaultValue:0},active:{defaultValue:!0},checked:{defaultValue:!1},fill:{defaultValue:Pb.Color.transparent},nativeCursor:{defaultValue:"pointer"}}}}],ia,{pathInPackage:function(){return"./inputs.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:7569,end:8408})}(Pb.Morph);Pb.CheckBoxMorph=Pc;Pb.CheckBoxMorph=
Pc;var nd=window.lively.FreezerRuntime.recorderFor("lively.components/inputs.cp.js");nd.Text=dd;nd.InputLine=vd;nd.Icon=Ed;nd.ShadowObject=fe;nd.Label=jc;nd.HorizontalLayout=Od;nd.component=qb;nd.pt=Rc;nd.rect=ic;nd.Color=ad;nd.LabeledCheckBoxModel=tb;nd.CheckBoxMorph=Pc;nd.SearchFieldModel=xc;nd.InputLineDefault=nd.component["for"](function(){return nd.component({type:nd.InputLine,name:"input line light",highlightWhenFocused:!0,borderColor:nd.Color.rgb(204,204,204),borderRadius:4,dropShadow:new nd.ShadowObject({distance:3,
rotation:75,color:nd.Color.rgba(0,0,0,.2)}),haloShadow:new nd.ShadowObject({distance:4,color:nd.Color.rgba(0,0,0,.26),blur:10}),extent:nd.pt(318.1,34.3),fontFamily:"IBM Plex Sans",fontSize:20,padding:nd.rect(10,3,0,0),placeholder:"Name",submorphs:[{type:nd.Label,name:"placeholder",fontColor:nd.Color.rgb(204,204,204),fontFamily:"IBM Plex Sans",fontSize:20,padding:nd.rect(10,3,0,0),reactsToPointer:!1,textAndAttributes:["Name",null]}]})},{module:"lively.components/inputs.cp.js","export":"InputLineDefault",
range:{start:283,end:1050}},nd.InputLineDefault);nd.InputLineDark=nd.component["for"](function(){return nd.component(nd.InputLineDefault,{name:"input line dark",fill:nd.Color.rgb(229,231,233)})},{module:"lively.components/inputs.cp.js","export":"InputLineDark",range:{start:1090,end:1198}},nd.InputLineDark);nd.LabeledCheckBox=nd.component["for"](function(){return nd.component({defaultViewModel:nd.LabeledCheckBoxModel,name:"labeled check box",extent:nd.pt(66,21),fill:nd.Color.rgba(0,0,0,0),layout:new nd.HorizontalLayout({align:"top",
autoResize:!0,direction:"leftToRight",resizeSubmorphs:!1}),submorphs:[{type:nd.CheckBoxMorph,name:"checkbox"},{type:nd.Label,name:"label",extent:nd.pt(51,21),nativeCursor:"pointer",padding:nd.rect(10,3,-5,0),value:"a label"}]})},{module:"lively.components/inputs.cp.js","export":"LabeledCheckBox",range:{start:1206,end:1716}},nd.LabeledCheckBox);nd.SearchField=nd.component["for"](function(){return nd.component({defaultViewModel:nd.SearchFieldModel,type:nd.Text,name:"search field",fontFamily:"IBM Plex Sans",
styleClasses:["idle"],borderRadius:15,borderWidth:1,clipMode:"hidden",dropShadow:new nd.ShadowObject({distance:0,color:nd.Color.rgb(52,152,219),blur:0}),extent:nd.pt(188,21),fixedHeight:!0,fontColor:nd.Color.rgb(204,204,204),layout:new nd.HorizontalLayout({align:"top",autoResize:!1,direction:"rightToLeft",orderByIndex:!0,reactToSubmorphAnimations:!1,resizeSubmorphs:!1}),padding:nd.rect(6,3,0,0),submorphs:[{type:nd.Label,name:"placeholder",visible:!0,isLayoutable:!1,opacity:.3,padding:nd.rect(6,4,
0,0),reactsToPointer:!1,textAndAttributes:["Search",null]},{type:nd.Label,name:"placeholder icon",autofit:!1,fontColor:nd.Color.rgb(204,204,204),fontSize:14,nativeCursor:"pointer",padding:nd.rect(2,4,3,0),textAndAttributes:nd.Icon.textAttribute("times-circle"),visible:!1}]})},{module:"lively.components/inputs.cp.js","export":"SearchField",range:{start:1760,end:2891}},nd.SearchField);tb=bd("f",nd.LabeledCheckBox);xc=bd("S",nd.SearchField);var Id=bd("I",nd.InputLineDefault);Pc=bd("h",nd.InputLineDark);
nd.LabeledCheckBox=tb;nd.SearchField=xc;nd.InputLineDefault=Id;nd.InputLineDark=Pc;var Hb=window.lively.FreezerRuntime.recorderFor("lively.components/list.js");Hb.asItem=ob;Hb.Morph=Dd;Hb.Text=dd;Hb.Label=jc;Hb.Icon=Ed;Hb.morph=Wb;Hb.touchInputDevice=lc;Hb.part=db;Hb.pt=Rc;Hb.Color=ad;Hb.Rectangle=Xa;Hb.arr=Cb;Hb.Path=ve;Hb.string=Sd;Hb.signal=Ne;Hb.noUpdate=Gb;Hb.once=sc;Hb.connect=ub;Hb.Button=Fb;Hb.ButtonModel=vb;Hb.asItem=ob;Pc=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/list.js"),
Ca=ia.hasOwnProperty("ListItemMorph")&&"function"===typeof ia.ListItemMorph?ia.ListItemMorph:ia.ListItemMorph=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"displayItem",value:function(w,ma,ua,ha,ra){var mb=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!1,E=6<arguments.length?arguments[6]:void 0;if(this.itemIndex!==ma||mb!==this.isSelected||w.fontFamily!==this.fontFamily){var R=
w.morph,Ya=R?"":w.label||w.string||"no item.string";w.annotation?this.valueAndAnnotation={value:Ya,annotation:w.annotation}:"string"===typeof Ya?this.textString=Ya:this.value=Ya;this.tooltip=w.tooltip||this.tooltip||this.textString;!1===w.tooltip&&(this.tooltip=!1);this.itemIndex=ma;this.position=ra;if(E){Ya=E.fontFamily;var gb=E.selectionColor,$b=E.selectionFontColor,Sc=E.nonSelectionFontColor,Ic=E.borderRadius,Pd=E.fontSize;E=E.padding;$b&&this.selectionFontColor!==$b&&(this.selectionFontColor=
$b);Sc&&this.nonSelectionFontColor!==Sc&&(this.nonSelectionFontColor=Sc);gb&&this.selectionColor!==gb&&(this.selectionColor=gb);Ic&&Ic!==this.borderRadius&&(this.borderRadius=Ic);Pd&&this.fontSize!==Pd&&(this.fontSize=Pd);Ya&&this.fontFamily!==Ya&&(this.fontFamily=Ya);E&&!this.padding.equals(E)&&(this.padding=E)}w.autoFit&&(R.width=ua);this.extent=Hb.pt(R?Math.max(R.width,ua):ua,ha);R?(E=R.getTransform().copy(),this.submorphs=[R],R.setTransform(E),R.position=Hb.pt(0,0)):this.submorphs.length&&(this.submorphs=
[]);this.isSelected=mb}}},{key:"onDragStart",value:function(w){var ma=this.list;this._dragState={sourceIsSelected:this.isSelected,source:this,itemsTouched:[]};if(!ma.multiSelect||!ma.multiSelectViaDrag)ma.onItemMorphDragged(w,this)}},{key:"onMouseDown",value:function(w){uc._get(Object.getPrototypeOf(Ca.prototype),"onMouseDown",this).call(this,w);this.list.clickOnItem(w)}},{key:"onDrag",value:function(w){var ma=this.list;if(ma.multiSelect&&ma.multiSelectViaDrag){w=w.hand.morphBeneath(w.position);var ua=
ma.selectedIndexes,ha=ma.itemMorphs;w!==this&&ha.includes(w)&&(this._dragState.sourceIsSelected&&!w.isSelected?(Hb.arr.pushIfNotIncluded(ua,w.itemIndex),ma.selectedIndexes=ua):!this._dragState.sourceIsSelected&&w.isSelected&&(Hb.arr.remove(ua,w.itemIndex),ma.selectedIndexes=ua))}}},{key:"isListItemMorph",get:function(){return!0}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ListItemMorph"}},{key:"properties",get:function(){return{clipMode:{defaultValue:"hidden"},autofit:{defaultValue:!1},
isSelected:{defaultValue:!1},draggable:{defaultValue:!Hb.touchInputDevice},fill:{derived:!0,get:function(){return Hb.touchInputDevice&&this.pressed?Hb.Color.gray.withA(.5):this.isSelected?this.selectionColor:Hb.Color.transparent}},itemIndex:{defaultValue:void 0},selectionFontColor:{isStyleProp:!0,defaultValue:Hb.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:Hb.Color.blue},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Hb.Color.rgbHex("333")},fontColor:{derived:!0,
get:function(){return this.isSelected?this.selectionFontColor:this.nonSelectionFontColor}},list:{drived:!0,get:function(){return this.owner.owner}}}}}],ia,{pathInPackage:function(){return"./list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:881,end:5656})}(Hb.Label);Hb.ListItemMorph=Pc;Hb.ListItemMorph=Pc;var Kd=function(Ea){var ia=
window.lively.FreezerRuntime.recorderFor("lively.components/list.js"),Ca=ia.hasOwnProperty("ListScroller")&&"function"===typeof ia.ListScroller?ia.ListScroller:ia.ListScroller=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"onScroll",value:function(w){return this.owner.update()}},{key:"onMouseDown",value:function(w){var ma=this,ua=this.scroll.y;if(Hb.touchInputDevice){var ha=this.owner.itemForClick(w);
ha&&(ha.pressed=!0,ha.makeDirty(),setTimeout(function(){ha.pressed=!1;if(0===ua-ma.scroll.y)return ma.owner.clickOnItem(w)},300))}else return this.owner.clickOnItem(w)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ListScroller"}},{key:"properties",get:function(){return{name:{defaultValue:"scroller"},fill:{defaultValue:Hb.Color.transparent},clipMode:{defaultValue:"auto"},scrollbar:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.submorphs[0]}},submorphs:{initialize:function(){this.submorphs=
[{name:"scrollbar",fill:Hb.Color.transparent}]}}}}}],ia,{pathInPackage:function(){return"./list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:5664,end:6765})}(Hb.Morph);Hb.ListScroller=Kd;Hb.ListScroller=Kd;Hb.listCommands=[{name:"page up",exec:function(Ea){return Ea.gotoIndex(Math.max(0,Ea.selectedIndex-Math.round(Ea.height/
Ea.itemHeight)))}},{name:"page down",exec:function(Ea){return Ea.gotoIndex(Math.min(Ea.items.length-1,Ea.selectedIndex+Math.round(Ea.height/Ea.itemHeight)))}},{name:"goto first item",exec:function(Ea){return Ea.gotoIndex(0)}},{name:"goto last item",exec:function(Ea){return Ea.gotoIndex(Ea.items.length-1)}},{name:"arrow up",exec:function(Ea){return Ea.gotoIndex(Ea.indexUp())}},{name:"arrow down",exec:function(Ea){return Ea.gotoIndex(Ea.indexDown())}},{name:"select up",exec:function(Ea){var ia=Ea.selectedIndexes;
if(!Ea.multiSelect||!ia.length)return Ea.execCommand("arrow up");var Ca=ia[0];if("number"!==typeof Ca)Ea.selectedIndexes=[Ca];else{var w=Ea.indexUp(Ca);ia.includes(Ca)&&ia.includes(w)?Ea.selectedIndexes=ia.filter(function(ma){return ma!==Ca}):Ea.selectedIndexes=[w].concat(ia.filter(function(ma){return ma!==w}))}return!0}},{name:"select down",exec:function(Ea){var ia=Ea.selectedIndexes;if(!Ea.multiSelect||!ia.length)return Ea.execCommand("arrow down");var Ca=ia[0],w=Ea.indexDown(Ca);ia.includes(Ca)&&
ia.includes(w)?Ea.selectedIndexes=ia.filter(function(ma){return ma!==Ca}):Ea.selectedIndexes=[w].concat(ia.filter(function(ma){return ma!==w}));return!0}},{name:"select all",exec:function(Ea){Ea.selectedIndexes=Hb.arr.range(Ea.items.length-1,0);Ea.scrollIndexIntoView(Ea.selectedIndexes[0]);return!0}},{name:"select via filter",exec:function(){var Ea=ab(regeneratorRuntime.mark(function w(Ca){var ma,ua,ha;return regeneratorRuntime.wrap(function(ra){for(;;)switch(ra.prev=ra.next){case 0:return ma=Ca.selectedIndex||
0,ra.next=3,Ca.world().filterableListPrompt("Select item",Ca.items,{preselect:ma,requester:Ca.getWindow()||Ca,itemPadding:Hb.Rectangle.inset(0,2),multiSelect:!0});case 3:return ua=ra.sent,ha=ua.selected,ha.length&&(Ca.multiSelect?Ca.selections=ha:Ca.selection=ha[0],Ca.scrollSelectionIntoView(),Ca.update()),ra.abrupt("return",!0);case 7:case "end":return ra.stop()}},w)}));return function(Ca){return Ea.apply(this,arguments)}}()},{name:"realign top-bottom-center",exec:function(Ea){if(Ea.selection){var ia=
Ea.padding,Ca=Ea.itemHeight,w=Ea.scroll,ma=w.x;w=w.y;var ua=Hb.pt(0,Ea.selectedIndex*Ca);ia=Ea.height-Ca-ia.top()-ia.bottom();w=2>Math.abs(ua.y-w)?ua.y-ia:2>Math.abs(ua.y-w-.5*ia)?ua.y:ua.y-.5*ia;Ea.scroll=Hb.pt(ma,w);return!0}}},{name:"print contents in text window",exec:function(Ea){var ia="items of "+Ea.name,Ca=Ea.items.map(function(w){if("string"===typeof w)return w;var ma=w.string,ua=w.label;w=w.annotation;var ha="";ua?ha="string"===typeof ua?ha+ua:ha+ua.map(function(ra,mb){return 0===mb%2?ra:
""}).join(""):ma&&(ha+=ma);w&&(ha+=" ",ha="string"===typeof w?ha+w:ha+w[0]);return ha}).join("\n");return Ea.world().execCommand("open text window",{title:ia,content:Ca,name:ia,fontFamily:"Monaco, monospace"})}}];tb=bd("b",function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/list.js"),Ca=ia.hasOwnProperty("List")&&"function"===typeof ia.List?ia.List:ia.List=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(Ca,Ea,[{key:"__additionally_serialize__",value:function(w,ma,ua,ha){var ra=this;uc._get(Object.getPrototypeOf(Ca.prototype),"__additionally_serialize__",this).call(this,w,ma,ua,ha);this.whenRendered().then(function(){return ra.update()})}},{key:"onLoad",value:function(){this.scroller.visible=Hb.touchInputDevice}},{key:"initializeSubmorphs",value:function(w){this.submorphs=w=w||this.submorphs||[];for(var ma=0;ma<w.length;ma++)switch(w[ma].name){case "listItemContainer":var ua=
w[ma];continue;case "scroller":var ha=w[ma]}ha||(ha=this.addMorph(new Hb.ListScroller({draggable:!1,grabbable:!1,acceptsDrops:!1,halosEnabled:!1,name:"scroller"})));ua||this.addMorph({name:"listItemContainer",fill:Hb.Color.transparent,halosEnabled:!1,reactsToPointer:!1,acceptsDrops:!1,draggable:!1});(ua||ha)&&this.update()}},{key:"isList",get:function(){return!0}},{key:"onChange",value:function(w){"fontFamily fontColor fontSize padding selectionFontColor selectionColor nonSelectionFontColor itemPadding items".split(" ").includes(w.prop)&&
this.update();return uc._get(Object.getPrototypeOf(Ca.prototype),"onChange",this).call(this,w)}},{key:"itemForClick",value:function(w){w=w.positionIn(this.world()).subPt(this.scroll);w=this.listItemContainer.morphsContainingPoint(w);return w.find(function(ma){return ma.isListItem})||w[0]}},{key:"clickOnItem",value:function(w){var ma=this.itemForClick(w);if(ma){var ua=w.state.clickCount;if(!(w.positionIn(this).x>this.width-this.scrollbarOffset.x))this[2===ua?"onItemMorphDoubleClicked":"onItemMorphClicked"](w,
ma)}}},{key:"connections",get:function(){return{selection:{signalOnAssignment:!1}}}},{key:"invalidateCache",value:function(){this.manualItemHeight||this.setProperty("itemHeight",null)}},{key:"find",value:function(w){return this.items.find(function(ma){return ma===w||ma.value===w})}},{key:"findIndex",value:function(w){return this.items.findIndex(function(ma){return ma===w||ma.value===w})}},{key:"addItem",value:function(w){return this.addItemAt(w)}},{key:"addItemAt",value:function(w){var ma=this,ua=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.items.length,ha=this.items;ua=Math.min(ha.length,Math.max(0,ua));ha.splice(ua,0,Hb.asItem(w));this.addMethodCallChangeDoing({target:this,selector:"addItemAt",args:[w,ua],undo:{target:this,selector:"removeItem",args:[w]}},function(){return ma.update()})}},{key:"removeItem",value:function(w){var ma=this;w=this.find(w);var ua=this.items,ha=ua.indexOf(w);-1!==ha&&(ua.splice(ha,1),this.addMethodCallChangeDoing({target:this,selector:"removeItem",
args:[w],undo:{target:this,selector:"addItemAt",args:[w,ha]}},function(){return ma.update()}))}},{key:"selectItemMorph",value:function(w){this.selectedIndexes=[w.itemIndex]}},{key:"gotoIndex",value:function(w){if(this.arrowNavigationProhibited)return!1;this.scrollIndexIntoView(this.selectedIndex=w);return!0}},{key:"indexUp",value:function(w){w="number"===typeof w?w:this.selectedIndex;return(w||this.items.length)-1}},{key:"indexDown",value:function(){var w=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:this.selectedIndex;return(("number"===typeof w?w:-1)+1)%this.items.length}},{key:"update",value:function(){var w=this,ma=this.items;ma&&this.scroller&&this.dontRecordChangesWhile(function(){var ua=w.itemHeight,ha=w.itemMorphs,ra=w.listItemContainer,mb=w.selectedIndexes,E=w.extent,R=E.x,Ya=E.y,gb=w.fontSize,$b=w.fontFamily,Sc=w.fontColor;E=w.padding;var Ic=void 0===E?Xa.inset(0):E,Pd=w.itemPadding,Zd=w.selectionColor,ge=w.selectionFontColor,Ce=w.nonSelectionFontColor,$e=w.itemBorderRadius;
E=w.scrollBar;var pf=w.scroller,ig=w.scrollable,Xf=pf.scroll.y,Vg=Ic.top(),Re=Ic.left(),ae=Ic.bottom();Ic=Ic.right();var Sb=Math.max(0,Math.floor(Xf/ua)),Hd=Math.min(ma.length,Sb+Ya/ua+2),hf=0,zf=R-(Re+Ic);ha=Hb.arr.sortBy(ha,function(Gg){return Gg.itemIndex});R=Hb.arr.partition(ha,function(Gg){return Gg.itemIndex<Sb});Ya=sb(R,2);R=Ya[0];Ic=Ya[1];Ya=Hb.arr.partition(Ic,function(Gg){return Gg.itemIndex>Hd-1});Ic=sb(Ya,2);Ya=Ic[0];Ic=Ic[1];ha=[].concat(fa(Ya),fa(Ic),fa(R));R=function(Gg){var vg=Sb+
Gg,tg=ma[vg];if(!tg)return ha.slice(Gg).forEach(function(Ga){Ga.remove()}),"break";var pd={fontSize:gb,fontFamily:$b,fontColor:Ce||Sc,padding:Pd,borderRadius:$e||0,selectionFontColor:ge,nonSelectionFontColor:Ce,selectionColor:Zd},Z=ha[Gg];Z||w.withMetaDo({skipReconciliation:!0},function(){Z=ha[Gg]=ra.addMorph(new Hb.ListItemMorph(pd))});Z.reactsToPointer=!ig;Z.displayItem(tg,vg,zf,ua,Hb.pt(0,ua*vg),mb.includes(vg),pd);hf=Math.max(hf,Z.width)};for(Ya=0;Ya<Hd-Sb&&"break"!==R(Ya);Ya++);ha.slice(Hd-Sb).forEach(function(Gg){return Gg.remove()});
ae=Math.max(Vg+ae+ua*ma.length,w.height);ra.setBounds(Hb.pt(Re,Vg).subXY(0,Xf).extent(Hb.pt(w.width,ae)));pf.extent=w.extent.subXY(w.borderWidthRight,w.borderWidthBottom);E.left=hf/2;pf.position=Hb.pt(0,0);E.extent=Hb.pt(1,ae)})}},{key:"scrollSelectionIntoView",value:function(){this.selection&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(w){var ma=this.itemHeight,ua=this.itemScroll;w=new Hb.Rectangle(0,w*ma,this.width,ma);ma=this.innerBounds().insetByRect(this.padding).translatedBy(ua);
var ha=0;w.bottom()>ma.bottom()&&(ha=w.bottom()-ma.bottom());w.top()<ma.top()&&(ha=w.top()-ma.top());this.itemScroll=ua.addXY(0,ha);this.update()}},{key:"onItemMorphDoubleClicked",value:function(w,ma){}},{key:"onItemMorphClicked",value:function(w,ma){if(void 0!==ma.itemIndex){var ua=ma.itemIndex;ma=this.selectedIndexes;var ha=ma.includes(ua),ra=[];if(this.multiSelect)if(w.isShiftDown())if(ha)ra=ma.filter(function(E){return E!==ua});else{w=ma[0];var mb="number"===typeof w?Hb.arr.range(ua,w):[ua];ra=
mb.concat(ma.filter(function(E){return!mb.includes(E)}))}else ra=this.multiSelectWithSimpleClick||w.isCommandKey()?ha?ma.filter(function(E){return E!==ua}):[ua].concat(ma.filter(function(E){return E!==ua})):[ua];else ra=[ua];this.selectedIndexes=ra}}},{key:"onItemMorphDragged",value:function(w,ma){}},{key:"onHoverIn",value:function(w){this.scrollable&&(this.scroller.visible=!0)}},{key:"onHoverOut",value:function(w){Hb.touchInputDevice||(this.scroller.visible=!1)}},{key:"onDragStart",value:function(w){}},
{key:"onDrag",value:function(w){}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-A",mac:"Meta-A"},command:"select all"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},
{keys:"Ctrl-L",command:"realign top-bottom-center"}].concat(uc._get(Object.getPrototypeOf(Ca.prototype),"keybindings",this))}},{key:"commands",get:function(){return Hb.listCommands}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"List"}},{key:"properties",get:function(){return{fill:{defaultValue:Hb.Color.white},clipMode:{defaultValue:"hidden"},selectionFontColor:{isStyleProp:!0,defaultValue:Hb.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:Hb.Color.rgb(21,
101,192)},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Hb.Color.rgbHex("333")},fontColor:{isStyleProp:!0,defaultValue:Hb.Color.rgbHex("333")},styleClasses:{defaultValue:["default"]},itemScroll:{derived:!0,after:["submorphs"],get:function(){return this.scroller?this.scroller.scroll:Hb.pt(0,0)},set:function(w){this.scroller&&(this.scroller.scroll=w)}},extent:{defaultValue:Hb.pt(400,360),set:function(w){w.eqPt(this.extent)||(this.setProperty("extent",w),this.update())}},fontFamily:{isStyleProp:!0,
defaultValue:"Helvetica Neue, Arial, sans-serif",set:function(w){this.setProperty("fontFamily",w);this.invalidateCache()}},fontSize:{isStyleProp:!0,defaultValue:12,set:function(w){this.setProperty("fontSize",w);this.invalidateCache()}},padding:{isStyleProp:!0,defaultValue:Hb.Rectangle.inset(3)},itemBorderRadius:{isStyleProp:!0,defaultValue:0,set:function(w){this.setProperty("itemBorderRadius",w);this.invalidateCache()}},itemPadding:{isStyleProp:!0,defaultValue:Hb.Rectangle.inset(1),set:function(w){this.setProperty("itemPadding",
w);this.invalidateCache()}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(w){this.setProperty("items",w.map(Hb.asItem));this.itemScroll=Hb.pt(0,0);this.update();this.attributeConnections&&Hb.signal(this,"values",this.values)}},multiSelect:{defaultValue:!1},multiSelectWithSimpleClick:{description:"Does a simple click toggle selections without deselecting?",defaultValue:!1},multiSelectViaDrag:{description:"Does dragging extend selection?",defaultValue:!0},values:{group:"list",
after:["items"],readOnly:!0,get:function(){return this.items.map(function(w){return w.value})}},selectedIndex:{group:"list",defaultValue:[],after:["selectedIndexes"],get:function(){return this.selectedIndexes[0]},set:function(w){return this.selectedIndexes="number"===typeof w?[w]:[]}},selectedIndexes:{get:function(){return this.getProperty("selectedIndexes")||[]},set:function(w){var ma=this.items.length;this.setProperty("selectedIndexes",(w||[]).filter(function(ua){return 0<=ua&&ua<ma}));this.update();
Hb.signal(this,"selection",this.selection)}},selection:{group:"list",after:["selections"],get:function(){return this.selections[0]},set:function(w){this.selections=[w]}},selections:{group:"list",after:["selectedIndexes"],get:function(){var w=this;return this.selectedIndexes.map(function(ma){return w.items[ma]&&w.items[ma].value})},set:function(w){var ma=this;this.selectedIndexes=w.map(function(ua){return ma.findIndex(ua)})}},selectedItems:{after:["selectedIndexes"],readOnly:!0,get:function(){var w=
this;return this.selectedIndexes.map(function(ma){return w.items[ma]})}},submorphs:{initialize:function(w){this.initializeSubmorphs(w)}},listItemContainer:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("listItemContainer")}},itemMorphs:{after:["submorphs"],readOnly:!0,get:function(){return this.listItemContainer.submorphs}},scrollBar:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scrollbar")}},scroller:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scroller")}},
scrollable:{derived:!0,get:function(){return this.padding.top()+this.items.length*this.itemHeight>this.height}},manualItemHeight:{type:"Boolean"},itemHeight:{isStyleProp:!0,after:["fontFamily","fontSize","itemPadding"],defaultValue:10,set:function(w){this.setProperty("itemHeight",w);this.manualItemHeight="number"===typeof w;this.update()},get:function(){var w=this.getProperty("itemHeight");if(w)return w;w=this.env.fontMetric.defaultLineHeight({fontFamily:this.fontFamily,fontSize:this.fontSize});var ma=
this.itemPadding;ma&&(w+=ma.top()+ma.bottom());this.setProperty("itemHeight",w);return w}},theme:{after:["styleClasses"],defaultValue:"default",set:function(w){this.removeStyleClass(this.theme);this.addStyleClass(w);this.setProperty("theme",w)}}}}}],ia,{pathInPackage:function(){return"./list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},
{start:10917,end:28286})}(Hb.Morph));Hb.List=tb;Hb.List=tb;var vc=bd("F",function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/list.js"),Ca=ia.hasOwnProperty("FilterableList")&&"function"===typeof ia.FilterableList?ia.FilterableList:ia.FilterableList=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var w=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};w.bounds||w.extent||(w.extent=Hb.pt(400,360));uc._get(Object.getPrototypeOf(Ca.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,w);Hb.connect(this.inputMorph,"inputChanged",this,"updateFilter");Hb.connect(this.listMorph,"selection",this,"selectionChanged");Hb.connect(this.listMorph,"onItemMorphDoubleClicked",this,"acceptInput");this.updateFilter();Hb.connect(this,"extent",this,"relayout")}},{key:"resetConnections",value:function(){var w=
this,ma=this.attributeConnections;if(ma){var ua=["accepted","canceled","remove"];ma.filter(function(ha){return ua.includes(ha.sourceAttrName)&&ha.targetObj!==w}).forEach(function(ha){return ha.disconnect()})}}},{key:"isList",get:function(){return!0}},{key:"relayout",value:function(){var w=this,ma=this.listMorph,ua=this.inputMorph,ha=this.paddingMorph,ra=this.borderWidth;this.withMetaDo({metaInteraction:!0},function(){ua.topLeft=Hb.pt(ra,ra);ua.width=ma.width=w.width-2*ra;ha&&(ha.topLeft=ua.bottomLeft);
ma.position=ha?ha.bottomLeft:ua.bottomLeft;ma.height=Math.floor(w.height-ma.top-ra)})}},{key:"focus",value:function(){this.get("input").focus()}},{key:"selectionChanged",value:function(w){Hb.signal(this,"selection",w)}},{key:"scrollSelectionIntoView",value:function(){return this.listMorph.scrollSelectionIntoView()}},{key:"parseInput",value:function(){var w=this.get("input").textString,ma=Array.from(w).reduce(function(ha,ra){if("\\"===ra&&!ha.escaped)return ha.escaped=!0,ha;" "!==ra||ha.escaped?(ha.spaceSeen=
!1,ha.current+=ra):(!ha.spaceSeen&&ha.current&&(ha.tokens.push(ha.current),ha.current=""),ha.spaceSeen=!0);ha.escaped=!1;return ha},{tokens:[],current:"",escaped:!1,spaceSeen:!1});ma.current&&ma.tokens.push(ma.current);var ua=ma.tokens.map(function(ha){return ha.toLowerCase()});return{tokens:ma.tokens,lowercasedTokens:ua,input:w}}},{key:"updateFilter",value:function(){var w=this,ma=this.parseInput(),ua=this.filterFunction,ha=this.sortFunction,ra=this.items.filter(function(R){return ua.call(w,ma,R)});
ha&&(ra=Hb.arr.sortBy(ra,function(R){return ha.call(w,ma,R)}));var mb=this.listMorph,E=this.updateSelectionsAfterFilter?mb.selectedIndexes.map(function(R){return ra.indexOf(mb.items[R])}).filter(function(R){return-1!==R}):mb.selectedIndexes;mb.items=ra;mb.selectedIndexes=E.length?E:ra.length?[0]:[];this.scrollSelectionIntoView();Hb.signal(this,"filterChanged",{parsedInput:ma,items:mb.items})}},{key:"acceptInput",value:function(){var w=this.listMorph;this.get("input").acceptInput();w={filtered:this.items,
selected:w.selections,action:this.selectedAction,status:"accepted"};Hb.signal(this,"accepted",w);return w}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Enter",command:"accept input"},
{keys:"Escape|Ctrl-G",command:"cancel"},{keys:"Tab",command:"choose action"}].concat(fa(Hb.arr.range(0,8).map(function(w){return{keys:"Alt-"+(w+1),command:{command:"choose action and accept input",args:{actionNo:w}}}}))).concat(uc._get(Object.getPrototypeOf(Ca.prototype),"keybindings",this))}},{key:"commands",get:function(){var w=this;return uc._get(Object.getPrototypeOf(Ca.prototype),"commands",this).concat([{name:"accept input",exec:function(ma){w.acceptInput();return!0}},{name:"cancel",exec:function(ma){Hb.signal(ma,
"canceled");return!0}},{name:"choose action and accept input",exec:function(ma){var ua=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).actionNo;ma.selectedAction=(ma.actions||[])[void 0===ua?0:ua];return ma.execCommand("accept input")}},{name:"choose action",exec:function(){var ma=ab(regeneratorRuntime.mark(function ra(ha){var mb,E,R;return regeneratorRuntime.wrap(function(Ya){for(;;)switch(Ya.prev=Ya.next){case 0:if(ha.actions){Ya.next=2;break}return Ya.abrupt("return",!0);case 2:return mb=
Object.assign({},ha.style,{extent:ha.extent}),E=new Hb.FilterableList(mb),E.openInWorld(ha.globalPosition),E.items=ha.actions,R=ha.actions.indexOf(ha.selectedAction),-1===R&&(R=0),E.selectedIndex=R,Hb.connect(E,"accepted",ha,"selectedAction",{converter:function(gb){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return gb.selected[0]}}),Hb.connect(E,"canceled",ha,"selectedAction",{converter:function(gb){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return this.targetObj.selectedAction}}),
E.focus(),Ya.abrupt("return",!0);case 13:case "end":return Ya.stop()}},ra)}));return function(ha){return ma.apply(this,arguments)}}()}].concat(fa(Hb.listCommands.map(function(ma){return Object.assign({},ma,{exec:function(ua,ha,ra){return ma.exec(w.listMorph,ha,ra)}})}))))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"FilterableList"}},{key:"properties",get:function(){return{fill:{defaultValue:Hb.Color.transparent},borderWidth:{defaultValue:1},updateSelectionsAfterFilter:{defaultValue:!1},
theme:{after:["styleClasses","listMorph"],defaultValue:"default",set:function(w){this.removeStyleClass(this.theme);this.listMorph.removeStyleClass(this.theme);this.addStyleClass(w);this.listMorph.addStyleClass(w);this.setProperty("theme",w)}},submorphs:{initialize:function(){var w=this;this.submorphs=[Hb.Text.makeInputLine({name:"input",highlightWhenFocused:!1,fixedHeight:!1,autofit:!1}),new Hb.morph({name:"padding",fill:Hb.Color.transparent}),new Hb.List({name:"list",items:[]})];this.get("list").whenRendered().then(function(){return w.get("list").update()})}},
paddingMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("padding")}},listMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("list")}},inputMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("input")}},fontFamily:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontFamily},set:function(w){this.listMorph.fontFamily=w;this.inputMorph.fontFamily=
w}},padding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.padding},set:function(w){this.listMorph.padding=w;this.inputMorph.padding=w}},fontSize:{isStyleProp:!0,group:"styling",derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontSize},set:function(w){this.listMorph.fontSize=w}},itemPadding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.itemPadding},set:function(w){this.listMorph.itemPadding=w}},inputPadding:{isStyleProp:!0,
derived:!0,after:["submorphs","padding"],get:function(){return this.inputMorph.padding},set:function(w){this.inputMorph.padding=w}},input:{derived:!0,after:["submorphs"],defaultValue:"",get:function(){return this.inputMorph.input},set:function(w){this.inputMorph.input=w}},historyId:{derived:!0,after:["submorphs"],defaultValue:null,get:function(){return this.inputMorph.historyId},set:function(w){this.inputMorph.historyId=w}},multiSelect:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.multiSelect},
set:function(w){this.listMorph.multiSelect=w}},items:{after:["submorphs","fuzzy","fuzzySortFunction","fuzzyFilterFunction"],defaultValue:[],set:function(w){this.setProperty("items",w.map(Hb.asItem));this.updateFilter()}},visibleItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.items}},selection:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selection},set:function(w){this.listMorph.selection=w}},selectedIndex:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndex},
set:function(w){this.listMorph.selectedIndex=w}},selectedIndexes:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndexes},set:function(w){this.listMorph.selectedIndexes=w}},selectedItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedItems},set:function(w){this.listMorph.selectedItems=w}},selections:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selections},set:function(w){this.listMorph.selections=w}},fuzzy:{derived:!0,
after:["filterFunction","sortFunction"],set:function(w){this.setProperty("fuzzy",w);w?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction===this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var w=this.getProperty("filterFunction");if(!w)return this.defaultFilterFunction;
"string"===typeof w&&(w=eval("(".concat(w,")")));return w}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(w,ma){return w.lowercasedTokens.every(function(ua){return ma.string.toLowerCase().includes(ua)})})}},fuzzySortFunction:{get:function(){var w=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(ma,ua){var ha=String(Hb.Path("string"===typeof w.fuzzy?w.fuzzy:"string").get(ua)).toLowerCase(),
ra=0;ma.lowercasedTokens.forEach(function(mb){ha.startsWith(mb)?ra-=10:ha.includes(mb)&&(ra-=5)});return Hb.arr.sum(ma.lowercasedTokens.map(function(mb){return Hb.string.levenshtein(ha.toLowerCase(),mb)}))+ra})}},fuzzyFilterFunction:{get:function(){var w=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(ma,ua){var ha="string"===typeof w.fuzzy?w.fuzzy:"string";if(ma.lowercasedTokens.every(function(mb){return ua.string.toLowerCase().includes(mb)}))return!0;var ra=String(Hb.Path(ha).get(ua)).toLowerCase();
return 3>=Hb.arr.sum(ma.lowercasedTokens.map(function(mb){return Hb.string.levenshtein(ra,mb)}))})}},selectedAction:{get:function(){return this.getProperty("selectedAction")||"default"}},actions:{}}}}],ia,{pathInPackage:function(){return"./list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:28354,end:43510})}(Hb.Morph));
Hb.FilterableList=vc;Hb.FilterableList=vc;xc=bd("j",function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/list.js"),Ca=ia.hasOwnProperty("DropDownList")&&"function"===typeof ia.DropDownList?ia.DropDownList:ia.DropDownList=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"fitLabelMorph",value:function(){}},{key:Symbol["for"]("lively-instance-initialize"),value:function(w){uc._get(Object.getPrototypeOf(Ca.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,w);Hb.connect(this,"fire",this,"toggleList")}},{key:"onLoad",value:function(){this.listMorph.selection||(this.listMorph.selection=this.labelMorph.value[0])}},{key:"isListVisible",value:function(){return!!this.listMorph.world()}},{key:"removeWhenFocusLost",value:function(w){var ma=this;setTimeout(function(){var ua=ma.listMorph,ha=ma.world()&&ma.world().focusedMorph;ha!==ua&&ha!==ma&&ua.world()&&!ua.withAllSubmorphsDetect(function(ra){return ra===
ha})?ua.fadeOut(200):ua.world()&&(ua=Hb.touchInputDevice?ua.scroller:ua,Hb.once(ua,"onBlur",ma,"removeWhenFocusLost"),ua.focus())},100)}},{key:"adjustLableFor",value:function(w){w=w.label||[w.string,null];w=[].concat(fa(w),[" ",null],fa(Hb.Icon.textAttribute("caret-"+("bottom"===this.listAlign?"down":"up"))));w[5]&&(w[5].paddingRight="0px",w[5].textStyleClasses=["fa","annotation"]);this.label=w;this.relayout()}},{key:"toggleList",value:function(){var w=ab(regeneratorRuntime.mark(function ua(){var ha,
ra,mb;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:ha=this.listMorph;if(!this.isListVisible()){E.next=8;break}Hb.signal(this,"deactivated");this.selection=ha.selection;ha.epiMorph=!1;ha.remove();E.next=22;break;case 8:return Hb.signal(this,"activated"),this.openListInWorld?(ha.openInWorld(),ha.epiMorph=!0,ha.hasFixedPosition=!0,ha.setTransform(this.getGlobalTransform()),ra=this.globalBounds()):(ra=this.innerBounds(),this.addMorph(ha)),mb=ha.items.length*ha.itemHeight+
ha.padding.top()+ha.padding.bottom(),ha.extent=Hb.pt(this.width,Math.min(this.listHeight,mb)),"top"===this.listAlign?ha.bottomLeft=ra.topLeft():ha.topLeft=ra.bottomLeft(),ha.moveBy(this.listOffset||Hb.pt(0,0)),Hb.once(ha,"onItemMorphClicked",this,"toggleList"),Hb.once(Hb.touchInputDevice?ha.scroller:ha,"onBlur",this,"removeWhenFocusLost"),E.next=18,ha.whenRendered();case 18:return E.next=20,ha.whenRendered();case 20:Hb.touchInputDevice?ha.scroller.focus():ha.focus(),ha.scrollSelectionIntoView();case 22:case "end":return E.stop()}},
ua,this)}));return function(){return w.apply(this,arguments)}}()},{key:"commands",get:function(){var w=this;return[{name:"accept",exec:function(){w.isListVisible()&&w.toggleList();return!0}},{name:"cancel",exec:function(){w.isListVisible()&&w.listMorph.remove();return!0}}].concat(uc._get(Object.getPrototypeOf(Ca.prototype),"commands",this))}},{key:"keybindings",get:function(){return uc._get(Object.getPrototypeOf(Ca.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept"},{keys:"Escape|Ctrl-G",
command:"cancel"}])}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DropDownList"}},{key:"properties",get:function(){return{padding:{defaultValue:Hb.Rectangle.inset(3,2)},listHeight:{defaultValue:100},listAlign:{type:"Enum",values:["bottom","top"],defaultValue:"bottom"},listOffset:{isStyleProp:!0,defaultValue:Hb.pt(0,0)},openListInWorld:{defaultValue:!1},listMorph:{after:["labelMorph"],get:function(){var w=this.getProperty("listMorph");if(w)return w;w=new Hb.List({name:"dropDownList"});
this.setProperty("listMorph",w);return w}},items:{derived:!0,after:["listMorph"],get:function(){return this.listMorph.items},set:function(w){var ma=this,ua=this.items.find(function(ha){return ha.value===ma.selection});this.listMorph.items=w;ua&&Hb.noUpdate(function(){ma.selection=ma.items[0].value})}},selection:{after:["listMorph","items"],derived:!0,get:function(){return this.listMorph.selection},set:function(w){var ma=this.listMorph;if(w){var ua=ma.items,ha=ma.find(w);ha||"string"!==typeof w||(ha=
ua.find(function(ra){return ra.string===w}));if(!ha)return;this.adjustLableFor(ha);ma.selectedIndex=ua.indexOf(ha)}else ma.selection=null,this.label="";Hb.signal(this,"selection",ma.selection)}}}}}],ia,{pathInPackage:function(){return"./list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:43518,end:48636})}(Hb.Button));Hb.DropDownList=
xc;Hb.DropDownList=xc;var Qc=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/list.js"),Ca=ia.hasOwnProperty("InteractiveItem")&&"function"===typeof ia.InteractiveItem?ia.InteractiveItem:ia.InteractiveItem=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"fit",value:function(){}},{key:"onHaloGrabover",value:function(w){this.list.showDropPreviewFor(this,
w)}},{key:"onDrop",value:function(){var w=ab(regeneratorRuntime.mark(function ha(ua){var ra;return regeneratorRuntime.wrap(function(mb){for(;;)switch(mb.prev=mb.next){case 0:if(!this.item.isPreview){mb.next=7;break}ra=ua.hand.grabbedMorphs[0];uc._get(Object.getPrototypeOf(Ca.prototype),"onDrop",this).call(this,ua);mb.next=5;return this.list.whenRendered();case 5:this.list.addItemAt({morph:ra,isListItem:!0},this.itemIndex),this.list.clearPreviews();case 7:case "end":return mb.stop()}},ha,this)}));
return function(ua){return w.apply(this,arguments)}}()},{key:"select",value:function(){this.list.selectedIndex=this.itemIndex;this.item.morph.focus()}},{key:"onMouseDown",value:function(w){Hb.touchInputDevice?this._touchDown=Date.now():this.select()}},{key:"onMouseUp",value:function(w){Hb.touchInputDevice&&500>Date.now()-this._touchDown&&this.select()}},{key:"displayItem",value:function(w,ma,ua,ha,ra){var mb=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!1,E=6<arguments.length?arguments[6]:
void 0;uc._get(Object.getPrototypeOf(Ca.prototype),"displayItem",this).call(this,w,ma,ua,ha,ra,mb,E);w.morph&&(w.morph.selected=mb)}},{key:"onGrab",value:function(w){var ma=this.list,ua=w.halo&&w.halo.target===this;ua&&w.halo.detachFromTarget();var ha=this.submorphs.length?this.submorphs[0]:Hb.morph({type:"label",value:this.value});w.hand.grab(ha);ha.position=w.hand.localize(this.globalPosition);ua&&w.halo.refocus(ha);ma.removeItem(this.list.items[this.itemIndex]);ma.itemMorphs.forEach(function(ra){return ra.remove()});
ma.update()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InteractiveItem"}},{key:"properties",get:function(){return{draggable:{defaultValue:!Hb.touchInputDevice},item:{derived:!0,get:function(){return this.list.items[this.itemIndex]}},list:{drived:!0,get:function(){return this.owner.owner}},isListItem:{get:function(){return!0}}}}}],ia,{pathInPackage:function(){return"./list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:48644,end:50906})}(Hb.ListItemMorph);Hb.InteractiveItem=Qc;Hb.InteractiveItem=Qc;var kb=bd("M",function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/list.js"),Ca=ia.hasOwnProperty("MorphList")&&"function"===typeof ia.MorphList?ia.MorphList:ia.MorphList=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};
return uc(Ca,Ea,[{key:"onLoad",value:function(){uc._get(Object.getPrototypeOf(Ca.prototype),"onLoad",this).call(this);this.clipMode=this.touchInput?"auto":"hidden"}},{key:"showDropPreviewFor",value:function(w,ma){w=w.itemIndex;this.items[w].isPreview&&ma||(this.clearPreviews(),ma&&this.addItemAt({isListItem:!0,isPreview:!0,morph:Hb.morph({reactsToPointer:!1,acceptsDrops:!1,width:this.width-5,height:this.itemHeight,fill:Hb.Color.orange.withA(.5)})},w))}},{key:"clearPreviews",value:function(){var w=
this;this.items.filter(function(ma){return ma.morph&&ma.morph.owner&&!Hb.Path("morph.owner.isListItem").get(ma)}).map(function(){var ma=ab(regeneratorRuntime.mark(function ra(ha){return regeneratorRuntime.wrap(function(mb){for(;;)switch(mb.prev=mb.next){case 0:return mb.abrupt("return",w.removeItem(ha));case 1:case "end":return mb.stop()}},ra)}));return function(ha){return ma.apply(this,arguments)}}());this.items.filter(function(ma){return ma.isPreview}).map(function(ma){return w.removeItem(ma)})}},
{key:"update",value:function(){var w=this,ma=this.items;ma&&this.listItemContainer&&(this.scroller&&(this.scroller.visible=!1),this.dontRecordChangesWhile(function(){var ua=w.itemHeight,ha=w.itemMorphs,ra=w.listItemContainer,mb=w.selectedIndexes,E=w.extent,R=E.x,Ya=E.y,gb=w.fontSize,$b=w.fontFamily,Sc=w.fontColor;E=w.padding;var Ic=void 0===E?Xa.inset(0):E,Pd=w.itemPadding,Zd=w.selectionColor,ge=w.selectionFontColor,Ce=w.nonSelectionFontColor,$e=w.itemBorderRadius;E=w.scrollBar;var pf=w.scroll.y,
ig=Ic.top(),Xf=Ic.left(),Vg=Ic.bottom();Ic=Ic.right();var Re=Math.max(0,Math.floor(pf/ua)),ae=Math.min(ma.length,Math.ceil((pf+Ya)/ua));Ya=0;R-=Xf+Ic;ha=Hb.arr.sortBy(ha,function(Hd){return Hd.itemIndex});ha=Hb.arr.partition(ha,function(Hd){return Hd.itemIndex<Re});pf=sb(ha,2);ha=pf[0];var Sb=pf[1];pf=Hb.arr.partition(Sb,function(Hd){return Hd.itemIndex>ae});Sb=sb(pf,2);pf=Sb[0];Sb=Sb[1];ha=[].concat(fa(pf),fa(Sb),fa(ha));gb={fontSize:gb,fontFamily:$b,fontColor:Ce||Sc,padding:Pd,borderRadius:$e||
0,selectionFontColor:ge,nonSelectionFontColor:Ce,selectionColor:Zd};ha.length&&ae-Re>ha.length&&(Re!==ha[0].itemIndex?Hb.arr.pushAt(ha,ra.addMorph(new Hb.InteractiveItem(gb)),0):ae===Hb.arr.last(ha).itemIndex&&ha.push(ra.addMorph(new Hb.InteractiveItem(gb))));for($b=0;$b<ae-Re;$b++){Sc=Re+$b;Pd=ma[Sc];if(!Pd){ha.slice($b).forEach(function(Hd){return Hd.remove()});break}Zd=ha[$b];Zd||(Zd=ha[$b]=ra.addMorph(new Hb.InteractiveItem(gb)),Zd.clipMode="visible");Zd.displayItem(Pd,Sc,R,ua,Hb.pt(0,ua*Sc),
mb.includes(Sc),gb);Ya=Math.max(Ya,Zd.width)}ua=Math.max(ig+Vg+ua*ma.length,w.height);mb=Hb.pt(w.width,ua).subPt(Hb.pt(Xf+Ic,0));ra.setBounds(Hb.pt(Xf,ig).extent(mb));E.left=Ya-10;E.fill=null;E.top=0;E.extent=Hb.pt(1,ua)}))}},{key:"onHoverIn",value:function(w){this.clipMode="auto"}},{key:"onHoverOut",value:function(w){this.touchInput||(this.clipMode="hidden")}},{key:"onScroll",value:function(w){this.update()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MorphList"}},{key:"properties",
get:function(){return{touchInput:{get:function(){return Hb.touchInputDevice}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(w){this.setProperty("items",w.map(Hb.asItem));this.itemMorphs.forEach(function(ma){return ma.remove()});this.update();this.attributeConnections&&Hb.signal(this,"values",this.values)}}}}}],ia,{pathInPackage:function(){return"./list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:50914,end:56189})}(Hb.List));Hb.MorphList=kb;Hb.MorphList=kb;var Cc=bd("D",function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/list.js"),Ca=ia.hasOwnProperty("DropDownListModel")&&"function"===typeof ia.DropDownListModel?ia.DropDownListModel:ia.DropDownListModel=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(Ca,Ea,[{key:"initListMorph",value:function(){this.listMorph=this.listMaster?Hb.part(this.listMaster,{isLayoutable:!1,name:"dropDownList",viewModel:{items:[]}}):new Hb.List({items:[]})}},{key:"__additionally_serialize__",value:function(w,ma,ua,ha){(w=this.listMaster&&this.listMaster[Symbol["for"]("lively-module-meta")])&&ha("listMaster",ua.expressionSerializer.exprStringEncode({__expr__:w["export"],bindings:Db({},w.module,w["export"])}))}},{key:"viewDidLoad",value:function(){this.onRefresh("selection")}},
{key:"onRefresh",value:function(w){var ma=this.listMorph,ua=this.selection;if(!ma)return uc._get(Object.getPrototypeOf(Ca.prototype),"onRefresh",this).call(this,w);ma.items=this.items;if(ua){var ha=ma.items,ra=ma.find(ua);ra||"string"!==typeof ua||(ra=ha.find(function(mb){return mb.string===ua}));if(!ra)return uc._get(Object.getPrototypeOf(Ca.prototype),"onRefresh",this).call(this,w);"selection"===w&&this.adjustLableFor(ra);ma.selectedIndex=ha.indexOf(ra)}else ma.selection=null,this.label={value:""};
uc._get(Object.getPrototypeOf(Ca.prototype),"onRefresh",this).call(this,w)}},{key:"attach",value:function(w){uc._get(Object.getPrototypeOf(Ca.prototype),"attach",this).call(this,w);!this.selection&&0<this.items.length&&(this.selection=this.items[0].value)}},{key:"isListVisible",value:function(){return!!this.listMorph.world()}},{key:"removeWhenFocusLost",value:function(w){var ma=this;setTimeout(function(){var ua=ma.listMorph,ha=ma.world()&&ma.world().focusedMorph;ha!==ua&&ha!==ma.view&&ua.world()&&
!ua.withAllSubmorphsDetect(function(ra){return ra===ha})?ua.fadeOut(200):ua.world()&&(ua=Hb.touchInputDevice?ua.scroller:ua,Hb.once(ua,"onBlur",ma,"removeWhenFocusLost"),ua.focus())},100)}},{key:"adjustLableFor",value:function(w){w=w.label||[w.string,null];var ma=Hb.Icon.textAttribute("angle-down",{paddingTop:"2px"});"selection"!==this.listAlign&&(ma=Hb.Icon.textAttribute("caret-"+("bottom"===this.listAlign?"down":"up"),{paddingTop:"bottom"===this.listAlign?"0px":"2px"}));w=[].concat(fa(w),[" ",null],
fa(ma));w[5]&&(w[5].paddingRight="0px",w[5].textStyleClasses=["fa","annotation"]);this.label={value:w}}},{key:"setMixed",value:function(){this.label={value:["Mix",null]}}},{key:"toggleList",value:function(){var w=ab(regeneratorRuntime.mark(function ua(){var ha,ra,mb,E;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:ha=this.listMorph;mb=this.view;ha.isHaloItem=!0;if(!this.isListVisible()){R.next=10;break}Hb.signal(this,"deactivated");this.selection=ha.selection;ha.epiMorph=
!1;ha.remove();R.next=23;break;case 10:return Hb.signal(this,"activated"),this.openListInWorld?(ha.openInWorld(),ha.epiMorph=!0,ha.hasFixedPosition=!0,ha.setTransform(mb.getGlobalTransform()),ra=mb.globalBounds()):(ra=mb.innerBounds(),mb.addMorph(ha)),E=ha.items.length*ha.itemHeight+ha.padding.top()+ha.padding.bottom(),ha.extent=Hb.pt(mb.width,Math.min(this.listHeight,E)),"top"===this.listAlign?ha.bottomLeft=ra.topLeft().addPt(this.listOffset||Hb.pt(0,0)):ha.topLeft="bottom"===this.listAlign?ra.bottomLeft().addPt(this.listOffset||
Hb.pt(0,0)):ra.topLeft().subXY(0,ha.itemHeight*(ha.selectedIndex||0)),Hb.once(ha,"onItemMorphClicked",this,"toggleList"),Hb.once(Hb.touchInputDevice?ha.scroller:ha,"onBlur",this,"removeWhenFocusLost"),R.next=19,ha.whenRendered();case 19:return R.next=21,ha.whenRendered();case 21:Hb.touchInputDevice?ha.scroller.focus():ha.focus(),ha.scrollSelectionIntoView();case 23:case "end":return R.stop()}},ua,this)}));return function(){return w.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"DropDownListModel"}},{key:"properties",get:function(){return{listHeight:{defaultValue:100},listMaster:{isComponent:!0,set:function(w){this.setProperty("listMaster",w);this.listMorph&&this.listMorph.remove();this.initListMorph()}},listAlign:{type:"Enum",values:["bottom","top","selection"],defaultValue:"bottom"},action:{get:function(){var w=this;return function(){w.toggleList()}}},listOffset:{isStyleProp:!0,defaultValue:Hb.pt(0,0)},openListInWorld:{defaultValue:!1},listMorph:{after:["listMaster"],
serialize:!1,initialize:function(){this.initListMorph()}},items:{initialize:function(){this.items=[]},set:function(w){w=w.map(Hb.asItem);this.setProperty("items",w);!this.selection&&0<w.length&&(this.selection=w[0].value)}},selection:{},expose:{get:function(){return["keybindings","commands","items","selection","setMixed"]}},commands:{get:function(){var w=this;return[{name:"accept",exec:function(){w.isListVisible()&&w.toggleList();return!0}},{name:"cancel",exec:function(){w.isListVisible()&&w.listMorph.remove();
return!0}}]}},keybindings:{get:function(){return[{keys:"Enter",command:"accept"},{keys:"Escape|Ctrl-G",command:"cancel"}]}}}}}],ia,{pathInPackage:function(){return"./list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:56213,end:62650})}(Hb.ButtonModel));Hb.DropDownListModel=Cc;Hb.DropDownListModel=Cc;Pc=Object.freeze({__proto__:null,
asItem:ob,ListItemMorph:Pc,ListScroller:Kd,List:tb,FilterableList:vc,DropDownList:xc,InteractiveItem:Qc,MorphList:kb,DropDownListModel:Cc});var zc=window.lively.FreezerRuntime.recorderFor("lively.components/menus.js");zc.Label=jc;zc.config=eb;zc.Morph=Dd;zc.obj=kc;zc.promise=Vb;zc.fun=pb;zc.pt=Rc;zc.Color=ad;zc.Rectangle=Xa;Kd=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/menus.js"),Ca=ia.hasOwnProperty("MenuDivider")&&"function"===typeof ia.MenuDivider?ia.MenuDivider:
ia.MenuDivider=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,void 0,[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MenuDivider"}},{key:"properties",get:function(){return{isMenuDevider:{defaultValue:!0},fill:{defaultValue:zc.Color.gray.lighter()},extent:{defaultValue:zc.pt(100,5)},reactsToPointer:{defaultValue:!1}}}}],ia,{pathInPackage:function(){return"./menus.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:167,end:499})}(zc.Morph);zc.MenuDivider=Kd;zc.MenuDivider=Kd;Qc=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/menus.js"),Ca=ia.hasOwnProperty("MenuItem")&&"function"===typeof ia.MenuItem?ia.MenuItem:ia.MenuItem=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(Ca,Ea,[{key:"onHoverIn",value:function(w){var ma=this;this.owner.itemMorphs.forEach(function(ua){return ua!==ma&&(ua.selected=!1)});this.selected=!0;this.submenu&&this.owner.openSubMenuDelayed(w,this,this.submenu)}},{key:"onHoverOut",value:function(w){var ma=this,ua=w.hand;setTimeout(function(){(ma.owner?ma.owner.submenus:[]).some(function(ha){return ha.fullContainsWorldPoint(ua.globalPosition)})||(ma.selected=!1)},20);this.owner.maybeRemoveSubmenu()}},{key:"onMouseDown",value:function(){var w=
ab(regeneratorRuntime.mark(function ha(ua){var ra;return regeneratorRuntime.wrap(function(mb){for(;;)switch(mb.prev=mb.next){case 0:if(!this.submenu){mb.next=2;break}return mb.abrupt("return");case 2:mb.prev=2;this.owner.startFinish();if("function"===typeof this.action){mb.next=6;break}throw Error("Menu item ".concat(this.textString," has no executable action!"));case 6:return mb.next=8,this.action();case 8:this.owner.completeFinish();mb.next=15;break;case 11:mb.prev=11,mb.t0=mb["catch"](2),(ra=this.world())?
ra.logError(mb.t0):console.error(mb.t0);case 15:case "end":return mb.stop()}},ha,this,[[2,11]])}));return function(ua){return w.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MenuItem"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},fill:{defaultValue:zc.Color.transparent},fontSize:{defaultValue:14},draggable:{defaultValue:!1},readOnly:{defaultValue:!0},nativeCursor:{defaultValue:"pointer"},
selected:{defaultValue:!1,set:function(w){this.selected!==w&&(this.addValueChange("selected",w),w?(this.fontColor=zc.Color.white,this.fill=zc.Color.rgb(21,101,192)):(this.fill=zc.Color.transparent,this.fontColor=zc.Color.black))}},isMenuItem:{derived:!0,readOnly:!0,get:function(){return!0}},label:{get:function(){return this.valueAndAnnotation.value.map(function(w,ma){return 0===ma%2?w:""}).join("\n")},set:function(w){this.valueAndAnnotation={value:w,annotation:this.annotation}}},annotation:{get:function(){return this.valueAndAnnotation.annotation},
set:function(w){this.valueAndAnnotation={value:this.value,annotation:w}}},action:{},submenu:{}}}}],ia,{pathInPackage:function(){return"./menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:507,end:3276})}(zc.Label);zc.MenuItem=Qc;zc.MenuItem=Qc;zc.invalidItem={string:"invalid item",action:function(){return $world.setStatusMessage("invalid item")}};
var Fc=bd("a",function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/menus.js"),Ca=ia.hasOwnProperty("Menu")&&"function"===typeof ia.Menu?ia.Menu:ia.Menu=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"startFinish",value:function(){this.ownerMenu&&this.ownerMenu.startFinish();this._waitingForFinish=!0}},{key:"completeFinish",value:function(){this.ownerMenu&&
this.ownerMenu.completeFinish();this.finishedPromise.resolve(!0)}},{key:"whenFinished",value:function(){return this.finishedPromise.promise}},{key:"onChange",value:function(w){var ma=w.prop;w.selector;switch(ma){case "itemPadding":case "fontSize":case "fontFamily":this.updateMorphs()}uc._get(Object.getPrototypeOf(Ca.prototype),"onChange",this).call(this,w)}},{key:"remove",value:function(){var w=ab(regeneratorRuntime.mark(function ua(){return regeneratorRuntime.wrap(function(ha){for(;;)switch(ha.prev=
ha.next){case 0:return ha.next=2,this.animate({opacity:0,duration:300});case 2:this._waitingForFinish||this.completeFinish(),uc._get(Object.getPrototypeOf(Ca.prototype),"remove",this).call(this);case 4:case "end":return ha.stop()}},ua,this)}));return function(){return w.apply(this,arguments)}}()},{key:"ensureItem",value:function(w){if(!w)return zc.invalidItem;if(w.title)return this.title=w.title,null;if(w.isDivider)return w;if(w.hasOwnProperty("string")&&w.hasOwnProperty("action"))return zc.obj.select(w,
["string","action","annotation"]);if(Array.isArray(w)){w=sb(w,2);var ma=w[0];w=w[1];return"string"===typeof ma||Array.isArray(ma)?w&&"function"!==typeof w?"object"===Nb(w)&&w.getItems?{label:ma,submenu:w.getItems,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:Array.isArray(w)?{label:ma,submenu:w,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:zc.invalidItem:{label:ma,action:w||function(){return $world.setStatusMessage(ma)}}:zc.invalidItem}if(w.command){var ua=w.command,
ha=w.showKeyShortcuts,ra=w.target,mb=w.alias,E=w.args;w=w.tooltip;if(!ua||!ra)return zc.invalidItem;void 0===ha&&(ha=!0);ha=ha?"string"===typeof ha?ha:ra.keysForCommand(ua):null;mb=mb||ua;ha=ha?["\t".concat(ha),{fontSize:"70%"}]:["",{}];return{tooltip:w,string:mb,annotation:ha,action:function(){return ra.execCommand(ua,E)}}}return zc.invalidItem}},{key:"updateMorphs",value:function(){var w=this;this.submorphs=[];var ma=this.padding.left(),ua=this.padding.right(),ha=this.padding.top(),ra=this.padding.bottom(),
mb=0,E=zc.pt(ma,ha),R={};this.fontFamily&&(R.fontFamily=this.fontFamily);this.fontSize&&(R.fontSize=this.fontSize);this.itemPadding&&(R.padding=this.itemPadding);this.title&&(ha=this.addMorph(Object.assign({type:"label",value:this.title,name:"title",position:E,fontWeight:"bold"},R)),E=ha.bottomLeft,mb=Math.max(ha.width,mb));this.items.forEach(function(Ya){var gb=Ya.label,$b=Ya.string,Sc=Ya.annotation,Ic=Ya.action,Pd=Ya.submenu,Zd=Ya.tooltip;Ya=w.addMorph(Ya.isDivider?new zc.MenuDivider({position:E}):
new zc.MenuItem(Object.assign({label:gb||$b,annotation:Sc,action:Ic,submenu:Pd,tooltip:Zd,position:E},R)));E=Ya.bottomLeft;mb=Math.max(Ya.width,mb)});this.submorphs.forEach(function(Ya){Ya.isLabel&&(Ya.fit(),Ya.autofit=!1,Ya.fixedWidth=!0,Ya.fixedHeight=!0);Ya.width=mb});this.extent=zc.pt(mb+ua+ma,E.y+ra)}},{key:"openSubMenuDelayed",value:function(w,ma,ua){var ha=this;this.openingSubMenuProcess&&clearTimeout(this.openingSubMenuProcess);this.openingSubMenuProcess=setTimeout(function(){try{ha.openSubMenu(w,
ma,ua)}catch(mb){var ra=ha.world();ra?ra.logError(mb):console.error(mb)}},200)}},{key:"openSubMenu",value:function(w,ma,ua){if(ma.selected){var ha=this.submenu;if(ha){if(ha.ownerItemMorph===ma||this.morphsContainingPoint(w.position).includes(ha))return;this.removeSubMenu()}"function"===typeof ua&&(ua=ua());w=this.submenu=this.addMorph(new zc.Menu({items:ua,ownerItemMorph:ma,ownerMenu:this}));w.updateMorphs();w.offsetForOwnerMenu()}}},{key:"maybeRemoveSubmenu",value:function(){var w=this;zc.fun.debounceNamed(this.id+
"-maybeRemoveSubmenu",300,function(){var ma=w.world();if(ma){var ua=w.submenu,ha=w.selectedItemMorph;ma=ma&&ua&&ua.fullContainsWorldPoint(ma.firstHand.position);ua&&ua.ownerItemMorph!==ha&&!ua.ownerItemMorph.selected&&(ma?(ha&&(ha.selected=!1),ua.ownerItemMorph.selected=!0):w.removeSubMenu())}})();return this.removeOnMouseOut}},{key:"removeSubMenu",value:function(){if(this.submenu){var w=this.submenu;this.submenu=w.ownerMenu=null;w.remove()}}},{key:"moveBoundsForVisibility",value:function(w,ma){var ua=
0,ha=0;w.right()>ma.right()&&(ua=-1*(w.right()-ma.right()));var ra=w.left()+ua;0>ra&&(ua+=-ra);w.bottom()>ma.bottom()&&(ha=-1*(w.bottom()-ma.bottom()),ua+=1);ma=w.top()+ha;0>ma&&(ha+=-ma);return w.translatedBy(zc.pt(ua,ha))}},{key:"moveSubMenuBoundsForVisibility",value:function(w,ma,ua,ha){ha||(ha=ma.right()+w.width>ua.right()?"left":"right");w=w.extent();w="left"===ha?ma.topLeft().addXY(-w.x,0).extent(w):ma.topRight().extent(w);w.bottom()>ua.bottom()&&(ma=-1*(w.bottom()-ua.bottom()),w=w.translatedBy(zc.pt(0,
ma)));w.top()<ua.top()&&(ua=ua.top()-w.top(),w=w.translatedBy(zc.pt(0,ua)));return w}},{key:"offsetForOwnerMenu",value:function(){var w=this.ownerMenu,ma=this.world().visibleBounds(),ua=w.getGlobalTransform().inverse().transformRectToRect(ma);w=this.clipForVisibility(this.moveSubMenuBoundsForVisibility(this.innerBounds(),w.selectedItemMorph?w.selectedItemMorph.bounds():w.innerBounds(),ua),ma);this.setBounds(w)}},{key:"clipForVisibility",value:function(){var w=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:this.bounds(),ma=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.world().visibleBounds(),ua=this.transformRectToMorph(this.world(),w.withX(0).withY(0));ma.containsRect(ua.insetBy(10))||(w=w.withExtent(zc.pt(5+w.width,Math.min(ua.height,ma.height))));return w}},{key:"offsetForWorld",value:function(w){w=this.innerBounds().translatedBy(w);if(this.owner.visibleBounds){var ma=this.owner.visibleBounds();w=this.clipForVisibility(this.moveBoundsForVisibility(w,ma),ma)}this.setBounds(w)}},
{key:"onHoverOut",value:function(){this.removeOnMouseOut&&this.remove()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Menu"}},{key:"forItems",value:function(w){return new this(Object.assign({},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{title:""},{items:w}))}},{key:"openAt",value:function(w,ma){var ua=this.forItems(ma,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{title:""}).openInWorldNear(w);ua.offsetForWorld(w);return ua}},{key:"openAtHand",value:function(w){var ma=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{title:""},ua=ma.hand;ma=this.forItems(w,zc.obj.dissoc(ma,["hand"]));ua=ua?ua.position:zc.pt(0,0);ma.titleMorph&&(ua=ua.addXY(0,-ma.titleMorph.height));ma.openInWorld(ua);ma.offsetForWorld(ua);return ma}},{key:"properties",get:function(){return{dropShadow:{initialize:function(){if(zc.config.fastShadows||!this.ownerMenu)this.dropShadow=!0,this.dropShadow.fast=!1}},submorphs:{initialize:function(){this.updateMorphs()}},epiMorph:{defaultValue:!0},
acceptsDrops:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},padding:{defaultValue:zc.Rectangle.inset(0,2)},itemPadding:{defaultValue:zc.Rectangle.inset(8,4)},borderWidth:{defaultValue:1},fill:{defaultValue:zc.Color.white},borderColor:{defaultValue:zc.Color.gray.lighter()},borderRadius:{defaultValue:4},opacity:{defaultValue:.95},fontSize:{defaultValue:16},title:{get:function(){return this.getProperty("title")},set:function(w){this.addValueChange("title",w)}},finishedPromise:{initialize:function(){this.finishedPromise=
zc.promise.deferred()}},ownerMenu:{},submenu:{},styleClasses:{defaultValue:["Halo"]},submenus:{readOnly:!0,get:function(){return this.submenu?[this.submenu].concat(this.submenu.submenus):[]}},ownerItemMorph:{},removeOnMouseOut:{},items:{set:function(w){w=w.map(this.ensureItem.bind(this)).filter(Boolean);this.setProperty("items",w)}},selectedItemMorph:{derived:!0,readOnly:!0,get:function(){return this.itemMorphs.find(function(w){return w.selected})}},titleMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("title")}},
itemMorphs:{derived:!0,readOnly:!0,get:function(){return this.submorphs.filter(function(w){return w.isMenuItem})}}}}}],ia,{pathInPackage:function(){return"./menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:3391,end:16642})}(zc.Morph));zc.Menu=Fc;zc.Menu=Fc;Kd=Object.freeze({__proto__:null,MenuDivider:Kd,MenuItem:Qc,Menu:Fc});
var xd=window.lively.FreezerRuntime.recorderFor("lively.components/resizers.js");xd.arr=Cb;xd.obj=kc;xd.pt=Rc;xd.Color=ad;xd.Morph=Dd;Qc=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),Ca=ia.hasOwnProperty("VerticalResizer")&&"function"===typeof ia.VerticalResizer?ia.VerticalResizer:ia.VerticalResizer=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,
Ea,[{key:"onDrag",value:function(w){this.movedHorizontallyBy(w.position.x-w.state.lastDragPosition.x)}},{key:"divideRelativeToParent",value:function(w){if(!(!this.owner||"number"!==typeof w||0>w||1<w)){var ma=this.owner.extent.x-this.extent.x;if(!(0>ma)){var ua=this.getRelativeDivide();this.movedHorizontallyBy(ma*(w-ua))}}}},{key:"getRelativeDivide",value:function(w){var ma=this.bounds();w=ma.left();ma=this.owner.extent.x-ma.width;return 0>ma?NaN:w/ma}},{key:"movedHorizontallyBy",value:function(w){this.resizeIsSave(w)&&
(this.fixed.concat(this.scalingRight).forEach(function(ma){var ua=ma.position;ma.position=xd.pt(ua.x+w,ua.y)}),this.scalingLeft.forEach(function(ma){var ua=ma.extent;ma.extent=xd.pt(ua.x+w,ua.y)}),this.scalingRight.forEach(function(ma){var ua=ma.extent;ma.extent=xd.pt(ua.x-w,ua.y)}),this.position=this.position.addPt(xd.pt(w,0)))}},{key:"resizeIsSave",value:function(w){var ma=this;return this.scalingLeft.every(function(ua){return ua.extent.x+w>=ma.minWidth})&&this.scalingRight.every(function(ua){return ua.extent.x-
w>=ma.minWidth})}},{key:"addFixed",value:function(w){xd.arr.pushIfNotIncluded(this.fixed,w)}},{key:"addScalingLeft",value:function(w){xd.arr.pushIfNotIncluded(this.scalingLeft,w)}},{key:"addScalingRight",value:function(w){xd.arr.pushIfNotIncluded(this.scalingRight,w)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"VerticalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:xd.Color.gray.lighter()},nativeCursor:{defaultValue:"ew-resize"},fixed:{defaultValue:[]},
scalingLeft:{defaultValue:[]},scalingRight:{defualtValue:[]},minWidth:{defaultValue:20},draggable:{defaultValue:!0}}}}],ia,{pathInPackage:function(){return"./resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:132,end:2821})}(xd.Morph);xd.VerticalResizer=Qc;xd.VerticalResizer=Qc;kb=bd("H",function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),
Ca=ia.hasOwnProperty("HorizontalResizer")&&"function"===typeof ia.HorizontalResizer?ia.HorizontalResizer:ia.HorizontalResizer=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"getRefs",value:function(w){var ma=this;return xd.arr.uniq(w.map(function(ua){return xd.obj.isString(ua)?ma.get(ua):ua}))}},{key:"onDrag",value:function(w){this.movedVerticallyBy(w.position.y-w.state.lastDragPosition.y)}},
{key:"divideRelativeToParent",value:function(w){if(!(!this.owner||"number"!==typeof w||0>w||1<w)){var ma=this.owner.extent.y-this.extent.y;if(!(0>ma)){var ua=this.getRelativeDivide();this.movedVerticallyBy(ma*(w-ua))}}}},{key:"getRelativeDivide",value:function(w){var ma=this.bounds();w=ma.top();ma=this.owner.extent.y-ma.height;return 0>ma?NaN:w/ma}},{key:"movedVerticallyBy",value:function(w){this.resizeIsSave(w)&&(this.getRefs(this.fixed.concat(this.scalingBelow)).forEach(function(ma){var ua=ma.position;
ma.position=xd.pt(ua.x,ua.y+w)}),this.getRefs(this.scalingAbove).forEach(function(ma){var ua=ma.extent;ma.extent=xd.pt(ua.x,ua.y+w)}),this.getRefs(this.scalingBelow).forEach(function(ma){var ua=ma.extent;ma.extent=xd.pt(ua.x,ua.y-w)}),this.position=this.position.addPt(xd.pt(0,w)))}},{key:"resizeIsSave",value:function(w){var ma=this;return this.getRefs(this.scalingAbove).every(function(ua){return ua.extent.y+w>=ma.minHeight})&&this.getRefs(this.scalingBelow).every(function(ua){return ua.extent.y-w>=
ma.minHeight})}},{key:"addFixed",value:function(w){xd.arr.pushIfNotIncluded(this.fixed,w)}},{key:"addScalingAbove",value:function(w){xd.arr.pushIfNotIncluded(this.scalingAbove,w)}},{key:"addScalingBelow",value:function(w){xd.arr.pushIfNotIncluded(this.scalingBelow,w)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"HorizontalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:xd.Color.gray.lighter()},nativeCursor:{defaultValue:"ns-resize"},fixed:{defaultValue:[]},
scalingBelow:{defaultValue:[]},scalingAbove:{defaultValue:[]},minHeight:{defaultValue:20},draggable:{defaultValue:!0}}}}],ia,{pathInPackage:function(){return"./resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:2829,end:5736})}(xd.Morph));xd.HorizontalResizer=kb;xd.HorizontalResizer=kb;Qc=Object.freeze({__proto__:null,
VerticalResizer:Qc,HorizontalResizer:kb});var Uc=window.lively.FreezerRuntime.recorderFor("lively.components/tree.js");Uc.arr=Cb;Uc.obj=kc;Uc.tree=zb;Uc.string=Sd;Uc.promise=Vb;Uc.pt=Rc;Uc.Rectangle=Xa;Uc.Color=ad;Uc.Text=dd;Uc.config=eb;Uc.touchInputDevice=lc;Uc.signal=Ne;kb=bd("c",function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/tree.js"),Ca=ia.hasOwnProperty("Tree")&&"function"===typeof ia.Tree?ia.Tree:ia.Tree=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(Ca,Ea,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var w=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!w.treeData)throw Error("Cannot create tree without TreeData!");uc._get(Object.getPrototypeOf(Ca.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,w);this.resetCache();this.update()}},{key:"onChange",value:function(w){uc._get(Object.getPrototypeOf(Ca.prototype),"onChange",this).call(this,w);"fontSize fontColor selectionColor disableIndent nonSelectionFontColor selectionFontColor".split(" ").includes(w.prop)&&
this.update(!0)}},{key:"resetCache",value:function(){this._lineHeightCache=null}},{key:"isTree",get:function(){return!0}},{key:"nodeStyle",get:function(){return{fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,autofit:!this.resizeNodes}}},{key:"lineBounds",value:function(w){var ma=this.textLayout.charBoundsOfRow(this,w);w=Uc.Rectangle.fromLiteral(Uc.arr.first(ma)).topLeft();ma=Uc.Rectangle.fromLiteral(Uc.arr.last(ma)).bottomRight();return Uc.Rectangle.fromAny(w,ma)}},{key:"recoverOriginalLine",
value:function(w){for(var ma=this.document.getTextAndAttributesOfLine(w),ua=0;ua<ma.length;ua++){var ha=this._originalColor[ua];ha&&!Uc.obj.isString(ma[ua])&&(ma[ua]?ma[ua].fontColor=ha:ma[ua]={fontColor:ha})}this.document.setTextAndAttributesOfLine(w,ma)}},{key:"renderSelectedLine",value:function(w){var ma=this.document.getTextAndAttributesOfLine(w);this._originalColor=Array(ma.length);for(var ua=0;ua<ma.length;ua++)0===ua%2?ma[ua]&&ma[ua].isMorph&&(this._originalColor[ua]=ma[ua]?ma[ua].fontColor||
this.nonSelectionFontColor:null,ma[ua].fontColor=this.selectionFontColor,ma[ua].isSelected=!0):(this._originalColor[ua]=(ma[ua]?ma[ua].fontColor:null)||this.nonSelectionFontColor,ma[ua]?ma[ua].fontColor=this.selectionFontColor:ma[ua]={fontColor:this.selectionFontColor});this.document.setTextAndAttributesOfLine(w,ma);this.selectLine(w,!0);this._lastSelectedIndex=w+1}},{key:"computeTreeAttributes",value:function(w){if(!w.length)return[];for(var ma=Uc.arr.genN(8*(w.length-1),function(){}),ua=1,ha,ra,
mb=this.disableIndent?0:1.3*this.fontSize,E=0,R=this.selectedIndex;ua<w.length;ua++){ha=8*(ua-1)+E;ra=R==ua;w[ua].node.isSelected=ra;ma[ha]=" ";ma[ha+1]={fontSize:mb,fontColor:Uc.Color.transparent,textStyleClasses:["fas"],paddingRight:mb*(w[ua].depth-1)+"px"};ma[ha+3]={fontColor:Uc.Color.transparent,textStyleClasses:["fas"],paddingTop:this.fontSize/10+"px",paddingRight:this.fontSize/8+"px"};this.treeData.isLeaf(w[ua].node)?ma[ha+2]=this.disableIndent?"":"    ":(ma[ha+2]=this.treeData.isCollapsed(w[ua].node)?
" \uf0da ":" \uf0d7 ",Object.assign(ma[ha+3],{paddingRight:this.treeData.isCollapsed(w[ua].node)?"".concat(this.fontSize/4,"px"):"0px",paddingTop:"0px",nativeCursor:"pointer",fontColor:this.fontColor}));var Ya=this.treeData.safeDisplay(w[ua].node);Ya.isMorph&&(Ya._capturedProps&&Object.assign(Ya,Ya._capturedProps),ra&&(Ya._capturedProps=Uc.obj.select(Ya,["fontColor"])),Ya.fontColor=this.nonSelectionFontColor);Array.isArray(Ya)?(Ya=Ya.flat(),Uc.arr.pushAllAt(ma,Ya,ha+4),ra=Math.max(0,Ya.length-2),
ha+=ra,E+=ra):(ma[ha+4]=Ya,ma[ha+5]={fontColor:this.fontColor});ma[ha+6]="\n";ma[ha+7]={}}ma.push(" ",{fontSize:1.3*this.fontSize,textStyleClasses:["far"]});ma=ma.filter(function(gb){return"undefined"!==typeof gb});return 1<w.length?ma:[]}},{key:"update",value:function(w){var ma=this;if(!this._updating&&this.treeData&&this.nodeItemContainer){this._updating=!0;try{this.withMetaDo({isLayoutAction:!0},function(){var ua=ma.treeData;ua.isTreeData&&(ua=ua.asListWithIndexAndDepth(),ma.treeData!==ma.lastTreeData||
ma.lastNumberOfNodes!==ua.length||w?(ma.replace({start:{row:0,column:0},end:ma.documentEndPosition},ma.computeTreeAttributes(ua),!1,!1),ma.invalidateTextLayout(!0,!1),ma.whenRendered().then(ab(regeneratorRuntime.mark(function ra(){return regeneratorRuntime.wrap(function(mb){for(;;)switch(mb.prev=mb.next){case 0:ma.makeDirty();case 1:case "end":return mb.stop()}},ra)})))):ma._lastSelectedIndex&&ma.recoverOriginalLine(ma._lastSelectedIndex-1),ma.lastTreeData=ma.treeData,ma.lastNumberOfNodes=ua.length,
ma.cursorPosition={row:0,column:0},0<ma.selectedIndex?ma.renderSelectedLine(ma.selectedIndex-1):(ua=ma.getProperty("selection"))&&!ua.isEmpty()&&ua.collapse(ua.lead))})}finally{this._updating=!1}}}},{key:"buildViewState",value:function(w){var ma=this;"function"!==typeof w&&(w=function(ra){return ra});var ua=this.selectedNode?w(this.selectedNode):null,ha=new Map;Uc.tree.prewalk(this.treeData.root,function(ra){return ha.set(w(ra),ma.treeData.isCollapsed(ra))},function(ra){return ma.treeData.getChildrenIfUncollapsed(ra)});
return{selectionId:ua,collapsedMap:ha,scroll:this.scroll}}},{key:"applyViewState",value:function(){var w=ab(regeneratorRuntime.mark(function ra(ua,ha){var mb,E,R,Ya,gb,$b,Sc;return regeneratorRuntime.wrap(function(Ic){for(;;)switch(Ic.prev=Ic.next){case 0:"function"!==typeof ha&&(ha=function(Pd){return Pd}),mb=ua.selectionId,E=ua.collapsedMap,R=ua.scroll,Ya=0,gb=-1;case 4:$b=this.nodes;if(!(Ya>=$b.length)){Ic.next=8;break}return Ic.abrupt("break",16);case 8:Sc=ha($b[Ya]);mb===Sc&&(gb=Ya);if(!E.has(Sc)||
E.get(Sc)){Ic.next=13;break}Ic.next=13;return this.treeData.collapse($b[Ya],!1);case 13:Ya++;Ic.next=4;break;case 16:return this.selectedIndex=gb,this.update(),this.scroll=R,this.scrollSelectionIntoView(),Ic.next=22,Uc.promise.delay(0);case 22:case "end":return Ic.stop()}},ra,this)}));return function(ua,ha){return w.apply(this,arguments)}}()},{key:"maintainViewStateWhile",value:function(){var w=ab(regeneratorRuntime.mark(function ra(ua,ha){var mb;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=
E.next){case 0:return mb=this.buildViewState(ha),E.next=3,ua();case 3:return E.next=5,this.applyViewState(mb,ha);case 5:case "end":return E.stop()}},ra,this)}));return function(ua,ha){return w.apply(this,arguments)}}()},{key:"onNodeCollapseChanged",value:function(){var w=ab(regeneratorRuntime.mark(function ha(ua){var ra,mb;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return ra=ua.node,mb=ua.isCollapsed,this.resetCache(),E.prev=2,E.next=5,this.treeData.collapse(ra,
mb);case 5:Uc.signal(this,"nodeCollapseChanged",{node:ra,isCollapsed:mb});this.update();E.next=12;break;case 9:E.prev=9,E.t0=E["catch"](2),this.showError(E.t0);case 12:case "end":return E.stop()}},ha,this,[[2,9]])}));return function(ua){return w.apply(this,arguments)}}()},{key:"uncollapse",value:function(){var w=ab(regeneratorRuntime.mark(function ua(){var ha,ra=arguments;return regeneratorRuntime.wrap(function(mb){for(;;)switch(mb.prev=mb.next){case 0:if((ha=0<ra.length&&void 0!==ra[0]?ra[0]:this.selectedNode)&&
this.treeData.isCollapsed(ha)){mb.next=3;break}return mb.abrupt("return");case 3:return mb.next=5,this.onNodeCollapseChanged({node:ha,isCollapsed:!1});case 5:return mb.abrupt("return",ha);case 6:case "end":return mb.stop()}},ua,this)}));return function(){return w.apply(this,arguments)}}()},{key:"collapse",value:function(){var w=ab(regeneratorRuntime.mark(function ua(){var ha,ra=arguments;return regeneratorRuntime.wrap(function(mb){for(;;)switch(mb.prev=mb.next){case 0:if((ha=0<ra.length&&void 0!==
ra[0]?ra[0]:this.selectedNode)&&!this.treeData.isCollapsed(ha)){mb.next=3;break}return mb.abrupt("return");case 3:return mb.next=5,this.onNodeCollapseChanged({node:ha,isCollapsed:!0});case 5:return mb.abrupt("return",ha);case 6:case "end":return mb.stop()}},ua,this)}));return function(){return w.apply(this,arguments)}}()},{key:"selectedPath",value:function(){return this.treeData.pathOf(this.selectedNode)}},{key:"selectPath",value:function(){var w=ab(regeneratorRuntime.mark(function ha(ua){return regeneratorRuntime.wrap(function(ra){for(;;)switch(ra.prev=
ra.next){case 0:return ra.next=2,this.treeData.followPath(ua);case 2:return ra.abrupt("return",this.selectedNode=ra.sent);case 3:case "end":return ra.stop()}},ha,this)}));return function(ua){return w.apply(this,arguments)}}()},{key:"gotoIndex",value:function(w){this.selectedNode=this.nodes[w];this.scrollIndexIntoView(w)}},{key:"scrollSelectionIntoView",value:function(){this.selectedNode&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(w){this.scrollToIndex(w,
"into view")}},{key:"centerSelection",value:function(){this.selectedNode&&this.scrollToIndex(this.selectedIndex,"center")}},{key:"scrollToIndex",value:function(w){this.scrollPositionIntoView({row:w-1,column:0})}},{key:"contextMenuForNode",value:function(w,ma){Uc.signal(this,"contextMenuRequested",{node:w,evt:ma})}},{key:"onKeyDown",value:function(w){var ma=this.world().focusedMorph;if(!ma.isText||ma.readOnly)return uc._get(Object.getPrototypeOf(Ca.prototype),"onKeyDown",this).call(this,w)}},{key:"onDragStart",
value:function(w){uc._get(Object.getPrototypeOf(Ca.prototype),"onDragStart",this).call(this,w);var ma=this.textAttributeAtPoint(w.positionIn(this))||{},ua=ma.onDragStart,ha=ma.onDrag;ma=ma.onDragEnd;ha&&(this._onDragHandler=ha);ma&&(this._onDragEndHandler=ma);ua&&ua(w)}},{key:"onDrag",value:function(w){this._onDragHandler?this._onDragHandler(w):uc._get(Object.getPrototypeOf(Ca.prototype),"onDrag",this).call(this,w)}},{key:"onDragEnd",value:function(w){uc._get(Object.getPrototypeOf(Ca.prototype),"onDragEnd",
this).call(this,w);delete this._onDragHandler;this._onDragEndHandler&&this._onDragEndHandler(w);delete this._onDragEndHandler}},{key:"onMouseDown",value:function(){var w=ab(regeneratorRuntime.mark(function ha(ua){var ra,mb,E,R,Ya,gb;return regeneratorRuntime.wrap(function($b){for(;;)switch($b.prev=$b.next){case 0:ra=this.textPositionFromPoint(ua.positionIn(this));mb=ra.row;E=ra.column;if(R=this.nodes[mb+1]){$b.next=4;break}return $b.abrupt("return");case 4:if(this.treeData.isLeaf(R)||!(4>E)){$b.next=
14;break}$b.next=7;return R.isCollapsed;case 7:if(!$b.sent){$b.next=11;break}this.uncollapse(R);$b.next=12;break;case 11:this.collapse(R);case 12:$b.next=15;break;case 14:this.selectedIndex!=mb+1&&(this.selectedIndex=mb+1);case 15:Ya=this.textAttributeAt({row:mb,column:E})||{},(gb=Ya.onMouseDown)&&gb(ua);case 17:case "end":return $b.stop()}},ha,this)}));return function(ua){return w.apply(this,arguments)}}()},{key:"onMouseUp",value:function(w){uc._get(Object.getPrototypeOf(Ca.prototype),"onMouseUp",
this).call(this,w);var ma=(this.textAttributeAtPoint(w.positionIn(this))||{}).onMouseUp;ma&&ma(w)}},{key:"onHoverIn",value:function(w){uc._get(Object.getPrototypeOf(Ca.prototype),"onHoverIn",this).call(this,w);this.activateOnHover&&(this.clipMode="auto")}},{key:"onHoverOut",value:function(w){uc._get(Object.getPrototypeOf(Ca.prototype),"onHoverOut",this).call(this,w);!Uc.touchInputDevice&&this.activateOnHover&&(this.clipMode="hidden")}},{key:"onContextMenu",value:function(w){if(w.targetMorph===this){w.stop();
var ma=this.textPositionFromPoint(w.positionIn(this)),ua=ma.row;ma.column;(ma=this.nodes[ua+1])&&this.contextMenuForNode(ma,w)}}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"select node above"},{keys:"Down|Ctrl-N",command:"select node below"},{keys:"Left",command:"collapse selected node"},{keys:"Right",command:"uncollapse selected node"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",
command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{mac:"Meta-[",win:"Ctrl-["},command:{command:"collapse or uncollapse all siblings",args:{what:"collapse"}}},{keys:{mac:"Meta-]",win:"Ctrl-]"},command:{command:"collapse or uncollapse all siblings",args:{what:"uncollapse"}}},{keys:"Alt-N",command:"goto next sibling"},{keys:"Alt-P",command:"goto prev sibling"},{keys:"Alt-U",command:"goto parent"}]}},{key:"commands",get:function(){return Uc.treeCommands}},
{key:"highlightChangedNodes",value:function(w){this.treeData.diff(w).forEach(function(ma){ma=sb(ma,2);var ua=ma[0];ma[1];return ua.renderedNode&&ua.renderedNode.highlight()})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Tree"}},{key:"properties",get:function(){return{selectionColor:{type:"ColorGradient",defaultValue:Uc.Color.rgb(21,101,192)},fontFamily:{defaultValue:Uc.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"auto"},selectable:{defaultValue:!1},
acceptsDrops:{defaultValue:!1},fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},disableIndent:{defaultValue:!1},activateOnHover:{defaultValue:!0},readOnly:{defaultValue:!0},lineHeight:{defaultValue:1.5},clipMode:{defaultValue:"auto"},padding:{defaultValue:Uc.Rectangle.inset(3)},resizeNodes:{defaultValue:!1,set:function(w){this.setProperty("resizeNodes",w);this.resetCache();this.update()}},treeData:{after:["selection"],set:function(w){this.setProperty("treeData",w);this.resetCache();this.update()}},
selectedIndex:{derived:!0,after:["selectedNode","nodes"],get:function(){return this.selectedNode?this.nodes.indexOf(this.selectedNode):-1},set:function(w){this.selectedNode=this.nodes[w]}},nodes:{derived:!0,after:["treeData"],get:function(){return this.treeData.asList()}},defaultViewState:{get:function(){return Object.assign({},uc._get(Object.getPrototypeOf(Ca),"prototype",this).defaultViewState,{fastScroll:!1})}},selectedNode:{set:function(w){this.setProperty("selectedNode",w);this.update()}},selectedNodeAndSiblings:{readOnly:!0,
derived:!0,after:["selectedNode","treeData"],get:function(){return this.selectedNode?this.treeData.nodeWithSiblings(this.selectedNode):[]}},selectionFontColor:{isStyleProp:!0,defaultValue:Uc.Color.white,set:function(w){this.setProperty("selectionFontColor",w)}},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Uc.Color.rgbHex("333"),set:function(w){this.setProperty("nonSelectionFontColor",w)}},nodeItemContainer:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this}},nodeMorphs:{derived:!0,
readOnly:!0,after:["submorphs"],get:function(){return this.nodeItemContainer.submorphs.slice()}}}}}],ia,{pathInPackage:function(){return"./tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:1414,end:18849})}(Uc.Text));Uc.Tree=kb;Uc.Tree=kb;Cc=bd("T",function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/tree.js"),
Ca=ia.hasOwnProperty("TreeData")&&"function"===typeof ia.TreeData?ia.TreeData:ia.TreeData=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:Symbol["for"]("lively-instance-initialize"),value:function(w){this.root=w;this.parentMap=new WeakMap}},{key:"isTreeData",get:function(){return!0}},{key:"__dont_serialize__",get:function(){return["parentMap"]}},{key:"__deserialize__",value:function(){this.parentMap=
new WeakMap}},{key:"display",value:function(w){throw Error("Not yet implemented");}},{key:"isCollapsed",value:function(w){throw Error("Not yet implemented");}},{key:"collapse",value:function(w,ma){throw Error("Not yet implemented");}},{key:"getChildren",value:function(w){throw Error("Not yet implemented");}},{key:"isLeaf",value:function(w){throw Error("Not yet implemented");}},{key:"getChildrenIfUncollapsed",value:function(w){return this.isCollapsed(w)?[]:this.getChildren(w)}},{key:"safeDisplay",
value:function(w){try{return this.display(w)}catch(ma){return"[TreeData] Error when trying to display node: ".concat(ma)}}},{key:"nodeToString",value:function(w){w=this.safeDisplay(w);return"string"===typeof w?w:w&&Array.isArray(w)?w.map(function(ma,ua){return 0===ua%2?ma:""}).join(""):String(w)}},{key:"parentNode",value:function(w){var ma=this;return this.parentMap.get(w)||Uc.tree.detect(this.root,function(ua){return!ma.isLeaf(ua)&&ma.getChildrenIfUncollapsed(ua).includes(w)},function(ua){return ma.getChildrenIfUncollapsed(ua)})}},
{key:"nodeWithSiblings",value:function(w){return(w=this.parentNode(w))?this.getChildrenIfUncollapsed(w):[]}},{key:"asList",value:function(){return this.asListWithIndexAndDepth().map(function(w){return w.node})}},{key:"asListWithIndexAndDepth",value:function(){var w=this,ma=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,ua=[];Uc.tree.prewalk(this.root,function(ha,ra,mb){return ua.push({node:ha,depth:mb,i:ra})},function(ha){return w.getChildrenIfUncollapsed(ha)});return ma?ua.filter(ma):
ua}},{key:"pathOf",value:function(w){for(var ma=[];w;)ma.unshift(w),w=this.parentNode(w);return ma}},{key:"followPath",value:function(){var w=ab(regeneratorRuntime.mark(function ra(ua,ha){var mb,E,R,Ya,gb,$b=arguments;return regeneratorRuntime.wrap(function(Sc){for(;;)switch(Sc.prev=Sc.next){case 0:mb=2<$b.length&&void 0!==$b[2]?$b[2]:this.root;ha||(ha=function(Ic,Pd){return Ic===Pd});E=ua.findIndex(function(Ic){return ha(Ic,mb)});ua=ua.slice(E+1);if(ua.length){Sc.next=6;break}return Sc.abrupt("return",
null);case 6:R=mb;case 7:if(ua.length){Sc.next=10;break}return Sc.abrupt("break",20);case 10:if(!this.isCollapsed(R)){Sc.next=13;break}Sc.next=13;return this.collapse(R,!1);case 13:Ya=ua.shift();if(gb=this.getChildrenIfUncollapsed(R).find(function(Ic){return ha(Ya,Ic)})){Sc.next=17;break}throw Error("Cannot descend into tree, next node of ".concat(ua.join(".")," not found at ").concat(this.safeDisplay(R)));case 17:R=gb;Sc.next=7;break;case 20:return Sc.abrupt("return",R);case 21:case "end":return Sc.stop()}},
ra,this)}));return function(ua,ha){return w.apply(this,arguments)}}()},{key:"diff",value:function(w){var ma=[],ua=this.asListWithIndexAndDepth();w=w.asListWithIndexAndDepth();if(ua.length!=w.length)return[];ua=rb(Uc.arr.zip(ua,w));var ha;try{for(ua.s();!(ha=ua.n()).done;){var ra=sb(ha.value,2),mb=ra[0],E=ra[1];Uc.obj.equals(mb.node.value,E&&E.node.value)||ma.push([mb.node,E.node])}}catch(R){ua.e(R)}finally{ua.f()}return ma}},{key:"patch",value:function(w){var ma=this.diff(w);if(0<ma.length){w=rb(ma);
var ua;try{for(w.s();!(ua=w.n()).done;){var ha=sb(ua.value,2);ha[0].value=ha[1].value}}catch(ra){w.e(ra)}finally{w.f()}return this}return w}},{key:"uncollapseAll",value:function(){var w=ab(regeneratorRuntime.mark(function ha(ua){var ra,mb,E,R,Ya=arguments;return regeneratorRuntime.wrap(function(gb){for(;;)switch(gb.prev=gb.next){case 0:ra=1<Ya.length&&void 0!==Ya[1]?Ya[1]:0;if(mb=2<Ya.length?Ya[2]:void 0){gb.next=6;break}gb.next=5;return this.uncollapseAll(ua,ra,this.root);case 5:return gb.abrupt("return",
gb.sent);case 6:if(!ua(mb,ra)){gb.next=19;break}gb.t0=mb.isCollapsed;if(!gb.t0){gb.next=11;break}gb.next=11;return this.collapse(mb,!1);case 11:E=this.getChildren(mb),gb.t1=regeneratorRuntime.keys(E);case 13:if((gb.t2=gb.t1()).done){gb.next=19;break}R=gb.t2.value;gb.next=17;return this.uncollapseAll(ua,ra+1,E[R]);case 17:gb.next=13;break;case 19:case "end":return gb.stop()}},ha,this)}));return function(ua){return w.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TreeData"}}],
ia,{pathInPackage:function(){return"./tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:18857,end:24048})}(void 0));Uc.TreeData=Cc;Uc.TreeData=Cc;Uc.treeCommands=[{name:"select via filter",exec:function(){var Ea=ab(regeneratorRuntime.mark(function w(Ca){var ma,ua,ha,ra,mb,E;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=
R.next){case 0:return ma=Ca.treeData,ma.asListWithIndexAndDepth(),ma.asListWithIndexAndDepth().map(function(Ya){return Object.assign(Ya,{string:ma.nodeToString(Ya.node)})}),ua=Uc.string.lines(Uc.string.printTree(ma.root,ma.nodeToString.bind(ma),ma.getChildrenIfUncollapsed.bind(ma))),ha=ma.asList().map(function(Ya,gb){return{isListItem:!0,string:ua[gb],value:Ya}}),R.next=7,Ca.world().filterableListPrompt("Select item",ha);case 7:ra=R.sent;mb=sb(ra.selected,1);if(E=mb[0])Ca.selectedNode=E,Ca.scrollSelectionIntoView();
return R.abrupt("return",!0);case 12:case "end":return R.stop()}},w)}));return function(Ca){return Ea.apply(this,arguments)}}()},{name:"page up",exec:function(Ea){Ea.scrollPageUp(1);var ia=Ea.scroll,Ca=Ea.padding.top(),w=ia.y;ia=Ea.lineHeightCache.findIndex(function(ma){return w<=(Ca+=ma)});ia--;Ea.gotoIndex(Math.max(1,ia));return!0}},{name:"page down",exec:function(Ea){Ea.scrollPageDown(1);var ia=Ea.scroll,Ca=Ea.padding.top(),w=ia.y+Ea.height;ia=Ea.lineHeightCache.findIndex(function(ma){return w<=
(Ca+=ma)});ia--;Ea.gotoIndex(Math.min(ia,Ea.nodes.length-1));return!0}},{name:"goto first item",exec:function(Ea){Ea.gotoIndex(1);return!0}},{name:"goto last item",exec:function(Ea){Ea.gotoIndex(Ea.nodes.length-1);return!0}},{name:"goto next sibling",exec:function(Ea){var ia=Ea.selectedNodeAndSiblings;if(ia=ia[ia.indexOf(Ea.selectedNode)+1])Ea.selectedNode=ia,Ea.scrollSelectionIntoView();return!0}},{name:"goto prev sibling",exec:function(Ea){var ia=Ea.selectedNodeAndSiblings;if(ia=ia[ia.indexOf(Ea.selectedNode)-
1])Ea.selectedNode=ia,Ea.scrollSelectionIntoView();return!0}},{name:"goto parent",exec:function(Ea){Ea.selectedNode&&(Ea.selectedNode=Ea.treeData.parentNode(Ea.selectedNode),Ea.scrollSelectionIntoView());return!0}},{name:"collapse selected node",exec:function(){var Ea=ab(regeneratorRuntime.mark(function w(Ca){var ma;return regeneratorRuntime.wrap(function(ua){for(;;)switch(ua.prev=ua.next){case 0:if(ma=Ca.selectedNode){ua.next=3;break}return ua.abrupt("return",!0);case 3:if(Ca.treeData.isCollapsed(ma)){ua.next=
8;break}ua.next=6;return Ca.onNodeCollapseChanged({node:Ca.selectedNode,isCollapsed:!0});case 6:ua.next=10;break;case 8:Ca.selectedNode=Ca.treeData.parentNode(ma),Ca.scrollSelectionIntoView();case 10:return ua.abrupt("return",!0);case 11:case "end":return ua.stop()}},w)}));return function(Ca){return Ea.apply(this,arguments)}}()},{name:"uncollapse selected node",exec:function(){var Ea=ab(regeneratorRuntime.mark(function w(Ca){return regeneratorRuntime.wrap(function(ma){for(;;)switch(ma.prev=ma.next){case 0:if(!Ca.selectedNode){ma.next=
3;break}ma.next=3;return Ca.onNodeCollapseChanged({node:Ca.selectedNode,isCollapsed:!1});case 3:return ma.abrupt("return",!0);case 4:case "end":return ma.stop()}},w)}));return function(Ca){return Ea.apply(this,arguments)}}()},{name:"collapse or uncollapse all siblings",exec:function(){var Ea=ab(regeneratorRuntime.mark(function w(Ca){var ma,ua,ha,ra,mb,E,R,Ya,gb,$b,Sc=arguments;return regeneratorRuntime.wrap(function(Ic){for(;;)switch(Ic.prev=Ic.next){case 0:$b=function(Pd,Zd){return Promise.all(Pd.map(function(ge){return Ca.onNodeCollapseChanged({node:ge,
isCollapsed:Zd})}))};gb=function(Pd){return ha.getChildrenIfUncollapsed(Pd).filter(function(Zd){return!ha.isLeaf(Zd)})};ma=1<Sc.length&&void 0!==Sc[1]?Sc[1]:{what:"collapse"};ua="collapse"===ma.what;ha=Ca.treeData;if(!ua){Ic.next=13;break}if(!ha.isCollapsed(Ca.selectedNode)){Ic.next=8;break}return Ic.abrupt("return",!0);case 8:mb=ha.parentNode(Ca.selectedNode);E=-1;Uc.tree.prewalk(mb,function(Pd,Zd,ge){ge<E||(ge>E&&(E=ge,ra=[]),ge===E&&Uc.arr.pushIfNotIncluded(ra,ha.parentNode(Pd)))},ha.getChildrenIfUncollapsed.bind(ha));
Ic.next=24;break;case 13:R=Uc.arr.compact([ha.parentNode(Ca.selectedNode)]);case 14:if(R.length){Ic.next=17;break}return Ic.abrupt("break",24);case 17:ra=R.flatMap(function(Pd){return gb(Pd)});if(Ya=ra.every(function(Pd){return ha.isCollapsed(Pd)===ua})){Ic.next=21;break}return Ic.abrupt("break",24);case 21:R=ra;Ic.next=14;break;case 24:return Ic.next=26,$b(ra,ua);case 26:return Ca.scrollSelectionIntoView(),Ic.abrupt("return",!0);case 28:case "end":return Ic.stop()}},w)}));return function(Ca){return Ea.apply(this,
arguments)}}()},{name:"select node above",exec:function(Ea){var ia=Ea.nodes,Ca=Ea.selectedIndex;1>=Ca&&(Ca=ia.length);Ea.selectedNode=ia[Ca-1];Ea.scrollSelectionIntoView();return!0}},{name:"select node below",exec:function(Ea){var ia=Ea.nodes,Ca=Ea.selectedIndex;if(-1>=Ca||Ca>=ia.length-1)Ca=0;Ea.selectedNode=ia[Ca+1];Ea.scrollSelectionIntoView();return!0}},{name:"realign top-bottom-center",exec:function(Ea){if(Ea.selectedNode){Ea.padding;var ia=Ea.scroll,Ca=ia.x;ia=ia.y;var w=Ea.lineBounds(Ea.selectedIndex),
ma=w.topLeft();w=Ea.height-w.height;ia=2>Math.abs(ma.y-ia)?ma.y-w:2>Math.abs(ma.y-ia-.5*w)?ma.y:ma.y-.5*w;Ea.scroll=Uc.pt(Ca,ia);return!0}}},{name:"print contents in text window",exec:function(Ea){var ia=Ea.treeData;ia=Uc.string.printTree(ia.root,ia.nodeToString.bind(ia),ia.getChildrenIfUncollapsed.bind(ia));var Ca=Ea.getWindow()?"printed "+Ea.getWindow().title:Ea.name;return Ea.world().execCommand("open text window",{title:Ca,content:ia,name:Ca,fontFamily:Uc.config.codeEditor.defaultStyle.fontFamily})}}];
kb=Object.freeze({__proto__:null,Tree:kb,TreeData:Cc});var Md=window.lively.FreezerRuntime.recorderFor("lively.components/iframe.js");Md.promise=Vb;Md.HTMLMorph=Ib;Cc=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/iframe.js"),Ca=ia.hasOwnProperty("IFrameMorph")&&"function"===typeof ia.IFrameMorph?ia.IFrameMorph:ia.IFrameMorph=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};
return uc(Ca,Ea,[{key:Symbol["for"]("lively-instance-initialize"),value:function(w){w.src||w.srcdoc||(w.srcdoc="<p>Empty iframe</p>");uc._get(Object.getPrototypeOf(Ca.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,w)}},{key:"changeSrc",value:function(w,ma){var ua=this,ha=this.iframe,ra=this._loadPromise;ra&&!ra.loaded&&ra.reject();this._loadPromise=Md.promise.deferred();this._loadPromise.loaded=!1;ha.onload=function(mb){ua._loadPromise.loaded=!0;ua._loadPromise.resolve(mb)};
ma=w||ma;ra=w?"src":"srcdoc";w=w?"srcdoc":"src";this.addValueChange(w,null);this.addValueChange(ra,ma);ha.removeAttribute(w);ha.setAttribute(ra,ma);this._loadPromise[ra]=ma}},{key:"whenLoaded",value:function(){return this._loadPromise.promise}},{key:"reload",value:function(){return this.iframe.src=this.src}},{key:"run",value:function(w){return this.innerWindow.eval("("+w+")();")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"printTextMorph",value:function(){var w=
ab(regeneratorRuntime.mark(function ha(ua){var ra,mb,E,R,Ya;return regeneratorRuntime.wrap(function(gb){for(;;)switch(gb.prev=gb.next){case 0:return gb.next=2,ua.whenRendered();case 2:return ra=ua.env.renderer.getNodeForMorph(ua),mb=Md.IFrameMorph.open({srcdoc:ra.outerHTML}),gb.next=6,mb.whenLoaded();case 6:E=mb.innerWindow.document,E.body.style.whiteSpace="normal",E.body.style.margin="0.5cm",E.querySelector(".Text").style.width="100%",E.querySelector(".Text").style.overflow="visible",E.querySelectorAll(".marker-layer-part").forEach(function($b){return $b.parentNode.removeChild($b)}),
R=E.querySelector(".text-layer"),R.style.whiteSpace="pre-wrap",Ya=Array.from(R.querySelectorAll("div")),Ya.forEach(function($b){$b.childNodes[0]&&(Array.from($b.childNodes).forEach(function(Sc){return R.insertBefore(Sc,$b)}),R.insertBefore(E.createElement("br"),$b),R.removeChild($b))}),mb.innerWindow.print(),mb.getWindow().remove();case 18:case "end":return gb.stop()}},ha)}));return function(ua){return w.apply(this,arguments)}}()},{key:"open",value:function(){var w=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:{};return(new this(w)).openInWindow({title:w.title||"iframe"}).targetMorph}},{key:"properties",get:function(){return{iframe:{after:["domNode"],readOnly:!0,get:function(){return this.domNode}},innerWindow:{after:["iframe"],readOnly:!0,get:function(){return this.iframe.contentWindow}},innerWorld:{after:["innerWindow"],readOnly:!0,get:function(){return this.innerWindow.$world}},src:{after:["domNode"],set:function(w){this.changeSrc(w,null)}},srcdoc:{after:["domNode"],set:function(w){this.changeSrc(null,
w)}},domNode:{get:function(){this._domNode||(this._domNode=this.document.createElement("iframe"),this._domNode.setAttribute("style","position: absolute; width: 100%; height: 100%;"),this._domNode.setAttribute("allowfullscreen",!0));return this._domNode},set:function(w){return this._domNode=w}}}}}],ia,{pathInPackage:function(){return"./iframe.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",
version:"0.1.0"}}},{start:619,end:6343})}(Md.HTMLMorph);Md.IFrameMorph=Cc;Md.IFrameMorph=Cc;Cc=Object.freeze({__proto__:null,IFrameMorph:Cc});var Ob=window.lively.FreezerRuntime.recorderFor("lively.components/window.cp.js");Ob.Color=ad;Ob.rect=ic;Ob.LinearGradient=da;Ob.pt=Rc;Ob.ShadowObject=fe;Ob.Icon=Ed;Ob.Label=jc;Ob.HorizontalLayout=Od;Ob.component=qb;Ob.part=db;Ob.WindowButtonClose=Ob.component["for"](function(){return Ob.component({name:"window button close",borderRadius:14,extent:Ob.pt(15,
13),fill:Ob.Color.rgba(0,0,0,0),position:Ob.pt(6,6),nativeCursor:"pointer",submorphs:[{type:Ob.Label,name:"label",fontColor:Ob.Color.rgb(255,96,82),fontSize:14,position:Ob.pt(2,1),reactsToPointer:!1,textAndAttributes:Ob.Icon.textAttribute("times")}],tooltip:"Close window"})},{module:"lively.components/window.cp.js","export":"WindowButtonClose",range:{start:168,end:600}},Ob.WindowButtonClose);Ob.WindowButtonCloseHovered=Ob.component["for"](function(){return Ob.component(Ob.WindowButtonClose,{name:"window button close hovered",
submorphs:[{name:"label",fontColor:Ob.Color.rgb(176,58,46)}]})},{module:"lively.components/window.cp.js","export":"WindowButtonCloseHovered",range:{start:608,end:785}},Ob.WindowButtonCloseHovered);Ob.WindowButtonInactive=Ob.component["for"](function(){return Ob.component(Ob.WindowButtonClose,{name:"window button inactive",submorphs:[{name:"label",fontColor:Ob.Color.rgbHex("7F8C8D")}]})},{module:"lively.components/window.cp.js","export":"WindowButtonInactive",range:{start:793,end:961}},Ob.WindowButtonInactive);
Ob.WindowButtonInactiveDark=Ob.component["for"](function(){return Ob.component(Ob.WindowButtonClose,{name:"window button inactive",submorphs:[{name:"label",fontColor:Ob.Color.rgbHex("ECF0F1")}]})},{module:"lively.components/window.cp.js","export":"WindowButtonInactiveDark",range:{start:969,end:1141}},Ob.WindowButtonInactiveDark);Ob.WindowButtonMenu=Ob.component["for"](function(){return Ob.component({name:"window button menu",borderRadius:14,extent:Ob.pt(15,13),fill:Ob.Color.rgba(0,0,0,0),nativeCursor:"pointer",
position:Ob.pt(48,6),submorphs:[{type:Ob.Label,name:"label",fontColor:Ob.Color.rgb(52,152,219),fontSize:14,position:Ob.pt(2,1),reactsToPointer:!1,textAndAttributes:Ob.Icon.textAttribute("angle-down")}],tooltip:"Open Window Menu"})},{module:"lively.components/window.cp.js","export":"WindowButtonMenu",range:{start:1149,end:1590}},Ob.WindowButtonMenu);Ob.WindowButtonMenuHovered=Ob.component["for"](function(){return Ob.component(Ob.WindowButtonMenu,{name:"window button menu hovered",submorphs:[{name:"label",
fontColor:Ob.Color.rgb(40,116,166)}]})},{module:"lively.components/window.cp.js","export":"WindowButtonMenuHovered",range:{start:1598,end:1773}},Ob.WindowButtonMenuHovered);Ob.WindowButtonMinimize=Ob.component["for"](function(){return Ob.component({name:"window button minimize",borderRadius:14,extent:Ob.pt(15,13),fill:Ob.Color.rgba(0,0,0,0),nativeCursor:"pointer",position:Ob.pt(27,6),submorphs:[{type:Ob.Label,name:"label",fontColor:Ob.Color.rgb(243,156,18),fontSize:14,position:Ob.pt(2,1),reactsToPointer:!1,
textAndAttributes:Ob.Icon.textAttribute("minus")}],tooltip:"collapse window"})},{module:"lively.components/window.cp.js","export":"WindowButtonMinimize",range:{start:1781,end:2224}},Ob.WindowButtonMinimize);Ob.WindowButtonMinimizeHovered=Ob.component["for"](function(){return Ob.component(Ob.WindowButtonMinimize,{name:"window button minimize hovered",submorphs:[{name:"label",fontColor:Ob.Color.rgb(175,96,26)}]})},{module:"lively.components/window.cp.js","export":"WindowButtonMinimizeHovered",range:{start:2232,
end:2418}},Ob.WindowButtonMinimizeHovered);Ob.DefaultWindow=Ob.component["for"](function(){return Ob.component({name:"default window",draggable:!0,fill:Ob.Color.transparent,dropShadow:new Ob.ShadowObject({distance:8,rotation:90,color:Ob.Color.rgba(0,0,0,.3),blur:35,spread:5}),extent:Ob.pt(345.1,152.1),borderRadius:6,submorphs:[{name:"contents wrapper",extent:Ob.pt(345.1,152.1),fill:Ob.Color.rgb(179,182,183),borderRadius:6,reactsToPointer:!1,clipMode:"hidden",submorphs:[{name:"header",borderColor:Ob.Color.rgba(0,
0,0,0),extent:Ob.pt(345.3,72),fill:new Ob.LinearGradient({stops:[{offset:0,color:Ob.Color.rgb(208,211,212)},{offset:1,color:Ob.Color.rgb(179,182,183)}],vector:Ob.rect(0,0,0,1)}),position:Ob.pt(-.2,-.4),reactsToPointer:!1,isLayoutable:!1,submorphs:[{name:"window controls",extent:Ob.pt(69,27),fill:Ob.Color.rgba(0,0,0,0),layout:new Ob.HorizontalLayout({align:"top",autoResize:!0,direction:"leftToRight",orderByIndex:!0,padding:{height:0,width:0,x:6,y:6},spacing:6}),position:Ob.pt(-.6,-.3),submorphs:[Ob.part(Ob.WindowButtonClose,
{name:"close",master:{auto:Ob.WindowButtonClose,hover:Ob.WindowButtonCloseHovered}}),Ob.part(Ob.WindowButtonMinimize,{name:"minimize",master:{auto:Ob.WindowButtonMinimize,hover:Ob.WindowButtonMinimizeHovered}}),Ob.part(Ob.WindowButtonMenu,{name:"menu",master:{auto:Ob.WindowButtonMenu,hover:Ob.WindowButtonMenuHovered}})]},{type:Ob.Label,name:"window title",fontColor:Ob.Color.rgb(102,102,102),fontWeight:"bold",isLayoutable:!1,nativeCursor:"pointer",padding:Ob.rect(0,2,0,-2),position:Ob.pt(135.2,6),
textAndAttributes:["Window Title",null]}]}]}]})},{module:"lively.components/window.cp.js","export":"DefaultWindow",range:{start:2458,end:4726}},Ob.DefaultWindow);Ob.DefaultWindowInactive=Ob.component["for"](function(){return Ob.component(Ob.DefaultWindow,{name:"default window inactive",dropShadow:new Ob.ShadowObject({distance:8,rotation:90,color:Ob.Color.rgba(0,0,0,.1),blur:10}),submorphs:[{name:"contents wrapper",fill:Ob.Color.rgb(208,211,212),submorphs:[{name:"header",fill:new Ob.LinearGradient({stops:[{offset:0,
color:Ob.Color.rgb(244,246,247)},{offset:1,color:Ob.Color.rgb(208,211,212)}],vector:Ob.rect(0,0,0,1)}),submorphs:[{name:"window controls",submorphs:[{name:"close",master:Ob.WindowButtonInactive},{name:"minimize",master:Ob.WindowButtonInactive},{name:"menu",master:Ob.WindowButtonInactive}]},{name:"window title",fontWeight:400}]}]}]})},{module:"lively.components/window.cp.js","export":"DefaultWindowInactive",range:{start:4774,end:5745}},Ob.DefaultWindowInactive);Ob.DarkWindow=Ob.component["for"](function(){return Ob.component(Ob.DefaultWindow,
{name:"dark window",dropShadow:new Ob.ShadowObject({distance:8,rotation:90,color:Ob.Color.rgba(0,0,0,.1),blur:10}),submorphs:[{name:"contents wrapper",fill:Ob.Color.rgb(38,50,56),submorphs:[{name:"header",fill:new Ob.LinearGradient({stops:[{offset:0,color:Ob.Color.rgb(55,71,79)},{offset:1,color:Ob.Color.rgb(38,50,56)}],vector:Ob.rect(0,0,0,1)}),submorphs:[{name:"window title",fontColor:Ob.Color.rgb(144,148,151)}]}]}]})},{module:"lively.components/window.cp.js","export":"DarkWindow",range:{start:5782,
end:6444}},Ob.DarkWindow);Ob.DarkWindowInactive=Ob.component["for"](function(){return Ob.component(Ob.DefaultWindowInactive,{name:"dark window inactive",dropShadow:new Ob.ShadowObject({distance:8,rotation:90,color:Ob.Color.rgba(0,0,0,.1),blur:10}),submorphs:[{name:"contents wrapper",fill:Ob.Color.rgb(128,139,150),submorphs:[{name:"header",fill:new Ob.LinearGradient({stops:[{offset:0,color:Ob.Color.rgb(171,178,185)},{offset:1,color:Ob.Color.rgb(128,139,150)}],vector:Ob.rect(0,0,0,1)}),submorphs:[{name:"window controls",
submorphs:[{name:"close",master:Ob.WindowButtonInactiveDark},{name:"minimize",master:Ob.WindowButtonInactiveDark},{name:"menu",master:Ob.WindowButtonInactiveDark}]},{name:"window title",fontColor:Ob.Color.rgb(102,102,102)}]}]}]})},{module:"lively.components/window.cp.js","export":"DarkWindowInactive",range:{start:6489,end:7494}},Ob.DarkWindowInactive);var Le=Ob.DefaultWindow,We=Ob.DarkWindow,xe=Ob.DefaultWindowInactive,Fg=Ob.DarkWindowInactive;Ob.DefaultWindow=Le;Ob.DarkWindow=We;Ob.DefaultWindowInactive=
xe;Ob.DarkWindowInactive=Fg;var Zc=window.lively.FreezerRuntime.recorderFor("lively.components/window.js");Zc.arr=Cb;Zc.promise=Vb;Zc.pt=Rc;Zc.Color=ad;Zc.Rectangle=Xa;Zc.Label=jc;Zc.morph=Wb;Zc.Morph=Dd;Zc.connect=ub;Zc.signal=Ne;Zc.easings=ka;Zc.DefaultWindow=Le;Zc.DefaultWindowInactive=xe;Le=bd("W",function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/window.js"),Ca=ia.hasOwnProperty("Window")&&"function"===typeof ia.Window?ia.Window:ia.Window=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(Ca,Ea,[{key:"build",value:function(){this.submorphs=[{name:"contents wrapper",submorphs:[this.buildHeader()]},this.buildResizer()]}},{key:"openWindowMenu",value:function(){var w=ab(regeneratorRuntime.mark(function ua(){var ha=this,ra;return regeneratorRuntime.wrap(function(mb){for(;;)switch(mb.prev=mb.next){case 0:return ra=this.world()||this.env.world,mb.t0=this.targetMorph.world(),mb.t1=[["Change Window Title",ab(regeneratorRuntime.mark(function R(){var Ya;return regeneratorRuntime.wrap(function(gb){for(;;)switch(gb.prev=
gb.next){case 0:return gb.next=2,ra.prompt("Enter New Name",{input:ha.title});case 2:if(Ya=gb.sent)ha.title=Ya;case 4:case "end":return gb.stop()}},R)}))],["Align and resize",[{alias:"full",target:ra,command:"resize active window",args:{window:this,how:"full"}},{alias:"left",target:ra,command:"resize active window",args:{window:this,how:"left"}},{alias:"center",target:ra,command:"resize active window",args:{window:this,how:"center"}},{alias:"right",target:ra,command:"resize active window",args:{window:this,
how:"right"}},{alias:"top",target:ra,command:"resize active window",args:{window:this,how:"top"}},{alias:"bottom",target:ra,command:"resize active window",args:{window:this,how:"bottom"}},{alias:"reset",target:ra,command:"resize active window",args:{window:this,how:"reset"}}]],["Window Management",[{alias:"minimize all except this",target:ra,command:"toggle minimize all except active window"},{alias:"close all except this",target:ra,command:"close all except active window"},{alias:"close all like this",
target:ra,command:"close all like this window"},{isDivider:!0},{alias:"minimize all",target:ra,command:"toggle minimize all windows"},{alias:"close all",target:ra,command:"close all windows"}]],{isDivider:!0}],mb.t2=fa,mb.next=6,this.targetMorph.menuItems();case 6:return mb.t3=mb.sent,mb.t4=(0,mb.t2)(mb.t3),mb.t5=mb.t1.concat.call(mb.t1,mb.t4),mb.abrupt("return",mb.t0.openMenu.call(mb.t0,mb.t5));case 10:case "end":return mb.stop()}},ua,this)}));return function(){return w.apply(this,arguments)}}()},
{key:"isFaderActive",value:function(){return!!this.getSubmorphNamed("fader")}},{key:"toggleFader",value:function(){var w=ab(regeneratorRuntime.mark(function ha(ua){var ra,mb,E;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:ra=this.getSubmorphNamed("fader")||this.ui.contentsWrapper.addMorph({position:Zc.pt(0,0),name:"fader",fill:Zc.Color.black.withA(.5),opacity:0,extent:this.extent});mb=this.position.extent(this.extent);if(!ua){R.next=11;break}E=this.world().visibleBoundsExcludingTopBar().translateForInclusion(mb);
this._originalBounds=mb;this.animate({bounds:E,duration:300});this.borderColor=Zc.Color.gray.darker();this._faderTriggered=!0;ra.opacity=1;R.next=23;break;case 11:return this._originalBounds&&(this.animate({bounds:this._originalBounds,duration:300}),this._originalBounds=null),this._faderTriggered=!1,R.next=15,this.whenRendered();case 15:return R.next=17,Zc.promise.delay(100);case 17:this.borderColor=Zc.Color.gray;if(!this._faderTriggered){R.next=20;break}return R.abrupt("return");case 20:return R.next=
22,ra.animate({opacity:0,duration:300});case 22:ra.remove();case 23:case "end":return R.stop()}},ha,this)}));return function(ua){return w.apply(this,arguments)}}()},{key:"isWindow",get:function(){return!0}},{key:"targetMorphBounds",value:function(){return new Zc.Rectangle(0,25,this.width,this.height-25)}},{key:"relayoutWindowControls",value:function(){var w=this.innerBounds(),ma=this.ui.windowTitle,ua=this.ui.resizer;w=w.withHeight(25);var ha=this.ui.header,ra=this.ui.contentsWrapper,mb=this.ui.windowControls.bounds().right()+
3,E=w.withLeftCenter(Zc.pt(mb,w.height/2));ua.position=Zc.pt(0,0);ma.textBounds().width<w.width-2*mb?ma.center=w.center():ma.leftCenter=E.leftCenter();!this.minimized&&this.targetMorph&&this.targetMorph.isLayoutable&&this.targetMorph.setBounds(this.targetMorphBounds());ha.width=this.width;ra.extent=this.extent}},{key:"ensureNotOverTheTop",value:function(){var w=this,ma=this.world();if(ma){var ua=this.globalBounds();ma.withTopBarDo(function(ha){ua.top()<ha.height&&w.moveBy(Zc.pt(0,ha.height-ua.top()))})}}},
{key:"buildHeader",value:function(){return Zc.morph({name:"header",extent:Zc.pt(this.width,50),submorphs:[Zc.morph({name:"window controls",styleClasses:["buttonGroup"],submorphs:this.buildButtons()}),this.buildTitleLabel()]})}},{key:"buildButtons",value:function(){var w=this.getSubmorphNamed("close")||Zc.morph({name:"close",styleClasses:["windowButton","closeButton"],tooltip:"close window",submorphs:[Zc.Label.icon("times",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});Zc.connect(w,
"onMouseDown",this,"close");var ma=this.getSubmorphNamed("minimize")||Zc.morph({name:"minimize",styleClasses:["windowButton","minimizeButton"],tooltip:"collapse window",submorphs:[Zc.Label.icon("minus",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});Zc.connect(ma,"onMouseDown",this,"minimized",{updater:function(ha){ha(!this.targetObj.minimized)}});if(this.resizable){var ua=this.getSubmorphNamed("menu")||Zc.morph({name:"menu",styleClasses:["windowButton","windowMenuButton"],tooltip:"Open Window Menu",
submorphs:[Zc.Label.icon("chevron-down",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});Zc.connect(ua,"onMouseDown",this,"openWindowMenu")}return Zc.arr.compact([w,ma,ua])}},{key:"buildTitleLabel",value:function(){var w=Zc.morph({padding:Zc.Rectangle.inset(0,2,0,0),styleClasses:["windowTitleLabel"],type:"label",name:"window title",tooltip:"double click to maximize/reset",reactsToPointer:!0,value:""});Zc.connect(this,"onDoubleMouseDown",this,"toggleMaximize",{updater:"($upd, evt) => {\n        if (source.fullContainsWorldPoint(evt.position)) {\n          $upd();\n        }\n      }"});
return this.addMorph(w)}},{key:"resizeBy",value:function(w){uc._get(Object.getPrototypeOf(Ca.prototype),"resizeBy",this).call(this,w);this.relayoutWindowControls()}},{key:"resizeAt",value:function(w){w=sb(w,2);var ma=w[0];w=w[1];var ua=this.position.extent(this.extent);switch(ma){case "right":this.resizeBy(w.withY(0));break;case "bottom right":this.resizeBy(w);break;case "bottom":this.resizeBy(w.withX(0));break;case "left":this.resizeBy(w.withY(0).negated());this.position=Zc.pt(ua.x+w.x,ua.y);break;
case "bottom left":w=w.scaleByPt(Zc.pt(-1,1));this.resizeBy(w);this.position=Zc.pt(ua.x-w.x,ua.y);break;case "top":ma=ua.x;var ha=ua.y+w.y;var ra=ua.width;w=ua.height-w.y;this.setBounds(new Zc.Rectangle(ma,ha,ra,w));break;case "top left":ma=ua.x+w.x;ha=ua.y+w.y;ra=ua.width-w.x;w=ua.height-w.y;this.setBounds(new Zc.Rectangle(ma,ha,ra,w));break;case "top right":ma=ua.x,ha=ua.y+w.y,ra=ua.width+w.x,w=ua.height-w.y,this.setBounds(new Zc.Rectangle(ma,ha,ra,w))}this.relayoutResizer()}},{key:"relayoutResizer",
value:function(){try{var w=this.getSubmorphNamed("resizer"),ma=this.resizerInset,ua=this.resizerOutset,ha=sb(w.submorphs,8),ra=ha[0],mb=ha[1],E=ha[2],R=ha[3],Ya=ha[4],gb=ha[5],$b=ha[6],Sc=ha[7];ra.height=this.height+ua;ra.bottomRight=this.extent.subXY(ua,ma+ua);gb.bottomRight=this.extent.subXY(ua,ua);mb.height=this.height+ua;mb.bottomLeft=Zc.pt(ua,this.height-(ma+ua));Ya.bottomLeft=Zc.pt(ua,this.height-ua);E.width=this.width+ua;E.bottomLeft=Zc.pt(ma+ua,this.height-ua);R.width=this.width+ua;R.height=
ma;R.bottomLeft=Zc.pt(ma+ua,ma+ua);$b.topLeft=Zc.pt(ua,ua);Sc.topRight=Zc.pt(this.width-ua,ua);w.position=Zc.pt(0,0)}catch(Ic){}}},{key:"buildResizer",value:function(){var w,ma,ua,ha,ra,mb,E;var R=Zc.Color.transparent;var Ya=this.resizerInset;Ya=Zc.morph({name:"resizer",fill:R,position:Zc.pt(0,0),submorphs:[w=Zc.morph({name:"right resizer",fill:R,width:Ya,draggable:!0,nativeCursor:"ew-resize"}),ua=Zc.morph({name:"left resizer",fill:R,width:Ya,draggable:!0,nativeCursor:"ew-resize"}),ra=Zc.morph({name:"bottom resizer",
draggable:!0,fill:R,height:Ya,nativeCursor:"ns-resize"}),mb=Zc.morph({name:"top resizer",draggable:!0,fill:R,height:Ya/4,nativeCursor:"ns-resize"}),ha=Zc.morph({name:"bottom left resizer",draggable:!0,fill:R,extent:Zc.pt(Ya,Ya),nativeCursor:"nesw-resize"}),ma=Zc.morph({name:"bottom right resizer",fill:R,extent:Zc.pt(Ya,Ya),draggable:!0,nativeCursor:"nwse-resize"}),E=Zc.morph({name:"top left resizer",draggable:!0,fill:R,extent:Zc.pt(Ya,Ya),nativeCursor:"nwse-resize"}),R=Zc.morph({name:"top rigth resizer",
draggable:!0,fill:R,extent:Zc.pt(Ya,Ya),nativeCursor:"nesw-resize"})]});Zc.connect(mb,"onDrag",this,"resizeAt",{converter:function(gb){return["top",gb.state.dragDelta]}});Zc.connect(R,"onDrag",this,"resizeAt",{converter:function(gb){return["top right",gb.state.dragDelta]}});Zc.connect(E,"onDrag",this,"resizeAt",{converter:function(gb){return["top left",gb.state.dragDelta]}});Zc.connect(ma,"onDrag",this,"resizeAt",{converter:function(gb){return["bottom right",gb.state.dragDelta]}});Zc.connect(w,"onDrag",
this,"resizeAt",{converter:function(gb){return["right",gb.state.dragDelta]}});Zc.connect(ra,"onDrag",this,"resizeAt",{converter:function(gb){return["bottom",gb.state.dragDelta]}});Zc.connect(ua,"onDrag",this,"resizeAt",{converter:function(gb){return["left",gb.state.dragDelta]}});Zc.connect(ha,"onDrag",this,"resizeAt",{converter:function(gb){return["bottom left",gb.state.dragDelta]}});this.addMorph(Ya);this.relayoutResizer();return Ya}},{key:"toggleMaximize",value:function(){this.minized||(this.maximized=
!this.maximized)}},{key:"applyMaximize",value:function(){this.maximized?$world.execCommand("resize active window",{window:this,how:"full"}):$world.execCommand("resize active window",{window:this,how:"reset"})}},{key:"toggleMinimize",value:function(){var w=ab(regeneratorRuntime.mark(function ua(){return regeneratorRuntime.wrap(function(ha){for(;;)switch(ha.prev=ha.next){case 0:this.minimized=!this.minimized;case 1:case "end":return ha.stop()}},ua,this)}));return function(){return w.apply(this,arguments)}}()},
{key:"applyMinimize",value:function(){var w=ab(regeneratorRuntime.mark(function ua(){var ha=this,ra,mb,E,R,Ya,gb,$b,Sc,Ic,Pd,Zd,ge;return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(this.targetMorph){Ce.next=2;break}return Ce.abrupt("return");case 2:ra=this.nonMinizedBounds,mb=this.minimized,E=this.width,R=this.ui,Ya=R.windowTitle,gb=R.resizer,$b=this.bounds(),Sc=this.getSubmorphNamed("minimize"),Ic=Zc.easings.outQuad,mb?(this.clipMode="hidden",this.nonMinizedBounds=
$b,Pd=(this.minimizedBounds||$b).withExtent(Zc.pt(E,28)),Zd=Ya.textBounds(),ge=this.get("window controls").bounds().right()+3,Zd.width+2*ge<Pd.width&&(Pd=Pd.withWidth(Zd.width+ge+5)),this.minimizedBounds=Pd,Sc.tooltip="uncollapse window",this.animate({styleClasses:["minimized","active"].concat(fa(Zc.arr.without(this.styleClasses,"neutral"))),bounds:Pd,duration:100,easing:Ic}).then(function(){ha.targetMorph&&(ha.targetMorph.isComponent?ha.targetMorph.top=ha.height:ha.targetMorph.visible=!1)})):(this.minimizedBounds=
$b,this.withMetaDo({metaInteraction:!0},function(){ha.targetMorph&&(ha.targetMorph.visible=!0)}),ra=this.world().visibleBoundsExcludingTopBar().translateForInclusion(ra||$b),this.animate({bounds:ra,styleClasses:["neutral","active"].concat(fa(Zc.arr.without(this.styleClasses,"minimzed"))),duration:100,easing:Ic}).then(function(){return ha.clipMode="visible"}),Sc.tooltip="collapse window"),Ya.reactsToPointer=!this.minimized,gb.visible=!this.minimized,this.withAnimationDo(function(){ha.relayoutWindowControls();
ha.relayoutResizer()},{duration:100,easing:Ic});case 12:case "end":return Ce.stop()}},ua,this)}));return function(){return w.apply(this,arguments)}}()},{key:"setBounds",value:function(w){uc._get(Object.getPrototypeOf(Ca.prototype),"setBounds",this).call(this,w);this.relayoutResizer();this.relayoutWindowControls()}},{key:"close",value:function(){var w=ab(regeneratorRuntime.mark(function ua(){var ha,ra,mb;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!this.targetMorph||
"function"!==typeof this.targetMorph.onWindowClose){E.next=4;break}E.next=3;return this.targetMorph.onWindowClose();case 3:ha=E.sent;case 4:if(!1!==ha){E.next=6;break}return E.abrupt("return");case 6:ra=this.world(),this.deactivate(),this.remove(),(mb=ra.activeWindow()||Zc.arr.last(ra.getWindows()))&&mb.activate(),Zc.signal(this,"windowClosed",this);case 12:case "end":return E.stop()}},ua,this)}));return function(){return w.apply(this,arguments)}}()},{key:"onMouseUp",value:function(w){uc._get(Object.getPrototypeOf(Ca.prototype),
"onMouseUp",this).call(this,w);this.minimized||(this.ui.resizer.visible=!0)}},{key:"onMouseDown",value:function(w){uc._get(Object.getPrototypeOf(Ca.prototype),"onMouseDown",this).call(this,w);this.activate(w);this.minimized||this.ui.resizer.submorphs.includes(w.targetMorph)||(this.ui.resizer.visible=!1)}},{key:"onDragStart",value:function(w){var ma=this;uc._get(Object.getPrototypeOf(Ca.prototype),"onDragStart",this).call(this,w);this.targetMorph&&(w.state.origReactsToPointer=this.targetMorph.reactsToPointer,
this.withMetaDo({metaInteraction:!0},function(){ma.targetMorph.reactsToPointer=!1}))}},{key:"onDragEnd",value:function(w){var ma=this;uc._get(Object.getPrototypeOf(Ca.prototype),"onDragEnd",this).call(this,w);this.targetMorph&&this.withMetaDo({metaInteraction:!0},function(){ma.targetMorph.reactsToPointer=w.state.origReactsToPointer});this.minimized||(this.ui.resizer.visible=!0)}},{key:"onDrag",value:function(w){uc._get(Object.getPrototypeOf(Ca.prototype),"onDrag",this).call(this,w);this.ensureNotOverTheTop()}},
{key:"focus",value:function(){var w=this.world(),ma=this.targetMorph;w&&ma&&(!w.focusedMorph||w.focusedMorph!==ma&&!ma.isAncestorOf(w.focusedMorph))&&ma.focus()}},{key:"isActive",value:function(){var w=this.world();return w&&"bold"===this.ui.windowTitle.fontWeight?Zc.arr.last(w.getWindows())===this:!1}},{key:"activate",value:function(){var w=this;if(!this.isFaderActive()){this.targetMorph.onWindowActivated();if(this.isActive())return this.bringToFront(),this.focus(),this.renderOnGPU=!0,this.relayoutWindowControls(),
this;this.master.whenApplied().then(function(){w.master={auto:Zc.DefaultWindow}});this.world()?this.bringToFront():this.openInWorldNearHand();var ma=this.world()||this.env.world;Zc.arr.without(ma.getWindows(),this).forEach(function(ua){return ua.deactivate()});this.focus();Zc.signal(this,"windowActivated",this);Promise.resolve(this.master.applyIfNeeded(!0)).then(function(){return w.relayoutWindowControls()});return this}}},{key:"deactivate",value:function(){var w=this;this.targetMorph.onWindowDeactivated();
this.master&&this.master.auto===Zc.DefaultWindowInactive||(this.master.whenApplied().then(function(){w.master={auto:Zc.DefaultWindowInactive}}),this.relayoutWindowControls(),this.renderOnGPU=!1)}},{key:"keybindings",get:function(){return uc._get(Object.getPrototypeOf(Ca.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Shift-L R E N",win:"Ctrl-Shift-L R E N"},command:"[window] change title"}])}},{key:"commands",get:function(){return uc._get(Object.getPrototypeOf(Ca.prototype),"commands",this).concat([{name:"[window] change title",
exec:function(){var w=ab(regeneratorRuntime.mark(function ha(ua){var ra,mb,E=arguments;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:ra=1<E.length&&void 0!==E[1]?E[1]:{};R.t0=ra.title;if(R.t0){R.next=6;break}R.next=5;return ua.world().prompt("Enter new title",{input:ua.title,historyId:"lively.morphic-window-title-hist"});case 5:R.t0=R.sent;case 6:if(mb=R.t0)ua.title=mb;return R.abrupt("return",!0);case 9:case "end":return R.stop()}},ha)}));return function(ua){return w.apply(this,
arguments)}}()}])}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Window"}},{key:"properties",get:function(){return{submorphs:{initialize:function(){this.build()}},position:{set:function(w){this.setProperty("position",w.roundTo(1))}},ui:{derived:!0,get:function(){return{header:this.get("header"),resizer:this.get("resizer"),windowControls:this.get("window controls"),windowTitle:this.get("window title"),contentsWrapper:this.get("contents wrapper")}}},master:{before:["extent"],initialize:function(){this.master=
{auto:Zc.DefaultWindow}}},styleClasses:{defaultValue:["active"]},clipMode:{defaultValue:"visible"},resizable:{defaultValue:!0},resizerInset:{readOnly:!0,get:function(){return 10}},resizerOutset:{readOnly:!0,get:function(){return.75*-this.resizerInset}},title:{after:["submorphs"],derived:!0,get:function(){return this.ui.windowTitle.textString},set:function(w){var ma=this;return ab(regeneratorRuntime.mark(function ha(){var ra,mb,E,R,Ya,gb,$b,Sc;return regeneratorRuntime.wrap(function(Ic){for(;;)switch(Ic.prev=
Ic.next){case 0:ra="string"===typeof w?[w,{}]:w,mb=100,E=0,R=[],Ya=0;case 5:if(!(Ya<ra.length)){Ic.next=17;break}gb=ra[Ya];$b=ra[Ya+1];gb=gb.replace(/\n/g,"");Sc=gb.length+E-mb;0<Sc&&(gb=gb.slice(0,-Sc));R.push(gb,$b||{});if(!(E>=mb)){Ic.next=14;break}return Ic.abrupt("break",17);case 14:Ya+=2;Ic.next=5;break;case 17:return ma.ui.windowTitle.value=R,Ic.next=20,ma.whenRendered();case 20:ma.ui.windowTitle.reactsToPointer=!1,ma.relayoutWindowControls();case 22:case "end":return Ic.stop()}},ha)}))()}},
targetMorph:{after:["submorphs"],derived:!0,get:function(){return Zc.arr.withoutAll(this.ui.contentsWrapper.submorphs,[this.get("header")])[0]},set:function(w){var ma=this.ui.contentsWrapper,ua=[this.get("header")];Zc.arr.withoutAll(ma.submorphs,ua).forEach(function(ha){return ha.remove()});w&&ma.addMorph(w);this.relayoutWindowControls()}},minimizedBounds:{serialize:!1},nonMinizedBounds:{},nonMaximizedBounds:{},minimized:{set:function(w){this.setProperty("minimized",w);this.applyMinimize()}},maximized:{set:function(w){this.setProperty("maximized",
w);this.applyMaximize()}}}}}],ia,{pathInPackage:function(){return"./window.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:357,end:22571})}(Zc.Morph));Zc["default"]=Le;var rd=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js");rd.List=tb;rd.FilterableList=vc;rd.RadioButtonGroup=Ia;rd.ShadowObject=fe;
rd.TilingLayout=va;rd.InputLine=vd;rd.PasswordInputLine=Fa;rd.Ellipse=M;rd.HorizontalLayout=Od;rd.Text=dd;rd.VerticalLayout=Aa;rd.Icon=Ed;rd.Label=jc;rd.component=qb;rd.ViewModel=se;rd.add=wb;rd.part=db;rd.Color=ad;rd.rect=ic;rd.pt=Rc;rd.ButtonDefault=xb;rd.InputLineDefault=Id;rd.arr=Cb;rd.promise=Vb;Id=bd("A",function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),Ca=ia.hasOwnProperty("AbstractPromptModel")&&"function"===typeof ia.AbstractPromptModel?ia.AbstractPromptModel:
ia.AbstractPromptModel=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"viewDidLoad",value:function(){this.view.hasFixedPosition=!0}},{key:"focus",value:function(){this.view.focus()}},{key:"resolve",value:function(w){return this.answer.resolve(w)}},{key:"reject",value:function(){return this.answer.resolve(0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0)}},{key:"activate",
value:function(){var w=ab(regeneratorRuntime.mark(function ua(){var ha=this;return regeneratorRuntime.wrap(function(ra){for(;;)switch(ra.prev=ra.next){case 0:this.focus();this.answer=rd.promise.deferred();this._isActive=!0;rd.promise["finally"](this.answer.promise,function(){return ha._isActive=!1});if(this.autoRemove)rd.promise["finally"](this.answer.promise,function(){return ha.view.fadeOut(200)});return ra.abrupt("return",this.answer.promise);case 6:case "end":return ra.stop()}},ua,this)}));return function(){return w.apply(this,
arguments)}}()},{key:"isActive",value:function(){return!!this.world()&&this._isActive}},{key:"keybindings",get:function(){return[{keys:"Enter",command:"resolve"},{keys:"Escape",command:"reject"},{keys:{mac:"Meta-."},command:"reject"}]}},{key:"commands",get:function(){var w=this;return[{name:"resolve",exec:function(ma,ua){w.resolve(ua);return!0}},{name:"reject",exec:function(ma,ua){w.reject(ua);return!0}}]}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"AbstractPromptModel"}},{key:"properties",
get:function(){return{_isActive:{defaultValue:!1},autoRemove:{defaultValue:!0},answer:{defaultValue:null,derived:!0},label:{defaultValue:"A prompt title",set:function(w){this.setProperty("label",w);this.view&&(this.ui.promptTitle.value=w)}},isPrompt:{get:function(){return!0}},expose:{get:function(){return["keybindings","commands","activate","isActive","isPrompt"]}}}}}],ia,{pathInPackage:function(){return"./prompts.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:464,end:2304})}(rd.ViewModel));rd.AbstractPromptModel=Id;rd.AbstractPromptModel=Id;vc=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),Ca=ia.hasOwnProperty("InformPromptModel")&&"function"===typeof ia.InformPromptModel?ia.InformPromptModel:ia.InformPromptModel=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(Ca,Ea,[{key:"viewDidLoad",value:function(){uc._get(Object.getPrototypeOf(Ca.prototype),"viewDidLoad",this).call(this);var w=this.view,ma=this.ui.promptTitle;ma.lineWrapping=this.lineWrapping;ma.textString=this.label;this.lineWrapping||(w.opacity=0,w.whenRendered().then(function(){if(ma.document){var ua=w.center;w.width=Math.max(w.width,ma.document.width+100);w.align(w.center,ua)}w.opacity=1}))}},{key:"keybindings",get:function(){return uc._get(Object.getPrototypeOf(Ca.prototype),
"keybindings",this).concat([{keys:"Escape",command:"resolve"}])}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InformPromptModel"}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},bindings:{get:function(){return[{model:"ok button",signal:"fire",handler:"resolve"}]}}}}}],ia,{pathInPackage:function(){return"./prompts.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:2312,end:3352})}(rd.AbstractPromptModel);rd.InformPromptModel=vc;rd.InformPromptModel=vc;We=bd("C",function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),Ca=ia.hasOwnProperty("ConfirmPromptModel")&&"function"===typeof ia.ConfirmPromptModel?ia.ConfirmPromptModel:ia.ConfirmPromptModel=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(Ca,Ea,[{key:"expose",get:function(){return["label"].concat(fa(uc._get(Object.getPrototypeOf(Ca.prototype),"expose",this)))}},{key:"viewDidLoad",value:function(){var w=this;uc._get(Object.getPrototypeOf(Ca.prototype),"viewDidLoad",this).call(this);var ma=this.ui,ua=ma.promptTitle,ha=ma.okButton;ma=ma.cancelButton;var ra=this.view;ua.value=this.label;ha.label=this.confirmLabel;ma.label=this.rejectLabel;this.forceConfirm&&ma.disable();ua.lineWrapping=this.lineWrapping;this.lineWrapping||
(ra.opacity=0,ra.whenRendered().then(function(){ua.lineWrapping=w.lineWrapping;var mb=ra.center;ua.invalidateTextLayout(!0,!0);ra.width=Math.max(ra.width,ua.document.width+100);ra.center=mb;ra.opacity=1}))}},{key:"resolve",value:function(){uc._get(Object.getPrototypeOf(Ca.prototype),"resolve",this).call(this,!0)}},{key:"reject",value:function(){uc._get(Object.getPrototypeOf(Ca.prototype),"resolve",this).call(this,!1)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ConfirmPromptModel"}},
{key:"properties",get:function(){return{label:{defaultValue:["Confirm\n",{fontWeight:"bold"},"An appropriate message for the user that helps them to understand the situation!",{fontSize:17,fontWeight:"normal"}]},forceConfirm:{defaultValue:!1},lineWrapping:{defaultValue:!0},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},bindings:{get:function(){return[{model:"ok button",signal:"fire",handler:"resolve"},{model:"cancel button",signal:"fire",handler:"reject"}]}}}}}],ia,{pathInPackage:function(){return"./prompts.cp.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:3360,end:5147})}(rd.AbstractPromptModel));rd.ConfirmPromptModel=We;rd.ConfirmPromptModel=We;xe=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),Ca=ia.hasOwnProperty("MultipleChoicePromptModel")&&"function"===typeof ia.MultipleChoicePromptModel?
ia.MultipleChoicePromptModel:ia.MultipleChoicePromptModel=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"resolve",value:function(w){return this.answer.resolve(w||this.ui.choices.value)}},{key:"viewDidLoad",value:function(){uc._get(Object.getPrototypeOf(Ca.prototype),"viewDidLoad",this).call(this);this.ui.choices.choices=this.choices}},{key:"onKeyDown",value:function(w,ma){if(/^[0-9]$/.test(ma.keyCombo)){var ua=
this.view.getSubmorphNamed("button "+Number(ma.keyCombo));if(ua)return ua.select(),ma.stop()}return w(ma)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MultipleChoicePromptModel"}},{key:"properties",get:function(){return{choices:{defaultValue:[],set:function(w){this.setProperty("choices",w);var ma=this.ui.choices;ma&&(ma.choices=w)}},bindings:{get:function(){return[{model:"ok button",signal:"fire",handler:"resolve"},{model:"cancel button",signal:"fire",handler:"reject"},{signal:"onKeyDown",
handler:"onKeyDown",override:!0}]}}}}}],ia,{pathInPackage:function(){return"./prompts.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:5155,end:6437})}(rd.ConfirmPromptModel);rd.MultipleChoicePromptModel=xe;rd.MultipleChoicePromptModel=xe;Fg=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),
Ca=ia.hasOwnProperty("TextPromptModel")&&"function"===typeof ia.TextPromptModel?ia.TextPromptModel:ia.TextPromptModel=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"focus",value:function(){this.ui.input.focus()}},{key:"resolve",value:function(){var w=this.ui.input;if(this.validate(w.input))return this.answer.resolve(w.acceptInput());w.indicateError(this.errorMessage)}},{key:"viewDidLoad",
value:function(){var w=this.ui,ma=w.input,ua=this.historyId,ha=this.input,ra=this.useLastInput,mb=this.selectInput;w.promptTitle.value=this.label;ma&&(ma.viewState&&(ma.viewState.fastScroll=!1),ma.textString=ha||"",ua&&ra&&(w=rd.arr.last(ma.inputHistory.items)))&&(ma.textString=w);uc._get(Object.getPrototypeOf(Ca.prototype),"viewDidLoad",this).call(this);ma.isPasswordInput||(ma.gotoDocumentEnd(),ma.scrollCursorIntoView());mb&&ma.selectAll()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TextPromptModel"}},
{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},errorMessage:{defaultValue:"Invalid Input"},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},historyId:{defaultValue:"text prompt"},input:{defaultValue:""},selectInput:{defaultValue:!1},useLastInput:{defaultValue:!1},maxWidth:{initialize:function(){this.maxWidth=$world.width-20}},validate:{serialize:!1,initialize:function(){this.validate=function(){return!0}}},bindings:{get:function(){return[{model:"ok button",
signal:"fire",handler:"resolve"},{model:"cancel button",signal:"fire",handler:"reject"}]}}}}}],ia,{pathInPackage:function(){return"./prompts.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:6445,end:8567})}(rd.ConfirmPromptModel);rd.TextPromptModel=Fg;rd.TextPromptModel=Fg;var ti=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),
Ca=ia.hasOwnProperty("EditPromptModel")&&"function"===typeof ia.EditPromptModel?ia.EditPromptModel:ia.EditPromptModel=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"keybindings",get:function(){return[{keys:{mac:"Meta-Enter|Meta-S",win:"Ctrl-Enter|Ctrl-S"},command:"resolve"},{keys:"Escape",command:"reject"},{keys:"Alt-P|Alt-Up",command:"history back"},{keys:"Alt-N|Alt-Down",command:"history forward"},
{keys:"Alt-H",command:"browse history"}]}},{key:"commands",get:function(){var w=this;return uc._get(Object.getPrototypeOf(Ca.prototype),"commands",this).concat([{name:"history back",exec:function(ma,ua){if(w.historyId){ma=w.ui.editor;ua=rd.InputLine.getHistory(w.historyId);var ha=ua.items,ra=ua.index;ua.index=--ra;0>ra&&(ua.index=ra=ha.length-1);ma.undoManager.group();ma.textString=ha[ra];ma.undoManager.group()}return!0}},{name:"browse history",exec:function(){var ma=ab(regeneratorRuntime.mark(function mb(ha,
ra){var E,R,Ya,gb,$b,Sc;return regeneratorRuntime.wrap(function(Ic){for(;;)switch(Ic.prev=Ic.next){case 0:if(!w.historyId){Ic.next=10;break}E=rd.InputLine.getHistory(w.historyId);Ic.next=4;return w.world().editListPrompt("input history "+w.historyId,E.items,{requester:w.view});case 4:R=Ic.sent,Ya=R.status,gb=R.list,$b=sb(R.selections,1),Sc=$b[0],"canceled"!==Ya&&(E.items=gb,rd.InputLine.setHistory(w.historyId,E),Sc&&(E.index=E.items.indexOf(Sc),w.ui.editor.textString=Sc));case 10:return Ic.abrupt("return",
!0);case 11:case "end":return Ic.stop()}},mb)}));return function(ha,ra){return ma.apply(this,arguments)}}()},{name:"history forward",exec:function(ma,ua){if(w.historyId){ma=w.ui.editor;ua=rd.InputLine.getHistory(w.historyId);var ha=ua.items,ra=ua.index;ua.index=++ra;ra>=ha.length&&(ua.index=ra=0);ma.undoManager.group();ma.textString=ha[ra];ma.undoManager.group()}return!0}}])}},{key:"focus",value:function(){this.ui.editor.focus()}},{key:"viewDidLoad",value:function(){var w=this.textStyle,ma=this.input,
ua=this.mode,ha=this.evalEnvironment,ra=this.view,mb=this.ui.editor;ra.hasFixedPosition=!0;ua&&!w.fontFamily&&(w.fontFamily="Monaco, monospace");mb.value=ma||"";Object.assign(mb,w);mb.changeEditorMode(ua).then(function(){ha&&mb.editorPlugin&&Object.assign(mb.editorPlugin.evalEnvironment,ha)});w=mb.textBounds().width+50;w>ra.width-25&&(ra.width=Math.min(ra.maxWidth,w+125));mb.gotoDocumentEnd();mb.scrollCursorIntoView()}},{key:"resolve",value:function(w){if(this.resolveTextAttributes)return uc._get(Object.getPrototypeOf(Ca.prototype),
"resolve",this).call(this,this.ui.editor.textAndAttributes);var ma=this.ui.editor.textString.trim();if(this.historyId){w=rd.InputLine.getHistory(this.historyId);w.items=w.items.filter(function(ua){return ua!==ma});for(w.items.push(ma);w.items.length>w.items.max;)w.items.shift();w.index=w.items.length;rd.InputLine.setHistory(this.historyId,w)}return uc._get(Object.getPrototypeOf(Ca.prototype),"resolve",this).call(this,ma)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"EditPromptModel"}},
{key:"properties",get:function(){return{textStyle:{defaultValue:{}},historyId:{defaultValue:"edit prompt"},maxWidth:{initialize:function(){this.maxWidth=$world.visibleBounds().width-20}},bindings:{get:function(){return[{model:"ok button",signal:"fire",handler:"resolve"},{model:"cancel button",signal:"fire",handler:"reject"},{signal:"focus",handler:"focus",override:!0}]}}}}}],ia,{pathInPackage:function(){return"./prompts.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:8575,end:13035})}(rd.TextPromptModel);rd.EditPromptModel=ti;rd.EditPromptModel=ti;var dg=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),Ca=ia.hasOwnProperty("PasswordPromptModel")&&"function"===typeof ia.PasswordPromptModel?ia.PasswordPromptModel:ia.PasswordPromptModel=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(Ca,Ea,[{key:"resolve",value:function(){return uc._get(Object.getPrototypeOf(Ca.prototype),"resolve",this).call(this,this.ui.input.acceptInput())}},{key:"focus",value:function(){var w=this.ui.input;w.whenRendered().then(function(){return w.focus()})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PasswordPromptModel"}}],ia,{pathInPackage:function(){return"./prompts.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:13043,end:13339})}(rd.TextPromptModel);rd.PasswordPromptModel=dg;rd.PasswordPromptModel=dg;var Of=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),Ca=ia.hasOwnProperty("ListPromptModel")&&"function"===typeof ia.ListPromptModel?ia.ListPromptModel:ia.ListPromptModel=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(Ca,Ea,[{key:"bindings",get:function(){return[].concat(fa(uc._get(Object.getPrototypeOf(Ca.prototype),"bindings",this)),[{target:"prompt list",signal:"selection",handler:"onSelection"},{target:"prompt list",signal:"accepted",handler:"resolve"},{target:"prompt list",signal:"reject",handler:"reject"},{target:"prompt list",signal:"updateFilter",handler:"onFilter"}])}},{key:"focus",value:function(){this.ui.promptList.focus()}},{key:"reset",value:function(){this.items=[]}},{key:"viewDidLoad",
value:function(){uc._get(Object.getPrototypeOf(Ca.prototype),"viewDidLoad",this).call(this);var w=this.multiSelect,ma=this.historyId,ua=this.useLastInput,ha=this.filterable,ra=this.items,mb=this.fuzzy,E=this.filterFunction,R=this.sortFunction,Ya=this.actions,gb=this.selectedAction,$b=this.ui,Sc=$b.promptList,Ic=$b.input;$b.promptTitle.value=this.label;Object.assign(Sc,{multiSelect:w,historyId:ma,useLastInput:ua});Sc.whenRendered().then(function(){Sc.items=ra});Ic.visible=!!ha;ha&&mb&&(Sc.fuzzy=mb);
ha&&"function"===typeof E&&(Sc.filterFunction=E);ha&&"function"===typeof R&&(Sc.sortFunction=R);ha&&Ya&&(Sc.actions=Ya);ha&&gb&&(Sc.selectedAction=gb)}},{key:"onRefresh",value:function(w){"items"===w&&(this.ui.promptList.items=this.items)}},{key:"resolve",value:function(w){var ma=this.ui.promptList;w=w||ma instanceof rd.FilterableList?ma.acceptInput():{selected:ma.selections,status:"accepted",actions:"default"};return this.answer.resolve(w)}},{key:"reject",value:function(){return this.answer.resolve({prompt:this,
selected:[],filtered:[],status:"canceled"})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ListPromptModel"}},{key:"properties",get:function(){return{items:{defaultValue:[]},multiSelect:{defaultValue:!1},filterable:{defaultValue:!1},padding:{defaultValue:rd.rect(0,0,0,0)},preselect:{defaultValue:0},onSelection:{defaultValue:function(){}},actions:{defaultValue:[]},selectedAction:{},fuzzy:{defaultValue:!1},filterFunction:{},sortFunction:{},onFilter:{defaultValue:function(){}}}}}],
ia,{pathInPackage:function(){return"./prompts.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:13347,end:16123})}(rd.TextPromptModel);rd.ListPromptModel=Of;rd.ListPromptModel=Of;var mg=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),Ca=ia.hasOwnProperty("EditListPromptModel")&&
"function"===typeof ia.EditListPromptModel?ia.EditListPromptModel:ia.EditListPromptModel=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"resolve",value:function(){var w=this.ui.promptList,ma=w.selections;return this.answer.resolve({list:w.items.map(function(ua){return ua.value}),selections:ma})}},{key:"reject",value:function(){return this.answer.resolve({list:[],selections:[],status:"canceled"})}},
{key:"bindings",get:function(){return[].concat(fa(uc._get(Object.getPrototypeOf(Ca.prototype),"bindings",this)),[{model:"add item button",signal:"fire",handler:"addItemToList"},{model:"remove item button",signal:"fire",handler:"removeSelectedItemsFromList"}])}},{key:"keybindings",get:function(){return uc._get(Object.getPrototypeOf(Ca.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Enter",win:"Ctrl-Enter"},command:"resolve"},{keys:"Ctrl-G",command:"deselect"},{keys:"Shift-=|+",command:"add item to list"},
{keys:"Delete|-|Backspace",command:"remove item from list"}])}},{key:"commands",get:function(){var w=this;return uc._get(Object.getPrototypeOf(Ca.prototype),"commands",this).concat([{name:"deselect",exec:function(){w.ui.list.selection=null;return!0}},{name:"add item to list",exec:function(){w.addItemToList();return!0}},{name:"remove item from list",exec:function(){w.removeSelectedItemsFromList();return!0}}])}},{key:"removeSelectedItemsFromList",value:function(){var w=ab(regeneratorRuntime.mark(function ua(){var ha,
ra;return regeneratorRuntime.wrap(function(mb){for(;;)switch(mb.prev=mb.next){case 0:ha=this.ui.promptList,ra=1!==ha.selectedItems.length?-1:0===ha.selectedIndex?0:ha.selectedIndex-1,ha.items=rd.arr.withoutAll(ha.items,ha.selectedItems),0>ra?ha.selection=null:ha.selectedIndex=ra,ha.focus();case 5:case "end":return mb.stop()}},ua,this)}));return function(){return w.apply(this,arguments)}}()},{key:"addItemToList",value:function(){var w=ab(regeneratorRuntime.mark(function ua(){var ha,ra,mb,E;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=
R.next){case 0:return ha=this.ui.promptList,ra=ha.selection?ha.items[ha.selectedIndex].string:"",R.next=4,this.world().prompt("Input to add to the list",{historyId:this.historyId||"EditListPrompt-input-history",requester:this.view,input:ra});case 4:if(mb=R.sent){R.next=7;break}return R.abrupt("return");case 7:ha=this.ui.list,E=ha.selection?ha.selectedIndex+1:ha.items.length,ha.addItemAt(mb,E),ha.focus(),ha.selectedIndex=E;case 12:case "end":return R.stop()}},ua,this)}));return function(){return w.apply(this,
arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"EditListPromptModel"}}],ia,{pathInPackage:function(){return"./prompts.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:16131,end:18559})}(rd.ListPromptModel);rd.EditListPromptModel=mg;rd.EditListPromptModel=mg;rd.RedButton=rd.component["for"](function(){return rd.component(rd.ButtonDefault,
{name:"red button",borderWidth:0,dropShadow:new rd.ShadowObject({distance:3,color:rd.Color.rgba(0,0,0,.26),blur:10}),extent:rd.pt(94,38),fill:rd.Color.rgb(231,76,60),submorphs:[{type:rd.Label,name:"label",fontColor:rd.Color.rgb(253,254,254),fontFamily:"IBM Plex Sans",fontSize:14,fontWeight:"bold",position:rd.pt(20,10),reactsToPointer:!1,textAndAttributes:["CANCEL",null]}]})},{module:"lively.components/prompts.cp.js","export":"RedButton",range:{start:18594,end:19103}},rd.RedButton);rd.RedButtonClicked=
rd.component["for"](function(){return rd.component(rd.RedButton,{name:"red button clicked",fill:rd.Color.rgb(177,57,44)})},{module:"lively.components/prompts.cp.js","export":"RedButtonClicked",range:{start:19111,end:19216}},rd.RedButtonClicked);rd.GreenButton=rd.component["for"](function(){return rd.component(rd.ButtonDefault,{name:"green button",borderWidth:0,dropShadow:new rd.ShadowObject({distance:3,color:rd.Color.rgba(0,0,0,.26),blur:10}),extent:rd.pt(90,38),fill:rd.Color.rgb(62,207,142),submorphs:[{type:rd.Label,
name:"label",fontColor:rd.Color.rgb(253,254,254),fontFamily:"IBM Plex Sans",fontSize:14,fontWeight:"bold",position:rd.pt(35,10),reactsToPointer:!1,textAndAttributes:["OK",null]}]})},{module:"lively.components/prompts.cp.js","export":"GreenButton",range:{start:19254,end:19764}},rd.GreenButton);rd.GreenButtonClicked=rd.component["for"](function(){return rd.component(rd.GreenButton,{name:"green button clicked",fill:rd.Color.rgb(40,155,104)})},{module:"lively.components/prompts.cp.js","export":"GreenButtonClicked",
range:{start:19772,end:19884}},rd.GreenButtonClicked);rd.PlainButton=rd.component["for"](function(){return rd.component(rd.ButtonDefault,{name:"plain button",borderWidth:0,dropShadow:new rd.ShadowObject({distance:1,color:rd.Color.rgba(0,0,0,.26)}),extent:rd.pt(40,37),fill:rd.Color.rgb(202,207,210),submorphs:[{type:rd.Label,name:"label",fontColor:rd.Color.rgb(253,254,254),fontFamily:"IBM Plex Sans",fontSize:14,fontWeight:"bold",position:rd.pt(13.5,11.5),reactsToPointer:!1,textAndAttributes:rd.Icon.textAttribute("plus")}]})},
{module:"lively.components/prompts.cp.js","export":"PlainButton",range:{start:19928,end:20443}},rd.PlainButton);rd.PlainButtonClicked=rd.component["for"](function(){return rd.component(rd.PlainButton,{name:"plain button clicked",fill:rd.Color.rgb(127,140,141)})},{module:"lively.components/prompts.cp.js","export":"PlainButtonClicked",range:{start:20451,end:20564}},rd.PlainButtonClicked);rd.ChoiceButtonSelected=rd.component["for"](function(){return rd.component({name:"choice button Selected",acceptsDrops:!1,
borderColor:rd.Color.rgb(204,204,204),borderRadius:4,dropShadow:new rd.ShadowObject({distance:3,rotation:75,color:rd.Color.rgba(0,0,0,.2)}),extent:rd.pt(371.5,47),layout:new rd.HorizontalLayout({align:"center",autoResize:!1,direction:"leftToRight",orderByIndex:!0,padding:{height:0,width:0,x:12,y:12},reactToSubmorphAnimations:!1,renderViaCSS:!0,resizeSubmorphs:!1,spacing:12}),nativeCursor:"pointer",selected:!0,selectionColor:rd.Color.rgb(52,152,219),submorphs:[{type:rd.Ellipse,name:"indicator",borderColor:rd.Color.rgb(204,
204,204),borderWidth:1,dropShadow:new rd.ShadowObject({distance:3,rotation:75,color:rd.Color.rgba(0,0,0,.2)}),extent:rd.pt(12,12),fill:rd.Color.rgb(52,152,219),isEllipse:!0,nativeCursor:"pointer",origin:rd.pt(6,6)},{type:rd.Label,name:"label",fontSize:15,reactsToPointer:!1,textAndAttributes:[].concat(fa(rd.Icon.textAttribute("external-link-alt")),["  Import existing package"])}]})},{module:"lively.components/prompts.cp.js","export":"ChoiceButtonSelected",range:{start:20617,end:21903}},rd.ChoiceButtonSelected);
rd.ChoiceButtonUnselected=rd.component["for"](function(){return rd.component(rd.ChoiceButtonSelected,{name:"choice button unselected",opacity:.5,submorphs:[{name:"indicator",fill:rd.Color.rgb(255,255,255)},{name:"label",textAndAttributes:[].concat(fa(rd.Icon.textAttribute("cube")),["  Add Package"])}]})},{module:"lively.components/prompts.cp.js","export":"ChoiceButtonUnselected",range:{start:21952,end:22242}},rd.ChoiceButtonUnselected);rd.LightPrompt=rd.component["for"](function(){return rd.component({name:"light prompt",
borderRadius:8,epiMorph:!0,dropShadow:new rd.ShadowObject({distance:5,rotation:75,color:rd.Color.rgba(0,0,0,.37),blur:60,fast:!1}),extent:rd.pt(387,60),fill:rd.Color.rgb(251,252,252),layout:new rd.VerticalLayout({align:"center",autoResize:!0,direction:"topToBottom",orderByIndex:!0,resizeSubmorphs:!0,spacing:16}),submorphs:[{type:rd.Text,name:"prompt title",extent:rd.pt(355,28),fill:rd.Color.rgba(255,255,255,0),fixedWidth:!0,fontColor:rd.Color.rgb(102,102,102),fontFamily:'"IBM Plex Sans"',fontSize:20,
fontWeight:"bold",nativeCursor:"default",padding:rd.rect(20,0,0,0),readOnly:!0,textAlign:"center",textString:"Hello World!"}]})},{module:"lively.components/prompts.cp.js","export":"LightPrompt",range:{start:22280,end:23150}},rd.LightPrompt);rd.DarkPrompt=rd.component["for"](function(){return rd.component(rd.LightPrompt,{name:"dark prompt",dropShadow:new rd.ShadowObject({distance:5,rotation:75.00000000000001,color:rd.Color.rgba(0,0,0,.5),blur:60,fast:!1}),fill:rd.Color.rgba(0,0,0,.65),submorphs:[{name:"prompt title",
fontColor:rd.Color.rgb(253,254,254)}]})},{module:"lively.components/prompts.cp.js","export":"DarkPrompt",range:{start:23187,end:23528}},rd.DarkPrompt);rd.InformPrompt=rd.component["for"](function(){return rd.component(rd.LightPrompt,{defaultViewModel:rd.InformPromptModel,name:"inform prompt",extent:rd.pt(249.3,114),submorphs:[{name:"prompt title",lineWrapping:!0,textAndAttributes:["Inform message",null]},rd.add({name:"button wrapper",fill:rd.Color.rgba(0,0,0,0),layout:new rd.HorizontalLayout({align:"center",
autoResize:!1,direction:"centered",orderByIndex:!0,reactToSubmorphAnimations:!1,renderViaCSS:!0,resizeSubmorphs:!1}),submorphs:[rd.part(rd.GreenButton,{name:"ok button",extent:rd.pt(90,38),submorphs:[{name:"label",textString:"OK"}]})]})]})},{module:"lively.components/prompts.cp.js","export":"InformPrompt",range:{start:23567,end:24305}},rd.InformPrompt);rd.ConfirmPrompt=rd.component["for"](function(){return rd.component(rd.LightPrompt,{defaultViewModel:rd.ConfirmPromptModel,name:"confirm prompt",submorphs:[{name:"prompt title",
lineWrapping:"by-words",textAndAttributes:["Confirm\n",{fontWeight:"bold"},"An appropriate message for the user that helps them to understand the situation!",{fontSize:17,fontWeight:"normal"}]},rd.add({name:"button wrapper",extent:rd.pt(331,48.9),fill:rd.Color.rgba(0,0,0,0),layout:new rd.HorizontalLayout({align:"center",autoResize:!1,direction:"centered",orderByIndex:!0,reactToSubmorphAnimations:!1,renderViaCSS:!0,resizeSubmorphs:!1,spacing:20}),submorphs:[rd.part(rd.GreenButton,{name:"ok button",
submorphs:[{name:"label",textString:"OK"}]}),rd.part(rd.RedButton,{name:"cancel button",submorphs:[{name:"label",textString:"CANCEL"}]})]})]})},{module:"lively.components/prompts.cp.js","export":"ConfirmPrompt",range:{start:24345,end:25387}},rd.ConfirmPrompt);rd.MultipleChoicePrompt=rd.component["for"](function(){return rd.component(rd.ConfirmPrompt,{defaultViewModel:rd.MultipleChoicePromptModel,name:"multiple choice prompt",submorphs:[rd.add({type:rd.RadioButtonGroup,name:"choices",extent:rd.pt(387,
118),fill:rd.Color.rgba(0,0,0,0),layout:new rd.VerticalLayout({autoResize:!0,direction:"topToBottom",orderByIndex:!0,resizeSubmorphs:!0,spacing:8}),submorphs:[rd.part(rd.ChoiceButtonUnselected),rd.part(rd.ChoiceButtonSelected)]},"button wrapper")]})},{module:"lively.components/prompts.cp.js","export":"MultipleChoicePrompt",range:{start:25434,end:25963}},rd.MultipleChoicePrompt);rd.TextPrompt=rd.component["for"](function(){return rd.component(rd.ConfirmPrompt,{defaultViewModel:rd.TextPromptModel,name:"text prompt",
submorphs:[rd.add(rd.part(rd.InputLineDefault,{name:"input"}),"button wrapper")]})},{module:"lively.components/prompts.cp.js","export":"TextPrompt",range:{start:26E3,end:26188}},rd.TextPrompt);rd.EditPrompt=rd.component["for"](function(){return rd.component(rd.ConfirmPrompt,{defaultViewModel:rd.EditPromptModel,name:"edit prompt",submorphs:[rd.add({name:"editor",type:rd.Text,master:rd.InputLineDefault,height:300},"button wrapper")]})},{module:"lively.components/prompts.cp.js","export":"EditPrompt",
range:{start:26225,end:26453}},rd.EditPrompt);rd.PasswordPrompt=rd.component["for"](function(){return rd.component(rd.ConfirmPrompt,{defaultViewModel:rd.PasswordPromptModel,name:"password prompt",master:rd.DarkPrompt,submorphs:[{name:"prompt title",lineWrapping:"by-words"},rd.add({name:"input",type:rd.PasswordInputLine,placeholder:"Password",dropShadow:new rd.ShadowObject({distance:4,color:rd.Color.rgba(0,0,0,.26),blur:10}),master:rd.InputLineDefault},"button wrapper")]})},{module:"lively.components/prompts.cp.js",
"export":"PasswordPrompt",range:{start:26494,end:26959}},rd.PasswordPrompt);rd.ListPrompt=rd.component["for"](function(){return rd.component(rd.ConfirmPrompt,{defaultViewModel:rd.ListPromptModel,name:"list prompt",extent:rd.pt(441.8,537.2),master:rd.DarkPrompt,submorphs:[{name:"promptTitle",lineWrapping:"by-words"},rd.add({type:rd.FilterableList,name:"prompt list",layout:new rd.TilingLayout({axis:"column",orderByIndex:!0,resizePolicies:[["input",{height:"fixed",width:"fill"}],["list",{height:"fill",
width:"fill"}]],spacing:5,wrapSubmorphs:!1}),borderColor:rd.Color.rgb(204,204,204),borderWidth:0,extent:rd.pt(442,385),selectedAction:"default",submorphs:[{type:rd.InputLine,name:"input",borderRadius:5,dropShadow:new rd.ShadowObject({distance:3,rotation:75,color:rd.Color.rgba(0,0,0,.2)}),extent:rd.pt(355,26),fill:rd.Color.rgba(204,204,204,.8),fixedHeight:!1,fontColor:rd.Color.rgb(102,102,102),fontFamily:'"IBM Plex Sans"',fontSize:16,padding:rd.rect(10,2,0,0)},{type:rd.List,name:"list",borderColor:rd.Color.rgb(149,
165,166),borderRadius:4,dropShadow:new rd.ShadowObject({distance:3,rotation:75,color:rd.Color.rgba(0,0,0,.2)}),extent:rd.pt(410,354),fill:rd.Color.rgba(66,73,73,.85),fontFamily:"Monaco, monospace",itemHeight:16,itemPadding:void 0,manualItemHeight:!0,master:!1,multiSelect:!0,nonSelectionFontColor:rd.Color.rgb(204,204,204),padding:rd.rect(7,6,-4,-3),position:rd.pt(0,31),scroll:rd.pt(2,0),selectedIndex:void 0,selectedIndexes:[],selectionColor:rd.Color.rgb(230,230,230),selectionFontColor:rd.Color.rgb(0,
0,0),selections:[]}],theme:"dark"},"button wrapper")]})},{module:"lively.components/prompts.cp.js","export":"ListPrompt",range:{start:26996,end:28984}},rd.ListPrompt);rd.EditListPrompt=rd.component["for"](function(){return rd.component(rd.ListPrompt,{defaultViewModel:rd.EditListPromptModel,name:"edit list prompt",submorphs:[{name:"button wrapper",submorphs:[rd.add(rd.part(rd.PlainButton,{name:"add item button"})),rd.add(rd.part(rd.PlainButton,{name:"remove item button",submorphs:[{name:"label",textAndAttributes:rd.Icon.textAttribute("minus")}]}))]}]})},
{module:"lively.components/prompts.cp.js","export":"EditListPrompt",range:{start:29025,end:29439}},rd.EditListPrompt);var wf=bd("G",rd.GreenButton),mf=bd("R",rd.RedButton),Mb=rd.GreenButtonClicked,gd=rd.RedButtonClicked,Vd=bd("P",rd.PlainButton),sf=rd.PlainButtonClicked,hg=bd("L",rd.LightPrompt),bh=bd("g",rd.DarkPrompt),Qf=rd.InformPrompt,he=rd.ConfirmPrompt,Uf=rd.ChoiceButtonSelected,$g=rd.ChoiceButtonUnselected,Ta=rd.MultipleChoicePrompt,th=rd.TextPrompt,Be=rd.EditPrompt,cb=rd.PasswordPrompt,Yb=
rd.ListPrompt,de=rd.EditListPrompt;rd.GreenButton=wf;rd.RedButton=mf;rd.GreenButtonClicked=Mb;rd.RedButtonClicked=gd;rd.PlainButton=Vd;rd.PlainButtonClicked=sf;rd.LightPrompt=hg;rd.DarkPrompt=bh;rd.InformPrompt=Qf;rd.ConfirmPrompt=he;rd.ChoiceButtonSelected=Uf;rd.ChoiceButtonUnselected=$g;rd.MultipleChoicePrompt=Ta;rd.TextPrompt=th;rd.EditPrompt=Be;rd.PasswordPrompt=cb;rd.ListPrompt=Yb;rd.EditListPrompt=de;Id=Object.freeze({__proto__:null,AbstractPromptModel:Id,InformPromptModel:vc,ConfirmPromptModel:We,
MultipleChoicePromptModel:xe,TextPromptModel:Fg,EditPromptModel:ti,PasswordPromptModel:dg,ListPromptModel:Of,EditListPromptModel:mg,GreenButton:wf,RedButton:mf,GreenButtonClicked:Mb,RedButtonClicked:gd,PlainButton:Vd,PlainButtonClicked:sf,LightPrompt:hg,DarkPrompt:bh,InformPrompt:Qf,ConfirmPrompt:he,ChoiceButtonSelected:Uf,ChoiceButtonUnselected:$g,MultipleChoicePrompt:Ta,TextPrompt:th,EditPrompt:Be,PasswordPrompt:cb,ListPrompt:Yb,EditListPrompt:de});bd("p",Id);var P="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,pa={};(function(Ea,ia){ia(pa)})(pa,function(Ea){function ia(pd){"@babel/helpers - typeof";ia="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(Z){return typeof Z}:function(Z){return Z&&"function"===typeof Symbol&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z};return ia(pd)}function Ca(pd,Z){if(!(pd instanceof Z))throw new TypeError("Cannot call a class as a function");}function w(pd,Z){for(var Ga=0;Ga<Z.length;Ga++){var fb=
Z[Ga];fb.enumerable=fb.enumerable||!1;fb.configurable=!0;"value"in fb&&(fb.writable=!0);Object.defineProperty(pd,fb.key,fb)}}function ma(pd,Z,Ga){Z&&w(pd.prototype,Z);Ga&&w(pd,Ga);return pd}function ua(pd,Z){var Ga=Array.isArray(pd)?pd:void 0;if(!Ga)if("undefined"!==typeof Symbol&&Symbol.iterator in Object(pd)){Ga=[];var fb=!0,ya=!1,tc=void 0;try{for(var Mc=pd[Symbol.iterator](),Cd;!(fb=(Cd=Mc.next()).done)&&(Ga.push(Cd.value),!Z||Ga.length!==Z);fb=!0);}catch(Ee){ya=!0,tc=Ee}finally{try{if(!fb&&null!=
Mc["return"])Mc["return"]()}finally{if(ya)throw tc;}}}else Ga=void 0;if(!(pd=Ga||ra(pd,Z)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return pd}function ha(pd){var Z=Array.isArray(pd)?mb(pd):void 0;Z||(Z="undefined"!==typeof Symbol&&Symbol.iterator in Object(pd)?Array.from(pd):void 0);if(!(pd=Z||ra(pd)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
return pd}function ra(pd,Z){if(pd){if("string"===typeof pd)return mb(pd,Z);var Ga=Object.prototype.toString.call(pd).slice(8,-1);"Object"===Ga&&pd.constructor&&(Ga=pd.constructor.name);if("Map"===Ga||"Set"===Ga)return Array.from(pd);if("Arguments"===Ga||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ga))return mb(pd,Z)}}function mb(pd,Z){if(null==Z||Z>pd.length)Z=pd.length;for(var Ga=0,fb=Array(Z);Ga<Z;Ga++)fb[Ga]=pd[Ga];return fb}function E(pd){if("undefined"===typeof Symbol||null==pd[Symbol.iterator]){if(Array.isArray(pd)||
(pd=ra(pd))){var Z=0,Ga=function(){};return{s:Ga,n:function(){return Z>=pd.length?{done:!0}:{done:!1,value:pd[Z++]}},e:function(Cd){throw Cd;},f:Ga}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var fb,ya=!0,tc=!1,Mc;return{s:function(){fb=pd[Symbol.iterator]()},n:function(){var Cd=fb.next();ya=Cd.done;return Cd},e:function(Cd){tc=!0;Mc=Cd},f:function(){try{ya||null==fb.return||fb.return()}finally{if(tc)throw Mc;
}}}}function R(pd){return"number"===typeof pd?pd?0>pd?-1:1:pd===pd?pd:NaN:NaN}function Ya(pd,Z,Ga,fb,ya,tc,Mc){ya=ya*Math.PI/180;var Cd=Math.cos(ya);ya=Math.sin(ya);var Ee=pd.subtract(Z).multiply(.5),bf=Ee.x*Cd+Ee.y*ya;Ee=Ee.x*-ya+Ee.y*Cd;Ga=Math.abs(Ga);fb=Math.abs(fb);var Oe=bf*bf,Fe=Ee*Ee,Pf=Oe/(Ga*Ga)+Fe/(fb*fb);1<Pf&&(Pf=Math.sqrt(Pf),Ga*=Pf,fb*=Pf);Pf=Ga*Ga;var eg=fb*fb;Fe*=Pf;Oe*=eg;Oe=(Pf*eg-Fe-Oe)/(Fe+Oe);1E-6>Math.abs(Oe)&&(Oe=0);Oe=Math.sqrt(Oe);tc===Mc&&(Oe=-Oe);pd=pd.add(Z).multiply(.5);
Z=Oe*Ga*Ee/fb;tc=Oe*-fb*bf/Ga;Oe=(bf-Z)/Ga;bf=(bf+Z)/Ga;Fe=(Ee-tc)/fb;Pf=(Ee+tc)/fb;Ee=(new Zd(1,0)).angleBetween(new Zd(Oe,Fe));bf=(new Zd(Oe,Fe)).angleBetween(new Zd(-bf,-Pf));!1===Mc&&(bf-=Xf);return[Z*Cd-tc*ya+pd.x,Z*ya+tc*Cd+pd.y,Ga,fb,Ee,Ee+bf]}function gb(pd,Z){var Ga=[];pd=E(pd);var fb;try{for(pd.s();!(fb=pd.n()).done;){var ya=ua(fb.value,2),tc=ya[0],Mc=ya[1],Cd=null;if("Point2D"===Mc)Cd=Sc(tc,Z);else if("Number"===Mc)Cd=$b(tc,Z);else if("Array<Point2D>"===Mc||"Point2D[]"===Mc){for(var Ee=
[];0<Z.length;)Ee.push(Sc(tc,Z));0<Ee.length&&(Cd=Ee)}else if("Optional<Number>"===Mc||"Number?"===Mc)Cd=$b(tc,Z),null===Cd&&(Cd=void 0);else throw new TypeError("Unrecognized value type: ".concat(Mc));if(null!==Cd)Ga.push(Cd);else throw new TypeError("Unable to extract value for ".concat(tc));}}catch(bf){pd.e(bf)}finally{pd.f()}return Ga}function $b(pd,Z){var Ga=null;if(0<Z.length){var fb=Z[0],ya=ia(fb);if("number"===ya)return Z.shift();if("object"===ya){pd=E(pd);var tc;try{for(pd.s();!(tc=pd.n()).done;){var Mc=
tc.value;if(Mc in fb&&"number"===typeof fb[Mc]){Ga=fb[Mc];break}}}catch(Cd){pd.e(Cd)}finally{pd.f()}}}return Ga}function Sc(pd,Z){var Ga=null;0<Z.length&&function(){var fb=Z[0],ya=ia(fb);if("number"===ya){if(1<Z.length){var tc=Z.shift(),Mc=Z.shift();Ga=new Pd(tc,Mc)}}else if(Array.isArray(fb)&&1<fb.length)if(2===fb.length)tc=Z.shift(),tc=ua(tc,2),Ga=new Pd(tc[0],tc[1]);else throw new TypeError("Unhandled array of length ".concat(fb.length));else if("object"===ya)if("x"in fb&&"y"in fb)Ga=new Pd(fb.x,
fb.y),Z.shift();else{ya=E(pd);try{for(ya.s();!(tc=ya.n()).done;)if(Mc=tc.value,Array.isArray(Mc)){if(Mc.every(function(Cd){return Cd in fb})){Ga=new Pd(fb[Mc[0]],fb[Mc[1]]);break}}else if(Mc in fb){Ga=Sc([],[fb[Mc]]);break}}catch(Cd){ya.e(Cd)}finally{ya.f()}}}();return Ga}function Ic(pd){var Z=pd.slice();Z.push(pd[0]);return Z}var Pd=function(){function pd(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,Ga=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;Ca(this||P,pd);(this||
P).x=Z;(this||P).y=Ga}ma(pd,[{key:"clone",value:function(){return new (this||P).constructor((this||P).x,(this||P).y)}},{key:"add",value:function(Z){return new (this||P).constructor((this||P).x+Z.x,(this||P).y+Z.y)}},{key:"subtract",value:function(Z){return new (this||P).constructor((this||P).x-Z.x,(this||P).y-Z.y)}},{key:"multiply",value:function(Z){return new (this||P).constructor((this||P).x*Z,(this||P).y*Z)}},{key:"divide",value:function(Z){return new (this||P).constructor((this||P).x/Z,(this||
P).y/Z)}},{key:"equals",value:function(Z){return(this||P).x===Z.x&&(this||P).y===Z.y}},{key:"precisionEquals",value:function(Z,Ga){return Math.abs((this||P).x-Z.x)<Ga&&Math.abs((this||P).y-Z.y)<Ga}},{key:"lerp",value:function(Z,Ga){var fb=1-Ga;return new (this||P).constructor((this||P).x*fb+Z.x*Ga,(this||P).y*fb+Z.y*Ga)}},{key:"distanceFrom",value:function(Z){var Ga=(this||P).x-Z.x;Z=(this||P).y-Z.y;return Math.sqrt(Ga*Ga+Z*Z)}},{key:"min",value:function(Z){return new (this||P).constructor(Math.min((this||
P).x,Z.x),Math.min((this||P).y,Z.y))}},{key:"max",value:function(Z){return new (this||P).constructor(Math.max((this||P).x,Z.x),Math.max((this||P).y,Z.y))}},{key:"transform",value:function(Z){return new (this||P).constructor(Z.a*(this||P).x+Z.c*(this||P).y+Z.e,Z.b*(this||P).x+Z.d*(this||P).y+Z.f)}},{key:"toString",value:function(){return"point(".concat((this||P).x,",").concat((this||P).y,")")}}]);return pd}(),Zd=function(){function pd(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
0,Ga=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;Ca(this||P,pd);(this||P).x=Z;(this||P).y=Ga}ma(pd,[{key:"length",value:function(){return Math.sqrt((this||P).x*(this||P).x+(this||P).y*(this||P).y)}},{key:"magnitude",value:function(){return(this||P).x*(this||P).x+(this||P).y*(this||P).y}},{key:"dot",value:function(Z){return(this||P).x*Z.x+(this||P).y*Z.y}},{key:"cross",value:function(Z){return(this||P).x*Z.y-(this||P).y*Z.x}},{key:"determinant",value:function(Z){return(this||P).x*Z.y-
(this||P).y*Z.x}},{key:"unit",value:function(){return this.divide(this.length())}},{key:"add",value:function(Z){return new (this||P).constructor((this||P).x+Z.x,(this||P).y+Z.y)}},{key:"subtract",value:function(Z){return new (this||P).constructor((this||P).x-Z.x,(this||P).y-Z.y)}},{key:"multiply",value:function(Z){return new (this||P).constructor((this||P).x*Z,(this||P).y*Z)}},{key:"divide",value:function(Z){return new (this||P).constructor((this||P).x/Z,(this||P).y/Z)}},{key:"angleBetween",value:function(Z){var Ga=
this.dot(Z)/(this.length()*Z.length());Ga=Math.max(-1,Math.min(Ga,1));Ga=Math.acos(Ga);return 0>this.cross(Z)?-Ga:Ga}},{key:"perp",value:function(){return new (this||P).constructor(-(this||P).y,(this||P).x)}},{key:"perpendicular",value:function(Z){return this.subtract(this.project(Z))}},{key:"project",value:function(Z){var Ga=this.dot(Z)/Z.dot(Z);return Z.multiply(Ga)}},{key:"transform",value:function(Z){return new (this||P).constructor(Z.a*(this||P).x+Z.c*(this||P).y,Z.b*(this||P).x+Z.d*(this||P).y)}},
{key:"equals",value:function(Z){return(this||P).x===Z.x&&(this||P).y===Z.y}},{key:"precisionEquals",value:function(Z,Ga){return Math.abs((this||P).x-Z.x)<Ga&&Math.abs((this||P).y-Z.y)<Ga}},{key:"toString",value:function(){return"vector(".concat((this||P).x,",").concat((this||P).y,")")}}],[{key:"fromPoints",value:function(Z,Ga){return new pd(Ga.x-Z.x,Ga.y-Z.y)}}]);return pd}(),ge=function(){function pd(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,Ga=1<arguments.length&&void 0!==
arguments[1]?arguments[1]:0,fb=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,ya=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,tc=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,Mc=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;Ca(this||P,pd);(this||P).a=Z;(this||P).b=Ga;(this||P).c=fb;(this||P).d=ya;(this||P).e=tc;(this||P).f=Mc}ma(pd,[{key:"multiply",value:function(Z){return this.isIdentity()?Z:Z.isIdentity()?this||P:new (this||P).constructor((this||P).a*
Z.a+(this||P).c*Z.b,(this||P).b*Z.a+(this||P).d*Z.b,(this||P).a*Z.c+(this||P).c*Z.d,(this||P).b*Z.c+(this||P).d*Z.d,(this||P).a*Z.e+(this||P).c*Z.f+(this||P).e,(this||P).b*Z.e+(this||P).d*Z.f+(this||P).f)}},{key:"inverse",value:function(){if(this.isIdentity())return this||P;var Z=(this||P).a*(this||P).d-(this||P).b*(this||P).c;if(0===Z)throw Error("Matrix is not invertible");Z=1/Z;return new (this||P).constructor((this||P).d*Z,-(this||P).b*Z,-(this||P).c*Z,(this||P).a*Z,((this||P).f*(this||P).c-(this||
P).e*(this||P).d)*Z,((this||P).e*(this||P).b-(this||P).f*(this||P).a)*Z)}},{key:"translate",value:function(Z,Ga){return new (this||P).constructor((this||P).a,(this||P).b,(this||P).c,(this||P).d,(this||P).a*Z+(this||P).c*Ga+(this||P).e,(this||P).b*Z+(this||P).d*Ga+(this||P).f)}},{key:"scale",value:function(Z){return new (this||P).constructor((this||P).a*Z,(this||P).b*Z,(this||P).c*Z,(this||P).d*Z,(this||P).e,(this||P).f)}},{key:"scaleAt",value:function(Z,Ga){var fb=Ga.x-Z*Ga.x;Ga=Ga.y-Z*Ga.y;return new (this||
P).constructor((this||P).a*Z,(this||P).b*Z,(this||P).c*Z,(this||P).d*Z,(this||P).a*fb+(this||P).c*Ga+(this||P).e,(this||P).b*fb+(this||P).d*Ga+(this||P).f)}},{key:"scaleNonUniform",value:function(Z,Ga){return new (this||P).constructor((this||P).a*Z,(this||P).b*Z,(this||P).c*Ga,(this||P).d*Ga,(this||P).e,(this||P).f)}},{key:"scaleNonUniformAt",value:function(Z,Ga,fb){var ya=fb.x-Z*fb.x;fb=fb.y-Ga*fb.y;return new (this||P).constructor((this||P).a*Z,(this||P).b*Z,(this||P).c*Ga,(this||P).d*Ga,(this||
P).a*ya+(this||P).c*fb+(this||P).e,(this||P).b*ya+(this||P).d*fb+(this||P).f)}},{key:"rotate",value:function(Z){var Ga=Math.cos(Z);Z=Math.sin(Z);return new (this||P).constructor((this||P).a*Ga+(this||P).c*Z,(this||P).b*Ga+(this||P).d*Z,(this||P).a*-Z+(this||P).c*Ga,(this||P).b*-Z+(this||P).d*Ga,(this||P).e,(this||P).f)}},{key:"rotateAt",value:function(Z,Ga){var fb=Math.cos(Z),ya=Math.sin(Z);Z=Ga.x;Ga=Ga.y;var tc=(this||P).a*fb+(this||P).c*ya,Mc=(this||P).b*fb+(this||P).d*ya,Cd=(this||P).c*fb-(this||
P).a*ya;fb=(this||P).d*fb-(this||P).b*ya;return new (this||P).constructor(tc,Mc,Cd,fb,((this||P).a-tc)*Z+((this||P).c-Cd)*Ga+(this||P).e,((this||P).b-Mc)*Z+((this||P).d-fb)*Ga+(this||P).f)}},{key:"rotateFromVector",value:function(Z){var Ga=Z.unit();Z=Ga.x;Ga=Ga.y;return new (this||P).constructor((this||P).a*Z+(this||P).c*Ga,(this||P).b*Z+(this||P).d*Ga,(this||P).a*-Ga+(this||P).c*Z,(this||P).b*-Ga+(this||P).d*Z,(this||P).e,(this||P).f)}},{key:"flipX",value:function(){return new (this||P).constructor(-(this||
P).a,-(this||P).b,(this||P).c,(this||P).d,(this||P).e,(this||P).f)}},{key:"flipY",value:function(){return new (this||P).constructor((this||P).a,(this||P).b,-(this||P).c,-(this||P).d,(this||P).e,(this||P).f)}},{key:"skewX",value:function(Z){Z=Math.tan(Z);return new (this||P).constructor((this||P).a,(this||P).b,(this||P).c+(this||P).a*Z,(this||P).d+(this||P).b*Z,(this||P).e,(this||P).f)}},{key:"skewY",value:function(Z){Z=Math.tan(Z);return new (this||P).constructor((this||P).a+(this||P).c*Z,(this||
P).b+(this||P).d*Z,(this||P).c,(this||P).d,(this||P).e,(this||P).f)}},{key:"isIdentity",value:function(){return 1===(this||P).a&&0===(this||P).b&&0===(this||P).c&&1===(this||P).d&&0===(this||P).e&&0===(this||P).f}},{key:"isInvertible",value:function(){return 0!==(this||P).a*(this||P).d-(this||P).b*(this||P).c}},{key:"getScale",value:function(){return{scaleX:Math.sqrt((this||P).a*(this||P).a+(this||P).c*(this||P).c),scaleY:Math.sqrt((this||P).b*(this||P).b+(this||P).d*(this||P).d)}}},{key:"getDecomposition",
value:function(){var Z=.5*((this||P).a+(this||P).d),Ga=.5*((this||P).a-(this||P).d),fb=.5*((this||P).b+(this||P).c),ya=.5*((this||P).b-(this||P).c),tc=Math.sqrt(Z*Z+ya*ya),Mc=Math.sqrt(Ga*Ga+fb*fb),Cd=tc+Mc;tc-=Mc;Ga=Math.atan2(fb,Ga);ya=Math.atan2(ya,Z);Z=.5*(ya-Ga);ya=.5*(ya+Ga);return{translation:(this||P).constructor.translation((this||P).e,(this||P).f),rotation:(this||P).constructor.rotation(ya),scale:(this||P).constructor.nonUniformScaling(Cd,tc),rotation0:(this||P).constructor.rotation(Z)}}},
{key:"equals",value:function(Z){return(this||P).a===Z.a&&(this||P).b===Z.b&&(this||P).c===Z.c&&(this||P).d===Z.d&&(this||P).e===Z.e&&(this||P).f===Z.f}},{key:"precisionEquals",value:function(Z,Ga){return Math.abs((this||P).a-Z.a)<Ga&&Math.abs((this||P).b-Z.b)<Ga&&Math.abs((this||P).c-Z.c)<Ga&&Math.abs((this||P).d-Z.d)<Ga&&Math.abs((this||P).e-Z.e)<Ga&&Math.abs((this||P).f-Z.f)<Ga}},{key:"toString",value:function(){return"matrix(".concat((this||P).a,",").concat((this||P).b,",").concat((this||P).c,
",").concat((this||P).d,",").concat((this||P).e,",").concat((this||P).f,")")}}],[{key:"translation",value:function(Z,Ga){return new pd(1,0,0,1,Z,Ga)}},{key:"scaling",value:function(Z){return new pd(Z,0,0,Z,0,0)}},{key:"scalingAt",value:function(Z,Ga){return new pd(Z,0,0,Z,Ga.x-Ga.x*Z,Ga.y-Ga.y*Z)}},{key:"nonUniformScaling",value:function(Z,Ga){return new pd(Z,0,0,Ga,0,0)}},{key:"nonUniformScalingAt",value:function(Z,Ga,fb){return new pd(Z,0,0,Ga,fb.x-fb.x*Z,fb.y-fb.y*Ga)}},{key:"rotation",value:function(Z){var Ga=
Math.cos(Z);Z=Math.sin(Z);return new pd(Ga,Z,-Z,Ga,0,0)}},{key:"rotationAt",value:function(Z,Ga){var fb=Math.cos(Z);Z=Math.sin(Z);return new pd(fb,Z,-Z,fb,Ga.x-Ga.x*fb+Ga.y*Z,Ga.y-Ga.y*fb-Ga.x*Z)}},{key:"rotationFromVector",value:function(Z){var Ga=Z.unit();Z=Ga.x;Ga=Ga.y;return new pd(Z,Ga,-Ga,Z,0,0)}},{key:"xFlip",value:function(){return new pd(-1,0,0,1,0,0)}},{key:"yFlip",value:function(){return new pd(1,0,0,-1,0,0)}},{key:"xSkew",value:function(Z){return new pd(1,0,Math.tan(Z),1,0,0)}},{key:"ySkew",
value:function(Z){return new pd(1,Math.tan(Z),0,1,0,0)}}]);return pd}();ge.IDENTITY=new ge;ge.IDENTITY.isIdentity=function(){return!0};var Ce=function(){function pd(){Ca(this||P,pd);(this||P).coefs=[];for(var Z=arguments.length-1;0<=Z;Z--)(this||P).coefs.push(0>Z||arguments.length<=Z?void 0:arguments[Z]);(this||P)._variable="t";(this||P)._s=0}ma(pd,[{key:"clone",value:function(){var Z=new pd;Z.coefs=(this||P).coefs.slice();return Z}},{key:"eval",value:function(Z){if(isNaN(Z))throw new TypeError("Parameter must be a number. Found '".concat(Z,
"'"));for(var Ga=0,fb=(this||P).coefs.length-1;0<=fb;fb--)Ga=Ga*Z+(this||P).coefs[fb];return Ga}},{key:"add",value:function(Z){for(var Ga=new pd,fb=this.getDegree(),ya=Z.getDegree(),tc=Math.max(fb,ya),Mc=0;Mc<=tc;Mc++)Ga.coefs[Mc]=(Mc<=fb?(this||P).coefs[Mc]:0)+(Mc<=ya?Z.coefs[Mc]:0);return Ga}},{key:"multiply",value:function(Z){for(var Ga=new pd,fb=0;fb<=this.getDegree()+Z.getDegree();fb++)Ga.coefs.push(0);for(fb=0;fb<=this.getDegree();fb++)for(var ya=0;ya<=Z.getDegree();ya++)Ga.coefs[fb+ya]+=(this||
P).coefs[fb]*Z.coefs[ya];return Ga}},{key:"divideEqualsScalar",value:function(Z){for(var Ga=0;Ga<(this||P).coefs.length;Ga++)(this||P).coefs[Ga]/=Z}},{key:"simplifyEquals",value:function(){for(var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1E-12,Ga=this.getDegree();0<=Ga;Ga--)if(Math.abs((this||P).coefs[Ga])<=Z)(this||P).coefs.pop();else break}},{key:"removeZerosEquals",value:function(){for(var Z=(this||P).coefs,Ga=10*(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1E-15)*Math.abs(Z.reduce(function(ya,
tc){return Math.abs(tc)>Math.abs(ya)?tc:ya})),fb=0;fb<Z.length-1;fb++)Math.abs(Z[fb])<Ga&&(Z[fb]=0);return this||P}},{key:"monicEquals",value:function(){var Z=(this||P).coefs;1!==Z[Z.length-1]&&this.divideEqualsScalar(Z[Z.length-1]);return this||P}},{key:"toString",value:function(){for(var Z=[],Ga=[],fb=(this||P).coefs.length-1;0<=fb;fb--){var ya=Math.round(1E3*(this||P).coefs[fb])/1E3;if(0!==ya){var tc=0>ya?" - ":" + ";ya=Math.abs(ya);0<fb&&(ya=1===ya?(this||P)._variable:ya+(this||P)._variable);
1<fb&&(ya+="^"+fb);Ga.push(tc);Z.push(ya)}}Ga[0]=" + "===Ga[0]?"":"-";fb="";for(ya=0;ya<Z.length;ya++)fb+=Ga[ya]+Z[ya];return fb}},{key:"bisection",value:function(Z,Ga){var fb=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1E-6,ya=3<arguments.length&&void 0!==arguments[3]?arguments[3]:15,tc=this.eval(Z),Mc=this.eval(Ga);if(Math.abs(tc)<=fb)var Cd=Z;else if(Math.abs(Mc)<=fb)Cd=Ga;else if(0>=tc*Mc)for(ya=Math.ceil((Math.log(Ga-Z)+Math.LN10*ya)/Math.LN2),Mc=0;Mc<ya;Mc++){Cd=.5*(Z+Ga);var Ee=
this.eval(Cd);if(Math.abs(Ee)<=fb)break;0>Ee*tc?Ga=Cd:(Z=Cd,tc=Ee)}return Cd}},{key:"trapezoid",value:function(Z,Ga,fb){if(isNaN(Z)||isNaN(Ga)||isNaN(fb))throw new TypeError("Parameters must be numbers");var ya=Ga-Z;if(1===fb)fb=this.eval(Z),Ga=this.eval(Ga),(this||P)._s=.5*ya*(fb+Ga);else{Ga=1<<fb-2;fb=ya/Ga;Z+=.5*fb;for(var tc=0,Mc=0;Mc<Ga;Mc++)tc+=this.eval(Z),Z+=fb;(this||P)._s=.5*((this||P)._s+ya*tc/Ga)}if(isNaN((this||P)._s))throw new TypeError("this._s is NaN");return(this||P)._s}},{key:"simpson",
value:function(Z,Ga){if(isNaN(Z)||isNaN(Ga))throw new TypeError("Parameters must be numbers");var fb=Ga-Z,ya=.5*fb*(this.eval(Z)+this.eval(Ga));Ga=ya;for(var tc=4*ya/3,Mc=tc,Cd=ya,Ee=1,bf=2;20>=bf;bf++){ya=fb/Ee;tc=Z+.5*ya;for(var Oe=0,Fe=1;Fe<=Ee;Fe++)Oe+=this.eval(tc),tc+=ya;ya=Ga=.5*(Ga+fb*Oe/Ee);tc=(4*ya-Cd)/3;if(Math.abs(tc-Mc)<1E-7*Math.abs(Mc))break;Mc=tc;Cd=ya;Ee<<=1}return tc}},{key:"romberg",value:function(Z,Ga){if(isNaN(Z)||isNaN(Ga))throw new TypeError("Parameters must be numbers");for(var fb=
Array(21),ya=Array(21),tc={y:0,dy:0},Mc=ya[0]=1;20>=Mc;Mc++){fb[Mc-1]=this.trapezoid(Z,Ga,Mc);if(3<=Mc&&(tc=pd.interpolate(ya,fb,3,Mc-3,0),Math.abs(tc.dy)<=1E-6*tc.y))break;fb[Mc]=fb[Mc-1];ya[Mc]=.25*ya[Mc-1]}return tc.y}},{key:"zeroErrorEstimate",value:function(Z){var Ga=this||P;if("undefined"===typeof Z){var fb=Ga.bounds();Z=Math.max(Math.abs(fb.minX),Math.abs(fb.maxX))}if(.001>Z)return 2*Math.abs(Ga.eval(1E-15));var ya=Ga.coefs[Ga.coefs.length-1];return 10*1E-15*Ga.coefs.reduce(function(tc,Mc,
Cd){Mc=Mc/ya*Math.pow(Z,Cd);return Mc>tc?Mc:tc},0)}},{key:"boundsUpperRealFujiwara",value:function(){var Z=(this||P).coefs,Ga=Z.length-1,fb=Z[Ga];1!==fb&&(Z=(this||P).coefs.map(function(Ee){return Ee/fb}));var ya=Z.map(function(Ee,bf){return bf<Ga?Math.pow(Math.abs(0===bf?Ee/2:Ee),1/(Ga-bf)):Ee}),tc=function(Ee,bf,Oe){Mc(Oe)&&(Ee.max<bf?(Ee.nearmax=Ee.max,Ee.max=bf):Ee.nearmax<bf&&(Ee.nearmax=bf));return Ee};var Mc=function(Ee){return Ee<Ga&&0>Z[Ee]};var Cd=ya.reduce(tc,{max:0,nearmax:0});Mc=function(Ee){return Ee<
Ga&&(Ga%2===Ee%2?0>Z[Ee]:0<Z[Ee])};return{negX:-2*ya.reduce(tc,{max:0,nearmax:0}).max,posX:2*Cd.max}}},{key:"boundsLowerRealFujiwara",value:function(){var Z=new pd;Z.coefs=(this||P).coefs.slice().reverse();Z=Z.boundsUpperRealFujiwara();Z.negX=1/Z.negX;Z.posX=1/Z.posX;return Z}},{key:"bounds",value:function(){var Z=this.boundsUpperRealFujiwara(),Ga={minX:Z.negX,maxX:Z.posX};if(0===Z.negX&&0===Z.posX)return Ga;0===Z.negX?Ga.minX=this.boundsLowerRealFujiwara().posX:0===Z.posX&&(Ga.maxX=this.boundsLowerRealFujiwara().negX);
Ga.minX>Ga.maxX&&(Ga.minX=Ga.maxX=0);return Ga}},{key:"boundUpperAbsRouche",value:function(){var Z=(this||P).coefs,Ga=Z.length-1;return 1+Z.reduce(function(fb,ya,tc){return tc!==Ga?(ya=Math.abs(ya),fb<ya?ya:fb):fb},0)/Math.abs(Z[Ga])}},{key:"boundLowerAbsRouche",value:function(){var Z=(this||P).coefs,Ga=Z.reduce(function(fb,ya,tc){return 0!==tc?(ya=Math.abs(ya),fb<ya?ya:fb):fb},0);return Math.abs(Z[0])/(Math.abs(Z[0])+Ga)}},{key:"boundsRealLaguerre",value:function(){var Z=(this||P).coefs,Ga=Z.length-
1,fb=-Z[Ga-1]/(Ga*Z[Ga]);Z=(Ga-1)/(Ga*Z[Ga])*Math.sqrt(Z[Ga-1]*Z[Ga-1]-2*Ga/(Ga-1)*Z[Ga]*Z[Ga-2]);0>Z&&(Z=-Z);return{minX:fb-Z,maxX:fb+Z}}},{key:"countRootsDescartes",value:function(){var Z=(this||P).coefs,Ga=Z.length-1;Z=Z.reduce(function(fb,ya,tc){0!==fb.prev_a&&0!==ya&&(0>fb.prev_a===0<ya&&fb.pos++,0===tc%2!==0>fb.prev_a===(1===tc%2!==0<ya)&&fb.neg++);fb.prev_a=ya;return fb},{pos:0,neg:0,prev_a:0});return{maxRealPos:Z.pos,maxRealNeg:Z.neg,minComplex:Ga-(Z.pos+Z.neg)}}},{key:"getDegree",value:function(){return(this||
P).coefs.length-1}},{key:"getDerivative",value:function(){for(var Z=new pd,Ga=1;Ga<(this||P).coefs.length;Ga++)Z.coefs.push(Ga*(this||P).coefs[Ga]);return Z}},{key:"getRoots",value:function(){this.simplifyEquals();switch(this.getDegree()){case 0:var Z=[];break;case 1:Z=this.getLinearRoot();break;case 2:Z=this.getQuadraticRoots();break;case 3:Z=this.getCubicRoots();break;case 4:Z=this.getQuarticRoots();break;default:Z=[]}return Z}},{key:"getRootsInInterval",value:function(Z,Ga){function fb(Mc){"number"===
typeof Mc&&ya.push(Mc)}var ya=[];if(0===this.getDegree())throw new RangeError("Unexpected empty polynomial");if(1===this.getDegree())fb(this.bisection(Z,Ga));else{var tc=this.getDerivative().getRootsInInterval(Z,Ga);if(0<tc.length){fb(this.bisection(Z,tc[0]));for(Z=0;Z<=tc.length-2;Z++)fb(this.bisection(tc[Z],tc[Z+1]));fb(this.bisection(tc[tc.length-1],Ga))}else fb(this.bisection(Z,Ga))}return ya}},{key:"getLinearRoot",value:function(){var Z=[],Ga=(this||P).coefs[1];0!==Ga&&Z.push(-(this||P).coefs[0]/
Ga);return Z}},{key:"getQuadraticRoots",value:function(){var Z=[];if(2===this.getDegree()){var Ga=(this||P).coefs[2],fb=(this||P).coefs[1]/Ga;Ga=fb*fb-(this||P).coefs[0]/Ga*4;0<Ga?(Ga=Math.sqrt(Ga),Z.push(.5*(-fb+Ga)),Z.push(.5*(-fb-Ga))):0===Ga&&Z.push(.5*-fb)}return Z}},{key:"getCubicRoots",value:function(){var Z=[];if(3===this.getDegree()){var Ga=(this||P).coefs[3],fb=(this||P).coefs[2]/Ga,ya=(this||P).coefs[1]/Ga,tc=(3*ya-fb*fb)/3;Ga=(2*fb*fb*fb-9*ya*fb+(this||P).coefs[0]/Ga*27)/27;fb/=3;ya=Ga*
Ga/4+tc*tc*tc/27;Ga/=2;var Mc=this.zeroErrorEstimate();Math.abs(ya)<=Mc&&(ya=0);0<ya?(tc=Math.sqrt(ya),Mc=-Ga+tc,ya=0<=Mc?Math.pow(Mc,1/3):-Math.pow(-Mc,1/3),Mc=-Ga-tc,ya=0<=Mc?ya+Math.pow(Mc,1/3):ya-Math.pow(-Mc,1/3),Z.push(ya-fb)):0>ya?(tc=Math.sqrt(-tc/3),ya=Math.atan2(Math.sqrt(-ya),-Ga)/3,Ga=Math.cos(ya),ya=Math.sin(ya),Mc=Math.sqrt(3),Z.push(2*tc*Ga-fb),Z.push(-tc*(Ga+Mc*ya)-fb),Z.push(-tc*(Ga-Mc*ya)-fb)):(tc=0<=Ga?-Math.pow(Ga,1/3):Math.pow(-Ga,1/3),Z.push(2*tc-fb),Z.push(-tc-fb))}return Z}},
{key:"getQuarticRoots",value:function(){var Z=[],Ga=this.getDegree();if(4===Ga){var fb=new pd;fb.coefs=(this||P).coefs.slice();fb.divideEqualsScalar(fb.coefs[Ga]);Math.abs(fb.coefs[0])<10*1E-15*Math.abs(fb.coefs[3])&&(fb.coefs[0]=0);for(var ya=fb.getDerivative(),tc=ya.getRoots().sort(function(Pf,eg){return Pf-eg}),Mc=[],Cd=tc.length-1,Ee=this.bounds(),bf=this.zeroErrorEstimate(Math.max(Math.abs(Ee.minX),Math.abs(Ee.maxX))),Oe=0;Oe<=Cd;Oe++)Mc.push(fb.eval(tc[Oe]));for(Oe=0;Oe<=Cd;Oe++)Math.abs(Mc[Oe])<
bf&&(Mc[Oe]=0);bf=0;var Fe=Math.max(.1*(Ee.maxX-Ee.minX)/Ga,1E-15);Ga=[];Oe=[];if(-1<Cd){0!==Mc[0]?R(Mc[0])!==R(fb.eval(tc[0]-Fe)-Mc[0])&&(Ga.push(tc[0]-Fe),Oe.push([Ee.minX,tc[0]])):(Z.push(tc[0],tc[0]),bf++);for(;bf<Cd;bf++)0===Mc[bf+1]?(Z.push(tc[bf+1],tc[bf+1]),bf++):R(Mc[bf])!==R(Mc[bf+1])&&(Ga.push((tc[bf]+tc[bf+1])/2),Oe.push([tc[bf],tc[bf+1]]));0!==Mc[Cd]&&R(Mc[Cd])!==R(fb.eval(tc[Cd]+Fe)-Mc[Cd])&&(Ga.push(tc[Cd]+Fe),Oe.push([tc[Cd],Ee.maxX]))}tc=function(Pf){return fb.eval(Pf)};Mc=function(Pf){return ya.eval(Pf)};
if(0<Ga.length)for(bf=0;bf<Ga.length;bf++)Ga[bf]=pd.newtonSecantBisection(Ga[bf],tc,Mc,32,Oe[bf][0],Oe[bf][1]);Z=Z.concat(Ga)}return Z}}],[{key:"interpolate",value:function(Z,Ga,fb,ya,tc){if(Z.constructor!==Array||Ga.constructor!==Array)throw new TypeError("xs and ys must be arrays");if(isNaN(fb)||isNaN(ya)||isNaN(tc))throw new TypeError("n, offset, and x must be numbers");var Mc,Cd=0,Ee=Array(fb),bf=Array(fb),Oe=0,Fe=Math.abs(tc-Z[ya]);for(Mc=0;Mc<fb;Mc++){var Pf=Math.abs(tc-Z[ya+Mc]);Pf<Fe&&(Oe=
Mc,Fe=Pf);Ee[Mc]=bf[Mc]=Ga[ya+Mc]}Ga=Ga[ya+Oe];Oe--;for(Fe=1;Fe<fb;Fe++){for(Mc=0;Mc<fb-Fe;Mc++){Cd=Z[ya+Mc]-tc;Pf=Z[ya+Mc+Fe]-tc;var eg=Ee[Mc+1]-bf[Mc],be=Cd-Pf;if(0===be)throw new RangeError("Unable to interpolate polynomial. Two numbers in n were identical (to within roundoff)");be=eg/be;bf[Mc]=Pf*be;Ee[Mc]=Cd*be}Cd=2*(Oe+1)<fb-Fe?Ee[Oe+1]:bf[Oe--];Ga+=Cd}return{y:Ga,dy:Cd}}},{key:"newtonSecantBisection",value:function(Z,Ga,fb,ya,tc,Mc){var Cd=0,Ee=0;var bf=Z;var Oe=Math.pow(10,-14);if(Z="number"===
typeof tc&&"number"===typeof Mc){if(tc>Mc)throw new RangeError("Min must be greater than max");var Fe=Ga(tc);var Pf=Ga(Mc);if(R(Fe)===R(Pf))throw new RangeError("Y values of bounds must be of opposite sign");}for(var eg=function(){return Math.abs(Oc)<=Oe*Math.abs(bf)||Ee===bf-Oc-bf},be=0;be<ya;be++){var v=fb(bf);if(0===v){if(0===Cd)throw new RangeError("df(x) is zero");v=Cd}Cd=v;var oa=Ga(bf);var Oc=oa/v;v=bf-Oc;if(eg())break;if(Z){if(R(oa)===R(Pf))Mc=bf,Pf=oa;else if(R(oa)===R(Fe))tc=bf,Fe=oa;else{bf=
v;break}if(v<tc||v>Mc){if(R(Fe)===R(Pf))break;oa=Pf-Fe;v=Mc-tc;Oc=0===oa?bf-(tc+.5*v):50<Math.abs(oa/Math.min(Fe,Pf))?bf-(tc+v*(.5+(Math.abs(Fe)<Math.abs(Pf)?-.25:.25))):bf-(tc-Fe/oa*v);v=bf-Oc;if(eg())break}}Ee=bf-v;bf=v}return bf}}]);return pd}(),$e=function(){function pd(Z,Ga){Ca(this||P,pd);(this||P).type=Z;(this||P).text=Ga}ma(pd,[{key:"typeis",value:function(Z){return(this||P).type===Z}}]);return pd}();$e.UNDEFINED=0;$e.COMMAND=1;$e.NUMBER=2;$e.EOD=3;var pf=function(){function pd(Z){Ca(this||
P,pd);if(null===Z||void 0===Z)Z="";this.setPathData(Z)}ma(pd,[{key:"setPathData",value:function(Z){if("string"!==typeof Z)throw new TypeError("The first parameter must be a string");(this||P)._pathData=Z}},{key:"getNextToken",value:function(){for(var Z=null,Ga=(this||P)._pathData;null===Z;)if(null===Ga||""===Ga)Z=new $e($e.EOD,"");else if(Ga.match(/^([ \t\r\n,]+)/))Ga=Ga.substr(RegExp.$1.length);else if(Ga.match(/^([AaCcHhLlMmQqSsTtVvZz])/))Z=new $e($e.COMMAND,RegExp.$1),Ga=Ga.substr(RegExp.$1.length);
else if(Ga.match(/^(([-+]?\d+(\.\d*)?|[-+]?\.\d+)([eE][-+]?\d+)?)/))Z=new $e($e.NUMBER,RegExp.$1),Ga=Ga.substr(RegExp.$1.length);else throw new SyntaxError("Unrecognized path data: ".concat(Ga));(this||P)._pathData=Ga;return Z}}]);return pd}(),ig=function(){function pd(){Ca(this||P,pd);(this||P)._lexer=new pf;(this||P)._handler=null}ma(pd,[{key:"parseData",value:function(Z){if("string"!==typeof Z)throw new TypeError("The first parameter must be a string: ".concat(Z));null!==(this||P)._handler&&"function"===
typeof(this||P)._handler.beginParse&&(this||P)._handler.beginParse();var Ga=(this||P)._lexer;Ga.setPathData(Z);Z="BOP";for(var fb=null,ya=Ga.getNextToken();!1===ya.typeis($e.EOD);){var tc=[];switch(ya.type){case $e.COMMAND:if("BOP"===Z&&"M"!==ya.text&&"m"!==ya.text)throw new SyntaxError("New paths must begin with a moveto command. Found '".concat(ya.text,"'"));Z=ya.text;var Mc=pd.PARAMCOUNT[ya.text.toUpperCase()];ya=Ga.getNextToken();break;case $e.NUMBER:if("BOP"===Z)throw new SyntaxError("New paths must begin with a moveto command. Found '".concat(ya.text,
"'"));Mc=pd.PARAMCOUNT[Z.toUpperCase()];break;default:throw new SyntaxError("Unrecognized command type: ".concat(ya.type));}for(var Cd=0;Cd<Mc;Cd++){switch(ya.type){case $e.COMMAND:throw new SyntaxError("Parameter must be a number. Found '".concat(ya.text,"'"));case $e.NUMBER:tc[Cd]=parseFloat(ya.text);break;case $e.EOD:throw new SyntaxError("Unexpected end of string");default:throw new SyntaxError("Unrecognized parameter type. Found type '".concat(ya.type,"'"));}ya=Ga.getNextToken()}if(null!==(this||
P)._handler){Mc=(this||P)._handler;Cd=pd.METHODNAME[Z];if("a"===Z||"A"===Z)tc[3]=0!==tc[3],tc[4]=0!==tc[4];null!==Mc&&"function"===typeof Mc[Cd]&&Mc[Cd].apply(Mc,tc)}switch(Z){case "M":Z="L";break;case "m":Z="l";break;case "Z":case "z":Z="BOP"}if(ya===fb)throw new SyntaxError("Parser stalled on '".concat(ya.text,"'"));fb=ya}null!==(this||P)._handler&&"function"===typeof(this||P)._handler.endParse&&(this||P)._handler.endParse()}},{key:"setHandler",value:function(Z){(this||P)._handler=Z}}]);return pd}();
ig.PARAMCOUNT={A:7,C:6,H:1,L:2,M:2,Q:4,S:4,T:2,V:1,Z:0};ig.METHODNAME={A:"arcAbs",a:"arcRel",C:"curvetoCubicAbs",c:"curvetoCubicRel",H:"linetoHorizontalAbs",h:"linetoHorizontalRel",L:"linetoAbs",l:"linetoRel",M:"movetoAbs",m:"movetoRel",Q:"curvetoQuadraticAbs",q:"curvetoQuadraticRel",S:"curvetoCubicSmoothAbs",s:"curvetoCubicSmoothRel",T:"curvetoQuadraticSmoothAbs",t:"curvetoQuadraticSmoothRel",V:"linetoVerticalAbs",v:"linetoVerticalRel",Z:"closePath",z:"closePath"};var Xf=2*Math.PI,Vg=function(){function pd(Z){Ca(this||
P,pd);(this||P).shapeCreator=Z;(this||P).shapes=[];(this||P).firstX=null;(this||P).firstY=null;(this||P).lastX=null;(this||P).lastY=null;(this||P).lastCommand=null}ma(pd,[{key:"beginParse",value:function(){(this||P).shapes=[];(this||P).firstX=null;(this||P).firstY=null;(this||P).lastX=null;(this||P).lastY=null;(this||P).lastCommand=null}},{key:"addShape",value:function(Z){(this||P).shapes.push(Z)}},{key:"arcAbs",value:function(Z,Ga,fb,ya,tc,Mc,Cd){if(0===Z||0===Ga)this.addShape((this||P).shapeCreator.line((this||
P).lastX,(this||P).lastY,Mc,Cd));else{var Ee;Z=Ya(new Pd((this||P).lastX,(this||P).lastY),new Pd(Mc,Cd),Z,Ga,fb,ya,tc);this.addShape((Ee=(this||P).shapeCreator).arc.apply(Ee,ha(Z)))}(this||P).lastCommand="A";(this||P).lastX=Mc;(this||P).lastY=Cd}},{key:"arcRel",value:function(Z,Ga,fb,ya,tc,Mc,Cd){if(0===Z||0===Ga)this.addShape((this||P).shapeCreator.line((this||P).lastX,(this||P).lastY,(this||P).lastX+Mc,(this||P).lastY+Cd));else{var Ee;Z=Ya(new Pd((this||P).lastX,(this||P).lastY),new Pd((this||P).lastX+
Mc,(this||P).lastY+Cd),Z,Ga,fb,ya,tc);this.addShape((Ee=(this||P).shapeCreator).arc.apply(Ee,ha(Z)))}(this||P).lastCommand="a";(this||P).lastX+=Mc;(this||P).lastY+=Cd}},{key:"curvetoCubicAbs",value:function(Z,Ga,fb,ya,tc,Mc){this.addShape((this||P).shapeCreator.cubicBezier((this||P).lastX,(this||P).lastY,Z,Ga,fb,ya,tc,Mc));(this||P).lastX=tc;(this||P).lastY=Mc;(this||P).lastCommand="C"}},{key:"curvetoCubicRel",value:function(Z,Ga,fb,ya,tc,Mc){this.addShape((this||P).shapeCreator.cubicBezier((this||
P).lastX,(this||P).lastY,(this||P).lastX+Z,(this||P).lastY+Ga,(this||P).lastX+fb,(this||P).lastY+ya,(this||P).lastX+tc,(this||P).lastY+Mc));(this||P).lastX+=tc;(this||P).lastY+=Mc;(this||P).lastCommand="c"}},{key:"linetoHorizontalAbs",value:function(Z){this.addShape((this||P).shapeCreator.line((this||P).lastX,(this||P).lastY,Z,(this||P).lastY));(this||P).lastX=Z;(this||P).lastCommand="H"}},{key:"linetoHorizontalRel",value:function(Z){this.addShape((this||P).shapeCreator.line((this||P).lastX,(this||
P).lastY,(this||P).lastX+Z,(this||P).lastY));(this||P).lastX+=Z;(this||P).lastCommand="h"}},{key:"linetoAbs",value:function(Z,Ga){this.addShape((this||P).shapeCreator.line((this||P).lastX,(this||P).lastY,Z,Ga));(this||P).lastX=Z;(this||P).lastY=Ga;(this||P).lastCommand="L"}},{key:"linetoRel",value:function(Z,Ga){this.addShape((this||P).shapeCreator.line((this||P).lastX,(this||P).lastY,(this||P).lastX+Z,(this||P).lastY+Ga));(this||P).lastX+=Z;(this||P).lastY+=Ga;(this||P).lastCommand="l"}},{key:"movetoAbs",
value:function(Z,Ga){(this||P).firstX=Z;(this||P).firstY=Ga;(this||P).lastX=Z;(this||P).lastY=Ga;(this||P).lastCommand="M"}},{key:"movetoRel",value:function(Z,Ga){(this||P).firstX+=Z;(this||P).firstY+=Ga;(this||P).lastX+=Z;(this||P).lastY+=Ga;(this||P).lastCommand="m"}},{key:"curvetoQuadraticAbs",value:function(Z,Ga,fb,ya){this.addShape((this||P).shapeCreator.quadraticBezier((this||P).lastX,(this||P).lastY,Z,Ga,fb,ya));(this||P).lastX=fb;(this||P).lastY=ya;(this||P).lastCommand="Q"}},{key:"curvetoQuadraticRel",
value:function(Z,Ga,fb,ya){this.addShape((this||P).shapeCreator.quadraticBezier((this||P).lastX,(this||P).lastY,(this||P).lastX+Z,(this||P).lastY+Ga,(this||P).lastX+fb,(this||P).lastY+ya));(this||P).lastX+=fb;(this||P).lastY+=ya;(this||P).lastCommand="q"}},{key:"curvetoCubicSmoothAbs",value:function(Z,Ga,fb,ya){if((this||P).lastCommand.match(/^[SsCc]$/)){var tc=(this||P).shapes[(this||P).shapes.length-1].args[2];var Mc=2*(this||P).lastX-tc.x;tc=2*(this||P).lastY-tc.y}else Mc=(this||P).lastX,tc=(this||
P).lastY;this.addShape((this||P).shapeCreator.cubicBezier((this||P).lastX,(this||P).lastY,Mc,tc,Z,Ga,fb,ya));(this||P).lastX=fb;(this||P).lastY=ya;(this||P).lastCommand="S"}},{key:"curvetoCubicSmoothRel",value:function(Z,Ga,fb,ya){if((this||P).lastCommand.match(/^[SsCc]$/)){var tc=(this||P).shapes[(this||P).shapes.length-1].args[2];var Mc=2*(this||P).lastX-tc.x;tc=2*(this||P).lastY-tc.y}else Mc=(this||P).lastX,tc=(this||P).lastY;this.addShape((this||P).shapeCreator.cubicBezier((this||P).lastX,(this||
P).lastY,Mc,tc,(this||P).lastX+Z,(this||P).lastY+Ga,(this||P).lastX+fb,(this||P).lastY+ya));(this||P).lastX+=fb;(this||P).lastY+=ya;(this||P).lastCommand="s"}},{key:"curvetoQuadraticSmoothAbs",value:function(Z,Ga){if((this||P).lastCommand.match(/^[QqTt]$/)){var fb=(this||P).shapes[(this||P).shapes.length-1].args[1];var ya=2*(this||P).lastX-fb.x;fb=2*(this||P).lastY-fb.y}else ya=(this||P).lastX,fb=(this||P).lastY;this.addShape((this||P).shapeCreator.quadraticBezier((this||P).lastX,(this||P).lastY,
ya,fb,Z,Ga));(this||P).lastX=Z;(this||P).lastY=Ga;(this||P).lastCommand="T"}},{key:"curvetoQuadraticSmoothRel",value:function(Z,Ga){if((this||P).lastCommand.match(/^[QqTt]$/)){var fb=(this||P).shapes[(this||P).shapes.length-1].args[1];var ya=2*(this||P).lastX-fb.x;fb=2*(this||P).lastY-fb.y}else ya=(this||P).lastX,fb=(this||P).lastY;this.addShape((this||P).shapeCreator.quadraticBezier((this||P).lastX,(this||P).lastY,ya,fb,(this||P).lastX+Z,(this||P).lastY+Ga));(this||P).lastX+=Z;(this||P).lastY+=Ga;
(this||P).lastCommand="t"}},{key:"linetoVerticalAbs",value:function(Z){this.addShape((this||P).shapeCreator.line((this||P).lastX,(this||P).lastY,(this||P).lastX,Z));(this||P).lastY=Z;(this||P).lastCommand="V"}},{key:"linetoVerticalRel",value:function(Z){this.addShape((this||P).shapeCreator.line((this||P).lastX,(this||P).lastY,(this||P).lastX,(this||P).lastY+Z));(this||P).lastY+=Z;(this||P).lastCommand="v"}},{key:"closePath",value:function(){this.addShape((this||P).shapeCreator.line((this||P).lastX,
(this||P).lastY,(this||P).firstX,(this||P).firstY));(this||P).lastX=(this||P).firstX;(this||P).lastY=(this||P).firstY;(this||P).lastCommand="z"}}]);return pd}(),Re=.5*Math.PI,ae=new ig,Sb=function(){function pd(Z,Ga){Ca(this||P,pd);(this||P).name=Z;(this||P).args=Ga}ma(pd,null,[{key:"arc",value:function(){for(var Z=arguments.length,Ga=Array(Z),fb=0;fb<Z;fb++)Ga[fb]=arguments[fb];Z=gb([[["center",["centerX","centerY"],["cx","cy"]],"Point2D"],[["radiusX","rx"],"Number"],[["radiusY","ry"],"Number"],
[["startRadians"],"Number"],[["endRadians"],"Number"]],Ga);return new pd(pd.ARC,Z)}},{key:"quadraticBezier",value:function(){for(var Z=arguments.length,Ga=Array(Z),fb=0;fb<Z;fb++)Ga[fb]=arguments[fb];Z=gb([[["p1",["p1x","p1y"]],"Point2D"],[["p2",["p2x","p2y"]],"Point2D"],[["p3",["p3x","p3y"]],"Point2D"]],Ga);return new pd(pd.QUADRATIC_BEZIER,Z)}},{key:"cubicBezier",value:function(){for(var Z=arguments.length,Ga=Array(Z),fb=0;fb<Z;fb++)Ga[fb]=arguments[fb];Z=gb([[["p1",["p1x","p1y"]],"Point2D"],[["p2",
["p2x","p2y"]],"Point2D"],[["p3",["p3x","p3y"]],"Point2D"],[["p4",["p4x","p4y"]],"Point2D"]],Ga);return new pd(pd.CUBIC_BEZIER,Z)}},{key:"circle",value:function(){for(var Z=arguments.length,Ga=Array(Z),fb=0;fb<Z;fb++)Ga[fb]=arguments[fb];Z=gb([[["center",["centerX","centerY"],["cx","cy"]],"Point2D"],[["radius","r"],"Number"]],Ga);return new pd(pd.CIRCLE,Z)}},{key:"ellipse",value:function(){for(var Z=arguments.length,Ga=Array(Z),fb=0;fb<Z;fb++)Ga[fb]=arguments[fb];Z=gb([[["center",["centerX","centerY"],
["cx","cy"]],"Point2D"],[["radiusX","rx"],"Number"],[["radiusY","ry"],"Number"]],Ga);return new pd(pd.ELLIPSE,Z)}},{key:"line",value:function(){for(var Z=arguments.length,Ga=Array(Z),fb=0;fb<Z;fb++)Ga[fb]=arguments[fb];Z=gb([[["p1",["p1x","p1y"],["x1","y1"]],"Point2D"],[["p2",["p2x","p2y"],["x2","y2"]],"Point2D"]],Ga);return new pd(pd.LINE,Z)}},{key:"path",value:function(){ae.parseData(0>=arguments.length?void 0:arguments[0]);return new pd(pd.PATH,Hd.shapes)}},{key:"polygon",value:function(){for(var Z=
arguments.length,Ga=Array(Z),fb=0;fb<Z;fb++)Ga[fb]=arguments[fb];Z=gb([[[],"Array<Point2D>"]],1===Ga.length&&Array.isArray(Ga[0])?Ga[0]:Ga);return new pd(pd.POLYGON,Z)}},{key:"polyline",value:function(){for(var Z=arguments.length,Ga=Array(Z),fb=0;fb<Z;fb++)Ga[fb]=arguments[fb];Z=gb([[[],"Array<Point2D>"]],1===Ga.length&&Array.isArray(Ga[0])?Ga[0]:Ga);return new pd(pd.POLYLINE,Z)}},{key:"rectangle",value:function(){for(var Z=arguments.length,Ga=Array(Z),fb=0;fb<Z;fb++)Ga[fb]=arguments[fb];Z=gb([[["topLeft",
["x","y"],["left","top"]],"Point2D"],[["size",["width","height"],["w","h"]],"Point2D"],[["radiusX","rx"],"Optional<Number>"],[["radiusY","ry"],"Optional<Number>"]],Ga);Ga=Z[0];fb=Z[1];Z[1]=new Pd(Ga.x+fb.x,Ga.y+fb.y);var ya=new pd(pd.RECTANGLE,Z);Z=ya.args.pop();Ga=ya.args.pop();Ga=void 0===Ga?0:Ga;Z=void 0===Z?0:Z;if(0===Ga&&0===Z)return ya;var tc=ya.args[0];fb=tc.x;tc=tc.y;var Mc=ya.args[1];ya=Mc.x;Mc=Mc.y;var Cd=ya-fb,Ee=Mc-tc;0===Ga&&(Ga=Z);0===Z&&(Z=Ga);Ga>.5*Cd&&(Ga=.5*Cd);Z>.5*Ee&&(Z=.5*Ee);
Cd=fb+Ga;Ee=tc+Z;var bf=ya-Ga,Oe=Mc-Z;Z=[pd.arc(Cd,Ee,Ga,Z,2*Re,3*Re),pd.line(Cd,tc,bf,tc),pd.arc(bf,Ee,Ga,Z,3*Re,4*Re),pd.line(ya,Ee,ya,Oe),pd.arc(bf,Oe,Ga,Z,0,Re),pd.line(bf,Mc,Cd,Mc),pd.arc(Cd,Oe,Ga,Z,Re,2*Re),pd.line(fb,Oe,fb,Ee)];return new pd(pd.PATH,Z)}}]);return pd}();Sb.ARC="Arc";Sb.QUADRATIC_BEZIER="Bezier2";Sb.CUBIC_BEZIER="Bezier3";Sb.CIRCLE="Circle";Sb.ELLIPSE="Ellipse";Sb.LINE="Line";Sb.PATH="Path";Sb.POLYGON="Polygon";Sb.POLYLINE="Polyline";Sb.RECTANGLE="Rectangle";var Hd=new Vg(Sb);
ae.setHandler(Hd);var hf=2*Math.PI,zf=new Zd(1,0),Gg=function(){function pd(Z){Ca(this||P,pd);this.init(Z)}ma(pd,[{key:"init",value:function(Z){(this||P).status=Z;(this||P).points=[]}},{key:"appendPoint",value:function(Z){(this||P).points.push(Z)}},{key:"appendPoints",value:function(Z){(this||P).points=(this||P).points.concat(Z)}}],[{key:"intersect",value:function(Z,Ga){if(null!==Z&&void 0!==Z&&null!==Ga&&void 0!==Ga)if("Path"===Z.name)var fb=pd.intersectPathShape(Z,Ga);else if("Path"===Ga.name)fb=
pd.intersectPathShape(Ga,Z);else if("Arc"===Z.name)fb=pd.intersectArcShape(Z,Ga);else if("Arc"===Ga.name)fb=pd.intersectArcShape(Ga,Z);else{Z.name<Ga.name?(fb="intersect"+Z.name+Ga.name,Z=Z.args.concat(Ga.args)):(fb="intersect"+Ga.name+Z.name,Z=Ga.args.concat(Z.args));if(!(fb in pd))throw new TypeError("Intersection not available: "+fb);fb=pd[fb].apply(null,Z)}else fb=new pd("No Intersection");return fb}},{key:"intersectPathShape",value:function(Z,Ga){var fb=new pd("No Intersection");Z=E(Z.args);
var ya;try{for(Z.s();!(ya=Z.n()).done;){var tc=pd.intersect(ya.value,Ga);fb.appendPoints(tc.points)}}catch(Mc){Z.e(Mc)}finally{Z.f()}0<fb.points.length&&(fb.status="Intersection");return fb}},{key:"intersectArcShape",value:function(Z,Ga){var fb=ua(Z.args,5);Z=fb[0];var ya=fb[3],tc=fb[4];fb=new Sb(Sb.ELLIPSE,[Z,fb[1],fb[2]]);Ga=pd.intersect(fb,Ga);fb=tc;if(0===Ga.points.length)var Mc=Ga;else{tc=new Gg("No Intersection");fb<ya&&(fb=[fb,ya],ya=fb[0],fb=fb[1]);if(0>ya||0>fb)ya+=hf,fb+=hf;Ga=E(Ga.points);
try{for(Ga.s();!(Mc=Ga.n()).done;){var Cd=Mc.value,Ee=zf.angleBetween(Zd.fromPoints(Z,Cd))%hf;var bf=0>Ee?Ee+hf:Ee;bf<ya&&(bf+=hf);ya<=bf&&bf<=fb&&tc.appendPoint(Cd)}}catch(Oe){Ga.e(Oe)}finally{Ga.f()}0<tc.points.length&&(tc.status="Intersection");Mc=tc}return Mc}},{key:"intersectBezier2Bezier2",value:function(Z,Ga,fb,ya,tc,Mc){var Cd=new pd("No Intersection");var Ee=Ga.multiply(-2);fb=Z.add(Ee.add(fb));Ee=Z.multiply(-2);var bf=Ga.multiply(2);Ga=Ee.add(bf);Z=new Pd(Z.x,Z.y);Ee=tc.multiply(-2);Mc=
ya.add(Ee.add(Mc));Ee=ya.multiply(-2);bf=tc.multiply(2);tc=Ee.add(bf);ya=new Pd(ya.x,ya.y);Ee=fb.x*Ga.y-Ga.x*fb.y;bf=Mc.x*Ga.y-Ga.x*Mc.y;var Oe=Mc.x*fb.y-fb.x*Mc.y,Fe=tc.x*fb.y-fb.x*tc.y,Pf=fb.x*(Z.y-ya.y)+fb.y*(-Z.x+ya.x);Ee=(new Ce(-Oe*Oe,-2*Oe*Fe,Ee*bf-Fe*Fe-2*Oe*Pf,Ee*(tc.x*Ga.y-Ga.x*tc.y)-2*Fe*Pf,Ee*(Ga.x*(Z.y-ya.y)+Ga.y*(-Z.x+ya.x))-Pf*Pf)).getRoots();Ee=E(Ee);var eg;try{for(Ee.s();!(eg=Ee.n()).done;){var be=eg.value;if(0<=be&&1>=be){var v=new Ce(fb.x,Ga.x,Z.x-ya.x-be*tc.x-be*be*Mc.x);v.simplifyEquals();
var oa=v.getRoots(),Oc=new Ce(fb.y,Ga.y,Z.y-ya.y-be*tc.y-be*be*Mc.y);Oc.simplifyEquals();var Tb=Oc.getRoots();if(0<oa.length&&0<Tb.length){var ne=E(oa),Ye;try{a:for(ne.s();!(Ye=ne.n()).done;){var Kf=Ye.value;if(0<=Kf&&1>=Kf)for(bf=0;bf<Tb.length;bf++)if(1E-4>Math.abs(Kf-Tb[bf])){Cd.points.push(Mc.multiply(be*be).add(tc.multiply(be).add(ya)));break a}}}catch(jg){ne.e(jg)}finally{ne.f()}}}}}catch(jg){Ee.e(jg)}finally{Ee.f()}0<Cd.points.length&&(Cd.status="Intersection");return Cd}},{key:"intersectBezier2Bezier3",
value:function(Z,Ga,fb,ya,tc,Mc,Cd){var Ee=new pd("No Intersection");var bf=Ga.multiply(-2);fb=Z.add(bf.add(fb));bf=Z.multiply(-2);var Oe=Ga.multiply(2);Ga=bf.add(Oe);Z=new Pd(Z.x,Z.y);bf=ya.multiply(-1);Oe=tc.multiply(3);var Fe=Mc.multiply(-3);bf=bf.add(Oe.add(Fe.add(Cd)));Cd=new Pd(bf.x,bf.y);bf=ya.multiply(3);Oe=tc.multiply(-6);Fe=Mc.multiply(3);bf=bf.add(Oe.add(Fe));Mc=new Pd(bf.x,bf.y);bf=ya.multiply(-3);Oe=tc.multiply(3);Fe=bf.add(Oe);tc=new Pd(Fe.x,Fe.y);ya=new Pd(ya.x,ya.y);bf=Ga.x*Ga.x;Oe=
Ga.y*Ga.y;Fe=fb.x*fb.x;var Pf=fb.y*fb.y;bf=(new Ce(-2*fb.x*fb.y*Cd.x*Cd.y+Fe*Cd.y*Cd.y+Pf*Cd.x*Cd.x,-2*fb.x*fb.y*Mc.x*Cd.y-2*fb.x*fb.y*Mc.y*Cd.x+2*Pf*Mc.x*Cd.x+2*Fe*Mc.y*Cd.y,-2*fb.x*tc.x*fb.y*Cd.y-2*fb.x*fb.y*tc.y*Cd.x-2*fb.x*fb.y*Mc.x*Mc.y+2*tc.x*Pf*Cd.x+Pf*Mc.x*Mc.x+Fe*(2*tc.y*Cd.y+Mc.y*Mc.y),2*Z.x*fb.x*fb.y*Cd.y+2*Z.y*fb.x*fb.y*Cd.x+Ga.x*Ga.y*fb.x*Cd.y+Ga.x*Ga.y*fb.y*Cd.x-2*ya.x*fb.x*fb.y*Cd.y-2*fb.x*ya.y*fb.y*Cd.x-2*fb.x*tc.x*fb.y*Mc.y-2*fb.x*fb.y*tc.y*Mc.x-2*Z.x*Pf*Cd.x-2*Z.y*Fe*Cd.y+2*ya.x*
Pf*Cd.x+2*tc.x*Pf*Mc.x-Oe*fb.x*Cd.x-bf*fb.y*Cd.y+Fe*(2*ya.y*Cd.y+2*tc.y*Mc.y),2*Z.x*fb.x*fb.y*Mc.y+2*Z.y*fb.x*fb.y*Mc.x+Ga.x*Ga.y*fb.x*Mc.y+Ga.x*Ga.y*fb.y*Mc.x-2*ya.x*fb.x*fb.y*Mc.y-2*fb.x*ya.y*fb.y*Mc.x-2*fb.x*tc.x*fb.y*tc.y-2*Z.x*Pf*Mc.x-2*Z.y*Fe*Mc.y+2*ya.x*Pf*Mc.x-Oe*fb.x*Mc.x-bf*fb.y*Mc.y+tc.x*tc.x*Pf+Fe*(2*ya.y*Mc.y+tc.y*tc.y),2*Z.x*fb.x*fb.y*tc.y+2*Z.y*fb.x*tc.x*fb.y+Ga.x*Ga.y*fb.x*tc.y+Ga.x*Ga.y*tc.x*fb.y-2*ya.x*fb.x*fb.y*tc.y-2*fb.x*ya.y*tc.x*fb.y-2*Z.x*tc.x*Pf-2*Z.y*Fe*tc.y+2*ya.x*tc.x*
Pf-Oe*fb.x*tc.x-bf*fb.y*tc.y+2*Fe*ya.y*tc.y,-2*Z.x*Z.y*fb.x*fb.y-Z.x*Ga.x*Ga.y*fb.y-Z.y*Ga.x*Ga.y*fb.x+2*Z.x*fb.x*ya.y*fb.y+2*Z.y*ya.x*fb.x*fb.y+Ga.x*ya.x*Ga.y*fb.y+Ga.x*Ga.y*fb.x*ya.y-2*ya.x*fb.x*ya.y*fb.y-2*Z.x*ya.x*Pf+Z.x*Oe*fb.x+Z.y*bf*fb.y-2*Z.y*Fe*ya.y-ya.x*Oe*fb.x-bf*ya.y*fb.y+Z.x*Z.x*Pf+Z.y*Z.y*Fe+ya.x*ya.x*Pf+Fe*ya.y*ya.y)).getRootsInInterval(0,1);bf=E(bf);var eg;try{for(bf.s();!(eg=bf.n()).done;){var be=eg.value,v=(new Ce(fb.x,Ga.x,Z.x-ya.x-be*tc.x-be*be*Mc.x-be*be*be*Cd.x)).getRoots(),
oa=(new Ce(fb.y,Ga.y,Z.y-ya.y-be*tc.y-be*be*Mc.y-be*be*be*Cd.y)).getRoots();if(0<v.length&&0<oa.length){var Oc=E(v),Tb;try{a:for(Oc.s();!(Tb=Oc.n()).done;){var ne=Tb.value;if(0<=ne&&1>=ne)for(Oe=0;Oe<oa.length;Oe++)if(1E-4>Math.abs(ne-oa[Oe])){Ee.points.push(Cd.multiply(be*be*be).add(Mc.multiply(be*be).add(tc.multiply(be).add(ya))));break a}}}catch(Ye){Oc.e(Ye)}finally{Oc.f()}}}}catch(Ye){bf.e(Ye)}finally{bf.f()}0<Ee.points.length&&(Ee.status="Intersection");return Ee}},{key:"intersectBezier2Circle",
value:function(Z,Ga,fb,ya,tc){return pd.intersectBezier2Ellipse(Z,Ga,fb,ya,tc,tc)}},{key:"intersectBezier2Ellipse",value:function(Z,Ga,fb,ya,tc,Mc){var Cd=new pd("No Intersection");var Ee=Ga.multiply(-2);fb=Z.add(Ee.add(fb));Ee=Z.multiply(-2);Ga=Ga.multiply(2);Ee=Ee.add(Ga);Z=new Pd(Z.x,Z.y);tc*=tc;Mc*=Mc;ya=(new Ce(Mc*fb.x*fb.x+tc*fb.y*fb.y,2*(Mc*fb.x*Ee.x+tc*fb.y*Ee.y),Mc*(2*fb.x*Z.x+Ee.x*Ee.x)+tc*(2*fb.y*Z.y+Ee.y*Ee.y)-2*(Mc*ya.x*fb.x+tc*ya.y*fb.y),2*(Mc*Ee.x*(Z.x-ya.x)+tc*Ee.y*(Z.y-ya.y)),Mc*
(Z.x*Z.x+ya.x*ya.x)+tc*(Z.y*Z.y+ya.y*ya.y)-2*(Mc*ya.x*Z.x+tc*ya.y*Z.y)-tc*Mc)).getRoots();ya=E(ya);var bf;try{for(ya.s();!(bf=ya.n()).done;){var Oe=bf.value;0<=Oe&&1>=Oe&&Cd.points.push(fb.multiply(Oe*Oe).add(Ee.multiply(Oe).add(Z)))}}catch(Fe){ya.e(Fe)}finally{ya.f()}0<Cd.points.length&&(Cd.status="Intersection");return Cd}},{key:"intersectBezier2Line",value:function(Z,Ga,fb,ya,tc){var Mc=ya.min(tc),Cd=ya.max(tc),Ee=new pd("No Intersection");var bf=Ga.multiply(-2);var Oe=Z.add(bf.add(fb));bf=Z.multiply(-2);
var Fe=Ga.multiply(2);bf=bf.add(Fe);Fe=new Pd(Z.x,Z.y);var Pf=new Zd(ya.y-tc.y,tc.x-ya.x),eg=ya.x*tc.y-tc.x*ya.y;Oe=(new Ce(Pf.dot(Oe),Pf.dot(bf),Pf.dot(Fe)+eg)).getRoots();Oe=E(Oe);var be;try{for(Oe.s();!(be=Oe.n()).done;){var v=be.value;if(0<=v&&1>=v){var oa=Z.lerp(Ga,v),Oc=Ga.lerp(fb,v),Tb=oa.lerp(Oc,v);ya.x===tc.x?Mc.y<=Tb.y&&Tb.y<=Cd.y&&(Ee.status="Intersection",Ee.appendPoint(Tb)):ya.y===tc.y?Mc.x<=Tb.x&&Tb.x<=Cd.x&&(Ee.status="Intersection",Ee.appendPoint(Tb)):Mc.x<=Tb.x&&Tb.x<=Cd.x&&Mc.y<=
Tb.y&&Tb.y<=Cd.y&&(Ee.status="Intersection",Ee.appendPoint(Tb))}}}catch(ne){Oe.e(ne)}finally{Oe.f()}return Ee}},{key:"intersectBezier2Polygon",value:function(Z,Ga,fb,ya){return pd.intersectBezier2Polyline(Z,Ga,fb,Ic(ya))}},{key:"intersectBezier2Polyline",value:function(Z,Ga,fb,ya){for(var tc=new pd("No Intersection"),Mc=ya.length,Cd=0;Cd<Mc-1;Cd++){var Ee=pd.intersectBezier2Line(Z,Ga,fb,ya[Cd],ya[Cd+1]);tc.appendPoints(Ee.points)}0<tc.points.length&&(tc.status="Intersection");return tc}},{key:"intersectBezier2Rectangle",
value:function(Z,Ga,fb,ya,tc){var Mc=ya.min(tc),Cd=ya.max(tc);tc=new Pd(Cd.x,Mc.y);var Ee=new Pd(Mc.x,Cd.y);ya=pd.intersectBezier2Line(Z,Ga,fb,Mc,tc);tc=pd.intersectBezier2Line(Z,Ga,fb,tc,Cd);Cd=pd.intersectBezier2Line(Z,Ga,fb,Cd,Ee);Z=pd.intersectBezier2Line(Z,Ga,fb,Ee,Mc);Ga=new pd("No Intersection");Ga.appendPoints(ya.points);Ga.appendPoints(tc.points);Ga.appendPoints(Cd.points);Ga.appendPoints(Z.points);0<Ga.points.length&&(Ga.status="Intersection");return Ga}},{key:"intersectBezier3Bezier3",
value:function(Z,Ga,fb,ya,tc,Mc,Cd,Ee){var bf=new pd("No Intersection");var Oe=Z.multiply(-1);var Fe=Ga.multiply(3);var Pf=fb.multiply(-3);Pf=Oe.add(Fe.add(Pf.add(ya)));ya=new Pd(Pf.x,Pf.y);Oe=Z.multiply(3);Fe=Ga.multiply(-6);Pf=fb.multiply(3);Pf=Oe.add(Fe.add(Pf));fb=new Pd(Pf.x,Pf.y);Oe=Z.multiply(-3);Fe=Ga.multiply(3);Pf=Oe.add(Fe);Ga=new Pd(Pf.x,Pf.y);Z=new Pd(Z.x,Z.y);Oe=tc.multiply(-1);Fe=Mc.multiply(3);Pf=Cd.multiply(-3);Pf=Oe.add(Fe.add(Pf.add(Ee)));Ee=new Pd(Pf.x,Pf.y);Oe=tc.multiply(3);
Fe=Mc.multiply(-6);Pf=Cd.multiply(3);Pf=Oe.add(Fe.add(Pf));Cd=new Pd(Pf.x,Pf.y);Oe=tc.multiply(-3);Fe=Mc.multiply(3);Pf=Oe.add(Fe);Mc=new Pd(Pf.x,Pf.y);tc=new Pd(tc.x,tc.y);Oe=ya.x*fb.y-fb.x*ya.y;Fe=ya.x*Ga.y-Ga.x*ya.y;var eg=ya.x*Z.y-Z.x*ya.y+tc.x*ya.y-ya.x*tc.y,be=Mc.x*ya.y-ya.x*Mc.y,v=Cd.x*ya.y-ya.x*Cd.y,oa=Ee.x*ya.y-ya.x*Ee.y;Pf=ya.x*Ga.y-Ga.x*ya.y;var Oc=ya.x*Z.y+fb.x*Ga.y-Ga.x*fb.y-Z.x*ya.y+tc.x*ya.y-ya.x*tc.y,Tb=Mc.x*ya.y-ya.x*Mc.y,ne=Cd.x*ya.y-ya.x*Cd.y,Ye=Ee.x*ya.y-ya.x*Ee.y,Kf=fb.x*Z.y-
Z.x*fb.y+tc.x*fb.y-fb.x*tc.y,jg=Mc.x*fb.y-fb.x*Mc.y,Og=Cd.x*fb.y-fb.x*Cd.y,te=Ee.x*fb.y-fb.x*Ee.y,Eh=ya.x*Z.y-Z.x*ya.y+tc.x*ya.y-ya.x*tc.y,$h=Mc.x*ya.y-ya.x*Mc.y,Gi=Cd.x*ya.y-ya.x*Cd.y,Ng=Ee.x*ya.y-ya.x*Ee.y,Ii=fb.x*Z.y-Z.x*fb.y+tc.x*fb.y-fb.x*tc.y,fi=Mc.x*fb.y-fb.x*Mc.y,Ji=Cd.x*fb.y-fb.x*Cd.y,gi=Ee.x*fb.y-fb.x*Ee.y,xj=Ga.x*Z.y-Z.x*Ga.y+tc.x*Ga.y-Ga.x*tc.y,yg=Mc.x*Ga.y-Ga.x*Mc.y,Ti=Cd.x*Ga.y-Ga.x*Cd.y,ke=Ee.x*Ga.y-Ga.x*Ee.y;Oe=new Ce(-oa*Ye*Ng,-oa*Ye*Gi-oa*ne*Ng-v*Ye*Ng,-oa*Ye*$h-oa*ne*Gi-v*Ye*Gi-
oa*Tb*Ng-v*ne*Ng-be*Ye*Ng,-oa*Ye*Eh-oa*ne*$h-v*Ye*$h-oa*Tb*Gi-v*ne*Gi-be*Ye*Gi-oa*Oc*Ng-v*Tb*Ng-be*ne*Ng-eg*Ye*Ng+Fe*te*Ng+oa*Pf*gi-Oe*te*gi+Oe*Ye*ke,-oa*ne*Eh-v*Ye*Eh-oa*Tb*$h-v*ne*$h-be*Ye*$h-oa*Oc*Gi-v*Tb*Gi-be*ne*Gi-eg*Ye*Gi+Fe*te*Gi-v*Oc*Ng-be*Tb*Ng-eg*ne*Ng+Fe*Og*Ng+oa*Pf*Ji-Oe*te*Ji+v*Pf*gi-Oe*Og*gi+Oe*Ye*Ti+Oe*ne*ke,-oa*Tb*Eh-v*ne*Eh-be*Ye*Eh-oa*Oc*$h-v*Tb*$h-be*ne*$h-eg*Ye*$h+Fe*te*$h-v*Oc*Gi-be*Tb*Gi-eg*ne*Gi+Fe*Og*Gi-be*Oc*Ng-eg*Tb*Ng+Fe*jg*Ng+oa*Pf*fi-Oe*te*fi+v*Pf*Ji-Oe*Og*Ji+be*Pf*gi-
Oe*jg*gi+Oe*Ye*yg+Oe*ne*Ti+Oe*Tb*ke,-oa*Oc*Eh-v*Tb*Eh-be*ne*Eh-eg*Ye*Eh+Fe*te*Eh-v*Oc*$h-be*Tb*$h-eg*ne*$h+Fe*Og*$h-be*Oc*Gi-eg*Tb*Gi+Fe*jg*Gi-eg*Oc*Ng+Fe*Kf*Ng+oa*Pf*Ii-Oe*te*Ii+v*Pf*fi-Oe*Og*fi+be*Pf*Ji-Oe*jg*Ji+eg*Pf*gi-Oe*Kf*gi+Oe*Ye*xj+Oe*ne*yg+Oe*Tb*Ti-Fe*Pf*ke+Oe*Oc*ke,-v*Oc*Eh-be*Tb*Eh-eg*ne*Eh+Fe*Og*Eh-be*Oc*$h-eg*Tb*$h+Fe*jg*$h-eg*Oc*Gi+Fe*Kf*Gi+v*Pf*Ii-Oe*Og*Ii+be*Pf*fi-Oe*jg*fi+eg*Pf*Ji-Oe*Kf*Ji+Oe*ne*xj+Oe*Tb*yg-Fe*Pf*Ti+Oe*Oc*Ti,-be*Oc*Eh-eg*Tb*Eh+Fe*jg*Eh-eg*Oc*$h+Fe*Kf*$h+be*Pf*Ii-
Oe*jg*Ii+eg*Pf*fi-Oe*Kf*fi+Oe*Tb*xj-Fe*Pf*yg+Oe*Oc*yg,-eg*Oc*Eh+Fe*Kf*Eh+eg*Pf*Ii-Oe*Kf*Ii-Fe*Pf*xj+Oe*Oc*xj);Oe.simplifyEquals();Oe=Oe.getRootsInInterval(0,1);Oe=E(Oe);var Mg;try{for(Oe.s();!(Mg=Oe.n()).done;){var Hh=Mg.value,Zf=new Ce(ya.x,fb.x,Ga.x,Z.x-tc.x-Hh*Mc.x-Hh*Hh*Cd.x-Hh*Hh*Hh*Ee.x);Zf.simplifyEquals();var z=Zf.getRoots(),C=new Ce(ya.y,fb.y,Ga.y,Z.y-tc.y-Hh*Mc.y-Hh*Hh*Cd.y-Hh*Hh*Hh*Ee.y);C.simplifyEquals();var K=C.getRoots();if(0<z.length&&0<K.length){var T=E(z),O;try{a:for(T.s();!(O=T.n()).done;){var qa=
O.value;if(0<=qa&&1>=qa)for(Fe=0;Fe<K.length;Fe++)if(1E-4>Math.abs(qa-K[Fe])){bf.points.push(Ee.multiply(Hh*Hh*Hh).add(Cd.multiply(Hh*Hh).add(Mc.multiply(Hh).add(tc))));break a}}}catch(Ba){T.e(Ba)}finally{T.f()}}}}catch(Ba){Oe.e(Ba)}finally{Oe.f()}0<bf.points.length&&(bf.status="Intersection");return bf}},{key:"intersectBezier3Circle",value:function(Z,Ga,fb,ya,tc,Mc){return pd.intersectBezier3Ellipse(Z,Ga,fb,ya,tc,Mc,Mc)}},{key:"intersectBezier3Ellipse",value:function(Z,Ga,fb,ya,tc,Mc,Cd){var Ee=
new pd("No Intersection");var bf=Z.multiply(-1);var Oe=Ga.multiply(3);var Fe=fb.multiply(-3);bf=bf.add(Oe.add(Fe.add(ya)));ya=new Pd(bf.x,bf.y);bf=Z.multiply(3);Oe=Ga.multiply(-6);Fe=fb.multiply(3);bf=bf.add(Oe.add(Fe));fb=new Pd(bf.x,bf.y);bf=Z.multiply(-3);Oe=Ga.multiply(3);Fe=bf.add(Oe);Ga=new Pd(Fe.x,Fe.y);Z=new Pd(Z.x,Z.y);Mc*=Mc;Cd*=Cd;tc=(new Ce(ya.x*ya.x*Cd+ya.y*ya.y*Mc,2*(ya.x*fb.x*Cd+ya.y*fb.y*Mc),2*(ya.x*Ga.x*Cd+ya.y*Ga.y*Mc)+fb.x*fb.x*Cd+fb.y*fb.y*Mc,2*ya.x*Cd*(Z.x-tc.x)+2*ya.y*Mc*(Z.y-
tc.y)+2*(fb.x*Ga.x*Cd+fb.y*Ga.y*Mc),2*fb.x*Cd*(Z.x-tc.x)+2*fb.y*Mc*(Z.y-tc.y)+Ga.x*Ga.x*Cd+Ga.y*Ga.y*Mc,2*Ga.x*Cd*(Z.x-tc.x)+2*Ga.y*Mc*(Z.y-tc.y),Z.x*Z.x*Cd-2*Z.y*tc.y*Mc-2*Z.x*tc.x*Cd+Z.y*Z.y*Mc+tc.x*tc.x*Cd+tc.y*tc.y*Mc-Mc*Cd)).getRootsInInterval(0,1);tc=E(tc);var Pf;try{for(tc.s();!(Pf=tc.n()).done;){var eg=Pf.value;Ee.points.push(ya.multiply(eg*eg*eg).add(fb.multiply(eg*eg).add(Ga.multiply(eg).add(Z))))}}catch(be){tc.e(be)}finally{tc.f()}0<Ee.points.length&&(Ee.status="Intersection");return Ee}},
{key:"intersectBezier3Line",value:function(Z,Ga,fb,ya,tc,Mc){var Cd=tc.min(Mc),Ee=tc.max(Mc),bf=new pd("No Intersection");var Oe=Z.multiply(-1);var Fe=Ga.multiply(3);var Pf=fb.multiply(-3);var eg=Oe.add(Fe.add(Pf.add(ya)));var be=new Zd(eg.x,eg.y);Oe=Z.multiply(3);Fe=Ga.multiply(-6);Pf=fb.multiply(3);eg=Oe.add(Fe.add(Pf));eg=new Zd(eg.x,eg.y);Oe=Z.multiply(-3);Fe=Ga.multiply(3);Pf=Oe.add(Fe);Oe=new Zd(Pf.x,Pf.y);Fe=new Zd(Z.x,Z.y);Pf=new Zd(tc.y-Mc.y,Mc.x-tc.x);var v=tc.x*Mc.y-Mc.x*tc.y;be=(new Ce(Pf.dot(be),
Pf.dot(eg),Pf.dot(Oe),Pf.dot(Fe)+v)).getRoots();be=E(be);var oa;try{for(be.s();!(oa=be.n()).done;){var Oc=oa.value;if(0<=Oc&&1>=Oc){var Tb=Z.lerp(Ga,Oc),ne=Ga.lerp(fb,Oc),Ye=fb.lerp(ya,Oc),Kf=Tb.lerp(ne,Oc),jg=ne.lerp(Ye,Oc),Og=Kf.lerp(jg,Oc);tc.x===Mc.x?Cd.y<=Og.y&&Og.y<=Ee.y&&(bf.status="Intersection",bf.appendPoint(Og)):tc.y===Mc.y?Cd.x<=Og.x&&Og.x<=Ee.x&&(bf.status="Intersection",bf.appendPoint(Og)):Cd.x<=Og.x&&Og.x<=Ee.x&&Cd.y<=Og.y&&Og.y<=Ee.y&&(bf.status="Intersection",bf.appendPoint(Og))}}}catch(te){be.e(te)}finally{be.f()}return bf}},
{key:"intersectBezier3Polygon",value:function(Z,Ga,fb,ya,tc){return pd.intersectBezier3Polyline(Z,Ga,fb,ya,Ic(tc))}},{key:"intersectBezier3Polyline",value:function(Z,Ga,fb,ya,tc){for(var Mc=new pd("No Intersection"),Cd=tc.length,Ee=0;Ee<Cd-1;Ee++){var bf=pd.intersectBezier3Line(Z,Ga,fb,ya,tc[Ee],tc[Ee+1]);Mc.appendPoints(bf.points)}0<Mc.points.length&&(Mc.status="Intersection");return Mc}},{key:"intersectBezier3Rectangle",value:function(Z,Ga,fb,ya,tc,Mc){var Cd=tc.min(Mc),Ee=tc.max(Mc);Mc=new Pd(Ee.x,
Cd.y);var bf=new Pd(Cd.x,Ee.y);tc=pd.intersectBezier3Line(Z,Ga,fb,ya,Cd,Mc);Mc=pd.intersectBezier3Line(Z,Ga,fb,ya,Mc,Ee);Ee=pd.intersectBezier3Line(Z,Ga,fb,ya,Ee,bf);Z=pd.intersectBezier3Line(Z,Ga,fb,ya,bf,Cd);Ga=new pd("No Intersection");Ga.appendPoints(tc.points);Ga.appendPoints(Mc.points);Ga.appendPoints(Ee.points);Ga.appendPoints(Z.points);0<Ga.points.length&&(Ga.status="Intersection");return Ga}},{key:"intersectCircleCircle",value:function(Z,Ga,fb,ya){var tc=Ga+ya;var Mc=Math.abs(Ga-ya),Cd=Z.distanceFrom(fb);
Cd>tc?tc=new pd("Outside"):Cd<Mc?tc=new pd("Inside"):(tc=new pd("Intersection"),ya=(Ga*Ga-ya*ya+Cd*Cd)/(2*Cd),Ga=Math.sqrt(Ga*Ga-ya*ya),ya=Z.lerp(fb,ya/Cd),Cd=Ga/Cd,tc.points.push(new Pd(ya.x-Cd*(fb.y-Z.y),ya.y+Cd*(fb.x-Z.x))),tc.points.push(new Pd(ya.x+Cd*(fb.y-Z.y),ya.y-Cd*(fb.x-Z.x))));return tc}},{key:"intersectCircleEllipse",value:function(Z,Ga,fb,ya,tc){return pd.intersectEllipseEllipse(Z,Ga,Ga,fb,ya,tc)}},{key:"intersectCircleLine",value:function(Z,Ga,fb,ya){var tc=(ya.x-fb.x)*(ya.x-fb.x)+
(ya.y-fb.y)*(ya.y-fb.y);var Mc=2*((ya.x-fb.x)*(fb.x-Z.x)+(ya.y-fb.y)*(fb.y-Z.y));Z=Mc*Mc-4*tc*(Z.x*Z.x+Z.y*Z.y+fb.x*fb.x+fb.y*fb.y-2*(Z.x*fb.x+Z.y*fb.y)-Ga*Ga);0>Z?tc=new pd("Outside"):0===Z?tc=new pd("Tangent"):(Ga=Math.sqrt(Z),Z=(-Mc+Ga)/(2*tc),Mc=(-Mc-Ga)/(2*tc),(0>Z||1<Z)&&(0>Mc||1<Mc)?tc=0>Z&&0>Mc||1<Z&&1<Mc?new pd("Outside"):new pd("Inside"):(tc=new pd("Intersection"),0<=Z&&1>=Z&&tc.points.push(fb.lerp(ya,Z)),0<=Mc&&1>=Mc&&tc.points.push(fb.lerp(ya,Mc))));return tc}},{key:"intersectCirclePolygon",
value:function(Z,Ga,fb){return pd.intersectCirclePolyline(Z,Ga,Ic(fb))}},{key:"intersectCirclePolyline",value:function(Z,Ga,fb){for(var ya=new pd("No Intersection"),tc=fb.length,Mc,Cd=0;Cd<tc-1;Cd++)Mc=pd.intersectCircleLine(Z,Ga,fb[Cd],fb[Cd+1]),ya.appendPoints(Mc.points);ya.status=0<ya.points.length?"Intersection":Mc.status;return ya}},{key:"intersectCircleRectangle",value:function(Z,Ga,fb,ya){var tc=fb.min(ya),Mc=fb.max(ya);ya=new Pd(Mc.x,tc.y);var Cd=new Pd(tc.x,Mc.y);fb=pd.intersectCircleLine(Z,
Ga,tc,ya);ya=pd.intersectCircleLine(Z,Ga,ya,Mc);Mc=pd.intersectCircleLine(Z,Ga,Mc,Cd);Z=pd.intersectCircleLine(Z,Ga,Cd,tc);Ga=new pd("No Intersection");Ga.appendPoints(fb.points);Ga.appendPoints(ya.points);Ga.appendPoints(Mc.points);Ga.appendPoints(Z.points);Ga.status=0<Ga.points.length?"Intersection":fb.status;return Ga}},{key:"intersectEllipseEllipse",value:function(Z,Ga,fb,ya,tc,Mc){Z=[fb*fb,0,Ga*Ga,-2*fb*fb*Z.x,-2*Ga*Ga*Z.y,fb*fb*Z.x*Z.x+Ga*Ga*Z.y*Z.y-Ga*Ga*fb*fb];ya=[Mc*Mc,0,tc*tc,-2*Mc*Mc*ya.x,
-2*tc*tc*ya.y,Mc*Mc*ya.x*ya.x+tc*tc*ya.y*ya.y-tc*tc*Mc*Mc];tc=Z[0]*ya[1]-ya[0]*Z[1];Mc=Z[0]*ya[2]-ya[0]*Z[2];Ga=Z[0]*ya[3]-ya[0]*Z[3];fb=Z[0]*ya[4]-ya[0]*Z[4];var Cd=Z[0]*ya[5]-ya[0]*Z[5],Ee=Z[1]*ya[2]-ya[1]*Z[2],bf=Z[3]*ya[5]-ya[3]*Z[5],Oe=Z[1]*ya[5]-ya[1]*Z[5]+(Z[3]*ya[4]-ya[3]*Z[4]),Fe=Z[1]*ya[4]-ya[1]*Z[4]-(Z[2]*ya[3]-ya[2]*Z[3]);tc=(new Ce(tc*Ee-Mc*Mc,tc*Fe+Ga*Ee-2*Mc*fb,tc*Oe+Ga*Fe-fb*fb-2*Mc*Cd,tc*bf+Ga*Oe-2*fb*Cd,Ga*bf-Cd*Cd)).getRoots();Mc=.001*(Z[0]*Z[0]+2*Z[1]*Z[1]+Z[2]*Z[2]);Ga=.001*(ya[0]*
ya[0]+2*ya[1]*ya[1]+ya[2]*ya[2]);fb=new pd("No Intersection");for(Cd=0;Cd<tc.length;Cd++)for(Ee=(new Ce(Z[0],Z[3]+tc[Cd]*Z[1],Z[5]+tc[Cd]*(Z[4]+tc[Cd]*Z[2]))).getRoots(),bf=0;bf<Ee.length;bf++)Oe=(Z[0]*Ee[bf]+Z[1]*tc[Cd]+Z[3])*Ee[bf]+(Z[2]*tc[Cd]+Z[4])*tc[Cd]+Z[5],Math.abs(Oe)<Mc&&(Oe=(ya[0]*Ee[bf]+ya[1]*tc[Cd]+ya[3])*Ee[bf]+(ya[2]*tc[Cd]+ya[4])*tc[Cd]+ya[5],Math.abs(Oe)<Ga&&fb.appendPoint(new Pd(Ee[bf],tc[Cd])));0<fb.points.length&&(fb.status="Intersection");return fb}},{key:"intersectEllipseLine",
value:function(Z,Ga,fb,ya,tc){var Mc=new Zd(ya.x,ya.y);var Cd=Zd.fromPoints(ya,tc);Z=new Zd(Z.x,Z.y);Z=Mc.subtract(Z);Mc=new Zd(Cd.x/(Ga*Ga),Cd.y/(fb*fb));fb=new Zd(Z.x/(Ga*Ga),Z.y/(fb*fb));Ga=Cd.dot(Mc);Cd=Cd.dot(fb);Z=Z.dot(fb)-1;fb=Cd*Cd-Ga*Z;0>fb?Cd=new pd("Outside"):0<fb?(Z=Math.sqrt(fb),fb=(-Cd-Z)/Ga,Ga=(-Cd+Z)/Ga,(0>fb||1<fb)&&(0>Ga||1<Ga)?Cd=0>fb&&0>Ga||1<fb&&1<Ga?new pd("Outside"):new pd("Inside"):(Cd=new pd("Intersection"),0<=fb&&1>=fb&&Cd.appendPoint(ya.lerp(tc,fb)),0<=Ga&&1>=Ga&&Cd.appendPoint(ya.lerp(tc,
Ga)))):(Ga=-Cd/Ga,0<=Ga&&1>=Ga?(Cd=new pd("Intersection"),Cd.appendPoint(ya.lerp(tc,Ga))):Cd=new pd("Outside"));return Cd}},{key:"intersectEllipsePolygon",value:function(Z,Ga,fb,ya){return pd.intersectEllipsePolyline(Z,Ga,fb,Ic(ya))}},{key:"intersectEllipsePolyline",value:function(Z,Ga,fb,ya){for(var tc=new pd("No Intersection"),Mc=ya.length,Cd=0;Cd<Mc-1;Cd++){var Ee=pd.intersectEllipseLine(Z,Ga,fb,ya[Cd],ya[Cd+1]);tc.appendPoints(Ee.points)}0<tc.points.length&&(tc.status="Intersection");return tc}},
{key:"intersectEllipseRectangle",value:function(Z,Ga,fb,ya,tc){var Mc=ya.min(tc),Cd=ya.max(tc);tc=new Pd(Cd.x,Mc.y);var Ee=new Pd(Mc.x,Cd.y);ya=pd.intersectEllipseLine(Z,Ga,fb,Mc,tc);tc=pd.intersectEllipseLine(Z,Ga,fb,tc,Cd);Cd=pd.intersectEllipseLine(Z,Ga,fb,Cd,Ee);Z=pd.intersectEllipseLine(Z,Ga,fb,Ee,Mc);Ga=new pd("No Intersection");Ga.appendPoints(ya.points);Ga.appendPoints(tc.points);Ga.appendPoints(Cd.points);Ga.appendPoints(Z.points);0<Ga.points.length&&(Ga.status="Intersection");return Ga}},
{key:"intersectLineLine",value:function(Z,Ga,fb,ya){var tc=(ya.x-fb.x)*(Z.y-fb.y)-(ya.y-fb.y)*(Z.x-fb.x);var Mc=(Ga.x-Z.x)*(Z.y-fb.y)-(Ga.y-Z.y)*(Z.x-fb.x);fb=(ya.y-fb.y)*(Ga.x-Z.x)-(ya.x-fb.x)*(Ga.y-Z.y);0!==fb?(tc/=fb,Mc/=fb,0<=tc&&1>=tc&&0<=Mc&&1>=Mc?(Mc=new pd("Intersection"),Mc.points.push(new Pd(Z.x+tc*(Ga.x-Z.x),Z.y+tc*(Ga.y-Z.y)))):Mc=new pd("No Intersection")):Mc=0===tc||0===Mc?new pd("Coincident"):new pd("Parallel");return Mc}},{key:"intersectLinePolygon",value:function(Z,Ga,fb){return pd.intersectLinePolyline(Z,
Ga,Ic(fb))}},{key:"intersectLinePolyline",value:function(Z,Ga,fb){for(var ya=new pd("No Intersection"),tc=fb.length,Mc=0;Mc<tc-1;Mc++){var Cd=pd.intersectLineLine(Z,Ga,fb[Mc],fb[Mc+1]);ya.appendPoints(Cd.points)}0<ya.points.length&&(ya.status="Intersection");return ya}},{key:"intersectLineRectangle",value:function(Z,Ga,fb,ya){var tc=fb.min(ya),Mc=fb.max(ya);ya=new Pd(Mc.x,tc.y);var Cd=new Pd(tc.x,Mc.y);fb=pd.intersectLineLine(tc,ya,Z,Ga);ya=pd.intersectLineLine(ya,Mc,Z,Ga);Mc=pd.intersectLineLine(Mc,
Cd,Z,Ga);Z=pd.intersectLineLine(Cd,tc,Z,Ga);Ga=new pd("No Intersection");Ga.appendPoints(fb.points);Ga.appendPoints(ya.points);Ga.appendPoints(Mc.points);Ga.appendPoints(Z.points);0<Ga.points.length&&(Ga.status="Intersection");return Ga}},{key:"intersectPolygonPolygon",value:function(Z,Ga){return pd.intersectPolylinePolyline(Ic(Z),Ic(Ga))}},{key:"intersectPolygonPolyline",value:function(Z,Ga){return pd.intersectPolylinePolyline(Ic(Z),Ga)}},{key:"intersectPolygonRectangle",value:function(Z,Ga,fb){return pd.intersectPolylineRectangle(Ic(Z),
Ga,fb)}},{key:"intersectPolylinePolyline",value:function(Z,Ga){for(var fb=new pd("No Intersection"),ya=Z.length,tc=0;tc<ya-1;tc++){var Mc=pd.intersectLinePolyline(Z[tc],Z[tc+1],Ga);fb.appendPoints(Mc.points)}0<fb.points.length&&(fb.status="Intersection");return fb}},{key:"intersectPolylineRectangle",value:function(Z,Ga,fb){var ya=Ga.min(fb),tc=Ga.max(fb);fb=new Pd(tc.x,ya.y);var Mc=new Pd(ya.x,tc.y);Ga=pd.intersectLinePolyline(ya,fb,Z);fb=pd.intersectLinePolyline(fb,tc,Z);tc=pd.intersectLinePolyline(tc,
Mc,Z);Z=pd.intersectLinePolyline(Mc,ya,Z);ya=new pd("No Intersection");ya.appendPoints(Ga.points);ya.appendPoints(fb.points);ya.appendPoints(tc.points);ya.appendPoints(Z.points);0<ya.points.length&&(ya.status="Intersection");return ya}},{key:"intersectRectangleRectangle",value:function(Z,Ga,fb,ya){var tc=Z.min(Ga),Mc=Z.max(Ga);Ga=new Pd(Mc.x,tc.y);var Cd=new Pd(tc.x,Mc.y);Z=pd.intersectLineRectangle(tc,Ga,fb,ya);Ga=pd.intersectLineRectangle(Ga,Mc,fb,ya);Mc=pd.intersectLineRectangle(Mc,Cd,fb,ya);fb=
pd.intersectLineRectangle(Cd,tc,fb,ya);ya=new pd("No Intersection");ya.appendPoints(Z.points);ya.appendPoints(Ga.points);ya.appendPoints(Mc.points);ya.appendPoints(fb.points);0<ya.points.length&&(ya.status="Intersection");return ya}},{key:"intersectRayRay",value:function(Z,Ga,fb,ya){var tc=(ya.x-fb.x)*(Z.y-fb.y)-(ya.y-fb.y)*(Z.x-fb.x);var Mc=(Ga.x-Z.x)*(Z.y-fb.y)-(Ga.y-Z.y)*(Z.x-fb.x);fb=(ya.y-fb.y)*(Ga.x-Z.x)-(ya.x-fb.x)*(Ga.y-Z.y);0!==fb?(Mc=tc/fb,tc=new pd("Intersection"),tc.points.push(new Pd(Z.x+
Mc*(Ga.x-Z.x),Z.y+Mc*(Ga.y-Z.y)))):tc=0===tc||0===Mc?new pd("Coincident"):new pd("Parallel");return tc}}]);return pd}();ig=function(){function pd(){Ca(this||P,pd)}ma(pd,null,[{key:"arc",value:function(Z,Ga,fb,ya,tc,Mc){return Sb.arc.apply(Sb,arguments)}},{key:"quadraticBezier",value:function(Z,Ga,fb,ya,tc,Mc){return Sb.quadraticBezier.apply(Sb,arguments)}},{key:"cubicBezier",value:function(Z,Ga,fb,ya,tc,Mc,Cd,Ee){return Sb.cubicBezier.apply(Sb,arguments)}},{key:"circle",value:function(Z,Ga,fb){return Sb.circle.apply(Sb,
arguments)}},{key:"ellipse",value:function(Z,Ga,fb,ya){return Sb.ellipse.apply(Sb,arguments)}},{key:"line",value:function(Z,Ga,fb,ya){return Sb.line.apply(Sb,arguments)}},{key:"path",value:function(Z){return Sb.path.apply(Sb,arguments)}},{key:"polygon",value:function(Z){return Sb.polygon.apply(Sb,arguments)}},{key:"polyline",value:function(Z){return Sb.polyline.apply(Sb,arguments)}},{key:"rectangle",value:function(Z,Ga,fb,ya){return Sb.rectangle.apply(Sb,arguments)}}]);return pd}();Vg=function(){function pd(){Ca(this||
P,pd)}ma(pd,null,[{key:"arc",value:function(Z,Ga,fb,ya,tc){return Sb.arc.apply(Sb,arguments)}},{key:"quadraticBezier",value:function(Z,Ga,fb){return Sb.quadraticBezier.apply(Sb,arguments)}},{key:"cubicBezier",value:function(Z,Ga,fb,ya){return Sb.cubicBezier.apply(Sb,arguments)}},{key:"circle",value:function(Z,Ga){return Sb.circle.apply(Sb,arguments)}},{key:"ellipse",value:function(Z,Ga,fb){return Sb.ellipse.apply(Sb,arguments)}},{key:"line",value:function(Z,Ga){return Sb.line.apply(Sb,arguments)}},
{key:"path",value:function(Z){return Sb.path.apply(Sb,arguments)}},{key:"polygon",value:function(Z){return Sb.polygon.apply(Sb,arguments)}},{key:"polyline",value:function(Z){return Sb.polyline.apply(Sb,arguments)}},{key:"rectangle",value:function(Z,Ga){return Sb.rectangle.apply(Sb,arguments)}}]);return pd}();var vg=function(){function pd(){Ca(this||P,pd)}ma(pd,null,[{key:"circle",value:function(Z){if(!1===Z instanceof SVGCircleElement)throw new TypeError("Expected SVGCircleElement, but found ".concat(Z));
var Ga=new Pd(Z.cx.baseVal.value,Z.cy.baseVal.value);return Sb.circle(Ga,Z.r.baseVal.value)}},{key:"ellipse",value:function(Z){if(!1===Z instanceof SVGEllipseElement)throw new TypeError("Expected SVGEllipseElement, but found ".concat(Z));var Ga=new Pd(Z.cx.baseVal.value,Z.cy.baseVal.value);return Sb.ellipse(Ga,Z.rx.baseVal.value,Z.ry.baseVal.value)}},{key:"line",value:function(Z){if(!1===Z instanceof SVGLineElement)throw new TypeError("Expected SVGLineElement, but found ".concat(Z));var Ga=new Pd(Z.x1.baseVal.value,
Z.y1.baseVal.value);Z=new Pd(Z.x2.baseVal.value,Z.y2.baseVal.value);return Sb.line(Ga,Z)}},{key:"path",value:function(Z){if(!1===Z instanceof SVGPathElement)throw new TypeError("Expected SVGPathElement, but found ".concat(Z));Z=Z.getAttributeNS(null,"d");return Sb.path(Z)}},{key:"polygon",value:function(Z){if(!1===Z instanceof SVGPolygonElement)throw new TypeError("Expected SVGPolygonElement, but found ".concat(Z));for(var Ga=[],fb=0;fb<Z.points.numberOfItems;fb++){var ya=Z.points.getItem(fb);Ga.push(new Pd(ya.x,
ya.y))}return Sb.polygon(Ga)}},{key:"polyline",value:function(Z){if(!1===Z instanceof SVGPolylineElement)throw new TypeError("Expected SVGPolylineElement, but found ".concat(Z));for(var Ga=[],fb=0;fb<Z.points.numberOfItems;fb++){var ya=Z.points.getItem(fb);Ga.push(new Pd(ya.x,ya.y))}return Sb.polyline(Ga)}},{key:"rect",value:function(Z){if(!1===Z instanceof SVGRectElement)throw new TypeError("Expected SVGRectElement, but found ".concat(Z));return Sb.rectangle(Z.x.baseVal.value,Z.y.baseVal.value,Z.width.baseVal.value,
Z.height.baseVal.value,Z.rx.baseVal.value,Z.ry.baseVal.value)}},{key:"element",value:function(Z){if(!1===Z instanceof SVGElement)throw new TypeError("Expected SVGElement, but found ".concat(Z));var Ga=Z.tagName;switch(Ga){case "circle":return pd.circle(Z);case "ellipse":return pd.ellipse(Z);case "line":return pd.line(Z);case "path":return pd.path(Z);case "polygon":return pd.polygon(Z);case "polyline":return pd.polyline(Z);case "rect":return pd.rect(Z);default:throw new TypeError("Unrecognized element type: '".concat(Ga,
"'"));}}}]);return pd}(),tg={pointInCircle:function(pd,Z,Ga){return Zd.fromPoints(Z,pd).length()<=Ga},pointInEllipse:function(pd,Z,Ga,fb){pd=pd.subtract(Z);return 1>=pd.x*pd.x/(Ga*Ga)+pd.y*pd.y/(fb*fb)},pointInPolyline:function(pd,Z){for(var Ga=Z.length,fb=0,ya,tc=Z[0],Mc=1;Mc<=Ga;Mc++){var Cd=Z[Mc%Ga];ya=Math.min(tc.y,Cd.y);var Ee=Math.max(tc.y,Cd.y),bf=Math.max(tc.x,Cd.x);tc.y!==Cd.y&&ya<pd.y&&pd.y<=Ee&&pd.x<=bf&&(ya=(pd.y-tc.y)*(Cd.x-tc.x)/(Cd.y-tc.y)+tc.x,(tc.x===Cd.x||pd.x<=ya)&&fb++);tc=Cd}return 1===
fb%2}};tg.pointInPolygon=tg.pointInPolyline;tg.pointInRectangle=function(pd,Z,Ga){return Z.x<=pd.x&&pd.x<Ga.x&&Z.y<=pd.y&&pd.y<Ga.y};Ea.AffineShapes=Vg;Ea.Intersection=Gg;Ea.IntersectionArgs=Sb;Ea.IntersectionQuery=tg;Ea.Matrix2D=ge;Ea.Point2D=Pd;Ea.ShapeInfo=Sb;Ea.Shapes=ig;Ea.SvgShapes=vg;Ea.Vector2D=Zd;Object.defineProperty(Ea,"__esModule",{value:!0})});pa.AffineShapes;pa.Intersection;pa.IntersectionArgs;pa.IntersectionQuery;pa.Matrix2D;pa.Point2D;pa.ShapeInfo;pa.Shapes;pa.SvgShapes;pa.Vector2D;
pa.__esModule;var wa=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js");wa.obj=kc;wa.PropertyPath=ve;wa.string=Sd;wa.num=Na;wa.arr=Cb;wa.properties=hb;wa.pt=Rc;wa.Color=ad;wa.Rectangle=Xa;wa.rect=ic;wa.signal=Ne;wa.connect=ub;wa.disconnect=Bb;wa.Morph=Dd;wa.ShadowObject=fe;wa.morph=Wb;wa.Text=dd;wa.HorizontalLayout=Od;wa.Path=ba;wa.Ellipse=M;wa.Label=jc;wa.Tooltip=dc;wa.Icon=Ed;wa.kld=pa;wa.Menu=Fc;wa.SystemTooltip=id;Fc=wa.kld;wa.Shapes=Fc.Shapes;wa.Intersection=Fc.Intersection;
(function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),Ca=ia.hasOwnProperty("LeashEndpoint")&&"function"===typeof ia.LeashEndpoint?ia.LeashEndpoint:ia.LeashEndpoint=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"dragTriggerDistance",get:function(){return this.connectedMorph?20:0}},{key:"onDragStart",value:function(w){var ma=w.state;w.state.dragDelta=
ma.lastDragPosition.subPt(ma.clickedOnPosition);w.state.endpoint=this;this.leash.onEndpointDrag(w)}},{key:"canConnectTo",value:function(w){return!w.isWorld&&!w.isHaloItem&&this.leash.canConnectTo(w)&&!w.isHighlighter&&!w.ownerChain().some(function(ma){return ma.isHaloItem})}},{key:"onDrag",value:function(w){var ma=this;if(this.connectedMorph)this.clearConnection();else{var ua=w.hand.findDropTarget(w.hand.globalPosition,[this.leash,this.leash.endPoint,this.leash.startPoint],function(ha){return ma.canConnectTo(ha)});
this.possibleTarget!=ua&&this.highlighter&&this.highlighter.deactivate();if(this.possibleTarget=ua)this.closestSide=this.possibleTarget.globalBounds().partNameNearest(wa.obj.keys(wa.Leash.connectionPoints),this.globalPosition),this.highlighter=$world.highlightMorph($world,this.possibleTarget,!1,[this.closestSide]),this.highlighter.show(),this.highlighter.get("name tag").value=this.leash.getLabelFor(this.possibleTarget)}w.state.endpoint=this;this.leash.onEndpointDrag(w)}},{key:"onDragEnd",value:function(){$world.removeHighlighters();
this.possibleTarget&&this.closestSide&&this.attachTo(this.possibleTarget,this.closestSide)}},{key:"getConnectionPoint",value:function(){var w=this.connectedMorph,ma=w.isPath,ua=w.isPolygon,ha=w.vertices,ra=w.origin;w=this.connectedMorph.globalBounds();if((ma||ua)&&"center"!=this.attachedSide){ma=ha.map(function(E){return wa.pt(E.x,E.y).addPt(ra)});ua=wa.Rectangle.unionPts(ma);var mb=ua[this.attachedSide]();ua=ua.center().addPt(ua.center().subPt(mb));ua=wa.Shapes.line(mb.x,mb.y,ua.x,ua.y);ma=wa.Shapes.polyline(ma.map(function(E){return[E.x,
E.y]}).flat());ma=wa.arr.min(wa.Intersection.intersect(ma,ua).points,function(E){return wa.pt(E.x,E.y).dist(mb)});return wa.pt(ma.x,ma.y).addPt(w.topLeft())}return w[this.attachedSide]()}},{key:"update",value:function(w){w&&!["position","extent","rotation","scale"].includes(w.prop)&&w.target!=this.connectedMorph||!this.connectedMorph||(w=this.getConnectionPoint(),w=this.leash.localize(w),this.vertex.position=w,this.relayout())}},{key:"clearConnection",value:function(){this.connectedMorph&&(wa.disconnect(this.connectedMorph,
"onChange",this,"update"),this.connectedMorph=null)}},{key:"relayout",value:function(w){var ma=this.vertex.position,ua=ma.x;ma=ma.y;var ha=this.leash.borderWidth;w&&w.meta&&w.meta.animation?this.animate({center:wa.pt(ua+ha,ma+ha),duration:w.duration}):this.center=wa.pt(ua+ha,ma+ha)}},{key:"attachTo",value:function(w,ma){this.clearConnection();this.leash.world()||this.leash.openInWorld(w.globalPosition);this.connectedMorph=w;this.attachedSide=ma;this.vertex.controlPoints=this.leash.controlPointsFor(ma,
this);this.update();wa.connect(this.connectedMorph,"onChange",this,"update")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LeashEndpoint"}},{key:"properties",get:function(){return{index:{},leash:{},nativeCursor:{defaultValue:"-webkit-grab"},attachedSide:{},connectedMorph:{},draggable:{defaultValue:!0},vertex:{after:["leash"],get:function(){return this.leash.vertices[this.index]},set:function(w){this.leash.vertices[this.index]=w;this.leash.vertices=this.leash.vertices}}}}}],ia,
{pathInPackage:function(){return"./widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:519,end:4785})})(wa.Ellipse);vc=bd("i",function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),Ca=ia.hasOwnProperty("Leash")&&"function"===typeof ia.Leash?ia.Leash:ia.Leash=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(Ca,Ea,[{key:"onMouseDown",value:function(w){this.updateEndpointStyles()}},{key:"updateEndpointStyles",value:function(){Object.assign(this.startPoint,this.getEndpointStyle(0));Object.assign(this.endPoint,this.getEndpointStyle(1));this.relayout()}},{key:"remove",value:function(){uc._get(Object.getPrototypeOf(Ca.prototype),"remove",this).call(this);this.startPoint.clearConnection();this.endPoint.clearConnection()}},{key:"onEndpointDrag",value:function(w){w.state.endpoint.vertex.position=
w.state.endpoint.vertex.position.addPt(w.state.dragDelta);this.relayout()}},{key:"getEndpointStyle",value:function(w){return Object.assign({},this.endpointStyle,{},0==w?this.endpointStyle.start:this.endpointStyle.end)}},{key:"endpoint",value:function(w){var ma=this.vertices[w];return new wa.LeashEndpoint({index:w,leash:this,position:wa.pt(ma.x,ma.y)})}},{key:"controlPointsFor",value:function(w,ma){w=wa.Leash.connectionPoints[w];w=ma==this.startPoint?w.negated():w;return{previous:w.scaleBy(100),next:w.negated().scaleBy(100)}}},
{key:"relayout",value:function(w){if(!w||["vertices","position"].includes(w.prop))this.startPoint.relayout(w),this.endPoint.relayout(w)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Leash"}},{key:"connectionPoints",get:function(){return{topCenter:wa.pt(0,-1),topLeft:wa.pt(-1,-1),rightCenter:wa.pt(1,0),bottomRight:wa.pt(1,1),bottomCenter:wa.pt(0,1),bottomLeft:wa.pt(-1,1),leftCenter:wa.pt(-1,0),topRight:wa.pt(1,-1),center:wa.pt(0,0)}}},{key:"properties",get:function(){return{start:{defaultValue:wa.pt(0,
0)},end:{defaultValue:wa.pt(0,0)},canConnectTo:{defaultValue:function(w){return!0}},getLabelFor:{defaultValue:function(w){return w.name}},reactsToPointer:{defaultValue:!1},acceptsDroppedMorphs:{defaultValue:!1},direction:{type:"Enum",values:["unidirectional","outward","inward"],defaultValue:"unidirectional"},endpointStyle:{isStyleProp:!0,defaultValue:{fill:wa.Color.black,origin:wa.pt(3.5,3.5),extent:wa.pt(10,10),nativeCursor:"-webkit-grab"}},borderWidth:{defaultValue:2},borderColor:{defaultValue:wa.Color.black},
fill:{defaultValue:wa.Color.transparent},vertices:{after:["start","end","borderWidth"],initialize:function(){this.vertices=[this.start,this.end]}},submorphs:{initialize:function(){this.submorphs=[this.startPoint=this.endpoint(0),this.endPoint=this.endpoint(1)];wa.connect(this,"onChange",this,"relayout");this.updateEndpointStyles()}}}}}],ia,{pathInPackage:function(){return"./widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:4794,end:7809})}(wa.Path));wa.Leash=vc;wa.Leash=vc;We=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),Ca=ia.hasOwnProperty("Slider")&&"function"===typeof ia.Slider?ia.Slider:ia.Slider=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"normalize",value:function(w){return Math.abs(w/
(this.max-this.min))}},{key:"update",value:function(){var w=(this.width-15)*this.normalize(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.value);this.getSubmorphNamed("slideHandle").center=wa.pt(w+7.5,10)}},{key:"onSlide",value:function(w,ma){w=wa.num.roundTo(this.value+ma.x/this.width,.01);this.value=w=Math.max(this.min,Math.min(this.max,w));this.update(w)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Slider"}},{key:"properties",get:function(){return{value:{},min:{},
max:{},height:{defaultValue:20},fill:{defaultValue:wa.Color.transparent},draggable:{defaultValue:!1},submorphs:{after:["value","max","min"],initialize:function(){var w=new wa.SliderHandle({slider:this,name:"slideHandle"});this.submorphs=[new wa.Path({borderColor:wa.Color.gray.darker(),borderWidth:2,vertices:[wa.pt(0,0),wa.pt(this.width,0)],position:wa.pt(0,this.height/2)}),w];wa.connect(this,"extent",this,"update");this.update()}}}}}],ia,{pathInPackage:function(){return"./widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:7817,end:9143})}(wa.Morph);wa.Slider=We;wa.Slider=We;(function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),Ca=ia.hasOwnProperty("SliderHandle")&&"function"===typeof ia.SliderHandle?ia.SliderHandle:ia.SliderHandle=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return uc(Ca,Ea,[{key:"onDragStart",value:function(w){this.valueView=(new wa.Tooltip({description:""})).openInWorld(w.hand.position.addXY(10,10))}},{key:"onDrag",value:function(w){this.slider.onSlide(this,w.state.dragDelta);this.valueView.description=this.slider.value;this.valueView.position=w.hand.position.addXY(10,10)}},{key:"onDragEnd",value:function(w){this.valueView.remove()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"SliderHandle"}},{key:"properties",get:function(){return{slider:{},
fill:{defaultValue:wa.Color.gray},borderColor:{defaultValue:wa.Color.gray.darker()},borderWidth:{defaultValue:1},dropShadow:{defaultValue:new wa.ShadowObject({blur:5})},extent:{defaultValue:wa.pt(15,15)},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0}}}}],ia,{pathInPackage:function(){return"./widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",
version:"0.1.0"}}},{start:9145,end:10092})})(wa.Ellipse);xe=bd("V",function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),Ca=ia.hasOwnProperty("ValueScrubber")&&"function"===typeof ia.ValueScrubber?ia.ValueScrubber:ia.ValueScrubber=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"relayout",value:function(){var w=this;this.withMetaDo({metaInteraction:!0},
function(){w.scaleToBounds&&(w.scale=Math.min(1,w.width/(w.textBounds().width+0)))})}},{key:"onKeyDown",value:function(w){uc._get(Object.getPrototypeOf(Ca.prototype),"onKeyDown",this).call(this,w);if("Enter"==w.keyCombo){var ma=this.textString.replace("\n","").split(" ");ma=sb(ma,2);var ua=ma[0];ma[1];"string"===typeof ua&&(this.value=parseFloat(ua),this.scrub(this.scrubbedValue));w.stop()}}},{key:"scrub",value:function(w){this.field.update(w)}},{key:"onDragStart",value:function(w){this.execCommand("toggle active mark");
this.initPos=w.position;this.factorLabel=(new wa.Tooltip({master:wa.SystemTooltip,description:"1x"})).openInWorld(w.hand.position.addXY(10,10));w.hand.extent=wa.pt(30,30);w.hand.nativeCursor="ew-resize";w.hand.fill=wa.Color.transparent;w.hand.reactsToPointer=!0}},{key:"getScaleAndOffset",value:function(w){var ma=w.position.subPt(this.initPos);w=ma.x;ma=wa.num.roundTo(Math.exp(-ma.y/$world.height*4),.01)*this.baseFactor;return{offset:w,scale:ma}}},{key:"onDrag",value:function(w){var ma=this.getScaleAndOffset(w),
ua=ma.scale;ma=this.getCurrentValue(ma.offset,ua);this.scrub(ma);ma=this.floatingPoint?ma.toFixed(this.precision):wa.obj.safeToString(ma);this.unit&&(ma+=" "+this.unit);this.replace(this.documentRange,ma,!1,this.scaleToBounds,!1,!1);this.factorLabel.description=ua.toFixed(this.precision)+"x";this.factorLabel.position=w.hand.position.addXY(10,10);w.hand.moveBy(wa.pt(-5,-5));this.relayout()}},{key:"getCurrentValue",value:function(w,ma){return Math.max(this.min,Math.min(this.max,this.scrubbedValue+(this.floatingPoint?
w*ma:Math.round(w*ma))))}},{key:"onDragEnd",value:function(w){var ma=this.getScaleAndOffset(w);this.value=this.getCurrentValue(ma.offset,ma.scale);this.factorLabel.softRemove();w.hand.extent=wa.pt(1,1);w.hand.fill=wa.Color.orange;w.hand.reactsToPointer=!1}},{key:"value",set:function(w){this.scrubbedValue=w=Math.max(this.min,Math.min(this.max,w));w=this.floatingPoint?w.toFixed(this.precision):wa.obj.safeToString(w);w=this.unit?w+(" "+this.unit):w+"";this.replace(this.documentRange,w,!1,!0);this.relayout()}}],
[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ValueScrubber"}},{key:"properties",get:function(){return{scaleToBounds:{defaultValue:!1,set:function(w){this.fixedWidth=!0;this.setProperty("scaleToBounds",w)}},field:{derived:!0,get:function(){return this.owner}},value:{defaultValue:0},fill:{defaultValue:wa.Color.transparent},draggable:{defaultValue:!0},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},baseFactor:{defaultValue:1},floatingPoint:{defaultValue:!1},precision:{defaultValue:3}}}}],
ia,{pathInPackage:function(){return"./widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:10101,end:13614})}(wa.Text));wa.ValueScrubber=xe;wa.ValueScrubber=xe;Fc=function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),Ca=ia.hasOwnProperty("CheckBox")&&"function"===typeof ia.CheckBox?
ia.CheckBox:ia.CheckBox=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"trigger",value:function(){try{this.checked=!this.checked,wa.signal(this,"toggle",this.checked)}catch(ma){var w=this.world();w?w.logError(ma):console.error(ma)}}},{key:"onMouseDown",value:function(w){this.active&&this.trigger()}},{key:"render",value:function(w){return w.renderCheckBox(this)}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"CheckBox"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},extent:{defaultValue:wa.pt(15,15)},borderWidth:{defaultValue:0},active:{defaultValue:!0},checked:{defaultValue:!1},fill:{defaultValue:wa.Color.transparent},nativeCursor:{defaultValue:"pointer"}}}}],ia,{pathInPackage:function(){return"./widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",
version:"0.1.0"}}},{start:13622,end:14456})}(wa.Morph);wa.CheckBox=Fc;wa.CheckBox=Fc;Fg=bd("d",function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),Ca=ia.hasOwnProperty("LabeledCheckBox")&&"function"===typeof ia.LabeledCheckBox?ia.LabeledCheckBox:ia.LabeledCheckBox=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"disable",value:function(){this.active=
!1;this.labelMorph.opacity=.5}},{key:"enable",value:function(){this.active=!0;this.labelMorph.opacity=1}},{key:"trigger",value:function(){this.checkboxMorph.trigger()}},{key:"onMouseDown",value:function(w){this.active&&this.trigger();w.stop()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LabeledCheckBox"}},{key:"example",value:function(){(new wa.LabeledCheckBox({label:"foo"})).openInWorld()}},{key:"properties",get:function(){return{name:{defaultValue:"LabeledCheckBox"},alignCheckBox:{defaultValue:"left",
type:"Enum",values:["left","right"],set:function(w){this.layout=new wa.HorizontalLayout({direction:"left"==w?"leftToRight":"rightToLeft"});this.setProperty("alignCheckBox",w)}},layout:{initialize:function(){this.layout=new wa.HorizontalLayout({direction:"left"==this.alignCheckBox?"leftToRight":"rightToLeft"})}},label:{defaultValue:"label",after:["submorphs"],derived:!0,get:function(){return this.labelMorph.value},set:function(w){this.labelMorph.value=w}},checked:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.checked},
set:function(w){this.checkboxMorph.checked=w;wa.signal(this,"checked",w)}},active:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.active},set:function(w){this.checkboxMorph.active=w}},labelMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("label")}},checkboxMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("checkbox")}},submorphs:{initialize:function(){this.submorphs=[new wa.CheckBox({name:"checkbox"}),new wa.Label({nativeCursor:"pointer",
name:"label",padding:wa.Rectangle.inset(5,3)})];wa.connect(this,"alignCheckBox",this,"extent");wa.connect(this.checkboxMorph,"checked",this,"checked")}}}}}],ia,{pathInPackage:function(){return"./widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:14464,end:17021})}(wa.Morph));wa.LabeledCheckBox=Fg;wa.LabeledCheckBox=Fg;
ti=bd("e",function(Ea){var ia=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),Ca=ia.hasOwnProperty("DropDownSelector")&&"function"===typeof ia.DropDownSelector?ia.DropDownSelector:ia.DropDownSelector=function(w){if(!w||!w[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return uc(Ca,Ea,[{key:"build",value:function(){this.dropDownLabel=wa.Icon.makeLabel("chevron-circle-down",{opacity:0,name:"dropDownIcon"});
this.submorphs=[{type:"label",name:"currentValue"},this.dropDownLabel]}},{key:"getMenuEntries",value:function(){var w=this,ma=this.getNameFor(this.selectedValue);return[].concat(fa(void 0!=this.selectedValue?[{command:ma,target:this}]:[]),fa(wa.arr.compact(this.commands.map(function(ua){return ua.name!=ma&&{command:ua.name,target:w}}))))}},{key:"commands",get:function(){var w=this;return wa.obj.isArray(this.values)?this.values.map(function(ma){return{name:String(ma),exec:function(){wa.signal(w,"update",
ma);w.selectedValue=ma}}}):wa.properties.forEachOwn(this.values,function(ma,ua){return{name:ma,exec:function(){wa.signal(w,"update",ua);w.selectedValue=ua}}})}},{key:"getNameFor",value:function(w){return this.getCurrentValue?this.getCurrentValue():wa.obj.isArray(this.values)?wa.obj.safeToString(w):wa.obj.safeToString(wa.properties.nameFor(this.values,w))}},{key:"relayout",value:function(){var w=this.getNameFor(this.selectedValue),ma=this.get("currentValue");"undefined"==w?(ma.value="Not set",ma.fontColor=
wa.Color.gray):(ma.value=w,ma.fontColor=wa.Color.black)}},{key:"onHoverIn",value:function(){this.dropDownLabel.animate({opacity:1,duration:300})}},{key:"onHoverOut",value:function(){this.dropDownLabel.animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(w){var ma=this.env.eventDispatcher.eventState;ma.menu&&ma.menu.remove();ma.menu=this.getMenuEntries()&&this.getMenuEntries().length?wa.Menu.openAtHand(this.getMenuEntries(),{hand:w&&w.hand}):null;this.menu=ma.menu;this.menu.hasFixedPosition=
!0;this.menu.topLeft=this.globalPosition}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DropDownSelector"}},{key:"properties",get:function(){return{values:{defaultValue:[]},getCurrentValue:{defaultValue:void 0},selectedValue:{after:["submorphs","values","getCurrentValue"],set:function(w){this.setProperty("selectedValue",w);this.relayout()}},fontColor:{isStyleProp:!0,defaultValue:wa.Color.black},fontSize:{isStyleProp:!0,defaultValue:12},fontFamily:{isStyleProp:!0,defaultValue:"Sans-Serif"},
border:{defaultValue:{radius:3,color:wa.Color.gray.darker(),style:"solid"}},padding:{defaultValue:1},isSelected:{defaultValue:"false",set:function(w){this.setProperty("isSelected",w);this.fontColor=w?wa.Color.white:wa.Color.black}},layout:{initialize:function(){this.layout=new wa.HorizontalLayout({spacing:this.padding})}},submorphs:{initialize:function(){this.build()}}}}}],ia,{pathInPackage:function(){return"./widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:17029,end:20723})}(wa.Morph));wa.DropDownSelector=ti;wa.DropDownSelector=ti;vc=Object.freeze({__proto__:null,Leash:vc,Slider:We,ValueScrubber:xe,CheckBox:Fc,LabeledCheckBox:Fg,DropDownSelector:ti,SearchField:void 0});We=window.lively.FreezerRuntime.recorderFor("lively.components/index.js");Object.assign(We,Pc);Object.assign(We,Rb);Object.assign(We,Kd);Object.assign(We,Qc);Object.assign(We,kb);Object.assign(We,Cc);We.Window=
Le;We.prompts=Id;We.widgets=vc;We.LoadingIndicator=yc;We.addClassMappings=la;We.List=tb;We.DropDownList=xc;We.Button=Fb;We.CheckBox=Fc;We.addClassMappings({list:We.List,dropdownlist:We.DropDownList,button:We.Button,checkbox:We.CheckBox,labeledcheckbox:We.widgets.LabeledCheckBox});We.Window=Le;We.LoadingIndicator=yc;We.prompts=Id;We.widgets=vc;bd("_",void 0)}}});