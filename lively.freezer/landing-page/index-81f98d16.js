System.register("./__rootModule___commonjs-entry-51a55f66.js ./index-61952933.js ./editor-plugin-80c3c4f5.js ./editor-modes-aae4d878.js ./editor-plugin-0f29b6cf.js ./eval-backend-ui-b51e822c.js ./top-bar.cp-fa0cb96d.js ./test-runner-15eee9f1.js ./index-616023be.js ./ui.cp-8dfc076f.js ./index-42118cd5.js ./linter-96a9a2d8.js ./editor-plugin-5397d87c.js ./mode-3092ef0b.js ./list.cp-840d1cf8.js ./loading-indicator.cp-98e470a2.js".split(" "),function(bd,Dd){var se,Rc,ad,Ne,Cb,Sd,ve,uc,dd,vd,Ed,fe,jc,
Od,qb,ic,Wb,lc,db,Xa,Gb,sc,ub,sb,fa,Db,ab,eb,kc,Vb,pb,Nb,zb,rb,Ib,da,ka,va,Fa,M,Aa,wb,Na,hb,Bb,ba,dc,la,Fb,vb,Ia,xb,Rb,yc,id,ob,Pb,tb,xc,Pc,nd,Id,Hb,Kd,vc,Qc,kb,Cc,zc;return{setters:[function(Fc){se=Fc.C;Rc=Fc.r;ad=Fc.b;Ne=Fc.H;Cb=Fc.aD;Sd=Fc.p;ve=Fc.c;uc=Fc.aG;dd=Fc.aa;vd=Fc.d;Ed=Fc.s;fe=Fc.i;jc=Fc._;Od=Fc.m;qb=Fc.N;ic=Fc.K;Wb=Fc.k;lc=Fc.$;db=Fc.br;Xa=Fc.u;Gb=Fc.aK;sc=Fc.w;ub=Fc.f;sb=Fc.ar;fa=Fc.bU;Db=Fc.t;ab=Fc.ag;eb=Fc.M;kc=Fc.l;Vb=Fc.bV;pb=Fc.a9;Nb=Fc.ak;zb=Fc.b3;rb=Fc.aj;Ib=Fc.v;da=Fc.a;ka=Fc.e;
va=Fc.F;Fa=Fc.bW;M=Fc.aV;Aa=Fc.bX;wb=Fc.ao;Na=Fc.G},function(Fc){hb=Fc.T},function(Fc){Bb=Fc["default"]},function(Fc){ba=Fc.getMode;dc=Fc.passIndent;la=Fc.defineMode;Fb=Fc.defineMIME;vb=Fc.registerHelper;Ia=Fc.startState;xb=Fc.copyState;Rb=Fc.innerMode;yc=Fc.findModeByName;id=Fc.tokenizeDocument},function(Fc){ob=Fc.H},function(Fc){Pb=Fc["default"]},function(Fc){tb=Fc.i},function(Fc){xc=Fc.testsFromSource},function(Fc){Pc=Fc.a},function(Fc){nd=Fc.c;Id=Fc.D},function(Fc){Hb=Fc.serverInterfaceFor;Kd=
Fc.localInterface},function(Fc){vc=Fc.l},function(Fc){Qc=Fc.CodeMirrorEnabledEditorPlugin},function(Fc){kb=Fc.S},function(Fc){Cc=Fc.a},function(Fc){zc=Fc.L}],execute:function(){function Fc(){Fc=jc(regeneratorRuntime.mark(function lb(ca){var S;return regeneratorRuntime.wrap(function(Ra){for(;;)switch(Ra.prev=Ra.next){case 0:return Ra.next=2,Zd.resource(ca).dirList();case 2:return Ra.t0=function(Da){return Da.isDirectory()||Zd.editableFiles.includes(Da.ext())},S=Ra.sent.filter(Ra.t0),Ra.abrupt("return",
S.map(function(Da){var Ja=Da.isDirectory()?"directory":Da.ext();return{isCollapsed:!0,name:Da.name(),size:Da.size,lastModified:Da.lastModified,url:Da.url,type:Ja}}));case 5:case "end":return Ra.stop()}},lb)}));return Fc.apply(this,arguments)}function xd(G){"ObjectExpression"===G.type&&(G.children=G.properties.map(function(ca){return xd(ca)}));G.value&&"ObjectExpression"===G.value.type&&(G.children=G.value.properties.map(function(ca){return xd(ca)}));"ArrayExpression"===G.type&&(G.children=G.elements.map(function(ca){return xd(ca)}));
G.value&&"ArrayExpression"===G.value.type&&(G.children=G.value.elements.map(function(ca){return xd(ca)}));G.key?(G.start=G.key.start-13,G.end-=13,G.name=G.key.value,G.type="ObjectExpression"===G.value.type?"object-decl":"ArrayExpression"===G.value.type?"array-decl":"Literal"):(G.start-=13,G.end-=13,G.name=G.value);G.isDeclaration=!0;G.isCollapsed=!0;G.name||(G.name="[ANONYMOUS OBJECT]");return G}function Uc(){Uc=jc(regeneratorRuntime.mark(function lb(ca){var S,Ra,Da,Ja,Pa,Za;return regeneratorRuntime.wrap(function(Zb){for(;;)switch(Zb.prev=
Zb.next){case 0:return Zb.next=2,Zd.resource(ca).read();case 2:S=Zb.sent;Ra=Zd.parse("const test = "+S);Da=Ra.body[0].declarations[0].init.properties;Ja=qb(Da);try{for(Ja.s();!(Pa=Ja.n()).done;)Za=Pa.value,Zd.transformJSONNode(Za)}catch(Vc){Ja.e(Vc)}finally{Ja.f()}return Zb.abrupt("return",Da);case 8:case "end":return Zb.stop()}},lb)}));return Uc.apply(this,arguments)}function Md(){Md=jc(regeneratorRuntime.mark(function lb(ca){var S,Ra;return regeneratorRuntime.wrap(function(Da){for(;;)switch(Da.prev=
Da.next){case 0:return S="https://registry.npmjs.com/-/v1/search?text=".concat(ca,"&size=50"),Da.next=3,pf.resource(S).makeProxied().readJson();case 3:return Ra=Da.sent,Da.abrupt("return",Ra.objects.map(function(Ja){Ja.searchScore;var Pa=Ja["package"],Za=Pa.version;return{isListItem:!0,string:"".concat(Pa.name,"@").concat(Za),value:Ja}}));case 5:case "end":return Da.stop()}},lb)}));return Md.apply(this,arguments)}function Ob(G){return new Re.Context(Re.copyState(G.mode,G.state),G.mode,G.depth,G.prev&&
Ob(G.prev))}function Le(G){function ca(Ja,Pa,Za){return lb.apply(this,arguments)}function lb(){lb=jc(regeneratorRuntime.mark(function Vc(Pa,Za,Zb){var Jc;return regeneratorRuntime.wrap(function(cd){for(;;)switch(cd.prev=cd.next){case 0:if(Jc=Pa.get("test runner window")){cd.next=5;break}cd.next=4;return Da.execCommand("open test runner");case 4:Jc=cd.sent;case 5:return Jc.minimized&&Jc.toggleMinimize(),Jc.bringToFront(),Jc=Jc.getWindow().targetMorph,Jc.systemInterface!==Pa.systemInterface&&(Jc.systemInterface=
Pa.systemInterface),cd.abrupt("return",Zb?Jc["suite"===Zb.type?"runSuite":"runTest"](Zb.fullTitle):Jc.runTestFile(Za));case 10:case "end":return cd.stop()}},Vc)}));return lb.apply(this,arguments)}function S(Ja,Pa){return Ra.apply(this,arguments)}function Ra(){Ra=jc(regeneratorRuntime.mark(function Zb(Pa,Za){var Vc;return regeneratorRuntime.wrap(function(Jc){for(;;)switch(Jc.prev=Jc.next){case 0:if(Vc=Pa.get("test runner window")){Jc.next=5;break}Jc.next=4;return Da.execCommand("open test runner");
case 4:Vc=Jc.sent;case 5:return Vc.minimized&&Vc.toggleMinimize(),Vc=Vc.getWindow().targetMorph,Vc.systemInterface!==Pa.systemInterface&&(Vc.systemInterface=Pa.systemInterface),Jc.abrupt("return",Vc.runTestsInPackage(Za));case 9:case "end":return Jc.stop()}},Zb)}));return Ra.apply(this,arguments)}var Da=G.world();return[{name:"focus list with selection",exec:function(){return G.focusColumnView()}},{name:"open new tab",exec:function(){var Ja=jc(regeneratorRuntime.mark(function Za(){var Zb;return regeneratorRuntime.wrap(function(Vc){for(;;)switch(Vc.prev=
Vc.next){case 0:if(!G.hasUnsavedChanges()){Vc.next=6;break}Vc.next=3;return G.warnForUnsavedChanges();case 3:if(Zb=Vc.sent){Vc.next=6;break}return Vc.abrupt("return");case 6:G.ui.tabs.addTab("New Browser Tab");case 7:case "end":return Vc.stop()}},Za)}));return function(){return Ja.apply(this,arguments)}}()},{name:"focus source editor",exec:function(){G.focusSourceEditor();return!0}},{name:"resize editor panel",exec:function(){var Ja=G.ui.hresizer,Pa=Ja.getRelativeDivide();Ja.divideRelativeToParent(.39<
Pa?.15:.4);return!0}},{name:"browser history backward",exec:function(Ja){Ja.historyBackward();return!0}},{name:"browser history forward",exec:function(Ja){Ja.historyForward();return!0}},{name:"browser save",exec:function(Ja){return Ja.save()}},{name:"jump to codeentity",exec:function(){var Ja=jc(regeneratorRuntime.mark(function Zb(Za){var Vc,Jc,cd,sd,Pe,gf,ag;return regeneratorRuntime.wrap(function(Af){for(;;)switch(Af.prev=Af.next){case 0:Vc=Za.editorPlugin.textMorph;if(!Za.isTestModule(Vc.textString)){Af.next=
3;break}return Af.abrupt("return",Za.execCommand("jump to test"));case 3:if(!Hd.isMarkdown(Za.selectedModule)){Af.next=5;break}return Af.abrupt("return",Vc.execCommand("[markdown] goto heading"));case 5:return Jc=Za.renderedCodeEntities(),cd=Jc.map(function(ph){return ph.name}).indexOf(Za.selectedCodeEntity&&Za.selectedCodeEntity.name),sd=Jc.map(function(ph){var Ug=ph.name,$i=ph.type,rh=ph.parent;return{isListItem:!0,label:["".concat(rh?rh.name+">>":"").concat(Ug),null,"".concat($i),{fontSize:"70%",
textStyleClasses:["annotation"]}],value:ph}}),Af.next=10,Za.world().filterableListPrompt("Select item",sd,{preselect:cd,requester:Za,historyId:"js-browser-codeentity-jump-hist"});case 10:Pe=Af.sent;gf=ic(Pe.selected,1);if(ag=gf[0])Vc.saveMark(),Za.selectCodeEntity(ag);return Af.abrupt("return",!0);case 15:case "end":return Af.stop()}},Zb)}));return function(Za){return Ja.apply(this,arguments)}}()},{name:"jump to test",exec:function(){var Ja=jc(regeneratorRuntime.mark(function Zb(Za){var Vc,Jc,cd,
sd,Pe,gf,ag,Af,ph,Ug,$i,rh,Ah,hk,tk,Zl;return regeneratorRuntime.wrap(function(Ph){for(;;)switch(Ph.prev=Ph.next){case 0:Vc=Za.selectedModule;Jc=Za.editorPlugin.textMorph;if(Vc){Ph.next=3;break}return Ph.abrupt("return",!0);case 3:return cd=Jc.textString,sd=[],Pe=[],gf=cd.split("\n"),ag=Jc.cursorPosition.row,Af=0,Ph.next=11,Dd.import("mocha-es6");case 11:return ph=Ph.sent,Ug=ph.loadTestModuleAndExtractTestState,Ph.next=15,Ug(Vc.url,Pe);case 15:$i=Pe[0].tests.filter(function(vl){return vl.fullTitle});
rh=function(vl){var Uj=$i[vl],$l=Uj.depth,Wk=Uj.fullTitle,Ie=Uj.title,ce=Uj.type,Xg="suite"===ce?"describe":"it",Ld=Uj.row=gf.findIndex(function(Ff){return Ff.match(new RegExp("".concat(Xg,'.*".*').concat(Ie,'.*"')))});Ld<=ag&&(Af=vl);sd.push({isListItem:!0,value:Uj,label:["".concat("\u2002".repeat($l-1)).concat(Wk),null,"line ".concat(Ld," ").concat(ce),{fontSize:"70%",textStyleClasses:["annotation"]}]})};for(Ah=0;Ah<$i.length;Ah++)rh(Ah);Ph.next=20;return Za.world().filterableListPrompt("tests of ".concat(Vc.nameInPackage),
sd,{requester:Za,preselect:Af});case 20:hk=Ph.sent;tk=ic(hk.selected,1);if(Zl=tk[0])Jc.saveMark(),Jc.cursorPosition={row:Zl.row,column:0},Jc.execCommand("goto line start"),Jc.centerRow(Zl.row);return Ph.abrupt("return",!0);case 25:case "end":return Ph.stop()}},Zb)}));return function(Za){return Ja.apply(this,arguments)}}()},{name:"browser history browse",exec:function(Ja){return Ja.interactivelyBrowseHistory()}},{name:"open code search",exec:function(Ja){return Ja.world().execCommand("open code search",
{browser:Ja})}},{name:"choose and browse package resources",exec:function(Ja){return Ja.world().execCommand("choose and browse package resources",{browser:Ja})}},{name:"choose and browse module",exec:function(Ja){return Ja.world().execCommand("choose and browse module",{browser:Ja})}},{name:"reload module",exec:function(){var Ja=jc(regeneratorRuntime.mark(function Zb(Za){var Vc,Jc,cd=arguments;return regeneratorRuntime.wrap(function(sd){for(;;)switch(sd.prev=sd.next){case 0:return Vc=1<cd.length&&
void 0!==cd[1]?cd[1]:{hard:!1},sd.next=3,G.reloadModule(Vc.hard);case 3:if(Jc=sd.sent){sd.next=6;break}return sd.abrupt("return",G.world().inform("No module selected",{requester:G}));case 6:if(!(Jc instanceof Error)){sd.next=8;break}return sd.abrupt("return",G.world().inform(Jc.message,{requester:G}));case 8:return G.setStatusMessage("Reloaded ".concat(Jc.name)),sd.abrupt("return",!0);case 10:case "end":return sd.stop()}},Zb)}));return function(Za){return Ja.apply(this,arguments)}}()},{name:"load or add module",
exec:function(){var Ja=jc(regeneratorRuntime.mark(function Zb(Za){var Vc,Jc,cd,sd;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Vc=Za.selectedPackage,Jc=Za.selectedModule,cd=Za.systemInterface,Pe.prev=4,Pe.next=7,cd.interactivelyAddModule(Za,Jc?Jc.name:Vc?Vc.address:null);case 7:sd=Pe.sent;Pe.next=14;break;case 10:return Pe.prev=10,Pe.t0=Pe["catch"](4),"Canceled"===Pe.t0?Za.setStatusMessage(Pe.t0):Za.world().inform("Error while trying to load modules:\n".concat(Pe.t0.stack||
Pe.t0),{requester:Za}),Pe.abrupt("return");case 14:return sd.forEach(function(gf){var ag=gf.name;return(gf=gf.error)?Za.showError("Error while loading module ".concat(ag,": ").concat(gf.stack||gf)):Za.setStatusMessage("Module ".concat(ag," loaded"))}),Pe.next=17,Za.updateModuleList(Vc);case 17:return sd.length&&Za.selectModuleNamed(sd[0].name),Pe.abrupt("return",!0);case 19:case "end":return Pe.stop()}},Zb,null,[[4,10]])}));return function(Za){return Ja.apply(this,arguments)}}()},{name:"create new folder",
exec:function(){var Ja=jc(regeneratorRuntime.mark(function Zb(Za){var Vc,Jc,cd=arguments;return regeneratorRuntime.wrap(function(sd){for(;;)switch(sd.prev=sd.next){case 0:return Vc=1<cd.length&&void 0!==cd[1]?cd[1]:{},Jc=Vc.dir,sd.next=4,Za.interactivelyCreateNewFolder(Jc);case 4:return sd.abrupt("return",sd.sent);case 5:case "end":return sd.stop()}},Zb)}));return function(Za){return Ja.apply(this,arguments)}}()},{name:"create new module",exec:function(){var Ja=jc(regeneratorRuntime.mark(function Zb(Za){var Vc,
Jc,cd,sd=arguments;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Vc=1<sd.length&&void 0!==sd[1]?sd[1]:{},Jc=Vc.dir,cd=Vc.type,Pe.next=4,Za.interactivelyAddNewModule(Jc,cd);case 4:return Pe.abrupt("return",Pe.sent);case 5:case "end":return Pe.stop()}},Zb)}));return function(Za){return Ja.apply(this,arguments)}}()},{name:"remove selected entity",exec:function(Ja){return Ja.interactivelyRemoveSelectedItem((1<arguments.length&&void 0!==arguments[1]?arguments[1]:
{}).dir)}},{name:"remove module",exec:function(){var Ja=jc(regeneratorRuntime.mark(function Zb(Za){var Vc,Jc,cd,sd,Pe=arguments;return regeneratorRuntime.wrap(function(gf){for(;;)switch(gf.prev=gf.next){case 0:Vc=1<Pe.length&&void 0!==Pe[1]?Pe[1]:{};Jc=Za.selectedPackage;cd=Vc.mod||Za.selectedModule;sd=Za.systemInterface;if(Jc){gf.next=6;break}return gf.abrupt("return",Za.world().inform("No package selected",{requester:Za}));case 6:if(cd){gf.next=8;break}return gf.abrupt("return",Za.world().inform("No module selected",
{requester:Za}));case 8:return gf.prev=8,gf.next=11,sd.interactivelyRemoveModule(Za,cd.url||cd.name||cd.id);case 11:gf.next=17;break;case 13:return gf.prev=13,gf.t0=gf["catch"](8),"Canceled"!==gf.t0&&Za.showError("Error while trying to load modules:\n".concat(gf.t0.stack||gf.t0)),gf.abrupt("return",!0);case 17:return gf.next=19,Za.updateModuleList(cd);case 19:return gf.abrupt("return",!0);case 20:case "end":return gf.stop()}},Zb,null,[[8,13]])}));return function(Za){return Ja.apply(this,arguments)}}()},
{name:"add package",exec:function(){var Ja=jc(regeneratorRuntime.mark(function Zb(Za){var Vc,Jc,cd;return regeneratorRuntime.wrap(function(sd){for(;;)switch(sd.prev=sd.next){case 0:return sd.next=2,Za.world().multipleChoicePrompt("Add Package",{requester:Za,choices:new Map([[[].concat(Od(Hd.Icon.textAttribute("cube")),[" Create New Package",{}]),"Create New Package"],[[].concat(Od(Hd.Icon.textAttribute("external-link-alt")),[" Load Existing Package",{}]),"Load Existing Package"]])});case 2:if((Vc=
sd.sent)&&"Cancel"!==Vc){sd.next=5;break}return sd.abrupt("return",!0);case 5:sd.prev=5;cd=Za.systemInterface;if("Create New Package"!==Vc){sd.next=13;break}sd.next=10;return cd.interactivelyCreatePackage(Za);case 10:sd.t0=sd.sent;sd.next=16;break;case 13:return sd.next=15,cd.interactivelyLoadPackage(Za,Za.selectedPackage?Za.selectedPackage.address:null);case 15:sd.t0=sd.sent;case 16:Jc=sd.t0;sd.next=26;break;case 19:sd.prev=19;sd.t1=sd["catch"](5);if("Canceled"!==sd.t1){sd.next=24;break}sd.next=
25;break;case 24:throw sd.t1;case 25:return sd.abrupt("return",!0);case 26:return sd.next=28,Za.selectPackageNamed(Jc.name,!0);case 28:return sd.abrupt("return",!0);case 29:case "end":return sd.stop()}},Zb,null,[[5,19]])}));return function(Za){return Ja.apply(this,arguments)}}()},{name:"remove package",exec:function(){var Ja=jc(regeneratorRuntime.mark(function Zb(Za){var Vc;return regeneratorRuntime.wrap(function(Jc){for(;;)switch(Jc.prev=Jc.next){case 0:if(Vc=Za.selectedPackage){Jc.next=4;break}Za.world().inform("No package selected",
{requester:Za});return Jc.abrupt("return",!0);case 4:return Jc.prev=4,Jc.next=7,Za.systemInterface.interactivelyRemovePackage(Za,Vc.address);case 7:Jc.next=14;break;case 9:Jc.prev=9;Jc.t0=Jc["catch"](4);if("Canceled"===Jc.t0){Jc.next=13;break}throw Jc.t0;case 13:return Jc.abrupt("return",!0);case 14:return Jc.next=16,Za.selectPackageNamed(null,!0);case 16:return Jc.abrupt("return",!0);case 17:case "end":return Jc.stop()}},Zb,null,[[4,9]])}));return function(Za){return Ja.apply(this,arguments)}}()},
{name:"show imports and exports of package",exec:function(){var Ja=jc(regeneratorRuntime.mark(function Zb(Za){var Vc,Jc,cd,sd,Pe;return regeneratorRuntime.wrap(function(gf){for(;;)switch(gf.prev=gf.next){case 0:return Vc=Za.systemInterface,gf.next=3,Vc.getPackages();case 3:return Jc=gf.sent,cd=Jc.map(function(ag){return{isListItem:!0,label:["".concat(ag.name),null,"".concat(ag.url),{fontSize:"70%",textStyleClasses:["annotation"]}],value:ag}}),gf.next=7,Za.world().filterableListPrompt("Choose package(s)",
cd,{multiselect:!0,requester:Za,historyId:"lively.ide.js-browser-choose-package-for-showing-export-imports-hist"});case 7:return sd=gf.sent,Pe=sd.selected,gf.next=11,Promise.all(Pe.map(function(ag){return Vc.showExportsAndImportsOf(ag.url)}));case 11:return gf.abrupt("return",!0);case 12:case "end":return gf.stop()}},Zb)}));return function(Za){return Ja.apply(this,arguments)}}()},{name:"open browse snippet",exec:function(Ja){return Ja.world().execCommand("open workspace",{content:Ja.browseSnippetForSelection(),
language:"javascript"})}},{name:"open selected module in text editor",exec:function(Ja){var Pa=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Za=Pa.module||Ja.selectedModule;Pa=Pa.hasOwnProperty("codeEntity")?Pa.codeEntity:Ja.selectedCodeEntity;if(!Za)return Ja.world().inform("No module selected / specified!",{requester:Ja,autoWidth:!0}),!0;Pa=Pa?Ja.editorPlugin.textMorph.indexToPosition(Pa.node.start).row:null;Za=Za.url;Za.startsWith("file://")&&(Za=Za.replace("file://",""));return Ja.world().execCommand("open file",
{url:Za,lineNumber:Pa})}},{name:"run all tests in package",exec:function(){var Ja=jc(regeneratorRuntime.mark(function Zb(Za){var Vc,Jc;return regeneratorRuntime.wrap(function(cd){for(;;)switch(cd.prev=cd.next){case 0:if(Vc=Za.selectedPackage){cd.next=3;break}return cd.abrupt("return",Za.world().inform("No package selected",{requester:Za}));case 3:return cd.next=5,S(Za,Vc.name);case 5:return Jc=cd.sent,Za.focus(),cd.abrupt("return",Jc);case 8:case "end":return cd.stop()}},Zb)}));return function(Za){return Ja.apply(this,
arguments)}}()},{name:"run all tests in module",exec:function(){var Ja=jc(regeneratorRuntime.mark(function Zb(Za){var Vc,Jc;return regeneratorRuntime.wrap(function(cd){for(;;)switch(cd.prev=cd.next){case 0:if(Vc=Za.selectedModule){cd.next=3;break}return cd.abrupt("return",Za.world().inform("No module selected",{requester:Za}));case 3:return cd.next=5,ca(Za,Vc.url,null);case 5:return Jc=cd.sent,Za.focus(),cd.abrupt("return",Jc);case 8:case "end":return cd.stop()}},Zb)}));return function(Za){return Ja.apply(this,
arguments)}}()},{name:"run tests at point",exec:function(){var Ja=jc(regeneratorRuntime.mark(function Zb(Za){var Vc,Jc,cd,sd,Pe,gf,ag;return regeneratorRuntime.wrap(function(Af){for(;;)switch(Af.prev=Af.next){case 0:if(Vc=Za.selectedModule){Af.next=3;break}return Af.abrupt("return",Za.world().inform("No module selected",{requester:Za}));case 3:return Jc=Za.get("sourceEditor"),Af.next=6,Dd.import("mocha-es6/test-analysis.js");case 6:return cd=Af.sent,sd=cd.extractTestDescriptors,Af.next=10,sd(Jc.textString,
Jc.document.positionToIndex(Jc.cursorPosition));case 10:if((Pe=Af.sent)&&Pe.length){Af.next=13;break}return Af.abrupt("return",Za.world().inform("No test at "+JSON.stringify(Jc.cursorPosition),{requester:Za}));case 13:return gf={fullTitle:Hd.arr.pluck(Pe,"title").join(" "),type:Hd.arr.last(Pe).type,file:Vc.name},Af.next=16,ca(Za,Vc.name,gf);case 16:return ag=Af.sent,Za.focus(),Af.abrupt("return",ag);case 19:case "end":return Af.stop()}},Zb)}));return function(Za){return Ja.apply(this,arguments)}}()},
{name:"run setup code of tests (before and beforeEach)",exec:function(){var Ja=jc(regeneratorRuntime.mark(function Zb(Za){var Vc,Jc,cd,sd,Pe,gf,ag,Af,ph,Ug,$i=arguments;return regeneratorRuntime.wrap(function(rh){for(;;)switch(rh.prev=rh.next){case 0:Vc=1<$i.length&&void 0!==$i[1]?$i[1]:{what:"setup"};if(Jc=Za.selectedModule){rh.next=4;break}return rh.abrupt("return",Za.world().inform("No module selected",{requester:Za}));case 4:return cd=Za.get("sourceEditor"),rh.next=7,Dd.import("mocha-es6/test-analysis.js");
case 7:return sd=rh.sent,Pe=sd.extractTestDescriptors,rh.next=11,Pe(cd.textString,cd.document.positionToIndex(cd.cursorPosition));case 11:if((gf=rh.sent)&&gf.length){rh.next=14;break}return rh.abrupt("return",Za.world().inform("No test at "+JSON.stringify(cd.cursorPosition),{requester:Za}));case 14:return ag=Vc&&Vc.what||"setup",Af="setup"===ag?"setupCalls":"teardownCalls",ph=0,Ug=gf.flatMap(function(Ah){return Ah[Af].map(function(hk,tk){ph++;return"await ((".concat(lively.ast.stringify(hk),")());")})}).join("\n"),
rh.prev=18,rh.next=21,Za.systemInterface.runEval(Ug,Object.assign({},cd.evalEnvironment));case 21:Za.setStatusMessage("Executed ".concat(ph," test ").concat(ag," functions"));rh.next=27;break;case 24:rh.prev=24,rh.t0=rh["catch"](18),Za.showError(Error("Error when running ".concat(ag," calls of test:\n").concat(rh.t0.stack)));case 27:return rh.abrupt("return",!0);case 28:case "end":return rh.stop()}},Zb,null,[[18,24]])}));return function(Za){return Ja.apply(this,arguments)}}()},{name:"run teardown code of tests (after and afterEach)",
exec:function(){var Ja=jc(regeneratorRuntime.mark(function Zb(Za){return regeneratorRuntime.wrap(function(Vc){for(;;)switch(Vc.prev=Vc.next){case 0:return Vc.abrupt("return",Za.execCommand("run setup code of tests (before and beforeEach)",{what:"teardown"}));case 1:case "end":return Vc.stop()}},Zb)}));return function(Za){return Ja.apply(this,arguments)}}()},{name:"freeze selected module",doc:"Enters the freeze prompt which allows the user to configure and execute a build for the currently selected module. The resulting bundle will execute the specified main() method in the current module and pass the default world object as a parameter. This allows us to bundle apps in lively without snapshots.",
exec:function(){var Ja=jc(regeneratorRuntime.mark(function Zb(Za){return regeneratorRuntime.wrap(function(Vc){for(;;)switch(Vc.prev=Vc.next){case 0:Hd.interactivelyFreezeModule(Za.selectedModule.url,Za);case 1:case "end":return Vc.stop()}},Zb)}));return function(Za){return Ja.apply(this,arguments)}}()}]}function We(G,ca,lb){var S,Ra="";"string"!==typeof ca&&(lb=ca,ca=We.defaultChars);"undefined"===typeof lb&&(lb=!0);var Da=Z[ca];if(!Da){Da=Z[ca]=[];for(S=0;128>S;S++){var Ja=String.fromCharCode(S);
/^[0-9a-z]$/i.test(Ja)?Da.push(Ja):Da.push("%"+("0"+S.toString(16).toUpperCase()).slice(-2))}for(S=0;S<ca.length;S++)Da[ca.charCodeAt(S)]=ca[S]}Ja=Da;ca=0;for(S=G.length;ca<S;ca++)if(Da=G.charCodeAt(ca),lb&&37===Da&&ca+2<S&&/^[0-9a-f]{2}$/i.test(G.slice(ca+1,ca+3)))Ra+=G.slice(ca,ca+3),ca+=2;else if(128>Da)Ra+=Ja[Da];else if(55296<=Da&&57343>=Da){if(55296<=Da&&56319>=Da&&ca+1<S&&(Da=G.charCodeAt(ca+1),56320<=Da&&57343>=Da)){Ra+=encodeURIComponent(G[ca]+G[ca+1]);ca++;continue}Ra+="%EF%BF%BD"}else Ra+=
encodeURIComponent(G[ca]);return Ra}function xe(G){var ca,lb=ya[G];if(lb)return lb;lb=ya[G]=[];for(ca=0;128>ca;ca++){var S=String.fromCharCode(ca);lb.push(S)}for(ca=0;ca<G.length;ca++)S=G.charCodeAt(ca),lb[S]="%"+("0"+S.toString(16).toUpperCase()).slice(-2);return lb}function Fg(G,ca){"string"!==typeof ca&&(ca=Fg.defaultChars);var lb=xe(ca);return G.replace(/(%[a-f0-9]{2})+/gi,function(S){var Ra,Da="";var Ja=0;for(Ra=S.length;Ja<Ra;Ja+=3){var Pa=parseInt(S.slice(Ja+1,Ja+3),16);if(128>Pa)Da+=lb[Pa];
else{if(192===(Pa&224)&&Ja+3<Ra){var Za=parseInt(S.slice(Ja+4,Ja+6),16);if(128===(Za&192)){Pa=Pa<<6&1984|Za&63;Da=128>Pa?Da+"\ufffd\ufffd":Da+String.fromCharCode(Pa);Ja+=3;continue}}if(224===(Pa&240)&&Ja+6<Ra){Za=parseInt(S.slice(Ja+4,Ja+6),16);var Zb=parseInt(S.slice(Ja+7,Ja+9),16);if(128===(Za&192)&&128===(Zb&192)){Pa=Pa<<12&61440|Za<<6&4032|Zb&63;Da=2048>Pa||55296<=Pa&&57343>=Pa?Da+"\ufffd\ufffd\ufffd":Da+String.fromCharCode(Pa);Ja+=6;continue}}if(240===(Pa&248)&&Ja+9<Ra){Za=parseInt(S.slice(Ja+
4,Ja+6),16);Zb=parseInt(S.slice(Ja+7,Ja+9),16);var Vc=parseInt(S.slice(Ja+10,Ja+12),16);if(128===(Za&192)&&128===(Zb&192)&&128===(Vc&192)){Pa=Pa<<18&1835008|Za<<12&258048|Zb<<6&4032|Vc&63;65536>Pa||1114111<Pa?Da+="\ufffd\ufffd\ufffd\ufffd":(Pa-=65536,Da+=String.fromCharCode(55296+(Pa>>10),56320+(Pa&1023)));Ja+=9;continue}}Da+="\ufffd"}}return Da})}function Zc(){this.pathname=this.search=this.hash=this.hostname=this.port=this.auth=this.slashes=this.protocol=null}function rd(G,ca){return Mg.call(G,
ca)}function ti(G){return 55296<=G&&57343>=G||64976<=G&&65007>=G||65535===(G&65535)||65534===(G&65535)||0<=G&&8>=G||11===G||14<=G&&31>=G||127<=G&&159>=G||1114111<G?!1:!0}function dg(G){return 65535<G?(G-=65536,String.fromCharCode(55296+(G>>10),56320+(G&1023))):String.fromCharCode(G)}function Of(G){return T[G]}function mg(){this.rules=pc({},Ad)}function wf(G,ca,lb){this.type=G;this.tag=ca;this.map=this.attrs=null;this.nesting=lb;this.level=0;this.children=null;this.info=this.markup=this.content="";
this.meta=null;this.hidden=this.block=!1}function mf(G,ca,lb,S){this.src=G;this.env=lb;this.md=ca;this.tokens=S;this.tokens_meta=Array(S.length);this.pos=0;this.posMax=this.src.length;this.level=0;this.pending="";this.pendingLevel=0;this.cache={};this.delimiters=[];this._prev_delimiters=[];this.backticks={};this.backticksScanned=!1}function Mb(G){Array.prototype.slice.call(arguments,1).forEach(function(ca){ca&&Object.keys(ca).forEach(function(lb){G[lb]=ca[lb]})});return G}function gd(G){return Object.prototype.toString.call(G)}
function Vd(G){return G.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function sf(G){return Object.keys(G||{}).reduce(function(ca,lb){return ca||Jb.hasOwnProperty(lb)},!1)}function hg(G){G.__index__=-1;G.__text_cache__=""}function bh(G){return function(ca,lb){ca=ca.slice(lb);return G.test(ca)?ca.match(G)[0].length:0}}function Qf(){return function(G,ca){ca.normalize(G)}}function he(G){function ca(Ja){return Ja.replace("%TLDS%",S.src_tlds)}function lb(Ja,Pa){throw Error('(LinkifyIt) Invalid schema "'+Ja+'": '+
Pa);}var S=G.re=Ma(G.__opts__),Ra=G.__tlds__.slice();G.onCompile();G.__tlds_replaced__||Ra.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]");Ra.push(S.src_xn);S.src_tlds=Ra.join("|");S.email_fuzzy=RegExp(ca(S.tpl_email_fuzzy),
"i");S.link_fuzzy=RegExp(ca(S.tpl_link_fuzzy),"i");S.link_no_ip_fuzzy=RegExp(ca(S.tpl_link_no_ip_fuzzy),"i");S.host_fuzzy_test=RegExp(ca(S.tpl_host_fuzzy_test),"i");var Da=[];G.__compiled__={};Object.keys(G.__schemas__).forEach(function(Ja){var Pa=G.__schemas__[Ja];if(null!==Pa){var Za={validate:null,link:null};G.__compiled__[Ja]=Za;"[object Object]"===gd(Pa)?("[object RegExp]"===gd(Pa.validate)?Za.validate=bh(Pa.validate):"[object Function]"===gd(Pa.validate)?Za.validate=Pa.validate:lb(Ja,Pa),"[object Function]"===
gd(Pa.normalize)?Za.normalize=Pa.normalize:Pa.normalize?lb(Ja,Pa):Za.normalize=Qf()):"[object String]"===gd(Pa)?Da.push(Ja):lb(Ja,Pa)}});Da.forEach(function(Ja){G.__compiled__[G.__schemas__[Ja]]&&(G.__compiled__[Ja].validate=G.__compiled__[G.__schemas__[Ja]].validate,G.__compiled__[Ja].normalize=G.__compiled__[G.__schemas__[Ja]].normalize)});G.__compiled__[""]={validate:null,normalize:Qf()};Ra=Object.keys(G.__compiled__).filter(function(Ja){return 0<Ja.length&&G.__compiled__[Ja]}).map(Vd).join("|");
G.re.schema_test=RegExp("(^|(?!_)(?:[><\uff5c]|"+S.src_ZPCc+"))("+Ra+")","i");G.re.schema_search=RegExp("(^|(?!_)(?:[><\uff5c]|"+S.src_ZPCc+"))("+Ra+")","ig");G.re.pretest=RegExp("("+G.re.schema_test.source+")|("+G.re.host_fuzzy_test.source+")|@","i");hg(G)}function Uf(G,ca){var lb=G.__index__,S=G.__last_index__,Ra=G.__text_cache__.slice(lb,S);this.schema=G.__schema__.toLowerCase();this.index=lb+ca;this.lastIndex=S+ca;this.url=this.text=this.raw=Ra}function $g(G,ca){ca=new Uf(G,ca);G.__compiled__[ca.schema].normalize(ca,
G);return ca}function Ta(G,ca){if(!(this instanceof Ta))return new Ta(G,ca);!ca&&sf(G)&&(ca=G,G={});this.__opts__=Mb({},Jb,ca);this.__last_index__=this.__index__=-1;this.__text_cache__=this.__schema__="";this.__schemas__=Mb({},gc,G);this.__compiled__={};this.__tlds__=ac;this.__tlds_replaced__=!1;this.re={};he(this)}function th(){this.__rules__=[];this.__cache__=null}function Be(G,ca){return pj[ca.toLowerCase()]}function cb(G,ca,lb){return G.substr(0,ca)+lb+G.substr(ca+1)}function Yb(G,ca,lb){this.src=
G;this.env=lb;this.tokens=[];this.inlineMode=!1;this.md=ca}function de(){this.ruler=new xm;for(var G=0;G<Nl.length;G++)this.ruler.push(Nl[G][0],Nl[G][1])}function P(G,ca){var lb=G.bMarks[ca]+G.tShift[ca];return G.src.substr(lb,G.eMarks[ca]-lb)}function pa(G){var ca=[],lb=0,S=G.length,Ra,Da=!1,Ja=0,Pa="";for(Ra=G.charCodeAt(lb);lb<S;)124===Ra&&(Da?(Pa+=G.substring(Ja,lb-1),Ja=lb):(ca.push(Pa+G.substring(Ja,lb)),Pa="",Ja=lb+1)),Da=92===Ra,lb++,Ra=G.charCodeAt(lb);ca.push(Pa+G.substring(Ja));return ca}
function wa(G,ca){var lb=G.bMarks[ca]+G.tShift[ca];var S=G.eMarks[ca];ca=G.src.charCodeAt(lb++);return 42!==ca&&45!==ca&&43!==ca||lb<S&&(G=G.src.charCodeAt(lb),!op(G))?-1:lb}function Ea(G,ca){var lb=G.bMarks[ca]+G.tShift[ca],S=lb,Ra=G.eMarks[ca];if(S+1>=Ra)return-1;ca=G.src.charCodeAt(S++);if(48>ca||57<ca)return-1;for(;;){if(S>=Ra)return-1;ca=G.src.charCodeAt(S++);if(48<=ca&&57>=ca){if(10<=S-lb)return-1}else{if(41===ca||46===ca)break;return-1}}return S<Ra&&(ca=G.src.charCodeAt(S),!op(ca))?-1:S}function ia(G,
ca,lb,S){var Ra,Da,Ja;this.src=G;this.md=ca;this.env=lb;this.tokens=S;this.bMarks=[];this.eMarks=[];this.tShift=[];this.sCount=[];this.bsCount=[];this.lineMax=this.line=this.blkIndent=0;this.tight=!1;this.listIndent=this.ddIndent=-1;this.parentType="root";this.level=0;this.result="";ca=this.src;var Pa=!1;lb=S=Da=Ja=0;for(Ra=ca.length;S<Ra;S++){G=ca.charCodeAt(S);if(!Pa)if(rn(G)){Da++;9===G?Ja+=4-Ja%4:Ja++;continue}else Pa=!0;if(10===G||S===Ra-1)10!==G&&S++,this.bMarks.push(lb),this.eMarks.push(S),
this.tShift.push(Da),this.sCount.push(Ja),this.bsCount.push(0),Pa=!1,Ja=Da=0,lb=S+1}this.bMarks.push(ca.length);this.eMarks.push(ca.length);this.tShift.push(0);this.sCount.push(0);this.bsCount.push(0);this.lineMax=this.bMarks.length-1}function Ca(){this.ruler=new vp;for(var G=0;G<Gn.length;G++)this.ruler.push(Gn[G][0],Gn[G][1],{alt:(Gn[G][2]||[]).slice()})}function w(G){switch(G){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;
default:return!1}}function ma(G,ca){var lb,S=[],Ra=ca.length;for(lb=0;lb<Ra;lb++){var Da=ca[lb];if(126===Da.marker&&-1!==Da.end){var Ja=ca[Da.end];Da=G.tokens[Da.token];Da.type="s_open";Da.tag="s";Da.nesting=1;Da.markup="~~";Da.content="";Da=G.tokens[Ja.token];Da.type="s_close";Da.tag="s";Da.nesting=-1;Da.markup="~~";Da.content="";"text"===G.tokens[Ja.token-1].type&&"~"===G.tokens[Ja.token-1].content&&S.push(Ja.token-1)}}for(;S.length;){lb=S.pop();for(ca=lb+1;ca<G.tokens.length&&"s_close"===G.tokens[ca].type;)ca++;
ca--;lb!==ca&&(Da=G.tokens[ca],G.tokens[ca]=G.tokens[lb],G.tokens[lb]=Da)}}function ua(G,ca){var lb;for(lb=ca.length-1;0<=lb;lb--){var S=ca[lb];if((95===S.marker||42===S.marker)&&-1!==S.end){var Ra=ca[S.end];var Da=0<lb&&ca[lb-1].end===S.end+1&&ca[lb-1].marker===S.marker&&ca[lb-1].token===S.token-1&&ca[S.end+1].token===Ra.token+1;var Ja=String.fromCharCode(S.marker);var Pa=G.tokens[S.token];Pa.type=Da?"strong_open":"em_open";Pa.tag=Da?"strong":"em";Pa.nesting=1;Pa.markup=Da?Ja+Ja:Ja;Pa.content="";
Pa=G.tokens[Ra.token];Pa.type=Da?"strong_close":"em_close";Pa.tag=Da?"strong":"em";Pa.nesting=-1;Pa.markup=Da?Ja+Ja:Ja;Pa.content="";Da&&(G.tokens[ca[lb-1].token].content="",G.tokens[ca[S.end+1].token].content="",lb--)}}}function ha(G,ca){var lb,S,Ra={},Da=ca.length;if(Da){var Ja=0,Pa=-2,Za=[];for(G=0;G<Da;G++){var Zb=ca[G];Za.push(0);if(ca[Ja].marker!==Zb.marker||Pa!==Zb.token-1)Ja=G;Pa=Zb.token;Zb.length=Zb.length||0;if(Zb.close){Ra.hasOwnProperty(Zb.marker)||(Ra[Zb.marker]=[-1,-1,-1,-1,-1,-1]);
var Vc=Ra[Zb.marker][(Zb.open?3:0)+Zb.length%3];for(S=lb=Ja-Za[Ja]-1;lb>Vc;lb-=Za[lb]+1){var Jc=ca[lb];if(Jc.marker===Zb.marker&&Jc.open&&0>Jc.end){var cd=!1;!Jc.close&&!Zb.open||0!==(Jc.length+Zb.length)%3||0===Jc.length%3&&0===Zb.length%3||(cd=!0);if(!cd){Vc=0<lb&&!ca[lb-1].open?Za[lb-1]+1:0;Za[G]=G-lb+Vc;Za[lb]=Vc;Zb.open=!1;Jc.end=G;Jc.close=!1;S=-1;Pa=-2;break}}}-1!==S&&(Ra[Zb.marker][(Zb.open?3:0)+(Zb.length||0)%3]=S)}}}}function ra(){var G;this.ruler=new yh;for(G=0;G<Ho.length;G++)this.ruler.push(Ho[G][0],
Ho[G][1]);this.ruler2=new yh;for(G=0;G<yp.length;G++)this.ruler2.push(yp[G][0],yp[G][1])}function mb(G){G=G.trim().toLowerCase();return qe.test(G)?nc.test(G)?!0:!1:!0}function E(G){G=le.parse(G,!0);if(G.hostname&&(!G.protocol||0<=Ke.indexOf(G.protocol)))try{G.hostname=je.toASCII(G.hostname)}catch(ca){}return le.encode(le.format(G))}function R(G){G=le.parse(G,!0);if(G.hostname&&(!G.protocol||0<=Ke.indexOf(G.protocol)))try{G.hostname=je.toUnicode(G.hostname)}catch(ca){}return le.decode(le.format(G),
le.decode.defaultChars+"%")}function Ya(G,ca){if(!(this instanceof Ya))return new Ya(G,ca);ca||X.isString(G)||(ca=G||{},G="default");this.inline=new Lc;this.block=new fc;this.core=new Ab;this.renderer=new Wa;this.linkify=new wd;this.validateLink=mb;this.normalizeLink=E;this.normalizeLinkText=R;this.utils=X;this.helpers=X.assign({},bb);this.options={};this.configure(G);ca&&this.set(ca)}var gb=window.lively.FreezerRuntime.recorderFor("lively.components/muller-columns.cp.js");gb.Color=se;gb.rect=Rc;
gb.pt=ad;gb.HorizontalLayout=Ne;gb.ViewModel=Cb;gb.part=Sd;gb.component=ve;gb.signal=uc;gb.noUpdate=dd;gb.connect=vd;gb.arr=Ed;gb.DefaultList=Cc;gb.ColumnListDefault=gb.component["for"](function(){return gb.component(gb.DefaultList,{name:"column list default",borderWidthRight:1,borderColor:gb.Color.rgb(213,216,220),extent:gb.pt(230,93.5),fill:gb.Color.rgba(255,255,255,0),itemBorderRadius:3,itemPadding:gb.rect(5,3,0,-2),padding:gb.rect(5,5,5,0)})},{module:"lively.components/muller-columns.cp.js","export":"ColumnListDefault",
range:{start:349,end:639}},gb.ColumnListDefault);gb.ColumnListDark=gb.component["for"](function(){return gb.component(gb.ColumnListDefault,{name:"column list dark",borderColor:gb.Color.rgb(133,146,158),fill:gb.Color.rgba(44,62,80,0),nonSelectionFontColor:gb.Color.rgb(252,252,252),selectionColor:gb.Color.rgb(133,193,233),selectionFontColor:gb.Color.rgb(53,53,53)})},{module:"lively.components/muller-columns.cp.js","export":"ColumnListDark",range:{start:647,end:940}},gb.ColumnListDark);var $b=function(G){var ca=
window.lively.FreezerRuntime.recorderFor("lively.components/muller-columns.cp.js"),lb=ca.hasOwnProperty("MullerColumnViewModel")&&"function"===typeof ca.MullerColumnViewModel?ca.MullerColumnViewModel:ca.MullerColumnViewModel=function(S){if(!S||!S[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return fe(lb,G,[{key:"focusActiveList",value:function(){gb.arr.last(this.lists.filter(function(S){return!!S.selection})).focus()}},
{key:"listNavigationProhibited",get:function(){return this.treeData.listNavigationProhibited}},{key:"truncateNameIfNeeded",value:function(S){return S}},{key:"isSelected",value:function(S){return!S.isCollapsed}},{key:"setTreeData",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){return regeneratorRuntime.wrap(function(Pa){for(;;)switch(Pa.prev=Pa.next){case 0:return this.treeData=Da,Pa.next=3,Da.collapse(Da.root,!1);case 3:return Pa.next=5,this.refresh(!1);case 5:case "end":return Pa.stop()}},
Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"reset",value:function(){this.lists=[]}},{key:"selectNode",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa=this,Za,Zb,Vc=arguments;return regeneratorRuntime.wrap(function(Jc){for(;;)switch(Jc.prev=Jc.next){case 0:return Za=1<Vc.length&&void 0!==Vc[1]?Vc[1]:!0,this._selectedNode=Da,Zb=this.treeData.parentNode(Da),Jc.next=5,Promise.all(this.treeData.getChildren(Zb).map(function(cd){if(cd!==Da&&!Pa.treeData.isCollapsed(cd))return Pa.treeData.collapse(cd,
!0);if(cd===Da)return Pa.treeData.collapse(cd,!1)}));case 5:return Jc.next=7,this.refresh(Za);case 7:gb.signal(this,"selectionChange",this.getExpandedPath());case 8:case "end":return Jc.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"getExpandedPath",value:function(){var S=this.treeData;if(!S)return[];for(var Ra=S.getChildren(S.root),Da=[S.root];Ra=Ra&&Ra.find(function(Ja){return!S.isCollapsed(Ja)});)Da.push(Ra),Ra=S.getChildren(Ra);return Da}},{key:"setExpandedPath",
value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja,Pa,Za,Zb,Vc,Jc,cd=arguments;return regeneratorRuntime.wrap(function(sd){for(;;)switch(sd.prev=sd.next){case 0:return Ja=0<cd.length&&void 0!==cd[0]?cd[0]:function(Pe){return Pe===this.treeData.root}.bind(this),Pa=1<cd.length&&void 0!==cd[1]?cd[1]:this.treeData.root,Za=2<cd.length&&void 0!==cd[2]?cd[2]:!0,Zb=this.treeData,Vc=this.getExpandedPath(),Jc=Vc.slice(Vc.indexOf(Pa)),sd.next=8,Promise.all(Jc.map(function(Pe){return Zb.collapse(Pe,
!0)}));case 8:return sd.next=10,Zb.uncollapseAll(Ja,0,Pa);case 10:return sd.next=12,this.refresh(Za);case 12:this.lists.forEach(function(Pe){return Pe.scrollSelectionIntoView()});case 13:case "end":return sd.stop()}},Da,this)}));return function(){return S.apply(this,arguments)}}()},{key:"newList",value:function(){var S=gb.part(this.listMaster,{width:200});gb.connect(S,"selection",this,"selectNode");return S}},{key:"ensureLists",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa=
this,Za,Zb,Vc,Jc,cd,sd=arguments;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:Za=1<sd.length&&void 0!==sd[1]?sd[1]:!0;Zb=this.lists;Jc=this.view;cd=Da-Zb.length;if(!(0<cd)){Pe.next=14;break}this.lists=Zb=[].concat(Od(Zb),Od(gb.arr.genN(cd,function(){return Pa.newList()})));Pe.next=9;return Jc.whenRendered();case 9:Jc.layout.renderViaCSS&&Zb.map(function(gf){return Jc.layout.expressMeasure(gf)});Vc=gb.pt(Jc.scrollExtent.x-Jc.width);Za?Jc.animate({scroll:Vc,duration:200}):
Jc.scroll=Vc;Pe.next=24;break;case 14:if(!(0>cd)){Pe.next=24;break}Zb=Zb.slice(0,cd);Vc=gb.pt(gb.arr.last(Zb).right-Jc.width);if(!Za){Pe.next=22;break}Pe.next=20;return Jc.animate({scroll:Vc,duration:200});case 20:Pe.next=23;break;case 22:Jc.scroll=Vc;case 23:this.lists=Zb;case 24:return Pe.abrupt("return",Zb);case 25:case "end":return Pe.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"relayout",value:function(){var S=0,Ra=this.view;Ra.scrollExtent.x>Ra.width+Ra.scrollbarOffset.x&&
(S=5);this.lists.forEach(function(Da){Da.height=Ra.height-S-1;var Ja=Da._managedNode&&Da._managedNode.listControl;Ja&&(Ja.bottomRight=Da.innerBounds().bottomRight().subXY(5,0))})}},{key:"onHoverOut",value:function(S){this.lists.forEach(function(Ra){if(Ra=Ra._managedNode&&Ra._managedNode.listControl)Ra.visible=!1})}},{key:"onKeyDown",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa=this,Za,Zb,Vc,Jc,cd,sd,Pe,gf,ag,Af;return regeneratorRuntime.wrap(function(ph){for(;;)switch(ph.prev=
ph.next){case 0:if((Za=this.view.getWindow())&&Za.isActive()&&!Za.isFaderActive()){ph.next=3;break}return ph.abrupt("return");case 3:return ph.next=5,this.refresh(!1);case 5:if(Zb=this.lists.find(function(Ug){return Ug.fullContainsWorldPoint($world.firstHand.position)})){ph.next=8;break}return ph.abrupt("return");case 8:Zb.items.forEach(function(Ug){Ug.originalLabel&&(Ug.label=Ug.originalLabel.filter(function($i){return!0}))});if(!Da.hasCharacterPressed){ph.next=13;break}Vc=Da.key;ph.next=25;break;
case 13:if("Space"!==Da.key){ph.next=17;break}Vc=" ";ph.next=25;break;case 17:if("Backspace"!==Da.key){ph.next=22;break}Vc="";this.searchString=this.searchString.slice(0,-1);ph.next=25;break;case 22:return this.lists.forEach(function(Ug){return Ug.scrollSelectionIntoView()}),this.searchString="",ph.abrupt("return");case 25:this.searchString||(this.searchString="");this.searchString+=Vc.toLowerCase();Zb.items.forEach(function(Ug,$i){Ug.normalizedIndex=$i});cd=Zb.items.filter(function(Ug){Jc=2<Ug.label.length?
2:0;return Ug.string.toLowerCase().includes(Pa.searchString)});sd=qb(cd);try{for(sd.s();!(Pe=sd.n()).done;)gf=Pe.value,Jc=2<gf.label.length?2:0,ag=gf.label[Jc].toLowerCase().indexOf(this.searchString),Af=gf.label,gf.originalLabel=gf.label.filter(function(Ug){return!0}),Af.splice(Jc,1,gf.label[Jc].slice(0,ag),gf.label[Jc+1],gf.label[Jc].slice(ag,ag+this.searchString.length),{fontStyle:gf.label[Jc+1]?gf.label[Jc+1].fontStyle:"normal",backgroundColor:gb.Color.orange},gf.label[Jc].slice(ag+this.searchString.length)),
gf.label=Af}catch(Ug){sd.e(Ug)}finally{sd.f()}Zb.items=cd;case 32:case "end":return ph.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"onMouseMove",value:function(S){var Ra=this.lists.find(function(Da){return Da.fullContainsWorldPoint(S.position)});Ra&&(Ra.focus(),this.lists.forEach(function(Da){var Ja=Da._managedNode&&Da._managedNode.listControl;Ja&&(Ja.visible=Da===Ra)}))}},{key:"onMouseDown",value:function(S){S.targetMorph.isListItemMorph&&this.clickOnItem(S)}},
{key:"clickOnItem",value:function(S){var Ra=this;if(this.searchString){var Da=S.targetMorph.owner.owner,Ja=Da.items.find(function(Pa){return Pa.string===S.targetMorph.textString});this.refresh().then(function(){Da.selectedIndex=Ja.normalizedIndex;Da.items.forEach(function(Pa){return Pa.normalizedIndex=null});Ra.searchString=null;Da.scrollSelectionIntoView()})}}},{key:"keybindings",get:function(){return[{keys:"Left",command:"select previous entry of last list"},{keys:"Right",command:"select first entry of next list"}]}},
{key:"commands",get:function(){var S=this;return[{name:"select previous entry of last list",exec:function(){if(!S.listNavigationProhibited){var Ra=S.treeData.parentNode(S._selectedNode);S.selectNode(Ra)}}},{name:"select first entry of next list",exec:function(){if(!S.listNavigationProhibited){var Ra=S._selectedNode;(Ra=Ra.subNodes&&Ra.subNodes[0])&&S.selectNode(Ra)}}}]}},{key:"refresh",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja=this,Pa,Za,Zb,Vc,Jc,cd,sd,Pe=arguments;return regeneratorRuntime.wrap(function(gf){for(;;)switch(gf.prev=
gf.next){case 0:Pa=0<Pe.length&&void 0!==Pe[0]?Pe[0]:!0;if(Za=this.treeData){gf.next=4;break}return gf.abrupt("return");case 4:return Zb=this.getExpandedPath(),Jc=gb.arr.last(Zb),Za.isLeaf(Jc)&&Jc!==Za.root&&(Vc=gb.arr.last(Zb),Zb=Zb.slice(0,-1)),gf.next=9,this.ensureLists(Zb.length,Pa);case 9:cd=gf.sent,Zb.forEach(function(ag){!Za.isCollapsed(ag)&&sd&&gb.noUpdate(function(){sd.selection=ag;sd.focus()});sd=cd.shift();gb.noUpdate(function(){return sd.selection=!1});var Af=sd.itemScroll;if(sd._managedNode===
ag){sd.itemScroll=Af;Af=sd.items;var ph=Za.getChildren(ag);ph.length===Af.length?gb.arr.zip(Af,ph).forEach(function(Ug){var $i=ic(Ug,2);Ug=$i[0];if($i=$i[1])Ug.value=$i,Ug.value.isDirty&&(Ug.value.isDirty=!1,Ug.label=Za.display(Ug.value))}):sd._managedNode=null}sd._managedNode!==ag&&(sd.items=Za.getChildren(ag).map(function(Ug){return{isListItem:!0,label:Za.display(Ug),value:Ug,tooltip:Ja.defaultTooltips?Ug.name:Ug.tooltip||!1}}),sd._managedNode=ag);ag.listControl&&(sd.submorphs=sd.submorphs.slice(0,
2).concat([ag.listControl]))}),Vc&&gb.noUpdate(function(){sd.selection=Vc;sd.focus()}),this.relayout();case 13:case "end":return gf.stop()}},Da,this)}));return function(){return S.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MullerColumnViewModel"}},{key:"properties",get:function(){return{defaultTooltips:{},treeData:{},listMaster:{isComponent:!0,defaultValue:gb.DefaultList,set:function(S){this.setProperty("listMaster",S);this.refresh(!1)}},lists:{derived:!0,
get:function(){return this.view.submorphs},set:function(S){this.view.submorphs=S.map(function(Ra){Ra.epiMorph=!0;return Ra})}},expose:{get:function(){return"listMaster treeData setTreeData isSelected selectNode getExpandedPath refresh keybindings commands reset setExpandedPath listNavigationProhibited lists".split(" ")}},bindings:{get:function(){return[{signal:"extent",handler:"relayout"},{signal:"onMouseMove",handler:"onMouseMove"},{signal:"onHoverOut",handler:"onHoverOut"},{signal:"onKeyDown",handler:"onKeyDown"},
{signal:"onMouseDown",handler:"onMouseDown"}]}}}}}],ca,{pathInPackage:function(){return"./muller-columns.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:949,end:14255})}(gb.ViewModel);gb.MullerColumnViewModel=$b;gb.MullerColumnViewModel=$b;gb.MullerColumnView=gb.component["for"](function(){return gb.component({defaultViewModel:gb.MullerColumnViewModel,
name:"muller column view",borderColor:gb.Color.rgb(23,160,251),clipMode:"auto",extent:gb.pt(565.1,285.2),layout:new gb.HorizontalLayout({align:"top",autoResize:!1,direction:"leftToRight",orderByIndex:!0,padding:{height:0,width:0,x:0,y:0},reactToSubmorphAnimations:!1,renderViaCSS:!0,resizeSubmorphs:!1}),position:gb.pt(875,1268),renderOnGPU:!0})},{module:"lively.components/muller-columns.cp.js","export":"MullerColumnView",range:{start:14297,end:14839}},gb.MullerColumnView);var Sc=bd("M",gb.MullerColumnView),
Ic=bd("C",gb.ColumnListDefault),Pd=gb.ColumnListDark;gb.MullerColumnView=Sc;gb.ColumnListDefault=Ic;gb.ColumnListDark=Pd;var Zd=window.lively.FreezerRuntime.recorderFor("lively.ide/js/browser/tree.js");Zd.listEditableFilesInDir=function(G){return Fc.apply(this,arguments)};Zd.transformJSONNode=xd;Zd.listJSONScope=function(G){return Uc.apply(this,arguments)};Zd.resource=Wb;Zd.parse=lc;var ge="md js json css less html mjs cjs".split(" ");Zd.editableFiles=ge;Zd.editableFiles=ge;var Ce=window.lively.FreezerRuntime.recorderFor("lively.ide/json/checker.js");
Ce.Range=db;Ce.warnStyle={"border-bottom":"2px dotted orange"};Ce.errorStyle={"background-color":"red"};var $e=function(G){var ca=window.lively.FreezerRuntime.recorderFor("lively.ide/json/checker.js"),lb=ca.hasOwnProperty("JSONChecker")&&"function"===typeof ca.JSONChecker?ca.JSONChecker:ca.JSONChecker=function(S){if(!S||!S[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return fe(lb,G,[{key:"uninstall",value:function(S){var Ra=
S.text||S;(Ra.markers||[]).forEach(function(Da){return Da.id.startsWith("js-checker-")&&Ra.removeMarker(Da)});Ra.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(S,Ra){return Od(S.embeddedMorphMap.values()).find(function(Da){return Ra.containsPosition(Da.anchor.position)})}},{key:"onDocumentChange",value:function(S,Ra,Da){try{JSON.parse(Ra.textString),Ra.removeMarker("js-syntax-error")}catch(Pa){if(!(Pa instanceof SyntaxError))throw Pa;var Ja;S=Pa.message.match(/position ([0-9]+)/)||
[];S=ic(S,2);S[0];(S=S[1])&&!isNaN(Number(S))&&(Ja=Ra.indexToPosition(Number(S)));Ja||(S=Pa.message.match(/line ([0-9]+)/)||[],S=ic(S,2),S[0],S=S[1],Da=Pa.message.match(/column ([0-9]+)/)||[],Da=ic(Da,2),Da[0],Da=Da[1],isNaN(Number(S))||(Ja={row:Number(S)-1,column:Number(Da)}));Ja||(Da=Pa.column,S=Pa.line,"number"===typeof S&&(Ja={row:S-1,column:Da}));!Ja||isNaN(Ja.row)||isNaN(Ja.column)||(Ja=new Ce.Range({start:{column:Ja.column-1,row:Ja.row},end:{column:Ja.column+1,row:Ja.row}}),this.hasEmbeddedMorphInRange(Ra,
Ja)||Ra.addMarker({id:"js-syntax-error",range:Ja,style:Ce.errorStyle,type:"js-syntax-error"}))}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"JSONChecker"}}],ca,{pathInPackage:function(){return"./json/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:183,end:2029})}(void 0);Ce["default"]=$e;var pf=window.lively.FreezerRuntime.recorderFor("lively.ide/json/completers.js");
pf.doNewNPMSearch=function(G){return Md.apply(this,arguments)};pf.resource=Wb;pf.Path=Xa;var ig=function(G){var ca=window.lively.FreezerRuntime.recorderFor("lively.ide/json/completers.js"),lb=ca.hasOwnProperty("PackageJSONCompleter")&&"function"===typeof ca.PackageJSONCompleter?ca.PackageJSONCompleter:ca.PackageJSONCompleter=function(S){if(!S||!S[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return fe(lb,G,[{key:"isValidPrefix",
value:function(S){return!!S}},{key:"compute",value:function(){var S=jc(regeneratorRuntime.mark(function Pa(Da,Ja){var Za,Zb;return regeneratorRuntime.wrap(function(Vc){for(;;)switch(Vc.prev=Vc.next){case 0:Da.editorPlugin.parse();if(Za=!!Da.editorPlugin.tokenAt(Da.cursorPosition).find(function(Jc){return["dependencies","devDependencies"].includes(pf.Path("key.value").get(Jc))})){Vc.next=4;break}return Vc.abrupt("return",[]);case 4:return Vc.next=6,pf.doNewNPMSearch(Ja);case 6:return Zb=Vc.sent,Vc.abrupt("return",
Zb.map(function(Jc){Jc=Jc.string.split("@");Jc=ic(Jc,2);var cd=Jc[0],sd=Jc[1];return{info:"@".concat(sd),completion:cd,customInsertionFn:function(Pe,gf,ag,Af){Af.start;Af.end;ag.replace(ag.lineRange(),'"'.concat(cd,'": "').concat(sd,'"'))}}}));case 8:case "end":return Vc.stop()}},Pa)}));return function(Da,Ja){return S.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PackageJSONCompleter"}}],ca,{pathInPackage:function(){return"./json/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:88,end:850})}(void 0);pf.PackageJSONCompleter=ig;pf.PackageJSONCompleter=ig;var Xf=window.lively.FreezerRuntime.recorderFor("lively.ide/json/editor-plugin.js");Xf.JavaScriptEditorPlugin=Bb;Xf.JSONChecker=$e;Xf.getMode=ba;Xf.query=Gb;Xf.PackageJSONCompleter=ig;var Vg=function(G){var ca=window.lively.FreezerRuntime.recorderFor("lively.ide/json/editor-plugin.js"),
lb=ca.hasOwnProperty("JSONEditorPlugin")&&"function"===typeof ca.JSONEditorPlugin?ca.JSONEditorPlugin:ca.JSONEditorPlugin=function(S){if(!S||!S[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return fe(lb,G,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){fe._get(Object.getPrototypeOf(lb.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this);this.checker=new Xf.JSONChecker}},{key:"parse",
value:function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(this._ast&&this._ast._astType===S)return this._ast;var Ra=this.parser,Da=this.textMorph.textString;if(!Ra)return null;var Ja={withComments:!0,allowReturnOutsideFunction:!0};S&&(Ja.type=S);if(Da.startsWith("#!")){var Pa=Da.indexOf("\n");Da=" ".repeat(Pa)+Da.slice(Pa)}Da="(".concat(Da,")");Ra=Ra.fuzzyParse(Da,Ja);Ra._astType=S;return this._ast=Ra}},{key:"tokenAt",value:function(S){return Xf.query.nodesAt(this.textMorph.positionToIndex(S)-
1,this._ast)}},{key:"isJSONEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"json"}},{key:"longName",get:function(){return"json"}},{key:"codeMirrorMode",value:function(S){S=this.defaultCodeMirrorModeConfig(S);return Xf.getMode(S,{name:"javascript",json:!0})}},{key:"getCompleters",value:function(S){return[].concat(Od(fe._get(Object.getPrototypeOf(lb.prototype),"getCompleters",this).call(this,S)),[new Xf.PackageJSONCompleter])}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"JSONEditorPlugin"}}],ca,{pathInPackage:function(){return"./json/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:254,end:1666})}(Xf.JavaScriptEditorPlugin);Xf["default"]=Vg;var Re=window.lively.FreezerRuntime.recorderFor("lively.ide/jsx/mode.js");Re.Context=function(G,ca,lb,S){this.state=G;this.mode=
ca;this.depth=lb;this.prev=S};Re.copyContext=Ob;Re.passIndent=dc;Re.defineMode=la;Re.defineMIME=Fb;Re.registerHelper=vb;Re.startState=Ia;Re.copyState=xb;Re.getMode=ba;Re.defineMode("jsx",function(G,ca){function lb(Pa){var Za=Pa.tagName;Pa.tagName=null;var Zb=Da.indent(Pa,"","");Pa.tagName=Za;return Zb}function S(Pa,Za){if(Za.context.mode==Da)return Ra(Pa,Za,Za.context);var Zb=Za.context;if("<"==Pa.peek()&&Ja.expressionAllowed(Pa,Zb.state))Ja.skipExpression(Zb.state),Za.context=new Re.Context(Re.startState(Da,
Ja.indent(Zb.state,"","")),Da,0,Za.context),Za=null;else{var Vc=Ja.token(Pa,Zb.state);Vc||null==Zb.depth||(Pa=Pa.current(),"{"==Pa?Zb.depth++:"}"==Pa&&0==--Zb.depth&&(Za.context=Za.context.prev));Za=Vc}return Za}function Ra(Pa,Za,Zb){if(2==Zb.depth)return Pa.match(/^.*?\*\//)?Zb.depth=1:Pa.skipToEnd(),"comment";if("{"==Pa.peek()){Da.skipAttribute(Zb.state);var Vc=lb(Zb.state),Jc=Zb.state.context;if(Jc&&Pa.match(/^[^>]*>\s*$/,!1)){for(;Jc.prev&&!Jc.startOfLine;)Jc=Jc.prev;Jc.startOfLine?Vc-=G.indentUnit:
Zb.prev.state.lexical&&(Vc=Zb.prev.state.lexical.indented)}else 1==Zb.depth&&(Vc+=G.indentUnit);Za.context=new Re.Context(Re.startState(Ja,Vc),Ja,0,Za.context);return null}if(1==Zb.depth){if("<"==Pa.peek())return Da.skipAttribute(Zb.state),Za.context=new Re.Context(Re.startState(Da,lb(Zb.state)),Da,0,Za.context),null;if(Pa.match("//"))return Pa.skipToEnd(),"comment";if(Pa.match("/*"))return Zb.depth=2,S(Pa,Za)}Vc=Da.token(Pa,Zb.state);Jc=Pa.current();var cd;/\btag\b/.test(Vc)?/>$/.test(Jc)?Zb.state.context?
Zb.depth=0:Za.context=Za.context.prev:/^</.test(Jc)&&(Zb.depth=1):!Vc&&-1<(cd=Jc.indexOf("{"))&&Pa.backUp(Jc.length-cd);return Vc}var Da=Re.getMode(G,{name:"xml",allowMissing:!0,multilineTagIndentPastTag:!1,allowMissingTagName:!0}),Ja=Re.getMode(G,"javascript");return{startState:function(){return{context:new Re.Context(Re.startState(Ja),Ja)}},copyState:function(Pa){return{context:Re.copyContext(Pa.context)}},token:S,indent:function(Pa,Za,Zb){return Pa.context.mode.indent(Pa.context.state,Za,Zb)},
innerMode:function(Pa){return Pa.context}}},"xml","javascript");Re.defineMIME("text/jsx","jsx");Re.defineMIME("text/typescript-jsx",{name:"jsx",base:{name:"javascript",typescript:!0}});var ae=window.lively.FreezerRuntime.recorderFor("lively.ide/jsx/editor-plugin.js");ae.JavaScriptEditorPlugin=Bb;ae.es5Transpilation=sc;var Sb=function(G){var ca=window.lively.FreezerRuntime.recorderFor("lively.ide/jsx/editor-plugin.js"),lb=ca.hasOwnProperty("JSXEditorPlugin")&&"function"===typeof ca.JSXEditorPlugin?
ca.JSXEditorPlugin:ca.JSXEditorPlugin=function(S){if(!S||!S[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return fe(lb,G,[{key:"shortName",get:function(){return"jsx"}},{key:"longName",get:function(){return"jsx"}},{key:"runEval",value:function(S,Ra){Ra=this.sanatizedJsEnv(Ra);return this.systemInterface(Ra).runEval(ae.es5Transpilation(S),Object.assign({},Ra,{format:"es6"}))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"JSXEditorPlugin"}}],
ca,{pathInPackage:function(){return"./jsx/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:183,end:565})}(ae.JavaScriptEditorPlugin);ae["default"]=Sb;var Hd=window.lively.FreezerRuntime.recorderFor("lively.ide/js/browser/commands.js");Hd.isMarkdown=function(G){return"md"===G.type};Hd.browserCommands=Le;Hd.arr=Ed;Hd.Icon=
ub;Hd.interactivelyFreezeModule=tb;Hd["default"]=Le;var hf={Aacute:"\u00c1",aacute:"\u00e1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223e",acd:"\u223f",acE:"\u223e\u0333",Acirc:"\u00c2",acirc:"\u00e2",acute:"\u00b4",Acy:"\u0410",acy:"\u0430",AElig:"\u00c6",aelig:"\u00e6",af:"\u2061",Afr:"\ud835\udd04",afr:"\ud835\udd1e",Agrave:"\u00c0",agrave:"\u00e0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03b1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2a3f",amp:"&",AMP:"&",andand:"\u2a55",And:"\u2a53",
and:"\u2227",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",ange:"\u29a4",angle:"\u2220",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angmsd:"\u2221",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angst:"\u00c5",angzarr:"\u237c",Aogon:"\u0104",aogon:"\u0105",Aopf:"\ud835\udd38",aopf:"\ud835\udd52",apacir:"\u2a6f",ap:"\u2248",apE:"\u2a70",ape:"\u224a",apid:"\u224b",apos:"'",
ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224a",Aring:"\u00c5",aring:"\u00e5",Ascr:"\ud835\udc9c",ascr:"\ud835\udcb6",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224d",Atilde:"\u00c3",atilde:"\u00e3",Auml:"\u00c4",auml:"\u00e4",awconint:"\u2233",awint:"\u2a11",backcong:"\u224c",backepsilon:"\u03f6",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",Backslash:"\u2216",Barv:"\u2ae7",barvee:"\u22bd",barwed:"\u2305",Barwed:"\u2306",barwedge:"\u2305",bbrk:"\u23b5",bbrktbrk:"\u23b6",
bcong:"\u224c",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201e",becaus:"\u2235",because:"\u2235",Because:"\u2235",bemptyv:"\u29b0",bepsi:"\u03f6",bernou:"\u212c",Bernoullis:"\u212c",Beta:"\u0392",beta:"\u03b2",beth:"\u2136",between:"\u226c",Bfr:"\ud835\udd05",bfr:"\ud835\udd1f",bigcap:"\u22c2",bigcirc:"\u25ef",bigcup:"\u22c3",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",bigvee:"\u22c1",bigwedge:"\u22c0",
bkarow:"\u290d",blacklozenge:"\u29eb",blacksquare:"\u25aa",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bNot:"\u2aed",bnot:"\u2310",Bopf:"\ud835\udd39",bopf:"\ud835\udd53",bot:"\u22a5",bottom:"\u22a5",bowtie:"\u22c8",boxbox:"\u29c9",boxdl:"\u2510",boxdL:"\u2555",boxDl:"\u2556",boxDL:"\u2557",boxdr:"\u250c",boxdR:"\u2552",boxDr:"\u2553",
boxDR:"\u2554",boxh:"\u2500",boxH:"\u2550",boxhd:"\u252c",boxHd:"\u2564",boxhD:"\u2565",boxHD:"\u2566",boxhu:"\u2534",boxHu:"\u2567",boxhU:"\u2568",boxHU:"\u2569",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxul:"\u2518",boxuL:"\u255b",boxUl:"\u255c",boxUL:"\u255d",boxur:"\u2514",boxuR:"\u2558",boxUr:"\u2559",boxUR:"\u255a",boxv:"\u2502",boxV:"\u2551",boxvh:"\u253c",boxvH:"\u256a",boxVh:"\u256b",boxVH:"\u256c",boxvl:"\u2524",boxvL:"\u2561",boxVl:"\u2562",boxVL:"\u2563",boxvr:"\u251c",boxvR:"\u255e",
boxVr:"\u255f",boxVR:"\u2560",bprime:"\u2035",breve:"\u02d8",Breve:"\u02d8",brvbar:"\u00a6",bscr:"\ud835\udcb7",Bscr:"\u212c",bsemi:"\u204f",bsim:"\u223d",bsime:"\u22cd",bsolb:"\u29c5",bsol:"\\",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bump:"\u224e",bumpE:"\u2aae",bumpe:"\u224f",Bumpeq:"\u224e",bumpeq:"\u224f",Cacute:"\u0106",cacute:"\u0107",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",cap:"\u2229",Cap:"\u22d2",capcup:"\u2a47",capdot:"\u2a40",CapitalDifferentialD:"\u2145",caps:"\u2229\ufe00",
caret:"\u2041",caron:"\u02c7",Cayleys:"\u212d",ccaps:"\u2a4d",Ccaron:"\u010c",ccaron:"\u010d",Ccedil:"\u00c7",ccedil:"\u00e7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2a4c",ccupssm:"\u2a50",Cdot:"\u010a",cdot:"\u010b",cedil:"\u00b8",Cedilla:"\u00b8",cemptyv:"\u29b2",cent:"\u00a2",centerdot:"\u00b7",CenterDot:"\u00b7",cfr:"\ud835\udd20",Cfr:"\u212d",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03a7",chi:"\u03c7",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",
circlearrowright:"\u21bb",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",CircleDot:"\u2299",circledR:"\u00ae",circledS:"\u24c8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cir:"\u25cb",cirE:"\u29c3",cire:"\u2257",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201d",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",colon:":",Colon:"\u2237",Colone:"\u2a74",colone:"\u2254",coloneq:"\u2254",comma:",",
commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2a6d",Congruent:"\u2261",conint:"\u222e",Conint:"\u222f",ContourIntegral:"\u222e",copf:"\ud835\udd54",Copf:"\u2102",coprod:"\u2210",Coproduct:"\u2210",copy:"\u00a9",COPY:"\u00a9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21b5",cross:"\u2717",Cross:"\u2a2f",Cscr:"\ud835\udc9e",cscr:"\ud835\udcb8",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",
cudarrr:"\u2935",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cularrp:"\u293d",cupbrcap:"\u2a48",cupcap:"\u2a46",CupCap:"\u224d",cup:"\u222a",Cup:"\u22d3",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curarrm:"\u293c",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",curlyvee:"\u22ce",curlywedge:"\u22cf",curren:"\u00a4",curvearrowleft:"\u21b6",curvearrowright:"\u21b7",cuvee:"\u22ce",cuwed:"\u22cf",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232d",dagger:"\u2020",Dagger:"\u2021",
daleth:"\u2138",darr:"\u2193",Darr:"\u21a1",dArr:"\u21d3",dash:"\u2010",Dashv:"\u2ae4",dashv:"\u22a3",dbkarow:"\u290f",dblac:"\u02dd",Dcaron:"\u010e",dcaron:"\u010f",Dcy:"\u0414",dcy:"\u0434",ddagger:"\u2021",ddarr:"\u21ca",DD:"\u2145",dd:"\u2146",DDotrahd:"\u2911",ddotseq:"\u2a77",deg:"\u00b0",Del:"\u2207",Delta:"\u0394",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",Dfr:"\ud835\udd07",dfr:"\ud835\udd21",dHar:"\u2965",dharl:"\u21c3",dharr:"\u21c2",DiacriticalAcute:"\u00b4",DiacriticalDot:"\u02d9",
DiacriticalDoubleAcute:"\u02dd",DiacriticalGrave:"`",DiacriticalTilde:"\u02dc",diam:"\u22c4",diamond:"\u22c4",Diamond:"\u22c4",diamondsuit:"\u2666",diams:"\u2666",die:"\u00a8",DifferentialD:"\u2146",digamma:"\u03dd",disin:"\u22f2",div:"\u00f7",divide:"\u00f7",divideontimes:"\u22c7",divonx:"\u22c7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231e",dlcrop:"\u230d",dollar:"$",Dopf:"\ud835\udd3b",dopf:"\ud835\udd55",Dot:"\u00a8",dot:"\u02d9",DotDot:"\u20dc",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",
dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22a1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222f",DoubleDot:"\u00a8",DoubleDownArrow:"\u21d3",DoubleLeftArrow:"\u21d0",DoubleLeftRightArrow:"\u21d4",DoubleLeftTee:"\u2ae4",DoubleLongLeftArrow:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",DoubleLongRightArrow:"\u27f9",DoubleRightArrow:"\u21d2",DoubleRightTee:"\u22a8",DoubleUpArrow:"\u21d1",DoubleUpDownArrow:"\u21d5",DoubleVerticalBar:"\u2225",DownArrowBar:"\u2913",downarrow:"\u2193",DownArrow:"\u2193",
Downarrow:"\u21d3",DownArrowUpArrow:"\u21f5",DownBreve:"\u0311",downdownarrows:"\u21ca",downharpoonleft:"\u21c3",downharpoonright:"\u21c2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVectorBar:"\u2956",DownLeftVector:"\u21bd",DownRightTeeVector:"\u295f",DownRightVectorBar:"\u2957",DownRightVector:"\u21c1",DownTeeArrow:"\u21a7",DownTee:"\u22a4",drbkarow:"\u2910",drcorn:"\u231f",drcrop:"\u230c",Dscr:"\ud835\udc9f",dscr:"\ud835\udcb9",DScy:"\u0405",dscy:"\u0455",dsol:"\u29f6",Dstrok:"\u0110",
dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",dtrif:"\u25be",duarr:"\u21f5",duhar:"\u296f",dwangle:"\u29a6",DZcy:"\u040f",dzcy:"\u045f",dzigrarr:"\u27ff",Eacute:"\u00c9",eacute:"\u00e9",easter:"\u2a6e",Ecaron:"\u011a",ecaron:"\u011b",Ecirc:"\u00ca",ecirc:"\u00ea",ecir:"\u2256",ecolon:"\u2255",Ecy:"\u042d",ecy:"\u044d",eDDot:"\u2a77",Edot:"\u0116",edot:"\u0117",eDot:"\u2251",ee:"\u2147",efDot:"\u2252",Efr:"\ud835\udd08",efr:"\ud835\udd22",eg:"\u2a9a",Egrave:"\u00c8",egrave:"\u00e8",egs:"\u2a96",egsdot:"\u2a98",
el:"\u2a99",Element:"\u2208",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",elsdot:"\u2a97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25fb",emptyv:"\u2205",EmptyVerySmallSquare:"\u25ab",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",ENG:"\u014a",eng:"\u014b",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\ud835\udd3c",eopf:"\ud835\udd56",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",Epsilon:"\u0395",epsilon:"\u03b5",epsiv:"\u03f5",eqcirc:"\u2256",
eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2a96",eqslantless:"\u2a95",Equal:"\u2a75",equals:"=",EqualTilde:"\u2242",equest:"\u225f",Equilibrium:"\u21cc",equiv:"\u2261",equivDD:"\u2a78",eqvparsl:"\u29e5",erarr:"\u2971",erDot:"\u2253",escr:"\u212f",Escr:"\u2130",esdot:"\u2250",Esim:"\u2a73",esim:"\u2242",Eta:"\u0397",eta:"\u03b7",ETH:"\u00d0",eth:"\u00f0",Euml:"\u00cb",euml:"\u00eb",euro:"\u20ac",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",exponentiale:"\u2147",ExponentialE:"\u2147",
fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",Ffr:"\ud835\udd09",ffr:"\ud835\udd23",filig:"\ufb01",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",Fopf:"\ud835\udd3d",fopf:"\ud835\udd57",forall:"\u2200",ForAll:"\u2200",fork:"\u22d4",forkv:"\u2ad9",Fouriertrf:"\u2131",fpartint:"\u2a0d",frac12:"\u00bd",frac13:"\u2153",frac14:"\u00bc",frac15:"\u2155",frac16:"\u2159",
frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\u00be",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",fscr:"\ud835\udcbb",Fscr:"\u2131",gacute:"\u01f5",Gamma:"\u0393",gamma:"\u03b3",Gammad:"\u03dc",gammad:"\u03dd",gap:"\u2a86",Gbreve:"\u011e",gbreve:"\u011f",Gcedil:"\u0122",Gcirc:"\u011c",gcirc:"\u011d",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",ge:"\u2265",gE:"\u2267",gEl:"\u2a8c",gel:"\u22db",geq:"\u2265",
geqq:"\u2267",geqslant:"\u2a7e",gescc:"\u2aa9",ges:"\u2a7e",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",Gfr:"\ud835\udd0a",gfr:"\ud835\udd24",gg:"\u226b",Gg:"\u22d9",ggg:"\u22d9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gla:"\u2aa5",gl:"\u2277",glE:"\u2a92",glj:"\u2aa4",gnap:"\u2a8a",gnapprox:"\u2a8a",gne:"\u2a88",gnE:"\u2269",gneq:"\u2a88",gneqq:"\u2269",gnsim:"\u22e7",Gopf:"\ud835\udd3e",gopf:"\ud835\udd58",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",
GreaterFullEqual:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Gscr:"\ud835\udca2",gscr:"\u210a",gsim:"\u2273",gsime:"\u2a8e",gsiml:"\u2a90",gtcc:"\u2aa7",gtcir:"\u2a7a",gt:">",GT:">",Gt:"\u226b",gtdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrapprox:"\u2a86",gtrarr:"\u2978",gtrdot:"\u22d7",gtreqless:"\u22db",gtreqqless:"\u2a8c",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",Hacek:"\u02c7",hairsp:"\u200a",half:"\u00bd",
hamilt:"\u210b",HARDcy:"\u042a",hardcy:"\u044a",harrcir:"\u2948",harr:"\u2194",hArr:"\u21d4",harrw:"\u21ad",Hat:"^",hbar:"\u210f",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22b9",hfr:"\ud835\udd25",Hfr:"\u210c",HilbertSpace:"\u210b",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",hopf:"\ud835\udd59",Hopf:"\u210d",horbar:"\u2015",HorizontalLine:"\u2500",hscr:"\ud835\udcbd",Hscr:"\u210b",
hslash:"\u210f",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224e",HumpEqual:"\u224f",hybull:"\u2043",hyphen:"\u2010",Iacute:"\u00cd",iacute:"\u00ed",ic:"\u2063",Icirc:"\u00ce",icirc:"\u00ee",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\u00a1",iff:"\u21d4",ifr:"\ud835\udd26",Ifr:"\u2111",Igrave:"\u00cc",igrave:"\u00ec",ii:"\u2148",iiiint:"\u2a0c",iiint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Imacr:"\u012a",imacr:"\u012b",image:"\u2111",
ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",Im:"\u2111",imof:"\u22b7",imped:"\u01b5",Implies:"\u21d2",incare:"\u2105","in":"\u2208",infin:"\u221e",infintie:"\u29dd",inodot:"\u0131",intcal:"\u22ba","int":"\u222b",Int:"\u222c",integers:"\u2124",Integral:"\u222b",intercal:"\u22ba",Intersection:"\u22c2",intlarhk:"\u2a17",intprod:"\u2a3c",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012e",iogon:"\u012f",Iopf:"\ud835\udd40",iopf:"\ud835\udd5a",
Iota:"\u0399",iota:"\u03b9",iprod:"\u2a3c",iquest:"\u00bf",iscr:"\ud835\udcbe",Iscr:"\u2110",isin:"\u2208",isindot:"\u22f5",isinE:"\u22f9",isins:"\u22f4",isinsv:"\u22f3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\u00cf",iuml:"\u00ef",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\ud835\udd0d",jfr:"\ud835\udd27",jmath:"\u0237",Jopf:"\ud835\udd41",jopf:"\ud835\udd5b",Jscr:"\ud835\udca5",jscr:"\ud835\udcbf",Jsercy:"\u0408",jsercy:"\u0458",
Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039a",kappa:"\u03ba",kappav:"\u03f0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041a",kcy:"\u043a",Kfr:"\ud835\udd0e",kfr:"\ud835\udd28",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040c",kjcy:"\u045c",Kopf:"\ud835\udd42",kopf:"\ud835\udd5c",Kscr:"\ud835\udca6",kscr:"\ud835\udcc0",lAarr:"\u21da",Lacute:"\u0139",lacute:"\u013a",laemptyv:"\u29b4",lagran:"\u2112",Lambda:"\u039b",lambda:"\u03bb",lang:"\u27e8",Lang:"\u27ea",langd:"\u2991",langle:"\u27e8",lap:"\u2a85",
Laplacetrf:"\u2112",laquo:"\u00ab",larrb:"\u21e4",larrbfs:"\u291f",larr:"\u2190",Larr:"\u219e",lArr:"\u21d0",larrfs:"\u291d",larrhk:"\u21a9",larrlp:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",latail:"\u2919",lAtail:"\u291b",lat:"\u2aab",late:"\u2aad",lates:"\u2aad\ufe00",lbarr:"\u290c",lBarr:"\u290e",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",Lcaron:"\u013d",lcaron:"\u013e",Lcedil:"\u013b",lcedil:"\u013c",lceil:"\u2308",lcub:"{",Lcy:"\u041b",
lcy:"\u043b",ldca:"\u2936",ldquo:"\u201c",ldquor:"\u201e",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",le:"\u2264",lE:"\u2266",LeftAngleBracket:"\u27e8",LeftArrowBar:"\u21e4",leftarrow:"\u2190",LeftArrow:"\u2190",Leftarrow:"\u21d0",LeftArrowRightArrow:"\u21c6",leftarrowtail:"\u21a2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVectorBar:"\u2959",LeftDownVector:"\u21c3",LeftFloor:"\u230a",leftharpoondown:"\u21bd",leftharpoonup:"\u21bc",leftleftarrows:"\u21c7",
leftrightarrow:"\u2194",LeftRightArrow:"\u2194",Leftrightarrow:"\u21d4",leftrightarrows:"\u21c6",leftrightharpoons:"\u21cb",leftrightsquigarrow:"\u21ad",LeftRightVector:"\u294e",LeftTeeArrow:"\u21a4",LeftTee:"\u22a3",LeftTeeVector:"\u295a",leftthreetimes:"\u22cb",LeftTriangleBar:"\u29cf",LeftTriangle:"\u22b2",LeftTriangleEqual:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVectorBar:"\u2958",LeftUpVector:"\u21bf",LeftVectorBar:"\u2952",LeftVector:"\u21bc",lEg:"\u2a8b",leg:"\u22da",
leq:"\u2264",leqq:"\u2266",leqslant:"\u2a7d",lescc:"\u2aa8",les:"\u2a7d",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessapprox:"\u2a85",lessdot:"\u22d6",lesseqgtr:"\u22da",lesseqqgtr:"\u2a8b",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2aa1",lesssim:"\u2272",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",lfisht:"\u297c",lfloor:"\u230a",Lfr:"\ud835\udd0f",lfr:"\ud835\udd29",lg:"\u2276",lgE:"\u2a91",lHar:"\u2962",
lhard:"\u21bd",lharu:"\u21bc",lharul:"\u296a",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",llarr:"\u21c7",ll:"\u226a",Ll:"\u22d8",llcorner:"\u231e",Lleftarrow:"\u21da",llhard:"\u296b",lltri:"\u25fa",Lmidot:"\u013f",lmidot:"\u0140",lmoustache:"\u23b0",lmoust:"\u23b0",lnap:"\u2a89",lnapprox:"\u2a89",lne:"\u2a87",lnE:"\u2268",lneq:"\u2a87",lneqq:"\u2268",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",lobrk:"\u27e6",longleftarrow:"\u27f5",LongLeftArrow:"\u27f5",Longleftarrow:"\u27f8",longleftrightarrow:"\u27f7",
LongLeftRightArrow:"\u27f7",Longleftrightarrow:"\u27fa",longmapsto:"\u27fc",longrightarrow:"\u27f6",LongRightArrow:"\u27f6",Longrightarrow:"\u27f9",looparrowleft:"\u21ab",looparrowright:"\u21ac",lopar:"\u2985",Lopf:"\ud835\udd43",lopf:"\ud835\udd5d",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25ca",lozenge:"\u25ca",lozf:"\u29eb",lpar:"(",lparlt:"\u2993",lrarr:"\u21c6",lrcorner:"\u231f",lrhar:"\u21cb",lrhard:"\u296d",lrm:"\u200e",
lrtri:"\u22bf",lsaquo:"\u2039",lscr:"\ud835\udcc1",Lscr:"\u2112",lsh:"\u21b0",Lsh:"\u21b0",lsim:"\u2272",lsime:"\u2a8d",lsimg:"\u2a8f",lsqb:"[",lsquo:"\u2018",lsquor:"\u201a",Lstrok:"\u0141",lstrok:"\u0142",ltcc:"\u2aa6",ltcir:"\u2a79",lt:"<",LT:"<",Lt:"\u226a",ltdot:"\u22d6",lthree:"\u22cb",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltri:"\u25c3",ltrie:"\u22b4",ltrif:"\u25c2",ltrPar:"\u2996",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",macr:"\u00af",male:"\u2642",
malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21a6",mapsto:"\u21a6",mapstodown:"\u21a7",mapstoleft:"\u21a4",mapstoup:"\u21a5",marker:"\u25ae",mcomma:"\u2a29",Mcy:"\u041c",mcy:"\u043c",mdash:"\u2014",mDDot:"\u223a",measuredangle:"\u2221",MediumSpace:"\u205f",Mellintrf:"\u2133",Mfr:"\ud835\udd10",mfr:"\ud835\udd2a",mho:"\u2127",micro:"\u00b5",midast:"*",midcir:"\u2af0",mid:"\u2223",middot:"\u00b7",minusb:"\u229f",minus:"\u2212",minusd:"\u2238",minusdu:"\u2a2a",MinusPlus:"\u2213",mlcp:"\u2adb",
mldr:"\u2026",mnplus:"\u2213",models:"\u22a7",Mopf:"\ud835\udd44",mopf:"\ud835\udd5e",mp:"\u2213",mscr:"\ud835\udcc2",Mscr:"\u2133",mstpos:"\u223e",Mu:"\u039c",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natural:"\u266e",naturals:"\u2115",natur:"\u266e",nbsp:"\u00a0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",Ncaron:"\u0147",ncaron:"\u0148",
Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",Ncy:"\u041d",ncy:"\u043d",ndash:"\u2013",nearhk:"\u2924",nearr:"\u2197",neArr:"\u21d7",nearrow:"\u2197",ne:"\u2260",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NewLine:"\n",nexist:"\u2204",nexists:"\u2204",Nfr:"\ud835\udd11",
nfr:"\ud835\udd2b",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",nGg:"\u22d9\u0338",ngsim:"\u2275",nGt:"\u226b\u20d2",ngt:"\u226f",ngtr:"\u226f",nGtv:"\u226b\u0338",nharr:"\u21ae",nhArr:"\u21ce",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",NJcy:"\u040a",njcy:"\u045a",nlarr:"\u219a",nlArr:"\u21cd",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nleftarrow:"\u219a",nLeftarrow:"\u21cd",nleftrightarrow:"\u21ae",nLeftrightarrow:"\u21ce",
nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",nless:"\u226e",nLl:"\u22d8\u0338",nlsim:"\u2274",nLt:"\u226a\u20d2",nlt:"\u226e",nltri:"\u22ea",nltrie:"\u22ec",nLtv:"\u226a\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\u00a0",nopf:"\ud835\udd5f",Nopf:"\u2115",Not:"\u2aec",not:"\u00ac",NotCongruent:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226f",
NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",notin:"\u2209",notindot:"\u22f5\u0338",notinE:"\u22f9\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangle:"\u22ea",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotLessGreater:"\u2278",
NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",notni:"\u220c",notniva:"\u220c",notnivb:"\u22fe",notnivc:"\u22fd",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",NotReverseElement:"\u220c",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangle:"\u22eb",NotRightTriangleEqual:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",
NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",nparallel:"\u2226",npar:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",nprec:"\u2280",
npreceq:"\u2aaf\u0338",npre:"\u2aaf\u0338",nrarrc:"\u2933\u0338",nrarr:"\u219b",nrArr:"\u21cf",nrarrw:"\u219d\u0338",nrightarrow:"\u219b",nRightarrow:"\u21cf",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",nsccue:"\u22e1",nsce:"\u2ab0\u0338",Nscr:"\ud835\udca9",nscr:"\ud835\udcc3",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",
nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",ntgl:"\u2279",Ntilde:"\u00d1",ntilde:"\u00f1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",Nu:"\u039d",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224d\u20d2",nvdash:"\u22ac",nvDash:"\u22ad",nVdash:"\u22ae",nVDash:"\u22af",
nvge:"\u2265\u20d2",nvgt:">\u20d2",nvHarr:"\u2904",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwarhk:"\u2923",nwarr:"\u2196",nwArr:"\u21d6",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\u00d3",oacute:"\u00f3",oast:"\u229b",Ocirc:"\u00d4",ocirc:"\u00f4",ocir:"\u229a",Ocy:"\u041e",ocy:"\u043e",odash:"\u229d",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2a38",odot:"\u2299",odsold:"\u29bc",OElig:"\u0152",
oelig:"\u0153",ofcir:"\u29bf",Ofr:"\ud835\udd12",ofr:"\ud835\udd2c",ogon:"\u02db",Ograve:"\u00d2",ograve:"\u00f2",ogt:"\u29c1",ohbar:"\u29b5",ohm:"\u03a9",oint:"\u222e",olarr:"\u21ba",olcir:"\u29be",olcross:"\u29bb",oline:"\u203e",olt:"\u29c0",Omacr:"\u014c",omacr:"\u014d",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",omid:"\u29b6",ominus:"\u2296",Oopf:"\ud835\udd46",oopf:"\ud835\udd60",opar:"\u29b7",OpenCurlyDoubleQuote:"\u201c",OpenCurlyQuote:"\u2018",operp:"\u29b9",oplus:"\u2295",
orarr:"\u21bb",Or:"\u2a54",or:"\u2228",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",ordf:"\u00aa",ordm:"\u00ba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oS:"\u24c8",Oscr:"\ud835\udcaa",oscr:"\u2134",Oslash:"\u00d8",oslash:"\u00f8",osol:"\u2298",Otilde:"\u00d5",otilde:"\u00f5",otimesas:"\u2a36",Otimes:"\u2a37",otimes:"\u2297",Ouml:"\u00d6",ouml:"\u00f6",ovbar:"\u233d",OverBar:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",OverParenthesis:"\u23dc",para:"\u00b6",parallel:"\u2225",
par:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",PartialD:"\u2202",Pcy:"\u041f",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",Pfr:"\ud835\udd13",pfr:"\ud835\udd2d",Phi:"\u03a6",phi:"\u03c6",phiv:"\u03d5",phmmat:"\u2133",phone:"\u260e",Pi:"\u03a0",pi:"\u03c0",pitchfork:"\u22d4",piv:"\u03d6",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plus:"+",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",PlusMinus:"\u00b1",
plusmn:"\u00b1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\u00b1",Poincareplane:"\u210c",pointint:"\u2a15",popf:"\ud835\udd61",Popf:"\u2119",pound:"\u00a3",prap:"\u2ab7",Pr:"\u2abb",pr:"\u227a",prcue:"\u227c",precapprox:"\u2ab7",prec:"\u227a",preccurlyeq:"\u227c",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",preceq:"\u2aaf",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",pre:"\u2aaf",prE:"\u2ab3",precsim:"\u227e",prime:"\u2032",Prime:"\u2033",primes:"\u2119",
prnap:"\u2ab9",prnE:"\u2ab5",prnsim:"\u22e8",prod:"\u220f",Product:"\u220f",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",Proportional:"\u221d",Proportion:"\u2237",propto:"\u221d",prsim:"\u227e",prurel:"\u22b0",Pscr:"\ud835\udcab",pscr:"\ud835\udcc5",Psi:"\u03a8",psi:"\u03c8",puncsp:"\u2008",Qfr:"\ud835\udd14",qfr:"\ud835\udd2e",qint:"\u2a0c",qopf:"\ud835\udd62",Qopf:"\u211a",qprime:"\u2057",Qscr:"\ud835\udcac",qscr:"\ud835\udcc6",quaternions:"\u210d",quatint:"\u2a16",quest:"?",
questeq:"\u225f",quot:'"',QUOT:'"',rAarr:"\u21db",race:"\u223d\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",rang:"\u27e9",Rang:"\u27eb",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\u00bb",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarr:"\u2192",Rarr:"\u21a0",rArr:"\u21d2",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21a3",rarrw:"\u219d",ratail:"\u291a",rAtail:"\u291c",ratio:"\u2236",
rationals:"\u211a",rbarr:"\u290d",rBarr:"\u290f",RBarr:"\u2910",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",Re:"\u211c",rect:"\u25ad",reg:"\u00ae",REG:"\u00ae",ReverseElement:"\u220b",ReverseEquilibrium:"\u21cb",
ReverseUpEquilibrium:"\u296f",rfisht:"\u297d",rfloor:"\u230b",rfr:"\ud835\udd2f",Rfr:"\u211c",rHar:"\u2964",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",Rho:"\u03a1",rho:"\u03c1",rhov:"\u03f1",RightAngleBracket:"\u27e9",RightArrowBar:"\u21e5",rightarrow:"\u2192",RightArrow:"\u2192",Rightarrow:"\u21d2",RightArrowLeftArrow:"\u21c4",rightarrowtail:"\u21a3",RightCeiling:"\u2309",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVectorBar:"\u2955",RightDownVector:"\u21c2",RightFloor:"\u230b",
rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",rightrightarrows:"\u21c9",rightsquigarrow:"\u219d",RightTeeArrow:"\u21a6",RightTee:"\u22a2",RightTeeVector:"\u295b",rightthreetimes:"\u22cc",RightTriangleBar:"\u29d0",RightTriangle:"\u22b3",RightTriangleEqual:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVectorBar:"\u2954",RightUpVector:"\u21be",RightVectorBar:"\u2953",RightVector:"\u21c0",ring:"\u02da",risingdotseq:"\u2253",
rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoustache:"\u23b1",rmoust:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",ropf:"\ud835\udd63",Ropf:"\u211d",roplus:"\u2a2e",rotimes:"\u2a35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",Rrightarrow:"\u21db",rsaquo:"\u203a",rscr:"\ud835\udcc7",Rscr:"\u211b",rsh:"\u21b1",Rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtimes:"\u22ca",rtri:"\u25b9",rtrie:"\u22b5",rtrif:"\u25b8",
rtriltri:"\u29ce",RuleDelayed:"\u29f4",ruluhar:"\u2968",rx:"\u211e",Sacute:"\u015a",sacute:"\u015b",sbquo:"\u201a",scap:"\u2ab8",Scaron:"\u0160",scaron:"\u0161",Sc:"\u2abc",sc:"\u227b",sccue:"\u227d",sce:"\u2ab0",scE:"\u2ab4",Scedil:"\u015e",scedil:"\u015f",Scirc:"\u015c",scirc:"\u015d",scnap:"\u2aba",scnE:"\u2ab6",scnsim:"\u22e9",scpolint:"\u2a13",scsim:"\u227f",Scy:"\u0421",scy:"\u0441",sdotb:"\u22a1",sdot:"\u22c5",sdote:"\u2a66",searhk:"\u2925",searr:"\u2198",seArr:"\u21d8",searrow:"\u2198",sect:"\u00a7",
semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\ud835\udd16",sfr:"\ud835\udd30",sfrown:"\u2322",sharp:"\u266f",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\u00ad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",sim:"\u223c",simdot:"\u2a6a",sime:"\u2243",simeq:"\u2243",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",
simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2a33",smeparsl:"\u29e4",smid:"\u2223",smile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",SOFTcy:"\u042c",softcy:"\u044c",solbar:"\u233f",solb:"\u29c4",sol:"/",Sopf:"\ud835\udd4a",sopf:"\ud835\udd64",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\ufe00",sqcup:"\u2294",sqcups:"\u2294\ufe00",Sqrt:"\u221a",sqsub:"\u228f",sqsube:"\u2291",
sqsubset:"\u228f",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",square:"\u25a1",Square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25aa",squ:"\u25a1",squf:"\u25aa",srarr:"\u2192",Sscr:"\ud835\udcae",sscr:"\ud835\udcc8",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22c6",Star:"\u22c6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03f5",
straightphi:"\u03d5",strns:"\u00af",sub:"\u2282",Sub:"\u22d0",subdot:"\u2abd",subE:"\u2ac5",sube:"\u2286",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subne:"\u228a",subplus:"\u2abf",subrarr:"\u2979",subset:"\u2282",Subset:"\u22d0",subseteq:"\u2286",subseteqq:"\u2ac5",SubsetEqual:"\u2286",subsetneq:"\u228a",subsetneqq:"\u2acb",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",succapprox:"\u2ab8",succ:"\u227b",succcurlyeq:"\u227d",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",
SucceedsTilde:"\u227f",succeq:"\u2ab0",succnapprox:"\u2aba",succneqq:"\u2ab6",succnsim:"\u22e9",succsim:"\u227f",SuchThat:"\u220b",sum:"\u2211",Sum:"\u2211",sung:"\u266a",sup1:"\u00b9",sup2:"\u00b2",sup3:"\u00b3",sup:"\u2283",Sup:"\u22d1",supdot:"\u2abe",supdsub:"\u2ad8",supE:"\u2ac6",supe:"\u2287",supedot:"\u2ac4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supne:"\u228b",supplus:"\u2ac0",supset:"\u2283",Supset:"\u22d1",
supseteq:"\u2287",supseteqq:"\u2ac6",supsetneq:"\u228b",supsetneqq:"\u2acc",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swarhk:"\u2926",swarr:"\u2199",swArr:"\u21d9",swarrow:"\u2199",swnwar:"\u292a",szlig:"\u00df",Tab:"\t",target:"\u2316",Tau:"\u03a4",tau:"\u03c4",tbrk:"\u23b4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20db",telrec:"\u2315",Tfr:"\ud835\udd17",tfr:"\ud835\udd31",there4:"\u2234",therefore:"\u2234",Therefore:"\u2234",Theta:"\u0398",
theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",thickapprox:"\u2248",thicksim:"\u223c",ThickSpace:"\u205f\u200a",ThinSpace:"\u2009",thinsp:"\u2009",thkap:"\u2248",thksim:"\u223c",THORN:"\u00de",thorn:"\u00fe",tilde:"\u02dc",Tilde:"\u223c",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",timesbar:"\u2a31",timesb:"\u22a0",times:"\u00d7",timesd:"\u2a30",tint:"\u222d",toea:"\u2928",topbot:"\u2336",topcir:"\u2af1",top:"\u22a4",Topf:"\ud835\udd4b",topf:"\ud835\udd65",topfork:"\u2ada",tosa:"\u2929",
tprime:"\u2034",trade:"\u2122",TRADE:"\u2122",triangle:"\u25b5",triangledown:"\u25bf",triangleleft:"\u25c3",trianglelefteq:"\u22b4",triangleq:"\u225c",triangleright:"\u25b9",trianglerighteq:"\u22b5",tridot:"\u25ec",trie:"\u225c",triminus:"\u2a3a",TripleDot:"\u20db",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",Tscr:"\ud835\udcaf",tscr:"\ud835\udcc9",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040b",tshcy:"\u045b",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226c",twoheadleftarrow:"\u219e",
twoheadrightarrow:"\u21a0",Uacute:"\u00da",uacute:"\u00fa",uarr:"\u2191",Uarr:"\u219f",uArr:"\u21d1",Uarrocir:"\u2949",Ubrcy:"\u040e",ubrcy:"\u045e",Ubreve:"\u016c",ubreve:"\u016d",Ucirc:"\u00db",ucirc:"\u00fb",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21c5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296e",ufisht:"\u297e",Ufr:"\ud835\udd18",ufr:"\ud835\udd32",Ugrave:"\u00d9",ugrave:"\u00f9",uHar:"\u2963",uharl:"\u21bf",uharr:"\u21be",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",
Umacr:"\u016a",umacr:"\u016b",uml:"\u00a8",UnderBar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",UnionPlus:"\u228e",Uogon:"\u0172",uogon:"\u0173",Uopf:"\ud835\udd4c",uopf:"\ud835\udd66",UpArrowBar:"\u2912",uparrow:"\u2191",UpArrow:"\u2191",Uparrow:"\u21d1",UpArrowDownArrow:"\u21c5",updownarrow:"\u2195",UpDownArrow:"\u2195",Updownarrow:"\u21d5",UpEquilibrium:"\u296e",upharpoonleft:"\u21bf",upharpoonright:"\u21be",uplus:"\u228e",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",
upsi:"\u03c5",Upsi:"\u03d2",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",UpTeeArrow:"\u21a5",UpTee:"\u22a5",upuparrows:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",Uring:"\u016e",uring:"\u016f",urtri:"\u25f9",Uscr:"\ud835\udcb0",uscr:"\ud835\udcca",utdot:"\u22f0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25b5",utrif:"\u25b4",uuarr:"\u21c8",Uuml:"\u00dc",uuml:"\u00fc",uwangle:"\u29a7",vangrt:"\u299c",varepsilon:"\u03f5",varkappa:"\u03f0",varnothing:"\u2205",varphi:"\u03d5",varpi:"\u03d6",
varpropto:"\u221d",varr:"\u2195",vArr:"\u21d5",varrho:"\u03f1",varsigma:"\u03c2",varsubsetneq:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vartheta:"\u03d1",vartriangleleft:"\u22b2",vartriangleright:"\u22b3",vBar:"\u2ae8",Vbar:"\u2aeb",vBarv:"\u2ae9",Vcy:"\u0412",vcy:"\u0432",vdash:"\u22a2",vDash:"\u22a8",Vdash:"\u22a9",VDash:"\u22ab",Vdashl:"\u2ae6",veebar:"\u22bb",vee:"\u2228",Vee:"\u22c1",veeeq:"\u225a",vellip:"\u22ee",verbar:"|",Verbar:"\u2016",
vert:"|",Vert:"\u2016",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200a",Vfr:"\ud835\udd19",vfr:"\ud835\udd33",vltri:"\u22b2",vnsub:"\u2282\u20d2",vnsup:"\u2283\u20d2",Vopf:"\ud835\udd4d",vopf:"\ud835\udd67",vprop:"\u221d",vrtri:"\u22b3",Vscr:"\ud835\udcb1",vscr:"\ud835\udccb",vsubnE:"\u2acb\ufe00",vsubne:"\u228a\ufe00",vsupnE:"\u2acc\ufe00",vsupne:"\u228b\ufe00",Vvdash:"\u22aa",vzigzag:"\u299a",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2a5f",
wedge:"\u2227",Wedge:"\u22c0",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\ud835\udd1a",wfr:"\ud835\udd34",Wopf:"\ud835\udd4e",wopf:"\ud835\udd68",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\ud835\udcb2",wscr:"\ud835\udccc",xcap:"\u22c2",xcirc:"\u25ef",xcup:"\u22c3",xdtri:"\u25bd",Xfr:"\ud835\udd1b",xfr:"\ud835\udd35",xharr:"\u27f7",xhArr:"\u27fa",Xi:"\u039e",xi:"\u03be",xlarr:"\u27f5",xlArr:"\u27f8",xmap:"\u27fc",xnis:"\u22fb",xodot:"\u2a00",Xopf:"\ud835\udd4f",xopf:"\ud835\udd69",xoplus:"\u2a01",xotime:"\u2a02",
xrarr:"\u27f6",xrArr:"\u27f9",Xscr:"\ud835\udcb3",xscr:"\ud835\udccd",xsqcup:"\u2a06",xuplus:"\u2a04",xutri:"\u25b3",xvee:"\u22c1",xwedge:"\u22c0",Yacute:"\u00dd",yacute:"\u00fd",YAcy:"\u042f",yacy:"\u044f",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042b",ycy:"\u044b",yen:"\u00a5",Yfr:"\ud835\udd1c",yfr:"\ud835\udd36",YIcy:"\u0407",yicy:"\u0457",Yopf:"\ud835\udd50",yopf:"\ud835\udd6a",Yscr:"\ud835\udcb4",yscr:"\ud835\udcce",YUcy:"\u042e",yucy:"\u044e",yuml:"\u00ff",Yuml:"\u0178",Zacute:"\u0179",zacute:"\u017a",
Zcaron:"\u017d",zcaron:"\u017e",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017b",zdot:"\u017c",zeetrf:"\u2128",ZeroWidthSpace:"\u200b",Zeta:"\u0396",zeta:"\u03b6",zfr:"\ud835\udd37",Zfr:"\u2128",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21dd",zopf:"\ud835\udd6b",Zopf:"\u2124",Zscr:"\ud835\udcb5",zscr:"\ud835\udccf",zwj:"\u200d",zwnj:"\u200c"},zf=Object.freeze({__proto__:null,"default":hf}),Gg={},vg=Gg=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,
tg=Object.freeze({__proto__:null,"default":vg}),pd={},Z={};We.defaultChars=";/?:@&=+$,-_.!~*'()#";We.componentChars="-_.!~*'()";var Ga=pd=We,fb={},ya={};Fg.defaultChars=";/?:@&=+$,#";Fg.componentChars="";var tc=fb=Fg,Mc={},Cd=/^([a-z0-9.+-]+:)/i,Ee=/:[0-9]*$/,bf=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Oe="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),Fe=["'"].concat(Oe),Pf=["%","/","?",";","#"].concat(Fe),eg=["/","?","#"],be=/^[+a-z0-9A-Z_-]{0,63}$/,v=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,oa={javascript:!0,
"javascript:":!0},Oc={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};Zc.prototype.parse=function(G,ca){var lb,S;var Ra=G.trim();if(!ca&&1===G.split("#").length&&(G=bf.exec(Ra)))return this.pathname=G[1],G[2]&&(this.search=G[2]),this;if(G=Cd.exec(Ra)){G=G[0];var Da=G.toLowerCase();this.protocol=G;Ra=Ra.substr(G.length)}if(ca||G||Ra.match(/^\/\/[^@\/]+@[^@\/]+/))!(S="//"===Ra.substr(0,2))||G&&oa[G]||(Ra=Ra.substr(2),this.slashes=!0);if(!oa[G]&&(S||
G&&!Oc[G])){S=-1;for(ca=0;ca<eg.length;ca++)G=Ra.indexOf(eg[ca]),-1!==G&&(-1===S||G<S)&&(S=G);S=-1===S?Ra.lastIndexOf("@"):Ra.lastIndexOf("@",S);-1!==S&&(ca=Ra.slice(0,S),Ra=Ra.slice(S+1),this.auth=ca);S=-1;for(ca=0;ca<Pf.length;ca++)G=Ra.indexOf(Pf[ca]),-1!==G&&(-1===S||G<S)&&(S=G);-1===S&&(S=Ra.length);":"===Ra[S-1]&&S--;ca=Ra.slice(0,S);Ra=Ra.slice(S);this.parseHost(ca);this.hostname=this.hostname||"";S="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!S){var Ja=this.hostname.split(/\./);
ca=0;for(lb=Ja.length;ca<lb;ca++)if((G=Ja[ca])&&!G.match(be)){for(var Pa="",Za=0,Zb=G.length;Za<Zb;Za++)Pa=127<G.charCodeAt(Za)?Pa+"x":Pa+G[Za];if(!Pa.match(be)){lb=Ja.slice(0,ca);ca=Ja.slice(ca+1);if(G=G.match(v))lb.push(G[1]),ca.unshift(G[2]);ca.length&&(Ra=ca.join(".")+Ra);this.hostname=lb.join(".");break}}}255<this.hostname.length&&(this.hostname="");S&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}ca=Ra.indexOf("#");-1!==ca&&(this.hash=Ra.substr(ca),Ra=Ra.slice(0,ca));ca=Ra.indexOf("?");
-1!==ca&&(this.search=Ra.substr(ca),Ra=Ra.slice(0,ca));Ra&&(this.pathname=Ra);Oc[Da]&&this.hostname&&!this.pathname&&(this.pathname="");return this};Zc.prototype.parseHost=function(G){var ca=Ee.exec(G);ca&&(ca=ca[0],":"!==ca&&(this.port=ca.substr(1)),G=G.substr(0,G.length-ca.length));G&&(this.hostname=G)};var Tb=Mc=function(G,ca){if(G&&G instanceof Zc)return G;var lb=new Zc;lb.parse(G,ca);return lb},ne={},Ye=ne=function(G){var ca=""+(G.protocol||"");ca+=G.slashes?"//":"";ca+=G.auth?G.auth+"@":"";
ca=G.hostname&&-1!==G.hostname.indexOf(":")?ca+("["+G.hostname+"]"):ca+(G.hostname||"");ca+=G.port?":"+G.port:"";ca+=G.pathname||"";ca+=G.search||"";return ca+=G.hash||""},Kf={};Kf.encode=Ga;Kf.decode=tc;Kf.format=Ye;Kf.parse=Tb;var jg=Object.freeze({__proto__:null,"default":Kf,decode:Kf.decode,encode:Kf.encode,format:Kf.format,parse:Kf.parse}),Og={},te=Og=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Eh={},$h=Eh=
/[\0-\x1F\x7F-\x9F]/,Gi={},Ng=Gi=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,Ii={},fi=Ii=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Ji={};Ji.Any=te;Ji.Cc=$h;Ji.Cf=Ng;Ji.P=vg;Ji.Z=fi;var gi=Object.freeze({__proto__:null,"default":Ji,Any:Ji.Any,Cc:Ji.Cc,Cf:Ji.Cf,P:Ji.P,Z:Ji.Z}),xj="default"in zf?hf:zf,yg="default"in
jg?Kf:jg,Ti="default"in gi?Ji:gi,ke={},Mg=Object.prototype.hasOwnProperty,Hh=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,Zf=new RegExp(Hh.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),z=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,C=/[&<>"]/,K=/[&<>"]/g,T={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},O=/[.?*+^$[\]\\(){}|-]/g,qa="default"in tg?vg:tg;ke.lib={};ke.lib.mdurl=yg;ke.lib.ucmicro=Ti;ke.assign=function(G){Array.prototype.slice.call(arguments,1).forEach(function(ca){if(ca){if("object"!==
sb(ca))throw new TypeError(ca+"must be object");Object.keys(ca).forEach(function(lb){G[lb]=ca[lb]})}});return G};ke.isString=function(G){return"[object String]"===Object.prototype.toString.call(G)};ke.has=rd;ke.unescapeMd=function(G){return 0>G.indexOf("\\")?G:G.replace(Hh,"$1")};ke.unescapeAll=function(G){return 0>G.indexOf("\\")&&0>G.indexOf("&")?G:G.replace(Zf,function(ca,lb,S){if(lb)return lb;rd(xj,S)?ca=xj[S]:35===S.charCodeAt(0)&&z.test(S)&&(lb="x"===S[1].toLowerCase()?parseInt(S.slice(2),16):
parseInt(S.slice(1),10),ti(lb)&&(ca=dg(lb)));return ca})};ke.isValidEntityCode=ti;ke.fromCodePoint=dg;ke.escapeHtml=function(G){return C.test(G)?G.replace(K,Of):G};ke.arrayReplaceAt=function(G,ca,lb){return[].concat(G.slice(0,ca),lb,G.slice(ca+1))};ke.isSpace=function(G){switch(G){case 9:case 32:return!0}return!1};ke.isWhiteSpace=function(G){if(8192<=G&&8202>=G)return!0;switch(G){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1};ke.isMdAsciiPunct=
function(G){switch(G){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}};ke.isPunctChar=function(G){return qa.test(G)};ke.escapeRE=function(G){return G.replace(O,"\\$&")};ke.normalizeReference=function(G){G=G.trim().replace(/\s+/g," ");return G.toLowerCase().toUpperCase()};
ke.lib;ke.assign;ke.isString;ke.has;ke.unescapeMd;ke.unescapeAll;ke.isValidEntityCode;ke.fromCodePoint;ke.escapeHtml;ke.arrayReplaceAt;ke.isSpace;ke.isWhiteSpace;ke.isMdAsciiPunct;ke.isPunctChar;ke.escapeRE;ke.normalizeReference;var Ba={},ib=Ba=function(G,ca,lb){var S=-1,Ra=G.posMax,Da=G.pos;G.pos=ca+1;for(ca=1;G.pos<Ra;){var Ja=G.src.charCodeAt(G.pos);if(93===Ja&&(ca--,0===ca)){var Pa=!0;break}var Za=G.pos;G.md.inline.skipToken(G);if(91===Ja)if(Za===G.pos-1)ca++;else if(lb)return G.pos=Da,-1}Pa&&
(S=G.pos);G.pos=Da;return S},Ub={},pc=ke.assign,Dc=ke.unescapeAll,kd=ke.escapeHtml,Ad={code_inline:function(G,ca,lb,S,Ra){return"<code"+Ra.renderAttrs(G[ca])+">"+kd(G[ca].content)+"</code>"},code_block:function(G,ca,lb,S,Ra){return"<pre"+Ra.renderAttrs(G[ca])+"><code>"+kd(G[ca].content)+"</code></pre>\n"},fence:function(G,ca,lb,S,Ra){ca=G[ca];var Da=ca.info?Dc(ca.info).trim():"";S=G="";Da&&(S=Da.split(/(\s+)/g),G=S[0],S=S.slice(2).join(""));S=lb.highlight?lb.highlight(ca.content,G,S)||kd(ca.content):
kd(ca.content);return 0===S.indexOf("<pre")?S+"\n":Da?(Da=ca.attrIndex("class"),ca=ca.attrs?ca.attrs.slice():[],0>Da?ca.push(["class",lb.langPrefix+G]):(ca[Da]=ca[Da].slice(),ca[Da][1]+=" "+lb.langPrefix+G),lb={attrs:ca},"<pre><code"+Ra.renderAttrs(lb)+">"+S+"</code></pre>\n"):"<pre><code"+Ra.renderAttrs(ca)+">"+S+"</code></pre>\n"},image:function(G,ca,lb,S,Ra){var Da=G[ca];Da.attrs[Da.attrIndex("alt")][1]=Ra.renderInlineAsText(Da.children,lb,S);return Ra.renderToken(G,ca,lb)},hardbreak:function(G,
ca,lb){return lb.xhtmlOut?"<br />\n":"<br>\n"},softbreak:function(G,ca,lb){return lb.breaks?lb.xhtmlOut?"<br />\n":"<br>\n":"\n"},text:function(G,ca){return kd(G[ca].content)},html_block:function(G,ca){return G[ca].content},html_inline:function(G,ca){return G[ca].content}};mg.prototype.renderAttrs=function(G){var ca;if(!G.attrs)return"";var lb="";var S=0;for(ca=G.attrs.length;S<ca;S++)lb+=" "+kd(G.attrs[S][0])+'="'+kd(G.attrs[S][1])+'"';return lb};mg.prototype.renderToken=function(G,ca,lb){var S=
"",Ra=!1,Da=G[ca];if(Da.hidden)return"";Da.block&&-1!==Da.nesting&&ca&&G[ca-1].hidden&&(S+="\n");S+=(-1===Da.nesting?"</":"<")+Da.tag;S+=this.renderAttrs(Da);0===Da.nesting&&lb.xhtmlOut&&(S+=" /");Da.block&&(Ra=!0,1===Da.nesting&&ca+1<G.length&&(G=G[ca+1],"inline"===G.type||G.hidden?Ra=!1:-1===G.nesting&&G.tag===Da.tag&&(Ra=!1)));return S+(Ra?">\n":">")};mg.prototype.renderInline=function(G,ca,lb){for(var S,Ra="",Da=this.rules,Ja=0,Pa=G.length;Ja<Pa;Ja++)S=G[Ja].type,Ra="undefined"!==typeof Da[S]?
Ra+Da[S](G,Ja,ca,lb,this):Ra+this.renderToken(G,Ja,ca);return Ra};mg.prototype.renderInlineAsText=function(G,ca,lb){for(var S="",Ra=0,Da=G.length;Ra<Da;Ra++)"text"===G[Ra].type?S+=G[Ra].content:"image"===G[Ra].type?S+=this.renderInlineAsText(G[Ra].children,ca,lb):"softbreak"===G[Ra].type&&(S+="\n");return S};mg.prototype.render=function(G,ca,lb){var S,Ra="",Da=this.rules;var Ja=0;for(S=G.length;Ja<S;Ja++){var Pa=G[Ja].type;Ra="inline"===Pa?Ra+this.renderInline(G[Ja].children,ca,lb):"undefined"!==
typeof Da[Pa]?Ra+Da[G[Ja].type](G,Ja,ca,lb,this):Ra+this.renderToken(G,Ja,ca,lb)}return Ra};var Rd=Ub=mg,cf={};wf.prototype.attrIndex=function(G){var ca;if(!this.attrs)return-1;var lb=this.attrs;var S=0;for(ca=lb.length;S<ca;S++)if(lb[S][0]===G)return S;return-1};wf.prototype.attrPush=function(G){this.attrs?this.attrs.push(G):this.attrs=[G]};wf.prototype.attrSet=function(G,ca){var lb=this.attrIndex(G);G=[G,ca];0>lb?this.attrPush(G):this.attrs[lb]=G};wf.prototype.attrGet=function(G){G=this.attrIndex(G);
var ca=null;0<=G&&(ca=this.attrs[G][1]);return ca};wf.prototype.attrJoin=function(G,ca){var lb=this.attrIndex(G);0>lb?this.attrPush([G,ca]):this.attrs[lb][1]=this.attrs[lb][1]+" "+ca};var Ud=cf=wf,Ge={},Se=Ge="address article aside base basefont blockquote body caption center col colgroup dd details dialog dir div dl dt fieldset figcaption figure footer form frame frameset h1 h2 h3 h4 h5 h6 head header hr html iframe legend li link main menu menuitem nav noframes ol optgroup option p param section source summary table tbody td tfoot th thead title tr track ul".split(" ");
var mh=/^(?:<[A-Za-z][A-Za-z0-9\-]*(?:\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\s*=\s*(?:[^"'=<>`\x00-\x20]+|'[^']*'|"[^"]*"))?)*\s*\/?>|<\/[A-Za-z][A-Za-z0-9\-]*\s*>|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?][\s\S]*?[?]>|<![A-Z]+\s+[^>]*>|<!\[CDATA\[[\s\S]*?\]\]>)/;var Rh={},dh=ke.isWhiteSpace,eh=ke.isPunctChar,Rg=ke.isMdAsciiPunct;mf.prototype.pushPending=function(){var G=new Ud("text","",0);G.content=this.pending;G.level=this.pendingLevel;this.tokens.push(G);this.pending="";return G};mf.prototype.push=
function(G,ca,lb){this.pending&&this.pushPending();G=new Ud(G,ca,lb);ca=null;0>lb&&(this.level--,this.delimiters=this._prev_delimiters.pop());G.level=this.level;0<lb&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],ca={delimiters:this.delimiters});this.pendingLevel=this.level;this.tokens.push(G);this.tokens_meta.push(ca);return G};mf.prototype.scanDelims=function(G,ca){var lb=G,S,Ra,Da=Ra=!0;var Ja=this.posMax;var Pa=this.src.charCodeAt(G);for(S=0<G?this.src.charCodeAt(G-
1):32;lb<Ja&&this.src.charCodeAt(lb)===Pa;)lb++;G=lb-G;Pa=lb<Ja?this.src.charCodeAt(lb):32;Ja=Rg(S)||eh(String.fromCharCode(S));lb=Rg(Pa)||eh(String.fromCharCode(Pa));S=dh(S);(Pa=dh(Pa))?Ra=!1:lb&&(S||Ja||(Ra=!1));S?Da=!1:Ja&&(Pa||lb||(Da=!1));ca?(ca=Ra,Ra=Da):(ca=Ra&&(!Da||Ja),Ra=Da&&(!Ra||lb));return{can_open:ca,can_close:Ra,length:G}};mf.prototype.Token=Ud;var $c=Rh=mf,vf=Object.freeze({__proto__:null,"default":te}),ye=Object.freeze({__proto__:null,"default":$h}),Yc=Object.freeze({__proto__:null,
"default":fi}),Tc="default"in vf?te:vf,td="default"in ye?$h:ye,hd="default"in Yc?fi:Yc,aa="default"in tg?vg:tg,Sa={},Ma=Sa=function(G){var ca={};ca.src_Any=Tc.source;ca.src_Cc=td.source;ca.src_Z=hd.source;ca.src_P=aa.source;ca.src_ZPCc=[ca.src_Z,ca.src_P,ca.src_Cc].join("|");ca.src_ZCc=[ca.src_Z,ca.src_Cc].join("|");ca.src_pseudo_letter="(?:(?![><\uff5c]|"+ca.src_ZPCc+")"+ca.src_Any+")";ca.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)";ca.src_auth=
"(?:(?:(?!"+ca.src_ZCc+"|[@/\\[\\]()]).)+@)?";ca.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?";ca.src_host_terminator="(?=$|[><\uff5c]|"+ca.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+ca.src_ZPCc+"))";ca.src_path="(?:[/?#](?:(?!"+ca.src_ZCc+"|[><\uff5c]|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+ca.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+ca.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+ca.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+ca.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+ca.src_ZCc+"|[']).)+\\'|\\'(?="+
ca.src_pseudo_letter+"|[-]).|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+ca.src_ZCc+"|[.]).|"+(G&&G["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+ca.src_ZCc+").|;(?!"+ca.src_ZCc+").|\\!+(?!"+ca.src_ZCc+"|[!]).|\\?(?!"+ca.src_ZCc+"|[?]).)+|\\/)?";ca.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*';ca.src_xn="xn--[a-z0-9\\-]{1,59}";ca.src_domain_root="(?:"+ca.src_xn+"|"+ca.src_pseudo_letter+"{1,63})";ca.src_domain="(?:"+ca.src_xn+"|(?:"+ca.src_pseudo_letter+")|(?:"+ca.src_pseudo_letter+
"(?:-|"+ca.src_pseudo_letter+"){0,61}"+ca.src_pseudo_letter+"))";ca.src_host="(?:(?:(?:(?:"+ca.src_domain+")\\.)*"+ca.src_domain+"))";ca.tpl_host_fuzzy="(?:"+ca.src_ip4+"|(?:(?:(?:"+ca.src_domain+")\\.)+(?:%TLDS%)))";ca.tpl_host_no_ip_fuzzy="(?:(?:(?:"+ca.src_domain+")\\.)+(?:%TLDS%))";ca.src_host_strict=ca.src_host+ca.src_host_terminator;ca.tpl_host_fuzzy_strict=ca.tpl_host_fuzzy+ca.src_host_terminator;ca.src_host_port_strict=ca.src_host+ca.src_port+ca.src_host_terminator;ca.tpl_host_port_fuzzy_strict=
ca.tpl_host_fuzzy+ca.src_port+ca.src_host_terminator;ca.tpl_host_port_no_ip_fuzzy_strict=ca.tpl_host_no_ip_fuzzy+ca.src_port+ca.src_host_terminator;ca.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+ca.src_ZPCc+"|>|$))";ca.tpl_email_fuzzy='(^|[><\uff5c]|"|\\(|'+ca.src_ZCc+")("+ca.src_email_name+"@"+ca.tpl_host_fuzzy_strict+")";ca.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+ca.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+ca.tpl_host_port_fuzzy_strict+ca.src_path+")";ca.tpl_link_no_ip_fuzzy=
"(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+ca.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+ca.tpl_host_port_no_ip_fuzzy_strict+ca.src_path+")";return ca},jb={},Jb={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},gc={"http:":{validate:function(G,ca,lb){G=G.slice(ca);lb.re.http||(lb.re.http=new RegExp("^\\/\\/"+lb.re.src_auth+lb.re.src_host_port_strict+lb.re.src_path,"i"));return lb.re.http.test(G)?G.match(lb.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(G,ca,lb){var S=G.slice(ca);lb.re.no_http||
(lb.re.no_http=new RegExp("^"+lb.re.src_auth+"(?:localhost|(?:(?:"+lb.re.src_domain+")\\.)+"+lb.re.src_domain_root+")"+lb.re.src_port+lb.re.src_host_terminator+lb.re.src_path,"i"));return lb.re.no_http.test(S)?3<=ca&&":"===G[ca-3]||3<=ca&&"/"===G[ca-3]?0:S.match(lb.re.no_http)[0].length:0}},"mailto:":{validate:function(G,ca,lb){G=G.slice(ca);lb.re.mailto||(lb.re.mailto=new RegExp("^"+lb.re.src_email_name+"@"+lb.re.src_host_strict,"i"));return lb.re.mailto.test(G)?G.match(lb.re.mailto)[0].length:0}}},
ac="biz com edu gov net org pro web xxx aero asia coop info museum name shop \u0440\u0444".split(" ");Ta.prototype.add=function(G,ca){this.__schemas__[G]=ca;he(this);return this};Ta.prototype.set=function(G){this.__opts__=Mb(this.__opts__,G);return this};Ta.prototype.test=function(G){this.__text_cache__=G;this.__index__=-1;if(!G.length)return!1;var ca,lb,S,Ra;if(this.re.schema_test.test(G)){var Da=this.re.schema_search;for(Da.lastIndex=0;null!==(ca=Da.exec(G));)if(Ra=this.testSchemaAt(G,ca[2],Da.lastIndex)){this.__schema__=
ca[2];this.__index__=ca.index+ca[1].length;this.__last_index__=ca.index+ca[0].length+Ra;break}}this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(ca=G.search(this.re.host_fuzzy_test),0<=ca&&(0>this.__index__||ca<this.__index__)&&null!==(lb=G.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(ca=lb.index+lb[1].length,0>this.__index__||ca<this.__index__))&&(this.__schema__="",this.__index__=ca,this.__last_index__=lb.index+lb[0].length);this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&
(lb=G.indexOf("@"),0<=lb&&null!==(S=G.match(this.re.email_fuzzy))&&(ca=S.index+S[1].length,G=S.index+S[0].length,0>this.__index__||ca<this.__index__||ca===this.__index__&&G>this.__last_index__))&&(this.__schema__="mailto:",this.__index__=ca,this.__last_index__=G);return 0<=this.__index__};Ta.prototype.pretest=function(G){return this.re.pretest.test(G)};Ta.prototype.testSchemaAt=function(G,ca,lb){return this.__compiled__[ca.toLowerCase()]?this.__compiled__[ca.toLowerCase()].validate(G,lb,this):0};
Ta.prototype.match=function(G){var ca=0,lb=[];0<=this.__index__&&this.__text_cache__===G&&(lb.push($g(this,ca)),ca=this.__last_index__);for(G=ca?G.slice(ca):G;this.test(G);)lb.push($g(this,ca)),G=G.slice(this.__last_index__),ca+=this.__last_index__;return lb.length?lb:null};Ta.prototype.tlds=function(G,ca){G=Array.isArray(G)?G:[G];if(!ca)return this.__tlds__=G.slice(),this.__tlds_replaced__=!0,he(this),this;this.__tlds__=this.__tlds__.concat(G).sort().filter(function(lb,S,Ra){return lb!==Ra[S-1]}).reverse();
he(this);return this};Ta.prototype.normalize=function(G){G.schema||(G.url="http://"+G.url);"mailto:"!==G.schema||/^mailto:/i.test(G.url)||(G.url="mailto:"+G.url)};Ta.prototype.onCompile=function(){};var Kc=jb=Ta,md=Object.freeze({__proto__:null,"default":Kc});fa.decode;fa.encode;fa.toASCII;fa.toUnicode;fa.ucs2;fa.version;var ud=Object.freeze({__proto__:null,"default":fa,decode:fa.decode,encode:fa.encode,toASCII:fa.toASCII,toUnicode:fa.toUnicode,ucs2:fa.ucs2,version:fa.version}),oe={},ze=oe={options:{html:!1,
xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Ue={},Me=ke.unescapeAll,xf=Ue=function(G,ca,lb){var S,Ra=ca,Da={ok:!1,pos:0,lines:0,str:""};if(60===G.charCodeAt(ca)){for(ca++;ca<lb;){var Ja=G.charCodeAt(ca);if(10===Ja)break;if(60===Ja)break;if(62===Ja){Da.pos=ca+1;Da.str=Me(G.slice(Ra+1,ca));Da.ok=!0;break}92===Ja&&ca+1<lb?ca+=2:ca++}return Da}for(S=0;ca<lb;){Ja=G.charCodeAt(ca);
if(32===Ja)break;if(32>Ja||127===Ja)break;if(92===Ja&&ca+1<lb){if(32===G.charCodeAt(ca+1))break;ca+=2}else{if(40===Ja&&(S++,32<S))return Da;if(41===Ja){if(0===S)break;S--}ca++}}if(Ra===ca||0!==S)return Da;Da.str=Me(G.slice(Ra,ca));Da.lines=0;Da.pos=ca;Da.ok=!0;return Da},lf={},Rf=ke.unescapeAll,Hg=lf=function(G,ca,lb){var S=0,Ra=ca,Da={ok:!1,pos:0,lines:0,str:""};if(ca>=lb)return Da;var Ja=G.charCodeAt(ca);if(34!==Ja&&39!==Ja&&40!==Ja)return Da;ca++;for(40===Ja&&(Ja=41);ca<lb;){var Pa=G.charCodeAt(ca);
if(Pa===Ja){Da.pos=ca+1;Da.lines=S;Da.str=Rf(G.slice(Ra+1,ca));Da.ok=!0;break}else if(40===Pa&&41===Ja)break;else 10===Pa?S++:92===Pa&&ca+1<lb&&(ca++,10===G.charCodeAt(ca)&&S++);ca++}return Da},ng={};ng.parseLinkLabel=ib;ng.parseLinkDestination=xf;ng.parseLinkTitle=Hg;var fg={};th.prototype.__find__=function(G){for(var ca=0;ca<this.__rules__.length;ca++)if(this.__rules__[ca].name===G)return ca;return-1};th.prototype.__compile__=function(){var G=this,ca=[""];G.__rules__.forEach(function(lb){lb.enabled&&
lb.alt.forEach(function(S){0>ca.indexOf(S)&&ca.push(S)})});G.__cache__={};ca.forEach(function(lb){G.__cache__[lb]=[];G.__rules__.forEach(function(S){S.enabled&&(lb&&0>S.alt.indexOf(lb)||G.__cache__[lb].push(S.fn))})})};th.prototype.at=function(G,ca,lb){var S=this.__find__(G);lb=lb||{};if(-1===S)throw Error("Parser rule not found: "+G);this.__rules__[S].fn=ca;this.__rules__[S].alt=lb.alt||[];this.__cache__=null};th.prototype.before=function(G,ca,lb,S){var Ra=this.__find__(G);S=S||{};if(-1===Ra)throw Error("Parser rule not found: "+
G);this.__rules__.splice(Ra,0,{name:ca,enabled:!0,fn:lb,alt:S.alt||[]});this.__cache__=null};th.prototype.after=function(G,ca,lb,S){var Ra=this.__find__(G);S=S||{};if(-1===Ra)throw Error("Parser rule not found: "+G);this.__rules__.splice(Ra+1,0,{name:ca,enabled:!0,fn:lb,alt:S.alt||[]});this.__cache__=null};th.prototype.push=function(G,ca,lb){this.__rules__.push({name:G,enabled:!0,fn:ca,alt:(lb||{}).alt||[]});this.__cache__=null};th.prototype.enable=function(G,ca){Array.isArray(G)||(G=[G]);var lb=
[];G.forEach(function(S){var Ra=this.__find__(S);if(0>Ra){if(ca)return;throw Error("Rules manager: invalid rule name "+S);}this.__rules__[Ra].enabled=!0;lb.push(S)},this);this.__cache__=null;return lb};th.prototype.enableOnly=function(G,ca){Array.isArray(G)||(G=[G]);this.__rules__.forEach(function(lb){lb.enabled=!1});this.enable(G,ca)};th.prototype.disable=function(G,ca){Array.isArray(G)||(G=[G]);var lb=[];G.forEach(function(S){var Ra=this.__find__(S);if(0>Ra){if(ca)return;throw Error("Rules manager: invalid rule name "+
S);}this.__rules__[Ra].enabled=!1;lb.push(S)},this);this.__cache__=null;return lb};th.prototype.getRules=function(G){null===this.__cache__&&this.__compile__();return this.__cache__[G]||[]};var gg=fg=th,Wh={},wg=/\r\n?|\n/g,xh=/\0/g,Qi=Wh=function(G){var ca=G.src.replace(wg,"\n");ca=ca.replace(xh,"\ufffd");G.src=ca},Di={},Zi=Di=function(G){if(G.inlineMode){var ca=new G.Token("inline","",0);ca.content=G.src;ca.map=[0,1];ca.children=[];G.tokens.push(ca)}else G.md.block.parse(G.src,G.md,G.env,G.tokens)},
ni={},Xd=ni=function(G){var ca=G.tokens,lb;var S=0;for(lb=ca.length;S<lb;S++){var Ra=ca[S];"inline"===Ra.type&&G.md.inline.parse(Ra.content,G.md,G.env,Ra.children)}},ff={},af=ke.arrayReplaceAt,Gf=ff=function(G){var ca,lb,S,Ra=G.tokens;if(G.md.options.linkify){var Da=0;for(lb=Ra.length;Da<lb;Da++)if("inline"===Ra[Da].type&&G.md.linkify.pretest(Ra[Da].content)){var Ja=Ra[Da].children;var Pa=0;for(ca=Ja.length-1;0<=ca;ca--){var Za=Ja[ca];if("link_close"===Za.type)for(ca--;Ja[ca].level!==Za.level&&"link_open"!==
Ja[ca].type;)ca--;else if("html_inline"===Za.type&&(/^<a[>\s]/i.test(Za.content)&&0<Pa&&Pa--,/^<\/a\s*>/i.test(Za.content)&&Pa++),!(0<Pa)&&"text"===Za.type&&G.md.linkify.test(Za.content)){var Zb=Za.content;var Vc=G.md.linkify.match(Zb);var Jc=[];var cd=Za.level;for(Za=S=0;Za<Vc.length;Za++){var sd=Vc[Za].url;var Pe=G.md.normalizeLink(sd);if(G.md.validateLink(Pe)){var gf=Vc[Za].text;gf=Vc[Za].schema?"mailto:"!==Vc[Za].schema||/^mailto:/i.test(gf)?G.md.normalizeLinkText(gf):G.md.normalizeLinkText("mailto:"+
gf).replace(/^mailto:/,""):G.md.normalizeLinkText("http://"+gf).replace(/^http:\/\//,"");var ag=Vc[Za].index;ag>S&&(sd=new G.Token("text","",0),sd.content=Zb.slice(S,ag),sd.level=cd,Jc.push(sd));sd=new G.Token("link_open","a",1);sd.attrs=[["href",Pe]];sd.level=cd++;sd.markup="linkify";sd.info="auto";Jc.push(sd);sd=new G.Token("text","",0);sd.content=gf;sd.level=cd;Jc.push(sd);sd=new G.Token("link_close","a",-1);sd.level=--cd;sd.markup="linkify";sd.info="auto";Jc.push(sd);S=Vc[Za].lastIndex}}S<Zb.length&&
(sd=new G.Token("text","",0),sd.content=Zb.slice(S),sd.level=cd,Jc.push(sd));Ra[Da].children=Ja=af(Ja,ca,Jc)}}}}},Jh={},ci=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,di=/\((c|tm|r|p)\)/i,vj=/\((c|tm|r|p)\)/ig,pj={c:"\u00a9",r:"\u00ae",p:"\u00a7",tm:"\u2122"},kj=Jh=function(G){var ca;if(G.md.options.typographer)for(ca=G.tokens.length-1;0<=ca;ca--)if("inline"===G.tokens[ca].type){if(di.test(G.tokens[ca].content)){var lb,S=G.tokens[ca].children,Ra=0;for(lb=S.length-1;0<=lb;lb--){var Da=S[lb];"text"!==Da.type||Ra||
(Da.content=Da.content.replace(vj,Be));"link_open"===Da.type&&"auto"===Da.info&&Ra--;"link_close"===Da.type&&"auto"===Da.info&&Ra++}}if(ci.test(G.tokens[ca].content))for(S=G.tokens[ca].children,Ra=0,lb=S.length-1;0<=lb;lb--)Da=S[lb],"text"===Da.type&&!Ra&&ci.test(Da.content)&&(Da.content=Da.content.replace(/\+-/g,"\u00b1").replace(/\.{2,}/g,"\u2026").replace(/([?!])\u2026/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,
"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),"link_open"===Da.type&&"auto"===Da.info&&Ra--,"link_close"===Da.type&&"auto"===Da.info&&Ra++}},Ih={},mk=ke.isWhiteSpace,fl=ke.isPunctChar,Al=ke.isMdAsciiPunct,rg=/['"]/,Sg=/['"]/g,Lj=Ih=function(G){var ca;if(G.md.options.typographer)for(ca=G.tokens.length-1;0<=ca;ca--)if("inline"===G.tokens[ca].type&&rg.test(G.tokens[ca].content)){var lb,S,Ra,Da=G.tokens[ca].children,Ja=G;var Pa=[];for(Ra=0;Ra<Da.length;Ra++){var Za=Da[Ra];var Zb=Da[Ra].level;
for(S=Pa.length-1;0<=S&&!(Pa[S].level<=Zb);S--);Pa.length=S+1;if("text"===Za.type){var Vc=Za.content;var Jc=0;var cd=Vc.length;a:for(;Jc<cd;){Sg.lastIndex=Jc;var sd=Sg.exec(Vc);if(!sd)break;var Pe=lb=!0;Jc=sd.index+1;var gf="'"===sd[0];var ag=32;if(0<=sd.index-1)ag=Vc.charCodeAt(sd.index-1);else for(S=Ra-1;0<=S&&"softbreak"!==Da[S].type&&"hardbreak"!==Da[S].type;S--)if(Da[S].content){ag=Da[S].content.charCodeAt(Da[S].content.length-1);break}var Af=32;if(Jc<cd)Af=Vc.charCodeAt(Jc);else for(S=Ra+1;S<
Da.length&&"softbreak"!==Da[S].type&&"hardbreak"!==Da[S].type;S++)if(Da[S].content){Af=Da[S].content.charCodeAt(0);break}var ph=Al(ag)||fl(String.fromCharCode(ag));var Ug=Al(Af)||fl(String.fromCharCode(Af));var $i=mk(ag);(S=mk(Af))?Pe=!1:Ug&&($i||ph||(Pe=!1));$i?lb=!1:ph&&(S||Ug||(lb=!1));34===Af&&'"'===sd[0]&&48<=ag&&57>=ag&&(lb=Pe=!1);Pe&&lb&&(Pe=ph,lb=Ug);if(Pe||lb){if(lb)for(S=Pa.length-1;0<=S;S--){Af=Pa[S];if(Pa[S].level<Zb)break;if(Af.single===gf&&Pa[S].level===Zb){Af=Pa[S];gf?(lb=Ja.md.options.quotes[2],
gf=Ja.md.options.quotes[3]):(lb=Ja.md.options.quotes[0],gf=Ja.md.options.quotes[1]);Za.content=cb(Za.content,sd.index,gf);Da[Af.token].content=cb(Da[Af.token].content,Af.pos,lb);Jc+=gf.length-1;Af.token===Ra&&(Jc+=lb.length-1);Vc=Za.content;cd=Vc.length;Pa.length=S;continue a}}Pe?Pa.push({token:Ra,pos:sd.index,single:gf,level:Zb}):lb&&gf&&(Za.content=cb(Za.content,sd.index,"\u2019"))}else gf&&(Za.content=cb(Za.content,sd.index,"\u2019"))}}}}},gl={};Yb.prototype.Token=Ud;var ao=gl=Yb,Dn={},xm=gg,Nl=
[["normalize",Qi],["block",Zi],["inline",Xd],["linkify",Gf],["replacements",kj],["smartquotes",Lj]];de.prototype.process=function(G){var ca;var lb=this.ruler.getRules("");var S=0;for(ca=lb.length;S<ca;S++)lb[S](G)};de.prototype.State=ao;var En=Dn=de,lq={},lm=ke.isSpace,yo=lq=function(G,ca,lb,S){var Ra;if(ca+2>lb)return!1;var Da=ca+1;if(G.sCount[Da]<G.blkIndent||4<=G.sCount[Da]-G.blkIndent)return!1;var Ja=G.bMarks[Da]+G.tShift[Da];if(Ja>=G.eMarks[Da])return!1;var Pa=G.src.charCodeAt(Ja++);if(124!==
Pa&&45!==Pa&&58!==Pa||Ja>=G.eMarks[Da])return!1;var Za=G.src.charCodeAt(Ja++);if(124!==Za&&45!==Za&&58!==Za&&!lm(Za)||45===Pa&&lm(Za))return!1;for(;Ja<G.eMarks[Da];){Pa=G.src.charCodeAt(Ja);if(124!==Pa&&45!==Pa&&58!==Pa&&!lm(Pa))return!1;Ja++}Pa=P(G,ca+1);var Zb=Pa.split("|");Ja=[];for(Pa=0;Pa<Zb.length;Pa++){Da=Zb[Pa].trim();if(!Da)if(0===Pa||Pa===Zb.length-1)continue;else return!1;if(!/^:?-+:?$/.test(Da))return!1;58===Da.charCodeAt(Da.length-1)?Ja.push(58===Da.charCodeAt(0)?"center":"right"):58===
Da.charCodeAt(0)?Ja.push("left"):Ja.push("")}Pa=P(G,ca).trim();if(-1===Pa.indexOf("|")||4<=G.sCount[ca]-G.blkIndent)return!1;Zb=pa(Pa);Zb.length&&""===Zb[0]&&Zb.shift();Zb.length&&""===Zb[Zb.length-1]&&Zb.pop();Za=Zb.length;if(0===Za||Za!==Ja.length)return!1;if(S)return!0;var Vc=G.parentType;G.parentType="table";var Jc=G.md.block.ruler.getRules("blockquote");var cd=G.push("table_open","table",1);cd.map=S=[ca,0];cd=G.push("thead_open","thead",1);cd.map=[ca,ca+1];cd=G.push("tr_open","tr",1);cd.map=
[ca,ca+1];for(Pa=0;Pa<Zb.length;Pa++)cd=G.push("th_open","th",1),Ja[Pa]&&(cd.attrs=[["style","text-align:"+Ja[Pa]]]),cd=G.push("inline","",0),cd.content=Zb[Pa].trim(),cd.children=[],G.push("th_close","th",-1);G.push("tr_close","tr",-1);G.push("thead_close","thead",-1);for(Da=ca+2;Da<lb&&!(G.sCount[Da]<G.blkIndent);Da++){cd=!1;Pa=0;for(Zb=Jc.length;Pa<Zb;Pa++)if(Jc[Pa](G,Da,lb,!0)){cd=!0;break}if(cd)break;Pa=P(G,Da).trim();if(!Pa)break;if(4<=G.sCount[Da]-G.blkIndent)break;Zb=pa(Pa);Zb.length&&""===
Zb[0]&&Zb.shift();Zb.length&&""===Zb[Zb.length-1]&&Zb.pop();Da===ca+2&&(cd=G.push("tbody_open","tbody",1),cd.map=Ra=[ca+2,0]);cd=G.push("tr_open","tr",1);cd.map=[Da,Da+1];for(Pa=0;Pa<Za;Pa++)cd=G.push("td_open","td",1),Ja[Pa]&&(cd.attrs=[["style","text-align:"+Ja[Pa]]]),cd=G.push("inline","",0),cd.content=Zb[Pa]?Zb[Pa].trim():"",cd.children=[],G.push("td_close","td",-1);G.push("tr_close","tr",-1)}Ra&&(G.push("tbody_close","tbody",-1),Ra[1]=Da);G.push("table_close","table",-1);S[1]=Da;G.parentType=
Vc;G.line=Da;return!0},Fl={},mq=Fl=function(G,ca,lb){var S,Ra;if(4>G.sCount[ca]-G.blkIndent)return!1;for(Ra=S=ca+1;S<lb;)if(G.isEmpty(S))S++;else if(4<=G.sCount[S]-G.blkIndent)S++,Ra=S;else break;G.line=Ra;lb=G.push("code_block","code",0);lb.content=G.getLines(ca,Ra,4+G.blkIndent,!1)+"\n";lb.map=[ca,G.line];return!0},mp={},bo=mp=function(G,ca,lb,S){var Ra=!1,Da=G.bMarks[ca]+G.tShift[ca],Ja=G.eMarks[ca];if(4<=G.sCount[ca]-G.blkIndent||Da+3>Ja)return!1;var Pa=G.src.charCodeAt(Da);if(126!==Pa&&96!==
Pa)return!1;var Za=Da;Da=G.skipChars(Da,Pa);var Zb=Da-Za;if(3>Zb)return!1;var Vc=G.src.slice(Za,Da);var Jc=G.src.slice(Da,Ja);if(96===Pa&&0<=Jc.indexOf(String.fromCharCode(Pa)))return!1;if(S)return!0;for(S=ca;;){S++;if(S>=lb)break;Da=Za=G.bMarks[S]+G.tShift[S];Ja=G.eMarks[S];if(Da<Ja&&G.sCount[S]<G.blkIndent)break;if(!(G.src.charCodeAt(Da)!==Pa||4<=G.sCount[S]-G.blkIndent||(Da=G.skipChars(Da,Pa),Da-Za<Zb||(Da=G.skipSpaces(Da),Da<Ja)))){Ra=!0;break}}Zb=G.sCount[ca];G.line=S+(Ra?1:0);lb=G.push("fence",
"code",0);lb.info=Jc;lb.content=G.getLines(ca+1,S,Zb,!0);lb.markup=Vc;lb.map=[ca,G.line];return!0},yj={},Fn=ke.isSpace,np=yj=function(G,ca,lb,S){var Ra,Da=G.lineMax;var Ja=G.bMarks[ca]+G.tShift[ca];var Pa=G.eMarks[ca];if(4<=G.sCount[ca]-G.blkIndent||62!==G.src.charCodeAt(Ja++))return!1;if(S)return!0;var Za=Ra=G.sCount[ca]+1;if(32===G.src.charCodeAt(Ja)){Ja++;Za++;Ra++;var Zb=!1;var Vc=!0}else 9===G.src.charCodeAt(Ja)?(Vc=!0,3===(G.bsCount[ca]+Ra)%4?(Ja++,Za++,Ra++,Zb=!1):Zb=!0):Vc=!1;var Jc=[G.bMarks[ca]];
for(G.bMarks[ca]=Ja;Ja<Pa;){var cd=G.src.charCodeAt(Ja);if(Fn(cd))9===cd?Ra+=4-(Ra+G.bsCount[ca]+(Zb?1:0))%4:Ra++;else break;Ja++}var sd=[G.bsCount[ca]];G.bsCount[ca]=G.sCount[ca]+1+(Vc?1:0);cd=Ja>=Pa;var Pe=[G.sCount[ca]];G.sCount[ca]=Ra-Za;var gf=[G.tShift[ca]];G.tShift[ca]=Ja-G.bMarks[ca];var ag=G.md.block.ruler.getRules("blockquote");var Af=G.parentType;G.parentType="blockquote";for(S=ca+1;S<lb;S++){Za=G.sCount[S]<G.blkIndent;Ja=G.bMarks[S]+G.tShift[S];Pa=G.eMarks[S];if(Ja>=Pa)break;if(62!==G.src.charCodeAt(Ja++)||
Za){if(cd)break;Za=!1;Ja=0;for(Pa=ag.length;Ja<Pa;Ja++)if(ag[Ja](G,S,lb,!0)){Za=!0;break}if(Za){G.lineMax=S;0!==G.blkIndent&&(Jc.push(G.bMarks[S]),sd.push(G.bsCount[S]),gf.push(G.tShift[S]),Pe.push(G.sCount[S]),G.sCount[S]-=G.blkIndent);break}Jc.push(G.bMarks[S]);sd.push(G.bsCount[S]);gf.push(G.tShift[S]);Pe.push(G.sCount[S]);G.sCount[S]=-1}else{Za=Ra=G.sCount[S]+1;32===G.src.charCodeAt(Ja)?(Ja++,Za++,Ra++,Zb=!1,Vc=!0):9===G.src.charCodeAt(Ja)?(Vc=!0,3===(G.bsCount[S]+Ra)%4?(Ja++,Za++,Ra++,Zb=!1):
Zb=!0):Vc=!1;Jc.push(G.bMarks[S]);for(G.bMarks[S]=Ja;Ja<Pa;){cd=G.src.charCodeAt(Ja);if(Fn(cd))9===cd?Ra+=4-(Ra+G.bsCount[S]+(Zb?1:0))%4:Ra++;else break;Ja++}cd=Ja>=Pa;sd.push(G.bsCount[S]);G.bsCount[S]=G.sCount[S]+1+(Vc?1:0);Pe.push(G.sCount[S]);G.sCount[S]=Ra-Za;gf.push(G.tShift[S]);G.tShift[S]=Ja-G.bMarks[S]}}lb=G.blkIndent;G.blkIndent=0;ag=G.push("blockquote_open","blockquote",1);ag.markup=">";ag.map=Zb=[ca,0];G.md.block.tokenize(G,ca,S);ag=G.push("blockquote_close","blockquote",-1);ag.markup=
">";G.lineMax=Da;G.parentType=Af;Zb[1]=G.line;for(Ja=0;Ja<gf.length;Ja++)G.bMarks[Ja+ca]=Jc[Ja],G.tShift[Ja+ca]=gf[Ja],G.sCount[Ja+ca]=Pe[Ja],G.bsCount[Ja+ca]=sd[Ja];G.blkIndent=lb;return!0},Ym={},on=ke.isSpace,pn=Ym=function(G,ca,lb,S){var Ra,Da=G.bMarks[ca]+G.tShift[ca],Ja=G.eMarks[ca];if(4<=G.sCount[ca]-G.blkIndent)return!1;lb=G.src.charCodeAt(Da++);if(42!==lb&&45!==lb&&95!==lb)return!1;for(Ra=1;Da<Ja;){var Pa=G.src.charCodeAt(Da++);if(Pa!==lb&&!on(Pa))return!1;Pa===lb&&Ra++}if(3>Ra)return!1;if(S)return!0;
G.line=ca+1;S=G.push("hr","hr",0);S.map=[ca,G.line];S.markup=Array(Ra+1).join(String.fromCharCode(lb));return!0},zo={},op=ke.isSpace,zj=zo=function(G,ca,lb,S){var Ra,Da,Ja;var Pa=!1;var Za=!0;if(4<=G.sCount[ca]-G.blkIndent||0<=G.listIndent&&4<=G.sCount[ca]-G.listIndent&&G.sCount[ca]<G.blkIndent)return!1;S&&"paragraph"===G.parentType&&G.sCount[ca]>=G.blkIndent&&(Pa=!0);if(0<=(Ja=Ea(G,ca))){var Zb=!0;var Vc=G.bMarks[ca]+G.tShift[ca];var Jc=Number(G.src.slice(Vc,Ja-1));if(Pa&&1!==Jc)return!1}else if(0<=
(Ja=wa(G,ca)))Zb=!1;else return!1;if(Pa&&G.skipSpaces(Ja)>=G.eMarks[ca])return!1;Pa=G.src.charCodeAt(Ja-1);if(S)return!0;S=G.tokens.length;if(Zb){var cd=G.push("ordered_list_open","ol",1);1!==Jc&&(cd.attrs=[["start",Jc]])}else cd=G.push("bullet_list_open","ul",1);cd.map=Jc=[ca,0];cd.markup=String.fromCharCode(Pa);var sd=ca;var Pe=!1;var gf=G.md.block.ruler.getRules("list");var ag=G.parentType;for(G.parentType="list";sd<lb;){cd=Ja;var Af=G.eMarks[sd];for(Ra=Da=G.sCount[sd]+Ja-(G.bMarks[ca]+G.tShift[ca]);cd<
Af;){var ph=G.src.charCodeAt(cd);if(9===ph)Da+=4-(Da+G.bsCount[sd])%4;else if(32===ph)Da++;else break;cd++}sd=cd;ph=sd>=Af?1:Da-Ra;4<ph&&(ph=1);ph=Ra+ph;cd=G.push("list_item_open","li",1);cd.markup=String.fromCharCode(Pa);cd.map=Ra=[ca,0];Zb&&(cd.info=G.src.slice(Vc,Ja-1));var Ug=G.tight;var $i=G.tShift[ca];cd=G.sCount[ca];Ja=G.listIndent;G.listIndent=G.blkIndent;G.blkIndent=ph;G.tight=!0;G.tShift[ca]=sd-G.bMarks[ca];G.sCount[ca]=Da;sd>=Af&&G.isEmpty(ca+1)?G.line=Math.min(G.line+2,lb):G.md.block.tokenize(G,
ca,lb,!0);if(!G.tight||Pe)Za=!1;Pe=1<G.line-ca&&G.isEmpty(G.line-1);G.blkIndent=G.listIndent;G.listIndent=Ja;G.tShift[ca]=$i;G.sCount[ca]=cd;G.tight=Ug;cd=G.push("list_item_close","li",-1);cd.markup=String.fromCharCode(Pa);sd=ca=G.line;Ra[1]=sd;if(sd>=lb)break;if(G.sCount[sd]<G.blkIndent)break;if(4<=G.sCount[ca]-G.blkIndent)break;Ja=!1;Af=0;for(Da=gf.length;Af<Da;Af++)if(gf[Af](G,sd,lb,!0)){Ja=!0;break}if(Ja)break;if(Zb){Ja=Ea(G,sd);if(0>Ja)break;Vc=G.bMarks[sd]+G.tShift[sd]}else if(Ja=wa(G,sd),0>
Ja)break;if(Pa!==G.src.charCodeAt(Ja-1))break}cd=Zb?G.push("ordered_list_close","ol",-1):G.push("bullet_list_close","ul",-1);cd.markup=String.fromCharCode(Pa);Jc[1]=sd;G.line=sd;G.parentType=ag;if(Za)for(ca=G.level+2,lb=S+2,Zb=G.tokens.length-2;lb<Zb;lb++)G.tokens[lb].level===ca&&"paragraph_open"===G.tokens[lb].type&&(G.tokens[lb+2].hidden=!0,G.tokens[lb].hidden=!0,lb+=2);return!0},Oh={},ym=ke.normalizeReference,qn=ke.isSpace,pp=Oh=function(G,ca,lb,S){var Ra,Da,Ja=0;var Pa=G.bMarks[ca]+G.tShift[ca];
var Za=G.eMarks[ca];var Zb=ca+1;if(4<=G.sCount[ca]-G.blkIndent||91!==G.src.charCodeAt(Pa))return!1;for(;++Pa<Za;)if(93===G.src.charCodeAt(Pa)&&92!==G.src.charCodeAt(Pa-1)){if(Pa+1===Za||58!==G.src.charCodeAt(Pa+1))return!1;break}Pa=G.lineMax;var Vc=G.md.block.ruler.getRules("reference");lb=G.parentType;for(G.parentType="reference";Zb<Pa&&!G.isEmpty(Zb);Zb++)if(!(3<G.sCount[Zb]-G.blkIndent||0>G.sCount[Zb])){var Jc=!1;Za=0;for(Ra=Vc.length;Za<Ra;Za++)if(Vc[Za](G,Zb,Pa,!0)){Jc=!0;break}if(Jc)break}Vc=
G.getLines(ca,Zb,G.blkIndent,!1).trim();Za=Vc.length;for(Pa=1;Pa<Za;Pa++){var cd=Vc.charCodeAt(Pa);if(91===cd)return!1;if(93===cd){var sd=Pa;break}else 10===cd?Ja++:92===cd&&(Pa++,Pa<Za&&10===Vc.charCodeAt(Pa)&&Ja++)}if(0>sd||58!==Vc.charCodeAt(sd+1))return!1;for(Pa=sd+2;Pa<Za;Pa++)if(cd=Vc.charCodeAt(Pa),10===cd)Ja++;else if(!qn(cd))break;cd=G.md.helpers.parseLinkDestination(Vc,Pa,Za);if(!cd.ok)return!1;Zb=G.md.normalizeLink(cd.str);if(!G.md.validateLink(Zb))return!1;Pa=cd.pos;Ja+=cd.lines;Ra=Pa;
Jc=Ja;for(Da=Pa;Pa<Za;Pa++)if(cd=Vc.charCodeAt(Pa),10===cd)Ja++;else if(!qn(cd))break;cd=G.md.helpers.parseLinkTitle(Vc,Pa,Za);Pa<Za&&Da!==Pa&&cd.ok?(Da=cd.str,Pa=cd.pos,Ja+=cd.lines):(Da="",Pa=Ra,Ja=Jc);for(;Pa<Za;){cd=Vc.charCodeAt(Pa);if(!qn(cd))break;Pa++}if(Pa<Za&&10!==Vc.charCodeAt(Pa)&&Da)for(Da="",Pa=Ra,Ja=Jc;Pa<Za;){cd=Vc.charCodeAt(Pa);if(!qn(cd))break;Pa++}if(Pa<Za&&10!==Vc.charCodeAt(Pa))return!1;sd=ym(Vc.slice(1,sd));if(!sd)return!1;if(S)return!0;"undefined"===typeof G.env.references&&
(G.env.references={});"undefined"===typeof G.env.references[sd]&&(G.env.references[sd]={title:Da,href:Zb});G.parentType=lb;G.line=ca+Ja+1;return!0},qj={},Mm=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^\x3c!--/,/--\x3e/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Se.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(/^(?:<[A-Za-z][A-Za-z0-9\-]*(?:\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\s*=\s*(?:[^"'=<>`\x00-\x20]+|'[^']*'|"[^"]*"))?)*\s*\/?>|<\/[A-Za-z][A-Za-z0-9\-]*\s*>)/.source+
"\\s*$"),/^$/,!1]],Ao=qj=function(G,ca,lb,S){var Ra;var Da=G.bMarks[ca]+G.tShift[ca];var Ja=G.eMarks[ca];if(4<=G.sCount[ca]-G.blkIndent||!G.md.options.html||60!==G.src.charCodeAt(Da))return!1;Da=G.src.slice(Da,Ja);for(Ra=0;Ra<Mm.length&&!Mm[Ra][0].test(Da);Ra++);if(Ra===Mm.length)return!1;if(S)return Mm[Ra][2];S=ca+1;if(!Mm[Ra][1].test(Da))for(;S<lb&&!(G.sCount[S]<G.blkIndent);S++)if(Da=G.bMarks[S]+G.tShift[S],Ja=G.eMarks[S],Da=G.src.slice(Da,Ja),Mm[Ra][1].test(Da)){0!==Da.length&&S++;break}G.line=
S;lb=G.push("html_block","",0);lb.map=[ca,S];lb.content=G.getLines(ca,S,G.blkIndent,!0);return!0},Nm={},Om=ke.isSpace,co=Nm=function(G,ca,lb,S){var Ra=G.bMarks[ca]+G.tShift[ca],Da=G.eMarks[ca];if(4<=G.sCount[ca]-G.blkIndent)return!1;var Ja=G.src.charCodeAt(Ra);if(35!==Ja||Ra>=Da)return!1;lb=1;for(Ja=G.src.charCodeAt(++Ra);35===Ja&&Ra<Da&&6>=lb;)lb++,Ja=G.src.charCodeAt(++Ra);if(6<lb||Ra<Da&&!Om(Ja))return!1;if(S)return!0;Da=G.skipSpacesBack(Da,Ra);S=G.skipCharsBack(Da,35,Ra);S>Ra&&Om(G.src.charCodeAt(S-
1))&&(Da=S);G.line=ca+1;S=G.push("heading_open","h"+String(lb),1);S.markup="########".slice(0,lb);S.map=[ca,G.line];S=G.push("inline","",0);S.content=G.src.slice(Ra,Da).trim();S.map=[ca,G.line];S.children=[];S=G.push("heading_close","h"+String(lb),-1);S.markup="########".slice(0,lb);return!0},qp={},rp=qp=function(G,ca,lb){var S;var Ra=ca+1;var Da=G.md.block.ruler.getRules("paragraph");if(4<=G.sCount[ca]-G.blkIndent)return!1;var Ja=G.parentType;for(G.parentType="paragraph";Ra<lb&&!G.isEmpty(Ra);Ra++)if(!(3<
G.sCount[Ra]-G.blkIndent)){if(G.sCount[Ra]>=G.blkIndent){var Pa=G.bMarks[Ra]+G.tShift[Ra];var Za=G.eMarks[Ra];if(Pa<Za){var Zb=G.src.charCodeAt(Pa);if(45===Zb||61===Zb)if(Pa=G.skipChars(Pa,Zb),Pa=G.skipSpaces(Pa),Pa>=Za){var Vc=61===Zb?1:2;break}}}if(!(0>G.sCount[Ra])){Pa=!1;Za=0;for(S=Da.length;Za<S;Za++)if(Da[Za](G,Ra,lb,!0)){Pa=!0;break}if(Pa)break}}if(!Vc)return!1;lb=G.getLines(ca,Ra,G.blkIndent,!1).trim();G.line=Ra+1;Ra=G.push("heading_open","h"+String(Vc),1);Ra.markup=String.fromCharCode(Zb);
Ra.map=[ca,G.line];Ra=G.push("inline","",0);Ra.content=lb;Ra.map=[ca,G.line-1];Ra.children=[];Ra=G.push("heading_close","h"+String(Vc),-1);Ra.markup=String.fromCharCode(Zb);G.parentType=Ja;return!0},sp={},Bo=sp=function(G,ca){var lb;var S=ca+1;var Ra=G.md.block.ruler.getRules("paragraph"),Da=G.lineMax;var Ja=G.parentType;for(G.parentType="paragraph";S<Da&&!G.isEmpty(S);S++)if(!(3<G.sCount[S]-G.blkIndent||0>G.sCount[S])){var Pa=!1;var Za=0;for(lb=Ra.length;Za<lb;Za++)if(Ra[Za](G,S,Da,!0)){Pa=!0;break}if(Pa)break}Pa=
G.getLines(ca,S,G.blkIndent,!1).trim();G.line=S;S=G.push("paragraph_open","p",1);S.map=[ca,G.line];S=G.push("inline","",0);S.content=Pa;S.map=[ca,G.line];S.children=[];G.push("paragraph_close","p",-1);G.parentType=Ja;return!0},tp={},rn=ke.isSpace;ia.prototype.push=function(G,ca,lb){G=new Ud(G,ca,lb);G.block=!0;0>lb&&this.level--;G.level=this.level;0<lb&&this.level++;this.tokens.push(G);return G};ia.prototype.isEmpty=function(G){return this.bMarks[G]+this.tShift[G]>=this.eMarks[G]};ia.prototype.skipEmptyLines=
function(G){for(var ca=this.lineMax;G<ca&&!(this.bMarks[G]+this.tShift[G]<this.eMarks[G]);G++);return G};ia.prototype.skipSpaces=function(G){for(var ca,lb=this.src.length;G<lb&&(ca=this.src.charCodeAt(G),rn(ca));G++);return G};ia.prototype.skipSpacesBack=function(G,ca){if(G<=ca)return G;for(;G>ca;)if(!rn(this.src.charCodeAt(--G)))return G+1;return G};ia.prototype.skipChars=function(G,ca){for(var lb=this.src.length;G<lb&&this.src.charCodeAt(G)===ca;G++);return G};ia.prototype.skipCharsBack=function(G,
ca,lb){if(G<=lb)return G;for(;G>lb;)if(ca!==this.src.charCodeAt(--G))return G+1;return G};ia.prototype.getLines=function(G,ca,lb,S){var Ra,Da,Ja=G;if(G>=ca)return"";var Pa=Array(ca-G);for(G=0;Ja<ca;Ja++,G++){var Za=0;var Zb=Ra=this.bMarks[Ja];for(Da=Ja+1<ca||S?this.eMarks[Ja]+1:this.eMarks[Ja];Ra<Da&&Za<lb;){var Vc=this.src.charCodeAt(Ra);if(rn(Vc))9===Vc?Za+=4-(Za+this.bsCount[Ja])%4:Za++;else if(Ra-Zb<this.tShift[Ja])Za++;else break;Ra++}Pa[G]=Za>lb?Array(Za-lb+1).join(" ")+this.src.slice(Ra,Da):
this.src.slice(Ra,Da)}return Pa.join("")};ia.prototype.Token=Ud;var up=tp=ia,sn={},vp=gg,Gn=[["table",yo,["paragraph","reference"]],["code",mq],["fence",bo,["paragraph","reference","blockquote","list"]],["blockquote",np,["paragraph","reference","blockquote","list"]],["hr",pn,["paragraph","reference","blockquote","list"]],["list",zj,["paragraph","reference","blockquote"]],["reference",pp],["html_block",Ao,["paragraph","reference","blockquote"]],["heading",co,["paragraph","reference","blockquote"]],
["lheading",rp],["paragraph",Bo]];Ca.prototype.tokenize=function(G,ca,lb){for(var S,Ra=this.ruler.getRules(""),Da=Ra.length,Ja=ca,Pa=!1,Za=G.md.options.maxNesting;Ja<lb;){G.line=Ja=G.skipEmptyLines(Ja);if(Ja>=lb)break;if(G.sCount[Ja]<G.blkIndent)break;if(G.level>=Za){G.line=lb;break}for(S=0;S<Da&&!(ca=Ra[S](G,Ja,lb,!1));S++);G.tight=!Pa;G.isEmpty(G.line-1)&&(Pa=!0);Ja=G.line;Ja<lb&&G.isEmpty(Ja)&&(Pa=!0,Ja++,G.line=Ja)}};Ca.prototype.parse=function(G,ca,lb,S){G&&(G=new this.State(G,ca,lb,S),this.tokenize(G,
G.line,G.lineMax))};Ca.prototype.State=up;for(var Hn=sn=Ca,Zm={},wp=Zm=function(G,ca){for(var lb=G.pos;lb<G.posMax&&!w(G.src.charCodeAt(lb));)lb++;if(lb===G.pos)return!1;ca||(G.pending+=G.src.slice(G.pos,lb));G.pos=lb;return!0},eo={},In=ke.isSpace,nq=eo=function(G,ca){var lb=G.pos;if(10!==G.src.charCodeAt(lb))return!1;var S=G.pending.length-1;var Ra=G.posMax;if(!ca)if(0<=S&&32===G.pending.charCodeAt(S))if(1<=S&&32===G.pending.charCodeAt(S-1)){for(ca=S-1;1<=ca&&32===G.pending.charCodeAt(ca-1);)ca--;
G.pending=G.pending.slice(0,ca);G.push("hardbreak","br",0)}else G.pending=G.pending.slice(0,-1),G.push("softbreak","br",0);else G.push("softbreak","br",0);for(lb++;lb<Ra&&In(G.src.charCodeAt(lb));)lb++;G.pos=lb;return!0},Jn={},xp=ke.isSpace,Kn=[],Do=0;256>Do;Do++)Kn.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(G){Kn[G.charCodeAt(0)]=1});var Eo=Jn=function(G,ca){var lb=G.pos,S=G.posMax;if(92!==G.src.charCodeAt(lb))return!1;lb++;if(lb<S){var Ra=G.src.charCodeAt(lb);if(256>
Ra&&0!==Kn[Ra])return ca||(G.pending+=G.src[lb]),G.pos+=2,!0;if(10===Ra){ca||G.push("hardbreak","br",0);for(lb++;lb<S;){Ra=G.src.charCodeAt(lb);if(!xp(Ra))break;lb++}G.pos=lb;return!0}}ca||(G.pending+="\\");G.pos++;return!0},oq={},Bc=oq=function(G,ca){var lb,S,Ra=G.pos;if(96!==G.src.charCodeAt(Ra))return!1;var Da=Ra;Ra++;for(lb=G.posMax;Ra<lb&&96===G.src.charCodeAt(Ra);)Ra++;var Ja=G.src.slice(Da,Ra);var Pa=Ja.length;if(G.backticksScanned&&(G.backticks[Pa]||0)<=Da)return ca||(G.pending+=Ja),G.pos+=
Pa,!0;for(S=Ra;-1!==(Da=G.src.indexOf("`",S));){for(S=Da+1;S<lb&&96===G.src.charCodeAt(S);)S++;var Za=S-Da;if(Za===Pa)return ca||(ca=G.push("code_inline","code",0),ca.markup=Ja,ca.content=G.src.slice(Ra,Da).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),G.pos=S,!0;G.backticks[Za]=Da}G.backticksScanned=!0;ca||(G.pending+=Ja);G.pos+=Pa;return!0},Gc={},ed=ke.normalizeReference,Nc=ke.isSpace,Hc=Gc=function(G,ca){var lb,S;var Ra=lb="";var Da=G.pos,Ja=G.posMax,Pa,Za=!0;if(91!==G.src.charCodeAt(G.pos))return!1;
var Zb=G.pos+1;var Vc=G.md.helpers.parseLinkLabel(G,G.pos,!0);if(0>Vc)return!1;var Jc=Vc+1;if(Jc<Ja&&40===G.src.charCodeAt(Jc)){Za=!1;for(Jc++;Jc<Ja;Jc++){var cd=G.src.charCodeAt(Jc);if(!Nc(cd)&&10!==cd)break}if(Jc>=Ja)return!1;cd=G.md.helpers.parseLinkDestination(G.src,Jc,G.posMax);if(cd.ok){lb=G.md.normalizeLink(cd.str);G.md.validateLink(lb)?Jc=cd.pos:lb="";for(Pa=Jc;Jc<Ja&&(cd=G.src.charCodeAt(Jc),Nc(cd)||10===cd);Jc++);cd=G.md.helpers.parseLinkTitle(G.src,Jc,G.posMax);if(Jc<Ja&&Pa!==Jc&&cd.ok)for(Ra=
cd.str,Jc=cd.pos;Jc<Ja&&(cd=G.src.charCodeAt(Jc),Nc(cd)||10===cd);Jc++);}if(Jc>=Ja||41!==G.src.charCodeAt(Jc))Za=!0;Jc++}if(Za){if("undefined"===typeof G.env.references)return!1;Jc<Ja&&91===G.src.charCodeAt(Jc)?(Pa=Jc+1,Jc=G.md.helpers.parseLinkLabel(G,Jc),0<=Jc?S=G.src.slice(Pa,Jc++):Jc=Vc+1):Jc=Vc+1;S||(S=G.src.slice(Zb,Vc));Ra=G.env.references[ed(S)];if(!Ra)return G.pos=Da,!1;lb=Ra.href;Ra=Ra.title}ca||(G.pos=Zb,G.posMax=Vc,ca=G.push("link_open","a",1),ca.attrs=lb=[["href",lb]],Ra&&lb.push(["title",
Ra]),G.md.inline.tokenize(G),G.push("link_close","a",-1));G.pos=Jc;G.posMax=Ja;return!0},Jd={},De=ke.normalizeReference,df=ke.isSpace,uf=Jd=function(G,ca){var lb;var S="";var Ra=G.pos,Da=G.posMax;if(33!==G.src.charCodeAt(G.pos)||91!==G.src.charCodeAt(G.pos+1))return!1;var Ja=G.pos+2;var Pa=G.md.helpers.parseLinkLabel(G,G.pos+1,!1);if(0>Pa)return!1;var Za=Pa+1;if(Za<Da&&40===G.src.charCodeAt(Za)){for(Za++;Za<Da;Za++){var Zb=G.src.charCodeAt(Za);if(!df(Zb)&&10!==Zb)break}if(Za>=Da)return!1;Zb=G.md.helpers.parseLinkDestination(G.src,
Za,G.posMax);Zb.ok&&(S=G.md.normalizeLink(Zb.str),G.md.validateLink(S)?Za=Zb.pos:S="");for(lb=Za;Za<Da&&(Zb=G.src.charCodeAt(Za),df(Zb)||10===Zb);Za++);Zb=G.md.helpers.parseLinkTitle(G.src,Za,G.posMax);if(Za<Da&&lb!==Za&&Zb.ok)for(lb=Zb.str,Za=Zb.pos;Za<Da&&(Zb=G.src.charCodeAt(Za),df(Zb)||10===Zb);Za++);else lb="";if(Za>=Da||41!==G.src.charCodeAt(Za))return G.pos=Ra,!1;Za++}else{if("undefined"===typeof G.env.references)return!1;Za<Da&&91===G.src.charCodeAt(Za)?(lb=Za+1,Za=G.md.helpers.parseLinkLabel(G,
Za),0<=Za?Zb=G.src.slice(lb,Za++):Za=Pa+1):Za=Pa+1;Zb||(Zb=G.src.slice(Ja,Pa));lb=G.env.references[De(Zb)];if(!lb)return G.pos=Ra,!1;S=lb.href;lb=lb.title}ca||(ca=G.src.slice(Ja,Pa),G.md.inline.parse(ca,G.md,G.env,Ja=[]),Pa=G.push("image","img",0),Pa.attrs=S=[["src",S],["alt",""]],Pa.children=Ja,Pa.content=ca,lb&&S.push(["title",lb]));G.pos=Za;G.posMax=Da;return!0},Yf={},Ch=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,
Fh=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/,oi=Yf=function(G,ca){var lb,S=G.pos;if(60!==G.src.charCodeAt(S))return!1;var Ra=G.pos;for(lb=G.posMax;;){if(++S>=lb)return!1;var Da=G.src.charCodeAt(S);if(60===Da)return!1;if(62===Da)break}Da=G.src.slice(Ra+1,S);if(Fh.test(Da)){Ra=G.md.normalizeLink(Da);if(!G.md.validateLink(Ra))return!1;ca||(ca=G.push("link_open","a",1),ca.attrs=[["href",Ra]],ca.markup="autolink",ca.info="auto",ca=G.push("text","",0),ca.content=G.md.normalizeLinkText(Da),ca=
G.push("link_close","a",-1),ca.markup="autolink",ca.info="auto");G.pos+=Da.length+2;return!0}if(Ch.test(Da)){Ra=G.md.normalizeLink("mailto:"+Da);if(!G.md.validateLink(Ra))return!1;ca||(ca=G.push("link_open","a",1),ca.attrs=[["href",Ra]],ca.markup="autolink",ca.info="auto",ca=G.push("text","",0),ca.content=G.md.normalizeLinkText(Da),ca=G.push("link_close","a",-1),ca.markup="autolink",ca.info="auto");G.pos+=Da.length+2;return!0}return!1},Ri={},Th=Ri=function(G,ca){var lb=G.pos;if(!G.md.options.html)return!1;
var S=G.posMax;if(60!==G.src.charCodeAt(lb)||lb+2>=S)return!1;S=G.src.charCodeAt(lb+1);var Ra;if(Ra=33!==S&&63!==S&&47!==S)S|=32,Ra=!(97<=S&&122>=S);if(Ra)return!1;S=G.src.slice(lb).match(mh);if(!S)return!1;ca||(ca=G.push("html_inline","",0),ca.content=G.src.slice(lb,lb+S[0].length));G.pos+=S[0].length;return!0},Ui={},Vk=ke.has,Mk=ke.isValidEntityCode,ok=ke.fromCodePoint,mm=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Ol=/^&([a-z][a-z0-9]{1,31});/i,$m=Ui=function(G,ca){var lb=G.pos;var S=G.posMax;if(38!==
G.src.charCodeAt(lb))return!1;if(lb+1<S)if(S=G.src.charCodeAt(lb+1),35===S){if(lb=G.src.slice(lb).match(mm))return ca||(ca="x"===lb[1][0].toLowerCase()?parseInt(lb[1].slice(1),16):parseInt(lb[1],10),G.pending+=Mk(ca)?ok(ca):ok(65533)),G.pos+=lb[0].length,!0}else if((lb=G.src.slice(lb).match(Ol))&&Vk(xj,lb[1]))return ca||(G.pending+=xj[lb[1]]),G.pos+=lb[0].length,!0;ca||(G.pending+="&");G.pos++;return!0},Go={},It=Go=function(G){var ca,lb=G.tokens_meta,S=G.tokens_meta.length;ha(G,G.delimiters);for(ca=
0;ca<S;ca++)lb[ca]&&lb[ca].delimiters&&ha(G,lb[ca].delimiters)},Yr={};Yr=function(G){var ca,lb=0,S=G.tokens,Ra=G.tokens.length;for(G=ca=0;G<Ra;G++)0>S[G].nesting&&lb--,S[G].level=lb,0<S[G].nesting&&lb++,"text"===S[G].type&&G+1<Ra&&"text"===S[G+1].type?S[G+1].content=S[G].content+S[G+1].content:(G!==ca&&(S[ca]=S[G]),ca++);G!==ca&&(S.length=ca)};var Vq={},yh=gg,Ho=[["text",wp],["newline",nq],["escape",Eo],["backticks",Bc],["strikethrough",function(G,ca){var lb=G.src.charCodeAt(G.pos);if(ca||126!==lb)return!1;
var S=G.scanDelims(G.pos,!0);var Ra=S.length;var Da=String.fromCharCode(lb);if(2>Ra)return!1;if(Ra%2){var Ja=G.push("text","",0);Ja.content=Da;Ra--}for(ca=0;ca<Ra;ca+=2)Ja=G.push("text","",0),Ja.content=Da+Da,G.delimiters.push({marker:lb,length:0,token:G.tokens.length-1,end:-1,open:S.can_open,close:S.can_close});G.pos+=S.length;return!0}],["emphasis",function(G,ca){var lb=G.src.charCodeAt(G.pos);if(ca||95!==lb&&42!==lb)return!1;var S=G.scanDelims(G.pos,42===lb);for(ca=0;ca<S.length;ca++){var Ra=G.push("text",
"",0);Ra.content=String.fromCharCode(lb);G.delimiters.push({marker:lb,length:S.length,token:G.tokens.length-1,end:-1,open:S.can_open,close:S.can_close})}G.pos+=S.length;return!0}],["link",Hc],["image",uf],["autolink",oi],["html_inline",Th],["entity",$m]],yp=[["balance_pairs",It],["strikethrough",function(G){var ca,lb=G.tokens_meta,S=G.tokens_meta.length;ma(G,G.delimiters);for(ca=0;ca<S;ca++)lb[ca]&&lb[ca].delimiters&&ma(G,lb[ca].delimiters)}],["emphasis",function(G){var ca,lb=G.tokens_meta,S=G.tokens_meta.length;
ua(G,G.delimiters);for(ca=0;ca<S;ca++)lb[ca]&&lb[ca].delimiters&&ua(G,lb[ca].delimiters)}],["text_collapse",Yr]];ra.prototype.skipToken=function(G){var ca=G.pos,lb=this.ruler.getRules(""),S=lb.length;var Ra=G.md.options.maxNesting;var Da=G.cache;if("undefined"!==typeof Da[ca])G.pos=Da[ca];else{if(G.level<Ra)for(Ra=0;Ra<S;Ra++){G.level++;var Ja=lb[Ra](G,!0);G.level--;if(Ja)break}else G.pos=G.posMax;Ja||G.pos++;Da[ca]=G.pos}};ra.prototype.tokenize=function(G){for(var ca,lb,S=this.ruler.getRules(""),
Ra=S.length,Da=G.posMax,Ja=G.md.options.maxNesting;G.pos<Da;){if(G.level<Ja)for(lb=0;lb<Ra&&!(ca=S[lb](G,!1));lb++);if(ca){if(G.pos>=Da)break}else G.pending+=G.src[G.pos++]}G.pending&&G.pushPending()};ra.prototype.parse=function(G,ca,lb,S){S=new this.State(G,ca,lb,S);this.tokenize(S);ca=this.ruler2.getRules("");lb=ca.length;for(G=0;G<lb;G++)ca[G](S)};ra.prototype.State=$c;var Wq=Vq=ra,t={},A=t={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",
highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}},F={};F={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:"blockquote code fence heading hr html_block lheading list reference paragraph".split(" ")},
inline:{rules:"autolink backticks emphasis entity escape html_inline image link newline text".split(" "),rules2:["balance_pairs","emphasis","text_collapse"]}}};var Q={},X=ke,bb=ng,Wa=Rd,Ab=En,fc=Hn,Lc=Wq,wd="default"in md?Kc:md,le="default"in jg?Kf:jg,je="default"in ud?fa:ud,pe={default:ze,zero:A,commonmark:F},qe=/^(vbscript|javascript|file|data):/,nc=/^data:image\/(gif|png|jpeg|webp);/,Ke=["http:","https:","mailto:"];Ya.prototype.set=function(G){X.assign(this.options,G);return this};Ya.prototype.configure=
function(G){var ca=this;if(X.isString(G)){var lb=G;G=pe[lb];if(!G)throw Error('Wrong `markdown-it` preset "'+lb+'", check name');}if(!G)throw Error("Wrong `markdown-it` preset, can't be empty");G.options&&ca.set(G.options);G.components&&Object.keys(G.components).forEach(function(S){G.components[S].rules&&ca[S].ruler.enableOnly(G.components[S].rules);G.components[S].rules2&&ca[S].ruler2.enableOnly(G.components[S].rules2)});return this};Ya.prototype.enable=function(G,ca){var lb=[];Array.isArray(G)||
(G=[G]);["core","block","inline"].forEach(function(Ra){lb=lb.concat(this[Ra].ruler.enable(G,!0))},this);lb=lb.concat(this.inline.ruler2.enable(G,!0));var S=G.filter(function(Ra){return 0>lb.indexOf(Ra)});if(S.length&&!ca)throw Error("MarkdownIt. Failed to enable unknown rule(s): "+S);return this};Ya.prototype.disable=function(G,ca){var lb=[];Array.isArray(G)||(G=[G]);["core","block","inline"].forEach(function(Ra){lb=lb.concat(this[Ra].ruler.disable(G,!0))},this);lb=lb.concat(this.inline.ruler2.disable(G,
!0));var S=G.filter(function(Ra){return 0>lb.indexOf(Ra)});if(S.length&&!ca)throw Error("MarkdownIt. Failed to disable unknown rule(s): "+S);return this};Ya.prototype.use=function(G){var ca=[this].concat(Array.prototype.slice.call(arguments,1));G.apply(G,ca);return this};Ya.prototype.parse=function(G,ca){if("string"!==typeof G)throw Error("Input data should be a String");G=new this.core.State(G,this,ca);this.core.process(G);return G.tokens};Ya.prototype.render=function(G,ca){ca=ca||{};return this.renderer.render(this.parse(G,
ca),this.options,ca)};Ya.prototype.parseInline=function(G,ca){G=new this.core.State(G,this,ca);G.inlineMode=!0;this.core.process(G);return G.tokens};Ya.prototype.renderInline=function(G,ca){ca=ca||{};return this.renderer.render(this.parseInline(G,ca),this.options,ca)};var $f=Q=Ya,Te="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ug={};(function(G,ca){ug=ca()})(ug,function(){function G(qc,jd){jd=null==jd?qc.length-1:+jd;return function(){for(var $d=Math.max(arguments.length-
jd,0),He=Array($d),jf=0;jf<$d;jf++)He[jf]=arguments[jf+jd];switch(jd){case 0:return qc.call(this||Te,He);case 1:return qc.call(this||Te,arguments[0],He);case 2:return qc.call(this||Te,arguments[0],arguments[1],He)}$d=Array(jd+1);for(jf=0;jf<jd;jf++)$d[jf]=arguments[jf];$d[jd]=He;return qc.apply(this||Te,$d)}}function ca(qc){var jd=typeof qc;return"function"===jd||"object"===jd&&!!qc}function lb(qc){return void 0===qc}function S(qc){return!0===qc||!1===qc||"[object Boolean]"===Dp.call(qc)}function Ra(qc){var jd=
"[object "+qc+"]";return function($d){return Dp.call($d)===jd}}function Da(qc){return null!=qc&&Il(qc.getInt8)&&Rv(qc.buffer)}function Ja(qc,jd){return null!=qc&&Nt.call(qc,jd)}function Pa(qc){return Ut(qc)&&Mv(qc)}function Za(qc){return function(){return qc}}function Zb(qc){return function(jd){jd=qc(jd);return"number"==typeof jd&&0<=jd&&jd<=Nv}}function Vc(qc){return function(jd){return null==jd?void 0:jd[qc]}}function Jc(qc){return Qt?Qt(qc)&&!dr(qc):Uv(qc)&&Vv.test(Dp.call(qc))}function cd(qc){for(var jd=
{},$d=qc.length,He=0;He<$d;++He)jd[qc[He]]=!0;return{contains:function(jf){return!0===jd[jf]},push:function(jf){jd[jf]=!0;return qc.push(jf)}}}function sd(qc,jd){jd=cd(jd);var $d=Tt.length,He=qc.constructor;He=Il(He)&&He.prototype||br;var jf="constructor";for(Ja(qc,jf)&&!jd.contains(jf)&&jd.push(jf);$d--;)jf=Tt[$d],jf in qc&&qc[jf]!==He[jf]&&!jd.contains(jf)&&jd.push(jf)}function Pe(qc){if(!ca(qc))return[];if(Ot)return Ot(qc);var jd=[],$d;for($d in qc)Ja(qc,$d)&&jd.push($d);St&&sd(qc,jd);return jd}
function gf(qc,jd){var $d=Pe(jd),He=$d.length;if(null==qc)return!He;qc=Object(qc);for(var jf=0;jf<He;jf++){var Bf=$d[jf];if(jd[Bf]!==qc[Bf]||!(Bf in qc))return!1}return!0}function ag(qc){if(qc instanceof ag)return qc;if(!((this||Te)instanceof ag))return new ag(qc);(this||Te)._wrapped=qc}function Af(qc,jd,$d,He){if(qc===jd)return 0!==qc||1/qc===1/jd;if(null==qc||null==jd)return!1;if(qc!==qc)return jd!==jd;var jf=typeof qc;return"function"!==jf&&"object"!==jf&&"object"!=typeof jd?!1:ph(qc,jd,$d,He)}
function ph(qc,jd,$d,He){qc instanceof ag&&(qc=qc._wrapped);jd instanceof ag&&(jd=jd._wrapped);var jf=Dp.call(qc);if(jf!==Dp.call(jd))return!1;if(Xt&&"[object Object]"==jf&&dr(qc)){if(!dr(jd))return!1;jf="[object DataView]"}switch(jf){case "[object RegExp]":case "[object String]":return""+qc===""+jd;case "[object Number]":return+qc!==+qc?+jd!==+jd:0===+qc?1/+qc===1/jd:+qc===+jd;case "[object Date]":case "[object Boolean]":return+qc===+jd;case "[object Symbol]":return fs.valueOf.call(qc)===fs.valueOf.call(jd);
case "[object ArrayBuffer]":case "[object DataView]":return ph(new Uint8Array(qc.buffer||qc,qc.byteOffset||0,Jo(qc)),new Uint8Array(jd.buffer||jd,jd.byteOffset||0,Jo(jd)),$d,He)}jf="[object Array]"===jf;if(!jf&&Yt(qc)){if(Jo(qc)!==Jo(jd))return!1;if(qc.buffer===jd.buffer&&qc.byteOffset===jd.byteOffset)return!0;jf=!0}if(!jf){if("object"!=typeof qc||"object"!=typeof jd)return!1;var Bf=qc.constructor,vh=jd.constructor;if(Bf!==vh&&!(Il(Bf)&&Bf instanceof Bf&&Il(vh)&&vh instanceof vh)&&"constructor"in
qc&&"constructor"in jd)return!1}$d=$d||[];He=He||[];for(Bf=$d.length;Bf--;)if($d[Bf]===qc)return He[Bf]===jd;$d.push(qc);He.push(jd);if(jf){Bf=qc.length;if(Bf!==jd.length)return!1;for(;Bf--;)if(!Af(qc[Bf],jd[Bf],$d,He))return!1}else{jf=Pe(qc);Bf=jf.length;if(Pe(jd).length!==Bf)return!1;for(;Bf--;)if(vh=jf[Bf],!Ja(jd,vh)||!Af(qc[vh],jd[vh],$d,He))return!1}$d.pop();He.pop();return!0}function Ug(qc){if(!ca(qc))return[];var jd=[],$d;for($d in qc)jd.push($d);St&&sd(qc,jd);return jd}function $i(qc){var jd=
nm(qc);return function($d){if(null==$d)return!1;var He=Ug($d);if(nm(He))return!1;for(He=0;He<jd;He++)if(!Il($d[qc[He]]))return!1;return qc!==au||!Il($d[Zt])}}function rh(qc){for(var jd=Pe(qc),$d=jd.length,He=Array($d),jf=0;jf<$d;jf++)He[jf]=qc[jd[jf]];return He}function Ah(qc){for(var jd={},$d=Pe(qc),He=0,jf=$d.length;He<jf;He++)jd[qc[$d[He]]]=$d[He];return jd}function hk(qc){var jd=[],$d;for($d in qc)Il(qc[$d])&&jd.push($d);return jd.sort()}function tk(qc,jd){return function($d){var He=arguments.length;
jd&&($d=Object($d));if(2>He||null==$d)return $d;for(var jf=1;jf<He;jf++)for(var Bf=arguments[jf],vh=qc(Bf),ei=vh.length,kk=0;kk<ei;kk++){var hl=vh[kk];jd&&void 0!==$d[hl]||($d[hl]=Bf[hl])}return $d}}function Zl(){return function(){}}function Ph(qc){if(!ca(qc))return{};if(Pt)return Pt(qc);var jd=Zl();jd.prototype=qc;qc=new jd;jd.prototype=null;return qc}function vl(qc){return ho(qc)?qc:[qc]}function Uj(qc,jd){for(var $d=jd.length,He=0;He<$d;He++){if(null==qc)return;qc=qc[jd[He]]}return $d?qc:void 0}
function $l(qc,jd,$d){qc=Uj(qc,ag.toPath(jd));return lb(qc)?$d:qc}function Wk(qc){return qc}function Ie(qc){qc=er({},qc);return function(jd){return gf(jd,qc)}}function ce(qc){qc=ag.toPath(qc);return function(jd){return Uj(jd,qc)}}function Xg(qc,jd,$d){if(void 0===jd)return qc;switch(null==$d?3:$d){case 1:return function(He){return qc.call(jd,He)};case 3:return function(He,jf,Bf){return qc.call(jd,He,jf,Bf)};case 4:return function(He,jf,Bf,vh){return qc.call(jd,He,jf,Bf,vh)}}return function(){return qc.apply(jd,
arguments)}}function Ld(qc,jd,$d){return null==qc?Wk:Il(qc)?Xg(qc,jd,$d):ca(qc)&&!ho(qc)?Ie(qc):ce(qc)}function Ff(qc,jd){return Ld(qc,jd,Infinity)}function Wf(qc,jd,$d){return ag.iteratee!==Ff?ag.iteratee(qc,jd):Ld(qc,jd,$d)}function Nf(){}function Wg(qc,jd){null==jd&&(jd=qc,qc=0);return qc+Math.floor(Math.random()*(jd-qc+1))}function ki(qc){var jd=function(Bf){return qc[Bf]},$d="(?:"+Pe(qc).join("|")+")",He=RegExp($d),jf=RegExp($d,"g");return function(Bf){Bf=null==Bf?"":""+Bf;return He.test(Bf)?
Bf.replace(jf,jd):Bf}}function li(qc){return"\\"+ew[qc]}function Yh(qc,jd,$d,He,jf){if(!(He instanceof jd))return qc.apply($d,jf);jd=Ph(qc.prototype);qc=qc.apply(jd,jf);return ca(qc)?qc:jd}function ai(qc,jd,$d,He){He=He||[];if(!jd&&0!==jd)jd=Infinity;else if(0>=jd)return He.concat(qc);for(var jf=He.length,Bf=0,vh=nm(qc);Bf<vh;Bf++){var ei=qc[Bf];if(am(ei)&&(ho(ei)||ks(ei)))if(1<jd)ai(ei,jd-1,$d,He),jf=He.length;else for(var kk=0,hl=ei.length;kk<hl;)He[jf++]=ei[kk++];else $d||(He[jf++]=ei)}return He}
function Yj(qc){return function(){return!qc.apply(this||Te,arguments)}}function ik(qc,jd){var $d;return function(){0<--qc&&($d=jd.apply(this||Te,arguments));1>=qc&&(jd=null);return $d}}function jk(qc,jd,$d){jd=Wf(jd,$d);$d=Pe(qc);for(var He,jf=0,Bf=$d.length;jf<Bf;jf++)if(He=$d[jf],jd(qc[He],He,qc))return He}function Pm(qc){return function(jd,$d,He){$d=Wf($d,He);He=nm(jd);for(var jf=0<qc?0:He-1;0<=jf&&jf<He;jf+=qc)if($d(jd[jf],jf,jd))return jf;return-1}}function Qm(qc,jd,$d,He){$d=Wf($d,He,1);jd=
$d(jd);He=0;for(var jf=nm(qc);He<jf;){var Bf=Math.floor((He+jf)/2);$d(qc[Bf])<jd?He=Bf+1:jf=Bf}return He}function Bp(qc,jd,$d){return function(He,jf,Bf){var vh=0,ei=nm(He);if("number"==typeof Bf)0<qc?vh=0<=Bf?Bf:Math.max(Bf+ei,vh):ei=0<=Bf?Math.min(Bf+1,ei):Bf+ei+1;else if($d&&Bf&&ei)return Bf=$d(He,jf),He[Bf]===jf?Bf:-1;if(jf!==jf)return Bf=jd(vq.call(He,vh,ei),Pa),0<=Bf?Bf+vh:-1;for(Bf=0<qc?vh:ei-1;0<=Bf&&Bf<ei;Bf+=qc)if(He[Bf]===jf)return Bf;return-1}}function Bl(qc,jd,$d){jd=(am(qc)?jr:jk)(qc,
jd,$d);if(void 0!==jd&&-1!==jd)return qc[jd]}function al(qc,jd,$d){jd=Xg(jd,$d);var He;if(am(qc))for($d=0,He=qc.length;$d<He;$d++)jd(qc[$d],$d,qc);else{var jf=Pe(qc);$d=0;for(He=jf.length;$d<He;$d++)jd(qc[jf[$d]],jf[$d],qc)}return qc}function tn(qc,jd,$d){jd=Wf(jd,$d);$d=!am(qc)&&Pe(qc);for(var He=($d||qc).length,jf=Array(He),Bf=0;Bf<He;Bf++){var vh=$d?$d[Bf]:Bf;jf[Bf]=jd(qc[vh],vh,qc)}return jf}function Zq(qc){return function(jd,$d,He,jf){var Bf=3<=arguments.length,vh=Xg($d,jf,4),ei=He,kk=!am(jd)&&
Pe(jd),hl=(kk||jd).length,Ve=0<qc?0:hl-1;Bf||(ei=jd[kk?kk[Ve]:Ve],Ve+=qc);for(;0<=Ve&&Ve<hl;Ve+=qc)Bf=kk?kk[Ve]:Ve,ei=vh(ei,jd[Bf],Bf,jd);return ei}}function Tk(qc,jd,$d){var He=[];jd=Wf(jd,$d);al(qc,function(jf,Bf,vh){jd(jf,Bf,vh)&&He.push(jf)});return He}function rq(qc,jd,$d){jd=Wf(jd,$d);$d=!am(qc)&&Pe(qc);for(var He=($d||qc).length,jf=0;jf<He;jf++){var Bf=$d?$d[jf]:jf;if(!jd(qc[Bf],Bf,qc))return!1}return!0}function $r(qc,jd,$d){jd=Wf(jd,$d);$d=!am(qc)&&Pe(qc);for(var He=($d||qc).length,jf=0;jf<
He;jf++){var Bf=$d?$d[jf]:jf;if(jd(qc[Bf],Bf,qc))return!0}return!1}function go(qc,jd,$d,He){am(qc)||(qc=rh(qc));if("number"!=typeof $d||He)$d=0;return 0<=kr(qc,jd,$d)}function $q(qc,jd){return tn(qc,ce(jd))}function Kt(qc,jd,$d){var He=-Infinity,jf=-Infinity,Bf;if(null==jd||"number"==typeof jd&&"object"!=typeof qc[0]&&null!=qc){qc=am(qc)?qc:rh(qc);for(var vh=0,ei=qc.length;vh<ei;vh++)$d=qc[vh],null!=$d&&$d>He&&(He=$d)}else jd=Wf(jd,$d),al(qc,function(kk,hl,Ve){Bf=jd(kk,hl,Ve);if(Bf>jf||-Infinity===
Bf&&-Infinity===He)He=kk,jf=Bf});return He}function sq(qc){return qc?ho(qc)?vq.call(qc):hs(qc)?qc.match(Jy):am(qc)?tn(qc,Wk):rh(qc):[]}function tq(qc,jd,$d){if(null==jd||$d)return am(qc)||(qc=rh(qc)),qc[Wg(qc.length-1)];qc=sq(qc);$d=nm(qc);jd=Math.max(Math.min(jd,$d),0);--$d;for(var He=0;He<jd;He++){var jf=Wg(He,$d),Bf=qc[He];qc[He]=qc[jf];qc[jf]=Bf}return qc.slice(0,jd)}function Cl(qc,jd){return function($d,He,jf){var Bf=jd?[[],[]]:{};He=Wf(He,jf);al($d,function(vh,ei){ei=He(vh,ei,$d);qc(Bf,vh,ei)});
return Bf}}function Jv(qc,jd,$d){return jd in $d}function as(qc,jd,$d){return vq.call(qc,0,Math.max(0,qc.length-(null==jd||$d?1:jd)))}function bs(qc,jd,$d){return null==qc||1>qc.length?null==jd||$d?void 0:[]:null==jd||$d?qc[0]:as(qc,qc.length-jd)}function uq(qc,jd,$d){return vq.call(qc,null==jd||$d?1:jd)}function cs(qc,jd,$d,He){S(jd)||(He=$d,$d=jd,jd=!1);null!=$d&&($d=Wf($d,He));He=[];for(var jf=[],Bf=0,vh=nm(qc);Bf<vh;Bf++){var ei=qc[Bf],kk=$d?$d(ei,Bf,qc):ei;jd&&!$d?(Bf&&jf===kk||He.push(ei),jf=
kk):$d?go(jf,kk)||(jf.push(kk),He.push(ei)):go(He,ei)||He.push(ei)}return He}function ar(qc){for(var jd=qc&&Kt(qc,nm).length||0,$d=Array(jd),He=0;He<jd;He++)$d[He]=$q(qc,He);return $d}function ds(qc,jd){return qc._chain?ag(jd).chain():jd}function Lt(qc){al(hk(qc),function(jd){var $d=ag[jd]=qc[jd];ag.prototype[jd]=function(){var He=[(this||Te)._wrapped];Mt.apply(He,arguments);return ds(this||Te,$d.apply(ag,He))}});return ag}var es="object"==typeof self&&self.self===self&&self||"object"==typeof Te&&
Te.global===Te&&Te||Function("return this")()||{},Cp=Array.prototype,br=Object.prototype,fs="undefined"!==typeof Symbol?Symbol.prototype:null,Mt=Cp.push,vq=Cp.slice,Dp=br.toString,Nt=br.hasOwnProperty,gs="undefined"!==typeof ArrayBuffer,Kv="undefined"!==typeof DataView,Lv=Array.isArray,Ot=Object.keys,Pt=Object.create,Qt=gs&&ArrayBuffer.isView,Mv=isNaN,Rt=isFinite,St=!{toString:null}.propertyIsEnumerable("toString"),Tt="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" "),
Nv=Math.pow(2,53)-1,hs=Ra("String"),Ut=Ra("Number"),Ov=Ra("Date"),Pv=Ra("RegExp"),Qv=Ra("Error"),is=Ra("Symbol"),Rv=Ra("ArrayBuffer"),Vt=Ra("Function"),Sv=es.document&&es.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof Sv&&(Vt=function(qc){return"function"==typeof qc||!1});var Il=Vt,Wt=Ra("Object"),Xt=Kv&&Wt(new DataView(new ArrayBuffer(8))),cr="undefined"!==typeof Map&&Wt(new Map),Tv=Ra("DataView"),dr=Xt?Da:Tv,ho=Lv||Ra("Array"),js=Ra("Arguments");(function(){js(arguments)||
(js=function(qc){return Ja(qc,"callee")})})();var ks=js,Jo=Vc("byteLength"),Uv=Zb(Jo),Vv=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,Yt=gs?Jc:Za(!1),nm=Vc("length");ag.VERSION="1.13.4";ag.prototype.value=function(){return(this||Te)._wrapped};ag.prototype.valueOf=ag.prototype.toJSON=ag.prototype.value;ag.prototype.toString=function(){return String((this||Te)._wrapped)};var Zt="forEach",ls=["clear","delete"],$t=["get","has","set"],Wv=ls.concat(Zt,$t),au=ls.concat($t),
Xv=["add"].concat(ls,Zt,"has"),Yv=cr?$i(Wv):Ra("Map"),Zv=cr?$i(au):Ra("WeakMap"),$v=cr?$i(Xv):Ra("Set"),aw=Ra("WeakSet"),bw=tk(Ug),er=tk(Pe),ms=tk(Ug,!0);ag.toPath=vl;ag.iteratee=Ff;var io=Date.now||function(){return(new Date).getTime()},bu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Gy=ki(bu),cw=Ah(bu),dw=ki(cw),cu=ag.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},fr=/(.)^/,ew={"'":"'","\\":"\\","\r":"r","\n":"n",
"\u2028":"u2028","\u2029":"u2029"},fw=/\\|'|\r|\n|\u2028|\u2029/g,du=/^\s*(\w|\$)+\s*$/,gw=0,Lo=G(function(qc,jd){var $d=Lo.placeholder,He=function(){for(var jf=0,Bf=jd.length,vh=Array(Bf),ei=0;ei<Bf;ei++)vh[ei]=jd[ei]===$d?arguments[jf++]:jd[ei];for(;jf<arguments.length;)vh.push(arguments[jf++]);return Yh(qc,He,this||Te,this||Te,vh)};return He});Lo.placeholder=ag;var gr=G(function(qc,jd,$d){if(!Il(qc))throw new TypeError("Bind must be called on a function");var He=G(function(jf){return Yh(qc,He,
jd,this||Te,$d.concat(jf))});return He}),am=Zb(nm),hw=G(function(qc,jd){jd=ai(jd,!1,!1);var $d=jd.length;if(1>$d)throw Error("bindAll must be passed function names");for(;$d--;){var He=jd[$d];qc[He]=gr(qc[He],qc)}return qc}),hr=G(function(qc,jd,$d){return setTimeout(function(){return qc.apply(null,$d)},jd)}),ir=Lo(hr,ag,1),ns=Lo(ik,2),jr=Pm(1),eu=Pm(-1),kr=Bp(1,jr,Qm),Hy=Bp(-1,eu),jo=Zq(1),os=Zq(-1),Iy=G(function(qc,jd,$d){if(Il(jd))var He=jd;else{jd=ag.toPath(jd);var jf=jd.slice(0,-1);jd=jd[jd.length-
1]}return tn(qc,function(Bf){var vh=He;if(!vh){jf&&jf.length&&(Bf=Uj(Bf,jf));if(null==Bf)return;vh=Bf[jd]}return null==vh?vh:vh.apply(Bf,$d)})}),Jy=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g,Ky=Cl(function(qc,jd,$d){Ja(qc,$d)?qc[$d].push(jd):qc[$d]=[jd]}),Ly=Cl(function(qc,jd,$d){qc[$d]=jd}),My=Cl(function(qc,jd,$d){Ja(qc,$d)?qc[$d]++:qc[$d]=1}),Ny=Cl(function(qc,jd,$d){qc[$d?0:1].push(jd)},!0),iw=G(function(qc,jd){var $d={},He=jd[0];if(null==qc)return $d;Il(He)?(1<jd.length&&
(He=Xg(He,jd[1])),jd=Ug(qc)):(He=Jv,jd=ai(jd,!1,!1),qc=Object(qc));for(var jf=0,Bf=jd.length;jf<Bf;jf++){var vh=jd[jf],ei=qc[vh];He(ei,vh,qc)&&($d[vh]=ei)}return $d}),jw=G(function(qc,jd){var $d=jd[0],He;Il($d)?($d=Yj($d),1<jd.length&&(He=jd[1])):(jd=tn(ai(jd,!1,!1),String),$d=function(jf,Bf){return!go(jd,Bf)});return iw(qc,$d,He)}),wq=G(function(qc,jd){jd=ai(jd,!0,!0);return Tk(qc,function($d){return!go(jd,$d)})}),ps=G(function(qc,jd){return wq(qc,jd)}),fu=G(function(qc){return cs(ai(qc,!0,!0))}),
kw=G(ar);al("pop push reverse shift sort splice unshift".split(" "),function(qc){var jd=Cp[qc];ag.prototype[qc]=function(){var $d=(this||Te)._wrapped;null!=$d&&(jd.apply($d,arguments),"shift"!==qc&&"splice"!==qc||0!==$d.length||delete $d[0]);return ds(this||Te,$d)}});al(["concat","join","slice"],function(qc){var jd=Cp[qc];ag.prototype[qc]=function(){var $d=(this||Te)._wrapped;null!=$d&&($d=jd.apply($d,arguments));return ds(this||Te,$d)}});var qs=Lt({__proto__:null,VERSION:"1.13.4",restArguments:G,
isObject:ca,isNull:function(qc){return null===qc},isUndefined:lb,isBoolean:S,isElement:function(qc){return!(!qc||1!==qc.nodeType)},isString:hs,isNumber:Ut,isDate:Ov,isRegExp:Pv,isError:Qv,isSymbol:is,isArrayBuffer:Rv,isDataView:dr,isArray:ho,isFunction:Il,isArguments:ks,isFinite:function(qc){return!is(qc)&&Rt(qc)&&!isNaN(parseFloat(qc))},isNaN:Pa,isTypedArray:Yt,isEmpty:function(qc){if(null==qc)return!0;var jd=nm(qc);return"number"==typeof jd&&(ho(qc)||hs(qc)||ks(qc))?0===jd:0===nm(Pe(qc))},isMatch:gf,
isEqual:function(qc,jd){return Af(qc,jd)},isMap:Yv,isWeakMap:Zv,isSet:$v,isWeakSet:aw,keys:Pe,allKeys:Ug,values:rh,pairs:function(qc){for(var jd=Pe(qc),$d=jd.length,He=Array($d),jf=0;jf<$d;jf++)He[jf]=[jd[jf],qc[jd[jf]]];return He},invert:Ah,functions:hk,methods:hk,extend:bw,extendOwn:er,assign:er,defaults:ms,create:function(qc,jd){qc=Ph(qc);jd&&er(qc,jd);return qc},clone:function(qc){return ca(qc)?ho(qc)?qc.slice():bw({},qc):qc},tap:function(qc,jd){jd(qc);return qc},get:$l,has:function(qc,jd){jd=
ag.toPath(jd);for(var $d=jd.length,He=0;He<$d;He++){var jf=jd[He];if(!Ja(qc,jf))return!1;qc=qc[jf]}return!!$d},mapObject:function(qc,jd,$d){jd=Wf(jd,$d);$d=Pe(qc);for(var He=$d.length,jf={},Bf=0;Bf<He;Bf++){var vh=$d[Bf];jf[vh]=jd(qc[vh],vh,qc)}return jf},identity:Wk,constant:Za,noop:Nf,toPath:vl,property:ce,propertyOf:function(qc){return null==qc?Nf:function(jd){return $l(qc,jd)}},matcher:Ie,matches:Ie,times:function(qc,jd,$d){var He=Array(Math.max(0,qc));jd=Xg(jd,$d,1);for($d=0;$d<qc;$d++)He[$d]=
jd($d);return He},random:Wg,now:io,escape:Gy,unescape:dw,templateSettings:cu,template:function(qc,jd,$d){!jd&&$d&&(jd=$d);jd=ms({},jd,ag.templateSettings);$d=RegExp([(jd.escape||fr).source,(jd.interpolate||fr).source,(jd.evaluate||fr).source].join("|")+"|$","g");var He=0,jf="__p+='";qc.replace($d,function(vh,ei,kk,hl,Ve){jf+=qc.slice(He,Ve).replace(fw,li);He=Ve+vh.length;ei?jf+="'+\n((__t=("+ei+"))==null?'':_.escape(__t))+\n'":kk?jf+="'+\n((__t=("+kk+"))==null?'':__t)+\n'":hl&&(jf+="';\n"+hl+"\n__p+='");
return vh});jf+="';\n";if(jd=jd.variable){if(!du.test(jd))throw Error("variable is not a bare identifier: "+jd);}else jf="with(obj||{}){\n"+jf+"}\n",jd="obj";jf="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+jf+"return __p;\n";try{var Bf=new Function(jd,"_",jf)}catch(vh){throw vh.source=jf,vh;}$d=function(vh){return Bf.call(this||Te,vh,ag)};$d.source="function("+jd+"){\n"+jf+"}";return $d},result:function(qc,jd,$d){jd=ag.toPath(jd);var He=jd.length;if(!He)return Il($d)?
$d.call(qc):$d;for(var jf=0;jf<He;jf++){var Bf=null==qc?void 0:qc[jd[jf]];void 0===Bf&&(Bf=$d,jf=He);qc=Il(Bf)?Bf.call(qc):Bf}return qc},uniqueId:function(qc){var jd=++gw+"";return qc?qc+jd:jd},chain:function(qc){qc=ag(qc);qc._chain=!0;return qc},iteratee:Ff,partial:Lo,bind:gr,bindAll:hw,memoize:function(qc,jd){var $d=function(He){var jf=$d.cache,Bf=""+(jd?jd.apply(this||Te,arguments):He);Ja(jf,Bf)||(jf[Bf]=qc.apply(this||Te,arguments));return jf[Bf]};$d.cache={};return $d},delay:hr,defer:ir,throttle:function(qc,
jd,$d){var He,jf,Bf,vh,ei=0;$d||($d={});var kk=function(){ei=!1===$d.leading?0:io();He=null;vh=qc.apply(jf,Bf);He||(jf=Bf=null)},hl=function(){var Ve=io();ei||!1!==$d.leading||(ei=Ve);var rs=jd-(Ve-ei);jf=this||Te;Bf=arguments;0>=rs||rs>jd?(He&&(clearTimeout(He),He=null),ei=Ve,vh=qc.apply(jf,Bf),He||(jf=Bf=null)):He||!1===$d.trailing||(He=setTimeout(kk,rs));return vh};hl.cancel=function(){clearTimeout(He);ei=0;He=jf=Bf=null};return hl},debounce:function(qc,jd,$d){var He,jf,Bf,vh,ei,kk=function(){var Ve=
io()-jf;jd>Ve?He=setTimeout(kk,jd-Ve):(He=null,$d||(vh=qc.apply(ei,Bf)),He||(Bf=ei=null))},hl=G(function(Ve){ei=this||Te;Bf=Ve;jf=io();He||(He=setTimeout(kk,jd),$d&&(vh=qc.apply(ei,Bf)));return vh});hl.cancel=function(){clearTimeout(He);He=Bf=ei=null};return hl},wrap:function(qc,jd){return Lo(jd,qc)},negate:Yj,compose:function(){var qc=arguments,jd=qc.length-1;return function(){for(var $d=jd,He=qc[jd].apply(this||Te,arguments);$d--;)He=qc[$d].call(this||Te,He);return He}},after:function(qc,jd){return function(){if(1>
--qc)return jd.apply(this||Te,arguments)}},before:ik,once:ns,findKey:jk,findIndex:jr,findLastIndex:eu,sortedIndex:Qm,indexOf:kr,lastIndexOf:Hy,find:Bl,detect:Bl,findWhere:function(qc,jd){return Bl(qc,Ie(jd))},each:al,forEach:al,map:tn,collect:tn,reduce:jo,foldl:jo,inject:jo,reduceRight:os,foldr:os,filter:Tk,select:Tk,reject:function(qc,jd,$d){return Tk(qc,Yj(Wf(jd)),$d)},every:rq,all:rq,some:$r,any:$r,contains:go,includes:go,include:go,invoke:Iy,pluck:$q,where:function(qc,jd){return Tk(qc,Ie(jd))},
max:Kt,min:function(qc,jd,$d){var He=Infinity,jf=Infinity,Bf;if(null==jd||"number"==typeof jd&&"object"!=typeof qc[0]&&null!=qc){qc=am(qc)?qc:rh(qc);for(var vh=0,ei=qc.length;vh<ei;vh++)$d=qc[vh],null!=$d&&$d<He&&(He=$d)}else jd=Wf(jd,$d),al(qc,function(kk,hl,Ve){Bf=jd(kk,hl,Ve);if(Bf<jf||Infinity===Bf&&Infinity===He)He=kk,jf=Bf});return He},shuffle:function(qc){return tq(qc,Infinity)},sample:tq,sortBy:function(qc,jd,$d){var He=0;jd=Wf(jd,$d);return $q(tn(qc,function(jf,Bf,vh){return{value:jf,index:He++,
criteria:jd(jf,Bf,vh)}}).sort(function(jf,Bf){var vh=jf.criteria,ei=Bf.criteria;if(vh!==ei){if(vh>ei||void 0===vh)return 1;if(vh<ei||void 0===ei)return-1}return jf.index-Bf.index}),"value")},groupBy:Ky,indexBy:Ly,countBy:My,partition:Ny,toArray:sq,size:function(qc){return null==qc?0:am(qc)?qc.length:Pe(qc).length},pick:iw,omit:jw,first:bs,head:bs,take:bs,initial:as,last:function(qc,jd,$d){return null==qc||1>qc.length?null==jd||$d?void 0:[]:null==jd||$d?qc[qc.length-1]:uq(qc,Math.max(0,qc.length-jd))},
rest:uq,tail:uq,drop:uq,compact:function(qc){return Tk(qc,Boolean)},flatten:function(qc,jd){return ai(qc,jd,!1)},without:ps,uniq:cs,unique:cs,union:fu,intersection:function(qc){for(var jd=[],$d=arguments.length,He=0,jf=nm(qc);He<jf;He++){var Bf=qc[He];if(!go(jd,Bf)){var vh;for(vh=1;vh<$d&&go(arguments[vh],Bf);vh++);vh===$d&&jd.push(Bf)}}return jd},difference:wq,unzip:ar,transpose:ar,zip:kw,object:function(qc,jd){for(var $d={},He=0,jf=nm(qc);He<jf;He++)jd?$d[qc[He]]=jd[He]:$d[qc[He][0]]=qc[He][1];
return $d},range:function(qc,jd,$d){null==jd&&(jd=qc||0,qc=0);$d||($d=jd<qc?-1:1);jd=Math.max(Math.ceil((jd-qc)/$d),0);for(var He=Array(jd),jf=0;jf<jd;jf++,qc+=$d)He[jf]=qc;return He},chunk:function(qc,jd){if(null==jd||1>jd)return[];for(var $d=[],He=0,jf=qc.length;He<jf;)$d.push(vq.call(qc,He,He+=jd));return $d},mixin:Lt,"default":ag});return qs._=qs});var Jf=ug;ug.noConflict;var Hf={};var Ig=function(G,ca,lb){var S=G.utils.arrayReplaceAt;var Ra=0;ca=Jf.extend({divWrap:!1,divClass:"checkbox",idPrefix:"checkbox"},
ca);var Da=/\[(X|\s|_|\-)\]\s(.*)/i;var Ja=function(Za,Zb,Vc){var Jc=[];if(ca.divWrap){var cd=new Vc("checkbox_open","div",1);cd.attrs=[["class",ca.divClass]];Jc.push(cd)}var sd=ca.idPrefix+Ra;Ra+=1;cd=new Vc("checkbox_input","input",0);cd.attrs=[["type","checkbox"],["id",sd]];!0===Za&&cd.attrs.push(["checked","true"]);Jc.push(cd);cd=new Vc("label_open","label",1);cd.attrs=[["for",sd]];Jc.push(cd);cd=new Vc("text","",0);cd.content=Zb;Jc.push(cd);Jc.push(new Vc("label_close","label",-1));ca.divWrap&&
Jc.push(new Vc("checkbox_close","div",-1));return Jc};var Pa=function(Za,Zb){var Vc=Za.content.match(Da);if(null===Vc)return Za;Za=!1;var Jc=Vc[1];Vc=Vc[2];if("X"===Jc||"x"===Jc)Za=!0;return Ja(Za,Vc,Zb)};return function(Za){var Zb,Vc;var Jc=Za.tokens;var cd=0;for(Vc=Jc.length;cd<Vc;){if("inline"===Jc[cd].type){var sd=Jc[cd].children;for(Zb=sd.length-1;0<=Zb;){var Pe=sd[Zb];Jc[cd].children=sd=S(sd,Zb,Pa(Pe,Za.Token));Zb--}}cd++}}};var Tg=Hf=function(G,ca){G.core.ruler.push("checkbox",Ig(G,ca))},Lf=
window.lively.FreezerRuntime.recorderFor("lively.ide/md/compiler.js");Lf.externalizeLinksPlugin=function(G){var ca=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};ca=Object.assign({},G.options,{},ca);if(ca.externalizeLinks){ca=ca.externalizeLinks;var lb=ca.internalDomains,S=void 0===lb?[]:lb;lb=ca.internalTarget;var Ra=void 0===lb?"_blank":lb;lb=ca.externalTarget;var Da=void 0===lb?"_blank":lb;lb=ca.internalRel;var Ja=void 0===lb?"":lb;ca=ca.externalRel;var Pa=void 0===ca?"":ca;G.core.ruler.push("external_links",
function(Za){function Zb(Vc){Vc.children&&Vc.children.map(Zb);if("link_open"===Vc.type){var Jc;Jc=(Jc=Vc.attrGet("href").split("//")[1])?(Jc=Jc.split("/")[0].toLowerCase())||null:null;var cd=(Jc=null===Jc||-1!==S.indexOf(Jc))?Ra:Da;"_self"!==cd&&Vc.attrSet("target",cd);if(Jc=Jc?Ja:Pa)cd=Vc.attrGet("rel")||"",""!==cd&&(Jc=cd+" "+Jc),Vc.attrSet("rel",Jc)}}Za.tokens.map(Zb)})}};Lf.addSourceLineMappingPlugin=function(G){var ca=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};ca=Object.assign({},
G.options,{},ca);ca.addSourceLineMapping&&(G.renderer.rules.paragraph_open=G.renderer.rules.heading_open=function(lb,S,Ra,Da,Ja){if(lb[S].map&&0===lb[S].level){var Pa=ic(lb[S].map,2);var Za=Pa[0];Pa=Pa[1];lb[S].attrJoin("class","markdown-line-marker");lb[S].attrSet("data-mdline",String(Za));lb[S].attrSet("data-htmlline",String(Pa))}return Ja.renderToken(lb,S,Ra,Da,Ja)})};Lf.markdownIt=$f;Lf.markdownCheckbox=Tg;Lf.string=Db;(function(G){var ca=window.lively.FreezerRuntime.recorderFor("lively.ide/md/compiler.js"),
lb=ca.hasOwnProperty("MarkdownCompiler")&&"function"===typeof ca.MarkdownCompiler?ca.MarkdownCompiler:ca.MarkdownCompiler=function(S){if(!S||!S[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return fe(lb,G,[{key:"compileToHTML",value:function(S){var Ra=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Da=Ra.linkedCSS,Ja=Ra.markdownWrapperTemplate;Ra=Lf.markdownIt(Ra).use(Lf.externalizeLinksPlugin).use(Lf.addSourceLineMappingPlugin).use(Lf.markdownCheckbox).render(S);
Ja&&(Ra=Lf.string.format(Ja,Ra));if(Da)for(var Pa in Da)Ra='<link type="text/css" rel="stylesheet" id="'.concat(Pa,'" href="').concat(Da[Pa],'">')+Ra;return Ra}},{key:"parse",value:function(S,Ra){var Da=Lf.markdownIt(Ra).use(Lf.externalizeLinksPlugin).use(Lf.markdownCheckbox);Ra=S.textString;S=Da.parse(S.textString,{});var Ja=Ra.split("\n");Ra=S.filter(function(Pa){return"heading_open"===Pa.type}).map(function(Pa,Za){Za=ic(Pa.map,1)[0];return{line:Za,depth:Pa.level+1,string:Ja[Za].trim()}});return{parsed:S,
headings:Ra}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MarkdownCompiler"}}],ca,{pathInPackage:function(){return"./md/compiler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:167,end:1288})})(void 0);Lf.mdCompiler=new Lf.MarkdownCompiler;var yf=Lf.mdCompiler;Lf.mdCompiler=yf;var Qe=window.lively.FreezerRuntime.recorderFor("lively.ide/md/snippets.js"),
zg=[["table","| $0      | $1      |\n| ----------- | ----------- |\n| $2          | $3          |\n| $4          | $5          |"]];Qe.snippets=zg;Qe.snippets=zg;var Dh=window.lively.FreezerRuntime.recorderFor("lively.ide/md/mode.js");Dh.passIndent=dc;Dh.innerMode=Rb;Dh.getMode=ba;Dh.findModeByName=yc;Dh.defineMode=la;Dh.defineMIME=Fb;Dh.copyState=xb;Dh.startState=Ia;Dh.defineMode("markdown",function(G,ca){function lb(Ie,ce,Xg){ce.f=ce.inline=Xg;return Xg(Ie,ce)}function S(Ie){return!Ie||!/\S/.test(Ie.string)}
function Ra(Ie){Ie.linkTitle=!1;Ie.em=!1;Ie.strong=!1;Ie.strikethrough=!1;Ie.quote=0;Ie.indentedCode=!1;Ie.f==Ja&&(Ie.f=Vc,Ie.block=Da);Ie.trailingSpace=0;Ie.trailingSpaceNewLine=!1;Ie.prevLine=Ie.thisLine;return Ie.thisLine=null}function Da(Ie,ce){var Xg=Ie.sol(),Ld=!1!==ce.list,Ff=ce.indentedCode;ce.indentedCode=!1;if(null===ce.indentationDiff){var Wf=ce.indentation;ce.indentationDiff=ce.indentation;if(Ld){for(ce.list=null;Wf<ce.listStack[ce.listStack.length-1];)ce.listStack.pop(),ce.listStack.length?
ce.indentation=ce.listStack[ce.listStack.length-1]:ce.list=!1;!1!==ce.list&&(ce.indentationDiff=Wf-ce.listStack[ce.listStack.length-1])}}var Nf=null;if(4<=ce.indentationDiff&&(Ff||S(ce.prevLine)))return Ie.skipToEnd(),ce.indentedCode=!0,Ug.code;if(Ie.eatSpace())return null;if((Nf=Ie.match(tk))&&6>=Nf[1].length)return ce.header=Nf[1].length,ca.highlightFormatting&&(ce.formatting="header"),ce.f=ce.inline,Za(ce);if(S(ce.prevLine)||ce.quote||Ld||Ff||!(Nf=Ie.match(Zl))){if(Ie.eat(">"))return ce.quote=
Xg?1:ce.quote+1,ca.highlightFormatting&&(ce.formatting="quote"),Ie.eatSpace(),Za(ce);if("["===Ie.peek())return lb(Ie,ce,Pe);if(Ie.match(rh,!0))return ce.hr=!0,Ug.hr;if(Nf=Ie.match(Ah))return Xg=Nf[1]?"ol":"ul",ce.indentation=Wf+Ie.current().length,ce.list=!0,ce.listStack.push(ce.indentation),ca.taskLists&&Ie.match(hk,!1)&&(ce.taskList=!0),ce.f=ce.inline,ca.highlightFormatting&&(ce.formatting=["list","list-"+Xg]),Za(ce);if(ca.fencedCodeBlocks&&(Nf=Ie.match(vl,!0)))return ce.fencedChars=Nf[1],ce.localMode=
Dh.getMode(Nf[2]),ce.localMode&&(ce.localState=Dh.startState(ce.localMode)),ce.f=ce.block=Pa,ca.highlightFormatting&&(ce.formatting="code-block"),ce.code=-1,Za(ce)}else return ce.header="="==Nf[0].charAt(0)?1:2,ca.highlightFormatting&&(ce.formatting="header"),ce.f=ce.inline,Za(ce);return lb(Ie,ce,ce.inline)}function Ja(Ie,ce){var Xg=Af.token(Ie,ce.htmlState);if(!ph){var Ld=Dh.innerMode(Af,ce.htmlState);if("xml"==Ld.mode.name&&null===Ld.state.tagStart&&!Ld.state.context&&Ld.state.tokenize.isInText||
ce.md_inside&&-1<Ie.current().indexOf(">"))ce.f=Vc,ce.block=Da,ce.htmlState=null}return Xg}function Pa(Ie,ce){if(ce.fencedChars&&Ie.match(ce.fencedChars))return ca.highlightFormatting&&(ce.formatting="code-block"),Ie=Za(ce),ce.localMode=ce.localState=null,ce.block=Da,ce.f=Vc,ce.fencedChars=null,ce.code=0,Ie;if(ce.fencedChars&&Ie.skipTo(ce.fencedChars))return"comment";if(ce.localMode)return ce.localMode.token(Ie,ce.localState);Ie.skipToEnd();return Ug.code}function Za(Ie){var ce=[];if(Ie.formatting){ce.push(Ug.formatting);
"string"===typeof Ie.formatting&&(Ie.formatting=[Ie.formatting]);for(var Xg=0;Xg<Ie.formatting.length;Xg++)ce.push(Ug.formatting+"-"+Ie.formatting[Xg]),"header"===Ie.formatting[Xg]&&ce.push(Ug.formatting+"-"+Ie.formatting[Xg]+"-"+Ie.header),"quote"===Ie.formatting[Xg]&&(!ca.maxBlockquoteDepth||ca.maxBlockquoteDepth>=Ie.quote?ce.push(Ug.formatting+"-"+Ie.formatting[Xg]+"-"+Ie.quote):ce.push("error"))}if(Ie.taskOpen)return ce.push("meta"),ce.length?ce.join(" "):null;if(Ie.taskClosed)return ce.push("property"),
ce.length?ce.join(" "):null;Ie.linkHref?ce.push(Ug.linkHref,"url"):(Ie.strong&&ce.push(Ug.strong),Ie.em&&ce.push(Ug.em),Ie.strikethrough&&ce.push(Ug.strikethrough),Ie.linkText&&ce.push(Ug.linkText),Ie.code&&ce.push(Ug.code),Ie.image&&ce.push(Ug.image),Ie.imageAltText&&ce.push(Ug.imageAltText,"link"),Ie.imageMarker&&ce.push(Ug.imageMarker));Ie.header&&ce.push(Ug.header,Ug.header+"-"+Ie.header);Ie.quote&&(ce.push(Ug.quote),!ca.maxBlockquoteDepth||ca.maxBlockquoteDepth>=Ie.quote?ce.push(Ug.quote+"-"+
Ie.quote):ce.push(Ug.quote+"-"+ca.maxBlockquoteDepth));!1!==Ie.list&&((Xg=(Ie.listStack.length-1)%3)?1===Xg?ce.push(Ug.list2):ce.push(Ug.list3):ce.push(Ug.list1));Ie.trailingSpaceNewLine?ce.push("trailing-space-new-line"):Ie.trailingSpace&&ce.push("trailing-space-"+(Ie.trailingSpace%2?"a":"b"));return ce.length?ce.join(" "):null}function Zb(Ie,ce){if(Ie.match(Ph,!0))return Za(ce)}function Vc(Ie,ce){var Xg=ce.text(Ie,ce);if("undefined"!==typeof Xg)return Xg;if(ce.list)return ce.list=null,Za(ce);if(ce.taskList)return"x"!==
Ie.match(hk,!0)[1]?ce.taskOpen=!0:ce.taskClosed=!0,ca.highlightFormatting&&(ce.formatting="task"),ce.taskList=!1,Za(ce);ce.taskOpen=!1;ce.taskClosed=!1;if(ce.header&&Ie.match(/^#+$/,!0))return ca.highlightFormatting&&(ce.formatting="header"),Za(ce);Xg=Ie.next();if(ce.linkTitle){ce.linkTitle=!1;var Ld=Xg;"("===Xg&&(Ld=")");Ld=(Ld+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1");if(Ie.match(new RegExp("^\\s*(?:[^"+Ld+"\\\\]+|\\\\\\\\|\\\\.)"+Ld),!0))return Ug.linkHref}if("`"===Xg){Xg=ce.formatting;ca.highlightFormatting&&
(ce.formatting="code");Ie.eatWhile("`");Ie=Ie.current().length;if(0==ce.code)return ce.code=Ie,Za(ce);if(Ie==ce.code)return Ie=Za(ce),ce.code=0,Ie;ce.formatting=Xg;return Za(ce)}if(ce.code)return Za(ce);if("\\"===Xg&&(Ie.next(),ca.highlightFormatting))return Xg=Za(ce),ce=Ug.formatting+"-escape",Xg?Xg+" "+ce:ce;if("!"===Xg&&Ie.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return ce.imageMarker=!0,ce.image=!0,ca.highlightFormatting&&(ce.formatting="image"),Za(ce);if("["===Xg&&ce.imageMarker&&Ie.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,
!1))return ce.imageMarker=!1,ce.imageAltText=!0,ca.highlightFormatting&&(ce.formatting="image"),Za(ce);if("]"===Xg&&ce.imageAltText)return ca.highlightFormatting&&(ce.formatting="image"),Xg=Za(ce),ce.imageAltText=!1,ce.image=!1,ce.inline=ce.f=cd,Xg;if("["===Xg&&!ce.image)return ce.linkText=!0,ca.highlightFormatting&&(ce.formatting="link"),Za(ce);if("]"===Xg&&ce.linkText)return ca.highlightFormatting&&(ce.formatting="link"),Xg=Za(ce),ce.linkText=!1,ce.inline=ce.f=Ie.match(/\(.*?\)| ?\[.*?\]/,!1)?cd:
Vc,Xg;if("<"===Xg&&Ie.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return ce.f=ce.inline=Jc,ca.highlightFormatting&&(ce.formatting="link"),Xg=Za(ce),(Xg?Xg+" ":"")+Ug.linkInline;if("<"===Xg&&Ie.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return ce.f=ce.inline=Jc,ca.highlightFormatting&&(ce.formatting="link"),Xg=Za(ce),(Xg?Xg+" ":"")+Ug.linkEmail;if("<"===Xg&&Ie.match(/^(!--|[a-z]+(?:\s+[a-z_:.\-]+(?:\s*=\s*[^ >]+)?)*\s*>)/i,!1))return Xg=Ie.string.indexOf(">",Ie.pos),-1!=Xg&&(Xg=Ie.string.substring(Ie.start,
Xg),/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(Xg)&&(ce.md_inside=!0)),Ie.backUp(1),ce.htmlState=Dh.startState(Af),Xg=Ja,ce.f=ce.block=Xg,Xg(Ie,ce);if("<"===Xg&&Ie.match(/^\/\w*?>/))return ce.md_inside=!1,"tag";if("*"===Xg||"_"===Xg){for(var Ff=1,Wf=1==Ie.pos?" ":Ie.string.charAt(Ie.pos-2);3>Ff&&Ie.eat(Xg);)Ff++;var Nf=Ie.peek()||" ",Wg=!/\s/.test(Nf)&&(!Uj.test(Nf)||/\s/.test(Wf)||Uj.test(Wf)),ki=!/\s/.test(Wf)&&(!Uj.test(Wf)||/\s/.test(Nf)||Uj.test(Nf)),li=Ld=null;Ff%2&&(ce.em||!Wg||"*"!==Xg&&
ki&&!Uj.test(Wf)?ce.em!=Xg||!ki||"*"!==Xg&&Wg&&!Uj.test(Nf)||(Ld=!1):Ld=!0);1<Ff&&(ce.strong||!Wg||"*"!==Xg&&ki&&!Uj.test(Wf)?ce.strong!=Xg||!ki||"*"!==Xg&&Wg&&!Uj.test(Nf)||(li=!1):li=!0);if(null!=li||null!=Ld)return ca.highlightFormatting&&(ce.formatting=null==Ld?"strong":null==li?"em":"strong em"),!0===Ld&&(ce.em=Xg),!0===li&&(ce.strong=Xg),Ie=Za(ce),!1===Ld&&(ce.em=!1),!1===li&&(ce.strong=!1),Ie}else if(" "===Xg&&(Ie.eat("*")||Ie.eat("_"))){if(" "===Ie.peek())return Za(ce);Ie.backUp(1)}if(ca.strikethrough)if("~"===
Xg&&Ie.eatWhile(Xg)){if(ce.strikethrough)return ca.highlightFormatting&&(ce.formatting="strikethrough"),Ie=Za(ce),ce.strikethrough=!1,Ie;if(Ie.match(/^[^\s]/,!1))return ce.strikethrough=!0,ca.highlightFormatting&&(ce.formatting="strikethrough"),Za(ce)}else if(" "===Xg&&Ie.match(/^~~/,!0)){if(" "===Ie.peek())return Za(ce);Ie.backUp(2)}" "===Xg&&(Ie.match(/ +$/,!1)?ce.trailingSpace++:ce.trailingSpace&&(ce.trailingSpaceNewLine=!0));return Za(ce)}function Jc(Ie,ce){if(">"===Ie.next())return ce.f=ce.inline=
Vc,ca.highlightFormatting&&(ce.formatting="link"),Ie=Za(ce),(Ie?Ie+" ":"")+Ug.linkInline;Ie.match(/^[^>]+/,!0);return Ug.linkInline}function cd(Ie,ce){if(Ie.eatSpace())return null;Ie=Ie.next();return"("===Ie||"["===Ie?(ce.f=ce.inline=sd("("===Ie?")":"]"),ca.highlightFormatting&&(ce.formatting="link-string"),ce.linkHref=!0,Za(ce)):"error"}function sd(Ie){return function(ce,Xg){if(ce.next()===Ie)return Xg.f=Xg.inline=Vc,ca.highlightFormatting&&(Xg.formatting="link-string"),ce=Za(Xg),Xg.linkHref=!1,
ce;ce.match($l[Ie]);Xg.linkHref=!0;return Za(Xg)}}function Pe(Ie,ce){return Ie.match(/^([^\]\\]|\\.)*\]:/,!1)?(ce.f=gf,Ie.next(),ca.highlightFormatting&&(ce.formatting="link"),ce.linkText=!0,Za(ce)):lb(Ie,ce,Vc)}function gf(Ie,ce){if(Ie.match(/^\]:/,!0))return ce.f=ce.inline=ag,ca.highlightFormatting&&(ce.formatting="link"),Ie=Za(ce),ce.linkText=!1,Ie;Ie.match(/^([^\]\\]|\\.)+/,!0);return Ug.linkText}function ag(Ie,ce){if(Ie.eatSpace())return null;Ie.match(/^[^\s]+/,!0);void 0===Ie.peek()?ce.linkTitle=
!0:Ie.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0);ce.f=ce.inline=Vc;return Ug.linkHref+" url"}var Af=Dh.getMode(G,"text/html"),ph="null"==Af.name;void 0===ca.highlightFormatting&&(ca.highlightFormatting=!1);void 0===ca.maxBlockquoteDepth&&(ca.maxBlockquoteDepth=0);void 0===ca.taskLists&&(ca.taskLists=!1);void 0===ca.strikethrough&&(ca.strikethrough=!1);void 0===ca.tokenTypeOverrides&&(ca.tokenTypeOverrides={});var Ug={header:"header",code:"comment",
quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough"},$i;for($i in Ug)Ug.hasOwnProperty($i)&&ca.tokenTypeOverrides[$i]&&(Ug[$i]=ca.tokenTypeOverrides[$i]);var rh=/^([*\-_])(?:\s*\1){2,}\s*$/,Ah=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,hk=/^\[(x| )\](?=\s)/,tk=ca.allowAtxHeaderWithoutSpace?
/^(#+)/:/^(#+)(?: |$)/,Zl=/^ *(?:={1,}|-{1,})\s*$/,Ph=/^[^#!\[\]*_\\<>` "'(~]+/,vl=new RegExp("^("+(!0===ca.fencedCodeBlocks?"~~~+|```+":ca.fencedCodeBlocks)+")[ \\t]*([\\w+#-]*)"),Uj=/[!"#$%&'()*+,\-\.\/:;<=>?@\[\\\]^_`{|}~\u2014]/,$l={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/},Wk={startState:function(){return{f:Da,prevLine:null,thisLine:null,block:Da,htmlState:null,indentation:0,inline:Vc,text:Zb,formatting:!1,linkText:!1,linkHref:!1,
linkTitle:!1,code:0,em:!1,strong:!1,header:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,fencedChars:null}},copyState:function(Ie){return{f:Ie.f,prevLine:Ie.prevLine,thisLine:Ie.thisLine,block:Ie.block,htmlState:Ie.htmlState&&Dh.copyState(Af,Ie.htmlState),indentation:Ie.indentation,localMode:Ie.localMode,localState:Ie.localMode?Dh.copyState(Ie.localMode,Ie.localState):null,inline:Ie.inline,text:Ie.text,formatting:!1,linkText:Ie.linkText,
linkTitle:Ie.linkTitle,code:Ie.code,em:Ie.em,strong:Ie.strong,strikethrough:Ie.strikethrough,header:Ie.header,hr:Ie.hr,taskList:Ie.taskList,list:Ie.list,listStack:Ie.listStack.slice(0),quote:Ie.quote,indentedCode:Ie.indentedCode,trailingSpace:Ie.trailingSpace,trailingSpaceNewLine:Ie.trailingSpaceNewLine,md_inside:Ie.md_inside,fencedChars:Ie.fencedChars}},token:function(Ie,ce){ce.formatting=!1;if(Ie!=ce.thisLine){ce.header=0;ce.hr=!1;if(Ie.match(/^\s*$/,!0))return Ra(ce),null;ce.prevLine=ce.thisLine;
ce.thisLine=Ie;ce.taskList=!1;ce.trailingSpace=0;ce.trailingSpaceNewLine=!1;ce.f=ce.block;if(ce.f!=Ja){var Xg=Ie.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;ce.indentation=Xg;ce.indentationDiff=null;if(0<Xg)return null}}return ce.f(Ie,ce)},innerMode:function(Ie){return Ie.block==Ja?{state:Ie.htmlState,mode:Af}:Ie.localState?{state:Ie.localState,mode:Ie.localMode}:{state:Ie,mode:Wk}},indent:function(Ie,ce,Xg){return Ie.block==Ja?Af.indent(Ie.htmlState,ce,Xg):Ie.localState?Ie.localMode.indent(Ie.localState,
ce,Xg):Dh.passIndent},blankLine:Ra,getType:Za,closeBrackets:"()[]{}''\"\"``",fold:"markdown",blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e"};return Wk},"xml");Dh.defineMIME("text/x-markdown","markdown");var Jg=window.lively.FreezerRuntime.recorderFor("lively.ide/md/navigator.js");Jg.arr=Ed;Jg.string=Db;var zh=function(G){var ca=window.lively.FreezerRuntime.recorderFor("lively.ide/md/navigator.js"),lb=ca.hasOwnProperty("MarkdownNavigator")&&"function"===typeof ca.MarkdownNavigator?ca.MarkdownNavigator:
ca.MarkdownNavigator=function(S){if(!S||!S[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return fe(lb,G,[{key:"ensureAST",value:function(S){return S.editorPlugin.parsedMarkdown()}},{key:"moveToHeading",value:function(S,Ra){Ra&&(S.cursorPosition={row:Ra.line,column:0},S.scrollCursorIntoView())}},{key:"backwardSexp",value:function(S){var Ra=S.textString,Da=this.ensureAST(S).headings,Ja=S.cursorPosition,Pa=this.headingOfLine(Da,
Ja.row);Pa&&Pa.line===Ja.row&&0===Ja.column&&(Ra=this.siblingsBefore(Ra,Da,Pa),Pa=Jg.arr.last(Ra));this.moveToHeading(S,Pa)}},{key:"forwardSexp",value:function(S){var Ra=S.textString,Da=this.ensureAST(S).headings,Ja=this.headingOfLine(Da,S.cursorPosition.row);Ra=this.siblingsAfter(Ra,Da,Ja);this.moveToHeading(S,Ra[0])}},{key:"backwardUpSexp",value:function(S){var Ra=this.ensureAST(S).headings,Da=this.headingOfLine(Ra,S.cursorPosition.row);Ra=this.ownerHeadings(Ra,Da);this.moveToHeading(S,Jg.arr.last(Ra))}},
{key:"forwardDownSexp",value:function(S){var Ra=this.ensureAST(S).headings,Da=this.headingOfLine(Ra,S.cursorPosition.row);Ra=this.rangeOfHeading(S.textString,Ra,Da);this.moveToHeading(S,Ra.subheadings[1])}},{key:"expandRegion",value:function(S,Ra,Da,Ja){var Pa=S.cursorPosition;Da=this.ensureAST(S).headings;var Za=this.headingOfLine(Da,Pa.row);return!Za||Za&&Za.line===Pa.row&&0===Pa.column&&Ja.range[0]!==Ja.range[1]&&(Pa=this.ownerHeadings(Da,Za),Za=Jg.arr.last(Pa),!Za)?Ja:(Ra=this.rangeOfHeading(Ra,
Da,Za))?{range:[S.positionToIndex(Ra.range.end),S.positionToIndex(Ra.range.start)],prev:Ja}:Ja}},{key:"contractRegion",value:function(S,Ra,Da,Ja){return Ja.prev||Ja}},{key:"ownerHeadings",value:function(S,Ra){if(1>=Ra.depth)return[];var Da=S.slice(0,S.indexOf(Ra));if(!Da.length)return[];Da=Da.reverse().find(function(Ja){return Ja.depth<Ra.depth});return this.ownerHeadings(S,Da).concat([Da])}},{key:"withSiblings",value:function(S,Ra,Da){if(1===Da.depth)return Ra.filter(function(Pa){return 1===Pa.depth});
var Ja=this.ownerHeadings(Ra,Da);return this.rangeOfHeading(S,Ra,Jg.arr.last(Ja)).subheadings.filter(function(Pa){return Pa.depth===Da.depth})}},{key:"siblingsBefore",value:function(S,Ra,Da){S=this.withSiblings(S,Ra,Da);return S.slice(0,S.indexOf(Da))}},{key:"siblingsAfter",value:function(S,Ra,Da){S=this.withSiblings(S,Ra,Da);return S.slice(S.indexOf(Da)+1)}},{key:"headingOfLine",value:function(S,Ra){for(var Da,Ja=0;Ja<S.length&&!(S[Ja].line>Ra);Ja++)Da=S[Ja];return Da}},{key:"rangeOfHeading",value:function(S,
Ra,Da){S=Array.isArray(S)?S:Jg.string.lines(S);var Ja=Ra.find(function(Za){return Da&&Za.line===Da.line}),Pa=Ra.indexOf(Ja);Pa=Ra.slice(Pa+1).find(function(Za){return Za.depth<=Da.depth});Ra=Ra.slice(Ra.indexOf(Ja),Pa?Ra.indexOf(Pa):Ra.length);return{range:{start:{row:Ja.line,column:0},end:Pa?{row:Pa.line-1,column:S[Pa.line-1].length}:{row:S.length-1,column:S[S.length-1].length}},subheadings:Ra}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MarkdownNavigator"}}],ca,{pathInPackage:function(){return"./md/navigator.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:58,end:4663})}(void 0);Jg["default"]=zh;var jh=window.lively.FreezerRuntime.recorderFor("lively.ide/md/morphs.js");jh.HTMLMorph=ab;jh.Morph=eb;jh.mdCompiler=yf;jh.connect=vd;jh.fun=kc;jh.rect=Rc;var Pg=function(G){var ca=window.lively.FreezerRuntime.recorderFor("lively.ide/md/morphs.js"),
lb=ca.hasOwnProperty("MarkdownPreviewMorph")&&"function"===typeof ca.MarkdownPreviewMorph?ca.MarkdownPreviewMorph:ca.MarkdownPreviewMorph=function(S){if(!S||!S[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return fe(lb,G,[{key:"reset",value:function(){this.disconnectMarkdownScrollToHTMLScroll();this.disconnectHTMLScrollToMarkdownScroll();this.connectMarkdownScrollToHTMLScroll(!0);this.connectHTMLScrollToMarkdownScroll(!0)}},
{key:"___",value:function(){this.markdownToHTMLPositionMap.map(function(S,Ra){return"".concat(Ra,": ").concat(Math.round(S))}).join("\n")}},{key:"smoothScrollStart",value:function(S,Ra,Da){var Ja=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Date.now();this.debug&&console.log("[smoothScroll] start",Ra);this._smoothScroll||(this._smoothScroll=[]);for(var Pa=this._smoothScroll.length;Pa--;)this._smoothScroll[Pa][0]===S&&this._smoothScroll.splice(Pa,1);this._smoothScroll.push([S,Ra,Da,Ja]);
this.startStepping("smoothScrollStep")}},{key:"smoothScrollStep",value:function(){if(this._smoothScroll){for(var S=this._smoothScroll.length;S--;){var Ra=this._smoothScroll[S],Da=ic(Ra,4),Ja=Da[0],Pa=Da[1],Za=Da[2];Da=Da[3];Ja=Ja.env.renderer.getNodeForMorph(Ja);var Zb=Math.abs(Ja.scrollTop-Pa);1>Zb||1E3<Date.now()-Da?this._smoothScroll.splice(S,1):(Za||(Za=Ra[2]=Zb/10),Zb<Za&&(Za=Zb),Ja.scrollTop>Pa&&(Za=-Za),Ja.scrollTop+=Za,this.debug&&console.log("[smoothScroll] step",Ja.scrollTop+Za))}this._smoothScroll.length||
(this._smoothScroll=null)}else this.debug&&console.log("[smoothScroll] stop"),this.stopSteppingScriptNamed("smoothScrollStep")}},{key:"computeMarkdownToHTMLPositionMap",value:function(){var S=this.domNode.querySelectorAll(".markdown-line-marker");if(!S.length)return[];var Ra=this.markdownSource.split("\n").length,Da=S[0].parentElement.getBoundingClientRect(),Ja=Da.top;Da=Da.height;S=Array.from(S).reduce(function(Za,Zb){var Vc=Number(Zb.getAttribute("data-mdline"));Za[Vc]=Zb.getBoundingClientRect().top-
Ja;return Za},[]);S[Ra]=Da;S.join("\n");S.slice(-15).join("\n");for(Ra=0;Ra<S.length-1;Ra++){for(Da=Ra+1;Da<S.length;Da++)if(void 0!==S[Da]){var Pa=Da;break}Da=(S[Pa]-S[Ra])/(Pa-Ra);for(Ra+=1;Ra<Pa;Ra++)S[Ra]=(S[Ra-1]||0)+Da;Ra=Pa-1}return S}},{key:"syncMarkdownScrollToHTMLScroll",value:function(){var S=this,Ra=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.markdownEditor;if(Ra){var Da=Ra.whatsVisible,Ja=Da.startRow,Pa=Da.endRow;Ra=Ra.lineCount();Da=Pa-Ja;Pa=Math.round(Ja+(Pa-Ja)/2);
var Za=this.markdownToHTMLPositionMap,Zb=this.debug;Ja<Da/2?(Ja*=2,Zb&&console.log("[start] ".concat(Pa," => ").concat(Ja))):Pa<Ra/2-Da/4||Pa>Ra/2+Da/4?(Ja=Pa,Zb&&console.log("[just centerRow] ".concat(Pa," => ").concat(Ja))):(Ja=Math.round(Ra/2-Da/4+Da/(1+Math.pow(Math.E,-.7*(Pa-Ra/2)))),Zb&&console.log("[sigmoid center] ".concat(Pa," => ").concat(Ja)));"number"===typeof Za[Ja]&&(this.htmlScrollToMarkdownScrollConnections().forEach(function(Vc){return Vc.activate()}),this.smoothScrollStart(this,
Za[Ja]),jh.fun.waitFor(function(){return!S._smoothScroll},function(){return S.htmlScrollToMarkdownScrollConnections().forEach(function(Vc){return Vc.deactivate()})}))}}},{key:"syncHTMLScrollToMarkdownScroll",value:function(){var S=this,Ra=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.markdownEditor;if(Ra){var Da=this.domNode.parentNode.scrollTop,Ja=this.markdownToHTMLPositionMap.reduce(function(Pa,Za,Zb){var Vc=Math.abs(Za-Da);return Pa.delta<Vc?Pa:{delta:Vc,height:Za,line:Zb}},{delta:Infinity,
line:-1});this.markdownScrollToHTMLScrollConnections(Ra).forEach(function(Pa){return Pa.activate()});Ja=Ra.charBoundsFromTextPosition({row:Ja.line,column:0}).y;this.smoothScrollStart(Ra,Ja);jh.fun.waitFor(function(){return!S._smoothScroll},function(){return S.markdownScrollToHTMLScrollConnections(Ra).forEach(function(Pa){return Pa.deactivate()})})}}},{key:"syncHTMLScrollToMarkdownScrollDebounced",value:function(S){var Ra=this;requestAnimationFrame(function(){return Ra.syncHTMLScrollToMarkdownScroll(S)})}},
{key:"syncMarkdownScrollToHTMLScrollDebounced",value:function(S){var Ra=this;requestAnimationFrame(function(){return Ra.syncMarkdownScrollToHTMLScroll(S)})}},{key:"htmlScrollToMarkdownScrollConnections",value:function(){return this.attributeConnections?this.attributeConnections.filter(function(S){return S.targetMethodName.startsWith("syncHTMLScrollToMarkdownScroll")}):[]}},{key:"markdownScrollToHTMLScrollConnections",value:function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.markdownEditor;
return S.attributeConnections?S.attributeConnections.filter(function(Ra){return Ra.targetMethodName.startsWith("syncMarkdownScrollToHTMLScroll")}):[]}},{key:"autoRenderConnections",value:function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.markdownEditor;return S.attributeConnections?S.attributeConnections.filter(function(Ra){return Ra.targetMethodName.startsWith("autoRender")}):[]}},{key:"connectHTMLScrollToMarkdownScroll",value:function(){jh.connect(this,"scroll",this,"syncHTMLScrollToMarkdownScroll"+
(0<arguments.length&&void 0!==arguments[0]&&arguments[0]?"Debounced":""),{converter:function(){}})}},{key:"disconnectHTMLScrollToMarkdownScroll",value:function(){this.htmlScrollToMarkdownScrollConnections().forEach(function(S){return S.disconnect()})}},{key:"connectMarkdownScrollToHTMLScroll",value:function(){jh.connect(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.markdownEditor,"scroll",this,"syncMarkdownScrollToHTMLScroll"+(0<arguments.length&&void 0!==arguments[0]&&arguments[0]?
"Debounced":""),{converter:function(){}})}},{key:"disconnectMarkdownScrollToHTMLScroll",value:function(){this.markdownScrollToHTMLScrollConnections(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.markdownEditor).forEach(function(S){return S.disconnect()})}},{key:"enableAutoRender",value:function(){jh.connect(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.markdownEditor,"textChange",this,"autoRender",{converter:function(){}})}},{key:"disableAutoRender",value:function(){this.autoRenderConnections(0<
arguments.length&&void 0!==arguments[0]?arguments[0]:this.markdownEditor).forEach(function(S){return S.disconnect()})}},{key:"autoRender",value:function(){var S=this;jh.fun.throttleNamed("autoRender"+this.id,300,function(){return S.renderMarkdown()})()}},{key:"renderMarkdown",value:function(){0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.markdownEditor;this.markdownToHTMLPositionMap=null;var S=this.markdownEditor;this.html=S?S.editorPlugin.renderedMarkdown():jh.mdCompiler.compileToHTML(this.markdownSource,
this.markdownOptions);this._smoothScroll=null;this.submorphs=[];return this.html}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MarkdownPreviewMorph"}},{key:"properties",get:function(){return{markdownEditor:{},markdownSource:{after:["markdownEditor"],get:function(){return this.markdownEditor.textString||this.getProperty("markdownSource")},set:function(S){this.setProperty("markdownSource",S);this.markdownEditor&&(this.markdownEditor.textString=S)}},markdownOptions:{after:["markdownEditor"],
get:function(){var S=this.markdownEditor;return S&&S.editorPlugin.markdownOptions||this.getProperty("markdownOptions")},set:function(S){var Ra=this.markdownEditor;Ra?(Ra.editorPlugin.markdownOptions=S,this.setProperty("markdownOptions",null)):this.setProperty("markdownOptions",S)}},markdownToHTMLPositionMap:{get:function(){var S=this.getProperty("markdownToHTMLPositionMap");if(S)return S;this.setProperty("markdownToHTMLPositionMap",S=this.computeMarkdownToHTMLPositionMap());return S}}}}}],ca,{pathInPackage:function(){return"./md/morphs.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:247,end:11878})}(jh.HTMLMorph);jh.MarkdownPreviewMorph=Pg;jh.MarkdownPreviewMorph=Pg;var ah=function(G){var ca=window.lively.FreezerRuntime.recorderFor("lively.ide/md/morphs.js"),lb=ca.hasOwnProperty("MarkdownEditor")&&"function"===typeof ca.MarkdownEditor?ca.MarkdownEditor:ca.MarkdownEditor=
function(S){if(!S||!S[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return fe(lb,G,[{key:"onFocus",value:function(){this.mdEditorMorph.focus()}},{key:"reset",value:function(){jh.connect(this.get("edit css button"),"fire",this,"editCSS");jh.connect(this.get("link scroll checkbox"),"checked",this,"linkScroll");jh.connect(this.get("render while typing checkbox"),"checked",this,"autoRender");jh.connect(this.get("show preview checkbox"),
"checked",this,"showPreview");this.showPreview=!0;this.mdPreviewMorph.show()}},{key:"mdEditorMorph",get:function(){return this.getSubmorphNamed("editor")}},{key:"mdPreviewMorph",get:function(){return this.getSubmorphNamed(/markdown preview .*/)}},{key:"addPreview",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja;return regeneratorRuntime.wrap(function(Pa){for(;;)switch(Pa.prev=Pa.next){case 0:if(!this.mdPreviewMorph){Pa.next=2;break}return Pa.abrupt("return");case 2:return Pa.next=
4,this.mdEditorMorph.execCommand("[markdown] convert to html",{openInWorld:!1});case 4:Ja=Pa.sent,this.addMorph(Ja),Ja.border=this.mdEditorMorph.border,this.mdEditorMorph.setBounds(jh.rect(this.get("show preview checkbox").bottomLeft.addXY(0,5),this.innerBounds().bottomCenter().addXY(-2,-5))),Ja.setBounds(jh.rect(this.mdEditorMorph.topRight.addXY(4,0),this.innerBounds().bottomRight().addXY(-5,-5))),this.autoRender=this.autoRender,this.linkScroll=this.linkScroll,Ja.cssDeclaration=this.css||"";case 12:case "end":return Pa.stop()}},
Da,this)}));return function(){return S.apply(this,arguments)}}()},{key:"removePreview",value:function(){var S=this.mdPreviewMorph;S&&S.remove();this.mdEditorMorph.setBounds(jh.rect(this.get("show preview checkbox").bottomLeft.addXY(0,5),this.innerBounds().bottomRight().addXY(-5,-5)))}},{key:"editCSS",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja;return regeneratorRuntime.wrap(function(Pa){for(;;)switch(Pa.prev=Pa.next){case 0:return Pa.next=2,$world.editPrompt("edit css for markdown",
{requester:this,input:this.css||"",historyId:"markdowneditor-css-history",mode:"css"});case 2:Ja=Pa.sent;if(void 0!==Ja){Pa.next=5;break}return Pa.abrupt("return");case 5:this.css=Ja;case 6:case "end":return Pa.stop()}},Da,this)}));return function(){return S.apply(this,arguments)}}()},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-S",win:"Control-S"},command:"save"}]}},{key:"commands",get:function(){var S=this;return[{name:"save",exec:function(){var Ra=S.mdPreviewMorph;Ra&&Ra.renderMarkdown();
return!0}}]}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MarkdownEditor"}},{key:"properties",get:function(){return{showPreview:{derived:!0,set:function(S){(this.get("show preview checkbox").checked=S)?this.addPreview():this.removePreview()},get:function(){return!!this.mdPreviewMorph}},linkScroll:{after:["showPreview"],derived:!0,set:function(S){this.get("link scroll checkbox").checked=S;var Ra=this.mdPreviewMorph;Ra&&(S?(Ra.connectHTMLScrollToMarkdownScroll(),Ra.connectMarkdownScrollToHTMLScroll()):
(Ra.disconnectHTMLScrollToMarkdownScroll(),Ra.disconnectMarkdownScrollToHTMLScroll()))},get:function(){return this.get("link scroll checkbox").checked}},autoRender:{after:["showPreview"],derived:!0,set:function(S){this.get("render while typing checkbox").checked=S;var Ra=this.mdPreviewMorph;Ra&&(S?Ra.enableAutoRender():Ra.disableAutoRender())},get:function(){return this.get("render while typing checkbox").checked}},css:{after:["showPreview"],set:function(S){this.setProperty("css",S);var Ra=this.mdPreviewMorph;
Ra&&(Ra.cssDeclaration=S)}}}}}],ca,{pathInPackage:function(){return"./md/morphs.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:11886,end:15564})}(jh.Morph);jh.MarkdownEditor=ah;jh.MarkdownEditor=ah;var nh=window.lively.FreezerRuntime.recorderFor("lively.ide/md/editor-plugin.js");nh.CodeMirrorEnabledEditorPlugin=Qc;nh.mdSnippets=
zg;nh.tokenizeDocument=id;nh.arr=Ed;nh.string=Db;nh.addOrChangeLinkedCSS=Vb;nh.mdCompiler=yf;nh.MarkdownNavigator=zh;nh.MarkdownPreviewMorph=Pg;nh.pt=ad;nh.Color=se;nh.Snippet=kb;nh.commands=[{name:"[markdown] convert to html",exec:function(){var G=jc(regeneratorRuntime.mark(function S(lb){var Ra,Da,Ja,Pa,Za=arguments;return regeneratorRuntime.wrap(function(Zb){for(;;)switch(Zb.prev=Zb.next){case 0:return Ra=1<Za.length&&void 0!==Za[1]?Za[1]:{},Ra=Object.assign({extent:nh.pt(500,800),openInWorld:{title:"markdown rendering"},
markdownPreviewMorphName:null,markdownPreviewMorph:null},Ra),Da=Ra.markdownPreviewMorph||lb._mdPreviewMorph,Ja=lb.world()||Da&&Da.world(),Pa=Ra.markdownPreviewMorphName||'markdown preview for "'.concat(lb.name,'"'),!Da&&Ja&&(Da=lb._mdPreviewMorph=Ja.get(Pa)),Da||(Da=lb._mdPreviewMorph=new nh.MarkdownPreviewMorph({name:Pa,markdownEditor:lb,extent:Ra.extent,clipMode:"auto"})),Ra.openInWorld&&!Da.world()&&Da.openInWindow(Ra.openInWorld).activate(),Da.getWindow()&&$world.addMorph(Da.getWindow()).activate(),
Da.renderMarkdown(),Zb.abrupt("return",Da);case 11:case "end":return Zb.stop()}},S)}));return function(lb){return G.apply(this,arguments)}}()},{name:"[markdown] scroll to cursor position in preview",exec:function(){var G=jc(regeneratorRuntime.mark(function S(lb){var Ra,Da,Ja,Pa,Za,Zb,Vc,Jc,cd;return regeneratorRuntime.wrap(function(sd){for(;;)switch(sd.prev=sd.next){case 0:Ra=lb.editorPlugin,Da=Ra.getNavigator(),Ja=Ra.parsedMarkdown(),Pa=Ja.headings,Za=Da.headingOfLine(Pa,lb.cursorPosition.row),Zb=
Da.rangeOfHeading(lb.textString,Pa,Za),Vc=lb.textInRange(Zb.range),Jc=nh.mdCompiler.compileToHTML(Vc,Object.assign({},Ra.markdownOptions,{markdownWrapperTemplate:null})),cd=lb._mdPreviewMorph,cd.html.indexOf(Jc);case 10:case "end":return sd.stop()}},S)}));return function(lb){return G.apply(this,arguments)}}()},{name:"[markdown] goto heading",exec:function(){var G=jc(regeneratorRuntime.mark(function S(lb){var Ra,Da,Ja,Pa,Za,Zb,Vc,Jc,cd,sd=arguments;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=
Pe.next){case 0:Ra=1<sd.length&&void 0!==sd[1]?sd[1]:{};Da=lb.cursorPosition.row;Ja=lb.editorPlugin.parsedMarkdown();Pa=Ja.headings;if(Pa.length){Pe.next=5;break}return Pe.abrupt("return",!0);case 5:Za=Da>=nh.arr.last(Pa).line?Pa.length:Pa.findIndex(function(gf){return gf.line>Da});-1===Za&&(Za=0);Zb=Pa.map(function(gf){return{isListItem:!0,string:gf.line+":"+nh.string.indent(gf.string," ",gf.depth),value:gf}});if(Vc=Ra.choice){Pe.next=14;break}Pe.next=12;return lb.world().filterableListPrompt("jump to heading",
Zb,{requester:lb,preselect:Za-1,multiSelect:!1});case 12:nh.__inter0__=Pe.sent,Jc=nh.__inter0__.selected,cd=ic(Jc,1),Vc=cd[0];case 14:return Vc&&(lb.saveMark(),lb.cursorPosition={row:Vc.line,column:0},lb.flash(lb.lineRange(Vc.line),{id:"md heading",time:1E3,fill:nh.Color.rgb(200,235,255)})),Pe.abrupt("return",!0);case 16:case "end":return Pe.stop()}},S)}));return function(lb){return G.apply(this,arguments)}}()}];var Fi={html:!0,linkify:!0,typographer:!0,linkedCSS:{"github-markdown":"/lively.ide/md/github-markdown.css"},
markdownWrapperTemplate:'<div class="markdown-body" style="margin: 5px">\n%s\n</div>',addSourceLineMapping:!0,externalizeLinks:{}};nh.defaultMarkdownOptions=Fi;nh.defaultMarkdownOptions=Fi;var vi=function(G){var ca=window.lively.FreezerRuntime.recorderFor("lively.ide/md/editor-plugin.js"),lb=ca.hasOwnProperty("MarkdownEditorPlugin")&&"function"===typeof ca.MarkdownEditorPlugin?ca.MarkdownEditorPlugin:ca.MarkdownEditorPlugin=function(S){if(!S||!S[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return fe(lb,G,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){fe._get(Object.getPrototypeOf(lb.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this);this._markdownOptions=Object.assign({},nh.defaultMarkdownOptions);this._html=""}},{key:"markdownOptions",get:function(){return this._markdownOptions}},{key:"markdownOptions",set:function(S){this._ast=null;return this._markdownOptions=S}},{key:"isMarkdownEditorPlugin",get:function(){return!0}},{key:"shortName",
get:function(){return"md"}},{key:"longName",get:function(){return"markdown"}},{key:"openPairs",get:function(){return{"{":"}","[":"]","(":")",'"':'"',"'":"'","`":"`"}}},{key:"closePairs",get:function(){return{"}":"{","]":"[",")":"(",'"':'"',"'":"'","`":"`"}}},{key:"getNavigator",value:function(){return new nh.MarkdownNavigator}},{key:"getCommands",value:function(S){return S.concat(nh.commands)}},{key:"getKeyBindings",value:function(S){return S.concat([{keys:"Alt-G",command:"[markdown] convert to html"},
{keys:"Alt-J",command:"[markdown] goto heading"}])}},{key:"getMenuItems",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){return regeneratorRuntime.wrap(function(Pa){for(;;)switch(Pa.prev=Pa.next){case 0:return Pa.abrupt("return",[{command:"[markdown] convert to html",alias:"convert to html",target:this.textMorph},{command:"[markdown] goto heading",alias:"goto heading",target:this.textMorph},{isDivider:!0}].concat(Da));case 1:case "end":return Pa.stop()}},Ja,this)}));return function(Da){return S.apply(this,
arguments)}}()},{key:"getSnippets",value:function(){return nh.mdSnippets.map(function(S){S=ic(S,2);return new nh.Snippet({trigger:S[0],expansion:S[1]})})}},{key:"onTextChange",value:function(S){fe._get(Object.getPrototypeOf(lb.prototype),"onTextChange",this).call(this,S);this._html=""}},{key:"highlight",value:function(){var S=this.textMorph,Ra=this.theme,Da=this.mode,Ja=this._tokenizerValidBefore;if(Ra&&S&&S.document&&Da){S.fill=Ra.background;var Pa=S.viewState;Ja=nh.tokenizeDocument(Da,S.document,
Pa.firstVisibleRow,Pa.lastVisibleRow,Ja);Da=Ja.lines;Ja=Ja.tokens;if(Da.length){Pa=Da[0].row;for(var Za=[],Zb=0;Zb<Ja.length;Pa++,Zb++)for(var Vc=Ja[Zb],Jc=0;Jc<Vc.length;Jc+=5){for(var cd=Vc[Jc],sd=Vc[Jc+1],Pe=(Vc[Jc+2]||"").split(" "),gf=void 0,ag=0;ag<Pe.length;ag++){var Af=Pe[ag];Af&&(gf=Object.assign({},gf,Ra[Af]))}gf||(gf=Ra["default"]);gf&&Za.push({start:{row:Pa,column:cd},end:{row:Pa,column:sd}},gf)}S.setTextAttributesWithSortedRanges(Za);this._tokenizerValidBefore={row:nh.arr.last(Da).row+
1,column:0}}if(this.checker)this.checker.onDocumentChange({},S,this)}}},{key:"parsedMarkdown",value:function(){return this._ast||(this._ast=this.parse())}},{key:"renderedMarkdown",value:function(){return this._html||(this._html=this.render())}},{key:"parse",value:function(S){S=S?Object.assign({},this._markdownOptions,{},S):this._markdownOptions;return nh.mdCompiler.parse(this.textMorph,S)}},{key:"render",value:function(S){S=S?Object.assign({},this._markdownOptions,{},S):this._markdownOptions;if(S.linkedCSS)for(var Ra in S.linkedCSS)nh.addOrChangeLinkedCSS(Ra,
S.linkedCSS[Ra]);return nh.mdCompiler.compileToHTML(this.textMorph.textString,S)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MarkdownEditorPlugin"}}],ca,{pathInPackage:function(){return"./md/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3801,end:7921})}(nh.CodeMirrorEnabledEditorPlugin);nh["default"]=
vi;var Bj=window.lively.FreezerRuntime.recorderFor("lively.ide/css/editor-plugin.js");Bj.CodeMirrorEnabledEditorPlugin=Qc;Bj.getMode=ba;var lj=function(G){var ca=window.lively.FreezerRuntime.recorderFor("lively.ide/css/editor-plugin.js"),lb=ca.hasOwnProperty("CSSEditorPlugin")&&"function"===typeof ca.CSSEditorPlugin?ca.CSSEditorPlugin:ca.CSSEditorPlugin=function(S){if(!S||!S[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};
return fe(lb,G,[{key:"shortName",get:function(){return"css"}},{key:"isCSSEditorPlugin",get:function(){return!0}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"CSSEditorPlugin"}}],ca,{pathInPackage:function(){return"./css/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:150,end:306})}(Bj.CodeMirrorEnabledEditorPlugin);
Bj["default"]=lj;var sj=window.lively.FreezerRuntime.recorderFor("lively.ide/css/less/editor-plugin.js");sj.CSSEditorPlugin=lj;sj.getMode=ba;var Qd=function(G){var ca=window.lively.FreezerRuntime.recorderFor("lively.ide/css/less/editor-plugin.js"),lb=ca.hasOwnProperty("LESSEditorPlugin")&&"function"===typeof ca.LESSEditorPlugin?ca.LESSEditorPlugin:ca.LESSEditorPlugin=function(S){if(!S||!S[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return fe(lb,G,[{key:"shortName",get:function(){return"text/x-less"}},{key:"isCSSEditorPlugin",get:function(){return!0}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LESSEditorPlugin"}}],ca,{pathInPackage:function(){return"./css/less/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:136,
end:287})}(sj.CSSEditorPlugin);sj["default"]=Qd;var Ec=window.lively.FreezerRuntime.recorderFor("lively.ide/js/browser/index.js");Ec.Color=se;Ec.Rectangle=pb;Ec.pt=ad;Ec.arr=Ed;Ec.tree=Nb;Ec.num=zb;Ec.date=rb;Ec.Path=Xa;Ec.obj=Ib;Ec.fun=kc;Ec.promise=da;Ec.string=Db;Ec.Morph=eb;Ec.easings=ka;Ec.config=va;Ec.Icon=ub;Ec.ViewModel=Cb;Ec.part=Sd;Ec.TreeData=hb;Ec.editableFiles=ge;Ec.JavaScriptEditorPlugin=Bb;Ec.JSONEditorPlugin=Vg;Ec.JSXEditorPlugin=Sb;Ec.EvalBackendChooser=Pb;Ec.browserCommands=Le;Ec.categorizer=
Fa;Ec.fuzzyParse=M;Ec.testsFromSource=xc;Ec.modules=Pc;Ec.DarkTheme=nd;Ec.DefaultTheme=Id;Ec.objectReplacementChar=Aa;Ec.loadPart=wb;Ec.serverInterfaceFor=Hb;Ec.localInterface=Kd;Ec.lint=vc;Ec.mdCompiler=yf;Ec.MarkdownEditorPlugin=vi;Ec.LESSEditorPlugin=Qd;Ec.ColumnListDefault=Ic;Ec.ColumnListDark=Pd;Ec.joinPath=Na;Ec.LoadingIndicator=zc;Ec.noUpdate=dd;Ec.CSSEditorPlugin=lj;Ec.HTMLEditorPlugin=ob;var If=bd("a",{js:Ec.Color.rgb(46,204,113),json:Ec.Color.rgb(128,139,150),md:Ec.Color.rgb(142,68,173),
less:Ec.Color.rgbHex("1D365E"),cp:Ec.Color.rgbHex("E67E22"),html:Ec.Color.rgbHex("0091EA")});Ec.COLORS=If;Ec.COLORS=If;var Mf=bd("P",function(G){var ca=window.lively.FreezerRuntime.recorderFor("lively.ide/js/browser/index.js"),lb=ca.hasOwnProperty("PackageControls")&&"function"===typeof ca.PackageControls?ca.PackageControls:ca.PackageControls=function(S){if(!S||!S[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return fe(lb,
G,[{key:"focusOn",value:function(S){this._browser=S}},{key:"onMouseUp",value:function(S){fe._get(Object.getPrototypeOf(lb.prototype),"onMouseUp",this).call(this,S);switch(S.targetMorph.name){case "run all pkg tests":this._browser.execCommand("run all tests in package");break;case "add pkg":this._browser.execCommand("add package");break;case "remove pkg":this._browser.execCommand("remove package")}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PackageControls"}}],ca,{pathInPackage:function(){return"./js/browser/index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1971,end:2453})}(Ec.Morph));Ec.PackageControls=Mf;Ec.PackageControls=Mf;var sg=bd("D",function(G){var ca=window.lively.FreezerRuntime.recorderFor("lively.ide/js/browser/index.js"),lb=ca.hasOwnProperty("DirectoryControls")&&"function"===typeof ca.DirectoryControls?ca.DirectoryControls:ca.DirectoryControls=
function(S){if(!S||!S[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return fe(lb,G,[{key:"focusOn",value:function(S,Ra){this._browser=S;this._dir=Ra}},{key:"onMouseUp",value:function(S){fe._get(Object.getPrototypeOf(lb.prototype),"onMouseUp",this).call(this,S);"remove selected"===S.targetMorph.name&&this.removeSelected();"add file"===S.targetMorph.name&&this.addFile(S);"add folder"===S.targetMorph.name&&this.addFolder()}},
{key:"addFolder",value:function(){this._browser.execCommand("create new folder",{dir:this._dir})}},{key:"addFile",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za,Zb;return regeneratorRuntime.wrap(function(Vc){for(;;)switch(Vc.prev=Vc.next){case 0:return Za={paddingTop:"4px",fontSize:14},Vc.next=3,this.world().openWorldMenu(Da,[{title:"Select file type:"},{isDivider:!0},[[].concat(Od(Ec.Icon.textAttribute("js-square",Object.assign({},Za,{fontColor:Ec.COLORS.js}))),["  Javascript"]),
function(){Pa="js"}],[[].concat(Od(Ec.Icon.textAttribute("shapes",Object.assign({},Za,{fontColor:Ec.COLORS.cp}))),["  Component"]),function(){Pa="cp.js"}],[[].concat(Od(Ec.Icon.textAttribute("code",Object.assign({},Za,{fontColor:Ec.COLORS.json}))),[" JSON"]),function(){Pa="json"}],[[].concat(Od(Ec.Icon.textAttribute("markdown",Object.assign({},Za,{fontColor:Ec.COLORS.md}))),[" Markdown"]),function(){Pa="md"}],[[].concat(Od(Ec.Icon.textAttribute("less",Object.assign({},Za,{fontColor:Ec.COLORS.less}))),
[" Less (CSS)"]),function(){Pa="less"}]]);case 3:return Zb=Vc.sent,Vc.next=6,Zb.whenFinished();case 6:if(Pa){Vc.next=8;break}return Vc.abrupt("return");case 8:this._browser.execCommand("create new module",{dir:this._dir,type:Pa});case 9:case "end":return Vc.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"removeSelected",value:function(){this._browser.execCommand("remove selected entity",{dir:this._dir})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DirectoryControls"}}],
ca,{pathInPackage:function(){return"./js/browser/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2461,end:4329})}(Ec.Morph));Ec.DirectoryControls=sg;Ec.DirectoryControls=sg;var Ei=function(G){var ca=window.lively.FreezerRuntime.recorderFor("lively.ide/js/browser/index.js"),lb=ca.hasOwnProperty("PackageTreeData")&&"function"===
typeof ca.PackageTreeData?ca.PackageTreeData:ca.PackageTreeData=function(S){if(!S||!S[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return fe(lb,G,[{key:"columnView",get:function(){return this.root.browser.ui.columnView}},{key:"systemInterface",get:function(){return this.root.browser.systemInterface}},{key:"editorPlugin",get:function(){return this.root.browser.editorPlugin}},{key:"display",value:function(S){var Ra=S.type,
Da=S.pkg,Ja=S.isCollapsed,Pa=S.isDeclaration,Za=S.lastModified,Zb=S.size,Vc=S.name;if("package"===Ra)return this.displayPackage(Da);if(Pa)return this.displayDeclaration(S);Da=Za?Ec.date.format(Za,"yyyy-mm-dd HH:MM:ss"):" ".repeat(19);Zb=Zb?Ec.num.humanReadableByteSize(Zb):"";Pa=this.columnView.isSelected(S);switch(Ra){case "md":var Jc=this.displayMarkdown(Vc,Pa);break;case "js":case "mjs":case "cjs":Jc=this.displayModule(Vc,Pa,S.isLoaded);break;case "json":Jc=this.displayJson(Vc,Pa);break;case "directory":Jc=
this.displayDirectory(Vc,!Ja);break;case "less":Jc=this.displayLess(Vc,Pa);break;case "css":Jc=this.displayCSS(Vc,Pa);break;case "html":Jc=this.displayHTML(Vc,Pa)}return[].concat(Od(Jc),["\t".concat(Zb," ").concat(Da),{paddingTop:"3px",opacity:.5,fontSize:"70%",textStyleClasses:["annotation"]}])}},{key:"displayDeclaration",value:function(S){var Ra=[];switch(S.type){case "class-class-method":Ra=["static ",{}];break;case "class-instance-method":case "function-decl":Ra=Ec.Icon.textAttribute("dice-d6",
{paddingLeft:"3px",paddingRight:"3px"});break;case "class-decl":Ra=Ec.Icon.textAttribute("sitemap");break;case "object-decl":Ra=Ec.Icon.textAttribute("atom",{paddingLeft:"2px",paddingRight:"2px"});break;case "array-decl":Ra=Ec.Icon.textAttribute("list-ol",{paddingLeft:"2px",paddingRight:"2px"});break;case "var-decl":Ra=Ec.Icon.textAttribute("asterisk",{paddingLeft:"2px",paddingRight:"2px"});break;case "class-class-getter":Ra=Ec.Icon.textAttribute("arrow-right",{paddingLeft:"2px",paddingRight:"2px"});
break;case "class-instance-getter":Ra=["get ",null];break;case "class-instance-setter":Ra=["set ",null];break;case "describe":Ra=Ec.Icon.textAttribute("vials");break;case "xdescribe":Ra=Ec.Icon.textAttribute("vials",{opacity:.5});break;case "it":Ra=Ec.Icon.textAttribute("vial");break;case "xit":Ra=Ec.Icon.textAttribute("vial",{opacity:.5});break;case "before":case "beforeEach":case "after":case "afterEach":Ra=Ec.Icon.textAttribute("hammer")}return[].concat(Od(Ra),[" "+Ec.string.truncate(S.name||"[PARSE_ERROR]",
18,"\u2026"),null])}},{key:"displayPackage",value:function(S){return[].concat(Od(Ec.Icon.textAttribute("cube")),[" "+Ec.string.truncate(S.name,26,"\u2026"),{fontStyle:"git"===S.kind?"italic":"normal"},"\t".concat(S.kind),{paddingTop:"3px",opacity:.5,fontSize:"70%",textStyleClasses:["annotation"]}])}},{key:"displayDirectory",value:function(S,Ra){return[].concat(Od(Ec.Icon.textAttribute(Ra?"folder-open":"folder",{textStyleClasses:["far"]})),[" "+S,null])}},{key:"displayModule",value:function(S,Ra,Da){return[].concat(Od(Ec.Icon.textAttribute(S.endsWith(".cp.js")?
"shapes":"js-square",{fontColor:Ra?Ec.Color.white:S.endsWith(".cp.js")?Ec.COLORS.cp:Ec.COLORS.js,opacity:Da?1:.5})),[" "+Ec.string.truncate(S,24,"\u2026"),null])}},{key:"displayJson",value:function(S,Ra){return[].concat(Od(Ec.Icon.textAttribute("cog",{fontColor:Ra?Ec.Color.white:Ec.COLORS.json})),[" "+S,null])}},{key:"displayMarkdown",value:function(S,Ra){return[].concat(Od(Ec.Icon.textAttribute("markdown",{fontColor:Ra?Ec.Color.white:Ec.COLORS.md})),[" "+S,null])}},{key:"displayLess",value:function(S,
Ra){return[].concat(Od(Ec.Icon.textAttribute("less",{fontColor:Ra?Ec.Color.white:Ec.COLORS.less})),[" "+S,null])}},{key:"displayCSS",value:function(S,Ra){return[].concat(Od(Ec.Icon.textAttribute("css3-alt",{fontColor:Ra?Ec.Color.white:Ec.COLORS.less})),[" "+S,null])}},{key:"displayHTML",value:function(S,Ra){return[].concat(Od(Ec.Icon.textAttribute("file-code",{fontColor:Ra?Ec.Color.white:Ec.COLORS.html})),[" "+S+" ",null])}},{key:"listModuleScope",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,
Za;return regeneratorRuntime.wrap(function(Zb){for(;;)switch(Zb.prev=Zb.next){case 0:return Zb.next=2,this.systemInterface.moduleRead(Da);case 2:return Pa=Zb.sent,Za=Ec.fuzzyParse(Pa),Zb.abrupt("return",Ec.categorizer.findDecls(Za).filter(function(Vc){return!Vc.parent&&Vc.name}).map(function(Vc){Vc.isDeclaration=!0;Vc.isCollapsed=!0;return Vc}));case 5:case "end":return Zb.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"listJSONScope",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){return regeneratorRuntime.wrap(function(Pa){for(;;)switch(Pa.prev=
Pa.next){case 0:return Pa.next=2,this.systemInterface.runEval("\n      await listJSONScope('".concat(Da,"');\n    "),{targetModule:"lively.ide/js/browser/tree.js",ackTimeout:3E4});case 2:return Pa.abrupt("return",Pa.sent.value);case 3:case "end":return Pa.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"listMarkdownHeadings",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za;return regeneratorRuntime.wrap(function(Zb){for(;;)switch(Zb.prev=
Zb.next){case 0:return Zb.t0=Ec.mdCompiler,Zb.next=3,this.systemInterface.moduleRead(Da);case 3:return Zb.t1=Zb.sent,Zb.t2={textString:Zb.t1},Pa=Zb.t0.parse.call(Zb.t0,Zb.t2),Za=Pa.headings,Zb.abrupt("return",Za.map(function(Vc){Vc.isDeclaration=!0;Vc.isCollapsed=!0;Vc.name=Vc.string.replace(/^#+\s?/,"");return Vc}));case 8:case "end":return Zb.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"listAllPackages",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja;
return regeneratorRuntime.wrap(function(Pa){for(;;)switch(Pa.prev=Pa.next){case 0:return Pa.next=2,this.systemInterface.getPackages();case 2:return Ja=Pa.sent,Pa.abrupt("return",Ec.arr.sortBy(Ja.map(function(Za){var Zb="git";Za.url.startsWith("local")&&(Zb="local");Za.name.startsWith("lively")&&(Zb="core");Za.kind=Zb;return{url:Za.url+(Za.url.endsWith("/")?"":"/"),isCollapsed:!0,type:"package",name:Za.name,tooltip:Za.name,pkg:Za}}),function(Za){return{core:1,local:2,git:3}[Za.pkg.kind]}));case 4:case "end":return Pa.stop()}},
Da,this)}));return function(){return S.apply(this,arguments)}}()},{key:"listEditableFilesInPackage",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){return regeneratorRuntime.wrap(function(Pa){for(;;)switch(Pa.prev=Pa.next){case 0:return Pa.next=2,this.listEditableFilesInDir(Da);case 2:return Pa.abrupt("return",Pa.sent);case 3:case "end":return Pa.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"getLoadedModuleUrls",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja,
Pa,Za;return regeneratorRuntime.wrap(function(Zb){for(;;)switch(Zb.prev=Zb.next){case 0:return Ja=this.root.subNodes.find(function(Vc){return!Vc.isCollapsed}),Zb.next=3,this.systemInterface.resourcesOfPackage(Ja.url,["assets","objectdb",".git"]);case 3:return Pa=Zb.sent,Zb.next=6,this.systemInterface.getPackage(Ja.url);case 6:return Za={},Pa.forEach(function(Vc){Za[Vc.url]=Vc}),Zb.abrupt("return",Za);case 9:case "end":return Zb.stop()}},Da,this)}));return function(){return S.apply(this,arguments)}}()},
{key:"listEditableFilesInDir",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za;return regeneratorRuntime.wrap(function(Zb){for(;;)switch(Zb.prev=Zb.next){case 0:return Zb.next=2,this.systemInterface.runEval("\n      await listEditableFilesInDir('".concat(Da,"');\n    "),{targetModule:"lively.ide/js/browser/tree.js",ackTimeout:3E4});case 2:return Pa=Zb.sent.value,Zb.next=5,this.getLoadedModuleUrls();case 5:return Za=Zb.sent,Zb.abrupt("return",Pa.map(function(Vc){Object.assign(Vc,
Za[Vc.url]||{});return Vc}));case 7:case "end":return Zb.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"isCollapsed",value:function(S){return S.isCollapsed}},{key:"collapse",value:function(){var S=jc(regeneratorRuntime.mark(function Pa(Da,Ja){return regeneratorRuntime.wrap(function(Za){for(;;)switch(Za.prev=Za.next){case 0:if(Da!==this.root){Za.next=12;break}Ja=!1;Za.next=4;return this.listAllPackages();case 4:Da.subNodes=Za.sent;Za.t0=Da.listControl;if(Za.t0){Za.next=
10;break}Za.next=9;return Dd.import("./ui.cp-499efc12.js").then(function(Zb){return Ec.part(Zb.BrowserPackageControls)});case 9:Za.t0=Za.sent;case 10:Da.listControl=Za.t0,Da.listControl.focusOn(this.root.browser);case 12:Da.isCollapsed=Ja;Da.isDirty=!0;if(Ja){Za.next=56;break}if("package"!==Da.type){Za.next=26;break}Za.next=18;return this.listEditableFilesInPackage(Da.url);case 18:Da.subNodes=Za.sent;Za.t1=Da.listControl;if(Za.t1){Za.next=24;break}Za.next=23;return Dd.import("./ui.cp-499efc12.js").then(function(Zb){return Ec.part(Zb.BrowserDirectoryControls)});
case 23:Za.t1=Za.sent;case 24:Da.listControl=Za.t1,Da.listControl.focusOn(this.root.browser,Da.url);case 26:Da.children&&(Da.children.forEach(function(Zb){Zb.isDeclaration=!0;Zb.isCollapsed=!0;Zb.parent=Da}),Da.subNodes=Da.children);if("directory"!==Da.type){Za.next=38;break}Za.next=30;return this.listEditableFilesInDir(Da.url);case 30:Da.subNodes=Za.sent;Za.t2=Da.listControl;if(Za.t2){Za.next=36;break}Za.next=35;return Dd.import("./ui.cp-499efc12.js").then(function(Zb){return Ec.part(Zb.BrowserDirectoryControls)});
case 35:Za.t2=Za.sent;case 36:Da.listControl=Za.t2,Da.listControl.focusOn(this.root.browser,Da.url);case 38:if("js"!==Da.type){Za.next=42;break}Za.next=41;return this.listModuleScope(Da.url);case 41:Da.subNodes=Za.sent;case 42:if("md"!==Da.type){Za.next=52;break}Za.prev=43;Za.next=46;return this.listMarkdownHeadings(Da.url);case 46:Da.subNodes=Za.sent;Za.next=52;break;case 49:Za.prev=49,Za.t3=Za["catch"](43),Da.subNodes=[];case 52:if("json"!==Da.type){Za.next=56;break}Za.next=55;return this.listJSONScope(Da.url);
case 55:Da.subNodes=Za.sent;case 56:case "end":return Za.stop()}},Pa,this,[[43,49]])}));return function(Da,Ja){return S.apply(this,arguments)}}()},{key:"getChildren",value:function(S){var Ra=this,Da=S.subNodes||[];Da.forEach(function(Ja){return Ra.parentMap.set(Ja,S)});return Da}},{key:"isLeaf",value:function(S){var Ra=S.children;return S.isDeclaration?!Ra:!["package","directory","js","json","md"].includes(S.type)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PackageTreeData"}}],
ca,{pathInPackage:function(){return"./js/browser/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4337,end:14596})}(Ec.TreeData);Ec.PackageTreeData=Ei;Ec.PackageTreeData=Ei;var oh=function(G){var ca=window.lively.FreezerRuntime.recorderFor("lively.ide/js/browser/index.js"),lb=ca.hasOwnProperty("CodeDefTreeData")&&"function"===
typeof ca.CodeDefTreeData?ca.CodeDefTreeData:ca.CodeDefTreeData=function(S){if(!S||!S[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return fe(lb,G,[{key:Symbol["for"]("lively-instance-initialize"),value:function(S){S.forEach(function(Ra){return Ra.children&&(Ra.isCollapsed=!0)});fe._get(Object.getPrototypeOf(lb.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,{name:"root",isCollapsed:!1,children:S.filter(function(Ra){return!Ra.parent})});
this.defs=S}},{key:"display",value:function(S){var Ra=String(S.name);"class-instance-getter"===S.type&&(Ra="get "+Ra);"class-instance-setter"===S.type&&(Ra="set "+Ra);return Ra}},{key:"isLeaf",value:function(S){return!S.children}},{key:"isCollapsed",value:function(S){return S.isCollapsed}},{key:"collapse",value:function(S,Ra){S.isCollapsed=Ra}},{key:"getChildren",value:function(S){return this.isLeaf(S)?null:this.isCollapsed(S)?[]:S.children}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"CodeDefTreeData"}}],
ca,{pathInPackage:function(){return"./js/browser/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:14604,end:15426})}(Ec.TreeData);Ec.CodeDefTreeData=oh;Ec.CodeDefTreeData=oh;var Xe=bd("B",function(G){var ca=window.lively.FreezerRuntime.recorderFor("lively.ide/js/browser/index.js"),lb=ca.hasOwnProperty("BrowserModel")&&"function"===
typeof ca.BrowserModel?ca.BrowserModel:ca.BrowserModel=function(S){if(!S||!S[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return fe(lb,G,[{key:"serializeBrowser",value:function(S){S=this.browserSpec().map(function(Ra){return JSON.stringify(Ra,function(Da,Ja){return"systemInterface"===Da?"__LIVELY-INTERFACE-PLACEHOLDER__":"scroll"===Da?"__LIVELY-SCROLL-PLACEHOLDER__":"module"===Da?Ec.obj.select(Ja,["pathInModule","packageName",
"name"]):Ja}).replace(JSON.stringify("__LIVELY-SCROLL-PLACEHOLDER__"),Ra.content.spec.scroll.toString()).replace(JSON.stringify("__LIVELY-INTERFACE-PLACEHOLDER__"),"localInterface")});S="["+S.join(",")+"]";return{__expr__:"let b = part(SystemBrowser); b.browserFromSpec(".concat(S,"); b;"),bindings:{"lively.morphic":["part"],"lively.ide/js/browser/ui.cp.js":["SystemBrowser"],"lively-system-interface":["localInterface"],"lively.graphics":["pt"]}}}},{key:"ensureColumnViewData",value:function(){var S=
jc(regeneratorRuntime.mark(function Da(){var Ja;return regeneratorRuntime.wrap(function(Pa){for(;;)switch(Pa.prev=Pa.next){case 0:Ja=this.ui.columnView;if(Ja.treeData){Pa.next=4;break}Pa.next=4;return Ja.setTreeData(new Ec.PackageTreeData({browser:this}));case 4:case "end":return Pa.stop()}},Da,this)}));return function(){return S.apply(this,arguments)}}()},{key:"viewDidLoad",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja,Pa;return regeneratorRuntime.wrap(function(Za){for(;;)switch(Za.prev=
Za.next){case 0:this.state={packageUpdateInProgress:null,moduleUpdateInProgress:null,selectedPackage:null,sourceHash:Ec.string.hashCode(""),moduleChangeWarning:null,isSaving:!1,history:{left:[],right:[],navigationInProgress:null}};this.refreshHistoryButtons();this.relayout();this.ui.metaInfoText.reset();Ja=this.ui.sourceEditor;Ja.plugins.length||Ja.addPlugin(new Ec.JavaScriptEditorPlugin(Ec.config.codeEditor.defaultTheme));if(!this._serializedState){Za.next=11;break}Pa=this._serializedState;delete this._serializedState;
Za.next=11;return this.browse(Pa);case 11:this.ui.evalBackendButton.target=this.view,(new Ec.EvalBackendChooser).buildEvalBackendDropdownFor(this,this.ui.evalBackendButton),this.ui.tabs.addTab("Browser Tab",null),this.ui.verticalResizer.movedVerticallyBy(0);case 15:case "end":return Za.stop()}},Da,this)}));return function(){return S.apply(this,arguments)}}()},{key:"relayout",value:function(){var S=this.ui,Ra=S.columnView,Da=S.sourceEditor,Ja=S.headerButtons,Pa=S.verticalResizer,Za=S.smiley;S=S.tabs;
var Zb=Math.ceil(Ja.height),Vc=S.visible?S.height:0;Ja.visible=400<this.view.width;Ja.visible?(Ra.top=S.visible?Zb+S.height:Zb,S.visible&&(S.top=Zb),Ra.height=Pa.top-Zb-Vc):(Ra.top=S.visible?S.height:0,S.visible&&(S.top=0),Ra.height=Pa.top-Vc);Za.center=Da.center}},{key:"isBrowser",get:function(){return!0}},{key:"selectedModule",get:function(){var S=this;return this.ui.columnView.getExpandedPath().find(function(Ra){return S.isModule(Ra)})}},{key:"selectedModule",set:function(S){var Ra=this.ui.columnView;
S?this.selectModuleNamed("string"===typeof S?S:S.url||S.id):Ra.setExpandedPath()}},{key:"selectedPackage",get:function(){return this.state&&this.state.selectedPackage}},{key:"selectedPackage",set:function(S){this.selectPackageNamed(S?"string"===typeof S?S:S.url||S.address:null)}},{key:"selectedCodeEntity",get:function(){var S=this.ui.columnView.getExpandedPath().filter(function(Ra){return Ra.isDeclaration});return 1<S.length?S:Ec.arr.last(S)}},{key:"selectedDirectory",get:function(){return this.ui.columnView.getExpandedPath().reverse().find(function(S){return["package",
"directory"].includes(S.type)})}},{key:"isModule",value:function(S){return S&&Ec.editableFiles.includes(S.type)}},{key:"updateSource",value:function(S,Ra){var Da=this.ui.sourceEditor;Da.textString!==S&&(Da.textString=S);S=S.split(Ec.objectReplacementChar).join("");this.state.sourceHash=Ec.string.hashCode(S);this.indicateNoUnsavedChanges();this.state.moduleChangeWarning=null;Ra&&(Da.cursorPosition=Ra)}},{key:"indicateUnsavedChanges",value:function(){this.prohibitKeyboardNavigation();Object.assign(this.ui.sourceEditor,
{padding:Ec.Rectangle.inset(2,58,2,0),border:{width:2,color:Ec.Color.red}})}},{key:"indicateNoUnsavedChanges",value:function(){this.allowKeyboardNavigation();Object.assign(this.ui.sourceEditor,{padding:Ec.Rectangle.inset(4,60,4,0),border:{width:0,color:Ec.Color.transparent}})}},{key:"hasUnsavedChanges",value:function(S){var Ra=this.ui.sourceEditor.textString;Ra=Ra.split(Ec.objectReplacementChar).join("");return S&&Ra!==S?!0:this.state.sourceHash!==Ec.string.hashCode(Ra)}},{key:"updateUnsavedChangeIndicatorDebounced",
value:function(){var S=this;Ec.fun.debounceNamed(this.id+"-updateUnsavedChangeIndicatorDebounced",20,function(){return S.updateUnsavedChangeIndicator()})()}},{key:"updateUnsavedChangeIndicator",value:function(){this[this.hasUnsavedChanges()?"indicateUnsavedChanges":"indicateNoUnsavedChanges"]()}},{key:"prohibitKeyboardNavigation",value:function(){var S=this.ui.columnView;S.treeData.listNavigationProhibited=!0;S.lists.forEach(function(Ra){return Ra.arrowNavigationProhibited=!0})}},{key:"allowKeyboardNavigation",
value:function(){var S=this.ui.columnView;S.treeData.listNavigationProhibited=!1;S.lists.forEach(function(Ra){return Ra.arrowNavigationProhibited=!1})}},{key:"setEvalBackend",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa;return regeneratorRuntime.wrap(function(Za){for(;;)switch(Za.prev=Za.next){case 0:Da=Da||"local";Pa=this.systemInterface;if(Da===Pa.name){Za.next=7;break}this.editorPlugin.setSystemInterfaceNamed(Da);Za.next=6;return this.toggleWindowStyle();case 6:this.browse(this.browseSpec());
case 7:case "end":return Za.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"toggleWindowStyle",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja,Pa,Za,Zb,Vc,Jc,cd,sd=arguments;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:Ja=0<sd.length&&void 0!==sd[0]?sd[0]:!0;Pa=1E3;Za=Ec.easings.outExpo;Vc=this.ui;Jc=Vc.columnView;cd=Vc.sourceEditor;Jc.reset();Pe.t0=this.editorPlugin.runEval;if(!Pe.t0){Pe.next=10;break}Pe.next=
9;return this.editorPlugin.runEval("System.get('@system-env').node");case 9:Pe.t0=Pe.sent.value;case 10:if(!Pe.t0){Pe.next=15;break}Zb=Ec.DarkTheme.instance;Jc.listMaster=Ec.ColumnListDark;Pe.next=17;break;case 15:Zb=Ec.DefaultTheme.instance,Jc.listMaster=Ec.ColumnListDefault;case 17:this.editorPlugin.theme=Zb,Ja&&(cd.animate({fill:Zb.background,duration:Pa,easing:Za}),Jc.animate({fill:Zb.background,duration:Pa,easing:Za})),this.editorPlugin.highlight(),this.relayout();case 21:case "end":return Pe.stop()}},
Da,this)}));return function(){return S.apply(this,arguments)}}()},{key:"packageResources",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa;return regeneratorRuntime.wrap(function(Za){for(;;)switch(Za.prev=Za.next){case 0:return Pa=(Ec.Path("lively.ide.exclude").get(Da)||[]).map(function(Zb){return Zb.includes("*")?new RegExp(Zb.replace(/\*/g,".*")):Zb}),Pa.push(".git","node_modules",".module_cache","assets"),Za.prev=2,Za.next=5,this.systemInterface.resourcesOfPackage(Da.address,
Pa);case 5:return Za.t0=function(Zb){var Vc=Zb.url;return(Vc.endsWith(".js")||Vc.endsWith(".json")||Vc.endsWith(".jsx"))&&!Pa.some(function(Jc){return Jc instanceof RegExp?Jc.test(Vc):Vc.includes(Jc)})},Za.t1=function(Zb){Zb.name=Zb.url;return Zb},Za.abrupt("return",Za.sent.filter(Za.t0).map(Za.t1));case 10:return Za.prev=10,Za.t2=Za["catch"](2),this.view.showError(Za.t2),Za.abrupt("return",[]);case 14:case "end":return Za.stop()}},Ja,this,[[2,10]])}));return function(Da){return S.apply(this,arguments)}}()},
{key:"browseSpec",value:function(){var S=this.selectedCodeEntity?Array.isArray(this.selectedCodeEntity)?Ec.arr.last(this.selectedCodeEntity).name:this.selectedCodeEntity.name:null;return{packageName:this.selectedPackage?this.selectedPackage.name:"lively.morphic",textPosition:this.ui.sourceEditor.selection.start,scroll:this.ui.sourceEditor.scroll,moduleName:this.selectedModule?this.selectedModule.nameInPackage:null,codeEntity:S,systemInterface:this.systemInterface}}},{key:"browserSpec",value:function(){this.ui.tabs.selectedTab.content=
{spec:this.browseSpec(),history:this.state.history};return this.ui.tabs.tabs.map(function(S){return S.viewModel.spec})}},{key:"browserFromSpec",value:function(S){var Ra=this;Ec.noUpdate(function(){Ra.ui.tabs.loadFromSpec(S)});var Da=this.ui.tabs.selectedTab;this.state.history=Da.content.history;this.refreshHistoryButtons();this.browse(Da.content.spec);return this.view}},{key:"browse",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja,Pa,Za,Zb,Vc,Jc,cd,sd,Pe,gf,ag,Af,ph,Ug,$i,rh=
arguments;return regeneratorRuntime.wrap(function(Ah){for(;;)switch(Ah.prev=Ah.next){case 0:return Ja=0<rh.length&&void 0!==rh[0]?rh[0]:{},Pa=1<rh.length?rh[1]:void 0,Za=Ja.packageName,Zb=Ja.moduleName,Vc=Ja.textPosition,Jc=Ja.codeEntity,cd=Ja.scroll,sd=Ja.systemInterface,Pe=this.ui.sourceEditor,Ah.next=6,this.ensureColumnViewData();case 6:if(!Pa&&!sd){Ah.next=16;break}Ah.prev=7;this.systemInterface=Pa||sd;if(!this.ui.evalBackendList){Ah.next=12;break}Ah.next=12;return this.ui.evalBackendList.updateFromTarget();
case 12:Ah.next=16;break;case 14:Ah.prev=14,Ah.t0=Ah["catch"](7);case 16:return Ah.next=18,this.toggleWindowStyle(!1);case 18:if(!Za){Ah.next=26;break}Ah.next=21;return this.selectPackageNamed(Za);case 21:if(!Zb){Ah.next=24;break}Ah.next=24;return this.selectModuleNamed(Zb,!1);case 24:Ah.next=53;break;case 26:if(!Zb){Ah.next=53;break}gf=this.systemInterface;Ah.next=30;return gf.getModule(Zb);case 30:ag=Ah.sent;if(!ag){Ah.next=38;break}Zb=ag.id;Ah.next=35;return gf.getPackageForModule(ag.id);case 35:Af=
Ah.sent;Ah.next=47;break;case 38:return ph=Zb.split("/"),Ug=ph.shift(),$i=ph.join("/"),Ah.next=43,gf.getPackage(Ug);case 43:return Af=Ah.sent,Ah.next=46,gf.getModule("".concat(Af.url,"/").concat($i));case 46:ag=Ah.sent;case 47:if(!ag||!Af){Ah.next=53;break}Zb=ag.id;Ah.next=51;return this.selectPackageNamed(Af.url);case 51:return Ah.next=53,this.selectModuleNamed(Zb,!1);case 53:if(!Jc){Ah.next=56;break}Ah.next=56;return this.selectCodeEntityInColumnView(Jc,!1);case 56:if(!Vc){Ah.next=62;break}if(!this.world()){Ah.next=
60;break}Ah.next=60;return Ec.promise.delay(10);case 60:Pe.cursorPosition=Vc,Pe.centerRow(Vc.row);case 62:if(!cd){Ah.next=67;break}if(!this.world()){Ah.next=66;break}Ah.next=66;return Ec.promise.delay(10);case 66:Pe.scroll=cd;case 67:if(!this.selectedModule){Ah.next=70;break}Ah.next=70;return this.prepareCodeEditorForModule(this.selectedModule);case 70:return Ah.abrupt("return",this.view);case 71:case "end":return Ah.stop()}},Da,this,[[7,14]])}));return function(){return S.apply(this,arguments)}}()},
{key:"whenPackageUpdated",value:function(){return this.state.packageUpdateInProgress||Promise.resolve()}},{key:"whenModuleUpdated",value:function(){this.reactivateEditor();return this.state.moduleUpdateInProgress||Promise.resolve()}},{key:"selectPackageNamed",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za,Zb,Vc,Jc,cd=arguments;return regeneratorRuntime.wrap(function(sd){for(;;)switch(sd.prev=sd.next){case 0:return Pa=1<cd.length&&void 0!==cd[1]?cd[1]:!1,Da=Da||"lively.morphic",
sd.next=4,this.systemInterface.getPackage(Da);case 4:return Za=sd.sent,Zb=this.ui.columnView,Vc=Zb.treeData,sd.next=9,Zb.setExpandedPath(function(Pe){return Pe===Vc.root||Pe.ur===Za.address+"/"},Vc.root,!1);case 9:if(!Pa){sd.next=14;break}Jc=Zb.treeData.root.subNodes.find(function(Pe){return Da===Pe.name});sd.next=13;return Zb.selectNode(Jc);case 13:Zb.submorphs.forEach(function(Pe){Pe.scrollSelectionIntoView()});case 14:return sd.next=16,this.onPackageSelected(Za);case 16:return sd.next=18,this.whenPackageUpdated();
case 18:return sd.abrupt("return",Za);case 19:case "end":return sd.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"onPackageSelected",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za;return regeneratorRuntime.wrap(function(Zb){for(;;)switch(Zb.prev=Zb.next){case 0:this.switchMode("js");this.state.selectedPackage=Da;this.state.packageUpdateInProgress||(Pa=Ec.promise.deferred(),this.state.packageUpdateInProgress=Pa.promise);try{Za=this.view.getWindow(),
Da?(Za.title="browser - "+Da.name,this.ui.tabs.selectedTab.caption.includes(Da.name)||(this.ui.tabs.selectedTab.caption=Da.name)):(this.updateSource(""),Za.title="browser")}finally{Pa&&(this.state.packageUpdateInProgress=null,Pa.resolve(Da))}case 4:case "end":return Zb.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"indicateFrozenModuleIfNeeded",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja,Pa,Za,Zb;return regeneratorRuntime.wrap(function(Vc){for(;;)switch(Vc.prev=
Vc.next){case 0:return Ja=this.ui.metaInfoText,Vc.next=3,this.systemInterface.getModule(this.selectedModule.url);case 3:if(Pa=Vc.sent){Vc.next=6;break}return Vc.abrupt("return");case 6:Za=Pa["package"]().name,Zb=Pa.pathInPackage(),Pa._frozenModule&&Ja.showFrozen('The module "'.concat(Za,"/").concat(Zb,'" you are viewing is frozen. You are not able to make changes to this module unless you reload the world with dynamic load enabled for the package "').concat(Za,'".'));case 9:case "end":return Vc.stop()}},
Da,this)}));return function(){return S.apply(this,arguments)}}()},{key:"getDisplayedModuleNodes",value:function(){return this.ui.columnView.submorphs.filter(function(S){return["directory","package"].includes(S._managedNode.type)}).map(function(S){return S.items.map(function(Ra){return Ra.value})}).flat()}},{key:"selectModuleNamed",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za,Zb,Vc,Jc,cd,sd,Pe=arguments;return regeneratorRuntime.wrap(function(gf){for(;;)switch(gf.prev=
gf.next){case 0:Pa=1<Pe.length&&void 0!==Pe[1]?Pe[1]:!0;Za=this.ui.columnView;Zb=this.getDisplayedModuleNodes().find(function(ag){var Af=ag.nameInPackage;return Da===ag.url||Da===Af});if(!Zb){gf.next=7;break}gf.next=6;return Za.selectNode(Zb,Pa);case 6:Za.submorphs.forEach(function(ag){ag.scrollSelectionIntoView()});case 7:if(Zb){gf.next=33;break}Vc=this.systemInterface;Jc=this.state.selectedPackage;gf.next=12;return Vc.doesModuleExist(Da);case 12:if(!gf.sent){gf.next=16;break}cd=Jc&&!Da.startsWith(Jc.url)?
Jc.url+"/"+Da:Da;gf.next=23;break;case 16:gf.t0=Jc;if(!gf.t0){gf.next=21;break}gf.next=20;return Vc.doesModuleExist(Jc.url+"/"+Da,!0);case 20:gf.t0=gf.sent;case 21:if(!gf.t0){gf.next=23;break}cd=Jc.url+"/"+Da;case 23:if(!cd){gf.next=33;break}sd=Za.treeData;gf.next=27;return Za.setExpandedPath(function(ag){return ag===sd.root||cd.startsWith(ag.url)},sd.root,!1);case 27:return gf.t1=this,gf.next=30,this.systemInterface.moduleRead(cd);case 30:gf.t2=gf.sent,gf.t3={row:0,column:0},gf.t1.updateSource.call(gf.t1,
gf.t2,gf.t3);case 33:return this.ui.sourceEditor.undoManager.reset(),gf.next=36,this.whenModuleUpdated();case 36:return gf.abrupt("return",Zb);case 37:case "end":return gf.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"searchForModuleAndSelect",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za,Zb,Vc,Jc;return regeneratorRuntime.wrap(function(cd){for(;;)switch(cd.prev=cd.next){case 0:Pa=this.selectedModule;if(!Pa||Pa.url!==Da){cd.next=3;
break}return cd.abrupt("return",Pa);case 3:return Za=this.systemInterface,cd.next=6,Za.getModules();case 6:Zb=cd.sent;Vc=Zb.find(function(sd){return sd.name===Da});cd.t0=Vc;if(!cd.t0){cd.next=13;break}cd.next=12;return Za.getPackageForModule(Vc.name);case 12:cd.t0=cd.sent;case 13:if(Jc=cd.t0){cd.next=16;break}return cd.abrupt("return",null);case 16:return cd.next=18,this.selectPackageNamed(Jc.address);case 18:return cd.next=20,this.selectModuleNamed(Vc.name);case 20:return cd.next=22,this.prepareCodeEditorForModule(this.selectedModule);
case 22:return cd.abrupt("return",this.selectedModule);case 23:case "end":return cd.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"warnForUnsavedChanges",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){return regeneratorRuntime.wrap(function(Ja){for(;;)switch(Ja.prev=Ja.next){case 0:return Ja.next=2,this.world().confirm(["Discard Changes\n",{},"The unsaved changes to this module are going to be discarded.\nAre you sure you want to proceed?",{fontSize:16,
fontWeight:"normal"}],{requester:this.view,width:350});case 2:return Ja.abrupt("return",Ja.sent);case 3:case "end":return Ja.stop()}},Da,this)}));return function(){return S.apply(this,arguments)}}()},{key:"loadES6Mocha",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja,Pa;return regeneratorRuntime.wrap(function(Za){for(;;)switch(Za.prev=Za.next){case 0:return Za.next=2,this.systemInterface.runEval("\n      const g = typeof global !== 'undefined' ? global : window;\n     !!g.Mocha && !!g.chai\n    ",
{targetModule:this.selectedModule.url});case 2:Ja=Za.sent;Pa=Ja.value;if(!Pa){Za.next=6;break}return Za.abrupt("return");case 6:return Za.next=8,this.systemInterface.importPackage("mocha-es6");case 8:return Za.next=10,this.systemInterface.runEval("\n      const g = typeof global !== 'undefined' ? global : window;\n      const promise = await System.import('lively.lang/promise.js')\n      promise.waitFor(30 * 1000, () =>  !!g.Mocha && !!g.chai);\n    ",{targetModule:this.selectedModule.url});case 10:case "end":return Za.stop()}},
Da,this)}));return function(){return S.apply(this,arguments)}}()},{key:"onListSelectionChange",value:function(S){S=Ec.arr.last(S);this.isModule(S)&&(this.ui.sourceEditor.opacity=1,this.ui.sourceEditor.readOnly=!1,this.onModuleSelected(S));if("package"===S.type)this.onPackageSelected(S.pkg);if(S.isDeclaration)this.onCodeEntitySelected(S);["directory","package"].includes(S.type)&&this.deactivateEditor()}},{key:"deactivateEditor",value:function(){var S=this.ui,Ra=S.sourceEditor;S=S.metaInfoText;Ra.opacity=
.7;Ra.readOnly=!0;this.updateSource("");S.showInactive()}},{key:"reactivateEditor",value:function(){var S=this.ui,Ra=S.sourceEditor;S=S.metaInfoText;Ra.opacity=1;Ra.readOnly=!1;S.showDefault()}},{key:"onModuleSelected",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za,Zb,Vc,Jc,cd,sd,Pe,gf,ag;return regeneratorRuntime.wrap(function(Af){for(;;)switch(Af.prev=Af.next){case 0:Pa=this.selectedPackage;Za=this.view.getWindow();if(!this._return){Af.next=4;break}return Af.abrupt("return");
case 4:if(!this.selectedModule||!this.hasUnsavedChanges()){Af.next=16;break}Af.next=7;return this.warnForUnsavedChanges();case 7:if(Zb=Af.sent){Af.next=16;break}this._return=!0;Af.next=12;return this.state.history.navigationInProgress;case 12:return Af.next=14,this.selectModuleNamed(Ec.arr.last(this.state.history.left).module.url);case 14:return this._return=!1,Af.abrupt("return");case 16:this.state.moduleChangeWarning=null;if(Da){Af.next=24;break}this.updateSource("");Za&&(Za.title="browser - "+
(Pa&&Pa.name||""));this.ui.tabs.selectedTab.caption.includes(Pa.name)||(this.ui.tabs.selectedTab.caption=Pa.name);this.updateCodeEntities(null);this.ui.metaInfoText.textString="";return Af.abrupt("return");case 24:if(Pa){Af.next=27;break}this.showError(Error("Browser>>onModuleSelected called but no package selected!"+Da));return Af.abrupt("return");case 27:return this.state.moduleUpdateInProgress||(Vc=Ec.promise.deferred(),this.state.moduleUpdateInProgress=Vc.promise),Af.prev=28,Jc=this.systemInterface,
cd=this.view.getWindow(),Af.t0=this,Af.next=34,Jc.moduleRead(Da.url);case 34:Af.t1=Af.sent;if(!Af.t0.isTestModule.call(Af.t0,Af.t1)){Af.next=38;break}Af.next=38;return this.loadES6Mocha();case 38:if(Da.isLoaded||!Da.name.endsWith(".js")){Af.next=63;break}Af.prev=39;Af.next=42;return Jc.importModule(Da.url);case 42:Af.next=47;break;case 44:Af.prev=44,Af.t2=Af["catch"](39),sd=Af.t2;case 47:return sd&&this.view.showError(sd),Af.next=50,Jc.getPackage(Pa.address);case 50:Pe=Af.sent;gf=Pe.modules.map(function(ph){return ph.name}).includes(Da.url);
if(!gf){Af.next=63;break}Object.assign(Pa,Pe);Da.isLoaded=!0;Af.next=57;return this.updateModuleList();case 57:return this.state.moduleUpdateInProgress=null,Af.next=60,this.selectModuleNamed(Da.url);case 60:return Da=this.selectedModule,Vc&&(this.state.moduleUpdateInProgress=Vc.promise),Af.abrupt("return");case 63:return cd&&(cd.title="browser - [".concat(Pa.name,"] ").concat(Da.nameInPackage)),this.ui.tabs.selectedTab.caption="[".concat(Pa.name,"] ").concat(Da.nameInPackage),Af.next=67,Jc.moduleRead(Da.url);
case 67:return ag=Af.sent,this.updateSource(ag,{row:0,column:0}),this.ui.sourceEditor.scroll=Ec.pt(0,0),this.ui.sourceEditor.undoManager.reset(),Af.next=73,this.prepareCodeEditorForModule(Da);case 73:this.historyRecord(),this.ui.metaInfoText.showDefault(),Da.isLoaded=!0,this.updateModuleList();case 77:return Af.prev=77,this.indicateFrozenModuleIfNeeded(),Vc&&(this.state.moduleUpdateInProgress=null,Vc.resolve(Da)),Af.finish(77);case 81:case "end":return Af.stop()}},Ja,this,[[28,,77,81],[39,44]])}));
return function(Da){return S.apply(this,arguments)}}()},{key:"closeStatusMessage",value:function(){this.ui.metaInfoText.showDefault()}},{key:"openStatusMessage",value:function(){this.ui.metaInfoText.showInfoInWorkspace()}},{key:"switchMode",value:function(S){var Ra=Ec.JavaScriptEditorPlugin;switch(S){case "json":Ra=Ec.JSONEditorPlugin;break;case "jsx":Ra=Ec.JSXEditorPlugin;break;case "md":Ra=Ec.MarkdownEditorPlugin;break;case "less":Ra=Ec.LESSEditorPlugin;break;case "css":Ra=Ec.CSSEditorPlugin;break;
case "html":Ra=Ec.HTMLEditorPlugin}this.editorPlugin.constructor!==Ra&&(S=this.editorPlugin.evalEnvironment,this.ui.sourceEditor.removePlugin(this.editorPlugin),this.ui.sourceEditor.addPlugin(new Ra(Ec.config.codeEditor.defaultTheme)),this.editorPlugin.evalEnvironment||(this.editorPlugin.evalEnvironment={systemInterface:Ec.localInterface}),Object.assign(this.editorPlugin.evalEnvironment,S),this.editorPlugin.highlight())}},{key:"prepareCodeEditorForModule",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,
Za,Zb,Vc,Jc,cd;return regeneratorRuntime.wrap(function(sd){for(;;)switch(sd.prev=sd.next){case 0:return Pa=this.systemInterface,sd.next=3,Pa.moduleFormat(Da.url);case 3:sd.t0=sd.sent;if(sd.t0){sd.next=6;break}sd.t0="esm";case 6:return Za=sd.t0,Zb=this.selectedPackage,Vc=Da.name.match(/\.([^\.]+)$/)||[],Jc=ic(Vc,2),cd=Jc[1],this.switchMode(cd),Object.assign(this.editorPlugin.evalEnvironment,{targetModule:Da.url,context:this.ui.sourceEditor,format:Za}),this.editorPlugin._tokenizerValidBefore={row:0,
column:0},this.editorPlugin.requestHighlight(!0),sd.next=15,this.updateTestUI(Da);case 15:this.ui.metaInfoText.setPath(["[".concat(Zb.name,"]"),{nativeCursor:"pointer",textDecoration:"underline",doit:{code:'$world.execCommand("open file browser", {location: "'.concat(Zb.url,'"})')}}," ",{},Da.nameInPackage||"",{}]);case 16:case "end":return sd.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"updateFocusedCodeEntityDebounced",value:function(){var S=this;Ec.fun.debounceNamed(this.id+
"updateFocusedCodeEntityDebounced",20,function(){return S.updateFocusedCodeEntity()})()}},{key:"updateFocusedCodeEntity",value:function(){var S=this.ui,Ra=S.sourceEditor;S=S.metaInfoText;var Da=Ra.positionToIndex(Ra.cursorPosition),Ja=Ec.arr.last(this.renderedCodeEntities().filter(function(Zb){if(Zb.node){Zb=Zb.node;var Vc=Zb.end;return Zb.start<Da&&Da<Vc}}))||{},Pa=Ja.parent;Ja=Ja.name;for(var Za=Pa?[Pa.name,""]:[];Pa&&(Pa=Pa.parent);)Za.unshift(Pa.name);Ja&&600<this.view.width&&S.setPath([].concat(Od(S.getPath().slice(0,
6)),[" - ".concat(Za.join(">>")).concat(Ja,":").concat(Ra.cursorPosition.row),{fontSize:12,paddingTop:"2px"}]))}},{key:"onCodeEntitySelected",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za,Zb,Vc;return regeneratorRuntime.wrap(function(Jc){for(;;)switch(Jc.prev=Jc.next){case 0:if(Da){Jc.next=2;break}return Jc.abrupt("return");case 2:Pa=this.ui.sourceEditor;if("js"===this.selectedModule.type||"json"===this.selectedModule.type)Za=this.selectedModule.type,Zb=Pa.indexToPosition("js"===
Za?Da.node.start:Da.start),Vc=Pa.indexToPosition("js"===Za?Da.node.end:Da.end),Pa.cursorPosition=Zb,Pa.flash({start:Zb,end:Vc},{id:"codeentity",time:1E3,fill:Ec.Color.rgb(200,235,255)}),Pa.centerRange({start:Zb,end:Vc}),Pa.scrollDown(-60);"md"===this.selectedModule.type&&Pa.execCommand("[markdown] goto heading",{choice:Da});case 5:case "end":return Jc.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"findCodeEntity",value:function(S){var Ra=S.name,Da=S.type,Ja=(S=
S.parent)?this.findCodeEntity(S):null;return(S=this.renderedCodeEntities())?S.find(function(Pa){return Ja&&Pa.parent!==Ja||Pa.name!==Ra?!1:!Da||Pa.type===Da||"method"===Da&&Pa.type.includes("method")?!0:!1}):null}},{key:"renderedCodeEntities",value:function(){var S=this.ui.columnView,Ra=this.selectedModule,Da=S&&S.treeData;return Da&&Ra?Ec.tree.filter(Ra,function(Ja){return Ja.isDeclaration},function(Ja){!Ja.subNodes&&Ja.children&&(Ja.subNodes=Ja.children,Ja.subNodes.forEach(function(Pa){return Pa.isDeclaration=
!0}));return Da.getChildren(Ja)}):[]}},{key:"selectCodeEntityInColumnView",value:function(){var S=jc(regeneratorRuntime.mark(function Pa(Da,Ja){var Za,Zb,Vc,Jc;return regeneratorRuntime.wrap(function(cd){for(;;)switch(cd.prev=cd.next){case 0:"string"===typeof Da&&(Da={name:Da});Zb=[this.selectedModule];if(!Ec.obj.isArray(Da)){cd.next=7;break}for(Da=Da.map(function(sd){return"string"===typeof sd?{name:sd}:sd});Vc=Da.shift();)Vc.parent=Ec.arr.last(Zb),Zb.push(Za=this.findCodeEntity(Vc));cd.next=12;
break;case 7:if(Jc=Za=this.findCodeEntity(Da)){cd.next=11;break}return cd.abrupt("return");case 11:for(;Jc=Jc.parent;)Zb.push(Jc);case 12:return cd.next=14,this.ui.columnView.setExpandedPath(function(sd){return sd.name===Za.name||!!Zb.find(function(Pe){return Pe.type===sd.type&&Pe.name===sd.name})},this.selectedModule,Ja);case 14:return cd.abrupt("return",Za);case 15:case "end":return cd.stop()}},Pa,this)}));return function(Da,Ja){return S.apply(this,arguments)}}()},{key:"selectCodeEntity",value:function(){var S=
jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za,Zb=arguments;return regeneratorRuntime.wrap(function(Vc){for(;;)switch(Vc.prev=Vc.next){case 0:return Pa=1<Zb.length&&void 0!==Zb[1]?Zb[1]:!0,Vc.next=3,this.selectCodeEntityInColumnView(Da,Pa);case 3:return Za=Vc.sent,this.onListSelectionChange(this.ui.columnView.getExpandedPath()),Vc.abrupt("return",Za);case 6:case "end":return Vc.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"updateModuleList",value:function(){var S=
jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za;return regeneratorRuntime.wrap(function(Zb){for(;;)switch(Zb.prev=Zb.next){case 0:Pa=this.ui.columnView;if(!Da){Zb.next=5;break}Za=Pa.treeData.parentNode(Da);Zb.next=5;return Pa.treeData.collapse(Za,!1);case 5:return Zb.next=7,Pa.refresh(!1);case 7:case "end":return Zb.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"updateCodeEntities",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa=this,
Za,Zb;return regeneratorRuntime.wrap(function(Vc){for(;;)switch(Vc.prev=Vc.next){case 0:return Za=this.ui.columnView,Zb=Za.getExpandedPath().find(function(Jc){return Pa.isModule(Jc)}),Zb.subNodes=null,Vc.next=5,Za.treeData.collapse(Zb,!1);case 5:return Vc.next=7,Za.refresh(!1);case 7:case "end":return Vc.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"isTestModule",value:function(S){return(S=Ec.testsFromSource(S))&&0<S.length}},{key:"isMarkdown",value:function(S){return"md"===
S.type}},{key:"updateTestUI",value:function(S){var Ra=this.ui;S=Ra.metaInfoText;Ra=Ra.sourceEditor;var Da=!1;if(this.editorPlugin.isJSEditorPlugin)try{var Ja=this.editorPlugin.getNavigator().ensureAST(Ra);Da=this.isTestModule(Ja||Ra.textString)}catch(Pa){console.warn("sytem browser updateTestUI: ".concat(Pa)),Da=!1}S.toggleTestButton(Da)}},{key:"runOnServer",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa;return regeneratorRuntime.wrap(function(Za){for(;;)switch(Za.prev=Za.next){case 0:return Za.next=
2,Ec.serverInterfaceFor(Ec.config.remotes.server).runEval("\n        ".concat(Da,"\n    "),{targetModule:"lively://PackageBrowser/eval"});case 2:Pa=Za.sent;if(!Pa.isError){Za.next=5;break}throw Pa.value;case 5:return Za.abrupt("return",Pa.value);case 6:case "end":return Za.stop()}},Ja)}));return function(Da){return S.apply(this,arguments)}}()},{key:"getInstalledPackagesList",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja,Pa,Za,Zb,Vc,Jc;return regeneratorRuntime.wrap(function(cd){for(;;)switch(cd.prev=
cd.next){case 0:return cd.next=2,this.runOnServer('\n      let r = System.get("@lively-env").packageRegistry;\n      r.toJSON();');case 2:Ja=cd.sent;Pa=[];for(Za in Ja.packageMap)for(Vc in Zb=Ja.packageMap[Za].versions,Zb)Jc=Zb[Vc],Pa.push(Jc);return cd.abrupt("return",Pa);case 6:case "end":return cd.stop()}},Da,this)}));return function(){return S.apply(this,arguments)}}()},{key:"updatePackageDependencies",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){return regeneratorRuntime.wrap(function(Ja){for(;;)switch(Ja.prev=
Ja.next){case 0:case "end":return Ja.stop()}},Da)}));return function(){return S.apply(this,arguments)}}()},{key:"installPackage",value:function(){var S=jc(regeneratorRuntime.mark(function Za(Da,Ja,Pa){var Zb,Vc,Jc,cd;return regeneratorRuntime.wrap(function(sd){for(;;)switch(sd.prev=sd.next){case 0:return sd.next=2,Ec.loadPart("package install indicator");case 2:if(Zb=sd.sent)Vc=this.ui.sourceEditor,Vc.insertText([Zb,{}],Vc.indexToPosition(Pa-1)),Zb.showInstallationProgress();sd.prev=4;sd.next=7;return this.runOnServer('        \n        async function installPackage(name, version) {\n          let Module = System._nodeRequire("module"),\n              flatn = Module._load("flatn")\n        \n          let env = process.env,\n              devPackageDirs = env.FLATN_DEV_PACKAGE_DIRS.split(":").filter(Boolean),\n              packageCollectionDirs = env.FLATN_PACKAGE_COLLECTION_DIRS.split(":").filter(Boolean),\n              packageDirs = env.FLATN_PACKAGE_DIRS.split(":").filter(Boolean),\n              packageMap = flatn.PackageMap.ensure(packageCollectionDirs, packageDirs, devPackageDirs);\n              buildFailed;\n\n          await flatn.installPackage(\n            name + "@" + version,\n            System.baseURL.replace("file://", "") + "custom-npm-modules",\n            packageMap,\n            undefined,\n            /*isDev = */false,\n            /*verbose = */true\n          );\n          try {          \n            await flatn.installDependenciesOfPackage(\n               packageMap.lookup(name, version),\n               System.baseURL.replace("file://", "") + \'dev-deps\',\n               packageMap,\n               [\'devDependencies\'],\n               true\n            );\n          } catch(e) {\n            // install scripts dont really work sometimes so\n            // dont let that disrup the normal install process\n            buildFailed = e.message;\n          }\n        \n          let r = System.get("@lively-env").packageRegistry\n          await r.update();\n          return { pkgRegistry: r, buildFailed };\n        }\n        await installPackage("'.concat(Da,
'", "').concat(Ja,'");   \n    '));case 7:Jc=sd.sent;cd=Jc.pkgRegistry;System.get("@lively-env").packageRegistry.updateFromJSON(cd);Zb&&Zb.showInstallationComplete();sd.next=16;break;case 13:sd.prev=13,sd.t0=sd["catch"](4),Zb&&Zb.showError();case 16:sd.prev=16;if(!Zb){sd.next=23;break}sd.next=20;return Ec.promise.delay(2E3);case 20:return sd.next=22,Zb.reset();case 22:Zb.remove();case 23:return sd.finish(16);case 24:case "end":return sd.stop()}},Za,this,[[4,13,16,24]])}));return function(Da,Ja,Pa){return S.apply(this,
arguments)}}()},{key:"save",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja,Pa,Za,Zb,Vc,Jc,cd,sd,Pe,gf,ag,Af,ph,Ug,$i,rh,Ah,hk,tk,Zl=arguments;return regeneratorRuntime.wrap(function(Ph){for(;;)switch(Ph.prev=Ph.next){case 0:Ja=0<Zl.length&&void 0!==Zl[0]?Zl[0]:0;Pa=this.ui;Za=Pa.sourceEditor;Zb=Pa.metaInfoText;Vc=this.state;Jc=this.systemInterface;if(cd=this.selectedModule){Ph.next=5;break}return Ph.abrupt("return");case 5:if(!Ec.modules.module(cd.url)._frozenModule){Ph.next=
11;break}Zb.showError("Cannot alter frozen Modules!");Ph.next=9;return Ec.promise.delay(5E3);case 9:return Zb.showFrozen(),Ph.abrupt("return");case 11:sd=Za.textString.split(Ec.objectReplacementChar).join("");Pe=[];if(Vc.sourceHash===Ec.string.hashCode(sd)||!Vc.moduleChangeWarning||Vc.moduleChangeWarning!==cd.url){Ph.next=20;break}Ph.next=16;return this.world().confirm(["Change Conflict\n",null,"The module ".concat(cd.url," you are trying to save changed elsewhere!\nOverwrite those changes?"),{fontSize:16,
fontWeight:"normal"}],{requester:this.view,width:350});case 16:if(gf=Ph.sent){Ph.next=19;break}return Ph.abrupt("return");case 19:Vc.moduleChangeWarning=null;case 20:return Ph.next=22,Jc.moduleFormat(cd.url);case 22:if(Ph.t0=Ph.sent,Ph.t0){Ph.next=25;break}case 25:ag=cd.name.match(/\.([^\.]+)$/)||[];Af=ic(ag,2);ph=Af[1];Vc.isSaving=!0;Ph.prev=27;Za.cleanupSnippetsExpansions();if("js"===ph||"jsx"===ph){Ph.next=46;break}if("package.json"!==cd.nameInPackage){Ph.next=36;break}Ph.next=33;return Jc.packageConfChange(sd,
cd.url);case 33:this.updatePackageDependencies();Ph.next=43;break;case 36:"less"===ph&&$world.getSubmorphsByStyleClassName("HTMLMorph").forEach(function(vl){vl.updateLessIfNeeded()});if("md"!==ph){Ph.next=41;break}if(!(this.editorPlugin.isMarkdownEditorPlugin&&this.editorPlugin.textMorph._mdPreviewMorph&&this.editorPlugin.textMorph._mdPreviewMorph.owner.owner)){Ph.next=41;break}Ph.next=41;return this.renderMarkdown();case 41:return Ph.next=43,Jc.coreInterface.resourceWrite(cd.url,sd);case 43:Zb.showSaved();
Ph.next=65;break;case 46:if(!Ec.config.systemBrowser.fixUndeclaredVarsOnSave){Ph.next=53;break}Ph.next=49;return Za.execCommand("[javascript] fix undeclared variables");case 49:if(Ug=Ph.sent){Ph.next=52;break}return Ph.abrupt("return");case 52:sd=Za.textString;case 53:return Ph.next=55,Ec.lint(sd);case 55:$i=Ph.sent;sd=$i[0];Pe=$i[1];if(!cd.isLoaded){Ph.next=63;break}Ph.next=61;return Jc.interactivelyChangeModule(cd.url,sd,{targetModule:cd.url,doEval:!0});case 61:Ph.next=65;break;case 63:return Ph.next=
65,Jc.coreInterface.resourceWrite(cd.url,sd);case 65:return rh=Za.cursorPosition,this.updateSource(sd),Ph.next=69,this.updateCodeEntities(cd);case 69:return Ph.next=71,this.updateTestUI(cd);case 71:Za.focus();Za.cursorPosition=rh;Ph.next=85;break;case 75:Ph.prev=75;Ph.t1=Ph["catch"](27);if(!(0<Ja||Ph.t1 instanceof SyntaxError)){Ph.next=80;break}Zb.showError(Ph.t1);return Ph.abrupt("return");case 80:return Ph.next=82,this.reloadModule(!1);case 82:return Ah=Ph.sent,Za.textString=sd,Ph.abrupt("return",
!Ah||Ah instanceof Error?Zb.showError(Ph.t1):this.save(Ja+1));case 85:return Ph.prev=85,this.state.isSaving=!1,Ph.finish(85);case 88:if(!(0<Pe.length)){Ph.next=94;break}hk=Pe.map(function(vl){return'"'.concat(vl.message,'" on line ').concat(vl.line)});tk=["Saved with warnings:"].concat(hk).join("\n");Zb.showWarning(tk);Ph.next=94;return Ec.promise.delay(5E3);case 94:Zb.showSaved();case 95:case "end":return Ph.stop()}},Da,this,[[27,75,85,88]])}));return function(){return S.apply(this,arguments)}}()},
{key:"reloadModule",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja,Pa,Za,Zb,Vc,Jc,cd,sd,Pe=arguments;return regeneratorRuntime.wrap(function(gf){for(;;)switch(gf.prev=gf.next){case 0:Ja=0<Pe.length&&void 0!==Pe[0]?Pe[0]:!1;Pa=this.selectedModule;Za=this.systemInterface;Zb=this.ui.sourceEditor;Vc=Zb.scroll;Jc=Zb.cursorPosition;if(Pa){gf.next=5;break}return gf.abrupt("return",null);case 5:return cd=!!Ja,sd=!!Ja,gf.prev=7,gf.next=10,Za.interactivelyReloadModule(null,Pa.url,cd,
sd);case 10:return gf.next=12,this.selectModuleNamed(Pa.nameInPackage);case 12:Zb.scroll=Vc;Zb.cursorPosition=Jc;gf.next=19;break;case 16:return gf.prev=16,gf.t0=gf["catch"](7),gf.abrupt("return",Error("Error while reloading ".concat(Pa.name,":\n").concat(gf.t0.stack||gf.t0)));case 19:return gf.abrupt("return",Pa);case 20:case "end":return gf.stop()}},Da,this,[[7,16]])}));return function(){return S.apply(this,arguments)}}()},{key:"historyBackward",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja,
Pa,Za,Zb,Vc;return regeneratorRuntime.wrap(function(Jc){for(;;)switch(Jc.prev=Jc.next){case 0:if(!(2>this.state.history.left.length)){Jc.next=2;break}return Jc.abrupt("return");case 2:return Ja=this.state.history.left.pop(),Pa=Ec.arr.last(this.state.history.left),this.state.history.right.unshift(Ja),this.refreshHistoryButtons(),Za=this.historyGetLocation(),Zb=Za.scroll,Vc=Za.cursor,Ja.scroll=Zb,Ja.cursor=Vc,Jc.prev=9,Jc.next=12,this.historySetLocation(Pa);case 12:Jc.next=19;break;case 14:throw Jc.prev=
14,Jc.t0=Jc["catch"](9),this.state.history.left.push(Pa),this.state.history.right.unshift(),Jc.t0;case 19:case "end":return Jc.stop()}},Da,this,[[9,14]])}));return function(){return S.apply(this,arguments)}}()},{key:"historyForward",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja,Pa,Za,Zb,Vc;return regeneratorRuntime.wrap(function(Jc){for(;;)switch(Jc.prev=Jc.next){case 0:Ja=Ec.arr.last(this.state.history.left);if(Pa=this.state.history.right.shift()){Jc.next=4;break}return Jc.abrupt("return");
case 4:return this.state.history.left.push(Pa),this.refreshHistoryButtons(),Ja&&(Za=this.historyGetLocation(),Zb=Za.scroll,Vc=Za.cursor,Ja.scroll=Zb,Ja.cursor=Vc),Jc.prev=7,Jc.next=10,this.historySetLocation(Pa);case 10:Jc.next=17;break;case 12:throw Jc.prev=12,Jc.t0=Jc["catch"](7),this.state.history.left.pop(),this.state.history.right.unshift(Pa),Jc.t0;case 17:case "end":return Jc.stop()}},Da,this,[[7,12]])}));return function(){return S.apply(this,arguments)}}()},{key:"historyGetLocation",value:function(){var S=
this.ui.sourceEditor;return{"package":this.selectedPackage,module:this.selectedModule,cursor:S.cursorPosition,scroll:S.scroll}}},{key:"historyRecord",value:function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;if(!this.state.history.navigationInProgress){this.state.history.right.length=0;var Ra=this.historyGetLocation(),Da;if(S){for(;(Da=this.state.history.right[0])&&Da.module&&Ra.module&&Da.module.url===Ra.module.url;)this.state.history.right.shift();this.state.history.right.unshift(Ra)}else{for(;(Da=
Ec.arr.last(this.state.history.left))&&Da.module&&Ra.module&&Da.module.url===Ra.module.url;)this.state.history.left.pop();this.state.history.left.push(Ra)}this.refreshHistoryButtons()}}},{key:"refreshHistoryButtons",value:function(){var S=this.ui,Ra=S.goBack;S=S.goForward;2>this.state.history.left.length?Ra.disable():Ra.enable();0===this.state.history.right.length?S.disable():S.enable()}},{key:"historyReset",value:function(){this.state.history.left=[];this.state.history.right=[];this.state.history.navigationInProgress=
null}},{key:"historySetLocation",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za,Zb,Vc,Jc;return regeneratorRuntime.wrap(function(cd){for(;;)switch(cd.prev=cd.next){case 0:if(Da){cd.next=2;break}return cd.abrupt("return");case 2:Pa=this.state.history;if(!Pa.navigationInProgress){cd.next=8;break}cd.next=6;return Pa.navigationInProgress;case 6:return this.historySetLocation(Da),cd.abrupt("return");case 8:return Za=Ec.promise.deferred(),Zb=Za.promise,Vc=Za.resolve,Pa.navigationInProgress=
Zb,cd.prev=10,Jc=this.ui.sourceEditor,cd.next=14,this.whenPackageUpdated();case 14:return cd.next=16,this.whenModuleUpdated();case 16:if(this.selectedPackage&&Da["package"].address===this.selectedPackage.address){cd.next=19;break}cd.next=19;return this.selectPackageNamed(Da["package"].address);case 19:if(this.selectedModule&&Da.module.url===this.selectedModule.url){cd.next=22;break}cd.next=22;return this.selectModuleNamed(Da.module.url);case 22:Jc.cursorPosition=Da.cursor,Jc.scroll=Da.scroll,Jc.scrollCursorIntoView();
case 25:return cd.prev=25,Pa.navigationInProgress=null,Vc(),cd.finish(25);case 29:case "end":return cd.stop()}},Ja,this,[[10,,25,29]])}));return function(Da){return S.apply(this,arguments)}}()},{key:"makeTabsNotCloseable",value:function(){this.ui.tabs.tabs.forEach(function(S){return S.closeable=!1})}},{key:"adaptViewForTabs",value:function(){this.ui.columnView.top+=32}},{key:"browsedTabChanged",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za,Zb,Vc;return regeneratorRuntime.wrap(function(Jc){for(;;)switch(Jc.prev=
Jc.next){case 0:Pa=Da.curr;if(Za=Da.prev){Jc.next=4;break}Pa.closeable=!1;return Jc.abrupt("return");case 4:this.ui.tabs.tabs.forEach(function(cd){return cd.closeable=!0});if(!this.selectedModule||!this.hasUnsavedChanges()){Jc.next=13;break}Jc.next=8;return this.warnForUnsavedChanges();case 8:if(Zb=Jc.sent){Jc.next=13;break}Za.setProperty("selected",!0);Pa.closeSilently();return Jc.abrupt("return");case 13:return Za.content={spec:this.browseSpec(),history:this.state.history},Za.caption.includes("Browser Tab")&&
(Za.caption="[".concat(Za.content.packageName,"]").concat(Za.content.mdouleName?"- "+Za.content.moduleName:"")),Pa.content||(Pa.content={spec:{packageName:"lively.morphic",moduleName:"morph.js",scroll:Ec.pt(0,0)},history:{left:[],right:[],navigationInProgress:null}},Pa.caption="[lively.morphic] - morph.js"),Vc=Ec.LoadingIndicator.open("Preparing Editor"),this.state.history=Pa.content.history,this.refreshHistoryButtons(),Jc.next=21,this.browse(Pa.content.spec);case 21:Vc.remove();case 22:case "end":return Jc.stop()}},
Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"onModuleChanged",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa=this,Za,Zb,Vc;return regeneratorRuntime.wrap(function(Jc){for(;;)switch(Jc.prev=Jc.next){case 0:if(!this.state.isSaving){Jc.next=2;break}return Jc.abrupt("return");case 2:Za=Ec.modules.module(Da.module);Zb=this.selectedModule;if(Vc=this.selectedPackage){Jc.next=6;break}return Jc.abrupt("return");case 6:if(Za["package"]()&&Za["package"]().address===
Vc.address){Jc.next=8;break}return Jc.abrupt("return");case 8:if(!Zb||Zb.url!==Za.id){Jc.next=20;break}if(!this.hasUnsavedChanges()){Jc.next=18;break}this.addModuleChangeWarning(Za.id);Jc.t0=Ec.string;Jc.next=14;return Za.source();case 14:Jc.t1=Jc.sent;this.state.sourceHash=Jc.t0.hashCode.call(Jc.t0,Jc.t1);Jc.next=20;break;case 18:return Jc.next=20,this.ui.sourceEditor.saveExcursion(function(){return Pa.onModuleSelected(Zb)});case 20:case "end":return Jc.stop()}},Ja,this)}));return function(Da){return S.apply(this,
arguments)}}()},{key:"onModuleLoaded",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za;return regeneratorRuntime.wrap(function(Zb){for(;;)switch(Zb.prev=Zb.next){case 0:if(!this.state.isSaving){Zb.next=2;break}return Zb.abrupt("return");case 2:Pa=Ec.modules.module(Da.module),(Za=this.selectedPackage)&&Pa["package"]()&&Pa["package"]();case 5:case "end":return Zb.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"addModuleChangeWarning",value:function(S){this.state.moduleChangeWarning=
S}},{key:"setStatusMessage",value:function(){var S=this.ui.sourceEditor;return S.setStatusMessage.apply(S,arguments)}},{key:"onWindowClose",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja;return regeneratorRuntime.wrap(function(Pa){for(;;)switch(Pa.prev=Pa.next){case 0:Ja=!0;if(!this.hasUnsavedChanges()){Pa.next=5;break}Pa.next=4;return this.warnForUnsavedChanges();case 4:Ja=Pa.sent;case 5:return Pa.abrupt("return",Ja);case 6:case "end":return Pa.stop()}},Da,this)}));return function(){return S.apply(this,
arguments)}}()},{key:"focus",value:function(S){this.ui.sourceEditor.focus()}},{key:"focusSourceEditor",value:function(){this.ui.sourceEditor.focus();this.ui.sourceEditor.show()}},{key:"focusColumnView",value:function(){this.models.columnView.focusActiveList()}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"browser save"},{keys:"Alt-Up",command:"focus list with selection"},{keys:"F1",command:"focus module list"},{keys:"F2",command:"focus code entities"},{keys:"F3|Alt-Down",
command:"focus source editor"},{keys:"F4",command:"resize editor panel"},{keys:"Alt-R",command:"reload module"},{keys:"Alt-Ctrl-R",command:{command:"reload module",args:{hard:!0}}},{keys:"Alt-L",command:"load or add module"},{keys:"Ctrl-C Ctrl-T",command:"run all tests in module"},{keys:"Ctrl-C T",command:"run tests at point"},{keys:"Ctrl-C B E F",command:"run setup code of tests (before and beforeEach)"},{keys:"Ctrl-C A F T",command:"run teardown code of tests (after and afterEach)"},{keys:"Alt-P",
command:"browser history backward"},{keys:"Alt-N",command:"browser history forward"},{keys:"Alt-H",command:"browser history browse"},{keys:"Meta-Shift-L b a c k e n d",command:"activate eval backend dropdown list"},{keys:"Alt-J",command:"jump to codeentity"},{keys:"Meta-N",command:"open new tab"}].concat(this.ui.tabs.keybindings)}},{key:"commands",get:function(){return Ec.browserCommands(this).concat(Ec.EvalBackendChooser["default"].activateEvalBackendCommand(this)).concat(this.ui.tabs.commands)}},
{key:"renderMarkdown",value:function(){this.ui.sourceEditor.execCommand("[markdown] convert to html")}},{key:"interactivelyJumpToCodeentity",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja,Pa,Za,Zb,Vc,Jc,cd,sd,Pe;return regeneratorRuntime.wrap(function(gf){for(;;)switch(gf.prev=gf.next){case 0:Ja=this.ui;Pa=Ja.sourceEditor;Za=Ja.columnView;if(!this.isTestModule(Pa.textString)){gf.next=3;break}return gf.abrupt("return",this.execCommand("jump to test"));case 3:if(!this.isMarkdown(this.selectedModule)){gf.next=
5;break}return gf.abrupt("return",Pa.execCommand("[markdown] goto heading"));case 5:return Zb=this.renderedCodeEntities(),Vc=Zb.indexOf(Za._selectedNode),Jc=Zb.map(function(ag){var Af=ag.name,ph=ag.type,Ug=ag.parent;return{isListItem:!0,label:["".concat(Ug?Ug.name+">>":"").concat(Af),null,"".concat(ph),{fontSize:"70%",textStyleClasses:["annotation"]}],value:ag}}),gf.next=10,this.world().filterableListPrompt("Select item",Jc,{preselect:Vc,requester:this.view,historyId:"js-browser-codeentity-jump-hist"});
case 10:if(cd=gf.sent,sd=ic(cd.selected,1),Pe=sd[0])Pa.saveMark(),this.selectCodeEntity(Pe);case 14:case "end":return gf.stop()}},Da,this)}));return function(){return S.apply(this,arguments)}}()},{key:"interactivelyJumpToTest",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja,Pa,Za,Zb,Vc,Jc,cd,sd,Pe,gf,ag,Af,ph,Ug,$i,rh;return regeneratorRuntime.wrap(function(Ah){for(;;)switch(Ah.prev=Ah.next){case 0:Ja=this.selectedModule;Pa=this.ui.sourceEditor;if(Ja){Ah.next=3;break}return Ah.abrupt("return",
!0);case 3:return Za=Pa.textString,Zb=[],Vc=[],Jc=Za.split("\n"),cd=Pa.cursorPosition.row,sd=0,Ah.next=11,Dd.import("mocha-es6");case 11:return Pe=Ah.sent,gf=Pe.loadTestModuleAndExtractTestState,Ah.next=15,gf(Ja.url,Vc);case 15:ag=Vc[0].tests.filter(function(hk){return hk.fullTitle});Af=function(hk){var tk=ag[hk],Zl=tk.depth,Ph=tk.fullTitle,vl=tk.title,Uj=tk.type,$l="suite"===Uj?"describe":"it",Wk=tk.row=Jc.findIndex(function(Ie){return Ie.match(new RegExp("".concat($l,'.*".*').concat(vl,'.*"')))});
Wk<=cd&&(sd=hk);Zb.push({isListItem:!0,value:tk,label:["".concat("\u2002".repeat(Zl-1)).concat(Ph),null,"line ".concat(Wk," ").concat(Uj),{fontSize:"70%",textStyleClasses:["annotation"]}]})};for(ph=0;ph<ag.length;ph++)Af(ph);Ah.next=20;return this.world().filterableListPrompt("tests of ".concat(Ja.nameInPackage),Zb,{requester:this.view,preselect:sd});case 20:Ug=Ah.sent;$i=ic(Ug.selected,1);if(rh=$i[0])Pa.saveMark(),Pa.cursorPosition={row:rh.row,column:0},Pa.execCommand("goto line start"),Pa.centerRow(rh.row);
return Ah.abrupt("return",!0);case 25:case "end":return Ah.stop()}},Da,this)}));return function(){return S.apply(this,arguments)}}()},{key:"interactivelyAddOrLoadModule",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za,Zb,Vc,Jc;return regeneratorRuntime.wrap(function(cd){for(;;)switch(cd.prev=cd.next){case 0:return Pa=this.selectedPackage,Za=this.selectedModule,Zb=this.systemInterface,Vc=this.view,cd.prev=4,cd.next=7,Zb.interactivelyAddModule(Vc,Za?Za.name:Pa?Pa.address:
null);case 7:Jc=cd.sent;cd.next=14;break;case 10:return cd.prev=10,cd.t0=cd["catch"](4),"Canceled"===cd.t0?Vc.setStatusMessage(cd.t0):this.world().inform("Error while trying to load modules:\n".concat(cd.t0.stack||cd.t0),{requester:Vc}),cd.abrupt("return");case 14:return Jc.forEach(function(sd){var Pe=sd.name;return(sd=sd.error)?Vc.showError("Error while loading module ".concat(Pe,": ").concat(sd.stack||sd)):Vc.setStatusMessage("Module ".concat(Pe," loaded"))}),cd.next=17,this.updateModuleList(Pa);
case 17:return Jc.length&&this.selectModuleNamed(Jc[0].name),cd.abrupt("return",!0);case 19:case "end":return cd.stop()}},Ja,this,[[4,10]])}));return function(Da){return S.apply(this,arguments)}}()},{key:"interactivelyCreateNewFolder",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za,Zb,Vc,Jc,cd;return regeneratorRuntime.wrap(function(sd){for(;;)switch(sd.prev=sd.next){case 0:Pa=this.ui.columnView;Za=Pa.treeData;if(Da){sd.next=4;break}return sd.abrupt("return");case 4:return Zb=
this.systemInterface.coreInterface,sd.next=7,this.world().prompt("Enter folder name",{requester:this.view});case 7:if(Vc=sd.sent){sd.next=10;break}return sd.abrupt("return");case 10:return Jc=Ec.joinPath(Da,Vc),Jc.endsWith("/")||(Jc+="/"),sd.next=14,Zb.resourceMkdir(Jc);case 14:cd=Pa.getExpandedPath().find(function(Pe){return Pe.url===Da});if(!cd){sd.next=18;break}sd.next=18;return Za.collapse(cd,!1);case 18:Pa.selectNode(cd.subNodes.find(function(Pe){return Pe.url===Jc}));case 19:case "end":return sd.stop()}},
Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"interactivelyAddNewModule",value:function(){var S=jc(regeneratorRuntime.mark(function Pa(Da,Ja){var Za,Zb,Vc,Jc,cd,sd;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:Za=this.ui.columnView;Zb=Za.treeData;if(Da){Pe.next=4;break}return Pe.abrupt("return");case 4:Vc=this.systemInterface.coreInterface;Jc="";if(!Ja){Pe.next=13;break}Pe.next=9;return this.world().prompt(["Enter module name",null],
{requester:this.view});case 9:(Jc=Pe.sent)&&(Jc=Jc.replace(/(\.js|\.md|\.json)$/,"")+"."+Ja);Pe.next=19;break;case 13:if(void 0===Jc||Jc.match(/(\.js|\.md|\.json)$/)){Pe.next=19;break}Pe.next=16;return this.world().prompt(["Enter module name\n",null,"Supported file types are:\n",{fontSize:16,fontWeight:"normal"},"markdown (.md)\nJavascript (.js)\nJSON (.json)",{fontWeight:"normal",fontSize:16,fontStyle:"italic"}],{requester:this.view});case 16:Jc=Pe.sent;Pe.next=13;break;case 19:if(Jc){Pe.next=21;
break}return Pe.abrupt("return");case 21:return cd=Ec.joinPath(Da,Jc),Pe.next=24,Vc.resourceEnsureExistance(cd);case 24:sd=Za.getExpandedPath().find(function(gf){return gf.url===Da});if(!sd){Pe.next=28;break}Pe.next=28;return Zb.collapse(sd,!1);case 28:Za.selectNode(sd.subNodes.find(function(gf){return gf.url===cd}));case 29:case "end":return Pe.stop()}},Pa,this)}));return function(Da,Ja){return S.apply(this,arguments)}}()},{key:"interactivelyBrowseHistory",value:function(){var S=jc(regeneratorRuntime.mark(function Da(){var Ja,
Pa,Za,Zb,Vc,Jc,cd,sd,Pe,gf,ag,Af;return regeneratorRuntime.wrap(function(ph){for(;;)switch(ph.prev=ph.next){case 0:return Ja=this.state.history,Pa=Ja.left,Za=Ja.right,Zb=Ec.arr.last(Pa),Vc=Pa.indexOf(Zb),Jc=Pa.concat(Za).map(function(Ug){return{isListItem:!0,string:Ug.module?Ug.module.nameInPackage:Ug["package"]?Ug["package"].name||Ug["package"].address:"strange location",value:Ug}}),ph.next=6,this.world().filterableListPrompt("Jumpt to location",Jc,{preselect:Vc,requester:this.view});case 6:cd=ph.sent;
sd=ic(cd.selected,1);Pe=sd[0];if(!Pe){ph.next=14;break}Pa.includes(Pe)?(this.state.history.left=Pa.slice(0,Pa.indexOf(Pe)+1),this.state.history.right=Pa.slice(Pa.indexOf(Pe)+1).concat(Za)):Za.includes(Pe)&&(this.state.history.left=Pa.concat(Za.slice(0,Za.indexOf(Pe)+1)),this.state.history.right=Za.slice(Za.indexOf(Pe)+1));Zb&&(gf=this.historyGetLocation(),ag=gf.scroll,Af=gf.cursor,Zb.scroll=ag,Zb.cursor=Af);ph.next=14;return this.historySetLocation(Pe);case 14:return ph.abrupt("return",!0);case 15:case "end":return ph.stop()}},
Da,this)}));return function(){return S.apply(this,arguments)}}()},{key:"interactivelyRemoveSelectedItem",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za,Zb,Vc,Jc,cd,sd,Pe,gf,ag,Af,ph,Ug,$i;return regeneratorRuntime.wrap(function(rh){for(;;)switch(rh.prev=rh.next){case 0:Pa=this.selectedPackage;Za=this.ui.columnView;Zb=this.systemInterface;Vc=Zb.coreInterface;Jc=Za.treeData;if(Da&&Pa){rh.next=5;break}return rh.abrupt("return");case 5:cd=Za.getExpandedPath().find(function(Ah){return Ah.url===
Da});sd=cd.subNodes.find(function(Ah){return!Ah.isCollapsed});Pe={fontSize:16,fontWeight:"normal "};if(sd){rh.next=10;break}return rh.abrupt("return");case 10:if(!this.isModule(sd)){rh.next=23;break}if(!sd.url.match(/(\.md|\.less)$/)){rh.next=22;break}rh.next=14;return this.world().confirm(["Really remove file?\n",{},"You are about to remove the file:\n",Pe,sd.url,Object.assign({},Pe,{fontStyle:"italic"})],{lineWrapping:!1,requester:this.view});case 14:if(!rh.sent){rh.next=19;break}rh.next=17;return Vc.resourceRemove(sd.url);
case 17:rh.next=20;break;case 19:return rh.abrupt("return");case 20:rh.next=23;break;case 22:return rh.abrupt("return",this.execCommand("remove module",{mod:sd}));case 23:if("directory"!==sd.type){rh.next=52;break}rh.next=26;return this.world().confirm(["Folder removal\n",{},"You are about to remove a folder containing several modules. ",Pe,"All of these modules will be immediately unloaded from the system.\n",Pe,"This may potentially crash the system, especially if the modules in question are currently in use by one or more objects. Proceed with caution.",
Pe],{width:400,requester:this.view});case 26:if(gf=rh.sent){rh.next=29;break}return rh.abrupt("return");case 29:return rh.next=31,Vc.getPackage(Pa.address);case 31:ag=rh.sent,Af=ag.modules.filter(function(Ah){return Ah.name.startsWith(sd.url)}),ph=qb(Af),rh.prev=34,ph.s();case 36:if((Ug=ph.n()).done){rh.next=42;break}$i=Ug.value;rh.next=40;return this.execCommand("remove module",{mod:$i});case 40:rh.next=36;break;case 42:rh.next=47;break;case 44:rh.prev=44,rh.t0=rh["catch"](34),ph.e(rh.t0);case 47:return rh.prev=
47,ph.f(),rh.finish(47);case 50:return rh.next=52,Vc.resourceRemove(sd.url);case 52:if(!cd){rh.next=55;break}rh.next=55;return Jc.collapse(cd,!1);case 55:this.updateModuleList();case 56:case "end":return rh.stop()}},Ja,this,[[34,44,47,50]])}));return function(Da){return S.apply(this,arguments)}}()},{key:"onContextMenu",value:function(){var S=jc(regeneratorRuntime.mark(function Ja(Da){var Pa,Za,Zb,Vc,Jc,cd;return regeneratorRuntime.wrap(function(sd){for(;;)switch(sd.prev=sd.next){case 0:Da.stop();
Pa=Da.targetMorph;Za=this.ui;Zb=Za.sourceEditor;Vc=Za.moduleList;Jc=Za.codeEntityTree;cd=[];if(![Zb,Vc,Jc].includes(Pa)){sd.next=13;break}sd.t0=cd.push;sd.t1=cd;sd.t2=Od;sd.next=10;return Pa.menuItems();case 10:sd.t3=sd.sent,sd.t4=(0,sd.t2)(sd.t3),sd.t0.apply.call(sd.t0,sd.t1,sd.t4);case 13:return sd.t5=this,sd.t6=[],sd.t7=cd,sd.t8=Od,sd.next=19,this.menuItems();case 19:sd.t9=sd.sent,sd.t10=(0,sd.t8)(sd.t9),sd.t11=sd.t6.concat.call(sd.t6,sd.t7,sd.t10),sd.t12=Da,sd.t5.openMenu.call(sd.t5,sd.t11,sd.t12);
case 24:case "end":return sd.stop()}},Ja,this)}));return function(Da){return S.apply(this,arguments)}}()},{key:"browseSnippetForSelection",value:function(){var S=this.selectedPackage,Ra=this.selectedModule,Da=this.selectedCodeEntity,Ja=this.systemInterface,Pa='$world.execCommand("open browser", {';Ra?(Pa+='moduleName: "'.concat(Ra.nameInPackage,'", '),S&&(Pa+='packageName: "'.concat(S.name,'", '))):S&&(Pa+=' packageName: "'.concat(S.name,'", '));Da&&(Pa+="codeEntity: ".concat(Ec.obj.isArray(Da)?JSON.stringify(Da.map(function(Za){return Ec.obj.select(Za,
["name","type"])})):'"'.concat(Da.name,'"')));"local"!==Ja.name&&(Pa+=', systemInterface: "'.concat(Ja.name,'"'));return Pa+"});"}},{key:"menuItems",value:function(){var S=this.selectedPackage,Ra=this.selectedModule;return[].concat(Od(fe._get(Object.getPrototypeOf(lb.prototype),"menuItems",this).call(this)),[S&&{command:"open browse snippet",target:this},Ra&&{command:"open selected module in text editor",target:this}]).filter(Boolean)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"BrowserModel"}},
{key:"properties",get:function(){return{systemInterface:{derived:!0,readOnly:!0,after:["editorPlugin"],get:function(){var S=this.editorPlugin.evalEnvironment;try{return this.editorPlugin.systemInterface()}catch(Ra){return S.systemInterface}},set:function(S){this.editorPlugin.setSystemInterfaceNamed(S)}},associatedSearchPanel:{derived:!0,get:function(){return this.state.associatedSearchPanel},set:function(S){this.state.associatedSearchPanel=S}},editorPlugin:{readOnly:!0,derived:!0,get:function(){return this.ui.sourceEditor.pluginFind(function(S){return S.isEditorPlugin})}},
expose:{get:function(){return["isBrowser","focus","keybindings","browse","browserFromSpec","browseSnippetForSelection","commands","systemInterface","selectedModule","selectedPackage","selectedCodeEntity","selectCodeEntity","selectPackageNamed","setEvalBackend","editorPlugin","isTestModule","reloadModule","renderedCodeEntities","focusSourceEditor","historyBackward","historyForward","save","hasUnsavedChanges","interactivelyBrowseHistory","interactivelyAddNewModule","interactivelyCreateNewFolder","interactivelyRemoveSelectedItem",
"searchForModuleAndSelect","updateModuleList","onWindowClose","onModuleLoaded","onModuleChanged",{method:"serializeBrowser",as:"__serialize__"}]}},bindings:{get:function(){return[{signal:"extent",handler:"relayout"},{model:"global search",signal:"fire",handler:"execCommand",converter:function(){return"open code search"}},{model:"go back",signal:"fire",handler:"execCommand",converter:function(){return"browser history backward"}},{model:"go forward",signal:"fire",handler:"execCommand",converter:function(){return"browser history forward"}},
{model:"browse history",signal:"fire",handler:"execCommand",converter:function(){return"browser history browse"}},{model:"browse modules",signal:"fire",handler:"execCommand",converter:function(){return"choose and browse module"}},{model:"add tab",signal:"fire",handler:"execCommand",converter:function(){return"open new tab"}},{target:"run tests in module",signal:"onMouseDown",handler:"execCommand",converter:function(){return"run all tests in module"}},{target:"jump to entity",signal:"onMouseDown",
handler:"execCommand",converter:function(){return"jump to codeentity"}},{target:"export to html",signal:"onMouseDown",handler:"renderMarkdown"},{target:"copy to clipboard",signal:"onMouseDown",handler:"execCommand",converter:function(){return"open browse snippet"}},{target:"freeze button",signal:"onMouseDown",handler:"execCommand",converter:function(){return"freeze selected module"}},{target:"open in editor",signal:"onMouseDown",handler:"execCommand",converter:function(){return"open selected module in text editor"}},
{target:"close button",signal:"onMouseDown",handler:"closeStatusMessage"},{target:"open in workspace",signal:"onMouseDown",handler:"openStatusMessage"},{model:"column view",signal:"selectionChange",handler:"onListSelectionChange"},{target:"source editor",signal:"textChange",handler:"updateUnsavedChangeIndicatorDebounced"},{target:"source editor",signal:"onMouseDown",handler:"updateFocusedCodeEntity"},{model:"tabs",signal:"onSelectedTabChange",handler:"browsedTabChanged"},{model:"tabs",signal:"oneTabRemaining",
handler:"makeTabsNotCloseable"},{model:"tabs",signal:"becameVisible",handler:"relayout"},{model:"tabs",signal:"becameInvisible",handler:"relayout"},{signal:"onWindowActivated",handler:"allowKeyboardNavigation"},{signal:"onWindowDeactivated",handler:"prohibitKeyboardNavigation"}]}}}}}],ca,{pathInPackage:function(){return"./js/browser/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:15434,end:81471})}(Ec.ViewModel));Ec.BrowserModel=Xe;Ec.BrowserModel=Xe;var Bg=Object.freeze({__proto__:null,COLORS:If,PackageControls:Mf,DirectoryControls:sg,PackageTreeData:Ei,CodeDefTreeData:oh,BrowserModel:Xe});bd("i",Bg)}}});