System.register(["./__rootModule___commonjs-entry-51a55f66.js","./interface-1a7f3c67.js","./index-616023be.js","@babel/plugin-syntax-import-meta"],function(bd,Dd){var se,Rc,ad,Ne,Cb,Sd,ve,uc,dd,vd,Ed,fe,jc,Od,qb,ic,Wb,lc,db;return{setters:[function(Xa){se=Xa.s;Rc=Xa.k;ad=Xa._;Ne=Xa.K;Cb=Xa.m;Sd=Xa.N;ve=Xa.v;uc=Xa.a;dd=Xa.t;vd=Xa.bt;Ed=Xa.q;fe=Xa.bu;jc=Xa.i;Od=Xa.bv},function(Xa){qb=Xa.p;ic=Xa.A;Wb=Xa.R},function(Xa){lc=Xa.a;db=Xa.b},function(){}],execute:function(){function Xa(){Xa=ad(regeneratorRuntime.mark(function kb(vc,
Qc){var Cc;return regeneratorRuntime.wrap(function(zc){for(;;)switch(zc.prev=zc.next){case 0:return zc.next=2,vc.importPackage(Qc.address+"/");case 2:if(!Qc.main){zc.next=5;break}zc.next=5;return vc.importModule(Qc.main.toString());case 5:if(!Qc.test){zc.next=19;break}zc.prev=6;zc.next=9;return vc.importPackage("mocha-es6");case 9:return Cc=zc.sent,zc.next=12,Cc.installSystemInstantiateHook();case 12:return zc.next=14,vc.importModule(Qc.test.toString());case 14:zc.next=19;break;case 16:zc.prev=16,
zc.t0=zc["catch"](6),console.warn("Cannot load test of new package: ".concat(zc.t0));case 19:return zc.abrupt("return",vc.getPackage(Qc.address));case 20:case "end":return zc.stop()}},kb,null,[[6,16]])}));return Xa.apply(this,arguments)}function Gb(Kd,vc){return sc.apply(this,arguments)}function sc(){sc=ad(regeneratorRuntime.mark(function kb(vc,Qc){var Cc,zc,Fc,xd,Uc,Md,Ob,Le,We;return regeneratorRuntime.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return Cc=Qc.world(),xe.next=3,Cc.prompt("Enter package name",
{requester:Qc,input:"",historyId:"lively.vm-editor-add-package-name",useLastInput:!0});case 3:if(zc=xe.sent){xe.next=6;break}throw"Canceled";case 6:xe.prev=6;xd=id.resource(zc);zc=xd.name();Fc=xd.url;xe.next=21;break;case 12:return xe.prev=12,xe.t0=xe["catch"](6),xe.next=16,vc.getConfig();case 16:return Uc=xe.sent.baseURL,Md=id.resource(Uc).join(zc).asDirectory().url,xe.next=20,vc.normalize(Md);case 20:Fc=xe.sent.replace(/\/\.js$/,"/");case 21:return xe.next=23,Cc.prompt("Confirm or change package location",
{requester:Qc,input:Fc,historyId:"lively.vm-editor-add-package-address"});case 23:if(Ob=xe.sent){xe.next=26;break}throw"Canceled";case 26:return Le=id.resource(Ob).asDirectory(),We=Le.asFile().url,xe.next=30,vc.removePackage(We);case 30:return xe.next=32,vc.resourceCreateFiles(We,{"index.js":"'format esm';\n","package.json":'{\n  "name": "'.concat(zc,'",\n  "version": "0.1.0"\n}'),".gitignore":"node_modules/","README.md":"# ".concat(zc,"\n\nNo description for package ").concat(zc," yet.\n"),tests:{"test.js":'import { expect } from "mocha-es6";\ndescribe("'.concat(zc,
'", () => {\n  it("works", () => {\n    expect(1 + 2).equals(3);\n  });\n});')}});case 32:return xe.abrupt("return",id.loadPackage(vc,{name:zc,address:We,configFile:Le.join("package.json").url,main:Le.join("index.js").url,test:Le.join("tests/test.js").url,type:"package"}));case 33:case "end":return xe.stop()}},kb,null,[[6,12]])}));return sc.apply(this,arguments)}function ub(Kd,vc){return sb.apply(this,arguments)}function sb(){sb=ad(regeneratorRuntime.mark(function kb(vc,Qc){var Cc,zc,Fc,xd,Uc,Md,
Ob,Le=arguments;return regeneratorRuntime.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return Cc=2<Le.length&&void 0!==Le[2]?Le[2]:null,zc={name:"",address:"",type:"package"},We.next=4,vc.getConfig();case 4:Fc=We.sent;if(!Cc){We.next=14;break}We.next=8;return vc.getPackage(Cc);case 8:We.t0=We.sent;if(We.t0){We.next=13;break}We.next=12;return vc.getPackageForModule(Cc);case 12:We.t0=We.sent;case 13:xd=We.t0;case 14:return We.next=16,id.resource(Fc.baseURL).dirList(2,{exclude:function(xe){return xe.isFile()&&
!xe.name().endsWith("package.json")}});case 16:return Uc=We.sent,Uc=Uc.filter(function(xe){return xe.name().endsWith("package.json")}).map(function(xe){return xe.parent()}),We.t1=Ne,We.next=21,Qc.world().filterableListPrompt("Select package directory",[{isListItem:!0,label:"Enter custom package...",value:"custom"}].concat(Cb(Uc.map(function(xe){return xe.url}))),{multiSelect:!1});case 21:We.t2=We.sent.selected;Md=(0,We.t1)(We.t2,1);Ob=Md[0];if("custom"!=Ob){We.next=28;break}We.next=27;return Qc.world().prompt("What is the package directory?",
{requester:Qc,input:xd?xd.address:Fc.baseURL,historyId:"lively.vm-editor-package-load-history",useLastInput:!1});case 27:Ob=We.sent;case 28:if(Ob){We.next=30;break}throw"Canceled";case 30:return zc.address=Ob.replace(/\/$/,""),zc.url=new URL(zc.address+"/"),zc.configFile=id.resource(zc.url).join("package.json").url,We.prev=33,We.t3=JSON,We.next=37,vc.moduleRead(zc.configFile);case 37:We.t4=We.sent;We.t3.parse.call(We.t3,We.t4).name;We.next=45;break;case 41:We.prev=41,We.t5=We["catch"](33),zc.name=
String(zc.url).replace(/\/$/,""),vc.resourceEnsureExistance(zc.configFile,'{\n  "name": "'.concat(zc.name,'",\n  "version": "0.1.0"\n}'));case 45:return We.abrupt("return",id.loadPackage(vc,zc));case 46:case "end":return We.stop()}},kb,null,[[33,41]])}));return sb.apply(this,arguments)}function fa(Kd,vc,Qc){return Db.apply(this,arguments)}function Db(){Db=ad(regeneratorRuntime.mark(function Cc(vc,Qc,kb){var zc,Fc;return regeneratorRuntime.wrap(function(xd){for(;;)switch(xd.prev=xd.next){case 0:return zc=
id.resource(kb).asFile().url,xd.next=3,vc.getPackage(zc);case 3:xd.t0=xd.sent;if(xd.t0){xd.next=8;break}xd.next=7;return vc.getPackageForModule(zc);case 7:xd.t0=xd.sent;case 8:if(Fc=xd.t0){xd.next=11;break}throw Error("Cannot find package for "+zc);case 11:return xd.next=13,vc.reloadPackage(zc);case 13:if(!Qc){xd.next=19;break}xd.next=16;return Qc.updateModuleList();case 16:return xd.next=18,Qc.uiSelect(zc,!1);case 18:return xd.abrupt("return",xd.sent);case 19:case "end":return xd.stop()}},Cc)}));
return Db.apply(this,arguments)}function ab(Kd,vc,Qc,kb){return eb.apply(this,arguments)}function eb(){eb=ad(regeneratorRuntime.mark(function zc(vc,Qc,kb,Cc){var Fc,xd;return regeneratorRuntime.wrap(function(Uc){for(;;)switch(Uc.prev=Uc.next){case 0:return Uc.next=2,vc.getPackage(kb);case 2:return Fc=Uc.sent,Uc.next=5,(Cc||$world).confirm("Unload package ".concat(Fc.name,"?"),{requester:Qc});case 5:if(xd=Uc.sent){Uc.next=8;break}throw"Canceled";case 8:return Uc.next=10,vc.removePackage(kb);case 10:if(!Qc){Uc.next=
15;break}Uc.next=13;return Qc.updateModuleList();case 13:return Uc.next=15,Qc.uiSelect(null);case 15:case "end":return Uc.stop()}},zc)}));return eb.apply(this,arguments)}function kc(Kd,vc,Qc){return Vb.apply(this,arguments)}function Vb(){Vb=ad(regeneratorRuntime.mark(function Cc(vc,Qc,kb){var zc,Fc,xd,Uc,Md;return regeneratorRuntime.wrap(function(Ob){for(;;)switch(Ob.prev=Ob.next){case 0:return zc=Qc.world(),Ob.next=3,vc.getPackage(kb);case 3:if(Fc=Ob.sent){Ob.next=7;break}$world.inform('No package "'.concat(kb,
'" found!'),{requester:Qc});return Ob.abrupt("return");case 7:return Ob.next=9,zc.confirm("Really remove package ".concat(Fc.name,"?"),{requester:Qc});case 9:if(xd=Ob.sent){Ob.next=12;break}throw"Canceled";case 12:return vc.removePackage(kb),Ob.next=15,zc.confirm("Also remove directory ".concat(Fc.name," including ").concat(Fc.modules.length," modules?"));case 15:Uc=Ob.sent;if(!Uc){Ob.next=23;break}Ob.next=19;return zc.confirm("REALLY *remove* directory ".concat(Fc.name,"? No undo possible..."));
case 19:Md=Ob.sent;if(!Md){Ob.next=23;break}Ob.next=23;return vc.resourceRemove(Fc.address);case 23:case "end":return Ob.stop()}},Cc)}));return Vb.apply(this,arguments)}function pb(Kd,vc){return Nb.apply(this,arguments)}function Nb(){Nb=ad(regeneratorRuntime.mark(function kb(vc,Qc){var Cc,zc,Fc,xd,Uc,Md,Ob,Le,We=arguments;return regeneratorRuntime.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return Cc=2<We.length&&void 0!==We[2]?We[2]:$world,xe.next=3,vc.getPackage(Qc);case 3:if(zc=xe.sent){xe.next=
6;break}throw Error("Cannot find package "+Qc);case 6:Fc=[],xd=Sd(zc.modules),xe.prev=8,xd.s();case 10:if((Uc=xd.n()).done){xe.next=38;break}Md=Uc.value;if(Md.name.match(/\.js$/)){xe.next=14;break}return xe.abrupt("continue",36);case 14:return xe.prev=14,xe.t0=vc,xe.t1=Md.name,xe.next=19,vc.moduleRead(Md.name);case 19:return xe.t2=xe.sent,xe.next=22,xe.t0.importsAndExportsOf.call(xe.t0,xe.t1,xe.t2);case 22:Ob=xe.sent;xe.next=29;break;case 25:return xe.prev=25,xe.t3=xe["catch"](14),Cc.logError(Error("Error when getting imports/exports from module ".concat(Md.name,
":\n").concat(xe.t3.stack))),xe.abrupt("continue",36);case 29:Le="".concat(Md.name);if(Ob.imports.length||Ob.exports.length){xe.next=33;break}Le+="\n  does not import / export anything";return xe.abrupt("continue",36);case 33:Ob.imports.length&&(Le+="\n  imports:\n",Le+=id.arr.groupByKey(Ob.imports,"fromModule").mapGroups(function(Fg,Zc){return"from ".concat(Fg,": ")+Zc.map(function(rd){return rd.local||rd.imported?rd.imported&&rd.imported!==rd.local?"".concat(rd.imported," as ").concat(rd.local):
rd.local:"nothing imported"}).join(", ")}).toArray().join("\n").split("\n").map(function(Fg){return"    "+Fg}).join("\n")),Ob.exports.length&&(Le+="\n  exports:\n",Le+=Ob.exports.map(function(Fg){return Fg.local?Fg.local&&Fg.local!==Fg.exported?"".concat(Fg.local," as ").concat(Fg.exported):Fg.exported:"".concat(Fg.exported," from ").concat(Fg.fromModule)}).join(", ").split("\n").map(function(Fg){return"    "+Fg}).join("\n")),Fc.push(Le);case 36:xe.next=10;break;case 38:xe.next=43;break;case 40:xe.prev=
40,xe.t4=xe["catch"](8),xd.e(xe.t4);case 43:return xe.prev=43,xd.f(),xe.finish(43);case 46:return xe.next=48,Cc.execCommand("open text window",{title:"imports and exports of "+Qc,content:Fc.join("\n\n")});case 48:case "end":return xe.stop()}},kb,null,[[8,40,43,46],[14,25]])}));return Nb.apply(this,arguments)}function zb(Kd){return Kd.match(/import.*['"]mocha(-es6)?['"]/)&&Kd.match(/it\(['"]/)}function rb(Kd,vc,Qc){Qc=Qc&&Qc.address;if(Qc&&0===vc.indexOf(Qc))var kb=vc.slice(Qc.length).replace(/^\//,
"");else a:{Qc=Kd.getConfig();if(!Qc||Qc.constructor!==Promise)try{kb=String((new URL(vc)).relativePathFrom(new URL(Kd.getConfig().baseURL)));break a}catch(Cc){}kb=vc}return kb}function Ib(Kd,vc,Qc,kb){return da.apply(this,arguments)}function da(){da=ad(regeneratorRuntime.mark(function zc(vc,Qc,kb,Cc){return regeneratorRuntime.wrap(function(Fc){for(;;)switch(Fc.prev=Fc.next){case 0:return Cc=Object.assign({targetModule:Qc},Cc),Fc.next=3,vc.normalize(Qc);case 3:return Qc=Fc.sent,Fc.next=6,vc.moduleSourceChange(Qc,
kb,Cc);case 6:return Fc.abrupt("return",Qc);case 7:case "end":return Fc.stop()}},zc)}));return da.apply(this,arguments)}function ka(Kd,vc,Qc){return va.apply(this,arguments)}function va(){va=ad(regeneratorRuntime.mark(function Cc(vc,Qc,kb){var zc,Fc,xd=arguments;return regeneratorRuntime.wrap(function(Uc){for(;;)switch(Uc.prev=Uc.next){case 0:return zc=3<xd.length&&void 0!==xd[3]?xd[3]:!1,Fc=4<xd.length&&void 0!==xd[4]?xd[4]:!1,Qc&&Qc.setStatusMessage("Reloading "+kb),Uc.prev=3,Uc.next=6,vc.reloadModule(kb,
{reloadDeps:zc,resetEnv:Fc});case 6:Uc.t0=Qc;if(!Uc.t0){Uc.next=10;break}Uc.next=10;return Qc.updateModuleList();case 10:Qc&&Qc.setStatusMessage("Reloded "+kb);Uc.next=26;break;case 13:Uc.prev=13;Uc.t1=Uc["catch"](3);Uc.prev=15;Uc.t2=Qc;if(!Uc.t2){Uc.next=20;break}Uc.next=20;return Qc.updateEditorWithSourceOf(kb);case 20:Uc.next=24;break;case 22:Uc.prev=22,Uc.t3=Uc["catch"](15);case 24:throw Qc&&Qc.showError(Uc.t1),Uc.t1;case 26:case "end":return Uc.stop()}},Cc,null,[[3,13],[15,22]])}));return va.apply(this,
arguments)}function Fa(Kd,vc,Qc){return M.apply(this,arguments)}function M(){M=ad(regeneratorRuntime.mark(function Cc(vc,Qc,kb){return regeneratorRuntime.wrap(function(zc){for(;;)switch(zc.prev=zc.next){case 0:return zc.next=2,vc.forgetModule(kb,{forgetEnv:!0,forgetDeps:!0});case 2:zc.t0=Qc;if(!zc.t0){zc.next=6;break}zc.next=6;return Qc.updateModuleList();case 6:case "end":return zc.stop()}},Cc)}));return M.apply(this,arguments)}function Aa(Kd,vc,Qc){return wb.apply(this,arguments)}function wb(){wb=
ad(regeneratorRuntime.mark(function Cc(vc,Qc,kb){var zc,Fc,xd;return regeneratorRuntime.wrap(function(Uc){for(;;)switch(Uc.prev=Uc.next){case 0:return Uc.next=2,vc.normalize(kb);case 2:return zc=Uc.sent,Uc.next=5,Qc.world().confirm(["Really remove file:\n",{},zc,{fontStyle:"italic",fontWeight:"bold"}," ?",{}],{requester:Qc,lineWrapping:!1});case 5:if(Fc=Uc.sent){Uc.next=8;break}throw"Canceled";case 8:return Uc.next=10,vc.forgetModule(zc);case 10:return Uc.next=12,vc.resourceRemove(zc);case 12:return Uc.next=
14,vc.getPackageForModule(zc);case 14:return xd=Uc.sent,Uc.abrupt("return",xd);case 16:case "end":return Uc.stop()}},Cc)}));return wb.apply(this,arguments)}function Na(Kd,vc){return hb.apply(this,arguments)}function hb(){hb=ad(regeneratorRuntime.mark(function kb(vc,Qc){var Cc,zc,Fc;return regeneratorRuntime.wrap(function(xd){for(;;)switch(xd.prev=xd.next){case 0:return xd.next=2,ob._createAndLoadModules(vc,[Qc]);case 2:return Cc=xd.sent,zc=ob.arr.compact(Cc.map(function(Uc){return Uc.error})),Fc=
!!zc.length,xd.abrupt("return",Fc);case 6:case "end":return xd.stop()}},kb)}));return hb.apply(this,arguments)}function Bb(Kd,vc,Qc){return ba.apply(this,arguments)}function ba(){ba=ad(regeneratorRuntime.mark(function Cc(vc,Qc,kb){var zc,Fc,xd,Uc,Md;return regeneratorRuntime.wrap(function(Ob){for(;;)switch(Ob.prev=Ob.next){case 0:return Ob.t0=URL,Ob.next=3,vc.getConfig();case 3:Ob.t1=Ob.sent.baseURL;zc=new Ob.t0(Ob.t1);Fc=Qc.world();if(!kb){Ob.next=16;break}Ob.next=9;return vc.getPackage(kb);case 9:Ob.t2=
Ob.sent;if(Ob.t2){Ob.next=14;break}Ob.next=13;return vc.getPackageForModule(kb);case 13:Ob.t2=Ob.sent;case 14:(xd=Ob.t2)&&(zc=new URL(xd.address));case 16:return Ob.next=18,ob._searchForExistingFiles(Qc,String(zc),xd);case 18:Uc=Ob.sent;if(!Uc.includes("[create new module]")){Ob.next=24;break}Ob.next=22;return ob._askForModuleName(vc,kb||String(zc),Fc);case 22:Md=Ob.sent,Uc=[Md];case 24:return Ob.next=26,ob._createAndLoadModules(vc,Uc);case 26:return Ob.abrupt("return",Ob.sent);case 27:case "end":return Ob.stop()}},
Cc)}));return ba.apply(this,arguments)}function dc(){dc=ad(regeneratorRuntime.mark(function Cc(vc,Qc,kb){var zc,Fc;return regeneratorRuntime.wrap(function(xd){for(;;)switch(xd.prev=xd.next){case 0:return xd.next=2,kb.prompt("Enter module name",{input:Qc,historyId:"lively.vm-editor-add-module-name"});case 2:if(Qc=xd.sent){xd.next=5;break}throw"Canceled";case 5:return xd.next=7,vc.normalize(Qc);case 7:return zc=xd.sent,xd.next=10,kb.confirm(["Create module \n",{},zc,{fontStyle:"italic"}," ?",{}],{lineWrapping:!1});
case 10:if(Fc=xd.sent){xd.next=13;break}throw"Canceled";case 13:return xd.abrupt("return",zc);case 14:case "end":return xd.stop()}},Cc)}));return dc.apply(this,arguments)}function la(){la=ad(regeneratorRuntime.mark(function Cc(vc,Qc,kb){return regeneratorRuntime.wrap(function(zc){for(;;)switch(zc.prev=zc.next){case 0:if(!String(Qc).match(/^http/)){zc.next=4;break}return zc.abrupt("return",ob._searchForExistingFilesWeb(vc,Qc,kb));case 4:return zc.abrupt("return",ob._searchForExistingFilesManually(vc,
Qc,kb));case 5:case "end":return zc.stop()}},Cc)}));return la.apply(this,arguments)}function Fb(){Fb=ad(regeneratorRuntime.mark(function Cc(vc,Qc,kb){var zc,Fc;return regeneratorRuntime.wrap(function(xd){for(;;)switch(xd.prev=xd.next){case 0:return xd.next=2,vc.world().multipleChoicePrompt("Add Module",{requester:vc,choices:["Create New Module","Load Existing Module"]});case 2:zc=xd.sent;if("Create New Module"!==zc){xd.next=5;break}return xd.abrupt("return","[create new module]");case 5:if("Load Existing Module"!==
zc){xd.next=11;break}xd.next=8;return vc.world().prompt("URL of module?",{input:Qc,requester:vc,historyId:"lively.vm._searchForExistingFilesManually.url-of-module"});case 8:Fc=xd.sent;if(!Fc){xd.next=11;break}return xd.abrupt("return",[Fc]);case 11:throw"Canceled";case 12:case "end":return xd.stop()}},Cc)}));return Fb.apply(this,arguments)}function vb(){vb=ad(regeneratorRuntime.mark(function Cc(vc,Qc,kb){var zc,Fc,xd,Uc,Md,Ob,Le;return regeneratorRuntime.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return xd=
function(xe){xe.name();return[".git","node_modules",".optimized-loading-cache",".module_cache"].includes(xe.name())||kb&&ob.arr.pluck(kb.modules,"name").includes(xe.url)?!0:!1},(zc=vc.world())&&(Fc=zc.showLoadingIndicatorFor(vc,"Loading existing modules...")),We.next=5,ob.resource(Qc).dirList(5,{exclude:xd});case 5:return We.t0=function(xe){return xe.url},We.next=8,We.sent.map(We.t0);case 8:return Uc=We.sent,Md=[{isListItem:!0,string:"[create new module]",value:"[create new module]"}].concat(Uc.filter(function(xe){return xe.endsWith(".js")}).map(function(xe){return{isListItem:!0,
string:kb&&0==xe.indexOf(kb.address)?kb.name+xe.slice(kb.address.length):xe,value:xe}})),We.next=12,Promise.resolve(Fc&&Fc.remove()).then(function(){return vc.world().filterableListPrompt("What module to load?",Md,Object.assign({filterLabel:"filter: ",multiselect:!0,requester:vc},vc?{extent:vc.bounds().extent().withY(400).subXY(50,0)}:{}))});case 12:if((Ob=We.sent)&&"canceled"!==Ob.status&&Ob.selected.length){We.next=15;break}throw"Canceled";case 15:return Le=Ob.selected||Ob,Array.isArray(Le)||(Le=
[Le]),We.abrupt("return",Le);case 18:case "end":return We.stop()}},Cc)}));return vb.apply(this,arguments)}function Ia(){Ia=ad(regeneratorRuntime.mark(function kb(vc,Qc){var Cc,zc,Fc,xd,Uc;return regeneratorRuntime.wrap(function(Md){for(;;)switch(Md.prev=Md.next){case 0:Array.isArray(Qc)||(Qc=[Qc]),Cc=[],zc=Sd(Qc),Md.prev=3,zc.s();case 5:if((Fc=zc.n()).done){Md.next=34;break}xd=Fc.value;Md.next=9;return vc.forgetModule(xd,{forgetDeps:!1,forgetEnv:!1});case 9:return Md.next=11,vc.resourceEnsureExistance(xd,
'"format esm";\n');case 11:return Uc=Md.sent,Md.t0=ob,Md.next=16,Uc.read();case 16:Md.t1=Md.sent;if(!Md.t0.isTestModule.call(Md.t0,Md.t1)){Md.next=23;break}if(System.global.Mocha&&System.global.chai){Md.next=23;break}Md.next=21;return Dd.import("mocha-es6");case 21:return Md.next=23,ob.promise.waitFor(function(){return!!System.global.Mocha&&!!System.global.chai});case 23:return Md.prev=23,Md.next=26,vc.importModule(xd);case 26:Cc.push({name:xd});Md.next=32;break;case 29:Md.prev=29,Md.t2=Md["catch"](23),
Cc.push({name:xd,error:Md.t2});case 32:Md.next=5;break;case 34:Md.next=39;break;case 36:Md.prev=36,Md.t3=Md["catch"](3),zc.e(Md.t3);case 39:return Md.prev=39,zc.f(),Md.finish(39);case 42:return Md.abrupt("return",Cc);case 43:case "end":return Md.stop()}},kb,null,[[3,36,39,42],[23,29]])}));return Ia.apply(this,arguments)}function xb(Kd,vc){return Rb.apply(this,arguments)}function Rb(){Rb=ad(regeneratorRuntime.mark(function kb(vc,Qc){var Cc,zc,Fc,xd,Uc,Md;return regeneratorRuntime.wrap(function(Ob){for(;;)switch(Ob.prev=
Ob.next){case 0:return Ob.next=2,vc.getPackage(Qc);case 2:if((Cc=Ob.sent)&&Cc.address.match(/^http/)){Ob.next=5;break}throw Error("Cannot load package ".concat(Qc));case 5:return zc=ob.resource(Cc.address),Fc=[],Ob.t0=Sd,Ob.next=10,zc.dirList(5,{exclude:ob.modulesInPackage_defaultExclude});case 10:Ob.t1=Ob.sent;xd=(0,Ob.t0)(Ob.t1);try{for(xd.s();!(Uc=xd.n()).done;)Md=Uc.value.url,Md.match(/\.js$/)&&vc.isModuleLoaded(Md,!0)&&Fc.push(vc.getModule(Md))}catch(Le){xd.e(Le)}finally{xd.f()}return Ob.abrupt("return",
Fc);case 14:case "end":return Ob.stop()}},kb)}));return Rb.apply(this,arguments)}function yc(Kd){Kd||(Kd="local");if(Kd.isSystemInterface)var vc=Kd;else"string"===typeof Kd&&Kd.startsWith("l2l ")&&(Kd={type:"l2l",id:Kd.split(" ")[1]}),"string"!==typeof Kd&&"l2l"===Kd.type&&(vc=Hb.l2lInterfaceFor(Kd.id,Kd.info)),"string"!==typeof Kd&&($world.setStatusMessage("Unknown system interface ".concat(Kd)),Kd="local"),vc||(vc=Kd&&"local"!==Kd?Hb.serverInterfaceFor(Kd):Hb.localInterface);return vc}bd("systemInterfaceNamed",
yc);var id=window.lively.FreezerRuntime.recorderFor("lively-system-interface/commands/packages.js");id.loadPackage=function(Kd,vc){return Xa.apply(this,arguments)};id.interactivelyCreatePackage=Gb;id.interactivelyLoadPackage=ub;id.interactivelyReloadPackage=fa;id.interactivelyUnloadPackage=ab;id.interactivelyRemovePackage=kc;id.showExportsAndImportsOf=pb;id.parseJsonLikeObj=qb;id.arr=se;id.resource=Rc;id.interactivelyCreatePackage=Gb;id.interactivelyLoadPackage=ub;id.interactivelyReloadPackage=fa;
id.interactivelyUnloadPackage=ab;id.interactivelyRemovePackage=kc;id.showExportsAndImportsOf=pb;var ob=window.lively.FreezerRuntime.recorderFor("lively-system-interface/commands/modules.js");ob.isTestModule=zb;ob.shortModuleName=rb;ob.interactivelyChangeModule=Ib;ob.interactivelyReloadModule=ka;ob.interactivelyUnloadModule=Fa;ob.interactivelyRemoveModule=Aa;ob.addModule=Na;ob.interactivelyAddModule=Bb;ob._askForModuleName=function(Kd,vc,Qc){return dc.apply(this,arguments)};ob._searchForExistingFiles=
function(Kd,vc,Qc){return la.apply(this,arguments)};ob._searchForExistingFilesManually=function(Kd,vc,Qc){return Fb.apply(this,arguments)};ob._searchForExistingFilesWeb=function(Kd,vc,Qc){return vb.apply(this,arguments)};ob._createAndLoadModules=function(Kd,vc){return Ia.apply(this,arguments)};ob.modulesInPackage_defaultExclude=function(Kd){return[".git","node_modules",".optimized-loading-cache",".module_cache"].includes(Kd.name())?!0:!1};ob.modulesInPackage=xb;ob.obj=ve;ob.promise=uc;ob.arr=se;ob.resource=
Rc;ob.isTestModule=zb;ob.shortModuleName=rb;ob.interactivelyChangeModule=Ib;ob.interactivelyReloadModule=ka;ob.interactivelyUnloadModule=Fa;ob.interactivelyRemoveModule=Aa;ob.addModule=Na;ob.interactivelyAddModule=Bb;ob.modulesInPackage=xb;var Pb=window.lively.FreezerRuntime.recorderFor("lively-system-interface/interfaces/local-system.js");Pb.obj=ve;Pb.string=dd;Pb.arr=se;Pb.resource=Rc;Pb.createFiles=vd;Pb.ast=Ed;Pb.modules=lc;Pb.vm=fe;Pb.parseJsonLikeObj=qb;Pb.AbstractCoreInterface=ic;Pb.classToFunctionTransform=
db;var tb=function(Kd){var vc=window.lively.FreezerRuntime.recorderFor("lively-system-interface/interfaces/local-system.js"),Qc=vc.hasOwnProperty("LocalCoreInterface")&&"function"===typeof vc.LocalCoreInterface?vc.LocalCoreInterface:vc.LocalCoreInterface=function(kb){if(!kb||!kb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return jc(Qc,Kd,[{key:"name",get:function(){return"local"}},{key:"dynamicCompletionsForPrefix",value:function(){var kb=
ad(regeneratorRuntime.mark(function Uc(zc,Fc,xd){var Md;return regeneratorRuntime.wrap(function(Ob){for(;;)switch(Ob.prev=Ob.next){case 0:return Ob.next=2,Pb.vm.completions.getCompletions(function(Le){return Pb.vm.runEval(Le.replace("return ",""),Object.assign({targetModule:zc,classTransform:Pb.classToFunctionTransform},xd))},Fc);case 2:Md=Ob.sent;if(!Md.isError){Ob.next=5;break}throw Md.value;case 5:return Ob.abrupt("return",{completions:Md.completions,prefix:Md.startLetters});case 6:case "end":return Ob.stop()}},
Uc)}));return function(zc,Fc,xd){return kb.apply(this,arguments)}}()},{key:"runEval",value:function(kb,Cc){return Pb.vm.runEval(kb,Object.assign({classTransform:Pb.classToFunctionTransform},Cc))}},{key:"resourceExists",value:function(kb){return Pb.resource(kb).exists()}},{key:"resourceEnsureExistance",value:function(kb,Cc){return Pb.resource(kb).ensureExistance(Cc)}},{key:"resourceMkdir",value:function(kb){return Pb.resource(kb).mkdir()}},{key:"resourceRead",value:function(kb){return Pb.resource(kb).read()}},
{key:"resourceRemove",value:function(kb){return Pb.resource(kb).remove()}},{key:"resourceWrite",value:function(kb,Cc){return Pb.resource(kb).write(Cc)}},{key:"resourceCreateFiles",value:function(kb,Cc){return Pb.createFiles(kb,Cc)}},{key:"resourceDirList",value:function(kb,Cc,zc){return Pb.resource(kb).dirList(Cc,zc)}},{key:"normalizeSync",value:function(kb,Cc,zc){return System.decanonicalize(kb,Cc,zc)}},{key:"normalize",value:function(kb,Cc,zc){return System.normalize(kb,Cc,zc)}},{key:"printSystemConfig",
value:function(){return Pb.modules.printSystemConfig()}},{key:"getConfig",value:function(){return System.getConfig()}},{key:"setConfig",value:function(kb){Pb.modules.System.config(kb)}},{key:"getPackages",value:function(kb){kb=Object.assign({},kb).excluded;kb=void 0===kb?[]:kb;var Cc=kb.filter(function(Fc){return"string"===typeof Fc}),zc=kb.filter(function(Fc){return"function"===typeof Fc});Cc=Cc.concat(Cc.map(function(Fc){return System.decanonicalize(Fc.replace(/\/?$/,"/")).replace(/\/$/,"")}));
return Pb.modules.getPackages().filter(function(Fc){return!Cc.includes(Fc.url)&&!zc.some(function(xd){return xd(Fc.url)})})}},{key:"registerPackage",value:function(){var kb=ad(regeneratorRuntime.mark(function Fc(zc){return regeneratorRuntime.wrap(function(xd){for(;;)switch(xd.prev=xd.next){case 0:return xd.abrupt("return",Pb.modules.registerPackage(zc));case 1:case "end":return xd.stop()}},Fc)}));return function(zc){return kb.apply(this,arguments)}}()},{key:"importPackage",value:function(){var kb=
ad(regeneratorRuntime.mark(function Fc(zc){return regeneratorRuntime.wrap(function(xd){for(;;)switch(xd.prev=xd.next){case 0:return xd.abrupt("return",Pb.modules.importPackage(zc));case 1:case "end":return xd.stop()}},Fc)}));return function(zc){return kb.apply(this,arguments)}}()},{key:"removePackage",value:function(){var kb=ad(regeneratorRuntime.mark(function Fc(zc){return regeneratorRuntime.wrap(function(xd){for(;;)switch(xd.prev=xd.next){case 0:return xd.abrupt("return",Pb.modules.removePackage(zc));
case 1:case "end":return xd.stop()}},Fc)}));return function(zc){return kb.apply(this,arguments)}}()},{key:"reloadPackage",value:function(){var kb=ad(regeneratorRuntime.mark(function xd(zc,Fc){return regeneratorRuntime.wrap(function(Uc){for(;;)switch(Uc.prev=Uc.next){case 0:return Uc.abrupt("return",Pb.modules.reloadPackage(zc,Fc));case 1:case "end":return Uc.stop()}},xd)}));return function(zc,Fc){return kb.apply(this,arguments)}}()},{key:"packageConfChange",value:function(){var kb=ad(regeneratorRuntime.mark(function xd(zc,
Fc){var Uc,Md,Ob,Le;return regeneratorRuntime.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return Uc=Pb.modules.System,Md=Pb.parseJsonLikeObj(zc),Ob=JSON.stringify(Md,null,2),We.next=5,Pb.modules.module(Fc).changeSource(Ob,{doEval:!1});case 5:return Uc.set(Fc,Uc.newModule(Md)),We.next=8,this.getPackageForModule(Fc);case 8:(Le=We.sent)&&Pb.modules.applyPackageConfig(Md,Le.address);case 10:case "end":return We.stop()}},xd,this)}));return function(zc,Fc){return kb.apply(this,arguments)}}()},
{key:"resourcesOfPackage",value:function(){var kb=ad(regeneratorRuntime.mark(function Fc(zc){var xd,Uc,Md,Ob=arguments;return regeneratorRuntime.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return xd=1<Ob.length&&void 0!==Ob[1]?Ob[1]:[".git","node_modules",".module_cache"],Le.prev=1,Uc=zc.address?zc.address:zc,Md=Pb.modules.getPackage(Uc),Le.next=6,Md.resources(void 0,xd);case 6:return Le.t0=function(We){return Object.assign(We,{"package":We["package"].url})},Le.abrupt("return",Le.sent.map(Le.t0));
case 10:return Le.prev=10,Le.t1=Le["catch"](1),console.warn("resourcesOfPackage error for ".concat(zc,": ").concat(Le.t1)),Le.abrupt("return",[]);case 14:case "end":return Le.stop()}},Fc,null,[[1,10]])}));return function(zc){return kb.apply(this,arguments)}}()},{key:"getPackageForModule",value:function(kb){return(kb=Pb.modules.getPackageOfModule(kb))?kb.asSpec():kb}},{key:"isModuleLoaded",value:function(kb,Cc){return Pb.modules.isModuleLoaded(kb,Cc)}},{key:"doesModuleExist",value:function(kb,Cc){return Pb.modules.isModuleLoaded(kb,
Cc)}},{key:"getModule",value:function(kb){return Pb.modules.module(kb)}},{key:"importModule",value:function(kb){return Pb.modules.System["import"](kb)}},{key:"forgetModule",value:function(kb,Cc){return Pb.modules.module(kb).unload(Cc)}},{key:"reloadModule",value:function(kb,Cc){return Pb.modules.module(kb).reload(Cc)}},{key:"moduleFormat",value:function(kb){return Pb.modules.module(kb).format()}},{key:"moduleRead",value:function(kb){return Pb.modules.module(kb).source()}},{key:"moduleSourceChange",
value:function(kb,Cc,zc){return Pb.modules.module(kb).changeSource(Cc,zc)}},{key:"keyValueListOfVariablesInModule",value:function(){var kb=ad(regeneratorRuntime.mark(function xd(zc,Fc){var Uc,Md,Ob,Le,We,xe,Fg,Zc;return regeneratorRuntime.wrap(function(rd){for(;;)switch(rd.prev=rd.next){case 0:if(Fc){rd.next=4;break}rd.next=3;return this.resourceRead(zc);case 3:Fc=rd.sent;case 4:return Uc="string"===typeof Fc?Pb.ast.parse(Fc):Fc,Md=this.normalizeSync(zc),this.moduleFormat(Md),Ob=Pb.modules.module(Md).env().recorder,
rd.next=10,this.importsAndExportsOf(Md,Uc);case 10:return Le=rd.sent,We=Pb.ast.query.topLevelDeclsAndRefs(Uc),xe=Pb.arr.sortByKey(Pb.ast.query.declarationsOfScope(We.scope,!0),"start"),Fg=Pb.arr.pluck(We.scope.importSpecifiers,"name"),Zc=0,rd.abrupt("return",xe.map(function(ti){var dg=ti.name.length,Of=Le.exports.find(function(wf){return wf.local===ti.name}),mg=Fg.includes(ti.name);Of&&(dg+=9);mg&&(dg+=9);Zc=Math.max(Zc,dg);return{isExport:Of,isImport:mg,name:ti.name,value:Ob[ti.name],node:ti,printedName:ti.name+
(Of?" [export]":"")+(mg?" [import]":""),printedValue:Pb.obj.inspect(Ob[ti.name],{maxDepth:1}).replace(/\n/g,"")}}).map(function(ti){return{isListItem:!0,value:ti,string:ti.printedName+Pb.string.indent(" = "+ti.printedValue," ",Zc-ti.printedName.length)}}));case 16:case "end":return rd.stop()}},xd,this)}));return function(zc,Fc){return kb.apply(this,arguments)}}()},{key:"importsAndExportsOf",value:function(){var kb=ad(regeneratorRuntime.mark(function xd(zc,Fc){return regeneratorRuntime.wrap(function(Uc){for(;;)switch(Uc.prev=
Uc.next){case 0:return Uc.next=2,Pb.modules.module(zc).imports(Fc);case 2:return Uc.t0=Uc.sent,Uc.next=5,Pb.modules.module(zc).exports(Fc);case 5:return Uc.t1=Uc.sent,Uc.abrupt("return",{imports:Uc.t0,exports:Uc.t1});case 7:case "end":return Uc.stop()}},xd)}));return function(zc,Fc){return kb.apply(this,arguments)}}()},{key:"exportsOfModules",value:function(kb){return Pb.modules.ExportLookup.run(System,kb)}},{key:"searchInPackage",value:function(kb,Cc,zc){return Pb.modules.getPackage(kb).search(Cc,
zc)}},{key:"runMochaTests",value:function(){var kb=ad(regeneratorRuntime.mark(function Md(zc,Fc,xd,Uc){var Ob,Le;return regeneratorRuntime.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return We.next=2,Dd.import("./mocha-tests-844b5825.js");case 2:return Ob=We.sent,Le=Ob.runMochaTests,We.abrupt("return",Le(zc,Fc,xd,Uc));case 5:case "end":return We.stop()}},Md)}));return function(zc,Fc,xd,Uc){return kb.apply(this,arguments)}}()},{key:"loadMochaTestFile",value:function(){var kb=ad(regeneratorRuntime.mark(function xd(zc,
Fc){var Uc,Md;return regeneratorRuntime.wrap(function(Ob){for(;;)switch(Ob.prev=Ob.next){case 0:return Ob.next=2,Dd.import("./mocha-tests-844b5825.js");case 2:return Uc=Ob.sent,Md=Uc.loadMochaTestFile,Ob.abrupt("return",Md(zc,Fc));case 5:case "end":return Ob.stop()}},xd)}));return function(zc,Fc){return kb.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LocalCoreInterface"}}],vc,{pathInPackage:function(){return"./interfaces/local-system.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively-system-interface",version:"0.2.1"}}},{start:409,end:8258})}(Pb.AbstractCoreInterface);Pb.LocalCoreInterface=tb;Pb.LocalCoreInterface=tb;var xc=window.lively.FreezerRuntime.recorderFor("lively-system-interface/interfaces/http-interface.js");xc.evalStrategies=Od;xc.RemoteCoreInterface=Wb;var Pc=function(Kd){var vc=window.lively.FreezerRuntime.recorderFor("lively-system-interface/interfaces/http-interface.js"),
Qc=vc.hasOwnProperty("HTTPCoreInterface")&&"function"===typeof vc.HTTPCoreInterface?vc.HTTPCoreInterface:vc.HTTPCoreInterface=function(kb){if(!kb||!kb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return jc(Qc,Kd,[{key:Symbol["for"]("lively-instance-initialize"),value:function(kb){jc._get(Object.getPrototypeOf(Qc.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this);this.currentEval=null;this.url=kb;this.server=
new xc.evalStrategies.HttpEvalStrategy(kb)}},{key:"name",get:function(){return this.url}},{key:"description",get:function(){return this.url.replace(/^https?:\/\//,"")}},{key:"runEval",value:function(kb,Cc){return this.server.runEval(kb,Cc)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"HTTPCoreInterface"}}],vc,{pathInPackage:function(){return"./interfaces/http-interface.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively-system-interface",version:"0.2.1"}}},{start:105,end:508})}(xc.RemoteCoreInterface);xc.HTTPCoreInterface=Pc;xc.HTTPCoreInterface=Pc;var nd=window.lively.FreezerRuntime.recorderFor("lively-system-interface/interfaces/l2l-interface.js");nd.evalStrategies=Od;nd.RemoteCoreInterface=Wb;var Id=function(Kd){var vc=window.lively.FreezerRuntime.recorderFor("lively-system-interface/interfaces/l2l-interface.js"),Qc=vc.hasOwnProperty("L2LCoreInterface")&&"function"===typeof vc.L2LCoreInterface?
vc.L2LCoreInterface:vc.L2LCoreInterface=function(kb){if(!kb||!kb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return jc(Qc,Kd,[{key:Symbol["for"]("lively-instance-initialize"),value:function(kb,Cc){jc._get(Object.getPrototypeOf(Qc.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this);this.targetId=kb;this.peer=Cc}},{key:"name",get:function(){return"l2l ".concat(this.targetId)}},{key:"description",get:function(){var kb=
this.peer,Cc=this.targetId.slice(0,5);Cc="l2l ".concat(Cc);if(kb){var zc=kb.location,Fc=kb.type,xd=kb.user;kb=kb.world;Fc&&(Cc+=", ".concat(Fc));zc&&(Cc+=", ".concat(zc.replace(/^https?:\/\//,"")).concat(kb?"/"+kb:""));xd&&(Cc+=", ".concat(xd.name))}return Cc}},{key:"client",get:function(){return(lively.modules.module("lively.2lively/client.js").get()||{"default":lively.l2l.L2LClient})["default"]["default"]()}},{key:"isConnected",value:function(){var kb=ad(regeneratorRuntime.mark(function zc(){var Fc,
xd,Uc,Md;return regeneratorRuntime.wrap(function(Ob){for(;;)switch(Ob.prev=Ob.next){case 0:return Fc=this.client,xd=this.targetId,Ob.next=3,Fc.sendToAndWait(Fc.trackerId,"getClients",{});case 3:return Uc=Ob.sent,Md=Uc.data,Ob.abrupt("return",Md.some(function(Le){Le=Ne(Le,1)[0];return xd===Le}));case 6:case "end":return Ob.stop()}},zc,this)}));return function(){return kb.apply(this,arguments)}}()},{key:"runEval",value:function(){var kb=ad(regeneratorRuntime.mark(function xd(zc,Fc){var Uc,Md;return regeneratorRuntime.wrap(function(Ob){for(;;)switch(Ob.prev=
Ob.next){case 0:if(Uc=this.client){Ob.next=3;break}throw Error("No lively.2lively default client available!");case 3:return Md=new nd.evalStrategies.L2LEvalStrategy(Uc,this.targetId),Ob.abrupt("return",Md.runEval(zc,Fc));case 5:case "end":return Ob.stop()}},xd,this)}));return function(zc,Fc){return kb.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"L2LCoreInterface"}}],vc,{pathInPackage:function(){return"./interfaces/l2l-interface.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively-system-interface",version:"0.2.1"}}},{start:105,end:1520})}(nd.RemoteCoreInterface);nd.L2LCoreInterface=Id;nd.L2LCoreInterface=Id;var Hb=window.lively.FreezerRuntime.recorderFor("lively-system-interface/index.js");Hb.systemInterfaceNamed=yc;Hb.interactivelyCreatePackage=Gb;Hb.interactivelyLoadPackage=ub;Hb.interactivelyReloadPackage=fa;Hb.interactivelyUnloadPackage=ab;Hb.interactivelyRemovePackage=
kc;Hb.showExportsAndImportsOf=pb;Hb.shortModuleName=rb;Hb.addModule=Na;Hb.interactivelyChangeModule=Ib;Hb.interactivelyReloadModule=ka;Hb.interactivelyUnloadModule=Fa;Hb.interactivelyRemoveModule=Aa;Hb.interactivelyAddModule=Bb;Hb.modulesInPackage=xb;Hb.LocalCoreInterface=tb;Hb.HTTPCoreInterface=Pc;Hb.L2LCoreInterface=Id;tb=bd("Interface",function(Kd){var vc=window.lively.FreezerRuntime.recorderFor("lively-system-interface/index.js"),Qc=vc.hasOwnProperty("Interface")&&"function"===typeof vc.Interface?
vc.Interface:vc.Interface=function(kb){if(!kb||!kb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return jc(Qc,Kd,[{key:Symbol["for"]("lively-instance-initialize"),value:function(kb){this.coreInterface=kb}},{key:"isSystemInterface",get:function(){return!0}},{key:"name",get:function(){return this.coreInterface.name}},{key:"dynamicCompletionsForPrefix",value:function(kb,Cc,zc){return this.coreInterface.dynamicCompletionsForPrefix(kb,
Cc,zc)}},{key:"runEval",value:function(kb,Cc){return this.coreInterface.runEval(kb,Cc)}},{key:"printSystemConfig",value:function(kb,Cc,zc){return this.coreInterface.printSystemConfig(kb,Cc,zc)}},{key:"getConfig",value:function(kb,Cc,zc){return this.coreInterface.getConfig(kb,Cc,zc)}},{key:"getPackages",value:function(kb){return this.coreInterface.getPackages(kb)}},{key:"getModules",value:function(kb,Cc,zc){return this.coreInterface.getModules(kb,Cc,zc)}},{key:"getModule",value:function(kb,Cc,zc){return this.coreInterface.getModule(kb,
Cc,zc)}},{key:"getPackage",value:function(kb,Cc,zc){return this.coreInterface.getPackage(kb,Cc,zc)}},{key:"getPackageForModule",value:function(kb,Cc,zc){return this.coreInterface.getPackageForModule(kb,Cc,zc)}},{key:"resourcesOfPackage",value:function(kb,Cc){return this.coreInterface.resourcesOfPackage(kb,Cc)}},{key:"systemConfChange",value:function(kb,Cc,zc){return this.coreInterface.systemConfChange(kb,Cc,zc)}},{key:"registerPackage",value:function(kb){return this.coreInterface.registerPackage(kb)}},
{key:"importPackage",value:function(kb){return this.coreInterface.importPackage(kb)}},{key:"removePackage",value:function(kb){return this.coreInterface.removePackage(kb)}},{key:"reloadPackage",value:function(kb){return this.coreInterface.reloadPackage(kb)}},{key:"packageConfChange",value:function(kb,Cc){return this.coreInterface.packageConfChange(kb,Cc)}},{key:"keyValueListOfVariablesInModule",value:function(kb,Cc){return this.coreInterface.keyValueListOfVariablesInModule(kb,Cc)}},{key:"interactivelyCreatePackage",
value:function(kb){return Hb.interactivelyCreatePackage(this.coreInterface,kb)}},{key:"interactivelyLoadPackage",value:function(kb,Cc){return Hb.interactivelyLoadPackage(this.coreInterface,kb,Cc)}},{key:"interactivelyReloadPackage",value:function(kb,Cc){return Hb.interactivelyReloadPackage(this.coreInterface,kb,Cc)}},{key:"interactivelyUnloadPackage",value:function(kb,Cc,zc){return Hb.interactivelyUnloadPackage(this.coreInterface,kb,Cc,zc)}},{key:"interactivelyRemovePackage",value:function(kb,Cc){return Hb.interactivelyRemovePackage(this.coreInterface,
kb,Cc)}},{key:"isModuleLoaded",value:function(kb,Cc){return this.coreInterface.isModuleLoaded(kb,Cc)}},{key:"doesModuleExist",value:function(kb,Cc){return this.coreInterface.doesModuleExist(kb,Cc)}},{key:"createModule",value:function(kb){return Hb.addModule(this.coreInterface,kb)}},{key:"importModule",value:function(kb){return this.coreInterface.importModule(kb)}},{key:"forgetModule",value:function(kb,Cc){return this.coreInterface.forgetModule(kb,Cc)}},{key:"reloadModule",value:function(kb,Cc){return this.coreInterface.reloadModule(kb,
Cc)}},{key:"moduleFormat",value:function(kb){return this.coreInterface.moduleFormat(kb)}},{key:"moduleRead",value:function(kb){return this.coreInterface.moduleRead(kb)}},{key:"moduleWrite",value:function(kb,Cc){return this.coreInterface.moduleWrite(kb,Cc)}},{key:"getModulesInPackage",value:function(kb){return Hb.modulesInPackage(this.coreInterface,kb)}},{key:"shortModuleName",value:function(kb,Cc){return Hb.shortModuleName(this.coreInterface,kb,Cc)}},{key:"interactivelyChangeModule",value:function(kb,
Cc,zc){return Hb.interactivelyChangeModule(this.coreInterface,kb,Cc,zc)}},{key:"interactivelyReloadModule",value:function(kb,Cc){return Hb.interactivelyReloadModule(this.coreInterface,kb,Cc)}},{key:"interactivelyUnloadModule",value:function(kb,Cc){return Hb.interactivelyUnloadModule(this.coreInterface,kb,Cc)}},{key:"interactivelyRemoveModule",value:function(kb,Cc){return Hb.interactivelyRemoveModule(this.coreInterface,kb,Cc)}},{key:"interactivelyAddModule",value:function(kb,Cc){return Hb.interactivelyAddModule(this.coreInterface,
kb,Cc)}},{key:"showExportsAndImportsOf",value:function(kb,Cc){return Hb.showExportsAndImportsOf(this.coreInterface,kb,Cc)}},{key:"exportsOfModules",value:function(kb){return this.coreInterface.exportsOfModules(kb)}},{key:"searchInPackage",value:function(kb,Cc,zc){return this.coreInterface.searchInPackage(kb,Cc,zc)}},{key:"searchInAllPackages",value:function(){var kb=ad(regeneratorRuntime.mark(function Fc(zc){var xd,Uc,Md,Ob,Le,We,xe,Fg=arguments;return regeneratorRuntime.wrap(function(Zc){for(;;)switch(Zc.prev=
Zc.next){case 0:return xd=1<Fg.length&&void 0!==Fg[1]?Fg[1]:{},(Uc=xd.progress)&&Uc.step("Fetching Packages...",0),Zc.next=5,this.coreInterface.getPackages({excluded:xd.excludedPackages});case 5:Md=Zc.sent,Ob=[],Uc&&Uc.step("Fetching Packages...",.1),Le=0;case 9:if(!(Le<Md.length)){Zc.next=27;break}if((We=Md[Le].url)&&"no group"!==We){Zc.next=13;break}return Zc.abrupt("continue",24);case 13:return Uc&&Uc.step(We.replace(System.baseURL,"").slice(0,20),.1+Le/Md.length*.9),Zc.prev=14,Zc.next=17,this.coreInterface.searchInPackage(We,
zc,xd);case 17:xe=Zc.sent;Ob=Ob.concat(xe);Zc.next=24;break;case 21:Zc.prev=21,Zc.t0=Zc["catch"](14),console.error("Error searching in package ".concat(We,":\n").concat(Zc.t0.stack));case 24:Le++;Zc.next=9;break;case 27:return Zc.abrupt("return",Ob);case 28:case "end":return Zc.stop()}},Fc,this,[[14,21]])}));return function(zc){return kb.apply(this,arguments)}}()},{key:"loadMochaTestFile",value:function(kb,Cc){return this.coreInterface.loadMochaTestFile(kb,Cc)}},{key:"runMochaTests",value:function(kb,
Cc,zc,Fc){return this.coreInterface.runMochaTests(kb,Cc,zc,Fc)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Interface"}}],vc,{pathInPackage:function(){return"./index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively-system-interface",version:"0.2.1"}}},{start:650,end:6450})}(void 0));Hb.Interface=tb;Hb.Interface=tb;Hb.systemInterfaceNamed=
yc;tb=bd("localInterface",new Hb.Interface(new Hb.LocalCoreInterface));Hb.localInterface=tb;Hb.localInterface=tb;Hb.httpInterfaces={};tb=bd("serverInterfaceFor",function(Kd){return Hb.httpInterfaces[Kd]||(Hb.httpInterfaces[Kd]=new Hb.Interface(new Hb.HTTPCoreInterface(Kd)))});Hb.serverInterfaceFor=tb;Hb.serverInterfaceFor=tb;Hb.l2lInterfaces={};tb=bd("l2lInterfaceFor",function(Kd,vc){return Hb.l2lInterfaces[Kd]||(Hb.l2lInterfaces[Kd]=new Hb.Interface(new Hb.L2LCoreInterface(Kd,vc)))});Hb.l2lInterfaceFor=
tb;Hb.l2lInterfaceFor=tb}}});