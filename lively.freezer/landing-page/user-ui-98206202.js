System.register("./__rootModule___commonjs-entry-51a55f66.js ./index-61952933.js ./object-classes-06d7e61a.js @babel/plugin-syntax-import-meta ./loading-indicator.cp-98e470a2.js ./tooltips.cp-3c41b378.js ./index-616023be.js".split(" "),function(bd,Dd){var se,Rc,ad,Ne,Cb,Sd,ve,uc,dd,vd,Ed,fe,jc,Od,qb,ic,Wb,lc,db,Xa,Gb,sc,ub,sb,fa,Db,ab,eb,kc;return{setters:[function(Vb){se=Vb.n;Rc=Vb.ar;ad=Vb.a;Ne=Vb.s;Cb=Vb.t;Sd=Vb.k;ve=Vb.b;uc=Vb.a9;dd=Vb.C;vd=Vb.d;Ed=Vb.aq;fe=Vb.aG;jc=Vb.af;Od=Vb.e;qb=Vb.ae;ic=
Vb.f;Wb=Vb.F;lc=Vb.M;db=Vb.p;Xa=Vb.aI;Gb=Vb.av;sc=Vb.R;ub=Vb.aH;sb=Vb.aJ;fa=Vb.i;Db=Vb._;ab=Vb.m},function(Vb){eb=Vb.a},function(Vb){kc=Vb["default"]},function(){},function(){},function(){},function(){}],execute:function(){function Vb(){Vb=Db(regeneratorRuntime.mark(function ka(Ib,da){var va,Fa,M,Aa;return regeneratorRuntime.wrap(function(wb){for(;;)switch(wb.prev=wb.next){case 0:return va=zb.morph({type:"text",textAlign:"center",textString:da,fill:null,padding:zb.Rectangle.inset(10),fontSize:30,
fontColor:"white",fontWeight:"bold",readOnly:!0,grabbable:!1}),Fa=Math.max(Ib.width+40,va.width),M=Math.max(120,va.height),Aa=Ib.addMorph({extent:zb.pt(Fa,M),border:{radius:8},name:"notification",center:Ib.innerBounds().center(),origin:zb.pt(Fa/2,M/2),fill:zb.Color.gray,scale:.1,grabbable:!1,submorphs:[va]}),Aa.submorphs[0].center=Aa.innerBounds().center().subPt(zb.pt(Fa/2,M/2)),wb.next=7,Aa.animate({scale:1,duration:400});case 7:return wb.next=9,zb.promise.delay(800);case 9:return wb.next=11,Aa.animate({opacity:0,
duration:400});case 11:Aa.remove();case 12:case "end":return wb.stop()}},ka)}));return Vb.apply(this,arguments)}var pb={},Nb=window.lively.FreezerRuntime.recorderFor("https://apis.google.com/js/platform.js");Nb.commonjsHelpers=se;Nb.platform=pb;(function(){function rb(Bc,Gc){if(Error.captureStackTrace)Error.captureStackTrace(this,rb);else{var ed=Error().stack;ed&&(this.stack=ed)}Bc&&(this.message=String(Bc));void 0!==Gc&&(this.cause=Gc)}function Ib(Bc,Gc){Bc=Bc.split("%s");for(var ed="",Nc=Bc.length-
1,Hc=0;Hc<Nc;Hc++)ed+=Bc[Hc]+(Hc<Gc.length?Gc[Hc]:"%s");rb.call(this,ed+Bc[Nc])}function da(Bc,Gc,ed,Nc){var Hc="Assertion failed";if(ed){Hc+=": "+ed;var Jd=Nc}else Bc&&(Hc+=": "+Bc,Jd=Gc);throw new Ib(""+Hc,Jd||[]);}function ka(Bc){var Gc=Bc.length;if(0<Gc){for(var ed=Array(Gc),Nc=0;Nc<Gc;Nc++)ed[Nc]=Bc[Nc];return ed}return[]}function va(Bc,Gc){for(var ed in Bc)Gc.call(void 0,Bc[ed],ed,Bc)}function Fa(Bc){if(0!==Bc.indexOf("GCSC"))return null;var Gc={X:!1};Bc=Bc.substr(4);if(!Bc)return Gc;var ed=
Bc.charAt(0);Bc=Bc.substr(1);var Nc=Bc.lastIndexOf("_");if(-1==Nc)return Gc;var Hc=In(Bc.substr(Nc+1));if(null==Hc)return Gc;Bc=Bc.substring(0,Nc);if("_"!==Bc.charAt(0))return Gc;Nc="E"===ed&&Hc.l;return!Nc&&("U"!==ed||Hc.l)||Nc&&!wp?Gc:{X:!0,l:Nc,na:Bc.substr(1),domain:Hc.domain,o:Hc.o}}var M=function(Bc){var Gc=0;return function(){return Gc<Bc.length?{done:!1,value:Bc[Gc++]}:{done:!0}}},Aa="function"==typeof Object.defineProperties?Object.defineProperty:function(Bc,Gc,ed){if(Bc==Array.prototype||
Bc==Object.prototype)return Bc;Bc[Gc]=ed.value;return Bc},wb=function(Bc){Bc=["object"==("undefined"===typeof globalThis?"undefined":Rc(globalThis))&&globalThis,Bc,"object"==("undefined"===typeof window?"undefined":Rc(window))&&window,"object"==("undefined"===typeof self?"undefined":Rc(self))&&self,"object"==Rc(Nb.commonjsHelpers.commonjsGlobal)&&Nb.commonjsHelpers.commonjsGlobal];for(var Gc=0;Gc<Bc.length;++Gc){var ed=Bc[Gc];if(ed&&ed.Math==Math)return ed}throw Error("Cannot find global object");
}(this),Na=function(Bc,Gc){if(Gc)a:{var ed=wb;Bc=Bc.split(".");for(var Nc=0;Nc<Bc.length-1;Nc++){var Hc=Bc[Nc];if(!(Hc in ed))break a;ed=ed[Hc]}Bc=Bc[Bc.length-1];Nc=ed[Bc];Gc=Gc(Nc);Gc!=Nc&&null!=Gc&&Aa(ed,Bc,{configurable:!0,writable:!0,value:Gc})}};Na("Symbol",function(Bc){if(Bc)return Bc;var Gc=function(Hc,Jd){this.da=Hc;Aa(this,"description",{configurable:!0,writable:!0,value:Jd})};Gc.prototype.toString=function(){return this.da};var ed="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",Nc=0;return function De(Jd){if(this instanceof
De)throw new TypeError("Symbol is not a constructor");return new Gc(ed+(Jd||"")+"_"+Nc++,Jd)}});Na("Symbol.iterator",function(Bc){if(Bc)return Bc;Bc=Symbol("Symbol.iterator");for(var Gc="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),ed=0;ed<Gc.length;ed++){var Nc=wb[Gc[ed]];"function"===typeof Nc&&"function"!=typeof Nc.prototype[Bc]&&Aa(Nc.prototype,Bc,{configurable:!0,writable:!0,value:function(){return hb(M(this))}})}return Bc});
var hb=function(Bc){Bc={next:Bc};Bc[Symbol.iterator]=function(){return this};return Bc},Bb=function(Bc,Gc,ed){if(null==Bc)throw new TypeError("The 'this' value for String.prototype."+ed+" must not be null or undefined");if(Gc instanceof RegExp)throw new TypeError("First argument to String.prototype."+ed+" must not be a regular expression");return Bc+""};Na("String.prototype.endsWith",function(Bc){return Bc?Bc:function(Gc,ed){var Nc=Bb(this,Gc,"endsWith");Gc+="";void 0===ed&&(ed=Nc.length);ed=Math.max(0,
Math.min(ed|0,Nc.length));for(var Hc=Gc.length;0<Hc&&0<ed;)if(Nc[--ed]!=Gc[--Hc])return!1;return 0>=Hc}});var ba=function(Bc,Gc){Bc instanceof String&&(Bc+="");var ed=0,Nc=!1,Hc={next:function(){if(!Nc&&ed<Bc.length){var Jd=ed++;return{value:Gc(Jd,Bc[Jd]),done:!1}}Nc=!0;return{done:!0,value:void 0}}};Hc[Symbol.iterator]=function(){return Hc};return Hc};Na("Array.prototype.keys",function(Bc){return Bc?Bc:function(){return ba(this,function(Gc){return Gc})}});Na("Object.is",function(Bc){return Bc?Bc:
function(Gc,ed){return Gc===ed?0!==Gc||1/Gc===1/ed:Gc!==Gc&&ed!==ed}});Na("Array.prototype.includes",function(Bc){return Bc?Bc:function(Gc,ed){var Nc=this;Nc instanceof String&&(Nc=String(Nc));var Hc=Nc.length;ed=ed||0;for(0>ed&&(ed=Math.max(ed+Hc,0));ed<Hc;ed++){var Jd=Nc[ed];if(Jd===Gc||Object.is(Jd,Gc))return!0}return!1}});Na("String.prototype.includes",function(Bc){return Bc?Bc:function(Gc,ed){return-1!==Bb(this,Gc,"includes").indexOf(Gc,ed||0)}});window.gapi=window.gapi||{};window.gapi.ma=(new Date).getTime();
var dc=this||self,la=function(Bc){var Gc=Rc(Bc);return"object"!=Gc?Gc:Bc?Array.isArray(Bc)?"array":Gc:"null"},Fb=function(Bc){var Gc=la(Bc);return"array"==Gc||"object"==Gc&&"number"==typeof Bc.length},vb=function(Bc){var Gc=Rc(Bc);return"object"==Gc&&null!=Bc||"function"==Gc},Ia="closure_uid_"+(1E9*Math.random()>>>0),xb=0,Rb=function(Bc,Gc,ed){return Bc.call.apply(Bc.bind,arguments)},yc=function(Bc,Gc,ed){if(!Bc)throw Error();if(2<arguments.length){var Nc=Array.prototype.slice.call(arguments,2);return function(){var Hc=
Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(Hc,Nc);return Bc.apply(Gc,Hc)}}return function(){return Bc.apply(Gc,arguments)}},id=function(Bc,Gc,ed){id=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Rb:yc;return id.apply(null,arguments)},ob=function(Bc,Gc){function ed(){}ed.prototype=Gc.prototype;Bc.ra=Gc.prototype;Bc.prototype=new ed;Bc.prototype.constructor=Bc;Bc.B=function(Nc,Hc,Jd){for(var De=Array(arguments.length-2),df=2;df<arguments.length;df++)De[df-
2]=arguments[df];return Gc.prototype[Hc].apply(Nc,De)}},Pb=function(Bc){return Bc},tb=function(Bc){var Gc=null,ed=dc.trustedTypes;if(!ed||!ed.createPolicy)return Gc;try{Gc=ed.createPolicy(Bc,{createHTML:Pb,createScript:Pb,createScriptURL:Pb})}catch(Nc){dc.console&&dc.console.error(Nc.message)}return Gc};ob(rb,Error);rb.prototype.name="CustomError";var xc;ob(Ib,rb);Ib.prototype.name="AssertionError";var Pc=function(Bc,Gc,ed){Bc||da("",null,Gc,Array.prototype.slice.call(arguments,2));return Bc},nd=
function(Bc,Gc){throw new Ib("Failure"+(Bc?": "+Bc:""),Array.prototype.slice.call(arguments,1));},Id=function(Bc,Gc,ed){"string"!==typeof Bc&&da("Expected string but got %s: %s.",[la(Bc),Bc],Gc,Array.prototype.slice.call(arguments,2))},Hb=Array.prototype.forEach?function(Bc,Gc){Pc(null!=Bc.length);Array.prototype.forEach.call(Bc,Gc,void 0)}:function(Bc,Gc){for(var ed=Bc.length,Nc="string"===typeof Bc?Bc.split(""):Bc,Hc=0;Hc<ed;Hc++)Hc in Nc&&Gc.call(void 0,Nc[Hc],Hc,Bc)},Kd,vc=function(Bc,Gc){this.S=
Bc===Cc&&Gc||"";this.ea=kb};vc.prototype.F=!0;vc.prototype.D=function(){return this.S};vc.prototype.toString=function(){return"Const{"+this.S+"}"};var Qc=function(Bc){if(Bc instanceof vc&&Bc.constructor===vc&&Bc.ea===kb)return Bc.S;nd("expected object of type Const, got '"+Bc+"'");return"type_error:Const"},kb={},Cc={},zc=function(Bc,Gc){this.P=Gc===Md?Bc:""};zc.prototype.toString=function(){return this.P.toString()};zc.prototype.F=!0;zc.prototype.D=function(){return this.P.toString()};var Fc=function(Bc){if(Bc instanceof
zc&&Bc.constructor===zc)return Bc.P;nd("expected object of type SafeUrl, got '"+Bc+"' of type "+la(Bc));return"type_error:SafeUrl"},xd=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,Uc=function(Bc){if(Bc instanceof zc)return Bc;Bc="object"==Rc(Bc)&&Bc.F?Bc.D():String(Bc);Pc(xd.test(Bc),"%s does not match the safe URL pattern",Bc)||(Bc="about:invalid#zClosurez");return new zc(Bc,Md)},Md={},Ob={},Le=function(Bc,Gc){this.O=Gc===Ob?Bc:"";this.F=!0};Le.prototype.D=function(){return this.O.toString()};
Le.prototype.toString=function(){return this.O.toString()};var We=function(Bc,Gc){a:{try{var ed=Bc&&Bc.ownerDocument,Nc=ed&&(ed.defaultView||ed.parentWindow);Nc=Nc||dc;if(Nc.Element&&Nc.Location){ed=Nc;break a}}catch(Jd){}ed=null}if(ed&&"undefined"!=typeof ed[Gc]&&(!Bc||!(Bc instanceof ed[Gc])&&(Bc instanceof ed.Location||Bc instanceof ed.Element))){if(vb(Bc))try{var Hc=Bc.constructor.displayName||Bc.constructor.name||Object.prototype.toString.call(Bc)}catch(Jd){Hc="<object could not be stringified>"}else Hc=
void 0===Bc?"undefined":null===Bc?"null":Rc(Bc);nd("Argument is not a %s (or a non-Element, non-Location mock); got: %s",Gc,Hc)}return Bc},xe=function(Bc,Gc){va(Gc,function(ed,Nc){ed&&"object"==Rc(ed)&&ed.F&&(ed=ed.D());"style"==Nc?Bc.style.cssText=ed:"class"==Nc?Bc.className=ed:"for"==Nc?Bc.htmlFor=ed:Fg.hasOwnProperty(Nc)?Bc.setAttribute(Fg[Nc],ed):0==Nc.lastIndexOf("aria-",0)||0==Nc.lastIndexOf("data-",0)?Bc.setAttribute(Nc,ed):Bc[Nc]=ed})},Fg={cellpadding:"cellPadding",cellspacing:"cellSpacing",
colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},Zc=function(Bc,Gc,ed,Nc){function Hc(df){df&&Gc.appendChild("string"===typeof df?Bc.createTextNode(df):df)}for(;Nc<ed.length;Nc++){var Jd=ed[Nc];if(!Fb(Jd)||vb(Jd)&&0<Jd.nodeType)Hc(Jd);else{a:{if(Jd&&"number"==typeof Jd.length){if(vb(Jd)){var De="function"==typeof Jd.item||"string"==typeof Jd.item;break a}if("function"===
typeof Jd){De="function"==typeof Jd.item;break a}}De=!1}Hb(De?ka(Jd):Jd,Hc)}}},rd=function(Bc,Gc){Gc=String(Gc);"application/xhtml+xml"===Bc.contentType&&(Gc=Gc.toLowerCase());return Bc.createElement(Gc)},ti=function(Bc){Pc(Bc,"Node cannot be null or undefined.");return 9==Bc.nodeType?Bc:Bc.ownerDocument||Bc.document},dg=function(Bc){this.C=Bc||dc.document||document};var Of=dg.prototype;Of.getElementsByTagName=function(Bc,Gc){return(Gc||this.C).getElementsByTagName(String(Bc))};Of.ha=function(Bc,
Gc,ed){var Nc=this.C,Hc=arguments,Jd=Hc[1],De=rd(Nc,String(Hc[0]));Jd&&("string"===typeof Jd?De.className=Jd:Array.isArray(Jd)?De.className=Jd.join(" "):xe(De,Jd));2<Hc.length&&Zc(Nc,De,Hc,2);return De};Of.createElement=function(Bc){return rd(this.C,Bc)};Of.createTextNode=function(Bc){return this.C.createTextNode(String(Bc))};Of.appendChild=function(Bc,Gc){Pc(null!=Bc&&null!=Gc,"goog.dom.appendChild expects non-null arguments");Bc.appendChild(Gc)};Of.append=function(Bc,Gc){Zc(ti(Bc),Bc,arguments,
1)};Of.canHaveChildren=function(Bc){if(1!=Bc.nodeType)return!1;switch(Bc.tagName){case "APPLET":case "AREA":case "BASE":case "BR":case "COL":case "COMMAND":case "EMBED":case "FRAME":case "HR":case "IMG":case "INPUT":case "IFRAME":case "ISINDEX":case "KEYGEN":case "LINK":case "NOFRAMES":case "NOSCRIPT":case "META":case "OBJECT":case "PARAM":case "SCRIPT":case "SOURCE":case "STYLE":case "TRACK":case "WBR":return!1}return!0};Of.removeNode=function(Bc){return Bc&&Bc.parentNode?Bc.parentNode.removeChild(Bc):
null};Of.contains=function(Bc,Gc){if(!Bc||!Gc)return!1;if(Bc.contains&&1==Gc.nodeType)return Bc==Gc||Bc.contains(Gc);if("undefined"!=typeof Bc.compareDocumentPosition)return Bc==Gc||!!(Bc.compareDocumentPosition(Gc)&16);for(;Gc&&Bc!=Gc;)Gc=Gc.parentNode;return Gc==Bc};var mg=window,wf=document,mf=mg.location,Mb=function(){},gd=/\[native code\]/,Vd=function(Bc,Gc,ed){return Bc[Gc]=Bc[Gc]||ed},sf=function(Bc){for(var Gc=0;Gc<this.length;Gc++)if(this[Gc]===Bc)return Gc;return-1},hg=function(Bc){Bc=Bc.sort();
for(var Gc=[],ed=void 0,Nc=0;Nc<Bc.length;Nc++){var Hc=Bc[Nc];Hc!=ed&&Gc.push(Hc);ed=Hc}return Gc},bh=/&/g,Qf=/</g,he=/>/g,Uf=/"/g,$g=/'/g,Ta=function(Bc){return String(Bc).replace(bh,"&amp;").replace(Qf,"&lt;").replace(he,"&gt;").replace(Uf,"&quot;").replace($g,"&#39;")},th=function(){var Bc;if((Bc=Object.create)&&gd.test(Bc))Bc=Bc(null);else{Bc={};for(var Gc in Bc)Bc[Gc]=void 0}return Bc},Be=function(Bc,Gc){return Object.prototype.hasOwnProperty.call(Bc,Gc)},cb=function(Bc){if(gd.test(Object.keys))return Object.keys(Bc);
var Gc=[],ed;for(ed in Bc)Be(Bc,ed)&&Gc.push(ed);return Gc},Yb=function(Bc,Gc){Bc=Bc||{};for(var ed in Bc)Be(Bc,ed)&&(Gc[ed]=Bc[ed])},de=function(Bc){return function(){mg.setTimeout(Bc,0)}},P=function(Bc,Gc){if(!Bc)throw Error(Gc||"");},pa=Vd(mg,"gapi",{}),wa=function(Bc,Gc,ed){var Nc=new RegExp("([#].*&|[#])"+Gc+"=([^&#]*)","g");Gc=new RegExp("([?#].*&|[?#])"+Gc+"=([^&#]*)","g");if(Bc=Bc&&(Nc.exec(Bc)||Gc.exec(Bc)))try{ed=decodeURIComponent(Bc[2])}catch(Hc){}return ed},Ea=new RegExp(/^/.source+/([a-zA-Z][-+.a-zA-Z0-9]*:)?/.source+
/(\/\/[^\/?#]*)?/.source+/([^?#]*)?/.source+/(\?([^#]*))?/.source+/(#((#|[^#])*))?/.source+/$/.source),ia=/[\ud800-\udbff][\udc00-\udfff]|[^!-~]/g,Ca=new RegExp(/(%([^0-9a-fA-F%]|[0-9a-fA-F]([^0-9a-fA-F%])?)?)*/.source+/%($|[^0-9a-fA-F]|[0-9a-fA-F]($|[^0-9a-fA-F]))/.source,"g"),w=/%([a-f]|[0-9a-fA-F][a-f])/g,ma=/^(https?|ftp|file|chrome-extension):$/i,ua=function(Bc){Bc=String(Bc);Bc=Bc.replace(ia,function(Hc){try{return encodeURIComponent(Hc)}catch(Jd){return encodeURIComponent(Hc.replace(/^[^%]+$/g,
"\ufffd"))}}).replace(Ca,function(Hc){return Hc.replace(/%/g,"%25")}).replace(w,function(Hc){return Hc.toUpperCase()});Bc=Bc.match(Ea)||[];var Gc=th(),ed=function(Hc){return Hc.replace(/\\/g,"%5C").replace(/\^/g,"%5E").replace(/`/g,"%60").replace(/\{/g,"%7B").replace(/\|/g,"%7C").replace(/\}/g,"%7D")},Nc=!!(Bc[1]||"").match(ma);Gc.B=ed((Bc[1]||"")+(Bc[2]||"")+(Bc[3]||(Bc[2]&&Nc?"/":"")));Nc=function(Hc){return ed(Hc.replace(/\?/g,"%3F").replace(/#/g,"%23"))};Gc.query=Bc[5]?[Nc(Bc[5])]:[];Gc.j=Bc[7]?
[Nc(Bc[7])]:[];return Gc},ha=function(Bc){return Bc.B+(0<Bc.query.length?"?"+Bc.query.join("&"):"")+(0<Bc.j.length?"#"+Bc.j.join("&"):"")},ra=function(Bc,Gc){var ed=[];if(Bc)for(var Nc in Bc)if(Be(Bc,Nc)&&null!=Bc[Nc]){var Hc=Gc?Gc(Bc[Nc]):Bc[Nc];ed.push(encodeURIComponent(Nc)+"="+encodeURIComponent(Hc))}return ed},mb=function(Bc,Gc,ed,Nc){Bc=ua(Bc);Bc.query.push.apply(Bc.query,ra(Gc,Nc));Bc.j.push.apply(Bc.j,ra(ed,Nc));return ha(Bc)},E=new RegExp(/\/?\??#?/.source+"("+/[\/?#]/i.source+"|"+/[\uD800-\uDBFF]/i.source+
"|"+/%[c-f][0-9a-f](%[89ab][0-9a-f]){0,2}(%[89ab]?)?/i.source+"|"+/%[0-9a-f]?/i.source+")$","i"),R=function(Bc,Gc){var ed=ua(Gc);Gc=ed.B;ed.query.length&&(Gc+="?"+ed.query.join(""));ed.j.length&&(Gc+="#"+ed.j.join(""));var Nc="";2E3<Gc.length&&(Nc=Gc,Gc=Gc.substr(0,2E3),Gc=Gc.replace(E,""),Nc=Nc.substr(Gc.length));var Hc=Bc.createElement("div");Bc=Bc.createElement("a");ed=ua(Gc);Gc=ed.B;ed.query.length&&(Gc+="?"+ed.query.join(""));ed.j.length&&(Gc+="#"+ed.j.join(""));Gc=new zc(Gc,Md);We(Bc,"HTMLAnchorElement");
Gc=Gc instanceof zc?Gc:Uc(Gc);Bc.href=Fc(Gc);Hc.appendChild(Bc);Gc=Hc.innerHTML;ed=new vc(Cc,"Assignment to self.");Id(Qc(ed),"must provide justification");Pc(!/^[\s\xa0]*$/.test(Qc(ed)),"must provide non-empty justification");void 0===Kd&&(Kd=tb("gapi#html"));Gc=(ed=Kd)?ed.createHTML(Gc):Gc;Gc=new Le(Gc,Ob);if(void 0!==Hc.tagName){if("script"===Hc.tagName.toLowerCase())throw Error("Use setTextContent with a SafeScript.");if("style"===Hc.tagName.toLowerCase())throw Error("Use setTextContent with a SafeStyleSheet.");
}Gc instanceof Le&&Gc.constructor===Le?Gc=Gc.O:(nd("expected object of type SafeHtml, got '"+Gc+"' of type "+la(Gc)),Gc="type_error:SafeHtml");Hc.innerHTML=Gc;Gc=String(Hc.firstChild.href);Hc.parentNode&&Hc.parentNode.removeChild(Hc);ed=ua(Gc+Nc);Nc=ed.B;ed.query.length&&(Nc+="?"+ed.query.join(""));ed.j.length&&(Nc+="#"+ed.j.join(""));return Nc},Ya=/^https?:\/\/[^\/%\\?#\s]+\/[^\s]*$/i,gb=function(Bc,Gc,ed,Nc){if(mg[ed+"EventListener"])mg[ed+"EventListener"](Bc,Gc,!1);else if(mg[Nc+"tachEvent"])mg[Nc+
"tachEvent"]("on"+Bc,Gc)},$b=function(){var Bc=wf.readyState;return"complete"===Bc||"interactive"===Bc&&-1==navigator.userAgent.indexOf("MSIE")},Sc=function(Bc){var Gc=Om;if(!$b())try{Gc()}catch(ed){}Ic(Bc)},Ic=function(Bc){if($b())Bc();else{var Gc=!1,ed=function(){if(!Gc)return Gc=!0,Bc.apply(this,arguments)};mg.addEventListener?(mg.addEventListener("load",ed,!1),mg.addEventListener("DOMContentLoaded",ed,!1)):mg.attachEvent&&(mg.attachEvent("onreadystatechange",function(){$b()&&ed.apply(this,arguments)}),
mg.attachEvent("onload",ed))}},Pd=function(Bc){for(;Bc.firstChild;)Bc.removeChild(Bc.firstChild)},Zd={button:!0,div:!0,span:!0},ge={};ge=Vd(mg,"___jsl",th());Vd(ge,"I",0);Vd(ge,"hel",10);var Ce=function(Bc){return ge.dpo?ge.h:wa(Bc,"jsh",ge.h)},$e=function(Bc){var Gc=Vd(ge,"sws",[]);Gc.push.apply(Gc,Bc)},pf=function(Bc){return Vd(ge,"watt",th())[Bc]},ig=function(Bc){var Gc=Vd(ge,"PQ",[]);ge.PQ=[];var ed=Gc.length;if(0===ed)Bc();else for(var Nc=0,Hc=function(){++Nc===ed&&Bc()},Jd=0;Jd<ed;Jd++)Gc[Jd](Hc)},
Xf=function(Bc){return Vd(Vd(ge,"H",th()),Bc,th())},Vg=Vd(ge,"perf",th()),Re=Vd(Vg,"g",th()),ae=Vd(Vg,"i",th());Vd(Vg,"r",[]);th();th();var Sb=function(Bc,Gc,ed){var Nc=Vg.r;"function"===typeof Nc?Nc(Bc,Gc,ed):Nc.push([Bc,Gc,ed])},Hd=function(Bc,Gc,ed){Re[Bc]=!Gc&&Re[Bc]||ed||(new Date).getTime();Sb(Bc)},hf=function(Bc,Gc,ed){Gc&&0<Gc.length&&(Gc=zf(Gc),ed&&0<ed.length&&(Gc+="___"+zf(ed)),28<Gc.length&&(Gc=Gc.substr(0,28)+(Gc.length-28)),ed=Gc,Gc=Vd(ae,"_p",th()),Vd(Gc,ed,th())[Bc]=(new Date).getTime(),
Sb(Bc,"_p",ed))},zf=function(Bc){return Bc.join("__").replace(/\./g,"_").replace(/\-/g,"_").replace(/,/g,"_")},Gg=th(),vg=[],tg=function(Bc){throw Error("Bad hint: "+Bc);};vg.push(["jsl",function(Bc){for(var Gc in Bc)if(Be(Bc,Gc)){var ed=Bc[Gc];"object"==Rc(ed)?ge[Gc]=Vd(ge,Gc,[]).concat(ed):Vd(ge,Gc,ed)}if(Gc=Bc.u)Bc=Vd(ge,"us",[]),Bc.push(Gc),(Gc=/^https:(.*)$/.exec(Gc))&&Bc.push("http:"+Gc[1])}]);var pd=/^(\/[a-zA-Z0-9_\-]+)+$/,Z=[/\/amp\//,/\/amp$/,/^\/amp$/],Ga=/^[a-zA-Z0-9\-_\.,!]+$/,fb=/^gapi\.loaded_[0-9]+$/,
ya=/^[a-zA-Z0-9,._-]+$/,tc=function(Bc,Gc,ed,Nc,Hc){var Jd=Bc.split(";"),De=Jd.shift(),df=Gg[De],uf=null;df?uf=df(Jd,Gc,ed,Nc):tg("no hint processor for: "+De);uf||tg("failed to generate load url");Gc=uf;ed=Gc.match(Pf);(Nc=Gc.match(Fe))&&1===Nc.length&&Oe.test(Gc)&&ed&&1===ed.length||tg("failed sanity: "+Bc);try{Bc="?";if(Hc&&0<Hc.length){ed=Gc=0;for(Nc={};ed<Hc.length;){var Yf=Hc[ed++];Jd=void 0;Jd=vb(Yf)?"o"+(Object.prototype.hasOwnProperty.call(Yf,Ia)&&Yf[Ia]||(Yf[Ia]=++xb)):Rc(Yf).charAt(0)+
Yf;Object.prototype.hasOwnProperty.call(Nc,Jd)||(Nc[Jd]=!0,Hc[Gc++]=Yf)}Hc.length=Gc;uf=uf+"?le="+Hc.join(",");Bc="&"}if(ge.rol){var Ch=ge.ol;Ch&&Ch.length&&(uf=""+uf+Bc+"ol="+Ch.length)}}catch(Fh){}return uf},Mc=function(Bc,Gc,ed,Nc){Bc=Cd(Bc);fb.test(ed)||tg("invalid_callback");Gc=Ee(Gc);Nc=Nc&&Nc.length?Ee(Nc):null;var Hc=function(Jd){return encodeURIComponent(Jd).replace(/%2C/g,",")};return[encodeURIComponent(Bc.pathPrefix).replace(/%2C/g,",").replace(/%2F/g,"/"),"/k=",Hc(Bc.version),"/m=",Hc(Gc),
Nc?"/exm="+Hc(Nc):"","/rt=j/sv=1/d=1/ed=1",Bc.U?"/am="+Hc(Bc.U):"",Bc.aa?"/rs="+Hc(Bc.aa):"",Bc.ca?"/t="+Hc(Bc.ca):"","/cb=",Hc(ed)].join("")},Cd=function(Bc){"/"!==Bc.charAt(0)&&tg("relative path");for(var Gc=Bc.substring(1).split("/"),ed=[];Gc.length;){Bc=Gc.shift();if(!Bc.length||0==Bc.indexOf("."))tg("empty/relative directory");else if(0<Bc.indexOf("=")){Gc.unshift(Bc);break}ed.push(Bc)}Bc={};for(var Nc=0,Hc=Gc.length;Nc<Hc;++Nc){var Jd=Gc[Nc].split("="),De=decodeURIComponent(Jd[0]),df=decodeURIComponent(Jd[1]);
2==Jd.length&&De&&df&&(Bc[De]=Bc[De]||df)}Gc="/"+ed.join("/");pd.test(Gc)||tg("invalid_prefix");ed=0;for(Nc=Z.length;ed<Nc;++ed)Z[ed].test(Gc)&&tg("invalid_prefix");ed=bf(Bc,"k",!0);Nc=bf(Bc,"am");Hc=bf(Bc,"rs");Bc=bf(Bc,"t");return{pathPrefix:Gc,version:ed,U:Nc,aa:Hc,ca:Bc}},Ee=function(Bc){for(var Gc=[],ed=0,Nc=Bc.length;ed<Nc;++ed){var Hc=Bc[ed].replace(/\./g,"_").replace(/-/g,"_");ya.test(Hc)&&Gc.push(Hc)}return Gc.join(",")},bf=function(Bc,Gc,ed){Bc=Bc[Gc];!Bc&&ed&&tg("missing: "+Gc);if(Bc){if(Ga.test(Bc))return Bc;
tg("invalid: "+Gc)}return null},Oe=/^https?:\/\/[a-z0-9_.-]+\.google(rs)?\.com(:\d+)?\/[a-zA-Z0-9_.,!=\-\/]+$/,Fe=/\/cb=/g,Pf=/\/\//g;Gg.m=function(Bc,Gc,ed,Nc){(Bc=Bc[0])||tg("missing_hint");return"https://apis.google.com"+Mc(Bc,Gc,ed,Nc)};var eg=decodeURI("%73cript"),be=/^[-+_0-9\/A-Za-z]+={0,2}$/,v=function(Bc,Gc){for(var ed=[],Nc=0;Nc<Bc.length;++Nc){var Hc=Bc[Nc];Hc&&0>sf.call(Gc,Hc)&&ed.push(Hc)}return ed},oa=function(){var Bc=ge.nonce;return void 0!==Bc?Bc&&Bc===String(Bc)&&Bc.match(be)?Bc:
ge.nonce=null:wf.querySelector?(Bc=wf.querySelector("script[nonce]"))?(Bc=Bc.nonce||Bc.getAttribute("nonce")||"",Bc&&Bc===String(Bc)&&Bc.match(be)?ge.nonce=Bc:ge.nonce=null):null:null},Oc=function(Bc){if("loading"!=wf.readyState)Tb(Bc);else{var Gc=oa(),ed="";null!==Gc&&(ed=' nonce="'+Gc+'"');Bc="<"+eg+' src="'+encodeURI(Bc)+'"'+ed+"></"+eg+">";wf.write(jg?jg.createHTML(Bc):Bc)}},Tb=function(Bc){var Gc=wf.createElement(eg);Gc.setAttribute("src",jg?jg.createScriptURL(Bc):Bc);Bc=oa();null!==Bc&&Gc.setAttribute("nonce",
Bc);Gc.async="true";(Bc=wf.getElementsByTagName(eg)[0])?Bc.parentNode.insertBefore(Gc,Bc):(wf.head||wf.body||wf.documentElement).appendChild(Gc)},ne=function(Bc,Gc,ed){Og(function(){var Nc=Gc===Ce(mf.href)?Vd(pa,"_",th()):th();Nc=Vd(Xf(Gc),"_",Nc);Bc(Nc)},ed)},Ye=function(Bc,Gc){var ed=Gc||{};"function"==typeof Gc&&(ed={},ed.callback=Gc);var Nc=(Gc=ed)&&Gc._c;if(Nc)for(var Hc=0;Hc<vg.length;Hc++){var Jd=vg[Hc][0],De=vg[Hc][1];De&&Be(Nc,Jd)&&De(Nc[Jd],Bc,Gc)}Gc=[];Bc?Gc=Bc.split(":"):ed.features&&
(Gc=ed.features);if(!(Bc=ed.h)&&(Bc=Ce(mf.href),!Bc))throw Error("Bad hint: !hint");Kf(Gc||[],ed,Bc)},Kf=function(Bc,Gc,ed){Bc=hg(Bc)||[];var Nc=Gc.callback,Hc=Gc.config,Jd=Gc.timeout,De=Gc.ontimeout,df=Gc.onerror,uf=void 0;"function"==typeof df&&(uf=df);var Yf=null,Ch=!1;if(Jd&&!De||!Jd&&De)throw"Timeout requires both the timeout parameter and ontimeout parameter to be set";df=Vd(Xf(ed),"r",[]).sort();var Fh=Vd(Xf(ed),"L",[]).sort(),oi=ge.le,Ri=[].concat(df),Th=function(mm,Ol){if(Ch)return 0;mg.clearTimeout(Yf);
Fh.push.apply(Fh,Ui);var $m=((pa||{}).config||{}).update;$m?$m(Hc):Hc&&Vd(ge,"cu",[]).push(Hc);if(Ol){hf("me0",mm,Ri);try{ne(Ol,ed,uf)}finally{hf("me1",mm,Ri)}}return 1};0<Jd&&(Yf=mg.setTimeout(function(){Ch=!0;De()},Jd));var Ui=v(Bc,Fh);if(Ui.length){Ui=v(Bc,df);var Vk=Vd(ge,"CP",[]),Mk=Vk.length;Vk[Mk]=function(mm){if(!mm)return 0;hf("ml1",Ui,Ri);var Ol=function(Go){Vk[Mk]=null;Th(Ui,mm)&&ig(function(){Nc&&Nc();Go()})},$m=function(){var Go=Vk[Mk+1];Go&&Go()};0<Mk&&Vk[Mk-1]?Vk[Mk]=function(){Ol($m)}:
Ol($m)};if(Ui.length){var ok="loaded_"+ge.I++;pa[ok]=function(mm){Vk[Mk](mm);pa[ok]=null};Bc=tc(ed,Ui,"gapi."+ok,df,oi);df.push.apply(df,Ui);hf("ml0",Ui,Ri);Gc.sync||mg.___gapisync?Oc(Bc):Tb(Bc)}else Vk[Mk](Mb)}else Th(Ui)&&Nc&&Nc()},jg=tb("gapi#gapi"),Og=function(Bc,Gc){if(ge.hee&&0<ge.hel)try{return Bc()}catch(ed){Gc&&Gc(ed),ge.hel--,Ye("debug_error",function(){try{window.___jsl.hefn(ed)}catch(Nc){throw ed;}})}else try{return Bc()}catch(ed){throw Gc&&Gc(ed),ed;}},te=pa.load;te&&Vd(ge,"ol",[]).push(te);
pa.load=function(Bc,Gc){return Og(function(){return Ye(Bc,Gc)})};var Eh=function(Bc){var Gc=window.___jsl=window.___jsl||{};Gc[Bc]=Gc[Bc]||[];return Gc[Bc]},$h=function(Bc){var Gc=window.___jsl=window.___jsl||{};Gc.cfg=!Bc&&Gc.cfg||{};return Gc.cfg},Gi=function(Bc){return"object"===Rc(Bc)&&/\[native code\]/.test(Bc.push)},Ng=function Hc(Gc,ed,Nc){if(ed&&"object"===Rc(ed))for(var Jd in ed)!Object.prototype.hasOwnProperty.call(ed,Jd)||Nc&&"___goc"===Jd&&"undefined"===typeof ed[Jd]||(Gc[Jd]&&ed[Jd]&&
"object"===Rc(Gc[Jd])&&"object"===Rc(ed[Jd])&&!Gi(Gc[Jd])&&!Gi(ed[Jd])?Hc(Gc[Jd],ed[Jd]):ed[Jd]&&"object"===Rc(ed[Jd])?(Gc[Jd]=Gi(ed[Jd])?[]:{},Hc(Gc[Jd],ed[Jd])):Gc[Jd]=ed[Jd])},Ii=function(Gc){if(Gc&&!/^\s+$/.test(Gc)){for(;0==Gc.charCodeAt(Gc.length-1);)Gc=Gc.substring(0,Gc.length-1);try{var ed=window.JSON.parse(Gc)}catch(Nc){}if("object"===Rc(ed))return ed;try{ed=(new Function("return ("+Gc+"\n)"))()}catch(Nc){}if("object"===Rc(ed))return ed;try{ed=(new Function("return ({"+Gc+"\n})"))()}catch(Nc){}return"object"===
Rc(ed)?ed:{}}},fi=function(Gc,ed){var Nc={___goc:void 0};Gc.length&&Gc[Gc.length-1]&&Object.hasOwnProperty.call(Gc[Gc.length-1],"___goc")&&"undefined"===typeof Gc[Gc.length-1].___goc&&(Nc=Gc.pop());Ng(Nc,ed);Gc.push(Nc)},Ji=function(Gc){$h(!0);var ed=window.___gcfg,Nc=Eh("cu"),Hc=window.___gu;ed&&ed!==Hc&&(fi(Nc,ed),window.___gu=ed);ed=Eh("cu");var Jd=document.scripts||document.getElementsByTagName("script")||[];Hc=[];var De=[];De.push.apply(De,Eh("us"));for(var df=0;df<Jd.length;++df)for(var uf=
Jd[df],Yf=0;Yf<De.length;++Yf)uf.src&&0==uf.src.indexOf(De[Yf])&&Hc.push(uf);0==Hc.length&&0<Jd.length&&Jd[Jd.length-1].src&&Hc.push(Jd[Jd.length-1]);for(Jd=0;Jd<Hc.length;++Jd)Hc[Jd].getAttribute("gapi_processed")||(Hc[Jd].setAttribute("gapi_processed",!0),(De=Hc[Jd])?(df=De.nodeType,De=3==df||4==df?De.nodeValue:De.textContent||""):De=void 0,(De=Ii(De))&&ed.push(De));Gc&&fi(Nc,Gc);Hc=Eh("cd");Gc=0;for(ed=Hc.length;Gc<ed;++Gc)Ng($h(),Hc[Gc],!0);Hc=Eh("ci");Gc=0;for(ed=Hc.length;Gc<ed;++Gc)Ng($h(),
Hc[Gc],!0);Gc=0;for(ed=Nc.length;Gc<ed;++Gc)Ng($h(),Nc[Gc],!0)},gi=function(Gc){var ed=$h();if(!Gc)return ed;Gc=Gc.split("/");for(var Nc=0,Hc=Gc.length;ed&&"object"===Rc(ed)&&Nc<Hc;++Nc)ed=ed[Gc[Nc]];return Nc===Gc.length&&void 0!==ed?ed:void 0},xj=function(Gc,ed){var Nc;if("string"===typeof Gc){var Hc=Nc={};Gc=Gc.split("/");for(var Jd=0,De=Gc.length;Jd<De-1;++Jd)Hc=Hc[Gc[Jd]]={};Hc[Gc[Jd]]=ed}else Nc=Gc;Ji(Nc)},yg=function(){var Gc=window.__GOOGLEAPIS;Gc&&(Gc.googleapis&&!Gc["googleapis.config"]&&
(Gc["googleapis.config"]=Gc.googleapis),Vd(ge,"ci",[]).push(Gc),window.__GOOGLEAPIS=void 0)},Ti={callback:1,clientid:1,cookiepolicy:1,openidrealm:-1,includegrantedscopes:-1,requestvisibleactions:1,scope:1},ke=!1,Mg=th(),Hh=function(){if(!ke){for(var Gc=document.getElementsByTagName("meta"),ed=0;ed<Gc.length;++ed){var Nc=Gc[ed].name.toLowerCase();if(0==Nc.lastIndexOf("google-signin-",0)){Nc=Nc.substring(14);var Hc=Gc[ed].content;Ti[Nc]&&Hc&&(Mg[Nc]=Hc)}}if(window.self!==window.top){Gc=document.location.toString();
for(var Jd in Ti)0<Ti[Jd]&&(ed=wa(Gc,Jd,""))&&(Mg[Jd]=ed)}ke=!0}Jd=th();Yb(Mg,Jd);return Jd},Zf=function(Gc){return!!(Gc.clientid&&Gc.scope&&Gc.callback)},z=function(){this.i=window.console};z.prototype.log=function(Gc){this.i&&this.i.log&&this.i.log(Gc)};z.prototype.error=function(Gc){this.i&&(this.i.error?this.i.error(Gc):this.i.log&&this.i.log(Gc))};z.prototype.warn=function(Gc){this.i&&(this.i.warn?this.i.warn(Gc):this.i.log&&this.i.log(Gc))};z.prototype.debug=function(){};var C=new z,K=function(){return!!ge.oa},
T=function(){},O=Vd(ge,"rw",th()),qa=function(Gc){for(var ed in O)Gc(O[ed])},Ba=function(Gc,ed){(Gc=O[Gc])&&Gc.state<ed&&(Gc.state=ed)},ib=function(Gc){var ed=window.___jsl=window.___jsl||{};ed.cfg=ed.cfg||{};ed=ed.cfg;if(!Gc)return ed;Gc=Gc.split("/");for(var Nc=0,Hc=Gc.length;ed&&"object"===Rc(ed)&&Nc<Hc;++Nc)ed=ed[Gc[Nc]];return Nc===Gc.length&&void 0!==ed?ed:void 0},Ub=/^https?:\/\/(?:\w|[\-\.])+\.google\.(?:\w|[\-:\.])+(?:\/[^\?#]*)?\/u\/(\d)\//,pc=/^https?:\/\/(?:\w|[\-\.])+\.google\.(?:\w|[\-:\.])+(?:\/[^\?#]*)?\/b\/(\d{10,21})\//,
Dc=function(){var Gc=ib("googleapis.config/sessionIndex");"string"===typeof Gc&&254<Gc.length&&(Gc=null);null==Gc&&(Gc=window.__X_GOOG_AUTHUSER);"string"===typeof Gc&&254<Gc.length&&(Gc=null);if(null==Gc){var ed=window.google;ed&&(Gc=ed.authuser)}"string"===typeof Gc&&254<Gc.length&&(Gc=null);null==Gc&&(ed=window.location.href,Gc=wa(ed,"authuser")||null,null==Gc&&(Gc=(Gc=ed.match(Ub))?Gc[1]:null));if(null==Gc)return null;Gc=String(Gc);254<Gc.length&&(Gc=null);return Gc},kd=function(){var Gc=ib("googleapis.config/sessionDelegate");
"string"===typeof Gc&&21<Gc.length&&(Gc=null);null==Gc&&(Gc=(Gc=window.location.href.match(pc))?Gc[1]:null);if(null==Gc)return null;Gc=String(Gc);21<Gc.length&&(Gc=null);return Gc},Ad,Rd,cf=void 0,Ud=function(Gc){try{return dc.JSON.parse.call(dc.JSON,Gc)}catch(ed){return!1}},Ge=function(Gc){return Object.prototype.toString.call(Gc)},Se=Ge(0),mh=Ge(new Date(0)),Rh=Ge(!0),dh=Ge(""),eh=Ge({}),Rg=Ge([]),$c=function Hc(ed,Nc){if(Nc)for(var Jd=0,De=Nc.length;Jd<De;++Jd)if(ed===Nc[Jd])throw new TypeError("Converting circular structure to JSON");
De=Rc(ed);if("undefined"!==De){Jd=Array.prototype.slice.call(Nc||[],0);Jd[Jd.length]=ed;Nc=[];var df=Ge(ed);if(null!=ed&&"function"===typeof ed.toJSON&&(Object.prototype.hasOwnProperty.call(ed,"toJSON")||(df!==Rg||ed.constructor!==Array&&ed.constructor!==Object)&&(df!==eh||ed.constructor!==Array&&ed.constructor!==Object)&&df!==dh&&df!==Se&&df!==Rh&&df!==mh))return Hc(ed.toJSON.call(ed),Jd);if(null==ed)Nc[Nc.length]="null";else if(df===Se)ed=Number(ed),isNaN(ed)||isNaN(ed-ed)?ed="null":-0===ed&&0>
1/ed&&(ed="-0"),Nc[Nc.length]=String(ed);else if(df===Rh)Nc[Nc.length]=String(!!Number(ed));else{if(df===mh)return Hc(ed.toISOString.call(ed),Jd);if(df===Rg&&Ge(ed.length)===Se){Nc[Nc.length]="[";var uf=0;for(De=Number(ed.length)>>0;uf<De;++uf)uf&&(Nc[Nc.length]=","),Nc[Nc.length]=Hc(ed[uf],Jd)||"null";Nc[Nc.length]="]"}else if(df==dh&&Ge(ed.length)===Se){Nc[Nc.length]='"';uf=0;for(Jd=Number(ed.length)>>0;uf<Jd;++uf)De=String.prototype.charAt.call(ed,uf),df=String.prototype.charCodeAt.call(ed,uf),
Nc[Nc.length]="\b"===De?"\\b":"\f"===De?"\\f":"\n"===De?"\\n":"\r"===De?"\\r":"\t"===De?"\\t":"\\"===De||'"'===De?"\\"+De:31>=df?"\\u"+(df+65536).toString(16).substr(1):32<=df&&65535>=df?De:"\ufffd";Nc[Nc.length]='"'}else if("object"===De){Nc[Nc.length]="{";De=0;for(uf in ed)Object.prototype.hasOwnProperty.call(ed,uf)&&(df=Hc(ed[uf],Jd),void 0!==df&&(De++&&(Nc[Nc.length]=","),Nc[Nc.length]=Hc(uf),Nc[Nc.length]=":",Nc[Nc.length]=df));Nc[Nc.length]="}"}else return}return Nc.join("")}},vf=/[\0-\x07\x0b\x0e-\x1f]/,
ye=/^([^"]*"([^\\"]|\\.)*")*[^"]*"([^"\\]|\\.)*[\0-\x1f]/,Yc=/^([^"]*"([^\\"]|\\.)*")*[^"]*"([^"\\]|\\.)*\\[^\\\/"bfnrtu]/,Tc=/^([^"]*"([^\\"]|\\.)*")*[^"]*"([^"\\]|\\.)*\\u([0-9a-fA-F]{0,3}[^0-9a-fA-F])/,td=/"([^\0-\x1f\\"]|\\[\\\/"bfnrt]|\\u[0-9a-fA-F]{4})*"/g,hd=/-?(0|[1-9][0-9]*)(\.[0-9]+)?([eE][-+]?[0-9]+)?/g,aa=/[ \t\n\r]+/g,Sa=/[^"]:/,Ma=/""/g,jb=/true|false|null/g,Jb=/00/,gc=/[\{]([^0\}]|0[^:])/,ac=/(^|\[)[,:]|[,:](\]|\}|[,:]|$)/,Kc=/[^\[,:][\[\{]/,md=/^(\{|\}|\[|\]|,|:|0)+/,ud=/\u2028/g,
oe=/\u2029/g,ze=function(ed){ed=String(ed);if(vf.test(ed)||ye.test(ed)||Yc.test(ed)||Tc.test(ed))return!1;var Nc=ed.replace(td,'""');Nc=Nc.replace(hd,"0");Nc=Nc.replace(aa,"");if(Sa.test(Nc))return!1;Nc=Nc.replace(Ma,"0");Nc=Nc.replace(jb,"0");if(Jb.test(Nc)||gc.test(Nc)||ac.test(Nc)||Kc.test(Nc)||!Nc||Nc.replace(md,""))return!1;ed=ed.replace(ud,"\\u2028").replace(oe,"\\u2029");Nc=void 0;try{Nc=cf?[Ud(ed)]:eval("(function (var_args) {\n  return Array.prototype.slice.call(arguments, 0);\n})(\n"+ed+
"\n)")}catch(Hc){return!1}return Nc&&1===Nc.length?Nc[0]:!1},Ue=function(){var ed=((dc.document||{}).scripts||[]).length;if((void 0===Ad||void 0===cf||Rd!==ed)&&-1!==Rd){Ad=cf=!1;Rd=-1;try{try{cf=!!dc.JSON&&'{"a":[3,true,"1970-01-01T00:00:00.000Z"]}'===dc.JSON.stringify.call(dc.JSON,{a:[3,!0,new Date(0)],c:function(){}})&&!0===Ud("true")&&3===Ud('[{"a":3}]')[0].a}catch(Nc){}Ad=cf&&!Ud("[00]")&&!Ud('"\u0007"')&&!Ud('"\\0"')&&!Ud('"\\v"')}finally{Rd=ed}}},Me=function(ed){if(-1===Rd)return!1;Ue();return(Ad?
Ud:ze)(ed)},xf=function(ed){if(-1!==Rd)return Ue(),cf?dc.JSON.stringify.call(dc.JSON,ed):$c(ed)},lf=!Date.prototype.toISOString||"function"!==typeof Date.prototype.toISOString||"1970-01-01T00:00:00.000Z"!==(new Date(0)).toISOString(),Rf=function(){var ed=Date.prototype.getUTCFullYear.call(this);return[0>ed?"-"+String(1E6-ed).substr(1):9999>=ed?String(1E4+ed).substr(1):"+"+String(1E6+ed).substr(1),"-",String(101+Date.prototype.getUTCMonth.call(this)).substr(1),"-",String(100+Date.prototype.getUTCDate.call(this)).substr(1),
"T",String(100+Date.prototype.getUTCHours.call(this)).substr(1),":",String(100+Date.prototype.getUTCMinutes.call(this)).substr(1),":",String(100+Date.prototype.getUTCSeconds.call(this)).substr(1),".",String(1E3+Date.prototype.getUTCMilliseconds.call(this)).substr(1),"Z"].join("")};Date.prototype.toISOString=lf?Rf:Date.prototype.toISOString;var Hg=function(){this.blockSize=64;this.g=[];this.L=[];this.fa=[];this.H=[];this.H[0]=128;for(var ed=1;ed<this.blockSize;++ed)this.H[ed]=0;this.J=this.v=0;this.reset()};
ob(Hg,function(){this.blockSize=-1});Hg.prototype.reset=function(){this.g[0]=1732584193;this.g[1]=4023233417;this.g[2]=2562383102;this.g[3]=271733878;this.g[4]=3285377520;this.J=this.v=0};var ng=function(ed,Nc,Hc){Hc||(Hc=0);var Jd=ed.fa;if("string"===typeof Nc)for(var De=0;16>De;De++)Jd[De]=Nc.charCodeAt(Hc)<<24|Nc.charCodeAt(Hc+1)<<16|Nc.charCodeAt(Hc+2)<<8|Nc.charCodeAt(Hc+3),Hc+=4;else for(De=0;16>De;De++)Jd[De]=Nc[Hc]<<24|Nc[Hc+1]<<16|Nc[Hc+2]<<8|Nc[Hc+3],Hc+=4;for(De=16;80>De;De++){var df=Jd[De-
3]^Jd[De-8]^Jd[De-14]^Jd[De-16];Jd[De]=(df<<1|df>>>31)&4294967295}Nc=ed.g[0];Hc=ed.g[1];var uf=ed.g[2],Yf=ed.g[3],Ch=ed.g[4];for(De=0;80>De;De++){if(40>De)if(20>De){df=Yf^Hc&(uf^Yf);var Fh=1518500249}else df=Hc^uf^Yf,Fh=1859775393;else 60>De?(df=Hc&uf|Yf&(Hc|uf),Fh=2400959708):(df=Hc^uf^Yf,Fh=3395469782);df=(Nc<<5|Nc>>>27)+df+Ch+Fh+Jd[De]&4294967295;Ch=Yf;Yf=uf;uf=(Hc<<30|Hc>>>2)&4294967295;Hc=Nc;Nc=df}ed.g[0]=ed.g[0]+Nc&4294967295;ed.g[1]=ed.g[1]+Hc&4294967295;ed.g[2]=ed.g[2]+uf&4294967295;ed.g[3]=
ed.g[3]+Yf&4294967295;ed.g[4]=ed.g[4]+Ch&4294967295};Hg.prototype.update=function(ed,Nc){if(null!=ed){void 0===Nc&&(Nc=ed.length);for(var Hc=Nc-this.blockSize,Jd=0,De=this.L,df=this.v;Jd<Nc;){if(0==df)for(;Jd<=Hc;)ng(this,ed,Jd),Jd+=this.blockSize;if("string"===typeof ed)for(;Jd<Nc;){if(De[df]=ed.charCodeAt(Jd),++df,++Jd,df==this.blockSize){ng(this,De);df=0;break}}else for(;Jd<Nc;)if(De[df]=ed[Jd],++df,++Jd,df==this.blockSize){ng(this,De);df=0;break}}this.v=df;this.J+=Nc}};Hg.prototype.digest=function(){var ed=
[],Nc=8*this.J;56>this.v?this.update(this.H,56-this.v):this.update(this.H,this.blockSize-(this.v-56));for(var Hc=this.blockSize-1;56<=Hc;Hc--)this.L[Hc]=Nc&255,Nc/=256;ng(this,this.L);for(Hc=Nc=0;5>Hc;Hc++)for(var Jd=24;0<=Jd;Jd-=8)ed[Nc]=this.g[Hc]>>Jd&255,++Nc;return ed};var fg=function(){this.R=new Hg};fg.prototype.reset=function(){this.R.reset()};var gg=mg.crypto,Wh=!1,wg=0,xh=0,Qi=1,Di=0,Zi="",ni=function Hc(Nc){Nc=Nc||mg.event;var Jd=Nc.screenX+Nc.clientX<<16;Jd+=Nc.screenY+Nc.clientY;Jd*=(new Date).getTime()%
1E6;Qi=Qi*Jd%Di;0<wg&&++xh==wg&&gb("mousemove",Hc,"remove","de")},Xd=function(Nc){var Hc=new fg;Nc=unescape(encodeURIComponent(Nc));for(var Jd=[],De=0,df=Nc.length;De<df;++De)Jd.push(Nc.charCodeAt(De));Hc.R.update(Jd);Hc=Hc.R.digest();Nc="";for(Jd=0;Jd<Hc.length;Jd++)Nc+="0123456789ABCDEF".charAt(Math.floor(Hc[Jd]/16))+"0123456789ABCDEF".charAt(Hc[Jd]%16);return Nc};(Wh=!!gg&&"function"==typeof gg.getRandomValues)||(Di=1E6*(screen.width*screen.width+screen.height),Zi=Xd(wf.cookie+"|"+wf.location+
"|"+(new Date).getTime()+"|"+Math.random()),wg=ib("random/maxObserveMousemove")||0,0!=wg&&gb("mousemove",ni,"add","at"));var ff=function(){var Nc=ge.onl;if(!Nc){Nc=th();ge.onl=Nc;var Hc=th();Nc.e=function(Jd){var De=Hc[Jd];De&&(delete Hc[Jd],De())};Nc.a=function(Jd,De){Hc[Jd]=De};Nc.r=function(Jd){delete Hc[Jd]}}return Nc},af=function(Nc,Hc){Hc=Hc.onload;return"function"===typeof Hc?(ff().a(Nc,Hc),Hc):null},Gf=function(Nc){P(/^\w+$/.test(Nc),"Unsupported id - "+Nc);return'onload="window.___jsl.onl.e(&#34;'+
Nc+'&#34;)"'},Jh=function(Nc){ff().r(Nc)},ci={allowtransparency:"true",frameborder:"0",hspace:"0",marginheight:"0",marginwidth:"0",scrolling:"no",style:"",tabindex:"0",vspace:"0",width:"100%"},di={allowtransparency:!0,onload:!0},vj=0,pj=function(Nc){P(!Nc||Ya.test(Nc),"Illegal url for new iframe - "+Nc)},kj=function(Nc,Hc,Jd,De,df){pj(Jd.src);var uf,Yf=af(De,Jd),Ch=Yf?Gf(De):"";try{document.all&&(uf=Nc.createElement('<iframe frameborder="'+Ta(String(Jd.frameborder))+'" scrolling="'+Ta(String(Jd.scrolling))+
'" '+Ch+' name="'+Ta(String(Jd.name))+'"/>'))}catch(oi){}finally{uf||(uf=(Nc?new dg(ti(Nc)):xc||(xc=new dg)).ha("IFRAME"),Yf&&(uf.onload=function(){uf.onload=null;Yf.call(this)},Jh(De)))}uf.setAttribute("ng-non-bindable","");for(var Fh in Jd)Nc=Jd[Fh],"style"===Fh&&"object"===Rc(Nc)?Yb(Nc,uf.style):di[Fh]||uf.setAttribute(Fh,String(Nc));(Fh=df&&df.beforeNode||null)||df&&df.dontclear||Pd(Hc);Hc.insertBefore(uf,Fh);uf=Fh?Fh.previousSibling:Hc.lastChild;Jd.allowtransparency&&(uf.allowTransparency=!0);
return uf},Ih=/^:[\w]+$/,mk=/:([a-zA-Z_]+):/g,fl=function(){var Nc=Dc()||"0",Hc=kd(),Jd=Dc()||Nc,De=kd(),df="";Jd&&(df+="u/"+encodeURIComponent(String(Jd))+"/");De&&(df+="b/"+encodeURIComponent(String(De))+"/");Jd=df||null;(df=(De=!1===ib("isLoggedIn"))?"_/im/":"")&&(Jd="");var uf=ib("iframes/:socialhost:"),Yf=ib("iframes/:im_socialhost:");return{socialhost:uf,ctx_socialhost:De?Yf:uf,session_index:Nc,session_delegate:Hc,session_prefix:Jd,im_prefix:df}},Al=function(Nc,Hc){return fl()[Hc]||""},rg=function(Nc){return function(Hc,
Jd){return Nc?fl()[Jd]||Nc[Jd]||"":fl()[Jd]||""}},Sg=function(Nc){var Hc;Nc.match(/^https?%3A/i)&&(Hc=decodeURIComponent(Nc));return R(document,Hc?Hc:Nc)},Lj=function(Nc){Nc=Nc||"canonical";for(var Hc=document.getElementsByTagName("link"),Jd=0,De=Hc.length;Jd<De;Jd++){var df=Hc[Jd],uf=df.getAttribute("rel");if(uf&&uf.toLowerCase()==Nc&&(df=df.getAttribute("href"))&&(df=Sg(df))&&null!=df.match(/^https?:\/\/[\w\-_\.]+/i))return df}return window.location.href},gl={se:"0"},ao={post:!0},Dn={style:"position:absolute;top:-10000px;width:450px;margin:0px;border-style:none"},
xm="onPlusOne _ready _close _open _resizeMe _renderstart oncircled drefresh erefresh".split(" "),Nl=Vd(ge,"WI",th()),En=function(Nc,Hc,Jd){var De,df={},uf=De=Nc;"plus"==Nc&&Hc.action&&(De=Nc+"_"+Hc.action,uf=Nc+"/"+Hc.action);(De=gi("iframes/"+De+"/url"))||(De=":im_socialhost:/:session_prefix::im_prefix:_/widget/render/"+uf+"?usegapi=1");for(var Yf in gl)df[Yf]=Yf+"/"+(Hc[Yf]||gl[Yf])+"/";df=R(wf,De.replace(mk,rg(df)));Yf="iframes/"+Nc+"/params/";uf={};Yb(Hc,uf);(De=gi("lang")||gi("gwidget/lang"))&&
(uf.hl=De);ao[Nc]||(uf.origin=window.location.origin||window.location.protocol+"//"+window.location.host);uf.exp=gi(Yf+"exp");if(Yf=gi(Yf+"location"))for(De=0;De<Yf.length;De++){var Ch=Yf[De];uf[Ch]=mg.location[Ch]}switch(Nc){case "plus":case "follow":Yf=uf.href;De=Hc.action?void 0:"publisher";Yf=(Yf="string"==typeof Yf?Yf:void 0)?Sg(Yf):Lj(De);uf.url=Yf;delete uf.href;break;case "plusone":Yf=(Yf=Hc.href)?Sg(Yf):Lj();uf.url=Yf;Yf=Hc.db;De=gi();null==Yf&&De&&(Yf=De.db,null==Yf&&(Yf=De.gwidget&&De.gwidget.db));
uf.db=Yf||void 0;Yf=Hc.ecp;De=gi();null==Yf&&De&&(Yf=De.ecp,null==Yf&&(Yf=De.gwidget&&De.gwidget.ecp));uf.ecp=Yf||void 0;delete uf.href;break;case "signin":uf.url=Lj()}ge.ILI&&(uf.iloader="1");delete uf["data-onload"];delete uf.rd;for(var Fh in gl)uf[Fh]&&delete uf[Fh];uf.gsrc=gi("iframes/:source:");Fh=gi("inline/css");"undefined"!==typeof Fh&&0<Jd&&Fh>=Jd&&(uf.ic="1");Fh=/^#|^fr-/;Jd={};for(var oi in uf)Be(uf,oi)&&Fh.test(oi)&&(Jd[oi.replace(Fh,"")]=uf[oi],delete uf[oi]);oi="q"==gi("iframes/"+Nc+
"/params/si")?uf:Jd;Fh=Hh();for(var Ri in Fh)!Be(Fh,Ri)||Be(uf,Ri)||Be(Jd,Ri)||(oi[Ri]=Fh[Ri]);Ri=[].concat(xm);(oi=gi("iframes/"+Nc+"/methods"))&&"object"===Rc(oi)&&gd.test(oi.push)&&(Ri=Ri.concat(oi));for(var Th in Hc)Be(Hc,Th)&&/^on/.test(Th)&&("plus"!=Nc||"onconnect"!=Th)&&(Ri.push(Th),delete uf[Th]);delete uf.callback;Jd._methods=Ri.join(",");return mb(df,uf,Jd)},lq=["style","data-gapiscan"],lm=function(Nc){for(var Hc=th(),Jd=0!=Nc.nodeName.toLowerCase().indexOf("g:"),De=0,df=Nc.attributes.length;De<
df;De++){var uf=Nc.attributes[De],Yf=uf.name,Ch=uf.value;0<=sf.call(lq,Yf)||Jd&&0!=Yf.indexOf("data-")||"null"===Ch||"specified"in uf&&!uf.specified||(Jd&&(Yf=Yf.substr(5)),Hc[Yf.toLowerCase()]=Ch)}Nc=Nc.style;(Jd=yo(Nc&&Nc.height))&&(Hc.height=String(Jd));(Nc=yo(Nc&&Nc.width))&&(Hc.width=String(Nc));return Hc},yo=function(Nc){var Hc=void 0;"number"===typeof Nc?Hc=Nc:"string"===typeof Nc&&(Hc=parseInt(Nc,10));return Hc},Fl=function(){var Nc=ge.drw;qa(function(Hc){if(Nc!==Hc.id&&4!=Hc.state&&"share"!=
Hc.type){var Jd=Hc.id,De=Hc.type,df=Hc.url;Hc=Hc.userParams;var uf=wf.getElementById(Jd);if(uf){var Yf=En(De,Hc,0);Yf?(uf=uf.parentNode,df.replace(/#.*/,"").replace(/(\?|&)ic=1/,"")!==Yf.replace(/#.*/,"").replace(/(\?|&)ic=1/,"")&&(Hc.dontclear=!0,Hc.rd=!0,Hc.ri=!0,Hc.type=De,Nm(uf,Hc),(De=O[uf.lastChild.id])&&(De.oid=Jd),Ba(Jd,4))):delete O[Jd]}else delete O[Jd]}})},mq=/(?:^|\s)g-((\S)*)(?:$|\s)/,mp={plusone:!0,autocomplete:!0,profile:!0,signin:!0,signin2:!0};var bo=Vd(ge,"SW",th());var yj=Vd(ge,
"SA",th());var Fn=Vd(ge,"SM",th());var np=Vd(ge,"FW",[]);var Ym=null;var on=function(Nc,Hc){return("string"===typeof Nc?document.getElementById(Nc):Nc)||Hc},pn=function(Nc,Hc){zo(void 0,!1,Nc,Hc)},zo=function(Nc,Hc,Jd,De){Hd("ps0",!0);Jd=on(Jd,wf);var df=wf.documentMode;if(Jd.querySelectorAll&&(!df||8<df)){df=De?[De]:cb(bo).concat(cb(yj)).concat(cb(Fn));for(var uf=[],Yf=0;Yf<df.length;Yf++){var Ch=df[Yf];uf.push(".g-"+Ch,"g\\:"+Ch)}df=Jd.querySelectorAll(uf.join(","))}else df=Jd.getElementsByTagName("*");
Jd=th();for(uf=0;uf<df.length;uf++){var Fh=Yf=df[uf];Ch=De;var oi=Fh.nodeName.toLowerCase(),Ri=void 0;if(Fh.getAttribute("data-gapiscan"))Ch=null;else{var Th=oi.indexOf("g:");0==Th?Ri=oi.substr(2):(Th=(Th=String(Fh.className||Fh.getAttribute("class")))&&mq.exec(Th))&&(Ri=Th[1]);Ch=!Ri||!(bo[Ri]||yj[Ri]||Fn[Ri])||Ch&&Ri!==Ch?null:Ri}Ch&&(mp[Ch]||0==Yf.nodeName.toLowerCase().indexOf("g:")||0!=cb(lm(Yf)).length)&&(Yf.setAttribute("data-gapiscan",!0),Vd(Jd,Ch,[]).push(Yf))}if(Hc)for(var Ui in Jd)for(Hc=
Jd[Ui],De=0;De<Hc.length;De++)Hc[De].setAttribute("data-onload",!0);for(var Vk in Jd)np.push(Vk);Hd("ps1",!0);if((Ui=np.join(":"))||Nc)try{pa.load(Ui,Nc)}catch(ok){C.log(ok);return}if(pp(Ym||{}))for(var Mk in Jd){Nc=Jd[Mk];Vk=0;for(Hc=Nc.length;Vk<Hc;Vk++)Nc[Vk].removeAttribute("data-gapiscan");qn(Mk)}else{De=[];for(Mk in Jd)for(Nc=Jd[Mk],Vk=0,Hc=Nc.length;Vk<Hc;Vk++)df=Nc[Vk],Mm(Mk,df,lm(df),De,Hc);qj(Ui,De)}},op=function(Nc){var Hc=Vd(pa,Nc,{});Hc.go||(Hc.go=function(Jd){return pn(Jd,Nc)},Hc.render=
function(Jd,De){De=De||{};De.type=Nc;return Nm(Jd,De)})},zj=function(Nc){bo[Nc]=!0},Oh=function(Nc){yj[Nc]=!0},ym=function(Nc){Fn[Nc]=!0},qn=function(Nc,Hc){var Jd=pf(Nc);Hc&&Jd?(Jd(Hc),(Jd=Hc.iframeNode)&&Jd.setAttribute("data-gapiattached",!0)):pa.load(Nc,function(){var De=pf(Nc),df=Hc&&Hc.iframeNode,uf=Hc&&Hc.userParams;df&&De?(De(Hc),df.setAttribute("data-gapiattached",!0)):(De=pa[Nc].go,"signin2"==Nc?De(df,uf):De(df&&df.parentNode,uf))})},pp=function(){return!1},qj=function(){},Mm=function(Nc,
Hc,Jd,De,df,uf){switch(Ao(Hc,Nc,uf)){case 0:Nc=Fn[Nc]?Nc+"_annotation":Nc;De={};De.iframeNode=Hc;De.userParams=Jd;qn(Nc,De);break;case 1:if(Hc.parentNode){for(var Yf in Jd){if(uf=Be(Jd,Yf))uf=Jd[Yf],uf=!!uf&&"object"===Rc(uf)&&(!uf.toString||uf.toString===Object.prototype.toString||uf.toString===Array.prototype.toString);if(uf)try{Jd[Yf]=xf(Jd[Yf])}catch(mm){delete Jd[Yf]}}var Ch=!0;Jd.dontclear&&(Ch=!1);delete Jd.dontclear;T();uf=En(Nc,Jd,df);Yf={allowPost:1,attributes:Dn};Yf.dontclear=!Ch;df={};
df.userParams=Jd;df.url=uf;df.type=Nc;if(Jd.rd)var Fh=Hc;else Fh=document.createElement("div"),Hc.setAttribute("data-gapistub",!0),Fh.style.cssText="position:absolute;width:450px;left:-10000px;",Hc.parentNode.insertBefore(Fh,Hc);df.siteElement=Fh;Fh.id||(Hc=Fh,Vd(Nl,Nc,0),Ch="___"+Nc+"_"+Nl[Nc]++,Hc.id=Ch);Hc=th();Hc[">type"]=Nc;Yb(Jd,Hc);Ch=uf;Jd=Fh;uf=Yf||{};Hc=uf.attributes||{};P(!(uf.allowPost||uf.forcePost)||!Hc.onload,"onload is not supported by post iframe (allowPost or forcePost)");Yf=Hc=
Ch;Ih.test(Hc)&&(Yf=ib("iframes/"+Yf.substring(1)+"/url"),P(!!Yf,"Unknown iframe url config for - "+Hc));Ch=R(wf,Yf.replace(mk,Al));Hc=Jd.ownerDocument||wf;Fh=0;do Yf=uf.id||["I",vj++,"_",(new Date).getTime()].join("");while(Hc.getElementById(Yf)&&5>++Fh);P(5>Fh,"Error creating iframe id");Fh={};var oi={};Hc.documentMode&&9>Hc.documentMode&&(Fh.hostiemode=Hc.documentMode);Yb(uf.queryParams||{},Fh);Yb(uf.fragmentParams||{},oi);var Ri=uf.pfname,Th=th();ib("iframes/dropLegacyIdParam")||(Th.id=Yf);Th._gfid=
Yf;Th.parent=Hc.location.protocol+"//"+Hc.location.host;var Ui=wa(Hc.location.href,"parent");Ri=Ri||"";!Ri&&Ui&&(Ui=wa(Hc.location.href,"_gfid","")||wa(Hc.location.href,"id",""),Ri=wa(Hc.location.href,"pfname",""),Ri=Ui?Ri+"/"+Ui:"");Ri||(Ui=Me(wa(Hc.location.href,"jcp","")))&&"object"==Rc(Ui)&&(Ri=(Ri=Ui.id)?Ui.pfname+"/"+Ri:"");Th.pfname=Ri;uf.connectWithJsonParam&&(Ui={},Ui.jcp=xf(Th),Th=Ui);Ui=wa(Ch,"rpctoken")||Fh.rpctoken||oi.rpctoken;if(!Ui){if(!(Ui=uf.rpctoken)){Ui=String;Ri=Math;var Vk=Ri.round;
if(Wh){var Mk=new mg.Uint32Array(1);gg.getRandomValues(Mk);Mk=Number("0."+Mk[0])}else Mk=Qi,Mk+=parseInt(Zi.substr(0,20),16),Zi=Xd(Zi),Mk/=Di+Math.pow(16,20);Ui=Ui(Vk.call(Ri,1E8*Mk))}Th.rpctoken=Ui}uf.rpctoken=Ui;Yb(Th,uf.connectWithQueryParams?Fh:oi);Ui=Hc.location.href;Th=th();(Ri=wa(Ui,"_bsh",ge.bsh))&&(Th._bsh=Ri);(Ui=Ce(Ui))&&(Th.jsh=Ui);uf.hintInFragment?Yb(Th,oi):Yb(Th,Fh);Ch=mb(Ch,Fh,oi,uf.paramsSerializer);oi=th();Yb(ci,oi);Yb(uf.attributes,oi);oi.name=oi.id=Yf;oi.src=Ch;uf.eurl=Ch;Fh=uf||
{};Th=!!Fh.allowPost;if(Fh.forcePost||Th&&2E3<Ch.length){Fh=ua(Ch);oi.src="";uf.dropDataPostorigin||(oi["data-postorigin"]=Ch);Ch=kj(Hc,Jd,oi,Yf);if(-1!=navigator.userAgent.indexOf("WebKit")){var ok=Ch.contentWindow.document;ok.open();oi=ok.createElement("div");Th={};Ui=Yf+"_inner";Th.name=Ui;Th.src="";Th.style="display:none";kj(Hc,oi,Th,Ui,uf)}oi=(uf=Fh.query[0])?uf.split("&"):[];uf=[];for(Th=0;Th<oi.length;Th++)Ui=oi[Th].split("=",2),uf.push([decodeURIComponent(Ui[0]),decodeURIComponent(Ui[1])]);
Fh.query=[];oi=ha(Fh);P(Ya.test(oi),"Invalid URL: "+oi);Fh=Hc.createElement("form");Fh.method="POST";Fh.target=Yf;Fh.style.display="none";Yf=oi instanceof zc?oi:Uc(oi);We(Fh,"HTMLFormElement").action=Fc(Yf);for(Yf=0;Yf<uf.length;Yf++)oi=Hc.createElement("input"),oi.type="hidden",oi.name=uf[Yf][0],oi.value=uf[Yf][1],Fh.appendChild(oi);Jd.appendChild(Fh);Fh.submit();Fh.parentNode.removeChild(Fh);ok&&ok.close();ok=Ch}else ok=kj(Hc,Jd,oi,Yf,uf);df.iframeNode=ok;df.id=ok.getAttribute("id");ok=df.id;Jd=
th();Jd.id=ok;Jd.userParams=df.userParams;Jd.url=df.url;Jd.type=df.type;Jd.state=1;O[ok]=Jd;ok=df}else ok=null;ok&&((df=ok.id)&&De.push(df),qn(Nc,ok))}},Ao=function(Nc,Hc,Jd){if(Nc&&1===Nc.nodeType&&Hc){if(Jd)return 1;if(Fn[Hc]){if(Zd[Nc.nodeName.toLowerCase()])return(Nc=Nc.innerHTML)&&Nc.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")?0:1}else{if(yj[Hc])return 0;if(bo[Hc])return 1}}return null},Nm=function(Nc,Hc){var Jd=Hc.type;delete Hc.type;var De=on(Nc);if(De){Nc={};for(var df in Hc)Be(Hc,df)&&(Nc[df.toLowerCase()]=
Hc[df]);Nc.rd=1;(Hc=!!Nc.ri)&&delete Nc.ri;df=[];Mm(Jd,De,Nc,df,0,Hc);qj(Jd,df)}else C.log("string"==="gapi."+Jd+".render: missing element "+Rc(Nc)?Nc:"")};Vd(pa,"platform",{}).go=pn;pp=function(Nc){for(var Hc=["_c","jsl","h"],Jd=0;Jd<Hc.length&&Nc;Jd++)Nc=Nc[Hc[Jd]];Hc=Ce(mf.href);return!Nc||0!=Nc.indexOf("n;")&&0!=Hc.indexOf("n;")&&Nc!==Hc};qj=function(Nc,Hc){tp(Nc,Hc)};var Om=function(Nc){zo(Nc,!0)},co=function(Nc,Hc){Hc=Hc||[];for(var Jd=0;Jd<Hc.length;++Jd)Nc(Hc[Jd]);for(Nc=0;Nc<Hc.length;Nc++)op(Hc[Nc])};
vg.push(["platform",function(Nc,Hc,Jd){Ym=Jd;(Hc||Jd.features)&&np.push(Hc||Jd.features.join(":"));co(zj,Nc);co(Oh,Jd._c.annotation);co(ym,Jd._c.bimodal);yg();Ji();if("explicit"!=gi("parsetags")){$e(Nc);Zf(Hh())&&!gi("disableRealtimeCallback")&&T();if(Jd&&(Nc=Jd.callback)){var De=de(Nc);delete Jd.callback}Sc(function(){Om(De)})}}]);pa._pl=!0;var qp=function Jd(Hc){if(Hc=(Hc=O[Hc])?Hc.oid:void 0){var De=wf.getElementById(Hc);De&&De.parentNode.removeChild(De);delete O[Hc];Jd(Hc)}},rp=/^\{h:'/,sp=/^!_/,
Bo="",tp=function(Hc,Jd){function De(){gb("message",df,"remove","de")}function df(Yf){var Ch=Yf.data,Fh=Yf.origin;if(rn(Ch,Jd)){var oi=uf;uf=!1;oi&&Hd("rqe");up(Hc,function(){oi&&Hd("rqd");De();for(var Ri=Vd(ge,"RPMQ",[]),Th=0;Th<Ri.length;Th++)Ri[Th]({data:Ch,origin:Fh})})}}if(0!==Jd.length){Bo=wa(mf.href,"pfname","");var uf=!0;gb("message",df,"add","at");Ye(Hc,De)}},rn=function(Hc,Jd){Hc=String(Hc);if(rp.test(Hc))return!0;var De=!1;sp.test(Hc)&&(De=!0,Hc=Hc.substr(2));if(!/^\{/.test(Hc))return!1;
var df=Me(Hc);if(!df)return!1;Hc=df.f;if(df.s&&Hc&&-1!=sf.call(Jd,Hc)){if("_renderstart"===df.s||df.s===Bo+"/"+Hc+"::_renderstart")if(df=df.a&&df.a[De?0:1],Jd=wf.getElementById(Hc),Ba(Hc,2),df&&Jd&&df.width&&df.height){a:{De=Jd.parentNode;Hc=df||{};if(K()){var uf=Jd.id;if(uf){df=(df=O[uf])?df.state:void 0;if(1===df||4===df)break a;qp(uf)}}(df=De.nextSibling)&&df.getAttribute&&df.getAttribute("data-gapistub")&&(De.parentNode.removeChild(df),De.style.cssText="");df=Hc.width;var Yf=Hc.height,Ch=De.style;
Ch.textIndent="0";Ch.margin="0";Ch.padding="0";Ch.background="transparent";Ch.borderStyle="none";Ch.cssFloat="none";Ch.styleFloat="none";Ch.lineHeight="normal";Ch.fontSize="1px";Ch.verticalAlign="baseline";De=De.style;De.display="inline-block";Ch=Jd.style;Ch.position="static";Ch.left="0";Ch.top="0";Ch.visibility="visible";df&&(De.width=Ch.width=df+"px");Yf&&(De.height=Ch.height=Yf+"px");Hc.verticalAlign&&(De.verticalAlign=Hc.verticalAlign);uf&&Ba(uf,3)}Jd["data-csi-wdt"]=(new Date).getTime()}return!0}return!1},
up=function(Hc,Jd){Ye(Hc,Jd)},sn=function(Hc,Jd){this.N=Hc;Hc=Jd||{};this.ia=Number(Hc.maxAge)||0;this.W=Hc.domain;this.Y=Hc.path;this.ja=!!Hc.secure};sn.prototype.read=function(){for(var Hc=this.N+"=",Jd=document.cookie.split(/;\s*/),De=0;De<Jd.length;++De){var df=Jd[De];if(0==df.indexOf(Hc))return df.substr(Hc.length)}};sn.prototype.write=function(Hc,Jd){if(!Gn.test(this.N))throw"Invalid cookie name";if(!vp.test(Hc))throw"Invalid cookie value";Hc=this.N+"="+Hc;this.W&&(Hc+=";domain="+this.W);this.Y&&
(Hc+=";path="+this.Y);Jd="number"===typeof Jd?Jd:this.ia;if(0<=Jd){var De=new Date;De.setSeconds(De.getSeconds()+Jd);Hc+=";expires="+De.toUTCString()}this.ja&&(Hc+=";secure");document.cookie=Hc;return!0};sn.prototype.clear=function(){this.write("",0)};var vp=/^[-+/_=.:|%&a-zA-Z0-9@]*$/,Gn=/^[A-Z_][A-Z0-9_]{0,63}$/;sn.iterate=function(Hc){for(var Jd=document.cookie.split(/;\s*/),De=0;De<Jd.length;++De){var df=Jd[De].split("="),uf=df.shift();Hc(uf,df.join("="))}};var Hn=function(Hc){this.G=Hc};Hn.prototype.read=
function(){if(Zm.hasOwnProperty(this.G))return Zm[this.G]};Hn.prototype.write=function(Hc){Zm[this.G]=Hc;return!0};Hn.prototype.clear=function(){delete Zm[this.G]};var Zm={};Hn.iterate=function(Hc){for(var Jd in Zm)Zm.hasOwnProperty(Jd)&&Hc(Jd,Zm[Jd])};var wp="https:"===window.location.protocol,eo=wp||"http:"===window.location.protocol?sn:Hn,In=function(Hc){var Jd=Hc.substr(1),De="",df=window.location.hostname;if(""!==Jd){De=parseInt(Jd,10);if(isNaN(De))return null;Jd=df.split(".");if(Jd.length<De-
1)return null;Jd.length==De-1&&(df="."+df)}else df="";return{l:"S"==Hc.charAt(0),domain:df,o:De}},nq=function(){var Hc,Jd=null;eo.iterate(function(De,df){0===De.indexOf("G_AUTHUSER_")&&(De=In(De.substring(11)),!Hc||De.l&&!Hc.l||De.l==Hc.l&&De.o>Hc.o)&&(Hc=De,Jd=df)});return{ga:Hc,K:Jd}},Jn=function(Hc){if(!Hc)return[];Hc=Hc.split("=");return Hc[1]?Hc[1].split("|"):[]},xp=function(Hc){Hc=Hc.split(":");return{clientId:Hc[0].split("=")[1],la:Jn(Hc[1]),qa:Jn(Hc[2]),pa:Jn(Hc[3])}},Kn=function(){var Hc=
nq(),Jd=Hc.ga;Hc=Hc.K;if(null!==Hc){var De;eo.iterate(function(Yf,Ch){(Yf=Fa(Yf))&&Yf.X&&Yf.l==Jd.l&&Yf.o==Jd.o&&(De=Ch)});if(De){var df=xp(De),uf=df&&df.la[Number(Hc)];df=df&&df.clientId;if(uf)return{K:Hc,ka:uf,clientId:df}}}return null},Do=function(){this.V=oq};Of=Do.prototype;Of.ba=function(){this.M||(this.A=0,this.M=!0,this.Z())};Of.Z=function(){this.M&&(this.V()?this.A=this.T:this.A=Math.min(2*(this.A||this.T),120),window.setTimeout(id(this.Z,this),1E3*this.A))};Of.A=0;Of.T=2;Of.V=null;Of.M=
!1;var Eo=null;K=function(){return ge.oa=!0};T=function(){ge.oa=!0;var Hc=Kn();(Hc=Hc&&Hc.K)&&xj("googleapis.config/sessionIndex",Hc);Eo||(Eo=Vd(ge,"ss",new Do));Hc=Eo;Hc.ba&&Hc.ba()};var oq=function(){var Hc=Kn(),Jd=Hc&&Hc.ka||null,De=Hc&&Hc.clientId;Ye("auth",{callback:function(){var df=mg.gapi.auth,uf={client_id:De,session_state:Jd};df.checkSessionState(uf,function(Yf){var Ch=uf.session_state,Fh=!!gi("isLoggedIn");Yf=gi("debug/forceIm")?!1:Ch&&Yf||!Ch&&!Yf;if(Fh=Fh!==Yf)xj("isLoggedIn",Yf),T(),
Fl(),Yf||((Yf=df.signOut)?Yf():(Yf=df.setToken)&&Yf(null));Yf=Hh();var oi=gi("savedUserState");Ch=df._guss(Yf.cookiepolicy);oi=oi!=Ch&&"undefined"!=typeof oi;xj("savedUserState",Ch);(Fh||oi)&&Zf(Yf)&&!gi("disableRealtimeCallback")&&df._pimf(Yf,!0)})}});return!0};vg.unshift(["url",function(Hc,Jd,De){!Hc||Jd&&""!==Jd||!Hc.endsWith(".js")||(Hc=Hc.substring(0,Hc.length-3),Jd=Hc.lastIndexOf("/")+1,Jd>=Hc.length||(Hc=Hc.substr(Jd).split(":").filter(function(df){return!["api","platform"].includes(df)}),
De.features=Hc))}]);Hd("bs0",!0,window.gapi._bs);Hd("bs1",!0);delete window.gapi._bs;window.gapi.load("",{callback:window.gapi_onload,_c:{url:"https://apis.google.com/js/platform.js",jsl:{ci:{"oauth-flow":{authUrl:"https://accounts.google.com/o/oauth2/auth",proxyUrl:"https://accounts.google.com/o/oauth2/postmessageRelay",disableOpt:!0,idpIframeUrl:"https://accounts.google.com/o/oauth2/iframe",usegapi:!1},debug:{reportExceptionRate:1,forceIm:!1,rethrowException:!0,host:"https://apis.google.com"},enableMultilogin:!0,
"googleapis.config":{auth:{useFirstPartyAuthV2:!0},root:"https://content.googleapis.com","root-1p":"https://clients6.google.com"},inline:{css:1},disableRealtimeCallback:!1,drive_share:{skipInitCommand:!0},csi:{rate:.01},client:{cors:!1},signInDeprecation:{rate:0},include_granted_scopes:!0,llang:"en",iframes:{youtube:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/youtube?usegapi=1",methods:["scroll","openwindow"]},ytsubscribe:{url:"https://www.youtube.com/subscribe_embed?usegapi=1"},
plus_circle:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/plus/circle?usegapi=1"},plus_share:{params:{url:""},url:":socialhost:/:session_prefix::se:_/+1/sharebutton?plusShare=true&usegapi=1"},rbr_s:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarsimplescroller"},":source:":"3p",playemm:{url:"https://play.google.com/work/embedded/search?usegapi=1&usegapi=1"},savetoandroidpay:{url:"https://pay.google.com/gp/v/widget/save"},blogger:{params:{location:["search",
"hash"]},url:":socialhost:/:session_prefix:_/widget/render/blogger?usegapi=1",methods:["scroll","openwindow"]},evwidget:{params:{url:""},url:":socialhost:/:session_prefix:_/events/widget?usegapi=1"},partnersbadge:{url:"https://www.gstatic.com/partners/badge/templates/badge.html?usegapi=1"},dataconnector:{url:"https://dataconnector.corp.google.com/:session_prefix:ui/widgetview?usegapi=1"},surveyoptin:{url:"https://www.google.com/shopping/customerreviews/optin?usegapi=1"},":socialhost:":"https://apis.google.com",
shortlists:{url:""},hangout:{url:"https://talkgadget.google.com/:session_prefix:talkgadget/_/widget"},plus_followers:{params:{url:""},url:":socialhost:/_/im/_/widget/render/plus/followers?usegapi=1"},post:{params:{url:""},url:":socialhost:/:session_prefix::im_prefix:_/widget/render/post?usegapi=1"},signin:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/signin?usegapi=1",methods:["onauth"]},rbr_i:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarinvitation"},
share:{url:":socialhost:/:session_prefix::im_prefix:_/widget/render/share?usegapi=1"},plusone:{params:{count:"",size:"",url:""},url:":socialhost:/:session_prefix::se:_/+1/fastbutton?usegapi=1"},comments:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/comments?usegapi=1",methods:["scroll","openwindow"]},":im_socialhost:":"https://plus.googleapis.com",backdrop:{url:"https://clients3.google.com/cast/chromecast/home/widget/backdrop?usegapi=1"},visibility:{params:{url:""},
url:":socialhost:/:session_prefix:_/widget/render/visibility?usegapi=1"},autocomplete:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/autocomplete"},":signuphost:":"https://plus.google.com",ratingbadge:{url:"https://www.google.com/shopping/customerreviews/badge?usegapi=1"},appcirclepicker:{url:":socialhost:/:session_prefix:_/widget/render/appcirclepicker"},follow:{url:":socialhost:/:session_prefix:_/widget/render/follow?usegapi=1"},community:{url:":ctx_socialhost:/:session_prefix::im_prefix:_/widget/render/community?usegapi=1"},
sharetoclassroom:{url:"https://classroom.google.com/sharewidget?usegapi=1"},ytshare:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/ytshare?usegapi=1"},plus:{url:":socialhost:/:session_prefix:_/widget/render/badge?usegapi=1"},family_creation:{params:{url:""},url:"https://families.google.com/webcreation?usegapi=1&usegapi=1"},commentcount:{url:":socialhost:/:session_prefix:_/widget/render/commentcount?usegapi=1"},configurator:{url:":socialhost:/:session_prefix:_/plusbuttonconfigurator?usegapi=1"},
zoomableimage:{url:"https://ssl.gstatic.com/microscope/embed/"},appfinder:{url:"https://workspace.google.com/:session_prefix:marketplace/appfinder?usegapi=1"},savetowallet:{url:"https://pay.google.com/gp/v/widget/save"},person:{url:":socialhost:/:session_prefix:_/widget/render/person?usegapi=1"},savetodrive:{url:"https://drive.google.com/savetodrivebutton?usegapi=1",methods:["save"]},page:{url:":socialhost:/:session_prefix:_/widget/render/page?usegapi=1"},card:{url:":socialhost:/:session_prefix:_/hovercard/card"}}},
h:"m;/_/scs/abc-static/_/js/k=gapi.lb.en.z9QjrzsHcOc.O/d=1/rs=AHpOoo8359JQqZQ0dzCVJ5Ui3CZcERHEWA/m=__features__",u:"https://apis.google.com/js/platform.js",hee:!0,dpo:!1,le:["scs"]},platform:"backdrop blogger comments commentcount community donation family_creation follow hangout health page partnersbadge person playemm playreview plus plusone post ratingbadge savetoandroidpay savetodrive savetowallet sharetoclassroom shortlists signin2 surveyoptin visibility youtube ytsubscribe zoomableimage".split(" "),
annotation:["interactivepost","recobar","signin2","autocomplete","profile"]}})}).call(Nb.commonjsHelpers.commonjsGlobal);Nb.__moduleExports=pb;Nb.platform=pb;Nb["default"]=pb;Nb.platform=pb;var zb=window.lively.FreezerRuntime.recorderFor("lively.user/morphic/user-ui.js");zb.notify=function(rb,Ib){return Vb.apply(this,arguments)};zb.promise=ad;zb.arr=Ne;zb.string=Cb;zb.resource=Sd;zb.pt=ve;zb.Rectangle=uc;zb.Color=dd;zb.connect=vd;zb.once=Ed;zb.signal=fe;zb.morph=jc;zb.easings=Od;zb.touchInputDevice=
qb;zb.Icon=ic;zb.config=Wb;zb.Morph=lc;zb.part=db;zb.Menu=eb;zb.pathForBrowserHistory=Xa;zb.loadMorphFromSnapshot=Gb;zb.createMorphSnapshot=sc;zb.UserRegistry=ub;zb.ClientUser=sb;zb.gapi=pb.gapi;zb.ObjectPackage=kc;pb=bd("UserUI",{getCurrentUser:function(){return zb.UserRegistry.current.loadUserFromLocalStorage(zb.config.users.authServerURL)},showUserFlap:function(){var rb=arguments;return Db(regeneratorRuntime.mark(function da(){var ka,va,Fa,M,Aa;return regeneratorRuntime.wrap(function(wb){for(;;)switch(wb.prev=
wb.next){case 0:return ka=0<rb.length&&void 0!==rb[0]?rb[0]:$world,wb.next=3,Dd.import("./top-bar.cp-fa0cb96d.js").then(function(Na){return Na.t});case 3:return va=wb.sent,Fa=va.TopBar,M=zb.part(Fa),M.epiMorph=!0,M.name="lively top bar",M.hasFixedPosition=!0,M.respondsToVisibleWindow=!0,M.openInWorld(),M.relayout(),M.top=-M.height,Aa=M.dropShadow,M.dropShadow=null,M.attachToTarget(ka),$world.onTopBarLoaded(),Dd.import("./__rootModule___commonjs-entry-51a55f66.js").then(function(Na){return Na.cd}),
Db(regeneratorRuntime.mark(function hb(){var Bb,ba,dc,la,Fb,vb,Ia;return regeneratorRuntime.wrap(function(xb){for(;;)switch(xb.prev=xb.next){case 0:return M.showCurrentUser(),xb.next=3,M.whenRendered();case 3:return xb.next=5,M.animate({position:zb.pt(0,0),dropShadow:Aa,duration:500});case 5:if(ka.metadata){xb.next=17;break}ka.animate({customTween:function(Rb){M.blur=ka.blur=3*Rb},duration:500});xb.next=9;return ka.askForName();case 9:return Bb=xb.sent,ka.name=Bb,ka.changeMetaData("commit",{name:Bb}),
window.history&&window.history.pushState({},"lively.next",zb.pathForBrowserHistory(Bb)),ba=zb.ObjectPackage.withId(zb.string.camelCaseString(Bb)),xb.next=16,ba.adoptObject(ka);case 16:ka.animate({customTween:function(Rb){M.blur=ka.blur=3*(1-Rb)},duration:500});case 17:return xb.next=19,Dd.import("./version-checker.cp-40b11d00.js");case 19:return dc=xb.sent,la=dc.LivelyVersionChecker,Fb=zb.part(la),Fb.name="lively version checker",Fb.openInWorld(),Fb.relayout(),Fb.checkVersion(),xb.next=28,Dd.import("./sidebar-flap.cp-b2c565d8.js");
case 28:vb=xb.sent,Ia=vb.Flap,zb.part(Ia,{viewModel:{target:"scene graph"}}).openInWorld(),zb.part(Ia,{viewModel:{target:"properties panel"}}).openInWorld();case 32:case "end":return xb.stop()}},hb)}))(),wb.abrupt("return",M);case 20:case "end":return wb.stop()}},da)}))()},hideUserFlap:function(){var rb=0<arguments.length&&void 0!==arguments[0]?arguments[0]:$world;rb.submorphs.filter(function(Ib){return"user flap"===Ib.name&&Ib.owner==rb}).forEach(function(Ib){return Ib.remove()})},showWidget:function(rb){var Ib=
arguments,da=this;return Db(regeneratorRuntime.mark(function va(){var Fa,M,Aa,wb,Na,hb;return regeneratorRuntime.wrap(function(Bb){for(;;)switch(Bb.prev=Bb.next){case 0:return Fa=1<Ib.length&&void 0!==Ib[1]?Ib[1]:{},M=Fa.modal,Aa=void 0===M?!0:M,wb=Fa.user,Na=void 0===wb?da.getCurrentUser():wb,Bb.next=4,da.loadMorph(rb);case 4:return hb=Bb.sent,Bb.abrupt("return",hb.run(Aa,Fa.world,Na));case 6:case "end":return Bb.stop()}},va)}))()},showUserInfo:function(){var rb=arguments,Ib=this;return Db(regeneratorRuntime.mark(function ka(){var va;
return regeneratorRuntime.wrap(function(Fa){for(;;)switch(Fa.prev=Fa.next){case 0:return va=0<rb.length&&void 0!==rb[0]?rb[0]:{},Fa.next=3,Ib.showWidget("user info",va);case 3:return Fa.abrupt("return",Fa.sent);case 4:case "end":return Fa.stop()}},ka)}))()},showLogin:function(){var rb=arguments,Ib=this;return Db(regeneratorRuntime.mark(function ka(){var va;return regeneratorRuntime.wrap(function(Fa){for(;;)switch(Fa.prev=Fa.next){case 0:return va=0<rb.length&&void 0!==rb[0]?rb[0]:{},Fa.abrupt("return",
Ib.showWidget("login widget",va));case 2:case "end":return Fa.stop()}},ka)}))()},showRegister:function(){var rb=arguments,Ib=this;return Db(regeneratorRuntime.mark(function ka(){var va;return regeneratorRuntime.wrap(function(Fa){for(;;)switch(Fa.prev=Fa.next){case 0:return va=0<rb.length&&void 0!==rb[0]?rb[0]:{},Fa.abrupt("return",Ib.showWidget("register widget",va));case 2:case "end":return Fa.stop()}},ka)}))()},loadMorph:function(rb,Ib){return Db(regeneratorRuntime.mark(function ka(){var va,Fa;
return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:M.t0=rb;M.next="login widget"===M.t0?3:"user info"===M.t0?6:"register widget"===M.t0?9:12;break;case 3:return M.next=5,zb.resource("part://SystemUserUI/login widget").read();case 5:return M.abrupt("return",M.sent);case 6:return M.next=8,zb.resource("part://SystemUserUI/user info").read();case 8:return M.abrupt("return",M.sent);case 9:return M.next=11,zb.resource("part://SystemUserUI/register widget").read();case 11:return M.abrupt("return",
M.sent);case 12:return va=System.decanonicalize("lively.user/morphic/".concat(rb,".json")),M.next=15,zb.resource(va).readJson();case 15:return Fa=M.sent,M.abrupt("return",zb.loadMorphFromSnapshot(Fa,Ib));case 17:case "end":return M.stop()}},ka)}))()}});zb.UserUI=pb;zb.UserUI=pb;(function(rb){var Ib=window.lively.FreezerRuntime.recorderFor("lively.user/morphic/user-ui.js"),da=Ib.hasOwnProperty("UserWidget")&&"function"===typeof Ib.UserWidget?Ib.UserWidget:Ib.UserWidget=function(ka){if(!ka||!ka[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return fa(da,rb,[{key:"run",value:function(){var ka=this,va=1<arguments.length&&void 0!==arguments[1]?arguments[1]:$world,Fa=2<arguments.length?arguments[2]:void 0;if(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)var M=va.addMorph({name:this.name+" overlay",hasFixedPosition:!0,grabbable:!1,draggable:!1,extent:va.extent,fill:zb.Color.black.withA(.4)});this.epiMorph=this.hasFixedPosition=!0;this.activate(Fa);return(new Promise(function(Aa,wb){zb.once(ka,"resolved",Aa)})).then(function(Aa){ka.remove();
M&&M.remove();return Aa})}},{key:"activate",value:function(ka){ka=$world;ka.addMorph(this);this.align(this.worldPoint(this.innerBounds().center()),ka.visibleBounds().center());this.focus()}},{key:"onKeyDown",value:function(ka){"Enter"===ka.keyCombo&&(this.onEnterPressed(),ka.stop());"Escape"===ka.keyCombo&&(this.onEscapePressed(),ka.stop());"Tab"===ka.keyCombo&&(this.focusNext(),ka.stop());"Shift-Tab"===ka.keyCombo&&(this.focusPrev(),ka.stop())}},{key:"focusOrder",value:function(){return[]}},{key:"focusNext",
value:function(){var ka=this.focusOrder(),va=this.world().focusedMorph;va=ka.indexOf(va)+1;va>ka.length-1&&(va=0);ka[va].focus()}},{key:"focusPrev",value:function(){var ka=this.focusOrder(),va=this.world().focusedMorph;va=ka.indexOf(va)-1;0>va&&(va=ka.length-1);ka[va].focus()}},{key:"onEscapePressed",value:function(){this.close()}},{key:"onEnterPressed",value:function(){}},{key:"close",value:function(){}},{key:"_save",value:function(){var ka=Db(regeneratorRuntime.mark(function Fa(){var M;return regeneratorRuntime.wrap(function(Aa){for(;;)switch(Aa.prev=
Aa.next){case 0:return Aa.next=2,zb.createMorphSnapshot(this);case 2:return M=Aa.sent,Aa.next=5,lively.modules.module("lively.user/morphic/".concat(this.name,".json")).changeSource(JSON.stringify(M,null,2),{doEval:!1});case 5:case "end":return Aa.stop()}},Fa,this)}));return function(){return ka.apply(this,arguments)}}()},{key:"_htmlExport",value:function(){var ka=Db(regeneratorRuntime.mark(function Fa(){var M,Aa,wb,Na,hb,Bb;return regeneratorRuntime.wrap(function(ba){for(;;)switch(ba.prev=ba.next){case 0:return M=
lively.modules.module,Aa=M("lively.user/html/".concat(this.name,".html")).id,wb=zb.resource(Aa),ba.next=5,M("lively.morphic/rendering/html-generator.js").load();case 5:return Na=ba.sent,hb=Na.generateHTML,ba.next=9,hb(this,wb,{isFragment:!0,addStyles:!1});case 9:return Bb=ba.sent,ba.abrupt("return",{resource:wb,html:Bb});case 11:case "end":return ba.stop()}},Fa,this)}));return function(){return ka.apply(this,arguments)}}()},{key:"htmlExport_transformNode",value:function(ka){this.focusOrder().forEach(function(va,
Fa){return ka.querySelector("#"+va.id).tabIndex=Fa+1});return ka}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"UserWidget"}},{key:"properties",get:function(){return{user:{}}}}],Ib,{pathInPackage:function(){return"./morphic/user-ui.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.user",version:"0.2.0"}}},{start:5808,end:8653})})(zb.Morph);
pb=bd("UserInfoWidget",function(rb){var Ib=window.lively.FreezerRuntime.recorderFor("lively.user/morphic/user-ui.js"),da=Ib.hasOwnProperty("UserInfoWidget")&&"function"===typeof Ib.UserInfoWidget?Ib.UserInfoWidget:Ib.UserInfoWidget=function(ka){if(!ka||!ka[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return fa(da,rb,[{key:"ui",get:function(){return{userNameInput:this.getSubmorphNamed("user name input"),passwordInput:this.getSubmorphNamed("password input"),
passwordInput2:this.getSubmorphNamed("password input 2"),emailInput:this.getSubmorphNamed("email input"),saveButton:this.getSubmorphNamed("save button"),logoutButton:this.getSubmorphNamed("logout button"),closeButton:this.getSubmorphNamed("close button"),userAvatar:this.getSubmorphNamed("user avatar")}}},{key:"activate",value:function(ka){fa._get(Object.getPrototypeOf(da.prototype),"activate",this).call(this,ka);this.displayUser(ka)}},{key:"focus",value:function(){this.ui.userNameInput.focus()}},
{key:"focusOrder",value:function(){var ka=this.ui;return[ka.userNameInput,ka.emailInput,ka.passwordInput,ka.passwordInput2]}},{key:"onEnterPressed",value:function(){this.trySave()}},{key:"reset",value:function(){this.withAllSubmorphsDo(function(ka){ka.draggable=!1;ka.grabbable=!1});zb.connect(this.ui.saveButton,"fire",this,"trySave");zb.connect(this.ui.logoutButton,"fire",this,"logout");zb.connect(this.ui.closeButton,"onMouseDown",this,"close");this.ui.userNameInput.readOnly=!0;this.ui.userNameInput.selectable=
!0;zb.notify(this,"OK")}},{key:"displayUser",value:function(ka){ka=(this.user=ka)||{};var va=ka.email,Fa=this.ui,M=Fa.emailInput,Aa=Fa.passwordInput,wb=Fa.passwordInput2,Na=Fa.userAvatar;Fa.userNameInput.input=ka.name||"";M.input=va||"";Aa.input="";wb.input="";Na.imageUrl=zb.resource("https://s.gravatar.com/avatar").join(zb.string.md5(va||"")).withQuery({s:320}).url}},{key:"trySave",value:function(){var ka=Db(regeneratorRuntime.mark(function Fa(){var M,Aa,wb,Na,hb,Bb,ba,dc,la,Fb,vb,Ia,xb,Rb;return regeneratorRuntime.wrap(function(yc){for(;;)switch(yc.prev=
yc.next){case 0:M=this.user;Aa=this.ui;wb=Aa.emailInput;Na=Aa.passwordInput;hb=Aa.passwordInput2;if(M){yc.next=3;break}return yc.abrupt("return",this.showError("no user object"));case 3:Bb=wb.input;ba=Na.input;dc=hb.input;if(M.email!=Bb||ba||dc){yc.next=9;break}return yc.abrupt("return",zb.signal(this,"resolved",M));case 9:if(!ba&&!dc){yc.next=22;break}if(ba===dc){yc.next=12;break}return yc.abrupt("return",this.world().inform("Passwords do not match!",{requester:this}));case 12:return yc.next=14,
this.world().passwordPrompt("To set a new password, please enter your old one",{requester:this});case 14:if(la=yc.sent){yc.next=17;break}return yc.abrupt("return",this.world().inform("Old password needed to change password, aborting!",{requester:this}));case 17:return yc.next=19,M.checkPassword(la);case 19:if(Fb=yc.sent){yc.next=22;break}return yc.abrupt("return",this.world().inform("Old password is not correct, aborting!",{requester:this}));case 22:return vb={},ba&&(vb.password=ba),Bb&&(vb.email=
Bb),yc.next=27,M.modify(vb);case 27:Ia=yc.sent;xb=Ia.status;Rb=Ia.error;if(!Rb){yc.next=32;break}return yc.abrupt("return",this.world().inform("Failed to modify: "+Rb,{requester:this}));case 32:return yc.next=34,zb.UserRegistry.current.saveUserToLocalStorage(M);case 34:return yc.next=36,zb.notify(this,xb);case 36:this.displayUser(M),zb.signal(this,"resolved",M);case 38:case "end":return yc.stop()}},Fa,this)}));return function(){return ka.apply(this,arguments)}}()},{key:"logout",value:function(){var ka=
Db(regeneratorRuntime.mark(function Fa(){var M;return regeneratorRuntime.wrap(function(Aa){for(;;)switch(Aa.prev=Aa.next){case 0:return Aa.next=2,zb.UserRegistry.current.logout(this.user);case 2:return this.displayUser(this.user),this.remove(),Aa.next=6,zb.UserUI.showLogin({modal:!1});case 6:M=Aa.sent,zb.signal(this,"resolved",M);case 8:case "end":return Aa.stop()}},Fa,this)}));return function(){return ka.apply(this,arguments)}}()},{key:"close",value:function(){zb.signal(this,"resolved",this.user)}},
{key:"onMouseUp",value:function(ka){var va=this.ui,Fa=va.closeButton;va=va.saveButton;switch(ka.targetMorph){case Fa:this.close();break;case va:this.trySave()}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"UserInfoWidget"}}],Ib,{pathInPackage:function(){return"./morphic/user-ui.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.user",version:"0.2.0"}}},
{start:8662,end:12859})}(zb.UserWidget));zb.UserInfoWidget=pb;zb.UserInfoWidget=pb;pb=bd("LoginWidget",function(rb){var Ib=window.lively.FreezerRuntime.recorderFor("lively.user/morphic/user-ui.js"),da=Ib.hasOwnProperty("LoginWidget")&&"function"===typeof Ib.LoginWidget?Ib.LoginWidget:Ib.LoginWidget=function(ka){if(!ka||!ka[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return fa(da,rb,[{key:"ui",get:function(){return{userNameInput:this.getSubmorphNamed("user name input"),
passwordInput:this.getSubmorphNamed("password input"),loginButton:this.getSubmorphNamed("login button"),registerButton:this.getSubmorphNamed("register button"),guestButton:this.getSubmorphNamed("guest button"),emailLoginForm:this.getSubmorphNamed("email login form"),googleLogin:this.getSubmorphNamed("google login"),emailLogin:this.getSubmorphNamed("email login"),appleLogin:this.getSubmorphNamed("apple login")}}},{key:"signInWithGoogle",value:function(){zb.gapi.load("auth2",Db(regeneratorRuntime.mark(function va(){var Fa;
return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return zb.gapi.auth2.init({client_id:"CLIENT_ID.apps.googleusercontent.com"}),Fa=zb.gapi.auth2.getAuthInstance(),M.next=4,Fa.signIn();case 4:case 5:case "end":return M.stop()}},va)})))}},{key:"signInWithEmail",value:function(){var ka=Db(regeneratorRuntime.mark(function Fa(){var M,Aa,wb,Na,hb,Bb;return regeneratorRuntime.wrap(function(ba){for(;;)switch(ba.prev=ba.next){case 0:M=this.ui,Aa=M.emailLoginForm,wb=M.googleLogin,
Na=M.emailLogin,hb=M.appleLogin,Bb=zb.easings.inOutExpo,[wb,Na,hb].map(function(dc){return dc.animate({visible:!1,isLayoutable:!1,easing:Bb,duration:300})}),Aa.animate({visible:!0,isLayoutable:!0,easing:Bb,duration:300});case 5:case "end":return ba.stop()}},Fa,this)}));return function(){return ka.apply(this,arguments)}}()},{key:"focus",value:function(){this.ui.userNameInput.focus()}},{key:"focusOrder",value:function(){return[this.ui.userNameInput,this.ui.passwordInput]}},{key:"reset",value:function(){this.withAllSubmorphsDo(function(Bb){Bb.draggable=
!1;Bb.grabbable=!1});var ka=this.ui,va=ka.registerButton,Fa=ka.userNameInput,M=ka.appleLogin,Aa=ka.passwordInput,wb=ka.emailLoginForm,Na=ka.googleLogin,hb=ka.emailLogin;zb.connect(ka.loginButton,"fire",this,"tryLogin");zb.connect(va,"fire",this,"switchToRegisterWidget");zb.connect(hb,"fire",this,"signInWithEmail");zb.connect(Na,"fire",this,"loginWithGoogle");Fa.input="";Aa.input="";wb.isLayoutable=wb.visible=!1;[hb,M,Na].map(function(Bb){return Bb.visible=Bb.isLayoutable=!0})}},{key:"onEnterPressed",
value:function(){this.tryLogin()}},{key:"tryLogin",value:function(){var ka=Db(regeneratorRuntime.mark(function Fa(){var M,Aa,wb,Na,hb,Bb,ba;return regeneratorRuntime.wrap(function(dc){for(;;)switch(dc.prev=dc.next){case 0:M=this.ui;Aa=M.userNameInput;wb=M.passwordInput;Na=Aa.input;hb=wb.input;if(Na){dc.next=5;break}return dc.abrupt("return");case 5:return Bb=zb.ClientUser.named(Na,zb.config.users.authServerURL),dc.prev=6,dc.next=9,zb.UserRegistry.current.login(Bb,hb);case 9:dc.next=14;break;case 11:dc.prev=
11,dc.t0=dc["catch"](6),ba=dc.t0.message;case 14:if(!ba){dc.next=19;break}zb.signal(this,"loginFailed",ba);ba.includes("No user")&&this.indicateError(this.ui.userNameInput,ba);ba.includes("does not match")&&this.indicateError(this.ui.passwordInput,"Password incorrect");return dc.abrupt("return");case 19:zb.notify(this,"logged in"),zb.signal(this,"loginSucceeded",Bb),zb.signal(this,"resolved",Bb);case 22:case "end":return dc.stop()}},Fa,this,[[6,11]])}));return function(){return ka.apply(this,arguments)}}()},
{key:"switchToRegisterWidget",value:function(){var ka=Db(regeneratorRuntime.mark(function Fa(){var M;return regeneratorRuntime.wrap(function(Aa){for(;;)switch(Aa.prev=Aa.next){case 0:return Aa.next=2,zb.UserUI.showRegister({modal:!1});case 2:(M=Aa.sent)&&zb.signal(this,"resolved",M);case 4:case "end":return Aa.stop()}},Fa,this)}));return function(){return ka.apply(this,arguments)}}()},{key:"continueAsGuest",value:function(){var ka=Db(regeneratorRuntime.mark(function Fa(){var M,Aa,wb;return regeneratorRuntime.wrap(function(Na){for(;;)switch(Na.prev=
Na.next){case 0:M=zb.UserRegistry.current;Aa=M.loadUserFromLocalStorage(zb.config.users.authServerURL);if(!Aa.isGuestUser){Na.next=6;break}Na.t0=Aa;Na.next=9;break;case 6:return Na.next=8,M.login(zb.ClientUser.guest);case 8:Na.t0=Na.sent;case 9:wb=Na.t0,zb.signal(this,"resolved",wb);case 11:case "end":return Na.stop()}},Fa,this)}));return function(){return ka.apply(this,arguments)}}()},{key:"indicateError",value:function(ka,va){ka.indicateError(va)}},{key:"clearErrors",value:function(){this.ui.userNameInput.clearError();
this.ui.passwordInput.clearError()}},{key:"onMouseUp",value:function(ka){var va=this.ui,Fa=va.loginButton;va=va.registerButton;switch(ka.targetMorph){case Fa:this.tryLogin();break;case va:this.switchToRegisterWidget()}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LoginWidget"}}],Ib,{pathInPackage:function(){return"./morphic/user-ui.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.user",version:"0.2.0"}}},{start:12867,end:16867})}(zb.UserWidget));zb.LoginWidget=pb;zb.LoginWidget=pb;pb=bd("RegisterWidget",function(rb){var Ib=window.lively.FreezerRuntime.recorderFor("lively.user/morphic/user-ui.js"),da=Ib.hasOwnProperty("RegisterWidget")&&"function"===typeof Ib.RegisterWidget?Ib.RegisterWidget:Ib.RegisterWidget=function(ka){if(!ka||!ka[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return fa(da,rb,[{key:"ui",get:function(){return{userNameInput:this.getSubmorphNamed("user name input"),emailInput:this.getSubmorphNamed("email input"),passwordInput:this.getSubmorphNamed("password input"),passwordInput2:this.getSubmorphNamed("password input 2"),registerButton:this.getSubmorphNamed("register button"),cancelButton:this.getSubmorphNamed("cancel button")}}},{key:"onEnterPressed",value:function(){this.tryRegister()}},{key:"focus",value:function(){this.ui.userNameInput.focus()}},
{key:"focusOrder",value:function(){return[this.ui.userNameInput,this.ui.emailInput,this.ui.passwordInput,this.ui.passwordInput2]}},{key:"reset",value:function(){this.withAllSubmorphsDo(function(ka){ka.draggable=!1;ka.grabbable=!1});zb.connect(this.ui.registerButton,"fire",this,"tryRegister");zb.connect(this.ui.cancelButton,"fire",this,"close");this.ui.userNameInput.readOnly=!0;this.ui.userNameInput.selectable=!0;zb.notify(this,"OK")}},{key:"displayUser",value:function(ka){this.user=ka}},{key:"tryRegister",
value:function(){var ka=Db(regeneratorRuntime.mark(function Fa(){var M,Aa,wb,Na,hb,Bb,ba,dc,la,Fb,vb;return regeneratorRuntime.wrap(function(Ia){for(;;)switch(Ia.prev=Ia.next){case 0:M=this.ui;Aa=M.userNameInput;wb=M.emailInput;Na=M.passwordInput;hb=M.passwordInput2;Bb=Aa.input;ba=wb.input;dc=Na.input;la=hb.input;if(Bb&&dc&&la&&ba){Ia.next=11;break}Bb||Aa.indicateError("Please enter a user name!");ba||wb.indicateError("Please enter E-Mail address!");dc||Na.indicateError("Please enter a password!");
la||hb.indicateError("Please repeat your password!");return Ia.abrupt("return");case 11:if(dc===la){Ia.next=14;break}hb.indicateError("Passwords do not match!");return Ia.abrupt("return");case 14:return Fb=zb.ClientUser.named(Bb,zb.config.users.authServerURL),ba&&(Fb.email=ba),Ia.prev=16,Ia.next=19,zb.UserRegistry.current.register(Fb,dc);case 19:Ia.next=24;break;case 21:Ia.prev=21,Ia.t0=Ia["catch"](16),vb=Ia.t0;case 24:if(!vb){Ia.next=26;break}return Ia.abrupt("return",this.world().inform("Failed to register: "+
vb,{requester:this}));case 26:return Ia.next=28,zb.notify(this,"registered");case 28:this.displayUser(Fb),zb.signal(this,"resolved",Fb);case 30:case "end":return Ia.stop()}},Fa,this,[[16,21]])}));return function(){return ka.apply(this,arguments)}}()},{key:"close",value:function(){zb.signal(this,"resolved",this.user)}},{key:"onMouseUp",value:function(ka){var va=this.ui,Fa=va.registerButton;va=va.cancelButton;switch(ka.targetMorph){case Fa:this.tryRegister();break;case va:this.close()}}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"RegisterWidget"}}],Ib,{pathInPackage:function(){return"./morphic/user-ui.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.user",version:"0.2.0"}}},{start:16875,end:19798})}(zb.UserWidget));zb.RegisterWidget=pb;zb.RegisterWidget=pb;pb=bd("UserFlap",function(rb){var Ib=window.lively.FreezerRuntime.recorderFor("lively.user/morphic/user-ui.js"),
da=Ib.hasOwnProperty("UserFlap")&&"function"===typeof Ib.UserFlap?Ib.UserFlap:Ib.UserFlap=function(ka){if(!ka||!ka[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return fa(da,rb,[{key:"isUserFlap",get:function(){return!0}},{key:"isMaximized",get:function(){return 3<this.submorphs.length}},{key:"onLoad",value:function(){var ka=Db(regeneratorRuntime.mark(function Fa(){return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=
M.next){case 0:return M.next=2,this.whenRendered();case 2:if(![this].concat(ab(this.ownerChain())).find(function(Aa){return Aa.isComponent})){M.next=4;break}return M.abrupt("return");case 4:this.showUser(this.currentUser());case 5:case "end":return M.stop()}},Fa,this)}));return function(){return ka.apply(this,arguments)}}()},{key:"open",value:function(){var ka=Db(regeneratorRuntime.mark(function Fa(){return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return this.openInWorld(),
this.showUser(this.currentUser(),!1),this.alignInWorld(!1),this.hasFixedPosition=!0,M.abrupt("return",this);case 5:case "end":return M.stop()}},Fa,this)}));return function(){return ka.apply(this,arguments)}}()},{key:"onMouseDown",value:function(){var ka=Db(regeneratorRuntime.mark(function M(Fa){var Aa,wb;return regeneratorRuntime.wrap(function(Na){for(;;)switch(Na.prev=Na.next){case 0:Aa=Fa.targetMorph.name;wb=this.currentUser();Na.t0=Aa;Na.next="profile item"===Na.t0?5:"logout item"===Na.t0?6:"login item"===
Na.t0?11:"register item"===Na.t0?14:"user flap"===Na.t0?16:"keyboard input"===Na.t0?18:20;break;case 5:return Na.abrupt("return",this.showUserInfo(wb));case 6:return Na.next=8,this.minimize();case 8:return Na.next=10,this.logout(wb);case 10:return Na.abrupt("return");case 11:return Na.next=13,this.showLogin(wb);case 13:return Na.abrupt("return");case 14:return this.showRegister(),Na.abrupt("break",20);case 16:return this.maximize(),Na.abrupt("break",20);case 18:return this.toggleKeyboardInput(),Na.abrupt("break",
20);case 20:case "end":return Na.stop()}},M,this)}));return function(Fa){return ka.apply(this,arguments)}}()},{key:"toggleKeyboardInput",value:function(){var ka=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!zb.touchInputDevice;zb.touchInputDevice=ka;var va=this.get("keyboard input");ka?(va.fontColor=zb.Color.rgb(0,176,255),va.dropShadow=this.haloShadow):(va.fontColor=this.fontColor,va.dropShadow=!1)}},{key:"currentUser",value:function(){return zb.UserRegistry.current.loadUserFromLocalStorage(zb.config.users.authServerURL)}},
{key:"onUserChanged",value:function(ka){this.showUser(ka.user||{name:"???"},!1)}},{key:"onWorldResize",value:function(ka){!this.isComponent&&this.alignInWorld()}},{key:"relayout",value:function(){this.alignInWorld()}},{key:"alignInWorld",value:function(){var ka=Db(regeneratorRuntime.mark(function M(Fa){var Aa;return regeneratorRuntime.wrap(function(wb){for(;;)switch(wb.prev=wb.next){case 0:return wb.next=2,this.whenRendered();case 2:this.hasFixedPosition&&this.owner.isWorld?this.topRight=zb.pt(this.world().visibleBounds().width,
0):this.owner.isWorld&&(Aa=$world.visibleBounds().topRight().withY(0).subXY(10,0),Fa?this.animate({topRight:Aa,duration:200}):this.topRight=Aa);case 3:case "end":return wb.stop()}},M,this)}));return function(Fa){return ka.apply(this,arguments)}}()},{key:"minimize",value:function(){var ka=Db(regeneratorRuntime.mark(function Fa(){var M;return regeneratorRuntime.wrap(function(Aa){for(;;)switch(Aa.prev=Aa.next){case 0:if(M=this.getSubmorphNamed("user menu")){Aa.next=3;break}return Aa.abrupt("return");
case 3:return Aa.next=5,M.animate({opacity:0,scale:.8,duration:200});case 5:M.visible=!1;case 6:case "end":return Aa.stop()}},Fa,this)}));return function(){return ka.apply(this,arguments)}}()},{key:"ensureMenu",value:function(){var ka=Db(regeneratorRuntime.mark(function Fa(){var M,Aa;return regeneratorRuntime.wrap(function(wb){for(;;)switch(wb.prev=wb.next){case 0:if(!this._menuFetch){wb.next=4;break}wb.next=3;return this._menuFetch;case 3:return wb.abrupt("return",wb.sent);case 4:M=zb.promise.deferred();
this._menuFetch=M.promise;wb.t0=this.getSubmorphNamed("user menu");if(wb.t0){wb.next=13;break}wb.t1=this;wb.next=11;return zb.resource("part://SystemIDE/user menu master").read();case 11:wb.t2=wb.sent,wb.t0=wb.t1.addMorph.call(wb.t1,wb.t2);case 13:Aa=wb.t0,Aa.name="user menu",Aa.visible=!1,Aa.opacity=0,Aa.scale=.8,Aa.position=this.getSubmorphNamed("avatar").bottomCenter.addXY(0,10),M.resolve(Aa);case 20:case "end":return wb.stop()}},Fa,this)}));return function(){return ka.apply(this,arguments)}}()},
{key:"maximize",value:function(){var ka=Db(regeneratorRuntime.mark(function Fa(){var M;return regeneratorRuntime.wrap(function(Aa){for(;;)switch(Aa.prev=Aa.next){case 0:if(M=this.getSubmorphNamed("user menu")){Aa.next=5;break}Aa.next=4;return this.ensureMenu();case 4:M=Aa.sent;case 5:return M.right=this.width-5,M.visible=!0,Aa.next=9,M.animate({opacity:1,scale:1,duration:200});case 9:case "end":return Aa.stop()}},Fa,this)}));return function(){return ka.apply(this,arguments)}}()},{key:"changeWidthAndHeight",
value:function(){var ka=Db(regeneratorRuntime.mark(function wb(Fa,M,Aa){return regeneratorRuntime.wrap(function(Na){for(;;)switch(Na.prev=Na.next){case 0:if(!Aa){Na.next=5;break}Na.next=3;return this.animate({position:this.position.addXY(this.width-Fa,0),extent:zb.pt(Fa,M),duration:200});case 3:Na.next=7;break;case 5:this.extent=zb.pt(Fa,M),this.position=this.position.addXY(this.width-Fa,0);case 7:case "end":return Na.stop()}},wb,this)}));return function(Fa,M,Aa){return ka.apply(this,arguments)}}()},
{key:"showMenuItems",value:function(ka){var va=this;zb.arr.withoutAll(["login item","logout item","profile item","register item"],ka).map(function(Fa){return va.getSubmorphNamed(Fa)}).forEach(function(Fa){Fa.visible=!1;Fa.bringToFront()});ka.map(function(Fa){return va.getSubmorphNamed(Fa)}).forEach(function(Fa){Fa.visible=!0})}},{key:"showUser",value:function(){var ka=Db(regeneratorRuntime.mark(function M(Fa){var Aa,wb,Na,hb,Bb;return regeneratorRuntime.wrap(function(ba){for(;;)switch(ba.prev=ba.next){case 0:return Aa=
this.getSubmorphNamed("label"),wb=this.getSubmorphNamed("user menu"),Na=this.getSubmorphNamed("avatar"),this.getSubmorphNamed("login item"),this.getSubmorphNamed("logout item"),this.getSubmorphNamed("profile item"),hb=String(Fa.name),Bb=zb.resource("https://s.gravatar.com/avatar").join(zb.string.md5(Fa.email||"")).withQuery({s:160}).url,ba.next=11,this.ensureMenu();case 11:hb.startsWith("guest-")?(this.showMenuItems(["login item","register item"]),hb="guest"):this.showMenuItems(["logout item","profile item"]);
Aa.value=hb;Na.imageUrl=Bb;if(!wb){ba.next=18;break}ba.next=17;return wb.master.whenApplied();case 17:wb.position=Na.bottomCenter.addXY(0,10);case 18:return ba.next=20,this.whenRendered();case 20:this.alignInWorld();case 21:case "end":return ba.stop()}},M,this)}));return function(Fa){return ka.apply(this,arguments)}}()},{key:"showRegister",value:function(){return zb.UserUI.showRegister()}},{key:"showUserInfo",value:function(ka){return zb.UserUI.showUserInfo({user:ka})}},{key:"showLogin",value:function(ka){return zb.UserUI.showLogin({user:ka})}},
{key:"logout",value:function(ka){return zb.UserRegistry.current.logout(ka)}},{key:"onBlur",value:function(){var ka=Db(regeneratorRuntime.mark(function M(Fa){return regeneratorRuntime.wrap(function(Aa){for(;;)switch(Aa.prev=Aa.next){case 0:return this.minimize(),Aa.next=3,this.whenRendered();case 3:this.world().focusedMorph.ownerChain().includes(this)&&this.focus();case 4:case "end":return Aa.stop()}},M,this)}));return function(Fa){return ka.apply(this,arguments)}}()},{key:"showMenu",value:function(){var ka=
Db(regeneratorRuntime.mark(function M(Fa){var Aa=this,wb,Na,hb,Bb,ba,dc=arguments;return regeneratorRuntime.wrap(function(la){for(;;)switch(la.prev=la.next){case 0:return wb=1<dc.length&&void 0!==dc[1]?dc[1]:!1,Na=this.getSubmorphNamed("label"),hb=this.getSubmorphNamed("avatar"),Bb=["open chat",Db(regeneratorRuntime.mark(function vb(){return regeneratorRuntime.wrap(function(Ia){for(;;)switch(Ia.prev=Ia.next){case 0:case "end":return Ia.stop()}},vb)}))],ba=Object.assign(zb.Menu.forItems(Fa.isGuestUser?
[Bb,["login",Db(regeneratorRuntime.mark(function Ia(){return regeneratorRuntime.wrap(function(xb){for(;;)switch(xb.prev=xb.next){case 0:Aa.minimize(),Aa.showLogin(Fa);case 2:case "end":return xb.stop()}},Ia)}))]]:[["show user info",function(){Aa.minimize();Aa.showUserInfo(Fa)}],Bb,["logout",Db(regeneratorRuntime.mark(function xb(){return regeneratorRuntime.wrap(function(Rb){for(;;)switch(Rb.prev=Rb.next){case 0:return Rb.next=2,Aa.minimize();case 2:Aa.logout(Fa);case 3:case "end":return Rb.stop()}},
xb)}))]]),{name:"menu",position:zb.pt(10,5),dropShadow:!1,opacity:wb?0:1,borderWidth:0,fontSize:12,fontFamily:"Helvetica Neue, Verdana, Sans Serif"}),hb.visible=!1,Na.visible=!1,this.addMorph(ba),wb&&ba.animate({opacity:1,duration:200}),la.next=11,this.changeWidthAndHeight(ba.width+20,ba.height+10,wb);case 11:case "end":return la.stop()}},M,this)}));return function(Fa){return ka.apply(this,arguments)}}()},{key:"updateNetworkIndicator",value:function(ka){var va="red";ka&&(ka.isOnline()&&(va="yellow"),
ka.isRegistered()&&(va="green"));this.get("network-indicator").animate({fill:zb.Color[va],duration:300})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"UserFlap"}},{key:"properties",get:function(){return{submorphs:{initialize:function(){this.submorphs=[{type:"label",name:"label",fontSize:12,fontFamliy:"Helvetica Neue, Verdana, Sans Serif",fontWeight:"bold",padding:zb.Rectangle.inset(4),reactsToPointer:!1},zb.Icon.makeLabel("user",{name:"avatar",fontColor:zb.Color.black.withA(.3),
fontSize:12,clipMode:"hidden",padding:zb.Rectangle.inset(2,2,4,0),borderWidth:1,borderColor:zb.Color.black.withA(.3),extent:zb.pt(20,20),borderRadius:10}),{name:"network-indicator",fill:zb.Color.red,borderRadius:5,extent:zb.pt(5,5),position:zb.pt(5,8),reactsToPointer:!1}]}},fontColor:{after:["submorphs"],set:function(ka){this.setProperty("fontColor",ka)}},name:{initialize:function(){this.name="user flap"}},epiMorph:{defaultValue:!0},clipMode:{defaultValue:"hidden"},draggable:{defaultValue:!1},grabbable:{defaultValue:!1},
acceptsDrops:{defaultValue:!1},fill:{defaultValue:zb.Color.white},borderRadius:{defaultValue:10},nativeCursor:{defaultValue:"pointer"},respondsToVisibleWindow:{defaultValue:!0},haloColor:{readOnly:!0,get:function(){return zb.Color.rgb(0,176,255)}},haloShadow:{readOnly:!0,get:function(){return{distance:2,rotation:45,color:zb.Color.rgba(64,196,255,.4),inset:!1,blur:6,spread:0,fast:!1}}}}}}],Ib,{pathInPackage:function(){return"./morphic/user-ui.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.user",version:"0.2.0"}}},{start:19806,end:28887})}(zb.Morph));zb.UserFlap=pb;zb.UserFlap=pb}}});