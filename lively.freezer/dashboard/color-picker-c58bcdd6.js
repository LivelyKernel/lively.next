System.register(["./__root_module__-06ff41f6.js","./index-df7aed39.js"],function(Ca){var Bb,Kb,lc,bc,Td,Xc,Wd,$c,Pc,md,ge,Qe,kf,ke,cc,Jc,Nd,ec,Zd,le,yc,Gc,Qb,Ec,dd,Hd,Ld,uc,rb,Gb,Oa,ab,Qa,Ja,eb,Sb,Ac,sb,Ab,vb,ha,Ha,W,ra,Za,qb,sc,wd,nc,Ob,$d,Id,kb;return{setters:[function(Eb){Bb=Eb.C;Kb=Eb.a2;lc=Eb.b8;bc=Eb.b9;Td=Eb.ba;Xc=Eb.bb;Wd=Eb.bc;$c=Eb.bd;Pc=Eb.a3;md=Eb.al;ge=Eb.be;Qe=Eb.bf;kf=Eb.bg;ke=Eb.an;cc=Eb.b1;Jc=Eb.ap;Nd=Eb.aD;ec=Eb.ac;Zd=Eb.b2;le=Eb.ar;yc=Eb.I;Gc=Eb.a_;Qb=Eb.b6;Ec=Eb.bh;dd=Eb.bi;
Hd=Eb.au;Ld=Eb.av;uc=Eb.at;rb=Eb.a6;Gb=Eb.bj;Oa=Eb.aw;ab=Eb.as;Qa=Eb.aE;Ja=Eb.ad;eb=Eb.bk;Sb=Eb.aq;Ac=Eb.ab;sb=Eb.ae;Ab=Eb.$;vb=Eb.ax;ha=Eb.a7;Ha=Eb.a8;W=Eb.a1;ra=Eb.bl;Za=Eb.bm;qb=Eb.bn;sc=Eb.am;wd=Eb.aj;nc=Eb.aP},function(Eb){Ob=Eb.p;$d=Eb.P;Id=Eb._;kb=Eb.N}],execute:function(){var Eb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js");Eb.Color=Bb;Eb.rect=Kb;Eb.Complementary=lc;Eb.Triadic=bc;Eb.Tetradic=Td;Eb.Quadratic=Xc;Eb.Analogous=Wd;Eb.Neutral=$c;Eb.pt=Pc;Eb.Point=md;Eb.flatDesignColors=
ge;Eb.materialDesignColors=Qe;Eb.webSafeColors=kf;Eb.Morph=ke;Eb.CustomLayout=cc;Eb.VerticalLayout=Jc;Eb.HorizontalLayout=Nd;Eb.Text=ec;Eb.TilingLayout=Zd;Eb.Ellipse=le;Eb.Image=yc;Eb.StyleSheet=Gc;Eb.DropDownSelector=Qb;Eb.ModeSelector=Ec;Eb.Slider=dd;Eb.connect=Hd;Eb.signal=Ld;Eb.num=uc;Eb.arr=rb;Eb.SnapLayout=Gb;Eb.WHEEL_URL="/lively.ide/assets/color-wheel.png";Eb.duration=200;(function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),Oc=bb.hasOwnProperty("ColorPaletteField")&&
"function"===typeof bb.ColorPaletteField?bb.ColorPaletteField:bb.ColorPaletteField=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"onHoverIn",value:function(){if(this.color){var ma=$jscomp.makeIterator(this.color.isGradient?Eb.Color.blue.toHSB():this.color.toHSB()),Aa=ma.next().value,xb=ma.next().value;ma=ma.next().value;this.borderColor=Eb.Color.hsb(Aa,1<xb+.5?xb-.5:xb+.5,1<ma+.5?ma-.5:ma+.5)}}},
{key:"onHoverOut",value:function(){this.borderColor=Eb.Color.transparent}},{key:"onMouseDown",value:function(){Eb.signal(this,"updateColor",this.color)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPaletteField"}},{key:"properties",get:function(){return{color:{defaultValue:Eb.Color.blue},borderWidth:{defaultValue:2},borderColor:{after:["color"],initialize:function(){this.borderColor=this.color||Eb.Color.transparent}},fill:{after:["color"],initialize:function(){this.fill=this.color||
Eb.Color.transparent}},styleClasses:{after:["color"],initialize:function(){this.styleClasses=this.color?["colorField"]:["vacantColorField"]}}}}}],bb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:638,end:1652})})(Eb.Morph);(function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),
Oc=bb.hasOwnProperty("ColorHarmonyField")&&"function"===typeof bb.ColorHarmonyField?bb.ColorHarmonyField:bb.ColorHarmonyField=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"onMouseDown",value:function(){Eb.signal(this,"updateColor",this.color)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorHarmonyField"}},{key:"properties",get:function(){return{extent:{defaultValue:Eb.pt(80,
60)},fill:{defaultValue:Eb.Color.transparent},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/color harmony field"}}},color:{set:function(ma){var Aa=$jscomp.makeIterator(this.submorphs),xb=Aa.next().value;Aa=Aa.next().value;var P=$jscomp.makeIterator(ma?ma.toHSB():[]),va=P.next().value,Va=P.next().value;P=P.next().value;this.setProperty("color",ma);ma&&xb&&Aa&&(xb.fill=ma,Aa.textString=ma.toHexString(),Aa.fontColor=Eb.Color.hsb(va,1<Va+.5?Va-.5:Va+.5,1<P+.5?P-.5:P+.5))}},
submorphs:{after:["color"],initialize:function(){var ma=$jscomp.makeIterator((this.color||Eb.Color.transparent).toHSB()),Aa=ma.next().value,xb=ma.next().value;ma=ma.next().value;this.submorphs=[new Eb.Morph({fill:this.color,extent:Eb.pt(80,50)}),new Eb.Text({textString:Aa.toFixed()+", "+xb.toFixed(2)+", "+ma.toFixed(2),fill:Eb.Color.transparent,fontColor:Eb.Color.gray.darker(),bottomLeft:Eb.pt(0,50)})]}}}}}],bb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1654,end:3046})})(Eb.Morph);(function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),Oc=bb.hasOwnProperty("HarmonyDisplay")&&"function"===typeof bb.HarmonyDisplay?bb.HarmonyDisplay:bb.HarmonyDisplay=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Oa(Oc,pb,[{key:"update",value:function(ma){var Aa=$jscomp.makeIterator(ma.pivotColor.toHSB()),xb=Aa.next().value,P=Aa.next().value;Aa=Aa.next().value;xb=ma.harmony.chord({hue:xb,saturation:P,brightness:Aa});xb.length!=this.submorphs.length?this.submorphs=xb.map(function(va){va=new Eb.ColorHarmonyField({color:va});Eb.connect(va,"updateColor",ma,"color");return va}):Eb.arr.zip(this.submorphs,xb).forEach(function(va){var Va=$jscomp.makeIterator(va);va=Va.next().value;Va=Va.next().value;va.color=
Va})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HarmonyDisplay"}}],bb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3048,end:3626})})(Eb.Morph);(function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),Oc=bb.hasOwnProperty("PivotColorControl")&&
"function"===typeof bb.PivotColorControl?bb.PivotColorControl:bb.PivotColorControl=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"update",value:function(ma){this.pivotColor=ma.pivotColor}},{key:"onDrag",value:function(ma){var Aa=$jscomp.makeIterator(this.pivotColor.toHSB()),xb=Aa.next().value,P=Aa.next().value;Aa=Aa.next().value;xb=Eb.num.toRadians(xb);ma=Eb.Point.polar(50*P,xb).addPt(ma.state.dragDelta);
xb=Eb.num.toDegrees(ma.theta());xb=0>xb?xb+360:xb;P=Math.min(ma.r()/50,1);this.pivotColor=Eb.Color.hsb(xb,P,Aa)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PivotColorControl"}},{key:"properties",get:function(){return{pivotColor:{defaultValue:Eb.Color.blue},draggable:{defaultValue:!0}}}}],bb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3628,end:4262})})(Eb.Ellipse);(function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),Oc=bb.hasOwnProperty("HarmonyVisualizer")&&"function"===typeof bb.HarmonyVisualizer?bb.HarmonyVisualizer:bb.HarmonyVisualizer=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"update",value:function(ma){var Aa=
$jscomp.makeIterator(this.submorphs).next().value,xb=this.get("pivot control"),P=$jscomp.makeIterator(ma.pivotColor.toHSB()),va=P.next().value,Va=P.next().value;P=P.next().value;var Db=Eb.num.toRadians(va);va=ma.harmony.chord({hue:va,saturation:Va,brightness:P}).map(function(mc){var Tb=$jscomp.makeIterator(mc.toHSB()),Tc=Tb.next().value;mc=Tb.next().value;Tb.next();Tb=Eb.num.toRadians(Tc);return Eb.Point.polar(50*mc,Tb)});Aa.fill=Eb.Color.black.withA(1-P);xb.update(ma);Aa.submorphs.length-1!=va.length?
Aa.submorphs=[].concat($jscomp.arrayFromIterable(va.map(function(mc){return new Eb.Ellipse({center:mc,fill:Eb.Color.transparent,draggable:!1,borderWidth:1,borderColor:Eb.Color.black})})),[xb]):(Eb.arr.zip(Aa.submorphs,va).forEach(function(mc){var Tb=$jscomp.makeIterator(mc);mc=Tb.next().value;if(Tb=Tb.next().value)mc.center=Tb}),xb.center=Eb.Point.polar(50*Va,Db))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HarmonyVisualizer"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["harmonyVisualizer"]},
submorphs:{initialize:function(){this.submorphs=[{type:"ellipse",name:"harmonyPoints",submorphs:[new Eb.PivotColorControl({name:"pivot control"})]}]}}}}}],bb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4264,end:5726})})(Eb.Image);(function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),
Oc=bb.hasOwnProperty("HarmonyPalette")&&"function"===typeof bb.HarmonyPalette?bb.HarmonyPalette:bb.HarmonyPalette=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"update",value:function(ma){this.updateInProgress||(this.updateInProgress=!0,this.pivotBrightness=ma.pivotBrightness,this.harmony=ma.harmony,this.get("harmonies").update(ma),this.get("harmony visualizer").update(ma),this.updateInProgress=
!1)}},{key:"harmonyControl",value:function(){var ma,Aa,xb=new Eb.Morph({name:"harmonyControl",submorphs:[new Eb.HarmonyVisualizer({name:"harmony visualizer"}),Aa=new Eb.Slider({min:0,max:1,tooltip:"Adjust Brightness",width:100,value:this.pivotBrightness}),ma=new Eb.DropDownSelector({name:"harmonySelector",isHaloItem:!0,padding:4,selectedValue:this.harmony,getCurrentValue:function(){return this.selectedValue.name},values:{Complement:new Eb.Complementary,Triadic:new Eb.Triadic,Tetradic:new Eb.Tetradic,
Quadratic:new Eb.Quadratic,Analogous:new Eb.Analogous,Neutral:new Eb.Neutral}})]});Eb.connect(Aa,"value",this,"pivotBrightness");Eb.connect(ma,"selectedValue",this,"harmony");return xb}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HarmonyPalette"}},{key:"properties",get:function(){return{harmony:{defaultValue:new Eb.Complementary},pivotBrightness:{defaultValue:1},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/harmony palette"}}},submorphs:{after:["harmony"],
initialize:function(){this.submorphs=[new Eb.HarmonyDisplay({name:"harmonies"}),this.harmonyControl()]}}}}}],bb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5728,end:7655})})(Eb.Morph);var ad=Ca("C",function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),
Oc=bb.hasOwnProperty("ColorPalette")&&"function"===typeof bb.ColorPalette?bb.ColorPalette:bb.ColorPalette=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"fadeIntoWorld",value:function(ma){Oa._get(Object.getPrototypeOf(Oc.prototype),"fadeIntoWorld",this).call(this,ma);this.initPosition=ma;return this}},{key:"isHaloItem",value:function(){return!0}},{key:"onKeyDown",value:function(ma){"Escape"==
ma.key&&this.close()}},{key:"close",value:function(ma){ma?this.fadeOut(ma):this.remove();Eb.signal(this,"close")}},{key:"paletteView",value:function(){return{name:"paletteView",extent:Eb.pt(400,253),submorphs:[this.solidColorPalette(),new Eb.HarmonyPalette({name:"harmony palette",isLayoutable:!1,visible:!1,draggable:!1})]}}},{key:"selectSolidMode",value:function(){var ma=this.get("solidColorPalette"),Aa=this.get("paletteView");ma.visible||(Aa.submorphs.forEach(function(xb){return xb.animate({isLayoutable:!1,
visible:!1,duration:200})}),ma.animate({isLayoutable:!0,visible:!0,duration:200}))}},{key:"selectHarmonyMode",value:function(){var ma=this.get("paletteView");this.get("harmony palette").visible||(ma.submorphs.forEach(function(Aa){return Aa.animate({isLayoutable:!1,visible:!1,duration:200})}),this.get("harmony palette").animate({isLayoutable:!0,visible:!0,duration:200}))}},{key:"fillTypeSelector",value:function(){var ma=new Eb.ModeSelector({reactsToPointer:!1,name:"fillTypeSelector",items:["Color Palette",
"Color Harmonies"],tooltips:{"Color Harmonies":this.getPaletteDescription("harmony")}});Eb.connect(ma,"Color Palette",this,"selectSolidMode");Eb.connect(ma,"Color Harmonies",this,"selectHarmonyMode");return ma}},{key:"solidColorPalette",value:function(){return{name:"solidColorPalette",master:{auto:"styleguide://SystemWidgets/solid color palette"},submorphs:[this.getCurrentPalette(),this.paletteConfig()]}}},{key:"getCurrentPalette",value:function(){var ma=this.getColorsFor(this.colorPalette),Aa=ma.colors,
xb=ma.mod;return this.cachedPalette[ma.name]||this.getPalette(Aa,xb)}},{key:"getPalette",value:function(ma,Aa){var xb=this,P=Math.max(Math.ceil(ma.length/Aa),15),va=P*this.colorFieldWidth,Va=Aa*this.colorFieldWidth;ma=[].concat($jscomp.arrayFromIterable(ma),$jscomp.arrayFromIterable(Eb.arr.withN(P*Aa-ma.length,null)));return{extent:Eb.pt(va,Va),name:"paletteContainer",submorphs:ma.map(function(Db){Db=new Eb.ColorPaletteField({color:Db&&Eb.Color.rgbHex(Db),extent:Eb.pt(xb.colorFieldWidth,xb.colorFieldWidth)});
Eb.connect(Db,"updateColor",xb,"color");return Db})}}},{key:"switchPalette",value:function(ma){var Aa=ma.name,xb=ma.colors;ma=ma.mod;var P=this.get("solidColorPalette"),va=$jscomp.makeIterator(P.submorphs);va.next();va=va.next().value;this.cachedPalette[Aa]=this.cachedPalette[Aa]||this.getPalette(xb,ma,Aa);P.submorphs=[this.cachedPalette[Aa],va]}},{key:"getPaletteDescription",value:function(ma){return{harmony:"Color harmonies are particularly pleasing combinations\nof two or more colors derived from their relationship\non a color wheel. Also known as color chords, color\nharmonies are useful when exploring a possible color\npalette, or can be used as a standalone color scheme.\n",
custom:"Your personal set of customly defined colors.",materialDesign:"Material design is a visual language and design\nsystem developed by Google with an almost flat\nstyle and vibrant color schemes.",flatDesign:"Flat design or flat UI colors are quite popular\nin web design today where bold, bright colors\nare used to create clean, simple interfaces.",webSafe:"Web safe colors emerged during the early era of\nthe internet; a standardized palette of 216 colors\nthat displayed consistently across all major browsers."}[ma]}},
{key:"updatePaletteDescription",value:function(){this.get("paletteSelector").tooltip=this.getPaletteDescription(this.colorPalette)}},{key:"getColorsFor",value:function(ma){return Object.assign({name:ma},{flatDesign:{colors:Eb.flatDesignColors,mod:11},materialDesign:{colors:Eb.materialDesignColors,mod:15},webSafe:{colors:Eb.webSafeColors,mod:12}}[ma])}},{key:"paletteConfig",value:function(){var ma,Aa={name:"paletteConfig",styleClasses:["paletteFormatter"],submorphs:[ma=new Eb.DropDownSelector({isHaloItem:!0,
name:"paletteSelector",selectedValue:"flatDesign",padding:4,tooltip:this.getPaletteDescription(this.colorPalette),values:{"Flat Design":"flatDesign","Material Design":"materialDesign","Web Safe":"webSafe"}})]};Eb.connect(ma,"selectedValue",this,"colorPalette");return Aa}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPalette"}},{key:"properties",get:function(){return{extent:{defaultValue:Eb.pt(200,300)},colorPalette:{after:["submorphs"],defaultValue:"flatDesign",set:function(ma){this.setProperty("colorPalette",
ma);this.switchPalette(this.getColorsFor(ma));this.updatePaletteDescription()}},pivotColor:{after:["submorphs"],set:function(ma){this.setProperty("pivotColor",ma);this.get("harmony palette").update(this)}},color:{set:function(ma){this.setProperty("color",ma);this.get("harmony palette")&&this.get("harmony palette").update(this)}},pivotBrightness:{after:["submorphs","color"],get:function(){var ma=$jscomp.makeIterator((this.pivotColor||this.color).toHSB());ma.next();ma.next();return ma.next().value},
set:function(ma){var Aa=$jscomp.makeIterator((this.pivotColor||this.color).toHSB()),xb=Aa.next().value;Aa=Aa.next().value;this.pivotColor=Eb.Color.hsb(xb,Aa,ma)}},harmony:{after:["submorphs","pivotColor"],defaultValue:new Eb.Complementary,set:function(ma){this.setProperty("harmony",ma);this.get("harmony palette").update(this)}},colorFieldWidth:{defaultValue:20},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/color palette"}}},submorphs:{after:["color"],initialize:function(){var ma=
$jscomp.makeIterator((this.color.isGradient?Eb.Color.blue:this.color).toHSB()),Aa=ma.next().value,xb=ma.next().value;ma.next();this.cachedPalette={};this.submorphs=[this.fillTypeSelector(),this.paletteView()];this.pivotColor=Eb.Color.hsb(Aa,xb,1);Eb.connect(this.get("harmony palette"),"harmony",this,"harmony");Eb.connect(this.get("pivot control"),"pivotColor",this,"pivotColor");Eb.connect(this.get("harmony palette"),"pivotBrightness",this,"pivotBrightness");this.selectSolidMode();this.active=!0}}}}}],
bb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:7721,end:15551})}(Eb.Morph));Eb.ColorPalette=ad;Eb.ColorPalette=ad;Eb.ColorPalette=ad;var ub=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js");ub.Morph=ke;ub.Icon=ab;ub.ProportionalLayout=Qa;ub.config=Ja;
ub.Text=ec;ub.ShadowObject=eb;ub.GridLayout=Sb;ub.TilingLayout=Zd;ub.StyleSheet=Gc;ub.morph=Ac;ub.HorizontalLayout=Nd;ub.VerticalLayout=Jc;ub.KeyHandler=sb;ub.connect=Hd;ub.signal=Ld;ub.arr=rb;ub.promise=Ab;ub.fun=vb;ub.string=ha;ub.obj=Ha;ub.Color=Bb;ub.rect=Kb;ub.Rectangle=W;ub.pt=Pc;ub.popovers=Ob;ub.ModeSelector=Ec;ub.DropDownSelector=Qb;ub.SearchField=ra;ub.CheckBox=Za;ub.Popover=$d;ub.SvgStyleHalo=Id;ub.NumberWidget=kb;ub.Icons=qb;ub.duration=200;var cd=Ca("c",ub.colorWidgets||{});ub.colorWidgets=
cd;ub.colorWidgets=cd;ub.colorWidgets=cd;(function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Oc=bb.hasOwnProperty("SelectableControl")&&"function"===typeof bb.SelectableControl?bb.SelectableControl:bb.SelectableControl=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"select",value:function(ma){var Aa=this,xb,P,va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Va){if(1==
Va.nextAddress)return Aa.target?Va.yield(Aa.target.execCommand(ma),2):Va.return();xb=Va.yieldResult;P=Aa.get("modeSelector");xb.opacity=0;Aa.lastLabel&&(va=P.submorphs.indexOf(Aa.lastLabel)<P.submorphs.indexOf(P.currentLabel),xb.topLeft=P.bottomLeft.addXY(va?20:-20,10));Aa.lastLabel=P.currentLabel;Aa.animate({submorphs:[P,xb],duration:ub.duration});xb.animate({opacity:1,duration:ub.duration});Va.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SelectableControl"}},{key:"properties",
get:function(){return{target:{type:"Morph"},selectableControls:{},selectedControl:{},fill:{defaultValue:ub.Color.transparent},layout:{initialize:function(){this.layout=new ub.VerticalLayout({spacing:10,autoResize:!0,layoutOrder:function(ma){return this.container.submorphs.indexOf(ma)}})}},submorphs:{after:["selectableControls","selectedControl","target"],initialize:function(){var ma=new ub.ModeSelector({name:"modeSelector",items:this.selectableControls,init:this.selectedControl});this.submorphs=[ma];
ma.width=100;ub.connect(ma,"switchLabel",this,"select");this.select(this.selectableControls[this.selectedControl])}}}}}],bb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:948,end:2579})})(ub.Morph);(function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),
Oc=bb.hasOwnProperty("ToggledControl")&&"function"===typeof bb.ToggledControl?bb.ToggledControl:bb.ToggledControl=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"toggle",value:function(ma){var Aa=$jscomp.makeIterator(this.submorphs).next().value,xb=this.toggledControl(ma);Aa=[Aa].concat($jscomp.arrayFromIterable(xb?[xb]:[]));ub.signal(this,"update",ma&&xb.value);xb&&(xb.opacity=0);this.animate({submorphs:Aa,
duration:ub.duration});xb&&xb.animate({opacity:1,duration:ub.duration})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ToggledControl"}},{key:"properties",get:function(){return{title:{defaultValue:"Toggled Property"},toggledControl:{},checked:{},clipMode:{defaultValue:"hidden"},fill:{defaultValue:ub.Color.transparent},layout:{initialize:function(){this.layout=new ub.VerticalLayout({spacing:5})}},submorphs:{initialize:function(){var ma=new ub.CheckBox({checked:this.checked});this.submorphs=
[{fill:ub.Color.transparent,layout:new ub.HorizontalLayout({autoResize:!1}),height:25,submorphs:[{type:"label",name:"property name",fontWeight:"bold",fontSize:14,autofit:!0,opacity:.8,padding:ub.rect(0,2,3,0),textString:this.title,styleClasses:["controlLabel"]},ma]}];this.toggle(this.checked);ub.connect(ma,"toggle",this,"toggle")}}}}}],bb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2581,end:4273})})(ub.Morph);(function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Oc=bb.hasOwnProperty("StylePopover")&&"function"===typeof bb.StylePopover?bb.StylePopover:bb.StylePopover=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"setupConnections",value:function(){}},{key:"controls",
value:function(){return[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylePopover"}},{key:"properties",get:function(){return{targetMorph:{initialize:function(){this.targetMorph=ub.morph({layout:new ub.HorizontalLayout({spacing:5,resizeContainer:!0}),fill:ub.Color.transparent,submorphs:this.controls()});this.setupConnections()}}}}}],bb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4275,end:4825})})(ub.Popover);var Vc=function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Oc=bb.hasOwnProperty("IconPopover")&&"function"===typeof bb.IconPopover?bb.IconPopover:bb.IconPopover=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"onDrop",value:function(ma){var Aa=this;ma.hand.grabbedMorphs.find(function(xb){return xb===
Aa.iconLabel})&&(ma.hand.dropMorphsOn(this),this.iconLabel.remove())}},{key:"controls",value:function(){return[{draggable:!1,layout:new ub.VerticalLayout({spacing:4}),fill:ub.Color.transparent,submorphs:[new ub.SearchField({name:"searchInput",width:200,placeHolder:"Search Icons"}),ub.morph({textAndAttributes:this.iconAsTextAttributes(),name:"iconList",draggable:!0,type:"text",extent:ub.pt(200,200),textStyleClasses:["fas","far"],clipMode:"auto",readOnly:!0})]}]}},{key:"setupConnections",value:function(){var ma=
this.ui,Aa=ma.iconList;ub.connect(ma.searchInput,"searchInput",this,"filterIcons");ub.connect(Aa,"onMouseUp",this,"iconSelectClick");ub.connect(Aa,"onDragStart",this,"createIconLabel")}},{key:"relayout",value:function(){}},{key:"createIconLabel",value:function(ma){ma=this.ui.iconList.textPositionFromPoint(ma.positionIn(this.ui.iconList));ma=this.iconAtTextPos(ma);this.iconLabel=ub.Icon.makeLabel(ma,{fontSize:this.ui.iconList.fontSize,name:ma});this.iconLabel.openInHand()}},{key:"iconAsTextAttributes",
value:function(ma){var Aa=Object.keys(ub.Icons);ma&&(Aa=Aa.filter(ma));return ub.arr.flatmap(Aa,function(xb,P){return[ub.Icons[xb].code,{iconCode:ub.Icons[xb].code,iconName:xb}," ",{fontFamily:"sans-serif",iconCode:!1,iconName:!1}]})}},{key:"filterIcons",value:function(){var ma=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){if(1==Aa.nextAddress)return Aa.yield(ub.promise.delay(250),2);ub.fun.debounceNamed("filterIcons",200,function(){ma.ui.iconList.textAndAttributes=ma.iconAsTextAttributes(function(xb){return ma.ui.searchInput.matches(xb.toLowerCase())})})();
Aa.jumpToEnd()})}},{key:"iconSelectClick",value:function(ma){ma=this.ui.iconList.textPositionFromPoint(ma.positionIn(this.ui.iconList));ma=this.iconAtTextPos(ma);this.setStatusMessage(ma);ub.signal(this,"select",ma)}},{key:"iconAtTextPos",value:function(ma){var Aa=ma.row;ma=ma.column;--ma;for(var xb=this.ui.iconList,P=xb.textAndAttributesInRange({start:{row:Aa,column:Math.max(0,ma)},end:{row:Aa,column:ma+2}});P.length&&!P[1].iconName;)ma++,P=P.slice(2);var va={start:{row:Aa,column:ma},end:{row:Aa,
column:ma+1}};xb.addTextAttribute({backgroundColor:xb.selectionColor.darker().withA(.5)},va);ub.promise.delay(1E3).then(function(){return xb.addTextAttribute({backgroundColor:ub.Color.transparent},va)});return P.length?P[1].iconName:null}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconPopover"}},{key:"properties",get:function(){return{isEpiMorph:{get:function(){return!1}},popoverColor:{defaultValue:ub.Color.gray.lighter()},ui:{get:function(){return{searchInput:this.get("searchInput"),
iconList:this.get("iconList")}}}}}}],bb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4834,end:8444})}(ub.StylePopover);ub.IconPopover=Vc;ub.IconPopover=Vc;ub.IconPopover=Vc;Vc=function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Oc=bb.hasOwnProperty("LayoutPopover")&&
"function"===typeof bb.LayoutPopover?bb.LayoutPopover:bb.LayoutPopover=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"getLayoutObjects",value:function(){return[null,new ub.HorizontalLayout({autoResize:!1}),new ub.VerticalLayout({autoResize:!1}),new ub.TilingLayout,new ub.ProportionalLayout,new ub.GridLayout({grid:[[null],[null],[null]]})]}},{key:"close",value:function(){Oa._get(Object.getPrototypeOf(Oc.prototype),
"close",this).call(this);this.clearLayoutHalo()}},{key:"controls",value:function(){this.showLayoutHaloFor(this.container);return[{fill:ub.Color.transparent,layout:new ub.VerticalLayout({spacing:5,layoutOrder:function(ma){return this.container.submorphs.indexOf(ma)}}),submorphs:[this.layoutPicker(),this.layoutControls()]}]}},{key:"updateControls",value:function(){this.get("Layout Type").relayout();this.getSubmorphNamed("controlContainer").animate(this.layoutHalo?{isLayoutable:!0,submorphs:this.layoutHalo.optionControls(this),
duration:300}:{isLayoutable:!1,extent:ub.pt(0,0),submorphs:[],duration:300})}},{key:"showLayoutHaloFor",value:function(ma){this.clearLayoutHalo();ma&&ma.layout&&(this.layoutHalo=(ma.world()||ma.env.world).showLayoutHaloFor(ma))}},{key:"clearLayoutHalo",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null)}},{key:"getCurrentLayoutName",value:function(){return this.getLayoutName(this.container.layout)}},{key:"getLayoutName",value:function(ma){return ma?ma.name()+" Layout":
"No Layout"}},{key:"update",value:function(){}},{key:"applyLayout",value:function(ma){this.container.animate({layout:ma});this.showLayoutHaloFor(this.container);this.updateControls(this.controls());ub.signal(this,"layoutChanged",this.container.layout)}},{key:"layoutPicker",value:function(){var ma=this,Aa=this.getLayoutObjects().map(function(xb){var P={};return P[ma.getLayoutName(xb)]=xb,P});Aa=this.get("Layout Type")||new ub.DropDownSelector({name:"Layout Type",borderRadius:2,padding:3,getCurrentValue:function(){return ma.getCurrentLayoutName()},
selectedValue:this.container.layout,values:ub.obj.merge(Aa)});ub.connect(Aa,"selectedValue",this,"applyLayout");return Aa}},{key:"layoutControls",value:function(){return{name:"controlContainer",fill:ub.Color.transparent,layout:new ub.VerticalLayout,isLayoutable:!!this.layoutHalo,submorphs:this.layoutHalo?this.layoutHalo.optionControls(this):[]}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutPopover"}},{key:"properties",get:function(){return{container:{},popoverColor:{defaultValue:ub.Color.gray.lighter()}}}}],
bb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:8453,end:11192})}(ub.StylePopover);ub.LayoutPopover=Vc;ub.LayoutPopover=Vc;ub.LayoutPopover=Vc;Vc=function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Oc=bb.hasOwnProperty("FillPopover")&&
"function"===typeof bb.FillPopover?bb.FillPopover:bb.FillPopover=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"openHandle",value:function(ma){ma.openInWorld();this.openHandles.push(ma)}},{key:"close",value:function(){Oa._get(Object.getPrototypeOf(Oc.prototype),"close",this).call(this);this.openHandles.forEach(function(ma){return ma.remove()})}},{key:"setupConnections",value:function(){var ma=
this.ui,Aa=ma.fillSelector,xb=ma.colorField;ma=ma.gradientEditor;Aa&&ub.connect(this,"fillValue",Aa,"value");ma&&(ub.connect(ma,"gradientValue",this,"fillValue"),ub.connect(ma,"openHandle",this,"openHandle"));xb&&(ub.connect(this,"close",xb,"remove"),ub.connect(xb,"update",this,"fillValue"),ub.connect(this,"onMouseDown",xb,"removeWidgets"))}},{key:"commands",get:function(){var ma=this;return Oa._get(Object.getPrototypeOf(Oc.prototype),"commands",this).concat([{name:"switch to fill",exec:function(){var Aa=
new ub.colorWidgets.ColorPickerField({name:"colorField",colorValue:ma.fillValue.isGradient?ub.Color.blue:ma.fillValue});Aa.whenRendered().then(function(){ma.setupConnections()});return Aa}},{name:"switch to gradient",exec:function(){var Aa=new ub.colorWidgets.GradientEditor({name:"gradient editor",gradientValue:ma.fillValue});Aa.whenRendered().then(function(){ma.setupConnections();ma.handleMorph&&Aa.showGradientHandlesOn(ma.handleMorph);Aa.update()});return Aa}}])}},{key:"controls",value:function(){return this.gradientEnabled?
[new ub.SelectableControl({name:"fillSelector",target:this,selectedControl:this.fillValue&&this.fillValue.isGradient?"Gradient":"Fill",selectableControls:{Fill:"switch to fill",Gradient:"switch to gradient"}})]:[{fill:ub.Color.transparent,layout:new ub.VerticalLayout({spacing:0}),submorphs:[new ub.colorWidgets.ColorPickerField({name:"colorField",colorValue:this.fillValue})]}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FillPopover"}},{key:"properties",get:function(){return{gradientEnabled:{defaultValue:!0},
fillValue:{defaultValue:ub.Color.blue},popoverColor:{defaultValue:ub.Color.gray.lighter()},handleMorph:{},openHandles:{defaultValue:[]},ui:{get:function(){return{colorField:this.get("colorField"),fillSelector:this.get("fillSelector"),gradientEditor:this.get("gradient editor")}}}}}}],bb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:11201,end:14064})}(ub.StylePopover);ub.FillPopover=Vc;ub.FillPopover=Vc;ub.FillPopover=Vc;var ib=Ca("S",function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Oc=bb.hasOwnProperty("ShadowPopover")&&"function"===typeof bb.ShadowPopover?bb.ShadowPopover:bb.ShadowPopover=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"controls",value:function(){var ma=
this.shadowValue?this.shadowValue.inset?"Inset Shadow":"Drop Shadow":"No Shadow",Aa=[{layout:new ub.VerticalLayout({resizeContainer:!0,spacing:5}),fill:ub.Color.transparent,name:"control container",submorphs:[ma=new ub.DropDownSelector({name:"shadow type",borderRadius:2,padding:3,selectedValue:ma,values:["No Shadow","Drop Shadow","Inset Shadow"]})].concat(this.shadowValue?this.shadowControls():[])}];ub.connect(ma,"selectedValue",this,"changeShadowType");return Aa}},{key:"shadowControls",value:function(){var ma=
this.shadowValue,Aa=new ub.NumberWidget({min:0,autofit:!1,name:"distanceSlider",number:ma.distance,unit:"px"}),xb=new ub.NumberWidget({name:"angleSlider",min:0,max:360,number:ma.rotation,autofit:!1}),P=new ub.NumberWidget({name:"spreadSlider",min:0,number:ma.spread,autofit:!1}),va=new ub.NumberWidget({name:"blurSlider",min:0,number:ma.blur,autofit:!1});ma=new ub.colorWidgets.ColorPickerField({name:"colorPicker",colorValue:ma.color});ub.connect(ma,"colorValue",this,"updateShadow",{converter:function(Va){return{color:Va}}});
ub.connect(this,"onMouseDown",ma,"removeWidgets");ub.connect(this,"close",ma,"remove");ub.connect(P,"update",this,"updateShadow",{converter:function(Va){return{spread:Va}}});ub.connect(Aa,"update",this,"updateShadow",{converter:function(Va){return{distance:Va}}});ub.connect(va,"update",this,"updateShadow",{converter:function(Va){return{blur:Va}}});ub.connect(xb,"update",this,"updateShadow",{converter:function(Va){return{rotation:Va}}});return new ub.Morph({layout:new ub.GridLayout({autoAssign:!1,
fitToCell:!1,columns:[0,{paddingLeft:1}],rows:ub.arr.flatten(ub.arr.range(0,3).map(function(Va){return[Va,{paddingBottom:5}]}),1),grid:[["spreadLabel",null,"spreadSlider"],["distanceLabel",null,"distanceSlider"],["blurLabel",null,"blurSlider"],["angleLabel",null,"angleSlider"],["colorLabel",null,"colorPicker"]]}),width:120,height:145,fill:ub.Color.transparent,submorphs:ub.arr.flatten([["distance",Aa],["spread",P],["blur",va],["angle",xb],["color",ma]].map(function(Va){var Db=$jscomp.makeIterator(Va);
Va=Db.next().value;Db=Db.next().value;return[{type:"label",styleClasses:["controlName"],value:ub.string.capitalize(Va)+":",name:Va+"Label"},Db]}))})}},{key:"changeShadowType",value:function(ma){"No Shadow"==ma?this.toggleShadow(!1):"Inset Shadow"==ma?(this.toggleShadow(!0),this.shadowValue.inset=!0):(this.toggleShadow(!0),this.shadowValue.inset=!1);this.get("control container").animate({submorphs:[this.get("shadow type")].concat(this.shadowValue?this.shadowControls():[]),duration:300})}},{key:"updateShadow",
value:function(ma){var Aa=this.shadowValue;ma=Object.assign({fast:Aa.fast,color:Aa.color,spread:Aa.spread,blur:Aa.blur,distance:Aa.distance,rotation:Aa.rotation,inset:Aa.inset},ma);this.shadowValue=new ub.ShadowObject(ma)}},{key:"toggleShadow",value:function(ma){this.shadowValue&&(this.cachedShadow=this.shadowValue);this.shadowValue=ma&&this.cachedShadow}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowPopover"}},{key:"properties",get:function(){return{shadowValue:{},cachedShadow:{defaultValue:new ub.ShadowObject({fast:!0})},
popoverColor:{defaultValue:ub.Color.gray.lighter()}}}}],bb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:14073,end:18507})}(ub.StylePopover));ub.ShadowPopover=ib;ub.ShadowPopover=ib;ub.ShadowPopover=ib;ub.milimeter="https://upload.wikimedia.org/wikipedia/commons/c/c8/Millimeterpapier_10_x_10_cm.svg";
ib=function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Oc=bb.hasOwnProperty("PointPopover")&&"function"===typeof bb.PointPopover?bb.PointPopover:bb.PointPopover=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"refineResolution",value:function(ma){this.resolution=.25+this.get("scroller").scroll.y/160;this.relayout()}},{key:"adjustPoint",value:function(ma){this.pointValue=
this.pointValue.addPt(ma.state.dragDelta.scaleBy(1/this.resolution)).roundTo(1);this.relayout()}},{key:"relayout",value:function(){Oa._get(Object.getPrototypeOf(Oc.prototype),"relayout",this).call(this);var ma=this.getSubmorphNamed("mesh"),Aa=this.getSubmorphNamed("point value view");ma.origin=ma.innerBounds().center().addXY(4,1);ma.position=this.get("body").innerBounds().center();ma.scale=this.resolution;this.getSubmorphNamed("resolution view").value="Resolution: "+this.resolution.toFixed(2)+"x";
Aa.value=ub.obj.safeToString(this.pointValue);Aa.position=this.getSubmorphNamed("knob").bottomRight}},{key:Symbol.for("lively-instance-initialize"),value:function(ma){var Aa=this;Oa._get(Object.getPrototypeOf(Oc.prototype),Symbol.for("lively-instance-initialize"),this).call(this,ma);this.whenRendered().then(function(){return Aa.relayout()})}},{key:"calibrate",value:function(){var ma=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){if(1==Aa.nextAddress)return ma.get("knob").animate({center:ma.innerBounds().center(),
duration:200}),Aa.yield(ma.getSubmorphNamed("point value view").animate({opacity:0,duration:200}),2);ma.relayout();Aa.jumpToEnd()})}},{key:"showPointValue",value:function(){this.getSubmorphNamed("point value view").animate({opacity:1,duration:200})}},{key:"controls",value:function(){this.extent=ub.pt(200,200);var ma,Aa,xb=[ub.morph({extent:ub.pt(200,200),clipMode:"hidden",fill:ub.Color.transparent,submorphs:[{type:"image",name:"mesh",fill:ub.Color.transparent,opacity:.5,imageUrl:ub.milimeter,autoResize:!0},
{extent:ub.pt(200,200),draggable:!1,dropShadow:{inset:!0,spread:5,color:ub.Color.gray},fill:ub.Color.transparent},ma=ub.morph({name:"scroller",extent:ub.pt(200,200),clipMode:"scroll",draggable:!1,opacity:.01,submorphs:[{height:625.6,width:10}]}),Aa=ub.morph({name:"knob",type:"ellipse",nativeCursor:"-webkit-grab",fill:ub.Color.red,borderColor:ub.Color.black,borderWidth:1,center:ub.pt(100,100)}),{type:"label",name:"point value view",padding:4,opacity:0,styleClasses:["Tooltip"]},{position:ub.pt(10,10),
type:"label",name:"resolution view",padding:4,styleClasses:["Tooltip"]}]})];ma.scroll=ub.pt(0,120);ub.connect(Aa,"onDragStart",this,"showPointValue");ub.connect(Aa,"onDrag",this,"adjustPoint");ub.connect(Aa,"onDragEnd",this,"calibrate");ub.connect(this,"extent",this,"relayout");ub.connect(ma,"onScroll",this,"refineResolution");return xb}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointPopover"}},{key:"properties",get:function(){return{pointValue:{defaultValue:ub.pt(0,0)},resolution:{defaultValue:1}}}}],
bb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:18622,end:21799})}(ub.StylePopover);ub.PointPopover=ib;ub.PointPopover=ib;ub.PointPopover=ib;ib=function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Oc=bb.hasOwnProperty("RectanglePopover")&&
"function"===typeof bb.RectanglePopover?bb.RectanglePopover:bb.RectanglePopover=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"controls",value:function(){var ma=this;return[{fill:ub.Color.transparent,extent:ub.pt(120,120),layout:new ub.GridLayout({grid:[["top","top scrubber"],["right","right scrubber"],["left","left scrubber"],["bottom","bottom scrubber"]],columns:[0,{paddingLeft:4},1,{paddingRight:4,
fixed:!0,width:60}],rows:ub.arr.flatten(ub.arr.range(0,3).map(function(Aa){return[Aa,{paddingTop:0==Aa?4:2,paddingBottom:3==Aa?4:2}]}))}),submorphs:ub.arr.flatten(["top","right","bottom","left"].map(function(Aa){var xb=new ub.NumberWidget({master:{auto:"styleguide://SystemWidgets/number field/light"},name:Aa+" scrubber",autofit:!1,number:ma.rectangle.partNamed(Aa)});ub.connect(xb,"update",ma,"rectangle",{updater:function(P,va){var Va=this.targetObj.rectangle,Db={};va=(Db.left=Va.left(),Db.top=Va.top(),
Db.right=Va.right(),Db.bottom=Va.bottom(),Db[Aa]=va,Db);P(ub.Rectangle.inset(va.left,va.top,va.right,va.bottom))},varMapping:{side:Aa,Rectangle:ub.Rectangle}});return[{type:"label",styleClasses:["controlName"],name:Aa,value:Aa,padding:3},xb]}))}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RectanglePopover"}},{key:"properties",get:function(){return{popoverColor:{defaultValue:ub.Color.gray.lighter()},rectangle:{defaultValue:ub.rect(0)}}}}],bb,{pathInPackage:function(){return"styling/style-popover.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:21808,end:23792})}(ub.StylePopover);ub.RectanglePopover=ib;ub.RectanglePopover=ib;ub.RectanglePopover=ib;ib=function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Oc=bb.hasOwnProperty("TextPopover")&&"function"===typeof bb.TextPopover?bb.TextPopover:bb.TextPopover=
function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"controls",value:function(){var ma=new ub.Text(Object.assign({name:"editor",extent:ub.pt(300,200),textString:this.text,lineWrapping:"by-chars"},ub.config.codeEditor.defaultStyle));return[{layout:new ub.HorizontalLayout,fill:ub.Color.transparent,borderColor:ub.Color.gray,borderWidth:1,borderRadius:4,clipMode:"hidden",submorphs:[ma]}]}},{key:"commands",
get:function(){return Oa._get(Object.getPrototypeOf(Oc.prototype),"commands",this).concat([{name:"save string",exec:function(ma){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){ma.text=ma.get("editor").textString;ub.signal(ma,"save",ma.text);ma.setStatusMessage("String saved!",ub.Color.green);Aa.jumpToEnd()})}}])}},{key:"keybindings",get:function(){return Oa._get(Object.getPrototypeOf(Oc.prototype),"keybindings",this).concat([{keys:{mac:"Command-S",win:"Ctrl-S"},command:"save string"}])}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextPopover"}},{key:"properties",get:function(){return{text:{defaultValue:"Enter some text!"}}}}],bb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23801,end:24876})}(ub.StylePopover);ub.TextPopover=ib;ub.TextPopover=
ib;ub.TextPopover=ib;Object.assign(ub.popovers,{FillPopover:ub.FillPopover,IconPopover:ub.IconPopover,RectanglePopover:ub.RectanglePopover,ShadowPopover:ub.ShadowPopover,PointPopover:ub.PointPopover,LayoutPopover:ub.LayoutPopover});var Ra=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js");Ra.Morph=ke;Ra.morph=Ac;Ra.StyleSheet=Gc;Ra.Text=ec;Ra.Icon=ab;Ra.VerticalLayout=Jc;Ra.GridLayout=Sb;Ra.HorizontalLayout=Nd;Ra.pt=Pc;Ra.Rectangle=W;Ra.Color=Bb;Ra.LinearGradient=sc;Ra.rect=Kb;
Ra.signal=Ld;Ra.once=wd;Ra.connect=Hd;Ra.obj=Ha;Ra.Window=nc;Ra.ColorPalette=ad;Ra.FillPopover=Vc;Ra.colorWidgets=cd;Ra.Slider=dd;Ra.Popover=$d;Ra.WHEEL_URL="/lively.ide/assets/color-wheel.png";ad=function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),Oc=bb.hasOwnProperty("ColorPickerField")&&"function"===typeof bb.ColorPickerField?bb.ColorPickerField:bb.ColorPickerField=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Oa(Oc,pb,[{key:"testAttr",get:function(){return[42]}},{key:"spec",value:function(){return Ra.obj.dissoc(Oa._get(Object.getPrototypeOf(Oc.prototype),"spec",this).call(this),["submorphs"])}},{key:"onKeyDown",value:function(ma){"Escape"==ma.key&&(this.picker&&this.picker.remove(),this.colorValue.isGradient?this.fillWidget.remove():this.palette.remove())}},{key:"onHoverIn",value:function(){this.get("dropDownIndicator").animate({opacity:1,duration:300})}},{key:"onHoverOut",value:function(){this.get("dropDownIndicator").animate({opacity:0,
duration:300})}},{key:"update",value:function(ma){this._updating=!0;var Aa=this.submorphs[1];this.colorValue=ma;this.get("topLeft").fill=ma;this.get("bottomRight").fill=ma.isGradient?Ra.Color.transparent:ma.withA(1);Aa.visible=Aa.isLayoutable=!this.gradientEnabled;this.gradientEnabled?this.get("bottomRight").width=this.get("topLeft").width=this.submorphs[0].width=this.width:this.get("bottomRight").width=this.get("topLeft").width=this.width-Aa.width;this.get("bottomRight").left=0;this.get("dropDownIndicator").right=
this.get("paletteButton").width-5;this._updating=!1}},{key:"openPicker",value:function(ma){var Aa=this,xb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){xb=Aa.picker||new Ra.ColorPicker({color:Aa.colorValue});xb.position=Ra.pt(0,-xb.height/2);Ra.connect(xb,"color",Aa,"update");Aa.picker=xb.openInWorld();Aa.picker.topLeft=Aa.globalBounds().bottomCenter();Aa.picker.topLeft=Aa.world().visibleBounds().translateForInclusion(Aa.picker.globalBounds()).topLeft();Aa.removePalette();P.jumpToEnd()})}},
{key:"removePicker",value:function(){this.picker&&this.picker.remove()}},{key:"openPalette",value:function(ma){var Aa=this,xb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(1==P.nextAddress)return xb=Aa.gradientEnabled?Aa.fillWidget:Aa.palette,Aa.gradientEnabled?Ra.connect(xb,"fillValue",Aa,"update"):Ra.connect(xb.targetMorph,"color",Aa,"update"),xb.isLayoutable=!1,P.yield(xb.openInWorld(),2);xb.topCenter=Aa.get("paletteButton").globalBounds().center();xb.topCenter=Aa.world().visibleBounds().translateForInclusion(xb.globalBounds()).topCenter();
Aa.removePicker();Ra.once(xb,"remove",xb,"topLeft",{converter:function(){return Ra.pt(0,0)},varMapping:{pt:Ra.pt}});P.jumpToEnd()})}},{key:"removePalette",value:function(){this.colorValue.isGradient?this.fillWidget.remove():this.palette.remove()}},{key:"removeWidgets",value:function(){this.removePalette();this.removePicker()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPickerField"}},{key:"properties",get:function(){return{gradientEnabled:{defaultValue:!1,after:["colorValue"],
set:function(ma){this.setProperty("gradientEnabled",ma);this.update(this.colorValue)}},fillWidget:{serialize:!1,get:function(){return this._fillWidget=new Ra.FillPopover({fillValue:this.colorValue})}},testProp:{get:function(){return[42]}},palette:{serialize:!1,get:function(){return this._palette||(this._palette=new Ra.Popover({position:Ra.pt(0,0),name:"Color Palette",targetMorph:new Ra.ColorPalette({color:this.colorValue})}))}},colorValue:{after:["submorphs"],set:function(ma){ma&&(ma.isColor||ma.isGradient)||
(ma=Ra.Color.blue);if(!this._updating)return this.update(ma);this.setProperty("colorValue",ma)},get:function(){return this.getProperty("colorValue")||Ra.Color.white}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/color field"}}},submorphs:{initialize:function(){this.innerBounds().topRight();this.innerBounds().bottomLeft();var ma=Ra.pt(40,25);this.submorphs=[{extent:ma,clipMode:"hidden",name:"paletteButton",submorphs:[{name:"topLeft",extent:ma},{name:"bottomRight",type:"polygon",
extent:ma,origin:Ra.pt(0,0),vertices:[Ra.pt(0,0),ma.withX(0),ma]},Ra.Icon.makeLabel("chevron-down",{opacity:0,name:"dropDownIndicator",center:Ra.pt(30,12.5)})]},{fill:Ra.Color.transparent,extent:Ra.pt(25,25),onHoverIn:function(){this.fill=Ra.Color.black.withA(.2)},onHoverOut:function(){this.fill=Ra.Color.transparent},submorphs:[{name:"pickerButton",type:"image",autoResize:!1,imageUrl:Ra.WHEEL_URL}]}];Ra.connect(this.getSubmorphNamed("pickerButton"),"onMouseDown",this,"openPicker");Ra.connect(this.getSubmorphNamed("paletteButton"),
"onMouseDown",this,"openPalette");Ra.connect(this,"remove",this,"removeWidgets");this.colorValue&&this.update(this.colorValue)}}}}}],bb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:630,end:6351})}(Ra.Morph);Ra.ColorPickerField=ad;Ra.ColorPickerField=ad;Ra.ColorPickerField=ad;
Ra.colorWidgets.ColorPickerField=Ra.ColorPickerField;(function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),Oc=bb.hasOwnProperty("FieldPicker")&&"function"===typeof bb.FieldPicker?bb.FieldPicker:bb.FieldPicker=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"update",value:function(ma){this.getSubmorphNamed("hue").fill=Ra.Color.hsb(ma.hue,1,1);this.brightness=
ma.brightness;this.saturation=ma.saturation;this.get("picker").center=this.pickerPosition}},{key:"onMouseDown",value:function(ma){this.pickerPosition=ma.positionIn(this);Ra.signal(this,"pickerPosition",this.pickerPosition)}},{key:"onDrag",value:function(ma){this.pickerPosition=ma.positionIn(this)}},{key:"relayout",value:function(){var ma=this.innerBounds();this.getSubmorphNamed("hue").setBounds(ma);this.getSubmorphNamed("shade").setBounds(ma);this.getSubmorphNamed("light").setBounds(ma)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"FieldPicker"}},{key:"properties",get:function(){return{fill:{defaultValue:Ra.Color.transparent},saturation:{defaultValue:0},brightness:{defaultValue:0},draggable:{defaultValue:!0},pickerPosition:{derived:!0,after:["submorphs","brightness","saturation"],get:function(){var ma=this.saturation,Aa=this.brightness;return void 0===ma||void 0===Aa?Ra.pt(0,0):Ra.pt(this.getSubmorphNamed("hue").width*ma,this.getSubmorphNamed("hue").height*(1-Aa))},set:function(ma){var Aa=ma.x;ma=ma.y;
var xb=this.getSubmorphNamed("hue"),P=xb.height;this.saturation=Math.max(0,Math.min(Aa/xb.width,1));this.brightness=Math.max(0,Math.min(1-ma/P,1));Ra.signal(this,"saturation",this.saturation);Ra.signal(this,"brightness",this.brightness)}},submorphs:{initialize:function(){this.submorphs=[{borderRadius:3,name:"hue",reactsToPointer:!1},{borderRadius:3,name:"shade",reactsToPointer:!1,fill:new Ra.LinearGradient({stops:[{color:Ra.Color.white,offset:0},{color:Ra.Color.transparent,offset:1}],vector:"eastwest"})},
{borderRadius:3,name:"light",reactsToPointer:!1,fill:new Ra.LinearGradient({stops:[{color:Ra.Color.black,offset:0},{color:Ra.Color.transparent,offset:1}],vector:"southnorth"})},{name:"picker",type:"ellipse",reactsToPointer:!1,fill:Ra.Color.transparent,borderColor:Ra.Color.black,borderWidth:3,extent:Ra.pt(16,16),submorphs:[{type:"ellipse",fill:Ra.Color.transparent,borderColor:Ra.Color.white,reactsToPointer:!1,borderWidth:3,center:Ra.pt(8,8),extent:Ra.pt(12,12)}]}];Ra.connect(this,"extent",this,"relayout")}}}}}],
bb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6404,end:9755})})(Ra.Morph);(function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),Oc=bb.hasOwnProperty("ColorPropertyView")&&"function"===typeof bb.ColorPropertyView?bb.ColorPropertyView:bb.ColorPropertyView=
function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"onFocus",value:function(){this.get("keyLabel").styleClasses=["key"].concat($jscomp.arrayFromIterable(this.readOnly?[]:["large","active"]));this.styleClasses=[].concat($jscomp.arrayFromIterable(this.readOnly?[]:["editable","active"]),["value"]);this.selection.cursorBlinkStart()}},{key:"onBlur",value:function(){this.get("keyLabel").styleClasses=[!this.readOnly&&
"large","key"];this.styleClasses=[!this.readOnly&&"editable","value"];this.selection.uninstall()}},{key:"onKeyDown",value:function(ma){"Enter"!=ma.keyCombo||this.readOnly?Oa._get(Object.getPrototypeOf(Oc.prototype),"onKeyDown",this).call(this,ma):(this.owner.focus(),ma.stop(),Ra.signal(this,"updateValue",this.value))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPropertyView"}},{key:"properties",get:function(){return{update:{},value:{derived:[!0],set:function(ma){this.textString=
Ra.obj.safeToString(ma)},get:function(){return this.textString}},styleClasses:{after:["readOnly"],initialize:function(){this.styleClasses=[!this.readOnly&&"editable","value"]}},selectionColor:{defaultValue:Ra.Color.gray.darker()}}}}],bb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:9757,end:10927})})(Ra.Text);(function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),Oc=bb.hasOwnProperty("HuePicker")&&"function"===typeof bb.HuePicker?bb.HuePicker:bb.HuePicker=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"onMouseDown",value:function(ma){this.sliderPosition=Ra.pt(0,ma.positionIn(this).y)}},{key:"onDrag",value:function(ma){this.sliderPosition=
Ra.pt(0,ma.positionIn(this).y)}},{key:"update",value:function(ma){this.hue=ma.hue;this.get("slider").center=this.sliderPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HuePicker"}},{key:"properties",get:function(){return{fill:{defaultValue:new Ra.LinearGradient({stops:[{color:Ra.Color.rgb(255,0,0),offset:0},{color:Ra.Color.rgb(255,255,0),offset:.17},{color:Ra.Color.limeGreen,offset:.33},{color:Ra.Color.cyan,offset:.5},{color:Ra.Color.blue,offset:.66},{color:Ra.Color.magenta,
offset:.83},{color:Ra.Color.rgb(255,0,0),offset:1}],vector:"northsouth"})},borderRadius:{defaultValue:3},hue:{defaultValue:0},sliderPosition:{derived:!0,after:["submorphs"],get:function(){return Ra.pt(this.width/2,this.hue/360*this.height)},set:function(ma){this.hue=Math.max(0,Math.min(ma.y/this.height*360,359));Ra.signal(this,"hue",this.hue)}},submorphs:{initialize:function(){this.submorphs=[{name:"slider",height:10,width:50,borderRadius:3,reactsToPointer:!1,nativeCursor:"ns-resize",borderColor:Ra.Color.black,
fill:Ra.Color.transparent,borderWidth:2}]}}}}}],bb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10929,end:12576})})(Ra.Morph);(function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),Oc=bb.hasOwnProperty("ColorDetails")&&"function"===typeof bb.ColorDetails?
bb.ColorDetails:bb.ColorDetails=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"update",value:function(ma){ma=ma.color;var Aa=$jscomp.makeIterator(ma.toTuple8Bit()),xb=Aa.next().value,P=Aa.next().value;Aa=Aa.next().value;var va=$jscomp.makeIterator(ma.toHSB()),Va=va.next().value,Db=va.next().value;va=va.next().value;var mc=this.get("hashViewer");this.get("colorViewer").fill=ma;mc.replace(mc.documentRange,
ma.toHexString(),!1,!1);this.get("R").value="R "+xb.toFixed(0)+"\n\nG "+P.toFixed(0)+"\n\nB "+Aa.toFixed(0)+"\n\nH "+Va.toFixed(0)+"\n\nS "+Db.toFixed(2)+"\n\nV "+va.toFixed(2)}},{key:"onHashViewerChanged",value:function(ma){ma=Ra.Color.rgbHex(ma);this.owner.owner.color=ma}},{key:"keyValue",value:function(ma){var Aa=ma.name,xb=ma.key,P=ma.value,va=ma.update;ma=ma.editable;return new Ra.Morph({fill:Ra.Color.transparent,layout:new Ra.HorizontalLayout({spacing:5}),submorphs:[{type:"label",name:"keyLabel",
styleClasses:[ma&&"large","key"],value:xb},new Ra.ColorPropertyView({name:Aa||xb,readOnly:!ma,value:P,update:va})]})}},{key:"hashViewer",value:function(){var ma=this.keyValue({name:"hashViewer",key:"#",editable:!0,value:this.color.toHexString()});Ra.connect(ma.get("hashViewer"),"updateValue",this,"onHashViewerChanged");return ma}},{key:"rgbViewer",value:function(){var ma=$jscomp.makeIterator(this.color.toTuple8Bit()),Aa=ma.next().value,xb=ma.next().value;ma=ma.next().value;return new Ra.Morph({name:"rgbViewer",
fill:Ra.Color.transparent,submorphs:[this.keyValue({key:"R",value:Aa.toFixed()}),this.keyValue({key:"G",value:xb.toFixed()}),this.keyValue({key:"B",value:ma.toFixed()})]})}},{key:"hsbViewer",value:function(){var ma=$jscomp.makeIterator(this.color.toHSB()),Aa=ma.next().value,xb=ma.next().value;ma=ma.next().value;return new Ra.Morph({name:"hsbViewer",fill:Ra.Color.transparent,submorphs:[this.keyValue({key:"H",value:Aa.toFixed()}),this.keyValue({key:"S",value:xb.toFixed(2)}),this.keyValue({key:"V",value:ma.toFixed(2)})]})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorDetails"}},{key:"properties",get:function(){return{color:{defaultValue:Ra.Color.blue},width:{defaultValue:80},fill:{defaultValue:Ra.Color.transparent},layout:{initialize:function(){this.layout=new Ra.VerticalLayout({spacing:9,layoutOrder:function(ma){return this.container.submorphs.indexOf(ma)}})}},submorphs:{after:["color"],initialize:function(){this.submorphs=[{type:"ellipse",extent:Ra.pt(50,50),name:"colorViewer",fill:this.color},
this.hashViewer(),{type:"label",name:"R",autofit:!0,padding:Ra.rect(10,0,0,0),styleClasses:["ColorPropertyView"]}];this.update(this)}}}}}],bb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:12578,end:15353})})(Ra.Morph);ad=Ca("a",function(pb){var bb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),
Oc=bb.hasOwnProperty("ColorPicker")&&"function"===typeof bb.ColorPicker?bb.ColorPicker:bb.ColorPicker=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Oa(Oc,pb,[{key:"onKeyDown",value:function(ma){"Escape"==ma.key&&this.close()}},{key:"close",value:function(){Oa._get(Object.getPrototypeOf(Oc.prototype),"close",this).call(this);Ra.signal(this,"close")}},{key:"update",value:function(){0!=this.submorphs.length&&
(this.get("header").fill=Ra.Color.transparent,this.get("field picker").update(this),this.get("hue picker").update(this),this.get("details").update(this),this.get("alpha slider").update(this.alpha),Ra.signal(this,"color",this.color))}},{key:"colorPalette",value:function(){var ma=this.colorDetails(),Aa=this.fieldPicker(),xb=this.huePicker(),P=this.alphaSlider();ma=new Ra.Morph({master:{auto:"styleguide://SystemWidgets/color picker"},name:"colorPalette",width:this.width,submorphs:[Aa,xb,ma,P]});Ra.connect(Aa,
"brightness",this,"brightness");Ra.connect(Aa,"saturation",this,"saturation");Ra.connect(xb,"hue",this,"hue");return ma}},{key:"alphaSlider",value:function(){var ma,Aa=Ra.morph({name:"alphaSlider",fill:Ra.Color.transparent,layout:new Ra.HorizontalLayout({spacing:3}),submorphs:[{type:"label",padding:Ra.Rectangle.inset(3),value:"Alpha",fontColor:Ra.Color.gray,fontWeight:"bold"},ma=new Ra.Slider({name:"alpha slider",value:this.alpha,min:0,max:1,width:170})]});Ra.connect(ma,"value",this,"alpha");return Aa}},
{key:"fieldPicker",value:function(){return new Ra.FieldPicker({name:"field picker",saturation:this.saturation,brightness:this.brightness})}},{key:"huePicker",value:function(){return new Ra.HuePicker({name:"hue picker",hue:this.hue})}},{key:"colorDetails",value:function(){return new Ra.ColorDetails({name:"details",color:this.color})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPicker"}},{key:"properties",get:function(){return{extent:{defaultValue:Ra.pt(400,320)},fill:{defaultValue:Ra.Color.black.withA(.7)},
isHaloItem:{defaultValue:!0},borderWidth:{defaultValue:0},hasFixedPosition:{defaultValue:!0},color:{defaultValue:Ra.Color.blue,derived:!0,before:["submorphs","targetMorph"],get:function(){return Ra.Color.hsb(this.hue,this.saturation,this.brightness).withA(this.alpha)},set:function(ma){var Aa=$jscomp.makeIterator(ma.toHSB()),xb=Aa.next().value,P=Aa.next().value;Aa=Aa.next().value;this.hue=xb;this.saturation=P;this.brightness=Aa;this.alpha=ma.a}},alpha:{set:function(ma){this.setProperty("alpha",ma);
this.update()}},saturation:{},brightness:{set:function(ma){this.setProperty("brightness",ma);this.update()}},hue:{set:function(ma){this.setProperty("hue",ma);this.update()}},targetMorph:{initialize:function(){var ma=this;this.targetMorph=this.colorPalette();this.ui.windowTitle.fontColor=Ra.Color.gray;this.ui.header.fill=Ra.Color.transparent;this.whenRendered().then(function(){ma.fill=Ra.Color.black.withA(.7);ma.update()})}}}}}],bb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:15362,end:19200})}(Ra.Window));Ra.ColorPicker=ad;Ra.ColorPicker=ad;Ra.ColorPicker=ad}}});