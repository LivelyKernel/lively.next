System.register("./__root_module__-db735625.js ./index-2260babb.js ./index-7ce4e91c.js ./editor-plugin-25872f24.js ./editor-plugin-97893637.js ./index-a5b95ed8.js ./index-fcc0ad98.js ./index-9659c254.js".split(" "),function(){var db,Zb,lc,Uc,Bc,Vd,Od,je,Bd,jd,zd,ge,We,kf,bf,Hd,Ae,uc,wd,ce,Gd,pe,Te,rc,bd,he,cd,ie,ac,Db,Tc,Nc,wc;return{setters:[function(Vc){db=Vc.i;Zb=Vc.M;lc=Vc.t;Uc=Vc.e;Bc=Vc.p;Vd=Vc.f;Od=Vc.d;je=Vc.o;Bd=Vc.C;jd=Vc.a2;zd=Vc.b;ge=Vc.m;We=Vc.bG;kf=Vc.N;bf=Vc.bD;Hd=Vc.bB;Ae=Vc.I;
uc=Vc.ah;wd=Vc.R;ce=Vc.bH;Gd=Vc.a1;pe=Vc.az;Te=Vc._;rc=Vc.n;bd=Vc.a3;he=Vc.a;cd=Vc.a0;ie=Vc.bI;ac=Vc.g},function(Vc){Db=Vc.e;Tc=Vc.s;Nc=Vc.I},function(){},function(Vc){wc=Vc.I},function(){},function(){},function(){},function(){}],execute:function(){function Vc(Na){var Wa=Na.sourceObj,Vb=Na.targetObj;Wa.isMorph&&Vb.isMorph?(Wa.show(),Vb.show(),Za.showConnector&&Za.showConnector(Wa,Vb)):Za.show(String(Na))}function hb(Na){var Wa=Na.sourceObj,Vb=Na.sourceAttrName,Fa=Na.targetObj,Xa=Na.targetMethodName,
gc=Na.getConverter();Na=Na.getUpdater();return Za.printConnectionElements(Wa,Vb,Fa,Xa,gc,Na)}function zc(Na,Wa,Vb,Fa,Xa,gc){Na="/* global connect, source, target */\nconnect(source, '"+Wa+"', target, '"+Fa+"'";if(Xa||gc)Na+=", {\n";Xa&&(Na+="  converter: "+Xa);Xa&&gc&&(Na+=",");Xa&&(Na+="\n");gc&&(Na+="  updater: "+gc+"\n");if(Xa||gc)Na+="}";return Na+");"}function Ub(Na,Wa){var Vb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return Fa.yield(Za.InteractiveMorphSelector.selectMorph(),
2);Vb=Fa.yieldResult;return Fa.return(Vb?Za.interactiveConnectGivenSourceAndTarget(Na,Wa,Vb):null)})}function Jc(Na,Wa,Vb,Fa){var Xa,gc,ub,qd,fc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ud){switch(Ud.nextAddress){case 1:Xa=Vb&&Vb.world().targetDataBindings(Vb);gc=Na.world();if(!Xa||!Xa.length)return gc.setStatusMessage("connect canceled"),Ud.return();if(Wa){Ud.jumpTo(2);break}ub=[{isListItem:!0,string:"[Enter custom attribute..]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Za.arr.flatten(Na.world().targetDataBindings(Na)).map(function(td){return{isListItem:!0,
string:td.signature||td.name,value:td}})));return Ud.yield(gc.listPrompt(["Select Source Attribute\n",{},"Choose the attribute of the morph that is supposed to invoke the connection. This can be a method, property or a custom signal that is invoked upon the morph.",{paddingTop:"10px",fontSize:14,textAlign:"left",fontWeight:"normal"}],ub,{filterable:!0}),3);case 3:Wa=Ud.yieldResult;if("canceled"==Wa.status)return Ud.return();Wa=Wa.selected[0];Wa=Wa.custom?"sourceAttribute":Wa.name;case 2:return qd=
[{isListItem:!0,string:"[Enter custom attribute...]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Za.arr.flatten(Xa).map(function(td){return{isListItem:!0,value:td,string:td.signature||td.name}}))),Ud.yield(gc.listPrompt(["Select Target Attribute\n",{},"Choose the attribute of the morph that is supposed to invoked once the connection is triggered. This can be either a method or a property of the morph. When selecting a property, keep in mind that the value of the source attribute will be assigned to the property or passed to the method as an argument.",
{fontSize:14,textAlign:"left",fontWeight:"normal",paddingTop:"10px"}],qd,{filterable:!0}),4);case 4:fc=Ud.yieldResult;if("canceled"==fc.status)return Ud.return();fc=fc.selected[0];return Ud.yield(Za.interactivelyEvaluateConnection({sourceObj:Na,sourceAttr:Wa,targetObj:Vb,targetAttr:fc.custom?"targetAttribute":fc.name,onConnect:Fa,prompt:"Edit and confirm connection:"}),0)}})}function Wc(Na,Wa,Vb,Fa){Wa=void 0===Wa?"confirm connection":Wa;var Xa,gc,ub,qd,fc,Ud,td;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fd){Xa=
Na;gc=Xa.sourceObj;ub=Xa.sourceAttrName;qd=Xa.targetObj;fc=Xa.targetMethodName;Ud=Na.getConverter();td=Na.getUpdater();return fd.return(Za.interactivelyEvaluateConnection({sourceObj:gc,sourceAttr:ub,targetObj:qd,targetAttr:fc,converter:Ud,updater:td,prompt:Wa,highlight:Vb,onConnect:Fa}))})}function Ad(Na,Wa,Vb,Fa,Xa){Fa=void 0===Fa?{}:Fa;Xa=Za.rect(0).sides.concat(Za.rect(0).corners);Vb=Vb||new Za.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Za.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Za.Color.transparent,
nativeCursor:"auto"},end:{fill:Za.Color.orange}}},Fa,{hasFixedPosition:!0}));Vb.startPoint.attachTo(Na,"rightCenter");Wa.isMorph?(Fa=Wa.globalBounds().partNameNearest(Xa,Na.globalPosition),Na.globalPosition.equals(Wa.globalBounds().partNamed(Fa))&&Wa.globalBounds().partNameNearest(Za.arr.without(Xa,Fa),Na.globalPosition),Vb.endPoint.attachTo(Wa,"leftCenter")):(Xa=Na.globalBounds().topRight().addPt(Za.pt(100,0)),Wa=Za.morph({type:"label",value:Wa.toString(),styleClasses:["Tooltip"],padding:Za.rect(8,
4)}).openInWorld(Xa),Wa.position=Na.world().bounds().translateForInclusion(Wa.bounds()).topLeft(),Za.once(Vb,"remove",Wa,"remove"),Vb.endPoint.attachTo(Wa,"leftCenter"));return Vb}function Xd(Na){var Wa,Vb,Fa,Xa,gc,ub,qd,fc,Ud,td,fd,Xb,Me,ic,Wb,$a,ma,Ta,qb,ec;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ic){switch(Ic.nextAddress){case 1:Wa=Na;Vb=Wa.sourceObj;Fa=Wa.sourceAttr;Xa=Wa.targetObj;gc=Wa.targetAttr;ub=Wa.converter;qd=Wa.updater;fc=Wa.prompt;Ud=void 0===Wa.highlight?!0:Wa.highlight;
td=Wa.onConnect;fd="lively://lively.bindings-interactive-connect/x"+Vb.id;Xb={context:window,format:"esm",targetModule:fd,classTransform:Za.classToFunctionTransform};Me=Za.printConnectionElements(Vb,Fa,Xa,gc,ub,qd);Xa.isMorph&&Vb.isMorph&&(ic=Xa.propertiesAndPropertySettings().properties[gc]||{type:typeof Xa[gc]},Wb=ic.type,$a=Vb.propertiesAndPropertySettings().properties[Fa]||{type:typeof Vb[Fa]},ma=$a.type,ma!==Wb&&(fc=["Edit and confirm connection:\n",{},"Source: ",{fontSize:14,fontWeight:"normal"},
Vb.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"},"\nTarget: ",{fontSize:14,fontWeight:"normal"},Xa.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"}]));Ta={};Object.assign(lively.modules.module(fd).recorder,(Ta.source=Vb,Ta.target=Xa,Ta.connect=Za.connect,Ta.once=Za.once,Ta[Fa]=Vb[Fa],Ta));if(!fc){qb=Me;Ic.jumpTo(2);break}return Ic.yield($world.editPrompt(fc,{input:Me,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:Xb,
animated:!1}),3);case 3:if(qb=Ic.yieldResult,!qb)return $world.setStatusMessage("connect canceled"),Ic.return();case 2:return Ic.yield(lively.vm.runEval(qb,Xb),4);case 4:ec=Ic.yieldResult;if(ec.isError)return $world.logError(ec.value),Ic.return(Xd({sourceObj:Vb,sourceAttr:Fa,targetObj:Xa,targetAttr:gc,converter:ub,updater:qd,prompt:"confirm connection",highlight:Ud,onConnect:td}));Ud&&($world.setStatusMessage("connected!",Za.Color.green),Za.interactivelyShowConnection(ec.value));"function"===typeof td&&
td(ec);Ic.jumpToEnd()}})}var xc=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");xc.Inspector=wc;var Pc=function(Na){var Wa=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),Vb=Wa.hasOwnProperty("ProtoInspector")&&"function"===typeof Wa.ProtoInspector?Wa.ProtoInspector:Wa.ProtoInspector=function(Fa){Fa&&Fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(Vb,Na,void 0,[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Wa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(xc.Inspector);Pc=xc.ProtoInspector;xc.default=Pc;var sc=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");
sc.Morph=Zb;sc.touchInputDevice=lc;sc.easings=Uc;sc.pt=Bc;sc.fun=Vd;sc.connect=Od;xc=function(Na){var Wa=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),Vb=Wa.hasOwnProperty("MorphicSideBar")&&"function"===typeof Wa.MorphicSideBar?Wa.MorphicSideBar:Wa.MorphicSideBar=function(Fa){Fa&&Fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(Vb,Na,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",
value:function(Fa){Fa=void 0===Fa?!0:Fa;if(this.respondsToVisibleWindow){var Xa=$world.visibleBounds(),gc=navigator.standalone&&sc.touchInputDevice?25:0;this.height=Xa.height-gc;this.top=gc+Xa.top();gc=this.get("horizontal resizer");gc.height=this.height;gc.top=0;Fa&&(this.visible?this.topLeft=Xa.topLeft():this.topRight=Xa.topLeft())}}},{key:"switchMode",value:function(Fa){"inspector"==Fa&&this.showInspector();"connections"==Fa&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=
!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(Fa){var Xa=this,gc,ub;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qd){switch(qd.nextAddress){case 1:gc=$world.visibleBounds();ub=navigator.standalone&&sc.touchInputDevice?25:0;Xa.height=gc.height-ub;Xa.top=ub+gc.top();if(Fa)return $world.addMorph(Xa,$world.get("lively top bar")),Xa.topRight=gc.topLeft(),
Xa.attachToWorld($world),Xa.visible=!0,qd.yield(Xa.whenRendered(),5);Xa.detachFromWorld($world);return qd.yield(Xa.animate({opacity:0,topRight:gc.topLeft(),duration:300}),4);case 4:Xa.visible=!1;Xa.remove();qd.jumpTo(0);break;case 5:return Xa.onWorldResize(!1),Xa.get("scene graph").adjustProportions(),qd.yield(Xa.animate({opacity:1,easing:sc.easings.outCirc,topLeft:gc.topLeft(),duration:300}),6);case 6:Xa.get("scene graph").refresh(),qd.jumpToEnd()}})}},{key:"attachToWorld",value:function(Fa){sc.connect(Fa,
"onChange",this,"onHierarchyChange",{garbageCollect:!0});sc.connect(Fa,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});sc.connect(Fa,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(Fa){var Xa=this;Fa.attributeConnections.forEach(function(gc){gc.targetObj===Xa&&gc.disconnect()})}},{key:"selectNode",value:function(Fa){this.getSubmorphNamed("scene graph").selectMorphInTarget(Fa);this.getSubmorphNamed("connections tree").inspectConnectionsOf(Fa)}},
{key:"onHierarchyChange",value:function(Fa){var Xa=this,gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if("addMorphAt"===Fa.selector||"removeMorph"===Fa.selector||"name"===Fa.prop){gc=Xa._sceneGraph||(Xa._sceneGraph=Xa.getSubmorphNamed("scene graph"));if(!gc||!gc.owner.visible||Fa.target&&Fa.target.isHand||Fa.target&&gc.ignoreMorph(Fa.target)||Fa.args&&!Fa.args[0].isHalo&&gc.ignoreMorph(Fa.args[0])||Fa.target.ownerChain().find(function(qd){return gc.ignoreMorph(qd)}))return ub.return();
sc.fun.debounceNamed("scene-graph-update",50,function(){return gc.refresh()})()}ub.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],Wa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-76"}}},
{start:226,end:3668})}(sc.Morph);xc=sc.MorphicSideBar;sc.default=xc;var Za=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");Za.interactivelyShowConnection=Vc;Za.printConnection=hb;Za.printConnectionElements=zc;Za.interactiveConnectGivenSource=Ub;Za.interactiveConnectGivenSourceAndTarget=Jc;Za.interactivelyReEvaluateConnection=Wc;Za.visualizeConnection=Ad;Za.interactivelyEvaluateConnection=Xd;Za.connect=Od;Za.once=je;Za.Color=Bd;Za.rect=jd;Za.pt=Bc;Za.arr=zd;Za.morph=ge;Za.Leash=We;Za.showConnector=
Db;Za.show=Tc;Za.InteractiveMorphSelector=Nc;Za.classToFunctionTransform=kf;Za.interactivelyShowConnection=Vc;Za.interactivelyShowConnection=Vc;Za.printConnection=hb;Za.printConnection=hb;Za.printConnectionElements=zc;Za.printConnectionElements=zc;Za.interactiveConnectGivenSource=Ub;Za.interactiveConnectGivenSource=Ub;Za.interactiveConnectGivenSourceAndTarget=Jc;Za.interactiveConnectGivenSourceAndTarget=Jc;Za.interactivelyReEvaluateConnection=Wc;Za.interactivelyReEvaluateConnection=Wc;Za.visualizeConnection=
Ad;Za.visualizeConnection=Ad;Za.interactivelyEvaluateConnection=Xd;Za.interactivelyEvaluateConnection=Xd;var Pa=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");Pa.Tree=bf;Pa.TreeData=Hd;Pa.morph=ge;Pa.Icon=Ae;Pa.HorizontalLayout=uc;Pa.easings=Uc;Pa.Morph=Zb;Pa.Color=Bd;Pa.Rectangle=wd;Pa.rect=jd;Pa.pt=Bc;Pa.connect=Od;Pa.noUpdate=ce;Pa.disconnect=Gd;Pa.disconnectAll=pe;Pa.once=je;Pa.arr=zd;Pa.obj=Te;Pa.num=rc;Pa.fun=Vd;Pa.tree=bd;Pa.promise=he;Pa.ConnectionHalo=_missingExportShim;Pa.getClassName=
cd;Pa.TextLayout=ie;xc=function(Na){var Wa=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Vb=Wa.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof Wa.InteractiveTreeContainer?Wa.InteractiveTreeContainer:Wa.InteractiveTreeContainer=function(Fa){Fa&&Fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(Vb,Na,[{key:"onChildRemoved",value:function(Fa){}},{key:"onChildAdded",value:function(Fa){}},{key:"toggleSelected",
value:function(Fa){if(this.tree){var Xa=this.tree,gc=Xa.selectionFontColor,ub=Xa.nonSelectionFontColor;this.submorphs.filter(function(qd){return!qd._isControlElement&&qd.styleClasses.includes("Label")}).forEach(function(qd){qd.fontColor=Fa?gc:ub})}}},{key:"onGrab",value:function(Fa){var Xa=this.tree,gc=this.node;this.fill=Pa.Color.gray.withA(.5);this.fontColor=Xa.selectionFontColor;this.opacity=.8;db._get(Object.getPrototypeOf(Vb.prototype),"onGrab",this).call(this,Fa);gc&&(this.toggleSelected(!1),
Xa.collapse(gc),Xa.treeData.parentNode(gc).container.onChildRemoved(this),this._data=Xa.treeData.remove(gc),gc.container.target.remove(),Xa.update(!0))}},{key:"wantsToBeDroppedOn",value:function(Fa){this.showPreviewOn(Fa);return!0}},{key:"showPreviewOn",value:function(Fa){if(Fa.isContainer)var Xa=Fa.tree;Fa.isTree&&(Xa=Fa);Xa&&Xa.showDropPreviewFor&&Xa.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(Fa){var Xa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gc){if(1==
gc.nextAddress)return Xa.tree.treeData.add(Fa._data,Xa.node,Xa.node.children[0]),Xa.tree.uncollapse(Xa.node),Xa.tree.treeData.remove(Xa.tree._previewNode),gc.yield(Xa.tree.whenRendered(),2);Xa.tree.update(!0);Xa.onChildAdded(Fa);gc.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(Fa,Xa){var gc=this;this.tree._dropInProgress=!0;db._get(Object.getPrototypeOf(Vb.prototype),"onBeingDroppedOn",this).call(this,Fa,Xa);Fa=function(){gc.fill=Pa.Color.gray.withA(.5);gc.opacity=1;gc.tree._dropInProgress=
!1;gc.tree.refresh()};Xa.isTree?Xa.insertAtPlaceholder(this).then(Fa):Xa.isContainer?Xa.insertAsChild(this).then(Fa):Fa()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:Pa.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var Fa=this,Xa=this.tree.treeData;return Xa&&Xa.asList().find(function(gc){return gc.container===Fa})}}}}}],Wa,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},{start:559,end:3022})}(Pa.Morph);Pa.InteractiveTreeContainer=xc;Pa.InteractiveTreeContainer=xc;Pa.InteractiveTreeContainer=xc;xc=function(Na){var Wa=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Vb=Wa.hasOwnProperty("InteractiveTreeData")&&"function"===typeof Wa.InteractiveTreeData?
Wa.InteractiveTreeData:Wa.InteractiveTreeData=function(Fa){Fa&&Fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(Vb,Na,[{key:"display",value:function(Fa){Fa.container||(Fa.container=Fa.getContainer());return[Fa.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(Fa){return Fa.isCollapsed}},{key:"collapse",value:function(Fa,Xa){Fa.isCollapsed=Xa}},{key:"getChildren",value:function(Fa){return Fa.isLeaf?null:this.filterActive?
Fa.children.filter(function(Xa){return Xa&&Xa.visible}):Fa.children}},{key:"isLeaf",value:function(Fa){return 0==(this.getChildren(Fa)||[]).length}},{key:"add",value:function(Fa,Xa,gc){Xa=void 0===Xa?this.root:Xa;Xa.children||(Xa.children=[]);gc?Pa.arr.pushAt(Xa.children,Fa,Xa.children.indexOf(gc)):Xa.children.push(Fa);Xa.isLeaf=!1}},{key:"replace",value:function(Fa,Xa){var gc=this.parentNode(Fa);Fa=gc.children.indexOf(Fa);gc.children[Fa]=Xa}},{key:"next",value:function(Fa){var Xa=this.parentNode(Fa);
return Xa&&Xa.children[Xa.children.indexOf(Fa)+1]}},{key:"isBefore",value:function(Fa,Xa){this.next(Fa)===Xa}},{key:"isAfter",value:function(Fa,Xa){this.next(Xa)===Fa}},{key:"addBefore",value:function(Fa,Xa){this.add(Fa,this.parentNode(Xa),Xa)}},{key:"addAfter",value:function(Fa,Xa){var gc=this.parentNode(Xa);Xa=gc.children.indexOf(Xa)+1;this.add(Fa,gc,gc.children[Xa])}},{key:"remove",value:function(Fa){var Xa=this.parentNode(Fa);if(Xa)return Pa.arr.remove(Xa.children,Fa),Xa.children==[]&&(Xa.children=
null),Fa}},{key:"filter",value:function(Fa,Xa){Xa=void 0===Xa?1:Xa;var gc=this,ub;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qd){if(1==qd.nextAddress)return qd.yield(gc.uncollapseAll(function(fc,Ud){return Ud<Xa+1}),2);ub=gc.filterActive;gc.filterActive=!1;gc.asListWithIndexAndDepth(!1).reverse().forEach(function(fc){var Ud=fc.node;if(0==fc.depth)return Ud.visible=!0;Ud.visible=Fa(Ud);!Ud.isCollapsed&&Ud.children.find(function(td){return td.visible})?(Ud.visible=!0,Ud.container.opacity=
.5):Ud.container.opacity=1;return Ud.visible});gc.filterActive=ub;qd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],Wa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},{start:3031,end:5513})}(Pa.TreeData);Pa.InteractiveTreeData=xc;Pa.InteractiveTreeData=
xc;Pa.InteractiveTreeData=xc;xc=function(Na){var Wa=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Vb=Wa.hasOwnProperty("InteractiveTree")&&"function"===typeof Wa.InteractiveTree?Wa.InteractiveTree:Wa.InteractiveTree=function(Fa){Fa&&Fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(Vb,Na,[{key:"update",value:function(Fa){var Xa=this;db._get(Object.getPrototypeOf(Vb.prototype),"update",this).call(this,Fa);this.treeData&&
this.relayoutContainers();Fa&&this.embeddedMorphs.forEach(function(gc){gc.isContainer&&(Pa.obj.equals(gc.fill,Pa.Color.transparent)||(gc.fill=Pa.Color.transparent),gc.fontFamily!=Xa.fontFamily&&(gc.fontFamily=Xa.fontFamily),gc.fontSize!=Xa.fontSize&&(gc.fontSize=Xa.fontSize))})}},{key:"onDrop",value:function(Fa){db._get(Object.getPrototypeOf(Vb.prototype),"onDrop",this).call(this,Fa);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(Fa){}},{key:"onDropHoverUpdate",
value:function(Fa){}},{key:"onDropHoverOut",value:function(Fa){}},{key:"onHoverOut",value:function(Fa){var Xa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gc){db._get(Object.getPrototypeOf(Vb.prototype),"onHoverOut",Xa).call(Xa,Fa);Xa._previewNode&&Xa._previewNode.container.world()&&Xa.treeData.remove(Xa._previewNode);Xa.resetContainerSelection();Xa.update(!0);gc.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(Fa){var Xa=this,gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if(1==
ub.nextAddress)return gc=Xa.treeData.parentNode(Xa._previewNode),Xa.treeData.replace(Xa._previewNode,Fa._data),Xa.treeData.remove(Xa._previewNode),ub.yield(Xa.whenRendered(),2);Xa.update(!0);gc.container.onChildAdded(Fa);ub.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var Fa=this;if(!this._scrollingUp){this._scrollingUp=!0;var Xa=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(gc){if(1==gc.nextAddress)return Fa._scrollingUp&&0<Fa.scroll.y?gc.yield(Fa.animate({scroll:Fa.scroll.subXY(0,
30),duration:300,easing:Pa.easings.linear}),3):(Fa._scrollingUp=!1,gc.jumpTo(0));Xa();gc.jumpToEnd()})};Xa()}}},{key:"scrollDownSlowly",value:function(){var Fa=this;if(!this._scrollingDown){this._scrollingDown=!0;var Xa=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(gc){if(1==gc.nextAddress)return Fa._scrollingDown&&Fa.scroll.y<Fa.scrollExtent.y-Fa.height?gc.yield(Fa.animate({scroll:Fa.scroll.addXY(0,30),duration:300,easing:Pa.easings.linear}),3):(Fa._scrollingDown=!1,gc.jumpTo(0));
Xa();gc.jumpToEnd()})};Xa()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(Fa){Fa.isContainer&&(Fa.fill=Pa.Color.transparent)})}},{key:"showDropPreviewFor",value:function(Fa){var Xa=this;Fa=this.localize(Fa.globalBounds().center());var gc=this.textPositionFromPoint(Fa),ub=this.treeData.asListWithIndexAndDepth(function(Xb){Xb=Xb.node;return Xb!=Xa._previewNode&&Xb.container.world()}),
qd=(ub.find(function(Xb){return Xb.i-1===gc.row})||{}).node,fc=qd&&qd.container,Ud=this.ensurePlaceholder(),td=!!Ud.container.world(),fd=Fa.subPt(this.scroll).subPt(this.scrollbarOffset);10>fd.y?this.scrollUpSlowly():fd.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!fc){if(ub.length>gc.row||Pa.arr.last(this.treeData.root.children)===Ud)return;this.treeData.remove(Ud);this.treeData.add(Ud);this.update(!0)}if(fc){ub=this.textLayout.boundsFor(this,
gc);if(4>Math.abs(ub.top()-Fa.y)){if(this.treeData.isBefore(Ud,qd))return;this.treeData.remove(Ud);this.treeData.addBefore(Ud,qd)}else if(4>Math.abs(ub.bottom()-Fa.y)&&(qd.isCollapsed||this.treeData.isLeaf(qd))){if(this.treeData.isAfter(Ud,qd))return;this.treeData.remove(Ud);this.treeData.addAfter(Ud,qd)}else{fc.fill=Pa.Color.gray;if(!td)return;this.treeData.remove(Ud)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var Fa=Pa.pt(this.width-100,this.document.getLine(0).height);this._previewNode||
(this._previewNode={container:Pa.morph({acceptsDrops:!1,reactsToPointer:!1,fill:Pa.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=Fa;return this._previewNode}},{key:"relayoutContainers",value:function(){for(var Fa=this.selectedIndex,Xa=$jscomp.makeIterator(this.treeData.asListWithIndexAndDepth()),gc=Xa.next();!gc.done;gc=Xa.next()){var ub=gc.value;gc=ub.node;ub=ub.i;if(gc.container&&this.isLineVisible(ub)){gc.container.nativeCursor="grab";var qd=this.width-
25-gc.container.left;gc.container.width!=qd&&(gc.container.width=qd);gc.container.toggleSelected&&gc.container.toggleSelected(ub==Fa);gc.container.isContainer&&gc.container.getLabel().fitIfNeeded()}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTree"}}],Wa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1107"}}},{start:5522,end:11097})}(Pa.Tree);Pa.InteractiveTree=xc;Pa.InteractiveTree=xc;Pa.InteractiveTree=xc;(function(Na){var Wa=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Vb=Wa.hasOwnProperty("SceneGraphTreeLayout")&&"function"===typeof Wa.SceneGraphTreeLayout?Wa.SceneGraphTreeLayout:Wa.SceneGraphTreeLayout=function(Fa){Fa&&Fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(Vb,Na,[{key:"estimateExtentOfLine",
value:function(Fa,Xa,gc){gc=void 0===gc?Fa.getGlobalTransform():gc;(gc=Xa.textAndAttributes.find(function(ub){return ub.isMorph}))&&Xa.changeExtent(Fa.width,gc.height)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTreeLayout"}}],Wa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},
{start:11099,end:11371})})(Pa.TextLayout);xc=function(Na){var Wa=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Vb=Wa.hasOwnProperty("SceneGraphTree")&&"function"===typeof Wa.SceneGraphTree?Wa.SceneGraphTree:Wa.SceneGraphTree=function(Fa){Fa&&Fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(Vb,Na,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(Fa){var Xa=
this.treeData.asList().find(function(gc){return gc.container&&gc.container.target===Fa});Xa&&this.selectedNode!=Xa&&this.selectPath(this.treeData.pathOf(Xa))}},{key:"onLoad",value:function(){var Fa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xa){if(1==Xa.nextAddress)return Fa.textLayout=new Pa.SceneGraphTreeLayout(Fa),Xa.yield(Fa.whenRendered(),2);if(3!=Xa.nextAddress){if(Fa.ownerChain().find(function(gc){return gc.isComponent}))return Xa.return();Fa.submorphs=[];return Xa.yield(Fa.whenRendered(),
3)}Fa.get("inspector").makeEditorVisible(!0);Fa.get("inspector").makeEditorVisible(!1);Fa.setTarget($world);Xa.jumpToEnd()})}},{key:"adjustProportions",value:function(Fa){Fa=(Fa?Fa.state.dragDelta:{y:0}).y;var Xa=this.get("inspector"),gc=this.get("scene graph resizer"),ub=this.get("mode selector"),qd=this.get("connections tree");this.height+=Fa;Xa.height-=Fa;qd.height-=Fa;gc.top=this.bottom;gc.left=0;ub.top=gc.bottom;qd.top=Xa.top=ub.bottom+5}},{key:"reset",value:function(){var Fa=this;this.treeData=
new Pa.InteractiveTreeData({children:[],container:Pa.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(Xa){return null==Xa.id}).forEach(function(Xa){return Fa.removeAnchor(Xa)})}},{key:"setTarget",value:function(Fa){this.target=Fa;this.treeData=this.getTreeFromSubmorphHierarchy(Fa);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(Fa){var Xa=this;if(Fa===this._previewNode)return!1;if(Fa.container.nameNeedsUpdate)return!0;
var gc=Fa.container.target.submorphs.filter(function(ub){return!Xa.ignoreMorph(ub)});return gc.length!=Fa.children.length||gc.map(function(ub){return ub.name}).join("")!=Fa.children.map(function(ub){return ub.target?ub.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(Fa){var Xa=this,gc=Fa.container.target.submorphs.map(function(td){return td.__scene_graph_target__?td.__scene_graph_target__():td}).filter(function(td){return!Xa.ignoreMorph(td)}),ub=[],qd={},fc;for(fc in gc){qd.$jscomp$loop$prop$m$3007=
gc[fc];var Ud=Pa.arr.without(Fa.children,this._previewNode).find(function(td){return function(fd){return fd.container.target.id==td.$jscomp$loop$prop$m$3007.id}}(qd));ub[fc]=Ud?Ud:this.readMorphHierarchy(qd.$jscomp$loop$prop$m$3007);qd={$jscomp$loop$prop$m$3007:qd.$jscomp$loop$prop$m$3007}}return ub}},{key:"refresh",value:function(){var Fa=this;if(!this._updating&&!this._dropInProgress){var Xa=!1;Pa.tree.prewalk(this.treeData.root,function(gc){gc.container&&Fa.isNodeOutOfSync(gc)&&(console.log("change node",
gc),Xa=!0,gc.name=gc.container.target.name,gc.container.refresh(),gc.children=Fa.getNewChildren(gc))},function(gc){return gc.children});this.update(Xa)}}},{key:"ignoreMorph",value:function(Fa){return Fa.isMorph?Fa.isContainer||Fa.isWindow||Fa.getWindow()||Fa.isEpiMorph||Fa.isHand||["lively.halos"].includes(Fa.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler","UserFlap","Menu","CommentIndicator"].includes(Fa.constructor.name):!1}},{key:"onDropHoverOut",
value:function(Fa){var Xa=Fa.hand.grabbedMorphs[0];Fa=Fa.hand.findDropTarget();if(!(Fa===this||Fa&&Fa.ownerChain().includes(this))&&Xa&&Xa.isContainer)Xa.onDragOutside()}},{key:"onDropHoverIn",value:function(Fa){var Xa=Fa.hand.grabbedMorphs[0];Xa&&!Xa.isContainer&&($world.halos().forEach(function(gc){return gc.remove()}),Xa.remove(),Object.assign(Xa,Fa.hand._grabbedMorphProperties.get(Xa).pointerAndShadow),Xa=this.renderContainerFor(Xa,!1),Fa.hand.grab(Xa),Xa.leftCenter=Pa.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",
value:function(Fa){return new Pa.InteractiveTreeData(this.readMorphHierarchy(Fa))}},{key:"readMorphHierarchy",value:function(Fa){var Xa=this;return Pa.tree.mapTree(Fa,function(gc,ub){return{name:gc.name,isCollapsed:!0,getContainer:function(){return Xa.renderContainerFor(gc)},visible:!0,children:ub}},function(gc){return gc.submorphs.filter(function(ub){return gc.isWorld?!Xa.ignoreMorph(ub):!0})})}},{key:"renderContainerFor",value:function(Fa,Xa){Fa=void 0===Fa?Pa.morph({name:"root"}):Fa;Xa=void 0===
Xa?!0:Xa;var gc=new Pa.MorphContainer({tree:this,fill:Xa?Pa.Color.transparent:Pa.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:Fa,opacity:Fa.visible?1:.5});Xa||(gc.layout=new Pa.HorizontalLayout({spacing:2,align:"center"}));Fa._data?(gc._data=Fa._data,Fa._data.container=gc):gc._data={name:Fa.name,isCollapsed:!0,container:gc,children:[]};gc.whenRendered().then(function(){return gc.refresh()});return gc}},{key:"collapseAll",value:function(){var Fa=this;
this.treeData.asList().forEach(function(Xa){return Xa!=Fa.treeData.root?Xa.isCollapsed=!0:Xa.isCollapsed=!1})}},{key:"filterMorphs",value:function(Fa){var Xa=this,gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if(1==ub.nextAddress)return gc=Fa.tokens[0],Xa.treeData.filterActive||Xa._collapseState||(Xa._collapseState=new WeakMap(Xa.treeData.asList().map(function(qd){return[qd,qd.isCollapsed]}))),Xa.treeData.filterActive=!!gc,ub.yield(Xa.treeData.filter(function(qd){var fc=!!gc&&
qd.name.includes(gc);qd.container||(qd.container=qd.getContainer());fc?qd.container.highlightTerm(gc):qd.container.highlightTerm();return fc},3),2);Xa.treeData.filterActive||(Xa.treeData.asList().forEach(function(qd){qd.container&&qd.container.highlightTerm();qd.visible=!0;qd.isCollapsed=Xa._collapseState.has(qd)?Xa._collapseState.get(qd):!0}),Xa._collapseState=null);Xa.refresh();ub.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",
get:function(){return{target:{serialize:!1},textLayout:{initialize:function(){this.textLayout=new Pa.SceneGraphTreeLayout(this)}}}}}],Wa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},{start:11380,end:18868})}(Pa.InteractiveTree);Pa.SceneGraphTree=xc;Pa.SceneGraphTree=xc;Pa.SceneGraphTree=
xc;xc=function(Na){var Wa=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Vb=Wa.hasOwnProperty("MorphContainer")&&"function"===typeof Wa.MorphContainer?Wa.MorphContainer:Wa.MorphContainer=function(Fa){Fa&&Fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(Vb,Na,[{key:"refresh",value:function(){var Fa=this,Xa,gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){Xa=Fa.target;if(!Xa)return ub.return();
Fa.reactsToPointer=!0;Fa.dropShadow=!1;Fa.submorphs=[Fa.getLabel(),0<Xa.comments.length&&Fa.getCommentControls(),Xa.layout&&Fa.getLayoutControls(),Fa.getConnectionControls()].filter(Boolean).map(function(qd,fc){qd.fitIfNeeded();qd.left=gc?gc.right+5:0;qd.top=2;return gc=qd});Fa.height=20;Fa.opacity=Xa.visible?1:.5;ub.jumpToEnd()})}},{key:"applyLayoutIfNeeded",value:function(){}},{key:"getLabel",value:function(){var Fa=this.getSubmorphNamed("name label")||Pa.morph({type:"label",name:"name label",reactsToPointer:!1,
padding:Pa.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),Xa=Fa.textString.slice(2,-1);Xa&&Xa==this.target.name||(Fa.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return Fa}},{key:"getIcon",value:function(Fa){return Pa.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[Pa.getClassName(Fa)]||"codepen",{paddingTop:"4px",
fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var Fa=this.getSubmorphNamed("layout label")||Pa.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:Pa.Rectangle.inset(4,2,4,2),fill:Pa.Color.orange,fontColor:Pa.Color.white});Fa._isControlElement=!0;Fa.textString!=this.target.layout.name()&&(Fa.value=this.target.layout.name());return Fa}},{key:"getCommentControls",value:function(){var Fa=this.getSubmorphNamed("comment label")||Pa.morph({type:"label",
name:"comment label",tooltip:"Open comment browser to browse all comments",borderRadius:3,acceptsDrops:!1,padding:Pa.Rectangle.inset(4,2,4,2),fill:Pa.Color.rgb(241,196,15),fontColor:Pa.Color.black});Fa._isControlElement=!0;var Xa=this.target.comments.length+" comment"+(1==this.target.comments.length?"":"s");Fa.textString!=Xa&&(Fa.value=Xa);return Fa}},{key:"getConnectionControls",value:function(){this.connectionCount=this.target.attributeConnections?this.target.attributeConnections.filter(function(gc){return!gc.targetObj.isHalo}).length:
0;var Fa=this.getSubmorphNamed("connections label")||Pa.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:Pa.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:Pa.Color.red,fontColor:Pa.Color.white});Fa._isControlElement=!0;Fa.visible=!this.connectionHalo&&!!this.connectionCount;var Xa=this.connectionCount?this.connectionCount+" connection"+(1<this.connectionCount?"s":""):"Manage Connections";Fa.textString!=Xa&&(Fa.value=Xa);return Fa}},{key:"highlightTerm",value:function(Fa){var Xa=
this.submorphs[0],gc=Xa.textAndAttributes.slice(0,2),ub=Xa.textString.slice(1).split(Fa);1===ub.length?Xa.textAndAttributes=[].concat($jscomp.arrayFromIterable(gc),[ub[0]]):(Xa.textAndAttributes=[].concat($jscomp.arrayFromIterable(gc),$jscomp.arrayFromIterable(Pa.arr.flatten(Pa.arr.interpose(ub.map(function(qd){return[qd,{}]}),[Fa,{fontWeight:"900"}])))),Xa.whenRendered().then(function(){Xa.fitIfNeeded()}))}},{key:"getClassControls",value:function(){}},{key:"wantsToBeDroppedOn",value:function(Fa){var Xa=
db._get(Object.getPrototypeOf(Vb.prototype),"wantsToBeDroppedOn",this).call(this,Fa);if(![Fa].concat($jscomp.arrayFromIterable(Fa.ownerChain())).includes(this.tree))this.onDragOutside();return Xa}},{key:"onGrab",value:function(Fa){var Xa=this,gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if(1==ub.nextAddress)return Xa.tree._dropInProgress=!0,gc=Xa.target.globalPosition,db._get(Object.getPrototypeOf(Vb.prototype),"onGrab",Xa).call(Xa,Fa),Xa._data.globalTargetPosition=gc,ub.yield(Xa.whenRendered(),
2);if(Xa.tree.fullContainsWorldPoint(Xa.globalPosition))Xa.leftCenter=Pa.pt(-20,0);else Xa.onDragOutside();Xa.tree._dropInProgress=!1;ub.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=Pa.fun.createQueue("container-hover-queue",function(Fa,Xa){var gc,ub,qd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fc){if(1==fc.nextAddress)return gc=Fa.target,ub=gc.opacity,qd=gc.scale,Fa.target.opacity=0,Fa.target.scale=
.5,$world.halos().forEach(function(Ud){return Ud.remove()}),$world.firstHand.grab(Fa.target),Fa.target._data=Fa._data,Fa.remove(),Fa.target.position=Pa.pt(0,0),fc.yield(Fa.target.animate({opacity:ub,scale:qd,duration:200}),2);Xa();fc.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(Fa){var Xa=this.node.children.indexOf(Fa.node||Fa._data)+1;Xa=this.node.children[Xa];Fa.target.remove();Xa?(Xa=this.target.submorphs.indexOf(Xa.container.target),this.target.addMorphAt(Fa.target,
Xa)):this.target.addMorph(Fa.target);Fa._data.globalTargetPosition&&(Fa.target.position=this.target.localize(Fa._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(Fa){}},{key:"toggleConnectionControl",value:function(Fa){this.getSubmorphNamed("connections label").visible=Fa}},{key:"toggleSelected",value:function(Fa){var Xa=this,gc,ub,qd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fc){if(1==fc.nextAddress){if(Xa._active===Fa)return fc.return();Xa._active=Fa;db._get(Object.getPrototypeOf(Vb.prototype),
"toggleSelected",Xa).call(Xa,Fa);return Fa&&Xa.target&&Xa.target.isMorph&&Xa.world()?fc.yield(Xa.target.whenRendered(),3):fc.jumpTo(0)}Xa.get("inspector").targetObject=Xa.target;Xa.get("connections tree").inspectConnectionsOf(Xa.target);if(Xa.connectionHalo)return fc.return();gc=$jscomp.makeIterator(Xa.world().halos());for(ub=gc.next();!ub.done;ub=gc.next()){qd=ub.value;if(qd.target===Xa.target)return fc.return();qd.remove()}Pa.noUpdate({sourceObj:Xa.world(),targetObj:Xa.sideBar,sourceAttribute:"showHaloFor",
targetAttribute:"selectNode"},function(){return Xa.world().showHaloFor(Xa.target)});fc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(Fa){this.submorphs[0].fontFamily=Fa}},fontColor:{after:["submorphs"],derived:!0,set:function(Fa){this.submorphs[0].fontColor=Fa}},fontSize:{derived:!0,set:function(Fa){this.submorphs[0].fontSize=Fa}},target:{serialize:!1},
dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],Wa,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},{start:18877,end:27423})}(Pa.InteractiveTreeContainer);Pa.MorphContainer=xc;Pa.MorphContainer=xc;Pa.MorphContainer=xc;var ua=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");ua.visualizeConnection=function(Na,Wa,Vb,Fa,Xa){Fa=void 0===Fa?{}:Fa;Xa=ua.rect(0).sides.concat(ua.rect(0).corners);
Vb=Vb||new ua.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:ua.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:ua.Color.transparent,nativeCursor:"auto"},end:{fill:ua.Color.orange}}},Fa,{hasFixedPosition:!0}));Vb.startPoint.attachTo(Na,"rightCenter");Wa.isMorph?(Fa=Wa.globalBounds().partNameNearest(Xa,Na.globalPosition),Na.globalPosition.equals(Wa.globalBounds().partNamed(Fa))&&Wa.globalBounds().partNameNearest(ua.arr.without(Xa,Fa),Na.globalPosition),Vb.endPoint.attachTo(Wa,
"leftCenter")):(Xa=Na.globalBounds().topRight().addPt(ua.pt(100,0)),Wa=ua.morph({type:"label",value:Wa.toString(),styleClasses:["Tooltip"],padding:ua.rect(8,4)}).openInWorld(Xa),Wa.position=Na.world().bounds().translateForInclusion(Wa.bounds()).topLeft(),ua.once(Vb,"remove",Wa,"remove"),Vb.endPoint.attachTo(Wa,"leftCenter"));return Vb};ua.startConnecting=function(Na,Wa){Na.animate({opacity:.8,duration:300});Na.startPoint.attachTo(Wa,"center");Na.vertices[0].position=ua.pt(2,2)};ua.stopConnecting=
function(Na,Wa,Vb,Fa){function Xa(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(fc){if(1==fc.nextAddress)return fc.yield(Na.animate({opacity:0,duration:300}),2);Na.startPoint.clearConnection();Na.endPoint.clearConnection();Na.remove();fc.jumpToEnd()})}Fa=void 0===Fa?!1:Fa;var gc,ub,qd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fc){return 1==fc.nextAddress?(gc=Na,ub=gc.endPoint,(qd=ub.connectedMorph)&&"MorphContainer"==ua.getClassName(qd)&&(qd=qd.target),qd?fc.yield(ua.interactiveConnectGivenSourceAndTarget(Vb,
Fa,qd),2):fc.jumpTo(2)):fc.yield(Xa(),0)})};ua.editConnection=function(Na){var Wa=Na.connection,Vb=Na.connectionPoint,Fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xa){if(1==Xa.nextAddress)return Fa=ua.visualizeConnection(Vb,Wa.targetObj,!1,{borderColor:ua.Color.gray.darker(),endpointStyle:{start:{fill:ua.Color.transparent,nativeCursor:"auto"},end:{fill:ua.Color.gray.darker()}}}),Xa.yield(ua.interactivelyReEvaluateConnection(Wa,"Edit Connection",!1),2);Fa.remove();Xa.jumpToEnd()})};
ua.Tree=bf;ua.TreeData=Hd;ua.Icon=Ae;ua.morph=ge;ua.pt=Bc;ua.Rectangle=wd;ua.rect=jd;ua.Color=Bd;ua.arr=zd;ua.connect=Od;ua.signal=ac;ua.Leash=We;ua.once=je;ua.interactivelyReEvaluateConnection=Wc;ua.interactiveConnectGivenSource=Ub;ua.interactiveConnectGivenSourceAndTarget=Jc;ua.getClassName=cd;(function(Na){var Wa=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Vb=Wa.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof Wa.ConnectionsTreeData?Wa.ConnectionsTreeData:Wa.ConnectionsTreeData=
function(Fa){Fa&&Fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(Vb,Na,[{key:"parseMorphConnections",value:function(Fa){for(var Xa={},gc=$jscomp.makeIterator(void 0===Fa.attributeConnections?[]:Fa.attributeConnections),ub=gc.next();!ub.done;ub=gc.next())ub=ub.value,ub.targetObj.isHalo||(Xa[ub.sourceAttrName]=Xa[ub.sourceAttrName]||[{name:["      New Connection  ",{fontColor:ua.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Fa,
ub.sourceAttrName),{}]}],ua.arr.pushAt(Xa[ub.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(ub)))},0));return{children:Object.entries(Xa).map(function(qd){var fc=$jscomp.makeIterator(qd);qd=fc.next().value;fc=fc.next().value;return{name:[qd,{fontWeight:"bold"}," ",{},ua.morph({fill:ua.Color.white,opacity:.7,value:""+(fc.length-1),borderRadius:15,fontWeight:"bold",padding:ua.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:fc}}).concat([{name:["New Connection  ",
{fontColor:ua.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Fa),{}]}])}}},{key:"renderExistingConnection",value:function(Fa){var Xa=this,gc=ua.morph({type:"label",fontColor:ua.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(ua.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},Fa.targetMethodName,{}])}),ub=this.renderDeadPin(),qd=ub.submorphs[0];ua.connect(gc,"onHoverIn",function(){gc.fontColor=ua.Color.orange;gc._leash=ua.visualizeConnection(qd,
Fa.targetObj,gc._leash);qd.fill=ua.Color.orange;qd.border={color:ua.Color.orange,width:3}});ua.connect(gc,"onMouseDown",function(fc){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ud){if(1==Ud.nextAddress)return fc.stop(),Ud.yield(ua.interactivelyReEvaluateConnection(Fa),2);ua.signal(Xa,"refresh");Ud.jumpToEnd()})});ua.connect(gc,"onHoverOut",function(){gc.fontColor=ua.Color.gray;qd.fill=ua.Color.gray;qd.border={color:ua.Color.white,width:1};gc._leash.remove();gc._leash=void 0});return[gc,
{},"  ",{}].concat($jscomp.arrayFromIterable(ua.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){Fa.disconnect();ua.signal(Xa,"refresh")}})),["  ",{},ub,{}])}},{key:"renderDeadPin",value:function(){var Fa=ua.morph({type:"ellipse",fill:ua.Color.gray,extent:ua.pt(10,10),center:ua.pt(8,12),borderWidth:1});return ua.morph({extent:ua.pt(20,20),fill:ua.Color.transparent,reactsToPointer:!1,submorphs:[Fa]})}},{key:"renderPin",value:function(Fa,Xa){var gc=this,ub=ua.morph({type:"ellipse",
fill:ua.Color.gray.withA(.5),extent:ua.pt(10,10),center:ua.pt(8,12),draggable:!1,borderWidth:1}),qd=new ua.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:ua.Color.gray.darker(),endpointStyle:{fill:ua.Color.gray.darker()},position:ua.pt(1,1),vertices:[ua.pt(0,0),ua.pt(0,0)],getLabelFor:function(fc){return"MorphContainer"==ua.getClassName(fc)?fc.target.name:fc.name},canConnectTo:function(fc){return"MorphContainer"==ua.getClassName(fc)||2>ua.arr.intersect([fc].concat($jscomp.arrayFromIterable(fc.ownerChain())),
[ub].concat($jscomp.arrayFromIterable(ub.ownerChain()))).length}});ub.addMorph(qd);ua.connect(qd.endPoint,"onDragStart",function(){ua.startConnecting(qd,ub)});ua.connect(qd.endPoint,"onDragEnd",function(fc){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ud){if(1==Ud.nextAddress)return ub.center=ua.pt(8,12),Ud.yield(ua.stopConnecting(qd,ub,Fa,Xa),2);ua.signal(gc,"refresh");Ud.jumpToEnd()})});return ua.morph({extent:ua.pt(20,20),fill:ua.Color.transparent,reactsToPointer:!1,submorphs:[ub]})}},
{key:"display",value:function(Fa){return Fa.name}},{key:"collapse",value:function(Fa,Xa){Fa.isCollapsed=Xa}},{key:"isCollapsed",value:function(Fa){return Fa.isCollapsed}},{key:"isLeaf",value:function(Fa){return!Fa.children}},{key:"getChildren",value:function(Fa){return Fa.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(Fa){var Xa=new this;Xa.root=Xa.parseMorphConnections(Fa);return Xa}}],Wa,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3534,end:8251})})(ua.TreeData);xc=function(Na){var Wa=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Vb=Wa.hasOwnProperty("ConnectionsTree")&&"function"===typeof Wa.ConnectionsTree?Wa.ConnectionsTree:Wa.ConnectionsTree=function(Fa){Fa&&Fa[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(Vb,Na,[{key:"inspectConnectionsOf",value:function(Fa){if(this.targetMorph=Fa)this.treeData=ua.ConnectionsTreeData.for(Fa),ua.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=ua.ConnectionsTreeData.for(this.targetMorph),ua.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},
{key:"properties",get:function(){return{}}}],Wa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8268,end:8821})}(ua.Tree);xc=ua.ConnectionsTree;ua.default=xc}}});