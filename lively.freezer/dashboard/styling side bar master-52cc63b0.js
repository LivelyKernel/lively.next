System.register("./__root_module__-896eff71.js kld-intersections ./index-344072cc.js ./color-picker-d23d43ea.js ./index-28129ea8.js ./index-21494e72.js ./index-ff7980a6.js".split(" "),function(){var $a,Vb,jc,Wc,wc,Ud,Kd,he,xd,gd,Ld,Pd,af,bf,Ve,Ad,xe,qc,td,be,Bd,pe,Se,nc,$c,ge,ad,ie,Yb,zb,Rc,Mc,tc,Tc;return{setters:[function(fb){$a=fb.f;Vb=fb.c;jc=fb._;Wc=fb.ay;wc=fb.b;Ud=fb.O;Kd=fb.h;he=fb.ah;xd=fb.ad;gd=fb.m;Ld=fb.M;Pd=fb.I;af=fb.p;bf=fb.R;Ve=fb.C;Ad=fb.d;xe=fb.a1;qc=fb.o;td=fb.bD;be=fb.bF;
Bd=fb.a7;pe=fb.i;Se=fb.t;nc=fb.e;$c=fb.bB;ge=fb.g;ad=fb.bP;ie=fb.r;Yb=fb.P;zb=fb.bQ;Rc=fb.bR},function(){},function(fb){Mc=fb.I},function(fb){tc=fb.a;Tc=fb.S},function(){},function(){},function(){}],execute:function(){var fb=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js");fb.fun=$a;fb.string=Vb;fb.obj=jc;fb.properties=Wc;fb.arr=wc;fb.Text=Ud;fb.config=Kd;fb.HorizontalLayout=he;fb.VerticalLayout=xd;fb.morph=gd;fb.Morph=Ld;fb.Icon=Pd;fb.pt=af;fb.Rectangle=bf;fb.Color=Ve;fb.connect=Ad;fb.disconnect=
xe;fb.once=qc;fb.noUpdate=td;fb.ColorPicker=tc;fb.DropDownList=be;fb.loadObjectFromPartsbinFolder=Bd;fb.cachedControls=new WeakMap;var uc=function(Oc){var pc=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js"),bb=pc.hasOwnProperty("RichTextControl")&&"function"===typeof pc.RichTextControl?pc.RichTextControl:pc.RichTextControl=function(Ma){Ma&&Ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pe(bb,Oc,[{key:"toggleButton",
value:function(Ma,oa){Ma.master=oa?{auto:this.selectedButtonMaster}:{auto:this.buttonMaster}}},{key:"onLoad",value:function(){this.reset()}},{key:"reset",value:function(){var Ma=this.ui.fontSelection;Ma.items=fb.arr.uniq([].concat($jscomp.arrayFromIterable(this.env.fontMetric.supportedFonts),$jscomp.arrayFromIterable(fb.config.text.basicFontItems)));this.target&&(Ma.selection=this.target.fontFamily||Ma.items[0].value,fb.connect(this.target,"selectionChange",this,"update",{garbageCollect:!0}))}},{key:"alignAtTarget",
value:function(Ma){Ma=void 0===Ma?!!this.world():Ma;var oa=this.target,La=oa.world()||$world,Ua=this.globalBounds();oa=(oa.selection.isEmpty()?oa.globalBounds():oa.getGlobalTransform().transformRectToRect(oa.selectionBounds().translatedBy(oa.scroll.negated()))).bottomCenter().subPt(Ua.topCenter());La=La.visibleBounds().translateForInclusion(Ua.translatedBy(oa)).topLeft().subPt(Ua.topLeft());La=this.position.addPt(La);Ma?this.animate({duration:300,position:La}):this.position=La}},{key:"removeFocus",
value:function(){var Ma=this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(oa){return oa.targetObj===Ma&&oa.disconnect()});this.autoRemove&&this.target&&(this.remove(),this.target=null)}},{key:"focusOn",value:function(Ma,oa){oa=void 0===oa?!0:oa;var La=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ua){if(1==Ua.nextAddress)return La.target&&fb.disconnect(La.target,"selectionChange",La,"update"),La.target=Ma,La.reset(),La.update(),
Ua.yield(La.whenRendered(),2);La.ui.fontSizeField.relayout();oa&&La.alignAtTarget();Ua.jumpToEnd()})}},{key:"setupConnections",value:function(){fb.connect(this.ui.paddingField,"number",this,"setPadding");fb.connect(this.ui.paddingFieldTop,"number",this,"setPaddingTop");fb.connect(this.ui.paddingFieldBottom,"number",this,"setPaddingBottom");fb.connect(this.ui.paddingFieldLeft,"number",this,"setPaddingLeft");fb.connect(this.ui.paddingFieldRight,"number",this,"setPaddingRight")}},{key:"update",value:function(){var Ma=
this,oa=this.target,La=this.updateSpec,Ua=oa.selection;Ua=!oa.readOnly&&Ua?Ua.isEmpty()?oa.textAttributeAt(Ua.start):oa.getStyleInRange(Ua):{};var Sb=this.managedProps,Ca=fb.obj.select(oa,Sb);oa=$jscomp.makeIterator(Object.entries(fb.obj.select(Ua||{},Sb)));for(Ua=oa.next();!Ua.done;Ua=oa.next())Sb=$jscomp.makeIterator(Ua.value),Ua=Sb.next().value,Sb=Sb.next().value,"undefined"!==typeof Sb&&(Ca[Ua]=Sb);fb.noUpdate(function(){for(var Va=$jscomp.makeIterator(Object.entries(Ma.ui)),dc=Va.next();!dc.done;dc=
Va.next()){var sb=$jscomp.makeIterator(dc.value);dc=sb.next().value;sb=sb.next().value;if(La[dc])La[dc](Ca,sb)}})}},{key:"relayout",value:function(){}},{key:"changeAttributeInSelectionOrMorph",value:function(Ma,oa){var La=this.target,Ua=La.selection;La.isLabel||Ua&&Ua.isEmpty()?La[Ma]="function"===typeof oa?oa(La[Ma]):oa:(La.undoManager.group(),La.changeStyleProperty(Ma,function(Sb){return"function"===typeof oa?oa(Sb):oa}),La.undoManager.group())}},{key:"changeFont",value:function(Ma){var oa=this,
La;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ua){if(1==Ua.nextAddress)return oa._last=Ma,(La="custom..."===Ma)?Ua.yield($world.prompt("Enter font family name",{requester:oa.target,historyId:"lively.morphic-rich-text-font-names",useLastInput:!0}),3):Ua.jumpTo(2);if(2!=Ua.nextAddress&&(Ma=Ua.yieldResult,!Ma))return Ua.return();oa.changeAttributeInSelectionOrMorph("fontFamily",Ma);Ua.jumpToEnd()})}},{key:"setPadding",value:function(Ma){this.target.padding=fb.Rectangle.inset(Ma)}},{key:"setPaddingTop",
value:function(Ma){var oa=this.target.padding;this.target.padding=fb.Rectangle.inset(oa.left(),Ma,oa.right(),oa.bottom())}},{key:"setPaddingLeft",value:function(Ma){var oa=this.target.padding;this.target.padding=fb.Rectangle.inset(Ma,oa.top(),oa.right(),oa.bottom())}},{key:"setPaddingRight",value:function(Ma){var oa=this.target.padding;this.target.padding=fb.Rectangle.inset(oa.left(),oa.top(),Ma,oa.bottom())}},{key:"setPaddingBottom",value:function(Ma){var oa=this.target.padding;this.target.padding=
fb.Rectangle.inset(oa.left(),oa.top(),oa.right(),Ma)}},{key:"setLineWrapping",value:function(Ma){this.target.lineWrapping=Ma}},{key:"changeFontWeight",value:function(Ma){this.changeAttributeInSelectionOrMorph("fontWeight",Ma)}},{key:"changeTextAlign",value:function(Ma){this.changeAttributeInSelectionOrMorph("textAlign",Ma)}},{key:"changeFontColor",value:function(Ma){this.changeAttributeInSelectionOrMorph("fontColor",Ma)}},{key:"changeFontSize",value:function(Ma){this.changeAttributeInSelectionOrMorph("fontSize",
Ma)}},{key:"changeFixedWidth",value:function(Ma){this.target.fixedWidth=Ma}},{key:"changeFixedHeight",value:function(Ma){this.target.fixedHeight=Ma}},{key:"changeLink",value:function(){var Ma=this,oa,La,Ua,Sb,Ca;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Va){if(1==Va.nextAddress)return oa=Ma.target,La=oa.selection,Ua=oa.getStyleInRange(La),Sb=Ua.link,Va.yield(Ma.world().prompt("Set link",{input:Sb||"https://"}),2);Ca=Va.yieldResult;oa.undoManager.group();oa.setStyleInRange({link:Ca||
void 0},La);oa.undoManager.group();Ma.autoRemove&&Ma.remove();Va.jumpToEnd()})}},{key:"toggleUnderline",value:function(){this.changeAttributeInSelectionOrMorph("textDecoration",function(Ma){return"underline"===Ma?"none":"underline"})}},{key:"toggleItalic",value:function(){this.changeAttributeInSelectionOrMorph("fontStyle",function(Ma){return"italic"===Ma?"normal":"italic"})}},{key:"toggleBold",value:function(){this.changeAttributeInSelectionOrMorph("fontWeight",function(Ma){return"bold"===Ma||"700"===
Ma?"normal":"bold"})}},{key:"copyStyle",value:function(){var Ma=this,oa=this.target,La=this.ui.applyStyleButton;oa=oa.selection.isEmpty()?oa.defaultTextStyle:oa.getStyleInRange(oa.selection);var Ua=JSON.stringify(oa,null,2);this.constructor.copiedStyle=oa;La.tooltip="paste style\n"+Ua;this.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/plain",data:Ua},{type:"application/morphic-text-style",styleString:Ua}]).then(function(){return Ma.setStatusMessage("Copied style\n"+Ua)}).catch(function(Sb){return Ma.showError(Sb)})}},
{key:"pasteStyle",value:function(){var Ma=this,oa=this.target,La=this.constructor.copiedStyle;oa.selection.isEmpty()?Object.assign(oa,La):oa.selections.forEach(function(Ua){return oa.addTextAttribute(Ma.constructor.copiedStyle,Ua)});this.update()}},{key:"clearStyle",value:function(){var Ma=this.target;Ma.selections.forEach(function(oa){return Ma.resetStyleInRange(oa)});this.update()}},{key:"configureRichTextOptions",value:function(){this.getSubmorphNamed("config panel")&&this.getSubmorphNamed("config panel").remove();
var Ma=this.defaultSpec,oa=this.uiSpec;Ma=this.addMorph({name:"config panel",layout:new fb.VerticalLayout({spacing:5}),epiMorph:!0,submorphs:[].concat($jscomp.arrayFromIterable(Object.keys(Ma).map(function(La){var Ua=oa.rows.some(function(Sb){return Sb.some(function(Ca){return Ca===La})});return{type:"labeledcheckbox",label:La,name:La,checked:Ua}})),[{layout:new fb.HorizontalLayout({spacing:3}),submorphs:[{type:"button",name:"OK button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}])});
Ma.center=this.innerBounds().center();fb.connect(Ma.getSubmorphNamed("OK button"),"fire",this,"configureAccepted");fb.connect(Ma.getSubmorphNamed("cancel button"),"fire",this,"configureCanceled")}},{key:"configureAccepted",value:function(){var Ma=this.getSubmorphNamed("config panel");Ma&&(Ma.remove(),Ma.submorphs.filter(function(oa){return"LabeledCheckBox"===oa.constructor.name}))}},{key:"configureCanceled",value:function(){var Ma=this.getSubmorphNamed("config panel");Ma&&Ma.remove()}},{key:"close",
value:function(){var Ma=this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(oa){return oa.targetObj===Ma&&oa.disconnect()});this.remove()}},{key:"alwaysTargetFocusedMorph",value:function(){this.startStepping(1500,"updateTarget")}},{key:"updateTarget",value:function(){var Ma=this.world();Ma&&(Ma=Ma.focusedMorph)&&(Ma.isLabel||Ma.isText)&&!this.isAncestorOf(Ma)&&this.target!==Ma&&this.focusOn(Ma,!1)}},{key:"onMouseUp",value:function(Ma){var oa=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(La){if(1==La.nextAddress)return La.yield(oa.whenRendered(),2);oa.update();La.jumpToEnd()})}},{key:"attachToWorld",value:function(){fb.connect($world,"onMouseDown",this,"updateTarget",{garbageCollect:!0})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RichTextControl"}},{key:"properties",get:function(){return{autoRemove:{defaultValue:!1},target:{},toggleColor:{},buttonMaster:{defaultValue:"styleguide://System/dark button"},
selectedButtonMaster:{defaultValue:"styleguide://SystemIDE/selected button"},managedProps:{readOnly:!0,get:function(){return"fontFamily fontWeight fontSize fontStyle isText fontColor textAlign link textDecoration fixedWidth fixedHeight lineWrapping padding".split(" ")}},updateSpec:{get:function(){var Ma=this;return Object.assign({fontSelection:function(oa,La){var Ua=oa.fontFamily;(oa=Ua&&La.items.find(function(Sb){return Sb.value.toLowerCase()===Ua.toLowerCase()}))?La.selection=oa.value:Ua&&(La.items=
La.items.concat({isListItem:!0,label:[Ua,{fontFamily:Ua}],value:Ua}),La.selection=fb.arr.last(La.items))},fontWeightSelection:function(oa,La){La.selection="normal"==oa.fontWeight?"Medium":oa.fontWeight?fb.string.capitalize(oa.fontWeight):"Medium"},boldButton:function(oa,La){Ma.toggleButton(La,"bold"===oa.fontWeight)},italicButton:function(oa,La){Ma.toggleButton(La,"italic"===oa.fontStyle)},underlineButton:function(oa,La){Ma.toggleButton(La,"underline"===oa.textDecoration)},linkButton:function(oa,
La){Ma.toggleButton(La,!!oa.link)},colorPicker:function(oa,La){La.colorValue=oa.fontColor},fontSizeField:function(oa,La){La.number=oa.fontSize},fixedWidthControl:function(oa,La){oa.isText?La.enable():La.disable();La.checked=oa.fixedWidth},fixedHeightControl:function(oa,La){oa.isText?La.enable():La.disable();La.checked=oa.fixedHeight},lineWrappingControl:function(oa,La){var Ua=$jscomp.makeIterator(La.submorphs);La=Ua.next().value;Ua=Ua.next().value;La.checked=!!oa.lineWrapping;oa.isText?La.enable():
La.disable();Ua.deactivated=!oa.lineWrapping;Ua.deactivated?Ua.opacity=.5:(Ua.opacity=1,Ua.selection=oa.lineWrapping)},paddingControl:function(oa,La){var Ua=oa.padding,Sb=Ua.left();oa=Ua.top();var Ca=Ua.right();Ua=Ua.bottom();var Va=!fb.arr.every([Sb,oa,Ca,Ua],function(dc){return dc==Sb});La.get("multi value indicator").visible=Va;fb.connect(La.get("multi value indicator"),"onMouseDown",La.get("padding field"),"number",{converter:"() => left",varMapping:{left:Sb}});try{La.get("padding field").number=
Sb,La.get("padding field").visible=!Va,La.get("padding field top").number=oa,La.get("padding field left").number=Sb,La.get("padding field right").number=Ca,La.get("padding field bottom").number=Ua}catch(dc){}}},["left","center","right","block"].reduce(function(oa,La){oa[La+"Align"]=function(Ua,Sb){Sb.deactivated=!Ua.isText;Ma.toggleButton(Sb,Ua.textAlign==La)};return oa},{}))}},ui:{get:function(){var Ma=this,oa={fontSelection:"font selection",fontWeightSelection:"font weight selection",boldButton:"bold button",
italicButton:"italic button",underlineButton:"underline button",linkButton:"link button",leftAlign:"left align",centerAlign:"center align",rightAlign:"right align",blockAlign:"block align",fontSizeField:"font size field",colorPicker:"color picker",copyStyleButton:"copy style",applyStyleButton:"apply style",removeStyleButton:"remove style",fixedHeightControl:"fixed height control",fixedWidthControl:"fixed width control",lineWrappingControl:"line wrapping control",paddingControl:"padding control",paddingField:"padding field",
paddingFieldTop:"padding field top",paddingFieldLeft:"padding field left",paddingFieldRight:"padding field right",paddingFieldBottom:"padding field bottom"};return fb.obj.extract(oa,fb.obj.keys(oa),function(La,Ua){return Ma.getSubmorphNamed(Ua)})}}}}},{key:"openDebouncedFor",value:function(Ma){var oa=Ma.selection;if(oa.isEmpty()){var La=fb.cachedControls.get(Ma);La&&(La.update(),La.alignAtTarget(),La.world()||Ma.world().addMorph(La))}else fb.fun.debounceNamed(Ma.id+"openRichTextControl",600,function(){var Ua=
fb.cachedControls.get(Ma);oa.isEmpty()?Ua&&Ua.removeFocus():(Ua&&Ua.world()||(Ua=new fb.RichTextControl,fb.cachedControls.set(Ma,Ua)),Ma.world().addMorph(Ua),Ua.focusOn(Ma,!0),Ua.alwaysTargetFocusedMorph())})()}},{key:"openFor",value:function(Ma){var oa=fb.cachedControls.get(Ma);oa?oa.update():(oa=new fb.RichTextControl,fb.cachedControls.set(Ma,oa),oa.focusOn(Ma,!0),oa.alwaysTargetFocusedMorph());oa.alignAtTarget();oa.world()||Ma.world().addMorph(oa);return oa}}],pc,{pathInPackage:function(){return"text/ui.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:636,end:17716})}(fb.Morph);fb.RichTextControl=uc;fb.RichTextControl=uc;fb.RichTextControl=uc;var Rb=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js");Rb.Morph=Ld;Rb.touchInputDevice=Se;Rb.morph=gd;Rb.Icon=Pd;Rb.easings=nc;Rb.pt=af;Rb.Color=Ve;Rb.fun=$a;Rb.connect=Ad;Rb.TreeData=
$c;uc=function(Oc){var pc=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),bb=pc.hasOwnProperty("SettingsTree")&&"function"===typeof pc.SettingsTree?pc.SettingsTree:pc.SettingsTree=function(Ma){Ma&&Ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pe(bb,Oc,[{key:"display",value:function(Ma){return Ma.panel?[Ma.panel,{}]:Ma.name}},{key:"collapse",value:function(Ma,oa){Ma.isCollapsed=oa}},{key:"isCollapsed",value:function(Ma){return Ma.isCollapsed}},
{key:"isLeaf",value:function(Ma){return!Ma.children}},{key:"getChildren",value:function(Ma){var oa=this;return Ma===this.root?Ma.children.filter(function(La){return oa.target&&La.applicabilityCheck?eval(La.applicabilityCheck)(oa.target):!0}):Ma.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SettingsTree"}},{key:"default",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" ",{}].concat($jscomp.arrayFromIterable(Rb.Icon.textAttribute("font")),
[" Rich Text",{fontWeight:"bold"}]),children:[{panel:Rb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Rb.Icon.textAttribute("image")),[" Shape",{fontWeight:"bold"}]),children:[{panel:Rb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Rb.Icon.textAttribute("border-style")),[" Border",{paddingLeft:"2px",fontWeight:"bold"}]),children:[{panel:Rb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Rb.Icon.textAttribute("grip-vertical")),
[" Layout",{paddingLeft:"4px",fontWeight:"bold"}]),children:[{panel:Rb.morph({})}]}]})}},{key:"border",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" Type    ",{},Rb.morph({height:20}),{}],children:[{panel:Rb.morph({})}]},{isCollapsed:!1,name:[" Color   ",{},Rb.morph({height:20}),{}],children:[{panel:Rb.morph({})}]},{isCollapsed:!1,name:[" Width  ",{},Rb.morph({height:20}),{}],children:[{panel:Rb.morph({})}]},{isCollapsed:!1,name:[" Radius ",{},Rb.morph({height:20}),
{}],children:[{panel:Rb.morph({})}]}]})}}],pc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-70"}}},{start:284,end:2663})}(Rb.TreeData);Rb.SettingsTree=uc;Rb.SettingsTree=uc;Rb.SettingsTree=uc;uc=function(Oc){var pc=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),bb=pc.hasOwnProperty("StylingSideBar")&&
"function"===typeof pc.StylingSideBar?pc.StylingSideBar:pc.StylingSideBar=function(Ma){Ma&&Ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pe(bb,Oc,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"collapseAll",value:function(){this.getSubmorphsByStyleClassName("Tree").forEach(function(Ma){Ma.nodes.forEach(function(oa){return Ma.treeData.root==oa?Ma.uncollapse(oa):Ma.collapse(oa)})})}},{key:"onWorldResize",value:function(Ma){Ma=
void 0===Ma?!0:Ma;if(this.respondsToVisibleWindow){var oa=$world.visibleBounds(),La=navigator.standalone&&Rb.touchInputDevice?25:0,Ua=this.getSubmorphNamed("horizontal resizer");this.height=oa.height-La;this.top=La+oa.top();Ua.height=this.height;Ua.left=0;Ua.top=0;Ma&&(this.visible?this.topRight=oa.topRight():this.topLeft=oa.topRight())}}},{key:"toggle",value:function(Ma){var oa=this,La,Ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sb){switch(Sb.nextAddress){case 1:La=$world.visibleBounds();
Ua=navigator.standalone&&Rb.touchInputDevice?25:0;oa.height=La.height-Ua;oa.top=Ua+La.top();if(Ma)return $world.addMorph(oa,$world.get("lively top bar")),oa.topLeft=La.topRight(),oa.visible=!0,Sb.yield(oa.whenRendered(),5);oa.detachFromWorld($world);return Sb.yield(oa.animate({opacity:0,topLeft:La.topRight(),duration:300}),4);case 4:oa.visible=!1;oa.remove();Sb.jumpTo(0);break;case 5:return oa.onWorldResize(!1),Sb.yield(oa.animate({opacity:1,easing:Rb.easings.outCirc,topRight:La.topRight(),duration:300}),
6);case 6:oa.attachToWorld($world),Sb.jumpToEnd()}})}},{key:"cleanupAnchors",value:function(){for(var Ma=this.withAllSubmorphsSelect(function(Sb){return Sb.anchors&&Sb.anchors.filter(function(Ca){return!Ca.id}).length}),oa={},La=$jscomp.makeIterator(Ma),Ua=La.next();!Ua.done;oa={$jscomp$loop$prop$m$2997:oa.$jscomp$loop$prop$m$2997},Ua=La.next())oa.$jscomp$loop$prop$m$2997=Ua.value,oa.$jscomp$loop$prop$m$2997.anchors.forEach(function(Sb){return function(Ca){return!Ca.id&&Sb.$jscomp$loop$prop$m$2997.removeAnchor(Ca)}}(oa));
return Ma.length}},{key:"attachToWorld",value:function(Ma){Rb.connect(Ma,"showHaloFor",this,"focusMorph",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(Ma){var oa=this;Ma.attributeConnections.forEach(function(La){La.targetObj===oa&&La.disconnect()})}},{key:"focusMorph",value:function(Ma){if(!Ma.isMorph||!Ma.ownerChain().includes(this)){(Ma.isLabel||Ma.isText||Ma.isButton)&&this.richTextControl.focusOn(Ma,!1);var oa=this.getSubmorphNamed("style settings tree");oa.treeData.target=Ma;oa.update(!0);
Object.values(this.controls).forEach(function(La){return La&&La.focusOn(Ma)})}}},{key:"onHierarchyChange",value:function(){Object.values(this.controls).forEach(function(Ma){return Ma&&Ma.update()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylingSideBar"}},{key:"properties",get:function(){return{controls:{},richTextControl:{},isHaloItem:{get:function(){return!0}}}}}],pc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-70"}}},{start:2682,end:5727})}(Rb.Morph);uc=Rb.StylingSideBar;Rb.default=uc;var Fc=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js");Fc.Morph=Ld;Fc.obj=jc;Fc.string=Vb;Fc.connect=Ad;Fc.noUpdate=td;Fc.once=qc;uc=function(Oc){var pc=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js"),bb=pc.hasOwnProperty("ShapeFormatStyler")&&"function"===typeof pc.ShapeFormatStyler?
pc.ShapeFormatStyler:pc.ShapeFormatStyler=function(Ma){Ma&&Ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pe(bb,Oc,[{key:Symbol.for("lively-instance-initialize"),value:function(Ma){pe._get(Object.getPrototypeOf(bb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Ma);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var Ma=this.ui,oa={},La=$jscomp.makeIterator(Object.entries(this.uiSpec)),
Ua=La.next();!Ua.done;oa={$jscomp$loop$prop$control$2999:oa.$jscomp$loop$prop$control$2999,$jscomp$loop$prop$prop$3000:oa.$jscomp$loop$prop$prop$3000},Ua=La.next()){var Sb=$jscomp.makeIterator(Ua.value);Ua=Sb.next().value;Sb=$jscomp.makeIterator(Sb.next().value);Sb.next();var Ca=Sb.next().value;oa.$jscomp$loop$prop$prop$3000=Sb.next().value;oa.$jscomp$loop$prop$control$2999=Ma[Ua];Fc.connect(oa.$jscomp$loop$prop$control$2999,Ca,this,"updateTarget",{updater:function(Va){return function(dc,sb){Va.$jscomp$loop$prop$control$2999._updating=
!0;dc(Va.$jscomp$loop$prop$prop$3000,sb);Va.$jscomp$loop$prop$control$2999._updating=!1}}(oa),varMapping:{prop:oa.$jscomp$loop$prop$prop$3000,control:oa.$jscomp$loop$prop$control$2999}})}}},{key:"update",value:function(){var Ma=this,oa=this.target,La=oa.top,Ua=oa.left,Sb=oa.isImage,Ca=oa.isLabel,Va=oa.imageUrl,dc=oa.textString,sb=oa.clipMode,od=oa.fill,bc=oa.dropShadow,Td=oa.opacity,rd=oa.height,dd=oa.width;oa=this.ui;var Ub=oa.clipModeSelector,Ne=oa.fillPicker,gc=oa.opacityField,Tb=oa.shadowPicker,
Ya=oa.heightField,ha=oa.widthField,Pa=oa.posXField,nb=oa.posYField,cc=oa.imageUrlInput,Lc=oa.labelContentInput;Fc.noUpdate(function(){Ma.updateControl(Tb,"shadowValue",bc);Ma.updateControl(Ub,"selection",sb);Ma.updateControl(Ne,"colorValue",od);Ma.updateControl(gc,"number",Td);Ma.updateControl(Ya,"number",rd);Ma.updateControl(ha,"number",dd);Ma.updateControl(Pa,"number",Ua);Ma.updateControl(nb,"number",La);Ne.context=Ma.target;Sb&&Ma.updateControl(cc,"input",Va);cc.owner.isLayoutable=cc.owner.visible=
!!Sb;Ca&&Ma.updateControl(Lc,"input",dc);Lc.owner.isLayoutable=Lc.owner.visible=!!Ca;var pd=Ma.getSubmorphNamed("special controls");(pd.visible=!!Ca||!!Sb)?Ma.height=pd.bottom:Ma.height=pd.top})}},{key:"updateTarget",value:function(Ma,oa){this.target[Ma]=oa;this.update()}},{key:"updateControl",value:function(Ma,oa,La){Ma._updating||Fc.obj.equals(Ma[oa],La)||(Ma[oa]=La)}},{key:"updateMultiValue",value:function(Ma,oa,La){var Ua=this.ui,Sb=Ua[this.join(Ma)],Ca=Sb.get("multi value indicator"),Va=Fc.obj.values(oa).some(function(dc){return!Fc.obj.isFunction(dc)&&
!Fc.obj.equals(dc,oa.valueOf())});Ca.left=0;Sb.visible=Sb.isLayoutable=!Va;if(Va&&Ca.visible!=Va)Fc.once(Ca,"onMouseDown",Sb,La,{converter:function(){return oa.valueOf()},varMapping:{value:oa}});Ca.visible=Ca.isLayoutable=Va;Ca.left=Va?200:0;this.updateControl(Sb,La,oa.valueOf());Sb=$jscomp.makeIterator(["top","left","bottom","right"]);for(Ca=Sb.next();!Ca.done;Ca=Sb.next())Ca=Ca.value,Va=Ua[this.join(Ma,Ca)],this.updateControl(Va,La,oa[Ca])}},{key:"lower",value:function(Ma){return Ma.charAt(0).toLowerCase()+
Ma.slice(1)}},{key:"join",value:function(Ma,oa){return this.lower(Fc.string.camelCaseString(Ma+(oa?" "+oa:"")))}},{key:"unwrap",value:function(Ma,oa,La){var Ua={};Ua=(Ua[this.lower(Fc.string.camelCaseString(Ma))]=[Ma,oa,La],Ua);for(var Sb=$jscomp.makeIterator(["top","left","bottom","right"]),Ca=Sb.next();!Ca.done;Ca=Sb.next()){Ca=Ca.value;var Va=Ma+" "+Ca;Ua[this.lower(Fc.string.camelCaseString(Va))]=[Va,oa,this.join(La,Ca)]}return Ua}},{key:"focusOn",value:function(Ma){var oa=this,La;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ua){if(1==
Ua.nextAddress)return!Ma||oa.isAncestorOf(Ma)||oa.target===Ma||Fc.obj.isArray(Ma)||(oa.target=Ma),La=oa.visible,oa.visible=!0,Ua.yield(oa.whenRendered(),2);if(3!=Ua.nextAddress)return oa.update(),Ua.yield(oa.whenRendered(),3);oa.getSubmorphsByStyleClassName("NumberWidget").map(function(Sb){return Sb.relayout()});oa.visible=La;Ua.jumpToEnd()})}},{key:"removeFocus",value:function(){this.target=null}},{key:"onHoverIn",value:function(Ma){this.watchForTarget=!1}},{key:"onHoverOut",value:function(Ma){this.watchForTarget=
!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShapeFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{get:function(){return this._uiSpec||(this._uiSpec={clipModeSelector:["clip mode selector","selection","clipMode"],fillPicker:["fill picker","colorValue","fill"],shadowPicker:["shadow picker","shadowValue","dropShadow"],opacityField:["opacity field","number","opacity"],heightField:["height field","number","height"],widthField:["width field","number","width"],posXField:["pos x field",
"number","left"],posYField:["pos y field","number","top"],imageUrlInput:["image url input","inputAccepted","imageUrl"],labelContentInput:["label content input","inputAccepted","textString"]})}},ui:{readOnly:!0,get:function(){var Ma=this,oa=this.uiSpec;return this._ui||(this._ui=Fc.obj.extract(oa,Fc.obj.keys(oa),function(La,Ua){La=$jscomp.makeIterator(Ua).next().value;return Ma.getSubmorphNamed(La)}))}}}}}],pc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeFormatStyler",version:"0.1.1-158"}}},{start:176,end:5822})}(Fc.Morph);uc=Fc.ShapeFormatStyler;Fc.default=uc;var Uc=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js");Uc.Morph=Ld;Uc.ShadowPopover=Tc;Uc.connect=Ad;Uc.signal=ge;uc=function(Oc){var pc=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js"),bb=pc.hasOwnProperty("ShadowWidget")&&"function"===typeof pc.ShadowWidget?pc.ShadowWidget:
pc.ShadowWidget=function(Ma){Ma&&Ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pe(bb,Oc,[{key:"onHoverIn",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:1,duration:200})}},{key:"onHoverOut",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(Ma){this.openPopover()}},{key:"update",value:function(Ma){var oa=this.submorphs[0];
oa&&(oa.dropShadow=Ma)}},{key:"openPopover",value:function(){var Ma=this,oa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(La){if(1==La.nextAddress)return oa=new Uc.ShadowPopover({hasFixedPosition:!!Ma.ownerChain().find(function(Ua){return Ua.hasFixedPosition}),shadowValue:Ma.shadowValue}),La.yield(oa.fadeIntoWorld(Ma.globalBounds().center()),2);Uc.connect(oa,"shadowValue",Ma,"shadowValue");Uc.connect(Ma,"shadowValue",Ma,"update");Uc.signal(Ma,"openWidget",oa);La.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{set:function(Ma){this.setProperty("shadowValue",Ma);this.update(Ma)}}}}}],pc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShadowWidget",version:"0.1.1-7"}}},{start:194,end:1231})}(Uc.Morph);uc=Uc.ShadowWidget;Uc.default=uc;var vd=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js");
vd.Morph=Ld;vd.obj=jc;vd.string=Vb;vd.connect=Ad;vd.noUpdate=td;vd.once=qc;uc=function(Oc){var pc=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js"),bb=pc.hasOwnProperty("BorderFormatStyler")&&"function"===typeof pc.BorderFormatStyler?pc.BorderFormatStyler:pc.BorderFormatStyler=function(Ma){Ma&&Ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pe(bb,Oc,[{key:"setupUI",value:function(){var Ma=this;this.getSubmorphsByStyleClassName("NumberWidget").map(function(oa){var La=
vd.string.camelCaseString(oa.name);La=La[0].toLowerCase()+La.slice(1);Ma.ui[La]=oa})}},{key:"cleanupAnchors",value:function(){var Ma=this.withAllSubmorphsSelect(function(Ua){return Ua.anchors&&Ua.anchors.filter(function(Sb){return!Sb.id})}),oa={};Ma=$jscomp.makeIterator(Ma);for(var La=Ma.next();!La.done;oa={$jscomp$loop$prop$m$3002:oa.$jscomp$loop$prop$m$3002},La=Ma.next())oa.$jscomp$loop$prop$m$3002=La.value,oa.$jscomp$loop$prop$m$3002.anchors.forEach(function(Ua){return function(Sb){return!Sb.id&&
Ua.$jscomp$loop$prop$m$3002.removeAnchor(Sb)}}(oa))}},{key:Symbol.for("lively-instance-initialize"),value:function(Ma){pe._get(Object.getPrototypeOf(bb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Ma);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var Ma=this.ui,oa={},La=$jscomp.makeIterator(Object.entries(this.uiSpec)),Ua=La.next();!Ua.done;oa={$jscomp$loop$prop$control$3004:oa.$jscomp$loop$prop$control$3004,$jscomp$loop$prop$prop$3005:oa.$jscomp$loop$prop$prop$3005},
Ua=La.next()){var Sb=$jscomp.makeIterator(Ua.value);Ua=Sb.next().value;Sb=$jscomp.makeIterator(Sb.next().value);Sb.next();var Ca=Sb.next().value;oa.$jscomp$loop$prop$prop$3005=Sb.next().value;oa.$jscomp$loop$prop$control$3004=Ma[Ua];vd.connect(oa.$jscomp$loop$prop$control$3004,Ca,this,"updateTarget",{updater:function(Va){return function(dc,sb){Va.$jscomp$loop$prop$control$3004._updating=!0;dc(Va.$jscomp$loop$prop$prop$3005,sb);Va.$jscomp$loop$prop$control$3004._updating=!1}}(oa),varMapping:{prop:oa.$jscomp$loop$prop$prop$3005,
control:oa.$jscomp$loop$prop$control$3004}})}}},{key:"update",value:function(){var Ma=this,oa=this.target,La=oa.borderStyle,Ua=oa.borderColor,Sb=oa.borderRadius,Ca=oa.borderWidth;vd.noUpdate(function(){Ma.updateMultiValue("border style selector",La,"selection");Ma.updateMultiValue("border color picker",Ua,"colorValue");Ma.updateMultiValue("border radius field",Sb,"number");Ma.updateMultiValue("border width field",Ca,"number")})}},{key:"updateTarget",value:function(Ma,oa){this.target[Ma]=oa;this.update()}},
{key:"updateControl",value:function(Ma,oa,La){Ma._updating||vd.obj.equals(Ma[oa],La)||(Ma[oa]=La)}},{key:"updateMultiValue",value:function(Ma,oa,La){var Ua=this.ui,Sb=Ua[this.join(Ma)],Ca=Sb.get("multi value indicator"),Va=vd.obj.values(oa).some(function(dc){return!vd.obj.isFunction(dc)&&!vd.obj.equals(dc,oa.valueOf())});Sb.visible=Sb.isLayoutable=!Va;if(Va&&Ca.visible!=Va)vd.once(Ca,"onMouseDown",Sb,La,{converter:function(){return oa.valueOf()},varMapping:{value:oa}});Ca.visible=Ca.isLayoutable=
Va;this.updateControl(Sb,La,oa.valueOf());Sb=$jscomp.makeIterator(["top","left","bottom","right"]);for(Ca=Sb.next();!Ca.done;Ca=Sb.next())Ca=Ca.value,Va=Ua[this.join(Ma,Ca)],this.updateControl(Va,La,oa[Ca])}},{key:"lower",value:function(Ma){return Ma.charAt(0).toLowerCase()+Ma.slice(1)}},{key:"join",value:function(Ma,oa){return this.lower(vd.string.camelCaseString(Ma+(oa?" "+oa:"")))}},{key:"unwrap",value:function(Ma,oa,La){var Ua={};Ua=(Ua[this.lower(vd.string.camelCaseString(Ma))]=[Ma,oa,La],Ua);
for(var Sb=$jscomp.makeIterator(["top","left","bottom","right"]),Ca=Sb.next();!Ca.done;Ca=Sb.next()){Ca=Ca.value;var Va=Ma+" "+Ca;Ua[this.lower(vd.string.camelCaseString(Va))]=[Va,oa,this.join(La,Ca)]}return Ua}},{key:"attachToWorld",value:function(){vd.connect($world,"showHaloFor",this,"focusOn",{garbageCollect:!0})}},{key:"focusOn",value:function(Ma){var oa=this,La;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ua){if(1==Ua.nextAddress)return!Ma||oa.isAncestorOf(Ma)||oa.target===Ma||
vd.obj.isArray(Ma)||(oa.target=Ma),La=oa.visible,oa.visible=!0,Ua.yield(oa.whenRendered(),2);if(3!=Ua.nextAddress)return oa.update(),Ua.yield(oa.whenRendered(),3);oa.getSubmorphsByStyleClassName("NumberWidget").map(function(Sb){return Sb.relayout()});oa.visible=La;Ua.jumpToEnd()})}},{key:"onHoverIn",value:function(Ma){this.watchForTarget=!1}},{key:"onHoverOut",value:function(Ma){this.watchForTarget=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BorderFormatStyler"}},{key:"properties",
get:function(){return{uiSpec:{derived:!0,serialize:!1,get:function(){return this._uiSpec||(this._uiSpec=Object.assign({},this.unwrap("border style selector","selection","borderStyle"),{},this.unwrap("border color picker","colorValue","borderColor"),{},this.unwrap("border radius field","number","borderRadius"),{},this.unwrap("border width field","number","borderWidth")))}},ui:{initialize:function(){this.setupUI()}}}}}],pc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"BorderFormatStyler",version:"0.1.1-16"}}},{start:185,end:5003})}(vd.Morph);uc=vd.BorderFormatStyler;vd.default=uc;var Xd=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js");Xd.Morph=Ld;Xd.morph=gd;Xd.layouts=ad;Xd.string=Vb;Xd.connect=Ad;Xd.noUpdate=td;Xd.InteractiveMorphSelector=Mc;Xd.Color=Ve;Xd.pt=af;uc=function(Oc){var pc=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js"),
bb=pc.hasOwnProperty("ShapeLayoutControl")&&"function"===typeof pc.ShapeLayoutControl?pc.ShapeLayoutControl:pc.ShapeLayoutControl=function(Ma){Ma&&Ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pe(bb,Oc,[{key:"focusOn",value:function(Ma){this.target=Ma;this.update(!1)}},{key:"setupConnections",value:function(){var Ma=this.ui;Xd.connect(Ma.submorphSettingsControl,"fire",this,"chooseSubmorphToChangeLayoutSettings");Xd.connect(Ma.dragmeControl,
"onDragStart",this,"onSubmorphSettingsDragStart");Xd.connect(Ma.xAxisPolicyControl,"selection",this,"updateSubmorphConstraintLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "x",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});Xd.connect(Ma.yAxisPolicyControl,"selection",this,"updateSubmorphConstraintLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "y",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});
for(var oa={},La=$jscomp.makeIterator(this.managedProps),Ua=La.next();!Ua.done;oa={$jscomp$loop$prop$prop$3007:oa.$jscomp$loop$prop$prop$3007},Ua=La.next()){var Sb=$jscomp.makeIterator(Ua.value),Ca=Sb.next().value;Ua=Sb.next().value;Sb.next().value||(oa.$jscomp$loop$prop$prop$3007=this.join(Ca),Sb=Ma[this.join(Ca,"control")],Xd.connect(Sb,Ua,this,"updateLayout",{updater:function(Va){return function(dc,sb){dc(Va.$jscomp$loop$prop$prop$3007,sb)}}(oa),varMapping:{prop:oa.$jscomp$loop$prop$prop$3007}}))}}},
{key:"lower",value:function(Ma){return Ma.charAt(0).toLowerCase()+Ma.slice(1)}},{key:"join",value:function(Ma,oa){return this.lower(Xd.string.camelCaseString(Ma+(oa?" "+oa:"")))}},{key:"updateLayoutOfTarget",value:function(Ma){Ma=Xd.layouts[Xd.string.camelCaseString(Ma)];this.target.layout=Ma?new Ma({autoResize:!1}):null;this.update()}},{key:"updateLayout",value:function(Ma,oa){this.target.layout[Ma]=oa}},{key:"update",value:function(Ma){var oa=this;this.target&&Xd.noUpdate(function(){for(var La=
oa.ui,Ua=oa.target.layout||{name:function(){return"No"}},Sb=$jscomp.makeIterator(oa.managedProps),Ca=Sb.next();!Ca.done;Ca=Sb.next()){var Va=$jscomp.makeIterator(Ca.value);Ca=Va.next().value;var dc=Va.next().value;Va.next();Va=La[oa.join(Ca,"control")];var sb=La[oa.join(Ca,"label")];if(dc)if("type"===Ca)Va.selection=Ua.name()+" Layout";else{var od=Ua[oa.join(Ca)],bc="undefined"!==typeof od;if(bc){switch(Ca){case "align":Va.items=Ua.possibleAlignValues;break;case "direction":Va.items=Ua.possibleDirectionValues;
break;case "axis":Va.items=Ua.possibleAxisValues}Va[dc]=od}sb.isLayoutable=sb.visible=bc}}oa.showGridLayoutControl("Grid"===Ua.name());oa.showProportionalControl("Proportional"===Ua.name())})}},{key:"updateSubmorphConstraintLayoutSettings",value:function(Ma){var oa={};this.target.layout.changeSettingsFor(Ma.submorph,(oa[Ma.axis]=Ma.policy,oa),!0)}},{key:"onSubmorphSettingsDragStart",value:function(Ma){var oa=this;Ma.stop();var La=this.target.layout,Ua=La.settingsFor(this.selectedSubmorph),Sb=[],
Ca;for(Ca in Ua)Sb=[].concat($jscomp.arrayFromIterable(Sb),[Ca+": ",{fontWeight:"bold"},Ua[Ca]+" ",{}]);var Va=Xd.morph({type:"label",fontColor:Xd.Color.white,value:Sb,fill:Xd.Color.black.withA(.7),padding:5,borderRadius:10,isLayoutable:!1});Va.wantsToBeDroppedOn=function(dc){return La.layoutableSubmorphs.includes(dc)};Va.onBeingDroppedOn=function(dc,sb){Va.remove();if(dc=La.layoutableSubmorphs.includes(sb)?sb:Ma.world.morphsContainingPoint(Ma.hand.position).find(function(od){return La.layoutableSubmorphs.includes(od)}))oa.updateSubmorphConstraintLayoutSettings({policy:Ua.x,
axis:"x",submorph:dc}),oa.updateSubmorphConstraintLayoutSettings({policy:Ua.y,axis:"y",submorph:dc}),dc.show(),$world.setStatusMessage("layout settings applied")};Ma.hand.grab(Va);Va.moveBy(Xd.pt(10,10))}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var Ma=this,oa,La,Ua,Sb,Ca,Va,dc,sb,od;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bc){switch(bc.nextAddress){case 1:return oa=Ma.target.layout.layoutableSubmorphs,Ma.manageFocus=!0,Ma.env.eventDispatcher.isKeyPressed("Shift")?
(Ua=oa.map(function(Td){return{isListItem:!0,string:String(Td),value:Td}}),bc.yield($world.listPrompt("Select morph",Ua,{onSelection:function(Td){return Td.show()}}),5)):bc.yield(Xd.InteractiveMorphSelector.selectMorph(Ma.world(),Ma,function(Td){return oa.includes(Td)}),4);case 4:La=bc.yieldResult;bc.jumpTo(3);break;case 5:Sb=bc.yieldResult,Ca=$jscomp.makeIterator(Sb.selected),La=Ca.next().value;case 3:Ma.manageFocus=!1;Ma.selectedSubmorph=La;if(!La)return bc.return();Va=Ma.ui;dc=Va.xAxisPolicyControl;
sb=Va.yAxisPolicyControl;od=Ma.target.layout.settingsFor(La);Xd.noUpdate(function(){dc.selection=od.x;sb.selection=od.y});bc.jumpToEnd()}})}},{key:"showProportionalControl",value:function(Ma){var oa=this.ui;[oa.submorphSettingsControl,oa.dragmeControl,oa.xAxisPolicyControl,oa.xAxisPolicyLabel,oa.yAxisPolicyControl,oa.yAxisPolicyLabel].forEach(function(La){La.isLayoutable=Ma;La.visible=Ma})}},{key:"showGridLayoutHalo",value:function(){$world.showLayoutHaloFor(this.target)}},{key:"showGridLayoutControl",
value:function(Ma){var oa=this.ui.configureGridLayoutControl;oa.visible=oa.isLayoutable=Ma}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShapeLayoutControl"}},{key:"properties",get:function(){return{managedProps:{get:function(){return[["type","selection",!0],["align","selection"],["direction","selection"],["axis","selection"],["spacing","number"],["auto resize","checked"],["resize submorphs","checked"],["x axis policy","selection",!0],["y axis policy","selection",!0],["react to submorph animations",
"checked"],["submorph settings",!1,!0],["order by index","checked"],["dragme",!1,!0],["configure grid layout",!1,!0]]}},ui:{readOnly:!0,get:function(){for(var Ma={labelContainer:this.getSubmorphNamed("label container"),controlContainer:this.getSubmorphNamed("control container")},oa=$jscomp.makeIterator(this.managedProps),La=oa.next();!La.done;La=oa.next()){var Ua=$jscomp.makeIterator(La.value).next().value;La=Ua+" label";Ua+=" control";Ma[this.join(La)]=this.getSubmorphNamed(La);Ma[this.join(Ua)]=
this.getSubmorphNamed(Ua)}return Ma}}}}}],pc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeLayoutControl",version:"0.1.1-166"}}},{start:345,end:7771})}(Xd.Morph);uc=Xd.ShapeLayoutControl;Xd.default=uc;var vc=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js");vc.Morph=Ld;vc.resource=ie;vc.arr=wc;vc.obj=jc;
vc.string=Vb;vc.Path=Yb;vc.connect=Ad;vc.getMastersMenu=zb;vc.resolvedMasters=Rc;uc=function(Oc){var pc=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js"),bb=pc.hasOwnProperty("MasterComponentControl")&&"function"===typeof pc.MasterComponentControl?pc.MasterComponentControl:pc.MasterComponentControl=function(Ma){Ma&&Ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pe(bb,Oc,[{key:"focusOn",value:function(Ma){this.target=
Ma;this.update()}},{key:"onMouseUp",value:function(Ma){var oa=this,La,Ua,Sb,Ca,Va,dc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sb){if(1==sb.nextAddress){"auto master selection"==Ma.targetMorph.name&&(La="auto");"hover master selection"==Ma.targetMorph.name&&(La="hover");"click master selection"==Ma.targetMorph.name&&(La="click");oa.refreshButtons();if(!oa.target)return sb.return();Ua=$jscomp.makeIterator(["auto","hover","click"]);for(Sb=Ua.next();!Sb.done;Sb=Ua.next())Ca=Sb.value,
oa.target.master&&oa.target.master[Ca]&&!oa.get(Ca+" master checkbox").checked&&oa.adjustMasterComponent(Ca,null);if(!La)return sb.jumpTo(0);Va=oa;dc=Va.openMenu;return sb.yield(oa.getMastersMenu(La),3)}dc.call(Va,sb.yieldResult,Ma);sb.jumpToEnd()})}},{key:"getMastersMenu",value:function(Ma){var oa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(La){return 1==La.nextAddress?La.yield(Promise.all([].concat($jscomp.arrayFromIterable(Object.keys(vc.resolvedMasters)),[oa.world().name]).map(function(Ua){var Sb,
Ca,Va,dc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sb){return 1==sb.nextAddress?(Ca=(Sb=Ua==oa.world().name)?"This World":Ua,Va=oa,dc=Va.componentsToMenu,sb.yield(vc.resource("styleguide://"+Ua+"/").dirList(),2)):sb.return([Ca,dc.call(Va,sb.yieldResult,Ma)])})})),2):La.return(La.yieldResult)})}},{key:"componentsToMenu",value:function(Ma,oa,La,Ua){var Sb=this;La=void 0===La?null:La;Ua=void 0===Ua?1:Ua;La||(La=Ma.map(function(Va){return{name:vc.arr.last(Va.name.split("/")),path:Va.name.split("/"),
value:Va}}));if(0==La.length||100<Ua)return[];var Ca=this;return vc.arr.flatten(Object.entries(vc.arr.groupBy(La,function(Va){return Va.path[Ua-1]})).map(function(Va){var dc=$jscomp.makeIterator(Va);Va=dc.next().value;dc=dc.next().value;var sb=$jscomp.makeIterator(vc.arr.partition(dc,function(od){return od.path.length<=Ua}));dc=sb.next().value;sb=sb.next().value;Va=[Va,Sb.componentsToMenu(null,oa,sb,Ua+1)];return[].concat($jscomp.arrayFromIterable(dc.map(function(od){return[od.name,function(){Ca.adjustMasterComponent(oa,
od.value)}]})),$jscomp.arrayFromIterable(Va[1].length?[Va]:[]))}),1)}},{key:"getComponentSelectionMenu",value:function(Ma){var oa=this,La,Ua,Sb,Ca,Va,dc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sb){if(1==sb.nextAddress)return La=oa.world().metadata.commit.name,Ua=vc.resource("styleguide://"+La+"/"),sb.yield(Ua.dirList(),2);if(3!=sb.nextAddress)return Sb=sb.yieldResult,sb.yield(vc.resource("styleguide://System/").dirList(),3);Ca=sb.yieldResult;Va=oa.componentsToMenu(Sb,Ma);dc=oa.componentsToMenu(Ca,
Ma);return sb.return([].concat($jscomp.arrayFromIterable(0<Va.length?[].concat($jscomp.arrayFromIterable(Va),[{isDivider:!0}]):[]),$jscomp.arrayFromIterable(dc)))})}},{key:"adjustMasterComponent",value:function(Ma,oa){if(this.target.master)this.target.master[Ma]=oa;else if(oa){var La={};this.target.master=(La[Ma]=oa,La)}Ma=this.target.master;oa=Ma.hover;La=Ma.click;Ma.auto||oa||La||(this.target.master=null);this.update();this.target.withAllSubmorphsDo(function(Ua){return delete Ua._parametrizedProps});
this.target.requestMasterStyling()}},{key:"componentsToMenu",value:function(Ma,oa,La,Ua){var Sb=this;La=void 0===La?null:La;Ua=void 0===Ua?1:Ua;La||(La=Ma.map(function(Va){return{name:vc.arr.last(Va.name.split("/")),path:Va.name.split("/"),value:Va}}));if(0==La.length||100<Ua)return[];var Ca=this;return vc.arr.flatten(Object.entries(vc.arr.groupBy(La,function(Va){return Va.path[Ua-1]})).map(function(Va){var dc=$jscomp.makeIterator(Va);Va=dc.next().value;dc=dc.next().value;var sb=$jscomp.makeIterator(vc.arr.partition(dc,
function(od){return od.path.length<=Ua}));dc=sb.next().value;sb=sb.next().value;Va=[Va,Sb.componentsToMenu(null,oa,sb,Ua+1)];return[].concat($jscomp.arrayFromIterable(dc.map(function(od){return[od.name,function(){Ca.adjustMasterComponent(oa,od.value)}]})),$jscomp.arrayFromIterable(Va[1].length?[Va]:[]))}),1)}},{key:"update",value:function(){if(this.target){for(var Ma=$jscomp.makeIterator(["auto","hover","click"]),oa=Ma.next();!oa.done;oa=Ma.next()){oa=oa.value;var La=this.getSubmorphNamed(oa+" master selection"),
Ua=this.getSubmorphNamed(oa+" master checkbox");vc.Path(["master",oa]).get(this.target)?Ua.checked=!0:Ua.checked=!1;La.label=vc.string.truncateLeft(vc.Path(["master",oa,"name"]).get(this.target)||"select master",15,"...")}this.refreshButtons()}}},{key:"refreshButtons",value:function(){for(var Ma=$jscomp.makeIterator(["auto","hover","click"]),oa=Ma.next();!oa.done;oa=Ma.next()){oa=oa.value;var La=this.getSubmorphNamed(oa+" master selection"),Ua=this.getSubmorphNamed(oa+" master checkbox");La=La.deactivated=
!Ua.checked;this.getSubmorphNamed(oa+" master selection").opacity=La?.5:1}Ma=this.getSubmorphNamed("overridden props list");Ma.items=this.getOverriddenProps();this.getSubmorphNamed("clear overridden prop button").deactivated=!Ma.selection}},{key:"getMasterForTarget",value:function(){if(this.target.isMorph)return[this.target].concat($jscomp.arrayFromIterable(this.target.ownerChain())).map(function(Ma){return Ma.master}).find(Boolean)}},{key:"clearSelectedProperty",value:function(){var Ma=this.getSubmorphNamed("overridden props list").selection;
this.getMasterForTarget().clearOverriddenPropertiesFor(this.target,[Ma]);this.refreshButtons()}},{key:"getOverriddenProps",value:function(){var Ma=this.getMasterForTarget();return Ma&&Ma._overriddenProps?(Ma=Ma._overriddenProps.get(this.target))?Object.keys(Ma):[]:[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MasterComponentControl"}}],pc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"MasterComponentControl",version:"0.1.1-110"}}},{start:315,end:6250})}(vc.Morph);uc=vc.MasterComponentControl;vc.default=uc}}});