System.register(["./__root_module__-6d2e743c.js"],function(Ma){var rb,Db,hc,Kb,id,Zc,yd,Kc,sc,bd,hd,se,xe,ne,Rc,Pd,Hb,Gc,ud,Vc,Id,ie,Fb,Ac,$c,Bc,vd,pb,lb,Zb,Mb,ub,rc,Ua,Lb,mb,Gb,vc,Lc,cc,Vb,Ub;return{setters:[function(Ga){rb=Ga.f;Db=Ga.p;hc=Ga.C;Kb=Ga.m;id=Ga._;Zc=Ga.a;yd=Ga.c;Kc=Ga.R;sc=Ga.a2;bd=Ga.e;hd=Ga.V;se=Ga.I;xe=Ga.M;ne=Ga.ax;Rc=Ga.d;Pd=Ga.o;Hb=Ga.a1;Gc=Ga.i;ud=Ga.S;Vc=Ga.ah;Id=Ga.O;ie=Ga.ae;Fb=Ga.k;Ac=Ga.ac;$c=Ga.P;Bc=Ga.ay;vd=Ga.n;pb=Ga.b;lb=Ga.g;Zb=Ga.az;Mb=Ga.ad;ub=Ga.aA;rc=Ga.aB;
Ua=Ga.aC;Lb=Ga.aD;mb=Ga.h;Gb=Ga.aE;vc=Ga.Y;Lc=Ga.aF;cc=Ga.aG;Vb=Ga.B;Ub=Ga.j}],execute:function(){function Ga(yb){(yb=Ja.cachedGuideLines.get(yb))&&yb.forEach(function(nb){return nb.remove()})}function jb(yb,nb,Ha,R,xa){nb=void 0===nb?!0:nb;Ha=void 0===Ha?!0:Ha;R=void 0===R?10:R;xa=void 0===xa?100:xa;if(nb||Ha){var $a=yb.owner,Ab=$a.world();$a=$a.getGlobalTransform();var bc=yb.owner.submorphs.filter(function(O){return O!==yb&&!O.isEpiMorph&&O.visible&&O.reactsToPointer}),Ec=Ja.findAlignedMorphs(yb,
bc,R,xa,"left top right bottom hCenter vCenter".split(" "),"left top right bottom hCenter vCenter".split(" "));xa=[];var pc=0,wd=0,xd=0,Se=0;$a.e-=Ab.scroll.x;$a.f-=Ab.scroll.y;if(Ec){Ec=$jscomp.makeIterator(Ec);for(var v=Ec.next();!v.done;v=Ec.next()){v=$jscomp.makeIterator(v.value);v.next();var Ie=v.next().value;v=Ie.vertical;Ie=$jscomp.makeIterator(Ie.horizontal);for(var cf=Ie.next();!cf.done;cf=Ie.next()){cf=cf.value;var df=cf.edgeAVal,Ze=cf.refPointsA,ke=cf.refPointsB,Ke=cf.edgeBVal,yf=Math.ceil(R-
cf.delta),wf=Math.min(Ze.top,ke.top);Ze=Math.max(Ze.bottom,ke.bottom);cf.maxDist>R&&(yf-=R/2);pc<yf&&(pc=yf,xd=Ke-df);xa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Ja.guideWidth,start:$a.transformPoint(Ja.pt(Ke,wf)),end:$a.transformPoint(Ja.pt(Ke,Ze)),fill:Ja.guideColor,guideType:"h",priority:yf})}v=$jscomp.makeIterator(v);for(Ie=v.next();!Ie.done;Ie=v.next())Ie=Ie.value,cf=Ie.edgeAVal,wf=Ie.refPointsA,Ze=Ie.refPointsB,df=Ie.edgeBVal,Ke=Math.ceil(R-Ie.delta),yf=Math.min(wf.left,Ze.left),
wf=Math.max(wf.right,Ze.right),Ie.maxDist>R&&(Ke-=R/2),wd<Ke&&Math.abs(df-cf)<=R&&(wd=Ke,Se=df-cf),xa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Ja.guideWidth,start:$a.transformPoint(Ja.pt(yf,df)),end:$a.transformPoint(Ja.pt(wf,df)),fill:Ja.guideColor,guideType:"v",priority:Ke})}}if(!pc||!wd){bc=[yb].concat($jscomp.arrayFromIterable(bc));cf=Ja.computeClosestMorphs(bc);Ie=cf[0];bc=Ie.l;Ec=Ie.r;v=Ie.t;Ie=Ie.b;var ug;if(bc||Ec||v||Ie){var Zd=(bc||Ec||v||Ie).refPointsA;for(df=1;df<cf.length&&
(Ze=cf[df],Ke=Ze.l,yf=Ze.r,wf=Ze.t,Ze=Ze.b,pc||(bc&&Ke&&bc.index!==Ke.index&&Math.abs(Ke.dist-bc.dist)<=R?ug=Object.assign({neighbor:df,direction:"left"},Ke):Ec&&yf&&Ec!==yf.index&&Math.abs(yf.dist-Ec.dist)<=R&&(ug=Object.assign({neighbor:df,direction:"right"},yf))),wd||(v&&wf&&v.index!==wf.index&&Math.abs(wf.dist-v.dist)<=R?ug=Object.assign({neighbor:df,direction:"top"},wf):Ie&&Ze&&Ie.index!==Ze.index&&Math.abs(Ze.dist-Ie.dist)<=R&&(ug=Object.assign({neighbor:df,direction:"bottom"},Ze))),!ug);df++);
}if(ug){var Hc=ug;R=Hc.direction;wf=Hc.dist;var dh=Zd.left;ke=Zd.top;var ed=Zd.bottom,pg=Zd.right,Qc=Zd.width,Va=Zd.height;Ze=Hc.refPointsA;Zd=Ze.left;cf=Ze.top;df=Ze.bottom;Ke=Ze.right;yf=Ze.width;Ze=Ze.height;var gb=Hc.refPointsB,Za=gb.left;Hc=gb.top;var V=gb.bottom;gb=gb.right;pg="left"===R?dh:"right"===R?pg:dh+Qc/2;ed="bottom"===R?ed:"top"===R?ke:ke+Va/2;dh="left"===R?pg-wf:"right"===R?pg+wf:dh+Qc/2;wf="bottom"===R?ed+wf:"top"===R?ed-wf:ke+Va/2;ke="left"===R?gb:"right"===R?Za:Zd+yf/2;Qc="bottom"===
R?Hc:"top"===R?V:cf+Ze/2;!Ha||pc||"right"!==R&&"left"!==R||(pc=10,xd=(ug.dist-(Ec||bc).dist)*("right"===R?-1:1),pg+=xd,dh+=xd);!Ha||wd||"top"!==R&&"bottom"!==R||(wd=10,Se=((v||Ie).dist-ug.dist)*("top"===R?-1:1),ed+=Se,wf+=Se);xa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:$a.transformPoint(Ja.pt("left"===R?Zd:"right"===R?Ke:Zd+yf/2,"bottom"===R?df:"top"===R?cf:cf+Ze/2)),end:$a.transformPoint(Ja.pt(ke,Qc)),fill:Ja.Color.orange,height:Ja.guideWidth,guideType:R,priority:10},{type:"line",
epiMorph:!0,hasFixedPosition:!0,start:$a.transformPoint(Ja.pt(pg,ed)),end:$a.transformPoint(Ja.pt(dh,wf)),fill:Ja.Color.orange,height:Ja.guideWidth,guideType:R,priority:10})}}Ha&&(xd||Se)&&yb.moveBy(Ja.pt(xd,Se));if(nb){xa=xa.filter(function(O){var Ka=O.guideType;O=O.priority;return"h"===Ka?O===pc:"v"===Ka?O===wd:!0});(nb=Ja.cachedGuideLines.get(yb))||Ja.cachedGuideLines.set(yb,nb=[]);for(Ha=0;Ha<xa.length;Ha++)ug=void 0,nb[Ha]?ug=Object.assign(nb[Ha],xa[Ha]):(ug=Ja.morph(xa[Ha]),nb.push(ug)),ug.owner||
Ab.addMorph(ug);nb.slice(Ha).forEach(function(O){return O.remove()});Ja.fun.debounceNamed(yb.id+"-drag-guides-cleanup",1300,function(){var O=Ja.cachedGuideLines.get(yb);O&&O.forEach(function(Ka){return Ka.remove()})})()}}}function X(yb,nb,Ha,R,xa,$a){Ha=void 0===Ha?!0:Ha;R=void 0===R?!0:R;xa=void 0===xa?5:xa;$a=void 0===$a?100:$a;if(Ha||R){var Ab=yb.owner,bc=Ab.world(),Ec=Ab.getGlobalTransform(),pc=yb.owner.submorphs.filter(function(ed){return ed!==yb&&!ed.isEpiMorph&&ed.visible&&ed.reactsToPointer});
Ab=(nb.includes("left")||nb.includes("right")?"x":"")+(nb.includes("top")||nb.includes("bottom")?"y":"");var wd=Ja.findMorphsWithSimilarWidthOrHeight(yb,Ab,pc,xa,$a),xd=-Infinity,Se=-Infinity,v=0,Ie=0,cf=0,df=0,Ze=0,ke=0;Ab=[];Ec.e-=bc.scroll.x;Ec.f-=bc.scroll.y;if(wd){wd=$jscomp.makeIterator(wd);for(var Ke=wd.next();!Ke.done;Ke=wd.next()){Ke=$jscomp.makeIterator(Ke.value);Ke.next();var yf=Ke.next().value;Ke=yf.similarIn;var wf=yf.delta,ug=yf.refPointsA,Zd=yf.refPointsB;yf=xa-wf+($a-yf.minDist);"width"===
Ke?xd<yf&&(xd=yf,nb.includes("left")&&(Ie=-wf),nb.includes("right")&&(v=wf)):Se<yf&&(Se=yf,nb.includes("top")&&(cf=-wf),nb.includes("bottom")&&(df=wf));wf={type:"line",epiMorph:!0,hasFixedPosition:!0,height:Ja.guideWidth,fill:Ja.guideColor,guideType:Ke,priority:yf,start:Ec.transformPoint("width"===Ke?Ja.pt(ug.left,ug.top+ug.height/2):Ja.pt(ug.left+ug.width/2,ug.top)),end:Ec.transformPoint("width"===Ke?Ja.pt(ug.right,ug.top+ug.height/2):Ja.pt(ug.left+ug.width/2,ug.bottom))};Ke=Object.assign({},wf,
{start:Ec.transformPoint("width"===Ke?Ja.pt(Zd.left,Zd.top+Zd.height/2):Ja.pt(Zd.left+Zd.width/2,Zd.top)),end:Ec.transformPoint("width"===Ke?Ja.pt(Zd.right,Zd.top+Zd.height/2):Ja.pt(Zd.left+Zd.width/2,Zd.bottom))});Ab.push(wf,Ke)}}if($a=Ja.findAlignedMorphs(yb,pc,xa,$a,nb,void 0))for($a=$jscomp.makeIterator($a),pc=$a.next();!pc.done;pc=$a.next()){pc=$jscomp.makeIterator(pc.value);pc.next();wd=pc.next().value;pc=wd.vertical;wd=$jscomp.makeIterator(wd.horizontal);for(Ke=wd.next();!Ke.done;Ke=wd.next()){Ke=
Ke.value;Zd=Ke.edgeAVal;var Hc=Ke.refPointsA,dh=Ke.refPointsB;wf=Ke.edgeBVal;ug=Math.ceil(xa-Ke.delta);yf=Math.min(Hc.top,dh.top);Hc=Math.max(Hc.bottom,dh.bottom);Ke.maxDist>xa&&(ug-=xa/2);Ze<ug&&(Ze=ug,nb.includes("left")&&(Ie=-(wf-Zd)),nb.includes("right")&&(v=+(wf-Zd)));Ab.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Ja.guideWidth,start:Ec.transformPoint(Ja.pt(wf,yf)),end:Ec.transformPoint(Ja.pt(wf,Hc)),fill:Ja.guideColor,guideType:"h",priority:ug})}pc=$jscomp.makeIterator(pc);for(wd=
pc.next();!wd.done;wd=pc.next())wd=wd.value,Ke=wd.edgeAVal,yf=wd.refPointsA,Hc=wd.refPointsB,Zd=wd.edgeBVal,wf=Math.ceil(xa-wd.delta),ug=Math.min(yf.left,Hc.left),yf=Math.max(yf.right,Hc.right),wd.maxDist>xa&&(wf-=xa/2),ke<wf&&Math.abs(Zd-Ke)<=xa&&(ke=wf,nb.includes("top")&&(cf=Zd-Ke),nb.includes("bottom")&&(df=Zd-Ke)),Ab.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Ja.guideWidth,start:Ec.transformPoint(Ja.pt(ug,Zd)),end:Ec.transformPoint(Ja.pt(yf,Zd)),fill:Ja.guideColor,guideType:"v",
priority:wf})}R&&(Ie&&(yb.left+=Ie,yb.right-=Ie),cf&&(yb.top+=cf,yb.bottom-=cf),v&&(yb.width+=v),df&&(yb.height+=df));if(Ha){Ab=Ab.filter(function(ed){var pg=ed.guideType;ed=ed.priority;return"width"===pg?ed===xd:"height"===pg?ed===Se:"v"===pg?ed===ke:"h"===pg?ed===Ze:!1});(nb=Ja.cachedGuideLines.get(yb))||Ja.cachedGuideLines.set(yb,nb=[]);for(Ha=0;Ha<Ab.length;Ha++)R=void 0,nb[Ha]?R=Object.assign(nb[Ha],Ab[Ha]):(R=Ja.morph(Ab[Ha]),nb.push(R)),R.owner||bc.addMorph(R);nb.slice(Ha).forEach(function(ed){return ed.remove()});
Ja.fun.debounceNamed(yb.id+"-drag-guides-cleanup",1300,function(){var ed=Ja.cachedGuideLines.get(yb);ed&&ed.forEach(function(pg){return pg.remove()})})()}}}function ha(yb,nb){nb=void 0===nb?!1:nb;var Ha=ra.MorphicEnv.default().world;if(null===yb||void 0===yb)yb=String(yb);if(yb.isMorph)return ra.showRect(yb.world(),yb.globalBounds().translatedBy(Ha.scroll.negated()),nb);if(yb.isPoint)return ra.showRect(Ha,new ra.Rectangle(yb.x-5,yb.y-5,10,10));if(yb.isLine)return ra.showLine(Ha,yb);if(yb.isRectangle)return ra.showRect(Ha,
yb);if("undefined"!==typeof ra.Element&&yb instanceof ra.Element)return ra.showRect(Ha,ra.Rectangle.fromElement(yb));if("number"===typeof yb||"symbol"===typeof yb||"boolean"===typeof yb||"undefined"!==typeof ra.Node&&yb instanceof ra.Node||yb instanceof RegExp)yb=String(yb);"object"===typeof yb&&(yb=ra.obj.inspect(yb,{maxDepth:1}));return"string"===typeof yb&&1===arguments.length?Ha.setStatusMessage(yb):Ha.setStatusMessage(ra.string.formatFromArray(Array.from(arguments)))}function Fa(yb,nb,Ha){Ha=
void 0===Ha?3E3:Ha;var R,xa,$a,Ab,bc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ec){if(1==Ec.nextAddress){if(!(yb&&yb.world()&&nb&&nb.world()))return Ec.return(null);R=yb.owner.worldPoint(yb.center);xa=nb.owner.worldPoint(nb.center);$a=R.lineTo(xa).sampleN(2)[1];Ab={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:ra.Color.red,fill:ra.Color.red,cx:5,cy:5,r:4}]};bc=$world.addMorph(new ra.Path({position:$a,
renderOnGPU:!0,vertices:[ra.pt(0),ra.pt(0)],borderWidth:2,startMarker:Ab,endMarker:Ab,borderColor:ra.Color.red}));return Ec.yield(bc.whenRendered(),2)}if(3!=Ec.nextAddress)return Ec.yield(bc.animate({opacity:1,customTween:function(pc){var wd=bc.center;bc.vertices=[ra.pt(0).interpolate(pc,R.subPt($a)),ra.pt(0).interpolate(pc,xa.subPt($a))];bc.center=wd},duration:400}),3);Ha&&setTimeout(function(){return bc.fadeOut()},Ha);return Ec.return(bc)})}Ma({a:jb,e:Fa,r:Ga,s:ha});var Ja=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
Ja.removeSnapToGuidesOf=Ga;Ja.showAndSnapToGuides=jb;Ja.showAndSnapToResizeGuides=X;Ja.computeRefPoints=function(yb){var nb=yb.x,Ha=yb.y,R=yb.width;yb=yb.height;return{left:nb,top:Ha,hCenter:nb+R/2,vCenter:Ha+yb/2,right:nb+R,bottom:Ha+yb,width:R,height:yb}};Ja.findEdgesInAlignment=function(yb,nb,Ha,R,xa,$a,Ab,bc,Ec,pc){Ha=void 0===Ha?15:Ha;$a=void 0===$a?0:$a;Ab=void 0===Ab?0:Ab;bc=void 0===bc?0:bc;Ec=void 0===Ec?0:Ec;pc=void 0===pc?0:pc;for(var wd=[],xd=[],Se=0;Se<Ja.edges.length;Se++){var v=$jscomp.makeIterator(Ja.edges[Se]),
Ie=v.next().value,cf=v.next().value;v=v.next().value;var df=yb[cf],Ze=nb[v],ke=Math.max(df,Ze)-Math.min(df,Ze);ke>Ha||!(R&&!R.includes(cf)||xa&&!xa.includes(v))&&("vertical"===Ie?wd:xd).push({delta:ke,edgeA:cf,edgeB:v,edgeAVal:df,edgeBVal:Ze,refPointsA:yb,refPointsB:nb,distLeft:$a,distTop:Ab,distRight:bc,distBottom:Ec,maxDist:pc})}return wd.length||xd.length?{vertical:wd,horizontal:xd}:null};Ja.findAlignedMorphs=function(yb,nb,Ha,R,xa,$a){Ha=void 0===Ha?15:Ha;R=void 0===R?Infinity:R;for(var Ab,bc=
Ja.computeRefPoints(yb.bounds()),Ec=0;Ec<nb.length;Ec++){var pc=nb[Ec];if(pc!==yb){var wd=Ja.computeRefPoints(pc.bounds()),xd=Math.max(0,bc.left-wd.right),Se=Math.max(0,wd.left-bc.right),v=Math.max(0,bc.top-wd.bottom),Ie=Math.max(0,wd.top-bc.bottom);Math.max(Ie,v,Se,xd)>R||!(wd=Ja.findEdgesInAlignment(bc,wd,Ha,xa,$a,xd,v,Se,Ie,Math.max(Ie,v,Se,xd)))||(Ab||(Ab=new Map),Ab.set(pc,wd))}}yb=yb.owner;nb=Ja.computeRefPoints(yb.innerBounds());if(Ha=Ja.findEdgesInAlignment(bc,nb,Ha))Ab||(Ab=new Map),Ab.set(yb,
Ha);return Ab};Ja.findMorphsWithSimilarWidthOrHeight=function(yb,nb,Ha,R,xa){R=void 0===R?15:R;xa=void 0===xa?Infinity:xa;for(var $a,Ab=Ja.computeRefPoints(yb.bounds()),bc=0;bc<Ha.length;bc++){var Ec=Ha[bc];if(Ec!==yb){var pc=Ja.computeRefPoints(Ec.bounds()),wd=Math.max(0,Ab.left-pc.right),xd=Math.max(0,pc.left-Ab.right),Se=Math.max(0,Ab.top-pc.bottom),v=Math.max(0,pc.top-Ab.bottom),Ie=Math.min(v,Se,xd,wd),cf=Math.max(v,Se,xd,wd);if(!(Math.max(v,Se,xd,wd)>xa)){xd=Ab;wd=xd.width;xd=xd.height;v=pc;
Se=v.width;v=v.height;var df=Se-wd,Ze=v-xd;("x"===nb||"xy"===nb)&&Math.abs(df)<=R&&($a||($a=new Map),$a.set(Ec,{similarIn:"width",minDist:Ie,maxDist:cf,refPointsA:Ab,refPointsB:pc,valA:wd,valB:Se,delta:df}));("y"===nb||"xy"===nb)&&Math.abs(Ze)<=R&&($a||($a=new Map),$a.set(Ec,{similarIn:"height",minDist:Ie,maxDist:cf,refPointsA:Ab,refPointsB:pc,valA:xd,valB:v,delta:Ze}))}}}return $a};Ja.closest=function(yb,nb,Ha,R,xa,$a,Ab,bc){bc=void 0===bc?!0:bc;var Ec=R[yb],pc=xa[yb],wd=$a[yb];nb=Ab[yb];for(var xd,
Se,v,Ie,cf=0;cf<xa.length;cf++)yb===cf||Ec<xa[cf]||xd&&xa[xd.index]>=xa[cf]||bc&&Ab[yb]<$a[cf]||$a[yb]>Ab[cf]||(xd={index:cf,dist:Ec-xa[cf],refPointsA:Ha[yb],refPointsB:Ha[cf]});for(Ec=0;Ec<R.length;Ec++)yb===Ec||pc>R[Ec]||Se&&R[Se.index]<=R[Ec]||bc&&Ab[yb]<$a[Ec]||$a[yb]>Ab[Ec]||(Se={index:Ec,dist:R[Ec]-pc,refPointsA:Ha[yb],refPointsB:Ha[Ec]});for(pc=0;pc<Ab.length;pc++)yb===pc||wd<Ab[pc]||v&&Ab[v.index]>=Ab[pc]||bc&&R[yb]>xa[pc]||xa[yb]<R[pc]||(v={index:pc,dist:wd-Ab[pc],refPointsA:Ha[yb],refPointsB:Ha[pc]});
for(Ab=0;Ab<$a.length;Ab++)yb===Ab||nb>$a[Ab]||Ie&&$a[Ie.index]<=$a[Ab]||bc&&R[yb]>xa[Ab]||xa[yb]<R[Ab]||(Ie={index:Ab,dist:$a[Ab]-nb,refPointsA:Ha[yb],refPointsB:Ha[Ab]});return{l:xd,r:Se,t:v,b:Ie}};Ja.computeClosestMorphs=function(yb){for(var nb=[],Ha=[],R=[],xa=[],$a=[],Ab=[],bc=0;bc<yb.length;bc++){var Ec=Ja.computeRefPoints(yb[bc].bounds());$a.push(Ec);var pc=Ec.right,wd=Ec.top,xd=Ec.bottom;nb.push(Ec.left);Ha.push(pc);R.push(wd);xa.push(xd)}for(bc=0;bc<yb.length;bc++)Ab.push(Ja.closest(bc,yb,
$a,nb,Ha,R,xa));return Ab};Ja.fun=rb;Ja.pt=Db;Ja.Color=hc;Ja.morph=Kb;Ja.cachedGuideLines=new WeakMap;Ja.guideWidth=1;Ja.guideColor=Ja.Color.orange.lighter();Ja.removeSnapToGuidesOf=Ga;Ja.removeSnapToGuidesOf=Ga;Ja.showAndSnapToGuides=jb;Ja.showAndSnapToGuides=jb;Ja.showAndSnapToResizeGuides=X;Ja.showAndSnapToResizeGuides=X;Ja.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom",
"vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];lively.FreezerRuntime.recorderFor("lively.collab/comments/commentMorph.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/commentIndicator.js");
lively.FreezerRuntime.recorderFor("lively.collab/comments/commentBrowser.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/comment.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/badge.js");var Ca=lively.FreezerRuntime.recorderFor("lively.collab/index.js");Ca.CommentGroupMorph=void 0;Ca.CommentGroupMorph=void 0;Ca.CommentMorph=void 0;Ca.CommentMorph=void 0;Ca.CommentIndicator=void 0;Ca.CommentIndicator=void 0;Ca.CommentBrowser=void 0;Ca.CommentBrowser=void 0;Ca.Comment=
void 0;Ca.Comment=void 0;Ca.Badge=void 0;Ca.Badge=void 0;var ra=lively.FreezerRuntime.recorderFor("lively.halos/markers.js");ra.show=ha;ra.showRect=function(yb,nb,Ha){var R=ra.BoundsMarker.highlightBounds(nb);return Ha?ra.showInLoop(yb,R,nb):ra.showThenHide(yb,R)};ra.showInLoop=function(yb,nb,Ha){var R;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xa){switch(xa.nextAddress){case 1:return ra.showThenHide(yb,nb,!1),xa.yield(ra.promise.delay(300),2);case 2:R=!1,ra.once(yb,"onMouseDown",
function(){return R=!0}),ra.once(yb,"hideMarkers",function(){return R=!0});case 3:if(R){xa.jumpTo(4);break}return xa.yield(nb.retract(Ha),3);case 4:nb.fadeOut(2E3),xa.jumpToEnd()}})};ra.showThenHide=function(yb,nb,Ha){Ha=void 0===Ha?3:Ha;if(yb){var R=Array.isArray(nb)?nb:[nb];R.forEach(function(xa){return yb.addMorph(xa)});Ha&&setTimeout(function(){return R.forEach(function(xa){return xa.fadeOut(2E3)})},1E3*Ha);return nb}};ra.showLine=function(yb,nb,Ha){Ha=void 0===Ha?3E3:Ha;var R=nb.start;nb=nb.end.subPt(R);
var xa=yb.addMorph({position:R,rotation:nb.theta(),border:{width:1,color:ra.Color.red},width:nb.fastR(),height:0});Ha&&setTimeout(function(){return xa.fadeOut()},Ha);return xa};ra.showConnector=Fa;ra.obj=id;ra.promise=Zc;ra.string=yd;ra.pt=Db;ra.Color=hc;ra.Rectangle=Kc;ra.rect=sc;ra.morph=Kb;ra.easings=bd;ra.Path=hd;ra.Icon=se;ra.Morph=xe;ra.MorphicEnv=ne;ra.connect=Rc;ra.once=Pd;ra.disconnect=Hb;ra.show=ha;ra.show=ha;(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),
Ha=nb.hasOwnProperty("BoundsMarker")&&"function"===typeof nb.BoundsMarker?nb.BoundsMarker:nb.BoundsMarker=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:Symbol.for("lively-instance-initialize"),value:function(){Gc._get(Object.getPrototypeOf(Ha.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:ra.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",
get:function(){return!0}},{key:"markerLength",value:function(R){R=R.insetBy(-2);R=Math.min(R.width,R.height);return Math.max(4,Math.floor(10>R/10?R/2-5:R/10))}},{key:"createMarkerEdge",value:function(){return ra.morph({fill:ra.Color.red,reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var R=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),xa=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),$a=this.topRightH||(this.topRightH=
this.addMorph(this.createMarkerEdge())),Ab=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),bc=this.bottomRightH||(this.bottomRightH=this.addMorph(this.createMarkerEdge())),Ec=this.bottomRightV||(this.bottomRightV=this.addMorph(this.createMarkerEdge())),pc=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),wd=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[R,xa,$a,Ab,bc,Ec,pc,wd]}},{key:"alignWithMorph",value:function(R){return this.alignWithBounds(R.globalBounds().translatedBy($world.scroll.negated()))}},
{key:"alignWithBounds",value:function(R){this.alignWithRect(R.insetBy(-20));return this.alignWithRect(R,!0)}},{key:"alignWithRect",value:function(R,xa){var $a=this.ensureMarkerCorners(),Ab=this.markerLength(R),bc=[R.topLeft().addXY(0,0).extent(ra.pt(Ab,5)),R.topLeft().addXY(0,0).extent(ra.pt(5,Ab)),R.topRight().addXY(-Ab,0).extent(ra.pt(Ab,5)),R.topRight().addXY(-5,0).extent(ra.pt(5,Ab)),R.bottomRight().addXY(-5,-Ab).extent(ra.pt(5,Ab)),R.bottomRight().addXY(-Ab,-5).extent(ra.pt(Ab,5)),R.bottomLeft().addXY(0,
-5).extent(ra.pt(Ab,5)),R.bottomLeft().addXY(0,-Ab).extent(ra.pt(5,Ab))];$a.forEach(function(Ec,pc){return Ec.setBounds(bc[pc])});xa&&(this.adjustOrigin(R.center()),this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(R){var xa=this,$a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ab){if(1==Ab.nextAddress)return Ab.yield(xa.animate({scale:Math.max(30/R.width,1.05)}),2);$a=xa.center;return Ab.yield(xa.animate({center:$a,
scale:1,duration:300,easing:ra.easings.inOutExpo}),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(R){return(new this).alignWithMorph(R)}},{key:"highlightBounds",value:function(R){return(new this).alignWithBounds(R)}}],nb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:2323,end:6E3})})(ra.Morph);Ca=Ma("S",function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Ha=nb.hasOwnProperty("StatusMessage")&&"function"===typeof nb.StatusMessage?nb.StatusMessage:nb.StatusMessage=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"relayout",value:function(){this.title=ra.string.truncate(this.message,(this.width/15).toFixed(),
"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},{key:"setMessage",value:function(R,xa){this.message=R;this.color=xa}},{key:"slideTo",value:function(R){var xa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function($a){if(1==$a.nextAddress)return xa.sliding=xa.animate({position:R,duration:500}),$a.yield(xa.sliding,2);xa.sliding=!1;$a.jumpToEnd()})}},{key:"expand",value:function(){var R=this,xa,$a,Ab,bc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ec){if(1==
Ec.nextAddress)return R.expandable?R.sliding?Ec.yield(R.sliding,2):Ec.jumpTo(2):Ec.return();xa=R.world();if(!xa||R.isMaximized)return Ec.return();R.isMaximized=!0;R.stayOpen=!0;$a=R.getSubmorphNamed("message text");$a.lineWrapping=!1;Object.assign($a,{clipMode:"auto",fixedWidth:!0,selectable:!0});R.expandedContent&&($a.value=R.expandedContent);$a.fit();Ab=$a.textBounds().extent();bc=xa.visibleBounds();Ab.y>bc.extent().y&&(Ab.y=bc.extent().y-20);Ab.x>bc.extent().x&&(Ab.x=bc.extent().x-20);Ab=R.extent.maxPt(Ab);
R.animate({extent:Ab,center:bc.center(),duration:200});R.relayout();R.focus();Ec.jumpToEnd()})}},{key:"fit",value:function(){var R=this.getSubmorphNamed("message text");R&&(this.extent=ra.pt(100,35).maxPt(R.textBounds().extent()),this.relayout())}},{key:"focus",value:function(){var R=this.getSubmorphNamed("message text");R&&R.focus()}},{key:"onMouseUp",value:function(R){this.expand()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:ra.pt(200,
100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(R){this.setProperty("message",R);var xa=this.getSubmorphNamed("message text");if(xa){xa.value=R;var $a=xa.documentEndPosition;$a.row>this.maxLines&&(xa.replace({start:{row:this.maxLines,
column:0},end:$a},"...\n"),this.expandedContent||(this.expandedContent=R));$a=xa.documentEndPosition;0!==$a.column&&xa.insertText("\n",$a)}}},title:{isStyleProp:!0,derived:!0,set:function(R){this.getSubmorphNamed("message title").value=R},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(R){this.get("message icon").fontColor=R;this.get("message icon")._parametrizedProps&&
(this.get("message icon")._parametrizedProps.fontColor=R)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[{name:"message icon",type:"label",value:ra.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},{name:"message title",type:"label"},{name:"close button",type:"button"}];ra.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");ra.connect(this,"extent",this,"relayout")}}}}}],nb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:6044,end:10373})}(ra.Morph));ra.StatusMessage=Ca;ra.StatusMessage=Ca;ra.StatusMessage=Ca;var tb=Ma("b",function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Ha=nb.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof nb.StatusMessageForMorph?nb.StatusMessageForMorph:nb.StatusMessageForMorph=function(R){R&&R[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"alignAtBottomOf",value:function(R){var xa=this.world();xa&&(this.bringToFront(),this.fit(),this.width=R.bounds().width,this.relayout(),R.world()&&(this.position=R.owner.worldPoint(R.bounds().bottomLeft())),R=xa.visibleBounds(),R=this.bounds().top()+this.height-R.bottom(),0<R&&this.moveBy(ra.pt(0,-R)))}},{key:"onMouseUp",value:function(R){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessageForMorph"}},
{key:"properties",get:function(){return{slidable:{defaultValue:!1},renderOnGPU:{defaultValue:!0},removeOnTargetMorphChange:{defaultValue:!0},targetMorph:{defaultValue:null,get:function(){var R=this.getProperty("targetMorph");return R&&$world.getMorphWithId(R)},set:function(R){this.setProperty("targetMorph",R?R.id:null);this.alignAtBottomOf(R)}},expandable:{after:["submorphs"],set:function(R){this.setProperty("expandable",R);if(R){var xa=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",
type:"button"});ra.connect(xa,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&(this.getSubmorphNamed("expand button").remove(),ra.disconnect(xa,"fire",this,"expand"))}}}}}],nb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10598,end:12466})}(ra.StatusMessage));ra.StatusMessageForMorph=
tb;ra.StatusMessageForMorph=tb;ra.StatusMessageForMorph=tb;ra.showConnector=Fa;ra.showConnector=Fa;var Na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");Na.Morph=xe;Na.Label=ud;Na.HorizontalLayout=Vc;Na.Path=hd;Na.Text=Id;Na.GridLayout=ie;Na.morph=Kb;Na.Icon=se;Na.createMorphSnapshot=Fb;Na.Color=hc;Na.pt=Db;Na.rect=sc;Na.Rectangle=Kc;Na.LinearGradient=Ac;Na.obj=id;Na.PropertyPath=$c;Na.promise=Zc;Na.properties=Bc;Na.num=vd;Na.arr=pb;Na.connect=Rc;Na.signal=lb;Na.disconnect=Hb;Na.disconnectAll=
Zb;Na.once=Pd;Na.showAndSnapToGuides=jb;Na.showAndSnapToResizeGuides=X;Na.removeSnapToGuidesOf=Ga;Na.CommentBrowser=void 0;Na.show=ha;Na.haloBlue=Na.Color.rgb(23,160,251);Na.componentAccent=Na.Color.magenta;Na.derivedAccent=Na.Color.purple;var lc=function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("Halo")&&"function"===typeof nb.Halo?nb.Halo:nb.Halo=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Gc(Ha,yb,[{key:"relayout",value:function(){this.alignWithTarget()}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(R){R.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var R=this;setTimeout(function(){R.target.owner||R.remove()})}},{key:"initLayout",
value:function(){var R=this.layout=new Na.GridLayout({autoAssign:!1,fitToCell:!1,columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,
null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name","name","name","name","name",null]]});R.col(1).row(7).group.align="center";R.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),
this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||this.addMorphBack(Na.morph({name:"border-box",halosEnabled:!1,fill:Na.Color.transparent,borderColor:this.target.isComponent?Na.componentAccent:Na.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",
set:function(R){this.state||(this.state={});this.state.pointerId=R}},{key:"prepareTarget",value:function(R){if(!Na.obj.isArray(R))return R;if(1>=R.length)return R[0];R=R[0].world().addMorph(new Na.MultiSelectionTarget({selectedMorphs:R}));R.alignWithSelection();R.modifiesSelectedMorphs=!0;return R}},{key:"refocus",value:function(R){this.target=R;this.alignWithTarget()}},{key:"alignWithTarget",value:function(R){var xa=this;if((!R||["extent","position","scale","rotation"].includes(R.prop))&&!this.active&&
this.target){R=this.target.world()||$world;var $a=this.maskBounds,Ab=this.target.globalBounds(),bc=Ab.insetBy(-36).intersection($a);$a=Ab.intersection($a);this.layout&&this.layout.disable();this.setBounds(bc.translatedBy(R.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,$a));this.state.activeButton?(this.buttonControls.forEach(function(Ec){return Ec.visible=!1}),this.ensureResizeHandles().forEach(function(Ec){return Ec.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):
(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(Ec){return Ec.visible=!0}),this.buttonControls.filter(function(Ec){return xa.activeItems.includes("*")?!0:xa.activeItems.includes(Ec.name)}).forEach(function(Ec){Ec.visible=!0}),this.propertyDisplay.disable());this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(Ec){return Ec.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();this.layout&&this.layout.enable();return this}}},
{key:"detachFromTarget",value:function(){var R=this.target;R&&(Na.disconnect(R,"onChange",this,"alignWithTarget"),Na.disconnect(R,"onOwnerChanged",this,"removeIfDetached"),R instanceof Na.MultiSelectionTarget?(R.modifiesSelectedMorphs=!1,R.remove()):"function"===typeof R.detachedHalo&&R.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();Gc._get(Object.getPrototypeOf(Ha.prototype),"remove",this).call(this)}},{key:"propertyDisplay",get:function(){return Na.HaloPropertyDisplay.for(this)}},
{key:"nameHalo",value:function(){return Na.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return Na.CloseHaloItem.for(this)}},{key:"grabHalo",value:function(){return Na.GrabHaloItem.for(this)}},{key:"dragHalo",value:function(){return Na.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return Na.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return Na.InspectHaloItem.for(this)}},{key:"editHalo",value:function(){return Na.EditHaloItem.for(this)}},{key:"rotateHalo",
value:function(){return Na.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return Na.CopyHaloItem.for(this)}},{key:"originHalo",value:function(){return Na.OriginHaloItem.for(this)}},{key:"componentHalo",value:function(){return Na.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(R){return R.isHaloItem&&!R.isResizeHandle})}},{key:"addMorphToSelection",value:function(R){var xa=this,$a,Ab;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bc){if(1==
bc.nextAddress){$a=xa.world();Ab=xa.target.isMorphSelection?xa.target.selectedMorphs:[xa.target];if(Ab.includes(R))return bc.return();xa.remove();return bc.yield($a.showHaloForSelection([].concat($jscomp.arrayFromIterable(Ab),[R]),xa.state.pointerId),2)}return bc.return(bc.yieldResult)})}},{key:"removeMorphFromSelection",value:function(R){var xa=this,$a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ab){if(1==Ab.nextAddress){$a=xa.world();xa.remove();if(!xa.target.isMorphSelection)return Ab.jumpTo(0);
Na.arr.remove(xa.target.selectedMorphs,R);return Ab.yield($a.showHaloForSelection(xa.target.selectedMorphs,xa.state.pointerId),3)}return Ab.return(Ab.yieldResult)})}},{key:"isAlreadySelected",value:function(R){return this.target==R||this.target.isMorphSelection&&this.target.selectsMorph(R)}},{key:"updateBoundsFor",value:function(R,xa,$a,Ab,bc){var Ec={topLeft:Na.rect(-1,-1,1,1),topCenter:xa?Na.rect(1,-1,0,1):Na.rect(0,-1,0,1),topRight:Na.rect(0,-1,1,1),rightCenter:xa?Na.rect(0,1,1,1):Na.rect(0,0,
1,0),bottomRight:Na.rect(0,0,1,1),bottomCenter:xa?Na.rect(1,0,0,1):Na.rect(0,0,0,1),bottomLeft:Na.rect(-1,0,1,1),leftCenter:xa?Na.rect(-1,1,1,0):Na.rect(-1,0,1,0)}[R];bc=Ec.x;var pc=Ec.y,wd=Ec.width;Ec=Ec.height;$a=xa?this.proportionalDelta(R,$a,Ab):$a;R=Na.rect($a.x*bc,$a.y*pc,$a.x*wd,$a.y*Ec);this.active=!0;this.target.setBounds(Ab.insetByRect(R));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());this.active=!1;this.alignWithTarget();this.world().withTopBarDo(function(xd){if(xd.activeSideBars.includes("Styling Palette"))xd.stylingPalette.onHierarchyChange()})}},
{key:"proportionalDelta",value:function(R,xa,$a){var Ab=$a.width,bc=$a.height;$a={topLeft:Na.pt(-1,-1),topCenter:Na.pt(0,-1),topRight:Na.pt(1,-1),leftCenter:Na.pt(-1,0),rightCenter:Na.pt(1,0),bottomLeft:Na.pt(-1,1),bottomCenter:Na.pt(0,1),bottomRight:Na.pt(1,1)};var Ec=Ab/Math.max(Ab,bc),pc=bc/Math.max(bc,Ab);Ab={topLeft:Na.pt(-Ec,-pc),topCenter:Na.pt(1/(2*bc/Ab),-1),topRight:Na.pt(Ec,-pc),leftCenter:Na.pt(-1,bc/(2*Ab)),rightCenter:Na.pt(1,bc/(3*Ab)),bottomLeft:Na.pt(-Ec,pc),bottomCenter:Na.pt(1/
(2*bc/Ab),1),bottomRight:Na.pt(Ec,pc)};$a=$a[R];return Ab[R].scaleBy($a.dotProduct(xa)/$a.dotProduct($a))}},{key:"ensureResizeHandles",value:function(){return Na.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(R){R=R.valueForPropertyDisplay();"undefined"!==typeof R?this.propertyDisplay.displayProperty(R):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(R,xa){if(!Na.rect(0).sides.includes(xa)){var $a=this.getSubmorphNamed("diagonal");if(R){R=this.target.globalBounds();
var Ab=R.width,bc=R.height;R=this.localize(Na.pt(R.x,R.y)).extent(Na.pt(Ab,bc)).scaleRectTo(this.innerBounds());Ab={topLeft:[Na.pt(Ab,bc),Na.pt(0,0)],topRight:[Na.pt(0,bc),Na.pt(Ab,0)],bottomRight:[Na.pt(0,0),Na.pt(Ab,bc)],bottomLeft:[Na.pt(Ab,0),Na.pt(0,bc)]};$a?$a.setBounds(R):($a=$jscomp.makeIterator(Ab[xa]),xa=$a.next().value,$a=$a.next().value,Ab=new Na.LinearGradient({stops:[{offset:0,color:Na.Color.orange.withA(0)},{offset:.2,color:Na.Color.orange},{offset:.8,color:Na.Color.orange},{offset:1,
color:Na.Color.orange.withA(0)}]}),$a=this.addMorphBack(new Na.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:R,borderColor:Ab,vertices:[xa,$a]})),$a.setBounds(R),$a.animate({opacity:1,duration:500}))}else $a&&$a.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(R,xa){var $a=this.getSubmorphNamed("rotationIndicator");R&&xa?(R=this.getSubmorphNamed("origin").center,$a=$a||this.addMorphBack(new Na.Path({name:"rotationIndicator",borderColor:Na.haloBlue,borderWidth:1,
vertices:[]})),$a.setBounds(xa.bounds().union(this.innerBounds())),$a.vertices=[$a.localizePointFrom(R,this),$a.localizePointFrom(xa.center,this)]):$a&&$a.remove()}},{key:"toggleMorphHighlighter",value:function(R,xa,$a){$a=void 0===$a?!1:$a;if(xa)if(xa.onHaloGrabover)xa.onHaloGrabover(R);else $a=Na.MorphHighlighter.for(this,xa,$a),R&&xa&&xa!=this.world()?$a&&$a.show(xa):$a&&$a.deactivate()}},{key:"onMouseDown",value:function(R){var xa=this,$a=R.state.clickedOnMorph;if(!R.isCommandKey()&&$a==this.borderBox){if(2==
R.state.clickCount&&this.target.isText){var Ab=this.target.readOnly;this.target.readOnly=!1;this.target.focus();this.target.cursorPosition=this.target.textPositionFromPoint(R.positionIn(this.target));var bc=this.world(),Ec=this.target,pc=this.topBar,wd=function(Se){pc.stylingPalette&&pc.stylingPalette.fullContainsWorldPoint(bc.firstHand.position)?(Ec.whenRendered().then(function(){Na.once(Ec,"onBlur",wd)}),Na.once(Ec,"onBlur",wd)):(pc.setEditMode("Halo",!0),Ec.readOnly=Ab,Ec.collapseSelection(),pc.showHaloFor(Ec))};
this.target.whenRendered().then(function(){Na.once(Ec,"onBlur",wd)});pc.setEditMode("Hand",!0);this.remove();return}return Na.promise.delay(200).then(function(){2!=R.state.clickCount&&xa.remove()})}if(R.isShiftDown()&&R.isCommandKey())$a=this.target.isMorphSelection?this.target.morphBeneath(R.position):this.morphBeneath(R.position),this.isAlreadySelected($a)?this.removeMorphFromSelection($a):this.addMorphToSelection($a);else{if($a==this.borderBox&&R.isCommandKey()){var xd=R.world.morphsContainingPoint(R.position).filter(function(Se){return Se.halosEnabled});
(xd=xd.slice(xd.indexOf(this.target)+1)[0]||xd[0]||R.world)&&R.world.showHaloFor(xd,R.domEvt.pointerId);this.remove()}$a==this&&R.isCommandKey()&&(xd=this.morphBeneath(R.position),R.world.showHaloFor(xd,R.domEvt.pointerId));$a==this&&Na.promise.delay(500).then(function(){xa.remove()})}}},{key:"onContextMenu",value:function(R){var xa=this;Promise.resolve($world.defaultMenuItems(this.target)).then(function($a){return xa.target.openMenu($a,R)}).catch(function($a){return $world.logError($a)})}},{key:"onKeyUp",
value:function(R){this.changingName||this.buttonControls.map(function(xa){return xa.onKeyUp(R)})}},{key:"getMesh",value:function(R,xa){var $a=R.x;R=R.y;xa=void 0===xa?Na.pt(0,0):xa;var Ab=this.world().visibleBounds(),bc=Ab.height;Ab=Ab.width;var Ec={borderStyle:"dotted",borderWidth:2,borderColor:Na.Color.orange};Ec=this.get("mesh")||this.addMorph(new Na.Morph({name:"mesh",styleClasses:["halo-mesh"],extent:Na.pt(Ab,bc),fill:null,submorphs:[new Na.Path(Object.assign({name:"vertical"},Ec)),new Na.Path(Object.assign({name:"horizontal"},
Ec))]}));Ec.globalPosition=xa;Ec.getSubmorphNamed("vertical").vertices=[Na.pt($a,0).subPt(xa),Na.pt($a,bc).subPt(xa)];Ec.getSubmorphNamed("horizontal").vertices=[Na.pt(0,R).subPt(xa),Na.pt(Ab,R).subPt(xa)];return Ec}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:Na.Color.transparent},resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},acceptsDrops:{defaultValue:!1},
maskBounds:{initialize:function(){this.maskBounds=$world.visibleBounds()},set:function(R){this.setProperty("maskBounds",R);this.relayout()}},activeItems:{derived:!0,defaultValue:["*"],set:function(R){this.setProperty("activeItems",R);this.buttonControls.forEach(function(xa){return xa.visible=R.includes(xa.name)})}},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,
get:function(){return 40>this.target.bounds().extent().dist(Na.pt(0))}},topBar:{serialize:!1,get:function(){return this.getProperty("topBar")||this.get("lively top bar")}},target:{get:function(){return this.state?this.state.target:null},set:function(R){this.state||(this.state={});var xa=!!this.state.target;this.detachFromTarget();R=this.prepareTarget(R);this.state.target=R;xa&&this.alignWithTarget();Na.connect(R,"onChange",this,"alignWithTarget");Na.connect(R,"onOwnerChanged",this,"removeIfDetached")}}}}}],
nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:975,end:19579})}(Na.Morph);lc=Na.Halo;var kd=Ma("H",lc);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof nb.HaloPropertyDisplay?nb.HaloPropertyDisplay:
nb.HaloPropertyDisplay=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},{key:"displayProperty",value:function(R){var xa=this.halo.state.activeButton;R=String(R);this.visible=!0;this.textString=R;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(xa.bounds())&&
(this.position=Na.pt(xa.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},{key:"defaultPosition",get:function(){return Na.pt(25,0)}},{key:"for",value:function(R){return R.getSubmorphNamed(this.morphName)||R.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},
fill:{defaultValue:Na.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:Na.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:Na.Color.white},position:{defaultValue:this.defaultPosition}}}}],nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:19769,end:21107})})(Na.Label);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof nb.MultiSelectionTarget?nb.MultiSelectionTarget:nb.MultiSelectionTarget=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},
{key:"selectsMorph",value:function(R){return this.selectedMorphs.includes(R)}},{key:"alignWithSelection",value:function(){var R=this.selectedMorphs.map(function(xa){return xa.globalBounds()}).reduce(function(xa,$a){return xa.union($a)});this.setBounds(R)}},{key:"onGrab",value:function(R){this.grabbingHand=R.hand;this.selectionGrabbed=!0;R.hand.grab(this.selectedMorphs);Na.once(R.hand,"dropMorphsOn",this,"onGrabEnd");Na.connect(R.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=
!1;Na.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(R){var xa=R.value.subPt(R.prevValue);this.selectedMorphs.forEach(function($a){return $a.resizeBy(xa)})}},{key:"updatePosition",value:function(R){if(!this.selectionGrabbed){var xa=R.value.subPt(R.prevValue);this.selectedMorphs.forEach(function($a){return $a.moveBy(xa)})}}},{key:"updateRotation",value:function(R){var xa=this,$a=R.value-R.prevValue;this.selectedMorphs.forEach(function(Ab){var bc=Ab.origin;Ab.adjustOrigin(Ab.localize(xa.worldPoint(Na.pt(0,
0))));Ab.rotation+=$a;Ab.adjustOrigin(bc)})}},{key:"updateScale",value:function(R){var xa=this,$a=R.value-R.prevValue;this.selectedMorphs.forEach(function(Ab){var bc=Ab.origin;Ab.adjustOrigin(Ab.localize(xa.worldPoint(Na.pt(0,0))));Ab.scale+=$a;Ab.adjustOrigin(bc)})}},{key:"onChange",value:function(R){Gc._get(Object.getPrototypeOf(Ha.prototype),"onChange",this).call(this,R);if(this.modifiesSelectedMorphs){switch(R.prop){case "extent":this.updateExtent(R);break;case "scale":this.updateScale(R);break;
case "position":this.updatePosition(R);break;case "rotation":this.updateRotation(R)}return R}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]},halosEnabled:{defaultValue:!1}}}}],nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21175,end:23446})})(Na.Morph);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("HaloItem")&&"function"===typeof nb.HaloItem?nb.HaloItem:nb.HaloItem=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},
{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloItem"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:Na.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:Na.pt(24,24)},halo:{},acceptsDrops:{defaultValue:!1}}}},
{key:"for",value:function(R){return R.getSubmorphNamed(this.morphName)||R.addMorph(new this({halo:R,name:this.morphName}))}}],nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:23610,end:24328})})(Na.Morph);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("NameHolder")&&
"function"===typeof nb.NameHolder?nb.NameHolder:nb.NameHolder=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"onHoverIn",value:function(R){this.highlightOnHover&&this.nameHolder.active&&(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=Na.Color.orange)}},{key:"onHoverOut",value:function(R){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=
Na.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(R){"Enter"==R.keyCombo?(this.accept(),this.halo.focus(),R.stop()):Gc._get(Object.getPrototypeOf(Ha.prototype),"onKeyDown",this).call(this,R)}},{key:"onMouseUp",value:function(){Na.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(R){this.nameHolder.fontColor=Na.Color.white;this.halo.toggleMorphHighlighter(!1,
this.target)}},{key:"onKeyUp",value:function(R){R=this.nameHolder.textString;var xa=this.target.owner;this.validName=!xa||!xa.getSubmorphNamed(R)||this.target.name==R;Na.signal(this,"valid",[this.validName,R])}},{key:"update",value:function(){var R=this;this.nameHolder.textString!==this.target.name&&(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return R.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},
{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(R){if(!this.forceUniqueName||this.validName)this.target.name=R,Na.signal(this,"active",[!1,this]),Na.CommentBrowser.updateName(this.target)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},
fill:{defaultValue:Na.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new Na.HorizontalLayout({resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new Na.Text({fill:Na.Color.transparent,fontColor:Na.Color.white,fontWeight:"bold",active:!0}));Na.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:24363,end:27001})})(Na.Morph);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("NameHaloItem")&&"function"===typeof nb.NameHaloItem?nb.NameHaloItem:nb.NameHaloItem=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,
[{key:Symbol.for("lively-instance-initialize"),value:function(R){Gc._get(Object.getPrototypeOf(Ha.prototype),Symbol.for("lively-instance-initialize"),this).call(this,R);this.initComponentLink();this.initNameHolders();this.validityIndicator=Na.Icon.makeLabel("check",{fontColor:Na.Color.green,fontSize:15,padding:Na.rect(4,6,4,0)});this.fill=this.halo.target.isComponent?Na.componentAccent:Na.haloBlue;this.alignInHalo()}},{key:"initComponentLink",value:function(){var R=this,xa=this.halo.target;if(xa&&
!xa.isMorphSelection&&xa.master){var $a=xa.master.determineMaster(xa),Ab=$a&&!!$a.world(),bc=$a?xa.master.getWorldUrlFor($a):"this project";xa=this.addMorph(Na.Icon.makeLabel(bc?"external-link-alt":"exclamation-triangle",{nativeCursor:"pointer",fontColor:Na.Color.white,padding:Na.rect(8,0,-8,0),name:"master link",tooltip:"Located in "+bc}));bc&&Na.connect(xa,"onMouseDown",function(){Ab?R.showLocalMaster($a):window.open(bc)})}}},{key:"showLocalMaster",value:function(R){var xa;if(xa=R.getWindow())xa.activate(),
xa.minimized&&(xa.minimized=!1);R.show()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(R){return{target:R,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var R=this;this.nameHolders=this.targets().map(function(xa){xa=new Na.NameHolder({halo:R.halo,highlightOnHover:xa.highlightOnHover,target:xa.target});Na.connect(xa,"active",R,"toggleActive");
Na.connect(xa,"valid",R,"toggleNameValid");return xa});this.submorphs=[].concat($jscomp.arrayFromIterable(this.submorphs),$jscomp.arrayFromIterable(Na.arr.interpose(this.nameHolders,{extent:Na.pt(1,28),fill:Na.Color.black.withA(.4)})))}},{key:"toggleActive",value:function(R){var xa=$jscomp.makeIterator(R);R=xa.next().value;var $a=xa.next().value;if(this.halo.changingName!==R){this.halo.changingName=R;if(xa=this.get("master link"))xa.visible=xa.isLayoutable=!R;R?(this.nameHolders.forEach(function(Ab){return Ab!=
$a&&Ab.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),this.fill=Na.Color.darkGray,setTimeout(function(){return $a.nameHolder.selectAll()})):(this.fill=Na.haloBlue,this.nameHolders.forEach(function(Ab){return Ab!=$a&&Ab.activate()}),this.borderWidth=0,this.validityIndicator.remove());this.alignInHalo()}}},{key:"toggleNameValid",value:function(R){var xa=$jscomp.makeIterator(R);R=xa.next().value;xa=xa.next().value;(this.validName=R)?(this.conflictingMorph=null,this.borderColor=
Na.Color.green,this.validityIndicator.nativeCursor="auto",this.validityIndicator.fontColor=Na.Color.green,Na.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(xa),this.borderColor=Na.Color.red,this.validityIndicator.fontColor=Na.Color.red,this.validityIndicator.nativeCursor="pointer",Na.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){Na.arr.zip(this.targets(),this.nameHolders).map(function(xa){var $a=$jscomp.makeIterator(xa);
xa=$a.next().value.target;$a=$a.next().value;$a.target=xa;$a.update()});var R=this.halo.innerBounds().bottomCenter().addPt(Na.pt(0,2));this.topCenter=Na.pt(Math.max(R.x,30),Math.max(R.y,80))}},{key:"onMouseDown",value:function(R){var xa=this,$a=this.conflictingMorph;$a&&(this.halo.toggleMorphHighlighter(!0,$a),setTimeout(function(){return xa.halo.toggleMorphHighlighter(!1,$a)},1E3))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},
{key:"properties",get:function(){return{borderRadius:{defaultValue:4},fill:{defaultValue:Na.haloBlue},borderColor:{defaultValue:Na.Color.green},layout:{initialize:function(){this.layout=new Na.HorizontalLayout({resizeContainer:!0,spacing:0,align:"center",orderByIndex:!0})}}}}}],nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:27003,end:31470})})(Na.HaloItem);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("CloseHaloItem")&&"function"===typeof nb.CloseHaloItem?nb.CloseHaloItem:nb.CloseHaloItem=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"update",value:function(){var R=this.halo,xa=R.target.owner;xa.undoStart("close-halo");R.target.selectedMorphs?
R.target.selectedMorphs.forEach(function($a){return $a.abandon()}):R.target.abandon();xa.undoStop("close-halo");R.remove()}},{key:"onMouseDown",value:function(R){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{targetIsComponent:{derived:!0,get:function(){return this.halo.target.isComponent}},styleClasses:{after:["halo"],initialize:function(){this.styleClasses=["fas",
this.targetIsComponent?"fa-eye-slash":"fa-trash"]}},draggable:{defaultValue:!1},tooltip:{after:["halo"],initialize:function(){this.tooltip=this.targetIsComponent?"Hide this component":"Remove this morph from the world"}}}}}],nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:31472,end:32482})})(Na.HaloItem);
(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("GrabHaloItem")&&"function"===typeof nb.GrabHaloItem?nb.GrabHaloItem:nb.GrabHaloItem=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"adjustTarget",value:function(R,xa){Na.PropertyPath("owner.layout.autoResize").get(R)&&!R.globalBounds().insetBy(10).containsPoint(xa)&&(R=R.owner);return R}},{key:"valueForPropertyDisplay",
value:function(){var R=this.hand,xa=this.halo,$a=this.prevDropTarget,Ab=R.world(),bc=R.findDropTarget(R.globalPosition,[xa.target],function(Ec){return!Ec.isHaloItem&&!Ec.ownerChain().some(function(pc){return pc.isHaloItem||!pc.visible||0==pc.opacity})});if(bc)return bc=this.adjustTarget(bc,R.globalPosition),xa.toggleMorphHighlighter(bc&&bc!=Ab,bc,!0),$a&&$a!=bc&&xa.toggleMorphHighlighter(!1,$a),(this.prevDropTarget=bc)&&bc.name}},{key:"init",value:function(R){var xa=this.halo,$a=xa.target.undoStart("grab-halo");
$a&&$a.addTarget(xa.target.owner);this.hand=R;xa.target.onGrab({halo:xa,hand:R,isShiftDown:function(){return!1}});xa.state.activeButton=this;this.opacity=.3;var Ab=Na.connect(R,"update",this,"update");Na.once(xa.target,"remove",function(){return Ab.disconnect()})}},{key:"stop",value:function(R){var xa=this.halo,$a=this.prevDropTarget,Ab=xa.target.undoInProgress,bc=R.hand.findDropTarget(R.hand.globalPosition,[xa.target],function(Ec){return!Ec.isHaloItem&&!Ec.ownerChain().some(function(pc){return pc.isHaloItem})});
bc=this.adjustTarget(bc,R.hand.globalPosition);Na.disconnect(R.hand,"update",this,"update");Na.MorphHighlighter.interceptDrop(xa,bc,xa.target);Ab.addTarget(bc);bc.onDrop(R);xa.state.activeButton=null;xa.alignWithTarget();xa.toggleMorphHighlighter(!1,$a);Na.MorphHighlighter.removeHighlighters(xa);xa.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"onDragStart",value:function(R){this.init(R.hand)}},{key:"onDragEnd",value:function(R){this.stop(R)}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:32484,end:35012})})(Na.HaloItem);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("DragHaloItem")&&"function"===typeof nb.DragHaloItem?nb.DragHaloItem:nb.DragHaloItem=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},{key:"updateAlignmentGuide",
value:function(R){var xa=this.halo.getSubmorphNamed("mesh");if(R)return xa=this.halo.getMesh(this.halo.target.worldPoint(Na.pt(0,0))),this.focus(),xa;xa&&xa.remove()}},{key:"init",value:function(){var R=this.halo.target;R.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=R.position;this.targetTransform=R.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();this.updateAlignmentGuide(!1);
Na.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(R,xa,$a){xa=void 0===xa?!1:xa;$a=void 0===$a?!1:$a;this.actualPos=R=this.actualPos.addPt(this.targetTransform.transformDirection(R));xa&&(R=R.griddedBy(Na.pt(10,10)));this.halo.target.position=R;this.updateAlignmentGuide(xa);this.world().withTopBarDo(function(Ab){if(Ab.activeSideBars.includes("Styling Palette"))Ab.stylingPalette.onHierarchyChange()});xa||Na.showAndSnapToGuides(this.halo.target,!0,$a,5,500)}},{key:"onDragStart",
value:function(R){this.init()}},{key:"onDrag",value:function(R){this.update(R.state.dragDelta,R.isAltDown(),R.isCtrlDown())}},{key:"onDragEnd",value:function(R){this.stop()}},{key:"onKeyUp",value:function(R){this.updateAlignmentGuide(!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],
nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:35014,end:37012})})(Na.HaloItem);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("InspectHaloItem")&&"function"===typeof nb.InspectHaloItem?nb.InspectHaloItem:nb.InspectHaloItem=function(R){R&&
R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"onMouseDown",value:function(R){var xa=this;(function(){var $a,Ab,bc,Ec;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pc){if(1==pc.nextAddress)return pc.yield(System.import("lively.ide/js/inspector.js"),2);$a=pc.yieldResult;Ab=$a.default;(bc=xa.world().getSubmorphsByStyleClassName("Inspector").find(function(wd){return wd.targetObject==xa.halo.target}))&&
(Ec=bc.getWindow())?(Ec.minimized=!1,Ec.activate(),Ec.animate({center:xa.world().visibleBounds().center(),duration:200})):Ab.openInWindow({targetObject:xa.halo.target});xa.halo.remove();pc.jumpToEnd()})})()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],
nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:37014,end:37931})})(Na.HaloItem);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("EditHaloItem")&&"function"===typeof nb.EditHaloItem?nb.EditHaloItem:nb.EditHaloItem=function(R){R&&R[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"onMouseDown",value:function(R){var xa=this;(R=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function($a){return $a.target==xa.halo.target}))?(R=R.getWindow(),R.bringToFront(),R.minimized=!1,R.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",{target:this.halo.target});this.halo.remove()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:37933,end:38713})})(Na.HaloItem);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("RotateHaloItem")&&"function"===typeof nb.RotateHaloItem?nb.RotateHaloItem:nb.RotateHaloItem=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:Symbol.for("lively-instance-initialize"),value:function(R){Gc._get(Object.getPrototypeOf(Ha.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,R);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(R){this.setProperty("angle",R)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(R){this.setProperty("scaleGauge",R)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(R){this.setProperty("initRotation",R)}},{key:"valueForPropertyDisplay",
value:function(){var R=this.halo.target;return this.scaleGauge?R.scale.toFixed(4).toString():Na.num.toDegrees(R.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(R){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=R;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(R){this.detachFromLayout();this.halo.state.activeButton=this;this.scaleGauge=R.scaleBy(1/this.halo.target.scale);
this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(R){this.scaleGauge=null;R=this.initRotation+(R-this.angle);R=Na.num.toRadians(Na.num.detent(Na.num.toDegrees(R),10,45));this.halo.target.rotation=R;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(R){var xa=this.scaleGauge,$a=this.halo;xa||(xa=this.scaleGauge=R.scaleBy(1/$a.target.scale));this.angle=R.theta();this.initRotation=$a.target.rotation;$a.target.scale=Na.num.detent(R.dist(Na.pt(0,0))/
xa.dist(Na.pt(0,0)),.1,.5);$a.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(R){this.styleClasses=["fas",R?"fa-search-plus":"fa-redo"];this.tooltip=R?"Scale morph":"Rotate morph"}},{key:"detachFromLayout",value:function(){this.savedLayout=
this.halo.layout;this.halo.layout=null}},{key:"attachToLayout",value:function(){this.halo.layout=this.savedLayout}},{key:"onDragStart",value:function(R){this.adaptAppearance(R.isShiftDown());R.isShiftDown()?this.initScale(R.position.subPt(this.halo.target.globalPosition)):this.init(R.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(R){this.globalPosition=R.position.addPt(Na.pt(-10,-10));this.adaptAppearance(R.isShiftDown());R.isShiftDown()?this.updateScale(R.position.subPt(this.halo.target.globalPosition)):
this.update(R.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(R){this.adaptAppearance(R.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(R){this.adaptAppearance(R.isShiftDown())}},{key:"onKeyUp",value:function(R){this.adaptAppearance(R.isShiftDown())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],
nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:38715,end:42192})})(Na.HaloItem);Na.nameNumberRe=/(.+)([0-9]+)$/;(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("ComponentHaloItem")&&"function"===typeof nb.ComponentHaloItem?nb.ComponentHaloItem:
nb.ComponentHaloItem=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"updateComponentIndicator",value:function(){var R=this.world(),xa=this.halo.target;this.halo.remove();R.showHaloFor(xa)}},{key:"checkForDuplicateNamesInHierarchy",value:function(){var R=this,xa,$a,Ab,bc,Ec,pc,wd,xd,Se,v,Ie,cf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(df){switch(df.nextAddress){case 1:xa=R.halo.target;
$a=R.world();Ab=[];xa.withAllSubmorphsDoExcluding(function(Ze){Ze!=xa&&Ab.push(Ze)},function(Ze){return Ze.master&&Ze!=xa});bc=Na.arr.groupBy(Ab,function(Ze){return Ze.name});Ec={fontWeight:"normal",fontSize:16};if(!Object.values(bc).find(function(Ze){return 1<Ze.length})){df.jumpTo(2);break}pc=Na.arr.sum(Object.values(bc).filter(function(Ze){return 1<Ze.length}).map(function(Ze){return Ze.length}));return df.yield($a.confirm(["Ambigous Names in Submorph Hierarchy  ",{}].concat($jscomp.arrayFromIterable(Na.Icon.textAttribute("exclamation-triangle",
{fontColor:Na.Color.rgb(230,126,34),fontSize:30,lineHeight:"40px"})),["\nThe morph you are about to turn into a component has "+pc+" morphs within its submorph hierarchy, that have ambigous names. This can lead to incorrect applications of style properties when you create derived instances from this component.\n\n",Object.assign({},Ec,{textAlign:"left"}),"Usually ambigous names are caused if your component is in some kind of intermittent state, where it already displays an example state or code has run that automatically created interface elements. This can be fixed by resetting the submorphs of this morph, usually by implementing a ",
Object.assign({},Ec,{textAlign:"left",fontStyle:"italic"}),"reset()",Object.assign({},Ec,{fontStyle:"italic",fontFamily:"IBM Plex Mono"}),' routine you can invoke to put the morph into some kind of "neutral" state. Alternatively you can go ahead and rename the duplicate morphs to have proper unique names. If you have a hard time giving the conflicting morphs appropriate names, this can be an indication that the component you are declaring is too large, and you need to decompose your component into subcomponents further.',
Object.assign({},Ec,{textAlign:"left",fontStyle:"italic"})]),{width:600,confirmLabel:"PROCEED TO RENAME",rejectLabel:"CANCEL",align:"left"}),3);case 3:if(wd=df.yieldResult,!wd)return df.return();case 2:Se=df.forIn(bc);case 4:if(null==(xd=Se.getNext())){df.jumpTo(6);break}if(2>bc[xd].length){df.jumpTo(4);break}v=bc[xd];case 7:if(!(1<v.length)){df.jumpTo(4);break}Ie=v[0];Na.show(Ie,!0);return df.yield($a.prompt(["Name Collision\n",{},"The name of\n",Ec,Ie.toString(),Object.assign({},Ec,{fontStyle:"italic",
fontWeight:"bold"}),"\nis not unique within the submorph hierachy of\n",Object.assign({},Ec),xa.name,Object.assign({},Ec,{fontStyle:"italic",fontWeight:"bold"}),"\nThere "+(2<v.length?"are "+(v.length-1)+" other morphs":"is one other morph")+" with the exact same name located in this component.",Ec," Duplicate names can cause errors when applying styles to derived morphs of this master component, so it is essential that there is no name ambiguity. Please enter a new name for this or the other conflicting morphs:",
Ec],{input:Ie.name,lineWrapping:!0,width:500,fontSize:12,rejectLabel:"IGNORE",confirmLabel:"RENAME",errorMessage:"Provided name is not unique",validate:function(Ze){return!Object.keys(bc).includes(Ze)}}),9);case 9:cf=df.yieldResult;Na.signal($a,"hideMarkers");cf&&(Ie.name=cf);if(cf in bc){df.jumpTo(7);break}else if(!cf){v=Na.arr.rotate(v);df.jumpTo(7);break}Na.arr.remove(v,Ie);df.jumpTo(7);break;case 6:return df.return(!0)}})}},{key:"onMouseDown",value:function(){var R=this,xa,$a,Ab,bc,Ec,pc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wd){switch(wd.nextAddress){case 1:xa=
R.halo.target;$a=!xa.isComponent;Ab=$world.getAllNamed(xa.name).length;if(!($a&&1<Ab)){wd.jumpTo(2);break}return wd.yield($world.prompt(["Name Conflict\n",{},"The morph's name you are about to turn into a component is already used by "+(Ab-1)+" other morph"+(2<Ab?"s":"")+". Please enter a ",{fontWeight:"normal"},"unique identifier",{fontStyle:"italic"}," for this component within this project.",{fontWeight:"normal",fontSize:16}],{input:xa.name,lineWrapping:!0,width:400,errorMessage:"Identifier not unique",
validate:function(xd){return 0==$world.getAllNamed(xd).length}}),3);case 3:bc=wd.yieldResult;if(!bc)return wd.return();xa.name=bc;case 2:Ec=xa;if(!(pc=$a)){wd.jumpTo(4);break}return wd.yield(R.checkForDuplicateNamesInHierarchy(),5);case 5:pc=wd.yieldResult;case 4:Ec.isComponent=pc,$a?(Na.arr.pushIfNotIncluded(xa.world().localComponents,xa),Na.arr.pushIfNotIncluded(xa.world().hiddenComponents,xa.name)):Na.arr.remove(xa.world().localComponents,xa),R.world()?R.updateComponentIndicator():xa.world().showHaloFor(xa),
wd.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:42233,end:48387})})(Na.HaloItem);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("CopyHaloItem")&&"function"===typeof nb.CopyHaloItem?nb.CopyHaloItem:nb.CopyHaloItem=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,
yb,[{key:"init",value:function(R){function xa(xd,Se){return Se.match(Na.nameNumberRe)?Se.replace(Na.nameNumberRe,function(v,Ie,cf){cf||(cf="0");for(v=Number(cf);xd.get(Ie+ ++v););return Ie+v}):Se+"1"}var $a=this.halo,Ab=$a.target,bc=$a.world(),Ec=Ab instanceof Na.MultiSelectionTarget;$a.remove();Na.connect(R,"update",this,"update");if(Ec){var pc=Na.arr.compact(Ab.selectedMorphs.map(function(xd){if(xd.canBeCopied())return xd=xd.copy(!0),bc.addMorph(xd),xd}));Ec=pc.map(function(xd){xd.name=xa(Ab,xd.name);
return xd.position});pc[0].undoStart("copy-halo");bc.addMorph($a);$a.refocus(pc);R.grab($a.target);$a.target.onGrab({halo:$a,hand:R,isShiftDown:function(){return!1}});Ec.forEach(function(xd,Se){return pc[Se].globalPosition=xd});$a.alignWithTarget()}else{Ec=Ab.globalPosition;var wd=Ab.copy(!0);Ab.isComponent&&(wd.isComponent=!1,wd.withAllSubmorphsDoExcluding(function(xd){xd!=wd&&xd.master||delete xd._parametrizedProps},function(xd){return xd.master&&xd!=wd}),wd.master=Ab);wd.name=xa(Ab,Ab.name);bc.addMorph(wd);
wd.globalPosition=Ec;wd.undoStart("copy-halo");R.grab(wd);bc.addMorph($a);$a.visible=!1}}},{key:"stop",value:function(R){var xa=this.halo,$a=$jscomp.makeIterator(R.grabbedMorphs).next().value,Ab=R.findDropTarget(R.globalPosition,[xa.target],function(Ec){return!Ec.isHaloItem&&!Ec.ownerChain().some(function(pc){return pc.isHaloItem})}),bc=xa.target.undoInProgress;Na.disconnect(R,"update",this,"update");bc.addTarget(Ab);R.dropMorphsOn(Ab);xa.target.undoStop("copy-halo");xa.remove();R.world().showHaloFor($a)}},
{key:"onDragStart",value:function(R){this.init(R.hand)}},{key:"onDragEnd",value:function(R){this.stop(R.hand)}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var R=this,xa,$a,Ab,bc,Ec,pc,wd,xd,Se,v,Ie,cf,df,Ze,ke,Ke;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yf){switch(yf.nextAddress){case 1:xa=R;$a=xa.halo;if($a.nameHalo().nameHolders.find(function(wf){return wf.nameHolder===$world.focusedMorph}))return yf.return();Ab=$a.target;
bc=$a.world();Ec=Ab instanceof Na.MultiSelectionTarget;pc=Ab.globalBounds().topLeft();wd=Ec?Ab.selectedMorphs:[Ab];xd=wd.filter(function(wf){return!wf.isCommentIndicator}).map(function(wf){return wf.copy(!0)});Se=[];v='<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>";$a.remove();yf.setCatchFinallyBlocks(2);Ie=$jscomp.makeIterator(xd);cf=Ie.next();
case 4:if(cf.done)return v+="</body></html>",ke=JSON.stringify(Se),yf.yield(R.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:v},{type:"application/morphic",data:ke}]),8);df=cf.value;return yf.yield(Na.createMorphSnapshot(df,{addPreview:!1,testLoad:!1}),7);case 7:Ze=yf.yieldResult;Ze.copyMeta={offset:df.worldPoint(Na.pt(0,0)).subPt(pc)};Se.push(Ze);v+=df.renderPreview();cf=Ie.next();yf.jumpTo(4);break;case 8:yf.leaveTryBlock(3);break;case 2:return Ke=yf.enterCatchBlock(),bc.logError(Ke),
yf.return();case 3:bc.addMorph($a),$a.refocus(wd),$a.setStatusMessage("copied"),yf.jumpToEnd()}})}},{key:"onMouseUp",value:function(R){var xa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function($a){R.stop();return $a.yield(xa.copyToClipBoard(),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},styleClasses:{defaultValue:["far",
"fa-clone"]}}}}],nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:48389,end:52774})})(Na.HaloItem);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("OriginHaloItem")&&"function"===typeof nb.OriginHaloItem?nb.OriginHaloItem:nb.OriginHaloItem=
function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"fill",get:function(){return Na.Color.white.interpolate(.2,this.borderColorTop)}},{key:"extent",get:function(){return Na.pt(15,15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",value:function(){this.visible=
!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(R){var xa=this.halo,$a=xa.target.origin,Ab=xa.target.worldPoint($a);R=xa.target.localize(Ab.addPt(R)).subPt(xa.target.scroll).subPt($a);
xa.target.adjustOrigin(xa.target.origin.addPt(R))}},{key:"onDragStart",value:function(R){this.init()}},{key:"onDragEnd",value:function(R){this.stop()}},{key:"onDrag",value:function(R){this.update(R.state.dragDelta)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0},borderColor:{after:["halo"],
initialize:function(){this.borderColor=this.halo.target.isComponent?Na.componentAccent:Na.haloBlue}}}}}],nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:52776,end:54437})})(Na.HaloItem);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("ResizeHandle")&&
"function"===typeof nb.ResizeHandle?nb.ResizeHandle:nb.ResizeHandle=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"valueForPropertyDisplay",value:function(){var R=this.halo.target.extent,xa=R.y;return R.x.toFixed(1)+"x"+xa.toFixed(1)}},{key:"positionInHalo",value:function(){var R=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(Na.Rectangle.prototype.sides.includes(this.location)&&(this.visible=
!1),R=R.insetBy(-4));return R.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(R){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(R.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(R){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(R.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(R){this.init(R.position,R.isShiftDown())}},{key:"onDragEnd",value:function(R){this.stop(R.isShiftDown())}},
{key:"onDrag",value:function(R){this.update(R.position,R.isShiftDown(),R.isAltDown(),R.isCtrlDown());this.focus()}},{key:"init",value:function(R,xa){xa=void 0===xa?!1:xa;var $a=this.halo.target,Ab=$a.origin,bc=$a.position;$a=$a.extent;this.startPos=R;this.startBounds=bc.subPt(Ab).extent($a);this.startOrigin=this.halo.target.origin;this.savedLayout=this.halo.layout;this.halo.layout=null;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();R=this.halo.target.getGlobalTransform().getRotation();
this.offsetRotation=Na.num.toRadians(R%45);this.halo.toggleDiagonal(xa,this.corner)}},{key:"update",value:function(R,xa,$a,Ab){xa=void 0===xa?!1:xa;$a=void 0===$a?!1:$a;Ab=void 0===Ab?!1:Ab;var bc=this.corner,Ec=this.tfm;R=this.startPos.subPt(R);Ec=Ec.transformDirection(Na.pt(R.x,R.y));$a&&(Ec=Ec.griddedBy(Na.pt(10,10)));this.halo.updateBoundsFor(bc,xa,Ec,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(xa,bc);this.updateAlignmentGuide($a);xa=[];bc=bc.toLowerCase();bc.includes("left")&&
xa.push("left");bc.includes("top")&&xa.push("top");bc.includes("bottom")&&xa.push("bottom");bc.includes("right")&&xa.push("right");Na.showAndSnapToResizeGuides(this.halo.target,xa,!0,Ab,5,200)}},{key:"stop",value:function(R){R=this.halo;R.layout=this.savedLayout;R.state.activeButton=null;R.alignWithTarget();R.toggleDiagonal(!1);this.updateAlignmentGuide(!1);Na.removeSnapToGuidesOf(R.target)}},{key:"updateAlignmentGuide",value:function(R){var xa=this.halo.getSubmorphNamed("mesh");if(R)return R=this.halo.target.extent,
R=Na.pt(R.x%10,R.y%10),xa=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),R),this.focus(),xa;xa&&xa.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(R){0<R&&(R-=360);R=-8-(R/45).toFixed();0==R&&(R=8);return Na.arr.zip(Na.arr.rotate([["topLeft",function(xa){return xa.negated()}],
["topCenter",function(xa){return xa.withX(0).negated()}],["topRight",function(xa){return xa.withX(0).negated()}],["rightCenter",function(xa){return Na.pt(0,0)}],["bottomRight",function(xa){return Na.pt(0,0)}],["bottomCenter",function(xa){return Na.pt(0,0)}],["bottomLeft",function(xa){return xa.withY(0).negated()}],["leftCenter",function(xa){return xa.withY(0).negated()}]],R),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize","rightCenter"],["nwse-resize",
"bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(R){var xa=this;if(!R.target)return[];var $a=R.target.getGlobalTransform().getRotation();return Na.arr.compact(this.getResizeParts($a).map(function(Ab){var bc=$jscomp.makeIterator(Ab),Ec=$jscomp.makeIterator(bc.next().value);Ab=Ec.next().value;Ec.next();Ec.next();Ec=$jscomp.makeIterator(bc.next().value);bc=Ec.next().value;Ec=Ec.next().value;return xa.for(R,Ab,Ec,
bc)})).map(function(Ab){return Ab.alignInHalo()})}},{key:"for",value:function(R,xa,$a,Ab){var bc="Resize "+xa;R=R.getSubmorphNamed(bc)||new this({name:bc,halo:R,corner:xa,tooltip:"Resize "+xa,extent:Na.pt(10,10),borderWidth:1,borderRadius:0,borderColor:R.target.isComponent?Na.componentAccent:Na.haloBlue,fill:Na.Color.white});return Object.assign(R,{nativeCursor:Ab,location:$a})}}],nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:54496,end:59794})})(Na.HaloItem);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("MenuHaloItem")&&"function"===typeof nb.MenuHaloItem?nb.MenuHaloItem:nb.MenuHaloItem=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,
yb,[{key:"onMouseDown",value:function(R){var xa=this,$a,Ab;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bc){if(1==bc.nextAddress)return $a=xa.halo.target,xa.halo.remove(),bc.yield($a.menuItems(R),2);Ab=bc.yieldResult;$a.world().openMenu(Ab).hasFixedPosition=xa.halo.hasFixedPosition;bc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},
tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:59796,end:60321})})(Na.HaloItem);var Tb=Ma("M",function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("MorphHighlighter")&&
"function"===typeof nb.MorphHighlighter?nb.MorphHighlighter:nb.MorphHighlighter=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,
this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(R){this.layoutHalo&&
this.layoutHalo.handleDrop(R)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Na.Color.orange.withA(.3)},
borderWidth:{defaultValue:2},borderColor:{defaultValue:Na.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},acceptsDrops:{get:function(){return!!this.layoutHalo}},highlightedSides:{defaultValue:[],set:function(R){var xa=this;this.setProperty("highlightedSides",R);this.submorphs=R.map(function($a){return{type:"ellipse",isHaloItem:!0,fill:Na.Color.orange,center:xa.innerBounds()[$a]()}});this.addMorph({type:"label",name:"name tag",padding:Na.Rectangle.inset(5,
5,5,5),fontColor:Na.Color.white,fill:Na.Color.orange,borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(R){R=void 0===R?$world:R;var xa=R._morphHighlighters,$a;for($a in xa)xa[$a].remove();delete R._morphHighlighters}},{key:"for",value:function(R,xa,$a,Ab){$a=void 0===$a?!1:$a;Ab=void 0===Ab?[]:Ab;var bc=R._morphHighlighters=
R._morphHighlighters||{};Na.properties.forEachOwn(bc,function(Ec,pc){return pc.alignWithHalo()});if(!xa||xa.ownerChain().find(function(Ec){return Ec.isHaloItem}))return null;bc[xa.id]=bc[xa.id]||new this({targetId:xa.id,halo:R,showLayout:$a});R.addMorph(bc[xa.id]);bc[xa.id].highlightedSides=Ab;return bc[xa.id]}},{key:"interceptDrop",value:function(R,xa,$a){(R=R._morphHighlighters=R._morphHighlighters||{},R[xa.id])&&R[xa.id].handleDrop($a)}}],nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:60510,end:64305})}(Na.Morph));Na.MorphHighlighter=Tb;Na.MorphHighlighter=Tb;Na.MorphHighlighter=Tb;var md=Ma("I",function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ha=nb.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof nb.InteractiveMorphSelector?nb.InteractiveMorphSelector:nb.InteractiveMorphSelector=function(R){R&&
R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:Symbol.for("lively-instance-initialize"),value:function(R,xa,$a){R=void 0===R?$world:R;this.controllingMorph=void 0===xa?null:xa;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=R;this.filterFn=$a;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var R=Na.promise.deferred();R.promise.resolve=R.resolve;this.whenDone=
R.promise;this.selectorMorph=Na.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();Na.connect(this.world.firstHand,"position",this,"scanForTargetAt");Na.once(this.selectorMorph,"onMouseUp",this,"selectTarget");Na.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var R=this.world.firstHand.globalPosition;this.selectorMorph.center=R;this.selectorMorph.focus();
var xa=this.selectorMorph.morphBeneath(R),$a,Ab=this.possibleTarget,bc=this.controllingMorph,Ec=this.filterFn,pc=this.world,wd=this.morphHighlighter;for(wd==xa?xa=wd.morphBeneath(R):xa&&xa.isEpiMorph&&(xa=xa.morphBeneath(R));xa&&($a=[xa].concat($jscomp.arrayFromIterable(xa.ownerChain())).find(function(xd){return!xd.visible}));)xa=$a=$a.morphBeneath(R);if(xa&&Ec&&!Ec(xa))for(;xa&&![xa].concat($jscomp.arrayFromIterable(xa.ownerChain())).find(Ec);)xa=xa.morphBeneath(R);!xa||xa==Ab||bc&&xa.ownerChain().includes(bc.getWindow())||
(wd&&wd.deactivate(),(this.possibleTarget=Ab=xa)&&!Ab.isWorld&&(R=this.morphHighlighter=Na.MorphHighlighter.for(pc,xa))&&R.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){Na.MorphHighlighter.removeHighlighters(this.world);Na.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"InteractiveMorphSelector"}},{key:"selectMorph",value:function(R,xa,$a){R=new this(R,xa,$a);R.selectNewTarget();return R.whenDone}}],nb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:64314,end:67067})}(void 0));Na.InteractiveMorphSelector=md;Na.InteractiveMorphSelector=
md;Na.InteractiveMorphSelector=md;Na.default=lc;var wb=lively.FreezerRuntime.recorderFor("lively.ide/index.js");wb.info="import via sub modules";wb.info="import via sub modules";wb.info="import via sub modules";lc=Ma("v",{});wb.valueWidgets=lc;wb.valueWidgets=lc;wb.valueWidgets=lc;var je=Ma("p",{});wb.popovers=je;wb.popovers=je;wb.popovers=je;var bf=lively.FreezerRuntime.recorderFor("lively.components/popup.js");bf.Morph=xe;bf.VerticalLayout=Mb;bf.StyleSheet=ub;bf.Icon=se;bf.CustomLayout=rc;bf.Color=
hc;bf.rect=sc;bf.pt=Db;bf.connect=Rc;bf.Path=$c;bf.duration=300;wb=Ma("P",function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),Ha=nb.hasOwnProperty("Popover")&&"function"===typeof nb.Popover?nb.Popover:nb.Popover=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"relayout",value:function(R){var xa=this.get("body"),$a=this.get("arrow"),Ab=this.get("close button");$a=$a.height;
R?(xa.animate({topCenter:bf.pt(0,$a),duration:200}),Ab.animate({topRight:xa.topRight.addXY(8,-8),duration:200})):(xa.topCenter=bf.pt(0,$a),Ab.topRight=xa.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,
after:["submorphs"],defaultValue:{extent:bf.pt(200,200),fill:bf.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},get:function(){return this.get("body").submorphs[0]},set:function(R){var xa=this;this.get("body").addMorph(R);this.whenRendered().then(function(){return xa.relayout()})}},submorphs:{initialize:function(){var R=this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:bf.pt(0,0),borderColor:bf.Color.transparent,vertices:[bf.pt(-10,0),bf.pt(0,
-15),bf.pt(10,0)]},{name:"body"},{name:"close button",type:"button",label:Object.assign(bf.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",fill:null,extent:bf.pt(16,16),borderColor:bf.Color.transparent}];var xa=$jscomp.makeIterator(this.submorphs);xa.next();var $a=xa.next().value;xa=xa.next().value;bf.connect(xa,"fire",this,"close");bf.connect($a,"extent",this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return R.animated=!0},1E3)}}}}}],nb,{pathInPackage:function(){return"popup.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:247,end:2625})}(bf.Morph));bf.Popover=wb;bf.Popover=wb;bf.Popover=wb;var Wc=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");Wc.Morph=xe;Wc.TilingLayout=Ua;Wc.morph=Kb;Wc.Label=ud;Wc.HorizontalLayout=Vc;Wc.Icon=se;Wc.InputLine=Lb;Wc.config=mb;Wc.connect=Rc;Wc.signal=
lb;Wc.Color=hc;Wc.LinearGradient=Ac;Wc.pt=Db;Wc.rect=sc;Wc.num=vd;Wc.obj=id;Wc.popovers=je;Wc.ValueScrubber=Gb;Wc.Popover=wb;(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ha=nb.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof nb.ContextSensitiveWidget?nb.ContextSensitiveWidget:nb.ContextSensitiveWidget=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,
void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ContextSensitiveWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:Wc.Color.transparent},isSelected:{defaultValue:"false",set:function(R){this.setProperty("isSelected",R);this.fontColor=R?Wc.Color.white:Wc.Color.black}},layout:{initialize:function(){this.layout=new Wc.HorizontalLayout}},context:{serialize:!1}}}}],nb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,end:2441})})(Wc.Morph);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ha=nb.hasOwnProperty("ShortcutWidget")&&"function"===typeof nb.ShortcutWidget?nb.ShortcutWidget:nb.ShortcutWidget=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,
yb,[{key:"onMouseDown",value:function(R){this.openPopover()}},{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){R.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],set:function(R){this.setProperty("title",R);this.getSubmorphNamed("valueString").value=R}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,
set:function(R){this.submorphs.forEach(function(xa){return xa.fontColor=R})}},submorphs:{initialize:function(){this.submorphs=[Wc.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],fontSize:15,padding:Wc.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:Wc.rect(0,0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],nb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2443,end:3793})})(Wc.ContextSensitiveWidget);je=function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ha=nb.hasOwnProperty("LayoutWidget")&&"function"===typeof nb.LayoutWidget?nb.LayoutWidget:nb.LayoutWidget=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Gc(Ha,yb,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}},{key:"openPopover",value:function(){var R=this,xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function($a){if(1==$a.nextAddress)return xa=new Wc.popovers.LayoutPopover({hasFixedPosition:!!R.ownerChain().find(function(Ab){return Ab.hasFixedPosition}),container:R.context}),$a.yield(xa.fadeIntoWorld(R.globalBounds().center()),2);Wc.connect(xa,"layoutChanged",
R,"layoutChanged");Wc.signal(R,"openWidget",xa);$a.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutWidget"}},{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],nb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3802,end:4641})}(Wc.ShortcutWidget);Wc.LayoutWidget=je;Wc.LayoutWidget=je;Wc.LayoutWidget=je;je=function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ha=nb.hasOwnProperty("ColorWidget")&&"function"===typeof nb.ColorWidget?nb.ColorWidget:nb.ColorWidget=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"relayout",
value:function(R){R?this.submorphs=this.color?this.color.isGradient?this.renderGradientValue():this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var R=this.color;if(2*R.stops.length==this.submorphs.length-3){var xa;for(xa in this.color.stops){var $a=R.stops[xa];var Ab=$a.color,bc=$a.offset,Ec=$jscomp.makeIterator(this.submorphs[2+2*xa].submorphs).next().value;$a=this.submorphs[3+
2*xa];Ec.fill=Ab;$a.value=(100*bc).toFixed()+"%"+(xa<R.stops.length-1?",":"")}}else this.submorphs=this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=
Wc.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:Wc.pt(15,15),fill:Wc.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:Wc.pt(5,7.5),fill:Wc.Color.white,borderColor:Wc.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[Wc.pt(0,0),Wc.pt(10,10)],borderColor:Wc.Color.red}]}]},{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:Wc.pt(15,
15),fill:Wc.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:Wc.pt(5,7.5),fill:this.color,borderColor:Wc.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:Wc.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var R=this.color,xa=[{type:"label",padding:Wc.rect(0,0,5,0),value:"linearGradient"==R.type?Wc.num.toDegrees(R.vectorAsAngle()).toFixed()+"\u00b0,":""}],$a;
for($a in R.stops){var Ab=R.stops[$a],bc=Ab.color;Ab=Ab.offset;xa.push({extent:Wc.pt(this.fontSize,this.fontSize),fill:Wc.Color.transparent,layout:new Wc.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:bc}]});xa.push({type:"label",padding:Wc.rect(0,0,5,0),value:(100*Ab).toFixed()+"%"+($a<R.stops.length-1?",":"")})}return xa}},{key:"onMouseDown",value:function(R){this.openFillEditor()}},{key:"update",value:function(R){this.color=R}},{key:"openFillEditor",value:function(){var R=
this,xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function($a){if(1==$a.nextAddress)return xa=new Wc.popovers.FillPopover({hasFixedPosition:!!R.ownerChain().find(function(Ab){return Ab.hasFixedPosition}),handleMorph:R.context,fillValue:R.color,title:"Fill Control",gradientEnabled:R.gradientEnabled}),$a.yield(xa.fadeIntoWorld(R.globalBounds().center()),2);Wc.connect(xa,"fillValue",R,"update");Wc.signal(R,"openWidget",xa);$a.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorWidget"}},
{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new Wc.HorizontalLayout({direction:"centered"})}},selectionFontColor:{defaultValue:Wc.Color.white},nonSelectionFontColor:{defaultValue:Wc.Color.black},color:{defaultValue:Wc.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],set:function(R){this.getProperty("isSelected")!=R&&(this.getSubmorphNamed("valueString").fontColor=R?this.selectionFontColor:this.nonSelectionFontColor,
this.setProperty("isSelected",R))}},submorphs:{after:["nonSelectionFontColor","selectionFontColor"],initialize:function(){Wc.connect(this,"color",this,"relayout",{converter:function(R,xa){return(xa&&xa.isColor)!=(R&&R.isColor)}});this.relayout(!0)}}}}}],nb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:4705,end:10188})}(Wc.ContextSensitiveWidget);Wc.ColorWidget=je;Wc.ColorWidget=je;Wc.ColorWidget=je;je=function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ha=nb.hasOwnProperty("BooleanWidget")&&"function"===typeof nb.BooleanWidget?nb.BooleanWidget:nb.BooleanWidget=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"onMouseDown",value:function(R){this.boolean=!this.boolean}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BooleanWidget"}},{key:"properties",get:function(){return{fontFamily:{defaultValue:Wc.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},boolean:{set:function(R){this.setProperty("boolean",R);this.value=Wc.obj.safeToString(R);this.fontColor=this.boolean?Wc.Color.green:Wc.Color.red}}}}}],nb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10197,end:10682})}(Wc.Label);Wc.BooleanWidget=je;Wc.BooleanWidget=je;Wc.BooleanWidget=je;je=Ma("N",function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ha=nb.hasOwnProperty("NumberWidget")&&"function"===typeof nb.NumberWidget?nb.NumberWidget:nb.NumberWidget=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Gc(Ha,yb,[{key:"onMouseDown",value:function(R){Gc._get(Object.getPrototypeOf(Ha.prototype),"onMouseDown",this).call(this,R);"up"==R.targetMorph.name&&this.increment();"down"==R.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return Wc.obj.dissoc(Gc._get(Object.getPrototypeOf(Ha.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(R,xa){xa=void 0===xa?!0:xa;this.setProperty("number",xa?R/this.scaleFactor:R);Wc.signal(this,"number",this.number);
this.relayout(xa)}},{key:"relayoutButtons",value:function(){var R=this.getSubmorphNamed("up"),xa=this.getSubmorphNamed("down");this.getSubmorphNamed("value");R.height=xa.height=Math.floor(this.height/2);R.width=xa.width=20}},{key:"onChange",value:function(R){Gc._get(Object.getPrototypeOf(Ha.prototype),"onChange",this).call(this,R);"extent"!=R.prop||this.autofit||this.relayout()}},{key:"relayout",value:function(R){var xa=this.getSubmorphNamed("value"),$a=this.showStepControls?20:0;xa&&(this.autofit?
(R||(xa.value=this.number*this.scaleFactor),xa.fit(),this.height=xa.height,this.width=xa.width+$a):R||(xa.width=this.width-$a),this.relayoutButtons(),R||(xa.value=Wc.num.roundTo(this.number*this.scaleFactor,1),xa.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,xa.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,xa.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=
this.min&&this.number<=this.min||this.update(this.number-1/this.scaleFactor,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(R){this.setProperty("autofit",R);this.getSubmorphNamed("value").scaleToBounds=!R}},number:{defaultValue:0,after:["unit","autofit"],set:function(R){this.setProperty("number",
R);this.relayout(!1)}},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},floatingPoint:{after:["number","submorphs"],set:function(R){this.setProperty("floatingPoint",R);this.get("value").floatingPoint=R},get:function(){if("undefined"!==typeof this.getProperty("floatingPoint"))return this.getProperty("floatingPoint");var R=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return 1==this.scaleFactor&&R&&!!R[1]}},padding:{isStyleProp:!0,defaultValue:Wc.rect(5,3,0,0),after:["submorphs"],set:function(R){this.setProperty("padding",
R);this.getSubmorphNamed("value").padding=R}},extent:{defaultValue:Wc.pt(70,25)},scaleFactor:{defaultValue:1,get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(R){this.get("value").baseFactor=R}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){var R=this;this.master={auto:"styleguide://SystemWidgets/number field/light"};this.master.whenApplied().then(function(){R.relayout()})}},
fontColor:{isStyleProp:!0,defaultValue:Wc.Color.rgbHex("#0086b3"),set:function(R){this.setProperty("fontColor",R)}},isSelected:{set:function(R){this.getProperty("isSelected")!=R&&(R?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",R))}},fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(R){this.setProperty("fontFamily",R)}},fontSize:{defaultValue:15,isStyleProp:!0,
set:function(R){this.setProperty("fontSize",R)}},layout:{initialize:function(){this.layout=new Wc.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},showStepControls:{derived:!0,get:function(){return this.getSubmorphNamed("up").visible&&this.getSubmorphNamed("down").visible},set:function(R){this.clipMode=(this.getSubmorphNamed("up").visible=this.getSubmorphNamed("down").visible=R)?"visible":"hidden"}},submorphs:{after:["min","max"],initialize:function(R){0<R.length||(this.submorphs=[new Wc.ValueScrubber({name:"value",
unit:this.unit,floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),{name:"up",submorphs:[Wc.Icon.makeLabel("sort-up",{reactsToPointer:!1,name:"icon"})]},{name:"down",rotation:Math.PI,submorphs:[Wc.Icon.makeLabel("sort-up",{reactsToPointer:!1,name:"icon"})]}])}}}}}],nb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:10691,end:17485})}(Wc.Morph));Wc.NumberWidget=je;Wc.NumberWidget=je;Wc.NumberWidget=je;wb=function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ha=nb.hasOwnProperty("ShadowWidget")&&"function"===typeof nb.ShadowWidget?nb.ShadowWidget:nb.ShadowWidget=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"onMouseDown",value:function(R){this.openPopover()}},
{key:"openPopover",value:function(){var R=this,xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function($a){if(1==$a.nextAddress)return xa=new Wc.popovers.ShadowPopover({hasFixedPosition:!!R.ownerChain().find(function(Ab){return Ab.hasFixedPosition}),shadowValue:R.shadowValue}),$a.yield(xa.fadeIntoWorld(R.globalBounds().center()),2);Wc.connect(xa,"shadowValue",R,"shadowValue");Wc.connect(R,"shadowValue",R,"update");Wc.signal(R,"openWidget",xa);$a.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},
{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},{key:"updateShadowDisplay",value:function(){var R=this.shadowValue,xa=R.blur,$a=R.spread,Ab=R.distance;R=R.color;var bc=$jscomp.makeIterator(this.submorphs),Ec=bc.next().value,pc=bc.next().value;pc=$jscomp.makeIterator(pc.submorphs).next().value;
bc=bc.next().value;Ec.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";pc.fill=R;bc.value=", "+xa+"px, "+Ab+"px, "+$a+"px)"}},{key:"initShadowDisplay",value:function(){var R=this.shadowValue,xa=R.blur,$a=R.spread,Ab=R.distance;R=R.color;this.submorphs=[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},Wc.morph({fill:Wc.Color.transparent,extent:Wc.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:Wc.pt(this.fontSize,
this.fontSize),position:Wc.pt(2,2),fill:R,borderColor:Wc.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+xa+"px, "+Ab+"px, "+$a+"px)"}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(R){this.setProperty("shadowValue",R);this.renderShadowDisplay()}},fill:{defaultValue:Wc.Color.transparent},nativeCursor:{defaultValue:"pointer"},
fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(R){this.submorphs.forEach(function(xa){return xa.fontColor=R})}},isSelected:{defaultValue:!1,set:function(R){this.setProperty("isSelected",R);this.fontColor=R?Wc.Color.white:Wc.Color.black}},layout:{initialize:function(){this.layout=new Wc.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],nb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:17496,end:20619})}(Wc.Morph);Wc.ShadowWidget=wb;Wc.ShadowWidget=wb;Wc.ShadowWidget=wb;wb=function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ha=nb.hasOwnProperty("PointWidget")&&"function"===typeof nb.PointWidget?nb.PointWidget:nb.PointWidget=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Gc(Ha,yb,[{key:"onMouseDown",value:function(R){this.openPopover()}},{key:"openPopover",value:function(){var R=this,xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function($a){if(1==$a.nextAddress)return xa=new Wc.popovers.PointPopover({pointValue:R.pointValue,hasFixedPosition:!!R.ownerChain().find(function(Ab){return Ab.hasFixedPosition})}),$a.yield(xa.fadeIntoWorld(R.globalBounds().center()),2);Wc.connect(xa,"pointValue",R,"pointValue");Wc.signal(R,"openWidget",xa);$a.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(R){this.setProperty("isSelected",R);this.fontColor=R?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:Wc.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Wc.Color.black},fontFamily:{defaultValue:Wc.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},
styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(R){var xa=Wc.Color.rgbHex("#0086b3");this.setProperty("pointValue",R);this.textAndAttributes=["pt(",null,R.x.toFixed(),{fontColor:xa},",",{},R.y.toFixed(),{fontColor:xa},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],nb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:20628,end:22272})}(Wc.Label);Wc.PointWidget=wb;Wc.PointWidget=wb;Wc.PointWidget=wb;wb=function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ha=nb.hasOwnProperty("PaddingWidget")&&"function"===typeof nb.PaddingWidget?nb.PaddingWidget:nb.PaddingWidget=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Gc(Ha,yb,[{key:"onMouseDown",value:function(R){this.openPopover()}},{key:"openPopover",value:function(){var R=this,xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function($a){if(1==$a.nextAddress)return xa=new Wc.popovers.RectanglePopover({hasFixedPosition:!!R.ownerChain().find(function(Ab){return Ab.hasFixedPosition}),rectangle:R.rectangle}),xa.relayout(),$a.yield(xa.fadeIntoWorld(R.globalBounds().center()),2);Wc.connect(xa,"rectangle",R,"rectangle");Wc.signal(R,"openWidget",
xa);$a.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:Wc.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(R){this.setProperty("isSelected",R);this.fontColor=R?Wc.Color.white:Wc.Color.black}},rectangle:{defaultValue:Wc.rect(0),set:function(R){this.setProperty("rectangle",
R);this.value=Wc.obj.safeToString(R)}}}}}],nb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22281,end:23342})}(Wc.Label);Wc.PaddingWidget=wb;Wc.PaddingWidget=wb;Wc.PaddingWidget=wb;wb=function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ha=nb.hasOwnProperty("IconWidget")&&
"function"===typeof nb.IconWidget?nb.IconWidget:nb.IconWidget=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"onMouseDown",value:function(R){this.openPopover()}},{key:"openPopover",value:function(){var R=this,xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function($a){if(1==$a.nextAddress)return xa=new Wc.popovers.IconPopover({hasFixedPosition:!!R.ownerChain().find(function(Ab){return Ab.hasFixedPosition})}),
$a.yield(xa.fadeIntoWorld(R.globalBounds().center()),2);Wc.connect(xa,"select",R,"iconValue",{converter:function(Ab){return Ab&&Wc.Icon.makeLabel(Ab).value},varMapping:{Icon:Wc.Icon}});Wc.signal(R,"openWidget",xa);$a.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:Wc.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,get:function(){return this.value},
set:function(R){this.value=R||"No Icon"}}}}}],nb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23351,end:24282})}(Wc.Label);Wc.IconWidget=wb;Wc.IconWidget=wb;Wc.IconWidget=wb;wb=function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ha=nb.hasOwnProperty("StringWidget")&&
"function"===typeof nb.StringWidget?nb.StringWidget:nb.StringWidget=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"truncate",value:function(R){return 200<R.length?R.slice(0,20)+"...":R}},{key:"onFocus",value:function(R){var xa=this,$a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ab){if(1==Ab.nextAddress)return Gc._get(Object.getPrototypeOf(Ha.prototype),"onFocus",xa).call(xa,R),xa.readOnly?
Ab.return():xa.stringTooLong?Ab.yield(xa.world().editPrompt("edit string",{requester:xa,input:xa.stringValue}),2):(xa.borderColor=Wc.Color.white.withA(.9),xa.textString=xa.stringValue,Ab.return());$a=Ab.yieldResult;if("string"===typeof $a)xa.onInput($a);Ab.jumpToEnd()})}},{key:"onBlur",value:function(R){Gc._get(Object.getPrototypeOf(Ha.prototype),"onBlur",this).call(this,R);this.readOnly||(this.borderColor=Wc.Color.transparent,this.onInput(this.textString))}},{key:"onInput",value:function(R){this.owner.focus();
Wc.signal(this,"inputAccepted",R);this.stringValue=R}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:Wc.Color.transparent},fontColor:{defaultValue:Wc.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:Wc.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:Wc.rect(0,0,0,0)},fixedWidth:{defaultValue:!1},
fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(R){this.setProperty("stringValue",R);this.textString=this.truncate(R);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(R){this.setProperty("isSelected",R);this.fontColor=R?Wc.Color.white:Wc.Color.blue}}}}}],nb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:24291,end:26242})}(Wc.InputLine);Wc.StringWidget=wb;Wc.StringWidget=wb;Wc.StringWidget=wb;Wc.valueWidgets=lc;Object.assign(Wc.valueWidgets,{NumberWidget:Wc.NumberWidget,StringWidget:Wc.StringWidget,IconWidget:Wc.IconWidget,PaddingWidget:Wc.PaddingWidget,ShadowWidget:Wc.ShadowWidget,PointWidget:Wc.PointWidget,BooleanWidget:Wc.BooleanWidget,LayoutWidget:Wc.LayoutWidget,
ColorWidget:Wc.ColorWidget});var xb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");xb.Ellipse=vc;xb.Icon=se;xb.Morph=xe;xb.Path=hd;xb.Text=Id;xb.HorizontalLayout=Vc;xb.VerticalLayout=Mb;xb.morph=Kb;xb.Color=hc;xb.pt=Db;xb.rect=sc;xb.Rectangle=Kc;xb.arr=pb;xb.connect=Rc;xb.disconnect=Hb;xb.LabeledCheckBox=Lc;xb.DropDownSelector=cc;xb.Button=Vb;xb.Menu=Ub;xb.NumberWidget=je;xb.InteractiveMorphSelector=md;xb.easings=bd;(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
Ha=nb.hasOwnProperty("AxisHalo")&&"function"===typeof nb.AxisHalo?nb.AxisHalo:nb.AxisHalo=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:Symbol.for("lively-instance-initialize"),value:function(R){var xa=R.halo;R=R.targetAxis;Gc._get(Object.getPrototypeOf(Ha.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{fill:xb.Color.transparent,halo:xa,targetAxis:R,container:xa.container});
this.initialize()}},{key:"initialize",value:function(){this.setBounds(this.fetchBounds());this.minSlider=this.minSlider();this.axisMenu=this.axisMenu();this.proportionSlider=this.proportionSlider();this.proportionSlider.addMorph(this.minSlider);this.submorphs=[this.proportionSlider,this.axisMenu];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(R){this._forceMenuHidden=R;this.axisMenu.visible=!R}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},
{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(R){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},
{key:"proportionSlider",value:function(){var R=this,xa=this,$a=this.proportionViewer();return this.halo.addGuide(new xb.Morph({nativeCursor:this.getResizeCursor(),fill:xb.Color.transparent,submorphs:[this.devider(),$a],alignWithTarget:function(){this.setBounds(xa.getProportionSliderBounds(this))},onDragStart:function(){$a.visible=!0},onDrag:function(Ab){R.adjustStretch(R.getDelta(Ab));R.halo.alignWithTarget()},onDragEnd:function(){$a.visible=!1}}))}},{key:"devider",value:function(){return new xb.Morph({visible:!this.lastAxis,
fill:xb.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var R=this,xa=this,$a=this.minSpaceVisualizer(),Ab=this.minViewer();return this.halo.addGuide(new xb.Ellipse({nativeCursor:this.getResizeCursor(),fill:xb.Color.green,extent:xb.pt(10,10),visible:!1,submorphs:[$a,Ab],becomesActiveOnHover:!0,alignWithTarget:function(){this.position=xa.getMinSliderPosition()},requestToShow:function(){this.visible=!xa.targetAxis.fixed},requestToHide:function(){this.active?
this.shouldHide=!0:this.visible=!1},onDragStart:function(){xa.forceMenuHidden=!0;Ab.visible=!0;this.active=$a.visible=!0},onDrag:function(bc){R.targetAxis.min+=-R.getDelta(bc);R.halo.alignWithTarget()},onDragEnd:function(){xa.forceMenuHidden=!1;Ab.visible=!1;this.active=$a.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=!1)}}))}},{key:"minViewer",value:function(){var R=this;return this.viewer({position:this.getMinViewerPosition(),alignWithTarget:function(){this.textString="min: "+R.targetAxis.min.toFixed()+
"px !"}})}},{key:"minSpaceBorder",value:function(){return new xb.Path(Object.assign({position:xb.pt(-1,-1),borderStyle:"dashed",borderColor:xb.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var R=this,xa=this.minSpaceBorder();return this.halo.addGuide(new xb.Morph({fill:xb.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[xa],alignWithTarget:function(){this.extent=R.getMinSpaceExtent();this.topLeft=xb.pt(5,5)}}))}},{key:"axisMenu",value:function(){var R=
this.lockButton(),xa=this.menuButton(),$a=this;return new xb.Morph({layout:this.getMenuLayout(),submorphs:[R,xa],fill:xb.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt($a.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var R=this;return this.halo.addGuide(new xb.Morph({fill:xb.Color.transparent,extent:xb.pt(25,25),submorphs:[{center:xb.pt(12.5,12.5),fill:xb.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){R.targetAxis.fixed?
(this.fontColor=xb.Color.red,this.submorphs[0].styleClasses=["fa","fa-lock"]):(this.fontColor=xb.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){R.targetAxis.fixed=!R.targetAxis.fixed;R.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var R=this,xa=this;return new xb.Morph({fill:xb.Color.transparent,extent:xb.pt(25,25),submorphs:[{fill:xb.Color.transparent,styleClasses:["fa","fa-cog"],center:xb.pt(12.5,
12.5)}],onMouseDown:function($a){xa.forceMenuVisible=!0;this.addMorph($a.state.menu=new xb.Menu({position:xb.pt(15,15),items:[["Remove "+xa.subject,function(){R.targetAxis.remove();R.halo.initGuides();R.halo.alignWithTarget()}],["Insert "+xa.subject+" before",function(){R.targetAxis.addBefore();R.halo.initGuides();R.halo.alignWithTarget()}],["Insert "+xa.subject+" after",function(){R.targetAxis.addAfter();R.halo.initGuides();R.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(R){var xa=
R.position;R=R.alignWithTarget;return this.halo.addGuide(new xb.Text({styleClasses:["Halo"],padding:xb.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:xb.Color.white,fill:xb.Color.black.withA(.5),position:xa,alignWithTarget:R,readOnly:!0}))}},{key:"proportionViewer",value:function(){var R=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString=R.targetAxis.length.toFixed(1)+"px"}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AxisHalo"}}],
nb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:662,end:8012})})(xb.Morph);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ha=nb.hasOwnProperty("RowHalo")&&"function"===typeof nb.RowHalo?nb.RowHalo:nb.RowHalo=function(R){R&&R[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:Symbol.for("lively-instance-initialize"),value:function(R){var xa=R.row;R=R.halo;Gc._get(Object.getPrototypeOf(Ha.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:R.target.row(xa),halo:R})}},{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(R){this.targetAxis.height+=R}},{key:"getDelta",value:function(R){return R.state.dragDelta.y}},{key:"axisOffset",
value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return xb.pt(-45,this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return xb.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(R){return this.targetAxis.length>R.height?xb.pt(2,5):xb.pt(26,10)}},{key:"getMenuLayout",value:function(){return new xb.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return xb.pt(50,
20)}},{key:"getMinSliderPosition",value:function(){return xb.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",value:function(){return xb.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:xb.pt(this.container.width+50,2),vertices:[xb.pt(0,1),xb.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return xb.pt(40,20)}},{key:"getProportionSliderBounds",value:function(R){return xb.pt(0,R.owner.height-5).extent(xb.pt(40,
10))}},{key:"getDeviderBounds",value:function(){return xb.pt(15,4).extent(xb.pt(25,2))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RowHalo"}}],nb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:8014,end:9262})})(xb.AxisHalo);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
Ha=nb.hasOwnProperty("ColumnHalo")&&"function"===typeof nb.ColumnHalo?nb.ColumnHalo:nb.ColumnHalo=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:Symbol.for("lively-instance-initialize"),value:function(R){var xa=R.col;R=R.halo;Gc._get(Object.getPrototypeOf(Ha.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:R.target.col(xa),halo:R})}},{key:"subject",get:function(){return"column"}},
{key:"adjustStretch",value:function(R){this.targetAxis.width+=R}},{key:"getDelta",value:function(R){return R.state.dragDelta.x}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return xb.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return xb.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(R){return this.targetAxis.length>R.width?xb.pt(5,3):xb.pt(8,26)}},{key:"getMenuLayout",value:function(){return new xb.HorizontalLayout}},
{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return xb.pt(20,50)}},{key:"getMinSliderPosition",value:function(){return xb.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return xb.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:xb.pt(2,this.container.height+50),vertices:[xb.pt(1,0),xb.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return xb.pt(20,
40)}},{key:"getProportionSliderBounds",value:function(R){return xb.pt(R.owner.width-5,0).extent(xb.pt(10,40))}},{key:"getDeviderBounds",value:function(){return xb.pt(4,15).extent(xb.pt(2,25))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColumnHalo"}}],nb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:9264,end:10519})})(xb.AxisHalo);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ha=nb.hasOwnProperty("CellGuide")&&"function"===typeof nb.CellGuide?nb.CellGuide:nb.CellGuide=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"menuItems",value:function(){var R=this,xa=xb.Icon.textAttribute("check-square-o"),$a=xb.Icon.textAttribute("square-o");
xa[1].textStyleClasses.push("annotation");$a[1].textStyleClasses.push("annotation");$a[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?$a:xa)),function(){R.cellGroup.resize=!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?xa:$a)),function(){R.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new xb.Rectangle).sides),$jscomp.arrayFromIterable((new xb.Rectangle).corners)).map(function(Ab){return[[Ab,
{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(R.cellGroup.align==Ab?xa:$a),["  ",null]),function(){return R.cellGroup.align=Ab}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var Ab=R.cellGroup.morph;Ab&&(R.world().firstHand.grab(Ab),R.world().firstHand.longClickGrab=!0,Ab.position=xb.pt(0))}]]:[])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],nb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10521,end:11840})})(xb.Morph);(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ha=nb.hasOwnProperty("LayoutHalo")&&"function"===typeof nb.LayoutHalo?nb.LayoutHalo:nb.LayoutHalo=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Gc(Ha,yb,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutHalo"}},{key:"properties",get:function(){return{container:{},target:{},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:xb.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],nb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11842,end:12256})})(xb.Morph);lc=Ma("G",function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ha=nb.hasOwnProperty("GridLayoutHalo")&&"function"===typeof nb.GridLayoutHalo?nb.GridLayoutHalo:nb.GridLayoutHalo=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Gc(Ha,yb,[{key:"previewDrop",value:function(R){1>R.length||(R=this.cellGuides.find(function(xa){return xa.fullContainsWorldPoint($world.firstHand.position)}),R!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=R)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(R){var xa=this;this.currentCell&&R.whenRendered().then(function(){return xa.currentCell.cellGroup.morph=R})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();
this.focus()}},{key:"optionControls",value:function(){var R=this.target,xa=new xb.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:xb.Color.transparent,checked:R.compensateOrigin}),$a=new xb.LabeledCheckBox({label:"Resize Submorphs",fill:xb.Color.transparent,name:"fitToCell",checked:R.fitToCell});xb.connect(xa,"checked",R,"compensateOrigin");xb.connect($a,"checked",R,"fitToCell");xb.connect(xa,"checked",this,"alignWithTarget");return[xa,$a]}},{key:"isLayoutHalo",get:function(){return!1}},
{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=this.container.extent;this.addMissingGuides();xb.arr.reverse(this.guides).forEach(function(R){return R.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var R=this;xb.arr.withoutAll(this.target.cellGroups,this.guides.map(function(xa){return xa.cellGroup})).forEach(function(xa){return R.addMorph(R.cellGuide(xa))})}},
{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var R=this,xa=this.addMorph({fill:xb.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function($a){xa.addMorph(R.cellGuide($a))});this.cellGuides=xa.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(R){R.isHaloItem=!0;this.guides.push(R);return R}},{key:"initRowGuides",
value:function(){var R=this,xa=this;this.addGuide(this.addMorph(new xb.Morph({width:25,fill:xb.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:xb.pt(-5,0),alignWithTarget:function(){this.height=xa.container.height}})));xb.arr.range(0,this.target.rowCount-1).forEach(function($a){R.addMorph(new xb.RowHalo({row:$a,halo:R}))})}},{key:"initColumnGuides",value:function(){var R=this,xa=this;this.addGuide(this.addMorph(new xb.Morph({height:25,fill:xb.Color.gray.withA(.7),borderRadius:15,
width:this.container.width,bottomLeft:xb.pt(0,-5),alignWithTarget:function(){this.width=xa.container.width}})));xb.arr.range(0,this.target.columnCount-1).forEach(function($a){R.addMorph(new xb.ColumnHalo({col:$a,halo:R}))})}},{key:"resizer",value:function(){var R=this;return this.addGuide(new xb.Morph({fill:xb.Color.transparent,extent:xb.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(xa){R.container.resizeBy(xa.state.dragDelta);R.alignWithTarget()},alignWithTarget:function(){this.bottomRight=
R.extent}}))}},{key:"cellResizer",value:function(R,xa){var $a=this,Ab="topLeft"==xa?"bottomRight":"topLeft";return new xb.Ellipse({borderWidth:1,visible:!1,borderColor:xb.Color.black,nativeCursor:"nwse-resize",removeCell:function(bc){R.disconnect(bc);$a.alignWithTarget()},addCell:function(bc){R.connect(bc);$a.alignWithTarget()},start:function(){this.fixpointCell=R[Ab];this.draggedDelta=R.bounds().partNamed(xa);this.debugMorph=$a.addMorph(new xb.Morph({fill:xb.Color.orange.withA(.5)}))},update:function(bc){var Ec=
this;this.draggedDelta=this.draggedDelta.addPt(bc);var pc=xb.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(pc);$a.cells.forEach(function(wd){var xd=pc.intersection(wd.bounds()).area()/wd.bounds().area();R.includes(wd)&&.1>xd&&Ec.removeCell(wd);!R.includes(wd)&&xd>1/3&&Ec.addCell(wd)})},onDragEnd:function(bc){this.debugMorph.remove()},onDragStart:function(bc){this.start(bc.position)},onDrag:function(bc){this.update(bc.state.dragDelta)}})}},{key:"cellGuide",
value:function(R){var xa=this,$a=this.cellResizer(R,"topLeft"),Ab=this.cellResizer(R,"bottomRight");return this.addGuide(new xb.CellGuide({cellGroup:R,bounds:R.bounds(),fill:xb.Color.transparent,borderColor:xb.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[$a,Ab],onMouseDown:function(bc){this.becomeActive()},deactivate:function(){this.borderColor=xb.Color.orange;this.fill=xb.Color.transparent;this.submorphs.forEach(function(bc){bc.visible=!1})},becomeActive:function(){xa.guides.forEach(function(bc){bc.isCell&&
bc.deactivate()});this.borderColor=xb.Color.rgbHex("#1565C0");this.fill=xb.Color.rgbHex("#1565C0").withA(.3);xa.addMorph(this.remove());this.submorphs.forEach(function(bc){bc.visible=!0})},startPreview:function(bc){this.fill=xb.Color.orange.withA(.7)},stopPreview:function(bc){this.fill=xb.Color.transparent},onDrop:function(bc){var Ec=$jscomp.makeIterator(bc.hand.grabbedMorphs).next().value;bc.hand.dropMorphsOn(xa.container);R.morph=Ec},alignWithTarget:function(){R.bounds().isNonEmpty()?(this.setBounds(R.bounds()),
$a.center=this.innerBounds().topLeft(),Ab.center=this.innerBounds().bottomRight()):(xb.arr.remove(xa.guides,this),this.remove())}}))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:xb.Color.transparent},cells:{derived:!0,get:function(){return xb.arr.flatten(this.target.col(0).items.map(function(R){return R.row(0).items}))}},submorphs:{initialize:function(){this.initialize()}}}}}],nb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12265,end:19680})}(xb.LayoutHalo));xb.GridLayoutHalo=lc;xb.GridLayoutHalo=lc;xb.GridLayoutHalo=lc;je=function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ha=nb.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof nb.TilingLayoutHalo?nb.TilingLayoutHalo:nb.TilingLayoutHalo=
function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"remove",value:function(){Gc._get(Object.getPrototypeOf(Ha.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(R){}},{key:"removePreviews",value:function(){this.previews.forEach(function(R){return R.clear()})}},
{key:"previewDrop",value:function(R){var xa=this;0<this.previews.length||(this.previews=R.map(function($a){return xa.container.addMorph({type:xb.DropPreview,bounds:$a.bounds()})}),this.previews.forEach(function($a){$a.step()}))}},{key:"updateSpacing",value:function(R){this.target.spacing=R}},{key:"updateAxis",value:function(R){this.target.axis=R}},{key:"updateAlign",value:function(R){this.target.align=R}},{key:"optionControls",value:function(){var R=this.target,xa=new xb.DropDownSelector({borderRadius:2,
padding:3,selectedValue:R.axis,values:["row","column"]}),$a=new xb.DropDownSelector({borderRadius:2,padding:3,selectedValue:R.align,values:["left","center"]});R=new xb.NumberWidget({min:0,number:R.spacing,padding:xb.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:xb.Color.gray,unit:"px"});xb.connect(R,"update",this,"updateSpacing");xb.connect($a,"update",this,"updateAlign");xb.connect(xa,"update",this,"updateAxis");var Ab={type:"label",padding:xb.rect(0,5,5,5),fill:xb.Color.transparent,fontColor:xb.Color.gray.darker(),
readOnly:!0};return[[Object.assign({},Ab,{textString:"Submorph Spacing"}),R],[Object.assign({},Ab,{textString:"Tiling Align"}),$a],[Object.assign({},Ab,{textString:"Tiling Axis"}),xa]].map(function(bc){return{submorphs:bc,fill:null,layout:new xb.HorizontalLayout({spacing:3})}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:xb.Color.transparent},previews:{defaultValue:[]}}}}],nb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19689,end:21804})}(xb.LayoutHalo);xb.TilingLayoutHalo=je;xb.TilingLayoutHalo=je;xb.TilingLayoutHalo=je;(function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ha=nb.hasOwnProperty("DropPreview")&&"function"===typeof nb.DropPreview?nb.DropPreview:nb.DropPreview=function(R){R&&
R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var R=this,xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function($a){if(1==$a.nextAddress)return xa=xb.easings.inOutQuad,$a.yield(R.animate({opacity:.5,duration:(R.pulseDuration-10)/2,easing:xa}),2);if(3!=$a.nextAddress)return $a.yield(R.animate({opacity:1,duration:(R.pulseDuration-
10)/2,easing:xa}),3);R.stopped||R.step();$a.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:xb.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:xb.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],
nb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21806,end:22642})})(xb.Morph);je=Ma("F",function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ha=nb.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof nb.FlexLayoutHalo?nb.FlexLayoutHalo:nb.FlexLayoutHalo=function(R){R&&
R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"handleDrop",value:function(R){}},{key:"previewDrop",value:function(R){var xa=this;0<this.previews.length||(this.previews=R.map(function($a){return xa.container.addMorph({type:xb.DropPreview,position:xa.container.localize(xa.world().firstHand.position),extent:$a.bounds().extent()})}),this.previews.forEach(function($a){$a.step()}))}},{key:"remove",value:function(){Gc._get(Object.getPrototypeOf(Ha.prototype),
"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(R){return R.clear()})}},{key:"onDrop",value:function(R){this.removePreviews();R.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",value:function(R){R&&(this.originalExtent=this.container.extent);this.target.autoResize=R;R||(this.container.extent=this.originalExtent||
this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(R){this.target.resizeSubmorphs=R;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(R){this.target.align=R}},{key:"updateDirectionPolicy",value:function(R){this.target.direction=R}},{key:"updateSpacing",value:function(R){this.target.spacing=R}},{key:"optionControls",value:function(){var R=this.target,xa=R.possibleAlignValues?{fill:xb.Color.transparent,layout:new xb.HorizontalLayout({spacing:3,
direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new xb.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:R.align,values:R.possibleAlignValues})]}:null,$a=R.possibleDirectionValues?{fill:xb.Color.transparent,layout:new xb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},new xb.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:R.direction,values:R.possibleDirectionValues})]}:
null,Ab=new xb.NumberWidget({fill:xb.Color.white,borderWidth:1,borderRadius:4,padding:xb.rect(5,4,0,0),borderColor:xb.Color.gray,min:0,number:R.spacing,unit:"px"}),bc=new xb.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:xb.Color.transparent,checked:R.autoResize});R=new xb.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",alignCheckBox:"right",fill:xb.Color.transparent,checked:R.resizeSubmorphs});xb.connect(Ab,"update",this,"updateSpacing");xb.connect(bc,
"checked",this,"updateAutoResizePolicy");xb.connect(R,"checked",this,"updateResizeSubmorphsPolicy");xa&&xb.connect(xa.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");$a&&xb.connect($a.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[bc,R].concat($jscomp.arrayFromIterable([xa,$a].filter(Boolean)),[{fill:xb.Color.transparent,layout:new xb.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:xb.Color.gray.darker(),padding:xb.rect(0,5,5,5)},Ab]}])}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:xb.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],nb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:22651,end:26838})}(xb.LayoutHalo));xb.FlexLayoutHalo=je;xb.FlexLayoutHalo=je;xb.FlexLayoutHalo=je;wb=Ma("c",function(yb){var nb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ha=nb.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof nb.ProportionalLayoutHalo?nb.ProportionalLayoutHalo:nb.ProportionalLayoutHalo=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Gc(Ha,yb,[{key:"handleDrop",
value:function(R){}},{key:"onDrop",value:function(R){R.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",value:function(R){var xa={};this.target.changeSettingsFor(R.submorph,(xa[R.axis]=R.policy,xa),!0)}},{key:"onSubmorphSettingsDragStart",value:function(R,xa){var $a=this;R.stop();var Ab=this.target.settingsFor(xa);xa="";for(var bc in Ab)xa+=bc+":"+Ab[bc]+" ";var Ec=xb.morph({type:"label",
value:xa,isLayoutable:!1});Ec.wantsToBeDroppedOn=function(pc){return $a.target.layoutableSubmorphs.includes(pc)};Ec.onBeingDroppedOn=function(pc,wd){Ec.remove();if(pc=$a.target.layoutableSubmorphs.includes(wd)?wd:R.world.morphsContainingPoint(R.hand.position).find(function(xd){return $a.target.layoutableSubmorphs.includes(xd)}))$a.updateSubmorphProportionalLayoutSettings({policy:Ab.x,axis:"x",submorph:pc}),$a.updateSubmorphProportionalLayoutSettings({policy:Ab.y,axis:"y",submorph:pc}),pc.show(),$world.setStatusMessage("layout settings applied")};
R.hand.grab(Ec)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var R=this,xa,$a,Ab,bc,Ec,pc,wd,xd,Se,v,Ie,cf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(df){switch(df.nextAddress){case 1:return xa=R.target.layoutableSubmorphs,R.env.eventDispatcher.isKeyPressed("Shift")?(Ab=xa.map(function(Ze){return{isListItem:!0,string:String(Ze),value:Ze}}),df.yield($world.listPrompt("Select morph",Ab,{requester:R,onSelection:function(Ze){return Ze.show()}}),5)):df.yield(xb.InteractiveMorphSelector.selectMorph(R.world(),
R,function(Ze){return xa.includes(Ze)}),4);case 4:$a=df.yieldResult;df.jumpTo(3);break;case 5:bc=df.yieldResult,Ec=$jscomp.makeIterator(bc.selected),$a=Ec.next().value;case 3:if(!$a)return df.return();pc=R.state.popover.get("controlContainer");wd=pc.getAllNamed(/submorph config/);xd=["move","resize","scale","fixed"];Se=R.target.settingsFor($a);wd.length||(pc.submorphs=[].concat($jscomp.arrayFromIterable(pc.submorphs),[{name:"submorph config X-Axis policy",position:xb.pt(0,R.height),fill:xb.Color.transparent,
layout:new xb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new xb.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:Se.x,values:xd})]},{name:"submorph config Y-Axis policy",position:xb.pt(0,R.height),fill:xb.Color.transparent,layout:new xb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new xb.DropDownSelector({name:"y-axis policy selector",
borderRadius:2,padding:3,selectedValue:Se.y,values:xd})]},xb.morph({position:xb.pt(0,R.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));v=pc.getSubmorphNamed("x-axis policy selector");Ie=pc.getSubmorphNamed("y-axis policy selector");cf=pc.getSubmorphNamed("dragme");xb.disconnect(v,"selectedValue",R,"updateSubmorphProportionalLayoutSettings");xb.disconnect(Ie,"selectedValue",R,"updateSubmorphProportionalLayoutSettings");v.selectedValue=Se.x;Ie.selectedValue=Se.y;xb.connect(cf,
"onDragStart",R,"onSubmorphSettingsDragStart",{updater:function(Ze,ke){return Ze(ke,$a)},varMapping:{submorph:$a}});xb.connect(v,"selectedValue",R,"updateSubmorphProportionalLayoutSettings",{converter:function(Ze){return{policy:Ze,axis:"x",submorph:$a}},varMapping:{submorph:$a}});xb.connect(Ie,"selectedValue",R,"updateSubmorphProportionalLayoutSettings",{converter:function(Ze){return{policy:Ze,axis:"y",submorph:$a}},varMapping:{submorph:$a}});df.jumpToEnd()}})}},{key:"optionControls",value:function(R){this.state.popover=
R;var xa=this.target;R=new xb.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:xb.Color.transparent,checked:xa.xAxisEnabled});xa=new xb.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:xb.Color.transparent,checked:xa.yAxisEnabled});var $a=new xb.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(xb.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});xb.connect(R,"checked",this,"updateXAxisEnabled");
xb.connect(xa,"checked",this,"updateYAxisEnabled");xb.connect($a,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[$a]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:xb.Color.transparent}}}}],nb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:26847,end:32579})}(xb.LayoutHalo));xb.ProportionalLayoutHalo=wb;xb.ProportionalLayoutHalo=wb;xb.ProportionalLayoutHalo=wb;var ze=lively.FreezerRuntime.recorderFor("lively.halos/index.js");ze.Halo=kd;ze.MorphHighlighter=Tb;ze.InteractiveMorphSelector=md;ze.StatusMessage=Ca;ze.StatusMessageForMorph=tb;ze.show=ha;ze.showConnector=Fa;ze.ProportionalLayoutHalo=wb;ze.GridLayoutHalo=lc;ze.FlexLayoutHalo=je;ze.showAndSnapToGuides=jb;
ze.removeSnapToGuidesOf=Ga;ze.StatusMessage=Ca;ze.StatusMessage=Ca;ze.StatusMessageForMorph=tb;ze.StatusMessageForMorph=tb;ze.show=ha;ze.show=ha;ze.showConnector=Fa;ze.showConnector=Fa;ze.Halo=kd;ze.Halo=kd;ze.MorphHighlighter=Tb;ze.MorphHighlighter=Tb;ze.InteractiveMorphSelector=md;ze.InteractiveMorphSelector=md;ze.ProportionalLayoutHalo=wb;ze.ProportionalLayoutHalo=wb;ze.GridLayoutHalo=lc;ze.GridLayoutHalo=lc;ze.FlexLayoutHalo=je;ze.FlexLayoutHalo=je;ze.showAndSnapToGuides=jb;ze.showAndSnapToGuides=
jb;ze.removeSnapToGuidesOf=Ga;ze.removeSnapToGuidesOf=Ga;Ca=Object.freeze({__proto__:null,StatusMessage:Ca,StatusMessageForMorph:tb,show:ha,showConnector:Fa,Halo:kd,MorphHighlighter:Tb,InteractiveMorphSelector:md,ProportionalLayoutHalo:wb,GridLayoutHalo:lc,FlexLayoutHalo:je,showAndSnapToGuides:jb,removeSnapToGuidesOf:Ga,SvgStyleHalo:void 0});Ma("i",Ca);Ma({_:void 0,d:void 0})}}});