System.register(["./__root_module__-7cbd94df.js","./index-a563870d.js","./color-picker-34adc661.js"],function(){var Da,Ab,Rb,jc,cc,je,fd,Yd,jd,Pc,vd,Ld,ge,Td,md,Za,Db,ac,ic,gd,fe,Yb,qc,Ob,Hc,Yc,cd,$b;return{setters:[function(pb){Da=pb.at;Ab=pb.s;Rb=pb.a7;jc=pb.aW;cc=pb.a6;je=pb.a9;fd=pb.aa;Yd=pb.aB;jd=pb.ak;Pc=pb.an;vd=pb.ai;Ld=pb.ao;ge=pb.a3;Td=pb.a1;md=pb.C;Za=pb.aq;Db=pb.au;ac=pb.bS;ic=pb.bt;gd=pb.ac;fe=pb.as;Yb=pb.bi;qc=pb.bs;Ob=pb.bq;Hc=pb.bU},function(pb){Yc=pb.N;cd=pb.I},function(pb){$b=
pb.a}],execute:function(){var pb=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js");pb.fun=Da;pb.string=Ab;pb.obj=Rb;pb.properties=jc;pb.arr=cc;pb.Text=je;pb.config=fd;pb.HorizontalLayout=Yd;pb.VerticalLayout=jd;pb.morph=Pc;pb.Morph=vd;pb.Icon=Ld;pb.pt=ge;pb.Rectangle=Td;pb.Color=md;pb.connect=Za;pb.once=Db;pb.noUpdate=ac;pb.ColorPicker=$b;pb.DropDownList=ic;pb.loadObjectFromPartsbinFolder=gd;pb.cachedControls=new WeakMap;var xc=function(rb){var Kb=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js"),
Ib=Kb.hasOwnProperty("RichTextControl")&&"function"===typeof Kb.RichTextControl?Kb.RichTextControl:Kb.RichTextControl=function(gb){gb&&gb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fe(Ib,rb,[{key:"toggleButton",value:function(gb,ib){gb.master=ib?{auto:"styleguide://SystemIDE/selected button"}:{auto:"styleguide://System/dark button"}}},{key:"reset",value:function(){var gb=this.ui.fontSelection;gb.items=pb.RichTextControl.basicFontItems();
gb.selection=gb.items[0].value;pb.connect(this.target,"selectionChange",this,"update")}},{key:"alignAtTarget",value:function(gb){gb=void 0===gb?!!this.world():gb;var ib=this.target,Lb=ib.world()||$world,tc=this.globalBounds();ib=(ib.selection.isEmpty()?ib.globalBounds():ib.getGlobalTransform().transformRectToRect(ib.selectionBounds().translatedBy(ib.scroll.negated()))).bottomCenter().subPt(tc.topCenter());Lb=Lb.visibleBounds().translateForInclusion(tc.translatedBy(ib)).topLeft().subPt(tc.topLeft());
Lb=this.position.addPt(Lb);gb?this.animate({duration:300,position:Lb}):this.position=Lb}},{key:"removeFocus",value:function(){this.autoRemove&&this.target&&(this.remove(),this.target=null)}},{key:"focusOn",value:function(gb,ib){ib=void 0===ib?!0:ib;var Lb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(tc){if(1==tc.nextAddress)return Lb.target=gb,Lb.update(),tc.yield(Lb.whenRendered(),2);Lb.ui.fontSizeField.relayout();ib&&Lb.alignAtTarget();tc.jumpToEnd()})}},{key:"setupConnections",
value:function(){pb.connect(this.ui.paddingField,"number",this,"setPadding");pb.connect(this.ui.paddingFieldTop,"number",this,"setPaddingTop");pb.connect(this.ui.paddingFieldBottom,"number",this,"setPaddingBottom");pb.connect(this.ui.paddingFieldLeft,"number",this,"setPaddingLeft");pb.connect(this.ui.paddingFieldRight,"number",this,"setPaddingRight")}},{key:"update",value:function(){var gb=this,ib=this.target,Lb=this.updateSpec,tc=ib.selection;tc=tc?tc.isEmpty()?ib.textAttributeAt(tc.start):ib.getStyleInRange(tc):
{};var Qc=this.managedProps,sc=pb.obj.select(ib,Qc);ib=$jscomp.makeIterator(Object.entries(pb.obj.select(tc||{},Qc)));for(tc=ib.next();!tc.done;tc=ib.next())Qc=$jscomp.makeIterator(tc.value),tc=Qc.next().value,Qc=Qc.next().value,"undefined"!==typeof Qc&&(sc[tc]=Qc);pb.noUpdate(function(){for(var Vc=$jscomp.makeIterator(Object.entries(gb.ui)),Q=Vc.next();!Q.done;Q=Vc.next()){var fa=$jscomp.makeIterator(Q.value);Q=fa.next().value;fa=fa.next().value;if(Lb[Q])Lb[Q](sc,fa)}})}},{key:"relayout",value:function(){}},
{key:"changeAttributeInSelectionOrMorph",value:function(gb,ib){var Lb=this.target,tc=Lb.selection;Lb.isLabel||tc.isEmpty()?Lb[gb]="function"===typeof ib?ib(Lb[gb]):ib:(Lb.undoManager.group(),Lb.changeStyleProperty(gb,function(Qc){return"function"===typeof ib?ib(Qc):ib}),Lb.undoManager.group())}},{key:"changeFont",value:function(gb){var ib=this,Lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(tc){if(1==tc.nextAddress)return ib._last=gb,(Lb="custom..."===gb)?tc.yield($world.prompt("Enter font family name",
{requester:ib.target,historyId:"lively.morphic-rich-text-font-names",useLastInput:!0}),3):tc.jumpTo(2);if(2!=tc.nextAddress&&(gb=tc.yieldResult,!gb))return tc.return();ib.changeAttributeInSelectionOrMorph("fontFamily",gb);tc.jumpToEnd()})}},{key:"setPadding",value:function(gb){this.target.padding=pb.Rectangle.inset(gb)}},{key:"setPaddingTop",value:function(gb){var ib=this.target.padding;this.target.padding=pb.Rectangle.inset(ib.left(),gb,ib.right(),ib.bottom())}},{key:"setPaddingLeft",value:function(gb){var ib=
this.target.padding;this.target.padding=pb.Rectangle.inset(gb,ib.top(),ib.right(),ib.bottom())}},{key:"setPaddingRight",value:function(gb){var ib=this.target.padding;this.target.padding=pb.Rectangle.inset(ib.left(),ib.top(),gb,ib.bottom())}},{key:"setPaddingBottom",value:function(gb){var ib=this.target.padding;this.target.padding=pb.Rectangle.inset(ib.left(),ib.top(),ib.right(),gb)}},{key:"setLineWrapping",value:function(gb){this.target.lineWrapping=gb}},{key:"changeFontWeight",value:function(gb){this.changeAttributeInSelectionOrMorph("fontWeight",
gb)}},{key:"changeTextAlign",value:function(gb){this.changeAttributeInSelectionOrMorph("textAlign",gb)}},{key:"changeFontColor",value:function(gb){this.changeAttributeInSelectionOrMorph("fontColor",gb)}},{key:"changeFontSize",value:function(gb){this.changeAttributeInSelectionOrMorph("fontSize",gb)}},{key:"changeFixedWidth",value:function(gb){this.target.fixedWidth=gb}},{key:"changeFixedHeight",value:function(gb){this.target.fixedHeight=gb}},{key:"changeLink",value:function(){var gb=this,ib,Lb,tc,
Qc,sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vc){if(1==Vc.nextAddress)return ib=gb.target,Lb=ib.selection,tc=ib.getStyleInRange(Lb),Qc=tc.link,Vc.yield(gb.world().prompt("Set link",{input:Qc||"https://"}),2);sc=Vc.yieldResult;ib.undoManager.group();ib.setStyleInRange({link:sc||void 0},Lb);ib.undoManager.group();gb.autoRemove&&gb.remove();Vc.jumpToEnd()})}},{key:"toggleUnderline",value:function(){this.changeAttributeInSelectionOrMorph("textDecoration",function(gb){return"underline"===
gb?"none":"underline"})}},{key:"toggleItalic",value:function(){this.changeAttributeInSelectionOrMorph("fontStyle",function(gb){return"italic"===gb?"normal":"italic"})}},{key:"toggleBold",value:function(){this.changeAttributeInSelectionOrMorph("fontWeight",function(gb){return"bold"===gb||"700"===gb?"normal":"bold"})}},{key:"copyStyle",value:function(){var gb=this,ib=this.target,Lb=this.ui.applyStyleButton;ib=ib.selection.isEmpty()?ib.defaultTextStyle:ib.getStyleInRange(ib.selection);var tc=JSON.stringify(ib,
null,2);this.constructor.copiedStyle=ib;Lb.tooltip="paste style\n"+tc;this.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/plain",data:tc},{type:"application/morphic-text-style",styleString:tc}]).then(function(){return gb.setStatusMessage("Copied style\n"+tc)}).catch(function(Qc){return gb.showError(Qc)})}},{key:"pasteStyle",value:function(){var gb=this,ib=this.target,Lb=this.constructor.copiedStyle;ib.selection.isEmpty()?Object.assign(ib,Lb):ib.selections.forEach(function(tc){return ib.addTextAttribute(gb.constructor.copiedStyle,
tc)});this.update()}},{key:"clearStyle",value:function(){var gb=this.target;gb.selections.forEach(function(ib){return gb.resetStyleInRange(ib)});this.update()}},{key:"configureRichTextOptions",value:function(){this.getSubmorphNamed("config panel")&&this.getSubmorphNamed("config panel").remove();var gb=this.defaultSpec,ib=this.uiSpec;gb=this.addMorph({name:"config panel",layout:new pb.VerticalLayout({spacing:5}),epiMorph:!0,submorphs:[].concat($jscomp.arrayFromIterable(Object.keys(gb).map(function(Lb){var tc=
ib.rows.some(function(Qc){return Qc.some(function(sc){return sc===Lb})});return{type:"labeledcheckbox",label:Lb,name:Lb,checked:tc}})),[{layout:new pb.HorizontalLayout({spacing:3}),submorphs:[{type:"button",name:"OK button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}])});gb.center=this.innerBounds().center();pb.connect(gb.getSubmorphNamed("OK button"),"fire",this,"configureAccepted");pb.connect(gb.getSubmorphNamed("cancel button"),"fire",this,"configureCanceled")}},{key:"configureAccepted",
value:function(){var gb=this.getSubmorphNamed("config panel");gb&&(gb.remove(),gb.submorphs.filter(function(ib){return"LabeledCheckBox"===ib.constructor.name}))}},{key:"configureCanceled",value:function(){var gb=this.getSubmorphNamed("config panel");gb&&gb.remove()}},{key:"close",value:function(){var gb=this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(ib){return ib.targetObj===gb&&ib.disconnect()});this.remove()}},{key:"alwaysTargetFocusedMorph",
value:function(){this.startStepping(1500,"updateTarget")}},{key:"updateTarget",value:function(){var gb=this.world();gb&&(gb=gb.focusedMorph)&&(gb.isLabel||gb.isText)&&!this.isAncestorOf(gb)&&this.target!==gb&&this.focusOn(gb,!1)}},{key:"onMouseUp",value:function(gb){var ib=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lb){if(1==Lb.nextAddress)return Lb.yield(ib.whenRendered(),2);ib.update();Lb.jumpToEnd()})}},{key:"attachToWorld",value:function(){pb.connect($world,"onMouseDown",
this,"updateTarget",{garbageCollect:!0})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RichTextControl"}},{key:"properties",get:function(){return{autoRemove:{defaultValue:!1},target:{},toggleColor:{},managedProps:{readOnly:!0,get:function(){return"fontFamily fontWeight fontSize fontStyle isText fontColor textAlign link textDecoration fixedWidth fixedHeight lineWrapping padding".split(" ")}},updateSpec:{get:function(){var gb=this;return Object.assign({fontSelection:function(ib,Lb){var tc=
ib.fontFamily;(ib=tc&&Lb.items.find(function(Qc){return Qc.value.toLowerCase()===tc.toLowerCase()}))?Lb.selection=ib.value:tc&&(Lb.items=Lb.items.concat({isListItem:!0,label:[tc,{fontFamily:tc}],value:tc}),Lb.selection=pb.arr.last(Lb.items));Lb.fit();Lb.width=Math.max(Lb.width,170)},fontWeightSelection:function(ib,Lb){Lb.selection="normal"==ib.fontWeight?"Medium":ib.fontWeight?pb.string.capitalize(ib.fontWeight):"Medium"},boldButton:function(ib,Lb){gb.toggleButton(Lb,"bold"===ib.fontWeight)},italicButton:function(ib,
Lb){gb.toggleButton(Lb,"italic"===ib.fontStyle)},underlineButton:function(ib,Lb){gb.toggleButton(Lb,"underline"===ib.textDecoration)},linkButton:function(ib,Lb){gb.toggleButton(Lb,!!ib.link)},colorPicker:function(ib,Lb){Lb.colorValue=ib.fontColor},fontSizeField:function(ib,Lb){Lb.number=ib.fontSize},fixedWidthControl:function(ib,Lb){ib.isText?Lb.enable():Lb.disable();Lb.checked=ib.fixedWidth},fixedHeightControl:function(ib,Lb){ib.isText?Lb.enable():Lb.disable();Lb.checked=ib.fixedHeight},lineWrappingControl:function(ib,
Lb){var tc=$jscomp.makeIterator(Lb.submorphs);Lb=tc.next().value;tc=tc.next().value;Lb.checked=!!ib.lineWrapping;tc.deactivated=!ib.lineWrapping;tc.deactivated?tc.opacity=.5:(tc.opacity=1,tc.selection=ib.lineWrapping)},paddingControl:function(ib,Lb){var tc=ib.padding,Qc=tc.left();ib=tc.top();var sc=tc.right();tc=tc.bottom();var Vc=!pb.arr.every([Qc,ib,sc,tc],function(Q){return Q==Qc});Lb.get("multi value indicator").visible=Vc;pb.connect(Lb.get("multi value indicator"),"onMouseDown",Lb.get("padding field"),
"number",{converter:"() => left",varMapping:{left:Qc}});Lb.get("padding field").number=Qc;Lb.get("padding field").visible=!Vc;Lb.get("padding field top").number=ib;Lb.get("padding field left").number=Qc;Lb.get("padding field right").number=sc;Lb.get("padding field bottom").number=tc}},["left","center","right","block"].reduce(function(ib,Lb){ib[Lb+"Align"]=function(tc,Qc){gb.toggleButton(Qc,tc.textAlign==Lb)};return ib},{}))}},ui:{get:function(){var gb=this,ib={fontSelection:"font selection",fontWeightSelection:"font weight selection",
boldButton:"bold button",italicButton:"italic button",underlineButton:"underline button",linkButton:"link button",leftAlign:"left align",centerAlign:"center align",rightAlign:"right align",blockAlign:"block align",fontSizeField:"font size field",colorPicker:"color picker",copyStyleButton:"copy style",applyStyleButton:"apply style",removeStyleButton:"remove style",fixedHeightControl:"fixed height control",fixedWidthControl:"fixed width control",lineWrappingControl:"line wrapping control",paddingControl:"padding control",
paddingField:"padding field",paddingFieldTop:"padding field top",paddingFieldLeft:"padding field left",paddingFieldRight:"padding field right",paddingFieldBottom:"padding field bottom"};return pb.obj.extract(ib,pb.obj.keys(ib),function(Lb,tc){return gb.getSubmorphNamed(tc)})}}}}},{key:"openDebouncedFor",value:function(gb){var ib=gb.selection;if(ib.isEmpty()){var Lb=pb.cachedControls.get(gb);Lb&&(Lb.update(),Lb.alignAtTarget(),Lb.world()||gb.world().addMorph(Lb))}else pb.fun.debounceNamed(gb.id+"openRichTextControl",
600,function(){var tc=pb.cachedControls.get(gb);ib.isEmpty()?tc&&tc.removeFocus():(tc&&tc.world()||(tc=new pb.RichTextControl,pb.cachedControls.set(gb,tc)),gb.world().addMorph(tc),tc.focusOn(gb,!0),tc.alwaysTargetFocusedMorph())})()}},{key:"openFor",value:function(gb){var ib=pb.cachedControls.get(gb);ib?ib.update():(ib=new pb.RichTextControl,pb.cachedControls.set(gb,ib),ib.focusOn(gb,!0),ib.alwaysTargetFocusedMorph());ib.alignAtTarget();ib.world()||gb.world().addMorph(ib);return ib}}],Kb,{pathInPackage:function(){return"text/ui.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:624,end:16984})}(pb.Morph);pb.RichTextControl=xc;pb.RichTextControl=xc;pb.RichTextControl=xc;xc=lively.FreezerRuntime.recorderFor("ProtoSearchField/index.js");xc.SearchField=Yb;var Lc=function(rb){var Kb=lively.FreezerRuntime.recorderFor("ProtoSearchField/index.js"),Ib=Kb.hasOwnProperty("ProtoSearchField")&&
"function"===typeof Kb.ProtoSearchField?Kb.ProtoSearchField:Kb.ProtoSearchField=function(gb){gb&&gb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fe(Ib,rb,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoSearchField"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Kb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoSearchField",version:"0.1.1-0"}}},{start:76,end:221})}(xc.SearchField);Lc=xc.ProtoSearchField;xc.default=Lc;var Ga=lively.FreezerRuntime.recorderFor("ProtoTree/index.js");Ga.Tree=qc;Ga.TreeData=Ob;xc=function(rb){var Kb=lively.FreezerRuntime.recorderFor("ProtoTree/index.js"),Ib=Kb.hasOwnProperty("TestTreeData")&&"function"===typeof Kb.TestTreeData?Kb.TestTreeData:Kb.TestTreeData=function(gb){gb&&
gb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fe(Ib,rb,[{key:"display",value:function(gb){return gb.name}},{key:"isCollapsed",value:function(gb){return gb.isCollapsed}},{key:"collapse",value:function(gb,ib){gb.isCollapsed=ib}},{key:"getChildren",value:function(gb){return gb.isLeaf?null:gb.isCollapsed?[]:gb.children}},{key:"isLeaf",value:function(gb){return gb.isLeaf}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TestTreeData"}}],
Kb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoTree",version:"0.1.1-2"}}},{start:113,end:417})}(Ga.TreeData);Ga.TestTreeData=xc;Ga.TestTreeData=xc;Ga.TestTreeData=xc;xc=function(rb){var Kb=lively.FreezerRuntime.recorderFor("ProtoTree/index.js"),Ib=Kb.hasOwnProperty("ProtoTree")&&"function"===typeof Kb.ProtoTree?Kb.ProtoTree:
Kb.ProtoTree=function(gb){gb&&gb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fe(Ib,rb,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoTree"}},{key:"properties",get:function(){return{treeData:{initialize:function(){this.treeData=new Ga.TestTreeData({name:"root",isCollapsed:!1,isLeaf:!1,children:[{name:"child 1",isLeaf:!0},{name:"child 2",isLeaf:!1,isCollapsed:!0,children:[{name:"child 2 - 1",isLeaf:!0}]},
{name:"child 3",isLeaf:!1,isCollapsed:!1,children:[{name:"child 3 - 1",isLeaf:!0},{name:"child 3 - 2",isLeaf:!0}]},{name:"child 4",isLeaf:!0}]})}},master:{initialize:function(){}}}}}],Kb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoTree",version:"0.1.1-2"}}},{start:434,end:1297})}(Ga.Tree);xc=Ga.ProtoTree;Ga.default=xc;xc=
lively.FreezerRuntime.recorderFor("ProtoNumberWidget/index.js");xc.NumberWidget=Yc;Lc=function(rb){var Kb=lively.FreezerRuntime.recorderFor("ProtoNumberWidget/index.js"),Ib=Kb.hasOwnProperty("ProtoNumberWidget")&&"function"===typeof Kb.ProtoNumberWidget?Kb.ProtoNumberWidget:Kb.ProtoNumberWidget=function(gb){gb&&gb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fe(Ib,rb,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoNumberWidget"}},
{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Kb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoNumberWidget",version:"0.1.1-0"}}},{start:76,end:224})}(xc.NumberWidget);Lc=xc.ProtoNumberWidget;xc.default=Lc;xc=lively.FreezerRuntime.recorderFor("FrameResizer/index.js");xc.Morph=vd;Lc=function(rb){var Kb=
lively.FreezerRuntime.recorderFor("FrameResizer/index.js"),Ib=Kb.hasOwnProperty("FrameResizer")&&"function"===typeof Kb.FrameResizer?Kb.FrameResizer:Kb.FrameResizer=function(gb){gb&&gb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fe(Ib,rb,[{key:"onDrag",value:function(gb){var ib=this.owner.left;gb=gb.positionIn(this).x;gb*="left"==this.direction?-1:1;this.owner.width+=gb;350>this.owner.width&&(gb+=350-this.owner.width,this.owner.width=
350);this.owner.left="left"==this.direction?ib-gb:ib}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FrameResizer"}},{key:"properties",get:function(){return{direction:{type:"Enum",values:["left","right"]}}}}],Kb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"FrameResizer",version:"0.1.1-24"}}},{start:56,end:840})}(xc.Morph);
Lc=xc.FrameResizer;xc.default=Lc;var Ra=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js");Ra.Morph=vd;Ra.morph=Pc;Ra.layouts=Hc;Ra.string=Ab;Ra.connect=Za;Ra.noUpdate=ac;Ra.InteractiveMorphSelector=cd;Ra.Color=md;Ra.pt=ge;xc=function(rb){var Kb=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js"),Ib=Kb.hasOwnProperty("ShapeLayoutControl")&&"function"===typeof Kb.ShapeLayoutControl?Kb.ShapeLayoutControl:Kb.ShapeLayoutControl=function(gb){gb&&gb[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fe(Ib,rb,[{key:"focusOn",value:function(gb){this.target=gb;this.update(!1)}},{key:"setupConnections",value:function(){var gb=this.ui;Ra.connect(gb.submorphSettingsControl,"fire",this,"chooseSubmorphToChangeLayoutSettings");Ra.connect(gb.dragmeControl,"onDragStart",this,"onSubmorphSettingsDragStart");Ra.connect(gb.xAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "x",\n        submorph: self.selectedSubmorph,\n      })',
varMapping:{self:this}});Ra.connect(gb.yAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "y",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});for(var ib={},Lb=$jscomp.makeIterator(this.managedProps),tc=Lb.next();!tc.done;ib={$jscomp$loop$prop$prop$2288:ib.$jscomp$loop$prop$prop$2288},tc=Lb.next()){var Qc=$jscomp.makeIterator(tc.value),sc=Qc.next().value;tc=Qc.next().value;Qc.next().value||
(ib.$jscomp$loop$prop$prop$2288=this.join(sc),Qc=gb[this.join(sc,"control")],Ra.connect(Qc,tc,this,"updateLayout",{updater:function(Vc){return function(Q,fa){Q(Vc.$jscomp$loop$prop$prop$2288,fa)}}(ib),varMapping:{prop:ib.$jscomp$loop$prop$prop$2288}}))}}},{key:"lower",value:function(gb){return gb.charAt(0).toLowerCase()+gb.slice(1)}},{key:"join",value:function(gb,ib){return this.lower(Ra.string.camelCaseString(gb+(ib?" "+ib:"")))}},{key:"updateLayoutOfTarget",value:function(gb){gb=Ra.layouts[Ra.string.camelCaseString(gb)];
this.target.layout=gb?new gb({autoResize:!1}):null;this.update()}},{key:"updateLayout",value:function(gb,ib){this.target.layout[gb]=ib}},{key:"update",value:function(gb){var ib=this;this.target&&Ra.noUpdate(function(){for(var Lb=ib.ui,tc=ib.target.layout||{name:function(){return"No"}},Qc=$jscomp.makeIterator(ib.managedProps),sc=Qc.next();!sc.done;sc=Qc.next()){var Vc=$jscomp.makeIterator(sc.value);sc=Vc.next().value;var Q=Vc.next().value;Vc.next();Vc=Lb[ib.join(sc,"control")];var fa=Lb[ib.join(sc,
"label")];if(Q)if("type"===sc)Vc.selection=tc.name()+" Layout";else{var Ia=tc[ib.join(sc)],Sa="undefined"!==typeof Ia;if(Sa){switch(sc){case "align":Vc.items=tc.possibleAlignValues;break;case "direction":Vc.items=tc.possibleDirectionValues;break;case "axis":Vc.items=tc.possibleAxisValues}Vc[Q]=Ia}fa.isLayoutable=fa.visible=Sa}}ib.showGridLayoutControl("Grid"===tc.name());ib.showProportionalControl("Proportional"===tc.name())})}},{key:"updateSubmorphProportionalLayoutSettings",value:function(gb){var ib=
{};this.target.layout.changeSettingsFor(gb.submorph,(ib[gb.axis]=gb.policy,ib),!0)}},{key:"onSubmorphSettingsDragStart",value:function(gb){var ib=this;gb.stop();var Lb=this.target.layout,tc=Lb.settingsFor(this.selectedSubmorph),Qc=[],sc;for(sc in tc)Qc=[].concat($jscomp.arrayFromIterable(Qc),[sc+": ",{fontWeight:"bold"},tc[sc]+" ",{}]);var Vc=Ra.morph({type:"label",fontColor:Ra.Color.white,value:Qc,fill:Ra.Color.black.withA(.7),padding:5,borderRadius:10,isLayoutable:!1});Vc.wantsToBeDroppedOn=function(Q){return Lb.layoutableSubmorphs.includes(Q)};
Vc.onBeingDroppedOn=function(Q,fa){Vc.remove();if(Q=Lb.layoutableSubmorphs.includes(fa)?fa:gb.world.morphsContainingPoint(gb.hand.position).find(function(Ia){return Lb.layoutableSubmorphs.includes(Ia)}))ib.updateSubmorphProportionalLayoutSettings({policy:tc.x,axis:"x",submorph:Q}),ib.updateSubmorphProportionalLayoutSettings({policy:tc.y,axis:"y",submorph:Q}),Q.show(),$world.setStatusMessage("layout settings applied")};gb.hand.grab(Vc);Vc.moveBy(Ra.pt(10,10))}},{key:"chooseSubmorphToChangeLayoutSettings",
value:function(){var gb=this,ib,Lb,tc,Qc,sc,Vc,Q,fa,Ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sa){switch(Sa.nextAddress){case 1:return ib=gb.target.layout.layoutableSubmorphs,gb.manageFocus=!0,gb.env.eventDispatcher.isKeyPressed("Shift")?(tc=ib.map(function(ec){return{isListItem:!0,string:String(ec),value:ec}}),Sa.yield($world.listPrompt("Select morph",tc,{onSelection:function(ec){return ec.show()}}),5)):Sa.yield(Ra.InteractiveMorphSelector.selectMorph(gb.world(),gb,function(ec){return ib.includes(ec)}),
4);case 4:Lb=Sa.yieldResult;Sa.jumpTo(3);break;case 5:Qc=Sa.yieldResult,sc=$jscomp.makeIterator(Qc.selected),Lb=sc.next().value;case 3:gb.manageFocus=!1;gb.selectedSubmorph=Lb;if(!Lb)return Sa.return();Vc=gb.ui;Q=Vc.xAxisPolicyControl;fa=Vc.yAxisPolicyControl;Ia=gb.target.layout.settingsFor(Lb);Ra.noUpdate(function(){Q.selection=Ia.x;fa.selection=Ia.y});Sa.jumpToEnd()}})}},{key:"showProportionalControl",value:function(gb){var ib=this.ui;[ib.submorphSettingsControl,ib.dragmeControl,ib.xAxisPolicyControl,
ib.xAxisPolicyLabel,ib.yAxisPolicyControl,ib.yAxisPolicyLabel].forEach(function(Lb){Lb.isLayoutable=gb;Lb.visible=gb})}},{key:"showGridLayoutHalo",value:function(){$world.showLayoutHaloFor(this.target)}},{key:"showGridLayoutControl",value:function(gb){var ib=this.ui.configureGridLayoutControl;ib.visible=ib.isLayoutable=gb}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShapeLayoutControl"}},{key:"properties",get:function(){return{managedProps:{get:function(){return[["type","selection",
!0],["align","selection"],["direction","selection"],["axis","selection"],["spacing","number"],["auto resize","checked"],["resize submorphs","checked"],["x axis policy","selection",!0],["y axis policy","selection",!0],["react to submorph animations","checked"],["submorph settings",!1,!0],["order by index","checked"],["dragme",!1,!0],["configure grid layout",!1,!0]]}},ui:{readOnly:!0,get:function(){for(var gb={labelContainer:this.getSubmorphNamed("label container"),controlContainer:this.getSubmorphNamed("control container")},
ib=$jscomp.makeIterator(this.managedProps),Lb=ib.next();!Lb.done;Lb=ib.next()){var tc=$jscomp.makeIterator(Lb.value).next().value;Lb=tc+" label";tc+=" control";gb[this.join(Lb)]=this.getSubmorphNamed(Lb);gb[this.join(tc)]=this.getSubmorphNamed(tc)}return gb}}}}}],Kb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeLayoutControl",
version:"0.1.1-166"}}},{start:345,end:7771})}(Ra.Morph);xc=Ra.ShapeLayoutControl;Ra.default=xc}}});