System.register(["./__root_module__-dce2a509.js"],function(Ba){var zb,Ib,nc,bc,Sd,Vc,Ud,Yc,Oc,qd,ie,Ye,sf,ne,cc,Hc,Md,fc,$d,pe,Cc,Ic,Sb,Jc,dd,Jd,Kd,Hb,Bb,Mb,Na,Ua,Oa,Ia,eb,cb,ob,Zb,mc,Tb,pa,Ja,X;return{setters:[function(ua){zb=ua.ax;Ib=ua.a3;nc=ua.C;bc=ua.ab;Sd=ua.a8;Vc=ua.$;Ud=ua.a7;Yc=ua.a1;Oc=ua.a2;qd=ua.aa;ie=ua.aA;Ye=ua.as;sf=ua.an;ne=ua.aY;cc=ua.au;Hc=ua.aj;Md=ua.aZ;fc=ua.aw;$d=ua.az;pe=ua.a_;Cc=ua.aD;Ic=ua.ac;Sb=ua.aq;Jc=ua.g;dd=ua.am;Jd=ua.P;Kd=ua.a$;Hb=ua.at;Bb=ua.a6;Mb=ua.av;Na=ua.b0;
Ua=ua.r;Oa=ua.ap;Ia=ua.b1;eb=ua.b2;cb=ua.b3;ob=ua.ad;Zb=ua.b4;mc=ua.ar;Tb=ua.b5;pa=ua.b6;Ja=ua.b7;X=ua.aS}],execute:function(){function ua(hb){(hb=sc.cachedGuideLines.get(hb))&&hb.forEach(function(Xa){return Xa.remove()})}function ab(hb,Xa,qb,P,qa){Xa=void 0===Xa?!0:Xa;qb=void 0===qb?!0:qb;P=void 0===P?10:P;qa=void 0===qa?100:qa;if(Xa||qb){var fb=hb.owner,Lb=fb.world();fb=fb.getGlobalTransform();var gc=hb.owner.submorphs.filter(function(ad){return ad!==hb&&!ad.isEpiMorph&&ad.visible&&ad.reactsToPointer}),
Zc=sc.findAlignedMorphs(hb,gc,P,qa,"left top right bottom hCenter vCenter".split(" "),"left top right bottom hCenter vCenter".split(" "));qa=[];var Qd=0,ge=0,Sc=0,Pe=0;fb.e-=Lb.scroll.x;fb.f-=Lb.scroll.y;if(Zc){Zc=$jscomp.makeIterator(Zc);for(var Ue=Zc.next();!Ue.done;Ue=Zc.next()){Ue=$jscomp.makeIterator(Ue.value);Ue.next();var Me=Ue.next().value;Ue=Me.vertical;Me=$jscomp.makeIterator(Me.horizontal);for(var Gf=Me.next();!Gf.done;Gf=Me.next()){Gf=Gf.value;var Hf=Gf.edgeAVal,Vb=Gf.refPointsA,Ng=Gf.refPointsB,
pf=Gf.edgeBVal,tg=Math.ceil(P-Gf.delta),Ve=Math.min(Vb.top,Ng.top);Vb=Math.max(Vb.bottom,Ng.bottom);Gf.maxDist>P&&(tg-=P/2);Qd<tg&&(Qd=tg,Sc=pf-Hf);qa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:sc.guideWidth,start:fb.transformPoint(sc.pt(pf,Ve)),end:fb.transformPoint(sc.pt(pf,Vb)),fill:sc.guideColor,guideType:"h",priority:tg})}Ue=$jscomp.makeIterator(Ue);for(Me=Ue.next();!Me.done;Me=Ue.next())Me=Me.value,Gf=Me.edgeAVal,Ve=Me.refPointsA,Vb=Me.refPointsB,Hf=Me.edgeBVal,pf=Math.ceil(P-
Me.delta),tg=Math.min(Ve.left,Vb.left),Ve=Math.max(Ve.right,Vb.right),Me.maxDist>P&&(pf-=P/2),ge<pf&&Math.abs(Hf-Gf)<=P&&(ge=pf,Pe=Hf-Gf),qa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:sc.guideWidth,start:fb.transformPoint(sc.pt(tg,Hf)),end:fb.transformPoint(sc.pt(Ve,Hf)),fill:sc.guideColor,guideType:"v",priority:pf})}}if(!Qd||!ge){gc=[hb].concat($jscomp.arrayFromIterable(gc));Gf=sc.computeClosestMorphs(gc);Me=Gf[0];gc=Me.l;Zc=Me.r;Ue=Me.t;Me=Me.b;var Ha;if(gc||Zc||Ue||Me){var Va=(gc||
Zc||Ue||Me).refPointsA;for(Hf=1;Hf<Gf.length&&(Vb=Gf[Hf],pf=Vb.l,tg=Vb.r,Ve=Vb.t,Vb=Vb.b,Qd||(gc&&pf&&gc.index!==pf.index&&Math.abs(pf.dist-gc.dist)<=P?Ha=Object.assign({neighbor:Hf,direction:"left"},pf):Zc&&tg&&Zc!==tg.index&&Math.abs(tg.dist-Zc.dist)<=P&&(Ha=Object.assign({neighbor:Hf,direction:"right"},tg))),ge||(Ue&&Ve&&Ue.index!==Ve.index&&Math.abs(Ve.dist-Ue.dist)<=P?Ha=Object.assign({neighbor:Hf,direction:"top"},Ve):Me&&Vb&&Me.index!==Vb.index&&Math.abs(Vb.dist-Me.dist)<=P&&(Ha=Object.assign({neighbor:Hf,
direction:"bottom"},Vb))),!Ha);Hf++);}if(Ha){var Db=Ha;P=Db.direction;Ve=Db.dist;var da=Va.left;Ng=Va.top;var Fa=Va.bottom,mb=Va.right,xb=Va.width,yc=Va.height;Vb=Db.refPointsA;Va=Vb.left;Gf=Vb.top;Hf=Vb.bottom;pf=Vb.right;tg=Vb.width;Vb=Vb.height;var xc=Db.refPointsB,gd=xc.left;Db=xc.top;var td=xc.bottom;xc=xc.right;mb="left"===P?da:"right"===P?mb:da+xb/2;Fa="bottom"===P?Fa:"top"===P?Ng:Ng+yc/2;da="left"===P?mb-Ve:"right"===P?mb+Ve:da+xb/2;Ve="bottom"===P?Fa+Ve:"top"===P?Fa-Ve:Ng+yc/2;Ng="left"===
P?xc:"right"===P?gd:Va+tg/2;xb="bottom"===P?Db:"top"===P?td:Gf+Vb/2;!qb||Qd||"right"!==P&&"left"!==P||(Qd=10,Sc=(Ha.dist-(Zc||gc).dist)*("right"===P?-1:1),mb+=Sc,da+=Sc);!qb||ge||"top"!==P&&"bottom"!==P||(ge=10,Pe=((Ue||Me).dist-Ha.dist)*("top"===P?-1:1),Fa+=Pe,Ve+=Pe);qa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:fb.transformPoint(sc.pt("left"===P?Va:"right"===P?pf:Va+tg/2,"bottom"===P?Hf:"top"===P?Gf:Gf+Vb/2)),end:fb.transformPoint(sc.pt(Ng,xb)),fill:sc.Color.orange,height:sc.guideWidth,
guideType:P,priority:10},{type:"line",epiMorph:!0,hasFixedPosition:!0,start:fb.transformPoint(sc.pt(mb,Fa)),end:fb.transformPoint(sc.pt(da,Ve)),fill:sc.Color.orange,height:sc.guideWidth,guideType:P,priority:10})}}qb&&(Sc||Pe)&&hb.moveBy(sc.pt(Sc,Pe));if(Xa){qa=qa.filter(function(ad){var nf=ad.guideType;ad=ad.priority;return"h"===nf?ad===Qd:"v"===nf?ad===ge:!0});(Xa=sc.cachedGuideLines.get(hb))||sc.cachedGuideLines.set(hb,Xa=[]);for(qb=0;qb<qa.length;qb++)Ha=void 0,Xa[qb]?Ha=Object.assign(Xa[qb],qa[qb]):
(Ha=sc.morph(qa[qb]),Xa.push(Ha)),Ha.owner||Lb.addMorph(Ha);Xa.slice(qb).forEach(function(ad){return ad.remove()});sc.fun.debounceNamed(hb.id+"-drag-guides-cleanup",1300,function(){var ad=sc.cachedGuideLines.get(hb);ad&&ad.forEach(function(nf){return nf.remove()})})()}}}function rb(hb,Xa,qb,P,qa,fb){qb=void 0===qb?!0:qb;P=void 0===P?!0:P;qa=void 0===qa?5:qa;fb=void 0===fb?100:fb;if(qb||P){var Lb=hb.owner,gc=Lb.world(),Zc=Lb.getGlobalTransform(),Qd=hb.owner.submorphs.filter(function(Fa){return Fa!==
hb&&!Fa.isEpiMorph&&Fa.visible&&Fa.reactsToPointer});Lb=(Xa.includes("left")||Xa.includes("right")?"x":"")+(Xa.includes("top")||Xa.includes("bottom")?"y":"");var ge=sc.findMorphsWithSimilarWidthOrHeight(hb,Lb,Qd,qa,fb),Sc=-Infinity,Pe=-Infinity,Ue=0,Me=0,Gf=0,Hf=0,Vb=0,Ng=0;Lb=[];Zc.e-=gc.scroll.x;Zc.f-=gc.scroll.y;if(ge){ge=$jscomp.makeIterator(ge);for(var pf=ge.next();!pf.done;pf=ge.next()){pf=$jscomp.makeIterator(pf.value);pf.next();var tg=pf.next().value;pf=tg.similarIn;var Ve=tg.delta,Ha=tg.refPointsA,
Va=tg.refPointsB;tg=qa-Ve+(fb-tg.minDist);"width"===pf?Sc<tg&&(Sc=tg,Xa.includes("left")&&(Me=-Ve),Xa.includes("right")&&(Ue=Ve)):Pe<tg&&(Pe=tg,Xa.includes("top")&&(Gf=-Ve),Xa.includes("bottom")&&(Hf=Ve));Ve={type:"line",epiMorph:!0,hasFixedPosition:!0,height:sc.guideWidth,fill:sc.guideColor,guideType:pf,priority:tg,start:Zc.transformPoint("width"===pf?sc.pt(Ha.left,Ha.top+Ha.height/2):sc.pt(Ha.left+Ha.width/2,Ha.top)),end:Zc.transformPoint("width"===pf?sc.pt(Ha.right,Ha.top+Ha.height/2):sc.pt(Ha.left+
Ha.width/2,Ha.bottom))};pf=Object.assign({},Ve,{start:Zc.transformPoint("width"===pf?sc.pt(Va.left,Va.top+Va.height/2):sc.pt(Va.left+Va.width/2,Va.top)),end:Zc.transformPoint("width"===pf?sc.pt(Va.right,Va.top+Va.height/2):sc.pt(Va.left+Va.width/2,Va.bottom))});Lb.push(Ve,pf)}}if(fb=sc.findAlignedMorphs(hb,Qd,qa,fb,Xa,void 0))for(fb=$jscomp.makeIterator(fb),Qd=fb.next();!Qd.done;Qd=fb.next()){Qd=$jscomp.makeIterator(Qd.value);Qd.next();ge=Qd.next().value;Qd=ge.vertical;ge=$jscomp.makeIterator(ge.horizontal);
for(pf=ge.next();!pf.done;pf=ge.next()){pf=pf.value;Va=pf.edgeAVal;var Db=pf.refPointsA,da=pf.refPointsB;Ve=pf.edgeBVal;Ha=Math.ceil(qa-pf.delta);tg=Math.min(Db.top,da.top);Db=Math.max(Db.bottom,da.bottom);pf.maxDist>qa&&(Ha-=qa/2);Vb<Ha&&(Vb=Ha,Xa.includes("left")&&(Me=-(Ve-Va)),Xa.includes("right")&&(Ue=+(Ve-Va)));Lb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:sc.guideWidth,start:Zc.transformPoint(sc.pt(Ve,tg)),end:Zc.transformPoint(sc.pt(Ve,Db)),fill:sc.guideColor,guideType:"h",priority:Ha})}Qd=
$jscomp.makeIterator(Qd);for(ge=Qd.next();!ge.done;ge=Qd.next())ge=ge.value,pf=ge.edgeAVal,tg=ge.refPointsA,Db=ge.refPointsB,Va=ge.edgeBVal,Ve=Math.ceil(qa-ge.delta),Ha=Math.min(tg.left,Db.left),tg=Math.max(tg.right,Db.right),ge.maxDist>qa&&(Ve-=qa/2),Ng<Ve&&Math.abs(Va-pf)<=qa&&(Ng=Ve,Xa.includes("top")&&(Gf=Va-pf),Xa.includes("bottom")&&(Hf=Va-pf)),Lb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:sc.guideWidth,start:Zc.transformPoint(sc.pt(Ha,Va)),end:Zc.transformPoint(sc.pt(tg,Va)),
fill:sc.guideColor,guideType:"v",priority:Ve})}P&&(Me&&(hb.left+=Me,hb.right-=Me),Gf&&(hb.top+=Gf,hb.bottom-=Gf),Ue&&(hb.width+=Ue),Hf&&(hb.height+=Hf));if(qb){Lb=Lb.filter(function(Fa){var mb=Fa.guideType;Fa=Fa.priority;return"width"===mb?Fa===Sc:"height"===mb?Fa===Pe:"v"===mb?Fa===Ng:"h"===mb?Fa===Vb:!1});(Xa=sc.cachedGuideLines.get(hb))||sc.cachedGuideLines.set(hb,Xa=[]);for(qb=0;qb<Lb.length;qb++)P=void 0,Xa[qb]?P=Object.assign(Xa[qb],Lb[qb]):(P=sc.morph(Lb[qb]),Xa.push(P)),P.owner||gc.addMorph(P);
Xa.slice(qb).forEach(function(Fa){return Fa.remove()});sc.fun.debounceNamed(hb.id+"-drag-guides-cleanup",1300,function(){var Fa=sc.cachedGuideLines.get(hb);Fa&&Fa.forEach(function(mb){return mb.remove()})})()}}}function vc(hb,Xa){Xa=void 0===Xa?!1:Xa;var qb=Nb.MorphicEnv.default().world;if(null===hb||void 0===hb)hb=String(hb);if(hb.isMorph)return Nb.showRect(hb.world(),hb.globalBounds().translatedBy(hb.world().scroll.negated()),Xa);if(hb.isPoint)return Nb.showRect(qb,new Nb.Rectangle(hb.x-5,hb.y-
5,10,10));if(hb.isLine)return Nb.showLine(qb,hb);if(hb.isRectangle)return Nb.showRect(qb,hb);if("undefined"!==typeof Nb.Element&&hb instanceof Nb.Element)return Nb.showRect(qb,Nb.Rectangle.fromElement(hb));if("number"===typeof hb||"symbol"===typeof hb||"boolean"===typeof hb||"undefined"!==typeof Nb.Node&&hb instanceof Nb.Node||hb instanceof RegExp)hb=String(hb);"object"===typeof hb&&(hb=Nb.obj.inspect(hb,{maxDepth:1}));return"string"===typeof hb&&1===arguments.length?qb.setStatusMessage(hb):qb.setStatusMessage(Nb.string.formatFromArray(Array.from(arguments)))}
function Bd(hb,Xa,qb){qb=void 0===qb?3E3:qb;var P,qa,fb,Lb,gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zc){if(1==Zc.nextAddress){if(!(hb&&hb.world()&&Xa&&Xa.world()))return Zc.return(null);P=hb.owner.worldPoint(hb.center);qa=Xa.owner.worldPoint(Xa.center);fb=P.lineTo(qa).sampleN(2)[1];Lb={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:Nb.Color.red,fill:Nb.Color.red,cx:5,cy:5,r:4}]};gc=$world.addMorph(new Nb.Path({position:fb,
renderOnGPU:!0,vertices:[Nb.pt(0),Nb.pt(0)],borderWidth:2,startMarker:Lb,endMarker:Lb,borderColor:Nb.Color.red}));return Zc.yield(gc.whenRendered(),2)}if(3!=Zc.nextAddress)return Zc.yield(gc.animate({opacity:1,customTween:function(Qd){var ge=gc.center;gc.vertices=[Nb.pt(0).interpolate(Qd,P.subPt(fb)),Nb.pt(0).interpolate(Qd,qa.subPt(fb))];gc.center=ge},duration:400}),3);qb&&setTimeout(function(){return gc.fadeOut()},qb);return Zc.return(gc)})}Ba({a:ab,d:Bd,r:ua,s:vc});var sc=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
sc.removeSnapToGuidesOf=ua;sc.showAndSnapToGuides=ab;sc.showAndSnapToResizeGuides=rb;sc.computeRefPoints=function(hb){var Xa=hb.x,qb=hb.y,P=hb.width;hb=hb.height;return{left:Xa,top:qb,hCenter:Xa+P/2,vCenter:qb+hb/2,right:Xa+P,bottom:qb+hb,width:P,height:hb}};sc.findEdgesInAlignment=function(hb,Xa,qb,P,qa,fb,Lb,gc,Zc,Qd){qb=void 0===qb?15:qb;fb=void 0===fb?0:fb;Lb=void 0===Lb?0:Lb;gc=void 0===gc?0:gc;Zc=void 0===Zc?0:Zc;Qd=void 0===Qd?0:Qd;for(var ge=[],Sc=[],Pe=0;Pe<sc.edges.length;Pe++){var Ue=$jscomp.makeIterator(sc.edges[Pe]),
Me=Ue.next().value,Gf=Ue.next().value;Ue=Ue.next().value;var Hf=hb[Gf],Vb=Xa[Ue],Ng=Math.max(Hf,Vb)-Math.min(Hf,Vb);Ng>qb||!(P&&!P.includes(Gf)||qa&&!qa.includes(Ue))&&("vertical"===Me?ge:Sc).push({delta:Ng,edgeA:Gf,edgeB:Ue,edgeAVal:Hf,edgeBVal:Vb,refPointsA:hb,refPointsB:Xa,distLeft:fb,distTop:Lb,distRight:gc,distBottom:Zc,maxDist:Qd})}return ge.length||Sc.length?{vertical:ge,horizontal:Sc}:null};sc.findAlignedMorphs=function(hb,Xa,qb,P,qa,fb){qb=void 0===qb?15:qb;P=void 0===P?Infinity:P;for(var Lb,
gc=sc.computeRefPoints(hb.bounds()),Zc=0;Zc<Xa.length;Zc++){var Qd=Xa[Zc];if(Qd!==hb){var ge=sc.computeRefPoints(Qd.bounds()),Sc=Math.max(0,gc.left-ge.right),Pe=Math.max(0,ge.left-gc.right),Ue=Math.max(0,gc.top-ge.bottom),Me=Math.max(0,ge.top-gc.bottom);Math.max(Me,Ue,Pe,Sc)>P||!(ge=sc.findEdgesInAlignment(gc,ge,qb,qa,fb,Sc,Ue,Pe,Me,Math.max(Me,Ue,Pe,Sc)))||(Lb||(Lb=new Map),Lb.set(Qd,ge))}}hb=hb.owner;Xa=sc.computeRefPoints(hb.innerBounds());if(qb=sc.findEdgesInAlignment(gc,Xa,qb))Lb||(Lb=new Map),
Lb.set(hb,qb);return Lb};sc.findMorphsWithSimilarWidthOrHeight=function(hb,Xa,qb,P,qa){P=void 0===P?15:P;qa=void 0===qa?Infinity:qa;for(var fb,Lb=sc.computeRefPoints(hb.bounds()),gc=0;gc<qb.length;gc++){var Zc=qb[gc];if(Zc!==hb){var Qd=sc.computeRefPoints(Zc.bounds()),ge=Math.max(0,Lb.left-Qd.right),Sc=Math.max(0,Qd.left-Lb.right),Pe=Math.max(0,Lb.top-Qd.bottom),Ue=Math.max(0,Qd.top-Lb.bottom),Me=Math.min(Ue,Pe,Sc,ge),Gf=Math.max(Ue,Pe,Sc,ge);if(!(Math.max(Ue,Pe,Sc,ge)>qa)){Sc=Lb;ge=Sc.width;Sc=Sc.height;
Ue=Qd;Pe=Ue.width;Ue=Ue.height;var Hf=Pe-ge,Vb=Ue-Sc;("x"===Xa||"xy"===Xa)&&Math.abs(Hf)<=P&&(fb||(fb=new Map),fb.set(Zc,{similarIn:"width",minDist:Me,maxDist:Gf,refPointsA:Lb,refPointsB:Qd,valA:ge,valB:Pe,delta:Hf}));("y"===Xa||"xy"===Xa)&&Math.abs(Vb)<=P&&(fb||(fb=new Map),fb.set(Zc,{similarIn:"height",minDist:Me,maxDist:Gf,refPointsA:Lb,refPointsB:Qd,valA:Sc,valB:Ue,delta:Vb}))}}}return fb};sc.closest=function(hb,Xa,qb,P,qa,fb,Lb,gc){gc=void 0===gc?!0:gc;var Zc=P[hb],Qd=qa[hb],ge=fb[hb];Xa=Lb[hb];
for(var Sc,Pe,Ue,Me,Gf=0;Gf<qa.length;Gf++)hb===Gf||Zc<qa[Gf]||Sc&&qa[Sc.index]>=qa[Gf]||gc&&Lb[hb]<fb[Gf]||fb[hb]>Lb[Gf]||(Sc={index:Gf,dist:Zc-qa[Gf],refPointsA:qb[hb],refPointsB:qb[Gf]});for(Zc=0;Zc<P.length;Zc++)hb===Zc||Qd>P[Zc]||Pe&&P[Pe.index]<=P[Zc]||gc&&Lb[hb]<fb[Zc]||fb[hb]>Lb[Zc]||(Pe={index:Zc,dist:P[Zc]-Qd,refPointsA:qb[hb],refPointsB:qb[Zc]});for(Qd=0;Qd<Lb.length;Qd++)hb===Qd||ge<Lb[Qd]||Ue&&Lb[Ue.index]>=Lb[Qd]||gc&&P[hb]>qa[Qd]||qa[hb]<P[Qd]||(Ue={index:Qd,dist:ge-Lb[Qd],refPointsA:qb[hb],
refPointsB:qb[Qd]});for(Lb=0;Lb<fb.length;Lb++)hb===Lb||Xa>fb[Lb]||Me&&fb[Me.index]<=fb[Lb]||gc&&P[hb]>qa[Lb]||qa[hb]<P[Lb]||(Me={index:Lb,dist:fb[Lb]-Xa,refPointsA:qb[hb],refPointsB:qb[Lb]});return{l:Sc,r:Pe,t:Ue,b:Me}};sc.computeClosestMorphs=function(hb){for(var Xa=[],qb=[],P=[],qa=[],fb=[],Lb=[],gc=0;gc<hb.length;gc++){var Zc=sc.computeRefPoints(hb[gc].bounds());fb.push(Zc);var Qd=Zc.right,ge=Zc.top,Sc=Zc.bottom;Xa.push(Zc.left);qb.push(Qd);P.push(ge);qa.push(Sc)}for(gc=0;gc<hb.length;gc++)Lb.push(sc.closest(gc,
hb,fb,Xa,qb,P,qa));return Lb};sc.fun=zb;sc.pt=Ib;sc.Color=nc;sc.morph=bc;sc.cachedGuideLines=new WeakMap;sc.guideWidth=1;sc.guideColor=sc.Color.orange.lighter();sc.removeSnapToGuidesOf=ua;sc.removeSnapToGuidesOf=ua;sc.showAndSnapToGuides=ab;sc.showAndSnapToGuides=ab;sc.showAndSnapToResizeGuides=rb;sc.showAndSnapToResizeGuides=rb;sc.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom",
"vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];var Nb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js");Nb.show=vc;Nb.showRect=function(hb,Xa,qb){var P=
Nb.BoundsMarker.highlightBounds(Xa);return qb?Nb.showInLoop(hb,P,Xa):Nb.showThenHide(hb,P)};Nb.showInLoop=function(hb,Xa,qb){var P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qa){switch(qa.nextAddress){case 1:return Nb.showThenHide(hb,Xa,!1),qa.yield(Nb.promise.delay(300),2);case 2:P=!1,Nb.once(hb,"onMouseDown",function(){return P=!0}),Nb.once(hb,"hideMarkers",function(){return P=!0});case 3:if(P){qa.jumpTo(4);break}return qa.yield(Xa.retract(qb),3);case 4:Xa.fadeOut(2E3),qa.jumpToEnd()}})};
Nb.showThenHide=function(hb,Xa,qb){qb=void 0===qb?3:qb;if(hb){var P=Array.isArray(Xa)?Xa:[Xa];P.forEach(function(qa){return hb.addMorph(qa)});qb&&setTimeout(function(){return P.forEach(function(qa){return qa.fadeOut(2E3)})},1E3*qb);return Xa}};Nb.showLine=function(hb,Xa,qb){qb=void 0===qb?3E3:qb;var P=Xa.start;Xa=Xa.end.subPt(P);var qa=hb.addMorph({position:P,rotation:Xa.theta(),border:{width:1,color:Nb.Color.red},width:Xa.fastR(),height:0});qb&&setTimeout(function(){return qa.fadeOut()},qb);return qa};
Nb.showConnector=Bd;Nb.obj=Sd;Nb.promise=Vc;Nb.string=Ud;Nb.pt=Ib;Nb.Color=nc;Nb.Rectangle=Yc;Nb.rect=Oc;Nb.morph=bc;Nb.easings=qd;Nb.Path=ie;Nb.Icon=Ye;Nb.Morph=sf;Nb.MorphicEnv=ne;Nb.connect=cc;Nb.once=Hc;Nb.disconnect=Md;Nb.show=vc;Nb.show=vc;(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),qb=Xa.hasOwnProperty("BoundsMarker")&&"function"===typeof Xa.BoundsMarker?Xa.BoundsMarker:Xa.BoundsMarker=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return fc(qb,hb,[{key:Symbol.for("lively-instance-initialize"),value:function(){fc._get(Object.getPrototypeOf(qb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:Nb.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",get:function(){return!0}},{key:"markerLength",value:function(P){P=P.insetBy(-2);P=Math.min(P.width,P.height);return Math.max(4,Math.floor(10>P/10?P/2-5:P/10))}},{key:"createMarkerEdge",value:function(){return Nb.morph({fill:Nb.Color.red,
reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var P=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),qa=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),fb=this.topRightH||(this.topRightH=this.addMorph(this.createMarkerEdge())),Lb=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),gc=this.bottomRightH||(this.bottomRightH=this.addMorph(this.createMarkerEdge())),Zc=this.bottomRightV||(this.bottomRightV=
this.addMorph(this.createMarkerEdge())),Qd=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),ge=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[P,qa,fb,Lb,gc,Zc,Qd,ge]}},{key:"alignWithMorph",value:function(P){return this.alignWithBounds(P.globalBounds().translatedBy($world.scroll.negated()))}},{key:"alignWithBounds",value:function(P){this.alignWithRect(P.insetBy(-20));return this.alignWithRect(P,!0)}},{key:"alignWithRect",value:function(P,
qa){var fb=this.ensureMarkerCorners(),Lb=this.markerLength(P),gc=[P.topLeft().addXY(0,0).extent(Nb.pt(Lb,5)),P.topLeft().addXY(0,0).extent(Nb.pt(5,Lb)),P.topRight().addXY(-Lb,0).extent(Nb.pt(Lb,5)),P.topRight().addXY(-5,0).extent(Nb.pt(5,Lb)),P.bottomRight().addXY(-5,-Lb).extent(Nb.pt(5,Lb)),P.bottomRight().addXY(-Lb,-5).extent(Nb.pt(Lb,5)),P.bottomLeft().addXY(0,-5).extent(Nb.pt(Lb,5)),P.bottomLeft().addXY(0,-Lb).extent(Nb.pt(5,Lb))];fb.forEach(function(Zc,Qd){return Zc.setBounds(gc[Qd])});qa&&(this.adjustOrigin(P.center()),
this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(P){var qa=this,fb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lb){if(1==Lb.nextAddress)return Lb.yield(qa.animate({scale:Math.max(30/P.width,1.05)}),2);fb=qa.center;return Lb.yield(qa.animate({center:fb,scale:1,duration:300,easing:Nb.easings.inOutExpo}),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(P){return(new this).alignWithMorph(P)}},
{key:"highlightBounds",value:function(P){return(new this).alignWithBounds(P)}}],Xa,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2332,end:6009})})(Nb.Morph);var Yd=Ba("S",function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),qb=Xa.hasOwnProperty("StatusMessage")&&
"function"===typeof Xa.StatusMessage?Xa.StatusMessage:Xa.StatusMessage=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"relayout",value:function(){this.title=Nb.string.truncate(this.message,(this.width/15).toFixed(),"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},{key:"setMessage",value:function(P,qa){this.message=P;this.color=qa}},{key:"slideTo",
value:function(P){var qa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){if(1==fb.nextAddress)return qa.sliding=qa.animate({position:P,duration:500}),fb.yield(qa.sliding,2);qa.sliding=!1;fb.jumpToEnd()})}},{key:"expand",value:function(){var P=this,qa,fb,Lb,gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zc){if(1==Zc.nextAddress)return P.expandable?P.sliding?Zc.yield(P.sliding,2):Zc.jumpTo(2):Zc.return();qa=P.world();if(!qa||P.isMaximized)return Zc.return();P.isMaximized=
!0;P.stayOpen=!0;fb=P.getSubmorphNamed("message text");fb.lineWrapping=!1;Object.assign(fb,{clipMode:"auto",fixedWidth:!0,selectable:!0});P.expandedContent&&(fb.value=P.expandedContent);fb.fit();Lb=fb.textBounds().extent();gc=qa.visibleBounds();Lb.y>gc.extent().y&&(Lb.y=gc.extent().y-20);Lb.x>gc.extent().x&&(Lb.x=gc.extent().x-20);Lb=P.extent.maxPt(Lb);P.animate({extent:Lb,center:gc.center(),duration:200});P.relayout();P.focus();Zc.jumpToEnd()})}},{key:"fit",value:function(){var P=this.getSubmorphNamed("message text");
P&&(this.extent=Nb.pt(100,35).maxPt(P.textBounds().extent()),this.relayout())}},{key:"focus",value:function(){var P=this.getSubmorphNamed("message text");P&&P.focus()}},{key:"onMouseUp",value:function(P){this.expand()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:Nb.pt(200,100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=
!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(P){this.setProperty("message",P);var qa=this.getSubmorphNamed("message text");if(qa){qa.value=P;var fb=qa.documentEndPosition;fb.row>this.maxLines&&(qa.replace({start:{row:this.maxLines,column:0},end:fb},"...\n"),this.expandedContent||(this.expandedContent=P));fb=qa.documentEndPosition;0!==fb.column&&
qa.insertText("\n",fb)}}},title:{isStyleProp:!0,derived:!0,set:function(P){this.getSubmorphNamed("message title").value=P},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(P){this.get("message icon").fontColor=P;this.get("message icon")._parametrizedProps&&(this.get("message icon")._parametrizedProps.fontColor=P)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=
[{name:"message icon",type:"label",value:Nb.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},{name:"message title",type:"label"},{name:"close button",type:"button"}];Nb.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");Nb.connect(this,"extent",this,"relayout")}}}}}],Xa,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:6053,end:10382})}(Nb.Morph));Nb.StatusMessage=Yd;Nb.StatusMessage=Yd;Nb.StatusMessage=Yd;var Cd=Ba("b",function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),qb=Xa.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof Xa.StatusMessageForMorph?Xa.StatusMessageForMorph:Xa.StatusMessageForMorph=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"alignAtBottomOf",
value:function(P){var qa=this.world();qa&&(this.bringToFront(),this.fit(),this.width=P.bounds().width,this.relayout(),P.world()&&(this.position=P.owner.worldPoint(P.bounds().bottomLeft())),P=qa.visibleBounds(),P=this.bounds().top()+this.height-P.bottom(),0<P&&this.moveBy(Nb.pt(0,-P)))}},{key:"onMouseUp",value:function(P){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessageForMorph"}},{key:"properties",get:function(){return{slidable:{defaultValue:!1},renderOnGPU:{defaultValue:!0},
removeOnTargetMorphChange:{defaultValue:!0},targetMorph:{defaultValue:null,get:function(){var P=this.getProperty("targetMorph");return P&&$world.getMorphWithId(P)},set:function(P){this.setProperty("targetMorph",P?P.id:null);this.alignAtBottomOf(P)}},expandable:{after:["submorphs"],set:function(P){this.setProperty("expandable",P);if(P){var qa=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",type:"button"});Nb.connect(qa,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&
(this.getSubmorphNamed("expand button").remove(),Nb.disconnect(qa,"fire",this,"expand"))}}}}}],Xa,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10607,end:12475})}(Nb.StatusMessage));Nb.StatusMessageForMorph=Cd;Nb.StatusMessageForMorph=Cd;Nb.StatusMessageForMorph=Cd;Nb.showConnector=Bd;Nb.showConnector=
Bd;var kb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");kb.Morph=sf;kb.Label=$d;kb.StyleSheet=pe;kb.HorizontalLayout=Cc;kb.Path=ie;kb.Text=Ic;kb.GridLayout=Sb;kb.morph=bc;kb.Icon=Ye;kb.createMorphSnapshot=Jc;kb.Color=nc;kb.pt=Ib;kb.rect=Oc;kb.Rectangle=Yc;kb.LinearGradient=dd;kb.obj=Sd;kb.PropertyPath=Jd;kb.promise=Vc;kb.properties=Kd;kb.num=Hb;kb.arr=Bb;kb.connect=cc;kb.signal=Mb;kb.disconnect=Md;kb.disconnectAll=Na;kb.once=Hc;kb.showAndSnapToGuides=ab;kb.showAndSnapToResizeGuides=rb;
kb.removeSnapToGuidesOf=ua;kb.resource=Ua;kb.show=vc;kb.haloBlue=kb.Color.rgb(23,160,251);kb.componentAccent=kb.Color.magenta;kb.derivedAccent=kb.Color.purple;var Cb=function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=Xa.hasOwnProperty("Halo")&&"function"===typeof Xa.Halo?Xa.Halo:Xa.Halo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"relayout",value:function(){this.alignWithTarget()}},
{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(P){P.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var P=this;setTimeout(function(){P.target.owner||P.remove()})}},{key:"initLayout",value:function(){var P=this.layout=new kb.GridLayout({autoAssign:!1,fitToCell:!1,
columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name",
"name","name","name","name",null]]});P.col(1).row(7).group.align="center";P.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},
{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||this.addMorphBack(kb.morph({name:"border-box",fill:kb.Color.transparent,borderColor:this.target.isComponent?kb.componentAccent:kb.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(P){this.state||(this.state={});this.state.pointerId=P}},{key:"prepareTarget",
value:function(P){if(!kb.obj.isArray(P))return P;if(1>=P.length)return P[0];P=P[0].world().addMorph(new kb.MultiSelectionTarget({selectedMorphs:P}));P.alignWithSelection();P.modifiesSelectedMorphs=!0;return P}},{key:"refocus",value:function(P){this.target=P;this.alignWithTarget()}},{key:"alignWithTarget",value:function(){if(!this.active&&this.target){var P=this.target.world()||$world,qa=P.visibleBounds(),fb=this.target.globalBounds(),Lb=fb.insetBy(-36).intersection(qa);qa=fb.intersection(qa);this.layout&&
this.layout.disable();this.setBounds(Lb.translatedBy(P.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,qa));this.state.activeButton?(this.buttonControls.forEach(function(gc){return gc.visible=!1}),this.ensureResizeHandles().forEach(function(gc){return gc.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(gc){return gc.visible=
!0}),this.buttonControls.forEach(function(gc){gc.visible=!0}),this.propertyDisplay.disable());this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(gc){return gc.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();this.layout&&this.layout.enable();return this}}},{key:"detachFromTarget",value:function(){var P=this.target;P&&(kb.disconnect(P,"onChange",this,"alignWithTarget"),kb.disconnect(P,"onOwnerChanged",this,"removeIfDetached"),P instanceof kb.MultiSelectionTarget?
(P.modifiesSelectedMorphs=!1,P.remove()):"function"===typeof P.detachedHalo&&P.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();fc._get(Object.getPrototypeOf(qb.prototype),"remove",this).call(this)}},{key:"morphsContainingPoint",value:function(P){return P}},{key:"propertyDisplay",get:function(){return kb.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return kb.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return kb.CloseHaloItem.for(this)}},
{key:"grabHalo",value:function(){return kb.GrabHaloItem.for(this)}},{key:"dragHalo",value:function(){return kb.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return kb.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return kb.InspectHaloItem.for(this)}},{key:"editHalo",value:function(){return kb.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return kb.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return kb.CopyHaloItem.for(this)}},{key:"originHalo",
value:function(){return kb.OriginHaloItem.for(this)}},{key:"componentHalo",value:function(){return kb.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(P){return P.isHaloItem&&!P.isResizeHandle})}},{key:"addMorphToSelection",value:function(P){var qa=this,fb,Lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gc){if(1==gc.nextAddress){fb=qa.world();Lb=qa.target.isMorphSelection?qa.target.selectedMorphs:[qa.target];if(Lb.includes(P))return gc.return();
qa.remove();return gc.yield(fb.showHaloForSelection([].concat($jscomp.arrayFromIterable(Lb),[P]),qa.state.pointerId),2)}return gc.return(gc.yieldResult)})}},{key:"removeMorphFromSelection",value:function(P){var qa=this,fb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lb){if(1==Lb.nextAddress){fb=qa.world();qa.remove();if(!qa.target.isMorphSelection)return Lb.jumpTo(0);kb.arr.remove(qa.target.selectedMorphs,P);return Lb.yield(fb.showHaloForSelection(qa.target.selectedMorphs,qa.state.pointerId),
3)}return Lb.return(Lb.yieldResult)})}},{key:"isAlreadySelected",value:function(P){return this.target==P||this.target.isMorphSelection&&this.target.selectsMorph(P)}},{key:"updateBoundsFor",value:function(P,qa,fb,Lb,gc){var Zc={topLeft:kb.rect(-1,-1,1,1),topCenter:qa?kb.rect(1,-1,0,1):kb.rect(0,-1,0,1),topRight:kb.rect(0,-1,1,1),rightCenter:qa?kb.rect(0,1,1,1):kb.rect(0,0,1,0),bottomRight:kb.rect(0,0,1,1),bottomCenter:qa?kb.rect(1,0,0,1):kb.rect(0,0,0,1),bottomLeft:kb.rect(-1,0,1,1),leftCenter:qa?
kb.rect(-1,1,1,0):kb.rect(-1,0,1,0)}[P];gc=Zc.x;var Qd=Zc.y,ge=Zc.width;Zc=Zc.height;fb=qa?this.proportionalDelta(P,fb,Lb):fb;P=kb.rect(fb.x*gc,fb.y*Qd,fb.x*ge,fb.y*Zc);this.active=!0;this.target.setBounds(Lb.insetByRect(P));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());this.active=!1;this.alignWithTarget()}},{key:"proportionalDelta",value:function(P,qa,fb){var Lb=fb.width,gc=fb.height;fb={topLeft:kb.pt(-1,-1),topCenter:kb.pt(0,-1),topRight:kb.pt(1,
-1),leftCenter:kb.pt(-1,0),rightCenter:kb.pt(1,0),bottomLeft:kb.pt(-1,1),bottomCenter:kb.pt(0,1),bottomRight:kb.pt(1,1)};var Zc=Lb/Math.max(Lb,gc),Qd=gc/Math.max(gc,Lb);Lb={topLeft:kb.pt(-Zc,-Qd),topCenter:kb.pt(1/(2*gc/Lb),-1),topRight:kb.pt(Zc,-Qd),leftCenter:kb.pt(-1,gc/(2*Lb)),rightCenter:kb.pt(1,gc/(3*Lb)),bottomLeft:kb.pt(-Zc,Qd),bottomCenter:kb.pt(1/(2*gc/Lb),1),bottomRight:kb.pt(Zc,Qd)};fb=fb[P];return Lb[P].scaleBy(fb.dotProduct(qa)/fb.dotProduct(fb))}},{key:"ensureResizeHandles",value:function(){return kb.ResizeHandle.resizersFor(this)}},
{key:"updatePropertyDisplay",value:function(P){P=P.valueForPropertyDisplay();"undefined"!==typeof P?this.propertyDisplay.displayProperty(P):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(P,qa){if(!kb.rect(0).sides.includes(qa)){var fb=this.getSubmorphNamed("diagonal");if(P){P=this.target.globalBounds();var Lb=P.width,gc=P.height;P=this.localize(kb.pt(P.x,P.y)).extent(kb.pt(Lb,gc)).scaleRectTo(this.innerBounds());Lb={topLeft:[kb.pt(Lb,gc),kb.pt(0,0)],topRight:[kb.pt(0,gc),kb.pt(Lb,
0)],bottomRight:[kb.pt(0,0),kb.pt(Lb,gc)],bottomLeft:[kb.pt(Lb,0),kb.pt(0,gc)]};fb?fb.setBounds(P):(fb=$jscomp.makeIterator(Lb[qa]),qa=fb.next().value,fb=fb.next().value,Lb=new kb.LinearGradient({stops:[{offset:0,color:kb.Color.orange.withA(0)},{offset:.2,color:kb.Color.orange},{offset:.8,color:kb.Color.orange},{offset:1,color:kb.Color.orange.withA(0)}]}),fb=this.addMorphBack(new kb.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:P,borderColor:Lb,vertices:[qa,fb]})),fb.setBounds(P),
fb.animate({opacity:1,duration:500}))}else fb&&fb.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(P,qa){var fb=this.getSubmorphNamed("rotationIndicator");P&&qa?(P=this.getSubmorphNamed("origin").center,fb=fb||this.addMorphBack(new kb.Path({name:"rotationIndicator",borderColor:kb.haloBlue,borderWidth:1,vertices:[]})),fb.setBounds(qa.bounds().union(this.innerBounds())),fb.vertices=[fb.localizePointFrom(P,this),fb.localizePointFrom(qa.center,this)]):fb&&fb.remove()}},{key:"toggleMorphHighlighter",
value:function(P,qa,fb){fb=void 0===fb?!1:fb;if(qa)if(qa.onHaloGrabover)qa.onHaloGrabover(P);else fb=kb.MorphHighlighter.for(this,qa,fb),P&&qa&&qa!=this.world()?fb&&fb.show(qa):fb&&fb.deactivate()}},{key:"onMouseDown",value:function(P){var qa=P.state.clickedOnMorph;if(!P.isCommandKey()&&qa==this.borderBox)return this.remove();if(P.isShiftDown()&&P.isCommandKey())P=this.target.isMorphSelection?this.target.morphBeneath(P.position):this.morphBeneath(P.position),this.isAlreadySelected(P)?this.removeMorphFromSelection(P):
this.addMorphToSelection(P);else{if(qa==this.borderBox&&P.isCommandKey()){var fb=P.world.morphsContainingPoint(P.position).filter(function(Lb){return Lb.halosEnabled});(fb=fb.slice(fb.indexOf(this.target)+1)[0]||fb[0]||P.world)&&P.world.showHaloFor(fb,P.domEvt.pointerId);this.remove()}qa==this&&P.isCommandKey()&&(fb=this.morphBeneath(P.position),P.world.showHaloFor(fb,P.domEvt.pointerId));qa==this&&this.remove()}}},{key:"onKeyUp",value:function(P){this.changingName||this.buttonControls.map(function(qa){return qa.onKeyUp(P)})}},
{key:"getMesh",value:function(P,qa){var fb=P.x;P=P.y;qa=void 0===qa?kb.pt(0,0):qa;var Lb=this.world().visibleBounds(),gc=Lb.height;Lb=Lb.width;var Zc={borderStyle:"dotted",borderWidth:2,borderColor:kb.Color.orange};Zc=this.get("mesh")||this.addMorph(new kb.Morph({name:"mesh",styleClasses:["halo-mesh"],extent:kb.pt(Lb,gc),fill:null,submorphs:[new kb.Path(Object.assign({name:"vertical"},Zc)),new kb.Path(Object.assign({name:"horizontal"},Zc))]}));Zc.globalPosition=qa;Zc.getSubmorphNamed("vertical").vertices=
[kb.pt(fb,0).subPt(qa),kb.pt(fb,gc).subPt(qa)];Zc.getSubmorphNamed("horizontal").vertices=[kb.pt(0,P).subPt(qa),kb.pt(Lb,P).subPt(qa)];return Zc}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:kb.Color.transparent},resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},
layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,get:function(){return 40>this.target.bounds().extent().dist(kb.pt(0))}},target:{get:function(){return this.state?this.state.target:null},set:function(P){this.state||(this.state={});var qa=!!this.state.target;this.detachFromTarget();P=this.prepareTarget(P);this.state.target=P;qa&&this.alignWithTarget();kb.connect(P,"onChange",this,"alignWithTarget");kb.connect(P,"onOwnerChanged",this,"removeIfDetached")}}}}}],
Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:979,end:16996})}(kb.Morph);Cb=kb.Halo;var $c=Ba("H",Cb);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=Xa.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof Xa.HaloPropertyDisplay?Xa.HaloPropertyDisplay:
Xa.HaloPropertyDisplay=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},{key:"displayProperty",value:function(P){var qa=this.halo.state.activeButton;P=String(P);this.visible=!0;this.textString=P;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(qa.bounds())&&
(this.position=kb.pt(qa.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},{key:"defaultPosition",get:function(){return kb.pt(25,0)}},{key:"for",value:function(P){return P.getSubmorphNamed(this.morphName)||P.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},
fill:{defaultValue:kb.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:kb.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:kb.Color.white},position:{defaultValue:this.defaultPosition}}}}],Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:17186,end:18524})})(kb.Label);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=Xa.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof Xa.MultiSelectionTarget?Xa.MultiSelectionTarget:Xa.MultiSelectionTarget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},
{key:"selectsMorph",value:function(P){return this.selectedMorphs.includes(P)}},{key:"alignWithSelection",value:function(){var P=this.selectedMorphs.map(function(qa){return qa.globalBounds()}).reduce(function(qa,fb){return qa.union(fb)});this.setBounds(P)}},{key:"onGrab",value:function(P){this.grabbingHand=P.hand;this.selectionGrabbed=!0;P.hand.grab(this.selectedMorphs);kb.once(P.hand,"dropMorphsOn",this,"onGrabEnd");kb.connect(P.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=
!1;kb.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(P){var qa=P.value.subPt(P.prevValue);this.selectedMorphs.forEach(function(fb){return fb.resizeBy(qa)})}},{key:"updatePosition",value:function(P){if(!this.selectionGrabbed){var qa=P.value.subPt(P.prevValue);this.selectedMorphs.forEach(function(fb){return fb.moveBy(qa)})}}},{key:"updateRotation",value:function(P){var qa=this,fb=P.value-P.prevValue;this.selectedMorphs.forEach(function(Lb){var gc=Lb.origin;Lb.adjustOrigin(Lb.localize(qa.worldPoint(kb.pt(0,
0))));Lb.rotation+=fb;Lb.adjustOrigin(gc)})}},{key:"updateScale",value:function(P){var qa=this,fb=P.value-P.prevValue;this.selectedMorphs.forEach(function(Lb){var gc=Lb.origin;Lb.adjustOrigin(Lb.localize(qa.worldPoint(kb.pt(0,0))));Lb.scale+=fb;Lb.adjustOrigin(gc)})}},{key:"onChange",value:function(P){fc._get(Object.getPrototypeOf(qb.prototype),"onChange",this).call(this,P);if(this.modifiesSelectedMorphs){switch(P.prop){case "extent":this.updateExtent(P);break;case "scale":this.updateScale(P);break;
case "position":this.updatePosition(P);break;case "rotation":this.updateRotation(P)}return P}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]},halosEnabled:{defaultValue:!1}}}}],Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:18592,end:20863})})(kb.Morph);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=Xa.hasOwnProperty("HaloItem")&&"function"===typeof Xa.HaloItem?Xa.HaloItem:Xa.HaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},
{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloItem"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:kb.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:kb.pt(24,24)},halo:{}}}},{key:"for",
value:function(P){return P.getSubmorphNamed(this.morphName)||P.addMorph(new this({halo:P,name:this.morphName}))}}],Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21027,end:21700})})(kb.Morph);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=Xa.hasOwnProperty("NameHolder")&&
"function"===typeof Xa.NameHolder?Xa.NameHolder:Xa.NameHolder=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"onHoverIn",value:function(P){this.highlightOnHover&&this.nameHolder.active&&(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=kb.Color.orange)}},{key:"onHoverOut",value:function(P){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=
kb.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(P){"Enter"==P.keyCombo?(this.accept(),P.stop()):fc._get(Object.getPrototypeOf(qb.prototype),"onKeyDown",this).call(this,P)}},{key:"onMouseUp",value:function(){kb.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(P){this.nameHolder.fontColor=kb.Color.white;this.halo.toggleMorphHighlighter(!1,this.target)}},
{key:"onKeyUp",value:function(P){P=this.nameHolder.textString;var qa=this.target.owner;this.validName=!qa||!qa.getSubmorphNamed(P)||this.target.name==P;kb.signal(this,"valid",[this.validName,P])}},{key:"update",value:function(){var P=this;this.nameHolder.textString!==this.target.name&&(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return P.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},
{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(P){if(!this.forceUniqueName||this.validName)this.target.name=P,kb.signal(this,"active",[!1,this])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},fill:{defaultValue:kb.Color.transparent},
forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new kb.HorizontalLayout({resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new kb.Text({fill:kb.Color.transparent,fontColor:kb.Color.white,fontWeight:"bold",active:!0}));kb.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21735,end:24286})})(kb.Morph);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=Xa.hasOwnProperty("NameHaloItem")&&"function"===typeof Xa.NameHaloItem?Xa.NameHaloItem:Xa.NameHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,
[{key:Symbol.for("lively-instance-initialize"),value:function(P){fc._get(Object.getPrototypeOf(qb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,P);this.initComponentLink();this.initNameHolders();this.validityIndicator=kb.Icon.makeLabel("check",{fontColor:kb.Color.green,fontSize:15,padding:kb.rect(4,6,4,0)});this.fill=this.halo.target.isComponent?kb.componentAccent:kb.haloBlue;this.alignInHalo()}},{key:"initComponentLink",value:function(){var P=this,qa=this.halo.target;if(qa&&
!qa.isMorphSelection&&qa.master){var fb=qa.master.determineMaster(qa),Lb=qa.master.getWorldUrlFor(fb)||"this project",gc=!!fb.world();qa=this.addMorph(kb.Icon.makeLabel(Lb?"external-link-alt":"exclamation-triangle",{nativeCursor:"pointer",fontColor:kb.Color.white,padding:kb.rect(8,0,-8,0),name:"master link",tooltip:"Located in "+Lb}));Lb&&kb.connect(qa,"onMouseDown",function(){gc?P.showLocalMaster(fb):window.open(Lb)})}}},{key:"showLocalMaster",value:function(P){var qa;if(qa=P.getWindow())qa.activate(),
qa.minimized&&(qa.minimized=!1);P.show()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(P){return{target:P,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var P=this;this.nameHolders=this.targets().map(function(qa){qa=new kb.NameHolder({halo:P.halo,highlightOnHover:qa.highlightOnHover,target:qa.target});kb.connect(qa,"active",P,"toggleActive");
kb.connect(qa,"valid",P,"toggleNameValid");return qa});this.submorphs=[].concat($jscomp.arrayFromIterable(this.submorphs),$jscomp.arrayFromIterable(kb.arr.interpose(this.nameHolders,{extent:kb.pt(1,28),fill:kb.Color.black.withA(.4)})))}},{key:"toggleActive",value:function(P){var qa=$jscomp.makeIterator(P);P=qa.next().value;var fb=qa.next().value;if(this.halo.changingName!==P){this.halo.changingName=P;if(qa=this.get("master link"))qa.visible=qa.isLayoutable=!P;P?(this.nameHolders.forEach(function(Lb){return Lb!=
fb&&Lb.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),this.fill=kb.Color.darkGray,setTimeout(function(){return fb.nameHolder.selectAll()})):(this.fill=kb.haloBlue,this.nameHolders.forEach(function(Lb){return Lb!=fb&&Lb.activate()}),this.borderWidth=0,this.validityIndicator.remove(),this.halo.focus());this.alignInHalo()}}},{key:"toggleNameValid",value:function(P){var qa=$jscomp.makeIterator(P);P=qa.next().value;qa=qa.next().value;(this.validName=P)?(this.conflictingMorph=null,
this.borderColor=kb.Color.green,this.validityIndicator.nativeCursor="auto",this.validityIndicator.fontColor=kb.Color.green,kb.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(qa),this.borderColor=kb.Color.red,this.validityIndicator.fontColor=kb.Color.red,this.validityIndicator.nativeCursor="pointer",kb.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){kb.arr.zip(this.targets(),this.nameHolders).map(function(qa){var fb=$jscomp.makeIterator(qa);
qa=fb.next().value.target;fb=fb.next().value;fb.target=qa;fb.update()});var P=this.halo.innerBounds().bottomCenter().addPt(kb.pt(0,2));this.topCenter=kb.pt(Math.max(P.x,30),Math.max(P.y,80))}},{key:"onMouseDown",value:function(P){var qa=this,fb=this.conflictingMorph;fb&&(this.halo.toggleMorphHighlighter(!0,fb),setTimeout(function(){return qa.halo.toggleMorphHighlighter(!1,fb)},1E3))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},
{key:"properties",get:function(){return{borderRadius:{defaultValue:4},fill:{defaultValue:kb.haloBlue},borderColor:{defaultValue:kb.Color.green},layout:{initialize:function(){this.layout=new kb.HorizontalLayout({resizeContainer:!0,spacing:0,align:"center",orderByIndex:!0})}}}}}],Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:24288,end:28718})})(kb.HaloItem);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=Xa.hasOwnProperty("CloseHaloItem")&&"function"===typeof Xa.CloseHaloItem?Xa.CloseHaloItem:Xa.CloseHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"update",value:function(){var P=this.halo,qa=P.target.owner;qa.undoStart("close-halo");P.target.selectedMorphs?
P.target.selectedMorphs.forEach(function(fb){return fb.remove()}):P.target.remove();qa.undoStop("close-halo");P.remove()}},{key:"onMouseDown",value:function(P){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["fas","fa-trash"]},draggable:{defaultValue:!1},tooltip:{defaultValue:"Remove this morph from the world"}}}}],Xa,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:28720,end:29345})})(kb.HaloItem);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=Xa.hasOwnProperty("GrabHaloItem")&&"function"===typeof Xa.GrabHaloItem?Xa.GrabHaloItem:Xa.GrabHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return fc(qb,hb,[{key:"adjustTarget",value:function(P,qa){kb.PropertyPath("owner.layout.autoResize").get(P)&&!P.globalBounds().insetBy(10).containsPoint(qa)&&(P=P.owner);return P}},{key:"valueForPropertyDisplay",value:function(){var P=this.hand,qa=this.halo,fb=this.prevDropTarget,Lb=P.world(),gc=P.findDropTarget(P.globalPosition,[qa.target],function(Zc){return!Zc.isHaloItem&&!Zc.ownerChain().some(function(Qd){return Qd.isHaloItem||!Qd.visible||0==Qd.opacity})});if(gc)return gc=this.adjustTarget(gc,
P.globalPosition),qa.toggleMorphHighlighter(gc&&gc!=Lb,gc,!0),fb&&fb!=gc&&qa.toggleMorphHighlighter(!1,fb),(this.prevDropTarget=gc)&&gc.name}},{key:"init",value:function(P){var qa=this.halo,fb=qa.target.undoStart("grab-halo");fb&&fb.addTarget(qa.target.owner);this.hand=P;qa.target.onGrab({halo:qa,hand:P,isShiftDown:function(){return!1}});qa.state.activeButton=this;this.opacity=.3;var Lb=kb.connect(P,"update",this,"update");kb.once(qa.target,"remove",function(){return Lb.disconnect()})}},{key:"stop",
value:function(P){var qa=this.halo,fb=this.prevDropTarget,Lb=qa.target.undoInProgress,gc=P.hand.findDropTarget(P.hand.globalPosition,[qa.target],function(Zc){return!Zc.isHaloItem&&!Zc.ownerChain().some(function(Qd){return Qd.isHaloItem})});gc=this.adjustTarget(gc,P.hand.globalPosition);kb.disconnect(P.hand,"update",this,"update");kb.MorphHighlighter.interceptDrop(qa,gc,qa.target);Lb.addTarget(gc);gc.onDrop(P);qa.state.activeButton=null;qa.alignWithTarget();qa.toggleMorphHighlighter(!1,fb);kb.MorphHighlighter.removeHighlighters(qa);
qa.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"onDragStart",value:function(P){this.init(P.hand)}},{key:"onDragEnd",value:function(P){this.stop(P)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],
Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:29347,end:31875})})(kb.HaloItem);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=Xa.hasOwnProperty("DragHaloItem")&&"function"===typeof Xa.DragHaloItem?Xa.DragHaloItem:Xa.DragHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},{key:"updateAlignmentGuide",value:function(P){var qa=this.halo.getSubmorphNamed("mesh");if(P)return qa=this.halo.getMesh(this.halo.target.worldPoint(kb.pt(0,0))),this.focus(),qa;qa&&qa.remove()}},{key:"init",value:function(){var P=this.halo.target;P.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=P.position;
this.targetTransform=P.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();this.updateAlignmentGuide(!1);kb.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(P,qa,fb){qa=void 0===qa?!1:qa;fb=void 0===fb?!1:fb;this.actualPos=P=this.actualPos.addPt(this.targetTransform.transformDirection(P));qa&&(P=P.griddedBy(kb.pt(10,10)));this.halo.target.position=P;this.updateAlignmentGuide(qa);
qa||kb.showAndSnapToGuides(this.halo.target,!0,fb,5,500)}},{key:"onDragStart",value:function(P){this.init()}},{key:"onDrag",value:function(P){this.update(P.state.dragDelta,P.isAltDown(),P.isCtrlDown())}},{key:"onDragEnd",value:function(P){this.stop()}},{key:"onKeyUp",value:function(P){this.updateAlignmentGuide(!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},
styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:31877,end:33715})})(kb.HaloItem);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
qb=Xa.hasOwnProperty("InspectHaloItem")&&"function"===typeof Xa.InspectHaloItem?Xa.InspectHaloItem:Xa.InspectHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"onMouseDown",value:function(P){var qa=this;(function(){var fb,Lb,gc,Zc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qd){if(1==Qd.nextAddress)return Qd.yield(System.import("lively.ide/js/inspector.js"),2);fb=Qd.yieldResult;
Lb=fb.default;(gc=qa.world().getSubmorphsByStyleClassName("Inspector").find(function(ge){return ge.targetObject==qa.halo.target}))&&(Zc=gc.getWindow())?(Zc.minimized=!1,Zc.activate(),Zc.animate({center:qa.world().visibleBounds().center(),duration:200})):Lb.openInWindow({targetObject:qa.halo.target});qa.halo.remove();Qd.jumpToEnd()})})()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},
draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:33717,end:34634})})(kb.HaloItem);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=Xa.hasOwnProperty("EditHaloItem")&&"function"===
typeof Xa.EditHaloItem?Xa.EditHaloItem:Xa.EditHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"onMouseDown",value:function(P){var qa=this;(P=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(fb){return fb.target==qa.halo.target}))?(P=P.getWindow(),P.bringToFront(),P.minimized=!1,P.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",
{target:this.halo.target});this.halo.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:34636,end:35416})})(kb.HaloItem);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=Xa.hasOwnProperty("RotateHaloItem")&&"function"===typeof Xa.RotateHaloItem?Xa.RotateHaloItem:Xa.RotateHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:Symbol.for("lively-instance-initialize"),value:function(P){fc._get(Object.getPrototypeOf(qb.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,P);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(P){this.setProperty("angle",P)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(P){this.setProperty("scaleGauge",P)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(P){this.setProperty("initRotation",
P)}},{key:"valueForPropertyDisplay",value:function(){var P=this.halo.target;return this.scaleGauge?P.scale.toFixed(4).toString():kb.num.toDegrees(P.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(P){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=P;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(P){this.detachFromLayout();this.halo.state.activeButton=this;
this.scaleGauge=P.scaleBy(1/this.halo.target.scale);this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(P){this.scaleGauge=null;P=this.initRotation+(P-this.angle);P=kb.num.toRadians(kb.num.detent(kb.num.toDegrees(P),10,45));this.halo.target.rotation=P;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(P){var qa=this.scaleGauge,fb=this.halo;qa||(qa=this.scaleGauge=P.scaleBy(1/fb.target.scale));this.angle=P.theta();this.initRotation=fb.target.rotation;
fb.target.scale=kb.num.detent(P.dist(kb.pt(0,0))/qa.dist(kb.pt(0,0)),.1,.5);fb.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(P){this.styleClasses=["fas",P?"fa-search-plus":"fa-redo"];this.tooltip=P?"Scale morph":"Rotate morph"}},
{key:"detachFromLayout",value:function(){this.savedLayout=this.halo.layout;this.halo.layout=null}},{key:"attachToLayout",value:function(){this.halo.layout=this.savedLayout}},{key:"onDragStart",value:function(P){this.adaptAppearance(P.isShiftDown());P.isShiftDown()?this.initScale(P.position.subPt(this.halo.target.globalPosition)):this.init(P.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(P){this.globalPosition=P.position.addPt(kb.pt(-10,-10));this.adaptAppearance(P.isShiftDown());
P.isShiftDown()?this.updateScale(P.position.subPt(this.halo.target.globalPosition)):this.update(P.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(P){this.adaptAppearance(P.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(P){this.adaptAppearance(P.isShiftDown())}},{key:"onKeyUp",value:function(P){this.adaptAppearance(P.isShiftDown())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},
{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:35418,end:38895})})(kb.HaloItem);kb.nameNumberRe=/(.+)([0-9]+)$/;(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=Xa.hasOwnProperty("ComponentHaloItem")&&
"function"===typeof Xa.ComponentHaloItem?Xa.ComponentHaloItem:Xa.ComponentHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"updateComponentIndicator",value:function(){var P=this.world(),qa=this.halo.target;this.halo.remove();P.showHaloFor(qa)}},{key:"checkForDuplicateNamesInHierarchy",value:function(){var P=this,qa,fb,Lb,gc,Zc,Qd,ge,Sc,Pe,Ue,Me,Gf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Hf){switch(Hf.nextAddress){case 1:qa=
P.halo.target;fb=P.world();Lb=[];qa.withAllSubmorphsDoExcluding(function(Vb){Vb!=qa&&Lb.push(Vb)},function(Vb){return qa.master});gc=kb.arr.groupBy(Lb,function(Vb){return Vb.name});Zc={fontWeight:"normal",fontSize:16};if(!Object.values(gc).find(function(Vb){return 1<Vb.length})){Hf.jumpTo(2);break}Qd=kb.arr.sum(Object.values(gc).filter(function(Vb){return 1<Vb.length}).map(function(Vb){return Vb.length}));return Hf.yield(fb.confirm(["Ambigous Names in Submorph Hierarchy  ",{}].concat($jscomp.arrayFromIterable(kb.Icon.textAttribute("exclamation-triangle",
{fontColor:kb.Color.rgb(230,126,34),fontSize:30,lineHeight:"40px"})),["\nThe morph you are about to turn into a component has "+Qd+" morphs within its submorph hierarchy, that have ambigous names. This can lead to incorrect applications of style properties when you create derived instances from this component.\n\n",Object.assign({},Zc,{textAlign:"left"}),"Usually ambigous names are caused if your component is in some kind of intermittent state, where it already displays an example state or code has run that automatically created interface elements. This can be fixed by resetting the submorphs of this morph, usually by implementing a ",
Object.assign({},Zc,{textAlign:"left",fontStyle:"italic"}),"reset()",Object.assign({},Zc,{fontStyle:"italic",fontFamily:"IBM Plex Mono"}),' routine you can invoke to put the morph into some kind of "neutral" state. Alternatively you can go ahead and rename the duplicate morphs to have proper unique names. If you have a hard time giving the conflicting morphs appropriate names, this can be an indication that the component you are declaring is too large, and you need to decompose your component into subcomponents further.',
Object.assign({},Zc,{textAlign:"left",fontStyle:"italic"})]),{width:600,confirmLabel:"PROCEED TO RENAME",rejectLabel:"CANCEL",align:"left"}),3);case 3:if(ge=Hf.yieldResult,!ge)return Hf.return();case 2:Pe=Hf.forIn(gc);case 4:if(null==(Sc=Pe.getNext())){Hf.jumpTo(6);break}if(2>gc[Sc].length){Hf.jumpTo(4);break}Ue=gc[Sc];case 7:if(!(1<Ue.length)){Hf.jumpTo(4);break}Me=Ue[0];kb.show(Me,!0);return Hf.yield(fb.prompt(["Name Collision\n",{},"The name of\n",Zc,Me.toString(),Object.assign({},Zc,{fontStyle:"italic",
fontWeight:"bold"}),"\nis not unique within the submorph hierachy of\n",Object.assign({},Zc),qa.name,Object.assign({},Zc,{fontStyle:"italic",fontWeight:"bold"}),"\nThere "+(2<Ue.length?"are "+(Ue.length-1)+" other morphs":"is one other morph")+" with the exact same name located in this component.",Zc," Duplicate names can cause errors when applying styles to derived morphs of this master component, so it is essential that there is no name ambiguity. Please enter a new name for this or the other conflicting morphs:",
Zc],{input:Me.name,lineWrapping:!0,width:500,fontSize:12,rejectLabel:"IGNORE",confirmLabel:"RENAME",errorMessage:"Provided name is not unique",validate:function(Vb){return!Object.keys(gc).includes(Vb)}}),9);case 9:Gf=Hf.yieldResult;kb.signal(fb,"hideMarkers");Gf&&(Me.name=Gf);if(Gf in gc){Hf.jumpTo(7);break}else if(!Gf){Ue=kb.arr.rotate(Ue);Hf.jumpTo(7);break}kb.arr.remove(Ue,Me);Hf.jumpTo(7);break;case 6:return Hf.return(!0)}})}},{key:"onMouseDown",value:function(){var P=this,qa,fb,Lb,gc,Zc,Qd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ge){switch(ge.nextAddress){case 1:qa=
P.halo.target;fb=!qa.isComponent;Lb=$world.getAllNamed(qa.name).length;if(!(fb&&1<Lb)){ge.jumpTo(2);break}return ge.yield($world.prompt(["Name Conflict\n",{},"The morph's name you are about to turn into a component is already used by "+(Lb-1)+" other morph"+(2<Lb?"s":"")+". Please enter a ",{fontWeight:"normal"},"unique identifier",{fontStyle:"italic"}," for this component within this project.",{fontWeight:"normal",fontSize:16}],{input:qa.name,lineWrapping:!0,width:400,errorMessage:"Identifier not unique",
validate:function(Sc){return 0==$world.getAllNamed(Sc).length}}),3);case 3:gc=ge.yieldResult;if(!gc)return ge.return();qa.name=gc;case 2:Zc=qa;if(!(Qd=fb)){ge.jumpTo(4);break}return ge.yield(P.checkForDuplicateNamesInHierarchy(),5);case 5:Qd=ge.yieldResult;case 4:Zc.isComponent=Qd,P.world()?P.updateComponentIndicator():qa.world().showHaloFor(qa),ge.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},
{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:38936,end:44848})})(kb.HaloItem);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=Xa.hasOwnProperty("CopyHaloItem")&&"function"===typeof Xa.CopyHaloItem?Xa.CopyHaloItem:Xa.CopyHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"init",value:function(P){function qa(Sc,Pe){return Pe.match(kb.nameNumberRe)?Pe.replace(kb.nameNumberRe,function(Ue,
Me,Gf){Gf||(Gf="0");for(Ue=Number(Gf);Sc.get(Me+ ++Ue););return Me+Ue}):Pe+"1"}var fb=this.halo,Lb=fb.target,gc=fb.world(),Zc=Lb instanceof kb.MultiSelectionTarget;fb.remove();kb.connect(P,"update",this,"update");if(Zc){var Qd=Lb.selectedMorphs.map(function(Sc){return gc.addMorph(Sc.copy())});Zc=Qd.map(function(Sc){Sc.name=qa(Lb,Sc.name);return Sc.position});Qd[0].undoStart("copy-halo");gc.addMorph(fb);fb.refocus(Qd);P.grab(fb.target);fb.target.onGrab({halo:fb,hand:P,isShiftDown:function(){return!1}});
Zc.forEach(function(Sc,Pe){return Qd[Pe].globalPosition=Sc});fb.alignWithTarget()}else{Zc=Lb.globalPosition;var ge=Lb.copy();Lb.isComponent&&(ge.isComponent=!1,ge.withAllSubmorphsDoExcluding(function(Sc){Sc!=ge&&Sc.master||delete Sc._parametrizedProps},function(Sc){return Sc.master&&Sc!=ge}),ge.master=Lb);ge.name=qa(Lb,Lb.name);gc.addMorph(ge);ge.globalPosition=Zc;ge.undoStart("copy-halo");P.grab(ge);gc.addMorph(fb);fb.visible=!1}}},{key:"stop",value:function(P){var qa=this.halo,fb=$jscomp.makeIterator(P.grabbedMorphs).next().value,
Lb=P.findDropTarget(P.globalPosition,[qa.target],function(Zc){return!Zc.isHaloItem&&!Zc.ownerChain().some(function(Qd){return Qd.isHaloItem})}),gc=qa.target.undoInProgress;kb.disconnect(P,"update",this,"update");gc.addTarget(Lb);P.dropMorphsOn(Lb);qa.target.undoStop("copy-halo");qa.remove();P.world().showHaloFor(fb)}},{key:"onDragStart",value:function(P){this.init(P.hand)}},{key:"onDragEnd",value:function(P){this.stop(P.hand)}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",
value:function(){var P=this,qa,fb,Lb,gc,Zc,Qd,ge,Sc,Pe,Ue,Me,Gf,Hf,Vb,Ng;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pf){switch(pf.nextAddress){case 1:qa=P;fb=qa.halo;if(fb.nameHalo().nameHolders.find(function(tg){return tg.nameHolder===$world.focusedMorph}))return pf.return();Lb=fb.target;gc=fb.world();Zc=Lb instanceof kb.MultiSelectionTarget;Qd=Lb.globalBounds().topLeft();ge=Zc?Lb.selectedMorphs:[Lb];Sc=[];Pe='<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+
document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>";fb.remove();pf.setCatchFinallyBlocks(2);Ue=$jscomp.makeIterator(ge);Me=Ue.next();case 4:if(Me.done)return Pe+="</body></html>",Vb=JSON.stringify(Sc),pf.yield(P.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:Pe},{type:"application/morphic",data:Vb}]),8);Gf=Me.value;return pf.yield(kb.createMorphSnapshot(Gf,{addPreview:!1,testLoad:!1}),7);case 7:Hf=pf.yieldResult;Hf.copyMeta={offset:Gf.worldPoint(kb.pt(0,
0)).subPt(Qd)};Sc.push(Hf);Pe+=Gf.renderPreview();Me=Ue.next();pf.jumpTo(4);break;case 8:pf.leaveTryBlock(3);break;case 2:return Ng=pf.enterCatchBlock(),gc.logError(Ng),pf.return();case 3:gc.addMorph(fb),fb.refocus(ge),fb.setStatusMessage("copied"),pf.jumpToEnd()}})}},{key:"onMouseUp",value:function(P){var qa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){P.stop();return fb.yield(qa.copyToClipBoard(),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},
{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},styleClasses:{defaultValue:["far","fa-clone"]}}}}],Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:44850,end:48884})})(kb.HaloItem);(function(hb){var Xa=
lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=Xa.hasOwnProperty("OriginHaloItem")&&"function"===typeof Xa.OriginHaloItem?Xa.OriginHaloItem:Xa.OriginHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"fill",get:function(){return kb.Color.white.interpolate(.2,this.borderColorTop)}},{key:"extent",get:function(){return kb.pt(15,15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},
{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");this.halo.state.activeButton=
null;this.halo.alignWithTarget()}},{key:"update",value:function(P){var qa=this.halo,fb=qa.target.origin,Lb=qa.target.worldPoint(fb);P=qa.target.localize(Lb.addPt(P)).subPt(qa.target.scroll).subPt(fb);qa.target.adjustOrigin(qa.target.origin.addPt(P))}},{key:"onDragStart",value:function(P){this.init()}},{key:"onDragEnd",value:function(P){this.stop()}},{key:"onDrag",value:function(P){this.update(P.state.dragDelta)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},{key:"morphName",
get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?kb.componentAccent:kb.haloBlue}}}}}],Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:48886,end:50547})})(kb.HaloItem);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=Xa.hasOwnProperty("ResizeHandle")&&"function"===typeof Xa.ResizeHandle?Xa.ResizeHandle:Xa.ResizeHandle=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"valueForPropertyDisplay",value:function(){var P=this.halo.target.extent,qa=P.y;return P.x.toFixed(1)+"x"+
qa.toFixed(1)}},{key:"positionInHalo",value:function(){var P=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(kb.Rectangle.prototype.sides.includes(this.location)&&(this.visible=!1),P=P.insetBy(-4));return P.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(P){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(P.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(P){this.halo.state.activeButton==
this&&this.halo.toggleDiagonal(P.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(P){this.init(P.position,P.isShiftDown())}},{key:"onDragEnd",value:function(P){this.stop(P.isShiftDown())}},{key:"onDrag",value:function(P){this.update(P.position,P.isShiftDown(),P.isAltDown(),P.isCtrlDown());this.focus()}},{key:"init",value:function(P,qa){qa=void 0===qa?!1:qa;var fb=this.halo.target,Lb=fb.origin,gc=fb.position;fb=fb.extent;this.startPos=P;this.startBounds=gc.subPt(Lb).extent(fb);this.startOrigin=
this.halo.target.origin;this.savedLayout=this.halo.layout;this.halo.layout=null;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();P=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=kb.num.toRadians(P%45);this.halo.toggleDiagonal(qa,this.corner)}},{key:"update",value:function(P,qa,fb,Lb){qa=void 0===qa?!1:qa;fb=void 0===fb?!1:fb;Lb=void 0===Lb?!1:Lb;var gc=this.corner,Zc=this.tfm;P=this.startPos.subPt(P);Zc=Zc.transformDirection(kb.pt(P.x,
P.y));fb&&(Zc=Zc.griddedBy(kb.pt(10,10)));this.halo.updateBoundsFor(gc,qa,Zc,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(qa,gc);this.updateAlignmentGuide(fb);qa=[];gc=gc.toLowerCase();gc.includes("left")&&qa.push("left");gc.includes("top")&&qa.push("top");gc.includes("bottom")&&qa.push("bottom");gc.includes("right")&&qa.push("right");kb.showAndSnapToResizeGuides(this.halo.target,qa,!0,Lb,5,200)}},{key:"stop",value:function(P){P=this.halo;P.layout=this.savedLayout;P.state.activeButton=
null;P.alignWithTarget();P.toggleDiagonal(!1);this.updateAlignmentGuide(!1);kb.removeSnapToGuidesOf(P.target)}},{key:"updateAlignmentGuide",value:function(P){var qa=this.halo.getSubmorphNamed("mesh");if(P)return P=this.halo.target.extent,P=kb.pt(P.x%10,P.y%10),qa=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),P),this.focus(),qa;qa&&qa.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},
draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(P){0<P&&(P-=360);P=-8-(P/45).toFixed();0==P&&(P=8);return kb.arr.zip(kb.arr.rotate([["topLeft",function(qa){return qa.negated()}],["topCenter",function(qa){return qa.withX(0).negated()}],["topRight",function(qa){return qa.withX(0).negated()}],["rightCenter",function(qa){return kb.pt(0,0)}],["bottomRight",function(qa){return kb.pt(0,0)}],["bottomCenter",function(qa){return kb.pt(0,
0)}],["bottomLeft",function(qa){return qa.withY(0).negated()}],["leftCenter",function(qa){return qa.withY(0).negated()}]],P),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize","rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(P){var qa=this;if(!P.target)return[];var fb=P.target.getGlobalTransform().getRotation();return kb.arr.compact(this.getResizeParts(fb).map(function(Lb){var gc=
$jscomp.makeIterator(Lb),Zc=$jscomp.makeIterator(gc.next().value);Lb=Zc.next().value;Zc.next();Zc.next();Zc=$jscomp.makeIterator(gc.next().value);gc=Zc.next().value;Zc=Zc.next().value;return qa.for(P,Lb,Zc,gc)})).map(function(Lb){return Lb.alignInHalo()})}},{key:"for",value:function(P,qa,fb,Lb){var gc="Resize "+qa;P=P.getSubmorphNamed(gc)||new this({name:gc,halo:P,corner:qa,tooltip:"Resize "+qa,extent:kb.pt(10,10),borderWidth:1,borderRadius:0,borderColor:P.target.isComponent?kb.componentAccent:kb.haloBlue,
fill:kb.Color.white});return Object.assign(P,{nativeCursor:Lb,location:fb})}}],Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:50606,end:55904})})(kb.HaloItem);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=Xa.hasOwnProperty("MenuHaloItem")&&"function"===
typeof Xa.MenuHaloItem?Xa.MenuHaloItem:Xa.MenuHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"onMouseDown",value:function(P){var qa=this,fb,Lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gc){if(1==gc.nextAddress)return fb=qa.halo.target,qa.halo.remove(),gc.yield(fb.menuItems(),2);Lb=gc.yieldResult;fb.world().openMenu(Lb).hasFixedPosition=qa.halo.hasFixedPosition;gc.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:55906,end:56428})})(kb.HaloItem);var sb=Ba("M",function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=Xa.hasOwnProperty("MorphHighlighter")&&"function"===typeof Xa.MorphHighlighter?Xa.MorphHighlighter:Xa.MorphHighlighter=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),
this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&
this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(P){this.layoutHalo&&this.layoutHalo.handleDrop(P)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},
name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:kb.Color.orange.withA(.3)},borderWidth:{defaultValue:2},borderColor:{defaultValue:kb.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},highlightedSides:{defaultValue:[],set:function(P){var qa=this;this.setProperty("highlightedSides",P);this.submorphs=P.map(function(fb){return{type:"ellipse",
isHaloItem:!0,fill:kb.Color.orange,center:qa.innerBounds()[fb]()}});this.addMorph({type:"label",name:"name tag",padding:kb.Rectangle.inset(5,5,5,5),fontColor:kb.Color.white,fill:kb.Color.orange,borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(P){P=void 0===P?$world:P;var qa=P._morphHighlighters,fb;for(fb in qa)qa[fb].remove();
delete P._morphHighlighters}},{key:"for",value:function(P,qa,fb,Lb){fb=void 0===fb?!1:fb;Lb=void 0===Lb?[]:Lb;var gc=P._morphHighlighters=P._morphHighlighters||{};kb.properties.forEachOwn(gc,function(Zc,Qd){return Qd.alignWithHalo()});if(!qa||qa.ownerChain().find(function(Zc){return Zc.isHaloItem}))return null;gc[qa.id]=gc[qa.id]||new this({targetId:qa.id,halo:P,showLayout:fb});P.addMorph(gc[qa.id]);gc[qa.id].highlightedSides=Lb;return gc[qa.id]}},{key:"interceptDrop",value:function(P,qa,fb){(P=P._morphHighlighters=
P._morphHighlighters||{},P[qa.id])&&P[qa.id].handleDrop(fb)}}],Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:56617,end:60228})}(kb.Morph));kb.MorphHighlighter=sb;kb.MorphHighlighter=sb;kb.MorphHighlighter=sb;var hd=Ba("I",function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
qb=Xa.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof Xa.InteractiveMorphSelector?Xa.InteractiveMorphSelector:Xa.InteractiveMorphSelector=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:Symbol.for("lively-instance-initialize"),value:function(P,qa,fb){P=void 0===P?$world:P;this.controllingMorph=void 0===qa?null:qa;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=
P;this.filterFn=fb;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var P=kb.promise.deferred();P.promise.resolve=P.resolve;this.whenDone=P.promise;this.selectorMorph=kb.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();kb.connect(this.world.firstHand,"position",this,"scanForTargetAt");kb.once(this.selectorMorph,"onMouseDown",this,"selectTarget");kb.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();
this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var P=this.world.firstHand.globalPosition;this.selectorMorph.center=P;this.selectorMorph.focus();var qa=this.selectorMorph.morphBeneath(P),fb,Lb=this.possibleTarget,gc=this.controllingMorph,Zc=this.filterFn,Qd=this.world,ge=this.morphHighlighter;for(ge==qa?qa=ge.morphBeneath(P):qa&&qa.isEpiMorph&&(qa=qa.morphBeneath(P));qa&&(fb=[qa].concat($jscomp.arrayFromIterable(qa.ownerChain())).find(function(Sc){return!Sc.visible}));)qa=
fb=fb.morphBeneath(P);if(qa&&Zc&&!Zc(qa))for(;qa&&![qa].concat($jscomp.arrayFromIterable(qa.ownerChain())).find(Zc);)qa=qa.morphBeneath(P);!qa||qa==Lb||gc&&qa.ownerChain().includes(gc.getWindow())||(ge&&ge.deactivate(),(this.possibleTarget=Lb=qa)&&!Lb.isWorld&&(P=this.morphHighlighter=kb.MorphHighlighter.for(Qd,qa))&&P.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){kb.MorphHighlighter.removeHighlighters(this.world);
kb.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveMorphSelector"}},{key:"selectMorph",value:function(P,qa,fb){P=new this(P,qa,fb);P.selectNewTarget();return P.whenDone}}],Xa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:60237,end:62992})}(void 0));kb.InteractiveMorphSelector=hd;kb.InteractiveMorphSelector=hd;kb.InteractiveMorphSelector=hd;kb.default=Cb;var md=lively.FreezerRuntime.recorderFor("lively.ide/index.js");md.info="import via sub modules";md.info="import via sub modules";md.info="import via sub modules";Cb=Ba("v",{});md.valueWidgets=Cb;md.valueWidgets=Cb;md.valueWidgets=Cb;var pb=Ba("p",{});md.popovers=pb;md.popovers=pb;md.popovers=
pb;var ub=lively.FreezerRuntime.recorderFor("lively.components/popup.js");ub.Morph=sf;ub.VerticalLayout=Oa;ub.StyleSheet=pe;ub.Icon=Ye;ub.CustomLayout=Ia;ub.Color=nc;ub.rect=Oc;ub.pt=Ib;ub.connect=cc;ub.Path=Jd;ub.duration=300;md=Ba("P",function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),qb=Xa.hasOwnProperty("Popover")&&"function"===typeof Xa.Popover?Xa.Popover:Xa.Popover=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return fc(qb,hb,[{key:"relayout",value:function(P){var qa=this.get("body"),fb=this.get("arrow"),Lb=this.get("close button");fb=fb.height;P?(qa.animate({topCenter:ub.pt(0,fb),duration:200}),Lb.animate({topRight:qa.topRight.addXY(8,-8),duration:200})):(qa.topCenter=ub.pt(0,fb),Lb.topRight=qa.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},
hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,after:["submorphs"],defaultValue:{extent:ub.pt(200,200),fill:ub.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},get:function(){return this.get("body").submorphs[0]},set:function(P){var qa=this;this.get("body").addMorph(P);this.whenRendered().then(function(){return qa.relayout()})}},submorphs:{initialize:function(){var P=
this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:ub.pt(0,0),borderColor:ub.Color.transparent,vertices:[ub.pt(-10,0),ub.pt(0,-15),ub.pt(10,0)]},{name:"body"},{name:"close button",type:"button",label:Object.assign(ub.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",fill:null,extent:ub.pt(16,16),borderColor:ub.Color.transparent}];var qa=$jscomp.makeIterator(this.submorphs);qa.next();var fb=qa.next().value;qa=qa.next().value;ub.connect(qa,"fire",this,"close");ub.connect(fb,"extent",
this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return P.animated=!0},1E3)}}}}}],Xa,{pathInPackage:function(){return"popup.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:247,end:2617})}(ub.Morph));ub.Popover=md;ub.Popover=md;ub.Popover=md;var wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");
wb.Morph=sf;wb.TilingLayout=eb;wb.morph=bc;wb.Label=$d;wb.HorizontalLayout=Cc;wb.Icon=Ye;wb.InputLine=cb;wb.config=ob;wb.connect=cc;wb.signal=Mb;wb.Color=nc;wb.LinearGradient=dd;wb.pt=Ib;wb.rect=Oc;wb.num=Hb;wb.obj=Sd;wb.popovers=pb;wb.ValueScrubber=Zb;wb.Popover=md;(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=Xa.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof Xa.ContextSensitiveWidget?Xa.ContextSensitiveWidget:Xa.ContextSensitiveWidget=function(P){P&&
P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ContextSensitiveWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:wb.Color.transparent},isSelected:{defaultValue:"false",set:function(P){this.setProperty("isSelected",P);this.fontColor=P?wb.Color.white:wb.Color.black}},layout:{initialize:function(){this.layout=new wb.HorizontalLayout}},
context:{serialize:!1}}}}],Xa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,end:2441})})(wb.Morph);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=Xa.hasOwnProperty("ShortcutWidget")&&"function"===typeof Xa.ShortcutWidget?Xa.ShortcutWidget:
Xa.ShortcutWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"onMouseDown",value:function(P){this.openPopover()}},{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){P.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],
set:function(P){this.setProperty("title",P);this.getSubmorphNamed("valueString").value=P}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,set:function(P){this.submorphs.forEach(function(qa){return qa.fontColor=P})}},submorphs:{initialize:function(){this.submorphs=[wb.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],fontSize:15,padding:wb.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:wb.rect(0,
0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],Xa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2443,end:3793})})(wb.ContextSensitiveWidget);pb=function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=Xa.hasOwnProperty("LayoutWidget")&&
"function"===typeof Xa.LayoutWidget?Xa.LayoutWidget:Xa.LayoutWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}},{key:"openPopover",value:function(){var P=this,qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){if(1==fb.nextAddress)return qa=new wb.popovers.LayoutPopover({hasFixedPosition:!!P.ownerChain().find(function(Lb){return Lb.hasFixedPosition}),
container:P.context}),fb.yield(qa.fadeIntoWorld(P.globalBounds().center()),2);wb.connect(qa,"layoutChanged",P,"layoutChanged");wb.signal(P,"openWidget",qa);fb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutWidget"}},{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],Xa,{pathInPackage:function(){return"value-widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3802,end:4623})}(wb.ShortcutWidget);wb.LayoutWidget=pb;wb.LayoutWidget=pb;wb.LayoutWidget=pb;md=function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=Xa.hasOwnProperty("ColorWidget")&&"function"===typeof Xa.ColorWidget?Xa.ColorWidget:Xa.ColorWidget=function(P){P&&
P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"relayout",value:function(P){P?this.submorphs=this.color?this.color.isGradient?this.renderGradientValue():this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var P=this.color;if(2*P.stops.length==this.submorphs.length-3){var qa;for(qa in this.color.stops){var fb=
P.stops[qa];var Lb=fb.color,gc=fb.offset,Zc=$jscomp.makeIterator(this.submorphs[2+2*qa].submorphs).next().value;fb=this.submorphs[3+2*qa];Zc.fill=Lb;fb.value=(100*gc).toFixed()+"%"+(qa<P.stops.length-1?",":"")}}else this.submorphs=this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},
{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=wb.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:wb.pt(15,15),fill:wb.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:wb.pt(5,7.5),fill:wb.Color.white,borderColor:wb.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[wb.pt(0,0),wb.pt(10,10)],borderColor:wb.Color.red}]}]},
{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:wb.pt(15,15),fill:wb.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:wb.pt(5,7.5),fill:this.color,borderColor:wb.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:wb.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var P=
this.color,qa=[{type:"label",padding:wb.rect(0,0,5,0),value:"linearGradient"==P.type?wb.num.toDegrees(P.vectorAsAngle()).toFixed()+"\u00b0,":""}],fb;for(fb in P.stops){var Lb=P.stops[fb],gc=Lb.color;Lb=Lb.offset;qa.push({extent:wb.pt(this.fontSize,this.fontSize),fill:wb.Color.transparent,layout:new wb.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:gc}]});qa.push({type:"label",padding:wb.rect(0,0,5,0),value:(100*Lb).toFixed()+"%"+(fb<P.stops.length-1?",":"")})}return qa}},
{key:"onMouseDown",value:function(P){this.openFillEditor()}},{key:"update",value:function(P){this.color=P}},{key:"openFillEditor",value:function(){var P=this,qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){if(1==fb.nextAddress)return qa=new wb.popovers.FillPopover({hasFixedPosition:!!P.ownerChain().find(function(Lb){return Lb.hasFixedPosition}),handleMorph:P.context,fillValue:P.color,title:"Fill Control",gradientEnabled:P.gradientEnabled}),fb.yield(qa.fadeIntoWorld(P.globalBounds().center()),
2);wb.connect(qa,"fillValue",P,"update");wb.signal(P,"openWidget",qa);fb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorWidget"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new wb.HorizontalLayout({direction:"centered"})}},selectionFontColor:{defaultValue:wb.Color.white},nonSelectionFontColor:{defaultValue:wb.Color.black},color:{defaultValue:wb.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],
set:function(P){this.getProperty("isSelected")!=P&&(this.getSubmorphNamed("valueString").fontColor=P?this.selectionFontColor:this.nonSelectionFontColor,this.setProperty("isSelected",P))}},submorphs:{after:["nonSelectionFontColor","selectionFontColor"],initialize:function(){wb.connect(this,"color",this,"relayout",{converter:function(P,qa){return(qa&&qa.isColor)!=(P&&P.isColor)}});this.relayout(!0)}}}}}],Xa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4687,end:10140})}(wb.ContextSensitiveWidget);wb.ColorWidget=md;wb.ColorWidget=md;wb.ColorWidget=md;var yd=function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=Xa.hasOwnProperty("BooleanWidget")&&"function"===typeof Xa.BooleanWidget?Xa.BooleanWidget:Xa.BooleanWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return fc(qb,hb,[{key:"onMouseDown",value:function(P){this.boolean=!this.boolean}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BooleanWidget"}},{key:"properties",get:function(){return{fontFamily:{defaultValue:wb.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},boolean:{set:function(P){this.setProperty("boolean",P);this.value=wb.obj.safeToString(P);this.fontColor=this.boolean?wb.Color.green:wb.Color.red}}}}}],Xa,{pathInPackage:function(){return"value-widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10149,end:10634})}(wb.Label);wb.BooleanWidget=yd;wb.BooleanWidget=yd;wb.BooleanWidget=yd;var Zd=Ba("N",function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=Xa.hasOwnProperty("NumberWidget")&&"function"===typeof Xa.NumberWidget?Xa.NumberWidget:Xa.NumberWidget=
function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"onMouseDown",value:function(P){fc._get(Object.getPrototypeOf(qb.prototype),"onMouseDown",this).call(this,P);"up"==P.targetMorph.name&&this.increment();"down"==P.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return wb.obj.dissoc(fc._get(Object.getPrototypeOf(qb.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(P,
qa){qa=void 0===qa?!0:qa;this.setProperty("number",qa?P/this.scaleFactor:P);wb.signal(this,"number",this.number);this.relayout(qa)}},{key:"relayoutButtons",value:function(){var P=this.getSubmorphNamed("up"),qa=this.getSubmorphNamed("down");this.getSubmorphNamed("value");P.height=qa.height=(this.height-2)/2;P.width=qa.width=20}},{key:"onChange",value:function(P){fc._get(Object.getPrototypeOf(qb.prototype),"onChange",this).call(this,P);"extent"!=P.prop||this.autofit||this.relayout()}},{key:"relayout",
value:function(P){var qa=this.getSubmorphNamed("value");qa&&(this.autofit?(P||(qa.value=this.number*this.scaleFactor),qa.fit(),this.height=qa.height,this.width=qa.width+20):P||(qa.width=this.width-20),this.relayoutButtons(),P||(qa.value=wb.num.roundTo(this.number*this.scaleFactor,1),qa.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,qa.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,qa.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||
this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=this.min&&this.number<=this.min||this.update(this.number-1/this.scaleFactor,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(P){this.setProperty("autofit",P);this.getSubmorphNamed("value").scaleToBounds=!P}},
number:{defaultValue:0,after:["unit","autofit"],set:function(P){this.setProperty("number",P);this.relayout(!1)}},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},floatingPoint:{after:["number","submorphs"],set:function(P){this.setProperty("floatingPoint",P);this.get("value").floatingPoint=P},get:function(){var P=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return this.getProperty("floatingPoint")||1==this.scaleFactor&&P&&!!P[1]}},padding:{isStyleProp:!0,defaultValue:wb.rect(5,3,0,0),after:["submorphs"],
set:function(P){this.setProperty("padding",P);this.getSubmorphNamed("value").padding=P}},extent:{defaultValue:wb.pt(70,25)},scaleFactor:{defaultValue:1,get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(P){this.get("value").baseFactor=P}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/number field/light"}}},fontColor:{isStyleProp:!0,
defaultValue:wb.Color.rgbHex("#0086b3"),set:function(P){this.setProperty("fontColor",P)}},isSelected:{set:function(P){this.getProperty("isSelected")!=P&&(P?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",P))}},fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(P){this.setProperty("fontFamily",P)}},fontSize:{defaultValue:15,isStyleProp:!0,set:function(P){this.setProperty("fontSize",
P)}},layout:{initialize:function(){this.layout=new wb.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},submorphs:{after:["min","max"],initialize:function(){var P=this;this.submorphs=[new wb.ValueScrubber({name:"value",unit:this.unit,floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),wb.Icon.makeLabel("sort-up",{name:"up"}),wb.Icon.makeLabel("sort-up",{name:"down",rotation:Math.PI})];wb.connect(this.get("value"),"scrub",this,"update");this.whenRendered().then(function(){return P.relayout()})}}}}}],
Xa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10643,end:16590})}(wb.Morph));wb.NumberWidget=Zd;wb.NumberWidget=Zd;wb.NumberWidget=Zd;var Je=function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=Xa.hasOwnProperty("ShadowWidget")&&"function"===typeof Xa.ShadowWidget?
Xa.ShadowWidget:Xa.ShadowWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"onMouseDown",value:function(P){this.openPopover()}},{key:"openPopover",value:function(){var P=this,qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){if(1==fb.nextAddress)return qa=new wb.popovers.ShadowPopover({hasFixedPosition:!!P.ownerChain().find(function(Lb){return Lb.hasFixedPosition}),shadowValue:P.shadowValue}),
fb.yield(qa.fadeIntoWorld(P.globalBounds().center()),2);wb.connect(qa,"shadowValue",P,"shadowValue");wb.connect(P,"shadowValue",P,"update");wb.signal(P,"openWidget",qa);fb.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},
{key:"updateShadowDisplay",value:function(){var P=this.shadowValue,qa=P.blur,fb=P.spread,Lb=P.distance;P=P.color;var gc=$jscomp.makeIterator(this.submorphs),Zc=gc.next().value,Qd=gc.next().value;Qd=$jscomp.makeIterator(Qd.submorphs).next().value;gc=gc.next().value;Zc.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";Qd.fill=P;gc.value=", "+qa+"px, "+Lb+"px, "+fb+"px)"}},{key:"initShadowDisplay",value:function(){var P=this.shadowValue,qa=P.blur,fb=P.spread,Lb=P.distance;P=P.color;this.submorphs=
[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},wb.morph({fill:wb.Color.transparent,extent:wb.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:wb.pt(this.fontSize,this.fontSize),position:wb.pt(2,2),fill:P,borderColor:wb.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+qa+"px, "+Lb+"px, "+fb+"px)"}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},
{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(P){this.setProperty("shadowValue",P);this.renderShadowDisplay()}},fill:{defaultValue:wb.Color.transparent},nativeCursor:{defaultValue:"pointer"},fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(P){this.submorphs.forEach(function(qa){return qa.fontColor=P})}},isSelected:{defaultValue:!1,set:function(P){this.setProperty("isSelected",P);this.fontColor=P?wb.Color.white:wb.Color.black}},
layout:{initialize:function(){this.layout=new wb.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],Xa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:16599,end:19722})}(wb.Morph);wb.ShadowWidget=Je;wb.ShadowWidget=Je;wb.ShadowWidget=Je;var Dc=function(hb){var Xa=
lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=Xa.hasOwnProperty("PointWidget")&&"function"===typeof Xa.PointWidget?Xa.PointWidget:Xa.PointWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"onMouseDown",value:function(P){this.openPopover()}},{key:"openPopover",value:function(){var P=this,qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){if(1==fb.nextAddress)return qa=
new wb.popovers.PointPopover({pointValue:P.pointValue,hasFixedPosition:!!P.ownerChain().find(function(Lb){return Lb.hasFixedPosition})}),fb.yield(qa.fadeIntoWorld(P.globalBounds().center()),2);wb.connect(qa,"pointValue",P,"pointValue");wb.signal(P,"openWidget",qa);fb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(P){this.setProperty("isSelected",P);this.fontColor=P?
this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:wb.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:wb.Color.black},fontFamily:{defaultValue:wb.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(P){var qa=wb.Color.rgbHex("#0086b3");this.setProperty("pointValue",P);this.textAndAttributes=["pt(",null,P.x.toFixed(),
{fontColor:qa},",",{},P.y.toFixed(),{fontColor:qa},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],Xa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:19731,end:21375})}(wb.Label);wb.PointWidget=Dc;wb.PointWidget=Dc;wb.PointWidget=
Dc;var re=function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=Xa.hasOwnProperty("PaddingWidget")&&"function"===typeof Xa.PaddingWidget?Xa.PaddingWidget:Xa.PaddingWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"onMouseDown",value:function(P){this.openPopover()}},{key:"openPopover",value:function(){var P=this,qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){if(1==
fb.nextAddress)return qa=new wb.popovers.RectanglePopover({hasFixedPosition:!!P.ownerChain().find(function(Lb){return Lb.hasFixedPosition}),rectangle:P.rectangle}),qa.relayout(),fb.yield(qa.fadeIntoWorld(P.globalBounds().center()),2);wb.connect(qa,"rectangle",P,"rectangle");wb.signal(P,"openWidget",qa);fb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},
fontFamily:{defaultValue:wb.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(P){this.setProperty("isSelected",P);this.fontColor=P?wb.Color.white:wb.Color.black}},rectangle:{defaultValue:wb.rect(0),set:function(P){this.setProperty("rectangle",P);this.value=wb.obj.safeToString(P)}}}}}],Xa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:21384,end:22445})}(wb.Label);wb.PaddingWidget=re;wb.PaddingWidget=re;wb.PaddingWidget=re;var cd=function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=Xa.hasOwnProperty("IconWidget")&&"function"===typeof Xa.IconWidget?Xa.IconWidget:Xa.IconWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"onMouseDown",
value:function(P){this.openPopover()}},{key:"openPopover",value:function(){var P=this,qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){if(1==fb.nextAddress)return qa=new wb.popovers.IconPopover({hasFixedPosition:!!P.ownerChain().find(function(Lb){return Lb.hasFixedPosition})}),fb.yield(qa.fadeIntoWorld(P.globalBounds().center()),2);wb.connect(qa,"select",P,"iconValue",{converter:function(Lb){return Lb&&wb.Icon.makeLabel(Lb).value},varMapping:{Icon:Ye}});wb.signal(P,"openWidget",
qa);fb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:wb.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,get:function(){return this.value},set:function(P){this.value=P||"No Icon"}}}}}],Xa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22454,end:23385})}(wb.Label);wb.IconWidget=cd;wb.IconWidget=cd;wb.IconWidget=cd;var we=function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=Xa.hasOwnProperty("StringWidget")&&"function"===typeof Xa.StringWidget?Xa.StringWidget:Xa.StringWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"truncate",
value:function(P){return 200<P.length?P.slice(0,20)+"...":P}},{key:"onFocus",value:function(P){var qa=this,fb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lb){if(1==Lb.nextAddress)return fc._get(Object.getPrototypeOf(qb.prototype),"onFocus",qa).call(qa,P),qa.readOnly?Lb.return():qa.stringTooLong?Lb.yield(qa.world().editPrompt("edit string",{requester:qa,input:qa.stringValue}),2):(qa.borderColor=wb.Color.white.withA(.9),qa.textString=qa.stringValue,Lb.return());fb=Lb.yieldResult;if("string"===
typeof fb)qa.onInput(fb);Lb.jumpToEnd()})}},{key:"onBlur",value:function(P){fc._get(Object.getPrototypeOf(qb.prototype),"onBlur",this).call(this,P);this.readOnly||(this.borderColor=wb.Color.transparent,this.onInput(this.textString))}},{key:"onInput",value:function(P){this.owner.focus();wb.signal(this,"inputAccepted",P);this.stringValue=P}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:wb.Color.transparent},
fontColor:{defaultValue:wb.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:wb.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:wb.rect(0,0,0,0)},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(P){this.setProperty("stringValue",P);this.textString=this.truncate(P);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,
get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(P){this.setProperty("isSelected",P);this.fontColor=P?wb.Color.white:wb.Color.blue}}}}}],Xa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23394,end:25345})}(wb.InputLine);wb.StringWidget=
we;wb.StringWidget=we;wb.StringWidget=we;wb.valueWidgets=Cb;Object.assign(wb.valueWidgets,{NumberWidget:Zd,StringWidget:we,IconWidget:cd,PaddingWidget:re,ShadowWidget:Je,PointWidget:Dc,BooleanWidget:yd,LayoutWidget:pb,ColorWidget:md});var xa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");xa.Ellipse=mc;xa.Icon=Ye;xa.Morph=sf;xa.Path=ie;xa.Text=Ic;xa.HorizontalLayout=Cc;xa.VerticalLayout=Oa;xa.morph=bc;xa.Color=nc;xa.pt=Ib;xa.rect=Oc;xa.Rectangle=Yc;xa.arr=Bb;xa.connect=cc;xa.disconnect=
Md;xa.LabeledCheckBox=Tb;xa.DropDownSelector=pa;xa.Button=Ja;xa.Menu=X;xa.NumberWidget=Zd;xa.InteractiveMorphSelector=hd;xa.easings=qd;(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=Xa.hasOwnProperty("AxisHalo")&&"function"===typeof Xa.AxisHalo?Xa.AxisHalo:Xa.AxisHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:Symbol.for("lively-instance-initialize"),value:function(P){var qa=
P.halo;P=P.targetAxis;fc._get(Object.getPrototypeOf(qb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{fill:xa.Color.transparent,halo:qa,targetAxis:P,container:qa.container});this.initialize()}},{key:"initialize",value:function(){this.setBounds(this.fetchBounds());this.minSlider=this.minSlider();this.axisMenu=this.axisMenu();this.proportionSlider=this.proportionSlider();this.proportionSlider.addMorph(this.minSlider);this.submorphs=[this.proportionSlider,this.axisMenu];this.halo.addGuide(this)}},
{key:"forceMenuHidden",set:function(P){this._forceMenuHidden=P;this.axisMenu.visible=!P}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();this.axisMenu.alignWithTarget()}},{key:"onHoverIn",
value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(P){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var P=this,qa=this,fb=this.proportionViewer();return this.halo.addGuide(new xa.Morph({nativeCursor:this.getResizeCursor(),fill:xa.Color.transparent,submorphs:[this.devider(),fb],alignWithTarget:function(){this.setBounds(qa.getProportionSliderBounds(this))},
onDragStart:function(){fb.visible=!0},onDrag:function(Lb){P.adjustStretch(P.getDelta(Lb));P.halo.alignWithTarget()},onDragEnd:function(){fb.visible=!1}}))}},{key:"devider",value:function(){return new xa.Morph({visible:!this.lastAxis,fill:xa.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var P=this,qa=this,fb=this.minSpaceVisualizer(),Lb=this.minViewer();return this.halo.addGuide(new xa.Ellipse({nativeCursor:this.getResizeCursor(),
fill:xa.Color.green,extent:xa.pt(10,10),visible:!1,submorphs:[fb,Lb],becomesActiveOnHover:!0,alignWithTarget:function(){this.position=qa.getMinSliderPosition()},requestToShow:function(){this.visible=!qa.targetAxis.fixed},requestToHide:function(){this.active?this.shouldHide=!0:this.visible=!1},onDragStart:function(){qa.forceMenuHidden=!0;Lb.visible=!0;this.active=fb.visible=!0},onDrag:function(gc){P.targetAxis.min+=-P.getDelta(gc);P.halo.alignWithTarget()},onDragEnd:function(){qa.forceMenuHidden=!1;
Lb.visible=!1;this.active=fb.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=!1)}}))}},{key:"minViewer",value:function(){var P=this;return this.viewer({position:this.getMinViewerPosition(),alignWithTarget:function(){this.textString="min: "+P.targetAxis.min.toFixed()+"px !"}})}},{key:"minSpaceBorder",value:function(){return new xa.Path(Object.assign({position:xa.pt(-1,-1),borderStyle:"dashed",borderColor:xa.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",
value:function(){var P=this,qa=this.minSpaceBorder();return this.halo.addGuide(new xa.Morph({fill:xa.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[qa],alignWithTarget:function(){this.extent=P.getMinSpaceExtent();this.topLeft=xa.pt(5,5)}}))}},{key:"axisMenu",value:function(){var P=this.lockButton(),qa=this.menuButton(),fb=this;return new xa.Morph({layout:this.getMenuLayout(),submorphs:[P,qa],fill:xa.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=
this.owner.extent.subPt(fb.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var P=this;return this.halo.addGuide(new xa.Morph({fill:xa.Color.transparent,extent:xa.pt(25,25),submorphs:[{center:xa.pt(12.5,12.5),fill:xa.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){P.targetAxis.fixed?(this.fontColor=xa.Color.red,this.submorphs[0].styleClasses=["fa","fa-lock"]):(this.fontColor=xa.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},
toggleLock:function(){P.targetAxis.fixed=!P.targetAxis.fixed;P.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var P=this,qa=this;return new xa.Morph({fill:xa.Color.transparent,extent:xa.pt(25,25),submorphs:[{fill:xa.Color.transparent,styleClasses:["fa","fa-cog"],center:xa.pt(12.5,12.5)}],onMouseDown:function(fb){qa.forceMenuVisible=!0;this.addMorph(fb.state.menu=new xa.Menu({position:xa.pt(15,15),items:[["Remove "+qa.subject,function(){P.targetAxis.remove();P.halo.initGuides();P.halo.alignWithTarget()}],
["Insert "+qa.subject+" before",function(){P.targetAxis.addBefore();P.halo.initGuides();P.halo.alignWithTarget()}],["Insert "+qa.subject+" after",function(){P.targetAxis.addAfter();P.halo.initGuides();P.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(P){var qa=P.position;P=P.alignWithTarget;return this.halo.addGuide(new xa.Text({styleClasses:["Halo"],padding:xa.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:xa.Color.white,fill:xa.Color.black.withA(.5),position:qa,alignWithTarget:P,
readOnly:!0}))}},{key:"proportionViewer",value:function(){var P=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString=P.targetAxis.length.toFixed(1)+"px"}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AxisHalo"}}],Xa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:660,end:7979})})(xa.Morph);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=Xa.hasOwnProperty("RowHalo")&&"function"===typeof Xa.RowHalo?Xa.RowHalo:Xa.RowHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:Symbol.for("lively-instance-initialize"),value:function(P){var qa=P.row;P=P.halo;fc._get(Object.getPrototypeOf(qb.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,{targetAxis:P.target.row(qa),halo:P})}},{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(P){this.targetAxis.height+=P}},{key:"getDelta",value:function(P){return P.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return xa.pt(-45,this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return xa.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(P){return this.targetAxis.length>
P.height?xa.pt(2,5):xa.pt(26,10)}},{key:"getMenuLayout",value:function(){return new xa.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return xa.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return xa.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",value:function(){return xa.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:xa.pt(this.container.width+
50,2),vertices:[xa.pt(0,1),xa.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return xa.pt(40,20)}},{key:"getProportionSliderBounds",value:function(P){return xa.pt(0,P.owner.height-5).extent(xa.pt(40,10))}},{key:"getDeviderBounds",value:function(){return xa.pt(15,4).extent(xa.pt(25,2))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RowHalo"}}],Xa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:7981,end:9208})})(xa.AxisHalo);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=Xa.hasOwnProperty("ColumnHalo")&&"function"===typeof Xa.ColumnHalo?Xa.ColumnHalo:Xa.ColumnHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:Symbol.for("lively-instance-initialize"),
value:function(P){var qa=P.col;P=P.halo;fc._get(Object.getPrototypeOf(qb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:P.target.col(qa),halo:P})}},{key:"subject",get:function(){return"column"}},{key:"adjustStretch",value:function(P){this.targetAxis.width+=P}},{key:"getDelta",value:function(P){return P.state.dragDelta.x}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return xa.pt(this.axisOffset()+
10,-45)}},{key:"fetchExtent",value:function(){return xa.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(P){return this.targetAxis.length>P.width?xa.pt(5,3):xa.pt(8,26)}},{key:"getMenuLayout",value:function(){return new xa.HorizontalLayout}},{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return xa.pt(20,50)}},{key:"getMinSliderPosition",value:function(){return xa.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",
value:function(){return xa.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:xa.pt(2,this.container.height+50),vertices:[xa.pt(1,0),xa.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return xa.pt(20,40)}},{key:"getProportionSliderBounds",value:function(P){return xa.pt(P.owner.width-5,0).extent(xa.pt(10,40))}},{key:"getDeviderBounds",value:function(){return xa.pt(4,15).extent(xa.pt(2,25))}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ColumnHalo"}}],Xa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:9210,end:10442})})(xa.AxisHalo);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=Xa.hasOwnProperty("CellGuide")&&"function"===typeof Xa.CellGuide?Xa.CellGuide:Xa.CellGuide=
function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"menuItems",value:function(){var P=this,qa=xa.Icon.textAttribute("check-square-o"),fb=xa.Icon.textAttribute("square-o");qa[1].textStyleClasses.push("annotation");fb[1].textStyleClasses.push("annotation");fb[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?fb:qa)),function(){P.cellGroup.resize=
!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?qa:fb)),function(){P.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new xa.Rectangle).sides),$jscomp.arrayFromIterable((new xa.Rectangle).corners)).map(function(Lb){return[[Lb,{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(P.cellGroup.align==Lb?qa:fb),["  ",null]),function(){return P.cellGroup.align=Lb}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var Lb=
P.cellGroup.morph;Lb&&(P.world().firstHand.grab(Lb),P.world().firstHand.longClickGrab=!0,Lb.position=xa.pt(0))}]]:[])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],Xa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:10444,end:11722})})(xa.Morph);(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=Xa.hasOwnProperty("LayoutHalo")&&"function"===typeof Xa.LayoutHalo?Xa.LayoutHalo:Xa.LayoutHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutHalo"}},{key:"properties",get:function(){return{container:{},target:{},
pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:xa.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],Xa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11724,end:12137})})(xa.Morph);
Cb=Ba("G",function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=Xa.hasOwnProperty("GridLayoutHalo")&&"function"===typeof Xa.GridLayoutHalo?Xa.GridLayoutHalo:Xa.GridLayoutHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"previewDrop",value:function(P){1>P.length||(P=this.cellGuides.find(function(qa){return qa.fullContainsWorldPoint($world.firstHand.position)}),P!=this.currentCell&&
this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=P)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(P){var qa=this;this.currentCell&&P.whenRendered().then(function(){return qa.currentCell.cellGroup.morph=P})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();this.focus()}},{key:"optionControls",value:function(){var P=this.target,qa=new xa.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:xa.Color.transparent,checked:P.compensateOrigin}),
fb=new xa.LabeledCheckBox({label:"Resize Submorphs",fill:xa.Color.transparent,name:"fitToCell",checked:P.fitToCell});xa.connect(qa,"checked",P,"compensateOrigin");xa.connect(fb,"checked",P,"fitToCell");xa.connect(qa,"checked",this,"alignWithTarget");return[qa,fb]}},{key:"isLayoutHalo",get:function(){return!1}},{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=
this.container.extent;this.addMissingGuides();xa.arr.reverse(this.guides).forEach(function(P){return P.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var P=this;xa.arr.withoutAll(this.target.cellGroups,this.guides.map(function(qa){return qa.cellGroup})).forEach(function(qa){return P.addMorph(P.cellGuide(qa))})}},{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var P=
this,qa=this.addMorph({fill:xa.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(fb){qa.addMorph(P.cellGuide(fb))});this.cellGuides=qa.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(P){P.isHaloItem=!0;this.guides.push(P);return P}},{key:"initRowGuides",value:function(){var P=this,qa=this;this.addGuide(this.addMorph(new xa.Morph({width:25,fill:xa.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:xa.pt(-5,
0),alignWithTarget:function(){this.height=qa.container.height}})));xa.arr.range(0,this.target.rowCount-1).forEach(function(fb){P.addMorph(new xa.RowHalo({row:fb,halo:P}))})}},{key:"initColumnGuides",value:function(){var P=this,qa=this;this.addGuide(this.addMorph(new xa.Morph({height:25,fill:xa.Color.gray.withA(.7),borderRadius:15,width:this.container.width,bottomLeft:xa.pt(0,-5),alignWithTarget:function(){this.width=qa.container.width}})));xa.arr.range(0,this.target.columnCount-1).forEach(function(fb){P.addMorph(new xa.ColumnHalo({col:fb,
halo:P}))})}},{key:"resizer",value:function(){var P=this;return this.addGuide(new xa.Morph({fill:xa.Color.transparent,extent:xa.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(qa){P.container.resizeBy(qa.state.dragDelta);P.alignWithTarget()},alignWithTarget:function(){this.bottomRight=P.extent}}))}},{key:"cellResizer",value:function(P,qa){var fb=this,Lb="topLeft"==qa?"bottomRight":"topLeft";return new xa.Ellipse({borderWidth:1,visible:!1,borderColor:xa.Color.black,nativeCursor:"nwse-resize",
removeCell:function(gc){P.disconnect(gc);fb.alignWithTarget()},addCell:function(gc){P.connect(gc);fb.alignWithTarget()},start:function(){this.fixpointCell=P[Lb];this.draggedDelta=P.bounds().partNamed(qa);this.debugMorph=fb.addMorph(new xa.Morph({fill:xa.Color.orange.withA(.5)}))},update:function(gc){var Zc=this;this.draggedDelta=this.draggedDelta.addPt(gc);var Qd=xa.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(Qd);fb.cells.forEach(function(ge){var Sc=
Qd.intersection(ge.bounds()).area()/ge.bounds().area();P.includes(ge)&&.1>Sc&&Zc.removeCell(ge);!P.includes(ge)&&Sc>1/3&&Zc.addCell(ge)})},onDragEnd:function(gc){this.debugMorph.remove()},onDragStart:function(gc){this.start(gc.position)},onDrag:function(gc){this.update(gc.state.dragDelta)}})}},{key:"cellGuide",value:function(P){var qa=this,fb=this.cellResizer(P,"topLeft"),Lb=this.cellResizer(P,"bottomRight");return this.addGuide(new xa.CellGuide({cellGroup:P,bounds:P.bounds(),fill:xa.Color.transparent,
borderColor:xa.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[fb,Lb],onMouseDown:function(gc){this.becomeActive()},deactivate:function(){this.borderColor=xa.Color.orange;this.fill=xa.Color.transparent;this.submorphs.forEach(function(gc){gc.visible=!1})},becomeActive:function(){qa.guides.forEach(function(gc){gc.isCell&&gc.deactivate()});this.borderColor=xa.Color.rgbHex("#1565C0");this.fill=xa.Color.rgbHex("#1565C0").withA(.3);qa.addMorph(this.remove());this.submorphs.forEach(function(gc){gc.visible=
!0})},startPreview:function(gc){this.fill=xa.Color.orange.withA(.7)},stopPreview:function(gc){this.fill=xa.Color.transparent},onDrop:function(gc){var Zc=$jscomp.makeIterator(gc.hand.grabbedMorphs).next().value;gc.hand.dropMorphsOn(qa.container);P.morph=Zc},alignWithTarget:function(){P.bounds().isNonEmpty()?(this.setBounds(P.bounds()),fb.center=this.innerBounds().topLeft(),Lb.center=this.innerBounds().bottomRight()):(xa.arr.remove(qa.guides,this),this.remove())}}))}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:xa.Color.transparent},cells:{derived:!0,get:function(){return xa.arr.flatten(this.target.col(0).items.map(function(P){return P.row(0).items}))}},submorphs:{initialize:function(){this.initialize()}}}}}],Xa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:12146,end:19501})}(xa.LayoutHalo));xa.GridLayoutHalo=Cb;xa.GridLayoutHalo=Cb;xa.GridLayoutHalo=Cb;pb=function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=Xa.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof Xa.TilingLayoutHalo?Xa.TilingLayoutHalo:Xa.TilingLayoutHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"remove",value:function(){fc._get(Object.getPrototypeOf(qb.prototype),
"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(P){}},{key:"removePreviews",value:function(){this.previews.forEach(function(P){return P.clear()})}},{key:"previewDrop",value:function(P){var qa=this;0<this.previews.length||(this.previews=P.map(function(fb){return qa.container.addMorph({type:xa.DropPreview,bounds:fb.bounds()})}),this.previews.forEach(function(fb){fb.step()}))}},
{key:"updateSpacing",value:function(P){this.target.spacing=P}},{key:"updateAxis",value:function(P){this.target.axis=P}},{key:"updateAlign",value:function(P){this.target.align=P}},{key:"optionControls",value:function(){var P=this.target,qa=new xa.DropDownSelector({borderRadius:2,padding:3,selectedValue:P.axis,values:["row","column"]}),fb=new xa.DropDownSelector({borderRadius:2,padding:3,selectedValue:P.align,values:["left","center"]});P=new xa.NumberWidget({min:0,number:P.spacing,padding:xa.rect(5,
3,0,0),borderRadius:3,borderWidth:1,borderColor:xa.Color.gray,unit:"px"});xa.connect(P,"update",this,"updateSpacing");xa.connect(fb,"update",this,"updateAlign");xa.connect(qa,"update",this,"updateAxis");var Lb={type:"label",padding:xa.rect(0,5,5,5),fill:xa.Color.transparent,fontColor:xa.Color.gray.darker(),readOnly:!0};return[[Object.assign({},Lb,{textString:"Submorph Spacing"}),P],[Object.assign({},Lb,{textString:"Tiling Align"}),fb],[Object.assign({},Lb,{textString:"Tiling Axis"}),qa]].map(function(gc){return{submorphs:gc,
fill:null,layout:new xa.HorizontalLayout({spacing:3})}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:xa.Color.transparent},previews:{defaultValue:[]}}}}],Xa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:19510,end:21708})}(xa.LayoutHalo);xa.TilingLayoutHalo=pb;xa.TilingLayoutHalo=pb;xa.TilingLayoutHalo=pb;(function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=Xa.hasOwnProperty("DropPreview")&&"function"===typeof Xa.DropPreview?Xa.DropPreview:Xa.DropPreview=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",
value:function(){var P=this,qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){if(1==fb.nextAddress)return qa=xa.easings.inOutQuad,fb.yield(P.animate({opacity:.5,duration:(P.pulseDuration-10)/2,easing:qa}),2);if(3!=fb.nextAddress)return fb.yield(P.animate({opacity:1,duration:(P.pulseDuration-10)/2,easing:qa}),3);P.stopped||P.step();fb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,
get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:xa.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:xa.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],Xa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:21710,end:22534})})(xa.Morph);pb=Ba("F",function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=Xa.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof Xa.FlexLayoutHalo?Xa.FlexLayoutHalo:Xa.FlexLayoutHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"handleDrop",value:function(P){}},{key:"previewDrop",value:function(P){var qa=this;0<this.previews.length||
(this.previews=P.map(function(fb){return qa.container.addMorph({type:xa.DropPreview,position:qa.container.localize(qa.world().firstHand.position),extent:fb.bounds().extent()})}),this.previews.forEach(function(fb){fb.step()}))}},{key:"remove",value:function(){fc._get(Object.getPrototypeOf(qb.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(P){return P.clear()})}},{key:"onDrop",value:function(P){this.removePreviews();
P.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",value:function(P){P&&(this.originalExtent=this.container.extent);this.target.autoResize=P;P||(this.container.extent=this.originalExtent||this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(P){this.target.resizeSubmorphs=P;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(P){this.target.align=
P}},{key:"updateDirectionPolicy",value:function(P){this.target.direction=P}},{key:"updateSpacing",value:function(P){this.target.spacing=P}},{key:"optionControls",value:function(){var P=this.target,qa=P.possibleAlignValues?{fill:xa.Color.transparent,layout:new xa.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new xa.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:P.align,values:P.possibleAlignValues})]}:null,fb=
P.possibleDirectionValues?{fill:xa.Color.transparent,layout:new xa.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},new xa.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:P.direction,values:P.possibleDirectionValues})]}:null,Lb=new xa.NumberWidget({fill:xa.Color.white,borderWidth:1,borderRadius:4,padding:xa.rect(5,4,0,0),borderColor:xa.Color.gray,min:0,number:P.spacing,unit:"px"}),gc=new xa.LabeledCheckBox({name:"autoResize",
label:"Resize Container",alignCheckBox:"right",fill:xa.Color.transparent,checked:P.autoResize});P=new xa.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",alignCheckBox:"right",fill:xa.Color.transparent,checked:P.resizeSubmorphs});xa.connect(Lb,"update",this,"updateSpacing");xa.connect(gc,"checked",this,"updateAutoResizePolicy");xa.connect(P,"checked",this,"updateResizeSubmorphsPolicy");qa&&xa.connect(qa.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");fb&&xa.connect(fb.submorphs[1],
"selectedValue",this,"updateDirectionPolicy");return[gc,P].concat($jscomp.arrayFromIterable([qa,fb].filter(Boolean)),[{fill:xa.Color.transparent,layout:new xa.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:xa.Color.gray.darker(),padding:xa.rect(0,5,5,5)},Lb]}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:xa.Color.transparent},halosEnabled:{defaultValue:!1},
previews:{defaultValue:[]}}}}],Xa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22543,end:26761})}(xa.LayoutHalo));xa.FlexLayoutHalo=pb;xa.FlexLayoutHalo=pb;xa.FlexLayoutHalo=pb;md=Ba("c",function(hb){var Xa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=Xa.hasOwnProperty("ProportionalLayoutHalo")&&
"function"===typeof Xa.ProportionalLayoutHalo?Xa.ProportionalLayoutHalo:Xa.ProportionalLayoutHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fc(qb,hb,[{key:"handleDrop",value:function(P){}},{key:"onDrop",value:function(P){P.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",value:function(P){var qa=
{};this.target.changeSettingsFor(P.submorph,(qa[P.axis]=P.policy,qa),!0)}},{key:"onSubmorphSettingsDragStart",value:function(P,qa){var fb=this;P.stop();var Lb=this.target.settingsFor(qa);qa="";for(var gc in Lb)qa+=gc+":"+Lb[gc]+" ";var Zc=xa.morph({type:"label",value:qa,isLayoutable:!1});Zc.wantsToBeDroppedOn=function(Qd){return fb.target.layoutableSubmorphs.includes(Qd)};Zc.onBeingDroppedOn=function(Qd,ge){Zc.remove();if(Qd=fb.target.layoutableSubmorphs.includes(ge)?ge:P.world.morphsContainingPoint(P.hand.position).find(function(Sc){return fb.target.layoutableSubmorphs.includes(Sc)}))fb.updateSubmorphProportionalLayoutSettings({policy:Lb.x,
axis:"x",submorph:Qd}),fb.updateSubmorphProportionalLayoutSettings({policy:Lb.y,axis:"y",submorph:Qd}),Qd.show(),$world.setStatusMessage("layout settings applied")};P.hand.grab(Zc)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var P=this,qa,fb,Lb,gc,Zc,Qd,ge,Sc,Pe,Ue,Me,Gf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Hf){switch(Hf.nextAddress){case 1:return qa=P.target.layoutableSubmorphs,P.env.eventDispatcher.isKeyPressed("Shift")?(Lb=qa.map(function(Vb){return{isListItem:!0,
string:String(Vb),value:Vb}}),Hf.yield($world.listPrompt("Select morph",Lb,{requester:P,onSelection:function(Vb){return Vb.show()}}),5)):Hf.yield(xa.InteractiveMorphSelector.selectMorph(P.world(),P,function(Vb){return qa.includes(Vb)}),4);case 4:fb=Hf.yieldResult;Hf.jumpTo(3);break;case 5:gc=Hf.yieldResult,Zc=$jscomp.makeIterator(gc.selected),fb=Zc.next().value;case 3:if(!fb)return Hf.return();Qd=P.state.popover.get("controlContainer");ge=Qd.getAllNamed(/submorph config/);Sc=["move","resize","scale",
"fixed"];Pe=P.target.settingsFor(fb);ge.length||(Qd.submorphs=[].concat($jscomp.arrayFromIterable(Qd.submorphs),[{name:"submorph config X-Axis policy",position:xa.pt(0,P.height),fill:xa.Color.transparent,layout:new xa.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new xa.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:Pe.x,values:Sc})]},{name:"submorph config Y-Axis policy",position:xa.pt(0,
P.height),fill:xa.Color.transparent,layout:new xa.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new xa.DropDownSelector({name:"y-axis policy selector",borderRadius:2,padding:3,selectedValue:Pe.y,values:Sc})]},xa.morph({position:xa.pt(0,P.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));Ue=Qd.getSubmorphNamed("x-axis policy selector");Me=Qd.getSubmorphNamed("y-axis policy selector");Gf=Qd.getSubmorphNamed("dragme");
xa.disconnect(Ue,"selectedValue",P,"updateSubmorphProportionalLayoutSettings");xa.disconnect(Me,"selectedValue",P,"updateSubmorphProportionalLayoutSettings");Ue.selectedValue=Pe.x;Me.selectedValue=Pe.y;xa.connect(Gf,"onDragStart",P,"onSubmorphSettingsDragStart",{updater:function(Vb,Ng){return Vb(Ng,fb)},varMapping:{submorph:fb}});xa.connect(Ue,"selectedValue",P,"updateSubmorphProportionalLayoutSettings",{converter:function(Vb){return{policy:Vb,axis:"x",submorph:fb}},varMapping:{submorph:fb}});xa.connect(Me,
"selectedValue",P,"updateSubmorphProportionalLayoutSettings",{converter:function(Vb){return{policy:Vb,axis:"y",submorph:fb}},varMapping:{submorph:fb}});Hf.jumpToEnd()}})}},{key:"optionControls",value:function(P){this.state.popover=P;var qa=this.target;P=new xa.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:xa.Color.transparent,checked:qa.xAxisEnabled});qa=new xa.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:xa.Color.transparent,checked:qa.yAxisEnabled});
var fb=new xa.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(xa.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});xa.connect(P,"checked",this,"updateXAxisEnabled");xa.connect(qa,"checked",this,"updateYAxisEnabled");xa.connect(fb,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[fb]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},
fill:{defaultValue:xa.Color.transparent}}}}],Xa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:26771,end:32465})}(xa.LayoutHalo));xa.ProportionalLayoutHalo=md;xa.ProportionalLayoutHalo=md;xa.ProportionalLayoutHalo=md;yd=lively.FreezerRuntime.recorderFor("lively.halos/index.js");yd.Halo=$c;
yd.MorphHighlighter=sb;yd.InteractiveMorphSelector=hd;yd.StatusMessage=Yd;yd.StatusMessageForMorph=Cd;yd.show=vc;yd.showConnector=Bd;yd.ProportionalLayoutHalo=md;yd.GridLayoutHalo=Cb;yd.FlexLayoutHalo=pb;yd.showAndSnapToGuides=ab;yd.removeSnapToGuidesOf=ua;yd.StatusMessage=Yd;yd.StatusMessage=Yd;yd.StatusMessageForMorph=Cd;yd.StatusMessageForMorph=Cd;yd.show=vc;yd.show=vc;yd.showConnector=Bd;yd.showConnector=Bd;yd.Halo=$c;yd.Halo=$c;yd.MorphHighlighter=sb;yd.MorphHighlighter=sb;yd.InteractiveMorphSelector=
hd;yd.InteractiveMorphSelector=hd;yd.ProportionalLayoutHalo=md;yd.ProportionalLayoutHalo=md;yd.GridLayoutHalo=Cb;yd.GridLayoutHalo=Cb;yd.FlexLayoutHalo=pb;yd.FlexLayoutHalo=pb;yd.showAndSnapToGuides=ab;yd.showAndSnapToGuides=ab;yd.removeSnapToGuidesOf=ua;yd.removeSnapToGuidesOf=ua;Yd=Object.freeze({__proto__:null,StatusMessage:Yd,StatusMessageForMorph:Cd,show:vc,showConnector:Bd,Halo:$c,MorphHighlighter:sb,InteractiveMorphSelector:hd,ProportionalLayoutHalo:md,GridLayoutHalo:Cb,FlexLayoutHalo:pb,showAndSnapToGuides:ab,
removeSnapToGuidesOf:ua,SvgStyleHalo:void 0});Ba("i",Yd);Ba("_",void 0)}}});