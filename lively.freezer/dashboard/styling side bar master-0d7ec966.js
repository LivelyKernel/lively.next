System.register("./__root_module__-aefa9179.js kld-intersections ./index-ea95c5b9.js ./index-9b6165d2.js ./index-3100fe37.js ./color-picker-4e266839.js ./index-bde6215a.js".split(" "),function(){var Da,Bb,Qb,hc,ac,be,bd,Sd,ed,Mc,pd,Dd,ke,Kd,jd,cb,Ab,Yb,gc,dd,Zd,Wb;return{setters:[function(oc){Da=oc.ai;Bb=oc.aA;Qb=oc.an;hc=oc.ao;ac=oc.av;be=oc.a3;bd=oc.C;Sd=oc.at;ed=oc.aq;Mc=oc.bq;pd=oc.as;Dd=oc.a7;ke=oc.s;Kd=oc.bS;jd=oc.au;cb=oc.ar;Ab=oc.r;Yb=oc.a6;gc=oc.P;dd=oc.bV;Zd=oc.bW},function(){},function(){},
function(){},function(){},function(oc){Wb=oc.S},function(){}],execute:function(){var oc=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js");oc.Morph=Da;oc.touchInputDevice=Bb;oc.morph=Qb;oc.Icon=hc;oc.easings=ac;oc.pt=be;oc.Color=bd;oc.fun=Sd;oc.connect=ed;oc.TreeData=Mc;var Lb=function(qb){var uc=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),Hc=uc.hasOwnProperty("SettingsTree")&&"function"===typeof uc.SettingsTree?uc.SettingsTree:uc.SettingsTree=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pd(Hc,qb,[{key:"display",value:function(Ia){return Ia.panel?[Ia.panel,{}]:Ia.name}},{key:"collapse",value:function(Ia,Va){Ia.isCollapsed=Va}},{key:"isCollapsed",value:function(Ia){return Ia.isCollapsed}},{key:"isLeaf",value:function(Ia){return!Ia.children}},{key:"getChildren",value:function(Ia){return Ia.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SettingsTree"}},{key:"default",value:function(){return new this({isCollapsed:!1,
children:[{isCollapsed:!0,name:[" ",{}].concat($jscomp.arrayFromIterable(oc.Icon.textAttribute("font")),[" Rich Text",{fontWeight:"bold"}]),children:[{panel:oc.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(oc.Icon.textAttribute("image")),[" Shape",{fontWeight:"bold"}]),children:[{panel:oc.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(oc.Icon.textAttribute("border-style")),[" Border",{paddingLeft:"2px",fontWeight:"bold"}]),children:[{panel:oc.morph({})}]},
{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(oc.Icon.textAttribute("grip-vertical")),[" Layout",{paddingLeft:"4px",fontWeight:"bold"}]),children:[{panel:oc.morph({})}]}]})}},{key:"border",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" Type    ",{},oc.morph({height:20}),{}],children:[{panel:oc.morph({})}]},{isCollapsed:!1,name:[" Color   ",{},oc.morph({height:20}),{}],children:[{panel:oc.morph({})}]},{isCollapsed:!1,name:[" Width  ",{},oc.morph({height:20}),
{}],children:[{panel:oc.morph({})}]},{isCollapsed:!1,name:[" Radius ",{},oc.morph({height:20}),{}],children:[{panel:oc.morph({})}]}]})}}],uc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-58"}}},{start:284,end:2453})}(oc.TreeData);oc.SettingsTree=Lb;oc.SettingsTree=Lb;oc.SettingsTree=Lb;Lb=function(qb){var uc=
lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),Hc=uc.hasOwnProperty("StylingSideBar")&&"function"===typeof uc.StylingSideBar?uc.StylingSideBar:uc.StylingSideBar=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pd(Hc,qb,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"collapseAll",value:function(){this.getSubmorphsByStyleClassName("Tree").forEach(function(Ia){Ia.nodes.forEach(function(Va){return Ia.treeData.root==
Va?Ia.uncollapse(Va):Ia.collapse(Va)})})}},{key:"onWorldResize",value:function(Ia){Ia=void 0===Ia?!0:Ia;if(this.respondsToVisibleWindow){var Va=$world.visibleBounds(),tb=navigator.standalone&&oc.touchInputDevice?25:0,Jb=this.getSubmorphNamed("horizontal resizer");this.height=Va.height-tb;this.top=tb+Va.top();Jb.height=this.height;Jb.left=0;Jb.top=0;Ia&&(this.visible?this.topRight=Va.topRight():this.topLeft=Va.topRight())}}},{key:"toggle",value:function(Ia){var Va=this,tb,Jb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ib){switch(Ib.nextAddress){case 1:tb=
$world.visibleBounds();Jb=navigator.standalone&&oc.touchInputDevice?25:0;Va.height=tb.height-Jb;Va.top=Jb+tb.top();if(Ia)return $world.addMorph(Va,$world.get("lively top bar")),Va.left=tb.width,Va.visible=!0,Ib.yield(Va.whenRendered(),5);Va.detachFromWorld($world);return Ib.yield(Va.animate({opacity:0,left:tb.width,duration:300}),4);case 4:Va.visible=!1;Va.remove();Ib.jumpTo(0);break;case 5:return Va.onWorldResize(!1),Ib.yield(Va.animate({opacity:1,easing:oc.easings.outCirc,right:tb.width,duration:300}),
6);case 6:Va.attachToWorld($world),Ib.jumpToEnd()}})}},{key:"cleanupAnchors",value:function(){for(var Ia=this.withAllSubmorphsSelect(function(Ib){return Ib.anchors&&Ib.anchors.filter(function(ib){return!ib.id}).length}),Va={},tb=$jscomp.makeIterator(Ia),Jb=tb.next();!Jb.done;Va={$jscomp$loop$prop$m$2269:Va.$jscomp$loop$prop$m$2269},Jb=tb.next())Va.$jscomp$loop$prop$m$2269=Jb.value,Va.$jscomp$loop$prop$m$2269.anchors.forEach(function(Ib){return function(ib){return!ib.id&&Ib.$jscomp$loop$prop$m$2269.removeAnchor(ib)}}(Va));
return Ia.length}},{key:"attachToWorld",value:function(Ia){oc.connect(Ia,"showHaloFor",this,"focusMorph",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(Ia){var Va=this;Ia.attributeConnections.forEach(function(tb){tb.targetObj===Va&&tb.disconnect()})}},{key:"focusMorph",value:function(Ia){Ia.isMorph&&Ia.ownerChain().includes(this)||((Ia.isLabel||Ia.isText||Ia.isButton)&&this.richTextControl.focusOn(Ia,!1),Object.values(this.controls).forEach(function(Va){return Va&&Va.focusOn(Ia)}))}},
{key:"onHierarchyChange",value:function(){Object.values(this.controls).forEach(function(Ia){return Ia&&Ia.update()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylingSideBar"}},{key:"properties",get:function(){return{controls:{},richTextControl:{},isHaloItem:{get:function(){return!0}}}}}],uc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"StylingSideBar",version:"0.1.1-58"}}},{start:2470,end:5340})}(oc.Morph);Lb=oc.StylingSideBar;oc.default=Lb;var Bc=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js");Bc.Morph=Da;Bc.obj=Dd;Bc.string=ke;Bc.connect=ed;Bc.noUpdate=Kd;Bc.once=jd;Lb=function(qb){var uc=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js"),Hc=uc.hasOwnProperty("ShapeFormatStyler")&&"function"===typeof uc.ShapeFormatStyler?uc.ShapeFormatStyler:uc.ShapeFormatStyler=function(Ia){Ia&&
Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pd(Hc,qb,[{key:Symbol.for("lively-instance-initialize"),value:function(Ia){pd._get(Object.getPrototypeOf(Hc.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Ia);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var Ia=this.ui,Va={},tb=$jscomp.makeIterator(Object.entries(this.uiSpec)),Jb=tb.next();!Jb.done;Va={$jscomp$loop$prop$control$2271:Va.$jscomp$loop$prop$control$2271,
$jscomp$loop$prop$prop$2272:Va.$jscomp$loop$prop$prop$2272},Jb=tb.next()){var Ib=$jscomp.makeIterator(Jb.value);Jb=Ib.next().value;Ib=$jscomp.makeIterator(Ib.next().value);Ib.next();var ib=Ib.next().value;Va.$jscomp$loop$prop$prop$2272=Ib.next().value;Va.$jscomp$loop$prop$control$2271=Ia[Jb];Bc.connect(Va.$jscomp$loop$prop$control$2271,ib,this,"updateTarget",{updater:function(jb){return function(Fb,rc){jb.$jscomp$loop$prop$control$2271._updating=!0;Fb(jb.$jscomp$loop$prop$prop$2272,rc);jb.$jscomp$loop$prop$control$2271._updating=
!1}}(Va),varMapping:{prop:Va.$jscomp$loop$prop$prop$2272,control:Va.$jscomp$loop$prop$control$2271}})}}},{key:"update",value:function(){var Ia=this,Va=this.target,tb=Va.clipMode,Jb=Va.fill,Ib=Va.dropShadow,ib=Va.opacity,jb=Va.height,Fb=Va.width;Va=this.ui;var rc=Va.clipModeSelector,Ic=Va.fillPicker,ec=Va.opacityField,Pc=Va.shadowPicker,Q=Va.heightField,ha=Va.widthField;Bc.noUpdate(function(){Ia.updateControl(Pc,"shadowValue",Ib);Ia.updateControl(rc,"selection",tb);Ia.updateControl(Ic,"colorValue",
Jb);Ia.updateControl(ec,"number",ib);Ia.updateControl(Q,"number",jb);Ia.updateControl(ha,"number",Fb)})}},{key:"updateTarget",value:function(Ia,Va){this.target[Ia]=Va;this.update()}},{key:"updateControl",value:function(Ia,Va,tb){Ia._updating||Bc.obj.equals(Ia[Va],tb)||(Ia[Va]=tb)}},{key:"updateMultiValue",value:function(Ia,Va,tb){var Jb=this.ui,Ib=Jb[this.join(Ia)],ib=Ib.get("multi value indicator"),jb=Bc.obj.values(Va).some(function(Fb){return!Bc.obj.isFunction(Fb)&&!Bc.obj.equals(Fb,Va.valueOf())});
ib.left=0;Ib.visible=Ib.isLayoutable=!jb;if(jb&&ib.visible!=jb)Bc.once(ib,"onMouseDown",Ib,tb,{converter:function(){return Va.valueOf()},varMapping:{value:Va}});ib.visible=ib.isLayoutable=jb;ib.left=jb?200:0;this.updateControl(Ib,tb,Va.valueOf());Ib=$jscomp.makeIterator(["top","left","bottom","right"]);for(ib=Ib.next();!ib.done;ib=Ib.next())ib=ib.value,jb=Jb[this.join(Ia,ib)],this.updateControl(jb,tb,Va[ib])}},{key:"lower",value:function(Ia){return Ia.charAt(0).toLowerCase()+Ia.slice(1)}},{key:"join",
value:function(Ia,Va){return this.lower(Bc.string.camelCaseString(Ia+(Va?" "+Va:"")))}},{key:"unwrap",value:function(Ia,Va,tb){var Jb={};Jb=(Jb[this.lower(Bc.string.camelCaseString(Ia))]=[Ia,Va,tb],Jb);for(var Ib=$jscomp.makeIterator(["top","left","bottom","right"]),ib=Ib.next();!ib.done;ib=Ib.next()){ib=ib.value;var jb=Ia+" "+ib;Jb[this.lower(Bc.string.camelCaseString(jb))]=[jb,Va,this.join(tb,ib)]}return Jb}},{key:"focusOn",value:function(Ia){var Va=this,tb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jb){if(1==
Jb.nextAddress)return!Ia||Va.isAncestorOf(Ia)||Va.target===Ia||Bc.obj.isArray(Ia)||(Va.target=Ia),tb=Va.visible,Va.visible=!0,Jb.yield(Va.whenRendered(),2);if(3!=Jb.nextAddress)return Va.update(),Jb.yield(Va.whenRendered(),3);Va.getSubmorphsByStyleClassName("NumberWidget").map(function(Ib){return Ib.relayout()});Va.visible=tb;Jb.jumpToEnd()})}},{key:"onHoverIn",value:function(Ia){this.watchForTarget=!1}},{key:"onHoverOut",value:function(Ia){this.watchForTarget=!0}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ShapeFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{get:function(){return this._uiSpec||(this._uiSpec={clipModeSelector:["clip mode selector","selection","clipMode"],fillPicker:["fill picker","colorValue","fill"],shadowPicker:["shadow picker","shadowValue","dropShadow"],opacityField:["opacity field","number","opacity"],heightField:["height field","number","height"],widthField:["width field","number","width"]})}},ui:{readOnly:!0,get:function(){var Ia=this,Va=
this.uiSpec;return this._ui||(this._ui=Bc.obj.extract(Va,Bc.obj.keys(Va),function(tb,Jb){tb=$jscomp.makeIterator(Jb).next().value;return Ia.getSubmorphNamed(tb)}))}}}}}],uc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeFormatStyler",version:"0.1.1-144"}}},{start:176,end:4600})}(Bc.Morph);Lb=Bc.ShapeFormatStyler;Bc.default=
Lb;var Sc=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js");Sc.Morph=Da;Sc.ShadowPopover=Wb;Sc.connect=ed;Sc.signal=cb;Lb=function(qb){var uc=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js"),Hc=uc.hasOwnProperty("ShadowWidget")&&"function"===typeof uc.ShadowWidget?uc.ShadowWidget:uc.ShadowWidget=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pd(Hc,qb,[{key:"onHoverIn",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:1,
duration:200})}},{key:"onHoverOut",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(Ia){this.openPopover()}},{key:"update",value:function(Ia){var Va=this.submorphs[0];Va&&(Va.dropShadow=Ia)}},{key:"openPopover",value:function(){var Ia=this,Va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(tb){if(1==tb.nextAddress)return Va=new Sc.ShadowPopover({hasFixedPosition:!!Ia.ownerChain().find(function(Jb){return Jb.hasFixedPosition}),
shadowValue:Ia.shadowValue}),tb.yield(Va.fadeIntoWorld(Ia.globalBounds().center()),2);Sc.connect(Va,"shadowValue",Ia,"shadowValue");Sc.connect(Ia,"shadowValue",Ia,"update");Sc.signal(Ia,"openWidget",Va);tb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{set:function(Ia){this.setProperty("shadowValue",Ia);this.update(Ia)}}}}}],uc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShadowWidget",version:"0.1.1-7"}}},{start:194,end:1231})}(Sc.Morph);Lb=Sc.ShadowWidget;Sc.default=Lb;var Yc=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js");Yc.Morph=Da;Yc.obj=Dd;Yc.string=ke;Yc.connect=ed;Yc.noUpdate=Kd;Yc.once=jd;Lb=function(qb){var uc=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js"),Hc=uc.hasOwnProperty("BorderFormatStyler")&&"function"===typeof uc.BorderFormatStyler?
uc.BorderFormatStyler:uc.BorderFormatStyler=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pd(Hc,qb,[{key:"setupUI",value:function(){var Ia=this;this.getSubmorphsByStyleClassName("NumberWidget").map(function(Va){var tb=Yc.string.camelCaseString(Va.name);tb=tb[0].toLowerCase()+tb.slice(1);Ia.ui[tb]=Va})}},{key:"cleanupAnchors",value:function(){var Ia=this.withAllSubmorphsSelect(function(Jb){return Jb.anchors&&
Jb.anchors.filter(function(Ib){return!Ib.id})}),Va={};Ia=$jscomp.makeIterator(Ia);for(var tb=Ia.next();!tb.done;Va={$jscomp$loop$prop$m$2274:Va.$jscomp$loop$prop$m$2274},tb=Ia.next())Va.$jscomp$loop$prop$m$2274=tb.value,Va.$jscomp$loop$prop$m$2274.anchors.forEach(function(Jb){return function(Ib){return!Ib.id&&Jb.$jscomp$loop$prop$m$2274.removeAnchor(Ib)}}(Va))}},{key:Symbol.for("lively-instance-initialize"),value:function(Ia){pd._get(Object.getPrototypeOf(Hc.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,Ia);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var Ia=this.ui,Va={},tb=$jscomp.makeIterator(Object.entries(this.uiSpec)),Jb=tb.next();!Jb.done;Va={$jscomp$loop$prop$control$2276:Va.$jscomp$loop$prop$control$2276,$jscomp$loop$prop$prop$2277:Va.$jscomp$loop$prop$prop$2277},Jb=tb.next()){var Ib=$jscomp.makeIterator(Jb.value);Jb=Ib.next().value;Ib=$jscomp.makeIterator(Ib.next().value);Ib.next();var ib=Ib.next().value;Va.$jscomp$loop$prop$prop$2277=
Ib.next().value;Va.$jscomp$loop$prop$control$2276=Ia[Jb];Yc.connect(Va.$jscomp$loop$prop$control$2276,ib,this,"updateTarget",{updater:function(jb){return function(Fb,rc){jb.$jscomp$loop$prop$control$2276._updating=!0;Fb(jb.$jscomp$loop$prop$prop$2277,rc);jb.$jscomp$loop$prop$control$2276._updating=!1}}(Va),varMapping:{prop:Va.$jscomp$loop$prop$prop$2277,control:Va.$jscomp$loop$prop$control$2276}})}}},{key:"update",value:function(){var Ia=this,Va=this.target,tb=Va.borderStyle,Jb=Va.borderColor,Ib=
Va.borderRadius,ib=Va.borderWidth;Yc.noUpdate(function(){Ia.updateMultiValue("border style selector",tb,"selection");Ia.updateMultiValue("border color picker",Jb,"colorValue");Ia.updateMultiValue("border radius field",Ib,"number");Ia.updateMultiValue("border width field",ib,"number")})}},{key:"updateTarget",value:function(Ia,Va){this.target[Ia]=Va;this.update()}},{key:"updateControl",value:function(Ia,Va,tb){Ia._updating||Yc.obj.equals(Ia[Va],tb)||(Ia[Va]=tb)}},{key:"updateMultiValue",value:function(Ia,
Va,tb){var Jb=this.ui,Ib=Jb[this.join(Ia)],ib=Ib.get("multi value indicator"),jb=Yc.obj.values(Va).some(function(Fb){return!Yc.obj.isFunction(Fb)&&!Yc.obj.equals(Fb,Va.valueOf())});Ib.visible=Ib.isLayoutable=!jb;if(jb&&ib.visible!=jb)Yc.once(ib,"onMouseDown",Ib,tb,{converter:function(){return Va.valueOf()},varMapping:{value:Va}});ib.visible=ib.isLayoutable=jb;this.updateControl(Ib,tb,Va.valueOf());Ib=$jscomp.makeIterator(["top","left","bottom","right"]);for(ib=Ib.next();!ib.done;ib=Ib.next())ib=ib.value,
jb=Jb[this.join(Ia,ib)],this.updateControl(jb,tb,Va[ib])}},{key:"lower",value:function(Ia){return Ia.charAt(0).toLowerCase()+Ia.slice(1)}},{key:"join",value:function(Ia,Va){return this.lower(Yc.string.camelCaseString(Ia+(Va?" "+Va:"")))}},{key:"unwrap",value:function(Ia,Va,tb){var Jb={};Jb=(Jb[this.lower(Yc.string.camelCaseString(Ia))]=[Ia,Va,tb],Jb);for(var Ib=$jscomp.makeIterator(["top","left","bottom","right"]),ib=Ib.next();!ib.done;ib=Ib.next()){ib=ib.value;var jb=Ia+" "+ib;Jb[this.lower(Yc.string.camelCaseString(jb))]=
[jb,Va,this.join(tb,ib)]}return Jb}},{key:"attachToWorld",value:function(){Yc.connect($world,"showHaloFor",this,"focusOn",{garbageCollect:!0})}},{key:"focusOn",value:function(Ia){var Va=this,tb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jb){if(1==Jb.nextAddress)return!Ia||Va.isAncestorOf(Ia)||Va.target===Ia||Yc.obj.isArray(Ia)||(Va.target=Ia),tb=Va.visible,Va.visible=!0,Jb.yield(Va.whenRendered(),2);if(3!=Jb.nextAddress)return Va.update(),Jb.yield(Va.whenRendered(),3);Va.getSubmorphsByStyleClassName("NumberWidget").map(function(Ib){return Ib.relayout()});
Va.visible=tb;Jb.jumpToEnd()})}},{key:"onHoverIn",value:function(Ia){this.watchForTarget=!1}},{key:"onHoverOut",value:function(Ia){this.watchForTarget=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BorderFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{derived:!0,serialize:!1,get:function(){return this._uiSpec||(this._uiSpec=Object.assign({},this.unwrap("border style selector","selection","borderStyle"),{},this.unwrap("border color picker","colorValue","borderColor"),
{},this.unwrap("border radius field","number","borderRadius"),{},this.unwrap("border width field","number","borderWidth")))}},ui:{initialize:function(){this.setupUI()}}}}}],uc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"BorderFormatStyler",version:"0.1.1-16"}}},{start:185,end:5003})}(Yc.Morph);Lb=Yc.BorderFormatStyler;Yc.default=
Lb;var Xb=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js");Xb.Morph=Da;Xb.resource=Ab;Xb.arr=Yb;Xb.obj=Dd;Xb.string=ke;Xb.Path=gc;Xb.connect=ed;Xb.getMastersMenu=dd;Xb.resolvedMasters=Zd;Lb=function(qb){var uc=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js"),Hc=uc.hasOwnProperty("MasterComponentControl")&&"function"===typeof uc.MasterComponentControl?uc.MasterComponentControl:uc.MasterComponentControl=function(Ia){Ia&&Ia[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pd(Hc,qb,[{key:"focusOn",value:function(Ia){this.target=Ia;this.update()}},{key:"onMouseUp",value:function(Ia){var Va=this,tb,Jb,Ib,ib,jb,Fb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rc){if(1==rc.nextAddress){"auto master selection"==Ia.targetMorph.name&&(tb="auto");"hover master selection"==Ia.targetMorph.name&&(tb="hover");"click master selection"==Ia.targetMorph.name&&(tb="click");Va.refreshButtons();
if(!Va.target)return rc.return();Jb=$jscomp.makeIterator(["auto","hover","click"]);for(Ib=Jb.next();!Ib.done;Ib=Jb.next())ib=Ib.value,Va.target.master&&Va.target.master[ib]&&!Va.get(ib+" master checkbox").checked&&Va.adjustMasterComponent(ib,null);if(!tb)return rc.jumpTo(0);jb=Va;Fb=jb.openMenu;return rc.yield(Va.getMastersMenu(tb),3)}Fb.call(jb,rc.yieldResult,Ia);rc.jumpToEnd()})}},{key:"getMastersMenu",value:function(Ia){var Va=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(tb){return 1==
tb.nextAddress?tb.yield(Promise.all([].concat($jscomp.arrayFromIterable(Object.keys(Xb.resolvedMasters)),[Va.world().name]).map(function(Jb){var Ib,ib,jb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fb){return 1==Fb.nextAddress?(Ib=Jb,ib=Va,jb=ib.componentsToMenu,Fb.yield(Xb.resource("styleguide://"+Jb+"/").dirList(),2)):Fb.return([Ib,jb.call(ib,Fb.yieldResult,Ia)])})})),2):tb.return(tb.yieldResult)})}},{key:"componentsToMenu",value:function(Ia,Va,tb,Jb){var Ib=this;tb=void 0===tb?
null:tb;Jb=void 0===Jb?1:Jb;tb||(tb=Ia.map(function(jb){return{name:Xb.arr.last(jb.name.split("/")),path:jb.name.split("/"),value:jb}}));if(0==tb.length||100<Jb)return[];var ib=this;return Xb.arr.flatten(Object.entries(Xb.arr.groupBy(tb,function(jb){return jb.path[Jb-1]})).map(function(jb){var Fb=$jscomp.makeIterator(jb);jb=Fb.next().value;Fb=Fb.next().value;var rc=$jscomp.makeIterator(Xb.arr.partition(Fb,function(Ic){return Ic.path.length<=Jb}));Fb=rc.next().value;rc=rc.next().value;jb=[jb,Ib.componentsToMenu(null,
Va,rc,Jb+1)];return[].concat($jscomp.arrayFromIterable(Fb.map(function(Ic){return[Ic.name,function(){ib.adjustMasterComponent(Va,Ic.value)}]})),$jscomp.arrayFromIterable(jb[1].length?[jb]:[]))}),1)}},{key:"getComponentSelectionMenu",value:function(Ia){var Va=this,tb,Jb,Ib,ib,jb,Fb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rc){if(1==rc.nextAddress)return tb=Va.world().metadata.commit.name,Jb=Xb.resource("styleguide://"+tb+"/"),rc.yield(Jb.dirList(),2);if(3!=rc.nextAddress)return Ib=
rc.yieldResult,rc.yield(Xb.resource("styleguide://System/").dirList(),3);ib=rc.yieldResult;jb=Va.componentsToMenu(Ib,Ia);Fb=Va.componentsToMenu(ib,Ia);return rc.return([].concat($jscomp.arrayFromIterable(0<jb.length?[].concat($jscomp.arrayFromIterable(jb),[{isDivider:!0}]):[]),$jscomp.arrayFromIterable(Fb)))})}},{key:"adjustMasterComponent",value:function(Ia,Va){if(this.target.master)this.target.master[Ia]=Va;else if(Va){var tb={};this.target.master=(tb[Ia]=Va,tb)}Ia=this.target.master;Va=Ia.hover;
tb=Ia.click;Ia.auto||Va||tb||(this.target.master=null);this.update();this.target.withAllSubmorphsDo(function(Jb){return delete Jb._parametrizedProps});this.target.requestMasterStyling()}},{key:"componentsToMenu",value:function(Ia,Va,tb,Jb){var Ib=this;tb=void 0===tb?null:tb;Jb=void 0===Jb?1:Jb;tb||(tb=Ia.map(function(jb){return{name:Xb.arr.last(jb.name.split("/")),path:jb.name.split("/"),value:jb}}));if(0==tb.length||100<Jb)return[];var ib=this;return Xb.arr.flatten(Object.entries(Xb.arr.groupBy(tb,
function(jb){return jb.path[Jb-1]})).map(function(jb){var Fb=$jscomp.makeIterator(jb);jb=Fb.next().value;Fb=Fb.next().value;var rc=$jscomp.makeIterator(Xb.arr.partition(Fb,function(Ic){return Ic.path.length<=Jb}));Fb=rc.next().value;rc=rc.next().value;jb=[jb,Ib.componentsToMenu(null,Va,rc,Jb+1)];return[].concat($jscomp.arrayFromIterable(Fb.map(function(Ic){return[Ic.name,function(){ib.adjustMasterComponent(Va,Ic.value)}]})),$jscomp.arrayFromIterable(jb[1].length?[jb]:[]))}),1)}},{key:"update",value:function(){if(this.target){for(var Ia=
$jscomp.makeIterator(["auto","hover","click"]),Va=Ia.next();!Va.done;Va=Ia.next()){Va=Va.value;var tb=this.getSubmorphNamed(Va+" master selection"),Jb=this.getSubmorphNamed(Va+" master checkbox");Xb.Path(["master",Va]).get(this.target)?Jb.checked=!0:Jb.checked=!1;tb.label=Xb.string.truncateLeft(Xb.Path(["master",Va,"name"]).get(this.target)||"select master",15,"...")}this.refreshButtons()}}},{key:"refreshButtons",value:function(){for(var Ia=$jscomp.makeIterator(["auto","hover","click"]),Va=Ia.next();!Va.done;Va=
Ia.next()){Va=Va.value;var tb=this.getSubmorphNamed(Va+" master selection"),Jb=this.getSubmorphNamed(Va+" master checkbox");tb=tb.deactivated=!Jb.checked;this.getSubmorphNamed(Va+" master selection").opacity=tb?.5:1}Ia=this.getSubmorphNamed("overridden props list");Ia.items=this.getOverriddenProps();this.getSubmorphNamed("clear overridden prop button").deactivated=!Ia.selection}},{key:"getMasterForTarget",value:function(){if(this.target.isMorph)return[this.target].concat($jscomp.arrayFromIterable(this.target.ownerChain())).map(function(Ia){return Ia.master}).find(Boolean)}},
{key:"clearSelectedProperty",value:function(){var Ia=this.getSubmorphNamed("overridden props list").selection;this.getMasterForTarget().clearOverriddenPropertiesFor(this.target,[Ia]);this.refreshButtons()}},{key:"getOverriddenProps",value:function(){var Ia=this.getMasterForTarget();return Ia&&Ia._overriddenProps?(Ia=Ia._overriddenProps.get(this.target))?Object.keys(Ia):[]:[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MasterComponentControl"}}],uc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MasterComponentControl",version:"0.1.1-108"}}},{start:315,end:6096})}(Xb.Morph);Lb=Xb.MasterComponentControl;Xb.default=Lb}}});
