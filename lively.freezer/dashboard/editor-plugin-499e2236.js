System.register(["./__root_module__-5a58cfed.js","kld-intersections","./editor-plugin-cfb50052.js","./index-ce89c89c.js","./index-dcbaecb9.js"],function(Ca){var Cb,Vb,lc,gc,fe,fd,Zd,id,Uc,Ad,Nd,ee,Ud,kd,cb,Fb,vc,pc,sd,pd,tc,bd,Xb,Tb;return{setters:[function(Oc){Cb=Oc.aq;Vb=Oc.bz;lc=Oc.bA;gc=Oc.bB;fe=Oc.E;fd=Oc.ao;Zd=Oc.aV;id=Oc.s;Uc=Oc.a9;Ad=Oc.bm;Nd=Oc.a4;ee=Oc._;Ud=Oc.bC;kd=Oc.bt},function(){},function(Oc){cb=Oc.p;Fb=Oc.d;vc=Oc.a;pc=Oc.r;sd=Oc.C},function(Oc){pd=Oc.s},function(Oc){tc=Oc.localInterface;
bd=Oc.systemInterfaceNamed;Xb=Oc.serverInterfaceFor;Tb=Oc.l2lInterfaceFor}],execute:function(){var Oc=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js");Oc.warnStyle={"border-bottom":"2px dotted orange"};Oc.errorStyle={"background-color":"red"};var td=function(mc){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js"),Xc=Pc.hasOwnProperty("JavaScriptChecker")&&"function"===typeof Pc.JavaScriptChecker?Pc.JavaScriptChecker:Pc.JavaScriptChecker=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(Xc,mc,[{key:"uninstall",value:function(Q){var fa=Q.text||Q;(fa.markers||[]).forEach(function(Ia){return Ia.id.startsWith("js-checker-")&&fa.removeMarker(Ia)});fa.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(Q,fa){return[].concat($jscomp.arrayFromIterable(Q.embeddedMorphMap.values())).find(function(Ia){return fa.containsPosition(Ia.anchor.position)})}},{key:"onDocumentChange",value:function(Q,
fa,Ia){var Qa=fa.document;try{var ec=Ia.parse()}catch(Nb){ec=Nb}ec&&(Q=(fa.markers||[]).filter(function(Nb){return Nb.id.startsWith("js-checker-")}),Ia=Ia.undeclaredVariables().map(function(Nb,Za){var jc=Nb.start;Nb=Nb.end;jc=Qa.indexToPosition(jc);Nb=Qa.indexToPosition(Nb);return fa.addMarker({id:"js-checker-"+Za,style:Oc.warnStyle,range:{start:jc,end:Nb},type:"js-undeclared-var"})}),Q.slice(Ia.length).forEach(function(Nb){return fa.removeMarker(Nb)}),ec.parseError?(Q=ec.parseError.loc,Ia=Q.column,
Q=Q.line-1,ec=Qa.indexToPosition(ec.parseError.pos),Ia=ec.column,Q=ec.row,ec={start:{column:Ia-1,row:Q},end:{column:Ia+1,row:Q}},this.hasEmbeddedMorphInRange(fa,ec)||fa.addMarker({id:"js-syntax-error",range:ec,style:Oc.errorStyle,type:"js-syntax-error"})):fa.removeMarker("js-syntax-error"))}}],[{key:"className",get:function(){return"JavaScriptChecker"}}],Pc,{pathInPackage:function(){return"js/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:118,end:1882})}(void 0),Ob=td=Oc.JavaScriptChecker;Oc.default=td;var sb=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js");sb.query=Vb;sb.fuzzyParse=lc;sb.acorn=gc;sb.custom=fe;var hb=function(mc){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js"),Xc=Pc.hasOwnProperty("JavaScriptNavigator")&&"function"===typeof Pc.JavaScriptNavigator?Pc.JavaScriptNavigator:Pc.JavaScriptNavigator=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(Xc,mc,[{key:"ensureAST",value:function(Q){return this.parse(Q.textString)}},{key:"parse",value:function(Q){return sb.fuzzyParse(Q)}},{key:"move",value:function(Q,fa){var Ia=!!fa.activeMark||!fa.selection.isEmpty(),Qa=fa.selection,ec=fa.positionToIndex(Qa.lead);Q=this[Q](fa.textString,ec);Q=fa.indexToPosition(Q);Qa.lead=Q;Ia||(Qa.anchor=Q);fa.scrollCursorIntoView()}},{key:"forwardSexp",value:function(Q){this.move("_forwardSexp",
Q)}},{key:"backwardSexp",value:function(Q){this.move("_backwardSexp",Q)}},{key:"backwardUpSexp",value:function(Q){this.move("_backwardUpSexp",Q)}},{key:"forwardDownSexp",value:function(Q){this.move("_forwardDownSexp",Q)}},{key:"_forwardSexp",value:function(Q,fa){Q=this.parse(Q);Q=sb.custom.findNodesIncluding(Q,fa).reverse().find(function(Qa){return Qa.end!==fa});if(!Q)return fa;if("BlockStatement"===Q.type){var Ia=Q.body.find(function(Qa){return Qa.start>fa});if(Ia)return Ia.start}return Q.end}},
{key:"_backwardSexp",value:function(Q,fa){Q=this.parse(Q);Q=sb.custom.findNodesIncluding(Q,fa).reverse().find(function(Qa){return Qa.start!==fa});if(!Q)return fa;if("BlockStatement"===Q.type){var Ia=Q.body.slice().reverse().find(function(Qa){return Qa.end<fa});if(Ia)return Ia.end}return Q?Q.start:fa}},{key:"_backwardUpSexp",value:function(Q,fa){Q=this.parse(Q);return(Q=sb.custom.findNodesIncluding(Q,fa).reverse().find(function(Ia){return Ia.start!==fa}))?Q.start:fa}},{key:"_forwardDownSexp",value:function(Q,
fa){Q=this.parse(Q);return(Q=sb.custom.findNodeAfter(Q,fa,function(Ia,Qa){return Qa.start>fa}))?Q.node.start:fa}},{key:"markDefun",value:function(Q){var fa=this.rangeForFunctionOrDefinition(Q.textString,[Q.positionToIndex(Q.selection.range.start),Q.positionToIndex(Q.selection.range.end)]);fa&&Q.execCommand("expandRegion",{start:fa[0],end:fa[1]})}},{key:"rangeForNodesMatching",value:function(Q,fa,Ia){Q=this.parse(Q);return(fa=sb.custom.findNodesIncluding(Q,fa).reverse().find(Ia))?[fa.start,fa.end]:
null}},{key:"rangeForFunctionOrDefinition",value:function(Q,fa){var Ia=fa[0]===fa[1];return this.rangeForNodesMatching(Q,fa[1],function(Qa){return["AssignmentExpression","FunctionDeclaration","FunctionExpression","MethodDefinition"].includes(Qa.type)&&(Ia&&Qa.end!==fa[1]||!Ia&&Qa.start<fa[0])?!0:!1})}},{key:"resolveIdentifierAt",value:function(Q,fa){"number"!==typeof fa&&(fa=Q.positionToIndex(fa));Q=this.ensureAST(Q);var Ia=sb.query.nodesAt(fa,Q).reverse(),Qa=Ia.find(function(Nb){return"Identifier"===
Nb.type});if(!Qa&&((Ia=Ia[0])&&Ia.type.includes("Specifier")&&Ia.local&&"Identifier"===Ia.local.type&&(Qa=Ia.local),!Qa))return;fa=(Ia=sb.query.findDeclarationClosestToIndex(Q,Qa.name,fa))?sb.query.scopeAtIndex(Q,Ia.start):sb.query.scopeAtIndex(Q,fa);var ec=sb.query.findReferencesAndDeclsInScope(fa,Qa.name).refs;return{parsed:Q,scope:fa,id:Qa,name:Qa.name,decl:Ia,refs:ec}}},{key:"expandRegion",value:function(Q,fa,Ia,Qa){function ec(ld){ld=Q.positionToIndex({column:0,row:Za.row});return{range:[ld+
jc.start,ld+jc.start+jc.value.length],prev:Qa}}var Nb=Qa.range[0]!==Qa.range[1],Za=Q.indexToPosition(Qa.range[0]),jc=Q.tokenAt(Za);if(!Nb&&jc&&["keyword","identifier"].includes(jc.type))return ec();Ia=Ia||this.parse(fa);fa=sb.query.nodesAtIndex(Ia,Qa.range[0]).reverse().find(function(ld){return ld.start<Qa.range[0]||ld.end>Qa.range[1]});if(!fa)return Qa;Ia=fa.start;Nb=fa.end;return"Literal"===fa.type&&(fa.raw||"").match(/^['"`]/)&&Qa.range[0]!==fa.start&&Qa.range[1]!==fa.end&&(fa.start+1<Qa.range[0]||
fa.end-1>Qa.range[1])?{range:[Ia+1,Nb-1],prev:Qa}:{range:[Ia,Nb],prev:Qa}}},{key:"contractRegion",value:function(Q,fa,Ia,Qa){return Qa.prev||Qa}}],[{key:"className",get:function(){return"JavaScriptNavigator"}}],Pc,{pathInPackage:function(){return"js/navigator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:121,end:6658})}(void 0);
td=hb=sb.JavaScriptNavigator;sb.default=hb;var qb=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js");qb.addIndexToTextPos=function(mc,Pc,Xc){return mc.indexToPosition(mc.positionToIndex(Pc)+Xc)};qb.connect=fd;qb.disconnect=Zd;qb.string=id;qb.KeyHandler=Uc;qb.Range=Ad;hb=function(mc){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js"),Xc=Pc.hasOwnProperty("Snippet")&&"function"===typeof Pc.Snippet?Pc.Snippet:Pc.Snippet=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(Xc,mc,[{key:Symbol.for("lively-instance-initialize"),value:function(Q){Q=void 0===Q?{trigger:null,expansion:""}:Q;var fa=Q.expansion;this.trigger=Q.trigger;this.expansion=fa;this.resetExpansionState()}},{key:"isTextSnippet",get:function(){return!0}},{key:"attach",value:function(Q){this.isExpanding&&(this.textMorph=Q,qb.connect(this.textMorph,"selectionChange",this,"onCursorMove"))}},{key:"detach",value:function(Q){this.isExpanding&&
(qb.disconnect(Q,"selectionChange",this,"onCursorMove"),this.textMorph=null)}},{key:"onCursorMove",value:function(){var Q=this.expansionState,fa=Q.startAnchor,Ia=Q.endAnchor;Q.isExpanding?qb.Range.fromPositions(fa.position,Ia.position).containsPosition(this.textMorph.cursorPosition)||this.resetExpansionState():this.resetExpansionState()}},{key:"resetExpansionState",value:function(){var Q=this.textMorph;if(Q){var fa=this.expansionState||{},Ia=fa.marker,Qa=fa.startAnchor,ec=fa.endAnchor;fa=fa.steps;
Qa&&Q.removeAnchor(Qa);ec&&Q.removeAnchor(ec);Ia&&Q.removeMarker(Ia);fa.forEach(function(Nb){return Q.removeAnchor(Nb.anchor)})}this.expansionState={stepIndex:-1,steps:[],isExpanding:!1,startMarker:null,endMarker:null};Q&&Q.removePlugin(this)}},{key:"isExpanding",get:function(){return this.expansionState.isExpanding}},{key:"createExpansionSteps",value:function(Q){var fa=[],Ia=0;qb.string.reMatches(Q,/\$[0-9]+|\$\{[0-9]+:[^\}]*\}/g).forEach(function(Qa){var ec=Qa.start,Nb=Qa.end;Qa=Qa.match;var Za=
"";Qa.startsWith("${")?(Za=$jscomp.makeIterator(Qa.match(/^\$\{([0-9]+):([^\}]*)\}/)),Za.next(),Qa=Za.next().value,Za=Za.next().value,Qa=Number(Qa)):Qa=Number(Qa.replace(/^\$/,""));Q=Q.slice(0,ec-Ia)+Za+Q.slice(Nb-Ia);fa[Qa]={index:ec-Ia,prefill:Za,anchor:null};Ia+=Nb-ec-Za.length});return{steps:fa,expansion:Q}}},{key:"expandAtCursor",value:function(Q){var fa=Q.selection,Ia=Q.cursorPosition.column,Qa=this.expansion;this.trigger&&(Ia-=this.trigger.length);if(Ia=Math.max(0,Ia))Qa=qb.string.lines(Qa),
Qa=[Qa[0]].concat($jscomp.arrayFromIterable(Qa.slice(1).map(function(xd){return qb.string.indent(xd," ",Ia)}))),Qa=Qa.join("\n");var ec=this.createExpansionSteps(Qa);Qa=ec.expansion;ec=ec.steps;this.trigger&&fa.growLeft(this.trigger.length);fa.text=Qa;var Nb=fa.start;Qa=fa.end;fa.collapseToEnd();if(ec.length){var Za=qb.string.newUUID();ec.forEach(function(xd,Yc){return xd.anchor=Q.addAnchor(Object.assign({id:"snippet-step-"+Yc+"-"+Za},qb.addIndexToTextPos(Q,Nb,xd.index)))});var jc=Q.addAnchor(Object.assign({id:"snippet-start-"+
Za},Nb,{insertBehavior:"stay"})),ld=Q.addAnchor(Object.assign({id:"snippet-end-"+Za},Qa));this.expansionState={marker:Q.addMarker({id:"snippet-marker-"+Za,get range(){return{start:jc.position,end:ld.position}},style:{"border-radius":"4px","background-color":"rgba(30, 200, 140, 0.3)","box-shadow":"0 0 4px rgba(30, 200, 140, 0.3)","pointer-events":"none",content:"fooooo"}}),startAnchor:jc,endAnchor:ld,stepIndex:0,steps:ec,isExpanding:!0};Q.addPlugin(this);this.nextStep()}}},{key:"nextStep",value:function(){var Q=
this.expansionState,fa=Q.steps,Ia=this.textMorph;if(Q.isExpanding&&Ia){Ia=Ia.selection;Q=fa[Q.stepIndex];var Qa=Q.prefill;Ia.lead=Ia.anchor=Q.anchor.position;Ia.growRight(Qa.length);this.expansionState.stepIndex++;this.expansionState.stepIndex>=fa.length&&(this.resetExpansionState(),console.log("[snippet] expansion of "+this.expansion+" done"))}}},{key:"canExpand",value:function(Q,fa){fa=Q.positionToIndex(Q.cursorPosition);return Q.textString.slice(fa-this.trigger.length,fa)===this.trigger}},{key:"tryTrigger",
value:function(Q,fa){if(!this.canExpand(Q,Q.cursorPosition))return!1;this.expandAtCursor(Q);return!0}},{key:"getCommands",value:function(Q){var fa=this;return Q.concat([{name:"[snippet] next expansion step",exec:function(Ia){fa.nextStep();return!0}},{name:"[snippet] cancel expansion",exec:function(Ia){fa.resetExpansionState();return!0}}])}},{key:"getKeyHandlers",value:function(Q){return Q.concat(qb.KeyHandler.withBindings([{keys:"Tab",command:"[snippet] next expansion step"},{keys:"Escape",command:"[snippet] cancel expansion"}]))}}],
[{key:"className",get:function(){return"Snippet"}}],Pc,{pathInPackage:function(){return"text/snippets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:356,end:5934})}(void 0);qb.Snippet=hb;qb.Snippet=hb;qb.Snippet=hb;var Aa=[{name:"get snippets",exec:function(mc){return mc.pluginCollect("getSnippets",[])}}];qb.snippetCommands=Aa;qb.snippetCommands=
Aa;qb.snippetCommands=Aa;var bb=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js");bb.buildEvalOpts=function(mc,Pc){return mc.plugins.find(function(Xc){return Xc.isJSEditorPlugin}).sanatizedJsEnv(Pc)};bb.Snippet=hb;Aa=function(mc){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Xc=Pc.hasOwnProperty("ModuleTopLevelVarCompleter")&&"function"===typeof Pc.ModuleTopLevelVarCompleter?Pc.ModuleTopLevelVarCompleter:Pc.ModuleTopLevelVarCompleter=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(Xc,mc,[{key:"compute",value:function(Q,fa){var Ia,Qa,ec,Nb,Za,jc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ld){if(1==ld.nextAddress){Qa=(Ia=Q.pluginFind(function(xd){return xd.isJSEditorPlugin}))&&Ia.systemInterface();if(!Qa)return ld.return([]);ec=bb.buildEvalOpts(Q);Nb=ec.targetModule;return"local"===Qa.name?(Za=Object.getOwnPropertyNames(Qa.getModule(Nb).recorder),ld.jumpTo(2)):ld.yield(Qa.runEval('\n        var result, livelySystem = typeof System !== "undefined"\n                      && System.get(System.decanonicalize("lively-system-interface"));\n        if (livelySystem) {\n          result = JSON.stringify(\n            Object.getOwnPropertyNames(livelySystem.localInterface.getModule("'+
Nb+'").recorder));\n        } else {\n          var G = typeof window !== "undefined" ?\n            window : typeof global !== "undefined" ? global : this;\n          result = JSON.stringify(Object.getOwnPropertyNames(G));\n        }\n        result;\n      ',{targetModule:"lively://module-recorder-completer"}),3)}if(2!=ld.nextAddress){jc=ld.yieldResult;if(jc.isError)return ld.return([]);Za=JSON.parse(jc.value)}Za=Za.filter(function(xd){return!xd.startsWith("defVar_")&&!["System","__currentLivelyModule",
"initializeES6ClassForLively","_moduleExport","_moduleImport"].includes(xd)});return ld.return(Za.map(function(xd){return{priority:1100,completion:xd}}))})}}],[{key:"className",get:function(){return"ModuleTopLevelVarCompleter"}}],Pc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:222,
end:1678})}(void 0);bb.ModuleTopLevelVarCompleter=Aa;bb.ModuleTopLevelVarCompleter=Aa;bb.ModuleTopLevelVarCompleter=Aa;Aa=function(mc){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Xc=Pc.hasOwnProperty("DynamicJavaScriptCompleter")&&"function"===typeof Pc.DynamicJavaScriptCompleter?Pc.DynamicJavaScriptCompleter:Pc.DynamicJavaScriptCompleter=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(Xc,
mc,[{key:"isValidPrefix",value:function(Q){return/\.[a-z0-9_]*$/i.test(Q)}},{key:"isMethodCallCompletion",value:function(Q){return Q.endsWith(")")&&0<Q.indexOf("(")}},{key:"isValidIdentifier",value:function(Q){if("string"!==typeof Q)return!1;this.isMethodCallCompletion(Q)&&(Q=Q.slice(0,Q.indexOf("(")));return/^[a-z_\$][0-9a-z_\$]*$/i.test(Q)?!0:!1}},{key:"wrapInBrackets",value:function(Q){if(!isNaN(Number(Q))||Q.startsWith("Symbol."))return"["+Q+"]";var fa="";this.isMethodCallCompletion(Q)&&(fa=Q.slice(Q.indexOf("(")),
Q=Q.slice(0,Q.indexOf("(")));return'["'+Q.replace(/"/g,'\\"')+'"]'+fa}},{key:"compute",value:function(Q){var fa=this,Ia,Qa,ec,Nb,Za,jc,ld,xd,Yc,Ua,Mc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){if(1==pb.nextAddress){Ia=Q.selection;Ia.isEmpty()?(Qa=Q.getLine(Ia.lead.row),Qa=Qa.slice(Qa.lastIndexOf(":")+1,Ia.lead.column)):Qa=Ia.text.slice(Math.max(0,Ia.text.indexOf(":")),0);if(!fa.isValidPrefix(Qa))return pb.return([]);Nb=(ec=Q.pluginFind(function(fb){return fb.isJSEditorPlugin}))&&
ec.systemInterface();if(!Nb)return pb.return([]);Za=bb.buildEvalOpts(Q);return pb.yield(Nb.dynamicCompletionsForPrefix(Za.targetModule,Qa,Za),2)}jc=pb.yieldResult;ld=jc.isError;xd=jc.value;Yc=jc.completions;Ua=jc.prefix;if(ld)return console.warn("javascript completer encountered error: "+(xd.stack||xd)),pb.return([]);Yc.reduce(function(fb,eb){eb=$jscomp.makeIterator(eb);eb.next();eb=eb.next().value;return fb+eb.length},0);Mc=Yc.reduce(function(fb,eb,bc){eb=$jscomp.makeIterator(eb);var ac=eb.next().value;
eb=eb.next().value;return fb.concat(eb.map(function(Ed){var we=fa.isValidIdentifier(Ed);return{info:ac,completion:Ed,prefix:we?Ua:"."+Ua,customInsertionFn:we?fa.isMethodCallCompletion(Ed)?function(Je,Lf,ud,Fe){Lf=Fe.start;Fe=Fe.end;Je=Je.replace(/\((.*)\)/,function(Pd){return"("+Pd.slice(1,-1).split(", ").map(function(Sb,oa){return"${"+oa+":"+Sb+"}"}).join(", ")+")"});Je=new bb.Snippet({expansion:Je});ud.replace({start:Lf,end:Fe},"");Je.expandAtCursor(ud)}:null:function(Je,Lf,ud,Fe){Je=Fe.start;Fe=
Fe.end;Lf={row:Je.row,column:Je.column-1};Fe="."===ud.textInRange({start:Lf,end:Je})?{start:Lf,end:Fe}:{start:Je,end:Fe};ud.replace(Fe,fa.wrapInBrackets(Ed))}}}))},[]);Mc.forEach(function(fb,eb){return Object.assign(fb,{priority:2E3+Mc.length-eb})});return pb.return(Mc)})}}],[{key:"className",get:function(){return"DynamicJavaScriptCompleter"}}],Pc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1687,end:5122})}(void 0);bb.DynamicJavaScriptCompleter=Aa;bb.DynamicJavaScriptCompleter=Aa;bb.DynamicJavaScriptCompleter=Aa;bb.keywords="arguments boolean break case catch class const continue debugger default delete eval export import extends false true finally instanceof static super this throw typeof while with yield await Array Date eval function hasOwnProperty Infinity isFinite isNaN isPrototypeOf length Math NaN name Number Object prototype String toString undefined valueOf alert assign clearInterval clearTimeout decodeURI decodeURIComponent document encodeURI encodeURIComponent escape navigator parseFloat parseInt setInterval setTimeout window document requestAnimationFrame cancelAnimationFrame".split(" ");
Aa=function(mc){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Xc=Pc.hasOwnProperty("JavaScriptKeywordCompleter")&&"function"===typeof Pc.JavaScriptKeywordCompleter?Pc.JavaScriptKeywordCompleter:Pc.JavaScriptKeywordCompleter=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(Xc,mc,[{key:"compute",value:function(Q,fa){return bb.keywords.map(function(Ia){return{completion:Ia,priority:0}})}}],
[{key:"className",get:function(){return"JavaScriptKeywordCompleter"}}],Pc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6125,end:6262})}(void 0);bb.JavaScriptKeywordCompleter=Aa;bb.JavaScriptKeywordCompleter=Aa;bb.JavaScriptKeywordCompleter=Aa;Aa=[new bb.DynamicJavaScriptCompleter,new bb.JavaScriptKeywordCompleter,
new bb.ModuleTopLevelVarCompleter];bb.completers=Aa;bb.completers=Aa;bb.completers=Aa;var wb=lively.FreezerRuntime.recorderFor("lively.ide/js/snippets.js");wb.Snippet=hb;var Hb=[["typef",'typeof ${0:object} === "function"$1'],["types",'typeof ${0:object} === "string"$1'],["typen",'typeof ${0:object} === "number"$1'],["typeu",'typeof ${0:object} === "undefined"$1'],["typenu",'typeof ${0:object} !== "undefined"$1'],["import",'import { ${0:name} } from "${1:module}";'],["importd",'import ${0:name} from "${1:module}";'],
["import*",'import * as ${0:name} from "${1:module}";'],["subclass","class ${0:name} extends ${1:base} {\n  constructor(${2:args}) {\n    super(${3:args})\n    $4\n  }\n}"],["class","class ${0:name} {\n  constructor(${1:args}) {\n    $2\n  }\n}"],["switch","switch (${0:expression}) {\n  case '${2:case}':\n    ${3:// code}\n    break;\n    $4\n    default:\n    ${1:// code}\n}"],["tryf","try {${0:/* code */}} finally {}"],["try","try {${0:/* code */}} catch (err) {}"],["do","do {${1:/* code */}} while (${0:/* condition */});"],
["fori","for (let ${0:prop} in ${1:obj}) {\n  ${2:obj[prop]}\n}"],["foro","for (let ${0:value} of ${1:iterable}) {\n  ${2:value}\n}"],["for-","for (let ${0:i} = ${1:list}.length; ${2:i}--; ) {\n  $3\n}"],["for","for (let ${0:i} = 0; ${1:i} < ${3:list}.length; ${2:i}++) {\n  $4\n}"],["Prom","new Promise((resolve, reject) => {$0})"],["keys","Object.keys($0)"],["assign","Object.assign(${0:dest}, ${1:source})"],["stringi","JSON.stringify(${0:object})"],["forE","forEach(${0:ea} => $1)"],["map","map(${0:ea} => $1)"],
["reduce","reduce((${1:all}, ${2:ea}) => {$3}, ${0:init})"],["from","Array.from(${0:list})"],["last","arr.last(${0:list})"],["pluck",'arr.pluck(${0:list}, "${1:key}")'],["sortBy","arr.sortBy(${0:list}, ($1) => $2)"],["join",'join("\\n")'],["con","connect(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["once","once(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["sig","signal(${0:source}, '${1:sourceAttr}', ${2:value});"],["ll","lively.lang."],["lls","lively.lang.string."],
["lla","lively.lang.arr."],["llo","lively.lang.obj."],["llf","lively.lang.fun."],["llp","lively.lang.promise."],["withA","withAllSubmorphsDo(ea => { return ${0:ea}; })"],["$w","$world"],["$m","$morph('${0:name}')"],["get",'get("${0:name}")'],["$","${$0}"],["cl","console.log($0)"],["cw","console.warn($0)"],["ce","console.error($0)"],["s","show(`$0`);"],["l2lC",'import L2LClient from "lively.2lively/client.js";\nlet l2lClient = L2LClient.default();$0'],["fun","function ${0:functionName}($1) {$2}"],
["fn","function($0) {$1}"],["f","($0) => $1"],["aw","await $0"]];wb.snippets=Hb;wb.snippets=Hb;wb.snippets=Hb;var Qb=lively.FreezerRuntime.recorderFor("lively.ide/js/commands.js");Qb.getEvalEnv=function(mc){return(mc=mc.pluginFind(function(Pc){return Pc.isJSEditorPlugin}))?mc.evalEnvironment:null};Qb.setEvalEnv=function(mc,Pc){(mc=mc.pluginFind(function(Xc){return Xc.isJSEditorPlugin}))&&Object.assign(mc.evalEnvironment,Pc);return mc.evalEnvironment};Qb.pToI=function(mc,Pc){return mc.positionToIndex(Pc)};
Qb.iToP=function(mc,Pc){return mc.indexToPosition(Pc)};Qb.arr=Nd;Qb.promise=ee;Qb.string=id;Qb.show=pd;Qb.Range=Ad;Qb.query=Vb;Qb.BaseVisitor=Ud;wb=[{name:"undefine variable",doc:"Finds the variable at cursor position (or position passed) and undefines it in the module toplevel scope.",exec:function(mc,Pc){Pc=void 0===Pc?{varName:null,position:null}:Pc;var Xc,Q,fa,Ia,Qa,ec,Nb,Za,jc,ld;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xd){switch(xd.nextAddress){case 1:Xc=Pc;Q=Xc.varName;
fa=Xc.position;if(!Q){fa||(fa=mc.cursorPosition);Ia=mc.pluginInvokeFirst("getNavigator");Qa=Ia.ensureAST(mc);ec=Qb.query.nodesAt(mc.positionToIndex(fa),Qa).reverse().find(function(Yc){return"Identifier"===Yc.type});if(!ec)return mc.showError(Error("no identifier found!")),xd.return(!0);Q=ec.name}Pc=mc.pluginFind(function(Yc){return Yc.isJSEditorPlugin}).sanatizedJsEnv();Nb='lively.modules.module("'+Pc.targetModule+'").undefine("'+Q+'")';xd.setCatchFinallyBlocks(2);return xd.yield(mc.doEval(null,Pc,
Nb),4);case 4:Za=xd.yieldResult;jc=Za.error?Za.error:Za.isError?Za.value:null;xd.leaveTryBlock(3);break;case 2:jc=ld=xd.enterCatchBlock();case 3:return jc?mc.showError(jc):mc.setStatusMessage(Q+" undefined"),xd.return(!0)}})}},{name:"change doitContext",exec:function(mc){var Pc,Xc,Q,fa,Ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){if(1==Qa.nextAddress)return Pc=$jscomp,Xc=Pc.makeIterator,Qa.yield(mc.world().execCommand("select morph",{prompt:"select morph for doitContext",justReturn:!0,
prependItems:["reset"],filterFn:function(ec){return!ec.isUsedAsEpiMorph()}}),2);Q=Xc.call(Pc,Qa.yieldResult);if(fa=Q.next().value)Ia="reset"===fa,mc.doitContext=Ia?null:fa,mc.setStatusMessage(Ia?"doitContext is now\n"+fa:"doitContext reset");return Qa.return(!0)})}},{name:"change eval backend",exec:function(mc,Pc){Pc=void 0===Pc?{backend:void 0}:Pc;var Xc,Q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fa){if(1==fa.nextAddress)return Xc=Pc,Q=Xc.backend,void 0!==Q?fa.jumpTo(2):fa.yield(mc.world().prompt("choose eval backend",
{historyId:"js-eval-backend-history"}),3);if(2!=fa.nextAddress&&(Q=fa.yieldResult,!Q))return mc.setStatusMessage("Canceled"),fa.return(!0);"local"===Q&&(Q=null);mc.setStatusMessage("Eval backend is now "+(Q||"local"));return fa.return(Qb.setEvalEnv(mc,{remote:Q}))})}},{name:"copy current module name to clipboard",exec:function(mc){var Pc=mc.evalEnvironment.targetModule;mc.setStatusMessage(Pc?Pc:"Cannot find module name");mc.env.eventDispatcher.killRing.add(mc);mc.env.eventDispatcher.doCopy(Pc);return!0}}];
Qb.jsEditorCommands=wb;Qb.jsEditorCommands=wb;Qb.jsEditorCommands=wb;var lb=[{name:"[javascript] list errors and warnings",exec:function(mc){var Pc,Xc,Q,fa,Ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){if(1==Qa.nextAddress){Pc=(mc.markers||[]).filter(function(ec){ec=ec.type;return"js-undeclared-var"===ec||"js-syntax-error"===ec});if(!Pc.length)return Qb.show("no warnings or errors"),Qa.return(!0);Xc=Pc.map(function(ec){var Nb=ec.range;return{isListItem:!0,string:"["+ec.type.split("-").slice(1).join(" ")+
"] "+mc.textInRange(Nb),value:Nb}});return Qa.yield(mc.world().filterableListPrompt("jump to warning or error",Xc),2)}Q=Qa.yieldResult;fa=$jscomp.makeIterator(Q.selected);if(Ia=fa.next().value)mc.saveMark(),mc.selection=Ia,mc.centerRow(Ia.start.row);return Qa.return(!0)})}},{name:"[javascript] inject import",exec:function(mc,Pc){Pc=void 0===Pc?{gotoImport:!1,insertImportAtCursor:!0}:Pc;var Xc,Q,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){switch(Ia.nextAddress){case 1:return Ia.yield(Qb.promise.delay(0),
2);case 2:return Ia.yield(System.import("lively.ide/js/import-helper.js"),3);case 3:return Xc=Ia.yieldResult,Q=Xc.interactivelyInjectImportIntoText,Ia.yield(Q(mc,Pc),4);case 4:return(fa=Ia.yieldResult)||mc.setStatusMessage("canceled"),Ia.return(fa)}})}},{name:"[javascript] fix undeclared variables",exec:function(mc,Pc){Pc=void 0===Pc?{ignore:[],autoApplyIfSingleChoice:!1,requester:mc}:Pc;var Xc,Q,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){if(1==Ia.nextAddress)return Ia.yield(System.import("lively.ide/js/import-helper.js"),
2);if(3!=Ia.nextAddress)return Xc=Ia.yieldResult,Q=Xc.interactivlyFixUndeclaredVariables,Ia.yield(Q(mc,Pc),3);fa=Ia.yieldResult;mc.focus();return Ia.return(fa)})}},{name:"[javascript] remove unused imports",exec:function(mc,Pc){Pc=void 0===Pc?{query:!0}:Pc;var Xc,Q,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){if(1==Ia.nextAddress)return Ia.yield(System.import("lively.ide/js/import-helper.js"),2);if(3!=Ia.nextAddress)return Xc=Ia.yieldResult,Q=Xc.cleanupUnusedImports,Ia.yield(Q(mc,
Pc),3);fa=Ia.yieldResult;mc.setStatusMessage(fa);return Ia.return(!0)})}},{name:"[javascript] eslint report",exec:function(mc){var Pc,Xc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){if(1==Q.nextAddress)return Q.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Pc=Q.yieldResult;Xc=Pc.default;try{return Q.return(Xc.reportOnMorph(mc))}catch(fa){mc.showError(fa)}Q.jumpToEnd()})}},{name:"[javascript] eslint preview fixes",exec:function(mc){var Pc,Xc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){if(1==
Q.nextAddress)return Q.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Pc=Q.yieldResult;Xc=Pc.default;try{return Q.return(Xc.previewFixesOnMorph(mc))}catch(fa){mc.showError(fa)}Q.jumpToEnd()})}},{name:"[javascript] auto format code",handlesCount:!0,exec:function(mc,Pc,Xc){function Q(pb,fb){fb||(fb=Za(pb,{allowReturnOutsideFunction:!0}));var eb=Qb.string.lineRanges(pb),bc=pb.split("\n"),ac=[],Ed=new Qb.BaseVisitor,we=Ed.visitVariableDeclaration;Ed.visitVariableDeclaration=function(Fe,
Pd,Sb){if(1<Fe.declarations.length)for(var oa=Qb.string.findLineWithIndexInLineRanges(eb,Fe.start),Ha=Fe.declarations[0].start-eb[oa][0],Mb={},P=1;P<Fe.declarations.length;Mb={$jscomp$loop$prop$actionType$2284:Mb.$jscomp$loop$prop$actionType$2284,$jscomp$loop$prop$arg$2285:Mb.$jscomp$loop$prop$arg$2285},P++){var ta=Fe.declarations[P],Pa=Qb.string.findLineWithIndexInLineRanges(eb,ta.start);if(oa!==Pa){var Jb=bc[Pa].match(/\s*/)[0].length;Jb=Ha-Jb;0!==Jb&&(ta=Qb.string.findLineWithIndexInLineRanges(eb,
ta.end),Mb.$jscomp$loop$prop$actionType$2284=0<Jb?"insert":"delete",Mb.$jscomp$loop$prop$arg$2285=0<Jb?" ".repeat(Jb):-Jb,ac.push.apply(ac,$jscomp.arrayFromIterable(Qb.arr.range(Pa,ta).map(function(Rc){return function(Zc){return[Rc.$jscomp$loop$prop$actionType$2284,eb[Zc][0],Rc.$jscomp$loop$prop$arg$2285]}}(Mb)))))}}return we.call(Ed,Fe,Pd,Sb)};Ed.accept(fb,{},[]);for(fb=ac.length;fb--;){var Je=$jscomp.makeIterator(ac[fb]),Lf=Je.next().value,ud=Je.next().value;Je=Je.next().value;"insert"===Lf?pb=
pb.slice(0,ud)+Je+pb.slice(ud):"delete"===Lf&&(pb=pb.slice(0,ud)+pb.slice(ud+Je))}return pb}var fa,Ia,Qa,ec,Nb,Za,jc,ld,xd,Yc,Ua,Mc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){switch(pb.nextAddress){case 1:return fa=Xc?Xc:Math.floor(mc.width/mc.defaultCharExtent().width),Pc=Object.assign({printWidth:fa,tabWidth:2,useTabs:!1,bracketSpacing:!1},Pc),Ia=lively.modules.module,Qa=System.normalizeSync("prettier/standalone.js"),pb.yield(Ia(Qa).load({format:"global",instrument:!1}),2);
case 2:return ec=pb.yieldResult,pb.yield(Ia("lively.ast/lib/acorn-extension.js").load(),3);case 3:return pb.yield(Ia("lively.ast").load(),4);case 4:return Nb=pb.yieldResult,Za=Nb.parse,pb.yield(Ia("lively.ast/lib/query.js").load(),5);case 5:return pb.yield(System.import("jsdiff",System.decanonicalize("lively.morphic")),6);case 6:return jc=pb.yieldResult,ld=mc.selection.isEmpty()?mc.documentRange:mc.selection.range,xd=mc.positionToIndex(ld.start),Yc=mc.positionToIndex(ld.end),Ua=ec.format(mc.textString,
Object.assign({},Pc,{rangeStart:xd,rangeEnd:Yc,parser:function(fb,eb,bc){return Za(fb,{allowReturnOutsideFunction:!0})}})),mc.undoManager.group(),Mc=jc.diffChars(mc.textString,Ua),mc.applyJsDiffPatch(Mc),mc.selection.text=Q(mc.selection.text),mc.undoManager.group(),pb.return(!0)}})}}];Qb.jsIdeCommands=lb;Qb.jsIdeCommands=lb;Qb.jsIdeCommands=lb;var mb=[{name:"selectDefinition",readOnly:!0,bindKey:"Alt-.",exec:function(mc,Pc){Pc=mc.pluginInvokeFirst("getNavigator");if(!Pc)return!0;Pc=Pc.resolveIdentifierAt(mc,
mc.cursorPosition);if(!Pc||!Pc.id)return Qb.show("No symbol identifier selected"),!0;if(!Pc.decl)return Qb.show("Cannot find declaration of "+Pc.name),!0;mc.saveMark();mc.selection={start:mc.indexToPosition(Pc.decl.start),end:mc.indexToPosition(Pc.decl.end)};mc.scrollCursorIntoView();return!0}},{name:"selectSymbolReferenceOrDeclarationNext",readOnly:!0,multiSelectAction:"single",exec:function(mc){mc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"next"})}},{name:"selectSymbolReferenceOrDeclarationPrev",
readOnly:!0,multiSelectAction:"single",exec:function(mc){mc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"prev"})}},{name:"selectSymbolReferenceOrDeclaration",doc:"Finds the name of the currently selected symbol and will use the JS ast to select references and declarations whose name matches the symbol in the current scope.",readOnly:!0,multiSelectAction:"single",exec:function(mc,Pc){Pc=void 0===Pc?{direction:null}:Pc;var Xc=mc.pluginInvokeFirst("getNavigator");if(!Xc)return!0;Xc=Xc.resolveIdentifierAt(mc,
mc.cursorPosition);if(!Xc||!Xc.refs)return Qb.show("No symbol identifier selected"),!0;var Q=mc.selection;Xc=Xc.refs.map(function(Ia){var Qa=Ia.end;return Qb.Range.fromPositions(Qb.iToP(mc,Ia.start),Qb.iToP(mc,Qa))}).concat(Xc.decl?Qb.Range.fromPositions(Qb.iToP(mc,Xc.decl.start),Qb.iToP(mc,Xc.decl.end)):[]).sort(Qb.Range.compare);if(!Xc.length)return!0;var fa=Xc.map(String).indexOf(String(Q.range));if("next"===Pc.direction||"prev"===Pc.direction)-1===fa&&Xc.length?Xc=[Xc[0]]:(Pc=fa+("next"===Pc.direction?
1:-1),0>Pc?Pc=Xc.length-1:Pc>=Xc.length&&(Pc=0),Xc=[Xc[Pc]]);Xc.forEach(function(Ia){var Qa=Q.selections.findIndex(function(Nb){return Nb.range.equals(Ia)}),ec=Q.selections.length-1;-1<Qa?Qb.arr.swap(Q.selections,Qa,ec):Q.addRange(Ia,!1)});Q.mergeSelections();return!0}}];Qb.astEditorCommands=mb;Qb.astEditorCommands=mb;Qb.astEditorCommands=mb;lively.modules&&!lively.FreezerRuntime&&lively.modules.module("lively.ide/js/editor-plugin.js").reload({reloadDeps:!1,resetEnv:!1});var Rb=lively.FreezerRuntime.recorderFor("lively.ide/js/mode.js");
Rb.expressionAllowed=function(mc,Pc,Xc){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(Pc.lastType)||"quasi"==Pc.lastType&&/\{\s*$/.test(mc.string.slice(0,mc.pos-(Xc||0)))};Rb.passIndent=cb;Rb.defineMode=Fb;Rb.defineMIME=vc;Rb.registerHelper=pc;Rb.defaultConfig={indentUnit:2};Rb.defaultParserConfig={name:"javascript",statementIndent:2,jsonld:!1,json:!1,typescript:!1,wordCharacters:/[\w$\xa1-\uffff]/,globalVars:[],localVars:[],doubleIndentSwitch:null};Rb.defineMode("javascript",
function(mc,Pc){function Xc(Zb,$b,Ce){dl=Zb;Si=Ce;return $b}function Q(Zb,$b){var Ce=Zb.next();if('"'==Ce||"'"==Ce)return $b.tokenize=fa(Ce),$b.tokenize(Zb,$b);if("."==Ce&&Zb.match(/^\d+(?:[eE][+\-]?\d+)?/))return Xc("number","number");if("."==Ce&&Zb.match(".."))return Xc("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(Ce))return Xc(Ce);if("="==Ce&&Zb.eat(">"))return Xc("=>","operator");if("0"==Ce&&Zb.eat(/x/i))return Zb.eatWhile(/[\da-f]/i),Xc("number","number");if("0"==Ce&&Zb.eat(/o/i))return Zb.eatWhile(/[0-7]/i),
Xc("number","number");if("0"==Ce&&Zb.eat(/b/i))return Zb.eatWhile(/[01]/i),Xc("number","number");if(/\d/.test(Ce))return Zb.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),Xc("number","number");if("/"==Ce){if(Zb.eat("*"))return $b.tokenize=Ia,Ia(Zb,$b);if(Zb.eat("/"))return Zb.skipToEnd(),Xc("comment","comment");if(Rb.expressionAllowed(Zb,$b,1)){a:for(var Ae=$b=!1;null!=(Ce=Zb.next());){if(!$b){if("/"==Ce&&!Ae)break a;"["==Ce?Ae=!0:Ae&&"]"==Ce&&(Ae=!1)}$b=!$b&&"\\"==Ce}Zb.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);
return Xc("regexp","string-2")}Zb.eatWhile(dm);return Xc("operator","operator",Zb.current())}if("`"==Ce)return $b.tokenize=Qa,Qa(Zb,$b);if("#"==Ce)return Zb.skipToEnd(),Xc("error","error");if(dm.test(Ce))return">"==Ce&&$b.lexical&&">"==$b.lexical.type||Zb.eatWhile(dm),Xc("operator","operator",Zb.current());if(kl.test(Ce))return Zb.eatWhile(kl),Zb=Zb.current(),(Ce=ih.propertyIsEnumerable(Zb)&&ih[Zb])&&"."!=$b.lastType?Xc(Ce.type,Ce.style,Zb):Xc("variable","variable",Zb)}function fa(Zb){return function($b,
Ce){var Ae=!1,hd;if(bj&&"@"==$b.peek()&&$b.match(ul))return Ce.tokenize=Q,Xc("jsonld-keyword","meta");for(;null!=(hd=$b.next())&&(hd!=Zb||Ae);)Ae=!Ae&&"\\"==hd;Ae||(Ce.tokenize=Q);return Xc("string","string")}}function Ia(Zb,$b){for(var Ce=!1,Ae;Ae=Zb.next();){if("/"==Ae&&Ce){$b.tokenize=Q;break}Ce="*"==Ae}return Xc("comment","comment")}function Qa(Zb,$b){for(var Ce=!1,Ae;null!=(Ae=Zb.next());){if(!Ce&&("`"==Ae||"$"==Ae&&Zb.eat("{"))){$b.tokenize=Q;break}Ce=!Ce&&"\\"==Ae}return Xc("quasi","string-2",
Zb.current())}function ec(Zb,$b){$b.fatArrowAt&&($b.fatArrowAt=null);var Ce=Zb.string.indexOf("=>",Zb.start);if(!(0>Ce)){if(Kk){var Ae=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Zb.string.slice(Zb.start,Ce));Ae&&(Ce=Ae.index)}Ae=0;var hd=!1;for(--Ce;0<=Ce;--Ce){var jh=Zb.string.charAt(Ce),Oj="([{}])".indexOf(jh);if(0<=Oj&&3>Oj){if(!Ae){++Ce;break}if(0==--Ae){"("==jh&&(hd=!0);break}}else if(3<=Oj&&6>Oj)++Ae;else if(kl.test(jh))hd=!0;else{if(/["'\/]/.test(jh))return;if(hd&&!Ae){++Ce;break}}}hd&&
!Ae&&($b.fatArrowAt=Ce)}}function Nb(Zb,$b,Ce,Ae,hd,jh){this.indented=Zb;this.column=$b;this.type=Ce;this.prev=hd;this.info=jh;null!=Ae&&(this.align=Ae)}function Za(){for(var Zb=arguments.length-1;0<=Zb;Zb--)Rf.cc.push(arguments[Zb])}function jc(){Za.apply(null,arguments);return!0}function ld(Zb){function $b(Ae){for(;Ae;Ae=Ae.next)if(Ae.name==Zb)return!0;return!1}var Ce=Rf.state;Rf.marked="def";Ce.context?$b(Ce.localVars)||(Ce.localVars={name:Zb,next:Ce.localVars}):!$b(Ce.globalVars)&&Pc.globalVars&&
(Ce.globalVars={name:Zb,next:Ce.globalVars})}function xd(){Rf.state.context={prev:Rf.state.context,vars:Rf.state.localVars};Rf.state.localVars=Xm}function Yc(){Rf.state.localVars=Rf.state.context.vars;Rf.state.context=Rf.state.context.prev}function Ua(Zb,$b){var Ce=function(){var Ae=Rf.state,hd=Ae.indented;if("stat"==Ae.lexical.type)hd=Ae.lexical.indented;else for(var jh=Ae.lexical;jh&&")"==jh.type&&jh.align;jh=jh.prev)hd=jh.indented;Ae.lexical=new Nb(hd,Rf.stream.column(),Zb,null,Ae.lexical,$b)};
Ce.lex=!0;return Ce}function Mc(){var Zb=Rf.state;Zb.lexical.prev&&(")"==Zb.lexical.type&&(Zb.indented=Zb.lexical.indented),Zb.lexical=Zb.lexical.prev)}function pb(Zb){function $b(Ce){return Ce==Zb?jc():";"==Zb?Za():jc($b)}return $b}function fb(Zb,$b){return"var"==Zb?jc(Ua("vardef",$b.length),Vc,pb(";"),Mc):"keyword a"==Zb?jc(Ua("form"),ac,fb,Mc):"keyword b"==Zb?jc(Ua("form"),fb,Mc):"{"==Zb?jc(Ua("}"),Df,Mc):";"==Zb?jc():"if"==Zb?("else"==Rf.state.lexical.info&&Rf.state.cc[Rf.state.cc.length-1]==
Mc&&Rf.state.cc.pop()(),jc(Ua("form"),ac,fb,Mc,Ka)):"function"==Zb?jc(zb):"for"==Zb?jc(Ua("form"),$a,fb,Mc):"variable"==Zb?Kk&&"type"==$b?(Rf.marked="keyword",jc(ue,pb("operator"),ue,pb(";"))):jc(Ua("stat"),ta):"switch"==Zb?jc(Ua("form"),ac,pb("{"),Ua("}","switch"),Df,Mc,Mc):"case"==Zb?jc(eb,pb(":")):"default"==Zb?jc(pb(":")):"catch"==Zb?jc(Ua("form"),xd,pb("("),Nc,pb(")"),fb,Mc,Yc):"class"==Zb?jc(Ua("form"),Dd,Mc):"export"==Zb?jc(Ua("stat"),Jg,Mc):"import"==Zb?jc(Ua("stat"),Qh,Mc):"module"==Zb?jc(Ua("form"),
yf,pb("{"),Ua("}"),Df,Mc,Mc):"async"==Zb?jc(fb):"@"==$b?jc(eb,fb):Za(Ua("stat"),eb,pb(";"),Mc)}function eb(Zb){return Ed(Zb,!1)}function bc(Zb){return Ed(Zb,!0)}function ac(Zb){return"("!=Zb?Za():jc(Ua(")"),eb,pb(")"),Mc)}function Ed(Zb,$b){if(Rf.state.fatArrowAt==Rf.stream.start){var Ce=$b?oa:Sb;if("("==Zb)return jc(xd,Ua(")"),oe(yf,")"),Mc,pb("=>"),Ce,Yc);if("variable"==Zb)return Za(xd,yf,pb("=>"),Ce,Yc)}Ce=$b?ud:Lf;return sg.hasOwnProperty(Zb)?jc(Ce):"function"==Zb?jc(zb,Ce):"class"==Zb?jc(Ua("form"),
yc,Mc):"keyword c"==Zb||"async"==Zb?jc($b?Je:we):"("==Zb?jc(Ua(")"),we,pb(")"),Mc,Ce):"operator"==Zb||"spread"==Zb?jc($b?bc:eb):"["==Zb?jc(Ua("]"),ml,Mc,Ce):"{"==Zb?se(Jb,"}",null,Ce):"quasi"==Zb?Za(Fe,Ce):"new"==Zb?jc(Ha($b)):jc()}function we(Zb){return Zb.match(/[;\}\)\],]/)?Za():Za(eb)}function Je(Zb){return Zb.match(/[;\}\)\],]/)?Za():Za(bc)}function Lf(Zb,$b){return","==Zb?jc(eb):ud(Zb,$b,!1)}function ud(Zb,$b,Ce){var Ae=0==Ce?Lf:ud,hd=0==Ce?eb:bc;if("=>"==Zb)return jc(xd,Ce?oa:Sb,Yc);if("operator"==
Zb)return/\+\+|--/.test($b)?jc(Ae):"?"==$b?jc(eb,pb(":"),hd):jc(hd);if("quasi"==Zb)return Za(Fe,Ae);if(";"!=Zb){if("("==Zb)return se(bc,")","call",Ae);if("."==Zb)return jc(Pa,Ae);if("["==Zb)return jc(Ua("]"),we,pb("]"),Mc,Ae)}}function Fe(Zb,$b){return"quasi"!=Zb?Za():"${"!=$b.slice($b.length-2)?jc(Fe):jc(eb,Pd)}function Pd(Zb){if("}"==Zb)return Rf.marked="string-2",Rf.state.tokenize=Qa,jc(Fe)}function Sb(Zb){ec(Rf.stream,Rf.state);return Za("{"==Zb?fb:eb)}function oa(Zb){ec(Rf.stream,Rf.state);return Za("{"==
Zb?fb:bc)}function Ha(Zb){return function($b){return"."==$b?jc(Zb?P:Mb):Za(Zb?bc:eb)}}function Mb(Zb,$b){if("target"==$b)return Rf.marked="keyword",jc(Lf)}function P(Zb,$b){if("target"==$b)return Rf.marked="keyword",jc(ud)}function ta(Zb){return":"==Zb?jc(Mc,fb):Za(Lf,pb(";"),Mc)}function Pa(Zb){if("variable"==Zb)return Rf.marked="property",jc()}function Jb(Zb,$b){if("async"==Zb)return Rf.marked="property",jc(Jb);if("variable"==Zb||"keyword"==Rf.style)return Rf.marked="property","get"==$b||"set"==
$b?jc(Rc):jc(Zc);if("number"==Zb||"string"==Zb)return Rf.marked=bj?"property":Rf.style+" property",jc(Zc);if("jsonld-keyword"==Zb)return jc(Zc);if("modifier"==Zb)return jc(Jb);if("["==Zb)return jc(eb,pb("]"),Zc);if("spread"==Zb)return jc(eb);if(":"==Zb)return Za(Zc)}function Rc(Zb){if("variable"!=Zb)return Za(Zc);Rf.marked="property";return jc(zb)}function Zc(Zb){if(":"==Zb)return jc(bc);if("("==Zb)return Za(zb)}function oe(Zb,$b,Ce){function Ae(hd,jh){return(Ce?-1<Ce.indexOf(hd):","==hd)?(hd=Rf.state.lexical,
"call"==hd.info&&(hd.pos=(hd.pos||0)+1),jc(function(Oj,rm){return Oj==$b||rm==$b?Za():Za(Zb)},Ae)):hd==$b||jh==$b?jc():jc(pb($b))}return function(hd,jh){return hd==$b||jh==$b?jc():Za(Zb,Ae)}}function se(Zb,$b,Ce){for(var Ae=3;Ae<arguments.length;Ae++)Rf.cc.push(arguments[Ae]);return jc(Ua($b,Ce),oe(Zb,$b),Mc)}function Df(Zb){return"}"==Zb?jc():Za(fb,Df)}function Qd(Zb,$b){if(Kk){if(":"==Zb)return jc(ue);if("?"==$b)return jc(Qd)}}function ue(Zb){if("variable"==Zb)return Rf.marked="variable-3",jc(mg);
if("string"==Zb||"number"==Zb||"atom"==Zb)return jc(mg);if("{"==Zb)return jc(Ua("}"),oe(Gf,"}",",;"),Mc);if("("==Zb)return jc(oe(rg,")"),of)}function of(Zb){if("=>"==Zb)return jc(ue)}function Gf(Zb,$b){if("variable"==Zb||"keyword"==Rf.style)return Rf.marked="property",jc(Gf);if("?"==$b)return jc(Gf);if(":"==Zb)return jc(ue)}function rg(Zb){if("variable"==Zb)return jc(rg);if(":"==Zb)return jc(ue)}function mg(Zb,$b){if("<"==$b)return jc(Ua(">"),oe(ue,">"),Mc,mg);if("|"==$b||"."==Zb)return jc(ue);if("["==
Zb)return jc(pb("]"),mg);if("extends"==$b)return jc(ue)}function Vc(){return Za(yf,Qd,Gg,mf)}function yf(Zb,$b){if("modifier"==Zb)return jc(yf);if("variable"==Zb)return ld($b),jc();if("spread"==Zb)return jc(yf);if("["==Zb)return se(yf,"]");if("{"==Zb)return se(dg,"}")}function dg(Zb,$b){if("variable"==Zb&&!Rf.stream.match(/^\s*:/,!1))return ld($b),jc(Gg);"variable"==Zb&&(Rf.marked="property");return"spread"==Zb?jc(yf):"}"==Zb?Za():jc(pb(":"),yf,Gg)}function Gg(Zb,$b){if("="==$b)return jc(bc)}function mf(Zb){if(","==
Zb)return jc(Vc)}function Ka(Zb,$b){if("keyword b"==Zb&&"else"==$b)return jc(Ua("form","else"),fb,Mc)}function $a(Zb){if("("==Zb)return jc(Ua(")"),Kb,pb(")"),Mc)}function Kb(Zb){return"var"==Zb?jc(Vc,pb(";"),Ja):";"==Zb?jc(Ja):"variable"==Zb?jc(ba):Za(eb,pb(";"),Ja)}function ba(Zb,$b){return"in"==$b||"of"==$b?(Rf.marked="keyword",jc(eb)):jc(Lf,Ja)}function Ja(Zb,$b){return";"==Zb?jc(ob):"in"==$b||"of"==$b?(Rf.marked="keyword",jc(eb)):Za(eb,pb(";"),ob)}function ob(Zb){")"!=Zb&&jc(eb)}function zb(Zb,
$b){if("*"==$b)return Rf.marked="keyword",jc(zb);if("variable"==Zb)return ld($b),jc(zb);if("("==Zb)return jc(xd,Ua(")"),oe(Nc,")"),Mc,Qd,fb,Yc);if(Kk&&"<"==$b)return jc(Ua(">"),oe(ue,">"),Mc,zb)}function Nc(Zb){return"spread"==Zb?jc(Nc):Za(yf,Qd,Gg)}function yc(Zb,$b){return"variable"==Zb?Dd(Zb,$b):zd(Zb,$b)}function Dd(Zb,$b){if("variable"==Zb)return ld($b),jc(zd)}function zd(Zb,$b){if("<"==$b)return jc(Ua(">"),oe(ue,">"),Mc,zd);if("extends"==$b||"implements"==$b||Kk&&","==Zb)return jc(Kk?ue:eb,
zd);if("{"==Zb)return jc(Ua("}"),Bd,Mc)}function Bd(Zb,$b){if("variable"==Zb||"keyword"==Rf.style){if(("async"==$b||"static"==$b||"get"==$b||"set"==$b||Kk&&("public"==$b||"private"==$b||"protected"==$b||"readonly"==$b||"abstract"==$b))&&Rf.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return Rf.marked="keyword",jc(Bd);Rf.marked="property";return jc(Kk?Ie:zb,Bd)}if("["==Zb)return jc(eb,pb("]"),Kk?Ie:zb,Bd);if("*"==$b)return Rf.marked="keyword",jc(Bd);if(";"==Zb)return jc(Bd);if("}"==Zb)return jc();if("@"==
$b)return jc(eb,Bd)}function Ie(Zb,$b){return"?"==$b?jc(Ie):":"==Zb?jc(ue,Gg):"="==$b?jc(bc):Za(zb)}function Jg(Zb,$b){return"*"==$b?(Rf.marked="keyword",jc(Zh,pb(";"))):"default"==$b?(Rf.marked="keyword",jc(eb,pb(";"))):"{"==Zb?jc(oe(wg,"}"),Zh,pb(";")):Za(fb)}function wg(Zb,$b){if("as"==$b)return Rf.marked="keyword",jc(pb("variable"));if("variable"==Zb)return Za(bc,wg)}function Qh(Zb){return"string"==Zb?jc():Za(Vf,Hh,Zh)}function Vf(Zb,$b){if("{"==Zb)return se(Vf,"}");"variable"==Zb&&ld($b);"*"==
$b&&(Rf.marked="keyword");return jc(ek)}function Hh(Zb){if(","==Zb)return jc(Vf,Hh)}function ek(Zb,$b){if("as"==$b)return Rf.marked="keyword",jc(Vf)}function Zh(Zb,$b){if("from"==$b)return Rf.marked="keyword",jc(eb)}function ml(Zb){return"]"==Zb?jc():Za(oe(bc,"]"))}mc=Object.assign({},Rb.defaultConfig,{},mc);Pc=Object.assign({},Rb.defaultParserConfig,{},Pc);var Hf=mc.indentUnit,Gj=Pc.statementIndent,bj=Pc.jsonld,Oe=Pc.json||bj,Kk=Pc.typescript,kl=Pc.wordCharacters||/[\w$\xa1-\uffff]/,ih=function(){function Zb(rm){return{type:rm,
style:"keyword"}}var $b=Zb("keyword a"),Ce=Zb("keyword b"),Ae=Zb("keyword c"),hd=Zb("operator"),jh={type:"atom",style:"atom"};$b={"if":Zb("if"),"while":$b,"with":$b,"else":Ce,"do":Ce,"try":Ce,"finally":Ce,"return":Ae,"break":Ae,"continue":Ae,"new":Zb("new"),"delete":Ae,"throw":Ae,"debugger":Ae,"var":Zb("var"),"const":Zb("var"),let:Zb("var"),"function":Zb("function"),"catch":Zb("catch"),"for":Zb("for"),"switch":Zb("switch"),"case":Zb("case"),"default":Zb("default"),"in":hd,"typeof":hd,"instanceof":hd,
"true":jh,"false":jh,"null":jh,undefined:jh,NaN:jh,Infinity:jh,"this":Zb("this"),"class":Zb("class"),"super":Zb("atom"),yield:Ae,"export":Zb("export"),"import":Zb("import"),"extends":Ae,await:Ae,async:Zb("async")};if(Kk){Ce={type:"variable",style:"variable-3"};Ae={"interface":Zb("class"),"implements":Ae,namespace:Ae,module:Zb("module"),"enum":Zb("module"),"public":Zb("modifier"),"private":Zb("modifier"),"protected":Zb("modifier"),"abstract":Zb("modifier"),as:hd,string:Ce,number:Ce,"boolean":Ce,any:Ce};
for(var Oj in Ae)$b[Oj]=Ae[Oj]}return $b}(),dm=/[+\-*&%=<>!?|~^@]/,ul=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,dl,Si,sg={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Rf={state:null,column:null,marked:null,cc:null},Xm={name:"this",next:{name:"arguments"}};Mc.lex=!0;return{startState:function(Zb){Zb={tokenize:Q,lastType:"sof",cc:[],lexical:new Nb((Zb||0)-Hf,0,"block",!1),localVars:Pc.localVars,context:Pc.localVars&&{vars:Pc.localVars},
indented:Zb||0};Pc.globalVars&&"object"==typeof Pc.globalVars&&(Zb.globalVars=Pc.globalVars);return Zb},token:function(Zb,$b){Zb.sol()&&($b.lexical.hasOwnProperty("align")||($b.lexical.align=!1),$b.indented=Zb.indentation(),ec(Zb,$b));if($b.tokenize!=Ia&&Zb.eatSpace())return null;var Ce=$b.tokenize(Zb,$b);if("comment"==dl)return Ce;$b.lastType="operator"!=dl||"++"!=Si&&"--"!=Si?dl:"incdec";a:{var Ae=dl,hd=Si,jh=$b.cc;Rf.state=$b;Rf.stream=Zb;Rf.marked=null;Rf.cc=jh;Rf.style=Ce;$b.lexical.hasOwnProperty("align")||
($b.lexical.align=!0);for(Zb=0;;){if(1E5<Zb++)throw Error("endless");if((jh.length?jh.pop():Oe?eb:fb)(Ae,hd)){for(;jh.length&&jh[jh.length-1].lex;)jh.pop()();if(Rf.marked){Ce=Rf.marked;break a}if(Ae="variable"==Ae)b:{for(Ae=$b.localVars;Ae;Ae=Ae.next)if(Ae.name==hd){Ae=!0;break b}for($b=$b.context;$b;$b=$b.prev)for(Ae=$b.vars;Ae;Ae=Ae.next)if(Ae.name==hd){Ae=!0;break b}Ae=void 0}if(Ae){Ce="variable-2";break a}break a}}}return Ce},indent:function(Zb,$b){if(Zb.tokenize==Ia)return Rb.passIndent;if(Zb.tokenize!=
Q)return 0;var Ce=$b&&$b.charAt(0),Ae=Zb.lexical,hd;if(!/^\s*else\b/.test($b))for(var jh=Zb.cc.length-1;0<=jh;--jh){var Oj=Zb.cc[jh];if(Oj==Mc)Ae=Ae.prev;else if(Oj!=Ka)break}for(;!("stat"!=Ae.type&&"form"!=Ae.type||"}"!=Ce&&(!(hd=Zb.cc[Zb.cc.length-1])||hd!=Lf&&hd!=ud||/^[,\.=+\-*:?[\(]/.test($b)));)Ae=Ae.prev;Gj&&")"==Ae.type&&"stat"==Ae.prev.type&&(Ae=Ae.prev);hd=Ae.type;jh=Ce==hd;return(Oj=Zb._string)&&Oj.trimLeft().startsWith("?")&&":"===Ce?Oj.indexOf("?"):Oj&&":"===Zb.lastType&&"}"!==Ae.type?
Oj.match(/^\s*/)[0].length:"vardef"==hd?($b=Ae.indented+Ae.info+2+Zb.localVars.name.length,"?"===Ce||":"===Ce||"|"===Ce||"&"===Ce?$b:","==Zb.lastType?Ae.indented+Ae.info+1:"operator"==Zb.lastType?$b+3:Ae.indented):"form"==hd&&"{"==Ce?Ae.indented:"form"==hd?Ae.indented+Hf:"stat"==hd?(Ce=Ae.indented,Zb="operator"==Zb.lastType||","==Zb.lastType||dm.test($b.charAt(0))||/[,.]/.test($b.charAt(0)),Ce+(Zb?Gj||Hf:0)):"switch"!=Ae.info||jh||0==Pc.doubleIndentSwitch?Ae.align?Ae.column+(jh?0:1):Ae.indented+(jh?
0:Hf):Ae.indented+(/^(?:case|default)\b/.test($b)?Hf:2*Hf)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Oe?null:"/*",blockCommentEnd:Oe?null:"*/",lineComment:Oe?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Oe?"json":"javascript",jsonldMode:bj,jsonMode:Oe,expressionAllowed:Rb.expressionAllowed,skipExpression:function(Zb){var $b=Zb.cc[Zb.cc.length-1];$b!=eb&&$b!=bc||Zb.cc.pop()}}});Rb.registerHelper("wordChars","javascript",/[\w$]/);Rb.defineMIME("text/javascript",
"javascript");Rb.defineMIME("text/ecmascript","javascript");Rb.defineMIME("application/javascript","javascript");Rb.defineMIME("application/x-javascript","javascript");Rb.defineMIME("application/ecmascript","javascript");Rb.defineMIME("application/json",{name:"javascript",json:!0});Rb.defineMIME("application/x-json",{name:"javascript",json:!0});Rb.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});Rb.defineMIME("text/typescript",{name:"javascript",typescript:!0});Rb.defineMIME("application/typescript",
{name:"javascript",typescript:!0});var Gc=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js");Gc.string=id;Gc.JavaScriptChecker=Ob;Gc.JavaScriptNavigator=td;Gc.completers=Aa;Gc.jsSnippets=Hb;Gc.jsIdeCommands=lb;Gc.jsEditorCommands=wb;Gc.astEditorCommands=mb;Gc.CodeMirrorEnabledEditorPlugin=sd;Gc.Snippet=hb;Gc.parser=kd;Gc.localInterface=tc;Gc.systemInterfaceNamed=bd;Gc.serverInterfaceFor=Xb;Gc.l2lInterfaceFor=Tb;Ob=function(mc){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js"),
Xc=Pc.hasOwnProperty("JavaScriptEditorPlugin")&&"function"===typeof Pc.JavaScriptEditorPlugin?Pc.JavaScriptEditorPlugin:Pc.JavaScriptEditorPlugin=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Cb(Xc,mc,[{key:Symbol.for("lively-instance-initialize"),value:function(){Cb._get(Object.getPrototypeOf(Xc.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.checker=new Gc.JavaScriptChecker;this.evalEnvironment=
{format:"esm",targetModule:null,context:null}}},{key:"isJSEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"js"}},{key:"longName",get:function(){return"javascript"}},{key:"attach",value:function(Q){Cb._get(Object.getPrototypeOf(Xc.prototype),"attach",this).call(this,Q);this.evalEnvironment.context=Q}},{key:"detach",value:function(Q){this.checker.uninstall(this.textMorph);Cb._get(Object.getPrototypeOf(Xc.prototype),"detach",this).call(this,Q)}},{key:"getNavigator",value:function(){return new Gc.JavaScriptNavigator}},
{key:"getCompleters",value:function(Q){return Gc.completers.concat(Q)}},{key:"getCommands",value:function(Q){return[].concat($jscomp.arrayFromIterable(Cb._get(Object.getPrototypeOf(Xc.prototype),"getCommands",this).call(this,Q)),$jscomp.arrayFromIterable(Gc.jsIdeCommands),$jscomp.arrayFromIterable(Gc.jsEditorCommands),$jscomp.arrayFromIterable(Gc.astEditorCommands))}},{key:"getKeyBindings",value:function(Q){return[].concat($jscomp.arrayFromIterable(Q),[{keys:"Shift-Tab",command:{command:"[javascript] auto format code"}},
{keys:"Ctrl-C E",command:"[javascript] list errors and warnings"},{keys:{mac:"Meta-Shift-L L I N T R",win:"Ctrl-Shift-L L I N T R"},command:"[javascript] eslint report"},{keys:{mac:"Meta-Shift-L L I N T P",win:"Ctrl-Shift-L L I N T P"},command:"[javascript] eslint preview fixes"},{keys:{mac:"Meta-Shift-L L I N T F",win:"Ctrl-Shift-L L I N T F"},command:"[javascript] eslint fix"},{keys:{mac:"Meta-Shift-L M O D E",win:"Ctrl-Shift-L M O D E"},command:"change editor mode"},{keys:"Ctrl-C I",command:"[javascript] inject import"},
{keys:"Ctrl-C C I",command:"[javascript] fix undeclared variables"}])}},{key:"getMenuItems",value:function(Q){var fa=this,Ia,Qa,ec,Nb,Za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(jc){Ia=fa.textMorph;Qa=[{command:"doit",target:Ia,showKeyShortcuts:!0},{command:"inspectit",target:Ia,showKeyShortcuts:!0},{command:"printit",target:Ia,showKeyShortcuts:!0},{command:"print inspectit",alias:"print inspect",target:Ia,showKeyShortcuts:!0},{command:"eval all",target:Ia,showKeyShortcuts:!0},
{command:"text completion",alias:"code completion",target:Ia,showKeyShortcuts:!0},{command:"[javascript] list errors and warnings",alias:"list errors and warnings",target:Ia,showKeyShortcuts:!0},{isDivider:!0}];fa.evalEnvironment.targetModule&&Qa.push({command:"[javascript] inject import",alias:"add import",target:Ia},{command:"[javascript] fix undeclared variables",alias:"fix undeclared variables",target:Ia},{command:"[javascript] remove unused imports",alias:"remove unused imports",target:Ia});
ec=fa.getNavigator();(Nb=ec.resolveIdentifierAt(Ia,Ia.cursorPosition))&&Qa.push({command:"selectDefinition",alias:'jump to definition of "'+Nb.name+'"',target:Ia},{command:"selectSymbolReferenceOrDeclaration",alias:'select all occurrences of "'+Nb.name+'"',target:Ia});(Za=Ia.selection.text.trim())&&Qa.push({command:"open code search",alias:'code search for "'+Gc.string.truncate(Za,30)+'"',target:Ia.world(),args:{input:Za,backend:fa.backend()}});Qa.push({isDivider:!0});return jc.return(Qa.concat(Q))})}},
{key:"getSnippets",value:function(){return Gc.jsSnippets.map(function(Q){var fa=$jscomp.makeIterator(Q);Q=fa.next().value;fa=fa.next().value;return new Gc.Snippet({trigger:Q,expansion:fa})})}},{key:"sanatizedJsEnv",value:function(Q){Q=Object.assign({},this.evalEnvironment,{},Q);Q.format||(Q.formatd="esm");Q.context||(Q.context=this.textMorph);Q.sourceURL||(Q.sourceURL=Q.targetModule+"_doit_"+Date.now());Q.systemInterface||(Q.systemInterface=Gc.localInterface);return Q}},{key:"backend",value:function(Q){Q=
this.sanatizedJsEnv(Q);return Q.remote?Q.remote:"local"}},{key:"systemInterface",value:function(Q){return this.sanatizedJsEnv(Q).systemInterface||Gc.localInterface}},{key:"setSystemInterface",value:function(Q){return this.evalEnvironment.systemInterface=Q}},{key:"setSystemInterfaceNamed",value:function(Q){return this.setSystemInterface(Gc.systemInterfaceNamed(Q))}},{key:"runEval",value:function(Q,fa){fa=this.sanatizedJsEnv(fa);return this.systemInterface(fa).runEval(Q,fa)}},{key:"parser",get:function(){return Gc.parser}},
{key:"parse",value:function(Q){Q=void 0===Q?null:Q;if(this._ast&&this._ast._astType===Q)return this._ast;var fa=this.parser,Ia=this.textMorph.textString;if(!fa)return null;var Qa={withComments:!0,allowReturnOutsideFunction:!0};Q&&(Qa.type=Q);if(Ia.startsWith("#!")){var ec=Ia.indexOf("\n");Ia=" ".repeat(ec)+Ia.slice(ec)}fa=fa.fuzzyParse(Ia,Qa);fa._astType=Q;return this._ast=fa}},{key:"undeclaredVariables",value:function(Q){var fa=this.parser,Ia=this.evalEnvironment.knownGlobals||[];Q=this.parse(void 0===
Q?null:Q);return fa&&Q?fa.query.findGlobalVarRefs(Q,{jslintGlobalComment:!0}).filter(function(Qa){return!Ia.includes(Qa.name)}):[]}}],[{key:"className",get:function(){return"JavaScriptEditorPlugin"}}],Pc,{pathInPackage:function(){return"js/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:662,end:6664})}(Gc.CodeMirrorEnabledEditorPlugin);
Ob=Gc.JavaScriptEditorPlugin;Ca("default",Ob);Gc.default=Ob}}});System.register("10",[],function(){return{execute:function(){lively.FreezerRuntime.recorderFor("lively.shell/index.js")}}});