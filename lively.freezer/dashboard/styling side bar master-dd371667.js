System.register("./__root_module__-255c8c26.js kld-intersections ./index-e74b4e71.js ./index-029212ef.js ./index-88273505.js ./color-picker-9a3cf97a.js ./index-f222f72e.js".split(" "),function(){var Da,Ab,Tb,kc,ec,he,gd,Zd,kd,Sc,yd,Od,fe,Ud,md,db,Fb,tc,nc,td,ke,zc;return{setters:[function(Ec){Da=Ec.ah;Ab=Ec.az;Tb=Ec.am;kc=Ec.an;ec=Ec.au;he=Ec.a2;gd=Ec.C;Zd=Ec.as;kd=Ec.ap;Sc=Ec.bp;yd=Ec.ar;Od=Ec.a6;fe=Ec.s;Ud=Ec.bV;md=Ec.at;db=Ec.aq;Fb=Ec.r;tc=Ec.a5;nc=Ec.P;td=Ec.bX;ke=Ec.bY},function(){},function(){},
function(){},function(){},function(Ec){zc=Ec.S},function(){}],execute:function(){var Ec=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js");Ec.Morph=Da;Ec.touchInputDevice=Ab;Ec.morph=Tb;Ec.Icon=kc;Ec.easings=ec;Ec.pt=he;Ec.Color=gd;Ec.fun=Zd;Ec.connect=kd;Ec.TreeData=Sc;var Pb=function(qb){var bc=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),Ic=bc.hasOwnProperty("SettingsTree")&&"function"===typeof bc.SettingsTree?bc.SettingsTree:bc.SettingsTree=function(ra){ra&&ra[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return yd(Ic,qb,[{key:"display",value:function(ra){return ra.panel?[ra.panel,{}]:ra.name}},{key:"collapse",value:function(ra,Fa){ra.isCollapsed=Fa}},{key:"isCollapsed",value:function(ra){return ra.isCollapsed}},{key:"isLeaf",value:function(ra){return!ra.children}},{key:"getChildren",value:function(ra){return ra.children}}],[{key:"className",get:function(){return"SettingsTree"}},{key:"default",value:function(){return new this({isCollapsed:!1,
children:[{isCollapsed:!0,name:[" ",{}].concat($jscomp.arrayFromIterable(Ec.Icon.textAttribute("font")),[" Rich Text",{fontWeight:"bold"}]),children:[{panel:Ec.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Ec.Icon.textAttribute("image")),[" Shape",{fontWeight:"bold"}]),children:[{panel:Ec.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Ec.Icon.textAttribute("border-style")),[" Border",{paddingLeft:"2px",fontWeight:"bold"}]),children:[{panel:Ec.morph({})}]},
{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Ec.Icon.textAttribute("grip-vertical")),[" Layout",{paddingLeft:"4px",fontWeight:"bold"}]),children:[{panel:Ec.morph({})}]}]})}},{key:"border",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" Type    ",{},Ec.morph({height:20}),{}],children:[{panel:Ec.morph({})}]},{isCollapsed:!1,name:[" Color   ",{},Ec.morph({height:20}),{}],children:[{panel:Ec.morph({})}]},{isCollapsed:!1,name:[" Width  ",{},Ec.morph({height:20}),
{}],children:[{panel:Ec.morph({})}]},{isCollapsed:!1,name:[" Radius ",{},Ec.morph({height:20}),{}],children:[{panel:Ec.morph({})}]}]})}}],bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-56"}}},{start:284,end:2453})}(Ec.TreeData);Ec.SettingsTree=Pb;Ec.SettingsTree=Pb;Ec.SettingsTree=Pb;Pb=function(qb){var bc=
lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),Ic=bc.hasOwnProperty("StylingSideBar")&&"function"===typeof bc.StylingSideBar?bc.StylingSideBar:bc.StylingSideBar=function(ra){ra&&ra[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return yd(Ic,qb,[{key:"onWorldResize",value:function(ra){ra=void 0===ra?!0:ra;if(this.respondsToVisibleWindow){var Fa=$world.visibleBounds(),mb=navigator.standalone&&Ec.touchInputDevice?25:0,ub=this.getSubmorphNamed("horizontal resizer");
this.height=Fa.height-mb;this.top=mb+Fa.top();ub.height=this.height;ub.left=0;ub.top=0;ra&&(this.visible?this.topRight=Fa.topRight():this.topLeft=Fa.topRight())}}},{key:"toggle",value:function(ra){var Fa=this,mb,ub;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Db){switch(Db.nextAddress){case 1:mb=$world.visibleBounds();ub=navigator.standalone&&Ec.touchInputDevice?25:0;Fa.height=mb.height-ub;Fa.top=ub+mb.top();if(ra)return $world.addMorph(Fa,$world.get("lively top bar")),Fa.left=mb.width,
Fa.visible=!0,Db.yield(Fa.whenRendered(),5);Fa.detachFromWorld($world);return Db.yield(Fa.animate({opacity:0,left:mb.width,duration:300}),4);case 4:Fa.visible=!1;Fa.remove();Db.jumpTo(0);break;case 5:return Fa.onWorldResize(!1),Db.yield(Fa.animate({opacity:1,easing:Ec.easings.outCirc,right:mb.width,duration:300}),6);case 6:Fa.attachToWorld($world),Db.jumpToEnd()}})}},{key:"cleanupAnchors",value:function(){for(var ra=this.withAllSubmorphsSelect(function(Db){return Db.anchors&&Db.anchors.filter(function(cb){return!cb.id}).length}),
Fa={},mb=$jscomp.makeIterator(ra),ub=mb.next();!ub.done;Fa={$jscomp$loop$prop$m$2295:Fa.$jscomp$loop$prop$m$2295},ub=mb.next())Fa.$jscomp$loop$prop$m$2295=ub.value,Fa.$jscomp$loop$prop$m$2295.anchors.forEach(function(Db){return function(cb){return!cb.id&&Db.$jscomp$loop$prop$m$2295.removeAnchor(cb)}}(Fa));return ra.length}},{key:"attachToWorld",value:function(ra){Ec.connect(ra,"showHaloFor",this,"focusMorph",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(ra){var Fa=this;ra.attributeConnections.forEach(function(mb){mb.targetObj===
Fa&&mb.disconnect()})}},{key:"focusMorph",value:function(ra){ra.isMorph&&ra.ownerChain().includes(this)||((ra.isLabel||ra.isText||ra.isButton)&&this.richTextControl.focusOn(ra,!1),Object.values(this.controls).forEach(function(Fa){return Fa&&Fa.focusOn(ra)}))}},{key:"onHierarchyChange",value:function(){Object.values(this.controls).forEach(function(ra){return ra&&ra.update()})}}],[{key:"className",get:function(){return"StylingSideBar"}},{key:"properties",get:function(){return{controls:{},richTextControl:{},
isHaloItem:{get:function(){return!0}}}}}],bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-56"}}},{start:2470,end:5120})}(Ec.Morph);Pb=Ec.StylingSideBar;Ec.default=Pb;var Qb=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js");Qb.Morph=Da;Qb.obj=Od;Qb.string=fe;Qb.connect=kd;Qb.noUpdate=
Ud;Qb.once=md;Pb=function(qb){var bc=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js"),Ic=bc.hasOwnProperty("ShapeFormatStyler")&&"function"===typeof bc.ShapeFormatStyler?bc.ShapeFormatStyler:bc.ShapeFormatStyler=function(ra){ra&&ra[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return yd(Ic,qb,[{key:Symbol.for("lively-instance-initialize"),value:function(ra){yd._get(Object.getPrototypeOf(Ic.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,ra);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var ra=this.ui,Fa={},mb=$jscomp.makeIterator(Object.entries(this.uiSpec)),ub=mb.next();!ub.done;Fa={$jscomp$loop$prop$control$2297:Fa.$jscomp$loop$prop$control$2297,$jscomp$loop$prop$prop$2298:Fa.$jscomp$loop$prop$prop$2298},ub=mb.next()){var Db=$jscomp.makeIterator(ub.value);ub=Db.next().value;Db=$jscomp.makeIterator(Db.next().value);Db.next();var cb=Db.next().value;Fa.$jscomp$loop$prop$prop$2298=
Db.next().value;Fa.$jscomp$loop$prop$control$2297=ra[ub];Qb.connect(Fa.$jscomp$loop$prop$control$2297,cb,this,"updateTarget",{updater:function(fb){return function(Eb,qc){fb.$jscomp$loop$prop$control$2297._updating=!0;Eb(fb.$jscomp$loop$prop$prop$2298,qc);fb.$jscomp$loop$prop$control$2297._updating=!1}}(Fa),varMapping:{prop:Fa.$jscomp$loop$prop$prop$2298,control:Fa.$jscomp$loop$prop$control$2297}})}}},{key:"update",value:function(){var ra=this,Fa=this.target,mb=Fa.clipMode,ub=Fa.fill,Db=Fa.dropShadow,
cb=Fa.opacity,fb=Fa.height,Eb=Fa.width;Fa=this.ui;var qc=Fa.clipModeSelector,gc=Fa.fillPicker,Oc=Fa.opacityField,Wc=Fa.shadowPicker,Q=Fa.heightField,ea=Fa.widthField;Qb.noUpdate(function(){ra.updateControl(Wc,"shadowValue",Db);ra.updateControl(qc,"selection",mb);ra.updateControl(gc,"colorValue",ub);ra.updateControl(Oc,"number",cb);ra.updateControl(Q,"number",fb);ra.updateControl(ea,"number",Eb)})}},{key:"updateTarget",value:function(ra,Fa){this.target[ra]=Fa;this.update()}},{key:"updateControl",value:function(ra,
Fa,mb){ra._updating||Qb.obj.equals(ra[Fa],mb)||(ra[Fa]=mb)}},{key:"updateMultiValue",value:function(ra,Fa,mb){var ub=this.ui,Db=ub[this.join(ra)],cb=Db.get("multi value indicator"),fb=Qb.obj.values(Fa).some(function(Eb){return!Qb.obj.isFunction(Eb)&&!Qb.obj.equals(Eb,Fa.valueOf())});cb.left=0;Db.visible=Db.isLayoutable=!fb;if(fb&&cb.visible!=fb)Qb.once(cb,"onMouseDown",Db,mb,{converter:function(){return Fa.valueOf()},varMapping:{value:Fa}});cb.visible=cb.isLayoutable=fb;cb.left=fb?200:0;this.updateControl(Db,
mb,Fa.valueOf());Db=$jscomp.makeIterator(["top","left","bottom","right"]);for(cb=Db.next();!cb.done;cb=Db.next())cb=cb.value,fb=ub[this.join(ra,cb)],this.updateControl(fb,mb,Fa[cb])}},{key:"lower",value:function(ra){return ra.charAt(0).toLowerCase()+ra.slice(1)}},{key:"join",value:function(ra,Fa){return this.lower(Qb.string.camelCaseString(ra+(Fa?" "+Fa:"")))}},{key:"unwrap",value:function(ra,Fa,mb){var ub={};ub=(ub[this.lower(Qb.string.camelCaseString(ra))]=[ra,Fa,mb],ub);for(var Db=$jscomp.makeIterator(["top",
"left","bottom","right"]),cb=Db.next();!cb.done;cb=Db.next()){cb=cb.value;var fb=ra+" "+cb;ub[this.lower(Qb.string.camelCaseString(fb))]=[fb,Fa,this.join(mb,cb)]}return ub}},{key:"focusOn",value:function(ra){var Fa=this,mb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if(1==ub.nextAddress)return!ra||Fa.isAncestorOf(ra)||Fa.target===ra||Qb.obj.isArray(ra)||(Fa.target=ra),mb=Fa.visible,Fa.visible=!0,ub.yield(Fa.whenRendered(),2);if(3!=ub.nextAddress)return Fa.update(),ub.yield(Fa.whenRendered(),
3);Fa.getSubmorphsByStyleClassName("NumberWidget").map(function(Db){return Db.relayout()});Fa.visible=mb;ub.jumpToEnd()})}},{key:"onHoverIn",value:function(ra){this.watchForTarget=!1}},{key:"onHoverOut",value:function(ra){this.watchForTarget=!0}}],[{key:"className",get:function(){return"ShapeFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{get:function(){return this._uiSpec||(this._uiSpec={clipModeSelector:["clip mode selector","selection","clipMode"],fillPicker:["fill picker","colorValue",
"fill"],shadowPicker:["shadow picker","shadowValue","dropShadow"],opacityField:["opacity field","number","opacity"],heightField:["height field","number","height"],widthField:["width field","number","width"]})}},ui:{readOnly:!0,get:function(){var ra=this,Fa=this.uiSpec;return this._ui||(this._ui=Qb.obj.extract(Fa,Qb.obj.keys(Fa),function(mb,ub){mb=$jscomp.makeIterator(ub).next().value;return ra.getSubmorphNamed(mb)}))}}}}}],bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeFormatStyler",version:"0.1.1-144"}}},{start:176,end:4600})}(Qb.Morph);Pb=Qb.ShapeFormatStyler;Qb.default=Pb;var Tc=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js");Tc.Morph=Da;Tc.ShadowPopover=zc;Tc.connect=kd;Tc.signal=db;Pb=function(qb){var bc=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js"),Ic=bc.hasOwnProperty("ShadowWidget")&&"function"===typeof bc.ShadowWidget?bc.ShadowWidget:
bc.ShadowWidget=function(ra){ra&&ra[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return yd(Ic,qb,[{key:"onHoverIn",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:1,duration:200})}},{key:"onHoverOut",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(ra){this.openPopover()}},{key:"update",value:function(ra){var Fa=this.submorphs[0];
Fa&&(Fa.dropShadow=ra)}},{key:"openPopover",value:function(){var ra=this,Fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(mb){if(1==mb.nextAddress)return Fa=new Tc.ShadowPopover({hasFixedPosition:!!ra.ownerChain().find(function(ub){return ub.hasFixedPosition}),shadowValue:ra.shadowValue}),mb.yield(Fa.fadeIntoWorld(ra.globalBounds().center()),2);Tc.connect(Fa,"shadowValue",ra,"shadowValue");Tc.connect(ra,"shadowValue",ra,"update");Tc.signal(ra,"openWidget",Fa);mb.jumpToEnd()})}}],[{key:"className",
get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{set:function(ra){this.setProperty("shadowValue",ra);this.update(ra)}}}}}],bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShadowWidget",version:"0.1.1-7"}}},{start:194,end:1231})}(Tc.Morph);Pb=Tc.ShadowWidget;Tc.default=Pb;var ld=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js");
ld.Morph=Da;ld.obj=Od;ld.string=fe;ld.connect=kd;ld.noUpdate=Ud;ld.once=md;Pb=function(qb){var bc=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js"),Ic=bc.hasOwnProperty("BorderFormatStyler")&&"function"===typeof bc.BorderFormatStyler?bc.BorderFormatStyler:bc.BorderFormatStyler=function(ra){ra&&ra[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return yd(Ic,qb,[{key:"setupUI",value:function(){var ra=this;this.getSubmorphsByStyleClassName("NumberWidget").map(function(Fa){var mb=
ld.string.camelCaseString(Fa.name);mb=mb[0].toLowerCase()+mb.slice(1);ra.ui[mb]=Fa})}},{key:"cleanupAnchors",value:function(){var ra=this.withAllSubmorphsSelect(function(ub){return ub.anchors&&ub.anchors.filter(function(Db){return!Db.id})}),Fa={};ra=$jscomp.makeIterator(ra);for(var mb=ra.next();!mb.done;Fa={$jscomp$loop$prop$m$2300:Fa.$jscomp$loop$prop$m$2300},mb=ra.next())Fa.$jscomp$loop$prop$m$2300=mb.value,Fa.$jscomp$loop$prop$m$2300.anchors.forEach(function(ub){return function(Db){return!Db.id&&
ub.$jscomp$loop$prop$m$2300.removeAnchor(Db)}}(Fa))}},{key:Symbol.for("lively-instance-initialize"),value:function(ra){yd._get(Object.getPrototypeOf(Ic.prototype),Symbol.for("lively-instance-initialize"),this).call(this,ra);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var ra=this.ui,Fa={},mb=$jscomp.makeIterator(Object.entries(this.uiSpec)),ub=mb.next();!ub.done;Fa={$jscomp$loop$prop$control$2302:Fa.$jscomp$loop$prop$control$2302,$jscomp$loop$prop$prop$2303:Fa.$jscomp$loop$prop$prop$2303},
ub=mb.next()){var Db=$jscomp.makeIterator(ub.value);ub=Db.next().value;Db=$jscomp.makeIterator(Db.next().value);Db.next();var cb=Db.next().value;Fa.$jscomp$loop$prop$prop$2303=Db.next().value;Fa.$jscomp$loop$prop$control$2302=ra[ub];ld.connect(Fa.$jscomp$loop$prop$control$2302,cb,this,"updateTarget",{updater:function(fb){return function(Eb,qc){fb.$jscomp$loop$prop$control$2302._updating=!0;Eb(fb.$jscomp$loop$prop$prop$2303,qc);fb.$jscomp$loop$prop$control$2302._updating=!1}}(Fa),varMapping:{prop:Fa.$jscomp$loop$prop$prop$2303,
control:Fa.$jscomp$loop$prop$control$2302}})}}},{key:"update",value:function(){var ra=this,Fa=this.target,mb=Fa.borderStyle,ub=Fa.borderColor,Db=Fa.borderRadius,cb=Fa.borderWidth;ld.noUpdate(function(){ra.updateMultiValue("border style selector",mb,"selection");ra.updateMultiValue("border color picker",ub,"colorValue");ra.updateMultiValue("border radius field",Db,"number");ra.updateMultiValue("border width field",cb,"number")})}},{key:"updateTarget",value:function(ra,Fa){this.target[ra]=Fa;this.update()}},
{key:"updateControl",value:function(ra,Fa,mb){ra._updating||ld.obj.equals(ra[Fa],mb)||(ra[Fa]=mb)}},{key:"updateMultiValue",value:function(ra,Fa,mb){var ub=this.ui,Db=ub[this.join(ra)],cb=Db.get("multi value indicator"),fb=ld.obj.values(Fa).some(function(Eb){return!ld.obj.isFunction(Eb)&&!ld.obj.equals(Eb,Fa.valueOf())});Db.visible=Db.isLayoutable=!fb;if(fb&&cb.visible!=fb)ld.once(cb,"onMouseDown",Db,mb,{converter:function(){return Fa.valueOf()},varMapping:{value:Fa}});cb.visible=cb.isLayoutable=
fb;this.updateControl(Db,mb,Fa.valueOf());Db=$jscomp.makeIterator(["top","left","bottom","right"]);for(cb=Db.next();!cb.done;cb=Db.next())cb=cb.value,fb=ub[this.join(ra,cb)],this.updateControl(fb,mb,Fa[cb])}},{key:"lower",value:function(ra){return ra.charAt(0).toLowerCase()+ra.slice(1)}},{key:"join",value:function(ra,Fa){return this.lower(ld.string.camelCaseString(ra+(Fa?" "+Fa:"")))}},{key:"unwrap",value:function(ra,Fa,mb){var ub={};ub=(ub[this.lower(ld.string.camelCaseString(ra))]=[ra,Fa,mb],ub);
for(var Db=$jscomp.makeIterator(["top","left","bottom","right"]),cb=Db.next();!cb.done;cb=Db.next()){cb=cb.value;var fb=ra+" "+cb;ub[this.lower(ld.string.camelCaseString(fb))]=[fb,Fa,this.join(mb,cb)]}return ub}},{key:"attachToWorld",value:function(){ld.connect($world,"showHaloFor",this,"focusOn",{garbageCollect:!0})}},{key:"focusOn",value:function(ra){var Fa=this,mb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if(1==ub.nextAddress)return!ra||Fa.isAncestorOf(ra)||Fa.target===ra||
ld.obj.isArray(ra)||(Fa.target=ra),mb=Fa.visible,Fa.visible=!0,ub.yield(Fa.whenRendered(),2);if(3!=ub.nextAddress)return Fa.update(),ub.yield(Fa.whenRendered(),3);Fa.getSubmorphsByStyleClassName("NumberWidget").map(function(Db){return Db.relayout()});Fa.visible=mb;ub.jumpToEnd()})}},{key:"onHoverIn",value:function(ra){this.watchForTarget=!1}},{key:"onHoverOut",value:function(ra){this.watchForTarget=!0}}],[{key:"className",get:function(){return"BorderFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{derived:!0,
serialize:!1,get:function(){return this._uiSpec||(this._uiSpec=Object.assign({},this.unwrap("border style selector","selection","borderStyle"),{},this.unwrap("border color picker","colorValue","borderColor"),{},this.unwrap("border radius field","number","borderRadius"),{},this.unwrap("border width field","number","borderWidth")))}},ui:{initialize:function(){this.setupUI()}}}}}],bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"BorderFormatStyler",version:"0.1.1-16"}}},{start:185,end:5003})}(ld.Morph);Pb=ld.BorderFormatStyler;ld.default=Pb;var Rb=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js");Rb.Morph=Da;Rb.resource=Fb;Rb.arr=tc;Rb.obj=Od;Rb.string=fe;Rb.Path=nc;Rb.connect=kd;Rb.getMastersMenu=td;Rb.resolvedMasters=ke;Pb=function(qb){var bc=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js"),
Ic=bc.hasOwnProperty("MasterComponentControl")&&"function"===typeof bc.MasterComponentControl?bc.MasterComponentControl:bc.MasterComponentControl=function(ra){ra&&ra[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return yd(Ic,qb,[{key:"focusOn",value:function(ra){this.target=ra;this.update()}},{key:"onMouseUp",value:function(ra){var Fa=this,mb,ub,Db,cb,fb,Eb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qc){if(1==qc.nextAddress){"auto master selection"==
ra.targetMorph.name&&(mb="auto");"hover master selection"==ra.targetMorph.name&&(mb="hover");"click master selection"==ra.targetMorph.name&&(mb="click");Fa.refreshButtons();if(!Fa.target)return qc.return();ub=$jscomp.makeIterator(["auto","hover","click"]);for(Db=ub.next();!Db.done;Db=ub.next())cb=Db.value,Fa.target.master&&Fa.target.master[cb]&&!Fa.get(cb+" master checkbox").checked&&Fa.adjustMasterComponent(cb,null);if(!mb)return qc.jumpTo(0);fb=Fa;Eb=fb.openMenu;return qc.yield(Fa.getMastersMenu(mb),
3)}Eb.call(fb,qc.yieldResult,ra);qc.jumpToEnd()})}},{key:"getMastersMenu",value:function(ra){var Fa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(mb){return 1==mb.nextAddress?mb.yield(Promise.all([].concat($jscomp.arrayFromIterable(Object.keys(Rb.resolvedMasters)),[Fa.world().name]).map(function(ub){var Db,cb,fb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Eb){return 1==Eb.nextAddress?(Db=ub,cb=Fa,fb=cb.componentsToMenu,Eb.yield(Rb.resource("styleguide://"+ub+"/").dirList(),
2)):Eb.return([Db,fb.call(cb,Eb.yieldResult,ra)])})})),2):mb.return(mb.yieldResult)})}},{key:"componentsToMenu",value:function(ra,Fa,mb,ub){var Db=this;mb=void 0===mb?null:mb;ub=void 0===ub?1:ub;mb||(mb=ra.map(function(fb){return{name:Rb.arr.last(fb.name.split("/")),path:fb.name.split("/"),value:fb}}));if(0==mb.length||100<ub)return[];var cb=this;return Rb.arr.flatten(Object.entries(Rb.arr.groupBy(mb,function(fb){return fb.path[ub-1]})).map(function(fb){var Eb=$jscomp.makeIterator(fb);fb=Eb.next().value;
Eb=Eb.next().value;var qc=$jscomp.makeIterator(Rb.arr.partition(Eb,function(gc){return gc.path.length<=ub}));Eb=qc.next().value;qc=qc.next().value;fb=[fb,Db.componentsToMenu(null,Fa,qc,ub+1)];return[].concat($jscomp.arrayFromIterable(Eb.map(function(gc){return[gc.name,function(){cb.adjustMasterComponent(Fa,gc.value)}]})),$jscomp.arrayFromIterable(fb[1].length?[fb]:[]))}),1)}},{key:"getComponentSelectionMenu",value:function(ra){var Fa=this,mb,ub,Db,cb,fb,Eb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qc){if(1==
qc.nextAddress)return mb=Fa.world().metadata.commit.name,ub=Rb.resource("styleguide://"+mb+"/"),qc.yield(ub.dirList(),2);if(3!=qc.nextAddress)return Db=qc.yieldResult,qc.yield(Rb.resource("styleguide://System/").dirList(),3);cb=qc.yieldResult;fb=Fa.componentsToMenu(Db,ra);Eb=Fa.componentsToMenu(cb,ra);return qc.return([].concat($jscomp.arrayFromIterable(0<fb.length?[].concat($jscomp.arrayFromIterable(fb),[{isDivider:!0}]):[]),$jscomp.arrayFromIterable(Eb)))})}},{key:"adjustMasterComponent",value:function(ra,
Fa){if(this.target.master)this.target.master[ra]=Fa;else if(Fa){var mb={};this.target.master=(mb[ra]=Fa,mb)}ra=this.target.master;Fa=ra.hover;mb=ra.click;ra.auto||Fa||mb||(this.target.master=null);this.update();this.target.withAllSubmorphsDo(function(ub){return delete ub._parametrizedProps});this.target.requestMasterStyling()}},{key:"componentsToMenu",value:function(ra,Fa,mb,ub){var Db=this;mb=void 0===mb?null:mb;ub=void 0===ub?1:ub;mb||(mb=ra.map(function(fb){return{name:Rb.arr.last(fb.name.split("/")),
path:fb.name.split("/"),value:fb}}));if(0==mb.length||100<ub)return[];var cb=this;return Rb.arr.flatten(Object.entries(Rb.arr.groupBy(mb,function(fb){return fb.path[ub-1]})).map(function(fb){var Eb=$jscomp.makeIterator(fb);fb=Eb.next().value;Eb=Eb.next().value;var qc=$jscomp.makeIterator(Rb.arr.partition(Eb,function(gc){return gc.path.length<=ub}));Eb=qc.next().value;qc=qc.next().value;fb=[fb,Db.componentsToMenu(null,Fa,qc,ub+1)];return[].concat($jscomp.arrayFromIterable(Eb.map(function(gc){return[gc.name,
function(){cb.adjustMasterComponent(Fa,gc.value)}]})),$jscomp.arrayFromIterable(fb[1].length?[fb]:[]))}),1)}},{key:"update",value:function(){if(this.target){for(var ra=$jscomp.makeIterator(["auto","hover","click"]),Fa=ra.next();!Fa.done;Fa=ra.next()){Fa=Fa.value;var mb=this.getSubmorphNamed(Fa+" master selection"),ub=this.getSubmorphNamed(Fa+" master checkbox");Rb.Path(["master",Fa]).get(this.target)?ub.checked=!0:ub.checked=!1;mb.label=Rb.string.truncateLeft(Rb.Path(["master",Fa,"name"]).get(this.target)||
"select master",15,"...")}this.refreshButtons()}}},{key:"refreshButtons",value:function(){for(var ra=$jscomp.makeIterator(["auto","hover","click"]),Fa=ra.next();!Fa.done;Fa=ra.next()){Fa=Fa.value;var mb=this.getSubmorphNamed(Fa+" master selection"),ub=this.getSubmorphNamed(Fa+" master checkbox");mb=mb.deactivated=!ub.checked;this.getSubmorphNamed(Fa+" master selection").opacity=mb?.5:1}ra=this.getSubmorphNamed("overridden props list");ra.items=this.getOverriddenProps();this.getSubmorphNamed("clear overridden prop button").deactivated=
!ra.selection}},{key:"getMasterForTarget",value:function(){if(this.target.isMorph)return[this.target].concat($jscomp.arrayFromIterable(this.target.ownerChain())).map(function(ra){return ra.master}).find(Boolean)}},{key:"clearSelectedProperty",value:function(){var ra=this.getSubmorphNamed("overridden props list").selection;this.getMasterForTarget().clearOverriddenPropertiesFor(this.target,[ra]);this.refreshButtons()}},{key:"getOverriddenProps",value:function(){var ra=this.getMasterForTarget();return ra&&
ra._overriddenProps?(ra=ra._overriddenProps.get(this.target))?Object.keys(ra):[]:[]}}],[{key:"className",get:function(){return"MasterComponentControl"}}],bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MasterComponentControl",version:"0.1.1-108"}}},{start:315,end:6096})}(Rb.Morph);Pb=Rb.MasterComponentControl;Rb.default=Pb}}});
