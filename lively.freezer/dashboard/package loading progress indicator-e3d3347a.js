System.register(["./__root_module__-cd530690.js","kld-intersections"],function(){var Da,zb,Rb,kc,dc,ke,hd,$d,md;return{setters:[function(Qc){Da=Qc.ah;zb=Qc.bO;Rb=Qc.au;kc=Qc.a2;dc=Qc.ao;ke=Qc.P;hd=Qc._;$d=Qc.as;md=Qc.ar},function(){}],execute:function(){var Qc=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");Qc.Morph=Da;Qc.stringToEasing=zb;Qc.easings=Rb;Qc.pt=kc;Qc.num=dc;Qc.Path=ke;Qc.promise=hd;Qc.fun=$d;var xd=function(Od){var ge=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),
Ud=ge.hasOwnProperty("ModuleProgress")&&"function"===typeof ge.ModuleProgress?ge.ModuleProgress:ge.ModuleProgress=function(nd){nd&&nd[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return md(Ud,Od,[{key:"relayout",value:function(){!this.isComponent&&Qc.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var nd=this.getAllNamed(/stage/);this.stages=new Map(nd.map(function(Za){return[Za,
"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(Za){Za._cachedTextBounds=null;Za.fit()})}},{key:"updateProgressBar",value:function(){if(this._lastWidth){this.relayout();var nd=this.get("progress path"),Za=Qc.stringToEasing(Qc.easings.inOutExpo)(Qc.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);nd.width=Qc.num.interpolate(Za,this._lastWidth,this._currentProgress)}}},{key:"fastLoadTest",value:function(){var nd=this,Za,Cb,bc,ic;return $jscomp.asyncExecutePromiseGeneratorProgram(function(id){1==
id.nextAddress&&(nd.reset(),Za="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),Cb=$jscomp.makeIterator(Za),bc=Cb.next());if(3!=id.nextAddress){if(bc.done)return id.jumpTo(0);ic=bc.value;nd.finishPackage({packageName:ic,loaded:!0});return id.yield(Qc.promise.delay(200),3)}bc=Cb.next();return id.jumpTo(2)})}},{key:"finishPackage",value:function(nd){var Za=this,Cb=nd.frozen,bc=nd.loaded;nd="stage "+nd.packageName.replace("lively.",
"");nd=this.get(nd);Cb&&this.stages.set(nd,"frozen");bc&&this.stages.set(nd,"loaded");Qc.fun.debounceNamed("update progress",200,function(){Za.updateProgressVisualization()})()}},{key:"updateProgressVisualization",value:function(){var nd=this,Za=this.getSubmorphNamed("progress path"),Cb=this.getAllNamed(/stage/),bc=Cb[0];Cb.forEach(function(ic){var id=ic.get("checkmark"),fe=ic.get("frozen indicator"),Zb=ic.get("icon");ic=nd.stages.get(ic);if("not loaded"!=ic){bc=id;if("loaded"==ic){if(id.visible)return;
id.animate({duration:300,visible:!0})}if("frozen"==ic){if(fe.visible)return;fe.animate({duration:300,visible:!0})}Zb.opacity=1}else id.visible=!1,fe.visible=!1,Zb.opacity=.2});Cb=this.localizePointFrom(Qc.pt(-20,0),bc).x;Cb=Math.max(20,Cb-Za.left);Za.visible=20==Cb?!1:!0;this._lastWidth=Za.width;this._timeStamp=Date.now();this._currentProgress=Cb}}],[{key:"className",get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],initialize:function(){var nd=
this;this.whenRendered().then(function(){nd.reset()})}}}}}],ge,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ModuleProgress",version:"0.1.1-108"}}},{start:192,end:3478})}(Qc.Morph);xd=Qc.ModuleProgress;Qc.default=xd}}});