System.register("./__root_module__-6d2e743c.js kld-intersections ./index-ecae4ac2.js ./color-picker-69961ddf.js ./index-64e9ba4b.js ./index-22a2433b.js ./index-9e043a78.js".split(" "),function(){var Ma,rb,Db,hc,Kb,id,Zc,yd,Kc,sc,bd,hd,se,xe,ne,Rc,Pd,Hb,Gc,ud,Vc,Id,ie,Fb,Ac,$c,Bc,vd,pb,lb,Zb,Mb,ub,rc;return{setters:[function(Ua){Ma=Ua.f;rb=Ua.c;Db=Ua._;hc=Ua.ay;Kb=Ua.b;id=Ua.O;Zc=Ua.h;yd=Ua.ah;Kc=Ua.ad;sc=Ua.m;bd=Ua.M;hd=Ua.I;se=Ua.p;xe=Ua.R;ne=Ua.C;Rc=Ua.d;Pd=Ua.a1;Hb=Ua.o;Gc=Ua.bJ;ud=Ua.bG;
Vc=Ua.a7;Id=Ua.i;ie=Ua.t;Fb=Ua.e;Ac=Ua.bD;$c=Ua.g;Bc=Ua.bQ;vd=Ua.r;pb=Ua.P;lb=Ua.bR;Zb=Ua.bS},function(){},function(Ua){Mb=Ua.I},function(Ua){ub=Ua.a;rc=Ua.S},function(){},function(){},function(){}],execute:function(){var Ua=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js");Ua.fun=Ma;Ua.string=rb;Ua.obj=Db;Ua.properties=hc;Ua.arr=Kb;Ua.Text=id;Ua.config=Zc;Ua.HorizontalLayout=yd;Ua.VerticalLayout=Kc;Ua.morph=sc;Ua.Morph=bd;Ua.Icon=hd;Ua.pt=se;Ua.Rectangle=xe;Ua.Color=ne;Ua.connect=Rc;Ua.disconnect=
Pd;Ua.once=Hb;Ua.noUpdate=Gc;Ua.ColorPicker=ub;Ua.DropDownList=ud;Ua.loadObjectFromPartsbinFolder=Vc;Ua.cachedControls=new WeakMap;var Lb=function(Ub){var Ga=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js"),jb=Ga.hasOwnProperty("RichTextControl")&&"function"===typeof Ga.RichTextControl?Ga.RichTextControl:Ga.RichTextControl=function(X){X&&X[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Id(jb,Ub,[{key:"toggleButton",value:function(X,
ha){X.master=ha?{auto:this.selectedButtonMaster}:{auto:this.buttonMaster}}},{key:"onLoad",value:function(){this.reset()}},{key:"reset",value:function(){var X=this.ui.fontSelection;X.items=Ua.arr.uniq([].concat($jscomp.arrayFromIterable(this.env.fontMetric.supportedFonts),$jscomp.arrayFromIterable(Ua.config.text.basicFontItems)));this.target&&(X.selection=this.target.fontFamily||X.items[0].value,Ua.connect(this.target,"selectionChange",this,"update",{garbageCollect:!0}))}},{key:"alignAtTarget",value:function(X){X=
void 0===X?!!this.world():X;var ha=this.target,Fa=ha.world()||$world,Ja=this.globalBounds();ha=(ha.selection.isEmpty()?ha.globalBounds():ha.getGlobalTransform().transformRectToRect(ha.selectionBounds().translatedBy(ha.scroll.negated()))).bottomCenter().subPt(Ja.topCenter());Fa=Fa.visibleBounds().translateForInclusion(Ja.translatedBy(ha)).topLeft().subPt(Ja.topLeft());Fa=this.position.addPt(Fa);X?this.animate({duration:300,position:Fa}):this.position=Fa}},{key:"removeFocus",value:function(){var X=
this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(ha){return ha.targetObj===X&&ha.disconnect()});this.autoRemove&&this.target&&(this.remove(),this.target=null)}},{key:"focusOn",value:function(X,ha){ha=void 0===ha?!0:ha;var Fa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){if(1==Ja.nextAddress)return Fa.target&&Ua.disconnect(Fa.target,"selectionChange",Fa,"update"),Fa.target=X,Fa.reset(),Fa.update(),Ja.yield(Fa.whenRendered(),
2);Fa.ui.fontSizeField.relayout();ha&&Fa.alignAtTarget();Ja.jumpToEnd()})}},{key:"setupConnections",value:function(){Ua.connect(this.ui.paddingField,"number",this,"setPadding");Ua.connect(this.ui.paddingFieldTop,"number",this,"setPaddingTop");Ua.connect(this.ui.paddingFieldBottom,"number",this,"setPaddingBottom");Ua.connect(this.ui.paddingFieldLeft,"number",this,"setPaddingLeft");Ua.connect(this.ui.paddingFieldRight,"number",this,"setPaddingRight")}},{key:"update",value:function(){var X=this,ha=this.target,
Fa=this.updateSpec,Ja=ha.selection;Ja=!ha.readOnly&&Ja?Ja.isEmpty()?ha.textAttributeAt(Ja.start):ha.getStyleInRange(Ja):{};var Ca=this.managedProps,ra=Ua.obj.select(ha,Ca);ha=$jscomp.makeIterator(Object.entries(Ua.obj.select(Ja||{},Ca)));for(Ja=ha.next();!Ja.done;Ja=ha.next())Ca=$jscomp.makeIterator(Ja.value),Ja=Ca.next().value,Ca=Ca.next().value,"undefined"!==typeof Ca&&(ra[Ja]=Ca);Ua.noUpdate(function(){for(var tb=$jscomp.makeIterator(Object.entries(X.ui)),Na=tb.next();!Na.done;Na=tb.next()){var lc=
$jscomp.makeIterator(Na.value);Na=lc.next().value;lc=lc.next().value;if(Fa[Na])Fa[Na](ra,lc)}})}},{key:"relayout",value:function(){}},{key:"changeAttributeInSelectionOrMorph",value:function(X,ha){var Fa=this.target,Ja=Fa.selection;Fa.isLabel||Ja&&Ja.isEmpty()?Fa[X]="function"===typeof ha?ha(Fa[X]):ha:(Fa.undoManager.group(),Fa.changeStyleProperty(X,function(Ca){return"function"===typeof ha?ha(Ca):ha}),Fa.undoManager.group())}},{key:"changeFont",value:function(X){var ha=this,Fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){if(1==
Ja.nextAddress)return ha._last=X,(Fa="custom..."===X)?Ja.yield($world.prompt("Enter font family name",{requester:ha.target,historyId:"lively.morphic-rich-text-font-names",useLastInput:!0}),3):Ja.jumpTo(2);if(2!=Ja.nextAddress&&(X=Ja.yieldResult,!X))return Ja.return();ha.changeAttributeInSelectionOrMorph("fontFamily",X);Ja.jumpToEnd()})}},{key:"setPadding",value:function(X){this.target.padding=Ua.Rectangle.inset(X)}},{key:"setPaddingTop",value:function(X){var ha=this.target.padding;this.target.padding=
Ua.Rectangle.inset(ha.left(),X,ha.right(),ha.bottom())}},{key:"setPaddingLeft",value:function(X){var ha=this.target.padding;this.target.padding=Ua.Rectangle.inset(X,ha.top(),ha.right(),ha.bottom())}},{key:"setPaddingRight",value:function(X){var ha=this.target.padding;this.target.padding=Ua.Rectangle.inset(ha.left(),ha.top(),X,ha.bottom())}},{key:"setPaddingBottom",value:function(X){var ha=this.target.padding;this.target.padding=Ua.Rectangle.inset(ha.left(),ha.top(),ha.right(),X)}},{key:"setLineWrapping",
value:function(X){this.target.lineWrapping=X}},{key:"changeFontWeight",value:function(X){this.changeAttributeInSelectionOrMorph("fontWeight",X)}},{key:"changeTextAlign",value:function(X){this.changeAttributeInSelectionOrMorph("textAlign",X)}},{key:"changeFontColor",value:function(X){this.changeAttributeInSelectionOrMorph("fontColor",X)}},{key:"changeFontSize",value:function(X){this.changeAttributeInSelectionOrMorph("fontSize",X)}},{key:"changeFixedWidth",value:function(X){this.target.fixedWidth=X}},
{key:"changeFixedHeight",value:function(X){this.target.fixedHeight=X}},{key:"changeLink",value:function(){var X=this,ha,Fa,Ja,Ca,ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(tb){if(1==tb.nextAddress)return ha=X.target,Fa=ha.selection,Ja=ha.getStyleInRange(Fa),Ca=Ja.link,tb.yield(X.world().prompt("Set link",{input:Ca||"https://"}),2);ra=tb.yieldResult;ha.undoManager.group();ha.setStyleInRange({link:ra||void 0},Fa);ha.undoManager.group();X.autoRemove&&X.remove();tb.jumpToEnd()})}},
{key:"toggleUnderline",value:function(){this.changeAttributeInSelectionOrMorph("textDecoration",function(X){return"underline"===X?"none":"underline"})}},{key:"toggleItalic",value:function(){this.changeAttributeInSelectionOrMorph("fontStyle",function(X){return"italic"===X?"normal":"italic"})}},{key:"toggleBold",value:function(){this.changeAttributeInSelectionOrMorph("fontWeight",function(X){return"bold"===X||"700"===X?"normal":"bold"})}},{key:"copyStyle",value:function(){var X=this,ha=this.target,
Fa=this.ui.applyStyleButton;ha=ha.selection.isEmpty()?ha.defaultTextStyle:ha.getStyleInRange(ha.selection);var Ja=JSON.stringify(ha,null,2);this.constructor.copiedStyle=ha;Fa.tooltip="paste style\n"+Ja;this.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/plain",data:Ja},{type:"application/morphic-text-style",styleString:Ja}]).then(function(){return X.setStatusMessage("Copied style\n"+Ja)}).catch(function(Ca){return X.showError(Ca)})}},{key:"pasteStyle",value:function(){var X=this,ha=this.target,
Fa=this.constructor.copiedStyle;ha.selection.isEmpty()?Object.assign(ha,Fa):ha.selections.forEach(function(Ja){return ha.addTextAttribute(X.constructor.copiedStyle,Ja)});this.update()}},{key:"clearStyle",value:function(){var X=this.target;X.selections.forEach(function(ha){return X.resetStyleInRange(ha)});this.update()}},{key:"configureRichTextOptions",value:function(){this.getSubmorphNamed("config panel")&&this.getSubmorphNamed("config panel").remove();var X=this.defaultSpec,ha=this.uiSpec;X=this.addMorph({name:"config panel",
layout:new Ua.VerticalLayout({spacing:5}),epiMorph:!0,submorphs:[].concat($jscomp.arrayFromIterable(Object.keys(X).map(function(Fa){var Ja=ha.rows.some(function(Ca){return Ca.some(function(ra){return ra===Fa})});return{type:"labeledcheckbox",label:Fa,name:Fa,checked:Ja}})),[{layout:new Ua.HorizontalLayout({spacing:3}),submorphs:[{type:"button",name:"OK button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}])});X.center=this.innerBounds().center();Ua.connect(X.getSubmorphNamed("OK button"),
"fire",this,"configureAccepted");Ua.connect(X.getSubmorphNamed("cancel button"),"fire",this,"configureCanceled")}},{key:"configureAccepted",value:function(){var X=this.getSubmorphNamed("config panel");X&&(X.remove(),X.submorphs.filter(function(ha){return"LabeledCheckBox"===ha.constructor.name}))}},{key:"configureCanceled",value:function(){var X=this.getSubmorphNamed("config panel");X&&X.remove()}},{key:"close",value:function(){var X=this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(ha){return ha.targetObj===
X&&ha.disconnect()});this.remove()}},{key:"alwaysTargetFocusedMorph",value:function(){this.startStepping(1500,"updateTarget")}},{key:"updateTarget",value:function(){var X=this.world();X&&(X=X.focusedMorph)&&(X.isLabel||X.isText)&&!this.isAncestorOf(X)&&this.target!==X&&this.focusOn(X,!1)}},{key:"onMouseUp",value:function(X){var ha=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return Fa.yield(ha.whenRendered(),2);ha.update();Fa.jumpToEnd()})}},{key:"attachToWorld",
value:function(){Ua.connect($world,"onMouseDown",this,"updateTarget",{garbageCollect:!0})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RichTextControl"}},{key:"properties",get:function(){return{autoRemove:{defaultValue:!1},target:{},toggleColor:{},buttonMaster:{defaultValue:"styleguide://System/dark button"},selectedButtonMaster:{defaultValue:"styleguide://SystemIDE/selected button"},managedProps:{readOnly:!0,get:function(){return"fontFamily fontWeight fontSize fontStyle isText fontColor textAlign link textDecoration fixedWidth fixedHeight lineWrapping padding".split(" ")}},
updateSpec:{get:function(){var X=this;return Object.assign({fontSelection:function(ha,Fa){var Ja=ha.fontFamily;(ha=Ja&&Fa.items.find(function(Ca){return Ca.value.toLowerCase()===Ja.toLowerCase()}))?Fa.selection=ha.value:Ja&&(Fa.items=Fa.items.concat({isListItem:!0,label:[Ja,{fontFamily:Ja}],value:Ja}),Fa.selection=Ua.arr.last(Fa.items))},fontWeightSelection:function(ha,Fa){Fa.selection="normal"==ha.fontWeight?"Medium":ha.fontWeight?Ua.string.capitalize(ha.fontWeight):"Medium"},boldButton:function(ha,
Fa){X.toggleButton(Fa,"bold"===ha.fontWeight)},italicButton:function(ha,Fa){X.toggleButton(Fa,"italic"===ha.fontStyle)},underlineButton:function(ha,Fa){X.toggleButton(Fa,"underline"===ha.textDecoration)},linkButton:function(ha,Fa){X.toggleButton(Fa,!!ha.link)},colorPicker:function(ha,Fa){Fa.colorValue=ha.fontColor},fontSizeField:function(ha,Fa){Fa.number=ha.fontSize},fixedWidthControl:function(ha,Fa){ha.isText?Fa.enable():Fa.disable();Fa.checked=ha.fixedWidth},fixedHeightControl:function(ha,Fa){ha.isText?
Fa.enable():Fa.disable();Fa.checked=ha.fixedHeight},lineWrappingControl:function(ha,Fa){var Ja=$jscomp.makeIterator(Fa.submorphs);Fa=Ja.next().value;Ja=Ja.next().value;Fa.checked=!!ha.lineWrapping;ha.isText?Fa.enable():Fa.disable();Ja.deactivated=!ha.lineWrapping;Ja.deactivated?Ja.opacity=.5:(Ja.opacity=1,Ja.selection=ha.lineWrapping)},paddingControl:function(ha,Fa){var Ja=ha.padding,Ca=Ja.left();ha=Ja.top();var ra=Ja.right();Ja=Ja.bottom();var tb=!Ua.arr.every([Ca,ha,ra,Ja],function(Na){return Na==
Ca});Fa.get("multi value indicator").visible=tb;Ua.connect(Fa.get("multi value indicator"),"onMouseDown",Fa.get("padding field"),"number",{converter:"() => left",varMapping:{left:Ca}});Fa.get("padding field").number=Ca;Fa.get("padding field").visible=!tb;try{Fa.get("padding field top").number=ha,Fa.get("padding field left").number=Ca,Fa.get("padding field right").number=ra,Fa.get("padding field bottom").number=Ja}catch(Na){}}},["left","center","right","block"].reduce(function(ha,Fa){ha[Fa+"Align"]=
function(Ja,Ca){Ca.deactivated=!Ja.isText;X.toggleButton(Ca,Ja.textAlign==Fa)};return ha},{}))}},ui:{get:function(){var X=this,ha={fontSelection:"font selection",fontWeightSelection:"font weight selection",boldButton:"bold button",italicButton:"italic button",underlineButton:"underline button",linkButton:"link button",leftAlign:"left align",centerAlign:"center align",rightAlign:"right align",blockAlign:"block align",fontSizeField:"font size field",colorPicker:"color picker",copyStyleButton:"copy style",
applyStyleButton:"apply style",removeStyleButton:"remove style",fixedHeightControl:"fixed height control",fixedWidthControl:"fixed width control",lineWrappingControl:"line wrapping control",paddingControl:"padding control",paddingField:"padding field",paddingFieldTop:"padding field top",paddingFieldLeft:"padding field left",paddingFieldRight:"padding field right",paddingFieldBottom:"padding field bottom"};return Ua.obj.extract(ha,Ua.obj.keys(ha),function(Fa,Ja){return X.getSubmorphNamed(Ja)})}}}}},
{key:"openDebouncedFor",value:function(X){var ha=X.selection;if(ha.isEmpty()){var Fa=Ua.cachedControls.get(X);Fa&&(Fa.update(),Fa.alignAtTarget(),Fa.world()||X.world().addMorph(Fa))}else Ua.fun.debounceNamed(X.id+"openRichTextControl",600,function(){var Ja=Ua.cachedControls.get(X);ha.isEmpty()?Ja&&Ja.removeFocus():(Ja&&Ja.world()||(Ja=new Ua.RichTextControl,Ua.cachedControls.set(X,Ja)),X.world().addMorph(Ja),Ja.focusOn(X,!0),Ja.alwaysTargetFocusedMorph())})()}},{key:"openFor",value:function(X){var ha=
Ua.cachedControls.get(X);ha?ha.update():(ha=new Ua.RichTextControl,Ua.cachedControls.set(X,ha),ha.focusOn(X,!0),ha.alwaysTargetFocusedMorph());ha.alignAtTarget();ha.world()||X.world().addMorph(ha);return ha}}],Ga,{pathInPackage:function(){return"text/ui.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:636,end:17713})}(Ua.Morph);Ua.RichTextControl=
Lb;Ua.RichTextControl=Lb;Ua.RichTextControl=Lb;var mb=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js");mb.Morph=bd;mb.touchInputDevice=ie;mb.morph=sc;mb.Icon=hd;mb.easings=Fb;mb.pt=se;mb.Color=ne;mb.fun=Ma;mb.connect=Rc;mb.TreeData=Ac;Lb=function(Ub){var Ga=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),jb=Ga.hasOwnProperty("SettingsTree")&&"function"===typeof Ga.SettingsTree?Ga.SettingsTree:Ga.SettingsTree=function(X){X&&X[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Id(jb,Ub,[{key:"display",value:function(X){return X.panel?[X.panel,{}]:X.name}},{key:"collapse",value:function(X,ha){X.isCollapsed=ha}},{key:"isCollapsed",value:function(X){return X.isCollapsed}},{key:"isLeaf",value:function(X){return!X.children}},{key:"getChildren",value:function(X){var ha=this;return X===this.root?X.children.filter(function(Fa){return ha.target&&Fa.applicabilityCheck?eval(Fa.applicabilityCheck)(ha.target):!0}):X.children}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"SettingsTree"}},{key:"default",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" ",{}].concat($jscomp.arrayFromIterable(mb.Icon.textAttribute("font")),[" Rich Text",{fontWeight:"bold"}]),children:[{panel:mb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(mb.Icon.textAttribute("image")),[" Shape",{fontWeight:"bold"}]),children:[{panel:mb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(mb.Icon.textAttribute("border-style")),
[" Border",{paddingLeft:"2px",fontWeight:"bold"}]),children:[{panel:mb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(mb.Icon.textAttribute("grip-vertical")),[" Layout",{paddingLeft:"4px",fontWeight:"bold"}]),children:[{panel:mb.morph({})}]}]})}},{key:"border",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" Type    ",{},mb.morph({height:20}),{}],children:[{panel:mb.morph({})}]},{isCollapsed:!1,name:[" Color   ",{},mb.morph({height:20}),
{}],children:[{panel:mb.morph({})}]},{isCollapsed:!1,name:[" Width  ",{},mb.morph({height:20}),{}],children:[{panel:mb.morph({})}]},{isCollapsed:!1,name:[" Radius ",{},mb.morph({height:20}),{}],children:[{panel:mb.morph({})}]}]})}}],Ga,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-67"}}},{start:284,
end:2663})}(mb.TreeData);mb.SettingsTree=Lb;mb.SettingsTree=Lb;mb.SettingsTree=Lb;Lb=function(Ub){var Ga=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),jb=Ga.hasOwnProperty("StylingSideBar")&&"function"===typeof Ga.StylingSideBar?Ga.StylingSideBar:Ga.StylingSideBar=function(X){X&&X[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Id(jb,Ub,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"collapseAll",value:function(){this.getSubmorphsByStyleClassName("Tree").forEach(function(X){X.nodes.forEach(function(ha){return X.treeData.root==
ha?X.uncollapse(ha):X.collapse(ha)})})}},{key:"onWorldResize",value:function(X){X=void 0===X?!0:X;if(this.respondsToVisibleWindow){var ha=$world.visibleBounds(),Fa=navigator.standalone&&mb.touchInputDevice?25:0,Ja=this.getSubmorphNamed("horizontal resizer");this.height=ha.height-Fa;this.top=Fa+ha.top();Ja.height=this.height;Ja.left=0;Ja.top=0;X&&(this.visible?this.topRight=ha.topRight():this.topLeft=ha.topRight())}}},{key:"toggle",value:function(X){var ha=this,Fa,Ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){switch(Ca.nextAddress){case 1:Fa=
$world.visibleBounds().withTopLeft(mb.pt(0,0));Ja=navigator.standalone&&mb.touchInputDevice?25:0;ha.height=Fa.height-Ja;ha.top=Ja+Fa.top();if(X)return $world.addMorph(ha,$world.get("lively top bar")),ha.topLeft=Fa.topRight(),ha.visible=!0,Ca.yield(ha.whenRendered(),5);ha.detachFromWorld($world);return Ca.yield(ha.animate({opacity:0,topLeft:Fa.topRight(),duration:300}),4);case 4:ha.visible=!1;ha.remove();Ca.jumpTo(0);break;case 5:return ha.onWorldResize(!1),Ca.yield(ha.animate({opacity:1,easing:mb.easings.outCirc,
topRight:Fa.topRight(),duration:300}),6);case 6:ha.attachToWorld($world),Ca.jumpToEnd()}})}},{key:"cleanupAnchors",value:function(){for(var X=this.withAllSubmorphsSelect(function(Ca){return Ca.anchors&&Ca.anchors.filter(function(ra){return!ra.id}).length}),ha={},Fa=$jscomp.makeIterator(X),Ja=Fa.next();!Ja.done;ha={$jscomp$loop$prop$m$2768:ha.$jscomp$loop$prop$m$2768},Ja=Fa.next())ha.$jscomp$loop$prop$m$2768=Ja.value,ha.$jscomp$loop$prop$m$2768.anchors.forEach(function(Ca){return function(ra){return!ra.id&&
Ca.$jscomp$loop$prop$m$2768.removeAnchor(ra)}}(ha));return X.length}},{key:"attachToWorld",value:function(X){mb.connect(X,"showHaloFor",this,"focusMorph",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(X){var ha=this;X.attributeConnections.forEach(function(Fa){Fa.targetObj===ha&&Fa.disconnect()})}},{key:"focusMorph",value:function(X){if(!X.isMorph||!X.ownerChain().includes(this)){(X.isLabel||X.isText||X.isButton)&&this.richTextControl.focusOn(X,!1);var ha=this.getSubmorphNamed("style settings tree");
ha.treeData.target=X;ha.update(!0);Object.values(this.controls).forEach(function(Fa){return Fa&&Fa.focusOn(X)})}}},{key:"onHierarchyChange",value:function(){Object.values(this.controls).forEach(function(X){return X&&X.update()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylingSideBar"}},{key:"properties",get:function(){return{controls:{},richTextControl:{},isHaloItem:{get:function(){return!0}}}}}],Ga,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-67"}}},{start:2682,end:5749})}(mb.Morph);Lb=mb.StylingSideBar;mb.default=Lb;var Gb=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js");Gb.Morph=bd;Gb.obj=Db;Gb.string=rb;Gb.connect=Rc;Gb.noUpdate=Gc;Gb.once=Hb;Lb=function(Ub){var Ga=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js"),jb=Ga.hasOwnProperty("ShapeFormatStyler")&&"function"===typeof Ga.ShapeFormatStyler?
Ga.ShapeFormatStyler:Ga.ShapeFormatStyler=function(X){X&&X[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Id(jb,Ub,[{key:Symbol.for("lively-instance-initialize"),value:function(X){Id._get(Object.getPrototypeOf(jb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,X);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var X=this.ui,ha={},Fa=$jscomp.makeIterator(Object.entries(this.uiSpec)),
Ja=Fa.next();!Ja.done;ha={$jscomp$loop$prop$control$2770:ha.$jscomp$loop$prop$control$2770,$jscomp$loop$prop$prop$2771:ha.$jscomp$loop$prop$prop$2771},Ja=Fa.next()){var Ca=$jscomp.makeIterator(Ja.value);Ja=Ca.next().value;Ca=$jscomp.makeIterator(Ca.next().value);Ca.next();var ra=Ca.next().value;ha.$jscomp$loop$prop$prop$2771=Ca.next().value;ha.$jscomp$loop$prop$control$2770=X[Ja];Gb.connect(ha.$jscomp$loop$prop$control$2770,ra,this,"updateTarget",{updater:function(tb){return function(Na,lc){tb.$jscomp$loop$prop$control$2770._updating=
!0;Na(tb.$jscomp$loop$prop$prop$2771,lc);tb.$jscomp$loop$prop$control$2770._updating=!1}}(ha),varMapping:{prop:ha.$jscomp$loop$prop$prop$2771,control:ha.$jscomp$loop$prop$control$2770}})}}},{key:"update",value:function(){var X=this,ha=this.target,Fa=ha.top,Ja=ha.left,Ca=ha.isImage,ra=ha.isLabel,tb=ha.imageUrl,Na=ha.textString,lc=ha.clipMode,kd=ha.fill,Tb=ha.dropShadow,md=ha.opacity,wb=ha.height,je=ha.width;ha=this.ui;var bf=ha.clipModeSelector,Wc=ha.fillPicker,xb=ha.opacityField,ze=ha.shadowPicker,
yb=ha.heightField,nb=ha.widthField,Ha=ha.posXField,R=ha.posYField,xa=ha.imageUrlInput,$a=ha.labelContentInput;Gb.noUpdate(function(){X.updateControl(ze,"shadowValue",Tb);X.updateControl(bf,"selection",lc);X.updateControl(Wc,"colorValue",kd);X.updateControl(xb,"number",md);X.updateControl(yb,"number",wb);X.updateControl(nb,"number",je);X.updateControl(Ha,"number",Ja);X.updateControl(R,"number",Fa);Wc.context=X.target;Ca&&X.updateControl(xa,"input",tb);xa.owner.isLayoutable=xa.owner.visible=!!Ca;ra&&
X.updateControl($a,"input",Na);$a.owner.isLayoutable=$a.owner.visible=!!ra;var Ab=X.getSubmorphNamed("special controls");(Ab.visible=!!ra||!!Ca)?X.height=Ab.bottom:X.height=Ab.top})}},{key:"updateTarget",value:function(X,ha){this.target[X]=ha;this.update()}},{key:"updateControl",value:function(X,ha,Fa){X._updating||Gb.obj.equals(X[ha],Fa)||(X[ha]=Fa)}},{key:"updateMultiValue",value:function(X,ha,Fa){var Ja=this.ui,Ca=Ja[this.join(X)],ra=Ca.get("multi value indicator"),tb=Gb.obj.values(ha).some(function(Na){return!Gb.obj.isFunction(Na)&&
!Gb.obj.equals(Na,ha.valueOf())});ra.left=0;Ca.visible=Ca.isLayoutable=!tb;if(tb&&ra.visible!=tb)Gb.once(ra,"onMouseDown",Ca,Fa,{converter:function(){return ha.valueOf()},varMapping:{value:ha}});ra.visible=ra.isLayoutable=tb;ra.left=tb?200:0;this.updateControl(Ca,Fa,ha.valueOf());Ca=$jscomp.makeIterator(["top","left","bottom","right"]);for(ra=Ca.next();!ra.done;ra=Ca.next())ra=ra.value,tb=Ja[this.join(X,ra)],this.updateControl(tb,Fa,ha[ra])}},{key:"lower",value:function(X){return X.charAt(0).toLowerCase()+
X.slice(1)}},{key:"join",value:function(X,ha){return this.lower(Gb.string.camelCaseString(X+(ha?" "+ha:"")))}},{key:"unwrap",value:function(X,ha,Fa){var Ja={};Ja=(Ja[this.lower(Gb.string.camelCaseString(X))]=[X,ha,Fa],Ja);for(var Ca=$jscomp.makeIterator(["top","left","bottom","right"]),ra=Ca.next();!ra.done;ra=Ca.next()){ra=ra.value;var tb=X+" "+ra;Ja[this.lower(Gb.string.camelCaseString(tb))]=[tb,ha,this.join(Fa,ra)]}return Ja}},{key:"focusOn",value:function(X){var ha=this,Fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){if(1==
Ja.nextAddress)return!X||ha.isAncestorOf(X)||ha.target===X||Gb.obj.isArray(X)||(ha.target=X),Fa=ha.visible,ha.visible=!0,Ja.yield(ha.whenRendered(),2);if(3!=Ja.nextAddress)return ha.update(),Ja.yield(ha.whenRendered(),3);ha.getSubmorphsByStyleClassName("NumberWidget").map(function(Ca){return Ca.relayout()});ha.visible=Fa;Ja.jumpToEnd()})}},{key:"removeFocus",value:function(){this.target=null}},{key:"onHoverIn",value:function(X){this.watchForTarget=!1}},{key:"onHoverOut",value:function(X){this.watchForTarget=
!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShapeFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{get:function(){return this._uiSpec||(this._uiSpec={clipModeSelector:["clip mode selector","selection","clipMode"],fillPicker:["fill picker","colorValue","fill"],shadowPicker:["shadow picker","shadowValue","dropShadow"],opacityField:["opacity field","number","opacity"],heightField:["height field","number","height"],widthField:["width field","number","width"],posXField:["pos x field",
"number","left"],posYField:["pos y field","number","top"],imageUrlInput:["image url input","inputAccepted","imageUrl"],labelContentInput:["label content input","inputAccepted","textString"]})}},ui:{readOnly:!0,get:function(){var X=this,ha=this.uiSpec;return this._ui||(this._ui=Gb.obj.extract(ha,Gb.obj.keys(ha),function(Fa,Ja){Fa=$jscomp.makeIterator(Ja).next().value;return X.getSubmorphNamed(Fa)}))}}}}}],Ga,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeFormatStyler",version:"0.1.1-158"}}},{start:176,end:5822})}(Gb.Morph);Lb=Gb.ShapeFormatStyler;Gb.default=Lb;var vc=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js");vc.Morph=bd;vc.ShadowPopover=rc;vc.connect=Rc;vc.signal=$c;Lb=function(Ub){var Ga=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js"),jb=Ga.hasOwnProperty("ShadowWidget")&&"function"===typeof Ga.ShadowWidget?Ga.ShadowWidget:
Ga.ShadowWidget=function(X){X&&X[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Id(jb,Ub,[{key:"onHoverIn",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:1,duration:200})}},{key:"onHoverOut",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(X){this.openPopover()}},{key:"update",value:function(X){var ha=this.submorphs[0];
ha&&(ha.dropShadow=X)}},{key:"openPopover",value:function(){var X=this,ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return ha=new vc.ShadowPopover({hasFixedPosition:!!X.ownerChain().find(function(Ja){return Ja.hasFixedPosition}),shadowValue:X.shadowValue}),Fa.yield(ha.fadeIntoWorld(X.globalBounds().center()),2);vc.connect(ha,"shadowValue",X,"shadowValue");vc.connect(X,"shadowValue",X,"update");vc.signal(X,"openWidget",ha);Fa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{set:function(X){this.setProperty("shadowValue",X);this.update(X)}}}}}],Ga,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShadowWidget",version:"0.1.1-7"}}},{start:194,end:1231})}(vc.Morph);Lb=vc.ShadowWidget;vc.default=Lb;var Lc=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js");
Lc.Morph=bd;Lc.obj=Db;Lc.string=rb;Lc.connect=Rc;Lc.noUpdate=Gc;Lc.once=Hb;Lb=function(Ub){var Ga=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js"),jb=Ga.hasOwnProperty("BorderFormatStyler")&&"function"===typeof Ga.BorderFormatStyler?Ga.BorderFormatStyler:Ga.BorderFormatStyler=function(X){X&&X[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Id(jb,Ub,[{key:"setupUI",value:function(){var X=this;this.getSubmorphsByStyleClassName("NumberWidget").map(function(ha){var Fa=
Lc.string.camelCaseString(ha.name);Fa=Fa[0].toLowerCase()+Fa.slice(1);X.ui[Fa]=ha})}},{key:"cleanupAnchors",value:function(){var X=this.withAllSubmorphsSelect(function(Ja){return Ja.anchors&&Ja.anchors.filter(function(Ca){return!Ca.id})}),ha={};X=$jscomp.makeIterator(X);for(var Fa=X.next();!Fa.done;ha={$jscomp$loop$prop$m$2773:ha.$jscomp$loop$prop$m$2773},Fa=X.next())ha.$jscomp$loop$prop$m$2773=Fa.value,ha.$jscomp$loop$prop$m$2773.anchors.forEach(function(Ja){return function(Ca){return!Ca.id&&Ja.$jscomp$loop$prop$m$2773.removeAnchor(Ca)}}(ha))}},
{key:Symbol.for("lively-instance-initialize"),value:function(X){Id._get(Object.getPrototypeOf(jb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,X);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var X=this.ui,ha={},Fa=$jscomp.makeIterator(Object.entries(this.uiSpec)),Ja=Fa.next();!Ja.done;ha={$jscomp$loop$prop$control$2775:ha.$jscomp$loop$prop$control$2775,$jscomp$loop$prop$prop$2776:ha.$jscomp$loop$prop$prop$2776},Ja=Fa.next()){var Ca=
$jscomp.makeIterator(Ja.value);Ja=Ca.next().value;Ca=$jscomp.makeIterator(Ca.next().value);Ca.next();var ra=Ca.next().value;ha.$jscomp$loop$prop$prop$2776=Ca.next().value;ha.$jscomp$loop$prop$control$2775=X[Ja];Lc.connect(ha.$jscomp$loop$prop$control$2775,ra,this,"updateTarget",{updater:function(tb){return function(Na,lc){tb.$jscomp$loop$prop$control$2775._updating=!0;Na(tb.$jscomp$loop$prop$prop$2776,lc);tb.$jscomp$loop$prop$control$2775._updating=!1}}(ha),varMapping:{prop:ha.$jscomp$loop$prop$prop$2776,
control:ha.$jscomp$loop$prop$control$2775}})}}},{key:"update",value:function(){var X=this,ha=this.target,Fa=ha.borderStyle,Ja=ha.borderColor,Ca=ha.borderRadius,ra=ha.borderWidth;Lc.noUpdate(function(){X.updateMultiValue("border style selector",Fa,"selection");X.updateMultiValue("border color picker",Ja,"colorValue");X.updateMultiValue("border radius field",Ca,"number");X.updateMultiValue("border width field",ra,"number")})}},{key:"updateTarget",value:function(X,ha){this.target[X]=ha;this.update()}},
{key:"updateControl",value:function(X,ha,Fa){X._updating||Lc.obj.equals(X[ha],Fa)||(X[ha]=Fa)}},{key:"updateMultiValue",value:function(X,ha,Fa){var Ja=this.ui,Ca=Ja[this.join(X)],ra=Ca.get("multi value indicator"),tb=Lc.obj.values(ha).some(function(Na){return!Lc.obj.isFunction(Na)&&!Lc.obj.equals(Na,ha.valueOf())});Ca.visible=Ca.isLayoutable=!tb;if(tb&&ra.visible!=tb)Lc.once(ra,"onMouseDown",Ca,Fa,{converter:function(){return ha.valueOf()},varMapping:{value:ha}});ra.visible=ra.isLayoutable=tb;this.updateControl(Ca,
Fa,ha.valueOf());Ca=$jscomp.makeIterator(["top","left","bottom","right"]);for(ra=Ca.next();!ra.done;ra=Ca.next())ra=ra.value,tb=Ja[this.join(X,ra)],this.updateControl(tb,Fa,ha[ra])}},{key:"lower",value:function(X){return X.charAt(0).toLowerCase()+X.slice(1)}},{key:"join",value:function(X,ha){return this.lower(Lc.string.camelCaseString(X+(ha?" "+ha:"")))}},{key:"unwrap",value:function(X,ha,Fa){var Ja={};Ja=(Ja[this.lower(Lc.string.camelCaseString(X))]=[X,ha,Fa],Ja);for(var Ca=$jscomp.makeIterator(["top",
"left","bottom","right"]),ra=Ca.next();!ra.done;ra=Ca.next()){ra=ra.value;var tb=X+" "+ra;Ja[this.lower(Lc.string.camelCaseString(tb))]=[tb,ha,this.join(Fa,ra)]}return Ja}},{key:"attachToWorld",value:function(){Lc.connect($world,"showHaloFor",this,"focusOn",{garbageCollect:!0})}},{key:"focusOn",value:function(X){var ha=this,Fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){if(1==Ja.nextAddress)return!X||ha.isAncestorOf(X)||ha.target===X||Lc.obj.isArray(X)||(ha.target=X),Fa=ha.visible,
ha.visible=!0,Ja.yield(ha.whenRendered(),2);if(3!=Ja.nextAddress)return ha.update(),Ja.yield(ha.whenRendered(),3);ha.getSubmorphsByStyleClassName("NumberWidget").map(function(Ca){return Ca.relayout()});ha.visible=Fa;Ja.jumpToEnd()})}},{key:"onHoverIn",value:function(X){this.watchForTarget=!1}},{key:"onHoverOut",value:function(X){this.watchForTarget=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BorderFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{derived:!0,serialize:!1,
get:function(){return this._uiSpec||(this._uiSpec=Object.assign({},this.unwrap("border style selector","selection","borderStyle"),{},this.unwrap("border color picker","colorValue","borderColor"),{},this.unwrap("border radius field","number","borderRadius"),{},this.unwrap("border width field","number","borderWidth")))}},ui:{initialize:function(){this.setupUI()}}}}}],Ga,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"BorderFormatStyler",version:"0.1.1-16"}}},{start:185,end:5003})}(Lc.Morph);Lb=Lc.BorderFormatStyler;Lc.default=Lb;var cc=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js");cc.Morph=bd;cc.morph=sc;cc.layouts=Bc;cc.string=rb;cc.connect=Rc;cc.noUpdate=Gc;cc.InteractiveMorphSelector=Mb;cc.Color=ne;cc.pt=se;Lb=function(Ub){var Ga=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js"),jb=Ga.hasOwnProperty("ShapeLayoutControl")&&"function"===typeof Ga.ShapeLayoutControl?
Ga.ShapeLayoutControl:Ga.ShapeLayoutControl=function(X){X&&X[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Id(jb,Ub,[{key:"focusOn",value:function(X){this.target=X;this.update(!1)}},{key:"setupConnections",value:function(){var X=this.ui;cc.connect(X.submorphSettingsControl,"fire",this,"chooseSubmorphToChangeLayoutSettings");cc.connect(X.dragmeControl,"onDragStart",this,"onSubmorphSettingsDragStart");cc.connect(X.xAxisPolicyControl,
"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "x",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});cc.connect(X.yAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "y",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});for(var ha={},Fa=$jscomp.makeIterator(this.managedProps),Ja=Fa.next();!Ja.done;ha=
{$jscomp$loop$prop$prop$2778:ha.$jscomp$loop$prop$prop$2778},Ja=Fa.next()){var Ca=$jscomp.makeIterator(Ja.value),ra=Ca.next().value;Ja=Ca.next().value;Ca.next().value||(ha.$jscomp$loop$prop$prop$2778=this.join(ra),Ca=X[this.join(ra,"control")],cc.connect(Ca,Ja,this,"updateLayout",{updater:function(tb){return function(Na,lc){Na(tb.$jscomp$loop$prop$prop$2778,lc)}}(ha),varMapping:{prop:ha.$jscomp$loop$prop$prop$2778}}))}}},{key:"lower",value:function(X){return X.charAt(0).toLowerCase()+X.slice(1)}},
{key:"join",value:function(X,ha){return this.lower(cc.string.camelCaseString(X+(ha?" "+ha:"")))}},{key:"updateLayoutOfTarget",value:function(X){X=cc.layouts[cc.string.camelCaseString(X)];this.target.layout=X?new X({autoResize:!1}):null;this.update()}},{key:"updateLayout",value:function(X,ha){this.target.layout[X]=ha}},{key:"update",value:function(X){var ha=this;this.target&&cc.noUpdate(function(){for(var Fa=ha.ui,Ja=ha.target.layout||{name:function(){return"No"}},Ca=$jscomp.makeIterator(ha.managedProps),
ra=Ca.next();!ra.done;ra=Ca.next()){var tb=$jscomp.makeIterator(ra.value);ra=tb.next().value;var Na=tb.next().value;tb.next();tb=Fa[ha.join(ra,"control")];var lc=Fa[ha.join(ra,"label")];if(Na)if("type"===ra)tb.selection=Ja.name()+" Layout";else{var kd=Ja[ha.join(ra)],Tb="undefined"!==typeof kd;if(Tb){switch(ra){case "align":tb.items=Ja.possibleAlignValues;break;case "direction":tb.items=Ja.possibleDirectionValues;break;case "axis":tb.items=Ja.possibleAxisValues}tb[Na]=kd}lc.isLayoutable=lc.visible=
Tb}}ha.showGridLayoutControl("Grid"===Ja.name());ha.showProportionalControl("Proportional"===Ja.name())})}},{key:"updateSubmorphProportionalLayoutSettings",value:function(X){var ha={};this.target.layout.changeSettingsFor(X.submorph,(ha[X.axis]=X.policy,ha),!0)}},{key:"onSubmorphSettingsDragStart",value:function(X){var ha=this;X.stop();var Fa=this.target.layout,Ja=Fa.settingsFor(this.selectedSubmorph),Ca=[],ra;for(ra in Ja)Ca=[].concat($jscomp.arrayFromIterable(Ca),[ra+": ",{fontWeight:"bold"},Ja[ra]+
" ",{}]);var tb=cc.morph({type:"label",fontColor:cc.Color.white,value:Ca,fill:cc.Color.black.withA(.7),padding:5,borderRadius:10,isLayoutable:!1});tb.wantsToBeDroppedOn=function(Na){return Fa.layoutableSubmorphs.includes(Na)};tb.onBeingDroppedOn=function(Na,lc){tb.remove();if(Na=Fa.layoutableSubmorphs.includes(lc)?lc:X.world.morphsContainingPoint(X.hand.position).find(function(kd){return Fa.layoutableSubmorphs.includes(kd)}))ha.updateSubmorphProportionalLayoutSettings({policy:Ja.x,axis:"x",submorph:Na}),
ha.updateSubmorphProportionalLayoutSettings({policy:Ja.y,axis:"y",submorph:Na}),Na.show(),$world.setStatusMessage("layout settings applied")};X.hand.grab(tb);tb.moveBy(cc.pt(10,10))}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var X=this,ha,Fa,Ja,Ca,ra,tb,Na,lc,kd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Tb){switch(Tb.nextAddress){case 1:return ha=X.target.layout.layoutableSubmorphs,X.manageFocus=!0,X.env.eventDispatcher.isKeyPressed("Shift")?(Ja=ha.map(function(md){return{isListItem:!0,
string:String(md),value:md}}),Tb.yield($world.listPrompt("Select morph",Ja,{onSelection:function(md){return md.show()}}),5)):Tb.yield(cc.InteractiveMorphSelector.selectMorph(X.world(),X,function(md){return ha.includes(md)}),4);case 4:Fa=Tb.yieldResult;Tb.jumpTo(3);break;case 5:Ca=Tb.yieldResult,ra=$jscomp.makeIterator(Ca.selected),Fa=ra.next().value;case 3:X.manageFocus=!1;X.selectedSubmorph=Fa;if(!Fa)return Tb.return();tb=X.ui;Na=tb.xAxisPolicyControl;lc=tb.yAxisPolicyControl;kd=X.target.layout.settingsFor(Fa);
cc.noUpdate(function(){Na.selection=kd.x;lc.selection=kd.y});Tb.jumpToEnd()}})}},{key:"showProportionalControl",value:function(X){var ha=this.ui;[ha.submorphSettingsControl,ha.dragmeControl,ha.xAxisPolicyControl,ha.xAxisPolicyLabel,ha.yAxisPolicyControl,ha.yAxisPolicyLabel].forEach(function(Fa){Fa.isLayoutable=X;Fa.visible=X})}},{key:"showGridLayoutHalo",value:function(){$world.showLayoutHaloFor(this.target)}},{key:"showGridLayoutControl",value:function(X){var ha=this.ui.configureGridLayoutControl;
ha.visible=ha.isLayoutable=X}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShapeLayoutControl"}},{key:"properties",get:function(){return{managedProps:{get:function(){return[["type","selection",!0],["align","selection"],["direction","selection"],["axis","selection"],["spacing","number"],["auto resize","checked"],["resize submorphs","checked"],["x axis policy","selection",!0],["y axis policy","selection",!0],["react to submorph animations","checked"],["submorph settings",!1,!0],["order by index",
"checked"],["dragme",!1,!0],["configure grid layout",!1,!0]]}},ui:{readOnly:!0,get:function(){for(var X={labelContainer:this.getSubmorphNamed("label container"),controlContainer:this.getSubmorphNamed("control container")},ha=$jscomp.makeIterator(this.managedProps),Fa=ha.next();!Fa.done;Fa=ha.next()){var Ja=$jscomp.makeIterator(Fa.value).next().value;Fa=Ja+" label";Ja+=" control";X[this.join(Fa)]=this.getSubmorphNamed(Fa);X[this.join(Ja)]=this.getSubmorphNamed(Ja)}return X}}}}}],Ga,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeLayoutControl",version:"0.1.1-166"}}},{start:345,end:7771})}(cc.Morph);Lb=cc.ShapeLayoutControl;cc.default=Lb;var Vb=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js");Vb.Morph=bd;Vb.resource=vd;Vb.arr=Kb;Vb.obj=Db;Vb.string=rb;Vb.Path=pb;Vb.connect=Rc;Vb.getMastersMenu=lb;Vb.resolvedMasters=Zb;Lb=function(Ub){var Ga=
lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js"),jb=Ga.hasOwnProperty("MasterComponentControl")&&"function"===typeof Ga.MasterComponentControl?Ga.MasterComponentControl:Ga.MasterComponentControl=function(X){X&&X[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Id(jb,Ub,[{key:"focusOn",value:function(X){this.target=X;this.update()}},{key:"onMouseUp",value:function(X){var ha=this,Fa,Ja,Ca,ra,tb,Na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lc){if(1==
lc.nextAddress){"auto master selection"==X.targetMorph.name&&(Fa="auto");"hover master selection"==X.targetMorph.name&&(Fa="hover");"click master selection"==X.targetMorph.name&&(Fa="click");ha.refreshButtons();if(!ha.target)return lc.return();Ja=$jscomp.makeIterator(["auto","hover","click"]);for(Ca=Ja.next();!Ca.done;Ca=Ja.next())ra=Ca.value,ha.target.master&&ha.target.master[ra]&&!ha.get(ra+" master checkbox").checked&&ha.adjustMasterComponent(ra,null);if(!Fa)return lc.jumpTo(0);tb=ha;Na=tb.openMenu;
return lc.yield(ha.getMastersMenu(Fa),3)}Na.call(tb,lc.yieldResult,X);lc.jumpToEnd()})}},{key:"getMastersMenu",value:function(X){var ha=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){return 1==Fa.nextAddress?Fa.yield(Promise.all([].concat($jscomp.arrayFromIterable(Object.keys(Vb.resolvedMasters)),[ha.world().name]).map(function(Ja){var Ca,ra,tb,Na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lc){return 1==lc.nextAddress?(ra=(Ca=Ja==ha.world().name)?"This World":
Ja,tb=ha,Na=tb.componentsToMenu,lc.yield(Vb.resource("styleguide://"+Ja+"/").dirList(),2)):lc.return([ra,Na.call(tb,lc.yieldResult,X)])})})),2):Fa.return(Fa.yieldResult)})}},{key:"componentsToMenu",value:function(X,ha,Fa,Ja){var Ca=this;Fa=void 0===Fa?null:Fa;Ja=void 0===Ja?1:Ja;Fa||(Fa=X.map(function(tb){return{name:Vb.arr.last(tb.name.split("/")),path:tb.name.split("/"),value:tb}}));if(0==Fa.length||100<Ja)return[];var ra=this;return Vb.arr.flatten(Object.entries(Vb.arr.groupBy(Fa,function(tb){return tb.path[Ja-
1]})).map(function(tb){var Na=$jscomp.makeIterator(tb);tb=Na.next().value;Na=Na.next().value;var lc=$jscomp.makeIterator(Vb.arr.partition(Na,function(kd){return kd.path.length<=Ja}));Na=lc.next().value;lc=lc.next().value;tb=[tb,Ca.componentsToMenu(null,ha,lc,Ja+1)];return[].concat($jscomp.arrayFromIterable(Na.map(function(kd){return[kd.name,function(){ra.adjustMasterComponent(ha,kd.value)}]})),$jscomp.arrayFromIterable(tb[1].length?[tb]:[]))}),1)}},{key:"getComponentSelectionMenu",value:function(X){var ha=
this,Fa,Ja,Ca,ra,tb,Na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lc){if(1==lc.nextAddress)return Fa=ha.world().metadata.commit.name,Ja=Vb.resource("styleguide://"+Fa+"/"),lc.yield(Ja.dirList(),2);if(3!=lc.nextAddress)return Ca=lc.yieldResult,lc.yield(Vb.resource("styleguide://System/").dirList(),3);ra=lc.yieldResult;tb=ha.componentsToMenu(Ca,X);Na=ha.componentsToMenu(ra,X);return lc.return([].concat($jscomp.arrayFromIterable(0<tb.length?[].concat($jscomp.arrayFromIterable(tb),[{isDivider:!0}]):
[]),$jscomp.arrayFromIterable(Na)))})}},{key:"adjustMasterComponent",value:function(X,ha){if(this.target.master)this.target.master[X]=ha;else if(ha){var Fa={};this.target.master=(Fa[X]=ha,Fa)}X=this.target.master;ha=X.hover;Fa=X.click;X.auto||ha||Fa||(this.target.master=null);this.update();this.target.withAllSubmorphsDo(function(Ja){return delete Ja._parametrizedProps});this.target.requestMasterStyling()}},{key:"componentsToMenu",value:function(X,ha,Fa,Ja){var Ca=this;Fa=void 0===Fa?null:Fa;Ja=void 0===
Ja?1:Ja;Fa||(Fa=X.map(function(tb){return{name:Vb.arr.last(tb.name.split("/")),path:tb.name.split("/"),value:tb}}));if(0==Fa.length||100<Ja)return[];var ra=this;return Vb.arr.flatten(Object.entries(Vb.arr.groupBy(Fa,function(tb){return tb.path[Ja-1]})).map(function(tb){var Na=$jscomp.makeIterator(tb);tb=Na.next().value;Na=Na.next().value;var lc=$jscomp.makeIterator(Vb.arr.partition(Na,function(kd){return kd.path.length<=Ja}));Na=lc.next().value;lc=lc.next().value;tb=[tb,Ca.componentsToMenu(null,ha,
lc,Ja+1)];return[].concat($jscomp.arrayFromIterable(Na.map(function(kd){return[kd.name,function(){ra.adjustMasterComponent(ha,kd.value)}]})),$jscomp.arrayFromIterable(tb[1].length?[tb]:[]))}),1)}},{key:"update",value:function(){if(this.target){for(var X=$jscomp.makeIterator(["auto","hover","click"]),ha=X.next();!ha.done;ha=X.next()){ha=ha.value;var Fa=this.getSubmorphNamed(ha+" master selection"),Ja=this.getSubmorphNamed(ha+" master checkbox");Vb.Path(["master",ha]).get(this.target)?Ja.checked=!0:
Ja.checked=!1;Fa.label=Vb.string.truncateLeft(Vb.Path(["master",ha,"name"]).get(this.target)||"select master",15,"...")}this.refreshButtons()}}},{key:"refreshButtons",value:function(){for(var X=$jscomp.makeIterator(["auto","hover","click"]),ha=X.next();!ha.done;ha=X.next()){ha=ha.value;var Fa=this.getSubmorphNamed(ha+" master selection"),Ja=this.getSubmorphNamed(ha+" master checkbox");Fa=Fa.deactivated=!Ja.checked;this.getSubmorphNamed(ha+" master selection").opacity=Fa?.5:1}X=this.getSubmorphNamed("overridden props list");
X.items=this.getOverriddenProps();this.getSubmorphNamed("clear overridden prop button").deactivated=!X.selection}},{key:"getMasterForTarget",value:function(){if(this.target.isMorph)return[this.target].concat($jscomp.arrayFromIterable(this.target.ownerChain())).map(function(X){return X.master}).find(Boolean)}},{key:"clearSelectedProperty",value:function(){var X=this.getSubmorphNamed("overridden props list").selection;this.getMasterForTarget().clearOverriddenPropertiesFor(this.target,[X]);this.refreshButtons()}},
{key:"getOverriddenProps",value:function(){var X=this.getMasterForTarget();return X&&X._overriddenProps?(X=X._overriddenProps.get(this.target))?Object.keys(X):[]:[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MasterComponentControl"}}],Ga,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MasterComponentControl",
version:"0.1.1-110"}}},{start:315,end:6250})}(Vb.Morph);Lb=Vb.MasterComponentControl;Vb.default=Lb}}});