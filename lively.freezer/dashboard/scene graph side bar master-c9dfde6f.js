System.register("./__root_module__-7cbd94df.js kld-intersections ./index-6dd3a7ed.js ./index-2043039c.js ./index-a563870d.js ./color-picker-34adc661.js ./editor-plugin-aefcac89.js ./index-cfc100d1.js ./editor-plugin-ec7e33f4.js ./index-504c7dd0.js".split(" "),function(){var Da,Ab,Rb,jc,cc,je,fd,Yd,jd,Pc,vd,Ld,ge,Td,md,Za,Db,ac,ic,gd,fe,Yb,qc,Ob,Hc,Yc,cd,$b,pb,xc,Lc,Ga,Ra,rb,Kb,Ib,gb,ib,Lb,tc,Qc;return{setters:[function(sc){Da=sc.as;Ab=sc.ai;Rb=sc.aA;jc=sc.av;cc=sc.a3;je=sc.at;fd=sc.aq;Yd=sc.au;
jd=sc.C;Pc=sc.a2;vd=sc.a6;Ld=sc.$;ge=sc.aW;Td=sc.P;md=sc.a7;Za=sc.aB;Db=sc.ak;ac=sc.aV;ic=sc.ao;gd=sc.al;fe=sc.an;Yb=sc.bq;qc=sc.bs;Ob=sc.bR;Hc=sc.b2;Yc=sc.bi;cd=sc.aN;$b=sc.n;pb=sc.a1;xc=sc.bS;Lc=sc.aX;Ga=sc.aY;Ra=sc.ap;rb=sc.a4;Kb=sc.ar;Ib=sc.bT},function(){},function(){},function(){},function(sc){gb=sc.d;ib=sc.s;Lb=sc.I;tc=sc.M},function(){},function(sc){Qc=sc.I},function(){},function(){},function(){}],execute:function(){function sc(rd){var jb=rd.sourceObj,Qd=rd.targetObj;jb.isMorph&&Qd.isMorph?
(jb.show(),Qd.show(),Md.showConnector&&Md.showConnector(jb,Qd)):Md.show(String(rd))}function Vc(rd){var jb=rd.sourceObj,Qd=rd.sourceAttrName,ab=rd.targetObj,lb=rd.targetMethodName,vb=rd.getConverter();rd=rd.getUpdater();return Md.printConnectionElements(jb,Qd,ab,lb,vb,rd)}function Q(rd,jb,Qd,ab,lb,vb){rd="/* global connect, source, target */\nconnect(source, '"+jb+"', target, '"+ab+"'";if(lb||vb)rd+=", {\n";lb&&(rd+="  converter: "+lb);lb&&vb&&(rd+=",");lb&&(rd+="\n");vb&&(rd+="  updater: "+vb+"\n");
if(lb||vb)rd+="}";return rd+");"}function fa(rd,jb){var Qd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ab){if(1==ab.nextAddress)return ab.yield(Md.InteractiveMorphSelector.selectMorph(),2);Qd=ab.yieldResult;return ab.return(Qd?Md.interactiveConnectGivenSourceAndTarget(rd,jb,Qd):null)})}function Ia(rd,jb,Qd,ab){var lb,vb,Bd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(de){lb=Qd&&Qd.world().targetDataBindings(Qd);vb=rd.world();if(!lb||!lb.length)return vb.setStatusMessage("connect canceled"),
de.return();Bd=lb.map(function(Ee){return[Ee[0].group||"uncategorized",Ee.map(function(Ze){return[Ze.signature||Ze.name,function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zc){return 1==Zc.nextAddress?Zc.yield(Md.interactivelyEvaluateConnection({sourceObj:rd,sourceAttr:jb,targetObj:Qd,targetAttr:Ze.name,onConnect:ab}),2):Zc.return(Zc.yieldResult)})}]})]});Bd.push(["custom...",function(){var Ee;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ze){return 1==Ze.nextAddress?
Ze.yield(vb.prompt("Enter custom connection point",{requester:$world,historyId:"lively.morphic-custom-connection-points",useLastInput:!0}),2):(Ee=Ze.yieldResult)?Ze.yield(Md.interactivelyEvaluateConnection({sourceObj:rd,sourceAttr:jb,targetObj:Qd,targetAttr:Ee,onConnect:ab}),0):Ze.jumpTo(0)})}]);return de.yield(Qd.openMenu(Bd).whenFinished(),0)})}function Sa(rd,jb,Qd,ab){jb=void 0===jb?"confirm connection":jb;var lb,vb,Bd,de,Ee,Ze,Zc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ye){lb=
rd;vb=lb.sourceObj;Bd=lb.sourceAttrName;de=lb.targetObj;Ee=lb.targetMethodName;Ze=rd.getConverter();Zc=rd.getUpdater();return ye.return(Md.interactivelyEvaluateConnection({sourceObj:vb,sourceAttr:Bd,targetObj:de,targetAttr:Ee,converter:Ze,updater:Zc,prompt:jb,highlight:Qd,onConnect:ab}))})}function ec(rd,jb,Qd,ab,lb){ab=void 0===ab?{}:ab;lb=Md.rect(0).sides.concat(Md.rect(0).corners);Qd=Qd||new Md.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Md.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Md.Color.transparent,
nativeCursor:"auto"},end:{fill:Md.Color.orange}}},ab,{hasFixedPosition:!0}));Qd.startPoint.attachTo(rd,"rightCenter");jb.isMorph?(ab=jb.globalBounds().partNameNearest(lb,rd.globalPosition),rd.globalPosition.equals(jb.globalBounds().partNamed(ab))&&jb.globalBounds().partNameNearest(Md.arr.without(lb,ab),rd.globalPosition),Qd.endPoint.attachTo(jb,"leftCenter")):(lb=rd.globalBounds().topRight().addPt(Md.pt(100,0)),jb=Md.morph({type:"label",value:jb.toString(),styleClasses:["Tooltip"],padding:Md.rect(8,
4)}).openInWorld(lb),jb.position=rd.world().bounds().translateForInclusion(jb.bounds()).topLeft(),Md.once(Qd,"remove",jb,"remove"),Qd.endPoint.attachTo(jb,"leftCenter"));return Qd}function Vb(rd){var jb,Qd,ab,lb,vb,Bd,de,Ee,Ze,Zc,ye,Hd,Zb,sa,Aa,Mb,P,wa,Qa,Nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gc){switch(Gc.nextAddress){case 1:jb=rd;Qd=jb.sourceObj;ab=jb.sourceAttr;lb=jb.targetObj;vb=jb.targetAttr;Bd=jb.converter;de=jb.updater;Ee=jb.prompt;Ze=void 0===jb.highlight?!0:jb.highlight;
Zc=jb.onConnect;ye="lively://lively.bindings-interactive-connect/x"+Qd.id;Hd={context:window,format:"esm",targetModule:ye,classTransform:Md.classToFunctionTransform};Zb=Md.printConnectionElements(Qd,ab,lb,vb,Bd,de);lb.isMorph&&Qd.isMorph&&(sa=lb.propertiesAndPropertySettings().properties[vb]||{type:typeof lb[vb]},Aa=sa.type,Mb=Qd.propertiesAndPropertySettings().properties[ab]||{type:typeof Qd[ab]},P=Mb.type,P!==Aa&&(Ee=!0));wa={};Object.assign(lively.modules.module(ye).recorder,(wa.source=Qd,wa.target=
lb,wa.connect=fd,wa.once=Yd,wa[ab]=Qd[ab],wa));if(!Ee){Qa=Zb;Gc.jumpTo(2);break}return Gc.yield($world.editPrompt(Ee,{input:Zb,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:Hd,animated:!1}),3);case 3:if(Qa=Gc.yieldResult,!Qa)return $world.setStatusMessage("connect canceled"),Gc.return();case 2:return Gc.yield(lively.vm.runEval(Qa,Hd),4);case 4:Nb=Gc.yieldResult;if(Nb.isError)return $world.logError(Nb.value),Gc.return(Vb({sourceObj:Qd,sourceAttr:ab,
targetObj:lb,targetAttr:vb,converter:Bd,updater:de,prompt:"confirm connection",highlight:Ze,onConnect:Zc}));Ze&&($world.setStatusMessage("connected!",Md.Color.green),Md.interactivelyShowConnection(Nb.value));"function"===typeof Zc&&Zc(Nb);Gc.jumpToEnd()}})}var Ua=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");Ua.Inspector=Qc;var wc=function(rd){var jb=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),Qd=jb.hasOwnProperty("ProtoInspector")&&"function"===typeof jb.ProtoInspector?
jb.ProtoInspector:jb.ProtoInspector=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Qd,rd,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],jb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(Ua.Inspector);wc=Ua.ProtoInspector;Ua.default=wc;var oe=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");oe.Morph=Ab;oe.touchInputDevice=Rb;oe.easings=jc;oe.pt=cc;oe.fun=je;oe.connect=fd;Ua=function(rd){var jb=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),Qd=jb.hasOwnProperty("MorphicSideBar")&&"function"===typeof jb.MorphicSideBar?jb.MorphicSideBar:jb.MorphicSideBar=function(ab){ab&&
ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Qd,rd,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",value:function(ab){ab=void 0===ab?!0:ab;if(this.respondsToVisibleWindow){var lb=$world.visibleBounds(),vb=navigator.standalone&&oe.touchInputDevice?25:0;this.height=lb.height-vb;this.top=vb+lb.top();vb=this.get("horizontal resizer");vb.height=this.height;vb.top=0;ab&&(this.visible?this.topLeft=
lb.topLeft():this.topRight=lb.topLeft())}}},{key:"switchMode",value:function(ab){"inspector"==ab&&this.showInspector();"connections"==ab&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(ab){var lb=this,vb,Bd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(de){switch(de.nextAddress){case 1:vb=
$world.visibleBounds();Bd=navigator.standalone&&oe.touchInputDevice?25:0;lb.height=vb.height-Bd;lb.top=Bd+vb.top();if(ab)return $world.addMorph(lb,$world.get("lively top bar")),lb.right=0,lb.attachToWorld($world),lb.visible=!0,de.yield(lb.whenRendered(),5);lb.detachFromWorld($world);return de.yield(lb.animate({opacity:0,right:0,duration:300}),4);case 4:lb.visible=!1;lb.remove();de.jumpTo(0);break;case 5:return lb.onWorldResize(!1),lb.get("scene graph").adjustProportions(),de.yield(lb.animate({opacity:1,
easing:oe.easings.outCirc,left:1,duration:300}),6);case 6:lb.get("scene graph").refresh(),de.jumpToEnd()}})}},{key:"attachToWorld",value:function(ab){oe.connect(ab,"onChange",this,"onHierarchyChange",{garbageCollect:!0});oe.connect(ab,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});oe.connect(ab,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(ab){var lb=this;ab.attributeConnections.forEach(function(vb){vb.targetObj===lb&&vb.disconnect()})}},
{key:"selectNode",value:function(ab){this.getSubmorphNamed("scene graph").selectMorphInTarget(ab);this.getSubmorphNamed("connections tree").inspectConnectionsOf(ab)}},{key:"onHierarchyChange",value:function(ab){var lb=this,vb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bd){if("addMorphAt"===ab.selector||"removeMorph"===ab.selector||"name"===ab.prop){vb=lb._sceneGraph||(lb._sceneGraph=lb.getSubmorphNamed("scene graph"));if(!vb||!vb.owner.visible||ab.target&&ab.target.isHand||ab.target&&
vb.ignoreMorph(ab.target)||ab.args&&!ab.args[0].isHalo&&vb.ignoreMorph(ab.args[0])||ab.target.ownerChain().find(function(de){return vb.ignoreMorph(de)}))return Bd.return();oe.fun.debounceNamed("scene-graph-update",50,function(){return vb.refresh()})()}Bd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],jb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-70"}}},{start:226,end:3612})}(oe.Morph);Ua=oe.MorphicSideBar;oe.default=Ua;var Md=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");Md.interactivelyShowConnection=sc;Md.printConnection=Vc;Md.printConnectionElements=Q;Md.interactiveConnectGivenSource=fa;Md.interactiveConnectGivenSourceAndTarget=Ia;Md.interactivelyReEvaluateConnection=Sa;Md.visualizeConnection=
ec;Md.interactivelyEvaluateConnection=Vb;Md.connect=fd;Md.once=Yd;Md.Color=jd;Md.rect=Pc;Md.pt=cc;Md.arr=vd;Md.promise=Ld;Md.properties=ge;Md.Path=Td;Md.obj=md;Md.HorizontalLayout=Za;Md.Morph=Ab;Md.VerticalLayout=Db;Md.StyleSheet=ac;Md.Icon=ic;Md.GridLayout=gd;Md.morph=fe;Md.TreeData=Yb;Md.Tree=qc;Md.Leash=Ob;Md.LabeledCheckBox=Hc;Md.SearchField=Yc;Md.showConnector=gb;Md.show=ib;Md.InteractiveMorphSelector=Lb;Md.MorphHighlighter=tc;Md.Window=cd;Md.classToFunctionTransform=$b;Md.interactivelyShowConnection=
sc;Md.interactivelyShowConnection=sc;Md.printConnection=Vc;Md.printConnection=Vc;Md.printConnectionElements=Q;Md.printConnectionElements=Q;Md.interactiveConnectGivenSource=fa;Md.interactiveConnectGivenSource=fa;Md.interactiveConnectGivenSourceAndTarget=Ia;Md.interactiveConnectGivenSourceAndTarget=Ia;Md.interactivelyReEvaluateConnection=Sa;Md.interactivelyReEvaluateConnection=Sa;Md.visualizeConnection=ec;Md.visualizeConnection=ec;Md.interactivelyEvaluateConnection=Vb;Md.interactivelyEvaluateConnection=
Vb;var id=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");id.Tree=qc;id.TreeData=Yb;id.morph=fe;id.Icon=ic;id.HorizontalLayout=Za;id.easings=jc;id.Morph=Ab;id.Color=jd;id.Rectangle=pb;id.rect=Pc;id.pt=cc;id.connect=fd;id.noUpdate=xc;id.disconnect=Lc;id.disconnectAll=Ga;id.once=Yd;id.arr=vd;id.num=Ra;id.fun=je;id.tree=rb;id.promise=Ld;id.ConnectionHalo=_missingExportShim;Ua=function(rd){var jb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Qd=jb.hasOwnProperty("InteractiveTreeContainer")&&
"function"===typeof jb.InteractiveTreeContainer?jb.InteractiveTreeContainer:jb.InteractiveTreeContainer=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Qd,rd,[{key:"onChildRemoved",value:function(ab){}},{key:"onChildAdded",value:function(ab){}},{key:"toggleSelected",value:function(ab){if(this.tree){var lb=this.tree,vb=lb.selectionFontColor,Bd=lb.nonSelectionFontColor;this.submorphs.filter(function(de){return!de._isControlElement&&
de.styleClasses.includes("Label")}).forEach(function(de){de.fontColor=ab?vb:Bd})}}},{key:"onGrab",value:function(ab){var lb=this.tree,vb=this.node;this.fill=id.Color.gray.withA(.5);this.fontColor=lb.selectionFontColor;this.opacity=.8;Da._get(Object.getPrototypeOf(Qd.prototype),"onGrab",this).call(this,ab);vb&&(this.toggleSelected(!1),lb.collapse(vb),lb.treeData.parentNode(vb).container.onChildRemoved(this),this._data=lb.treeData.remove(vb),vb.container.target.remove(),lb.update(!0))}},{key:"wantsToBeDroppedOn",
value:function(ab){this.showPreviewOn(ab);return!0}},{key:"showPreviewOn",value:function(ab){if(ab.isContainer)var lb=ab.tree;ab.isTree&&(lb=ab);lb&&lb.showDropPreviewFor&&lb.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(ab){var lb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vb){if(1==vb.nextAddress)return lb.tree.treeData.add(ab._data,lb.node,lb.node.children[0]),lb.tree.uncollapse(lb.node),lb.tree.treeData.remove(lb.tree._previewNode),vb.yield(lb.tree.whenRendered(),
2);lb.tree.update(!0);lb.onChildAdded(ab);vb.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(ab,lb){var vb=this;debugger;this.tree._dropInProgress=!0;Da._get(Object.getPrototypeOf(Qd.prototype),"onBeingDroppedOn",this).call(this,ab,lb);ab=function(){vb.fill=id.Color.gray.withA(.5);vb.opacity=1;vb.tree._dropInProgress=!1;vb.tree.refresh()};lb.isTree?lb.insertAtPlaceholder(this).then(ab):lb.isContainer?lb.insertAsChild(this).then(ab):ab()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},
{key:"properties",get:function(){return{fill:{defaultValue:id.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var ab=this,lb=this.tree.treeData;return lb&&lb.asList().find(function(vb){return vb.container===ab})}}}}}],jb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1102"}}},{start:447,end:2927})}(id.Morph);id.InteractiveTreeContainer=Ua;id.InteractiveTreeContainer=Ua;id.InteractiveTreeContainer=Ua;Ua=function(rd){var jb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Qd=jb.hasOwnProperty("InteractiveTreeData")&&"function"===typeof jb.InteractiveTreeData?jb.InteractiveTreeData:jb.InteractiveTreeData=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Qd,
rd,[{key:"display",value:function(ab){return[ab.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(ab){return ab.isCollapsed}},{key:"collapse",value:function(ab,lb){ab.isCollapsed=lb}},{key:"getChildren",value:function(ab){var lb=this;return ab.isLeaf?null:ab.children.filter(function(vb){return vb&&(lb.filterActive?vb.visible:!0)})}},{key:"isLeaf",value:function(ab){var lb=this;return!ab.children||0==ab.children.filter(function(vb){return vb&&(lb.filterActive?vb.visible:!0)}).length}},
{key:"add",value:function(ab,lb,vb){lb=void 0===lb?this.root:lb;lb.children||(lb.children=[]);vb?id.arr.pushAt(lb.children,ab,lb.children.indexOf(vb)):lb.children.push(ab);lb.isLeaf=!1}},{key:"replace",value:function(ab,lb){var vb=this.parentNode(ab);ab=vb.children.indexOf(ab);vb.children[ab]=lb}},{key:"next",value:function(ab){var lb=this.parentNode(ab);return lb&&lb.children[lb.children.indexOf(ab)+1]}},{key:"isBefore",value:function(ab,lb){this.next(ab)===lb}},{key:"isAfter",value:function(ab,
lb){this.next(lb)===ab}},{key:"addBefore",value:function(ab,lb){this.add(ab,this.parentNode(lb),lb)}},{key:"addAfter",value:function(ab,lb){var vb=this.parentNode(lb);lb=vb.children.indexOf(lb)+1;this.add(ab,vb,vb.children[lb])}},{key:"remove",value:function(ab){var lb=this.parentNode(ab);if(lb)return id.arr.remove(lb.children,ab),lb.children==[]&&(lb.children=null),ab}},{key:"filter",value:function(ab,lb){lb=void 0===lb?1:lb;var vb=this,Bd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(de){if(1==
de.nextAddress)return de.yield(vb.uncollapseAll(function(Ee,Ze){return Ze<lb+1}),2);Bd=vb.filterActive;vb.filterActive=!1;vb.asListWithIndexAndDepth(!1).reverse().forEach(function(Ee){var Ze=Ee.node;if(0==Ee.depth)return Ze.visible=!0;Ze.visible=ab(Ze);Ze.visible||Ze.isCollapsed||!Ze.children.find(function(Zc){return Zc.visible})?Ze.container.opacity=1:(Ze.visible=!0,Ze.container.opacity=.5);return Ze.visible});vb.filterActive=Bd;de.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],
jb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:2936,end:5375})}(id.TreeData);id.InteractiveTreeData=Ua;id.InteractiveTreeData=Ua;id.InteractiveTreeData=Ua;Ua=function(rd){var jb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Qd=jb.hasOwnProperty("InteractiveTree")&&
"function"===typeof jb.InteractiveTree?jb.InteractiveTree:jb.InteractiveTree=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Qd,rd,[{key:"update",value:function(ab){var lb=this;Da._get(Object.getPrototypeOf(Qd.prototype),"update",this).call(this,ab);this.treeData&&this.relayoutContainers();ab&&this.embeddedMorphs.forEach(function(vb){vb.isContainer&&(vb.fill=id.Color.transparent,vb.fontFamily=lb.fontFamily,
vb.fontSize=lb.fontSize)})}},{key:"onDrop",value:function(ab){Da._get(Object.getPrototypeOf(Qd.prototype),"onDrop",this).call(this,ab);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(ab){}},{key:"onDropHoverUpdate",value:function(ab){}},{key:"onDropHoverOut",value:function(ab){}},{key:"onHoverOut",value:function(ab){var lb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vb){Da._get(Object.getPrototypeOf(Qd.prototype),"onHoverOut",lb).call(lb,
ab);lb._previewNode&&lb._previewNode.container.world()&&lb.treeData.remove(lb._previewNode);lb.resetContainerSelection();lb.update(!0);vb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(ab){var lb=this,vb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bd){if(1==Bd.nextAddress)return vb=lb.treeData.parentNode(lb._previewNode),lb.treeData.replace(lb._previewNode,ab._data),lb.treeData.remove(lb._previewNode),Bd.yield(lb.whenRendered(),2);lb.update(!0);vb.container.onChildAdded(ab);
Bd.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var ab=this;if(!this._scrollingUp){this._scrollingUp=!0;var lb=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(vb){if(1==vb.nextAddress)return ab._scrollingUp&&0<ab.scroll.y?vb.yield(ab.animate({scroll:ab.scroll.subXY(0,30),duration:300,easing:id.easings.linear}),3):(ab._scrollingUp=!1,vb.jumpTo(0));lb();vb.jumpToEnd()})};lb()}}},{key:"scrollDownSlowly",value:function(){var ab=this;if(!this._scrollingDown){this._scrollingDown=
!0;var lb=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(vb){if(1==vb.nextAddress)return ab._scrollingDown&&ab.scroll.y<ab.scrollExtent.y-ab.height?vb.yield(ab.animate({scroll:ab.scroll.addXY(0,30),duration:300,easing:id.easings.linear}),3):(ab._scrollingDown=!1,vb.jumpTo(0));lb();vb.jumpToEnd()})};lb()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(ab){ab.isContainer&&
(ab.fill=id.Color.transparent)})}},{key:"showDropPreviewFor",value:function(ab){var lb=this;ab=this.localize(ab.globalBounds().center());var vb=this.textPositionFromPoint(ab),Bd=this.treeData.asListWithIndexAndDepth(function(Hd){Hd=Hd.node;return Hd!=lb._previewNode&&Hd.container.world()}),de=(Bd.find(function(Hd){return Hd.i-1===vb.row})||{}).node,Ee=de&&de.container,Ze=this.ensurePlaceholder(),Zc=!!Ze.container.world(),ye=ab.subPt(this.scroll).subPt(this.scrollbarOffset);10>ye.y?this.scrollUpSlowly():
ye.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Ee){if(Bd.length>vb.row||id.arr.last(this.treeData.root.children)===Ze)return;this.treeData.remove(Ze);this.treeData.add(Ze);this.update(!0)}if(Ee){Bd=this.textLayout.boundsFor(this,vb);if(4>Math.abs(Bd.top()-ab.y)){if(this.treeData.isBefore(Ze,de))return;this.treeData.remove(Ze);this.treeData.addBefore(Ze,de)}else if(4>Math.abs(Bd.bottom()-ab.y)&&(de.isCollapsed||this.treeData.isLeaf(de))){if(this.treeData.isAfter(Ze,
de))return;this.treeData.remove(Ze);this.treeData.addAfter(Ze,de)}else{Ee.fill=id.Color.gray;if(!Zc)return;this.treeData.remove(Ze)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var ab=id.pt(this.width-100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:id.morph({acceptsDrops:!1,reactsToPointer:!1,fill:id.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=ab;return this._previewNode}},{key:"relayoutContainers",
value:function(){var ab=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(lb){return lb.height});this.treeData.asListWithIndexAndDepth().forEach(function(lb){var vb=lb.node;lb=lb.i;vb.container.nativeCursor="grab";vb.container.width=ab.width-25-vb.container.left;vb.container.toggleSelected&&vb.container.toggleSelected(lb==ab.selectedIndex)});this.anchors.forEach(function(lb){return lb.position=lb.position})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"InteractiveTree"}}],jb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:5384,end:10721})}(id.Tree);id.InteractiveTree=Ua;id.InteractiveTree=Ua;id.InteractiveTree=Ua;Ua=function(rd){var jb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Qd=jb.hasOwnProperty("SceneGraphTree")&&
"function"===typeof jb.SceneGraphTree?jb.SceneGraphTree:jb.SceneGraphTree=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Qd,rd,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(ab){var lb=this.treeData.asList().find(function(vb){return vb.container.target===ab});lb&&this.selectedNode!=lb&&this.selectPath(this.treeData.pathOf(lb))}},{key:"onLoad",
value:function(){var ab=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lb){if(1==lb.nextAddress)return ab.submorphs=[],lb.yield(ab.whenRendered(),2);ab.get("inspector").makeEditorVisible(!0);ab.get("inspector").makeEditorVisible(!1);ab.setTarget($world);lb.jumpToEnd()})}},{key:"adjustProportions",value:function(ab){ab=(ab?ab.state.dragDelta:{y:0}).y;var lb=this.get("inspector"),vb=this.get("scene graph resizer"),Bd=this.get("mode selector"),de=this.get("connections tree");this.height+=
ab;lb.height-=ab;de.height-=ab;vb.top=this.bottom;vb.left=0;Bd.top=vb.bottom;de.top=lb.top=Bd.bottom+5}},{key:"reset",value:function(){var ab=this;this.treeData=new id.InteractiveTreeData({children:[],container:id.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(lb){return null==lb.id}).forEach(function(lb){return ab.removeAnchor(lb)})}},{key:"setTarget",value:function(ab){this.target=ab;this.treeData=this.getTreeFromSubmorphHierarchy(ab);this.uncollapse(this.treeData.root)}},
{key:"isNodeOutOfSync",value:function(ab){var lb=this;if(ab===this._previewNode)return!1;if(ab.container.nameNeedsUpdate)return!0;var vb=ab.container.target.submorphs.filter(function(Bd){return!lb.ignoreMorph(Bd)});return vb.length!=ab.children.length||vb.map(function(Bd){return Bd.name}).join("")!=ab.children.map(function(Bd){return Bd.target?Bd.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(ab){var lb=this,vb=ab.container.target.submorphs.map(function(Zc){return Zc.__scene_graph_target__?
Zc.__scene_graph_target__():Zc}).filter(function(Zc){return!lb.ignoreMorph(Zc)}),Bd=[],de={},Ee;for(Ee in vb){de.$jscomp$loop$prop$m$2286=vb[Ee];var Ze=id.arr.without(ab.children,this._previewNode).find(function(Zc){return function(ye){return ye.container.target.id==Zc.$jscomp$loop$prop$m$2286.id}}(de));Bd[Ee]=Ze?Ze:this.readMorphHierarchy(de.$jscomp$loop$prop$m$2286);de={$jscomp$loop$prop$m$2286:de.$jscomp$loop$prop$m$2286}}return Bd}},{key:"refresh",value:function(){var ab=this;if(!this._updating&&
!this._dropInProgress){var lb=!1;id.tree.prewalk(this.treeData.root,function(vb){ab.isNodeOutOfSync(vb)&&(lb=!0,vb.name=vb.container.target.name,vb.container.refresh(),vb.children=ab.getNewChildren(vb))},function(vb){return vb.children});this.update(lb)}}},{key:"ignoreMorph",value:function(ab){return ab.isMorph?ab.isContainer||ab.isWindow||ab.getWindow()||ab.isEpiMorph||ab.isHand||["lively.halos"].includes(ab.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler",
"UserFlap","Menu"].includes(ab.constructor.name):!1}},{key:"onDropHoverOut",value:function(ab){var lb=ab.hand.grabbedMorphs[0];ab=ab.hand.findDropTarget();if(!(ab===this||ab&&ab.ownerChain().includes(this))&&lb&&lb.isContainer)lb.onDragOutside()}},{key:"onDropHoverIn",value:function(ab){var lb=ab.hand.grabbedMorphs[0];lb&&!lb.isContainer&&($world.halos().forEach(function(vb){return vb.remove()}),lb.remove(),Object.assign(lb,ab.hand._grabbedMorphProperties.get(lb).pointerAndShadow),lb=this.renderContainerFor(lb,
!1),ab.hand.grab(lb),lb.leftCenter=id.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(ab){return new id.InteractiveTreeData(this.readMorphHierarchy(ab))}},{key:"readMorphHierarchy",value:function(ab){var lb=this;return id.tree.mapTree(ab,function(vb,Bd){return{name:vb.name,isCollapsed:!0,container:lb.renderContainerFor(vb),visible:!0,children:Bd}},function(vb){return vb.submorphs.filter(function(Bd){return vb.isWorld?!lb.ignoreMorph(Bd):!0})})}},{key:"renderContainerFor",value:function(ab,
lb){ab=void 0===ab?id.morph({name:"root"}):ab;lb=new id.MorphContainer({tree:this,fill:void 0===lb||lb?id.Color.transparent:id.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:ab,opacity:ab.visible?1:.5});ab._data?(lb._data=ab._data,ab._data.container=lb):lb._data={name:ab.name,isCollapsed:!0,container:lb,children:[]};return lb}},{key:"collapseAll",value:function(){var ab=this;this.treeData.asList().forEach(function(lb){return lb!=ab.treeData.root?lb.isCollapsed=
!0:lb.isCollapsed=!1})}},{key:"filterMorphs",value:function(ab){var lb=this,vb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bd){if(1==Bd.nextAddress)return vb=ab.tokens[0],lb.treeData.filterActive||(lb._collapseState=new WeakMap(lb.treeData.asList().map(function(de){return[de,de.isCollapsed]}))),lb.treeData.filterActive=!!vb,Bd.yield(lb.treeData.filter(function(de){var Ee=!vb||de.container.target.name.includes(vb);de.container.highlightTerm(vb);return Ee},3),2);lb.treeData.filterActive||
lb.treeData.asList().forEach(function(de){return de.isCollapsed=lb._collapseState.has(de)?lb._collapseState.get(de):!0});lb.refresh();Bd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],jb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1102"}}},{start:10730,end:17203})}(id.InteractiveTree);id.SceneGraphTree=Ua;id.SceneGraphTree=Ua;id.SceneGraphTree=Ua;Ua=function(rd){var jb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Qd=jb.hasOwnProperty("MorphContainer")&&"function"===typeof jb.MorphContainer?jb.MorphContainer:jb.MorphContainer=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Qd,rd,[{key:"refresh",value:function(){var ab=
this,lb,vb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bd){lb=ab.target;if(!lb)return Bd.return();ab.reactsToPointer=!0;ab.dropShadow=!1;ab.submorphs=[ab.getLabel(),lb.layout&&ab.getLayoutControls(),ab.getConnectionControls()].filter(Boolean).map(function(de,Ee){de.fitIfNeeded();de.left=vb?vb.right+5:0;de.top=2;return vb=de});ab.height=20;ab.opacity=lb.visible?1:.5;Bd.jumpToEnd()})}},{key:"getLabel",value:function(){var ab=this.getSubmorphNamed("name label")||id.morph({type:"label",
name:"name label",reactsToPointer:!1,padding:id.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),lb=ab.textString.slice(2,-1);lb&&lb==this.target.name||(ab.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return ab}},{key:"getIcon",value:function(ab){return id.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[ab.constructor.className]||
"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var ab=this.getSubmorphNamed("layout label")||id.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:id.Rectangle.inset(4,2,4,2),fill:id.Color.orange,fontColor:id.Color.white});ab._isControlElement=!0;ab.textString!=this.target.layout.name()&&(ab.value=this.target.layout.name());return ab}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(vb){return!vb.targetObj.isHalo}).length:0;var ab=this.getSubmorphNamed("connections label")||id.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:id.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:id.Color.red,fontColor:id.Color.white});ab._isControlElement=!0;ab.visible=!this.connectionHalo&&!!this.connectionCount;var lb=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";ab.textString!=lb&&(ab.value=lb);return ab}},{key:"highlightTerm",value:function(ab){var lb=this.submorphs[0],vb=lb.textAndAttributes.slice(0,2),Bd=lb.textString.slice(1).split(ab);lb.textAndAttributes=1===Bd.length?[].concat($jscomp.arrayFromIterable(vb),[Bd[0]]):[].concat($jscomp.arrayFromIterable(vb),$jscomp.arrayFromIterable(id.arr.flatten(id.arr.interpose(Bd.map(function(de){return[de,{}]}),[ab,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(ab){var lb=Da._get(Object.getPrototypeOf(Qd.prototype),"wantsToBeDroppedOn",this).call(this,ab);if(![ab].concat($jscomp.arrayFromIterable(ab.ownerChain())).includes(this.tree))this.onDragOutside();return lb}},{key:"onGrab",value:function(ab){var lb=this,vb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bd){if(1==Bd.nextAddress)return lb.tree._dropInProgress=!0,vb=lb.target.globalPosition,Da._get(Object.getPrototypeOf(Qd.prototype),
"onGrab",lb).call(lb,ab),lb._data.globalTargetPosition=vb,Bd.yield(lb.whenRendered(),2);if(lb.tree.fullContainsWorldPoint(lb.globalPosition))lb.leftCenter=id.pt(-20,0);else lb.onDragOutside();lb.tree._dropInProgress=!1;Bd.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=id.fun.createQueue("container-hover-queue",function(ab,lb){var vb,Bd,de;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ee){if(1==Ee.nextAddress)return vb=
ab.target,Bd=vb.opacity,de=vb.scale,ab.target.opacity=0,ab.target.scale=.5,$world.halos().forEach(function(Ze){return Ze.remove()}),$world.firstHand.grab(ab.target),ab.target._data=ab._data,ab.remove(),ab.target.position=id.pt(0,0),Ee.yield(ab.target.animate({opacity:Bd,scale:de,duration:200}),2);lb();Ee.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(ab){var lb=this.node.children.indexOf(ab.node||ab._data)+1;lb=this.node.children[lb];ab.target.remove();lb?(lb=this.target.submorphs.indexOf(lb.container.target),
this.target.addMorphAt(ab.target,lb)):this.target.addMorph(ab.target);ab._data.globalTargetPosition&&(ab.target.position=this.target.localize(ab._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(ab){}},{key:"toggleConnectionControl",value:function(ab){this.getSubmorphNamed("connections label").visible=ab}},{key:"toggleSelected",value:function(ab){var lb=this,vb,Bd,de;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ee){if(1==Ee.nextAddress)return Da._get(Object.getPrototypeOf(Qd.prototype),
"toggleSelected",lb).call(lb,ab),lb._active===ab?Ee.return():(lb._active=ab)&&lb.target&&lb.target.isMorph&&lb.world()?Ee.yield(lb.target.whenRendered(),3):Ee.jumpTo(0);lb.get("inspector").targetObject=lb.target;lb.get("connections tree").inspectConnectionsOf(lb.target);if(lb.connectionHalo)return Ee.return();vb=$jscomp.makeIterator(lb.world().halos());for(Bd=vb.next();!Bd.done;Bd=vb.next()){de=Bd.value;if(de.target===lb.target)return Ee.return();de.remove()}id.noUpdate({sourceObj:lb.world(),targetObj:lb.sideBar,
sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return lb.world().showHaloFor(lb.target)});Ee.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(ab){this.submorphs[0].fontFamily=ab}},fontColor:{after:["submorphs"],derived:!0,set:function(ab){this.submorphs[0].fontColor=ab}},fontSize:{derived:!0,set:function(ab){this.submorphs[0].fontSize=
ab}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],jb,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:17212,end:24827})}(id.InteractiveTreeContainer);id.MorphContainer=Ua;id.MorphContainer=Ua;id.MorphContainer=Ua;var Ta=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");Ta.visualizeConnection=function(rd,jb,Qd,ab,lb){ab=void 0===ab?{}:ab;lb=Ta.rect(0).sides.concat(Ta.rect(0).corners);
Qd=Qd||new Ta.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Ta.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Ta.Color.transparent,nativeCursor:"auto"},end:{fill:Ta.Color.orange}}},ab,{hasFixedPosition:!0}));Qd.startPoint.attachTo(rd,"rightCenter");jb.isMorph?(ab=jb.globalBounds().partNameNearest(lb,rd.globalPosition),rd.globalPosition.equals(jb.globalBounds().partNamed(ab))&&jb.globalBounds().partNameNearest(Ta.arr.without(lb,ab),rd.globalPosition),Qd.endPoint.attachTo(jb,
"leftCenter")):(lb=rd.globalBounds().topRight().addPt(Ta.pt(100,0)),jb=Ta.morph({type:"label",value:jb.toString(),styleClasses:["Tooltip"],padding:Ta.rect(8,4)}).openInWorld(lb),jb.position=rd.world().bounds().translateForInclusion(jb.bounds()).topLeft(),Ta.once(Qd,"remove",jb,"remove"),Qd.endPoint.attachTo(jb,"leftCenter"));return Qd};Ta.startConnecting=function(rd,jb){rd.animate({opacity:.8,duration:300});rd.startPoint.attachTo(jb,"center");rd.vertices[0].position=Ta.pt(2,2)};Ta.stopConnecting=
function(rd,jb,Qd,ab){function lb(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ee){if(1==Ee.nextAddress)return Ee.yield(rd.animate({opacity:0,duration:300}),2);rd.startPoint.clearConnection();rd.endPoint.clearConnection();rd.remove();Ee.jumpToEnd()})}ab=void 0===ab?"sourceAttrName":ab;var vb,Bd,de;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ee){return 1==Ee.nextAddress?(vb=rd,Bd=vb.endPoint,(de=Bd.connectedMorph)&&"MorphContainer"==de.constructor.className&&(de=de.target),
de?Ee.yield(Ta.interactiveConnectGivenSourceAndTarget(Qd,ab,de),2):Ee.jumpTo(2)):Ee.yield(lb(),0)})};Ta.editConnection=function(rd){var jb=rd.connection,Qd=rd.connectionPoint,ab;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lb){if(1==lb.nextAddress)return ab=Ta.visualizeConnection(Qd,jb.targetObj,!1,{borderColor:Ta.Color.gray.darker(),endpointStyle:{start:{fill:Ta.Color.transparent,nativeCursor:"auto"},end:{fill:Ta.Color.gray.darker()}}}),lb.yield(Ta.interactivelyReEvaluateConnection(jb,
"Edit Connection",!1),2);ab.remove();lb.jumpToEnd()})};Ta.Tree=qc;Ta.TreeData=Yb;Ta.Icon=ic;Ta.morph=fe;Ta.pt=cc;Ta.Rectangle=pb;Ta.rect=Pc;Ta.Color=jd;Ta.arr=vd;Ta.connect=fd;Ta.signal=Kb;Ta.Leash=Ob;Ta.once=Ib;Ta.interactivelyReEvaluateConnection=Sa;Ta.interactiveConnectGivenSource=fa;Ta.interactiveConnectGivenSourceAndTarget=Ia;(function(rd){var jb=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Qd=jb.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof jb.ConnectionsTreeData?
jb.ConnectionsTreeData:jb.ConnectionsTreeData=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Qd,rd,[{key:"parseMorphConnections",value:function(ab){for(var lb={},vb=$jscomp.makeIterator(void 0===ab.attributeConnections?[]:ab.attributeConnections),Bd=vb.next();!Bd.done;Bd=vb.next())Bd=Bd.value,Bd.targetObj.isHalo||(lb[Bd.sourceAttrName]=lb[Bd.sourceAttrName]||[{name:["      New Connection  ",{fontColor:Ta.Color.white.withA(.5),
fontStyle:"italic"},this.renderPin(ab,Bd.sourceAttrName),{}]}],Ta.arr.pushAt(lb[Bd.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(Bd)))},0));return{children:Object.entries(lb).map(function(de){var Ee=$jscomp.makeIterator(de);de=Ee.next().value;Ee=Ee.next().value;return{name:[de,{fontWeight:"bold"}," ",{},Ta.morph({fill:Ta.Color.white,opacity:.7,value:""+(Ee.length-1),borderRadius:15,fontWeight:"bold",padding:Ta.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],
children:Ee}}).concat([{name:["New Connection  ",{fontColor:Ta.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(ab),{}]}])}}},{key:"renderExistingConnection",value:function(ab){var lb=this,vb=Ta.morph({type:"label",fontColor:Ta.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(Ta.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},ab.targetMethodName,{}])}),Bd=this.renderDeadPin(),de=Bd.submorphs[0];Ta.connect(vb,"onHoverIn",function(){vb.fontColor=
Ta.Color.orange;vb._leash=Ta.visualizeConnection(de,ab.targetObj,vb._leash);de.fill=Ta.Color.orange;de.border={color:Ta.Color.orange,width:3}});Ta.connect(vb,"onMouseDown",function(Ee){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ze){if(1==Ze.nextAddress)return Ee.stop(),Ze.yield(Ta.interactivelyReEvaluateConnection(ab),2);Ta.signal(lb,"refresh");Ze.jumpToEnd()})});Ta.connect(vb,"onHoverOut",function(){vb.fontColor=Ta.Color.gray;de.fill=Ta.Color.gray;de.border={color:Ta.Color.white,
width:1};vb._leash.remove();vb._leash=void 0});return[vb,{},"  ",{}].concat($jscomp.arrayFromIterable(Ta.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){ab.disconnect();Ta.signal(lb,"refresh")}})),["  ",{},Bd,{}])}},{key:"renderDeadPin",value:function(){var ab=Ta.morph({type:"ellipse",fill:Ta.Color.gray,extent:Ta.pt(10,10),center:Ta.pt(8,12),borderWidth:1});return Ta.morph({extent:Ta.pt(20,20),fill:Ta.Color.transparent,reactsToPointer:!1,submorphs:[ab]})}},{key:"renderPin",
value:function(ab,lb){var vb=this,Bd=Ta.morph({type:"ellipse",fill:Ta.Color.gray.withA(.5),extent:Ta.pt(10,10),center:Ta.pt(8,12),draggable:!1,borderWidth:1}),de=new Ta.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:Ta.Color.gray.darker(),endpointStyle:{fill:Ta.Color.gray.darker()},position:Ta.pt(1,1),vertices:[Ta.pt(0,0),Ta.pt(0,0)],canConnectTo:function(Ee){return"MorphContainer"==Ee.constructor.className||2>Ta.arr.intersect([Ee].concat($jscomp.arrayFromIterable(Ee.ownerChain())),
[Bd].concat($jscomp.arrayFromIterable(Bd.ownerChain()))).length}});Bd.addMorph(de);Ta.connect(de.endPoint,"onDragStart",function(){Ta.startConnecting(de,Bd)});Ta.connect(de.endPoint,"onDragEnd",function(Ee){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ze){if(1==Ze.nextAddress)return Bd.center=Ta.pt(8,12),Ze.yield(Ta.stopConnecting(de,Bd,ab,lb),2);Ta.signal(vb,"refresh");Ze.jumpToEnd()})});return Ta.morph({extent:Ta.pt(20,20),fill:Ta.Color.transparent,reactsToPointer:!1,submorphs:[Bd]})}},
{key:"display",value:function(ab){return ab.name}},{key:"collapse",value:function(ab,lb){ab.isCollapsed=lb}},{key:"isCollapsed",value:function(ab){return ab.isCollapsed}},{key:"isLeaf",value:function(ab){return!ab.children}},{key:"getChildren",value:function(ab){return ab.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(ab){var lb=new this;lb.root=lb.parseMorphConnections(ab);return lb}}],jb,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3535,end:8087})})(Ta.TreeData);Ua=function(rd){var jb=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Qd=jb.hasOwnProperty("ConnectionsTree")&&"function"===typeof jb.ConnectionsTree?jb.ConnectionsTree:jb.ConnectionsTree=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Qd,rd,[{key:"inspectConnectionsOf",value:function(ab){if(this.targetMorph=ab)this.treeData=Ta.ConnectionsTreeData.for(ab),Ta.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=Ta.ConnectionsTreeData.for(this.targetMorph),Ta.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},
{key:"properties",get:function(){return{}}}],jb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8104,end:8657})}(Ta.Tree);Ua=Ta.ConnectionsTree;Ta.default=Ua}}});