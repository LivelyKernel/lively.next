System.register(["./__root_module__-255c8c26.js","kld-intersections","./editor-plugin-f4c5553b.js","./index-e74b4e71.js","./index-4d90b762.js"],function(Da){var Ab,Tb,kc,ec,he,gd,Zd,kd,Sc,yd,Od,fe,Ud,md,db,Fb,tc,nc,td,ke,zc,Ec,Pb,Qb;return{setters:[function(Tc){Ab=Tc.ar;Tb=Tc.bA;kc=Tc.bB;ec=Tc.bC;he=Tc.E;gd=Tc.ap;Zd=Tc.aW;kd=Tc.s;Sc=Tc.aa;yd=Tc.bn;Od=Tc.a5;fe=Tc._;Ud=Tc.bD;md=Tc.bu},function(){},function(Tc){db=Tc.p;Fb=Tc.d;tc=Tc.a;nc=Tc.r;td=Tc.C},function(Tc){ke=Tc.s},function(Tc){zc=Tc.localInterface;
Ec=Tc.systemInterfaceNamed;Pb=Tc.serverInterfaceFor;Qb=Tc.l2lInterfaceFor}],execute:function(){var Tc=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js");Tc.warnStyle={"border-bottom":"2px dotted orange"};Tc.errorStyle={"background-color":"red"};var ld=function(gc){var Oc=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js"),Wc=Oc.hasOwnProperty("JavaScriptChecker")&&"function"===typeof Oc.JavaScriptChecker?Oc.JavaScriptChecker:Oc.JavaScriptChecker=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ab(Wc,gc,[{key:"uninstall",value:function(Q){var ea=Q.text||Q;(ea.markers||[]).forEach(function(Ia){return Ia.id.startsWith("js-checker-")&&ea.removeMarker(Ia)});ea.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(Q,ea){return[].concat($jscomp.arrayFromIterable(Q.embeddedMorphMap.values())).find(function(Ia){return ea.containsPosition(Ia.anchor.position)})}},{key:"onDocumentChange",value:function(Q,
ea,Ia){var Ra=ea.document;try{var cc=Ia.parse()}catch(Nb){cc=Nb}cc&&(Q=(ea.markers||[]).filter(function(Nb){return Nb.id.startsWith("js-checker-")}),Ia=Ia.undeclaredVariables().map(function(Nb,$a){var ic=Nb.start;Nb=Nb.end;ic=Ra.indexToPosition(ic);Nb=Ra.indexToPosition(Nb);return ea.addMarker({id:"js-checker-"+$a,style:Tc.warnStyle,range:{start:ic,end:Nb},type:"js-undeclared-var"})}),Q.slice(Ia.length).forEach(function(Nb){return ea.removeMarker(Nb)}),cc.parseError?(Q=cc.parseError.loc,Ia=Q.column,
Q=Q.line-1,cc=Ra.indexToPosition(cc.parseError.pos),Ia=cc.column,Q=cc.row,cc={start:{column:Ia-1,row:Q},end:{column:Ia+1,row:Q}},this.hasEmbeddedMorphInRange(ea,cc)||ea.addMarker({id:"js-syntax-error",range:cc,style:Tc.errorStyle,type:"js-syntax-error"})):ea.removeMarker("js-syntax-error"))}}],[{key:"className",get:function(){return"JavaScriptChecker"}}],Oc,{pathInPackage:function(){return"js/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:118,end:1882})}(void 0),Rb=ld=Tc.JavaScriptChecker;Tc.default=ld;var qb=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js");qb.query=Tb;qb.fuzzyParse=kc;qb.acorn=ec;qb.custom=he;var bc=function(gc){var Oc=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js"),Wc=Oc.hasOwnProperty("JavaScriptNavigator")&&"function"===typeof Oc.JavaScriptNavigator?Oc.JavaScriptNavigator:Oc.JavaScriptNavigator=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ab(Wc,gc,[{key:"ensureAST",value:function(Q){return this.parse(Q.textString)}},{key:"parse",value:function(Q){return qb.fuzzyParse(Q)}},{key:"move",value:function(Q,ea){var Ia=!!ea.activeMark||!ea.selection.isEmpty(),Ra=ea.selection,cc=ea.positionToIndex(Ra.lead);Q=this[Q](ea.textString,cc);Q=ea.indexToPosition(Q);Ra.lead=Q;Ia||(Ra.anchor=Q);ea.scrollCursorIntoView()}},{key:"forwardSexp",value:function(Q){this.move("_forwardSexp",
Q)}},{key:"backwardSexp",value:function(Q){this.move("_backwardSexp",Q)}},{key:"backwardUpSexp",value:function(Q){this.move("_backwardUpSexp",Q)}},{key:"forwardDownSexp",value:function(Q){this.move("_forwardDownSexp",Q)}},{key:"_forwardSexp",value:function(Q,ea){Q=this.parse(Q);Q=qb.custom.findNodesIncluding(Q,ea).reverse().find(function(Ra){return Ra.end!==ea});if(!Q)return ea;if("BlockStatement"===Q.type){var Ia=Q.body.find(function(Ra){return Ra.start>ea});if(Ia)return Ia.start}return Q.end}},
{key:"_backwardSexp",value:function(Q,ea){Q=this.parse(Q);Q=qb.custom.findNodesIncluding(Q,ea).reverse().find(function(Ra){return Ra.start!==ea});if(!Q)return ea;if("BlockStatement"===Q.type){var Ia=Q.body.slice().reverse().find(function(Ra){return Ra.end<ea});if(Ia)return Ia.end}return Q?Q.start:ea}},{key:"_backwardUpSexp",value:function(Q,ea){Q=this.parse(Q);return(Q=qb.custom.findNodesIncluding(Q,ea).reverse().find(function(Ia){return Ia.start!==ea}))?Q.start:ea}},{key:"_forwardDownSexp",value:function(Q,
ea){Q=this.parse(Q);return(Q=qb.custom.findNodeAfter(Q,ea,function(Ia,Ra){return Ra.start>ea}))?Q.node.start:ea}},{key:"markDefun",value:function(Q){var ea=this.rangeForFunctionOrDefinition(Q.textString,[Q.positionToIndex(Q.selection.range.start),Q.positionToIndex(Q.selection.range.end)]);ea&&Q.execCommand("expandRegion",{start:ea[0],end:ea[1]})}},{key:"rangeForNodesMatching",value:function(Q,ea,Ia){Q=this.parse(Q);return(ea=qb.custom.findNodesIncluding(Q,ea).reverse().find(Ia))?[ea.start,ea.end]:
null}},{key:"rangeForFunctionOrDefinition",value:function(Q,ea){var Ia=ea[0]===ea[1];return this.rangeForNodesMatching(Q,ea[1],function(Ra){return["AssignmentExpression","FunctionDeclaration","FunctionExpression","MethodDefinition"].includes(Ra.type)&&(Ia&&Ra.end!==ea[1]||!Ia&&Ra.start<ea[0])?!0:!1})}},{key:"resolveIdentifierAt",value:function(Q,ea){"number"!==typeof ea&&(ea=Q.positionToIndex(ea));Q=this.ensureAST(Q);var Ia=qb.query.nodesAt(ea,Q).reverse(),Ra=Ia.find(function(Nb){return"Identifier"===
Nb.type});if(!Ra&&((Ia=Ia[0])&&Ia.type.includes("Specifier")&&Ia.local&&"Identifier"===Ia.local.type&&(Ra=Ia.local),!Ra))return;ea=(Ia=qb.query.findDeclarationClosestToIndex(Q,Ra.name,ea))?qb.query.scopeAtIndex(Q,Ia.start):qb.query.scopeAtIndex(Q,ea);var cc=qb.query.findReferencesAndDeclsInScope(ea,Ra.name).refs;return{parsed:Q,scope:ea,id:Ra,name:Ra.name,decl:Ia,refs:cc}}},{key:"expandRegion",value:function(Q,ea,Ia,Ra){function cc(nd){nd=Q.positionToIndex({column:0,row:$a.row});return{range:[nd+
ic.start,nd+ic.start+ic.value.length],prev:Ra}}var Nb=Ra.range[0]!==Ra.range[1],$a=Q.indexToPosition(Ra.range[0]),ic=Q.tokenAt($a);if(!Nb&&ic&&["keyword","identifier"].includes(ic.type))return cc();Ia=Ia||this.parse(ea);ea=qb.query.nodesAtIndex(Ia,Ra.range[0]).reverse().find(function(nd){return nd.start<Ra.range[0]||nd.end>Ra.range[1]});if(!ea)return Ra;Ia=ea.start;Nb=ea.end;return"Literal"===ea.type&&(ea.raw||"").match(/^['"`]/)&&Ra.range[0]!==ea.start&&Ra.range[1]!==ea.end&&(ea.start+1<Ra.range[0]||
ea.end-1>Ra.range[1])?{range:[Ia+1,Nb-1],prev:Ra}:{range:[Ia,Nb],prev:Ra}}},{key:"contractRegion",value:function(Q,ea,Ia,Ra){return Ra.prev||Ra}}],[{key:"className",get:function(){return"JavaScriptNavigator"}}],Oc,{pathInPackage:function(){return"js/navigator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:121,end:6658})}(void 0);
ld=bc=qb.JavaScriptNavigator;qb.default=bc;var Ic=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js");Ic.addIndexToTextPos=function(gc,Oc,Wc){return gc.indexToPosition(gc.positionToIndex(Oc)+Wc)};Ic.connect=gd;Ic.disconnect=Zd;Ic.string=kd;Ic.KeyHandler=Sc;Ic.Range=yd;bc=function(gc){var Oc=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js"),Wc=Oc.hasOwnProperty("Snippet")&&"function"===typeof Oc.Snippet?Oc.Snippet:Oc.Snippet=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ab(Wc,gc,[{key:Symbol.for("lively-instance-initialize"),value:function(Q){Q=void 0===Q?{trigger:null,expansion:""}:Q;var ea=Q.expansion;this.trigger=Q.trigger;this.expansion=ea;this.resetExpansionState()}},{key:"isTextSnippet",get:function(){return!0}},{key:"attach",value:function(Q){this.isExpanding&&(this.textMorph=Q,Ic.connect(this.textMorph,"selectionChange",this,"onCursorMove"))}},{key:"detach",value:function(Q){this.isExpanding&&
(Ic.disconnect(Q,"selectionChange",this,"onCursorMove"),this.textMorph=null)}},{key:"onCursorMove",value:function(){var Q=this.expansionState,ea=Q.startAnchor,Ia=Q.endAnchor;Q.isExpanding?Ic.Range.fromPositions(ea.position,Ia.position).containsPosition(this.textMorph.cursorPosition)||this.resetExpansionState():this.resetExpansionState()}},{key:"resetExpansionState",value:function(){var Q=this.textMorph;if(Q){var ea=this.expansionState||{},Ia=ea.marker,Ra=ea.startAnchor,cc=ea.endAnchor;ea=ea.steps;
Ra&&Q.removeAnchor(Ra);cc&&Q.removeAnchor(cc);Ia&&Q.removeMarker(Ia);ea.forEach(function(Nb){return Q.removeAnchor(Nb.anchor)})}this.expansionState={stepIndex:-1,steps:[],isExpanding:!1,startMarker:null,endMarker:null};Q&&Q.removePlugin(this)}},{key:"isExpanding",get:function(){return this.expansionState.isExpanding}},{key:"createExpansionSteps",value:function(Q){var ea=[],Ia=0;Ic.string.reMatches(Q,/\$[0-9]+|\$\{[0-9]+:[^\}]*\}/g).forEach(function(Ra){var cc=Ra.start,Nb=Ra.end;Ra=Ra.match;var $a=
"";Ra.startsWith("${")?($a=$jscomp.makeIterator(Ra.match(/^\$\{([0-9]+):([^\}]*)\}/)),$a.next(),Ra=$a.next().value,$a=$a.next().value,Ra=Number(Ra)):Ra=Number(Ra.replace(/^\$/,""));Q=Q.slice(0,cc-Ia)+$a+Q.slice(Nb-Ia);ea[Ra]={index:cc-Ia,prefill:$a,anchor:null};Ia+=Nb-cc-$a.length});return{steps:ea,expansion:Q}}},{key:"expandAtCursor",value:function(Q){var ea=Q.selection,Ia=Q.cursorPosition.column,Ra=this.expansion;this.trigger&&(Ia-=this.trigger.length);if(Ia=Math.max(0,Ia))Ra=Ic.string.lines(Ra),
Ra=[Ra[0]].concat($jscomp.arrayFromIterable(Ra.slice(1).map(function(vd){return Ic.string.indent(vd," ",Ia)}))),Ra=Ra.join("\n");var cc=this.createExpansionSteps(Ra);Ra=cc.expansion;cc=cc.steps;this.trigger&&ea.growLeft(this.trigger.length);ea.text=Ra;var Nb=ea.start;Ra=ea.end;ea.collapseToEnd();if(cc.length){var $a=Ic.string.newUUID();cc.forEach(function(vd,Xc){return vd.anchor=Q.addAnchor(Object.assign({id:"snippet-step-"+Xc+"-"+$a},Ic.addIndexToTextPos(Q,Nb,vd.index)))});var ic=Q.addAnchor(Object.assign({id:"snippet-start-"+
$a},Nb,{insertBehavior:"stay"})),nd=Q.addAnchor(Object.assign({id:"snippet-end-"+$a},Ra));this.expansionState={marker:Q.addMarker({id:"snippet-marker-"+$a,get range(){return{start:ic.position,end:nd.position}},style:{"border-radius":"4px","background-color":"rgba(30, 200, 140, 0.3)","box-shadow":"0 0 4px rgba(30, 200, 140, 0.3)","pointer-events":"none",content:"fooooo"}}),startAnchor:ic,endAnchor:nd,stepIndex:0,steps:cc,isExpanding:!0};Q.addPlugin(this);this.nextStep()}}},{key:"nextStep",value:function(){var Q=
this.expansionState,ea=Q.steps,Ia=this.textMorph;if(Q.isExpanding&&Ia){Ia=Ia.selection;Q=ea[Q.stepIndex];var Ra=Q.prefill;Ia.lead=Ia.anchor=Q.anchor.position;Ia.growRight(Ra.length);this.expansionState.stepIndex++;this.expansionState.stepIndex>=ea.length&&(this.resetExpansionState(),console.log("[snippet] expansion of "+this.expansion+" done"))}}},{key:"canExpand",value:function(Q,ea){ea=Q.positionToIndex(Q.cursorPosition);return Q.textString.slice(ea-this.trigger.length,ea)===this.trigger}},{key:"tryTrigger",
value:function(Q,ea){if(!this.canExpand(Q,Q.cursorPosition))return!1;this.expandAtCursor(Q);return!0}},{key:"getCommands",value:function(Q){var ea=this;return Q.concat([{name:"[snippet] next expansion step",exec:function(Ia){ea.nextStep();return!0}},{name:"[snippet] cancel expansion",exec:function(Ia){ea.resetExpansionState();return!0}}])}},{key:"getKeyHandlers",value:function(Q){return Q.concat(Ic.KeyHandler.withBindings([{keys:"Tab",command:"[snippet] next expansion step"},{keys:"Escape",command:"[snippet] cancel expansion"}]))}}],
[{key:"className",get:function(){return"Snippet"}}],Oc,{pathInPackage:function(){return"text/snippets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:356,end:5934})}(void 0);Ic.Snippet=bc;Ic.Snippet=bc;Ic.Snippet=bc;var ra=[{name:"get snippets",exec:function(gc){return gc.pluginCollect("getSnippets",[])}}];Ic.snippetCommands=ra;Ic.snippetCommands=
ra;Ic.snippetCommands=ra;var Fa=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js");Fa.buildEvalOpts=function(gc,Oc){return gc.plugins.find(function(Wc){return Wc.isJSEditorPlugin}).sanatizedJsEnv(Oc)};Fa.Snippet=bc;ra=function(gc){var Oc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Wc=Oc.hasOwnProperty("ModuleTopLevelVarCompleter")&&"function"===typeof Oc.ModuleTopLevelVarCompleter?Oc.ModuleTopLevelVarCompleter:Oc.ModuleTopLevelVarCompleter=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ab(Wc,gc,[{key:"compute",value:function(Q,ea){var Ia,Ra,cc,Nb,$a,ic;return $jscomp.asyncExecutePromiseGeneratorProgram(function(nd){if(1==nd.nextAddress){Ra=(Ia=Q.pluginFind(function(vd){return vd.isJSEditorPlugin}))&&Ia.systemInterface();if(!Ra)return nd.return([]);cc=Fa.buildEvalOpts(Q);Nb=cc.targetModule;return"local"===Ra.name?($a=Object.getOwnPropertyNames(Ra.getModule(Nb).recorder),nd.jumpTo(2)):nd.yield(Ra.runEval('\n        var result, livelySystem = typeof System !== "undefined"\n                      && System.get(System.decanonicalize("lively-system-interface"));\n        if (livelySystem) {\n          result = JSON.stringify(\n            Object.getOwnPropertyNames(livelySystem.localInterface.getModule("'+
Nb+'").recorder));\n        } else {\n          var G = typeof window !== "undefined" ?\n            window : typeof global !== "undefined" ? global : this;\n          result = JSON.stringify(Object.getOwnPropertyNames(G));\n        }\n        result;\n      ',{targetModule:"lively://module-recorder-completer"}),3)}if(2!=nd.nextAddress){ic=nd.yieldResult;if(ic.isError)return nd.return([]);$a=JSON.parse(ic.value)}$a=$a.filter(function(vd){return!vd.startsWith("defVar_")&&!["System","__currentLivelyModule",
"initializeES6ClassForLively","_moduleExport","_moduleImport"].includes(vd)});return nd.return($a.map(function(vd){return{priority:1100,completion:vd}}))})}}],[{key:"className",get:function(){return"ModuleTopLevelVarCompleter"}}],Oc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:222,
end:1678})}(void 0);Fa.ModuleTopLevelVarCompleter=ra;Fa.ModuleTopLevelVarCompleter=ra;Fa.ModuleTopLevelVarCompleter=ra;ra=function(gc){var Oc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Wc=Oc.hasOwnProperty("DynamicJavaScriptCompleter")&&"function"===typeof Oc.DynamicJavaScriptCompleter?Oc.DynamicJavaScriptCompleter:Oc.DynamicJavaScriptCompleter=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ab(Wc,
gc,[{key:"isValidPrefix",value:function(Q){return/\.[a-z0-9_]*$/i.test(Q)}},{key:"isMethodCallCompletion",value:function(Q){return Q.endsWith(")")&&0<Q.indexOf("(")}},{key:"isValidIdentifier",value:function(Q){if("string"!==typeof Q)return!1;this.isMethodCallCompletion(Q)&&(Q=Q.slice(0,Q.indexOf("(")));return/^[a-z_\$][0-9a-z_\$]*$/i.test(Q)?!0:!1}},{key:"wrapInBrackets",value:function(Q){if(!isNaN(Number(Q))||Q.startsWith("Symbol."))return"["+Q+"]";var ea="";this.isMethodCallCompletion(Q)&&(ea=Q.slice(Q.indexOf("(")),
Q=Q.slice(0,Q.indexOf("(")));return'["'+Q.replace(/"/g,'\\"')+'"]'+ea}},{key:"compute",value:function(Q){var ea=this,Ia,Ra,cc,Nb,$a,ic,nd,vd,Xc,Wa,Nc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){if(1==pb.nextAddress){Ia=Q.selection;Ia.isEmpty()?(Ra=Q.getLine(Ia.lead.row),Ra=Ra.slice(Ra.lastIndexOf(":")+1,Ia.lead.column)):Ra=Ia.text.slice(Math.max(0,Ia.text.indexOf(":")),0);if(!ea.isValidPrefix(Ra))return pb.return([]);Nb=(cc=Q.pluginFind(function(gb){return gb.isJSEditorPlugin}))&&
cc.systemInterface();if(!Nb)return pb.return([]);$a=Fa.buildEvalOpts(Q);return pb.yield(Nb.dynamicCompletionsForPrefix($a.targetModule,Ra,$a),2)}ic=pb.yieldResult;nd=ic.isError;vd=ic.value;Xc=ic.completions;Wa=ic.prefix;if(nd)return console.warn("javascript completer encountered error: "+(vd.stack||vd)),pb.return([]);Xc.reduce(function(gb,hb){hb=$jscomp.makeIterator(hb);hb.next();hb=hb.next().value;return gb+hb.length},0);Nc=Xc.reduce(function(gb,hb,Yb){hb=$jscomp.makeIterator(hb);var Xb=hb.next().value;
hb=hb.next().value;return gb.concat(hb.map(function(Fd){var Be=ea.isValidIdentifier(Fd);return{info:Xb,completion:Fd,prefix:Be?Wa:"."+Wa,customInsertionFn:Be?ea.isMethodCallCompletion(Fd)?function(Ie,Lf,ed,ue){Lf=ue.start;ue=ue.end;Ie=Ie.replace(/\((.*)\)/,function(Md){return"("+Md.slice(1,-1).split(", ").map(function(Zb,ta){return"${"+ta+":"+Zb+"}"}).join(", ")+")"});Ie=new Fa.Snippet({expansion:Ie});ed.replace({start:Lf,end:ue},"");Ie.expandAtCursor(ed)}:null:function(Ie,Lf,ed,ue){Ie=ue.start;ue=
ue.end;Lf={row:Ie.row,column:Ie.column-1};ue="."===ed.textInRange({start:Lf,end:Ie})?{start:Lf,end:ue}:{start:Ie,end:ue};ed.replace(ue,ea.wrapInBrackets(Fd))}}}))},[]);Nc.forEach(function(gb,hb){return Object.assign(gb,{priority:2E3+Nc.length-hb})});return pb.return(Nc)})}}],[{key:"className",get:function(){return"DynamicJavaScriptCompleter"}}],Oc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1687,end:5122})}(void 0);Fa.DynamicJavaScriptCompleter=ra;Fa.DynamicJavaScriptCompleter=ra;Fa.DynamicJavaScriptCompleter=ra;Fa.keywords="arguments boolean break case catch class const continue debugger default delete eval export import extends false true finally instanceof static super this throw typeof while with yield await Array Date eval function hasOwnProperty Infinity isFinite isNaN isPrototypeOf length Math NaN name Number Object prototype String toString undefined valueOf alert assign clearInterval clearTimeout decodeURI decodeURIComponent document encodeURI encodeURIComponent escape navigator parseFloat parseInt setInterval setTimeout window document requestAnimationFrame cancelAnimationFrame".split(" ");
ra=function(gc){var Oc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Wc=Oc.hasOwnProperty("JavaScriptKeywordCompleter")&&"function"===typeof Oc.JavaScriptKeywordCompleter?Oc.JavaScriptKeywordCompleter:Oc.JavaScriptKeywordCompleter=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ab(Wc,gc,[{key:"compute",value:function(Q,ea){return Fa.keywords.map(function(Ia){return{completion:Ia,priority:0}})}}],
[{key:"className",get:function(){return"JavaScriptKeywordCompleter"}}],Oc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6125,end:6262})}(void 0);Fa.JavaScriptKeywordCompleter=ra;Fa.JavaScriptKeywordCompleter=ra;Fa.JavaScriptKeywordCompleter=ra;ra=[new Fa.DynamicJavaScriptCompleter,new Fa.JavaScriptKeywordCompleter,
new Fa.ModuleTopLevelVarCompleter];Fa.completers=ra;Fa.completers=ra;Fa.completers=ra;var mb=lively.FreezerRuntime.recorderFor("lively.ide/js/snippets.js");mb.Snippet=bc;var ub=[["typef",'typeof ${0:object} === "function"$1'],["types",'typeof ${0:object} === "string"$1'],["typen",'typeof ${0:object} === "number"$1'],["typeu",'typeof ${0:object} === "undefined"$1'],["typenu",'typeof ${0:object} !== "undefined"$1'],["import",'import { ${0:name} } from "${1:module}";'],["importd",'import ${0:name} from "${1:module}";'],
["import*",'import * as ${0:name} from "${1:module}";'],["subclass","class ${0:name} extends ${1:base} {\n  constructor(${2:args}) {\n    super(${3:args})\n    $4\n  }\n}"],["class","class ${0:name} {\n  constructor(${1:args}) {\n    $2\n  }\n}"],["switch","switch (${0:expression}) {\n  case '${2:case}':\n    ${3:// code}\n    break;\n    $4\n    default:\n    ${1:// code}\n}"],["tryf","try {${0:/* code */}} finally {}"],["try","try {${0:/* code */}} catch (err) {}"],["do","do {${1:/* code */}} while (${0:/* condition */});"],
["fori","for (let ${0:prop} in ${1:obj}) {\n  ${2:obj[prop]}\n}"],["foro","for (let ${0:value} of ${1:iterable}) {\n  ${2:value}\n}"],["for-","for (let ${0:i} = ${1:list}.length; ${2:i}--; ) {\n  $3\n}"],["for","for (let ${0:i} = 0; ${1:i} < ${3:list}.length; ${2:i}++) {\n  $4\n}"],["Prom","new Promise((resolve, reject) => {$0})"],["keys","Object.keys($0)"],["assign","Object.assign(${0:dest}, ${1:source})"],["stringi","JSON.stringify(${0:object})"],["forE","forEach(${0:ea} => $1)"],["map","map(${0:ea} => $1)"],
["reduce","reduce((${1:all}, ${2:ea}) => {$3}, ${0:init})"],["from","Array.from(${0:list})"],["last","arr.last(${0:list})"],["pluck",'arr.pluck(${0:list}, "${1:key}")'],["sortBy","arr.sortBy(${0:list}, ($1) => $2)"],["join",'join("\\n")'],["con","connect(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["once","once(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["sig","signal(${0:source}, '${1:sourceAttr}', ${2:value});"],["ll","lively.lang."],["lls","lively.lang.string."],
["lla","lively.lang.arr."],["llo","lively.lang.obj."],["llf","lively.lang.fun."],["llp","lively.lang.promise."],["withA","withAllSubmorphsDo(ea => { return ${0:ea}; })"],["$w","$world"],["$m","$morph('${0:name}')"],["get",'get("${0:name}")'],["$","${$0}"],["cl","console.log($0)"],["cw","console.warn($0)"],["ce","console.error($0)"],["s","show(`$0`);"],["l2lC",'import L2LClient from "lively.2lively/client.js";\nlet l2lClient = L2LClient.default();$0'],["fun","function ${0:functionName}($1) {$2}"],
["fn","function($0) {$1}"],["f","($0) => $1"],["aw","await $0"]];mb.snippets=ub;mb.snippets=ub;mb.snippets=ub;var Db=lively.FreezerRuntime.recorderFor("lively.ide/js/commands.js");Db.getEvalEnv=function(gc){return(gc=gc.pluginFind(function(Oc){return Oc.isJSEditorPlugin}))?gc.evalEnvironment:null};Db.setEvalEnv=function(gc,Oc){(gc=gc.pluginFind(function(Wc){return Wc.isJSEditorPlugin}))&&Object.assign(gc.evalEnvironment,Oc);return gc.evalEnvironment};Db.pToI=function(gc,Oc){return gc.positionToIndex(Oc)};
Db.iToP=function(gc,Oc){return gc.indexToPosition(Oc)};Db.arr=Od;Db.promise=fe;Db.string=kd;Db.show=ke;Db.Range=yd;Db.query=Tb;Db.BaseVisitor=Ud;mb=[{name:"undefine variable",doc:"Finds the variable at cursor position (or position passed) and undefines it in the module toplevel scope.",exec:function(gc,Oc){Oc=void 0===Oc?{varName:null,position:null}:Oc;var Wc,Q,ea,Ia,Ra,cc,Nb,$a,ic,nd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vd){switch(vd.nextAddress){case 1:Wc=Oc;Q=Wc.varName;
ea=Wc.position;if(!Q){ea||(ea=gc.cursorPosition);Ia=gc.pluginInvokeFirst("getNavigator");Ra=Ia.ensureAST(gc);cc=Db.query.nodesAt(gc.positionToIndex(ea),Ra).reverse().find(function(Xc){return"Identifier"===Xc.type});if(!cc)return gc.showError(Error("no identifier found!")),vd.return(!0);Q=cc.name}Oc=gc.pluginFind(function(Xc){return Xc.isJSEditorPlugin}).sanatizedJsEnv();Nb='lively.modules.module("'+Oc.targetModule+'").undefine("'+Q+'")';vd.setCatchFinallyBlocks(2);return vd.yield(gc.doEval(null,Oc,
Nb),4);case 4:$a=vd.yieldResult;ic=$a.error?$a.error:$a.isError?$a.value:null;vd.leaveTryBlock(3);break;case 2:ic=nd=vd.enterCatchBlock();case 3:return ic?gc.showError(ic):gc.setStatusMessage(Q+" undefined"),vd.return(!0)}})}},{name:"change doitContext",exec:function(gc){var Oc,Wc,Q,ea,Ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ra){if(1==Ra.nextAddress)return Oc=$jscomp,Wc=Oc.makeIterator,Ra.yield(gc.world().execCommand("select morph",{prompt:"select morph for doitContext",justReturn:!0,
prependItems:["reset"],filterFn:function(cc){return!cc.isUsedAsEpiMorph()}}),2);Q=Wc.call(Oc,Ra.yieldResult);if(ea=Q.next().value)Ia="reset"===ea,gc.doitContext=Ia?null:ea,gc.setStatusMessage(Ia?"doitContext is now\n"+ea:"doitContext reset");return Ra.return(!0)})}},{name:"change eval backend",exec:function(gc,Oc){Oc=void 0===Oc?{backend:void 0}:Oc;var Wc,Q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){if(1==ea.nextAddress)return Wc=Oc,Q=Wc.backend,void 0!==Q?ea.jumpTo(2):ea.yield(gc.world().prompt("choose eval backend",
{historyId:"js-eval-backend-history"}),3);if(2!=ea.nextAddress&&(Q=ea.yieldResult,!Q))return gc.setStatusMessage("Canceled"),ea.return(!0);"local"===Q&&(Q=null);gc.setStatusMessage("Eval backend is now "+(Q||"local"));return ea.return(Db.setEvalEnv(gc,{remote:Q}))})}},{name:"copy current module name to clipboard",exec:function(gc){var Oc=gc.evalEnvironment.targetModule;gc.setStatusMessage(Oc?Oc:"Cannot find module name");gc.env.eventDispatcher.killRing.add(gc);gc.env.eventDispatcher.doCopy(Oc);return!0}}];
Db.jsEditorCommands=mb;Db.jsEditorCommands=mb;Db.jsEditorCommands=mb;var cb=[{name:"[javascript] list errors and warnings",exec:function(gc){var Oc,Wc,Q,ea,Ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ra){if(1==Ra.nextAddress){Oc=(gc.markers||[]).filter(function(cc){cc=cc.type;return"js-undeclared-var"===cc||"js-syntax-error"===cc});if(!Oc.length)return Db.show("no warnings or errors"),Ra.return(!0);Wc=Oc.map(function(cc){var Nb=cc.range;return{isListItem:!0,string:"["+cc.type.split("-").slice(1).join(" ")+
"] "+gc.textInRange(Nb),value:Nb}});return Ra.yield(gc.world().filterableListPrompt("jump to warning or error",Wc),2)}Q=Ra.yieldResult;ea=$jscomp.makeIterator(Q.selected);if(Ia=ea.next().value)gc.saveMark(),gc.selection=Ia,gc.centerRow(Ia.start.row);return Ra.return(!0)})}},{name:"[javascript] inject import",exec:function(gc,Oc){Oc=void 0===Oc?{gotoImport:!1,insertImportAtCursor:!0}:Oc;var Wc,Q,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){switch(Ia.nextAddress){case 1:return Ia.yield(Db.promise.delay(0),
2);case 2:return Ia.yield(System.import("lively.ide/js/import-helper.js"),3);case 3:return Wc=Ia.yieldResult,Q=Wc.interactivelyInjectImportIntoText,Ia.yield(Q(gc,Oc),4);case 4:return(ea=Ia.yieldResult)||gc.setStatusMessage("canceled"),Ia.return(ea)}})}},{name:"[javascript] fix undeclared variables",exec:function(gc,Oc){Oc=void 0===Oc?{ignore:[],autoApplyIfSingleChoice:!1,requester:gc}:Oc;var Wc,Q,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){if(1==Ia.nextAddress)return Ia.yield(System.import("lively.ide/js/import-helper.js"),
2);if(3!=Ia.nextAddress)return Wc=Ia.yieldResult,Q=Wc.interactivlyFixUndeclaredVariables,Ia.yield(Q(gc,Oc),3);ea=Ia.yieldResult;gc.focus();return Ia.return(ea)})}},{name:"[javascript] remove unused imports",exec:function(gc,Oc){Oc=void 0===Oc?{query:!0}:Oc;var Wc,Q,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){if(1==Ia.nextAddress)return Ia.yield(System.import("lively.ide/js/import-helper.js"),2);if(3!=Ia.nextAddress)return Wc=Ia.yieldResult,Q=Wc.cleanupUnusedImports,Ia.yield(Q(gc,
Oc),3);ea=Ia.yieldResult;gc.setStatusMessage(ea);return Ia.return(!0)})}},{name:"[javascript] eslint report",exec:function(gc){var Oc,Wc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){if(1==Q.nextAddress)return Q.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Oc=Q.yieldResult;Wc=Oc.default;try{return Q.return(Wc.reportOnMorph(gc))}catch(ea){gc.showError(ea)}Q.jumpToEnd()})}},{name:"[javascript] eslint preview fixes",exec:function(gc){var Oc,Wc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){if(1==
Q.nextAddress)return Q.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Oc=Q.yieldResult;Wc=Oc.default;try{return Q.return(Wc.previewFixesOnMorph(gc))}catch(ea){gc.showError(ea)}Q.jumpToEnd()})}},{name:"[javascript] auto format code",handlesCount:!0,exec:function(gc,Oc,Wc){function Q(pb,gb){gb||(gb=$a(pb,{allowReturnOutsideFunction:!0}));var hb=Db.string.lineRanges(pb),Yb=pb.split("\n"),Xb=[],Fd=new Db.BaseVisitor,Be=Fd.visitVariableDeclaration;Fd.visitVariableDeclaration=function(ue,
Md,Zb){if(1<ue.declarations.length)for(var ta=Db.string.findLineWithIndexInLineRanges(hb,ue.start),Ba=ue.declarations[0].start-hb[ta][0],Mb={},P=1;P<ue.declarations.length;Mb={$jscomp$loop$prop$actionType$2286:Mb.$jscomp$loop$prop$actionType$2286,$jscomp$loop$prop$arg$2287:Mb.$jscomp$loop$prop$arg$2287},P++){var xa=ue.declarations[P],Qa=Db.string.findLineWithIndexInLineRanges(hb,xa.start);if(ta!==Qa){var Kb=Yb[Qa].match(/\s*/)[0].length;Kb=Ba-Kb;0!==Kb&&(xa=Db.string.findLineWithIndexInLineRanges(hb,
xa.end),Mb.$jscomp$loop$prop$actionType$2286=0<Kb?"insert":"delete",Mb.$jscomp$loop$prop$arg$2287=0<Kb?" ".repeat(Kb):-Kb,Xb.push.apply(Xb,$jscomp.arrayFromIterable(Db.arr.range(Qa,xa).map(function(Pc){return function(Zc){return[Pc.$jscomp$loop$prop$actionType$2286,hb[Zc][0],Pc.$jscomp$loop$prop$arg$2287]}}(Mb)))))}}return Be.call(Fd,ue,Md,Zb)};Fd.accept(gb,{},[]);for(gb=Xb.length;gb--;){var Ie=$jscomp.makeIterator(Xb[gb]),Lf=Ie.next().value,ed=Ie.next().value;Ie=Ie.next().value;"insert"===Lf?pb=
pb.slice(0,ed)+Ie+pb.slice(ed):"delete"===Lf&&(pb=pb.slice(0,ed)+pb.slice(ed+Ie))}return pb}var ea,Ia,Ra,cc,Nb,$a,ic,nd,vd,Xc,Wa,Nc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){switch(pb.nextAddress){case 1:return ea=Wc?Wc:Math.floor(gc.width/gc.defaultCharExtent().width),Oc=Object.assign({printWidth:ea,tabWidth:2,useTabs:!1,bracketSpacing:!1},Oc),Ia=lively.modules.module,Ra=System.normalizeSync("prettier/standalone.js"),pb.yield(Ia(Ra).load({format:"global",instrument:!1}),2);
case 2:return cc=pb.yieldResult,pb.yield(Ia("lively.ast/lib/acorn-extension.js").load(),3);case 3:return pb.yield(Ia("lively.ast").load(),4);case 4:return Nb=pb.yieldResult,$a=Nb.parse,pb.yield(Ia("lively.ast/lib/query.js").load(),5);case 5:return pb.yield(System.import("jsdiff",System.decanonicalize("lively.morphic")),6);case 6:return ic=pb.yieldResult,nd=gc.selection.isEmpty()?gc.documentRange:gc.selection.range,vd=gc.positionToIndex(nd.start),Xc=gc.positionToIndex(nd.end),Wa=cc.format(gc.textString,
Object.assign({},Oc,{rangeStart:vd,rangeEnd:Xc,parser:function(gb,hb,Yb){return $a(gb,{allowReturnOutsideFunction:!0})}})),gc.undoManager.group(),Nc=ic.diffChars(gc.textString,Wa),gc.applyJsDiffPatch(Nc),gc.selection.text=Q(gc.selection.text),gc.undoManager.group(),pb.return(!0)}})}}];Db.jsIdeCommands=cb;Db.jsIdeCommands=cb;Db.jsIdeCommands=cb;var fb=[{name:"selectDefinition",readOnly:!0,bindKey:"Alt-.",exec:function(gc,Oc){Oc=gc.pluginInvokeFirst("getNavigator");if(!Oc)return!0;Oc=Oc.resolveIdentifierAt(gc,
gc.cursorPosition);if(!Oc||!Oc.id)return Db.show("No symbol identifier selected"),!0;if(!Oc.decl)return Db.show("Cannot find declaration of "+Oc.name),!0;gc.saveMark();gc.selection={start:gc.indexToPosition(Oc.decl.start),end:gc.indexToPosition(Oc.decl.end)};gc.scrollCursorIntoView();return!0}},{name:"selectSymbolReferenceOrDeclarationNext",readOnly:!0,multiSelectAction:"single",exec:function(gc){gc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"next"})}},{name:"selectSymbolReferenceOrDeclarationPrev",
readOnly:!0,multiSelectAction:"single",exec:function(gc){gc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"prev"})}},{name:"selectSymbolReferenceOrDeclaration",doc:"Finds the name of the currently selected symbol and will use the JS ast to select references and declarations whose name matches the symbol in the current scope.",readOnly:!0,multiSelectAction:"single",exec:function(gc,Oc){Oc=void 0===Oc?{direction:null}:Oc;var Wc=gc.pluginInvokeFirst("getNavigator");if(!Wc)return!0;Wc=Wc.resolveIdentifierAt(gc,
gc.cursorPosition);if(!Wc||!Wc.refs)return Db.show("No symbol identifier selected"),!0;var Q=gc.selection;Wc=Wc.refs.map(function(Ia){var Ra=Ia.end;return Db.Range.fromPositions(Db.iToP(gc,Ia.start),Db.iToP(gc,Ra))}).concat(Wc.decl?Db.Range.fromPositions(Db.iToP(gc,Wc.decl.start),Db.iToP(gc,Wc.decl.end)):[]).sort(Db.Range.compare);if(!Wc.length)return!0;var ea=Wc.map(String).indexOf(String(Q.range));if("next"===Oc.direction||"prev"===Oc.direction)-1===ea&&Wc.length?Wc=[Wc[0]]:(Oc=ea+("next"===Oc.direction?
1:-1),0>Oc?Oc=Wc.length-1:Oc>=Wc.length&&(Oc=0),Wc=[Wc[Oc]]);Wc.forEach(function(Ia){var Ra=Q.selections.findIndex(function(Nb){return Nb.range.equals(Ia)}),cc=Q.selections.length-1;-1<Ra?Db.arr.swap(Q.selections,Ra,cc):Q.addRange(Ia,!1)});Q.mergeSelections();return!0}}];Db.astEditorCommands=fb;Db.astEditorCommands=fb;Db.astEditorCommands=fb;lively.modules&&!lively.FreezerRuntime&&lively.modules.module("lively.ide/js/editor-plugin.js").reload({reloadDeps:!1,resetEnv:!1});var Eb=lively.FreezerRuntime.recorderFor("lively.ide/js/mode.js");
Eb.expressionAllowed=function(gc,Oc,Wc){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(Oc.lastType)||"quasi"==Oc.lastType&&/\{\s*$/.test(gc.string.slice(0,gc.pos-(Wc||0)))};Eb.passIndent=db;Eb.defineMode=Fb;Eb.defineMIME=tc;Eb.registerHelper=nc;Eb.defaultConfig={indentUnit:2};Eb.defaultParserConfig={name:"javascript",statementIndent:2,jsonld:!1,json:!1,typescript:!1,wordCharacters:/[\w$\xa1-\uffff]/,globalVars:[],localVars:[],doubleIndentSwitch:null};Eb.defineMode("javascript",
function(gc,Oc){function Wc(Wb,Bd,Lc){Gl=Wb;lk=Lc;return Bd}function Q(Wb,Bd){var Lc=Wb.next();if('"'==Lc||"'"==Lc)return Bd.tokenize=ea(Lc),Bd.tokenize(Wb,Bd);if("."==Lc&&Wb.match(/^\d+(?:[eE][+\-]?\d+)?/))return Wc("number","number");if("."==Lc&&Wb.match(".."))return Wc("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(Lc))return Wc(Lc);if("="==Lc&&Wb.eat(">"))return Wc("=>","operator");if("0"==Lc&&Wb.eat(/x/i))return Wb.eatWhile(/[\da-f]/i),Wc("number","number");if("0"==Lc&&Wb.eat(/o/i))return Wb.eatWhile(/[0-7]/i),
Wc("number","number");if("0"==Lc&&Wb.eat(/b/i))return Wb.eatWhile(/[01]/i),Wc("number","number");if(/\d/.test(Lc))return Wb.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),Wc("number","number");if("/"==Lc){if(Wb.eat("*"))return Bd.tokenize=Ia,Ia(Wb,Bd);if(Wb.eat("/"))return Wb.skipToEnd(),Wc("comment","comment");if(Eb.expressionAllowed(Wb,Bd,1)){a:for(var ze=Bd=!1;null!=(Lc=Wb.next());){if(!Bd){if("/"==Lc&&!ze)break a;"["==Lc?ze=!0:ze&&"]"==Lc&&(ze=!1)}Bd=!Bd&&"\\"==Lc}Wb.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);
return Wc("regexp","string-2")}Wb.eatWhile(ok);return Wc("operator","operator",Wb.current())}if("`"==Lc)return Bd.tokenize=Ra,Ra(Wb,Bd);if("#"==Lc)return Wb.skipToEnd(),Wc("error","error");if(ok.test(Lc))return">"==Lc&&Bd.lexical&&">"==Bd.lexical.type||Wb.eatWhile(ok),Wc("operator","operator",Wb.current());if(cm.test(Lc))return Wb.eatWhile(cm),Wb=Wb.current(),(Lc=ch.propertyIsEnumerable(Wb)&&ch[Wb])&&"."!=Bd.lastType?Wc(Lc.type,Lc.style,Wb):Wc("variable","variable",Wb)}function ea(Wb){return function(Bd,
Lc){var ze=!1,id;if(oi&&"@"==Bd.peek()&&Bd.match(Fl))return Lc.tokenize=Q,Wc("jsonld-keyword","meta");for(;null!=(id=Bd.next())&&(id!=Wb||ze);)ze=!ze&&"\\"==id;ze||(Lc.tokenize=Q);return Wc("string","string")}}function Ia(Wb,Bd){for(var Lc=!1,ze;ze=Wb.next();){if("/"==ze&&Lc){Bd.tokenize=Q;break}Lc="*"==ze}return Wc("comment","comment")}function Ra(Wb,Bd){for(var Lc=!1,ze;null!=(ze=Wb.next());){if(!Lc&&("`"==ze||"$"==ze&&Wb.eat("{"))){Bd.tokenize=Q;break}Lc=!Lc&&"\\"==ze}return Wc("quasi","string-2",
Wb.current())}function cc(Wb,Bd){Bd.fatArrowAt&&(Bd.fatArrowAt=null);var Lc=Wb.string.indexOf("=>",Wb.start);if(!(0>Lc)){if(Kk){var ze=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Wb.string.slice(Wb.start,Lc));ze&&(Lc=ze.index)}ze=0;var id=!1;for(--Lc;0<=Lc;--Lc){var Wg=Wb.string.charAt(Lc),pk="([{}])".indexOf(Wg);if(0<=pk&&3>pk){if(!ze){++Lc;break}if(0==--ze){"("==Wg&&(id=!0);break}}else if(3<=pk&&6>pk)++ze;else if(cm.test(Wg))id=!0;else{if(/["'\/]/.test(Wg))return;if(id&&!ze){++Lc;break}}}id&&
!ze&&(Bd.fatArrowAt=Lc)}}function Nb(Wb,Bd,Lc,ze,id,Wg){this.indented=Wb;this.column=Bd;this.type=Lc;this.prev=id;this.info=Wg;null!=ze&&(this.align=ze)}function $a(){for(var Wb=arguments.length-1;0<=Wb;Wb--)Wf.cc.push(arguments[Wb])}function ic(){$a.apply(null,arguments);return!0}function nd(Wb){function Bd(ze){for(;ze;ze=ze.next)if(ze.name==Wb)return!0;return!1}var Lc=Wf.state;Wf.marked="def";Lc.context?Bd(Lc.localVars)||(Lc.localVars={name:Wb,next:Lc.localVars}):!Bd(Lc.globalVars)&&Oc.globalVars&&
(Lc.globalVars={name:Wb,next:Lc.globalVars})}function vd(){Wf.state.context={prev:Wf.state.context,vars:Wf.state.localVars};Wf.state.localVars=Vm}function Xc(){Wf.state.localVars=Wf.state.context.vars;Wf.state.context=Wf.state.context.prev}function Wa(Wb,Bd){var Lc=function(){var ze=Wf.state,id=ze.indented;if("stat"==ze.lexical.type)id=ze.lexical.indented;else for(var Wg=ze.lexical;Wg&&")"==Wg.type&&Wg.align;Wg=Wg.prev)id=Wg.indented;ze.lexical=new Nb(id,Wf.stream.column(),Wb,null,ze.lexical,Bd)};
Lc.lex=!0;return Lc}function Nc(){var Wb=Wf.state;Wb.lexical.prev&&(")"==Wb.lexical.type&&(Wb.indented=Wb.lexical.indented),Wb.lexical=Wb.lexical.prev)}function pb(Wb){function Bd(Lc){return Lc==Wb?ic():";"==Wb?$a():ic(Bd)}return Bd}function gb(Wb,Bd){return"var"==Wb?ic(Wa("vardef",Bd.length),Yc,pb(";"),Nc):"keyword a"==Wb?ic(Wa("form"),Xb,gb,Nc):"keyword b"==Wb?ic(Wa("form"),gb,Nc):"{"==Wb?ic(Wa("}"),jf,Nc):";"==Wb?ic():"if"==Wb?("else"==Wf.state.lexical.info&&Wf.state.cc[Wf.state.cc.length-1]==
Nc&&Wf.state.cc.pop()(),ic(Wa("form"),Xb,gb,Nc,Ja)):"function"==Wb?ic(yb):"for"==Wb?ic(Wa("form"),ab,gb,Nc):"variable"==Wb?Kk&&"type"==Bd?(Wf.marked="keyword",ic(we,pb("operator"),we,pb(";"))):ic(Wa("stat"),xa):"switch"==Wb?ic(Wa("form"),Xb,pb("{"),Wa("}","switch"),jf,Nc,Nc):"case"==Wb?ic(hb,pb(":")):"default"==Wb?ic(pb(":")):"catch"==Wb?ic(Wa("form"),vd,pb("("),Jc,pb(")"),gb,Nc,Xc):"class"==Wb?ic(Wa("form"),Dd,Nc):"export"==Wb?ic(Wa("stat"),df,Nc):"import"==Wb?ic(Wa("stat"),Jh,Nc):"module"==Wb?ic(Wa("form"),
Rf,pb("{"),Wa("}"),jf,Nc,Nc):"async"==Wb?ic(gb):"@"==Bd?ic(hb,gb):$a(Wa("stat"),hb,pb(";"),Nc)}function hb(Wb){return Fd(Wb,!1)}function Yb(Wb){return Fd(Wb,!0)}function Xb(Wb){return"("!=Wb?$a():ic(Wa(")"),hb,pb(")"),Nc)}function Fd(Wb,Bd){if(Wf.state.fatArrowAt==Wf.stream.start){var Lc=Bd?ta:Zb;if("("==Wb)return ic(vd,Wa(")"),le(Rf,")"),Nc,pb("=>"),Lc,Xc);if("variable"==Wb)return $a(vd,Rf,pb("=>"),Lc,Xc)}Lc=Bd?ed:Lf;return sg.hasOwnProperty(Wb)?ic(Lc):"function"==Wb?ic(yb,Lc):"class"==Wb?ic(Wa("form"),
wc,Nc):"keyword c"==Wb||"async"==Wb?ic(Bd?Ie:Be):"("==Wb?ic(Wa(")"),Be,pb(")"),Nc,Lc):"operator"==Wb||"spread"==Wb?ic(Bd?Yb:hb):"["==Wb?ic(Wa("]"),gl,Nc,Lc):"{"==Wb?Rd(Kb,"}",null,Lc):"quasi"==Wb?$a(ue,Lc):"new"==Wb?ic(Ba(Bd)):ic()}function Be(Wb){return Wb.match(/[;\}\)\],]/)?$a():$a(hb)}function Ie(Wb){return Wb.match(/[;\}\)\],]/)?$a():$a(Yb)}function Lf(Wb,Bd){return","==Wb?ic(hb):ed(Wb,Bd,!1)}function ed(Wb,Bd,Lc){var ze=0==Lc?Lf:ed,id=0==Lc?hb:Yb;if("=>"==Wb)return ic(vd,Lc?ta:Zb,Xc);if("operator"==
Wb)return/\+\+|--/.test(Bd)?ic(ze):"?"==Bd?ic(hb,pb(":"),id):ic(id);if("quasi"==Wb)return $a(ue,ze);if(";"!=Wb){if("("==Wb)return Rd(Yb,")","call",ze);if("."==Wb)return ic(Qa,ze);if("["==Wb)return ic(Wa("]"),Be,pb("]"),Nc,ze)}}function ue(Wb,Bd){return"quasi"!=Wb?$a():"${"!=Bd.slice(Bd.length-2)?ic(ue):ic(hb,Md)}function Md(Wb){if("}"==Wb)return Wf.marked="string-2",Wf.state.tokenize=Ra,ic(ue)}function Zb(Wb){cc(Wf.stream,Wf.state);return $a("{"==Wb?gb:hb)}function ta(Wb){cc(Wf.stream,Wf.state);return $a("{"==
Wb?gb:Yb)}function Ba(Wb){return function(Bd){return"."==Bd?ic(Wb?P:Mb):$a(Wb?Yb:hb)}}function Mb(Wb,Bd){if("target"==Bd)return Wf.marked="keyword",ic(Lf)}function P(Wb,Bd){if("target"==Bd)return Wf.marked="keyword",ic(ed)}function xa(Wb){return":"==Wb?ic(Nc,gb):$a(Lf,pb(";"),Nc)}function Qa(Wb){if("variable"==Wb)return Wf.marked="property",ic()}function Kb(Wb,Bd){if("async"==Wb)return Wf.marked="property",ic(Kb);if("variable"==Wb||"keyword"==Wf.style)return Wf.marked="property","get"==Bd||"set"==
Bd?ic(Pc):ic(Zc);if("number"==Wb||"string"==Wb)return Wf.marked=oi?"property":Wf.style+" property",ic(Zc);if("jsonld-keyword"==Wb)return ic(Zc);if("modifier"==Wb)return ic(Kb);if("["==Wb)return ic(hb,pb("]"),Zc);if("spread"==Wb)return ic(hb);if(":"==Wb)return $a(Zc)}function Pc(Wb){if("variable"!=Wb)return $a(Zc);Wf.marked="property";return ic(yb)}function Zc(Wb){if(":"==Wb)return ic(Yb);if("("==Wb)return $a(yb)}function le(Wb,Bd,Lc){function ze(id,Wg){return(Lc?-1<Lc.indexOf(id):","==id)?(id=Wf.state.lexical,
"call"==id.info&&(id.pos=(id.pos||0)+1),ic(function(pk,Cm){return pk==Bd||Cm==Bd?$a():$a(Wb)},ze)):id==Bd||Wg==Bd?ic():ic(pb(Bd))}return function(id,Wg){return id==Bd||Wg==Bd?ic():$a(Wb,ze)}}function Rd(Wb,Bd,Lc){for(var ze=3;ze<arguments.length;ze++)Wf.cc.push(arguments[ze]);return ic(Wa(Bd,Lc),le(Wb,Bd),Nc)}function jf(Wb){return"}"==Wb?ic():$a(gb,jf)}function ce(Wb,Bd){if(Kk){if(":"==Wb)return ic(we);if("?"==Bd)return ic(ce)}}function we(Wb){if("variable"==Wb)return Wf.marked="variable-3",ic(Qf);
if("string"==Wb||"number"==Wb||"atom"==Wb)return ic(Qf);if("{"==Wb)return ic(Wa("}"),le(Bf,"}",",;"),Nc);if("("==Wb)return ic(le(rg,")"),Mf)}function Mf(Wb){if("=>"==Wb)return ic(we)}function Bf(Wb,Bd){if("variable"==Wb||"keyword"==Wf.style)return Wf.marked="property",ic(Bf);if("?"==Bd)return ic(Bf);if(":"==Wb)return ic(we)}function rg(Wb){if("variable"==Wb)return ic(rg);if(":"==Wb)return ic(we)}function Qf(Wb,Bd){if("<"==Bd)return ic(Wa(">"),le(we,">"),Nc,Qf);if("|"==Bd||"."==Wb)return ic(we);if("["==
Wb)return ic(pb("]"),Qf);if("extends"==Bd)return ic(we)}function Yc(){return $a(Rf,ce,Hg,qf)}function Rf(Wb,Bd){if("modifier"==Wb)return ic(Rf);if("variable"==Wb)return nd(Bd),ic();if("spread"==Wb)return ic(Rf);if("["==Wb)return Rd(Rf,"]");if("{"==Wb)return Rd(Fg,"}")}function Fg(Wb,Bd){if("variable"==Wb&&!Wf.stream.match(/^\s*:/,!1))return nd(Bd),ic(Hg);"variable"==Wb&&(Wf.marked="property");return"spread"==Wb?ic(Rf):"}"==Wb?$a():ic(pb(":"),Rf,Hg)}function Hg(Wb,Bd){if("="==Bd)return ic(Yb)}function qf(Wb){if(","==
Wb)return ic(Yc)}function Ja(Wb,Bd){if("keyword b"==Wb&&"else"==Bd)return ic(Wa("form","else"),gb,Nc)}function ab(Wb){if("("==Wb)return ic(Wa(")"),Jb,pb(")"),Nc)}function Jb(Wb){return"var"==Wb?ic(Yc,pb(";"),Ka):";"==Wb?ic(Ka):"variable"==Wb?ic(ba):$a(hb,pb(";"),Ka)}function ba(Wb,Bd){return"in"==Bd||"of"==Bd?(Wf.marked="keyword",ic(hb)):ic(Lf,Ka)}function Ka(Wb,Bd){return";"==Wb?ic(ob):"in"==Bd||"of"==Bd?(Wf.marked="keyword",ic(hb)):$a(hb,pb(";"),ob)}function ob(Wb){")"!=Wb&&ic(hb)}function yb(Wb,
Bd){if("*"==Bd)return Wf.marked="keyword",ic(yb);if("variable"==Wb)return nd(Bd),ic(yb);if("("==Wb)return ic(vd,Wa(")"),le(Jc,")"),Nc,ce,gb,Xc);if(Kk&&"<"==Bd)return ic(Wa(">"),le(we,">"),Nc,yb)}function Jc(Wb){return"spread"==Wb?ic(Jc):$a(Rf,ce,Hg)}function wc(Wb,Bd){return"variable"==Wb?Dd(Wb,Bd):zd(Wb,Bd)}function Dd(Wb,Bd){if("variable"==Wb)return nd(Bd),ic(zd)}function zd(Wb,Bd){if("<"==Bd)return ic(Wa(">"),le(we,">"),Nc,zd);if("extends"==Bd||"implements"==Bd||Kk&&","==Wb)return ic(Kk?we:hb,
zd);if("{"==Wb)return ic(Wa("}"),Ad,Nc)}function Ad(Wb,Bd){if("variable"==Wb||"keyword"==Wf.style){if(("async"==Bd||"static"==Bd||"get"==Bd||"set"==Bd||Kk&&("public"==Bd||"private"==Bd||"protected"==Bd||"readonly"==Bd||"abstract"==Bd))&&Wf.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return Wf.marked="keyword",ic(Ad);Wf.marked="property";return ic(Kk?He:yb,Ad)}if("["==Wb)return ic(hb,pb("]"),Kk?He:yb,Ad);if("*"==Bd)return Wf.marked="keyword",ic(Ad);if(";"==Wb)return ic(Ad);if("}"==Wb)return ic();if("@"==
Bd)return ic(hb,Ad)}function He(Wb,Bd){return"?"==Bd?ic(He):":"==Wb?ic(we,Hg):"="==Bd?ic(Yb):$a(yb)}function df(Wb,Bd){return"*"==Bd?(Wf.marked="keyword",ic(Kh,pb(";"))):"default"==Bd?(Wf.marked="keyword",ic(hb,pb(";"))):"{"==Wb?ic(le(og,"}"),Kh,pb(";")):$a(gb)}function og(Wb,Bd){if("as"==Bd)return Wf.marked="keyword",ic(pb("variable"));if("variable"==Wb)return $a(Yb,og)}function Jh(Wb){return"string"==Wb?ic():$a(Oi,Th,Kh)}function Oi(Wb,Bd){if("{"==Wb)return Rd(Oi,"}");"variable"==Wb&&nd(Bd);"*"==
Bd&&(Wf.marked="keyword");return ic(Kj)}function Th(Wb){if(","==Wb)return ic(Oi,Th)}function Kj(Wb,Bd){if("as"==Bd)return Wf.marked="keyword",ic(Oi)}function Kh(Wb,Bd){if("from"==Bd)return Wf.marked="keyword",ic(hb)}function gl(Wb){return"]"==Wb?ic():$a(le(Yb,"]"))}gc=Object.assign({},Eb.defaultConfig,{},gc);Oc=Object.assign({},Eb.defaultParserConfig,{},Oc);var Kf=gc.indentUnit,Uj=Oc.statementIndent,oi=Oc.jsonld,Ke=Oc.json||oi,Kk=Oc.typescript,cm=Oc.wordCharacters||/[\w$\xa1-\uffff]/,ch=function(){function Wb(Cm){return{type:Cm,
style:"keyword"}}var Bd=Wb("keyword a"),Lc=Wb("keyword b"),ze=Wb("keyword c"),id=Wb("operator"),Wg={type:"atom",style:"atom"};Bd={"if":Wb("if"),"while":Bd,"with":Bd,"else":Lc,"do":Lc,"try":Lc,"finally":Lc,"return":ze,"break":ze,"continue":ze,"new":Wb("new"),"delete":ze,"throw":ze,"debugger":ze,"var":Wb("var"),"const":Wb("var"),let:Wb("var"),"function":Wb("function"),"catch":Wb("catch"),"for":Wb("for"),"switch":Wb("switch"),"case":Wb("case"),"default":Wb("default"),"in":id,"typeof":id,"instanceof":id,
"true":Wg,"false":Wg,"null":Wg,undefined:Wg,NaN:Wg,Infinity:Wg,"this":Wb("this"),"class":Wb("class"),"super":Wb("atom"),yield:ze,"export":Wb("export"),"import":Wb("import"),"extends":ze,await:ze,async:Wb("async")};if(Kk){Lc={type:"variable",style:"variable-3"};ze={"interface":Wb("class"),"implements":ze,namespace:ze,module:Wb("module"),"enum":Wb("module"),"public":Wb("modifier"),"private":Wb("modifier"),"protected":Wb("modifier"),"abstract":Wb("modifier"),as:id,string:Lc,number:Lc,"boolean":Lc,any:Lc};
for(var pk in ze)Bd[pk]=ze[pk]}return Bd}(),ok=/[+\-*&%=<>!?|~^@]/,Fl=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Gl,lk,sg={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Wf={state:null,column:null,marked:null,cc:null},Vm={name:"this",next:{name:"arguments"}};Nc.lex=!0;return{startState:function(Wb){Wb={tokenize:Q,lastType:"sof",cc:[],lexical:new Nb((Wb||0)-Kf,0,"block",!1),localVars:Oc.localVars,context:Oc.localVars&&{vars:Oc.localVars},
indented:Wb||0};Oc.globalVars&&"object"==typeof Oc.globalVars&&(Wb.globalVars=Oc.globalVars);return Wb},token:function(Wb,Bd){Wb.sol()&&(Bd.lexical.hasOwnProperty("align")||(Bd.lexical.align=!1),Bd.indented=Wb.indentation(),cc(Wb,Bd));if(Bd.tokenize!=Ia&&Wb.eatSpace())return null;var Lc=Bd.tokenize(Wb,Bd);if("comment"==Gl)return Lc;Bd.lastType="operator"!=Gl||"++"!=lk&&"--"!=lk?Gl:"incdec";a:{var ze=Gl,id=lk,Wg=Bd.cc;Wf.state=Bd;Wf.stream=Wb;Wf.marked=null;Wf.cc=Wg;Wf.style=Lc;Bd.lexical.hasOwnProperty("align")||
(Bd.lexical.align=!0);for(Wb=0;;){if(1E5<Wb++)throw Error("endless");if((Wg.length?Wg.pop():Ke?hb:gb)(ze,id)){for(;Wg.length&&Wg[Wg.length-1].lex;)Wg.pop()();if(Wf.marked){Lc=Wf.marked;break a}if(ze="variable"==ze)b:{for(ze=Bd.localVars;ze;ze=ze.next)if(ze.name==id){ze=!0;break b}for(Bd=Bd.context;Bd;Bd=Bd.prev)for(ze=Bd.vars;ze;ze=ze.next)if(ze.name==id){ze=!0;break b}ze=void 0}if(ze){Lc="variable-2";break a}break a}}}return Lc},indent:function(Wb,Bd){if(Wb.tokenize==Ia)return Eb.passIndent;if(Wb.tokenize!=
Q)return 0;var Lc=Bd&&Bd.charAt(0),ze=Wb.lexical,id;if(!/^\s*else\b/.test(Bd))for(var Wg=Wb.cc.length-1;0<=Wg;--Wg){var pk=Wb.cc[Wg];if(pk==Nc)ze=ze.prev;else if(pk!=Ja)break}for(;!("stat"!=ze.type&&"form"!=ze.type||"}"!=Lc&&(!(id=Wb.cc[Wb.cc.length-1])||id!=Lf&&id!=ed||/^[,\.=+\-*:?[\(]/.test(Bd)));)ze=ze.prev;Uj&&")"==ze.type&&"stat"==ze.prev.type&&(ze=ze.prev);id=ze.type;Wg=Lc==id;return(pk=Wb._string)&&pk.trimLeft().startsWith("?")&&":"===Lc?pk.indexOf("?"):pk&&":"===Wb.lastType&&"}"!==ze.type?
pk.match(/^\s*/)[0].length:"vardef"==id?(Bd=ze.indented+ze.info+2+Wb.localVars.name.length,"?"===Lc||":"===Lc||"|"===Lc||"&"===Lc?Bd:","==Wb.lastType?ze.indented+ze.info+1:"operator"==Wb.lastType?Bd+3:ze.indented):"form"==id&&"{"==Lc?ze.indented:"form"==id?ze.indented+Kf:"stat"==id?(Lc=ze.indented,Wb="operator"==Wb.lastType||","==Wb.lastType||ok.test(Bd.charAt(0))||/[,.]/.test(Bd.charAt(0)),Lc+(Wb?Uj||Kf:0)):"switch"!=ze.info||Wg||0==Oc.doubleIndentSwitch?ze.align?ze.column+(Wg?0:1):ze.indented+(Wg?
0:Kf):ze.indented+(/^(?:case|default)\b/.test(Bd)?Kf:2*Kf)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Ke?null:"/*",blockCommentEnd:Ke?null:"*/",lineComment:Ke?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Ke?"json":"javascript",jsonldMode:oi,jsonMode:Ke,expressionAllowed:Eb.expressionAllowed,skipExpression:function(Wb){var Bd=Wb.cc[Wb.cc.length-1];Bd!=hb&&Bd!=Yb||Wb.cc.pop()}}});Eb.registerHelper("wordChars","javascript",/[\w$]/);Eb.defineMIME("text/javascript",
"javascript");Eb.defineMIME("text/ecmascript","javascript");Eb.defineMIME("application/javascript","javascript");Eb.defineMIME("application/x-javascript","javascript");Eb.defineMIME("application/ecmascript","javascript");Eb.defineMIME("application/json",{name:"javascript",json:!0});Eb.defineMIME("application/x-json",{name:"javascript",json:!0});Eb.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});Eb.defineMIME("text/typescript",{name:"javascript",typescript:!0});Eb.defineMIME("application/typescript",
{name:"javascript",typescript:!0});var qc=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js");qc.string=kd;qc.JavaScriptChecker=Rb;qc.JavaScriptNavigator=ld;qc.completers=ra;qc.jsSnippets=ub;qc.jsIdeCommands=cb;qc.jsEditorCommands=mb;qc.astEditorCommands=fb;qc.CodeMirrorEnabledEditorPlugin=td;qc.Snippet=bc;qc.parser=md;qc.localInterface=zc;qc.systemInterfaceNamed=Ec;qc.serverInterfaceFor=Pb;qc.l2lInterfaceFor=Qb;Rb=function(gc){var Oc=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js"),
Wc=Oc.hasOwnProperty("JavaScriptEditorPlugin")&&"function"===typeof Oc.JavaScriptEditorPlugin?Oc.JavaScriptEditorPlugin:Oc.JavaScriptEditorPlugin=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ab(Wc,gc,[{key:Symbol.for("lively-instance-initialize"),value:function(){Ab._get(Object.getPrototypeOf(Wc.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.checker=new qc.JavaScriptChecker;this.evalEnvironment=
{format:"esm",targetModule:null,context:null}}},{key:"isJSEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"js"}},{key:"longName",get:function(){return"javascript"}},{key:"attach",value:function(Q){Ab._get(Object.getPrototypeOf(Wc.prototype),"attach",this).call(this,Q);this.evalEnvironment.context=Q}},{key:"detach",value:function(Q){this.checker.uninstall(this.textMorph);Ab._get(Object.getPrototypeOf(Wc.prototype),"detach",this).call(this,Q)}},{key:"getNavigator",value:function(){return new qc.JavaScriptNavigator}},
{key:"getCompleters",value:function(Q){return qc.completers.concat(Q)}},{key:"getCommands",value:function(Q){return[].concat($jscomp.arrayFromIterable(Ab._get(Object.getPrototypeOf(Wc.prototype),"getCommands",this).call(this,Q)),$jscomp.arrayFromIterable(qc.jsIdeCommands),$jscomp.arrayFromIterable(qc.jsEditorCommands),$jscomp.arrayFromIterable(qc.astEditorCommands))}},{key:"getKeyBindings",value:function(Q){return[].concat($jscomp.arrayFromIterable(Q),[{keys:"Shift-Tab",command:{command:"[javascript] auto format code"}},
{keys:"Ctrl-C E",command:"[javascript] list errors and warnings"},{keys:{mac:"Meta-Shift-L L I N T R",win:"Ctrl-Shift-L L I N T R"},command:"[javascript] eslint report"},{keys:{mac:"Meta-Shift-L L I N T P",win:"Ctrl-Shift-L L I N T P"},command:"[javascript] eslint preview fixes"},{keys:{mac:"Meta-Shift-L L I N T F",win:"Ctrl-Shift-L L I N T F"},command:"[javascript] eslint fix"},{keys:{mac:"Meta-Shift-L M O D E",win:"Ctrl-Shift-L M O D E"},command:"change editor mode"},{keys:"Ctrl-C I",command:"[javascript] inject import"},
{keys:"Ctrl-C C I",command:"[javascript] fix undeclared variables"}])}},{key:"getMenuItems",value:function(Q){var ea=this,Ia,Ra,cc,Nb,$a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ic){Ia=ea.textMorph;Ra=[{command:"doit",target:Ia,showKeyShortcuts:!0},{command:"inspectit",target:Ia,showKeyShortcuts:!0},{command:"printit",target:Ia,showKeyShortcuts:!0},{command:"print inspectit",alias:"print inspect",target:Ia,showKeyShortcuts:!0},{command:"eval all",target:Ia,showKeyShortcuts:!0},
{command:"text completion",alias:"code completion",target:Ia,showKeyShortcuts:!0},{command:"[javascript] list errors and warnings",alias:"list errors and warnings",target:Ia,showKeyShortcuts:!0},{isDivider:!0}];ea.evalEnvironment.targetModule&&Ra.push({command:"[javascript] inject import",alias:"add import",target:Ia},{command:"[javascript] fix undeclared variables",alias:"fix undeclared variables",target:Ia},{command:"[javascript] remove unused imports",alias:"remove unused imports",target:Ia});
cc=ea.getNavigator();(Nb=cc.resolveIdentifierAt(Ia,Ia.cursorPosition))&&Ra.push({command:"selectDefinition",alias:'jump to definition of "'+Nb.name+'"',target:Ia},{command:"selectSymbolReferenceOrDeclaration",alias:'select all occurrences of "'+Nb.name+'"',target:Ia});($a=Ia.selection.text.trim())&&Ra.push({command:"open code search",alias:'code search for "'+qc.string.truncate($a,30)+'"',target:Ia.world(),args:{input:$a,backend:ea.backend()}});Ra.push({isDivider:!0});return ic.return(Ra.concat(Q))})}},
{key:"getSnippets",value:function(){return qc.jsSnippets.map(function(Q){var ea=$jscomp.makeIterator(Q);Q=ea.next().value;ea=ea.next().value;return new qc.Snippet({trigger:Q,expansion:ea})})}},{key:"sanatizedJsEnv",value:function(Q){Q=Object.assign({},this.evalEnvironment,{},Q);Q.format||(Q.formatd="esm");Q.context||(Q.context=this.textMorph);Q.sourceURL||(Q.sourceURL=Q.targetModule+"_doit_"+Date.now());Q.systemInterface||(Q.systemInterface=qc.localInterface);return Q}},{key:"backend",value:function(Q){Q=
this.sanatizedJsEnv(Q);return Q.remote?Q.remote:"local"}},{key:"systemInterface",value:function(Q){return this.sanatizedJsEnv(Q).systemInterface||qc.localInterface}},{key:"setSystemInterface",value:function(Q){return this.evalEnvironment.systemInterface=Q}},{key:"setSystemInterfaceNamed",value:function(Q){return this.setSystemInterface(qc.systemInterfaceNamed(Q))}},{key:"runEval",value:function(Q,ea){ea=this.sanatizedJsEnv(ea);return this.systemInterface(ea).runEval(Q,ea)}},{key:"parser",get:function(){return qc.parser}},
{key:"parse",value:function(Q){Q=void 0===Q?null:Q;if(this._ast&&this._ast._astType===Q)return this._ast;var ea=this.parser,Ia=this.textMorph.textString;if(!ea)return null;var Ra={withComments:!0,allowReturnOutsideFunction:!0};Q&&(Ra.type=Q);if(Ia.startsWith("#!")){var cc=Ia.indexOf("\n");Ia=" ".repeat(cc)+Ia.slice(cc)}ea=ea.fuzzyParse(Ia,Ra);ea._astType=Q;return this._ast=ea}},{key:"undeclaredVariables",value:function(Q){var ea=this.parser,Ia=this.evalEnvironment.knownGlobals||[];Q=this.parse(void 0===
Q?null:Q);return ea&&Q?ea.query.findGlobalVarRefs(Q,{jslintGlobalComment:!0}).filter(function(Ra){return!Ia.includes(Ra.name)}):[]}}],[{key:"className",get:function(){return"JavaScriptEditorPlugin"}}],Oc,{pathInPackage:function(){return"js/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:662,end:6664})}(qc.CodeMirrorEnabledEditorPlugin);
Rb=qc.JavaScriptEditorPlugin;Da("default",Rb);qc.default=Rb}}});System.register("10",[],function(){return{execute:function(){lively.FreezerRuntime.recorderFor("lively.shell/index.js")}}});