System.register(["./__root_module__-255c8c26.js"],function(Da){var Ab,Tb,kc,ec,he,gd,Zd,kd,Sc,yd,Od,fe,Ud,md,db,Fb,tc,nc,td,ke,zc,Ec,Pb,Qb,Tc,ld,Rb,qb,bc,Ic,ra,Fa,mb,ub,Db,cb,fb,Eb,qc,gc,Oc,Wc;return{setters:[function(Q){Ab=Q.as;Tb=Q.a2;kc=Q.C;ec=Q.am;he=Q.ah;gd=Q.aw;Zd=Q.aU;kd=Q.aA;Sc=Q.ax;yd=Q.a8;Od=Q.ak;fe=Q.an;Ud=Q.h;md=Q.a1;db=Q.a0;Fb=Q.ag;tc=Q.a6;nc=Q.P;td=Q._;ke=Q.aV;zc=Q.ao;Ec=Q.a5;Pb=Q.ap;Qb=Q.aq;Tc=Q.aW;ld=Q.aX;Rb=Q.at;qb=Q.ar;bc=Q.s;Ic=Q.au;ra=Q.aY;Fa=Q.aj;mb=Q.aZ;ub=Q.a_;Db=Q.a$;cb=
Q.a9;fb=Q.b0;Eb=Q.al;qc=Q.b1;gc=Q.b2;Oc=Q.b3;Wc=Q.aP}],execute:function(){function Q(ta){(ta=Nb.cachedGuideLines.get(ta))&&ta.forEach(function(Ba){return Ba.remove()})}function ea(ta,Ba,Mb,P,xa){Ba=void 0===Ba?!0:Ba;Mb=void 0===Mb?!0:Mb;P=void 0===P?10:P;xa=void 0===xa?100:xa;if(Ba||Mb){var Qa=ta.owner,Kb=Qa.world();Qa=Qa.getGlobalTransform();var Pc=ta.owner.submorphs.filter(function(zd){return zd!==ta&&!zd.isEpiMorph&&zd.visible&&zd.reactsToPointer}),Zc=Nb.findAlignedMorphs(ta,Pc,P,xa,"left top right bottom hCenter vCenter".split(" "),
"left top right bottom hCenter vCenter".split(" "));xa=[];var le=0,Rd=0,jf=0,ce=0;Qa.e-=Kb.scroll.x;Qa.f-=Kb.scroll.y;if(Zc){Zc=$jscomp.makeIterator(Zc);for(var we=Zc.next();!we.done;we=Zc.next()){we=$jscomp.makeIterator(we.value);we.next();var Mf=we.next().value;we=Mf.vertical;Mf=$jscomp.makeIterator(Mf.horizontal);for(var Bf=Mf.next();!Bf.done;Bf=Mf.next()){Bf=Bf.value;var rg=Bf.edgeAVal,Qf=Bf.refPointsA,Yc=Bf.refPointsB,Rf=Bf.edgeBVal,Fg=Math.ceil(P-Bf.delta),Hg=Math.min(Qf.top,Yc.top);Qf=Math.max(Qf.bottom,
Yc.bottom);Bf.maxDist>P&&(Fg-=P/2);le<Fg&&(le=Fg,jf=Rf-rg);xa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Nb.guideWidth,start:Qa.transformPoint(Nb.pt(Rf,Hg)),end:Qa.transformPoint(Nb.pt(Rf,Qf)),fill:Nb.guideColor,guideType:"h",priority:Fg})}we=$jscomp.makeIterator(we);for(Mf=we.next();!Mf.done;Mf=we.next())Mf=Mf.value,Bf=Mf.edgeAVal,Hg=Mf.refPointsA,Qf=Mf.refPointsB,rg=Mf.edgeBVal,Rf=Math.ceil(P-Mf.delta),Fg=Math.min(Hg.left,Qf.left),Hg=Math.max(Hg.right,Qf.right),Mf.maxDist>P&&(Rf-=
P/2),Rd<Rf&&Math.abs(rg-Bf)<=P&&(Rd=Rf,ce=rg-Bf),xa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Nb.guideWidth,start:Qa.transformPoint(Nb.pt(Fg,rg)),end:Qa.transformPoint(Nb.pt(Hg,rg)),fill:Nb.guideColor,guideType:"v",priority:Rf})}}if(!le||!Rd){Pc=[ta].concat($jscomp.arrayFromIterable(Pc));Bf=Nb.computeClosestMorphs(Pc);Mf=Bf[0];Pc=Mf.l;Zc=Mf.r;we=Mf.t;Mf=Mf.b;var qf;if(Pc||Zc||we||Mf){var Ja=(Pc||Zc||we||Mf).refPointsA;for(rg=1;rg<Bf.length&&(Qf=Bf[rg],Rf=Qf.l,Fg=Qf.r,Hg=Qf.t,Qf=Qf.b,
le||(Pc&&Rf&&Pc.index!==Rf.index&&Math.abs(Rf.dist-Pc.dist)<=P?qf=Object.assign({neighbor:rg,direction:"left"},Rf):Zc&&Fg&&Zc!==Fg.index&&Math.abs(Fg.dist-Zc.dist)<=P&&(qf=Object.assign({neighbor:rg,direction:"right"},Fg))),Rd||(we&&Hg&&we.index!==Hg.index&&Math.abs(Hg.dist-we.dist)<=P?qf=Object.assign({neighbor:rg,direction:"top"},Hg):Mf&&Qf&&Mf.index!==Qf.index&&Math.abs(Qf.dist-Mf.dist)<=P&&(qf=Object.assign({neighbor:rg,direction:"bottom"},Qf))),!qf);rg++);}if(qf){var ab=qf;P=ab.direction;Hg=
ab.dist;var Jb=Ja.left;Yc=Ja.top;var ba=Ja.bottom,Ka=Ja.right,ob=Ja.width,yb=Ja.height;Qf=ab.refPointsA;Ja=Qf.left;Bf=Qf.top;rg=Qf.bottom;Rf=Qf.right;Fg=Qf.width;Qf=Qf.height;var Jc=ab.refPointsB,wc=Jc.left;ab=Jc.top;var Dd=Jc.bottom;Jc=Jc.right;Ka="left"===P?Jb:"right"===P?Ka:Jb+ob/2;ba="bottom"===P?ba:"top"===P?Yc:Yc+yb/2;Jb="left"===P?Ka-Hg:"right"===P?Ka+Hg:Jb+ob/2;Hg="bottom"===P?ba+Hg:"top"===P?ba-Hg:Yc+yb/2;Yc="left"===P?Jc:"right"===P?wc:Ja+Fg/2;ob="bottom"===P?ab:"top"===P?Dd:Bf+Qf/2;!Mb||
le||"right"!==P&&"left"!==P||(le=10,jf=(qf.dist-(Zc||Pc).dist)*("right"===P?-1:1),Ka+=jf,Jb+=jf);!Mb||Rd||"top"!==P&&"bottom"!==P||(Rd=10,ce=((we||Mf).dist-qf.dist)*("top"===P?-1:1),ba+=ce,Hg+=ce);xa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:Qa.transformPoint(Nb.pt("left"===P?Ja:"right"===P?Rf:Ja+Fg/2,"bottom"===P?rg:"top"===P?Bf:Bf+Qf/2)),end:Qa.transformPoint(Nb.pt(Yc,ob)),fill:Nb.Color.orange,height:Nb.guideWidth,guideType:P,priority:10},{type:"line",epiMorph:!0,hasFixedPosition:!0,
start:Qa.transformPoint(Nb.pt(Ka,ba)),end:Qa.transformPoint(Nb.pt(Jb,Hg)),fill:Nb.Color.orange,height:Nb.guideWidth,guideType:P,priority:10})}}Mb&&(jf||ce)&&ta.moveBy(Nb.pt(jf,ce));if(Ba){xa=xa.filter(function(zd){var Ad=zd.guideType;zd=zd.priority;return"h"===Ad?zd===le:"v"===Ad?zd===Rd:!0});(Ba=Nb.cachedGuideLines.get(ta))||Nb.cachedGuideLines.set(ta,Ba=[]);for(Mb=0;Mb<xa.length;Mb++)qf=void 0,Ba[Mb]?qf=Object.assign(Ba[Mb],xa[Mb]):(qf=Nb.morph(xa[Mb]),Ba.push(qf)),qf.owner||Kb.addMorph(qf);Ba.slice(Mb).forEach(function(zd){return zd.remove()});
Nb.fun.debounceNamed(ta.id+"-drag-guides-cleanup",1300,function(){var zd=Nb.cachedGuideLines.get(ta);zd&&zd.forEach(function(Ad){return Ad.remove()})})()}}}function Ia(ta,Ba,Mb,P,xa,Qa){Mb=void 0===Mb?!0:Mb;P=void 0===P?!0:P;xa=void 0===xa?5:xa;Qa=void 0===Qa?100:Qa;if(Mb||P){var Kb=ta.owner,Pc=Kb.world(),Zc=Kb.getGlobalTransform(),le=ta.owner.submorphs.filter(function(ba){return ba!==ta&&!ba.isEpiMorph&&ba.visible&&ba.reactsToPointer});Kb=(Ba.includes("left")||Ba.includes("right")?"x":"")+(Ba.includes("top")||
Ba.includes("bottom")?"y":"");var Rd=Nb.findMorphsWithSimilarWidthOrHeight(ta,Kb,le,xa,Qa),jf=-Infinity,ce=-Infinity,we=0,Mf=0,Bf=0,rg=0,Qf=0,Yc=0;Kb=[];Zc.e-=Pc.scroll.x;Zc.f-=Pc.scroll.y;if(Rd){Rd=$jscomp.makeIterator(Rd);for(var Rf=Rd.next();!Rf.done;Rf=Rd.next()){Rf=$jscomp.makeIterator(Rf.value);Rf.next();var Fg=Rf.next().value;Rf=Fg.similarIn;var Hg=Fg.delta,qf=Fg.refPointsA,Ja=Fg.refPointsB;Fg=xa-Hg+(Qa-Fg.minDist);"width"===Rf?jf<Fg&&(jf=Fg,Ba.includes("left")&&(Mf=-Hg),Ba.includes("right")&&
(we=Hg)):ce<Fg&&(ce=Fg,Ba.includes("top")&&(Bf=-Hg),Ba.includes("bottom")&&(rg=Hg));Hg={type:"line",epiMorph:!0,hasFixedPosition:!0,height:Nb.guideWidth,fill:Nb.guideColor,guideType:Rf,priority:Fg,start:Zc.transformPoint("width"===Rf?Nb.pt(qf.left,qf.top+qf.height/2):Nb.pt(qf.left+qf.width/2,qf.top)),end:Zc.transformPoint("width"===Rf?Nb.pt(qf.right,qf.top+qf.height/2):Nb.pt(qf.left+qf.width/2,qf.bottom))};Rf=Object.assign({},Hg,{start:Zc.transformPoint("width"===Rf?Nb.pt(Ja.left,Ja.top+Ja.height/
2):Nb.pt(Ja.left+Ja.width/2,Ja.top)),end:Zc.transformPoint("width"===Rf?Nb.pt(Ja.right,Ja.top+Ja.height/2):Nb.pt(Ja.left+Ja.width/2,Ja.bottom))});Kb.push(Hg,Rf)}}if(Qa=Nb.findAlignedMorphs(ta,le,xa,Qa,Ba,void 0))for(Qa=$jscomp.makeIterator(Qa),le=Qa.next();!le.done;le=Qa.next()){le=$jscomp.makeIterator(le.value);le.next();Rd=le.next().value;le=Rd.vertical;Rd=$jscomp.makeIterator(Rd.horizontal);for(Rf=Rd.next();!Rf.done;Rf=Rd.next()){Rf=Rf.value;Ja=Rf.edgeAVal;var ab=Rf.refPointsA,Jb=Rf.refPointsB;
Hg=Rf.edgeBVal;qf=Math.ceil(xa-Rf.delta);Fg=Math.min(ab.top,Jb.top);ab=Math.max(ab.bottom,Jb.bottom);Rf.maxDist>xa&&(qf-=xa/2);Qf<qf&&(Qf=qf,Ba.includes("left")&&(Mf=-(Hg-Ja)),Ba.includes("right")&&(we=+(Hg-Ja)));Kb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Nb.guideWidth,start:Zc.transformPoint(Nb.pt(Hg,Fg)),end:Zc.transformPoint(Nb.pt(Hg,ab)),fill:Nb.guideColor,guideType:"h",priority:qf})}le=$jscomp.makeIterator(le);for(Rd=le.next();!Rd.done;Rd=le.next())Rd=Rd.value,Rf=Rd.edgeAVal,
Fg=Rd.refPointsA,ab=Rd.refPointsB,Ja=Rd.edgeBVal,Hg=Math.ceil(xa-Rd.delta),qf=Math.min(Fg.left,ab.left),Fg=Math.max(Fg.right,ab.right),Rd.maxDist>xa&&(Hg-=xa/2),Yc<Hg&&Math.abs(Ja-Rf)<=xa&&(Yc=Hg,Ba.includes("top")&&(Bf=Ja-Rf),Ba.includes("bottom")&&(rg=Ja-Rf)),Kb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Nb.guideWidth,start:Zc.transformPoint(Nb.pt(qf,Ja)),end:Zc.transformPoint(Nb.pt(Fg,Ja)),fill:Nb.guideColor,guideType:"v",priority:Hg})}P&&(Mf&&(ta.left+=Mf,ta.right-=Mf),Bf&&(ta.top+=
Bf,ta.bottom-=Bf),we&&(ta.width+=we),rg&&(ta.height+=rg));if(Mb){Kb=Kb.filter(function(ba){var Ka=ba.guideType;ba=ba.priority;return"width"===Ka?ba===jf:"height"===Ka?ba===ce:"v"===Ka?ba===Yc:"h"===Ka?ba===Qf:!1});(Ba=Nb.cachedGuideLines.get(ta))||Nb.cachedGuideLines.set(ta,Ba=[]);for(Mb=0;Mb<Kb.length;Mb++)P=void 0,Ba[Mb]?P=Object.assign(Ba[Mb],Kb[Mb]):(P=Nb.morph(Kb[Mb]),Ba.push(P)),P.owner||Pc.addMorph(P);Ba.slice(Mb).forEach(function(ba){return ba.remove()});Nb.fun.debounceNamed(ta.id+"-drag-guides-cleanup",
1300,function(){var ba=Nb.cachedGuideLines.get(ta);ba&&ba.forEach(function(Ka){return Ka.remove()})})()}}}function Ra(ta,Ba){Ba=void 0===Ba?!1:Ba;var Mb=Wa.MorphicEnv.default().world;if(null===ta||void 0===ta)ta=String(ta);if(ta.isMorph)return Wa.showRect(ta.world(),ta.globalBounds().translatedBy(ta.world().scroll.negated()),Ba);if(ta.isPoint)return Wa.showRect(Mb,new Wa.Rectangle(ta.x-5,ta.y-5,10,10));if(ta.isLine)return Wa.showLine(Mb,ta);if(ta.isRectangle)return Wa.showRect(Mb,ta);if("undefined"!==
typeof Wa.Element&&ta instanceof Wa.Element)return Wa.showRect(Mb,Wa.Rectangle.fromElement(ta));if("number"===typeof ta||"symbol"===typeof ta||"boolean"===typeof ta||"undefined"!==typeof Wa.Node&&ta instanceof Wa.Node||ta instanceof RegExp)ta=String(ta);"object"===typeof ta&&(ta=Wa.obj.inspect(ta,{maxDepth:1}));return"string"===typeof ta&&1===arguments.length?Mb.setStatusMessage(ta):Mb.setStatusMessage(Wa.string.formatFromArray(Array.from(arguments)))}function cc(ta,Ba,Mb){Mb=void 0===Mb?3E3:Mb;var P,
xa,Qa,Kb,Pc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zc){if(1==Zc.nextAddress){if(!(ta&&ta.world()&&Ba&&Ba.world()))return Zc.return(null);P=ta.owner.worldPoint(ta.center);xa=Ba.owner.worldPoint(Ba.center);Qa=P.lineTo(xa).sampleN(2)[1];Kb={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:Wa.Color.red,fill:Wa.Color.red,cx:5,cy:5,r:4}]};Pc=$world.addMorph(new Wa.Path({position:Qa,renderOnGPU:!0,vertices:[Wa.pt(0),
Wa.pt(0)],borderWidth:2,startMarker:Kb,endMarker:Kb,borderColor:Wa.Color.red}));return Zc.yield(Pc.whenRendered(),2)}if(3!=Zc.nextAddress)return Zc.yield(Pc.animate({opacity:1,customTween:function(le){var Rd=Pc.center;Pc.vertices=[Wa.pt(0).interpolate(le,P.subPt(Qa)),Wa.pt(0).interpolate(le,xa.subPt(Qa))];Pc.center=Rd},duration:400}),3);Mb&&setTimeout(function(){return Pc.fadeOut()},Mb);return Zc.return(Pc)})}Da({a:ea,d:cc,r:Q,s:Ra});var Nb=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
Nb.removeSnapToGuidesOf=Q;Nb.showAndSnapToGuides=ea;Nb.showAndSnapToResizeGuides=Ia;Nb.computeRefPoints=function(ta){var Ba=ta.x,Mb=ta.y,P=ta.width;ta=ta.height;return{left:Ba,top:Mb,hCenter:Ba+P/2,vCenter:Mb+ta/2,right:Ba+P,bottom:Mb+ta,width:P,height:ta}};Nb.findEdgesInAlignment=function(ta,Ba,Mb,P,xa,Qa,Kb,Pc,Zc,le){Mb=void 0===Mb?15:Mb;Qa=void 0===Qa?0:Qa;Kb=void 0===Kb?0:Kb;Pc=void 0===Pc?0:Pc;Zc=void 0===Zc?0:Zc;le=void 0===le?0:le;for(var Rd=[],jf=[],ce=0;ce<Nb.edges.length;ce++){var we=$jscomp.makeIterator(Nb.edges[ce]),
Mf=we.next().value,Bf=we.next().value;we=we.next().value;var rg=ta[Bf],Qf=Ba[we],Yc=Math.max(rg,Qf)-Math.min(rg,Qf);Yc>Mb||!(P&&!P.includes(Bf)||xa&&!xa.includes(we))&&("vertical"===Mf?Rd:jf).push({delta:Yc,edgeA:Bf,edgeB:we,edgeAVal:rg,edgeBVal:Qf,refPointsA:ta,refPointsB:Ba,distLeft:Qa,distTop:Kb,distRight:Pc,distBottom:Zc,maxDist:le})}return Rd.length||jf.length?{vertical:Rd,horizontal:jf}:null};Nb.findAlignedMorphs=function(ta,Ba,Mb,P,xa,Qa){Mb=void 0===Mb?15:Mb;P=void 0===P?Infinity:P;for(var Kb,
Pc=Nb.computeRefPoints(ta.bounds()),Zc=0;Zc<Ba.length;Zc++){var le=Ba[Zc];if(le!==ta){var Rd=Nb.computeRefPoints(le.bounds()),jf=Math.max(0,Pc.left-Rd.right),ce=Math.max(0,Rd.left-Pc.right),we=Math.max(0,Pc.top-Rd.bottom),Mf=Math.max(0,Rd.top-Pc.bottom);Math.max(Mf,we,ce,jf)>P||!(Rd=Nb.findEdgesInAlignment(Pc,Rd,Mb,xa,Qa,jf,we,ce,Mf,Math.max(Mf,we,ce,jf)))||(Kb||(Kb=new Map),Kb.set(le,Rd))}}ta=ta.owner;Ba=Nb.computeRefPoints(ta.innerBounds());if(Mb=Nb.findEdgesInAlignment(Pc,Ba,Mb))Kb||(Kb=new Map),
Kb.set(ta,Mb);return Kb};Nb.findMorphsWithSimilarWidthOrHeight=function(ta,Ba,Mb,P,xa){P=void 0===P?15:P;xa=void 0===xa?Infinity:xa;for(var Qa,Kb=Nb.computeRefPoints(ta.bounds()),Pc=0;Pc<Mb.length;Pc++){var Zc=Mb[Pc];if(Zc!==ta){var le=Nb.computeRefPoints(Zc.bounds()),Rd=Math.max(0,Kb.left-le.right),jf=Math.max(0,le.left-Kb.right),ce=Math.max(0,Kb.top-le.bottom),we=Math.max(0,le.top-Kb.bottom),Mf=Math.min(we,ce,jf,Rd),Bf=Math.max(we,ce,jf,Rd);if(!(Math.max(we,ce,jf,Rd)>xa)){jf=Kb;Rd=jf.width;jf=jf.height;
we=le;ce=we.width;we=we.height;var rg=ce-Rd,Qf=we-jf;("x"===Ba||"xy"===Ba)&&Math.abs(rg)<=P&&(Qa||(Qa=new Map),Qa.set(Zc,{similarIn:"width",minDist:Mf,maxDist:Bf,refPointsA:Kb,refPointsB:le,valA:Rd,valB:ce,delta:rg}));("y"===Ba||"xy"===Ba)&&Math.abs(Qf)<=P&&(Qa||(Qa=new Map),Qa.set(Zc,{similarIn:"height",minDist:Mf,maxDist:Bf,refPointsA:Kb,refPointsB:le,valA:jf,valB:we,delta:Qf}))}}}return Qa};Nb.closest=function(ta,Ba,Mb,P,xa,Qa,Kb,Pc){Pc=void 0===Pc?!0:Pc;var Zc=P[ta],le=xa[ta],Rd=Qa[ta];Ba=Kb[ta];
for(var jf,ce,we,Mf,Bf=0;Bf<xa.length;Bf++)ta===Bf||Zc<xa[Bf]||jf&&xa[jf.index]>=xa[Bf]||Pc&&Kb[ta]<Qa[Bf]||Qa[ta]>Kb[Bf]||(jf={index:Bf,dist:Zc-xa[Bf],refPointsA:Mb[ta],refPointsB:Mb[Bf]});for(Zc=0;Zc<P.length;Zc++)ta===Zc||le>P[Zc]||ce&&P[ce.index]<=P[Zc]||Pc&&Kb[ta]<Qa[Zc]||Qa[ta]>Kb[Zc]||(ce={index:Zc,dist:P[Zc]-le,refPointsA:Mb[ta],refPointsB:Mb[Zc]});for(le=0;le<Kb.length;le++)ta===le||Rd<Kb[le]||we&&Kb[we.index]>=Kb[le]||Pc&&P[ta]>xa[le]||xa[ta]<P[le]||(we={index:le,dist:Rd-Kb[le],refPointsA:Mb[ta],
refPointsB:Mb[le]});for(Kb=0;Kb<Qa.length;Kb++)ta===Kb||Ba>Qa[Kb]||Mf&&Qa[Mf.index]<=Qa[Kb]||Pc&&P[ta]>xa[Kb]||xa[ta]<P[Kb]||(Mf={index:Kb,dist:Qa[Kb]-Ba,refPointsA:Mb[ta],refPointsB:Mb[Kb]});return{l:jf,r:ce,t:we,b:Mf}};Nb.computeClosestMorphs=function(ta){for(var Ba=[],Mb=[],P=[],xa=[],Qa=[],Kb=[],Pc=0;Pc<ta.length;Pc++){var Zc=Nb.computeRefPoints(ta[Pc].bounds());Qa.push(Zc);var le=Zc.right,Rd=Zc.top,jf=Zc.bottom;Ba.push(Zc.left);Mb.push(le);P.push(Rd);xa.push(jf)}for(Pc=0;Pc<ta.length;Pc++)Kb.push(Nb.closest(Pc,
ta,Qa,Ba,Mb,P,xa));return Kb};Nb.fun=Ab;Nb.pt=Tb;Nb.Color=kc;Nb.morph=ec;Nb.cachedGuideLines=new WeakMap;Nb.guideWidth=1;Nb.guideColor=Nb.Color.orange.lighter();Nb.removeSnapToGuidesOf=Q;Nb.removeSnapToGuidesOf=Q;Nb.showAndSnapToGuides=ea;Nb.showAndSnapToGuides=ea;Nb.showAndSnapToResizeGuides=Ia;Nb.showAndSnapToResizeGuides=Ia;Nb.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom",
"vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];var $a=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");$a.Morph=he;$a.Label=gd;$a.StyleSheet=Zd;$a.HorizontalLayout=
kd;$a.Path=Sc;$a.Text=yd;$a.GridLayout=Od;$a.morph=ec;$a.Icon=fe;$a.createMorphSnapshot=Ud;$a.Color=kc;$a.pt=Tb;$a.rect=md;$a.Rectangle=db;$a.LinearGradient=Fb;$a.obj=tc;$a.PropertyPath=nc;$a.promise=td;$a.properties=ke;$a.num=zc;$a.arr=Ec;$a.connect=Pb;$a.signal=Qb;$a.disconnect=Tc;$a.disconnectAll=ld;$a.once=Rb;$a.showAndSnapToGuides=ea;$a.showAndSnapToResizeGuides=Ia;$a.removeSnapToGuidesOf=Q;$a.haloBlue=$a.Color.rgb(23,160,251);$a.componentAccent=$a.Color.magenta;$a.derivedAccent=$a.Color.purple;
var ic=function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Mb=Ba.hasOwnProperty("Halo")&&"function"===typeof Ba.Halo?Ba.Halo:Ba.Halo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"relayout",value:function(){this.alignWithTarget()}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",
get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(P){P.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var P=this;setTimeout(function(){P.target.owner||P.remove()})}},{key:"initLayout",value:function(){var P=this.layout=new $a.GridLayout({autoAssign:!1,fitToCell:!1,columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},
4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name","name","name","name","name",null]]});P.col(1).row(7).group.align="center";P.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=
[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||
this.addMorphBack($a.morph({name:"border-box",fill:$a.Color.transparent,borderColor:this.target.isComponent?$a.componentAccent:$a.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(P){this.state||(this.state={});this.state.pointerId=P}},{key:"prepareTarget",value:function(P){if(!$a.obj.isArray(P))return P;if(1>=P.length)return P[0];P=P[0].world().addMorph(new $a.MultiSelectionTarget({selectedMorphs:P}));P.alignWithSelection();
P.modifiesSelectedMorphs=!0;return P}},{key:"refocus",value:function(P){this.target=P;this.alignWithTarget()}},{key:"alignWithTarget",value:function(){if(!this.active&&this.target){var P=this.target.world()||$world,xa=P.visibleBounds(),Qa=this.target.globalBounds(),Kb=Qa.insetBy(-36).intersection(xa);xa=Qa.intersection(xa);this.layout&&this.layout.disable();this.setBounds(Kb.translatedBy(P.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,xa));this.state.activeButton?(this.buttonControls.forEach(function(Pc){return Pc.visible=
!1}),this.ensureResizeHandles().forEach(function(Pc){return Pc.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(Pc){return Pc.visible=!0}),this.buttonControls.forEach(function(Pc){Pc.visible=!0}),this.propertyDisplay.disable());this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(Pc){return Pc.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();
this.layout&&this.layout.enable();return this}}},{key:"detachFromTarget",value:function(){var P=this.target;P&&($a.disconnect(P,"onChange",this,"alignWithTarget"),$a.disconnect(P,"onOwnerChanged",this,"removeIfDetached"),P instanceof $a.MultiSelectionTarget?(P.modifiesSelectedMorphs=!1,P.remove()):"function"===typeof P.detachedHalo&&P.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();qb._get(Object.getPrototypeOf(Mb.prototype),"remove",this).call(this)}},{key:"morphsContainingPoint",
value:function(P){return P}},{key:"propertyDisplay",get:function(){return $a.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return $a.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return $a.CloseHaloItem.for(this)}},{key:"grabHalo",value:function(){return $a.GrabHaloItem.for(this)}},{key:"dragHalo",value:function(){return $a.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return $a.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return $a.InspectHaloItem.for(this)}},
{key:"editHalo",value:function(){return $a.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return $a.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return $a.CopyHaloItem.for(this)}},{key:"originHalo",value:function(){return $a.OriginHaloItem.for(this)}},{key:"componentHalo",value:function(){return $a.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(P){return P.isHaloItem&&!P.isResizeHandle})}},{key:"addMorphToSelection",
value:function(P){var xa=this,Qa,Kb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pc){return 1==Pc.nextAddress?(Qa=xa.world(),Kb=xa.target.isMorphSelection?xa.target.selectedMorphs:[xa.target],xa.remove(),Pc.yield(Qa.showHaloForSelection([].concat($jscomp.arrayFromIterable(Kb),[P]),xa.state.pointerId),2)):Pc.return(Pc.yieldResult)})}},{key:"removeMorphFromSelection",value:function(P){var xa=this,Qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kb){if(1==Kb.nextAddress){Qa=
xa.world();xa.remove();if(!xa.target.isMorphSelection)return Kb.jumpTo(0);$a.arr.remove(xa.target.selectedMorphs,P);return Kb.yield(Qa.showHaloForSelection(xa.target.selectedMorphs,xa.state.pointerId),3)}return Kb.return(Kb.yieldResult)})}},{key:"isAlreadySelected",value:function(P){return this.target==P||this.target.isMorphSelection&&this.target.selectsMorph(P)}},{key:"updateBoundsFor",value:function(P,xa,Qa,Kb,Pc){var Zc={topLeft:$a.rect(-1,-1,1,1),topCenter:xa?$a.rect(1,-1,0,1):$a.rect(0,-1,0,
1),topRight:$a.rect(0,-1,1,1),rightCenter:xa?$a.rect(0,1,1,1):$a.rect(0,0,1,0),bottomRight:$a.rect(0,0,1,1),bottomCenter:xa?$a.rect(1,0,0,1):$a.rect(0,0,0,1),bottomLeft:$a.rect(-1,0,1,1),leftCenter:xa?$a.rect(-1,1,1,0):$a.rect(-1,0,1,0)}[P];Pc=Zc.x;var le=Zc.y,Rd=Zc.width;Zc=Zc.height;Qa=xa?this.proportionalDelta(P,Qa,Kb):Qa;P=$a.rect(Qa.x*Pc,Qa.y*le,Qa.x*Rd,Qa.y*Zc);this.active=!0;this.target.setBounds(Kb.insetByRect(P));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());
this.active=!1;this.alignWithTarget()}},{key:"proportionalDelta",value:function(P,xa,Qa){var Kb=Qa.width,Pc=Qa.height;Qa={topLeft:$a.pt(-1,-1),topCenter:$a.pt(0,-1),topRight:$a.pt(1,-1),leftCenter:$a.pt(-1,0),rightCenter:$a.pt(1,0),bottomLeft:$a.pt(-1,1),bottomCenter:$a.pt(0,1),bottomRight:$a.pt(1,1)};var Zc=Kb/Math.max(Kb,Pc),le=Pc/Math.max(Pc,Kb);Kb={topLeft:$a.pt(-Zc,-le),topCenter:$a.pt(1/(2*Pc/Kb),-1),topRight:$a.pt(Zc,-le),leftCenter:$a.pt(-1,Pc/(2*Kb)),rightCenter:$a.pt(1,Pc/(3*Kb)),bottomLeft:$a.pt(-Zc,
le),bottomCenter:$a.pt(1/(2*Pc/Kb),1),bottomRight:$a.pt(Zc,le)};Qa=Qa[P];return Kb[P].scaleBy(Qa.dotProduct(xa)/Qa.dotProduct(Qa))}},{key:"ensureResizeHandles",value:function(){return $a.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(P){P=P.valueForPropertyDisplay();"undefined"!==typeof P?this.propertyDisplay.displayProperty(P):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(P,xa){if(!$a.rect(0).sides.includes(xa)){var Qa=this.getSubmorphNamed("diagonal");
if(P){P=this.target.globalBounds();var Kb=P.width,Pc=P.height;P=this.localize($a.pt(P.x,P.y)).extent($a.pt(Kb,Pc)).scaleRectTo(this.innerBounds());Kb={topLeft:[$a.pt(Kb,Pc),$a.pt(0,0)],topRight:[$a.pt(0,Pc),$a.pt(Kb,0)],bottomRight:[$a.pt(0,0),$a.pt(Kb,Pc)],bottomLeft:[$a.pt(Kb,0),$a.pt(0,Pc)]};Qa?Qa.setBounds(P):(Qa=$jscomp.makeIterator(Kb[xa]),xa=Qa.next().value,Qa=Qa.next().value,Kb=new $a.LinearGradient({stops:[{offset:0,color:$a.Color.orange.withA(0)},{offset:.2,color:$a.Color.orange},{offset:.8,
color:$a.Color.orange},{offset:1,color:$a.Color.orange.withA(0)}]}),Qa=this.addMorphBack(new $a.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:P,borderColor:Kb,vertices:[xa,Qa]})),Qa.setBounds(P),Qa.animate({opacity:1,duration:500}))}else Qa&&Qa.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(P,xa){var Qa=this.getSubmorphNamed("rotationIndicator");P&&xa?(P=this.getSubmorphNamed("origin").center,Qa=Qa||this.addMorphBack(new $a.Path({name:"rotationIndicator",
borderColor:$a.haloBlue,borderWidth:1,vertices:[]})),Qa.setBounds(xa.bounds().union(this.innerBounds())),Qa.vertices=[Qa.localizePointFrom(P,this),Qa.localizePointFrom(xa.center,this)]):Qa&&Qa.remove()}},{key:"toggleMorphHighlighter",value:function(P,xa,Qa){Qa=void 0===Qa?!1:Qa;if(xa.onHaloGrabover)xa.onHaloGrabover(P);else Qa=$a.MorphHighlighter.for(this,xa,Qa),P&&xa&&xa!=this.world()?Qa&&Qa.show(xa):Qa&&Qa.deactivate()}},{key:"onMouseDown",value:function(P){var xa=P.state.clickedOnMorph;if(!P.isCommandKey()&&
xa==this.borderBox)return this.remove();if(P.isShiftDown()&&P.isCommandKey())P=this.target.isMorphSelection?this.target.morphBeneath(P.position):this.morphBeneath(P.position),this.isAlreadySelected(P)?this.removeMorphFromSelection(P):this.addMorphToSelection(P);else{if(xa==this.borderBox&&P.isCommandKey()){var Qa=P.world.morphsContainingPoint(P.position).filter(function(Kb){return Kb.halosEnabled});(Qa=Qa.slice(Qa.indexOf(this.target)+1)[0]||Qa[0]||P.world)&&P.world.showHaloFor(Qa,P.domEvt.pointerId);
this.remove()}xa==this&&P.isCommandKey()&&(Qa=this.morphBeneath(P.position),P.world.showHaloFor(Qa,P.domEvt.pointerId));xa==this&&this.remove()}}},{key:"onKeyUp",value:function(P){this.changingName||this.buttonControls.map(function(xa){return xa.onKeyUp(P)})}},{key:"getMesh",value:function(P,xa){var Qa=P.x;P=P.y;xa=void 0===xa?$a.pt(0,0):xa;var Kb=this.world().visibleBounds(),Pc=Kb.height;Kb=Kb.width;var Zc={borderStyle:"dotted",borderWidth:2,borderColor:$a.Color.orange};Zc=this.get("mesh")||this.addMorph(new $a.Morph({name:"mesh",
styleClasses:["halo-mesh"],extent:$a.pt(Kb,Pc),fill:null,submorphs:[new $a.Path(Object.assign({name:"vertical"},Zc)),new $a.Path(Object.assign({name:"horizontal"},Zc))]}));Zc.globalPosition=xa;Zc.getSubmorphNamed("vertical").vertices=[$a.pt(Qa,0).subPt(xa),$a.pt(Qa,Pc).subPt(xa)];Zc.getSubmorphNamed("horizontal").vertices=[$a.pt(0,P).subPt(xa),$a.pt(Kb,P).subPt(xa)];return Zc}}],[{key:"className",get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:$a.Color.transparent},
resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,get:function(){return 40>this.target.bounds().extent().dist($a.pt(0))}},target:{get:function(){return this.state?this.state.target:null},set:function(P){this.state||(this.state={});var xa=!!this.state.target;
this.detachFromTarget();P=this.prepareTarget(P);this.state.target=P;xa&&this.alignWithTarget();$a.connect(P,"onChange",this,"alignWithTarget");$a.connect(P,"onOwnerChanged",this,"removeIfDetached")}}}}}],Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:895,end:16994})}($a.Morph);ic=$a.Halo;
var nd=Da("H",ic);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Mb=Ba.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof Ba.HaloPropertyDisplay?Ba.HaloPropertyDisplay:Ba.HaloPropertyDisplay=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},
{key:"displayProperty",value:function(P){var xa=this.halo.state.activeButton;P=String(P);this.visible=!0;this.textString=P;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(xa.bounds())&&(this.position=$a.pt(xa.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:"className",get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},{key:"defaultPosition",
get:function(){return $a.pt(25,0)}},{key:"for",value:function(P){return P.getSubmorphNamed(this.morphName)||P.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},fill:{defaultValue:$a.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:$a.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:$a.Color.white},position:{defaultValue:this.defaultPosition}}}}],
Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:17185,end:18532})})($a.Label);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Mb=Ba.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof Ba.MultiSelectionTarget?Ba.MultiSelectionTarget:Ba.MultiSelectionTarget=
function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},{key:"selectsMorph",value:function(P){return this.selectedMorphs.includes(P)}},{key:"alignWithSelection",value:function(){var P=this.selectedMorphs.map(function(xa){return xa.globalBounds()}).reduce(function(xa,Qa){return xa.union(Qa)});this.setBounds(P)}},{key:"onGrab",
value:function(P){this.grabbingHand=P.hand;this.selectionGrabbed=!0;P.hand.grab(this.selectedMorphs);$a.once(P.hand,"dropMorphsOn",this,"onGrabEnd");$a.connect(P.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=!1;$a.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(P){var xa=P.value.subPt(P.prevValue);this.selectedMorphs.forEach(function(Qa){return Qa.resizeBy(xa)})}},{key:"updatePosition",value:function(P){if(!this.selectionGrabbed){var xa=
P.value.subPt(P.prevValue);this.selectedMorphs.forEach(function(Qa){return Qa.moveBy(xa)})}}},{key:"updateRotation",value:function(P){var xa=this,Qa=P.value-P.prevValue;this.selectedMorphs.forEach(function(Kb){var Pc=Kb.origin;Kb.adjustOrigin(Kb.localize(xa.worldPoint($a.pt(0,0))));Kb.rotation+=Qa;Kb.adjustOrigin(Pc)})}},{key:"updateScale",value:function(P){var xa=this,Qa=P.value-P.prevValue;this.selectedMorphs.forEach(function(Kb){var Pc=Kb.origin;Kb.adjustOrigin(Kb.localize(xa.worldPoint($a.pt(0,
0))));Kb.scale+=Qa;Kb.adjustOrigin(Pc)})}},{key:"onChange",value:function(P){qb._get(Object.getPrototypeOf(Mb.prototype),"onChange",this).call(this,P);if(this.modifiesSelectedMorphs){switch(P.prop){case "extent":this.updateExtent(P);break;case "scale":this.updateScale(P);break;case "position":this.updatePosition(P);break;case "rotation":this.updateRotation(P)}return P}}}],[{key:"className",get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},
modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]}}}}],Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:18600,end:20818})})($a.Morph);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Mb=Ba.hasOwnProperty("HaloItem")&&"function"===typeof Ba.HaloItem?
Ba.HaloItem:Ba.HaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:"className",get:function(){return"HaloItem"}},
{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:$a.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:$a.pt(24,24)},halo:{}}}},{key:"for",value:function(P){return P.getSubmorphNamed(this.morphName)||P.addMorph(new this({halo:P,name:this.morphName}))}}],Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:20984,end:21661})})($a.Morph);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Mb=Ba.hasOwnProperty("NameHolder")&&"function"===typeof Ba.NameHolder?Ba.NameHolder:Ba.NameHolder=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"onHoverIn",value:function(P){this.highlightOnHover&&this.nameHolder.active&&
(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=$a.Color.orange)}},{key:"onHoverOut",value:function(P){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=$a.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(P){"Enter"==P.keyCombo?(this.accept(),P.stop()):qb._get(Object.getPrototypeOf(Mb.prototype),"onKeyDown",
this).call(this,P)}},{key:"onMouseUp",value:function(){$a.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(P){this.nameHolder.fontColor=$a.Color.white;this.halo.toggleMorphHighlighter(!1,this.target)}},{key:"onKeyUp",value:function(P){P=this.nameHolder.textString;var xa=this.target.owner;this.validName=!xa||!xa.getSubmorphNamed(P)||this.target.name==P;$a.signal(this,"valid",[this.validName,P])}},{key:"update",value:function(){var P=this;this.nameHolder.textString!==this.target.name&&
(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return P.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(P){if(!this.forceUniqueName||this.validName)this.target.name=P,$a.signal(this,"active",[!1,this])}}],
[{key:"className",get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},fill:{defaultValue:$a.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new $a.HorizontalLayout({resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new $a.Text({fill:$a.Color.transparent,
fontColor:$a.Color.white,fontWeight:"bold",active:!0}));$a.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21698,end:24232})})($a.Morph);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Mb=Ba.hasOwnProperty("NameHaloItem")&&
"function"===typeof Ba.NameHaloItem?Ba.NameHaloItem:Ba.NameHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:Symbol.for("lively-instance-initialize"),value:function(P){qb._get(Object.getPrototypeOf(Mb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,P);this.initNameHolders();this.validityIndicator=$a.Icon.makeLabel("check",{fontColor:$a.Color.green,fontSize:15,padding:$a.rect(4,
6,4,0)});this.fill=this.halo.target.isComponent?$a.componentAccent:$a.haloBlue;this.alignInHalo()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(P){return{target:P,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var P=this;this.nameHolders=this.targets().map(function(xa){xa=new $a.NameHolder({halo:P.halo,highlightOnHover:xa.highlightOnHover,
target:xa.target});$a.connect(xa,"active",P,"toggleActive");$a.connect(xa,"valid",P,"toggleNameValid");return xa});this.submorphs=$a.arr.interpose(this.nameHolders,{extent:$a.pt(1,28),fill:$a.Color.black.withA(.4)})}},{key:"toggleActive",value:function(P){P=$jscomp.makeIterator(P);var xa=P.next().value,Qa=P.next().value;this.halo.changingName!==xa&&((this.halo.changingName=xa)?(this.nameHolders.forEach(function(Kb){return Kb!=Qa&&Kb.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),
this.fill=$a.Color.darkGray,setTimeout(function(){return Qa.nameHolder.selectAll()})):(this.fill=$a.haloBlue,this.nameHolders.forEach(function(Kb){return Kb!=Qa&&Kb.activate()}),this.borderWidth=0,this.validityIndicator.remove(),this.halo.focus()),this.alignInHalo())}},{key:"toggleNameValid",value:function(P){var xa=$jscomp.makeIterator(P);P=xa.next().value;xa=xa.next().value;(this.validName=P)?(this.conflictingMorph=null,this.borderColor=$a.Color.green,this.validityIndicator.nativeCursor="auto",
this.validityIndicator.fontColor=$a.Color.green,$a.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(xa),this.borderColor=$a.Color.red,this.validityIndicator.fontColor=$a.Color.red,this.validityIndicator.nativeCursor="pointer",$a.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){$a.arr.zip(this.targets(),this.nameHolders).map(function(xa){var Qa=$jscomp.makeIterator(xa);xa=Qa.next().value.target;Qa=Qa.next().value;Qa.target=
xa;Qa.update()});var P=this.halo.innerBounds().bottomCenter().addPt($a.pt(0,2));this.topCenter=$a.pt(Math.max(P.x,30),Math.max(P.y,80))}},{key:"onMouseDown",value:function(P){var xa=this,Qa=this.conflictingMorph;Qa&&(this.halo.toggleMorphHighlighter(!0,Qa),setTimeout(function(){return xa.halo.toggleMorphHighlighter(!1,Qa)},1E3))}}],[{key:"className",get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:4},
fill:{defaultValue:$a.haloBlue},borderColor:{defaultValue:$a.Color.green},layout:{initialize:function(){this.layout=new $a.HorizontalLayout({resizeContainer:!0,spacing:0})}}}}}],Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:24234,end:27401})})($a.HaloItem);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
Mb=Ba.hasOwnProperty("CloseHaloItem")&&"function"===typeof Ba.CloseHaloItem?Ba.CloseHaloItem:Ba.CloseHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"update",value:function(){var P=this.halo,xa=P.target.owner;xa.undoStart("close-halo");P.target.selectedMorphs?P.target.selectedMorphs.forEach(function(Qa){return Qa.remove()}):P.target.remove();xa.undoStop("close-halo");P.remove()}},{key:"onMouseDown",
value:function(P){this.update()}}],[{key:"className",get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["fas","fa-times"]},draggable:{defaultValue:!1},tooltip:{defaultValue:"Remove this morph from the world"}}}}],Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27404,end:28010})})($a.HaloItem);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Mb=Ba.hasOwnProperty("GrabHaloItem")&&"function"===typeof Ba.GrabHaloItem?Ba.GrabHaloItem:Ba.GrabHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"adjustTarget",value:function(P,xa){$a.PropertyPath("owner.layout.autoResize").get(P)&&
!P.globalBounds().insetBy(10).containsPoint(xa)&&(P=P.owner);return P}},{key:"valueForPropertyDisplay",value:function(){var P=this.hand,xa=this.halo,Qa=this.prevDropTarget,Kb=P.world(),Pc=P.findDropTarget(P.globalPosition,[xa.target],function(Zc){return!Zc.isHaloItem&&!Zc.ownerChain().some(function(le){return le.isHaloItem||!le.visible||0==le.opacity})});Pc=this.adjustTarget(Pc,P.globalPosition);xa.toggleMorphHighlighter(Pc&&Pc!=Kb,Pc,!0);Qa&&Qa!=Pc&&xa.toggleMorphHighlighter(!1,Qa);return(this.prevDropTarget=
Pc)&&Pc.name}},{key:"init",value:function(P){var xa=this.halo,Qa=xa.target.undoStart("grab-halo");Qa&&Qa.addTarget(xa.target.owner);this.hand=P;xa.target.onGrab({halo:xa,hand:P,isShiftDown:function(){return!1}});xa.state.activeButton=this;this.opacity=.3;var Kb=$a.connect(P,"update",this,"update");$a.once(xa.target,"remove",function(){return Kb.disconnect()})}},{key:"stop",value:function(P){var xa=this.halo,Qa=this.prevDropTarget,Kb=xa.target.undoInProgress,Pc=P.hand.findDropTarget(P.hand.globalPosition,
[xa.target],function(Zc){return!Zc.isHaloItem&&!Zc.ownerChain().some(function(le){return le.isHaloItem})});Pc=this.adjustTarget(Pc,P.hand.globalPosition);$a.disconnect(P.hand,"update",this,"update");$a.MorphHighlighter.interceptDrop(xa,Pc,xa.target);Kb.addTarget(Pc);Pc.onDrop(P);xa.state.activeButton=null;xa.alignWithTarget();xa.toggleMorphHighlighter(!1,Qa);$a.MorphHighlighter.removeHighlighters(xa);xa.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},
{key:"onDragStart",value:function(P){this.init(P.hand)}},{key:"onDragEnd",value:function(P){this.stop(P)}}],[{key:"className",get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:28013,end:30518})})($a.HaloItem);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Mb=Ba.hasOwnProperty("DragHaloItem")&&"function"===typeof Ba.DragHaloItem?Ba.DragHaloItem:Ba.DragHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},
{key:"updateAlignmentGuide",value:function(P){var xa=this.halo.getSubmorphNamed("mesh");if(P)return xa=this.halo.getMesh(this.halo.target.worldPoint($a.pt(0,0))),this.focus(),xa;xa&&xa.remove()}},{key:"init",value:function(){var P=this.halo.target;P.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=P.position;this.targetTransform=P.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();
this.updateAlignmentGuide(!1);$a.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(P,xa,Qa){xa=void 0===xa?!1:xa;Qa=void 0===Qa?!1:Qa;this.actualPos=P=this.actualPos.addPt(this.targetTransform.transformDirection(P));xa&&(P=P.griddedBy($a.pt(10,10)));this.halo.target.position=P;this.updateAlignmentGuide(xa);xa||$a.showAndSnapToGuides(this.halo.target,!0,Qa,5,500)}},{key:"onDragStart",value:function(P){this.init()}},{key:"onDrag",value:function(P){this.update(P.state.dragDelta,P.isAltDown(),
P.isCtrlDown())}},{key:"onDragEnd",value:function(P){this.stop()}},{key:"onKeyUp",value:function(P){this.updateAlignmentGuide(!1)}}],[{key:"className",get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],Ba,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:30521,end:32332})})($a.HaloItem);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Mb=Ba.hasOwnProperty("InspectHaloItem")&&"function"===typeof Ba.InspectHaloItem?Ba.InspectHaloItem:Ba.InspectHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"onMouseDown",value:function(P){var xa=this;(function(){var Qa,Kb,Pc,Zc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(le){if(1==le.nextAddress)return le.yield(System.import("lively.ide/js/inspector.js"),2);Qa=le.yieldResult;Kb=Qa.default;(Pc=xa.world().getSubmorphsByStyleClassName("Inspector").find(function(Rd){return Rd.targetObject==xa.halo.target}))&&(Zc=Pc.getWindow())?(Zc.minimized=!1,Zc.animate({center:xa.world().visibleBounds().center(),
duration:200})):Kb.openInWindow({targetObject:xa.halo.target});xa.halo.remove();le.jumpToEnd()})})()}}],[{key:"className",get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:32335,end:33237})})($a.HaloItem);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Mb=Ba.hasOwnProperty("EditHaloItem")&&"function"===typeof Ba.EditHaloItem?Ba.EditHaloItem:Ba.EditHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,
ta,[{key:"onMouseDown",value:function(P){var xa=this;(P=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(Qa){return Qa.target==xa.halo.target}))?(P=P.getWindow(),P.bringToFront(),P.minimized=!1,P.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",{target:this.halo.target});this.halo.remove()}}],[{key:"className",get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},
draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:33240,end:34022})})($a.HaloItem);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Mb=Ba.hasOwnProperty("RotateHaloItem")&&"function"===
typeof Ba.RotateHaloItem?Ba.RotateHaloItem:Ba.RotateHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:Symbol.for("lively-instance-initialize"),value:function(P){qb._get(Object.getPrototypeOf(Mb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,P);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(P){this.setProperty("angle",
P)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(P){this.setProperty("scaleGauge",P)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(P){this.setProperty("initRotation",P)}},{key:"valueForPropertyDisplay",value:function(){var P=this.halo.target;return this.scaleGauge?P.scale.toFixed(4).toString():$a.num.toDegrees(P.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(P){this.detachFromLayout();
this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=P;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(P){this.detachFromLayout();this.halo.state.activeButton=this;this.scaleGauge=P.scaleBy(1/this.halo.target.scale);this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(P){this.scaleGauge=null;P=this.initRotation+(P-this.angle);P=$a.num.toRadians($a.num.detent($a.num.toDegrees(P),
10,45));this.halo.target.rotation=P;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(P){var xa=this.scaleGauge,Qa=this.halo;xa||(xa=this.scaleGauge=P.scaleBy(1/Qa.target.scale));this.angle=P.theta();this.initRotation=Qa.target.rotation;Qa.target.scale=$a.num.detent(P.dist($a.pt(0,0))/xa.dist($a.pt(0,0)),.1,.5);Qa.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();
this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(P){this.styleClasses=["fas",P?"fa-search-plus":"fa-redo"];this.tooltip=P?"Scale morph":"Rotate morph"}},{key:"detachFromLayout",value:function(){this.savedLayout=this.halo.layout;this.halo.layout=null}},{key:"attachToLayout",value:function(){this.halo.layout=this.savedLayout}},{key:"onDragStart",value:function(P){this.adaptAppearance(P.isShiftDown());
P.isShiftDown()?this.initScale(P.position.subPt(this.halo.target.globalPosition)):this.init(P.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(P){this.globalPosition=P.position.addPt($a.pt(-10,-10));this.adaptAppearance(P.isShiftDown());P.isShiftDown()?this.updateScale(P.position.subPt(this.halo.target.globalPosition)):this.update(P.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(P){this.adaptAppearance(P.isShiftDown());
this.stop()}},{key:"onKeyDown",value:function(P){this.adaptAppearance(P.isShiftDown())}},{key:"onKeyUp",value:function(P){this.adaptAppearance(P.isShiftDown())}}],[{key:"className",get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:34024,end:37468})})($a.HaloItem);$a.nameNumberRe=/(.+)([0-9]+)$/;(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Mb=Ba.hasOwnProperty("ComponentHaloItem")&&"function"===typeof Ba.ComponentHaloItem?Ba.ComponentHaloItem:Ba.ComponentHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"updateComponentIndicator",
value:function(){var P=this.world(),xa=this.halo.target;this.halo.remove();P.showHaloFor(xa)}},{key:"onMouseDown",value:function(){this.halo.target.isComponent=!this.halo.target.isComponent;this.updateComponentIndicator()}}],[{key:"className",get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=
this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:37510,end:38256})})($a.HaloItem);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Mb=Ba.hasOwnProperty("CopyHaloItem")&&"function"===typeof Ba.CopyHaloItem?
Ba.CopyHaloItem:Ba.CopyHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"init",value:function(P){function xa(jf,ce){return ce.match($a.nameNumberRe)?ce.replace($a.nameNumberRe,function(we,Mf,Bf){Bf||(Bf="0");for(we=Number(Bf);jf.get(Mf+ ++we););return Mf+we}):ce+"1"}var Qa=this.halo,Kb=Qa.target,Pc=Qa.world(),Zc=Kb instanceof $a.MultiSelectionTarget;Qa.remove();$a.connect(P,"update",this,
"update");if(Zc){var le=Kb.selectedMorphs.map(function(jf){return Pc.addMorph(jf.copy())});Zc=le.map(function(jf){jf.name=xa(Kb,jf.name);return jf.position});le[0].undoStart("copy-halo");Pc.addMorph(Qa);Qa.refocus(le);P.grab(Qa.target);Qa.target.onGrab({halo:Qa,hand:P,isShiftDown:function(){return!1}});Zc.forEach(function(jf,ce){return le[ce].globalPosition=jf});Qa.alignWithTarget()}else{Zc=Kb.globalPosition;var Rd=Kb.copy();Kb.isComponent&&(Rd.isComponent=!1,Rd.withAllSubmorphsDoExcluding(function(jf){jf!=
Rd&&jf.master||delete jf._parametrizedProps},function(jf){return jf.master&&jf!=Rd}),Rd.master=Kb);Rd.name=xa(Kb,Kb.name);Pc.addMorph(Rd);Rd.globalPosition=Zc;Rd.undoStart("copy-halo");P.grab(Rd);Pc.addMorph(Qa);Qa.visible=!1}}},{key:"stop",value:function(P){var xa=this.halo,Qa=$jscomp.makeIterator(P.grabbedMorphs).next().value,Kb=P.findDropTarget(P.globalPosition,[xa.target],function(Zc){return!Zc.isHaloItem&&!Zc.ownerChain().some(function(le){return le.isHaloItem})}),Pc=xa.target.undoInProgress;
$a.disconnect(P,"update",this,"update");Pc.addTarget(Kb);P.dropMorphsOn(Kb);xa.target.undoStop("copy-halo");xa.remove();P.world().showHaloFor(Qa)}},{key:"onDragStart",value:function(P){this.init(P.hand)}},{key:"onDragEnd",value:function(P){this.stop(P.hand)}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var P=this,xa,Qa,Kb,Pc,Zc,le,Rd,jf,ce,we,Mf,Bf,rg,Qf,Yc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rf){switch(Rf.nextAddress){case 1:xa=
P;Qa=xa.halo;if(Qa.nameHalo().nameHolders.find(function(Fg){return Fg.nameHolder===$world.focusedMorph}))return Rf.return();Kb=Qa.target;Pc=Qa.world();Zc=Kb instanceof $a.MultiSelectionTarget;le=Kb.globalBounds().topLeft();Rd=Zc?Kb.selectedMorphs:[Kb];jf=[];ce='<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>";Qa.remove();Rf.setCatchFinallyBlocks(2);
we=$jscomp.makeIterator(Rd);Mf=we.next();case 4:if(Mf.done)return ce+="</body></html>",Qf=JSON.stringify(jf),Rf.yield(P.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:ce},{type:"application/morphic",data:Qf}]),8);Bf=Mf.value;return Rf.yield($a.createMorphSnapshot(Bf,{addPreview:!1,testLoad:!1}),7);case 7:rg=Rf.yieldResult;rg.copyMeta={offset:Bf.worldPoint($a.pt(0,0)).subPt(le)};jf.push(rg);ce+=Bf.renderPreview();Mf=we.next();Rf.jumpTo(4);break;case 8:Rf.leaveTryBlock(3);break;case 2:return Yc=
Rf.enterCatchBlock(),Pc.logError(Yc),Rf.return();case 3:Pc.addMorph(Qa),Qa.refocus(Rd),Qa.setStatusMessage("copied"),Rf.jumpToEnd()}})}},{key:"onMouseUp",value:function(P){var xa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){P.stop();return Qa.yield(xa.copyToClipBoard(),0)})}}],[{key:"className",get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},
styleClasses:{defaultValue:["far","fa-clone"]}}}}],Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:38258,end:42247})})($a.HaloItem);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Mb=Ba.hasOwnProperty("OriginHaloItem")&&"function"===typeof Ba.OriginHaloItem?
Ba.OriginHaloItem:Ba.OriginHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"fill",get:function(){return $a.Color.white.interpolate(.2,this.borderColorTop)}},{key:"extent",get:function(){return $a.pt(15,15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",
value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(P){var xa=this.halo,Qa=xa.target.origin,Kb=xa.target.worldPoint(Qa);
P=xa.target.localize(Kb.addPt(P)).subPt(xa.target.scroll).subPt(Qa);xa.target.adjustOrigin(xa.target.origin.addPt(P))}},{key:"onDragStart",value:function(P){this.init()}},{key:"onDragEnd",value:function(P){this.stop()}},{key:"onDrag",value:function(P){this.update(P.state.dragDelta)}}],[{key:"className",get:function(){return"OriginHaloItem"}},{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},
draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?$a.componentAccent:$a.haloBlue}}}}}],Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:42250,end:43881})})($a.HaloItem);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
Mb=Ba.hasOwnProperty("ResizeHandle")&&"function"===typeof Ba.ResizeHandle?Ba.ResizeHandle:Ba.ResizeHandle=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"valueForPropertyDisplay",value:function(){var P=this.halo.target.extent,xa=P.y;return P.x.toFixed(1)+"x"+xa.toFixed(1)}},{key:"positionInHalo",value:function(){var P=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&($a.Rectangle.prototype.sides.includes(this.location)&&
(this.visible=!1),P=P.insetBy(-4));return P.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(P){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(P.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(P){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(P.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(P){this.init(P.position,P.isShiftDown())}},{key:"onDragEnd",
value:function(P){this.stop(P.isShiftDown())}},{key:"onDrag",value:function(P){this.update(P.position,P.isShiftDown(),P.isAltDown(),P.isCtrlDown());this.focus()}},{key:"init",value:function(P,xa){xa=void 0===xa?!1:xa;var Qa=this.halo.target,Kb=Qa.origin,Pc=Qa.position;Qa=Qa.extent;this.startPos=P;this.startBounds=Pc.subPt(Kb).extent(Qa);this.startOrigin=this.halo.target.origin;this.savedLayout=this.halo.layout;this.halo.layout=null;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();
P=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=$a.num.toRadians(P%45);this.halo.toggleDiagonal(xa,this.corner)}},{key:"update",value:function(P,xa,Qa,Kb){xa=void 0===xa?!1:xa;Qa=void 0===Qa?!1:Qa;Kb=void 0===Kb?!1:Kb;var Pc=this.corner,Zc=this.tfm;P=this.startPos.subPt(P);Zc=Zc.transformDirection($a.pt(P.x,P.y));Qa&&(Zc=Zc.griddedBy($a.pt(10,10)));this.halo.updateBoundsFor(Pc,xa,Zc,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(xa,Pc);this.updateAlignmentGuide(Qa);
xa=[];Pc=Pc.toLowerCase();Pc.includes("left")&&xa.push("left");Pc.includes("top")&&xa.push("top");Pc.includes("bottom")&&xa.push("bottom");Pc.includes("right")&&xa.push("right");$a.showAndSnapToResizeGuides(this.halo.target,xa,!0,Kb,5,200)}},{key:"stop",value:function(P){P=this.halo;P.layout=this.savedLayout;P.state.activeButton=null;P.alignWithTarget();P.toggleDiagonal(!1);this.updateAlignmentGuide(!1);$a.removeSnapToGuidesOf(P.target)}},{key:"updateAlignmentGuide",value:function(P){var xa=this.halo.getSubmorphNamed("mesh");
if(P)return P=this.halo.target.extent,P=$a.pt(P.x%10,P.y%10),xa=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),P),this.focus(),xa;xa&&xa.remove()}}],[{key:"className",get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(P){0<P&&(P-=360);P=-8-(P/45).toFixed();0==P&&(P=8);return $a.arr.zip($a.arr.rotate([["topLeft",
function(xa){return xa.negated()}],["topCenter",function(xa){return xa.withX(0).negated()}],["topRight",function(xa){return xa.withX(0).negated()}],["rightCenter",function(xa){return $a.pt(0,0)}],["bottomRight",function(xa){return $a.pt(0,0)}],["bottomCenter",function(xa){return $a.pt(0,0)}],["bottomLeft",function(xa){return xa.withY(0).negated()}],["leftCenter",function(xa){return xa.withY(0).negated()}]],P),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize",
"rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(P){var xa=this;if(!P.target)return[];var Qa=P.target.getGlobalTransform().getRotation();return $a.arr.compact(this.getResizeParts(Qa).map(function(Kb){var Pc=$jscomp.makeIterator(Kb),Zc=$jscomp.makeIterator(Pc.next().value);Kb=Zc.next().value;Zc.next();Zc.next();Zc=$jscomp.makeIterator(Pc.next().value);Pc=Zc.next().value;Zc=Zc.next().value;
return xa.for(P,Kb,Zc,Pc)})).map(function(Kb){return Kb.alignInHalo()})}},{key:"for",value:function(P,xa,Qa,Kb){var Pc="Resize "+xa;P=P.getSubmorphNamed(Pc)||new this({name:Pc,halo:P,corner:xa,tooltip:"Resize "+xa,extent:$a.pt(10,10),borderWidth:1,borderRadius:0,borderColor:P.target.isComponent?$a.componentAccent:$a.haloBlue,fill:$a.Color.white});return Object.assign(P,{nativeCursor:Kb,location:Qa})}}],Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:43941,end:49204})})($a.HaloItem);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Mb=Ba.hasOwnProperty("MenuHaloItem")&&"function"===typeof Ba.MenuHaloItem?Ba.MenuHaloItem:Ba.MenuHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,
ta,[{key:"onMouseDown",value:function(P){var xa=this,Qa,Kb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pc){if(1==Pc.nextAddress)return Qa=xa.halo.target,xa.halo.remove(),Pc.yield(Qa.menuItems(),2);Kb=Pc.yieldResult;Qa.world().openMenu(Kb).hasFixedPosition=xa.halo.hasFixedPosition;Pc.jumpToEnd()})}}],[{key:"className",get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},
styleClasses:{defaultValue:["fas","fa-bars"]}}}}],Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:49207,end:49718})})($a.HaloItem);var vd=Da("M",function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Mb=Ba.hasOwnProperty("MorphHighlighter")&&"function"===typeof Ba.MorphHighlighter?
Ba.MorphHighlighter:Ba.MorphHighlighter=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,this.get("name tag").topCenter=
this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(P){this.layoutHalo&&
this.layoutHalo.handleDrop(P)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();this.remove()}}],[{key:"className",get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:$a.Color.orange.withA(.3)},
borderWidth:{defaultValue:2},borderColor:{defaultValue:$a.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},highlightedSides:{defaultValue:[],set:function(P){var xa=this;this.setProperty("highlightedSides",P);this.submorphs=P.map(function(Qa){return{type:"ellipse",isHaloItem:!0,fill:$a.Color.orange,center:xa.innerBounds()[Qa]()}});this.addMorph({type:"label",name:"name tag",padding:$a.Rectangle.inset(5,5,5,5),fontColor:$a.Color.white,fill:$a.Color.orange,
borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(P){P=void 0===P?$world:P;var xa=P._morphHighlighters,Qa;for(Qa in xa)xa[Qa].remove();delete P._morphHighlighters}},{key:"for",value:function(P,xa,Qa,Kb){Qa=void 0===Qa?!1:Qa;Kb=void 0===Kb?[]:Kb;var Pc=P._morphHighlighters=P._morphHighlighters||{};$a.properties.forEachOwn(Pc,
function(Zc,le){return le.alignWithHalo()});if(!xa||xa.ownerChain().find(function(Zc){return Zc.isHaloItem}))return null;Pc[xa.id]=Pc[xa.id]||new this({targetId:xa.id,halo:P,showLayout:Qa});P.addMorph(Pc[xa.id]);Pc[xa.id].highlightedSides=Kb;return Pc[xa.id]}},{key:"interceptDrop",value:function(P,xa,Qa){(P=P._morphHighlighters=P._morphHighlighters||{},P[xa.id])&&P[xa.id].handleDrop(Qa)}}],Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:49908,end:53420})}($a.Morph));$a.MorphHighlighter=vd;$a.MorphHighlighter=vd;$a.MorphHighlighter=vd;var Xc=Da("I",function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Mb=Ba.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof Ba.InteractiveMorphSelector?Ba.InteractiveMorphSelector:Ba.InteractiveMorphSelector=function(P){P&&
P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:Symbol.for("lively-instance-initialize"),value:function(P,xa,Qa){P=void 0===P?$world:P;this.controllingMorph=void 0===xa?null:xa;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=P;this.filterFn=Qa;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var P=$a.promise.deferred();P.promise.resolve=P.resolve;this.whenDone=
P.promise;this.selectorMorph=$a.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();$a.connect(this.world.firstHand,"position",this,"scanForTargetAt");$a.once(this.selectorMorph,"onMouseDown",this,"selectTarget");$a.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var P=this.world.firstHand.globalPosition;this.selectorMorph.center=P;this.selectorMorph.focus();
var xa=this.selectorMorph.morphBeneath(P),Qa,Kb=this.possibleTarget,Pc=this.controllingMorph,Zc=this.filterFn,le=this.world,Rd=this.morphHighlighter;for(Rd==xa?xa=Rd.morphBeneath(P):xa&&xa.isEpiMorph&&(xa=xa.morphBeneath(P));xa&&(Qa=[xa].concat($jscomp.arrayFromIterable(xa.ownerChain())).find(function(jf){return!jf.visible}));)xa=Qa=Qa.morphBeneath(P);if(xa&&Zc&&!Zc(xa))for(;xa&&![xa].concat($jscomp.arrayFromIterable(xa.ownerChain())).find(Zc);)xa=xa.morphBeneath(P);!xa||xa==Kb||Pc&&xa.ownerChain().includes(Pc.getWindow())||
(Rd&&Rd.deactivate(),(this.possibleTarget=Kb=xa)&&!Kb.isWorld&&(P=this.morphHighlighter=$a.MorphHighlighter.for(le,xa))&&P.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){$a.MorphHighlighter.removeHighlighters(this.world);$a.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:"className",get:function(){return"InteractiveMorphSelector"}},
{key:"selectMorph",value:function(P,xa,Qa){P=new this(P,xa,Qa);P.selectNewTarget();return P.whenDone}}],Ba,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:53429,end:56174})}(void 0));$a.InteractiveMorphSelector=Xc;$a.InteractiveMorphSelector=Xc;$a.InteractiveMorphSelector=Xc;$a.default=ic;var Wa=
lively.FreezerRuntime.recorderFor("lively.halos/markers.js");Wa.show=Ra;Wa.showRect=function(ta,Ba,Mb){var P=Wa.BoundsMarker.highlightBounds(Ba);return Mb?Wa.showInLoop(ta,P,Ba):Wa.showThenHide(ta,P)};Wa.showInLoop=function(ta,Ba,Mb){var P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xa){switch(xa.nextAddress){case 1:return Wa.showThenHide(ta,Ba,!1),xa.yield(Wa.promise.delay(300),2);case 2:P=!1,Wa.once(ta,"onMouseDown",function(){return P=!0});case 3:if(P){xa.jumpTo(4);break}return xa.yield(Ba.retract(Mb),
3);case 4:Ba.fadeOut(2E3),xa.jumpToEnd()}})};Wa.showThenHide=function(ta,Ba,Mb){Mb=void 0===Mb?3:Mb;if(ta){var P=Array.isArray(Ba)?Ba:[Ba];P.forEach(function(xa){return ta.addMorph(xa)});Mb&&setTimeout(function(){return P.forEach(function(xa){return xa.fadeOut(2E3)})},1E3*Mb);return Ba}};Wa.showLine=function(ta,Ba,Mb){Mb=void 0===Mb?3E3:Mb;var P=Ba.start;Ba=Ba.end.subPt(P);var xa=ta.addMorph({position:P,rotation:Ba.theta(),border:{width:1,color:Wa.Color.red},width:Ba.fastR(),height:0});Mb&&setTimeout(function(){return xa.fadeOut()},
Mb);return xa};Wa.showConnector=cc;Wa.obj=tc;Wa.promise=td;Wa.string=bc;Wa.pt=Tb;Wa.Color=kc;Wa.Rectangle=db;Wa.rect=md;Wa.morph=ec;Wa.easings=Ic;Wa.Path=Sc;Wa.Icon=fe;Wa.Morph=he;Wa.MorphicEnv=ra;Wa.connect=Pb;Wa.once=Rb;Wa.disconnect=Tc;Wa.show=Ra;Wa.show=Ra;(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Mb=Ba.hasOwnProperty("BoundsMarker")&&"function"===typeof Ba.BoundsMarker?Ba.BoundsMarker:Ba.BoundsMarker=function(P){P&&P[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:Symbol.for("lively-instance-initialize"),value:function(){qb._get(Object.getPrototypeOf(Mb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:Wa.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",get:function(){return!0}},{key:"markerLength",value:function(P){P=P.insetBy(-2);P=Math.min(P.width,P.height);return Math.max(4,Math.floor(10>P/10?P/
2-5:P/10))}},{key:"createMarkerEdge",value:function(){return Wa.morph({fill:Wa.Color.red,reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var P=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),xa=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),Qa=this.topRightH||(this.topRightH=this.addMorph(this.createMarkerEdge())),Kb=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),Pc=this.bottomRightH||(this.bottomRightH=
this.addMorph(this.createMarkerEdge())),Zc=this.bottomRightV||(this.bottomRightV=this.addMorph(this.createMarkerEdge())),le=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),Rd=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[P,xa,Qa,Kb,Pc,Zc,le,Rd]}},{key:"alignWithMorph",value:function(P){return this.alignWithBounds(P.globalBounds().translatedBy($world.scroll.negated()))}},{key:"alignWithBounds",value:function(P){this.alignWithRect(P.insetBy(-20));
return this.alignWithRect(P,!0)}},{key:"alignWithRect",value:function(P,xa){var Qa=this.ensureMarkerCorners(),Kb=this.markerLength(P),Pc=[P.topLeft().addXY(0,0).extent(Wa.pt(Kb,5)),P.topLeft().addXY(0,0).extent(Wa.pt(5,Kb)),P.topRight().addXY(-Kb,0).extent(Wa.pt(Kb,5)),P.topRight().addXY(-5,0).extent(Wa.pt(5,Kb)),P.bottomRight().addXY(-5,-Kb).extent(Wa.pt(5,Kb)),P.bottomRight().addXY(-Kb,-5).extent(Wa.pt(Kb,5)),P.bottomLeft().addXY(0,-5).extent(Wa.pt(Kb,5)),P.bottomLeft().addXY(0,-Kb).extent(Wa.pt(5,
Kb))];Qa.forEach(function(Zc,le){return Zc.setBounds(Pc[le])});xa&&(this.adjustOrigin(P.center()),this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(P){var xa=this,Qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kb){if(1==Kb.nextAddress)return Kb.yield(xa.animate({scale:Math.max(30/P.width,1.05)}),2);Qa=xa.center;return Kb.yield(xa.animate({center:Qa,scale:1,duration:300,easing:Wa.easings.inOutExpo}),0)})}}],[{key:"className",
get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(P){return(new this).alignWithMorph(P)}},{key:"highlightBounds",value:function(P){return(new this).alignWithBounds(P)}}],Ba,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2261,end:5920})})(Wa.Morph);ic=Da("S",function(ta){var Ba=
lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Mb=Ba.hasOwnProperty("StatusMessage")&&"function"===typeof Ba.StatusMessage?Ba.StatusMessage:Ba.StatusMessage=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"relayout",value:function(){this.title=Wa.string.truncate(this.message,(this.width/15).toFixed(),"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},
{key:"setMessage",value:function(P,xa){this.message=P;this.color=xa}},{key:"slideTo",value:function(P){var xa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){if(1==Qa.nextAddress)return xa.sliding=xa.animate({position:P,duration:500}),Qa.yield(xa.sliding,2);xa.sliding=!1;Qa.jumpToEnd()})}},{key:"expand",value:function(){var P=this,xa,Qa,Kb,Pc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zc){if(1==Zc.nextAddress)return P.expandable?P.sliding?Zc.yield(P.sliding,2):
Zc.jumpTo(2):Zc.return();xa=P.world();if(!xa||P.isMaximized)return Zc.return();P.isMaximized=!0;P.stayOpen=!0;Qa=P.getSubmorphNamed("message text");Qa.lineWrapping=!1;Object.assign(Qa,{clipMode:"auto",fixedWidth:!0,selectable:!0});P.expandedContent&&(Qa.value=P.expandedContent);Qa.fit();Kb=Qa.textBounds().extent();Pc=xa.visibleBounds();Kb.y>Pc.extent().y&&(Kb.y=Pc.extent().y-20);Kb.x>Pc.extent().x&&(Kb.x=Pc.extent().x-20);Kb=P.extent.maxPt(Kb);P.animate({extent:Kb,center:Pc.center(),duration:200});
P.relayout();P.focus();Zc.jumpToEnd()})}},{key:"fit",value:function(){var P=this.getSubmorphNamed("message text");P&&(this.extent=Wa.pt(100,35).maxPt(P.textBounds().extent()),this.relayout())}},{key:"focus",value:function(){var P=this.getSubmorphNamed("message text");P&&P.focus()}},{key:"onMouseUp",value:function(P){this.expand()}}],[{key:"className",get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:Wa.pt(200,100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},
isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(P){this.setProperty("message",P);var xa=this.getSubmorphNamed("message text");if(xa){xa.value=P;var Qa=xa.documentEndPosition;Qa.row>this.maxLines&&(xa.replace({start:{row:this.maxLines,column:0},end:Qa},"...\n"),this.expandedContent||
(this.expandedContent=P));Qa=xa.documentEndPosition;0!==Qa.column&&xa.insertText("\n",Qa)}}},title:{isStyleProp:!0,derived:!0,set:function(P){this.getSubmorphNamed("message title").value=P},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(P){this.get("message icon").fontColor=P;this.get("message icon")._parametrizedProps&&(this.get("message icon")._parametrizedProps.fontColor=
P)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[{name:"message icon",type:"label",value:Wa.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},{name:"message title",type:"label"},{name:"close button",type:"button"}];Wa.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");Wa.connect(this,"extent",this,"relayout")}}}}}],Ba,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:5964,end:10242})}(Wa.Morph));Wa.StatusMessage=ic;Wa.StatusMessage=ic;Wa.StatusMessage=ic;var Nc=Da("b",function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Mb=Ba.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof Ba.StatusMessageForMorph?Ba.StatusMessageForMorph:Ba.StatusMessageForMorph=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return qb(Mb,ta,[{key:"alignAtBottomOf",value:function(P){var xa=this.world();xa&&(this.bringToFront(),this.fit(),this.width=P.bounds().width,this.relayout(),P.world()&&(this.position=P.owner.worldPoint(P.bounds().bottomLeft())),P=xa.visibleBounds(),P=this.bounds().top()+this.height-P.bottom(),0<P&&this.moveBy(Wa.pt(0,-P)))}},{key:"onMouseUp",value:function(P){}}],[{key:"className",get:function(){return"StatusMessageForMorph"}},{key:"properties",get:function(){return{slidable:{defaultValue:!1},
renderOnGPU:{defaultValue:!0},removeOnTargetMorphChange:{defaultValue:!0},targetMorph:{defaultValue:null,get:function(){var P=this.getProperty("targetMorph");return P&&$world.getMorphWithId(P)},set:function(P){this.setProperty("targetMorph",P?P.id:null);this.alignAtBottomOf(P)}},expandable:{after:["submorphs"],set:function(P){this.setProperty("expandable",P);if(P){var xa=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",type:"button"});Wa.connect(xa,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&
(this.getSubmorphNamed("expand button").remove(),Wa.disconnect(xa,"fire",this,"expand"))}}}}}],Ba,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10467,end:12318})}(Wa.StatusMessage));Wa.StatusMessageForMorph=Nc;Wa.StatusMessageForMorph=Nc;Wa.StatusMessageForMorph=Nc;Wa.showConnector=cc;Wa.showConnector=
cc;var pb=lively.FreezerRuntime.recorderFor("lively.ide/index.js");pb.info="import via sub modules";pb.info="import via sub modules";pb.info="import via sub modules";var gb=Da("v",{});pb.valueWidgets=gb;pb.valueWidgets=gb;pb.valueWidgets=gb;var hb=Da("p",{});pb.popovers=hb;pb.popovers=hb;pb.popovers=hb;var Yb=lively.FreezerRuntime.recorderFor("lively.components/popup.js");Yb.Morph=he;Yb.VerticalLayout=Fa;Yb.StyleSheet=Zd;Yb.Icon=fe;Yb.CustomLayout=mb;Yb.Color=kc;Yb.rect=md;Yb.pt=Tb;Yb.connect=Pb;
Yb.Path=nc;Yb.duration=300;pb=Da("P",function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),Mb=Ba.hasOwnProperty("Popover")&&"function"===typeof Ba.Popover?Ba.Popover:Ba.Popover=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"relayout",value:function(P){var xa=this.get("body"),Qa=this.get("arrow"),Kb=this.get("close button");Qa=Qa.height;P?(xa.animate({topCenter:Yb.pt(0,
Qa),duration:200}),Kb.animate({topRight:xa.topRight.addXY(8,-8),duration:200})):(xa.topCenter=Yb.pt(0,Qa),Kb.topRight=xa.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:"className",get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,after:["submorphs"],defaultValue:{extent:Yb.pt(200,
200),fill:Yb.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},get:function(){return this.get("body").submorphs[0]},set:function(P){var xa=this;this.get("body").addMorph(P);this.whenRendered().then(function(){return xa.relayout()})}},submorphs:{initialize:function(){var P=this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:Yb.pt(0,0),borderColor:Yb.Color.transparent,vertices:[Yb.pt(-10,0),Yb.pt(0,-15),Yb.pt(10,0)]},{name:"body"},{name:"close button",
type:"button",label:Object.assign(Yb.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",fill:null,extent:Yb.pt(16,16),borderColor:Yb.Color.transparent}];var xa=$jscomp.makeIterator(this.submorphs);xa.next();var Qa=xa.next().value;xa=xa.next().value;Yb.connect(xa,"fire",this,"close");Yb.connect(Qa,"extent",this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return P.animated=!0},1E3)}}}}}],Ba,{pathInPackage:function(){return"popup.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:247,end:2617})}(Yb.Morph));Yb.Popover=pb;Yb.Popover=pb;Yb.Popover=pb;var Xb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");Xb.Morph=he;Xb.TilingLayout=ub;Xb.morph=ec;Xb.Label=gd;Xb.HorizontalLayout=kd;Xb.Icon=fe;Xb.InputLine=Db;Xb.config=cb;Xb.connect=Pb;Xb.signal=Qb;Xb.Color=kc;Xb.LinearGradient=Fb;Xb.pt=Tb;Xb.rect=md;Xb.num=zc;Xb.obj=
tc;Xb.popovers=hb;Xb.ValueScrubber=fb;Xb.Popover=pb;(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Mb=Ba.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof Ba.ContextSensitiveWidget?Ba.ContextSensitiveWidget:Ba.ContextSensitiveWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,void 0,[{key:"className",get:function(){return"ContextSensitiveWidget"}},
{key:"properties",get:function(){return{fill:{defaultValue:Xb.Color.transparent},isSelected:{defaultValue:"false",set:function(P){this.setProperty("isSelected",P);this.fontColor=P?Xb.Color.white:Xb.Color.black}},layout:{initialize:function(){this.layout=new Xb.HorizontalLayout}},context:{serialize:!1}}}}],Ba,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,end:2439})})(Xb.Morph);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Mb=Ba.hasOwnProperty("ShortcutWidget")&&"function"===typeof Ba.ShortcutWidget?Ba.ShortcutWidget:Ba.ShortcutWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"onMouseDown",value:function(P){this.openPopover()}},
{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){P.jumpToEnd()})}}],[{key:"className",get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],set:function(P){this.setProperty("title",P);this.getSubmorphNamed("valueString").value=P}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,set:function(P){this.submorphs.forEach(function(xa){return xa.fontColor=P})}},submorphs:{initialize:function(){this.submorphs=
[Xb.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],fontSize:15,padding:Xb.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:Xb.rect(0,0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],Ba,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:2441,end:3667})})(Xb.ContextSensitiveWidget);hb=function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Mb=Ba.hasOwnProperty("LayoutWidget")&&"function"===typeof Ba.LayoutWidget?Ba.LayoutWidget:Ba.LayoutWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+
" Layout":"No Layout"}},{key:"openPopover",value:function(){var P=this,xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){if(1==Qa.nextAddress)return xa=new Xb.popovers.LayoutPopover({hasFixedPosition:!!P.ownerChain().find(function(Kb){return Kb.hasFixedPosition}),container:P.context}),Qa.yield(xa.fadeIntoWorld(P.globalBounds().center()),2);Xb.connect(xa,"layoutChanged",P,"layoutChanged");Xb.signal(P,"openWidget",xa);Qa.jumpToEnd()})}}],[{key:"className",get:function(){return"LayoutWidget"}},
{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],Ba,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3676,end:4493})}(Xb.ShortcutWidget);
Xb.LayoutWidget=hb;Xb.LayoutWidget=hb;Xb.LayoutWidget=hb;pb=function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Mb=Ba.hasOwnProperty("ColorWidget")&&"function"===typeof Ba.ColorWidget?Ba.ColorWidget:Ba.ColorWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"relayout",value:function(P){P?this.submorphs=this.color?this.color.isGradient?this.renderGradientValue():
this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var P=this.color;if(2*P.stops.length==this.submorphs.length-3){var xa;for(xa in this.color.stops){var Qa=P.stops[xa];var Kb=Qa.color,Pc=Qa.offset,Zc=$jscomp.makeIterator(this.submorphs[2+2*xa].submorphs).next().value;Qa=this.submorphs[3+2*xa];Zc.fill=Kb;Qa.value=(100*Pc).toFixed()+"%"+(xa<P.stops.length-1?",":"")}}else this.submorphs=
this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=Xb.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:Xb.pt(15,
15),fill:Xb.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:Xb.pt(5,7.5),fill:Xb.Color.white,borderColor:Xb.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[Xb.pt(0,0),Xb.pt(10,10)],borderColor:Xb.Color.red}]}]},{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:Xb.pt(15,15),fill:Xb.Color.transparent,submorphs:[{styleClasses:["colorValue"],
name:"color box",center:Xb.pt(5,7.5),fill:this.color,borderColor:Xb.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:Xb.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var P=this.color,xa=[{type:"label",padding:Xb.rect(0,0,5,0),value:"linearGradient"==P.type?Xb.num.toDegrees(P.vectorAsAngle()).toFixed()+"\u00b0,":""}],Qa;for(Qa in P.stops){var Kb=P.stops[Qa],Pc=Kb.color;Kb=Kb.offset;xa.push({extent:Xb.pt(this.fontSize,
this.fontSize),fill:Xb.Color.transparent,layout:new Xb.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:Pc}]});xa.push({type:"label",padding:Xb.rect(0,0,5,0),value:(100*Kb).toFixed()+"%"+(Qa<P.stops.length-1?",":"")})}return xa}},{key:"onMouseDown",value:function(P){this.openFillEditor()}},{key:"update",value:function(P){this.color=P}},{key:"openFillEditor",value:function(){var P=this,xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){if(1==Qa.nextAddress)return xa=
new Xb.popovers.FillPopover({hasFixedPosition:!!P.ownerChain().find(function(Kb){return Kb.hasFixedPosition}),handleMorph:P.context,fillValue:P.color,title:"Fill Control",gradientEnabled:P.gradientEnabled}),Qa.yield(xa.fadeIntoWorld(P.globalBounds().center()),2);Xb.connect(xa,"fillValue",P,"update");Xb.signal(P,"openWidget",xa);Qa.jumpToEnd()})}}],[{key:"className",get:function(){return"ColorWidget"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new Xb.HorizontalLayout({direction:"centered"})}},
selectionFontColor:{defaultValue:Xb.Color.white},nonSelectionFontColor:{defaultValue:Xb.Color.black},color:{defaultValue:Xb.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],set:function(P){this.getProperty("isSelected")!=P&&(this.getSubmorphNamed("valueString").fontColor=P?this.selectionFontColor:this.nonSelectionFontColor,this.setProperty("isSelected",P))}},submorphs:{after:["nonSelectionFontColor","selectionFontColor"],initialize:function(){Xb.connect(this,
"color",this,"relayout",{converter:function(P,xa){return(xa&&xa.isColor)!=(P&&P.isColor)}});this.relayout(!0)}}}}}],Ba,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4557,end:9992})}(Xb.ContextSensitiveWidget);Xb.ColorWidget=pb;Xb.ColorWidget=pb;Xb.ColorWidget=pb;var Fd=function(ta){var Ba=
lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Mb=Ba.hasOwnProperty("BooleanWidget")&&"function"===typeof Ba.BooleanWidget?Ba.BooleanWidget:Ba.BooleanWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"onMouseDown",value:function(P){this.boolean=!this.boolean}}],[{key:"className",get:function(){return"BooleanWidget"}},{key:"properties",get:function(){return{fontFamily:{defaultValue:Xb.config.codeEditor.defaultStyle.fontFamily},
nativeCursor:{defaultValue:"pointer"},boolean:{set:function(P){this.setProperty("boolean",P);this.value=Xb.obj.safeToString(P);this.fontColor=this.boolean?Xb.Color.green:Xb.Color.red}}}}}],Ba,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10001,end:10481})}(Xb.Label);Xb.BooleanWidget=
Fd;Xb.BooleanWidget=Fd;Xb.BooleanWidget=Fd;var Be=Da("N",function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Mb=Ba.hasOwnProperty("NumberWidget")&&"function"===typeof Ba.NumberWidget?Ba.NumberWidget:Ba.NumberWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"onMouseDown",value:function(P){qb._get(Object.getPrototypeOf(Mb.prototype),"onMouseDown",this).call(this,
P);"up"==P.targetMorph.name&&this.increment();"down"==P.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return Xb.obj.dissoc(qb._get(Object.getPrototypeOf(Mb.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(P,xa){xa=void 0===xa?!0:xa;this.setProperty("number",xa?P/this.scaleFactor:P);Xb.signal(this,"number",this.number);this.relayout(xa)}},{key:"relayoutButtons",value:function(){var P=this.getSubmorphNamed("up"),xa=this.getSubmorphNamed("down");this.getSubmorphNamed("value");
P.height=xa.height=(this.height-2)/2;P.width=xa.width=20}},{key:"onChange",value:function(P){qb._get(Object.getPrototypeOf(Mb.prototype),"onChange",this).call(this,P);"extent"!=P.prop||this.autofit||this.relayout()}},{key:"relayout",value:function(P){var xa=this.getSubmorphNamed("value");xa&&(this.autofit?(P||(xa.value=this.number*this.scaleFactor),xa.fit(),this.height=xa.height,this.width=xa.width+20):P||(xa.width=this.width-20),this.relayoutButtons(),P||(xa.value=Xb.num.roundTo(this.number*this.scaleFactor,
1),xa.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,xa.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,xa.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=this.min&&this.number<=this.min||this.update(this.number-1/this.scaleFactor,!1)}}],[{key:"className",get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",
isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(P){this.setProperty("autofit",P);this.getSubmorphNamed("value").scaleToBounds=!P}},number:{defaultValue:0,after:["unit","autofit"],set:function(P){this.setProperty("number",P);this.relayout(!1)}},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},floatingPoint:{after:["number","submorphs"],set:function(P){this.setProperty("floatingPoint",P);this.get("value").floatingPoint=P},get:function(){var P=
/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return this.getProperty("floatingPoint")||1==this.scaleFactor&&P&&!!P[1]}},padding:{isStyleProp:!0,defaultValue:Xb.rect(5,3,0,0),after:["submorphs"],set:function(P){this.setProperty("padding",P);this.getSubmorphNamed("value").padding=P}},extent:{defaultValue:Xb.pt(70,25)},scaleFactor:{defaultValue:1,get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(P){this.get("value").baseFactor=
P}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/number field/light"}}},fontColor:{isStyleProp:!0,defaultValue:Xb.Color.rgbHex("#0086b3"),set:function(P){this.setProperty("fontColor",P)}},isSelected:{set:function(P){this.getProperty("isSelected")!=P&&(P?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",P))}},
fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(P){this.setProperty("fontFamily",P)}},fontSize:{defaultValue:15,isStyleProp:!0,set:function(P){this.setProperty("fontSize",P)}},layout:{initialize:function(){this.layout=new Xb.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},submorphs:{after:["min","max"],initialize:function(){var P=this;this.submorphs=[new Xb.ValueScrubber({name:"value",unit:this.unit,floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),
Xb.Icon.makeLabel("sort-up",{name:"up"}),Xb.Icon.makeLabel("sort-up",{name:"down",rotation:Math.PI})];Xb.connect(this.get("value"),"scrub",this,"update");this.whenRendered().then(function(){return P.relayout()})}}}}}],Ba,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10490,end:16426})}(Xb.Morph));
Xb.NumberWidget=Be;Xb.NumberWidget=Be;Xb.NumberWidget=Be;var Ie=function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Mb=Ba.hasOwnProperty("ShadowWidget")&&"function"===typeof Ba.ShadowWidget?Ba.ShadowWidget:Ba.ShadowWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"onMouseDown",value:function(P){this.openPopover()}},{key:"openPopover",value:function(){var P=this,
xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){if(1==Qa.nextAddress)return xa=new Xb.popovers.ShadowPopover({hasFixedPosition:!!P.ownerChain().find(function(Kb){return Kb.hasFixedPosition}),shadowValue:P.shadowValue}),Qa.yield(xa.fadeIntoWorld(P.globalBounds().center()),2);Xb.connect(xa,"shadowValue",P,"shadowValue");Xb.connect(P,"shadowValue",P,"update");Xb.signal(P,"openWidget",xa);Qa.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},{key:"renderShadowDisplay",
value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},{key:"updateShadowDisplay",value:function(){var P=this.shadowValue,xa=P.blur,Qa=P.spread,Kb=P.distance;P=P.color;var Pc=$jscomp.makeIterator(this.submorphs),Zc=Pc.next().value,le=Pc.next().value;le=$jscomp.makeIterator(le.submorphs).next().value;Pc=Pc.next().value;
Zc.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";le.fill=P;Pc.value=", "+xa+"px, "+Kb+"px, "+Qa+"px)"}},{key:"initShadowDisplay",value:function(){var P=this.shadowValue,xa=P.blur,Qa=P.spread,Kb=P.distance;P=P.color;this.submorphs=[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},Xb.morph({fill:Xb.Color.transparent,extent:Xb.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:Xb.pt(this.fontSize,this.fontSize),position:Xb.pt(2,
2),fill:P,borderColor:Xb.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+xa+"px, "+Kb+"px, "+Qa+"px)"}]}}],[{key:"className",get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(P){this.setProperty("shadowValue",P);this.renderShadowDisplay()}},fill:{defaultValue:Xb.Color.transparent},nativeCursor:{defaultValue:"pointer"},fontSize:{defaultValue:12},fontColor:{derived:!0,
set:function(P){this.submorphs.forEach(function(xa){return xa.fontColor=P})}},isSelected:{defaultValue:!1,set:function(P){this.setProperty("isSelected",P);this.fontColor=P?Xb.Color.white:Xb.Color.black}},layout:{initialize:function(){this.layout=new Xb.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],Ba,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:16435,end:19445})}(Xb.Morph);Xb.ShadowWidget=Ie;Xb.ShadowWidget=Ie;Xb.ShadowWidget=Ie;var Lf=function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Mb=Ba.hasOwnProperty("PointWidget")&&"function"===typeof Ba.PointWidget?Ba.PointWidget:Ba.PointWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"onMouseDown",
value:function(P){this.openPopover()}},{key:"openPopover",value:function(){var P=this,xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){if(1==Qa.nextAddress)return xa=new Xb.popovers.PointPopover({pointValue:P.pointValue,hasFixedPosition:!!P.ownerChain().find(function(Kb){return Kb.hasFixedPosition})}),Qa.yield(xa.fadeIntoWorld(P.globalBounds().center()),2);Xb.connect(xa,"pointValue",P,"pointValue");Xb.signal(P,"openWidget",xa);Qa.jumpToEnd()})}}],[{key:"className",get:function(){return"PointWidget"}},
{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(P){this.setProperty("isSelected",P);this.fontColor=P?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:Xb.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Xb.Color.black},fontFamily:{defaultValue:Xb.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],
set:function(P){var xa=Xb.Color.rgbHex("#0086b3");this.setProperty("pointValue",P);this.textAndAttributes=["pt(",null,P.x.toFixed(),{fontColor:xa},",",{},P.y.toFixed(),{fontColor:xa},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],Ba,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:19454,end:21082})}(Xb.Label);Xb.PointWidget=Lf;Xb.PointWidget=Lf;Xb.PointWidget=Lf;var ed=function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Mb=Ba.hasOwnProperty("PaddingWidget")&&"function"===typeof Ba.PaddingWidget?Ba.PaddingWidget:Ba.PaddingWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"onMouseDown",value:function(P){this.openPopover()}},
{key:"openPopover",value:function(){var P=this,xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){if(1==Qa.nextAddress)return xa=new Xb.popovers.RectanglePopover({hasFixedPosition:!!P.ownerChain().find(function(Kb){return Kb.hasFixedPosition}),rectangle:P.rectangle}),xa.relayout(),Qa.yield(xa.fadeIntoWorld(P.globalBounds().center()),2);Xb.connect(xa,"rectangle",P,"rectangle");Xb.signal(P,"openWidget",xa);Qa.jumpToEnd()})}}],[{key:"className",get:function(){return"PaddingWidget"}},
{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:Xb.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(P){this.setProperty("isSelected",P);this.fontColor=P?Xb.Color.white:Xb.Color.black}},rectangle:{defaultValue:Xb.rect(0),set:function(P){this.setProperty("rectangle",P);this.value=Xb.obj.safeToString(P)}}}}}],Ba,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:21091,end:22140})}(Xb.Label);Xb.PaddingWidget=ed;Xb.PaddingWidget=ed;Xb.PaddingWidget=ed;var ue=function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Mb=Ba.hasOwnProperty("IconWidget")&&"function"===typeof Ba.IconWidget?Ba.IconWidget:Ba.IconWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return qb(Mb,ta,[{key:"onMouseDown",value:function(P){this.openPopover()}},{key:"openPopover",value:function(){var P=this,xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){if(1==Qa.nextAddress)return xa=new Xb.popovers.IconPopover({hasFixedPosition:!!P.ownerChain().find(function(Kb){return Kb.hasFixedPosition})}),Qa.yield(xa.fadeIntoWorld(P.globalBounds().center()),2);Xb.connect(xa,"select",P,"iconValue",{converter:function(Kb){return Kb&&Xb.Icon.makeLabel(Kb).value},
varMapping:{Icon:fe}});Xb.signal(P,"openWidget",xa);Qa.jumpToEnd()})}}],[{key:"className",get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:Xb.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,get:function(){return this.value},set:function(P){this.value=P||"No Icon"}}}}}],Ba,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22149,end:23045})}(Xb.Label);Xb.IconWidget=ue;Xb.IconWidget=ue;Xb.IconWidget=ue;var Md=function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Mb=Ba.hasOwnProperty("StringWidget")&&"function"===typeof Ba.StringWidget?Ba.StringWidget:Ba.StringWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return qb(Mb,ta,[{key:"truncate",value:function(P){return 200<P.length?P.slice(0,20)+"...":P}},{key:"onFocus",value:function(P){var xa=this,Qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kb){if(1==Kb.nextAddress)return qb._get(Object.getPrototypeOf(Mb.prototype),"onFocus",xa).call(xa,P),xa.readOnly?Kb.return():xa.stringTooLong?Kb.yield(xa.world().editPrompt("edit string",{requester:xa,input:xa.stringValue}),2):(xa.borderColor=Xb.Color.white.withA(.9),xa.textString=xa.stringValue,
Kb.return());Qa=Kb.yieldResult;if("string"===typeof Qa)xa.onInput(Qa);Kb.jumpToEnd()})}},{key:"onBlur",value:function(P){qb._get(Object.getPrototypeOf(Mb.prototype),"onBlur",this).call(this,P);this.readOnly||(this.borderColor=Xb.Color.transparent,this.onInput(this.textString))}},{key:"onInput",value:function(P){this.owner.focus();Xb.signal(this,"inputAccepted",P);this.stringValue=P}}],[{key:"className",get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:Xb.Color.transparent},
fontColor:{defaultValue:Xb.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:Xb.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:Xb.rect(0,0,0,0)},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(P){this.setProperty("stringValue",P);this.textString=this.truncate(P);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,
get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(P){this.setProperty("isSelected",P);this.fontColor=P?Xb.Color.white:Xb.Color.blue}}}}}],Ba,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23054,end:24974})}(Xb.InputLine);Xb.StringWidget=
Md;Xb.StringWidget=Md;Xb.StringWidget=Md;Xb.valueWidgets=gb;Object.assign(Xb.valueWidgets,{NumberWidget:Be,StringWidget:Md,IconWidget:ue,PaddingWidget:ed,ShadowWidget:Ie,PointWidget:Lf,BooleanWidget:Fd,LayoutWidget:hb,ColorWidget:pb});var Zb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");Zb.Ellipse=Eb;Zb.Icon=fe;Zb.Morph=he;Zb.Path=Sc;Zb.Text=yd;Zb.HorizontalLayout=kd;Zb.VerticalLayout=Fa;Zb.morph=ec;Zb.Color=kc;Zb.pt=Tb;Zb.rect=md;Zb.Rectangle=db;Zb.arr=Ec;Zb.connect=Pb;Zb.disconnect=
Tc;Zb.LabeledCheckBox=qc;Zb.DropDownSelector=gc;Zb.Button=Oc;Zb.Menu=Wc;Zb.NumberWidget=Be;Zb.InteractiveMorphSelector=Xc;Zb.easings=Ic;(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Mb=Ba.hasOwnProperty("AxisHalo")&&"function"===typeof Ba.AxisHalo?Ba.AxisHalo:Ba.AxisHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:Symbol.for("lively-instance-initialize"),value:function(P){var xa=
P.halo;P=P.targetAxis;qb._get(Object.getPrototypeOf(Mb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{fill:Zb.Color.transparent,halo:xa,targetAxis:P,container:xa.container});this.initialize()}},{key:"initialize",value:function(){this.setBounds(this.fetchBounds());this.minSlider=this.minSlider();this.axisMenu=this.axisMenu();this.proportionSlider=this.proportionSlider();this.proportionSlider.addMorph(this.minSlider);this.submorphs=[this.proportionSlider,this.axisMenu];this.halo.addGuide(this)}},
{key:"forceMenuHidden",set:function(P){this._forceMenuHidden=P;this.axisMenu.visible=!P}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();this.axisMenu.alignWithTarget()}},{key:"onHoverIn",
value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(P){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var P=this,xa=this,Qa=this.proportionViewer();return this.halo.addGuide(new Zb.Morph({nativeCursor:this.getResizeCursor(),fill:Zb.Color.transparent,submorphs:[this.devider(),Qa],alignWithTarget:function(){this.setBounds(xa.getProportionSliderBounds(this))},
onDragStart:function(){Qa.visible=!0},onDrag:function(Kb){P.adjustStretch(P.getDelta(Kb));P.halo.alignWithTarget()},onDragEnd:function(){Qa.visible=!1}}))}},{key:"devider",value:function(){return new Zb.Morph({visible:!this.lastAxis,fill:Zb.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var P=this,xa=this,Qa=this.minSpaceVisualizer(),Kb=this.minViewer();return this.halo.addGuide(new Zb.Ellipse({nativeCursor:this.getResizeCursor(),
fill:Zb.Color.green,extent:Zb.pt(10,10),visible:!1,submorphs:[Qa,Kb],becomesActiveOnHover:!0,alignWithTarget:function(){this.position=xa.getMinSliderPosition()},requestToShow:function(){this.visible=!xa.targetAxis.fixed},requestToHide:function(){this.active?this.shouldHide=!0:this.visible=!1},onDragStart:function(){xa.forceMenuHidden=!0;Kb.visible=!0;this.active=Qa.visible=!0},onDrag:function(Pc){P.targetAxis.min+=-P.getDelta(Pc);P.halo.alignWithTarget()},onDragEnd:function(){xa.forceMenuHidden=!1;
Kb.visible=!1;this.active=Qa.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=!1)}}))}},{key:"minViewer",value:function(){var P=this;return this.viewer({position:this.getMinViewerPosition(),alignWithTarget:function(){this.textString="min: "+P.targetAxis.min.toFixed()+"px !"}})}},{key:"minSpaceBorder",value:function(){return new Zb.Path(Object.assign({position:Zb.pt(-1,-1),borderStyle:"dashed",borderColor:Zb.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",
value:function(){var P=this,xa=this.minSpaceBorder();return this.halo.addGuide(new Zb.Morph({fill:Zb.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[xa],alignWithTarget:function(){this.extent=P.getMinSpaceExtent();this.topLeft=Zb.pt(5,5)}}))}},{key:"axisMenu",value:function(){var P=this.lockButton(),xa=this.menuButton(),Qa=this;return new Zb.Morph({layout:this.getMenuLayout(),submorphs:[P,xa],fill:Zb.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=
this.owner.extent.subPt(Qa.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var P=this;return this.halo.addGuide(new Zb.Morph({fill:Zb.Color.transparent,extent:Zb.pt(25,25),submorphs:[{center:Zb.pt(12.5,12.5),fill:Zb.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){P.targetAxis.fixed?(this.fontColor=Zb.Color.red,this.submorphs[0].styleClasses=["fa","fa-lock"]):(this.fontColor=Zb.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},
toggleLock:function(){P.targetAxis.fixed=!P.targetAxis.fixed;P.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var P=this,xa=this;return new Zb.Morph({fill:Zb.Color.transparent,extent:Zb.pt(25,25),submorphs:[{fill:Zb.Color.transparent,styleClasses:["fa","fa-cog"],center:Zb.pt(12.5,12.5)}],onMouseDown:function(Qa){xa.forceMenuVisible=!0;this.addMorph(Qa.state.menu=new Zb.Menu({position:Zb.pt(15,15),items:[["Remove "+xa.subject,function(){P.targetAxis.remove();P.halo.initGuides();P.halo.alignWithTarget()}],
["Insert "+xa.subject+" before",function(){P.targetAxis.addBefore();P.halo.initGuides();P.halo.alignWithTarget()}],["Insert "+xa.subject+" after",function(){P.targetAxis.addAfter();P.halo.initGuides();P.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(P){var xa=P.position;P=P.alignWithTarget;return this.halo.addGuide(new Zb.Text({styleClasses:["Halo"],padding:Zb.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:Zb.Color.white,fill:Zb.Color.black.withA(.5),position:xa,alignWithTarget:P,
readOnly:!0}))}},{key:"proportionViewer",value:function(){var P=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString=P.targetAxis.length.toFixed(1)+"px"}})}}],[{key:"className",get:function(){return"AxisHalo"}}],Ba,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:660,end:7979})})(Zb.Morph);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Mb=Ba.hasOwnProperty("RowHalo")&&"function"===typeof Ba.RowHalo?Ba.RowHalo:Ba.RowHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:Symbol.for("lively-instance-initialize"),value:function(P){var xa=P.row;P=P.halo;qb._get(Object.getPrototypeOf(Mb.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,{targetAxis:P.target.row(xa),halo:P})}},{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(P){this.targetAxis.height+=P}},{key:"getDelta",value:function(P){return P.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return Zb.pt(-45,this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return Zb.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(P){return this.targetAxis.length>
P.height?Zb.pt(2,5):Zb.pt(26,10)}},{key:"getMenuLayout",value:function(){return new Zb.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return Zb.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return Zb.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",value:function(){return Zb.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:Zb.pt(this.container.width+
50,2),vertices:[Zb.pt(0,1),Zb.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return Zb.pt(40,20)}},{key:"getProportionSliderBounds",value:function(P){return Zb.pt(0,P.owner.height-5).extent(Zb.pt(40,10))}},{key:"getDeviderBounds",value:function(){return Zb.pt(15,4).extent(Zb.pt(25,2))}}],[{key:"className",get:function(){return"RowHalo"}}],Ba,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:7981,end:9208})})(Zb.AxisHalo);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Mb=Ba.hasOwnProperty("ColumnHalo")&&"function"===typeof Ba.ColumnHalo?Ba.ColumnHalo:Ba.ColumnHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:Symbol.for("lively-instance-initialize"),
value:function(P){var xa=P.col;P=P.halo;qb._get(Object.getPrototypeOf(Mb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:P.target.col(xa),halo:P})}},{key:"subject",get:function(){return"column"}},{key:"adjustStretch",value:function(P){this.targetAxis.width+=P}},{key:"getDelta",value:function(P){return P.state.dragDelta.x}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return Zb.pt(this.axisOffset()+
10,-45)}},{key:"fetchExtent",value:function(){return Zb.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(P){return this.targetAxis.length>P.width?Zb.pt(5,3):Zb.pt(8,26)}},{key:"getMenuLayout",value:function(){return new Zb.HorizontalLayout}},{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return Zb.pt(20,50)}},{key:"getMinSliderPosition",value:function(){return Zb.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",
value:function(){return Zb.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:Zb.pt(2,this.container.height+50),vertices:[Zb.pt(1,0),Zb.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return Zb.pt(20,40)}},{key:"getProportionSliderBounds",value:function(P){return Zb.pt(P.owner.width-5,0).extent(Zb.pt(10,40))}},{key:"getDeviderBounds",value:function(){return Zb.pt(4,15).extent(Zb.pt(2,25))}}],[{key:"className",
get:function(){return"ColumnHalo"}}],Ba,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:9210,end:10442})})(Zb.AxisHalo);(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Mb=Ba.hasOwnProperty("CellGuide")&&"function"===typeof Ba.CellGuide?Ba.CellGuide:Ba.CellGuide=
function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"menuItems",value:function(){var P=this,xa=Zb.Icon.textAttribute("check-square-o"),Qa=Zb.Icon.textAttribute("square-o");xa[1].textStyleClasses.push("annotation");Qa[1].textStyleClasses.push("annotation");Qa[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?Qa:xa)),function(){P.cellGroup.resize=
!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?xa:Qa)),function(){P.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new Zb.Rectangle).sides),$jscomp.arrayFromIterable((new Zb.Rectangle).corners)).map(function(Kb){return[[Kb,{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(P.cellGroup.align==Kb?xa:Qa),["  ",null]),function(){return P.cellGroup.align=Kb}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var Kb=
P.cellGroup.morph;Kb&&(P.world().firstHand.grab(Kb),P.world().firstHand.longClickGrab=!0,Kb.position=Zb.pt(0))}]]:[])}}],[{key:"className",get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],Ba,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10444,end:11722})})(Zb.Morph);
(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Mb=Ba.hasOwnProperty("LayoutHalo")&&"function"===typeof Ba.LayoutHalo?Ba.LayoutHalo:Ba.LayoutHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,void 0,[{key:"className",get:function(){return"LayoutHalo"}},{key:"properties",get:function(){return{container:{},target:{},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},
isHaloItem:{defaultValue:!0},borderColor:{defaultValue:Zb.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],Ba,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11724,end:12137})})(Zb.Morph);gb=Da("G",function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
Mb=Ba.hasOwnProperty("GridLayoutHalo")&&"function"===typeof Ba.GridLayoutHalo?Ba.GridLayoutHalo:Ba.GridLayoutHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"previewDrop",value:function(P){1>P.length||(P=this.cellGuides.find(function(xa){return xa.fullContainsWorldPoint($world.firstHand.position)}),P!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=P)&&this.currentCell.startPreview())}},
{key:"handleDrop",value:function(P){var xa=this;this.currentCell&&P.whenRendered().then(function(){return xa.currentCell.cellGroup.morph=P})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();this.focus()}},{key:"optionControls",value:function(){var P=this.target,xa=new Zb.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:Zb.Color.transparent,checked:P.compensateOrigin}),Qa=new Zb.LabeledCheckBox({label:"Resize Submorphs",fill:Zb.Color.transparent,
name:"fitToCell",checked:P.fitToCell});Zb.connect(xa,"checked",P,"compensateOrigin");Zb.connect(Qa,"checked",P,"fitToCell");Zb.connect(xa,"checked",this,"alignWithTarget");return[xa,Qa]}},{key:"isLayoutHalo",get:function(){return!1}},{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=this.container.extent;this.addMissingGuides();Zb.arr.reverse(this.guides).forEach(function(P){return P.alignWithTarget()})}},
{key:"addMissingGuides",value:function(){var P=this;Zb.arr.withoutAll(this.target.cellGroups,this.guides.map(function(xa){return xa.cellGroup})).forEach(function(xa){return P.addMorph(P.cellGuide(xa))})}},{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var P=this,xa=this.addMorph({fill:Zb.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(Qa){xa.addMorph(P.cellGuide(Qa))});
this.cellGuides=xa.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(P){P.isHaloItem=!0;this.guides.push(P);return P}},{key:"initRowGuides",value:function(){var P=this,xa=this;this.addGuide(this.addMorph(new Zb.Morph({width:25,fill:Zb.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:Zb.pt(-5,0),alignWithTarget:function(){this.height=xa.container.height}})));Zb.arr.range(0,this.target.rowCount-1).forEach(function(Qa){P.addMorph(new Zb.RowHalo({row:Qa,
halo:P}))})}},{key:"initColumnGuides",value:function(){var P=this,xa=this;this.addGuide(this.addMorph(new Zb.Morph({height:25,fill:Zb.Color.gray.withA(.7),borderRadius:15,width:this.container.width,bottomLeft:Zb.pt(0,-5),alignWithTarget:function(){this.width=xa.container.width}})));Zb.arr.range(0,this.target.columnCount-1).forEach(function(Qa){P.addMorph(new Zb.ColumnHalo({col:Qa,halo:P}))})}},{key:"resizer",value:function(){var P=this;return this.addGuide(new Zb.Morph({fill:Zb.Color.transparent,
extent:Zb.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(xa){P.container.resizeBy(xa.state.dragDelta);P.alignWithTarget()},alignWithTarget:function(){this.bottomRight=P.extent}}))}},{key:"cellResizer",value:function(P,xa){var Qa=this,Kb="topLeft"==xa?"bottomRight":"topLeft";return new Zb.Ellipse({borderWidth:1,visible:!1,borderColor:Zb.Color.black,nativeCursor:"nwse-resize",removeCell:function(Pc){P.disconnect(Pc);Qa.alignWithTarget()},addCell:function(Pc){P.connect(Pc);Qa.alignWithTarget()},
start:function(){this.fixpointCell=P[Kb];this.draggedDelta=P.bounds().partNamed(xa);this.debugMorph=Qa.addMorph(new Zb.Morph({fill:Zb.Color.orange.withA(.5)}))},update:function(Pc){var Zc=this;this.draggedDelta=this.draggedDelta.addPt(Pc);var le=Zb.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(le);Qa.cells.forEach(function(Rd){var jf=le.intersection(Rd.bounds()).area()/Rd.bounds().area();P.includes(Rd)&&.1>jf&&Zc.removeCell(Rd);!P.includes(Rd)&&
jf>1/3&&Zc.addCell(Rd)})},onDragEnd:function(Pc){this.debugMorph.remove()},onDragStart:function(Pc){this.start(Pc.position)},onDrag:function(Pc){this.update(Pc.state.dragDelta)}})}},{key:"cellGuide",value:function(P){var xa=this,Qa=this.cellResizer(P,"topLeft"),Kb=this.cellResizer(P,"bottomRight");return this.addGuide(new Zb.CellGuide({cellGroup:P,bounds:P.bounds(),fill:Zb.Color.transparent,borderColor:Zb.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[Qa,Kb],onMouseDown:function(Pc){this.becomeActive()},
deactivate:function(){this.borderColor=Zb.Color.orange;this.fill=Zb.Color.transparent;this.submorphs.forEach(function(Pc){Pc.visible=!1})},becomeActive:function(){xa.guides.forEach(function(Pc){Pc.isCell&&Pc.deactivate()});this.borderColor=Zb.Color.rgbHex("#1565C0");this.fill=Zb.Color.rgbHex("#1565C0").withA(.3);xa.addMorph(this.remove());this.submorphs.forEach(function(Pc){Pc.visible=!0})},startPreview:function(Pc){this.fill=Zb.Color.orange.withA(.7)},stopPreview:function(Pc){this.fill=Zb.Color.transparent},
onDrop:function(Pc){var Zc=$jscomp.makeIterator(Pc.hand.grabbedMorphs).next().value;Pc.hand.dropMorphsOn(xa.container);P.morph=Zc},alignWithTarget:function(){P.bounds().isNonEmpty()?(this.setBounds(P.bounds()),Qa.center=this.innerBounds().topLeft(),Kb.center=this.innerBounds().bottomRight()):(Zb.arr.remove(xa.guides,this),this.remove())}}))}}],[{key:"className",get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Zb.Color.transparent},cells:{derived:!0,
get:function(){return Zb.arr.flatten(this.target.col(0).items.map(function(P){return P.row(0).items}))}},submorphs:{initialize:function(){this.initialize()}}}}}],Ba,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12146,end:19501})}(Zb.LayoutHalo));Zb.GridLayoutHalo=gb;Zb.GridLayoutHalo=gb;
Zb.GridLayoutHalo=gb;hb=function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Mb=Ba.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof Ba.TilingLayoutHalo?Ba.TilingLayoutHalo:Ba.TilingLayoutHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"remove",value:function(){qb._get(Object.getPrototypeOf(Mb.prototype),"remove",this).call(this);this.removePreviews();return this}},
{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(P){}},{key:"removePreviews",value:function(){this.previews.forEach(function(P){return P.clear()})}},{key:"previewDrop",value:function(P){var xa=this;0<this.previews.length||(this.previews=P.map(function(Qa){return xa.container.addMorph({type:Zb.DropPreview,bounds:Qa.bounds()})}),this.previews.forEach(function(Qa){Qa.step()}))}},{key:"updateSpacing",value:function(P){this.target.spacing=
P}},{key:"updateAxis",value:function(P){this.target.axis=P}},{key:"updateAlign",value:function(P){this.target.align=P}},{key:"optionControls",value:function(){var P=this.target,xa=new Zb.DropDownSelector({borderRadius:2,padding:3,selectedValue:P.axis,values:["row","column"]}),Qa=new Zb.DropDownSelector({borderRadius:2,padding:3,selectedValue:P.align,values:["left","center"]});P=new Zb.NumberWidget({min:0,number:P.spacing,padding:Zb.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:Zb.Color.gray,
unit:"px"});Zb.connect(P,"update",this,"updateSpacing");Zb.connect(Qa,"update",this,"updateAlign");Zb.connect(xa,"update",this,"updateAxis");var Kb={type:"label",padding:Zb.rect(0,5,5,5),fill:Zb.Color.transparent,fontColor:Zb.Color.gray.darker(),readOnly:!0};return[[Object.assign({},Kb,{textString:"Submorph Spacing"}),P],[Object.assign({},Kb,{textString:"Tiling Align"}),Qa],[Object.assign({},Kb,{textString:"Tiling Axis"}),xa]].map(function(Pc){return{submorphs:Pc,fill:null,layout:new Zb.HorizontalLayout({spacing:3})}})}}],
[{key:"className",get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Zb.Color.transparent},previews:{defaultValue:[]}}}}],Ba,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19510,end:21708})}(Zb.LayoutHalo);Zb.TilingLayoutHalo=hb;Zb.TilingLayoutHalo=
hb;Zb.TilingLayoutHalo=hb;(function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Mb=Ba.hasOwnProperty("DropPreview")&&"function"===typeof Ba.DropPreview?Ba.DropPreview:Ba.DropPreview=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var P=this,xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){if(1==
Qa.nextAddress)return xa=Zb.easings.inOutQuad,Qa.yield(P.animate({opacity:.5,duration:(P.pulseDuration-10)/2,easing:xa}),2);if(3!=Qa.nextAddress)return Qa.yield(P.animate({opacity:1,duration:(P.pulseDuration-10)/2,easing:xa}),3);P.stopped||P.step();Qa.jumpToEnd()})}}],[{key:"className",get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:Zb.Color.orange.withA(.3)},
hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:Zb.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],Ba,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21710,end:22534})})(Zb.Morph);hb=Da("F",function(ta){var Ba=
lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Mb=Ba.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof Ba.FlexLayoutHalo?Ba.FlexLayoutHalo:Ba.FlexLayoutHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"handleDrop",value:function(P){}},{key:"previewDrop",value:function(P){var xa=this;0<this.previews.length||(this.previews=P.map(function(Qa){return xa.container.addMorph({type:Zb.DropPreview,
position:xa.container.localize(xa.world().firstHand.position),extent:Qa.bounds().extent()})}),this.previews.forEach(function(Qa){Qa.step()}))}},{key:"remove",value:function(){qb._get(Object.getPrototypeOf(Mb.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(P){return P.clear()})}},{key:"onDrop",value:function(P){this.removePreviews();P.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},
{key:"updateAutoResizePolicy",value:function(P){P&&(this.originalExtent=this.container.extent);this.target.autoResize=P;P||(this.container.extent=this.originalExtent||this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(P){this.target.resizeSubmorphs=P;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(P){this.target.align=P}},{key:"updateDirectionPolicy",value:function(P){this.target.direction=P}},{key:"updateSpacing",value:function(P){this.target.spacing=
P}},{key:"optionControls",value:function(){var P=this.target,xa=P.possibleAlignValues?{fill:Zb.Color.transparent,layout:new Zb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new Zb.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:P.align,values:P.possibleAlignValues})]}:null,Qa=P.possibleDirectionValues?{fill:Zb.Color.transparent,layout:new Zb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",
value:"direction: "},new Zb.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:P.direction,values:P.possibleDirectionValues})]}:null,Kb=new Zb.NumberWidget({fill:Zb.Color.white,borderWidth:1,borderRadius:4,padding:Zb.rect(5,4,0,0),borderColor:Zb.Color.gray,min:0,number:P.spacing,unit:"px"}),Pc=new Zb.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:Zb.Color.transparent,checked:P.autoResize});P=new Zb.LabeledCheckBox({label:"Resize Submorphs",
name:"resizeSubmorphs",alignCheckBox:"right",fill:Zb.Color.transparent,checked:P.resizeSubmorphs});Zb.connect(Kb,"update",this,"updateSpacing");Zb.connect(Pc,"checked",this,"updateAutoResizePolicy");Zb.connect(P,"checked",this,"updateResizeSubmorphsPolicy");xa&&Zb.connect(xa.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");Qa&&Zb.connect(Qa.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[Pc,P].concat($jscomp.arrayFromIterable([xa,Qa].filter(Boolean)),[{fill:Zb.Color.transparent,
layout:new Zb.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:Zb.Color.gray.darker(),padding:Zb.rect(0,5,5,5)},Kb]}])}}],[{key:"className",get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Zb.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],Ba,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22543,end:26761})}(Zb.LayoutHalo));Zb.FlexLayoutHalo=hb;Zb.FlexLayoutHalo=hb;Zb.FlexLayoutHalo=hb;pb=Da("c",function(ta){var Ba=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Mb=Ba.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof Ba.ProportionalLayoutHalo?Ba.ProportionalLayoutHalo:Ba.ProportionalLayoutHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return qb(Mb,ta,[{key:"handleDrop",value:function(P){}},{key:"onDrop",value:function(P){P.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",value:function(P){var xa={};this.target.changeSettingsFor(P.submorph,(xa[P.axis]=P.policy,xa),!0)}},{key:"onSubmorphSettingsDragStart",value:function(P,xa){var Qa=this;P.stop();
var Kb=this.target.settingsFor(xa);xa="";for(var Pc in Kb)xa+=Pc+":"+Kb[Pc]+" ";var Zc=Zb.morph({type:"label",value:xa,isLayoutable:!1});Zc.wantsToBeDroppedOn=function(le){return Qa.target.layoutableSubmorphs.includes(le)};Zc.onBeingDroppedOn=function(le,Rd){Zc.remove();if(le=Qa.target.layoutableSubmorphs.includes(Rd)?Rd:P.world.morphsContainingPoint(P.hand.position).find(function(jf){return Qa.target.layoutableSubmorphs.includes(jf)}))Qa.updateSubmorphProportionalLayoutSettings({policy:Kb.x,axis:"x",
submorph:le}),Qa.updateSubmorphProportionalLayoutSettings({policy:Kb.y,axis:"y",submorph:le}),le.show(),$world.setStatusMessage("layout settings applied")};P.hand.grab(Zc)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var P=this,xa,Qa,Kb,Pc,Zc,le,Rd,jf,ce,we,Mf,Bf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rg){switch(rg.nextAddress){case 1:return xa=P.target.layoutableSubmorphs,P.env.eventDispatcher.isKeyPressed("Shift")?(Kb=xa.map(function(Qf){return{isListItem:!0,
string:String(Qf),value:Qf}}),rg.yield($world.listPrompt("Select morph",Kb,{requester:P,onSelection:function(Qf){return Qf.show()}}),5)):rg.yield(Zb.InteractiveMorphSelector.selectMorph(P.world(),P,function(Qf){return xa.includes(Qf)}),4);case 4:Qa=rg.yieldResult;rg.jumpTo(3);break;case 5:Pc=rg.yieldResult,Zc=$jscomp.makeIterator(Pc.selected),Qa=Zc.next().value;case 3:if(!Qa)return rg.return();le=P.state.popover.get("controlContainer");Rd=le.getAllNamed(/submorph config/);jf=["move","resize","scale",
"fixed"];ce=P.target.settingsFor(Qa);Rd.length||(le.submorphs=[].concat($jscomp.arrayFromIterable(le.submorphs),[{name:"submorph config X-Axis policy",position:Zb.pt(0,P.height),fill:Zb.Color.transparent,layout:new Zb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new Zb.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:ce.x,values:jf})]},{name:"submorph config Y-Axis policy",position:Zb.pt(0,
P.height),fill:Zb.Color.transparent,layout:new Zb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new Zb.DropDownSelector({name:"y-axis policy selector",borderRadius:2,padding:3,selectedValue:ce.y,values:jf})]},Zb.morph({position:Zb.pt(0,P.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));we=le.getSubmorphNamed("x-axis policy selector");Mf=le.getSubmorphNamed("y-axis policy selector");Bf=le.getSubmorphNamed("dragme");
Zb.disconnect(we,"selectedValue",P,"updateSubmorphProportionalLayoutSettings");Zb.disconnect(Mf,"selectedValue",P,"updateSubmorphProportionalLayoutSettings");we.selectedValue=ce.x;Mf.selectedValue=ce.y;Zb.connect(Bf,"onDragStart",P,"onSubmorphSettingsDragStart",{updater:function(Qf,Yc){return Qf(Yc,Qa)},varMapping:{submorph:Qa}});Zb.connect(we,"selectedValue",P,"updateSubmorphProportionalLayoutSettings",{converter:function(Qf){return{policy:Qf,axis:"x",submorph:Qa}},varMapping:{submorph:Qa}});Zb.connect(Mf,
"selectedValue",P,"updateSubmorphProportionalLayoutSettings",{converter:function(Qf){return{policy:Qf,axis:"y",submorph:Qa}},varMapping:{submorph:Qa}});rg.jumpToEnd()}})}},{key:"optionControls",value:function(P){this.state.popover=P;var xa=this.target;P=new Zb.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:Zb.Color.transparent,checked:xa.xAxisEnabled});xa=new Zb.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:Zb.Color.transparent,checked:xa.yAxisEnabled});
var Qa=new Zb.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(Zb.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});Zb.connect(P,"checked",this,"updateXAxisEnabled");Zb.connect(xa,"checked",this,"updateYAxisEnabled");Zb.connect(Qa,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[Qa]}}],[{key:"className",get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Zb.Color.transparent}}}}],
Ba,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:26771,end:32465})}(Zb.LayoutHalo));Zb.ProportionalLayoutHalo=pb;Zb.ProportionalLayoutHalo=pb;Zb.ProportionalLayoutHalo=pb;Fd=lively.FreezerRuntime.recorderFor("lively.halos/index.js");Fd.Halo=nd;Fd.MorphHighlighter=vd;Fd.InteractiveMorphSelector=
Xc;Fd.StatusMessage=ic;Fd.StatusMessageForMorph=Nc;Fd.show=Ra;Fd.showConnector=cc;Fd.ProportionalLayoutHalo=pb;Fd.GridLayoutHalo=gb;Fd.FlexLayoutHalo=hb;Fd.showAndSnapToGuides=ea;Fd.removeSnapToGuidesOf=Q;Fd.StatusMessage=ic;Fd.StatusMessage=ic;Fd.StatusMessageForMorph=Nc;Fd.StatusMessageForMorph=Nc;Fd.show=Ra;Fd.show=Ra;Fd.showConnector=cc;Fd.showConnector=cc;Fd.Halo=nd;Fd.Halo=nd;Fd.MorphHighlighter=vd;Fd.MorphHighlighter=vd;Fd.InteractiveMorphSelector=Xc;Fd.InteractiveMorphSelector=Xc;Fd.ProportionalLayoutHalo=
pb;Fd.ProportionalLayoutHalo=pb;Fd.GridLayoutHalo=gb;Fd.GridLayoutHalo=gb;Fd.FlexLayoutHalo=hb;Fd.FlexLayoutHalo=hb;Fd.showAndSnapToGuides=ea;Fd.showAndSnapToGuides=ea;Fd.removeSnapToGuidesOf=Q;Fd.removeSnapToGuidesOf=Q;nd=Object.freeze({__proto__:null,StatusMessage:ic,StatusMessageForMorph:Nc,show:Ra,showConnector:cc,Halo:nd,MorphHighlighter:vd,InteractiveMorphSelector:Xc,ProportionalLayoutHalo:pb,GridLayoutHalo:gb,FlexLayoutHalo:hb,showAndSnapToGuides:ea,removeSnapToGuidesOf:Q,SvgStyleHalo:void 0});
Da("i",nd);Da("_",void 0)}}});