System.register("./__root_module__-cd530690.js kld-intersections ./editor-plugin-26971e16.js ./index-cab7da24.js ./index-101f1e80.js ./index-e341c34b.js ./index-459b301d.js ./color-picker-1bb681d9.js ./editor-plugin-e18628ad.js ./index-d8bbf49c.js".split(" "),function(){var Da,zb,Rb,kc,dc,ke,hd,$d,md,Qc,xd,Od,ge,Ud,nd,Za,Cb,bc,ic,id,fe,Zb,rc,Lb,Gc,$c,ed,$b,ob,zc,Mc,Ja,Ra,ub,Mb,Ob,kb,ib,Jb,vc;return{setters:[function(sc){Da=sc.ar;zb=sc.ah;Rb=sc.az;kc=sc.au;dc=sc.a2;ke=sc.as;hd=sc.ap;$d=sc.at;
md=sc.C;Qc=sc.a1;xd=sc.a5;Od=sc._;ge=sc.aV;Ud=sc.P;nd=sc.a6;Za=sc.aA;Cb=sc.aj;bc=sc.aU;ic=sc.an;id=sc.ak;fe=sc.am;Zb=sc.bp;rc=sc.br;Lb=sc.bQ;Gc=sc.b1;$c=sc.bh;ed=sc.aM;$b=sc.n;ob=sc.a0;zc=sc.aW;Mc=sc.aX;Ja=sc.ao;Ra=sc.a3;ub=sc.aq;Mb=sc.bR},function(){},function(sc){Ob=sc.I},function(sc){kb=sc.d;ib=sc.s;Jb=sc.I;vc=sc.M},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){function sc(Xa){var Rc=Xa.sourceObj,pb=Xa.targetObj;Rc.isMorph&&pb.isMorph?(Rc.show(),
pb.show(),rd.showConnector&&rd.showConnector(Rc,pb)):rd.show(String(Xa))}function Uc(Xa){var Rc=Xa.sourceObj,pb=Xa.sourceAttrName,eb=Xa.targetObj,hb=Xa.targetMethodName,ac=Xa.getConverter();Xa=Xa.getUpdater();return rd.printConnectionElements(Rc,pb,eb,hb,ac,Xa)}function Xc(Xa,Rc,pb,eb,hb,ac){Xa="/* global connect, source, target */\nconnect(source, '"+Rc+"', target, '"+eb+"'";if(hb||ac)Xa+=", {\n";hb&&(Xa+="  converter: "+hb);hb&&ac&&(Xa+=",");hb&&(Xa+="\n");ac&&(Xa+="  updater: "+ac+"\n");if(hb||
ac)Xa+="}";return Xa+");"}function Q(Xa,Rc){var pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){if(1==eb.nextAddress)return eb.yield(rd.InteractiveMorphSelector.selectMorph(),2);pb=eb.yieldResult;return eb.return(pb?rd.interactiveConnectGivenSourceAndTarget(Xa,Rc,pb):null)})}function fa(Xa,Rc,pb,eb){var hb,ac,Wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fd){hb=pb&&pb.world().targetDataBindings(pb);ac=Xa.world();if(!hb||!hb.length)return ac.setStatusMessage("connect canceled"),
Fd.return();Wb=hb.map(function(Be){return[Be[0].group||"uncategorized",Be.map(function(Ie){return[Ie.signature||Ie.name,function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lf){return 1==Lf.nextAddress?Lf.yield(rd.interactivelyEvaluateConnection({sourceObj:Xa,sourceAttr:Rc,targetObj:pb,targetAttr:Ie.name,onConnect:eb}),2):Lf.return(Lf.yieldResult)})}]})]});Wb.push(["custom...",function(){var Be;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ie){return 1==Ie.nextAddress?
Ie.yield(ac.prompt("Enter custom connection point",{requester:$world,historyId:"lively.morphic-custom-connection-points",useLastInput:!0}),2):(Be=Ie.yieldResult)?Ie.yield(rd.interactivelyEvaluateConnection({sourceObj:Xa,sourceAttr:Rc,targetObj:pb,targetAttr:Be,onConnect:eb}),0):Ie.jumpTo(0)})}]);return Fd.yield(pb.openMenu(Wb).whenFinished(),0)})}function Ha(Xa,Rc,pb,eb){Rc=void 0===Rc?"confirm connection":Rc;var hb,ac,Wb,Fd,Be,Ie,Lf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fd){hb=
Xa;ac=hb.sourceObj;Wb=hb.sourceAttrName;Fd=hb.targetObj;Be=hb.targetMethodName;Ie=Xa.getConverter();Lf=Xa.getUpdater();return fd.return(rd.interactivelyEvaluateConnection({sourceObj:ac,sourceAttr:Wb,targetObj:Fd,targetAttr:Be,converter:Ie,updater:Lf,prompt:Rc,highlight:pb,onConnect:eb}))})}function Qa(Xa,Rc,pb,eb,hb){eb=void 0===eb?{}:eb;hb=rd.rect(0).sides.concat(rd.rect(0).corners);pb=pb||new rd.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:rd.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:rd.Color.transparent,
nativeCursor:"auto"},end:{fill:rd.Color.orange}}},eb,{hasFixedPosition:!0}));pb.startPoint.attachTo(Xa,"rightCenter");Rc.isMorph?(eb=Rc.globalBounds().partNameNearest(hb,Xa.globalPosition),Xa.globalPosition.equals(Rc.globalBounds().partNamed(eb))&&Rc.globalBounds().partNameNearest(rd.arr.without(hb,eb),Xa.globalPosition),pb.endPoint.attachTo(Rc,"leftCenter")):(hb=Xa.globalBounds().topRight().addPt(rd.pt(100,0)),Rc=rd.morph({type:"label",value:Rc.toString(),styleClasses:["Tooltip"],padding:rd.rect(8,
4)}).openInWorld(hb),Rc.position=Xa.world().bounds().translateForInclusion(Rc.bounds()).topLeft(),rd.once(pb,"remove",Rc,"remove"),pb.endPoint.attachTo(Rc,"leftCenter"));return pb}function fc(Xa){var Rc,pb,eb,hb,ac,Wb,Fd,Be,Ie,Lf,fd,ue,Md,Vb,sa,Aa,Kb,P,wa,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Hb){switch(Hb.nextAddress){case 1:Rc=Xa;pb=Rc.sourceObj;eb=Rc.sourceAttr;hb=Rc.targetObj;ac=Rc.targetAttr;Wb=Rc.converter;Fd=Rc.updater;Be=Rc.prompt;Ie=void 0===Rc.highlight?!0:Rc.highlight;
Lf=Rc.onConnect;fd="lively://lively.bindings-interactive-connect/x"+pb.id;ue={context:window,format:"esm",targetModule:fd,classTransform:rd.classToFunctionTransform};Md=rd.printConnectionElements(pb,eb,hb,ac,Wb,Fd);hb.isMorph&&pb.isMorph&&(Vb=hb.propertiesAndPropertySettings().properties[ac]||{type:typeof hb[ac]},sa=Vb.type,Aa=pb.propertiesAndPropertySettings().properties[eb]||{type:typeof pb[eb]},Kb=Aa.type,Kb!==sa&&(Be=!0));P={};Object.assign(lively.modules.module(fd).recorder,(P.source=pb,P.target=
hb,P.connect=hd,P.once=$d,P[eb]=pb[eb],P));if(!Be){wa=Md;Hb.jumpTo(2);break}return Hb.yield($world.editPrompt(Be,{input:Md,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:ue,animated:!1}),3);case 3:if(wa=Hb.yieldResult,!wa)return $world.setStatusMessage("connect canceled"),Hb.return();case 2:return Hb.yield(lively.vm.runEval(wa,ue),4);case 4:Pa=Hb.yieldResult;if(Pa.isError)return $world.logError(Pa.value),Hb.return(fc({sourceObj:pb,sourceAttr:eb,targetObj:hb,
targetAttr:ac,converter:Wb,updater:Fd,prompt:"confirm connection",highlight:Ie,onConnect:Lf}));Ie&&($world.setStatusMessage("connected!",rd.Color.green),rd.interactivelyShowConnection(Pa.value));"function"===typeof Lf&&Lf(Pa);Hb.jumpToEnd()}})}var Nb=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");Nb.Inspector=Ob;var ab=function(Xa){var Rc=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),pb=Rc.hasOwnProperty("ProtoInspector")&&"function"===typeof Rc.ProtoInspector?Rc.ProtoInspector:
Rc.ProtoInspector=function(eb){eb&&eb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(pb,Xa,void 0,[{key:"className",get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Rc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",
version:"0.1.1-0"}}},{start:68,end:210})}(Nb.Inspector);ab=Nb.ProtoInspector;Nb.default=ab;var lc=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");lc.Morph=zb;lc.touchInputDevice=Rb;lc.easings=kc;lc.pt=dc;lc.fun=ke;lc.connect=hd;Nb=function(Xa){var Rc=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),pb=Rc.hasOwnProperty("MorphicSideBar")&&"function"===typeof Rc.MorphicSideBar?Rc.MorphicSideBar:Rc.MorphicSideBar=function(eb){eb&&eb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Da(pb,Xa,[{key:"onWorldResize",value:function(eb){eb=void 0===eb?!0:eb;if(this.respondsToVisibleWindow){var hb=$world.visibleBounds(),ac=navigator.standalone&&lc.touchInputDevice?25:0;this.height=hb.height-ac;this.top=ac+hb.top();ac=this.get("horizontal resizer");ac.height=this.height;ac.top=0;eb&&(this.visible?this.topLeft=hb.topLeft():this.topRight=hb.topLeft())}}},{key:"switchMode",value:function(eb){"inspector"==eb&&this.showInspector();"connections"==eb&&this.showConnections()}},
{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(eb){var hb=this,ac,Wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fd){switch(Fd.nextAddress){case 1:ac=$world.visibleBounds();Wb=navigator.standalone&&lc.touchInputDevice?25:0;hb.height=ac.height-Wb;hb.top=Wb+ac.top();if(eb)return $world.addMorph(hb,
$world.get("lively top bar")),hb.right=0,hb.attachToWorld($world),hb.visible=!0,Fd.yield(hb.whenRendered(),5);hb.detachFromWorld($world);return Fd.yield(hb.animate({opacity:0,right:0,duration:300}),4);case 4:hb.visible=!1;hb.remove();Fd.jumpTo(0);break;case 5:return hb.onWorldResize(!1),hb.get("scene graph").adjustProportions(),Fd.yield(hb.animate({opacity:1,easing:lc.easings.outCirc,left:1,duration:300}),6);case 6:hb.get("scene graph").refresh(),Fd.jumpToEnd()}})}},{key:"attachToWorld",value:function(eb){lc.connect(eb,
"onChange",this,"onHierarchyChange",{garbageCollect:!0});lc.connect(eb,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});lc.connect(eb,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(eb){var hb=this;eb.attributeConnections.forEach(function(ac){ac.targetObj===hb&&ac.disconnect()})}},{key:"selectNode",value:function(eb){this.getSubmorphNamed("scene graph").selectMorphInTarget(eb);this.getSubmorphNamed("connections tree").inspectConnectionsOf(eb)}},
{key:"onHierarchyChange",value:function(eb){var hb=this,ac;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wb){if("addMorphAt"===eb.selector||"removeMorph"===eb.selector||"name"===eb.prop){ac=hb._sceneGraph||(hb._sceneGraph=hb.getSubmorphNamed("scene graph"));if(!ac||!ac.owner.visible||eb.target&&eb.target.isHand||eb.target&&ac.ignoreMorph(eb.target)||eb.args&&!eb.args[0].isHalo&&ac.ignoreMorph(eb.args[0])||eb.target.ownerChain().find(function(Fd){return ac.ignoreMorph(Fd)}))return Wb.return();
lc.fun.debounceNamed("scene-graph-update",50,function(){return ac.refresh()})()}Wb.jumpToEnd()})}}],[{key:"className",get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],Rc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-69"}}},{start:226,
end:3566})}(lc.Morph);Nb=lc.MorphicSideBar;lc.default=Nb;var rd=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");rd.interactivelyShowConnection=sc;rd.printConnection=Uc;rd.printConnectionElements=Xc;rd.interactiveConnectGivenSource=Q;rd.interactiveConnectGivenSourceAndTarget=fa;rd.interactivelyReEvaluateConnection=Ha;rd.visualizeConnection=Qa;rd.interactivelyEvaluateConnection=fc;rd.connect=hd;rd.once=$d;rd.Color=md;rd.rect=Qc;rd.pt=dc;rd.arr=xd;rd.promise=Od;rd.properties=ge;rd.Path=Ud;
rd.obj=nd;rd.HorizontalLayout=Za;rd.Morph=zb;rd.VerticalLayout=Cb;rd.StyleSheet=bc;rd.Icon=ic;rd.GridLayout=id;rd.morph=fe;rd.TreeData=Zb;rd.Tree=rc;rd.Leash=Lb;rd.LabeledCheckBox=Gc;rd.SearchField=$c;rd.showConnector=kb;rd.show=ib;rd.InteractiveMorphSelector=Jb;rd.MorphHighlighter=vc;rd.Window=ed;rd.classToFunctionTransform=$b;rd.interactivelyShowConnection=sc;rd.interactivelyShowConnection=sc;rd.printConnection=Uc;rd.printConnection=Uc;rd.printConnectionElements=Xc;rd.printConnectionElements=Xc;
rd.interactiveConnectGivenSource=Q;rd.interactiveConnectGivenSource=Q;rd.interactiveConnectGivenSourceAndTarget=fa;rd.interactiveConnectGivenSourceAndTarget=fa;rd.interactivelyReEvaluateConnection=Ha;rd.interactivelyReEvaluateConnection=Ha;rd.visualizeConnection=Qa;rd.visualizeConnection=Qa;rd.interactivelyEvaluateConnection=fc;rd.interactivelyEvaluateConnection=fc;var Bd=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");Bd.Tree=rc;Bd.TreeData=Zb;Bd.morph=fe;Bd.Icon=ic;Bd.HorizontalLayout=
Za;Bd.easings=kc;Bd.Morph=zb;Bd.Color=md;Bd.Rectangle=ob;Bd.rect=Qc;Bd.pt=dc;Bd.connect=hd;Bd.disconnect=zc;Bd.disconnectAll=Mc;Bd.once=$d;Bd.arr=xd;Bd.num=Ja;Bd.fun=ke;Bd.tree=Ra;Bd.promise=Od;Bd.ConnectionHalo=_missingExportShim;Nb=function(Xa){var Rc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),pb=Rc.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof Rc.InteractiveTreeContainer?Rc.InteractiveTreeContainer:Rc.InteractiveTreeContainer=function(eb){eb&&eb[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(pb,Xa,[{key:"onChildRemoved",value:function(eb){}},{key:"onChildAdded",value:function(eb){}},{key:"toggleSelected",value:function(eb){if(this.tree){var hb=this.tree,ac=hb.selectionFontColor,Wb=hb.nonSelectionFontColor;this.submorphs.filter(function(Fd){return!Fd._isControlElement&&Fd.styleClasses.includes("Label")}).forEach(function(Fd){Fd.fontColor=eb?ac:Wb})}}},{key:"onGrab",value:function(eb){var hb=this.tree,ac=this.node;
this.fill=Bd.Color.gray.withA(.5);this.fontColor=hb.selectionFontColor;this.opacity=.8;Da._get(Object.getPrototypeOf(pb.prototype),"onGrab",this).call(this,eb);ac&&(this.toggleSelected(!1),hb.collapse(ac),hb.treeData.parentNode(ac).container.onChildRemoved(this),this._data=hb.treeData.remove(ac),ac.container.target.remove(),hb.update(!0))}},{key:"wantsToBeDroppedOn",value:function(eb){this.showPreviewOn(eb);return!0}},{key:"showPreviewOn",value:function(eb){if(eb.isContainer)var hb=eb.tree;eb.isTree&&
(hb=eb);hb&&hb.showDropPreviewFor&&hb.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(eb){var hb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ac){if(1==ac.nextAddress)return hb.tree.treeData.add(eb._data,hb.node,hb.node.children[0]),hb.tree.uncollapse(hb.node),hb.tree.treeData.remove(hb.tree._previewNode),ac.yield(hb.tree.whenRendered(),2);hb.tree.update(!0);hb.onChildAdded(eb);ac.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(eb,hb){var ac=this;debugger;
this.tree._dropInProgress=!0;Da._get(Object.getPrototypeOf(pb.prototype),"onBeingDroppedOn",this).call(this,eb,hb);eb=function(){ac.fill=Bd.Color.gray.withA(.5);ac.opacity=1;ac.tree._dropInProgress=!1;ac.tree.refresh()};hb.isTree?hb.insertAtPlaceholder(this).then(eb):hb.isContainer?hb.insertAsChild(this).then(eb):eb()}}],[{key:"className",get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:Bd.Color.transparent},isContainer:{get:function(){return!0}},
tree:{},node:{readOnly:!0,get:function(){var eb=this,hb=this.tree.treeData;return hb&&hb.asList().find(function(ac){return ac.container===eb})}}}}}],Rc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:437,end:2917})}(Bd.Morph);Bd.InteractiveTreeContainer=Nb;Bd.InteractiveTreeContainer=
Nb;Bd.InteractiveTreeContainer=Nb;Nb=function(Xa){var Rc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),pb=Rc.hasOwnProperty("InteractiveTreeData")&&"function"===typeof Rc.InteractiveTreeData?Rc.InteractiveTreeData:Rc.InteractiveTreeData=function(eb){eb&&eb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(pb,Xa,[{key:"display",value:function(eb){return[eb.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(eb){return eb.isCollapsed}},
{key:"collapse",value:function(eb,hb){eb.isCollapsed=hb}},{key:"getChildren",value:function(eb){var hb=this;return eb.isLeaf?null:eb.children.filter(function(ac){return ac&&(hb.filterActive?ac.visible:!0)})}},{key:"isLeaf",value:function(eb){var hb=this;return!eb.children||0==eb.children.filter(function(ac){return ac&&(hb.filterActive?ac.visible:!0)}).length}},{key:"add",value:function(eb,hb,ac){hb=void 0===hb?this.root:hb;hb.children||(hb.children=[]);ac?Bd.arr.pushAt(hb.children,eb,hb.children.indexOf(ac)):
hb.children.push(eb);hb.isLeaf=!1}},{key:"replace",value:function(eb,hb){var ac=this.parentNode(eb);eb=ac.children.indexOf(eb);ac.children[eb]=hb}},{key:"next",value:function(eb){var hb=this.parentNode(eb);return hb&&hb.children[hb.children.indexOf(eb)+1]}},{key:"isBefore",value:function(eb,hb){this.next(eb)===hb}},{key:"isAfter",value:function(eb,hb){this.next(hb)===eb}},{key:"addBefore",value:function(eb,hb){this.add(eb,this.parentNode(hb),hb)}},{key:"addAfter",value:function(eb,hb){var ac=this.parentNode(hb);
hb=ac.children.indexOf(hb)+1;this.add(eb,ac,ac.children[hb])}},{key:"remove",value:function(eb){var hb=this.parentNode(eb);if(hb)return Bd.arr.remove(hb.children,eb),hb.children==[]&&(hb.children=null),eb}},{key:"filter",value:function(eb,hb){hb=void 0===hb?1:hb;var ac=this,Wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fd){if(1==Fd.nextAddress)return Fd.yield(ac.uncollapseAll(function(Be,Ie){return Ie<hb+1}),2);Wb=ac.filterActive;ac.filterActive=!1;ac.asListWithIndexAndDepth(!1).reverse().forEach(function(Be){var Ie=
Be.node;if(0==Be.depth)return Ie.visible=!0;Ie.visible=eb(Ie);Ie.visible||Ie.isCollapsed||!Ie.children.find(function(Lf){return Lf.visible})?Ie.container.opacity=1:(Ie.visible=!0,Ie.container.opacity=.5);return Ie.visible});ac.filterActive=Wb;Fd.jumpToEnd()})}}],[{key:"className",get:function(){return"InteractiveTreeData"}}],Rc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:2926,end:5365})}(Bd.TreeData);Bd.InteractiveTreeData=Nb;Bd.InteractiveTreeData=Nb;Bd.InteractiveTreeData=Nb;Nb=function(Xa){var Rc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),pb=Rc.hasOwnProperty("InteractiveTree")&&"function"===typeof Rc.InteractiveTree?Rc.InteractiveTree:Rc.InteractiveTree=function(eb){eb&&eb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Da(pb,Xa,[{key:"update",value:function(eb){var hb=this;Da._get(Object.getPrototypeOf(pb.prototype),"update",this).call(this,eb);this.treeData&&this.relayoutContainers();eb&&this.embeddedMorphs.forEach(function(ac){ac.isContainer&&(ac.fill=Bd.Color.transparent,ac.fontFamily=hb.fontFamily,ac.fontSize=hb.fontSize)})}},{key:"onDrop",value:function(eb){Da._get(Object.getPrototypeOf(pb.prototype),"onDrop",this).call(this,eb);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",
value:function(eb){}},{key:"onDropHoverUpdate",value:function(eb){}},{key:"onDropHoverOut",value:function(eb){}},{key:"onHoverOut",value:function(eb){var hb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ac){Da._get(Object.getPrototypeOf(pb.prototype),"onHoverOut",hb).call(hb,eb);hb._previewNode&&hb._previewNode.container.world()&&hb.treeData.remove(hb._previewNode);hb.resetContainerSelection();hb.update(!0);ac.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(eb){var hb=
this,ac;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wb){if(1==Wb.nextAddress)return ac=hb.treeData.parentNode(hb._previewNode),hb.treeData.replace(hb._previewNode,eb._data),hb.treeData.remove(hb._previewNode),Wb.yield(hb.whenRendered(),2);hb.update(!0);ac.container.onChildAdded(eb);Wb.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var eb=this;if(!this._scrollingUp){this._scrollingUp=!0;var hb=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ac){if(1==
ac.nextAddress)return eb._scrollingUp&&0<eb.scroll.y?ac.yield(eb.animate({scroll:eb.scroll.subXY(0,30),duration:300,easing:Bd.easings.linear}),3):(eb._scrollingUp=!1,ac.jumpTo(0));hb();ac.jumpToEnd()})};hb()}}},{key:"scrollDownSlowly",value:function(){var eb=this;if(!this._scrollingDown){this._scrollingDown=!0;var hb=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ac){if(1==ac.nextAddress)return eb._scrollingDown&&eb.scroll.y<eb.scrollExtent.y-eb.height?ac.yield(eb.animate({scroll:eb.scroll.addXY(0,
30),duration:300,easing:Bd.easings.linear}),3):(eb._scrollingDown=!1,ac.jumpTo(0));hb();ac.jumpToEnd()})};hb()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(eb){eb.isContainer&&(eb.fill=Bd.Color.transparent)})}},{key:"showDropPreviewFor",value:function(eb){var hb=this;eb=this.localize(eb.globalBounds().center());var ac=this.textPositionFromPoint(eb),Wb=this.treeData.asListWithIndexAndDepth(function(ue){ue=
ue.node;return ue!=hb._previewNode&&ue.container.world()}),Fd=(Wb.find(function(ue){return ue.i-1===ac.row})||{}).node,Be=Fd&&Fd.container,Ie=this.ensurePlaceholder(),Lf=!!Ie.container.world(),fd=eb.subPt(this.scroll).subPt(this.scrollbarOffset);10>fd.y?this.scrollUpSlowly():fd.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Be){if(Wb.length>ac.row||Bd.arr.last(this.treeData.root.children)===Ie)return;this.treeData.remove(Ie);this.treeData.add(Ie);
this.update(!0)}if(Be){Wb=this.textLayout.boundsFor(this,ac);if(4>Math.abs(Wb.top()-eb.y)){if(this.treeData.isBefore(Ie,Fd))return;this.treeData.remove(Ie);this.treeData.addBefore(Ie,Fd)}else if(4>Math.abs(Wb.bottom()-eb.y)&&(Fd.isCollapsed||this.treeData.isLeaf(Fd))){if(this.treeData.isAfter(Ie,Fd))return;this.treeData.remove(Ie);this.treeData.addAfter(Ie,Fd)}else{Be.fill=Bd.Color.gray;if(!Lf)return;this.treeData.remove(Ie)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var eb=Bd.pt(this.width-
100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:Bd.morph({acceptsDrops:!1,reactsToPointer:!1,fill:Bd.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=eb;return this._previewNode}},{key:"relayoutContainers",value:function(){var eb=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(hb){return hb.height});this.treeData.asListWithIndexAndDepth().forEach(function(hb){var ac=
hb.node;hb=hb.i;ac.container.nativeCursor="grab";ac.container.width=eb.width-25-ac.container.left;ac.container.toggleSelected&&ac.container.toggleSelected(hb==eb.selectedIndex)});this.anchors.forEach(function(hb){return hb.position=hb.position})}}],[{key:"className",get:function(){return"InteractiveTree"}}],Rc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1102"}}},{start:5374,end:10711})}(Bd.Tree);Bd.InteractiveTree=Nb;Bd.InteractiveTree=Nb;Bd.InteractiveTree=Nb;Nb=function(Xa){var Rc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),pb=Rc.hasOwnProperty("SceneGraphTree")&&"function"===typeof Rc.SceneGraphTree?Rc.SceneGraphTree:Rc.SceneGraphTree=function(eb){eb&&eb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(pb,Xa,[{key:"beforePublish",value:function(){this.submorphs=
[];this.reset()}},{key:"selectMorphInTarget",value:function(eb){var hb=this.treeData.asList().find(function(ac){return ac.container.target===eb});hb&&this.selectedNode!=hb&&this.selectPath(this.treeData.pathOf(hb))}},{key:"onLoad",value:function(){var eb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hb){if(1==hb.nextAddress)return eb.submorphs=[],hb.yield(eb.whenRendered(),2);eb.get("inspector").makeEditorVisible(!0);eb.get("inspector").makeEditorVisible(!1);eb.setTarget($world);
hb.jumpToEnd()})}},{key:"adjustProportions",value:function(eb){eb=(eb?eb.state.dragDelta:{y:0}).y;var hb=this.get("inspector"),ac=this.get("scene graph resizer"),Wb=this.get("mode selector"),Fd=this.get("connections tree");this.height+=eb;hb.height-=eb;Fd.height-=eb;ac.top=this.bottom;ac.left=0;Wb.top=ac.bottom;Fd.top=hb.top=Wb.bottom+5}},{key:"reset",value:function(){var eb=this;this.treeData=new Bd.InteractiveTreeData({children:[],container:Bd.morph()});this.get("inspector").targetObject={};this.selectedNode=
null;this.anchors.filter(function(hb){return null==hb.id}).forEach(function(hb){return eb.removeAnchor(hb)})}},{key:"setTarget",value:function(eb){this.target=eb;this.treeData=this.getTreeFromSubmorphHierarchy(eb);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(eb){var hb=this;if(eb===this._previewNode)return!1;if(eb.container.nameNeedsUpdate)return!0;var ac=eb.container.target.submorphs.filter(function(Wb){return!hb.ignoreMorph(Wb)});return ac.length!=eb.children.length||
ac.map(function(Wb){return Wb.name}).join("")!=eb.children.map(function(Wb){return Wb.target?Wb.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(eb){var hb=this,ac=eb.container.target.submorphs.map(function(Lf){return Lf.__scene_graph_target__?Lf.__scene_graph_target__():Lf}).filter(function(Lf){return!hb.ignoreMorph(Lf)}),Wb=[],Fd={},Be;for(Be in ac){Fd.$jscomp$loop$prop$m$2291=ac[Be];var Ie=Bd.arr.without(eb.children,this._previewNode).find(function(Lf){return function(fd){return fd.container.target.id==
Lf.$jscomp$loop$prop$m$2291.id}}(Fd));Wb[Be]=Ie?Ie:this.readMorphHierarchy(Fd.$jscomp$loop$prop$m$2291);Fd={$jscomp$loop$prop$m$2291:Fd.$jscomp$loop$prop$m$2291}}return Wb}},{key:"refresh",value:function(){var eb=this;if(!this._updating&&!this._dropInProgress){var hb=!1;Bd.tree.prewalk(this.treeData.root,function(ac){eb.isNodeOutOfSync(ac)&&(hb=!0,ac.name=ac.container.target.name,ac.container.refresh(),ac.children=eb.getNewChildren(ac))},function(ac){return ac.children});this.update(hb)}}},{key:"ignoreMorph",
value:function(eb){return eb.isMorph?eb.isContainer||eb.isWindow||eb.getWindow()||eb.isEpiMorph||eb.isHand||["lively.halos"].includes(eb.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler","UserFlap","Menu"].includes(eb.constructor.name):!1}},{key:"onDropHoverOut",value:function(eb){var hb=eb.hand.grabbedMorphs[0];eb=eb.hand.findDropTarget();if(!(eb===this||eb&&eb.ownerChain().includes(this))&&hb&&hb.isContainer)hb.onDragOutside()}},{key:"onDropHoverIn",
value:function(eb){var hb=eb.hand.grabbedMorphs[0];hb&&!hb.isContainer&&($world.halos().forEach(function(ac){return ac.remove()}),hb.remove(),Object.assign(hb,eb.hand._grabbedMorphProperties.get(hb).pointerAndShadow),hb=this.renderContainerFor(hb,!1),eb.hand.grab(hb),hb.leftCenter=Bd.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(eb){return new Bd.InteractiveTreeData(this.readMorphHierarchy(eb))}},{key:"readMorphHierarchy",value:function(eb){var hb=this;return Bd.tree.mapTree(eb,
function(ac,Wb){return{name:ac.name,isCollapsed:!0,container:hb.renderContainerFor(ac),visible:!0,children:Wb}},function(ac){return ac.submorphs.filter(function(Wb){return ac.isWorld?!hb.ignoreMorph(Wb):!0})})}},{key:"renderContainerFor",value:function(eb,hb){eb=void 0===eb?Bd.morph({name:"root"}):eb;hb=new Bd.MorphContainer({tree:this,fill:void 0===hb||hb?Bd.Color.transparent:Bd.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:eb,opacity:eb.visible?1:.5});
eb._data?(hb._data=eb._data,eb._data.container=hb):hb._data={name:eb.name,isCollapsed:!0,container:hb,children:[]};return hb}},{key:"collapseAll",value:function(){var eb=this;this.treeData.asList().forEach(function(hb){return hb!=eb.treeData.root?hb.isCollapsed=!0:hb.isCollapsed=!1})}},{key:"filterMorphs",value:function(eb){var hb=this,ac;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wb){if(1==Wb.nextAddress)return ac=eb.tokens[0],hb.treeData.filterActive||(hb._collapseState=new WeakMap(hb.treeData.asList().map(function(Fd){return[Fd,
Fd.isCollapsed]}))),hb.treeData.filterActive=!!ac,Wb.yield(hb.treeData.filter(function(Fd){var Be=!ac||Fd.container.target.name.includes(ac);Fd.container.highlightTerm(ac);return Be},3),2);hb.treeData.filterActive||hb.treeData.asList().forEach(function(Fd){return Fd.isCollapsed=hb._collapseState.has(Fd)?hb._collapseState.get(Fd):!0});hb.refresh();Wb.jumpToEnd()})}}],[{key:"className",get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],Rc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:10720,end:17193})}(Bd.InteractiveTree);Bd.SceneGraphTree=Nb;Bd.SceneGraphTree=Nb;Bd.SceneGraphTree=Nb;Nb=function(Xa){var Rc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),pb=Rc.hasOwnProperty("MorphContainer")&&"function"===typeof Rc.MorphContainer?Rc.MorphContainer:
Rc.MorphContainer=function(eb){eb&&eb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(pb,Xa,[{key:"refresh",value:function(){var eb=this,hb,ac;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wb){hb=eb.target;if(!hb)return Wb.return();eb.reactsToPointer=!0;eb.dropShadow=!1;eb.submorphs=[eb.getLabel(),hb.layout&&eb.getLayoutControls(),eb.getConnectionControls()].filter(Boolean).map(function(Fd,Be){Fd.fitIfNeeded();
Fd.left=ac?ac.right+5:0;Fd.top=2;return ac=Fd});eb.height=20;eb.opacity=hb.visible?1:.5;Wb.jumpToEnd()})}},{key:"getLabel",value:function(){var eb=this.getSubmorphNamed("name label")||Bd.morph({type:"label",name:"name label",reactsToPointer:!1,padding:Bd.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),hb=eb.textString.slice(2,-1);hb&&hb==this.target.name||(eb.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return eb}},{key:"getIcon",value:function(eb){return Bd.Icon.textAttribute({Morph:"square",
Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[eb.constructor.className]||"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var eb=this.getSubmorphNamed("layout label")||Bd.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:Bd.Rectangle.inset(4,2,4,2),fill:Bd.Color.orange,fontColor:Bd.Color.white});eb._isControlElement=
!0;eb.textString!=this.target.layout.name()&&(eb.value=this.target.layout.name());return eb}},{key:"onMouseDown",value:function(eb){var hb=this,ac,Wb,Fd,Be,Ie,Lf,fd,ue,Md;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vb){if(1==Vb.nextAddress)return Da._get(Object.getPrototypeOf(pb.prototype),"onMouseDown",hb).call(hb,eb),eb.targetMorph!=hb.get("connections label")?Vb.jumpTo(0):Vb.yield(hb.whenRendered(),3);ac=$jscomp.makeIterator(hb.world().halos());for(Wb=ac.next();!Wb.done;Wb=ac.next())Fd=
Wb.value,Fd.remove();Be=$jscomp.makeIterator(hb.world().getSubmorphsByStyleClassName("ConnectionHalo"));for(Wb=Be.next();!Wb.done;Wb=Be.next())Ie=Wb.value,Ie.remove();hb.owner.animate({opacity:.5,duration:300});Lf=new Bd.ConnectionHalo({target:hb.target});Lf.openInWorld();Lf.topLeft=hb.getSubmorphNamed("connections label").globalPosition.addXY(0,-2);Bd.connect(hb,"position",function(){Lf.topLeft=hb.getSubmorphNamed("connections label").globalPosition.addXY(0,-2)});fd=hb;ue=hb.owner;Md=hb.get("side bar");
Bd.once(Lf,"remove",hb,"toggleConnectionControl",{varMapping:{self:fd,disconnectAll:Mc,disconnect:zc,connectionHalo:Lf,tree:ue,sideBar:Md},updater:function(sa){fd.connectionHalo=null;ue.animate({opacity:1,duration:300});Bd.disconnect(Md,"toggle",Lf,"remove");Bd.disconnectAll(fd);sa(!0)}});Bd.once(hb,"remove",Lf,"remove");Bd.once(hb.get("side bar"),"toggle",Lf,"remove");hb.toggleConnectionControl(!1);hb.connectionHalo=Lf;Vb.jumpToEnd()})}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(ac){return!ac.targetObj.isHalo}).length:0;var eb=this.getSubmorphNamed("connections label")||Bd.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:Bd.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:Bd.Color.red,fontColor:Bd.Color.white});eb._isControlElement=!0;eb.visible=!this.connectionHalo&&!!this.connectionCount;var hb=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";eb.textString!=hb&&(eb.value=hb);return eb}},{key:"highlightTerm",value:function(eb){var hb=this.submorphs[0],ac=hb.textAndAttributes.slice(0,2),Wb=hb.textString.slice(1).split(eb);hb.textAndAttributes=1===Wb.length?[].concat($jscomp.arrayFromIterable(ac),[Wb[0]]):[].concat($jscomp.arrayFromIterable(ac),$jscomp.arrayFromIterable(Bd.arr.flatten(Bd.arr.interpose(Wb.map(function(Fd){return[Fd,{}]}),[eb,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(eb){var hb=Da._get(Object.getPrototypeOf(pb.prototype),"wantsToBeDroppedOn",this).call(this,eb);if(![eb].concat($jscomp.arrayFromIterable(eb.ownerChain())).includes(this.tree))this.onDragOutside();return hb}},{key:"onGrab",value:function(eb){var hb=this,ac;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wb){if(1==Wb.nextAddress)return hb.tree._dropInProgress=!0,ac=hb.target.globalPosition,Da._get(Object.getPrototypeOf(pb.prototype),
"onGrab",hb).call(hb,eb),hb._data.globalTargetPosition=ac,Wb.yield(hb.whenRendered(),2);if(hb.tree.fullContainsWorldPoint(hb.globalPosition))hb.leftCenter=Bd.pt(-20,0);else hb.onDragOutside();hb.tree._dropInProgress=!1;Wb.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=Bd.fun.createQueue("container-hover-queue",function(eb,hb){var ac,Wb,Fd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Be){if(1==Be.nextAddress)return ac=
eb.target,Wb=ac.opacity,Fd=ac.scale,eb.target.opacity=0,eb.target.scale=.5,$world.halos().forEach(function(Ie){return Ie.remove()}),$world.firstHand.grab(eb.target),eb.target._data=eb._data,eb.remove(),eb.target.position=Bd.pt(0,0),Be.yield(eb.target.animate({opacity:Wb,scale:Fd,duration:200}),2);hb();Be.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(eb){var hb=this.node.children.indexOf(eb.node||eb._data)+1;hb=this.node.children[hb];eb.target.remove();hb?(hb=this.target.submorphs.indexOf(hb.container.target),
this.target.addMorphAt(eb.target,hb)):this.target.addMorph(eb.target);eb._data.globalTargetPosition&&(eb.target.position=this.target.localize(eb._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(eb){}},{key:"toggleConnectionControl",value:function(eb){this.getSubmorphNamed("connections label").visible=eb}},{key:"toggleSelected",value:function(eb){var hb=this,ac,Wb,Fd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Be){if(1==Be.nextAddress)return Da._get(Object.getPrototypeOf(pb.prototype),
"toggleSelected",hb).call(hb,eb),hb._active===eb?Be.return():(hb._active=eb)&&hb.target&&hb.target.isMorph&&hb.world()?Be.yield(hb.target.whenRendered(),3):Be.jumpTo(0);hb.get("inspector").targetObject=hb.target;if(hb.connectionHalo)return Be.return();ac=$jscomp.makeIterator(hb.world().halos());for(Wb=ac.next();!Wb.done;Wb=ac.next()){Fd=Wb.value;if(Fd.target===hb.target)return Be.return();Fd.remove()}hb.world().showHaloFor(hb.target);Be.jumpToEnd()})}}],[{key:"className",get:function(){return"MorphContainer"}},
{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(eb){this.submorphs[0].fontFamily=eb}},fontColor:{after:["submorphs"],derived:!0,set:function(eb){this.submorphs[0].fontColor=eb}},fontSize:{derived:!0,set:function(eb){this.submorphs[0].fontSize=eb}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&
this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}}}}}],Rc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:17202,end:25985})}(Bd.InteractiveTreeContainer);
Bd.MorphContainer=Nb;Bd.MorphContainer=Nb;Bd.MorphContainer=Nb;var ad=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");ad.visualizeConnection=function(Xa,Rc,pb,eb,hb){eb=void 0===eb?{}:eb;hb=ad.rect(0).sides.concat(ad.rect(0).corners);pb=pb||new ad.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:ad.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:ad.Color.transparent,nativeCursor:"auto"},end:{fill:ad.Color.orange}}},eb,{hasFixedPosition:!0}));pb.startPoint.attachTo(Xa,
"rightCenter");Rc.isMorph?(eb=Rc.globalBounds().partNameNearest(hb,Xa.globalPosition),Xa.globalPosition.equals(Rc.globalBounds().partNamed(eb))&&Rc.globalBounds().partNameNearest(ad.arr.without(hb,eb),Xa.globalPosition),pb.endPoint.attachTo(Rc,"leftCenter")):(hb=Xa.globalBounds().topRight().addPt(ad.pt(100,0)),Rc=ad.morph({type:"label",value:Rc.toString(),styleClasses:["Tooltip"],padding:ad.rect(8,4)}).openInWorld(hb),Rc.position=Xa.world().bounds().translateForInclusion(Rc.bounds()).topLeft(),ad.once(pb,
"remove",Rc,"remove"),pb.endPoint.attachTo(Rc,"leftCenter"));return pb};ad.startConnecting=function(Xa,Rc){Xa.animate({opacity:.8,duration:300});Xa.startPoint.attachTo(Rc,"center");Xa.vertices[0].position=ad.pt(2,2)};ad.stopConnecting=function(Xa,Rc,pb,eb){function hb(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Be){if(1==Be.nextAddress)return Be.yield(Xa.animate({opacity:0,duration:300}),2);Xa.startPoint.clearConnection();Xa.endPoint.clearConnection();Xa.remove();Be.jumpToEnd()})}
eb=void 0===eb?"sourceAttrName":eb;var ac,Wb,Fd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Be){return 1==Be.nextAddress?(ac=Xa,Wb=ac.endPoint,(Fd=Wb.connectedMorph)&&"MorphContainer"==Fd.constructor.className&&(Fd=Fd.target),Fd?Be.yield(ad.interactiveConnectGivenSourceAndTarget(pb,eb,Fd),2):Be.jumpTo(2)):Be.yield(hb(),0)})};ad.editConnection=function(Xa){var Rc=Xa.connection,pb=Xa.connectionPoint,eb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hb){if(1==hb.nextAddress)return eb=
ad.visualizeConnection(pb,Rc.targetObj,!1,{borderColor:ad.Color.gray.darker(),endpointStyle:{start:{fill:ad.Color.transparent,nativeCursor:"auto"},end:{fill:ad.Color.gray.darker()}}}),hb.yield(ad.interactivelyReEvaluateConnection(Rc,"Edit Connection",!1),2);eb.remove();hb.jumpToEnd()})};ad.Tree=rc;ad.TreeData=Zb;ad.Icon=ic;ad.morph=fe;ad.pt=dc;ad.Rectangle=ob;ad.rect=Qc;ad.Color=md;ad.arr=xd;ad.connect=hd;ad.signal=ub;ad.Leash=Lb;ad.once=Mb;ad.interactivelyReEvaluateConnection=Ha;ad.interactiveConnectGivenSource=
Q;ad.interactiveConnectGivenSourceAndTarget=fa;(function(Xa){var Rc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),pb=Rc.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof Rc.ConnectionsTreeData?Rc.ConnectionsTreeData:Rc.ConnectionsTreeData=function(eb){eb&&eb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(pb,Xa,[{key:"parseMorphConnections",value:function(eb){for(var hb={},ac=$jscomp.makeIterator(void 0===
eb.attributeConnections?[]:eb.attributeConnections),Wb=ac.next();!Wb.done;Wb=ac.next())Wb=Wb.value,Wb.targetObj.isHalo||(hb[Wb.sourceAttrName]=hb[Wb.sourceAttrName]||[{name:["      New Connection  ",{fontColor:ad.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(eb,Wb.sourceAttrName),{}]}],ad.arr.pushAt(hb[Wb.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(Wb)))},0));return{children:Object.entries(hb).map(function(Fd){var Be=$jscomp.makeIterator(Fd);
Fd=Be.next().value;Be=Be.next().value;return{name:[Fd,{fontWeight:"bold"}," ",{},ad.morph({fill:ad.Color.white,opacity:.7,value:""+(Be.length-1),borderRadius:15,fontWeight:"bold",padding:ad.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:Be}}).concat([{name:["New Connection  ",{fontColor:ad.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(eb),{}]}])}}},{key:"renderExistingConnection",value:function(eb){var hb=this,ac=ad.morph({type:"label",fontColor:ad.Color.gray,fontSize:16,
nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(ad.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},eb.targetMethodName,{}])}),Wb=this.renderDeadPin(),Fd=Wb.submorphs[0];ad.connect(ac,"onHoverIn",function(){ac.fontColor=ad.Color.orange;ac._leash=ad.visualizeConnection(Fd,eb.targetObj,ac._leash);Fd.fill=ad.Color.orange;Fd.border={color:ad.Color.orange,width:3}});ad.connect(ac,"onMouseDown",function(Be){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ie){if(1==
Ie.nextAddress)return Be.stop(),Ie.yield(ad.interactivelyReEvaluateConnection(eb),2);ad.signal(hb,"refresh");Ie.jumpToEnd()})});ad.connect(ac,"onHoverOut",function(){ac.fontColor=ad.Color.gray;Fd.fill=ad.Color.gray;Fd.border={color:ad.Color.white,width:1};ac._leash.remove();ac._leash=void 0});return[ac,{},"  ",{}].concat($jscomp.arrayFromIterable(ad.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){eb.disconnect();ad.signal(hb,"refresh")}})),["  ",{},Wb,{}])}},{key:"renderDeadPin",
value:function(){var eb=ad.morph({type:"ellipse",fill:ad.Color.gray,extent:ad.pt(10,10),center:ad.pt(8,12),borderWidth:1});return ad.morph({extent:ad.pt(20,20),fill:ad.Color.transparent,reactsToPointer:!1,submorphs:[eb]})}},{key:"renderPin",value:function(eb,hb){var ac=this,Wb=ad.morph({type:"ellipse",fill:ad.Color.gray.withA(.5),extent:ad.pt(10,10),center:ad.pt(8,12),draggable:!1,borderWidth:1}),Fd=new ad.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:ad.Color.gray.darker(),
endpointStyle:{fill:ad.Color.gray.darker()},position:ad.pt(1,1),vertices:[ad.pt(0,0),ad.pt(0,0)],canConnectTo:function(Be){return"MorphContainer"==Be.constructor.className||2>ad.arr.intersect([Be].concat($jscomp.arrayFromIterable(Be.ownerChain())),[Wb].concat($jscomp.arrayFromIterable(Wb.ownerChain()))).length}});Wb.addMorph(Fd);ad.connect(Fd.endPoint,"onDragStart",function(){ad.startConnecting(Fd,Wb)});ad.connect(Fd.endPoint,"onDragEnd",function(Be){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ie){if(1==
Ie.nextAddress)return Wb.center=ad.pt(8,12),Ie.yield(ad.stopConnecting(Fd,Wb,eb,hb),2);ad.signal(ac,"refresh");Ie.jumpToEnd()})});return ad.morph({extent:ad.pt(20,20),fill:ad.Color.transparent,reactsToPointer:!1,submorphs:[Wb]})}},{key:"display",value:function(eb){return eb.name}},{key:"collapse",value:function(eb,hb){eb.isCollapsed=hb}},{key:"isCollapsed",value:function(eb){return eb.isCollapsed}},{key:"isLeaf",value:function(eb){return!eb.children}},{key:"getChildren",value:function(eb){return eb.children}}],
[{key:"className",get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(eb){var hb=new this;hb.root=hb.parseMorphConnections(eb);return hb}}],Rc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3535,end:8087})})(ad.TreeData);Nb=function(Xa){var Rc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),
pb=Rc.hasOwnProperty("ConnectionsTree")&&"function"===typeof Rc.ConnectionsTree?Rc.ConnectionsTree:Rc.ConnectionsTree=function(eb){eb&&eb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(pb,Xa,[{key:"inspectConnectionsOf",value:function(eb){if(this.targetMorph=eb)this.treeData=ad.ConnectionsTreeData.for(eb),ad.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=ad.ConnectionsTreeData.for(this.targetMorph),
ad.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:"className",get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],Rc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8104,end:8657})}(ad.Tree);Nb=ad.ConnectionsTree;ad.default=Nb}}});