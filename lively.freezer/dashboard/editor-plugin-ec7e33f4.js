System.register(["./__root_module__-7cbd94df.js","kld-intersections","./index-a563870d.js","./editor-plugin-aefcac89.js","./index-cfc100d1.js"],function(Da){var Ab,Rb,jc,cc,je,fd,Yd,jd,Pc,vd,Ld,ge,Td,md,Za,Db,ac,ic,gd,fe,Yb,qc,Ob,Hc;return{setters:[function(Yc){Ab=Yc.as;Rb=Yc.bB;jc=Yc.bC;cc=Yc.bD;je=Yc.F;fd=Yc.aq;Yd=Yc.aX;jd=Yc.s;Pc=Yc.ab;vd=Yc.bo;Ld=Yc.a6;ge=Yc.$;Td=Yc.bE;md=Yc.bv},function(){},function(Yc){Za=Yc.s},function(Yc){Db=Yc.p;ac=Yc.d;ic=Yc.a;gd=Yc.r;fe=Yc.C},function(Yc){Yb=Yc.localInterface;
qc=Yc.systemInterfaceNamed;Ob=Yc.serverInterfaceFor;Hc=Yc.l2lInterfaceFor}],execute:function(){var Yc=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js");Yc.warnStyle={"border-bottom":"2px dotted orange"};Yc.errorStyle={"background-color":"red"};var cd=function(Qc){var sc=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js"),Vc=sc.hasOwnProperty("JavaScriptChecker")&&"function"===typeof sc.JavaScriptChecker?sc.JavaScriptChecker:sc.JavaScriptChecker=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ab(Vc,Qc,[{key:"uninstall",value:function(Q){var fa=Q.text||Q;(fa.markers||[]).forEach(function(Ia){return Ia.id.startsWith("js-checker-")&&fa.removeMarker(Ia)});fa.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(Q,fa){return[].concat($jscomp.arrayFromIterable(Q.embeddedMorphMap.values())).find(function(Ia){return fa.containsPosition(Ia.anchor.position)})}},{key:"onDocumentChange",value:function(Q,
fa,Ia){var Sa=fa.document;try{var ec=Ia.parse()}catch(Vb){ec=Vb}ec&&(Q=(fa.markers||[]).filter(function(Vb){return Vb.id.startsWith("js-checker-")}),Ia=Ia.undeclaredVariables().map(function(Vb,Ua){var wc=Vb.start;Vb=Vb.end;wc=Sa.indexToPosition(wc);Vb=Sa.indexToPosition(Vb);return fa.addMarker({id:"js-checker-"+Ua,style:Yc.warnStyle,range:{start:wc,end:Vb},type:"js-undeclared-var"})}),Q.slice(Ia.length).forEach(function(Vb){return fa.removeMarker(Vb)}),ec.parseError?(Q=ec.parseError.loc,Ia=Q.column,
Q=Q.line-1,ec=Sa.indexToPosition(ec.parseError.pos),Ia=ec.column,Q=ec.row,ec={start:{column:Ia-1,row:Q},end:{column:Ia+1,row:Q}},this.hasEmbeddedMorphInRange(fa,ec)||fa.addMarker({id:"js-syntax-error",range:ec,style:Yc.errorStyle,type:"js-syntax-error"})):fa.removeMarker("js-syntax-error"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptChecker"}}],sc,{pathInPackage:function(){return"js/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:118,end:1882})}(void 0),$b=cd=Yc.JavaScriptChecker;Yc.default=cd;var pb=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js");pb.query=Rb;pb.fuzzyParse=jc;pb.acorn=cc;pb.custom=je;var xc=function(Qc){var sc=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js"),Vc=sc.hasOwnProperty("JavaScriptNavigator")&&"function"===typeof sc.JavaScriptNavigator?
sc.JavaScriptNavigator:sc.JavaScriptNavigator=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ab(Vc,Qc,[{key:"ensureAST",value:function(Q){return this.parse(Q.textString)}},{key:"parse",value:function(Q){return pb.fuzzyParse(Q)}},{key:"move",value:function(Q,fa){var Ia=!!fa.activeMark||!fa.selection.isEmpty(),Sa=fa.selection,ec=fa.positionToIndex(Sa.lead);Q=this[Q](fa.textString,ec);Q=fa.indexToPosition(Q);Sa.lead=
Q;Ia||(Sa.anchor=Q);fa.scrollCursorIntoView()}},{key:"forwardSexp",value:function(Q){this.move("_forwardSexp",Q)}},{key:"backwardSexp",value:function(Q){this.move("_backwardSexp",Q)}},{key:"backwardUpSexp",value:function(Q){this.move("_backwardUpSexp",Q)}},{key:"forwardDownSexp",value:function(Q){this.move("_forwardDownSexp",Q)}},{key:"_forwardSexp",value:function(Q,fa){Q=this.parse(Q);Q=pb.custom.findNodesIncluding(Q,fa).reverse().find(function(Sa){return Sa.end!==fa});if(!Q)return fa;if("BlockStatement"===
Q.type){var Ia=Q.body.find(function(Sa){return Sa.start>fa});if(Ia)return Ia.start}return Q.end}},{key:"_backwardSexp",value:function(Q,fa){Q=this.parse(Q);Q=pb.custom.findNodesIncluding(Q,fa).reverse().find(function(Sa){return Sa.start!==fa});if(!Q)return fa;if("BlockStatement"===Q.type){var Ia=Q.body.slice().reverse().find(function(Sa){return Sa.end<fa});if(Ia)return Ia.end}return Q?Q.start:fa}},{key:"_backwardUpSexp",value:function(Q,fa){Q=this.parse(Q);return(Q=pb.custom.findNodesIncluding(Q,
fa).reverse().find(function(Ia){return Ia.start!==fa}))?Q.start:fa}},{key:"_forwardDownSexp",value:function(Q,fa){Q=this.parse(Q);return(Q=pb.custom.findNodeAfter(Q,fa,function(Ia,Sa){return Sa.start>fa}))?Q.node.start:fa}},{key:"markDefun",value:function(Q){var fa=this.rangeForFunctionOrDefinition(Q.textString,[Q.positionToIndex(Q.selection.range.start),Q.positionToIndex(Q.selection.range.end)]);fa&&Q.execCommand("expandRegion",{start:fa[0],end:fa[1]})}},{key:"rangeForNodesMatching",value:function(Q,
fa,Ia){Q=this.parse(Q);return(fa=pb.custom.findNodesIncluding(Q,fa).reverse().find(Ia))?[fa.start,fa.end]:null}},{key:"rangeForFunctionOrDefinition",value:function(Q,fa){var Ia=fa[0]===fa[1];return this.rangeForNodesMatching(Q,fa[1],function(Sa){return["AssignmentExpression","FunctionDeclaration","FunctionExpression","MethodDefinition"].includes(Sa.type)&&(Ia&&Sa.end!==fa[1]||!Ia&&Sa.start<fa[0])?!0:!1})}},{key:"resolveIdentifierAt",value:function(Q,fa){"number"!==typeof fa&&(fa=Q.positionToIndex(fa));
Q=this.ensureAST(Q);var Ia=pb.query.nodesAt(fa,Q).reverse(),Sa=Ia.find(function(Vb){return"Identifier"===Vb.type});if(!Sa&&((Ia=Ia[0])&&Ia.type.includes("Specifier")&&Ia.local&&"Identifier"===Ia.local.type&&(Sa=Ia.local),!Sa))return;fa=(Ia=pb.query.findDeclarationClosestToIndex(Q,Sa.name,fa))?pb.query.scopeAtIndex(Q,Ia.start):pb.query.scopeAtIndex(Q,fa);var ec=pb.query.findReferencesAndDeclsInScope(fa,Sa.name).refs;return{parsed:Q,scope:fa,id:Sa,name:Sa.name,decl:Ia,refs:ec}}},{key:"expandRegion",
value:function(Q,fa,Ia,Sa){function ec(oe){oe=Q.positionToIndex({column:0,row:Ua.row});return{range:[oe+wc.start,oe+wc.start+wc.value.length],prev:Sa}}var Vb=Sa.range[0]!==Sa.range[1],Ua=Q.indexToPosition(Sa.range[0]),wc=Q.tokenAt(Ua);if(!Vb&&wc&&["keyword","identifier"].includes(wc.type))return ec();Ia=Ia||this.parse(fa);fa=pb.query.nodesAtIndex(Ia,Sa.range[0]).reverse().find(function(oe){return oe.start<Sa.range[0]||oe.end>Sa.range[1]});if(!fa)return Sa;Ia=fa.start;Vb=fa.end;return"Literal"===fa.type&&
(fa.raw||"").match(/^['"`]/)&&Sa.range[0]!==fa.start&&Sa.range[1]!==fa.end&&(fa.start+1<Sa.range[0]||fa.end-1>Sa.range[1])?{range:[Ia+1,Vb-1],prev:Sa}:{range:[Ia,Vb],prev:Sa}}},{key:"contractRegion",value:function(Q,fa,Ia,Sa){return Sa.prev||Sa}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptNavigator"}}],sc,{pathInPackage:function(){return"js/navigator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:121,end:6658})}(void 0);cd=xc=pb.JavaScriptNavigator;pb.default=xc;var Lc=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js");Lc.addIndexToTextPos=function(Qc,sc,Vc){return Qc.indexToPosition(Qc.positionToIndex(sc)+Vc)};Lc.connect=fd;Lc.disconnect=Yd;Lc.string=jd;Lc.KeyHandler=Pc;Lc.Range=vd;xc=function(Qc){var sc=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js"),Vc=sc.hasOwnProperty("Snippet")&&"function"===
typeof sc.Snippet?sc.Snippet:sc.Snippet=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ab(Vc,Qc,[{key:Symbol.for("lively-instance-initialize"),value:function(Q){Q=void 0===Q?{trigger:null,expansion:""}:Q;var fa=Q.expansion;this.trigger=Q.trigger;this.expansion=fa;this.resetExpansionState()}},{key:"isTextSnippet",get:function(){return!0}},{key:"attach",value:function(Q){this.isExpanding&&(this.textMorph=Q,Lc.connect(this.textMorph,
"selectionChange",this,"onCursorMove"))}},{key:"detach",value:function(Q){this.isExpanding&&(Lc.disconnect(Q,"selectionChange",this,"onCursorMove"),this.textMorph=null)}},{key:"onCursorMove",value:function(){var Q=this.expansionState,fa=Q.startAnchor,Ia=Q.endAnchor;Q.isExpanding?Lc.Range.fromPositions(fa.position,Ia.position).containsPosition(this.textMorph.cursorPosition)||this.resetExpansionState():this.resetExpansionState()}},{key:"resetExpansionState",value:function(){var Q=this.textMorph;if(Q){var fa=
this.expansionState||{},Ia=fa.marker,Sa=fa.startAnchor,ec=fa.endAnchor;fa=fa.steps;Sa&&Q.removeAnchor(Sa);ec&&Q.removeAnchor(ec);Ia&&Q.removeMarker(Ia);fa.forEach(function(Vb){return Q.removeAnchor(Vb.anchor)})}this.expansionState={stepIndex:-1,steps:[],isExpanding:!1,startMarker:null,endMarker:null};Q&&Q.removePlugin(this)}},{key:"isExpanding",get:function(){return this.expansionState.isExpanding}},{key:"createExpansionSteps",value:function(Q){var fa=[],Ia=0;Lc.string.reMatches(Q,/\$[0-9]+|\$\{[0-9]+:[^\}]*\}/g).forEach(function(Sa){var ec=
Sa.start,Vb=Sa.end;Sa=Sa.match;var Ua="";Sa.startsWith("${")?(Ua=$jscomp.makeIterator(Sa.match(/^\$\{([0-9]+):([^\}]*)\}/)),Ua.next(),Sa=Ua.next().value,Ua=Ua.next().value,Sa=Number(Sa)):Sa=Number(Sa.replace(/^\$/,""));Q=Q.slice(0,ec-Ia)+Ua+Q.slice(Vb-Ia);fa[Sa]={index:ec-Ia,prefill:Ua,anchor:null};Ia+=Vb-ec-Ua.length});return{steps:fa,expansion:Q}}},{key:"expandAtCursor",value:function(Q){var fa=Q.selection,Ia=Q.cursorPosition.column,Sa=this.expansion;this.trigger&&(Ia-=this.trigger.length);if(Ia=
Math.max(0,Ia))Sa=Lc.string.lines(Sa),Sa=[Sa[0]].concat($jscomp.arrayFromIterable(Sa.slice(1).map(function(Md){return Lc.string.indent(Md," ",Ia)}))),Sa=Sa.join("\n");var ec=this.createExpansionSteps(Sa);Sa=ec.expansion;ec=ec.steps;this.trigger&&fa.growLeft(this.trigger.length);fa.text=Sa;var Vb=fa.start;Sa=fa.end;fa.collapseToEnd();if(ec.length){var Ua=Lc.string.newUUID();ec.forEach(function(Md,id){return Md.anchor=Q.addAnchor(Object.assign({id:"snippet-step-"+id+"-"+Ua},Lc.addIndexToTextPos(Q,Vb,
Md.index)))});var wc=Q.addAnchor(Object.assign({id:"snippet-start-"+Ua},Vb,{insertBehavior:"stay"})),oe=Q.addAnchor(Object.assign({id:"snippet-end-"+Ua},Sa));this.expansionState={marker:Q.addMarker({id:"snippet-marker-"+Ua,get range(){return{start:wc.position,end:oe.position}},style:{"border-radius":"4px","background-color":"rgba(30, 200, 140, 0.3)","box-shadow":"0 0 4px rgba(30, 200, 140, 0.3)","pointer-events":"none",content:"fooooo"}}),startAnchor:wc,endAnchor:oe,stepIndex:0,steps:ec,isExpanding:!0};
Q.addPlugin(this);this.nextStep()}}},{key:"nextStep",value:function(){var Q=this.expansionState,fa=Q.steps,Ia=this.textMorph;if(Q.isExpanding&&Ia){Ia=Ia.selection;Q=fa[Q.stepIndex];var Sa=Q.prefill;Ia.lead=Ia.anchor=Q.anchor.position;Ia.growRight(Sa.length);this.expansionState.stepIndex++;this.expansionState.stepIndex>=fa.length&&(this.resetExpansionState(),console.log("[snippet] expansion of "+this.expansion+" done"))}}},{key:"canExpand",value:function(Q,fa){fa=Q.positionToIndex(Q.cursorPosition);
return Q.textString.slice(fa-this.trigger.length,fa)===this.trigger}},{key:"tryTrigger",value:function(Q,fa){if(!this.canExpand(Q,Q.cursorPosition))return!1;this.expandAtCursor(Q);return!0}},{key:"getCommands",value:function(Q){var fa=this;return Q.concat([{name:"[snippet] next expansion step",exec:function(Ia){fa.nextStep();return!0}},{name:"[snippet] cancel expansion",exec:function(Ia){fa.resetExpansionState();return!0}}])}},{key:"getKeyHandlers",value:function(Q){return Q.concat(Lc.KeyHandler.withBindings([{keys:"Tab",
command:"[snippet] next expansion step"},{keys:"Escape",command:"[snippet] cancel expansion"}]))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Snippet"}}],sc,{pathInPackage:function(){return"text/snippets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:356,end:5934})}(void 0);Lc.Snippet=xc;Lc.Snippet=xc;Lc.Snippet=
xc;var Ga=[{name:"get snippets",exec:function(Qc){return Qc.pluginCollect("getSnippets",[])}}];Lc.snippetCommands=Ga;Lc.snippetCommands=Ga;Lc.snippetCommands=Ga;var Ra=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js");Ra.buildEvalOpts=function(Qc,sc){return Qc.plugins.find(function(Vc){return Vc.isJSEditorPlugin}).sanatizedJsEnv(sc)};Ra.Snippet=xc;Ga=function(Qc){var sc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Vc=sc.hasOwnProperty("ModuleTopLevelVarCompleter")&&
"function"===typeof sc.ModuleTopLevelVarCompleter?sc.ModuleTopLevelVarCompleter:sc.ModuleTopLevelVarCompleter=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ab(Vc,Qc,[{key:"compute",value:function(Q,fa){var Ia,Sa,ec,Vb,Ua,wc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(oe){if(1==oe.nextAddress){Sa=(Ia=Q.pluginFind(function(Md){return Md.isJSEditorPlugin}))&&Ia.systemInterface();if(!Sa)return oe.return([]);
ec=Ra.buildEvalOpts(Q);Vb=ec.targetModule;return"local"===Sa.name?(Ua=Object.getOwnPropertyNames(Sa.getModule(Vb).recorder),oe.jumpTo(2)):oe.yield(Sa.runEval('\n        var result, livelySystem = typeof System !== "undefined"\n                      && System.get(System.decanonicalize("lively-system-interface"));\n        if (livelySystem) {\n          result = JSON.stringify(\n            Object.getOwnPropertyNames(livelySystem.localInterface.getModule("'+Vb+'").recorder));\n        } else {\n          var G = typeof window !== "undefined" ?\n            window : typeof global !== "undefined" ? global : this;\n          result = JSON.stringify(Object.getOwnPropertyNames(G));\n        }\n        result;\n      ',
{targetModule:"lively://module-recorder-completer"}),3)}if(2!=oe.nextAddress){wc=oe.yieldResult;if(wc.isError)return oe.return([]);Ua=JSON.parse(wc.value)}Ua=Ua.filter(function(Md){return!Md.startsWith("defVar_")&&!["System","__currentLivelyModule","initializeES6ClassForLively","_moduleExport","_moduleImport"].includes(Md)});return oe.return(Ua.map(function(Md){return{priority:1100,completion:Md}}))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleTopLevelVarCompleter"}}],
sc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:222,end:1678})}(void 0);Ra.ModuleTopLevelVarCompleter=Ga;Ra.ModuleTopLevelVarCompleter=Ga;Ra.ModuleTopLevelVarCompleter=Ga;Ga=function(Qc){var sc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Vc=sc.hasOwnProperty("DynamicJavaScriptCompleter")&&
"function"===typeof sc.DynamicJavaScriptCompleter?sc.DynamicJavaScriptCompleter:sc.DynamicJavaScriptCompleter=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ab(Vc,Qc,[{key:"isValidPrefix",value:function(Q){return/\.[a-z0-9_]*$/i.test(Q)}},{key:"isMethodCallCompletion",value:function(Q){return Q.endsWith(")")&&0<Q.indexOf("(")}},{key:"isValidIdentifier",value:function(Q){if("string"!==typeof Q)return!1;this.isMethodCallCompletion(Q)&&
(Q=Q.slice(0,Q.indexOf("(")));return/^[a-z_\$][0-9a-z_\$]*$/i.test(Q)?!0:!1}},{key:"wrapInBrackets",value:function(Q){if(!isNaN(Number(Q))||Q.startsWith("Symbol."))return"["+Q+"]";var fa="";this.isMethodCallCompletion(Q)&&(fa=Q.slice(Q.indexOf("(")),Q=Q.slice(0,Q.indexOf("(")));return'["'+Q.replace(/"/g,'\\"')+'"]'+fa}},{key:"compute",value:function(Q){var fa=this,Ia,Sa,ec,Vb,Ua,wc,oe,Md,id,Ta,rd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(jb){if(1==jb.nextAddress){Ia=Q.selection;
Ia.isEmpty()?(Sa=Q.getLine(Ia.lead.row),Sa=Sa.slice(Sa.lastIndexOf(":")+1,Ia.lead.column)):Sa=Ia.text.slice(Math.max(0,Ia.text.indexOf(":")),0);if(!fa.isValidPrefix(Sa))return jb.return([]);Vb=(ec=Q.pluginFind(function(Qd){return Qd.isJSEditorPlugin}))&&ec.systemInterface();if(!Vb)return jb.return([]);Ua=Ra.buildEvalOpts(Q);return jb.yield(Vb.dynamicCompletionsForPrefix(Ua.targetModule,Sa,Ua),2)}wc=jb.yieldResult;oe=wc.isError;Md=wc.value;id=wc.completions;Ta=wc.prefix;if(oe)return console.warn("javascript completer encountered error: "+
(Md.stack||Md)),jb.return([]);id.reduce(function(Qd,ab){ab=$jscomp.makeIterator(ab);ab.next();ab=ab.next().value;return Qd+ab.length},0);rd=id.reduce(function(Qd,ab,lb){ab=$jscomp.makeIterator(ab);var vb=ab.next().value;ab=ab.next().value;return Qd.concat(ab.map(function(Bd){var de=fa.isValidIdentifier(Bd);return{info:vb,completion:Bd,prefix:de?Ta:"."+Ta,customInsertionFn:de?fa.isMethodCallCompletion(Bd)?function(Ee,Ze,Zc,ye){Ze=ye.start;ye=ye.end;Ee=Ee.replace(/\((.*)\)/,function(Hd){return"("+Hd.slice(1,
-1).split(", ").map(function(Zb,sa){return"${"+sa+":"+Zb+"}"}).join(", ")+")"});Ee=new Ra.Snippet({expansion:Ee});Zc.replace({start:Ze,end:ye},"");Ee.expandAtCursor(Zc)}:null:function(Ee,Ze,Zc,ye){Ee=ye.start;ye=ye.end;Ze={row:Ee.row,column:Ee.column-1};ye="."===Zc.textInRange({start:Ze,end:Ee})?{start:Ze,end:ye}:{start:Ee,end:ye};Zc.replace(ye,fa.wrapInBrackets(Bd))}}}))},[]);rd.forEach(function(Qd,ab){return Object.assign(Qd,{priority:2E3+rd.length-ab})});return jb.return(rd)})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"DynamicJavaScriptCompleter"}}],sc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1687,end:5122})}(void 0);Ra.DynamicJavaScriptCompleter=Ga;Ra.DynamicJavaScriptCompleter=Ga;Ra.DynamicJavaScriptCompleter=Ga;Ra.keywords="arguments boolean break case catch class const continue debugger default delete eval export import extends false true finally instanceof static super this throw typeof while with yield await Array Date eval function hasOwnProperty Infinity isFinite isNaN isPrototypeOf length Math NaN name Number Object prototype String toString undefined valueOf alert assign clearInterval clearTimeout decodeURI decodeURIComponent document encodeURI encodeURIComponent escape navigator parseFloat parseInt setInterval setTimeout window document requestAnimationFrame cancelAnimationFrame".split(" ");
Ga=function(Qc){var sc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Vc=sc.hasOwnProperty("JavaScriptKeywordCompleter")&&"function"===typeof sc.JavaScriptKeywordCompleter?sc.JavaScriptKeywordCompleter:sc.JavaScriptKeywordCompleter=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ab(Vc,Qc,[{key:"compute",value:function(Q,fa){return Ra.keywords.map(function(Ia){return{completion:Ia,priority:0}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptKeywordCompleter"}}],sc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6125,end:6262})}(void 0);Ra.JavaScriptKeywordCompleter=Ga;Ra.JavaScriptKeywordCompleter=Ga;Ra.JavaScriptKeywordCompleter=Ga;Ga=[new Ra.DynamicJavaScriptCompleter,
new Ra.JavaScriptKeywordCompleter,new Ra.ModuleTopLevelVarCompleter];Ra.completers=Ga;Ra.completers=Ga;Ra.completers=Ga;var rb=lively.FreezerRuntime.recorderFor("lively.ide/js/snippets.js");rb.Snippet=xc;var Kb=[["typef",'typeof ${0:object} === "function"$1'],["types",'typeof ${0:object} === "string"$1'],["typen",'typeof ${0:object} === "number"$1'],["typeu",'typeof ${0:object} === "undefined"$1'],["typenu",'typeof ${0:object} !== "undefined"$1'],["import",'import { ${0:name} } from "${1:module}";'],
["importd",'import ${0:name} from "${1:module}";'],["import*",'import * as ${0:name} from "${1:module}";'],["subclass","class ${0:name} extends ${1:base} {\n  constructor(${2:args}) {\n    super(${3:args})\n    $4\n  }\n}"],["class","class ${0:name} {\n  constructor(${1:args}) {\n    $2\n  }\n}"],["switch","switch (${0:expression}) {\n  case '${2:case}':\n    ${3:// code}\n    break;\n    $4\n    default:\n    ${1:// code}\n}"],["tryf","try {${0:/* code */}} finally {}"],["try","try {${0:/* code */}} catch (err) {}"],
["do","do {${1:/* code */}} while (${0:/* condition */});"],["fori","for (let ${0:prop} in ${1:obj}) {\n  ${2:obj[prop]}\n}"],["foro","for (let ${0:value} of ${1:iterable}) {\n  ${2:value}\n}"],["for-","for (let ${0:i} = ${1:list}.length; ${2:i}--; ) {\n  $3\n}"],["for","for (let ${0:i} = 0; ${1:i} < ${3:list}.length; ${2:i}++) {\n  $4\n}"],["Prom","new Promise((resolve, reject) => {$0})"],["keys","Object.keys($0)"],["assign","Object.assign(${0:dest}, ${1:source})"],["stringi","JSON.stringify(${0:object})"],
["forE","forEach(${0:ea} => $1)"],["map","map(${0:ea} => $1)"],["reduce","reduce((${1:all}, ${2:ea}) => {$3}, ${0:init})"],["from","Array.from(${0:list})"],["last","arr.last(${0:list})"],["pluck",'arr.pluck(${0:list}, "${1:key}")'],["sortBy","arr.sortBy(${0:list}, ($1) => $2)"],["join",'join("\\n")'],["con","connect(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["once","once(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["sig","signal(${0:source}, '${1:sourceAttr}', ${2:value});"],
["ll","lively.lang."],["lls","lively.lang.string."],["lla","lively.lang.arr."],["llo","lively.lang.obj."],["llf","lively.lang.fun."],["llp","lively.lang.promise."],["withA","withAllSubmorphsDo(ea => { return ${0:ea}; })"],["$w","$world"],["$m","$morph('${0:name}')"],["get",'get("${0:name}")'],["$","${$0}"],["cl","console.log($0)"],["cw","console.warn($0)"],["ce","console.error($0)"],["s","show(`$0`);"],["l2lC",'import L2LClient from "lively.2lively/client.js";\nlet l2lClient = L2LClient.default();$0'],
["fun","function ${0:functionName}($1) {$2}"],["fn","function($0) {$1}"],["f","($0) => $1"],["aw","await $0"]];rb.snippets=Kb;rb.snippets=Kb;rb.snippets=Kb;var Ib=lively.FreezerRuntime.recorderFor("lively.ide/js/commands.js");Ib.getEvalEnv=function(Qc){return(Qc=Qc.pluginFind(function(sc){return sc.isJSEditorPlugin}))?Qc.evalEnvironment:null};Ib.setEvalEnv=function(Qc,sc){(Qc=Qc.pluginFind(function(Vc){return Vc.isJSEditorPlugin}))&&Object.assign(Qc.evalEnvironment,sc);return Qc.evalEnvironment};
Ib.pToI=function(Qc,sc){return Qc.positionToIndex(sc)};Ib.iToP=function(Qc,sc){return Qc.indexToPosition(sc)};Ib.arr=Ld;Ib.promise=ge;Ib.string=jd;Ib.show=Za;Ib.Range=vd;Ib.query=Rb;Ib.BaseVisitor=Td;rb=[{name:"undefine variable",doc:"Finds the variable at cursor position (or position passed) and undefines it in the module toplevel scope.",exec:function(Qc,sc){sc=void 0===sc?{varName:null,position:null}:sc;var Vc,Q,fa,Ia,Sa,ec,Vb,Ua,wc,oe;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Md){switch(Md.nextAddress){case 1:Vc=
sc;Q=Vc.varName;fa=Vc.position;if(!Q){fa||(fa=Qc.cursorPosition);Ia=Qc.pluginInvokeFirst("getNavigator");Sa=Ia.ensureAST(Qc);ec=Ib.query.nodesAt(Qc.positionToIndex(fa),Sa).reverse().find(function(id){return"Identifier"===id.type});if(!ec)return Qc.showError(Error("no identifier found!")),Md.return(!0);Q=ec.name}sc=Qc.pluginFind(function(id){return id.isJSEditorPlugin}).sanatizedJsEnv();Vb='lively.modules.module("'+sc.targetModule+'").undefine("'+Q+'")';Md.setCatchFinallyBlocks(2);return Md.yield(Qc.doEval(null,
sc,Vb),4);case 4:Ua=Md.yieldResult;wc=Ua.error?Ua.error:Ua.isError?Ua.value:null;Md.leaveTryBlock(3);break;case 2:wc=oe=Md.enterCatchBlock();case 3:return wc?Qc.showError(wc):Qc.setStatusMessage(Q+" undefined"),Md.return(!0)}})}},{name:"change doitContext",exec:function(Qc){var sc,Vc,Q,fa,Ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sa){if(1==Sa.nextAddress)return sc=$jscomp,Vc=sc.makeIterator,Sa.yield(Qc.world().execCommand("select morph",{prompt:"select morph for doitContext",
justReturn:!0,prependItems:["reset"],filterFn:function(ec){return!ec.isUsedAsEpiMorph()}}),2);Q=Vc.call(sc,Sa.yieldResult);if(fa=Q.next().value)Ia="reset"===fa,Qc.doitContext=Ia?null:fa,Qc.setStatusMessage(Ia?"doitContext is now\n"+fa:"doitContext reset");return Sa.return(!0)})}},{name:"change eval backend",exec:function(Qc,sc){sc=void 0===sc?{backend:void 0}:sc;var Vc,Q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fa){if(1==fa.nextAddress)return Vc=sc,Q=Vc.backend,void 0!==Q?fa.jumpTo(2):
fa.yield(Qc.world().prompt("choose eval backend",{historyId:"js-eval-backend-history"}),3);if(2!=fa.nextAddress&&(Q=fa.yieldResult,!Q))return Qc.setStatusMessage("Canceled"),fa.return(!0);"local"===Q&&(Q=null);Qc.setStatusMessage("Eval backend is now "+(Q||"local"));return fa.return(Ib.setEvalEnv(Qc,{remote:Q}))})}},{name:"copy current module name to clipboard",exec:function(Qc){var sc=Qc.evalEnvironment.targetModule;Qc.setStatusMessage(sc?sc:"Cannot find module name");Qc.env.eventDispatcher.killRing.add(Qc);
Qc.env.eventDispatcher.doCopy(sc);return!0}}];Ib.jsEditorCommands=rb;Ib.jsEditorCommands=rb;Ib.jsEditorCommands=rb;var gb=[{name:"[javascript] list errors and warnings",exec:function(Qc){var sc,Vc,Q,fa,Ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sa){if(1==Sa.nextAddress){sc=(Qc.markers||[]).filter(function(ec){ec=ec.type;return"js-undeclared-var"===ec||"js-syntax-error"===ec});if(!sc.length)return Ib.show("no warnings or errors"),Sa.return(!0);Vc=sc.map(function(ec){var Vb=ec.range;
return{isListItem:!0,string:"["+ec.type.split("-").slice(1).join(" ")+"] "+Qc.textInRange(Vb),value:Vb}});return Sa.yield(Qc.world().filterableListPrompt("jump to warning or error",Vc),2)}Q=Sa.yieldResult;fa=$jscomp.makeIterator(Q.selected);if(Ia=fa.next().value)Qc.saveMark(),Qc.selection=Ia,Qc.centerRow(Ia.start.row);return Sa.return(!0)})}},{name:"[javascript] inject import",exec:function(Qc,sc){sc=void 0===sc?{gotoImport:!1,insertImportAtCursor:!0}:sc;var Vc,Q,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){switch(Ia.nextAddress){case 1:return Ia.yield(Ib.promise.delay(0),
2);case 2:return Ia.yield(System.import("lively.ide/js/import-helper.js"),3);case 3:return Vc=Ia.yieldResult,Q=Vc.interactivelyInjectImportIntoText,Ia.yield(Q(Qc,sc),4);case 4:return(fa=Ia.yieldResult)||Qc.setStatusMessage("canceled"),Ia.return(fa)}})}},{name:"[javascript] fix undeclared variables",exec:function(Qc,sc){sc=void 0===sc?{ignore:[],autoApplyIfSingleChoice:!1,requester:Qc}:sc;var Vc,Q,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){if(1==Ia.nextAddress)return Ia.yield(System.import("lively.ide/js/import-helper.js"),
2);if(3!=Ia.nextAddress)return Vc=Ia.yieldResult,Q=Vc.interactivlyFixUndeclaredVariables,Ia.yield(Q(Qc,sc),3);fa=Ia.yieldResult;Qc.focus();return Ia.return(fa)})}},{name:"[javascript] remove unused imports",exec:function(Qc,sc){sc=void 0===sc?{query:!0}:sc;var Vc,Q,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){if(1==Ia.nextAddress)return Ia.yield(System.import("lively.ide/js/import-helper.js"),2);if(3!=Ia.nextAddress)return Vc=Ia.yieldResult,Q=Vc.cleanupUnusedImports,Ia.yield(Q(Qc,
sc),3);fa=Ia.yieldResult;Qc.setStatusMessage(fa);return Ia.return(!0)})}},{name:"[javascript] eslint report",exec:function(Qc){var sc,Vc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){if(1==Q.nextAddress)return Q.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);sc=Q.yieldResult;Vc=sc.default;try{return Q.return(Vc.reportOnMorph(Qc))}catch(fa){Qc.showError(fa)}Q.jumpToEnd()})}},{name:"[javascript] eslint preview fixes",exec:function(Qc){var sc,Vc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){if(1==
Q.nextAddress)return Q.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);sc=Q.yieldResult;Vc=sc.default;try{return Q.return(Vc.previewFixesOnMorph(Qc))}catch(fa){Qc.showError(fa)}Q.jumpToEnd()})}},{name:"[javascript] auto format code",handlesCount:!0,exec:function(Qc,sc,Vc){function Q(jb,Qd){Qd||(Qd=Ua(jb,{allowReturnOutsideFunction:!0}));var ab=Ib.string.lineRanges(jb),lb=jb.split("\n"),vb=[],Bd=new Ib.BaseVisitor,de=Bd.visitVariableDeclaration;Bd.visitVariableDeclaration=function(ye,
Hd,Zb){if(1<ye.declarations.length)for(var sa=Ib.string.findLineWithIndexInLineRanges(ab,ye.start),Aa=ye.declarations[0].start-ab[sa][0],Mb={},P=1;P<ye.declarations.length;Mb={$jscomp$loop$prop$actionType$2281:Mb.$jscomp$loop$prop$actionType$2281,$jscomp$loop$prop$arg$2282:Mb.$jscomp$loop$prop$arg$2282},P++){var wa=ye.declarations[P],Qa=Ib.string.findLineWithIndexInLineRanges(ab,wa.start);if(sa!==Qa){var Nb=lb[Qa].match(/\s*/)[0].length;Nb=Aa-Nb;0!==Nb&&(wa=Ib.string.findLineWithIndexInLineRanges(ab,
wa.end),Mb.$jscomp$loop$prop$actionType$2281=0<Nb?"insert":"delete",Mb.$jscomp$loop$prop$arg$2282=0<Nb?" ".repeat(Nb):-Nb,vb.push.apply(vb,$jscomp.arrayFromIterable(Ib.arr.range(Qa,wa).map(function(Gc){return function(Uc){return[Gc.$jscomp$loop$prop$actionType$2281,ab[Uc][0],Gc.$jscomp$loop$prop$arg$2282]}}(Mb)))))}}return de.call(Bd,ye,Hd,Zb)};Bd.accept(Qd,{},[]);for(Qd=vb.length;Qd--;){var Ee=$jscomp.makeIterator(vb[Qd]),Ze=Ee.next().value,Zc=Ee.next().value;Ee=Ee.next().value;"insert"===Ze?jb=
jb.slice(0,Zc)+Ee+jb.slice(Zc):"delete"===Ze&&(jb=jb.slice(0,Zc)+jb.slice(Zc+Ee))}return jb}var fa,Ia,Sa,ec,Vb,Ua,wc,oe,Md,id,Ta,rd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(jb){switch(jb.nextAddress){case 1:return fa=Vc?Vc:Math.floor(Qc.width/Qc.defaultCharExtent().width),sc=Object.assign({printWidth:fa,tabWidth:2,useTabs:!1,bracketSpacing:!1},sc),Ia=lively.modules.module,Sa=System.normalizeSync("prettier/standalone.js"),jb.yield(Ia(Sa).load({format:"global",instrument:!1}),2);
case 2:return ec=jb.yieldResult,jb.yield(Ia("lively.ast/lib/acorn-extension.js").load(),3);case 3:return jb.yield(Ia("lively.ast").load(),4);case 4:return Vb=jb.yieldResult,Ua=Vb.parse,jb.yield(Ia("lively.ast/lib/query.js").load(),5);case 5:return jb.yield(System.import("jsdiff",System.decanonicalize("lively.morphic")),6);case 6:return wc=jb.yieldResult,oe=Qc.selection.isEmpty()?Qc.documentRange:Qc.selection.range,Md=Qc.positionToIndex(oe.start),id=Qc.positionToIndex(oe.end),Ta=ec.format(Qc.textString,
Object.assign({},sc,{rangeStart:Md,rangeEnd:id,parser:function(Qd,ab,lb){return Ua(Qd,{allowReturnOutsideFunction:!0})}})),Qc.undoManager.group(),rd=wc.diffChars(Qc.textString,Ta),Qc.applyJsDiffPatch(rd),Qc.selection.text=Q(Qc.selection.text),Qc.undoManager.group(),jb.return(!0)}})}}];Ib.jsIdeCommands=gb;Ib.jsIdeCommands=gb;Ib.jsIdeCommands=gb;var ib=[{name:"selectDefinition",readOnly:!0,bindKey:"Alt-.",exec:function(Qc,sc){sc=Qc.pluginInvokeFirst("getNavigator");if(!sc)return!0;sc=sc.resolveIdentifierAt(Qc,
Qc.cursorPosition);if(!sc||!sc.id)return Ib.show("No symbol identifier selected"),!0;if(!sc.decl)return Ib.show("Cannot find declaration of "+sc.name),!0;Qc.saveMark();Qc.selection={start:Qc.indexToPosition(sc.decl.start),end:Qc.indexToPosition(sc.decl.end)};Qc.scrollCursorIntoView();return!0}},{name:"selectSymbolReferenceOrDeclarationNext",readOnly:!0,multiSelectAction:"single",exec:function(Qc){Qc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"next"})}},{name:"selectSymbolReferenceOrDeclarationPrev",
readOnly:!0,multiSelectAction:"single",exec:function(Qc){Qc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"prev"})}},{name:"selectSymbolReferenceOrDeclaration",doc:"Finds the name of the currently selected symbol and will use the JS ast to select references and declarations whose name matches the symbol in the current scope.",readOnly:!0,multiSelectAction:"single",exec:function(Qc,sc){sc=void 0===sc?{direction:null}:sc;var Vc=Qc.pluginInvokeFirst("getNavigator");if(!Vc)return!0;Vc=Vc.resolveIdentifierAt(Qc,
Qc.cursorPosition);if(!Vc||!Vc.refs)return Ib.show("No symbol identifier selected"),!0;var Q=Qc.selection;Vc=Vc.refs.map(function(Ia){var Sa=Ia.end;return Ib.Range.fromPositions(Ib.iToP(Qc,Ia.start),Ib.iToP(Qc,Sa))}).concat(Vc.decl?Ib.Range.fromPositions(Ib.iToP(Qc,Vc.decl.start),Ib.iToP(Qc,Vc.decl.end)):[]).sort(Ib.Range.compare);if(!Vc.length)return!0;var fa=Vc.map(String).indexOf(String(Q.range));if("next"===sc.direction||"prev"===sc.direction)-1===fa&&Vc.length?Vc=[Vc[0]]:(sc=fa+("next"===sc.direction?
1:-1),0>sc?sc=Vc.length-1:sc>=Vc.length&&(sc=0),Vc=[Vc[sc]]);Vc.forEach(function(Ia){var Sa=Q.selections.findIndex(function(Vb){return Vb.range.equals(Ia)}),ec=Q.selections.length-1;-1<Sa?Ib.arr.swap(Q.selections,Sa,ec):Q.addRange(Ia,!1)});Q.mergeSelections();return!0}}];Ib.astEditorCommands=ib;Ib.astEditorCommands=ib;Ib.astEditorCommands=ib;lively.modules&&!lively.FreezerRuntime&&lively.modules.module("lively.ide/js/editor-plugin.js").reload({reloadDeps:!1,resetEnv:!1});var Lb=lively.FreezerRuntime.recorderFor("lively.ide/js/mode.js");
Lb.expressionAllowed=function(Qc,sc,Vc){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(sc.lastType)||"quasi"==sc.lastType&&/\{\s*$/.test(Qc.string.slice(0,Qc.pos-(Vc||0)))};Lb.passIndent=Db;Lb.defineMode=ac;Lb.defineMIME=ic;Lb.registerHelper=gd;Lb.defaultConfig={indentUnit:2};Lb.defaultParserConfig={name:"javascript",statementIndent:2,jsonld:!1,json:!1,typescript:!1,wordCharacters:/[\w$\xa1-\uffff]/,globalVars:[],localVars:[],doubleIndentSwitch:null};Lb.defineMode("javascript",
function(Qc,sc){function Vc(Ub,zd,Ce){Dl=Ub;ok=Ce;return zd}function Q(Ub,zd){var Ce=Ub.next();if('"'==Ce||"'"==Ce)return zd.tokenize=fa(Ce),zd.tokenize(Ub,zd);if("."==Ce&&Ub.match(/^\d+(?:[eE][+\-]?\d+)?/))return Vc("number","number");if("."==Ce&&Ub.match(".."))return Vc("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(Ce))return Vc(Ce);if("="==Ce&&Ub.eat(">"))return Vc("=>","operator");if("0"==Ce&&Ub.eat(/x/i))return Ub.eatWhile(/[\da-f]/i),Vc("number","number");if("0"==Ce&&Ub.eat(/o/i))return Ub.eatWhile(/[0-7]/i),
Vc("number","number");if("0"==Ce&&Ub.eat(/b/i))return Ub.eatWhile(/[01]/i),Vc("number","number");if(/\d/.test(Ce))return Ub.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),Vc("number","number");if("/"==Ce){if(Ub.eat("*"))return zd.tokenize=Ia,Ia(Ub,zd);if(Ub.eat("/"))return Ub.skipToEnd(),Vc("comment","comment");if(Lb.expressionAllowed(Ub,zd,1)){a:for(var Ec=zd=!1;null!=(Ce=Ub.next());){if(!zd){if("/"==Ce&&!Ec)break a;"["==Ce?Ec=!0:Ec&&"]"==Ce&&(Ec=!1)}zd=!zd&&"\\"==Ce}Ub.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);
return Vc("regexp","string-2")}Ub.eatWhile(uk);return Vc("operator","operator",Ub.current())}if("`"==Ce)return zd.tokenize=Sa,Sa(Ub,zd);if("#"==Ce)return Ub.skipToEnd(),Vc("error","error");if(uk.test(Ce))return">"==Ce&&zd.lexical&&">"==zd.lexical.type||Ub.eatWhile(uk),Vc("operator","operator",Ub.current());if(em.test(Ce))return Ub.eatWhile(em),Ub=Ub.current(),(Ce=bh.propertyIsEnumerable(Ub)&&bh[Ub])&&"."!=zd.lastType?Vc(Ce.type,Ce.style,Ub):Vc("variable","variable",Ub)}function fa(Ub){return function(zd,
Ce){var Ec=!1,hd;if(qi&&"@"==zd.peek()&&zd.match(Cl))return Ce.tokenize=Q,Vc("jsonld-keyword","meta");for(;null!=(hd=zd.next())&&(hd!=Ub||Ec);)Ec=!Ec&&"\\"==hd;Ec||(Ce.tokenize=Q);return Vc("string","string")}}function Ia(Ub,zd){for(var Ce=!1,Ec;Ec=Ub.next();){if("/"==Ec&&Ce){zd.tokenize=Q;break}Ce="*"==Ec}return Vc("comment","comment")}function Sa(Ub,zd){for(var Ce=!1,Ec;null!=(Ec=Ub.next());){if(!Ce&&("`"==Ec||"$"==Ec&&Ub.eat("{"))){zd.tokenize=Q;break}Ce=!Ce&&"\\"==Ec}return Vc("quasi","string-2",
Ub.current())}function ec(Ub,zd){zd.fatArrowAt&&(zd.fatArrowAt=null);var Ce=Ub.string.indexOf("=>",Ub.start);if(!(0>Ce)){if(Nk){var Ec=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Ub.string.slice(Ub.start,Ce));Ec&&(Ce=Ec.index)}Ec=0;var hd=!1;for(--Ce;0<=Ce;--Ce){var ch=Ub.string.charAt(Ce),Nj="([{}])".indexOf(ch);if(0<=Nj&&3>Nj){if(!Ec){++Ce;break}if(0==--Ec){"("==ch&&(hd=!0);break}}else if(3<=Nj&&6>Nj)++Ec;else if(em.test(ch))hd=!0;else{if(/["'\/]/.test(ch))return;if(hd&&!Ec){++Ce;break}}}hd&&
!Ec&&(zd.fatArrowAt=Ce)}}function Vb(Ub,zd,Ce,Ec,hd,ch){this.indented=Ub;this.column=zd;this.type=Ce;this.prev=hd;this.info=ch;null!=Ec&&(this.align=Ec)}function Ua(){for(var Ub=arguments.length-1;0<=Ub;Ub--)Vf.cc.push(arguments[Ub])}function wc(){Ua.apply(null,arguments);return!0}function oe(Ub){function zd(Ec){for(;Ec;Ec=Ec.next)if(Ec.name==Ub)return!0;return!1}var Ce=Vf.state;Vf.marked="def";Ce.context?zd(Ce.localVars)||(Ce.localVars={name:Ub,next:Ce.localVars}):!zd(Ce.globalVars)&&sc.globalVars&&
(Ce.globalVars={name:Ub,next:Ce.globalVars})}function Md(){Vf.state.context={prev:Vf.state.context,vars:Vf.state.localVars};Vf.state.localVars=$m}function id(){Vf.state.localVars=Vf.state.context.vars;Vf.state.context=Vf.state.context.prev}function Ta(Ub,zd){var Ce=function(){var Ec=Vf.state,hd=Ec.indented;if("stat"==Ec.lexical.type)hd=Ec.lexical.indented;else for(var ch=Ec.lexical;ch&&")"==ch.type&&ch.align;ch=ch.prev)hd=ch.indented;Ec.lexical=new Vb(hd,Vf.stream.column(),Ub,null,Ec.lexical,zd)};
Ce.lex=!0;return Ce}function rd(){var Ub=Vf.state;Ub.lexical.prev&&(")"==Ub.lexical.type&&(Ub.indented=Ub.lexical.indented),Ub.lexical=Ub.lexical.prev)}function jb(Ub){function zd(Ce){return Ce==Ub?wc():";"==Ub?Ua():wc(zd)}return zd}function Qd(Ub,zd){return"var"==Ub?wc(Ta("vardef",zd.length),Tc,jb(";"),rd):"keyword a"==Ub?wc(Ta("form"),vb,Qd,rd):"keyword b"==Ub?wc(Ta("form"),Qd,rd):"{"==Ub?wc(Ta("}"),kf,rd):";"==Ub?wc():"if"==Ub?("else"==Vf.state.lexical.info&&Vf.state.cc[Vf.state.cc.length-1]==
rd&&Vf.state.cc.pop()(),wc(Ta("form"),vb,Qd,rd,Ha)):"function"==Ub?wc(zb):"for"==Ub?wc(Ta("form"),cb,Qd,rd):"variable"==Ub?Nk&&"type"==zd?(Vf.marked="keyword",wc(Ke,jb("operator"),Ke,jb(";"))):wc(Ta("stat"),wa):"switch"==Ub?wc(Ta("form"),vb,jb("{"),Ta("}","switch"),kf,rd,rd):"case"==Ub?wc(ab,jb(":")):"default"==Ub?wc(jb(":")):"catch"==Ub?wc(Ta("form"),Md,jb("("),Ic,jb(")"),Qd,rd,id):"class"==Ub?wc(Ta("form"),Ad,rd):"export"==Ub?wc(Ta("stat"),gf,rd):"import"==Ub?wc(Ta("stat"),Jh,rd):"module"==Ub?wc(Ta("form"),
Rf,jb("{"),Ta("}"),kf,rd,rd):"async"==Ub?wc(Qd):"@"==zd?wc(ab,Qd):Ua(Ta("stat"),ab,jb(";"),rd)}function ab(Ub){return Bd(Ub,!1)}function lb(Ub){return Bd(Ub,!0)}function vb(Ub){return"("!=Ub?Ua():wc(Ta(")"),ab,jb(")"),rd)}function Bd(Ub,zd){if(Vf.state.fatArrowAt==Vf.stream.start){var Ce=zd?sa:Zb;if("("==Ub)return wc(Md,Ta(")"),le(Rf,")"),rd,jb("=>"),Ce,id);if("variable"==Ub)return Ua(Md,Rf,jb("=>"),Ce,id)}Ce=zd?Zc:Ze;return sg.hasOwnProperty(Ub)?wc(Ce):"function"==Ub?wc(zb,Ce):"class"==Ub?wc(Ta("form"),
vc,rd):"keyword c"==Ub||"async"==Ub?wc(zd?Ee:de):"("==Ub?wc(Ta(")"),de,jb(")"),rd,Ce):"operator"==Ub||"spread"==Ub?wc(zd?lb:ab):"["==Ub?wc(Ta("]"),el,rd,Ce):"{"==Ub?Od(Nb,"}",null,Ce):"quasi"==Ub?Ua(ye,Ce):"new"==Ub?wc(Aa(zd)):wc()}function de(Ub){return Ub.match(/[;\}\)\],]/)?Ua():Ua(ab)}function Ee(Ub){return Ub.match(/[;\}\)\],]/)?Ua():Ua(lb)}function Ze(Ub,zd){return","==Ub?wc(ab):Zc(Ub,zd,!1)}function Zc(Ub,zd,Ce){var Ec=0==Ce?Ze:Zc,hd=0==Ce?ab:lb;if("=>"==Ub)return wc(Md,Ce?sa:Zb,id);if("operator"==
Ub)return/\+\+|--/.test(zd)?wc(Ec):"?"==zd?wc(ab,jb(":"),hd):wc(hd);if("quasi"==Ub)return Ua(ye,Ec);if(";"!=Ub){if("("==Ub)return Od(lb,")","call",Ec);if("."==Ub)return wc(Qa,Ec);if("["==Ub)return wc(Ta("]"),de,jb("]"),rd,Ec)}}function ye(Ub,zd){return"quasi"!=Ub?Ua():"${"!=zd.slice(zd.length-2)?wc(ye):wc(ab,Hd)}function Hd(Ub){if("}"==Ub)return Vf.marked="string-2",Vf.state.tokenize=Sa,wc(ye)}function Zb(Ub){ec(Vf.stream,Vf.state);return Ua("{"==Ub?Qd:ab)}function sa(Ub){ec(Vf.stream,Vf.state);return Ua("{"==
Ub?Qd:lb)}function Aa(Ub){return function(zd){return"."==zd?wc(Ub?P:Mb):Ua(Ub?lb:ab)}}function Mb(Ub,zd){if("target"==zd)return Vf.marked="keyword",wc(Ze)}function P(Ub,zd){if("target"==zd)return Vf.marked="keyword",wc(Zc)}function wa(Ub){return":"==Ub?wc(rd,Qd):Ua(Ze,jb(";"),rd)}function Qa(Ub){if("variable"==Ub)return Vf.marked="property",wc()}function Nb(Ub,zd){if("async"==Ub)return Vf.marked="property",wc(Nb);if("variable"==Ub||"keyword"==Vf.style)return Vf.marked="property","get"==zd||"set"==
zd?wc(Gc):wc(Uc);if("number"==Ub||"string"==Ub)return Vf.marked=qi?"property":Vf.style+" property",wc(Uc);if("jsonld-keyword"==Ub)return wc(Uc);if("modifier"==Ub)return wc(Nb);if("["==Ub)return wc(ab,jb("]"),Uc);if("spread"==Ub)return wc(ab);if(":"==Ub)return Ua(Uc)}function Gc(Ub){if("variable"!=Ub)return Ua(Uc);Vf.marked="property";return wc(zb)}function Uc(Ub){if(":"==Ub)return wc(lb);if("("==Ub)return Ua(zb)}function le(Ub,zd,Ce){function Ec(hd,ch){return(Ce?-1<Ce.indexOf(hd):","==hd)?(hd=Vf.state.lexical,
"call"==hd.info&&(hd.pos=(hd.pos||0)+1),wc(function(Nj,Zm){return Nj==zd||Zm==zd?Ua():Ua(Ub)},Ec)):hd==zd||ch==zd?wc():wc(jb(zd))}return function(hd,ch){return hd==zd||ch==zd?wc():Ua(Ub,Ec)}}function Od(Ub,zd,Ce){for(var Ec=3;Ec<arguments.length;Ec++)Vf.cc.push(arguments[Ec]);return wc(Ta(zd,Ce),le(Ub,zd),rd)}function kf(Ub){return"}"==Ub?wc():Ua(Qd,kf)}function ae(Ub,zd){if(Nk){if(":"==Ub)return wc(Ke);if("?"==zd)return wc(ae)}}function Ke(Ub){if("variable"==Ub)return Vf.marked="variable-3",wc(Qf);
if("string"==Ub||"number"==Ub||"atom"==Ub)return wc(Qf);if("{"==Ub)return wc(Ta("}"),le(Cf,"}",",;"),rd);if("("==Ub)return wc(le(rg,")"),$e)}function $e(Ub){if("=>"==Ub)return wc(Ke)}function Cf(Ub,zd){if("variable"==Ub||"keyword"==Vf.style)return Vf.marked="property",wc(Cf);if("?"==zd)return wc(Cf);if(":"==Ub)return wc(Ke)}function rg(Ub){if("variable"==Ub)return wc(rg);if(":"==Ub)return wc(Ke)}function Qf(Ub,zd){if("<"==zd)return wc(Ta(">"),le(Ke,">"),rd,Qf);if("|"==zd||"."==Ub)return wc(Ke);if("["==
Ub)return wc(jb("]"),Qf);if("extends"==zd)return wc(Ke)}function Tc(){return Ua(Rf,ae,Gg,rf)}function Rf(Ub,zd){if("modifier"==Ub)return wc(Rf);if("variable"==Ub)return oe(zd),wc();if("spread"==Ub)return wc(Rf);if("["==Ub)return Od(Rf,"]");if("{"==Ub)return Od(Fg,"}")}function Fg(Ub,zd){if("variable"==Ub&&!Vf.stream.match(/^\s*:/,!1))return oe(zd),wc(Gg);"variable"==Ub&&(Vf.marked="property");return"spread"==Ub?wc(Rf):"}"==Ub?Ua():wc(jb(":"),Rf,Gg)}function Gg(Ub,zd){if("="==zd)return wc(lb)}function rf(Ub){if(","==
Ub)return wc(Tc)}function Ha(Ub,zd){if("keyword b"==Ub&&"else"==zd)return wc(Ta("form","else"),Qd,rd)}function cb(Ub){if("("==Ub)return wc(Ta(")"),Hb,jb(")"),rd)}function Hb(Ub){return"var"==Ub?wc(Tc,jb(";"),Ja):";"==Ub?wc(Ja):"variable"==Ub?wc(ba):Ua(ab,jb(";"),Ja)}function ba(Ub,zd){return"in"==zd||"of"==zd?(Vf.marked="keyword",wc(ab)):wc(Ze,Ja)}function Ja(Ub,zd){return";"==Ub?wc(nb):"in"==zd||"of"==zd?(Vf.marked="keyword",wc(ab)):Ua(ab,jb(";"),nb)}function nb(Ub){")"!=Ub&&wc(ab)}function zb(Ub,
zd){if("*"==zd)return Vf.marked="keyword",wc(zb);if("variable"==Ub)return oe(zd),wc(zb);if("("==Ub)return wc(Md,Ta(")"),le(Ic,")"),rd,ae,Qd,id);if(Nk&&"<"==zd)return wc(Ta(">"),le(Ke,">"),rd,zb)}function Ic(Ub){return"spread"==Ub?wc(Ic):Ua(Rf,ae,Gg)}function vc(Ub,zd){return"variable"==Ub?Ad(Ub,zd):wd(Ub,zd)}function Ad(Ub,zd){if("variable"==Ub)return oe(zd),wc(wd)}function wd(Ub,zd){if("<"==zd)return wc(Ta(">"),le(Ke,">"),rd,wd);if("extends"==zd||"implements"==zd||Nk&&","==Ub)return wc(Nk?Ke:ab,
wd);if("{"==Ub)return wc(Ta("}"),yd,rd)}function yd(Ub,zd){if("variable"==Ub||"keyword"==Vf.style){if(("async"==zd||"static"==zd||"get"==zd||"set"==zd||Nk&&("public"==zd||"private"==zd||"protected"==zd||"readonly"==zd||"abstract"==zd))&&Vf.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return Vf.marked="keyword",wc(yd);Vf.marked="property";return wc(Nk?He:zb,yd)}if("["==Ub)return wc(ab,jb("]"),Nk?He:zb,yd);if("*"==zd)return Vf.marked="keyword",wc(yd);if(";"==Ub)return wc(yd);if("}"==Ub)return wc();if("@"==
zd)return wc(ab,yd)}function He(Ub,zd){return"?"==zd?wc(He):":"==Ub?wc(Ke,Gg):"="==zd?wc(lb):Ua(zb)}function gf(Ub,zd){return"*"==zd?(Vf.marked="keyword",wc(Kh,jb(";"))):"default"==zd?(Vf.marked="keyword",wc(ab,jb(";"))):"{"==Ub?wc(le(ng,"}"),Kh,jb(";")):Ua(Qd)}function ng(Ub,zd){if("as"==zd)return Vf.marked="keyword",wc(jb("variable"));if("variable"==Ub)return Ua(lb,ng)}function Jh(Ub){return"string"==Ub?wc():Ua(Mi,Th,Kh)}function Mi(Ub,zd){if("{"==Ub)return Od(Mi,"}");"variable"==Ub&&oe(zd);"*"==
zd&&(Vf.marked="keyword");return wc(Mj)}function Th(Ub){if(","==Ub)return wc(Mi,Th)}function Mj(Ub,zd){if("as"==zd)return Vf.marked="keyword",wc(Mi)}function Kh(Ub,zd){if("from"==zd)return Vf.marked="keyword",wc(ab)}function el(Ub){return"]"==Ub?wc():Ua(le(lb,"]"))}Qc=Object.assign({},Lb.defaultConfig,{},Qc);sc=Object.assign({},Lb.defaultParserConfig,{},sc);var Lf=Qc.indentUnit,Wj=sc.statementIndent,qi=sc.jsonld,Je=sc.json||qi,Nk=sc.typescript,em=sc.wordCharacters||/[\w$\xa1-\uffff]/,bh=function(){function Ub(Zm){return{type:Zm,
style:"keyword"}}var zd=Ub("keyword a"),Ce=Ub("keyword b"),Ec=Ub("keyword c"),hd=Ub("operator"),ch={type:"atom",style:"atom"};zd={"if":Ub("if"),"while":zd,"with":zd,"else":Ce,"do":Ce,"try":Ce,"finally":Ce,"return":Ec,"break":Ec,"continue":Ec,"new":Ub("new"),"delete":Ec,"throw":Ec,"debugger":Ec,"var":Ub("var"),"const":Ub("var"),let:Ub("var"),"function":Ub("function"),"catch":Ub("catch"),"for":Ub("for"),"switch":Ub("switch"),"case":Ub("case"),"default":Ub("default"),"in":hd,"typeof":hd,"instanceof":hd,
"true":ch,"false":ch,"null":ch,undefined:ch,NaN:ch,Infinity:ch,"this":Ub("this"),"class":Ub("class"),"super":Ub("atom"),yield:Ec,"export":Ub("export"),"import":Ub("import"),"extends":Ec,await:Ec,async:Ub("async")};if(Nk){Ce={type:"variable",style:"variable-3"};Ec={"interface":Ub("class"),"implements":Ec,namespace:Ec,module:Ub("module"),"enum":Ub("module"),"public":Ub("modifier"),"private":Ub("modifier"),"protected":Ub("modifier"),"abstract":Ub("modifier"),as:hd,string:Ce,number:Ce,"boolean":Ce,any:Ce};
for(var Nj in Ec)zd[Nj]=Ec[Nj]}return zd}(),uk=/[+\-*&%=<>!?|~^@]/,Cl=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Dl,ok,sg={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Vf={state:null,column:null,marked:null,cc:null},$m={name:"this",next:{name:"arguments"}};rd.lex=!0;return{startState:function(Ub){Ub={tokenize:Q,lastType:"sof",cc:[],lexical:new Vb((Ub||0)-Lf,0,"block",!1),localVars:sc.localVars,context:sc.localVars&&{vars:sc.localVars},
indented:Ub||0};sc.globalVars&&"object"==typeof sc.globalVars&&(Ub.globalVars=sc.globalVars);return Ub},token:function(Ub,zd){Ub.sol()&&(zd.lexical.hasOwnProperty("align")||(zd.lexical.align=!1),zd.indented=Ub.indentation(),ec(Ub,zd));if(zd.tokenize!=Ia&&Ub.eatSpace())return null;var Ce=zd.tokenize(Ub,zd);if("comment"==Dl)return Ce;zd.lastType="operator"!=Dl||"++"!=ok&&"--"!=ok?Dl:"incdec";a:{var Ec=Dl,hd=ok,ch=zd.cc;Vf.state=zd;Vf.stream=Ub;Vf.marked=null;Vf.cc=ch;Vf.style=Ce;zd.lexical.hasOwnProperty("align")||
(zd.lexical.align=!0);for(Ub=0;;){if(1E5<Ub++)throw Error("endless");if((ch.length?ch.pop():Je?ab:Qd)(Ec,hd)){for(;ch.length&&ch[ch.length-1].lex;)ch.pop()();if(Vf.marked){Ce=Vf.marked;break a}if(Ec="variable"==Ec)b:{for(Ec=zd.localVars;Ec;Ec=Ec.next)if(Ec.name==hd){Ec=!0;break b}for(zd=zd.context;zd;zd=zd.prev)for(Ec=zd.vars;Ec;Ec=Ec.next)if(Ec.name==hd){Ec=!0;break b}Ec=void 0}if(Ec){Ce="variable-2";break a}break a}}}return Ce},indent:function(Ub,zd){if(Ub.tokenize==Ia)return Lb.passIndent;if(Ub.tokenize!=
Q)return 0;var Ce=zd&&zd.charAt(0),Ec=Ub.lexical,hd;if(!/^\s*else\b/.test(zd))for(var ch=Ub.cc.length-1;0<=ch;--ch){var Nj=Ub.cc[ch];if(Nj==rd)Ec=Ec.prev;else if(Nj!=Ha)break}for(;!("stat"!=Ec.type&&"form"!=Ec.type||"}"!=Ce&&(!(hd=Ub.cc[Ub.cc.length-1])||hd!=Ze&&hd!=Zc||/^[,\.=+\-*:?[\(]/.test(zd)));)Ec=Ec.prev;Wj&&")"==Ec.type&&"stat"==Ec.prev.type&&(Ec=Ec.prev);hd=Ec.type;ch=Ce==hd;return(Nj=Ub._string)&&Nj.trimLeft().startsWith("?")&&":"===Ce?Nj.indexOf("?"):Nj&&":"===Ub.lastType&&"}"!==Ec.type?
Nj.match(/^\s*/)[0].length:"vardef"==hd?(zd=Ec.indented+Ec.info+2+Ub.localVars.name.length,"?"===Ce||":"===Ce||"|"===Ce||"&"===Ce?zd:","==Ub.lastType?Ec.indented+Ec.info+1:"operator"==Ub.lastType?zd+3:Ec.indented):"form"==hd&&"{"==Ce?Ec.indented:"form"==hd?Ec.indented+Lf:"stat"==hd?(Ce=Ec.indented,Ub="operator"==Ub.lastType||","==Ub.lastType||uk.test(zd.charAt(0))||/[,.]/.test(zd.charAt(0)),Ce+(Ub?Wj||Lf:0)):"switch"!=Ec.info||ch||0==sc.doubleIndentSwitch?Ec.align?Ec.column+(ch?0:1):Ec.indented+(ch?
0:Lf):Ec.indented+(/^(?:case|default)\b/.test(zd)?Lf:2*Lf)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Je?null:"/*",blockCommentEnd:Je?null:"*/",lineComment:Je?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Je?"json":"javascript",jsonldMode:qi,jsonMode:Je,expressionAllowed:Lb.expressionAllowed,skipExpression:function(Ub){var zd=Ub.cc[Ub.cc.length-1];zd!=ab&&zd!=lb||Ub.cc.pop()}}});Lb.registerHelper("wordChars","javascript",/[\w$]/);Lb.defineMIME("text/javascript",
"javascript");Lb.defineMIME("text/ecmascript","javascript");Lb.defineMIME("application/javascript","javascript");Lb.defineMIME("application/x-javascript","javascript");Lb.defineMIME("application/ecmascript","javascript");Lb.defineMIME("application/json",{name:"javascript",json:!0});Lb.defineMIME("application/x-json",{name:"javascript",json:!0});Lb.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});Lb.defineMIME("text/typescript",{name:"javascript",typescript:!0});Lb.defineMIME("application/typescript",
{name:"javascript",typescript:!0});var tc=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js");tc.string=jd;tc.JavaScriptChecker=$b;tc.JavaScriptNavigator=cd;tc.completers=Ga;tc.jsSnippets=Kb;tc.jsIdeCommands=gb;tc.jsEditorCommands=rb;tc.astEditorCommands=ib;tc.CodeMirrorEnabledEditorPlugin=fe;tc.Snippet=xc;tc.parser=md;tc.localInterface=Yb;tc.systemInterfaceNamed=qc;tc.serverInterfaceFor=Ob;tc.l2lInterfaceFor=Hc;$b=function(Qc){var sc=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js"),
Vc=sc.hasOwnProperty("JavaScriptEditorPlugin")&&"function"===typeof sc.JavaScriptEditorPlugin?sc.JavaScriptEditorPlugin:sc.JavaScriptEditorPlugin=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ab(Vc,Qc,[{key:Symbol.for("lively-instance-initialize"),value:function(){Ab._get(Object.getPrototypeOf(Vc.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.checker=new tc.JavaScriptChecker;this.evalEnvironment=
{format:"esm",targetModule:null,context:null}}},{key:"isJSEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"js"}},{key:"longName",get:function(){return"javascript"}},{key:"attach",value:function(Q){Ab._get(Object.getPrototypeOf(Vc.prototype),"attach",this).call(this,Q);this.evalEnvironment=Object.assign({},this.evalEnvironment,{context:Q})}},{key:"detach",value:function(Q){this.checker.uninstall(this.textMorph);Ab._get(Object.getPrototypeOf(Vc.prototype),"detach",this).call(this,
Q)}},{key:"getNavigator",value:function(){return new tc.JavaScriptNavigator}},{key:"getCompleters",value:function(Q){return tc.completers.concat(Q)}},{key:"getCommands",value:function(Q){return[].concat($jscomp.arrayFromIterable(Ab._get(Object.getPrototypeOf(Vc.prototype),"getCommands",this).call(this,Q)),$jscomp.arrayFromIterable(tc.jsIdeCommands),$jscomp.arrayFromIterable(tc.jsEditorCommands),$jscomp.arrayFromIterable(tc.astEditorCommands))}},{key:"getKeyBindings",value:function(Q){return[].concat($jscomp.arrayFromIterable(Q),
[{keys:"Shift-Tab",command:{command:"[javascript] auto format code"}},{keys:"Ctrl-C E",command:"[javascript] list errors and warnings"},{keys:{mac:"Meta-Shift-L L I N T R",win:"Ctrl-Shift-L L I N T R"},command:"[javascript] eslint report"},{keys:{mac:"Meta-Shift-L L I N T P",win:"Ctrl-Shift-L L I N T P"},command:"[javascript] eslint preview fixes"},{keys:{mac:"Meta-Shift-L L I N T F",win:"Ctrl-Shift-L L I N T F"},command:"[javascript] eslint fix"},{keys:{mac:"Meta-Shift-L M O D E",win:"Ctrl-Shift-L M O D E"},
command:"change editor mode"},{keys:"Ctrl-C I",command:"[javascript] inject import"},{keys:"Ctrl-C C I",command:"[javascript] fix undeclared variables"}])}},{key:"getMenuItems",value:function(Q){var fa=this,Ia,Sa,ec,Vb,Ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wc){Ia=fa.textMorph;Sa=[{command:"doit",target:Ia,showKeyShortcuts:!0},{command:"inspectit",target:Ia,showKeyShortcuts:!0},{command:"printit",target:Ia,showKeyShortcuts:!0},{command:"print inspectit",alias:"print inspect",
target:Ia,showKeyShortcuts:!0},{command:"eval all",target:Ia,showKeyShortcuts:!0},{command:"text completion",alias:"code completion",target:Ia,showKeyShortcuts:!0},{command:"[javascript] list errors and warnings",alias:"list errors and warnings",target:Ia,showKeyShortcuts:!0},{isDivider:!0}];fa.evalEnvironment.targetModule&&Sa.push({command:"[javascript] inject import",alias:"add import",target:Ia},{command:"[javascript] fix undeclared variables",alias:"fix undeclared variables",target:Ia},{command:"[javascript] remove unused imports",
alias:"remove unused imports",target:Ia});ec=fa.getNavigator();(Vb=ec.resolveIdentifierAt(Ia,Ia.cursorPosition))&&Sa.push({command:"selectDefinition",alias:'jump to definition of "'+Vb.name+'"',target:Ia},{command:"selectSymbolReferenceOrDeclaration",alias:'select all occurrences of "'+Vb.name+'"',target:Ia});(Ua=Ia.selection.text.trim())&&Sa.push({command:"open code search",alias:'code search for "'+tc.string.truncate(Ua,30)+'"',target:Ia.world(),args:{input:Ua,backend:fa.backend()}});Sa.push({isDivider:!0});
return wc.return(Sa.concat(Q))})}},{key:"getSnippets",value:function(){return tc.jsSnippets.map(function(Q){var fa=$jscomp.makeIterator(Q);Q=fa.next().value;fa=fa.next().value;return new tc.Snippet({trigger:Q,expansion:fa})})}},{key:"sanatizedJsEnv",value:function(Q){Q=Object.assign({},this.evalEnvironment,{},Q);Q.format||(Q.formatd="esm");Q.context||(Q.context=this.textMorph);Q.sourceURL||(Q.sourceURL=Q.targetModule+"_doit_"+Date.now());Q.systemInterface||(Q.systemInterface=tc.localInterface);return Q}},
{key:"backend",value:function(Q){Q=this.sanatizedJsEnv(Q);return Q.remote?Q.remote:"local"}},{key:"systemInterface",value:function(Q){return this.sanatizedJsEnv(Q).systemInterface||tc.localInterface}},{key:"setSystemInterface",value:function(Q){return this.evalEnvironment.systemInterface=Q}},{key:"setSystemInterfaceNamed",value:function(Q){return this.setSystemInterface(tc.systemInterfaceNamed(Q))}},{key:"runEval",value:function(Q,fa){fa=this.sanatizedJsEnv(fa);return this.systemInterface(fa).runEval(Q,
fa)}},{key:"parser",get:function(){return tc.parser}},{key:"parse",value:function(Q){Q=void 0===Q?null:Q;if(this._ast&&this._ast._astType===Q)return this._ast;var fa=this.parser,Ia=this.textMorph.textString;if(!fa)return null;var Sa={withComments:!0,allowReturnOutsideFunction:!0};Q&&(Sa.type=Q);if(Ia.startsWith("#!")){var ec=Ia.indexOf("\n");Ia=" ".repeat(ec)+Ia.slice(ec)}fa=fa.fuzzyParse(Ia,Sa);fa._astType=Q;return this._ast=fa}},{key:"undeclaredVariables",value:function(Q){var fa=this.parser,Ia=
this.evalEnvironment.knownGlobals||[];Q=this.parse(void 0===Q?null:Q);return fa&&Q?fa.query.findGlobalVarRefs(Q,{jslintGlobalComment:!0}).filter(function(Sa){return!Ia.includes(Sa.name)}):[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptEditorPlugin"}}],sc,{pathInPackage:function(){return"js/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:662,end:6694})}(tc.CodeMirrorEnabledEditorPlugin);$b=tc.JavaScriptEditorPlugin;Da("default",$b);tc.default=$b}}});System.register("10",[],function(){return{execute:function(){lively.FreezerRuntime.recorderFor("lively.shell/index.js")}}});