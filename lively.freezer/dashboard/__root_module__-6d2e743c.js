System.register(["kld-intersections"],function(Ma,rb){var Db;return{setters:[function(hc){Db=hc.default}],execute:function(){function hc(g,c){return Array.isArray(g)?g.reduce(function(h,f){return hc(f,h)},c):"string"===typeof g?c.filter(function(h){return h.path()!==g&&h.name()!==g}):g instanceof RegExp?c.filter(function(h){return!g.test(h.path())&&!g.test(h.name())}):"function"===typeof g?c.filter(function(h){return!g(h)}):c}function Kb(g){g=$jscomp.makeIterator(g.split("?"));g.next();var c=
g.next().value;g={};if(!c)return g;if(c=c.split("&"))for(var h=0;h<c.length;h++){var f=c[h].split("="),m=f[0],n=!0;if(1<f.length)if(n=decodeURIComponent(f.slice(1).join("=")),"undefined"===n)n=void 0;else if(n.match(/^(true|false|null|[0-9"[{].*)$/))try{n=JSON.parse(n)}catch(a){"["===n[0]&&(n=n.slice(1,-1).split(","))}g[m]=n}return g}function id(g){return Object.keys(g).map(function(c){return c+"="+encodeURIComponent(String(g[c]))}).join("&")}function Zc(g){var c=g.replace(Ef.pathDoubleSlashRe,"$1/");
c=c.replace(Ef.pathDotRe,"/");do g=c,c=g.replace(Ef.pathDoubleDotRe,"");while(c!=g);return c}function yd(g,c){var h=g.match(Ef.urlRe),f=c.match(Ef.urlRe),m=!0;if(h&&!f||!h&&f)m=!1;if(h&&f){var n=h[1];var a=h[2];var d=f[1];var k=f[2];n!==d?m=!1:a!==k?m=!1:(g=h[3],c=f[3])}if(!m)throw Error("[relativePathBetween] incompatible paths: "+g+" vs. "+c);g=Ef.withRelativePartsResolved(g);c=Ef.withRelativePartsResolved(c);if(g==c)return"";h=Ef._relativePathBetween_checkPathes(c,g);if(!h)throw Error("pathname differs in relativePathFrom "+
g+" vs "+c);return h}function Kc(g,c){return Ef.withRelativePartsResolved(g.replace(Ef.slashEndRe,"")+"/"+c.replace(Ef.slashStartRe,""))}function sc(g){return g.startsWith("/")?g.replace(Ef.slashEndRe,"").split("/").slice(0,-1).join("/")+"/":""}function bd(g){var c=[];for(g=Ef.parent(g);g&&(c.unshift(g),g=Ef.parent(g),"/"!==g););return c}function hd(g,c){if(!g)throw Error("lively.resource resource constructor: expects url but got "+g);if(g.isResource)return g;g=String(g);for(var h=0;h<Ef.extensions.length;h++)if(Ef.extensions[h].matches(g))return new Ef.extensions[h].resourceClass(g,
c);throw Error("Cannot find resource type for url "+g);}function se(g,c,h){var f,m,n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:return f=hd(g,h).asDirectory(),d.yield(f.ensureExistance(),2);case 2:n=d.forIn(c);case 3:if(null==(m=n.getNext())){d.jumpTo(5);break}if(!c.hasOwnProperty(m)){d.jumpTo(3);break}a=f.join(m);return"object"===typeof c[m]?d.yield(se(a,c[m],h),9):d.yield(a.write(c[m]),8);case 8:d.jumpTo(7);break;case 9:case 7:d.jumpTo(3);break;
case 5:return d.return(f)}})}function xe(g){var c=g.name;Ef.extensions=Ef.extensions.filter(function(h){return h.name!==c}).concat(g)}function ne(g){var c="string"===typeof g?g:g.name;Ef.extensions=Ef.extensions.filter(function(h){return h.name!==c})}function Rc(g,c,h){h=h||0;var f=[];if(g<=c)for(0>=h&&(h=-h||1);g<=c;g+=h)f.push(g);else for(0<=h&&(h=-h||-1);g>=c;g+=h)f.push(g);return f}function Pd(g,c){for(var h=Array(g);0<g;)h[--g]=c;return h}function Hb(g,c){for(var h=Array(g);0<g;)h[--g]=c(g);
return h}function Gc(g,c,h){for(var f=[],m=0;m<g.length;m++){var n=g[m];c.call(h,n)&&f.push(n)}return f}function ud(g,c,h,f){f=void 0===f?!1:f;if(g&&Sb.isArray(g)){for(var m=0,n=g.length-1;m<=n;){var a=m+Math.floor((n-m)/2),d=h?h(g[a]):g[a];if(d===c)return g[a];d>c?n=a-1:m=a+1}if(f){if(!g[m])return g[n];if(!g[n])return g[m];f=h?h(g[m]):g[m];h=h?h(g[n]):g[n];return 0>Math.abs(f-c)-Math.abs(h-c)?g[m]:g[n]}}}function Vc(g,c){var h;g.find(function(f,m){return h=c(f,m)});return h}function Id(g,c){return g.filter(function(h){return!!h[c]})}
function ie(g,c,h){"string"===typeof c&&(c=new RegExp(c,"i"));return Sb.filter(g,Sb.filter.test.bind(c))}function Fb(g,c){return Sb.filter(g,function(h,f){return!!c[f]})}function Ac(g,c,h){return Sb.filter(g,function(f,m){return!c.call(h,f,m)})}function $c(g,c){return Sb.filter(g,function(h){return!h[c]})}function Bc(g,c){return Sb.filter(g,function(h){return h!==c})}function vd(g,c){return Sb.filter(g,function(h){return-1===c.indexOf(h)})}function pb(g,c){if(!g.length)return g;var h=[g[0]];if(c)for(c=
1;c<g.length;c++){var f=g[c];f!==h[h.length]&&h.push(f)}else for(c=1;c<g.length;c++)f=g[c],-1===h.indexOf(f)&&h.push(f);return h}function lb(g,c,h){for(var f=g.slice(),m=f.length;m--;)for(var n=g[m],a=m+1;a<f.length;a++)c.call(h,n,f[a])&&f.splice(a--,1);return f}function Zb(g,c){for(var h={},f=[],m=0;m<g.length;m++){var n=g[m];h[n[c]]||(h[n[c]]=!0,f.push(n))}return f}function Mb(g){return Sb.filter(g,Boolean)}function ub(g){for(var c=0,h=0,f=g.length;c<f;)g.hasOwnProperty(c)&&(g[h++]=g[c]),c++;for(;h++<
f;)g.pop();return g}function rc(g,c,h){return g.forEach(c,h)}function Ua(){var g=Array.from(arguments),c=g.shift(),h="function"===typeof Sb.last(g)?g.pop():function(m){return m},f=[c].concat(g).map(function(m){return Array.from(m)});return c.map(function(m,n){return h(Sb.pluck(f,n),n)})}function Lb(g,c){if("number"===typeof c){if(0>=c)return g;c--}return g.reduce(function(h,f){return h.concat(Array.isArray(f)?Lb(f,c):[f])},[])}function mb(g,c,h){for(var f=[],m=0;m<g.length;m++)f.push.apply(f,c.call(h,
g[m],m));return f}function Gb(g,c){return g.reduce(function(h,f){0<h.length&&h.push(c);h.push(f);return h},[])}function vc(g,c){return Sb.interpose(g,c)}function Lc(g,c,h){return g.map(c,h)}function cc(g,c,h,f,m,n,a,d){return g.map(function(k){return k[c](h,f,m,n,a,d)})}function Vb(g,c){return g.map(function(h){return h[c]})}function Ub(g,c,h,f){return g.reduce(c,h,f)}function Ga(g,c,h,f){return g.reduceRight(c,h,f)}function jb(g,c,h){return g.some(c,h)}function X(g,c,h){return g.every(c,h)}function ha(g,
c){var h=g.length;if(!c||h!==c.length)return!1;for(var f=0;f<h;f++){if(g[f]&&c[f]&&g[f].equals&&c[f].equals)if(g[f].equals(c[f]))continue;else return!1;if(g[f]!=c[f])return!1}return!0}function Fa(g,c){var h=g.length;if(!c||h!==c.length)return!1;for(var f=0;f<h;f++)if(!Sb.objectEquals(g[f],c[f]))return!1;return!0}function Ja(g,c){if(c)for(c=1;c<g.length;c++){if(g[c-1]<g[c])return!1}else for(c=1;c<g.length;c++)if(g[c-1]>g[c])return!1;return!0}function Ca(g,c){return g.sort(c)}function ra(g,c,h){return Sb.pluck(g.map(function(f,
m){return{value:f,criteria:c.call(h,f,m)}}).sort(function(f,m){f=f.criteria;m=m.criteria;return f<m?-1:f>m?1:0}),"value")}function tb(g,c){return Sb.sortBy(g,function(h){return h[c]})}function Na(g){return g.reverse()}function lc(g){return g.slice().reverse()}function kd(g,c,h){h=h||String;return g.map(function(f){return h(f).match(c)})}function Tb(g){return g[0]}function md(g){return g[g.length-1]}function wb(g,c){return Sb.filter(Sb.uniq(g),function(h){return-1<c.indexOf(h)})}function je(g,c){g=
g.slice();for(var h=0;h<c.length;h++){var f=c[h];-1===g.indexOf(f)&&g.push(f)}return g}function bf(g,c,h){g.splice(h,0,c)}function Wc(g,c){g.splice(c,1)}function xb(g,c){var h=g.indexOf(c);0<=h&&Sb.removeAt(g,h);return c}function ze(g,c){g.push.apply(g,c);return g}function yb(g,c,h){g.splice.apply(g,[h,0].concat(c))}function nb(g,c){g.includes(c)||g.push(c)}function Ha(g,c,h){g.splice(h,1,c)}function R(g){g.length=0;return g}function xa(g,c){for(var h=0;h<g.length;h++)if(!c.includes(g[h]))return!1;
return!0}function $a(g,c,h,f){h=h||Sb.NullFunction;f=f||Sb.GLOBAL;c=c||function(m,n,a){n.call(f,m,a)};return g.reduceRight(function(m,n,a){return function(){c.call(f,m,n,a)}},h)()}function Ab(g,c,h,f,m,n){f=f||function(){};return g.clone().reverse().reduce(function(a,d,k){return function(){c.call(m||Sb.GLOBAL,d,k);n&&0!==k%n?a():a.delay(h)}},f)()}function bc(){var g=Array.from(arguments),c=g.shift(),h=c.length,f=!1;if(1===g.length){var m=g[0].progressBar;var n=g[0].iterator;var a=g[0].labelFunction;
var d=g[0].whenDone;var k=g[0].context}else m=g[0],n=g[1],a=g[2],d=g[3],k=g[4];k||(k="undefined"!==typeof window?window:global);a||(a=function(b){return b});m||(f=!0,m=(g=("undefined"!==typeof window?window:global).lively&&lively.morphic&&lively.morphic.World.current())?g.addProgressBar():{value:null,label:null,remove:function(){}});m.value=0;c.reduceRight(function(b,e,l){return function(){try{m.value=l/h,a&&(m.label=a.call(k,e,l)),n.call(k,e,l)}catch(p){console.error("Error in forEachShowingProgress at %s (%s)\n%s\n%s",
l,e,p,p.stack)}Sb.delay(b,0)}},function(){m.value=1;f&&function(){m.remove()}.delay(0);d&&d.call(k)})();return c}function Ec(g,c,h){0>c&&(c=g.length+c);0>h&&(h=g.length+h);var f=g[c];g[c]=g[h];g[h]=f;return g}function pc(g,c){c=c||1;return g.slice(c).concat(g.slice(0,c))}function wd(g,c,h){return Sb.Group.fromArray(g,c,h)}function xd(g,c){return Sb.groupBy(g,function(h){return h[c]})}function Se(g,c,h){c=c||function(n){return n};var f=[],m=[];g.forEach(function(n,a){(c.call(h,n,a)?f:m).push(n)});
return[f,m]}function v(g,c,h){function f(n,a){if(!a.length)return[n,[]];var d=a[0];a=a.slice(1);var k=n.concat([d]);if(c.call(h,k))return f(k,a);n=f(n,a);return[n[0],[d].concat(n[1])]}function m(n,a){if(!a.length)return n;a=f([],a);if(!a[0].length)throw Error("Batchify constrained does not ensure consumption of at least one item per batch!");return m(n.concat([a[0]]),a[1])}return m([],g)}function Ie(g,c){c=c||1;return Sb.range(0,Math.ceil(g.length/c)-1).map(function(h){return g.slice(h*c,h*c+c)},
g)}function cf(g,c){for(var h=g.map(function(a,d){return a[c[d]]}),f=c.slice(),m=g.length;m--;0<=m){var n=f[m]+1;if(g[m][n]){f[m]=n;break}else if(0===m){f=void 0;break}else f[m]=0}return[h,f]}function df(g){for(var c=g.reduce(function(n,a){return n*a.length},1),h=g.map(function(n){return 0}),f=Array(c),m=0;m<c;m++)h=Sb.combinationsPick(g,h),f[m]=h[0],h=h[1];return f}function Ze(g,c){return g.slice(0,c)}function ke(g,c){return g.slice(c)}function Ke(g,c,h){for(var f=0;f<g.length&&c.call(h,g[f],f);f++);
return g.slice(0,f)}function yf(g,c,h){for(var f=0;f<g.length&&c.call(h,g[f],f);f++);return g.slice(f)}function wf(g){for(var c=Sb.range(0,g.length-1),h=Array(g.length),f=0;f<g.length;f++){var m=c.splice(Math.round(Math.random()*(c.length-1)),1);h[m]=g[f]}return h}function ug(g,c,h){c=c||function(m){return m};var f;g.reduce(function(m,n,a){a=c.call(h,n,a);if("number"!==typeof a||a<=m)return m;f=n;return a},-Infinity);return f}function Zd(g,c,h){c=c||function(f){return f};return Sb.max(g,function(f,
m){return-c.call(h,f,m)})}function Hc(g){for(var c=0,h=0;h<g.length;h++)c+=g[h];return c}function dh(g,c){return g.reduce(function(h,f){return f===c?h+1:h},0)}function ed(g){return g.length}function pg(g,c){if("undefined"===typeof c||"number"===typeof c){var h=c||Math.ceil(Math.log(g.length)/Math.log(2)+1),f=Math.ceil(Math.round(g.length/h));return Sb.range(0,h-1).map(function(m){return g.slice(m*f,(m+1)*f)})}if(c instanceof Array)return g.reduce(function(m,n){if(n<c[1])return m[0].push(n),m;for(var a=
1;a<c.length;a++)if(n>=c[a]&&(!c[a+1]||n<=c[a+1]))return m[a].push(n),m;throw Error("Histogram creation: Cannot group data "+n+" into thresholds "+c);},Sb.range(1,c.length).map(function(){return[]}))}function Qc(g){return[].concat(g)}function Va(g){return Sb.from(g)}function gb(g,c,h){return g.forEach(c,h)}function Za(g,c,h){return g.every(c,h)}function V(g,c,h){return g.some(c,h)}function O(g,c,h){return g.map(c,h)}function Ka(g,c,h){return Sb.filter(g,c,h)}function ea(g,c,h,f){f&&(h=h.bind(f));
return g.reduce(h,c)}function Da(g,c,h){function f(a,d){if(!n&&(a||d)){n=!0;try{h(a,m)}catch(k){console.error("Error in mapAsyncSeries - callback invocation error:\n"+(k.stack||k))}}}var m=[],n=!1;return g.reduceRight(function(a,d,k){if(!n)return function(b,e){if(b)return f(b);0<k&&m.push(e);try{c(d,k,Sb.once(a))}catch(l){f(l)}}},function(a,d){m.push(d);f(a,!0)})()}function Ta(g,c,h,f){function m(){for(;e<c.parallel&&b<g.length;)l[b++]()}function n(p,u){if(!(-1<d.indexOf(p)||(d.push(p),e--,k)))if(!u&&
d.length<g.length)m();else{k=!0;try{f&&f(u,a)}catch(x){console.error("Error in mapAsync - main callback invocation error:\n"+(x.stack||x))}}}"function"===typeof c&&(f=h,h=c,c=null);c=c||{};if(!g.length)return f&&f(null,[]);c.parallel||(c.parallel=Infinity);var a=[],d=[],k=!1,b=0,e=0,l=g.map(function(p,u){return function(){e++;try{h(p,u,Sb.once(function(x,z){a[u]=x||z;n(u,x)}))}catch(x){n(u,x)}}});return m()}function vb(){return function(){}}function Bb(){return function(g){return g}}function Ib(){return function(){return null}}
function wc(){return function(){return!1}}function yc(){return function(){return!0}}function gd(){return function(){throw Error("Not yet implemented");}}function $d(g){var c=[],h;for(h in g)g.__lookupGetter__(h)||"function"!==typeof g[h]||c.push(h);return c}function te(g){var c=[],h;for(h in g)!g.__lookupGetter__(h)&&g.hasOwnProperty(h)&&"function"===typeof g[h]&&c.push(h);return c}function Ed(g){if(g.superclass)return[];var c=g.toString();g="";var h=c.match(/(?:\(([^\)]*)\)|([^\(\)-+!]+))\s*=>/);
h?g=h[1]||h[2]||"":(c=c.match(/^[\s\(]*function[^(]*\(([^)]*)\)/))&&c[1]&&(g=c[1]);return g.replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",").map(function(f){return f.trim()}).filter(function(f){return!!f})}function Je(g){var c="";g.declaredClass?c+=g.declaredClass+">>":g.declaredObject&&(c+=g.declaredObject+".");return c+(g.methodName||g.displayName||g.name||"anonymous")}function He(g){g=String(g).replace(/^function[^\{]+\{\s*/,"").replace(/\}$/,"").trim();for(var c=
g.split(/\n|\r/),h,f=0;f<c.length;f++){var m=c[f].match(/^(\s+)[^\s]/);m&&(void 0===h||m[1].length<h.length)&&(h=m[1])}return h?g.replace(new RegExp("^"+h,"gm"),""):g}function ye(g){var c=Date.now();g();return Date.now()-c}function oe(g,c){for(var h=Date.now(),f=0;f<c;f++)g();return(Date.now()-h)/c}function of(g,c){var h=Array.prototype.slice.call(arguments),f=h.shift();c=1E3*h.shift();return setTimeout(function(){return f.apply(f,h)},c)}function Cf(g,c){var h,f,m,n,a,d,k=nd.debounce(c,function(){a=
n=!1});return function(){h=this;f=arguments;m||(m=setTimeout(function(){m=null;a&&g.apply(h,f);k()},c));n?a=!0:d=g.apply(h,f);k();n=!0;return d}}function rh(g,c,h){var f;return function(){var m=this,n=arguments;h&&!f&&c.apply(m,n);clearTimeout(f);f=setTimeout(function(){f=null;h||c.apply(m,n)},g)}}function Bh(g,c,h){var f=nd._throttledByName;return f[g]?f[g]:f[g]=nd.throttle(function(){nd.debounceNamed(g,c,function(){delete f[g]})();return h.apply(this,arguments)},c)}function $g(g,c,h,f){var m=nd._debouncedByName;
return m[g]?m[g]:m[g]=nd.debounce(c,function(){delete m[g];return h.apply(this,arguments)},f)}function Hf(g,c){var h=nd._queues,f=h[g]||(h[g]={_workerActive:!1,worker:c,tasks:[],drain:null,push:function(m){f.tasks.push(m);f._workerActive||f.activateWorker()},pushAll:function(m){m.forEach(function(n){f.tasks.push(n)});f._workerActive||f.activateWorker()},pushNoActivate:function(m){f.tasks.push(m)},handleError:function(m){m&&console.error("Error in queue: "+m)},activateWorker:function(){function m(d){f.handleError(d);
f.activateWorker()}var n=f.tasks,a=f._workerActive;if(0===n.length)a&&(f._workerActive=!1,"function"===typeof f.drain&&f.drain()),delete h[g];else{a||(f._workerActive=!0);try{f.worker(n.shift(),m)}catch(d){m(d)}}}});return f}function ei(g,c,h){function f(){b&&clearTimeout(b);d=!0;delete n[g]}function m(e){d||(f(),a.callbacks.forEach(function(l){try{l.apply(null,e)}catch(p){console.error("Error when invoking callbacks in queueUntil ["+g+"]:\n"+String(p.stack||p))}}))}var n=nd._queueUntilCallbacks,
a=n[g];if(a)return a;var d=!1,k=!1;if(h)var b=setTimeout(function(){d||m([Error("timeout")])},h);a=n[g]={callbacks:[],cancel:function(){k=!0;f()},whenDone:function(e){a.callbacks.push(e);return a}};setTimeout(function(){if(!k)try{c(function(){m(arguments)})}catch(e){m([e])}},0);return a}function Gh(){var g=Array.prototype.slice,c=g.call(arguments),h=nd._composeAsyncDefaultEndCallback,f=h,m,n,a=new Promise(function(d,k){m=d;n=k});return c.reverse().reduce(function(d,k,b){var e=!1;return function(){function l(){e=
!0;var x=g.call(arguments),z=x.shift();z?(f(z),n(z)):d.apply(null,x)}var p=g.call(arguments);if(f===h&&b===c.length-1){for(;p.length&&"function"!==typeof p[p.length-1];)p.pop();"function"===typeof p[p.length-1]&&(f=p.pop())}if("function"===typeof k)try{var u=k.apply(this,p.concat([l]));u&&"function"===typeof u.then&&"function"===typeof u.catch&&u.then(function(x){return l(null,x)}).catch(function(x){return l(x)})}catch(x){console.error("composeAsync: ",x.stack||x),e||(f(x),n(x))}else k&&"function"===
typeof k.then&&"function"===typeof k.catch?k.then(function(x){l(null,x)}).catch(function(x){l(x)}):(p=Error("Invalid argument to composeAsync: "+k),f(p),n(p));return a}},function(){var d=g.call(arguments);f.apply(null,[null].concat(d));m(d[0])})}function ni(){return Array.prototype.slice.call(arguments).reverse().reduce(function(g,c){return function(){return g(c.apply(this,arguments))}},function(g){return g})}function wg(g){return function(){var c=Array.prototype.slice.call(arguments);c=[c[1],c[0]].concat(c.slice(2));
return g.apply(null,c)}}function Lg(g){g=g||function(){};return function(){var c=nd.arr.from(arguments);g.apply(null,[null].concat(c))}}function Pe(g,c,h){var f=Date.now(),m=50;h||(h=c,c=g,g=void 0);(function a(){if(c())return h();if(g){var d=Date.now()-f;d=g-d;if(0>=d)return h(Error("timeout"));d<m&&(m=d)}setTimeout(a,m)})()}function Vi(g,c,h){function f(a,d,k,b){if(n.length){var e=null;a=n.indexOf(a);-1<a&&n.splice(a,1);k?(n.length=0,e=Error("in waitForAll at"+("number"===typeof d?" "+d:"")+": \n"+
(k.stack||String(k)))):b&&(m[d]=b);n.length||setTimeout(function(){h(e,m)},0)}}h||(h=c,c=g,g=null);g=g||{};var m=c.map(function(){return null});if(c.length){var n=Array.prototype.slice.call(c);c.forEach(function(a,d){try{a(function(){var k=Array.prototype.slice.call(arguments),b=k.shift();f(a,d,b,k)})}catch(k){f(a,d,k,null)}});g.timeout&&setTimeout(function(){if(n.length){var a=m.map(function(d,k){return null===d&&k}).filter(function(d){return"number"===typeof d}).join(", ");f(null,null,Error("waitForAll timed out, functions at "+
a+" not done"),null)}},g.timeout)}else h(null,m)}function Ob(g,c,h,f){function m(){return g.apply(this,n.concat(Array.prototype.slice.call(arguments)))}if(1>=arguments.length)return arguments[0];var n=Array.prototype.slice.call(arguments);g=n.shift();m.isWrapper=!0;m.originalFunction=g;return m}function Nc(g,c){var h=function(){var f=Array.prototype.slice.call(arguments);f=c.isWrapper?f:[g.bind(this)].concat(f);return c.apply(this,f)};h.isWrapper=!0;h.originalFunction=g;return h}function fe(g){for(;g.originalFunction;)g=
g.originalFunction;return g}function ge(g){var c=[];do c.push(g),g=g.originalFunction;while(g);return c}function Mf(g,c,h){h.originalFunction=g[c];var f=g.hasOwnProperty(c);g[c]=function(){f?g[c]=h.originalFunction:delete g[c];return h.apply(this,arguments)};return g}function jg(g){if(g){if("function"!==typeof g)throw Error("once() expecting a function");var c=!1,h;return function(){if(c)return h;c=!0;return h=g.apply(this,arguments)}}}function fi(){var g=!1;return Array.prototype.slice.call(arguments).map(function(c){return function(){if(!g)return g=
!0,c.apply(this,arguments)}})}function Ch(g,c){var h=Array.prototype.slice.call(arguments),f=nd._eitherNameRegistry;g=h.shift();var m=f[g]||(f[g]={wasCalled:!1,callsLeft:0});m.callsLeft++;return function(){m.callsLeft--;0>=m.callsLeft&&delete f[g];if(!m.wasCalled)return m.wasCalled=!0,c.apply(this,arguments)}}function zk(g){return eval(g)}function Wm(g){return nd.evalJS("("+g.toString()+");")}function Xm(g,c){return nd.Closure.fromFunction(g,c).recreateFunc()}function Fm(g,c,h,f){var m=h||g.name;
if(!m)throw Error("Function that wants to be a script needs a name: "+this);h=Object.getPrototypeOf(c);var n={this:c};f&&(n=nd.objectMerge([n,f]));h&&h[m]&&(n.$super=nd.Closure.fromFunction(function(){try{return Object.getPrototypeOf(c)[m].apply(c,arguments)}catch(a){return"undefined"!==typeof $world?$world.logError(a,"Error in $super call"):console.error("Error in $super call: "+a+"\n"+a.stack),null}},{obj:c,name:m}).recreateFunc());return nd.addToObject(nd.asScript(g,n),c,m)}function Vk(g,c,h){g.displayName=
h;var f=c.attributeConnections?c.attributeConnections.filter(function(m){return"update"===m.getSourceAttrName()}):[];f&&f.forEach(function(m){m.disconnect()});c[h]=g;typeof c&&(g.declaredObject=nd.safeToString(c));"undefined"!==typeof lively&&c&&lively.Tracing&&lively.Tracing.stackTracingEnabled&&lively.Tracing.instrumentMethod(c,h,{declaredObject:nd.safeToString(c)});f&&f.forEach(function(m){m.connect()});return g}function Gm(g,c){return nd.Closure.fromFunction(g,c||{}).recreateFunc()}function Wk(g,
c,h){g.hasLivelyClosure&&(g.livelyClosure.funcProperties[c]=h)}function dm(g){return g.hasLivelyClosure?g.livelyClosure.varMapping:g.isWrapper?g.originalFunction.varMapping:g.varMapping?g.varMapping:{}}function Il(g,c,h){g[c]=h;g.hasLivelyClosure&&(g.livelyClosure.funcProperties[c]=h)}function bj(g){for(var c=[],h=g.prototype;h;)c=Object.keys(h).reduce(function(f,m){"function"===typeof h[m]&&-1===f.indexOf(m)&&f.push(m);return f},c),h=Object.getPrototypeOf(h);return c}function Jl(g){return Object.keys(g.prototype).filter(function(c){return"function"===
typeof g.prototype[c]})}function Xf(g,c){var h=function(f){var m=Array.prototype.slice.call(arguments);m.shift();try{return f.apply(g,m)}catch(n){if("undefined"!==typeof lively&&lively.morphic&&lively.morphic.World&&lively.morphic.World.current())throw lively.morphic.World.current().logError(n),n;c?console.warn("ERROR: %s.%s(%s): err: %s %s",g,c,m,n,n.stack||""):console.warn("ERROR: %s %s",n,n.stack||"");throw n;}};h.methodName="$logErrorsAdvice";h=nd.wrap(g,h);h.originalFunction=g;h.methodName="$logErrorsWrapper";
return h}function sj(g,c){var h=function(f){var m=Array.prototype.slice.call(arguments);m.shift();try{var n=f.apply(g,m)}catch(a){throw console.warn("failed to load "+c+": "+a),"undefined"!==typeof lively&&lively.lang.Execution&&lively.lang.Execution.showStack(),a;}console.log("completed "+c);return n};h.methodName="$logCompletionAdvice::"+c;h=nd.wrap(g,h);h.methodName="$logCompletionWrapper::"+c;h.originalFunction=g;return h}function Ak(g,c){var h=function(m){var n=Array.prototype.slice.call(arguments);
n.shift();f=m.apply(g,n);c?console.warn("%s(%s) -> %s",nd.qualifiedMethodName(g),n,f):console.log("%s(%s) -> %s",nd.qualifiedMethodName(g),n,f);return f};h.methodName="$logCallsAdvice::"+nd.qualifiedMethodName(g);var f=nd.wrap(g,h);f.originalFunction=g;f.methodName="$logCallsWrapper::"+nd.qualifiedMethodName(g);return f}function em(g,c){return nd.wrap(g,function(h){var f=Array.prototype.slice.call(arguments);f.shift();c.push(f);f=h.apply(g,f);c.pop();return f})}function Zm(){try{throw Error();}catch(g){return String(g.stack).split(/\n/).slice(2).map(function(c){return c.replace(/^\s*at\s*([^\s]+).*/,
"$1")}).join("\n")}}function fm(g){if(g&&Array.isArray(g))return"["+g.map(fm)+"]";if("string"!==typeof g)return String(g);g=String(g);g=g.replace(/\n/g,"\\n\\\n");g=g.replace(/(")/g,"\\$1");return'"'+g+'"'}function ql(g){return Array.isArray(g)}function Qp(g){return g&&1==g.nodeType}function zg(g){return g instanceof Function}function Hm(g){return"boolean"===typeof g}function po(g){return"string"===typeof g}function Kk(g){return"number"===typeof g}function Ym(g){return"undefined"===typeof g}function rn(g){return g instanceof
RegExp}function tn(g){return"object"===typeof g}function sn(g){if(!g)return!0;switch(typeof g){case "string":case "number":case "boolean":return!0}return!1}function Xo(g){for(var c in g)if(g.hasOwnProperty(c))return!1;return!0}function Sn(g,c){if(g===c)return!0;if(!g||!c)return g==c;if(Array.isArray(g))return le.arrayDeepEquals(g,c);switch(g.constructor){case String:case Date:case Boolean:case Number:return g==c}if("function"===typeof g.isEqualNode)return g.isEqualNode(c);if("function"===typeof g.equals)return g.equals(c);
var h=[],f;for(f in g)if(h.push(f),"function"!==typeof g[f]&&!Sn(g[f],c[f]))return!1;for(f in c)if(-1===h.indexOf(f)&&"function"!==typeof c[f]&&!Sn(c[f],g[f]))return!1;return!0}function $m(g){return g?Object.keys(g).map(function(c){return g[c]}):[]}function qo(g,c){for(var h={},f=0;f<c.length;f++)h[c[f]]=g[c[f]];return h}function ic(g,c){g=g||{};g=le.getOwnPropertyDescriptors(g);for(var h=0;h<c.length;h++)c[h]in g&&delete g[c[h]];return Object.defineProperties({},g)}function Ui(g,c,h,f){c=le.functionFromString(c);
return le.asScriptOf(c,g,h,f)}function pa(g,c){for(var h=null,f=1;f<arguments.length;f++)if("string"===typeof arguments[f])h=arguments[f],g.categories||(g.categories={}),g.categories[h]||(g.categories[h]=[]),h=g.categories[h];else{c=arguments[f];for(var m in c){var n=c.__lookupGetter__(m),a=c.__lookupSetter__(m);n&&g.__defineGetter__(m,n);a&&g.__defineSetter__(m,a);n||a||(n=c[m],g[m]=n,h&&h.push(m),"function"===typeof n&&(n.displayName||(n.displayName=m),"undefined"!==typeof lively&&lively.Module&&
lively.Module.current&&(n.sourceModule=lively.Module.current())))}}return g}function w(g){if(le.isPrimitive(g))return g;if(Array.isArray(g))return Array.prototype.slice.call(g);var c={},h;for(h in g)g.hasOwnProperty(h)&&(c[h]=g[h]);c.__proto__=g.__proto__;return c}function C(g,c,h){for(var f={},m=0;m<c.length;m++)c[m]in g&&(f[c[m]]=h?h(c[m],g[c[m]]):g[c[m]]);return f}function F(g,c,h){c=c||{};h=h||0;if(c.customPrinter){var f=c._ignoreSignal||(c._ignoreSignal={}),m=c.customPrinter(g,f,function(p){return F(p,
c,h+1)});if(m!==f)return m}if(!g)return le.print(g);if("function"===typeof g)return c.printFunctionSource?String(g):"function"+(g.name?" "+g.name:"")+"("+le.argumentNames(g).join(",")+") {/*...*/}";switch(g.constructor){case String:case Boolean:case RegExp:case Number:return le.print(g)}if("function"===typeof g.serializeExpr)return g.serializeExpr();var n=g&&Array.isArray(g);f=n?"[":"{";m=n?"]":"}";if(c.maxDepth&&h>=c.maxDepth)return f+"/*...*/"+m;var a=[];if(n)a=g.map(function(p){return F(p,c,h+
1)});else for(var d=Object.keys(g).sort(function(p,u){var x="function"===typeof g[p];return x===("function"===typeof g[u])?p<u?-1:p>u?1:0:x?1:-1}),k=0;k<d.length;k++){if(k>(c.maxNumberOfKeys||Infinity)){d=d.length-k;a.push("..."+d+" hidden "+(1<d?"entries":"entry")+"...");break}var b=d[k];n&&F(g[b],c,h+1);var e=F(g[b],c,h+1);a.push((c.escapeKeys?JSON.stringify(b):b)+": "+e)}if(0===a.length)return f+m;d=a.join(", ");k=(!n||c.newLineInArrays)&&(!c.minLengthForNewLine||d.length>=c.minLengthForNewLine);
var l=le.indent("",c.indent||"  ",h);b=le.indent("",c.indent||"  ",h+1);e=k&&!n?"\n"+b:"";n=k&&!n?"\n"+l:"";k&&(d=a.join(","+(k?"\n"+b:"")));return f+e+d+n+m}function y(g){return 1<arguments.length?y(Array.prototype.slice.call(arguments)):Array.isArray(g[0])?Array.prototype.concat.apply([],g):g.reduce(function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f]);return c},{})}function H(g,c){if(!g)return c;if(!c)return g;if(Array.isArray(g)){if(!Array.isArray(c))return c;var h=g.map(function(f,m){return H(f,
c[m])});c.length>g.length&&(h=h.concat(c.slice(g.length)));return h}return"object"!==typeof g||"object"!==typeof c?c:Object.keys(g).concat(Object.keys(c)).reduce(function(f,m){f[m]=g[m]?c[m]?"object"!==typeof g[m]||"object"!==typeof c[m]?c[m]:H(g[m],c[m]):g[m]:c[m];return f},{})}function L(g,c){c=[];for(var h in g){var f=g[h],m=f.hasOwnProperty("before")?f.before:f.before=[];f=f.hasOwnProperty("after")?f.after:f.after=[];for(var n=m.length;n--;){var a=m[n],d=g[a];d?(d.hasOwnProperty("after")||(d.after=
[]),d.after.push(h)):(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(h+" requires to be initialized before "+a+" but that property cannot be found.")),m.splice(n,1))}for(m=f.length;m--;)n=f[m],g[n]||(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(h+" requires to be initialized after "+n+" but that property cannot be found.")),f.splice(m,1));c.push(h)}h=[];f=[];for(m=c.length+1;c.length;){if(m===c.length)throw Error("Circular dependencies in handler order, could not resolve properties "+
c.map(function(k){var b=g[k].before,e=g[k].after;if(!(b&&b.length||e&&e.length))return"";k+="\n";b&&b.length&&(k+="  - before "+b.join(",")+"\n");e&&e.length&&(k+="  - after "+e.join(",")+"\n");return k}).join(""));m=c.length;n=[];for(a=c.length;a--;)d=c[a],le.isSubset(g[d].after,f)&&(c.splice(a,1),f.push(d),n.push(d));h.push(n)}return le.flatten(h,1)}function Q(g){return Object.create(g)}function ba(g,c){for(var h=[];g;)g.hasOwnProperty(c)&&h.unshift(g[c]),g=Object.getPrototypeOf(g);return h}function qa(g,
c){return le.merge(le.valuesInPropertyHierarchy(g,c))}function S(g){if(!g||"object"!==typeof g||g instanceof RegExp)return g;var c=Array.isArray(g)?Array(g.length):{},h;for(h in g)g.hasOwnProperty(h)&&(c[h]=S(g[h]));return c}function Y(g){return null===g?"null":"undefined"===typeof g?"undefined":g.constructor.name}function na(g){function c(f,m,n,a){if(f.constructor.name===m){h+=n;if(f.length||Object.keys(f).length)h+="...";h+=a}}if(!le.isMutableType(g))return le.safeToString(g);if("Object"!==g.constructor.name&&
!Array.isArray(g)&&g.constructor.name)return g.constructor.name?g.constructor.name:Object.prototype.toString.call(g).split(" ")[1].split("]")[0];var h="";c(g,"Object","{","}");c(g,"Array","[","]");return h}function ma(g){return-1===["null","undefined","Boolean","Number","String"].indexOf(le.typeStringOf(g))}function La(g){try{return(g?g.toString():String(g)).replace("\n","")}catch(c){return"<error printing object>"}}function Xa(g){switch(typeof g){case "string":return new String(g);case "boolean":return new Boolean(g);
case "number":return new Number(g);default:return g}}function eb(g,c){c=void 0===c?"_":c;var h=1;do var f=c+"-"+h++;while(f in g);return f}function db(){return Ic.formatFromArray(Array.prototype.slice.call(arguments))}function Rb(g){function c(p,u){return""+p}function h(p,u){return p.toString()}function f(p,u){return Ic.inspectObject(p)}var m=g.shift();m||console.log("Error in Strings>>formatFromArray, first arg is undefined");var n={s:c,d:h,i:h,f:function(p,u,x){return-1<x?p.toFixed(x):p.toString()},
o:f},a=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;m=function(p){for(var u=[],x=a.exec(p);x;x=a.exec(p)){var z=x[8]||x[5];z=z in n?n[z]:f;var E=x[3]?parseInt(x[3]):"."==x[4]?-1:0;u.push(p.substr(0,"%"==x[0][0]?x.index:x.index+1));u.push({appender:z,precision:E});p=p.substr(x.index+x[0].length)}p&&u.push(p.toString());return u}(m);for(var d="",k=0,b=0;b<m.length;++b){var e=m[b];if(e&&"object"===typeof e){var l=g[k++];d+=(e.appender||c)(l,d,e.precision)}else d+=""+e}return d}function Cc(g,
c,h){if(!h||0>=h)return g;for(var f="";0<h;)h--,f+=c;return Ic.lines(g).map(function(m){return f+m}).join("\n")}function Xc(g,c){c||(c="  ");return Ic.min(g.match(new RegExp("^("+c+")*","gm")).map(function(h){return Math.floor(h.length/c.length)}))}function Oc(g,c,h){c||(c="  ");h||(h=0);var f=Ic.minIndent(g,c);if(f===h)return g;if(f<h)return Ic.indent(g,c,h-f);var m=c.repeat(f-h);return Ic.lines(g).map(function(n){return n.slice(m.length)}).join("\n")}function dd(g){return'"'+g.replace(/"/g,'\\"')+
'"'}function Md(g){return Ic.articles.articlize(g)}function ee(g){return Ic.articles.find(g)}function Wb(g){if(g&&Array.isArray(g))return"["+g.map(Wb)+"]";if("string"!==typeof g)return String(g);g=String(g);g=g.replace(/\n/g,"\\n\\\n");g=g.replace(/(")/g,"\\$1");return'"'+g+'"'}function Ge(g,c){c=c||0;return g.reduce(function(h,f){return h+(Array.isArray(f)?Ge(f,c+1):Ic.indent(f+"\n","  ",c))},"")}function Kf(g,c,h){return h?" ".repeat(c)+g:g+" ".repeat(c)}function fd(g,c){function h(d){return n?
!1:a?!0:c&&Array.isArray(c.align)&&"right"===c.align[d]}var f=[],m=c&&c.separator||" ",n=!c||!c.align||"left"===c.align,a=c&&"right"===c.align;g.forEach(function(d){d.forEach(function(k,b){void 0===f[b]&&(f[b]=0);f[b]=Math.max(f[b],String(k).length)})});return g.map(function(d){return d.map(function(k,b){k=String(k);return Ic.pad(k,f[b]-k.length,h(b))}).join(m)}).join("\n")}function cg(g,c,h,f){function m(a,d,k){n[d]=f.repeat(a)+c(k,a);k=h(k,a);var b=d+1;if(!k||!k.length)return b;var e=b,l=k.length-
1;k.forEach(function(p,u){b=m(a+1,b,p);p=l===u;var x=n[e].split(""),z=a*f.length+f.length;for(u=a*f.length+1;u<z;u++)x[u]="-";p&&(x[a*f.length]="\\");n[e]=x.join("");p||n.slice(e,b).forEach(function(E,G){E=E.split("");E[a*f.length]="|";n[e+G]=E.join("")});e=b});return b}var n=[];f=f||"  ";m(0,0,g);return n.join("\n")}function lh(g){return g.split("")}function Tf(g){return g.split(/\n\r?/)}function xf(g,c){var h=c?c.sep:"\n\n";return c&&c.keepEmptyLines?g.split("\n").concat("").reduce(function(f,m){var n=
f[0];f=f[1];/^\s*$/.test(f)===/^\s*$/.test(m)?f+="\n"+m:(f.length&&n.push(f),f=m);return[n,f]},[[],""])[0]:g.split(new RegExp(h+"+"))}function Ce(g){return Ic.lines(g).compact()}function Hg(g,c){return g.split(c||/\s+/).filter(function(h){return!/^\s*$/.test(h)})}function Qg(g,c){c=c||{};var h=c.cellSplitter||/\s+/,f=/^\s*$/;c=c.hasOwnProperty("convertTypes")?!!c.convertTypes:!0;g=Ic.lines(g);for(var m=[],n=0;n<g.length;n++){var a=Ic.tokens(g[n],h);c&&(a=a.map(function(d){if(d.match(f))return d;var k=
Number(d);if(!isNaN(k))return k;k=new Date(d);return isNaN(+k)?d.trim():k}));0<a.length&&m.push(a)}return m}function kg(g){if("undefined"===typeof document)throw Error("Cannot unescapeCharacterEntities");var c=document.createElement("div");c.innerHTML=g;return c.textContent}function gm(g,c){return(g=g.trim().match(/([^?#]*)(#.*)?$/))?g[1].split(c||"&").inject({},function(h,f){if((f=f.split("="))[0]){var m=decodeURIComponent(f.shift());f=1<f.length?f.join("="):f[0];void 0!=f&&(f=decodeURIComponent(f));
m in h?(Array.isArray(h[m])||(h[m]=[h[m]]),h[m].push(f)):h[m]=f}return h}):{}}function Im(g){return btoa(encodeURIComponent(g).replace(/%([0-9A-F]{2})/g,function(c,h){return String.fromCharCode("0x"+h)}))}function Nj(g){return decodeURIComponent(atob(g).split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function Be(g){var c=g.match(Ic.urlStartRe),h=(c=c?c[0]:null)?g.slice(c.length):g;do g=h,h=g.replace(Ic.pathDoubleDotRe,"");while(h!=g);h=h.replace(Ic.pathDoubleSlashRe,
"$1/");h=h.replace(Ic.pathDotRe,"/");c&&(h=c+h);return h}function ah(){return Ic.normalizePath(Array.prototype.slice.call(arguments).reduce(function(g,c){return"string"===typeof c?g.replace(/\/*$/,"")+"/"+c.replace(/^\/*/,""):g}))}function tj(){return Ic.newUUIDTemplate.replace(Ic.newUUIDRe,Ic.newUUIDReplacer).toUpperCase()}function Yj(g,c){return"data:"+(c||"text/plain")+";base64,"+Ic.base64EncodeUnicode(g)}function Yo(g){var c=0,h=g.length;if(0==h)return c;for(var f=0;f<h;f++){var m=g.charCodeAt(f);
c=(c<<5)-c+m;c&=c}return c}function Tn(g){function c(k,b,e,l,p,u){b=a(a(b,k),a(l,u));return a(b<<p|b>>>32-p,e)}function h(k,b,e,l,p,u,x){return c(b&e|~b&l,k,b,p,u,x)}function f(k,b,e,l,p,u,x){return c(b&l|e&~l,k,b,p,u,x)}function m(k,b,e,l,p,u,x){return c(e^(b|~l),k,b,p,u,x)}function n(k,b){var e=k[0],l=k[1],p=k[2],u=k[3];e=h(e,l,p,u,b[0],7,-680876936);u=h(u,e,l,p,b[1],12,-389564586);p=h(p,u,e,l,b[2],17,606105819);l=h(l,p,u,e,b[3],22,-1044525330);e=h(e,l,p,u,b[4],7,-176418897);u=h(u,e,l,p,b[5],12,
1200080426);p=h(p,u,e,l,b[6],17,-1473231341);l=h(l,p,u,e,b[7],22,-45705983);e=h(e,l,p,u,b[8],7,1770035416);u=h(u,e,l,p,b[9],12,-1958414417);p=h(p,u,e,l,b[10],17,-42063);l=h(l,p,u,e,b[11],22,-1990404162);e=h(e,l,p,u,b[12],7,1804603682);u=h(u,e,l,p,b[13],12,-40341101);p=h(p,u,e,l,b[14],17,-1502002290);l=h(l,p,u,e,b[15],22,1236535329);e=f(e,l,p,u,b[1],5,-165796510);u=f(u,e,l,p,b[6],9,-1069501632);p=f(p,u,e,l,b[11],14,643717713);l=f(l,p,u,e,b[0],20,-373897302);e=f(e,l,p,u,b[5],5,-701558691);u=f(u,e,l,
p,b[10],9,38016083);p=f(p,u,e,l,b[15],14,-660478335);l=f(l,p,u,e,b[4],20,-405537848);e=f(e,l,p,u,b[9],5,568446438);u=f(u,e,l,p,b[14],9,-1019803690);p=f(p,u,e,l,b[3],14,-187363961);l=f(l,p,u,e,b[8],20,1163531501);e=f(e,l,p,u,b[13],5,-1444681467);u=f(u,e,l,p,b[2],9,-51403784);p=f(p,u,e,l,b[7],14,1735328473);l=f(l,p,u,e,b[12],20,-1926607734);e=c(l^p^u,e,l,b[5],4,-378558);u=c(e^l^p,u,e,b[8],11,-2022574463);p=c(u^e^l,p,u,b[11],16,1839030562);l=c(p^u^e,l,p,b[14],23,-35309556);e=c(l^p^u,e,l,b[1],4,-1530992060);
u=c(e^l^p,u,e,b[4],11,1272893353);p=c(u^e^l,p,u,b[7],16,-155497632);l=c(p^u^e,l,p,b[10],23,-1094730640);e=c(l^p^u,e,l,b[13],4,681279174);u=c(e^l^p,u,e,b[0],11,-358537222);p=c(u^e^l,p,u,b[3],16,-722521979);l=c(p^u^e,l,p,b[6],23,76029189);e=c(l^p^u,e,l,b[9],4,-640364487);u=c(e^l^p,u,e,b[12],11,-421815835);p=c(u^e^l,p,u,b[15],16,530742520);l=c(p^u^e,l,p,b[2],23,-995338651);e=m(e,l,p,u,b[0],6,-198630844);u=m(u,e,l,p,b[7],10,1126891415);p=m(p,u,e,l,b[14],15,-1416354905);l=m(l,p,u,e,b[5],21,-57434055);
e=m(e,l,p,u,b[12],6,1700485571);u=m(u,e,l,p,b[3],10,-1894986606);p=m(p,u,e,l,b[10],15,-1051523);l=m(l,p,u,e,b[1],21,-2054922799);e=m(e,l,p,u,b[8],6,1873313359);u=m(u,e,l,p,b[15],10,-30611744);p=m(p,u,e,l,b[6],15,-1560198380);l=m(l,p,u,e,b[13],21,1309151649);e=m(e,l,p,u,b[4],6,-145523070);u=m(u,e,l,p,b[11],10,-1120210379);p=m(p,u,e,l,b[2],15,718787259);l=m(l,p,u,e,b[9],21,-343485551);k[0]=a(e,k[0]);k[1]=a(l,k[1]);k[2]=a(p,k[2]);k[3]=a(u,k[3])}var a=function(k,b){var e=(k&65535)+(b&65535);return(k>>
16)+(b>>16)+(e>>16)<<16|e&65535},d="0123456789abcdef".split("");return function(k){for(var b=k.length,e=0;e<b;e++){for(var l=e,p=k[e],u="",x=0;4>x;x++)u+=d[p>>8*x+4&15]+d[p>>8*x&15];k[l]=u}return k.join("")}(function(k){var b=k.length,e=[1732584193,-271733879,-1732584194,271733878],l;for(l=64;l<=b;l+=64){var p,u=k.substring(l-64,l),x=[];for(p=0;64>p;p+=4)x[p>>2]=u.charCodeAt(p)+(u.charCodeAt(p+1)<<8)+(u.charCodeAt(p+2)<<16)+(u.charCodeAt(p+3)<<24);n(e,x)}k=k.substring(l-64);p=[0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0];u=k.length;for(l=0;l<u;l++)p[l>>2]|=k.charCodeAt(l)<<(l%4<<3);p[l>>2]|=128<<(l%4<<3);if(55<l)for(n(e,p),l=16;l--;)p[l]=0;p[14]=8*b;n(e,p);return e}(g))}function If(g,c){var h=[];g.replace(c,function(f,m){h.push({match:f,start:m,end:m+f.length})});return h}function hk(g,c,h){function f(a,d){if(d.constructor!==RegExp){if(0===a.indexOf(d))return{match:d,rest:a.slice(d.length)};for(var k=0;k<d.length;k++)if(d[k]!=a[k])return{match:null,pos:k};return{match:null}}return(d=Ic.reMatches(a,d))&&
d.length&&0===d[0].start?{match:d[0].match,rest:a.slice(d[0].end)}:{match:null}}function m(a){var d=Ic.reMatches(a,/__\//g),k=Ic.reMatches(a,/\/__/g);if(d.length!==k.length)throw Error("pattern invalid: "+a+" cannot be split into __/.../__ embedded RegExps\nstarts: "+JSON.stringify(d)+"\nvs ends:\n"+JSON.stringify(k));var b=0;return d.reduce(function(e,l,p){var u=k[p];p=e.pop();l=l.start-b;u=u.end-b;var x;var z=x=3;p=[p.slice(0,l),p.slice(l+x,u-z),p.slice(u)];p[0].length&&(e.push(p[0]),b+=p[0].length);
try{p[1].length&&(e.push(new RegExp(p[1])),b+=p[1].length+3+3)}catch(E){throw Error("Cannot create pattern re from: "+Ic.inspectObject(p));}p[2].length&&e.push(p[2]);return e},[a])}function n(a,d){d=m(d);a:{for(var k=a,b=0,e=0;e<d.length;e++){var l=d[e];k=f(k,l);if(!k.match){d={matched:!1,pos:b+(k.pos||0),pattern:l};break a}b+=k.match.length;k=k.rest}d=k.length?{matched:!1,pos:b}:{matched:!0}}if(d.matched)return d;d.error=a.slice(0,d.pos)+"<--UNMATCHED--\x3e"+a.slice(d.pos);return d}h=h||{};h.normalizeWhiteSpace&&
(g=g.replace(/\s+/g," "));h.ignoreIndent&&(g=g.replace(/^\s+/gm,""),c=c.replace(/^\s+/gm,""));return g==c?{matched:!0}:n(g,c)}function dg(g,c,h){g=g.slice(c);return"string"===typeof h?(g=g.indexOf(h),-1===g?null:g+c):h.constructor===RegExp?(c=Ic.reMatches(g,h),c[0]?c[0].start:null):null}function vh(g,c,h){g=g.slice(0,c);return"string"===typeof h?(g=g.lastIndexOf(h),-1===g?null:g):h.constructor===RegExp?(g=Ic.reMatches(g,h),Ic.last(g)?Ic.last(g).start:null):null}function cj(g){var c=Ic.lineRanges(g);
return function(h){for(var f=0;f<c.length;f++){var m=c[f];if(h>=m[0]&&h<m[1])return f}return-1}}function Jm(g){return function(c){return Ic.lineRanges(g)[c]}}function vv(g){for(var c=0,h=Ic.lines(g),f=[],m=0;m<h.length;m++)g=c+h[m].length+1,f.push([c,g]),c=g;return f}function wv(g,c){var h=g.length;if(0===h)return-1;for(var f=0;;){var m=f+Math.floor((h-f)/2),n=$jscomp.makeIterator(g[m]),a=n.next().value;n=n.next().value;if(c<a){if(0===m)break;h=m}else if(c>n)f=m;else return m}return-1}function hs(g,
c,h){h=void 0===h?0:h;g=this.substring(h||0).search(c);return 0<=g?g+(h||0):g}function Rp(g,c,h){h=void 0===h?g.length:h;c=c.global?c:new RegExp(c.source,"g"+(c.ignoreCase?"i":"")+(c.multiLine?"m":""));g=this.substring(0,h+1);h=-1;for(var f=0,m;null!=(m=c.exec(g));)h=m.index,c.lastIndex=++f;return h}function Sp(g,c){return"undefined"===typeof Ic.JsDiff?"diff not supported":Ic.JsDiff.convertChangesToXML(Ic.JsDiff.diffWordsWithSpace(g,c))}function ro(g){return""==g}function Un(g){g=g[0];return"A"===
g||"E"===g||"I"===g||"O"===g||"U"===g||"a"===g||"e"===g||"i"===g||"o"===g||"u"===g||!1}function is(g,c){var h=parseFloat(g);return isNaN(h)?g:h.toFixed(c)}function xv(g){return g.length?g.charAt(0).toUpperCase()+g.slice(1):g}function yv(g){return g.split(" ").map(Ic.capitalize).join("")}function zv(g){var c=g.split("-"),h=c.length;if(1==h)return c[0];g="-"==g.charAt(0)?c[0].charAt(0).toUpperCase()+c[0].substring(1):c[0];for(var f=1;f<h;f++)g+=c[f].charAt(0).toUpperCase()+c[f].substring(1);return g}
function yy(g,c,h){c=c||30;h=void 0===h?"...":h;return g.length>c?g.slice(0,c-h.length)+h:String(g)}function Av(g,c,h){c=c||30;return g.length>c?(void 0===h?"...":h)+g.slice(-c):String(g)}function Tp(g){return g.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function zy(g){return g.slice(0,g.length-1)+String.fromCharCode(g.charCodeAt(g.length-1)+1)}function Ay(g){return g.charCodeAt(0)-48}function By(g,c){for(var h=[],f=0;f<g.length;f++){h[f]=[];for(var m=0;m<c.length;m++)h[f][m]=
0}for(f=0;f<g.length;f++)h[f][0]=0;for(f=1;f<g.length;f++)for(m=1;m<c.length;m++)h[f][m]=g[f-1]==c[m-1]?h[f-1][m-1]+1:0;for(var n=m=f=-1,a=0;a<g.length;a++)for(var d=0;d<c.length;d++){var k=h[a][d];f<k&&(f=k,m=a-k,n=d-k)}return{length:f,indexA:m,indexB:n,string:0<f?g.slice(m,m+f):""}}function Cy(g,c){return"insert"===c.action?g.slice(0,c.start)+c.lines.join("\n")+g.slice(c.start):"remove"===c.action?g.slice(0,c.start)+g.slice(c.end):g}function Dy(g,c){return c.reduce(function(h,f){return Ic.applyChange(g,
f)},g)}function Ey(g,c){if(0===g.length)return c.length;if(0===c.length)return g.length;var h;if(g.length>c.length){var f=g;g=c;c=f}var m=Array(g.length+1);for(f=0;f<=g.length;f++)m[f]=f;for(f=1;f<=c.length;f++){var n=f;for(h=1;h<=g.length;h++){var a=c[f-1]===g[h-1]?m[h-1]:Math.min(m[h-1]+1,Math.min(n+1,m[h]+1));m[h-1]=n;n=a}m[g.length]=n}return m[g.length]}function Fy(g,c){g=g||0;return Math.round(Math.random()*((c||100)-g)+g)}function Gy(g){return Math.floor(Math.random()*g)}function Hy(g){if(1E3>
g)return String(Math.round(100*g)/100)+"B";g/=1024;return 1E3>g?String(Math.round(100*g)/100)+"KB":String(Math.round(g/1024*100)/100)+"MB"}function Iy(g){return g.reduce(function(c,h){return c+h},0)/g.length}function Jy(g,c,h){return(g-c)/h+c}function Ky(g){var c=g.sort(function(h,f){return f-h});g=g.length;return 0===g%2?.5*(c[g/2-1]+c[g/2]):c[(g-1)/2]}function Ly(g,c,h,f){f=f||0;if(c<h)var m=h;else m=c,c=h;return 0<=m-g+f&&0>=c-g-f}function My(g,c,h){return Math.max(c,Math.min(h,g))}function Ny(g){return g.sort(function(c,
h){return c-h})}function Oy(g,c){c=c||"px";if((g=g.match(/([0-9\.]+)\s*(.*)/))&&g[1]){var h=parseFloat(g[1]);return rg.convertLength(h,g[2],c)}}function Py(g){if(!isFinite(g))return 0;for(var c=1,h=0;Math.round(g*c)/c!==g;)c*=10,h++;return h}function Qy(g,c){c=1/c;return Math.round(g*c)/c}function Bv(g,c,h,f){var m=rg.roundTo(g,h);return Math.abs(g-m)<c/2?m:f?g:m+(g-(g<m?m-c/2:m+c/2))*h/(h-c)}function Cv(g){return 180*g/Math.PI%360}function Dv(g){return g/180*Math.PI}function Ry(g,c,h){c=void 0===
c?5:c;h=void 0===h?3E4:h;g=Math.min(h,c*Math.pow(2,g));return Math.min(h,c+Math.random()*(3*(g/2+Math.round(g/2*Math.random()))-c))}function Sy(g,c,h){return c+g*(h-c)}function Yq(g,c){var h=[],f;for(f in g)(g.__lookupGetter__(f)||"function"!==typeof g[f])&&(c?c(f,g):1)&&h.push(f);return h}function js(g,c){return Object.getOwnPropertyNames(g).reduce(function(h,f){(c?c(g,f):1)&&h.push(f);return h},[])}function Ev(g){var c=[],h;for(h in g)g.hasOwnProperty(h)&&(g.__lookupGetter__(h)||"function"!==g[h])&&
c.push(h);return c}function zt(g,c,h){var f=[],m;for(m in g)if(g.hasOwnProperty(m)){var n=g[m];"function"!==n&&f.push(c.call(h||this,m,n))}return f}function Fv(g,c){for(var h in g)if(g[h]===c)return h}function ks(g){var c=[],h;for(h in g)c.push(g[h]);return c}function Ty(g){var c=[],h;for(h in g)g.hasOwnProperty(h)&&c.push(g[h]);return c}function At(g,c){for(var h in g)if(c(g,h))return!0;return!1}function Bt(g,c){var h=[],f;for(f in g)(c?c(g,f):1)&&h.push(f);return h}function ls(g){return Object.keys(g).sort().join("").hashCode()}
function Gv(g,c,h){return Vn.dateFormat(g,c,h)}function Hv(g,c){return c&&c instanceof Date&&c.getTime()===g.getTime()}function Iv(g,c,h){h=void 0===h?{}:h;if(!(c instanceof Date)||c<g)return"";if(c===g)return"now";var f="min",m="sec",n="hour",a="day",d=Math.round((c-g)/1E3);g=d%60;c=Math.floor(d/60)%60;var k=Math.floor(d/60/60)%24;d=Math.floor(d/60/60/24);var b=[];0<d&&(b.push(d),1<d&&(a+="s"),b.push(a));if(h.forceHours||0<k&&2>d)b.push(k),1<k&&(n+="s"),b.push(n);if(h.forceMinutes||0<c&&3>k&&0===
d)b.push(c),1<c&&(f+="s"),b.push(f);if(h.forceSeconds||0<g&&3>c&&0===k&&0===d)b.push(g),1<g&&(m+="s"),b.push(m);return b.join(" ")}function bh(g){return"function"===typeof g?bh.convertCallbackFun(g):Promise.resolve(g)}function bC(g,c){return new Promise(function(h){return setTimeout(h,g,c)})}function cC(g,c){return new Promise(function(h,f){return setTimeout(f,g,c)})}function dC(g,c){return new Promise(function(h,f){var m=!1;setTimeout(function(){return!m&&(m=!0)&&f(Error("Promise timed out"))},g);
c.then(function(n){return!m&&(m=!0)&&h(n)},function(n){return!m&&(m=!0)&&f(n)})})}function eC(g){var c=Date.now();return Promise.resolve(g).then(function(){return Date.now()-c})}function Jv(g,c,h){"function"===typeof g&&(c=g,g=void 0);return new Promise(function(f,m){var n=!1,a=!1,d,k,b=setInterval(function(){if(n)clearInterval(b),delete vg.waitForClosures[b];else{try{k=c()}catch(e){d=e}if(k||d||a)return n=!0,clearInterval(b),delete vg.waitForClosures[b],d?m(d):a?"undefined"===typeof h?m(Error("timeout")):
f(h):f(k)}},10);vg.waitForClosures[b]=b;"number"===typeof g&&setTimeout(function(){return a=!0},g)})}function fC(){var g,c,h=new Promise(function(f,m){g=f;c=m});return{resolve:g,reject:c,promise:h}}function Kv(g){return function(){var c=Array.from(arguments),h=this;return new Promise(function(f,m){c.push(function(n,a){return n?m(n):f(a)});g.apply(h,c)})}}function gC(g){return function(){var c=Array.from(arguments),h=this;return new Promise(function(f,m){c.push(function(){var n=Array.from(arguments),
a=n.shift();return a?m(a):f(n)});g.apply(h,c)})}}function hC(g,c,h,f,m){var n=g.shift();if(n)try{Promise.resolve(n(c,h)).then(function(a){return hC(g,a,h,f,m)}).catch(function(a){m(a)})}catch(a){m(a)}else f(c)}function Lv(g){return new Promise(function(c,h){return vg._chainResolveNext(g.slice(),void 0,{},c,h)})}function iC(g,c){return Promise.resolve(g).then(function(h){try{c()}catch(f){console.error("Error in promise finally: "+f.stack||f)}return h}).catch(function(h){try{c()}catch(f){console.error("Error in promise finally: "+
f.stack||f)}throw h;})}function jC(g,c){function h(){c--;try{var e=a++;g[e]().then(function(l){c++;m[e]=l;0===--d?k():f()}).catch(function(l){return b(l)})}catch(l){b(l)}}function f(){for(;!n&&0<d&&a<g.length&&0<c;)h()}c=void 0===c?Infinity:c;if(!g.length)return Promise.resolve([]);var m=[],n=null,a=0,d=g.length,k,b;return new Promise(function(e,l){k=function(){return e(m)};b=function(p){return l(n=p)};f()})}function Qh(g,c){if(g instanceof Qh)return g;if(!(this instanceof Qh))return new Qh(g,c);
this.setSplitter(c||".");this.fromPath(g)}function Ct(g){var c={},h;for(h in g)c[h]=g[h].slice();return c}function Dt(g,c){var h={},f;for(f in g)if(!c.includes(f)){h[f]=[];for(var m=g[f],n=0;n<m.length;n++){var a=m[n];c.includes(a)||h[f].push(a)}}return h}function Uy(g,c,h,f){h=void 0===h?[]:h;f=void 0===f?Infinity:f;if(!Array.isArray(g[c]))return[];for(var m=[],n={},a={},d=0;d<h.length;d++)a[h[d]]=!0;c=g[c].slice();d={};for(var k=c.length;k--;){var b=c[k];b in a?c.splice(k,1):d[b]=1}if(h)for(;0!==
c.length;)for(h=0;h<c.length;h++)if(b=c.shift(),!(b in n||b in a)&&(k=d[b]||0,!(k>f)&&(m.push(b),n[b]=!0,b=g[b])))for(var e=0;e<b.length;e++){var l=b[e];l in n||l in d||(d[l]=k+1,c.push(l))}return m}function Vy(g,c,h,f){f=void 0===f?Infinity:f;h&&(g=nj.without(g,h));c=[c];h=0;for(var m={};c.length&&h++<f;){var n=c.shift();if(!m[n]){var a=g[n]||[];m[n]=a;c.push.apply(c,$jscomp.arrayFromIterable(a))}}return m}function Wy(g){var c={},h;for(h in g)for(var f=g[h],m=0;m<f.length;m++){var n=f[m];c[n]?c[n].push(h):
c[n]=[h]}return c}function Mv(g,c){c=[];var h={},f={},m={};for(e in g){h.hasOwnProperty(e)||(h[e]=!0,c.push(e));var n=g[e],a={};if(n){f[e]=[];n=$jscomp.makeIterator(n);for(var d=n.next();!d.done;d=n.next())if(d=d.value,!a.hasOwnProperty(d)&&e!==d){var k=m[d]||(m[d]=[]);k.includes(e)||k.push(e);a[d]=!0;f[e].push(d);h.hasOwnProperty(d)||(h[d]=!0,c.push(d))}}}for(g=[];c.length;){h=Infinity;var b=[];a=[];n=[];for(d=0;d<c.length;d++){var e=c[d];k=f[e]||[];k.length>h||(k.length!==h||k.some(function(l){return b.includes(l)})?
(h=k.length,b=[e],a=[d],n=(m[e]||[]).slice()):(b.push(e),a.push(d),n.push.apply(n,$jscomp.arrayFromIterable(m[e]||[]))))}for(d=a.length;d--;)e=c[a[d]],m[e]=[],c.splice(a[d],1);h=$jscomp.makeIterator(n);for(e=h.next();!e.done;e=h.next())e=e.value,f[e]=f[e].filter(function(l){return!b.includes(l)});g.push(b)}return g}function Nv(g,c,h,f,m,n){function a(b){-1<d.indexOf(b)||(f=g.call(n,f,b,k++),d=d.concat([b]),nj.withoutAll(c[b]||[],d).forEach(function(e){return a(e)}))}var d=m||[],k=0;a(h);return f}
function Xy(g){g=void 0===g?10:g;for(var c={},h=nj.range(1,g).map(String),f=0;f<h.length;f++){var m=Math.floor(Math.random()*g);c[h[f]]=nj.shuffle(h).slice(0,m)}return c}function Ov(g){return Array.isArray(g)&&2<=g.length&&g[0]<=g[1]}function Pv(g){return g.sort(Wh.compare)}function Qv(g,c){return g[0]<c[0]?g[1]<c[0]?-3:g[1]===c[0]?-2:-1:g[0]===c[0]?g[1]===c[1]?0:g[1]<c[1]?-1:1:-1*Qv(c,g)}function Yy(g,c,h){switch(this.compare(g,c)){case -3:case 3:return null;case 0:return h&&h(g,c,g),g;case 2:case 1:var f=
g;g=c;c=f;case -2:case -1:return f=[g[0],Math.max(g[1],c[1])],h&&h(g,c,f),f;default:throw Error("Interval compare failed");}}function Zy(g,c){for(var h=[],f=g.length;0<f;){var m=g.shift();f--;for(var n=0;n<f;n++){var a=Wh.coalesce(m,g[n],c);a&&(m=a,g.splice(n,1),f--,n--)}h.push(m)}return this.sort(h)}function ms(g,c,h){for(var f=[];0<g.length;){var m=g.shift(),n=c.map(function(a){a=Wh.compare(m,a);return-1===a||0===a||1===a});f.push(h(m,n[0]));f.push(m)}return f}function ns(g,c,h,f,m,n){n=n||Wh.GLOBAL;
h=this.sort(h);for(var a,d=[];a=h.shift();)if(!(a[1]<g)){a[0]<g&&(a=Array.prototype.slice.call(a),a[0]=g);var k=c<a[0]?c:a[0];g<k&&d.push(f.call(n,[g,k],!0));c<a[1]&&(a=Array.prototype.slice.call(a),a[1]=c);if(a[0]===a[1]){var b;m&&(b=d.slice(-1)[0])&&m.call(n,b,a,b)}else d.push(f.call(n,a,!1));g=a[1];if(g>=c)break}g<c&&d.push(f.call(n,[g,c],!0));return d}function Zq(g,c,h){return Wh.intervalsInRangeDo(g,c,Wh.coalesceOverlapping(Array.prototype.slice.call(h)),function(f,m){return m?f:null}).filter(Boolean)}
function Et(g,c){var h=0,f,m;return c.map(function(n){for(;m=g[h];)if(m[0]<n[0])h++;else break;if(m&&m[0]===n[0]){for(f=h;m=g[f];)if(m[1]<n[1])f++;else break;if(m&&m[1]===n[1])return Wh.range(h,f)}return[]})}function Rv(g,c,h){h=h||0;h+c>g.length&&(h-=h+c-g.length);return{array:g,from:h,to:h+c}}function Sv(g){return g.array.slice(g.from,g.to)}function Tv(g,c){return c<g.from||c>=g.to?null:c-g.from}function $y(g,c){return 0>c||c>g.to-g.from?null:g.from+c}function az(g,c){if(!(c in g.array))return null;
var h=0;c<g.from&&(h=-g.from+c);c>=g.to&&(h=c-g.to+1);return 0===h?g:an.create(g.array,g.to-g.from,g.from+h)}function bz(g,c,h){return(g=g[c])?g[h]:void 0}function cz(g,c,h,f){(g=g[c])&&(g[h]=f);return f}function Ft(g,c){return g[c]}function Uv(g,c,h){return g[c]=h}function Gt(g,c){return g.reduce(function(h,f){h.push(f[c]);return h},[])}function Vv(g,c,h){return g.map(function(f,m){return f[c]?f[c]=h[m]:void 0})}function dz(g,c,h){for(var f=Array(g);0<g;)f[--g]=wh.arrayWithN(c,h);return f}function Wv(g,
c,h,f){for(var m=Array(g),n=0;n<g;n++){m[n]=Array(c);for(var a=0;a<c;a++)m[n][a]=h.call(f||this,n,a)}return m}function Xv(g,c,h){g.forEach(function(f,m){f.forEach(function(n,a){c.call(h||this,n,m,a)})})}function Ht(g,c,h){var f=Array(g.length);g.forEach(function(m,n){f[n]=Array(m.length);m.forEach(function(a,d){f[n][d]=c.call(h||this,a,n,d)})});return f}function Yv(g){for(var c=g[0],h=Array(g.length-1),f=1;f<g.length;f++)for(var m=h[f-1]={},n=0;n<c.length;n++)m[c[n]]=g[f][n];return h}function ez(g,
c){Array.isArray(g)||(g=[g]);var h=[[]],f=h[0],m=g.reduce(function(n,a){return n.concat([Object.keys(a).reduce(function(d,k){var b=f.indexOf(k);-1===b&&(b=f.length,f.push(k));d[b]=a[k];return d},[])])},[]);c=1===arguments.length?null:c;m.forEach(function(n){for(var a=0;a<f.length;a++)n[a]||(n[a]=c)});return h.concat(m)}function Zv(g,c,h,f,m){f=void 0===f?{i:0}:f;m=void 0===m?0:m;var n=f.i++;c(g,n,m);(h(g,n,m)||[]).forEach(function(a){return Zv(a,c,h,f,m+1)})}function It(g,c,h,f,m){f=void 0===f?{i:0}:
f;m=void 0===m?0:m;var n=f.i++;(h(g,n,m)||[]).forEach(function(a){return It(a,c,h,f,m)});c(g,n,m)}function $v(g,c,h){if(c(g))return g;if((g=h(g))&&g.length)for(var f=0;f<g.length;f++){var m=$v(g[f],c,h);if(m)return m}}function aw(g,c,h){var f=[];c(g)&&f.push(g);return f.concat(uk.flatten((h(g)||[]).map(function(m){return aw(m,c,h)})))}function bw(g,c,h,f){f=void 0===f?0:f;return[c(g,f)].concat(uk.flatten((h(g)||[]).map(function(m){return bw(m,c,h,f+1)})))}function Up(g,c,h,f){f=void 0===f?0:f;var m=
(h(g)||[]).map(function(n){return Up(n,c,h,f+1)});return c(g,m,f)}function cw(g){var c=[{name:"send",args:["msg","callback"]},{name:"listen",args:["messenger","callback"]},{name:"close",args:["messenger","callback"]},{name:"isOnline",args:[]}],h=c.map(function(a){return a.name}).concat("id sendHeartbeat heartbeatInterval ignoreUnknownMessages allowConcurrentSends sendTimeout services".split(" "));c.forEach(function(a){if(!g[a.name])throw a="message implementation needs function "+a.name+"("+a.args.join(",")+
")",Error(a);});c=g.sendHeartbeat&&(g.heartbeatInterval||1E3);var f=g.hasOwnProperty("ignoreUnknownMessages")?g.ignoreUnknownMessages:!1,m={_outgoing:[],_inflight:[],_id:g.id||Xk.newUUID(),_ignoreUnknownMessages:f,_services:{},_messageCounter:0,_messageResponseCallbacks:{},_whenOnlineCallbacks:[],_statusWatcherProc:null,_startHeartbeatProcessProc:null,_listenInProgress:null,_heartbeatInterval:c,_status:Xk.OFFLINE,_runWhenOnlineCallbacks:function(){var a=m._whenOnlineCallbacks.slice();m._whenOnlineCallbacks=
[];a.forEach(function(d){try{d.call(null,null,m)}catch(k){console.error("error in _runWhenOnlineCallbacks: %s",k)}})},_ensureStatusWatcher:function(){m._statusWatcherProc||(m._statusWatcherProc=setInterval(function(){m.isOnline()&&m._whenOnlineCallbacks.length&&m._runWhenOnlineCallbacks();var a=m._status;m._status=m.isOnline()?Xk.ONLINE:Xk.OFFLINE;m._status!==Xk.ONLINE&&m._statusWatcherProc&&m.reconnect();if(m._status!==a&&m.onStatusChange)m.onStatusChange()},20))},_addMissingData:function(a){if(!a.target)throw Error("Message needs target!");
if(!a.action)throw Error("Message needs action!");a.data||(a.data=null);a.messageId||(a.messageId=Xk.newUUID());a.sender=m.id();a.messageIndex=m._messageCounter++;return a},_queueSend:function(a,d){if(d&&"function"!==typeof d)throw Error("Expecing a when send callback, got: "+d);m._outgoing.push([a,d])},_deliverMessageQueue:function(){function a(b){if(-1!==m._inflight.indexOf(b)){var e=b[0],l=b[1];l&&(m._messageResponseCallbacks[e.messageId]=l);g.send.call(m,e,function(p){Xk.remove(m._inflight,b);
p&&d(p,b);m._deliverMessageQueue()})}}function d(b,e){var l=e[1];delete m._messageResponseCallbacks[e[0].messageId];console.error(b);l&&l(b)}if(g.allowConcurrentSends||!m._inflight.length){var k=m._outgoing.shift();k&&(m._inflight.push(k),m.isOnline()?a(k):m.whenOnline(function(){a(k)}),function(b){"number"===typeof g.sendTimeout&&setTimeout(function(){-1!==m._inflight.indexOf(b)&&(Xk.remove(m._inflight,b),d(Error("Timeout sending message"),b),m._deliverMessageQueue())},g.sendTimeout)}(k),g.allowConcurrentSends&&
m._outgoing.length&&m._deliverMessageQueue())}},_startHeartbeatProcess:function(){m._startHeartbeatProcessProc||(m._startHeartbeatProcessProc=setTimeout(function(){g.sendHeartbeat.call(m,function(a,d){m._startHeartbeatProcessProc=null;m._startHeartbeatProcess()})},m._heartbeatInterval))},id:function(){return m._id},isOnline:function(){return g.isOnline.call(m)},heartbeatEnabled:function(){return"number"===typeof m._heartbeatInterval},listen:function(a){if(!m._listenInProgress)return m._listenInProgress=
!0,m._ensureStatusWatcher(),g.listen.call(m,function(d){m._listenInProgress=null;a&&a(d);m.heartbeatEnabled()&&m._startHeartbeatProcess()})},reconnect:function(){if(m._status!==Xk.ONLINE)return m.listen(),m},send:function(a,d){m._addMissingData(a);m._queueSend(a,d);m._deliverMessageQueue();return a},sendTo:function(a,d,k,b){return m.send({target:a,action:d,data:k},b)},onMessage:function(a){m.emit("message",a);if(a.inResponseTo){var d=m._messageResponseCallbacks[a.inResponseTo];d&&!a.expectMoreResponses&&
delete m._messageResponseCallbacks[a.inResponseTo];d&&d(null,a)}else if(d=m._services[a.action])try{d.call(null,a,m)}catch(k){d=String(k.stack||k),console.error("Error invoking service: "+d),m.answer(a,{error:d})}else m._ignoreUnknownMessages||m.answer(a,{error:String(Error("messageNotUnderstood: "+a.action))})},answer:function(a,d,k,b){"function"===typeof k&&(b=k,k=!1);a={target:a.sender,action:a.action+"Result",inResponseTo:a.messageId,data:d};k&&(a.expectMoreResponses=!0);return m.send(a,b)},close:function(a){clearInterval(m._statusWatcherProc);
m._statusWatcherProc=null;g.close.call(m,function(d){m._status=Xk.OFFLINE;a&&a(d)});return m},whenOnline:function(a){m._whenOnlineCallbacks.push(a);m.isOnline()&&m._runWhenOnlineCallbacks();return m},outgoingMessages:function(){return Xk.pluck(m._inflight.concat(m._outgoing),0)},addServices:function(a){Object.assign(m._services,a);return m}};g.services&&m.addServices(g.services);Xk.makeEmitter(m);for(var n in g)-1===h.indexOf(n)&&g.hasOwnProperty(n)&&(m[n]=g[n]);return m}function fz(g,c,h){h||(h=
c,c=g,g=null);g=g||{};var f=g.args||[];g=xh.create(g);g.run.apply(g,[c].concat(f).concat(h));return g}function $q(g){g=g||{};g.useMessenger=!0;var c=g.workerId||xh.newUUID(),h=xh.messengerCreate({sendTimeout:5E3,send:function(f,m){h.worker.postMessage(f);m()},listen:function(f){var m=h.worker=xh.isNodejs?xh.NodejsWorker.create(g):xh.BrowserWorker.create(g);m.on("message",function(n){h.onMessage(n)});m.on("ready",function(){xh.NodejsWorker.debug&&console.log("WORKER READY!!!")});m.on("close",function(){xh.NodejsWorker.debug&&
console.log("WORKER CLOSED...!!!")});m.once("ready",f)},close:function(f){return h.worker.ready?h.sendTo(c,"close",{},function(m,n){(m=m||n.data.error)&&console.error("Error in worker messenger close: "+m.stack||m);if(m)f(m);else{var a=!1;h.worker.once("close",function(){a=!0});xh.waitFor(1E3,function(){return!!a},f)}}):f(null)},isOnline:function(){return h.worker&&h.worker.ready}});Object.assign(h,{eval:function(f,m){h.sendTo(c,"remoteEval",{expr:f},function(n,a){m(n,a?a.data.result:null)})},run:function(){var f=
Array.prototype.slice.call(arguments),m=f.shift(),n=f.pop();if("function"!==typeof m)throw Error("run: no function that should run in worker passed");if("function"!==typeof n)throw Error("run: no callback passed");return h.sendTo(c,"run",{func:String(m),args:f},function(a,d){n(a||d.data.error,d?d.data.result:null)})}});h.listen();return h}function Zo(){if(!Nd.isNode||Nd.GLOBAL.lively||Nd.GLOBAL.lively)if(Nd.livelyLang._prevLivelyGlobal=Nd.GLOBAL.lively,Nd.GLOBAL.lively||(Nd.GLOBAL.lively={}),Nd.GLOBAL.lively.lang)for(var g in Nd.livelyLang)Nd.GLOBAL.lively.lang[g]=
Nd.livelyLang[g];else Nd.GLOBAL.lively.lang=Nd.livelyLang}function so(g){if(!g)return g;if(Array.isArray(g))return Nd.createChain(Nd.arr,g);if("Date"===g.constructor.name)return Nd.createChain(Nd.date,g);switch(typeof g){case "string":return Nd.createChain(Nd.string,g);case "object":return Nd.createChain(Nd.obj,g);case "function":return Nd.createChain(Nd.fun,g);case "number":return Nd.createChain(Nd.num,g)}throw Error("Chain for object "+g+" ("+g.constructor.name+") no supported");}function dw(){Nd.isNode||
(Nd.livelyLang._prevLivelyGlobal?delete Nd.GLOBAL.lively.lang:delete Nd.GLOBAL.lively);return Nd.livelyLang}function ew(){Object.assign(Nd.livelyLang,{worker:Nd.worker,messenger:Nd.messenger,events:Nd.events,tree:Nd.tree,grid:Nd.grid,arrayProjection:Nd.arrayProjection,interval:Nd.interval,graph:Nd.graph,date:Nd.date,properties:Nd.properties,obj:Nd.obj,arr:Nd.arr,fun:Nd.fun,num:Nd.num,string:Nd.string,Closure:Nd.Closure,promise:Nd.promise,Path:Nd.Path,Group:Nd.Group});Nd.globalInterfaceSpec.forEach(function(g){if("installMethods"===
g.action){var c=Nd.Path(g.target);c.isIn(Nd.GLOBAL)||c.set(Nd.GLOBAL,{},!0);var h=Nd.Path(g.sources[0]);g.methods.forEach(function(f){Nd.installProperty(h.concat([f]),c.concat([f]))});g.alias&&g.alias.forEach(function(f){Nd.installProperty(h.concat([f[1]]),c.concat([f[0]]))})}else if("installObject"===g.action)c=Nd.Path(g.target),g=Nd.Path(g.source).get(Nd.livelyLang),c.set(Nd.GLOBAL,g,!0);else throw Error("Cannot deal with global setup action: "+g.action);})}function gz(){Nd.globalInterfaceSpec.forEach(function(g){if("installMethods"===
g.action){var c=Nd.Path(g.target),h=Nd.Path(g.source).get(Nd.livelyLang),f=c.get(Nd.GLOBAL);f&&(g.methods.filter(function(m){return h===f[m]}).forEach(function(m){delete f[m]}),g.alias&&g.alias.filter(function(m){return h===f[m]}).forEach(function(m){delete f[m[0]]}))}else if("installObject"===g.action)c=Nd.Path(g.target),c.del(Nd.GLOBAL);else throw Error("Cannot deal with global setup action: "+g.action);})}function fw(g,c){var h=void 0===g.useProxy?!0:g.useProxy,f=void 0===g.useCors?!0:g.useCors,
m=g.url,n=g.onLoad,a=g.headers,d=g.onProgress,k=new xg.XMLHttpRequest,b=xg.promise.deferred();k.open("PUT",m);h&&(Object.assign(a,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":m}),m=g.proxyDomain||xg.defaultOrigin());for(var e in a)k.setRequestHeader(e,a[e]);k.upload.addEventListener("progress",d);k.responseType="json";k.onload=function(){n(k.response);b.resolve(k)};f&&(k.withCredentials=!0);k.send(c);return b.promise}function hz(g,c,h){c=void 0===c?"infinity":c;var f,m,n,
a,d,k,b,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:return z.yield(g.dirList(c,h),2);case 2:f=z.yieldResult,m={},n=$jscomp.makeIterator(f),a=n.next();case 3:if(a.done){z.jumpTo(5);break}d=a.value;if(d.isDirectory()){k={};z.jumpTo(6);break}return z.yield(d.read(),7);case 7:k=z.yieldResult;case 6:b=k;e=d.asFile().relativePathFrom(g).split("/");l=m;p=$jscomp.makeIterator(e.slice(0,-1));for(u=p.next();!u.done;u=p.next())x=u.value,l[x]||(l[x]={}),
l=l[x];l[e[e.length-1]]=b;a=n.next();z.jumpTo(3);break;case 5:return z.return(m)}})}function gw(g){var c,h,f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return c=document.head,h=c.namespaceURI,f=Oh.newUUID(),m=document.createElementNS(h,"script"),m.setAttribute("type","module"),c.appendChild(m),m.innerText="import m from '"+g+"'; window['"+f+"'] = m;",m.setAttributeNS(null,"async",!0),a.yield(Oh.waitFor(3E4,function(){return window[f]}),2);n=a.yieldResult;
delete window[f];m.remove();return a.return(n)})}function os(g,c){var h=document.head,f=h.namespaceURI;return new Promise(function(m,n){var a=document.createElementNS(f,"script");a.setAttribute("type","text/ecmascript");h.appendChild(a);a.setAttributeNS(null,"id",g);"http://www.w3.org/2000/svg"===a.namespaceURI?a.setAttributeNS("http://www.w3.org/1999/xlink","href",g):a.setAttribute("src",g);a.onload=m;a.onerror=n;a.setAttributeNS(null,"async",!0)})}function Jt(){var g,c,h,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:if("fetch"in
System.global&&"Headers"in System.global)return m.return(Promise.resolve());g=System.decanonicalize("lively.resources");if(System.get("@system-env").node){m.setCatchFinallyBlocks(5);c=System._nodeRequire("fetch-ponyfill");m.leaveTryBlock(3);break}return m.yield(System.import("fetch-ponyfill",g),4);case 4:c=m.yieldResult;m.jumpTo(3);break;case 5:return m.enterCatchBlock(),m.yield(System.normalize("fetch-ponyfill",g),7);case 7:return h=m.yieldResult.replace("file://",""),m.yield(System.import(h),8);
case 8:f=m.yieldResult,c=f.default;case 3:Object.assign(System.global,c()),m.jumpToEnd()}})}function hw(g){return(g=g.match(XZ))?{scheme:g[1],auth:g[2],host:g[3],port:g[4],path:g[5]}:null}function ja(g){var c="";g.scheme&&(c+=g.scheme+":");c+="//";g.auth&&(c+=g.auth+"@");g.host&&(c+=g.host);g.port&&(c+=":"+g.port);g.path&&(c+=g.path);return c}function Ba(g){var c=g,h=hw(g);if(h){if(!h.path)return g;c=h.path}g=Kl.isAbsolute(c);c=c.split(/\/+/);for(var f,m=0,n=c.length-1;0<=n;n--)f=c[n],"."===f?c.splice(n,
1):".."===f?m++:0<m&&(""===f?(c.splice(n+1,m),m=0):(c.splice(n,2),m--));c=c.join("/");""===c&&(c=g?"/":".");return h?(h.path=c,ja(h)):c}function hb(g,c){""===g&&(g=".");""===c&&(c=".");var h=hw(c),f=hw(g);f&&(g=f.path||"/");if(h&&!h.scheme)return f&&(h.scheme=f.scheme),ja(h);if(h||c.match(Cfa))return c;if(f&&!f.host&&!f.path)return f.host=c,ja(f);g="/"===c.charAt(0)?c:Ba(g.replace(/\/+$/,"")+"/"+c);return f?(f.path=g,ja(f)):g}function Eb(g){return g}function kc(g){return Jd(g)?"$"+g:g}function zc(g){return Jd(g)?
g.slice(1):g}function Jd(g){if(!g)return!1;var c=g.length;if(9>c||95!==g.charCodeAt(c-1)||95!==g.charCodeAt(c-2)||111!==g.charCodeAt(c-3)||116!==g.charCodeAt(c-4)||111!==g.charCodeAt(c-5)||114!==g.charCodeAt(c-6)||112!==g.charCodeAt(c-7)||95!==g.charCodeAt(c-8)||95!==g.charCodeAt(c-9))return!1;for(c-=10;0<=c;c--)if(36!==g.charCodeAt(c))return!1;return!0}function Xe(g,c){return g===c?0:null===g?1:null===c?-1:g>c?1:-1}function $e(){(this||Km)._array=[];(this||Km)._set=iw?new Map:Object.create(null)}
function ag(){(this||$o)._array=[];(this||$o)._sorted=!0;(this||$o)._last={generatedLine:-1,generatedColumn:0}}function Yf(g){g||(g={});(this||Xh)._file=rl.getArg(g,"file",null);(this||Xh)._sourceRoot=rl.getArg(g,"sourceRoot",null);(this||Xh)._skipValidation=rl.getArg(g,"skipValidation",!1);(this||Xh)._sources=new FG;(this||Xh)._names=new FG;(this||Xh)._mappings=new Dfa;(this||Xh)._sourcesContents=null}function Wi(g,c,h,f,m,n){var a=Math.floor((c-g)/2)+g,d=m(h,f[a],!0);return 0===d?a:0<d?1<c-a?Wi(a,
c,h,f,m,n):n==GG.LEAST_UPPER_BOUND?c<f.length?c:-1:a:1<a-g?Wi(g,a,h,f,m,n):n==GG.LEAST_UPPER_BOUND?a:0>g?-1:g}function Oj(g,c,h){var f=g[c];g[c]=g[h];g[h]=f}function Yh(g,c,h,f){if(h<f){var m=h-1;Oj(g,Math.round(h+Math.random()*(f-h)),f);for(var n=g[f],a=h;a<f;a++)0>=c(g[a],n)&&(m+=1,Oj(g,m,a));Oj(g,m+1,a);m+=1;Yh(g,c,h,m-1);Yh(g,c,m+1,f)}}function Xi(g,c){var h=g;"string"===typeof g&&(h=lg.parseSourceMapInput(g));return null!=h.sections?new sl(h,c):new Ji(h,c)}function Ji(g,c){var h=g;"string"===
typeof g&&(h=lg.parseSourceMapInput(g));g=lg.getArg(h,"version");var f=lg.getArg(h,"sources"),m=lg.getArg(h,"names",[]),n=lg.getArg(h,"sourceRoot",null),a=lg.getArg(h,"sourcesContent",null),d=lg.getArg(h,"mappings");h=lg.getArg(h,"file",null);if(g!=(this||af)._version)throw Error("Unsupported version: "+g);n&&(n=lg.normalize(n));f=f.map(String).map(lg.normalize).map(function(k){return n&&lg.isAbsolute(n)&&lg.isAbsolute(k)?lg.relative(n,k):k});(this||af)._names=iz.fromArray(m.map(String),!0);(this||
af)._sources=iz.fromArray(f,!0);(this||af)._absoluteSources=(this||af)._sources.toArray().map(function(k){return lg.computeSourceURL(n,k,c)});(this||af).sourceRoot=n;(this||af).sourcesContent=a;(this||af)._mappings=d;(this||af)._sourceMapURL=c;(this||af).file=h}function ik(){(this||af).generatedLine=0;(this||af).generatedColumn=0;(this||af).source=null;(this||af).originalLine=null;(this||af).originalColumn=null;(this||af).name=null}function sl(g,c){var h=g;"string"===typeof g&&(h=lg.parseSourceMapInput(g));
g=lg.getArg(h,"version");h=lg.getArg(h,"sections");if(g!=(this||af)._version)throw Error("Unsupported version: "+g);(this||af)._sources=new iz;(this||af)._names=new iz;var f={line:-1,column:0};(this||af)._sections=h.map(function(m){if(m.url)throw Error("Support for url field in sections not implemented.");var n=lg.getArg(m,"offset"),a=lg.getArg(n,"line"),d=lg.getArg(n,"column");if(a<f.line||a===f.line&&d<f.column)throw Error("Section offsets must be ordered and non-overlapping.");f=n;return{generatedOffset:{generatedLine:a+
1,generatedColumn:d+1},consumer:new Xi(lg.getArg(m,"map"),c)}})}function Lm(g,c,h,f,m){(this||Yi).children=[];(this||Yi).sourceContents={};(this||Yi).line=null==g?null:g;(this||Yi).column=null==c?null:c;(this||Yi).source=null==h?null:h;(this||Yi).name=null==m?null:m;(this||Yi).$$$isSourceNode$$$=!0;null!=f&&this.add(f)}function Bk(g,c){c=void 0===c?{}:c;var h=Object.assign({indent:{style:"  ",base:0,adjustMultilineComment:!1,optsIndent:c&&c.format&&c.format.indent||{}},quotes:"double"},to.obj.dissoc(c&&
c.format||{},["indent"]));c=Object.assign({format:h,comment:!1},to.obj.dissoc(c,["format"]));return to.es.generate(g,c)}function ps(g,c){for(var h=65536,f=0;f<c.length;f+=2){h+=c[f];if(h>g)return!1;h+=c[f+1];if(h>=g)return!0}}function un(g,c){return 65>g?36===g:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&Efa.test(String.fromCharCode(g)):!1===c?!1:ps(g,YZ)}function ap(g,c){return 48>g?36===g:58>g?!0:65>g?!1:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&Ffa.test(String.fromCharCode(g)):!1===c?!1:
ps(g,YZ)||ps(g,Gfa)}function bp(g,c){return new uj(g,{beforeExpr:!0,binop:c})}function dj(g,c){void 0===c&&(c={});c.keyword=g;return HG[g]=new uj(g,c)}function jz(g,c){return 10===g||13===g||!c&&(8232===g||8233===g)}function jw(g){return new RegExp("^(?:"+g.replace(/ /g,"|")+")$")}function pQ(g,c){for(var h=1,f=0;;){kz.lastIndex=f;var m=kz.exec(g);if(m&&m.index<c)++h,f=m.index+m[0].length;else return new lz(h,c-f)}}function Hfa(g){var c={},h;for(h in IG)c[h]=g&&JG.call(g,h)?g[h]:IG[h];"latest"===
c.ecmaVersion?c.ecmaVersion=1E8:null==c.ecmaVersion?(!ZZ&&"object"===typeof console&&console.warn&&(ZZ=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),c.ecmaVersion=11):2015<=c.ecmaVersion&&(c.ecmaVersion-=2009);null==c.allowReserved&&(c.allowReserved=5>c.ecmaVersion);if($Z(c.onToken)){var f=c.onToken;c.onToken=function(m){return f.push(m)}}$Z(c.onComment)&&(c.onComment=Ifa(c,c.onComment));return c}function Ifa(g,
c){return function(h,f,m,n,a,d){h={type:h?"Block":"Line",value:f,start:m,end:n};g.locations&&(h.loc=new kC(this,a,d));g.ranges&&(h.range=[m,n]);c.push(h)}}function KG(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function a_(g,c,h,f){g.type=c;g.end=h;this.options.locations&&(g.loc.end=f);this.options.ranges&&(g.range[1]=h);return g}function LG(g){g=b_[g]={binary:jw(Jfa[g]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:jw("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:jw(Kfa[g])}};g.nonBinary.Script_Extensions=g.nonBinary.Script;g.nonBinary.gc=g.nonBinary.General_Category;g.nonBinary.sc=g.nonBinary.Script;g.nonBinary.scx=g.nonBinary.Script_Extensions}function MG(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function c_(g){return 36===g||40<=g&&43>=g||46===g||63===g||91<=g&&94>=g||123<=g&&125>=g}function d_(g){return 65<=g&&90>=g||97<=g&&122>=g||95===g}function Lfa(g){return d_(g)||NG(g)}function NG(g){return 48<=
g&&57>=g}function e_(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g}function f_(g){return 65<=g&&70>=g?10+(g-65):97<=g&&102>=g?10+(g-97):g-48}function g_(g){return"function"!==typeof BigInt?null:BigInt(g.replace(/_/g,""))}function qQ(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function OG(g){return"string"===typeof g?function(c){return c===g}:g?g:function(){return!0}}function h_(g,c){c=Object.create(c||nf);for(var h in g)c[h]=
g[h];return c}function rQ(g,c,h){h(g,c)}function kw(g,c,h){}function sQ(g,c){for(var h=65536,f=0;f<c.length;f+=2){h+=c[f];if(h>g)return!1;h+=c[f+1];if(h>=g)return!0}}function qs(g,c){return 65>g?36===g:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&Mfa.test(String.fromCharCode(g)):!1===c?!1:sQ(g,i_)}function mz(g,c){return 48>g?36===g:58>g?!0:65>g?!1:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&Nfa.test(String.fromCharCode(g)):!1===c?!1:sQ(g,i_)||sQ(g,Ofa)}function cp(g,c){return new vj(g,{beforeExpr:!0,
binop:c})}function ej(g,c){void 0===c&&(c={});c.keyword=g;return tQ[g]=new vj(g,c)}function Kt(g,c){return 10===g||13===g||!c&&(8232===g||8233===g)}function lw(g){return new RegExp("^(?:"+g.replace(/ /g,"|")+")$")}function lC(g,c){for(var h=1,f=0;;){mw.lastIndex=f;var m=mw.exec(g);if(m&&m.index<c)++h,f=m.index+m[0].length;else return new mC(h,c-f)}}function Pfa(g){var c={},h;for(h in PG)c[h]=g&&nC.call(g,h)?g[h]:PG[h];"latest"===c.ecmaVersion?c.ecmaVersion=1E8:null==c.ecmaVersion?(!j_&&"object"===
typeof console&&console.warn&&(j_=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),c.ecmaVersion=11):2015<=c.ecmaVersion&&(c.ecmaVersion-=2009);null==c.allowReserved&&(c.allowReserved=5>c.ecmaVersion);if(k_(c.onToken)){var f=c.onToken;c.onToken=function(m){return f.push(m)}}k_(c.onComment)&&(c.onComment=Qfa(c,c.onComment));return c}function Qfa(g,c){return function(h,f,m,n,a,d){h={type:h?"Block":"Line",value:f,start:m,
end:n};g.locations&&(h.loc=new nz(this,a,d));g.ranges&&(h.range=[m,n]);c.push(h)}}function QG(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function RG(g,c){var h=g.key;return!g.computed&&("Identifier"===h.type&&h.name===c||"Literal"===h.type&&h.value===c)}function l_(g){return"MemberExpression"===g.type&&"PrivateIdentifier"===g.property.type||"ChainExpression"===g.type&&l_(g.expression)}function m_(g,c,h,f){g.type=c;g.end=h;this.options.locations&&
(g.loc.end=f);this.options.ranges&&(g.range[1]=h);return g}function SG(g){g=n_[g]={binary:lw(Rfa[g]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:lw("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:lw(Sfa[g])}};g.nonBinary.Script_Extensions=g.nonBinary.Script;g.nonBinary.gc=g.nonBinary.General_Category;g.nonBinary.sc=g.nonBinary.Script;g.nonBinary.scx=g.nonBinary.Script_Extensions}function TG(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function o_(g){return 36===g||40<=g&&43>=g||46===g||63===g||91<=g&&94>=g||123<=g&&125>=g}function p_(g){return 65<=g&&90>=g||97<=g&&122>=g||95===g}function Tfa(g){return p_(g)||UG(g)}function UG(g){return 48<=
g&&57>=g}function q_(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g}function r_(g){return 65<=g&&70>=g?10+(g-65):97<=g&&102>=g?10+(g-97):g-48}function s_(g){return"function"!==typeof BigInt?null:BigInt(g.replace(/_/g,""))}function VG(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function ar(g){return"\u2716"===g.name}function t_(){}function Ufa(g){return 14>g&&8<g||32===g||160===g||Kt(g)}function WG(g,c,h,f){var m=[];f=f||kf.walk.make(kf.custom.withMemberExpression);
Object.keys(kf.walk.base).forEach(function(n){var a=f[n];f[n]=function(d,k,b){kf.arr.pushIfNotIncluded(m,d);return a(d,k,b)}});f.Property=function(n,a,d){kf.arr.pushIfNotIncluded(m,n);d(n.key,a,"Expression");d(n.value,a,"Expression")};f.LabeledStatement=function(n,a,d){n.label&&d(n.label,a,"Expression");d(n.body,a,"Statement")};kf.walk.findNodeAround(g,c,h,f);return m}function uQ(g,c){function h(m){return null===m?null:f[m.type](m,h)}var f=kf.obj.extend({Program:function(m,n){return{start:m.start,
end:m.end,type:"Program",body:m.body.map(n),source:m.source,astIndex:m.astIndex}},FunctionDeclaration:function(m,n){return{start:m.start,end:m.end,type:"FunctionDeclaration",id:n(m.id),params:m.params.map(n),body:n(m.body),source:m.source,astIndex:m.astIndex}},BlockStatement:function(m,n){return{start:m.start,end:m.end,type:"BlockStatement",body:m.body.map(n),source:m.source,astIndex:m.astIndex}},ExpressionStatement:function(m,n){return{start:m.start,end:m.end,type:"ExpressionStatement",expression:n(m.expression),
source:m.source,astIndex:m.astIndex}},CallExpression:function(m,n){return{start:m.start,end:m.end,type:"CallExpression",callee:n(m.callee),arguments:m.arguments.map(n),source:m.source,astIndex:m.astIndex}},MemberExpression:function(m,n){return{start:m.start,end:m.end,type:"MemberExpression",object:n(m.object),property:n(m.property),computed:m.computed,source:m.source,astIndex:m.astIndex}},NewExpression:function(m,n){return{start:m.start,end:m.end,type:"NewExpression",callee:n(m.callee),arguments:m.arguments.map(n),
source:m.source,astIndex:m.astIndex}},VariableDeclaration:function(m,n){return{start:m.start,end:m.end,type:"VariableDeclaration",declarations:m.declarations.map(n),kind:m.kind,source:m.source,astIndex:m.astIndex}},VariableDeclarator:function(m,n){return{start:m.start,end:m.end,type:"VariableDeclarator",id:n(m.id),init:n(m.init),source:m.source,astIndex:m.astIndex}},FunctionExpression:function(m,n){return{start:m.start,end:m.end,type:"FunctionExpression",id:n(m.id),params:m.params.map(n),body:n(m.body),
source:m.source,astIndex:m.astIndex}},IfStatement:function(m,n){return{start:m.start,end:m.end,type:"IfStatement",test:n(m.test),consequent:n(m.consequent),alternate:n(m.alternate),source:m.source,astIndex:m.astIndex}},ConditionalExpression:function(m,n){return{start:m.start,end:m.end,type:"ConditionalExpression",test:n(m.test),consequent:n(m.consequent),alternate:n(m.alternate),source:m.source,astIndex:m.astIndex}},SwitchStatement:function(m,n){return{start:m.start,end:m.end,type:"SwitchStatement",
discriminant:n(m.discriminant),cases:m.cases.map(n),source:m.source,astIndex:m.astIndex}},SwitchCase:function(m,n){return{start:m.start,end:m.end,type:"SwitchCase",test:n(m.test),consequent:m.consequent.map(n),source:m.source,astIndex:m.astIndex}},BreakStatement:function(m,n){return{start:m.start,end:m.end,type:"BreakStatement",label:m.label,source:m.source,astIndex:m.astIndex}},ContinueStatement:function(m,n){return{start:m.start,end:m.end,type:"ContinueStatement",label:m.label,source:m.source,astIndex:m.astIndex}},
TryStatement:function(m,n){return{start:m.start,end:m.end,type:"TryStatement",block:n(m.block),handler:n(m.handler),finalizer:n(m.finalizer),guardedHandlers:m.guardedHandlers.map(n),source:m.source,astIndex:m.astIndex}},CatchClause:function(m,n){return{start:m.start,end:m.end,type:"CatchClause",param:n(m.param),guard:n(m.guard),body:n(m.body),source:m.source,astIndex:m.astIndex}},ThrowStatement:function(m,n){return{start:m.start,end:m.end,type:"ThrowStatement",argument:n(m.argument),source:m.source,
astIndex:m.astIndex}},ForStatement:function(m,n){return{start:m.start,end:m.end,type:"ForStatement",init:n(m.init),test:n(m.test),update:n(m.update),body:n(m.body),source:m.source,astIndex:m.astIndex}},ForInStatement:function(m,n){return{start:m.start,end:m.end,type:"ForInStatement",left:n(m.left),right:n(m.right),body:n(m.body),source:m.source,astIndex:m.astIndex}},WhileStatement:function(m,n){return{start:m.start,end:m.end,type:"WhileStatement",test:n(m.test),body:n(m.body),source:m.source,astIndex:m.astIndex}},
DoWhileStatement:function(m,n){return{start:m.start,end:m.end,type:"DoWhileStatement",test:n(m.test),body:n(m.body),source:m.source,astIndex:m.astIndex}},WithStatement:function(m,n){return{start:m.start,end:m.end,type:"WithStatement",object:n(m.object),body:n(m.body),source:m.source,astIndex:m.astIndex}},UnaryExpression:function(m,n){return{start:m.start,end:m.end,type:"UnaryExpression",argument:n(m.argument),operator:m.operator,prefix:m.prefix,source:m.source,astIndex:m.astIndex}},BinaryExpression:function(m,
n){return{start:m.start,end:m.end,type:"BinaryExpression",left:n(m.left),operator:m.operator,right:n(m.right),source:m.source,astIndex:m.astIndex}},LogicalExpression:function(m,n){return{start:m.start,end:m.end,type:"LogicalExpression",left:n(m.left),operator:m.operator,right:n(m.right),source:m.source,astIndex:m.astIndex}},AssignmentExpression:function(m,n){return{start:m.start,end:m.end,type:"AssignmentExpression",left:n(m.left),operator:m.operator,right:n(m.right),source:m.source,astIndex:m.astIndex}},
UpdateExpression:function(m,n){return{start:m.start,end:m.end,type:"UpdateExpression",argument:n(m.argument),operator:m.operator,prefix:m.prefix,source:m.source,astIndex:m.astIndex}},ReturnStatement:function(m,n){return{start:m.start,end:m.end,type:"ReturnStatement",argument:n(m.argument),source:m.source,astIndex:m.astIndex}},Identifier:function(m,n){return{start:m.start,end:m.end,type:"Identifier",name:m.name,source:m.source,astIndex:m.astIndex}},Literal:function(m,n){return{start:m.start,end:m.end,
type:"Literal",value:m.value,raw:m.raw,source:m.source,astIndex:m.astIndex}},ObjectExpression:function(m,n){return{start:m.start,end:m.end,type:"ObjectExpression",properties:m.properties.map(function(a){return{key:n(a.key),value:n(a.value),kind:a.kind}}),source:m.source,astIndex:m.astIndex}},ArrayExpression:function(m,n){return{start:m.start,end:m.end,type:"ArrayExpression",elements:m.elements.map(n),source:m.source,astIndex:m.astIndex}},SequenceExpression:function(m,n){return{start:m.start,end:m.end,
type:"SequenceExpression",expressions:m.expressions.map(n),source:m.source,astIndex:m.astIndex}},EmptyStatement:function(m,n){return{start:m.start,end:m.end,type:"EmptyStatement",source:m.source,astIndex:m.astIndex}},ThisExpression:function(m,n){return{start:m.start,end:m.end,type:"ThisExpression",source:m.source,astIndex:m.astIndex}},DebuggerStatement:function(m,n){return{start:m.start,end:m.end,type:"DebuggerStatement",source:m.source,astIndex:m.astIndex}},LabeledStatement:function(m,n){return{start:m.start,
end:m.end,type:"LabeledStatement",label:m.label,body:n(m.body),source:m.source,astIndex:m.astIndex}}},c||{});return h(g)}function vQ(g,c,h){if(!c)return[];g=kf.findNodesIncluding(g,c.start);var f=g.indexOf(c);g=g.slice(0,f);g=kf.arr.detect(g.reverse(),function(m){return Array.isArray(m.body)}).body;if(!h)return kf.arr.without(g,c);c=g.indexOf(c);return"before"===h?g.slice(0,c):g.slice(c+1)}function wQ(g,c,h){g.astIndex||null!=h&&!h||kf.addAstIndex(g);var f=null;kf.withMozillaAstDo(g,null,function(m,
n,a){f||n.astIndex<c||(n.astIndex===c?f=n:m())});return f}function xQ(g,c,h){h||(h=c,c=g,g=null);g||(g={});c.astIndex||kf.addAstIndex(c);var f,m=!1,n="EmptyStatement BlockStatement ExpressionStatement IfStatement LabeledStatement BreakStatement ContinueStatement WithStatement SwitchStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration".split(" ");kf.withMozillaAstDo(c,
{},function(a,d,k,b){if(!(m||d.astIndex<h.astIndex)){if(d===h||d.astIndex===h.astIndex)if(m=!0,g.asPath)f=b;else{d=kf.Path(b);do f=d.get(c),d=d.slice(0,d.size()-1);while(-1==n.indexOf(f.type)&&0<d.size())}!m&&a()}});return f}function oC(g){kf.withMozillaAstDo(g,{index:0},function(c,h,f){c();h.astIndex=f.index++});return g}function XG(g,c){"string"===typeof g&&(c=g,g=yh.parse(g));c&&yh.AllNodesVisitor.run(g,function(h,f,m){return!h.source&&(h.source=c.slice(h.start,h.end))});return g}function Lt(g,
c){c=void 0===c?{}:c;var h=yh.parse("("+g+")",c);yh.AllNodesVisitor.run(h,function(f,m,n){if(!f._positionFixed){f._positionFixed=!0;if(f.start||0===f.start)f.start+=-1,f.end+=-1;c.addSource&&!f.source&&(f.source=g.slice(f.start,f.end))}});return h.body[0].expression}function rs(g,c){c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.sourceType=c.sourceType||"module";c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?
c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;var h;"LabeledStatement"===c.type&&(h="$={"+g+"}");try{var f=yh.parse(h||g,c);h?f=null:c.addSource&&yh.addSource(f,g)}catch(n){var m=n}m&&void 0!==m.raisedAt?(h&&(m.pos-=3,m.raisedAt-=3,m.loc.column-=3),h=""+g.slice(m.raisedAt-20,m.raisedAt),h=h+"<-error->"+g.slice(m.raisedAt,m.raisedAt+20),c.verbose&&console.log("parse error: "+h),m.parseErrorSource=h):m&&c.verbose&&
console.log(""+m+m.stack);f||(f=yh.loose.parse(g,c),c.addSource&&yh.addSource(f,g),f.isFuzzy=!0,f.parseError=m);return f}function kl(g,c){function h(l){l=m(f(l));a.allComments=l.comments}function f(l){n.forEach(function(p){var u=yh.arr.detect(yh.nodesAt(p.start,a).reverse(),function(x){return"BlockStatement"===x.type||"Program"===x.type});u||(u=a);u.comments||(u.comments=[]);u.comments.push(p);l.nodesWithComments.push(u)});return l}function m(l){l.nodesWithComments.forEach(function(p){yh.arr.clone(p.comments).reduce(function(u,
x){if(x.isBlock)return u.lastComment=null,u;if(!u.lastComment)return u.lastComment=x,u;var z=u.lastComment;if(yh.arr.detect(p.body,function(G){return G.start>=z.end&&G.end<=x.start}))return u.lastComment=x,u;var E=g.slice(z.end,x.start);if(/[\n\r][\n\r]+/.test(E))return u.lastComment=x,u;z.text+="\n"+x.text;z.end=x.end;yh.arr.remove(p.comments,x);yh.arr.remove(l.comments,x);return u},{lastComment:null})});return l}c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.allowAwaitOutsideFunction=!0;c.sourceType=
c.sourceType||"module";c.hasOwnProperty("allowImportExportEverywhere")||(c.allowImportExportEverywhere=!0);c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;if(c.withComments){delete c.withComments;var n=[];c.onComment=function(l,p,u,x,z,E){n.push({isBlock:l,text:p,node:null,
start:u,end:x,line:z,column:E})}}try{var a=yh.acorn.parse(g,c)}catch(l){if("undefined"!==typeof SyntaxError&&l instanceof SyntaxError&&l.loc){var d=g.split("\n"),k=l,b=k.loc;c=b.line;b=b.column;var e=k.pos;d=d[c-1];k="Syntax error at line "+c+" column "+b+" (index "+e+') "'+k.message+'"\nsource: '+d.slice(0,b)+"<--SyntaxError--\x3e"+d.slice(b);k=new SyntaxError(k);k.loc={line:c,column:b};k.pos=e;throw k;}throw l;}c.addSource&&yh.addSource(a,g);c.addAstIndex&&!a.hasOwnProperty("astIndex")&&yh.addAstIndex(a);
a&&n&&h({ast:a,comments:n,nodesWithComments:[]});return a}function YG(g){return ff.identifierRe.test(g)&&-1===g.indexOf("-")}function pC(g){return"this"===g?{type:"ThisExpression"}:{name:String(g),type:"Identifier"}}function ZG(g){return{type:"Literal",value:g}}function qC(g){return{type:"ExpressionStatement",expression:g}}function rC(g){return{type:"ReturnStatement",argument:g}}function $G(){return{type:"EmptyStatement"}}function aH(g,c,h){return{left:g,right:h,operator:c,type:"BinaryExpression"}}
function sC(g,c,h){for(var f=[],m=2;m<arguments.length;++m)f[m-2]=arguments[m];m=g.arrow;var n=g.id,a=g.expression,d=g.generator;c=void 0===c?[]:c;c=c.map(function(k){return"string"===typeof k?ff.id(k):k});return{type:(m?"Arrow":"")+"FunctionExpression",id:n?"string"===typeof n?ff.id(n):n:void 0,params:c,body:a&&1===f.length?f[0]:{body:f,type:"BlockStatement"},expression:a||!1,generator:d||!1}}function oz(g,c){for(var h=[],f=1;f<arguments.length;++f)h[f-1]=arguments[f];"string"===typeof g&&(g=ff.id(g));
return{type:"CallExpression",callee:g,arguments:h}}function tC(g,c,h){"string"===typeof g&&(g={name:g,type:"Identifier"});return{type:"VariableDeclaration",kind:h||"var",declarations:[{type:"VariableDeclarator",id:g,init:c}]}}function uC(g,c,h){"string"===typeof g&&(g=ff.id(g));"string"===typeof c?(h||ff.isIdentifier(c)||(h=!0),c=h?ff.literal(c):ff.id(c)):"number"===typeof c?(c=ff.literal(c),h=!0):"Literal"===c.type&&(h=!0);return{type:"MemberExpression",computed:!!h,object:g,property:c}}function vC(g,
c){for(var h=[],f=1;f<arguments.length;++f)h[f-1]=arguments[f];return h.reduce(function(m,n){return ff.member(m,n)},"object"===typeof g?g:ff.id(g))}function bH(g,c){return{type:"AssignmentExpression",operator:"=",right:c?"string"===typeof c?ff.id(c):c:ff.id("undefined"),left:"string"===typeof g?ff.id(g):g}}function wC(g){for(var c=[],h=0;h<arguments.length;++h)c[h-0]=arguments[h];return{body:Array.isArray(c[0])?c[0]:c,type:"BlockStatement"}}function xC(g){for(var c=[],h=0;h<arguments.length;++h)c[h-
0]=arguments[h];return Object.assign(ff.block.apply(ff,$jscomp.arrayFromIterable(c)),{sourceType:"module",type:"Program"})}function yC(g,c,h,f){for(var m=[],n=3;n<arguments.length;++n)m[n-3]=arguments[n];Array.isArray(h)||(m.unshift(h),h=null);return{block:ff.block(m),finalizer:h?ff.block(h):null,handler:{body:ff.block(c),param:ff.id(g),type:"CatchClause"},type:"TryStatement"}}function cH(g,c){return{type:"Property",key:g,computed:"Identifier"!==g.type,shorthand:!1,value:c}}function dH(g){for(var c=
[],h=0;h<g.length;h+=2){var f=g[h];"string"===typeof f&&(f=ff.id(f));c.push(ff.prop(f,g[h+1]))}return{properties:c,type:"ObjectExpression"}}function eH(g,c,h){c=void 0===c?ff.block():c;h=void 0===h?ff.block():h;return{consequent:c,alternate:h,test:g,type:"IfStatement"}}function fH(g,c,h){return{type:"ForInStatement",left:"string"===typeof g?ff.varDecl(g):g,right:"string"===typeof c?ff.id(c):c,body:h}}function gH(g,c,h){c=void 0===c?ff.id("undefined"):c;h=void 0===h?ff.id("undefined"):h;return{consequent:c,
alternate:h,test:g,type:"ConditionalExpression"}}function hH(g,c,h){return{operator:g,left:c,right:h,type:"LogicalExpression"}}function zC(g){var c=new Sd.ScopeVisitor,h=c.newScope(g,null);c.accept(g,h,[]);return h}function iH(g,c){return Sd.withMozillaAstDo(g,[],function(h,f,m){f.start<=c&&c<=f.end&&(m.push(f),h());return m})}function jH(g,c){return Sd.tree.filter(Sd.scopes(g),function(h){h=h.node;var f=h.start,m=h.end;"FunctionDeclaration"===h.type&&(f=h.params.length?h.params[0].start:h.body.start,
m=h.body.end);return f<=c&&c<=m},function(h){return h.subScopes})}function kH(g,c){return Sd.arr.last(Sd.scopesAtIndex(g,c))}function lH(g,c){return Sd.arr.filter(Sd.nodesAt(g,c),function(h){return"Program"===h.type||"FunctionDeclaration"===h.type||"FunctionExpression"===h.type})}function mH(g){return Sd.withMozillaAstDo(g,{root:g,result:[]},function(c,h,f){f.result.push(h);if(h!==f.root&&("Program"===h.type||"FunctionDeclaration"===h.type||"FunctionExpression"===h.type))return f;c();return f}).result}
function nH(g,c,h){h=void 0===h?[]:h;c&&g.node.id&&g.node.id.name&&h.push(g.node.id);Sd.helpers.declIds(g.params,h);for(c=0;c<g.funcDecls.length;c++){var f=g.funcDecls[c].id;f&&h.push(f)}Sd.helpers.varDeclIds(g,h);h.push.apply(h,$jscomp.arrayFromIterable(g.catches));for(c=0;c<g.classDecls.length;c++)(f=g.classDecls[c].id)&&h.push(f);h.push.apply(h,$jscomp.arrayFromIterable(g.importSpecifiers));return Sd.arr.compact(h)}function oH(g,c){for(var h=[],f=$jscomp.makeIterator(Sd.declarationsOfScope(g,!0)),
m=f.next();!m.done;m=f.next())h.push(m.value.name);c&&Sd._findJsLintGlobalDeclarations("Program"===g.node.type?g.node:g.node.body,h);return h}function pH(g,c){c=void 0===c?[]:c;if(!g||!g.comments)return c;g=$jscomp.makeIterator(g.comments);for(var h=g.next();!h.done;h=g.next())if(h=h.value.text.trim(),h.startsWith("global")){h=$jscomp.makeIterator(h.replace(Sd.globalDeclRe,"").split(","));for(var f=h.next();!f.done;f=h.next())c.push(f.value.trim())}return c}function AC(g){return Sd.FindToplevelFuncDeclVisitor.run(g)}
function u_(g,c){if(0==c.length)return[null,null];var h=$jscomp.makeIterator(c);c=h.next().value;h=$jscomp.arrayFromIterator(h);var f=c.decls||Sd.declarationsWithIdsOfScope(c);c.decls=f;return f.find(function(m){m=$jscomp.makeIterator(m);m.next();return m.next().value.name==g})||u_(g,h)}function qH(g){function c(f,m){var n=[f].concat(m);f.refs.forEach(function(a){var d=$jscomp.makeIterator(Sd.resolveReference(a.name,n)),k=d.next().value;d=d.next().value;h.set(a,{decl:k,declId:d,ref:a})});f.subScopes.forEach(function(a){return c(a,
n)})}if(g.referencesResolvedSafely)return g;var h=g.resolvedRefMap||(g.resolvedRefMap=new Map);c(g,[]);g.referencesResolvedSafely=!0;return g}function rH(g,c){c=$jscomp.makeIterator(c.resolvedRefMap.values());for(var h=c.next();!h.done;h=c.next()){h=h.value;var f=h.ref,m=f.end;if(f.start<=g&&g<=m)return h}}function BC(g,c){function h(a){var d=Sd._declaredVarNames(a,f);return Sd.arr.filter(a.subScopes.map(h).reduce(function(k,b){return k.concat(b)},a.refs),function(k){return-1===d.indexOf(k.name)})}
c=c||{};c.withComments=!0;"string"===typeof g&&(g=Sd.parse(g,c));g=Sd.scopes(g);var f=!!c.jslintGlobalComment;c=Sd._declaredVarNames(g,f);var m=g.refs.concat(Sd.arr.flatten(g.subScopes.map(h))),n=Sd.arr.withoutAll(m.map(function(a){return a.name}),c);return{scope:g,varDecls:g.varDecls,funcDecls:Sd.arr.filter(g.funcDecls,function(a){return a.id}),classDecls:Sd.arr.filter(g.classDecls,function(a){return a.id}),declaredNames:c,undeclaredNames:n,refs:m,thisRefs:g.thisRefs}}function sH(g,c){g=Sd.topLevelDeclsAndRefs(g,
c);var h=g.declaredNames.concat(Sd.knownGlobals);return Sd.arr.filter(g.refs,function(f){return-1===h.indexOf(f.name)})}function tH(g,c,h,f){if(!c&&!g)throw Error("Need at least ast or code");c=c||Sd.stringify(g);g=g&&g.loc?g:Sd.parse(c,{locations:!0});return Sd.withMozillaAstDo(g,[],function(m,n,a){h.every(function(d){return Sd.num.between(d,n.loc.start.line,n.loc.end.line)})&&(Sd.arr.pushIfNotIncluded(a,n),m());return a})}function CC(g,c,h,f){h=void 0===h?!0:h;f=void 0===f?{refs:[],decls:[]}:f;
if("this"===c)return f.refs.push.apply(f.refs,$jscomp.arrayFromIterable(g.thisRefs)),f;var m=Sd.__varDeclIdsFor(g,c);if(!h&&m.length)return f;h=$jscomp.makeIterator(g.refs);for(var n=h.next();!n.done;n=h.next())n=n.value,n.name===c&&f.refs.push(n);f.decls.push.apply(f.decls,$jscomp.arrayFromIterable(m));g=$jscomp.makeIterator(g.subScopes);for(m=g.next();!m.done;m=g.next())CC(m.value,c,!1,f);return f}function uH(g,c,h){var f=null;Sd.arr.detect(Sd.scopesAtIndex(g,h).reverse(),function(m){m=Sd.declarationsOfScope(m,
!0);var n=Sd.arr.pluck(m,"name").indexOf(c);if(-1===n)return!1;f=m[n];return!0});return f}function vH(g,c){c="string"===typeof c?Sd.parse(c):c;return Sd.custom.findNodesIncluding(c,g)}function DC(g,c,h){var f=Sd.nodesAt(c.start,g).reverse().find(function(n){return Sd.arr.include(Sd._stmtTypes,n.type)});if(h&&h.asPath){c=new Sd.BaseVisitor;var m;c.accept=Sd.fun.wrap(c.accept,function(n,a,d,k){if(a===f)throw m=k,Error("stop search");return n(a,d,k)});try{c.accept(g,{},[])}catch(n){}return m}return f}
function wH(g){var c=[];g=g.node.body||[];for(var h=0;h<g.length;h++){var f=g[h];if("ImportDeclaration"===f.type)if(0===f.specifiers.length)c.push({local:null,imported:null,fromModule:f.source.value,node:f});else{var m=f.source?f.source.value:"unknown module";c.push.apply(c,$jscomp.arrayFromIterable(f.specifiers.map(function(n){return{local:n.local?n.local.name:null,imported:"ImportNamespaceSpecifier"===n.type?"*":"ImportDefaultSpecifier"===n.type?"default":"ImportSpecifier"===n.type?n.imported.name:
null,fromModule:m,node:f}})))}}return c}function xH(g,c){(void 0===c?0:c)&&Sd.resolveReferences(g);c=[];for(var h={},f=$jscomp.makeIterator(g.exportDecls),m=f.next();!m.done;h={$jscomp$loop$prop$node$2702:h.$jscomp$loop$prop$node$2702},m=f.next()){h.$jscomp$loop$prop$node$2702=m.value;var n=Sd.statementOf(g.node,h.$jscomp$loop$prop$node$2702);if(n){var a=n.source?n.source.value:null;"ExportAllDeclaration"===n.type?c.push({local:null,exported:"*",imported:"*",fromModule:a,node:h.$jscomp$loop$prop$node$2702,
type:"all"}):"ExportDefaultDeclaration"===n.type?Sd.helpers.isDeclaration(n.declaration)?c.push({local:n.declaration.id?n.declaration.id.name:null,exported:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:h.$jscomp$loop$prop$node$2702,decl:n.declaration,declId:n.declaration.id}):"Identifier"===n.declaration.type?(m=g.resolvedRefMap.get(n.declaration)||{},c.push({local:n.declaration.name,exported:"default",
fromModule:null,node:h.$jscomp$loop$prop$node$2702,type:"id",decl:m.decl,declId:m.declId})):c.push({local:null,exported:"default",fromModule:null,node:h.$jscomp$loop$prop$node$2702,type:"expr",decl:n.declaration,declId:n.declaration}):n.specifiers&&n.specifiers.length?c.push.apply(c,$jscomp.arrayFromIterable(n.specifiers.map(function(d){return function(k){if(a){var b=d.$jscomp$loop$prop$node$2702;var e=k.exported}else k.local&&(b=(e=g.resolvedRefMap.get(k.local))?e.decl:null,e=e?e.declId:null);return{local:!a&&
k.local?k.local.name:null,exported:k.exported?k.exported.name:null,imported:a&&k.local?k.local.name:null,fromModule:a||null,type:"id",node:d.$jscomp$loop$prop$node$2702,decl:b,declId:e}}}(h)))):n.declaration&&n.declaration.declarations?c.push.apply(c,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(d){return function(k){return{local:k.id?k.id.name:"default",exported:k.id?k.id.name:"default",type:n.declaration.kind,fromModule:null,node:d.$jscomp$loop$prop$node$2702,decl:k,declId:k.id}}}(h)))):
n.declaration&&c.push({local:n.declaration.id?n.declaration.id.name:"default",exported:n.declaration.id?n.declaration.id.name:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:h.$jscomp$loop$prop$node$2702,decl:n.declaration,declId:n.declaration.id})}}return Sd.arr.uniqBy(c,function(d,k){return d.local==k.local&&d.exported==k.exported&&d.fromModule==k.fromModule})}function pz(g){return(new uo.ObjectSpreadTransformer).accept(g,
{},[])}function yH(g,c){if(g.start===c.start&&g.end===c.end)return 0;if(g.end<=c.start)return-1;if(g.start>=c.end||g.start<=c.start&&g.end>=c.end)return 1;if(c.start<=g.start&&c.end>=g.end)return-1;throw Error("Comparing nodes");}function zH(g,c,h){h="object"===typeof h?h:{changes:[],source:h};var f=!1,m=h.changes.reduce(function(a,d){if(a.end<d.pos)return a;var k=d.pos<a.start;f=f||d.pos>=a.start&&d.pos<=a.end;if("add"===d.type)return{start:k?a.start+d.string.length:a.start,end:a.end+d.string.length};
if("del"===d.type)return{start:k?a.start-d.length:a.start,end:a.end-d.length};throw Error("Cannot deal with change "+pe.obj.inspect(d));},{start:g.start,end:g.end}),n=h.source;g=c(g,n.slice(m.start,m.end),f);g="string"===typeof g?g:Array.isArray(g)?g.map(pe._node2string).join("\n"+pe._findIndentAt(n,m.start)):g=pe._node2string(g);m=[{type:"del",pos:m.start,length:m.end-m.start},{type:"add",pos:m.start,string:g}];return{changes:h.changes.concat(m),source:pe._applyChanges(m,n)}}function AH(g,c){g=g.sort(function(m,
n){return pe._compareNodesForReplacement(m.target,n.target)});c="object"===typeof c?c:{changes:[],source:c};for(var h=0;h<g.length;h++){var f=g[h];c=pe.replaceNode(f.target,f.replacementFunc,c)}return c}function BH(g,c,h,f){f="object"===typeof g?g:null;g="string"===typeof g?g:f.source||pe._node2string(f);return pe.replaceNode(c,h,g)}function v_(g,c){c=void 0===c?[]:c;c.push.apply(c,$jscomp.arrayFromIterable(g.varDecls));g=$jscomp.makeIterator(g.subScopes);for(var h=g.next();!h.done;h=g.next())v_(h.value,
c);return c}function CH(g){var c="object"===typeof g?g:pe.parse(g);g="string"===typeof g?g:c.source||pe._node2string(c);c=pe.scopes(c);var h=pe.__findVarDecls(c);c=[];h=$jscomp.makeIterator(h);for(var f=h.next();!f.done;f=h.next())c.push({target:f.value,replacementFunc:function(m,n,a){a&&(m=pe.parse(n).body[0]);return m.declarations.map(function(d){return{type:"VariableDeclaration",kind:"var",declarations:[d]}})}});return pe.replaceNodes(c,g)}function DH(g){var c="object"===typeof g?g:pe.parse(g);
g="string"===typeof g?g:c.source||pe._node2string(c);c=pe.scopes(c);var h=pe.__findVarDecls(c);c=[];h=$jscomp.makeIterator(h);for(var f=h.next();!f.done;f=h.next())c.push({target:f.value,replacementFunc:function(m,n,a){a&&(m=pe.parse(n).body[0]);n=[];m=$jscomp.makeIterator(m.declarations);for(a=m.next();!a.done;a=m.next()){var d=a.value;a={type:"Identifier",name:"__temp"};n.push({type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:a,init:d.init}]});d=$jscomp.makeIterator(pe.helpers.objPropertiesAsList(d.id,
[],!1));for(var k=d.next();!k.done;k=d.next())k=k.value.key,n.push(pe.varDecl(k[k.length-2],pe.memberChain.apply(pe,[a.name].concat($jscomp.arrayFromIterable(k))),"var"))}return n}});return pe.replaceNodes(c,g)}function EH(g,c){c=c||{};var h=pe.parse(g,c),f=pe.arr.last(h.body);if("ExpressionStatement"!==f.type)return c.asAST?h:g;h.body.splice(h.body.length-1,1,pe.returnStmt(f.expression));return c.asAST?h:pe.stringify(h)}function FH(g,c){c=c||{};g=pe.returnLastStatement(g,c);return c.asAST?pe.program(pe.funcExpr.apply(pe,
[{id:c.id||void 0},[]].concat($jscomp.arrayFromIterable(g.body)))):"function"+(c.id?" "+c.id:"")+"() {\n"+g+"\n}"}function GH(g,c){"string"===typeof g&&(g=pe.parse(g));c=c||{};var h="Program"===g.type,f=c.startFuncNode||pe.id("__start_execution");c=c.endFuncNode||pe.id("__end_execution");var m=pe.topLevelFuncDecls(g),n=g.body,a=[];m.forEach(function(d){var k=d.node;pe.Path(d.path).set(g,pe.exprStmt(k.id));a.push(k)});n.unshift(pe.exprStmt(pe.funcCall(f)));f=pe.arr.last(n);"ExpressionStatement"===
f.type?(n.pop(),n.push(pe.exprStmt(pe.funcCall(c,pe.id("null"),f.expression)))):"VariableDeclaration"===f.type&&"Identifier"===pe.arr.last(f.declarations).id.type?n.push(pe.exprStmt(pe.funcCall(c,pe.id("null"),pe.arr.last(f.declarations).id))):n.push(pe.exprStmt(pe.funcCall(c,pe.id("null"),pe.id("undefined"))));a.push(pe.tryStmt.apply(pe,["err",[pe.exprStmt(pe.funcCall(c,pe.id("err"),pe.id("undefined")))]].concat($jscomp.arrayFromIterable(n))));return h?pe.program.apply(pe,$jscomp.arrayFromIterable(a)):
pe.block.apply(pe,$jscomp.arrayFromIterable(a))}function HH(g){if(!pe.isProbablySingleExpressionRe.test(g)||30<g.split("\n").length)return g;try{var c=pe.fuzzyParse(g);1===c.body.length&&("FunctionDeclaration"===c.body[0].type||"BlockStatement"===c.body[0].type&&"LabeledStatement"===c.body[0].body[0].type)&&(g="("+g.replace(/;\s*$/,"")+")")}catch(h){"undefined"!==typeof $world?$world.logError(h):console.error("Eval preprocess error: %s",h.stack||h)}return g}function IH(g,c){var h=Uf.statementOf(g,
c,{asPath:!0}).slice(0,-2);h=Uf.Path(h).get(g);return h.comments&&h.comments.length?Uf.chain(Uf.extractComments(g)).reversed().detect(function(f){return f.followingNode===c}).value():null}function JH(g,c){function h(u){return Uf.arr.detect(u.node.body,function(x){return x.start>u.comment.end})}function f(u){return{type:"unknown",comment:u.comment.text}}function m(u){u=Uf.Path(u.path.slice(0,-1)).get(e);return{name:u.id?u.id.name:"<error: no name for function>",args:Uf.arr.pluck(u.params,"name")}}
function n(u){for(var x=Uf.Path(u.path.slice(0,-2)).get(e),z=x.key?x.key.name:"<error: no name for method>",E=u.path.slice(),G="<error: no object found for method>";E.length&&"init"!==Uf.arr.last(E);)E.pop();E.length&&(G=Uf.Path(E.slice(0,-1).concat(["id","name"])).get(e));if(Uf.string.startsWith(G,"<error")){for(E=u.path.slice();E.length&&"right"!==Uf.arr.last(E);)E.pop();E.length&&(G=Uf.Path(E.slice(0,-1).concat(["left"])).get(e),G=l.slice(G.start,G.end))}Uf.string.startsWith(G,"<error")&&(E=u.path.slice(),
(u=(u=Uf.Path(E.slice(0,-6)).get(e))&&"CallExpression"===u.type&&u.arguments[0])&&(G=l.slice(u.start,u.end)));return{name:z,args:Uf.arr.pluck(x.value.params,"name"),objectName:G}}function a(u){u=Uf.Path(u.path.slice(0,-1)).get(e);if("FunctionExpression"!==u.type&&"FunctionDeclaration"!==u.type)return{};var x=Uf.statementOf(e,u);if("ExpressionStatement"!==x.type||"AssignmentExpression"!==x.expression.type)return{};var z=l.slice(x.expression.left.object.start,x.expression.left.object.end);return{name:l.slice(x.expression.left.property.start,
x.expression.left.property.end),objectName:z,args:Uf.arr.pluck(u.params,"name")}}function d(u){var x=u.path.slice(0,-3);var z=Uf.Path(x).get(e);if(z&&"Property"===z.type){var E=Uf.arr.pluck(z.value.callee.params,"name");var G=z.key?z.key.name:"<error: no name for method>"}G||(x=u.path.slice(0,-2),(z=Uf.Path(x).get(e))&&"Property"===z.type&&(E=Uf.arr.pluck(z.value.params,"name"),G=z.key?z.key.name:"<error: no name for method>"));G||(G="<error: no name for method>",E=[],x=u.path);z=Uf.arr.clone(x);
for(u="<error: no object found for method>";z.length&&"init"!==Uf.arr.last(z);)z.pop();z.length&&(u=Uf.Path(z.slice(0,-1).concat(["id","name"])).get(e));if(Uf.string.startsWith(u,"<error")){for(z=Uf.arr.clone(x);z.length&&"right"!==Uf.arr.last(z);)z.pop();z.length&&(u=Uf.Path(z.slice(0,-1).concat(["left"])).get(e),u=l.slice(u.start,u.end))}Uf.string.startsWith(u,"<error")&&(z=Uf.arr.clone(x),(x=(x=Uf.Path(z.slice(0,-4)).get(e))&&"CallExpression"===x.type&&x.arguments[0])&&(u=l.slice(x.start,x.end)));
return{name:G,args:E,objectName:u}}function k(u){return u&&"VariableDeclaration"===u.type&&1===u.declarations.length}function b(u){return"AssignmentExpression"!==u.type?!1:"ObjectExpression"===u.right.type?!0:"AssignmentExpression"===u.right.type?b(u.right):!1}var e="string"===typeof g?Uf.parse(g,{withComments:!0}):g,l=c||("string"===typeof g?g:Uf.stringify(g)),p=Uf.arr.sortBy(function(u){var x=[],z=new Uf.Visitor;z.accept=Uf.fun.wrap(z.accept,function(E,G,J,K){G.comments&&Uf.arr.pushAll(x,G.comments.map(function(T){return{path:K,
comment:T,node:G}}));return E(G,J,K)});z.accept(u,x,[]);return x}(e),function(u){return u.comment.start});return p.map(function(u,x){if(Uf.arr.equals(u.path.slice(-2),["value","body"]))return Uf.obj.merge([u,u.comment,{type:"method",comment:u.comment.text},n(u)]);var z=u.path.slice(-5);Uf.arr.removeAt(z,1);if(Uf.arr.equals(z,["properties","value","callee","body"]))return Uf.obj.merge([u,u.comment,{type:"method",comment:u.comment.text},d(u)]);if((z=Uf.Path(u.path.slice(0,-1)).get(e))&&"FunctionDeclaration"===
z.type)return Uf.obj.merge([u,u.comment,{type:"function",comment:u.comment.text},m(u)]);if(Uf.arr.equals(u.path.slice(-2),["right","body"]))return Uf.obj.merge([u,u.comment,{type:"method",comment:u.comment.text},a(u)]);z=h(u);return z?(x=p[x+1])&&x.comment.start<=z.start?Uf.obj.merge([u,u.comment,{followingNode:z},f(u)]):k(z)&&("ObjectExpression"===z.declarations[0].init.type||b(z.declarations[0].init))?Uf.obj.merge([u,u.comment,{followingNode:z},{type:"object",comment:u.comment.text},{name:z.declarations[0].id.name}]):
k(z)?Uf.obj.merge([u,u.comment,{followingNode:z},{type:"var",comment:u.comment.text},{name:z.declarations[0].id.name}]):Uf.obj.merge([u,u.comment,{followingNode:z},f(u)]):Uf.obj.merge([u,u.comment,{followingNode:z},f(u)])})}function KH(g,c){c=c||eh.obj.merge({hideOneLiners:!1},c);"string"===typeof g&&(g=eh.parse(g,{addSource:!0}));for(var h=[],f=$jscomp.makeIterator("Program"===g.type?g.body:g.body.body),m=f.next();!m.done;m=f.next()){m=m.value;m=eh.unwrapExport(m);var n=eh.functionWrapper(m,c)||
eh.varDefs(m)||eh.funcDef(m)||eh.es6ClassDef(m)||eh.someObjectExpressionCall(m);if(n){if(c.hideOneLiners)if(g.loc)n=eh.arr.filter(n,function(d){return!d.node.loc||d.node.loc.start.line!==d.node.loc.end.line});else if(g.source){m=[];n=$jscomp.makeIterator(n);for(var a=n.next();!a.done;a=n.next())a=a.value,(a.parent&&m.includes(a.parent)||(a.node.source||"").includes("\n"))&&m.push(a);n=m}h.push.apply(h,$jscomp.arrayFromIterable(n))}}return h}function yQ(g){return eh.arr.flatmap(g,function(c){return c?
"Identifier"===c.type?[c]:"RestElement"===c.type?[c.argument]:"ObjectPattern"===c.type?yQ(eh.arr.pluck(c.properties,"value")):"ArrayPattern"===c.type?yQ(c.elements):[]:[]})}function qz(g){return mg.isValidIdentifierRe.test(g)}function Mt(){return"undefined"!==typeof System?System.global:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof fh.Global?fh.Global:"undefined"!==typeof self?self:function(){return this}()}function LH(g,c){c=String(c).match(/function\s*[a-zA-Z0-9_$]*\s*\(([^\)]*)\)/);
return g+"("+(c&&c[1]||"")+")"}function zQ(g){return g===g||g===Array||g===Function||g===String||g===Boolean||g===Date||g===RegExp||g===Number||g===Promise?!0:g instanceof Function&&(void 0!==g.superclass||void 0!==g._superclass)}function MH(g,c){return g.map(function(h){return h[c]})}function NH(g){if(Symbol.keyFor(g))return'Symbol.for("'+Symbol.keyFor(g)+'")';if(fh.knownSymbols.get(g))return fh.knownSymbols.get(g);String(g).match(fh.symMatcher);return String(g)}function EC(g){if(!g)return String(g);
if(Array.isArray(g))return"["+g.map(EC).join(",")+"]";if("symbol"===typeof g)return fh.printSymbol(g);try{return String(g)}catch(c){throw Error("Cannot print object: "+c.stack);}}function FC(g,c){c=void 0===c?{}:c;var h=g.value,f=g.isPromise,m=g.promisedValue,n=g.promiseStatus;return g.isError||h instanceof Error?(c=String(h),(m=h.stack||"")&&h.message!==h.stack&&(m=String(m),0===m.indexOf(c)&&(m=m.slice(c.length)),c+="\n"+m),c):f?(g=fh.string.print(n),c="pending"===n?void 0:FC({value:m},c),"Promise({status: "+
g+", "+(void 0===h?"":"value: "+c)+"})"):h instanceof Promise?'Promise({status: "unknown"})':c.inspect?fh.printInspectEvalValue(h,c.inspectDepth||2):String(h)}function OH(g,c){var h="";return Promise.resolve().then(function(){var f=c.lastIndexOf(".");0<=f?(h=c.slice(f+1),c=c.slice(0,f)):(h=c,c='(typeof window === "undefined" ? global : window)');return g(c)}).then(function(f){return{evalResult:f,startLetters:h,code:c}})}function PH(g,c,h){g=ti.getObjectForCompletion(g,c).then(function(f){var m=f.evalResult;
f={completions:ti.descriptorsOfObjAndProtoProperties(m&&m.isEvalResult?m.value:m),startLetters:f.startLetters,code:f.code};m&&m.isPromise&&("fulfilled"===m.promiseStatus?f.promiseResolvedCompletions=ti.descriptorsOfObjAndProtoProperties(m.promisedValue):"rejected"===m.promiseStatus&&(f.promiseRejectedCompletions=ti.descriptorsOfObjAndProtoProperties(m.promisedValue)));return f});"function"===typeof h&&g.then(function(f){return h(null,f)}).catch(function(f){return h(f)});return g}function GC(g,c,h){c||
(c={type:"Identifier",name:"__rec"});h=Object.assign({ignoreUndeclaredExcept:null,includeRefs:null,excludeRefs:h&&h.exclude||[],includeDecls:null,excludeDecls:h&&h.exclude||[],recordDefRanges:!1,es6ExportFuncId:null,es6ImportFuncId:null,captureObj:c,moduleExportFunc:{name:h&&h.es6ExportFuncId||"_moduleExport",type:"Identifier"},moduleImportFunc:{name:h&&h.es6ImportFuncId||"_moduleImport",type:"Identifier"},declarationWrapper:void 0,classTransform:function(m){return m}},h);c=g;if(h.ignoreUndeclaredExcept){var f=
qc.topLevelDeclsAndRefs(g);h.excludeRefs=qc.arr.withoutAll(f.undeclaredNames,h.ignoreUndeclaredExcept).concat(h.excludeRefs);h.excludeDecls=qc.arr.withoutAll(f.undeclaredNames,h.ignoreUndeclaredExcept).concat(h.excludeDecls)}h.excludeRefs=h.excludeRefs.concat(h.captureObj.name);h.excludeDecls=h.excludeDecls.concat(h.captureObj.name);h.recordDefRanges&&qc.computeDefRanges(c,h);h.excludeRefs=h.excludeRefs.concat(qc.additionalIgnoredRefs(g,h));h.excludeDecls=h.excludeDecls.concat(qc.additionalIgnoredDecls(g,
h));c=qc.fixDefaultAsyncFunctionExportForRegeneratorBug(c,h);h.es6ExportFuncId&&(h.excludeRefs.push(h.es6ExportFuncId),h.excludeRefs.push(h.es6ImportFuncId),c=qc.es6ModuleTransforms(c,h));c=qc.replaceRefs(c,h);c=qc.replaceVarDecls(c,h);c=qc.clearEmptyExports(c,h);c=qc.replaceClassDecls(c,h);c=qc.splitExportDeclarations(c,h);c=qc.insertCapturesForExportDeclarations(c,h);c=qc.insertCapturesForImportDeclarations(c,h);c=qc.insertDeclarationsForExports(c,h);c=qc.putFunctionDeclsInFront(c,h);return c=qc.transformImportMeta(c,
h)}function QH(g,c,h){h=Object.assign({captureObj:c||{type:"Identifier",name:"__rec"},exclude:[],declarationWrapper:void 0},h);c=qc.Path("body.0.expression").get(g);if("System"!==c.callee.object.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+qc.stringify(g).slice(0,300)+"...");if("register"!==c.callee.property.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+qc.stringify(g).slice(0,
300)+"...");c=qc.Path("arguments.1.body.body").get(c);var f=qc.arr.last(c);if("ReturnStatement"!==f.type)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at return statement: "+qc.stringify(g).slice(0,300)+"...");var m=f.argument.properties.find(function(n){return"setters"===n.key.name});if(!m)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding setters: "+qc.stringify(g).slice(0,300)+
"...");f=f.argument.properties.find(function(n){return"execute"===n.key.name});if(!f)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding execute: "+qc.stringify(g).slice(0,300)+"...");m.value.elements.forEach(function(n){n.params[0]=qc.assign(n.params[0],qc.nodes.objectLiteral({}));n.body.body=n.body.body.map(function(a){if("ExpressionStatement"!==a.type||"AssignmentExpression"!==a.expression.type||"Identifier"!==a.expression.left.type||
qc.arr.include(h.exclude,a.expression.left.name))return a;var d=a.expression.left;a=h.declarationWrapper?qc.declarationWrapperCall(h.declarationWrapper,null,qc.literal(d.name),qc.literal("var"),a.expression,h.captureObj,h):a.expression;return qc.exprStmt(qc.assign(qc.member(h.captureObj,d),a))})});(m=f.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===h.captureObj.name}))||(m=f.value.body.body.find(function(n){return"VariableDeclaration"===
n.type&&n.declarations[0].id&&n.declarations[0].id.name===h.captureObj.name}));m&&(qc.arr.remove(f.value.body.body,m),qc.arr.pushAt(c,m,c.length-1));h.sourceAccessorName&&((m=f.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===h.sourceAccessorName}))||(m=f.value.body.body.find(function(n){return"VariableDeclaration"===n.type&&n.declarations[0].id&&n.declarations[0].id.name===h.sourceAccessorName})),m&&(qc.arr.remove(f.value.body.body,
m),qc.arr.pushAt(c,m,c.length-1)));return g}function HC(g,c){var h=qc.stringify(c.captureObj),f=0;g.body=g.body.reduce(function(m,n){var a=[n],d="",k=!1;if("ExportNamedDeclaration"===n.type){if(n.source){var b=n.specifiers.map(function(e){return[e.local.name,e.exported.name]});d="import { "+b.map(function(e){var l=$jscomp.makeIterator(e);e=l.next().value;l=l.next().value;return e===l?l:e+" as "+l}).join(",")+" } from "+n.source.raw+";\n";k="export { "+b.map(function(e){e=$jscomp.makeIterator(e);e.next();
return e.next().value}).join(",")+" };\n"}else n.declaration?(b=n.declaration.declarations||[],b=b.map(function(e){return[e.id.name,e.id.name]})):b=n.specifiers.map(function(e){return[e.exported.name,e.local.name]});k&&(a=[],d+=k);a=a.concat(qc.parse(d+b.map(function(e){var l=$jscomp.makeIterator(e);e=l.next().value;l=l.next().value;return h+"."+e+" = "+l+";\n"+(h+"."+l+" = "+l+";\n")}).join("\n")))}"ExportAllDeclaration"===n.type&&(f++,a=a.concat(qc.parse("\n       import * as __captured"+f+"__ from "+
n.source.raw+";\n       Object.assign("+h+", __captured"+f+"__);\n      ")));return m.concat(a)},[]);return g}function AQ(g){(this||nw).__wrapped__=g;(this||nw).__actions__=[];(this||nw).__dir__=1;(this||nw).__filtered__=!1;(this||nw).__iteratees__=[];(this||nw).__takeCount__=4294967295;(this||nw).__views__=[]}function BQ(g,c){(this||IC).__wrapped__=g;(this||IC).__actions__=[];(this||IC).__chain__=!!c;(this||IC).__index__=0;(this||IC).__values__=void 0}function CQ(g){if(Vfa(g)&&!Wfa(g)&&!(g instanceof
Xfa)){if(g instanceof w_)return g;if(Yfa.call(g,"__wrapped__"))return Zfa(g)}return new w_(g)}function x_(g,c,h,f,m,n,a,d,k,b){function e(){for(var G=arguments.length,J=Array(G),K=G;K--;)J[K]=arguments[K];if(x)var T=$fa(e),P=aga(J,T);f&&(J=bga(J,f,m,x));n&&(J=cga(J,n,a,x));G-=P;if(x&&G<b)return K=dga(J,T),ega(g,c,x_,e.placeholder,h,J,K,d,k,b-G);K=p?h:this||RH;T=u?K[g]:g;G=J.length;d?J=fga(J,d):z&&1<G&&J.reverse();l&&k<G&&(J.length=k);(this||RH)&&(this||RH)!==gga&&(this||RH)instanceof e&&(T=E||y_(T));
return T.apply(K,J)}var l=c&128,p=c&1,u=c&2,x=c&24,z=c&512,E=u?void 0:y_(g);return e}function SH(g){return g&&g.__esModule?g:{default:g}}function z_(g){if(Array.isArray(g)){for(var c=0,h=Array(g.length);c<g.length;c++)h[c]=g[c];return h}return Array.from(g)}function rz(g,c){c=void 0===c?"__lvVarRecorder":c;gi.ensureJSXPlugin();"function"===typeof g&&(g=String(g));if(lively.FreezerRuntime)return g.split(c+".").join("");"string"===typeof g&&g.endsWith(";")&&(g=g.slice(0,-1));g="string"===typeof g?gi.parseFunction(g):
g;g=gi.ReplaceVisitor.run(g,function(h){return"MemberExpression"===h.type&&"Identifier"===h.object.type&&h.object.name===c?h.property:h});return gi.stringify(g)}function sz(g){if("undefined"===typeof gi.babel)return console.warn("[lively.freezer] Skipped async/await transpilation because babel not loaded."),g;gi.ensureJSXPlugin();gi.ensureOptionalCatchBinding();gi.ensureImportMeta();g=gi.babel.transform(g,{sourceMap:void 0,inputSourceMap:void 0,babelrc:!1,presets:[["es2015",{modules:!1}]],plugins:["transform-exponentiation-operator",
"transform-async-to-generator","syntax-object-rest-spread","transform-object-rest-spread"],code:!0,ast:!1}).code;g=g.replace(/\}\)\.call\(undefined\);$/,"}).call(this)");g.startsWith("(function")&&g.endsWith(");")&&(g=g.slice(1,-2));return g}function Nt(g,c){g=Ag.transform.transformSingleExpression(g);g=Ag.parse(g,{withComments:!0});c=Ag.processInlineCodeTransformOptions(g,c);var h=Ag.query.topLevelDeclsAndRefs(g),f=h.classDecls,m=h.funcDecls;h=h.varDecls;var n={};c.hasOwnProperty("evalId")&&(n.evalId=
c.evalId);c.sourceAccessorName&&(n.sourceAccessorName=c.sourceAccessorName);[].concat($jscomp.arrayFromIterable(f),$jscomp.arrayFromIterable(m)).forEach(function(k){return k["x-lively-object-meta"]=Object.assign({},n,{start:k.start,end:k.end})});h.forEach(function(k){return k.declarations.forEach(function(b){return b["x-lively-object-meta"]=Object.assign({},n,{start:b.start,end:b.end})})});g=Ag.transform.objectSpreadTransform(g);!c.topLevelVarRecorder&&c.topLevelVarRecorderName&&(f=Ag.getGlobal(),
c.topLevelVarRecorder="GLOBAL"===c.topLevelVarRecorderName?Ag.getGlobal():Ag.Path(c.topLevelVarRecorderName).get(f));if(c.topLevelVarRecorder){f=(c.dontTransform||[]).concat(["arguments"]);m=c.recordGlobals?null:Ag.arr.withoutAll(Object.keys(c.topLevelVarRecorder),f);h=Ag.id(c.varRecorderName||"__lvVarRecorder");if(c.declarationWrapperName||"function"===typeof c.declarationCallback){var a=c.declarationWrapperName||Ag.defaultDeclarationWrapperName;c.declarationWrapper=Ag.member(Ag.id(c.varRecorderName||
"__lvVarRecorder"),Ag.literal(a),!0);c.declarationCallback&&(c.topLevelVarRecorder[a]=c.declarationCallback)}if(c.hasOwnProperty("transformES6Classes")?c.transformES6Classes:1)var d={currentModuleAccessor:c.currentModuleAccessor,classHolder:h,functionNode:Ag.member(h,Ag.defaultClassToFunctionConverterName),declarationWrapper:c.declarationWrapper,evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,transform:c.classTransform};g=Ag.capturing.rewriteToCaptureTopLevelVariables(g,h,{es6ImportFuncId:c.es6ImportFuncId,
es6ExportFuncId:c.es6ExportFuncId,ignoreUndeclaredExcept:m,exclude:f,declarationWrapper:c.declarationWrapper||void 0,classToFunction:d,evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,keepTopLevelVarDecls:c.keepTopLevelVarDecls})}c.wrapInStartEndCall&&(g=Ag.transform.wrapInStartEndCall(g,{startFuncNode:c.startFuncNode,endFuncNode:c.endFuncNode}));d=Ag.stringify(g);c.jsx&&(d=Ag.es5Transpilation(d));c.sourceURL&&(d+="\n//# sourceURL="+c.sourceURL.replace(/\s/g,"_"));return d}function ow(g,c){c=
void 0===c?{}:c;if(!c.topLevelVarRecorder)return g;if("function"===typeof c.declarationCallback||c.declarationWrapperName){var h=c.declarationWrapperName||Ag.defaultDeclarationWrapperName;c.declarationWrapper=Ag.member(Ag.id(c.varRecorderName),Ag.literal(h),!0);c.declarationCallback&&(c.topLevelVarRecorder[h]=c.declarationCallback)}g=Ag.parse(g);h=(c.dontTransform||[]).concat(["arguments"]);c.recordGlobals||Ag.arr.withoutAll(Object.keys(c.topLevelVarRecorder),h);c=Ag.capturing.rewriteToRegisterModuleToCaptureSetters(g,
Ag.id(c.varRecorderName||"__lvVarRecorder"),Object.assign({exclude:h},c));return Ag.stringify(c)}function JC(g,c,h){"function"===typeof c&&2===arguments.length&&(h=c,c=null);var f=new Rg.EvalResult,m=!1,n=!1;c=Rg._normalizeEvalOptions(c);var a=Rg.promise.deferred(),d=c.topLevelVarRecorder||Rg.getGlobal(),k=g;c.wrapInStartEndCall&&(d[Rg.startEvalFunctionName]&&console.warn(f.addWarning("startEvalFunctionName "+Rg.startEvalFunctionName+" already exists in recorder!")),d[Rg.endEvalFunctionName]&&console.warn(f.addWarning("endEvalFunctionName "+
Rg.endEvalFunctionName+" already exists in recorder!")),d[Rg.startEvalFunctionName]=function(){if(m)console.warn(f.addWarning("onEvalStartCalled multiple times!"));else if(m=!0,"function"===typeof c.onStartEval)c.onStartEval()},d[Rg.endEvalFunctionName]=function(l,p){n?console.warn(f.addWarning("onEvalEndCalled multiple times!")):(n=!0,Rg.finishEval(l,p,f,c,d,a,h))});try{g=Rg.evalCodeTransform(g,c),c.header&&(g=c.header+g),c.footer&&(g+=c.footer),c.transpiler&&(g=c.transpiler(g,c.transpilerOptions))}catch(l){console.warn(f.addWarning("lively.vm evalCodeTransform not working: "+
l))}try{"undefined"!==typeof $world&&$world.get("log")&&($world.get("log").textString=g);var b=Rg._eval.call(c.context,g,c.topLevelVarRecorder,c.originalSource||k)}catch(l){var e=l}if(c.wrapInStartEndCall){if(e&&!n)d[Rg.endEvalFunctionName](e,void 0)}else Rg.finishEval(e,e||b,f,c,d,a,h);return c.sync?f:a.promise}function TH(g,c){c=Object.assign(c||{},{sync:!0});return Rg.runEval(g,c)}function UH(g){if(void 0===g){if("undefined"===typeof System)return null;g=System}var c=g.get("@lively-env");c||g.set("@lively-env",
g.newModule({options:{}}));c=c.options;if(!c)throw Error("@lively-env registered read-only");c.emitter||Object.assign(c,{emitter:g["__lively.notifications_emitter"]||(g["__lively.notifications_emitter"]=tz({},{maxListenerLimit:1E4})),notifications:g["__lively.notifications_notifications"]||(g["__lively.notifications_notifications"]=[])});return{emitter:c.emitter,notifications:c.notifications}}function KC(g,c,h){UH(h).emitter.on(g,c);return c}function ss(g,c,h,f){c=void 0===c?{}:c;h=void 0===h?Date.now():
h;c=Object.assign({type:g,time:h},c);h=UH(f);f=h.emitter;h=h.notifications;f.emit(g,c);f.isLogging&&(g=c.type+" ".repeat(Math.max(0,32-c.type.length)),console.log(g+" "+F(c,{maxDepth:2})));f.isRecording&&(h.push(c),h.limit&&h.splice(0,h.length-h.limit));return c}function DQ(g,c,h){UH(h).emitter.removeListener(g,c);return c}function pw(g,c,h){h=Object.assign({targetModule:null,parentModule:null,es6Transpile:!0,transpiler:null,transpilerOptions:null,format:"esm"},h);g.debug&&console.log("[lively.module] runEval: "+
c.slice(0,100).replace(/\n/mg," ")+"...");var f=h,m=f.format,n=f.targetModule;n=g.decanonicalize(n||"*scratch*",f.parentModule);h.targetModule=n;m&&((f=g.getConfig().meta[n])||(f={}),f[n]||(f[n]={}),f[n].format||(f[n].format=m,g.config(f)));m=g.get("@lively-env").moduleEnv(n);f=m.recorder;var a=m.recorderName,d=m.dontTransform,k=Zh.getEs6Transpiler(g,h,m),b="var _moduleExport = "+a+"._moduleExport,\n    _moduleImport = "+(a+"._moduleImport;\n");h=Object.assign({waitForPromise:!0,sync:!1,evalId:h.evalId||
m.nextEvalId(),sourceAccessorName:(h.hasOwnProperty("embedOriginalCode")?h.embedOriginalCode:1)?"__lvOriginalCode":void 0,originalSource:c},h,{header:b,recordGlobals:!0,dontTransform:d,varRecorderName:a,topLevelVarRecorder:f,sourceURL:h.sourceURL||h.targetModule,context:h.context||f,wrapInStartEndCall:!0,es6ExportFuncId:"_moduleExport",es6ImportFuncId:"_moduleImport",transpiler:k,declarationWrapperName:m.varDefinitionCallbackName,currentModuleAccessor:Zh.funcCall(Zh.member(Zh.funcCall(Zh.member(Zh.member("__lvVarRecorder",
"System"),"get"),Zh.literal("@lively-env")),"moduleEnv"),Zh.literal(h.targetModule))});if(!h.sync&&!h.importsEnsured&&Zh.hasUnimportedImports(g,c,n))return Zh.ensureImportsAreImported(g,c,n).catch(function(e){return null}).then(function(e){return pw(g,e,Object.assign({},h,{importsEnsured:!0}))});if(!m.record()){if(!h.sync&&!h._moduleImported)return g.import(n).catch(function(e){return null}).then(function(){return pw(g,c,Object.assign({},h,{_moduleImported:!0}))});m.ensureRecord()}if(h.es6Transpile&&
h.transpiler instanceof Promise)if(h.sync||h._transpilerLoaded)console.warn("[lively.vm] sync eval requested but transpiler is not yet loaded, will continue without transpilation!"),h.transpiler=null;else return h.transpiler.catch(function(e){return console.error(e)}).then(function(e){return pw(g,c,Object.assign({},h,{transpiler:e,_transpilerLoaded:!0}))});g.debug&&console.log("[lively.module] runEval in module "+n+" started");Zh.emit("lively.vm/doitrequest",{code:c,waitForPromise:h.waitForPromise,
targetModule:h.targetModule},Date.now(),g);g.get("@lively-env").evaluationStart(n);n=Zh.vmRunEval(c,h);return h.sync?Zh.evalEnd(g,c,h,n):Promise.resolve(n).then(function(e){return Zh.evalEnd(g,c,h,e)})}function uz(g,c){var h=c=Object.assign({format:"esm",System:null,targetModule:null},c),f=h.format,m=h.System;h=h.targetModule;m||"undefined"===typeof System||(m=System);return!m&&h?Promise.reject(Error("options to runEval have targetModule but cannot find system loader!")):h&&["esm","es6","register"].includes(f)?
Ck.esmEval.runEval(m,g,c):Ck.globalEval.runEval(g,c)}function LC(g,c){return Ck.globalEval.syncEval(g,c)}function EQ(g){return pf.withSuperclasses(g).slice(1)}function VH(g){var c=[];do c.push(g),g=g[pf.superclassSymbol];while(g&&g.name);return c.map(function(h){return h.name}).join("->")}function WH(g){for(var c=[];g;)c.push(g),g=g[pf.superclassSymbol];return c}function FQ(g,c){do if(g===c)return!0;while(g=g[pf.superclassSymbol]);return!1}function GQ(g,c){if(g.constructor===c&&g.__proto__===c.prototype)return g;
g.constructor=c;g.__proto__=c.prototype;return g}function HQ(g){return g&&"function"===typeof g}function IQ(g){var c=pf.RuntimeSourceDescriptor.for(g),h=c.ast;c=c.type;if("ClassDeclaration"!==c)throw Error("Expected class but got "+c);return pf.Path("body.body").get(h).map(function(f){var m=f.static,n=f.kind;f=f.key;var a=f.value;f=f.name||a;a=pf.isOverridden(g,f);var d=m?g:g.prototype;d="get"===n?d.__lookupGetter__(f):"set"===n?d.__lookupSetter__(f):d[f];return{static:m,name:f,value:d,kind:n,owner:g,
overridden:a}})}function JQ(g){return pf.runtimeNonStaticMembers(g).concat(pf.runtimeNonStaticMembers(g))}function KQ(g){var c=pf.obj.getOwnPropertyDescriptors(g);return pf.arr.withoutAll(Object.keys(c),["prototype","name","length","toString"]).map(function(h){var f=c[h],m="function"===typeof f.value?"method":"get"in f?"get":"set"in f?"set":"unknown";return{static:!0,name:h,value:"method"===m?f.value:"get"===m?f.get:"set"===m?f.set:null,kind:m,owner:g}})}function LQ(g){return pf.arr.uniq(pf.arr.flatmap(pf.arr.without(pf.withSuperclasses(g),
Object),function(c){return pf.runtimeStaticClassMembers(c)}))}function XH(g){var c=Ki.propertiesAndSettingsInHierarchyOf(g),h=c.properties;c=c.propertySettings;g[Ki.propertiesAndSettingsCacheSym]={properties:h,order:Ki.obj.sortKeysWithBeforeAndAfterConstraints(h),propertySettings:c,classHierarchy:Ki.getClassHierarchy(g)};h&&"object"===typeof h?Ki.prepareClassForProperties(g,c,h):console.warn("Class "+g.name+" indicates it has managed properties but its properties accessor ("+(Ki.defaultPropertiesKey+
") does not return a valid property descriptor map"))}function vz(g,c){c!==g.constructor&&(g.constructor=c,Vf.setPrototypeOf(g,c.prototype))}function YH(g,c){c=c?"function"===typeof c?c:c.value?c.value:Object:Object;var h=g&&g[Vf.superclassSymbol];h&&h===c||(Vf.ensureInitializeStub(c),g[Vf.superclassSymbol]=c,Vf.setPrototypeOf(g.prototype,c.prototype),c!==Object&&Vf.setPrototypeOf(g,c));return c}function $b(g,c,h,f,m,n,a){h=void 0===h?[]:h;f=void 0===f?[]:f;m=void 0===m?{}:m;var d=g.name,k=d&&m.hasOwnProperty(d)&&
m[d];m=k&&k[Vf.superclassSymbol];k&&"function"===typeof k&&m||(k=g);Vf.setSuperclass(k,c);Vf.installMethods(k,h,f);k[Vf.objMetaSymbol]=a;n&&(g=n.package(),a=k[Vf.moduleMetaSymbol],m=Date.now(),k[Vf.moduleMetaSymbol]={package:g?{name:g.name,version:g.version}:{},pathInPackage:g?n.pathInPackage():n.id,lastChange:a&&a.lastChange&&m<=a.lastChange?a.lastChange+1:m,lastSuperclassChange:0},c&&c.referencedAs&&(k.hasOwnProperty(Vf.moduleSubscribeToToplevelChangesSym)&&n.unsubscribeFromToplevelDefinitionChanges(k[Vf.moduleSubscribeToToplevelChangesSym]),
k[Vf.moduleSubscribeToToplevelChangesSym]=n.subscribeToToplevelDefinitionChanges(function(b,e){if(b===c.referencedAs){b=e&&e[Vf.moduleMetaSymbol];var l=k[Vf.moduleMetaSymbol];if(b){if(b.lastChange===l.lastSuperclassChange)return;l.lastSuperclassChange=b.lastChange}Vf.setSuperclass(k,e);Vf.installMethods(k,h,f);Vf.prepareClassForManagedPropertiesAfterCreation(k)}})));k.toString=function(){var b=String(this.prototype[Vf.initializeSymbol]).match(Vf.constructorArgMatcher),e=this[Vf.superclassSymbol];
return"class "+this.name+" "+(e?"extends "+e.name:"")+" {\n  constructor"+((b?b[0]:"()")+" { /*...*/ }\n}")};Vf.prepareClassForManagedPropertiesAfterCreation(k);return k}function ZH(g){g=new Kd.Color(g);return{red:g.red()/255,green:g.green()/255,blue:g.blue()/255,alpha:g.alpha()}}function MQ(g){return function(c,h,f,m){null==f&&(f=g);null==m&&(m=f);null==h&&(h=yi.unit(c));var n=yi.unit(c);if(n===h)return c;var a=yi.unitLess(c);"px"!==yi.unit(f)&&console.warn("Parameter fromContext must resolve to a value in pixel units.");
"px"!==yi.unit(m)&&console.warn("Parameter toContext must resolve to a value in pixel units.");if("px"!==n)if("em"===n)a=yi.unitLess(c)*yi.unitLess(f);else if("rem"===n)a=yi.unitLess(c)*yi.unitLess(g);else if("ex"===n)a=yi.unitLess(c)*yi.unitLess(f)*2;else return"ch"===n||"vw"===n||"vh"===n||"vmin"===n?console.warn(n+" units can't be reliably converted; Returning original value."):console.warn(n+" is an unknown or unsupported length unit; Returning original value."),c;f=a;if("px"!==h)if("em"===h)f=
a/yi.unitLess(m);else if("rem"===h)f=a/yi.unitLess(g);else if("ex"===h)f=a/yi.unitLess(m)/2;else return"ch"===h||"vw"===h||"vh"===h||"vmin"===h?console.warn(h+" units can't be reliably converted; Returning original value."):console.warn(h+" is an unknown or unsupported length unit; Returning original value."),c;return parseFloat(f.toFixed(5))+h}}function $H(g){return Number(yi.parseCssLength(g,"px").slice(0,-2))}function Ll(g,c,h,f){if("number"===typeof g){var m=g;g=c;c=f}else m=g.x,g=g.y,h=c.x-m,
c=c.y-g;return new Xd.Rectangle(m,g,h,c)}function ui(g,c){return new Xd.Point(g,c)}function Vp(g){return g.constructor[oj.classNameProp]||g.constructor.name}function Ot(g){if(g&&g.constructor){var c=oj.getClassName(g);if(c){if(g=g.constructor[oj.moduleMetaInClassProp],"Object"!==c||g)return g&&(delete g.lastChange,delete g.lastSuperclassChange),{className:c,module:g}}else console.warn("Cannot serialize class info of anonymous class of instance "+g)}}function br(g){var c=g.module;if(c){var h=c.pathInPackage;
if(c.package&&c.package.name&&"no group"!==c.package.name){var f=System.decanonicalize(c.package.name.replace(/\/*$/,"/"));h=oj.string.joinPath(f,h)}f=System.get("@lively-env");if(c=f.moduleEnv(h)||f.moduleEnv(c.pathInPackage))return c.recorder[g.className];console.warn("Trying to deserialize instance of class "+g.className+" but the module "+h+" is not yet loaded")}return System.global[g.className]}function Wp(g,c,h){c=void 0===c?function(b){return b}:c;h=void 0===h?{}:h;var f=new oi.ExpressionSerializer,
m=h,n=h.isMorph?h.propertiesAndPropertySettings().order:[];n=n.length?n:oi.obj.keys(g);for(var a=$jscomp.makeIterator(n),d=a.next();!d.done;d=a.next()){d=d.value;var k=g[d];if("_env"===d||"env"===d||"__connections__"===d||"__refs__"===d)return;oi.obj.isString(k)&&f.isSerializedExpression(k)&&(k=f.deserializeExpr(k));["borderColor","borderWidth","borderStyle","borderRadius"].includes(d)&&(k=Wp(k,c));k&&k._id&&(k=c(Wp(k,c)));m[d]=k}g.submorphs&&(m.submorphs=g.submorphs.map(function(b){return Wp(b,c)}));
if(h)for(f=$jscomp.makeIterator(n.filter(function(b){return!!g[b]})),d=f.next();!d.done;d=f.next())n=d.value,h[n]=m[n];if(g.__refs__)for(h=$jscomp.makeIterator(g.__refs__),f=h.next();!f.done;f=h.next())n=$jscomp.makeIterator(f.value),f=n.next().value,n=n.next().value,oi.Path(f).set(m,oi.Path(n).get(m));if(g.__connections__)for(h=$jscomp.makeIterator(g.__connections__),f=h.next();!f.done;f=h.next())f=f.value,oi.connect(oi.Path(f.pathToSource).get(m),f.sourceAttrName,oi.Path(f.pathToTarget).get(m),
f.targetMethodName,Object.assign({},oi.obj.select(f,["garbageCollect","converterString","updaterString","varMapping"])));return m}function vo(g,c){var h=c=void 0===c?{}:c,f=void 0===h.keepFunctions?!0:h.keepFunctions,m=void 0===h.skipAttributes?[]:h.skipAttributes,n=void 0===h.keepConnections?!0:h.keepConnections,a=void 0===h.asExpression?!1:h.asExpression;c=void 0===h.root?!0:h.root;var d=void 0===h.path?"":h.path,k=void 0===h.skipUnchangedFromDefault?!1:h.skipUnchangedFromDefault,b=void 0===h.nestedExpressions?
{}:h.nestedExpressions,e=void 0===h.objToPath?new WeakMap:h.objToPath,l=void 0===h.objRefs?[]:h.objRefs;h=void 0===h.connections?[]:h.connections;var p={skipAttributes:m,skipUnchangedFromDefault:k,root:!1,keepFunctions:f,asExpression:a,nestedExpressions:b,connections:h,objRefs:l,objToPath:e,keepConnections:n};if(e.has(g))return l.push([d,e.get(g)]),null;e.set(g,d);a&&(f=!1);var u=new oi.ExpressionSerializer,x=function(Ia,N){try{if(N=N.__serialize__(),a){var ia=oi.string.newUUID();b[ia]=N;N=ia}else N=
N.__expr__?u.exprStringEncode(N):N}catch(W){console.log("[export to JSON] failed converting "+Ia+" to serialized expression")}return N},z={};e.set(g,d);n&&g.attributeConnections&&h.push.apply(h,$jscomp.arrayFromIterable(g.attributeConnections));g.isText&&(z.textAndAttributes=g.textAndAttributes.map(function(Ia,N){return Ia&&Ia.isMorph?vo(Ia,Object.assign({},p,{path:d?d+".textAndAttributes."+N:"textAndAttributes."+N})):Ia}));g.submorphs&&0<g.submorphs.length&&(z.submorphs=g.submorphs.map(function(Ia,
N){return vo(Ia,Object.assign({},p,{path:d?d+".submorphs."+N:"submorphs."+N}))}).filter(Boolean));var E={};for(fa in g.spec(k)){E.$jscomp$loop$prop$name$2708=fa;k=g[E.$jscomp$loop$prop$name$2708];!k||"object"!==typeof k||Array.isArray(k)||k.isMorph||e.set(k,d?d+"."+E.$jscomp$loop$prop$name$2708:E.$jscomp$loop$prop$name$2708);if("submorphs"!==E.$jscomp$loop$prop$name$2708&&!m.includes(E.$jscomp$loop$prop$name$2708))if("metadata"===E.$jscomp$loop$prop$name$2708&&oi.Path("commit.__serialize__").get(k))z[E.$jscomp$loop$prop$name$2708]=
Object.assign({},k,{commit:x(E.$jscomp$loop$prop$name$2708+".commit",k.commit)});else if(["borderColor","borderWidth","borderStyle","borderRadius"].includes(E.$jscomp$loop$prop$name$2708)){for(var G={},J=$jscomp.makeIterator(["top","left","right","bottom"]),K=J.next();!K.done;K=J.next()){K=K.value;var T=k[K];if(T&&T.__serialize__&&(T=T.__serialize__())&&T.__expr__)if(a){var P=oi.string.newUUID();b[P]=T;T=P}else T=u.exprStringEncode(T);G[K]=T}z[E.$jscomp$loop$prop$name$2708]=G}else if(k&&k.isMorph)z[E.$jscomp$loop$prop$name$2708]=
vo(k,Object.assign({},p,{path:d?d+"."+E.$jscomp$loop$prop$name$2708:E.$jscomp$loop$prop$name$2708}));else if(k&&k.__serialize__)z[E.$jscomp$loop$prop$name$2708]=x(E.$jscomp$loop$prop$name$2708,k);else if(Array.isArray(k))z[E.$jscomp$loop$prop$name$2708]=k.map(function(Ia){return function(N,ia){return N&&N.isMorph?vo(N,Object.assign({},p,{path:d?d+"."+Ia.$jscomp$loop$prop$name$2708+"."+ia:Ia.$jscomp$loop$prop$name$2708+"."+ia})):N&&N.__serialize__?x(Ia.$jscomp$loop$prop$name$2708+"."+ia,N):N}}(E));
else{if(k&&!oi.obj.isString(k)&&!oi.obj.isNumber(k)&&0<oi.properties.allOwnPropertiesOrFunctions(k).length)for(var da in k)k[da]&&k[da].isMorph&&(k[da]=vo(k[da],Object.assign({},p,{path:d?d+"."+E.$jscomp$loop$prop$name$2708+"."+da:E.$jscomp$loop$prop$name$2708+"."+da})));z[E.$jscomp$loop$prop$name$2708]=k}E={$jscomp$loop$prop$name$2708:E.$jscomp$loop$prop$name$2708}}g.isText&&delete z.textString;a||(z._id=g._id);f?(z.type=g.constructor,Object.keys(g).forEach(function(Ia){return"function"===typeof g[Ia]&&
(z[Ia]=g[Ia])})):(z.styleSheets&&(z.styleSheets=[]),z.type=oi.getSerializableClassMeta(g));if(n&&c){var fa=[];da=$jscomp.makeIterator(h);for(f=da.next();!f.done;f=da.next())J=f=f.value,m=J.sourceAttrName,n=J.targetMethodName,G=J.targetObj,h=J.updaterString,E=J.converterString,k=J.garbageCollect,J=e.get(J.sourceObj),G=e.get(G),"string"===typeof J&&"string"===typeof G?fa.push({pathToSource:J,pathToTarget:G,garbageCollect:k,updaterString:h,converterString:E,sourceAttrName:m,targetMethodName:n,varMapping:{properties:oi.properties}}):
console.log("skipping:",f);a||(z.__connections__=fa)}if(a&&c){c="morph("+oi.obj.inspect(z)+")";var ka={"lively.morphic":["morph"]},za;for(za in b)c=c.replace('"'+za+'"',b[za].__expr__),Object.entries(b[za].bindings||{}).forEach(function(Ia){var N=$jscomp.makeIterator(Ia);Ia=N.next().value;N=N.next().value;ka[Ia]=ka[Ia]?oi.arr.uniq([].concat($jscomp.arrayFromIterable(ka[Ia]),$jscomp.arrayFromIterable(N))):N});return{__expr__:c,bindings:ka}}c&&(z.__refs__=l);return z}function ll(g,c,h,f,m){"function"!==
typeof h||"undefined"!==typeof f&&"object"!==typeof f||(m=f,f="call",m||(m={}),m.updater||(m.updater=function(k,b){return k(null,b)}));var n=g.getConnectionPoints&&g.getConnectionPoints()||g.connections,a=(n=n&&n[c])&&n.map&&lively.morphic&&lively.morphic.GeometryConnection||n&&n.connectionClassType&&lively.Class.forName(n.connectionClassType)||Mg.AttributeConnection;"function"===typeof m&&(console.warn("Directly passing a converter function to connect() is deprecated! Use spec object instead!"),
m={converter:m});n&&(m=Mg.obj.merge(n,m));a=new a(g,c,h,f,m);var d=a.getExistingConnection();if(d)return d.resetSpec(),d.init(g,c,h,f,m),d;m=a.connect();if("function"===typeof g.onConnect)g.onConnect(c,h,f);n&&n.updateOnConnect&&a.update(g[c]);return m}function cr(g,c,h,f){"function"!==typeof h||"undefined"!==typeof f&&"object"!==typeof f||(f="call");if(g.attributeConnections){for(var m=$jscomp.makeIterator(g.attributeConnections.slice()),n=m.next();!n.done;n=m.next())n=n.value,n.getSourceAttrName()==
c&&n.getTargetObj()===h&&n.getTargetMethodName()==f&&n.disconnect();if("function"===typeof g.onDisconnect)g.onDisconnect(c,h,f)}}function wz(g){for(var c;g.attributeConnections&&(c=g.attributeConnections[0]);)c.disconnect()}function ts(g,c,h,f,m){"function"!==typeof h||"undefined"!==typeof f&&"object"!==typeof f?m=m||{}:(m=f,f="call",m=m||{},m.updater||(m.updater=function(n,a){return n(null,a)}));m=m||{};m.removeAfterUpdate=!0;return Mg.connect(g,c,h,f,m)}function hm(g,c,h){var f=g.attributeConnections;
if(f){g=g[c];for(var m=0,n=f.length;m<n;m++){var a=f[m];a.getSourceAttrName()==c&&a.update(h,g)}}}function aI(g,c,h,f){if(null!=g[c])h[f](g[c]);else Mg.connect(g,c,h,f,{removeAfterUpdate:!0})}function bI(g,c,h,f){for(var m={key:c.pop(),whenDefined:function(n){Mg.callWhenNotNull(n,this.key,h,f)}};0<c.length;)m={key:c.pop(),next:m,whenDefined:function(n){Mg.callWhenNotNull(n,this.key,this.next,"whenDefined")}};m.whenDefined(g)}function Pt(g,c){var h=!1;c||"function"!==typeof g||(c=g,h=!0);if(h){g=Mg.AttributeConnection.prototype;
g.isActive||(g.isActive=0);g.isActive++;try{var f=c()}finally{g.isActive--,0>=g.isActive&&delete g.isActive}}else{h=g.sourceObj;var m=g.sourceAttribute,n=g.targetObj,a=g.targetAttribute;g=n&&a?function(d){return d.getSourceAttrName()===m&&n===d.getTargetObj()&&a===d.getTargetMethodName()}:function(d){return d.getSourceAttrName()===m};(g=h.attributeConnections&&h.attributeConnections.filter(g))&&Mg.arr.invoke(g,"activate");try{f=c()}finally{g&&Mg.arr.invoke(g,"deactivate")}}return f}function cI(g){if(null==
g)return!0;g=typeof g;return"boolean"===g||"number"===g||"string"===g?!0:!1}function NQ(g){var c={},h;for(h in g)c[h]=Ff.referencesOfId(g,h);return c}function dI(g){return g&&g.__ref__}function OQ(g,c){var h={};return Ff.referencesOfId((h[g.id]=g.currentSnapshot,h),g.id,c)}function eI(g,c,h){g=g[c];c=[];for(var f in g.props){var m=g.props[f]||{},n=m.value;m=m.verbatim;Array.isArray(n)?c.push.apply(c,$jscomp.arrayFromIterable(Ff.referencesInArray(n,h&&f))):!m&&n&&Ff.isReference(n)&&c.push(h?{key:f,
id:n.id}:n.id)}if(g.hasOwnProperty("entries"))for(f=0;f<g.entries.length;f++)n=g.entries[f],Array.isArray(n)?c.push.apply(c,$jscomp.arrayFromIterable(Ff.referencesInArray(n,h&&n))):n&&Ff.isReference(n)&&c.push(h?{key:n,id:n.id}:n.id);return c}function A_(g,c){for(var h=[],f=0;f<g.length;f++){var m=g[f];Array.isArray(m)?h.push.apply(h,$jscomp.arrayFromIterable(A_(m,c?c+"["+f+"]":void 0))):m&&Ff.isReference(m)&&h.push(c?{key:c+"["+f+"]",id:m.id}:m.id)}return h}function fI(g,c){return(g[c][Ff.ClassHelper.classMetaForSerializationProp]||
{}).module||{}}function PQ(g,c){return Ff.referencesOfId(g,c).map(function(h){return h+":"+Ff.classNameOfId(g,h)})}function gI(g,c){return(g[c][Ff.ClassHelper.classMetaForSerializationProp]||{}).className||"Object"}function QQ(g,c,h,f){function m(x,z,E){if(!e)if(50<E)alert(""+k);else if(x===z)k.push(x),e=k.slice();else if(!b[x]){b[x]=!0;k.push(x);x=Ff.referencesOfId(g,x);for(var G=0;G<x.length;G++)m(x[G],z,E+1);k.pop()}}f=void 0===f?{}:f;var n=void 0===f.showPath?!0:f.showPath,a=f.hasOwnProperty("showClassNames")?
f.showClassNames:!n,d=f.hasOwnProperty("showPropNames")?f.showPropNames:n;f=f.hasOwnProperty("hideId")?f.hideId:n;var k=[],b={},e;m(c,h,0);if(!e)return null;if(!a&&!d)return e;c=[];for(h=0;h<e.length-1;h++){var l=e[h],p=e[h+1],u=[];f||u.push(l);a&&u.push((g[l][Ff.ClassHelper.classMetaForSerializationProp]||{}).className||"Object");d&&(l=Ff.referencesOfId(g,l,!0).find(function(x){return x.id===p})||{key:"????"},u.push(l.key));c.push(u.join(":"))}n&&(c="."+c.join("."));return c}function RQ(g,c,h){h=
h.replace(/^\./,"");h=h.replace(/\[([^\]])+\]/g,".$1");h=Ff.Path(h).parts();var f=g[c];for(c=0;;){if(1E3<c++)throw"stop";var m=h.shift();if(!m)break;if(!f.props||!f.props[m])throw Error("Property "+m+" not found for ref "+JSON.stringify(f));f=f.props[m].value;if(!f)throw Error("Property "+m+" has no value");for(;Array.isArray(f);)f=f[h.shift()];if(!f||!f.__ref__)return f;f=g[f.id]}return f}function SQ(g,c,h,f){h=h.replace(/^\./,"");h=h.replace(/\[([^\]])+\]/g,".$1");h=Ff.Path(h).parts();g=g[c];c=
h.shift();if(!g.props||!g.props[c])throw Error("Property "+c+" not found for ref "+JSON.stringify(g));var m=(g.props[c]||{}).value;if(!m)throw Error("Property "+c+" has no value");if(h.length){var n=Ff.Path(h).get(m);Ff.Path(h).set(m,f(g,c,n))}else g.props[c].value=f(g,c,m)}function us(g,c){var h=Ff.arr.withoutAll(Object.keys(c),g),f=h.filter(function(n){if("AttributeConnection"===Ff.classNameOfId(c,n))return c[n].props.garbageCollect.value}),m=Ff.referenceGraph(Ff.obj.dissoc(Object.assign({},c),
f));g.forEach(function(n){n=Ff.graph.subgraphReachableBy(m,n);for(var a=h.length;a--;)h[a]in n&&h.splice(a,1)});h.forEach(function(n){return delete c[n]});return h}function hI(g){var c={},h;for(h in g){c.$jscomp$loop$prop$id$1008$2714=h;if("AttributeConnection"===Ff.classNameOfId(g,c.$jscomp$loop$prop$id$1008$2714)){var f=g[c.$jscomp$loop$prop$id$1008$2714];if(!g[Ff.Path("props.targetObj.value.id").get(f)]){if(f=g[Ff.Path("props.sourceObj.value.id").get(f)])f.props.attributeConnections.value=f.props.attributeConnections.value.filter(function(m){return function(n){return n.id!=
m.$jscomp$loop$prop$id$1008$2714}}(c));delete g[c.$jscomp$loop$prop$id$1008$2714]}}c={$jscomp$loop$prop$id$1008$2714:c.$jscomp$loop$prop$id$1008$2714}}}function vs(g,c){c=void 0===c?Ff.defaultExprSerializer:c;g.snapshot&&(g=g.snapshot);for(var h=[],f=0,m=Object.keys(g);f<m.length;f++){var n=g[m[f]];if(n.__expr__)(n=c.requiredModulesOf__expr__(n.__expr__))&&h.push.apply(h,$jscomp.arrayFromIterable(n));else{var a=Ff.ClassHelper.sourceModulesInObjRef(n);a&&a.length&&h.push.apply(h,$jscomp.arrayFromIterable(a.map(function(b){return(b.package&&
b.package.name||"")+"/"+b.pathInPackage})));if(n.props)for(var d in n.props){a=n.props[d].value;if("string"===typeof a){var k=c.requiredModulesOf__expr__(a);k&&h.push.apply(h,$jscomp.arrayFromIterable(k))}Ff.obj.isArray(a)&&a.forEach(function(b){"string"===typeof b&&(b=c.requiredModulesOf__expr__(b))&&h.push.apply(h,$jscomp.arrayFromIterable(b))})}}}return h=Ff.arr.uniq(h)}function TQ(){throw Error("setTimeout has not been defined");}function UQ(){throw Error("clearTimeout has not been defined");
}function B_(g){if(Qt===setTimeout)return setTimeout(g,0);if((Qt===TQ||!Qt)&&setTimeout)return Qt=setTimeout,setTimeout(g,0);try{return Qt(g,0)}catch(c){try{return Qt.call(null,g,0)}catch(h){return Qt.call(this||xz,g,0)}}}function hga(){yz&&qw&&(yz=!1,qw.length?ws=qw.concat(ws):iI=-1,ws.length&&C_())}function C_(){if(!yz){var g=B_(hga);yz=!0;for(var c=ws.length;c;){qw=ws;for(ws=[];++iI<c;)qw&&qw[iI].run();iI=-1;c=ws.length}qw=null;yz=!1;(function(h){if(Rt===clearTimeout)return clearTimeout(h);if((Rt===
UQ||!Rt)&&clearTimeout)return Rt=clearTimeout,clearTimeout(h);try{Rt(h)}catch(f){try{return Rt.call(null,h)}catch(m){return Rt.call(this||xz,h)}}})(g)}}function D_(g,c){(this||xz).fun=g;(this||xz).array=c}function xs(){}function jI(){if(E_)return F_;E_=!0;return F_={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}}function kI(){if(G_)return H_;G_=!0;var g=Li;return H_="object"===typeof g&&g.env&&g.env.NODE_DEBUG&&/\bsemver\b/i.test(g.env.NODE_DEBUG)?
function(c){for(var h=[],f=0;f<arguments.length;++f)h[f-0]=arguments[f];return console.error.apply(console,["SEMVER"].concat($jscomp.arrayFromIterable(h)))}:function(){}}function zz(){if(I_)return dr;I_=!0;var g=jI().MAX_SAFE_COMPONENT_LENGTH,c=kI();dr=dr={};var h=dr.re=[],f=dr.src=[],m=dr.t={},n=0,a=function(d,k,b){var e=n++;c(e,k);m[d]=e;f[e]=k;h[e]=new RegExp(k,b?"g":void 0)};a("NUMERICIDENTIFIER","0|[1-9]\\d*");a("NUMERICIDENTIFIERLOOSE","[0-9]+");a("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");
a("MAINVERSION","("+f[m.NUMERICIDENTIFIER]+")\\.("+(f[m.NUMERICIDENTIFIER]+")\\.(")+(f[m.NUMERICIDENTIFIER]+")"));a("MAINVERSIONLOOSE","("+f[m.NUMERICIDENTIFIERLOOSE]+")\\.("+(f[m.NUMERICIDENTIFIERLOOSE]+")\\.(")+(f[m.NUMERICIDENTIFIERLOOSE]+")"));a("PRERELEASEIDENTIFIER","(?:"+f[m.NUMERICIDENTIFIER]+"|"+f[m.NONNUMERICIDENTIFIER]+")");a("PRERELEASEIDENTIFIERLOOSE","(?:"+f[m.NUMERICIDENTIFIERLOOSE]+"|"+f[m.NONNUMERICIDENTIFIER]+")");a("PRERELEASE","(?:-("+f[m.PRERELEASEIDENTIFIER]+"(?:\\."+f[m.PRERELEASEIDENTIFIER]+
")*))");a("PRERELEASELOOSE","(?:-?("+f[m.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+f[m.PRERELEASEIDENTIFIERLOOSE]+")*))");a("BUILDIDENTIFIER","[0-9A-Za-z-]+");a("BUILD","(?:\\+("+f[m.BUILDIDENTIFIER]+"(?:\\."+f[m.BUILDIDENTIFIER]+")*))");a("FULLPLAIN","v?"+f[m.MAINVERSION]+f[m.PRERELEASE]+"?"+f[m.BUILD]+"?");a("FULL","^"+f[m.FULLPLAIN]+"$");a("LOOSEPLAIN","[v=\\s]*"+f[m.MAINVERSIONLOOSE]+f[m.PRERELEASELOOSE]+"?"+f[m.BUILD]+"?");a("LOOSE","^"+f[m.LOOSEPLAIN]+"$");a("GTLT","((?:<|>)?=?)");a("XRANGEIDENTIFIERLOOSE",
f[m.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*");a("XRANGEIDENTIFIER",f[m.NUMERICIDENTIFIER]+"|x|X|\\*");a("XRANGEPLAIN","[v=\\s]*("+f[m.XRANGEIDENTIFIER]+")(?:\\.("+(f[m.XRANGEIDENTIFIER]+")(?:\\.(")+(f[m.XRANGEIDENTIFIER]+")(?:")+(f[m.PRERELEASE]+")?"+f[m.BUILD]+"?)?)?"));a("XRANGEPLAINLOOSE","[v=\\s]*("+f[m.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+(f[m.XRANGEIDENTIFIERLOOSE]+")(?:\\.(")+(f[m.XRANGEIDENTIFIERLOOSE]+")(?:")+(f[m.PRERELEASELOOSE]+")?"+f[m.BUILD]+"?)?)?"));a("XRANGE","^"+f[m.GTLT]+"\\s*"+f[m.XRANGEPLAIN]+
"$");a("XRANGELOOSE","^"+f[m.GTLT]+"\\s*"+f[m.XRANGEPLAINLOOSE]+"$");a("COERCE","(^|[^\\d])(\\d{1,"+g+"})(?:\\.(\\d{1,"+(g+"}))?(?:\\.(\\d{1,")+(g+"}))?(?:$|[^\\d])"));a("COERCERTL",f[m.COERCE],!0);a("LONETILDE","(?:~>?)");a("TILDETRIM","(\\s*)"+f[m.LONETILDE]+"\\s+",!0);dr.tildeTrimReplace="$1~";a("TILDE","^"+f[m.LONETILDE]+f[m.XRANGEPLAIN]+"$");a("TILDELOOSE","^"+f[m.LONETILDE]+f[m.XRANGEPLAINLOOSE]+"$");a("LONECARET","(?:\\^)");a("CARETTRIM","(\\s*)"+f[m.LONECARET]+"\\s+",!0);dr.caretTrimReplace=
"$1^";a("CARET","^"+f[m.LONECARET]+f[m.XRANGEPLAIN]+"$");a("CARETLOOSE","^"+f[m.LONECARET]+f[m.XRANGEPLAINLOOSE]+"$");a("COMPARATORLOOSE","^"+f[m.GTLT]+"\\s*("+f[m.LOOSEPLAIN]+")$|^$");a("COMPARATOR","^"+f[m.GTLT]+"\\s*("+f[m.FULLPLAIN]+")$|^$");a("COMPARATORTRIM","(\\s*)"+f[m.GTLT]+"\\s*("+f[m.LOOSEPLAIN]+"|"+f[m.XRANGEPLAIN]+")",!0);dr.comparatorTrimReplace="$1$2$3";a("HYPHENRANGE","^\\s*("+f[m.XRANGEPLAIN]+")\\s+-\\s+("+(f[m.XRANGEPLAIN]+")\\s*$"));a("HYPHENRANGELOOSE","^\\s*("+f[m.XRANGEPLAINLOOSE]+
")\\s+-\\s+("+(f[m.XRANGEPLAINLOOSE]+")\\s*$"));a("STAR","(<|>)?=?\\s*\\*");a("GTE0","^\\s*>=\\s*0.0.0\\s*$");a("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");return dr}function lI(){if(J_)return K_;J_=!0;var g=["includePrerelease","loose","rtl"];return K_=function(c){return c?"object"!==typeof c?{loose:!0}:g.filter(function(h){return c[h]}).reduce(function(h,f){h[f]=!0;return h},{}):{}}}function VQ(){if(L_)return M_;L_=!0;var g=/^[0-9]+$/,c=function(h,f){var m=g.test(h),n=g.test(f);m&&n&&(h=+h,f=+f);return h===
f?0:m&&!n?-1:n&&!m?1:h<f?-1:1};return M_={compareIdentifiers:c,rcompareIdentifiers:function(h,f){return c(f,h)}}}function vn(){if(N_)return O_;N_=!0;var g=kI(),c=jI(),h=c.MAX_LENGTH,f=c.MAX_SAFE_INTEGER;c=zz();var m=c.re,n=c.t,a=lI(),d=VQ().compareIdentifiers,k=function(b,e){e=a(e);if(b instanceof k){if(b.loose===!!e.loose&&b.includePrerelease===!!e.includePrerelease)return b;b=b.version}else if("string"!==typeof b)throw new TypeError("Invalid Version: "+b);if(b.length>h)throw new TypeError("version is longer than "+
h+" characters");g("SemVer",b,e);this.options=e;this.loose=!!e.loose;this.includePrerelease=!!e.includePrerelease;e=b.trim().match(e.loose?m[n.LOOSE]:m[n.FULL]);if(!e)throw new TypeError("Invalid Version: "+b);this.raw=b;this.major=+e[1];this.minor=+e[2];this.patch=+e[3];if(this.major>f||0>this.major)throw new TypeError("Invalid major version");if(this.minor>f||0>this.minor)throw new TypeError("Invalid minor version");if(this.patch>f||0>this.patch)throw new TypeError("Invalid patch version");this.prerelease=
e[4]?e[4].split(".").map(function(l){if(/^[0-9]+$/.test(l)){var p=+l;if(0<=p&&p<f)return p}return l}):[];this.build=e[5]?e[5].split("."):[];this.format()};k.prototype.format=function(){this.version=this.major+"."+this.minor+"."+this.patch;this.prerelease.length&&(this.version+="-"+this.prerelease.join("."));return this.version};k.prototype.toString=function(){return this.version};k.prototype.compare=function(b){g("SemVer.compare",this.version,this.options,b);if(!(b instanceof k)){if("string"===typeof b&&
b===this.version)return 0;b=new k(b,this.options)}return b.version===this.version?0:this.compareMain(b)||this.comparePre(b)};k.prototype.compareMain=function(b){b instanceof k||(b=new k(b,this.options));return d(this.major,b.major)||d(this.minor,b.minor)||d(this.patch,b.patch)};k.prototype.comparePre=function(b){b instanceof k||(b=new k(b,this.options));if(this.prerelease.length&&!b.prerelease.length)return-1;if(!this.prerelease.length&&b.prerelease.length)return 1;if(!this.prerelease.length&&!b.prerelease.length)return 0;
var e=0;do{var l=this.prerelease[e],p=b.prerelease[e];g("prerelease compare",e,l,p);if(void 0===l&&void 0===p)return 0;if(void 0===p)return 1;if(void 0===l)return-1;if(l!==p)return d(l,p)}while(++e)};k.prototype.compareBuild=function(b){b instanceof k||(b=new k(b,this.options));var e=0;do{var l=this.build[e],p=b.build[e];g("prerelease compare",e,l,p);if(void 0===l&&void 0===p)return 0;if(void 0===p)return 1;if(void 0===l)return-1;if(l!==p)return d(l,p)}while(++e)};k.prototype.inc=function(b,e){switch(b){case "premajor":this.minor=
this.patch=this.prerelease.length=0;this.major++;this.inc("pre",e);break;case "preminor":this.patch=this.prerelease.length=0;this.minor++;this.inc("pre",e);break;case "prepatch":this.prerelease.length=0;this.inc("patch",e);this.inc("pre",e);break;case "prerelease":0===this.prerelease.length&&this.inc("patch",e);this.inc("pre",e);break;case "major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++;this.patch=this.minor=0;this.prerelease=[];break;case "minor":0===this.patch&&
0!==this.prerelease.length||this.minor++;this.patch=0;this.prerelease=[];break;case "patch":0===this.prerelease.length&&this.patch++;this.prerelease=[];break;case "pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(b=this.prerelease.length;0<=--b;)"number"===typeof this.prerelease[b]&&(this.prerelease[b]++,b=-2);-1===b&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw Error("invalid increment argument: "+
b);}this.format();this.raw=this.version;return this};return O_=k}function Az(){if(P_)return Q_;P_=!0;var g=jI().MAX_LENGTH,c=zz(),h=c.re,f=c.t,m=vn(),n=lI();return Q_=function(a,d){d=n(d);if(a instanceof m)return a;if("string"!==typeof a||a.length>g||!(d.loose?h[f.LOOSE]:h[f.FULL]).test(a))return null;try{return new m(a,d)}catch(k){return null}}}function iga(){if(R_)return S_;R_=!0;var g=Az();return S_=function(c,h){return(c=g(c,h))?c.version:null}}function jga(){if(T_)return U_;T_=!0;var g=vn();
return U_=function(c,h,f,m){"string"===typeof f&&(m=f,f=void 0);try{return(new g(c,f)).inc(h,m).version}catch(n){return null}}}function Xp(){if(V_)return W_;V_=!0;var g=vn();return W_=function(c,h,f){return(new g(c,f)).compare(new g(h,f))}}function WQ(){if(X_)return Y_;X_=!0;var g=Xp();return Y_=function(c,h,f){return 0===g(c,h,f)}}function kga(){if(Z_)return $_;Z_=!0;var g=vn();return $_=function(c,h){return(new g(c,h)).major}}function lga(){if(a0)return b0;a0=!0;var g=Az();return b0=function(c,
h){return(c=g(c,h))&&c.prerelease.length?c.prerelease:null}}function mga(){if(c0)return d0;c0=!0;var g=Xp();return d0=function(c,h,f){return g(h,c,f)}}function XQ(){if(e0)return f0;e0=!0;var g=vn();return f0=function(c,h,f){c=new g(c,f);h=new g(h,f);return c.compare(h)||c.compareBuild(h)}}function nga(){if(g0)return h0;g0=!0;var g=XQ();return h0=function(c,h){return c.sort(function(f,m){return g(m,f,h)})}}function mI(){if(i0)return j0;i0=!0;var g=Xp();return j0=function(c,h,f){return 0<g(c,h,f)}}
function YQ(){if(k0)return l0;k0=!0;var g=Xp();return l0=function(c,h,f){return 0>g(c,h,f)}}function ZQ(){if(m0)return n0;m0=!0;var g=Xp();return n0=function(c,h,f){return 0<=g(c,h,f)}}function o0(){if(p0)return q0;p0=!0;var g=Xp();return q0=function(c,h,f){return 0!==g(c,h,f)}}function $Q(){if(r0)return s0;r0=!0;var g=Xp();return s0=function(c,h,f){return 0>=g(c,h,f)}}function t0(){if(u0)return v0;u0=!0;var g=WQ(),c=o0(),h=mI(),f=ZQ(),m=YQ(),n=$Q();return v0=function(a,d,k,b){switch(d){case "===":return"object"===
typeof a&&(a=a.version),"object"===typeof k&&(k=k.version),a===k;case "!==":return"object"===typeof a&&(a=a.version),"object"===typeof k&&(k=k.version),a!==k;case "":case "=":case "==":return g(a,k,b);case "!=":return c(a,k,b);case ">":return h(a,k,b);case ">=":return f(a,k,b);case "<":return m(a,k,b);case "<=":return n(a,k,b);default:throw new TypeError("Invalid operator: "+d);}}}function oga(){if(w0)return x0;w0=!0;var g=vn(),c=Az(),h=zz(),f=h.re,m=h.t;return x0=function(n,a){if(n instanceof g)return n;
"number"===typeof n&&(n=String(n));if("string"!==typeof n)return null;a=a||{};var d=null;if(a.rtl){for(var k;(k=f[m.COERCERTL].exec(n))&&(!d||d.index+d[0].length!==n.length);)d&&k.index+k[0].length===d.index+d[0].length||(d=k),f[m.COERCERTL].lastIndex=k.index+k[1].length+k[2].length;f[m.COERCERTL].lastIndex=-1}else d=n.match(f[m.COERCE]);return null===d?null:c(d[2]+"."+(d[3]||"0")+"."+(d[4]||"0"),a)}}function zj(g){var c=this;c instanceof zj||(c=new zj);c.tail=null;c.head=null;c.length=0;if(g&&"function"===
typeof g.forEach)g.forEach(function(m){c.push(m)});else if(0<arguments.length)for(var h=0,f=arguments.length;h<f;h++)c.push(arguments[h]);return c}function rw(g,c,h,f){if(!(this instanceof rw))return new rw(g,c,h,f);this.list=f;this.value=g;c?(c.next=this,this.prev=c):this.prev=null;h?(h.prev=this,this.next=h):this.next=null}function Yp(){if(y0)return aR;y0=!0;var g=function(P,da){var fa=this;da=h(da);if(P instanceof g)return P.loose===!!da.loose&&P.includePrerelease===!!da.includePrerelease?P:new g(P.raw,
da);if(P instanceof f)return this.raw=P.value,this.set=[[P]],this.format(),this;this.options=da;this.loose=!!da.loose;this.includePrerelease=!!da.includePrerelease;this.raw=P;this.set=P.split(/\s*\|\|\s*/).map(function(ka){return fa.parseRange(ka.trim())}).filter(function(ka){return ka.length});if(!this.set.length)throw new TypeError("Invalid SemVer Range: "+P);if(1<this.set.length)if(P=this.set[0],this.set=this.set.filter(function(ka){return"<0.0.0-0"!==ka[0].value}),0===this.set.length)this.set=
[P];else if(1<this.set.length)for(P=$jscomp.makeIterator(this.set),da=P.next();!da.done;da=P.next())if(da=da.value,1===da.length&&""===da[0].value){this.set=[da];break}this.format()};g.prototype.format=function(){return this.range=this.set.map(function(P){return P.join(" ").trim()}).join("||").trim()};g.prototype.toString=function(){return this.range};g.prototype.parseRange=function(P){var da=this;P=P.trim();var fa="parseRange:"+Object.keys(this.options).join(",")+":"+P,ka=c.get(fa);if(ka)return ka;
ka=this.options.loose;P=P.replace(ka?d[k.HYPHENRANGELOOSE]:d[k.HYPHENRANGE],T(this.options.includePrerelease));m("hyphen replace",P);P=P.replace(d[k.COMPARATORTRIM],b);m("comparator trim",P,d[k.COMPARATORTRIM]);P=P.replace(d[k.TILDETRIM],e);P=P.replace(d[k.CARETTRIM],l);P=P.split(/\s+/).join(" ");var za=ka?d[k.COMPARATORLOOSE]:d[k.COMPARATOR];ka=P.split(" ").map(function(N){var ia=N;N=da.options;m("comp",ia,N);ia=E(ia,N);m("caret",ia);ia=x(ia,N);m("tildes",ia);ia=J(ia,N);m("xrange",ia);m("replaceStars",
ia,N);ia=ia.trim().replace(d[k.STAR],"");m("stars",ia);return ia}).join(" ").split(/\s+/).map(function(N){var ia=da.options;m("replaceGTE0",N,ia);return N.trim().replace(d[ia.includePrerelease?k.GTE0PRE:k.GTE0],"")}).filter(this.options.loose?function(N){return!!N.match(za)}:function(){return!0}).map(function(N){return new f(N,da.options)});P=new Map;ka=$jscomp.makeIterator(ka);for(var Ia=ka.next();!Ia.done;Ia=ka.next()){Ia=Ia.value;if("<0.0.0-0"===Ia.value)return[Ia];P.set(Ia.value,Ia)}1<P.size&&
P.has("")&&P.delete("");P=[].concat($jscomp.arrayFromIterable(P.values()));c.set(fa,P);return P};g.prototype.intersects=function(P,da){if(!(P instanceof g))throw new TypeError("a Range is required");return this.set.some(function(fa){return p(fa,da)&&P.set.some(function(ka){return p(ka,da)&&fa.every(function(za){return ka.every(function(Ia){return za.intersects(Ia,da)})})})})};g.prototype.test=function(P){if(!P)return!1;if("string"===typeof P)try{P=new n(P,this.options)}catch(N){return!1}for(var da=
0;da<this.set.length;da++){a:{var fa=this.set[da];for(var ka=P,za=this.options,Ia=0;Ia<fa.length;Ia++)if(!fa[Ia].test(ka)){fa=!1;break a}if(ka.prerelease.length&&!za.includePrerelease){for(za=0;za<fa.length;za++)if(m(fa[za].semver),fa[za].semver!==f.ANY&&0<fa[za].semver.prerelease.length&&(Ia=fa[za].semver,Ia.major===ka.major&&Ia.minor===ka.minor&&Ia.patch===ka.patch)){fa=!0;break a}fa=!1}else fa=!0}if(fa)return!0}return!1};aR=g;var c=new pga({max:1E3}),h=lI(),f=nI(),m=kI(),n=vn(),a=zz(),d=a.re,k=
a.t,b=a.comparatorTrimReplace,e=a.tildeTrimReplace,l=a.caretTrimReplace,p=function(P,da){var fa=!0;P=P.slice();for(var ka=P.pop();fa&&P.length;)fa=P.every(function(za){return ka.intersects(za,da)}),ka=P.pop();return fa},u=function(P){return!P||"x"===P.toLowerCase()||"*"===P},x=function(P,da){return P.trim().split(/\s+/).map(function(fa){return z(fa,da)}).join(" ")},z=function(P,da){return P.replace(da.loose?d[k.TILDELOOSE]:d[k.TILDE],function(fa,ka,za,Ia,N){m("tilde",P,fa,ka,za,Ia,N);u(ka)?fa="":
u(za)?fa=">="+ka+".0.0 <"+(+ka+1)+".0.0-0":u(Ia)?fa=">="+ka+"."+za+".0 <"+ka+"."+(+za+1)+".0-0":N?(m("replaceTilde pr",N),fa=">="+ka+"."+za+"."+Ia+"-"+N+" <"+ka+"."+(+za+1)+".0-0"):fa=">="+ka+"."+za+"."+Ia+" <"+ka+"."+(+za+1)+".0-0";m("tilde return",fa);return fa})},E=function(P,da){return P.trim().split(/\s+/).map(function(fa){return G(fa,da)}).join(" ")},G=function(P,da){m("caret",P,da);var fa=da.includePrerelease?"-0":"";return P.replace(da.loose?d[k.CARETLOOSE]:d[k.CARET],function(ka,za,Ia,N,
ia){m("caret",P,ka,za,Ia,N,ia);u(za)?ka="":u(Ia)?ka=">="+za+".0.0"+fa+" <"+(+za+1)+".0.0-0":u(N)?ka="0"===za?">="+za+"."+Ia+".0"+fa+" <"+za+"."+(+Ia+1)+".0-0":">="+za+"."+Ia+".0"+fa+" <"+(+za+1)+".0.0-0":ia?(m("replaceCaret pr",ia),ka="0"===za?"0"===Ia?">="+za+"."+Ia+"."+N+"-"+ia+" <"+za+"."+Ia+"."+(+N+1)+"-0":">="+za+"."+Ia+"."+N+"-"+ia+" <"+za+"."+(+Ia+1)+".0-0":">="+za+"."+Ia+"."+N+"-"+ia+" <"+(+za+1)+".0.0-0"):(m("no pr"),ka="0"===za?"0"===Ia?">="+za+"."+Ia+"."+N+fa+" <"+za+"."+Ia+"."+(+N+1)+
"-0":">="+za+"."+Ia+"."+N+fa+" <"+za+"."+(+Ia+1)+".0-0":">="+za+"."+Ia+"."+N+" <"+(+za+1)+".0.0-0");m("caret return",ka);return ka})},J=function(P,da){m("replaceXRanges",P,da);return P.split(/\s+/).map(function(fa){return K(fa,da)}).join(" ")},K=function(P,da){P=P.trim();return P.replace(da.loose?d[k.XRANGELOOSE]:d[k.XRANGE],function(fa,ka,za,Ia,N,ia){m("xRange",P,fa,ka,za,Ia,N,ia);var W=u(za),ca=W||u(Ia);N=ca||u(N);"="===ka&&N&&(ka="");ia=da.includePrerelease?"-0":"";W?fa=">"===ka||"<"===ka?"<0.0.0-0":
"*":ka&&N?(ca&&(Ia=0),N=0,">"===ka?(ka=">=",ca?(za=+za+1,Ia=0):Ia=+Ia+1,N=0):"<="===ka&&(ka="<",ca?za=+za+1:Ia=+Ia+1),"<"===ka&&(ia="-0"),fa=ka+za+"."+Ia+"."+N+ia):ca?fa=">="+za+".0.0"+ia+" <"+(+za+1)+".0.0-0":N&&(fa=">="+za+"."+Ia+".0"+ia+" <"+za+"."+(+Ia+1)+".0-0");m("xRange return",fa);return fa})},T=function(P){return function(da,fa,ka,za,Ia,N,ia,W,ca,sa,la,Aa,ib){fa=u(ka)?"":u(za)?">="+ka+".0.0"+(P?"-0":""):u(Ia)?">="+ka+"."+za+".0"+(P?"-0":""):N?">="+fa:">="+fa+(P?"-0":"");W=u(ca)?"":u(sa)?
"<"+(+ca+1)+".0.0-0":u(la)?"<"+ca+"."+(+sa+1)+".0-0":Aa?"<="+ca+"."+sa+"."+la+"-"+Aa:P?"<"+ca+"."+sa+"."+(+la+1)+"-0":"<="+W;return(fa+" "+W).trim()}};return aR}function nI(){if(z0)return bR;z0=!0;var g=Symbol("SemVer ANY"),c=function(e,l){l=h(l);if(e instanceof c){if(e.loose===!!l.loose)return e;e=e.value}d("comparator",e,l);this.options=l;this.loose=!!l.loose;this.parse(e);this.value=this.semver===g?"":this.operator+this.semver.version;d("comp",this)};c.prototype.parse=function(e){var l=e.match(this.options.loose?
m[n.COMPARATORLOOSE]:m[n.COMPARATOR]);if(!l)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==l[1]?l[1]:"";"="===this.operator&&(this.operator="");this.semver=l[2]?new k(l[2],this.options.loose):g};c.prototype.toString=function(){return this.value};c.prototype.test=function(e){d("Comparator.test",e,this.options.loose);if(this.semver===g||e===g)return!0;if("string"===typeof e)try{e=new k(e,this.options)}catch(l){return!1}return a(e,this.operator,this.semver,this.options)};c.prototype.intersects=
function(e,l){if(!(e instanceof c))throw new TypeError("a Comparator is required");l&&"object"===typeof l||(l={loose:!!l,includePrerelease:!1});if(""===this.operator)return""===this.value?!0:(new b(e.value,l)).test(this.value);if(""===e.operator)return""===e.value?!0:(new b(this.value,l)).test(e.semver);var p=(">="===this.operator||">"===this.operator)&&(">="===e.operator||">"===e.operator),u=("<="===this.operator||"<"===this.operator)&&("<="===e.operator||"<"===e.operator),x=this.semver.version===
e.semver.version,z=(">="===this.operator||"<="===this.operator)&&(">="===e.operator||"<="===e.operator),E=a(this.semver,"<",e.semver,l)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator);e=a(this.semver,">",e.semver,l)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return p||u||x&&z||E||e};$jscomp.global.Object.defineProperties(c,{ANY:{configurable:!0,enumerable:!0,get:function(){return g}}});bR=c;var h=lI(),f=zz(),m=f.re,n=f.t,
a=t0(),d=kI(),k=vn(),b=Yp();return bR}function oI(){if(A0)return B0;A0=!0;var g=Yp();return B0=function(c,h,f){try{h=new g(h,f)}catch(m){return!1}return h.test(c)}}function qga(){if(C0)return D0;C0=!0;var g=vn(),c=Yp();return D0=function(h,f,m){var n=null,a=null,d=null;try{d=new c(f,m)}catch(k){return null}h.forEach(function(k){!d.test(k)||n&&-1!==a.compare(k)||(n=k,a=new g(n,m))});return n}}function rga(){if(E0)return F0;E0=!0;var g=Yp();return F0=function(c,h){try{return(new g(c,h)).range||"*"}catch(f){return null}}}
function sga(){if(G0)return H0;G0=!0;var g=Yp();return H0=function(c,h,f){c=new g(c,f);h=new g(h,f);return c.intersects(h)}}function tga(){if(I0)return J0;I0=!0;var g=Az();return J0=function(c,h){return(c=g(c.trim().replace(/^[=v]+/,""),h))?c.version:null}}function uga(){if(K0)return L0;K0=!0;var g=Az(),c=WQ();return L0=function(h,f){if(c(h,f))return null;h=g(h);f=g(f);var m=h.prerelease.length||f.prerelease.length,n=m?"pre":"",a;for(a in h)if(("major"===a||"minor"===a||"patch"===a)&&h[a]!==f[a])return n+
a;return m?"prerelease":""}}function vga(){if(M0)return N0;M0=!0;var g=vn();return N0=function(c,h){return(new g(c,h)).minor}}function wga(){if(O0)return P0;O0=!0;var g=vn();return P0=function(c,h){return(new g(c,h)).patch}}function xga(){if(Q0)return R0;Q0=!0;var g=Xp();return R0=function(c,h){return g(c,h,!0)}}function yga(){if(S0)return T0;S0=!0;var g=XQ();return T0=function(c,h){return c.sort(function(f,m){return g(f,m,h)})}}function zga(){if(U0)return V0;U0=!0;var g=Yp();return V0=function(c,
h){return(new g(c,h)).set.map(function(f){return f.map(function(m){return m.value}).join(" ").trim().split(" ")})}}function Aga(){if(W0)return X0;W0=!0;var g=vn(),c=Yp();return X0=function(h,f,m){var n=null,a=null,d=null;try{d=new c(f,m)}catch(k){return null}h.forEach(function(k){!d.test(k)||n&&1!==a.compare(k)||(n=k,a=new g(n,m))});return n}}function Bga(){if(Y0)return Z0;Y0=!0;var g=vn(),c=Yp(),h=mI();return Z0=function(f,m){f=new c(f,m);m=new g("0.0.0");if(f.test(m))return m;m=new g("0.0.0-0");
if(f.test(m))return m;m=null;for(var n={},a=0;a<f.set.length;n={$jscomp$loop$prop$setMin$2716:n.$jscomp$loop$prop$setMin$2716},++a){var d=f.set[a];n.$jscomp$loop$prop$setMin$2716=null;d.forEach(function(k){return function(b){var e=new g(b.semver.version);switch(b.operator){case ">":0===e.prerelease.length?e.patch++:e.prerelease.push(0),e.raw=e.format();case "":case ">=":if(!k.$jscomp$loop$prop$setMin$2716||h(e,k.$jscomp$loop$prop$setMin$2716))k.$jscomp$loop$prop$setMin$2716=e;break;case "<":case "<=":break;
default:throw Error("Unexpected operation: "+b.operator);}}}(n));!n.$jscomp$loop$prop$setMin$2716||m&&!h(m,n.$jscomp$loop$prop$setMin$2716)||(m=n.$jscomp$loop$prop$setMin$2716)}return m&&f.test(m)?m:null}}function cR(){if($0)return a1;$0=!0;var g=vn(),c=nI(),h=c.ANY,f=Yp(),m=oI(),n=mI(),a=YQ(),d=$Q(),k=ZQ();return a1=function(b,e,l,p){b=new g(b,p);e=new f(e,p);switch(l){case ">":var u=n;l=d;var x=a;var z=">";var E=">=";break;case "<":u=a;l=k;x=n;z="<";E="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');
}if(m(b,e,p))return!1;for(var G={},J=0;J<e.set.length;G={$jscomp$loop$prop$high$2718:G.$jscomp$loop$prop$high$2718,$jscomp$loop$prop$low$2719:G.$jscomp$loop$prop$low$2719},++J){var K=e.set[J];G.$jscomp$loop$prop$high$2718=null;G.$jscomp$loop$prop$low$2719=null;K.forEach(function(T){return function(P){P.semver===h&&(P=new c(">=0.0.0"));T.$jscomp$loop$prop$high$2718=T.$jscomp$loop$prop$high$2718||P;T.$jscomp$loop$prop$low$2719=T.$jscomp$loop$prop$low$2719||P;u(P.semver,T.$jscomp$loop$prop$high$2718.semver,
p)?T.$jscomp$loop$prop$high$2718=P:x(P.semver,T.$jscomp$loop$prop$low$2719.semver,p)&&(T.$jscomp$loop$prop$low$2719=P)}}(G));if(G.$jscomp$loop$prop$high$2718.operator===z||G.$jscomp$loop$prop$high$2718.operator===E||(!G.$jscomp$loop$prop$low$2719.operator||G.$jscomp$loop$prop$low$2719.operator===z)&&l(b,G.$jscomp$loop$prop$low$2719.semver)||G.$jscomp$loop$prop$low$2719.operator===E&&x(b,G.$jscomp$loop$prop$low$2719.semver))return!1}return!0}}function Cga(){if(b1)return c1;b1=!0;var g=cR();return c1=
function(c,h,f){return g(c,h,">",f)}}function Dga(){if(d1)return e1;d1=!0;var g=cR();return e1=function(c,h,f){return g(c,h,"<",f)}}function Ega(){if(f1)return g1;f1=!0;var g=oI(),c=Xp();return g1=function(h,f,m){var n=[],a=null,d=null;h=h.sort(function(e,l){return c(e,l,m)});for(var k=$jscomp.makeIterator(h),b=k.next();!b.done;b=k.next())b=b.value,g(b,f,m)?(d=b,a||(a=b)):(d&&n.push([a,d]),a=d=null);a&&n.push([a,null]);a=[];n=$jscomp.makeIterator(n);for(d=n.next();!d.done;d=n.next())k=$jscomp.makeIterator(d.value),
d=k.next().value,k=k.next().value,d===k?a.push(d):k||d!==h[0]?k?d===h[0]?a.push("<="+k):a.push(d+" - "+k):a.push(">="+d):a.push("*");h=a.join(" || ");return h.length<("string"===typeof f.raw?f.raw:String(f)).length?h:f}}function Fga(){if(h1)return i1;h1=!0;var g=Yp(),c=nI(),h=c.ANY,f=oI(),m=Xp(),n=function(k,b,e){if(k===b)return!0;if(1===k.length&&k[0].semver===h){if(1===b.length&&b[0].semver===h)return!0;k=e.includePrerelease?[new c(">=0.0.0-0")]:[new c(">=0.0.0")]}if(1===b.length&&b[0].semver===
h){if(e.includePrerelease)return!0;b=[new c(">=0.0.0")]}var l=new Set,p,u,x=$jscomp.makeIterator(k);for(k=x.next();!k.done;k=x.next())k=k.value,">"===k.operator||">="===k.operator?p=a(p,k,e):"<"===k.operator||"<="===k.operator?u=d(u,k,e):l.add(k.semver);if(1<l.size)return null;if(p&&u){var z=m(p.semver,u.semver,e);if(0<z||0===z&&(">="!==p.operator||"<="!==u.operator))return null}for(k=$jscomp.makeIterator(l).next();!k.done;){z=k.value;if(p&&!f(z,String(p),e)||u&&!f(z,String(u),e))return null;p=$jscomp.makeIterator(b);
for(k=p.next();!k.done;k=p.next())if(!f(z,String(k.value),e))return!1;return!0}l=u&&!e.includePrerelease&&u.semver.prerelease.length?u.semver:!1;x=p&&!e.includePrerelease&&p.semver.prerelease.length?p.semver:!1;l&&1===l.prerelease.length&&"<"===u.operator&&0===l.prerelease[0]&&(l=!1);b=$jscomp.makeIterator(b);for(k=b.next();!k.done;k=b.next()){k=k.value;var E=E||">"===k.operator||">="===k.operator;var G=G||"<"===k.operator||"<="===k.operator;if(p)if(x&&k.semver.prerelease&&k.semver.prerelease.length&&
k.semver.major===x.major&&k.semver.minor===x.minor&&k.semver.patch===x.patch&&(x=!1),">"===k.operator||">="===k.operator){var J=a(p,k,e);if(J===k&&J!==p)return!1}else if(">="===p.operator&&!f(p.semver,String(k),e))return!1;if(u)if(l&&k.semver.prerelease&&k.semver.prerelease.length&&k.semver.major===l.major&&k.semver.minor===l.minor&&k.semver.patch===l.patch&&(l=!1),"<"===k.operator||"<="===k.operator){if(J=d(u,k,e),J===k&&J!==u)return!1}else if("<="===u.operator&&!f(u.semver,String(k),e))return!1;
if(!k.operator&&(u||p)&&0!==z)return!1}return p&&G&&!u&&0!==z||u&&E&&!p&&0!==z||x||l?!1:!0},a=function(k,b,e){if(!k)return b;e=m(k.semver,b.semver,e);return 0<e?k:0>e?b:">"===b.operator&&">="===k.operator?b:k},d=function(k,b,e){if(!k)return b;e=m(k.semver,b.semver,e);return 0>e?k:0<e?b:"<"===b.operator&&"<="===k.operator?b:k};return i1=function(k,b,e){e=void 0===e?{}:e;if(k===b)return!0;k=new g(k,e);b=new g(b,e);var l=!1;k=$jscomp.makeIterator(k.set);var p=k.next();a:for(;!p.done;p=k.next()){p=p.value;
for(var u=$jscomp.makeIterator(b.set),x=u.next();!x.done;x=u.next())if(x=n(p,x.value,e),l=l||null!==x,x)continue a;if(l)return!1}return!0}}function MC(g){g=Object.assign({plugins:Nf.allPlugins,reinitializeIds:!1,skipMigrations:!0},g);if(g.reinitializeIds&&"function"!==typeof g.reinitializeIds)throw Error("serializer option 'reinitializeIds' needs to be a function(id, ref) => id");return g}function Bz(g,c){c=Nf.normalizeOptions(c);var h=c.objPool||new Nf.ObjectPool(c);c=">="+Nf.serializerVersion.replace(Nf.majorAndMinorVersionRe,
"");g=h.snapshotObject(g);Nf.removeUnreachableObjects([g.id],g.snapshot);Nf.clearDanglingConnections(g.snapshot);g.requiredVersion=c;return g}function NC(g,c){c=Nf.normalizeOptions(c);var h=g.requiredVersion;h&&!Nf.semver.satisfies(Nf.serializerVersion,h)&&console.warn("[lively.serializer deserialization] snapshot requires version "+(h+" but serializer has incompatible version ")+(Nf.serializerVersion+". Deserialization might fail...!"));return(c.objPool||new Nf.ObjectPool(c)).resolveFromSnapshotAndId(g)}
function OC(g,c,h){function f(){var d=Nf.deserialize(g,h);Nf.runMigrations(n,"objectConverter",g,m);return d}h=Nf.normalizeOptions(h);c.length&&(h.skipMigrations=!1);var m=h.objPool||(h.objPool=new Nf.ObjectPool(h));c=Nf.normalizeMigrations(c);var n=c.after,a;Nf.runMigrations(c.before,"snapshotConverter",g,m);"function"===typeof h.onDeserializationStart&&(a=h.onDeserializationStart(g,h));return a instanceof Promise?a.then(f):f()}function PC(g,c){return Nf.deserialize(Nf.serialize(g,c),c)}function QC(g){return g&&
g.split(",").map(function(c){c=c.split(" ").filter(function(h){return""!=h}).join(" ");c.includes(" ")&&(c.startsWith("'")&&(c=c.slice(1)),c.endsWith("'")&&(c=c.slice(0,-1)),c.startsWith('"')||(c='"'+c),c.endsWith('"')||(c+='"'));return c}).join(",")}function Cz(g,c){c||(c="undefined"!==typeof document?document.location.search:"");c=(c=c.trim())&&"?"!==c?hi.parseQuery(c):{};g.endsWith(".json")?(c.file=g,delete c.name):(delete c.file,c.name=g);return"/worlds/load?"+hi.stringifyQuery(c)}function RC(g){Object.assign(hi.nameToClassMapping,
g)}function Dk(g,c){g=void 0===g?{}:g;c=void 0===c?{restore:!1}:c;var h=hi.nameToClassMapping.default;g.type&&("function"===typeof g.type&&(h=g.type),"object"===typeof g.type?h=hi.locateClass(g.type):"string"===typeof g.type&&(h=hi.nameToClassMapping[g.type.toLowerCase()]||h));var f={};return c.restore?(new h((f[Symbol.for("lively-instance-restorer")]=!0,f))).initFromJSON(g):new h(g)}function SC(g){return("function"===typeof g?g[Symbol.for("__LivelyClassName__")]:"string"===typeof g?g.toLowerCase():
"")+"_"+hi.string.newUUID().replace(/-/g,"_")}function Gga(g){return"[object Array]"===Hga.call(g)}function dp(g,c,h){(this||dR).type=Number(g);(this||dR).vNode=c;(this||dR).patch=h}function j1(g,c){var h=g.vnode;h||(h=g.vnode=g.render(c));if(!(Iga(h)||Jga(h)||Kga(h)))throw Error("thunk did not return a valid node");return h}function k1(g,c){var h;for(h in g){if(!(h in c)){var f=f||{};f[h]=void 0}var m=g[h],n=c[h];if(m!==n)if(l1(m)&&l1(n))if(m1(n)!==m1(m))f=f||{},f[h]=n;else if(Lga(n))f=f||{},f[h]=
n;else{if(m=k1(m,n))f=f||{},f[h]=m}else f=f||{},f[h]=n}for(var a in c)a in g||(f=f||{},f[a]=c[a]);return f}function m1(g){if(Object.getPrototypeOf)return Object.getPrototypeOf(g);if(g.__proto__)return g.__proto__;if(g.constructor)return g.constructor.prototype}function n1(g,c){var h={a:g};o1(g,c,h,0);return h}function o1(g,c,h,f){if(g!==c){var m=h[f],n=!1;if(pI(g)||pI(c))eR(g,c,h,f);else if(null==c)qI(g)||(fR(g,h,f),gR(g,h,f),m=h[f]),m=Zp(m,new Lk(Lk.REMOVE,g,c));else if(sw(c))if(sw(g))if(g.tagName===
c.tagName&&g.namespace===c.namespace&&g.key===c.key){var a=Mga(g.properties,c.properties);a&&(m=Zp(m,new Lk(Lk.PROPS,g,a)));a=f;var d=g.children;c=c.children;var k=p1(c),b=k.keys,e=k.free;if(e.length===c.length)c={children:c,moves:null};else{k=p1(d);var l=k.keys;if(k.free.length===d.length)c={children:c,moves:null};else{k=[];for(var p=0,u=e.length,x=0,z=0;z<d.length;z++){var E=d[z];E.key?b.hasOwnProperty(E.key)?(E=b[E.key],k.push(c[E])):(x++,k.push(null)):p<u?(E=e[p++],k.push(c[E])):(x++,k.push(null))}e=
p>=e.length?c.length:e[p];for(p=0;p<c.length;p++)u=c[p],u.key?l.hasOwnProperty(u.key)||k.push(u):p>=e&&k.push(u);l=k.slice();e=0;p=[];u=[];for(E=0;E<c.length;){var G=c[E];for(z=l[e];null===z&&l.length;)p.push(rI(l,e,null)),z=l[e];z&&z.key===G.key?(e++,E++):G.key?(z&&z.key?b[z.key]!==E+1?(p.push(rI(l,e,z.key)),(z=l[e])&&z.key===G.key?e++:u.push({key:G.key,to:E})):u.push({key:G.key,to:E}):u.push({key:G.key,to:E}),E++):z&&z.key&&p.push(rI(l,e,z.key))}for(;e<l.length;)z=l[e],p.push(rI(l,e,z&&z.key));
c=p.length!==x||u.length?{children:k,moves:{removes:p,inserts:u}}:{children:k,moves:null}}}b=c.children;k=d.length;x=b.length;k=k>x?k:x;for(x=0;x<k;x++)l=d[x],e=b[x],a+=1,l?o1(l,e,h,a):e&&(m=Zp(m,new Lk(Lk.INSERT,null,e))),sw(l)&&l.count&&(a+=l.count);c.moves&&(m=Zp(m,new Lk(Lk.ORDER,g,c.moves)))}else m=Zp(m,new Lk(Lk.VNODE,g,c)),n=!0;else m=Zp(m,new Lk(Lk.VNODE,g,c)),n=!0;else q1(c)?q1(g)?g.text!==c.text&&(m=Zp(m,new Lk(Lk.VTEXT,g,c))):(m=Zp(m,new Lk(Lk.VTEXT,g,c)),n=!0):qI(c)&&(qI(g)||(n=!0),m=
Zp(m,new Lk(Lk.WIDGET,g,c)));m&&(h[f]=m);n&&(fR(g,h,f),gR(g,h,f))}}function gR(g,c,h){if(qI(g))"function"===typeof g.destroy&&(c[h]=Zp(c[h],new Lk(Lk.REMOVE,g,null)));else if(sw(g)&&(g.hasWidgets||g.hasThunks)){g=g.children;for(var f=g.length,m=0;m<f;m++){var n=g[m];h+=1;gR(n,c,h);sw(n)&&n.count&&(h+=n.count)}}else pI(g)&&eR(g,null,c,h)}function eR(g,c,h,f){g=Nga(g,c);g=n1(g.a,g.b);a:{for(m in g)if("a"!==m){var m=!0;break a}m=!1}m&&(h[f]=new Lk(Lk.THUNK,null,g))}function fR(g,c,h){if(sw(g)){if(g.hooks){var f=
c[h],m=Lk.PROPS,n=g.hooks,a={},d;for(d in n)a[d]=void 0;c[h]=Zp(f,new Lk(m,g,a))}if(g.descendantHooks||g.hasThunks)for(g=g.children,f=g.length,m=0;m<f;m++)n=g[m],h+=1,fR(n,c,h),sw(n)&&n.count&&(h+=n.count)}else pI(g)&&eR(g,null,c,h)}function rI(g,c,h){g.splice(c,1);return{from:c,key:h}}function p1(g){for(var c={},h=[],f=g.length,m=0;m<f;m++){var n=g[m];n.key?c[n.key]=m:h.push(m)}return{keys:c,free:h}}function Zp(g,c){return g?(Oga(g)?g.push(c):g=[g,c],g):c}function r1(g,c,h,f){if(f)if(f=f[c],s1(f))f.unhook&&
f.unhook(g,c,h);else if("attributes"===c)for(var m in f)g.removeAttribute(m);else if("style"===c)for(var n in f)g.style[n]="";else g[c]="string"===typeof f?"":null}function t1(g){if(Object.getPrototypeOf)return Object.getPrototypeOf(g);if(g.__proto__)return g.__proto__;if(g.constructor)return g.constructor.prototype}function u1(g,c){var h=c?c.document||v1:v1,f=c?c.warn:null;g=Pga(g).a;if(Qga(g))return g.init();if(Rga(g))return h.createTextNode(g.text);if(!Sga(g))return f&&f("Item is not a valid virtual dom node",
g),null;h=null===g.namespace?h.createElement(g.tagName):h.createElementNS(g.namespace,g.tagName);Tga(h,g.properties);g=g.children;for(f=0;f<g.length;f++){var m=u1(g[f],c);m&&h.appendChild(m)}return h}function w1(g,c,h,f,m){f=f||{};if(g){x1(h,m,m)&&(f[m]=g);var n=c.children;if(n){g=g.childNodes;for(var a=0;a<c.children.length;a++){m+=1;var d=n[a]||Uga,k=m+(d.count||0);x1(h,m,k)&&w1(g[a],d,h,f,m);m=k}}}return f}function x1(g,c,h){if(0===g.length)return!1;for(var f=0,m=g.length-1,n,a;f<=m;){n=(m+f)/
2>>0;a=g[n];if(f===m)return a>=c&&a<=h;if(a<c)f=n+1;else if(a>h)m=n-1;else return!0}return!1}function Vga(g,c){return g>c?1:-1}function y1(g,c){"function"===typeof c.destroy&&Wga(c)&&c.destroy(g)}function z1(g,c,h){h=h||{};h.patch=h.patch&&h.patch!==z1?h.patch:Xga;h.render=h.render||Yga;return h.patch(g,c,h)}function Xga(g,c,h){var f=[];for(m in c)"a"!==m&&f.push(Number(m));if(0===f.length)return g;var m=Zga(g,c.a,f);var n=g.ownerDocument;h.document||n===$ga||(h.document=n);for(n=0;n<f.length;n++){var a=
f[n];var d=m[a],k=c[a],b=h;if(d)if(aha(k))for(var e=0;e<k.length;e++)a=A1(k[e],d,b),d===g&&(g=a);else a=A1(k,d,b),d===g&&(g=a)}return g}function hR(g,c,h,f,m){(this||er).tagName=g;(this||er).properties=c||bha;(this||er).children=h||cha;(this||er).key=null!=f?String(f):void 0;(this||er).namespace="string"===typeof m?m:null;g=h&&h.length||0;f=0;var n=m=!1,a=!1,d;for(b in c)if(c.hasOwnProperty(b)){var k=c[b];dha(k)&&k.unhook&&(d||(d={}),d[b]=k)}for(c=0;c<g;c++){var b=h[c];eha(b)?(f+=b.count||0,!m&&b.hasWidgets&&
(m=!0),!n&&b.hasThunks&&(n=!0),a||!b.hooks&&!b.descendantHooks||(a=!0)):!m&&fha(b)?"function"===typeof b.destroy&&(m=!0):!n&&gha(b)&&(n=!0)}(this||er).count=g+f;(this||er).hasWidgets=m;(this||er).hasThunks=n;(this||er).hooks=d;(this||er).descendantHooks=a}function iR(g){(this||hha).text=String(g)}function sI(g){if(!(this instanceof sI))return new sI(g);this.value=g}function TC(g){if(!(this instanceof TC))return new TC(g);this.value=g}function B1(g,c,h,f){if("string"===typeof g)c.push(new C1(g));else if("number"===
typeof g)c.push(new C1(String(g)));else if(D1(g))c.push(g);else if(E1(g))for(var m=0;m<g.length;m++)B1(g[m],c,h,f);else if(null!==g&&void 0!==g)throw c={tagName:h,properties:f},h=Error(),h.type="virtual-hyperscript.unexpected.virtual-element",h.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+F1(g)+".\nThe parent vnode is:\n"+F1(c),h.foreignObject=g,h.parentVnode=c,h;}function D1(g){return iha(g)||jha(g)||kha(g)||lha(g)}function F1(g){try{return JSON.stringify(g,
null,"    ")}catch(c){return String(g)}}function jR(g,c){if(3===g.nodeType)return new G1(g.nodeValue);if(1===g.nodeType||9===g.nodeType){var h="http://www.w3.org/1999/xhtml"!==g.namespaceURI?g.namespaceURI:null,f=c&&g.getAttribute(c)?g.getAttribute(c):null,m=g.tagName;var n,a={};if(g.hasAttributes()){if(g.namespaceURI&&"http://www.w3.org/1999/xhtml"!==g.namespaceURI)var d=g.namespaceURI;for(var k=0;k<g.attributes.length;k++){if("style"==g.attributes[k].name){var b=g.style;var e={};for(n=0;n<b.length;++n){var l=
b.item(n);e[l]=String(b[l]);-1<e[l].indexOf("url")&&(e[l]=e[l].replace(/"/g,""))}b="style";l=n=void 0}else d?(n=g.attributes[k],b=n.name,e=n.value,n=mha[n.name]||"",l=void 0):(n=void 0,e=g.attributes[k],b=H1[e.name]?H1[e.name]:e.name,0===b.indexOf("data-")||0===b.indexOf("aria-")?(e=e.value,n=!0):e=e.value,l=n||!1,n=void 0);n?a[b]={namespace:n,value:e}:l?(a.attributes||(a.attributes={}),a.attributes[b]=e):a[b]=e}}d=[];for(k=0;k<g.childNodes.length;k++)d.push(jR(g.childNodes[k],c));return new nha(m,
a,d,f,h)}return new G1("")}function UC(g){var c={};Ph.addFill(g,c);Ph.addTransform(g,c);Ph.addTransformOrigin(g,c);Ph.addDisplay(g,c);Ph.addExtentStyle(g,c);Ph.addBorder(g,c);Ph.addBorderRadius(g,c);Ph.addShadowStyle(g,c);g.grayscale&&(c.filter=(c.filter||"")+" grayscale("+100*g.grayscale+"%)");g.blur&&(c.filter=(c.filter||"")+" blur("+g.blur+"px)");null!=g.opacity&&(c.opacity=g.opacity);g.draggable&&!g.isWorld&&(c["touch-action"]="none");return c}function tI(g){return g.renderOnGPU||g.dropShadow&&
!g.dropShadow.fast||0<g.grayscale}function kR(g,c){var h=g.position,f=g.origin,m=g.scale,n=g.rotation,a=g.flipped,d=g.tilted,k=g.perspective,b=g.owner,e=Math.round(h.x-f.x-(g._skipWrapping&&b?b.borderWidthLeft:0));h=Math.round(h.y-f.y-(g._skipWrapping&&b?b.borderWidthTop:0));if(g=Ph.canBePromotedToCompositionLayer(g))c.willChange="transform";b&&b.isText||g?c.transform="translate("+e+"px, "+h+"px)":(c.transform="",c.top=h+"px",c.left=e+"px");c.transform+=" rotate("+n.toFixed(2)+"rad) scale("+m.toFixed(5)+
","+m.toFixed(5)+")";k&&(c.perspective=k+"px");a&&(c.transform+=" rotateY("+180*a+"deg)");d&&(c.transform+=" rotateX("+180*d+"deg)")}function VC(g,c){var h=g.width;g=g.height;c.width=h||1;c.height=g||1;c.viewBox=[0,0,h||1,g||1].join(" ");return c}function Dz(g){var c="";if(0<g.length){var h=g[0];var f=h.position;var m=f.y;f=f.x;c+="M "+f+" "+m+" "}for(var n=1;n<g.length-1;n++){var a=g[n],d=a.position,k=d.x;d=d.y;var b=a,e=b.controlPoints.previous;c=b.isSmooth?c+("C "+(f+h.controlPoints.next.x)+" "+
(m+h.controlPoints.next.y)+" "+(k+e.x)+" "+(d+e.y)+" "+k+" "+d+" "):c+("L "+k+" "+d+" ");h=a;f=k;m=d}0<g.length&&(a=g[g.length-1].position,n=a.x,a=a.y,g=g[g.length-1],k=g.controlPoints.previous,c=g.isSmooth?c+("C "+(f+h.controlPoints.next.x)+" "+(m+h.controlPoints.next.y)+" "+(n+k.x)+" "+(a+k.y)+" "+n+" "+a):c+("L "+n+" "+a));return c}function WC(g,c){var h=g.id,f=g.vertices,m=g.fill,n=g.borderColor,a=g.borderWidth;f.length&&(c.d=Ph.getSvgVertices(f));Ph.addSvgBorderStyle(g,c);c["stroke-width"]=a.valueOf();
c.fill=m?m.isGradient?"url(#gradient-fill"+h+")":m.toString():"transparent";c.stroke=n.valueOf().isGradient?"url(#gradient-borderColor"+h+")":n.valueOf().toString();return c}function Ez(g){var c=g.reactsToPointer,h=g.nativeCursor,f=g.clipMode,m=Te.styleProps(g);g=g._animationQueue.maskedProps("css");"backgroundImage"in g&&delete m.background;"visible"!==f&&(m.overflow=f,m["-webkit-overflow-scrolling"]="touch",m["overflow-anchor"]="none");Object.assign(m,g);m.position="absolute";m["pointer-events"]=
c?"auto":"none";m.cursor=h;return m}function lR(g,c){this.morph=g;this.type=c}function Fz(g,c){c={animation:new Te.Animation(g),key:g.id,id:g.id,attributes:{},className:(g.hideScrollbars?g.styleClasses.concat("hiddenScrollbar"):g.styleClasses).join(" "),draggable:!1,"morph-after-render-hook":new Te.MorphAfterRenderHook(g,c)};c.attributes["touch-action"]=Te.bowser.ios&&g.draggable&&!g.isWorld?"none":Te.bowser.ios&&"visible"!=g.clipMode&&!g.isWorld?"auto":"manipulation";return c}function uI(g){var c=
new Te.SvgAnimation(g,"svg"),h={};Te.addSvgAttributes(g,h);Object.assign(h,g._animationQueue.maskedProps("svg"));return{animation:c,attributes:h}}function vI(g){var c=new Te.SvgAnimation(g,"path"),h={mask:0!==g.drawnProportion?"url(#mask"+g.id+")":""};Te.addPathAttributes(g,h);Object.assign(h,g._animationQueue.maskedProps("path"));return{animation:c,attributes:h}}function wI(g,c,h){var f=h=h.valueOf(),m=f.bounds,n=f.focus,a=f.vector;f=f.stops;var d=c.x;c=c.y;g={namespace:"http://www.w3.org/2000/svg",
attributes:{id:"gradient-"+g,gradientUnits:"userSpaceOnUse",r:"50%"}};a&&(g.attributes.gradientTransform="rotate("+Te.num.toDegrees(a.extent().theta())+", "+d/2+", "+c/2+")");n&&m&&(a=m.width,m=m.height,g.attributes.gradientTransform="matrix(\n"+a/d+", 0, 0, "+m/c+",\n"+(d/2-a/d*(d/2)+n.x*d-d/2)+",\n"+(c/2-m/c*(c/2)+n.y*c-c/2)+")");return Te.h(h.type,g,f.map(function(k){return Te.h("stop",{namespace:"http://www.w3.org/2000/svg",attributes:{offset:100*k.offset+"%","stop-opacity":k.color.a,"stop-color":k.color.withA(1).toString()}})}))}
function xI(g,c){c=void 0===c?g.env.renderer:c;return Te.createNode(g.render(c),c.domEnvironment)}function yI(g,c){var h=c.renderMap.get(g),f=c.getNodeForMorph(g);if(f&&h){var m=c.render(g),n=Te.diff(h,m);if(g=c.renderMap.get(g.owner))g=g.children[0].children,h=g.indexOf(h),g[h]=m,Te.patch(f,n)}}function zI(g,c){if(g.needsRerender()){var h=!1,f=c.domNode,m=c.renderMap.get(g)||f&&(h=!0)&&Te.parser(f)||c.render(g),n=c.render(g);h&&(m.key=n.key);h=Te.diff(m,n);f=f||(c.domNode=Te.createNode(m,c.domEnvironment));
f.parentNode||Te.initDOMState(c,g);Te.patch(f,h);c.renderFixedMorphs(n.fixedMorphs,g)}}function AI(g,c,h){return(((1-3*h+3*c)*g+(3*h-6*c))*g+3*c)*g}function oha(g){return g}function St(g){return Df.obj.isFunction(g)?g:Df.Bezier.apply(Df,$jscomp.arrayFromIterable(eval("(["+g.match(/\((.*)\)/)[1]+"])")))}function Gz(g){var c=0,h=0;do c+=g.offsetTop||0,h+=g.offsetLeft||0,g=g.offsetParent;while(g);return{top:c,left:h}}function mR(){return System.get("@system-env").browser?mh.createDOMEnvironment_browser():
mh.createDOMEnvironment_node()}function BI(){return mh._defaultEnv||(mh._defaultEnv=System.get("@system-env").browser?new mh.DomEnvironment(window,document,function(){}):mh.createDOMEnvironment())}function fr(g,c,h){g=void 0===g?"lively-css":g;h=void 0===h?document:h;var f=h.getElementById(g);return f?mh.setCSSDef(f,c,h):mh.addCSSDef(g,c,h)}function tw(g,c,h,f){h=void 0===h?document:h;f=void 0===f?!0:f;var m=h.getElementById(g),n=!1;return m?f&&m.getAttribute("href")!==c?(m.setAttribute("href",c),
m.onload=function(){return n=!0},mh.promise.waitFor(3E4,function(){return!!n&&m})):Promise.resolve():(m=document.createElement("link"),m.type="text/css",m.rel="stylesheet",m.setAttribute("id",g),m.setAttribute("href",c),m.onload=function(){return n=!0},(h.head||h).appendChild(m),mh.promise.waitFor(3E4,function(){return!!n&&m}))}function CI(g,c){if("string"===typeof g)return g;if(!g||"object"!==typeof g)return null;switch(c){case "ios":return g.ios||g.mac;case "mac":return g.mac||g.ios;case "win":case "windows":case "windowsphone":return g.win||
g.windows;case "linux":return g.linux||g.win||g.windows;case "chromeos":return g.chromeos||g.linux||g.win||g.windows;case "android":return g.android||g.linux||g.win||g.windows;default:return g.linux||g.win||g.windows}}function DI(){nR=!0;for(var g,c,h=XC.length;h;){c=XC;XC=[];for(g=-1;++g<h;)c[g]();h=XC.length}nR=!1}function Hz(g,c,h){var f=h[h.length-1];g===f.element&&(h.pop(),f=h[h.length-1]);h=f.element;f=f.index;Array.isArray(h)?h.push(g):f===c.length-2?(c=c.pop(),h[c]=g):c.push(g)}function Zj(){Zj.init.call(this)}
function EI(g){if("function"!=typeof g)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g);}function I1(g,c,h,f){var m,n,a;if(EI(h),void 0===(n=g._events)?(n=g._events=Object.create(null),g._eventsCount=0):(void 0!==n.newListener&&(g.emit("newListener",c,h.listener?h.listener:h),n=g._events),a=n[c]),void 0===a)n[c]=h,++g._eventsCount;else if("function"==typeof a?a=n[c]=f?[h,a]:[a,h]:f?a.unshift(h):a.push(h),0<(m=void 0===g._maxListeners?Zj.defaultMaxListeners:
g._maxListeners)&&a.length>m&&!a.warned)a.warned=!0,h=Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit"),h.name="MaxListenersExceededWarning",h.emitter=g,h.type=c,h.count=a.length,console&&console.warn&&console.warn(h);return g}function pha(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,
arguments)}function J1(g,c,h){g={fired:!1,wrapFn:void 0,target:g,type:c,listener:h};c=pha.bind(g);return c.listener=h,g.wrapFn=c,c}function K1(g,c,h){g=g._events;if(void 0===g)return[];c=g[c];if(void 0===c)h=[];else if("function"==typeof c)h=h?[c.listener||c]:[c];else if(h)for(h=Array(c.length),g=0;g<h.length;++g)h[g]=c[g].listener||c[g];else h=L1(c,c.length);return h}function M1(g){var c=this._events;if(void 0!==c){g=c[g];if("function"==typeof g)return 1;if(void 0!==g)return g.length}return 0}function L1(g,
c){for(var h=Array(c),f=0;f<c;++f)h[f]=g[f];return h}function Iz(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function Tt(){this._store={}}function YC(g){this._store=new Tt;if(g&&Array.isArray(g))for(var c=0,h=g.length;c<h;c++)this.add(g[c])}function Ml(g){var c;if(!g||"object"!==typeof g)return g;if(Array.isArray(g)){var h=[];var f=0;for(c=g.length;f<c;f++)h[f]=Ml(g[f]);return h}if(g instanceof Date)return g.toISOString();if("undefined"!==typeof ArrayBuffer&&g instanceof ArrayBuffer||
"undefined"!==typeof Blob&&g instanceof Blob)return g instanceof ArrayBuffer?"function"===typeof g.slice?g=g.slice(0):(f=new ArrayBuffer(g.byteLength),h=new Uint8Array(f),g=new Uint8Array(g),h.set(g),g=f):(f=g.size,h=g.type,g="function"===typeof g.slice?g.slice(0,f,h):g.webkitSlice(0,f,h)),g;h=Object.getPrototypeOf(g);null===h?h=!0:(h=h.constructor,h="function"==typeof h&&h instanceof h&&N1.call(h)==qha);if(!h)return g;h={};for(f in g)Object.prototype.hasOwnProperty.call(g,f)&&(c=Ml(g[f]),"undefined"!==
typeof c&&(h[f]=c));return h}function O1(g){var c=!1;return Jz(function(h){if(c)throw Error("once called more than once");c=!0;g.apply(this,h)})}function P1(g){return Jz(function(c){c=Ml(c);var h=this,f="function"===typeof c[c.length-1]?c.pop():!1,m=new Promise(function(n,a){var d;try{var k=O1(function(b,e){b?a(b):n(e)});c.push(k);(d=g.apply(h,c))&&"function"===typeof d.then&&n(d)}catch(b){a(b)}});f&&m.then(function(n){f(null,n)},f);return m})}function rha(g,c,h){if(g.constructor.listeners("debug").length){for(var f=
["api",g.name,c],m=0;m<h.length-1;m++)f.push(h[m]);g.constructor.emit("debug",f);var n=h[h.length-1];h[h.length-1]=function(a,d){var k=["api",g.name,c];k=k.concat(a?["error",a]:["success",d]);g.constructor.emit("debug",k);n(a,d)}}}function tl(g,c){return P1(Jz(function(h){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var f=this;rha(f,g,h);return this.taskqueue.isReady?c.apply(this,h):new Promise(function(m,
n){f.taskqueue.addTask(function(a){a?n(a):m(f[g].apply(f,h))})})}))}function ZC(g,c){for(var h={},f=0,m=c.length;f<m;f++){var n=c[f];n in g&&(h[n]=g[n])}return h}function Q1(g){return g}function sha(g){return[{ok:g}]}function R1(g,c,h){function f(){var u=[];e.forEach(function(x){x.docs.forEach(function(z){u.push({id:x.id,docs:[z]})})});h(null,{results:u})}function m(){if(!(p>=l.length)){var u=l.slice(p,Math.min(p+6,l.length));n(u,p);p+=u.length}}function n(u,x){u.forEach(function(z,E){var G=x+E;E=
d.get(z);var J=ZC(E[0],["atts_since","attachments"]);J.open_revs=E.map(function(T){return T.rev});J.open_revs=J.open_revs.filter(Q1);var K=Q1;0===J.open_revs.length&&(delete J.open_revs,K=sha);["revs","attachments","binary","ajax","latest"].forEach(function(T){T in c&&(J[T]=c[T])});g.get(z,J,function(T,P){T=T?[{error:T}]:K(P);e[G]={id:z,docs:T};++b===k&&f();m()})})}var a=c.docs,d=new wo;a.forEach(function(u){d.has(u.id)?d.get(u.id).push(u):d.set(u.id,[u])});var k=d.size,b=0,e=Array(k),l=[];d.forEach(function(u,
x){l.push(x)});var p=0;m()}function tha(g){$C&&addEventListener("storage",function(c){g.emit(c.key)})}function Kz(){Wn.EventEmitter.call(this);this._listeners={};tha(this)}function ep(g){if("undefined"!==typeof console&&"function"===typeof console[g]){var c=Array.prototype.slice.call(arguments,1);console[g].apply(console,c)}}function uha(g){var c=0;g||(c=2E3);g=parseInt(g,10)||0;c=parseInt(c,10);c=c!==c||c<=g?(g||1)<<1:c+1;6E5<c&&(g=3E5,c=6E5);return~~((c-g)*Math.random()+g)}function oR(g,c){ep("info",
"The above "+g+" is totally normal. "+c)}function nk(g,c,h){Error.call(this,h);this.status=g;this.name=c;this.message=h;this.error=!0}function vi(g,c){function h(f){for(var m in g)"function"!==typeof g[m]&&(this[m]=g[m]);void 0!==f&&(this.reason=f)}h.prototype=nk.prototype;return new h(c)}function Lz(g){if("object"!==typeof g){var c=g;g=S1;g.data=c}"error"in g&&"conflict"===g.error&&(g.name="conflict",g.status=409);"name"in g||(g.name=g.error||"unknown");"status"in g||(g.status=500);"message"in g||
(g.message=g.message||g.reason);return g}function pR(g){var c={},h=g.filter&&"function"===typeof g.filter;c.query=g.query_params;return function(f){f.doc||(f.doc={});var m;if(m=h)try{m=!(0,g.filter)(f.doc,c)}catch(a){m=vi(FI,"Filter function threw: "+a.toString())}if("object"===typeof m)return m;if(m)return!1;if(!g.include_docs)delete f.doc;else if(!g.attachments)for(var n in f.doc._attachments)f.doc._attachments.hasOwnProperty(n)&&(f.doc._attachments[n].stub=!0);return!0}}function GI(g){for(var c=
[],h=0,f=g.length;h<f;h++)c=c.concat(g[h]);return c}function T1(g){var c;g?"string"!==typeof g?c=vi(U1):/^_/.test(g)&&!/^_(design|local)/.test(g)&&(c=vi(vha)):c=vi(wha);if(c)throw c;}function gr(g){return"boolean"===typeof g._remote?g._remote:"function"===typeof g.type?(ep("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===g.type()):!1}function qR(g){if(!g)return null;var c=g.split("/");return 2===c.length?c:1===c.length?[g,g]:null}function V1(g){return(g=
qR(g))?g.join("/"):null}function W1(g){g=xha.exec(g);for(var c={},h=14;h--;){var f=X1[h],m=g[h]||"",n=-1!==["user","password"].indexOf(f);c[f]=n?decodeURIComponent(m):m}c.queryKey={};c[X1[12]].replace(yha,function(a,d,k){d&&(c.queryKey[d]=k)});return c}function rR(g,c){var h=[],f=[],m;for(m in c)c.hasOwnProperty(m)&&(h.push(m),f.push(c[m]));h.push(g);return Function.apply(null,h).apply(null,f)}function HI(g,c,h){return new Promise(function(f,m){g.get(c,function(n,a){if(n){if(404!==n.status)return m(n);
a={}}n=a._rev;a=h(a);if(!a)return f({updated:!1,rev:n});a._id=c;a._rev=n;f(zha(g,a,h))})})}function zha(g,c,h){return g.put(c).then(function(f){return{updated:!0,rev:f.rev}},function(f){if(409!==f.status)throw f;return HI(g,c._id,h)})}function sR(g,c){g=g||[];c=c||{};try{return new Blob(g,c)}catch(m){if("TypeError"!==m.name)throw m;for(var h=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),
f=0;f<g.length;f+=1)h.append(g[f]);return h.getBlob(c.type)}}function tR(g,c){for(var h=g.length,f=new ArrayBuffer(h),m=new Uint8Array(f),n=0;n<h;n++)m[n]=g.charCodeAt(n);return sR([f],{type:c})}function uR(g,c){return tR(atob(g),c)}function Y1(g,c){var h=new FileReader,f="function"===typeof h.readAsBinaryString;h.onloadend=function(m){var n=m.target.result||"";if(f)return c(n);m="";n=new Uint8Array(n);for(var a=n.byteLength,d=0;d<a;d++)m+=String.fromCharCode(n[d]);c(m)};f?h.readAsBinaryString(g):
h.readAsArrayBuffer(g)}function Z1(g,c){Y1(g,function(h){c(h)})}function vR(g,c){Z1(g,function(h){c(btoa(h))})}function Aha(g,c){var h=new FileReader;h.onloadend=function(f){f=f.target.result||new ArrayBuffer(0);c(f)};h.readAsArrayBuffer(g)}function Bha(g,c,h){return g.webkitSlice?g.webkitSlice(c,h):g.slice(c,h)}function Cha(g,c,h,f,m){if(0<h||f<c.size)c=Bha(c,h,f);Aha(c,function(n){g.append(n);m()})}function Dha(g,c,h,f,m){if(0<h||f<c.length)c=c.substring(h,f);g.appendBinary(c);m()}function wR(g,
c){function h(){Eha(m)}function f(){var p=e.end(!0);p=btoa(p);c(p);e.destroy()}function m(){var p=b*d,u=p+d;b++;b<k?l(e,g,p,u,h):l(e,g,p,u,f)}var n="string"===typeof g,a=n?g.length:g.size,d=Math.min(32768,a),k=Math.ceil(a/d),b=0,e=n?new II:new II.ArrayBuffer,l=n?Dha:Cha;m()}function $1(g,c){g=Ml(g);if(!c)return a2.v4().replace(/-/g,"").toLowerCase();delete g._rev_tree;return II.hash(JSON.stringify(g))}function uw(g){g=g.rev_tree.slice();for(var c;c=g.pop();){var h=c.ids,f=h[2];c=c.pos;if(f.length){h=
0;for(var m=f.length;h<m;h++)g.push({pos:c+1,ids:f[h]})}else if(f=!!h[1].deleted,h=h[0],!n||(d!==f?d:a!==c?a<c:n<h)){var n=h;var a=c;var d=f}}return a+"-"+n}function vw(g,c){g=g.slice();for(var h;h=g.pop();){var f=h.pos,m=h.ids,n=m[2];h=c(0===n.length,f,m[0],h.ctx,m[1]);m=0;for(var a=n.length;m<a;m++)g.push({pos:f+1,ids:n[m],ctx:h})}}function Fha(g,c){return g.pos-c.pos}function xR(g){var c=[];vw(g,function(f,m,n,a,d){f&&c.push({rev:m+"-"+n,pos:m,opts:d})});c.sort(Fha).reverse();g=0;for(var h=c.length;g<
h;g++)delete c[g].pos;return c}function yR(g){var c=uw(g);g=xR(g.rev_tree);for(var h=[],f=0,m=g.length;f<m;f++){var n=g[f];n.rev===c||n.opts.deleted||h.push(n.rev)}return h}function Gha(g){var c=[];vw(g.rev_tree,function(h,f,m,n,a){"available"!==a.status||h||(c.push(f+"-"+m),a.status="missing")});return c}function b2(g){var c=[];g=g.slice();for(var h;h=g.pop();){var f=h.pos,m=h.ids,n=m[0],a=m[1];m=m[2];var d=0===m.length;h=h.history?h.history.slice():[];h.push({id:n,opts:a});d&&c.push({pos:f+1-h.length,
ids:h});n=0;for(a=m.length;n<a;n++)g.push({pos:f+1,ids:m[n],history:h})}return c.reverse()}function Hha(g,c){return g.pos-c.pos}function c2(g,c){for(var h,f,m=g.length;c<m;c++){var n=g[c];n=[n.id,n.opts,[]];f?(f[2].push(n),f=n):h=f=n}return h}function Iha(g,c){return g[0]<c[0]?-1:1}function d2(g,c){c=[{tree1:g,tree2:c}];for(var h=!1;0<c.length;){var f=c.pop(),m=f.tree1;f=f.tree2;if(m[1].status||f[1].status)m[1].status="available"===m[1].status||"available"===f[1].status?"available":"missing";for(var n=
0;n<f[2].length;n++)if(m[2][0]){for(var a=!1,d=0;d<m[2].length;d++)m[2][d][0]===f[2][n][0]&&(c.push({tree1:m[2][d],tree2:f[2][n]}),a=!0);if(!a){h="new_branch";a=m[2];d=f[2][n];for(var k,b=a,e=d,l=Iha,p=0,u=b.length;p<u;)k=p+u>>>1,0>l(b[k],e)?p=k+1:u=k;a.splice(p,0,d)}}else h="new_leaf",m[2][0]=f[2][n]}return{conflicts:h,tree:g}}function e2(g,c,h){var f=[],m=!1,n=!1;if(!g.length)return{tree:[c],conflicts:"new_leaf"};for(var a=0,d=g.length;a<d;a++){var k=g[a];if(k.pos===c.pos&&k.ids[0]===c.ids[0])n=
d2(k.ids,c.ids),f.push({pos:k.pos,ids:n.tree}),m=m||n.conflicts,n=!0;else if(!0!==h){var b=k.pos<c.pos?k:c,e=k.pos<c.pos?c:k,l=[],p=[];for(p.push({ids:b.ids,diff:e.pos-b.pos,parent:null,parentIdx:null});0<p.length;){var u=p.pop();if(0===u.diff)u.ids[0]===e.ids[0]&&l.push(u);else for(var x=u.ids[2],z=0,E=x.length;z<E;z++)p.push({ids:x[z],diff:u.diff-1,parent:u.ids,parentIdx:z})}(l=l[0])?(n=d2(l.ids,e.ids),l.parent[2][l.parentIdx]=n.tree,f.push({pos:b.pos,ids:b.ids}),m=m||n.conflicts,n=!0):f.push(k)}else f.push(k)}n||
f.push(c);f.sort(Hha);return{tree:f,conflicts:m||"internal_node"}}function Jha(g,c){g=b2(g);for(var h,f,m=0,n=g.length;m<n;m++){var a=g[m],d=a.ids;if(d.length>c){h||(h={});var k=d.length-c;var b={pos:a.pos+k,ids:c2(d,k)};for(var e=0;e<k;e++)h[a.pos+e+"-"+d[e].id]=!0}else b={pos:a.pos,ids:c2(d,0)};f=f?e2(f,b,!0).tree:[b]}h&&vw(f,function(l,p,u){delete h[p+"-"+u]});return{tree:f,revs:h?Object.keys(h):[]}}function f2(g,c,h){g=e2(g,c);h=Jha(g.tree,h);return{tree:h.tree,stemmedRevs:h.revs,conflicts:g.conflicts}}
function Kha(g){return g.ids}function ys(g,c){c||(c=uw(g));c=c.substring(c.indexOf("-")+1);g=g.rev_tree.map(Kha);for(var h;h=g.pop();){if(h[0]===c)return!!h[1].deleted;g=g.concat(h[2])}}function ww(g){return/^_local/.test(g)}function Lha(g,c){for(var h=c.rev_tree.slice(),f;f=h.pop();){var m=f.pos,n=f.ids,a=n[0],d=n[1];n=n[2];var k=0===n.length;f=f.history?f.history.slice():[];f.push({id:a,pos:m,opts:d});if(k)for(d=0,k=f.length;d<k;d++){var b=f[d];if(b.pos+"-"+b.id===g)return m+"-"+a}a=0;for(d=n.length;a<
d;a++)h.push({pos:m+1,ids:n[a],history:f})}throw Error("Unable to resolve latest revision for id "+c.id+", rev "+g);}function aD(g,c,h){function f(){m.cancel()}Wn.EventEmitter.call(this);var m=this;this.db=g;c=c?Ml(c):{};var n=c.complete=O1(function(d,k){d?(k=m,0<("listenerCount"in k?k.listenerCount("error"):Wn.EventEmitter.listenerCount(k,"error"))&&m.emit("error",d)):m.emit("complete",k);m.removeAllListeners();g.removeListener("destroyed",f)});h&&(m.on("complete",function(d){h(null,d)}),m.on("error",
h));g.once("destroyed",f);c.onChange=function(d,k,b){if(!m.isCancelled)try{m.emit("change",d,k,b)}catch(e){ep("error",'Error in .on("change", function):',e)}};var a=new Promise(function(d,k){c.complete=function(b,e){b?k(b):d(e)}});m.once("cancel",function(){g.removeListener("destroyed",f);c.complete(null,{status:"cancelled"})});this.then=a.then.bind(a);this["catch"]=a["catch"].bind(a);this.then(function(d){n(null,d)},n);g.taskqueue.isReady?m.validateChanges(c):g.taskqueue.addTask(function(d){d?c.complete(d):
m.isCancelled?m.emit("cancel"):m.validateChanges(c)})}function Mha(g,c,h){var f=[{rev:g._rev}];"all_docs"===h.style&&(f=xR(c.rev_tree).map(function(m){return{rev:m.rev}}));f={id:c.id,changes:f,doc:g};ys(c,g._rev)&&(f.deleted=!0);h.conflicts&&(f.doc._conflicts=yR(c),f.doc._conflicts.length||delete f.doc._conflicts);return f}function zR(g,c){return function(h,f){h||f[0]&&f[0].error?(h=h||f[0],h.docId=c,g(h)):g(null,f.length?f[0]:f)}}function Nha(g){for(var c=0;c<g.length;c++){var h=g[c];if(h._deleted)delete h._attachments;
else if(h._attachments)for(var f=Object.keys(h._attachments),m=0;m<f.length;m++){var n=f[m];h._attachments[n]=ZC(h._attachments[n],"data digest content_type length revpos stub".split(" "))}}}function Oha(g,c){var h=g._id;var f=c._id;h=h<f?-1:h>f?1:0;if(0!==h)return h;g=g._revisions?g._revisions.start:0;c=c._revisions?c._revisions.start:0;return g<c?-1:g>c?1:0}function Pha(g){var c={},h=[];vw(g,function(f,m,n,a){m=m+"-"+n;f&&(c[m]=0);void 0!==a&&h.push({from:a,to:m});return m});h.reverse();h.forEach(function(f){c[f.from]=
void 0===c[f.from]?1+c[f.to]:Math.min(c[f.from],1+c[f.to])});return c}function Qha(g){var c="limit"in g?g.keys.slice(g.skip,g.limit+g.skip):0<g.skip?g.keys.slice(g.skip):g.keys;g.keys=c;g.skip=0;delete g.limit;g.descending&&(c.reverse(),g.descending=!1)}function g2(g){var c=g._compactionQueue[0],h=c.opts,f=c.callback;g.get("_local/compaction").catch(function(){return!1}).then(function(m){m&&m.last_seq&&(h.last_seq=m.last_seq);g._compact(h,function(n,a){n?f(n):f(null,a);hr(function(){g._compactionQueue.shift();
g._compactionQueue.length&&g2(g)})})})}function Ek(){Wn.EventEmitter.call(this);for(var g in Ek.prototype)"function"===typeof this[g]&&(this[g]=this[g].bind(this))}function bD(){this.failed=this.isReady=!1;this.queue=[]}function Rha(g,c){var h=g.match(/([a-z-]*):\/\/(.*)/);if(h)return{name:/https?/.test(h[1])?h[1]+"://"+h[2]:h[2],adapter:h[1]};var f=pi.adapters,m=pi.preferredAdapters;h=pi.prefix;c=c.adapter;if(!c)for(var n=0;n<m.length;++n)if(c=m[n],"idb"===c&&"websql"in f&&$C&&localStorage["_pouch__websqldb_"+
h+g])ep("log",'PouchDB is downgrading "'+g+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');else break;f=f[c];return{name:(f&&"use_prefix"in f?f.use_prefix:1)?h+g:g,adapter:c}}function Sha(g){function c(f){g.removeListener("closed",h);f||g.constructor.emit("destroyed",g.name)}function h(){g.removeListener("destroyed",c);g.constructor.emit("unref",g)}g.once("destroyed",c);g.once("closed",h);g.constructor.emit("ref",g)}function pi(g,c){if(!(this instanceof pi))return new pi(g,
c);var h=this;c=c||{};g&&"object"===typeof g&&(c=g,g=c.name,delete c.name);void 0===c.deterministic_revs&&(c.deterministic_revs=!0);this.__opts=c=Ml(c);h.auto_compaction=c.auto_compaction;h.prefix=pi.prefix;if("string"!==typeof g)throw Error("Missing/invalid DB name");var f=Rha((c.prefix||"")+g,c);c.name=f.name;c.adapter=c.adapter||f.adapter;h.name=g;h._adapter=c.adapter;pi.emit("debug",["adapter","Picked adapter: ",c.adapter]);if(!pi.adapters[c.adapter]||!pi.adapters[c.adapter].valid())throw Error("Invalid Adapter: "+
c.adapter);Ek.call(h);h.taskqueue=new bD;h.adapter=c.adapter;pi.adapters[c.adapter].call(h,c,function(m){if(m)return h.taskqueue.fail(m);Sha(h);h.emit("created",h);pi.emit("created",h.name);h.taskqueue.ready(h)})}function h2(g,c){for(var h=0,f=c.length;h<f&&(g=g[c[h]],g);h++);return g}function i2(g){for(var c=[],h="",f=0,m=g.length;f<m;f++){var n=g[f];"."===n?0<f&&"\\"===g[f-1]?h=h.substring(0,h.length-1)+".":(c.push(h),h=""):h+=n}c.push(h);return c}function Tha(g){return g[Object.keys(g)[0]]}function cD(g){var c=
{};g.forEach(function(h){Object.keys(h).forEach(function(f){var m=h[f];"object"!==typeof m&&(m={$eq:m});if(-1<j2.indexOf(f))c[f]=m instanceof Array?m.map(function(a){return cD([a])}):cD([m]);else{var n=c[f]=c[f]||{};Object.keys(m).forEach(function(a){var d=m[a];"$gt"===a||"$gte"===a?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$gte?"$gte"===a?d>n.$gte&&(n.$gte=d):d>=n.$gte&&(delete n.$gte,n.$gt=d):"undefined"!==typeof n.$gt?"$gte"===a?d>n.$gt&&(delete n.$gt,n.$gte=d):d>n.$gt&&(n.$gt=d):n[a]=
d):"$lt"===a||"$lte"===a?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$lte?"$lte"===a?d<n.$lte&&(n.$lte=d):d<=n.$lte&&(delete n.$lte,n.$lt=d):"undefined"!==typeof n.$lt?"$lte"===a?d<n.$lt&&(delete n.$lt,n.$lte=d):d<n.$lt&&(n.$lt=d):n[a]=d):"$ne"===a?"$ne"in n?n.$ne.push(d):n.$ne=[d]:"$eq"===a?(delete n.$gt,delete n.$gte,delete n.$lt,delete n.$lte,delete n.$ne,n.$eq=d):n[a]=d})}})});return c}function k2(g){for(var c in g){if(Array.isArray(g))for(var h in g)g[h].$and&&(g[h]=cD(g[h].$and));var f=
g[c];"object"===typeof f&&k2(f)}return g}function l2(g,c){for(var h in g){"$and"===h&&(c=!0);var f=g[h];"object"===typeof f&&(c=l2(f,c))}return c}function Uha(g){var c=Ml(g);g=!1;l2(c,!1)&&(c=k2(c),"$and"in c&&(c=cD(c.$and)),g=!0);["$or","$nor"].forEach(function(a){a in c&&c[a].forEach(function(d){for(var k=Object.keys(d),b=0;b<k.length;b++){var e=k[b],l=d[e];if("object"!==typeof l||null===l)d[e]={$eq:l}}})});"$not"in c&&(c.$not=cD([c.$not]));for(var h=Object.keys(c),f=0;f<h.length;f++){var m=h[f],
n=c[m];"object"!==typeof n||null===n?n={$eq:n}:"$ne"in n&&!g&&(n.$ne=[n.$ne]);c[m]=n}return c}function im(g,c){if(g===c)return 0;g=xw(g);c=xw(c);var h=AR(g),f=AR(c);if(0!==h-f)return h-f;switch(typeof g){case "number":return g-c;case "boolean":return g<c?-1:1;case "string":return g===c?0:g>c?1:-1}if(Array.isArray(g))a:{h=Math.min(g.length,c.length);for(f=0;f<h;f++){var m=im(g[f],c[f]);if(0!==m){g=m;break a}}g=g.length===c.length?0:g.length>c.length?1:-1}else a:{h=Object.keys(g);f=Object.keys(c);m=
Math.min(h.length,f.length);for(var n=0;n<m;n++){var a=im(h[n],f[n]);if(0!==a){g=a;break a}a=im(g[h[n]],c[f[n]]);if(0!==a){g=a;break a}}g=h.length===f.length?0:h.length>f.length?1:-1}return g}function xw(g){switch(typeof g){case "undefined":return null;case "number":if(Infinity===g||-Infinity===g||isNaN(g))return null;break;case "object":var c=g;if(Array.isArray(g)){var h=g.length;g=Array(h);for(var f=0;f<h;f++)g[f]=xw(c[f])}else{if(g instanceof Date)return g.toJSON();if(null!==g)for(h in g={},c)c.hasOwnProperty(h)&&
(f=c[h],"undefined"!==typeof f&&(g[h]=xw(f)))}}return g}function Vha(g){if(null!==g)switch(typeof g){case "boolean":return g?1:0;case "number":if(0===g)g="1";else{var c=g.toExponential().split(/e\+?/),h=parseInt(c[1],10);g=0>g;h=((g?-h:h)- -324).toString();for(var f="",m=3-h.length;f.length<m;)f+="0";h=(g?"0":"2")+(""+(f+h));c=Math.abs(parseFloat(c[0]));g&&(c=10-c);g=c.toFixed(20);g=g.replace(/\.?0+$/,"");g=h+=""+g}return g;case "string":return g.replace(/\u0002/g,"\u0002\u0002").replace(/\u0001/g,
"\u0001\u0002").replace(/\u0000/g,"\u0001\u0001");case "object":var n=Array.isArray(g);c=n?g:Object.keys(g);h=-1;f=c.length;m="";if(n)for(;++h<f;)m+=$p(c[h]);else for(;++h<f;)n=c[h],m+=$p(n)+$p(g[n]);return m}return""}function $p(g){g=xw(g);return AR(g)+""+Vha(g)+"\x00"}function AR(g){var c=["boolean","number","string","object"].indexOf(typeof g);if(~c)return null===g?1:Array.isArray(g)?5:3>c?c+2:c+3;if(Array.isArray(g))return 5}function Wha(g){function c(h){return g.map(function(f){f=Object.keys(f)[0];
f=i2(f);return h2(h,f)})}return function(h,f){var m=c(h.doc),n=c(f.doc);m=im(m,n);if(0!==m)return m;h=h.doc._id;f=f.doc._id;return h<f?-1:h>f?1:0}}function Xha(g,c,h){g=g.filter(function(m){return Mz(m.doc,c.selector,h)});if(c.sort){var f=Wha(c.sort);g=g.sort(f);"string"!==typeof c.sort[0]&&"desc"===Tha(c.sort[0])&&(g=g.reverse())}if("limit"in c||"skip"in c)f=c.skip||0,g=g.slice(f,("limit"in c?c.limit:g.length)+f);return g}function Mz(g,c,h){return h.every(function(f){var m=c[f],n=i2(f),a=h2(g,n);
return-1<j2.indexOf(f)?Yha(f,m,g):BR(m,g,n,a)})}function BR(g,c,h,f){return g?"object"===typeof g?Object.keys(g).every(function(m){var n=g[m];if(!m2[m])throw Error('unknown operator "'+m+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return m2[m](c,n,h,f)}):g===f:!0}function Yha(g,c,h){return"$or"===g?c.some(function(f){return Mz(h,f,Object.keys(f))}):"$not"===g?!Mz(h,c,Object.keys(c)):!c.find(function(f){return Mz(h,
f,Object.keys(f))})}function dD(g){return"undefined"!==typeof g&&null!==g}function yw(g){return"undefined"!==typeof g}function n2(g,c){return c.some(function(h){return g instanceof Array?-1<g.indexOf(h):g===h})}function Zha(g,c){return c.every(function(h){return-1<g.indexOf(h)})}function $ha(g,c){switch(c){case "null":return null===g;case "boolean":return"boolean"===typeof g;case "number":return"number"===typeof g;case "string":return"string"===typeof g;case "array":return g instanceof Array;case "object":return"[object Object]"===
{}.toString.call(g)}throw Error(c+" not supported as a type.Please use one of object, string, array, number, boolean or null.");}function aia(g,c){if(g.selector&&g.filter&&"_selector"!==g.filter)return c(Error('selector invalid for filter "'+("string"===typeof g.filter?g.filter:"function")+'"'));c()}function bia(g){g.view&&!g.filter&&(g.filter="_view");g.selector&&!g.filter&&(g.filter="_selector");g.filter&&"string"===typeof g.filter&&("_view"===g.filter?g.view=V1(g.view):g.filter=V1(g.filter))}function cia(g,
c){return c.filter&&"string"===typeof c.filter&&!c.doc_ids&&!gr(g.db)}function dia(g,c){var h=c.complete;if("_view"===c.filter){if(!c.view||"string"!==typeof c.view){var f=vi(FI,"`view` filter parameter not found or invalid.");return h(f)}var m=qR(c.view);g.db.get("_design/"+m[0],function(a,d){if(g.isCancelled)return h(null,{status:"cancelled"});if(a)return h(Lz(a));a=d&&d.views&&d.views[m[1]]&&d.views[m[1]].map;if(!a)return h(vi(aq,d.views?"missing json key: "+m[1]:"missing json key: views"));d=
['return function(doc) {\n  "use strict";\n  var emitted = false;\n  var emit = function (a, b) {\n    emitted = true;\n  };',"  var view = "+a+";","  view(doc);\n  if (emitted) {\n    return true;\n  }\n};"].join("\n");d=rR(d,{});c.filter=d;g.doChanges(c)})}else if(c.selector)c.filter=function(a){var d=c.selector;if("object"!==typeof d)throw Error("Selector error: expected a JSON object");d=Uha(d);return(a=Xha([{doc:a}],{selector:d},Object.keys(d)))&&1===a.length},g.doChanges(c);else{var n=qR(c.filter);
g.db.get("_design/"+n[0],function(a,d){if(g.isCancelled)return h(null,{status:"cancelled"});if(a)return h(Lz(a));a=d&&d.filters&&d.filters[n[1]];if(!a)return h(vi(aq,d&&d.filters?"missing json key: "+n[1]:"missing json key: filters"));c.filter=rR('"use strict";\nreturn '+a+";",{});g.doChanges(c)})}}function o2(g){return g.reduce(function(c,h){c[h]=!0;return c},{})}function p2(g){if(!/^\d+-/.test(g))return vi(q2);var c=g.indexOf("-"),h=g.substring(0,c);g=g.substring(c+1);return{prefix:parseInt(h,10),
id:g}}function r2(g,c,h){h||(h={deterministic_revs:!0});var f={status:"available"};g._deleted&&(f.deleted=!0);if(c){g._id||(g._id=JI());var m=$1(g,h.deterministic_revs);if(g._rev){c=p2(g._rev);if(c.error)return c;g._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[m,f,[]]]]}];var n=c.prefix+1}else g._rev_tree=[{pos:1,ids:[m,f,[]]}],n=1}else{if(g._revisions){m=g._revisions;n=m.start-m.ids.length+1;m=m.ids;c=[m[0],f,[]];h=1;for(var a=m.length;h<a;h++)c=[m[h],{status:"missing"},[c]];g._rev_tree=
[{pos:n,ids:c}];n=g._revisions.start;m=g._revisions.ids[0]}if(!g._rev_tree){c=p2(g._rev);if(c.error)return c;n=c.prefix;m=c.id;g._rev_tree=[{pos:n,ids:[m,f,[]]}]}}T1(g._id);g._rev=n+"-"+m;f={metadata:{},data:{}};for(var d in g)if(Object.prototype.hasOwnProperty.call(g,d)){if((n="_"===d[0])&&!eia[d])throw g=vi(s2,d),g.message=s2.message+": "+d,g;n&&!fia[d]?f.metadata[d.slice(1)]=g[d]:f.data[d]=g[d]}return f}function gia(g,c,h){try{var f=atob(g.data)}catch(m){f={error:vi(t2,"Attachment is not a valid base64 string")}}if(f.error)return h(f.error);
g.length=f.length;g.data="blob"===c?tR(f,g.content_type):"base64"===c?btoa(f):f;wR(f,function(m){g.digest="md5-"+m;h()})}function hia(g,c,h){wR(g.data,function(f){g.digest="md5-"+f;g.length=g.data.size||g.data.length||0;"binary"===c?Z1(g.data,function(m){g.data=m;h()}):"base64"===c?vR(g.data,function(m){g.data=m;h()}):h()})}function iia(g,c,h){if(g.stub)return h();"string"===typeof g.data?gia(g,c,h):hia(g,c,h)}function jia(g,c,h){function f(){m++;g.length===m&&(n?h(n):h())}if(!g.length)return h();
var m=0,n;g.forEach(function(a){function d(l){n=l;b++;b===k.length&&f()}var k=a.data&&a.data._attachments?Object.keys(a.data._attachments):[],b=0;if(!k.length)return f();for(var e in a.data._attachments)a.data._attachments.hasOwnProperty(e)&&iia(a.data._attachments[e],c,d)})}function kia(g,c,h,f,m,n,a,d,k){g=g||1E3;var b=d.new_edits,e=new wo,l=0,p=c.length;c.forEach(function(u,x){if(u._id&&ww(u._id))h[u._deleted?"_removeLocal":"_putLocal"](u,{ctx:m},function(E,G){n[x]=E||G;++l===p&&k&&k()});else{var z=
u.metadata.id;e.has(z)?(p--,e.get(z).push([u,x])):e.set(z,[[u,x]])}});e.forEach(function(u,x){function z(){++G<u.length?E():++l===p&&k&&k()}function E(){var J=u[G],K=J[0];J=J[1];if(f.has(x)){var T=g,P=f.get(x);b:{var da=K.metadata.rev;var fa=P.rev_tree.slice();var ka=da.split("-");da=parseInt(ka[0],10);ka=ka[1];for(var za;za=fa.pop();){if(za.pos===da&&za.ids[0]===ka){fa=!0;break b}for(var Ia=za.ids[2],N=0,ia=Ia.length;N<ia;N++)fa.push({pos:za.pos+1,ids:Ia[N]})}fa=!1}fa&&!b?(n[J]=K,z()):(ka=P.winningRev||
uw(P),fa="deleted"in P?P.deleted:ys(P,ka),da="deleted"in K.metadata?K.metadata.deleted:ys(K.metadata),za=/^1-/.test(K.metadata.rev),fa&&!da&&b&&za&&(za=K.data,za._rev=ka,za._id=K.metadata.id,K=r2(za,b)),ka=f2(P.rev_tree,K.metadata.rev_tree[0],T),b&&(fa&&da&&"new_leaf"!==ka.conflicts||!fa&&"new_leaf"!==ka.conflicts||fa&&!da&&"new_branch"===ka.conflicts)?(K=vi(Nz),n[J]=K,z()):(T=K.metadata.rev,K.metadata.rev_tree=ka.tree,K.stemmedRevs=ka.stemmedRevs||[],P.rev_map&&(K.metadata.rev_map=P.rev_map),P=uw(K.metadata),
da=ys(K.metadata,P),fa=fa===da?0:fa<da?-1:1,T=T===P?da:ys(K.metadata,T),a(K,P,da,T,!0,fa,J,z)))}else P=f2([],K.metadata.rev_tree[0],g),K.metadata.rev_tree=P.tree,K.stemmedRevs=P.stemmedRevs||[],P=uw(K.metadata),T=ys(K.metadata,P),"was_delete"in d&&T?(n[J]=vi(aq,"deleted"),z()):b&&"missing"===K.metadata.rev_tree[0].ids[1].status?(K=vi(Nz),n[J]=K,z()):a(K,P,T,T,!1,T?0:1,J,z)}var G=0;E()})}function ir(g){return function(c){var h="unknown_error";c.target&&c.target.error&&(h=c.target.error.name||c.target.error.message);
g(vi(CR,h,c.type))}}function DR(g,c,h){try{var f=JSON.stringify(g)}catch(m){f=u2.stringify(g)}return{data:f,winningRev:c,deletedOrLocal:h?"1":"0",seq:g.seq,id:g.id}}function zw(g){if(!g)return null;var c=g.data;try{var h=JSON.parse(c)}catch(f){h=u2.parse(c)}h.winningRev=g.winningRev;h.deleted="1"===g.deletedOrLocal;h.seq=g.seq;return h}function KI(g){if(!g)return g;var c=g._doc_id_rev.lastIndexOf(":");g._id=g._doc_id_rev.substring(0,c-1);g._rev=g._doc_id_rev.substring(c+1);delete g._doc_id_rev;return g}
function v2(g,c,h,f){h?g?"string"!==typeof g?f(g):f(uR(g,c)):f(sR([""],{type:c})):g?"string"!==typeof g?Y1(g,function(m){f(btoa(m))}):f(g):f("")}function w2(g,c,h,f){function m(d,k){var b=d._attachments[k];d=b.digest;h.objectStore("attach-store").get(d).onsuccess=function(e){b.body=e.target.result.body;++a===n.length&&f&&f()}}var n=Object.keys(g._attachments||{});if(!n.length)return f&&f();var a=0;n.forEach(function(d){c.attachments&&c.include_docs?m(g,d):(g._attachments[d].stub=!0,++a===n.length&&
f&&f())})}function ER(g,c){return Promise.all(g.map(function(h){if(h.doc&&h.doc._attachments){var f=Object.keys(h.doc._attachments);return Promise.all(f.map(function(m){var n=h.doc._attachments[m];if("body"in n){var a=n.body,d=n.content_type;return new Promise(function(k){v2(a,d,c,function(b){h.doc._attachments[m]=Oz(ZC(n,["digest","content_type"]),{data:b});k()})})}}))}}))}function x2(g,c,h){function f(){m.length&&m.forEach(function(b){d.index("digestSeq").count(IDBKeyRange.bound(b+"::",b+"::\uffff",
!1,!1)).onsuccess=function(e){e.target.result||a.delete(b)}})}var m=[],n=h.objectStore("by-sequence"),a=h.objectStore("attach-store"),d=h.objectStore("attach-seq-store"),k=g.length;g.forEach(function(b){n.index("_doc_id_rev").getKey(c+"::"+b).onsuccess=function(e){e=e.target.result;"number"!==typeof e?(k--,k||f()):(n.delete(e),d.index("seq").openCursor(IDBKeyRange.only(e)).onsuccess=function(l){if(l=l.target.result){var p=l.value.digestSeq.split("::")[0];m.push(p);d.delete(l.primaryKey);l.continue()}else k--,
k||f()})}})}function bq(g,c,h){try{return{txn:g.transaction(c,h)}}catch(f){return{error:f}}}function lia(g,c,h,f,m,n){function a(){var ob=bq(m,"document-store by-sequence attach-store local-store attach-seq-store meta-store".split(" "),"readwrite");if(ob.error)return n(ob.error);T=ob.txn;T.onabort=ir(n);T.ontimeout=ir(n);T.oncomplete=l;P=T.objectStore("document-store");da=T.objectStore("by-sequence");fa=T.objectStore("attach-store");ka=T.objectStore("attach-seq-store");za=T.objectStore("meta-store");
za.get("meta-store").onsuccess=function(Ea){N=Ea.target.result;b()};u(function(Ea){if(Ea)return ib=!0,n(Ea);e()})}function d(){ca=!0;b()}function k(){kia(g.revs_limit,K,f,Aa,T,la,x,h,d)}function b(){N&&ca&&(N.docCount+=sa,za.put(N))}function e(){function ob(Qb){(Qb=zw(Qb.target.result))&&Aa.set(Qb.id,Qb);++Ea===K.length&&k()}if(K.length)for(var Ea=0,ua=0,ya=K.length;ua<ya;ua++){var Sa=K[ua];Sa._id&&ww(Sa._id)?++Ea===K.length&&k():P.get(Sa.metadata.id).onsuccess=ob}}function l(){ib||(eD.notify(f._meta.name),
n(null,la))}function p(ob,Ea){fa.get(ob).onsuccess=function(ua){ua.target.result?Ea():(ua=vi(mia,"unknown stub attachment with digest "+ob),ua.status=412,Ea(ua))}}function u(ob){var Ea=[];K.forEach(function(Sa){Sa.data&&Sa.data._attachments&&Object.keys(Sa.data._attachments).forEach(function(Qb){Qb=Sa.data._attachments[Qb];Qb.stub&&Ea.push(Qb.digest)})});if(!Ea.length)return ob();var ua=0,ya;Ea.forEach(function(Sa){p(Sa,function(Qb){Qb&&!ya&&(ya=Qb);++ua===Ea.length&&ob(ya)})})}function x(ob,Ea,ua,
ya,Sa,Qb,mc,Yb){ob.metadata.winningRev=Ea;ob.metadata.deleted=ua;var fc=ob.data;fc._id=ob.metadata.id;fc._rev=ob.metadata.rev;ya&&(fc._deleted=!0);if(fc._attachments&&Object.keys(fc._attachments).length)return E(ob,Ea,ua,Sa,mc,Yb);sa+=Qb;b();z(ob,Ea,ua,Sa,mc,Yb)}function z(ob,Ea,ua,ya,Sa,Qb){function mc(ld){var Od=ob.stemmedRevs||[];ya&&f.auto_compaction&&(Od=Od.concat(Gha(ob.metadata)));Od&&Od.length&&x2(Od,ob.metadata.id,T);Jc.seq=ld.target.result;ld=DR(Jc,Ea,ua);P.put(ld).onsuccess=Yb}function Yb(){la[Sa]=
{ok:!0,id:Jc.id,rev:Jc.rev};Aa.set(ob.metadata.id,ob.metadata);G(ob,Jc.seq,Qb)}var fc=ob.data,Jc=ob.metadata;fc._doc_id_rev=Jc.id+"::"+Jc.rev;delete fc._id;delete fc._rev;var Nb=da.put(fc);Nb.onsuccess=mc;Nb.onerror=function(ld){ld.preventDefault();ld.stopPropagation();da.index("_doc_id_rev").getKey(fc._doc_id_rev).onsuccess=function(Od){da.put(fc,Od.target.result).onsuccess=mc}}}function E(ob,Ea,ua,ya,Sa,Qb){function mc(){fc===Jc.length&&z(ob,Ea,ua,ya,Sa,Qb)}function Yb(){fc++;mc()}var fc=0,Jc=Object.keys(ob.data._attachments);
Jc.forEach(function(Nb){Nb=ob.data._attachments[Nb];if(Nb.stub)fc++,mc();else{var ld=Nb.data;delete Nb.data;Nb.revpos=parseInt(Ea,10);J(Nb.digest,ld,Yb)}})}function G(ob,Ea,ua){function ya(){++Qb===mc.length&&ua()}function Sa(fc){fc=ka.put({seq:Ea,digestSeq:ob.data._attachments[fc].digest+"::"+Ea});fc.onsuccess=ya;fc.onerror=function(Jc){Jc.preventDefault();Jc.stopPropagation();ya()}}var Qb=0,mc=Object.keys(ob.data._attachments||{});if(!mc.length)return ua();for(var Yb=0;Yb<mc.length;Yb++)Sa(mc[Yb])}
function J(ob,Ea,ua){fa.count(ob).onsuccess=function(ya){if(ya.target.result)return ua();fa.put({digest:ob,body:Ea}).onsuccess=ua}}var K=c.docs,T,P,da,fa,ka,za,Ia,N;c=0;for(var ia=K.length;c<ia;c++){var W=K[c];W._id&&ww(W._id)||(W=K[c]=r2(W,h.new_edits,g),W.error&&!Ia&&(Ia=W))}if(Ia)return n(Ia);var ca=!1,sa=0,la=Array(K.length),Aa=new wo,ib=!1;jia(K,f._meta.blobSupport?"blob":"base64",function(ob){if(ob)return n(ob);a()})}function y2(g,c,h,f,m){function n(p){e=p.target.result;b&&m(b,e,l)}function a(p){b=
p.target.result;e&&m(b,e,l)}function d(){if(!b.length)return m();var p=b[b.length-1];if(c&&c.upper)try{var u=IDBKeyRange.bound(p,c.upper,!0,c.upperOpen)}catch(x){if("DataError"===x.name&&0===x.code)return m()}else u=IDBKeyRange.lowerBound(p,!0);c=u;e=b=null;g.getAll(c,f).onsuccess=n;g.getAllKeys(c,f).onsuccess=a}function k(p){p=p.target.result;if(!p)return m();m([p.key],[p.value],p)}-1===f&&(f=1E3);var b,e;if("function"===typeof g.getAll&&"function"===typeof g.getAllKeys&&1<f&&!h){var l={"continue":d};
g.getAll(c,f).onsuccess=n;g.getAllKeys(c,f).onsuccess=a}else h?g.openCursor(c,"prev").onsuccess=k:g.openCursor(c).onsuccess=k}function nia(g,c,h){if("function"===typeof g.getAll)g.getAll(c).onsuccess=h;else{var f=[];g.openCursor(c).onsuccess=function(m){(m=m.target.result)?(f.push(m.value),m.continue()):h({target:{result:f}})}}}function oia(g,c,h){var f=Array(g.length),m=0;g.forEach(function(n,a){c.get(n).onsuccess=function(d){f[a]=d.target.result?d.target.result:{key:n,error:"not_found"};m++;m===
g.length&&h(g,f,{})}})}function pia(g,c,h,f,m){try{if(g&&c)return m?IDBKeyRange.bound(c,g,!h,!1):IDBKeyRange.bound(g,c,!1,!h);if(g)return m?IDBKeyRange.upperBound(g):IDBKeyRange.lowerBound(g);if(c)return m?IDBKeyRange.lowerBound(c,!h):IDBKeyRange.upperBound(c,!h);if(f)return IDBKeyRange.only(f)}catch(n){return{error:n}}return null}function qia(g,c,h){function f(fa,ka){fa.openCursor(null,"prev").onsuccess=function(za){za=za.target.result;var Ia=void 0;za&&za.key&&(Ia=za.key);return ka({target:{result:[Ia]}})}}
function m(fa,ka,za){K.get(fa.id+"::"+za).onsuccess=function(Ia){ka.doc=KI(Ia.target.result)||{};g.conflicts&&(Ia=yR(fa),Ia.length&&(ka.doc._conflicts=Ia));w2(ka.doc,g,J)}}function n(fa){for(var ka=0,za=fa.length;ka<za&&T.length!==x;ka++){var Ia=fa[ka];if(Ia.error&&p)T.push(Ia);else{var N=zw(Ia);Ia=N.winningRev;var ia={id:N.id,key:N.id,value:{rev:Ia}};N.deleted?p&&(T.push(ia),ia.value.deleted=!0,ia.doc=null):0>=u--&&(T.push(ia),g.include_docs&&m(N,ia,Ia))}}}function a(fa,ka,za){za&&(n(ka),T.length<
x&&za.continue())}function d(fa){fa=fa.target.result;g.descending&&(fa=fa.reverse());n(fa)}function k(){var fa={total_rows:P,offset:g.skip,rows:T};g.update_seq&&void 0!==da&&(fa.update_seq=da);h(null,fa)}var b="startkey"in g?g.startkey:!1,e="endkey"in g?g.endkey:!1,l="key"in g?g.key:!1,p="keys"in g?g.keys:!1,u=g.skip||0,x="number"===typeof g.limit?g.limit:-1,z=!1!==g.inclusive_end,E,G;if(!p&&(G=(E=pia(b,e,z,l,g.descending))&&E.error)&&("DataError"!==G.name||0!==G.code))return h(vi(CR,G.name,G.message));
b=["document-store","by-sequence","meta-store"];g.attachments&&b.push("attach-store");c=bq(c,b,"readonly");if(c.error)return h(c.error);var J=c.txn;J.oncomplete=function(){g.attachments?ER(T,g.binary).then(k):k()};J.onabort=ir(h);c=J.objectStore("document-store");b=J.objectStore("by-sequence");e=J.objectStore("meta-store");var K=b.index("_doc_id_rev"),T=[],P,da;e.get("meta-store").onsuccess=function(fa){P=fa.target.result.docCount};g.update_seq&&f(b,function(fa){fa.target.result&&0<fa.target.result.length&&
(da=fa.target.result[0])});if(!G&&0!==x){if(p)return oia(g.keys,c,a);if(-1===x)return nia(c,E,d);y2(c,E,g.descending,x+u,a)}}function ria(g){return(new Promise(function(c){var h=sR([""]);h=g.objectStore("detect-blob-support").put(h,"key");h.onsuccess=function(){var f=navigator.userAgent.match(/Chrome\/(\d+)/),m=navigator.userAgent.match(/Edge\//);c(m||!f||43<=parseInt(f[1],10))};h.onerror=g.onabort=function(f){f.preventDefault();f.stopPropagation();c(!1)}})).catch(function(){return!1})}function sia(g,
c){g.objectStore("document-store").index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(h){c(h.target.result)}}function tia(g,c,h,f){try{g(c,h)}catch(m){f.emit("error",m)}}function z2(){!FR&&GR.length&&(FR=!0,GR.shift()())}function uia(g,c,h){GR.push(function(){g(function(f,m){tia(c,f,m,h);FR=!1;hr(function(){z2()})})});z2()}function via(g,c,h,f){function m(J,K,T,P){if(T.seq!==K)return P();if(T.winningRev===J._rev)return P(T,J);G.get(J._id+"::"+T.winningRev).onsuccess=function(da){P(T,
KI(da.target.result))}}function n(J,K,T){if(k&&!k.has(J._id))return T();var P=x.get(J._id);if(P)return m(J,K,P,T);E.get(J._id).onsuccess=function(da){P=zw(da.target.result);x.set(J._id,P);m(J,K,P,T)}}function a(){g.complete(null,{results:l,last_seq:b})}g=Ml(g);if(g.continuous){var d=h+":"+JI();eD.addListener(h,d,c,g);eD.notify(h);return{cancel:function(){eD.removeListener(h,d)}}}var k=g.doc_ids&&new fD(g.doc_ids);g.since=g.since||0;var b=g.since,e="limit"in g?g.limit:-1;0===e&&(e=1);var l=[],p=0,
u=pR(g),x=new wo;c=["document-store","by-sequence"];g.attachments&&c.push("attach-store");f=bq(f,c,"readonly");if(f.error)return g.complete(f.error);var z=f.txn;z.onabort=ir(g.complete);z.oncomplete=function(){!g.continuous&&g.attachments?ER(l).then(a):a()};f=z.objectStore("by-sequence");var E=z.objectStore("document-store");var G=f.index("_doc_id_rev");c=g.since&&!g.descending?IDBKeyRange.lowerBound(g.since,!0):null;y2(f,c,g.descending,e,function(J,K,T){function P(Ia,N){var ia=g.processChange(N,
Ia,g);b=ia.seq=Ia.seq;Ia=u(ia);if("object"===typeof Ia)return Promise.reject(Ia);if(!Ia)return Promise.resolve();p++;g.return_docs&&l.push(ia);return g.attachments&&g.include_docs?new Promise(function(W){w2(N,g,z,function(){ER([ia],g.binary).then(function(){W(ia)})})}):Promise.resolve(ia)}function da(){for(var Ia=[],N=0,ia=fa.length;N<ia&&p!==e;N++){var W=fa[N];W&&Ia.push(P(ka[N],W))}Promise.all(Ia).then(function(ca){for(var sa=0,la=ca.length;sa<la;sa++)if(ca[sa])g.onChange(ca[sa])}).catch(g.complete);
p!==e&&T.continue()}if(T&&J.length){var fa=Array(J.length),ka=Array(J.length),za=0;K.forEach(function(Ia,N){Ia=KI(Ia);n(Ia,J[N],function(ia,W){ka[N]=ia;fa[N]=W;++za===J.length&&da()})})}})}function A2(g,c){var h=this;uia(function(f){wia(h,g,f)},c,h.constructor)}function wia(g,c,h){function f(p){var u=p.createObjectStore("document-store",{keyPath:"id"});p.createObjectStore("by-sequence",{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});p.createObjectStore("attach-store",{keyPath:"digest"});
p.createObjectStore("meta-store",{keyPath:"id",autoIncrement:!1});p.createObjectStore("detect-blob-support");u.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});p.createObjectStore("local-store",{keyPath:"_id"});p=p.createObjectStore("attach-seq-store",{autoIncrement:!0});p.createIndex("seq","seq");p.createIndex("digestSeq","digestSeq",{unique:!0})}function m(p,u){var x=p.objectStore("document-store");x.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});x.openCursor().onsuccess=function(z){if(z=
z.target.result){var E=z.value,G=ys(E);E.deletedOrLocal=G?"1":"0";x.put(E);z.continue()}else u()}}function n(p,u){var x=p.objectStore("local-store"),z=p.objectStore("document-store"),E=p.objectStore("by-sequence");z.openCursor().onsuccess=function(G){var J=G.target.result;if(J){var K=J.value;G=K.id;var T=ww(G);K=uw(K);if(T){var P=G+"::"+K;T=G+"::";K=G+"::~";G=E.index("_doc_id_rev");T=IDBKeyRange.bound(T,K,!1,!1);var da=G.openCursor(T);da.onsuccess=function(fa){(da=fa.target.result)?(fa=da.value,fa._doc_id_rev===
P&&x.put(fa),E.delete(da.primaryKey),da.continue()):(z.delete(J.primaryKey),J.continue())}}else J.continue()}else u&&u()}}function a(p){p=p.createObjectStore("attach-seq-store",{autoIncrement:!0});p.createIndex("seq","seq");p.createIndex("digestSeq","digestSeq",{unique:!0})}function d(p,u){var x=p.objectStore("by-sequence"),z=p.objectStore("attach-store"),E=p.objectStore("attach-seq-store");z.count().onsuccess=function(G){if(!G.target.result)return u();x.openCursor().onsuccess=function(J){J=J.target.result;
if(!J)return u();for(var K=J.value,T=J.primaryKey,P=Object.keys(K._attachments||{}),da={},fa=0;fa<P.length;fa++)da[K._attachments[P[fa]].digest]=!0;K=Object.keys(da);for(fa=0;fa<K.length;fa++)E.put({seq:T,digestSeq:K[fa]+"::"+T});J.continue()}}}function k(p){function u(E){return E.data?zw(E):(E.deleted="1"===E.deletedOrLocal,E)}var x=p.objectStore("by-sequence"),z=p.objectStore("document-store");z.openCursor().onsuccess=function(E){function G(){var T=DR(K,K.winningRev,K.deleted);z.put(T).onsuccess=
function(){J.continue()}}var J=E.target.result;if(J){var K=u(J.value);K.winningRev=K.winningRev||uw(K);if(K.seq)return G();(function(){var T=K.id+"::",P=K.id+"::\uffff",da=0;x.index("_doc_id_rev").openCursor(IDBKeyRange.bound(T,P)).onsuccess=function(fa){fa=fa.target.result;if(!fa)return K.seq=da,G();var ka=fa.primaryKey;ka>da&&(da=ka);fa.continue()}})()}}}var b=c.name,e=null;g._meta=null;g._remote=!1;g.type=function(){return"idb"};g._id=P1(function(p){p(null,g._meta.instanceId)});g._bulkDocs=function(p,
u,x){lia(c,p,u,g,e,x)};g._get=function(p,u,x){function z(){x(J,{doc:E,metadata:G,ctx:K})}var E,G,J,K=u.ctx;if(!K){var T=bq(e,["document-store","by-sequence","attach-store"],"readonly");if(T.error)return x(T.error);K=T.txn}K.objectStore("document-store").get(p).onsuccess=function(P){G=zw(P.target.result);if(!G)return J=vi(aq,"missing"),z();if(u.rev)var da=u.latest?Lha(u.rev,G):u.rev;else if(da=G.winningRev,ys(G))return J=vi(aq,"deleted"),z();P=K.objectStore("by-sequence");da=G.id+"::"+da;P.index("_doc_id_rev").get(da).onsuccess=
function(fa){(E=fa.target.result)&&(E=KI(E));if(!E)return J=vi(aq,"missing"),z();z()}}};g._getAttachment=function(p,u,x,z,E){if(z.ctx)p=z.ctx;else{p=bq(e,["document-store","by-sequence","attach-store"],"readonly");if(p.error)return E(p.error);p=p.txn}u=x.digest;var G=x.content_type;p.objectStore("attach-store").get(u).onsuccess=function(J){v2(J.target.result.body,G,z.binary,function(K){E(null,K)})}};g._info=function(p){var u,x,z=bq(e,["meta-store","by-sequence"],"readonly");if(z.error)return p(z.error);
z=z.txn;z.objectStore("meta-store").get("meta-store").onsuccess=function(E){x=E.target.result.docCount};z.objectStore("by-sequence").openCursor(null,"prev").onsuccess=function(E){u=(E=E.target.result)?E.key:0};z.oncomplete=function(){p(null,{doc_count:x,update_seq:u,idb_attachment_format:g._meta.blobSupport?"binary":"base64"})}};g._allDocs=function(p,u){qia(p,e,u)};g._changes=function(p){return via(p,g,b,e)};g._close=function(p){e.close();Pz.delete(b);p()};g._getRevisionTree=function(p,u){var x=bq(e,
["document-store"],"readonly");if(x.error)return u(x.error);x.txn.objectStore("document-store").get(p).onsuccess=function(z){(z=zw(z.target.result))?u(null,z.rev_tree):u(vi(aq))}};g._doCompaction=function(p,u,x){var z=bq(e,["document-store","by-sequence","attach-store","attach-seq-store"],"readwrite");if(z.error)return x(z.error);var E=z.txn;E.objectStore("document-store").get(p).onsuccess=function(G){G=zw(G.target.result);vw(G.rev_tree,function(T,P,da,fa,ka){-1!==u.indexOf(P+"-"+da)&&(ka.status=
"missing")});x2(u,p,E);var J=G.winningRev,K=G.deleted;E.objectStore("document-store").put(DR(G,J,K))};E.onabort=ir(x);E.oncomplete=function(){x()}};g._getLocal=function(p,u){var x=bq(e,["local-store"],"readonly");if(x.error)return u(x.error);p=x.txn.objectStore("local-store").get(p);p.onerror=ir(u);p.onsuccess=function(z){(z=z.target.result)?(delete z._doc_id_rev,u(null,z)):u(vi(aq))}};g._putLocal=function(p,u,x){"function"===typeof u&&(x=u,u={});delete p._revisions;var z=p._rev,E=p._id;p._rev=z?
"0-"+(parseInt(z.split("-")[1],10)+1):"0-1";var G=u.ctx,J;if(!G){G=bq(e,["local-store"],"readwrite");if(G.error)return x(G.error);G=G.txn;G.onerror=ir(x);G.oncomplete=function(){J&&x(null,J)}}var K=G.objectStore("local-store");z?(E=K.get(E),E.onsuccess=function(T){(T=T.target.result)&&T._rev===z?K.put(p).onsuccess=function(){J={ok:!0,id:p._id,rev:p._rev};u.ctx&&x(null,J)}:x(vi(Nz))}):(E=K.add(p),E.onerror=function(T){x(vi(Nz));T.preventDefault();T.stopPropagation()},E.onsuccess=function(){J={ok:!0,
id:p._id,rev:p._rev};u.ctx&&x(null,J)})};g._removeLocal=function(p,u,x){"function"===typeof u&&(x=u,u={});var z=u.ctx;if(!z){z=bq(e,["local-store"],"readwrite");if(z.error)return x(z.error);z=z.txn;z.oncomplete=function(){E&&x(null,E)}}var E,G=p._id,J=z.objectStore("local-store");z=J.get(G);z.onerror=ir(x);z.onsuccess=function(K){(K=K.target.result)&&K._rev===p._rev?(J.delete(G),E={ok:!0,id:G,rev:"0-0"},u.ctx&&x(null,E)):x(vi(aq))}};g._destroy=function(p,u){eD.removeAllListeners(b);(p=HR.get(b))&&
p.result&&(p.result.close(),Pz.delete(b));p=indexedDB.deleteDatabase(b);p.onsuccess=function(){HR.delete(b);$C&&b in localStorage&&delete localStorage[b];u(null,{ok:!0})};p.onerror=ir(u)};var l=Pz.get(b);if(l)return e=l.idb,g._meta=l.global,hr(function(){h(null,g)});l=indexedDB.open(b,5);HR.set(b,l);l.onupgradeneeded=function(p){function u(){var J=E[G-1];G++;J&&J(z,u)}var x=p.target.result;if(1>p.oldVersion)return f(x);var z=p.currentTarget.transaction;3>p.oldVersion&&x.createObjectStore("local-store",
{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});4>p.oldVersion&&a(x);var E=[m,n,d,k],G=p.oldVersion;u()};l.onsuccess=function(p){function u(){"undefined"!==typeof K&&E&&(g._meta={name:b,instanceId:T,blobSupport:K},Pz.set(b,{idb:e,global:g._meta}),h(null,g))}function x(){if("undefined"!==typeof J&&"undefined"!==typeof G){var P=b+"_id";P in G?T=G[P]:G[P]=T=JI();G.docCount=J;z.objectStore("meta-store").put(G)}}e=p.target.result;e.onversionchange=function(){e.close();Pz.delete(b)};
e.onabort=function(P){ep("error","Database has a global failure",P.target.error);e.close();Pz.delete(b)};var z=e.transaction(["meta-store","detect-blob-support","document-store"],"readwrite"),E=!1,G,J,K,T;z.objectStore("meta-store").get("meta-store").onsuccess=function(P){G=P.target.result||{id:"meta-store"};x()};sia(z,function(P){J=P;x()});IR||(IR=ria(z));IR.then(function(P){K=P;u()});z.oncomplete=function(){E=!0;u()};z.onabort=ir(h)};l.onerror=function(p){(p=p.target.error&&p.target.error.message)?
-1!==p.indexOf("stored database is a higher version")&&(p=Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):p="Failed to open indexedDB, are you in private browsing mode?";ep("error",p);h(vi(CR,p))}}function xia(g,c){return new Promise(function(h,f){function m(){k++;g[b++]().then(a,d)}function n(){if(++e===l)p?f(p):h();else for(;k<c&&b<l;)m()}function a(){k--;n()}function d(u){k--;p=p||u;n()}for(var k=0,b=0,e=0,l=g.length,
p;k<c&&b<l;)m()})}function JR(g){var c=(g=g.doc||g.ok)&&g._attachments;c&&Object.keys(c).forEach(function(h){h=c[h];h.data=uR(h.data,h.content_type)})}function Aw(g){return/^_design/.test(g)?"_design/"+encodeURIComponent(g.slice(8)):/^_local/.test(g)?"_local/"+encodeURIComponent(g.slice(7)):encodeURIComponent(g)}function B2(g){return g._attachments&&Object.keys(g._attachments)?Promise.all(Object.keys(g._attachments).map(function(c){var h=g._attachments[c];if(h.data&&"string"!==typeof h.data)return(new Promise(function(f){vR(h.data,
f)})).then(function(f){h.data=f})})):Promise.resolve()}function yia(g,c){if(c.prefix){var h=W1(c.prefix).protocol;h="http"===h||"https"===h}else h=!1;h&&(g=c.name.substr(c.prefix.length),g=c.prefix.replace(/\/?$/,"/")+encodeURIComponent(g));c=W1(g);if(c.user||c.password)c.auth={username:c.user,password:c.password};g=c.path.replace(/(^\/|\/$)/g,"").split("/");c.db=g.pop();-1===c.db.indexOf("%")&&(c.db=encodeURIComponent(c.db));c.path=g.join("/");return c}function Nl(g,c){return LI(g,g.db+"/"+c)}function LI(g,
c){return g.protocol+"://"+g.host+(g.port?":"+g.port:"")+"/"+g.path+(g.path?"/":"")+c}function MI(g){return"?"+Object.keys(g).map(function(c){return c+"="+encodeURIComponent(g[c])}).join("&")}function zia(g){var c="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",h=-1!==c.indexOf("msie"),f=-1!==c.indexOf("trident");c=-1!==c.indexOf("edge");g=!("method"in g)||"GET"===g.method;return(h||f||c)&&g}function KR(g,c){function h(l,p){return tl(l,Jz(function(u){m().then(function(){return p.apply(this,
u)}).catch(function(x){u.pop()(x)})})).bind(a)}function f(l,p,u){var x={};p=p||{};p.headers=p.headers||new Qz;p.headers.get("Content-Type")||p.headers.set("Content-Type","application/json");p.headers.get("Accept")||p.headers.set("Accept","application/json");return b(l,p).then(function(z){x.ok=z.ok;x.status=z.status;return z.json()}).then(function(z){x.data=z;if(!x.ok){x.data.status=x.status;z=Lz(x.data);if(u)return u(z);throw z;}Array.isArray(x.data)&&(x.data=x.data.map(function(E){return E.error||
E.missing?Lz(E):E}));if(u)u(null,x.data);else return x})}function m(){if(g.skip_setup)return Promise.resolve();if(e)return e;e=f(k).catch(function(l){return l&&l.status&&404===l.status?(oR(404,"PouchDB is just detecting if the remote exists."),f(k,{method:"PUT"})):Promise.reject(l)}).catch(function(l){return l&&l.status&&412===l.status?!0:Promise.reject(l)});e.catch(function(){e=null});return e}function n(l){return l.split("/").map(encodeURIComponent).join("/")}var a=this,d=yia(g.name,g),k=Nl(d,"");
g=Ml(g);var b=function(l,p){p=p||{};p.headers=p.headers||new Qz;p.credentials="include";if(g.auth||d.auth){var u=g.auth||d.auth;u=btoa(unescape(encodeURIComponent(u.username+":"+u.password)));p.headers.set("Authorization","Basic "+u)}var x=g.headers||{};Object.keys(x).forEach(function(z){p.headers.append(z,x[z])});zia(p)&&(l+=(-1===l.indexOf("?")?"?":"&")+"_nonce="+Date.now());return(g.fetch||C2)(l,p)},e;hr(function(){c(null,a)});a._remote=!0;a.type=function(){return"http"};a.id=h("id",function(l){b(LI(d,
"")).then(function(p){return p.json()}).catch(function(){return{}}).then(function(p){p=p&&p.uuid?p.uuid+d.db:Nl(d,"");l(null,p)})});a.compact=h("compact",function(l,p){"function"===typeof l&&(p=l,l={});l=Ml(l);f(Nl(d,"_compact"),{method:"POST"}).then(function(){function u(){a.info(function(x,z){z&&!z.compact_running?p(null,{ok:!0}):setTimeout(u,l.interval||200)})}u()})});a.bulkGet=tl("bulkGet",function(l,p){function u(J){var K={};l.revs&&(K.revs=!0);l.attachments&&(K.attachments=!0);l.latest&&(K.latest=
!0);f(Nl(d,"_bulk_get"+MI(K)),{method:"POST",body:JSON.stringify({docs:l.docs})}).then(function(T){l.attachments&&l.binary&&T.data.results.forEach(function(P){P.docs.forEach(JR)});J(null,T.data)}).catch(J)}function x(){function J(ka){return function(za,Ia){P[ka]=Ia.results;++T===K&&p(null,{results:GI(P)})}}for(var K=Math.ceil(l.docs.length/50),T=0,P=Array(K),da=0;da<K;da++){var fa=ZC(l,["revs","attachments","binary","latest"]);fa.docs=l.docs.slice(50*da,Math.min(l.docs.length,50*(da+1)));R1(z,fa,
J(da))}}var z=this,E=LI(d,""),G=LR[E];"boolean"!==typeof G?u(function(J,K){J?(LR[E]=!1,oR(J.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),x()):(LR[E]=!0,p(null,K))}):G?u(p):x()});a._info=function(l){m().then(function(){return b(Nl(d,""))}).then(function(p){return p.json()}).then(function(p){p.host=Nl(d,"");l(null,p)}).catch(l)};a.fetch=function(l,p){return m().then(function(){var u="/"===l.substring(0,1)?LI(d,l.substring(1)):Nl(d,l);return b(u,p)})};a.get=h("get",function(l,
p,u){function x(G){function J(P){var da=K[P];P=Aw(G._id)+"/"+n(P)+"?rev="+G._rev;return b(Nl(d,P)).then(function(fa){return"buffer"in fa?fa.buffer():fa.blob()}).then(function(fa){if(p.binary){var ka=Object.getOwnPropertyDescriptor(fa.__proto__,"type");if(!ka||ka.set)fa.type=da.content_type;return fa}return new Promise(function(za){vR(fa,za)})}).then(function(fa){delete da.stub;delete da.length;da.data=fa})}var K=G._attachments,T=K&&Object.keys(K);if(K&&T.length)return T=T.map(function(P){return function(){return J(P)}}),
xia(T,5)}function z(G){return Array.isArray(G)?Promise.all(G.map(function(J){if(J.ok)return x(J.ok)})):x(G)}"function"===typeof p&&(u=p,p={});p=Ml(p);var E={};p.revs&&(E.revs=!0);p.revs_info&&(E.revs_info=!0);p.latest&&(E.latest=!0);p.open_revs&&("all"!==p.open_revs&&(p.open_revs=JSON.stringify(p.open_revs)),E.open_revs=p.open_revs);p.rev&&(E.rev=p.rev);p.conflicts&&(E.conflicts=p.conflicts);p.update_seq&&(E.update_seq=p.update_seq);l=Aw(l);E=Nl(d,l+MI(E));f(E).then(function(G){return Promise.resolve().then(function(){if(p.attachments)return z(G.data)}).then(function(){u(null,
G.data)})}).catch(function(G){G.docId=l;u(G)})});a.remove=h("remove",function(l,p,u,x){"string"===typeof p?(l={_id:l,_rev:p},"function"===typeof u&&(x=u,u={})):"function"===typeof p?(x=p,u={}):(x=u,u=p);p=l._rev||u.rev;p=Nl(d,Aw(l._id))+"?rev="+p;f(p,{method:"DELETE"},x).catch(x)});a.getAttachment=h("getAttachment",function(l,p,u,x){"function"===typeof u&&(x=u,u={});u=u.rev?"?rev="+u.rev:"";l=Nl(d,Aw(l))+"/"+n(p)+u;var z;b(l,{method:"GET"}).then(function(E){z=E.headers.get("content-type");if(E.ok)return"undefined"===
typeof NI||NI.browser||"function"!==typeof E.buffer?E.blob():E.buffer();throw E;}).then(function(E){"undefined"===typeof NI||NI.browser||(E.type=z);x(null,E)}).catch(function(E){x(E)})});a.removeAttachment=h("removeAttachment",function(l,p,u,x){l=Nl(d,Aw(l)+"/"+n(p))+"?rev="+u;f(l,{method:"DELETE"},x).catch(x)});a.putAttachment=h("putAttachment",function(l,p,u,x,z,E){"function"===typeof z&&(E=z,z=x,x=u,u=null);l=Aw(l)+"/"+n(p);l=Nl(d,l);u&&(l+="?rev="+u);if("string"===typeof x){try{var G=atob(x)}catch(J){return E(vi(t2,
"Attachment is not a valid base64 string"))}x=G?tR(G,z):""}f(l,{headers:new Qz({"Content-Type":z}),method:"PUT",body:x},E).catch(E)});a._bulkDocs=function(l,p,u){l.new_edits=p.new_edits;m().then(function(){return Promise.all(l.docs.map(B2))}).then(function(){return f(Nl(d,"_bulk_docs"),{method:"POST",body:JSON.stringify(l)},u)}).catch(u)};a._put=function(l,p,u){m().then(function(){return B2(l)}).then(function(){return f(Nl(d,Aw(l._id)),{method:"PUT",body:JSON.stringify(l)})}).then(function(x){u(null,
x.data)}).catch(function(x){x.docId=l&&l._id;u(x)})};a.allDocs=h("allDocs",function(l,p){"function"===typeof l&&(p=l,l={});l=Ml(l);var u={},x="GET";l.conflicts&&(u.conflicts=!0);l.update_seq&&(u.update_seq=!0);l.descending&&(u.descending=!0);l.include_docs&&(u.include_docs=!0);l.attachments&&(u.attachments=!0);l.key&&(u.key=JSON.stringify(l.key));l.start_key&&(l.startkey=l.start_key);l.startkey&&(u.startkey=JSON.stringify(l.startkey));l.end_key&&(l.endkey=l.end_key);l.endkey&&(u.endkey=JSON.stringify(l.endkey));
"undefined"!==typeof l.inclusive_end&&(u.inclusive_end=!!l.inclusive_end);"undefined"!==typeof l.limit&&(u.limit=l.limit);"undefined"!==typeof l.skip&&(u.skip=l.skip);u=MI(u);if("undefined"!==typeof l.keys){x="POST";var z={keys:l.keys}}f(Nl(d,"_all_docs"+u),{method:x,body:JSON.stringify(z)}).then(function(E){l.include_docs&&l.attachments&&l.binary&&E.data.rows.forEach(JR);p(null,E.data)}).catch(p)});a._changes=function(l){var p="batch_size"in l?l.batch_size:25;l=Ml(l);!l.continuous||"heartbeat"in
l||(l.heartbeat=1E4);var u="timeout"in l?l.timeout:3E4;"timeout"in l&&l.timeout&&5E3>u-l.timeout&&(u=l.timeout+5E3);"heartbeat"in l&&l.heartbeat&&5E3>u-l.heartbeat&&(u=l.heartbeat+5E3);var x={};"timeout"in l&&l.timeout&&(x.timeout=l.timeout);var z="undefined"!==typeof l.limit?l.limit:!1,E=z;l.style&&(x.style=l.style);if(l.include_docs||l.filter&&"function"===typeof l.filter)x.include_docs=!0;l.attachments&&(x.attachments=!0);l.continuous&&(x.feed="longpoll");l.seq_interval&&(x.seq_interval=l.seq_interval);
l.conflicts&&(x.conflicts=!0);l.descending&&(x.descending=!0);l.update_seq&&(x.update_seq=!0);"heartbeat"in l&&l.heartbeat&&(x.heartbeat=l.heartbeat);l.filter&&"string"===typeof l.filter&&(x.filter=l.filter);l.view&&"string"===typeof l.view&&(x.filter="_view",x.view=l.view);if(l.query_params&&"object"===typeof l.query_params)for(var G in l.query_params)l.query_params.hasOwnProperty(G)&&(x[G]=l.query_params[G]);var J="GET";if(l.doc_ids){x.filter="_doc_ids";J="POST";var K={doc_ids:l.doc_ids}}else l.selector&&
(x.filter="_selector",J="POST",K={selector:l.selector});var T=new Aia,P,da=function(za,Ia){if(!l.aborted){x.since=za;"object"===typeof x.since&&(x.since=JSON.stringify(x.since));l.descending?z&&(x.limit=E):x.limit=!z||E>p?p:E;var N=Nl(d,"_changes"+MI(x)),ia={signal:T.signal,method:J,body:JSON.stringify(K)};P=za;l.aborted||m().then(function(){return f(N,ia,Ia)}).catch(Ia)}},fa={results:[]},ka=function(za,Ia){if(!l.aborted){var N=0;if(Ia&&Ia.results){N=Ia.results.length;fa.last_seq=Ia.last_seq;var ia=
null,W=null;"number"===typeof Ia.pending&&(ia=Ia.pending);if("string"===typeof fa.last_seq||"number"===typeof fa.last_seq)W=fa.last_seq;Ia.results=Ia.results.filter(function(ca){E--;var sa=pR(l)(ca);sa&&(l.include_docs&&l.attachments&&l.binary&&JR(ca),l.return_docs&&fa.results.push(ca),l.onChange(ca,ia,W));return sa})}else if(za){l.aborted=!0;l.complete(za);return}Ia&&Ia.last_seq&&(P=Ia.last_seq);za=z&&0>=E||Ia&&N<p||l.descending;(!l.continuous||z&&0>=E)&&za?l.complete(null,fa):hr(function(){da(P,
ka)})}};da(l.since||0,ka);return{cancel:function(){l.aborted=!0;T.abort()}}};a.revsDiff=h("revsDiff",function(l,p,u){"function"===typeof p&&(u=p);f(Nl(d,"_revs_diff"),{method:"POST",body:JSON.stringify(l)},u).catch(u)});a._close=function(l){l()};a._destroy=function(l,p){f(Nl(d,""),{method:"DELETE"}).then(function(u){p(null,u)}).catch(function(u){404===u.status?p(null,{ok:!0}):p(u)})}}function Bw(g){this.status=400;this.name="query_parse_error";this.message=g;this.error=!0;try{Error.captureStackTrace(this,
Bw)}catch(c){}}function OI(g){this.status=404;this.name="not_found";this.message=g;this.error=!0;try{Error.captureStackTrace(this,OI)}catch(c){}}function PI(g){this.status=500;this.name="invalid_value";this.message=g;this.error=!0;try{Error.captureStackTrace(this,PI)}catch(c){}}function D2(g,c){c&&g.then(function(h){hr(function(){c(null,h)})},function(h){hr(function(){c(h)})});return g}function Bia(g){return Jz(function(c){var h=c.pop();c=g.apply(this,c);"function"===typeof h&&D2(c,h);return c})}
function Cia(g,c){return g.then(function(h){return c().then(function(){return h})},function(h){return c().then(function(){throw h;})})}function MR(g,c){return function(){var h=arguments,f=this;return g.add(function(){return c.apply(f,h)})}}function E2(g){g=new fD(g);var c=Array(g.size),h=-1;g.forEach(function(f){c[++h]=f});return c}function NR(g){var c=Array(g.size),h=-1;g.forEach(function(f,m){c[++h]=m});return c}function F2(g){return new PI("builtin "+g+" function requires map values to be numbers or number arrays")}
function OR(g){for(var c=0,h=0,f=g.length;h<f;h++){var m=g[h];if("number"!==typeof m)if(Array.isArray(m)){c="number"===typeof c?[c]:c;for(var n=0,a=m.length;n<a;n++){var d=m[n];if("number"!==typeof d)throw F2("_sum");"undefined"===typeof c[n]?c.push(d):c[n]+=d}}else throw F2("_sum");else"number"===typeof c?c+=m:c[0]+=m}return c}function G2(g,c){return rR("return ("+g.replace(/;\s*$/,"")+");",{emit:c,sum:OR,log:Dia,isArray:Eia,toJSON:Fia})}function gD(){this.promise=new Promise(function(g){g()})}function H2(g){if(!g)return"undefined";
switch(typeof g){case "function":return g.toString();case "string":return g.toString();default:return JSON.stringify(g)}}function Gia(g,c){return H2(g)+H2(c)+"undefined"}function I2(g,c,h,f,m,n){var a=Gia(h,f);if(!m){var d=g._cachedViews=g._cachedViews||{};if(d[a])return d[a]}var k=g.info().then(function(b){var e=b.db_name+"-mrview-"+(m?"temp":II.hash(a));return HI(g,"_local/"+n,function(l){l.views=l.views||{};var p=c;-1===p.indexOf("/")&&(p=c+"/"+c);p=l.views[p]=l.views[p]||{};if(!p[e])return p[e]=
!0,l}).then(function(){return g.registerDependentDatabase(e).then(function(l){l=l.db;l.auto_compaction=!0;var p={name:e,db:l,sourceDB:g,adapter:g.adapter,mapFun:h,reduceFun:f};return p.db.get("_local/lastSeq").catch(function(u){if(404!==u.status)throw u;}).then(function(u){p.seq=u?u.seq:0;if(d)p.db.once("destroyed",function(){delete d[a]});return p})})})});d&&(d[a]=k);return k}function PR(g){return-1===g.indexOf("/")?[g,g]:g.split("/")}function Hia(g){return 1===g.length&&/^1-/.test(g[0].rev)}function J2(g,
c){try{g.emit("error",c)}catch(h){ep("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),ep("error",c)}}function K2(g,c){var h=Object.keys(c._attachments);return Promise.all(h.map(function(f){return g.getAttachment(c._id,f,{rev:c._rev})}))}function Iia(g,c,h){var f=gr(c)&&!gr(g),m=Object.keys(h._attachments);return f?g.get(h._id).then(function(n){return Promise.all(m.map(function(a){return n._attachments&&
n._attachments[a]&&n._attachments[a].digest===h._attachments[a].digest?g.getAttachment(n._id,a):c.getAttachment(h._id,a)}))}).catch(function(n){if(404!==n.status)throw n;return K2(c,h)}):K2(c,h)}function Jia(g){var c=[];Object.keys(g).forEach(function(h){g[h].missing.forEach(function(f){c.push({id:h,rev:f})})});return{docs:c,revs:!0,latest:!0}}function Kia(g,c,h,f){function m(d){return g.allDocs({keys:d,include_docs:!0,conflicts:!0}).then(function(k){if(f.cancelled)throw Error("cancelled");k.rows.forEach(function(b){var e;
(e=b.deleted||!b.doc||!/^1-/.test(b.value.rev))||(e=b.doc,e=e._attachments&&0<Object.keys(e._attachments).length);e||(e=b.doc,e=e._conflicts&&0<e._conflicts.length);e||(b.doc._conflicts&&delete b.doc._conflicts,n.push(b.doc),delete h[b.id])})})}h=Ml(h);var n=[],a=!0;return Promise.resolve().then(function(){var d=Object.keys(h).filter(function(k){k=h[k].missing;return 1===k.length&&/^1-/.test(k[0])});if(0<d.length)return m(d)}).then(function(){var d=Jia(h);if(d.docs.length)return g.bulkGet(d).then(function(k){if(f.cancelled)throw Error("cancelled");
return Promise.all(k.results.map(function(b){return Promise.all(b.docs.map(function(e){var l=e.ok;e.error&&(a=!1);return l&&l._attachments?Iia(c,g,l).then(function(p){var u=Object.keys(l._attachments);p.forEach(function(x,z){z=l._attachments[u[z]];delete z.stub;delete z.length;z.data=x});return l}):l}))})).then(function(b){n=n.concat(GI(b).filter(Boolean))})})}).then(function(){return{ok:a,docs:n}})}function QR(g,c,h,f,m){return g.get(c).catch(function(n){if(404===n.status)return"http"!==g.adapter&&
"https"!==g.adapter||oR(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:f,_id:c,history:[],replicator:"pouchdb",version:1};throw n;}).then(function(n){if(!m.cancelled&&n.last_seq!==h)return n.history=(n.history||[]).filter(function(a){return a.session_id!==f}),n.history.unshift({last_seq:h,session_id:f}),n.history=n.history.slice(0,5),n.version=1,n.replicator="pouchdb",n.session_id=f,n.last_seq=h,g.put(n).catch(function(a){if(409===a.status)return QR(g,c,h,f,m);throw a;
})})}function hD(g,c,h,f,m){this.src=g;this.target=c;this.id=h;this.returnValue=f;this.opts=m||{}}function L2(g,c){var h=g[0],f=g.slice(1),m=c[0],n=c.slice(1);return h&&0!==c.length?RR(h.session_id,c)?{last_seq:h.last_seq,history:g}:RR(m.session_id,f)?{last_seq:m.last_seq,history:n}:L2(f,n):{last_seq:0,history:[]}}function RR(g,c){var h=c[0],f=c.slice(1);return g&&0!==c.length?g===h.session_id?!0:RR(g,f):!1}function M2(g){return"number"===typeof g.status&&4===Math.floor(g.status/100)}function Lia(g,
c,h,f){if(!1===g.retry)c.emit("error",h),c.removeAllListeners();else{"function"!==typeof g.back_off_function&&(g.back_off_function=uha);c.emit("requestError",h);if("active"===c.state||"pending"===c.state){c.emit("paused",h);c.state="stopped";var m=function(){g.current_back_off=0};c.once("paused",function(){c.removeListener("active",m)});c.once("active",m)}g.current_back_off=g.current_back_off||0;g.current_back_off=g.back_off_function(g.current_back_off);setTimeout(f,g.current_back_off)}}function Mia(g){return Object.keys(g).sort(im).reduce(function(c,
h){c[h]=g[h];return c},{})}function Nia(g,c,h){var f=h.doc_ids?h.doc_ids.sort(im):"",m=h.filter?h.filter.toString():"",n="",a="",d="";h.selector&&(d=JSON.stringify(h.selector));h.filter&&h.query_params&&(n=JSON.stringify(Mia(h.query_params)));h.filter&&"_view"===h.filter&&(a=h.view.toString());return Promise.all([g.id(),c.id()]).then(function(k){var b=k[0]+k[1]+m+a+n+f+d;return new Promise(function(e){wR(b,e)})}).then(function(k){k=k.replace(/\//g,".").replace(/\+/g,"_");return"_local/"+k})}function N2(g,
c,h,f,m){function n(){return ib?Promise.resolve():Nia(g,c,h).then(function(ya){Aa=ya;ib=new hD(g,c,Aa,f,!1===h.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===h.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===h.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0})})}function a(){ob=[];if(0!==P.docs.length){var ya=P.docs;return c.bulkDocs({docs:ya,new_edits:!1},{timeout:h.timeout}).then(function(Sa){if(f.cancelled)throw u(),
Error("cancelled");var Qb=Object.create(null);Sa.forEach(function(mc){mc.error&&(Qb[mc.id]=mc)});Sa=Object.keys(Qb).length;m.doc_write_failures+=Sa;m.docs_written+=ya.length-Sa;ya.forEach(function(mc){var Yb=Qb[mc._id];if(Yb)if(m.errors.push(Yb),mc=(Yb.name||"").toLowerCase(),"unauthorized"===mc||"forbidden"===mc)f.emit("denied",Ml(Yb));else throw Yb;else ob.push(mc)})},function(Sa){m.doc_write_failures+=ya.length;throw Sa;})}}function d(){if(P.error)throw Error("There was a problem getting docs.");
m.last_seq=Ia=P.seq;var ya=Ml(m);ob.length&&(ya.docs=ob,"number"===typeof P.pending&&(ya.pending=P.pending,delete P.pending),f.emit("change",ya));fa=!0;return ib.writeCheckpoint(P.seq,Ea).then(function(){fa=!1;if(f.cancelled)throw u(),Error("cancelled");P=void 0;G()}).catch(function(Sa){K(Sa);throw Sa;})}function k(){var ya={};P.changes.forEach(function(Sa){"_user/"!==Sa.id&&(ya[Sa.id]=Sa.changes.map(function(Qb){return Qb.rev}))});return c.revsDiff(ya).then(function(Sa){if(f.cancelled)throw u(),
Error("cancelled");P.diffs=Sa})}function b(){return Kia(g,c,P.diffs,f).then(function(ya){P.error=!ya.ok;ya.docs.forEach(function(Sa){delete P.diffs[Sa._id];m.docs_read++;P.docs.push(Sa)})})}function e(){f.cancelled||P||(0===T.length?l(!0):(P=T.shift(),k().then(b).then(a).then(d).then(e).catch(function(ya){p("batch processing terminated with error",ya)})))}function l(ya){if(0===da.changes.length){if(0===T.length&&!P){if(N&&ua.live||ka)f.state="pending",f.emit("paused");ka&&u()}}else if(ya||ka||da.changes.length>=
ia){T.push(da);da={seq:0,changes:[],docs:[]};if("pending"===f.state||"stopped"===f.state)f.state="active",f.emit("active");e()}}function p(ya,Sa){za||(Sa.message||(Sa.message=ya),m.ok=!1,m.status="aborting",T=[],da={seq:0,changes:[],docs:[]},u(Sa))}function u(ya){if(!za){if(f.cancelled&&(m.status="cancelled",fa))return;m.status=m.status||"complete";m.end_time=(new Date).toISOString();m.last_seq=Ia;za=!0;if(ya){ya=vi(ya);ya.result=m;var Sa=(ya.name||"").toLowerCase();"unauthorized"===Sa||"forbidden"===
Sa?(f.emit("error",ya),f.removeAllListeners()):Lia(h,f,ya,function(){N2(g,c,h,f)})}else f.emit("complete",m),f.removeAllListeners()}}function x(ya,Sa,Qb){if(f.cancelled)return u();"number"===typeof Sa&&(da.pending=Sa);pR(h)(ya)&&(da.seq=ya.seq||Qb,da.changes.push(ya),hr(function(){l(0===T.length&&ua.live)}))}function z(ya){ca=!1;if(f.cancelled)return u();if(0<ya.results.length)ua.since=ya.results[ya.results.length-1].seq,G(),l(!0);else{var Sa=function(){N?(ua.live=!0,G()):ka=!0;l(!0)};P||0!==ya.results.length?
Sa():(fa=!0,ib.writeCheckpoint(ya.last_seq,Ea).then(function(){fa=!1;m.last_seq=Ia=ya.last_seq;Sa()}).catch(K))}}function E(ya){ca=!1;if(f.cancelled)return u();p("changes rejected",ya)}function G(){function ya(){Qb.cancel()}function Sa(){f.removeListener("cancel",ya)}if(!ca&&!ka&&T.length<W){ca=!0;f._changes&&(f.removeListener("cancel",f._abortChanges),f._changes.cancel());f.once("cancel",ya);var Qb=g.changes(ua).on("change",x);Qb.then(Sa,Sa);Qb.then(z).catch(E);h.retry&&(f._changes=Qb,f._abortChanges=
ya)}}function J(){n().then(function(){if(f.cancelled)u();else return ib.getCheckpoint().then(function(ya){Ia=ya;ua={since:Ia,limit:ia,batch_size:ia,style:"all_docs",doc_ids:sa,selector:la,return_docs:!0};h.filter&&("string"!==typeof h.filter?ua.include_docs=!0:ua.filter=h.filter);"heartbeat"in h&&(ua.heartbeat=h.heartbeat);"timeout"in h&&(ua.timeout=h.timeout);h.query_params&&(ua.query_params=h.query_params);h.view&&(ua.view=h.view);G()})}).catch(function(ya){p("getCheckpoint rejected with ",ya)})}
function K(ya){fa=!1;p("writeCheckpoint completed with error",ya)}var T=[],P,da={seq:0,changes:[],docs:[]},fa=!1,ka=!1,za=!1,Ia=0,N=h.continuous||h.live||!1,ia=h.batch_size||100,W=h.batches_limit||10,ca=!1,sa=h.doc_ids,la=h.selector,Aa,ib,ob=[],Ea=JI();m=m||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var ua={};f.ready(g,c);f.cancelled?u():(f._addedListeners||(f.once("cancel",u),"function"===typeof h.complete&&(f.once("error",h.complete),f.once("complete",
function(ya){h.complete(null,ya)})),f._addedListeners=!0),"undefined"===typeof h.since?J():n().then(function(){fa=!0;return ib.writeCheckpoint(h.since,Ea)}).then(function(){fa=!1;f.cancelled?u():(Ia=h.since,J())}).catch(K))}function QI(){Wn.EventEmitter.call(this);this.cancelled=!1;this.state="pending";var g=this,c=new Promise(function(h,f){g.once("complete",h);g.once("error",f)});g.then=function(h,f){return c.then(h,f)};g.catch=function(h){return c.catch(h)};g.catch(function(){})}function RI(g,c){var h=
c.PouchConstructor;return"string"===typeof g?new h(g,c):g}function SR(g,c,h,f){"function"===typeof h&&(f=h,h={});"undefined"===typeof h&&(h={});if(h.doc_ids&&!Array.isArray(h.doc_ids))throw vi(FI,"`doc_ids` filter parameter is not a list.");h.complete=f;h=Ml(h);h.continuous=h.continuous||h.live;h.retry="retry"in h?h.retry:!1;h.PouchConstructor=h.PouchConstructor||this;f=new QI(h);g=RI(g,h);c=RI(c,h);N2(g,c,h,f);return f}function Oia(g,c,h,f){"function"===typeof h&&(f=h,h={});"undefined"===typeof h&&
(h={});h=Ml(h);h.PouchConstructor=h.PouchConstructor||this;g=RI(g,h);c=RI(c,h);return new TR(g,c,h,f)}function TR(g,c,h,f){function m(K){x.emit("change",{direction:"pull",change:K})}function n(K){x.emit("change",{direction:"push",change:K})}function a(K){x.emit("denied",{direction:"push",doc:K})}function d(K){x.emit("denied",{direction:"pull",doc:K})}function k(){x.pushPaused=!0;x.pullPaused&&x.emit("paused")}function b(){x.pullPaused=!0;x.pushPaused&&x.emit("paused")}function e(){x.pushPaused=!1;
x.pullPaused&&x.emit("active",{direction:"push"})}function l(){x.pullPaused=!1;x.pushPaused&&x.emit("active",{direction:"pull"})}function p(K){return function(T,P){var da="denied"===T&&(P===d||P===a),fa="paused"===T&&(P===b||P===k),ka="active"===T&&(P===l||P===e);if("change"===T&&(P===m||P===n)||da||fa||ka)T in G||(G[T]={}),G[T][K]=!0,2===Object.keys(G[T]).length&&x.removeAllListeners(T)}}function u(K,T,P){if(-1==K.listeners(T).indexOf(P))K.on(T,P)}var x=this;this.canceled=!1;var z=h.push?Oz({},h,
h.push):h,E=h.pull?Oz({},h,h.pull):h;this.push=SR(g,c,z);this.pull=SR(c,g,E);this.pullPaused=this.pushPaused=!0;var G={};h.live&&(this.push.on("complete",x.pull.cancel.bind(x.pull)),this.pull.on("complete",x.push.cancel.bind(x.push)));this.on("newListener",function(K){"change"===K?(u(x.pull,"change",m),u(x.push,"change",n)):"denied"===K?(u(x.pull,"denied",d),u(x.push,"denied",a)):"active"===K?(u(x.pull,"active",l),u(x.push,"active",e)):"paused"===K&&(u(x.pull,"paused",b),u(x.push,"paused",k))});this.on("removeListener",
function(K){"change"===K?(x.pull.removeListener("change",m),x.push.removeListener("change",n)):"denied"===K?(x.pull.removeListener("denied",d),x.push.removeListener("denied",a)):"active"===K?(x.pull.removeListener("active",l),x.push.removeListener("active",e)):"paused"===K&&(x.pull.removeListener("paused",b),x.push.removeListener("paused",k))});this.pull.on("removeListener",p("pull"));this.push.on("removeListener",p("push"));var J=Promise.all([this.push,this.pull]).then(function(K){K={push:K[0],pull:K[1]};
x.emit("complete",K);f&&f(null,K);x.removeAllListeners();return K},function(K){x.cancel();f?f(K):x.emit("error",K);x.removeAllListeners();if(f)throw K;});this.then=function(K,T){return J.then(K,T)};this.catch=function(K){return J.catch(K)}}function Ut(){this._store={}}function iD(g){this._store=new Ut;if(g&&Array.isArray(g))for(var c=0,h=g.length;c<h;c++)this.add(g[c])}function Pia(){Rz&&Cw&&(Rz=!1,Cw.length?Vt=Cw.concat(Vt):jD=-1,Vt.length&&O2())}function O2(){if(!Rz){UR=!1;Rz=!0;for(var g=Vt.length,
c=setTimeout(Pia);g;){Cw=Vt;for(Vt=[];Cw&&++jD<g;)Cw[jD].run();jD=-1;g=Vt.length}Cw=null;jD=-1;Rz=!1;clearTimeout(c)}}function P2(g,c){this.fun=g;this.array=c}function ok(g,c,h){Error.call(this,h);this.status=g;this.name=c;this.message=h;this.error=!0}function Dw(g){return g.call.bind(g)}function kD(g,c){if("object"!=typeof g)return!1;try{return c(g),!0}catch(h){return!1}}function Q2(g){return Xn&&xo?void 0!==fp(g):R2(g)||S2(g)||T2(g)||U2(g)||V2(g)||W2(g)||X2(g)||Y2(g)||Z2(g)||$2(g)||a3(g)}function R2(g){return Xn&&
xo?"Uint8Array"===fp(g):"[object Uint8Array]"===Qk(g)||Qia(g)&&void 0!==g.buffer}function S2(g){return Xn&&xo?"Uint8ClampedArray"===fp(g):"[object Uint8ClampedArray]"===Qk(g)}function T2(g){return Xn&&xo?"Uint16Array"===fp(g):"[object Uint16Array]"===Qk(g)}function U2(g){return Xn&&xo?"Uint32Array"===fp(g):"[object Uint32Array]"===Qk(g)}function V2(g){return Xn&&xo?"Int8Array"===fp(g):"[object Int8Array]"===Qk(g)}function W2(g){return Xn&&xo?"Int16Array"===fp(g):"[object Int16Array]"===Qk(g)}function X2(g){return Xn&&
xo?"Int32Array"===fp(g):"[object Int32Array]"===Qk(g)}function Y2(g){return Xn&&xo?"Float32Array"===fp(g):"[object Float32Array]"===Qk(g)}function Z2(g){return Xn&&xo?"Float64Array"===fp(g):"[object Float64Array]"===Qk(g)}function $2(g){return Xn&&xo?"BigInt64Array"===fp(g):"[object BigInt64Array]"===Qk(g)}function a3(g){return Xn&&xo?"BigUint64Array"===fp(g):"[object BigUint64Array]"===Qk(g)}function SI(g){return"[object Map]"===Qk(g)}function TI(g){return"[object Set]"===Qk(g)}function UI(g){return"[object WeakMap]"===
Qk(g)}function VR(g){return"[object WeakSet]"===Qk(g)}function VI(g){return"[object ArrayBuffer]"===Qk(g)}function b3(g){return"undefined"!=typeof ArrayBuffer&&(VI.working?VI(g):g instanceof ArrayBuffer)}function WI(g){return"[object DataView]"===Qk(g)}function c3(g){return"undefined"!=typeof DataView&&(WI.working?WI(g):g instanceof DataView)}function XI(g){return"[object SharedArrayBuffer]"===Qk(g)}function d3(g){return"undefined"!=typeof SharedArrayBuffer&&(XI.working?XI(g):g instanceof SharedArrayBuffer)}
function e3(g){return kD(g,Ria)}function f3(g){return kD(g,Sia)}function g3(g){return kD(g,Tia)}function h3(g){return i3&&kD(g,Uia)}function j3(g){return WR&&kD(g,Via)}function Wt(g,c){var h={seen:[],stylize:Wia};return 3<=arguments.length&&(h.depth=arguments[2]),4<=arguments.length&&(h.colors=arguments[3]),YR(c)?h.showHidden=c:c&&Hh._extend(h,c),Ew(h.showHidden)&&(h.showHidden=!1),Ew(h.depth)&&(h.depth=2),Ew(h.colors)&&(h.colors=!1),Ew(h.customInspect)&&(h.customInspect=!0),h.colors&&(h.stylize=
Xia),YI(h,g,h.depth)}function Xia(g,c){return(c=Wt.styles[c])?"\u001b["+Wt.colors[c][0]+"m"+g+"\u001b["+Wt.colors[c][1]+"m":g}function Wia(g,c){return g}function YI(g,c,h){if(g.customInspect&&c&&ZI(c.inspect)&&c.inspect!==Hh.inspect&&(!c.constructor||c.constructor.prototype!==c)){var f=c.inspect(h,g);return $I(f)||(f=YI(g,f,h)),f}var m=function(b,e){if(Ew(e))return b.stylize("undefined","undefined");if($I(e))return e="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+
"'",b.stylize(e,"string");if(k3(e))return b.stylize(""+e,"number");if(YR(e))return b.stylize(""+e,"boolean");if(null===e)return b.stylize("null","null")}(g,c);if(m)return m;m=Object.keys(c);var n=function(b){var e={};return b.forEach(function(l,p){e[l]=!0}),e}(m);if(g.showHidden&&(m=Object.getOwnPropertyNames(c)),lD(c)&&(0<=m.indexOf("message")||0<=m.indexOf("description")))return ZR(c);if(0===m.length){if(ZI(c))return g.stylize("[Function"+(c.name?": "+c.name:"")+"]","special");if(mD(c))return g.stylize(RegExp.prototype.toString.call(c),
"regexp");if(aJ(c))return g.stylize(Date.prototype.toString.call(c),"date");if(lD(c))return ZR(c)}var a="",d=!1,k=["{","}"];(l3(c)&&(d=!0,k=["[","]"]),ZI(c))&&(a=" [Function"+(c.name?": "+c.name:"")+"]");return mD(c)&&(a=" "+RegExp.prototype.toString.call(c)),aJ(c)&&(a=" "+Date.prototype.toUTCString.call(c)),lD(c)&&(a=" "+ZR(c)),0!==m.length||d&&0!=c.length?0>h?mD(c)?g.stylize(RegExp.prototype.toString.call(c),"regexp"):g.stylize("[Object]","special"):(g.seen.push(c),f=d?function(b,e,l,p,u){for(var x=
[],z=0,E=e.length;z<E;++z)Object.prototype.hasOwnProperty.call(e,String(z))?x.push($R(b,e,l,p,String(z),!0)):x.push("");return u.forEach(function(G){G.match(/^\d+$/)||x.push($R(b,e,l,p,G,!0))}),x}(g,c,h,n,m):m.map(function(b){return $R(g,c,h,n,b,d)}),g.seen.pop(),function(b,e,l){var p=0;return 60<b.reduce(function(u,x){return p++,0<=x.indexOf("\n")&&p++,u+x.replace(/\u001b\[\d\d?m/g,"").length+1},0)?l[0]+(""===e?"":e+"\n ")+" "+b.join(",\n  ")+" "+l[1]:l[0]+e+" "+b.join(", ")+" "+l[1]}(f,a,k)):k[0]+
a+k[1]}function ZR(g){return"["+Error.prototype.toString.call(g)+"]"}function $R(g,c,h,f,m,n){var a,d,k;if((k=Object.getOwnPropertyDescriptor(c,m)||{value:c[m]}).get?d=k.set?g.stylize("[Getter/Setter]","special"):g.stylize("[Getter]","special"):k.set&&(d=g.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(f,m)||(a="["+m+"]"),d||(0>g.seen.indexOf(k.value)?-1<(d=null===h?YI(g,k.value,null):YI(g,k.value,h-1)).indexOf("\n")&&(d=n?d.split("\n").map(function(b){return"  "+b}).join("\n").substr(2):
"\n"+d.split("\n").map(function(b){return"   "+b}).join("\n")):d=g.stylize("[Circular]","special")),Ew(a)){if(n&&m.match(/^\d+$/))return d;(a=JSON.stringify(""+m)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=g.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=g.stylize(a,"string"))}return a+": "+d}function l3(g){return Array.isArray(g)}function YR(g){return"boolean"==typeof g}function k3(g){return"number"==typeof g}function $I(g){return"string"==
typeof g}function Ew(g){return void 0===g}function mD(g){return Sz(g)&&"[object RegExp]"===Object.prototype.toString.call(g)}function Sz(g){return"object"==typeof g&&null!==g}function aJ(g){return Sz(g)&&"[object Date]"===Object.prototype.toString.call(g)}function lD(g){return Sz(g)&&("[object Error]"===Object.prototype.toString.call(g)||g instanceof Error)}function ZI(g){return"function"==typeof g}function aS(g){return 10>g?"0"+g.toString(10):g.toString(10)}function Yia(){var g=new Date,c=[aS(g.getHours()),
aS(g.getMinutes()),aS(g.getSeconds())].join(":");return[g.getDate(),Zia[g.getMonth()],c].join(" ")}function $ia(g,c){if(!g){var h=Error("Promise was rejected with a falsy value");h.reason=g;g=h}return c(g)}function m3(g){var c=g.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");g=g.indexOf("=");return-1===g&&(g=c),[g,g===c?0:4-g%4]}function aja(g,c,h){for(var f,m=[],n=c;n<h;n+=3)c=(g[n]<<16&16711680)+(g[n+1]<<8&65280)+(255&g[n+2]),m.push(jr[(f=c)>>18&63]+jr[f>>12&63]+jr[f>>
6&63]+jr[63&f]);return m.join("")}function zs(g){if(2147483647<g)throw new RangeError('The value "'+g+'" is invalid for option "size"');g=new Uint8Array(g);return Object.setPrototypeOf(g,Ve.prototype),g}function Ve(g,c,h){if("number"==typeof g){if("string"==typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return bS(g)}return n3(g,c,h)}function n3(g,c,h){if("string"==typeof g)return function(m,n){"string"==typeof n&&""!==n||(n="utf8");if(!Ve.isEncoding(n))throw new TypeError("Unknown encoding: "+
n);var a=0|o3(m,n),d=zs(a);m=d.write(m,n);m!==a&&(d=d.slice(0,m));return d}(g,c);if(ArrayBuffer.isView(g))return cS(g);if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(As(g,ArrayBuffer)||g&&As(g.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(As(g,SharedArrayBuffer)||g&&As(g.buffer,SharedArrayBuffer)))return bja(g,c,h);if("number"==typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');
var f=g.valueOf&&g.valueOf();if(null!=f&&f!==g)return Ve.from(f,c,h);if(f=function(m){if(Ve.isBuffer(m)){var n=0|dS(m.length),a=zs(n);return 0===a.length||m.copy(a,0,0,n),a}if(void 0!==m.length)return(n="number"!=typeof m.length)||(n=m.length,n=n!=n),n?zs(0):cS(m);if("Buffer"===m.type&&Array.isArray(m.data))return cS(m.data)}(g))return f;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof g[Symbol.toPrimitive])return Ve.from(g[Symbol.toPrimitive]("string"),c,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof g);}function p3(g){if("number"!=typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+g+'" is invalid for option "size"');}function bS(g){return p3(g),zs(0>g?0:0|dS(g))}function cS(g){for(var c=0>g.length?0:0|dS(g.length),h=zs(c),f=0;f<c;f+=1)h[f]=255&g[f];return h}function bja(g,c,h){if(0>c||g.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<c+(h||0))throw new RangeError('"length" is outside of buffer bounds');
var f;return f=void 0===c&&void 0===h?new Uint8Array(g):void 0===h?new Uint8Array(g,c):new Uint8Array(g,c,h),Object.setPrototypeOf(f,Ve.prototype),f}function dS(g){if(2147483647<=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return 0|g}function o3(g,c){if(Ve.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||As(g,ArrayBuffer))return g.byteLength;if("string"!=typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof g);var h=g.length,f=2<arguments.length&&!0===arguments[2];if(!f&&0===h)return 0;for(var m=!1;;)switch(c){case "ascii":case "latin1":case "binary":return h;case "utf8":case "utf-8":return eS(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*h;case "hex":return h>>>1;case "base64":return q3(g).length;default:if(m)return f?-1:eS(g).length;c=(""+c).toLowerCase();m=!0}}function cja(g,c,h){var f=!1;if(((void 0===c||0>c)&&(c=0),c>this.length)||((void 0===h||h>this.length)&&
(h=this.length),0>=h)||(h>>>=0)<=(c>>>=0))return"";for(g||(g="utf8");;)switch(g){case "hex":g=this.length;(!c||0>c)&&(c=0);(!h||0>h||h>g)&&(h=g);for(g="";c<h;++c)g+=dja[this[c]];return g;case "utf8":case "utf-8":return r3(this,c,h);case "ascii":g="";for(h=Math.min(this.length,h);c<h;++c)g+=String.fromCharCode(127&this[c]);return g;case "latin1":case "binary":g="";for(h=Math.min(this.length,h);c<h;++c)g+=String.fromCharCode(this[c]);return g;case "base64":return 0===c&&h===this.length?fS.fromByteArray(this):
fS.fromByteArray(this.slice(c,h));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,h);h="";for(g=0;g<c.length;g+=2)h+=String.fromCharCode(c[g]+256*c[g+1]);return h;default:if(f)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase();f=!0}}function Fw(g,c,h){var f=g[c];g[c]=g[h];g[h]=f}function s3(g,c,h,f,m){if(0===g.length)return-1;"string"==typeof h?(f=h,h=0):2147483647<h?h=2147483647:-2147483648>h&&(h=-2147483648);var n=h=+h;if(n!=n&&(h=m?0:g.length-1),0>h&&(h=g.length+
h),h>=g.length){if(m)return-1;h=g.length-1}else if(0>h){if(!m)return-1;h=0}if("string"==typeof c&&(c=Ve.from(c,f)),Ve.isBuffer(c))return 0===c.length?-1:t3(g,c,h,f,m);if("number"==typeof c)return c&=255,"function"==typeof Uint8Array.prototype.indexOf?m?Uint8Array.prototype.indexOf.call(g,c,h):Uint8Array.prototype.lastIndexOf.call(g,c,h):t3(g,[c],h,f,m);throw new TypeError("val must be string, number or Buffer");}function t3(g,c,h,f,m){function n(b,e){return 1===a?b[e]:b.readUInt16BE(e*a)}var a=1,
d=g.length,k=c.length;if(void 0!==f&&("ucs2"===(f=String(f).toLowerCase())||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(2>g.length||2>c.length)return-1;a=2;d/=2;k/=2;h/=2}if(m)for(f=-1;h<d;h++)if(n(g,h)===n(c,-1===f?0:h-f)){if(-1===f&&(f=h),h-f+1===k)return f*a}else-1!==f&&(h-=h-f),f=-1;else for(h+k>d&&(h=d-k);0<=h;h--){d=!0;for(f=0;f<k;f++)if(n(g,h+f)!==n(c,f)){d=!1;break}if(d)return h}return-1}function u3(g,c,h,f){for(var m=[],n=0;n<c.length;++n)m.push(255&c.charCodeAt(n));return bJ(m,g,h,f)}
function r3(g,c,h){h=Math.min(g.length,h);for(var f=[];c<h;){var m,n,a=g[c],d=null,k=239<a?4:223<a?3:191<a?2:1;if(c+k<=h)switch(k){case 1:128>a&&(d=a);break;case 2:128==(192&(m=g[c+1]))&&127<(n=(31&a)<<6|63&m)&&(d=n);break;case 3:m=g[c+1];var b=g[c+2];128==(192&m)&&128==(192&b)&&2047<(n=(15&a)<<12|(63&m)<<6|63&b)&&(55296>n||57343<n)&&(d=n);break;case 4:m=g[c+1];b=g[c+2];var e=g[c+3];128==(192&m)&&128==(192&b)&&128==(192&e)&&65535<(n=(15&a)<<18|(63&m)<<12|(63&b)<<6|63&e)&&1114112>n&&(d=n)}null===d?
(d=65533,k=1):65535<d&&(d-=65536,f.push(d>>>10&1023|55296),d=56320|1023&d);f.push(d);c+=k}g=f.length;if(4096>=g)f=String.fromCharCode.apply(String,f);else{h="";for(m=0;m<g;)h+=String.fromCharCode.apply(String,f.slice(m,m+=4096));f=h}return f}function jm(g,c,h){if(0!=g%1||0>g)throw new RangeError("offset is not uint");if(g+c>h)throw new RangeError("Trying to access beyond buffer length");}function Yn(g,c,h,f,m,n){if(!Ve.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');
if(c>m||c<n)throw new RangeError('"value" argument is out of bounds');if(h+f>g.length)throw new RangeError("Index out of range");}function v3(g,c,h,f,m,n){if(h+f>g.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("Index out of range");}function w3(g,c,h,f,m){return c=+c,h>>>=0,m||v3(g,0,h,4),Tz.write(g,c,h,f,23,4),h+4}function x3(g,c,h,f,m){return c=+c,h>>>=0,m||v3(g,0,h,8),Tz.write(g,c,h,f,52,8),h+8}function eS(g,c){var h;c=c||1/0;for(var f=g.length,m=null,n=[],a=0;a<
f;++a){if(55295<(h=g.charCodeAt(a))&&57344>h){if(!m){if(56319<h){-1<(c-=3)&&n.push(239,191,189);continue}if(a+1===f){-1<(c-=3)&&n.push(239,191,189);continue}m=h;continue}if(56320>h){-1<(c-=3)&&n.push(239,191,189);m=h;continue}h=65536+(m-55296<<10|h-56320)}else m&&-1<(c-=3)&&n.push(239,191,189);if(m=null,128>h){if(0>--c)break;n.push(h)}else if(2048>h){if(0>(c-=2))break;n.push(h>>6|192,63&h|128)}else if(65536>h){if(0>(c-=3))break;n.push(h>>12|224,h>>6&63|128,63&h|128)}else{if(!(1114112>h))throw Error("Invalid code point");
if(0>(c-=4))break;n.push(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}}return n}function q3(g){return fS.toByteArray(function(c){if(2>(c=(c=c.split("=")[0]).trim().replace(eja,"")).length)return"";for(;0!=c.length%4;)c+="=";return c}(g))}function bJ(g,c,h,f){for(var m=0;m<f&&!(m+h>=c.length||m>=g.length);++m)c[m+h]=g[m];return m}function As(g,c){return g instanceof c||null!=g&&null!=g.constructor&&null!=g.constructor.name&&g.constructor.name===c.name}function y3(g,c){for(var h in g)c[h]=g[h]}function Gw(g,
c,h){return kr(g,c,h)}function nD(g){switch(this.encoding=function(c){var h=function(f){if(!f)return"utf8";for(var m;;)switch(f){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return f;default:if(m)return;f=(""+f).toLowerCase();m=!0}}(c);if("string"!=typeof h&&(gS.isEncoding===z3||!z3(c)))throw Error("Unknown encoding: "+c);return h||c}(g),this.encoding){case "utf16le":this.text=
fja;this.end=gja;g=4;break;case "utf8":this.fillLast=hja;g=4;break;case "base64":this.text=ija;this.end=jja;g=3;break;default:return this.write=kja,this.end=lja,void 0}this.lastTotal=this.lastNeed=0;this.lastChar=gS.allocUnsafe(g)}function hS(g){return 127>=g?0:6==g>>5?2:14==g>>4?3:30==g>>3?4:2==g>>6?-1:-2}function hja(g){var c=this.lastTotal-this.lastNeed;a:if(128!=(192&g[0]))var h=(this.lastNeed=0,"\ufffd");else{if(1<this.lastNeed&&1<g.length){if(128!=(192&g[1])){h=(this.lastNeed=1,"\ufffd");break a}if(2<
this.lastNeed&&2<g.length&&128!=(192&g[2])){h=(this.lastNeed=2,"\ufffd");break a}}h=void 0}return void 0!==h?h:this.lastNeed<=g.length?(g.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(g.copy(this.lastChar,c,0,g.length),this.lastNeed-=g.length,void 0)}function fja(g,c){if(0==(g.length-c)%2){if(c=g.toString("utf16le",c)){var h=c.charCodeAt(c.length-1);if(55296<=h&&56319>=h)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=
g[g.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",c,g.length-1)}function gja(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):g}function ija(g,c){var h=(g.length-c)%3;return 0===h?g.toString("base64",c):(this.lastNeed=3-h,this.lastTotal=3,1===h?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",
c,g.length-h))}function jja(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function kja(g){return g.toString(this.encoding)}function lja(g){return g&&g.length?this.write(g):""}function gp(g,c,h){h||(h=Error);var f=function(m,n,a){return a.call(this,"string"==typeof c?c:c(m,n,a))||this};$jscomp.inherits(f,h);f.prototype.name=h.name;f.prototype.code=g;A3[g]=f}function B3(g,c){if(Array.isArray(g)){var h=g.length;return g=g.map(function(f){return String(f)}),
2<h?"one of "+c+" "+g.slice(0,h-1).join(", ")+", or "+g[h-1]:2===h?"one of "+c+" "+g[0]+" or "+g[1]:"of "+c+" "+g[0]}return"of "+c+" "+String(g)}function iS(g){try{if(!jS.localStorage)return!1}catch(c){return!1}g=jS.localStorage[g];return null!=g&&"true"===String(g).toLowerCase()}function C3(g,c){var h=Object.keys(g);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(g);c&&(f=f.filter(function(m){return Object.getOwnPropertyDescriptor(g,m).enumerable}));h.push.apply(h,f)}return h}
function mja(g,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(g,f.key,f)}}function D3(g,c){kS(g,c);cJ(g)}function cJ(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function kS(g,c){g.emit("error",c)}function nja(){}function Xt(g,c,h){return c in g?Object.defineProperty(g,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):g[c]=h,g}function Yt(g,
c){return{value:g,done:c}}function oja(g){var c=g[Zt];if(null!==c){var h=g[Hw].read();null!==h&&(g[Iw]=null,g[Zt]=null,g[Jw]=null,c(Yt(h,!1)))}}function pja(g){E3.nextTick(oja,g)}function F3(){function g(Ea,ua,ya){G=G||oD();Ea=Ea||{};"boolean"!=typeof ya&&(ya=ua instanceof G);this.objectMode=!!Ea.objectMode;ya&&(this.objectMode=this.objectMode||!!Ea.readableObjectMode);this.highWaterMark=ia(this,Ea,"readableHighWaterMark",ya);this.buffer=new N;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=
null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==Ea.emitClose;this.autoDestroy=!!Ea.autoDestroy;this.destroyed=!1;this.defaultEncoding=Ea.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;Ea.encoding&&(ka||(ka=Uz.StringDecoder),this.decoder=new ka(Ea.encoding),this.encoding=Ea.encoding)}function c(Ea){if(G=G||oD(),!(this instanceof
c))return new c(Ea);this._readableState=new g(Ea,this,this instanceof G);this.readable=!0;Ea&&("function"==typeof Ea.read&&(this._read=Ea.read),"function"==typeof Ea.destroy&&(this._destroy=Ea.destroy));K.call(this)}function h(Ea,ua,ya,Sa,Qb){fa("readableAddChunk",ua);var mc,Yb=Ea._readableState;if(null===ua)Yb.reading=!1,function(fc,Jc){if(fa("onEofChunk"),!Jc.ended){if(Jc.decoder){var Nb=Jc.decoder.end();Nb&&Nb.length&&(Jc.buffer.push(Nb),Jc.length+=Jc.objectMode?1:Nb.length)}Jc.ended=!0;Jc.sync?
n(fc):(Jc.needReadable=!1,Jc.emittedReadable||(Jc.emittedReadable=!0,a(fc)))}}(Ea,Yb);else if(Qb||(mc=function(fc,Jc){var Nb;var ld=Jc;T.isBuffer(ld)||ld instanceof P||"string"==typeof Jc||void 0===Jc||fc.objectMode||(Nb=new ca("chunk",["string","Buffer","Uint8Array"],Jc));return Nb}(Yb,ua)),mc)ib(Ea,mc);else if(Yb.objectMode||ua&&0<ua.length)if("string"==typeof ua||Yb.objectMode||Object.getPrototypeOf(ua)===T.prototype||(ua=T.from(ua)),Sa)Yb.endEmitted?ib(Ea,new Aa):f(Ea,Yb,ua,!0);else if(Yb.ended)ib(Ea,
new sa);else{if(Yb.destroyed)return!1;Yb.reading=!1;Yb.decoder&&!ya?(ua=Yb.decoder.write(ua),Yb.objectMode||0!==ua.length?f(Ea,Yb,ua,!1):d(Ea,Yb)):f(Ea,Yb,ua,!1)}else Sa||(Yb.reading=!1,d(Ea,Yb));return!Yb.ended&&(Yb.length<Yb.highWaterMark||0===Yb.length)}function f(Ea,ua,ya,Sa){ua.flowing&&0===ua.length&&!ua.sync?(ua.awaitDrain=0,Ea.emit("data",ya)):(ua.length+=ua.objectMode?1:ya.length,Sa?ua.buffer.unshift(ya):ua.buffer.push(ya),ua.needReadable&&n(Ea));d(Ea,ua)}function m(Ea,ua){if(0>=Ea||0===
ua.length&&ua.ended)Ea=0;else if(ua.objectMode)Ea=1;else if(Ea!=Ea)Ea=ua.flowing&&ua.length?ua.buffer.head.data.length:ua.length;else{if(Ea>ua.highWaterMark){var ya=Ea;var Sa=(1073741824<=ya?ya=1073741824:(ya--,ya|=ya>>>1,ya|=ya>>>2,ya|=ya>>>4,ya|=ya>>>8,ya|=ya>>>16,ya++),ya);ua.highWaterMark=Sa}Ea=Ea<=ua.length?Ea:ua.ended?ua.length:(ua.needReadable=!0,0)}return Ea}function n(Ea){var ua=Ea._readableState;fa("emitReadable",ua.needReadable,ua.emittedReadable);ua.needReadable=!1;ua.emittedReadable||
(fa("emitReadable",ua.flowing),ua.emittedReadable=!0,J.nextTick(a,Ea))}function a(Ea){var ua=Ea._readableState;fa("emitReadable_",ua.destroyed,ua.length,ua.ended);ua.destroyed||!ua.length&&!ua.ended||(Ea.emit("readable"),ua.emittedReadable=!1);ua.needReadable=!ua.flowing&&!ua.ended&&ua.length<=ua.highWaterMark;p(Ea)}function d(Ea,ua){ua.readingMore||(ua.readingMore=!0,J.nextTick(k,Ea,ua))}function k(Ea,ua){for(;!ua.reading&&!ua.ended&&(ua.length<ua.highWaterMark||ua.flowing&&0===ua.length);){var ya=
ua.length;if(fa("maybeReadMore read 0"),Ea.read(0),ya===ua.length)break}ua.readingMore=!1}function b(Ea){var ua=Ea._readableState;ua.readableListening=0<Ea.listenerCount("readable");ua.resumeScheduled&&!ua.paused?ua.flowing=!0:0<Ea.listenerCount("data")&&Ea.resume()}function e(Ea){fa("readable nexttick read 0");Ea.read(0)}function l(Ea,ua){fa("resume",ua.reading);ua.reading||Ea.read(0);ua.resumeScheduled=!1;Ea.emit("resume");p(Ea);ua.flowing&&!ua.reading&&Ea.read(0)}function p(Ea){var ua=Ea._readableState;
for(fa("flow",ua.flowing);ua.flowing&&null!==Ea.read(););}function u(Ea,ua){return 0===ua.length?null:(ua.objectMode?ya=ua.buffer.shift():!Ea||Ea>=ua.length?(ya=ua.decoder?ua.buffer.join(""):1===ua.buffer.length?ua.buffer.first():ua.buffer.concat(ua.length),ua.buffer.clear()):ya=ua.buffer.consume(Ea,ua.decoder),ya);var ya}function x(Ea){var ua=Ea._readableState;fa("endReadable",ua.endEmitted);ua.endEmitted||(ua.ended=!0,J.nextTick(z,ua,Ea))}function z(Ea,ua){if(fa("endReadableNT",Ea.endEmitted,Ea.length),
!Ea.endEmitted&&0===Ea.length&&(Ea.endEmitted=!0,ua.readable=!1,ua.emit("end"),Ea.autoDestroy))Ea=ua._writableState,(!Ea||Ea.autoDestroy&&Ea.finished)&&ua.destroy()}function E(Ea,ua){for(var ya=0,Sa=Ea.length;ya<Sa;ya++)if(Ea[ya]===ua)return ya;return-1}if(G3)return lS;G3=!0;var G,J=Li;lS=c;c.ReadableState=g;lr.EventEmitter;var K=dJ,T=Rh.Buffer,P=qja.Uint8Array||function(){},da=Hh;var fa=da&&da.debuglog?da.debuglog("stream"):function(){};var ka,za,Ia,N=rja;da=H3;var ia=I3.getHighWaterMark,W=cq.codes,
ca=W.ERR_INVALID_ARG_TYPE,sa=W.ERR_STREAM_PUSH_AFTER_EOF,la=W.ERR_METHOD_NOT_IMPLEMENTED,Aa=W.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;$h(c,K);var ib=da.errorOrDestroy,ob=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(Ea){this._readableState&&(this._readableState.destroyed=Ea)}});c.prototype.destroy=da.destroy;c.prototype._undestroy=da.undestroy;c.prototype._destroy=
function(Ea,ua){ua(Ea)};c.prototype.push=function(Ea,ua){var ya,Sa=this._readableState;return Sa.objectMode?ya=!0:"string"==typeof Ea&&((ua=ua||Sa.defaultEncoding)!==Sa.encoding&&(Ea=T.from(Ea,ua),ua=""),ya=!0),h(this,Ea,ua,!1,ya)};c.prototype.unshift=function(Ea){return h(this,Ea,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(Ea){ka||(ka=Uz.StringDecoder);Ea=new ka(Ea);this._readableState.decoder=Ea;this._readableState.encoding=
this._readableState.decoder.encoding;for(var ua=this._readableState.buffer.head,ya="";null!==ua;)ya+=Ea.write(ua.data),ua=ua.next;return this._readableState.buffer.clear(),""!==ya&&this._readableState.buffer.push(ya),this._readableState.length=ya.length,this};return c.prototype.read=function(Ea){fa("read",Ea);Ea=parseInt(Ea,10);var ua=this._readableState,ya=Ea;if(0!==Ea&&(ua.emittedReadable=!1),0===Ea&&ua.needReadable&&((0!==ua.highWaterMark?ua.length>=ua.highWaterMark:0<ua.length)||ua.ended))return fa("read: emitReadable",
ua.length,ua.ended),0===ua.length&&ua.ended?x(this):n(this),null;if(0===(Ea=m(Ea,ua))&&ua.ended)return 0===ua.length&&x(this),null;var Sa,Qb=ua.needReadable;return fa("need readable",Qb),(0===ua.length||ua.length-Ea<ua.highWaterMark)&&fa("length less than watermark",Qb=!0),ua.ended||ua.reading?fa("reading or ended",!1):Qb&&(fa("do read"),ua.reading=!0,ua.sync=!0,0===ua.length&&(ua.needReadable=!0),this._read(ua.highWaterMark),ua.sync=!1,ua.reading||(Ea=m(ya,ua))),null===(Sa=0<Ea?u(Ea,ua):null)?(ua.needReadable=
ua.length<=ua.highWaterMark,Ea=0):(ua.length-=Ea,ua.awaitDrain=0),0===ua.length&&(ua.ended||(ua.needReadable=!0),ya!==Ea&&ua.ended&&x(this)),null!==Sa&&this.emit("data",Sa),Sa},c.prototype._read=function(Ea){ib(this,new la("_read()"))},c.prototype.pipe=function(Ea,ua){function ya(Pa,Ra){fa("onunpipe");Pa===Nb&&Ra&&!1===Ra.hasUnpiped&&(Ra.hasUnpiped=!0,fa("cleanup"),Ea.removeListener("close",Yb),Ea.removeListener("finish",fc),Ea.removeListener("drain",Od),Ea.removeListener("error",mc),Ea.removeListener("unpipe",
ya),Nb.removeListener("end",Sa),Nb.removeListener("end",Jc),Nb.removeListener("data",Qb),ta=!0,!ld.awaitDrain||Ea._writableState&&!Ea._writableState.needDrain||Od())}function Sa(){fa("onend");Ea.end()}function Qb(Pa){fa("ondata");Pa=Ea.write(Pa);fa("dest.write",Pa);!1===Pa&&((1===ld.pipesCount&&ld.pipes===Ea||1<ld.pipesCount&&-1!==E(ld.pipes,Ea))&&!ta&&(fa("false write response, pause",ld.awaitDrain),ld.awaitDrain++),Nb.pause())}function mc(Pa){fa("onerror",Pa);Jc();Ea.removeListener("error",mc);
0===Ea.listeners("error").length&&ib(Ea,Pa)}function Yb(){Ea.removeListener("finish",fc);Jc()}function fc(){fa("onfinish");Ea.removeListener("close",Yb);Jc()}function Jc(){fa("unpipe");Nb.unpipe(Ea)}var Nb=this,ld=this._readableState;switch(ld.pipesCount){case 0:ld.pipes=Ea;break;case 1:ld.pipes=[ld.pipes,Ea];break;default:ld.pipes.push(Ea)}ld.pipesCount+=1;fa("pipe count=%d opts=%j",ld.pipesCount,ua);ua=ua&&!1===ua.end||Ea===J.stdout||Ea===J.stderr?Jc:Sa;ld.endEmitted?J.nextTick(ua):Nb.once("end",
ua);Ea.on("unpipe",ya);var Od=function(Pa){return function(){var Ra=Pa._readableState;fa("pipeOnDrain",Ra.awaitDrain);Ra.awaitDrain&&Ra.awaitDrain--;0===Ra.awaitDrain&&Pa.listeners("data").length&&(Ra.flowing=!0,p(Pa))}}(Nb);Ea.on("drain",Od);var ta=!1;return Nb.on("data",Qb),function(Pa,Ra,Cb){if("function"==typeof Pa.prependListener)return Pa.prependListener(Ra,Cb);Pa._events&&Pa._events[Ra]?Array.isArray(Pa._events[Ra])?Pa._events[Ra].unshift(Cb):Pa._events[Ra]=[Cb,Pa._events[Ra]]:Pa.on(Ra,Cb)}(Ea,
"error",mc),Ea.once("close",Yb),Ea.once("finish",fc),Ea.emit("pipe",Nb),ld.flowing||(fa("pipe resume"),Nb.resume()),Ea},c.prototype.unpipe=function(Ea){var ua=this._readableState,ya={hasUnpiped:!1};if(0===ua.pipesCount)return this;if(1===ua.pipesCount)return Ea&&Ea!==ua.pipes||(Ea||(Ea=ua.pipes),ua.pipes=null,ua.pipesCount=0,ua.flowing=!1,Ea&&Ea.emit("unpipe",this,ya)),this;if(!Ea){Ea=ua.pipes;ya=ua.pipesCount;ua.pipes=null;ua.pipesCount=0;ua.flowing=!1;for(ua=0;ua<ya;ua++)Ea[ua].emit("unpipe",this,
{hasUnpiped:!1});return this}var Sa=E(ua.pipes,Ea);return-1===Sa||(ua.pipes.splice(Sa,1),--ua.pipesCount,1===ua.pipesCount&&(ua.pipes=ua.pipes[0]),Ea.emit("unpipe",this,ya)),this},c.prototype.on=function(Ea,ua){ua=K.prototype.on.call(this,Ea,ua);var ya=this._readableState;return"data"===Ea?(ya.readableListening=0<this.listenerCount("readable"),!1!==ya.flowing&&this.resume()):"readable"===Ea&&(ya.endEmitted||ya.readableListening||(ya.readableListening=ya.needReadable=!0,ya.flowing=!1,ya.emittedReadable=
!1,fa("on readable",ya.length,ya.reading),ya.length?n(this):ya.reading||J.nextTick(e,this))),ua},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(Ea,ua){ua=K.prototype.removeListener.call(this,Ea,ua);return"readable"===Ea&&J.nextTick(b,this),ua},c.prototype.removeAllListeners=function(Ea){var ua=K.prototype.removeAllListeners.apply(this,arguments);return"readable"!==Ea&&void 0!==Ea||J.nextTick(b,this),ua},c.prototype.resume=function(){var Ea=this._readableState;Ea.flowing||
(fa("resume"),Ea.flowing=!Ea.readableListening,Ea.resumeScheduled||(Ea.resumeScheduled=!0,J.nextTick(l,this,Ea)));return Ea.paused=!1,this},c.prototype.pause=function(){return fa("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(fa("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(Ea){var ua=this,ya=this._readableState,Sa=!1,Qb;for(Qb in Ea.on("end",function(){if(fa("wrapped end"),ya.decoder&&
!ya.ended){var mc=ya.decoder.end();mc&&mc.length&&ua.push(mc)}ua.push(null)}),Ea.on("data",function(mc){(fa("wrapped data"),ya.decoder&&(mc=ya.decoder.write(mc)),ya.objectMode&&null==mc)||(ya.objectMode||mc&&mc.length)&&(ua.push(mc)||(Sa=!0,Ea.pause()))}),Ea)void 0===this[Qb]&&"function"==typeof Ea[Qb]&&(this[Qb]=function(mc){return function(){return Ea[mc].apply(Ea,arguments)}}(Qb));for(Qb=0;Qb<ob.length;Qb++)Ea.on(ob[Qb],this.emit.bind(this,ob[Qb]));return this._read=function(mc){fa("wrapped _read",
mc);Sa&&(Sa=!1,Ea.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=function(){return void 0===za&&(za=sja),za(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},
set:function(Ea){this._readableState&&(this._readableState.flowing=Ea)}}),c._fromList=u,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(Ea,ua){return void 0===Ia&&(Ia=J3),Ia(c,Ea,ua)}),lS}function tja(){function g(W){var ca=this;this.entry=this.next=null;this.finish=function(){var sa=ca.entry;for(ca.entry=null;sa;){var la=sa.callback;W.pendingcb--;la(void 0);sa=sa.next}W.corkedRequestsFree.next=
ca;!0}}function c(){}function h(W,ca,sa){e=e||oD();W=W||{};"boolean"!=typeof sa&&(sa=ca instanceof e);this.objectMode=!!W.objectMode;sa&&(this.objectMode=this.objectMode||!!W.writableObjectMode);this.highWaterMark=J(this,W,"writableHighWaterMark",sa);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==W.decodeStrings;this.defaultEncoding=W.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=
!1;this.onwrite=function(la){!function(Aa,ib){var ob=Aa._writableState,Ea=ob.sync,ua=ob.writecb;if("function"!=typeof ua)throw new da;(function(ya){ya.writing=!1;ya.writecb=null;ya.length-=ya.writelen;ya.writelen=0}(ob),ib)?!function(ya,Sa,Qb,mc,Yb){--Sa.pendingcb;Qb?(l.nextTick(Yb,mc),l.nextTick(b,ya,Sa),ya._writableState.errorEmitted=!0,ia(ya,mc)):(Yb(mc),ya._writableState.errorEmitted=!0,ia(ya,mc),b(ya,Sa))}(Aa,ob,Ea,ib,ua):((ib=d(ob)||Aa.destroyed)||ob.corked||ob.bufferProcessing||!ob.bufferedRequest||
a(Aa,ob),Ea?l.nextTick(n,Aa,ob,ib,ua):n(Aa,ob,ib,ua))}(ca,la)};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==W.emitClose;this.autoDestroy=!!W.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function f(W){var ca=this instanceof(e=e||oD());if(!ca&&!E.call(f,this))return new f(W);this._writableState=new h(W,this,ca);this.writable=!0;W&&("function"==typeof W.write&&
(this._write=W.write),"function"==typeof W.writev&&(this._writev=W.writev),"function"==typeof W.destroy&&(this._destroy=W.destroy),"function"==typeof W.final&&(this._final=W.final));u.call(this)}function m(W,ca,sa,la,Aa,ib,ob){ca.writelen=la;ca.writecb=ob;ca.writing=!0;ca.sync=!0;ca.destroyed?ca.onwrite(new ka("write")):sa?W._writev(Aa,ca.onwrite):W._write(Aa,ib,ca.onwrite);ca.sync=!1}function n(W,ca,sa,la){sa||(0===ca.length&&ca.needDrain&&(ca.needDrain=!1,W.emit("drain")),!0);ca.pendingcb--;la();
b(W,ca)}function a(W,ca){ca.bufferProcessing=!0;var sa=ca.bufferedRequest;if(W._writev&&sa&&sa.next){var la=Array(ca.bufferedRequestCount),Aa=ca.corkedRequestsFree;Aa.entry=sa;for(var ib=0,ob=!0;sa;)la[ib]=sa,sa.isBuf||(ob=!1),sa=sa.next,ib+=1;la.allBuffers=ob;m(W,ca,!0,ca.length,la,"",Aa.finish);ca.pendingcb++;ca.lastBufferedRequest=null;Aa.next?(ca.corkedRequestsFree=Aa.next,Aa.next=null):ca.corkedRequestsFree=new g(ca);ca.bufferedRequestCount=0}else{for(;sa&&(la=sa.chunk,m(W,ca,!1,ca.objectMode?
1:la.length,la,sa.encoding,sa.callback),sa=sa.next,ca.bufferedRequestCount--,!ca.writing););null===sa&&(ca.lastBufferedRequest=null)}ca.bufferedRequest=sa;ca.bufferProcessing=!1}function d(W){return W.ending&&0===W.length&&null===W.bufferedRequest&&!W.finished&&!W.writing}function k(W,ca){W._final(function(sa){ca.pendingcb--;sa&&ia(W,sa);ca.prefinished=!0;W.emit("prefinish");b(W,ca)})}function b(W,ca){var sa=d(ca),la;if(la=sa)ca.prefinished||ca.finalCalled||("function"!=typeof W._final||ca.destroyed?
(ca.prefinished=!0,W.emit("prefinish")):(ca.pendingcb++,ca.finalCalled=!0,l.nextTick(k,W,ca))),la=(!0,0===ca.pendingcb&&(ca.finished=!0,W.emit("finish"),ca.autoDestroy));la&&(ca=W._readableState,(!ca||ca.autoDestroy&&ca.endEmitted)&&W.destroy());return sa}if(K3)return mS;K3=!0;var e,l=Li;mS=f;f.WritableState=h;var p={deprecate:L3},u=dJ,x=Rh.Buffer,z=uja.Uint8Array||function(){},E,G=H3,J=I3.getHighWaterMark,K=cq.codes,T=K.ERR_INVALID_ARG_TYPE,P=K.ERR_METHOD_NOT_IMPLEMENTED,da=K.ERR_MULTIPLE_CALLBACK,
fa=K.ERR_STREAM_CANNOT_PIPE,ka=K.ERR_STREAM_DESTROYED,za=K.ERR_STREAM_NULL_VALUES,Ia=K.ERR_STREAM_WRITE_AFTER_END,N=K.ERR_UNKNOWN_ENCODING,ia=G.errorOrDestroy;return $h(f,u),h.prototype.getBuffer=function(){for(var W=this.bufferedRequest,ca=[];W;)ca.push(W),W=W.next;return ca},function(){try{Object.defineProperty(h.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(W){}}(),"function"==
typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(W){return!!E.call(this,W)||this===f&&W&&W._writableState instanceof h}})):E=function(W){return W instanceof this},f.prototype.pipe=function(){ia(this,new fa)},f.prototype.write=function(W,ca,sa){var la,Aa=this._writableState,ib=!1,ob=!Aa.objectMode&&(la=W,x.isBuffer(la)||la instanceof z);return ob&&!x.isBuffer(W)&&
(W=x.from(W)),"function"==typeof ca&&(sa=ca,ca=null),ob?ca="buffer":ca||(ca=Aa.defaultEncoding),"function"!=typeof sa&&(sa=c),Aa.ending?function(Ea,ua){var ya=new Ia;ia(Ea,ya);l.nextTick(ua,ya)}(this,sa):(ob||function(Ea,ua,ya,Sa){var Qb;return null===ya?Qb=new za:"string"==typeof ya||ua.objectMode||(Qb=new T("chunk",["string","Buffer"],ya)),!Qb||(ia(Ea,Qb),l.nextTick(Sa,Qb),!1)}(this,Aa,W,sa))&&(Aa.pendingcb++,ib=function(Ea,ua,ya,Sa,Qb,mc){if(!ya){var Yb=Sa;ua.objectMode||!1===ua.decodeStrings||
"string"!=typeof Yb||(Yb=x.from(Yb,Qb));Sa!==Yb&&(ya=!0,Qb="buffer",Sa=Yb)}var fc=ua.objectMode?1:Sa.length;ua.length+=fc;(Yb=ua.length<ua.highWaterMark)||(ua.needDrain=!0);ua.writing||ua.corked?(Ea=ua.lastBufferedRequest,ua.lastBufferedRequest={chunk:Sa,encoding:Qb,isBuf:ya,callback:mc,next:null},Ea?Ea.next=ua.lastBufferedRequest:ua.bufferedRequest=ua.lastBufferedRequest,ua.bufferedRequestCount+=1):m(Ea,ua,!1,fc,Sa,Qb,mc);return Yb}(this,Aa,ob,W,ca,sa)),ib},f.prototype.cork=function(){this._writableState.corked++},
f.prototype.uncork=function(){var W=this._writableState;W.corked&&(W.corked--,W.writing||W.corked||W.bufferProcessing||!W.bufferedRequest||a(this,W))},f.prototype.setDefaultEncoding=function(W){if("string"==typeof W&&(W=W.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((W+"").toLowerCase())))throw new N(W);return this._writableState.defaultEncoding=W,this},Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&
this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f.prototype._write=function(W,ca,sa){sa(new P("_write()"))},f.prototype._writev=null,f.prototype.end=function(W,ca,sa){var la=this._writableState;"function"==typeof W?(sa=W,W=null,ca=null):"function"==typeof ca&&(sa=ca,ca=null);null!=W&&this.write(W,ca);la.corked&&(la.corked=1,this.uncork());la.ending||(W=sa,la.ending=!0,b(this,la),
W&&(la.finished?l.nextTick(W):this.once("finish",W)),la.ended=!0,this.writable=!1);return this},Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(W){this._writableState&&(this._writableState.destroyed=W)}}),f.prototype.destroy=G.destroy,f.prototype._undestroy=G.undestroy,f.prototype._destroy=
function(W,ca){ca(W)},mS}function oD(){function g(b){if(!(this instanceof g))return new g(b);n.call(this,b);a.call(this,b);this.allowHalfOpen=!0;b&&(!1===b.readable&&(this.readable=!1),!1===b.writable&&(this.writable=!1),!1===b.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(h,this)}function h(b){b.end()}if(M3)return nS;M3=!0;var f=Li,m=Object.keys||function(b){var e=[],l;for(l in b)e.push(l);return e};nS=g;var n=F3(),a=tja();$h(g,n);m=
m(a.prototype);for(var d=0;d<m.length;d++){var k=m[d];g.prototype[k]||(g.prototype[k]=a.prototype[k])}return Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),
Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(b){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=b,this._writableState.destroyed=b)}}),nS}function vja(){}function N3(g,c){var h=Object.keys(g);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(g);c&&(f=f.filter(function(m){return Object.getOwnPropertyDescriptor(g,
m).enumerable}));h.push.apply(h,f)}return h}function wja(g,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(g,f.key,f)}}function O3(g,c){oS(g,c);eJ(g)}function eJ(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function oS(g,c){g.emit("error",c)}function $t(g,c,h){return c in g?Object.defineProperty(g,c,{value:h,enumerable:!0,configurable:!0,
writable:!0}):g[c]=h,g}function au(g,c){return{value:g,done:c}}function xja(g){var c=g[bu];if(null!==c){var h=g[Kw].read();null!==h&&(g[Lw]=null,g[bu]=null,g[Mw]=null,c(au(h,!1)))}}function yja(g){P3.nextTick(xja,g)}function zja(){function g(Ea,ua,ya){G=G||fJ();Ea=Ea||{};"boolean"!=typeof ya&&(ya=ua instanceof G);this.objectMode=!!Ea.objectMode;ya&&(this.objectMode=this.objectMode||!!Ea.readableObjectMode);this.highWaterMark=ia(this,Ea,"readableHighWaterMark",ya);this.buffer=new N;this.length=0;this.pipes=
null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==Ea.emitClose;this.autoDestroy=!!Ea.autoDestroy;this.destroyed=!1;this.defaultEncoding=Ea.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;Ea.encoding&&(ka||(ka=Uz.StringDecoder),this.decoder=new ka(Ea.encoding),this.encoding=Ea.encoding)}
function c(Ea){if(G=G||fJ(),!(this instanceof c))return new c(Ea);this._readableState=new g(Ea,this,this instanceof G);this.readable=!0;Ea&&("function"==typeof Ea.read&&(this._read=Ea.read),"function"==typeof Ea.destroy&&(this._destroy=Ea.destroy));K.call(this)}function h(Ea,ua,ya,Sa,Qb){fa("readableAddChunk",ua);var mc,Yb=Ea._readableState;if(null===ua)Yb.reading=!1,function(fc,Jc){if(fa("onEofChunk"),!Jc.ended){if(Jc.decoder){var Nb=Jc.decoder.end();Nb&&Nb.length&&(Jc.buffer.push(Nb),Jc.length+=
Jc.objectMode?1:Nb.length)}Jc.ended=!0;Jc.sync?n(fc):(Jc.needReadable=!1,Jc.emittedReadable||(Jc.emittedReadable=!0,a(fc)))}}(Ea,Yb);else if(Qb||(mc=function(fc,Jc){var Nb;var ld=Jc;T.isBuffer(ld)||ld instanceof P||"string"==typeof Jc||void 0===Jc||fc.objectMode||(Nb=new ca("chunk",["string","Buffer","Uint8Array"],Jc));return Nb}(Yb,ua)),mc)ib(Ea,mc);else if(Yb.objectMode||ua&&0<ua.length)if("string"==typeof ua||Yb.objectMode||Object.getPrototypeOf(ua)===T.prototype||(ua=T.from(ua)),Sa)Yb.endEmitted?
ib(Ea,new Aa):f(Ea,Yb,ua,!0);else if(Yb.ended)ib(Ea,new sa);else{if(Yb.destroyed)return!1;Yb.reading=!1;Yb.decoder&&!ya?(ua=Yb.decoder.write(ua),Yb.objectMode||0!==ua.length?f(Ea,Yb,ua,!1):d(Ea,Yb)):f(Ea,Yb,ua,!1)}else Sa||(Yb.reading=!1,d(Ea,Yb));return!Yb.ended&&(Yb.length<Yb.highWaterMark||0===Yb.length)}function f(Ea,ua,ya,Sa){ua.flowing&&0===ua.length&&!ua.sync?(ua.awaitDrain=0,Ea.emit("data",ya)):(ua.length+=ua.objectMode?1:ya.length,Sa?ua.buffer.unshift(ya):ua.buffer.push(ya),ua.needReadable&&
n(Ea));d(Ea,ua)}function m(Ea,ua){if(0>=Ea||0===ua.length&&ua.ended)Ea=0;else if(ua.objectMode)Ea=1;else if(Ea!=Ea)Ea=ua.flowing&&ua.length?ua.buffer.head.data.length:ua.length;else{if(Ea>ua.highWaterMark){var ya=Ea;var Sa=(1073741824<=ya?ya=1073741824:(ya--,ya|=ya>>>1,ya|=ya>>>2,ya|=ya>>>4,ya|=ya>>>8,ya|=ya>>>16,ya++),ya);ua.highWaterMark=Sa}Ea=Ea<=ua.length?Ea:ua.ended?ua.length:(ua.needReadable=!0,0)}return Ea}function n(Ea){var ua=Ea._readableState;fa("emitReadable",ua.needReadable,ua.emittedReadable);
ua.needReadable=!1;ua.emittedReadable||(fa("emitReadable",ua.flowing),ua.emittedReadable=!0,J.nextTick(a,Ea))}function a(Ea){var ua=Ea._readableState;fa("emitReadable_",ua.destroyed,ua.length,ua.ended);ua.destroyed||!ua.length&&!ua.ended||(Ea.emit("readable"),ua.emittedReadable=!1);ua.needReadable=!ua.flowing&&!ua.ended&&ua.length<=ua.highWaterMark;p(Ea)}function d(Ea,ua){ua.readingMore||(ua.readingMore=!0,J.nextTick(k,Ea,ua))}function k(Ea,ua){for(;!ua.reading&&!ua.ended&&(ua.length<ua.highWaterMark||
ua.flowing&&0===ua.length);){var ya=ua.length;if(fa("maybeReadMore read 0"),Ea.read(0),ya===ua.length)break}ua.readingMore=!1}function b(Ea){var ua=Ea._readableState;ua.readableListening=0<Ea.listenerCount("readable");ua.resumeScheduled&&!ua.paused?ua.flowing=!0:0<Ea.listenerCount("data")&&Ea.resume()}function e(Ea){fa("readable nexttick read 0");Ea.read(0)}function l(Ea,ua){fa("resume",ua.reading);ua.reading||Ea.read(0);ua.resumeScheduled=!1;Ea.emit("resume");p(Ea);ua.flowing&&!ua.reading&&Ea.read(0)}
function p(Ea){var ua=Ea._readableState;for(fa("flow",ua.flowing);ua.flowing&&null!==Ea.read(););}function u(Ea,ua){return 0===ua.length?null:(ua.objectMode?ya=ua.buffer.shift():!Ea||Ea>=ua.length?(ya=ua.decoder?ua.buffer.join(""):1===ua.buffer.length?ua.buffer.first():ua.buffer.concat(ua.length),ua.buffer.clear()):ya=ua.buffer.consume(Ea,ua.decoder),ya);var ya}function x(Ea){var ua=Ea._readableState;fa("endReadable",ua.endEmitted);ua.endEmitted||(ua.ended=!0,J.nextTick(z,ua,Ea))}function z(Ea,ua){if(fa("endReadableNT",
Ea.endEmitted,Ea.length),!Ea.endEmitted&&0===Ea.length&&(Ea.endEmitted=!0,ua.readable=!1,ua.emit("end"),Ea.autoDestroy))Ea=ua._writableState,(!Ea||Ea.autoDestroy&&Ea.finished)&&ua.destroy()}function E(Ea,ua){for(var ya=0,Sa=Ea.length;ya<Sa;ya++)if(Ea[ya]===ua)return ya;return-1}if(Q3)return pS;Q3=!0;var G,J=Li;pS=c;c.ReadableState=g;lr.EventEmitter;var K=dJ,T=Rh.Buffer,P=Aja.Uint8Array||function(){},da=Hh;var fa=da&&da.debuglog?da.debuglog("stream"):function(){};var ka,za,Ia,N=Bja;da=R3;var ia=S3.getHighWaterMark,
W=cq.codes,ca=W.ERR_INVALID_ARG_TYPE,sa=W.ERR_STREAM_PUSH_AFTER_EOF,la=W.ERR_METHOD_NOT_IMPLEMENTED,Aa=W.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;$h(c,K);var ib=da.errorOrDestroy,ob=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(Ea){this._readableState&&(this._readableState.destroyed=Ea)}});c.prototype.destroy=da.destroy;c.prototype._undestroy=da.undestroy;
c.prototype._destroy=function(Ea,ua){ua(Ea)};c.prototype.push=function(Ea,ua){var ya,Sa=this._readableState;return Sa.objectMode?ya=!0:"string"==typeof Ea&&((ua=ua||Sa.defaultEncoding)!==Sa.encoding&&(Ea=T.from(Ea,ua),ua=""),ya=!0),h(this,Ea,ua,!1,ya)};c.prototype.unshift=function(Ea){return h(this,Ea,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(Ea){ka||(ka=Uz.StringDecoder);Ea=new ka(Ea);this._readableState.decoder=Ea;this._readableState.encoding=
this._readableState.decoder.encoding;for(var ua=this._readableState.buffer.head,ya="";null!==ua;)ya+=Ea.write(ua.data),ua=ua.next;return this._readableState.buffer.clear(),""!==ya&&this._readableState.buffer.push(ya),this._readableState.length=ya.length,this};return c.prototype.read=function(Ea){fa("read",Ea);Ea=parseInt(Ea,10);var ua=this._readableState,ya=Ea;if(0!==Ea&&(ua.emittedReadable=!1),0===Ea&&ua.needReadable&&((0!==ua.highWaterMark?ua.length>=ua.highWaterMark:0<ua.length)||ua.ended))return fa("read: emitReadable",
ua.length,ua.ended),0===ua.length&&ua.ended?x(this):n(this),null;if(0===(Ea=m(Ea,ua))&&ua.ended)return 0===ua.length&&x(this),null;var Sa,Qb=ua.needReadable;return fa("need readable",Qb),(0===ua.length||ua.length-Ea<ua.highWaterMark)&&fa("length less than watermark",Qb=!0),ua.ended||ua.reading?fa("reading or ended",!1):Qb&&(fa("do read"),ua.reading=!0,ua.sync=!0,0===ua.length&&(ua.needReadable=!0),this._read(ua.highWaterMark),ua.sync=!1,ua.reading||(Ea=m(ya,ua))),null===(Sa=0<Ea?u(Ea,ua):null)?(ua.needReadable=
ua.length<=ua.highWaterMark,Ea=0):(ua.length-=Ea,ua.awaitDrain=0),0===ua.length&&(ua.ended||(ua.needReadable=!0),ya!==Ea&&ua.ended&&x(this)),null!==Sa&&this.emit("data",Sa),Sa},c.prototype._read=function(Ea){ib(this,new la("_read()"))},c.prototype.pipe=function(Ea,ua){function ya(Pa,Ra){fa("onunpipe");Pa===Nb&&Ra&&!1===Ra.hasUnpiped&&(Ra.hasUnpiped=!0,fa("cleanup"),Ea.removeListener("close",Yb),Ea.removeListener("finish",fc),Ea.removeListener("drain",Od),Ea.removeListener("error",mc),Ea.removeListener("unpipe",
ya),Nb.removeListener("end",Sa),Nb.removeListener("end",Jc),Nb.removeListener("data",Qb),ta=!0,!ld.awaitDrain||Ea._writableState&&!Ea._writableState.needDrain||Od())}function Sa(){fa("onend");Ea.end()}function Qb(Pa){fa("ondata");Pa=Ea.write(Pa);fa("dest.write",Pa);!1===Pa&&((1===ld.pipesCount&&ld.pipes===Ea||1<ld.pipesCount&&-1!==E(ld.pipes,Ea))&&!ta&&(fa("false write response, pause",ld.awaitDrain),ld.awaitDrain++),Nb.pause())}function mc(Pa){fa("onerror",Pa);Jc();Ea.removeListener("error",mc);
0===Ea.listeners("error").length&&ib(Ea,Pa)}function Yb(){Ea.removeListener("finish",fc);Jc()}function fc(){fa("onfinish");Ea.removeListener("close",Yb);Jc()}function Jc(){fa("unpipe");Nb.unpipe(Ea)}var Nb=this,ld=this._readableState;switch(ld.pipesCount){case 0:ld.pipes=Ea;break;case 1:ld.pipes=[ld.pipes,Ea];break;default:ld.pipes.push(Ea)}ld.pipesCount+=1;fa("pipe count=%d opts=%j",ld.pipesCount,ua);ua=ua&&!1===ua.end||Ea===J.stdout||Ea===J.stderr?Jc:Sa;ld.endEmitted?J.nextTick(ua):Nb.once("end",
ua);Ea.on("unpipe",ya);var Od=function(Pa){return function(){var Ra=Pa._readableState;fa("pipeOnDrain",Ra.awaitDrain);Ra.awaitDrain&&Ra.awaitDrain--;0===Ra.awaitDrain&&Pa.listeners("data").length&&(Ra.flowing=!0,p(Pa))}}(Nb);Ea.on("drain",Od);var ta=!1;return Nb.on("data",Qb),function(Pa,Ra,Cb){if("function"==typeof Pa.prependListener)return Pa.prependListener(Ra,Cb);Pa._events&&Pa._events[Ra]?Array.isArray(Pa._events[Ra])?Pa._events[Ra].unshift(Cb):Pa._events[Ra]=[Cb,Pa._events[Ra]]:Pa.on(Ra,Cb)}(Ea,
"error",mc),Ea.once("close",Yb),Ea.once("finish",fc),Ea.emit("pipe",Nb),ld.flowing||(fa("pipe resume"),Nb.resume()),Ea},c.prototype.unpipe=function(Ea){var ua=this._readableState,ya={hasUnpiped:!1};if(0===ua.pipesCount)return this;if(1===ua.pipesCount)return Ea&&Ea!==ua.pipes||(Ea||(Ea=ua.pipes),ua.pipes=null,ua.pipesCount=0,ua.flowing=!1,Ea&&Ea.emit("unpipe",this,ya)),this;if(!Ea){Ea=ua.pipes;ya=ua.pipesCount;ua.pipes=null;ua.pipesCount=0;ua.flowing=!1;for(ua=0;ua<ya;ua++)Ea[ua].emit("unpipe",this,
{hasUnpiped:!1});return this}var Sa=E(ua.pipes,Ea);return-1===Sa||(ua.pipes.splice(Sa,1),--ua.pipesCount,1===ua.pipesCount&&(ua.pipes=ua.pipes[0]),Ea.emit("unpipe",this,ya)),this},c.prototype.on=function(Ea,ua){ua=K.prototype.on.call(this,Ea,ua);var ya=this._readableState;return"data"===Ea?(ya.readableListening=0<this.listenerCount("readable"),!1!==ya.flowing&&this.resume()):"readable"===Ea&&(ya.endEmitted||ya.readableListening||(ya.readableListening=ya.needReadable=!0,ya.flowing=!1,ya.emittedReadable=
!1,fa("on readable",ya.length,ya.reading),ya.length?n(this):ya.reading||J.nextTick(e,this))),ua},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(Ea,ua){ua=K.prototype.removeListener.call(this,Ea,ua);return"readable"===Ea&&J.nextTick(b,this),ua},c.prototype.removeAllListeners=function(Ea){var ua=K.prototype.removeAllListeners.apply(this,arguments);return"readable"!==Ea&&void 0!==Ea||J.nextTick(b,this),ua},c.prototype.resume=function(){var Ea=this._readableState;Ea.flowing||
(fa("resume"),Ea.flowing=!Ea.readableListening,Ea.resumeScheduled||(Ea.resumeScheduled=!0,J.nextTick(l,this,Ea)));return Ea.paused=!1,this},c.prototype.pause=function(){return fa("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(fa("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(Ea){var ua=this,ya=this._readableState,Sa=!1,Qb;for(Qb in Ea.on("end",function(){if(fa("wrapped end"),ya.decoder&&
!ya.ended){var mc=ya.decoder.end();mc&&mc.length&&ua.push(mc)}ua.push(null)}),Ea.on("data",function(mc){(fa("wrapped data"),ya.decoder&&(mc=ya.decoder.write(mc)),ya.objectMode&&null==mc)||(ya.objectMode||mc&&mc.length)&&(ua.push(mc)||(Sa=!0,Ea.pause()))}),Ea)void 0===this[Qb]&&"function"==typeof Ea[Qb]&&(this[Qb]=function(mc){return function(){return Ea[mc].apply(Ea,arguments)}}(Qb));for(Qb=0;Qb<ob.length;Qb++)Ea.on(ob[Qb],this.emit.bind(this,ob[Qb]));return this._read=function(mc){fa("wrapped _read",
mc);Sa&&(Sa=!1,Ea.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=function(){return void 0===za&&(za=Cja),za(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},
set:function(Ea){this._readableState&&(this._readableState.flowing=Ea)}}),c._fromList=u,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(Ea,ua){return void 0===Ia&&(Ia=J3),Ia(c,Ea,ua)}),pS}function T3(){function g(W){var ca=this;this.entry=this.next=null;this.finish=function(){var sa=ca.entry;for(ca.entry=null;sa;){var la=sa.callback;W.pendingcb--;la(void 0);sa=sa.next}W.corkedRequestsFree.next=
ca;!0}}function c(){}function h(W,ca,sa){e=e||fJ();W=W||{};"boolean"!=typeof sa&&(sa=ca instanceof e);this.objectMode=!!W.objectMode;sa&&(this.objectMode=this.objectMode||!!W.writableObjectMode);this.highWaterMark=J(this,W,"writableHighWaterMark",sa);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==W.decodeStrings;this.defaultEncoding=W.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=
!1;this.onwrite=function(la){!function(Aa,ib){var ob=Aa._writableState,Ea=ob.sync,ua=ob.writecb;if("function"!=typeof ua)throw new da;(function(ya){ya.writing=!1;ya.writecb=null;ya.length-=ya.writelen;ya.writelen=0}(ob),ib)?!function(ya,Sa,Qb,mc,Yb){--Sa.pendingcb;Qb?(l.nextTick(Yb,mc),l.nextTick(b,ya,Sa),ya._writableState.errorEmitted=!0,ia(ya,mc)):(Yb(mc),ya._writableState.errorEmitted=!0,ia(ya,mc),b(ya,Sa))}(Aa,ob,Ea,ib,ua):((ib=d(ob)||Aa.destroyed)||ob.corked||ob.bufferProcessing||!ob.bufferedRequest||
a(Aa,ob),Ea?l.nextTick(n,Aa,ob,ib,ua):n(Aa,ob,ib,ua))}(ca,la)};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==W.emitClose;this.autoDestroy=!!W.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function f(W){var ca=this instanceof(e=e||fJ());if(!ca&&!E.call(f,this))return new f(W);this._writableState=new h(W,this,ca);this.writable=!0;W&&("function"==typeof W.write&&
(this._write=W.write),"function"==typeof W.writev&&(this._writev=W.writev),"function"==typeof W.destroy&&(this._destroy=W.destroy),"function"==typeof W.final&&(this._final=W.final));u.call(this)}function m(W,ca,sa,la,Aa,ib,ob){ca.writelen=la;ca.writecb=ob;ca.writing=!0;ca.sync=!0;ca.destroyed?ca.onwrite(new ka("write")):sa?W._writev(Aa,ca.onwrite):W._write(Aa,ib,ca.onwrite);ca.sync=!1}function n(W,ca,sa,la){sa||(0===ca.length&&ca.needDrain&&(ca.needDrain=!1,W.emit("drain")),!0);ca.pendingcb--;la();
b(W,ca)}function a(W,ca){ca.bufferProcessing=!0;var sa=ca.bufferedRequest;if(W._writev&&sa&&sa.next){var la=Array(ca.bufferedRequestCount),Aa=ca.corkedRequestsFree;Aa.entry=sa;for(var ib=0,ob=!0;sa;)la[ib]=sa,sa.isBuf||(ob=!1),sa=sa.next,ib+=1;la.allBuffers=ob;m(W,ca,!0,ca.length,la,"",Aa.finish);ca.pendingcb++;ca.lastBufferedRequest=null;Aa.next?(ca.corkedRequestsFree=Aa.next,Aa.next=null):ca.corkedRequestsFree=new g(ca);ca.bufferedRequestCount=0}else{for(;sa&&(la=sa.chunk,m(W,ca,!1,ca.objectMode?
1:la.length,la,sa.encoding,sa.callback),sa=sa.next,ca.bufferedRequestCount--,!ca.writing););null===sa&&(ca.lastBufferedRequest=null)}ca.bufferedRequest=sa;ca.bufferProcessing=!1}function d(W){return W.ending&&0===W.length&&null===W.bufferedRequest&&!W.finished&&!W.writing}function k(W,ca){W._final(function(sa){ca.pendingcb--;sa&&ia(W,sa);ca.prefinished=!0;W.emit("prefinish");b(W,ca)})}function b(W,ca){var sa=d(ca),la;if(la=sa)ca.prefinished||ca.finalCalled||("function"!=typeof W._final||ca.destroyed?
(ca.prefinished=!0,W.emit("prefinish")):(ca.pendingcb++,ca.finalCalled=!0,l.nextTick(k,W,ca))),la=(!0,0===ca.pendingcb&&(ca.finished=!0,W.emit("finish"),ca.autoDestroy));la&&(ca=W._readableState,(!ca||ca.autoDestroy&&ca.endEmitted)&&W.destroy());return sa}if(U3)return qS;U3=!0;var e,l=Li;qS=f;f.WritableState=h;var p={deprecate:L3},u=dJ,x=Rh.Buffer,z=Dja.Uint8Array||function(){},E,G=R3,J=S3.getHighWaterMark,K=cq.codes,T=K.ERR_INVALID_ARG_TYPE,P=K.ERR_METHOD_NOT_IMPLEMENTED,da=K.ERR_MULTIPLE_CALLBACK,
fa=K.ERR_STREAM_CANNOT_PIPE,ka=K.ERR_STREAM_DESTROYED,za=K.ERR_STREAM_NULL_VALUES,Ia=K.ERR_STREAM_WRITE_AFTER_END,N=K.ERR_UNKNOWN_ENCODING,ia=G.errorOrDestroy;return $h(f,u),h.prototype.getBuffer=function(){for(var W=this.bufferedRequest,ca=[];W;)ca.push(W),W=W.next;return ca},function(){try{Object.defineProperty(h.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(W){}}(),"function"==
typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(W){return!!E.call(this,W)||this===f&&W&&W._writableState instanceof h}})):E=function(W){return W instanceof this},f.prototype.pipe=function(){ia(this,new fa)},f.prototype.write=function(W,ca,sa){var la,Aa=this._writableState,ib=!1,ob=!Aa.objectMode&&(la=W,x.isBuffer(la)||la instanceof z);return ob&&!x.isBuffer(W)&&
(W=x.from(W)),"function"==typeof ca&&(sa=ca,ca=null),ob?ca="buffer":ca||(ca=Aa.defaultEncoding),"function"!=typeof sa&&(sa=c),Aa.ending?function(Ea,ua){var ya=new Ia;ia(Ea,ya);l.nextTick(ua,ya)}(this,sa):(ob||function(Ea,ua,ya,Sa){var Qb;return null===ya?Qb=new za:"string"==typeof ya||ua.objectMode||(Qb=new T("chunk",["string","Buffer"],ya)),!Qb||(ia(Ea,Qb),l.nextTick(Sa,Qb),!1)}(this,Aa,W,sa))&&(Aa.pendingcb++,ib=function(Ea,ua,ya,Sa,Qb,mc){if(!ya){var Yb=Sa;ua.objectMode||!1===ua.decodeStrings||
"string"!=typeof Yb||(Yb=x.from(Yb,Qb));Sa!==Yb&&(ya=!0,Qb="buffer",Sa=Yb)}var fc=ua.objectMode?1:Sa.length;ua.length+=fc;(Yb=ua.length<ua.highWaterMark)||(ua.needDrain=!0);ua.writing||ua.corked?(Ea=ua.lastBufferedRequest,ua.lastBufferedRequest={chunk:Sa,encoding:Qb,isBuf:ya,callback:mc,next:null},Ea?Ea.next=ua.lastBufferedRequest:ua.bufferedRequest=ua.lastBufferedRequest,ua.bufferedRequestCount+=1):m(Ea,ua,!1,fc,Sa,Qb,mc);return Yb}(this,Aa,ob,W,ca,sa)),ib},f.prototype.cork=function(){this._writableState.corked++},
f.prototype.uncork=function(){var W=this._writableState;W.corked&&(W.corked--,W.writing||W.corked||W.bufferProcessing||!W.bufferedRequest||a(this,W))},f.prototype.setDefaultEncoding=function(W){if("string"==typeof W&&(W=W.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((W+"").toLowerCase())))throw new N(W);return this._writableState.defaultEncoding=W,this},Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&
this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f.prototype._write=function(W,ca,sa){sa(new P("_write()"))},f.prototype._writev=null,f.prototype.end=function(W,ca,sa){var la=this._writableState;"function"==typeof W?(sa=W,W=null,ca=null):"function"==typeof ca&&(sa=ca,ca=null);null!=W&&this.write(W,ca);la.corked&&(la.corked=1,this.uncork());la.ending||(W=sa,la.ending=!0,b(this,la),
W&&(la.finished?l.nextTick(W):this.once("finish",W)),la.ended=!0,this.writable=!1);return this},Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(W){this._writableState&&(this._writableState.destroyed=W)}}),f.prototype.destroy=G.destroy,f.prototype._undestroy=G.undestroy,f.prototype._destroy=
function(W,ca){ca(W)},qS}function fJ(){function g(b){if(!(this instanceof g))return new g(b);n.call(this,b);a.call(this,b);this.allowHalfOpen=!0;b&&(!1===b.readable&&(this.readable=!1),!1===b.writable&&(this.writable=!1),!1===b.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(h,this)}function h(b){b.end()}if(V3)return rS;V3=!0;var f=Li,m=Object.keys||function(b){var e=[],l;for(l in b)e.push(l);return e};rS=g;var n=zja(),a=T3();$h(g,n);m=
m(a.prototype);for(var d=0;d<m.length;d++){var k=m[d];g.prototype[k]||(g.prototype[k]=a.prototype[k])}return Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),
Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(b){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=b,this._writableState.destroyed=b)}}),rS}function Eja(g,c){var h=this._transformState;h.transforming=!1;var f=h.writecb;if(null===f)return this.emit("error",new Fja);h.writechunk=null;h.writecb=
null;null!=c&&this.push(c);f(g);g=this._readableState;g.reading=!1;(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function mr(g){if(!(this instanceof mr))return new mr(g);gJ.call(this,g);this._transformState={afterTransform:Eja.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;g&&("function"==typeof g.transform&&(this._transform=g.transform),"function"==typeof g.flush&&
(this._flush=g.flush));this.on("prefinish",Gja)}function Gja(){var g=this;"function"!=typeof this._flush||this._readableState.destroyed?W3(this,null,null):this._flush(function(c,h){W3(g,c,h)})}function W3(g,c,h){if(c)return g.emit("error",c);if(null!=h&&g.push(h),g._writableState.length)throw new Hja;if(g._transformState.transforming)throw new Ija;return g.push(null)}function pD(g){if(!(this instanceof pD))return new pD(g);X3.call(this,g)}function Y3(g){if(g)throw g;}function Jja(g,c,h,f){f=function(a){var d=
!1;return function(){d||(d=!0,a.apply(void 0,arguments))}}(f);var m=!1;g.on("close",function(){m=!0});void 0===sS&&(sS=tS);sS(g,{readable:c,writable:h},function(a){if(a)return f(a);m=!0;f()});var n=!1;return function(a){if(!m&&!n)return n=!0,g.setHeader&&"function"==typeof g.abort?g.abort():"function"==typeof g.destroy?g.destroy():(f(a||new Kja("pipe")),void 0)}}function Z3(g){g()}function Lja(g,c){return g.pipe(c)}function hp(){uS.call(this||vS)}function hJ(){}function Bs(g){$3.call(this);this._block=
iJ.allocUnsafe(g);this._blockSize=g;this._blockOffset=0;this._length=[0,0,0,0];this._finalized=!1}function Vz(){a4.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878}function jJ(g,c){return g<<c|g>>>32-c}function bn(g,c,h,f,m,n,a){return jJ(g+(c&h|~c&f)+m+n|0,a)+c|0}function cn(g,c,h,f,m,n,a){return jJ(g+(c&f|h&~f)+m+n|0,a)+c|0}function dn(g,c,h,f,m,n,a){return jJ(g+(c^h^f)+m+n|0,a)+c|0}function en(g,c,h,f,m,n,a){return jJ(g+(h^(c|~f))+m+n|0,a)+c|0}function Wz(){b4.call(this,
64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520}function ip(g,c){return g<<c|g>>>32-c}function Cs(g,c){(this||Fk)._block=c4.alloc(g);(this||Fk)._finalSize=c;(this||Fk)._blockSize=g;(this||Fk)._len=0}function Xz(){this.init();(this||Sh)._w=Mja;d4.call(this||Sh,64,56)}function qD(){this.init();(this||ak)._w=Nja;e4.call(this||ak,64,56)}function rD(){this.init();(this||bk)._w=Oja;f4.call(this||bk,64,56)}function kJ(){this.init();(this||km)._w=Pja;Qja.call(this||
km,64,56)}function Yz(){this.init();(this||jf)._w=Rja;g4.call(this||jf,128,112)}function lm(g,c){return g>>>0<c>>>0?1:0}function lJ(){this.init();(this||Fj)._w=Sja;Tja.call(this||Fj,128,112)}function mm(g){h4.call(this||Yk);(this||Yk).hashMode="string"==typeof g;(this||Yk).hashMode?(this||Yk)[g]=(this||Yk)._finalOrDigest:(this||Yk).final=(this||Yk)._finalOrDigest;(this||Yk)._final&&((this||Yk).__final=(this||Yk)._final,(this||Yk)._final=null);(this||Yk)._decoder=null;(this||Yk)._encoding=null}function mJ(g){i4.call(this,
"digest");this._hash=g}function nJ(g,c){j4.call(this,"digest");"string"==typeof c&&(c=Nw.from(c));this._alg=g;this._key=c;64<c.length?c=g(c):64>c.length&&(c=Nw.concat([c,Uja],64));g=this._ipad=Nw.allocUnsafe(64);for(var h=this._opad=Nw.allocUnsafe(64),f=0;64>f;f++)g[f]=54^c[f],h[f]=92^c[f];this._hash=[g]}function sD(g,c){k4.call(this,"digest");"string"==typeof c&&(c=tD.from(c));var h="sha512"===g||"sha384"===g?128:64;(this._alg=g,this._key=c,c.length>h)?c=("rmd160"===g?new wS:xS(g)).update(c).digest():
c.length<h&&(c=tD.concat([c,Vja],h));for(var f=this._ipad=tD.allocUnsafe(h),m=this._opad=tD.allocUnsafe(h),n=0;n<h;n++)f[n]=54^c[n],m[n]=92^c[n];this._hash="rmd160"===g?new wS:xS(g);this._hash.update(f)}function l4(g,c){if("string"!=typeof g&&!Wja.isBuffer(g))throw new TypeError(c+" must be a buffer or string");}function m4(g,c,h){var f=function(k){function b(e){return Xja(k).update(e).digest()}return"rmd160"===k||"ripemd160"===k?function(e){return(new Yja).update(e).digest()}:"md5"===k?Zja:b}(g),
m="sha512"===g||"sha384"===g?128:64;c.length>m?c=f(c):c.length<m&&(c=dq.concat([c,$ja],m));for(var n=dq.allocUnsafe(m+oJ[g]),a=dq.allocUnsafe(m+oJ[g]),d=0;d<m;d++)n[d]=54^c[d],a[d]=92^c[d];c=dq.allocUnsafe(m+h+4);n.copy(c,0,0,m);(this||eq).ipad1=c;(this||eq).ipad2=n;(this||eq).opad=a;(this||eq).alg=g;(this||eq).blocksize=m;(this||eq).hash=f;(this||eq).size=oJ[g]}function n4(g,c,h,f,m){return uD.importKey("raw",g,{name:"PBKDF2"},!1,["deriveBits"]).then(function(n){return uD.deriveBits({name:"PBKDF2",
salt:c,iterations:h,hash:{name:m}},n,f<<3)}).then(function(n){return Zz.from(n)})}function o4(g,c){if(!g)throw Error(c||"Assertion failed");}function yo(g){this.options=g;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=Array(this.blockSize);this.bufferOff=0}function aka(){this.tmp=Array(2);this.keys=null}function jp(g){p4.call(this,g);var c=new aka;this._desState=c;this.deriveKeys(c,g.key)}function bka(g){cka.equal(g.length,8,"Invalid IV length");this.iv=Array(8);for(var c=0;c<
this.iv.length;c++)this.iv[c]=g[c]}function dka(g,c){eka.equal(c.length,24,"Invalid key length");var h=c.slice(0,8),f=c.slice(8,16);c=c.slice(16,24);this.ciphers="encrypt"===g?[cu.create({type:"encrypt",key:h}),cu.create({type:"decrypt",key:f}),cu.create({type:"encrypt",key:c})]:[cu.create({type:"decrypt",key:c}),cu.create({type:"encrypt",key:f}),cu.create({type:"decrypt",key:h})]}function nr(g){q4.call(this,g);this._edeState=new dka(this.type,this.options.key)}function pJ(g){r4.call(this||qJ);var c=
g.mode.toLowerCase(),h=vD[c];var f=g.decrypt?"decrypt":"encrypt";var m=g.key;Ow.isBuffer(m)||(m=Ow.from(m));"des-ede"!==c&&"des-ede-cbc"!==c||(m=Ow.concat([m,m.slice(0,8)]));g=g.iv;Ow.isBuffer(g)||(g=Ow.from(g));(this||qJ)._des=h.create({key:m,iv:g,type:f})}function s4(g,c,h){var f=c.length,m=fka(c,g._cache);return g._cache=g._cache.slice(f),g._prev=wD.concat([g._prev,h?c:m]),m}function gka(g){return g._prev=g._cipher.encryptBlock(g._prev),g._prev}function yS(g){rJ.isBuffer(g)||(g=rJ.from(g));for(var c=
g.length/4|0,h=Array(c),f=0;f<c;f++)h[f]=g.readUInt32BE(4*f);return h}function zS(g){for(;0<g.length;g++)g[0]=0}function t4(g,c,h,f,m){var n=h[0],a=h[1],d=h[2];h=h[3];var k=g[0]^c[0],b=g[1]^c[1],e=g[2]^c[2];g=g[3]^c[3];for(var l=4,p=1;p<m;p++){var u=n[k>>>24]^a[b>>>16&255]^d[e>>>8&255]^h[255&g]^c[l++];var x=n[b>>>24]^a[e>>>16&255]^d[g>>>8&255]^h[255&k]^c[l++];var z=n[e>>>24]^a[g>>>16&255]^d[k>>>8&255]^h[255&b]^c[l++];var E=n[g>>>24]^a[k>>>16&255]^d[b>>>8&255]^h[255&e]^c[l++];k=u;b=x;e=z;g=E}return u=
(f[k>>>24]<<24|f[b>>>16&255]<<16|f[e>>>8&255]<<8|f[255&g])^c[l++],x=(f[b>>>24]<<24|f[e>>>16&255]<<16|f[g>>>8&255]<<8|f[255&k])^c[l++],z=(f[e>>>24]<<24|f[g>>>16&255]<<16|f[k>>>8&255]<<8|f[255&b])^c[l++],E=(f[g>>>24]<<24|f[k>>>16&255]<<16|f[b>>>8&255]<<8|f[255&e])^c[l++],[u>>>0,x>>>0,z>>>0,E>>>0]}function kp(g){(this||lp)._key=yS(g);this._reset()}function u4(g){var c=$z.allocUnsafe(16);return c.writeUInt32BE(g[0]>>>0,0),c.writeUInt32BE(g[1]>>>0,4),c.writeUInt32BE(g[2]>>>0,8),c.writeUInt32BE(g[3]>>>
0,12),c}function xD(g){(this||Mm).h=g;(this||Mm).state=$z.alloc(16,0);(this||Mm).cache=$z.allocUnsafe(0)}function du(g,c,h,f){v4.call(this||Ih);var m=Zn.alloc(4,0);(this||Ih)._cipher=new hka.AES(c);var n=(this||Ih)._cipher.encryptBlock(m);(this||Ih)._ghash=new w4(n);c=this||Ih;m=h;if(12===m.length)c=(c._finID=Zn.concat([m,Zn.from([0,0,0,1])]),Zn.concat([m,Zn.from([0,0,0,2])]));else{h=new w4(n);n=m.length;var a=n%16;h.update(m);a&&(a=16-a,h.update(Zn.alloc(a,0)));h.update(Zn.alloc(8,0));m=8*n;n=Zn.alloc(8);
n.writeUIntBE(m,0,8);h.update(n);c._finID=h.state;c=Zn.from(c._finID);c=(ika(c),c)}(this||Ih)._prev=Zn.from(c);(this||Ih)._cache=Zn.allocUnsafe(0);(this||Ih)._secCache=Zn.allocUnsafe(0);(this||Ih)._decrypt=f;(this||Ih)._alen=0;(this||Ih)._len=0;(this||Ih)._mode=g;(this||Ih)._authTag=null;(this||Ih)._called=!1}function yD(g,c,h,f){x4.call(this||fq);(this||fq)._cipher=new jka.AES(c);(this||fq)._prev=AS.from(h);(this||fq)._cache=AS.allocUnsafe(0);(this||fq)._secCache=AS.allocUnsafe(0);(this||fq)._decrypt=
f;(this||fq)._mode=g}function zD(g,c,h){y4.call(this||Gj);(this||Gj)._cache=new sJ;(this||Gj)._last=void 0;(this||Gj)._cipher=new kka.AES(c);(this||Gj)._prev=aA.from(h);(this||Gj)._mode=g;(this||Gj)._autopadding=!0}function sJ(){(this||Gj).cache=aA.allocUnsafe(0)}function z4(g,c,h){g=A4[g.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if("string"==typeof h&&(h=aA.from(h)),"GCM"!==g.mode&&h.length!==g.iv)throw new TypeError("invalid iv length "+h.length);if("string"==typeof c&&(c=aA.from(c)),
c.length!==g.key/8)throw new TypeError("invalid key length "+c.length);return"stream"===g.type?new lka(g.module,c,h,!0):"auth"===g.type?new mka(g.module,c,h,!0):new zD(g.module,c,h)}function AD(g,c,h){B4.call(this||pk);(this||pk)._cache=new tJ;(this||pk)._cipher=new nka.AES(c);(this||pk)._prev=Ds.from(h);(this||pk)._mode=g;(this||pk)._autopadding=!0}function tJ(){(this||pk).cache=Ds.allocUnsafe(0)}function C4(g,c,h){g=D4[g.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if("string"==
typeof c&&(c=Ds.from(c)),c.length!==g.key/8)throw new TypeError("invalid key length "+c.length);if("string"==typeof h&&(h=Ds.from(h)),"GCM"!==g.mode&&h.length!==g.iv)throw new TypeError("invalid iv length "+h.length);return"stream"===g.type?new oka(g.module,c,h):"auth"===g.type?new pka(g.module,c,h):new AD(g.module,c,h)}function BS(g,c,h){if(g=g.toLowerCase(),eu[g])return CS.createCipheriv(g,c,h);if(Es[g])return new E4({key:c,iv:h,mode:g});throw new TypeError("invalid suite type");}function DS(g,
c,h){if(g=g.toLowerCase(),eu[g])return CS.createDecipheriv(g,c,h);if(Es[g])return new E4({key:c,iv:h,mode:g,decrypt:!0});throw new TypeError("invalid suite type");}function fu(g){(this||uJ).rand=g}function gu(g){(this||F4).rand=g||new qka.Rand}function ES(g){if(null!==FS)var c=FS;else{c=[2];for(var h=1,f=3;1048576>f;f+=2){for(var m=Math.ceil(Math.sqrt(f)),n=0;n<h&&c[n]<=m&&0!=f%c[n];n++);h!==n&&c[n]<=m||(c[h++]=f)}c=(FS=c,c)}for(h=0;h<c.length;h++)if(0===g.modn(c[h]))return 0===g.cmpn(c[h]);return!0}
function GS(g){var c=fn.mont(g);return 0===HS.toRed(c).redPow(g.subn(1)).fromRed().cmpn(1)}function BD(g,c){if(16>g)return new fn(2===c||5===c?[140,123]:[140,39]);var h,f;for(c=new fn(c);;){for(h=new fn(rka(Math.ceil(g/8)));h.bitLength()>g;)h.ishrn(1);if(h.isEven()&&h.iadd(ska),h.testn(1)||h.iadd(HS),c.cmp(HS)){if(!c.cmp(tka))for(;h.mod(uka).cmp(vka);)h.iadd(G4)}else for(;h.mod(wka).cmp(xka);)h.iadd(G4);if(ES(f=h.shrn(1))&&ES(h)&&GS(f)&&GS(h)&&H4.test(f)&&H4.test(h))return h}}function yka(g,c){return c=
c||"utf8",or.isBuffer(g)||(g=new or(g,c)),(this||fj)._pub=new mp(g),this||fj}function zka(g,c){return c=c||"utf8",or.isBuffer(g)||(g=new or(g,c)),(this||fj)._priv=new mp(g),this||fj}function gq(g,c,h){this.setGenerator(c);(this||fj).__prime=new mp(g);(this||fj)._prime=mp.mont((this||fj).__prime);(this||fj)._primeLen=g.length;(this||fj)._pub=void 0;(this||fj)._priv=void 0;(this||fj)._primeCode=void 0;h?((this||fj).setPublicKey=yka,(this||fj).setPrivateKey=zka):(this||fj)._primeCode=8}function vJ(g,
c){g=new or(g.toArray());return c?g.toString(c):g}function wJ(g,c){var h=I4(c);var f=h.toRed(hu.mont(c.modulus)).redPow(new hu(c.publicExponent)).fromRed();h=h.invm(c.modulus);var m=c.modulus.byteLength();g=(hu.mont(c.modulus),(new hu(g)).mul(f).umod(c.modulus));var n=g.toRed(hu.mont(c.prime1)),a=g.toRed(hu.mont(c.prime2));f=c.coefficient;var d=c.prime1;g=c.prime2;n=n.redPow(c.exponent1);a=a.redPow(c.exponent2);n=n.fromRed();a=a.fromRed();f=n.isub(a).imul(f).umod(d);return f.imul(g),a.iadd(f),new Aka(a.imul(h).umod(c.modulus).toArray(!1,
m))}function I4(g){for(var c=g.modulus.byteLength(),h=new hu(J4(c));0<=h.cmp(g.modulus)||!h.umod(g.prime1)||!h.umod(g.prime2);)h=new hu(J4(c));return h}function K4(g){return 1===g.length?"0"+g:g}function L4(g){for(var c="",h=0;h<g.length;h++)c+=K4(g[h].toString(16));return c}function Pw(g,c){if(g instanceof Pw)return g;this._importDER(g,c)||(Bka(g.r&&g.s,"Signature without r or s"),this.r=new xJ(g.r,16),this.s=new xJ(g.s,16),void 0===g.recoveryParam?this.recoveryParam=null:this.recoveryParam=g.recoveryParam)}
function Cka(){this.place=0}function IS(g,c){var h=g[c.place++];if(!(128&h))return h;h&=15;for(var f=0,m=0,n=c.place;m<h;m++,n++)f<<=8,f|=g[n];return c.place=n,f}function M4(g){for(var c=0,h=g.length-1;!(g[c]||128&g[c+1])&&c<h;)c++;return 0===c?g:g.slice(c)}function JS(g,c){if(128>c)return g.push(c),void 0;var h=1+(Math.log(c)/Math.LN2>>>3);for(g.push(128|h);--h;)g.push(c>>>(h<<3)&255);g.push(c)}function N4(g){return(g>>>24|g>>>8&65280|g<<8&16711680|(255&g)<<24)>>>0}function O4(g){return 1===g.length?
"0"+g:g}function P4(g){return 7===g.length?"0"+g:6===g.length?"00"+g:5===g.length?"000"+g:4===g.length?"0000"+g:3===g.length?"00000"+g:2===g.length?"000000"+g:1===g.length?"0000000"+g:g}function yJ(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}function np(){if(!(this instanceof
np))return new np;Q4.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=Dka;this.W=Array(160)}function hq(){if(!(this instanceof hq))return new hq;R4.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];this.k=Eka;this.W=Array(64)}function pr(){if(!(this instanceof pr))return new pr;S4.call(this);
this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=Array(80)}function Fs(){if(!(this instanceof Fs))return new Fs;T4.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}function Gs(){if(!(this instanceof Gs))return new Gs;U4.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}function qr(){if(!(this instanceof
qr))return new qr;V4.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}function W4(g,c,h,f){return 15>=g?c^h^f:31>=g?c&h|~c&f:47>=g?(c|~h)^f:63>=g?c&f|h&~f:c^(h|~f)}function bA(g,c,h){if(!(this instanceof bA))return new bA(g,c,h);this.Hash=g;this.blockSize=g.blockSize/8;this.outSize=g.outSize/8;this.outer=this.inner=null;this._init(Fka.toArray(c,h))}function Hs(g){if(!(this instanceof Hs))return new Hs(g);this.hash=g.hash;this.predResist=!!g.predResist;
this.outLen=this.hash.outSize;this.minEntropy=g.minEntropy||this.hash.hmacStrength;this.V=this.K=this.reseedInterval=this._reseed=null;var c=Qw.toArray(g.entropy,g.entropyEnc||"hex"),h=Qw.toArray(g.nonce,g.nonceEnc||"hex");g=Qw.toArray(g.pers,g.persEnc||"hex");X4(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(c,h,g)}function iq(g,c){this.type=g;this.p=new Rw(c.p,16);this.red=c.prime?Rw.red(c.prime):Rw.mont(this.p);this.zero=(new Rw(0)).toRed(this.red);
this.one=(new Rw(1)).toRed(this.red);this.two=(new Rw(2)).toRed(this.red);this.n=c.n&&new Rw(c.n,16);this.g=c.g&&this.pointFromJSON(c.g,c.gRed);this._wnafT1=Array(4);this._wnafT2=Array(4);this._wnafT3=Array(4);this._wnafT4=Array(4);this._bitLength=this.n?this.n.bitLength():0;g=this.n&&this.p.div(this.n);!g||0<g.cmpn(100)?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function op(g,c){this.curve=g;this.type=c;this.precomputed=null}function pp(g){cA.call(this,"short",g);this.a=
(new Zk(g.a,16)).toRed(this.red);this.b=(new Zk(g.b,16)).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=0===this.a.fromRed().cmpn(0);this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3);this.endo=this._getEndomorphism(g);this._endoWnafT1=Array(4);this._endoWnafT2=Array(4)}function nm(g,c,h,f){cA.BasePoint.call(this,g,"affine");null===c&&null===h?(this.x=null,this.y=null,this.inf=!0):(this.x=new Zk(c,16),this.y=new Zk(h,16),f&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),
this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Nm(g,c,h,f){cA.BasePoint.call(this,g,"jacobian");null===c&&null===h&&null===f?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Zk(0)):(this.x=new Zk(c,16),this.y=new Zk(h,16),this.z=new Zk(f,16));this.x.red||(this.x=this.x.toRed(this.curve.red));this.y.red||(this.y=this.y.toRed(this.curve.red));this.z.red||(this.z=this.z.toRed(this.curve.red));this.zOne=this.z===this.curve.one}
function dA(g){zJ.call(this,"mont",g);this.a=(new eA(g.a,16)).toRed(this.red);this.b=(new eA(g.b,16)).toRed(this.red);this.i4=(new eA(4)).toRed(this.red).redInvm();this.two=(new eA(2)).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}function om(g,c,h){zJ.BasePoint.call(this,g,"projective");null===c&&null===h?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new eA(c,16),this.z=new eA(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}
function rr(g){this.extended=this.mOneA=(this.twisted=1!=(0|g.a))&&-1==(0|g.a);AJ.call(this,"edwards",g);this.a=(new Is(g.a,16)).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=(new Is(g.c,16)).toRed(this.red);this.c2=this.c.redSqr();this.d=(new Is(g.d,16)).toRed(this.red);this.dd=this.d.redAdd(this.d);Gka(!this.twisted||0===this.c.fromRed().cmpn(1));this.oneC=1==(0|g.c)}function vk(g,c,h,f,m){AJ.BasePoint.call(this,g,"projective");null===c&&null===h&&null===f?(this.x=this.curve.zero,this.y=
this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Is(c,16),this.y=new Is(h,16),this.z=f?new Is(f,16):this.curve.one,this.t=m&&new Is(m,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}
function Y4(g){"short"===g.type?this.curve=new KS.short(g):"edwards"===g.type?this.curve=new KS.edwards(g):this.curve=new KS.mont(g);this.g=this.curve.g;this.n=this.curve.n;this.hash=g.hash;Z4(this.g.validate(),"Invalid curve");Z4(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function iu(g,c){Object.defineProperty(LS,g,{configurable:!0,enumerable:!0,get:function(){var h=new Y4(c);return Object.defineProperty(LS,g,{configurable:!0,enumerable:!0,value:h}),h}})}function pm(g,c){this.ec=
g;this.pub=this.priv=null;c.priv&&this._importPrivate(c.priv,c.privEnc);c.pub&&this._importPublic(c.pub,c.pubEnc)}function qp(g){if(!(this instanceof qp))return new qp(g);"string"==typeof g&&($4(MS.hasOwnProperty(g),"Unknown curve "+g),g=MS[g]);g instanceof MS.PresetCurve&&(g={curve:g});this.curve=g.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=g.curve.g;this.g.precompute(g.curve.n.bitLength()+1);this.hash=g.hash||g.curve.hash}function Ol(g,c){this.eddsa=g;this._secret=
a5(c.secret);g.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=a5(c.pub)}function ju(g,c){this.eddsa=g;"object"!=typeof c&&(c=Hka(c));Array.isArray(c)&&(c={R:c.slice(0,g.encodingLength),S:c.slice(g.encodingLength)});Ika(c.R&&c.S,"Signature without R or S");g.isPoint(c.R)&&(this._R=c.R);c.S instanceof Jka&&(this._S=c.S);this._Rencoded=Array.isArray(c.R)?c.R:c.Rencoded;this._Sencoded=Array.isArray(c.S)?c.S:c.Sencoded}function $n(g){if(Kka("ed25519"===g,"only tested with ed25519 so far"),!(this instanceof
$n))return new $n(g);this.curve=g=Lka[g].curve;this.g=g.g;this.g.precompute(g.n.bitLength()+1);this.pointClass=g.point().constructor;this.encodingLength=Math.ceil(g.n.bitLength()/8);this.hash=Mka.sha512}function rp(g){(this||Pl)._reporterState={obj:null,path:[],options:g||{},errors:[]}}function fA(g,c){(this||Pl).path=g;this.rethrow(c)}function b5(){function g(n,a){if(f.call(this||sh,a),!m.isBuffer(n))return this.error("Input not Buffer"),void 0;(this||sh).base=n;(this||sh).offset=0;(this||sh).length=
n.length}function c(n,a){if(Array.isArray(n))(this||sh).length=0,(this||sh).value=n.map(function(d){return d instanceof c||(d=new c(d,a)),(this||sh).length+=d.length,d},this||sh);else if("number"==typeof n){if(!(0<=n&&255>=n))return a.error("non-byte EncoderBuffer value");(this||sh).value=n;(this||sh).length=1}else if("string"==typeof n)(this||sh).value=n,(this||sh).length=m.byteLength(n);else{if(!m.isBuffer(n))return a.error("Unsupported type: "+typeof n);(this||sh).value=n;(this||sh).length=n.length}}
if(c5)return BJ;c5=!0;var h=$h,f=CD().Reporter,m=Rh.Buffer;return h(g,f),BJ.DecoderBuffer=g,g.prototype.save=function(){return{offset:(this||sh).offset,reporter:f.prototype.save.call(this||sh)}},g.prototype.restore=function(n){var a=new g((this||sh).base);return a.offset=n.offset,a.length=(this||sh).offset,(this||sh).offset=n.offset,f.prototype.restore.call(this||sh,n.reporter),a},g.prototype.isEmpty=function(){return(this||sh).offset===(this||sh).length},g.prototype.readUInt8=function(n){return(this||
sh).offset+1<=(this||sh).length?(this||sh).base.readUInt8((this||sh).offset++,!0):this.error(n||"DecoderBuffer overrun")},g.prototype.skip=function(n,a){if(!((this||sh).offset+n<=(this||sh).length))return this.error(a||"DecoderBuffer overrun");a=new g((this||sh).base);return a._reporterState=(this||sh)._reporterState,a.offset=(this||sh).offset,a.length=(this||sh).offset+n,(this||sh).offset+=n,a},g.prototype.raw=function(n){return(this||sh).base.slice(n?n.offset:(this||sh).offset,(this||sh).length)},
BJ.EncoderBuffer=c,c.prototype.join=function(n,a){return n||(n=new m((this||sh).length)),a||(a=0),0===(this||sh).length||(Array.isArray((this||sh).value)?(this||sh).value.forEach(function(d){d.join(n,a);a+=d.length}):("number"==typeof(this||sh).value?n[a]=(this||sh).value:"string"==typeof(this||sh).value?n.write((this||sh).value,a):m.isBuffer((this||sh).value)&&(this||sh).value.copy(n,a),a+=(this||sh).length)),n},BJ}function CD(){if(d5)return NS;d5=!0;var g=NS;return g.Reporter=e5.Reporter,g.DecoderBuffer=
b5().DecoderBuffer,g.EncoderBuffer=b5().EncoderBuffer,g.Node=function(){function c(b,e){var l={};(this||Ig)._baseState=l;l.enc=b;l.parent=e||null;l.children=null;l.tag=null;l.args=null;l.reverseArgs=null;l.choice=null;l.optional=!1;l.any=!1;l.obj=!1;l.use=null;l.useDecoder=null;l.key=null;l.default=null;l.explicit=null;l.implicit=null;l.contains=null;l.parent||(l.children=[],this._wrap())}if(f5)return OS;f5=!0;var h=CD().Reporter,f=CD().EncoderBuffer,m=CD().DecoderBuffer,n=sp,a="seq seqof set setof objid bool gentime utctime null_ enum int objDesc bitstr bmpstr charstr genstr graphstr ia5str iso646str numstr octstr printstr t61str unistr utf8str videostr".split(" "),
d="key obj use optional explicit implicit def choice any contains".split(" ").concat(a);OS=c;var k="enc parent children tag args reverseArgs choice optional any obj use alteredUse key default explicit implicit contains".split(" ");return c.prototype.clone=function(){var b=(this||Ig)._baseState,e={};k.forEach(function(p){e[p]=b[p]});var l=new (this||Ig).constructor(e.parent);return l._baseState=e,l},c.prototype._wrap=function(){var b=(this||Ig)._baseState;d.forEach(function(e){(this||Ig)[e]=function(){var l=
new (this||Ig).constructor(this||Ig);return b.children.push(l),l[e].apply(l,arguments)}},this||Ig)},c.prototype._init=function(b){var e=(this||Ig)._baseState;n(null===e.parent);b.call(this||Ig);e.children=e.children.filter(function(l){return l._baseState.parent===(this||Ig)},this||Ig);n.equal(e.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(b){var e=(this||Ig)._baseState,l=b.filter(function(p){return p instanceof(this||Ig).constructor},this||Ig);b=b.filter(function(p){return!(p instanceof
(this||Ig).constructor)},this||Ig);0!==l.length&&(n(null===e.children),e.children=l,l.forEach(function(p){p._baseState.parent=this||Ig},this||Ig));0!==b.length&&(n(null===e.args),e.args=b,e.reverseArgs=b.map(function(p){if("object"!=typeof p||p.constructor!==Object)return p;var u={};return Object.keys(p).forEach(function(x){x==(0|x)&&(x|=0);u[p[x]]=x}),u}))},"_peekTag _decodeTag _use _decodeStr _decodeObjid _decodeTime _decodeNull _decodeInt _decodeBool _decodeList _encodeComposite _encodeStr _encodeObjid _encodeTime _encodeNull _encodeInt _encodeBool".split(" ").forEach(function(b){c.prototype[b]=
function(){throw Error(b+" not implemented for encoding: "+(this||Ig)._baseState.enc);}}),a.forEach(function(b){c.prototype[b]=function(){var e=(this||Ig)._baseState,l=Array.prototype.slice.call(arguments);return n(null===e.tag),e.tag=b,this._useArgs(l),this||Ig}}),c.prototype.use=function(b){n(b);var e=(this||Ig)._baseState;return n(null===e.use),e.use=b,this||Ig},c.prototype.optional=function(){return(this||Ig)._baseState.optional=!0,this||Ig},c.prototype.def=function(b){var e=(this||Ig)._baseState;
return n(null===e.default),e.default=b,e.optional=!0,this||Ig},c.prototype.explicit=function(b){var e=(this||Ig)._baseState;return n(null===e.explicit&&null===e.implicit),e.explicit=b,this||Ig},c.prototype.implicit=function(b){var e=(this||Ig)._baseState;return n(null===e.explicit&&null===e.implicit),e.implicit=b,this||Ig},c.prototype.obj=function(){var b=(this||Ig)._baseState,e=Array.prototype.slice.call(arguments);return b.obj=!0,0!==e.length&&this._useArgs(e),this||Ig},c.prototype.key=function(b){var e=
(this||Ig)._baseState;return n(null===e.key),e.key=b,this||Ig},c.prototype.any=function(){return(this||Ig)._baseState.any=!0,this||Ig},c.prototype.choice=function(b){var e=(this||Ig)._baseState;return n(null===e.choice),e.choice=b,this._useArgs(Object.keys(b).map(function(l){return b[l]})),this||Ig},c.prototype.contains=function(b){var e=(this||Ig)._baseState;return n(null===e.use),e.contains=b,this||Ig},c.prototype._decode=function(b,e){var l=(this||Ig)._baseState;if(null===l.parent)return b.wrapResult(l.children[0]._decode(b,
e));var p,u=l.default,x=!0,z=null;if(null!==l.key&&(z=b.enterKey(l.key)),l.optional){var E=null;if(null!==l.explicit?E=l.explicit:null!==l.implicit?E=l.implicit:null!==l.tag&&(E=l.tag),null!==E||l.any){if(x=this._peekTag(b,E,l.any),b.isError(x))return x}else{var G=b.save();try{null===l.choice?this._decodeGeneric(l.tag,b,e):this._decodeChoice(b,e),x=!0}catch(K){x=!1}b.restore(G)}}if(l.obj&&x&&(p=b.enterObject()),x){if(null!==l.explicit){E=this._decodeTag(b,l.explicit);if(b.isError(E))return E;b=E}E=
b.offset;if(null===l.use&&null===l.choice){l.any&&(G=b.save());var J=this._decodeTag(b,null!==l.implicit?l.implicit:l.tag,l.any);if(b.isError(J))return J;l.any?u=b.raw(G):b=J}if(e&&e.track&&null!==l.tag&&e.track(b.path(),E,b.length,"tagged"),e&&e.track&&null!==l.tag&&e.track(b.path(),b.offset,b.length,"content"),u=l.any?u:null===l.choice?this._decodeGeneric(l.tag,b,e):this._decodeChoice(b,e),b.isError(u))return u;(l.any||null!==l.choice||null===l.children||l.children.forEach(function(K){K._decode(b,
e)}),!l.contains||"octstr"!==l.tag&&"bitstr"!==l.tag)||(u=new m(u),u=this._getUse(l.contains,b._reporterState.obj)._decode(u,e))}return l.obj&&x&&(u=b.leaveObject(p)),null===l.key||null===u&&!0!==x?null!==z&&b.exitKey(z):b.leaveKey(z,l.key,u),u},c.prototype._decodeGeneric=function(b,e,l){var p=(this||Ig)._baseState;return"seq"===b||"set"===b?null:"seqof"===b||"setof"===b?this._decodeList(e,b,p.args[0],l):/str$/.test(b)?this._decodeStr(e,b,l):"objid"===b&&p.args?this._decodeObjid(e,p.args[0],p.args[1],
l):"objid"===b?this._decodeObjid(e,null,null,l):"gentime"===b||"utctime"===b?this._decodeTime(e,b,l):"null_"===b?this._decodeNull(e,l):"bool"===b?this._decodeBool(e,l):"objDesc"===b?this._decodeStr(e,b,l):"int"===b||"enum"===b?this._decodeInt(e,p.args&&p.args[0],l):null!==p.use?this._getUse(p.use,e._reporterState.obj)._decode(e,l):e.error("unknown tag: "+b)},c.prototype._getUse=function(b,e){var l=(this||Ig)._baseState;return l.useDecoder=this._use(b,e),n(null===l.useDecoder._baseState.parent),l.useDecoder=
l.useDecoder._baseState.children[0],l.implicit!==l.useDecoder._baseState.implicit&&(l.useDecoder=l.useDecoder.clone(),l.useDecoder._baseState.implicit=l.implicit),l.useDecoder},c.prototype._decodeChoice=function(b,e){var l=(this||Ig)._baseState,p=null,u=!1;return Object.keys(l.choice).some(function(x){var z=b.save(),E=l.choice[x];try{var G=E._decode(b,e);if(b.isError(G))return!1;p={type:x,value:G};u=!0}catch(J){return b.restore(z),!1}return!0},this||Ig),u?p:b.error("Choice not matched")},c.prototype._createEncoderBuffer=
function(b){return new f(b,(this||Ig).reporter)},c.prototype._encode=function(b,e,l){var p=(this||Ig)._baseState;if(null===p.default||p.default!==b)if(b=this._encodeValue(b,e,l),void 0!==b&&!this._skipDefault(b,e,l))return b},c.prototype._encodeValue=function(b,e,l){var p=(this||Ig)._baseState;if(null===p.parent)return p.children[0]._encode(b,e||new h);var u=null;if((this||Ig).reporter=e,p.optional&&void 0===b){if(null===p.default)return;b=p.default}var x=null,z=!1;if(p.any)u=this._createEncoderBuffer(b);
else if(p.choice)u=this._encodeChoice(b,e);else if(p.contains)x=this._getUse(p.contains,l)._encode(b,e),z=!0;else if(p.children)x=p.children.map(function(G){if("null_"===G._baseState.tag)return G._encode(null,e,b);if(null===G._baseState.key)return e.error("Child should have a key");var J=e.enterKey(G._baseState.key);if("object"!=typeof b)return e.error("Child expected, but input is not object");G=G._encode(b[G._baseState.key],e,b);return e.leaveKey(J),G},this||Ig).filter(function(G){return G}),x=
this._createEncoderBuffer(x);else if("seqof"===p.tag||"setof"===p.tag){if(!p.args||1!==p.args.length)return e.error("Too many args for : "+p.tag);if(!Array.isArray(b))return e.error("seqof/setof, but data is not Array");x=this.clone();x._baseState.implicit=null;x=this._createEncoderBuffer(b.map(function(G){return this._getUse((this||Ig)._baseState.args[0],b)._encode(G,e)},x))}else null!==p.use?u=this._getUse(p.use,l)._encode(b,e):(x=this._encodePrimitive(p.tag,b),z=!0);if(!p.any&&null===p.choice){l=
null!==p.implicit?p.implicit:p.tag;var E=null===p.implicit?"universal":"context";null===l?null===p.use&&e.error("Tag could be omitted only for .use()"):null===p.use&&(u=this._encodeComposite(l,z,E,x))}return null!==p.explicit&&(u=this._encodeComposite(p.explicit,!1,"context",u)),u},c.prototype._encodeChoice=function(b,e){var l=(this||Ig)._baseState,p=l.choice[b.type];return p||n(!1,b.type+" not found in "+JSON.stringify(Object.keys(l.choice))),p._encode(b.value,e)},c.prototype._encodePrimitive=function(b,
e){var l=(this||Ig)._baseState;if(/str$/.test(b))return this._encodeStr(e,b);if("objid"===b&&l.args)return this._encodeObjid(e,l.reverseArgs[0],l.args[1]);if("objid"===b)return this._encodeObjid(e,null,null);if("gentime"===b||"utctime"===b)return this._encodeTime(e,b);if("null_"===b)return this._encodeNull();if("int"===b||"enum"===b)return this._encodeInt(e,l.args&&l.reverseArgs[0]);if("bool"===b)return this._encodeBool(e);if("objDesc"===b)return this._encodeStr(e,b);throw Error("Unsupported tag: "+
b);},c.prototype._isNumstr=function(b){return/^[0-9 ]*$/.test(b)},c.prototype._isPrintstr=function(b){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(b)},OS}(),NS}function g5(){if(h5)return PS;h5=!0;var g=PS;return g._reverse=function(c){var h={};return Object.keys(c).forEach(function(f){(0|f)==f&&(f|=0);h[c[f]]=f}),h},g.der=function(){if(i5)return ku;i5=!0;var c=g5();return ku.tagClass={0:"universal",1:"application",2:"context",3:"private"},ku.tagClassByName=c._reverse(ku.tagClass),ku.tag={0:"end",
1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},ku.tagByName=c._reverse(ku.tag),ku}(),PS}function j5(){function g(b){(this||lu).enc="der";(this||lu).name=b.name;(this||lu).entity=b;(this||lu).tree=new c;(this||lu).tree._init(b.body)}
function c(b){a.Node.call(this||lu,"der",b)}function h(b,e){var l=b.readUInt8(e);if(b.isError(l))return l;var p=k.tagClass[l>>6],u=0==(32&l);if(31==(31&l)){var x=l;for(l=0;128==(128&x);){if(x=b.readUInt8(e),b.isError(x))return x;l<<=7;l|=127&x}}else l&=31;return{cls:p,primitive:u,tag:l,tagStr:k.tag[l]}}function f(b,e,l){var p=b.readUInt8(l);if(b.isError(p))return p;if(!e&&128===p)return null;if(0==(128&p))return p;e=127&p;if(4<e)return b.error("length octect is too long");for(var u=p=0;u<e;u++){p<<=
8;var x=b.readUInt8(l);if(b.isError(x))return x;p|=x}return p}if(k5)return QS;k5=!0;var m=$h,n=CJ(),a=n.base,d=n.bignum,k=n.constants.der;return QS=g,g.prototype.decode=function(b,e){return b instanceof a.DecoderBuffer||(b=new a.DecoderBuffer(b,e)),(this||lu).tree._decode(b,e)},m(c,a.Node),c.prototype._peekTag=function(b,e,l){if(b.isEmpty())return!1;var p=b.save(),u=h(b,'Failed to peek tag: "'+e+'"');return b.isError(u)?u:(b.restore(p),u.tag===e||u.tagStr===e||u.tagStr+"of"===e||l)},c.prototype._decodeTag=
function(b,e,l){var p=h(b,'Failed to decode tag of "'+e+'"');if(b.isError(p))return p;var u=f(b,p.primitive,'Failed to get length of "'+e+'"');if(b.isError(u))return u;if(!l&&p.tag!==e&&p.tagStr!==e&&p.tagStr+"of"!==e)return b.error('Failed to match tag: "'+e+'"');if(p.primitive||null!==u)return b.skip(u,'Failed to match body of: "'+e+'"');l=b.save();p=this._skipUntilEnd(b,'Failed to skip indefinite length body: "'+(this||lu).tag+'"');return b.isError(p)?p:(u=b.offset-l.offset,b.restore(l),b.skip(u,
'Failed to match body of: "'+e+'"'))},c.prototype._skipUntilEnd=function(b,e){for(;;){var l=h(b,e);if(b.isError(l))return l;var p,u=f(b,l.primitive,e);if(b.isError(u))return u;if(p=l.primitive||null!==u?b.skip(u):this._skipUntilEnd(b,e),b.isError(p))return p;if("end"===l.tagStr)break}},c.prototype._decodeList=function(b,e,l,p){for(e=[];!b.isEmpty();){var u=this._peekTag(b,"end");if(b.isError(u))return u;var x=l.decode(b,"der",p);if(b.isError(x)&&u)break;e.push(x)}return e},c.prototype._decodeStr=
function(b,e){if("bitstr"===e)return e=b.readUInt8(),b.isError(e)?e:{unused:e,data:b.raw()};if("bmpstr"===e){e=b.raw();if(1==e.length%2)return b.error("Decoding of string type: bmpstr length mismatch");b="";for(var l=0;l<e.length/2;l++)b+=String.fromCharCode(e.readUInt16BE(2*l));return b}return"numstr"===e?(e=b.raw().toString("ascii"),this._isNumstr(e)?e:b.error("Decoding of string type: numstr unsupported characters")):"octstr"===e||"objDesc"===e?b.raw():"printstr"===e?(e=b.raw().toString("ascii"),
this._isPrintstr(e)?e:b.error("Decoding of string type: printstr unsupported characters")):/str$/.test(e)?b.raw().toString():b.error("Decoding of string type: "+e+" unsupported")},c.prototype._decodeObjid=function(b,e,l){for(var p=[],u=0;!b.isEmpty();){var x=b.readUInt8();u<<=7;u|=127&x;0==(128&x)&&(p.push(u),u=0)}128&x&&p.push(u);b=p[0]/40|0;u=p[0]%40;if(l=l?p:[b,u].concat(p.slice(1)),e)p=e[l.join(" ")],void 0===p&&(p=e[l.join(".")]),void 0!==p&&(l=p);return l},c.prototype._decodeTime=function(b,
e){var l=b.raw().toString();if("gentime"===e){b=0|l.slice(0,4);e=0|l.slice(4,6);var p=0|l.slice(6,8),u=0|l.slice(8,10),x=0|l.slice(10,12);l=0|l.slice(12,14)}else{if("utctime"!==e)return b.error("Decoding "+e+" time is not supported yet");b=0|l.slice(0,2);e=0|l.slice(2,4);p=0|l.slice(4,6);u=0|l.slice(6,8);x=0|l.slice(8,10);l=0|l.slice(10,12);b=70>b?2E3+b:1900+b}return Date.UTC(b,e-1,p,u,x,l,0)},c.prototype._decodeNull=function(b){return null},c.prototype._decodeBool=function(b){var e=b.readUInt8();
return b.isError(e)?e:0!==e},c.prototype._decodeInt=function(b,e){b=b.raw();b=new d(b);return e&&(b=e[b.toString(10)]||b),b},c.prototype._use=function(b,e){return"function"==typeof b&&(b=b(e)),b._getDecoder("der").tree},QS}function Nka(){if(l5)return RS;l5=!0;var g=RS;return g.der=j5(),g.pem=function(){function c(n){m.call(this||SS,n);(this||SS).enc="pem"}if(m5)return TS;m5=!0;var h=$h,f=Rh.Buffer,m=j5();return h(c,m),TS=c,c.prototype.decode=function(n,a){n=n.toString().split(/[\r\n]+/g);for(var d=
a.label.toUpperCase(),k=/^-----(BEGIN|END) ([^-]+)-----$/,b=-1,e=-1,l=0;l<n.length;l++){var p=n[l].match(k);if(null!==p&&p[2]===d){if(-1!==b){if("END"!==p[1])break;e=l;break}if("BEGIN"!==p[1])break;b=l}}if(-1===b||-1===e)throw Error("PEM section not found for: "+d);n=n.slice(b+1,e).join("");n.replace(/[^a-z0-9\+\/=]+/gi,"");n=new f(n,"base64");return m.prototype.decode.call(this||SS,n,a)},TS}(),RS}function n5(){function g(k){(this||Ql).enc="der";(this||Ql).name=k.name;(this||Ql).entity=k;(this||Ql).tree=
new c;(this||Ql).tree._init(k.body)}function c(k){a.Node.call(this||Ql,"der",k)}function h(k){return 10>k?"0"+k:k}if(o5)return US;o5=!0;var f=$h,m=Rh.Buffer,n=CJ(),a=n.base,d=n.constants.der;return US=g,g.prototype.encode=function(k,b){return(this||Ql).tree._encode(k,b).join()},f(c,a.Node),c.prototype._encodeComposite=function(k,b,e,l){var p;a:{var u=k;k=(this||Ql).reporter;"seqof"===u?u="seq":"setof"===u&&(u="set");if(d.tagByName.hasOwnProperty(u))u=d.tagByName[u];else if("number"!=typeof u||(0|
u)!==u){e=k.error("Unknown tag: "+u);break a}31<=u?e=k.error("Multi-octet tag encoding unsupported"):(b||(u|=32),e=u|d.tagClassByName[e||"universal"]<<6)}if(128>l.length)return(p=new m(2))[0]=e,p[1]=l.length,this._createEncoderBuffer([p,l]);k=1;for(b=l.length;256<=b;b>>=8)k++;(p=new m(2+k))[0]=e;p[1]=128|k;b=1+k;for(e=l.length;0<e;b--,e>>=8)p[b]=255&e;return this._createEncoderBuffer([p,l])},c.prototype._encodeStr=function(k,b){if("bitstr"===b)return this._createEncoderBuffer([0|k.unused,k.data]);
if("bmpstr"===b){b=new m(2*k.length);for(var e=0;e<k.length;e++)b.writeUInt16BE(k.charCodeAt(e),2*e);return this._createEncoderBuffer(b)}return"numstr"===b?this._isNumstr(k)?this._createEncoderBuffer(k):(this||Ql).reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===b?this._isPrintstr(k)?this._createEncoderBuffer(k):(this||Ql).reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):
/str$/.test(b)||"objDesc"===b?this._createEncoderBuffer(k):(this||Ql).reporter.error("Encoding of string type: "+b+" unsupported")},c.prototype._encodeObjid=function(k,b,e){if("string"==typeof k){if(!b)return(this||Ql).reporter.error("string objid given, but no values map found");if(!b.hasOwnProperty(k))return(this||Ql).reporter.error("objid not found in values map");k=b[k].split(/[\s\.]+/g);for(b=0;b<k.length;b++)k[b]|=0}else if(Array.isArray(k))for(k=k.slice(),b=0;b<k.length;b++)k[b]|=0;if(!Array.isArray(k))return(this||
Ql).reporter.error("objid() should be either array or string, got: "+JSON.stringify(k));if(!e){if(40<=k[1])return(this||Ql).reporter.error("Second objid identifier OOB");k.splice(0,2,40*k[0]+k[1])}var l=0;for(b=0;b<k.length;b++)for(e=k[b],l++;128<=e;e>>=7)l++;l=new m(l);var p=l.length-1;for(b=k.length-1;0<=b;b--)for(e=k[b],l[p--]=127&e;0<(e>>=7);)l[p--]=128|127&e;return this._createEncoderBuffer(l)},c.prototype._encodeTime=function(k,b){var e;k=new Date(k);return"gentime"===b?e=[h(k.getFullYear()),
h(k.getUTCMonth()+1),h(k.getUTCDate()),h(k.getUTCHours()),h(k.getUTCMinutes()),h(k.getUTCSeconds()),"Z"].join(""):"utctime"===b?e=[h(k.getFullYear()%100),h(k.getUTCMonth()+1),h(k.getUTCDate()),h(k.getUTCHours()),h(k.getUTCMinutes()),h(k.getUTCSeconds()),"Z"].join(""):(this||Ql).reporter.error("Encoding "+b+" time is not supported yet"),this._encodeStr(e,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(k,b){if("string"==typeof k){if(!b)return(this||
Ql).reporter.error("String int or enum given, but no values map");if(!b.hasOwnProperty(k))return(this||Ql).reporter.error("Values map doesn't contain: "+JSON.stringify(k));k=b[k]}"number"==typeof k||m.isBuffer(k)||(b=k.toArray(),!k.sign&&128&b[0]&&b.unshift(0),k=new m(b));if(m.isBuffer(k)){var e=k.length;0===k.length&&e++;e=new m(e);return k.copy(e),0===k.length&&(e[0]=0),this._createEncoderBuffer(e)}if(128>k)return this._createEncoderBuffer(k);if(256>k)return this._createEncoderBuffer([0,k]);e=1;
for(b=k;256<=b;b>>=8)e++;for(b=(e=Array(e)).length-1;0<=b;b--)e[b]=255&k,k>>=8;return 128&e[0]&&e.unshift(0),this._createEncoderBuffer(new m(e))},c.prototype._encodeBool=function(k){return this._createEncoderBuffer(k?255:0)},c.prototype._use=function(k,b){return"function"==typeof k&&(k=k(b)),k._getEncoder("der").tree},c.prototype._skipDefault=function(k,b,e){var l=(this||Ql)._baseState;if(null===l.default)return!1;k=k.join();if(void 0===l.defaultBuffer&&(l.defaultBuffer=this._encodeValue(l.default,
b,e).join()),k.length!==l.defaultBuffer.length)return!1;for(b=0;b<k.length;b++)if(k[b]!==l.defaultBuffer[b])return!1;return!0},US}function Oka(){if(p5)return VS;p5=!0;var g=VS;return g.der=n5(),g.pem=function(){function c(m){f.call(this||WS,m);(this||WS).enc="pem"}if(q5)return XS;q5=!0;var h=$h,f=n5();return h(c,f),XS=c,c.prototype.encode=function(m,n){m=f.prototype.encode.call(this||WS,m).toString("base64");for(var a=["-----BEGIN "+n.label+"-----"],d=0;d<m.length;d+=64)a.push(m.slice(d,d+64));return a.push("-----END "+
n.label+"-----"),a.join("\n")},XS}(),VS}function CJ(){if(r5)return YS;r5=!0;var g=YS;return g.bignum=ul,g.define=function(){function c(m,n){(this||zo).name=m;(this||zo).body=n;(this||zo).decoders={};(this||zo).encoders={}}if(s5)return ZS;s5=!0;var h=CJ(),f=$h;return ZS.define=function(m,n){return new c(m,n)},c.prototype._createNamed=function(m){try{var n=Sw.runInThisContext("(function "+(this||zo).name+"(entity) {\n  this._initNamed(entity);\n})")}catch(a){n=function(d){this._initNamed(d)}}return f(n,
m),n.prototype._initNamed=function(a){m.call(this||zo,a)},new n(this||zo)},c.prototype._getDecoder=function(m){return m=m||"der",(this||zo).decoders.hasOwnProperty(m)||((this||zo).decoders[m]=this._createNamed(h.decoders[m])),(this||zo).decoders[m]},c.prototype.decode=function(m,n,a){return this._getDecoder(n).decode(m,a)},c.prototype._getEncoder=function(m){return m=m||"der",(this||zo).encoders.hasOwnProperty(m)||((this||zo).encoders[m]=this._createNamed(h.encoders[m])),(this||zo).encoders[m]},c.prototype.encode=
function(m,n,a){return this._getEncoder(n).encode(m,a)},ZS}().define,g.base=CD(),g.constants=g5(),g.decoders=Nka(),g.encoders=Oka(),YS}function gA(g){var c;"object"!=typeof g||$S.isBuffer(g)||(c=g.passphrase,g=g.key);"string"==typeof g&&(g=$S.from(g));var h=c;g=g.toString();var f=g.match(Pka);if(f){var m="aes"+f[1],n=DJ.from(f[2],"hex");var a=DJ.from(f[3].replace(/[\r\n]/g,""),"base64");f=DD(h,n.slice(0,8),parseInt(f[1],10)).key;h=[];m=Ao.createDecipheriv(m,f,n);h.push(m.update(a));h.push(m.final());
a=DJ.concat(h)}else a=g.match(Qka),a=new DJ(a[2].replace(/[\r\n]/g,""),"base64");g=g.match(Rka)[1];switch(g){case "CERTIFICATE":var d=ao.certificate.decode(a,"der").tbsCertificate.subjectPublicKeyInfo;case "PUBLIC KEY":switch(d||(d=ao.PublicKey.decode(a,"der")),c=d.algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return ao.RSAPublicKey.decode(d.subjectPublicKey.data,"der");case "1.2.840.10045.2.1":return d.subjectPrivateKey=d.subjectPublicKey,{type:"ec",data:d};case "1.2.840.10040.4.1":return d.algorithm.params.pub_key=
ao.DSAparam.decode(d.subjectPublicKey.data,"der"),{type:"dsa",data:d.algorithm.params};default:throw Error("unknown key id "+c);}case "ENCRYPTED PRIVATE KEY":h=ao.EncryptedPrivateKey.decode(a,"der"),a=c,m=h.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(h.algorithm.decrypt.kde.kdeparams.iters.toString(),10),d=Ska[h.algorithm.decrypt.cipher.algo.join(".")],g=h.algorithm.decrypt.cipher.iv,c=h.subjectPrivateKey,h=parseInt(d.split("-")[1],10)/8,a=Tka.pbkdf2Sync(a,m,n,h,"sha1"),d=Uka.createDecipheriv(d,
a,g),g=[],a=(g.push(d.update(c)),g.push(d.final()),$S.concat(g));case "PRIVATE KEY":switch(c=(d=ao.PrivateKey.decode(a,"der")).algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return ao.RSAPrivateKey.decode(d.subjectPrivateKey,"der");case "1.2.840.10045.2.1":return{curve:d.algorithm.curve,privateKey:ao.ECPrivateKey.decode(d.subjectPrivateKey,"der").privateKey};case "1.2.840.10040.4.1":return d.algorithm.params.priv_key=ao.DSAparam.decode(d.subjectPrivateKey,"der"),{type:"dsa",params:d.algorithm.params};
default:throw Error("unknown key id "+c);}case "RSA PUBLIC KEY":return ao.RSAPublicKey.decode(a,"der");case "RSA PRIVATE KEY":return ao.RSAPrivateKey.decode(a,"der");case "DSA PRIVATE KEY":return{type:"dsa",params:ao.DSAPrivateKey.decode(a,"der")};case "EC PRIVATE KEY":return{curve:(a=ao.ECPrivateKey.decode(a,"der")).parameters.value,privateKey:a.privateKey};default:throw Error("unknown key type "+g);}}function t5(g,c,h,f){if((g=new gn(g.toArray())).length<c.byteLength()){var m=new gn(c.byteLength()-
g.length);m.fill(0);g=gn.concat([m,g])}m=h.length;h=(h=aT(h,c)).mod(c);h=new gn(h.toArray());h.length<c.byteLength()&&(c=new gn(c.byteLength()-h.length),c.fill(0),h=gn.concat([c,h]));c=h;h=new gn(m);h.fill(1);m=new gn(m);return m.fill(0),m=Tw(f,m).update(h).update(new gn([0])).update(g).update(c).digest(),h=Tw(f,m).update(h).digest(),{k:m=Tw(f,m).update(h).update(new gn([1])).update(g).update(c).digest(),v:Tw(f,m).update(h).digest()}}function aT(g,c){var h=new EJ(g);g=(g.length<<3)-c.bitLength();
return 0<g&&h.ishrn(g),h}function u5(g,c,h){var f;do{for(f=new gn(0);8*f.length<g.bitLength();)c.v=Tw(h,c.k).update(c.v).digest(),f=gn.concat([f,c.v]);f=aT(f,g);c.k=Tw(h,c.k).update(c.v).update(new gn([0])).digest();c.v=Tw(h,c.k).update(c.v).digest()}while(-1!==f.cmp(g));return f}function v5(g,c){if(0>=g.cmpn(0))throw Error("invalid sig");if(g.cmp(c)>=c)throw Error("invalid sig");}function ED(g){FJ.Writable.call(this||$k);g=Uw[g];if(!g)throw Error("Unknown message digest");(this||$k)._hashType=g.hash;
(this||$k)._hash=w5(g.hash);(this||$k)._tag=g.id;(this||$k)._signType=g.sign}function FD(g){FJ.Writable.call(this||$k);g=Uw[g];if(!g)throw Error("Unknown message digest");(this||$k)._hash=w5(g.hash);(this||$k)._tag=g.id;(this||$k)._signType=g.sign}function x5(g){return new ED(g)}function y5(g){return new FD(g)}function Vw(g){(this||Rl).curveType=Bo[g];(this||Rl).curveType||((this||Rl).curveType={name:g});(this||Rl).curve=new Vka.ec((this||Rl).curveType.name);(this||Rl).keys=void 0}function bT(g,c,
h){Array.isArray(g)||(g=g.toArray());g=new Js(g);h&&g.length<h&&(h=new Js(h-g.length),h.fill(0),g=Js.concat([h,g]));return c?g.toString(c):g}function z5(){throw Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11");}function A5(g,c){if("number"!=typeof g||g!=g)throw new TypeError("offset must be a number");if(g>B5||0>g)throw new TypeError("offset must be a uint32");if(g>C5||g>c)throw new RangeError("offset out of range");}function D5(g,
c,h){if("number"!=typeof g||g!=g)throw new TypeError("size must be a number");if(g>B5||0>g)throw new TypeError("size must be a uint32");if(g+c>h||g>C5)throw new RangeError("buffer too small");}function E5(g,c,h,f){return cT.browser?(h=new Uint8Array(g.buffer,c,h),dT.getRandomValues(h),f?(cT.nextTick(function(){f(null,g)}),void 0):g):f?(F5(h,function(m,n){if(m)return f(m);n.copy(g,c);f(null,g)}),void 0):(F5(h).copy(g,c),g)}function Wka(g){var c=[];g.replace(/[a-fA-F0-9]{2}/g,function(h){c.push(parseInt(h,
16))});return c}function GJ(g){return g&&g.__esModule?g:{default:g}}function G5(g,c){g=g||[];c=c||{};try{return new Blob(g,c)}catch(m){if("TypeError"!==m.name)throw m;for(var h=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),f=0;f<g.length;f+=1)h.append(g[f]);return h.getBlob(c.type)}}function H5(g){for(var c=g.length,h=new ArrayBuffer(c),f=new Uint8Array(h),m=0;m<c;m++)f[m]=g.charCodeAt(m);
return h}function I5(g,c){return G5([H5(g)],{type:c})}function J5(g,c){var h=new FileReader,f="function"===typeof h.readAsBinaryString;h.onloadend=function(m){var n=m.target.result||"";if(f)return c(n);m="";n=new Uint8Array(n);for(var a=n.byteLength,d=0;d<a;d++)m+=String.fromCharCode(n[d]);c(m)};f?h.readAsBinaryString(g):h.readAsArrayBuffer(g)}function K5(g,c){J5(g,function(h){c(h)})}function Xka(g,c,h){return g.webkitSlice?g.webkitSlice(c,h):g.slice(c,h)}function Yka(g,c,h,f,m){if(0<h||f<c.size)c=
Xka(c,h,f);L5.readAsArrayBuffer(c,function(n){g.append(n);m()})}function Zka(g,c,h,f,m){if(0<h||f<c.length)c=c.substring(h,f);g.appendBinary(c);m()}function HJ(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function GD(g){var c;if(!g||"object"!==typeof g)return g;if(Array.isArray(g)){var h=[];var f=0;for(c=g.length;f<c;f++)h[f]=GD(g[f]);return h}if(g instanceof Date)return g.toISOString();if("undefined"!==typeof ArrayBuffer&&g instanceof ArrayBuffer||"undefined"!==typeof Blob&&g instanceof
Blob)return g instanceof ArrayBuffer?"function"===typeof g.slice?g=g.slice(0):(f=new ArrayBuffer(g.byteLength),h=new Uint8Array(f),g=new Uint8Array(g),h.set(g),g=f):(f=g.size,h=g.type,g="function"===typeof g.slice?g.slice(0,f,h):g.webkitSlice(0,f,h)),g;h=Object.getPrototypeOf(g);null===h?h=!0:(h=h.constructor,h="function"==typeof h&&h instanceof h&&M5.call(h)==$ka);if(!h)return g;h={};for(f in g)Object.prototype.hasOwnProperty.call(g,f)&&(c=GD(g[f]),"undefined"!==typeof c&&(h[f]=c));return h}function N5(g){var c=
!1;return eT(function(h){if(c)throw Error("once called more than once");c=!0;g.apply(this,h)})}function O5(g){return eT(function(c){c=GD(c);var h=this,f="function"===typeof c[c.length-1]?c.pop():!1,m=new Promise(function(n,a){var d;try{var k=N5(function(b,e){b?a(b):n(e)});c.push(k);(d=g.apply(h,c))&&"function"===typeof d.then&&n(d)}catch(b){a(b)}});f&&m.then(function(n){f(null,n)},f);return m})}function ala(g,c,h){if(g.constructor.listeners("debug").length){for(var f=["api",g.name,c],m=0;m<h.length-
1;m++)f.push(h[m]);g.constructor.emit("debug",f);var n=h[h.length-1];h[h.length-1]=function(a,d){var k=["api",g.name,c];k=k.concat(a?["error",a]:["success",d]);g.constructor.emit("debug",k);n(a,d)}}}function fT(g,c){for(var h={},f=0,m=c.length;f<m;f++){var n=c[f];n in g&&(h[n]=g[n])}return h}function P5(g){return g}function bla(g){return[{ok:g}]}function cla(g){IJ&&addEventListener("storage",function(c){g.emit(c.key)})}function hA(){JJ.call(this);this._listeners={};cla(this)}function gT(g){if("undefined"!==
typeof console&&"function"===typeof console[g]){var c=Array.prototype.slice.call(arguments,1);console[g].apply(console,c)}}function Q5(g){if(!g)return null;var c=g.split("/");return 2===c.length?c:1===c.length?[g,g]:null}function R5(g,c,h){return new Promise(function(f,m){g.get(c,function(n,a){if(n){if(404!==n.status)return m(n);a={}}n=a._rev;a=h(a);if(!a)return f({updated:!1,rev:n});a._id=c;a._rev=n;f(dla(g,a,h))})})}function dla(g,c,h){return g.put(c).then(function(f){return{updated:!0,rev:f.rev}},
function(f){if(409!==f.status)throw f;return R5(g,c._id,h)})}function S5(g){var c=g.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");g=g.indexOf("=");-1===g&&(g=c);return[g,g===c?0:4-g%4]}function ela(g,c,h){for(var f=[],m=c;m<h;m+=3)c=(g[m]<<16&16711680)+(g[m+1]<<8&65280)+(g[m+2]&255),f.push(sr[c>>18&63]+sr[c>>12&63]+sr[c>>6&63]+sr[c&63]);return f.join("")}function Ks(g){if(g>hT)throw new RangeError('The value "'+g+'" is invalid for option "size"');g=new Uint8Array(g);
Object.setPrototypeOf(g,De.prototype);return g}function De(g,c,h){if("number"===typeof g){if("string"===typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return iT(g)}return T5(g,c,h)}function T5(g,c,h){if("string"===typeof g){var f=c;if("string"!==typeof f||""===f)f="utf8";if(!De.isEncoding(f))throw new TypeError("Unknown encoding: "+f);c=U5(g,f)|0;h=Ks(c);g=h.write(g,f);g!==c&&(h=h.slice(0,g));return h}if(ArrayBuffer.isView(g))return tr(g,Uint8Array)?
(g=new Uint8Array(g),g=V5(g.buffer,g.byteOffset,g.byteLength)):g=jT(g),g;if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(tr(g,ArrayBuffer)||g&&tr(g.buffer,ArrayBuffer)||"undefined"!==typeof SharedArrayBuffer&&(tr(g,SharedArrayBuffer)||g&&tr(g.buffer,SharedArrayBuffer)))return V5(g,c,h);if("number"===typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');
f=g.valueOf&&g.valueOf();if(null!=f&&f!==g)return De.from(f,c,h);if(f=fla(g))return f;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof g[Symbol.toPrimitive])return De.from(g[Symbol.toPrimitive]("string"),c,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);}function W5(g){if("number"!==typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+
g+'" is invalid for option "size"');}function iT(g){W5(g);return Ks(0>g?0:kT(g)|0)}function jT(g){for(var c=0>g.length?0:kT(g.length)|0,h=Ks(c),f=0;f<c;f+=1)h[f]=g[f]&255;return h}function V5(g,c,h){if(0>c||g.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<c+(h||0))throw new RangeError('"length" is outside of buffer bounds');g=void 0===c&&void 0===h?new Uint8Array(g):void 0===h?new Uint8Array(g,c):new Uint8Array(g,c,h);Object.setPrototypeOf(g,De.prototype);
return g}function fla(g){if(De.isBuffer(g)){var c=kT(g.length)|0,h=Ks(c);if(0===h.length)return h;g.copy(h,0,0,c);return h}if(void 0!==g.length)return(c="number"!==typeof g.length)||(c=g.length,c=c!==c),c?Ks(0):jT(g);if("Buffer"===g.type&&Array.isArray(g.data))return jT(g.data)}function kT(g){if(g>=hT)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+hT.toString(16)+" bytes");return g|0}function U5(g,c){if(De.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||tr(g,
ArrayBuffer))return g.byteLength;if("string"!==typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);var h=g.length,f=2<arguments.length&&!0===arguments[2];if(!f&&0===h)return 0;for(var m=!1;;)switch(c){case "ascii":case "latin1":case "binary":return h;case "utf8":case "utf-8":return lT(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*h;case "hex":return h>>>1;case "base64":return KJ.toByteArray(X5(g)).length;
default:if(m)return f?-1:lT(g).length;c=(""+c).toLowerCase();m=!0}}function gla(g,c,h){var f=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===h||h>this.length)h=this.length;if(0>=h)return"";h>>>=0;c>>>=0;if(h<=c)return"";for(g||(g="utf8");;)switch(g){case "hex":g=this.length;if(!c||0>c)c=0;if(!h||0>h||h>g)h=g;for(g="";c<h;++c)g+=hla[this[c]];return g;case "utf8":case "utf-8":return Y5(this,c,h);case "ascii":g="";for(h=Math.min(this.length,h);c<h;++c)g+=String.fromCharCode(this[c]&127);
return g;case "latin1":case "binary":g="";for(h=Math.min(this.length,h);c<h;++c)g+=String.fromCharCode(this[c]);return g;case "base64":return c=0===c&&h===this.length?KJ.fromByteArray(this):KJ.fromByteArray(this.slice(c,h)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,h);h="";for(g=0;g<c.length-1;g+=2)h+=String.fromCharCode(c[g]+256*c[g+1]);return h;default:if(f)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase();f=!0}}function Ww(g,c,h){var f=g[c];g[c]=
g[h];g[h]=f}function Z5(g,c,h,f,m){if(0===g.length)return-1;"string"===typeof h?(f=h,h=0):2147483647<h?h=2147483647:-2147483648>h&&(h=-2147483648);h=+h;h!==h&&(h=m?0:g.length-1);0>h&&(h=g.length+h);if(h>=g.length){if(m)return-1;h=g.length-1}else if(0>h)if(m)h=0;else return-1;"string"===typeof c&&(c=De.from(c,f));if(De.isBuffer(c))return 0===c.length?-1:$5(g,c,h,f,m);if("number"===typeof c)return c&=255,"function"===typeof Uint8Array.prototype.indexOf?m?Uint8Array.prototype.indexOf.call(g,c,h):Uint8Array.prototype.lastIndexOf.call(g,
c,h):$5(g,[c],h,f,m);throw new TypeError("val must be string, number or Buffer");}function $5(g,c,h,f,m){function n(b,e){return 1===a?b[e]:b.readUInt16BE(e*a)}var a=1,d=g.length,k=c.length;if(void 0!==f&&(f=String(f).toLowerCase(),"ucs2"===f||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(2>g.length||2>c.length)return-1;a=2;d/=2;k/=2;h/=2}if(m)for(f=-1;h<d;h++)if(n(g,h)===n(c,-1===f?0:h-f)){if(-1===f&&(f=h),h-f+1===k)return f*a}else-1!==f&&(h-=h-f),f=-1;else for(h+k>d&&(h=d-k);0<=h;h--){d=!0;for(f=
0;f<k;f++)if(n(g,h+f)!==n(c,f)){d=!1;break}if(d)return h}return-1}function Y5(g,c,h){h=Math.min(g.length,h);for(var f=[];c<h;){var m=g[c],n=null,a=239<m?4:223<m?3:191<m?2:1;if(c+a<=h)switch(a){case 1:128>m&&(n=m);break;case 2:var d=g[c+1];128===(d&192)&&(m=(m&31)<<6|d&63,127<m&&(n=m));break;case 3:d=g[c+1];var k=g[c+2];128===(d&192)&&128===(k&192)&&(m=(m&15)<<12|(d&63)<<6|k&63,2047<m&&(55296>m||57343<m)&&(n=m));break;case 4:d=g[c+1];k=g[c+2];var b=g[c+3];128===(d&192)&&128===(k&192)&&128===(b&192)&&
(m=(m&15)<<18|(d&63)<<12|(k&63)<<6|b&63,65535<m&&1114112>m&&(n=m))}null===n?(n=65533,a=1):65535<n&&(n-=65536,f.push(n>>>10&1023|55296),n=56320|n&1023);f.push(n);c+=a}g=f.length;if(g<=a6)f=String.fromCharCode.apply(String,f);else{h="";for(c=0;c<g;)h+=String.fromCharCode.apply(String,f.slice(c,c+=a6));f=h}return f}function qm(g,c,h){if(0!==g%1||0>g)throw new RangeError("offset is not uint");if(g+c>h)throw new RangeError("Trying to access beyond buffer length");}function bo(g,c,h,f,m,n){if(!De.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');
if(c>m||c<n)throw new RangeError('"value" argument is out of bounds');if(h+f>g.length)throw new RangeError("Index out of range");}function b6(g,c,h,f,m,n){if(h+f>g.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("Index out of range");}function c6(g,c,h,f,m){c=+c;h>>>=0;m||b6(g,c,h,4);iA.write(g,c,h,f,23,4);return h+4}function d6(g,c,h,f,m){c=+c;h>>>=0;m||b6(g,c,h,8);iA.write(g,c,h,f,52,8);return h+8}function X5(g){g=g.split("=")[0];g=g.trim().replace(ila,"");if(2>g.length)return"";
for(;0!==g.length%4;)g+="=";return g}function lT(g,c){c=c||Infinity;for(var h,f=g.length,m=null,n=[],a=0;a<f;++a){h=g.charCodeAt(a);if(55295<h&&57344>h){if(!m){if(56319<h){-1<(c-=3)&&n.push(239,191,189);continue}else if(a+1===f){-1<(c-=3)&&n.push(239,191,189);continue}m=h;continue}if(56320>h){-1<(c-=3)&&n.push(239,191,189);m=h;continue}h=(m-55296<<10|h-56320)+65536}else m&&-1<(c-=3)&&n.push(239,191,189);m=null;if(128>h){if(0>--c)break;n.push(h)}else if(2048>h){if(0>(c-=2))break;n.push(h>>6|192,h&
63|128)}else if(65536>h){if(0>(c-=3))break;n.push(h>>12|224,h>>6&63|128,h&63|128)}else if(1114112>h){if(0>(c-=4))break;n.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw Error("Invalid code point");}return n}function LJ(g,c,h,f){for(var m=0;m<f&&!(m+h>=c.length||m>=g.length);++m)c[m+h]=g[m];return m}function tr(g,c){return g instanceof c||null!=g&&null!=g.constructor&&null!=g.constructor.name&&g.constructor.name===c.name}function mu(g){if("object"!==typeof g||null===g)throw new TypeError("First argument must be an abstract-leveldown compliant store");
(this||Ls).db=g;(this||Ls)._ended=!1;(this||Ls)._nexting=!1}function jq(g){if("object"!==typeof g||null===g)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||Sl).db=g;(this||Sl)._operations=[];(this||Sl)._written=!1}function Mk(g){(this||Co).status="new";(this||Co).supports=jla(g,{status:!0})}function e6(g,c){var h={},f;for(f in c)if(kla.call(c,f)){var m=c[f];-1!==lla.indexOf(f)&&(m=g._serializeKey(m));h[f]=m}return h}function jA(g,c){f6.call(this||kq,g);(this||
kq)._options=c;(this||kq)._iterator=null;(this||kq)._operations=[]}function Xw(g){g6.call(this||rm,g.supports||{});mla.forEach(function(c){"function"!==typeof g[c]||(this||rm).supports.additionalMethods[c]||((this||rm).supports.additionalMethods[c]=!0)},this||rm);(this||rm)._db=g;(this||rm)._operations=[];h6(this||rm)}function nla(g){i6.concat("iterator").forEach(function(c){g["_"+c]=function(){return(this||rm)._db[c].apply((this||rm)._db,arguments)}});Object.keys(g.supports.additionalMethods).forEach(function(c){g[c]=
function(){return(this||rm)._db[c].apply((this||rm)._db,arguments)}})}function h6(g){i6.forEach(function(c){g["_"+c]=function(){(this||rm)._operations.push({method:c,args:arguments})}});Object.keys(g.supports.additionalMethods).forEach(function(c){g[c]=function(){(this||rm)._operations.push({method:c,args:arguments})}});g._iterator=function(c){c=new j6(g,c);(this||rm)._operations.push({iterator:c});return c}}function k6(){if(l6)return m6;l6=!0;return m6=lr.EventEmitter}function kA(){function g(f,
m,n){n||(n=Error);var a=function(d,k,b){return n.call(this,"string"===typeof m?m:m(d,k,b))||this};$jscomp.inherits(a,n);a.prototype.name=n.name;a.prototype.code=f;h[f]=a}function c(f,m){if(Array.isArray(f)){var n=f.length;f=f.map(function(a){return String(a)});return 2<n?"one of "+m+" "+f.slice(0,n-1).join(", ")+", or "+f[n-1]:2===n?"one of "+m+" "+f[0]+" or "+f[1]:"of "+m+" "+f[0]}return"of "+m+" "+String(f)}if(n6)return mT;n6=!0;var h={};g("ERR_INVALID_OPT_VALUE",function(f,m){return'The value "'+
m+'" is invalid for option "'+f+'"'},TypeError);g("ERR_INVALID_ARG_TYPE",function(f,m,n){var a;if(a="string"===typeof m)a="not "===m.substr(0,4);a?(a="must not be",m=m.replace(/^not /,"")):a="must be";var d=void 0;if(void 0===d||d>f.length)d=f.length;" argument"===f.substring(d-9,d)?f="The "+f+" "+a+" "+c(m,"type"):(d=void 0,"number"!==typeof d&&(d=0),d=d+1>f.length?!1:-1!==f.indexOf(".",d),f='The "'+f+'" '+(d?"property":"argument")+" "+a+" "+c(m,"type"));return f+(". Received type "+typeof n)},TypeError);
g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");g("ERR_METHOD_NOT_IMPLEMENTED",function(f){return"The "+f+" method is not implemented"});g("ERR_STREAM_PREMATURE_CLOSE","Premature close");g("ERR_STREAM_DESTROYED",function(f){return"Cannot call "+f+" after a stream was destroyed"});g("ERR_MULTIPLE_CALLBACK","Callback called multiple times");g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");g("ERR_STREAM_WRITE_AFTER_END","write after end");g("ERR_STREAM_NULL_VALUES","May not write null values to stream",
TypeError);g("ERR_UNKNOWN_ENCODING",function(f){return"Unknown encoding: "+f},TypeError);g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");mT.codes=h;return mT}function nT(g){try{if(!oT.localStorage)return!1}catch(c){return!1}g=oT.localStorage[g];return null==g?!1:"true"===String(g).toLowerCase()}function o6(g,c){for(var h in g)c[h]=g[h]}function Yw(g,c,h){return ur(g,c,h)}function ola(g){if(!g)return"utf8";for(var c;;)switch(g){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";
case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return g;default:if(c)return;g=(""+g).toLowerCase();c=!0}}function HD(g){var c=ola(g);if("string"!==typeof c&&(pT.isEncoding===p6||!p6(g)))throw Error("Unknown encoding: "+g);this.encoding=c||g;switch(this.encoding){case "utf16le":this.text=pla;this.end=qla;g=4;break;case "utf8":this.fillLast=rla;g=4;break;case "base64":this.text=sla;this.end=tla;g=3;break;default:this.write=ula;this.end=vla;return}this.lastTotal=this.lastNeed=
0;this.lastChar=pT.allocUnsafe(g)}function qT(g){return 127>=g?0:6===g>>5?2:14===g>>4?3:30===g>>3?4:2===g>>6?-1:-2}function wla(g,c,h){var f=c.length-1;if(f<h)return 0;var m=qT(c[f]);if(0<=m)return 0<m&&(g.lastNeed=m-1),m;if(--f<h||-2===m)return 0;m=qT(c[f]);if(0<=m)return 0<m&&(g.lastNeed=m-2),m;if(--f<h||-2===m)return 0;m=qT(c[f]);return 0<=m?(0<m&&(2===m?m=0:g.lastNeed=m-3),m):0}function rla(g){var c=this.lastTotal-this.lastNeed;a:if(128!==(g[0]&192)){this.lastNeed=0;var h="\ufffd"}else{if(1<this.lastNeed&&
1<g.length){if(128!==(g[1]&192)){this.lastNeed=1;h="\ufffd";break a}if(2<this.lastNeed&&2<g.length&&128!==(g[2]&192)){this.lastNeed=2;h="\ufffd";break a}}h=void 0}if(void 0!==h)return h;if(this.lastNeed<=g.length)return g.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,c,0,g.length);this.lastNeed-=g.length}function pla(g,c){if(0===(g.length-c)%2){if(c=g.toString("utf16le",c)){var h=c.charCodeAt(c.length-1);if(55296<=h&&56319>=h)return this.lastNeed=
2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],c.slice(0,-1)}return c}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=g[g.length-1];return g.toString("utf16le",c,g.length-1)}function qla(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):g}function sla(g,c){var h=(g.length-c)%3;if(0===h)return g.toString("base64",c);this.lastNeed=3-h;this.lastTotal=3;1===h?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=
g[g.length-2],this.lastChar[1]=g[g.length-1]);return g.toString("base64",c,g.length-h)}function tla(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function ula(g){return g.toString(this.encoding)}function vla(g){return g&&g.length?this.write(g):""}function rT(){function g(m){var n=!1;return function(){if(!n){n=!0;for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];m.apply(this,d)}}}function c(){}function h(m,n,a){if("function"===
typeof n)return h(m,null,n);n||(n={});a=g(a||c);var d=n.readable||!1!==n.readable&&m.readable,k=n.writable||!1!==n.writable&&m.writable,b=function(){m.writable||l()},e=m._writableState&&m._writableState.finished,l=function(){k=!1;e=!0;d||a.call(m)},p=m._readableState&&m._readableState.endEmitted,u=function(){d=!1;p=!0;k||a.call(m)},x=function(G){a.call(m,G)},z=function(){var G;if(d&&!p)return m._readableState&&m._readableState.ended||(G=new f),a.call(m,G);if(k&&!e)return m._writableState&&m._writableState.ended||
(G=new f),a.call(m,G)},E=function(){m.req.on("finish",l)};if(m.setHeader&&"function"===typeof m.abort)if(m.on("complete",l),m.on("abort",z),m.req)E();else m.on("request",E);else k&&!m._writableState&&(m.on("end",b),m.on("close",b));m.on("end",u);m.on("finish",l);if(!1!==n.error)m.on("error",x);m.on("close",z);return function(){m.removeListener("complete",l);m.removeListener("abort",z);m.removeListener("request",E);m.req&&m.req.removeListener("finish",l);m.removeListener("end",b);m.removeListener("close",
b);m.removeListener("finish",l);m.removeListener("end",u);m.removeListener("error",x);m.removeListener("close",z)}}if(q6)return r6;q6=!0;var f=kA().codes.ERR_STREAM_PREMATURE_CLOSE;return r6=h}function xla(){if(s6)return t6;s6=!0;return t6=function(){throw Error("Readable.from is not available in the browser");}}function yla(){function g(d,k){var b=Object.keys(d);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(d);k&&(e=e.filter(function(l){return Object.getOwnPropertyDescriptor(d,
l).enumerable}));b.push.apply(b,e)}return b}function c(d){for(var k=1;k<arguments.length;k++){var b=null!=arguments[k]?arguments[k]:{};k%2?g(Object(b),!0).forEach(function(e){var l=b[e];e in d?Object.defineProperty(d,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):d[e]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(b)):g(Object(b)).forEach(function(e){Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(b,e))})}return d}function h(d,k){for(var b=
0;b<k.length;b++){var e=k[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(d,e.key,e)}}function f(d,k,b){k&&h(d.prototype,k);b&&h(d,b);return d}if(u6)return v6;u6=!0;var m=Rh.Buffer,n=w6.inspect,a=n&&n.custom||"inspect";return v6=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}f(d,[{key:"push",value:function(k){k={data:k,next:null};0<this.length?this.tail.next=
k:this.head=k;this.tail=k;++this.length}},{key:"unshift",value:function(k){k={data:k,next:this.head};0===this.length&&(this.tail=k);this.head=k;++this.length}},{key:"shift",value:function(){if(0!==this.length){var k=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return k}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(k){if(0===this.length)return"";for(var b=this.head,e=""+b.data;b=b.next;)e+=k+b.data;return e}},
{key:"concat",value:function(k){if(0===this.length)return m.alloc(0);k=m.allocUnsafe(k>>>0);for(var b=this.head,e=0;b;)m.prototype.copy.call(b.data,k,e),e+=b.data.length,b=b.next;return k}},{key:"consume",value:function(k,b){k<this.head.data.length?(b=this.head.data.slice(0,k),this.head.data=this.head.data.slice(k)):b=k===this.head.data.length?this.shift():b?this._getString(k):this._getBuffer(k);return b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(k){var b=
this.head,e=1,l=b.data;for(k-=l.length;b=b.next;){var p=b.data,u=k>p.length?p.length:k;l=u===p.length?l+p:l+p.slice(0,k);k-=u;if(0===k){u===p.length?(++e,this.head=b.next?b.next:this.tail=null):(this.head=b,b.data=p.slice(u));break}++e}this.length-=e;return l}},{key:"_getBuffer",value:function(k){var b=m.allocUnsafe(k),e=this.head,l=1;e.data.copy(b);for(k-=e.data.length;e=e.next;){var p=e.data,u=k>p.length?p.length:k;p.copy(b,b.length-k,0,u);k-=u;if(0===k){u===p.length?(++l,this.head=e.next?e.next:
this.tail=null):(this.head=e,e.data=p.slice(u));break}++l}this.length-=l;return b}},{key:a,value:function(k,b){return n(this,c({},b,{depth:0,customInspect:!1}))}}]);return d}()}function x6(){function g(m,n){h(m,n);c(m)}function c(m){m._writableState&&!m._writableState.emitClose||m._readableState&&!m._readableState.emitClose||m.emit("close")}function h(m,n){m.emit("error",n)}if(y6)return z6;y6=!0;var f=Li;return z6={destroy:function(m,n){var a=this,d=this._writableState&&this._writableState.destroyed;
if(this._readableState&&this._readableState.destroyed||d)return n?n(m):m&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,f.nextTick(h,this,m)):f.nextTick(h,this,m)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(m||null,function(k){!n&&k?a._writableState?a._writableState.errorEmitted?f.nextTick(c,a):(a._writableState.errorEmitted=!0,f.nextTick(g,a,k)):f.nextTick(g,a,k):
n?(f.nextTick(c,a),n(k)):f.nextTick(c,a)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(m,
n){var a=m._readableState,d=m._writableState;a&&a.autoDestroy||d&&d.autoDestroy?m.destroy(n):m.emit("error",n)}}}function A6(){if(B6)return C6;B6=!0;var g=kA().codes.ERR_INVALID_OPT_VALUE;return C6={getHighWaterMark:function(c,h,f,m){h=null!=h.highWaterMark?h.highWaterMark:m?h[f]:null;if(null!=h){if(!isFinite(h)||Math.floor(h)!==h||0>h)throw new g(m?f:"highWaterMark",h);return Math.floor(h)}return c.objectMode?16:16384}}}function D6(){function g(W){var ca=this;this.entry=this.next=null;this.finish=
function(){var sa=ca.entry;for(ca.entry=null;sa;){var la=sa.callback;W.pendingcb--;la(void 0);sa=sa.next}W.corkedRequestsFree.next=ca}}function c(){}function h(W,ca,sa){l=l||lA();W=W||{};"boolean"!==typeof sa&&(sa=ca instanceof l);this.objectMode=!!W.objectMode;sa&&(this.objectMode=this.objectMode||!!W.writableObjectMode);this.highWaterMark=G(this,W,"writableHighWaterMark",sa);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==W.decodeStrings;
this.defaultEncoding=W.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(la){var Aa=ca._writableState,ib=Aa.sync,ob=Aa.writecb;if("function"!==typeof ob)throw new P;Aa.writing=!1;Aa.writecb=null;Aa.length-=Aa.writelen;Aa.writelen=0;la?(--Aa.pendingcb,ib?(e.nextTick(ob,la),e.nextTick(b,ca,Aa),ca._writableState.errorEmitted=!0,N(ca,la)):(ob(la),ca._writableState.errorEmitted=!0,N(ca,la),b(ca,Aa))):((la=d(Aa)||ca.destroyed)||
Aa.corked||Aa.bufferProcessing||!Aa.bufferedRequest||a(ca,Aa),ib?e.nextTick(n,ca,Aa,la,ob):n(ca,Aa,la,ob))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==W.emitClose;this.autoDestroy=!!W.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function f(W){l=l||lA();var ca=this instanceof l;if(!ca&&!ia.call(f,this))return new f(W);this._writableState=new h(W,this,ca);
this.writable=!0;W&&("function"===typeof W.write&&(this._write=W.write),"function"===typeof W.writev&&(this._writev=W.writev),"function"===typeof W.destroy&&(this._destroy=W.destroy),"function"===typeof W.final&&(this._final=W.final));u.call(this)}function m(W,ca,sa,la,Aa,ib,ob){ca.writelen=la;ca.writecb=ob;ca.writing=!0;ca.sync=!0;if(ca.destroyed)ca.onwrite(new fa("write"));else sa?W._writev(Aa,ca.onwrite):W._write(Aa,ib,ca.onwrite);ca.sync=!1}function n(W,ca,sa,la){!sa&&0===ca.length&&ca.needDrain&&
(ca.needDrain=!1,W.emit("drain"));ca.pendingcb--;la();b(W,ca)}function a(W,ca){ca.bufferProcessing=!0;var sa=ca.bufferedRequest;if(W._writev&&sa&&sa.next){var la=Array(ca.bufferedRequestCount),Aa=ca.corkedRequestsFree;Aa.entry=sa;for(var ib=0,ob=!0;sa;)la[ib]=sa,sa.isBuf||(ob=!1),sa=sa.next,ib+=1;la.allBuffers=ob;m(W,ca,!0,ca.length,la,"",Aa.finish);ca.pendingcb++;ca.lastBufferedRequest=null;Aa.next?(ca.corkedRequestsFree=Aa.next,Aa.next=null):ca.corkedRequestsFree=new g(ca);ca.bufferedRequestCount=
0}else{for(;sa&&(la=sa.chunk,m(W,ca,!1,ca.objectMode?1:la.length,la,sa.encoding,sa.callback),sa=sa.next,ca.bufferedRequestCount--,!ca.writing););null===sa&&(ca.lastBufferedRequest=null)}ca.bufferedRequest=sa;ca.bufferProcessing=!1}function d(W){return W.ending&&0===W.length&&null===W.bufferedRequest&&!W.finished&&!W.writing}function k(W,ca){W._final(function(sa){ca.pendingcb--;sa&&N(W,sa);ca.prefinished=!0;W.emit("prefinish");b(W,ca)})}function b(W,ca){var sa=d(ca);sa&&(ca.prefinished||ca.finalCalled||
("function"!==typeof W._final||ca.destroyed?(ca.prefinished=!0,W.emit("prefinish")):(ca.pendingcb++,ca.finalCalled=!0,e.nextTick(k,W,ca))),0===ca.pendingcb&&(ca.finished=!0,W.emit("finish"),ca.autoDestroy&&(ca=W._readableState,(!ca||ca.autoDestroy&&ca.endEmitted)&&W.destroy())));return sa}if(E6)return sT;E6=!0;var e=Li;sT=f;var l;f.WritableState=h;var p={deprecate:zla},u=k6(),x=Rh.Buffer,z=Ala.Uint8Array||function(){},E=x6(),G=A6().getHighWaterMark,J=kA().codes,K=J.ERR_INVALID_ARG_TYPE,T=J.ERR_METHOD_NOT_IMPLEMENTED,
P=J.ERR_MULTIPLE_CALLBACK,da=J.ERR_STREAM_CANNOT_PIPE,fa=J.ERR_STREAM_DESTROYED,ka=J.ERR_STREAM_NULL_VALUES,za=J.ERR_STREAM_WRITE_AFTER_END,Ia=J.ERR_UNKNOWN_ENCODING,N=E.errorOrDestroy;Gk(f,u);h.prototype.getBuffer=function(){for(var W=this.bufferedRequest,ca=[];W;)ca.push(W),W=W.next;return ca};(function(){try{Object.defineProperty(h.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(W){}})();
if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var ia=Function.prototype[Symbol.hasInstance];Object.defineProperty(f,Symbol.hasInstance,{value:function(W){return ia.call(this,W)?!0:this!==f?!1:W&&W._writableState instanceof h}})}else ia=function(W){return W instanceof this};f.prototype.pipe=function(){N(this,new da)};f.prototype.write=function(W,ca,sa){var la=this._writableState,Aa=!1,ib;if(ib=!la.objectMode)ib=W,ib=x.isBuffer(ib)||ib instanceof
z;ib&&!x.isBuffer(W)&&(W=x.from(W));"function"===typeof ca&&(sa=ca,ca=null);ib?ca="buffer":ca||(ca=la.defaultEncoding);"function"!==typeof sa&&(sa=c);if(la.ending)la=sa,sa=new za,N(this,sa),e.nextTick(la,sa);else{var ob;if(!(ob=ib)){ob=W;var Ea=sa,ua;null===ob?ua=new ka:"string"===typeof ob||la.objectMode||(ua=new K("chunk",["string","Buffer"],ob));ua?(N(this,ua),e.nextTick(Ea,ua),ob=!1):ob=!0}ob&&(la.pendingcb++,Aa=ib,Aa||(ua=W,la.objectMode||!1===la.decodeStrings||"string"!==typeof ua||(ua=x.from(ua,
ca)),W!==ua&&(Aa=!0,ca="buffer",W=ua)),ib=la.objectMode?1:W.length,la.length+=ib,ua=la.length<la.highWaterMark,ua||(la.needDrain=!0),la.writing||la.corked?(ib=la.lastBufferedRequest,la.lastBufferedRequest={chunk:W,encoding:ca,isBuf:Aa,callback:sa,next:null},ib?ib.next=la.lastBufferedRequest:la.bufferedRequest=la.lastBufferedRequest,la.bufferedRequestCount+=1):m(this,la,!1,ib,W,ca,sa),Aa=ua)}return Aa};f.prototype.cork=function(){this._writableState.corked++};f.prototype.uncork=function(){var W=this._writableState;
W.corked&&(W.corked--,W.writing||W.corked||W.bufferProcessing||!W.bufferedRequest||a(this,W))};f.prototype.setDefaultEncoding=function(W){"string"===typeof W&&(W=W.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((W+"").toLowerCase())))throw new Ia(W);this._writableState.defaultEncoding=W;return this};Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});
Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});f.prototype._write=function(W,ca,sa){sa(new T("_write()"))};f.prototype._writev=null;f.prototype.end=function(W,ca,sa){var la=this._writableState;"function"===typeof W?(sa=W,ca=W=null):"function"===typeof ca&&(sa=ca,ca=null);null!==W&&void 0!==W&&this.write(W,ca);la.corked&&(la.corked=1,this.uncork());if(!la.ending){W=sa;la.ending=!0;b(this,la);if(W)if(la.finished)e.nextTick(W);
else this.once("finish",W);la.ended=!0;this.writable=!1}return this};Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(W){this._writableState&&(this._writableState.destroyed=W)}});f.prototype.destroy=E.destroy;f.prototype._undestroy=E.undestroy;f.prototype._destroy=function(W,
ca){ca(W)};return sT}function lA(){function g(b){if(!(this instanceof g))return new g(b);n.call(this,b);a.call(this,b);this.allowHalfOpen=!0;b&&(!1===b.readable&&(this.readable=!1),!1===b.writable&&(this.writable=!1),!1===b.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(h,this)}function h(b){b.end()}if(F6)return tT;F6=!0;var f=Li,m=Object.keys||function(b){var e=[],l;for(l in b)e.push(l);return e};tT=g;var n=G6(),a=D6();Gk(g,n);m=m(a.prototype);
for(var d=0;d<m.length;d++){var k=m[d];g.prototype[k]||(g.prototype[k]=a.prototype[k])}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(g.prototype,
"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(b){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=b,this._writableState.destroyed=b)}});return tT}function Bla(){function g(G,J,K){J in G?Object.defineProperty(G,J,{value:K,enumerable:!0,configurable:!0,writable:!0}):G[J]=K;return G}function c(G,J){return{value:G,done:J}}
function h(G){var J=G[k];if(null!==J){var K=G[x].read();null!==K&&(G[p]=null,G[k]=null,G[b]=null,J(c(K,!1)))}}function f(G){n.nextTick(h,G)}function m(G,J){return function(K,T){G.then(function(){if(J[l])K(c(void 0,!0));else J[u](K,T)},T)}}if(H6)return I6;H6=!0;var n=Li,a,d=rT(),k=Symbol("lastResolve"),b=Symbol("lastReject"),e=Symbol("error"),l=Symbol("ended"),p=Symbol("lastPromise"),u=Symbol("handlePromise"),x=Symbol("stream"),z=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((a={get stream(){return this[x]},
next:function(){var G=this,J=this[e];if(null!==J)return Promise.reject(J);if(this[l])return Promise.resolve(c(void 0,!0));if(this[x].destroyed)return new Promise(function(K,T){n.nextTick(function(){G[e]?T(G[e]):K(c(void 0,!0))})});if(J=this[p])J=new Promise(m(J,this));else{J=this[x].read();if(null!==J)return Promise.resolve(c(J,!1));J=new Promise(this[u])}return this[p]=J}},g(a,Symbol.asyncIterator,function(){return this}),g(a,"return",function(){var G=this;return new Promise(function(J,K){G[x].destroy(null,
function(T){T?K(T):J(c(void 0,!0))})})}),a),z);return I6=function(G){var J,K=Object.create(E,(J={},g(J,x,{value:G,writable:!0}),g(J,k,{value:null,writable:!0}),g(J,b,{value:null,writable:!0}),g(J,e,{value:null,writable:!0}),g(J,l,{value:G._readableState.endEmitted,writable:!0}),g(J,u,{value:function(T,P){var da=K[x].read();da?(K[p]=null,K[k]=null,K[b]=null,T(c(da,!1))):(K[k]=T,K[b]=P)},writable:!0}),J));K[p]=null;d(G,function(T){if(T&&"ERR_STREAM_PREMATURE_CLOSE"!==T.code){var P=K[b];null!==P&&(K[p]=
null,K[k]=null,K[b]=null,P(T));K[e]=T}else T=K[k],null!==T&&(K[p]=null,K[k]=null,K[b]=null,T(c(void 0,!0))),K[l]=!0});G.on("readable",f.bind(null,K));return K}}function G6(){function g(ya,Sa,Qb){if("function"===typeof ya.prependListener)return ya.prependListener(Sa,Qb);if(ya._events&&ya._events[Sa])Array.isArray(ya._events[Sa])?ya._events[Sa].unshift(Qb):ya._events[Sa]=[Qb,ya._events[Sa]];else ya.on(Sa,Qb)}function c(ya,Sa,Qb){T=T||lA();ya=ya||{};"boolean"!==typeof Qb&&(Qb=Sa instanceof T);this.objectMode=
!!ya.objectMode;Qb&&(this.objectMode=this.objectMode||!!ya.readableObjectMode);this.highWaterMark=N(this,ya,"readableHighWaterMark",Qb);this.buffer=new Ia;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==ya.emitClose;this.autoDestroy=!!ya.autoDestroy;this.destroyed=!1;this.defaultEncoding=ya.defaultEncoding||
"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;ya.encoding&&(Aa||(Aa=uT.StringDecoder),this.decoder=new Aa(ya.encoding),this.encoding=ya.encoding)}function h(ya){T=T||lA();if(!(this instanceof h))return new h(ya);this._readableState=new c(ya,this,this instanceof T);this.readable=!0;ya&&("function"===typeof ya.read&&(this._read=ya.read),"function"===typeof ya.destroy&&(this._destroy=ya.destroy));P.call(this)}function f(ya,Sa,Qb,mc,Yb){za("readableAddChunk",Sa);var fc=
ya._readableState;if(null===Sa)fc.reading=!1,za("onEofChunk"),fc.ended||(fc.decoder&&(Sa=fc.decoder.end())&&Sa.length&&(fc.buffer.push(Sa),fc.length+=fc.objectMode?1:Sa.length),fc.ended=!0,fc.sync?a(ya):(fc.needReadable=!1,fc.emittedReadable||(fc.emittedReadable=!0,d(ya))));else{if(!Yb){Yb=Sa;var Jc;da.isBuffer(Yb)||Yb instanceof fa||"string"===typeof Yb||void 0===Yb||fc.objectMode||(Jc=new W("chunk",["string","Buffer","Uint8Array"],Yb));var Nb=Jc}if(Nb)Ea(ya,Nb);else if(fc.objectMode||Sa&&0<Sa.length)if("string"===
typeof Sa||fc.objectMode||Object.getPrototypeOf(Sa)===da.prototype||(Sa=da.from(Sa)),mc)fc.endEmitted?Ea(ya,new la):m(ya,fc,Sa,!0);else if(fc.ended)Ea(ya,new ca);else{if(fc.destroyed)return!1;fc.reading=!1;fc.decoder&&!Qb?(Sa=fc.decoder.write(Sa),fc.objectMode||0!==Sa.length?m(ya,fc,Sa,!1):k(ya,fc)):m(ya,fc,Sa,!1)}else mc||(fc.reading=!1,k(ya,fc))}return!fc.ended&&(fc.length<fc.highWaterMark||0===fc.length)}function m(ya,Sa,Qb,mc){Sa.flowing&&0===Sa.length&&!Sa.sync?(Sa.awaitDrain=0,ya.emit("data",
Qb)):(Sa.length+=Sa.objectMode?1:Qb.length,mc?Sa.buffer.unshift(Qb):Sa.buffer.push(Qb),Sa.needReadable&&a(ya));k(ya,Sa)}function n(ya,Sa){if(0>=ya||0===Sa.length&&Sa.ended)return 0;if(Sa.objectMode)return 1;if(ya!==ya)return Sa.flowing&&Sa.length?Sa.buffer.head.data.length:Sa.length;if(ya>Sa.highWaterMark){var Qb=ya;1073741824<=Qb?Qb=1073741824:(Qb--,Qb|=Qb>>>1,Qb|=Qb>>>2,Qb|=Qb>>>4,Qb|=Qb>>>8,Qb|=Qb>>>16,Qb++);Sa.highWaterMark=Qb}return ya<=Sa.length?ya:Sa.ended?Sa.length:(Sa.needReadable=!0,0)}
function a(ya){var Sa=ya._readableState;za("emitReadable",Sa.needReadable,Sa.emittedReadable);Sa.needReadable=!1;Sa.emittedReadable||(za("emitReadable",Sa.flowing),Sa.emittedReadable=!0,K.nextTick(d,ya))}function d(ya){var Sa=ya._readableState;za("emitReadable_",Sa.destroyed,Sa.length,Sa.ended);Sa.destroyed||!Sa.length&&!Sa.ended||(ya.emit("readable"),Sa.emittedReadable=!1);Sa.needReadable=!Sa.flowing&&!Sa.ended&&Sa.length<=Sa.highWaterMark;x(ya)}function k(ya,Sa){Sa.readingMore||(Sa.readingMore=
!0,K.nextTick(b,ya,Sa))}function b(ya,Sa){for(;!Sa.reading&&!Sa.ended&&(Sa.length<Sa.highWaterMark||Sa.flowing&&0===Sa.length);){var Qb=Sa.length;za("maybeReadMore read 0");ya.read(0);if(Qb===Sa.length)break}Sa.readingMore=!1}function e(ya){return function(){var Sa=ya._readableState;za("pipeOnDrain",Sa.awaitDrain);Sa.awaitDrain&&Sa.awaitDrain--;0===Sa.awaitDrain&&ya.listeners("data").length&&(Sa.flowing=!0,x(ya))}}function l(ya){var Sa=ya._readableState;Sa.readableListening=0<ya.listenerCount("readable");
Sa.resumeScheduled&&!Sa.paused?Sa.flowing=!0:0<ya.listenerCount("data")&&ya.resume()}function p(ya){za("readable nexttick read 0");ya.read(0)}function u(ya,Sa){za("resume",Sa.reading);Sa.reading||ya.read(0);Sa.resumeScheduled=!1;ya.emit("resume");x(ya);Sa.flowing&&!Sa.reading&&ya.read(0)}function x(ya){var Sa=ya._readableState;for(za("flow",Sa.flowing);Sa.flowing&&null!==ya.read(););}function z(ya,Sa){if(0===Sa.length)return null;Sa.objectMode?ya=Sa.buffer.shift():!ya||ya>=Sa.length?(ya=Sa.decoder?
Sa.buffer.join(""):1===Sa.buffer.length?Sa.buffer.first():Sa.buffer.concat(Sa.length),Sa.buffer.clear()):ya=Sa.buffer.consume(ya,Sa.decoder);return ya}function E(ya){var Sa=ya._readableState;za("endReadable",Sa.endEmitted);Sa.endEmitted||(Sa.ended=!0,K.nextTick(G,Sa,ya))}function G(ya,Sa){za("endReadableNT",ya.endEmitted,ya.length);ya.endEmitted||0!==ya.length||(ya.endEmitted=!0,Sa.readable=!1,Sa.emit("end"),ya.autoDestroy&&(ya=Sa._writableState,(!ya||ya.autoDestroy&&ya.finished)&&Sa.destroy()))}
function J(ya,Sa){for(var Qb=0,mc=ya.length;Qb<mc;Qb++)if(ya[Qb]===Sa)return Qb;return-1}if(J6)return vT;J6=!0;var K=Li;vT=h;var T;h.ReadableState=c;var P=k6(),da=Rh.Buffer,fa=Cla.Uint8Array||function(){},ka=w6;var za=ka&&ka.debuglog?ka.debuglog("stream"):function(){};var Ia=yla();ka=x6();var N=A6().getHighWaterMark,ia=kA().codes,W=ia.ERR_INVALID_ARG_TYPE,ca=ia.ERR_STREAM_PUSH_AFTER_EOF,sa=ia.ERR_METHOD_NOT_IMPLEMENTED,la=ia.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Aa,ib,ob;Gk(h,P);var Ea=ka.errorOrDestroy,
ua=["error","close","destroy","pause","resume"];Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(ya){this._readableState&&(this._readableState.destroyed=ya)}});h.prototype.destroy=ka.destroy;h.prototype._undestroy=ka.undestroy;h.prototype._destroy=function(ya,Sa){Sa(ya)};h.prototype.push=function(ya,Sa){var Qb=this._readableState;if(Qb.objectMode)var mc=!0;else"string"===typeof ya&&(Sa=Sa||
Qb.defaultEncoding,Sa!==Qb.encoding&&(ya=da.from(ya,Sa),Sa=""),mc=!0);return f(this,ya,Sa,!1,mc)};h.prototype.unshift=function(ya){return f(this,ya,null,!0,!1)};h.prototype.isPaused=function(){return!1===this._readableState.flowing};h.prototype.setEncoding=function(ya){Aa||(Aa=uT.StringDecoder);ya=new Aa(ya);this._readableState.decoder=ya;this._readableState.encoding=this._readableState.decoder.encoding;for(var Sa=this._readableState.buffer.head,Qb="";null!==Sa;)Qb+=ya.write(Sa.data),Sa=Sa.next;this._readableState.buffer.clear();
""!==Qb&&this._readableState.buffer.push(Qb);this._readableState.length=Qb.length;return this};h.prototype.read=function(ya){za("read",ya);ya=parseInt(ya,10);var Sa=this._readableState,Qb=ya;0!==ya&&(Sa.emittedReadable=!1);if(0===ya&&Sa.needReadable&&((0!==Sa.highWaterMark?Sa.length>=Sa.highWaterMark:0<Sa.length)||Sa.ended))return za("read: emitReadable",Sa.length,Sa.ended),0===Sa.length&&Sa.ended?E(this):a(this),null;ya=n(ya,Sa);if(0===ya&&Sa.ended)return 0===Sa.length&&E(this),null;var mc=Sa.needReadable;
za("need readable",mc);if(0===Sa.length||Sa.length-ya<Sa.highWaterMark)mc=!0,za("length less than watermark",mc);Sa.ended||Sa.reading?za("reading or ended",!1):mc&&(za("do read"),Sa.reading=!0,Sa.sync=!0,0===Sa.length&&(Sa.needReadable=!0),this._read(Sa.highWaterMark),Sa.sync=!1,Sa.reading||(ya=n(Qb,Sa)));mc=0<ya?z(ya,Sa):null;null===mc?(Sa.needReadable=Sa.length<=Sa.highWaterMark,ya=0):(Sa.length-=ya,Sa.awaitDrain=0);0===Sa.length&&(Sa.ended||(Sa.needReadable=!0),Qb!==ya&&Sa.ended&&E(this));null!==
mc&&this.emit("data",mc);return mc};h.prototype._read=function(ya){Ea(this,new sa("_read()"))};h.prototype.pipe=function(ya,Sa){function Qb(Cb,ec){za("onunpipe");Cb===Od&&ec&&!1===ec.hasUnpiped&&(ec.hasUnpiped=!0,za("cleanup"),ya.removeListener("close",Jc),ya.removeListener("finish",Nb),ya.removeListener("drain",Pa),ya.removeListener("error",fc),ya.removeListener("unpipe",Qb),Od.removeListener("end",mc),Od.removeListener("end",ld),Od.removeListener("data",Yb),Ra=!0,!ta.awaitDrain||ya._writableState&&
!ya._writableState.needDrain||Pa())}function mc(){za("onend");ya.end()}function Yb(Cb){za("ondata");Cb=ya.write(Cb);za("dest.write",Cb);!1===Cb&&((1===ta.pipesCount&&ta.pipes===ya||1<ta.pipesCount&&-1!==J(ta.pipes,ya))&&!Ra&&(za("false write response, pause",ta.awaitDrain),ta.awaitDrain++),Od.pause())}function fc(Cb){za("onerror",Cb);ld();ya.removeListener("error",fc);0===ya.listeners("error").length&&Ea(ya,Cb)}function Jc(){ya.removeListener("finish",Nb);ld()}function Nb(){za("onfinish");ya.removeListener("close",
Jc);ld()}function ld(){za("unpipe");Od.unpipe(ya)}var Od=this,ta=this._readableState;switch(ta.pipesCount){case 0:ta.pipes=ya;break;case 1:ta.pipes=[ta.pipes,ya];break;default:ta.pipes.push(ya)}ta.pipesCount+=1;za("pipe count=%d opts=%j",ta.pipesCount,Sa);Sa=Sa&&!1===Sa.end||ya===K.stdout||ya===K.stderr?ld:mc;if(ta.endEmitted)K.nextTick(Sa);else Od.once("end",Sa);ya.on("unpipe",Qb);var Pa=e(Od);ya.on("drain",Pa);var Ra=!1;Od.on("data",Yb);g(ya,"error",fc);ya.once("close",Jc);ya.once("finish",Nb);
ya.emit("pipe",Od);ta.flowing||(za("pipe resume"),Od.resume());return ya};h.prototype.unpipe=function(ya){var Sa=this._readableState,Qb={hasUnpiped:!1};if(0===Sa.pipesCount)return this;if(1===Sa.pipesCount){if(ya&&ya!==Sa.pipes)return this;ya||(ya=Sa.pipes);Sa.pipes=null;Sa.pipesCount=0;Sa.flowing=!1;ya&&ya.emit("unpipe",this,Qb);return this}if(!ya){ya=Sa.pipes;Qb=Sa.pipesCount;Sa.pipes=null;Sa.pipesCount=0;Sa.flowing=!1;for(Sa=0;Sa<Qb;Sa++)ya[Sa].emit("unpipe",this,{hasUnpiped:!1});return this}var mc=
J(Sa.pipes,ya);if(-1===mc)return this;Sa.pipes.splice(mc,1);--Sa.pipesCount;1===Sa.pipesCount&&(Sa.pipes=Sa.pipes[0]);ya.emit("unpipe",this,Qb);return this};h.prototype.on=function(ya,Sa){Sa=P.prototype.on.call(this,ya,Sa);var Qb=this._readableState;"data"===ya?(Qb.readableListening=0<this.listenerCount("readable"),!1!==Qb.flowing&&this.resume()):"readable"!==ya||Qb.endEmitted||Qb.readableListening||(Qb.readableListening=Qb.needReadable=!0,Qb.flowing=!1,Qb.emittedReadable=!1,za("on readable",Qb.length,
Qb.reading),Qb.length?a(this):Qb.reading||K.nextTick(p,this));return Sa};h.prototype.addListener=h.prototype.on;h.prototype.removeListener=function(ya,Sa){Sa=P.prototype.removeListener.call(this,ya,Sa);"readable"===ya&&K.nextTick(l,this);return Sa};h.prototype.removeAllListeners=function(ya){var Sa=P.prototype.removeAllListeners.apply(this,arguments);"readable"!==ya&&void 0!==ya||K.nextTick(l,this);return Sa};h.prototype.resume=function(){var ya=this._readableState;ya.flowing||(za("resume"),ya.flowing=
!ya.readableListening,ya.resumeScheduled||(ya.resumeScheduled=!0,K.nextTick(u,this,ya)));ya.paused=!1;return this};h.prototype.pause=function(){za("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(za("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};h.prototype.wrap=function(ya){var Sa=this,Qb=this._readableState,mc=!1;ya.on("end",function(){za("wrapped end");if(Qb.decoder&&!Qb.ended){var fc=Qb.decoder.end();
fc&&fc.length&&Sa.push(fc)}Sa.push(null)});ya.on("data",function(fc){za("wrapped data");Qb.decoder&&(fc=Qb.decoder.write(fc));Qb.objectMode&&(null===fc||void 0===fc)||!(Qb.objectMode||fc&&fc.length)||Sa.push(fc)||(mc=!0,ya.pause())});for(var Yb in ya)void 0===this[Yb]&&"function"===typeof ya[Yb]&&(this[Yb]=function(fc){return function(){return ya[fc].apply(ya,arguments)}}(Yb));for(Yb=0;Yb<ua.length;Yb++)ya.on(ua[Yb],this.emit.bind(this,ua[Yb]));this._read=function(fc){za("wrapped _read",fc);mc&&(mc=
!1,ya.resume())};return this};"function"===typeof Symbol&&(h.prototype[Symbol.asyncIterator]=function(){void 0===ib&&(ib=Bla());return ib(this)});Object.defineProperty(h.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(h.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(h.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},
set:function(ya){this._readableState&&(this._readableState.flowing=ya)}});h._fromList=z;Object.defineProperty(h.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(h.from=function(ya,Sa){void 0===ob&&(ob=xla());return ob(h,ya,Sa)});return vT}function K6(){function g(e,l){var p=this._transformState;p.transforming=!1;var u=p.writecb;if(null===u)return this.emit("error",new a);p.writechunk=null;p.writecb=null;null!=l&&this.push(l);
u(e);e=this._readableState;e.reading=!1;(e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);b.call(this,e);this._transformState={afterTransform:g.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush));this.on("prefinish",
h)}function h(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(l,p){f(e,l,p)})}function f(e,l,p){if(l)return e.emit("error",l);null!=p&&e.push(p);if(e._writableState.length)throw new k;if(e._transformState.transforming)throw new d;return e.push(null)}if(L6)return wT;L6=!0;wT=c;var m=kA().codes,n=m.ERR_METHOD_NOT_IMPLEMENTED,a=m.ERR_MULTIPLE_CALLBACK,d=m.ERR_TRANSFORM_ALREADY_TRANSFORMING,k=m.ERR_TRANSFORM_WITH_LENGTH_0,b=lA();Gk(c,
b);c.prototype.push=function(e,l){this._transformState.needTransform=!1;return b.prototype.push.call(this,e,l)};c.prototype._transform=function(e,l,p){p(new n("_transform()"))};c.prototype._write=function(e,l,p){var u=this._transformState;u.writecb=p;u.writechunk=e;u.writeencoding=l;u.transforming||(e=this._readableState,(u.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark))};c.prototype._read=function(e){e=this._transformState;null===e.writechunk||e.transforming?
e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))};c.prototype._destroy=function(e,l){b.prototype._destroy.call(this,e,function(p){l(p)})};return wT}function mA(g,c){if(!((this||lq)instanceof mA))return new mA(g,c);c=c||{};M6.call(this||lq,Dla(c,{objectMode:!0}));(this||lq)._iterator=g;(this||lq)._options=c;this.on("end",(this||lq).destroy.bind(this||lq,null,null))}function N6(g,c,h){c&&"string"!=typeof c&&(c=c.message||c.name);Ela(this||vl,{type:g,
name:g,cause:"string"!=typeof c?c:h,message:c},"ewr")}function xT(g,c){Error.call(this||vl);Error.captureStackTrace&&Error.captureStackTrace(this||vl,(this||vl).constructor);N6.call(this||vl,"CustomError",g,c)}function Fla(g,c,h){var f=function(m,n){N6.call(this||vl,c,m,n);"FilesystemError"==c&&((this||vl).code=(this||vl).cause.code,(this||vl).path=(this||vl).cause.path,(this||vl).errno=(this||vl).cause.errno,(this||vl).message=(g.errno[(this||vl).cause.errno]?g.errno[(this||vl).cause.errno].description:
(this||vl).cause.message)+((this||vl).cause.path?" ["+(this||vl).cause.path+"]":""));Error.call(this||vl);Error.captureStackTrace&&Error.captureStackTrace(this||vl,f)};f.prototype=h?new h:new xT;return f}function ID(g){(this||wl).db=(this||wl)._levelup=g;(this||wl).batch=g.db.batch();(this||wl).ops=[];(this||wl).length=0}function O6(g,c){if(null==g)throw new TypeError("Cannot convert first argument to object");for(var h=Object(g),f=1;f<arguments.length;f++){var m=arguments[f];if(null!=m)for(var n=
Object.keys(Object(m)),a=0,d=n.length;a<d;a++){var k=n[a],b=Object.getOwnPropertyDescriptor(m,k);void 0!==b&&b.enumerable&&(h[k]=m[k])}}return h}function P6(){function g(k){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(k)}function c(k){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(k)}
function h(k,b){return(h=Object.setPrototypeOf||function(e,l){return e.__proto__=l,e})(k,b)}function f(k,b,e){e||(e=Error);e=function(l){function p(u,x,z){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");!0;u=c(p).call(this,"string"==typeof b?b:b(u,x,z));if(!u||"object"!==g(u)&&"function"!=typeof u){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");u=this}return u.code=k,u}return!function(u,x){if("function"!=typeof x&&
null!==x)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(x&&x.prototype,{constructor:{value:u,writable:!0,configurable:!0}});x&&h(u,x)}(p,l),p}(e);d[k]=e}function m(k,b){if(Array.isArray(k)){var e=k.length;return k=k.map(function(l){return String(l)}),2<e?"one of ".concat(b," ").concat(k.slice(0,e-1).join(", "),", or ")+k[e-1]:2===e?"one of ".concat(b," ").concat(k[0]," or ").concat(k[1]):"of ".concat(b," ").concat(k[0])}return"of ".concat(b," ").concat(String(k))}
if(Q6)return yT;Q6=!0;var n,a,d={};return f("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),f("ERR_INVALID_ARG_TYPE",function(k,b,e){var l;if(void 0===n&&(n=zT()),n("string"==typeof k,"'name' must be a string"),"string"==typeof b&&"not "===b.substr(0,4)?(l="must not be",b=b.replace(/^not /,"")):l="must be",function(u,x,z){return(void 0===z||z>u.length)&&(z=u.length),u.substring(z-x.length,z)===x}(k," argument"))k="The ".concat(k," ").concat(l," ").concat(m(b,"type"));else{var p=
function(u,x,z){return"number"!=typeof z&&(z=0),!(z+x.length>u.length)&&-1!==u.indexOf(x,z)}(k,".")?"property":"argument";k='The "'.concat(k,'" ').concat(p," ").concat(l," ").concat(m(b,"type"))}return k+=". Received type ".concat(g(e))},TypeError),f("ERR_INVALID_ARG_VALUE",function(k,b){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===a&&(a=Hh);var l=a.inspect(b);return 128<l.length&&(l="".concat(l.slice(0,128),"...")),"The argument '".concat(k,"' ").concat(e,". Received ").concat(l)},
TypeError),f("ERR_INVALID_RETURN_VALUE",function(k,b,e){var l;return l=e&&e.constructor&&e.constructor.name?"instance of ".concat(e.constructor.name):"type ".concat(g(e)),"Expected ".concat(k,' to be returned from the "').concat(b,'"')+" function but got ".concat(l,".")},TypeError),f("ERR_MISSING_ARGS",function(){for(var k=arguments.length,b=Array(k),e=0;e<k;e++)b[e]=arguments[e];void 0===n&&(n=zT());n(0<b.length,"At least one arg needs to be specified");k="The ";e=b.length;switch(b=b.map(function(l){return'"'.concat(l,
'"')}),e){case 1:k+="".concat(b[0]," argument");break;case 2:k+="".concat(b[0]," and ").concat(b[1]," arguments");break;default:k+=b.slice(0,e-1).join(", "),k+=", and ".concat(b[e-1]," arguments")}return"".concat(k," must be specified")},TypeError),yT.codes=d,yT}function Gla(){function g(P,da){for(var fa=0;fa<da.length;fa++){var ka=da[fa];ka.enumerable=ka.enumerable||!1;ka.configurable=!0;"value"in ka&&(ka.writable=!0);Object.defineProperty(P,ka.key,ka)}}function c(P,da){return!da||"object"!==k(da)&&
"function"!=typeof da?h(P):da}function h(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function f(P){var da="function"==typeof Map?new Map:void 0;return(f=function(fa){function ka(){return n(fa,arguments,d(this).constructor)}if(null===fa||(za=fa,-1===Function.toString.call(za).indexOf("[native code]")))return fa;var za;if("function"!=typeof fa)throw new TypeError("Super expression must either be null or a function");if(void 0!==da){if(da.has(fa))return da.get(fa);
da.set(fa,ka)}return ka.prototype=Object.create(fa.prototype,{constructor:{value:ka,enumerable:!1,writable:!0,configurable:!0}}),a(ka,fa)})(P)}function m(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(P){return!1}}function n(P,da,fa){return(n=m()?Reflect.construct:function(ka,za,Ia){var N=[null];N.push.apply(N,za);ka=new (Function.bind.apply(ka,
N));return Ia&&a(ka,Ia.prototype),ka}).apply(null,arguments)}function a(P,da){return(a=Object.setPrototypeOf||function(fa,ka){return fa.__proto__=ka,fa})(P,da)}function d(P){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(da){return da.__proto__||Object.getPrototypeOf(da)})(P)}function k(P){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(da){return typeof da}:function(da){return da&&"function"==typeof Symbol&&da.constructor===Symbol&&da!==Symbol.prototype?
"symbol":typeof da})(P)}function b(P,da,fa){return(void 0===fa||fa>P.length)&&(fa=P.length),P.substring(fa-da.length,fa)===da}function e(P){var da=Object.keys(P),fa=Object.create(Object.getPrototypeOf(P));return da.forEach(function(ka){fa[ka]=P[ka]}),Object.defineProperty(fa,"message",{value:P.message}),fa}function l(P){return x(P,{compact:!1,customInspect:!1,depth:1E3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function p(P,da,fa){var ka="",za="",Ia=0,N="",
ia=!1,W=l(P),ca=W.split("\n"),sa=l(da).split("\n"),la=0,Aa="";if("strictEqual"===fa&&"object"===k(P)&&"object"===k(da)&&null!==P&&null!==da&&(fa="strictEqualObject"),1===ca.length&&1===sa.length&&ca[0]!==sa[0]){var ib=ca[0].length+sa[0].length;if(10>=ib){if(!("object"===k(P)&&null!==P||"object"===k(da)&&null!==da||0===P&&0===da))return"".concat(T[fa],"\n\n")+"".concat(ca[0]," !== ").concat(sa[0],"\n")}else if("strictEqualObject"!==fa&&ib<(u.stderr&&u.stderr.isTTY?u.stderr.columns:80)){for(;ca[0][la]===
sa[0][la];)la++;2<la&&(Aa="\n  ".concat(function(ya,Sa){if(Sa=Math.floor(Sa),0==ya.length||0==Sa)return"";var Qb=ya.length*Sa;for(Sa=Math.floor(Math.log(Sa)/Math.log(2));Sa;)ya+=ya,Sa--;return ya+ya.substring(0,Qb-ya.length)}(" ",la),"^"),la=0)}}P=ca[ca.length-1];for(da=sa[sa.length-1];P===da&&(2>la++?N="\n  ".concat(P).concat(N):ka=P,ca.pop(),sa.pop(),0!==ca.length&&0!==sa.length);)P=ca[ca.length-1],da=sa[sa.length-1];P=Math.max(ca.length,sa.length);if(0===P){ka=W.split("\n");if(30<ka.length)for(ka[26]=
"".concat(E,"...").concat(K);27<ka.length;)ka.pop();return"".concat(T.notIdentical,"\n\n").concat(ka.join("\n"),"\n")}3<la&&(N="\n".concat(E,"...").concat(K).concat(N),ia=!0);""!==ka&&(N="\n  ".concat(ka).concat(N),ka="");W=0;fa=T[fa]+"\n".concat(G,"+ actual").concat(K," ").concat(J,"- expected").concat(K);da=" ".concat(E,"...").concat(K," Lines skipped");for(la=0;la<P;la++){ib=la-Ia;if(ca.length<la+1)1<ib&&2<la&&(4<ib?(za+="\n".concat(E,"...").concat(K),ia=!0):3<ib&&(za+="\n  ".concat(sa[la-2]),
W++),za+="\n  ".concat(sa[la-1]),W++),Ia=la,ka+="\n".concat(J,"-").concat(K," ").concat(sa[la]),W++;else if(sa.length<la+1)1<ib&&2<la&&(4<ib?(za+="\n".concat(E,"...").concat(K),ia=!0):3<ib&&(za+="\n  ".concat(ca[la-2]),W++),za+="\n  ".concat(ca[la-1]),W++),Ia=la,za+="\n".concat(G,"+").concat(K," ").concat(ca[la]),W++;else{var ob=sa[la],Ea=ca[la],ua=Ea!==ob&&(!b(Ea,",")||Ea.slice(0,-1)!==ob);ua&&b(ob,",")&&ob.slice(0,-1)===Ea&&(ua=!1,Ea+=",");ua?(1<ib&&2<la&&(4<ib?(za+="\n".concat(E,"...").concat(K),
ia=!0):3<ib&&(za+="\n  ".concat(ca[la-2]),W++),za+="\n  ".concat(ca[la-1]),W++),Ia=la,za+="\n".concat(G,"+").concat(K," ").concat(Ea),ka+="\n".concat(J,"-").concat(K," ").concat(ob),W+=2):(za+=ka,ka="",1!==ib&&0!==la||(za+="\n  ".concat(Ea),W++))}if(20<W&&la<P-2)return"".concat(fa).concat(da,"\n").concat(za,"\n").concat(E,"...").concat(K).concat(ka,"\n")+"".concat(E,"...").concat(K)}return"".concat(fa).concat(ia?da:"","\n").concat(za).concat(ka).concat(N).concat(Aa)}if(R6)return S6;R6=!0;var u=Li,
x=Hh.inspect,z=P6().codes.ERR_INVALID_ARG_TYPE,E="",G="",J="",K="",T={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',
notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};return S6=function(P){function da(ka){if(!(this instanceof da))throw new TypeError("Cannot call a class as a function");if(!0,"object"!==k(ka)||null===ka)throw new z("options","Object",ka);var za=ka.message,Ia=ka.operator,N=ka.stackStartFn,ia=ka.actual;ka=ka.expected;var W=Error.stackTraceLimit;if(Error.stackTraceLimit=0,
null!=za)var ca=c(this,d(da).call(this,String(za)));else if(u.stderr&&u.stderr.isTTY&&(u.stderr&&u.stderr.getColorDepth&&1!==u.stderr.getColorDepth()?(E="\u001b[34m",G="\u001b[32m",K="\u001b[39m",J="\u001b[31m"):(E="",G="",K="",J="")),"object"===k(ia)&&null!==ia&&"object"===k(ka)&&null!==ka&&"stack"in ia&&ia instanceof Error&&"stack"in ka&&ka instanceof Error&&(ia=e(ia),ka=e(ka)),"deepStrictEqual"===Ia||"strictEqual"===Ia)ca=c(this,d(da).call(this,p(ia,ka,Ia)));else if("notDeepStrictEqual"===Ia||
"notStrictEqual"===Ia){ca=T[Ia];var sa=l(ia).split("\n");if("notStrictEqual"===Ia&&"object"===k(ia)&&null!==ia&&(ca=T.notStrictEqualObject),30<sa.length)for(sa[26]="".concat(E,"...").concat(K);27<sa.length;)sa.pop();ca=1===sa.length?c(this,d(da).call(this,"".concat(ca," ").concat(sa[0]))):c(this,d(da).call(this,"".concat(ca,"\n\n").concat(sa.join("\n"),"\n")))}else{ca=l(ia);sa="";var la=T[Ia];"notDeepEqual"===Ia||"notEqual"===Ia?1024<(ca="".concat(T[Ia],"\n\n").concat(ca)).length&&(ca="".concat(ca.slice(0,
1021),"...")):(sa="".concat(l(ka)),512<ca.length&&(ca="".concat(ca.slice(0,509),"...")),512<sa.length&&(sa="".concat(sa.slice(0,509),"...")),"deepEqual"===Ia||"equal"===Ia?ca="".concat(la,"\n\n").concat(ca,"\n\nshould equal\n\n"):sa=" ".concat(Ia," ").concat(sa));ca=c(this,d(da).call(this,"".concat(ca).concat(sa)))}return Error.stackTraceLimit=W,ca.generatedMessage=!za,Object.defineProperty(h(ca),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),ca.code="ERR_ASSERTION",
ca.actual=ia,ca.expected=ka,ca.operator=Ia,Error.captureStackTrace&&Error.captureStackTrace(h(ca),N),ca.stack,ca.name="AssertionError",c(ca)}var fa;return!function(ka,za){if("function"!=typeof za&&null!==za)throw new TypeError("Super expression must either be null or a function");ka.prototype=Object.create(za&&za.prototype,{constructor:{value:ka,writable:!0,configurable:!0}});za&&a(ka,za)}(da,P),fa=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},
{key:x.custom,value:function(ka,za){return x(this,function(Ia){for(var N=1;N<arguments.length;N++){var ia=null!=arguments[N]?arguments[N]:{},W=Object.keys(ia);"function"==typeof Object.getOwnPropertySymbols&&(W=W.concat(Object.getOwnPropertySymbols(ia).filter(function(ca){return Object.getOwnPropertyDescriptor(ia,ca).enumerable})));W.forEach(function(ca){var sa=ia[ca];ca in Ia?Object.defineProperty(Ia,ca,{value:sa,enumerable:!0,configurable:!0,writable:!0}):Ia[ca]=sa})}return Ia}({},za,{customInspect:!1,
depth:0}))}}],g(da.prototype,fa),da}(f(Error))}function T6(g,c){if(!(g=function(h){if(Array.isArray(h))return h}(g)||function(h,f){var m=[],n=!0,a=!1,d=void 0;try{for(var k,b=h[Symbol.iterator]();!(n=(k=b.next()).done)&&(m.push(k.value),!f||m.length!==f);n=!0);}catch(e){a=!0,d=e}finally{try{n||null==b.return||b.return()}finally{if(a)throw d;}}return m}(g,c)))throw new TypeError("Invalid attempt to destructure non-iterable instance");return g}function mq(g){return(mq="function"==typeof Symbol&&"symbol"==
typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(g)}function AT(g){return g.call.bind(g)}function Hla(g){if(0===g.length||10<g.length)return!0;for(var c=0;c<g.length;c++){var h=g.charCodeAt(c);if(48>h||57<h)return!0}return 10===g.length&&g>=Math.pow(2,32)}function MJ(g){return Object.keys(g).filter(Hla).concat(NJ(g).filter(Object.prototype.propertyIsEnumerable.bind(g)))}function U6(g,
c){if(g===c)return 0;for(var h=g.length,f=c.length,m=0,n=Math.min(h,f);m<n;++m)if(g[m]!==c[m]){h=g[m];f=c[m];break}return h<f?-1:f<h?1:0}function tp(g,c,h,f){if(g===c)return 0!==g||!h||V6(g,c);if(h){if("object"!==mq(g))return"number"==typeof g&&BT(g)&&BT(c);if("object"!==mq(c)||null===g||null===c||Object.getPrototypeOf(g)!==Object.getPrototypeOf(c))return!1}else{if(null===g||"object"!==mq(g))return(null===c||"object"!==mq(c))&&g==c;if(null===c||"object"!==mq(c))return!1}var m=W6(g);if(m!==W6(c))return!1;
if(Array.isArray(g)){if(g.length!==c.length)return!1;m=MJ(g);var n=MJ(c);return m.length===n.length&&JD(g,c,h,f,1,m)}if("[object Object]"===m&&(!OJ(g)&&OJ(c)||!PJ(g)&&PJ(c)))return!1;if(X6(g)){if(!X6(c)||Date.prototype.getTime.call(g)!==Date.prototype.getTime.call(c))return!1}else if(Y6(g)){if(!Y6(c)||(Ila?g.source!==c.source||g.flags!==c.flags:RegExp.prototype.toString.call(g)!==RegExp.prototype.toString.call(c)))return!1}else if(Jla(g)||g instanceof Error){if(g.message!==c.message||g.name!==c.name)return!1}else{if(Kla(g)){if(h||
!Lla(g)&&!Mla(g)){if(!function(a,d){return a.byteLength===d.byteLength&&0===U6(new Uint8Array(a.buffer,a.byteOffset,a.byteLength),new Uint8Array(d.buffer,d.byteOffset,d.byteLength))}(g,c))return!1}else if(!function(a,d){if(a.byteLength!==d.byteLength)return!1;for(var k=0;k<a.byteLength;k++)if(a[k]!==d[k])return!1;return!0}(g,c))return!1;m=MJ(g);n=MJ(c);return m.length===n.length&&JD(g,c,h,f,0,m)}if(PJ(g))return!(!PJ(c)||g.size!==c.size)&&JD(g,c,h,f,2);if(OJ(g))return!(!OJ(c)||g.size!==c.size)&&JD(g,
c,h,f,3);if(Nla(g)){if(g.byteLength!==c.byteLength||0!==U6(new Uint8Array(g),new Uint8Array(c)))return!1}else if(Ola(g)&&!function(a,d){return Z6(a)?Z6(d)&&V6(Number.prototype.valueOf.call(a),Number.prototype.valueOf.call(d)):$6(a)?$6(d)&&String.prototype.valueOf.call(a)===String.prototype.valueOf.call(d):a7(a)?a7(d)&&Boolean.prototype.valueOf.call(a)===Boolean.prototype.valueOf.call(d):b7(a)?b7(d)&&BigInt.prototype.valueOf.call(a)===BigInt.prototype.valueOf.call(d):Pla(d)&&Symbol.prototype.valueOf.call(a)===
Symbol.prototype.valueOf.call(d)}(g,c))return!1}return JD(g,c,h,f,0)}function c7(g,c){return c.filter(function(h){return QJ(g,h)})}function JD(g,c,h,f,m,n){if(5===arguments.length){n=Object.keys(g);var a=Object.keys(c);if(n.length!==a.length)return!1}for(var d=0;d<n.length;d++)if(!KD(c,n[d]))return!1;if(h&&5===arguments.length)if(a=NJ(g),0!==a.length){var k=0;for(d=0;d<a.length;d++){var b=a[d];if(QJ(g,b)){if(!QJ(c,b))return!1;n.push(b);k++}else if(QJ(c,b))return!1}d=NJ(c);if(a.length!==d.length&&
c7(c,d).length!==k)return!1}else if(a=NJ(c),0!==a.length&&0!==c7(c,a).length)return!1;if(0===n.length&&(0===m||1===m&&0===g.length||0===g.size))return!0;if(void 0===f)f={val1:new Map,val2:new Map,position:0};else{a=f.val1.get(g);if(void 0!==a&&(k=f.val2.get(c),void 0!==k))return a===k;f.position++}f.val1.set(g,f.position);f.val2.set(c,f.position);a=Qla(g,c,h,n,f,m);return f.val1.delete(g),f.val2.delete(c),a}function d7(g,c,h,f){for(var m=RJ(g),n=0;n<m.length;n++){var a=m[n];if(tp(c,a,h,f))return g.delete(a),
!0}return!1}function e7(g){switch(mq(g)){case "undefined":return null;case "object":return;case "symbol":return!1;case "string":g=+g;case "number":if(BT(g))return!1}return!0}function f7(g,c,h,f,m,n){for(var a=RJ(g),d=0;d<a.length;d++){var k=a[d];if(tp(h,k,m,n)&&tp(f,c.get(k),m,n))return g.delete(k),!0}return!1}function Qla(g,c,h,f,m,n){var a=0;if(2===n){if(!function(d,k,b,e){for(var l=null,p=RJ(d),u=0;u<p.length;u++){var x=p[u];if("object"===mq(x)&&null!==x)null===l&&(l=new Set),l.add(x);else if(!k.has(x)){if(b)return!1;
var z=d,E=k,G=e7(x);if(null!=G?!G:!E.has(G)||z.has(G))return!1;null===l&&(l=new Set);l.add(x)}}if(null!==l){k=RJ(k);for(p=0;p<k.length;p++)if(u=k[p],"object"===mq(u)&&null!==u){if(!d7(l,u,b,e))return!1}else if(!b&&!d.has(u)&&!d7(l,u,b,e))return!1;return 0===l.size}return!0}(g,c,h,m))return!1}else if(3===n){if(!function(d,k,b,e){for(var l=null,p=g7(d),u=0;u<p.length;u++){var x=T6(p[u],2),z=x[0],E=x[1];if("object"===mq(z)&&null!==z)null===l&&(l=new Set),l.add(z);else if(x=k.get(z),void 0===x&&!k.has(z)||
!tp(E,x,b,e)){if(b)return!1;x=d;var G=k,J=e,K=e7(z);if(null!=K)x=K;else{var T=G.get(K);x=!(void 0===T&&!G.has(K)||!tp(E,T,!1,J))&&!x.has(K)&&tp(E,T,!1,J)}if(!x)return!1;null===l&&(l=new Set);l.add(z)}}if(null!==l){k=g7(k);for(p=0;p<k.length;p++)if(u=T6(k[p],2),u=(z=u[0],u[1]),"object"===mq(z)&&null!==z){if(!f7(l,d,z,u,b,e))return!1}else if(!(b||d.has(z)&&tp(d.get(z),u,!1,e)||f7(l,d,z,u,!1,e)))return!1;return 0===l.size}return!0}(g,c,h,m))return!1}else if(1===n)for(;a<g.length;a++){if(!KD(g,a)){if(KD(c,
a))return!1;for(f=Object.keys(g);a<f.length;a++)if(n=f[a],!KD(c,n)||!tp(g[n],c[n],h,m))return!1;return f.length===Object.keys(c).length}if(!KD(c,a)||!tp(g[a],c[a],h,m))return!1}for(a=0;a<f.length;a++)if(n=f[a],!tp(g[n],c[n],h,m))return!1;return!0}function zT(){function g(ca){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(sa){return typeof sa}:function(sa){return sa&&"function"==typeof Symbol&&sa.constructor===Symbol&&sa!==Symbol.prototype?"symbol":typeof sa})(ca)}function c(){u=
h7.isDeepEqual;x=h7.isDeepStrictEqual}function h(ca){if(ca.message instanceof Error)throw ca.message;throw new P(ca);}function f(ca,sa,la,Aa){if(!la){var ib=!1;if(0===sa)ib=!0,Aa="No value argument passed to `assert.ok()`";else if(Aa instanceof Error)throw Aa;ca=new P({actual:la,expected:!0,message:Aa,operator:"==",stackStartFn:ca});throw ca.generatedMessage=ib,ca;}}function m(){for(var ca=arguments.length,sa=Array(ca),la=0;la<ca;la++)sa[la]=arguments[la];f.apply(void 0,[m,sa.length].concat(sa))}
function n(ca,sa,la,Aa){if("function"!=typeof sa){if(ka(sa))return sa.test(ca);if(2===arguments.length)throw new G("expected",["Function","RegExp"],sa);if("object"!==g(ca)||null===ca){var ib=new P({actual:ca,expected:sa,message:la,operator:"deepStrictEqual",stackStartFn:Aa});throw ib.operator=Aa.name,ib;}var ob=Object.keys(sa);if(sa instanceof Error)ob.push("name","message");else if(0===ob.length)throw new J("error",sa,"may not be an empty object");return void 0===u&&c(),ob.forEach(function(Ea){if(!("string"==
typeof ca[Ea]&&ka(sa[Ea])&&sa[Ea].test(ca[Ea])||Ea in ca&&x(ca[Ea],sa[Ea]))){if(!la){Ea=new W(ca,ob);var ua=new W(sa,ob,ca);Ea=new P({actual:Ea,expected:ua,operator:"deepStrictEqual",stackStartFn:Aa});throw Ea.actual=ca,Ea.expected=sa,Ea.operator=Aa.name,Ea;}h({actual:ca,expected:sa,message:la,operator:Aa.name,stackStartFn:Aa})}}),!0}return void 0!==sa.prototype&&ca instanceof sa||!Error.isPrototypeOf(sa)&&!0===sa.call({},ca)}function a(ca){if("function"!=typeof ca)throw new G("fn","Function",ca);
try{ca()}catch(sa){return sa}return ia}function d(ca){return fa(ca)||null!==ca&&"object"===g(ca)&&"function"==typeof ca.then&&"function"==typeof ca.catch}function k(ca){return Promise.resolve().then(function(){var sa;if("function"==typeof ca){if(!d(sa=ca()))throw new K("instance of Promise","promiseFn",sa);}else{if(!d(ca))throw new G("promiseFn",["Function","Promise"],ca);sa=ca}return Promise.resolve().then(function(){return sa}).then(function(){return ia}).catch(function(la){return la})})}function b(ca,
sa,la,Aa){if("string"==typeof la){if(4===arguments.length)throw new G("error",["Object","Error","Function","RegExp"],la);if("object"===g(sa)&&null!==sa){if(sa.message===la)throw new E("error/message",'The error message "'.concat(sa.message,'" is identical to the message.'));}else if(sa===la)throw new E("error/message",'The error "'.concat(sa,'" is identical to the message.'));Aa=la;la=void 0}else if(null!=la&&"object"!==g(la)&&"function"!=typeof la)throw new G("error",["Object","Error","Function",
"RegExp"],la);if(sa===ia){var ib="";la&&la.name&&(ib+=" (".concat(la.name,")"));ib+=Aa?": ".concat(Aa):".";h({actual:void 0,expected:la,operator:ca.name,message:"Missing expected ".concat("rejects"===ca.name?"rejection":"exception").concat(ib),stackStartFn:ca})}if(la&&!n(sa,la,Aa,ca))throw sa;}function e(ca,sa,la,Aa){if(sa!==ia){if("string"==typeof la&&(Aa=la,la=void 0),!la||n(sa,la))Aa=Aa?": ".concat(Aa):".",h({actual:sa,expected:la,operator:ca.name,message:"Got unwanted ".concat("doesNotReject"===
ca.name?"rejection":"exception").concat(Aa,"\n")+'Actual message: "'.concat(sa&&sa.message,'"'),stackStartFn:ca});throw sa;}}function l(){for(var ca=arguments.length,sa=Array(ca),la=0;la<ca;la++)sa[la]=arguments[la];f.apply(void 0,[l,sa.length].concat(sa))}if(i7)return CT;i7=!0;var p=Li,u,x,z=P6().codes,E=z.ERR_AMBIGUOUS_ARGUMENT,G=z.ERR_INVALID_ARG_TYPE,J=z.ERR_INVALID_ARG_VALUE,K=z.ERR_INVALID_RETURN_VALUE,T=z.ERR_MISSING_ARGS,P=Gla(),da=Hh.inspect;z=Hh.types;var fa=z.isPromise,ka=z.isRegExp;z=
Object.assign?Object.assign:Rla.assign;var za=Object.is?Object.is:j7,Ia=!1,N=CT=m,ia={};N.fail=function Ea(sa,la,Aa,ib,ob){var ua=arguments.length;if(0===ua)var ya="Failed";else 1===ua?(Aa=sa,sa=void 0):(!1===Ia&&(Ia=!0,(p.emitWarning?p.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===ua&&(ib="!="));if(Aa instanceof Error)throw Aa;ua={actual:sa,expected:la,
operator:void 0===ib?"fail":ib,stackStartFn:ob||Ea};void 0!==Aa&&(ua.message=Aa);ua=new P(ua);throw ya&&(ua.message=ya,ua.generatedMessage=!0),ua;};N.AssertionError=P;N.ok=m;N.equal=function ob(la,Aa,ib){if(2>arguments.length)throw new T("actual","expected");la!=Aa&&h({actual:la,expected:Aa,message:ib,operator:"==",stackStartFn:ob})};N.notEqual=function Ea(Aa,ib,ob){if(2>arguments.length)throw new T("actual","expected");Aa==ib&&h({actual:Aa,expected:ib,message:ob,operator:"!=",stackStartFn:Ea})};
N.deepEqual=function ua(ib,ob,Ea){if(2>arguments.length)throw new T("actual","expected");void 0===u&&c();u(ib,ob)||h({actual:ib,expected:ob,message:Ea,operator:"deepEqual",stackStartFn:ua})};N.notDeepEqual=function ya(ob,Ea,ua){if(2>arguments.length)throw new T("actual","expected");void 0===u&&c();u(ob,Ea)&&h({actual:ob,expected:Ea,message:ua,operator:"notDeepEqual",stackStartFn:ya})};N.deepStrictEqual=function Sa(Ea,ua,ya){if(2>arguments.length)throw new T("actual","expected");void 0===u&&c();x(Ea,
ua)||h({actual:Ea,expected:ua,message:ya,operator:"deepStrictEqual",stackStartFn:Sa})};N.notDeepStrictEqual=function Qb(ua,ya,Sa){if(2>arguments.length)throw new T("actual","expected");void 0===u&&c();x(ua,ya)&&h({actual:ua,expected:ya,message:Sa,operator:"notDeepStrictEqual",stackStartFn:Qb})};N.strictEqual=function mc(ya,Sa,Qb){if(2>arguments.length)throw new T("actual","expected");za(ya,Sa)||h({actual:ya,expected:Sa,message:Qb,operator:"strictEqual",stackStartFn:mc})};N.notStrictEqual=function Yb(Sa,
Qb,mc){if(2>arguments.length)throw new T("actual","expected");za(Sa,Qb)&&h({actual:Sa,expected:Qb,message:mc,operator:"notStrictEqual",stackStartFn:Yb})};var W=function fc(Qb,mc,Yb){var Jc=this;if(!(this instanceof fc))throw new TypeError("Cannot call a class as a function");!0;mc.forEach(function(Nb){Nb in Qb&&(void 0!==Yb&&"string"==typeof Yb[Nb]&&ka(Qb[Nb])&&Qb[Nb].test(Yb[Nb])?Jc[Nb]=Yb[Nb]:Jc[Nb]=Qb[Nb])})};return N.throws=function Yb(mc){for(var fc=arguments.length,Jc=Array(1<fc?fc-1:0),Nb=
1;Nb<fc;Nb++)Jc[Nb-1]=arguments[Nb];b.apply(void 0,[Yb,a(mc)].concat(Jc))},N.rejects=function fc(Yb){for(var Jc=arguments.length,Nb=Array(1<Jc?Jc-1:0),ld=1;ld<Jc;ld++)Nb[ld-1]=arguments[ld];return k(Yb).then(function(Od){return b.apply(void 0,[fc,Od].concat(Nb))})},N.doesNotThrow=function Jc(fc){for(var Nb=arguments.length,ld=Array(1<Nb?Nb-1:0),Od=1;Od<Nb;Od++)ld[Od-1]=arguments[Od];e.apply(void 0,[Jc,a(fc)].concat(ld))},N.doesNotReject=function Nb(Jc){for(var ld=arguments.length,Od=Array(1<ld?ld-
1:0),ta=1;ta<ld;ta++)Od[ta-1]=arguments[ta];return k(Jc).then(function(Pa){return e.apply(void 0,[Nb,Pa].concat(Od))})},N.ifError=function ld(Nb){if(null!=Nb){var Od="ifError got unwanted exception: ";"object"===g(Nb)&&"string"==typeof Nb.message?0===Nb.message.length&&Nb.constructor?Od+=Nb.constructor.name:Od+=Nb.message:Od+=da(Nb);Od=new P({actual:Nb,expected:null,operator:"ifError",message:Od,stackStartFn:ld});Nb=Nb.stack;if("string"==typeof Nb){Nb=Nb.split("\n");Nb.shift();for(var ta=Od.stack.split("\n"),
Pa=0;Pa<Nb.length;Pa++){var Ra=ta.indexOf(Nb[Pa]);if(-1!==Ra){ta=ta.slice(0,Ra);break}}Od.stack="".concat(ta.join("\n"),"\n").concat(Nb.join("\n"))}throw Od;}},N.strict=z(l,N,{equal:N.strictEqual,deepEqual:N.deepStrictEqual,notEqual:N.notStrictEqual,notDeepEqual:N.notDeepStrictEqual}),N.strict.strict=N.strict,CT}function qk(g,c,h){if(!((this||ii)instanceof qk))return new qk(g,c,h);var f=this||ii;SJ.call(this||ii);this.setMaxListeners(Infinity);"function"===typeof c&&(h=c,c={});c=c||{};if(!g||"object"!==
typeof g){g=new Sla("First argument must be an abstract-leveldown compliant store");if("function"===typeof h)return TJ.nextTick(h,g);throw g;}Tla.strictEqual(typeof g.status,"string",".status required, old abstract-leveldown");(this||ii).options=nA(c);(this||ii)._db=g;(this||ii).db=new k7(g);this.open(h||function(m){m&&f.emit("error",m)});(this||ii).supports=Ula((this||ii).db.supports,{status:!1,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});Object.keys((this||ii).supports.additionalMethods).forEach(function(m){null==
(this||ii)[m]&&((this||ii)[m]=function(){return(this||ii).db[m].apply((this||ii).db,arguments)})},this||ii)}function LD(g,c){if(!g._isOpening()&&!g.isOpen())return TJ.nextTick(c,new l7("Database is not open")),!0}function vr(g,c){return Object.hasOwnProperty.call(g,c)&&c}function Vla(g){return g}function UJ(g){return g}function DT(g){return void 0===g||null===g||ET.isBuffer(g)}function wn(g){if(!((this||Ms)instanceof wn))return new wn(g);(this||Ms).opts=g||{};(this||Ms).encodings=FT}function Wla(g){return g.toString((this||
Bg).encoding)}function Xla(g){(this||Bg).charReceived=g.length%2;(this||Bg).charLength=(this||Bg).charReceived?2:0}function Yla(g){(this||Bg).charReceived=g.length%3;(this||Bg).charLength=(this||Bg).charReceived?3:0}function m7(){function g(G,J,K){(this||ji).chunk=G;(this||ji).encoding=J;(this||ji).callback=K}function c(G,J){var K=oA();G=G||{};var T=G.highWaterMark,P=G.objectMode?16:16384;(this||ji).highWaterMark=T||0===T?T:P;(this||ji).objectMode=!!G.objectMode;J instanceof K&&((this||ji).objectMode=
(this||ji).objectMode||!!G.writableObjectMode);(this||ji).highWaterMark=~~(this||ji).highWaterMark;(this||ji).needDrain=!1;(this||ji).ending=!1;(this||ji).ended=!1;(this||ji).finished=!1;(this||ji).decodeStrings=!1!==G.decodeStrings;(this||ji).defaultEncoding=G.defaultEncoding||"utf8";(this||ji).length=0;(this||ji).writing=!1;(this||ji).corked=0;(this||ji).sync=!0;(this||ji).bufferProcessing=!1;(this||ji).onwrite=function(da){b(J,da)};(this||ji).writecb=null;(this||ji).writelen=0;(this||ji).buffer=
[];(this||ji).pendingcb=0;(this||ji).prefinished=!1;(this||ji).errorEmitted=!1}function h(G){var J=oA();if(!((this||ji)instanceof h||(this||ji)instanceof J))return new h(G);(this||ji)._writableState=new c(G,this||ji);(this||ji).writable=!0;E.call(this||ji)}function f(G,J,K){var T=Error("write after end");G.emit("error",T);u.nextTick(function(){K(T)})}function m(G,J,K,T){var P=!0;if(!(z.isBuffer(K)||z.isString(K)||z.isNullOrUndefined(K)||J.objectMode)){var da=new TypeError("Invalid non-string/buffer chunk");
G.emit("error",da);u.nextTick(function(){T(da)});P=!1}return P}function n(G,J,K,T,P){var da=T;!J.objectMode&&!1!==J.decodeStrings&&z.isString(K)&&(K=new x(K,da));z.isBuffer(K)&&(T="buffer");da=J.objectMode?1:K.length;J.length+=da;var fa=J.length<J.highWaterMark;fa||(J.needDrain=!0);J.writing||J.corked?J.buffer.push(new g(K,T,P)):a(G,J,!1,da,K,T,P);return fa}function a(G,J,K,T,P,da,fa){J.writelen=T;J.writecb=fa;J.writing=!0;J.sync=!0;K?G._writev(P,J.onwrite):G._write(P,da,J.onwrite);J.sync=!1}function d(G,
J,K,T,P){K?u.nextTick(function(){J.pendingcb--;P(T)}):(J.pendingcb--,P(T));G._writableState.errorEmitted=!0;G.emit("error",T)}function k(G){G.writing=!1;G.writecb=null;G.length-=G.writelen;G.writelen=0}function b(G,J){var K=G._writableState,T=K.sync,P=K.writecb;k(K);if(J)d(G,K,T,J,P);else{var da=K.ending&&0===K.length&&!K.finished&&!K.writing;da||K.corked||K.bufferProcessing||!K.buffer.length||l(G,K);T?u.nextTick(function(){e(G,K,da,P)}):e(G,K,da,P)}}function e(G,J,K,T){!K&&0===J.length&&J.needDrain&&
(J.needDrain=!1,G.emit("drain"));J.pendingcb--;T();p(G,J)}function l(G,J){J.bufferProcessing=!0;if(G._writev&&1<J.buffer.length){for(var K=[],T=0;T<J.buffer.length;T++)K.push(J.buffer[T].callback);J.pendingcb++;a(G,J,!0,J.length,J.buffer,"",function(fa){for(var ka=0;ka<K.length;ka++)J.pendingcb--,K[ka](fa)});J.buffer=[]}else{for(T=0;T<J.buffer.length;T++){var P=J.buffer[T],da=P.chunk;a(G,J,!1,J.objectMode?1:da.length,da,P.encoding,P.callback);if(J.writing){T++;break}}T<J.buffer.length?J.buffer=J.buffer.slice(T):
J.buffer.length=0}J.bufferProcessing=!1}function p(G,J){var K=J.ending&&0===J.length&&!J.finished&&!J.writing;K&&(0===J.pendingcb?(J.prefinished||(J.prefinished=!0,G.emit("prefinish")),J.finished=!0,G.emit("finish")):J.prefinished||(J.prefinished=!0,G.emit("prefinish")));return K}if(n7)return GT;n7=!0;var u=Li;GT=h;var x=Rh.Buffer;h.WritableState=c;var z=xl;z.inherits=Gk;var E=Zw;z.inherits(h,E);h.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};h.prototype.write=
function(G,J,K){var T=(this||ji)._writableState,P=!1;z.isFunction(J)&&(K=J,J=null);z.isBuffer(G)?J="buffer":J||(J=T.defaultEncoding);z.isFunction(K)||(K=function(){});T.ended?f(this||ji,T,K):m(this||ji,T,G,K)&&(T.pendingcb++,P=n(this||ji,T,G,J,K));return P};h.prototype.cork=function(){(this||ji)._writableState.corked++};h.prototype.uncork=function(){var G=(this||ji)._writableState;G.corked&&(G.corked--,G.writing||G.corked||G.finished||G.bufferProcessing||!G.buffer.length||l(this||ji,G))};h.prototype._write=
function(G,J,K){K(Error("not implemented"))};h.prototype._writev=null;h.prototype.end=function(G,J,K){var T=(this||ji)._writableState;z.isFunction(G)?(K=G,J=G=null):z.isFunction(J)&&(K=J,J=null);z.isNullOrUndefined(G)||this.write(G,J);T.corked&&(T.corked=1,this.uncork());if(!T.ending&&!T.finished){G=this||ji;T.ending=!0;p(G,T);if(K)if(T.finished)u.nextTick(K);else G.once("finish",K);T.ended=!0}};return GT}function oA(){function g(d){if(!((this||nq)instanceof g))return new g(d);n.call(this||nq,d);
a.call(this||nq,d);d&&!1===d.readable&&((this||nq).readable=!1);d&&!1===d.writable&&((this||nq).writable=!1);(this||nq).allowHalfOpen=!0;d&&!1===d.allowHalfOpen&&((this||nq).allowHalfOpen=!1);this.once("end",c)}function c(){(this||nq).allowHalfOpen||(this||nq)._writableState.ended||h.nextTick((this||nq).end.bind(this||nq))}if(o7)return HT;o7=!0;var h=Li;HT=g;var f=Object.keys||function(d){var k=[],b;for(b in d)k.push(b);return k},m=xl;m.inherits=Gk;var n=p7(),a=m7();m.inherits(g,n);(function(d,k){for(var b=
0,e=d.length;b<e;b++)k(d[b],b)})(f(a.prototype),function(d){g.prototype[d]||(g.prototype[d]=a.prototype[d])});return HT}function p7(){function g(P,da){var fa=oA();P=P||{};var ka=P.highWaterMark,za=P.objectMode?16:16384;(this||Pf).highWaterMark=ka||0===ka?ka:za;(this||Pf).highWaterMark=~~(this||Pf).highWaterMark;(this||Pf).buffer=[];(this||Pf).length=0;(this||Pf).pipes=null;(this||Pf).pipesCount=0;(this||Pf).flowing=null;(this||Pf).ended=!1;(this||Pf).endEmitted=!1;(this||Pf).reading=!1;(this||Pf).sync=
!0;(this||Pf).needReadable=!1;(this||Pf).emittedReadable=!1;(this||Pf).readableListening=!1;(this||Pf).objectMode=!!P.objectMode;da instanceof fa&&((this||Pf).objectMode=(this||Pf).objectMode||!!P.readableObjectMode);(this||Pf).defaultEncoding=P.defaultEncoding||"utf8";(this||Pf).ranOut=!1;(this||Pf).awaitDrain=0;(this||Pf).readingMore=!1;(this||Pf).decoder=null;(this||Pf).encoding=null;P.encoding&&(K||(K=IT.StringDecoder),(this||Pf).decoder=new K(P.encoding),(this||Pf).encoding=P.encoding)}function c(P){oA();
if(!((this||Pf)instanceof c))return new c(P);(this||Pf)._readableState=new g(P,this||Pf);(this||Pf).readable=!0;G.call(this||Pf)}function h(P,da,fa,ka,za){var Ia=fa;var N=null;J.isBuffer(Ia)||J.isString(Ia)||J.isNullOrUndefined(Ia)||da.objectMode||(N=new TypeError("Invalid non-string/buffer chunk"));(Ia=N)?P.emit("error",Ia):J.isNullOrUndefined(fa)?(da.reading=!1,da.ended||(da.decoder&&!da.ended&&(fa=da.decoder.end())&&fa.length&&(da.buffer.push(fa),da.length+=da.objectMode?1:fa.length),da.ended=
!0,m(P))):da.objectMode||fa&&0<fa.length?da.ended&&!za?(fa=Error("stream.push() after EOF"),P.emit("error",fa)):da.endEmitted&&za?(fa=Error("stream.unshift() after end event"),P.emit("error",fa)):(!da.decoder||za||ka||(fa=da.decoder.write(fa)),za||(da.reading=!1),da.flowing&&0===da.length&&!da.sync?(P.emit("data",fa),P.read(0)):(da.length+=da.objectMode?1:fa.length,za?da.buffer.unshift(fa):da.buffer.push(fa),da.needReadable&&m(P)),a(P,da)):za||(da.reading=!1);return!da.ended&&(da.needReadable||da.length<
da.highWaterMark||0===da.length)}function f(P,da){if(0===da.length&&da.ended)return 0;if(da.objectMode)return 0===P?0:1;if(isNaN(P)||J.isNull(P))return da.flowing&&da.buffer.length?da.buffer[0].length:da.length;if(0>=P)return 0;if(P>da.highWaterMark){var fa=P;if(8388608<=fa)fa=8388608;else{fa--;for(var ka=1;32>ka;ka<<=1)fa|=fa>>ka;fa++}da.highWaterMark=fa}if(P>da.length){if(da.ended)return da.length;da.needReadable=!0;return 0}return P}function m(P){var da=P._readableState;da.needReadable=!1;da.emittedReadable||
(T("emitReadable",da.flowing),da.emittedReadable=!0,da.sync?u.nextTick(function(){n(P)}):n(P))}function n(P){T("emit readable");P.emit("readable");b(P)}function a(P,da){da.readingMore||(da.readingMore=!0,u.nextTick(function(){for(var fa=da.length;!da.reading&&!da.flowing&&!da.ended&&da.length<da.highWaterMark&&(T("maybeReadMore read 0"),P.read(0),fa!==da.length);)fa=da.length;da.readingMore=!1}))}function d(P){return function(){var da=P._readableState;T("pipeOnDrain",da.awaitDrain);da.awaitDrain&&
da.awaitDrain--;0===da.awaitDrain&&E.listenerCount(P,"data")&&(da.flowing=!0,b(P))}}function k(P,da){da.resumeScheduled||(da.resumeScheduled=!0,u.nextTick(function(){da.resumeScheduled=!1;P.emit("resume");b(P);da.flowing&&!da.reading&&P.read(0)}))}function b(P){var da=P._readableState;T("flow",da.flowing);if(da.flowing){do var fa=P.read();while(null!==fa&&da.flowing)}}function e(P,da){var fa=da.buffer,ka=da.length,za=!!da.decoder;da=!!da.objectMode;if(0===fa.length)return null;if(0===ka)ka=null;else if(da)ka=
fa.shift();else if(!P||P>=ka)ka=za?fa.join(""):z.concat(fa,ka),fa.length=0;else if(P<fa[0].length)da=fa[0],ka=da.slice(0,P),fa[0]=da.slice(P);else if(P===fa[0].length)ka=fa.shift();else{ka=za?"":new z(P);for(var Ia=0,N=0,ia=fa.length;N<ia&&Ia<P;N++){da=fa[0];var W=Math.min(P-Ia,da.length);za?ka+=da.slice(0,W):da.copy(ka,Ia,0,W);W<da.length?fa[0]=da.slice(W):fa.shift();Ia+=W}}return ka}function l(P){var da=P._readableState;if(0<da.length)throw Error("endReadable called on non-empty stream");da.endEmitted||
(da.ended=!0,u.nextTick(function(){da.endEmitted||0!==da.length||(da.endEmitted=!0,P.readable=!1,P.emit("end"))}))}function p(P,da){for(var fa=0,ka=P.length;fa<ka;fa++)da(P[fa],fa)}if(q7)return JT;q7=!0;var u=Li;JT=c;var x=Zla,z=Rh.Buffer;c.ReadableState=g;var E=lr.EventEmitter;E.listenerCount||(E.listenerCount=function(P,da){return P.listeners(da).length});var G=Zw,J=xl;J.inherits=Gk;var K,T=$la;T=T&&T.debuglog?T.debuglog("stream"):function(){};J.inherits(c,G);c.prototype.push=function(P,da){var fa=
(this||Pf)._readableState;J.isString(P)&&!fa.objectMode&&(da=da||fa.defaultEncoding,da!==fa.encoding&&(P=new z(P,da),da=""));return h(this||Pf,fa,P,da,!1)};c.prototype.unshift=function(P){return h(this||Pf,(this||Pf)._readableState,P,"",!0)};c.prototype.setEncoding=function(P){K||(K=IT.StringDecoder);(this||Pf)._readableState.decoder=new K(P);(this||Pf)._readableState.encoding=P;return this||Pf};c.prototype.read=function(P){T("read",P);var da=(this||Pf)._readableState,fa=P;if(!J.isNumber(P)||0<P)da.emittedReadable=
!1;if(0===P&&da.needReadable&&(da.length>=da.highWaterMark||da.ended))return T("read: emitReadable",da.length,da.ended),0===da.length&&da.ended?l(this||Pf):m(this||Pf),null;P=f(P,da);if(0===P&&da.ended)return 0===da.length&&l(this||Pf),null;var ka=da.needReadable;T("need readable",ka);if(0===da.length||da.length-P<da.highWaterMark)ka=!0,T("length less than watermark",ka);if(da.ended||da.reading)ka=!1,T("reading or ended",ka);ka&&(T("do read"),da.reading=!0,da.sync=!0,0===da.length&&(da.needReadable=
!0),this._read(da.highWaterMark),da.sync=!1);ka&&!da.reading&&(P=f(fa,da));ka=0<P?e(P,da):null;J.isNull(ka)&&(da.needReadable=!0,P=0);da.length-=P;0!==da.length||da.ended||(da.needReadable=!0);fa!==P&&da.ended&&0===da.length&&l(this||Pf);J.isNull(ka)||this.emit("data",ka);return ka};c.prototype._read=function(P){this.emit("error",Error("not implemented"))};c.prototype.pipe=function(P,da){function fa(ib){T("onunpipe");ib===sa&&za()}function ka(){T("onend");P.end()}function za(){T("cleanup");P.removeListener("close",
ia);P.removeListener("finish",W);P.removeListener("drain",Aa);P.removeListener("error",N);P.removeListener("unpipe",fa);sa.removeListener("end",ka);sa.removeListener("end",za);sa.removeListener("data",Ia);!la.awaitDrain||P._writableState&&!P._writableState.needDrain||Aa()}function Ia(ib){T("ondata");!1===P.write(ib)&&(T("false write response, pause",sa._readableState.awaitDrain),sa._readableState.awaitDrain++,sa.pause())}function N(ib){T("onerror",ib);ca();P.removeListener("error",N);0===E.listenerCount(P,
"error")&&P.emit("error",ib)}function ia(){P.removeListener("finish",W);ca()}function W(){T("onfinish");P.removeListener("close",ia);ca()}function ca(){T("unpipe");sa.unpipe(P)}var sa=this||Pf,la=(this||Pf)._readableState;switch(la.pipesCount){case 0:la.pipes=P;break;case 1:la.pipes=[la.pipes,P];break;default:la.pipes.push(P)}la.pipesCount+=1;T("pipe count=%d opts=%j",la.pipesCount,da);da=da&&!1===da.end||P===u.stdout||P===u.stderr?za:ka;if(la.endEmitted)u.nextTick(da);else sa.once("end",da);P.on("unpipe",
fa);var Aa=d(sa);P.on("drain",Aa);sa.on("data",Ia);if(P._events&&P._events.error)x(P._events.error)?P._events.error.unshift(N):P._events.error=[N,P._events.error];else P.on("error",N);P.once("close",ia);P.once("finish",W);P.emit("pipe",sa);la.flowing||(T("pipe resume"),sa.resume());return P};c.prototype.unpipe=function(P){var da=(this||Pf)._readableState;if(0===da.pipesCount)return this||Pf;if(1===da.pipesCount){if(P&&P!==da.pipes)return this||Pf;P||(P=da.pipes);da.pipes=null;da.pipesCount=0;da.flowing=
!1;P&&P.emit("unpipe",this||Pf);return this||Pf}if(!P){P=da.pipes;var fa=da.pipesCount;da.pipes=null;da.pipesCount=0;da.flowing=!1;for(var ka=0;ka<fa;ka++)P[ka].emit("unpipe",this||Pf);return this||Pf}a:{ka=da.pipes;fa=0;for(var za=ka.length;fa<za;fa++)if(ka[fa]===P){ka=fa;break a}ka=-1}if(-1===ka)return this||Pf;da.pipes.splice(ka,1);--da.pipesCount;1===da.pipesCount&&(da.pipes=da.pipes[0]);P.emit("unpipe",this||Pf);return this||Pf};c.prototype.on=function(P,da){da=G.prototype.on.call(this||Pf,P,
da);"data"===P&&!1!==(this||Pf)._readableState.flowing&&this.resume();if("readable"===P&&(this||Pf).readable&&(P=(this||Pf)._readableState,!P.readableListening))if(P.readableListening=!0,P.emittedReadable=!1,P.needReadable=!0,P.reading)P.length&&m(this||Pf);else{var fa=this||Pf;u.nextTick(function(){T("readable nexttick read 0");fa.read(0)})}return da};c.prototype.addListener=c.prototype.on;c.prototype.resume=function(){var P=(this||Pf)._readableState;P.flowing||(T("resume"),P.flowing=!0,P.reading||
(T("resume read 0"),this.read(0)),k(this||Pf,P));return this||Pf};c.prototype.pause=function(){T("call pause flowing=%j",(this||Pf)._readableState.flowing);!1!==(this||Pf)._readableState.flowing&&(T("pause"),(this||Pf)._readableState.flowing=!1,this.emit("pause"));return this||Pf};c.prototype.wrap=function(P){var da=(this||Pf)._readableState,fa=!1,ka=this||Pf;P.on("end",function(){T("wrapped end");if(da.decoder&&!da.ended){var Ia=da.decoder.end();Ia&&Ia.length&&ka.push(Ia)}ka.push(null)});P.on("data",
function(Ia){T("wrapped data");da.decoder&&(Ia=da.decoder.write(Ia));Ia&&(da.objectMode||Ia.length)&&!ka.push(Ia)&&(fa=!0,P.pause())});for(var za in P)J.isFunction(P[za])&&J.isUndefined((this||Pf)[za])&&((this||Pf)[za]=function(Ia){return function(){return P[Ia].apply(P,arguments)}}(za));p(["error","close","destroy","pause","resume"],function(Ia){P.on(Ia,ka.emit.bind(ka,Ia))});ka._read=function(Ia){T("wrapped _read",Ia);fa&&(fa=!1,P.resume())};return ka};c._fromList=e;return JT}function r7(){function g(n,
a){(this||sm).afterTransform=function(d,k){var b=a._transformState;b.transforming=!1;var e=b.writecb;e?(b.writechunk=null,b.writecb=null,m.isNullOrUndefined(k)||a.push(k),e&&e(d),d=a._readableState,d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&a._read(d.highWaterMark),d=void 0):d=a.emit("error",Error("no writecb in Transform class"));return d};(this||sm).needTransform=!1;(this||sm).transforming=!1;(this||sm).writecb=null;(this||sm).writechunk=null}function c(n){if(!((this||sm)instanceof
c))return new c(n);f.call(this||sm,n);(this||sm)._transformState=new g(n,this||sm);var a=this||sm;(this||sm)._readableState.needReadable=!0;(this||sm)._readableState.sync=!1;this.once("prefinish",function(){m.isFunction((this||sm)._flush)?this._flush(function(d){h(a,d)}):h(a)})}function h(n,a){if(a)return n.emit("error",a);a=n._transformState;if(n._writableState.length)throw Error("calling transform done when ws.length != 0");if(a.transforming)throw Error("calling transform done when still transforming");
return n.push(null)}if(s7)return KT;s7=!0;KT=c;var f=oA(),m=xl;m.inherits=Gk;m.inherits(c,f);c.prototype.push=function(n,a){(this||sm)._transformState.needTransform=!1;return f.prototype.push.call(this||sm,n,a)};c.prototype._transform=function(n,a,d){throw Error("not implemented");};c.prototype._write=function(n,a,d){var k=(this||sm)._transformState;k.writecb=d;k.writechunk=n;k.writeencoding=a;k.transforming||(n=(this||sm)._readableState,(k.needTransform||n.needReadable||n.length<n.highWaterMark)&&
this._read(n.highWaterMark))};c.prototype._read=function(n){n=(this||sm)._transformState;m.isNull(n.writechunk)||!n.writecb||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};return KT}function ama(){function g(f){if(!((this||t7)instanceof g))return new g(f);c.call(this||t7,f)}if(u7)return LT;u7=!0;LT=g;var c=r7(),h=xl;h.inherits=Gk;h.inherits(g,c);g.prototype._transform=function(f,m,n){n(null,f)};return LT}function MD(g){return g&&
"object"===typeof g&&"default"in g?g["default"]:g}function bma(g){var c={},h;for(h in g)c[h]=g[h];return c}function cma(g,c,h){g.open(function(){});return{apply:function(f,m,n){m=m||{};for(var a=[],d=-1,k=f.length;++d<k;){var b=f[d],e=b,l=b.prefix;l&&l.options&&(e.keyEncoding=e.keyEncoding||l.options.keyEncoding,e.valueEncoding=e.valueEncoding||l.options.valueEncoding);e=b;l=b.prefix;l="function"===typeof l.prefix?l.prefix():l;e.prefix=l;a.push({key:c.encode([b.prefix,h.encodeKey(b.key,m,b)]),value:"del"!==
b.type&&h.encodeValue(b.value,m,b),type:b.type})}g.db.batch(a,m,n)},get:function(f,m,n,a){n.asBuffer=h.valueAsBuffer(n);return g.db.get(c.encode([m,h.encodeKey(f,n,void 0)]),n,function(d,k){d?a(d):a(null,h.decodeValue(k,n))})},createDecoder:function(f){return function(m,n){return{key:h.decodeKey(c.decode(m)[1],f),value:h.decodeValue(n,f)}}},isClosed:function(){return g.isClosed()},close:function(f){return g.close(f)},iterator:function(f){var m=bma(f||{}),n=f.prefix||[];dma.toLtgt(f,m,function(a){return c.encode([n,
h.encodeKey(a,m,{})])},c.lowerBound,c.upperBound);m.prefix=null;m.keyAsBuffer=m.valueAsBuffer=!1;"number"!==typeof m.limit&&(m.limit=-1);m.keyAsBuffer=c.buffer;m.valueAsBuffer=h.valueAsBuffer(m);return function(a){return{next:function(d){return a.next(d)},end:function(d){a.end(d)}}}(g.db.iterator(m))}}}function MT(){Error.call(this)}function nu(g,c){if(!(this instanceof nu))return new nu(g,c);v7.call(this,{objectMode:!0,highWaterMark:g.highWaterMark});this._waiting=!1;this._options=g;this._makeData=
c}function pA(g){w7.call(this||Ns,g);(this||Ns)._destroyed=!1}function ema(g,c,h){h(null,g)}function NT(g){return function(c,h,f){"function"==typeof c&&(f=h,h=c,c={});"function"!=typeof h&&(h=ema);"function"!=typeof f&&(f=null);return g(c,h,f)}}function Hj(g){this._capacity=x7(g);this._front=this._length=0;if(y7(g)){for(var c=g.length,h=0;h<c;++h)this[h]=g[h];this._length=c}}function x7(g){if("number"!==typeof g)if(y7(g))g=g.length;else return 16;g=Math.min(Math.max(16,g),1073741824);g=(g>>>0)-1;
g|=g>>1;g|=g>>2;g|=g>>4;g|=g>>8;return(g|g>>16)+1}function OT(g){g=g.rev_tree.slice();for(var c;c=g.pop();){var h=c.ids,f=h[2];c=c.pos;if(f.length){h=0;for(var m=f.length;h<m;h++)g.push({pos:c+1,ids:f[h]})}else if(f=!!h[1].deleted,h=h[0],!n||(d!==f?d:a!==c?a<c:n<h)){var n=h;var a=c;var d=f}}return a+"-"+n}function VJ(g,c){g=g.slice();for(var h;h=g.pop();){var f=h.pos,m=h.ids,n=m[2];h=c(0===n.length,f,m[0],h.ctx,m[1]);m=0;for(var a=n.length;m<a;m++)g.push({pos:f+1,ids:n[m],ctx:h})}}function fma(g,
c){return g.pos-c.pos}function z7(g){var c=[];VJ(g,function(f,m,n,a,d){f&&c.push({rev:m+"-"+n,pos:m,opts:d})});c.sort(fma).reverse();g=0;for(var h=c.length;g<h;g++)delete c[g].pos;return c}function A7(g){var c=[];g=g.slice();for(var h;h=g.pop();){var f=h.pos,m=h.ids,n=m[0],a=m[1];m=m[2];var d=0===m.length;h=h.history?h.history.slice():[];h.push({id:n,opts:a});d&&c.push({pos:f+1-h.length,ids:h});n=0;for(a=m.length;n<a;n++)g.push({pos:f+1,ids:m[n],history:h})}return c.reverse()}function gma(g,c){return g.pos-
c.pos}function B7(g,c){for(var h,f,m=g.length;c<m;c++){var n=g[c];n=[n.id,n.opts,[]];f?(f[2].push(n),f=n):h=f=n}return h}function hma(g,c){return g[0]<c[0]?-1:1}function C7(g,c){c=[{tree1:g,tree2:c}];for(var h=!1;0<c.length;){var f=c.pop(),m=f.tree1;f=f.tree2;if(m[1].status||f[1].status)m[1].status="available"===m[1].status||"available"===f[1].status?"available":"missing";for(var n=0;n<f[2].length;n++)if(m[2][0]){for(var a=!1,d=0;d<m[2].length;d++)m[2][d][0]===f[2][n][0]&&(c.push({tree1:m[2][d],tree2:f[2][n]}),
a=!0);if(!a){h="new_branch";a=m[2];d=f[2][n];for(var k,b=a,e=d,l=hma,p=0,u=b.length;p<u;)k=p+u>>>1,0>l(b[k],e)?p=k+1:u=k;a.splice(p,0,d)}}else h="new_leaf",m[2][0]=f[2][n]}return{conflicts:h,tree:g}}function D7(g,c,h){var f=[],m=!1,n=!1;if(!g.length)return{tree:[c],conflicts:"new_leaf"};for(var a=0,d=g.length;a<d;a++){var k=g[a];if(k.pos===c.pos&&k.ids[0]===c.ids[0])n=C7(k.ids,c.ids),f.push({pos:k.pos,ids:n.tree}),m=m||n.conflicts,n=!0;else if(!0!==h){var b=k.pos<c.pos?k:c,e=k.pos<c.pos?c:k,l=[],
p=[];for(p.push({ids:b.ids,diff:e.pos-b.pos,parent:null,parentIdx:null});0<p.length;){var u=p.pop();if(0===u.diff)u.ids[0]===e.ids[0]&&l.push(u);else for(var x=u.ids[2],z=0,E=x.length;z<E;z++)p.push({ids:x[z],diff:u.diff-1,parent:u.ids,parentIdx:z})}(l=l[0])?(n=C7(l.ids,e.ids),l.parent[2][l.parentIdx]=n.tree,f.push({pos:b.pos,ids:b.ids}),m=m||n.conflicts,n=!0):f.push(k)}else f.push(k)}n||f.push(c);f.sort(gma);return{tree:f,conflicts:m||"internal_node"}}function ima(g,c){g=A7(g);for(var h,f,m=0,n=
g.length;m<n;m++){var a=g[m],d=a.ids;if(d.length>c){h||(h={});var k=d.length-c;var b={pos:a.pos+k,ids:B7(d,k)};for(var e=0;e<k;e++)h[a.pos+e+"-"+d[e].id]=!0}else b={pos:a.pos,ids:B7(d,0)};f=f?D7(f,b,!0).tree:[b]}h&&VJ(f,function(l,p,u){delete h[p+"-"+u]});return{tree:f,revs:h?Object.keys(h):[]}}function jma(g){return g.ids}function E7(g){return g.reduce(function(c,h){c[h]=!0;return c},{})}function F7(g){if(!/^\d+-/.test(g))return Do.createError(Do.INVALID_REV);var c=g.indexOf("-"),h=g.substring(0,
c);g=g.substring(c+1);return{prefix:parseInt(h,10),id:g}}function G7(g,c,h){h||(h={deterministic_revs:!0});var f={status:"available"};g._deleted&&(f.deleted=!0);if(c){g._id||(g._id=$w.uuid());var m=$w.rev(g,h.deterministic_revs);if(g._rev){c=F7(g._rev);if(c.error)return c;g._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[m,f,[]]]]}];var n=c.prefix+1}else g._rev_tree=[{pos:1,ids:[m,f,[]]}],n=1}else{if(g._revisions){m=g._revisions;n=m.start-m.ids.length+1;m=m.ids;c=[m[0],f,[]];h=1;for(var a=
m.length;h<a;h++)c=[m[h],{status:"missing"},[c]];g._rev_tree=[{pos:n,ids:c}];n=g._revisions.start;m=g._revisions.ids[0]}if(!g._rev_tree){c=F7(g._rev);if(c.error)return c;n=c.prefix;m=c.id;g._rev_tree=[{pos:n,ids:[m,f,[]]}]}}$w.invalidIdError(g._id);g._rev=n+"-"+m;f={metadata:{},data:{}};for(var d in g)if(Object.prototype.hasOwnProperty.call(g,d)){if((n="_"===d[0])&&!kma[d])throw g=Do.createError(Do.DOC_VALIDATION,d),g.message=Do.DOC_VALIDATION.message+": "+d,g;n&&!lma[d]?f.metadata[d.slice(1)]=g[d]:
f.data[d]=g[d]}return f}function mma(g,c,h){try{var f=ND.atob(g.data)}catch(m){f={error:Do.createError(Do.BAD_ARG,"Attachment is not a valid base64 string")}}if(f.error)return h(f.error);g.length=f.length;g.data="blob"===c?ND.binaryStringToBlobOrBuffer(f,g.content_type):"base64"===c?ND.btoa(f):f;H7.binaryMd5(f,function(m){g.digest="md5-"+m;h()})}function nma(g,c,h){H7.binaryMd5(g.data,function(f){g.digest="md5-"+f;g.length=g.data.size||g.data.length||0;"binary"===c?ND.blobOrBufferToBinaryString(g.data,
function(m){g.data=m;h()}):"base64"===c?ND.blobOrBufferToBase64(g.data,function(m){g.data=m;h()}):h()})}function oma(g,c,h){if(g.stub)return h();"string"===typeof g.data?mma(g,c,h):nma(g,c,h)}function I7(g,c,h,f,m,n,a,d){if(co.revExists(c.rev_tree,h.metadata.rev)&&!d)return f[m]=h,n();var k=c.winningRev||co.winningRev(c),b="deleted"in c?c.deleted:co.isDeleted(c,k),e="deleted"in h.metadata?h.metadata.deleted:co.isDeleted(h.metadata),l=/^1-/.test(h.metadata.rev);b&&!e&&d&&l&&(l=h.data,l._rev=k,l._id=
h.metadata.id,h=G7(l,d));g=co.merge(c.rev_tree,h.metadata.rev_tree[0],g);if(d&&(b&&e&&"new_leaf"!==g.conflicts||!b&&"new_leaf"!==g.conflicts||b&&!e&&"new_branch"===g.conflicts))return h=Do.createError(Do.REV_CONFLICT),f[m]=h,n();f=h.metadata.rev;h.metadata.rev_tree=g.tree;h.stemmedRevs=g.stemmedRevs||[];c.rev_map&&(h.metadata.rev_map=c.rev_map);c=co.winningRev(h.metadata);d=co.isDeleted(h.metadata,c);b=b===d?0:b<d?-1:1;f=f===c?d:co.isDeleted(h.metadata,f);a(h,c,d,f,!0,b,m,n)}function OD(g){return g&&
"object"===typeof g&&"default"in g?g["default"]:g}function J7(g,c){g=new Uint8Array(g);return PD.blob([g],{type:c})}function pma(g,c){PD.readAsBinaryString(g,c)}function K7(g,c){c=c.prefix()[0];g=g._cache;var h=g.get(c);h||(h=new oq.Map,g.set(c,h));return h}function ax(){this._batch=[];this._cache=new oq.Map}function PT(g){return"winningRev"in g?g.winningRev:QD.winningRev(g)}function qma(g,c,h){var f=g.content_type;return new Promise(function(m,n){c.binaryStore.get(g.digest,function(a,d){if(a){if("NotFoundError"!==
a.name)return n(a);a=h.binary?PD.binaryStringToBlobOrBuffer("",f):""}else a=h.binary?J7(d,f):d.toString("base64");delete g.stub;delete g.length;g.data=a;m()})})}function QT(g,c,h){var f=[];g.forEach(function(m){m.doc&&m.doc._attachments&&Object.keys(m.doc._attachments).forEach(function(n){n=m.doc._attachments[n];"data"in n||f.push(n)})});return Promise.all(f.map(function(m){return qma(m,c,h)}))}function RT(g){(this||bx).db=g;(this||bx)._ended=!1;(this||bx)._nexting=!1}function ou(g){(this||Nk)._db=
g;(this||Nk)._operations=[];(this||Nk)._written=!1}function xn(g){if(!arguments.length||void 0===g)throw Error("constructor requires at least a location argument");if("string"!=typeof g)throw Error("constructor requires a location string argument");(this||ml).location=g;(this||ml).status="new"}function Eo(g,c,h,f,m,n){this._color=g;this.key=c;this.value=h;this.left=f;this.right=m;this._count=n}function wr(g){return new Eo(g._color,g.key,g.value,g.left,g.right,g._count)}function pu(g,c){return new Eo(g,
c.key,c.value,c.left,c.right,c._count)}function Ok(g){g._count=1+(g.left?g.left._count:0)+(g.right?g.right._count:0)}function qA(g,c){this._compare=g;this.root=c}function ST(g,c){if(c.left){var h=ST(g,c.left);if(h)return h}if(h=g(c.key,c.value))return h;if(c.right)return ST(g,c.right)}function TT(g,c,h,f){if(0>=c(g,f.key)){if(f.left){var m=TT(g,c,h,f.left);if(m)return m}if(m=h(f.key,f.value))return m}if(f.right)return TT(g,c,h,f.right)}function UT(g,c,h,f,m){var n=h(g,m.key),a=h(c,m.key);if(0>=n&&
(m.left&&(n=UT(g,c,h,f,m.left))||0<a&&(n=f(m.key,m.value))))return n;if(0<a&&m.right)return UT(g,c,h,f,m.right)}function Fo(g,c){this.tree=g;this._stack=c}function L7(g,c){g.key=c.key;g.value=c.value;g.left=c.left;g.right=c.right;g._color=c._color;g._count=c._count}function rma(g,c){return g<c?-1:g>c?1:0}function M7(g,c){for(var h in g)c[h]=g[h]}function rA(g,c,h){return Os(g,c,h)}function sma(g){return 0<Go.compare(g,(this||Jf)._end)}function tma(g){return 0<=Go.compare(g,(this||Jf)._end)}function uma(g){return 0>
Go.compare(g,(this||Jf)._end)}function vma(g){return 0>=Go.compare(g,(this||Jf)._end)}function WJ(g,c){N7.call(this||Jf,g);(this||Jf)._limit=c.limit;-1===(this||Jf)._limit&&((this||Jf)._limit=Infinity);g=g._store[g._location];(this||Jf).keyAsBuffer=!1!==c.keyAsBuffer;(this||Jf).valueAsBuffer=!1!==c.valueAsBuffer;(this||Jf)._reverse=c.reverse;(this||Jf)._options=c;(this||Jf)._done=0;(this||Jf)._reverse?((this||Jf)._incr="prev",(this||Jf)._start=Go.upperBound(c),(this||Jf)._end=Go.lowerBound(c),"undefined"===
typeof(this||Jf)._start?(this||Jf)._tree=g.end:Go.upperBoundInclusive(c)?(this||Jf)._tree=g.le((this||Jf)._start):(this||Jf)._tree=g.lt((this||Jf)._start),(this||Jf)._end&&(Go.lowerBoundInclusive(c)?(this||Jf)._test=tma:(this||Jf)._test=sma)):((this||Jf)._incr="next",(this||Jf)._start=Go.lowerBound(c),(this||Jf)._end=Go.upperBound(c),"undefined"===typeof(this||Jf)._start?(this||Jf)._tree=g.begin:Go.lowerBoundInclusive(c)?(this||Jf)._tree=g.ge((this||Jf)._start):(this||Jf)._tree=g.gt((this||Jf)._start),
(this||Jf)._end&&(Go.upperBoundInclusive(c)?(this||Jf)._test=vma:(this||Jf)._test=uma))}function eo(g){if(!((this||Jf)instanceof eo))return new eo(g);O7.call(this||Jf,"string"===typeof g?g:"");(this||Jf)._location=(this||Jf).location?"$"+(this||Jf).location:"_tree";(this||Jf)._store=(this||Jf).location?sA:this||Jf;(this||Jf)._store[(this||Jf)._location]=(this||Jf)._store[(this||Jf)._location]||wma(Go.compare)}function P7(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function VT(g,
c){g=xma.assign({db:yma},g);zma.call(this,g,c)}function WT(g){g&&(g.__serialize__=function(){return{__expr__:'({type: "'+g.type+'", name: "'+g.name+'", _id: "'+g._id+'"})'}});return g}function RD(g){var c,h,f,m,n,a,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){if(!g||Sg.obj.isEmpty(g))return k.return(!1);if(g&&g._rev)return k.return(g);c=g;h=c.type;f=c.name;m=c._id;k.setFinallyBlock(2);n=Object;a=n.assign;d=g;return k.yield(Sg.MorphicDB.default.fetchCommit(h,
f,m),4)}2!=k.nextAddress&&a.call(n,d,k.yieldResult);k.enterFinallyBlock();return k.return(g)})}function SD(g){return Object.values(g).filter(function(c){return 1==Cd.Path("props.isComponent.value").get(c)}).map(function(c){return c.props.name.value})}function XJ(g){return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){switch(c.nextAddress){case 1:return g.label="loading System Elements",g.progress=0,g.status="core elements...",c.yield(Cd.resource("styleguide://System/buttons/light").read(),
2);case 2:return g.progress=.2,g.status="top bar...",c.yield(Cd.resource("styleguide://SystemIDE/lively top bar master").read(),3);case 3:return g.progress=.4,g.status="scene graph...",c.yield(Cd.resource("styleguide://SystemIDE/styling side bar master").read(),4);case 4:return g.progress=.6,g.status="styling palette...",c.yield(Cd.resource("styleguide://SystemIDE/scene graph side bar master").read(),5);case 5:return g.progress=.8,g.status="world loader...",c.yield(Cd.resource("styleguide://partial freezing/project browser").read(),
6);case 6:return g.progress=1,c.yield(Cd.promise.delay(500),0)}})}function YJ(){Cd.localNamePromise=null}function XT(g){delete Cd.fetchedSnapshots[g]}function qu(g,c,h,f){f=void 0===f?h.name:f;(g[c]=fo.fun.wrap(g[c],h)).hookFunc=h;h.hookName=f}function cx(g,c,h){for(var f=[],m=g[c];m;)f.push(m),m=m.originalFunction;m="string"===typeof h?f.find(function(n){return n.hookFunc&&n.hookFunc.hookName===h}):f.find(function(n){return n.hookFunc===h});if(!m)return!1;fo.arr.remove(f,m);g[c]=f.reduceRight(function(n,
a){return fo.fun.wrap(n,a.hookFunc||a)});return!0}function ru(g,c,h){for(g=g[c];g;){if(g.hookFunc&&("string"===typeof h&&g.hookFunc.hookName===h||g.hookFunc===h))return!0;g=g.originalFunction}return!1}function TD(g){if(g.loads){var c=g.loads;return Ps.arr.uniq(Object.keys(Ps.loadedModules(g)).concat(Object.keys(c))).reduce(function(h,f){var m=c[f]?c[f].depMap:{};h[f]=Object.keys(m).map(function(n){var a=m[n];return"@empty"===a?a+"/"+n:a});return h},{})}return Object.keys(g._loader.moduleRecords).reduce(function(h,
f){h[f]=g._loader.moduleRecords[f].dependencies.filter(Boolean).map(function(m){return m.name});return h},{})}function UD(g,c,h,f,m){var n=g.get("@lively-env").pendingExportChanges;(g=hn.module(g,c).record())&&(h in g.exports||m)&&((n[c]||(n[c]={}))[h]=f)}function ZJ(g,c){var h=g.get("@lively-env").pendingExportChanges[c];h&&(hn.clearPendingModuleExportChanges(g,c),hn.updateModuleExports(g,c,h))}function VD(g,c,h,f,m){var n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:d.setCatchFinallyBlocks(2);
g.debug&&console.log("[module change] "+c+" "+h.slice(0,50).replace(/\n/g,"")+" "+f);if(!f||"es6"===f||"esm"===f||"register"===f||"defined"===f)return d.yield(ck.moduleSourceChangeEsm(g,c,h,m),8);if("global"!==f)throw Error("moduleSourceChange is not supported for module "+c+" with format "+f);return d.yield(ck.moduleSourceChangeGlobal(g,c,h,m),7);case 7:n=d.yieldResult;d.jumpTo(5);break;case 8:n=d.yieldResult;case 5:return ck.emit("lively.modules/modulechanged",{module:c,newSource:h,options:m},Date.now(),
g),d.return(n);case 2:throw a=d.enterCatchBlock(),ck.emit("lively.modules/modulechanged",{module:c,newSource:h,error:a,options:m},Date.now(),g),a;}})}function YT(g){return/\.js/i.test(g)}function ZT(g){return tm.isJsFile(g)?g.replace(/\/[^\/]*$/,""):g.replace(/\/$/,"")}function dx(g){return/^[^:\\]+:\/\//.test(g)}function $J(g){var c=g.match(/^([^:]+:\/\/)(.*)/);if(!c)return g;g=c[1];var h=c=c[2];do c=h,h=c.replace(/\/[^\/]+\/\.\./,"");while(h!=c);h=h.replace(/(^|[^:])[\/]+/g,"$1/");h=h.replace(/\/\.\//g,
"/");return g+h}function aK(g,c,h){h=void 0===h?!1:h;var f=gf.classHolder.PackageRegistry.ofSystem(g),m=f.allPackageURLs();g=h?c:gf.normalizePackageURL(g,c,m);return{pkg:f.findPackageWithURL(g),url:g,allPackageURLs:m,registry:f}}function bK(g,c,h){g=gf.lookupPackage(g,c,void 0===h?!1:h);c=g.url;h=g.registry;return g.pkg||h.addPackageAt(c,"devPackageDirs")}function WD(g,c,h){g=gf.lookupPackage(g,c,void 0===h?!1:h);if(h=g.pkg)return h;throw Error("[getPackage] package "+c+" (as "+g.url+") not found");
}function cK(g,c,h){return gf.getPackage(g,h).updateConfig(c)}function dK(g,c){return Promise.resolve(gf.ensurePackage(g,c)).then(function(h){return h.import()})}function eK(g,c){return(g=gf.lookupPackage(g,c).pkg)?g.remove():null}function fK(g,c,h){return gf.getPackage(g,c).reload(h)}function gK(g,c,h){return Promise.resolve(gf.ensurePackage(g,c)).then(function(f){return f.register(h)})}function hK(g){return gf.Package.allPackages(g).map(function(c){return c.asSpec()})}function Qs(g,c){g="string"===
typeof g?od.parse(g):g;c.scope=od.query.resolveReferences(od.query.scopes(g));return od.ClassReplaceVisitor.run(g,c)}function iK(g,c,h){h=yn.ensureParent(g,c);var f=g.System._nodeRequire("module");c.startsWith(".")&&(c=yn.relative(g,c));return f._load(c,h)}function jK(g,c,h){h=yn.ensureParent(g,c);var f=g.System._nodeRequire("module");c.startsWith(".")&&(c=yn.relative(g,c));return f._resolveFilename(c,h)}function ex(g,c,h){var f=ef.livelySystemEnv(g);c=g.decanonicalize(c,h);return f.loadedModules[c]||
(f.loadedModules[c]=new ef.ModuleInterface(g,c))}function kK(g,c,h){h=void 0===h?!1:h;var f=ef.livelySystemEnv(g);return(h?c:g.normalizeSync(c))in f.loadedModules}function lK(g,c,h){h=void 0===h?!1:h;var f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){ef.livelySystemEnv(g);f=h?c:g.normalizeSync(c);if(ef.isModuleLoaded(g,f,!0))return a.return(!0);m=ef.Package.forModuleId(g,f);return m&&"no group"!==m.name?a.yield(m.hasResource(f),3):(n=g.resource(f).exists(),
a.jumpTo(2))}2!=a.nextAddress&&(n=a.yieldResult);return a.return(n)})}function $T(){return Ee.exceptions}function aU(g){return Ee.exceptions=g}function bU(g,c,h,f,m){c=String(c);g=f.sourceAccessorName;var n=f.recorder,a=f.recorderName,d=f.dontTransform,k=f.varDefinitionCallbackName,b=void 0===f.embedOriginalCode?!0:f.embedOriginalCode;g=b?g:void 0;f={topLevelVarRecorder:n,varRecorderName:a,sourceAccessorName:g,dontTransform:d,jsx:h.endsWith(".jsx"),recordGlobals:!0,keepPreviouslyDeclaredValues:!0,
declarationWrapperName:k,evalId:f.nextEvalId(),classTransform:Ee.classToFunctionTransform,currentModuleAccessor:Ee.funcCall(Ee.member(Ee.funcCall(Ee.member(Ee.member("__lvVarRecorder","System"),"get"),Ee.literal("@lively-env")),"moduleEnv"),Ee.literal(h))};n=m?'console.log("[lively.modules] executing module '+h+'");\n':"";d="";"System.global"===a?delete f.declarationWrapperName:(n+='SystemJS.get("@lively-env").evaluationStart("'+h+'");\nvar '+(a+' = SystemJS.get("@lively-env").moduleEnv("'+h+'").recorder;\n')+
(b?"\nvar "+g+" = "+JSON.stringify(c)+";\n":""),d+='\nSystemJS.get("@lively-env").evaluationEnd("'+h+'");');try{var e=n+Ee.evalCodeTransform(c,f)+d;m&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=e);return{source:e,options:f}}catch(l){return console.error("Error in prepareCodeForCustomCompile of "+h+" "+l.stack),{source:c,options:f}}}function cU(g,c,h,f,m,n){c=String(c);g=Object.assign({},m,{classTransform:Ee.classToFunctionTransform,topLevelVarRecorder:f.recorder,
varRecorderName:f.recorderName,dontTransform:f.dontTransform,recordGlobals:!0,declarationWrapperName:f.varDefinitionCallbackName,currentModuleAccessor:Ee.funcCall(Ee.member(Ee.funcCall(Ee.member(Ee.member("__lvVarRecorder","System"),"get"),Ee.literal("@lively-env")),"moduleEnv"),Ee.literal(h))});try{var a=Ee.evalCodeTransformOfSystemRegisterSetters(c,g);n&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString+=a);return a}catch(d){return console.error("Error in prepareTranslatedCodeForSetterCapture",
d.stack),c}}function mK(g,c){return g.translate(c).then(function(h){var f=Ee.parse(h).body.find(function(n){return n.expression&&"CallExpression"===n.expression.type&&"register"===n.expression.callee.property.name});if(!f)throw Error("Cannot find register call in translated source of "+c.name);var m=f.expression;f=m.arguments[0].elements.map(function(n){return n.value});m=m.arguments[1];h=h.slice(m.start,m.end);h=eval('var __moduleName = "'+c.name+'";('+h+");\n//# sourceURL="+c.name+"\n");g.debug&&
"undefined"!==$world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=h);return{localDeps:f,declare:h}})}function nK(g,c){return g.translate(c).then(function(h){return{translated:h}})}function XD(g){Ee.isHookInstalled(g,"translate","lively_modules_translate_hook")||Ee.installHook(g,"translate",function(c,h){return Ee.customTranslate.call(g,c,h)},"lively_modules_translate_hook")}function oK(g){Ee.removeHook(g,"translate","lively_modules_translate_hook")}function pK(g){g.resource=
gh.resource;gh.isHookInstalled(g,"fetch",gh.fetchResource)&&gh.removeHook(g,"fetch","fetchResource");gh.installHook(g,"fetch",gh.fetchResource);gh.isHookInstalled(g,"resource","livelyProtocol")&&gh.removeHook(g,"fetch","livelyProtocol");gh.installHook(g,"resource",gh.livelyProtocol)}function dU(g){gh.removeHook(g,"fetch","fetchResource");gh.removeHook(g,"resource","livelyProtocol");delete g.resource}function qK(g){Qd.isHookInstalled(g,"normalize","normalizeHook")||Qd.installHook(g,"normalize",Qd.normalizeHook,
"normalizeHook");Qd.isHookInstalled(g,"decanonicalize","decanonicalizeHook")||Qd.installHook(g,"decanonicalize",Qd.decanonicalizeHook,"decanonicalizeHook");Qd.isHookInstalled(g,"normalizeSync","decanonicalizeHook")||Qd.installHook(g,"normalizeSync",Qd.decanonicalizeHook,"decanonicalizeHook");Qd.isHookInstalled(g,"newModule","newModule_volatile")||Qd.installHook(g,"newModule",Qd.newModule_volatile,"newModule_volatile");Qd.isHookInstalled(g,"instantiate","instantiate_triggerOnLoadCallbacks")||Qd.installHook(g,
"instantiate",Qd.instantiate_triggerOnLoadCallbacks,"instantiate_triggerOnLoadCallbacks");Qd.isHookInstalled(g,"locate","locateHook")||Qd.installHook(g,"locate",Qd.locateHook,"locateHook")}function rK(g){Qd.removeHook(g,"normalize","normalizeHook");Qd.removeHook(g,"decanonicalize","decanonicalizeHook");Qd.removeHook(g,"normalizeSync","decanonicalizeHook");Qd.removeHook(g,"newModule","newModule_volatile");Qd.removeHook(g,"instantiate","instantiate_triggerOnLoadCallbacks");Qd.removeHook(g,"locate",
"locateHook")}function sK(g){return{moduleEnv:function(c){return Qd.classHolder.module(g,c)},get itself(){return g.get(g.decanonicalize("lively.modules/index.js"))},evaluationStart:function(c){Qd.classHolder.module(g,c).evaluationStart()},evaluationEnd:function(c){Qd.classHolder.module(g,c).evaluationEnd()},dumpConfig:function(){return JSON.stringify({baseURL:g.baseURL,transpiler:g.transpiler,defaultJSExtensions:g.defaultJSExtensions,map:g.map,meta:g.meta,packages:g.packages,paths:g.paths,packageConfigPaths:g.packageConfigPaths},
null,2)},get packageRegistry(){return g["__lively.modules__packageRegistry"]},set packageRegistry(c){g["__lively.modules__packageRegistry"]=c},packages:g["__lively.modules__packages"]||(g["__lively.modules__packages"]={}),loadedModules:g["__lively.modules__loadedModules"]||(g["__lively.modules__loadedModules"]={}),pendingExportChanges:g["__lively.modules__pendingExportChanges"]||(g["__lively.modules__pendingExportChanges"]={}),notifications:g["__lively.modules__notifications"]||(g["__lively.modules__notifications"]=
[]),notificationSubscribers:g["__lively.modules__notificationSubscribers"]||(g["__lively.modules__notificationSubscribers"]={}),options:g["__lively.modules__options"]||(g["__lively.modules__options"]=Qd.obj.deepCopy(Qd.defaultOptions)),onLoadCallbacks:g["__lively.modules__onLoadCallbacks"]||(g["__lively.modules__onLoadCallbacks"]=[]),modulePackageMapCache:g["__lively.modules__modulePackageMapCache"]}}function fx(g,c){return g&&"string"!==typeof g?g:Qd.systems()[g]||(Qd.systems()[g]=Qd.makeSystem(c))}
function gx(g){g=g&&"string"!==typeof g?Qd.nameOfSystem(g):g;delete Qd.systems()[g]}function tK(g,c){g.trace=!0;c=c||{};var h=c.hasOwnProperty("useModuleTranslationCache")?c.useModuleTranslationCache:!Qd.urlQuery().noModuleCache;g.useModuleTranslationCache=h;g.set("@lively-env",g.newModule(Qd.livelySystemEnv(g)));"undefined"!==typeof Qd.WorkerGlobalScope&&g.set("@system-env",g.newModule(Object.assign({},g.get("@system-env"),{browser:!0,worker:!0,location:Qd.location})));(h="undefined"!==typeof Qd.process&&
Qd.process.versions&&Qd.process.versions.electron)&&g.set("@system-env",g.newModule(Object.assign({electron:h},g.get("@system-env"))));Qd.wrapResource(g);Qd.wrapModuleLoad(g);Qd.wrapModuleResolution(g);h&&(h=["electron"].reduce(function(f,m){f[m]="@node/"+m;return f},{}),c.map=Qd.obj.merge(h,c.map));Qd.isNode&&(h="addons assert buffer child_process cluster console crypto dgram dns domain events fs http https module net os path punycode querystring readline repl stream stringdecoder timers tls tty url util v8 vm zlib constants".split(" ").reduce(function(f,
m){f[m]="@node/"+m;return f},{}),c.map=Qd.obj.merge(h,c.map));c.packageConfigPaths=c.packageConfigPaths||["./node_modules/*/package.json"];c.transpiler||"traceur"!==g.transpiler||(h=Qd.GLOBAL.System,"lively.transpiler"===h.transpiler?(g.set("lively.transpiler",h.get("lively.transpiler")),g._loader.transpilerPromise=h._loader.transpilerPromise,g.config({transpiler:"lively.transpiler",babelOptions:Object.assign(h.babelOptions||{},c.babelOptions)})):g.config({map:{"plugin-babel":h.map["plugin-babel"],
"systemjs-babel-build":h.map["systemjs-babel-build"]},transpiler:h.transpiler,babelOptions:Object.assign(h.babelOptions||{},c.babelOptions)}));g.config(c);return g}function uK(g){g=Qd.getSystem(g);return JSON.stringify({baseURL:g.baseURL,transpiler:g.transpiler,defaultJSExtensions:g.defaultJSExtensions,defaultExtension:g.defaultExtension,map:g.map,meta:g.meta,packages:g.packages,paths:g.paths,packageConfigPaths:g.packageConfigPaths,bundles:g.bundles},null,2)}function vK(g,c,h){var f=g.decanonicalize(c);
if(g.get(f))try{h(Qd.classHolder.module(g,f))}catch(m){console.error(m)}else g.get("@lively-env").onLoadCallbacks.push({moduleName:c,resolved:!1,callback:h})}function wK(g){return g.get("@lively-env").loadedModules}function xK(g){var c=g.loads?Object.keys(g.loads):Object.keys(g._loader.moduleRecords);return Qd.arr.uniq(c.concat(Object.keys(Qd.loadedModules(g))))}function eU(g,c,h){return Promise.all(Qd.obj.values(Qd.loadedModules(g)).map(function(f){return f.search(c,h)})).then(function(f){return Qd.arr.flatten(f,
1)})}function YD(g,c,h,f){c=void 0===c?{maxDepth:0,excludes:[]}:c;h=void 0===h?{}:h;f=void 0===f?0:f;var m,n,a,d,k,b,e,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:m=c;n=m.maxDepth;a=m.excludes;if(0<n&&f>n)return G.return(h);G.setCatchFinallyBlocks(2);d=JSON;k=d.parse;return G.yield(Tl.resource(g).join("package.json").read(),4);case 4:b=k.call(d,G.yieldResult);e=b.name+"@"+b.version;if(h[e]||a.includes(b.name))return G.return(h);h[e]=Object.assign({url:g},
Tl.obj.select(b,["name","version","dependencies","devDependencies","main"]));G.leaveTryBlock(3);break;case 2:return G.enterCatchBlock(),G.return(h);case 3:return G.setCatchFinallyBlocks(5),G.yield(Tl.resource(g).join("node_modules").dirList(1),7);case 7:l=G.yieldResult;G.leaveTryBlock(6);break;case 5:return G.enterCatchBlock(),G.return(h);case 6:p=$jscomp.makeIterator(l),u=p.next();case 8:if(u.done){G.jumpTo(10);break}z=x=u.value;E=z.url;return G.yield(YD(E,c,h,f+1),11);case 11:h=G.yieldResult;u=
p.next();G.jumpTo(8);break;case 10:return G.return(h)}})}function yK(g,c){var h=Object.assign({},g.dependencies,{},g.devDependencies);return Object.keys(h).reduce(function(f,m){var n=h[m],a=Tl.obj.values(c).find(function(k){var b=k.version;return k.name===m&&lively.modules.semver.satisfies(b,n)})||{},d=a.name;a=a.version;f[m]=d?d+"@"+a:void 0;return f},{})}function zK(g){function c(m,n){var a=m+"@"+n;if(a in f)return f[a];var d=h.find(function(b){var e=b.version;return b.name===m&&lively.modules.semver.satisfies(e,
n)})||{},k=d.name;d=d.version;return f[a]=k?k+"@"+d:void 0}var h=Tl.obj.values(g),f={};return Object.keys(g).reduce(function(m,n){var a=g[n],d=Object.assign({},a.dependencies,{},a.devDependencies);m[n]=Object.keys(d).map(function(k){return c(k,d[k])}).filter(function(k){return!!k});return m},{})}function AK(g,c){cd.defaultSystem=g;c&&(cd.GLOBAL.System=g);return g}function BK(){cd._wrapModuleResolution(cd.defaultSystem)}function CK(){cd._unwrapModuleResolution(cd.defaultSystem)}function DK(){return Object.keys(cd.requireMap())}
function ZD(g){return cd._module(cd.defaultSystem,g)}function EK(g,c){return cd._isModuleLoaded(cd.defaultSystem,g,c)}function FK(g,c){return cd._doesModuleExist(cd.defaultSystem,g,c)}function GK(){return cd._printSystemConfig(cd.defaultSystem)}function HK(g,c){return cd._whenLoaded(cd.defaultSystem,g,c)}function IK(g){return cd._importPackage(cd.defaultSystem,g)}function JK(g,c){return cd._registerPackage(cd.defaultSystem,g,c)}function KK(g){return cd._removePackage(cd.defaultSystem,g)}function LK(g,
c){return cd._reloadPackage(cd.defaultSystem,g,c)}function MK(){return cd.getPackageSpecs(cd.defaultSystem)}function NK(g,c){return cd._getPackage(cd.defaultSystem,g,void 0===c?!1:c)}function OK(g){return cd.Package.forModuleId(cd.defaultSystem,g)}function PK(g){return cd._ensurePackage(cd.defaultSystem,g)}function QK(g,c){return cd._applyPackageConfig(cd.defaultSystem,g,c)}function RK(g,c){return cd._lookupPackage(cd.defaultSystem,g,void 0===c?!1:c)}function SK(g,c,h){return cd._moduleSourceChange(cd.defaultSystem,
g,c,h)}function TK(){return cd.computeRequireMap(cd.defaultSystem)}function UK(g,c){return cd._isHookInstalled(cd.defaultSystem,g,c)}function VK(g,c){return cd._installHook(cd.defaultSystem,g,c)}function WK(g,c){return cd._removeHook(cd.defaultSystem,g,c)}function XK(){cd._wrapModuleLoad(cd.defaultSystem)}function YK(){cd._unwrapModuleLoad(cd.defaultSystem)}function fU(g){return g&&g.__ref__}function $D(g,c){return Le.serialize(g,Le.normalizeOptions(c))}function aE(g,c){c=void 0===c?{}:c;return Le.deserializeWithMigrations(g,
c.migrations||Le.migrations,Le.normalizeOptions(c))}function gU(g){var c,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(c=Le,h=c.loadMorphFromSnapshot,f.yield(g.readJson(),2)):f.return(h.call(c,f.yieldResult))})}function hU(g,c,h){g=void 0===g?Le.MorphicEnv.default().world:g;var f,m,n,a,d,k,b,e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:f=h||{};m=void 0===f.showIndicator?!0:f.showIndicator;n=void 0===
f.changeName?!0:f.changeName;a=void 0===f.changeBrowserURL?!0:f.changeBrowserURL;c||(d=Le.resource(document.location.href),k=d.name(),c=d.join("../"+k.replace(/\.[^\.]+/,"-world.json")).withRelativePartsResolved());"string"===typeof c&&(c=Le.resource(c));n&&(g.name=c.nameWithoutExt());a&&(b=encodeURI(h.pathForBrowserHistory||Le.pathForBrowserHistory(c.path())),window.location.pathname!==b&&window.history.pushState({},"lively.next",b));if(!m){x.jumpTo(2);break}return x.yield(System.import("lively.components/loading-indicator.js"),
3);case 3:return l=x.yieldResult,p=l.LoadingIndicator,e=p.open("string"===typeof m?m:"Snapshotting..."),x.yield(e.whenRendered(),4);case 4:return x.yield(Le.promise.delay(100),2);case 2:return x.setFinallyBlock(6),x.yield(Le.createMorphSnapshot(g,h),8);case 8:return u=x.yieldResult,e.label="Uploading...",x.yield(e.whenRendered(),9);case 9:return x.return(c.writeJson(u));case 6:x.enterFinallyBlock(),e&&e.remove(),x.leaveFinallyBlock(0)}})}function ZK(g,c){if(void 0===c||!c)return Le.deserializeMorph(Le.serializeMorph(g),
{migrations:Le.migrations,reinitializeIds:!0});c=g.comments;g.comments=[];var h=[];g.attributeConnections&&(h=g.attributeConnections.filter(function(m){return m.targetObj.isCommentIndicator}),g.attributeConnections=g.attributeConnections.filter(function(m){return!(m.targetObj.isCommentIndicator||m.targetObj.isHalo)}));var f=Le.serializeMorph(g);g.comments=c;g.attributeConnections&&(g.attributeConnections=g.attributeConnections.concat(h));return Le.deserializeMorph(f,{migrations:Le.migrations,reinitializeIds:!0})}
function hx(g,c){c=void 0===c?{}:c;var h,f,m,n,a,d,k,b,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){switch(Ia.nextAddress){case 1:System.get("@system-env");h=c;f=void 0===h.addPreview?!1:h.addPreview;m=void 0===h.previewWidth?100:h.previewWidth;n=void 0===h.previewHeight?100:h.previewHeight;a=void 0===h.previewType?"png":h.previewType;d=void 0===h.testLoad?!0:h.testLoad;k=void 0===h.addPackages?!0:h.addPackages;b=void 0===h.ignoreMorphs?[]:h.ignoreMorphs;
e=void 0===h.frozenSnapshot?!1:h.frozenSnapshot;l=Le.serializeMorph(g,{frozenSnapshot:e});if(!k){Ia.jumpTo(2);break}return Ia.yield(Le.findRequiredPackagesOfSnapshot(l),3);case 3:p=Ia.yieldResult,u=p.packages,x=p.depMap,l.packages=u,z=Le.findLocalComponents(l.snapshot),Object.values(u["local://lively-object-modules/"]||{}).forEach(function(N){Object.entries(N).forEach(function(ia){var W=$jscomp.makeIterator(ia);ia=W.next().value;W=W.next().value;if(!ia.endsWith(".json")){var ca=Le.ast.parse(W),sa=
[],la=Le.Path("metadata.commit.name").get($world);Le.ast.AllNodesVisitor.run(ca,function(Aa,ib){"Literal"===Aa.type&&"string"===typeof Aa.value&&(Aa.value.match(/^styleguide:\/\/\$world\/.+/)&&!z.includes(Aa.value.replace("styleguide://$world/",""))&&sa.push({target:Aa,replacementFunc:function(){return JSON.stringify(Aa.value.replace("$world",la))}}),Aa.value.match(/^part:\/\/\$world\/.+/)&&!z.includes(Aa.value.replace("part://$world/",""))&&sa.push({target:Aa,replacementFunc:function(){return JSON.stringify(Aa.value.replace("$world",
la))}}))});N[ia]=Le.ast.transform.replaceNodes(sa,W).source}})}),l.packageDepMap=x;case 2:if(!f){Ia.jumpTo(4);break}return Ia.yield(System.import("lively.morphic/rendering/morph-to-image.js"),5);case 5:return E=Ia.yieldResult,G=E.renderMorphToDataURI,J=m||g.width,K=n||g.height,T=a||"png",Ia.setCatchFinallyBlocks(6),P=l,Ia.yield(G(g,{width:J,height:K,type:T,ignoreMorphs:[]}),8);case 8:P.preview=Ia.yieldResult;Ia.leaveTryBlock(4);break;case 6:return da=Ia.enterCatchBlock(),console.error("Error generating morph preview: "+
da),fa=l,Ia.yield(G(Le.morph({fill:g.fill,width:J,height:K}),{width:J,height:K,type:T,ignoreMorphs:b}),9);case 9:fa.preview=Ia.yieldResult;case 4:l.preview||(l.preview="");if(!d){Ia.jumpTo(10);break}Ia.setCatchFinallyBlocks(11);return Ia.yield(Le.loadMorphFromSnapshot(l,{highlightBuggyMorphs:!0,rootObject:g}),13);case 13:ka=Ia.yieldResult;if(!ka||!ka.isMorph)throw Error("reloading snapshot does not create a morph!");Ia.leaveTryBlock(10);break;case 11:throw za=Ia.enterCatchBlock(),Error("Error snapshotting morph: Cannot recreate morph from snapshot!\n"+
za.stack);case 10:return Ia.return(l)}})}function xr(g,c){return Le.deserializeMorph(g,Object.assign({reinitializeIds:!0,ignoreClassNotFound:!1,onDeserializationStart:Le.loadPackagesAndModulesOfSnapshot,migrations:Le.migrations},c))}function Q7(g,c){var h,f,m,n,a,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:if(!g.isDirectory())return d=c,k=g.name(),b.yield(g.read(),9);h=c[g.name()]={};return b.yield(g.dirList(),4);case 4:f=b.yieldResult,m=$jscomp.makeIterator(f),
n=m.next();case 5:if(n.done)return b.return(c);a=n.value;return b.yield(Q7(a,h),6);case 6:n=m.next();b.jumpTo(5);break;case 9:return d[k]=b.yieldResult,b.return(c)}})}function R7(g,c){c=void 0===c?[]:c;var h=[];if(g.hasOwnProperty("package.json")){var f=c.slice(1).reduceRight(function(n,a){return n.join(a)},Le.resource(c[0])).url;h.push({files:g,url:f,requiredPackages:g.requiredPackages})}for(var m in g)"object"===typeof g[m]&&h.push.apply(h,$jscomp.arrayFromIterable(R7(g[m],c.concat(m))));return h}
function iU(g){var c=Le.findPackagesInFileSpec(g.packages),h={};g=g.packageDepMap;if(!g)return c;c=$jscomp.makeIterator(c);for(var f=c.next();!f.done;f=c.next())f=f.value,h[f.url]=f;return Le.arr.flatten(Le.graph.sortByReference(g)).map(function(m){return h[m]})}function bE(g){var c,h,f,m,n,a,d,k,b,e,l,p,u,x,z,E,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:if(!g.packagesToRegister){J.jumpTo(2);break}c=$jscomp.makeIterator(g.packagesToRegister);h=c.next();
case 3:if(h.done){J.jumpTo(2);break}f=h.value;J.setCatchFinallyBlocks(6);return J.yield(Le.registerPackage(f),8);case 8:J.leaveTryBlock(4);break;case 6:J.enterCatchBlock(),console.error("Failed to register package "+f);case 4:h=c.next();J.jumpTo(3);break;case 2:if(!g.packages){J.jumpTo(9);break}m=Le.packagesOfSnapshot(g);n=$jscomp.makeIterator(m);a=n.next();case 10:if(a.done){J.jumpTo(9);break}k=d=a.value;b=k.files;e=k.url;if(p=(l=Le.lookupPackage(e))&&l.pkg){u=p.version;x=JSON.parse(b["package.json"]);
z=x.version;try{if(z&&u&&Le.semver.lte(z,u,!0)){console.log("[load morph] Package "+e+" is loaded in version "+u+(" which is newer than "+z+". Will NOT load older variant."));J.jumpTo(11);break}}catch(K){console.warn("Error in package version comparison: ",K)}}return J.yield(Le.createFiles(e,b),13);case 13:return J.yield(Le.ensurePackage(e),14);case 14:return p=J.yieldResult,J.yield(p.reload({forgetEnv:!1,forgetDeps:!1}),15);case 15:return J.yield(System.import("lively.classes/object-classes.js"),
16);case 16:E=J.yieldResult,G=E.default,Le.objectScriptingEnabled=!!G,Le.objectScriptingEnabled&&G.withId(p.name);case 11:a=n.next();J.jumpTo(10);break;case 9:return J.yield(Promise.all(Le.requiredModulesOfSnapshot(g).map(function(K){return(System.get(K)?null:System.import(K)).catch(function(T){return console.error("Error loading "+K,T)})})),0)}})}function $K(g){var c,h,f,m,n,a,d,k,b,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,za,Ia,N,ia,W,ca,sa,la,Aa,ib,ob,Ea,ua,ya;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sa){switch(Sa.nextAddress){case 1:c=
{},h=g.snapshot,f=[],m={},n=!0,a={},d={},b=Sa.forIn(h);case 2:if(null==(k=b.getNext())){Sa.jumpTo(4);break}e=h[k]["lively.serializer-class-info"];if(!(e&&e.module&&e.module.package)){Sa.jumpTo(5);break}l=Le.getPackage(e.module.package.name);if(!l.address.startsWith("local://")){Sa.jumpTo(5);break}return Sa.yield(System.import("lively.classes/object-classes.js"),7);case 7:return p=Sa.yieldResult,d.$jscomp$loop$prop$ObjectPackage$2727=p.default,Sa.yield(System.import("lively.classes/util.js"),8);case 8:return u=
Sa.yieldResult,x=u.withSuperclasses,Le.objectScriptingEnabled=!!d.$jscomp$loop$prop$ObjectPackage$2727,z=d.$jscomp$loop$prop$ObjectPackage$2727.forSystemPackage(l),Sa.yield(z.ensureSubModule(e.module.pathInPackage),9);case 9:E=Sa.yieldResult,G=E.systemModule._recorder[e.className],J=x(G),J.forEach(function(Qb){return function(mc){(mc=Qb.$jscomp$loop$prop$ObjectPackage$2727.lookupPackageForClass(mc))&&f.push(mc.systemPackage)}}(d));case 5:if(K=h[k].props.metadata)if(T=void 0,K.value&&K.value.__ref__?
(P=h[K.value.id],P.props.externalPackages&&(T=P.props.externalPackages.value)):T=K.externalPackages,T)for(n=!0,da=0;da<T.length;da++)m[T[da]]=!0;d={$jscomp$loop$prop$ObjectPackage$2727:d.$jscomp$loop$prop$ObjectPackage$2727};Sa.jumpTo(2);break;case 4:n&&(g.packagesToRegister=Object.keys(m)),fa=[],ka=$jscomp.makeIterator(f),za=ka.next();case 10:if(za.done)return f=[].concat($jscomp.arrayFromIterable(fa),$jscomp.arrayFromIterable(f)),Sa.yield(Promise.all(f.map(function(Qb){var mc,Yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fc){if(1==
fc.nextAddress)return mc=Le.resource(Qb.address).asDirectory(),fc.yield(Le.resourceToJSON(mc,{}),2);Yb=fc.yieldResult;c[mc.parent().url]||(c[mc.parent().url]={});Object.assign(c[mc.parent().url],Yb);a[Qb.url]||(a[Qb.url]=[]);fc.jumpToEnd()})})),17);Ia=za.value;N=$jscomp.makeIterator(Ia.modules());ia=N.next();case 13:if(ia.done){za=ka.next();Sa.jumpTo(10);break}W=ia.value;if(W.id.endsWith(".json")){Sa.jumpTo(14);break}ca=$jscomp;sa=ca.makeIterator;return Sa.yield(W.imports(),16);case 16:for(la=sa.call(ca,
Sa.yieldResult),Aa=la.next();!Aa.done;Aa=la.next())if(ob=ib=Aa.value,Ea=ob.fromModule,ua=Le.module(Ea).package())ya=ua.config,ya.lively&&ya.lively.isObjectPackage&&(fa.push(ua),a[Ia.url]?Le.arr.pushIfNotIncluded(a[Ia.url],ua.url):a[Ia.url]=[ua.url]);case 14:ia=N.next();Sa.jumpTo(13);break;case 17:return Sa.return({packages:c,depMap:a})}})}function jU(g){return[]}function aL(g,c){c=void 0===c?{}:c;var h,f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return h=
c.morphicDB||We.MorphicDB.default,a.yield(h.load("part","string"===typeof g?g:g.name,c,"string"===typeof g?void 0:g),2);case 2:f=a.yieldResult;if(!f.isWindow||!f.targetMorph){a.jumpTo(3);break}m=f.targetMorph;return a.yield(We.ensureCommitInfo(f.metadata&&f.metadata.commit),4);case 4:(n=a.yieldResult)&&m.changeMetaData("commit",n,!0,!1);case 3:return a.return(f)}})}function kU(g,c,h,f,m,n){var a,d,k,b,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:z.setCatchFinallyBlocks(2);
if(g.isMorph){z.jumpTo(4);break}if("function"!==typeof g.beforePublish){z.jumpTo(5);break}return z.yield(g.beforePublish(c,g),5);case 4:a=[],g.withAllSubmorphsDo(function(E){"function"===typeof E.beforePublish&&a.push(E)}),d=$jscomp.makeIterator(a),k=d.next();case 8:if(k.done){z.jumpTo(5);break}b=k.value;return z.yield(b.beforePublish(),9);case 9:k=d.next();z.jumpTo(8);break;case 5:z.leaveTryBlock(3);break;case 2:e=z.enterCatchBlock(),l="Error in beforePublish of "+g+"\n"+e.stack,"function"===typeof g.world&&
g.world()?g.world().logError(Error(l)):console.error(l);case 3:return p=Object.assign({previewWidth:100,previewHeight:100,previewType:"png"},h),u=h.morphicDB||We.MorphicDB.default,z.yield(u.snapshotAndCommit("part",c,g,p,f,m,n),12);case 12:return x=z.yieldResult,We.emit("lively.partsbin/partpublished",x),z.return(x)}})}function cE(g,c){c=void 0===c?{}:c;var h,f,m,n,a,d,k,b,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,za,Ia,N,ia,W,ca,sa,la,Aa,ib,ob,Ea,ua,ya,Sa,Qb,mc,Yb,fc,Jc,Nb,ld,Od,ta,Pa,Ra,Cb,ec,Bd,Ad;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Mc){switch(Mc.nextAddress){case 1:return h=
c,f=void 0===h.showPublishDialog?!0:h.showPublishDialog,m=void 0===h.notifications?!0:h.notifications,n=void 0===h.loadingIndicator?!0:h.loadingIndicator,a=void 0===h.preferWindow?!0:h.preferWindow,b=g,e=g.world()||g.env.world,l=g.name,p=[],u="",Mc.yield(We.ensureCommitInfo(We.Path("metadata.commit").get(g)||We.Path("metadata.commit").get(b)),2);case 2:x=Mc.yieldResult;z=c.morphicDB||We.MorphicDB.default;x||(x={type:"part",name:g.name,author:e.getCurrentUser(),tags:[],description:"no description"});
if(!f){x&&(E=x,l=E.name,p=E.tags,u=E.description);Mc.jumpTo(3);break}G=e;J=G.openPrompt;return Mc.yield(We.loadPart("publish part dialog"),5);case 5:return Mc.yield(J.call(G,Mc.yieldResult,{part:g}),4);case 4:K=Mc.yieldResult;T=K.db;P=K.commit;if(!P)return Mc.return(null);T&&(c.morphicDB=z=T);da=P;l=da.name;p=da.tags;u=da.description;case 3:if(!n){Mc.jumpTo(6);break}fa=$world.execCommand("open loading indicator","saving "+l+"...");return Mc.yield(We.promise.delay(80),6);case 6:Mc.setCatchFinallyBlocks(8,
9);ka="HEAD";za=x?x.name:g.name;if(za===l){Ia=x?x._id:void 0;Mc.jumpTo(11);break}return Mc.yield(z.exists("part",l),12);case 12:N=Mc.yieldResult;ia=N.exists;W=N.commitId;if(!ia){Mc.jumpTo(13);break}return Mc.yield(e.confirm('A part "'+l+'" already exists, overwrite?'),14);case 14:ca=Mc.yieldResult;if(!ca)return Mc.return(null);Ia=W;case 13:b.name=l;case 11:return a&&!g.isWindow&&(sa=g.getWindow())&&sa.targetMorph===g&&(g=sa,k=sa.metadata,d=!0),la={author:g.world().getCurrentUser(),message:"published",
tags:p,description:u},Mc.yield(We.savePart(g,l,c,la,ka,Ia),15);case 15:Aa=Mc.yieldResult;if(!d){Mc.jumpTo(16);break}if(b.metadata)return ob=b.metadata,Mc.yield(We.ensureCommitInfo(sa.metadata.commit),20);ib=b;return Mc.yield(We.ensureCommitInfo(sa.metadata.commit),19);case 19:ib.metadata={commit:Mc.yieldResult};Mc.jumpTo(18);break;case 20:ob.commit=Mc.yieldResult;case 18:sa.metadata=k;case 16:return m&&g.setStatusMessage("saved part "+l),Mc.return(Aa);case 9:Mc.enterFinallyBlock();fa&&fa.remove();
Mc.leaveFinallyBlock(0);break;case 8:Ea=Mc.enterCatchBlock();ua=$jscomp.makeIterator(Ea.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[]);ua.next();ua.next();ya=ua.next().value;Sa=ua.next().value;if(!ya||!Sa){Mc.jumpTo(21);break}Qb=$jscomp;mc=Qb.makeIterator;return Mc.yield(z.log(Sa,1,!0),22);case 22:return Yb=mc.call(Qb,Mc.yieldResult),Jc=fc=Yb.next().value,Nb=Jc.author,ld=Nb.name,Od=Jc.timestamp,ta='The current version of part "'+
l+'" is not the most recent!\nA newer version by '+(ld+" was saved on ")+(We.date.format(new Date(Od),"yyyy-mm-dd HH:MM")+". Overwrite?"),Mc.yield(e.confirm(["Version Mismatch\n",{},ta,{fontWeight:"normal",fontSize:16}]),23);case 23:Pa=Mc.yieldResult;if(!Pa)return Mc.return(null);Ra=We.obj.dissoc(fc,["preview"]);b.changeMetaData("commit",Ra,!0,!1);return Mc.return(cE(b,Object.assign({},c,{morphicDB:z,showPublishDialog:!1})));case 21:Cb=$jscomp.makeIterator(Ea.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but no version entry exists/)||
[]);Cb.next();Cb.next();ec=Cb.next().value;if(!ec){Mc.jumpTo(24);break}Bd="Part "+l+" no longer exist in the object database.\nDo you still want to publish it?";return Mc.yield(e.confirm(Bd),25);case 25:Ad=Mc.yieldResult;if(!Ad)return Mc.return(null);b.changeMetaData("commit",null,!0,!1);return Mc.return(cE(b,Object.assign({},c,{morphicDB:z,showPublishDialog:!1})));case 24:throw console.error(Ea),m&&e.logError("Error saving part: "+Ea),Ea;}})}function lU(g){g=void 0===g?{}:g;var c,h,f,m,n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==
d.nextAddress)return c=g.morphicDB||We.MorphicDB.default,d.yield(c.latestCommits("part"),2);if(3!=d.nextAddress)return h=d.yieldResult,f=h.map(function(k){return{isListItem:!0,string:k.name,value:k}}),d.yield($world.filterableListPrompt("Select part to load",f,{fuzzy:!0}),3);m=d.yieldResult;n=$jscomp.makeIterator(m.selected);a=n.next().value;return d.return(a?We.loadPart(a):null)})}function mU(g){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield($world.prompt("Enter part name to publish object under",
{input:g.name||"part-name",historyId:"lively.partsbin-partname-publish-to-folder-input-hist"}),2);c=h.yieldResult;if(!c)throw"canceled";return h.return(We.saveObjectToPartsbinFolder(g,c,{previewWidth:g.width,previewHeight:g.height}))})}function nU(g,c,h){h=void 0===h?{}:h;var f,m,n,a,d,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:h=Object.assign({preferWindow:!0},h);h.preferWindow&&(g=(f=g.getWindow())&&f.targetMorph===g?f:g);p.setCatchFinallyBlocks(2);
if(g.isMorph){p.jumpTo(4);break}if("function"!==typeof g.beforePublish){p.jumpTo(5);break}return p.yield(g.beforePublish(c,g),5);case 4:m=[],g.withAllSubmorphsDo(function(u){"function"===typeof u.beforePublish&&m.push(u)}),n=$jscomp.makeIterator(m),a=n.next();case 8:if(a.done){p.jumpTo(5);break}d=a.value;return p.yield(d.beforePublish(),9);case 9:a=n.next();p.jumpTo(8);break;case 5:p.leaveTryBlock(3);break;case 2:k=p.enterCatchBlock(),b="Error in beforePublish of "+g+"\n"+k.stack,"function"===typeof g.world&&
g.world()?g.world().logError(Error(b)):console.error(b);case 3:return p.yield(We.resource(h.partsbinFolder).ensureExistance(),12);case 12:return e=We.resource(h.partsbinFolder).join(c+".json"),p.yield(We.createMorphSnapshot(g,h),13);case 13:return l=p.yieldResult,p.yield(e.write(JSON.stringify(l,null,2)),14);case 14:return p.return({partName:c,url:e.url})}})}function bL(g,c){c=void 0===c?{}:c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(We.loadPart(g,c))})}function oU(g){return new We.CommitEditor(g)}
function Ama(g,c){var h={};c.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(f,m,n){m&&(h[m]=n)});return h}function Bma(g){g=String(g);if(!(100<g.length)&&(g=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(g))){var c=parseFloat(g[1]);switch((g[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return c*Cma;case "days":case "day":case "d":return c*dE;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*
c;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*c;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*c;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return c}}}function cL(g,c,h){if(!(g<c))return g<1.5*c?Math.floor(g/c)+" "+h:Math.ceil(g/c)+" "+h+"s"}function Dma(g){var c=0,h;for(h in g)c=(c<<5)-c+g.charCodeAt(h),c|=0;return Di.colors[Math.abs(c)%Di.colors.length]}function pU(g){function c(){if(c.enabled){var f=+new Date;c.diff=
f-(h||f);c.prev=h;h=c.curr=f;var m=Array(arguments.length);for(f=0;f<m.length;f++)m[f]=arguments[f];m[0]=Di.coerce(m[0]);"string"!==typeof m[0]&&m.unshift("%O");var n=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,function(a,d){if("%%"===a)return a;n++;d=Di.formatters[d];"function"===typeof d&&(a=d.call(c,m[n]),m.splice(n,1),n--);return a});Di.formatArgs.call(c,m);(c.log||Di.log||console.log.bind(console)).apply(c,m)}}var h;c.namespace=g;c.enabled=Di.enabled(g);c.useColors=Di.useColors();c.color=Dma(g);c.destroy=
Ema;"function"===typeof Di.init&&Di.init(c);Di.instances.push(c);return c}function Ema(){var g=Di.instances.indexOf(this||Fma);return-1!==g?(Di.instances.splice(g,1),!0):!1}function S7(){try{var g=jn.storage.debug}catch(c){}!g&&"undefined"!==typeof qU&&"env"in qU&&(g=qU.env.DEBUG);return g}function Ho(g){if(g){for(var c in Ho.prototype)g[c]=Ho.prototype[c];return g}}function rU(g,c){if(!g)return g;if(T7(g)){var h={_placeholder:!0,num:c.length};c.push(g);return h}if(sU(g)){h=Array(g.length);for(var f=
0;f<g.length;f++)h[f]=rU(g[f],c);return h}if("object"===typeof g&&!(g instanceof Date)){h={};for(f in g)h[f]=rU(g[f],c);return h}return g}function tU(g,c){if(!g)return g;if(g&&g._placeholder)return c[g.num];if(sU(g))for(var h=0;h<g.length;h++)g[h]=tU(g[h],c);else if("object"===typeof g)for(h in g)g[h]=tU(g[h],c);return g}function U7(){}function V7(g){var c=""+g.type;if(rk.BINARY_EVENT===g.type||rk.BINARY_ACK===g.type)c+=g.attachments+"-";g.nsp&&"/"!==g.nsp&&(c+=g.nsp+",");null!=g.id&&(c+=g.id);if(null!=
g.data){try{var h=JSON.stringify(g.data)}catch(f){h=!1}if(!1!==h)c+=h;else return Gma}uU("encoded %j as %s",g,c);return c}function Hma(g,c){vU.removeBlobs(g,function(h){var f=vU.deconstructPacket(h);h=V7(f.packet);f=f.buffers;f.unshift(h);c(f)})}function dL(){(this||Om).reconstructor=null}function wU(g){(this||Om).reconPack=g;(this||Om).buffers=[]}function eL(g){if(!g||"object"!==typeof g)return!1;if(Ima(g)){for(var c=0,h=g.length;c<h;c++)if(eL(g[c]))return!0;return!1}if("function"===typeof xU&&xU.isBuffer&&
xU.isBuffer(g)||"function"===typeof ArrayBuffer&&g instanceof ArrayBuffer||Jma&&g instanceof Blob||Kma&&g instanceof File)return!0;if(g.toJSON&&"function"===typeof g.toJSON&&1===arguments.length)return eL(g.toJSON(),!0);for(c in g)if(Object.prototype.hasOwnProperty.call(g,c)&&eL(g[c]))return!0;return!1}function Lma(){}function W7(g){return g.map(function(c){if(c.buffer instanceof ArrayBuffer){var h=c.buffer;if(c.byteLength!==h.byteLength){var f=new Uint8Array(c.byteLength);f.set(new Uint8Array(h,
c.byteOffset,c.byteLength));h=f.buffer}return h}return c})}function X7(g,c){c=c||{};var h=new tA;W7(g).forEach(function(f){h.append(f)});return c.type?h.getBlob(c.type):h.getBlob()}function Y7(g,c){return new Blob(W7(g),c||{})}function Z7(g){for(var c=[],h=0,f=g.length,m,n;h<f;)m=g.charCodeAt(h++),55296<=m&&56319>=m&&h<f?(n=g.charCodeAt(h++),56320==(n&64512)?c.push(((m&1023)<<10)+(n&1023)+65536):(c.push(m),h--)):c.push(m);return c}function $7(g,c){if(55296<=g&&57343>=g){if(c)throw Error("Lone surrogate U+"+
g.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function uA(){if(su>=fL)throw Error("Invalid byte index");var g=gL[su]&255;su++;if(128==(g&192))return g&63;throw Error("Invalid continuation byte");}function Mma(g){if(su>fL)throw Error("Invalid byte index");if(su==fL)return!1;var c=gL[su]&255;su++;if(0==(c&128))return c;if(192==(c&224)){var h=uA();c=(c&31)<<6|h;if(128<=c)return c;throw Error("Invalid continuation byte");}if(224==(c&240)){h=uA();var f=uA();c=(c&15)<<12|h<<6|
f;if(2048<=c)return $7(c,g)?c:65533;throw Error("Invalid continuation byte");}if(240==(c&248)&&(h=uA(),f=uA(),g=uA(),c=(c&7)<<18|h<<12|f<<6|g,65536<=c&&1114111>=c))return c;throw Error("Invalid UTF-8 detected");}function Nma(g,c,h){if(!c)return Aj.encodeBase64Packet(g,h);var f=new FileReader;f.onload=function(){Aj.encodePacket({type:g.type,data:f.result},c,!0,h)};return f.readAsArrayBuffer(g.data)}function yU(g,c,h){var f=Array(g.length);h=Oma(g.length,h);for(var m=function(a,d,k){c(d,function(b,
e){f[a]=e;k(b,f)})},n=0;n<g.length;n++)m(n,g[n],h)}function zU(g){var c="";do c=a8[g%64]+c,g=Math.floor(g/64);while(0<g);return c}function AU(){var g=zU(+new Date);return g!==b8?(c8=0,b8=g):g+"."+zU(c8++)}function yr(g){(this||Zi).path=g.path;(this||Zi).hostname=g.hostname;(this||Zi).port=g.port;(this||Zi).secure=g.secure;(this||Zi).query=g.query;(this||Zi).timestampParam=g.timestampParam;(this||Zi).timestampRequests=g.timestampRequests;(this||Zi).readyState="";(this||Zi).agent=g.agent||!1;(this||
Zi).socket=g.socket;(this||Zi).enablesXDR=g.enablesXDR;(this||Zi).withCredentials=g.withCredentials;(this||Zi).pfx=g.pfx;(this||Zi).key=g.key;(this||Zi).passphrase=g.passphrase;(this||Zi).cert=g.cert;(this||Zi).ca=g.ca;(this||Zi).ciphers=g.ciphers;(this||Zi).rejectUnauthorized=g.rejectUnauthorized;(this||Zi).forceNode=g.forceNode;(this||Zi).isReactNative=g.isReactNative;(this||Zi).extraHeaders=g.extraHeaders;(this||Zi).localAddress=g.localAddress}function zr(g){var c=g&&g.forceBase64;if(!Pma||c)(this||
wj).supportsBinary=!1;d8.call(this||wj,g)}function e8(){}function vA(g){f8.call(this||lf,g);(this||lf).requestTimeout=g.requestTimeout;(this||lf).extraHeaders=g.extraHeaders;if("undefined"!==typeof location){var c="https:"===location.protocol,h=location.port;h||(h=c?443:80);(this||lf).xd="undefined"!==typeof location&&g.hostname!==location.hostname||h!==g.port;(this||lf).xs=g.secure!==c}}function Ul(g){(this||lf).method=g.method||"GET";(this||lf).uri=g.uri;(this||lf).xd=!!g.xd;(this||lf).xs=!!g.xs;
(this||lf).async=!1!==g.async;(this||lf).data=void 0!==g.data?g.data:null;(this||lf).agent=g.agent;(this||lf).isBinary=g.isBinary;(this||lf).supportsBinary=g.supportsBinary;(this||lf).enablesXDR=g.enablesXDR;(this||lf).withCredentials=g.withCredentials;(this||lf).requestTimeout=g.requestTimeout;(this||lf).pfx=g.pfx;(this||lf).key=g.key;(this||lf).passphrase=g.passphrase;(this||lf).cert=g.cert;(this||lf).ca=g.ca;(this||lf).ciphers=g.ciphers;(this||lf).rejectUnauthorized=g.rejectUnauthorized;(this||
lf).extraHeaders=g.extraHeaders;this.create()}function g8(){for(var g in Ul.requests)Ul.requests.hasOwnProperty(g)&&Ul.requests[g].abort()}function Qma(){}function wA(g){BU.call(this||gj,g);(this||gj).query=(this||gj).query||{};hL||(hL=h8.___eio=h8.___eio||[]);(this||gj).index=hL.length;var c=this||gj;hL.push(function(h){c.onData(h)});(this||gj).query.j=(this||gj).index;"function"===typeof addEventListener&&addEventListener("beforeunload",function(){c.script&&(c.script.onerror=Qma)},!1)}function up(g){g&&
g.forceBase64&&((this||Jg).supportsBinary=!1);(this||Jg).perMessageDeflate=g.perMessageDeflate;(this||Jg).usingBrowserWebSocket=iL&&!g.forceNode;(this||Jg).protocols=g.protocols;(this||Jg).usingBrowserWebSocket||(xA=i8);CU.call(this||Jg,g)}function hj(g,c){if(!((this||Rd)instanceof hj))return new hj(g,c);c=c||{};g&&"object"===typeof g&&(c=g,g=null);g?(g=j8(g),c.hostname=g.host,c.secure="https"===g.protocol||"wss"===g.protocol,c.port=g.port,g.query&&(c.query=g.query)):c.host&&(c.hostname=j8(c.host).host);
(this||Rd).secure=null!=c.secure?c.secure:"undefined"!==typeof location&&"https:"===location.protocol;c.hostname&&!c.port&&(c.port=(this||Rd).secure?"443":"80");(this||Rd).agent=c.agent||!1;(this||Rd).hostname=c.hostname||("undefined"!==typeof location?location.hostname:"localhost");(this||Rd).port=c.port||("undefined"!==typeof location&&location.port?location.port:(this||Rd).secure?443:80);(this||Rd).query=c.query||{};"string"===typeof(this||Rd).query&&((this||Rd).query=Rma.decode((this||Rd).query));
(this||Rd).upgrade=!1!==c.upgrade;(this||Rd).path=(c.path||"/engine.io").replace(/\/$/,"")+"/";(this||Rd).forceJSONP=!!c.forceJSONP;(this||Rd).jsonp=!1!==c.jsonp;(this||Rd).forceBase64=!!c.forceBase64;(this||Rd).enablesXDR=!!c.enablesXDR;(this||Rd).withCredentials=!1!==c.withCredentials;(this||Rd).timestampParam=c.timestampParam||"t";(this||Rd).timestampRequests=c.timestampRequests;(this||Rd).transports=c.transports||["polling","websocket"];(this||Rd).transportOptions=c.transportOptions||{};(this||
Rd).readyState="";(this||Rd).writeBuffer=[];(this||Rd).prevBufferLen=0;(this||Rd).policyPort=c.policyPort||843;(this||Rd).rememberUpgrade=c.rememberUpgrade||!1;(this||Rd).binaryType=null;(this||Rd).onlyBinaryUpgrades=c.onlyBinaryUpgrades;(this||Rd).perMessageDeflate=!1!==c.perMessageDeflate?c.perMessageDeflate||{}:!1;!0===(this||Rd).perMessageDeflate&&((this||Rd).perMessageDeflate={});(this||Rd).perMessageDeflate&&null==(this||Rd).perMessageDeflate.threshold&&((this||Rd).perMessageDeflate.threshold=
1024);(this||Rd).pfx=c.pfx||null;(this||Rd).key=c.key||null;(this||Rd).passphrase=c.passphrase||null;(this||Rd).cert=c.cert||null;(this||Rd).ca=c.ca||null;(this||Rd).ciphers=c.ciphers||null;(this||Rd).rejectUnauthorized=void 0===c.rejectUnauthorized?!0:c.rejectUnauthorized;(this||Rd).forceNode=!!c.forceNode;(this||Rd).isReactNative="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();if("undefined"===typeof self||(this||Rd).isReactNative)c.extraHeaders&&
0<Object.keys(c.extraHeaders).length&&((this||Rd).extraHeaders=c.extraHeaders),c.localAddress&&((this||Rd).localAddress=c.localAddress);(this||Rd).id=null;(this||Rd).upgrades=null;(this||Rd).pingInterval=null;(this||Rd).pingTimeout=null;(this||Rd).pingIntervalTimer=null;(this||Rd).pingTimeoutTimer=null;this.open()}function al(g,c,h){(this||vf).io=g;(this||vf).nsp=c;(this||vf).json=this||vf;(this||vf).ids=0;(this||vf).acks={};(this||vf).receiveBuffer=[];(this||vf).sendBuffer=[];(this||vf).connected=
!1;(this||vf).disconnected=!0;(this||vf).flags={};h&&h.query&&((this||vf).query=h.query);(this||vf).io.autoConnect&&this.open()}function yA(g){g=g||{};(this||zn).ms=g.min||100;(this||zn).max=g.max||1E4;(this||zn).factor=g.factor||2;(this||zn).jitter=0<g.jitter&&1>=g.jitter?g.jitter:0;(this||zn).attempts=0}function Bj(g,c){if(!((this||me)instanceof Bj))return new Bj(g,c);g&&"object"===typeof g&&(c=g,g=void 0);c=c||{};c.path=c.path||"/socket.io";(this||me).nsps={};(this||me).subs=[];(this||me).opts=
c;this.reconnection(!1!==c.reconnection);this.reconnectionAttempts(c.reconnectionAttempts||Infinity);this.reconnectionDelay(c.reconnectionDelay||1E3);this.reconnectionDelayMax(c.reconnectionDelayMax||5E3);this.randomizationFactor(c.randomizationFactor||.5);(this||me).backoff=new Sma({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==c.timeout?2E4:c.timeout);(this||me).readyState="closed";(this||me).uri=g;(this||me).connecting=[];(this||
me).lastPing=null;(this||me).encoding=!1;(this||me).packetBuffer=[];g=c.parser||Tma;(this||me).encoder=new g.Encoder;(this||me).decoder=new g.Decoder;(this||me).autoConnect=!1!==c.autoConnect;(this||me).autoConnect&&this.open()}function k8(g,c){"object"===typeof g&&(c=g,g=void 0);c=c||{};g=Uma(g);var h=g.source,f=g.id,m=g.path;m=eE[f]&&m in eE[f].nsps;c.forceNew||c["force new connection"]||!1===c.multiplex||m?(l8("ignoring socket cache for %s",h),h=m8(h,c)):(eE[f]||(l8("new io instance for %s",h),
eE[f]=m8(h,c)),h=eE[f]);g.query&&!c.query&&(c.query=g.query);return h.socket(g.path,c)}function ix(g,c){c=void 0===c?{}:c;var h=c.l2lClient;if(!h)throw Error("lively.shell client side runCommand needs opts.l2lClient!");Eg.ClientCommand.installLively2LivelyServices(h);h=new Eg.ClientCommand(h);h.spawn(Object.assign({command:g},Eg.obj.dissoc(c,["l2lClient"])));return h}function fE(g){return Eg.dirCache[g.trackerId]?Eg.dirCache[g.trackerId]:Promise.resolve().then(function(){var c,h,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return m.yield(g.sendToAndWait(g.trackerId,"lively.shell.info",{}),2);c=m.yieldResult;h=c.data;f=h.defaultDirectory;return m.return(Eg.dirCache[g.trackerId]=f)})})}function gE(g){var c,h,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(g.sendToAndWait(g.trackerId,"lively.shell.env",{}),2);c=m.yieldResult;h=c.data;f=h.env;return m.return(f)})}function jL(g,c){c=(c=void 0===c?{}:c)||{};var h=Eg.runCommand('cat "'+g+'"',c);return h.whenDone().then(function(){if(h.exitCode)throw Error("Read "+
g+" failed: "+h.stderr);return h.output})}function kL(g,c,h){!h&&c&&c.content&&(h=c,c=h.content);var f=Eg.runCommand('tee "'+g+'"',Object.assign({stdin:c||""},h));return f.whenDone().then(function(){if(f.exitCode)throw Error("Write "+g+" failed: "+f.stderr);return f})}function lL(g,c){c=void 0===c?{}:c;return Mi._runCommand(g,Object.assign({l2lClient:Mi.L2LClient.ensure(Mi.defaultConnection)},c))}function hE(){return Mi._defaultDirectory(Mi.L2LClient.ensure(Mi.defaultConnection))}function DU(){return Mi._env(Mi.L2LClient.ensure(Mi.defaultConnection))}
function EU(g){function c(){0<f.length&&h.push(f);f=""}for(var h=[],f="",m="normal",n=0,a;a=g[n];n++)if("normal"===m&&/\s/.test(a))c();else{if('"'===a||"'"===a){if("normal"===m){m=a;continue}if(m===a){m="normal";continue}}"\\"===a&&m===g[n+1]&&(n++,a=g[n]);f+=a}c();return h}function FU(g,c,h){var f=h=void 0===h?{}:h,m=f.exclusions,n=void 0===f.fileTypes?[]:f.fileTypes,a=void 0===f.sizeLimit?"+1M":f.sizeLimit;h=void 0===f.charsBefore?80:f.charsBefore;f=void 0===f.charsAfter?80:f.charsAfter;m||(m=Mi.defaultGrepExclusions);
m=(m=[m.length?"-iname "+m.map(JSON.stringify).join(" -o -iname "):"",a?"-size "+a:""].filter(Boolean).join(" -o "))?"\\( "+m+" \\) -prune -o":"";n=(n=n.length?"-iname "+n.map(JSON.stringify).join(" -o -iname "):"")?"-a \\( "+n+" \\)":"";a='find %s %s -type f %s -a -print0 | xargs -0 grep -IinH -o ".\\{0,%s\\}%s.\\{0,%s\\}" '.replace(/([\(\);])/g,"\\$1");g=Mi.string.format(a,c,m,n,h,g,f);var d=Mi.runCommand(g);d.whenDone().then(function(k){var b=k.exitCode;b&&1!==b||(d.results=k.stdout.split("\n").map(function(e){e=
e.match(/(.*):([0-9]+):(.*)/);if(!e)return null;var l=$jscomp.makeIterator(e);l.next();e=l.next().value;var p=l.next().value;l=l.next().value;return{filename:e,lineno:Number(p)-1,match:l}}).filter(Boolean))});return d}function mL(g,c){var h,f,m,n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return h=wi.fileInfoCommandString(g,c),f=wi.runCommand(h,c),d.yield(f.whenDone(),2);if(m=0!=f.exitCode?f.output:null)throw m;n=$jscomp.makeIterator(wi.parseDirectoryListFromLs(f.stdout,
c.rootDirectory||"."));a=n.next().value;return d.return(a)})}function GU(g,c){return wi.string.lines(g).map(function(h){return h.trim().length?(new wi.FileInfo(c)).readFromDirectoryListLine(h):null}).filter(Boolean)}function nL(g,c){var h,f,m,n,a,d,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){h=Object.assign({findFilesGroup:"default-find-files-process"},c);f=h.findFilesGroup;m=h.rootDirectory;a=n=wi.findFilesProcesses[f]||(wi.findFilesProcesses[f]={promiseState:null,commands:[]});
d=a.commands;k=a.promiseState;k||(n.promiseState=k=wi.promise.deferred());b=wi.findFilesCommandString(g,c);d.forEach(function(p){return p.kill()});e=wi.runCommand(b,c);d.push(e);e.whenDone().then(function(){wi.arr.remove(d,e);if(d.some(function(u){return u.startTime>e.startTime}))console.log("[findFiles] command "+e+" exited but a newer findFiles command was started for group "+f+", discarding output");else{var p=0!=e.exitCode?e.output:null;p&&console.warn(p);p=p?[]:wi.parseDirectoryListFromLs(e.stdout,
m)||[];k.resolve(p);Object.assign(n,{promiseState:null,commands:[]})}}).catch(function(p){return console.error(p)});return l.return(k.promise)})}function HU(g){function c(h){return Array.prototype.concat.apply([h],h.children?h.children.map(c):[])}return c(g).map(function(h){var f=h.fullPath.replace(/^\//,"");return{fileName:f,path:f,rootDirectory:"./",isDirectory:h.isDirectory,isLink:void 0,lastModified:void 0,linkCount:void 0,mode:void 0,size:void 0,group:void 0,user:void 0}})}function oL(g,c,h){var f,
m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){f=g.isResource?g:Of.resource(System.decanonicalize(g));m=f.nameWithoutExt();return n.return(Of.loadWorldFromDB(m,void 0,c,h))})}function pL(g,c,h){var f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return c&&(Of.reset(),c.name=null,c.metadata&&(c.metadata.commit={})),f=Of.MorphicDB.default,a.yield(f.load("world",void 0,h,g),2);m=a.yieldResult;n="undefined"!==typeof document?document.location.search:
"";h=Object.assign({pathForBrowserHistory:Of.pathForBrowserHistory(m.name,n)},h);return a.return(Of.loadWorld(m,c,h))})}function qL(g,c,h,f){var m,n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return h&&(Of.reset(),h.name=null,h.metadata&&(h.metadata.commit={})),m=Of.MorphicDB.default,d.yield(m.load("world",g,f,void 0,c||void 0),2);n=d.yieldResult;a="undefined"!==typeof document?document.location.search:"";f=Object.assign({pathForBrowserHistory:Of.pathForBrowserHistory(g,
a)},f);return d.return(Of.loadWorld(n,h,f))})}function rL(g,c,h){h=void 0===h?{}:h;var f,m,n,a,d,k,b,e,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:f=h;m=f.env;n=f.root;a=void 0===f.verbose?!0:f.verbose;d=void 0===f.localconfig?!0:f.localconfig;k=void 0===f.l2l?!0:f.l2l;b=void 0===f.shell?!0:f.shell;e=void 0===f.worldLoadDialog?!1:f.worldLoadDialog;l=void 0===f.showUserFlap?"undefined"===typeof g.showsUserFlap?!0:g.showsUserFlap:f.showUserFlap;
m=m||(c?c.env:Of.MorphicEnv.default());p=m.domEnv.document||document;u=p.getElementById("dom-loading-indicator");G.setCatchFinallyBlocks(2,3);if(!(x=k)){G.jumpTo(5);break}return G.yield(Of.setupLively2Lively(g),6);case 6:x=G.yieldResult;case 5:z=x;if(!z||!b){G.jumpTo(7);break}return G.yield(Of.setupLivelyShell({l2lClient:z}),7);case 7:a&&u&&(u.style.display="");if(!d){G.jumpTo(9);break}return G.yield(Of.loadLocalConfig(),10);case 10:case 9:return G.yield(m.setWorld(g,n),11);case 11:e&&g.execCommand("load world");
h.pathForBrowserHistory&&window.history.pushState({},"lively.next",h.pathForBrowserHistory);g.showsUserFlap=l;if(c)c.onUnload();Of.emit("world/loaded",g);return G.return(g);case 3:G.enterFinallyBlock();u&&(u.style.display="none");G.leaveFinallyBlock(0);break;case 2:E=G.enterCatchBlock();console.error("Error loading world: ",E);if(!c){G.jumpTo(12);break}return G.yield(m.setWorld(c),13);case 13:c.showError(E);case 12:throw E;}})}function zA(g,c){var h,f,m,n,a,d,k,b,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,
za,Ia,N,ia,W,ca,sa,la,Aa,ib,ob,Ea,ua,ya,Sa,Qb,mc,Yb,fc,Jc,Nb,ld,Od,ta,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ra){switch(Ra.nextAddress){case 1:return c=Object.assign({showSaveDialog:!0,useExpectedCommit:!0,errorOnMissingExpectedCommit:!1,confirmOverwrite:!0},c),h=g.name,f=[],m="",Ra.yield(Of.ensureCommitInfo(Of.Path("metadata.commit").get(g)),2);case 2:n=Ra.yieldResult;a=c.morphicdb||Of.MorphicDB.default;d="";k="db";if(!c.showSaveDialog){n&&(b=n,h=b.name,f=b.tags,m=b.description);
Ra.jumpTo(3);break}return Ra.yield(Of.resource("part://SystemDialogs/save world dialog").read(),4);case 4:return e=Ra.yieldResult,Ra.yield(g.openPrompt(e,{targetWorld:g}),5);case 5:if(l=Ra.yieldResult,p=l.commit,u=l.db,x=l.mode,z=l.filePath,u&&(a=u),k=x,d=z,E=p||{},h=E.name,f=E.tags,m=E.description,!h)return Ra.return(null);case 3:return G=$world.execCommand("open loading indicator","saving "+h+"..."),Ra.yield(Of.promise.delay(80),6);case 6:if("json"!=k){Ra.jumpTo(7);break}J=Of.resource(System.baseURL).join(d).withRelativePartsResolved();
return Ra.yield(J.exists(),8);case 8:return Ra.yieldResult?(G.visible=!1,Ra.yield($world.confirm(["File Conflict\n",{},"The file you want to save the world to\n",{fontSize:15,fontWeight:"normal"},J.url,{textStyle:"italic",fontSize:15,fontWeight:"normal"},"\n already exists. Overwrite?",{fontSize:15,fontWeight:"normal"}],{lineWrapping:!1}),12)):Ra.yield(J.ensureExistance(),10);case 12:K=Ra.yieldResult;if(!K)return G.remove(),Ra.return();G.visible=!0;case 10:return g.changeMetaData("file",d,!1,!1),
Ra.yield(Of.createMorphSnapshot(g),13);case 13:return T=Ra.yieldResult,Ra.yield(J.writeJson(T),14);case 14:return P=JSON.stringify(T),da=d.replace(".json",".br.json"),fa=Of,ka=fa.resource,Ra.yield(Of.defaultDirectory(Of.ShellClientResource.defaultL2lClient),16);case 16:return Ra.yield(ka.call(fa,Ra.yieldResult+"/..").join(da).withRelativePartsResolved().brotli(P),15);case 15:return Of.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(h).read(),G.remove(),g.setStatusMessage("saved world "+
h+" to file: "+J.url),Ra.return();case 7:Ra.setCatchFinallyBlocks(17,18);za={previewWidth:200,previewHeight:200,previewType:"png",ignoreMorphs:[G]};Ia="HEAD";N=n?n.name:g.name;if(!c.useExpectedCommit){Ra.jumpTo(20);break}if(N===h||!c.confirmOverwrite){ia=n?n._id:void 0;Ra.jumpTo(20);break}return Ra.yield(a.exists("world",h),22);case 22:W=Ra.yieldResult;ca=W.exists;sa=W.commitId;if(!ca){Ra.jumpTo(23);break}G.center=g.windowBounds().center();G.visible=!1;return Ra.yield(g.confirm(["The world\n",{fontWeight:"normal"},
'"'+h+'"',{},"\nalready exists, overwrite?",{fontWeight:"normal"}],{hasFixedPosition:!0,width:350}),24);case 24:la=Ra.yieldResult;G.visible=!0;if(!la)return Ra.return(null);ia=sa;case 23:g.name=h;case 20:return Aa={author:g.getCurrentUser(),message:"world save",tags:f,description:m},Ra.yield(a.snapshotAndCommit("world",h,g,za,Aa,Ia,ia),25);case 25:return ib=Ra.yieldResult,window.history&&(ob=Of.pathForBrowserHistory(h),window.history.pushState({},"lively.next",ob)),Of.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(h).read(),
g.setStatusMessage("saved world "+h),g.get("world-list")&&g.get("world-list").onWorldSaved(h),Ra.return(ib);case 18:Ra.enterFinallyBlock();G.remove();Ra.leaveFinallyBlock(0);break;case 17:Ea=Ra.enterCatchBlock();if(Ea.message.includes("but no version entry exists")&&!c.errorOnMissingExpectedCommit)return Ra.return(zA(g,Object.assign({},c,{morphicdb:a,useExpectedCommit:!1,showSaveDialog:!1})));ua=$jscomp.makeIterator(Ea.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||
[]);ua.next();ua.next();ya=ua.next().value;Sa=ua.next().value;if(!ya||!Sa){Ra.jumpTo(26);break}Qb=$jscomp;mc=Qb.makeIterator;return Ra.yield(a.log(Sa,1,!0),27);case 27:Yb=mc.call(Qb,Ra.yieldResult);fc=Yb.next().value;Jc=!0;if(!c.confirmOverwrite){Ra.jumpTo(28);break}Nb=fc;ld=Nb.author;Od=ld.name;ta=Nb.timestamp;Pa="The current version of world "+h+" is not the most recent!\nA newer version by "+(Od+" was saved on ")+(Of.date.format(new Date(ta),"yyyy-mm-dd HH:MM")+". Overwrite?");return Ra.yield(g.confirm(["Version Conflict\n",
null,Pa,{fontSize:16,fontWeight:"normal"}],{width:600}),29);case 29:Jc=Ra.yieldResult;case 28:if(!Jc)return Ra.return(null);g.changeMetaData("commit",Of.obj.dissoc(fc,["preview"]),!0,!1);return Ra.return(zA(g,Object.assign({},c,{morphicdb:a,showSaveDialog:!1})));case 26:console.error(Ea),g.logError("Error saving world: "+Ea),Ra.jumpTo(18)}})}function IU(g,c){var h=g.row;g=g.column;var f=c.row;c=c.column;return h<f?-2:h===f?g<c?-1:g===c?0:1:2}function Ar(g,c){return 0>Rk.comparePosition(g,c)}function AA(g,
c){return 0>=Rk.comparePosition(g,c)}function Br(g,c){return 0===Rk.comparePosition(g,c)}function BA(g,c){return Rk.lessPosition(g,c)?g:c}function CA(g,c){return Rk.lessPosition(g,c)?c:g}function JU(g,c){if(!g||!c)return g==c;var h=!0,f={},m;for(m in g)if(f[m]=!0,!c.hasOwnProperty(m)||g[m]!==c[m]){h=!1;break}if(h)for(var n in c)if(!(f[n]||g.hasOwnProperty(n)&&g[n]===c[n])){h=!1;break}return h}function sL(g,c,h,f,m){m=void 0===m?"":m;var n="string"!==typeof g,a="string"!==typeof h;if(n||a){var d=[];
n?d.push(g,c):d.push(g+m,c);a?d.push(h,f):d.push(h+m,f);return d}return!c&&!f||c==f?[g+m+h,c]:c&&f?zh.shallowEquals(c,f)?[g+m+h,c]:[g+m,c,h,f]:[g+m,c,h,f]}function tL(g,c){c=void 0===c?"":c;if(2>=g.length)return g;var h=[],f=$jscomp.makeIterator(g),m=f.next().value,n=f.next().value;for(f=2;f<g.length;f+=2)n=zh.concatAttributePair(m,n,g[f],g[f+1],c),2>=n.length?(m=n[0],n=n[1]):(h.push.apply(h,$jscomp.arrayFromIterable(n.slice(0,-2))),n=$jscomp.makeIterator(n.slice(-2)),m=n.next().value,n=n.next().value);
h.push(m,n);return h}function uL(g,c){for(var h=0,f=0;f<g.length;f+=2){var m=g[f],n=h+("string"===typeof m?m.length:1);if(n<c)h=n;else{if(h===c)return[g.slice(0,f),g.slice(f)];if(n===c)return[g.slice(0,f+2),g.slice(f+2)];if("string"!==typeof m)throw Error("Assuming text is a string for splitting it, got "+m+" instead!");var a=g[f+1],d=c-h;n=[].concat($jscomp.arrayFromIterable(g.slice(0,f)),[m.slice(0,d),a]);g=m.length===d?g.slice(f+2):[m.slice(c-h),a].concat($jscomp.arrayFromIterable(g.slice(f+2)));
return[n,g]}}return[g,[]]}function vL(g,c){var h=g;g=0;for(var f=[],m=0;m<c.length;m++){var n=$jscomp.makeIterator(zh.splitTextAndAttributesAt(h,c[m]-g));h=n.next().value;n=n.next().value;f.push(h);for(var a=0;a<h.length;a+=2)g+="string"===typeof h[a]?h[a].length:1;h=n}f.push(h);return f}function wL(g,c,h){h=void 0===h?!1:h;if(!g.length||2===g.length&&""==g[0])return h?c:c.slice();if(!c.length||2===c.length&&""==c[0])return h?g:g.slice();g=h?g:g.slice();for(h=0;h<c.length;h+=2)g.push(c[h],c[h+1]);
return g}function xL(g,c,h){var f=c.start;c=c.end;if(zh.eqPosition(f,c))return null;zh.lessPosition(c,f)&&(c=$jscomp.makeIterator([c,f]),f=c.next().value,c=c.next().value);var m=f;f=m.row;var n=m.column;m=c;c=m.row;m=m.column;var a=g.getLine(f),d=a.textAndAttributes,k=0;n=$jscomp.makeIterator(zh.splitTextAndAttributesAt(d,n));g=n.next().value;n=n.next().value;d.length=0;zh.textAndAttributesDo(g,function(l,p){k+="string"===typeof l?l.length:1;d.push(l,p)});if(f===c){var b=$jscomp.makeIterator(zh.splitTextAndAttributesAt(n,
m-k));n=b.next().value;b=b.next().value}zh.textAndAttributesDo(n,function(l,p){return d.push(l,h(a,p))});f===c&&zh.textAndAttributesDo(b,function(l,p){return d.push(l,p)});a._textAttributes=null;a.textAndAttributes=zh.joinTextAttributes(d);if(f!==c){b={};for(f+=1;f<c;b={$jscomp$loop$prop$textAndAttributes$1598$2732:b.$jscomp$loop$prop$textAndAttributes$1598$2732},f++)a=a.nextLine(),b.$jscomp$loop$prop$textAndAttributes$1598$2732=a.textAndAttributes,g=b.$jscomp$loop$prop$textAndAttributes$1598$2732.slice(),
b.$jscomp$loop$prop$textAndAttributes$1598$2732.length=0,zh.textAndAttributesDo(g,function(l){return function(p,u){return l.$jscomp$loop$prop$textAndAttributes$1598$2732.push(p,h(a,u))}}(b)),a._textAttributes=null,a.textAndAttributes=zh.joinTextAttributes(b.$jscomp$loop$prop$textAndAttributes$1598$2732);a=a.nextLine();var e=a.textAndAttributes;f=$jscomp.makeIterator(zh.splitTextAndAttributesAt(e,m));b=f.next().value;f=f.next().value;e.length=0;zh.textAndAttributesDo(b,function(l,p){return e.push(l,
h(a,p))});zh.textAndAttributesDo(f,function(l,p){return e.push(l,p)});a._textAttributes=null;a.textAndAttributes=zh.joinTextAttributes(e)}}function yL(g,c){var h=g.column;g=g.row;var f=[],m=[];c=$jscomp.makeIterator(zh.splitTextAndAttributesIntoLines(c));for(var n=c.next();!n.done;n=c.next()){n=n.value;for(var a=0;a<n.length;a+=2){var d=n[a];d=h+("string"===typeof d?d.length:1);f.push({start:{row:g,column:h},end:{row:g,column:d}});m.push(n[a],n[a+1]);h=d}h=0;g++}return{ranges:f,textAndAttributes:m}}
function iE(g,c){c=void 0===c?"\n":c;if(!g.length)return[];for(var h=[],f=[],m=0;m<g.length;m+=2){var n=g[m],a=g[m+1];if("string"!==typeof n)f.push(n,a);else for(;n.length;){var d=n.indexOf(c);if(-1===d){f.push(n,a);break}0<d&&f.push(n.slice(0,d),a);h.push(f);n=n.slice(d+1);f=[]}}f.length?h.push(f):(f=$jscomp.makeIterator(g.slice(-2)),g=f.next().value,f=f.next().value,"string"===typeof g&&g.endsWith(c)&&h.push(["",f]));return h}function zL(g,c){c=void 0===c?g.textAndAttributesInRange(g.selection.range):
c;var h=new g.constructor(Object.assign({},g.defaultTextStyle,{width:g.width,textAndAttributes:c}));c=h.textRenderer.directRenderTextLayerFn(h);g=h.textRenderer.directRenderLineFn(h);c=c();var f=System.global&&System.global.getComputedStyle?System.global.getComputedStyle(c):null;f&&(c.ownerDocument.body.appendChild(c),c.style.whiteSpace=f.whiteSpace,c.style.overflowWrap=f.overflowWrap,c.style.wordBreak=f.wordBreak,c.style.minWidth=f.minWidth,c.parentNode.removeChild(c));h=$jscomp.makeIterator(h.document.lines);
for(f=h.next();!f.done;f=h.next())c.appendChild(g(f.value));return c.outerHTML}function Rs(g){return g?g.replace(/^\s+|\s+$/g,""):""}function KU(g,c){var h=g&&"string"===typeof g.type,f=h?g:c,m;for(m in g){var n=g[m];Array.isArray(n)?n.forEach(function(a){KU(a,f)}):n&&"object"===typeof n&&KU(n,f)}h&&Object.defineProperty(g,"parent",{configurable:!0,writable:!0,enumerable:!1,value:c||null});return g}function AL(g){(this||Vma).options=g||{}}function yl(g){g=g||{};n8.call(this||tu,g);(this||tu).indentation=
g.indent}function jx(g){throw new RangeError(Wma[g]);}function o8(g,c){var h=g.split("@"),f="";1<h.length&&(f=h[0]+"@",g=h[1]);g=g.replace(Xma,".").split(".");h=[];for(var m=g.length;m--;)h[m]=c(g[m]);c=h.join(".");return f+c}function p8(g){for(var c=[],h=0,f=g.length;h<f;){var m=g.charCodeAt(h++);if(55296<=m&&56319>=m&&h<f){var n=g.charCodeAt(h++);56320==(64512&n)?c.push(((1023&m)<<10)+(1023&n)+65536):(c.push(m),h--)}else c.push(m)}return c}function vp(){this.href=this.path=this.pathname=this.query=
this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function jE(g,c,h){if(g&&Cr.isObject(g)&&g instanceof vp)return g;var f=new vp;return f.parse(g,c,h),f}function Dr(g){if("string"!=typeof g)throw new TypeError("Path must be a string. Received "+JSON.stringify(g));}function q8(g,c){for(var h,f="",m=0,n=-1,a=0,d=0;d<=g.length;++d){if(d<g.length)h=g.charCodeAt(d);else{if(47===h)break;h=47}if(47===h){if(n!==d-1&&1!==a)if(n!==d-1&&2===a){if(2>f.length||2!==
m||46!==f.charCodeAt(f.length-1)||46!==f.charCodeAt(f.length-2))if(2<f.length){if(n=f.lastIndexOf("/"),n!==f.length-1){-1===n?(f="",m=0):m=(f=f.slice(0,n)).length-1-f.lastIndexOf("/");n=d;a=0;continue}}else if(2===f.length||1===f.length){f="";m=0;n=d;a=0;continue}c&&(0<f.length?f+="/..":f="..",m=2)}else 0<f.length?f+="/"+g.slice(n+1,d):f=g.slice(n+1,d),m=d-n-1;n=d;a=0}else 46===h&&-1!==a?++a:a=-1}return f}function LU(g,c){try{return decodeURIComponent(g.join(""))}catch(f){}if(1===g.length)return g;
c=c||1;var h=g.slice(0,c);g=g.slice(c);return Array.prototype.concat.call([],LU(h),LU(g))}function MU(){return Array.prototype.reduce.call(arguments,function(g,c){return Yma.resolve(g,c)})}function r8(g){return"\\"===Zma.sep?g.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):g}function kE(g){return $ma(g.replace(/\+/g,"%2B"))}function BL(g,c,h){ana.nextTick(function(){g(c,h)})}function DA(g,c){try{return JSON.parse(g.replace(/^\)\]\}'/,""))}catch(h){throw h.sourceMapData=c,h;}}function s8(g,c,h){c=kE(c);
try{return String(g(c))}catch(f){throw f.sourceMapData=h,f;}}function t8(g,c,h,f){try{var m=u8(g,c)}catch(n){return BL(f,n)}if(!m||m.map)return BL(f,null,m);g=kE(m.url);h(g,function(n,a){if(n)return n.sourceMapData=m,f(n);m.map=String(a);try{m.map=DA(m.map,m)}catch(d){return f(d)}f(null,m)})}function v8(g,c,h){g=u8(g,c);if(!g||g.map)return g;g.map=s8(h,g.url,g);g.map=DA(g.map,g);return g}function u8(g,c){c=r8(c);g=(g=g.match(bna))?g[1]||g[2]||"":null;if(!g)return null;var h=g.match(cna);if(h){var f=
h[1]||"text/plain",m=h[2]||"";h=h[3]||"";c={sourceMappingURL:g,url:null,sourcesRelativeTo:c,map:h};if(!dna.test(f)){var n=Error("Unuseful data uri mime type: "+f);n.sourceMapData=c;throw n;}try{if(";base64"===m)if("undefined"===typeof TextDecoder||"undefined"===typeof Uint8Array)n=w8(h);else{var a=w8(h),d=a.length,k=new Uint8Array(d);for(g=0;g<d;g++)k[g]=a.charCodeAt(g);n=(new TextDecoder(ena,{fatal:!0})).decode(k)}else n=decodeURIComponent(h);c.map=DA(n,c)}catch(b){throw b.sourceMapData=c,b;}return c}n=
MU(c,g);return{sourceMappingURL:g,url:n,sourcesRelativeTo:n,map:null}}function x8(g,c,h,f,m){"function"===typeof f&&(m=f,f={});var n=g.sources?g.sources.length:0,a={sourcesResolved:[],sourcesContent:[]};if(0===n)BL(m,null,a);else{var d=function(){n--;0===n&&m(null,a)};y8(g,c,f,function(k,b,e){a.sourcesResolved[e]=k;"string"===typeof b?(a.sourcesContent[e]=b,BL(d,null)):(k=kE(k),h(k,function(l,p){a.sourcesContent[e]=l?l:String(p);d()}))})}}function z8(g,c,h,f){var m={sourcesResolved:[],sourcesContent:[]};
if(!g.sources||0===g.sources.length)return m;y8(g,c,f,function(n,a,d){m.sourcesResolved[d]=n;if(null!==h)if("string"===typeof a)m.sourcesContent[d]=a;else{n=kE(n);try{m.sourcesContent[d]=String(h(n))}catch(k){m.sourcesContent[d]=k}}});return m}function y8(g,c,h,f){h=h||{};c=r8(c);for(var m,n,a=0,d=g.sources.length;a<d;a++)m=null,"string"===typeof h.sourceRoot?m=h.sourceRoot:"string"===typeof g.sourceRoot&&!1!==h.sourceRoot&&(m=g.sourceRoot),m=null===m||""===m?MU(c,g.sources[a]):MU(c,m.replace(fna,
"/"),g.sources[a]),n=(g.sourcesContent||[])[a],f(m,n,a)}function um(g){A8.call(this||NU,g)}function CL(g){if(g&&g.isListItem&&"string"===typeof g.string)return g;if(!g||!g.isListItem)return{isListItem:!0,string:String(g),value:g};var c=g.string||g.label||"no item.string";g.string=c&&"string"!==typeof c?Array.isArray(c)?c.map(function(h,f){return 0==f%2?String(h):""}).join(""):String(c):String(c);return g}function DL(g){var c=g.filePath,h=g.worldName,f=g.snapshot,m=g.commit,n=g.loadingIndicator,a=
g.progress,d=void 0===g.logError?function(sa){return console.log(sa)}:g.logError,k,b,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,za,Ia,N,ia,W,ca;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sa){switch(sa.nextAddress){case 1:return sa.setCatchFinallyBlocks(2),k=JSON.parse(localStorage.getItem("lively.load-config")||'{"lively.lang":"dynamic","lively.ast":"dynamic","lively.source-transform":"dynamic","lively.classes":"dynamic","lively.vm":"dynamic","lively.modules":"dynamic","lively.user":"dynamic","lively.storage":"dynamic","lively.morphic":"dynamic"}'),
a.opacity=0,a.hasFixedPosition=!0,a.openInWorld(),a.bottomCenter=n.topCenter,sa.yield(re.polyfills(),4);case 4:return b=$world.env,re.doBootstrap?sa.yield(re.bootstrapLivelySystem(n,a,k),8):sa.yield(re.fastPrepLivelySystem(n),7);case 7:sa.jumpTo(6);break;case 8:case 6:return n.label="Loading lively.2lively...",sa.yield(lively.modules.registerPackage("lively.2lively"),9);case 9:re.askBeforeQuit&&window.addEventListener("beforeunload",function(la){return la.returnValue="Really?"},!0);if("dynamic"!=
k["lively.morphic"]||re.fastLoad){e=lively.morphic;sa.jumpTo(10);break}n.label="Loading lively.morphic...";return sa.yield(lively.modules.importPackage("lively.morphic"),11);case 11:e=sa.yieldResult,a.finishPackage({packageName:"lively.morphic",loaded:!0});case 10:n.label="Loading world...";window.onresize=null;window.loadCompiledFrozenPart=lively.modules.module("lively.morphic/partsbin.js")._recorder.loadPart;re.unregisterExtension("part");re.registerExtension(re.partResourceExtension);re.unregisterExtension("styleguide");
re.registerExtension(re.styleguideResourceExtension);lively.FreezerRuntime=!1;l=document.location;window.worldLoadingIndicator=n;sa.setCatchFinallyBlocks(12);p={root:$world.env.renderer.rootNode,verbose:!0,localconfig:!0,l2l:!0,shell:!0};if(f)return f.startsWith("http")||(f=re.resource(System.baseURL).join(f).url),sa.yield(lively.modules.module("lively.morphic/world.js").recorder,33);if(m)return sa.yield(e.World.loadFromCommit(m,void 0,Object.assign({},p,{browserURL:"/worlds/load?name="+m.name})),
15);if(h)return"__newWorld__"==h?Object.values(k).every(function(la){return"frozen"==la})||re.fastLoad?sa.yield(lively.modules.module("lively.ide/world.js").recorder,29):sa.yield(lively.modules.System.import("lively.ide/world.js"),27):sa.yield(e.World.loadFromDB(h,void 0,void 0,Object.assign({},p,{browserURL:"/worlds/load?name="+h.replace(/\.json($|\?)/,"")})),15);if(!c){sa.jumpTo(15);break}return sa.yield(e.World.loadFromResource(re.resource(System.baseURL).join(c),void 0,Object.assign({},p,{browserURL:"/worlds/load?file="+
c})),15);case 27:return z=sa.yieldResult,u=z.LivelyWorld,sa.yield(lively.modules.System.import("lively.morphic/world-loading.js"),28);case 28:E=sa.yieldResult;x=E.loadWorld;sa.jumpTo(26);break;case 29:return G=sa.yieldResult,u=G.LivelyWorld,sa.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,30);case 30:J=sa.yieldResult,x=J.loadWorld;case 26:return sa.yield(x(new u({openNewProjectPrompt:!0}),void 0,p),15);case 33:return da=sa.yieldResult,K=da.World,sa.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,
34);case 34:return fa=sa.yieldResult,P=fa.loadWorld,sa.yield(lively.modules.module("lively.morphic/serialization.js").recorder,35);case 35:return ka=sa.yieldResult,za=T=ka.loadMorphFromSnapshot,sa.yield(re.resource(f).readJson(),37);case 37:return sa.yield(za(sa.yieldResult),36);case 36:return Ia=sa.yieldResult,sa.yield(P(new K({showsUserFlap:!1,extent:$world.extent}),void 0,p),38);case 38:N=sa.yieldResult,N.addMorph(Ia),N.onWindowResize();case 15:sa.leaveTryBlock(13,2);break;case 12:ia=sa.enterCatchBlock(2),
window.__loadError__=ia;case 13:return a.finishPackage({packageName:"world",loaded:!0}),a.fadeIntoBack(),window.addEventListener("popstate",function(la){document.location==l&&document.location.reload()}),re.worldLoaded=!0,sa.yield($world.whenReady(),39);case 39:return n.remove(),sa.yield(b.renderer.worldMorph.whenRendered(),40);case 40:"dynamic"!=k["lively.morphic"]||re.fastLoad||(b.renderer.clear(),b.fontMetric.uninstall(),b.eventDispatcher.uninstall());sa.leaveTryBlock(0);break;case 2:throw W=sa.enterCatchBlock(),
W.originalErr&&(W=W.originalErr),ca=W.message,W.stack!==W.message&&(ca+=W.stack.includes(W.message)?W.stack.replace(W.message,"\n"):W.stack),d(ca),W;}})}Ma({A:Lt,D:uz,J:WH,K:vz,N:Qs,P:Qh,a:bh,a0:Vp,a1:cr,a2:Ll,a7:bL,a8:zA,aY:$D,aZ:bE,a_:$K,af:ah,av:Bz,aw:XJ,az:wz,b2:sz,b3:rz,b4:GC,b5:HC,b6:vs,b8:br,b9:us,bC:so,bE:tj,bH:LC,bJ:Pt,bK:jg,bM:rs,bT:function(g){g=void 0===g?document.body:g;var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){wp.default().world||(c=window.$world=window.$$world=
new Ss({name:B8.name,extent:ui(window.innerWidth,window.innerHeight)}),wp.default().setWorldRenderedOn(c,g,window.prerenderNode));window.$world.dontRecordChangesWhile(function(){var f=NC(B8,{reinitializeIds:function(m){return m}});if(f.isWorld)f.position=ui(0,0),f.isEmbedded=!0,wp.default().setWorldRenderedOn(f,g,window.prerenderNode),"elastic"===f.resizePolicy&&f.execCommand("resize to fit window");else try{g!=document.body?(new window.ResizeObserver(function(m){return f.execCommand("resize on client",
m[0])})).observe(g):window.onresize=lively.FreezerRuntime.resizeHandler=function(){return f.execCommand("resize on client")},f.openInWorld(ui(0,0)),f.execCommand("resize on client",g)}catch(m){f.position=ui(0,0)}});h.jumpToEnd()})},ba:fI,bb:dI,bc:eI,bd:gI,be:lL,bf:hE,bg:ZD,by:se,d:ll,g:hm,i:$b,k:hx,l:xr,m:Dk,o:ts,p:ui,r:hd,s:St,u:aL,w:Cz,x:kl,y:qz,z:Bk});var Ef=lively.FreezerRuntime.recorderFor("lively.resources/src/helpers.js");Ef.applyExclude=hc;Ef.parseQuery=Kb;Ef.stringifyQuery=id;Ef.withRelativePartsResolved=
Zc;Ef._relativePathBetween_checkPathes=function(g,c){g.startsWith("/")&&(g=g.slice(1));c.startsWith("/")&&(c=c.slice(1));g=g.split("/");c=c.split("/");for(var h=0;h<c.length&&g[h]&&g[h]==c[h];h++);return"../".repeat(Math.max(0,c.length-h-1))+g.splice(h,g.length).join("/")};Ef.relativePathBetween=yd;Ef.join=Kc;Ef.parent=sc;Ef.parents=bd;Ef.resource=hd;Ef.createFiles=se;Ef.registerExtension=xe;Ef.unregisterExtension=ne;Ef.applyExclude=hc;Ef.applyExclude=hc;Ef.parseQuery=Kb;Ef.parseQuery=Kb;Ef.stringifyQuery=
id;Ef.stringifyQuery=id;Ef.slashEndRe=/\/+$/;Ef.slashStartRe=/^\/+/;Ef.protocolRe=/^[a-z0-9-_\.]+:/;Ef.urlRe=/^([^:\/]+):\/\/([^\/]*)(.*)/;Ef.slashslashRe=/^\/\/[^\/]+/;Ef.pathDotRe=/\/\.\//g;Ef.pathDoubleDotRe=/\/[^\/]+\/\.\./;Ef.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Ef.withRelativePartsResolved=Zc;Ef.withRelativePartsResolved=Zc;Ef.relativePathBetween=yd;Ef.relativePathBetween=yd;Ef.join=Kc;Ef.join=Kc;Ef.parent=sc;Ef.parent=sc;Ef.parents=bd;Ef.parents=bd;var kx=Ef.extensions||[];Ef.extensions=kx;Ef.extensions=
kx;Ef.extensions=kx;Ef.resource=hd;Ef.resource=hd;Ef.createFiles=se;Ef.createFiles=se;Ef.registerExtension=xe;Ef.registerExtension=xe;Ef.unregisterExtension=ne;Ef.unregisterExtension=ne;var EL=/^file:\/\/\/[a-z]:\//i;Ef.windowsURLPrefixRe=EL;Ef.windowsURLPrefixRe=EL;Ef.windowsURLPrefixRe=EL;var FL=/^[a-z]:\//i;Ef.windowsPathPrefixRe=FL;Ef.windowsPathPrefixRe=FL;Ef.windowsPathPrefixRe=FL;var GL=/^[a-z]:\/$/i;Ef.windowsRootPathRe=GL;Ef.windowsRootPathRe=GL;Ef.windowsRootPathRe=GL;var pj=lively.FreezerRuntime.recorderFor("lively.resources/src/resource.js");
pj.nyi=function(g,c){throw Error(c+" for "+g.constructor.name+" not yet implemented");};pj.resource=hd;pj.parseQuery=Kb;pj.withRelativePartsResolved=Zc;pj.relativePathBetween=yd;pj.windowsPathPrefixRe=FL;pj.stringifyQuery=id;pj.slashEndRe=/\/+$/;pj.slashStartRe=/^\/+/;pj.protocolRe=/^[a-z0-9-_\.]+:/;pj.slashslashRe=/^\/\/[^\/]+/;var Cg=function(g,c){if(!g)throw Error("Cannot create resource without url");this.url=String(g);this.binary=!1;this.linkCount=this._isLink=this._isDirectory=this.mode=this.group=
this.user=this.contentType=this.type=this.size=this.etag=this.created=this.lastModified=void 0};Cg.fromProps=function(g){g=void 0===g?{}:g;return(new this(g.url)).assignProperties(g)};Cg.prototype.equals=function(g){if(!g||this.constructor!==g.constructor)return!1;var c=this.url;g=g.url;"/"===c[c.length-1]&&(c=c.slice(0,-1));"/"===g[g.length-1]&&(g=g.slice(0,-1));return c===g};Cg.prototype.toString=function(){return this.constructor.name+'("'+this.url+'")'};Cg.prototype.newResource=function(g){return pj.resource(g,
this)};Cg.prototype.path=function(){var g=this.url.replace(pj.protocolRe,"").replace(pj.slashslashRe,"");return""===g?"/":g};Cg.prototype.pathWithoutQuery=function(){return this.path().split("?")[0]};Cg.prototype.name=function(){var g=this.path(),c=g.lastIndexOf("?");-1<c&&(g=g.slice(0,c));g.endsWith("/")&&(g=g.slice(0,-1));g=g.split("/");return decodeURIComponent(g[g.length-1])};Cg.prototype.ext=function(){var g=this.url;if(g.endsWith("/"))return"";g=$jscomp.makeIterator(g.match(/\.([^\/\.]+$)/)||
["",""]);g.next();return g.next().value.toLowerCase()};Cg.prototype.nameWithoutExt=function(){var g=this.name(),c=g.lastIndexOf(".");0<c&&(g=g.slice(0,c));return g};Cg.prototype.scheme=function(){return this.url.split(":")[0]};Cg.prototype.host=function(){var g=this.url.indexOf("://");if(-1===g)return null;g=this.url.slice(g+3);var c=g.indexOf("/");return g.slice(0,-1<c?c:g.length)};Cg.prototype.schemeAndHost=function(){return this.isRoot()?this.asFile().url:this.url.slice(0,this.url.length-this.path().length)};
Cg.prototype.parent=function(){return this.isRoot()?null:this.newResource(this.url.split("?")[0].replace(pj.slashEndRe,"").split("/").slice(0,-1).join("/")+"/")};Cg.prototype.parents=function(){for(var g=[],c=this.parent();c;)g.unshift(c),c=c.parent();return g};Cg.prototype.isParentOf=function(g){var c=this;return g.schemeAndHost()===this.schemeAndHost()&&g.parents().some(function(h){return h.equals(c)})};Cg.prototype.query=function(){return pj.parseQuery(this.url)};Cg.prototype.withQuery=function(g){var c=
Object.assign({},this.query(),{},g);g=$jscomp.makeIterator(this.url.split("?")).next().value;c=pj.stringifyQuery(c);return this.newResource(g+"?"+c)};Cg.prototype.commonDirectory=function(g){if(g.schemeAndHost()!==this.schemeAndHost())return null;if(this.isDirectory()&&this.equals(g))return this;if(this.isRoot())return this.asDirectory();if(g.isRoot())return g.asDirectory();g=g.parents();for(var c=this.parents(),h=this.root(),f=0;f<c.length;f++){var m=c[f],n=g[f];if(!n||!m.equals(n))break;h=m}return h};
Cg.prototype.withRelativePartsResolved=function(){var g=this.path(),c=pj.withRelativePartsResolved(g);if(c===g)return this;c.startsWith("/")&&(c=c.slice(1));c[1]===":".startsWith("/")?c=c.slice(1):":"===c[1]&&c.match(pj.windowsPathPrefixRe)&&(c=c.slice(3));return this.newResource(this.root().url+c)};Cg.prototype.relativePathFrom=function(g){return pj.relativePathBetween(g.url,this.url)};Cg.prototype.withPath=function(g){return(this.isRoot()?this:this.root()).join(g)};Cg.prototype.join=function(g){return this.newResource(this.url.replace(pj.slashEndRe,
"")+"/"+g.replace(pj.slashStartRe,""))};Cg.prototype.isRoot=function(){return"/"===this.path()};Cg.prototype.isFile=function(){return!this.isRoot()&&!this.url.match(pj.slashEndRe)};Cg.prototype.isDirectory=function(){return!this.isFile()};Cg.prototype.asDirectory=function(){return this.url.endsWith("/")?this:this.newResource(this.url.replace(pj.slashEndRe,"")+"/")};Cg.prototype.root=function(){if(this.isRoot())return this;var g=this.url.slice(0,-this.path().length);return this.newResource(g+"/")};
Cg.prototype.asFile=function(){return this.url.endsWith("/")?this.newResource(this.url.replace(pj.slashEndRe,"")):this};Cg.prototype.assignProperties=function(g){for(var c in g)if("url"!==c){var h=c;if("isLink"===c||"isDirectory"===c)h="_"+c;this[h]=g[c]}return this};Cg.prototype.ensureExistance=function(g){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){switch(h.nextAddress){case 1:return h.yield(c.exists(),2);case 2:return h.yieldResult?h.return(c):h.yield(c.parent().ensureExistance(),
3);case 3:return c.isFile()?h.yield(c.write(g||""),5):h.yield(c.mkdir(),5);case 5:return h.return(c)}})};Cg.prototype.copyTo=function(g,c){c=void 0===c?!0:c;var h=this,f,m,n,a,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:if(h.isFile()){n=g.isFile()?g:g.join(h.name());if(!c){k.jumpTo(8);break}return k.yield(n.parent().ensureExistance(),8)}if(!g.isDirectory())throw Error("Cannot copy a directory to a file!");return k.yield(h.dirList("infinity"),4);case 4:return f=
k.yieldResult,m=f.map(function(b){return g.join(b.relativePathFrom(h))}),k.yield(g.ensureExistance(),5);case 5:return k.yield(f.reduceRight(function(b,e,l){return function(){return Promise.resolve(e.isDirectory()&&m[l].ensureExistance()).then(b)}},function(){return Promise.resolve()})(),6);case 6:return k.yield(f.reduceRight(function(b,e,l){return function(){return Promise.resolve(e.isFile()&&e.copyTo(m[l],!1)).then(b)}},function(){return Promise.resolve()})(),3);case 8:return a=n,d=a.write,k.yield(h.read(),
11);case 11:return k.yield(d.call(a,k.yieldResult),3);case 3:return k.return(h)}})};Cg.prototype.rename=function(g){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(c.copyTo(g),2);c.remove();return h.return(g)})};Cg.prototype.beBinary=function(g){return this.setBinary(!0)};Cg.prototype.setBinary=function(g){this.binary=g;return this};Cg.prototype.read=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){pj.nyi(g,
"read");c.jumpToEnd()})};Cg.prototype.write=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){pj.nyi(g,"write");c.jumpToEnd()})};Cg.prototype.mkdir=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){pj.nyi(g,"mkdir");c.jumpToEnd()})};Cg.prototype.exists=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){pj.nyi(g,"exists");c.jumpToEnd()})};Cg.prototype.remove=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){pj.nyi(g,
"remove");c.jumpToEnd()})};Cg.prototype.dirList=function(g,c){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){pj.nyi(h,"dirList");f.jumpToEnd()})};Cg.prototype.readProperties=function(g){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){pj.nyi(c,"readProperties");h.jumpToEnd()})};Cg.prototype.writeJson=function(g,c){return this.write((void 0===c?0:c)?JSON.stringify(g,null,2):JSON.stringify(g))};Cg.prototype.readJson=function(g){var c=this,h,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==
m.nextAddress?(h=JSON,f=h.parse,m.yield(c.read(),2)):m.return(f.call(h,m.yieldResult))})};Cg.prototype.__serialize__=function(){return{__expr__:'var r = null; try { r = resource("'+this.url+'");} catch (err) {}; r',bindings:{"lively.resources":["resource"]}}};$jscomp.global.Object.defineProperties(Cg.prototype,{isResource:{configurable:!0,enumerable:!0,get:function(){return!0}},canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!1}}});pj.Resource=Cg;pj.default=Cg;var EA=lively.FreezerRuntime.recorderFor("lively.lang/closure.js");
EA.evalJS=zk;EA.parameterRegex=/function[^\(]*\(([^\)]*)\)|\(?([^\)=]*)\)?\s*=>/;var Cj=function(g,c,h,f){this.originalFunc=g;this.varMapping=c||{};this.setFuncSource(h||g);this.setFuncProperties(g||f)};Cj.fromFunction=function(g,c){return new this(g,c||{})};Cj.fromSource=function(g,c){return new this(null,c||{},g)};Cj.prototype.setFuncSource=function(g){return this.source=g="undefined"!==typeof lively&&lively.sourceTransform&&"function"===typeof lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder?
lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder(g):String(g)};Cj.prototype.getFuncSource=function(){return this.source||this.setFuncSource(this.originalFunc)};Cj.prototype.hasFuncSource=function(){return this.source&&!0};Cj.prototype.getFunc=function(){return this.originalFunc||this.recreateFunc()};Cj.prototype.getFuncProperties=function(){return this.funcProperties||(this.funcProperties={})};Cj.prototype.setFuncProperties=function(g){var c=this.getFuncProperties(),h;for(h in g)g.hasOwnProperty(h)&&
(c[h]=g[h])};Cj.prototype.lookup=function(g){return this.varMapping[g]};Cj.prototype.parameterNames=function(g){return"undefined"!==typeof lively&&lively.ast&&lively.ast.parseFunction?(lively.ast.parseFunction(g).params||[]).map(function(c){return"Identifier"===c.type?c.name:c.left&&"Identifier"===c.left.type?c.left.name:null}).filter(Boolean):(g=EA.parameterRegex.exec(g))?(g[1]||g[2]||"").split(",").map(function(c){return c.trim()}):[]};Cj.prototype.firstParameter=function(g){return this.parameterNames(g)[0]||
null};Cj.prototype.recreateFunc=function(){return this.recreateFuncFromSource(this.getFuncSource(),this.originalFunc)};Cj.prototype.recreateFuncFromSource=function(g,c){c=[];var h="$super"===this.firstParameter(g);for(f in this.varMapping)this.varMapping.hasOwnProperty(f)&&"this"!=f&&c.push("var "+f+" = this.varMapping."+f+";\n");var f="";0<c.length&&(f+=c.join("\n"));h&&(f+="(function superWrapperForClosure() { return ");f+="("+g+")";h&&(f+=".apply(this, [$super.bind(this)].concat(Array.from(arguments))) })");
try{var m=EA.evalJS.call(this,f)||this.couldNotCreateFunc(f);this.addFuncProperties(m);return this.originalFunc=m}catch(n){throw g="Cannot create function "+n+" src: "+f,console.error(g),Error(g);}};Cj.prototype.addFuncProperties=function(g){var c=this.getFuncProperties(),h;for(h in c)c.hasOwnProperty(h)&&(g[h]=c[h]);this.addClosureInformation(g)};Cj.prototype.couldNotCreateFunc=function(g){var c="Could not recreate closure from source: \n"+g;console.error(c);return function(){throw Error(c);}};Cj.prototype.asFunction=
function(){return this.recreateFunc()};Cj.prototype.addClosureInformation=function(g){g.hasLivelyClosure=!0;g.livelyClosure=this;return g};$jscomp.global.Object.defineProperties(Cj.prototype,{isLivelyClosure:{configurable:!0,enumerable:!0,get:function(){return!0}},doNotSerialize:{configurable:!0,enumerable:!0,get:function(){return["originalFunc"]}}});Ma("Z",Cj);EA.Closure=Cj;EA.default=Cj;var uu=lively.FreezerRuntime.recorderFor("lively.lang/Group.js");uu.groupBy=wd;var Pm=function(){};Pm.fromArray=
function(g,c,h){for(var f=new uu.Group,m=0,n=g.length;m<n;m++){var a=c.call(h,g[m],m);uu.Group.prototype.hasOwnProperty(a)&&(a="_"+a);f[a]||(f[a]=[]);f[a].push(g[m])}return f};Pm.prototype.toArray=function(){return this.reduceGroups(function(g,c,h){return g.concat([h])},[])};Pm.prototype.forEach=function(g,c){var h=this;Object.keys(h).forEach(function(f){h[f].forEach(g.bind(c,f))});return h};Pm.prototype.forEachGroup=function(g,c){var h=this;Object.keys(h).forEach(function(f){g.call(c,f,h[f])});return h};
Pm.prototype.map=function(g,c){var h=new uu.Group;this.forEachGroup(function(f,m){h[f]=m.map(g.bind(c,f))});return h};Pm.prototype.mapGroups=function(g,c){var h=new uu.Group;this.forEachGroup(function(f,m){h[f]=g.call(c,f,m)});return h};Pm.prototype.keys=function(){return Object.keys(this)};Pm.prototype.reduceGroups=function(g,c,h){this.forEachGroup(function(f,m){c=g.call(h,c,f,m)});return c};Pm.prototype.count=function(){return this.reduceGroups(function(g,c,h){g[c]=h.length;return g},{})};$jscomp.global.Object.defineProperties(Pm,
{by:{configurable:!0,enumerable:!0,get:function(){return uu.groupBy}}});uu.Group=Pm;uu.default=Pm;var Sb=lively.FreezerRuntime.recorderFor("lively.lang/array.js");Sb.range=Rc;Sb.withN=Pd;Sb.genN=Hb;Sb.filter=Gc;Sb.binarySearchFor=ud;Sb.findAndGet=Vc;Sb.filterByKey=Id;Sb.grep=ie;Sb.mask=Fb;Sb.reject=Ac;Sb.rejectByKey=$c;Sb.without=Bc;Sb.withoutAll=vd;Sb.uniq=pb;Sb.uniqBy=lb;Sb.uniqByKey=Zb;Sb.compact=Mb;Sb.mutableCompact=ub;Sb.forEach=rc;Sb.zip=Ua;Sb.flatten=Lb;Sb.flatmap=mb;Sb.interpose=Gb;Sb.delimWith=
vc;Sb.map=Lc;Sb.invoke=cc;Sb.pluck=Vb;Sb.reduce=Ub;Sb.reduceRight=Ga;Sb.some=jb;Sb.every=X;Sb.equals=ha;Sb.deepEquals=Fa;Sb.isSorted=Ja;Sb.sort=Ca;Sb.sortBy=ra;Sb.sortByKey=tb;Sb.reverse=Na;Sb.reversed=lc;Sb.reMatches=kd;Sb.first=Tb;Sb.last=md;Sb.intersect=wb;Sb.union=je;Sb.pushAt=bf;Sb.removeAt=Wc;Sb.remove=xb;Sb.pushAll=ze;Sb.pushAllAt=yb;Sb.pushIfNotIncluded=nb;Sb.replaceAt=Ha;Sb.clear=R;Sb.isSubset=xa;Sb.doAndContinue=$a;Sb.nestedDelay=Ab;Sb.forEachShowingProgress=bc;Sb.swap=Ec;Sb.rotate=pc;Sb.groupBy=
wd;Sb.groupByKey=xd;Sb.partition=Se;Sb.batchify=v;Sb.toTuples=Ie;Sb.combinationsPick=cf;Sb.combinations=df;Sb.take=Ze;Sb.drop=ke;Sb.takeWhile=Ke;Sb.dropWhile=yf;Sb.shuffle=wf;Sb.max=ug;Sb.min=Zd;Sb.sum=Hc;Sb.count=dh;Sb.size=ed;Sb.histogram=pg;Sb.clone=Qc;Sb.toArray=Va;Sb.each=gb;Sb.all=Za;Sb.any=V;Sb.collect=O;Sb.findAll=Ka;Sb.inject=ea;Sb.mapAsyncSeries=Da;Sb.mapAsync=Ta;Sb.objectEquals=Sn;Sb.delay=of;Sb.once=jg;Sb.NullFunction=Ib;Sb.Group=Pm;Sb.GLOBAL="undefined"!==typeof System?System.global:
"undefined"!==typeof window?window:global;Sb.features={from:!!Array.from,filter:!!Array.prototype.filter,find:!!Array.prototype.find,findIndex:!!Array.prototype.findIndex,includes:!!Array.prototype.includes};Sb.from=Sb.features.from?Array.from:function(g){if(!g)return[];if(Array.isArray(g))return g;if(g.toArray)return g.toArray();for(var c=g.length,h=Array(c);c--;)h[c]=g[c];return h};Sb.detect=Sb.features.find?function(g,c,h){return g.find(c,h)}:function(g,c,h){for(var f,m=0,n=g.length;m<n;m++)if(f=
g[m],c.call(h,f,m))return f};Sb.findIndex=Sb.features.findIndex?function(g,c,h){return g.findIndex(c,h)}:function(g,c,h){var f=-1;return g.find(function(m,n){f=n;return c.call(m,h)})?f:-1};Sb.isArray=Array.isArray;Sb.includes=Sb.features.includes?function(g,c){return g.includes(c)}:function(g,c){return-1!==g.indexOf(c)};Sb.include=Sb.includes;Sb.permutations=function(){function g(c,h){return c.length?Sb.flatmap(c,function(f,m){return g(c.slice(0,m).concat(c.slice(m+1)),h.concat([f]))}):[h]}return function(c){return g(c,
[])}}();Sb.features.from||(Array.from=Sb.from);Sb.features.filter||(Array.prototype.filter=function(g,c){return Sb.filter(this,g,c)});Sb.features.find||(Array.prototype.find=function(g,c){return Sb.detect(this,g,c)});Sb.features.findIndex||(Array.prototype.findIndex=function(g,c){return Sb.findIndex(this,g,c)});Sb.features.includes||(Array.prototype.includes=function(g){return Sb.includes(this,g)});var OU=Sb.from,PU=Sb.detect,QU=Sb.findIndex,RU=Sb.isArray,SU=Sb.includes,TU=Sb.include,UU=Sb.permutations;
Sb.range=Rc;Sb.range=Rc;Sb.from=OU;Sb.from=OU;Sb.withN=Pd;Sb.withN=Pd;Sb.genN=Hb;Sb.genN=Hb;Sb.filter=Gc;Sb.filter=Gc;Sb.detect=PU;Sb.detect=PU;Sb.binarySearchFor=ud;Sb.binarySearchFor=ud;Sb.findIndex=QU;Sb.findIndex=QU;Sb.findAndGet=Vc;Sb.findAndGet=Vc;Sb.filterByKey=Id;Sb.filterByKey=Id;Sb.grep=ie;Sb.grep=ie;Sb.mask=Fb;Sb.mask=Fb;Sb.reject=Ac;Sb.reject=Ac;Sb.rejectByKey=$c;Sb.rejectByKey=$c;Sb.without=Bc;Sb.without=Bc;Sb.withoutAll=vd;Sb.withoutAll=vd;Sb.uniq=pb;Sb.uniq=pb;Sb.uniqBy=lb;Sb.uniqBy=
lb;Sb.uniqByKey=Zb;Sb.uniqByKey=Zb;Sb.compact=Mb;Sb.compact=Mb;Sb.mutableCompact=ub;Sb.mutableCompact=ub;Sb.forEach=rc;Sb.forEach=rc;Sb.zip=Ua;Sb.zip=Ua;Sb.flatten=Lb;Sb.flatten=Lb;Sb.flatmap=mb;Sb.flatmap=mb;Sb.interpose=Gb;Sb.interpose=Gb;Sb.delimWith=vc;Sb.delimWith=vc;Sb.map=Lc;Sb.map=Lc;Sb.invoke=cc;Sb.invoke=cc;Sb.pluck=Vb;Sb.pluck=Vb;Sb.reduce=Ub;Sb.reduce=Ub;Sb.reduceRight=Ga;Sb.reduceRight=Ga;Sb.isArray=RU;Sb.isArray=RU;Sb.includes=SU;Sb.includes=SU;Sb.include=TU;Sb.include=TU;Sb.some=jb;
Sb.some=jb;Sb.every=X;Sb.every=X;Sb.equals=ha;Sb.equals=ha;Sb.deepEquals=Fa;Sb.deepEquals=Fa;Sb.isSorted=Ja;Sb.isSorted=Ja;Sb.sort=Ca;Sb.sort=Ca;Sb.sortBy=ra;Sb.sortBy=ra;Sb.sortByKey=tb;Sb.sortByKey=tb;Sb.reverse=Na;Sb.reverse=Na;Sb.reversed=lc;Sb.reversed=lc;Sb.reMatches=kd;Sb.reMatches=kd;Sb.first=Tb;Sb.first=Tb;Sb.last=md;Sb.last=md;Sb.intersect=wb;Sb.intersect=wb;Sb.union=je;Sb.union=je;Sb.pushAt=bf;Sb.pushAt=bf;Sb.removeAt=Wc;Sb.removeAt=Wc;Sb.remove=xb;Sb.remove=xb;Sb.pushAll=ze;Sb.pushAll=
ze;Sb.pushAllAt=yb;Sb.pushAllAt=yb;Sb.pushIfNotIncluded=nb;Sb.pushIfNotIncluded=nb;Sb.replaceAt=Ha;Sb.replaceAt=Ha;Sb.clear=R;Sb.clear=R;Sb.isSubset=xa;Sb.isSubset=xa;Sb.doAndContinue=$a;Sb.doAndContinue=$a;Sb.nestedDelay=Ab;Sb.nestedDelay=Ab;Sb.forEachShowingProgress=bc;Sb.forEachShowingProgress=bc;Sb.swap=Ec;Sb.swap=Ec;Sb.rotate=pc;Sb.rotate=pc;Sb.groupBy=wd;Sb.groupBy=wd;Sb.groupByKey=xd;Sb.groupByKey=xd;Sb.partition=Se;Sb.partition=Se;Sb.batchify=v;Sb.batchify=v;Sb.toTuples=Ie;Sb.toTuples=Ie;
Sb.permutations=UU;Sb.permutations=UU;Sb.combinationsPick=cf;Sb.combinationsPick=cf;Sb.combinations=df;Sb.combinations=df;Sb.take=Ze;Sb.take=Ze;Sb.drop=ke;Sb.drop=ke;Sb.takeWhile=Ke;Sb.takeWhile=Ke;Sb.dropWhile=yf;Sb.dropWhile=yf;Sb.shuffle=wf;Sb.shuffle=wf;Sb.max=ug;Sb.max=ug;Sb.min=Zd;Sb.min=Zd;Sb.sum=Hc;Sb.sum=Hc;Sb.count=dh;Sb.count=dh;Sb.size=ed;Sb.size=ed;Sb.histogram=pg;Sb.histogram=pg;Sb.clone=Qc;Sb.clone=Qc;Sb.toArray=Va;Sb.toArray=Va;Sb.each=gb;Sb.each=gb;Sb.all=Za;Sb.all=Za;Sb.any=V;Sb.any=
V;Sb.collect=O;Sb.collect=O;Sb.findAll=Ka;Sb.findAll=Ka;Sb.inject=ea;Sb.inject=ea;Sb.mapAsyncSeries=Da;Sb.mapAsyncSeries=Da;Sb.mapAsync=Ta;Sb.mapAsync=Ta;var Gf=Object.freeze({__proto__:null,range:Rc,from:OU,withN:Pd,genN:Hb,filter:Gc,detect:PU,binarySearchFor:ud,findIndex:QU,findAndGet:Vc,filterByKey:Id,grep:ie,mask:Fb,reject:Ac,rejectByKey:$c,without:Bc,withoutAll:vd,uniq:pb,uniqBy:lb,uniqByKey:Zb,compact:Mb,mutableCompact:ub,forEach:rc,zip:Ua,flatten:Lb,flatmap:mb,interpose:Gb,delimWith:vc,map:Lc,
invoke:cc,pluck:Vb,reduce:Ub,reduceRight:Ga,isArray:RU,includes:SU,include:TU,some:jb,every:X,equals:ha,deepEquals:Fa,isSorted:Ja,sort:Ca,sortBy:ra,sortByKey:tb,reverse:Na,reversed:lc,reMatches:kd,first:Tb,last:md,intersect:wb,union:je,pushAt:bf,removeAt:Wc,remove:xb,pushAll:ze,pushAllAt:yb,pushIfNotIncluded:nb,replaceAt:Ha,clear:R,isSubset:xa,doAndContinue:$a,nestedDelay:Ab,forEachShowingProgress:bc,swap:Ec,rotate:pc,groupBy:wd,groupByKey:xd,partition:Se,batchify:v,toTuples:Ie,permutations:UU,combinationsPick:cf,
combinations:df,take:Ze,drop:ke,takeWhile:Ke,dropWhile:yf,shuffle:wf,max:ug,min:Zd,sum:Hc,count:dh,size:ed,histogram:pg,clone:Qc,toArray:Va,each:gb,all:Za,any:V,collect:O,findAll:Ka,inject:ea,mapAsyncSeries:Da,mapAsync:Ta});Ma("b",Gf);var nd=lively.FreezerRuntime.recorderFor("lively.lang/function.js");nd.Empty=vb;nd.K=Bb;nd.Null=Ib;nd.False=wc;nd.True=yc;nd.notYetImplemented=gd;nd.all=$d;nd.own=te;nd.argumentNames=Ed;nd.qualifiedMethodName=Je;nd.extractBody=He;nd.timeToRun=ye;nd.timeToRunN=oe;nd.delay=
of;nd.throttle=Cf;nd.debounce=rh;nd.throttleNamed=Bh;nd.debounceNamed=$g;nd.createQueue=Hf;nd.workerWithCallbackQueue=ei;nd._composeAsyncDefaultEndCallback=function(g,c){g&&console.error("lively.lang.composeAsync error",g)};nd.composeAsync=Gh;nd.compose=ni;nd.flip=wg;nd.withNull=Lg;nd.waitFor=Pe;nd.waitForAll=Vi;nd.curry=Ob;nd.wrap=Nc;nd.getOriginal=fe;nd.wrapperChain=ge;nd.replaceMethodForOneCall=Mf;nd.once=jg;nd.either=fi;nd.eitherNamed=Ch;nd.evalJS=zk;nd.fromString=Wm;nd.asScript=Xm;nd.asScriptOf=
Fm;nd.addToObject=Vk;nd.binds=Gm;nd.setLocalVarValue=Wk;nd.getVarMapping=dm;nd.setProperty=Il;nd.functionNames=bj;nd.localFunctionNames=Jl;nd.logErrors=Xf;nd.logCompletion=sj;nd.logCalls=Ak;nd.traceCalls=em;nd.webkitStack=Zm;nd.objectMerge=y;nd.safeToString=La;nd.Closure=Cj;nd.arr=Gf;nd._throttledByName={};nd._debouncedByName={};nd._queues={};nd._queueUntilCallbacks={};nd._eitherNameRegistry={};nd.Empty=vb;nd.Empty=vb;nd.K=Bb;nd.K=Bb;nd.Null=Ib;nd.Null=Ib;nd.False=wc;nd.False=wc;nd.True=yc;nd.True=
yc;nd.notYetImplemented=gd;nd.notYetImplemented=gd;nd.withNull=Lg;nd.withNull=Lg;nd.all=$d;nd.all=$d;nd.own=te;nd.own=te;nd.argumentNames=Ed;nd.argumentNames=Ed;nd.qualifiedMethodName=Je;nd.qualifiedMethodName=Je;nd.extractBody=He;nd.extractBody=He;nd.timeToRun=ye;nd.timeToRun=ye;nd.timeToRunN=oe;nd.timeToRunN=oe;nd.delay=of;nd.delay=of;nd.throttle=Cf;nd.throttle=Cf;nd.debounce=rh;nd.debounce=rh;nd.throttleNamed=Bh;nd.throttleNamed=Bh;nd.debounceNamed=$g;nd.debounceNamed=$g;nd.createQueue=Hf;nd.createQueue=
Hf;nd.workerWithCallbackQueue=ei;nd.workerWithCallbackQueue=ei;nd.composeAsync=Gh;nd.composeAsync=Gh;nd.compose=ni;nd.compose=ni;nd.waitFor=Pe;nd.waitFor=Pe;nd.waitForAll=Vi;nd.waitForAll=Vi;nd.flip=wg;nd.flip=wg;nd.curry=Ob;nd.curry=Ob;nd.wrap=Nc;nd.wrap=Nc;nd.binds=Gm;nd.binds=Gm;nd.getOriginal=fe;nd.getOriginal=fe;nd.wrapperChain=ge;nd.wrapperChain=ge;nd.replaceMethodForOneCall=Mf;nd.replaceMethodForOneCall=Mf;nd.once=jg;nd.once=jg;nd.either=fi;nd.either=fi;nd.eitherNamed=Ch;nd.eitherNamed=Ch;
nd.evalJS=zk;nd.evalJS=zk;nd.fromString=Wm;nd.fromString=Wm;nd.asScript=Xm;nd.asScript=Xm;nd.asScriptOf=Fm;nd.asScriptOf=Fm;nd.addToObject=Vk;nd.addToObject=Vk;nd.setLocalVarValue=Wk;nd.setLocalVarValue=Wk;nd.getVarMapping=dm;nd.getVarMapping=dm;nd.setProperty=Il;nd.setProperty=Il;nd.functionNames=bj;nd.functionNames=bj;nd.localFunctionNames=Jl;nd.localFunctionNames=Jl;nd.logErrors=Xf;nd.logErrors=Xf;nd.logCompletion=sj;nd.logCompletion=sj;nd.logCalls=Ak;nd.logCalls=Ak;nd.traceCalls=em;nd.traceCalls=
em;nd.webkitStack=Zm;nd.webkitStack=Zm;var Vl=Object.freeze({__proto__:null,Empty:vb,K:Bb,Null:Ib,False:wc,True:yc,notYetImplemented:gd,withNull:Lg,all:$d,own:te,argumentNames:Ed,qualifiedMethodName:Je,extractBody:He,timeToRun:ye,timeToRunN:oe,delay:of,throttle:Cf,debounce:rh,throttleNamed:Bh,debounceNamed:$g,createQueue:Hf,workerWithCallbackQueue:ei,composeAsync:Gh,compose:ni,waitFor:Pe,waitForAll:Vi,flip:wg,curry:Ob,wrap:Nc,binds:Gm,getOriginal:fe,wrapperChain:ge,replaceMethodForOneCall:Mf,once:jg,
either:fi,eitherNamed:Ch,evalJS:zk,fromString:Wm,asScript:Xm,asScriptOf:Fm,addToObject:Vk,setLocalVarValue:Wk,getVarMapping:dm,setProperty:Il,functionNames:bj,localFunctionNames:Jl,logErrors:Xf,logCompletion:sj,logCalls:Ak,traceCalls:em,webkitStack:Zm});Ma("f",Vl);var le=lively.FreezerRuntime.recorderFor("lively.lang/object.js");le.print=fm;le.indent=function(g,c,h){if(!h||0>=h)return g;for(;0<h;)h--,g=c+g;return g};le.isArray=ql;le.isElement=Qp;le.isFunction=zg;le.isBoolean=Hm;le.isString=po;le.isNumber=
Kk;le.isUndefined=Ym;le.isRegExp=rn;le.isObject=tn;le.isPrimitive=sn;le.isEmpty=Xo;le.equals=Sn;le.values=$m;le.select=qo;le.dissoc=ic;le.addScript=Ui;le.extend=pa;le.clone=w;le.extract=C;le.inspect=F;le.merge=y;le.deepMerge=H;le.sortKeysWithBeforeAndAfterConstraints=L;le.inherit=Q;le.valuesInPropertyHierarchy=ba;le.mergePropertyInHierarchy=qa;le.deepCopy=S;le.typeStringOf=Y;le.shortPrintStringOf=na;le.isMutableType=ma;le.safeToString=La;le.asObject=Xa;le.newKeyIn=eb;le.functionFromString=Wm;le.asScriptOf=
Fm;le.argumentNames=Ed;le.arrayDeepEquals=Fa;le.isSubset=xa;le.flatten=Lb;le.getOwnPropertyDescriptors="function"===typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:function(g){var c={},h;for(h in g)Object.prototype.hasOwnProperty.call(g,h)&&Object.defineProperty(c,h,{configurable:!0,enumerable:!0,writable:!0,value:Object.getOwnPropertyDescriptor(g,h)});return c};le.keys=Object.keys;var VU=le.keys,WU=le.getOwnPropertyDescriptors;le.isArray=ql;le.isArray=ql;le.isElement=Qp;
le.isElement=Qp;le.isFunction=zg;le.isFunction=zg;le.isBoolean=Hm;le.isBoolean=Hm;le.isString=po;le.isString=po;le.isNumber=Kk;le.isNumber=Kk;le.isUndefined=Ym;le.isUndefined=Ym;le.isRegExp=rn;le.isRegExp=rn;le.isObject=tn;le.isObject=tn;le.isPrimitive=sn;le.isPrimitive=sn;le.isEmpty=Xo;le.isEmpty=Xo;le.equals=Sn;le.equals=Sn;le.keys=VU;le.keys=VU;le.values=$m;le.values=$m;le.select=qo;le.select=qo;le.dissoc=ic;le.dissoc=ic;le.addScript=Ui;le.addScript=Ui;le.extend=pa;le.extend=pa;le.clone=w;le.clone=
w;le.extract=C;le.extract=C;le.inspect=F;le.inspect=F;le.merge=y;le.merge=y;le.deepMerge=H;le.deepMerge=H;le.inherit=Q;le.inherit=Q;le.valuesInPropertyHierarchy=ba;le.valuesInPropertyHierarchy=ba;le.mergePropertyInHierarchy=qa;le.mergePropertyInHierarchy=qa;le.sortKeysWithBeforeAndAfterConstraints=L;le.sortKeysWithBeforeAndAfterConstraints=L;le.deepCopy=S;le.deepCopy=S;le.typeStringOf=Y;le.typeStringOf=Y;le.shortPrintStringOf=na;le.shortPrintStringOf=na;le.isMutableType=ma;le.isMutableType=ma;le.safeToString=
La;le.safeToString=La;le.asObject=Xa;le.asObject=Xa;le.newKeyIn=eb;le.newKeyIn=eb;le.getOwnPropertyDescriptors=WU;le.getOwnPropertyDescriptors=WU;var eg=Object.freeze({__proto__:null,isArray:ql,isElement:Qp,isFunction:zg,isBoolean:Hm,isString:po,isNumber:Kk,isUndefined:Ym,isRegExp:rn,isObject:tn,isPrimitive:sn,isEmpty:Xo,equals:Sn,keys:VU,values:$m,select:qo,dissoc:ic,addScript:Ui,extend:pa,clone:w,extract:C,inspect:F,merge:y,deepMerge:H,inherit:Q,valuesInPropertyHierarchy:ba,mergePropertyInHierarchy:qa,
sortKeysWithBeforeAndAfterConstraints:L,deepCopy:S,typeStringOf:Y,shortPrintStringOf:na,isMutableType:ma,safeToString:La,asObject:Xa,newKeyIn:eb,getOwnPropertyDescriptors:WU});Ma("_",eg);var XU={};(function(){var g=[].slice;var c={0:{8:{_:"an"},9:{_:"an"},"-":{1:{1:{_:"an"}},4:{" ":{_:"a"},_:"an"},6:{"-":{_:"an"}},8:{_:"an"}}},1:{1:{0:{_:"a"},1:{_:"a"},2:{_:"a"},3:{_:"a"},4:{_:"a"},5:{_:"a"},6:{_:"a"},7:{_:"a"},8:{_:"a"},9:{_:"a"},_:"an",".":{4:{_:"a"}}},8:{0:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},
4:{_:"an"},5:{_:"an"},6:{_:"an"},7:{_:"an"},8:{_:"an"},9:{_:"an"},_:"a"},1:{"-":{_:"a"}," ":{_:"a"}},2:{"-":{_:"a"}," ":{_:"a"}},3:{"-":{_:"a"}," ":{_:"a"}},4:{"-":{_:"a"}," ":{_:"a"}},5:{"-":{_:"a"}," ":{_:"a"}},6:{"-":{_:"a"}," ":{_:"a"}},7:{"-":{_:"a"}," ":{_:"a"}},8:{"-":{_:"a"}," ":{_:"a"}},9:{"-":{_:"a"}," ":{_:"a"}},_:"an"}},8:{0:{0:{x:{_:"a"}}},9:{0:{_:"a"}},_:"an",",":{1:{_:"a"}}},"`":{a:{_:"an"}},"\u00a3":{8:{_:"an"}},"\u221e":{_:"an"},a:{" ":{_:"a"},b:{o:{u:{t:{"-":{_:"an"}},_:"a"}}},g:{a:{i:{_:"a"}}},
l:{"-":{I:{_:"a"}},g:{u:{_:"a"}},t:{h:{_:"a"}}},m:{o:{n:{_:"a"}}},n:{" ":{_:"a"},d:{a:{_:"an"},e:{_:"an"},r:{_:"an"},_:"a"},o:{t:{_:"a"}},y:{w:{_:"a"}}},p:{r:{e:{_:"a"}}},r:{e:{" ":{_:"a"},":":{_:"a"}},t:{"\u00ed":{_:"a"}}},_:"an"},A:{$:{_:"a"},A:{A:{_:"a"}},n:{d:{a:{l:{u:{c:{_:"a"}}}}}},r:{m:{a:{t:{_:"a"}}}},s:{t:{u:{r:{i:{a:{s:{_:"a"}}}}}}},t:{h:{l:{e:{t:{i:{_:"an"}}},o:{_:"an"},_:"a"}}},U:{$:{_:"a"},D:{_:"a"},S:{C:{_:"a"}}},_:"an"},"\u00c1":{_:"an"},"\u00e1":{";":{_:"an"}},"\u00e0":{_:"an"},"\u00c4":{_:"an"},
"\u0101":{_:"an"},"\u00c5":{_:"an"},"\u00e6":{_:"an"},"\u00c6":{n:{_:"a"},_:"an"},D:{"\u00fa":{n:{_:"a"}}},e:{".":{g:{_:"a"}},a:{c:{h:{" ":{_:"a"}}}},i:{t:{h:{e:{r:{" ":{_:"a"},".":{_:"a"}}}}}},l:{"-":{_:"a"},l:{a:{_:"a"}}},m:{p:{e:{z:{_:"a"}}}},n:{o:{u:{g:{_:"a"}}}},u:{p:{" ":{_:"an"}},_:"a"},w:{_:"a"},x:{i:{s:{t:{s:{_:"a"}}}}},_:"an"},E:{m:{p:{e:{z:{_:"a"}}}},n:{a:{m:{_:"a"}}},s:{p:{a:{d:{_:"an"}},e:{_:"an"},o:{_:"an"},_:"a"}},u:{l:{_:"an"},_:"a"},U:{R:{_:"a"}},_:"an"},"\u00e9":{g:{_:"a"},t:{a:{_:"an"},
u:{_:"an"},_:"a"},_:"an"},"\u00c9":{_:"an"},f:{"-":{_:"an"}," ":{_:"an"},"/":{_:"an"},M:{_:"an"},p:{_:"an"},t:{_:"an"}},F:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"#":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},"\u201d":{_:"an"},A:{C:{_:"a"},D:{_:"a"},I:{R:{_:"a"}},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},Q:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},c:{_:"an"},D:{_:"an"},
E:{C:{_:"an"},I:{_:"an"}},F:{" ":{_:"a"},_:"an"},f:{_:"an"},h:{_:"an"},H:{_:"an"},I:{A:{T:{_:"a"},_:"an"},D:{" ":{_:"an"}},R:{" ":{_:"an"}},S:{" ":{_:"an"}}},K:{_:"an"},L:{C:{_:"an"},N:{_:"an"},P:{_:"an"}},M:{R:{_:"a"},_:"an"},O:{" ":{_:"an"},I:{" ":{_:"an"}}},P:{".":{_:"a"},"?":{_:"a"},C:{"?":{_:"a"}},_:"an"},R:{C:{_:"an"},S:{_:"an"}},S:{_:"an"},T:{S:{_:"a"},T:{_:"a"},_:"an"},U:{" ":{_:"an"},",":{_:"an"},".":{_:"an"}},V:{_:"an"},W:{D:{_:"a"},_:"an"},X:{_:"an"},Y:{_:"an"},"\u03c3":{_:"an"}},G:{h:{a:{e:{_:"an"},
i:{_:"an"}}}},h:{"'":{_:"an"},"-":{U:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},C:{_:"an"},e:{i:{r:{a:{_:"a"},_:"an"}}},i:{m:{s:{_:"an"}},s:{t:{o:{r:{i:{c:{_:"a"}}}}}}},o:{m:{a:{_:"an"},m:{_:"an"}},n:{e:{y:{_:"a"}},k:{_:"a"},v:{_:"a"},_:"an"},r:{s:{" ":{_:"an"}}},u:{r:{_:"an"}}},t:{t:{p:{" ":{_:"an"}},_:"a"},_:"an"}},H:{1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{_:"a"},_:"an"},"+":{_:"an"},
a:{b:{i:{l:{i:{t:{a:{t:{i:{o:{n:{s:{_:"an"}}}}}}}}}}}},B:{_:"an"},C:{_:"an"},D:{B:{_:"a"},_:"an"},e:{i:{r:{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{D:{_:"a"},G:{_:"a"},M:{_:"a"},P:{_:"a"},_:"an"},L:{A:{"-":{D:{_:"a"}}},_:"an"},M:{_:"an"},N:{_:"an"},o:{n:{d:{_:"a"},e:{s:{_:"an"},_:"a"},g:{_:"a"},k:{_:"a"},o:{l:{_:"a"}},_:"an"},u:{r:{_:"an"}}},O:{" ":{_:"an"},V:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{T:{_:"a"},_:"an"},S:{" ":{_:"a"},R:{_:"a"},T:{_:"a"},_:"an"},T:{P:{_:"a"},_:"an"},V:{_:"an"},W:{T:{_:"an"}}},
i:{".":{e:{_:"a"}},b:{n:{_:"a"}},f:{" ":{_:"a"}},i:{_:"a"},n:{c:{l:{u:{d:{i:{_:"a"}}}}},d:{i:{c:{a:{t:{e:{s:{_:"a"}}}}}}},s:{t:{e:{a:{d:{"?":{_:"an"}},_:"a"}}}}},s:{" ":{_:"a"},".":{_:"a"}},t:{" ":{_:"a"}},u:{_:"a"},_:"an"},I:{"-":{A:{_:"a"},I:{_:"a"}},I:{I:{_:"a"}},l:{b:{_:"a"}},M:{H:{_:"a"}},m:{a:{m:{s:{_:"a"}}}},R:{"\u00a3":{_:"a"}},s:{l:{a:{m:{" ":{_:"a"},",":{_:"a"},".":{_:"a"}},n:{d:{s:{_:"a"}}}}}},_:"an"},"\u0130":{_:"an"},J:{i:{a:{n:{_:"a"},_:"an"}}},k:{u:{" ":{_:"an"}}},l:{" ":{_:"an"},'"':{_:"an"},
p:{_:"an"}},L:{1:{_:"an"},2:{_:"an"},3:{_:"an"},5:{_:"an"},"'":{A:{_:"a"},_:"an"},"-":{a:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},a:{e:{_:"an"},o:{i:{g:{_:"an"}}}},A:{" ":{_:"an"},L:{_:"an"},P:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"a"},E:{_:"a"},G:{_:"a"},O:{_:"a"},P:{_:"a"},T:{_:"a"},_:"an"},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{R:{_:"an"}},L:{_:"an"},M:{X:{_:"a"},_:"an"},N:{_:"an"},o:{c:{h:{a:{_:"an"}}}},O:{E:{_:"an"}},P:{_:"an"},R:{_:"an"},
S:{_:"an"},T:{_:"an"},U:{" ":{_:"an"}},V:{_:"an"},X:{_:"an"},Z:{_:"an"}},m:{"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},a:{k:{e:{s:{" ":{_:"an"}}}}},b:{_:"an"},e:{i:{n:{_:"an"}},n:{t:{i:{o:{n:{s:{_:"an"}}}}}}},f:{_:"an"},p:{_:"an"},R:{_:"an"},t:{_:"an"}},M:{1:{9:{0:{_:"an"},_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},7:{_:"an"},8:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{t:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{".":{S:{_:"a"}}},_:"an"},
"/":{_:"an"},A:{C:{_:"a"},D:{_:"a"},F:{_:"a"},G:{_:"a"},J:{_:"a"},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},X:{_:"a"},Y:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},D:{_:"an"},e:{"-":{_:"an"}},E:{d:{_:"an"},n:{_:"an"},P:{_:"an"}},F:{_:"an"},f:{_:"an"},G:{_:"an"},H:{_:"an"},h:{_:"an"},i:{e:{_:"an"}},I:{5:{_:"an"},6:{_:"an"}," ":{_:"an"},A:{_:"an"},T:{_:"an"}},K:{_:"an"},L:{_:"an"},M:{T:{_:"a"},_:"an"},N:{_:"an"},o:{U:{_:"an"}},O:{" ":{_:"an"},T:{" ":{_:"an"}},U:{_:"an"}},P:{_:"an"},
R:{_:"an"},S:{_:"an"},s:{c:{_:"an"}},T:{R:{_:"a"},_:"an"},U:{V:{_:"an"}},V:{_:"an"},X:{_:"an"}},N:{4:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{a:{_:"a"},S:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},".":{Y:{_:"a"},_:"an"},"=":{_:"an"},"\u00b2":{_:"an"},a:{o:{_:"an"}},A:{" ":{_:"an"},A:{F:{_:"a"},_:"an"},I:{_:"an"},S:{L:{_:"an"}}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"an"},H:{_:"an"},S:{" ":{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{C:{_:"a"},L:{_:"a"},M:{H:{_:"an"},_:"a"},N:{_:"a"},
S:{_:"a"},_:"an"},J:{C:{_:"an"}},K:{_:"an"},L:{S:{_:"a"},_:"an"},M:{_:"an"},N:{R:{_:"an"},T:{_:"an"}},P:{O:{V:{"-":{_:"an"}},_:"a"},_:"an"},R:{J:{_:"a"},T:{_:"a"},_:"an"},S:{W:{_:"a"},_:"an"},T:{$:{_:"a"},_:"an"},U:{S:{_:"an"}},V:{_:"an"},v:{_:"an"},W:{A:{_:"an"}},X:{_:"an"},Y:{P:{_:"an"},U:{_:"an"}}},n:{"-":{_:"an"},"\u2212":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},"+":{_:"an"},"\u00d7":{_:"an"},d:{a:{_:"an"}},p:{a:{_:"an"}},t:{_:"an"},V:{_:"an"},W:{_:"an"}},o:{b:{r:{_:"a"}},
c:{c:{u:{r:{s:{_:"a"}}}},h:{o:{_:"a"}}},f:{" ":{_:"a"}},n:{"-":{_:"an"},"/":{_:"an"},b:{_:"an"},c:{o:{_:"an"}},d:{_:"an"},e:{r:{_:"an"}},g:{_:"an"},i:{_:"an"},l:{_:"an"},m:{_:"an"},o:{_:"an"},r:{_:"an"},s:{_:"an"},t:{_:"an"},u:{_:"an"},w:{_:"an"},y:{_:"an"},_:"a"},r:{" ":{_:"a"},",":{_:"a"}},u:{i:{_:"a"}},_:"an"},O:{b:{e:{r:{s:{t:{" ":{_:"an"},l:{_:"an"}},_:"a"}}}},l:{v:{_:"a"}},n:{e:{i:{_:"an"},_:"a"}},N:{E:{_:"a"}},o:{p:{_:"a"}},u:{i:{_:"a"}},_:"an"},"\u00d3":{_:"an"},"\u00d6":{_:"an"},"\u00f6":{_:"an"},
"\u014c":{_:"an"},"\u014d":{_:"an"},P:{h:{o:{b:{_:"an"},i:{_:"an"}}}},r:{"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},".":{_:"an"},e:{f:{e:{r:{s:{_:"an"}}}}},f:{_:"an"},m:{_:"an"},s:{_:"an"}},R:{1:{0:{_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{C:{_:"a"},_:"an"},"/":{_:"an"},A:{" ":{_:"an"},F:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{" ":{_:"an"},R:{_:"an"}},F:{_:"an"},
f:{_:"an"},G:{_:"an"},H:{S:{_:"an"}},I:{A:{_:"an"},C:{" ":{_:"an"}}},J:{_:"an"},K:{_:"an"},L:{" ":{_:"a"},_:"an"},M:{1:{_:"a"},_:"an"},N:{G:{_:"a"},_:"an"},O:{T:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{_:"an"},S:{" ":{_:"a"},")":{_:"a"},",":{_:"a"},".":{_:"a"},"?":{_:"a"},T:{_:"a"},_:"an"},T:{_:"an"},U:{_:"an"},V:{_:"an"},X:{_:"an"}},s:{"-":{_:"an"},'"':{_:"an"},")":{_:"an"},",":{_:"an"},".":{_:"an"},a:{y:{s:{_:"an"}}},i:{c:{h:{_:"an"}}},p:{3:{_:"an"},r:{o:{t:{_:"an"}}}},s:{h:{_:"an"}},t:{a:{t:{e:{s:{" ":{_:"an"},
":":{_:"an"}}}}}},v:{a:{_:"a"},e:{_:"a"},_:"an"}},S:{1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{W:{_:"a"},_:"an"},",":{_:"an"},".":{B:{_:"an"},M:{_:"an"},O:{_:"an"}},"\u201d":{_:"an"},A:{"-":{1:{_:"a"},_:"an"}," ":{_:"an"},C:{D:{_:"an"}},E:{_:"an"},S:{E:{_:"a"},_:"an"},T:{" ":{_:"an"},B:{_:"an"}}},B:{_:"an"},C:{A:{" ":{_:"an"}},C:{_:"an"},M:{_:"an"},O:{" ":{_:"an"}},R:{A:{_:"a"},_:"an"},T:{_:"an"}},D:{_:"an"},E:{" ":{_:"an"},
C:{O:{_:"a"},R:{_:"a"},_:"an"},I:{_:"an"},O:{_:"an"}},F:{_:"an"},G:{_:"an"},H:{2:{_:"an"},3:{_:"an"},"-":{_:"an"}},I:{" ":{_:"an"}},J:{_:"an"},K:{_:"an"},L:{A:{_:"a"},I:{_:"a"},O:{_:"a"},_:"an"},M:{A:{_:"a"},E:{" ":{_:"an"},_:"a"},I:{_:"a"},_:"an"},N:{A:{_:"a"},E:{_:"a"},O:{_:"a"},_:"an"},O:{"(":{_:"an"},A:{" ":{_:"an"},I:{_:"an"}},E:{_:"an"},I:{_:"an"},S:{_:"an"},V:{_:"an"}},P:{A:{C:{_:"a"},D:{_:"a"},M:{_:"a"},N:{_:"a"},R:{_:"a"}},E:{" ":{_:"an"},_:"a"},I:{C:{_:"a"}},O:{_:"a"},U:{_:"a"},_:"an"},
R:{_:"an"},S:{_:"an"},T:{"-":{_:"an"},A:{" ":{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},F:{_:"an"},L:{_:"an"},M:{_:"an"},S:{_:"an"},V:{_:"an"}},u:{r:{a:{" ":{_:"an"}}}},U:{B:{_:"a"},L:{_:"a"},N:{_:"a"},P:{_:"a"},S:{_:"a"},_:"an"},V:{_:"an"},W:{F:{_:"an"},P:{_:"an"},R:{_:"an"}},X:{S:{_:"a"},_:"an"}},t:{"-":{S:{_:"an"}},S:{_:"an"}},T:{a:{v:{e:{s:{_:"an"}}}},"\u00e0":{_:"an"}},u:{"-":{_:"a"}," ":{_:"a"},'"':{_:"a"},".":{_:"a"},b:{e:{_:"an"},_:"a"},f:{_:"a"},k:{a:{_:"an"},_:"a"},l:{u:{_:"a"}},m:{" ":{_:"a"}},
n:{" ":{_:"a"},a:{" ":{_:"a"},n:{a:{_:"an"},n:{_:"an"},s:{_:"an"},t:{_:"an"},_:"a"},r:{y:{_:"a"}}},e:{" ":{_:"a"}},i:{c:{o:{r:{p:{_:"an"}}}},d:{i:{_:"a"},_:"an"},m:{o:{_:"a"},_:"an"},n:{_:"an"},v:{o:{_:"an"}},_:"a"},l:{e:{s:{_:"a"}}}},p:{o:{_:"a"}},r:{a:{_:"a"},e:{_:"a"},i:{_:"a"},l:{_:"a"},o:{_:"a"}},s:{"-":{_:"an"}," ":{_:"an"},h:{_:"an"},_:"a"},t:{m:{_:"an"},t:{_:"an"},_:"a"},v:{_:"a"},w:{_:"a"},_:"an"},U:{1:{_:"an"},"-":{B:{o:{_:"a"},_:"an"}},a:{_:"an"},b:{i:{_:"a"},_:"an"},D:{P:{"-":{_:"an"}}},
d:{_:"an"},g:{l:{_:"an"}},h:{_:"an"},i:{_:"an"},l:{i:{_:"a"},_:"an"},m:{_:"an"},M:{N:{_:"an"}},n:{"-":{_:"an"},a:{n:{_:"a"},_:"an"},b:{_:"an"},c:{_:"an"},d:{_:"an"},e:{s:{_:"a"},_:"an"},f:{_:"an"},g:{_:"an"},h:{_:"an"},i:{d:{_:"an"},n:{_:"an"}},k:{_:"an"},l:{_:"an"},m:{_:"an"},n:{_:"an"},o:{_:"an"},p:{_:"an"},r:{_:"an"},s:{_:"an"},t:{e:{r:{s:{_:"a"}}},_:"an"},u:{_:"an"},w:{_:"an"}},p:{_:"an"},r:{a:{_:"a"},i:{_:"a"},u:{g:{u:{a:{y:{a:{n:{"-":{_:"an"}}}}}}},k:{_:"an"},_:"a"},_:"an"},s:{h:{_:"an"},t:{_:"an"}},
t:{n:{_:"an"},o:{"-":{_:"an"}},r:{_:"an"},t:{_:"an"}},x:{_:"an"},z:{_:"an"}},"\u00fc":{_:"an"},"\u00dc":{_:"an"},V:{I:{I:{_:"an"}}},x:{a:{_:"a"},e:{_:"a"},i:{_:"a"},o:{_:"a"},x:{_:"a"},y:{_:"a"},_:"an"},X:{a:{_:"a"},A:{_:"a"},e:{_:"a"},h:{_:"a"},i:{_:"a"},I:{V:{_:"a"},X:{_:"a"}},o:{_:"a"},u:{_:"a"},U:{_:"a"},V:{_:"a"},X:{" ":{_:"an"},_:"a"},y:{_:"a"},_:"an"},Y:{p:{_:"an"}},"\u03b1":{_:"an"},"\u03b5":{_:"an"},"\u03c9":{_:"an"}};var h=function(f,m,n){null==m&&(m=c);null==n&&(n="a");if(null==f)return n;
var a=f.slice(0,1);m=m[a];return null!=a&&null!=m?h(f.slice(1),m,m._||n):n};XU={find:h,articlize:function(){var f=1<=arguments.length?g.call(arguments,0):[];var m;var n=[];var a=0;for(m=f.length;a<m;a++){var d=f[a];null!=d&&n.push(h(d)+" "+d)}return 1===f.length?n[0]:n}}}).call(XU);var gna=XU,Ic=lively.FreezerRuntime.recorderFor("lively.lang/string.js");Ic.format=db;Ic.formatFromArray=Rb;Ic.indent=Cc;Ic.minIndent=Xc;Ic.changeIndent=Oc;Ic.quote=dd;Ic.articlize=Md;Ic.findArticle=ee;Ic.print=Wb;Ic.printNested=
Ge;Ic.pad=Kf;Ic.printTable=fd;Ic.printTree=cg;Ic.toArray=lh;Ic.lines=Tf;Ic.paragraphs=xf;Ic.nonEmptyLines=Ce;Ic.tokens=Hg;Ic.tableize=Qg;Ic.unescapeCharacterEntities=kg;Ic.toQueryParams=gm;Ic.base64EncodeUnicode=Im;Ic.base64DecodeUnicode=Nj;Ic.normalizePath=Be;Ic.joinPath=ah;Ic.newUUID=tj;Ic.createDataURI=Yj;Ic.hashCode=Yo;Ic.md5=Tn;Ic.reMatches=If;Ic.stringMatch=hk;Ic.peekRight=dg;Ic.peekLeft=vh;Ic.lineIndexComputer=cj;Ic.lineNumberToIndexesComputer=Jm;Ic.lineRanges=vv;Ic.findLineWithIndexInLineRanges=
wv;Ic.regexIndexOf=hs;Ic.regexLastIndexOf=Rp;Ic.diff=Sp;Ic.empty=ro;Ic.startsWithVowel=Un;Ic.withDecimalPrecision=is;Ic.capitalize=xv;Ic.camelCaseString=yv;Ic.camelize=zv;Ic.truncate=yy;Ic.truncateLeft=Av;Ic.regExpEscape=Tp;Ic.succ=zy;Ic.digitValue=Ay;Ic.longestCommonSubstring=By;Ic.applyChange=Cy;Ic.applyChanges=Dy;Ic.levenshtein=Ey;Ic.inspectObject=F;Ic.min=Zd;Ic.last=md;Ic.articles=gna;Ic.features={repeat:!!String.prototype.repeat,includes:!!String.prototype.includes,startsWith:!!String.prototype.startsWith,
endsWith:!!String.prototype.endsWith};Ic.pathDotRe=/\/\.\//g;Ic.pathDoubleDotRe=/\/[^\/]+\/\.\./;Ic.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Ic.urlStartRe=/^[a-z0-9-_\.]+:\/\//;Ic.newUUIDTemplate="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";Ic.newUUIDRe=/[xy]/g;Ic.newUUIDReplacer=function(g){var c=16*Math.random()|0;return("x"==g?c:c&3|8).toString(16)};Ic.includes=Ic.features.includes?function(g,c){return g.includes(c)}:function(g,c){return-1<g.indexOf(c)};Ic.include=Ic.includes;Ic.startsWith=Ic.features.startsWith?
function(g,c){return g.startsWith(c)}:function(g,c){return 0===g.indexOf(c)};Ic.endsWith=Ic.features.endsWith?function(g,c){return g.endsWith(c)}:function(g,c){var h=g.length-c.length;return 0<=h&&g.lastIndexOf(c)===h};Ic.times=Ic.features.repeat?function(g,c){return g.repeat(c)}:function(g,c){return 1>c?"":Array(c+1).join(g)};var YU=Ic.includes,ZU=Ic.include,$U=Ic.startsWith,aV=Ic.endsWith,bV=Ic.times;Ic.format=db;Ic.format=db;Ic.formatFromArray=Rb;Ic.formatFromArray=Rb;Ic.indent=Cc;Ic.indent=Cc;
Ic.minIndent=Xc;Ic.minIndent=Xc;Ic.changeIndent=Oc;Ic.changeIndent=Oc;Ic.quote=dd;Ic.quote=dd;Ic.articlize=Md;Ic.articlize=Md;Ic.findArticle=ee;Ic.findArticle=ee;Ic.print=Wb;Ic.print=Wb;Ic.printNested=Ge;Ic.printNested=Ge;Ic.pad=Kf;Ic.pad=Kf;Ic.printTable=fd;Ic.printTable=fd;Ic.printTree=cg;Ic.printTree=cg;Ic.toArray=lh;Ic.toArray=lh;Ic.lines=Tf;Ic.lines=Tf;Ic.paragraphs=xf;Ic.paragraphs=xf;Ic.nonEmptyLines=Ce;Ic.nonEmptyLines=Ce;Ic.tokens=Hg;Ic.tokens=Hg;Ic.tableize=Qg;Ic.tableize=Qg;Ic.unescapeCharacterEntities=
kg;Ic.unescapeCharacterEntities=kg;Ic.base64EncodeUnicode=Im;Ic.base64EncodeUnicode=Im;Ic.base64DecodeUnicode=Nj;Ic.base64DecodeUnicode=Nj;Ic.toQueryParams=gm;Ic.toQueryParams=gm;Ic.normalizePath=Be;Ic.normalizePath=Be;Ic.joinPath=ah;Ic.joinPath=ah;Ic.newUUID=tj;Ic.newUUID=tj;Ic.createDataURI=Yj;Ic.createDataURI=Yj;Ic.hashCode=Yo;Ic.hashCode=Yo;Ic.md5=Tn;Ic.md5=Tn;Ic.reMatches=If;Ic.reMatches=If;Ic.stringMatch=hk;Ic.stringMatch=hk;Ic.peekRight=dg;Ic.peekRight=dg;Ic.peekLeft=vh;Ic.peekLeft=vh;Ic.lineIndexComputer=
cj;Ic.lineIndexComputer=cj;Ic.lineNumberToIndexesComputer=Jm;Ic.lineNumberToIndexesComputer=Jm;Ic.findLineWithIndexInLineRanges=wv;Ic.findLineWithIndexInLineRanges=wv;Ic.regexIndexOf=hs;Ic.regexIndexOf=hs;Ic.regexLastIndexOf=Rp;Ic.regexLastIndexOf=Rp;Ic.lineRanges=vv;Ic.lineRanges=vv;Ic.diff=Sp;Ic.diff=Sp;Ic.empty=ro;Ic.empty=ro;Ic.includes=YU;Ic.includes=YU;Ic.include=ZU;Ic.include=ZU;Ic.startsWith=$U;Ic.startsWith=$U;Ic.startsWithVowel=Un;Ic.startsWithVowel=Un;Ic.endsWith=aV;Ic.endsWith=aV;Ic.withDecimalPrecision=
is;Ic.withDecimalPrecision=is;Ic.capitalize=xv;Ic.capitalize=xv;Ic.camelCaseString=yv;Ic.camelCaseString=yv;Ic.camelize=zv;Ic.camelize=zv;Ic.truncate=yy;Ic.truncate=yy;Ic.truncateLeft=Av;Ic.truncateLeft=Av;Ic.regExpEscape=Tp;Ic.regExpEscape=Tp;Ic.succ=zy;Ic.succ=zy;Ic.digitValue=Ay;Ic.digitValue=Ay;Ic.times=bV;Ic.times=bV;Ic.longestCommonSubstring=By;Ic.longestCommonSubstring=By;Ic.applyChange=Cy;Ic.applyChange=Cy;Ic.applyChanges=Dy;Ic.applyChanges=Dy;Ic.levenshtein=Ey;Ic.levenshtein=Ey;var Dh=Object.freeze({__proto__:null,
format:db,formatFromArray:Rb,indent:Cc,minIndent:Xc,changeIndent:Oc,quote:dd,articlize:Md,findArticle:ee,print:Wb,printNested:Ge,pad:Kf,printTable:fd,printTree:cg,toArray:lh,lines:Tf,paragraphs:xf,nonEmptyLines:Ce,tokens:Hg,tableize:Qg,unescapeCharacterEntities:kg,base64EncodeUnicode:Im,base64DecodeUnicode:Nj,toQueryParams:gm,normalizePath:Be,joinPath:ah,newUUID:tj,createDataURI:Yj,hashCode:Yo,md5:Tn,reMatches:If,stringMatch:hk,peekRight:dg,peekLeft:vh,lineIndexComputer:cj,lineNumberToIndexesComputer:Jm,
findLineWithIndexInLineRanges:wv,regexIndexOf:hs,regexLastIndexOf:Rp,lineRanges:vv,diff:Sp,empty:ro,includes:YU,include:ZU,startsWith:$U,startsWithVowel:Un,endsWith:aV,withDecimalPrecision:is,capitalize:xv,camelCaseString:yv,camelize:zv,truncate:yy,truncateLeft:Av,regExpEscape:Tp,succ:zy,digitValue:Ay,times:bV,longestCommonSubstring:By,applyChange:Cy,applyChanges:Dy,levenshtein:Ey});Ma("c",Dh);var rg=lively.FreezerRuntime.recorderFor("lively.lang/number.js");rg.random=Fy;rg.randomSmallerInteger=Gy;
rg.humanReadableByteSize=Hy;rg.average=Iy;rg.averageInc=Jy;rg.median=Ky;rg.between=Ly;rg.clamp=My;rg.sort=Ny;rg.parseLength=Oy;rg.precision=Py;rg.roundTo=Qy;rg.detent=Bv;rg.toDegrees=Cv;rg.toRadians=Dv;rg.backoff=Ry;rg.interpolate=Sy;rg.normalRandom=function(g,c){var h,f=!1;return function(m,n){if(f)return f=!1,h*n+m;do{var a=2*Math.random()-1;var d=2*Math.random()-1;var k=a*a+d*d}while(1<=k||0==k);k=Math.sqrt(-2*Math.log(k)/k);h=d*k;f=!0;return m+n*a*k}}();rg.convertLength=function(){function g(c,
h){if("cm"===h)return c;if("mm"===h)return.1*c;if("in"===h)return 2.54*c;if("px"===h)return c*g(1/96,"in");if("pt"===h)return c*g(1/72,"in");if("pc"===h)return c*g(12,"pt")}return function n(h,f,m){return f===m?h:"cm"===m?g(h,f):"cm"===f?h/g(1,m):n(n(h,f,"cm"),"cm",m)}}();var cV=rg.normalRandom,dV=rg.convertLength;rg.random=Fy;rg.random=Fy;rg.normalRandom=cV;rg.normalRandom=cV;rg.randomSmallerInteger=Gy;rg.randomSmallerInteger=Gy;rg.humanReadableByteSize=Hy;rg.humanReadableByteSize=Hy;rg.average=
Iy;rg.average=Iy;rg.averageInc=Jy;rg.averageInc=Jy;rg.median=Ky;rg.median=Ky;rg.between=Ly;rg.between=Ly;rg.sort=Ny;rg.sort=Ny;rg.parseLength=Oy;rg.parseLength=Oy;rg.convertLength=dV;rg.convertLength=dV;rg.roundTo=Qy;rg.roundTo=Qy;rg.detent=Bv;rg.detent=Bv;rg.toDegrees=Cv;rg.toDegrees=Cv;rg.toRadians=Dv;rg.toRadians=Dv;rg.backoff=Ry;rg.backoff=Ry;rg.interpolate=Sy;rg.interpolate=Sy;rg.clamp=My;rg.clamp=My;rg.precision=Py;rg.precision=Py;var zl=Object.freeze({__proto__:null,random:Fy,normalRandom:cV,
randomSmallerInteger:Gy,humanReadableByteSize:Hy,average:Iy,averageInc:Jy,median:Ky,between:Ly,sort:Ny,parseLength:Oy,convertLength:dV,roundTo:Qy,detent:Bv,toDegrees:Cv,toRadians:Dv,backoff:Ry,interpolate:Sy,clamp:My,precision:Py});Ma("n",zl);var Pj=lively.FreezerRuntime.recorderFor("lively.lang/properties.js");Pj.all=Yq;Pj.allOwnPropertiesOrFunctions=js;Pj.own=Ev;Pj.forEachOwn=zt;Pj.nameFor=Fv;Pj.values=ks;Pj.ownValues=Ty;Pj.any=At;Pj.allProperties=Bt;Pj.hash=ls;Pj.all=Yq;Pj.all=Yq;Pj.allOwnPropertiesOrFunctions=
js;Pj.allOwnPropertiesOrFunctions=js;Pj.own=Ev;Pj.own=Ev;Pj.forEachOwn=zt;Pj.forEachOwn=zt;Pj.nameFor=Fv;Pj.nameFor=Fv;Pj.values=ks;Pj.values=ks;Pj.ownValues=Ty;Pj.ownValues=Ty;Pj.any=At;Pj.any=At;Pj.allProperties=Bt;Pj.allProperties=Bt;Pj.hash=ls;Pj.hash=ls;var go=Object.freeze({__proto__:null,all:Yq,allOwnPropertiesOrFunctions:js,own:Ev,forEachOwn:zt,nameFor:Fv,values:ks,ownValues:Ty,any:At,allProperties:Bt,hash:ls});Ma("ay",go);var Vn=lively.FreezerRuntime.recorderFor("lively.lang/date.js");Vn.format=
Gv;Vn.equals=Hv;Vn.relativeTo=Iv;Vn.dateFormat=function(){var g=function(){var c=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,h=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,f=/[^-+\dA-Z]/g,m=function(n,a){n=String(n);for(a=a||2;n.length<a;)n="0"+n;return n};return function(n,a,d){var k=g;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(n)||/\d/.test(n)||(a=n,n=void 0);
n=n?new Date(n):new Date;if(isNaN(n))throw SyntaxError("invalid date");a=String(k.masks[a]||a||k.masks.default);"UTC:"==a.slice(0,4)&&(a=a.slice(4),d=!0);var b=d?"getUTC":"get",e=n[b+"Date"](),l=n[b+"Day"](),p=n[b+"Month"](),u=n[b+"FullYear"](),x=n[b+"Hours"](),z=n[b+"Minutes"](),E=n[b+"Seconds"]();b=n[b+"Milliseconds"]();var G=d?0:n.getTimezoneOffset(),J={d:e,dd:m(e),ddd:k.i18n.dayNames[l],dddd:k.i18n.dayNames[l+7],m:p+1,mm:m(p+1),mmm:k.i18n.monthNames[p],mmmm:k.i18n.monthNames[p+12],yy:String(u).slice(2),
yyyy:u,h:x%12||12,hh:m(x%12||12),H:x,HH:m(x),M:z,MM:m(z),s:E,ss:m(E),l:m(b,3),L:m(99<b?Math.round(b/10):b),t:12>x?"a":"p",tt:12>x?"am":"pm",T:12>x?"A":"P",TT:12>x?"AM":"PM",Z:d?"UTC":(String(n).match(h)||[""]).pop().replace(f,""),o:(0<G?"-":"+")+m(100*Math.floor(Math.abs(G)/60)+Math.abs(G)%60,4),S:["th","st","nd","rd"][3<e%10?0:(10!=e%100-e%10)*e%10]};return a.replace(c,function(K){return K in J?J[K]:K.slice(1,K.length-1)})}}();g.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",
longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};g.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};
return g}();var eV=Vn.dateFormat;Vn.format=Gv;Vn.format=Gv;Vn.equals=Hv;Vn.equals=Hv;Vn.relativeTo=Iv;Vn.relativeTo=Iv;Vn.dateFormat=eV;Vn.dateFormat=eV;var Er=Object.freeze({__proto__:null,format:Gv,equals:Hv,relativeTo:Iv,dateFormat:eV});Ma("a4",Er);var vg=lively.FreezerRuntime.recorderFor("lively.lang/promise.js");vg.promise=bh;vg.delay=bC;vg.delayReject=cC;vg.timeout=dC;vg.timeToRun=eC;vg.clearPendingWaitFors=function(){Object.kets(vg.waitForClosures).forEach(function(g){delete vg.waitForClosures[g];
clearInterval(g)})};vg.waitFor=Jv;vg.deferred=fC;vg.convertCallbackFun=Kv;vg.convertCallbackFunWithManyArgs=gC;vg._chainResolveNext=hC;vg.chain=Lv;vg.promise_finally=iC;vg.parallel=jC;vg.newUUID=tj;vg.pushIfNotIncluded=nb;vg.removeAt=Wc;vg.waitForClosures={};Object.assign(vg.promise,{delay:vg.delay,delayReject:vg.delayReject,timeout:vg.timeout,waitFor:vg.waitFor,deferred:vg.deferred,convertCallbackFun:vg.convertCallbackFun,convertCallbackFunWithManyArgs:vg.convertCallbackFunWithManyArgs,chain:vg.chain,
finally:vg.promise_finally,parallel:vg.parallel});vg.promise=bh;vg.promise=bh;vg.delay=bC;vg.delay=bC;vg.delayReject=cC;vg.delayReject=cC;vg.timeout=dC;vg.timeout=dC;vg.timeToRun=eC;vg.timeToRun=eC;vg.waitFor=Jv;vg.waitFor=Jv;vg.deferred=fC;vg.deferred=fC;vg.convertCallbackFun=Kv;vg.convertCallbackFun=Kv;vg.convertCallbackFunWithManyArgs=gC;vg.convertCallbackFunWithManyArgs=gC;vg.chain=Lv;vg.chain=Lv;vg.finally=iC;vg.promise_finally=iC;vg.parallel=jC;vg.parallel=jC;vg.default=bh;var Fr=lively.FreezerRuntime.recorderFor("lively.lang/Path.js");
Fr.Path=Qh;Fr.inspect=F;Object.assign(Fr.Path.prototype,{get isPathAccessor(){return!0},fromPath:function(g){"string"===typeof g&&""!==g&&g!==this.splitter?(this._parts=g.split(this.splitter),this._path=g):Array.isArray(g)?(this._parts=[].concat(g),this._path=g.join(this.splitter)):(this._parts=[],this._path="");return this},setSplitter:function(g){g&&(this.splitter=g);return this},map:function(g){this._mapper=g;return this},parts:function(){return this._parts},size:function(){return this._parts.length},
slice:function(g,c){return Fr.Path(this.parts().slice(g,c))},normalizePath:function(){return this._path},isRoot:function(g){return 0===this._parts.length},isIn:function(g){return this.isRoot()?!0:(g=this.get(g,-1))&&g.hasOwnProperty(this._parts[this._parts.length-1])},equals:function(g){return g&&g.isPathAccessor&&this.parts().equals(g.parts())},isParentPathOf:function(g){g=g&&g.isPathAccessor?g:Fr.Path(g);var c=this.parts();g=g.parts();for(var h=0;h<c.length;h++)if(c[h]!=g[h])return!1;return!0},
relativePathTo:function(g){g=Fr.Path(g);return this.isParentPathOf(g)?g.slice(this.size(),g.size()):void 0},del:function(g){if(this.isRoot())return!1;for(var c=0;c<this._parts.length-1;c++){var h=this._parts[c];if(g.hasOwnProperty(h))g=g[h];else return!1}return delete g[this._parts[this._parts.length-1]]},withParentAndKeyDo:function(g,c,h){if(this.isRoot())return h(null,null);for(var f=0;f<this._parts.length-1;f++){var m=this._parts[f];if(!g.hasOwnProperty(m)||"object"!==typeof g[m]&&"function"!==
typeof g[m])if(c)g=g[m]={};else return h(null,m);else g=g[m]}return h(g,this._parts[this._parts.length-1])},set:function(g,c,h){return this.withParentAndKeyDo(g,h,function(f,m){return f?f[m]=c:void 0})},defineProperty:function(g,c,h){return this.withParentAndKeyDo(g,h,function(f,m){return f?Object.defineProperty(f,m,c):void 0})},get:function(g,c){var h=this;return(c?this._parts.slice(0,c):this._parts).reduce(function(f,m){return f?h._mapper?h._mapper(m,f[m]):f[m]:f},g)},concat:function(g,c){return Fr.Path(this.parts().concat(Fr.Path(g,
c).parts()))},toString:function(){return this.normalizePath()},serializeExpr:function(){return"lively.lang.Path("+Fr.inspect(this.parts())+")"},watch:function(g){if(g&&!this.isRoot()){var c=g.target,h=this.get(c,-1),f=this.parts().slice(-1)[0],m="propertyWatcher$"+f,n=h&&h.hasOwnProperty(m),a=g.uninstall,d=g.haltWhenChanged,k=g.showStack,b=h.__lookupGetter__(f),e=h.__lookupSetter__(f);c&&f&&h&&(a?n&&(delete h[f],h[f]=h[m],delete h[m]):n||(b||e?console.log(h+'["'+f+'"] is a getter/setter, watching not support'):
(h[m]=h[f],h.__defineSetter__(f,function(l){var p=h[m];if(g.onSet)g.onSet(l,p);p=h+"."+f+" changed: "+p+" -> "+l;k&&(p+="\n"+("undefined"!==typeof lively?lively.printStack():console.trace()));g.verbose&&console.log(p);if(d)debugger;return h[m]=l}),h.__defineGetter__(f,function(){if(g.onGet)g.onGet(h[m]);return h[m]}),console.log("Watcher for "+h+"."+f+" installed"))))}},debugFunctionWrapper:function(g){var c=g.target,h=this.get(c,-1),f=this.parts().slice(-1)[0],m=void 0===g.haltWhenChanged?!0:g.haltWhenChanged,
n=h&&f&&h[f],a=n&&n.isDebugFunctionWrapper;c&&f&&n&&h&&(g.uninstall?a&&(h[f]=h[f].debugTargetFunction,console.log("Uninstalled debugFunctionWrapper for "+h+"."+f)):a?console.log("debugFunctionWrapper for "+h+"."+f+" already installed"):(g=h[f]=n.wrap(function(d){var k=Array.from(arguments);if(m)debugger;return k.shift().apply(h,k)}),g.isDebugFunctionWrapper=!0,g.debugTargetFunction=n,console.log("debugFunctionWrapper for "+h+"."+f+" installed")))}});Fr.default=Qh;var nj=lively.FreezerRuntime.recorderFor("lively.lang/graph.js");
nj.clone=Ct;nj.without=Dt;nj.hull=Uy;nj.subgraphReachableBy=Vy;nj.invert=Wy;nj.sortByReference=Mv;nj.reduce=Nv;nj.random=Xy;nj.range=Rc;nj.shuffle=wf;nj.withoutAll=vd;nj.flatten=Lb;nj.uniq=pb;nj.values=$m;nj.clone=Ct;nj.clone=Ct;nj.without=Dt;nj.without=Dt;nj.hull=Uy;nj.hull=Uy;nj.subgraphReachableBy=Vy;nj.subgraphReachableBy=Vy;nj.invert=Wy;nj.invert=Wy;nj.sortByReference=Mv;nj.sortByReference=Mv;nj.reduce=Nv;nj.reduce=Nv;nj.random=Xy;nj.random=Xy;var Ts=Object.freeze({__proto__:null,clone:Ct,without:Dt,
hull:Uy,subgraphReachableBy:Vy,invert:Wy,sortByReference:Mv,reduce:Nv,random:Xy}),Wh=lively.FreezerRuntime.recorderFor("lively.lang/interval.js");Wh.isInterval=Ov;Wh.sort=Pv;Wh.compare=Qv;Wh.coalesce=Yy;Wh.coalesceOverlapping=Zy;Wh.mergeOverlapping=ms;Wh.intervalsInRangeDo=ns;Wh.intervalsInbetween=Zq;Wh.mapToMatchingIndexes=Et;Wh.benchmark=function(){function g(c,h,f){return c.name+" "+Wh.timeToRunN(function(){return c.apply(null,h,1E5)},f)+"ms"}return["Friday, 20. July 2012:\ncoalesceOverlapping: 0.0003ms\nintervalsInbetween: 0.002ms\nmapToMatchingIndexes: 0.02ms",
"vs.\n"+new Date+":",g(Wh.coalesceOverlapping,[[[9,10],[1,8],[3,7],[15,20],[14,21]]],1E5),g(Wh.intervalsInbetween,[0,10,[[8,10],[0,2],[3,5]]],1E5),g(Wh.mapToMatchingIndexes,[Wh.range(0,1E3).map(function(c){return[c,c+1]}),[[4,8],[500,504],[900,1004]]],1E3)].join("\n")};Wh.range=Rc;Wh.timeToRunN=oe;Wh.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;Wh.isInterval=Ov;Wh.isInterval=Ov;Wh.sort=Pv;Wh.sort=Pv;Wh.compare=Qv;Wh.compare=Qv;Wh.coalesce=Yy;Wh.coalesce=
Yy;Wh.coalesceOverlapping=Zy;Wh.coalesceOverlapping=Zy;Wh.mergeOverlapping=ms;Wh.mergeOverlapping=ms;Wh.intervalsInRangeDo=ns;Wh.intervalsInRangeDo=ns;Wh.intervalsInbetween=Zq;Wh.intervalsInbetween=Zq;Wh.mapToMatchingIndexes=Et;Wh.mapToMatchingIndexes=Et;var HL=Object.freeze({__proto__:null,isInterval:Ov,sort:Pv,compare:Qv,coalesce:Yy,coalesceOverlapping:Zy,mergeOverlapping:ms,intervalsInRangeDo:ns,intervalsInbetween:Zq,mapToMatchingIndexes:Et}),an=lively.FreezerRuntime.recorderFor("lively.lang/array-projection.js");
an.create=Rv;an.toArray=Sv;an.originalToProjectedIndex=Tv;an.projectedToOriginalIndex=$y;an.transformToIncludeIndex=az;an.create=Rv;an.create=Rv;an.toArray=Sv;an.toArray=Sv;an.originalToProjectedIndex=Tv;an.originalToProjectedIndex=Tv;an.projectedToOriginalIndex=$y;an.projectedToOriginalIndex=$y;an.transformToIncludeIndex=az;an.transformToIncludeIndex=az;var IL=Object.freeze({__proto__:null,create:Rv,toArray:Sv,originalToProjectedIndex:Tv,projectedToOriginalIndex:$y,transformToIncludeIndex:az}),wh=
lively.FreezerRuntime.recorderFor("lively.lang/grid.js");wh.get=bz;wh.set=cz;wh.getRow=Ft;wh.setRow=Uv;wh.getCol=Gt;wh.setCol=Vv;wh.create=dz;wh.mapCreate=Wv;wh.forEach=Xv;wh.map=Ht;wh.toObjects=Yv;wh.tableFromObjects=ez;wh.benchmark=function(){var g=[],c=wh.create(1E3,200,1);var h=wh.timeToRunN(function(){wh.forEach(c,function(m){})},10);g.push("forEach: "+h.toFixed(2)+"ms");h=wh.timeToRunN(function(){wh.map(c,function(m,n,a){return n+a+Math.round(100*Math.random())})},10);g.push("map: "+h.toFixed(2)+
"ms");var f=wh.create(1E3,2E3);h=wh.timeToRunN(function(){f=Array(1E3);for(var m=0;1E3>m;m++)f[m]=Array(2E3);wh.forEach(c,function(n,a,d){f[a][d]=a+d+Math.round(100*Math.random())})},10);g.push("map with forEach: "+h+"ms");g.push("--= 2012-09-22 =--\nforEach: 14.9ms\nmap: 19.8ms\nmap with forEach: 38.7ms\n");return g.join("\n")};wh.arrayWithN=Pd;wh.timeToRunN=oe;wh.get=bz;wh.get=bz;wh.set=cz;wh.set=cz;wh.getRow=Ft;wh.getRow=Ft;wh.setRow=Uv;wh.setRow=Uv;wh.getCol=Gt;wh.getCol=Gt;wh.setCol=Vv;wh.setCol=
Vv;wh.create=dz;wh.create=dz;wh.mapCreate=Wv;wh.mapCreate=Wv;wh.forEach=Xv;wh.forEach=Xv;wh.map=Ht;wh.map=Ht;wh.toObjects=Yv;wh.toObjects=Yv;wh.tableFromObjects=ez;wh.tableFromObjects=ez;var FA=Object.freeze({__proto__:null,get:bz,set:cz,getRow:Ft,setRow:Uv,getCol:Gt,setCol:Vv,create:dz,mapCreate:Wv,forEach:Xv,map:Ht,toObjects:Yv,tableFromObjects:ez}),uk=lively.FreezerRuntime.recorderFor("lively.lang/tree.js");uk.prewalk=Zv;uk.postwalk=It;uk.find=$v;uk.filter=aw;uk.map=bw;uk.mapTree=Up;uk.flatten=
Lb;uk.detect=uk.find;var fV=uk.detect;uk.prewalk=Zv;uk.prewalk=Zv;uk.postwalk=It;uk.postwalk=It;uk.find=$v;uk.find=$v;uk.detect=fV;uk.detect=fV;uk.filter=aw;uk.filter=aw;uk.map=bw;uk.map=bw;uk.mapTree=Up;uk.mapTree=Up;var Us=Object.freeze({__proto__:null,prewalk:Zv,postwalk:It,find:$v,detect:fV,filter:aw,map:bw,mapTree:Up});Ma("a3",Us);var Gr=lively.FreezerRuntime.recorderFor("lively.lang/events.js");Gr.isNode="undefined"!==typeof Gr.process&&Gr.process.versions&&Gr.process.versions.node;Gr.makeEmitter=
Gr.isNode?function(g,c){if(g.on&&g.removeListener)return g;var h="undefined"!==typeof System?System._nodeRequire("events"):Gr.require("events");Object.assign(g,h.EventEmitter.prototype);h.EventEmitter.call(g);c&&c.maxListenerLimit&&g.setMaxListeners(c.maxListenerLimit);return g}:function(g){if(g.on&&g.removeListener)return g;g.listeners={};g.on=function(c,h){h&&(g.listeners[c]||(g.listeners[c]=[]),g.listeners[c].push(h))};g.once=function(c,h){function f(){g.removeListener(c,f);h.apply(this,arguments)}
if(h)g.on(c,f)};g.removeListener=function(c,h){g.listeners[c]&&(g.listeners[c]=g.listeners[c].filter(function(f){return f!==h}))};g.removeAllListeners=function(c){g.listeners[c]&&(g.listeners[c]=[])};g.emit=function(){var c=Array.prototype.slice.call(arguments),h=c.shift();(h=g.listeners[h])&&h.length&&h.forEach(function(f){try{f.apply(null,c)}catch(m){console.error("Error in event handler: %s",m.stack||String(m))}})};return g};var tz=Gr.makeEmitter;Gr.makeEmitter=tz;Gr.makeEmitter=tz;var lx=Object.freeze({__proto__:null,
makeEmitter:tz}),Xk=lively.FreezerRuntime.recorderFor("lively.lang/messenger.js");Xk.create=cw;Xk.remove=xb;Xk.pluck=Vb;Xk.makeEmitter=tz;Xk.newUUID=tj;Xk.OFFLINE="offline";Xk.ONLINE="online";Xk.CONNECTING="connecting";Xk.create=cw;Xk.create=cw;var JL=Object.freeze({__proto__:null,create:cw}),xh=lively.FreezerRuntime.recorderFor("lively.lang/worker.js");xh.fork=fz;xh.create=$q;xh.makeEmitter=tz;xh.newUUID=tj;xh.waitFor=Pe;xh.messengerCreate=cw;xh.Closure=Cj;xh.isNodejs="undefined"!==typeof require&&
"undefined"!==typeof process;xh.WorkerSetup={loadDependenciesBrowser:function(g){importScripts.apply("undefined"!==typeof self?self:this,g.scriptsToLoad||[])},loadDependenciesNodejs:function(g){(global.lively||(global.lively={})).lang=require(require("path").join(g.libLocation,"index"))},initBrowserGlobals:function(g){remoteWorker.send=function(c){postMessage(c)};g="undefined"!==typeof self?self:this;g=g.Global=g;g.window=g;g.console=g.console||function(){var c={};["log","error","warn"].forEach(function(h){c[h]=
function(){for(var f=arguments[0],m=1;m<arguments.length;m++)f=f.replace("%s",arguments[m]);remoteWorker.send({type:h,message:["[",h.toUpperCase(),"] ",f].join("")})}});return c}()},initOnMessageHandler:function(g){function c(h){h=h.data.data?h.data:h;if(remoteWorker.messenger)remoteWorker.messenger.onMessage(h);else"close"==h.action&&(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())}if(remoteWorker.on)remoteWorker.on("message",c);else remoteWorker.onmessage=c},initWorkerInterface:function(g){remoteWorker.callStringifiedFunction=
function(c,h,f){try{var m=eval("("+c+")")}catch(d){f(Error("Cannot create function from string: "+d.stack||d));return}c=m.length===h.length+1;var n=lively.lang.fun.once(function(d,k){remoteWorker.isBusy=!1;f(d,k)});remoteWorker.isBusy=!0;c&&h.push(n);try{var a=m.apply(remoteWorker,h.concat([n]))}catch(d){n(d,null);return}c||n(null,a)};remoteWorker.httpRequest=function(c){if(c.url){var h=new XMLHttpRequest,f=c.method||"GET";h.onreadystatechange=function(){4===h.readyState&&c.done&&c.done(h)};h.open(f,
c.url);h.send()}else console.log("Error, httpRequest needs url")};remoteWorker.terminateIfNotBusyIn=function(c){setTimeout(function(){remoteWorker.isBusy?remoteWorker.terminateIfNotBusyIn(c):(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())},c)}},initWorkerMessenger:function(g){if(!g.useMessenger)return null;if(!lively.lang.messenger)throw Error("worker.create requires messenger.js to be loaded!");if(!lively.lang.events)throw Error("worker.create requires events.js to be loaded!");
return remoteWorker.messenger=lively.lang.messenger.create({services:{remoteEval:function(c,h){try{var f=eval(c.data.expr)}catch(m){f=m.stack||m}h.answer(c,{result:String(f)})},run:function(c,h){var f=c.data.func,m=c.data.args;f?remoteWorker.callStringifiedFunction(f,m,function(n,a){h.answer(c,{error:n?String(n):null,result:a})}):h.answer(c,{error:"no funcString"})},close:function(c,h){h.answer(c,{status:"OK"});remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}},isOnline:function(){return!0},
send:function(c,h){remoteWorker.send(c);h()},listen:function(c){c()},close:function(c){remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}})}};xh.BrowserWorker={create:function(g){g=g||{};if(!g.libLocation&&!g.scriptsToLoad){var c=document.querySelector('script[src$="worker.js"]');if(!c)throw Error('Cannot find library path to start worker. Use worker.create({libLocation: "..."}) to explicitly define the path!');g.libLocation=c.src.replace(/worker.js$/,"")}c=String(function(){self.onmessage=
function(h){if("setup"!==h.data.action)throw Error("expected setup to be first message but got "+JSON.stringify(h.data));h=h.data.options||{};initBrowserGlobals(h);loadDependenciesBrowser(h);initOnMessageHandler(h);initWorkerInterface(h);initWorkerMessenger(h);postMessage({workerReady:!0})};__FUNCTIONDECLARATIONS__}).split("__lvVarRecorder.").join("").replace("__FUNCTIONDECLARATIONS__",[xh.WorkerSetup.initBrowserGlobals,xh.WorkerSetup.loadDependenciesBrowser,xh.WorkerSetup.initOnMessageHandler,xh.WorkerSetup.initWorkerInterface,
xh.WorkerSetup.initWorkerMessenger].join("\n"));c="("+xh.Closure.fromSource(c).getFuncSource()+")();";c=new Worker(function(h){try{var f=new Blob([h],{type:"text/javascript"})}catch(m){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,f=new BlobBuilder,f.append(h),f=f.getBlob()}return("undefined"!==typeof webkitURL?webkitURL:URL).createObjectURL(f)}(c));(function(h,f){xh.makeEmitter(f);h.scriptsToLoad||(h.scriptsToLoad="base.js events.js object.js collection.js function.js string.js number.js date.js messenger.js worker.js".split(" ").map(function(n){return h.libLocation+
n}));var m=Object.keys(h).reduce(function(n,a){"function"!==typeof h[a]&&(n[a]=h[a]);return n},{});f.onmessage=function(n){void 0!==n.data.workerReady?(f.ready=!!n.data.workerReady,f.ready?f.emit("ready"):f.emit("close")):f.emit("message",n.data)};f.errors=[];f.onerror=function(n){console.error(n);f.errors.push(n);f.emit("error",n)};f.postMessage({action:"setup",options:m})})(g,c);return c}};xh.NodejsWorker={debug:!1,initCodeFileCreated:!1,create:function(g){g=g||{};var c,h=xh.makeEmitter({ready:!1,
errors:[],postMessage:function(f){c?h.ready?c.send(f):h.emit("error",Error("nodejs worker process not ready or already closed")):h.emit("error",Error("nodejs worker process not yet created"))}});xh.NodejsWorker.startWorker(g,function(f,m){f?(h.ready=!1,h.emit("error",f)):(c=m,c.on("message",function(n){xh.NodejsWorker.debug&&console.log("[WORKER PARENT] got message:",n);h.emit("message",n)}),c.on("close",function(){console.log("[WORKER PARENT] worker closed");h.emit("close")}),c.on("error",function(n){console.log("[WORKER PARENT] error ",
n);h.errors.push(n);h.emit("error",n)}),h.ready=!0,h.emit("ready"))});return h},workerSetupFunction:function(){var g=process;console.log("[WORKER] Starting init");g.on("message",function(c){if("setup"!==c.action)throw Error("expected setup to be first message but got "+JSON.stringify(c.data));g.removeAllListeners("message");c=c.data.options||{};console.log("[WORKER] running setup with options",c);loadDependenciesNodejs(c);initOnMessageHandler(c);initWorkerInterface(c);initWorkerMessenger(c);g.send({workerReady:!0})});
__FUNCTIONDECLARATIONS__},ensureInitCodeFile:function(g,c,h){var f=require("path"),m=require("os"),n=require("fs");m=f.join(m.tmpDir(),"lively-nodejs-workers/");var a=f.join(m,"nodejs-worker-init.js");xh.NodejsWorker.initCodeFileCreated?n.exists(a,function(d){d?h(null,a):xh.NodejsWorker.createWorkerCodeFile(g,a,c,h)}):xh.NodejsWorker.createWorkerCodeFile(g,a,c,h)},createWorkerCodeFile:function(g,c,h,f){g=require("path");var m=require("fs"),n=require("child_process").exec;n("mkdir -p "+g.dirname(c),
function(a,d,k){a?f(Error(["[WORKER PARENT] Could not create worker temp dir:",d,k].join("\n"))):m.writeFile(c,h,function(b){xh.NodejsWorker.debug&&console.log("worker code file %s created",c);xh.NodejsWorker.initCodeFileCreated=!0;f(b,c)})})},startWorker:function(g,c){var h=require("util"),f=require("child_process").fork,m=String(xh.NodejsWorker.workerSetupFunction).replace("__FUNCTIONDECLARATIONS__",[xh.WorkerSetup.loadDependenciesNodejs,xh.WorkerSetup.initOnMessageHandler,xh.WorkerSetup.initWorkerInterface,
xh.WorkerSetup.initWorkerMessenger].join("\n"));h=h.format("(%s)();\n",m);xh.NodejsWorker.ensureInitCodeFile(g,h,function(n,a){if(n)return c(n);var d=f(a,{});xh.NodejsWorker.debug&&console.log("worker forked");d.on("message",function(k){"pong"===k.action?console.log("[WORKER pong] ",k):"log"===k.action&&console.log("[Message from WORKER] ",k.data)});d.once("message",function(k){xh.NodejsWorker.debug&&console.log("worker setup done");c(null,d,k)});d.on("close",function(){xh.NodejsWorker.debug&&console.log("[WORKER PARENT] worker closed")});
d.send({action:"setup",data:{options:g}});global.WORKER=d})}};xh.fork=fz;xh.fork=fz;xh.create=$q;xh.create=$q;var KL=Object.freeze({__proto__:null,fork:fz,create:$q}),Nd=lively.FreezerRuntime.recorderFor("lively.lang/index.js");Nd.createLivelyLangObject=function(){return{chain:Nd.chain,noConflict:Nd.noConflict,installGlobals:Nd.installGlobals,uninstallGlobals:Nd.uninstallGlobals,globalInterfaceSpec:Nd.globalInterfaceSpec,toString:function(){return"[object lively.lang]"}}};Nd.globalInstall=Zo;Nd.chain=
so;Nd.createChain=function(g,c){return Object.keys(g).reduce(function(h,f){h[f]=function(){var m=Array.prototype.slice.call(arguments);m=g[f].apply(null,[c].concat(m));return Nd.chain(m)};return h},{value:function(){return c}})};Nd.noConflict=dw;Nd.installGlobals=ew;Nd.installProperty=function(g,c){if(!g.isIn(Nd.livelyLang))throw c=Error("property not provided by lively.lang: "+g),console.error(c.stack||c),c;g=g.get(Nd.livelyLang);if("function"===typeof g&&"prototype"===c.slice(-2,-1).toString()){var h=
g;g=function(){var f=Array.prototype.slice.call(arguments);f.unshift(this);return h.apply(null,f)};g.toString=function(){return h.toString()}}c.set(Nd.GLOBAL,g,!0)};Nd.uninstallGlobals=gz;Nd.string=Dh;Nd.num=zl;Nd.fun=Vl;Nd.Closure=Cj;Nd.arr=Gf;Nd.obj=eg;Nd.properties=go;Nd.date=Er;Nd.promise=bh;Nd.Path=Qh;Nd.graph=Ts;Nd.interval=HL;Nd.arrayProjection=IL;Nd.Group=Pm;Nd.grid=FA;Nd.tree=Us;Nd.events=lx;Nd.messenger=JL;Nd.worker=KL;Nd.worker=KL;Nd.worker=KL;Nd.messenger=JL;Nd.messenger=JL;Nd.events=
lx;Nd.events=lx;Nd.tree=Us;Nd.tree=Us;Nd.grid=FA;Nd.grid=FA;Nd.arrayProjection=IL;Nd.arrayProjection=IL;Nd.interval=HL;Nd.interval=HL;Nd.graph=Ts;Nd.graph=Ts;Nd.date=Er;Nd.date=Er;Nd.properties=go;Nd.properties=go;Nd.obj=eg;Nd.obj=eg;Nd.arr=Gf;Nd.arr=Gf;Nd.fun=Vl;Nd.fun=Vl;Nd.num=zl;Nd.num=zl;Nd.string=Dh;Nd.string=Dh;Nd.Closure=Cj;Nd.Closure=Cj;Nd.promise=bh;Nd.promise=bh;Nd.Path=Qh;Nd.Path=Qh;Nd.Group=Pm;Nd.Group=Pm;Nd.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:
"undefined"!==typeof self?self:void 0;Nd.isNode="undefined"!==typeof Nd.process&&Nd.process.env&&"function"===typeof Nd.process.exit;Nd.globalInterfaceSpec=[{action:"installMethods",target:"Array",sources:["arr"],methods:["from","genN","range","withN"]},{action:"installMethods",target:"Array.prototype",sources:["arr"],methods:"all any batchify clear clone collect compact delimWith detect doAndContinue each equals filterByKey findAll first flatten forEachShowingProgress grep groupBy groupByKey histogram include inject intersect invoke last mapAsync mapAsyncSeries mask max min mutableCompact nestedDelay partition pluck pushAll pushAllAt pushAt pushIfNotIncluded reMatches reject rejectByKey remove removeAt replaceAt rotate shuffle size sortBy sortByKey sum swap toArray toTuples union uniq uniqBy without withoutAll zip".split(" "),
alias:[["select","filter"]]},{action:"installMethods",target:"Date",sources:["date"],methods:[]},{action:"installMethods",target:"Date.prototype",sources:["date"],methods:["equals","format","relativeTo"]},{action:"installMethods",target:"Function",sources:["fun"],methods:["fromString"]},{action:"installMethods",target:"Function.prototype",sources:["fun"],methods:"addToObject argumentNames asScript asScriptOf binds curry delay functionNames localFunctionNames getOriginal getVarMapping logCalls logCompletion logErrors qualifiedMethodName setProperty traceCalls wrap".split(" ")},
{action:"installMethods",target:"Number",sources:["num"],methods:[]},{action:"installMethods",target:"Number.prototype",sources:["num"],methods:["detent","randomSmallerInteger","roundTo","toDegrees","toRadians"]},{action:"installMethods",target:"Object",sources:["obj"],methods:"addScript clone deepCopy extend inherit isArray isBoolean isElement isEmpty isFunction isNumber isObject isRegExp isString isUndefined merge mergePropertyInHierarchy values valuesInPropertyHierarchy".split(" ")},{action:"installMethods",
target:"Object.prototype",sources:["obj"],methods:[]},{action:"installMethods",target:"String.prototype",sources:["string"],methods:"camelize capitalize digitValue empty hashCode include pad regExpEscape startsWithVowel succ times toArray toQueryParams truncate".split(" ")},{action:"installObject",target:"Numbers",source:"num",methods:"average between convertLength humanReadableByteSize median normalRandom parseLength random sort".split(" ")},{action:"installObject",target:"Properties",source:"properties",
methods:"all allOwnPropertiesOrFunctions allProperties any forEachOwn hash nameFor own ownValues values".split(" ")},{action:"installObject",target:"Strings",source:"string",methods:"camelCaseString createDataURI diff format formatFromArray indent lineIndexComputer lines md5 newUUID nonEmptyLines pad paragraphs peekLeft peekRight print printNested printTable printTree quote reMatches stringMatch tableize tokens unescapeCharacterEntities withDecimalPrecision".split(" ")},{action:"installObject",target:"Objects",
source:"obj",methods:"asObject equals inspect isMutableType safeToString shortPrintStringOf typeStringOf".split(" ")},{action:"installObject",target:"Functions",source:"fun",methods:"all compose composeAsync createQueue debounce debounceNamed either extractBody flip notYetImplemented once own throttle throttleNamed timeToRun timeToRunN waitFor workerWithCallbackQueue wrapperChain".split(" ")},{action:"installObject",target:"Grid",source:"grid"},{action:"installObject",target:"Interval",source:"interval"},
{action:"installObject",target:"lively.ArrayProjection",source:"arrayProjection"},{action:"installObject",target:"lively.Closure",source:"Closure"},{action:"installObject",target:"lively.Grouping",source:"Group"},{action:"installObject",target:"lively.PropertyPath",source:"Path"},{action:"installObject",target:"lively.Worker",source:"worker"},{action:"installObject",target:"lively.Class",source:"classHelper"}];var LL=Nd.createLivelyLangObject();Nd.livelyLang=LL;Nd.livelyLang=LL;Nd.livelyLang=LL;Nd.globalInstall=
Zo;Nd.globalInstall=Zo;Nd.chain=so;Nd.chain=so;Nd.noConflict=dw;Nd.noConflict=dw;Nd.installGlobals=ew;Nd.installGlobals=ew;Nd.uninstallGlobals=gz;Nd.uninstallGlobals=gz;var C8=Object.freeze({__proto__:null,worker:KL,messenger:JL,events:lx,tree:Us,grid:FA,arrayProjection:IL,interval:HL,graph:Ts,date:Er,properties:go,obj:eg,arr:Gf,fun:Vl,num:zl,string:Dh,Closure:Cj,promise:bh,Path:Qh,Group:Pm,livelyLang:LL,globalInstall:Zo,chain:so,noConflict:dw,installGlobals:ew,uninstallGlobals:gz}),xg=lively.FreezerRuntime.recorderFor("lively.resources/src/http-resource.js");
xg.davNs=function(g){return(g=g.match(/\/([a-z]+?):multistatus/i))?g[1]:"d"};xg.propfindRequestPayload=function(){return'<?xml version="1.0" encoding="utf-8" ?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:creationdate/>\n        <D:getcontentlength/>\n        <D:getcontenttype/>\n        <D:getetag/>\n        <D:getlastmodified/>\n        <D:resourcetype/>\n      </D:prop>\n    </D:propfind>'};xg.readPropertyNode=function(g,c){c=void 0===c?{}:c;var h=g.tagName.replace(/[^:]+:/,"");
h=xg.propertyNodeMap[h];g=g.textContent;switch(h){case "lastModified":case "created":g=new Date(g);break;case "size":g=Number(g)}c[h]=g;return c};xg.readXMLPropfindResult=function(g){var c=(new xg.DOMParser).parseFromString(g,"text/xml");g=xg.davNs(g);c=(new xg.XPathQuery("/"+g+":multistatus/"+g+":response")).findAll(c.documentElement);var h=new xg.XPathQuery(g+":href"),f=new xg.XPathQuery(g+":propstat/"+g+":prop");return c.map(function(m){var n=f.findFirst(m);n=Array.from(n.childNodes).reduce(function(a,
d){return xg.readPropertyNode(d,a)},{});m=h.findFirst(m);n.url=m.textContent||m.text;return n})};xg.defaultOrigin=function(){return System.baseURL||document.location.origin};xg.makeRequest=function(g,c,h,f,m){f=void 0===f?{}:f;m=g.url;var n=g.useCors,a=g.useProxy,d=g.headers;n="undefined"!==typeof n?n:!0;c={method:void 0===c?"GET":c};if("undefined"!==typeof a?a:1)Object.assign(f,{"cache-control":"no-cache","x-lively-proxy-request":m}),m=g.proxyDomain||xg.defaultOrigin();n&&(c.mode="cors");h&&(c.body=
h);c.redirect="follow";c.headers=Object.assign({},f,{},d);return fetch(m,c)};xg.upload=fw;xg.Resource=Cg;xg.applyExclude=hc;xg.promise=bh;xg.num=zl;var lE=function(g){this.expression=g;this.contextNode=null;this.xpe=new xg.XPathEvaluator};lE.prototype.establishContext=function(g){this.nsResolver||(g=g.ownerDocument?g.ownerDocument.documentElement:g.documentElement,g!==this.contextNode&&(this.contextNode=g,this.nsResolver=this.xpe.createNSResolver(g)))};lE.prototype.manualNSLookup=function(){this.nsResolver=
function(g){return xg.Namespace[g.toUpperCase()]||null};return this};lE.prototype.findAll=function(g,c){this.establishContext(g);g=this.xpe.evaluate(this.expression,g,this.nsResolver,xg.XPathResult.ANY_TYPE,null);for(var h=[],f;f=g.iterateNext();)h.push(f);return 0<h.length||void 0===c?h:c};lE.prototype.findFirst=function(g){this.establishContext(g);return this.xpe.evaluate(this.expression,g,this.nsResolver,xg.XPathResult.ANY_TYPE,null).iterateNext()};xg.XPathQuery=lE;xg.propertyNodeMap={getlastmodified:"lastModified",
creationDate:"created",getetag:"etag",getcontentlength:"size",resourcetype:"type",getcontenttype:"contentType"};xg.binaryExtensions="3ds 3g2 3gp 7z a aac adp ai aif aiff alz ape apk ar arj asf au avi bak bh bin bk bmp btif bz2 bzip2 cab caf cgm class cmx cpio cr2 csv cur dat deb dex djvu dll dmg dng doc docm docx dot dotm dra DS_Store dsk dts dtshd dvb dwg dxf ecelp4800 ecelp7470 ecelp9600 egg eol eot epub exe f4v fbs fh fla flac fli flv fpx fst fvt g3 gif graffle gz gzip h261 h263 h264 icns ico ief img ipa iso jar jpeg jpg jpgv jpm jxr key ktx lha lvp lz lzh lzma lzo m3u m4a m4v mar mdi mht mid midi mj2 mka mkv mmr mng mobi mov movie mp3 mp4 mp4a mpeg mpg mpga mxu nef npx numbers o oga ogg ogv otf pages pbm pcx pdf pea pgm pic png pnm pot potm potx ppa ppam ppm pps ppsm ppsx ppt pptm pptx psd pya pyc pyo pyv qt rar ras raw rgb rip rlc rmf rmvb rtf rz s3m s7z scpt sgi shar sil sketch slk smv so sub swf tar tbz tbz2 tga tgz thmx tif tiff tlz ttc ttf txz udf uvh uvi uvm uvp uvs uvu viv vob war wav wax wbmp wdp weba webm webp whl wim wm wma wmv wmx woff woff2 wvx xbm xif xla xlam xls xlsb xlsm xlsx xlt xltm xltx xm xmind xpi xpm xwd xz z zip zipx".split(" ");
xg.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof global&&"undefined"!==typeof xg.process;xg.upload=fw;xg.upload=fw;var Al=function(g,c){c=void 0===c?{}:c;g=xg.Resource.call(this,g,c)||this;g.onLoad=c.onLoad||function(){};g.onProgress=c.onProgress||function(){};g.useProxy=c.hasOwnProperty("useProxy")?c.useProxy:!1;g.proxyDomain=c.proxyDomain||void 0;g.useCors=c.hasOwnProperty("useCors")?c.useCors:!1;g.headers=c.headers||{};g.binary=g.isFile()?xg.binaryExtensions.includes(g.ext()):
!1;g.errorOnHTTPStatusCodes=c.hasOwnProperty("errorOnHTTPStatusCodes")?c.errorOnHTTPStatusCodes:!0;return g};$jscomp.inherits(Al,xg.Resource);Al.prototype.join=function(g){return Object.assign(xg.Resource.prototype.join.call(this,g),{headers:this.headers,useCors:this.useCors,useProxy:this.useProxy,proxyDomain:this.proxyDomain})};Al.prototype.makeProxied=function(g){void 0!==g&&(this.proxyDomain=g);return this.useProxy?this:new this.constructor(this.url,{headers:this.headers,useCors:this.useCors,useProxy:!0,
proxyDomain:this.proxyDomain})};Al.prototype.noErrorOnHTTPStatusCodes=function(){this.errorOnHTTPStatusCodes=!1;return this};Al.prototype.read=function(){var g=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(xg.makeRequest(g),2);c=h.yieldResult;if(!c.ok&&g.errorOnHTTPStatusCodes)throw Error("Cannot read "+g.url+": "+c.statusText+" "+c.status);if(!g.binary)return h.return(c.text());if("blob"===g.binary)return h.return(c.blob());if("function"===
typeof c.arrayBuffer)return h.return(c.arrayBuffer());if("function"===typeof c.buffer)return h.return(c.buffer());throw Error("Don't now how to read binary resource "+g+"'");})};Al.prototype.write=function(g){var c=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress){if(!c.isFile())throw Error("Cannot write a non-file: "+c.url);return f.yield(xg.upload(c,g),2)}h=f.yieldResult;if(!xg.num.between(h.status,200,300)&&c.errorOnHTTPStatusCodes)throw Error("Cannot write "+
c.url+": "+h.statusText+" "+h.status);return f.return(c)})};Al.prototype.mkdir=function(){var g=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){if(g.isFile())throw Error("Cannot mkdir on a file: "+g.url);return h.yield(xg.makeRequest(g,"MKCOL"),2)}c=h.yieldResult;if(!c.ok&&g.errorOnHTTPStatusCodes)throw Error("Cannot create directory "+g.url+": "+c.statusText+" "+c.status);return h.return(g)})};Al.prototype.exists=function(){var g=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==
h.nextAddress)return g.isRoot()?(c=!0,h.jumpTo(2)):h.yield(xg.makeRequest(g,"HEAD"),3);2!=h.nextAddress&&(c=!!h.yieldResult.ok);return h.return(c)})};Al.prototype.remove=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?c.yield(xg.makeRequest(g,"DELETE"),2):c.return(g)})};Al.prototype._propfind=function(){var g=this,c,h,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(xg.makeRequest(g,"PROPFIND",
null,{"Content-Type":"text/xml"}),2);if(3!=m.nextAddress){c=m.yieldResult;if(!c.ok&&g.errorOnHTTPStatusCodes)throw Error("Error in dirList for "+g.url+": "+c.statusText);return m.yield(c.text(),3)}h=m.yieldResult;f=g.root();return m.return(xg.readXMLPropfindResult(h).map(function(n){return f.join(n.url).assignProperties(n)}))})};Al.prototype.dirList=function(g,c){g=void 0===g?1:g;c=void 0===c?{}:c;var h=this,f,m,n,a,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){if("number"!==
typeof g&&"infinity"!==g)throw Error("dirList \u2013 invalid depth argument: "+g);f=c;m=f.exclude;0>=g&&(g=1);return 1===g?k.yield(h._propfind(),5):k.yield(h.dirList(1,c),4)}if(5!=k.nextAddress)return n=k.yieldResult,a=n.filter(function(b){return b.isDirectory()}),k.return(Promise.all(a.map(function(b){return b.dirList("number"===typeof g?g-1:g,c)})).then(function(b){return b.reduce(function(e,l){return e.concat(l)},n)}));d=k.yieldResult;d.shift();m&&(d=xg.applyExclude(m,d));return k.return(d)})};
Al.prototype.readProperties=function(g){var c=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(c._propfind(),2);h=f.yieldResult[0];return f.return(c.assignProperties(h))})};Al.prototype.post=function(g){g=void 0===g?null:g;var c=this,h,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:return"string"!==typeof g&&(g=JSON.stringify(g)),n.yield(xg.makeRequest(c,"POST",g,{}),2);case 2:return h=n.yieldResult,
n.setCatchFinallyBlocks(3),n.yield(h.text(),5);case 5:f=n.yieldResult;n.leaveTryBlock(4);break;case 3:n.enterCatchBlock();case 4:if(f&&"application/json"===h.headers.get("content-type"))try{m=JSON.parse(f)}catch(a){}if(!h.ok&&c.errorOnHTTPStatusCodes)throw Error("Error in POST "+c.url+": "+(f||h.statusText));return n.return(m||f)}})};Al.prototype.copyTo=function(g,c){c=void 0===c?!0:c;var h=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(h.isFile()&&(f=g.isFile()?g:g.join(h.name()),
xg.isNode)){if(f.isHTTPResource)return m.return(h._copyTo_file_nodejs_http(f,c));if(f.isNodeJSFileResource)return m.return(h._copyTo_file_nodejs_fs(f,c))}return m.return(xg.Resource.prototype.copyTo.call(h,g,c))})};Al.prototype._copyFrom_file_nodejs_fs=function(g,c){c=void 0===c?!0:c;var h=this,f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return c?a.yield(h.parent().ensureExistance(),2):a.jumpTo(2);if(4!=a.nextAddress)return m=g._createReadStream(),m.on("error",
function(d){return f=d}),a.yield(xg.makeRequest(h,"PUT",m),4);n=a.yieldResult;if(f)throw f;if(!n.ok&&h.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+n.statusText+" "+n.status);return a.return(h)})};Al.prototype._copyTo_file_nodejs_fs=function(g,c){c=void 0===c?!0:c;var h=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return c?n.yield(g.parent().ensureExistance(),2):n.jumpTo(2);if(4!=n.nextAddress)return n.yield(xg.makeRequest(h,"GET"),4);f=
n.yieldResult;if(!f.ok&&h.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+f.statusText+" "+f.status);return n.return(new Promise(function(a,d){return f.body.pipe(g._createWriteStream()).on("error",function(k){return m=k}).on("finish",function(){return m?d(m):a(h)})}))})};Al.prototype._copyTo_file_nodejs_http=function(g,c){c=void 0===c?!0:c;var h=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:if(!c){n.jumpTo(2);break}return n.yield(g.parent().ensureExistance(),
2);case 2:return n.yield(xg.makeRequest(h,"GET"),4);case 4:f=n.yieldResult;if(!f.ok&&h.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+f.statusText+" "+f.status);return n.yield(xg.makeRequest(g,"PUT",f.body),5);case 5:m=n.yieldResult;if(!f.ok&&h.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot PUT: "+m.statusText+" "+m.status);n.jumpToEnd()}})};$jscomp.global.Object.defineProperties(Al.prototype,{isHTTPResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});xg.WebDAVResource=
Al;var ML={name:"http-webdav-resource",matches:function(g){return g.startsWith("http:")||g.startsWith("https:")},resourceClass:xg.WebDAVResource};xg.resourceExtension=ML;xg.resourceExtension=ML;xg.resourceExtension=ML;xg.default=Al;var pq=System.get("@system-env").node?require("fs"):{},hna=pq.readFile,ina=pq.writeFile,jna=pq.exists,kna=pq.readdir,lna=pq.mkdir,mna=pq.rmdir,nna=pq.unlink,ona=pq.lstat,pna=pq.rename,qna=pq.createWriteStream,rna=pq.createReadStream,Qf=lively.FreezerRuntime.recorderFor("lively.resources/src/fs-resource.js");
Qf.wrapInPromise=function(g){return function(c){for(var h=[],f=0;f<arguments.length;++f)h[f-0]=arguments[f];return new Promise(function(m,n){return g.apply(null,h.concat(function(a,d){return a?n(a):m(d)}))})}};Qf.Resource=Cg;Qf.applyExclude=hc;Qf.windowsURLPrefixRe=EL;Qf.windowsRootPathRe=GL;Qf.createWriteStream=qna;Qf.createReadStream=rna;Qf.readFile=hna;Qf.writeFile=ina;Qf.exists=jna;Qf.mkdir=lna;Qf.rmdir=mna;Qf.unlink=nna;Qf.readdir=kna;Qf.lstat=ona;Qf.rename=pna;Qf.readFileP=Qf.wrapInPromise(Qf.readFile);
Qf.writeFileP=Qf.wrapInPromise(Qf.writeFile);Qf.existsP=function(g){return new Promise(function(c,h){return Qf.exists(g,function(f){return c(!!f)})})};Qf.readdirP=Qf.wrapInPromise(Qf.readdir);Qf.mkdirP=Qf.wrapInPromise(Qf.mkdir);Qf.rmdirP=Qf.wrapInPromise(Qf.rmdir);Qf.unlinkP=Qf.wrapInPromise(Qf.unlink);Qf.lstatP=Qf.wrapInPromise(Qf.lstat);Qf.renameP=Qf.wrapInPromise(Qf.rename);var vm=function(){return Qf.Resource.apply(this,arguments)||this};$jscomp.inherits(vm,Qf.Resource);vm.prototype.path=function(){return this.url.replace("file://",
"")};vm.prototype.stat=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return c.return(Qf.lstatP(g.path()))})};vm.prototype.read=function(){var g=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){c=Qf.readFileP(g.path());return h.return(g.binary?c:c.then(String))})};vm.prototype.write=function(g){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){if(c.isDirectory())throw Error("Cannot write into a directory: "+
c.path());return h.yield(Qf.writeFileP(c.path(),g),2)}return h.return(c)})};vm.prototype.mkdir=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress){if(g.isFile())throw Error("Cannot mkdir on a file: "+g.path());return c.yield(Qf.mkdirP(g.path()),2)}return c.return(g)})};vm.prototype.exists=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return c.return(g.isRoot()?!0:Qf.existsP(g.path()))})};vm.prototype.dirList=
function(g,c){g=void 0===g?1:g;c=void 0===c?{}:c;var h=this,f,m,n,a,d,k,b,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:if("number"!==typeof g&&"infinity"!==g)throw Error("dirList \u2013 invalid depth argument: "+g);f=c;m=f.exclude;0>=g&&(g=1);if(1!==g){z.jumpTo(2);break}n=[];a=$jscomp;d=a.makeIterator;return z.yield(Qf.readdirP(h.path()),3);case 3:k=d.call(a,z.yieldResult),b=k.next();case 4:if(b.done){z.jumpTo(6);break}e=b.value;l=h.join(e);
return z.yield(l.stat(),7);case 7:p=z.yieldResult;l=p.isDirectory()?l.asDirectory():l;l._assignPropsFromStat(p);n.push(l);b=k.next();z.jumpTo(4);break;case 6:return m&&(n=Qf.applyExclude(m,n)),z.return(n);case 2:return z.yield(h.dirList(1,c),8);case 8:return u=z.yieldResult,x=u.filter(function(E){return E.isDirectory()}),z.return(Promise.all(x.map(function(E){return E.dirList("number"===typeof g?g-1:g,c)})).then(function(E){return E.reduce(function(G,J){return G.concat(J)},u)}))}})};vm.prototype.isEmptyDirectory=
function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?c.yield(g.dirList(),2):c.return(0===c.yieldResult.length)})};vm.prototype.rename=function(g){var c=this,h,f,m,n,a,d,k,b,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:if(!(g instanceof c.constructor))return z.return(Qf.Resource.prototype.rename.call(c,g));if(c.isFile()){g=g.asFile();Qf.renameP(c.path(),g.path());z.jumpTo(2);break}g=g.asDirectory();
return z.yield(g.ensureExistance(),3);case 3:return h=[],f=[],m=$jscomp,n=m.makeIterator,z.yield(c.dirList("infinity"),4);case 4:a=n.call(m,z.yieldResult);for(d=a.next();!d.done;d=a.next())k=d.value,k.isDirectory()?f.push(k):h.push(k);b=$jscomp.makeIterator(f);e=b.next();case 5:if(e.done){z.jumpTo(7);break}l=e.value;return z.yield(g.join(l.relativePathFrom(c)).ensureExistance(),6);case 6:e=b.next();z.jumpTo(5);break;case 7:p=$jscomp.makeIterator(h),u=p.next();case 9:if(u.done)return z.yield(c.remove(),
2);x=u.value;return z.yield(x.rename(g.join(x.relativePathFrom(c))),10);case 10:u=p.next();z.jumpTo(9);break;case 2:return z.return(g)}})};vm.prototype.remove=function(){var g=this,c,h,f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return a.yield(g.exists(),2);case 2:if(!a.yieldResult){a.jumpTo(3);break}return g.isDirectory()?(c=$jscomp,h=c.makeIterator,a.yield(g.dirList(),7)):a.yield(Qf.unlinkP(g.path()),3);case 7:f=h.call(c,a.yieldResult),m=f.next();
case 8:if(m.done)return a.yield(Qf.rmdirP(g.path()),3);n=m.value;return a.yield(n.remove(),9);case 9:m=f.next();a.jumpTo(8);break;case 3:return a.return(g)}})};vm.prototype.readProperties=function(){var g=this,c,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(c=g,h=c._assignPropsFromStat,f.yield(g.stat(),2)):f.return(h.call(c,f.yieldResult))})};vm.prototype.copyTo=function(g,c){c=void 0===c?!0:c;var h=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return h.isFile()&&
(f=g.isFile()?g:g.join(h.name()),f.isHTTPResource)?m.return(f._copyFrom_file_nodejs_fs(h,c=!0)):m.return(Qf.Resource.prototype.copyTo.call(h,g,c))})};vm.prototype._assignPropsFromStat=function(g){return this.assignProperties({lastModified:g.mtime,created:g.ctime,size:g.size,type:g.isDirectory()?"directory":"file",isLink:g.isSymbolicLink()})};vm.prototype._createWriteStream=function(){return Qf.createWriteStream(this.path())};vm.prototype._createReadStream=function(){return Qf.createReadStream(this.path())};
$jscomp.global.Object.defineProperties(vm.prototype,{isNodeJSFileResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});Qf.NodeJSFileResource=vm;var mE=function(g,c){"file:///"!==g.slice(0,8)&&"file://"===g.slice(0,7)&&(g="file:///"+g.slice(7));g.includes("\\")&&(g=g.replace(/\\/g,"/"));return Qf.NodeJSFileResource.call(this,g,c)||this};$jscomp.inherits(mE,Qf.NodeJSFileResource);mE.prototype.path=function(){return this.url.replace("file:///","")};mE.prototype.isRoot=function(){return!!this.path().match(Qf.windowsRootPathRe)};
mE.prototype.root=function(){if(this.isRoot())return this;console.log(this.url);var g=this.url.match(Qf.windowsURLPrefixRe);if(g)return this.newResource(g[0]);throw Error("Could not determine root path of windows file resource for url "+this.url);};Qf.NodeJSWindowsFileResource=mE;var NL={name:"nodejs-file-resource",matches:function(g){return g.startsWith("file:")},resourceClass:"undefined"!==typeof Qf.process&&"win32"===Qf.process.platform?Qf.NodeJSWindowsFileResource:Qf.NodeJSFileResource};Qf.resourceExtension=
NL;Qf.resourceExtension=NL;Qf.resourceExtension=NL;var Hk=lively.FreezerRuntime.recorderFor("lively.resources/src/local-resource.js");Hk.applyExclude=function(g,c){return c?"string"===typeof c?!g.url.includes(c):"function"===typeof c?!c(g):c instanceof RegExp?!c.test(g.url):!0:!0};Hk.Resource=Cg;Hk.createFiles=se;Hk.debug=!1;Hk.slashRe=/\//g;var xp=function(g,c){c=void 0===c?{}:c;if(!g||"string"!==typeof g)throw Error("LocalResourceInMemoryBackend needs name!");this.name=g;this._filespec=c};xp.removeHost=
function(g){delete this.hosts[g]};xp.ensure=function(g,c){var h=this;c=void 0===c?{}:c;var f=this.named(c.host);return Promise.resolve().then(function(){return g?Hk.createFiles("local://"+f.name,g):null}).then(function(){return h})};xp.named=function(g){g||(g="default");return this.hosts[g]||(this.hosts[g]=new this(g))};xp.prototype.get=function(g){return this._filespec[g]};xp.prototype.set=function(g,c){this._filespec[g]=c};xp.prototype.write=function(g,c){var h=this._filespec[g];h||(h=this._filespec[g]=
{created:new Date});h.content=c;h.isDirectory=!1;h.lastModified=new Date};xp.prototype.read=function(g){return(g=this._filespec[g])&&g.content?g.content:""};xp.prototype.mkdir=function(g){var c=this._filespec[g];c&&c.isDirectory||(c||(c=this._filespec[g]={created:new Date}),c.content&&delete c.content,c.isDirectory=!0,c.lastModified=new Date)};xp.prototype.partialFilespec=function(g,c){g=void 0===g?"/":g;c=void 0===c?Infinity:c;for(var h={},f=this.filespec,m=Object.keys(f),n=0;n<m.length;n++){var a=
m[n];if(a.startsWith(g)&&g!==a){var d=a.slice(g.length);(d.includes("/")?d.match(Hk.slashRe).length+1:1)>c||(h[a]=f[a])}}return h};$jscomp.global.Object.defineProperties(xp.prototype,{filespec:{configurable:!0,enumerable:!0,get:function(){return this._filespec},set:function(g){this._filespec=g}}});$jscomp.global.Object.defineProperties(xp,{hosts:{configurable:!0,enumerable:!0,get:function(){return this._hosts||(this._hosts={})}}});Hk.LocalResourceInMemoryBackend=xp;var qq=function(){return Hk.Resource.apply(this,
arguments)||this};$jscomp.inherits(qq,Hk.Resource);qq.prototype.read=function(){return Promise.resolve(this.localBackend.read(this.path()))};qq.prototype.write=function(g){Hk.debug&&console.log("["+this+"] write");if(this.isDirectory())throw Error("Cannot write into a directory! ("+this.url+")");var c=this.localBackend.get(this.path());if(c&&c.isDirectory)throw Error(this.url+" already exists and is a directory (cannot write into it!)");this.localBackend.write(this.path(),g);return Promise.resolve(this)};
qq.prototype.mkdir=function(){Hk.debug&&console.log("["+this+"] mkdir");if(!this.isDirectory())throw Error("Cannot mkdir a file! ("+this.url+")");var g=this.localBackend.get(this.path());if(g&&g.isDirectory)return Promise.resolve(this);if(g&&!g.isDirectory)throw Error(this.url+" already exists and is a file (cannot mkdir it!)");this.localBackend.mkdir(this.path());return Promise.resolve(this)};qq.prototype.exists=function(){Hk.debug&&console.log("["+this+"] exists");return Promise.resolve(this.isRoot()||
this.path()in this.localBackend.filespec)};qq.prototype.remove=function(){var g=this;Hk.debug&&console.log("["+this+"] remove");var c=this.path();Object.keys(this.localBackend.filespec).forEach(function(h){return h.startsWith(c)&&delete g.localBackend.filespec[h]});return Promise.resolve(this)};qq.prototype.readProperties=function(){Hk.debug&&console.log("["+this+"] readProperties");throw Error("not yet implemented");};qq.prototype.dirList=function(g,c){g=void 0===g?1:g;c=void 0===c?{}:c;Hk.debug&&
console.log("["+this+"] dirList");if(!this.isDirectory())return this.asDirectory().dirList(g,c);c=c.exclude;var h=this.path(),f=[],m=Object.keys(this.localBackend.filespec);"infinity"===g&&(g=Infinity);for(var n={},a=0;a<m.length;n={$jscomp$loop$prop$dirToChild$2699:n.$jscomp$loop$prop$dirToChild$2699},a++){var d=m[a];d.startsWith(h)&&h!==d&&(d=d.slice(h.length),(d.includes("/")?d.match(Hk.slashRe).length+1:1)>g?(n.$jscomp$loop$prop$dirToChild$2699=this.join(d.split("/").slice(0,g).join("/")+"/"),
f.some(function(k){return function(b){return b.equals(k.$jscomp$loop$prop$dirToChild$2699)}}(n))||f.push(n.$jscomp$loop$prop$dirToChild$2699)):(d=this.join(d),c&&!Hk.applyExclude(d,c)||f.push(d)))}return Promise.resolve(f)};$jscomp.global.Object.defineProperties(qq.prototype,{localBackend:{configurable:!0,enumerable:!0,get:function(){return Hk.LocalResourceInMemoryBackend.named(this.host())}}});Hk.LocalResource=qq;var OL={name:"local-resource",matches:function(g){return g.startsWith("local:")},resourceClass:Hk.LocalResource};
Hk.resourceExtension=OL;Hk.resourceExtension=OL;Hk.resourceExtension=OL;Hk.default=qq;var Oh=lively.FreezerRuntime.recorderFor("lively.resources/index.js");Oh.createFileSpec=hz;Oh.importModuleViaNative=gw;Oh.loadViaScript=os;Oh.ensureFetch=Jt;Oh.default=Cg;Oh.Resource=Cg;Oh.unregisterExtension=ne;Oh.registerExtension=xe;Oh.parseQuery=Kb;Oh.extensions=kx;Oh.createFiles=se;Oh.resource=hd;Oh.httpResourceExtension=ML;Oh.fileResourceExtension=NL;Oh.localResourceExtension=OL;Oh.newUUID=tj;Oh.waitFor=Jv;
Oh.registerExtension(Oh.localResourceExtension);Oh.registerExtension(Oh.httpResourceExtension);Oh.registerExtension(Oh.fileResourceExtension);Oh.createFileSpec=hz;Oh.createFileSpec=hz;Oh.importModuleViaNative=gw;Oh.importModuleViaNative=gw;Oh.loadViaScript=os;Oh.loadViaScript=os;Oh.ensureFetch=Jt;Oh.ensureFetch=Jt;Oh.registerExtension=xe;Oh.registerExtension=xe;Oh.unregisterExtension=ne;Oh.unregisterExtension=ne;Oh.parseQuery=Kb;Oh.parseQuery=Kb;Oh.extensions=kx;Oh.extensions=kx;Oh.createFiles=se;
Oh.createFiles=se;Oh.resource=hd;Oh.resource=hd;var sna=Object.freeze({__proto__:null,Resource:Cg,createFileSpec:hz,importModuleViaNative:gw,loadViaScript:os,ensureFetch:Jt,registerExtension:xe,unregisterExtension:ne,parseQuery:Kb,extensions:kx,createFiles:se,resource:hd}),D8=lively.FreezerRuntime.recorderFor("lively.ast/generated/estree-visitor.js"),Ae=function(){};Ae.prototype.accept=function(g,c,h){if(!g)throw Error("Undefined AST node in Visitor.accept:\n  "+h.join(".")+"\n  "+g);if(!g.type)throw Error("Strangee AST node without type in Visitor.accept:\n  "+
h.join(".")+"\n  "+JSON.stringify(g));switch(g.type){case "Node":return this.visitNode(g,c,h);case "SourceLocation":return this.visitSourceLocation(g,c,h);case "Position":return this.visitPosition(g,c,h);case "Program":return this.visitProgram(g,c,h);case "Function":return this.visitFunction(g,c,h);case "Statement":return this.visitStatement(g,c,h);case "Directive":return this.visitDirective(g,c,h);case "SwitchCase":return this.visitSwitchCase(g,c,h);case "CatchClause":return this.visitCatchClause(g,
c,h);case "VariableDeclarator":return this.visitVariableDeclarator(g,c,h);case "Expression":return this.visitExpression(g,c,h);case "Property":return this.visitProperty(g,c,h);case "Pattern":return this.visitPattern(g,c,h);case "Super":return this.visitSuper(g,c,h);case "SpreadElement":return this.visitSpreadElement(g,c,h);case "TemplateElement":return this.visitTemplateElement(g,c,h);case "Class":return this.visitClass(g,c,h);case "ClassBody":return this.visitClassBody(g,c,h);case "MethodDefinition":return this.visitMethodDefinition(g,
c,h);case "ModuleDeclaration":return this.visitModuleDeclaration(g,c,h);case "ModuleSpecifier":return this.visitModuleSpecifier(g,c,h);case "JSXEmptyExpression":return this.visitJSXEmptyExpression(g,c,h);case "JSXExpressionContainer":return this.visitJSXExpressionContainer(g,c,h);case "JSXSpreadChild":return this.visitJSXSpreadChild(g,c,h);case "JSXBoundaryElement":return this.visitJSXBoundaryElement(g,c,h);case "JSXAttribute":return this.visitJSXAttribute(g,c,h);case "JSXText":return this.visitJSXText(g,
c,h);case "JSXOpeningFragment":return this.visitJSXOpeningFragment(g,c,h);case "JSXClosingFragment":return this.visitJSXClosingFragment(g,c,h);case "Identifier":return this.visitIdentifier(g,c,h);case "Literal":return this.visitLiteral(g,c,h);case "ExpressionStatement":return this.visitExpressionStatement(g,c,h);case "BlockStatement":return this.visitBlockStatement(g,c,h);case "EmptyStatement":return this.visitEmptyStatement(g,c,h);case "DebuggerStatement":return this.visitDebuggerStatement(g,c,h);
case "WithStatement":return this.visitWithStatement(g,c,h);case "ReturnStatement":return this.visitReturnStatement(g,c,h);case "LabeledStatement":return this.visitLabeledStatement(g,c,h);case "BreakStatement":return this.visitBreakStatement(g,c,h);case "ContinueStatement":return this.visitContinueStatement(g,c,h);case "IfStatement":return this.visitIfStatement(g,c,h);case "SwitchStatement":return this.visitSwitchStatement(g,c,h);case "ThrowStatement":return this.visitThrowStatement(g,c,h);case "TryStatement":return this.visitTryStatement(g,
c,h);case "WhileStatement":return this.visitWhileStatement(g,c,h);case "DoWhileStatement":return this.visitDoWhileStatement(g,c,h);case "ForStatement":return this.visitForStatement(g,c,h);case "ForInStatement":return this.visitForInStatement(g,c,h);case "Declaration":return this.visitDeclaration(g,c,h);case "ThisExpression":return this.visitThisExpression(g,c,h);case "ArrayExpression":return this.visitArrayExpression(g,c,h);case "ObjectExpression":return this.visitObjectExpression(g,c,h);case "FunctionExpression":return this.visitFunctionExpression(g,
c,h);case "UnaryExpression":return this.visitUnaryExpression(g,c,h);case "UpdateExpression":return this.visitUpdateExpression(g,c,h);case "BinaryExpression":return this.visitBinaryExpression(g,c,h);case "AssignmentExpression":return this.visitAssignmentExpression(g,c,h);case "LogicalExpression":return this.visitLogicalExpression(g,c,h);case "MemberExpression":return this.visitMemberExpression(g,c,h);case "ConditionalExpression":return this.visitConditionalExpression(g,c,h);case "CallExpression":return this.visitCallExpression(g,
c,h);case "NewExpression":return this.visitNewExpression(g,c,h);case "SequenceExpression":return this.visitSequenceExpression(g,c,h);case "ArrowFunctionExpression":return this.visitArrowFunctionExpression(g,c,h);case "YieldExpression":return this.visitYieldExpression(g,c,h);case "TemplateLiteral":return this.visitTemplateLiteral(g,c,h);case "TaggedTemplateExpression":return this.visitTaggedTemplateExpression(g,c,h);case "AssignmentProperty":return this.visitAssignmentProperty(g,c,h);case "ObjectPattern":return this.visitObjectPattern(g,
c,h);case "ArrayPattern":return this.visitArrayPattern(g,c,h);case "RestElement":return this.visitRestElement(g,c,h);case "AssignmentPattern":return this.visitAssignmentPattern(g,c,h);case "ClassExpression":return this.visitClassExpression(g,c,h);case "MetaProperty":return this.visitMetaProperty(g,c,h);case "ImportDeclaration":return this.visitImportDeclaration(g,c,h);case "ImportSpecifier":return this.visitImportSpecifier(g,c,h);case "ImportDefaultSpecifier":return this.visitImportDefaultSpecifier(g,
c,h);case "ImportNamespaceSpecifier":return this.visitImportNamespaceSpecifier(g,c,h);case "ExportNamedDeclaration":return this.visitExportNamedDeclaration(g,c,h);case "ExportSpecifier":return this.visitExportSpecifier(g,c,h);case "AnonymousDefaultExportedFunctionDeclaration":return this.visitAnonymousDefaultExportedFunctionDeclaration(g,c,h);case "AnonymousDefaultExportedClassDeclaration":return this.visitAnonymousDefaultExportedClassDeclaration(g,c,h);case "ExportDefaultDeclaration":return this.visitExportDefaultDeclaration(g,
c,h);case "ExportAllDeclaration":return this.visitExportAllDeclaration(g,c,h);case "AwaitExpression":return this.visitAwaitExpression(g,c,h);case "JSXMemberExpression":return this.visitJSXMemberExpression(g,c,h);case "JSXNamespacedName":return this.visitJSXNamespacedName(g,c,h);case "JSXOpeningElement":return this.visitJSXOpeningElement(g,c,h);case "JSXClosingElement":return this.visitJSXClosingElement(g,c,h);case "JSXSpreadAttribute":return this.visitJSXSpreadAttribute(g,c,h);case "JSXElement":return this.visitJSXElement(g,
c,h);case "JSXFragment":return this.visitJSXFragment(g,c,h);case "ImportExpression":return this.visitImportExpression(g,c,h);case "RegExpLiteral":return this.visitRegExpLiteral(g,c,h);case "FunctionBody":return this.visitFunctionBody(g,c,h);case "FunctionDeclaration":return this.visitFunctionDeclaration(g,c,h);case "VariableDeclaration":return this.visitVariableDeclaration(g,c,h);case "ForOfStatement":return this.visitForOfStatement(g,c,h);case "ClassDeclaration":return this.visitClassDeclaration(g,
c,h);case "JSXIdentifier":return this.visitJSXIdentifier(g,c,h);case "BigIntLiteral":return this.visitBigIntLiteral(g,c,h)}throw Error("No visit function in AST visitor Visitor for:\n  "+h.join(".")+"\n  "+JSON.stringify(g));};Ae.prototype.visitNode=function(g,c,h){return g};Ae.prototype.visitSourceLocation=function(g,c,h){g.start=this.accept(g.start,c,h.concat(["start"]));g.end=this.accept(g.end,c,h.concat(["end"]));return g};Ae.prototype.visitPosition=function(g,c,h){return g};Ae.prototype.visitProgram=
function(g,c,h){for(var f=[],m=0;m<g.body.length;m++){var n=g.body[m];n=n?this.accept(n,c,h.concat(["body",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.body=f;return g};Ae.prototype.visitFunction=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var f=[],m=0;m<g.params.length;m++){var n=g.params[m];n=n?this.accept(n,c,h.concat(["params",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.params=f;g.body=this.accept(g.body,c,h.concat(["body"]));return g};Ae.prototype.visitStatement=
function(g,c,h){return g};Ae.prototype.visitDirective=function(g,c,h){g.expression=this.accept(g.expression,c,h.concat(["expression"]));return g};Ae.prototype.visitSwitchCase=function(g,c,h){g.test&&(g.test=this.accept(g.test,c,h.concat(["test"])));for(var f=[],m=0;m<g.consequent.length;m++){var n=g.consequent[m];n=n?this.accept(n,c,h.concat(["consequent",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.consequent=f;return g};Ae.prototype.visitCatchClause=function(g,c,h){g.param&&(g.param=this.accept(g.param,
c,h.concat(["param"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Ae.prototype.visitVariableDeclarator=function(g,c,h){g.id=this.accept(g.id,c,h.concat(["id"]));g.init&&(g.init=this.accept(g.init,c,h.concat(["init"])));return g};Ae.prototype.visitExpression=function(g,c,h){return g};Ae.prototype.visitProperty=function(g,c,h){g.key=this.accept(g.key,c,h.concat(["key"]));g.value=this.accept(g.value,c,h.concat(["value"]));return g};Ae.prototype.visitPattern=function(g,c,h){return g};
Ae.prototype.visitSuper=function(g,c,h){return g};Ae.prototype.visitSpreadElement=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Ae.prototype.visitTemplateElement=function(g,c,h){return g};Ae.prototype.visitClass=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Ae.prototype.visitClassBody=function(g,c,h){for(var f=
[],m=0;m<g.body.length;m++){var n=g.body[m];n=n?this.accept(n,c,h.concat(["body",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.body=f;return g};Ae.prototype.visitMethodDefinition=function(g,c,h){g.key=this.accept(g.key,c,h.concat(["key"]));g.value=this.accept(g.value,c,h.concat(["value"]));return g};Ae.prototype.visitModuleDeclaration=function(g,c,h){return g};Ae.prototype.visitModuleSpecifier=function(g,c,h){g.local=this.accept(g.local,c,h.concat(["local"]));return g};Ae.prototype.visitJSXEmptyExpression=
function(g,c,h){return g};Ae.prototype.visitJSXExpressionContainer=function(g,c,h){g.expression=this.accept(g.expression,c,h.concat(["expression"]));return g};Ae.prototype.visitJSXSpreadChild=function(g,c,h){g.expression=this.accept(g.expression,c,h.concat(["expression"]));return g};Ae.prototype.visitJSXBoundaryElement=function(g,c,h){g.name=this.accept(g.name,c,h.concat(["name"]));return g};Ae.prototype.visitJSXAttribute=function(g,c,h){g.name=this.accept(g.name,c,h.concat(["name"]));g.value&&(g.value=
this.accept(g.value,c,h.concat(["value"])));return g};Ae.prototype.visitJSXText=function(g,c,h){return g};Ae.prototype.visitJSXOpeningFragment=function(g,c,h){return g};Ae.prototype.visitJSXClosingFragment=function(g,c,h){return g};Ae.prototype.visitIdentifier=function(g,c,h){return g};Ae.prototype.visitLiteral=function(g,c,h){return g};Ae.prototype.visitExpressionStatement=function(g,c,h){g.expression=this.accept(g.expression,c,h.concat(["expression"]));return g};Ae.prototype.visitBlockStatement=
function(g,c,h){for(var f=[],m=0;m<g.body.length;m++){var n=g.body[m];n=n?this.accept(n,c,h.concat(["body",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.body=f;return g};Ae.prototype.visitEmptyStatement=function(g,c,h){return g};Ae.prototype.visitDebuggerStatement=function(g,c,h){return g};Ae.prototype.visitWithStatement=function(g,c,h){g.object=this.accept(g.object,c,h.concat(["object"]));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Ae.prototype.visitReturnStatement=function(g,
c,h){g.argument&&(g.argument=this.accept(g.argument,c,h.concat(["argument"])));return g};Ae.prototype.visitLabeledStatement=function(g,c,h){g.label=this.accept(g.label,c,h.concat(["label"]));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Ae.prototype.visitBreakStatement=function(g,c,h){g.label&&(g.label=this.accept(g.label,c,h.concat(["label"])));return g};Ae.prototype.visitContinueStatement=function(g,c,h){g.label&&(g.label=this.accept(g.label,c,h.concat(["label"])));return g};Ae.prototype.visitIfStatement=
function(g,c,h){g.test=this.accept(g.test,c,h.concat(["test"]));g.consequent=this.accept(g.consequent,c,h.concat(["consequent"]));g.alternate&&(g.alternate=this.accept(g.alternate,c,h.concat(["alternate"])));return g};Ae.prototype.visitSwitchStatement=function(g,c,h){g.discriminant=this.accept(g.discriminant,c,h.concat(["discriminant"]));for(var f=[],m=0;m<g.cases.length;m++){var n=g.cases[m];n=n?this.accept(n,c,h.concat(["cases",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.cases=f;return g};
Ae.prototype.visitThrowStatement=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Ae.prototype.visitTryStatement=function(g,c,h){g.block=this.accept(g.block,c,h.concat(["block"]));g.handler&&(g.handler=this.accept(g.handler,c,h.concat(["handler"])));g.finalizer&&(g.finalizer=this.accept(g.finalizer,c,h.concat(["finalizer"])));return g};Ae.prototype.visitWhileStatement=function(g,c,h){g.test=this.accept(g.test,c,h.concat(["test"]));g.body=this.accept(g.body,c,h.concat(["body"]));
return g};Ae.prototype.visitDoWhileStatement=function(g,c,h){g.body=this.accept(g.body,c,h.concat(["body"]));g.test=this.accept(g.test,c,h.concat(["test"]));return g};Ae.prototype.visitForStatement=function(g,c,h){g.init&&(g.init=this.accept(g.init,c,h.concat(["init"])));g.test&&(g.test=this.accept(g.test,c,h.concat(["test"])));g.update&&(g.update=this.accept(g.update,c,h.concat(["update"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Ae.prototype.visitForInStatement=function(g,c,h){g.left=
this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Ae.prototype.visitDeclaration=function(g,c,h){return g};Ae.prototype.visitThisExpression=function(g,c,h){return g};Ae.prototype.visitArrayExpression=function(g,c,h){if(g.elements){for(var f=[],m=0;m<g.elements.length;m++){var n=g.elements[m];n=n?this.accept(n,c,h.concat(["elements",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.elements=f}return g};
Ae.prototype.visitObjectExpression=function(g,c,h){for(var f=[],m=0;m<g.properties.length;m++){var n=g.properties[m];n=n?this.accept(n,c,h.concat(["properties",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.properties=f;return g};Ae.prototype.visitFunctionExpression=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var f=[],m=0;m<g.params.length;m++){var n=g.params[m];n=n?this.accept(n,c,h.concat(["params",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.params=f;g.body=
this.accept(g.body,c,h.concat(["body"]));return g};Ae.prototype.visitUnaryExpression=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Ae.prototype.visitUpdateExpression=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Ae.prototype.visitBinaryExpression=function(g,c,h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));return g};Ae.prototype.visitAssignmentExpression=function(g,
c,h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));return g};Ae.prototype.visitLogicalExpression=function(g,c,h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));return g};Ae.prototype.visitMemberExpression=function(g,c,h){g.object=this.accept(g.object,c,h.concat(["object"]));g.property=this.accept(g.property,c,h.concat(["property"]));return g};Ae.prototype.visitConditionalExpression=function(g,
c,h){g.test=this.accept(g.test,c,h.concat(["test"]));g.alternate=this.accept(g.alternate,c,h.concat(["alternate"]));g.consequent=this.accept(g.consequent,c,h.concat(["consequent"]));return g};Ae.prototype.visitCallExpression=function(g,c,h){g.callee=this.accept(g.callee,c,h.concat(["callee"]));for(var f=[],m=0;m<g.arguments.length;m++){var n=g.arguments[m];n=n?this.accept(n,c,h.concat(["arguments",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.arguments=f;return g};Ae.prototype.visitNewExpression=
function(g,c,h){g.callee=this.accept(g.callee,c,h.concat(["callee"]));for(var f=[],m=0;m<g.arguments.length;m++){var n=g.arguments[m];n=n?this.accept(n,c,h.concat(["arguments",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.arguments=f;return g};Ae.prototype.visitSequenceExpression=function(g,c,h){for(var f=[],m=0;m<g.expressions.length;m++){var n=g.expressions[m];n=n?this.accept(n,c,h.concat(["expressions",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.expressions=f;return g};Ae.prototype.visitArrowFunctionExpression=
function(g,c,h){g.body=this.accept(g.body,c,h.concat(["body"]));g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var f=[],m=0;m<g.params.length;m++){var n=g.params[m];n=n?this.accept(n,c,h.concat(["params",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.params=f;return g};Ae.prototype.visitYieldExpression=function(g,c,h){g.argument&&(g.argument=this.accept(g.argument,c,h.concat(["argument"])));return g};Ae.prototype.visitTemplateLiteral=function(g,c,h){for(var f=[],m=0;m<g.quasis.length;m++){var n=
g.quasis[m];n=n?this.accept(n,c,h.concat(["quasis",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.quasis=f;f=[];for(m=0;m<g.expressions.length;m++)n=(n=g.expressions[m])?this.accept(n,c,h.concat(["expressions",m])):n,Array.isArray(n)?f.push.apply(f,n):f.push(n);g.expressions=f;return g};Ae.prototype.visitTaggedTemplateExpression=function(g,c,h){g.tag=this.accept(g.tag,c,h.concat(["tag"]));g.quasi=this.accept(g.quasi,c,h.concat(["quasi"]));return g};Ae.prototype.visitAssignmentProperty=function(g,
c,h){g.value=this.accept(g.value,c,h.concat(["value"]));g.key=this.accept(g.key,c,h.concat(["key"]));return g};Ae.prototype.visitObjectPattern=function(g,c,h){for(var f=[],m=0;m<g.properties.length;m++){var n=g.properties[m];n=n?this.accept(n,c,h.concat(["properties",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.properties=f;return g};Ae.prototype.visitArrayPattern=function(g,c,h){if(g.elements){for(var f=[],m=0;m<g.elements.length;m++){var n=g.elements[m];n=n?this.accept(n,c,h.concat(["elements",
m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.elements=f}return g};Ae.prototype.visitRestElement=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Ae.prototype.visitAssignmentPattern=function(g,c,h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));return g};Ae.prototype.visitClassExpression=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,
c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Ae.prototype.visitMetaProperty=function(g,c,h){g.meta=this.accept(g.meta,c,h.concat(["meta"]));g.property=this.accept(g.property,c,h.concat(["property"]));return g};Ae.prototype.visitImportDeclaration=function(g,c,h){for(var f=[],m=0;m<g.specifiers.length;m++){var n=g.specifiers[m];n=n?this.accept(n,c,h.concat(["specifiers",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.specifiers=f;g.source=this.accept(g.source,
c,h.concat(["source"]));return g};Ae.prototype.visitImportSpecifier=function(g,c,h){g.imported=this.accept(g.imported,c,h.concat(["imported"]));g.local=this.accept(g.local,c,h.concat(["local"]));return g};Ae.prototype.visitImportDefaultSpecifier=function(g,c,h){g.local=this.accept(g.local,c,h.concat(["local"]));return g};Ae.prototype.visitImportNamespaceSpecifier=function(g,c,h){g.local=this.accept(g.local,c,h.concat(["local"]));return g};Ae.prototype.visitExportNamedDeclaration=function(g,c,h){g.declaration&&
(g.declaration=this.accept(g.declaration,c,h.concat(["declaration"])));for(var f=[],m=0;m<g.specifiers.length;m++){var n=g.specifiers[m];n=n?this.accept(n,c,h.concat(["specifiers",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.specifiers=f;g.source&&(g.source=this.accept(g.source,c,h.concat(["source"])));return g};Ae.prototype.visitExportSpecifier=function(g,c,h){g.exported=this.accept(g.exported,c,h.concat(["exported"]));g.local=this.accept(g.local,c,h.concat(["local"]));return g};Ae.prototype.visitAnonymousDefaultExportedFunctionDeclaration=
function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var f=[],m=0;m<g.params.length;m++){var n=g.params[m];n=n?this.accept(n,c,h.concat(["params",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.params=f;g.body=this.accept(g.body,c,h.concat(["body"]));return g};Ae.prototype.visitAnonymousDefaultExportedClassDeclaration=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,
c,h.concat(["body"]));return g};Ae.prototype.visitExportDefaultDeclaration=function(g,c,h){g.declaration=this.accept(g.declaration,c,h.concat(["declaration"]));return g};Ae.prototype.visitExportAllDeclaration=function(g,c,h){g.source=this.accept(g.source,c,h.concat(["source"]));return g};Ae.prototype.visitAwaitExpression=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Ae.prototype.visitJSXMemberExpression=function(g,c,h){g.object=this.accept(g.object,c,h.concat(["object"]));
g.property=this.accept(g.property,c,h.concat(["property"]));return g};Ae.prototype.visitJSXNamespacedName=function(g,c,h){g.namespace=this.accept(g.namespace,c,h.concat(["namespace"]));g.name=this.accept(g.name,c,h.concat(["name"]));return g};Ae.prototype.visitJSXOpeningElement=function(g,c,h){for(var f=[],m=0;m<g.attributes.length;m++){var n=g.attributes[m];n=n?this.accept(n,c,h.concat(["attributes",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.attributes=f;g.name=this.accept(g.name,c,h.concat(["name"]));
return g};Ae.prototype.visitJSXClosingElement=function(g,c,h){g.name=this.accept(g.name,c,h.concat(["name"]));return g};Ae.prototype.visitJSXSpreadAttribute=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Ae.prototype.visitJSXElement=function(g,c,h){g.openingElement=this.accept(g.openingElement,c,h.concat(["openingElement"]));for(var f=[],m=0;m<g.children.length;m++){var n=g.children[m];n=n?this.accept(n,c,h.concat(["children",m])):n;Array.isArray(n)?f.push.apply(f,
n):f.push(n)}g.children=f;g.closingElement&&(g.closingElement=this.accept(g.closingElement,c,h.concat(["closingElement"])));return g};Ae.prototype.visitJSXFragment=function(g,c,h){g.openingFragment=this.accept(g.openingFragment,c,h.concat(["openingFragment"]));for(var f=[],m=0;m<g.children.length;m++){var n=g.children[m];n=n?this.accept(n,c,h.concat(["children",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.children=f;g.closingFragment=this.accept(g.closingFragment,c,h.concat(["closingFragment"]));
return g};Ae.prototype.visitImportExpression=function(g,c,h){g.source=this.accept(g.source,c,h.concat(["source"]));return g};Ae.prototype.visitRegExpLiteral=function(g,c,h){return g};Ae.prototype.visitFunctionBody=function(g,c,h){for(var f=[],m=0;m<g.body.length;m++){var n=g.body[m];n=n?this.accept(n,c,h.concat(["body",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.body=f;return g};Ae.prototype.visitFunctionDeclaration=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var f=
[],m=0;m<g.params.length;m++){var n=g.params[m];n=n?this.accept(n,c,h.concat(["params",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.params=f;g.body=this.accept(g.body,c,h.concat(["body"]));return g};Ae.prototype.visitVariableDeclaration=function(g,c,h){for(var f=[],m=0;m<g.declarations.length;m++){var n=g.declarations[m];n=n?this.accept(n,c,h.concat(["declarations",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.declarations=f;return g};Ae.prototype.visitForOfStatement=function(g,c,
h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Ae.prototype.visitClassDeclaration=function(g,c,h){g.id=this.accept(g.id,c,h.concat(["id"]));g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Ae.prototype.visitJSXIdentifier=function(g,c,h){return g};Ae.prototype.visitBigIntLiteral=function(g,c,h){return g};
Ma("bP",Ae);D8.Visitor=Ae;D8.default=Ae;var Jh=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitors.js");Jh.obj=eg;Jh.Path=Qh;Jh.Visitor=Ae;var GA=function(){return Jh.Visitor.apply(this,arguments)||this};$jscomp.inherits(GA,Jh.Visitor);GA.prototype.accept=function(g,c,h){var f=h.map(function(n){return"string"===typeof n?"."+n:"["+n+"]"}).join(""),m=[];h=Jh.Visitor.prototype.accept.call(this,g,{index:c.index,tree:m},h);c.tree.push({node:g,path:f,index:c.index++,children:m});return h};
Jh.PrinterVisitor=GA;var wk=function(){return Jh.Visitor.apply(this,arguments)||this};$jscomp.inherits(wk,Jh.Visitor);wk.prototype.recordNotEqual=function(g,c,h,f){h.comparisons.errors.push({node1:g,node2:c,path:h.completePath,msg:f})};wk.prototype.compareType=function(g,c,h){return this.compareField("type",g,c,h)};wk.prototype.compareField=function(g,c,h,f){h=Jh.Path(f.completePath.join(".")).get(h);if(c&&h&&c[g]===h[g]||c&&"*"===c[g]||h&&"*"===h[g])return!0;var m=f.completePath.join(".")+"."+g;
this.recordNotEqual(c,h,f,c?h?m+" is not equal: "+c[g]+" vs. "+h[g]:"node2 not defined but node1 ("+m+") is: "+c[g]:"node1 on "+m+" not defined");return!1};wk.prototype.accept=function(g,c,h,f){var m=Jh.Path(f.join(".")).get(c);if("*"!==g&&"*"!==m&&(h={completePath:f,comparisons:h.comparisons},this.compareType(g,c,h)))this["visit"+g.type](g,c,h,f)};wk.prototype.visitFunction=function(g,c,h,f){g.generator&&this.compareField("generator",g,c,h);g.expression&&this.compareField("expression",g,c,h);return Jh.Visitor.prototype.visitFunction.call(this,
g,c,h,f)};wk.prototype.visitSwitchStatement=function(g,c,h,f){g.lexical&&this.compareField("lexical",g,c,h);return Jh.Visitor.prototype.visitSwitchStatement.call(this,g,c,h,f)};wk.prototype.visitForInStatement=function(g,c,h,f){g.each&&this.compareField("each",g,c,h);return Jh.Visitor.prototype.visitForInStatement.call(this,g,c,h,f)};wk.prototype.visitFunctionDeclaration=function(g,c,h,f){g.generator&&this.compareField("generator",g,c,h);g.expression&&this.compareField("expression",g,c,h);return Jh.Visitor.prototype.visitFunctionDeclaration.call(this,
g,c,h,f)};wk.prototype.visitVariableDeclaration=function(g,c,h,f){this.compareField("kind",g,c,h);return Jh.Visitor.prototype.visitVariableDeclaration.call(this,g,c,h,f)};wk.prototype.visitUnaryExpression=function(g,c,h,f){this.compareField("operator",g,c,h);g.prefix&&this.compareField("prefix",g,c,h);return Jh.Visitor.prototype.visitUnaryExpression.call(this,g,c,h,f)};wk.prototype.visitBinaryExpression=function(g,c,h,f){this.compareField("operator",g,c,h);return Jh.Visitor.prototype.visitBinaryExpression.call(this,
g,c,h,f)};wk.prototype.visitAssignmentExpression=function(g,c,h,f){this.compareField("operator",g,c,h);return Jh.Visitor.prototype.visitAssignmentExpression.call(this,g,c,h,f)};wk.prototype.visitUpdateExpression=function(g,c,h,f){this.compareField("operator",g,c,h);g.prefix&&this.compareField("prefix",g,c,h);return Jh.Visitor.prototype.visitUpdateExpression.call(this,g,c,h,f)};wk.prototype.visitLogicalExpression=function(g,c,h,f){this.compareField("operator",g,c,h);return Jh.Visitor.prototype.visitLogicalExpression.call(this,
g,c,h,f)};wk.prototype.visitMemberExpression=function(g,c,h,f){g.computed&&this.compareField("computed",g,c,h);return Jh.Visitor.prototype.visitMemberExpression.call(this,g,c,h,f)};wk.prototype.visitComprehensionBlock=function(g,c,h,f){g.each&&this.compareField("each",g,c,h);return Jh.Visitor.prototype.visitComprehensionBlock.call(this,g,c,h,f)};wk.prototype.visitIdentifier=function(g,c,h,f){this.compareField("name",g,c,h);return Jh.Visitor.prototype.visitIdentifier.call(this,g,c,h,f)};wk.prototype.visitLiteral=
function(g,c,h,f){this.compareField("value",g,c,h);return Jh.Visitor.prototype.visitLiteral.call(this,g,c,h,f)};wk.prototype.visitClassDeclaration=function(g,c,h,f){this.compareField("id",g,c,h);g.superClass&&this.compareField("superClass",g,c,h);this.compareField("body",g,c,h);return Jh.Visitor.prototype.visitClassDeclaration.call(this,g,c,h,f)};wk.prototype.visitClassBody=function(g,c,h,f){this.compareField("body",g,c,h);return Jh.Visitor.prototype.visitClassBody.call(this,g,c,h,f)};wk.prototype.visitMethodDefinition=
function(g,c,h,f){this.compareField("static",g,c,h);this.compareField("computed",g,c,h);this.compareField("kind",g,c,h);this.compareField("key",g,c,h);this.compareField("value",g,c,h);return Jh.Visitor.prototype.visitMethodDefinition.call(this,g,c,h,f)};Jh.ComparisonVisitor=wk;var Ij=function(){return Jh.Visitor.apply(this,arguments)||this};$jscomp.inherits(Ij,Jh.Visitor);Ij.prototype.newScope=function(g,c){g={node:g,varDecls:[],varDeclPaths:[],funcDecls:[],funcDeclPaths:[],classDecls:[],classDeclPaths:[],
classExprs:[],classExprPaths:[],methodDecls:[],methodDeclPaths:[],importSpecifiers:[],importSpecifierPaths:[],exportDecls:[],exportDeclPaths:[],refs:[],thisRefs:[],params:[],catches:[],subScopes:[],resolvedRefMap:new Map};c&&c.subScopes.push(g);return g};Ij.prototype.visitVariableDeclaration=function(g,c,h){c.varDecls.push(g);c.varDeclPaths.push(h);return Jh.Visitor.prototype.visitVariableDeclaration.call(this,g,c,h)};Ij.prototype.visitVariableDeclarator=function(g,c,h){g.init&&(g.init=this.accept(g.init,
c,h.concat(["init"])));return g};Ij.prototype.visitFunction=function(g,c,h){var f=this,m=this.newScope(g,c);g.params.forEach(function(n,a){"AssignmentPattern"===n.type&&f.accept(n.right,m,h.concat("params",a,"right"))});m.params=Array.prototype.slice.call(g.params);return m};Ij.prototype.visitFunctionDeclaration=function(g,c,h){var f=this.visitFunction(g,c,h);c.funcDecls.push(g);c.funcDeclPaths.push(h);var m=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,a,d){a=m.accept(a,f,h.concat(["defaults",
d]));Array.isArray(a)?n.push.apply(n,a):n.push(a);return n},[]));g.rest&&(g.rest=m.accept(g.rest,f,h.concat(["rest"])));g.body=m.accept(g.body,f,h.concat(["body"]));g.loc&&(g.loc=m.accept(g.loc,f,h.concat(["loc"])));return g};Ij.prototype.visitFunctionExpression=function(g,c,h){var f=this.visitFunction(g,c,h),m=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,a,d){a=m.accept(a,f,h.concat(["defaults",d]));Array.isArray(a)?n.push.apply(n,a):n.push(a);return n},[]));g.rest&&(g.rest=m.accept(g.rest,
f,h.concat(["rest"])));g.body=m.accept(g.body,f,h.concat(["body"]));g.loc&&(g.loc=m.accept(g.loc,f,h.concat(["loc"])));return g};Ij.prototype.visitArrowFunctionExpression=function(g,c,h){var f=this.visitFunction(g,c,h),m=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,a,d){a=m.accept(a,f,h.concat(["defaults",d]));Array.isArray(a)?n.push.apply(n,a):n.push(a);return n},[]));g.rest&&(g.rest=m.accept(g.rest,f,h.concat(["rest"])));g.body=m.accept(g.body,f,h.concat(["body"]));g.loc&&(g.loc=m.accept(g.loc,
f,h.concat(["loc"])));return g};Ij.prototype.visitIdentifier=function(g,c,h){c.refs.push(g);return Jh.Visitor.prototype.visitIdentifier.call(this,g,c,h)};Ij.prototype.visitMemberExpression=function(g,c,h){g.object=this.accept(g.object,c,h.concat(["object"]));g.computed&&(g.property=this.accept(g.property,c,h.concat(["property"])));return g};Ij.prototype.visitProperty=function(g,c,h){g.computed&&(g.key=this.accept(g.key,c,h.concat(["key"])));g.value=this.accept(g.value,c,h.concat(["value"]));return g};
Ij.prototype.visitThisExpression=function(g,c,h){c.thisRefs.push(g);return Jh.Visitor.prototype.visitThisExpression.call(this,g,c,h)};Ij.prototype.visitTryStatement=function(g,c,h){g.block=this.accept(g.block,c,h.concat(["block"]));g.handler&&(g.handler=this.accept(g.handler,c,h.concat(["handler"])),c.catches.push(g.handler.param));g.finalizer&&(g.finalizer=this.accept(g.finalizer,c,h.concat(["finalizer"])));return g};Ij.prototype.visitLabeledStatement=function(g,c,h){g.body=this.accept(g.body,c,
h.concat(["body"]));return g};Ij.prototype.visitClassDeclaration=function(g,c,h){c.classDecls.push(g);c.classDeclPaths.push(h);g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Ij.prototype.visitClassExpression=function(g,c,h){g.id&&(c.classExprs.push(g),c.classExprPaths.push(h));g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));
return g};Ij.prototype.visitMethodDefinition=function(g,c,h){g.value=this.accept(g.value,c,h.concat(["value"]));return g};Ij.prototype.visitMetaProperty=function(g,c,h){return g};Ij.prototype.visitBreakStatement=function(g,c,h){return g};Ij.prototype.visitContinueStatement=function(g,c,h){return g};Ij.prototype.visitImportSpecifier=function(g,c,h){c.importSpecifiers.push(g.local);c.importSpecifierPaths.push(h);return g};Ij.prototype.visitImportDefaultSpecifier=function(g,c,h){c.importSpecifiers.push(g.local);
c.importSpecifierPaths.push(h);return g};Ij.prototype.visitImportNamespaceSpecifier=function(g,c,h){c.importSpecifiers.push(g.local);c.importSpecifierPaths.push(h);return g};Ij.prototype.visitExportSpecifier=function(g,c,h){g.local=this.accept(g.local,c,h.concat(["local"]));return g};Ij.prototype.visitExportNamedDeclaration=function(g,c,h){c.exportDecls.push(g);c.exportDeclPaths.push(h);g.source||Jh.Visitor.prototype.visitExportNamedDeclaration.call(this,g,c,h);return g};Ij.prototype.visitExportDefaultDeclaration=
function(g,c,h){c.exportDecls.push(g);c.exportDeclPaths.push(h);return Jh.Visitor.prototype.visitExportDefaultDeclaration.call(this,g,c,h)};Ij.prototype.visitExportAllDeclaration=function(g,c,h){c.exportDecls.push(g);c.exportDeclPaths.push(h);return Jh.Visitor.prototype.visitExportAllDeclaration.call(this,g,c,h)};Jh.ScopeVisitor=Ij;Jh.BaseVisitor=Ae;Jh.Visitor=Ae;Jh.PrinterVisitor=GA;Jh.PrinterVisitor=GA;Jh.ComparisonVisitor=wk;Jh.ComparisonVisitor=wk;Jh.ScopeVisitor=Ij;Jh.ScopeVisitor=Ij;var Kg=
"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,gV={};(function h(c){function f(J){var K={},T;for(T in J)if(J.hasOwnProperty(T)){var P=J[T];K[T]="object"===typeof P&&null!==P?f(P):P}return K}function m(J,K){var T;var P=J.length;for(T=0;P;){var da=P>>>1;var fa=T+da;K(J[fa])?P=da:(T=fa+1,P-=da+1)}return T}function n(J,K){(this||Kg).parent=J;(this||Kg).key=K}function a(J,K,T,P){(this||Kg).node=J;(this||Kg).path=K;(this||Kg).wrap=T;(this||Kg).ref=P}function d(){}function k(J){return null==
J?!1:"object"===typeof J&&"string"===typeof J.type}function b(J,K){for(var T=J.length-1;0<=T;--T)if(J[T].node===K)return!0;return!1}function e(J,K){return(new d).traverse(J,K)}function l(J,K){var T=m(K,function(P){return P.range[0]>J.range[0]});J.extendedRange=[J.range[0],J.range[1]];T!==K.length&&(J.extendedRange[1]=K[T].range[0]);--T;0<=T&&(J.extendedRange[0]=K[T].range[1]);return J}var p={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",
ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",
ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",
ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",
ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};var u={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],
BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],
DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter",
"body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],
ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],
VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};var x={};var z={};var E={};var G={Break:x,Skip:z,Remove:E};n.prototype.replace=function(J){(this||Kg).parent[(this||Kg).key]=J};n.prototype.remove=function(){if(Array.isArray((this||Kg).parent))return(this||Kg).parent.splice((this||Kg).key,1),!0;this.replace(null);return!1};d.prototype.path=function(){function J(za,Ia){if(Array.isArray(Ia))for(T=
0,P=Ia.length;T<P;++T)za.push(Ia[T]);else za.push(Ia)}var K,T,P;if(!(this||Kg).__current.path)return null;var da=[];var fa=2;for(K=(this||Kg).__leavelist.length;fa<K;++fa){var ka=(this||Kg).__leavelist[fa];J(da,ka.path)}J(da,(this||Kg).__current.path);return da};d.prototype.type=function(){return this.current().type||(this||Kg).__current.wrap};d.prototype.parents=function(){var J;var K=[];var T=1;for(J=(this||Kg).__leavelist.length;T<J;++T)K.push((this||Kg).__leavelist[T].node);return K};d.prototype.current=
function(){return(this||Kg).__current.node};d.prototype.__execute=function(J,K){var T=void 0;var P=(this||Kg).__current;(this||Kg).__current=K;(this||Kg).__state=null;J&&(T=J.call(this||Kg,K.node,(this||Kg).__leavelist[(this||Kg).__leavelist.length-1].node));(this||Kg).__current=P;return T};d.prototype.notify=function(J){(this||Kg).__state=J};d.prototype.skip=function(){this.notify(z)};d.prototype["break"]=function(){this.notify(x)};d.prototype.remove=function(){this.notify(E)};d.prototype.__initialize=
function(J,K){(this||Kg).visitor=K;(this||Kg).root=J;(this||Kg).__worklist=[];(this||Kg).__leavelist=[];(this||Kg).__current=null;(this||Kg).__state=null;(this||Kg).__fallback=null;"iteration"===K.fallback?(this||Kg).__fallback=Object.keys:"function"===typeof K.fallback&&((this||Kg).__fallback=K.fallback);(this||Kg).__keys=u;K.keys&&((this||Kg).__keys=Object.assign(Object.create((this||Kg).__keys),K.keys))};d.prototype.traverse=function(J,K){var T,P,da;this.__initialize(J,K);var fa={};var ka=(this||
Kg).__worklist;var za=(this||Kg).__leavelist;ka.push(new a(J,null,null,null));for(za.push(new a(null,null,null,null));ka.length;)if(J=ka.pop(),J===fa){J=za.pop();var Ia=this.__execute(K.leave,J);if((this||Kg).__state===x||Ia===x)break}else if(J.node){Ia=this.__execute(K.enter,J);if((this||Kg).__state===x||Ia===x)break;ka.push(fa);za.push(J);if((this||Kg).__state!==z&&Ia!==z){Ia=J.node;var N=Ia.type||J.wrap;var ia=(this||Kg).__keys[N];if(!ia)if((this||Kg).__fallback)ia=this.__fallback(Ia);else throw Error("Unknown node type "+
N+".");for(T=ia.length;0<=--T;){var W=ia[T];if(da=Ia[W])if(Array.isArray(da))for(P=da.length;0<=--P;){if(da[P]&&!b(za,da[P])){if(N!==p.ObjectExpression&&N!==p.ObjectPattern||"properties"!==ia[T])if(k(da[P]))J=new a(da[P],[W,P],null,null);else continue;else J=new a(da[P],[W,P],"Property",null);ka.push(J)}}else k(da)&&!b(za,da)&&ka.push(new a(da,W,null,null))}}}};d.prototype.replace=function(J,K){function T(la){if(la.ref.remove()){var Aa=la.ref.key;var ib=la.ref.parent;for(la=za.length;la--;){var ob=
za[la];if(ob.ref&&ob.ref.parent===ib){if(ob.ref.key<Aa)break;--ob.ref.key}}}}var P,da,fa;this.__initialize(J,K);var ka={};var za=(this||Kg).__worklist;var Ia=(this||Kg).__leavelist;var N={root:J};var ia=new a(J,null,null,new n(N,"root"));za.push(ia);for(Ia.push(ia);za.length;)if(ia=za.pop(),ia===ka){ia=Ia.pop();var W=this.__execute(K.leave,ia);void 0!==W&&W!==x&&W!==z&&W!==E&&ia.ref.replace(W);(this||Kg).__state!==E&&W!==E||T(ia);if((this||Kg).__state===x||W===x)break}else{W=this.__execute(K.enter,
ia);void 0!==W&&W!==x&&W!==z&&W!==E&&(ia.ref.replace(W),ia.node=W);if((this||Kg).__state===E||W===E)T(ia),ia.node=null;if((this||Kg).__state===x||W===x)break;if(J=ia.node)if(za.push(ka),Ia.push(ia),(this||Kg).__state!==z&&W!==z){W=J.type||ia.wrap;var ca=(this||Kg).__keys[W];if(!ca)if((this||Kg).__fallback)ca=this.__fallback(J);else throw Error("Unknown node type "+W+".");for(P=ca.length;0<=--P;){var sa=ca[P];if(fa=J[sa])if(Array.isArray(fa))for(da=fa.length;0<=--da;){if(fa[da]){if(W!==p.ObjectExpression&&
W!==p.ObjectPattern||"properties"!==ca[P])if(k(fa[da]))ia=new a(fa[da],[sa,da],null,new n(fa,da));else continue;else ia=new a(fa[da],[sa,da],"Property",new n(fa,da));za.push(ia)}}else k(fa)&&za.push(new a(fa,sa,null,new n(J,sa)))}}}return N.root};c.Syntax=p;c.traverse=e;c.replace=function(J,K){return(new d).replace(J,K)};c.attachComments=function(J,K,T){var P=[],da;if(!J.range)throw Error("attachComments needs range information");if(!T.length){if(K.length){var fa=0;for(da=K.length;fa<da;fa+=1)T=f(K[fa]),
T.extendedRange=[0,J.range[0]],P.push(T);J.leadingComments=P}return J}fa=0;for(da=K.length;fa<da;fa+=1)P.push(l(f(K[fa]),T));var ka=0;e(J,{enter:function(za){for(var Ia;ka<P.length;){Ia=P[ka];if(Ia.extendedRange[1]>za.range[0])break;Ia.extendedRange[1]===za.range[0]?(za.leadingComments||(za.leadingComments=[]),za.leadingComments.push(Ia),P.splice(ka,1)):ka+=1}if(ka===P.length)return G.Break;if(P[ka].extendedRange[0]>za.range[1])return G.Skip}});ka=0;e(J,{leave:function(za){for(var Ia;ka<P.length;){Ia=
P[ka];if(za.range[1]<Ia.extendedRange[0])break;za.range[1]===Ia.extendedRange[0]?(za.trailingComments||(za.trailingComments=[]),za.trailingComments.push(Ia),P.splice(ka,1)):ka+=1}if(ka===P.length)return G.Break;if(P[ka].extendedRange[0]>za.range[1])return G.Skip}});return J};c.VisitorKeys=u;c.VisitorOption=G;c.Controller=d;c.cloneEnvironment=function(){return h({})};return c})(gV);var E8={};(function(){function c(f){if(null==f)return!1;switch(f.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "DebuggerStatement":case "DoWhileStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "IfStatement":case "LabeledStatement":case "ReturnStatement":case "SwitchStatement":case "ThrowStatement":case "TryStatement":case "VariableDeclaration":case "WhileStatement":case "WithStatement":return!0}return!1}
function h(f){switch(f.type){case "IfStatement":return null!=f.alternate?f.alternate:f.consequent;case "LabeledStatement":case "ForStatement":case "ForInStatement":case "WhileStatement":case "WithStatement":return f.body}return null}E8={isExpression:function(f){if(null==f)return!1;switch(f.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "ConditionalExpression":case "FunctionExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "NewExpression":case "ObjectExpression":case "SequenceExpression":case "ThisExpression":case "UnaryExpression":case "UpdateExpression":return!0}return!1},
isStatement:c,isIterationStatement:function(f){if(null==f)return!1;switch(f.type){case "DoWhileStatement":case "ForInStatement":case "ForStatement":case "WhileStatement":return!0}return!1},isSourceElement:function(f){return c(f)||null!=f&&"FunctionDeclaration"===f.type},isProblematicIfStatement:function(f){if("IfStatement"!==f.type||null==f.alternate)return!1;f=f.consequent;do{if("IfStatement"===f.type&&null==f.alternate)return!0;f=h(f)}while(f);return!1},trailingStatement:h}})();var tna=E8,F8={};
(function(){function c(e){if(65535>=e)return String.fromCharCode(e);var l=String.fromCharCode(Math.floor((e-65536)/1024)+55296);e=String.fromCharCode((e-65536)%1024+56320);return l+e}var h;var f=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var m=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var n=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/;
var a=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
var d=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];var k=Array(128);for(h=0;128>h;++h)k[h]=97<=h&&122>=h||65<=h&&90>=h||36===h||95===h;var b=Array(128);for(h=0;128>h;++h)b[h]=97<=h&&122>=h||65<=h&&90>=h||48<=h&&57>=h||36===h||95===h;F8={isDecimalDigit:function(e){return 48<=e&&57>=e},isHexDigit:function(e){return 48<=e&&57>=e||97<=e&&102>=e||65<=e&&70>=e},isOctalDigit:function(e){return 48<=e&&55>=e},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===
e||160===e||5760<=e&&0<=d.indexOf(e)},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStartES5:function(e){return 128>e?k[e]:f.test(c(e))},isIdentifierPartES5:function(e){return 128>e?b[e]:m.test(c(e))},isIdentifierStartES6:function(e){return 128>e?k[e]:n.test(c(e))},isIdentifierPartES6:function(e){return 128>e?b[e]:a.test(c(e))}}})();var G8=F8,H8={};(function(){function c(k,b){return b||"yield"!==k?h(k,b):!1}function h(k,b){if(b)a:switch(k){case "implements":case "interface":case "package":case "private":case "protected":case "public":case "static":case "let":b=
!0;break a;default:b=!1}if(b)return!0;switch(k.length){case 2:return"if"===k||"in"===k||"do"===k;case 3:return"var"===k||"for"===k||"new"===k||"try"===k;case 4:return"this"===k||"else"===k||"case"===k||"void"===k||"with"===k||"enum"===k;case 5:return"while"===k||"break"===k||"catch"===k||"throw"===k||"const"===k||"yield"===k||"class"===k||"super"===k;case 6:return"return"===k||"typeof"===k||"delete"===k||"switch"===k||"export"===k||"import"===k;case 7:return"default"===k||"finally"===k||"extends"===
k;case 8:return"function"===k||"continue"===k||"debugger"===k;case 10:return"instanceof"===k;default:return!1}}function f(k,b){return"null"===k||"true"===k||"false"===k||c(k,b)}function m(k,b){return"null"===k||"true"===k||"false"===k||h(k,b)}function n(k){var b;if(0===k.length)return!1;var e=k.charCodeAt(0);if(!d.isIdentifierStartES5(e))return!1;var l=1;for(b=k.length;l<b;++l)if(e=k.charCodeAt(l),!d.isIdentifierPartES5(e))return!1;return!0}function a(k){var b;if(0===k.length)return!1;var e=d.isIdentifierStartES6;
var l=0;for(b=k.length;l<b;++l){var p=k.charCodeAt(l);if(55296<=p&&56319>=p){++l;if(l>=b)return!1;var u=k.charCodeAt(l);if(!(56320<=u&&57343>=u))return!1;p=1024*(p-55296)+(u-56320)+65536}if(!e(p))return!1;e=d.isIdentifierPartES6}return!0}var d=G8;H8={isKeywordES5:c,isKeywordES6:h,isReservedWordES5:f,isReservedWordES6:m,isRestrictedWord:function(k){return"eval"===k||"arguments"===k},isIdentifierNameES5:n,isIdentifierNameES6:a,isIdentifierES5:function(k,b){return n(k)&&!f(k,b)},isIdentifierES6:function(k,
b){return a(k)&&!m(k,b)}}})();var una=H8,nE={};nE.ast=tna;nE.code=G8;nE.keyword=una;var Kl={getArg:function(c,h,f){if(h in c)return c[h];if(3===arguments.length)return f;throw Error('"'+h+'" is a required argument.');}},XZ=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Cfa=/^data:.+,.+$/;Kl.urlParse=hw;Kl.urlGenerate=ja;Kl.normalize=Ba;Kl.join=hb;Kl.isAbsolute=function(c){return"/"===c.charAt(0)||XZ.test(c)};Kl.relative=function(c,h){""===c&&(c=".");c=c.replace(/\/$/,"");for(var f=
0;0!==h.indexOf(c+"/");){var m=c.lastIndexOf("/");if(0>m)return h;c=c.slice(0,m);if(c.match(/^([^\/]+:\/)?\/*$/))return h;++f}return Array(f+1).join("../")+h.substr(c.length+1)};var I8=!("__proto__"in Object.create(null));Kl.toSetString=I8?Eb:kc;Kl.fromSetString=I8?Eb:zc;Kl.compareByOriginalPositions=function(c,h,f){var m=Xe(c.source,h.source);if(0!==m)return m;m=c.originalLine-h.originalLine;if(0!==m)return m;m=c.originalColumn-h.originalColumn;if(0!==m||f)return m;m=c.generatedColumn-h.generatedColumn;
if(0!==m)return m;m=c.generatedLine-h.generatedLine;return 0!==m?m:Xe(c.name,h.name)};Kl.compareByGeneratedPositionsDeflated=function(c,h,f){var m=c.generatedLine-h.generatedLine;if(0!==m)return m;m=c.generatedColumn-h.generatedColumn;if(0!==m||f)return m;m=Xe(c.source,h.source);if(0!==m)return m;m=c.originalLine-h.originalLine;if(0!==m)return m;m=c.originalColumn-h.originalColumn;return 0!==m?m:Xe(c.name,h.name)};Kl.compareByGeneratedPositionsInflated=function(c,h){var f=c.generatedLine-h.generatedLine;
if(0!==f)return f;f=c.generatedColumn-h.generatedColumn;if(0!==f)return f;f=Xe(c.source,h.source);if(0!==f)return f;f=c.originalLine-h.originalLine;if(0!==f)return f;f=c.originalColumn-h.originalColumn;return 0!==f?f:Xe(c.name,h.name)};Kl.parseSourceMapInput=function(c){return JSON.parse(c.replace(/^\)]}'[^\n]*\n/,""))};Kl.computeSourceURL=function(c,h,f){h=h||"";c&&("/"!==c[c.length-1]&&"/"!==h[0]&&(c+="/"),h=c+h);if(f){c=hw(f);if(!c)throw Error("sourceMapURL could not be parsed");c.path&&(f=c.path.lastIndexOf("/"),
0<=f&&(c.path=c.path.substring(0,f+1)));h=hb(ja(c),h)}return Ba(h)};var PL={},J8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");PL.encode=function(c){if(0<=c&&c<J8.length)return J8[c];throw new TypeError("Must be between 0 and 63: "+c);};PL.decode=function(c){return 65<=c&&90>=c?c-65:97<=c&&122>=c?c-97+26:48<=c&&57>=c?c-48+52:43==c?62:47==c?63:-1};var HA={encode:function(c){var h="",f=0>c?(-c<<1)+1:c<<1;do c=f&31,f>>>=5,0<f&&(c|=32),h+=PL.encode(c);while(0<f);return h},
decode:function(c,h,f){var m=c.length,n=0,a=0;do{if(h>=m)throw Error("Expected more digits in base 64 VLQ value.");var d=PL.decode(c.charCodeAt(h++));if(-1===d)throw Error("Invalid base64 digit: "+c.charAt(h-1));var k=!!(d&32);d&=31;n+=d<<a;a+=5}while(k);c=n>>1;f.value=1===(n&1)?-c:c;f.rest=h}},Km="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,hV=Kl,iV=Object.prototype.hasOwnProperty,iw="undefined"!==typeof Map;$e.fromArray=function(c,h){for(var f=new $e,m=0,n=c.length;m<
n;m++)f.add(c[m],h);return f};$e.prototype.size=function(){return iw?(this||Km)._set.size:Object.getOwnPropertyNames((this||Km)._set).length};$e.prototype.add=function(c,h){var f=iw?c:hV.toSetString(c),m=iw?this.has(c):iV.call((this||Km)._set,f),n=(this||Km)._array.length;m&&!h||(this||Km)._array.push(c);m||(iw?(this||Km)._set.set(c,n):(this||Km)._set[f]=n)};$e.prototype.has=function(c){if(iw)return(this||Km)._set.has(c);c=hV.toSetString(c);return iV.call((this||Km)._set,c)};$e.prototype.indexOf=
function(c){if(iw){var h=(this||Km)._set.get(c);if(0<=h)return h}else if(h=hV.toSetString(c),iV.call((this||Km)._set,h))return(this||Km)._set[h];throw Error('"'+c+'" is not in the set.');};$e.prototype.at=function(c){if(0<=c&&c<(this||Km)._array.length)return(this||Km)._array[c];throw Error("No element indexed by "+c);};$e.prototype.toArray=function(){return(this||Km)._array.slice()};var $o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,K8=Kl;ag.prototype.unsortedForEach=
function(c,h){(this||$o)._array.forEach(c,h)};ag.prototype.add=function(c){var h=(this||$o)._last,f=h.generatedLine,m=c.generatedLine,n=h.generatedColumn,a=c.generatedColumn;m>f||m==f&&a>=n||0>=K8.compareByGeneratedPositionsInflated(h,c)?(this||$o)._last=c:(this||$o)._sorted=!1;(this||$o)._array.push(c)};ag.prototype.toArray=function(){(this||$o)._sorted||((this||$o)._array.sort(K8.compareByGeneratedPositionsInflated),(this||$o)._sorted=!0);return(this||$o)._array};var Xh="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,rl=Kl,FG=$e,Dfa=ag;Yf.prototype._version=3;Yf.fromSourceMap=function(c){var h=c.sourceRoot,f=new Yf({file:c.file,sourceRoot:h});c.eachMapping(function(m){var n={generated:{line:m.generatedLine,column:m.generatedColumn}};null!=m.source&&(n.source=m.source,null!=h&&(n.source=rl.relative(h,n.source)),n.original={line:m.originalLine,column:m.originalColumn},null!=m.name&&(n.name=m.name));f.addMapping(n)});c.sources.forEach(function(m){var n=m;null!==h&&
(n=rl.relative(h,m));f._sources.has(n)||f._sources.add(n);n=c.sourceContentFor(m);null!=n&&f.setSourceContent(m,n)});return f};Yf.prototype.addMapping=function(c){var h=rl.getArg(c,"generated"),f=rl.getArg(c,"original",null),m=rl.getArg(c,"source",null);c=rl.getArg(c,"name",null);(this||Xh)._skipValidation||this._validateMapping(h,f,m,c);null!=m&&(m=String(m),(this||Xh)._sources.has(m)||(this||Xh)._sources.add(m));null!=c&&(c=String(c),(this||Xh)._names.has(c)||(this||Xh)._names.add(c));(this||Xh)._mappings.add({generatedLine:h.line,
generatedColumn:h.column,originalLine:null!=f&&f.line,originalColumn:null!=f&&f.column,source:m,name:c})};Yf.prototype.setSourceContent=function(c,h){null!=(this||Xh)._sourceRoot&&(c=rl.relative((this||Xh)._sourceRoot,c));null!=h?((this||Xh)._sourcesContents||((this||Xh)._sourcesContents=Object.create(null)),(this||Xh)._sourcesContents[rl.toSetString(c)]=h):(this||Xh)._sourcesContents&&(delete (this||Xh)._sourcesContents[rl.toSetString(c)],0===Object.keys((this||Xh)._sourcesContents).length&&((this||
Xh)._sourcesContents=null))};Yf.prototype.applySourceMap=function(c,h,f){var m=h;if(null==h){if(null==c.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');m=c.file}var n=(this||Xh)._sourceRoot;null!=n&&(m=rl.relative(n,m));var a=new FG,d=new FG;(this||Xh)._mappings.unsortedForEach(function(k){if(k.source===m&&null!=k.originalLine){var b=c.originalPositionFor({line:k.originalLine,column:k.originalColumn});
null!=b.source&&(k.source=b.source,null!=f&&(k.source=rl.join(f,k.source)),null!=n&&(k.source=rl.relative(n,k.source)),k.originalLine=b.line,k.originalColumn=b.column,null!=b.name&&(k.name=b.name))}b=k.source;null==b||a.has(b)||a.add(b);k=k.name;null==k||d.has(k)||d.add(k)},this||Xh);(this||Xh)._sources=a;(this||Xh)._names=d;c.sources.forEach(function(k){var b=c.sourceContentFor(k);null!=b&&(null!=f&&(k=rl.join(f,k)),null!=n&&(k=rl.relative(n,k)),this.setSourceContent(k,b))},this||Xh)};Yf.prototype._validateMapping=
function(c,h,f,m){if(h&&"number"!==typeof h.line&&"number"!==typeof h.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(c&&"line"in c&&"column"in c&&0<c.line&&0<=c.column&&!h&&!f&&!m||c&&"line"in c&&"column"in c&&h&&"line"in h&&"column"in h&&0<c.line&&0<=c.column&&0<h.line&&0<=h.column&&
f))throw Error("Invalid mapping: "+JSON.stringify({generated:c,source:f,original:h,name:m}));};Yf.prototype._serializeMappings=function(){for(var c=0,h=1,f=0,m=0,n=0,a=0,d="",k,b,e,l=(this||Xh)._mappings.toArray(),p=0,u=l.length;p<u;p++){b=l[p];k="";if(b.generatedLine!==h)for(c=0;b.generatedLine!==h;)k+=";",h++;else if(0<p){if(!rl.compareByGeneratedPositionsInflated(b,l[p-1]))continue;k+=","}k+=HA.encode(b.generatedColumn-c);c=b.generatedColumn;null!=b.source&&(e=(this||Xh)._sources.indexOf(b.source),
k+=HA.encode(e-a),a=e,k+=HA.encode(b.originalLine-1-m),m=b.originalLine-1,k+=HA.encode(b.originalColumn-f),f=b.originalColumn,null!=b.name&&(b=(this||Xh)._names.indexOf(b.name),k+=HA.encode(b-n),n=b));d+=k}return d};Yf.prototype._generateSourcesContent=function(c,h){return c.map(function(f){if(!(this||Xh)._sourcesContents)return null;null!=h&&(f=rl.relative(h,f));f=rl.toSetString(f);return Object.prototype.hasOwnProperty.call((this||Xh)._sourcesContents,f)?(this||Xh)._sourcesContents[f]:null},this||
Xh)};Yf.prototype.toJSON=function(){var c={version:(this||Xh)._version,sources:(this||Xh)._sources.toArray(),names:(this||Xh)._names.toArray(),mappings:this._serializeMappings()};null!=(this||Xh)._file&&(c.file=(this||Xh)._file);null!=(this||Xh)._sourceRoot&&(c.sourceRoot=(this||Xh)._sourceRoot);(this||Xh)._sourcesContents&&(c.sourcesContent=this._generateSourcesContent(c.sources,c.sourceRoot));return c};Yf.prototype.toString=function(){return JSON.stringify(this.toJSON())};var GG={GREATEST_LOWER_BOUND:1,
LEAST_UPPER_BOUND:2,search:function(c,h,f,m){if(0===h.length)return-1;c=Wi(-1,h.length,c,h,f,m||GG.GREATEST_LOWER_BOUND);if(0>c)return-1;for(;0<=c-1&&0===f(h[c],h[c-1],!0);)--c;return c}},af="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,lg=Kl,jV=GG,iz=$e,oE=function(c,h){Yh(c,h,0,c.length-1)};Xi.fromSourceMap=function(c,h){return Ji.fromSourceMap(c,h)};Xi.prototype._version=3;Xi.prototype.__generatedMappings=null;Object.defineProperty(Xi.prototype,"_generatedMappings",
{configurable:!0,enumerable:!0,get:function(){(this||af).__generatedMappings||this._parseMappings((this||af)._mappings,(this||af).sourceRoot);return(this||af).__generatedMappings}});Xi.prototype.__originalMappings=null;Object.defineProperty(Xi.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){(this||af).__originalMappings||this._parseMappings((this||af)._mappings,(this||af).sourceRoot);return(this||af).__originalMappings}});Xi.prototype._charIsMappingSeparator=function(c,
h){c=c.charAt(h);return";"===c||","===c};Xi.prototype._parseMappings=function(c,h){throw Error("Subclasses must implement _parseMappings");};Xi.GENERATED_ORDER=1;Xi.ORIGINAL_ORDER=2;Xi.GREATEST_LOWER_BOUND=1;Xi.LEAST_UPPER_BOUND=2;Xi.prototype.eachMapping=function(c,h,f){h=h||null;switch(f||Xi.GENERATED_ORDER){case Xi.GENERATED_ORDER:f=(this||af)._generatedMappings;break;case Xi.ORIGINAL_ORDER:f=(this||af)._originalMappings;break;default:throw Error("Unknown order of iteration.");}var m=(this||af).sourceRoot;
f.map(function(n){var a=null===n.source?null:(this||af)._sources.at(n.source);a=lg.computeSourceURL(m,a,(this||af)._sourceMapURL);return{source:a,generatedLine:n.generatedLine,generatedColumn:n.generatedColumn,originalLine:n.originalLine,originalColumn:n.originalColumn,name:null===n.name?null:(this||af)._names.at(n.name)}},this||af).forEach(c,h)};Xi.prototype.allGeneratedPositionsFor=function(c){var h=lg.getArg(c,"line"),f={source:lg.getArg(c,"source"),originalLine:h,originalColumn:lg.getArg(c,"column",
0)};f.source=this._findSourceIndex(f.source);if(0>f.source)return[];var m=[];f=this._findMapping(f,(this||af)._originalMappings,"originalLine","originalColumn",lg.compareByOriginalPositions,jV.LEAST_UPPER_BOUND);if(0<=f){var n=(this||af)._originalMappings[f];if(void 0===c.column)for(h=n.originalLine;n&&n.originalLine===h;)m.push({line:lg.getArg(n,"generatedLine",null),column:lg.getArg(n,"generatedColumn",null),lastColumn:lg.getArg(n,"lastGeneratedColumn",null)}),n=(this||af)._originalMappings[++f];
else for(c=n.originalColumn;n&&n.originalLine===h&&n.originalColumn==c;)m.push({line:lg.getArg(n,"generatedLine",null),column:lg.getArg(n,"generatedColumn",null),lastColumn:lg.getArg(n,"lastGeneratedColumn",null)}),n=(this||af)._originalMappings[++f]}return m};Ji.prototype=Object.create(Xi.prototype);Ji.prototype.consumer=Xi;Ji.prototype._findSourceIndex=function(c){var h=c;null!=(this||af).sourceRoot&&(h=lg.relative((this||af).sourceRoot,h));if((this||af)._sources.has(h))return(this||af)._sources.indexOf(h);
for(h=0;h<(this||af)._absoluteSources.length;++h)if((this||af)._absoluteSources[h]==c)return h;return-1};Ji.fromSourceMap=function(c,h){var f=Object.create(Ji.prototype),m=f._names=iz.fromArray(c._names.toArray(),!0),n=f._sources=iz.fromArray(c._sources.toArray(),!0);f.sourceRoot=c._sourceRoot;f.sourcesContent=c._generateSourcesContent(f._sources.toArray(),f.sourceRoot);f.file=c._file;f._sourceMapURL=h;f._absoluteSources=f._sources.toArray().map(function(p){return lg.computeSourceURL(f.sourceRoot,
p,h)});c=c._mappings.toArray().slice();for(var a=f.__generatedMappings=[],d=f.__originalMappings=[],k=0,b=c.length;k<b;k++){var e=c[k],l=new ik;l.generatedLine=e.generatedLine;l.generatedColumn=e.generatedColumn;e.source&&(l.source=n.indexOf(e.source),l.originalLine=e.originalLine,l.originalColumn=e.originalColumn,e.name&&(l.name=m.indexOf(e.name)),d.push(l));a.push(l)}oE(f.__originalMappings,lg.compareByOriginalPositions);return f};Ji.prototype._version=3;Object.defineProperty(Ji.prototype,"sources",
{get:function(){return(this||af)._absoluteSources.slice()}});Ji.prototype._parseMappings=function(c,h){h=1;for(var f=0,m=0,n=0,a=0,d=0,k=c.length,b=0,e={},l={},p=[],u=[],x,z,E,G,J;b<k;)if(";"===c.charAt(b))h++,b++,f=0;else if(","===c.charAt(b))b++;else{x=new ik;x.generatedLine=h;for(G=b;G<k&&!this._charIsMappingSeparator(c,G);G++);z=c.slice(b,G);if(E=e[z])b+=z.length;else{for(E=[];b<G;)HA.decode(c,b,l),J=l.value,b=l.rest,E.push(J);if(2===E.length)throw Error("Found a source, but no line and column");
if(3===E.length)throw Error("Found a source and line, but no column");e[z]=E}x.generatedColumn=f+E[0];f=x.generatedColumn;1<E.length&&(x.source=a+E[1],a+=E[1],x.originalLine=m+E[2],m=x.originalLine,x.originalLine+=1,x.originalColumn=n+E[3],n=x.originalColumn,4<E.length&&(x.name=d+E[4],d+=E[4]));u.push(x);"number"===typeof x.originalLine&&p.push(x)}oE(u,lg.compareByGeneratedPositionsDeflated);(this||af).__generatedMappings=u;oE(p,lg.compareByOriginalPositions);(this||af).__originalMappings=p};Ji.prototype._findMapping=
function(c,h,f,m,n,a){if(0>=c[f])throw new TypeError("Line must be greater than or equal to 1, got "+c[f]);if(0>c[m])throw new TypeError("Column must be greater than or equal to 0, got "+c[m]);return jV.search(c,h,n,a)};Ji.prototype.computeColumnSpans=function(){for(var c=0;c<(this||af)._generatedMappings.length;++c){var h=(this||af)._generatedMappings[c];if(c+1<(this||af)._generatedMappings.length){var f=(this||af)._generatedMappings[c+1];if(h.generatedLine===f.generatedLine){h.lastGeneratedColumn=
f.generatedColumn-1;continue}}h.lastGeneratedColumn=Infinity}};Ji.prototype.originalPositionFor=function(c){var h={generatedLine:lg.getArg(c,"line"),generatedColumn:lg.getArg(c,"column")};c=this._findMapping(h,(this||af)._generatedMappings,"generatedLine","generatedColumn",lg.compareByGeneratedPositionsDeflated,lg.getArg(c,"bias",Xi.GREATEST_LOWER_BOUND));if(0<=c&&(c=(this||af)._generatedMappings[c],c.generatedLine===h.generatedLine)){h=lg.getArg(c,"source",null);null!==h&&(h=(this||af)._sources.at(h),
h=lg.computeSourceURL((this||af).sourceRoot,h,(this||af)._sourceMapURL));var f=lg.getArg(c,"name",null);null!==f&&(f=(this||af)._names.at(f));return{source:h,line:lg.getArg(c,"originalLine",null),column:lg.getArg(c,"originalColumn",null),name:f}}return{source:null,line:null,column:null,name:null}};Ji.prototype.hasContentsOfAllSources=function(){return(this||af).sourcesContent?(this||af).sourcesContent.length>=(this||af)._sources.size()&&!(this||af).sourcesContent.some(function(c){return null==c}):
!1};Ji.prototype.sourceContentFor=function(c,h){if(!(this||af).sourcesContent)return null;var f=this._findSourceIndex(c);if(0<=f)return(this||af).sourcesContent[f];null!=(this||af).sourceRoot&&(c=lg.relative((this||af).sourceRoot,c));var m;if(null!=(this||af).sourceRoot&&(m=lg.urlParse((this||af).sourceRoot))){f=c.replace(/^file:\/\//,"");if("file"==m.scheme&&(this||af)._sources.has(f))return(this||af).sourcesContent[(this||af)._sources.indexOf(f)];if((!m.path||"/"==m.path)&&(this||af)._sources.has("/"+
c))return(this||af).sourcesContent[(this||af)._sources.indexOf("/"+c)]}if(h)return null;throw Error('"'+c+'" is not in the SourceMap.');};Ji.prototype.generatedPositionFor=function(c){var h=lg.getArg(c,"source");h=this._findSourceIndex(h);if(0>h)return{line:null,column:null,lastColumn:null};h={source:h,originalLine:lg.getArg(c,"line"),originalColumn:lg.getArg(c,"column")};c=this._findMapping(h,(this||af)._originalMappings,"originalLine","originalColumn",lg.compareByOriginalPositions,lg.getArg(c,"bias",
Xi.GREATEST_LOWER_BOUND));return 0<=c&&(c=(this||af)._originalMappings[c],c.source===h.source)?{line:lg.getArg(c,"generatedLine",null),column:lg.getArg(c,"generatedColumn",null),lastColumn:lg.getArg(c,"lastGeneratedColumn",null)}:{line:null,column:null,lastColumn:null}};sl.prototype=Object.create(Xi.prototype);sl.prototype.constructor=Xi;sl.prototype._version=3;Object.defineProperty(sl.prototype,"sources",{get:function(){for(var c=[],h=0;h<(this||af)._sections.length;h++)for(var f=0;f<(this||af)._sections[h].consumer.sources.length;f++)c.push((this||
af)._sections[h].consumer.sources[f]);return c}});sl.prototype.originalPositionFor=function(c){var h={generatedLine:lg.getArg(c,"line"),generatedColumn:lg.getArg(c,"column")},f=jV.search(h,(this||af)._sections,function(m,n){var a=m.generatedLine-n.generatedOffset.generatedLine;return a?a:m.generatedColumn-n.generatedOffset.generatedColumn});return(f=(this||af)._sections[f])?f.consumer.originalPositionFor({line:h.generatedLine-(f.generatedOffset.generatedLine-1),column:h.generatedColumn-(f.generatedOffset.generatedLine===
h.generatedLine?f.generatedOffset.generatedColumn-1:0),bias:c.bias}):{source:null,line:null,column:null,name:null}};sl.prototype.hasContentsOfAllSources=function(){return(this||af)._sections.every(function(c){return c.consumer.hasContentsOfAllSources()})};sl.prototype.sourceContentFor=function(c,h){for(var f=0;f<(this||af)._sections.length;f++){var m=(this||af)._sections[f].consumer.sourceContentFor(c,!0);if(m)return m}if(h)return null;throw Error('"'+c+'" is not in the SourceMap.');};sl.prototype.generatedPositionFor=
function(c){for(var h=0;h<(this||af)._sections.length;h++){var f=(this||af)._sections[h];if(-1!==f.consumer._findSourceIndex(lg.getArg(c,"source"))){var m=f.consumer.generatedPositionFor(c);if(m)return{line:m.line+(f.generatedOffset.generatedLine-1),column:m.column+(f.generatedOffset.generatedLine===m.line?f.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}};sl.prototype._parseMappings=function(c,h){(this||af).__generatedMappings=[];(this||af).__originalMappings=[];for(c=0;c<(this||
af)._sections.length;c++){h=(this||af)._sections[c];for(var f=h.consumer._generatedMappings,m=0;m<f.length;m++){var n=f[m],a=h.consumer._sources.at(n.source);a=lg.computeSourceURL(h.consumer.sourceRoot,a,(this||af)._sourceMapURL);(this||af)._sources.add(a);a=(this||af)._sources.indexOf(a);var d=null;n.name&&(d=h.consumer._names.at(n.name),(this||af)._names.add(d),d=(this||af)._names.indexOf(d));n={source:a,generatedLine:n.generatedLine+(h.generatedOffset.generatedLine-1),generatedColumn:n.generatedColumn+
(h.generatedOffset.generatedLine===n.generatedLine?h.generatedOffset.generatedColumn-1:0),originalLine:n.originalLine,originalColumn:n.originalColumn,name:d};(this||af).__generatedMappings.push(n);"number"===typeof n.originalLine&&(this||af).__originalMappings.push(n)}}oE((this||af).__generatedMappings,lg.compareByGeneratedPositionsDeflated);oE((this||af).__originalMappings,lg.compareByOriginalPositions)};var Yi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,QL=Kl,
vna=/(\r?\n)/;Lm.fromStringWithSourceMap=function(c,h,f){function m(p,u){if(null===p||void 0===p.source)n.add(u);else{var x=f?QL.join(f,p.source):p.source;n.add(new Lm(p.originalLine,p.originalColumn,x,u,p.name))}}var n=new Lm,a=c.split(vna),d=0,k=function(){var p=d<a.length?a[d++]:void 0,u=(d<a.length?a[d++]:void 0)||"";return p+u},b=1,e=0,l=null;h.eachMapping(function(p){if(null!==l)if(b<p.generatedLine)m(l,k()),b++,e=0;else{var u=a[d]||"",x=u.substr(0,p.generatedColumn-e);a[d]=u.substr(p.generatedColumn-
e);e=p.generatedColumn;m(l,x);l=p;return}for(;b<p.generatedLine;)n.add(k()),b++;e<p.generatedColumn&&(u=a[d]||"",n.add(u.substr(0,p.generatedColumn)),a[d]=u.substr(p.generatedColumn),e=p.generatedColumn);l=p},this||Yi);d<a.length&&(l&&m(l,k()),n.add(a.splice(d).join("")));h.sources.forEach(function(p){var u=h.sourceContentFor(p);null!=u&&(null!=f&&(p=QL.join(f,p)),n.setSourceContent(p,u))});return n};Lm.prototype.add=function(c){if(Array.isArray(c))c.forEach(function(h){this.add(h)},this||Yi);else if(c.$$$isSourceNode$$$||
"string"===typeof c)c&&(this||Yi).children.push(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||Yi};Lm.prototype.prepend=function(c){if(Array.isArray(c))for(var h=c.length-1;0<=h;h--)this.prepend(c[h]);else if(c.$$$isSourceNode$$$||"string"===typeof c)(this||Yi).children.unshift(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||Yi};Lm.prototype.walk=function(c){for(var h,
f=0,m=(this||Yi).children.length;f<m;f++)h=(this||Yi).children[f],h.$$$isSourceNode$$$?h.walk(c):""!==h&&c(h,{source:(this||Yi).source,line:(this||Yi).line,column:(this||Yi).column,name:(this||Yi).name})};Lm.prototype.join=function(c){var h,f=(this||Yi).children.length;if(0<f){var m=[];for(h=0;h<f-1;h++)m.push((this||Yi).children[h]),m.push(c);m.push((this||Yi).children[h]);(this||Yi).children=m}return this||Yi};Lm.prototype.replaceRight=function(c,h){var f=(this||Yi).children[(this||Yi).children.length-
1];f.$$$isSourceNode$$$?f.replaceRight(c,h):"string"===typeof f?(this||Yi).children[(this||Yi).children.length-1]=f.replace(c,h):(this||Yi).children.push("".replace(c,h));return this||Yi};Lm.prototype.setSourceContent=function(c,h){(this||Yi).sourceContents[QL.toSetString(c)]=h};Lm.prototype.walkSourceContents=function(c){for(var h=0,f=(this||Yi).children.length;h<f;h++)(this||Yi).children[h].$$$isSourceNode$$$&&(this||Yi).children[h].walkSourceContents(c);var m=Object.keys((this||Yi).sourceContents);
h=0;for(f=m.length;h<f;h++)c(QL.fromSetString(m[h]),(this||Yi).sourceContents[m[h]])};Lm.prototype.toString=function(){var c="";this.walk(function(h){c+=h});return c};Lm.prototype.toStringWithSourceMap=function(c){var h="",f=1,m=0,n=new Yf(c),a=!1,d=null,k=null,b=null,e=null;this.walk(function(l,p){h+=l;null!==p.source&&null!==p.line&&null!==p.column?(d===p.source&&k===p.line&&b===p.column&&e===p.name||n.addMapping({source:p.source,original:{line:p.line,column:p.column},generated:{line:f,column:m},
name:p.name}),d=p.source,k=p.line,b=p.column,e=p.name,a=!0):a&&(n.addMapping({generated:{line:f,column:m}}),d=null,a=!1);for(var u=0,x=l.length;u<x;u++)10===l.charCodeAt(u)?(f++,m=0,u+1===x?(d=null,a=!1):a&&n.addMapping({source:p.source,original:{line:p.line,column:p.column},generated:{line:f,column:m},name:p.name})):m++});this.walkSourceContents(function(l,p){n.setSourceContent(l,p)});return{code:h,map:n}};var Wl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,kn=
{};(function(){function c(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function h(ta,
Pa){var Ra="";for(Pa|=0;0<Pa;Pa>>>=1,ta+=ta)Pa&1&&(Ra+=ta);return Ra}function f(ta){var Pa=ta.length;return Pa&&fc.code.isLineTerminator(ta.charCodeAt(Pa-1))}function m(ta,Pa){for(var Ra in Pa)Pa.hasOwnProperty(Ra)&&(ta[Ra]=Pa[Ra]);return ta}function n(ta,Pa){function Ra(Bd){return"object"===typeof Bd&&Bd instanceof Object&&!(Bd instanceof RegExp)}var Cb;for(Cb in Pa)if(Pa.hasOwnProperty(Cb)){var ec=Pa[Cb];Ra(ec)?Ra(ta[Cb])?n(ta[Cb],ec):ta[Cb]=n({},ec):ta[Cb]=ec}return ta}function a(ta,Pa){return 8232===
(ta&-2)?(Pa?"u":"\\u")+(8232===ta?"2028":"2029"):10===ta||13===ta?(Pa?"":"\\")+(10===ta?"n":"r"):String.fromCharCode(ta)}function d(ta,Pa){if(8===ta)return"\\b";if(12===ta)return"\\f";if(9===ta)return"\\t";var Ra=ta.toString(16).toUpperCase();return N||255<ta?"\\u"+"0000".slice(Ra.length)+Ra:0!==ta||fc.code.isDecimalDigit(Pa)?11===ta?"\\x0B":"\\x"+"00".slice(Ra.length)+Ra:"\\0"}function k(ta){if(92===ta)return"\\\\";if(10===ta)return"\\n";if(13===ta)return"\\r";if(8232===ta)return"\\u2028";if(8233===
ta)return"\\u2029";throw Error("Incorrectly classified character");}function b(ta){var Pa,Ra="";var Cb=0;for(Pa=ta.length;Cb<Pa;++Cb){var ec=ta[Cb];Ra+=Array.isArray(ec)?b(ec):ec}return Ra}function e(ta,Pa){if(!Qb)return Array.isArray(ta)?b(ta):ta;if(null==Pa){if(ta instanceof ka)return ta;Pa={}}return null==Pa.loc?new ka(null,null,Qb,ta,Pa.name||null):new ka(Pa.loc.start.line,Pa.loc.start.column,!0===Qb?Pa.loc.source||null:Qb,ta,Pa.name||null)}function l(){return Aa?Aa:" "}function p(ta,Pa){var Ra=
e(ta).toString();if(0===Ra.length)return[Pa];var Cb=e(Pa).toString();if(0===Cb.length)return[ta];Ra=Ra.charCodeAt(Ra.length-1);Cb=Cb.charCodeAt(0);return(43===Ra||45===Ra)&&Ra===Cb||fc.code.isIdentifierPartES5(Ra)&&fc.code.isIdentifierPartES5(Cb)||47===Ra&&105===Cb?[ta,l(),Pa]:fc.code.isWhiteSpace(Ra)||fc.code.isLineTerminator(Ra)||fc.code.isWhiteSpace(Cb)||fc.code.isLineTerminator(Cb)?[ta,Pa]:[ta,Aa,Pa]}function u(ta){var Pa=za;za+=Ia;ta(za);za=Pa}function x(ta,Pa){if("Line"===ta.type){if(f(ta.value))return"//"+
ta.value;Pa="//"+ta.value;Yb||(Pa+="\n");return Pa}if(ya.format.indent.adjustMultilineComment&&/[\n\r]/.test(ta.value)){var Ra,Cb;ta=("/*"+ta.value+"*/").split(/\r\n|[\r\n]/);var ec=Number.MAX_VALUE;var Bd=1;for(Ra=ta.length;Bd<Ra;++Bd){var Ad=ta[Bd];for(Cb=0;Cb<Ad.length&&fc.code.isWhiteSpace(Ad.charCodeAt(Cb));)++Cb;ec>Cb&&(ec=Cb)}"undefined"!==typeof Pa?(Ad=za,"*"===ta[1][ec]&&(Pa+=" "),za=Pa):(ec&1&&--ec,Ad=za);Bd=1;for(Ra=ta.length;Bd<Ra;++Bd)Pa=e([za,ta[Bd].slice(ec)]),ta[Bd]=Qb?Pa.join(""):
Pa;za=Ad;return ta.join("\n")}return"/*"+ta.value+"*/"}function z(ta,Pa){var Ra;if(ta.leadingComments&&0<ta.leadingComments.length){var Cb=Pa;if(Yb){var ec=ta.leadingComments[0];Pa=[];var Bd=ec.extendedRange;var Ad=ec.range;var Mc=mc.substring(Bd[0],Ad[0]);var Ue=(Mc.match(/\n/g)||[]).length;0<Ue?(Pa.push(h("\n",Ue)),Pa.push([za,x(ec)])):(Pa.push(Mc),Pa.push(x(ec)));Ue=Ad;Mc=1;for(Ra=ta.leadingComments.length;Mc<Ra;Mc++)ec=ta.leadingComments[Mc],Ad=ec.range,Ue=mc.substring(Ue[1],Ad[0]),Ue=(Ue.match(/\n/g)||
[]).length,Pa.push(h("\n",Ue)),Pa.push([za,x(ec)]),Ue=Ad;Mc=mc.substring(Ad[1],Bd[1]);Ue=(Mc.match(/\n/g)||[]).length;Pa.push(h("\n",Ue))}else for(ec=ta.leadingComments[0],Pa=[],Ea&&ta.type===Jc.Program&&0===ta.body.length&&Pa.push("\n"),Pa.push(x(ec)),f(e(Pa).toString())||Pa.push("\n"),Mc=1,Ra=ta.leadingComments.length;Mc<Ra;++Mc)ec=ta.leadingComments[Mc],ec=[x(ec)],f(e(ec).toString())||ec.push("\n"),Pa.push([za,ec]);Pa.push([za,Cb])}if(ta.trailingComments)if(Yb)ec=ta.trailingComments[0],Bd=ec.extendedRange,
Ad=ec.range,Mc=mc.substring(Bd[0],Ad[0]),Ue=(Mc.match(/\n/g)||[]).length,0<Ue?(Pa.push(h("\n",Ue)),Pa.push([za,x(ec)])):(Pa.push(Mc),Pa.push(x(ec)));else{Cb=!f(e(Pa).toString());Mc=e([za,Pa,Ia]).toString();for(Ra=Mc.length-1;0<=Ra&&!fc.code.isLineTerminator(Mc.charCodeAt(Ra));--Ra);Bd=h(" ",Mc.length-1-Ra);Mc=0;for(Ra=ta.trailingComments.length;Mc<Ra;++Mc)ec=ta.trailingComments[Mc],Cb?(Pa=0===Mc?[Pa,Ia]:[Pa,Bd],Pa.push(x(ec,Bd))):Pa=[Pa,[za,x(ec)]],Mc===Ra-1||f(e(Pa).toString())||(Pa=[Pa,"\n"])}return Pa}
function E(ta,Pa,Ra){for(var Cb=0;ta<Pa;ta++)"\n"===mc[ta]&&Cb++;for(ta=1;ta<Cb;ta++)Ra.push(la)}function G(ta,Pa,Ra){return Pa<Ra?["(",ta,")"]:ta}function J(ta){var Pa;var Ra=ta.split(/\r\n|\n/);ta=1;for(Pa=Ra.length;ta<Pa;ta++)Ra[ta]=la+za+Ra[ta];return Ra}function K(){}function T(ta){return e(ta.name,ta)}function P(ta,Pa){return ta.async?"async"+(Pa?l():Aa):""}function da(ta){return ta.generator&&!ya.moz.starlessGenerator?"*"+Aa:""}function fa(ta){var Pa=ta.value,Ra="";Pa.async&&(Ra+=P(Pa,!ta.computed));
Pa.generator&&(Ra+=da(Pa)?"*":"");return Ra}var ka,za,Ia,N,ia,W,ca,sa,la,Aa,ib,ob,Ea,ua,ya,Sa,Qb,mc,Yb;var fc=nE;var Jc=gV.Syntax;var Nb={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21};var ld={"||":Nb.LogicalOR,"&&":Nb.LogicalAND,"|":Nb.BitwiseOR,
"^":Nb.BitwiseXOR,"&":Nb.BitwiseAND,"==":Nb.Equality,"!=":Nb.Equality,"===":Nb.Equality,"!==":Nb.Equality,is:Nb.Equality,isnt:Nb.Equality,"<":Nb.Relational,">":Nb.Relational,"<=":Nb.Relational,">=":Nb.Relational,"in":Nb.Relational,"instanceof":Nb.Relational,"<<":Nb.BitwiseSHIFT,">>":Nb.BitwiseSHIFT,">>>":Nb.BitwiseSHIFT,"+":Nb.Additive,"-":Nb.Additive,"*":Nb.Multiplicative,"%":Nb.Multiplicative,"/":Nb.Multiplicative,"**":Nb.Exponentiation};K.prototype.maybeBlock=function(ta,Pa){var Ra,Cb=this||Wl;
var ec=!ya.comment||!ta.leadingComments;if(ta.type===Jc.BlockStatement&&ec)return[Aa,this.generateStatement(ta,Pa)];if(ta.type===Jc.EmptyStatement&&ec)return";";u(function(){Ra=[la,[za,Cb.generateStatement(ta,Pa)]]});return Ra};K.prototype.maybeBlockSuffix=function(ta,Pa){var Ra=f(e(Pa).toString());return ta.type!==Jc.BlockStatement||ya.comment&&ta.leadingComments||Ra?Ra?[Pa,za]:[Pa,la,za]:[Pa,Aa]};K.prototype.generatePattern=function(ta,Pa,Ra){return ta.type===Jc.Identifier?T(ta):this.generateExpression(ta,
Pa,Ra)};K.prototype.generateFunctionParams=function(ta){var Pa;var Ra=!1;if(ta.type!==Jc.ArrowFunctionExpression||ta.rest||ta.defaults&&0!==ta.defaults.length||1!==ta.params.length||ta.params[0].type!==Jc.Identifier){var Cb=ta.type===Jc.ArrowFunctionExpression?[P(ta,!1)]:[];Cb.push("(");ta.defaults&&(Ra=!0);var ec=0;for(Pa=ta.params.length;ec<Pa;++ec)Ra&&ta.defaults[ec]?Cb.push(this.generateAssignment(ta.params[ec],ta.defaults[ec],"=",Nb.Assignment,7)):Cb.push(this.generatePattern(ta.params[ec],Nb.Assignment,
7)),ec+1<Pa&&Cb.push(","+Aa);ta.rest&&(ta.params.length&&Cb.push(","+Aa),Cb.push("..."),Cb.push(T(ta.rest)));Cb.push(")")}else Cb=[P(ta,!0),T(ta.params[0])];return Cb};K.prototype.generateFunctionBody=function(ta){var Pa=this.generateFunctionParams(ta);ta.type===Jc.ArrowFunctionExpression&&(Pa.push(Aa),Pa.push("=>"));ta.expression?(Pa.push(Aa),ta=this.generateExpression(ta.body,Nb.Assignment,7),"{"===ta.toString().charAt(0)&&(ta=["(",ta,")"]),Pa.push(ta)):Pa.push(this.maybeBlock(ta.body,9));return Pa};
K.prototype.generateIterationForStatement=function(ta,Pa,Ra){var Cb=["for"+(Pa.await?l()+"await":"")+Aa+"("],ec=this||Wl;u(function(){Pa.left.type===Jc.VariableDeclaration?u(function(){Cb.push(Pa.left.kind+l());Cb.push(ec.generateStatement(Pa.left.declarations[0],0))}):Cb.push(ec.generateExpression(Pa.left,Nb.Call,7));Cb=p(Cb,ta);Cb=[p(Cb,ec.generateExpression(Pa.right,Nb.Assignment,7)),")"]});Cb.push(this.maybeBlock(Pa.body,Ra));return Cb};K.prototype.generatePropertyKey=function(ta,Pa){var Ra=[];
Pa&&Ra.push("[");Ra.push(this.generateExpression(ta,Nb.Assignment,7));Pa&&Ra.push("]");return Ra};K.prototype.generateAssignment=function(ta,Pa,Ra,Cb,ec){Nb.Assignment<Cb&&(ec|=1);return G([this.generateExpression(ta,Nb.Call,ec),Aa+Ra+Aa,this.generateExpression(Pa,Nb.Assignment,ec)],Nb.Assignment,Cb)};K.prototype.semicolon=function(ta){return!ob&&ta&32?"":";"};K.Statement={BlockStatement:function(ta,Pa){var Ra,Cb,ec=["{",la],Bd=this||Wl;u(function(){0===ta.body.length&&Yb&&(Ra=ta.range,2<Ra[1]-Ra[0]&&
(Cb=mc.substring(Ra[0]+1,Ra[1]-1),"\n"===Cb[0]&&(ec=["{"]),ec.push(Cb)));var Ad;var Mc=1;Pa&8&&(Mc|=16);var Ue=0;for(Ad=ta.body.length;Ue<Ad;++Ue){Yb&&(0===Ue&&(ta.body[0].leadingComments&&(Ra=ta.body[0].leadingComments[0].extendedRange,Cb=mc.substring(Ra[0],Ra[1]),"\n"===Cb[0]&&(ec=["{"])),ta.body[0].leadingComments||E(ta.range[0],ta.body[0].range[0],ec)),0<Ue&&(ta.body[Ue-1].trailingComments||ta.body[Ue].leadingComments||E(ta.body[Ue-1].range[1],ta.body[Ue].range[0],ec)));Ue===Ad-1&&(Mc|=32);var Me=
ta.body[Ue].leadingComments&&Yb?Bd.generateStatement(ta.body[Ue],Mc):[za,Bd.generateStatement(ta.body[Ue],Mc)];ec.push(Me);f(e(Me).toString())||(Yb&&Ue<Ad-1?ta.body[Ue+1].leadingComments||ec.push(la):ec.push(la));Yb&&Ue===Ad-1&&(ta.body[Ue].trailingComments||E(ta.body[Ue].range[1],ta.range[1],ec))}});ec.push([za,"}"]);return ec},BreakStatement:function(ta,Pa){return ta.label?"break "+ta.label.name+this.semicolon(Pa):"break"+this.semicolon(Pa)},ContinueStatement:function(ta,Pa){return ta.label?"continue "+
ta.label.name+this.semicolon(Pa):"continue"+this.semicolon(Pa)},ClassBody:function(ta,Pa){var Ra=["{",la],Cb=this||Wl;u(function(ec){var Bd;var Ad=0;for(Bd=ta.body.length;Ad<Bd;++Ad)Ra.push(ec),Ra.push(Cb.generateExpression(ta.body[Ad],Nb.Sequence,7)),Ad+1<Bd&&Ra.push(la)});f(e(Ra).toString())||Ra.push(la);Ra.push(za);Ra.push("}");return Ra},ClassDeclaration:function(ta,Pa){Pa=["class"];ta.id&&(Pa=p(Pa,this.generateExpression(ta.id,Nb.Sequence,7)));if(ta.superClass){var Ra=p("extends",this.generateExpression(ta.superClass,
Nb.Unary,7));Pa=p(Pa,Ra)}Pa.push(Aa);Pa.push(this.generateStatement(ta.body,33));return Pa},DirectiveStatement:function(ta,Pa){if(ya.raw&&ta.raw)return ta.raw+this.semicolon(Pa);ta=ta.directive;var Ra;var Cb="double"===ca?'"':"'";var ec=0;for(Ra=ta.length;ec<Ra;++ec){var Bd=ta.charCodeAt(ec);if(39===Bd){Cb='"';break}else if(34===Bd){Cb="'";break}else 92===Bd&&++ec}return Cb+ta+Cb+this.semicolon(Pa)},DoWhileStatement:function(ta,Pa){var Ra=p("do",this.maybeBlock(ta.body,1));Ra=this.maybeBlockSuffix(ta.body,
Ra);return p(Ra,["while"+Aa+"(",this.generateExpression(ta.test,Nb.Sequence,7),")"+this.semicolon(Pa)])},CatchClause:function(ta,Pa){var Ra,Cb=this||Wl;u(function(){if(ta.param){if(Ra=["catch"+Aa+"(",Cb.generateExpression(ta.param,Nb.Sequence,7),")"],ta.guard){var ec=Cb.generateExpression(ta.guard,Nb.Sequence,7);Ra.splice(2,0," if ",ec)}}else Ra=["catch"]});Ra.push(this.maybeBlock(ta.body,1));return Ra},DebuggerStatement:function(ta,Pa){return"debugger"+this.semicolon(Pa)},EmptyStatement:function(ta,
Pa){return";"},ExportDefaultDeclaration:function(ta,Pa){var Ra=["export"];var Cb=Pa&32?33:1;Ra=p(Ra,"default");return Ra=K.Statement.hasOwnProperty(ta.declaration.type)?p(Ra,this.generateStatement(ta.declaration,Cb)):p(Ra,this.generateExpression(ta.declaration,Nb.Assignment,7)+this.semicolon(Pa))},ExportNamedDeclaration:function(ta,Pa){var Ra=["export"],Cb=this||Wl;var ec=Pa&32?33:1;if(ta.declaration)return p(Ra,this.generateStatement(ta.declaration,ec));ta.specifiers&&(0===ta.specifiers.length?Ra=
p(Ra,"{"+Aa+"}"):ta.specifiers[0].type===Jc.ExportBatchSpecifier?Ra=p(Ra,this.generateExpression(ta.specifiers[0],Nb.Sequence,7)):(Ra=p(Ra,"{"),u(function(Bd){var Ad;Ra.push(la);var Mc=0;for(Ad=ta.specifiers.length;Mc<Ad;++Mc)Ra.push(Bd),Ra.push(Cb.generateExpression(ta.specifiers[Mc],Nb.Sequence,7)),Mc+1<Ad&&Ra.push(","+la)}),f(e(Ra).toString())||Ra.push(la),Ra.push(za+"}")),ta.source?Ra=p(Ra,["from"+Aa,this.generateExpression(ta.source,Nb.Sequence,7),this.semicolon(Pa)]):Ra.push(this.semicolon(Pa)));
return Ra},ExportAllDeclaration:function(ta,Pa){return["export"+Aa,"*"+Aa,"from"+Aa,this.generateExpression(ta.source,Nb.Sequence,7),this.semicolon(Pa)]},ExpressionStatement:function(ta,Pa){function Ra(Mc){if("class"!==Mc.slice(0,5))return!1;Mc=Mc.charCodeAt(5);return 123===Mc||fc.code.isWhiteSpace(Mc)||fc.code.isLineTerminator(Mc)}function Cb(Mc){if("function"!==Mc.slice(0,8))return!1;Mc=Mc.charCodeAt(8);return 40===Mc||fc.code.isWhiteSpace(Mc)||42===Mc||fc.code.isLineTerminator(Mc)}function ec(Mc){var Ue;
if("async"!==Mc.slice(0,5)||!fc.code.isWhiteSpace(Mc.charCodeAt(5)))return!1;var Me=6;for(Ue=Mc.length;Me<Ue&&fc.code.isWhiteSpace(Mc.charCodeAt(Me));++Me);if(Me===Ue||"function"!==Mc.slice(Me,Me+8))return!1;Mc=Mc.charCodeAt(Me+8);return 40===Mc||fc.code.isWhiteSpace(Mc)||42===Mc||fc.code.isLineTerminator(Mc)}var Bd=[this.generateExpression(ta.expression,Nb.Sequence,7)];var Ad=e(Bd).toString();123===Ad.charCodeAt(0)||Ra(Ad)||Cb(Ad)||ec(Ad)||ua&&Pa&16&&ta.expression.type===Jc.Literal&&"string"===typeof ta.expression.value?
Bd=["(",Bd,")"+this.semicolon(Pa)]:Bd.push(this.semicolon(Pa));return Bd},ImportDeclaration:function(ta,Pa){var Ra=this||Wl;if(0===ta.specifiers.length)return["import",Aa,this.generateExpression(ta.source,Nb.Sequence,7),this.semicolon(Pa)];var Cb=["import"];var ec=0;ta.specifiers[ec].type===Jc.ImportDefaultSpecifier&&(Cb=p(Cb,[this.generateExpression(ta.specifiers[ec],Nb.Sequence,7)]),++ec);ta.specifiers[ec]&&(0!==ec&&Cb.push(","),ta.specifiers[ec].type===Jc.ImportNamespaceSpecifier?Cb=p(Cb,[Aa,this.generateExpression(ta.specifiers[ec],
Nb.Sequence,7)]):(Cb.push(Aa+"{"),1===ta.specifiers.length-ec?(Cb.push(Aa),Cb.push(this.generateExpression(ta.specifiers[ec],Nb.Sequence,7)),Cb.push(Aa+"}"+Aa)):(u(function(Bd){var Ad;Cb.push(la);var Mc=ec;for(Ad=ta.specifiers.length;Mc<Ad;++Mc)Cb.push(Bd),Cb.push(Ra.generateExpression(ta.specifiers[Mc],Nb.Sequence,7)),Mc+1<Ad&&Cb.push(","+la)}),f(e(Cb).toString())||Cb.push(la),Cb.push(za+"}"+Aa))));return Cb=p(Cb,["from"+Aa,this.generateExpression(ta.source,Nb.Sequence,7),this.semicolon(Pa)])},VariableDeclarator:function(ta,
Pa){Pa=Pa&1?7:6;return ta.init?[this.generateExpression(ta.id,Nb.Assignment,Pa),Aa,"=",Aa,this.generateExpression(ta.init,Nb.Assignment,Pa)]:this.generatePattern(ta.id,Nb.Assignment,Pa)},VariableDeclaration:function(ta,Pa){function Ra(){Bd=ta.declarations[0];ya.comment&&Bd.leadingComments?(Mc.push("\n"),Mc.push([za,Ad.generateStatement(Bd,Ue)])):(Mc.push(l()),Mc.push(Ad.generateStatement(Bd,Ue)));Cb=1;for(ec=ta.declarations.length;Cb<ec;++Cb)Bd=ta.declarations[Cb],ya.comment&&Bd.leadingComments?(Mc.push(","+
la),Mc.push([za,Ad.generateStatement(Bd,Ue)])):(Mc.push(","+Aa),Mc.push(Ad.generateStatement(Bd,Ue)))}var Cb,ec,Bd,Ad=this||Wl;var Mc=[ta.kind];var Ue=Pa&1?1:0;1<ta.declarations.length?u(Ra):Ra();Mc.push(this.semicolon(Pa));return Mc},ThrowStatement:function(ta,Pa){return[p("throw",this.generateExpression(ta.argument,Nb.Sequence,7)),this.semicolon(Pa)]},TryStatement:function(ta,Pa){var Ra;Pa=["try",this.maybeBlock(ta.block,1)];Pa=this.maybeBlockSuffix(ta.block,Pa);if(ta.handlers){var Cb=0;for(Ra=
ta.handlers.length;Cb<Ra;++Cb)if(Pa=p(Pa,this.generateStatement(ta.handlers[Cb],1)),ta.finalizer||Cb+1!==Ra)Pa=this.maybeBlockSuffix(ta.handlers[Cb].body,Pa)}else{var ec=ta.guardedHandlers||[];Cb=0;for(Ra=ec.length;Cb<Ra;++Cb)if(Pa=p(Pa,this.generateStatement(ec[Cb],1)),ta.finalizer||Cb+1!==Ra)Pa=this.maybeBlockSuffix(ec[Cb].body,Pa);if(ta.handler)if(Array.isArray(ta.handler))for(Cb=0,Ra=ta.handler.length;Cb<Ra;++Cb){if(Pa=p(Pa,this.generateStatement(ta.handler[Cb],1)),ta.finalizer||Cb+1!==Ra)Pa=
this.maybeBlockSuffix(ta.handler[Cb].body,Pa)}else Pa=p(Pa,this.generateStatement(ta.handler,1)),ta.finalizer&&(Pa=this.maybeBlockSuffix(ta.handler.body,Pa))}ta.finalizer&&(Pa=p(Pa,["finally",this.maybeBlock(ta.finalizer,1)]));return Pa},SwitchStatement:function(ta,Pa){var Ra,Cb,ec=this||Wl;u(function(){Ra=["switch"+Aa+"(",ec.generateExpression(ta.discriminant,Nb.Sequence,7),")"+Aa+"{"+la]});if(ta.cases){var Bd=1;var Ad=0;for(Cb=ta.cases.length;Ad<Cb;++Ad)Ad===Cb-1&&(Bd|=32),Pa=[za,this.generateStatement(ta.cases[Ad],
Bd)],Ra.push(Pa),f(e(Pa).toString())||Ra.push(la)}Ra.push([za,"}"]);return Ra},SwitchCase:function(ta,Pa){var Ra,Cb,ec,Bd,Ad,Mc=this||Wl;u(function(){Ra=ta.test?[p("case",Mc.generateExpression(ta.test,Nb.Sequence,7)),":"]:["default:"];ec=0;(Bd=ta.consequent.length)&&ta.consequent[0].type===Jc.BlockStatement&&(Cb=Mc.maybeBlock(ta.consequent[0],1),Ra.push(Cb),ec=1);ec===Bd||f(e(Ra).toString())||Ra.push(la);for(Ad=1;ec<Bd;++ec)ec===Bd-1&&Pa&32&&(Ad|=32),Cb=[za,Mc.generateStatement(ta.consequent[ec],
Ad)],Ra.push(Cb),ec+1===Bd||f(e(Cb).toString())||Ra.push(la)});return Ra},IfStatement:function(ta,Pa){var Ra=this||Wl;u(function(){ec=["if"+Aa+"(",Ra.generateExpression(ta.test,Nb.Sequence,7),")"]});var Cb=1;Pa&32&&(Cb|=32);if(ta.alternate){ec.push(this.maybeBlock(ta.consequent,1));var ec=this.maybeBlockSuffix(ta.consequent,ec);ec=ta.alternate.type===Jc.IfStatement?p(ec,["else ",this.generateStatement(ta.alternate,Cb)]):p(ec,p("else",this.maybeBlock(ta.alternate,Cb)))}else ec.push(this.maybeBlock(ta.consequent,
Cb));return ec},ForStatement:function(ta,Pa){var Ra,Cb=this||Wl;u(function(){Ra=["for"+Aa+"("];ta.init?ta.init.type===Jc.VariableDeclaration?Ra.push(Cb.generateStatement(ta.init,0)):(Ra.push(Cb.generateExpression(ta.init,Nb.Sequence,6)),Ra.push(";")):Ra.push(";");ta.test&&(Ra.push(Aa),Ra.push(Cb.generateExpression(ta.test,Nb.Sequence,7)));Ra.push(";");ta.update&&(Ra.push(Aa),Ra.push(Cb.generateExpression(ta.update,Nb.Sequence,7)));Ra.push(")")});Ra.push(this.maybeBlock(ta.body,Pa&32?33:1));return Ra},
ForInStatement:function(ta,Pa){return this.generateIterationForStatement("in",ta,Pa&32?33:1)},ForOfStatement:function(ta,Pa){return this.generateIterationForStatement("of",ta,Pa&32?33:1)},LabeledStatement:function(ta,Pa){return[ta.label.name+":",this.maybeBlock(ta.body,Pa&32?33:1)]},Program:function(ta,Pa){var Ra;var Cb=ta.body.length;Pa=[Ea&&0<Cb?"\n":""];var ec=17;for(Ra=0;Ra<Cb;++Ra){Ea||Ra!==Cb-1||(ec|=32);Yb&&(0===Ra&&(ta.body[0].leadingComments||E(ta.range[0],ta.body[Ra].range[0],Pa)),0<Ra&&
(ta.body[Ra-1].trailingComments||ta.body[Ra].leadingComments||E(ta.body[Ra-1].range[1],ta.body[Ra].range[0],Pa)));var Bd=[za,this.generateStatement(ta.body[Ra],ec)];Pa.push(Bd);Ra+1<Cb&&!f(e(Bd).toString())&&(Yb?ta.body[Ra+1].leadingComments||Pa.push(la):Pa.push(la));Yb&&Ra===Cb-1&&(ta.body[Ra].trailingComments||E(ta.body[Ra].range[1],ta.range[1],Pa))}return Pa},FunctionDeclaration:function(ta,Pa){return[P(ta,!0),"function",da(ta)||l(),ta.id?T(ta.id):"",this.generateFunctionBody(ta)]},ReturnStatement:function(ta,
Pa){return ta.argument?[p("return",this.generateExpression(ta.argument,Nb.Sequence,7)),this.semicolon(Pa)]:["return"+this.semicolon(Pa)]},WhileStatement:function(ta,Pa){var Ra,Cb=this||Wl;u(function(){Ra=["while"+Aa+"(",Cb.generateExpression(ta.test,Nb.Sequence,7),")"]});Ra.push(this.maybeBlock(ta.body,Pa&32?33:1));return Ra},WithStatement:function(ta,Pa){var Ra,Cb=this||Wl;u(function(){Ra=["with"+Aa+"(",Cb.generateExpression(ta.object,Nb.Sequence,7),")"]});Ra.push(this.maybeBlock(ta.body,Pa&32?33:
1));return Ra}};m(K.prototype,K.Statement);K.Expression={SequenceExpression:function(ta,Pa,Ra){var Cb;Nb.Sequence<Pa&&(Ra|=1);var ec=[];var Bd=0;for(Cb=ta.expressions.length;Bd<Cb;++Bd)ec.push(this.generateExpression(ta.expressions[Bd],Nb.Assignment,Ra)),Bd+1<Cb&&ec.push(","+Aa);return G(ec,Nb.Sequence,Pa)},AssignmentExpression:function(ta,Pa,Ra){return this.generateAssignment(ta.left,ta.right,ta.operator,Pa,Ra)},ArrowFunctionExpression:function(ta,Pa,Ra){return G(this.generateFunctionBody(ta),Nb.ArrowFunction,
Pa)},ConditionalExpression:function(ta,Pa,Ra){Nb.Conditional<Pa&&(Ra|=1);return G([this.generateExpression(ta.test,Nb.LogicalOR,Ra),Aa+"?"+Aa,this.generateExpression(ta.consequent,Nb.Assignment,Ra),Aa+":"+Aa,this.generateExpression(ta.alternate,Nb.Assignment,Ra)],Nb.Conditional,Pa)},LogicalExpression:function(ta,Pa,Ra){return this.BinaryExpression(ta,Pa,Ra)},BinaryExpression:function(ta,Pa,Ra){var Cb=ld[ta.operator];var ec="**"===ta.operator?Nb.Postfix:Cb;var Bd="**"===ta.operator?Cb:Cb+1;Cb<Pa&&
(Ra|=1);ec=this.generateExpression(ta.left,ec,Ra);var Ad=ec.toString();Ad=47===Ad.charCodeAt(Ad.length-1)&&fc.code.isIdentifierPartES5(ta.operator.charCodeAt(0))?[ec,l(),ta.operator]:p(ec,ta.operator);ec=this.generateExpression(ta.right,Bd,Ra);"/"===ta.operator&&"/"===ec.toString().charAt(0)||"<"===ta.operator.slice(-1)&&"!--"===ec.toString().slice(0,3)?(Ad.push(l()),Ad.push(ec)):Ad=p(Ad,ec);return"in"!==ta.operator||Ra&1?G(Ad,Cb,Pa):["(",Ad,")"]},CallExpression:function(ta,Pa,Ra){var Cb;var ec=[this.generateExpression(ta.callee,
Nb.Call,3)];ta.optional&&ec.push("?.");ec.push("(");var Bd=0;for(Cb=ta.arguments.length;Bd<Cb;++Bd)ec.push(this.generateExpression(ta.arguments[Bd],Nb.Assignment,7)),Bd+1<Cb&&ec.push(","+Aa);ec.push(")");return Ra&2?G(ec,Nb.Call,Pa):["(",ec,")"]},ChainExpression:function(ta,Pa,Ra){Nb.OptionalChaining<Pa&&(Ra|=2);ta=this.generateExpression(ta.expression,Nb.OptionalChaining,Ra);return G(ta,Nb.OptionalChaining,Pa)},NewExpression:function(ta,Pa,Ra){var Cb=ta.arguments.length;var ec=p("new",this.generateExpression(ta.callee,
Nb.New,Ra&4&&!ib&&0===Cb?5:1));if(!(Ra&4)||ib||0<Cb){ec.push("(");for(Ra=0;Ra<Cb;++Ra)ec.push(this.generateExpression(ta.arguments[Ra],Nb.Assignment,7)),Ra+1<Cb&&ec.push(","+Aa);ec.push(")")}return G(ec,Nb.New,Pa)},MemberExpression:function(ta,Pa,Ra){var Cb=[this.generateExpression(ta.object,Nb.Call,Ra&2?3:1)];ta.computed?(ta.optional&&Cb.push("?."),Cb.push("["),Cb.push(this.generateExpression(ta.property,Nb.Sequence,Ra&2?7:5)),Cb.push("]")):(ta.optional||ta.object.type!==Jc.Literal||"number"!==typeof ta.object.value||
(Ra=e(Cb).toString(),0>Ra.indexOf(".")&&!/[eExX]/.test(Ra)&&fc.code.isDecimalDigit(Ra.charCodeAt(Ra.length-1))&&!(2<=Ra.length&&48===Ra.charCodeAt(0))&&Cb.push(" ")),Cb.push(ta.optional?"?.":"."),Cb.push(T(ta.property)));return G(Cb,Nb.Member,Pa)},MetaProperty:function(ta,Pa,Ra){Ra=[];Ra.push("string"===typeof ta.meta?ta.meta:T(ta.meta));Ra.push(".");Ra.push("string"===typeof ta.property?ta.property:T(ta.property));return G(Ra,Nb.Member,Pa)},UnaryExpression:function(ta,Pa,Ra){var Cb=this.generateExpression(ta.argument,
Nb.Unary,7);if(""===Aa)Ra=p(ta.operator,Cb);else if(Ra=[ta.operator],2<ta.operator.length)Ra=p(Ra,Cb);else{ta=e(Ra).toString();var ec=ta.charCodeAt(ta.length-1);ta=Cb.toString().charCodeAt(0);((43===ec||45===ec)&&ec===ta||fc.code.isIdentifierPartES5(ec)&&fc.code.isIdentifierPartES5(ta))&&Ra.push(l());Ra.push(Cb)}return G(Ra,Nb.Unary,Pa)},YieldExpression:function(ta,Pa,Ra){Ra=ta.delegate?"yield*":"yield";ta.argument&&(Ra=p(Ra,this.generateExpression(ta.argument,Nb.Yield,7)));return G(Ra,Nb.Yield,Pa)},
AwaitExpression:function(ta,Pa,Ra){ta=p(ta.all?"await*":"await",this.generateExpression(ta.argument,Nb.Await,7));return G(ta,Nb.Await,Pa)},UpdateExpression:function(ta,Pa,Ra){return ta.prefix?G([ta.operator,this.generateExpression(ta.argument,Nb.Unary,7)],Nb.Unary,Pa):G([this.generateExpression(ta.argument,Nb.Postfix,7),ta.operator],Nb.Postfix,Pa)},FunctionExpression:function(ta,Pa,Ra){Pa=[P(ta,!0),"function"];ta.id?(Pa.push(da(ta)||l()),Pa.push(T(ta.id))):Pa.push(da(ta)||Aa);Pa.push(this.generateFunctionBody(ta));
return Pa},ArrayPattern:function(ta,Pa,Ra){return this.ArrayExpression(ta,Pa,Ra,!0)},ArrayExpression:function(ta,Pa,Ra,Cb){var ec=this||Wl;if(!ta.elements.length)return"[]";var Bd=Cb?!1:1<ta.elements.length;var Ad=["[",Bd?la:""];u(function(Mc){var Ue;var Me=0;for(Ue=ta.elements.length;Me<Ue;++Me)ta.elements[Me]?(Ad.push(Bd?Mc:""),Ad.push(ec.generateExpression(ta.elements[Me],Nb.Assignment,7))):(Bd&&Ad.push(Mc),Me+1===Ue&&Ad.push(",")),Me+1<Ue&&Ad.push(","+(Bd?la:Aa))});Bd&&!f(e(Ad).toString())&&Ad.push(la);
Ad.push(Bd?za:"");Ad.push("]");return Ad},RestElement:function(ta,Pa,Ra){return"..."+this.generatePattern(ta.argument)},ClassExpression:function(ta,Pa,Ra){Pa=["class"];ta.id&&(Pa=p(Pa,this.generateExpression(ta.id,Nb.Sequence,7)));ta.superClass&&(Ra=p("extends",this.generateExpression(ta.superClass,Nb.Unary,7)),Pa=p(Pa,Ra));Pa.push(Aa);Pa.push(this.generateStatement(ta.body,33));return Pa},MethodDefinition:function(ta,Pa,Ra){Pa=ta["static"]?["static"+Aa]:[];ta="get"===ta.kind||"set"===ta.kind?[p(ta.kind,
this.generatePropertyKey(ta.key,ta.computed)),this.generateFunctionBody(ta.value)]:[fa(ta),this.generatePropertyKey(ta.key,ta.computed),this.generateFunctionBody(ta.value)];return p(Pa,ta)},Property:function(ta,Pa,Ra){return"get"===ta.kind||"set"===ta.kind?[ta.kind,l(),this.generatePropertyKey(ta.key,ta.computed),this.generateFunctionBody(ta.value)]:ta.shorthand?"AssignmentPattern"===ta.value.type?this.AssignmentPattern(ta.value,Nb.Sequence,7):this.generatePropertyKey(ta.key,ta.computed):ta.method?
[fa(ta),this.generatePropertyKey(ta.key,ta.computed),this.generateFunctionBody(ta.value)]:[this.generatePropertyKey(ta.key,ta.computed),":"+Aa,this.generateExpression(ta.value,Nb.Assignment,7)]},ObjectExpression:function(ta,Pa,Ra){var Cb,ec,Bd=this||Wl;if(!ta.properties.length)return"{}";var Ad=1<ta.properties.length;u(function(){ec=Bd.generateExpression(ta.properties[0],Nb.Sequence,7)});if(!Ad&&!/[\r\n]/g.test(e(ec).toString()))return["{",Aa,ec,Aa,"}"];u(function(Mc){var Ue;Cb=["{",la,Mc,ec];if(Ad){Cb.push(","+
la);var Me=1;for(Ue=ta.properties.length;Me<Ue;++Me)Cb.push(Mc),Cb.push(Bd.generateExpression(ta.properties[Me],Nb.Sequence,7)),Me+1<Ue&&Cb.push(","+la)}});f(e(Cb).toString())||Cb.push(la);Cb.push(za);Cb.push("}");return Cb},AssignmentPattern:function(ta,Pa,Ra){return this.generateAssignment(ta.left,ta.right,"=",Pa,Ra)},ObjectPattern:function(ta,Pa,Ra){var Cb=this||Wl;if(!ta.properties.length)return"{}";var ec=!1;if(1===ta.properties.length){var Bd=ta.properties[0];Bd.type===Jc.Property&&Bd.value.type!==
Jc.Identifier&&(ec=!0)}else for(Pa=0,Ra=ta.properties.length;Pa<Ra;++Pa)if(Bd=ta.properties[Pa],Bd.type===Jc.Property&&!Bd.shorthand){ec=!0;break}var Ad=["{",ec?la:""];u(function(Mc){var Ue;var Me=0;for(Ue=ta.properties.length;Me<Ue;++Me)Ad.push(ec?Mc:""),Ad.push(Cb.generateExpression(ta.properties[Me],Nb.Sequence,7)),Me+1<Ue&&Ad.push(","+(ec?la:Aa))});ec&&!f(e(Ad).toString())&&Ad.push(la);Ad.push(ec?za:"");Ad.push("}");return Ad},ThisExpression:function(ta,Pa,Ra){return"this"},Super:function(ta,
Pa,Ra){return"super"},Identifier:function(ta,Pa,Ra){return T(ta)},ImportDefaultSpecifier:function(ta,Pa,Ra){return T(ta.id||ta.local)},ImportNamespaceSpecifier:function(ta,Pa,Ra){Pa=["*"];(ta=ta.id||ta.local)&&Pa.push(Aa+"as"+l()+T(ta));return Pa},ImportSpecifier:function(ta,Pa,Ra){Pa=ta.imported;Ra=[Pa.name];(ta=ta.local)&&ta.name!==Pa.name&&Ra.push(l()+"as"+l()+T(ta));return Ra},ExportSpecifier:function(ta,Pa,Ra){Pa=ta.local;Ra=[Pa.name];(ta=ta.exported)&&ta.name!==Pa.name&&Ra.push(l()+"as"+l()+
T(ta));return Ra},Literal:function(ta,Pa,Ra){if(ta.hasOwnProperty("raw")&&Sa&&ya.raw)try{var Cb=Sa(ta.raw).body[0].expression;if(Cb.type===Jc.Literal&&Cb.value===ta.value)return ta.raw}catch(Me){}if(ta.regex)return"/"+ta.regex.pattern+"/"+ta.regex.flags;if(null===ta.value)return"null";if("string"===typeof ta.value){ta=ta.value;Pa="";var ec=0,Bd=0,Ad;Ra=0;for(Cb=ta.length;Ra<Cb;++Ra){var Mc=ta.charCodeAt(Ra);if(39===Mc)++ec;else if(34===Mc)++Bd;else if(47===Mc&&N)Pa+="\\";else if(fc.code.isLineTerminator(Mc)||
92===Mc){Pa+=k(Mc);continue}else if(!fc.code.isIdentifierPartES5(Mc)&&(N&&32>Mc||!N&&!sa&&(32>Mc||126<Mc))){Pa+=d(Mc,ta.charCodeAt(Ra+1));continue}Pa+=String.fromCharCode(Mc)}var Ue=(Ad=!("double"===ca||"auto"===ca&&Bd<ec))?"'":'"';if(Ad?ec:Bd){ta=Pa;Pa=Ue;Ra=0;for(Cb=ta.length;Ra<Cb;++Ra){Mc=ta.charCodeAt(Ra);if(39===Mc&&Ad||34===Mc&&!Ad)Pa+="\\";Pa+=String.fromCharCode(Mc)}ta=Pa+Ue}else ta=Ue+Pa+Ue;return ta}if("number"===typeof ta.value){ta=ta.value;if(ta!==ta)throw Error("Numeric literal whose value is NaN");
if(0>ta||0===ta&&0>1/ta)throw Error("Numeric literal whose value is negative");if(ta===1/0)ta=N?"null":ia?"1e400":"1e+400";else{Pa=""+ta;if(ia&&!(3>Pa.length)){Ra=Pa.indexOf(".");N||48!==Pa.charCodeAt(0)||1!==Ra||(Ra=0,Pa=Pa.slice(1));Cb=Pa;Pa=Pa.replace("e+","e");Mc=0;0<(ec=Cb.indexOf("e"))&&(Mc=+Cb.slice(ec+1),Cb=Cb.slice(0,ec));0<=Ra&&(Mc-=Cb.length-Ra-1,Cb=+(Cb.slice(0,Ra)+Cb.slice(Ra+1))+"");for(ec=0;48===Cb.charCodeAt(Cb.length+ec-1);)--ec;0!==ec&&(Mc-=ec,Cb=Cb.slice(0,ec));0!==Mc&&(Cb+="e"+
Mc);(Cb.length<Pa.length||W&&1E12<ta&&Math.floor(ta)===ta&&(Cb="0x"+ta.toString(16)).length<Pa.length)&&+Cb===ta&&(Pa=Cb)}ta=Pa}return ta}if("boolean"===typeof ta.value)return ta.value?"true":"false";ta=ta.value;Pa=ta.toString();if(ta.source)if(Ra=Pa.match(/\/([^/]*)$/)){Ra=Ra[1];Pa="";Ad=Bd=!1;Cb=0;for(Mc=ta.source.length;Cb<Mc;++Cb)ec=ta.source.charCodeAt(Cb),Ad?(Pa+=a(ec,Ad),Ad=!1):(Bd?93===ec&&(Bd=!1):47===ec?Pa+="\\":91===ec&&(Bd=!0),Pa+=a(ec,Ad),Ad=92===ec);ta="/"+Pa+"/"+Ra}else ta=Pa;else ta=
Pa;return ta},GeneratorExpression:function(ta,Pa,Ra){return this.ComprehensionExpression(ta,Pa,Ra)},ComprehensionExpression:function(ta,Pa,Ra){var Cb,ec,Bd=this||Wl;var Ad=ta.type===Jc.GeneratorExpression?["("]:["["];if(ya.moz.comprehensionExpressionStartsWithAssignment){var Mc=this.generateExpression(ta.body,Nb.Assignment,7);Ad.push(Mc)}ta.blocks&&u(function(){Cb=0;for(ec=ta.blocks.length;Cb<ec;++Cb)Mc=Bd.generateExpression(ta.blocks[Cb],Nb.Sequence,7),0<Cb||ya.moz.comprehensionExpressionStartsWithAssignment?
Ad=p(Ad,Mc):Ad.push(Mc)});ta.filter&&(Ad=p(Ad,"if"+Aa),Mc=this.generateExpression(ta.filter,Nb.Sequence,7),Ad=p(Ad,["(",Mc,")"]));ya.moz.comprehensionExpressionStartsWithAssignment||(Mc=this.generateExpression(ta.body,Nb.Assignment,7),Ad=p(Ad,Mc));Ad.push(ta.type===Jc.GeneratorExpression?")":"]");return Ad},ComprehensionBlock:function(ta,Pa,Ra){Pa=ta.left.type===Jc.VariableDeclaration?[ta.left.kind,l(),this.generateStatement(ta.left.declarations[0],0)]:this.generateExpression(ta.left,Nb.Call,7);Pa=
p(Pa,ta.of?"of":"in");Pa=p(Pa,this.generateExpression(ta.right,Nb.Sequence,7));return["for"+Aa+"(",Pa,")"]},SpreadElement:function(ta,Pa,Ra){return["...",this.generateExpression(ta.argument,Nb.Assignment,7)]},TaggedTemplateExpression:function(ta,Pa,Ra){var Cb=3;Ra&2||(Cb=1);ta=[this.generateExpression(ta.tag,Nb.Call,Cb),this.generateExpression(ta.quasi,Nb.Primary,4)];return G(ta,Nb.TaggedTemplate,Pa)},TemplateElement:function(ta,Pa,Ra){return ta.value.raw},TemplateLiteral:function(ta,Pa,Ra){var Cb;
Pa=["`"];Ra=0;for(Cb=ta.quasis.length;Ra<Cb;++Ra)Pa.push(this.generateExpression(ta.quasis[Ra],Nb.Primary,7)),Ra+1<Cb&&(Pa.push("${"+Aa),Pa.push(this.generateExpression(ta.expressions[Ra],Nb.Sequence,7)),Pa.push(Aa+"}"));Pa.push("`");return Pa},ModuleSpecifier:function(ta,Pa,Ra){return this.Literal(ta,Pa,Ra)},ImportExpression:function(ta,Pa,Ra){return G(["import(",this.generateExpression(ta.source,Nb.Assignment,7),")"],Nb.Call,Pa)}};m(K.prototype,K.Expression);K.prototype.generateExpression=function(ta,
Pa,Ra){var Cb=ta.type||Jc.Property;if(ya.verbatim&&ta.hasOwnProperty(ya.verbatim))return Cb=ta[ya.verbatim],"string"===typeof Cb?Ra=G(J(Cb),Nb.Sequence,Pa):(Ra=J(Cb.content),Cb=null!=Cb.precedence?Cb.precedence:Nb.Sequence,Ra=G(Ra,Cb,Pa)),e(Ra,ta);Pa=this[Cb](ta,Pa,Ra);ya.comment&&(Pa=z(ta,Pa));return e(Pa,ta)};K.prototype.generateStatement=function(ta,Pa){Pa=this[ta.type](ta,Pa);ya.comment&&(Pa=z(ta,Pa));var Ra=e(Pa).toString();ta.type!==Jc.Program||Ea||""!==la||"\n"!==Ra.charAt(Ra.length-1)||(Pa=
Qb?e(Pa).replaceRight(/\s+$/,""):Ra.replace(/\s+$/,""));return e(Pa,ta)};var Od=c().format;kn.version="2.0.0";kn.generate=function(ta,Pa){var Ra=c();null!=Pa?("string"===typeof Pa.indent&&(Ra.format.indent.style=Pa.indent),"number"===typeof Pa.base&&(Ra.format.indent.base=Pa.base),Pa=n(Ra,Pa),Ia=Pa.format.indent.style,za="string"===typeof Pa.base?Pa.base:h(Ia,Pa.format.indent.base)):(Pa=Ra,Ia=Pa.format.indent.style,za=h(Ia,Pa.format.indent.base));N=Pa.format.json;ia=Pa.format.renumber;W=N?!1:Pa.format.hexadecimal;
ca=N?"double":Pa.format.quotes;sa=Pa.format.escapeless;la=Pa.format.newline;Aa=Pa.format.space;Pa.format.compact&&(la=Aa=Ia=za="");ib=Pa.format.parentheses;ob=Pa.format.semicolons;Ea=Pa.format.safeConcatenation;ua=Pa.directive;Sa=N?null:Pa.parse;Qb=Pa.sourceMap;mc=Pa.sourceCode;Yb=Pa.format.preserveBlankLines&&null!==mc;ya=Pa;Qb&&(ka=kn.browser?Wl.sourceMap.SourceNode:Lm);Ra=new K;if(K.Statement.hasOwnProperty(ta.type))ta=Ra.generateStatement(ta,1);else if(K.Expression.hasOwnProperty(ta.type))ta=
Ra.generateExpression(ta,Nb.Sequence,7);else throw Error("Unknown node type: "+ta.type);if(!Qb)return ta={code:ta.toString(),map:null},Pa.sourceMapWithCode?ta:ta.code;ta=ta.toStringWithSourceMap({file:Pa.file,sourceRoot:Pa.sourceMapRoot});Pa.sourceContent&&ta.map.setSourceContent(Pa.sourceMap,Pa.sourceContent);return Pa.sourceMapWithCode?ta:ta.map.toString()};kn.attachComments=gV.attachComments;kn.Precedence=n({},Nb);kn.browser=!1;kn.FORMAT_MINIFY={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,
quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1};kn.FORMAT_DEFAULTS=Od})();var wna=Object.freeze({__proto__:null,"default":kn,FORMAT_DEFAULTS:kn.FORMAT_DEFAULTS,FORMAT_MINIFY:kn.FORMAT_MINIFY,Precedence:kn.Precedence,attachComments:kn.attachComments,browser:kn.browser,generate:kn.generate,version:kn.version}),to=lively.FreezerRuntime.recorderFor("lively.ast/lib/stringify.js");to.stringify=Bk;to.obj=eg;to.escodegen=wna;to.es=to.escodegen.escodegen||to.escodegen;var IA=to.es;to.escodegen=
IA;to.es=IA;to.default=Bk;var kV={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},xna={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",
"5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},yna=/^in(stanceof)?$/,lV="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
L8="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
Efa=new RegExp("["+lV+"]"),Ffa=new RegExp("["+lV+L8+"]");lV=L8=null;var YZ=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,
14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,
0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],Gfa=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,
13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,
9,787719,239],uj=function(c,h){void 0===h&&(h={});this.label=c;this.keyword=h.keyword;this.beforeExpr=!!h.beforeExpr;this.startsExpr=!!h.startsExpr;this.isLoop=!!h.isLoop;this.isAssign=!!h.isAssign;this.prefix=!!h.prefix;this.postfix=!!h.postfix;this.binop=h.binop||null;this.updateContext=null},yp={beforeExpr:!0},Io={startsExpr:!0},HG={},ac={num:new uj("num",Io),regexp:new uj("regexp",Io),string:new uj("string",Io),name:new uj("name",Io),eof:new uj("eof"),bracketL:new uj("[",{beforeExpr:!0,startsExpr:!0}),
bracketR:new uj("]"),braceL:new uj("{",{beforeExpr:!0,startsExpr:!0}),braceR:new uj("}"),parenL:new uj("(",{beforeExpr:!0,startsExpr:!0}),parenR:new uj(")"),comma:new uj(",",yp),semi:new uj(";",yp),colon:new uj(":",yp),dot:new uj("."),question:new uj("?",yp),questionDot:new uj("?."),arrow:new uj("=>",yp),template:new uj("template"),invalidTemplate:new uj("invalidTemplate"),ellipsis:new uj("...",yp),backQuote:new uj("`",Io),dollarBraceL:new uj("${",{beforeExpr:!0,startsExpr:!0}),eq:new uj("=",{beforeExpr:!0,
isAssign:!0}),assign:new uj("_=",{beforeExpr:!0,isAssign:!0}),incDec:new uj("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new uj("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:bp("||",1),logicalAND:bp("&&",2),bitwiseOR:bp("|",3),bitwiseXOR:bp("^",4),bitwiseAND:bp("&",5),equality:bp("==/!=/===/!==",6),relational:bp("</>/<=/>=",7),bitShift:bp("<</>>/>>>",8),plusMin:new uj("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:bp("%",10),star:bp("*",10),slash:bp("/",10),starstar:new uj("**",
{beforeExpr:!0}),coalesce:bp("??",1),_break:dj("break"),_case:dj("case",yp),_catch:dj("catch"),_continue:dj("continue"),_debugger:dj("debugger"),_default:dj("default",yp),_do:dj("do",{isLoop:!0,beforeExpr:!0}),_else:dj("else",yp),_finally:dj("finally"),_for:dj("for",{isLoop:!0}),_function:dj("function",Io),_if:dj("if"),_return:dj("return",yp),_switch:dj("switch"),_throw:dj("throw",yp),_try:dj("try"),_var:dj("var"),_const:dj("const"),_while:dj("while",{isLoop:!0}),_with:dj("with"),_new:dj("new",{beforeExpr:!0,
startsExpr:!0}),_this:dj("this",Io),_super:dj("super",Io),_class:dj("class",Io),_extends:dj("extends",yp),_export:dj("export"),_import:dj("import",Io),_null:dj("null",Io),_true:dj("true",Io),_false:dj("false",Io),_in:dj("in",{beforeExpr:!0,binop:7}),_instanceof:dj("instanceof",{beforeExpr:!0,binop:7}),_typeof:dj("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:dj("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:dj("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Jo=/\r\n?|\n|\u2028|\u2029/,
kz=new RegExp(Jo.source,"g"),mV=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,zp=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,M8=Object.prototype,JG=M8.hasOwnProperty,zna=M8.toString,$Z=Array.isArray||function(c){return"[object Array]"===zna.call(c)},lz=function(c,h){this.line=c;this.column=h};lz.prototype.offset=function(c){return new lz(this.line,this.column+c)};var kC=function(c,h,f){this.start=h;this.end=f;null!==c.sourceFile&&(this.source=c.sourceFile)},IG={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,
onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},ZZ=!1,bl=function(c,h,f){this.options=c=Hfa(c);this.sourceFile=c.sourceFile;this.keywords=jw(xna[6<=c.ecmaVersion?6:"module"===c.sourceType?"5module":5]);var m="";!0!==c.allowReserved&&(m=kV[6<=c.ecmaVersion?6:5===c.ecmaVersion?5:3],
"module"===c.sourceType&&(m+=" await"));this.reservedWords=jw(m);m=(m?m+" ":"")+kV.strict;this.reservedWordsStrict=jw(m);this.reservedWordsStrictBind=jw(m+" "+kV.strictBind);this.input=String(h);this.containsEsc=!1;f?(this.pos=f,this.lineStart=this.input.lastIndexOf("\n",f-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Jo).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=ac.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=
this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===c.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports={};0===this.pos&&c.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null},vu={inFunction:{configurable:!0},
inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};bl.prototype.parse=function(){var c=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(c)};vu.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};vu.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)};vu.inAsync.get=function(){return 0<(this.currentVarScope().flags&
4)};vu.allowSuper.get=function(){return 0<(this.currentThisScope().flags&64)};vu.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};vu.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};vu.inNonArrowFunction.get=function(){return 0<(this.currentThisScope().flags&2)};bl.extend=function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var f=0;f<c.length;f++)h=c[f](h);return h};bl.parse=function(c,h){return(new this(h,
c)).parse()};bl.parseExpressionAt=function(c,h,f){c=new this(f,c,h);c.nextToken();return c.parseExpression()};bl.tokenizer=function(c,h){return new this(h,c)};Object.defineProperties(bl.prototype,vu);var An=bl.prototype,Ana=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;An.strictDirective=function(c){for(;;){zp.lastIndex=c;c+=zp.exec(this.input)[0].length;var h=Ana.exec(this.input.slice(c));if(!h)return!1;if("use strict"===(h[1]||h[2])){zp.lastIndex=c+h[0].length;c=zp.exec(this.input);h=c.index+
c[0].length;var f=this.input.charAt(h);return";"===f||"}"===f||Jo.test(c[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(f)||"!"===f&&"="===this.input.charAt(h+1))}c+=h[0].length;zp.lastIndex=c;c+=zp.exec(this.input)[0].length;";"===this.input[c]&&c++}};An.eat=function(c){return this.type===c?(this.next(),!0):!1};An.isContextual=function(c){return this.type===ac.name&&this.value===c&&!this.containsEsc};An.eatContextual=function(c){if(!this.isContextual(c))return!1;this.next();return!0};An.expectContextual=function(c){this.eatContextual(c)||
this.unexpected()};An.canInsertSemicolon=function(){return this.type===ac.eof||this.type===ac.braceR||Jo.test(this.input.slice(this.lastTokEnd,this.start))};An.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};An.semicolon=function(){this.eat(ac.semi)||this.insertSemicolon()||this.unexpected()};An.afterTrailingComma=function(c,h){if(this.type===c){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,
this.lastTokStartLoc);h||this.next();return!0}};An.expect=function(c){this.eat(c)||this.unexpected()};An.unexpected=function(c){this.raise(null!=c?c:this.start,"Unexpected token")};An.checkPatternErrors=function(c,h){c&&(-1<c.trailingComma&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element"),c=h?c.parenthesizedAssign:c.parenthesizedBind,-1<c&&this.raiseRecoverable(c,"Parenthesized pattern"))};An.checkExpressionErrors=function(c,h){if(!c)return!1;var f=c.shorthandAssign;
c=c.doubleProto;if(!h)return 0<=f||0<=c;0<=f&&this.raise(f,"Shorthand property assignments are valid only in destructuring patterns");0<=c&&this.raiseRecoverable(c,"Redefinition of __proto__ property")};An.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};An.isSimpleAssignTarget=function(c){return"ParenthesizedExpression"===
c.type?this.isSimpleAssignTarget(c.expression):"Identifier"===c.type||"MemberExpression"===c.type};var ki=bl.prototype;ki.parseTopLevel=function(c){var h={};c.body||(c.body=[]);for(;this.type!==ac.eof;){var f=this.parseStatement(null,!0,h);c.body.push(f)}if(this.inModule)for(h=0,f=Object.keys(this.undefinedExports);h<f.length;h+=1){var m=f[h];this.raiseRecoverable(this.undefinedExports[m].start,"Export '"+m+"' is not defined")}this.adaptDirectivePrologue(c.body);this.next();c.sourceType=this.options.sourceType;
return this.finishNode(c,"Program")};var nV={kind:"loop"},Bna={kind:"switch"};ki.isLet=function(c){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;zp.lastIndex=this.pos;var h=zp.exec(this.input);h=this.pos+h[0].length;var f=this.input.charCodeAt(h);if(91===f)return!0;if(c)return!1;if(123===f)return!0;if(un(f,!0)){for(c=h+1;ap(this.input.charCodeAt(c),!0);)++c;c=this.input.slice(h,c);if(!yna.test(c))return!0}return!1};ki.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;
zp.lastIndex=this.pos;var c=zp.exec(this.input);c=this.pos+c[0].length;return!Jo.test(this.input.slice(this.pos,c))&&"function"===this.input.slice(c,c+8)&&(c+8===this.input.length||!ap(this.input.charAt(c+8)))};ki.parseStatement=function(c,h,f){var m=this.type,n=this.startNode();if(this.isLet(c)){m=ac._var;var a="let"}switch(m){case ac._break:case ac._continue:return this.parseBreakContinueStatement(n,m.keyword);case ac._debugger:return this.parseDebuggerStatement(n);case ac._do:return this.parseDoStatement(n);
case ac._for:return this.parseForStatement(n);case ac._function:return c&&(this.strict||"if"!==c&&"label"!==c)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(n,!1,!c);case ac._class:return c&&this.unexpected(),this.parseClass(n,!0);case ac._if:return this.parseIfStatement(n);case ac._return:return this.parseReturnStatement(n);case ac._switch:return this.parseSwitchStatement(n);case ac._throw:return this.parseThrowStatement(n);case ac._try:return this.parseTryStatement(n);
case ac._const:case ac._var:return a=a||this.value,c&&"var"!==a&&this.unexpected(),this.parseVarStatement(n,a);case ac._while:return this.parseWhileStatement(n);case ac._with:return this.parseWithStatement(n);case ac.braceL:return this.parseBlock(!0,n);case ac.semi:return this.parseEmptyStatement(n);case ac._export:case ac._import:if(10<this.options.ecmaVersion&&m===ac._import&&(zp.lastIndex=this.pos,c=zp.exec(this.input),c=this.input.charCodeAt(this.pos+c[0].length),40===c||46===c))return this.parseExpressionStatement(n,
this.parseExpression());this.options.allowImportExportEverywhere||(h||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return m===ac._import?this.parseImport(n):this.parseExport(n,f);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!c);h=this.value;f=this.parseExpression();return m===ac.name&&"Identifier"===
f.type&&this.eat(ac.colon)?this.parseLabeledStatement(n,h,f,c):this.parseExpressionStatement(n,f)}};ki.parseBreakContinueStatement=function(c,h){var f="break"===h;this.next();this.eat(ac.semi)||this.insertSemicolon()?c.label=null:this.type!==ac.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var m=0;m<this.labels.length;++m){var n=this.labels[m];if(null==c.label||n.name===c.label.name){if(null!=n.kind&&(f||"loop"===n.kind))break;if(c.label&&f)break}}m===this.labels.length&&
this.raise(c.start,"Unsyntactic "+h);return this.finishNode(c,f?"BreakStatement":"ContinueStatement")};ki.parseDebuggerStatement=function(c){this.next();this.semicolon();return this.finishNode(c,"DebuggerStatement")};ki.parseDoStatement=function(c){this.next();this.labels.push(nV);c.body=this.parseStatement("do");this.labels.pop();this.expect(ac._while);c.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(ac.semi):this.semicolon();return this.finishNode(c,"DoWhileStatement")};ki.parseForStatement=
function(c){this.next();var h=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(nV);this.enterScope(0);this.expect(ac.parenL);if(this.type===ac.semi)return-1<h&&this.unexpected(h),this.parseFor(c,null);var f=this.isLet();if(this.type===ac._var||this.type===ac._const||f){var m=this.startNode();f=f?"let":this.value;this.next();this.parseVar(m,!0,f);this.finishNode(m,"VariableDeclaration");
if((this.type===ac._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===m.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===ac._in?-1<h&&this.unexpected(h):c.await=-1<h),this.parseForIn(c,m);-1<h&&this.unexpected(h);return this.parseFor(c,m)}m=new KG;f=this.parseExpression(!0,m);if(this.type===ac._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===ac._in?-1<h&&this.unexpected(h):c.await=-1<h),this.toAssignable(f,
!1,m),this.checkLValPattern(f),this.parseForIn(c,f);this.checkExpressionErrors(m,!0);-1<h&&this.unexpected(h);return this.parseFor(c,f)};ki.parseFunctionStatement=function(c,h,f){this.next();return this.parseFunction(c,pE|(f?0:oV),!1,h)};ki.parseIfStatement=function(c){this.next();c.test=this.parseParenExpression();c.consequent=this.parseStatement("if");c.alternate=this.eat(ac._else)?this.parseStatement("if"):null;return this.finishNode(c,"IfStatement")};ki.parseReturnStatement=function(c){this.inFunction||
this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(ac.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),this.semicolon());return this.finishNode(c,"ReturnStatement")};ki.parseSwitchStatement=function(c){this.next();c.discriminant=this.parseParenExpression();c.cases=[];this.expect(ac.braceL);this.labels.push(Bna);this.enterScope(0);for(var h,f=!1;this.type!==ac.braceR;)if(this.type===ac._case||this.type===
ac._default){var m=this.type===ac._case;h&&this.finishNode(h,"SwitchCase");c.cases.push(h=this.startNode());h.consequent=[];this.next();m?h.test=this.parseExpression():(f&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),f=!0,h.test=null);this.expect(ac.colon)}else h||this.unexpected(),h.consequent.push(this.parseStatement(null));this.exitScope();h&&this.finishNode(h,"SwitchCase");this.next();this.labels.pop();return this.finishNode(c,"SwitchStatement")};ki.parseThrowStatement=
function(c){this.next();Jo.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");c.argument=this.parseExpression();this.semicolon();return this.finishNode(c,"ThrowStatement")};var Cna=[];ki.parseTryStatement=function(c){this.next();c.block=this.parseBlock();c.handler=null;if(this.type===ac._catch){var h=this.startNode();this.next();if(this.eat(ac.parenL)){h.param=this.parseBindingAtom();var f="Identifier"===h.param.type;this.enterScope(f?32:
0);this.checkLValPattern(h.param,f?4:2);this.expect(ac.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),h.param=null,this.enterScope(0);h.body=this.parseBlock(!1);this.exitScope();c.handler=this.finishNode(h,"CatchClause")}c.finalizer=this.eat(ac._finally)?this.parseBlock():null;c.handler||c.finalizer||this.raise(c.start,"Missing catch or finally clause");return this.finishNode(c,"TryStatement")};ki.parseVarStatement=function(c,h){this.next();this.parseVar(c,!1,h);this.semicolon();return this.finishNode(c,
"VariableDeclaration")};ki.parseWhileStatement=function(c){this.next();c.test=this.parseParenExpression();this.labels.push(nV);c.body=this.parseStatement("while");this.labels.pop();return this.finishNode(c,"WhileStatement")};ki.parseWithStatement=function(c){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();c.object=this.parseParenExpression();c.body=this.parseStatement("with");return this.finishNode(c,"WithStatement")};ki.parseEmptyStatement=function(c){this.next();return this.finishNode(c,
"EmptyStatement")};ki.parseLabeledStatement=function(c,h,f,m){for(var n=0,a=this.labels;n<a.length;n+=1)a[n].name===h&&this.raise(f.start,"Label '"+h+"' is already declared");n=this.type.isLoop?"loop":this.type===ac._switch?"switch":null;for(a=this.labels.length-1;0<=a;a--){var d=this.labels[a];if(d.statementStart===c.start)d.statementStart=this.start,d.kind=n;else break}this.labels.push({name:h,kind:n,statementStart:this.start});c.body=this.parseStatement(m?-1===m.indexOf("label")?m+"label":m:"label");
this.labels.pop();c.label=f;return this.finishNode(c,"LabeledStatement")};ki.parseExpressionStatement=function(c,h){c.expression=h;this.semicolon();return this.finishNode(c,"ExpressionStatement")};ki.parseBlock=function(c,h,f){void 0===c&&(c=!0);void 0===h&&(h=this.startNode());h.body=[];this.expect(ac.braceL);for(c&&this.enterScope(0);this.type!==ac.braceR;){var m=this.parseStatement(null);h.body.push(m)}f&&(this.strict=!1);this.next();c&&this.exitScope();return this.finishNode(h,"BlockStatement")};
ki.parseFor=function(c,h){c.init=h;this.expect(ac.semi);c.test=this.type===ac.semi?null:this.parseExpression();this.expect(ac.semi);c.update=this.type===ac.parenR?null:this.parseExpression();this.expect(ac.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,"ForStatement")};ki.parseForIn=function(c,h){var f=this.type===ac._in;this.next();"VariableDeclaration"===h.type&&null!=h.declarations[0].init&&(!f||8>this.options.ecmaVersion||this.strict||"var"!==
h.kind||"Identifier"!==h.declarations[0].id.type)&&this.raise(h.start,(f?"for-in":"for-of")+" loop variable declaration may not have an initializer");c.left=h;c.right=f?this.parseExpression():this.parseMaybeAssign();this.expect(ac.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,f?"ForInStatement":"ForOfStatement")};ki.parseVar=function(c,h,f){c.declarations=[];for(c.kind=f;;){var m=this.startNode();this.parseVarId(m,f);this.eat(ac.eq)?m.init=this.parseMaybeAssign(h):
"const"!==f||this.type===ac._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===m.id.type||h&&(this.type===ac._in||this.isContextual("of"))?m.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();c.declarations.push(this.finishNode(m,"VariableDeclarator"));if(!this.eat(ac.comma))break}return c};ki.parseVarId=function(c,h){c.id=this.parseBindingAtom();this.checkLValPattern(c.id,"var"===h?1:2,!1)};var pE=1,oV=2;ki.parseFunction=
function(c,h,f,m){this.initFunction(c);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!m)this.type===ac.star&&h&oV&&this.unexpected(),c.generator=this.eat(ac.star);8<=this.options.ecmaVersion&&(c.async=!!m);h&pE&&(c.id=h&4&&this.type!==ac.name?null:this.parseIdent(),!c.id||h&oV||this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?1:2:3));m=this.yieldPos;var n=this.awaitPos,a=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|
(c.async?4:0)|(c.generator?8:0));h&pE||(c.id=this.type===ac.name?this.parseIdent():null);this.parseFunctionParams(c);this.parseFunctionBody(c,f,!1);this.yieldPos=m;this.awaitPos=n;this.awaitIdentPos=a;return this.finishNode(c,h&pE?"FunctionDeclaration":"FunctionExpression")};ki.parseFunctionParams=function(c){this.expect(ac.parenL);c.params=this.parseBindingList(ac.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};ki.parseClass=function(c,h){this.next();var f=this.strict;
this.strict=!0;this.parseClassId(c,h);this.parseClassSuper(c);var m=this.startNode(),n=!1;m.body=[];for(this.expect(ac.braceL);this.type!==ac.braceR;){var a=this.parseClassElement(null!==c.superClass);a&&(m.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind&&(n&&this.raise(a.start,"Duplicate constructor in the same class"),n=!0))}this.strict=f;this.next();c.body=this.finishNode(m,"ClassBody");return this.finishNode(c,h?"ClassDeclaration":"ClassExpression")};ki.parseClassElement=function(c){var h=
this;if(this.eat(ac.semi))return null;var f=this.startNode(),m=function(k,b){void 0===b&&(b=!1);var e=h.start,l=h.startLoc;if(!h.eatContextual(k))return!1;if(!(h.type===ac.parenL||b&&h.canInsertSemicolon()))return!0;f.key&&h.unexpected();f.computed=!1;f.key=h.startNodeAt(e,l);f.key.name=k;h.finishNode(f.key,"Identifier");return!1};f.kind="method";f.static=m("static");var n=this.eat(ac.star),a=!1;n||(8<=this.options.ecmaVersion&&m("async",!0)?(a=!0,n=9<=this.options.ecmaVersion&&this.eat(ac.star)):
m("get")?f.kind="get":m("set")&&(f.kind="set"));f.key||this.parsePropertyName(f);m=f.key;var d=!1;f.computed||f.static||!("Identifier"===m.type&&"constructor"===m.name||"Literal"===m.type&&"constructor"===m.value)?f.static&&"Identifier"===m.type&&"prototype"===m.name&&this.raise(m.start,"Classes may not have a static property named prototype"):("method"!==f.kind&&this.raise(m.start,"Constructor can't have get/set modifier"),n&&this.raise(m.start,"Constructor can't be a generator"),a&&this.raise(m.start,
"Constructor can't be an async method"),f.kind="constructor",d=c);this.parseClassMethod(f,n,a,d);"get"===f.kind&&0!==f.value.params.length&&this.raiseRecoverable(f.value.start,"getter should have no params");"set"===f.kind&&1!==f.value.params.length&&this.raiseRecoverable(f.value.start,"setter should have exactly one param");"set"===f.kind&&"RestElement"===f.value.params[0].type&&this.raiseRecoverable(f.value.params[0].start,"Setter cannot use rest params");return f};ki.parseClassMethod=function(c,
h,f,m){c.value=this.parseMethod(h,f,m);return this.finishNode(c,"MethodDefinition")};ki.parseClassId=function(c,h){this.type===ac.name?(c.id=this.parseIdent(),h&&this.checkLValSimple(c.id,2,!1)):(!0===h&&this.unexpected(),c.id=null)};ki.parseClassSuper=function(c){c.superClass=this.eat(ac._extends)?this.parseExprSubscripts():null};ki.parseExport=function(c,h){this.next();if(this.eat(ac.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(c.exported=this.parseIdent(!0),this.checkExport(h,
c.exported.name,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==ac.string&&this.unexpected(),c.source=this.parseExprAtom(),this.semicolon(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(ac._default)){this.checkExport(h,"default",this.lastTokStart);var f;this.type===ac._function||(f=this.isAsyncFunction())?(h=this.startNode(),this.next(),f&&this.next(),c.declaration=this.parseFunction(h,pE|4,!1,f)):this.type===ac._class?(f=this.startNode(),c.declaration=this.parseClass(f,
"nullableID")):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())c.declaration=this.parseStatement(null),"VariableDeclaration"===c.declaration.type?this.checkVariableExport(h,c.declaration.declarations):this.checkExport(h,c.declaration.id.name,c.declaration.id.start),c.specifiers=[],c.source=null;else{c.declaration=null;c.specifiers=this.parseExportSpecifiers(h);if(this.eatContextual("from"))this.type!==
ac.string&&this.unexpected(),c.source=this.parseExprAtom();else{f=0;for(h=c.specifiers;f<h.length;f+=1){var m=h[f];this.checkUnreserved(m.local);this.checkLocalExport(m.local)}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")};ki.checkExport=function(c,h,f){c&&(JG.call(c,h)&&this.raiseRecoverable(f,"Duplicate export '"+h+"'"),c[h]=!0)};ki.checkPatternExport=function(c,h){var f=h.type;if("Identifier"===f)this.checkExport(c,h.name,h.start);else if("ObjectPattern"===f)for(f=
0,h=h.properties;f<h.length;f+=1)this.checkPatternExport(c,h[f]);else if("ArrayPattern"===f)for(f=0,h=h.elements;f<h.length;f+=1){var m=h[f];m&&this.checkPatternExport(c,m)}else"Property"===f?this.checkPatternExport(c,h.value):"AssignmentPattern"===f?this.checkPatternExport(c,h.left):"RestElement"===f?this.checkPatternExport(c,h.argument):"ParenthesizedExpression"===f&&this.checkPatternExport(c,h.expression)};ki.checkVariableExport=function(c,h){if(c)for(var f=0;f<h.length;f+=1)this.checkPatternExport(c,
h[f].id)};ki.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};ki.parseExportSpecifiers=function(c){var h=[],f=!0;for(this.expect(ac.braceL);!this.eat(ac.braceR);){if(f)f=!1;else if(this.expect(ac.comma),this.afterTrailingComma(ac.braceR))break;var m=this.startNode();m.local=this.parseIdent(!0);m.exported=this.eatContextual("as")?this.parseIdent(!0):
m.local;this.checkExport(c,m.exported.name,m.exported.start);h.push(this.finishNode(m,"ExportSpecifier"))}return h};ki.parseImport=function(c){this.next();this.type===ac.string?(c.specifiers=Cna,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===ac.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(c,"ImportDeclaration")};ki.parseImportSpecifiers=function(){var c=[],h=!0;if(this.type===ac.name){var f=
this.startNode();f.local=this.parseIdent();this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportDefaultSpecifier"));if(!this.eat(ac.comma))return c}if(this.type===ac.star)return h=this.startNode(),this.next(),this.expectContextual("as"),h.local=this.parseIdent(),this.checkLValSimple(h.local,2),c.push(this.finishNode(h,"ImportNamespaceSpecifier")),c;for(this.expect(ac.braceL);!this.eat(ac.braceR);){if(h)h=!1;else if(this.expect(ac.comma),this.afterTrailingComma(ac.braceR))break;f=this.startNode();
f.imported=this.parseIdent(!0);this.eatContextual("as")?f.local=this.parseIdent():(this.checkUnreserved(f.imported),f.local=f.imported);this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportSpecifier"))}return c};ki.adaptDirectivePrologue=function(c){for(var h=0;h<c.length&&this.isDirectiveCandidate(c[h]);++h)c[h].directive=c[h].expression.raw.slice(1,-1)};ki.isDirectiveCandidate=function(c){return"ExpressionStatement"===c.type&&"Literal"===c.expression.type&&"string"===typeof c.expression.value&&
('"'===this.input[c.start]||"'"===this.input[c.start])};var rq=bl.prototype;rq.toAssignable=function(c,h,f){if(6<=this.options.ecmaVersion&&c)switch(c.type){case "Identifier":this.inAsync&&"await"===c.name&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":c.type="ObjectPattern";f&&this.checkPatternErrors(f,!0);f=0;for(var m=c.properties;f<m.length;f+=
1){var n=m[f];this.toAssignable(n,h);"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case "Property":"init"!==c.kind&&this.raise(c.key.start,"Object pattern can't contain getter or setter");this.toAssignable(c.value,h);break;case "ArrayExpression":c.type="ArrayPattern";f&&this.checkPatternErrors(f,!0);this.toAssignableList(c.elements,h);break;case "SpreadElement":c.type="RestElement";this.toAssignable(c.argument,
h);"AssignmentPattern"===c.argument.type&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==c.operator&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value.");c.type="AssignmentPattern";delete c.operator;this.toAssignable(c.left,h);break;case "ParenthesizedExpression":this.toAssignable(c.expression,h,f);break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");
break;case "MemberExpression":if(!h)break;default:this.raise(c.start,"Assigning to rvalue")}else f&&this.checkPatternErrors(f,!0);return c};rq.toAssignableList=function(c,h){for(var f=c.length,m=0;m<f;m++){var n=c[m];n&&this.toAssignable(n,h)}f&&(f=c[f-1],6===this.options.ecmaVersion&&h&&f&&"RestElement"===f.type&&"Identifier"!==f.argument.type&&this.unexpected(f.argument.start));return c};rq.parseSpread=function(c){var h=this.startNode();this.next();h.argument=this.parseMaybeAssign(!1,c);return this.finishNode(h,
"SpreadElement")};rq.parseRestBinding=function(){var c=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==ac.name&&this.unexpected();c.argument=this.parseBindingAtom();return this.finishNode(c,"RestElement")};rq.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case ac.bracketL:var c=this.startNode();this.next();c.elements=this.parseBindingList(ac.bracketR,!0,!0);return this.finishNode(c,"ArrayPattern");case ac.braceL:return this.parseObj(!0)}return this.parseIdent()};
rq.parseBindingList=function(c,h,f){for(var m=[],n=!0;!this.eat(c);)if(n?n=!1:this.expect(ac.comma),h&&this.type===ac.comma)m.push(null);else if(f&&this.afterTrailingComma(c))break;else if(this.type===ac.ellipsis){h=this.parseRestBinding();this.parseBindingListItem(h);m.push(h);this.type===ac.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(c);break}else{var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a);m.push(a)}return m};
rq.parseBindingListItem=function(c){return c};rq.parseMaybeDefault=function(c,h,f){f=f||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(ac.eq))return f;c=this.startNodeAt(c,h);c.left=f;c.right=this.parseMaybeAssign();return this.finishNode(c,"AssignmentPattern")};rq.checkLValSimple=function(c,h,f){void 0===h&&(h=0);var m=0!==h;switch(c.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,(m?"Binding ":"Assigning to ")+c.name+
" in strict mode");m&&(2===h&&"let"===c.name&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),f&&(JG.call(f,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),f[c.name]=!0),5!==h&&this.declareName(c.name,h,c.start));break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":m&&this.raiseRecoverable(c.start,"Binding member expression");break;case "ParenthesizedExpression":return m&&
this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,h,f);default:this.raise(c.start,(m?"Binding":"Assigning to")+" rvalue")}};rq.checkLValPattern=function(c,h,f){void 0===h&&(h=0);switch(c.type){case "ObjectPattern":var m=0;for(c=c.properties;m<c.length;m+=1)this.checkLValInnerPattern(c[m],h,f);break;case "ArrayPattern":m=0;for(c=c.elements;m<c.length;m+=1){var n=c[m];n&&this.checkLValInnerPattern(n,h,f)}break;default:this.checkLValSimple(c,h,f)}};rq.checkLValInnerPattern=
function(c,h,f){void 0===h&&(h=0);switch(c.type){case "Property":this.checkLValInnerPattern(c.value,h,f);break;case "AssignmentPattern":this.checkLValPattern(c.left,h,f);break;case "RestElement":this.checkLValPattern(c.argument,h,f);break;default:this.checkLValPattern(c,h,f)}};var zi=bl.prototype;zi.checkPropClash=function(c,h,f){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===c.type||6<=this.options.ecmaVersion&&(c.computed||c.method||c.shorthand))){var m=c.key;switch(m.type){case "Identifier":var n=
m.name;break;case "Literal":n=String(m.value);break;default:return}c=c.kind;6<=this.options.ecmaVersion?"__proto__"===n&&"init"===c&&(h.proto&&(f?0>f.doubleProto&&(f.doubleProto=m.start):this.raiseRecoverable(m.start,"Redefinition of __proto__ property")),h.proto=!0):(n="$"+n,(f=h[n])?("init"===c?this.strict&&f.init||f.get||f.set:f.init||f[c])&&this.raiseRecoverable(m.start,"Redefinition of property"):f=h[n]={init:!1,get:!1,set:!1},f[c]=!0)}};zi.parseExpression=function(c,h){var f=this.start,m=this.startLoc,
n=this.parseMaybeAssign(c,h);if(this.type===ac.comma){f=this.startNodeAt(f,m);for(f.expressions=[n];this.eat(ac.comma);)f.expressions.push(this.parseMaybeAssign(c,h));return this.finishNode(f,"SequenceExpression")}return n};zi.parseMaybeAssign=function(c,h,f){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var m=!1,n=-1,a=-1;h?(n=h.parenthesizedAssign,a=h.trailingComma,h.parenthesizedAssign=h.trailingComma=-1):(h=new KG,m=!0);var d=this.start,k=this.startLoc;
if(this.type===ac.parenL||this.type===ac.name)this.potentialArrowAt=this.start;var b=this.parseMaybeConditional(c,h);f&&(b=f.call(this,b,d,k));if(this.type.isAssign)return f=this.startNodeAt(d,k),f.operator=this.value,this.type===ac.eq&&(b=this.toAssignable(b,!1,h)),m||(h.parenthesizedAssign=h.trailingComma=h.doubleProto=-1),h.shorthandAssign>=b.start&&(h.shorthandAssign=-1),this.type===ac.eq?this.checkLValPattern(b):this.checkLValSimple(b),f.left=b,this.next(),f.right=this.parseMaybeAssign(c),this.finishNode(f,
"AssignmentExpression");m&&this.checkExpressionErrors(h,!0);-1<n&&(h.parenthesizedAssign=n);-1<a&&(h.trailingComma=a);return b};zi.parseMaybeConditional=function(c,h){var f=this.start,m=this.startLoc,n=this.parseExprOps(c,h);return this.checkExpressionErrors(h)?n:this.eat(ac.question)?(h=this.startNodeAt(f,m),h.test=n,h.consequent=this.parseMaybeAssign(),this.expect(ac.colon),h.alternate=this.parseMaybeAssign(c),this.finishNode(h,"ConditionalExpression")):n};zi.parseExprOps=function(c,h){var f=this.start,
m=this.startLoc,n=this.parseMaybeUnary(h,!1);return this.checkExpressionErrors(h)?n:n.start===f&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,f,m,-1,c)};zi.parseExprOp=function(c,h,f,m,n){var a=this.type.binop;if(null!=a&&(!n||this.type!==ac._in)&&a>m){var d=this.type===ac.logicalOR||this.type===ac.logicalAND,k=this.type===ac.coalesce;k&&(a=ac.logicalAND.binop);var b=this.value;this.next();var e=this.start,l=this.startLoc;a=this.parseExprOp(this.parseMaybeUnary(null,!1),e,l,a,n);c=this.buildBinary(h,
f,c,a,b,d||k);(d&&this.type===ac.coalesce||k&&(this.type===ac.logicalOR||this.type===ac.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(c,h,f,m,n)}return c};zi.buildBinary=function(c,h,f,m,n,a){c=this.startNodeAt(c,h);c.left=f;c.operator=n;c.right=m;return this.finishNode(c,a?"LogicalExpression":"BinaryExpression")};zi.parseMaybeUnary=function(c,h){var f=this.start,m=this.startLoc;if(this.isContextual("await")&&
(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var n=this.parseAwait();h=!0}else if(this.type.prefix){n=this.startNode();var a=this.type===ac.incDec;n.operator=this.value;n.prefix=!0;this.next();n.argument=this.parseMaybeUnary(null,!0);this.checkExpressionErrors(c,!0);a?this.checkLValSimple(n.argument):this.strict&&"delete"===n.operator&&"Identifier"===n.argument.type?this.raiseRecoverable(n.start,"Deleting local variable in strict mode"):h=!0;n=this.finishNode(n,a?"UpdateExpression":
"UnaryExpression")}else{n=this.parseExprSubscripts(c);if(this.checkExpressionErrors(c))return n;for(;this.type.postfix&&!this.canInsertSemicolon();)c=this.startNodeAt(f,m),c.operator=this.value,c.prefix=!1,c.argument=n,this.checkLValSimple(n),this.next(),n=this.finishNode(c,"UpdateExpression")}return!h&&this.eat(ac.starstar)?this.buildBinary(f,m,n,this.parseMaybeUnary(null,!1),"**",!1):n};zi.parseExprSubscripts=function(c){var h=this.start,f=this.startLoc,m=this.parseExprAtom(c);if("ArrowFunctionExpression"===
m.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return m;h=this.parseSubscripts(m,h,f);c&&"MemberExpression"===h.type&&(c.parenthesizedAssign>=h.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=h.start&&(c.parenthesizedBind=-1));return h};zi.parseSubscripts=function(c,h,f,m){for(var n=8<=this.options.ecmaVersion&&"Identifier"===c.type&&"async"===c.name&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&5===c.end-c.start&&this.potentialArrowAt===c.start,a=!1;;){var d=this.parseSubscript(c,
h,f,m,n,a);d.optional&&(a=!0);if(d===c||"ArrowFunctionExpression"===d.type)return a&&(c=this.startNodeAt(h,f),c.expression=d,d=this.finishNode(c,"ChainExpression")),d;c=d}};zi.parseSubscript=function(c,h,f,m,n,a){var d=11<=this.options.ecmaVersion,k=d&&this.eat(ac.questionDot);m&&k&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var b=this.eat(ac.bracketL);if(b||k&&this.type!==ac.parenL&&this.type!==ac.backQuote||this.eat(ac.dot))h=this.startNodeAt(h,
f),h.object=c,h.property=b?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),h.computed=!!b,b&&this.expect(ac.bracketR),d&&(h.optional=k),c=this.finishNode(h,"MemberExpression");else if(!m&&this.eat(ac.parenL)){m=new KG;a=this.yieldPos;var e=this.awaitPos,l=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;b=this.parseExprList(ac.parenR,8<=this.options.ecmaVersion,!1,m);if(n&&!k&&!this.canInsertSemicolon()&&this.eat(ac.arrow))return this.checkPatternErrors(m,
!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=a,this.awaitPos=e,this.awaitIdentPos=l,this.parseArrowExpression(this.startNodeAt(h,f),b,!0);this.checkExpressionErrors(m,!0);this.yieldPos=a||this.yieldPos;this.awaitPos=e||this.awaitPos;this.awaitIdentPos=l||this.awaitIdentPos;h=this.startNodeAt(h,f);h.callee=c;h.arguments=b;d&&(h.optional=k);c=this.finishNode(h,"CallExpression")}else this.type===
ac.backQuote&&((k||a)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),d=this.startNodeAt(h,f),d.tag=c,d.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(d,"TaggedTemplateExpression"));return c};zi.parseExprAtom=function(c){this.type===ac.slash&&this.readRegexp();var h=this.potentialArrowAt===this.start;switch(this.type){case ac._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),h=this.startNode(),this.next(),
this.type!==ac.parenL||this.allowDirectSuper||this.raise(h.start,"super() call outside constructor of a subclass"),this.type!==ac.dot&&this.type!==ac.bracketL&&this.type!==ac.parenL&&this.unexpected(),this.finishNode(h,"Super");case ac._this:return h=this.startNode(),this.next(),this.finishNode(h,"ThisExpression");case ac.name:c=this.start;var f=this.startLoc,m=this.containsEsc,n=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!m&&"async"===n.name&&!this.canInsertSemicolon()&&this.eat(ac._function))return this.parseFunction(this.startNodeAt(c,
f),0,!1,!0);if(h&&!this.canInsertSemicolon()){if(this.eat(ac.arrow))return this.parseArrowExpression(this.startNodeAt(c,f),[n],!1);if(8<=this.options.ecmaVersion&&"async"===n.name&&this.type===ac.name&&!m)return n=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(ac.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(c,f),[n],!0)}return n;case ac.regexp:return c=this.value,h=this.parseLiteral(c.value),h.regex={pattern:c.pattern,flags:c.flags},h;case ac.num:case ac.string:return this.parseLiteral(this.value);
case ac._null:case ac._true:case ac._false:return h=this.startNode(),h.value=this.type===ac._null?null:this.type===ac._true,h.raw=this.type.keyword,this.next(),this.finishNode(h,"Literal");case ac.parenL:return f=this.start,h=this.parseParenAndDistinguishExpression(h),c&&(0>c.parenthesizedAssign&&!this.isSimpleAssignTarget(h)&&(c.parenthesizedAssign=f),0>c.parenthesizedBind&&(c.parenthesizedBind=f)),h;case ac.bracketL:return h=this.startNode(),this.next(),h.elements=this.parseExprList(ac.bracketR,
!0,!0,c),this.finishNode(h,"ArrayExpression");case ac.braceL:return this.parseObj(!1,c);case ac._function:return h=this.startNode(),this.next(),this.parseFunction(h,0);case ac._class:return this.parseClass(this.startNode(),!1);case ac._new:return this.parseNew();case ac.backQuote:return this.parseTemplate();case ac._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};zi.parseExprImport=function(){var c=this.startNode();this.containsEsc&&
this.raiseRecoverable(this.start,"Escape sequence in keyword import");var h=this.parseIdent(!0);switch(this.type){case ac.parenL:return this.parseDynamicImport(c);case ac.dot:return c.meta=h,this.parseImportMeta(c);default:this.unexpected()}};zi.parseDynamicImport=function(c){this.next();c.source=this.parseMaybeAssign();if(!this.eat(ac.parenR)){var h=this.start;this.eat(ac.comma)&&this.eat(ac.parenR)?this.raiseRecoverable(h,"Trailing comma is not allowed in import()"):this.unexpected(h)}return this.finishNode(c,
"ImportExpression")};zi.parseImportMeta=function(c){this.next();var h=this.containsEsc;c.property=this.parseIdent(!0);"meta"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'");h&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters");"module"!==this.options.sourceType&&this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module");return this.finishNode(c,"MetaProperty")};zi.parseLiteral=function(c){var h=
this.startNode();h.value=c;h.raw=this.input.slice(this.start,this.end);110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(h,"Literal")};zi.parseParenExpression=function(){this.expect(ac.parenL);var c=this.parseExpression();this.expect(ac.parenR);return c};zi.parseParenAndDistinguishExpression=function(c){var h=this.start,f=this.startLoc,m=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var n=this.start,a=
this.startLoc,d=[],k=!0,b=!1,e=new KG,l=this.yieldPos,p=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==ac.parenR;)if(k?k=!1:this.expect(ac.comma),m&&this.afterTrailingComma(ac.parenR,!0)){b=!0;break}else if(this.type===ac.ellipsis){var u=this.start;d.push(this.parseParenItem(this.parseRestBinding()));this.type===ac.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else d.push(this.parseMaybeAssign(!1,e,this.parseParenItem));m=this.start;k=this.startLoc;
this.expect(ac.parenR);if(c&&!this.canInsertSemicolon()&&this.eat(ac.arrow))return this.checkPatternErrors(e,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=p,this.parseParenArrowList(h,f,d);d.length&&!b||this.unexpected(this.lastTokStart);u&&this.unexpected(u);this.checkExpressionErrors(e,!0);this.yieldPos=l||this.yieldPos;this.awaitPos=p||this.awaitPos;1<d.length?(c=this.startNodeAt(n,a),c.expressions=d,this.finishNodeAt(c,"SequenceExpression",m,k)):c=d[0]}else c=this.parseParenExpression();
return this.options.preserveParens?(h=this.startNodeAt(h,f),h.expression=c,this.finishNode(h,"ParenthesizedExpression")):c};zi.parseParenItem=function(c){return c};zi.parseParenArrowList=function(c,h,f){return this.parseArrowExpression(this.startNodeAt(c,h),f)};var Dna=[];zi.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode(),h=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(ac.dot))return c.meta=h,h=this.containsEsc,
c.property=this.parseIdent(!0),"target"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),h&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(c.start,"'new.target' can only be used in functions"),this.finishNode(c,"MetaProperty");h=this.start;var f=this.startLoc,m=this.type===ac._import;c.callee=this.parseSubscripts(this.parseExprAtom(),h,f,!0);m&&"ImportExpression"===
c.callee.type&&this.raise(h,"Cannot use new with import()");this.eat(ac.parenL)?c.arguments=this.parseExprList(ac.parenR,8<=this.options.ecmaVersion,!1):c.arguments=Dna;return this.finishNode(c,"NewExpression")};zi.parseTemplateElement=function(c){c=c.isTagged;var h=this.startNode();this.type===ac.invalidTemplate?(c||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),h.value={raw:this.value,cooked:null}):h.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,
"\n"),cooked:this.value};this.next();h.tail=this.type===ac.backQuote;return this.finishNode(h,"TemplateElement")};zi.parseTemplate=function(c){void 0===c&&(c={});c=c.isTagged;void 0===c&&(c=!1);var h=this.startNode();this.next();h.expressions=[];var f=this.parseTemplateElement({isTagged:c});for(h.quasis=[f];!f.tail;)this.type===ac.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(ac.dollarBraceL),h.expressions.push(this.parseExpression()),this.expect(ac.braceR),h.quasis.push(f=
this.parseTemplateElement({isTagged:c}));this.next();return this.finishNode(h,"TemplateLiteral")};zi.isAsyncProp=function(c){return!c.computed&&"Identifier"===c.key.type&&"async"===c.key.name&&(this.type===ac.name||this.type===ac.num||this.type===ac.string||this.type===ac.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===ac.star)&&!Jo.test(this.input.slice(this.lastTokEnd,this.start))};zi.parseObj=function(c,h){var f=this.startNode(),m=!0,n={};f.properties=[];for(this.next();!this.eat(ac.braceR);){if(m)m=
!1;else if(this.expect(ac.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(ac.braceR))break;var a=this.parseProperty(c,h);c||this.checkPropClash(a,n,h);f.properties.push(a)}return this.finishNode(f,c?"ObjectPattern":"ObjectExpression")};zi.parseProperty=function(c,h){var f=this.startNode(),m;if(9<=this.options.ecmaVersion&&this.eat(ac.ellipsis)){if(c)return f.argument=this.parseIdent(!1),this.type===ac.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(f,
"RestElement");this.type===ac.parenL&&h&&(0>h.parenthesizedAssign&&(h.parenthesizedAssign=this.start),0>h.parenthesizedBind&&(h.parenthesizedBind=this.start));f.argument=this.parseMaybeAssign(!1,h);this.type===ac.comma&&h&&0>h.trailingComma&&(h.trailingComma=this.start);return this.finishNode(f,"SpreadElement")}if(6<=this.options.ecmaVersion){f.method=!1;f.shorthand=!1;if(c||h){var n=this.start;var a=this.startLoc}c||(m=this.eat(ac.star))}var d=this.containsEsc;this.parsePropertyName(f);if(!c&&!d&&
8<=this.options.ecmaVersion&&!m&&this.isAsyncProp(f)){var k=!0;m=9<=this.options.ecmaVersion&&this.eat(ac.star);this.parsePropertyName(f,h)}else k=!1;this.parsePropertyValue(f,c,m,k,n,a,h,d);return this.finishNode(f,"Property")};zi.parsePropertyValue=function(c,h,f,m,n,a,d,k){(f||m)&&this.type===ac.colon&&this.unexpected();this.eat(ac.colon)?(c.value=h?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,d),c.kind="init"):6<=this.options.ecmaVersion&&this.type===ac.parenL?(h&&
this.unexpected(),c.kind="init",c.method=!0,c.value=this.parseMethod(f,m)):h||k||!(5<=this.options.ecmaVersion)||c.computed||"Identifier"!==c.key.type||"get"!==c.key.name&&"set"!==c.key.name||this.type===ac.comma||this.type===ac.braceR||this.type===ac.eq?6<=this.options.ecmaVersion&&!c.computed&&"Identifier"===c.key.type?((f||m)&&this.unexpected(),this.checkUnreserved(c.key),"await"!==c.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),c.kind="init",h?c.value=this.parseMaybeDefault(n,a,this.copyNode(c.key)):
this.type===ac.eq&&d?(0>d.shorthandAssign&&(d.shorthandAssign=this.start),c.value=this.parseMaybeDefault(n,a,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.shorthand=!0):this.unexpected():((f||m)&&this.unexpected(),c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1),c.value.params.length!==("get"===c.kind?0:1)?(h=c.value.start,"get"===c.kind?this.raiseRecoverable(h,"getter should have no params"):this.raiseRecoverable(h,"setter should have exactly one param")):"set"===
c.kind&&"RestElement"===c.value.params[0].type&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params"))};zi.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(ac.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(ac.bracketR),c.key;c.computed=!1}return c.key=this.type===ac.num||this.type===ac.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};zi.initFunction=function(c){c.id=null;6<=this.options.ecmaVersion&&
(c.generator=c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};zi.parseMethod=function(c,h,f){var m=this.startNode(),n=this.yieldPos,a=this.awaitPos,d=this.awaitIdentPos;this.initFunction(m);6<=this.options.ecmaVersion&&(m.generator=c);8<=this.options.ecmaVersion&&(m.async=!!h);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(h?4:0)|(m.generator?8:0)|64|(f?128:0));this.expect(ac.parenL);m.params=this.parseBindingList(ac.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(m,!1,!0);this.yieldPos=n;this.awaitPos=a;this.awaitIdentPos=d;return this.finishNode(m,"FunctionExpression")};zi.parseArrowExpression=function(c,h,f){var m=this.yieldPos,n=this.awaitPos,a=this.awaitIdentPos;this.enterScope((f?4:0)|18);this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!f);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;c.params=this.toAssignableList(h,!0);this.parseFunctionBody(c,!0,!1);this.yieldPos=m;this.awaitPos=n;this.awaitIdentPos=a;return this.finishNode(c,
"ArrowFunctionExpression")};zi.parseFunctionBody=function(c,h,f){var m=this.strict,n=!1;if(h&&this.type!==ac.braceL)c.body=this.parseMaybeAssign(),c.expression=!0,this.checkParams(c,!1);else{var a=7<=this.options.ecmaVersion&&!this.isSimpleParamList(c.params);(!m||a)&&(n=this.strictDirective(this.end))&&a&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list");a=this.labels;this.labels=[];n&&(this.strict=!0);this.checkParams(c,!m&&!n&&!h&&!f&&this.isSimpleParamList(c.params));
this.strict&&c.id&&this.checkLValSimple(c.id,5);c.body=this.parseBlock(!1,void 0,n&&!m);c.expression=!1;this.adaptDirectivePrologue(c.body.body);this.labels=a}this.exitScope()};zi.isSimpleParamList=function(c){for(var h=0;h<c.length;h+=1)if("Identifier"!==c[h].type)return!1;return!0};zi.checkParams=function(c,h){var f={},m=0;for(c=c.params;m<c.length;m+=1)this.checkLValInnerPattern(c[m],1,h?null:f)};zi.parseExprList=function(c,h,f,m){for(var n=[],a=!0;!this.eat(c);){if(a)a=!1;else if(this.expect(ac.comma),
h&&this.afterTrailingComma(c))break;if(f&&this.type===ac.comma)var d=null;else this.type===ac.ellipsis?(d=this.parseSpread(m),m&&this.type===ac.comma&&0>m.trailingComma&&(m.trailingComma=this.start)):d=this.parseMaybeAssign(!1,m);n.push(d)}return n};zi.checkUnreserved=function(c){var h=c.start,f=c.end;c=c.name;this.inGenerator&&"yield"===c&&this.raiseRecoverable(h,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===c&&this.raiseRecoverable(h,"Cannot use 'await' as identifier inside an async function");
this.keywords.test(c)&&this.raise(h,"Unexpected keyword '"+c+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(h,f).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(c)||(this.inAsync||"await"!==c||this.raiseRecoverable(h,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(h,"The keyword '"+c+"' is reserved"))};zi.parseIdent=function(c,h){h=this.startNode();this.type===ac.name?h.name=this.value:this.type.keyword?(h.name=this.type.keyword,
"class"!==h.name&&"function"!==h.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!c);this.finishNode(h,"Identifier");c||(this.checkUnreserved(h),"await"!==h.name||this.awaitIdentPos||(this.awaitIdentPos=h.start));return h};zi.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var h=this.startNode();this.next();this.type===ac.semi||this.canInsertSemicolon()||this.type!==ac.star&&!this.type.startsExpr?
(h.delegate=!1,h.argument=null):(h.delegate=this.eat(ac.star),h.argument=this.parseMaybeAssign(c));return this.finishNode(h,"YieldExpression")};zi.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var c=this.startNode();this.next();c.argument=this.parseMaybeUnary(null,!0);return this.finishNode(c,"AwaitExpression")};var RL=bl.prototype;RL.raise=function(c,h){var f=pQ(this.input,c);h+=" ("+f.line+":"+f.column+")";h=new SyntaxError(h);h.pos=c;h.loc=f;h.raisedAt=this.pos;throw h;};RL.raiseRecoverable=
RL.raise;RL.curPosition=function(){if(this.options.locations)return new lz(this.curLine,this.pos-this.lineStart)};var wu=bl.prototype,Ena=function(c){this.flags=c;this.var=[];this.lexical=[];this.functions=[]};wu.enterScope=function(c){this.scopeStack.push(new Ena(c))};wu.exitScope=function(){this.scopeStack.pop()};wu.treatFunctionsAsVarInScope=function(c){return c.flags&2||!this.inModule&&c.flags&1};wu.declareName=function(c,h,f){var m=!1;if(2===h)h=this.currentScope(),m=-1<h.lexical.indexOf(c)||
-1<h.functions.indexOf(c)||-1<h.var.indexOf(c),h.lexical.push(c),this.inModule&&h.flags&1&&delete this.undefinedExports[c];else if(4===h)this.currentScope().lexical.push(c);else if(3===h)h=this.currentScope(),m=this.treatFunctionsAsVar?-1<h.lexical.indexOf(c):-1<h.lexical.indexOf(c)||-1<h.var.indexOf(c),h.functions.push(c);else for(h=this.scopeStack.length-1;0<=h;--h){var n=this.scopeStack[h];if(-1<n.lexical.indexOf(c)&&!(n.flags&32&&n.lexical[0]===c)||!this.treatFunctionsAsVarInScope(n)&&-1<n.functions.indexOf(c)){m=
!0;break}n.var.push(c);this.inModule&&n.flags&1&&delete this.undefinedExports[c];if(n.flags&3)break}m&&this.raiseRecoverable(f,"Identifier '"+c+"' has already been declared")};wu.checkLocalExport=function(c){-1===this.scopeStack[0].lexical.indexOf(c.name)&&-1===this.scopeStack[0].var.indexOf(c.name)&&(this.undefinedExports[c.name]=c)};wu.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};wu.currentVarScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];
if(h.flags&3)return h}};wu.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];if(h.flags&3&&!(h.flags&16))return h}};var qE=function(c,h,f){this.type="";this.start=h;this.end=0;c.options.locations&&(this.loc=new kC(c,f));c.options.directSourceFile&&(this.sourceFile=c.options.directSourceFile);c.options.ranges&&(this.range=[h,0])},rE=bl.prototype;rE.startNode=function(){return new qE(this,this.start,this.startLoc)};rE.startNodeAt=function(c,h){return new qE(this,
c,h)};rE.finishNode=function(c,h){return a_.call(this,c,h,this.lastTokEnd,this.lastTokEndLoc)};rE.finishNodeAt=function(c,h,f,m){return a_.call(this,c,h,f,m)};rE.copyNode=function(c){var h=new qE(this,c.start,this.startLoc),f;for(f in c)h[f]=c[f];return h};var Ap=function(c,h,f,m,n){this.token=c;this.isExpr=!!h;this.preserveSpace=!!f;this.override=m;this.generator=!!n},Sk={b_stat:new Ap("{",!1),b_expr:new Ap("{",!0),b_tmpl:new Ap("${",!1),p_stat:new Ap("(",!1),p_expr:new Ap("(",!0),q_tmpl:new Ap("`",
!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new Ap("function",!1),f_expr:new Ap("function",!0),f_expr_gen:new Ap("function",!0,!1,null,!0),f_gen:new Ap("function",!1,!1,null,!0)},SL=bl.prototype;SL.initialContext=function(){return[Sk.b_stat]};SL.braceIsBlock=function(c){var h=this.curContext();return h===Sk.f_expr||h===Sk.f_stat?!0:c!==ac.colon||h!==Sk.b_stat&&h!==Sk.b_expr?c===ac._return||c===ac.name&&this.exprAllowed?Jo.test(this.input.slice(this.lastTokEnd,this.start)):c===ac._else||
c===ac.semi||c===ac.eof||c===ac.parenR||c===ac.arrow?!0:c===ac.braceL?h===Sk.b_stat:c===ac._var||c===ac._const||c===ac.name?!1:!this.exprAllowed:!h.isExpr};SL.inGeneratorContext=function(){for(var c=this.context.length-1;1<=c;c--){var h=this.context[c];if("function"===h.token)return h.generator}return!1};SL.updateContext=function(c){var h,f=this.type;f.keyword&&c===ac.dot?this.exprAllowed=!1:(h=f.updateContext)?h.call(this,c):this.exprAllowed=f.beforeExpr};ac.parenR.updateContext=ac.braceR.updateContext=
function(){if(1===this.context.length)this.exprAllowed=!0;else{var c=this.context.pop();c===Sk.b_stat&&"function"===this.curContext().token&&(c=this.context.pop());this.exprAllowed=!c.isExpr}};ac.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?Sk.b_stat:Sk.b_expr);this.exprAllowed=!0};ac.dollarBraceL.updateContext=function(){this.context.push(Sk.b_tmpl);this.exprAllowed=!0};ac.parenL.updateContext=function(c){this.context.push(c===ac._if||c===ac._for||c===ac._with||c===ac._while?
Sk.p_stat:Sk.p_expr);this.exprAllowed=!0};ac.incDec.updateContext=function(){};ac._function.updateContext=ac._class.updateContext=function(c){!c.beforeExpr||c===ac._else||c===ac.semi&&this.curContext()!==Sk.p_stat||c===ac._return&&Jo.test(this.input.slice(this.lastTokEnd,this.start))||(c===ac.colon||c===ac.braceL)&&this.curContext()===Sk.b_stat?this.context.push(Sk.f_stat):this.context.push(Sk.f_expr);this.exprAllowed=!1};ac.backQuote.updateContext=function(){this.curContext()===Sk.q_tmpl?this.context.pop():
this.context.push(Sk.q_tmpl);this.exprAllowed=!1};ac.star.updateContext=function(c){c===ac._function&&(c=this.context.length-1,this.context[c]=this.context[c]===Sk.f_expr?Sk.f_expr_gen:Sk.f_gen);this.exprAllowed=!0};ac.name.updateContext=function(c){var h=!1;6<=this.options.ecmaVersion&&c!==ac.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(h=!0);this.exprAllowed=h};var Jfa={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
Kfa={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
b_={};LG(9);LG(10);LG(11);LG(12);var Tg=bl.prototype,Vs=function(c){this.parser=c;this.validFlags="gim"+(6<=c.options.ecmaVersion?"uy":"")+(9<=c.options.ecmaVersion?"s":"");this.unicodeProperties=b_[12<=c.options.ecmaVersion?12:c.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=[];this.backReferenceNames=[]};
Vs.prototype.reset=function(c,h,f){var m=-1!==f.indexOf("u");this.start=c|0;this.source=h+"";this.flags=f;this.switchU=m&&6<=this.parser.options.ecmaVersion;this.switchN=m&&9<=this.parser.options.ecmaVersion};Vs.prototype.raise=function(c){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+c)};Vs.prototype.at=function(c,h){void 0===h&&(h=!1);var f=this.source,m=f.length;if(c>=m)return-1;var n=f.charCodeAt(c);if(!h&&!this.switchU||55295>=n||57344<=n||c+1>=m)return n;
c=f.charCodeAt(c+1);return 56320<=c&&57343>=c?(n<<10)+c-56613888:n};Vs.prototype.nextIndex=function(c,h){void 0===h&&(h=!1);var f=this.source,m=f.length;if(c>=m)return m;var n=f.charCodeAt(c),a;return!h&&!this.switchU||55295>=n||57344<=n||c+1>=m||56320>(a=f.charCodeAt(c+1))||57343<a?c+1:c+2};Vs.prototype.current=function(c){void 0===c&&(c=!1);return this.at(this.pos,c)};Vs.prototype.lookahead=function(c){void 0===c&&(c=!1);return this.at(this.nextIndex(this.pos,c),c)};Vs.prototype.advance=function(c){void 0===
c&&(c=!1);this.pos=this.nextIndex(this.pos,c)};Vs.prototype.eat=function(c,h){void 0===h&&(h=!1);return this.current(h)===c?(this.advance(h),!0):!1};Tg.validateRegExpFlags=function(c){for(var h=c.validFlags,f=c.flags,m=0;m<f.length;m++){var n=f.charAt(m);-1===h.indexOf(n)&&this.raise(c.start,"Invalid regular expression flag");-1<f.indexOf(n,m+1)&&this.raise(c.start,"Duplicate regular expression flag")}};Tg.validateRegExpPattern=function(c){this.regexp_pattern(c);!c.switchN&&9<=this.options.ecmaVersion&&
0<c.groupNames.length&&(c.switchN=!0,this.regexp_pattern(c))};Tg.regexp_pattern=function(c){c.pos=0;c.lastIntValue=0;c.lastStringValue="";c.lastAssertionIsQuantifiable=!1;c.numCapturingParens=0;c.maxBackReference=0;c.groupNames.length=0;c.backReferenceNames.length=0;this.regexp_disjunction(c);c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets"));c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");for(var h=0,f=c.backReferenceNames;h<
f.length;h+=1)-1===c.groupNames.indexOf(f[h])&&c.raise("Invalid named capture referenced")};Tg.regexp_disjunction=function(c){for(this.regexp_alternative(c);c.eat(124);)this.regexp_alternative(c);this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat");c.eat(123)&&c.raise("Lone quantifier brackets")};Tg.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););};Tg.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(c)&&
c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1};Tg.regexp_eatAssertion=function(c){var h=c.pos;c.lastAssertionIsQuantifiable=!1;if(c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=h}if(c.eat(40)&&c.eat(63)){var f=!1;9<=this.options.ecmaVersion&&(f=c.eat(60));if(c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),c.lastAssertionIsQuantifiable=
!f,!0}c.pos=h;return!1};Tg.regexp_eatQuantifier=function(c,h){void 0===h&&(h=!1);return this.regexp_eatQuantifierPrefix(c,h)?(c.eat(63),!0):!1};Tg.regexp_eatQuantifierPrefix=function(c,h){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,h)};Tg.regexp_eatBracedQuantifier=function(c,h){var f=c.pos;if(c.eat(123)){var m=-1;if(this.regexp_eatDecimalDigits(c)){var n=c.lastIntValue;c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(m=c.lastIntValue);if(c.eat(125))return-1!==m&&m<n&&!h&&
c.raise("numbers out of order in {} quantifier"),!0}c.switchU&&!h&&c.raise("Incomplete quantifier");c.pos=f}return!1};Tg.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)};Tg.regexp_eatReverseSolidusAtomEscape=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=h}return!1};Tg.regexp_eatUncapturingGroup=
function(c){var h=c.pos;if(c.eat(40)){if(c.eat(63)&&c.eat(58)){this.regexp_disjunction(c);if(c.eat(41))return!0;c.raise("Unterminated group")}c.pos=h}return!1};Tg.regexp_eatCapturingGroup=function(c){if(c.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(c):63===c.current()&&c.raise("Invalid group");this.regexp_disjunction(c);if(c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1};Tg.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||
this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)};Tg.regexp_eatInvalidBracedQuantifier=function(c){this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat");return!1};Tg.regexp_eatSyntaxCharacter=function(c){var h=c.current();return c_(h)?(c.lastIntValue=h,c.advance(),!0):!1};Tg.regexp_eatPatternCharacters=function(c){for(var h=c.pos,f=0;-1!==(f=c.current())&&
!c_(f);)c.advance();return c.pos!==h};Tg.regexp_eatExtendedPatternCharacter=function(c){var h=c.current();return-1===h||36===h||40<=h&&43>=h||46===h||63===h||91===h||94===h||124===h?!1:(c.advance(),!0)};Tg.regexp_groupSpecifier=function(c){c.eat(63)&&(this.regexp_eatGroupName(c)?(-1!==c.groupNames.indexOf(c.lastStringValue)&&c.raise("Duplicate capture group name"),c.groupNames.push(c.lastStringValue)):c.raise("Invalid group"))};Tg.regexp_eatGroupName=function(c){c.lastStringValue="";if(c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&
c.eat(62))return!0;c.raise("Invalid capture group name")}return!1};Tg.regexp_eatRegExpIdentifierName=function(c){c.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=MG(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=MG(c.lastIntValue);return!0}return!1};Tg.regexp_eatRegExpIdentifierStart=function(c){var h=c.pos,f=11<=this.options.ecmaVersion,m=c.current(f);c.advance(f);92===m&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(m=c.lastIntValue);
f=m;if(un(f,!0)||36===f||95===f)return c.lastIntValue=m,!0;c.pos=h;return!1};Tg.regexp_eatRegExpIdentifierPart=function(c){var h=c.pos,f=11<=this.options.ecmaVersion,m=c.current(f);c.advance(f);92===m&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(m=c.lastIntValue);f=m;if(ap(f,!0)||36===f||95===f||8204===f||8205===f)return c.lastIntValue=m,!0;c.pos=h;return!1};Tg.regexp_eatAtomEscape=function(c){if(this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||
c.switchN&&this.regexp_eatKGroupName(c))return!0;c.switchU&&(99===c.current()&&c.raise("Invalid unicode escape"),c.raise("Invalid escape"));return!1};Tg.regexp_eatBackReference=function(c){var h=c.pos;if(this.regexp_eatDecimalEscape(c)){var f=c.lastIntValue;if(c.switchU)return f>c.maxBackReference&&(c.maxBackReference=f),!0;if(f<=c.numCapturingParens)return!0;c.pos=h}return!1};Tg.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),
!0;c.raise("Invalid named reference")}return!1};Tg.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)};Tg.regexp_eatCControlLetter=function(c){var h=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=h}return!1};Tg.regexp_eatZero=
function(c){return 48!==c.current()||NG(c.lookahead())?!1:(c.lastIntValue=0,c.advance(),!0)};Tg.regexp_eatControlEscape=function(c){var h=c.current();return 116===h?(c.lastIntValue=9,c.advance(),!0):110===h?(c.lastIntValue=10,c.advance(),!0):118===h?(c.lastIntValue=11,c.advance(),!0):102===h?(c.lastIntValue=12,c.advance(),!0):114===h?(c.lastIntValue=13,c.advance(),!0):!1};Tg.regexp_eatControlLetter=function(c){var h=c.current();return 65<=h&&90>=h||97<=h&&122>=h?(c.lastIntValue=h%32,c.advance(),!0):
!1};Tg.regexp_eatRegExpUnicodeEscapeSequence=function(c,h){void 0===h&&(h=!1);var f=c.pos;h=h||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){f=c.lastIntValue;if(h&&55296<=f&&56319>=f){h=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var m=c.lastIntValue;if(56320<=m&&57343>=m)return c.lastIntValue=1024*(f-55296)+(m-56320)+65536,!0}c.pos=h;c.lastIntValue=f}return!0}if(m=h&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125))m=c.lastIntValue,m=0<=m&&1114111>=m;
if(m)return!0;h&&c.raise("Invalid unicode escape");c.pos=f}return!1};Tg.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var h=c.current();return 99===h||c.switchN&&107===h?!1:(c.lastIntValue=h,c.advance(),!0)};Tg.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var h=c.current();if(49<=h&&57>=h){do c.lastIntValue=10*c.lastIntValue+(h-48),c.advance();while(48<=(h=c.current())&&57>=h);return!0}return!1};Tg.regexp_eatCharacterClassEscape=
function(c){var h=c.current();if(100===h||68===h||115===h||83===h||119===h||87===h)return c.lastIntValue=-1,c.advance(),!0;if(c.switchU&&9<=this.options.ecmaVersion&&(80===h||112===h)){c.lastIntValue=-1;c.advance();if(c.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(c)&&c.eat(125))return!0;c.raise("Invalid property name")}return!1};Tg.regexp_eatUnicodePropertyValueExpression=function(c){var h=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var f=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c))return this.regexp_validateUnicodePropertyNameAndValue(c,
f,c.lastStringValue),!0}c.pos=h;return this.regexp_eatLoneUnicodePropertyNameOrValue(c)?(this.regexp_validateUnicodePropertyNameOrValue(c,c.lastStringValue),!0):!1};Tg.regexp_validateUnicodePropertyNameAndValue=function(c,h,f){JG.call(c.unicodeProperties.nonBinary,h)||c.raise("Invalid property name");c.unicodeProperties.nonBinary[h].test(f)||c.raise("Invalid property value")};Tg.regexp_validateUnicodePropertyNameOrValue=function(c,h){c.unicodeProperties.binary.test(h)||c.raise("Invalid property name")};
Tg.regexp_eatUnicodePropertyName=function(c){var h;for(c.lastStringValue="";d_(h=c.current());)c.lastStringValue+=MG(h),c.advance();return""!==c.lastStringValue};Tg.regexp_eatUnicodePropertyValue=function(c){var h;for(c.lastStringValue="";Lfa(h=c.current());)c.lastStringValue+=MG(h),c.advance();return""!==c.lastStringValue};Tg.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)};Tg.regexp_eatCharacterClass=function(c){if(c.eat(91)){c.eat(94);this.regexp_classRanges(c);
if(c.eat(93))return!0;c.raise("Unterminated character class")}return!1};Tg.regexp_classRanges=function(c){for(;this.regexp_eatClassAtom(c);){var h=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var f=c.lastIntValue;!c.switchU||-1!==h&&-1!==f||c.raise("Invalid character class");-1!==h&&-1!==f&&h>f&&c.raise("Range out of order in character class")}}};Tg.regexp_eatClassAtom=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var f=c.current();(99===
f||48<=f&&55>=f)&&c.raise("Invalid class escape");c.raise("Invalid escape")}c.pos=h}h=c.current();return 93!==h?(c.lastIntValue=h,c.advance(),!0):!1};Tg.regexp_eatClassEscape=function(c){var h=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=h}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)};Tg.regexp_eatClassControlLetter=function(c){var h=
c.current();return NG(h)||95===h?(c.lastIntValue=h%32,c.advance(),!0):!1};Tg.regexp_eatHexEscapeSequence=function(c){var h=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape");c.pos=h}return!1};Tg.regexp_eatDecimalDigits=function(c){var h=c.pos,f;for(c.lastIntValue=0;NG(f=c.current());)c.lastIntValue=10*c.lastIntValue+(f-48),c.advance();return c.pos!==h};Tg.regexp_eatHexDigits=function(c){var h=c.pos,f;for(c.lastIntValue=0;e_(f=c.current());)c.lastIntValue=
16*c.lastIntValue+f_(f),c.advance();return c.pos!==h};Tg.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var h=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var f=c.lastIntValue;3>=h&&this.regexp_eatOctalDigit(c)?c.lastIntValue=64*h+8*f+c.lastIntValue:c.lastIntValue=8*h+f}else c.lastIntValue=h;return!0}return!1};Tg.regexp_eatOctalDigit=function(c){var h=c.current();if(48<=h&&55>=h)return c.lastIntValue=h-48,c.advance(),!0;c.lastIntValue=0;return!1};Tg.regexp_eatFixedHexDigits=
function(c,h){for(var f=c.pos,m=c.lastIntValue=0;m<h;++m){var n=c.current();if(!e_(n))return c.pos=f,!1;c.lastIntValue=16*c.lastIntValue+f_(n);c.advance()}return!0};var TL=function(c){this.type=c.type;this.value=c.value;this.start=c.start;this.end=c.end;c.options.locations&&(this.loc=new kC(c,c.startLoc,c.endLoc));c.options.ranges&&(this.range=[c.start,c.end])},$i=bl.prototype;$i.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new TL(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};$i.getToken=function(){this.next();return new TL(this)};"undefined"!==typeof Symbol&&($i[Symbol.iterator]=function(){var c=this;return{next:function(){var h=c.getToken();return{done:h.type===ac.eof,value:h}}}});$i.curContext=function(){return this.context[this.context.length-1]};$i.nextToken=
function(){var c=this.curContext();c&&c.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(ac.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())};$i.readToken=function(c){return un(c,6<=this.options.ecmaVersion)||92===c?this.readWord():this.getTokenFromCode(c)};$i.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(55295>=c||57344<=c)return c;
var h=this.input.charCodeAt(this.pos+1);return(c<<10)+h-56613888};$i.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),h=this.pos,f=this.input.indexOf("*/",this.pos+=2);-1===f&&this.raise(this.pos-2,"Unterminated comment");this.pos=f+2;if(this.options.locations){kz.lastIndex=h;for(var m;(m=kz.exec(this.input))&&m.index<this.pos;)++this.curLine,this.lineStart=m.index+m[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(h+2,f),h,this.pos,c,this.curPosition())};
$i.skipLineComment=function(c){for(var h=this.pos,f=this.options.onComment&&this.curPosition(),m=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!jz(m);)m=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(h+c,this.pos),h,this.pos,f,this.curPosition())};$i.skipSpace=function(){a:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+
1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<c&&14>c||5760<=c&&mV.test(String.fromCharCode(c)))++this.pos;else break a}}};$i.finishToken=function(c,h){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var f=this.type;this.type=c;this.value=
h;this.updateContext(f)};$i.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(48<=c&&57>=c)return this.readNumber(!0);var h=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===c&&46===h)return this.pos+=3,this.finishToken(ac.ellipsis);++this.pos;return this.finishToken(ac.dot)};$i.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===c?this.finishOp(ac.assign,2):this.finishOp(ac.slash,1)};
$i.readToken_mult_modulo_exp=function(c){var h=this.input.charCodeAt(this.pos+1),f=1,m=42===c?ac.star:ac.modulo;7<=this.options.ecmaVersion&&42===c&&42===h&&(++f,m=ac.starstar,h=this.input.charCodeAt(this.pos+2));return 61===h?this.finishOp(ac.assign,f+1):this.finishOp(m,f)};$i.readToken_pipe_amp=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(ac.assign,3):this.finishOp(124===c?ac.logicalOR:ac.logicalAND,
2):61===h?this.finishOp(ac.assign,2):this.finishOp(124===c?ac.bitwiseOR:ac.bitwiseAND,1)};$i.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(ac.assign,2):this.finishOp(ac.bitwiseXOR,1)};$i.readToken_plus_min=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?45!==h||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Jo.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(ac.incDec,2):(this.skipLineComment(3),
this.skipSpace(),this.nextToken()):61===h?this.finishOp(ac.assign,2):this.finishOp(ac.plusMin,1)};$i.readToken_lt_gt=function(c){var h=this.input.charCodeAt(this.pos+1),f=1;if(h===c)return f=62===c&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+f)?this.finishOp(ac.assign,f+1):this.finishOp(ac.bitShift,f);if(33===h&&60===c&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),
this.nextToken();61===h&&(f=2);return this.finishOp(ac.relational,f)};$i.readToken_eq_excl=function(c){var h=this.input.charCodeAt(this.pos+1);return 61===h?this.finishOp(ac.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===c&&62===h&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(ac.arrow)):this.finishOp(61===c?ac.eq:ac.prefix,1)};$i.readToken_question=function(){var c=this.options.ecmaVersion;if(11<=c){var h=this.input.charCodeAt(this.pos+1);if(46===h){var f=this.input.charCodeAt(this.pos+
2);if(48>f||57<f)return this.finishOp(ac.questionDot,2)}if(63===h)return 12<=c&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(ac.assign,3):this.finishOp(ac.coalesce,2)}return this.finishOp(ac.question,1)};$i.getTokenFromCode=function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(ac.parenL);case 41:return++this.pos,this.finishToken(ac.parenR);case 59:return++this.pos,this.finishToken(ac.semi);case 44:return++this.pos,this.finishToken(ac.comma);case 91:return++this.pos,
this.finishToken(ac.bracketL);case 93:return++this.pos,this.finishToken(ac.bracketR);case 123:return++this.pos,this.finishToken(ac.braceL);case 125:return++this.pos,this.finishToken(ac.braceR);case 58:return++this.pos,this.finishToken(ac.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(ac.backQuote);case 48:c=this.input.charCodeAt(this.pos+1);if(120===c||88===c)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===c||79===c)return this.readRadixNumber(8);
if(98===c||66===c)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);
case 63:return this.readToken_question();case 126:return this.finishOp(ac.prefix,1)}this.raise(this.pos,"Unexpected character '"+qQ(c)+"'")};$i.finishOp=function(c,h){var f=this.input.slice(this.pos,this.pos+h);this.pos+=h;return this.finishToken(c,f)};$i.readRegexp=function(){for(var c,h,f=this.pos;;){this.pos>=this.input.length&&this.raise(f,"Unterminated regular expression");var m=this.input.charAt(this.pos);Jo.test(m)&&this.raise(f,"Unterminated regular expression");if(c)c=!1;else{if("["===m)h=
!0;else if("]"===m&&h)h=!1;else if("/"===m&&!h)break;c="\\"===m}++this.pos}c=this.input.slice(f,this.pos);++this.pos;m=this.pos;h=this.readWord1();this.containsEsc&&this.unexpected(m);m=this.regexpState||(this.regexpState=new Vs(this));m.reset(f,c,h);this.validateRegExpFlags(m);this.validateRegExpPattern(m);f=null;try{f=new RegExp(c,h)}catch(n){}return this.finishToken(ac.regexp,{pattern:c,flags:h,value:f})};$i.readInt=function(c,h,f){var m=12<=this.options.ecmaVersion&&void 0===h;f=f&&48===this.input.charCodeAt(this.pos);
for(var n=this.pos,a=0,d=0,k=0,b=null==h?Infinity:h;k<b;++k,++this.pos){var e=this.input.charCodeAt(this.pos);if(m&&95===e)f&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===d&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===k&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),d=e;else{var l=97<=e?e-97+10:65<=e?e-65+10:48<=e&&57>=e?e-48:Infinity;if(l>=c)break;d=e;
a=a*c+l}}m&&95===d&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===n||null!=h&&this.pos-n!==h?null:a};$i.readRadixNumber=function(c){var h=this.pos;this.pos+=2;var f=this.readInt(c);null==f&&this.raise(this.start+2,"Expected number in radix "+c);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(f=g_(this.input.slice(h,this.pos)),++this.pos):un(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");
return this.finishToken(ac.num,f)};$i.readNumber=function(c){var h=this.pos;c||null!==this.readInt(10,void 0,!0)||this.raise(h,"Invalid number");var f=2<=this.pos-h&&48===this.input.charCodeAt(h);f&&this.strict&&this.raise(h,"Invalid number");var m=this.input.charCodeAt(this.pos);if(!f&&!c&&11<=this.options.ecmaVersion&&110===m)return f=g_(this.input.slice(h,this.pos)),++this.pos,un(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ac.num,f);f&&/[89]/.test(this.input.slice(h,
this.pos))&&(f=!1);46!==m||f||(++this.pos,this.readInt(10),m=this.input.charCodeAt(this.pos));69!==m&&101!==m||f||(m=this.input.charCodeAt(++this.pos),43!==m&&45!==m||++this.pos,null===this.readInt(10)&&this.raise(h,"Invalid number"));un(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");c=this.input.slice(h,this.pos);f=f?parseInt(c,8):parseFloat(c.replace(/_/g,""));return this.finishToken(ac.num,f)};$i.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>
this.options.ecmaVersion&&this.unexpected();var c=++this.pos;var h=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<h&&this.invalidStringToken(c,"Code point out of bounds")}else h=this.readHexChar(4);return h};$i.readString=function(c){for(var h="",f=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var m=this.input.charCodeAt(this.pos);if(m===c)break;92===m?(h+=this.input.slice(f,this.pos),h+=this.readEscapedChar(!1),f=
this.pos):(jz(m,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}h+=this.input.slice(f,this.pos++);return this.finishToken(ac.string,h)};var N8={};$i.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===N8)this.readInvalidTemplateToken();else throw c;}this.inTemplateElement=!1};$i.invalidStringToken=function(c,h){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw N8;this.raise(c,h)};$i.readTmplToken=
function(){for(var c="",h=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var f=this.input.charCodeAt(this.pos);if(96===f||36===f&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===ac.template||this.type===ac.invalidTemplate)){if(36===f)return this.pos+=2,this.finishToken(ac.dollarBraceL);++this.pos;return this.finishToken(ac.backQuote)}c+=this.input.slice(h,this.pos);return this.finishToken(ac.template,c)}if(92===f)c+=this.input.slice(h,
this.pos),c+=this.readEscapedChar(!0),h=this.pos;else if(jz(f)){c+=this.input.slice(h,this.pos);++this.pos;switch(f){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:c+="\n";break;default:c+=String.fromCharCode(f)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);h=this.pos}else++this.pos}};$i.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;
case "`":return this.finishToken(ac.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};$i.readEscapedChar=function(c){var h=this.input.charCodeAt(++this.pos);++this.pos;switch(h){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return qQ(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;
case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),c)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=h&&55>=h){var f=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],m=parseInt(f,8);255<m&&(f=f.slice(0,-1),m=parseInt(f,8));this.pos+=f.length-1;h=this.input.charCodeAt(this.pos);"0"===f&&56!==h&&57!==h||!this.strict&&
!c||this.invalidStringToken(this.pos-1-f.length,c?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(m)}return jz(h)?"":String.fromCharCode(h)}};$i.readHexChar=function(c){var h=this.pos;c=this.readInt(16,c);null===c&&this.invalidStringToken(h,"Bad character escape sequence");return c};$i.readWord1=function(){this.containsEsc=!1;for(var c="",h=!0,f=this.pos,m=6<=this.options.ecmaVersion;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(ap(n,
m))this.pos+=65535>=n?1:2;else if(92===n)this.containsEsc=!0,c+=this.input.slice(f,this.pos),f=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,n=this.readCodePoint(),(h?un:ap)(n,m)||this.invalidStringToken(f,"Invalid Unicode escape"),c+=qQ(n),f=this.pos;else break;h=!1}return c+this.input.slice(f,this.pos)};$i.readWord=function(){var c=this.readWord1(),h=ac.name;this.keywords.test(c)&&(h=HG[c]);return this.finishToken(h,
c)};bl.acorn={Parser:bl,version:"8.0.4",defaultOptions:IG,Position:lz,SourceLocation:kC,getLineInfo:pQ,Node:qE,TokenType:uj,tokTypes:ac,keywordTypes:HG,TokContext:Ap,tokContexts:Sk,isIdentifierChar:ap,isIdentifierStart:un,Token:TL,isNewLine:jz,lineBreak:Jo,lineBreakG:kz,nonASCIIwhitespace:mV};var Hr=Object.freeze({__proto__:null,Node:qE,Parser:bl,Position:lz,SourceLocation:kC,TokContext:Ap,Token:TL,TokenType:uj,defaultOptions:IG,getLineInfo:pQ,isIdentifierChar:ap,isIdentifierStart:un,isNewLine:jz,
keywordTypes:HG,lineBreak:Jo,lineBreakG:kz,nonASCIIwhitespace:mV,parse:function(c,h){return bl.parse(c,h)},parseExpressionAt:function(c,h,f){return bl.parseExpressionAt(c,h,f)},tokContexts:Sk,tokTypes:ac,tokenizer:function(c,h){return bl.tokenizer(c,h)},version:"8.0.4"});Ma("bN",Hr);var mx=function(c,h){this.node=c;this.state=h},nf={};nf.Program=nf.BlockStatement=function(c,h,f){var m=0;for(c=c.body;m<c.length;m+=1)f(c[m],h,"Statement")};nf.Statement=rQ;nf.EmptyStatement=kw;nf.ExpressionStatement=
nf.ParenthesizedExpression=nf.ChainExpression=function(c,h,f){return f(c.expression,h,"Expression")};nf.IfStatement=function(c,h,f){f(c.test,h,"Expression");f(c.consequent,h,"Statement");c.alternate&&f(c.alternate,h,"Statement")};nf.LabeledStatement=function(c,h,f){return f(c.body,h,"Statement")};nf.BreakStatement=nf.ContinueStatement=kw;nf.WithStatement=function(c,h,f){f(c.object,h,"Expression");f(c.body,h,"Statement")};nf.SwitchStatement=function(c,h,f){f(c.discriminant,h,"Expression");var m=0;
for(c=c.cases;m<c.length;m+=1){var n=c[m];n.test&&f(n.test,h,"Expression");var a=0;for(n=n.consequent;a<n.length;a+=1)f(n[a],h,"Statement")}};nf.SwitchCase=function(c,h,f){c.test&&f(c.test,h,"Expression");var m=0;for(c=c.consequent;m<c.length;m+=1)f(c[m],h,"Statement")};nf.ReturnStatement=nf.YieldExpression=nf.AwaitExpression=function(c,h,f){c.argument&&f(c.argument,h,"Expression")};nf.ThrowStatement=nf.SpreadElement=function(c,h,f){return f(c.argument,h,"Expression")};nf.TryStatement=function(c,
h,f){f(c.block,h,"Statement");c.handler&&f(c.handler,h);c.finalizer&&f(c.finalizer,h,"Statement")};nf.CatchClause=function(c,h,f){c.param&&f(c.param,h,"Pattern");f(c.body,h,"Statement")};nf.WhileStatement=nf.DoWhileStatement=function(c,h,f){f(c.test,h,"Expression");f(c.body,h,"Statement")};nf.ForStatement=function(c,h,f){c.init&&f(c.init,h,"ForInit");c.test&&f(c.test,h,"Expression");c.update&&f(c.update,h,"Expression");f(c.body,h,"Statement")};nf.ForInStatement=nf.ForOfStatement=function(c,h,f){f(c.left,
h,"ForInit");f(c.right,h,"Expression");f(c.body,h,"Statement")};nf.ForInit=function(c,h,f){"VariableDeclaration"===c.type?f(c,h):f(c,h,"Expression")};nf.DebuggerStatement=kw;nf.FunctionDeclaration=function(c,h,f){return f(c,h,"Function")};nf.VariableDeclaration=function(c,h,f){var m=0;for(c=c.declarations;m<c.length;m+=1)f(c[m],h)};nf.VariableDeclarator=function(c,h,f){f(c.id,h,"Pattern");c.init&&f(c.init,h,"Expression")};nf.Function=function(c,h,f){c.id&&f(c.id,h,"Pattern");for(var m=0,n=c.params;m<
n.length;m+=1)f(n[m],h,"Pattern");f(c.body,h,c.expression?"Expression":"Statement")};nf.Pattern=function(c,h,f){"Identifier"===c.type?f(c,h,"VariablePattern"):"MemberExpression"===c.type?f(c,h,"MemberPattern"):f(c,h)};nf.VariablePattern=kw;nf.MemberPattern=rQ;nf.RestElement=function(c,h,f){return f(c.argument,h,"Pattern")};nf.ArrayPattern=function(c,h,f){var m=0;for(c=c.elements;m<c.length;m+=1){var n=c[m];n&&f(n,h,"Pattern")}};nf.ObjectPattern=function(c,h,f){var m=0;for(c=c.properties;m<c.length;m+=
1){var n=c[m];"Property"===n.type?(n.computed&&f(n.key,h,"Expression"),f(n.value,h,"Pattern")):"RestElement"===n.type&&f(n.argument,h,"Pattern")}};nf.Expression=rQ;nf.ThisExpression=nf.Super=nf.MetaProperty=kw;nf.ArrayExpression=function(c,h,f){var m=0;for(c=c.elements;m<c.length;m+=1){var n=c[m];n&&f(n,h,"Expression")}};nf.ObjectExpression=function(c,h,f){var m=0;for(c=c.properties;m<c.length;m+=1)f(c[m],h)};nf.FunctionExpression=nf.ArrowFunctionExpression=nf.FunctionDeclaration;nf.SequenceExpression=
function(c,h,f){var m=0;for(c=c.expressions;m<c.length;m+=1)f(c[m],h,"Expression")};nf.TemplateLiteral=function(c,h,f){for(var m=0,n=c.quasis;m<n.length;m+=1)f(n[m],h);m=0;for(c=c.expressions;m<c.length;m+=1)f(c[m],h,"Expression")};nf.TemplateElement=kw;nf.UnaryExpression=nf.UpdateExpression=function(c,h,f){f(c.argument,h,"Expression")};nf.BinaryExpression=nf.LogicalExpression=function(c,h,f){f(c.left,h,"Expression");f(c.right,h,"Expression")};nf.AssignmentExpression=nf.AssignmentPattern=function(c,
h,f){f(c.left,h,"Pattern");f(c.right,h,"Expression")};nf.ConditionalExpression=function(c,h,f){f(c.test,h,"Expression");f(c.consequent,h,"Expression");f(c.alternate,h,"Expression")};nf.NewExpression=nf.CallExpression=function(c,h,f){f(c.callee,h,"Expression");if(c.arguments){var m=0;for(c=c.arguments;m<c.length;m+=1)f(c[m],h,"Expression")}};nf.MemberExpression=function(c,h,f){f(c.object,h,"Expression");c.computed&&f(c.property,h,"Expression")};nf.ExportNamedDeclaration=nf.ExportDefaultDeclaration=
function(c,h,f){c.declaration&&f(c.declaration,h,"ExportNamedDeclaration"===c.type||c.declaration.id?"Statement":"Expression");c.source&&f(c.source,h,"Expression")};nf.ExportAllDeclaration=function(c,h,f){c.exported&&f(c.exported,h);f(c.source,h,"Expression")};nf.ImportDeclaration=function(c,h,f){for(var m=0,n=c.specifiers;m<n.length;m+=1)f(n[m],h);f(c.source,h,"Expression")};nf.ImportExpression=function(c,h,f){f(c.source,h,"Expression")};nf.ImportSpecifier=nf.ImportDefaultSpecifier=nf.ImportNamespaceSpecifier=
nf.Identifier=nf.PrivateIdentifier=nf.Literal=kw;nf.TaggedTemplateExpression=function(c,h,f){f(c.tag,h,"Expression");f(c.quasi,h,"Expression")};nf.ClassDeclaration=nf.ClassExpression=function(c,h,f){return f(c,h,"Class")};nf.Class=function(c,h,f){c.id&&f(c.id,h,"Pattern");c.superClass&&f(c.superClass,h,"Expression");f(c.body,h)};nf.ClassBody=function(c,h,f){var m=0;for(c=c.body;m<c.length;m+=1)f(c[m],h)};nf.MethodDefinition=nf.PropertyDefinition=nf.Property=function(c,h,f){c.computed&&f(c.key,h,"Expression");
c.value&&f(c.value,h,"Expression")};var sq=Object.freeze({__proto__:null,ancestor:function(c,h,f,m,n){var a=[];f||(f=nf);(function l(k,b,e){e=e||k.type;var p=h[e],u=k!==a[a.length-1];u&&a.push(k);f[e](k,b,l);p&&p(k,b||a,a);u&&a.pop()})(c,m,n)},base:nf,findNodeAfter:function(c,h,f,m,n){f=OG(f);m||(m=nf);try{(function e(d,k,b){if(!(d.end<h)){b=b||d.type;if(d.start>=h&&f(b,d))throw new mx(d,k);m[b](d,k,e)}})(c,n)}catch(a){if(a instanceof mx)return a;throw a;}},findNodeAround:function(c,h,f,m,n){f=OG(f);
m||(m=nf);try{(function e(d,k,b){b=b||d.type;if(!(d.start>h||d.end<h)&&(m[b](d,k,e),f(b,d)))throw new mx(d,k);})(c,n)}catch(a){if(a instanceof mx)return a;throw a;}},findNodeAt:function(c,h,f,m,n,a){n||(n=nf);m=OG(m);try{(function l(k,b,e){e=e||k.type;if((null==h||k.start<=h)&&(null==f||k.end>=f))n[e](k,b,l);if(!(null!=h&&k.start!==h||null!=f&&k.end!==f)&&m(e,k))throw new mx(k,b);})(c,a)}catch(d){if(d instanceof mx)return d;throw d;}},findNodeBefore:function(c,h,f,m,n){f=OG(f);m||(m=nf);var a;(function l(k,
b,e){k.start>h||(e=e||k.type,k.end<=h&&(!a||a.node.end<k.end)&&f(e,k)&&(a=new mx(k,b)),m[e](k,b,l))})(c,n);return a},full:function(c,h,f,m,n){f||(f=nf);var a;(function l(k,b,e){e=e||k.type;f[e](k,b,l);a!==k&&(h(k,b,e),a=k)})(c,m,n)},fullAncestor:function(c,h,f,m){f||(f=nf);var n=[],a;(function l(k,b,e){e=e||k.type;var p=k!==n[n.length-1];p&&n.push(k);f[e](k,b,l);a!==k&&(h(k,b||n,n,e),a=k);p&&n.pop()})(c,m)},make:h_,recursive:function(c,h,f,m,n){var a=f?h_(f,m||void 0):m;(function l(k,b,e){a[e||k.type](k,
b,l)})(c,h,n)},simple:function(c,h,f,m,n){f||(f=nf);(function e(d,k,b){b=b||d.type;var l=h[b];f[b](d,k,e);l&&l(d,k)})(c,m,n)}}),pV={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},
Fna={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this","5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},
Gna=/^in(stanceof)?$/,qV="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
O8="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
Mfa=new RegExp("["+qV+"]"),Nfa=new RegExp("["+qV+O8+"]");qV=O8=null;var i_=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,
14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,
0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],Ofa=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,
13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,
9,787719,239],vj=function(c,h){void 0===h&&(h={});this.label=c;this.keyword=h.keyword;this.beforeExpr=!!h.beforeExpr;this.startsExpr=!!h.startsExpr;this.isLoop=!!h.isLoop;this.isAssign=!!h.isAssign;this.prefix=!!h.prefix;this.postfix=!!h.postfix;this.binop=h.binop||null;this.updateContext=null},Bp={beforeExpr:!0},ho={startsExpr:!0},tQ={},bb={num:new vj("num",ho),regexp:new vj("regexp",ho),string:new vj("string",ho),name:new vj("name",ho),privateId:new vj("privateId",ho),eof:new vj("eof"),bracketL:new vj("[",
{beforeExpr:!0,startsExpr:!0}),bracketR:new vj("]"),braceL:new vj("{",{beforeExpr:!0,startsExpr:!0}),braceR:new vj("}"),parenL:new vj("(",{beforeExpr:!0,startsExpr:!0}),parenR:new vj(")"),comma:new vj(",",Bp),semi:new vj(";",Bp),colon:new vj(":",Bp),dot:new vj("."),question:new vj("?",Bp),questionDot:new vj("?."),arrow:new vj("=>",Bp),template:new vj("template"),invalidTemplate:new vj("invalidTemplate"),ellipsis:new vj("...",Bp),backQuote:new vj("`",ho),dollarBraceL:new vj("${",{beforeExpr:!0,startsExpr:!0}),
eq:new vj("=",{beforeExpr:!0,isAssign:!0}),assign:new vj("_=",{beforeExpr:!0,isAssign:!0}),incDec:new vj("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new vj("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:cp("||",1),logicalAND:cp("&&",2),bitwiseOR:cp("|",3),bitwiseXOR:cp("^",4),bitwiseAND:cp("&",5),equality:cp("==/!=/===/!==",6),relational:cp("</>/<=/>=",7),bitShift:cp("<</>>/>>>",8),plusMin:new vj("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:cp("%",10),star:cp("*",
10),slash:cp("/",10),starstar:new vj("**",{beforeExpr:!0}),coalesce:cp("??",1),_break:ej("break"),_case:ej("case",Bp),_catch:ej("catch"),_continue:ej("continue"),_debugger:ej("debugger"),_default:ej("default",Bp),_do:ej("do",{isLoop:!0,beforeExpr:!0}),_else:ej("else",Bp),_finally:ej("finally"),_for:ej("for",{isLoop:!0}),_function:ej("function",ho),_if:ej("if"),_return:ej("return",Bp),_switch:ej("switch"),_throw:ej("throw",Bp),_try:ej("try"),_var:ej("var"),_const:ej("const"),_while:ej("while",{isLoop:!0}),
_with:ej("with"),_new:ej("new",{beforeExpr:!0,startsExpr:!0}),_this:ej("this",ho),_super:ej("super",ho),_class:ej("class",ho),_extends:ej("extends",Bp),_export:ej("export"),_import:ej("import",ho),_null:ej("null",ho),_true:ej("true",ho),_false:ej("false",ho),_in:ej("in",{beforeExpr:!0,binop:7}),_instanceof:ej("instanceof",{beforeExpr:!0,binop:7}),_typeof:ej("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:ej("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:ej("delete",{beforeExpr:!0,
prefix:!0,startsExpr:!0})},Ko=/\r\n?|\n|\u2028|\u2029/,mw=new RegExp(Ko.source,"g"),P8=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Cp=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Q8=Object.prototype,nC=Q8.hasOwnProperty,Hna=Q8.toString,k_=Array.isArray||function(c){return"[object Array]"===Hna.call(c)},mC=function(c,h){this.line=c;this.column=h};mC.prototype.offset=function(c){return new mC(this.line,this.column+c)};var nz=function(c,h,f){this.start=h;this.end=f;null!==c.sourceFile&&(this.source=c.sourceFile)},
PG={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},j_=!1,Xl=function(c,h,f){this.options=c=Pfa(c);this.sourceFile=c.sourceFile;this.keywords=lw(Fna[6<=c.ecmaVersion?6:"module"===c.sourceType?
"5module":5]);var m="";!0!==c.allowReserved&&(m=pV[6<=c.ecmaVersion?6:5===c.ecmaVersion?5:3],"module"===c.sourceType&&(m+=" await"));this.reservedWords=lw(m);m=(m?m+" ":"")+pV.strict;this.reservedWordsStrict=lw(m);this.reservedWordsStrictBind=lw(m+" "+pV.strictBind);this.input=String(h);this.containsEsc=!1;f?(this.pos=f,this.lineStart=this.input.lastIndexOf("\n",f-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ko).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=bb.eof;this.value=
null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===c.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.potentialArrowInForAwait=!1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports=Object.create(null);0===this.pos&&c.allowHashBang&&
"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null;this.privateNameStack=[]},Ws={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};Xl.prototype.parse=function(){var c=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(c)};
Ws.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};Ws.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)&&!this.currentVarScope().inClassFieldInit};Ws.inAsync.get=function(){return 0<(this.currentVarScope().flags&4)&&!this.currentVarScope().inClassFieldInit};Ws.canAwait.get=function(){for(var c=this.scopeStack.length-1;0<=c;c--){var h=this.scopeStack[c];if(h.inClassFieldInit)return!1;if(h.flags&2)return 0<(h.flags&4)}return this.inModule&&13<=this.options.ecmaVersion||
this.options.allowAwaitOutsideFunction};Ws.allowSuper.get=function(){var c=this.currentThisScope(),h=c.inClassFieldInit;return 0<(c.flags&64)||h||this.options.allowSuperOutsideMethod};Ws.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};Ws.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Ws.inNonArrowFunction.get=function(){var c=this.currentThisScope(),h=c.inClassFieldInit;return 0<(c.flags&2)||h};Xl.extend=function(){for(var c=
[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var f=0;f<c.length;f++)h=c[f](h);return h};Xl.parse=function(c,h){return(new this(h,c)).parse()};Xl.parseExpressionAt=function(c,h,f){c=new this(f,c,h);c.nextToken();return c.parseExpression()};Xl.tokenizer=function(c,h){return new this(h,c)};Object.defineProperties(Xl.prototype,Ws);var Bn=Xl.prototype,Ina=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Bn.strictDirective=function(c){for(;;){Cp.lastIndex=c;c+=Cp.exec(this.input)[0].length;var h=
Ina.exec(this.input.slice(c));if(!h)return!1;if("use strict"===(h[1]||h[2])){Cp.lastIndex=c+h[0].length;c=Cp.exec(this.input);h=c.index+c[0].length;var f=this.input.charAt(h);return";"===f||"}"===f||Ko.test(c[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(f)||"!"===f&&"="===this.input.charAt(h+1))}c+=h[0].length;Cp.lastIndex=c;c+=Cp.exec(this.input)[0].length;";"===this.input[c]&&c++}};Bn.eat=function(c){return this.type===c?(this.next(),!0):!1};Bn.isContextual=function(c){return this.type===bb.name&&this.value===
c&&!this.containsEsc};Bn.eatContextual=function(c){if(!this.isContextual(c))return!1;this.next();return!0};Bn.expectContextual=function(c){this.eatContextual(c)||this.unexpected()};Bn.canInsertSemicolon=function(){return this.type===bb.eof||this.type===bb.braceR||Ko.test(this.input.slice(this.lastTokEnd,this.start))};Bn.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};Bn.semicolon=
function(){this.eat(bb.semi)||this.insertSemicolon()||this.unexpected()};Bn.afterTrailingComma=function(c,h){if(this.type===c){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc);h||this.next();return!0}};Bn.expect=function(c){this.eat(c)||this.unexpected()};Bn.unexpected=function(c){this.raise(null!=c?c:this.start,"Unexpected token")};Bn.checkPatternErrors=function(c,h){c&&(-1<c.trailingComma&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element"),
c=h?c.parenthesizedAssign:c.parenthesizedBind,-1<c&&this.raiseRecoverable(c,"Parenthesized pattern"))};Bn.checkExpressionErrors=function(c,h){if(!c)return!1;var f=c.shorthandAssign;c=c.doubleProto;if(!h)return 0<=f||0<=c;0<=f&&this.raise(f,"Shorthand property assignments are valid only in destructuring patterns");0<=c&&this.raiseRecoverable(c,"Redefinition of __proto__ property")};Bn.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,
"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Bn.isSimpleAssignTarget=function(c){return"ParenthesizedExpression"===c.type?this.isSimpleAssignTarget(c.expression):"Identifier"===c.type||"MemberExpression"===c.type};var Eh=Xl.prototype;Eh.parseTopLevel=function(c){var h=Object.create(null);c.body||(c.body=[]);for(;this.type!==bb.eof;){var f=this.parseStatement(null,!0,h);c.body.push(f)}if(this.inModule)for(h=0,f=
Object.keys(this.undefinedExports);h<f.length;h+=1){var m=f[h];this.raiseRecoverable(this.undefinedExports[m].start,"Export '"+m+"' is not defined")}this.adaptDirectivePrologue(c.body);this.next();c.sourceType=this.options.sourceType;return this.finishNode(c,"Program")};var rV={kind:"loop"},Jna={kind:"switch"};Eh.isLet=function(c){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;Cp.lastIndex=this.pos;var h=Cp.exec(this.input);h=this.pos+h[0].length;var f=this.input.charCodeAt(h);
if(91===f||92===f||55295<f&&56320>f)return!0;if(c)return!1;if(123===f)return!0;if(qs(f,!0)){for(c=h+1;mz(f=this.input.charCodeAt(c),!0);)++c;if(92===f||55295<f&&56320>f)return!0;c=this.input.slice(h,c);if(!Gna.test(c))return!0}return!1};Eh.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;Cp.lastIndex=this.pos;var c=Cp.exec(this.input);c=this.pos+c[0].length;var h;return!Ko.test(this.input.slice(this.pos,c))&&"function"===this.input.slice(c,c+8)&&(c+8===
this.input.length||!(mz(h=this.input.charCodeAt(c+8))||55295<h&&56320>h))};Eh.parseStatement=function(c,h,f){var m=this.type,n=this.startNode();if(this.isLet(c)){m=bb._var;var a="let"}switch(m){case bb._break:case bb._continue:return this.parseBreakContinueStatement(n,m.keyword);case bb._debugger:return this.parseDebuggerStatement(n);case bb._do:return this.parseDoStatement(n);case bb._for:return this.parseForStatement(n);case bb._function:return c&&(this.strict||"if"!==c&&"label"!==c)&&6<=this.options.ecmaVersion&&
this.unexpected(),this.parseFunctionStatement(n,!1,!c);case bb._class:return c&&this.unexpected(),this.parseClass(n,!0);case bb._if:return this.parseIfStatement(n);case bb._return:return this.parseReturnStatement(n);case bb._switch:return this.parseSwitchStatement(n);case bb._throw:return this.parseThrowStatement(n);case bb._try:return this.parseTryStatement(n);case bb._const:case bb._var:return a=a||this.value,c&&"var"!==a&&this.unexpected(),this.parseVarStatement(n,a);case bb._while:return this.parseWhileStatement(n);
case bb._with:return this.parseWithStatement(n);case bb.braceL:return this.parseBlock(!0,n);case bb.semi:return this.parseEmptyStatement(n);case bb._export:case bb._import:if(10<this.options.ecmaVersion&&m===bb._import&&(Cp.lastIndex=this.pos,c=Cp.exec(this.input),c=this.input.charCodeAt(this.pos+c[0].length),40===c||46===c))return this.parseExpressionStatement(n,this.parseExpression());this.options.allowImportExportEverywhere||(h||this.raise(this.start,"'import' and 'export' may only appear at the top level"),
this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return m===bb._import?this.parseImport(n):this.parseExport(n,f);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!c);h=this.value;f=this.parseExpression();return m===bb.name&&"Identifier"===f.type&&this.eat(bb.colon)?this.parseLabeledStatement(n,h,f,c):this.parseExpressionStatement(n,f)}};Eh.parseBreakContinueStatement=function(c,h){var f=
"break"===h;this.next();this.eat(bb.semi)||this.insertSemicolon()?c.label=null:this.type!==bb.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var m=0;m<this.labels.length;++m){var n=this.labels[m];if(null==c.label||n.name===c.label.name){if(null!=n.kind&&(f||"loop"===n.kind))break;if(c.label&&f)break}}m===this.labels.length&&this.raise(c.start,"Unsyntactic "+h);return this.finishNode(c,f?"BreakStatement":"ContinueStatement")};Eh.parseDebuggerStatement=function(c){this.next();
this.semicolon();return this.finishNode(c,"DebuggerStatement")};Eh.parseDoStatement=function(c){this.next();this.labels.push(rV);c.body=this.parseStatement("do");this.labels.pop();this.expect(bb._while);c.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(bb.semi):this.semicolon();return this.finishNode(c,"DoWhileStatement")};Eh.parseForStatement=function(c){this.next();var h=9<=this.options.ecmaVersion&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(rV);
this.enterScope(0);this.expect(bb.parenL);if(this.type===bb.semi)return-1<h&&this.unexpected(h),this.parseFor(c,null);var f=this.isLet();if(this.type===bb._var||this.type===bb._const||f){var m=this.startNode();f=f?"let":this.value;this.next();this.parseVar(m,!0,f);this.finishNode(m,"VariableDeclaration");if((this.type===bb._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===m.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===bb._in?-1<h&&this.unexpected(h):c.await=-1<
h),this.parseForIn(c,m);-1<h&&this.unexpected(h);return this.parseFor(c,m)}m=new QG;f=this.parseExpression(-1<h?"await":!0,m);if(this.type===bb._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===bb._in?-1<h&&this.unexpected(h):c.await=-1<h),this.toAssignable(f,!1,m),this.checkLValPattern(f),this.parseForIn(c,f);this.checkExpressionErrors(m,!0);-1<h&&this.unexpected(h);return this.parseFor(c,f)};Eh.parseFunctionStatement=function(c,h,f){this.next();
return this.parseFunction(c,sE|(f?0:sV),!1,h)};Eh.parseIfStatement=function(c){this.next();c.test=this.parseParenExpression();c.consequent=this.parseStatement("if");c.alternate=this.eat(bb._else)?this.parseStatement("if"):null;return this.finishNode(c,"IfStatement")};Eh.parseReturnStatement=function(c){this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(bb.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),
this.semicolon());return this.finishNode(c,"ReturnStatement")};Eh.parseSwitchStatement=function(c){this.next();c.discriminant=this.parseParenExpression();c.cases=[];this.expect(bb.braceL);this.labels.push(Jna);this.enterScope(0);for(var h,f=!1;this.type!==bb.braceR;)if(this.type===bb._case||this.type===bb._default){var m=this.type===bb._case;h&&this.finishNode(h,"SwitchCase");c.cases.push(h=this.startNode());h.consequent=[];this.next();m?h.test=this.parseExpression():(f&&this.raiseRecoverable(this.lastTokStart,
"Multiple default clauses"),f=!0,h.test=null);this.expect(bb.colon)}else h||this.unexpected(),h.consequent.push(this.parseStatement(null));this.exitScope();h&&this.finishNode(h,"SwitchCase");this.next();this.labels.pop();return this.finishNode(c,"SwitchStatement")};Eh.parseThrowStatement=function(c){this.next();Ko.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");c.argument=this.parseExpression();this.semicolon();return this.finishNode(c,
"ThrowStatement")};var Kna=[];Eh.parseTryStatement=function(c){this.next();c.block=this.parseBlock();c.handler=null;if(this.type===bb._catch){var h=this.startNode();this.next();if(this.eat(bb.parenL)){h.param=this.parseBindingAtom();var f="Identifier"===h.param.type;this.enterScope(f?32:0);this.checkLValPattern(h.param,f?4:2);this.expect(bb.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),h.param=null,this.enterScope(0);h.body=this.parseBlock(!1);this.exitScope();c.handler=this.finishNode(h,
"CatchClause")}c.finalizer=this.eat(bb._finally)?this.parseBlock():null;c.handler||c.finalizer||this.raise(c.start,"Missing catch or finally clause");return this.finishNode(c,"TryStatement")};Eh.parseVarStatement=function(c,h){this.next();this.parseVar(c,!1,h);this.semicolon();return this.finishNode(c,"VariableDeclaration")};Eh.parseWhileStatement=function(c){this.next();c.test=this.parseParenExpression();this.labels.push(rV);c.body=this.parseStatement("while");this.labels.pop();return this.finishNode(c,
"WhileStatement")};Eh.parseWithStatement=function(c){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();c.object=this.parseParenExpression();c.body=this.parseStatement("with");return this.finishNode(c,"WithStatement")};Eh.parseEmptyStatement=function(c){this.next();return this.finishNode(c,"EmptyStatement")};Eh.parseLabeledStatement=function(c,h,f,m){for(var n=0,a=this.labels;n<a.length;n+=1)a[n].name===h&&this.raise(f.start,"Label '"+h+"' is already declared");n=this.type.isLoop?
"loop":this.type===bb._switch?"switch":null;for(a=this.labels.length-1;0<=a;a--){var d=this.labels[a];if(d.statementStart===c.start)d.statementStart=this.start,d.kind=n;else break}this.labels.push({name:h,kind:n,statementStart:this.start});c.body=this.parseStatement(m?-1===m.indexOf("label")?m+"label":m:"label");this.labels.pop();c.label=f;return this.finishNode(c,"LabeledStatement")};Eh.parseExpressionStatement=function(c,h){c.expression=h;this.semicolon();return this.finishNode(c,"ExpressionStatement")};
Eh.parseBlock=function(c,h,f){void 0===c&&(c=!0);void 0===h&&(h=this.startNode());h.body=[];this.expect(bb.braceL);for(c&&this.enterScope(0);this.type!==bb.braceR;){var m=this.parseStatement(null);h.body.push(m)}f&&(this.strict=!1);this.next();c&&this.exitScope();return this.finishNode(h,"BlockStatement")};Eh.parseFor=function(c,h){c.init=h;this.expect(bb.semi);c.test=this.type===bb.semi?null:this.parseExpression();this.expect(bb.semi);c.update=this.type===bb.parenR?null:this.parseExpression();this.expect(bb.parenR);
c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,"ForStatement")};Eh.parseForIn=function(c,h){var f=this.type===bb._in;this.next();"VariableDeclaration"===h.type&&null!=h.declarations[0].init&&(!f||8>this.options.ecmaVersion||this.strict||"var"!==h.kind||"Identifier"!==h.declarations[0].id.type)&&this.raise(h.start,(f?"for-in":"for-of")+" loop variable declaration may not have an initializer");c.left=h;c.right=f?this.parseExpression():this.parseMaybeAssign();
this.expect(bb.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,f?"ForInStatement":"ForOfStatement")};Eh.parseVar=function(c,h,f){c.declarations=[];for(c.kind=f;;){var m=this.startNode();this.parseVarId(m,f);this.eat(bb.eq)?m.init=this.parseMaybeAssign(h):"const"!==f||this.type===bb._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===m.id.type||h&&(this.type===bb._in||this.isContextual("of"))?m.init=null:this.raise(this.lastTokEnd,
"Complex binding patterns require an initialization value"):this.unexpected();c.declarations.push(this.finishNode(m,"VariableDeclarator"));if(!this.eat(bb.comma))break}return c};Eh.parseVarId=function(c,h){c.id=this.parseBindingAtom();this.checkLValPattern(c.id,"var"===h?1:2,!1)};var sE=1,sV=2;Eh.parseFunction=function(c,h,f,m){this.initFunction(c);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!m)this.type===bb.star&&h&sV&&this.unexpected(),c.generator=this.eat(bb.star);8<=this.options.ecmaVersion&&
(c.async=!!m);h&sE&&(c.id=h&4&&this.type!==bb.name?null:this.parseIdent(),!c.id||h&sV||this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?1:2:3));m=this.yieldPos;var n=this.awaitPos,a=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(c.async?4:0)|(c.generator?8:0));h&sE||(c.id=this.type===bb.name?this.parseIdent():null);this.parseFunctionParams(c);this.parseFunctionBody(c,f,!1);this.yieldPos=m;this.awaitPos=n;this.awaitIdentPos=
a;return this.finishNode(c,h&sE?"FunctionDeclaration":"FunctionExpression")};Eh.parseFunctionParams=function(c){this.expect(bb.parenL);c.params=this.parseBindingList(bb.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};Eh.parseClass=function(c,h){this.next();var f=this.strict;this.strict=!0;this.parseClassId(c,h);this.parseClassSuper(c);var m=this.enterClassBody(),n=this.startNode(),a=!1;n.body=[];for(this.expect(bb.braceL);this.type!==bb.braceR;){var d=this.parseClassElement(null!==
c.superClass);if(d)if(n.body.push(d),"MethodDefinition"===d.type&&"constructor"===d.kind)a&&this.raise(d.start,"Duplicate constructor in the same class"),a=!0;else{var k;if(k="PrivateIdentifier"===d.key.type){k=m;var b=d.key.name,e=k[b],l="true";"MethodDefinition"!==d.type||"get"!==d.kind&&"set"!==d.kind||(l=(d.static?"s":"i")+d.kind);"iget"===e&&"iset"===l||"iset"===e&&"iget"===l||"sget"===e&&"sset"===l||"sset"===e&&"sget"===l?(k[b]="true",k=!1):e?k=!0:(k[b]=l,k=!1)}k&&this.raiseRecoverable(d.key.start,
"Identifier '#"+d.key.name+"' has already been declared")}}this.strict=f;this.next();c.body=this.finishNode(n,"ClassBody");this.exitClassBody();return this.finishNode(c,h?"ClassDeclaration":"ClassExpression")};Eh.parseClassElement=function(c){if(this.eat(bb.semi))return null;var h=this.options.ecmaVersion,f=this.startNode(),m="",n=!1,a=!1,d="method";f.static=!1;this.eatContextual("static")&&(this.isClassElementNameStart()||this.type===bb.star?f.static=!0:m="static");!m&&8<=h&&this.eatContextual("async")&&
(!this.isClassElementNameStart()&&this.type!==bb.star||this.canInsertSemicolon()?m="async":a=!0);!m&&(9<=h||!a)&&this.eat(bb.star)&&(n=!0);if(!m&&!a&&!n){var k=this.value;if(this.eatContextual("get")||this.eatContextual("set"))this.isClassElementNameStart()?d=k:m=k}m?(f.computed=!1,f.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),f.key.name=m,this.finishNode(f.key,"Identifier")):this.parseClassElementName(f);13>h||this.type===bb.parenL||"method"!==d||n||a?(c=(h=!f.static&&RG(f,"constructor"))&&
c,h&&"method"!==d&&this.raise(f.key.start,"Constructor can't have get/set modifier"),f.kind=h?"constructor":d,this.parseClassMethod(f,n,a,c)):this.parseClassField(f);return f};Eh.isClassElementNameStart=function(){return this.type===bb.name||this.type===bb.privateId||this.type===bb.num||this.type===bb.string||this.type===bb.bracketL||this.type.keyword};Eh.parseClassElementName=function(c){this.type===bb.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),
c.computed=!1,c.key=this.parsePrivateIdent()):this.parsePropertyName(c)};Eh.parseClassMethod=function(c,h,f,m){var n=c.key;"constructor"===c.kind?(h&&this.raise(n.start,"Constructor can't be a generator"),f&&this.raise(n.start,"Constructor can't be an async method")):c.static&&RG(c,"prototype")&&this.raise(n.start,"Classes may not have a static property named prototype");h=c.value=this.parseMethod(h,f,m);"get"===c.kind&&0!==h.params.length&&this.raiseRecoverable(h.start,"getter should have no params");
"set"===c.kind&&1!==h.params.length&&this.raiseRecoverable(h.start,"setter should have exactly one param");"set"===c.kind&&"RestElement"===h.params[0].type&&this.raiseRecoverable(h.params[0].start,"Setter cannot use rest params");return this.finishNode(c,"MethodDefinition")};Eh.parseClassField=function(c){RG(c,"constructor")?this.raise(c.key.start,"Classes can't have a field named 'constructor'"):c.static&&RG(c,"prototype")&&this.raise(c.key.start,"Classes can't have a static field named 'prototype'");
if(this.eat(bb.eq)){var h=this.currentThisScope(),f=h.inClassFieldInit;h.inClassFieldInit=!0;c.value=this.parseMaybeAssign();h.inClassFieldInit=f}else c.value=null;this.semicolon();return this.finishNode(c,"PropertyDefinition")};Eh.parseClassId=function(c,h){this.type===bb.name?(c.id=this.parseIdent(),h&&this.checkLValSimple(c.id,2,!1)):(!0===h&&this.unexpected(),c.id=null)};Eh.parseClassSuper=function(c){c.superClass=this.eat(bb._extends)?this.parseExprSubscripts():null};Eh.enterClassBody=function(){var c=
{declared:Object.create(null),used:[]};this.privateNameStack.push(c);return c.declared};Eh.exitClassBody=function(){var c=this.privateNameStack.pop(),h=c.declared;c=c.used;var f=this.privateNameStack.length;f=0===f?null:this.privateNameStack[f-1];for(var m=0;m<c.length;++m){var n=c[m];nC.call(h,n.name)||(f?f.used.push(n):this.raiseRecoverable(n.start,"Private field '#"+n.name+"' must be declared in an enclosing class"))}};Eh.parseExport=function(c,h){this.next();if(this.eat(bb.star))return 11<=this.options.ecmaVersion&&
(this.eatContextual("as")?(c.exported=this.parseIdent(!0),this.checkExport(h,c.exported.name,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==bb.string&&this.unexpected(),c.source=this.parseExprAtom(),this.semicolon(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(bb._default)){this.checkExport(h,"default",this.lastTokStart);var f;this.type===bb._function||(f=this.isAsyncFunction())?(h=this.startNode(),this.next(),f&&this.next(),c.declaration=this.parseFunction(h,
sE|4,!1,f)):this.type===bb._class?(f=this.startNode(),c.declaration=this.parseClass(f,"nullableID")):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())c.declaration=this.parseStatement(null),"VariableDeclaration"===c.declaration.type?this.checkVariableExport(h,c.declaration.declarations):this.checkExport(h,c.declaration.id.name,c.declaration.id.start),c.specifiers=[],c.source=null;else{c.declaration=null;
c.specifiers=this.parseExportSpecifiers(h);if(this.eatContextual("from"))this.type!==bb.string&&this.unexpected(),c.source=this.parseExprAtom();else{f=0;for(h=c.specifiers;f<h.length;f+=1){var m=h[f];this.checkUnreserved(m.local);this.checkLocalExport(m.local)}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")};Eh.checkExport=function(c,h,f){c&&(nC.call(c,h)&&this.raiseRecoverable(f,"Duplicate export '"+h+"'"),c[h]=!0)};Eh.checkPatternExport=function(c,h){var f=h.type;
if("Identifier"===f)this.checkExport(c,h.name,h.start);else if("ObjectPattern"===f)for(f=0,h=h.properties;f<h.length;f+=1)this.checkPatternExport(c,h[f]);else if("ArrayPattern"===f)for(f=0,h=h.elements;f<h.length;f+=1){var m=h[f];m&&this.checkPatternExport(c,m)}else"Property"===f?this.checkPatternExport(c,h.value):"AssignmentPattern"===f?this.checkPatternExport(c,h.left):"RestElement"===f?this.checkPatternExport(c,h.argument):"ParenthesizedExpression"===f&&this.checkPatternExport(c,h.expression)};
Eh.checkVariableExport=function(c,h){if(c)for(var f=0;f<h.length;f+=1)this.checkPatternExport(c,h[f].id)};Eh.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};Eh.parseExportSpecifiers=function(c){var h=[],f=!0;for(this.expect(bb.braceL);!this.eat(bb.braceR);){if(f)f=!1;else if(this.expect(bb.comma),this.afterTrailingComma(bb.braceR))break;var m=this.startNode();
m.local=this.parseIdent(!0);m.exported=this.eatContextual("as")?this.parseIdent(!0):m.local;this.checkExport(c,m.exported.name,m.exported.start);h.push(this.finishNode(m,"ExportSpecifier"))}return h};Eh.parseImport=function(c){this.next();this.type===bb.string?(c.specifiers=Kna,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===bb.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(c,"ImportDeclaration")};
Eh.parseImportSpecifiers=function(){var c=[],h=!0;if(this.type===bb.name){var f=this.startNode();f.local=this.parseIdent();this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportDefaultSpecifier"));if(!this.eat(bb.comma))return c}if(this.type===bb.star)return h=this.startNode(),this.next(),this.expectContextual("as"),h.local=this.parseIdent(),this.checkLValSimple(h.local,2),c.push(this.finishNode(h,"ImportNamespaceSpecifier")),c;for(this.expect(bb.braceL);!this.eat(bb.braceR);){if(h)h=!1;
else if(this.expect(bb.comma),this.afterTrailingComma(bb.braceR))break;f=this.startNode();f.imported=this.parseIdent(!0);this.eatContextual("as")?f.local=this.parseIdent():(this.checkUnreserved(f.imported),f.local=f.imported);this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportSpecifier"))}return c};Eh.adaptDirectivePrologue=function(c){for(var h=0;h<c.length&&this.isDirectiveCandidate(c[h]);++h)c[h].directive=c[h].expression.raw.slice(1,-1)};Eh.isDirectiveCandidate=function(c){return"ExpressionStatement"===
c.type&&"Literal"===c.expression.type&&"string"===typeof c.expression.value&&('"'===this.input[c.start]||"'"===this.input[c.start])};var tq=Xl.prototype;tq.toAssignable=function(c,h,f){if(6<=this.options.ecmaVersion&&c)switch(c.type){case "Identifier":this.inAsync&&"await"===c.name&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":c.type="ObjectPattern";
f&&this.checkPatternErrors(f,!0);f=0;for(var m=c.properties;f<m.length;f+=1){var n=m[f];this.toAssignable(n,h);"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case "Property":"init"!==c.kind&&this.raise(c.key.start,"Object pattern can't contain getter or setter");this.toAssignable(c.value,h);break;case "ArrayExpression":c.type="ArrayPattern";f&&this.checkPatternErrors(f,!0);this.toAssignableList(c.elements,
h);break;case "SpreadElement":c.type="RestElement";this.toAssignable(c.argument,h);"AssignmentPattern"===c.argument.type&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==c.operator&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value.");c.type="AssignmentPattern";delete c.operator;this.toAssignable(c.left,h);break;case "ParenthesizedExpression":this.toAssignable(c.expression,h,f);break;case "ChainExpression":this.raiseRecoverable(c.start,
"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":if(!h)break;default:this.raise(c.start,"Assigning to rvalue")}else f&&this.checkPatternErrors(f,!0);return c};tq.toAssignableList=function(c,h){for(var f=c.length,m=0;m<f;m++){var n=c[m];n&&this.toAssignable(n,h)}f&&(f=c[f-1],6===this.options.ecmaVersion&&h&&f&&"RestElement"===f.type&&"Identifier"!==f.argument.type&&this.unexpected(f.argument.start));return c};tq.parseSpread=function(c){var h=this.startNode();this.next();
h.argument=this.parseMaybeAssign(!1,c);return this.finishNode(h,"SpreadElement")};tq.parseRestBinding=function(){var c=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==bb.name&&this.unexpected();c.argument=this.parseBindingAtom();return this.finishNode(c,"RestElement")};tq.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case bb.bracketL:var c=this.startNode();this.next();c.elements=this.parseBindingList(bb.bracketR,!0,!0);return this.finishNode(c,
"ArrayPattern");case bb.braceL:return this.parseObj(!0)}return this.parseIdent()};tq.parseBindingList=function(c,h,f){for(var m=[],n=!0;!this.eat(c);)if(n?n=!1:this.expect(bb.comma),h&&this.type===bb.comma)m.push(null);else if(f&&this.afterTrailingComma(c))break;else if(this.type===bb.ellipsis){h=this.parseRestBinding();this.parseBindingListItem(h);m.push(h);this.type===bb.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(c);break}else{var a=this.parseMaybeDefault(this.start,
this.startLoc);this.parseBindingListItem(a);m.push(a)}return m};tq.parseBindingListItem=function(c){return c};tq.parseMaybeDefault=function(c,h,f){f=f||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(bb.eq))return f;c=this.startNodeAt(c,h);c.left=f;c.right=this.parseMaybeAssign();return this.finishNode(c,"AssignmentPattern")};tq.checkLValSimple=function(c,h,f){void 0===h&&(h=0);var m=0!==h;switch(c.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,
(m?"Binding ":"Assigning to ")+c.name+" in strict mode");m&&(2===h&&"let"===c.name&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),f&&(nC.call(f,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),f[c.name]=!0),5!==h&&this.declareName(c.name,h,c.start));break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":m&&this.raiseRecoverable(c.start,"Binding member expression");break;
case "ParenthesizedExpression":return m&&this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,h,f);default:this.raise(c.start,(m?"Binding":"Assigning to")+" rvalue")}};tq.checkLValPattern=function(c,h,f){void 0===h&&(h=0);switch(c.type){case "ObjectPattern":var m=0;for(c=c.properties;m<c.length;m+=1)this.checkLValInnerPattern(c[m],h,f);break;case "ArrayPattern":m=0;for(c=c.elements;m<c.length;m+=1){var n=c[m];n&&this.checkLValInnerPattern(n,h,f)}break;
default:this.checkLValSimple(c,h,f)}};tq.checkLValInnerPattern=function(c,h,f){void 0===h&&(h=0);switch(c.type){case "Property":this.checkLValInnerPattern(c.value,h,f);break;case "AssignmentPattern":this.checkLValPattern(c.left,h,f);break;case "RestElement":this.checkLValPattern(c.argument,h,f);break;default:this.checkLValPattern(c,h,f)}};var xi=Xl.prototype;xi.checkPropClash=function(c,h,f){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===c.type||6<=this.options.ecmaVersion&&(c.computed||c.method||
c.shorthand))){var m=c.key;switch(m.type){case "Identifier":var n=m.name;break;case "Literal":n=String(m.value);break;default:return}c=c.kind;6<=this.options.ecmaVersion?"__proto__"===n&&"init"===c&&(h.proto&&(f?0>f.doubleProto&&(f.doubleProto=m.start):this.raiseRecoverable(m.start,"Redefinition of __proto__ property")),h.proto=!0):(n="$"+n,(f=h[n])?("init"===c?this.strict&&f.init||f.get||f.set:f.init||f[c])&&this.raiseRecoverable(m.start,"Redefinition of property"):f=h[n]={init:!1,get:!1,set:!1},
f[c]=!0)}};xi.parseExpression=function(c,h){var f=this.start,m=this.startLoc,n=this.parseMaybeAssign(c,h);if(this.type===bb.comma){f=this.startNodeAt(f,m);for(f.expressions=[n];this.eat(bb.comma);)f.expressions.push(this.parseMaybeAssign(c,h));return this.finishNode(f,"SequenceExpression")}return n};xi.parseMaybeAssign=function(c,h,f){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var m=!1,n=-1,a=-1;h?(n=h.parenthesizedAssign,a=h.trailingComma,h.parenthesizedAssign=
h.trailingComma=-1):(h=new QG,m=!0);var d=this.start,k=this.startLoc;if(this.type===bb.parenL||this.type===bb.name)this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===c;var b=this.parseMaybeConditional(c,h);f&&(b=f.call(this,b,d,k));if(this.type.isAssign)return f=this.startNodeAt(d,k),f.operator=this.value,this.type===bb.eq&&(b=this.toAssignable(b,!1,h)),m||(h.parenthesizedAssign=h.trailingComma=h.doubleProto=-1),h.shorthandAssign>=b.start&&(h.shorthandAssign=-1),this.type===
bb.eq?this.checkLValPattern(b):this.checkLValSimple(b),f.left=b,this.next(),f.right=this.parseMaybeAssign(c),this.finishNode(f,"AssignmentExpression");m&&this.checkExpressionErrors(h,!0);-1<n&&(h.parenthesizedAssign=n);-1<a&&(h.trailingComma=a);return b};xi.parseMaybeConditional=function(c,h){var f=this.start,m=this.startLoc,n=this.parseExprOps(c,h);return this.checkExpressionErrors(h)?n:this.eat(bb.question)?(h=this.startNodeAt(f,m),h.test=n,h.consequent=this.parseMaybeAssign(),this.expect(bb.colon),
h.alternate=this.parseMaybeAssign(c),this.finishNode(h,"ConditionalExpression")):n};xi.parseExprOps=function(c,h){var f=this.start,m=this.startLoc,n=this.parseMaybeUnary(h,!1);return this.checkExpressionErrors(h)?n:n.start===f&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,f,m,-1,c)};xi.parseExprOp=function(c,h,f,m,n){var a=this.type.binop;if(null!=a&&(!n||this.type!==bb._in)&&a>m){var d=this.type===bb.logicalOR||this.type===bb.logicalAND,k=this.type===bb.coalesce;k&&(a=bb.logicalAND.binop);
var b=this.value;this.next();var e=this.start,l=this.startLoc;a=this.parseExprOp(this.parseMaybeUnary(null,!1),e,l,a,n);c=this.buildBinary(h,f,c,a,b,d||k);(d&&this.type===bb.coalesce||k&&(this.type===bb.logicalOR||this.type===bb.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(c,h,f,m,n)}return c};xi.buildBinary=function(c,h,f,m,n,a){c=this.startNodeAt(c,h);c.left=f;c.operator=n;c.right=
m;return this.finishNode(c,a?"LogicalExpression":"BinaryExpression")};xi.parseMaybeUnary=function(c,h,f){var m=this.start,n=this.startLoc;if(this.isContextual("await")&&this.canAwait){var a=this.parseAwait();h=!0}else if(this.type.prefix){a=this.startNode();var d=this.type===bb.incDec;a.operator=this.value;a.prefix=!0;this.next();a.argument=this.parseMaybeUnary(null,!0,d);this.checkExpressionErrors(c,!0);d?this.checkLValSimple(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?
this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):"delete"===a.operator&&l_(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):h=!0;a=this.finishNode(a,d?"UpdateExpression":"UnaryExpression")}else{a=this.parseExprSubscripts(c);if(this.checkExpressionErrors(c))return a;for(;this.type.postfix&&!this.canInsertSemicolon();)c=this.startNodeAt(m,n),c.operator=this.value,c.prefix=!1,c.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(c,"UpdateExpression")}if(!f&&
this.eat(bb.starstar))if(h)this.unexpected(this.lastTokStart);else return this.buildBinary(m,n,a,this.parseMaybeUnary(null,!1),"**",!1);else return a};xi.parseExprSubscripts=function(c){var h=this.start,f=this.startLoc,m=this.parseExprAtom(c);if("ArrowFunctionExpression"===m.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return m;h=this.parseSubscripts(m,h,f);c&&"MemberExpression"===h.type&&(c.parenthesizedAssign>=h.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=h.start&&
(c.parenthesizedBind=-1),c.trailingComma>=h.start&&(c.trailingComma=-1));return h};xi.parseSubscripts=function(c,h,f,m){for(var n=8<=this.options.ecmaVersion&&"Identifier"===c.type&&"async"===c.name&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&5===c.end-c.start&&this.potentialArrowAt===c.start,a=!1;;){var d=this.parseSubscript(c,h,f,m,n,a);d.optional&&(a=!0);if(d===c||"ArrowFunctionExpression"===d.type)return a&&(c=this.startNodeAt(h,f),c.expression=d,d=this.finishNode(c,"ChainExpression")),
d;c=d}};xi.parseSubscript=function(c,h,f,m,n,a){var d=11<=this.options.ecmaVersion,k=d&&this.eat(bb.questionDot);m&&k&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var b=this.eat(bb.bracketL);if(b||k&&this.type!==bb.parenL&&this.type!==bb.backQuote||this.eat(bb.dot))h=this.startNodeAt(h,f),h.object=c,b?(h.property=this.parseExpression(),this.expect(bb.bracketR)):h.property=this.type===bb.privateId&&"Super"!==c.type?this.parsePrivateIdent():this.parseIdent("never"!==
this.options.allowReserved),h.computed=!!b,d&&(h.optional=k),c=this.finishNode(h,"MemberExpression");else if(!m&&this.eat(bb.parenL)){m=new QG;a=this.yieldPos;var e=this.awaitPos,l=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;b=this.parseExprList(bb.parenR,8<=this.options.ecmaVersion,!1,m);if(n&&!k&&!this.canInsertSemicolon()&&this.eat(bb.arrow))return this.checkPatternErrors(m,!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),
this.yieldPos=a,this.awaitPos=e,this.awaitIdentPos=l,this.parseArrowExpression(this.startNodeAt(h,f),b,!0);this.checkExpressionErrors(m,!0);this.yieldPos=a||this.yieldPos;this.awaitPos=e||this.awaitPos;this.awaitIdentPos=l||this.awaitIdentPos;h=this.startNodeAt(h,f);h.callee=c;h.arguments=b;d&&(h.optional=k);c=this.finishNode(h,"CallExpression")}else this.type===bb.backQuote&&((k||a)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),d=this.startNodeAt(h,
f),d.tag=c,d.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(d,"TaggedTemplateExpression"));return c};xi.parseExprAtom=function(c){this.type===bb.slash&&this.readRegexp();var h=this.potentialArrowAt===this.start;switch(this.type){case bb._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),h=this.startNode(),this.next(),this.type!==bb.parenL||this.allowDirectSuper||this.raise(h.start,"super() call outside constructor of a subclass"),this.type!==bb.dot&&
this.type!==bb.bracketL&&this.type!==bb.parenL&&this.unexpected(),this.finishNode(h,"Super");case bb._this:return h=this.startNode(),this.next(),this.finishNode(h,"ThisExpression");case bb.name:c=this.start;var f=this.startLoc,m=this.containsEsc,n=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!m&&"async"===n.name&&!this.canInsertSemicolon()&&this.eat(bb._function))return this.parseFunction(this.startNodeAt(c,f),0,!1,!0);if(h&&!this.canInsertSemicolon()){if(this.eat(bb.arrow))return this.parseArrowExpression(this.startNodeAt(c,
f),[n],!1);if(8<=this.options.ecmaVersion&&"async"===n.name&&this.type===bb.name&&!m&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return n=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(bb.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(c,f),[n],!0)}return n;case bb.regexp:return c=this.value,h=this.parseLiteral(c.value),h.regex={pattern:c.pattern,flags:c.flags},h;case bb.num:case bb.string:return this.parseLiteral(this.value);case bb._null:case bb._true:case bb._false:return h=
this.startNode(),h.value=this.type===bb._null?null:this.type===bb._true,h.raw=this.type.keyword,this.next(),this.finishNode(h,"Literal");case bb.parenL:return f=this.start,h=this.parseParenAndDistinguishExpression(h),c&&(0>c.parenthesizedAssign&&!this.isSimpleAssignTarget(h)&&(c.parenthesizedAssign=f),0>c.parenthesizedBind&&(c.parenthesizedBind=f)),h;case bb.bracketL:return h=this.startNode(),this.next(),h.elements=this.parseExprList(bb.bracketR,!0,!0,c),this.finishNode(h,"ArrayExpression");case bb.braceL:return this.parseObj(!1,
c);case bb._function:return h=this.startNode(),this.next(),this.parseFunction(h,0);case bb._class:return this.parseClass(this.startNode(),!1);case bb._new:return this.parseNew();case bb.backQuote:return this.parseTemplate();case bb._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};xi.parseExprImport=function(){var c=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var h=this.parseIdent(!0);
switch(this.type){case bb.parenL:return this.parseDynamicImport(c);case bb.dot:return c.meta=h,this.parseImportMeta(c);default:this.unexpected()}};xi.parseDynamicImport=function(c){this.next();c.source=this.parseMaybeAssign();if(!this.eat(bb.parenR)){var h=this.start;this.eat(bb.comma)&&this.eat(bb.parenR)?this.raiseRecoverable(h,"Trailing comma is not allowed in import()"):this.unexpected(h)}return this.finishNode(c,"ImportExpression")};xi.parseImportMeta=function(c){this.next();var h=this.containsEsc;
c.property=this.parseIdent(!0);"meta"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'");h&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters");"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module");return this.finishNode(c,"MetaProperty")};xi.parseLiteral=function(c){var h=this.startNode();h.value=c;h.raw=
this.input.slice(this.start,this.end);110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(h,"Literal")};xi.parseParenExpression=function(){this.expect(bb.parenL);var c=this.parseExpression();this.expect(bb.parenR);return c};xi.parseParenAndDistinguishExpression=function(c){var h=this.start,f=this.startLoc,m=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var n=this.start,a=this.startLoc,d=[],k=!0,b=!1,e=new QG,
l=this.yieldPos,p=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==bb.parenR;)if(k?k=!1:this.expect(bb.comma),m&&this.afterTrailingComma(bb.parenR,!0)){b=!0;break}else if(this.type===bb.ellipsis){var u=this.start;d.push(this.parseParenItem(this.parseRestBinding()));this.type===bb.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else d.push(this.parseMaybeAssign(!1,e,this.parseParenItem));m=this.start;k=this.startLoc;this.expect(bb.parenR);if(c&&!this.canInsertSemicolon()&&
this.eat(bb.arrow))return this.checkPatternErrors(e,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=p,this.parseParenArrowList(h,f,d);d.length&&!b||this.unexpected(this.lastTokStart);u&&this.unexpected(u);this.checkExpressionErrors(e,!0);this.yieldPos=l||this.yieldPos;this.awaitPos=p||this.awaitPos;1<d.length?(c=this.startNodeAt(n,a),c.expressions=d,this.finishNodeAt(c,"SequenceExpression",m,k)):c=d[0]}else c=this.parseParenExpression();return this.options.preserveParens?(h=
this.startNodeAt(h,f),h.expression=c,this.finishNode(h,"ParenthesizedExpression")):c};xi.parseParenItem=function(c){return c};xi.parseParenArrowList=function(c,h,f){return this.parseArrowExpression(this.startNodeAt(c,h),f)};var Lna=[];xi.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode(),h=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(bb.dot))return c.meta=h,h=this.containsEsc,c.property=this.parseIdent(!0),
"target"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),h&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(c.start,"'new.target' can only be used in functions"),this.finishNode(c,"MetaProperty");h=this.start;var f=this.startLoc,m=this.type===bb._import;c.callee=this.parseSubscripts(this.parseExprAtom(),h,f,!0);m&&"ImportExpression"===c.callee.type&&this.raise(h,
"Cannot use new with import()");this.eat(bb.parenL)?c.arguments=this.parseExprList(bb.parenR,8<=this.options.ecmaVersion,!1):c.arguments=Lna;return this.finishNode(c,"NewExpression")};xi.parseTemplateElement=function(c){c=c.isTagged;var h=this.startNode();this.type===bb.invalidTemplate?(c||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),h.value={raw:this.value,cooked:null}):h.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value};
this.next();h.tail=this.type===bb.backQuote;return this.finishNode(h,"TemplateElement")};xi.parseTemplate=function(c){void 0===c&&(c={});c=c.isTagged;void 0===c&&(c=!1);var h=this.startNode();this.next();h.expressions=[];var f=this.parseTemplateElement({isTagged:c});for(h.quasis=[f];!f.tail;)this.type===bb.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(bb.dollarBraceL),h.expressions.push(this.parseExpression()),this.expect(bb.braceR),h.quasis.push(f=this.parseTemplateElement({isTagged:c}));
this.next();return this.finishNode(h,"TemplateLiteral")};xi.isAsyncProp=function(c){return!c.computed&&"Identifier"===c.key.type&&"async"===c.key.name&&(this.type===bb.name||this.type===bb.num||this.type===bb.string||this.type===bb.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===bb.star)&&!Ko.test(this.input.slice(this.lastTokEnd,this.start))};xi.parseObj=function(c,h){var f=this.startNode(),m=!0,n={};f.properties=[];for(this.next();!this.eat(bb.braceR);){if(m)m=!1;else if(this.expect(bb.comma),
5<=this.options.ecmaVersion&&this.afterTrailingComma(bb.braceR))break;var a=this.parseProperty(c,h);c||this.checkPropClash(a,n,h);f.properties.push(a)}return this.finishNode(f,c?"ObjectPattern":"ObjectExpression")};xi.parseProperty=function(c,h){var f=this.startNode(),m;if(9<=this.options.ecmaVersion&&this.eat(bb.ellipsis)){if(c)return f.argument=this.parseIdent(!1),this.type===bb.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(f,"RestElement");this.type===
bb.parenL&&h&&(0>h.parenthesizedAssign&&(h.parenthesizedAssign=this.start),0>h.parenthesizedBind&&(h.parenthesizedBind=this.start));f.argument=this.parseMaybeAssign(!1,h);this.type===bb.comma&&h&&0>h.trailingComma&&(h.trailingComma=this.start);return this.finishNode(f,"SpreadElement")}if(6<=this.options.ecmaVersion){f.method=!1;f.shorthand=!1;if(c||h){var n=this.start;var a=this.startLoc}c||(m=this.eat(bb.star))}var d=this.containsEsc;this.parsePropertyName(f);if(!c&&!d&&8<=this.options.ecmaVersion&&
!m&&this.isAsyncProp(f)){var k=!0;m=9<=this.options.ecmaVersion&&this.eat(bb.star);this.parsePropertyName(f,h)}else k=!1;this.parsePropertyValue(f,c,m,k,n,a,h,d);return this.finishNode(f,"Property")};xi.parsePropertyValue=function(c,h,f,m,n,a,d,k){(f||m)&&this.type===bb.colon&&this.unexpected();this.eat(bb.colon)?(c.value=h?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,d),c.kind="init"):6<=this.options.ecmaVersion&&this.type===bb.parenL?(h&&this.unexpected(),c.kind="init",
c.method=!0,c.value=this.parseMethod(f,m)):h||k||!(5<=this.options.ecmaVersion)||c.computed||"Identifier"!==c.key.type||"get"!==c.key.name&&"set"!==c.key.name||this.type===bb.comma||this.type===bb.braceR||this.type===bb.eq?6<=this.options.ecmaVersion&&!c.computed&&"Identifier"===c.key.type?((f||m)&&this.unexpected(),this.checkUnreserved(c.key),"await"!==c.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),c.kind="init",h?c.value=this.parseMaybeDefault(n,a,this.copyNode(c.key)):this.type===bb.eq&&
d?(0>d.shorthandAssign&&(d.shorthandAssign=this.start),c.value=this.parseMaybeDefault(n,a,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.shorthand=!0):this.unexpected():((f||m)&&this.unexpected(),c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1),c.value.params.length!==("get"===c.kind?0:1)?(h=c.value.start,"get"===c.kind?this.raiseRecoverable(h,"getter should have no params"):this.raiseRecoverable(h,"setter should have exactly one param")):"set"===c.kind&&"RestElement"===
c.value.params[0].type&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params"))};xi.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(bb.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(bb.bracketR),c.key;c.computed=!1}return c.key=this.type===bb.num||this.type===bb.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};xi.initFunction=function(c){c.id=null;6<=this.options.ecmaVersion&&(c.generator=
c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};xi.parseMethod=function(c,h,f){var m=this.startNode(),n=this.yieldPos,a=this.awaitPos,d=this.awaitIdentPos;this.initFunction(m);6<=this.options.ecmaVersion&&(m.generator=c);8<=this.options.ecmaVersion&&(m.async=!!h);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(h?4:0)|(m.generator?8:0)|64|(f?128:0));this.expect(bb.parenL);m.params=this.parseBindingList(bb.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(m,!1,!0);this.yieldPos=n;this.awaitPos=a;this.awaitIdentPos=d;return this.finishNode(m,"FunctionExpression")};xi.parseArrowExpression=function(c,h,f){var m=this.yieldPos,n=this.awaitPos,a=this.awaitIdentPos;this.enterScope((f?4:0)|18);this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!f);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;c.params=this.toAssignableList(h,!0);this.parseFunctionBody(c,!0,!1);this.yieldPos=m;this.awaitPos=n;this.awaitIdentPos=a;return this.finishNode(c,
"ArrowFunctionExpression")};xi.parseFunctionBody=function(c,h,f){var m=this.strict,n=!1;if(h&&this.type!==bb.braceL)c.body=this.parseMaybeAssign(),c.expression=!0,this.checkParams(c,!1);else{var a=7<=this.options.ecmaVersion&&!this.isSimpleParamList(c.params);(!m||a)&&(n=this.strictDirective(this.end))&&a&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list");a=this.labels;this.labels=[];n&&(this.strict=!0);this.checkParams(c,!m&&!n&&!h&&!f&&this.isSimpleParamList(c.params));
this.strict&&c.id&&this.checkLValSimple(c.id,5);c.body=this.parseBlock(!1,void 0,n&&!m);c.expression=!1;this.adaptDirectivePrologue(c.body.body);this.labels=a}this.exitScope()};xi.isSimpleParamList=function(c){for(var h=0;h<c.length;h+=1)if("Identifier"!==c[h].type)return!1;return!0};xi.checkParams=function(c,h){var f=Object.create(null),m=0;for(c=c.params;m<c.length;m+=1)this.checkLValInnerPattern(c[m],1,h?null:f)};xi.parseExprList=function(c,h,f,m){for(var n=[],a=!0;!this.eat(c);){if(a)a=!1;else if(this.expect(bb.comma),
h&&this.afterTrailingComma(c))break;if(f&&this.type===bb.comma)var d=null;else this.type===bb.ellipsis?(d=this.parseSpread(m),m&&this.type===bb.comma&&0>m.trailingComma&&(m.trailingComma=this.start)):d=this.parseMaybeAssign(!1,m);n.push(d)}return n};xi.checkUnreserved=function(c){var h=c.start,f=c.end;c=c.name;this.inGenerator&&"yield"===c&&this.raiseRecoverable(h,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===c&&this.raiseRecoverable(h,"Cannot use 'await' as identifier inside an async function");
this.currentThisScope().inClassFieldInit&&"arguments"===c&&this.raiseRecoverable(h,"Cannot use 'arguments' in class field initializer");this.keywords.test(c)&&this.raise(h,"Unexpected keyword '"+c+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(h,f).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(c)||(this.inAsync||"await"!==c||this.raiseRecoverable(h,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(h,"The keyword '"+c+"' is reserved"))};
xi.parseIdent=function(c,h){h=this.startNode();this.type===bb.name?h.name=this.value:this.type.keyword?(h.name=this.type.keyword,"class"!==h.name&&"function"!==h.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!c);this.finishNode(h,"Identifier");c||(this.checkUnreserved(h),"await"!==h.name||this.awaitIdentPos||(this.awaitIdentPos=h.start));return h};xi.parsePrivateIdent=function(){var c=this.startNode();this.type===
bb.privateId?c.name=this.value:this.unexpected();this.next();this.finishNode(c,"PrivateIdentifier");0===this.privateNameStack.length?this.raise(c.start,"Private field '#"+c.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(c);return c};xi.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var h=this.startNode();this.next();this.type===bb.semi||this.canInsertSemicolon()||this.type!==bb.star&&!this.type.startsExpr?(h.delegate=
!1,h.argument=null):(h.delegate=this.eat(bb.star),h.argument=this.parseMaybeAssign(c));return this.finishNode(h,"YieldExpression")};xi.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var c=this.startNode();this.next();c.argument=this.parseMaybeUnary(null,!0);return this.finishNode(c,"AwaitExpression")};var UL=Xl.prototype;UL.raise=function(c,h){var f=lC(this.input,c);h+=" ("+f.line+":"+f.column+")";h=new SyntaxError(h);h.pos=c;h.loc=f;h.raisedAt=this.pos;throw h;};UL.raiseRecoverable=
UL.raise;UL.curPosition=function(){if(this.options.locations)return new mC(this.curLine,this.pos-this.lineStart)};var xu=Xl.prototype,Mna=function(c){this.flags=c;this.var=[];this.lexical=[];this.functions=[];this.inClassFieldInit=!1};xu.enterScope=function(c){this.scopeStack.push(new Mna(c))};xu.exitScope=function(){this.scopeStack.pop()};xu.treatFunctionsAsVarInScope=function(c){return c.flags&2||!this.inModule&&c.flags&1};xu.declareName=function(c,h,f){var m=!1;if(2===h)h=this.currentScope(),m=
-1<h.lexical.indexOf(c)||-1<h.functions.indexOf(c)||-1<h.var.indexOf(c),h.lexical.push(c),this.inModule&&h.flags&1&&delete this.undefinedExports[c];else if(4===h)this.currentScope().lexical.push(c);else if(3===h)h=this.currentScope(),m=this.treatFunctionsAsVar?-1<h.lexical.indexOf(c):-1<h.lexical.indexOf(c)||-1<h.var.indexOf(c),h.functions.push(c);else for(h=this.scopeStack.length-1;0<=h;--h){var n=this.scopeStack[h];if(-1<n.lexical.indexOf(c)&&!(n.flags&32&&n.lexical[0]===c)||!this.treatFunctionsAsVarInScope(n)&&
-1<n.functions.indexOf(c)){m=!0;break}n.var.push(c);this.inModule&&n.flags&1&&delete this.undefinedExports[c];if(n.flags&3)break}m&&this.raiseRecoverable(f,"Identifier '"+c+"' has already been declared")};xu.checkLocalExport=function(c){-1===this.scopeStack[0].lexical.indexOf(c.name)&&-1===this.scopeStack[0].var.indexOf(c.name)&&(this.undefinedExports[c.name]=c)};xu.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};xu.currentVarScope=function(){for(var c=this.scopeStack.length-
1;;c--){var h=this.scopeStack[c];if(h.flags&3)return h}};xu.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];if(h.flags&3&&!(h.flags&16))return h}};var nx=function(c,h,f){this.type="";this.start=h;this.end=0;c.options.locations&&(this.loc=new nz(c,f));c.options.directSourceFile&&(this.sourceFile=c.options.directSourceFile);c.options.ranges&&(this.range=[h,0])},tE=Xl.prototype;tE.startNode=function(){return new nx(this,this.start,this.startLoc)};tE.startNodeAt=
function(c,h){return new nx(this,c,h)};tE.finishNode=function(c,h){return m_.call(this,c,h,this.lastTokEnd,this.lastTokEndLoc)};tE.finishNodeAt=function(c,h,f,m){return m_.call(this,c,h,f,m)};tE.copyNode=function(c){var h=new nx(this,c.start,this.startLoc),f;for(f in c)h[f]=c[f];return h};var uq=function(c,h,f,m,n){this.token=c;this.isExpr=!!h;this.preserveSpace=!!f;this.override=m;this.generator=!!n},cl={b_stat:new uq("{",!1),b_expr:new uq("{",!0),b_tmpl:new uq("${",!1),p_stat:new uq("(",!1),p_expr:new uq("(",
!0),q_tmpl:new uq("`",!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new uq("function",!1),f_expr:new uq("function",!0),f_expr_gen:new uq("function",!0,!1,null,!0),f_gen:new uq("function",!1,!1,null,!0)},VL=Xl.prototype;VL.initialContext=function(){return[cl.b_stat]};VL.braceIsBlock=function(c){var h=this.curContext();return h===cl.f_expr||h===cl.f_stat?!0:c!==bb.colon||h!==cl.b_stat&&h!==cl.b_expr?c===bb._return||c===bb.name&&this.exprAllowed?Ko.test(this.input.slice(this.lastTokEnd,
this.start)):c===bb._else||c===bb.semi||c===bb.eof||c===bb.parenR||c===bb.arrow?!0:c===bb.braceL?h===cl.b_stat:c===bb._var||c===bb._const||c===bb.name?!1:!this.exprAllowed:!h.isExpr};VL.inGeneratorContext=function(){for(var c=this.context.length-1;1<=c;c--){var h=this.context[c];if("function"===h.token)return h.generator}return!1};VL.updateContext=function(c){var h,f=this.type;f.keyword&&c===bb.dot?this.exprAllowed=!1:(h=f.updateContext)?h.call(this,c):this.exprAllowed=f.beforeExpr};bb.parenR.updateContext=
bb.braceR.updateContext=function(){if(1===this.context.length)this.exprAllowed=!0;else{var c=this.context.pop();c===cl.b_stat&&"function"===this.curContext().token&&(c=this.context.pop());this.exprAllowed=!c.isExpr}};bb.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?cl.b_stat:cl.b_expr);this.exprAllowed=!0};bb.dollarBraceL.updateContext=function(){this.context.push(cl.b_tmpl);this.exprAllowed=!0};bb.parenL.updateContext=function(c){this.context.push(c===bb._if||c===bb._for||
c===bb._with||c===bb._while?cl.p_stat:cl.p_expr);this.exprAllowed=!0};bb.incDec.updateContext=function(){};bb._function.updateContext=bb._class.updateContext=function(c){!c.beforeExpr||c===bb._else||c===bb.semi&&this.curContext()!==cl.p_stat||c===bb._return&&Ko.test(this.input.slice(this.lastTokEnd,this.start))||(c===bb.colon||c===bb.braceL)&&this.curContext()===cl.b_stat?this.context.push(cl.f_stat):this.context.push(cl.f_expr);this.exprAllowed=!1};bb.backQuote.updateContext=function(){this.curContext()===
cl.q_tmpl?this.context.pop():this.context.push(cl.q_tmpl);this.exprAllowed=!1};bb.star.updateContext=function(c){c===bb._function&&(c=this.context.length-1,this.context[c]=this.context[c]===cl.f_expr?cl.f_expr_gen:cl.f_gen);this.exprAllowed=!0};bb.name.updateContext=function(c){var h=!1;6<=this.options.ecmaVersion&&c!==bb.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(h=!0);this.exprAllowed=h};var Rfa={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
Sfa={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
n_={};SG(9);SG(10);SG(11);SG(12);var Ug=Xl.prototype,Xs=function(c){this.parser=c;this.validFlags="gim"+(6<=c.options.ecmaVersion?"uy":"")+(9<=c.options.ecmaVersion?"s":"")+(13<=c.options.ecmaVersion?"d":"");this.unicodeProperties=n_[12<=c.options.ecmaVersion?12:c.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=
[];this.backReferenceNames=[]};Xs.prototype.reset=function(c,h,f){var m=-1!==f.indexOf("u");this.start=c|0;this.source=h+"";this.flags=f;this.switchU=m&&6<=this.parser.options.ecmaVersion;this.switchN=m&&9<=this.parser.options.ecmaVersion};Xs.prototype.raise=function(c){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+c)};Xs.prototype.at=function(c,h){void 0===h&&(h=!1);var f=this.source,m=f.length;if(c>=m)return-1;var n=f.charCodeAt(c);if(!h&&!this.switchU||
55295>=n||57344<=n||c+1>=m)return n;c=f.charCodeAt(c+1);return 56320<=c&&57343>=c?(n<<10)+c-56613888:n};Xs.prototype.nextIndex=function(c,h){void 0===h&&(h=!1);var f=this.source,m=f.length;if(c>=m)return m;var n=f.charCodeAt(c),a;return!h&&!this.switchU||55295>=n||57344<=n||c+1>=m||56320>(a=f.charCodeAt(c+1))||57343<a?c+1:c+2};Xs.prototype.current=function(c){void 0===c&&(c=!1);return this.at(this.pos,c)};Xs.prototype.lookahead=function(c){void 0===c&&(c=!1);return this.at(this.nextIndex(this.pos,
c),c)};Xs.prototype.advance=function(c){void 0===c&&(c=!1);this.pos=this.nextIndex(this.pos,c)};Xs.prototype.eat=function(c,h){void 0===h&&(h=!1);return this.current(h)===c?(this.advance(h),!0):!1};Ug.validateRegExpFlags=function(c){for(var h=c.validFlags,f=c.flags,m=0;m<f.length;m++){var n=f.charAt(m);-1===h.indexOf(n)&&this.raise(c.start,"Invalid regular expression flag");-1<f.indexOf(n,m+1)&&this.raise(c.start,"Duplicate regular expression flag")}};Ug.validateRegExpPattern=function(c){this.regexp_pattern(c);
!c.switchN&&9<=this.options.ecmaVersion&&0<c.groupNames.length&&(c.switchN=!0,this.regexp_pattern(c))};Ug.regexp_pattern=function(c){c.pos=0;c.lastIntValue=0;c.lastStringValue="";c.lastAssertionIsQuantifiable=!1;c.numCapturingParens=0;c.maxBackReference=0;c.groupNames.length=0;c.backReferenceNames.length=0;this.regexp_disjunction(c);c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets"));c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");
for(var h=0,f=c.backReferenceNames;h<f.length;h+=1)-1===c.groupNames.indexOf(f[h])&&c.raise("Invalid named capture referenced")};Ug.regexp_disjunction=function(c){for(this.regexp_alternative(c);c.eat(124);)this.regexp_alternative(c);this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat");c.eat(123)&&c.raise("Lone quantifier brackets")};Ug.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););};Ug.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&
this.regexp_eatQuantifier(c)&&c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1};Ug.regexp_eatAssertion=function(c){var h=c.pos;c.lastAssertionIsQuantifiable=!1;if(c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=h}if(c.eat(40)&&c.eat(63)){var f=!1;9<=this.options.ecmaVersion&&(f=c.eat(60));if(c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),
c.lastAssertionIsQuantifiable=!f,!0}c.pos=h;return!1};Ug.regexp_eatQuantifier=function(c,h){void 0===h&&(h=!1);return this.regexp_eatQuantifierPrefix(c,h)?(c.eat(63),!0):!1};Ug.regexp_eatQuantifierPrefix=function(c,h){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,h)};Ug.regexp_eatBracedQuantifier=function(c,h){var f=c.pos;if(c.eat(123)){var m=-1;if(this.regexp_eatDecimalDigits(c)){var n=c.lastIntValue;c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(m=c.lastIntValue);if(c.eat(125))return-1!==
m&&m<n&&!h&&c.raise("numbers out of order in {} quantifier"),!0}c.switchU&&!h&&c.raise("Incomplete quantifier");c.pos=f}return!1};Ug.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)};Ug.regexp_eatReverseSolidusAtomEscape=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=h}return!1};Ug.regexp_eatUncapturingGroup=
function(c){var h=c.pos;if(c.eat(40)){if(c.eat(63)&&c.eat(58)){this.regexp_disjunction(c);if(c.eat(41))return!0;c.raise("Unterminated group")}c.pos=h}return!1};Ug.regexp_eatCapturingGroup=function(c){if(c.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(c):63===c.current()&&c.raise("Invalid group");this.regexp_disjunction(c);if(c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1};Ug.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||
this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)};Ug.regexp_eatInvalidBracedQuantifier=function(c){this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat");return!1};Ug.regexp_eatSyntaxCharacter=function(c){var h=c.current();return o_(h)?(c.lastIntValue=h,c.advance(),!0):!1};Ug.regexp_eatPatternCharacters=function(c){for(var h=c.pos,f=0;-1!==(f=c.current())&&
!o_(f);)c.advance();return c.pos!==h};Ug.regexp_eatExtendedPatternCharacter=function(c){var h=c.current();return-1===h||36===h||40<=h&&43>=h||46===h||63===h||91===h||94===h||124===h?!1:(c.advance(),!0)};Ug.regexp_groupSpecifier=function(c){c.eat(63)&&(this.regexp_eatGroupName(c)?(-1!==c.groupNames.indexOf(c.lastStringValue)&&c.raise("Duplicate capture group name"),c.groupNames.push(c.lastStringValue)):c.raise("Invalid group"))};Ug.regexp_eatGroupName=function(c){c.lastStringValue="";if(c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&
c.eat(62))return!0;c.raise("Invalid capture group name")}return!1};Ug.regexp_eatRegExpIdentifierName=function(c){c.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=TG(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=TG(c.lastIntValue);return!0}return!1};Ug.regexp_eatRegExpIdentifierStart=function(c){var h=c.pos,f=11<=this.options.ecmaVersion,m=c.current(f);c.advance(f);92===m&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(m=c.lastIntValue);
f=m;if(qs(f,!0)||36===f||95===f)return c.lastIntValue=m,!0;c.pos=h;return!1};Ug.regexp_eatRegExpIdentifierPart=function(c){var h=c.pos,f=11<=this.options.ecmaVersion,m=c.current(f);c.advance(f);92===m&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(m=c.lastIntValue);f=m;if(mz(f,!0)||36===f||95===f||8204===f||8205===f)return c.lastIntValue=m,!0;c.pos=h;return!1};Ug.regexp_eatAtomEscape=function(c){if(this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||
c.switchN&&this.regexp_eatKGroupName(c))return!0;c.switchU&&(99===c.current()&&c.raise("Invalid unicode escape"),c.raise("Invalid escape"));return!1};Ug.regexp_eatBackReference=function(c){var h=c.pos;if(this.regexp_eatDecimalEscape(c)){var f=c.lastIntValue;if(c.switchU)return f>c.maxBackReference&&(c.maxBackReference=f),!0;if(f<=c.numCapturingParens)return!0;c.pos=h}return!1};Ug.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),
!0;c.raise("Invalid named reference")}return!1};Ug.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)};Ug.regexp_eatCControlLetter=function(c){var h=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=h}return!1};Ug.regexp_eatZero=
function(c){return 48!==c.current()||UG(c.lookahead())?!1:(c.lastIntValue=0,c.advance(),!0)};Ug.regexp_eatControlEscape=function(c){var h=c.current();return 116===h?(c.lastIntValue=9,c.advance(),!0):110===h?(c.lastIntValue=10,c.advance(),!0):118===h?(c.lastIntValue=11,c.advance(),!0):102===h?(c.lastIntValue=12,c.advance(),!0):114===h?(c.lastIntValue=13,c.advance(),!0):!1};Ug.regexp_eatControlLetter=function(c){var h=c.current();return 65<=h&&90>=h||97<=h&&122>=h?(c.lastIntValue=h%32,c.advance(),!0):
!1};Ug.regexp_eatRegExpUnicodeEscapeSequence=function(c,h){void 0===h&&(h=!1);var f=c.pos;h=h||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){f=c.lastIntValue;if(h&&55296<=f&&56319>=f){h=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var m=c.lastIntValue;if(56320<=m&&57343>=m)return c.lastIntValue=1024*(f-55296)+(m-56320)+65536,!0}c.pos=h;c.lastIntValue=f}return!0}if(m=h&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125))m=c.lastIntValue,m=0<=m&&1114111>=m;
if(m)return!0;h&&c.raise("Invalid unicode escape");c.pos=f}return!1};Ug.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var h=c.current();return 99===h||c.switchN&&107===h?!1:(c.lastIntValue=h,c.advance(),!0)};Ug.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var h=c.current();if(49<=h&&57>=h){do c.lastIntValue=10*c.lastIntValue+(h-48),c.advance();while(48<=(h=c.current())&&57>=h);return!0}return!1};Ug.regexp_eatCharacterClassEscape=
function(c){var h=c.current();if(100===h||68===h||115===h||83===h||119===h||87===h)return c.lastIntValue=-1,c.advance(),!0;if(c.switchU&&9<=this.options.ecmaVersion&&(80===h||112===h)){c.lastIntValue=-1;c.advance();if(c.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(c)&&c.eat(125))return!0;c.raise("Invalid property name")}return!1};Ug.regexp_eatUnicodePropertyValueExpression=function(c){var h=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var f=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c))return this.regexp_validateUnicodePropertyNameAndValue(c,
f,c.lastStringValue),!0}c.pos=h;return this.regexp_eatLoneUnicodePropertyNameOrValue(c)?(this.regexp_validateUnicodePropertyNameOrValue(c,c.lastStringValue),!0):!1};Ug.regexp_validateUnicodePropertyNameAndValue=function(c,h,f){nC.call(c.unicodeProperties.nonBinary,h)||c.raise("Invalid property name");c.unicodeProperties.nonBinary[h].test(f)||c.raise("Invalid property value")};Ug.regexp_validateUnicodePropertyNameOrValue=function(c,h){c.unicodeProperties.binary.test(h)||c.raise("Invalid property name")};
Ug.regexp_eatUnicodePropertyName=function(c){var h;for(c.lastStringValue="";p_(h=c.current());)c.lastStringValue+=TG(h),c.advance();return""!==c.lastStringValue};Ug.regexp_eatUnicodePropertyValue=function(c){var h;for(c.lastStringValue="";Tfa(h=c.current());)c.lastStringValue+=TG(h),c.advance();return""!==c.lastStringValue};Ug.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)};Ug.regexp_eatCharacterClass=function(c){if(c.eat(91)){c.eat(94);this.regexp_classRanges(c);
if(c.eat(93))return!0;c.raise("Unterminated character class")}return!1};Ug.regexp_classRanges=function(c){for(;this.regexp_eatClassAtom(c);){var h=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var f=c.lastIntValue;!c.switchU||-1!==h&&-1!==f||c.raise("Invalid character class");-1!==h&&-1!==f&&h>f&&c.raise("Range out of order in character class")}}};Ug.regexp_eatClassAtom=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var f=c.current();(99===
f||48<=f&&55>=f)&&c.raise("Invalid class escape");c.raise("Invalid escape")}c.pos=h}h=c.current();return 93!==h?(c.lastIntValue=h,c.advance(),!0):!1};Ug.regexp_eatClassEscape=function(c){var h=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=h}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)};Ug.regexp_eatClassControlLetter=function(c){var h=
c.current();return UG(h)||95===h?(c.lastIntValue=h%32,c.advance(),!0):!1};Ug.regexp_eatHexEscapeSequence=function(c){var h=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape");c.pos=h}return!1};Ug.regexp_eatDecimalDigits=function(c){var h=c.pos,f;for(c.lastIntValue=0;UG(f=c.current());)c.lastIntValue=10*c.lastIntValue+(f-48),c.advance();return c.pos!==h};Ug.regexp_eatHexDigits=function(c){var h=c.pos,f;for(c.lastIntValue=0;q_(f=c.current());)c.lastIntValue=
16*c.lastIntValue+r_(f),c.advance();return c.pos!==h};Ug.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var h=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var f=c.lastIntValue;3>=h&&this.regexp_eatOctalDigit(c)?c.lastIntValue=64*h+8*f+c.lastIntValue:c.lastIntValue=8*h+f}else c.lastIntValue=h;return!0}return!1};Ug.regexp_eatOctalDigit=function(c){var h=c.current();if(48<=h&&55>=h)return c.lastIntValue=h-48,c.advance(),!0;c.lastIntValue=0;return!1};Ug.regexp_eatFixedHexDigits=
function(c,h){for(var f=c.pos,m=c.lastIntValue=0;m<h;++m){var n=c.current();if(!q_(n))return c.pos=f,!1;c.lastIntValue=16*c.lastIntValue+r_(n);c.advance()}return!0};var WL=function(c){this.type=c.type;this.value=c.value;this.start=c.start;this.end=c.end;c.options.locations&&(this.loc=new nz(c,c.startLoc,c.endLoc));c.options.ranges&&(this.range=[c.start,c.end])},Ni=Xl.prototype;Ni.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new WL(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};Ni.getToken=function(){this.next();return new WL(this)};"undefined"!==typeof Symbol&&(Ni[Symbol.iterator]=function(){var c=this;return{next:function(){var h=c.getToken();return{done:h.type===bb.eof,value:h}}}});Ni.curContext=function(){return this.context[this.context.length-1]};Ni.nextToken=
function(){var c=this.curContext();c&&c.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(bb.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())};Ni.readToken=function(c){return qs(c,6<=this.options.ecmaVersion)||92===c?this.readWord():this.getTokenFromCode(c)};Ni.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(55295>=c||56320<=c)return c;
var h=this.input.charCodeAt(this.pos+1);return 56319>=h||57344<=h?c:(c<<10)+h-56613888};Ni.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),h=this.pos,f=this.input.indexOf("*/",this.pos+=2);-1===f&&this.raise(this.pos-2,"Unterminated comment");this.pos=f+2;if(this.options.locations){mw.lastIndex=h;for(var m;(m=mw.exec(this.input))&&m.index<this.pos;)++this.curLine,this.lineStart=m.index+m[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(h+
2,f),h,this.pos,c,this.curPosition())};Ni.skipLineComment=function(c){for(var h=this.pos,f=this.options.onComment&&this.curPosition(),m=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!Kt(m);)m=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(h+c,this.pos),h,this.pos,f,this.curPosition())};Ni.skipSpace=function(){a:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;
case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<c&&14>c||5760<=c&&P8.test(String.fromCharCode(c)))++this.pos;else break a}}};Ni.finishToken=function(c,h){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());
var f=this.type;this.type=c;this.value=h;this.updateContext(f)};Ni.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(48<=c&&57>=c)return this.readNumber(!0);var h=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===c&&46===h)return this.pos+=3,this.finishToken(bb.ellipsis);++this.pos;return this.finishToken(bb.dot)};Ni.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===c?this.finishOp(bb.assign,
2):this.finishOp(bb.slash,1)};Ni.readToken_mult_modulo_exp=function(c){var h=this.input.charCodeAt(this.pos+1),f=1,m=42===c?bb.star:bb.modulo;7<=this.options.ecmaVersion&&42===c&&42===h&&(++f,m=bb.starstar,h=this.input.charCodeAt(this.pos+2));return 61===h?this.finishOp(bb.assign,f+1):this.finishOp(m,f)};Ni.readToken_pipe_amp=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(bb.assign,3):this.finishOp(124===
c?bb.logicalOR:bb.logicalAND,2):61===h?this.finishOp(bb.assign,2):this.finishOp(124===c?bb.bitwiseOR:bb.bitwiseAND,1)};Ni.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(bb.assign,2):this.finishOp(bb.bitwiseXOR,1)};Ni.readToken_plus_min=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?45!==h||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Ko.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(bb.incDec,
2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===h?this.finishOp(bb.assign,2):this.finishOp(bb.plusMin,1)};Ni.readToken_lt_gt=function(c){var h=this.input.charCodeAt(this.pos+1),f=1;if(h===c)return f=62===c&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+f)?this.finishOp(bb.assign,f+1):this.finishOp(bb.bitShift,f);if(33===h&&60===c&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),
this.skipSpace(),this.nextToken();61===h&&(f=2);return this.finishOp(bb.relational,f)};Ni.readToken_eq_excl=function(c){var h=this.input.charCodeAt(this.pos+1);return 61===h?this.finishOp(bb.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===c&&62===h&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(bb.arrow)):this.finishOp(61===c?bb.eq:bb.prefix,1)};Ni.readToken_question=function(){var c=this.options.ecmaVersion;if(11<=c){var h=this.input.charCodeAt(this.pos+1);if(46===h){var f=
this.input.charCodeAt(this.pos+2);if(48>f||57<f)return this.finishOp(bb.questionDot,2)}if(63===h)return 12<=c&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(bb.assign,3):this.finishOp(bb.coalesce,2)}return this.finishOp(bb.question,1)};Ni.readToken_numberSign=function(){var c=35;if(13<=this.options.ecmaVersion&&(++this.pos,c=this.fullCharCodeAtPos(),qs(c,!0)||92===c))return this.finishToken(bb.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+VG(c)+"'")};Ni.getTokenFromCode=
function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(bb.parenL);case 41:return++this.pos,this.finishToken(bb.parenR);case 59:return++this.pos,this.finishToken(bb.semi);case 44:return++this.pos,this.finishToken(bb.comma);case 91:return++this.pos,this.finishToken(bb.bracketL);case 93:return++this.pos,this.finishToken(bb.bracketR);case 123:return++this.pos,this.finishToken(bb.braceL);case 125:return++this.pos,this.finishToken(bb.braceR);case 58:return++this.pos,
this.finishToken(bb.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(bb.backQuote);case 48:c=this.input.charCodeAt(this.pos+1);if(120===c||88===c)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===c||79===c)return this.readRadixNumber(8);if(98===c||66===c)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();
case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);case 63:return this.readToken_question();case 126:return this.finishOp(bb.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+VG(c)+"'")};Ni.finishOp=function(c,h){var f=
this.input.slice(this.pos,this.pos+h);this.pos+=h;return this.finishToken(c,f)};Ni.readRegexp=function(){for(var c,h,f=this.pos;;){this.pos>=this.input.length&&this.raise(f,"Unterminated regular expression");var m=this.input.charAt(this.pos);Ko.test(m)&&this.raise(f,"Unterminated regular expression");if(c)c=!1;else{if("["===m)h=!0;else if("]"===m&&h)h=!1;else if("/"===m&&!h)break;c="\\"===m}++this.pos}c=this.input.slice(f,this.pos);++this.pos;m=this.pos;h=this.readWord1();this.containsEsc&&this.unexpected(m);
m=this.regexpState||(this.regexpState=new Xs(this));m.reset(f,c,h);this.validateRegExpFlags(m);this.validateRegExpPattern(m);f=null;try{f=new RegExp(c,h)}catch(n){}return this.finishToken(bb.regexp,{pattern:c,flags:h,value:f})};Ni.readInt=function(c,h,f){var m=12<=this.options.ecmaVersion&&void 0===h;f=f&&48===this.input.charCodeAt(this.pos);for(var n=this.pos,a=0,d=0,k=0,b=null==h?Infinity:h;k<b;++k,++this.pos){var e=this.input.charCodeAt(this.pos);if(m&&95===e)f&&this.raiseRecoverable(this.pos,
"Numeric separator is not allowed in legacy octal numeric literals"),95===d&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===k&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),d=e;else{var l=97<=e?e-97+10:65<=e?e-65+10:48<=e&&57>=e?e-48:Infinity;if(l>=c)break;d=e;a=a*c+l}}m&&95===d&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===n||null!=h&&this.pos-n!==h?
null:a};Ni.readRadixNumber=function(c){var h=this.pos;this.pos+=2;var f=this.readInt(c);null==f&&this.raise(this.start+2,"Expected number in radix "+c);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(f=s_(this.input.slice(h,this.pos)),++this.pos):qs(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");return this.finishToken(bb.num,f)};Ni.readNumber=function(c){var h=this.pos;c||null!==this.readInt(10,void 0,!0)||this.raise(h,"Invalid number");var f=
2<=this.pos-h&&48===this.input.charCodeAt(h);f&&this.strict&&this.raise(h,"Invalid number");var m=this.input.charCodeAt(this.pos);if(!f&&!c&&11<=this.options.ecmaVersion&&110===m)return f=s_(this.input.slice(h,this.pos)),++this.pos,qs(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(bb.num,f);f&&/[89]/.test(this.input.slice(h,this.pos))&&(f=!1);46!==m||f||(++this.pos,this.readInt(10),m=this.input.charCodeAt(this.pos));69!==m&&101!==m||f||(m=this.input.charCodeAt(++this.pos),
43!==m&&45!==m||++this.pos,null===this.readInt(10)&&this.raise(h,"Invalid number"));qs(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");c=this.input.slice(h,this.pos);f=f?parseInt(c,8):parseFloat(c.replace(/_/g,""));return this.finishToken(bb.num,f)};Ni.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>this.options.ecmaVersion&&this.unexpected();var c=++this.pos;var h=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<
h&&this.invalidStringToken(c,"Code point out of bounds")}else h=this.readHexChar(4);return h};Ni.readString=function(c){for(var h="",f=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var m=this.input.charCodeAt(this.pos);if(m===c)break;92===m?(h+=this.input.slice(f,this.pos),h+=this.readEscapedChar(!1),f=this.pos):(Kt(m,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}h+=this.input.slice(f,this.pos++);
return this.finishToken(bb.string,h)};var R8={};Ni.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===R8)this.readInvalidTemplateToken();else throw c;}this.inTemplateElement=!1};Ni.invalidStringToken=function(c,h){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw R8;this.raise(c,h)};Ni.readTmplToken=function(){for(var c="",h=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var f=this.input.charCodeAt(this.pos);
if(96===f||36===f&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===bb.template||this.type===bb.invalidTemplate)){if(36===f)return this.pos+=2,this.finishToken(bb.dollarBraceL);++this.pos;return this.finishToken(bb.backQuote)}c+=this.input.slice(h,this.pos);return this.finishToken(bb.template,c)}if(92===f)c+=this.input.slice(h,this.pos),c+=this.readEscapedChar(!0),h=this.pos;else if(Kt(f)){c+=this.input.slice(h,this.pos);++this.pos;switch(f){case 13:10===this.input.charCodeAt(this.pos)&&
++this.pos;case 10:c+="\n";break;default:c+=String.fromCharCode(f)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);h=this.pos}else++this.pos}};Ni.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;case "`":return this.finishToken(bb.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Ni.readEscapedChar=
function(c){var h=this.input.charCodeAt(++this.pos);++this.pos;switch(h){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return VG(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),
c)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=h&&55>=h){var f=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],m=parseInt(f,8);255<m&&(f=f.slice(0,-1),m=parseInt(f,8));this.pos+=f.length-1;h=this.input.charCodeAt(this.pos);"0"===f&&56!==h&&57!==h||!this.strict&&!c||this.invalidStringToken(this.pos-1-f.length,c?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(m)}return Kt(h)?"":String.fromCharCode(h)}};
Ni.readHexChar=function(c){var h=this.pos;c=this.readInt(16,c);null===c&&this.invalidStringToken(h,"Bad character escape sequence");return c};Ni.readWord1=function(){this.containsEsc=!1;for(var c="",h=!0,f=this.pos,m=6<=this.options.ecmaVersion;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(mz(n,m))this.pos+=65535>=n?1:2;else if(92===n)this.containsEsc=!0,c+=this.input.slice(f,this.pos),f=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),
++this.pos,n=this.readCodePoint(),(h?qs:mz)(n,m)||this.invalidStringToken(f,"Invalid Unicode escape"),c+=VG(n),f=this.pos;else break;h=!1}return c+this.input.slice(f,this.pos)};Ni.readWord=function(){var c=this.readWord1(),h=bb.name;this.keywords.test(c)&&(h=tQ[c]);return this.finishToken(h,c)};Xl.acorn={Parser:Xl,version:"8.4.1",defaultOptions:PG,Position:mC,SourceLocation:nz,getLineInfo:lC,Node:nx,TokenType:vj,tokTypes:bb,keywordTypes:tQ,TokContext:uq,tokContexts:cl,isIdentifierChar:mz,isIdentifierStart:qs,
Token:WL,isNewLine:Kt,lineBreak:Ko,lineBreakG:mw,nonASCIIwhitespace:P8};var dk=function(c,h){void 0===h&&(h={});this.toks=this.constructor.BaseParser.tokenizer(c,h);this.options=this.toks.options;this.input=this.toks.input;this.tok=this.last={type:bb.eof,start:0,end:0};this.tok.validateRegExpFlags=t_;this.tok.validateRegExpPattern=t_;this.options.locations&&(c=this.toks.curPosition(),this.tok.loc=new nz(this.toks,c,c));this.ahead=[];this.context=[];this.curLineStart=this.curIndent=0;this.nextLineStart=
this.lineEnd(this.curLineStart)+1;this.inFunction=this.inGenerator=this.inAsync=!1};dk.prototype.startNode=function(){return new nx(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)};dk.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start};dk.prototype.startNodeAt=function(c){return this.options.locations?new nx(this.toks,c[0],c[1]):new nx(this.toks,c)};dk.prototype.finishNode=function(c,h){c.type=h;c.end=this.last.end;
this.options.locations&&(c.loc.end=this.last.loc.end);this.options.ranges&&(c.range[1]=this.last.end);return c};dk.prototype.dummyNode=function(c){var h=this.startNode();h.type=c;h.end=h.start;this.options.locations&&(h.loc.end=h.loc.start);this.options.ranges&&(h.range[1]=h.start);this.last={type:bb.name,start:h.start,end:h.start,loc:h.loc};return h};dk.prototype.dummyIdent=function(){var c=this.dummyNode("Identifier");c.name="\u2716";return c};dk.prototype.dummyString=function(){var c=this.dummyNode("Literal");
c.value=c.raw="\u2716";return c};dk.prototype.eat=function(c){return this.tok.type===c?(this.next(),!0):!1};dk.prototype.isContextual=function(c){return this.tok.type===bb.name&&this.tok.value===c};dk.prototype.eatContextual=function(c){return this.tok.value===c&&this.eat(bb.name)};dk.prototype.canInsertSemicolon=function(){return this.tok.type===bb.eof||this.tok.type===bb.braceR||Ko.test(this.input.slice(this.last.end,this.tok.start))};dk.prototype.semicolon=function(){return this.eat(bb.semi)};
dk.prototype.expect=function(c){if(this.eat(c))return!0;for(var h=1;2>=h;h++)if(this.lookAhead(h).type===c){for(c=0;c<h;c++)this.next();return!0}};dk.prototype.pushCx=function(){this.context.push(this.curIndent)};dk.prototype.popCx=function(){this.curIndent=this.context.pop()};dk.prototype.lineEnd=function(c){for(;c<this.input.length&&!Kt(this.input.charCodeAt(c));)++c;return c};dk.prototype.indentationAfter=function(c){for(var h=0;;++c){var f=this.input.charCodeAt(c);if(32===f)++h;else if(9===f)h+=
this.options.tabSize;else return h}};dk.prototype.closes=function(c,h,f,m){return this.tok.type===c||this.tok.type===bb.eof?!0:f!==this.curLineStart&&this.curIndent<h&&this.tokenStartsLine()&&(!m||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<h)};dk.prototype.tokenStartsLine=function(){for(var c=this.tok.start-1;c>=this.curLineStart;--c){var h=this.input.charCodeAt(c);if(9!==h&&32!==h)return!1}return!0};dk.prototype.extend=function(c,h){this[c]=h(this[c])};dk.prototype.parse=
function(){this.next();return this.parseTopLevel()};dk.extend=function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var f=0;f<c.length;f++)h=c[f](h);return h};dk.parse=function(c,h){return(new this(c,h)).parse()};dk.BaseParser=Xl;var XL=dk.prototype;XL.next=function(){this.last=this.tok;this.tok=this.ahead.length?this.ahead.shift():this.readToken();if(this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=
this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}};XL.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===bb.dot&&"."===this.input.substr(this.toks.end,1)&&6<=this.options.ecmaVersion&&(this.toks.end++,this.toks.type=bb.ellipsis),new WL(this.toks)}catch(m){if(!(m instanceof SyntaxError))throw m;var c=m.message,h=m.raisedAt,f=!0;if(/unterminated/i.test(c))if(h=this.lineEnd(m.pos+1),/string/.test(c))f={start:m.pos,end:h,type:bb.string,value:this.input.slice(m.pos+
1,h)};else if(/regular expr/i.test(c)){f=this.input.slice(m.pos,h);try{f=new RegExp(f)}catch(n){}f={start:m.pos,end:h,type:bb.regexp,value:f}}else f=/template/.test(c)?{start:m.pos,end:h,type:bb.template,value:this.input.slice(m.pos,h)}:!1;else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(c))for(;h<this.input.length&&!Ufa(this.input.charCodeAt(h));)++h;else if(/character escape|expected hexadecimal/i.test(c))for(;h<
this.input.length&&(c=this.input.charCodeAt(h++),34!==c&&39!==c&&!Kt(c)););else if(/unexpected character/i.test(c))h++,f=!1;else if(/regular expression/i.test(c))f=!0;else throw m;this.resetTo(h);!0===f&&(f={start:h,end:h,type:bb.name,value:"\u2716"});if(f)return this.options.locations&&(f.loc=new nz(this.toks,lC(this.input,f.start),lC(this.input,f.end))),f}};XL.resetTo=function(c){this.toks.pos=c;var h=this.input.charAt(c-1);this.toks.exprAllowed=!h||/[[{(,;:?/*=+\-~!|&%^<>]/.test(h)||/[enwfd]/.test(h)&&
/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(c-10,c));if(this.options.locations){this.toks.curLine=1;this.toks.lineStart=mw.lastIndex=0;for(var f;(f=mw.exec(this.input))&&f.index<c;)++this.toks.curLine,this.toks.lineStart=f.index+f[0].length}};XL.lookAhead=function(c){for(;c>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[c-1]};var Cn=dk.prototype;Cn.parseTopLevel=function(){var c=this.startNodeAt(this.options.locations?[0,lC(this.input,
0)]:0);for(c.body=[];this.tok.type!==bb.eof;)c.body.push(this.parseStatement());this.toks.adaptDirectivePrologue(c.body);this.last=this.tok;c.sourceType=this.options.sourceType;return this.finishNode(c,"Program")};Cn.parseStatement=function(){var c=this.tok.type,h=this.startNode();if(this.toks.isLet()){c=bb._var;var f="let"}switch(c){case bb._break:case bb._continue:this.next();var m=c===bb._break;this.semicolon()||this.canInsertSemicolon()?h.label=null:(h.label=this.tok.type===bb.name?this.parseIdent():
null,this.semicolon());return this.finishNode(h,m?"BreakStatement":"ContinueStatement");case bb._debugger:return this.next(),this.semicolon(),this.finishNode(h,"DebuggerStatement");case bb._do:return this.next(),h.body=this.parseStatement(),h.test=this.eat(bb._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(h,"DoWhileStatement");case bb._for:this.next();m=9<=this.options.ecmaVersion&&this.eatContextual("await");this.pushCx();this.expect(bb.parenL);if(this.tok.type===
bb.semi)return this.parseFor(h,null);if((c=this.toks.isLet())||this.tok.type===bb._var||this.tok.type===bb._const)return c=this.parseVar(this.startNode(),!0,c?"let":this.tok.value),1!==c.declarations.length||this.tok.type!==bb._in&&!this.isContextual("of")?this.parseFor(h,c):(9<=this.options.ecmaVersion&&this.tok.type!==bb._in&&(h.await=m),this.parseForIn(h,c));c=this.parseExpression(!0);return this.tok.type===bb._in||this.isContextual("of")?(9<=this.options.ecmaVersion&&this.tok.type!==bb._in&&(h.await=
m),this.parseForIn(h,this.toAssignable(c))):this.parseFor(h,c);case bb._function:return this.next(),this.parseFunction(h,!0);case bb._if:return this.next(),h.test=this.parseParenExpression(),h.consequent=this.parseStatement(),h.alternate=this.eat(bb._else)?this.parseStatement():null,this.finishNode(h,"IfStatement");case bb._return:return this.next(),this.eat(bb.semi)||this.canInsertSemicolon()?h.argument=null:(h.argument=this.parseExpression(),this.semicolon()),this.finishNode(h,"ReturnStatement");
case bb._switch:c=this.curIndent;f=this.curLineStart;this.next();h.discriminant=this.parseParenExpression();h.cases=[];this.pushCx();for(this.expect(bb.braceL);!this.closes(bb.braceR,c,f,!0);)if(this.tok.type===bb._case||this.tok.type===bb._default){var n=this.tok.type===bb._case;m&&this.finishNode(m,"SwitchCase");h.cases.push(m=this.startNode());m.consequent=[];this.next();m.test=n?this.parseExpression():null;this.expect(bb.colon)}else m||(h.cases.push(m=this.startNode()),m.consequent=[],m.test=
null),m.consequent.push(this.parseStatement());m&&this.finishNode(m,"SwitchCase");this.popCx();this.eat(bb.braceR);return this.finishNode(h,"SwitchStatement");case bb._throw:return this.next(),h.argument=this.parseExpression(),this.semicolon(),this.finishNode(h,"ThrowStatement");case bb._try:return this.next(),h.block=this.parseBlock(),h.handler=null,this.tok.type===bb._catch&&(m=this.startNode(),this.next(),this.eat(bb.parenL)?(m.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(bb.parenR)):
m.param=null,m.body=this.parseBlock(),h.handler=this.finishNode(m,"CatchClause")),h.finalizer=this.eat(bb._finally)?this.parseBlock():null,h.handler||h.finalizer?this.finishNode(h,"TryStatement"):h.block;case bb._var:case bb._const:return this.parseVar(h,!1,f||this.tok.value);case bb._while:return this.next(),h.test=this.parseParenExpression(),h.body=this.parseStatement(),this.finishNode(h,"WhileStatement");case bb._with:return this.next(),h.object=this.parseParenExpression(),h.body=this.parseStatement(),
this.finishNode(h,"WithStatement");case bb.braceL:return this.parseBlock();case bb.semi:return this.next(),this.finishNode(h,"EmptyStatement");case bb._class:return this.parseClass(!0);case bb._import:return 10<this.options.ecmaVersion&&(m=this.lookAhead(1).type,m===bb.parenL||m===bb.dot)?(h.expression=this.parseExpression(),this.semicolon(),this.finishNode(h,"ExpressionStatement")):this.parseImport();case bb._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),
this.next(),this.parseFunction(h,!0,!0);m=this.parseExpression();if(ar(m))return this.next(),this.tok.type===bb.eof?this.finishNode(h,"EmptyStatement"):this.parseStatement();if(c===bb.name&&"Identifier"===m.type&&this.eat(bb.colon))return h.body=this.parseStatement(),h.label=m,this.finishNode(h,"LabeledStatement");h.expression=m;this.semicolon();return this.finishNode(h,"ExpressionStatement")}};Cn.parseBlock=function(){var c=this.startNode();this.pushCx();this.expect(bb.braceL);var h=this.curIndent,
f=this.curLineStart;for(c.body=[];!this.closes(bb.braceR,h,f,!0);)c.body.push(this.parseStatement());this.popCx();this.eat(bb.braceR);return this.finishNode(c,"BlockStatement")};Cn.parseFor=function(c,h){c.init=h;c.test=c.update=null;this.eat(bb.semi)&&this.tok.type!==bb.semi&&(c.test=this.parseExpression());this.eat(bb.semi)&&this.tok.type!==bb.parenR&&(c.update=this.parseExpression());this.popCx();this.expect(bb.parenR);c.body=this.parseStatement();return this.finishNode(c,"ForStatement")};Cn.parseForIn=
function(c,h){var f=this.tok.type===bb._in?"ForInStatement":"ForOfStatement";this.next();c.left=h;c.right=this.parseExpression();this.popCx();this.expect(bb.parenR);c.body=this.parseStatement();return this.finishNode(c,f)};Cn.parseVar=function(c,h,f){c.kind=f;this.next();c.declarations=[];do f=this.startNode(),f.id=6<=this.options.ecmaVersion?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),f.init=this.eat(bb.eq)?this.parseMaybeAssign(h):null,c.declarations.push(this.finishNode(f,"VariableDeclarator"));
while(this.eat(bb.comma));c.declarations.length||(f=this.startNode(),f.id=this.dummyIdent(),c.declarations.push(this.finishNode(f,"VariableDeclarator")));h||this.semicolon();return this.finishNode(c,"VariableDeclaration")};Cn.parseClass=function(c){var h=this.startNode();this.next();h.id=this.tok.type===bb.name?this.parseIdent():!0===c?this.dummyIdent():null;h.superClass=this.eat(bb._extends)?this.parseExpression():null;h.body=this.startNode();h.body.body=[];this.pushCx();var f=this.curIndent+1,m=
this.curLineStart;this.eat(bb.braceL);this.curIndent+1<f&&(f=this.curIndent,m=this.curLineStart);for(;!this.closes(bb.braceR,f,m);){var n=this.parseClassElement();n&&h.body.body.push(n)}this.popCx();this.eat(bb.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));this.semicolon();this.finishNode(h.body,"ClassBody");return this.finishNode(h,c?"ClassDeclaration":"ClassExpression")};Cn.parseClassElement=function(){if(this.eat(bb.semi))return null;var c=
this.options,h=c.ecmaVersion,f=c.locations,m=this.curIndent,n=this.curLineStart;c=this.startNode();var a="",d=!1,k=!1,b="method";c.static=!1;this.eatContextual("static")&&(this.isClassElementNameStart()||this.toks.type===bb.star?c.static=!0:a="static");!a&&8<=h&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.toks.type!==bb.star||this.canInsertSemicolon()?a="async":k=!0);if(!a){d=this.eat(bb.star);var e=this.toks.value;if(this.eatContextual("get")||this.eatContextual("set"))this.isClassElementNameStart()?
b=e:a=e}if(a)c.computed=!1,c.key=this.startNodeAt(f?[this.toks.lastTokStart,this.toks.lastTokStartLoc]:this.toks.lastTokStart),c.key.name=a,this.finishNode(c.key,"Identifier");else if(this.parseClassElementName(c),ar(c.key))return ar(this.parseMaybeAssign())&&this.next(),this.eat(bb.comma),null;13>h||this.toks.type===bb.parenL||"method"!==b||d||k?(c.kind=c.computed||c.static||d||k||"method"!==b||!("Identifier"===c.key.type&&"constructor"===c.key.name||"Literal"===c.key.type&&"constructor"===c.key.value)?
b:"constructor",c.value=this.parseMethod(d,k),this.finishNode(c,"MethodDefinition")):(this.eat(bb.eq)?this.curLineStart!==n&&this.curIndent<=m&&this.tokenStartsLine()?c.value=null:(h=this.inAsync,f=this.inGenerator,this.inGenerator=this.inAsync=!1,c.value=this.parseMaybeAssign(),this.inAsync=h,this.inGenerator=f):c.value=null,this.semicolon(),this.finishNode(c,"PropertyDefinition"));return c};Cn.isClassElementNameStart=function(){return this.toks.isClassElementNameStart()};Cn.parseClassElementName=
function(c){this.toks.type===bb.privateId?(c.computed=!1,c.key=this.parsePrivateIdent()):this.parsePropertyName(c)};Cn.parseFunction=function(c,h,f){var m=this.inAsync,n=this.inGenerator,a=this.inFunction;this.initFunction(c);6<=this.options.ecmaVersion&&(c.generator=this.eat(bb.star));8<=this.options.ecmaVersion&&(c.async=!!f);this.tok.type===bb.name?c.id=this.parseIdent():!0===h&&(c.id=this.dummyIdent());this.inAsync=c.async;this.inGenerator=c.generator;this.inFunction=!0;c.params=this.parseFunctionParams();
c.body=this.parseBlock();this.toks.adaptDirectivePrologue(c.body.body);this.inAsync=m;this.inGenerator=n;this.inFunction=a;return this.finishNode(c,h?"FunctionDeclaration":"FunctionExpression")};Cn.parseExport=function(){var c=this.startNode();this.next();if(this.eat(bb.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?c.exported=this.parseExprAtom():c.exported=null),c.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.finishNode(c,"ExportAllDeclaration");
if(this.eat(bb._default)){var h;if(this.tok.type===bb._function||(h=this.toks.isAsyncFunction())){var f=this.startNode();this.next();h&&this.next();c.declaration=this.parseFunction(f,"nullableID",h)}else this.tok.type===bb._class?c.declaration=this.parseClass("nullableID"):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(c.declaration=this.parseStatement(),c.specifiers=
[],c.source=null):(c.declaration=null,c.specifiers=this.parseExportSpecifierList(),c.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon());return this.finishNode(c,"ExportNamedDeclaration")};Cn.parseImport=function(){var c=this.startNode();this.next();if(this.tok.type===bb.string)c.specifiers=[],c.source=this.parseExprAtom();else{if(this.tok.type===bb.name&&"from"!==this.tok.value){var h=this.startNode();h.local=this.parseIdent();this.finishNode(h,"ImportDefaultSpecifier");
this.eat(bb.comma)}c.specifiers=this.parseImportSpecifiers();c.source=this.eatContextual("from")&&this.tok.type===bb.string?this.parseExprAtom():this.dummyString();h&&c.specifiers.unshift(h)}this.semicolon();return this.finishNode(c,"ImportDeclaration")};Cn.parseImportSpecifiers=function(){var c=[];if(this.tok.type===bb.star){var h=this.startNode();this.next();h.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent();c.push(this.finishNode(h,"ImportNamespaceSpecifier"))}else{h=this.curIndent;
var f=this.curLineStart,m=this.nextLineStart;this.pushCx();this.eat(bb.braceL);this.curLineStart>m&&(m=this.curLineStart);for(;!this.closes(bb.braceR,h+(this.curLineStart<=m?1:0),f);){var n=this.startNode();if(this.eat(bb.star))n.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent(),this.finishNode(n,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;n.imported=this.parseIdent();if(ar(n.imported))break;n.local=this.eatContextual("as")?this.parseIdent():n.imported;this.finishNode(n,
"ImportSpecifier")}c.push(n);this.eat(bb.comma)}this.eat(bb.braceR);this.popCx()}return c};Cn.parseExportSpecifierList=function(){var c=[],h=this.curIndent,f=this.curLineStart,m=this.nextLineStart;this.pushCx();this.eat(bb.braceL);this.curLineStart>m&&(m=this.curLineStart);for(;!this.closes(bb.braceR,h+(this.curLineStart<=m?1:0),f)&&!this.isContextual("from");){var n=this.startNode();n.local=this.parseIdent();if(ar(n.local))break;n.exported=this.eatContextual("as")?this.parseIdent():n.local;this.finishNode(n,
"ExportSpecifier");c.push(n);this.eat(bb.comma)}this.eat(bb.braceR);this.popCx();return c};var Qj=dk.prototype;Qj.checkLVal=function(c){if(!c)return c;switch(c.type){case "Identifier":case "MemberExpression":return c;case "ParenthesizedExpression":return c.expression=this.checkLVal(c.expression),c;default:return this.dummyIdent()}};Qj.parseExpression=function(c){var h=this.storeCurrentPos(),f=this.parseMaybeAssign(c);if(this.tok.type===bb.comma){h=this.startNodeAt(h);for(h.expressions=[f];this.eat(bb.comma);)h.expressions.push(this.parseMaybeAssign(c));
return this.finishNode(h,"SequenceExpression")}return f};Qj.parseParenExpression=function(){this.pushCx();this.expect(bb.parenL);var c=this.parseExpression();this.popCx();this.expect(bb.parenR);return c};Qj.parseMaybeAssign=function(c){if(this.inGenerator&&this.toks.isContextual("yield"))return c=this.startNode(),this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==bb.star&&!this.tok.type.startsExpr?(c.delegate=!1,c.argument=null):(c.delegate=this.eat(bb.star),c.argument=this.parseMaybeAssign()),
this.finishNode(c,"YieldExpression");var h=this.storeCurrentPos(),f=this.parseMaybeConditional(c);return this.tok.type.isAssign?(h=this.startNodeAt(h),h.operator=this.tok.value,h.left=this.tok.type===bb.eq?this.toAssignable(f):this.checkLVal(f),this.next(),h.right=this.parseMaybeAssign(c),this.finishNode(h,"AssignmentExpression")):f};Qj.parseMaybeConditional=function(c){var h=this.storeCurrentPos(),f=this.parseExprOps(c);return this.eat(bb.question)?(h=this.startNodeAt(h),h.test=f,h.consequent=this.parseMaybeAssign(),
h.alternate=this.expect(bb.colon)?this.parseMaybeAssign(c):this.dummyIdent(),this.finishNode(h,"ConditionalExpression")):f};Qj.parseExprOps=function(c){var h=this.storeCurrentPos(),f=this.curIndent,m=this.curLineStart;return this.parseExprOp(this.parseMaybeUnary(!1),h,-1,c,f,m)};Qj.parseExprOp=function(c,h,f,m,n,a){if(this.curLineStart!==a&&this.curIndent<n&&this.tokenStartsLine())return c;var d=this.tok.type.binop;if(null!=d&&(!m||this.tok.type!==bb._in)&&d>f){var k=this.startNodeAt(h);k.left=c;
k.operator=this.tok.value;this.next();this.curLineStart!==a&&this.curIndent<n&&this.tokenStartsLine()?k.right=this.dummyIdent():(c=this.storeCurrentPos(),k.right=this.parseExprOp(this.parseMaybeUnary(!1),c,d,m,n,a));this.finishNode(k,/&&|\|\||\?\?/.test(k.operator)?"LogicalExpression":"BinaryExpression");return this.parseExprOp(k,h,f,m,n,a)}return c};Qj.parseMaybeUnary=function(c){var h=this.storeCurrentPos();if(8<=this.options.ecmaVersion&&this.toks.isContextual("await")&&(this.inAsync||!this.inFunction&&
this.options.allowAwaitOutsideFunction)){var f=this.parseAwait();c=!0}else if(this.tok.type.prefix){f=this.startNode();var m=this.tok.type===bb.incDec;m||(c=!0);f.operator=this.tok.value;f.prefix=!0;this.next();f.argument=this.parseMaybeUnary(!0);m&&(f.argument=this.checkLVal(f.argument));f=this.finishNode(f,m?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===bb.ellipsis)f=this.startNode(),this.next(),f.argument=this.parseMaybeUnary(c),f=this.finishNode(f,"SpreadElement");else for(f=this.parseExprSubscripts();this.tok.type.postfix&&
!this.canInsertSemicolon();)m=this.startNodeAt(h),m.operator=this.tok.value,m.prefix=!1,m.argument=this.checkLVal(f),this.next(),f=this.finishNode(m,"UpdateExpression");return!c&&this.eat(bb.starstar)?(c=this.startNodeAt(h),c.operator="**",c.left=f,c.right=this.parseMaybeUnary(!1),this.finishNode(c,"BinaryExpression")):f};Qj.parseExprSubscripts=function(){var c=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),c,!1,this.curIndent,this.curLineStart)};Qj.parseSubscripts=function(c,
h,f,m,n){for(var a=11<=this.options.ecmaVersion,d=!1;;){if(this.curLineStart!==n&&this.curIndent<=m&&this.tokenStartsLine())if(this.tok.type===bb.dot&&this.curIndent===m)--m;else break;var k="Identifier"===c.type&&"async"===c.name&&!this.canInsertSemicolon(),b=a&&this.eat(bb.questionDot);b&&(d=!0);if(b&&this.tok.type!==bb.parenL&&this.tok.type!==bb.bracketL&&this.tok.type!==bb.backQuote||this.eat(bb.dot)){var e=this.startNodeAt(h);e.object=c;this.curLineStart!==n&&this.curIndent<=m&&this.tokenStartsLine()?
e.property=this.dummyIdent():e.property=this.parsePropertyAccessor()||this.dummyIdent();e.computed=!1;a&&(e.optional=b);c=this.finishNode(e,"MemberExpression")}else if(this.tok.type===bb.bracketL)this.pushCx(),this.next(),e=this.startNodeAt(h),e.object=c,e.property=this.parseExpression(),e.computed=!0,a&&(e.optional=b),this.popCx(),this.expect(bb.bracketR),c=this.finishNode(e,"MemberExpression");else if(f||this.tok.type!==bb.parenL)if(this.tok.type===bb.backQuote)b=this.startNodeAt(h),b.tag=c,b.quasi=
this.parseTemplate(),c=this.finishNode(b,"TaggedTemplateExpression");else break;else{e=this.parseExprList(bb.parenR);if(k&&this.eat(bb.arrow))return this.parseArrowExpression(this.startNodeAt(h),e,!0);k=this.startNodeAt(h);k.callee=c;k.arguments=e;a&&(k.optional=b);c=this.finishNode(k,"CallExpression")}}d&&(h=this.startNodeAt(h),h.expression=c,c=this.finishNode(h,"ChainExpression"));return c};Qj.parseExprAtom=function(){switch(this.tok.type){case bb._this:case bb._super:var c=this.tok.type===bb._this?
"ThisExpression":"Super";var h=this.startNode();this.next();return this.finishNode(h,c);case bb.name:h=this.storeCurrentPos();c=this.parseIdent();var f=!1;if("async"===c.name&&!this.canInsertSemicolon()){if(this.eat(bb._function))return this.parseFunction(this.startNodeAt(h),!1,!0);this.tok.type===bb.name&&(c=this.parseIdent(),f=!0)}return this.eat(bb.arrow)?this.parseArrowExpression(this.startNodeAt(h),[c],f):c;case bb.regexp:return h=this.startNode(),c=this.tok.value,h.regex={pattern:c.pattern,
flags:c.flags},h.value=c.value,h.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(h,"Literal");case bb.num:case bb.string:return h=this.startNode(),h.value=this.tok.value,h.raw=this.input.slice(this.tok.start,this.tok.end),this.tok.type===bb.num&&110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(h,"Literal");case bb._null:case bb._true:case bb._false:return h=this.startNode(),h.value=this.tok.type===bb._null?
null:this.tok.type===bb._true,h.raw=this.tok.type.keyword,this.next(),this.finishNode(h,"Literal");case bb.parenL:h=this.storeCurrentPos();this.next();c=this.parseExpression();this.expect(bb.parenR);if(this.eat(bb.arrow))return c=c.expressions||[c],c.length&&ar(c[c.length-1])&&c.pop(),this.parseArrowExpression(this.startNodeAt(h),c);this.options.preserveParens&&(h=this.startNodeAt(h),h.expression=c,c=this.finishNode(h,"ParenthesizedExpression"));return c;case bb.bracketL:return h=this.startNode(),
h.elements=this.parseExprList(bb.bracketR,!0),this.finishNode(h,"ArrayExpression");case bb.braceL:return this.parseObj();case bb._class:return this.parseClass(!1);case bb._function:return h=this.startNode(),this.next(),this.parseFunction(h,!1);case bb._new:return this.parseNew();case bb.backQuote:return this.parseTemplate();case bb._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.dummyIdent();default:return this.dummyIdent()}};Qj.parseExprImport=function(){var c=this.startNode(),
h=this.parseIdent(!0);switch(this.tok.type){case bb.parenL:return this.parseDynamicImport(c);case bb.dot:return c.meta=h,this.parseImportMeta(c);default:return c.name="import",this.finishNode(c,"Identifier")}};Qj.parseDynamicImport=function(c){c.source=this.parseExprList(bb.parenR)[0]||this.dummyString();return this.finishNode(c,"ImportExpression")};Qj.parseImportMeta=function(c){this.next();c.property=this.parseIdent(!0);return this.finishNode(c,"MetaProperty")};Qj.parseNew=function(){var c=this.startNode(),
h=this.curIndent,f=this.curLineStart,m=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(bb.dot))return c.meta=m,c.property=this.parseIdent(!0),this.finishNode(c,"MetaProperty");m=this.storeCurrentPos();c.callee=this.parseSubscripts(this.parseExprAtom(),m,!0,h,f);c.arguments=this.tok.type===bb.parenL?this.parseExprList(bb.parenR):[];return this.finishNode(c,"NewExpression")};Qj.parseTemplateElement=function(){var c=this.startNode();c.value=this.tok.type===bb.invalidTemplate?{raw:this.tok.value,
cooked:null}:{raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value};this.next();c.tail=this.tok.type===bb.backQuote;return this.finishNode(c,"TemplateElement")};Qj.parseTemplate=function(){var c=this.startNode();this.next();c.expressions=[];var h=this.parseTemplateElement();for(c.quasis=[h];!h.tail;)this.next(),c.expressions.push(this.parseExpression()),this.expect(bb.braceR)?h=this.parseTemplateElement():(h=this.startNode(),h.value={cooked:"",raw:""},h.tail=
!0,this.finishNode(h,"TemplateElement")),c.quasis.push(h);this.expect(bb.backQuote);return this.finishNode(c,"TemplateLiteral")};Qj.parseObj=function(){var c=this.startNode();c.properties=[];this.pushCx();var h=this.curIndent+1,f=this.curLineStart;this.eat(bb.braceL);this.curIndent+1<h&&(h=this.curIndent,f=this.curLineStart);for(;!this.closes(bb.braceR,h,f);){var m=this.startNode(),n=void 0,a=void 0;if(9<=this.options.ecmaVersion&&this.eat(bb.ellipsis))m.argument=this.parseMaybeAssign(),c.properties.push(this.finishNode(m,
"SpreadElement"));else{6<=this.options.ecmaVersion&&(a=this.storeCurrentPos(),m.method=!1,m.shorthand=!1,n=this.eat(bb.star));this.parsePropertyName(m);if(this.toks.isAsyncProp(m)){var d=!0;n=9<=this.options.ecmaVersion&&this.eat(bb.star);this.parsePropertyName(m)}else d=!1;ar(m.key)?ar(this.parseMaybeAssign())&&this.next():(this.eat(bb.colon)?(m.kind="init",m.value=this.parseMaybeAssign()):6<=this.options.ecmaVersion&&(this.tok.type===bb.parenL||this.tok.type===bb.braceL)?(m.kind="init",m.method=
!0,m.value=this.parseMethod(n,d)):5<=this.options.ecmaVersion&&"Identifier"===m.key.type&&!m.computed&&("get"===m.key.name||"set"===m.key.name)&&this.tok.type!==bb.comma&&this.tok.type!==bb.braceR&&this.tok.type!==bb.eq?(m.kind=m.key.name,this.parsePropertyName(m),m.value=this.parseMethod(!1)):(m.kind="init",6<=this.options.ecmaVersion?this.eat(bb.eq)?(n=this.startNodeAt(a),n.operator="=",n.left=m.key,n.right=this.parseMaybeAssign(),m.value=this.finishNode(n,"AssignmentExpression")):m.value=m.key:
m.value=this.dummyIdent(),m.shorthand=!0),c.properties.push(this.finishNode(m,"Property")))}this.eat(bb.comma)}this.popCx();this.eat(bb.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return this.finishNode(c,"ObjectExpression")};Qj.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(bb.bracketL)){c.computed=!0;c.key=this.parseExpression();this.expect(bb.bracketR);return}c.computed=!1}var h=this.tok.type===bb.num||this.tok.type===
bb.string?this.parseExprAtom():this.parseIdent();c.key=h||this.dummyIdent()};Qj.parsePropertyAccessor=function(){if(this.tok.type===bb.name||this.tok.type.keyword)return this.parseIdent();if(this.tok.type===bb.privateId)return this.parsePrivateIdent()};Qj.parseIdent=function(){var c=this.tok.type===bb.name?this.tok.value:this.tok.type.keyword;if(!c)return this.dummyIdent();var h=this.startNode();this.next();h.name=c;return this.finishNode(h,"Identifier")};Qj.parsePrivateIdent=function(){var c=this.startNode();
c.name=this.tok.value;this.next();return this.finishNode(c,"PrivateIdentifier")};Qj.initFunction=function(c){c.id=null;c.params=[];6<=this.options.ecmaVersion&&(c.generator=!1,c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};Qj.toAssignable=function(c,h){if(c&&"Identifier"!==c.type&&("MemberExpression"!==c.type||h))if("ParenthesizedExpression"===c.type)this.toAssignable(c.expression,h);else{if(6>this.options.ecmaVersion)return this.dummyIdent();if("ObjectExpression"===c.type){c.type="ObjectPattern";
for(var f=0,m=c.properties;f<m.length;f+=1)this.toAssignable(m[f],h)}else if("ArrayExpression"===c.type)c.type="ArrayPattern",this.toAssignableList(c.elements,h);else if("Property"===c.type)this.toAssignable(c.value,h);else if("SpreadElement"===c.type)c.type="RestElement",this.toAssignable(c.argument,h);else if("AssignmentExpression"===c.type)c.type="AssignmentPattern",delete c.operator;else return this.dummyIdent()}return c};Qj.toAssignableList=function(c,h){for(var f=0;f<c.length;f+=1)this.toAssignable(c[f],
h);return c};Qj.parseFunctionParams=function(c){c=this.parseExprList(bb.parenR);return this.toAssignableList(c,!0)};Qj.parseMethod=function(c,h){var f=this.startNode(),m=this.inAsync,n=this.inGenerator,a=this.inFunction;this.initFunction(f);6<=this.options.ecmaVersion&&(f.generator=!!c);8<=this.options.ecmaVersion&&(f.async=!!h);this.inAsync=f.async;this.inGenerator=f.generator;this.inFunction=!0;f.params=this.parseFunctionParams();f.body=this.parseBlock();this.toks.adaptDirectivePrologue(f.body.body);
this.inAsync=m;this.inGenerator=n;this.inFunction=a;return this.finishNode(f,"FunctionExpression")};Qj.parseArrowExpression=function(c,h,f){var m=this.inAsync,n=this.inGenerator,a=this.inFunction;this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!f);this.inAsync=c.async;this.inGenerator=!1;this.inFunction=!0;c.params=this.toAssignableList(h,!0);c.expression=this.tok.type!==bb.braceL;c.expression?c.body=this.parseMaybeAssign():(c.body=this.parseBlock(),this.toks.adaptDirectivePrologue(c.body.body));
this.inAsync=m;this.inGenerator=n;this.inFunction=a;return this.finishNode(c,"ArrowFunctionExpression")};Qj.parseExprList=function(c,h){this.pushCx();var f=this.curIndent,m=this.curLineStart,n=[];for(this.next();!this.closes(c,f+1,m);)if(this.eat(bb.comma))n.push(h?null:this.dummyIdent());else{var a=this.parseMaybeAssign();if(ar(a)){if(this.closes(c,f,m))break;this.next()}else n.push(a);this.eat(bb.comma)}this.popCx();this.eat(c)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=
this.tok.loc.start));return n};Qj.parseAwait=function(){var c=this.startNode();this.next();c.argument=this.parseMaybeUnary();return this.finishNode(c,"AwaitExpression")};PG.tabSize=4;var YL=Object.freeze({__proto__:null,LooseParser:dk,isDummy:ar,parse:function(c,h){return dk.parse(c,h)}}),kf=lively.FreezerRuntime.recorderFor("lively.ast/lib/acorn-extension.js");kf.forEachNode=function(c,h,f,m){m=m||{};var n=m.traversal||"preorder",a=kf.obj.clone(m.visitors?m.visitors:kf.walk.make(kf.custom.visitors.withMemberExpression)),
d="preorder"===n?function(k,b,e,l,p){h(e,f,l,b);return k(e,l+1,p)}:function(k,b,e,l,p){k=k(e,l+1,p);h(e,f,l,b);return k};Object.keys(a).forEach(function(k){var b=a[k];a[k]=function(e,l,p){return d(b,k,e,l,p)}});kf.walk.recursive(c,0,null,a);return c};kf.matchNodes=function(c,h,f,m){return kf.forEachNode(c,function(n,a,d,k){if(h[n.type])h[n.type](n,a,d,k)},f,m)};kf.findNodesIncluding=WG;kf.withParentInfo=function(c,h,f){function m(b){var e={id:kf.string.newUUID(),parentScope:b,containingScopes:[]};
b&&b.containingScopes.push(e);return e}f=f||{};var n=kf.walk.make({Function:function(b,e,l){e&&e.scope&&(e.scope=m(e.scope));l(b.body,e,"ScopeBody")},VariableDeclarator:function(b,e,l){b.init&&l(b.init,e,"Expression")},VariableDeclaration:function(b,e,l){for(var p=0;p<b.declarations.length;++p){var u=b.declarations[p];u&&l(u,e,"VariableDeclarator")}},ObjectExpression:function(b,e,l){for(var p=0;p<b.properties.length;++p){var u=b.properties[p];l(u.key,e,"Expression");l(u.value,e,"Expression")}},MemberExpression:function(b,
e,l){l(b.object,e,"Expression");l(b.property,e,"Expression")}},kf.walk.base),a,d=[];kf.forEachNode(c,function(b){kf.arr.withoutAll(Object.keys(b),["end","start","type","source","raw"]).forEach(function(e){if(!b.__lookupGetter__(e)){var l=b[e];b.__defineGetter__(e,function(){a=e;return l});d.push([b,e,b[e]])}})},null,{visitors:n});var k=[];Object.keys(n).forEach(function(b){var e=n[b];n[b]=function(l,p,u){return b===l.type||f.visitAllNodes?(k.push(h.call(null,l,{scope:p.scope,depth:p.depth,parent:p.parent,
type:b,propertyInParent:a})),e(l,{scope:p.scope,parent:l,depth:p.depth+1},u)):e(l,p,u)}});kf.walk.recursive(c,{scope:m(),parent:null,propertyInParent:"",depth:0},null,n);d.forEach(function(b){delete b[0][b[1]];b[0][b[1]]=b[2]});return k};kf.copy=uQ;kf.findSiblings=vQ;kf.findNodeByAstIndex=wQ;kf.findStatementOfNode=xQ;kf.addAstIndex=oC;kf.obj=eg;kf.arr=Gf;kf.string=Dh;kf.Path=Qh;kf.withMozillaAstDo=ox;kf.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?
self:void 0;kf.acorn=Hr;kf.walk=sq;kf.loose=YL;kf.custom={};kf.custom.forEachNode=kf.forEachNode;kf.custom.matchNodes=kf.matchNodes;kf.custom.findNodesIncluding=kf.findNodesIncluding;kf.custom.withParentInfo=kf.withParentInfo;kf.custom.copy=kf.copy;kf.custom.findSiblings=kf.findSiblings;kf.custom.findNodeByAstIndex=kf.findNodeByAstIndex;kf.custom.findStatementOfNode=kf.findStatementOfNode;kf.custom.addAstIndex=kf.addAstIndex;var yu=Ma("bO",kf.custom);kf.walk=sq;kf.walk=sq;kf.loose=YL;kf.loose=YL;
kf.acorn=Hr;kf.acorn=Hr;kf.custom=yu;kf.custom=yu;kf.findStatementOfNode=xQ;kf.findStatementOfNode=xQ;kf.addAstIndex=oC;kf.addAstIndex=oC;kf.findNodesIncluding=WG;kf.findNodesIncluding=WG;kf.findSiblings=vQ;kf.findSiblings=vQ;kf.findNodeByAstIndex=wQ;kf.findNodeByAstIndex=wQ;kf.copy=uQ;kf.copy=uQ;kf.custom.visitors={stopAtFunctions:kf.walk.make(Object.assign({Function:function(){}},kf.walk.base)),withMemberExpression:kf.walk.make({MemberExpression:function(c,h,f){f(c.object,h,"Expression");f(c.property,
h,"Expression")}},kf.walk.base)};var ij=lively.FreezerRuntime.recorderFor("lively.ast/lib/visitors.js");ij.blockInliner=function(c){if(Array.isArray(c.body))for(var h=c.body.length-1;0<=h;h--){var f=c.body[h];"BlockStatement"===f.type&&f[ij.canBeInlinedSym]&&c.body.splice.apply(c.body,[h,1].concat(f.body))}return c};ij.block=function(c){return{type:"BlockStatement",body:c}};ij.Visitor=Ae;var Ir=function(){return ij.Visitor.apply(this,arguments)||this};$jscomp.inherits(Ir,ij.Visitor);Ir.prototype.accept=
function(c,h,f){this.doFunc(c,h,f);return ij.Visitor.prototype.accept.call(this,c,h,f)};Ir.run=function(c,h,f){var m=new this;m.doFunc=h;m.accept(c,f,[]);return f};ij.AllNodesVisitor=Ir;var px=function(){return ij.Visitor.apply(this,arguments)||this};$jscomp.inherits(px,ij.Visitor);px.prototype.accept=function(c,h,f){switch(c.type){case "ArrowFunctionExpression":return c;case "FunctionExpression":return c;case "FunctionDeclaration":return h.unshift({node:c,path:f}),c;default:return ij.Visitor.prototype.accept.call(this,
c,h,f)}};px.run=function(c){var h=[];(new this).accept(c,h,[]);return h};ij.FindToplevelFuncDeclVisitor=px;ij.canBeInlinedSym=Symbol("canBeInlined");var Dp=function(){return ij.Visitor.apply(this,arguments)||this};$jscomp.inherits(Dp,ij.Visitor);Dp.prototype.accept=function(c,h,f){c=this.replacer(ij.Visitor.prototype.accept.call(this,c,h,f));h={};return Array.isArray(c)?1===c.length?c[0]:Object.assign(ij.block(c),(h[ij.canBeInlinedSym]=!0,h)):c};Dp.prototype.visitBlockStatement=function(c,h,f){return ij.blockInliner(ij.Visitor.prototype.visitBlockStatement.call(this,
c,h,f))};Dp.prototype.visitProgram=function(c,h,f){return ij.blockInliner(ij.Visitor.prototype.visitProgram.call(this,c,h,f))};Dp.run=function(c,h){var f=new this;f.replacer=h;return f.accept(c,null,[])};ij.ReplaceManyVisitor=Dp;var vq=function(){return ij.Visitor.apply(this,arguments)||this};$jscomp.inherits(vq,ij.Visitor);vq.prototype.accept=function(c,h,f){return this.replacer(ij.Visitor.prototype.accept.call(this,c,h,f),f)};vq.run=function(c,h){var f=new this;f.replacer=h;return f.accept(c,null,
[])};ij.ReplaceVisitor=vq;ij.AllNodesVisitor=Ir;ij.AllNodesVisitor=Ir;ij.FindToplevelFuncDeclVisitor=px;ij.FindToplevelFuncDeclVisitor=px;ij.ReplaceVisitor=vq;ij.ReplaceVisitor=vq;ij.ReplaceManyVisitor=Dp;ij.ReplaceManyVisitor=Dp;var yh=lively.FreezerRuntime.recorderFor("lively.ast/lib/parser.js");yh.addSource=XG;yh.nodesAt=function(c,h){h="string"===typeof h?this.parse(h):h;return yh.findNodesIncluding(h,c)};yh.parseFunction=Lt;yh.fuzzyParse=rs;yh.acornParseAsyncAware=function(c,h){if(h.onComment){var f=
h.onComment;h.onComment=function(a,d,k,b,e,l){return f.call(this,a,d,k-14,b-14,e,l)}}var m=yh.acorn.parse("async () => {\n"+c+"\n}",h);if(m.loc)var n=m.loc.constructor;m={body:m.body[0].expression.body.body,sourceType:"module",type:"Program"};yh.AllNodesVisitor.run(m,function(a,d,k){if(!a._positionFixed){a._positionFixed=!0;if(a.start||0===a.start)a.start-=14,a.end-=14;a.loc&&n&&(k=a.loc,d=k.start,k=k.end,a.loc=new n(h,{column:d.column,line:d.line-1},{column:k.column,line:k.line-1}));h.addSource&&
!a.source&&(a.source=c.slice(a.start,a.end))}});m.start=m.body[0].start;m.end=yh.arr.last(m.body).end;h.addSource&&(m.source=c);m.body[0].loc&&n&&(m.loc=new n(h,m.body[0].loc.start,yh.arr.last(m.body).loc.end));return m};yh.parse=kl;yh.arr=Gf;yh.acorn=Hr;yh.loose=YL;yh.walk=sq;yh.addAstIndex=oC;yh.findNodesIncluding=WG;yh.custom=yu;yh.AllNodesVisitor=Ir;yh.walk=sq;yh.walk=sq;yh.parse=kl;yh.parse=kl;yh.parseFunction=Lt;yh.parseFunction=Lt;yh.fuzzyParse=rs;yh.fuzzyParse=rs;yh.addSource=XG;yh.addSource=
XG;yh.custom.addSource=yh.addSource;var hh=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitor-interface.js");hh.string=Dh;hh.Path=Qh;hh.BaseVisitor=Ae;hh.PrinterVisitor=GA;hh.ComparisonVisitor=wk;hh.stringify=Bk;hh.addAstIndex=oC;hh.parse=kl;hh.addSource=XG;hh.methods={withMozillaAstDo:function(c,h,f){var m=new hh.BaseVisitor,n=m.accept;m.accept=function(a,d,k){h=f(function(){n.call(m,a,d,k)},a,d,k);return a};m.accept(c,h,[]);return h},printAst:function(c,h){h=h||{};var f=h.printSource||
!1,m=h.printPositions||!1,n=h.printIndex||!1,a=[];if("string"===typeof c){var d=c;c=hh.parse(c)}else d=h.source||c.source;f&&!c.source&&(d||(d=hh.stringify(c),c=hh.parse(d)),hh.addSource(c,d));(new hh.PrinterVisitor).accept(c,{index:0,tree:a},[]);return hh.string.printTree(a[0],function(k){var b=k.path+":"+k.node.type,e=[];n&&e.push(k.index);m&&e.push(k.node.start+"-"+k.node.end);f&&(k=k.node.source||d.slice(k.node.start,k.node.end),k=hh.string.print(k.truncate(60).replace(/\n/g,"").replace(/\s+/g,
" ")),e.push(k));e.length&&(b+="("+e.join(",")+")");return b},function(k){return k.children},"  ")},compareAst:function(c,h){if(!c||!h)throw Error("node"+(c?"1":"2")+" not defined");var f={completePath:[],comparisons:{errors:[]}};(new hh.ComparisonVisitor).accept(c,h,f,[]);return f.comparisons.errors.length?f.comparisons.errors.pluck("msg"):null},pathToNode:function(c,h,f){c.astIndex||hh.addAstIndex(c);f=new hh.BaseVisitor;var m=null;(f.accept=function(n,a,d,k){if(!m)return a=a.concat(k),n.astIndex===
h&&(m={pathString:a.map(function(b){return"string"===typeof b?"."+b:"["+b+"]"}).join(""),path:a,node:n}),this["visit"+n.type](n,a,d,k)}).call(f,c,[],{},[]);return m},rematchAstWithSource:function(c,h,f,m){f=!!f;h=hh.parse(h,f?{locations:!0}:void 0);var n=new hh.BaseVisitor;m&&(h=hh.Path(m).get(h));n.accept=function(a,d,k){k=k||[];var b=k.reduce(function(e,l){return e[l]},c);b.start=a.start;b.end=a.end;f&&(b.loc=a.loc);return this["visit"+a.type](a,d,k)};n.accept(h)}};hh.withMozillaAstDo=hh.methods.withMozillaAstDo;
hh.printAst=hh.methods.printAst;hh.compareAst=hh.methods.compareAst;hh.pathToNode=hh.methods.pathToNode;hh.rematchAstWithSource=hh.methods.rematchAstWithSource;var ox=hh.withMozillaAstDo,uE=hh.printAst,vE=hh.compareAst,wE=hh.pathToNode,xE=hh.rematchAstWithSource;hh.BaseVisitor=Ae;hh.BaseVisitor=Ae;hh.withMozillaAstDo=ox;hh.withMozillaAstDo=ox;hh.printAst=uE;hh.printAst=uE;hh.compareAst=vE;hh.compareAst=vE;hh.pathToNode=wE;hh.pathToNode=wE;hh.rematchAstWithSource=xE;hh.rematchAstWithSource=xE;var ff=
lively.FreezerRuntime.recorderFor("lively.ast/lib/nodes.js");ff.isIdentifier=YG;ff.id=pC;ff.literal=ZG;ff.exprStmt=qC;ff.returnStmt=rC;ff.empty=$G;ff.binaryExpr=aH;ff.funcExpr=sC;ff.funcCall=oz;ff.varDecl=tC;ff.member=uC;ff.memberChain=vC;ff.assign=bH;ff.block=wC;ff.program=xC;ff.tryStmt=yC;ff.prop=cH;ff.objectLiteral=dH;ff.ifStmt=eH;ff.forIn=fH;ff.conditional=gH;ff.logical=hH;ff.isIdentifier=YG;ff.isIdentifier=YG;ff.id=pC;ff.id=pC;ff.literal=ZG;ff.literal=ZG;ff.objectLiteral=dH;ff.objectLiteral=
dH;ff.prop=cH;ff.prop=cH;ff.exprStmt=qC;ff.exprStmt=qC;ff.returnStmt=rC;ff.returnStmt=rC;ff.empty=$G;ff.empty=$G;ff.binaryExpr=aH;ff.binaryExpr=aH;ff.funcExpr=sC;ff.funcExpr=sC;ff.funcCall=oz;ff.funcCall=oz;ff.varDecl=tC;ff.varDecl=tC;ff.member=uC;ff.member=uC;ff.memberChain=vC;ff.memberChain=vC;ff.assign=bH;ff.assign=bH;ff.block=wC;ff.block=wC;ff.program=xC;ff.program=xC;ff.tryStmt=yC;ff.tryStmt=yC;ff.ifStmt=eH;ff.ifStmt=eH;ff.forIn=fH;ff.forIn=fH;ff.conditional=gH;ff.conditional=gH;ff.logical=hH;
ff.logical=hH;ff.identifierRe=/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;var Ys=Object.freeze({__proto__:null,isIdentifier:YG,id:pC,literal:ZG,objectLiteral:dH,prop:cH,exprStmt:qC,returnStmt:rC,empty:$G,binaryExpr:aH,funcExpr:sC,funcCall:oz,varDecl:tC,member:uC,memberChain:vC,assign:bH,block:wC,program:xC,tryStmt:yC,ifStmt:eH,forIn:fH,conditional:gH,logical:hH}),Sd=lively.FreezerRuntime.recorderFor("lively.ast/lib/query.js");Sd.scopes=zC;Sd.nodesAtIndex=iH;Sd.scopesAtIndex=jH;Sd.scopeAtIndex=
kH;Sd.scopesAtPos=lH;Sd.nodesInScopeOf=mH;Sd.declarationsOfScope=nH;Sd.declarationsWithIdsOfScope=function(c){var h=Sd.arr.compact(Sd.helpers.declIds(c.params).concat(c.catches)),f=[].concat($jscomp.arrayFromIterable(c.node.id&&c.node.id.name?[c.node]:[]),$jscomp.arrayFromIterable(Sd.arr.filter(c.funcDecls,function(m){return m.id})),$jscomp.arrayFromIterable(Sd.arr.filter(c.classDecls,function(m){return m.id})));return h.map(function(m){return[m,m]}).concat(f.map(function(m){return[m,m.id]})).concat(Sd.helpers.varDecls(c)).concat(c.importSpecifiers.map(function(m){return[Sd.statementOf(c.node,
m),m]}))};Sd._declaredVarNames=oH;Sd._findJsLintGlobalDeclarations=pH;Sd.topLevelFuncDecls=AC;Sd.resolveReference=u_;Sd.resolveReferences=qH;Sd.refWithDeclAt=rH;Sd.topLevelDeclsAndRefs=BC;Sd.findGlobalVarRefs=sH;Sd.findNodesIncludingLines=tH;Sd.__varDeclIdsFor=function(c,h){for(var f=[],m=$jscomp.makeIterator(c.params),n=m.next();!n.done;n=m.next())n=n.value,n.name===h&&f.push(n);m=$jscomp.makeIterator(c.funcDecls);for(n=m.next();!n.done;n=m.next())n=n.value,n.id&&n.id.name===h&&f.push(n.id);m=$jscomp.makeIterator(c.classDecls);
for(n=m.next();!n.done;n=m.next())n=n.value,n.id&&n.id.name===h&&f.push(n.id);m=$jscomp.makeIterator(c.importSpecifiers);for(n=m.next();!n.done;n=m.next())n=n.value,n.name===h&&f.push(n);c=$jscomp.makeIterator(Sd.helpers.varDeclIds(c));for(n=c.next();!n.done;n=c.next())n=n.value,n.name===h&&f.push(n);return f};Sd.findReferencesAndDeclsInScope=CC;Sd.findDeclarationClosestToIndex=uH;Sd.nodesAt=vH;Sd.statementOf=DC;Sd.imports=wH;Sd.exports=xH;Sd.arr=Gf;Sd.chain=so;Sd.num=zl;Sd.tree=Us;Sd.fun=Vl;Sd.obj=
eg;Sd.BaseVisitor=Ae;Sd.ScopeVisitor=Ij;Sd.FindToplevelFuncDeclVisitor=px;Sd.withMozillaAstDo=ox;Sd.parse=kl;Sd.acorn=Hr;Sd.walk=sq;Sd.custom=yu;Sd.stringify=Bk;Sd.helpers={declIds:function(c,h){h=void 0===h?[]:h;for(var f=0;f<c.length;f++){var m=c[f];if(m)if("Identifier"===m.type)h.push(m);else if("RestElement"===m.type)h.push(m.argument);else if("AssignmentPattern"===m.type)Sd.helpers.declIds([m.left],h);else if("ObjectPattern"===m.type)for(var n=0;n<m.properties.length;n++){var a=m.properties[n];
Sd.helpers.declIds([a.value||a],h)}else"ArrayPattern"===m.type&&Sd.helpers.declIds(m.elements,h)}return h},varDecls:function(c,h){h=void 0===h?[]:h;c=$jscomp.makeIterator(c.varDecls);for(var f=c.next();!f.done;f=c.next()){f=$jscomp.makeIterator(f.value.declarations);for(var m=f.next();!m.done;m=f.next()){m=m.value;for(var n=$jscomp.makeIterator(Sd.helpers.declIds([m.id])),a=n.next();!a.done;a=n.next())h.push([m,a.value])}}return h},varDeclIds:function(c,h){h=void 0===h?[]:h;c=$jscomp.makeIterator(c.varDecls);
for(var f=c.next();!f.done;f=c.next()){f=$jscomp.makeIterator(f.value.declarations);for(var m=f.next();!m.done;m=f.next())Sd.helpers.declIds([m.value.id],h)}return h},objPropertiesAsList:function(c,h,f,m){m=void 0===m?[]:m;c=$jscomp.makeIterator(c.properties);for(var n=c.next();!n.done;n=c.next()){n=n.value;var a=n.key.name,d={key:h.concat([a]),value:n.value};switch(n.value.type){case "ArrayExpression":case "ArrayPattern":f||m.push(d);for(d=0;d<n.value.elements.length;d++)Sd.helpers.objPropertiesAsList(n.value.elements[d],
h.concat([a,d]),f,m);break;case "ObjectExpression":case "ObjectPattern":f||m.push(d);Sd.helpers.objPropertiesAsList(n.value,h.concat([a]),f,m);break;case "AssignmentPattern":f||m.push(d);Sd.helpers.objPropertiesAsList(n.left,h.concat([a]),f,m);break;default:m.push(d)}}return m},isDeclaration:function(c){return"FunctionDeclaration"===c.type||"VariableDeclaration"===c.type||"ClassDeclaration"===c.type}};Sd.knownGlobals="closed true false null undefined arguments Object Function Array Number parseFloat parseInt Infinity NaN Boolean String Symbol Date Promise RegExp Error EvalError RangeError ReferenceError SyntaxError TypeError URIError JSON Math console ArrayBuffer Uint8Array Int8Array Uint16Array Int16Array Uint32Array Int32Array Float32Array Float64Array Uint8ClampedArray DataView Map Set WeakMap WeakSet Proxy Reflect decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape eval isFinite isNaN Intl navigator window document Blob setTimeout clearTimeout setInterval clearInterval requestAnimationFrame cancelAnimationFrame btoa atob sessionStorage localStorage $world lively System customElements performance addEventListener closed".split(" ");
Sd.globalDeclRe=/^\s*global\s*/;Sd._stmtTypes="EmptyStatement BlockStatement ExpressionStatement IfStatement BreakStatement ContinueStatement WithStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement ForOfStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration ImportDeclaration ImportDeclaration ExportNamedDeclaration ExportDefaultDeclaration ExportAllDeclaration".split(" ");var ZL=Sd.helpers,tV=Sd.knownGlobals;
Sd.helpers=ZL;Sd.helpers=ZL;Sd.knownGlobals=tV;Sd.knownGlobals=tV;Sd.scopes=zC;Sd.scopes=zC;Sd.nodesAtIndex=iH;Sd.nodesAtIndex=iH;Sd.scopesAtIndex=jH;Sd.scopesAtIndex=jH;Sd.scopeAtIndex=kH;Sd.scopeAtIndex=kH;Sd.scopesAtPos=lH;Sd.scopesAtPos=lH;Sd.nodesInScopeOf=mH;Sd.nodesInScopeOf=mH;Sd.declarationsOfScope=nH;Sd.declarationsOfScope=nH;Sd._declaredVarNames=oH;Sd._declaredVarNames=oH;Sd._findJsLintGlobalDeclarations=pH;Sd._findJsLintGlobalDeclarations=pH;Sd.topLevelDeclsAndRefs=BC;Sd.topLevelDeclsAndRefs=
BC;Sd.topLevelFuncDecls=AC;Sd.topLevelFuncDecls=AC;Sd.findGlobalVarRefs=sH;Sd.findGlobalVarRefs=sH;Sd.findNodesIncludingLines=tH;Sd.findNodesIncludingLines=tH;Sd.findReferencesAndDeclsInScope=CC;Sd.findReferencesAndDeclsInScope=CC;Sd.findDeclarationClosestToIndex=uH;Sd.findDeclarationClosestToIndex=uH;Sd.nodesAt=vH;Sd.nodesAt=vH;Sd.statementOf=DC;Sd.statementOf=DC;Sd.resolveReferences=qH;Sd.resolveReferences=qH;Sd.refWithDeclAt=rH;Sd.refWithDeclAt=rH;Sd.imports=wH;Sd.imports=wH;Sd.exports=xH;Sd.exports=
xH;var wq=Object.freeze({__proto__:null,helpers:ZL,knownGlobals:tV,scopes:zC,nodesAtIndex:iH,scopesAtIndex:jH,scopeAtIndex:kH,scopesAtPos:lH,nodesInScopeOf:mH,declarationsOfScope:nH,_declaredVarNames:oH,_findJsLintGlobalDeclarations:pH,topLevelDeclsAndRefs:BC,topLevelFuncDecls:AC,findGlobalVarRefs:sH,findNodesIncludingLines:tH,findReferencesAndDeclsInScope:CC,findDeclarationClosestToIndex:uH,nodesAt:vH,statementOf:DC,resolveReferences:qH,refWithDeclAt:rH,imports:wH,exports:xH});Ma("bL",wq);var uo=
lively.FreezerRuntime.recorderFor("lively.ast/lib/object-spread-transform.js");uo.objectSpreadTransform=pz;uo.Visitor=Ae;uo.funcCall=oz;uo.member=uC;var $L=function(){return uo.Visitor.apply(this,arguments)||this};$jscomp.inherits($L,uo.Visitor);$L.prototype.accept=function(c,h,f){"ObjectExpression"===c.type&&(c=this.transformSpreadElement(c));return uo.Visitor.prototype.accept.call(this,c,h,f)};$L.prototype.transformSpreadElement=function(c){var h=[],f=[h];c.properties.forEach(function(m){"SpreadElement"!==
m.type?(m.shorthand=!1,h.push(m)):(f.push(m),h=[],f.push(h))});if(1===f.length)return c;h.length||f.pop();return uo.funcCall.apply(uo,[uo.member("Object","assign")].concat($jscomp.arrayFromIterable(f.map(function(m){return"SpreadElement"===m.type?m.argument:{properties:m,type:"ObjectExpression"}}))))};uo.ObjectSpreadTransformer=$L;uo.default=pz;var pe=lively.FreezerRuntime.recorderFor("lively.ast/lib/transform.js");pe._node2string=function(c){return c.source||pe.stringify(c)};pe._findIndentAt=function(c,
h){var f=pe.string.peekLeft(c,h,/\s+$/);c="number"===typeof f?c.slice(f,h):"";"\n"===c[0]&&(c=c.slice(1));return c};pe._applyChanges=function(c,h){for(var f=0;f<c.length;f++){var m=c[f];if("del"===m.type)h=h.slice(0,m.pos)+h.slice(m.pos+m.length);else if("add"===m.type)h=h.slice(0,m.pos)+m.string+h.slice(m.pos);else throw Error("Unexpected change "+pe.obj.inspect(m));}return h};pe._compareNodesForReplacement=yH;pe.replaceNode=zH;pe.replaceNodes=AH;pe.replace=BH;pe.__findVarDecls=v_;pe.oneDeclaratorPerVarDecl=
CH;pe.oneDeclaratorForVarsInDestructoring=DH;pe.returnLastStatement=EH;pe.wrapInFunction=FH;pe.wrapInStartEndCall=GH;pe.transformSingleExpression=HH;pe.arr=Gf;pe.obj=eg;pe.string=Dh;pe.chain=so;pe.Path=Qh;pe.helpers=ZL;pe.scopes=zC;pe.topLevelDeclsAndRefs=BC;pe.topLevelFuncDecls=AC;pe.parse=kl;pe.fuzzyParse=rs;pe.objectSpreadTransform=pz;pe.varDecl=tC;pe.memberChain=vC;pe.id=pC;pe.exprStmt=qC;pe.funcCall=oz;pe.returnStmt=rC;pe.tryStmt=yC;pe.program=xC;pe.block=wC;pe.funcExpr=sC;pe.stringify=Bk;pe.isProbablySingleExpressionRe=
/^\s*(\{|function\s*\()/;pe.replaceNode=zH;pe.replaceNode=zH;pe.replaceNodes=AH;pe.replaceNodes=AH;pe.replace=BH;pe.replace=BH;pe._compareNodesForReplacement=yH;pe._compareNodesForReplacement=yH;pe.oneDeclaratorPerVarDecl=CH;pe.oneDeclaratorPerVarDecl=CH;pe.oneDeclaratorForVarsInDestructoring=DH;pe.oneDeclaratorForVarsInDestructoring=DH;pe.returnLastStatement=EH;pe.returnLastStatement=EH;pe.wrapInFunction=FH;pe.wrapInFunction=FH;pe.wrapInStartEndCall=GH;pe.wrapInStartEndCall=GH;pe.transformSingleExpression=
HH;pe.transformSingleExpression=HH;pe.objectSpreadTransform=pz;pe.objectSpreadTransform=pz;var qx=Object.freeze({__proto__:null,replaceNode:zH,replaceNodes:AH,replace:BH,_compareNodesForReplacement:yH,oneDeclaratorPerVarDecl:CH,oneDeclaratorForVarsInDestructoring:DH,returnLastStatement:EH,wrapInFunction:FH,wrapInStartEndCall:GH,transformSingleExpression:HH,objectSpreadTransform:pz});Ma("bx",qx);var Uf=lively.FreezerRuntime.recorderFor("lively.ast/lib/comments.js");Uf.getCommentPrecedingNode=IH;Uf.extractComments=
JH;Uf.obj=eg;Uf.string=Dh;Uf.Path=Qh;Uf.chain=so;Uf.arr=Gf;Uf.fun=Vl;Uf.parse=kl;Uf.statementOf=DC;Uf.Visitor=Ae;Uf.stringify=Bk;Uf.getCommentPrecedingNode=IH;Uf.getCommentPrecedingNode=IH;Uf.extractComments=JH;Uf.extractComments=JH;var aM=Object.freeze({__proto__:null,getCommentPrecedingNode:IH,extractComments:JH}),eh=lively.FreezerRuntime.recorderFor("lively.ast/lib/code-categorizer.js");eh.findDecls=KH;eh.es6ClassDef=function(c){if("ClassDeclaration"!==c.type)return null;var h={type:"class-decl",
name:c.id.name,node:c,children:[]};h.children.push.apply(h.children,$jscomp.arrayFromIterable(eh.arr.compact(c.body.body.map(function(f,m){return eh.es6ClassMethod(f,h,m)}))));return[h].concat($jscomp.arrayFromIterable(h.children))};eh.es6ClassMethod=function(c,h,f){if("MethodDefinition"!==c.type)return null;var m;"constructor"===c.kind?m="class-constructor":"method"===c.kind?m=c.static?"class-class-method":"class-instance-method":"get"===c.kind?m=c.static?"class-class-getter":"class-instance-getter":
"set"===c.kind&&(m=c.static?"class-class-setter":"class-instance-setter");return"class-instance-getter"==m&&"commands"==c.key.name?eh.parseCommandsMethod(c,h,m):"class-class-getter"==m&&"properties"==c.key.name?eh.parsePropertiesMethod(c,h,m):m?{type:m,parent:h,node:c,name:c.key.name}:null};eh.parsePropertiesMethod=function(c,h,f){var m={type:f,parent:h,node:c,name:c.key.name};try{var n=[];m.node.value.body.body[0].argument.properties.forEach(function(a){n.push({type:a.type,parent:m,node:a,name:a.key?
a.key.name:a.argument.arguments[0].value})});m.children=n}finally{return m}};eh.parseCommandsMethod=function(c,h,f){var m={type:f,parent:h,node:c,name:c.key.name};try{var n=[];if(m.node.value.body.body){var a=m.node.value.body.body[0].argument.elements;a&&(a.forEach(function(d){n.push({type:d.type,parent:m,node:d,name:d.properties[0].value.value})}),m.children=n)}}finally{return m}};eh.varDefs=function(c){if("VariableDeclaration"!==c.type)return null;var h=[],f={};c=$jscomp.makeIterator(eh.withVarDeclIds(c));
for(var m=c.next();!m.done;f={$jscomp$loop$prop$def$2706:f.$jscomp$loop$prop$def$2706},m=c.next())if(m=m.value,f.$jscomp$loop$prop$def$2706={name:m.id.name,node:m.node,type:"var-decl"},h.push(f.$jscomp$loop$prop$def$2706),f.$jscomp$loop$prop$def$2706.node.init){for(m=f.$jscomp$loop$prop$def$2706.node.init;"AssignmentExpression"===m.type;)m=m.right;if("ObjectExpression"===m.type)f.$jscomp$loop$prop$def$2706.type="object-decl",f.$jscomp$loop$prop$def$2706.children=eh.objectKeyValsAsDefs(m).map(function(n){return function(a){return Object.assign({},
a,{type:"object-"+a.type,parent:n.$jscomp$loop$prop$def$2706})}}(f)),h.push.apply(h,$jscomp.arrayFromIterable(f.$jscomp$loop$prop$def$2706.children));else{if("ArrayExpression"===m.type){f.$jscomp$loop$prop$def$2706.type="array-decl";try{f.$jscomp$loop$prop$def$2706.children=eh.arrayEntriesAsDefs(m).map(function(n){return function(a){return Object.assign({},a,{type:"object-"+a.type,parent:n.$jscomp$loop$prop$def$2706})}}(f)),h.push.apply(h,$jscomp.arrayFromIterable(f.$jscomp$loop$prop$def$2706.children))}finally{continue}}if(m=
eh.someObjectExpressionCall(m,f.$jscomp$loop$prop$def$2706))f.$jscomp$loop$prop$def$2706.children=m.map(function(n){return function(a){return Object.assign({},a,{parent:n.$jscomp$loop$prop$def$2706})}}(f)),h.push.apply(h,$jscomp.arrayFromIterable(f.$jscomp$loop$prop$def$2706.children))}}return h};eh.funcDef=function(c){return"FunctionStatement"!==c.type&&"FunctionDeclaration"!==c.type||!c.id?null:[{name:c.id.name,node:c,type:"function-decl"}]};eh.someObjectExpressionCall=function(c,h){"ExpressionStatement"===
c.type&&(c=c.expression);return"CallExpression"!==c.type?null:(c=c.arguments.find(function(f){return"ObjectExpression"===f.type}))?eh.objectKeyValsAsDefs(c,h):null};eh.functionWrapper=function(c,h){if(!eh.isFunctionWrapper(c))return null;var f=eh.Path("expression.arguments.0").get(c);h=f&&"FunctionExpression"===f.type&&5<eh.string.lines(f.source||"").length?eh.findDecls(f,h):eh.findDecls(eh.Path("expression.callee").get(c),h);var m={node:c,name:eh.Path("expression.callee.id.name").get(c)};h.forEach(function(n){return n.parent||
(n.parent=m)});return h};eh.unwrapExport=function(c){return"ExportNamedDeclaration"!==c.type&&"ExportDefaultDeclaration"!==c.type||!c.declaration?c:c.declaration};eh.objectKeyValsAsDefs=function(c,h){return c.properties.map(function(f){return{name:f.key.name||f.key.value,type:"FunctionExpression"===f.value.type?"method":"property",node:f,parent:h}})};eh.arrayEntriesAsDefs=function(c,h){return c.elements.map(function(f){return{name:f.value||f.properties[0].value.value,type:f.type,node:f,parent:h}})};
eh.isFunctionWrapper=function(c){return"CallExpression"===eh.Path("expression.type").get(c)&&"FunctionExpression"===eh.Path("expression.callee.type").get(c)};eh.declIds=yQ;eh.withVarDeclIds=function(c){return c.declarations.map(function(h){!h.source&&h.init&&(h.source=h.id.name+" = "+h.init.source);return{node:h,id:h.id}})};eh.parse=kl;eh.arr=Gf;eh.Path=Qh;eh.string=Dh;eh.obj=eg;eh.findDecls=KH;eh.findDecls=KH;var yE=Object.freeze({__proto__:null,findDecls:KH}),mg=lively.FreezerRuntime.recorderFor("lively.ast/index.js");
mg.isValidIdentifier=qz;mg.BaseVisitor=Ae;mg.BaseVisitor=Ae;mg.withMozillaAstDo=ox;mg.withMozillaAstDo=ox;mg.printAst=uE;mg.printAst=uE;mg.compareAst=vE;mg.compareAst=vE;mg.pathToNode=wE;mg.pathToNode=wE;mg.rematchAstWithSource=xE;mg.rematchAstWithSource=xE;mg.ReplaceManyVisitor=Dp;mg.ReplaceManyVisitor=Dp;mg.ReplaceVisitor=vq;mg.ReplaceVisitor=vq;mg.AllNodesVisitor=Ir;mg.AllNodesVisitor=Ir;mg.parse=kl;mg.parse=kl;mg.parseFunction=Lt;mg.parseFunction=Lt;mg.fuzzyParse=rs;mg.fuzzyParse=rs;mg.acorn=
Hr;mg.walk=sq;mg.custom=yu;mg.stringify=Bk;mg.escodegen=IA;mg.escodegen=IA;mg.escodegen=IA;mg.acorn=Hr;mg.acorn=Hr;mg.walk=sq;mg.walk=sq;mg.nodes=Ys;mg.query=wq;mg.transform=qx;mg.comments=aM;mg.categorizer=yE;mg.query=wq;mg.query=wq;mg.transform=qx;mg.transform=qx;mg.comments=aM;mg.comments=aM;mg.categorizer=yE;mg.categorizer=yE;mg.stringify=Bk;mg.stringify=Bk;mg.nodes=Ys;mg.nodes=Ys;mg.custom=yu;mg.custom=yu;mg.isValidIdentifierRe=/^(?!(?:do|if|in|for|let|new|try|var|case|default|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/;
mg.isValidIdentifier=qz;mg.isValidIdentifier=qz;mg.parse=kl;mg.Node=mg.parse("").constructor;Object.defineProperty(mg.Node.prototype,"__serialize__",{configurable:!0,value:function(){return{__expr__:"("+JSON.stringify(this)+")"}}});var bM=Object.freeze({__proto__:null,BaseVisitor:Ae,withMozillaAstDo:ox,printAst:uE,compareAst:vE,pathToNode:wE,rematchAstWithSource:xE,ReplaceManyVisitor:Dp,ReplaceVisitor:vq,AllNodesVisitor:Ir,parse:kl,parseFunction:Lt,fuzzyParse:rs,escodegen:IA,acorn:Hr,walk:sq,query:wq,
transform:qx,comments:aM,categorizer:yE,stringify:Bk,nodes:Ys,custom:yu,isValidIdentifier:qz});Ma("b0",bM);var fh=lively.FreezerRuntime.recorderFor("lively.vm/lib/util.js");fh.getGlobal=Mt;fh.signatureOf=LH;fh.isClass=zQ;fh.pluck=MH;fh.printSymbol=NH;fh.safeToString=EC;fh.printEvalResult=FC;fh.obj=eg;fh.string=Dh;fh.getGlobal=Mt;fh.getGlobal=Mt;fh.signatureOf=LH;fh.signatureOf=LH;fh.isClass=zQ;fh.isClass=zQ;fh.pluck=MH;fh.pluck=MH;fh.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(c){return"symbol"===
typeof Symbol[c]}).reduce(function(c,h){return c.set(Symbol[h],"Symbol."+h)},new Map)}();fh.symMatcher=/^Symbol\((.*)\)$/;fh.printSymbol=NH;fh.printSymbol=NH;fh.safeToString=EC;fh.safeToString=EC;fh.printEvalResult=FC;fh.printEvalResult=FC;var uV=function(){function c(n,a){"object"===typeof a&&(a=a.maxDepth||2);if(!n)return String(n);if("string"===typeof n)return a=n.includes("\n")?"`":'"',n=n.split("\n").slice(0,1E3).join("\n"),a+n+a;if(n instanceof Error)return n.stack||fh.safeToString(n);if(!fh.obj.isObject(n))return fh.safeToString(n);
try{var d=fh.obj.inspect(n,{customPrinter:f,maxNumberOfKeys:100,maxDepth:a,printFunctionSource:!0})}catch(k){}return"{}"===d?fh.safeToString(n):d}function h(n,a){if("string"===typeof n||Array.isArray(n)||!m||"function"!==typeof n[m])return a;var d="function"===typeof n.entries,k=d?n.entries():n[m](),b=[];a=d?"{":"[";var e=d?"}":"]";n=n.constructor&&n.constructor.name||"Iterable";for(var l=0,p;10>l;l++){p=k.next();if(p.done)break;b.push(p.value)}k=b.map(function(u){return d?String(u[0])+": "+String(u[1]):
c(u,2)}).join(", ");return n+"("+a+k+e+")"}function f(n,a,d){if(!n)return a;if("symbol"===typeof n)return fh.printSymbol(n);if("string"===typeof n)return fh.string.print(fh.string.truncate(n,100));if(n.isMorph)return fh.safeToString(n);if(n instanceof Promise)return"Promise()";if("undefined"!==typeof fh.Node&&n instanceof fh.Node||"undefined"!==typeof fh.ImageData&&n instanceof fh.ImageData)return fh.safeToString(n);var k=n.length||n.byteLength;if(void 0!==k&&10<k&&n.slice)return"["+("string"===typeof n||
n.byteLength?fh.safeToString(n.slice(0,10)):n.slice(0,10).map(d))+",...]";n=h(n,a);return n!==a?n:a}var m="undefined"!==typeof Symbol&&Symbol.iterator;return c}();fh.printInspectEvalValue=uV;fh.printInspectEvalValue=uV;fh.printInspectEvalValue=uV;var ti=lively.FreezerRuntime.recorderFor("lively.vm/lib/completions.js");ti.getObjectForCompletion=OH;ti.propertyExtract=function(c,h,f){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h).map(ti.printSymbol)).filter(function(m){return-1===
c.indexOf(m)}).map(f).filter(function(m){return!!m}).sort(function(m,n){return m.name<n.name?-1:m.name>n.name?1:0})};ti.getMethodsOf=function(c,h){return ti.propertyExtract(c,h,function(f){return h.__lookupGetter__&&h.__lookupGetter__(f)||"function"!==typeof h[f]?null:{name:f,completion:ti.signatureOf(f,h[f])}})};ti.getAttributesOf=function(c,h){return ti.propertyExtract(c,h,function(f){return h.__lookupGetter__&&!h.__lookupGetter__(f)&&"function"===typeof h[f]?null:{name:f,completion:f}})};ti.getProtoChain=
function(c){for(var h=[];c;)h.push(c),c=c.__proto__;return h};ti.getDescriptorOf=function(c,h){function f(m,n){m.length>n&&(m=m.slice(0,n)+"...");return m.replace(/\n/g,"").replace(/\s+/g," ")}if(c===h){if("function"!==typeof c)return f(ti.safeToString(c),50);h=c.toString();h=f(h.slice(h.indexOf("{")+1,h.lastIndexOf("}")),50);return ti.signatureOf(c.displayName||c.name||"function",c)+" {"+h+"}"}return(c=h.hasOwnProperty("constructor")&&h.constructor)?"string"===typeof c.type&&c.type.length?f(c.type,
50):"string"===typeof c.name&&c.name.length?f(c.name,50):"anonymous class":"prototype"};ti.getCompletionsOfObj=function(c,h){try{var f=[];var m=ti.getProtoChain(c).map(function(a){var d=ti.getDescriptorOf(c,a);a=ti.getMethodsOf(f,a).concat(ti.getAttributesOf(f,a));f=f.concat(ti.pluck(a,"name"));return[d,ti.pluck(a,"completion")]})}catch(a){var n=a}h(n,m)};ti.descriptorsOfObjAndProtoProperties=function(c){var h=[];return ti.getProtoChain(c).map(function(f){var m=ti.getDescriptorOf(c,f);f=ti.getMethodsOf(h,
f).concat(ti.getAttributesOf(h,f));h=h.concat(ti.pluck(f,"name"));return[m,ti.pluck(f,"completion")]})};ti.getCompletions=PH;ti.lang=C8;ti.signatureOf=LH;ti.pluck=MH;ti.safeToString=EC;ti.printSymbol=NH;ti.getObjectForCompletion=OH;ti.getObjectForCompletion=OH;ti.getCompletions=PH;ti.getCompletions=PH;var zE=Object.freeze({__proto__:null,getObjectForCompletion:OH,getCompletions:PH});Ma("au",zE);var qc=lively.FreezerRuntime.recorderFor("lively.source-transform/capturing.js");qc.rewriteToCaptureTopLevelVariables=
GC;qc.transformImportMeta=function(c,h){return qc.ReplaceVisitor.run(c,function(f){return"MetaProperty"==f.type&&"import"==f.meta.name?h.classToFunction.currentModuleAccessor?qc.nodes.objectLiteral(["url",qc.nodes.member(h.classToFunction.currentModuleAccessor,"id")]):qc.parse('({url: eval("_context").id})').body[0].expression:f})};qc.rewriteToRegisterModuleToCaptureSetters=QH;qc.clearEmptyExports=function(c,h){h=qc.topLevelDeclsAndRefs(c);h=$jscomp.makeIterator(h.scope.exportDecls);for(var f=h.next();!f.done;f=
h.next())f=f.value,f.declaration||!f.specifiers||f.specifiers.length||qc.arr.remove(c.body,f);return c};qc.replaceRefs=function(c,h){var f=qc.topLevelDeclsAndRefs(c),m=f.refs.filter(function(a){return qc.shouldRefBeCaptured(a,f,h)}),n=[];c=qc.ReplaceVisitor.run(c,function(a,d){if("Property"===a.type&&m.includes(a.key)&&a.shorthand)return qc.prop(qc.id(a.key.name),a.value);if("ExportNamedDeclaration"===a.type){d=a.declaration;var k=a.specifiers;d&&(d.id?n.push(d.id):d.declarations&&n.push.apply(n,
$jscomp.arrayFromIterable(d.declarations.map(function(b){return b.id}))));k&&k.forEach(function(b){return n.push(b.local)});return a}return"AssignmentExpression"===a.type&&m.includes(a.left)&&h.declarationWrapper?Object.assign({},a,{right:qc.declarationWrapperCall(h.declarationWrapper,null,qc.literal(a.left.name),qc.literal("assignment"),a.right,h.captureObj,h)}):a});return qc.ReplaceVisitor.run(c,function(a,d,k){return m.includes(a)&&!n.includes(a)?qc.member(h.captureObj,a):a})};qc.replaceVarDecls=
function(c,h){var f=qc.topLevelDeclsAndRefs(c);return qc.ReplaceManyVisitor.run(c,function(m){if(!f.varDecls.includes(m)||m.declarations.every(function(l){return!qc.shouldDeclBeCaptured(l,h)}))return m;for(var n=[],a=0;a<m.declarations.length;a++){var d=m.declarations[a];if(qc.shouldDeclBeCaptured(d,h)){var k=d.init||{operator:"||",type:"LogicalExpression",left:{computed:!1,object:h.captureObj,property:d.id,type:"MemberExpression"},right:{name:"undefined",type:"Identifier"}};k=h.declarationWrapper&&
d.id.name?qc.declarationWrapperCall(h.declarationWrapper,d,qc.literal(d.id.name),qc.literal(m.kind),k,h.captureObj,h):k;if(d.id.type.includes("Pattern")){var b=qc.generateUniqueName(f.declaredNames,"destructured_1"),e={type:"Identifier",name:b};d=qc.transformPattern(d.id,{parent:e,declaredNames:f.declaredNames}).map(function(l){return l[qc.annotationSym]&&l[qc.annotationSym].capture?qc.assignExpr(h.captureObj,l.declarations[0].id,h.declarationWrapper?qc.declarationWrapperCall(h.declarationWrapper,
null,qc.literal(l.declarations[0].id.name),qc.literal(m.kind),l.declarations[0].init,h.captureObj,h):l.declarations[0].init,!1):l});f.declaredNames.push(b);n.push.apply(n,$jscomp.arrayFromIterable([qc.varDecl(e,k,m.kind)].concat(d)))}else n.push(qc.assignExpr(h.captureObj,d.id,k,!1)),h.keepTopLevelVarDecls&&n.push(qc.varDecl(d.id,qc.member(h.captureObj,d.id)))}else n.push({type:"VariableDeclaration",kind:m.kind||"var",declarations:[d]})}return n})};qc.generateUniqueName=function(c,h){for(var f=1;-1<
c.indexOf(h);){if(1E3<f)throw Error("Endless loop searching for unique variable "+h);h=h.replace(/_[0-9]+$|$/,"_"+ ++f)}return h};qc.additionalIgnoredDecls=function(c,h){h=qc.topLevelDeclsAndRefs(c);for(var f=[],m=0;m<h.scope.varDecls.length;m++){var n=h.scope.varDecls[m],a=qc.Path(h.scope.varDeclPaths[m]).slice(0,-1).get(c);"ForStatement"!==a.type&&"ForInStatement"!==a.type&&"ForOfStatement"!==a.type&&"ExportNamedDeclaration"!==a.type||f.push.apply(f,$jscomp.arrayFromIterable(n.declarations))}return h.scope.catches.map(function(d){return d.name}).concat(f.map(function(d){return d.id.name}))};
qc.additionalIgnoredRefs=function(c,h){h=qc.topLevelDeclsAndRefs(c);for(var f=[],m=0;m<h.scope.varDecls.length;m++){var n=h.scope.varDecls[m],a=qc.Path(h.scope.varDeclPaths[m]).slice(0,-1).get(c);"ForStatement"!==a.type&&"ForInStatement"!==a.type&&"ForOfStatement"!==a.type||f.push.apply(f,$jscomp.arrayFromIterable(n.declarations))}return h.scope.catches.map(function(d){return d.name}).concat(qc.queryHelpers.declIds(f.map(function(d){return d.id})).map(function(d){return d.name}))};qc.shouldDeclBeCaptured=
function(c,h){return-1===h.excludeDecls.indexOf(c.id.name)&&(!h.includeDecls||-1<h.includeDecls.indexOf(c.id.name))};qc.shouldRefBeCaptured=function(c,h,f){if(h.scope.importSpecifiers.includes(c))return!1;for(var m=0;m<h.scope.exportDecls.length;m++){var n=h.scope.exportDecls[m];if(n.declarations&&n.declarations.includes(c)||n.declaration===c)return!1}return f.excludeRefs.includes(c.name)||f.includeRefs&&!f.includeRefs.includes(c.name)?!1:!0};qc.replaceClassDecls=function(c,h){if(h.classToFunction)return h.classToFunction.transform(c,
h.classToFunction);var f=qc.topLevelDeclsAndRefs(c);if(!f.classDecls.length)return c;for(var m=c.body.length-1;0<=m;m--){var n=c.body[m];n.id&&f.classDecls.includes(n)&&c.body.splice(m+1,0,qc.assignExpr(h.captureObj,n.id,n.id,!1))}return c};qc.splitExportDeclarations=function(c,h){h=c.body;for(var f=c.body=[],m=0;m<h.length;m++){var n=h[m];if("ExportNamedDeclaration"!==n.type||!n.declaration||"VariableDeclaration"!==n.declaration.type||1>=n.declaration.declarations.length)f.push(n);else for(var a=
n.declaration.declarations,d=0;d<a.length;d++)f.push({type:"ExportNamedDeclaration",specifiers:[],declaration:qc.varDecl(a[d].id,a[d].init,n.declaration.kind)})}return c};qc.insertCapturesForExportedImports=HC;qc.insertCapturesForExportDeclarations=function(c,h){for(var f=[],m=0;m<c.body.length;m++){var n=c.body[m];f.push(n);if(("ExportNamedDeclaration"===n.type||"ExportDefaultDeclaration"===n.type)&&n.declaration)if("ExportDefaultDeclaration"===n.type&&"Literal"===n.declaration.type){var a=n.declaration,
d=qc.generateUniqueName(qc.topLevelDeclsAndRefs(c).declaredNames,"$"+a.raw.split('"').join(""));n.declaration=qc.id(d);qc.arr.pushAt(f,qc.assignExpr(h.captureObj,d,a.raw,!1),f.indexOf(n))}else n.declaration.declarations?f.push.apply(f,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(k){var b=k.id;h.declarationWrapper&&(k.init.callee&&k.init.callee.name===h.declarationWrapper.name||(b=qc.declarationWrapperCall(h.declarationWrapper,k,qc.literal(k.id.name),qc.literal("assignment"),k.id,
h.captureObj,h)));return qc.assignExpr(h.captureObj,k.id,b,!1)}))):"FunctionDeclaration"!==n.declaration.type&&"ClassDeclaration"===n.declaration.type&&f.push(qc.assignExpr(h.captureObj,n.declaration.id,n.declaration.id,!1))}c.body=f;return c};qc.insertCapturesForImportDeclarations=function(c,h){c.body=c.body.reduce(function(f,m){return f.concat("ImportDeclaration"===m.type&&m.specifiers.length?[m].concat(m.specifiers.map(function(n){return qc.assignExpr(h.captureObj,n.local,n.local,!1)})):[m])},
[]);return c};qc.insertDeclarationsForExports=function(c,h){for(var f=qc.topLevelDeclsAndRefs(c),m=[],n=0;n<c.body.length;n++){var a=c.body[n];h.classToFunction&&"ExportDefaultDeclaration"===a.type&&a.declaration&&!a.declaration.type.includes("Declaration")&&("Identifier"===a.declaration.type||a.declaration.id)?m=m.concat([qc.varDeclOrAssignment(c,{type:"VariableDeclarator",id:a.declaration,init:qc.member(h.captureObj,a.declaration)}),a]):"ExportNamedDeclaration"!==a.type||!a.specifiers.length||a.source?
m.push(a):m=m.concat(a.specifiers.map(function(d){return f.declaredNames.includes(d.local.name)?null:qc.varDeclOrAssignment(c,{type:"VariableDeclarator",id:d.local,init:qc.member(h.captureObj,d.local)})}).filter(Boolean)).concat(a)}c.body=m;return c};qc.fixDefaultAsyncFunctionExportForRegeneratorBug=function(c,h){h=[];for(var f=0;f<c.body.length;f++){var m=c.body[f];"ExportDefaultDeclaration"===m.type&&"FunctionDeclaration"===m.declaration.type&&m.declaration.id&&m.declaration.async&&(h.push(m.declaration),
m.declaration={type:"Identifier",name:m.declaration.id.name});h.push(m)}c.body=h;return c};qc.es6ModuleTransforms=function(c,h){c.body=c.body.reduce(function(f,m){if("ExportNamedDeclaration"===m.type)if(m.source){var n=d=m.source;var a=m.specifiers.map(function(k){return{type:"ExpressionStatement",expression:qc.exportFromImport({type:"Literal",value:k.exported.name},{type:"Literal",value:k.local.name},d,h.moduleExportFunc,h.moduleImportFunc)}})}else a=m.declaration?(a=m.declaration.declarations)?
a.map(function(k){h.excludeDecls.push(k.id);return qc.varDecl(k.id,qc.assignExpr(h.captureObj,k.id,h.declarationWrapper?qc.declarationWrapperCall(h.declarationWrapper,null,qc.literal(k.id.name),qc.literal(m.declaration.kind),k,h.captureObj,h):k.init,!1),m.declaration.kind)}).concat(a.map(function(k){return qc.exportCallStmt(h.moduleExportFunc,k.id.name,k.id)})):[m.declaration].concat(qc.exportCallStmt(h.moduleExportFunc,m.declaration.id.name,m.declaration.id)):m.specifiers.map(function(k){return qc.exportCallStmt(h.moduleExportFunc,
k.exported.name,qc.shouldDeclBeCaptured({id:k.local},h)?qc.member(h.captureObj,k.local):k.local)});else if("ExportDefaultDeclaration"===m.type)a=m.declaration&&m.declaration.id?[m.declaration].concat(qc.exportCallStmt(h.moduleExportFunc,"default",m.declaration.id)):[qc.exportCallStmt(h.moduleExportFunc,"default",m.declaration)];else if("ExportAllDeclaration"===m.type){n={name:h.es6ExportFuncId+"__iterator__",type:"Identifier"};var d=m.source;a=[{type:"ForInStatement",body:{type:"ExpressionStatement",
expression:qc.exportFromImport(n,n,d,h.moduleExportFunc,h.moduleImportFunc)},left:{type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:n,init:null}]},right:qc.importCall(null,d,h.moduleImportFunc)}];h.excludeRefs.push(n.name);h.excludeDecls.push(n.name)}else a="ImportDeclaration"===m.type?m.specifiers.length?m.specifiers.map(function(k){return qc.varDeclAndImportCall(c,k.local,"ImportSpecifier"===k.type&&k.imported.name||"ImportDefaultSpecifier"===k.type&&"default"||
null,m.source,h.moduleImportFunc)}):qc.importCallStmt(null,m.source,h.moduleImportFunc):[m];return f.concat(a)},[]);return c};qc.putFunctionDeclsInFront=function(c,h){var f=qc.topLevelDeclsAndRefs(c).scope,m=f.funcDecls;if(!m.length)return c;for(var n=[],a=m.length;a--;){var d=m[a];if(d.id&&qc.shouldDeclBeCaptured(d,h)){var k=f.funcDeclPaths[a].slice(0,-1),b=qc.Path(k).get(f.node);k={type:"Identifier",name:d.id.name};var e=h.declarationWrapper?qc.declarationWrapperCall(h.declarationWrapper,d,qc.literal(k.name),
qc.literal("function"),k,h.captureObj,h):k,l=Object.assign({},d);Array.isArray(b)?b.splice(b.indexOf(d),1,qc.exprStmt(d.id)):"ExportNamedDeclaration"===b.type?(b=f.node.body.indexOf(b),-1<b&&f.node.body.splice(b,1,{type:"ExportNamedDeclaration",specifiers:[{type:"ExportSpecifier",exported:d.id,local:d.id}]})):"ExportDefaultDeclaration"===b.type&&(b.declaration=d.id);n.unshift(qc.assignExpr(h.captureObj,k,e,!1));n.unshift(l)}}c.body=n.concat(c.body);return c};qc.computeDefRanges=function(c,h){c=qc.topLevelDeclsAndRefs(c);
return qc.chain(c.scope.varDecls).pluck("declarations").flatten().value().concat(c.scope.funcDecls.filter(function(f){return f.id})).reduce(function(f,m){f[m.id.name]||(f[m.id.name]=[]);f[m.id.name].push({type:m.type,start:m.start,end:m.end});return f},{})};qc.transformPattern=function(c,h){return"ArrayPattern"===c.type?qc.transformArrayPattern(c,h):"ObjectPattern"===c.type?qc.transformObjectPattern(c,h):[]};qc.transformArrayPattern=function(c,h){for(var f=h.declaredNames,m=qc.annotationSym,n=[],
a=0;a<c.elements.length;a++){var d=c.elements[a];if("Identifier"===d.type)d=qc.varDecl(d,qc.member(h.parent,qc.id(a),!0)),d[m]={capture:!0},n.push(d);else if("RestElement"===d.type)d=qc.varDecl(d.argument,{type:"CallExpression",arguments:[{type:"Literal",value:a}],callee:qc.member(h.parent,qc.id("slice"),!1)}),d[m]={capture:!0},n.push(d);else if("AssignmentPattern"==d.type)d=qc.varDecl(d.left,qc.conditional(qc.binaryExpr(qc.member(h.parent,qc.id(a),!0),"===",qc.id("undefined")),d.right,qc.member(h.parent,
qc.id(a),!0))),d[m]={capture:!0},n.push(d);else{var k=qc.id(qc.generateUniqueName(f,h.parent.name+"$"+a)),b=qc.varDecl(k,qc.member(h.parent,a));f.push(k.name);n.push(b);n.push.apply(n,$jscomp.arrayFromIterable(qc.transformPattern(d,{parent:k,declaredNames:f})))}}return n};qc.transformObjectPattern=function(c,h){for(var f=h.declaredNames,m=qc.annotationSym,n=[],a=0;a<c.properties.length;a++){var d=c.properties[a];if("RestElement"==d.type){var k=c.properties.map(function(l){return l.key&&l.key.name}).filter(Boolean),
b=qc.nodes.varDecl(d.argument.name,qc.nodes.objectLiteral([])),e=qc.nodes.varDecl(d.argument.name,qc.id(d.argument.name));d=qc.nodes.exprStmt(qc.nodes.funcCall(qc.nodes.funcExpr({},[],qc.nodes.forIn("__key",h.parent,qc.nodes.block.apply(qc.nodes,[].concat($jscomp.arrayFromIterable(k.length?k.map(function(l){return qc.nodes.ifStmt(qc.nodes.binaryExpr(qc.nodes.id("__key"),"===",qc.nodes.literal(l)),{type:"ContinueStatement",label:null},null)}):[]),[qc.nodes.exprStmt(qc.nodes.assign(qc.nodes.member(d.argument.name,
qc.nodes.id("__key"),!0),qc.nodes.member(h.parent,qc.nodes.id("__key"),!0)))]))))));e[m]={capture:!0};n.push(b,e,d)}else"Identifier"==d.value.type?(b=qc.varDecl(d.value,qc.member(h.parent,d.key)),b[m]={capture:!0},n.push(b)):"AssignmentPattern"==d.value.type?(b=qc.varDecl(d.value.left,qc.conditional(qc.binaryExpr(qc.member(h.parent,d.key),"===",qc.id("undefined")),d.value.right,qc.member(h.parent,d.key))),b[m]={capture:!0},n.push(b)):(b=qc.id(qc.generateUniqueName(f,h.parent.name+"$"+d.key.name)),
e=qc.varDecl(b,qc.member(h.parent,d.key)),e[m]={capture:!1},f.push(b.name),n.push.apply(n,$jscomp.arrayFromIterable([e].concat(qc.transformPattern(d.value,{parent:b,declaredNames:f})))))}return n};qc.varDeclOrAssignment=function(c,h,f){return-1<qc.topLevelDeclsAndRefs(c).declaredNames.indexOf(h.id.name)?qc.exprStmt(qc.assign(h.id,h.init)):{declarations:[h],kind:f||"var",type:"VariableDeclaration"}};qc.assignExpr=function(c,h,f,m){return qc.exprStmt(qc.assign(qc.member(c,h,m),f||qc.id("undefined")))};
qc.exportFromImport=function(c,h,f,m,n){return qc.exportCall(m,c,qc.importCall(h,f,n))};qc.varDeclAndImportCall=function(c,h,f,m,n){return qc.varDecl(h,qc.importCall(f,m,n))};qc.importCall=function(c,h,f){"string"===typeof c&&(c=qc.literal(c));return{arguments:[h].concat(c||[]),callee:f,type:"CallExpression"}};qc.importCallStmt=function(c,h,f){return qc.exprStmt(qc.importCall(c,h,f))};qc.exportCall=function(c,h,f){"string"===typeof h&&(h=qc.literal(h));f=qc.obj.deepCopy(f);return qc.funcCall(c,h,
f)};qc.exportCallStmt=function(c,h,f){return qc.exprStmt(qc.exportCall(c,h,f))};qc.declarationWrapperCall=function(c,h,f,m,n,a,d){if(h){var k=[],b=!1;if(h["x-lively-object-meta"]){b=h["x-lively-object-meta"];h=b.start;var e=b.end,l=b.evalId,p=b.sourceAccessorName;b=!0;k.push("start",qc.nodes.literal(h),"end",qc.nodes.literal(e))}void 0===l&&d.hasOwnProperty("evalId")&&(l=d.evalId,b=!0);void 0===p&&d.hasOwnProperty("sourceAccessorName")&&(p=d.sourceAccessorName,b=!0);void 0!==l&&k.push("evalId",qc.nodes.literal(l));
p&&k.push("moduleSource",qc.nodes.id(p));if(b)return qc.funcCall(c,f,m,n,a,qc.nodes.objectLiteral(k))}return qc.funcCall(c,f,m,n,a)};qc.obj=eg;qc.string=Dh;qc.chain=so;qc.arr=Gf;qc.fun=Vl;qc.Path=Qh;qc.parse=kl;qc.stringify=Bk;qc.query=wq;qc.transform=qx;qc.nodes=Ys;qc.Visitor=Ae;qc.ReplaceManyVisitor=Dp;qc.ReplaceVisitor=vq;var Jr=qc.nodes;qc.member=Jr.member;qc.prop=Jr.prop;qc.varDecl=Jr.varDecl;qc.assign=Jr.assign;qc.id=Jr.id;qc.literal=Jr.literal;qc.exprStmt=Jr.exprStmt;qc.conditional=Jr.conditional;
qc.binaryExpr=Jr.binaryExpr;qc.funcCall=Jr.funcCall;var S8=qc.query;qc.topLevelDeclsAndRefs=S8.topLevelDeclsAndRefs;qc.queryHelpers=S8.helpers;var T8=qc.transform;qc.transformSingleExpression=T8.transformSingleExpression;qc.wrapInStartEndCall=T8.wrapInStartEndCall;qc.rewriteToCaptureTopLevelVariables=GC;qc.rewriteToCaptureTopLevelVariables=GC;qc.rewriteToRegisterModuleToCaptureSetters=QH;qc.rewriteToRegisterModuleToCaptureSetters=QH;qc.insertCapturesForExportedImports=HC;qc.insertCapturesForExportedImports=
HC;qc.annotationSym=Symbol("lively.ast-destructuring-transform");var AE=Object.freeze({__proto__:null,rewriteToCaptureTopLevelVariables:GC,rewriteToRegisterModuleToCaptureSetters:QH,insertCapturesForExportedImports:HC}),U8={__esModule:!0,default:function(){return{manipulateOptions:function(c,h){h.plugins.push("jsx")}}}},Nna=U8=U8["default"],Ona={},V8=Ona=Array.isArray,cM="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,W8={};W8="object"==typeof cM&&cM&&cM.Object===
Object&&cM;var Pna={},Qna="object"==typeof self&&self&&self.Object===Object&&self,rx=Pna=W8||Qna||Function("return this")(),Rna={},dM=Rna=rx.Symbol,Sna={},X8=Object.prototype,Tna=X8.hasOwnProperty,Una=X8.toString,BE=dM?dM.toStringTag:void 0,Vna=Sna=function(c){var h=Tna.call(c,BE),f=c[BE];try{c[BE]=void 0;var m=!0}catch(a){}var n=Una.call(c);m&&(h?c[BE]=f:delete c[BE]);return n},Y8={},Wna=Object.prototype.toString;Y8=function(c){return Wna.call(c)};var Xna={},Yna=Y8,Z8=dM?dM.toStringTag:void 0,vV=
Xna=function(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":Z8&&Z8 in Object(c)?Vna(c):Yna(c)},Zna={},wV=Zna=function(c){return null!=c&&"object"==typeof c},$na={},aoa=$na=function(c){return"string"==typeof c||!V8(c)&&wV(c)&&"[object String]"==vV(c)},boa={},xV=boa=function(c){return c},coa={},doa=coa=function(c){return"symbol"==typeof c||wV(c)&&"[object Symbol]"==vV(c)},eoa={},JA=eoa=function(c){var h=typeof c;return null!=c&&("object"==h||"function"==h)},foa={},goa=foa=function(c){if(!JA(c))return!1;
c=vV(c);return"[object Function]"==c||"[object GeneratorFunction]"==c||"[object AsyncFunction]"==c||"[object Proxy]"==c},$8={};$8=rx["__core-js_shared__"];var hoa={},yV=$8,a9=function(){var c=/[^.]+$/.exec(yV&&yV.keys&&yV.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),ioa=hoa=function(c){return!!a9&&a9 in c},b9={},joa=Function.prototype.toString;b9=function(c){if(null!=c){try{return joa.call(c)}catch(h){}return c+""}return""};var koa={},loa=b9,moa=/^\[object .+?Constructor\]$/,noa=RegExp("^"+
Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ooa=koa=function(c){return!JA(c)||ioa(c)?!1:(goa(c)?noa:moa).test(loa(c))},c9={};c9=function(c,h){return null==c?void 0:c[h]};var poa={},qoa=c9,d9=poa=function(c,h){c=qoa(c,h);return ooa(c)?c:void 0},roa={},e9=roa=function(){try{var c=d9(Object,"defineProperty");c({},"",{});return c}catch(h){}}(),soa={},f9=soa=function(c,
h){var f=-1,m=c.length;for(h||(h=Array(m));++f<m;)h[f]=c[f];return h},toa={},g9=Object.create,zV=toa=function(){function c(){}return function(h){if(!JA(h))return{};if(g9)return g9(h);c.prototype=h;h=new c;c.prototype=void 0;return h}}(),uoa={},voa=/^(?:0|[1-9]\d*)$/,woa=uoa=function(c,h){var f=typeof c;h=null==h?9007199254740991:h;return!!h&&("number"==f||"symbol"!=f&&voa.test(c))&&-1<c&&0==c%1&&c<h},xoa={},h9=xoa=function(c,h,f){switch(f.length){case 0:return c.call(h);case 1:return c.call(h,f[0]);
case 2:return c.call(h,f[0],f[1]);case 3:return c.call(h,f[0],f[1],f[2])}return c.apply(h,f)},i9={};i9=function(c){return function(){return c}};var yoa={},zoa=i9,Aoa=yoa=e9?function(c,h){return e9(c,"toString",{configurable:!0,enumerable:!1,value:zoa(h),writable:!0})}:xV,Boa={},Coa=Date.now,j9=Boa=function(c){var h=0,f=0;return function(){var m=Coa(),n=16-(m-f);f=m;if(0<n){if(800<=++h)return arguments[0]}else h=0;return c.apply(void 0,arguments)}},Doa={},Eoa=Doa=j9(Aoa),Foa={},k9=Foa=d9(rx,"WeakMap"),
Goa={},Hoa=Goa=function(c,h){for(var f=-1,m=null==c?0:c.length;++f<m&&!1!==h(c[f],f,c););return c},l9={},Ioa=/\s/;l9=function(c){for(var h=c.length;h--&&Ioa.test(c.charAt(h)););return h};var m9={},Joa=l9,Koa=/^\s+/;m9=function(c){return c?c.slice(0,Joa(c)+1).replace(Koa,""):c};var Loa={},Moa=m9,n9=0/0,Noa=/^[-+]0x[0-9a-f]+$/i,Ooa=/^0b[01]+$/i,Poa=/^0o[0-7]+$/i,Qoa=parseInt,Roa=Loa=function(c){if("number"==typeof c)return c;if(doa(c))return n9;JA(c)&&(c="function"==typeof c.valueOf?c.valueOf():c,c=
JA(c)?c+"":c);if("string"!=typeof c)return 0===c?c:+c;c=Moa(c);var h=Ooa.test(c);return h||Poa.test(c)?Qoa(c.slice(2),h?2:8):Noa.test(c)?n9:+c},Soa={},Toa=Soa=function(c,h,f,m){var n=c.length;for(f+=m?1:-1;m?f--:++f<n;)if(h(c[f],f,c))return f;return-1},o9={},p9=1/0;o9=function(c){if(!c)return 0===c?c:0;c=Roa(c);return c===p9||c===-p9?1.7976931348623157E308*(0>c?-1:1):c===c?c:0};var Uoa={},Voa=o9,q9=Uoa=function(c){c=Voa(c);var h=c%1;return c===c?h?c-h:c:0},Woa={},Xoa=Woa=function(c){return c!==c},
r9={};r9=function(c,h,f){--f;for(var m=c.length;++f<m;)if(c[f]===h)return f;return-1};var s9={},Yoa=r9;s9=function(c,h,f){return h===h?Yoa(c,h,f):Toa(c,Xoa,f)};var Zoa={},$oa=s9,apa=Zoa=function(c,h){return!(null==c||!c.length)&&-1<$oa(c,h,0)},bpa={},cpa=bpa=function(){},dpa={},AV=dpa=function(){},nw="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,epa={};AQ.prototype=zV(AV.prototype);var BV=epa=AQ.prototype.constructor=AQ,IC="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,fpa={};BQ.prototype=zV(AV.prototype);var t9=fpa=BQ.prototype.constructor=BQ,u9={};u9=function(c){if(c instanceof BV)return c.clone();var h=new t9(c.__wrapped__,c.__chain__);h.__actions__=f9(c.__actions__);h.__index__=c.__index__;h.__values__=c.__values__;return h};var gpa={},Xfa=BV,w_=t9,Wfa=V8,Vfa=wV,Zfa=u9,Yfa=Object.prototype.hasOwnProperty;CQ.prototype=AV.prototype;var hpa=gpa=CQ.prototype.constructor=CQ,ipa={},eM=ipa=k9&&new k9,jpa={},v9=jpa=eM?function(c){return eM.get(c)}:
cpa,w9={};w9={};var x9={},y9=w9,kpa=Object.prototype.hasOwnProperty;x9=function(c){for(var h=c.name+"",f=y9[h],m=kpa.call(y9,h)?f.length:0;m--;){var n=f[m],a=n.func;if(null==a||a==c)return n.name}return h};var lpa={},mpa=x9,npa=lpa=function(c){var h=mpa(c),f=hpa[h];if("function"!=typeof f||!(h in BV.prototype))return!1;if(c===f)return!0;h=v9(f);return!!h&&c===h[0]},opa={},z9=opa=eM?function(c,h){eM.set(c,h);return c}:xV,ppa={},fM=ppa=function(c){return function(){var h=arguments;switch(h.length){case 0:return new c;
case 1:return new c(h[0]);case 2:return new c(h[0],h[1]);case 3:return new c(h[0],h[1],h[2]);case 4:return new c(h[0],h[1],h[2],h[3]);case 5:return new c(h[0],h[1],h[2],h[3],h[4]);case 6:return new c(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new c(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var f=zV(c.prototype);h=c.apply(f,h);return JA(h)?h:f}},gM="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,qpa={},rpa=qpa=function(c,h,f){function m(){return((this||gM)&&(this||gM)!==
rx&&(this||gM)instanceof m?a:c).apply(n?f:this||gM,arguments)}var n=h&1,a=fM(c);return m},spa={},tpa=Math.max,A9=spa=function(c,h,f,m){var n=-1,a=c.length,d=f.length,k=-1,b=h.length,e=tpa(a-d,0),l=Array(b+e);for(m=!m;++k<b;)l[k]=h[k];for(;++n<d;)if(m||n<a)l[f[n]]=c[n];for(;e--;)l[k++]=c[n++];return l},upa={},vpa=Math.max,B9=upa=function(c,h,f,m){var n=-1,a=c.length,d=-1,k=f.length,b=-1,e=h.length,l=vpa(a-k,0),p=Array(l+e);for(m=!m;++n<l;)p[n]=c[n];for(l=n;++b<e;)p[l+b]=h[b];for(;++d<k;)if(m||n<a)p[l+
f[d]]=c[n++];return p},wpa={},xpa=wpa=function(c,h){for(var f=c.length,m=0;f--;)c[f]===h&&++m;return m},ypa={},C9=ypa=j9(z9),zpa={},Apa=/\{\n\/\* \[wrapped with (.+)\] \*/,Bpa=/,? & /,Cpa=zpa=function(c){return(c=c.match(Apa))?c[1].split(Bpa):[]},Dpa={},Epa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fpa=Dpa=function(c,h){var f=h.length;if(!f)return c;var m=f-1;h[m]=(1<f?"& ":"")+h[m];h=h.join(2<f?", ":" ");return c.replace(Epa,"{\n/* [wrapped with "+h+"] */\n")},D9={},Gpa=[["ary",128],["bind",1],
["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];D9=function(c,h){Hoa(Gpa,function(f){var m="_."+f[0];h&f[1]&&!apa(c,m)&&c.push(m)});return c.sort()};var Hpa={},Ipa=D9,E9=Hpa=function(c,h,f){h+="";return Eoa(c,Fpa(h,Ipa(Cpa(h),f)))},Jpa={},F9=Jpa=function(c,h,f,m,n,a,d,k,b,e){var l=h&8;h=(h|(l?32:64))&~(l?64:32);h&4||(h&=-4);n=[c,h,n,l?a:void 0,l?d:void 0,l?void 0:a,l?void 0:d,k,b,e];f=f.apply(void 0,n);npa(c)&&C9(f,n);f.placeholder=m;return E9(f,
c,h)},Kpa={},G9=Kpa=function(c){return c.placeholder},Lpa={},Mpa=Math.min,Npa=Lpa=function(c,h){for(var f=c.length,m=Mpa(h.length,f),n=f9(c);m--;){var a=h[m];c[m]=woa(a,f)?n[a]:void 0}return c},Opa={},hM=Opa=function(c,h){for(var f=-1,m=c.length,n=0,a=[];++f<m;){var d=c[f];if(d===h||"__lodash_placeholder__"===d)c[f]="__lodash_placeholder__",a[n++]=f}return a},RH="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Ppa={},bga=A9,cga=B9,aga=xpa,y_=fM,ega=F9,$fa=G9,fga=Npa,
dga=hM,gga=rx,H9=Ppa=x_,iM="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Qpa={},Rpa=Qpa=function(c,h,f){function m(){for(var a=arguments.length,d=Array(a),k=a,b=G9(m);k--;)d[k]=arguments[k];k=3>a&&d[0]!==b&&d[a-1]!==b?[]:hM(d,b);a-=k.length;return a<f?F9(c,h,H9,m.placeholder,void 0,d,k,void 0,void 0,f-a):h9((this||iM)&&(this||iM)!==rx&&(this||iM)instanceof m?n:c,this||iM,d)}var n=fM(c);return m},jM="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,Spa={},Tpa=Spa=function(c,h,f,m){function n(){for(var k=-1,b=arguments.length,e=-1,l=m.length,p=Array(l+b),u=(this||jM)&&(this||jM)!==rx&&(this||jM)instanceof n?d:c;++e<l;)p[e]=m[e];for(;b--;)p[e++]=arguments[++k];return h9(u,a?f:this||jM,p)}var a=h&1,d=fM(c);return n},I9={},Upa=Math.min;I9=function(c,h){var f=c[1],m=h[1],n=f|m,a=128==m&&8==f||128==m&&256==f&&c[7].length<=h[8]||384==m&&h[7].length<=h[8]&&8==f;if(!(131>n||a))return c;m&1&&(c[2]=h[2],n|=f&1?0:4);if(f=h[3])a=c[3],c[3]=a?
A9(a,f,h[4]):f,c[4]=a?hM(c[3],"__lodash_placeholder__"):h[4];if(f=h[5])a=c[5],c[5]=a?B9(a,f,h[6]):f,c[6]=a?hM(c[5],"__lodash_placeholder__"):h[6];(f=h[7])&&(c[7]=f);m&128&&(c[8]=null==c[8]?h[8]:Upa(c[8],h[8]));null==c[9]&&(c[9]=h[9]);c[0]=h[0];c[1]=n;return c};var J9={},Vpa=I9,K9=Math.max;J9=function(c,h,f,m,n,a,d,k){var b=h&2;if(!b&&"function"!=typeof c)throw new TypeError("Expected a function");var e=m?m.length:0;e||(h&=-97,m=n=void 0);d=void 0===d?d:K9(q9(d),0);k=void 0===k?k:q9(k);e-=n?n.length:
0;if(h&64){var l=m,p=n;m=n=void 0}var u=b?void 0:v9(c);a=[c,h,f,m,n,l,p,a,d,k];u&&Vpa(a,u);c=a[0];h=a[1];f=a[2];m=a[3];n=a[4];k=a[9]=void 0===a[9]?b?0:c.length:K9(a[9]-e,0);!k&&h&24&&(h&=-25);f=h&&1!=h?8==h||16==h?Rpa(c,h,k):32!=h&&33!=h||n.length?H9.apply(void 0,a):Tpa(c,h,f,m):rpa(c,h,f);return E9((u?z9:C9)(f,a),c,h)};var Wpa={},Xpa=J9,Ypa=Wpa=function(c,h,f){h=f?void 0:h;h=c&&null==h?c.length:h;return Xpa(c,128,void 0,void 0,void 0,void 0,h)},CV={};Object.defineProperty(CV,"__esModule",{value:!0});
CV.default=function(c){var h=c.types,f=function(n){return function(a){var d=n[a.type];if(d)return d(a);throw Error(a.type+" could not be transformed");}},m=function(n,a){var d=a.opts;a=d.useNew;var k=void 0===a?!1:a;a=d.module;var b=d.function;d=d.useVariables;var e=void 0===d?!1:d,l=d=void 0;!0===e?d=/^[A-Z]/:(0,Zpa.default)(e)&&(d=new RegExp(e));var p=k?h.newExpression:h.callExpression;l=function(u){return function(x){return p(u,[x])}};a?(k=n.scope.generateUidIdentifier(k?"JSXNode":"jsx"),l=l(k),
a=h.importDeclaration([h.importDefaultSpecifier(k)],h.stringLiteral(a)),n.findParent(function(u){return u.isProgram()}).unshiftContainer("body",a)):b?(n=b.split(".").map((0,L9.default)(h.identifier,1)).reduce((0,L9.default)(h.memberExpression,2)),l=l(n)):l=$pa.default;return{variablesRegex:d,jsxObjectTransformer:l}};return{inherits:Nna,visitor:{JSXElement:function(n,a){a.get("jsxConfig")||a.set("jsxConfig",m(n,a));var d=a.get("jsxConfig"),k=d.variablesRegex,b=d.jsxObjectTransformer,e=function(K){return h.stringLiteral(K.name)},
l=function(K){return h.stringLiteral(K.namespace.name+":"+K.name.name)},p=f({JSXIdentifier:function(K){return h.identifier(K.name)},JSXMemberExpression:function(K){return h.memberExpression(p(K.object),p(K.property))}}),u=f({JSXIdentifier:k?function(K){return k.test(K.name)?h.identifier(K.name):e(K)}:e,JSXNamespacedName:l,JSXMemberExpression:p});d=function(K){return K.expression};var x=f({JSXIdentifier:e,JSXNamespacedName:l,JSXMemberExpression:p}),z=f({StringLiteral:function(K){return K},JSXExpressionContainer:d}),
E=function(K){var T=[],P=[];K.forEach(function(da){switch(da.type){case "JSXAttribute":T||(T=[]);var fa=x(da.name);fa=aqa.default.keyword.isIdentifierNameES6(fa.value)?h.identifier(fa.value):fa;T.push(h.objectProperty(fa,z(da.value)));break;case "JSXSpreadAttribute":T&&(P.push(h.objectExpression(T)),T=null);P.push(da.argument);break;default:throw Error(da.type+" cannot be used as a JSX attribute");}});T&&0<T.length&&P.push(h.objectExpression(T));return 0===P.length?h.objectExpression([]):1===P.length?
P[0]:h.callExpression(a.addHelper("extends"),P)};l=function(K){return b(h.objectExpression([h.objectProperty(h.identifier(bqa),u(K.openingElement.name)),h.objectProperty(h.identifier(cqa),E(K.openingElement.attributes)),h.objectProperty(h.identifier(dqa),K.closingElement?J(K.children):h.nullLiteral())]))};var G=f({JSXText:function(K){if(a.opts.noTrim)return h.stringLiteral(K.value);K=K.value.replace(/\n\s*/g,"");return""===K?null:h.stringLiteral(K)},JSXElement:l,JSXExpressionContainer:d}),J=function(K){return h.arrayExpression(K.map(G).filter(Boolean).reduce(function(T,
P){var da=0<T.length?T[T.length-1]:null;return"StringLiteral"===P.type&&da&&"StringLiteral"===da.type?[].concat(z_(T.slice(0,-1)),[h.stringLiteral(da.value+P.value)]):[].concat(z_(T),[P])},[]))};n.replaceWith(l(n.node))}}}};var Zpa=SH(aoa),$pa=SH(xV),L9=SH(Ypa),aqa=SH(nE),bqa="elementName",cqa="attributes",dqa="children",zu={};Object.defineProperty(zu,"__esModule",{value:!0});zu.declare=function(c){return function(h,f,m){for(var n,a,d=$jscomp.makeIterator(Object.keys(M9)),k=d.next();!k.done;k=d.next())if(k=
k.value,!h[k]){if(null==a){a=h;var b=null;"string"===typeof a.version&&/^7\./.test(a.version)&&(b=Object.getPrototypeOf(a),!b||Object.prototype.hasOwnProperty.call(b,"version")&&Object.prototype.hasOwnProperty.call(b,"transform")&&Object.prototype.hasOwnProperty.call(b,"template")&&Object.prototype.hasOwnProperty.call(b,"types")||(b=null));a=Object.assign({},b,a)}a[k]=M9[k](a)}return c(null!=(n=a)?n:h,f||{},m)}};var M9={assertVersion:function(c){return function(h){var f=c.version;if("number"===typeof h){if(!Number.isInteger(h))throw Error("Expected string or integer value.");
h="^"+h+".0.0-0"}if("string"!==typeof h)throw Error("Expected string or integer value.");var m=Error.stackTraceLimit;"number"===typeof m&&25>m&&(Error.stackTraceLimit=25);var n="7."===f.slice(0,2)?Error('Requires Babel "^7.0.0-beta.41", but was loaded with "'+f+"\". You'll need to update your @babel/core version."):Error('Requires Babel "'+h+'", but was loaded with "'+f+'". If you are sure you have a compatible version of @babel/core, it is likely that something in your build process is loading the wrong version. Inspect the stack trace of this error to look for the first entry that doesn\'t mention "@babel/core" or "babel-core" to see what is calling Babel.');
"number"===typeof m&&(Error.stackTraceLimit=m);throw Object.assign(n,{code:"BABEL_VERSION_UNSUPPORTED",version:f,range:h});}},targets:function(){return function(){return{}}},assumption:function(){return function(){}}},N9=Object.freeze({__proto__:null,"default":zu,__esModule:zu.__esModule,declare:zu.declare}),KA={};Object.defineProperty(KA,"__esModule",{value:!0});KA.default=void 0;var eqa=(0,zu.declare)(function(c){c.assertVersion(7);return{name:"syntax-optional-catch-binding",manipulateOptions:function(h,
f){f.plugins.push("optionalCatchBinding")}}});KA.default=eqa;var O9=Object.freeze({__proto__:null,"default":KA,__esModule:KA.__esModule}),fqa="default"in N9?zu:N9,gqa="default"in O9?KA:O9,kM={};Object.defineProperty(kM,"__esModule",{value:!0});kM.default=void 0;var hqa=(0,fqa.declare)(function(c){c.assertVersion(7);return{name:"proposal-optional-catch-binding",inherits:gqa.default,visitor:{CatchClause:function(h){if(!h.node.param){var f=h.scope.generateUidIdentifier("unused");h.get("param").replaceWith(f)}}}}});
kM.default=hqa;var lM={};Object.defineProperty(lM,"__esModule",{value:!0});lM.default=void 0;var iqa=(0,zu.declare)(function(c){c.assertVersion(7);return{name:"syntax-import-meta",manipulateOptions:function(h,f){f.plugins.push("importMeta")}}});lM.default=iqa;var gi=lively.FreezerRuntime.recorderFor("lively.source-transform/index.js");gi.ensureJSXPlugin=function(){gi.transformJSX&&("undefined"===typeof gi.babel||gi.babel.availablePlugins["transform-jsx"]||(lively||global.lively).FreezerRuntime||gi.babel.registerPlugin("transform-jsx",
gi.transformJSX.default))};gi.ensureOptionalCatchBinding=function(){gi.catchBinding&&("undefined"===typeof gi.babel||gi.babel.availablePlugins["optional-catch-binding"]||(lively||global.lively).FreezerRuntime||gi.babel.registerPlugin("optional-catch-binding",gi.catchBinding.default))};gi.ensureImportMeta=function(){gi.importMeta&&("undefined"===typeof gi.babel||gi.babel.availablePlugins["syntax-import-meta"]||(lively||global.lively).FreezerRuntime||gi.babel.registerPlugin("syntax-import-meta",gi.importMeta.default))};
gi.stringifyFunctionWithoutToplevelRecorder=rz;gi.es5Transpilation=sz;gi.capturing=AE;gi.capturing=AE;gi.capturing=AE;gi.parseFunction=Lt;gi.stringify=Bk;gi.ReplaceVisitor=vq;gi.transformJSX=CV;gi.catchBinding=kM;gi.importMeta=lM;gi.stringifyFunctionWithoutToplevelRecorder=rz;gi.stringifyFunctionWithoutToplevelRecorder=rz;gi.es5Transpilation=sz;gi.es5Transpilation=sz;var jqa=Object.freeze({__proto__:null,capturing:AE,stringifyFunctionWithoutToplevelRecorder:rz,es5Transpilation:sz}),Ag=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-support.js");
Ag.processInlineCodeTransformOptions=function(c,h){if(!c.comments)return h;c=c.comments.find(function(m){return m.text.startsWith("lively.vm ")});if(!c)return h;try{var f=eval("inlineOptions = {"+c.text.slice(10)+"};");return Object.assign(h,f)}catch(m){return h}};Ag.evalCodeTransform=Nt;Ag.evalCodeTransformOfSystemRegisterSetters=ow;Ag.copyProperties=function(c,h,f){f=void 0===f?[]:f;Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c)).forEach(function(m){return-1===f.indexOf(m)&&
Object.defineProperty(h,m,Object.getOwnPropertyDescriptor(c,m))})};Ag.arr=Gf;Ag.Path=Qh;Ag.parse=kl;Ag.stringify=Bk;Ag.transform=qx;Ag.query=wq;Ag.nodes=Ys;Ag.capturing=AE;Ag.es5Transpilation=sz;Ag.getGlobal=Mt;var mM=Ag.nodes;Ag.id=mM.id;Ag.literal=mM.literal;Ag.member=mM.member;Ag.objectLiteral=mM.objectLiteral;Ag.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Ag.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Ag.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";
Ag.defaultClassToFunctionConverterName="initializeES6ClassForLively";Ag.defaultClassToFunctionConverterName="initializeES6ClassForLively";Ag.defaultClassToFunctionConverterName="initializeES6ClassForLively";Ag.evalCodeTransform=Nt;Ag.evalCodeTransform=Nt;Ag.evalCodeTransformOfSystemRegisterSetters=ow;Ag.evalCodeTransformOfSystemRegisterSetters=ow;var Rg=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval.js");Rg._normalizeEvalOptions=function(c){c||(c={});c=Object.assign({targetModule:null,sourceURL:c.targetModule,
runtime:null,context:Rg.getGlobal(),varRecorderName:Rg.defaultTopLevelVarRecorderName,dontTransform:[],recordGlobals:null,returnPromise:!0,promiseTimeout:200,waitForPromise:!0,wrapInStartEndCall:!1,onStartEval:null,onEndEval:null},c);if(c.targetModule){var h=c.runtime&&c.runtime.modules&&c.runtime.modules[c.targetModule];h&&(c=Object.assign(c,h))}c.wrapInStartEndCall&&(c.startFuncNode={type:"MemberExpression",object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:Rg.startEvalFunctionName},
computed:!0},c.endFuncNode={type:"MemberExpression",object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:Rg.endEvalFunctionName},computed:!0});return c};Rg.runEval=JC;Rg.finishEval=function(c,h,f,m,n,a,d){m.wrapInStartEndCall&&(delete n[Rg.startEvalFunctionName],delete n[Rg.endEvalFunctionName]);c?(f.isError=!0,f.value=c):f.value=h;f.value instanceof Promise&&(f.isPromise=!0);if(m.sync){if(f.processSync(m),"function"===typeof m.onEndEval)m.onEndEval(c,h)}else f.process(m).then(function(){"function"===
typeof d&&d(null,f);"function"===typeof m.onEndEval&&m.onEndEval(c,h);return f},function(k){"function"===typeof d&&d(k,void 0);"function"===typeof m.onEndEval&&m.onEndEval(k,void 0);return f}).then(a.resolve,a.reject)};Rg.syncEval=TH;Rg.tryToWaitForPromise=function(c,h){console.assert(c.isPromise,"no promise in tryToWaitForPromise???");var f={},m=new Promise(function(n){return setTimeout(n,h,f)});return Promise.race([m,c.value]).then(function(n){return Object.assign(c,n!==f?{promiseStatus:"fulfilled",
promisedValue:n}:{promiseStatus:"pending"})}).catch(function(n){return Object.assign(c,{promiseStatus:"rejected",promisedValue:n})})};Rg.arr=Gf;Rg.obj=eg;Rg.string=Dh;Rg.Path=Qh;Rg.promise=bh;Rg.Closure=Cj;Rg.evalCodeTransform=Nt;Rg.printEvalResult=FC;Rg.getGlobal=Mt;Rg.defaultTopLevelVarRecorderName="__lvVarRecorder";Rg.startEvalFunctionName="lively.vm-on-eval-start";Rg.endEvalFunctionName="lively.vm-on-eval-end";Rg._eval=Rg.Closure.fromSource("function _eval(__lvEvalStatement, __lvVarRecorder/*needed as arg for capturing*/, __lvOriginalCode) {\n  return eval(__lvEvalStatement);\n}").getFunc();
var CE=function(){this.isEvalResult=!0;this.value=void 0;this.warnings=[];this.isPromise=this.isError=!1;this.promisedValue=void 0;this.promiseStatus="unknown"};CE.prototype.addWarning=function(c){this.warnings.push(c);return c};CE.prototype.printed=function(c){c=void 0===c?{}:c;this.value=Rg.printEvalResult(this,c)};CE.prototype.processSync=function(c){if(c.inspect||c.asString)this.value=this.print(this.value,c);return this};CE.prototype.process=function(c){var h=this;if(h.isPromise&&c.waitForPromise)return Rg.tryToWaitForPromise(h,
c.promiseTimeout).then(function(){(c.inspect||c.asString)&&h.printed(c);return h});(c.inspect||c.asString)&&h.printed(c);return Promise.resolve(h)};Rg.EvalResult=CE;var LA=Rg.defaultTopLevelVarRecorderName;Rg.defaultTopLevelVarRecorderName=LA;Rg.defaultTopLevelVarRecorderName=LA;Rg.getGlobal=Mt;Rg.getGlobal=Mt;Rg.runEval=JC;Rg.runEval=JC;Rg.syncEval=TH;Rg.syncEval=TH;var kqa=Object.freeze({__proto__:null,defaultTopLevelVarRecorderName:LA,getGlobal:Mt,runEval:JC,syncEval:TH}),Zh=lively.FreezerRuntime.recorderFor("lively.vm/lib/esm-eval.js");
Zh.ensureImportsAreImported=function(c,h,f){var m,n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(m=Zh.parse(h),n=m.body,a=n.filter(function(k){return"ImportDeclaration"===k.type}),d.yield(Promise.all(a.map(function(k){return c.normalize(k.source.value,f).then(function(b){k.source.value=b;return c.get(b)||c.import(b)})})).catch(function(k){console.error("Error ensuring imports: "+k.message);throw k;}),2)):d.return(Zh.stringify(m))})};Zh.hasUnimportedImports=
function(c,h,f){h=Zh.parse(h).body.filter(function(m){return"ImportDeclaration"===m.type});return 0<Zh.arr.uniq(h.map(function(m){return m.source.value})).filter(Boolean).filter(function(m){return!c.get(c.decanonicalize(m,f))}).length};Zh.babelTranspilerForAsyncAwaitCode=function(c,h,f,m){return function(n,a){a=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:f,code:!0,ast:!1},a);n=h.transform("(async function(__rec) {\n"+n+"\n}).call(this);",a).code;return n=n.replace(/\}\)\.call\(undefined\);$/,
"}).call(this)")}};Zh.babelPluginTranspilerForAsyncAwaitCode=function(c,h,f,m){return function(n,a){var d=c.babelOptions||{},k=[];k.push(h.presetES2015);d.stage3&&k.push({plugins:h.pluginsStage3});d.stage2&&k.push({plugins:h.pluginsStage2});d.stage1&&k.push({plugins:h.pluginsStage1});a=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:f,babelrc:!1,presets:k,moduleIds:!1,code:!0,ast:!1},a);n=h.babel.transform("(async function(__rec) {\n"+n+"\n}).call(this);",a).code;return n=n.replace(/\}\)\.call\(undefined\);$/,
"}).call(this)")}};Zh.getEs6Transpiler=function(c,h,f){if(h.transpiler)return h.transpiler;if(!h.es6Transpile)return null;if("babel"===c.transpiler){var m=c.global[c.transpiler]||c.get(c.decanonicalize(c.transpiler));return m?Zh.babelTranspilerForAsyncAwaitCode(c,m,h.targetModule,f):c.import(c.transpiler).then(function(d){return Zh.babelTranspilerForAsyncAwaitCode(c,d,h.targetModule,f)})}if("plugin-babel"===c.transpiler){m=c.decanonicalize("plugin-babel").split("/").slice(0,-1).concat("systemjs-babel-browser.js").join("/");
var n=c.get(m);return n?Zh.babelPluginTranspilerForAsyncAwaitCode(c,n,h.targetModule,f):c.import(m).then(function(d){return Zh.babelPluginTranspilerForAsyncAwaitCode(c,d,h.targetModule,f)})}if("lively.transpiler"===c.transpiler){var a=new (c.get(c.decanonicalize("lively.transpiler")).default)(c,h.targetModule,f);return function(d,k){return a.transpileDoit(d,k)}}throw Error("Sorry, currently only babel is supported as es6 transpiler for runEval!");};Zh.runEval=pw;Zh.evalEnd=function(c,h,f,m){c.get("@lively-env").evaluationEnd(f.targetModule);
c.debug&&console.log("[lively.module] runEval in module "+f.targetModule+" done");Zh.emit("lively.vm/doitresult",{code:h,result:m,waitForPromise:f.waitForPromise,targetModule:f.targetModule},Date.now(),c);return m};Zh.parse=kl;Zh.nodes=Ys;Zh.stringify=Bk;Zh.emit=ss;var nM=Zh.nodes;Zh.funcCall=nM.funcCall;Zh.member=nM.member;Zh.id=nM.id;Zh.literal=nM.literal;Zh.arr=Gf;Zh.vmRunEval=JC;Zh.runEval=pw;Zh.runEval=pw;var lqa=Object.freeze({__proto__:null,runEval:pw}),Rj=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-strategies.js");
Rj.obj=eg;var MA=function(){};MA.prototype.runEval=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(Promise.reject("runEval(source, options) not yet implemented for "+f.constructor.name))})};MA.prototype.keysOfObject=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(Promise.reject("keysOfObject(prefix, options) not yet implemented for "+f.constructor.name))})};Rj.EvalStrategy=MA;var sx=function(){return Rj.EvalStrategy.apply(this,
arguments)||this};$jscomp.inherits(sx,Rj.EvalStrategy);sx.prototype.runEval=function(c,h){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(Promise.resolve().then(function(){try{return Promise.resolve({value:eval(c)})}catch(m){return{isError:!0,value:m}}}))})};sx.prototype.keysOfObject=function(c,h){var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(lively.vm.completions.getCompletions(function(a){return f.runEval(a,
h)},c),2);m=n.yieldResult;return n.return({completions:m.completions,prefix:m.startLetters})})};Rj.SimpleEvalStrategy=sx;var Au=function(){return Rj.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits(Au,Rj.EvalStrategy);Au.prototype.normalizeOptions=function(c){if(!c.targetModule)throw Error("runEval called but options.targetModule not specified!");return Object.assign({sourceURL:c.targetModule+"_doit_"+Date.now()},c)};Au.prototype.runEval=function(c,h){var f=this,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){h=
f.normalizeOptions(h);m=h.System||lively.modules.System;n={};m.config({meta:(n[h.targetModule]={format:"esm"},n)});return a.return(lively.vm.runEval(c,h))})};Au.prototype.keysOfObject=function(c,h){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(lively.vm.completions.getCompletions(function(n){return lively.vm.runEval(n,h)},c),2);f=m.yieldResult;return m.return({completions:f.completions,prefix:f.startLetters})})};Rj.LivelyVmEvalStrategy=Au;
var Bu=function(){return Rj.LivelyVmEvalStrategy.apply(this,arguments)||this};$jscomp.inherits(Bu,Rj.LivelyVmEvalStrategy);Bu.prototype.sourceForRemote=function(c,h,f){var m=Rj.obj.isString(f.context)?f.context:!1;f=Rj.obj.dissoc(f,["systemInterface","System","context","classTransform"]);return"\n(function() {\n  var arg = "+JSON.stringify(h)+",\n      options = "+JSON.stringify(f)+';\n  if (typeof lively === "undefined" || !lively.vm) {\n    return Promise.resolve({\n      isEvalResult: true,\n      isError: true,\n      value: \'lively.vm not available!\'\n    });\n  }\n  var hasSystem = typeof System !== "undefined"\n  options.context = '+
m+';\n  options.classTransform = lively.classes.classToFunctionTransform;\n  if (!options.context) {\n    options.context = hasSystem\n      ? System.global\n      : typeof window !== "undefined"\n          ? window\n          : typeof global !== "undefined"\n              ? global\n              : typeof self !== "undefined" ? self : this;\n  }\n  async function evalFunction(source, options) {\n    if (hasSystem) {\n      var conf = {meta: {}}; conf.meta[options.targetModule] = {format: "esm"};\n      System.config(conf);\n    } else {\n      options = Object.assign({topLevelVarRecorderName: "GLOBAL"}, options);\n      delete options.targetModule;\n    }\n    let res = await lively.vm.runEval(source, options);\n    try {\n       JSON.stringify(res.value);\n    } catch(e) {\n       res.value = String(res.value);\n    }\n    return res;\n  }\n  function keysOfObjectFunction(prefix, options) {\n    return lively.vm.completions.getCompletions(code => evalFunction(code, options), prefix)\n      .then(result => ({isEvalResult: true, completions: result.completions, prefix: result.startLetters}));\n  }\n  return '+
("eval"===c?"evalFunction":"keysOfObjectFunction")+"(arg, options)\n    .catch(err => ({isEvalResult: true, isError: true, value: String(err.stack || err)}));\n})();\n"};Bu.prototype.runEval=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(f.remoteEval(f.sourceForRemote("eval",c,h),h))})};Bu.prototype.keysOfObject=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(f.remoteEval(f.sourceForRemote("keysOfObject",
c,h),h))})};Bu.prototype.remoteEval=function(c,h){var f=this,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.setCatchFinallyBlocks(2),a.yield(f.basicRemoteEval(c,h),4);if(2!=a.nextAddress)return m=a.yieldResult,a.return("string"===typeof m?JSON.parse(m):m);n=a.enterCatchBlock();return a.return({isError:!0,value:"Remote eval failed: "+(m||n)})})};Bu.prototype.basicRemoteEval=function(c,h){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){throw Error("Not yet implemented");
})};Rj.RemoteEvalStrategy=Bu;var Kr=function(c){var h=Rj.RemoteEvalStrategy.call(this)||this;h.url=c||h.constructor.defaultURL;return h};$jscomp.inherits(Kr,Rj.RemoteEvalStrategy);Kr.prototype.normalizeOptions=function(c){c=Rj.RemoteEvalStrategy.prototype.normalizeOptions.call(this,c);return Object.assign({serverEvalURL:this.url},c,{context:null})};Kr.prototype.basicRemoteEval=function(c,h){var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(h=f.normalizeOptions(h),
m="basicRemoteEval_"+(System.get("@system-env").node?"node":"web"),n.yield(f[m]({method:"POST",body:c},h.serverEvalURL),2)):n.return(n.yieldResult)})};Kr.prototype.basicRemoteEval_web=function(c,h){var f,m,n,a,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:f=$jscomp.makeIterator(h.match(/[^:]+:\/\/[^\/]+/)||[h]);m=f.next().value;n=System.get("@system-env").worker?window.location:document.location;if(a=n.origin!==m)c.headers=Object.assign({},c.headers,
{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":h}),h=n.origin;b.setCatchFinallyBlocks(2);return b.yield(window.fetch(h,c),4);case 4:d=b.yieldResult;b.leaveTryBlock(3);break;case 2:throw k=b.enterCatchBlock(),Error("Cannot reach server at "+h+": "+k.message);case 3:if(!d.ok)throw Error("Server at "+h+": "+d.statusText);return b.return(d.text())}})};Kr.prototype.basicRemoteEval_node=function(c,h){var f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){f=System._nodeRequire("url").parse;
m=System._nodeRequire(h.startsWith("https:")?"https":"http");n=Object.assign({method:c.method||"GET"},f(h));return a.return(new Promise(function(d,k){var b=m.request(n,function(e){e.setEncoding("utf8");var l="";e.on("data",function(p){return l+=p});e.on("end",function(){return d(l)});e.on("error",function(p){return k(p)})});b.on("error",function(e){return k(e)});b.end(c.body)}))})};$jscomp.global.Object.defineProperties(Kr,{defaultURL:{configurable:!0,enumerable:!0,get:function(){return"http://localhost:3000/lively"}}});
Rj.HttpEvalStrategy=Kr;var NA=function(c,h){var f=Rj.RemoteEvalStrategy.call(this)||this;f.l2lClient=c;f.targetId=h;return f};$jscomp.inherits(NA,Rj.RemoteEvalStrategy);NA.prototype.basicRemoteEval=function(c,h){var f=this,m,n,a,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return m=f,n=m.l2lClient,a=m.targetId,b.yield(n.sendToAndWait(a,"remote-eval",{source:c},{ackTimeout:h.ackTimeout||3500}),2);d=b.yieldResult;(k=d.data)&&k.value&&k.value.isEvalResult&&(k=
k.value);return b.return(k)})};Rj.L2LEvalStrategy=NA;Rj.EvalStrategy=MA;Rj.EvalStrategy=MA;Rj.SimpleEvalStrategy=sx;Rj.SimpleEvalStrategy=sx;Rj.LivelyVmEvalStrategy=Au;Rj.LivelyVmEvalStrategy=Au;Rj.HttpEvalStrategy=Kr;Rj.HttpEvalStrategy=Kr;Rj.L2LEvalStrategy=NA;Rj.L2LEvalStrategy=NA;var DE=Object.freeze({__proto__:null,RemoteEvalStrategy:Bu,EvalStrategy:MA,SimpleEvalStrategy:sx,LivelyVmEvalStrategy:Au,HttpEvalStrategy:Kr,L2LEvalStrategy:NA});Ma("bA",DE);var Ck=lively.FreezerRuntime.recorderFor("lively.vm/index.js");
Ck.runEval=uz;Ck.syncEval=LC;Ck.completions=zE;Ck.completions=zE;Ck.completions=zE;Ck.globalEval=kqa;Ck.esmEval=lqa;Ck.defaultTopLevelVarRecorderName=LA;Ck.defaultTopLevelVarRecorderName=LA;Ck.defaultClassToFunctionConverterName="initializeES6ClassForLively";Ck.defaultClassToFunctionConverterName="initializeES6ClassForLively";Ck.evalCodeTransform=Nt;Ck.evalCodeTransform=Nt;Ck.evalCodeTransformOfSystemRegisterSetters=ow;Ck.evalCodeTransformOfSystemRegisterSetters=ow;Ck.runEval=uz;Ck.runEval=uz;Ck.syncEval=
LC;Ck.syncEval=LC;Ck.evalStrategies=DE;Ck.evalStrategies=DE;Ck.evalStrategies=DE;var P9=Object.freeze({__proto__:null,completions:zE,defaultTopLevelVarRecorderName:LA,defaultClassToFunctionConverterName:"initializeES6ClassForLively",evalCodeTransform:Nt,evalCodeTransformOfSystemRegisterSetters:ow,runEval:uz,syncEval:LC,evalStrategies:DE});Ma("bz",P9);var Ei=lively.FreezerRuntime.recorderFor("lively.classes/source-descriptors.js");Ei.string=Dh;Ei.arr=Gf;Ei.parse=kl;Ei.query=wq;Ei.runEval=uz;Ei.objMetaSym=
Symbol.for("lively-object-meta");Ei.moduleSym=Symbol.for("lively-module-meta");Ei.descriptorCache=new Map;var OA=function(c,h){c&&h?this.update(h,c):this.reset()};OA.prototype.reset=function(){this._sourceLocation=null;this._source="";this._ast=null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};OA.prototype.update=function(c,h){this._moduleSource===c&&h&&this._sourceLocation&&h.start===this._sourceLocation.start&&h.end===this._sourceLocation.end||
(this.reset(),this._moduleSource=c,this._sourceLocation=h)};OA.prototype.changeSource=function(c){var h=this.moduleSource,f=this.sourceLocation,m=f.start;f=f.end;h=h.slice(0,m)+c+h.slice(f);this.update(h,{start:m,end:m+c.length});this._source=c;return this};OA.prototype.toString=function(){var c=Ei.string.truncate(this._source||"NO SOURCE",35).replace(/\n/g,"");return this.constructor.name+"("+c+")"};$jscomp.global.Object.defineProperties(OA.prototype,{sourceLocation:{configurable:!0,enumerable:!0,
get:function(){if(!this._sourceLocation)throw Error("_sourceLocation not defined");return this._sourceLocation}},moduleSource:{configurable:!0,enumerable:!0,get:function(){if(!this._moduleSource)throw Error("_moduleSource not defined!");return this._moduleSource}},moduleAst:{configurable:!0,enumerable:!0,get:function(){return this._moduleAst||(this._moduleAst=Ei.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){return this._moduleScope||(this._moduleScope=
Ei.query.topLevelDeclsAndRefs(this.ast).scope)}},moduleImports:{configurable:!0,enumerable:!0,get:function(){return this._moduleImports||(this._moduleImports=Ei.query.imports(this.moduleScope))}},ast:{configurable:!0,enumerable:!0,get:function(){if(this._ast)return this._ast;var c=Ei.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},source:{configurable:!0,enumerable:!0,get:function(){if(this._source)return this._source;var c=this.sourceLocation;
return this._source=this.moduleSource.slice(c.start,c.end)}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,h=Ei.query.topLevelDeclsAndRefs(this.moduleAst).declaredNames,f=Ei.arr.uniq(this.moduleImports.map(function(n){return n.local})),m=Ei.arr.withoutAll(h,f);c=Ei.arr.withoutAll(Ei.query.findGlobalVarRefs(c).map(function(n){return n.name}),
h);return this._declaredAndUndeclaredNames={declaredNames:h,declaredImports:f,localDeclaredNames:m,undeclaredNames:c}}}});Ei.SourceDescriptor=OA;var io=function(c,h){this.obj=c;this.System=h;this.reset()};io.forObjectWithModuleSource=function(c,h,f){c=this.for(c,f);c.ensureSourceDescriptor(c.sourceLocation,h);return c};io.for=function(c,h){var f=Ei.descriptorCache.get(c);f||(f=new this(c,h),Ei.descriptorCache.set(c,f));return f};io.prototype.reset=function(){this._source="";this._ast=this._sourceLocation=
null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};io.prototype.resetIfChanged=function(){var c=this.meta.moduleSource;this._moduleSource&&c&&this._moduleSource!==c&&this.reset()};io.prototype.changeSourceSync=function(c){var h=this.System;this._basicChangeSource(c);this.module.changeSource(this.moduleSource,{doSave:!0});c=Ei.runEval(c,{sync:!0,targetModule:this.module.id,System:h});if(c.isError)throw c.value;return this};io.prototype.changeSource=
function(c){var h=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(f=h,m=f.module,n.yield(m.changeSourceAction(function(a){if(a!==h.moduleSource)throw Error("source of module "+m.id+" and source of "+h+" don't match");h._basicChangeSource(c);return h.moduleSource}),2)):n.return(h)})};io.prototype._modifiedSource=function(c){var h=this.moduleSource,f=this.sourceLocation,m=f.start;f=f.end;return{moduleSource:h.slice(0,m)+c+h.slice(f),sourceLocation:{start:m,
end:m+c.length}}};io.prototype._renamedSource=function(c){var h=this.ast,f=h.type,m=h.id;h=m.start;m=m.end;if("ClassDeclaration"!==f)throw Error("Don't know how to rename "+f);return this._modifiedSource(this.source.slice(0,h)+c+this.source.slice(m))};io.prototype._basicChangeSource=function(c){var h=this.meta,f=this._modifiedSource(c),m=f.moduleSource;f=f.sourceLocation;this.reset();this.meta=Object.assign({},h,{moduleSource:m},f);this._sourceLocation=f;this._moduleSource=m;this._source=c;return this};
io.prototype.toString=function(){var c=Ei.string.truncate(this.source||String(this.obj),35).replace(/\n/g,"");try{var h=this.module.shortName()}catch(f){h="NO MODULE!"}return this.constructor.name+"("+c+" in "+h+")"};$jscomp.global.Object.defineProperties(io.prototype,{System:{configurable:!0,enumerable:!0,get:function(){return this._System||System},set:function(c){this._System=c}},module:{configurable:!0,enumerable:!0,get:function(){var c=this.obj,h=this.System;if(!c[Ei.moduleSym])throw Error("runtime object of source descriptor has no module data");
var f=c[Ei.moduleSym];c=f.package.name;f=f.pathInPackage;c=f.includes("://")?f:c+"/"+f;h=this.System._scripting.module(h,c);h._frozenModule||h._source||!this.moduleSource||h.setSource(this.moduleSource);return h}},meta:{configurable:!0,enumerable:!0,get:function(){var c=this.obj;if(!c[Ei.objMetaSym])throw Error("runtime object of source descriptor has no lively meta data");return c[Ei.objMetaSym]},set:function(c){this.obj[Ei.objMetaSym]=c;c.hasOwnProperty("start")&&c.hasOwnProperty("end")&&(this._sourceLocation=
{start:c.start,end:c.end});c.hasOwnProperty("moduleSource")&&(this._moduleSource=c.moduleSource)}},sourceLocation:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._sourceLocation)return this._sourceLocation;var c=this.meta,h=c.start;c=c.end;if(void 0===h||void 0===c)throw Error("lively meta data has no start/end");return this._sourceLocation={start:h,end:c}}},moduleSource:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._moduleSource)return this._moduleSource;
var c=this.meta.moduleSource;if(void 0===c)throw Error("lively meta data has no moduleSource");return this._moduleSource=c}},moduleAst:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleAst||(this._moduleAst=Ei.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleScope||(this._moduleScope=Ei.query.topLevelDeclsAndRefs(this.moduleAst).scope)}},moduleImports:{configurable:!0,
enumerable:!0,get:function(){this.resetIfChanged();return this._moduleImports||(this._moduleImports=Ei.query.imports(this.moduleScope))}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,h=Ei.query.topLevelDeclsAndRefs(this.moduleAst,{jslintGlobalComment:!0}).declaredNames,f=Ei.arr.uniq(this.moduleImports.map(function(n){return n.local})),m=Ei.arr.withoutAll(h,f);
c=Ei.arr.withoutAll(Ei.query.findGlobalVarRefs(c).map(function(n){return n.name}),h);return this._declaredAndUndeclaredNames={declaredNames:h,declaredImports:f,localDeclaredNames:m,undeclaredNames:c}}},source:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._source)return this._source;var c=this.sourceLocation;return this._source=this.moduleSource.slice(c.start,c.end)}},ast:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._ast)return this._ast;
var c=Ei.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},name:{configurable:!0,enumerable:!0,get:function(){if("ClassDeclaration"===this.type){var c=this.ast.id;return this.source.slice(c.start,c.end)}return"unknown"}}});Ma("G",io);Ei.RuntimeSourceDescriptor=io;var pf=lively.FreezerRuntime.recorderFor("lively.classes/util.js");pf.superclasses=EQ;pf.getClassHierarchy=
VH;pf.withSuperclasses=WH;pf.inheritsFrom=FQ;pf.changeClass=GQ;pf.isClass=HQ;pf.isOverridden=function(c,h){for(;c!=Object;)if(c=c[Symbol.for("lively-instance-superclass")],c.prototype.hasOwnProperty(h))return!0;return!1};pf.lexicalClassMembers=IQ;pf.runtimeClassMembers=JQ;pf.runtimeClassMembersInProtoChain=function(c){return pf.arr.uniq(pf.arr.flatmap(pf.arr.without(pf.withSuperclasses(c),Object),function(h){return pf.runtimeClassMembers(h)}))};pf.runtimeNonStaticMembers=function(c){var h=c.prototype,
f=pf.obj.getOwnPropertyDescriptors(h);return pf.arr.withoutAll(Object.keys(f),["constructor"]).map(function(m){var n=f[m],a="function"===typeof n.value?"method":"get"in n?"get":"set"in n?"set":"unknown";return{static:!1,name:m,value:"method"===a?n.value:"get"===a?n.get:"set"===a?n.set:null,kind:a,owner:h}})};pf.runtimeNonstaticClassMembersInProtoChain=function(c){return pf.arr.uniq(pf.arr.flatmap(pf.arr.without(pf.withSuperclasses(c),Object),function(h){return pf.runtimeNonStaticMembers(h)}))};pf.runtimeStaticClassMembers=
KQ;pf.runtimeStaticClassMembersInProtoChain=LQ;pf.arr=Gf;pf.obj=eg;pf.Path=Qh;pf.RuntimeSourceDescriptor=io;pf.superclasses=EQ;pf.superclasses=EQ;var oM=Symbol.for("lively-instance-initialize");pf.initializeSymbol=oM;pf.initializeSymbol=oM;pf.initializeSymbol=oM;var DV=Symbol.for("lively-instance-restorer");pf.instanceRestorerSymbol=DV;pf.instanceRestorerSymbol=DV;pf.instanceRestorerSymbol=DV;var pM=Symbol.for("lively-instance-superclass");pf.superclassSymbol=pM;pf.superclassSymbol=pM;pf.superclassSymbol=
pM;var qM=Symbol.for("lively-module-meta");pf.moduleMetaSymbol=qM;pf.moduleMetaSymbol=qM;pf.moduleMetaSymbol=qM;var rM=Symbol.for("lively-object-meta");pf.objMetaSymbol=rM;pf.objMetaSymbol=rM;pf.objMetaSymbol=rM;var sM=Symbol.for("lively-klass-changes-subscriber");pf.moduleSubscribeToToplevelChangesSym=sM;pf.moduleSubscribeToToplevelChangesSym=sM;pf.moduleSubscribeToToplevelChangesSym=sM;pf.getClassHierarchy=VH;pf.getClassHierarchy=VH;pf.withSuperclasses=WH;pf.withSuperclasses=WH;pf.inheritsFrom=
FQ;pf.inheritsFrom=FQ;pf.changeClass=GQ;pf.changeClass=GQ;pf.isClass=HQ;pf.isClass=HQ;pf.lexicalClassMembers=IQ;pf.lexicalClassMembers=IQ;pf.runtimeClassMembers=JQ;pf.runtimeClassMembers=JQ;pf.runtimeStaticClassMembers=KQ;pf.runtimeStaticClassMembers=KQ;pf.runtimeStaticClassMembersInProtoChain=LQ;pf.runtimeStaticClassMembersInProtoChain=LQ;var EV=Ma("H",function(){function c(d){return d.replace(a,function(k,b){return b[b.length-1].toUpperCase()})}var h="break case catch class const continue debugger default delete do else enum export extends false finally for function if implements import in instanceof interface let new null package private protected public return static switch super this throw true try typeof undefined var void while with yield".split(" "),
f={"~":"_tilde_","`":"_backtick_","!":"_exclamationmark_","@":"_at_","#":"_pound_","%":"_percent_","^":"_carat_","&":"_amperstand_","*":"_asterisk_","(":"_leftparen_",")":"_rightparen_","+":"_plus_","=":"_equals_","{":"_leftcurly_","}":"_rightcurly_","[":"_leftsquare_","]":"_rightsquare_","|":"_pipe_","-":"_dash_","\\":"_backslash_",'"':"_doublequote_","'":"_singlequote_",":":"_colon_",";":"_semicolon_","<":"_leftangle_",">":"_rightangle_",",":"_comma_",".":"_period_","?":"_questionmark_","/":"_forwardslash_",
"\t":"_tab_","\n":"_newline_","\r":"_carriagereturn_"},m={0:"_zero_",1:"_one_",2:"_two_",3:"_three_",4:"_four_",5:"_five_",6:"_siz_",7:"_seven_",8:"_eight_",9:"_nine_"},n=function(d){return f[d]||"ASCII_"+d.charCodeAt(0)},a=/([\s-]+.)/g;return function(d){d=c(d);return 0<=h.indexOf(d)?d:0===d.length?"_null_":d.replace(/^\d/,function(k){return m[k]}).replace(/[^\w\$_]/g,n)}}());pf.toJsIdentifier=EV;pf.toJsIdentifier=EV;pf.toJsIdentifier=EV;var Ki=lively.FreezerRuntime.recorderFor("lively.classes/properties.js");
Ki.hasManagedProperties=function(c){return c.hasOwnProperty(Ki.defaultPropertiesKey)};Ki.prepareClassForManagedPropertiesAfterCreation=XH;Ki.prepareClassForProperties=function(c,h,f){Ki.ensurePropertyInitializer(c);var m=h.valueStoreProperty,n=h.defaultGetter,a=h.defaultSetter,d=c.prototype;Object.keys(f).forEach(function(k){var b=f[k],e=d.hasOwnProperty(k)&&d.__lookupGetter__(k);if(!e||e._wasGenerated)e=b.get||"function"===typeof n&&function(){return n.call(this,k)}||function(){return this[m][k]},
e._wasGenerated=!0,d.__defineGetter__(k,e);e=d.hasOwnProperty(k)&&d.__lookupSetter__(k);if(!e||e._wasGenerated)if(b.hasOwnProperty("set")||!b.readOnly)b=b.set||"function"===typeof a&&function(l){a.call(this,k,l)}||function(l){this[m][k]=l},b._wasGenerated=!0,d.__defineSetter__(k,b)})};Ki.ensurePropertyInitializer=function(c){Object.defineProperty(c.prototype,"propertiesAndPropertySettings",{enumerable:!1,configurable:!0,writable:!0,value:function(){var h=this.constructor,f=h[Ki.propertiesAndSettingsCacheSym];
if(f)if(f.classHierarchy!=Ki.getClassHierarchy(h)){var m=Ki.propertiesAndSettingsInHierarchyOf(h);f=m.properties;m=m.propertySettings;h[Ki.propertiesAndSettingsCacheSym]={properties:f,propertySettings:m,order:Ki.obj.sortKeysWithBeforeAndAfterConstraints(f),classHierarchy:Ki.getClassHierarchy(h)};Ki.prepareClassForProperties(h,m,f)}else return f;return h[Ki.propertiesAndSettingsCacheSym]||Ki.propertiesAndSettingsInHierarchyOf(h)}});Object.defineProperty(c.prototype,"initializeProperties",{enumerable:!1,
configurable:!0,writable:!0,value:function(h){var f=this.propertiesAndPropertySettings();Ki.prepareInstanceForProperties(this,f.propertySettings,f.properties,h,f.order);return this}})};Ki.propertiesAndSettingsInHierarchyOf=function(c){for(var h=Object.assign({},Ki.defaultPropertySettings),f={},m=Ki.obj.valuesInPropertyHierarchy(c,"propertySettings"),n=Ki.obj.valuesInPropertyHierarchy(c,"properties"),a=0;a<m.length;a++){var d=m[a];d&&"object"===typeof d&&Object.assign(h,d)}for(a=0;a<n.length;a++)if(m=
n[a],"object"!==typeof m)console.error("[initializeProperties] "+c+" encountered property declaration that is not a JS object: "+m);else for(var k in m)f.hasOwnProperty(k)?Object.assign(f[k],m[k]):f[k]=m[k];return{properties:f,propertySettings:h}};Ki.prepareInstanceForProperties=function(c,h,f,m,n){var a=h.valueStoreProperty;n=n||Ki.obj.sortKeysWithBeforeAndAfterConstraints(f);h=[];var d={};c.hasOwnProperty(a)||(c[a]={});for(var k=0;k<n.length;k++){var b=n[k],e=f[b],l=e.derived,p=!!e.foldable,u=e.hasOwnProperty("defaultValue")?
e.defaultValue:void 0;Array.isArray(u)&&(u=u.slice());l||p||(c[a][b]=u);var x=void 0;e.hasOwnProperty("initialize")?(x=d[b]={initialize:u},h.push(b)):l&&void 0!==u?(x=d[b]={derived:u},h.push(b)):p&&void 0!==u&&(x=d[b]={folded:u},h.push(b));m&&b in m&&(e.readOnly?console.warn("Trying to initialize read-only property "+b+" in "+c+", skipping setting value"):(x||(x=d[b]={},h.push(b)),x.value=m[b]))}for(k=0;k<h.length;k++)m=h[k],n=d[m],a=n.hasOwnProperty("value"),n.hasOwnProperty("initialize")?(f[m].initialize.call(c,
a?n.value:n.initialize),a&&(c[m]=n.value)):n.hasOwnProperty("derived")?c[m]=a?n.value:n.derived:n.hasOwnProperty("folded")?c[m]=a?n.value:n.folded:a&&(c[m]=n.value)};Ki.obj=eg;Ki.getClassHierarchy=VH;Ki.defaultPropertiesSettingKey="propertySettings";Ki.defaultPropertiesKey="properties";Ki.defaultInstanceInitializerMethod="initializeProperties";Ki.propertiesAndSettingsCacheSym=Symbol.for("lively.classes-properties-and-settings");Ki.defaultPropertySettings={defaultSetter:null,defaultGetter:null,valueStoreProperty:"_state"};
Ki.prepareClassForManagedPropertiesAfterCreation=XH;Ki.prepareClassForManagedPropertiesAfterCreation=XH;var Vf=lively.FreezerRuntime.recorderFor("lively.classes/runtime.js");Vf.adoptObject=vz;Vf.setSuperclass=YH;Vf.installValueDescriptor=function(c,h,f){f=Object.assign(f,Vf.defaultPropertyDescriptorForValue);f.value.displayName=f.key;if(f.needsDeclaringClass){var m=f.value.originalFunction||f.value;f.value=Object.assign(function(){return m.call.apply(m,[this,h].concat($jscomp.arrayFromIterable(arguments)))},
{originalFunction:m,toString:function(){return m.toString()},displayName:f.key})}Object.defineProperty(c,f.key,f)};Vf.installGetterSetterDescriptor=function(c,h){h=Object.assign(h,Vf.defaultPropertyDescriptorForGetterSetter);Object.defineProperty(c,h.key,h)};Vf.installMethods=function(c,h,f){f&&f.forEach(function(d){d.value?Vf.installValueDescriptor(c,c,d):Vf.installGetterSetterDescriptor(c,d)});h&&h.forEach(function(d){d.value?Vf.installValueDescriptor(c.prototype,c,d):Vf.installGetterSetterDescriptor(c.prototype,
d)});c.prototype[Vf.initializeSymbol]?Object.getOwnPropertySymbols(c.prototype).includes(Vf.initializeSymbol)&&c.prototype[Vf.initializeSymbol].isDefaultInitializer&&c[Vf.superclassSymbol].prototype[Vf.initializeSymbol]&&delete c.prototype[Vf.initializeSymbol]:(Object.defineProperty(c.prototype,Vf.initializeSymbol,{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),c.prototype[Vf.initializeSymbol].isDefaultInitializer=!0,c.prototype[Vf.initializeSymbol].displayName="lively-initialize");
h=h.map(function(d){return d.key}).concat(["constructor","arguments","caller"]);for(var m=Object.getOwnPropertyNames(c.prototype),n=0;n<m.length;n++){var a=m[n];h.includes(a)||delete c.prototype[a]}f=f.map(function(d){return d.key}).concat(["length","name","prototype","arguments","caller"]);h=Object.getOwnPropertyNames(c);for(m=0;m<h.length;m++)n=h[m],f.includes(n)||delete c[n]};Vf.ensureInitializeStub=function(c){c===Object||c.prototype[Vf.initializeSymbol]||(Object.defineProperty(c.prototype,Vf.initializeSymbol,
{enumerable:!1,configurable:!0,writable:!0,value:function(){c.apply(this,arguments)}}),c.prototype[Vf.initializeSymbol].displayName="lively-initialize-stub")};Vf.initializeClass=$b;Vf.prepareClassForManagedPropertiesAfterCreation=XH;Vf.superclassSymbol=pM;Vf.moduleSubscribeToToplevelChangesSym=sM;Vf.moduleMetaSymbol=qM;Vf.objMetaSymbol=rM;Vf.initializeSymbol=oM;Vf.constructorArgMatcher=/\([^\\)]*\)/;Vf.defaultPropertyDescriptorForGetterSetter={enumerable:!1,configurable:!0};Vf.defaultPropertyDescriptorForValue=
{enumerable:!1,configurable:!0,writable:!0};var tM="function"===typeof Object.setPrototypeOf?function(c,h){return Object.setPrototypeOf(c,h)}:function(c,h){return c.__proto__=h};Vf.setPrototypeOf=tM;Vf.setPrototypeOf=tM;Vf.setPrototypeOf=tM;Vf.adoptObject=vz;Vf.adoptObject=vz;Vf.setSuperclass=YH;Vf.setSuperclass=YH;Vf.initializeClass=$b;Vf.initializeClass=$b;Vf.initializeClass._get=function n(h,f,m){null===h&&(h=Function.prototype);var a=Object.getOwnPropertyDescriptor(h,f);if(void 0===a)return h=
Object.getPrototypeOf(h),null===h?void 0:n(h,f,m);if("value"in a)return a.value;f=a.get;return void 0===f?void 0:f.call(m)};Vf.initializeClass._set=function d(f,m,n,a){var k=Object.getOwnPropertyDescriptor(f,m);void 0===k?(f=Object.getPrototypeOf(f),null!==f&&d(f,m,n,a)):"value"in k&&k.writable?k.value=n:(m=k.set,void 0!==m&&m.call(a,n));return n};var PA=Object.freeze({__proto__:null,setPrototypeOf:tM,adoptObject:vz,setSuperclass:YH,initializeClass:$b}),Kd=lively.FreezerRuntime.recorderFor("lively.graphics/color-parser.js");
Kd.parse=ZH;Kd.Color=function(f){this._listeners={};this.subscribe(Kd.Events.RGB_UPDATED,this._RGBUpdated);this.subscribe(Kd.Events.HEX_UPDATED,this._HEXUpdated);this.subscribe(Kd.Events.HSL_UPDATED,this._HSLUpdated);this.subscribe(Kd.Events.HSV_UPDATED,this._HSVUpdated);this.subscribe(Kd.Events.INT_UPDATED,this._INTUpdated);this.parse(f)};Kd.parse=ZH;Kd.parse=ZH;Kd.Events={RGB_UPDATED:"RGBUpdated",HSL_UPDATED:"HSLUpdated",HSV_UPDATED:"HSVUpdated",HEX_UPDATED:"HexUpdated",INT_UPDATED:"IntUpdated",
UPDATED:"updated"};Kd.namedColors={transparent:"rgba(0, 0, 0, 0)",aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",
darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",
fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",
lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",
mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",
sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE"};Kd.absround=function(f){return.5+f<<0};Kd.hue2rgb=function(f,m,n){0>n&&(n+=1);1<n&&--n;return n<1/6?f+6*(m-f)*n:.5>n?m:n<2/3?f+(m-f)*(2/3-n)*6:f};Kd.p2v=function(f){return Kd.isPercent.test(f)?
Kd.absround(2.55*parseInt(f)):f};Kd.isHex=/^#?([0-9a-f]{3}|[0-9a-f]{6})$/i;Kd.isHSL=/^hsla?\((\d{1,3}?),\s*(\d{1,3}%),\s*(\d{1,3}%)(,\s*[01]?\.?\d*)?\)$/;Kd.isRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*[01]?\.?\d*)?\)$/;Kd.isPercent=/^\d+(\.\d+)*%$/;Kd.hexBit=/([0-9a-f])/gi;Kd.leadHex=/^#/;Kd.matchHSL=/^hsla?\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%(,\s*([01]?\.?\d*))?\)$/;Kd.matchRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*([01]?\.?\d*))?\)$/;Kd.Color.prototype._decimal=
0;Kd.Color.prototype._hex="#000000";Kd.Color.prototype._red=0;Kd.Color.prototype._green=0;Kd.Color.prototype._blue=0;Kd.Color.prototype._hue=0;Kd.Color.prototype._saturation=0;Kd.Color.prototype._lightness=0;Kd.Color.prototype._brightness=0;Kd.Color.prototype._alpha=1;Kd.Color.prototype.parse=function(f){if("undefined"===typeof f)return this;switch(!0){case isFinite(f):this.decimal(f);this.output=Kd.Color.INT;break;case f instanceof Kd.Color:this.copy(f);break;default:switch(typeof f){case "object":this.set(f);
break;case "string":switch(!0){case Kd.namedColors.hasOwnProperty(f):f=Kd.namedColors[f];f=f.replace(Kd.leadHex,"");this.decimal(parseInt(f,16));break;case Kd.isHex.test(f):f=f.replace(Kd.leadHex,"");3==f.length&&(f=f.replace(Kd.hexBit,"$1$1"));this.decimal(parseInt(f,16));break;case Kd.isRGB.test(f):f=f.match(Kd.matchRGB);this.red(Kd.p2v(f[1]));this.green(Kd.p2v(f[2]));this.blue(Kd.p2v(f[3]));this.alpha(parseFloat(f[5])||1);this.output=(Kd.isPercent.test(f[1])?2:1)+(f[5]?2:0);break;case Kd.isHSL.test(f):f=
f.match(Kd.matchHSL),this.hue(parseInt(f[1])),this.saturation(parseInt(f[2])),this.lightness(parseInt(f[3])),this.alpha(parseFloat(f[5])||1),this.output=f[5]?6:5}}}return this};Kd.Color.prototype.clone=function(){return new Kd.Color(this.decimal())};Kd.Color.prototype.copy=function(f){this.set(f.decimal());return this};Kd.Color.prototype.set=function(f,m){if(1==arguments.length)if("object"===typeof f)for(var n in f){if("function"===typeof this[n])this[n](f[n])}else isFinite(f)&&this.decimal(f);else if("function"===
typeof this[f])this[f](m);return this};Kd.Color.prototype.interpolate=function(f,m){f instanceof Kd.Color||(f=new Kd.Color(f));this._red=Kd.absround(+this._red+(f._red-this._red)*m);this._green=Kd.absround(+this._green+(f._green-this._green)*m);this._blue=Kd.absround(+this._blue+(f._blue-this._blue)*m);this._alpha=Kd.absround(+this._alpha+(f._alpha-this._alpha)*m);this.broadcast(Kd.Events.RGB_UPDATED);this.broadcast(Kd.Events.UPDATED);return this};Kd.Color.prototype._RGB2HSL=function(){var f=this._red/
255,m=this._green/255,n=this._blue/255,a=Math.max(f,m,n),d=Math.min(f,m,n),k=(a+d)/2;if(a==d)this._saturation=this._hue=0;else{var b=a-d;d=b/(.5>=k?a+d:2-a-d);this._hue=Kd.absround((a==f?(m-n)/b+(m<n?6:0):a==m?(n-f)/b+2:(f-m)/b+4)/6*360);this._saturation=Kd.absround(100*d)}this._lightness=Kd.absround(100*k);this._brightness=Kd.absround(100*a)};Kd.Color.prototype._HSL2RGB=function(){var f=this._hue/360,m=this._saturation/100,n=this._lightness/100;m=.5>n?n*(1+m):n+m-n*m;n=2*n-m;this._red=Kd.absround(255*
Kd.hue2rgb(n,m,f+1/3));this._green=Kd.absround(255*Kd.hue2rgb(n,m,f));this._blue=Kd.absround(255*Kd.hue2rgb(n,m,f-1/3))};Kd.Color.prototype._HSV2RGB=function(){var f=this._hue/360,m=this._saturation/100,n=this._brightness/100,a=0,d=0,k=0,b=Math.floor(6*f),e=6*f-b;f=n*(1-m);var l=n*(1-e*m);m=n*(1-(1-e)*m);switch(b%6){case 0:a=n;d=m;k=f;break;case 1:a=l;d=n;k=f;break;case 2:a=f;d=n;k=m;break;case 3:a=f;d=l;k=n;break;case 4:a=m;d=f;k=n;break;case 5:a=n,d=f,k=l}this._red=Kd.absround(255*a);this._green=
Kd.absround(255*d);this._blue=Kd.absround(255*k)};Kd.Color.prototype._INT2HEX=function(){var f=this._decimal.toString(16);f="000000".substr(0,6-f.length)+f;this._hex="#"+f.toUpperCase()};Kd.Color.prototype._INT2RGB=function(){this._red=this._decimal>>16;this._green=this._decimal>>8&255;this._blue=this._decimal&255};Kd.Color.prototype._HEX2INT=function(){this._decimal=parseInt(this._hex,16)};Kd.Color.prototype._RGB2INT=function(){this._decimal=this._red<<16|this._green<<8&65535|this._blue};Kd.Color.prototype._RGBUpdated=
function(){this._RGB2INT();this._RGB2HSL();this._INT2HEX()};Kd.Color.prototype._HSLUpdated=function(){this._HSL2RGB();this._RGB2INT();this._INT2HEX()};Kd.Color.prototype._HSVUpdated=function(){this._HSV2RGB();this._RGB2INT();this._INT2HEX()};Kd.Color.prototype._HEXUpdated=function(){this._HEX2INT();this._INT2RGB();this._RGB2HSL()};Kd.Color.prototype._INTUpdated=function(){this._INT2RGB();this._RGB2HSL();this._INT2HEX()};Kd.Color.prototype._broadcastUpdate=function(){this.broadcast(Kd.Events.UPDATED)};
Kd.Color.prototype.decimal=function(f){return this._handle("_decimal",f,Kd.Events.INT_UPDATED)};Kd.Color.prototype.hex=function(f){return this._handle("_hex",f,Kd.Events.HEX_UPDATED)};Kd.Color.prototype.red=function(f){return this._handle("_red",f,Kd.Events.RGB_UPDATED)};Kd.Color.prototype.green=function(f){return this._handle("_green",f,Kd.Events.RGB_UPDATED)};Kd.Color.prototype.blue=function(f){return this._handle("_blue",f,Kd.Events.RGB_UPDATED)};Kd.Color.prototype.hue=function(f){return this._handle("_hue",
f,Kd.Events.HSL_UPDATED)};Kd.Color.prototype.saturation=function(f){return this._handle("_saturation",f,Kd.Events.HSL_UPDATED)};Kd.Color.prototype.lightness=function(f){return this._handle("_lightness",f,Kd.Events.HSL_UPDATED)};Kd.Color.prototype.brightness=function(f){return this._handle("_brightness",f,Kd.Events.HSV_UPDATED)};Kd.Color.prototype.alpha=function(f){return this._handle("_alpha",f)};Kd.Color.prototype._handle=function(f,m,n){"undefined"!==typeof this[f]&&"undefined"!==typeof m&&(m!=
this[f]&&(this[f]=m,n&&this.broadcast(n)),this.broadcast(Kd.Events.UPDATED));return this[f]};Kd.Color.prototype.getHex=function(){return this._hex};Kd.Color.prototype.getRGB=function(){return"rgb("+[Kd.absround(this._red),Kd.absround(this._green),Kd.absround(this._blue)].join(", ")+")"};Kd.Color.prototype.getPRGB=function(){return"rgb("+[Kd.absround(100*this._red/255)+"%",Kd.absround(100*this._green/255)+"%",Kd.absround(100*this._blue/255)+"%"].join(", ")+")"};Kd.Color.prototype.getRGBA=function(){return"rgba("+
[Kd.absround(this._red),Kd.absround(this._green),Kd.absround(this._blue),this._alpha].join(", ")+")"};Kd.Color.prototype.getPRGBA=function(){return"rgba("+[Kd.absround(100*this._red/255)+"%",Kd.absround(100*this._green/255)+"%",Kd.absround(100*this._blue/255)+"%",this._alpha].join(", ")+")"};Kd.Color.prototype.getHSL=function(){return"hsl("+[Kd.absround(this._hue),Kd.absround(this._saturation)+"%",Kd.absround(this._lightness)+"%"].join(", ")+")"};Kd.Color.prototype.getHSLA=function(){return"hsla("+
[Kd.absround(this._hue),Kd.absround(this._saturation)+"%",Kd.absround(this._lightness)+"%",this._alpha].join(", ")+")"};Kd.Color.prototype.format=function(f){var m={r:this._red,g:this._green,b:this._blue,h:this._hue,s:this._saturation,l:this._lightness,v:this._brightness,a:this._alpha,x:this._hex,d:this._decimal},n;for(n in m)f=f.split("%"+n+"%").join(m[n]);return f};Kd.Color.prototype.output=0;Kd.Color.HEX=0;Kd.Color.RGB=1;Kd.Color.PRGB=2;Kd.Color.RGBA=3;Kd.Color.PRGBA=4;Kd.Color.HSL=5;Kd.Color.HSLA=
6;Kd.Color.INT=7;Kd.Color.prototype.toString=function(){switch(this.output){case 1:return this.getRGB();case 2:return this.getPRGB();case 3:return this.getRGBA();case 4:return this.getPRGBA();case 5:return this.getHSL();case 6:return this.getHSLA();case 7:return this._decimal}return this.getHex()};Kd.Color.prototype._listeners=null;Kd.Color.prototype._isSubscribed=function(f){return null!=this._listeners[f]};Kd.Color.prototype.subscribe=function(f,m){this._isSubscribed(f)||(this._listeners[f]=[]);
this._listeners[f].push(m)};Kd.Color.prototype.unsubscribe=function(f,m){if(this._isSubscribed(f))for(var n=this._listeners[f],a=0,d=n.length;a<d;a++)if(n[a]===m)return n.splice(a,1),this.unsubscribe(f,m)};Kd.Color.prototype.broadcast=function(f,m){if(this._isSubscribed(f)){f=this._listeners[f];for(var n=f.length,a=0;a<n;a++)f[a].apply(this,m)}};Kd.Color.prototype.tween=function(f,m){m instanceof Kd.Color||(m=new Kd.Color(m));var n=+new Date,a=this;this.broadcast("tweenStart");var d=setInterval(function(){var k=
Math.min(1,(+new Date-n)/f);a.interpolate(m,k);a.broadcast("tweenProgress");1==k&&(clearInterval(d),a.broadcast("tweenComplete"))},20);return d};Kd.Color.prototype.bind=function(f,m){var n=this;this.subscribe("updated",function(){f[m]=n.toString()})};Kd.Color.random=function(){return new Kd.Color(Kd.absround(16777215*Math.random()))};Kd.Color.bind=function(f,m){var n=new Kd.Color(f[m]);n.bind(f,m);return n};var yi=lively.FreezerRuntime.recorderFor("lively.graphics/convert-css-length.js");yi.parseUnit=
function(f,m){m||(m=[0,""]);f=String(f);var n=parseFloat(f,10);m[0]=n;m[1]=f.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return m};yi.unit=function(f){return yi.parseUnit(f)[1]};yi.unitLess=function(f){return yi.parseUnit(f)[0]};yi.genericCssLengthParser=MQ;yi.cssLengthToPixels=$H;yi.baseFontSize="16px";if(System.get("@system-env").browser)try{yi.newBaseFontSize=yi.genericCssLengthParser(yi.baseFontSize)(window.getComputedStyle(document.body).fontSize),yi.newBaseFontSize&&"NaN"!==yi.newBaseFontSize.slice(0,
3)&&(yi.baseFontSize=yi.newBaseFontSize)}catch(f){}yi.genericCssLengthParser=MQ;yi.genericCssLengthParser=MQ;var FV=yi.genericCssLengthParser(yi.baseFontSize);yi.parseCssLength=FV;yi.parseCssLength=FV;yi.parseCssLength=FV;yi.cssLengthToPixels=$H;yi.cssLengthToPixels=$H;var Xd=lively.FreezerRuntime.recorderFor("lively.graphics/geometry-2d.js");Xd.rect=Ll;Xd.pt=ui;Xd.num=zl;Xd.string=Dh;Xd.grid=FA;Xd.cssLengthToPixels=$H;var sg=function(f,m){this.x=f||0;this.y=m||0};sg.ensure=function(f){return f instanceof
Xd.Point?f:new Xd.Point(f.x,f.y)};sg.polar=function(f,m){return new Xd.Point(f*Math.cos(m),f*Math.sin(m))};sg.random=function(f){return new Xd.Point(Xd.num.randomSmallerInteger(f.x),Xd.num.randomSmallerInteger(f.y))};sg.fromLiteral=function(f){return Xd.pt(f.x,f.y)};sg.fromTuple=function(f){return Xd.pt(f[0],f[1])};sg.prototype.getX=function(){return this.x};sg.prototype.getY=function(){return this.y};sg.prototype.toFixed=function(f){return new Xd.Point(this.x.toFixed(f),this.y.toFixed(f))};sg.prototype.addPt=
function(f){return new Xd.Point(this.x+f.x,this.y+f.y)};sg.prototype.addXY=function(f,m){return new Xd.Point(this.x+f,this.y+m)};sg.prototype.midPt=function(f){return new Xd.Point((this.x+f.x)/2,(this.y+f.y)/2)};sg.prototype.subPt=function(f){return new Xd.Point(this.x-f.x,this.y-f.y)};sg.prototype.subXY=function(f,m){return new Xd.Point(this.x-f,this.y-m)};sg.prototype.scaleBy=function(f,m){return new Xd.Point(this.x*f,this.y*(m||f))};sg.prototype.scaleByPt=function(f){return new Xd.Point(this.x*
f.x,this.y*f.y)};sg.prototype.negated=function(){return new Xd.Point(-this.x,-this.y)};sg.prototype.inverted=function(){return new Xd.Point(1/this.x,1/this.y)};sg.prototype.invertedSafely=function(){return new Xd.Point(this.x&&1/this.x,this.y&&1/this.y)};sg.prototype.lessPt=function(f){return this.x<f.x&&this.y<f.y};sg.prototype.leqPt=function(f){return this.x<=f.x&&this.y<=f.y};sg.prototype.eqPt=function(f){return this.x==f.x&&this.y==f.y};sg.prototype.equals=function(f){return this.x==f.x&&this.y==
f.y};sg.prototype.withX=function(f){return Xd.pt(f,this.y)};sg.prototype.withY=function(f){return Xd.pt(this.x,f)};sg.prototype.copy=function(){return new Xd.Point(this.x,this.y)};sg.prototype.minPt=function(f,m){m||(m=new Xd.Point(0,0));m.x=Math.min(this.x,f.x);m.y=Math.min(this.y,f.y);return m};sg.prototype.maxPt=function(f,m){m||(m=new Xd.Point(0,0));m.x=Math.max(this.x,f.x);m.y=Math.max(this.y,f.y);return m};sg.prototype.random=function(){return Xd.Point.random(this)};sg.prototype.normalized=
function(){var f=this.r();return Xd.pt(this.x/f,this.y/f)};sg.prototype.fastNormalized=function(){var f=this.fastR();return Xd.pt(this.x/f,this.y/f)};sg.prototype.dotProduct=function(f){return this.x*f.x+this.y*f.y};sg.prototype.matrixTransform=function(f,m){var n=f.a*this.x+f.c*this.y+f.e;f=f.b*this.x+f.d*this.y+f.f;return m?Object.assign(m,{x:n,y:f}):Xd.pt(n,f)};sg.prototype.matrixTransformDirection=function(f,m){var n=f.a*this.x+f.c*this.y;f=f.b*this.x+f.d*this.y;return m?Object.assign(m,{x:n,
y:f}):Xd.pt(n,f)};sg.prototype.griddedBy=function(f){return Xd.pt(this.x-this.x%f.x,this.y-this.y%f.y)};sg.prototype.roundTo=function(f){return new Xd.Point(Xd.num.roundTo(this.x,f),Xd.num.roundTo(this.y,f))};sg.prototype.dist=function(f){var m=this.x-f.x;f=this.y-f.y;return Math.sqrt(m*m+f*f)};sg.prototype.distSquared=function(f){var m=this.x-f.x;f=this.y-f.y;return m*m+f*f};sg.prototype.nearestPointOnLineBetween=function(f,m){if(f.x==m.x)return Xd.pt(f.x,this.y);if(f.y==m.y)return Xd.pt(this.x,
f.y);var n=f.x;f=f.y;var a=m.x-n;m=m.y-f;var d=((this.y-f)/a+(this.x-n)/m)/(a/m+m/a);return Xd.pt(n+d*a,f+d*m)};sg.prototype.interpolate=function(f,m,n){return void 0===n||n?Xd.pt(Xd.num.interpolate(f,this.x,m.x),Xd.num.interpolate(f,this.y,m.y)):Xd.Point.polar(Xd.num.interpolate(f,this.r(),m.r()),Xd.num.interpolate(f,this.theta(),m.theta()))};sg.prototype.r=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};sg.prototype.fastR=function(){for(var f=this.x*this.x+this.y*this.y,m=17,n=0;6>n;n++)m=
(m+f/m)/2;return m};sg.prototype.theta=function(){return Math.atan2(this.y,this.x)};sg.prototype.asRectangle=function(){return new Xd.Rectangle(this.x,this.y,0,0)};sg.prototype.extent=function(f){return new Xd.Rectangle(this.x,this.y,f.x,f.y)};sg.prototype.extentAsRectangle=function(){return new Xd.Rectangle(0,0,this.x,this.y)};sg.prototype.lineTo=function(f){return new Xd.Line(this,f)};sg.prototype.toTuple=function(){return[this.x,this.y]};sg.prototype.toLiteral=function(){return{x:this.x,y:this.y}};
sg.prototype.toString=function(f){return void 0===f||f?Xd.string.format("pt(%1.f,%1.f)",this.x,this.y):Xd.string.format("pt(%10.d,%10.d)",this.x,this.y)};sg.prototype.inspect=function(){return JSON.stringify(this)};sg.prototype.__serialize__=function(){return{__expr__:this.toString(!1),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}};$jscomp.global.Object.defineProperties(sg.prototype,{isPoint:{configurable:!0,enumerable:!0,get:function(){return!0}}});Ma("ab",sg);Xd.Point=sg;var Fe=function(f,
m,n,a){this.x=f||0;this.y=m||0;this.width=n||0;this.height=a||0};Fe.fromAny=function(f,m){return Xd.rect(f.minPt(m),f.maxPt(m))};Fe.fromLiteral=function(f){return new Xd.Rectangle(f.x,f.y,f.width,f.height)};Fe.fromTuple=function(f){return new Xd.Rectangle(f[0],f[1],f[2],f[3])};Fe.unionPts=function(f){for(var m=f[0],n=f[0],a=1;a<f.length;a++)m=m.minPt(f[a]),n=n.maxPt(f[a]);return Xd.rect(m,n)};Fe.ensure=function(f){return f instanceof Xd.Rectangle?f:new Xd.Rectangle(f.x,f.y,f.width,f.height)};Fe.fromElement=
function(f){if("function"===typeof f.getBoundingClientRect){var m=f.getBoundingClientRect();return Xd.rect(m.left,m.top,m.width,m.height)}if("http://www.w3.org/1999/xhtml"==f.namespaceURI){m=Xd.cssLengthToPixels(f.style.left||"0px");var n=Xd.cssLengthToPixels(f.style.top||"0px"),a=Xd.cssLengthToPixels(f.style.width||"0px");f=Xd.cssLengthToPixels(f.style.hieght||"0px");return new Xd.Rectangle(m,n,a,f)}if("http://www.w3.org/2000/svg"==f.namespaceURI)return new Xd.Rectangle(f.x.baseVal.value,f.y.baseVal.value,
f.width.baseVal.value,f.height.baseVal.value);throw Error("Cannot create Rectangle from "+f);};Fe.inset=function(f,m,n,a){void 0===m&&(m=f);void 0===n&&(n=f);void 0===a&&(a=m);return new Xd.Rectangle(f,m,n-f,a-m)};Fe.prototype.getX=function(){return this.x};Fe.prototype.getY=function(){return this.y};Fe.prototype.getWidth=function(){return this.width};Fe.prototype.getHeight=function(){return this.height};Fe.prototype.copy=function(){return new Xd.Rectangle(this.x,this.y,this.width,this.height)};Fe.prototype.toFixed=
function(f){return new Xd.Rectangle(this.x.toFixed(f),this.y.toFixed(f),this.width.toFixed(f),this.height.toFixed(f))};Fe.prototype.withWidth=function(f){return new Xd.Rectangle(this.x,this.y,f,this.height)};Fe.prototype.withHeight=function(f){return new Xd.Rectangle(this.x,this.y,this.width,f)};Fe.prototype.withX=function(f){return new Xd.Rectangle(f,this.y,this.width,this.height)};Fe.prototype.withY=function(f){return new Xd.Rectangle(this.x,f,this.width,this.height)};Fe.prototype.withExtent=function(f){return new Xd.Rectangle(this.x,
this.y,f.x,f.y)};Fe.prototype.withTopLeft=function(f){return Xd.Rectangle.fromAny(f,this.bottomRight())};Fe.prototype.withTopRight=function(f){return Xd.Rectangle.fromAny(this.bottomLeft(),f)};Fe.prototype.withBottomRight=function(f){return Xd.Rectangle.fromAny(f,this.topLeft())};Fe.prototype.withBottomLeft=function(f){return Xd.Rectangle.fromAny(f,this.topRight())};Fe.prototype.withLeftCenter=function(f){return new Xd.Rectangle(f.x,this.y,this.width+(this.x-f.x),this.height)};Fe.prototype.withRightCenter=
function(f){return new Xd.Rectangle(this.x,this.y,f.x-this.x,this.height)};Fe.prototype.withTopCenter=function(f){return new Xd.Rectangle(this.x,f.y,this.width,this.height+(this.y-f.y))};Fe.prototype.withBottomCenter=function(f){return new Xd.Rectangle(this.x,this.y,this.width,f.y-this.y)};Fe.prototype.withCenter=function(f){return new Xd.Rectangle(f.x-this.width/2,f.y-this.height/2,this.width,this.height)};Fe.prototype.insetBy=function(f){return new Xd.Rectangle(this.x+f,this.y+f,this.width-2*f,
this.height-2*f)};Fe.prototype.insetByPt=function(f){return new Xd.Rectangle(this.x+f.x,this.y+f.y,this.width-2*f.x,this.height-2*f.y)};Fe.prototype.grid=function(f,m){var n=this.width/m,a=this.height/f;return Xd.grid.mapCreate(f,m,function(d,k){return new Xd.Rectangle(n*k,a*d,n,a)})};Fe.prototype.divide=function(f){var m=this;return f.map(function(n){return Xd.rect(m.x+m.width*n.x,m.y+m.height*n.y,m.width*n.width,m.height*n.height)})};Fe.prototype.toTuple=function(){return[this.x,this.y,this.width,
this.height]};Fe.prototype.lineTo=function(f){var m=this.center(),n=f.center();n=m.lineTo(n);m=this.lineIntersection(n)[0];f=f.lineIntersection(n)[0];return m&&f&&m.lineTo(f)};Fe.prototype.equals=function(f){return f?this.x==f.x&&this.y==f.y&&this.width==f.width&&this.height==f.height:!1};Fe.prototype.inspect=function(){return JSON.stringify(this)};Fe.prototype.topLeft=function(){return new Xd.Point(this.x,this.y)};Fe.prototype.topRight=function(){return new Xd.Point(this.maxX(),this.y)};Fe.prototype.bottomRight=
function(){return new Xd.Point(this.maxX(),this.maxY())};Fe.prototype.bottomLeft=function(){return new Xd.Point(this.x,this.maxY())};Fe.prototype.leftCenter=function(){return new Xd.Point(this.x,this.center().y)};Fe.prototype.rightCenter=function(){return new Xd.Point(this.maxX(),this.center().y)};Fe.prototype.topCenter=function(){return new Xd.Point(this.center().x,this.y)};Fe.prototype.bottomCenter=function(){return new Xd.Point(this.center().x,this.maxY())};Fe.prototype.extent=function(){return new Xd.Point(this.width,
this.height)};Fe.prototype.center=function(){return new Xd.Point(this.x+this.width/2,this.y+this.height/2)};Fe.prototype.topEdge=function(){return new Xd.Line(this.topLeft(),this.topRight())};Fe.prototype.bottomEdge=function(){return new Xd.Line(this.bottomLeft(),this.bottomRight())};Fe.prototype.leftEdge=function(){return new Xd.Line(this.topLeft(),this.bottomLeft())};Fe.prototype.rightEdge=function(){return new Xd.Line(this.topRight(),this.bottomRight())};Fe.prototype.edges=function(){return[this.topEdge(),
this.rightEdge(),this.bottomEdge(),this.leftEdge()]};Fe.prototype.allPoints=function(){for(var f=this.x,m=this.y,n=this.width,a=this.height,d=[],k=m;k<m+a;k++)for(var b=f;b<f+n;b++)d.push(Xd.pt(b,k));return d};Fe.prototype.isNonEmpty=function(f){return 0<this.width&&0<this.height};Fe.prototype.containsRect=function(f){return this.x<=f.x&&this.y<=f.y&&f.maxX()<=this.maxX()&&f.maxY()<=this.maxY()};Fe.prototype.intersects=function(f){return this.intersection(f).isNonEmpty()};Fe.prototype.containsPoint=
function(f){return this.x<=f.x&&f.x<=this.x+this.width&&this.y<=f.y&&f.y<=this.y+this.height};Fe.prototype.translatedBy=function(f){return new Xd.Rectangle(this.x+f.x,this.y+f.y,this.width,this.height)};Fe.prototype.scaleByRect=function(f){return new Xd.Rectangle(this.x+f.x*this.width,this.y+f.y*this.height,f.width*this.width,f.height*this.height)};Fe.prototype.scaleRectIn=function(f){return new Xd.Rectangle((this.x-f.x)/f.width,(this.y-f.y)/f.height,this.width/f.width,this.height/f.height)};Fe.prototype.scaleRectTo=
function(f){var m,n;this.width>this.height?n=this.width:m=this.height;f=n?f.width/n:f.height/m;return this.withExtent(this.extent().scaleBy(f)).withCenter(this.center())};Fe.prototype.expandBy=function(f){return this.insetBy(0-f)};Fe.prototype.translateForInclusion=function(f){var m=f.x,n=f.y,a=m+f.width,d=n+f.height;a>this.right()&&(m-=a-this.right());d>this.bottom()&&(n-=d-this.bottom());m<this.x&&(m=this.x);n<this.y&&(n=this.y);return Xd.rect(m,n,f.width,f.height)};Fe.prototype.transformRectForInclusion=
function(f){var m=this.topLeft().maxPt(f.topLeft());f=m.addPt(f.extent());f=this.bottomRight().minPt(f);return Xd.rect(m,f)};Fe.prototype.insetByRect=function(f){return new Xd.Rectangle(this.x+f.left(),this.y+f.top(),this.width-(f.left()+f.right()),this.height-(f.top()+f.bottom()))};Fe.prototype.outsetByRect=function(f){return new Xd.Rectangle(this.x-f.left(),this.y-f.top(),this.width+(f.left()+f.right()),this.height+(f.top()+f.bottom()))};Fe.prototype.interpolate=function(f,m){var n=this.topLeft(),
a=this.bottomRight(),d=m.topLeft();m=m.bottomRight();return Xd.Rectangle.fromAny(n.interpolate(f,d),a.interpolate(f,m))};Fe.prototype.intersection=function(f){var m=Math.max(this.x,f.x),n=Math.max(this.y,f.y);return new Xd.Rectangle(m,n,Math.min(this.x+this.width,f.x+f.width)-m,Math.min(this.y+this.height,f.y+f.height)-n)};Fe.prototype.union=function(f){return Xd.rect(this.topLeft().minPt(f.topLeft()),this.bottomRight().maxPt(f.bottomRight()))};Fe.prototype.lineIntersection=function(f){return this.edges().map(function(m){return m.intersection(f)}).filter(function(m){return!!m})};
Fe.prototype.dist=function(f){var m=this.closestPointToPt(f.center());f=f.closestPointToPt(m);return m.dist(f)};Fe.prototype.relativeToAbsPoint=function(f){return new Xd.Point(this.x+this.width*f.x,this.y+this.height*f.y)};Fe.prototype.closestPointToPt=function(f){return Xd.pt(Math.min(Math.max(this.x,f.x),this.maxX()),Math.min(Math.max(this.y,f.y),this.maxY()))};Fe.prototype.maxX=function(){return this.x+this.width};Fe.prototype.maxY=function(){return this.y+this.height};Fe.prototype.realWidth=function(){return 0>
this.x?-this.x+this.width:this.width};Fe.prototype.realHeight=function(){return 0>this.y?-this.y+this.height:this.height};Fe.prototype.area=function(){return(0>this.width&&0>this.height?-1:1)*this.width*this.height};Fe.prototype.randomPoint=function(){return Xd.Point.random(Xd.pt(this.width,this.height)).addPt(this.topLeft())};Fe.prototype.constrainPt=function(f){return f.maxPt(this.topLeft()).minPt(this.bottomRight())};Fe.prototype.left=function(){return this.x};Fe.prototype.right=function(){return this.maxX()};
Fe.prototype.top=function(){return this.y};Fe.prototype.bottom=function(){return this.maxY()};Fe.prototype.toInsetTuple=function(){return[this.left(),this.top(),this.right(),this.bottom()]};Fe.prototype.toAttributeValue=function(f){f=.01;var m=[this.left()];this.top()===this.bottom()&&this.left()===this.right()?this.top()===this.left()&&m.push(this.top()):m=m.concat([this.top(),this.right(),this.bottom()]);return m.invoke("roundTo",f||.01)};Fe.prototype.toLiteral=function(){return{x:this.x,y:this.y,
width:this.width,height:this.height}};Fe.prototype.partNamed=function(f){return this[f].call(this)};Fe.prototype.withPartNamed=function(f,m){return this[this.setterName(f)].call(this,m)};Fe.prototype.setterName=function(f){return"with"+f[0].toUpperCase()+f.slice(1)};Fe.prototype.partNameNear=function(f,m,n){f=this.partNameNearest(f,m);return m.dist(this.partNamed(f))<n?f:null};Fe.prototype.partNameNearest=function(f,m){for(var n=1E99,a,d=0;d<f.length;d++){a=f[d];var k=m.dist(this.partNamed(a));if(k<
n){var b=a;n=k}}return b};Fe.prototype.toString=function(){return Xd.string.format("rect(%s,%s,%s,%s)",this.x,this.y,this.width,this.height)};Fe.prototype.__serialize__=function(){return{__expr__:this.toString(),bindings:{"lively.graphics/geometry-2d.js":["rect"]}}};$jscomp.global.Object.defineProperties(Fe.prototype,{corners:{configurable:!0,enumerable:!0,get:function(){return["topLeft","topRight","bottomRight","bottomLeft"]}},sides:{configurable:!0,enumerable:!0,get:function(){return["leftCenter",
"rightCenter","topCenter","bottomCenter"]}},isRectangle:{configurable:!0,enumerable:!0,get:function(){return!0}}});Ma("R",Fe);Xd.Rectangle=Fe;var sk=function(f,m,n){f?f instanceof Xd.Point?(m=m||0,void 0===n&&(n=Xd.pt(1,1)),this.a=this.ensureNumber(n.x*Math.cos(m)),this.b=this.ensureNumber(n.y*Math.sin(m)),this.c=this.ensureNumber(n.x*-Math.sin(m)),this.d=this.ensureNumber(n.y*Math.cos(m)),this.e=this.ensureNumber(f.x),this.f=this.ensureNumber(f.y),1<this.a&&(this.a=Math.round(this.a*Math.pow(10,
2))/Math.pow(10,2)),1<this.d&&(this.d=Math.round(this.d*Math.pow(10,2))/Math.pow(10,2))):this.fromMatrix(f):(this.a=this.d=1,this.b=this.c=this.e=this.f=0)};sk.prototype.copy=function(){return new Xd.Transform(this)};sk.prototype.fromMatrix=function(f){this.a=this.ensureNumber(f.a);this.b=this.ensureNumber(f.b);this.c=this.ensureNumber(f.c);this.d=this.ensureNumber(f.d);this.e=this.ensureNumber(f.e);this.f=this.ensureNumber(f.f)};sk.prototype.getRotation=function(){var f=Xd.num.toDegrees(Math.atan2(-this.c,
this.a));return Math.abs(f)<this.eps?0:f};sk.prototype.getScale=function(){var f=this.a,m=this.c;f=Math.sqrt(f*f+m*m);return Math.abs(f-1)<this.eps?1:f};sk.prototype.getScalePoint=function(){var f=this.a,m=this.b,n=this.c,a=this.d,d=Math.atan2(-n,f);return Xd.pt(Math.sqrt(f*f+n*n),Math.abs(m)>Math.abs(a)?m/Math.sin(d):a/Math.cos(d))};sk.prototype.getTranslation=function(){return Xd.pt(this.e,this.f)};sk.prototype.isTranslation=function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d};sk.prototype.toSVGAttributeValue=
function(){var f=this.getTranslation();f="translate("+f.x+","+f.y+")";var m=this.getRotation(),n=this.getScalePoint();0!=m&&(f+=" rotate("+this.getRotation()+")");if(1!=n.x||1!=n.y)f+=" scale("+n.x+","+n.y+")";return f};sk.prototype.toCSSValue=function(f){var m="",n=this.getTranslation();m+="translate("+n.x.toFixed(2)+"px,"+n.y.toFixed(2)+"px)";if(f){n=f.width/2;var a=f.height/2;m+=" translate("+n.toFixed(2)+"px,"+a.toFixed(2)+"px)"}0!=this.getRotation()&&(m+=" rotate("+this.getRotation().toFixed(2)+
"deg)");f&&(n=f.width/2,a=f.height/2,m+=" translate("+(-1*n).toFixed(2)+"px,"+(-1*a).toFixed(2)+"px)");f=this.getScalePoint();if(1!=f.x||1!=f.y)m+=" scale("+f.x.toFixed(2)+","+f.y.toFixed(2)+")";return m};sk.prototype.toCSSTransformString=function(){var f=this.getRotation(),m=this.getScale();return"translate("+this.e+"px,"+this.f+"px) rotate("+f+"deg) scale("+m+","+m+")"};sk.prototype.toString=function(){return this.toCSSTransformString()};sk.prototype.toMatrix=function(){return this.copy()};sk.prototype.transformPoint=
function(f,m){return f.matrixTransform(this,m)};sk.prototype.transformDirection=function(f,m){return f.matrixTransformDirection(this,m)};sk.prototype.matrixTransformForMinMax=function(f,m,n){var a=this.a*f.x+this.c*f.y+this.e;f=this.b*f.x+this.d*f.y+this.f;a>n.x&&(n.x=a);f>n.y&&(n.y=f);a<m.x&&(m.x=a);f<m.y&&(m.y=f)};sk.prototype.transformRectToRect=function(f){var m=Xd.pt(Infinity,Infinity),n=Xd.pt(-Infinity,-Infinity);this.matrixTransformForMinMax(f.topLeft(),m,n);this.matrixTransformForMinMax(f.bottomRight(),
m,n);this.isTranslation()||(this.matrixTransformForMinMax(f.topRight(),m,n),this.matrixTransformForMinMax(f.bottomLeft(),m,n));return Xd.rect(m,n)};sk.prototype.preConcatenate=function(f){var m=this.matrix_||this.toMatrix();this.a=f.a*m.a+f.c*m.b;this.b=f.b*m.a+f.d*m.b;this.c=f.a*m.c+f.c*m.d;this.d=f.b*m.c+f.d*m.d;this.e=f.a*m.e+f.c*m.f+f.e;this.f=f.b*m.e+f.d*m.f+f.f;this.matrix_=this.toMatrix();return this};sk.prototype.invert=function(){var f=this.copy(),m=1/(f.a*f.d-f.c*f.b);this.a=f.d*m;this.b=
-f.b*m;this.c=-f.c*m;this.d=f.a*m;this.e=(f.c*f.f-f.e*f.d)*m;this.f=-(f.a*f.f-f.b*f.e)*m;return this};sk.prototype.inverse=function(){var f=this.matrix_||this.toMatrix();f=new this.constructor(f);f.invert();return f};sk.prototype.ensureNumber=function(f){if(isNaN(f))throw Error("not a number");return f};sk.prototype.__serialize__=function(){return{__expr__:"new Transform({a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", e: "+this.e+", f: "+this.f+"})",bindings:{"lively.graphics/geometry-2d.js":["Transform"]}}};
$jscomp.global.Object.defineProperties(sk.prototype,{exp:{configurable:!0,enumerable:!0,get:function(){return 1E-4}},isTransform:{configurable:!0,enumerable:!0,get:function(){return!0}}});Xd.Transform=sk;var Yl=function(f,m){this.start=f;this.end=m};Yl.fromCoords=function(f,m,n,a){return new Xd.Line(Xd.pt(f,m),Xd.pt(n,a))};Yl.prototype.withStart=function(f){return new Xd.Line(f,this.end)};Yl.prototype.withEnd=function(f){return new Xd.Line(this.start,f)};Yl.prototype.sampleN=function(f){f=f||10;for(var m=
this.end.subPt(this.start).scaleBy(1/f),n=[],a=0;a<=f;a++)n.push(this.start.addPt(m.scaleBy(a)));return n};Yl.prototype.sample=function(f){return this.sampleN(this.length()/f)};Yl.prototype.length=function(){return this.start.dist(this.end)};Yl.prototype.equals=function(f){return f?this.start.eqPt(f.start)&&this.end.eqPt(f.end):!1};Yl.prototype.distanceFromLine=function(f){var m=this.start.x,n=this.start.y,a=this.end.x,d=this.end.y;return Math.abs((d-n)*f.x-(a-m)*f.y+a*n-d*m)/Math.sqrt(Math.pow(d-
n,2)+Math.pow(a-m,2))};Yl.prototype.includesPoint=function(f,m){var n=this.start.x,a=this.start.y,d=this.end.x,k=this.end.y,b=f.x;f=f.y;var e=0===(d-n)*(f-a)-(b-n)*(k-a);if(m||!e)return e;m=Math.min(a,k);e=Math.max(n,d);a=Math.max(a,k);return Math.min(n,d)<=b&&b<=e&&m<=f&&f<=a};Yl.prototype.intersection=function(f,m){var n=this.start,a=this.end,d=f.start,k=f.end;f=n.x;n=n.y;var b=a.x;a=a.y;var e=d.x;d=d.y;var l=k.x;k=k.y;var p=((f*a-n*b)*(e-l)-(f-b)*(e*k-d*l))/((f-b)*(d-k)-(n-a)*(e-l)),u=((f*a-n*
b)*(d-k)-(n-a)*(e*k-d*l))/((f-b)*(d-k)-(n-a)*(e-l));return Infinity!==p&&Infinity!==u&&(m||Xd.num.between(p,f,b,1E-4)&&Xd.num.between(u,n,a,1E-4)&&Xd.num.between(p,e,l,1E-4)&&Xd.num.between(u,d,k,1E-4))?Xd.pt(p,u):null};Yl.prototype.perpendicularLine=function(f,m,n){f=void 0===f?0:f;m=void 0===m?1:m;n=void 0===n?"cc":n;var a=this.start,d=this.toVector();f=a.addPt(d.scaleBy(f));n=d.theta()+("cc"===n?-1:1)*Math.PI/2;return new Xd.Line(f,f.addPt(Xd.Point.polar(m,n)))};Yl.prototype.toVector=function(){return this.end.subPt(this.start)};
Yl.prototype.toString=function(){return Xd.string.format("Line((%s,%s), (%s,%s))",this.start.x,this.start.y,this.end.x,this.end.y)};Yl.prototype.__serialize__=function(){return{__expr__:"Line.fromCoords("+this.start.x+", "+this.start.y+", "+this.end.x+", "+this.end.y+")",bindings:{"lively.graphics/geometry-2d.js":["Line"]}}};$jscomp.global.Object.defineProperties(Yl.prototype,{isLine:{configurable:!0,enumerable:!0,get:function(){return!0}}});Xd.Line=Yl;Xd.rect=Ll;Xd.rect=Ll;Xd.pt=ui;Xd.pt=ui;var mqa=
Object.freeze({__proto__:null,Point:sg,Rectangle:Fe,Transform:sk,Line:Yl,rect:Ll,pt:ui}),Ud=lively.FreezerRuntime.recorderFor("lively.graphics/color.js");Ud.floor=function(f){return Math.floor(255.99*f)};Ud.pad=function(f,m,n){n=void 0===n?Ud.arr.last:n;return[].concat($jscomp.arrayFromIterable(f),$jscomp.arrayFromIterable(Array(Math.max(m-f.length,0)).fill(n(f))))};Ud.num=zl;Ud.obj=eg;Ud.arr=Gf;Ud.parse=ZH;Ud.Rectangle=Fe;Ud.rect=Ll;Ud.pt=ui;Ud.Point=sg;Ud.rgbaRegex=/\s*rgba?\s*\(\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*(?:,\s*([0-9\.]+)\s*)?\)\s*/;
var QA=function(){};QA.prototype.offsets=function(){return null};QA.prototype.stepCount=function(){return 0};QA.prototype.stepSize=function(){return 0};QA.prototype.chord=function(f){var m=this,n=f.hue,a=f.saturation,d=f.brightness;return(this.offsets()||Ud.arr.range(0,this.steps()).map(function(k){return k*m.stepSize()})).map(function(k){return Ud.Color.hsb(n+k%360,a,d)})};$jscomp.global.Object.defineProperties(QA.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Color Harmony"}}});
Ud.ColorHarmony=QA;var Cu=function(){return Ud.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Cu,Ud.ColorHarmony);Cu.prototype.steps=function(){return 1};Cu.prototype.stepSize=function(){return 180};$jscomp.global.Object.defineProperties(Cu.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Complement"}}});Ma("bh",Cu);Ud.Complementary=Cu;var Du=function(){return Ud.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Du,Ud.ColorHarmony);Du.prototype.steps=function(){return 2};
Du.prototype.stepSize=function(){return 120};$jscomp.global.Object.defineProperties(Du.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Triadic"}}});Ma("bi",Du);Ud.Triadic=Du;var tx=function(){return Ud.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(tx,Ud.ColorHarmony);tx.prototype.offsets=function(){return[0,60,180,240]};$jscomp.global.Object.defineProperties(tx.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Tetradic"}}});Ma("bj",tx);Ud.Tetradic=
tx;var Eu=function(){return Ud.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Eu,Ud.ColorHarmony);Eu.prototype.steps=function(){return 3};Eu.prototype.stepSize=function(){return 90};$jscomp.global.Object.defineProperties(Eu.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Quadratic"}}});Ma("bk",Eu);Ud.Quadratic=Eu;var Fu=function(){return Ud.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Fu,Ud.ColorHarmony);Fu.prototype.steps=function(){return 5};Fu.prototype.offsets=
function(){return[-60,-30,0,30,60]};$jscomp.global.Object.defineProperties(Fu.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Analogous"}}});Ma("bl",Fu);Ud.Analogous=Fu;var ux=function(){return Ud.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(ux,Ud.ColorHarmony);ux.prototype.offsets=function(){return[-30,-15,0,15,30]};$jscomp.global.Object.defineProperties(ux.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Neutral"}}});Ma("bm",ux);Ud.Neutral=
ux;var ng=function(f,m,n,a){this.r=f||0;this.g=m||0;this.b=n||0;this.a=a||(0===a?0:1)};ng.random=function(f,m){void 0===f&&(f=0);void 0===m&&(m=255);return Ud.Color.rgb(Ud.num.random(f,m),Ud.num.random(f,m),Ud.num.random(f,m))};ng.hsb=function(f,m,n){if(0==m)return new Ud.Color(n,n,n);var a=f%360/60;f=Math.floor(a);var d=a-f;a=(1-m)*n;var k=(1-m*d)*n;m=(1-m*(1-d))*n;switch(f){case 0:return new Ud.Color(n,m,a);case 1:return new Ud.Color(k,n,a);case 2:return new Ud.Color(a,n,m);case 3:return new Ud.Color(a,
k,n);case 4:return new Ud.Color(m,a,n);case 5:return new Ud.Color(n,a,k);default:return new Ud.Color(0,0,0)}};ng.wheel=function(f){return Ud.Color.wheelHsb(void 0===f?10:f,0,.9,.7)};ng.wheelHsb=function(f,m,n,a){for(var d=Array(f),k=360/Math.max(f,1),b=0;b<f;b++)d[b]=Ud.Color.hsb(m+b*k,n,a);return d};ng.rgb=function(f,m,n){return new Ud.Color(f/255,m/255,n/255)};ng.rgbHex=function(f){return(f=this.parseHex(f))&&0<=f[0]&&0<=f[1]&&0<=f[2]?new Ud.Color(f[0],f[1],f[2]):null};ng.rgba=function(f,m,n,a){return new Ud.Color(f/
255,m/255,n/255,a)};ng.fromLiteral=function(f){return new Ud.Color(f.r,f.g,f.b,f.a)};ng.fromTuple=function(f){return new Ud.Color(f[0],f[1],f[2],f[3])};ng.fromTuple8Bit=function(f){return new Ud.Color(f[0]/255,f[1]/255,f[2]/255,f[3]/255)};ng.fromString=function(f){return f&&"none"!==f?this.fromTuple(this.parse(f)):null};ng.parse=function(f){return f&&"none"!==f?(f=Ud.parse(f),[f.red,f.green,f.blue,f.alpha]):null};ng.parseRGB=function(f){var m=f.match(this.rgbaRegex);if(m){f=parseInt(m[1])/(m[2]?100:
255);var n=parseInt(m[3])/(m[4]?100:255),a=parseInt(m[5])/(m[6]?100:255);m=m[7]?parseFloat(m[7]):1;return[f,n,a,m]}return null};ng.parseHex=function(f){var m;var n="";for(m=0;m<f.length;m++){var a=f[m].toLowerCase();if("a"==a||"b"==a||"c"==a||"d"==a||"e"==a||"f"==a||"0"==a||"1"==a||"2"==a||"3"==a||"4"==a||"5"==a||"6"==a||"7"==a||"8"==a||"9"==a)n+=a}if(6==n.length)m=n.substring(0,2),f=n.substring(2,4),n=n.substring(4,6);else if(3==n.length)m=n.substring(0,1),m+=m,f=n.substring(1,2),f+=f,n=n.substring(2,
3),n+=n;else return null;m=parseInt(m,16)/255;f=parseInt(f,16)/255;n=parseInt(n,16)/255;return[m,f,n]};ng.prototype.grayValue=function(){return(this.r+this.g+this.b)/3};ng.prototype.equals=function(f){return f?this.r===f.r&&this.g===f.g&&this.b===f.b&&this.a===f.a:!1};ng.prototype.darker=function(f){var m=this.mixedWith(Ud.Color.black,.5);return 1<f?m.darker(f-1):m};ng.prototype.lighter=function(f){if(0==f)return this;var m=this.mixedWith(Ud.Color.white,.5);return 1<f?m.lighter(f-1):m};ng.prototype.interpolate=
function(f,m){if(m.isGradient)return m.interpolate(1-f,this);m=Ud.obj.isArray(m)?m:m.toTuple();return Ud.Color.fromTuple(this.toTuple().map(function(n,a){return Ud.num.interpolate(f,n,m[a])}))};ng.prototype.toString=function(){return 1===this.a?"rgb("+Ud.floor(this.r)+","+Ud.floor(this.g)+","+Ud.floor(this.b)+")":this.toRGBAString()};ng.prototype.toRGBAString=function(){return"rgba("+Math.floor(255.99*this.r)+","+Math.floor(255.99*this.g)+","+Math.floor(255.99*this.b)+","+this.a+")"};ng.prototype.toHexString=
function(){function f(m){for(;2>m.length;)m="0"+m;return m}return f(Math.floor(255.99*this.r).toString(16))+f(Math.floor(255.99*this.g).toString(16))+f(Math.floor(255.99*this.b).toString(16))};ng.prototype.toTuple=function(){return[this.r,this.g,this.b,this.a]};ng.prototype.toTuple8Bit=function(){return[255*this.r,255*this.g,255*this.b,255*this.a]};ng.prototype.toHSB=function(){var f=Math.max(this.r,this.g,this.b),m=Math.min(this.r,this.g,this.b),n;f==m?n=0:f==this.r?n=(this.g-this.b)/(f-m)*60:f==
this.g?n=60*(2+(this.b-this.r)/(f-m)):f==this.b&&(n=60*(4+(this.r-this.g)/(f-m)));return[(n+360)%360,0==f?0:(f-m)/f,f]};ng.prototype.withA=function(f){return new Ud.Color(this.r,this.g,this.b,f)};ng.prototype.mixedWith=function(f,m){var n=1-m;return new Ud.Color(this.r*m+f.r*n,this.g*m+f.g*n,this.b*m+f.b*n,this.a*m+f.a*n)};ng.prototype.invert=function(){return Ud.Color.rgb(255*(1-this.r),255*(1-this.g),255*(1-this.b))};ng.prototype.toCSSString=function(){return this.toRGBAString()};ng.prototype.__serialize__=
function(){return{__expr__:"Color."+this.toString(),bindings:{"lively.graphics/color.js":["Color"]}}};ng.prototype.toJSExpr=function(){return"Color."+(this.name||this.toString())};$jscomp.global.Object.defineProperties(ng.prototype,{isColor:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){var f=this,m=Ud.Color.named;return Object.keys(m).find(function(n){return m[n].equals(f)})}}});$jscomp.global.Object.defineProperties(ng,{rgbaRegex:{configurable:!0,
enumerable:!0,get:function(){return Ud.rgbaRegex}},named:{configurable:!0,enumerable:!0,get:function(){return this._named?this._named:this._named={black:new Ud.Color(0,0,0),almostBlack:Ud.Color.rgb(64,64,64),white:new Ud.Color(1,1,1),gray:new Ud.Color(.8,.8,.8),red:new Ud.Color(.8,0,0),green:new Ud.Color(0,.8,0),yellow:new Ud.Color(.8,.8,0),blue:new Ud.Color(0,0,.8),purple:new Ud.Color(.5,0,.5),magenta:new Ud.Color(1,0,1),pink:Ud.Color.rgb(255,30,153),turquoise:Ud.Color.rgb(0,240,255),tangerine:Ud.Color.rgb(242,
133,0),orange:Ud.Color.rgb(255,153,0),cyan:Ud.Color.rgb(0,255,255),brown:Ud.Color.rgb(182,67,0),limeGreen:Ud.Color.rgb(51,255,0),darkGray:Ud.Color.rgb(102,102,102),lightGray:Ud.Color.rgb(230,230,230),veryLightGray:Ud.Color.rgb(243,243,243),transparent:Ud.Color.rgba(0,0,0,0),lively:Ud.Color.rgb(245,124,0)}}}});Ma("C",ng);Ud.Color=ng;Object.assign(Ud.Color,Ud.Color.named);var Zs=function(f){this.stops=f?f.map(function(m){return m}):[]};Zs.create=function(f){var m=[],n;for(n in f)m.push({offset:Number(n),
color:f[n]});return new this({stops:m})};Zs.parse=function(f){return f.startsWith("radial-gradient")?Ud.RadialGradient.parse(f):f.startsWith("linear-gradient")?Ud.LinearGradient.parse(f):Ud.Color.fromTuple(Ud.Color.parse(f))};Zs.prototype.equals=function(f){return f&&f.isGradient?this.toString()==f.toString():!1};Zs.prototype.getStopsLighter=function(f){return Ud.arr.collect(this.stops,function(m){return{offset:m.offset,color:m.color.lighter(f)}})};Zs.prototype.getStopsDarker=function(f){return Ud.arr.collect(this.stops,
function(m){return{offset:m.offset,color:m.color.darker(f)}})};Zs.prototype.interpolateStops=function(f,m){var n=Ud.pad(this.stops,m.length);m=Ud.pad(m,this.stops.length);var a=[],d;for(d=0;d<n.length;d++){var k=n[d];var b=k.color;var e=k.offset;var l=m[d];k=l.color;l=l.offset;a.push({color:b.interpolate(f,k),offset:Ud.num.interpolate(f,e,l)})}return a};Zs.prototype.__serialize__=function(){return{__expr__:this.toJSExpr(),bindings:{"lively.graphics/color.js":["Color","RadialGradient","LinearGradient"],
"lively.graphics/geometry-2d.js":["pt","rect"]}}};$jscomp.global.Object.defineProperties(Zs.prototype,{isGradient:{configurable:!0,enumerable:!0,get:function(){return!0}}});Ud.Gradient=Zs;var Zl=function(f){var m=void 0===f?{}:f;f=m.vector;m=Ud.Gradient.call(this,m.stops)||this;m.vector=f;return m};$jscomp.inherits(Zl,Ud.Gradient);Zl.parse=function(f){f.match(/\((.*)\)/)[1].split(",")};Zl.prototype.angleToRect=function(f){return Ud.Point.polar(1,f).extentAsRectangle().withCenter(Ud.pt(.5,.5))};Zl.prototype.vectorAsAngle=
function(){return this.vector.extent().theta()};Zl.prototype.toString=function(){return this.toCSSString()};Zl.prototype.lighter=function(f){return new this.constructor({stops:this.getStopsLighter(f),vector:this.vector})};Zl.prototype.darker=function(f){return new this.constructor({stops:this.getStopsDarker(f),vector:this.vector})};Zl.prototype.interpolate=function(f,m,n){n=void 0===n?{width:1E3,height:1E3}:n;m.isColor&&(m=new Ud.LinearGradient({vector:this.vector,stops:this.stops.map(function(a){return{color:m,
offset:a.offset}})}));if("radialGradient"==m.type){if(.5>f)return new Ud.LinearGradient({vector:this.vector.interpolate(f,Ud.rect(0,0,0,1)),stops:this.interpolateStops(f,m.stops.map(function(a,d){return{color:a.color,offset:1}}))});if(.5<=f)return new Ud.RadialGradient({stops:this.interpolateStops(f,m.stops),focus:Ud.pt(.5,0).interpolate(f,m.focus),bounds:Ud.rect(0,0,100*n.width,2*n.height).interpolate(f,m.bounds)})}return new Ud.LinearGradient({stops:this.interpolateStops(f,m.stops),vector:this.vector.interpolate(f,
m.vector)})};Zl.prototype.toCSSString=function(){var f="linear-gradient("+(Ud.num.toDegrees(this.vectorAsAngle())+90+"deg,")+this.stops.map(function(m){return m.color.toRGBAString()+" "+((100*m.offset).toFixed()+"%")}).join(",");return f+")"};Zl.prototype.toJSExpr=function(){return"new LinearGradient({stops: ["+this.stops.map(function(f){return"{offset: "+f.offset+", color: "+f.color.toJSExpr()+"}"}).join(", ")+"], vector: "+this.vector+"})"};$jscomp.global.Object.defineProperties(Zl.prototype,{type:{configurable:!0,
enumerable:!0,get:function(){return"linearGradient"}},vectors:{configurable:!0,enumerable:!0,get:function(){return{northsouth:Ud.rect(Ud.pt(0,0),Ud.pt(0,1)),northeast:Ud.rect(Ud.pt(1,0),Ud.pt(0,1)),westeast:Ud.rect(Ud.pt(1,0),Ud.pt(0,0)),southeast:Ud.rect(Ud.pt(1,1),Ud.pt(0,0)),southnorth:Ud.rect(Ud.pt(0,1),Ud.pt(0,0)),southwest:Ud.rect(Ud.pt(0,1),Ud.pt(1,0)),eastwest:Ud.rect(Ud.pt(0,0),Ud.pt(1,0)),northwest:Ud.rect(Ud.pt(0,0),Ud.pt(1,1))}}},vector:{configurable:!0,enumerable:!0,get:function(){return this._vector},
set:function(f){this._vector=f?"string"===typeof f?this.vectors[f.toLowerCase()]:"number"===typeof f?this.angleToRect(f):f:this.vectors.northsouth}}});Ma("ac",Zl);Ud.LinearGradient=Zl;var Dn=function(f){var m=void 0===f?{}:f;f=m.focus;var n=m.bounds;m=Ud.Gradient.call(this,m.stops)||this;m.focus=f||Ud.pt(.5,.5);m.bounds=n||new Ud.Rectangle(0,0,20,20);return m};$jscomp.inherits(Dn,Ud.Gradient);Dn.parse=function(f){f.match(/\((.*)\)/)[1].split(",")};Dn.prototype.toString=function(){return this.toCSSString()};
Dn.prototype.lighter=function(f){return new this.constructor({stops:this.getStopsLighter(f),focus:this.focus,bounds:this.bounds})};Dn.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),focus:this.focus,bounds:this.bounds})};Dn.prototype.interpolate=function(f,m,n){n=void 0===n?{height:1E3,width:1E3}:n;m.isColor&&(m=new Ud.RadialGradient({vector:this.vector,bounds:this.bounds,stops:this.stops.map(function(a){return{color:m,offset:a.offset}})}));return"linearGradient"==
m.type?m.interpolate(1-f,this,n):new Ud.RadialGradient({bounds:this.bounds.interpolate(f,m.bounds),stops:this.interpolateStops(f,m.stops),focus:this.focus.interpolate(f,m.focus)})};Dn.prototype.toCSSString=function(){var f=this.focus.scaleBy(100),m=this.bounds.extent();f="radial-gradient("+m.x/2+"px "+m.y/2+"px at "+f.x+"% "+f.y+"%";for(m=0;m<this.stops.length;m++)f+=","+this.stops[m].color.toRGBAString()+" "+((100*this.stops[m].offset).toFixed()+"%");return f+")"};Dn.prototype.toJSExpr=function(){return"new RadialGradient({stops: ["+
this.stops.map(function(f){return"{offset: "+f.offset+", color: "+f.color.toJSExpr()+"}"}).join(", ")+"], bounds: "+this.bounds+", focus: "+this.focus.toString(!1)+"})"};$jscomp.global.Object.defineProperties(Dn.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return"radialGradient"}}});Ma("aa",Dn);Ud.RadialGradient=Dn;var EE=Ma("bn","#1abc9c #e8f8f5 #d1f2eb #a3e4d7 #76d7c4 #48c9b0 #1abc9c #17a589 #148f77 #117864 #0e6251 #16a085 #e8f6f3 #d0ece7 #a2d9ce #73c6b6 #45b39d #16a085 #138d75 #117a65 #0e6655 #0b5345 #2ecc71 #eafaf1 #d5f5e3 #abebc6 #82e0aa #58d68d #2ecc71 #28b463 #239b56 #1d8348 #186a3b #27ae60 #e9f7ef #d4efdf #a9dfbf #7dcea0 #52be80 #27ae60 #229954 #1e8449 #196f3d #145a32 #3498db #ebf5fb #d6eaf8 #aed6f1 #85c1e9 #5dade2 #3498db #2e86c1 #2874a6 #21618c #1b4f72 #2980b9 #eaf2f8 #d4e6f1 #a9cce3 #7fb3d5 #5499c7 #2980b9 #2471a3 #1f618d #1a5276 #154360 #9b59b6 #f5eef8 #ebdef0 #d7bde2 #c39bd3 #af7ac5 #9b59b6 #884ea0 #76448a #633974 #512e5f #8e44ad #f4ecf7 #e8daef #d2b4de #bb8fce #a569bd #8e44ad #7d3c98 #6c3483 #5b2c6f #4a235a #34495e #ebedef #d6dbdf #aeb6bf #85929e #5d6d7e #34495e #2e4053 #283747 #212f3c #1b2631 #2c3e50 #eaecee #d5d8dc #abb2b9 #808b96 #566573 #2c3e50 #273746 #212f3d #1c2833 #17202a #f1c40f #fef9e7 #fcf3cf #f9e79f #f7dc6f #f4d03f #f1c40f #d4ac0d #b7950b #9a7d0a #7d6608 #f39c12 #fef5e7 #fdebd0 #fad7a0 #f8c471 #f5b041 #f39c12 #d68910 #b9770e #9c640c #7e5109 #e67e22 #fdf2e9 #fae5d3 #f5cba7 #f0b27a #eb984e #e67e22 #ca6f1e #af601a #935116 #784212 #d35400 #fbeee6 #f6ddcc #edbb99 #e59866 #dc7633 #d35400 #ba4a00 #a04000 #873600 #6e2c00 #e74c3c #fdedec #fadbd8 #f5b7b1 #f1948a #ec7063 #e74c3c #cb4335 #b03a2e #943126 #78281f #c0392b #f9ebea #f2d7d5 #e6b0aa #d98880 #cd6155 #c0392b #a93226 #922b21 #7b241c #641e16 #ecf0f1 #fdfefe #fbfcfc #f7f9f9 #f4f6f7 #f0f3f4 #ecf0f1 #d0d3d4 #b3b6b7 #979a9a #7b7d7d #bdc3c7 #f8f9f9 #f2f3f4 #e5e7e9 #d7dbdd #cacfd2 #bdc3c7 #a6acaf #909497 #797d7f #626567 #95a5a6 #f4f6f6 #eaeded #d5dbdb #bfc9ca #aab7b8 #95a5a6 #839192 #717d7e #5f6a6a #4d5656 #7f8c8d #f2f4f4 #e5e8e8 #ccd1d1 #b2babb #99a3a4 #7f8c8d #707b7c #616a6b #515a5a #424949".split(" "));
Ud.flatDesignColors=EE;Ud.flatDesignColors=EE;Ud.flatDesignColors=EE;var FE=Ma("bo","#f44336 #ffebee #ffcdd2 #ef9a9a #e57373 #ef5350 #f44336 #e53935 #d32f2f #c62828 #b71c1c #ff8a80 #ff5252 #ff1744 #d50000 #e91e63 #fce4ec #f8bbd0 #f48fb1 #f06292 #ec407a #e91e63 #d81b60 #c2185b #ad1457 #880e4f #ff80ab #ff4081 #f50057 #c51162 #9c27b0 #f3e5f5 #e1bee7 #ce93d8 #ba68c8 #ab47bc #9c27b0 #8e24aa #7b1fa2 #6a1b9a #4a148c #ea80fc #e040fb #d500f9 #aa00ff #673ab7 #ede7f6 #d1c4e9 #b39ddb #9575cd #7e57c2 #673ab7 #5e35b1 #512da8 #4527a0 #311b92 #b388ff #7c4dff #651fff #6200ea #3f51b5 #e8eaf6 #c5cae9 #9fa8da #7986cb #5c6bc0 #3f51b5 #3949ab #303f9f #283593 #1a237e #8c9eff #536dfe #3d5afe #304ffe #2196f3 #e3f2fd #bbdefb #90caf9 #64b5f6 #42a5f5 #2196f3 #1e88e5 #1976d2 #1565c0 #0d47a1 #82b1ff #448aff #2979ff #2962ff #03a9f4 #e1f5fe #b3e5fc #81d4fa #4fc3f7 #29b6f6 #03a9f4 #039be5 #0288d1 #0277bd #01579b #80d8ff #40c4ff #00b0ff #0091ea #00bcd4 #e0f7fa #b2ebf2 #80deea #4dd0e1 #26c6da #00bcd4 #00acc1 #0097a7 #00838f #006064 #84ffff #18ffff #00e5ff #00b8d4 #009688 #e0f2f1 #b2dfdb #80cbc4 #4db6ac #26a69a #009688 #00897b #00796b #00695c #004d40 #a7ffeb #64ffda #1de9b6 #00bfa5 #4caf50 #e8f5e9 #c8e6c9 #a5d6a7 #81c784 #66bb6a #4caf50 #43a047 #388e3c #2e7d32 #1b5e20 #b9f6ca #69f0ae #00e676 #00c853 #8bc34a #f1f8e9 #dcedc8 #c5e1a5 #aed581 #9ccc65 #8bc34a #7cb342 #689f38 #558b2f #33691e #ccff90 #b2ff59 #76ff03 #64dd17 #cddc39 #f9fbe7 #f0f4c3 #e6ee9c #dce775 #d4e157 #cddc39 #c0ca33 #afb42b #9e9d24 #827717 #f4ff81 #eeff41 #c6ff00 #aeea00 #ffeb3b #fffde7 #fff9c4 #fff59d #fff176 #ffee58 #ffeb3b #fdd835 #fbc02d #f9a825 #f57f17 #ffff8d #ffff00 #ffea00 #ffd600 #ffc107 #fff8e1 #ffecb3 #ffe082 #ffd54f #ffca28 #ffc107 #ffb300 #ffa000 #ff8f00 #ff6f00 #ffe57f #ffd740 #ffc400 #ffab00 #ff9800 #fff3e0 #ffe0b2 #ffcc80 #ffb74d #ffa726 #ff9800 #fb8c00 #f57c00 #ef6c00 #e65100 #ffd180 #ffab40 #ff9100 #ff6d00 #ff5722 #fbe9e7 #ffccbc #ffab91 #ff8a65 #ff7043 #ff5722 #f4511e #e64a19 #d84315 #bf360c #ff9e80 #ff6e40 #ff3d00 #dd2c00 #795548 #efebe9 #d7ccc8 #bcaaa4 #a1887f #8d6e63 #795548 #6d4c41 #5d4037 #4e342e #3e2723 #9e9e9e #fafafa #f5f5f5 #eeeeee #e0e0e0 #bdbdbd #9e9e9e #757575 #616161 #424242 #212121 #607d8b #eceff1 #cfd8dc #b0bec5 #90a4ae #78909c #607d8b #546e7a #455a64 #37474f #263238 #ffffff #000000".split(" "));
Ud.materialDesignColors=FE;Ud.materialDesignColors=FE;Ud.materialDesignColors=FE;var GE=Ma("bp","ccff00 ccff33 ccff66 ccff99 ccffcc ccffff ffffff ffffcc ffff99 ffff66 ffff33 ffff00 cccc00 cccc33 cccc66 cccc99 cccccc ccccff ffccff ffcccc ffcc99 ffcc66 ffcc33 ffcc00 cc9900 cc9933 cc9966 cc9999 cc99cc cc99ff ff99ff ff99cc ff9999 ff9966 ff9933 ff9900 cc6600 cc6633 cc6666 cc6699 cc66cc cc66ff ff66ff ff66cc ff6699 ff6666 ff6633 ff6600 cc3300 cc3333 cc3366 cc3399 cc33cc cc33ff ff33ff ff33cc ff3399 ff3366 ff3333 ff3300 cc0000 cc0033 cc0066 cc0099 cc00cc cc00ff ff00ff ff00cc ff0099 ff0066 ff0033 ff0000 660000 660033 660066 660099 6600cc 6600ff 9900ff 9900cc 990099 990066 990033 990000 663300 663333 663366 663399 6633cc 6633ff 9933ff 9933cc 993399 993366 993333 993300 666600 666633 666666 666699 6666cc 6666ff 9966ff 9966cc 996699 996666 996633 996600 669900 669933 669966 669999 6699cc 6699ff 9999ff 9999cc 999999 999966 999933 999900 66cc00 66cc33 66cc66 66cc99 66cccc 66ccff 99ccff 99cccc 99cc99 99cc66 99cc33 99cc00 66ff00 66ff33 66ff66 66ff99 66ffcc 66ffff 99ffff 99ffcc 99ff99 99ff66 99ff33 99ff00 00ff00 00ff33 00ff66 00ff99 00ffcc 00ffff 33ffff 33ffcc 33ff99 33ff66 33ff33 33ff00 00cc00 00cc33 00cc66 00cc99 00cccc 00ccff 33ccff 33cccc 33cc99 33cc66 33cc33 33cc00 009900 009933 009966 009999 0099cc 0099ff 3399ff 3399cc 339999 339966 339933 339900 006600 006633 006666 006699 0066cc 0066ff 3366ff 3366cc 336699 336666 336633 336600 003300 003333 003366 003399 0033cc 0033ff 3333ff 3333cc 333399 333366 333333 333300 000000 000033 000066 000099 0000cc 0000ff 3300ff 3300cc 330099 330066 330033 330000".split(" "));
Ud.webSafeColors=GE;Ud.webSafeColors=GE;Ud.webSafeColors=GE;var nqa=Object.freeze({__proto__:null,Complementary:Cu,Triadic:Du,Tetradic:tx,Quadratic:Eu,Analogous:Fu,Neutral:ux,Color:ng,LinearGradient:Zl,RadialGradient:Dn,flatDesignColors:EE,materialDesignColors:FE,webSafeColors:GE}),Q9=lively.FreezerRuntime.recorderFor("lively.graphics/index.js");Object.assign(Q9,nqa);Object.assign(Q9,mqa);var oqa=Object.freeze({__proto__:null,Complementary:Cu,Triadic:Du,Tetradic:tx,Quadratic:Eu,Analogous:Fu,Neutral:ux,
Color:ng,LinearGradient:Zl,RadialGradient:Dn,flatDesignColors:EE,materialDesignColors:FE,webSafeColors:GE,Point:sg,Rectangle:Fe,Transform:sk,Line:Yl,rect:Ll,pt:ui}),oj=lively.FreezerRuntime.recorderFor("lively.serializer2/class-helper.js");oj.getClassName=Vp;oj.getSerializableClassMeta=Ot;oj.locateClass=br;oj.arr=Gf;oj.string=Dh;oj.classMetaForSerializationProp="lively.serializer-class-info";oj.classSuperClassProp=Symbol.for("lively-instance-superclass");oj.classNameProp=Symbol.for("__LivelyClassName__");
oj.moduleMetaInClassProp=Symbol.for("lively-module-meta");oj.getClassName=Vp;oj.getClassName=Vp;oj.getSerializableClassMeta=Ot;oj.getSerializableClassMeta=Ot;oj.locateClass=br;oj.locateClass=br;var Lr=function(f){this.options=Object.assign({ignoreClassNotFound:!0},f);this[Symbol.for("lively-instance-restorer")]=!0};Lr.prototype.addClassInfo=function(f,m,n){(f=oj.getSerializableClassMeta(m))&&(n[oj.classMetaForSerializationProp]=f)};Lr.prototype.restoreIfClassInstance=function(f,m){if(m.hasOwnProperty(oj.classMetaForSerializationProp)&&
(f=m[oj.classMetaForSerializationProp],f.className)){m=oj.locateClass(f);if(!m||"function"!==typeof m){m="Trying to deserialize instance of "+JSON.stringify(f)+" but this class cannot be found!";if(!this.options.ignoreClassNotFound)throw Error(m);console.error(m);return{isClassPlaceHolder:!0,className:f.className}}return m.hasOwnProperty(Symbol.for("lively-instance-superclass"))?new m(this):new m}};Lr.sourceModulesInObjRef=function(f){var m=[];(f=f&&f[oj.classMetaForSerializationProp])&&f.module&&
m.push(f.module);return m};Lr.sourceModulesIn=function(f){var m=[];Object.keys(f).forEach(function(n){(n=f[n])&&n[oj.classMetaForSerializationProp]&&m.push(n[oj.classMetaForSerializationProp])});return oj.arr.uniqBy(m,function(n,a){var d=n.module,k=a.module;return!d&&!k||d&&!k||!d&&k?n.className===a.className:n.className===a.className&&d.package.name==k.package.name&&d.package.pathInPackage==k.package.pathInPackage})};$jscomp.global.Object.defineProperties(Lr.prototype,{sourceModuleNameProperty:{configurable:!0,
enumerable:!0,get:function(){return"__SourceModuleName__"}}});$jscomp.global.Object.defineProperties(Lr,{moduleMetaInClassProp:{configurable:!0,enumerable:!0,get:function(){return oj.moduleMetaInClassProp}},classMetaForSerializationProp:{configurable:!0,enumerable:!0,get:function(){return oj.classMetaForSerializationProp}},classSuperClassProp:{configurable:!0,enumerable:!0,get:function(){return oj.classSuperClassProp}},classNameProperty:{configurable:!0,enumerable:!0,get:function(){return oj.classNameProp}}});
oj.ClassHelper=Lr;oj.default=Lr;var oi=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins/expression-serializer.js");oi.deserializeSpec=Wp;oi.serializeSpec=vo;oi.string=Dh;oi.Closure=Cj;oi.Path=Qh;oi.obj=eg;oi.properties=go;oi.arr=Gf;oi.getSerializableClassMeta=Ot;oi.connect=ll;oi.joinPath=ah;var Bl=function(f){this.prefix=Object.assign({prefix:"__lv_expr__"},f).prefix+":"};Bl.prototype.isSerializedExpression=function(f){return 0===f.indexOf(this.prefix)};Bl.prototype.requiredModulesOf__expr__=
function(f){return this.isSerializedExpression(f)?(f=this.exprStringDecode(f).bindings)?Object.keys(f):null:null};Bl.prototype.exprStringDecode=function(f){var m=f.indexOf(":");f.slice(0,m);f=f.slice(m+1);for(var n={},a=!1;f&&f.startsWith("{")&&0<=(m=f.indexOf("}:"));){a=!0;var d=f.slice(1,m);f=f.slice(m+2);f.includes("https:")&&f.indexOf("https:")<f.indexOf(":")?(f=f.replace("https:","__HTTP_PLACEHOLDER__"),m=f.indexOf(":")-20+6,f=f.replace("__HTTP_PLACEHOLDER__","https:")):m=f.indexOf(":");var k=
f.slice(0,m);d=d.split(",").filter(function(b){return!!b.trim()}).map(function(b){if(!b.includes(":"))return b;var e=$jscomp.makeIterator(b.split(":"));b=e.next().value;e=e.next().value;return{exported:b,local:e}});n[k]=d;f=f.slice(m+1)}return{__expr__:f,bindings:a?n:null}};Bl.prototype.exprStringEncode=function(f){var m=f.bindings;f=String(f.__expr__);if(m)for(var n=Object.keys(m),a=0;a<n.length;a++){var d=n[a],k=m[d];Array.isArray(k)&&(k=k.map(function(b){return"string"===typeof b?b:b.exported+
":"+b.local}).join(","));f="{"+k+"}:"+d+":"+f}return this.prefix+f};Bl.prototype.getExpressionForFunction=function(f){var m=f[Symbol.for("lively-module-meta")],n={};return this.exprStringEncode({__expr__:f.name,bindings:(n[oi.joinPath(m.package.name,m.pathInPackage)]=[f.name],n)})};Bl.prototype.convert__expr__obj=function(f){console.assert("__expr__"in f,"obj has no property __expr__");return this.prefix+f.__expr__};Bl.prototype.__eval__=function(f,m){return oi.__eval__(f,m)};Bl.prototype.deserializeExpr=
function(f){if(!f.startsWith(this.prefix))throw Error('"'+f+'" is not a serialized expression, missing prefix "'+this.prefix+'"');return this.deserializeExprObj(this.exprStringDecode(f))};Bl.prototype.deserializeExprObj=function(f){var m=f.__expr__;f=f.bindings;var n={};if(f)for(var a=f?Object.keys(f):[],d=0;d<a.length;d++){var k=a[d],b=f[k];if(lively.FreezerRuntime){var e=lively.FreezerRuntime.get(lively.FreezerRuntime.decanonicalize(k));if(!e){var l=lively.FreezerRuntime.fetchStandaloneFor(k);l&&
(e=l.exports)}e.exports&&(e=e.exports)}else e=System.get(System.decanonicalize(k));if(!e)throw Error("[lively.serializer] expression eval: bindings specify to import "+k+" but this module is not loaded!\nSource: "+m);for(k=0;k<b.length;k++){var p=b[k],u=l=void 0;"string"===typeof p?u=l=p:"object"===typeof p&&(l=p.local,u=p.exported);n[l]=e[u];m="var "+l+" = __boundValues__."+l+";\n"+m}}return this.__eval__(m,n)};Ma("b7",Bl);oi.ExpressionSerializer=Bl;oi.__eval__=oi.Closure.fromSource("function __eval__(__source__, __boundValues__) { \n  return eval(__source__); \n}").getFunc();
oi.deserializeSpec=Wp;oi.deserializeSpec=Wp;oi.serializeSpec=vo;oi.serializeSpec=vo;oi.default=Bl;var Mg=lively.FreezerRuntime.recorderFor("lively.bindings/index.js");Mg.connect=ll;Mg.disconnect=cr;Mg.disconnectAll=wz;Mg.once=ts;Mg.signal=hm;Mg.callWhenNotNull=aI;Mg.callWhenPathNotNull=bI;Mg.noUpdate=Pt;Mg.string=Dh;Mg.arr=Gf;Mg.Closure=Cj;Mg.obj=eg;Mg.stringifyFunctionWithoutToplevelRecorder=rz;Mg.ExpressionSerializer=Bl;Mg.connect=ll;Mg.connect=ll;Mg.disconnect=cr;Mg.disconnect=cr;Mg.disconnectAll=
wz;Mg.disconnectAll=wz;Mg.once=ts;Mg.once=ts;Mg.signal=hm;Mg.signal=hm;Mg.noUpdate=Pt;Mg.noUpdate=Pt;var uM=function(f){var m=lively.FreezerRuntime.recorderFor("lively.bindings/index.js"),n=m.hasOwnProperty("AttributeConnection")&&"function"===typeof m.AttributeConnection?m.AttributeConnection:m.AttributeConnection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),
value:function(a,d,k,b,e){this.init(a,d,k,b,e)}},{key:"init",value:function(a,d,k,b,e){this.doNotSerialize=["isActive","converter","updater"];this.sourceObj=a;this.sourceAttrName=d;this.targetObj=k;this.targetMethodName=b;this.varMapping={source:a,target:k};e=Object.assign({removeAfterUpdate:!1,forceAttributeConnection:!1,garbageCollect:!1,signalOnAssignment:!0},e);e.removeAfterUpdate&&(this.removeAfterUpdate=!0);e.forceAttributeConnection&&(this.forceAttributeConnection=!0);"boolean"===typeof e.garbageCollect&&
(this.garbageCollect=e.garbageCollect);"boolean"===typeof e.signalOnAssignment&&(this.signalOnAssignment=e.signalOnAssignment);e.converter&&this.setConverter(e.converter);e.updater&&this.setUpdater(e.updater);e.varMapping&&(this.varMapping=Object.assign(e.varMapping,this.varMapping));this.getSpec();return this}},{key:"__additionally_serialize__",value:function(a,d,k,b){delete this.varMapping._rev;Mg.arr.equals(Object.keys(this.varMapping),["source","target"])?delete a.props.varMapping:b("varMapping",
this._getSerializableVarMapping())}},{key:"__after_deserialize__",value:function(a,d){this.varMapping||(this.varMapping={},this.varMapping.source=this.sourceObj,this.varMapping.target=this.targetObj);this.onSourceAndTargetRestored()}},{key:"_getSerializableVarMapping",value:function(){for(var a=Object.assign({},this.varMapping),d=$jscomp.makeIterator(Object.keys(a)),k=d.next();!k.done;k=d.next()){k=k.value;try{Mg.obj.isFunction(a[k])&&(a[k]=(new Mg.ExpressionSerializer).getExpressionForFunction(a[k]))}catch(b){throw Error("Cannot be serialized due to lack of module information: "+
k+" in "+this);}}return a}},{key:"onSourceAndTargetRestored",value:function(){this.sourceObj&&this.targetObj&&this.connect()}},{key:"copy",value:function(a){return Mg.AttributeConnection.fromLiteral(this.toLiteral(),a)}},{key:"fixInstanceAfterCopyingFromSite",value:function(a,d,k){this.disconnect()}},{key:"clone",value:function(){var a=new this.constructor(this.getSourceObj(),this.getSourceAttrName(),this.getTargetObj(),this.getTargetMethodName(),this.getSpec());this.dependedBy&&(a.dependedBy=this.dependedBy);
return a}},{key:"getTargetObj",value:function(){return this.targetObj}},{key:"getSourceObj",value:function(){return this.sourceObj}},{key:"getSourceAttrName",value:function(){return this.sourceAttrName}},{key:"getTargetMethodName",value:function(){return this.targetMethodName}},{key:"getSourceValue",value:function(){return this.getSourceObj()[this.getSourceAttrName()]}},{key:"getPrivateSourceValue",value:function(){return this.sourceObj[this.privateAttrName(this.sourceAttrName)]}},{key:"getConverter",
value:function(){if(!this.converterString)return null;this.converter||(this.converter=Mg.Closure.fromSource(this.converterString,this.varMapping).recreateFunc());return this.converter}},{key:"setConverter",value:function(a){delete this.converter;return this.converterString=a?String(a):null}},{key:"getUpdater",value:function(){if(!this.updaterString)return null;this.updater||(this.updater=Mg.Closure.fromSource(this.updaterString,this.varMapping).recreateFunc());return this.updater}},{key:"setUpdater",
value:function(a){delete this.updater;return this.updaterString=a?Mg.stringifyFunctionWithoutToplevelRecorder(a):null}},{key:"getSpec",value:function(){var a={};this.updaterString&&(a.updater=this.getUpdater());this.converterString&&(a.converter=this.getConverter());this.removeAfterUpdate&&(a.removeAfterUpdate=!0);this.forceAttributeConnection&&(a.forceAttributeConnection=!0);this.hasOwnProperty("garbageCollect")&&(a.garbageCollect=this.garbageCollect);this.hasOwnProperty("signalOnAssignment")&&(a.signalOnAssignment=
this.signalOnAssignment);return a}},{key:"resetSpec",value:function(){delete this.garbageCollect;delete this.signalOnAssignment;delete this.removeAfterUpdate;delete this.forceAttributeConnection;delete this.converter;delete this.converterString;delete this.updater;delete this.updaterString}},{key:"privateAttrName",value:function(a){return"$$"+a}},{key:"activate",value:function(){this.isActive=!0}},{key:"deactivate",value:function(){delete this.isActive}},{key:"connect",value:function(){var a=this.getExistingConnection();
a!==this&&(a&&a.disconnect(),this.addAttributeConnection());a=this.sourceObj;var d=this.sourceAttrName,k=this.forceAttributeConnection,b=a.__lookupSetter__(d),e=a.__lookupGetter__(d),l=!b&&!e&&(this.getSourceValue()||this.getPrivateSourceValue());"function"!==typeof l||k?this.addSourceObjGetterAndSetter(e,b):l.isWrapped||this.addConnectionWrapper(a,d,l);return this}},{key:"disconnect",value:function(){var a=this,d=this.sourceObj;if(!d||!d.attributeConnections)return this.removeSourceObjGetterAndSetter();
d.attributeConnections=d.attributeConnections.filter(function(b){return!a.isSimilarConnection(b)});var k=d.attributeConnections.filter(function(b){return a.getSourceAttrName()==b.getSourceAttrName()});0==d.attributeConnections.length&&delete d.attributeConnections;0==k.length&&this.removeSourceObjGetterAndSetter();return null}},{key:"update",value:function(a,d){if(this.isActive)return null;var k=this,b=this.getUpdater(),e=this.getConverter(),l=this.targetObj,p=this.targetMethodName;if(!l||!p)return d=
"Cannot update "+this.toString(a)+" because of no target ("+l+") or targetProp ("+p+") ",this.isWeakConnection&&this.disconnect(),console.error(d),null;var u=l[p],x=function(E,G,J,K,T,P){J=[E,G,J,K,T,P];e&&(a=e.call(k,E,G),E=J[0]=a);E="function"===typeof u?u.apply(l,J):l[p]=E;k.removeAfterUpdate&&k.disconnect();return E};try{return this.isActive=!0,b?b.call(this,x,a,d):x(a,d)}catch(E){var z=this.sourceObj&&"function"===typeof this.sourceObj.world&&this.sourceObj.world()||this.targetObj&&"function"===
typeof this.targetObj.world&&this.targetObj.world();z?z.logError(E,"AttributeConnection>>update: "):console.error("Error when trying to update "+this+" with value "+a+":\n"+E+"\n"+E.stack)}finally{delete this.isActive}return null}},{key:"addSourceObjGetterAndSetter",value:function(a,d){if(!(a&&a.isAttributeConnectionGetter||d&&d.isAttributeConnectionSetter)){var k=this.sourceObj,b=this.sourceAttrName,e=this.privateAttrName(b);k[e]&&console.warn("newAttrName "+e+" already exists.Are there already other connections?");
k.hasOwnProperty("doNotSerialize")||(k.doNotSerialize=[]);Mg.arr.pushIfNotIncluded(k.doNotSerialize,e);k.hasOwnProperty("doNotCopyProperties")||(k.doNotCopyProperties=[]);Mg.arr.pushIfNotIncluded(k.doNotCopyProperties,e);a&&(k.hasOwnProperty(b)?k.__defineGetter__(e,a):k.__defineGetter__(e,function(){return k.constructor.prototype.__lookupGetter__(b).bind(k)()}));d&&(k.hasOwnProperty(b)?k.__defineSetter__(e,d):k.__defineSetter__(e,function(l){k.constructor.prototype.__lookupSetter__(b).bind(k)(l)}));
a||d||!k.hasOwnProperty(b)||(k[e]=k[b]);k.__defineSetter__(b,function(l){var p=k[e];k[e]=l;if(void 0===k.attributeConnections)return console.error("Sth wrong with sourceObj, has no attributeConnections"),null;k.attributeConnections.forEach(function(u){u&&u.getSourceAttrName()===b&&u.signalOnAssignment&&u.update(l,p)});return l});k.__lookupSetter__(b).isAttributeConnectionSetter=!0;k.__defineGetter__(b,function(){return k[e]});k.__lookupGetter__(b).isAttributeConnectionGetter=!0}}},{key:"addConnectionWrapper",
value:function(a,d,k){if("function"!==typeof k)throw Error("addConnectionWrapper didnt get a method to wrap");var b;if(b=a.hasOwnProperty(d)){a[this.privateAttrName(d)]=k;var e=function(){return k}}else e=function(){return Object.getPrototypeOf(a)[d]};a[d]=function(){if(void 0===this.attributeConnections)throw Error("[lively.bindings] Something is wrong with connection source object, it has no attributeConnections");for(var l=this.attributeConnections.slice(),p=this[d].originalFunction.apply(this,
arguments),u=0;u<l.length;u++){var x=l[u];x.getSourceAttrName()===d&&x.update(arguments[0])}return p};a[d].isOwnProperty=b;a[d].isWrapped=!0;a[d].isConnectionWrapper=!0;Object.defineProperty(a[d],"originalFunction",{get:e});a[d].toString=function(){return"<Wrapped "+e()+">"}}},{key:"removeSourceObjGetterAndSetter",value:function(){var a=this.sourceAttrName,d=this.privateAttrName(a),k=this.sourceObj;if(k){if(k.__lookupGetter__(a)){if(delete k[a],k.hasOwnProperty(d)){try{k[a]=k[d]}catch(e){}delete k[d]}}else if(k[a]&&
k[a].isConnectionWrapper){var b=k[a];delete k[a];k[a]||(k[a]=b.originalFunction)}k.doNotSerialize&&k.doNotSerialize.includes(d)&&(k.doNotSerialize=Mg.arr.without(k.doNotSerialize,d),0==k.doNotSerialize.length&&delete k.doNotSerialize);k.doNotCopyProperties&&k.doNotCopyProperties.includes(d)&&(k.doNotCopyProperties=Mg.arr.without(k.doNotCopyProperties,d),0==k.doNotCopyProperties.length&&delete k.doNotCopyProperties)}}},{key:"addAttributeConnection",value:function(){this.sourceObj.attributeConnections||
(this.sourceObj.attributeConnections=[]);this.sourceObj.attributeConnections.push(this)}},{key:"getExistingConnection",value:function(){var a=this.sourceObj&&this.sourceObj.attributeConnections;if(!a)return null;for(var d=0,k=a.length;d<k;d++)if(this.isSimilarConnection(a[d]))return a[d];return null}},{key:"isRecursivelyActivated",value:function(){return this.isActive}},{key:"isSimilarConnection",value:function(a){return a&&a.constructor==this.constructor?this.sourceObj==a.sourceObj&&this.sourceAttrName==
a.sourceAttrName&&this.targetObj==a.targetObj&&this.targetMethodName==a.targetMethodName:!1}},{key:"toString",value:function(a){try{return Mg.string.format("AttributeConnection(%s.%s %s %s.%s)",this.getSourceObj(),this.getSourceAttrName(),a?"--\x3e"+String(a)+"--\x3e":"--\x3e",this.getTargetObj(),this.getTargetMethodName())}catch(d){return"<Error in AttributeConnection>>toString>"}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AttributeConnection"}}],m,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.bindings",version:"0.1.2"}}},{start:309,end:17530})}(void 0);Mg.AttributeConnection=uM;Mg.AttributeConnection=uM;Mg.AttributeConnection=uM;Mg.callWhenNotNull=aI;Mg.callWhenNotNull=aI;Mg.callWhenPathNotNull=bI;Mg.callWhenPathNotNull=bI;var pqa=Object.freeze({__proto__:null,connect:ll,disconnect:cr,disconnectAll:wz,once:ts,
signal:hm,noUpdate:Pt,AttributeConnection:uM,callWhenNotNull:aI,callWhenPathNotNull:bI}),ae=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js");ae.pt=ui;ae.Rectangle=Fe;ae.rect=Ll;ae.arr=Gf;ae.Closure=Cj;ae.num=zl;ae.grid=FA;ae.obj=eg;ae.once=ts;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("Layout")&&"function"===typeof m.Layout?m.Layout:m.Layout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var d=a=void 0===a?{}:a;a=d.spacing;var k=d.padding,b=d.border,e=d.container,l=d.manualUpdate,p=d.autoResize,u=d.ignore,x=d.onScheduleApply,z=d.layoutOrder;d=d.reactToSubmorphAnimations;this.applyRequests=!1;this.border=Object.assign({top:0,left:0,right:0,bottom:0},b);this.ignore=u||[];this.lastBoundsExtent=this.container&&this.container.bounds().extent();this.active=!1;this.container=e;this.manualUpdate=l;
this.reactToSubmorphAnimations=d||!1;this.autoResize=void 0!=p?p:!0;this.onScheduleApply=x||function(E,G,J){};z&&(this.layoutOrder=z,this.layoutOrderSource=JSON.stringify(String(z)));this.spacing=a||0;this._padding=k?"number"===typeof k?ae.Rectangle.inset(k):k:null}},{key:"attach",value:function(){var a=this;this.apply();this.container.master&&this.container.master.whenApplied().then(function(){a.applyRequests=!0;a.forceLayout()});this.refreshBoundsCache()}},{key:"copy",value:function(){return new this.constructor(this)}},
{key:"description",value:function(){return"Describe the layout behavior here."}},{key:"name",value:function(){return"Name presented to the user."}},{key:"isEnabled",value:function(){return!this.active}},{key:"disable",value:function(){this.active=!0}},{key:"enable",value:function(a){this.active=!1;this.scheduleApply(null,a)}},{key:"padding",get:function(){return this._padding}},{key:"padding",set:function(a){"number"===typeof a&&(a=ae.Rectangle.inset(a));this._padding=a;this.apply()}},{key:"boundsChanged",
value:function(a){return!(this.lastBoundsExtent&&a.bounds().extent().equals(this.lastBoundsExtent))}},{key:"extentChanged",value:function(a){return!(this.lastExtent&&a.extent.equals(this.lastExtent))}},{key:"equals",value:function(a){return a.name()==this.name()}},{key:"layoutableSubmorphs",get:function(){var a=this;this.layoutOrder||(this.layoutOrder=ae.Closure.fromSource(JSON.parse(this.layoutOrderSource)).recreateFunc());return ae.arr.sortBy(this.container.submorphs.filter(function(d){return d.isLayoutable&&
!a.ignore.includes(d.name)}),function(d){return a.layoutOrder(d)})}},{key:"layoutOrder",value:function(a){return this.container.submorphs.indexOf(a)}},{key:"submorphBoundsChanged",get:function(){var a=this.layoutableSubmorphs,d=this.layoutableSubmorphBounds;if(!d||a.length!=d.length)return!0;for(var k=0;k<a.length;k++)if(!d[k].equals(a[k].bounds()))return!0;return!1}},{key:"refreshBoundsCache",value:function(){this.lastExtent=this.container.extent;this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(a){return a.bounds()})}},
{key:"onContainerRender",value:function(){this.forceLayout()}},{key:"noLayoutActionNeeded",get:function(){return!this.submorphBoundsChanged&&!this.boundsChanged(this.container)&&!this.extentChanged(this.container)&&!this.submorphsChanged}},{key:"__dont_serialize__",get:function(){return["lastAnim","animationPromise"]}},{key:"forceLayout",value:function(){var a=this;this.applyRequests&&(this.applyRequests=!1,this.noLayoutActionNeeded||(this.refreshBoundsCache(),this.container.withMetaDo({isLayoutAction:!0,
animation:this.lastAnim},function(){return a.apply(a.lastAnim)}),this.lastAnim=!1))}},{key:"forceLayoutsOfMorph",value:function(a){var d=this;a.layout?a.layout.forceLayout():a.submorphs.forEach(function(k){return d.forceLayoutsOfMorph(k)})}},{key:"forceLayoutsInNextLevel",value:function(){var a=this;this.layoutableSubmorphs.forEach(function(d){return a.forceLayoutsOfMorph(d)})}},{key:"scheduleApply",value:function(a,d,k){k=void 0===k?{}:k;if("function"===typeof this.onScheduleApply)this.onScheduleApply(a,
d,k);this.active||(d&&(this.lastAnim=d),this.applyRequests=!0)}},{key:"onSubmorphResized",value:function(a,d){this.scheduleApply(a,this.reactToSubmorphAnimations&&d.meta.animation,d)}},{key:"onSubmorphAdded",value:function(a,d){this.submorphsChanged=!0;this.scheduleApply(a,d)}},{key:"onSubmorphRemoved",value:function(a,d){this.submorphsChanged=!0;this.scheduleApply(a,d)}},{key:"onChange",value:function(a){var d=a.args,k=a.prop,b=a.value,e=a.prevValue,l=a.meta;l=this.reactToSubmorphAnimations&&l&&
l.animation;d=d&&d[0];switch(a.selector){case "removeMorph":this.onSubmorphRemoved(d,l);break;case "addMorphAt":this.onSubmorphAdded(d,l)}"extent"===k&&b&&e&&(e.x!==b.x||e.y!==b.y)&&this.scheduleApply(d,l)}},{key:"affectsLayout",value:function(a,d){a=d.value;var k=d.prevValue;return["position","scale","rotation","isLayoutable","extent"].includes(d.prop)&&!ae.obj.equals(a,k)}},{key:"onSubmorphChange",value:function(a,d){if(d.meta&&d.meta.isLayoutAction)return this.scheduleApply(a,this.reactToSubmorphAnimation&&
d.meta.animation);if(this.affectsLayout(a,d))this.onSubmorphResized(a,d)}},{key:"changePropertyAnimated",value:function(a,d,k,b){if(b){var e=b.duration;b=b.easing;var l={};this.animationPromise=a.animate((l[d]=k,l.duration=e,l.easing=b,l))}else a[d]=k}},{key:"attachAnimated",value:function(a,d,k){this.active||(this.container=d,this.active=!0,d.layout=this,this.active=!1,this.lastAnim={duration:void 0===a?0:a,easing:k})}},{key:"apply",value:function(a){this.active||(this.active=!0,this.submorphsChanged=
!1,this.lastBoundsExtent=this.container&&this.container.bounds().extent(),this.active=!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Layout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:156,end:6778})})(void 0);var HE=Ma("aB",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
n=m.hasOwnProperty("CustomLayout")&&"function"===typeof m.CustomLayout?m.CustomLayout:m.CustomLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;this.relayout=a.relayout;this.layouterString=JSON.stringify(String(a.relayout));this.varMapping=a.varMapping||{};$b._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,a)}},{key:"name",value:function(){return"Custom Layout"}},{key:"apply",value:function(a){if(!this.active&&this.container){$b._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a);this.active=!0;this.relayout||(this.relayout=ae.Closure.fromSource(JSON.parse(this.layouterString),this.varMapping).recreateFunc());try{this.relayout(this.container,a)}catch(d){console.error("Error in relayout() of a custom layout:",d)}this.lastBoundsExtent=this.container&&this.container.bounds().extent();
this.active=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CustomLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6787,end:7715})}(ae.Layout));ae.CustomLayout=HE;ae.CustomLayout=HE;ae.CustomLayout=HE;var IE=Ma("bs",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
n=m.hasOwnProperty("SnapLayout")&&"function"===typeof m.SnapLayout?m.SnapLayout:m.SnapLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;$b._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._spacing=a.spacing}},{key:"name",value:function(){return"Snap"}},{key:"description",
value:function(){return"Fits the parent morph to the combined bounds of all its submorphs."}},{key:"apply",value:function(a){var d=this;a=void 0===a?!1:a;if(!this.active&&this.container){$b._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a);var k=this.container.submorphBounds().insetBy(-this.spacing),b=ae.pt(this.spacing,this.spacing).subPt(k.topLeft());b.r()&&this.container.submorphs.forEach(function(e){return d.changePropertyAnimated(e,"position",e.position.addPt(b),a)});this.changePropertyAnimated(this.container,
"extent",k.extent(),a)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7724,end:8521})}(ae.Layout));ae.SnapLayout=IE;ae.SnapLayout=IE;ae.SnapLayout=IE;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
n=m.hasOwnProperty("FloatLayout")&&"function"===typeof m.FloatLayout?m.FloatLayout:m.FloatLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;$b._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._orderByIndex=a.orderByIndex||!1;this._resizeSubmorphs="undefined"!==typeof a.resizeSubmorphs?
a.resizeSubmorphs:!1}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.left}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"direction",get:function(){return this._direction}},{key:"direction",set:function(a){this._direction=a;this.apply()}},{key:"align",get:function(){return this._align}},
{key:"align",set:function(a){this._align=a;this.apply()}},{key:"autoResize",get:function(){return this._autoResize}},{key:"autoResize",set:function(a){this._autoResize=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"resizeSubmorphs",get:function(){return this._resizeSubmorphs}},{key:"resizeSubmorphs",set:function(a){this._resizeSubmorphs=a;this.apply()}},{key:"equals",value:function(a){return this.spacing!=a.spacing||
this.align!=a.align||this.direction!=a.direction?!1:!0}},{key:"getSpec",value:function(){return{spacing:this.spacing,resizeSubmorphs:this.resizeSubmorphs,autoResize:this.autoResize,align:this.align,direction:this.direction,padding:this.padding,reactToSubmorphAnimations:this.reactToSubmorphAnimations,orderByIndex:this.orderByIndex}}},{key:"inspect",value:function(a){}},{key:"apply",value:function(a){a=void 0===a?!1:a;var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(d.active||
!d.container||!d.container.submorphs.length||!d.layoutableSubmorphs.length)return b.return();d.layoutableSubmorphBounds||d.refreshBoundsCache();$b._get(Object.getPrototypeOf(n.prototype),"apply",d).call(d,a);d.active=!0;try{k=d.computeMinContainerExtent(),d.layoutSubmorphs(k,a),k=d.computeMinContainerExtent(),d.resizeContainer(k,a),d.lastBoundsExtent=d.container.bounds().extent()}finally{d.active=!1,d.layoutRequests=!1}return b.return(d.animationPromise)})}},{key:"resizeContainer",value:function(){}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FloatLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:8523,end:10937})})(ae.Layout);var Gu=Ma("ad",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("VerticalLayout")&&
"function"===typeof m.VerticalLayout?m.VerticalLayout:m.VerticalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;$b._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._align=a.align||"left";this._direction=a.direction||"topToBottom"}},{key:"name",value:function(){return"Vertical"}},
{key:"description",value:function(){return"Assemble the submorphs in a vertically growing list."}},{key:"equals",value:function(a){return $b._get(Object.getPrototypeOf(n.prototype),"equals",this).call(this,a)&&a.name&&"Vertical"==a.name()?!0:!1}},{key:"possibleDirectionValues",get:function(){return["topToBottom","bottomToTop","centered"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"__serialize__",value:function(){return{__expr__:"new VerticalLayout("+ae.obj.inspect(this.getSpec())+
")",bindings:{"lively.morphic":["VerticalLayout"]}}}},{key:"layoutSubmorphs",value:function(a,d){var k=this,b=this.container,e=this.layoutableSubmorphs,l=this.spacing,p=this.autoResize,u=this.align,x=this.resizeSubmorphs,z=this.getStartY(a),E=[];a=x?b.width:a.x;p=p&&!x;var G=function(J,K){e.reduce(function(T,P){x&&k.changePropertyAnimated(P,"width",b.width-2*l,d);k.forceLayoutsOfMorph(P);k.changePropertyAnimated(P,J,T,d);T=P.bounds();E.push(T);return T[J]().addXY(0,T.height+l)},K)};this.layoutableSubmorphBounds=
E;"left"===u?G("topLeft",ae.pt(l,z)):"right"===u?G("topRight",ae.pt(a+(p?l:-l),z)):G("topCenter",ae.pt((a+(p?2*l:0))/2,z))}},{key:"resizeContainer",value:function(a,d){var k=this.direction,b=this.layoutableSubmorphs,e=this.resizeSubmorphs,l=this.spacing,p=this.container;this.autoResize&&("centered"===k?(k=b[0].top,b=ae.arr.last(b).bottom+k):b=ae.arr.last(b).bottom+l,a=ae.pt(e?p.width:a.x+2*l,Math.max(b,a.y)),this.changePropertyAnimated(p,"extent",a,d))}},{key:"getStartY",value:function(a){var d=this.layoutableSubmorphBounds,
k=this.spacing,b=this.direction;var e=(d.length-1)*k;d=$jscomp.makeIterator(d);for(var l=d.next();!l.done;l=d.next())e+=l.value.height;return Math.max(0,"bottomToTop"===b?a.y-e-2*k:"centered"===b?a.y/2-e/2-k:0)+k}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,d=this.layoutableSubmorphs,k=this.autoResize,b=(d.length+1)*this.spacing,e=0,l=0,p=0;p<d.length;p++){var u=d[p].bounds(),x=u.width;l+=u.height;e=Math.max(x,e)}d=ae.pt(e,l+b);k||(d=d.maxPt(a.extent));return d}},{key:"layoutOrder",
value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10946,end:14914})}(ae.FloatLayout));ae.VerticalLayout=Gu;ae.VerticalLayout=
Gu;ae.VerticalLayout=Gu;var xq=Ma("ah",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("HorizontalLayout")&&"function"===typeof m.HorizontalLayout?m.HorizontalLayout:m.HorizontalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;$b._get(Object.getPrototypeOf(n.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this._direction=a.direction||"leftToRight";this._align=a.align||"top"}},{key:"name",value:function(){return"Horizontal"}},{key:"description",value:function(){return"Assemble the submorphs in a horizontally growing list."}},{key:"possibleDirectionValues",get:function(){return["leftToRight","rightToLeft","centered"]}},{key:"possibleAlignValues",get:function(){return["top","center","bottom"]}},{key:"__serialize__",value:function(){return{__expr__:"new HorizontalLayout("+
ae.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["HorizontalLayout"]}}}},{key:"equals",value:function(a){return $b._get(Object.getPrototypeOf(n.prototype),"equals",this).call(this,a)&&a.name&&"Horizontal"==a.name()?!0:!1}},{key:"layoutSubmorphs",value:function(a,d){var k=this,b=this.container,e=this.layoutableSubmorphs,l=this.resizeSubmorphs,p=this.spacing,u=this.autoResize,x=this.align,z=this.getStartX(a),E=[];a=l?b.height:a.y;u=u&&!l;var G=function(J,K){e.reduce(function(T,P){l&&k.changePropertyAnimated(P,
"height",b.height-2*p,d);k.forceLayoutsOfMorph(P);k.changePropertyAnimated(P,J,T,d);T=P.bounds();E.push(T);return T[J]().addXY(T.width+p,0)},K)};this.layoutableSubmorphBounds=E;"top"===x?G("topLeft",ae.pt(z,p)):"bottom"===x?G("bottomLeft",ae.pt(z,a+(u?p:-p))):G("leftCenter",ae.pt(z,(a+(u?2*p:0))/2))}},{key:"resizeContainer",value:function(a,d){var k=this.direction,b=this.layoutableSubmorphBounds,e=this.resizeSubmorphs,l=this.spacing,p=this.container;this.autoResize&&("centered"===k?(k=b[0].left(),
b=ae.arr.last(b).right()+k):b=ae.arr.last(b).right()+l,a=ae.pt(Math.max(a.x,b),e?p.height:a.y+2*l),this.changePropertyAnimated(p,"extent",a,d))}},{key:"getStartX",value:function(a){var d=this.layoutableSubmorphBounds,k=this.spacing,b=this.direction;var e=(d.length-1)*k;d=$jscomp.makeIterator(d);for(var l=d.next();!l.done;l=d.next())e+=l.value.width;return Math.max(0,"rightToLeft"===b?a.x-e-2*k:"centered"===b?a.x/2-e/2-k:0)+k}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,
d=this.layoutableSubmorphBounds,k=this.autoResize,b=(d.length+1)*this.spacing,e=0,l=0,p=0;p<d.length;p++){var u=d[p],x=u.height;e+=u.width;l=Math.max(x,l)}d=ae.pt(e+b,l);k||(d=d.maxPt(a.extent));return d}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:14923,end:18840})}(ae.FloatLayout));ae.HorizontalLayout=xq;ae.HorizontalLayout=xq;ae.HorizontalLayout=xq;var JE=Ma("ai",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("ProportionalLayout")&&"function"===typeof m.ProportionalLayout?m.ProportionalLayout:m.ProportionalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:"name",
value:function(){return"Proportional"}},{key:"description",value:function(){return"Resizes, scales, and moves morphs according to their original position."}},{key:"inspect",value:function(a){}},{key:Symbol.for("lively-instance-initialize"),value:function(a){$b._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.extentDelta=ae.pt(0,0);this.proportionalLayoutSettingsForMorphs=new WeakMap;this.submorphSettings=a&&a.submorphSettings||[];this.lastExtent=
a.lastExtent;delete this.spacing;delete this.autoResize}},{key:"getSpec",value:function(){return{submorphSettings:this.submorphSettings,reactToSubmorphAnimations:this.reactToSubmorphAnimations,lastExtent:this.lastExtent}}},{key:"__serialize__",value:function(){return{__expr__:"new ProportionalLayout("+ae.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["ProportionalLayout"]}}}},{key:"__dont_serialize__",get:function(){return[].concat($jscomp.arrayFromIterable($b._get(Object.getPrototypeOf(n.prototype),
"__dont_serialize__",this)),["extentDelta","lastExtent"])}},{key:"__after_deserialize__",value:function(a,d){var k=this._submorphSettings;a=this.container;d=this.proportionalLayoutSettingsForMorphs||new WeakMap;this.extentDelta=ae.pt(0,0);if(k&&a){k=$jscomp.makeIterator(k);for(var b=k.next();!b.done;b=k.next()){var e=$jscomp.makeIterator(b.value);b=e.next().value;e=e.next().value;(b=$jscomp.makeIterator(this._morphsMatchingSelector(a,b)).next().value)&&d.set(b,e)}this.proportionalLayoutSettingsForMorphs=
d}}},{key:"onSubmorphChange",value:function(a,d,k,b){"name"===d.prop&&(k=this.proportionalLayoutSettingsForMorphs.get(a))&&this.changeSettingsFor(a,k,!0);return $b._get(Object.getPrototypeOf(n.prototype),"onSubmorphChange",this).call(this,a,d)}},{key:"settingsFor",value:function(a){return this.proportionalLayoutSettingsForMorphs.get(a)||{x:"scale",y:"scale"}}},{key:"changeSettingsFor",value:function(a,d,k){k=void 0===k?!1:k;"string"===typeof d&&(d={x:d,y:d});this.proportionalLayoutSettingsForMorphs.set(a,
Object.assign({},this.settingsFor(a),{},d));k&&(d=this.submorphSettings.filter(function(b){return b[0]!==a.name}),d.push([a.name,this.settingsFor(a)]),this._submorphSettings=d)}},{key:"submorphSettings",get:function(){return this._submorphSettings}},{key:"submorphSettings",set:function(a){if(this.container)this._submorphSettings=a,this.changeSubmorphSettings(a);else ae.once(this,"container",this,"submorphSettings",{converter:"function () { return submorphSettings }",varMapping:{submorphSettings:a}})}},
{key:"changeSubmorphSettings",value:function(a){var d=this,k={};a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;k={$jscomp$loop$prop$setting$2710:k.$jscomp$loop$prop$setting$2710},b=a.next()){b=$jscomp.makeIterator(b.value);var e=b.next().value;k.$jscomp$loop$prop$setting$2710=b.next().value;this._morphsMatchingSelector(this.container,e).forEach(function(l){return function(p){return d.changeSettingsFor(p,l.$jscomp$loop$prop$setting$2710)}}(k))}}},{key:"_morphsMatchingSelector",value:function(a,
d){var k=this,b=[];if(!d)return b;d.isMorph?b=[d]:d instanceof RegExp?b=a.submorphs.filter(function(e){return e.name.match(d)}):"string"===typeof d?b=a.submorphs.filter(function(e){return e.name===d}):Array.isArray(d)&&(b=ae.arr.flatmap(d,function(e){return k._morphsMatchingSelector(a,e)}));return b}},{key:"refreshBoundsCache",value:function(){var a=this.container.extent,d=this.lastExtent;d&&!a.eqPt(d)&&(this.extentDelta=this.extentDelta.addPt(a.subPt(d)));this.lastExtent=a;this.layoutableSubmorphBounds=
this.layoutableSubmorphs.map(function(k){return k.bounds()})}},{key:"apply",value:function(a){a=void 0===a?!1:a;var d=this.container,k=this.extentDelta,b=k.x;k=k.y;var e=(d||{}).extent;if(!this.active&&d&&(0!=b||0!=k)){this.extentDelta=ae.pt(0,0);this.active=!0;$b._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a);var l=this.layoutableSubmorphs;d=e.scaleByPt(e.addXY(-b,-k).invertedSafely());e=$jscomp.makeIterator(l);for(l=e.next();!l.done;l=e.next()){l=l.value;var p=this.settingsFor(l),
u=p.x,x=p.y,z=p=0,E=0,G=0;"move"===u&&(p=b);"move"===x&&(z=k);"resize"===u&&(E=b);"resize"===x&&(G=k);if("scale"===u||"scale"===x)u=ae.pt("scale"===u?d.x:1,"scale"===x?d.y:1),this.changePropertyAnimated(l,"position",l.position.scaleByPt(u),a),this.changePropertyAnimated(l,"extent",l.extent.scaleByPt(u),a);(p||z)&&this.changePropertyAnimated(l,"position",l.position.addXY(p,z),a);(E||G)&&this.changePropertyAnimated(l,"extent",l.extent.addXY(E,G),a)}this.forceLayoutsInNextLevel();this.active=!1}}},{key:"copy",
value:function(){return new this.constructor(this.getSpec())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:18849,end:24393})}(ae.Layout));ae.ProportionalLayout=JE;ae.ProportionalLayout=JE;ae.ProportionalLayout=
JE;var KE=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("CenteredTilingLayout")&&"function"===typeof m.CenteredTilingLayout?m.CenteredTilingLayout:m.CenteredTilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:"name",value:function(){return"CenteredTiling"}},{key:"description",value:function(){return"Similar to TilingLayout but center the rows."}},
{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;$b._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a);a=this.getOptimalWidth(this.container);var d=this.spacing,k=this.layoutableSubmorphs,b=d+this.border.top;k=k.slice();for(var e={};k.length;){e.$jscomp$loop$prop$remainingWidth$2712=a;var l=ae.arr.takeWhile(k,function(x){return function(z){z=x.$jscomp$loop$prop$remainingWidth$2712-(z.width+2*d);if(0>z)return!1;x.$jscomp$loop$prop$remainingWidth$2712=
z;return!0}}(e));l.length?k=ae.arr.withoutAll(k,l):(l=[k.shift()],e.$jscomp$loop$prop$remainingWidth$2712=0);var p=ae.pt(e.$jscomp$loop$prop$remainingWidth$2712/2+d+this.border.left,b);l=$jscomp.makeIterator(l);for(var u=l.next();!u.done;u=l.next())u=u.value,u.position=p,p=p.addXY(2*d+u.width,0),b=Math.max(b,u.bottom);b+=2*d;e={$jscomp$loop$prop$remainingWidth$2712:e.$jscomp$loop$prop$remainingWidth$2712}}this.active=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CenteredTilingLayout"}}],
m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:24402,end:25698})}(ae.TilingLayout);ae.CenteredTilingLayout=KE;ae.CenteredTilingLayout=KE;ae.CenteredTilingLayout=KE;var LE=Ma("aC",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("TilingLayout")&&
"function"===typeof m.TilingLayout?m.TilingLayout:m.TilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;$b._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._axis=a.axis||"row";this._align=a.align||"left";this._verticalAlign=a.verticalAlign||"top";this._orderByIndex=
a.orderByIndex||!1;delete this.autoResize}},{key:"name",value:function(){return"Tiling"}},{key:"description",value:function(){return"Make the submorphs fill their owner, inserting breaks to defer intersecting the bounds as much as possible."}},{key:"inspect",value:function(a){}},{key:"__serialize__",value:function(){return{__expr__:"new TilingLayout("+ae.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["TilingLayout"]}}}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},
{key:"getSpec",value:function(){return{axis:this.axis,align:this.align,spacing:this.spacing,orderByIndex:this.orderByIndex,reactToSubmorphAnimations:this.reactToSubmorphAnimations}}},{key:"possibleAxisValues",get:function(){return["row","column"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"axis",get:function(){return this._axis}},
{key:"axis",set:function(a){this._axis=a;this.apply()}},{key:"align",get:function(){return this._align}},{key:"align",set:function(a){this._align=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;$b._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a);var d=this.axis,k=this.align,b=this.border,e=this.spacing,
l=this.layoutableSubmorphs,p=this.getOptimalWidth(this.container),u=(d="row"==d)?"left":"top",x=d?"x":"y",z=d?"y":"x",E=0,G=e+b[d?"top":"left"],J="topLeft";switch(this._verticalAlign){case "top":J="topLeft";break;case "center":J="leftCenter";break;case "bottom":J="bottomLeft"}for(;l.length;){var K=p-e,T=ae.arr.takeWhile(l,function(fa){fa=fa.bounds().extent();fa=K-(Math.floor(fa[x])+e);if(0>fa)return!1;K=fa;return!0});T.length?l.splice(0,T.length):(T=[l.shift()],K=0);E=ae.arr.max(T.map(function(fa){return fa.bounds().extent()[z]}));
if(d)switch(k){case "left":var P=ae.pt(e,G);break;case "center":P=ae.pt(K/2+e+b[u],G);break;case "right":P=ae.pt(K-e,G)}else switch(k){case "left":P=ae.pt(G,e);break;case "center":P=ae.pt(G,K/2+e+b[u]);break;case "right":P=ae.pt(G,K-e)}"bottomLeft"==J&&(P=P.addXY(0,E));T=$jscomp.makeIterator(T);for(var da=T.next();!da.done;da=T.next())da=da.value,this.changePropertyAnimated(da,J,P,a),da=da.bounds().extent(),P=d?P.addXY(e+da[x],0):P.addXY(0,e+da[x]);G+=e+E;E=0}this.active=!1}}},{key:"getMinWidth",
value:function(){var a=this.border,d=a.left;a=a.right;return this.layoutableSubmorphs.reduce(function(k,b){return b.bounds().width>k?b.bounds().width:k},0)+d+a}},{key:"getMinHeight",value:function(){var a=this.border,d=a.top;a=a.bottom;return this.layoutableSubmorphs.reduce(function(k,b){return b.bounds().height>k?b.bounds().height:k},0)+d+a}},{key:"getOptimalWidth",value:function(a){var d=this.axis,k=this.border,b=k.left,e=k.top,l=k.right;k=k.bottom;a="row"==d?a.width-b-l:a.height-e-k;d="row"==d?
this.getMinWidth():this.getMinHeight();return Math.max(a,d)}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):"row"===this.axis?1E6*(a.top-a.top%15)+a.left:1E6*(a.left-a.left%15)+a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:25707,end:31255})}(ae.Layout));ae.TilingLayout=LE;ae.TilingLayout=LE;ae.TilingLayout=LE;var ME=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("CellGroup")&&"function"===typeof m.CellGroup?m.CellGroup:m.CellGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){var d=a.morph,k=a.layout;this.state={cells:[a.cell],layout:k,align:a.align,resize:k.fitToCell};k&&k.addGroup(this);this.morph=d}},{key:"morph",get:function(){var a=this.state,d=a.morph;a=a.layout;return d?d.isMorph?d:a.layoutableSubmorphs.find(function(k){return k.name==d}):null}},{key:"compensateOrigin",get:function(){return this.layout.compensateOrigin}},{key:"resize",get:function(){return this.state.resize}},{key:"resize",set:function(a){this.state.resize=a;this.layout.apply()}},
{key:"align",get:function(){return this.state.align||"topLeft"}},{key:"align",set:function(a){this.state.align=a;this.layout.apply()}},{key:"morph",set:function(a){var d=a&&this.layout.getCellGroupFor(a);d&&(d.morph=null);this.state.morph=a;this.layout.apply()}},{key:"manages",value:function(a){return this.morph&&(this.morph==a||this.morph.name==a)}},{key:"apply",value:function(a){a=void 0===a?!1:a;var d=this.morph;if(d){var k=this.bounds(),b=this.compensateOrigin?this.layout.container.origin.negated():
ae.pt(0,0);if(a){var e=this.resize?k.extent():d.extent,l=a;a=l.duration;l=l.easing;var p={};d.animate((p[this.alignedProperty||this.align]=k[this.align]().addPt(b),p.extent=e,p.duration=a,p.easing=l,p))}else this.resize&&(d.extent=k.extent()),d[this.alignedProperty||this.align]=k[this.align]().addPt(b);this.layout.forceLayoutsInNextLevel()}}},{key:"cells",get:function(){return this.state.cells}},{key:"layout",get:function(){return this.state.layout}},{key:"bounds",value:function(){return 0<this.cells.length?
this.cells.map(function(a){return a.bounds()}).reduce(function(a,d){return a.union(d)}):ae.rect(0,0,0,0)}},{key:"includes",value:function(a){return this.cells.find(function(d){return d==a})}},{key:"connect",value:function(a){void 0==this.morph&&(this.morph=a.group.morph);a.group?a.group.disconnect(a,this):a.group=this;this.cells.push(a)}},{key:"disconnect",value:function(a,d){a.group=(void 0===d?null:d)||new ae.CellGroup({morph:null,layout:this.layout,cell:a});ae.arr.remove(this.cells,a);1>this.cells.length&&
this.layout&&this.layout.removeGroup(this)}},{key:"merge",value:function(a){var d=this;a.cells.forEach(function(k){d.connect(k)})}},{key:"topLeft",get:function(){var a=this;return this.cells.find(function(d){return(null==d.left||d.left.group!=a)&&(null==d.top||d.top.group!=a)})}},{key:"bottomRight",get:function(){var a=this;return this.cells.find(function(d){return(null==d.right||d.right.group!=a)&&(null==d.bottom||d.bottom.group!=a)})}},{key:"position",get:function(){return this.topLeft.position}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGroup"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:31264,end:34496})}(void 0);ae.CellGroup=ME;ae.CellGroup=ME;ae.CellGroup=ME;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("LayoutAxis")&&
"function"===typeof m.LayoutAxis?m.LayoutAxis:m.LayoutAxis=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.origin=a}},{key:"otherAxis",get:function(){return[].concat($jscomp.arrayFromIterable(this.axisBefore),$jscomp.arrayFromIterable(this.axisAfter))}},{key:"axisBefore",get:function(){for(var a=this,d=[];a=a.before;)d=[a].concat($jscomp.arrayFromIterable(d));
return d}},{key:"axisAfter",get:function(){for(var a=this,d=[];a=a.after;)d=[].concat($jscomp.arrayFromIterable(d),[a]);return d}},{key:"before",get:function(){throw Error("before() not implemented!");}},{key:"after",get:function(){throw Error("after() not implemented!");}},{key:"containerLength",get:function(){return this.container[this.dimension]}},{key:"containerLength",set:function(a){this.container[this.dimension]=a}},{key:"getRoot",value:function(){return(this.axisBefore[0]||this).items[0]}},
{key:"container",get:function(){return this.origin.container}},{key:"layout",get:function(){return this.origin.layout}},{key:"frozen",get:function(){return this.origin.frozen[this.dimension]}},{key:"frozen",set:function(a){this.origin.frozen[this.dimension]=a}},{key:"align",set:function(a){this.items.forEach(function(d){return d.group.state.align=a})}},{key:"fixed",get:function(){return this.origin.fixed[this.dimension]}},{key:"fixed",set:function(a){var d=this;if(ae.obj.isNumber(a)){var k=a;a=!0}this.items.forEach(function(e){e.fixed[d.dimension]=
a});var b=this.containerLength;void 0!=k&&(this[this.dimension]=k);this.adjustOtherProportions(a);this.containerLength=b}},{key:"length",get:function(){return this.origin[this.dimension]}},{key:"length",set:function(a){var d=this;this.items.forEach(function(k){k[d.dimension]=ae.num.roundTo(a,1)})}},{key:"proportion",get:function(){return this.origin.proportion[this.dimension]}},{key:"proportion",set:function(a){var d=this;this.items.forEach(function(k){k.proportion[d.dimension]=a})}},{key:"min",get:function(){return this.origin.min[this.dimension]}},
{key:"min",set:function(a){this.adjustMin(a-this.min)}},{key:"adjustMin",value:function(a){var d=this;this.items.forEach(function(k){k.min[d.dimension]=0>k.min[d.dimension]+a?0:k.min[d.dimension]+a});this.layout.apply()}},{key:"adjustProportion",value:function(){this.fixed||(this.proportion=0<this.dynamicLength?this.length/this.dynamicLength:0)}},{key:"adjustOtherProportions",value:function(a){var d=this,k=this.axisBefore,b=this.axisAfter,e=ae.arr.sum([].concat($jscomp.arrayFromIterable(k),$jscomp.arrayFromIterable(b)).filter(function(u){return!u.fixed}).map(function(u){return u.proportion})),
l=function(u){return u.proportion/=e},p=function(u){return u.proportion*=d.origin.removedDynamicProportions};a&&(this.origin.removedDynamicProportions=e);k.forEach(a?l:p);b.forEach(a?l:p)}},{key:"prepareForResize",value:function(a){a=this.proportion*Math.max(0,a-this.staticLength);this.frozen&&a>=this.min?(this.fixed=this.frozen=!1,this.length=a):!this.frozen&&this.min>a&&(this.fixed=this.frozen=!0,this.length=this.min);return this}},{key:"adjustLength",value:function(a){var d;0>this.length+a&&(a=
-this.length);(d=this.axisAfter.find(function(k){return!k.fixed}))?(a=Math.min(a,d.length),this.length+=a,d.length-=a,this.adjustProportion(),d.adjustProportion()):(d=this.axisBefore.reverse().find(function(k){return!k.fixed}))?(d.length-=a,this.length+=a,this.adjustProportion(),d.adjustProportion()):(this.length+=a,this.adjustProportion(),this.otherAxis.forEach(function(k){return k.adjustProportion()}),this.containerLength+=a)}},{key:"equalizeDynamicAxis",value:function(){var a=[].concat($jscomp.arrayFromIterable(this.otherAxis.filter(function(k){return!k.fixed})),
$jscomp.arrayFromIterable(this.fixed?[]:[this])),d=(this.containerLength-this.staticLength)/a.length;a.map(function(k){k.fixed||(k.length=d);return k}).forEach(function(k){return k.adjustProportion()})}},{key:"addBefore",value:function(){var a=this.emptyAxis();this.before&&this.before.attachTo(a);a.attachTo(this);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}},{key:"addAfter",value:function(){var a=this.emptyAxis();this.after&&a.attachTo(this.after);this.attachTo(a);this.equalizeDynamicAxis();
this.layout.grid=this.getRoot()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutAxis"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:35136,end:40853})})(void 0);var NE=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("LayoutColumn")&&
"function"===typeof m.LayoutColumn?m.LayoutColumn:m.LayoutColumn=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){$b._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.above),[a],$jscomp.arrayFromIterable(a.below))}},{key:"dimension",get:function(){return"width"}},
{key:"before",get:function(){return this._before||(this._before=this.origin.left&&new ae.LayoutColumn(this.origin.left))}},{key:"after",get:function(){return this._after||(this._after=this.origin.right&&new ae.LayoutColumn(this.origin.right))}},{key:"row",value:function(a){return this.items[a]}},{key:"dynamicLength",get:function(){return this.origin.dynamicWidth}},{key:"staticLength",get:function(){return this.origin.totalStaticWidth}},{key:"width",get:function(){return this.length}},{key:"width",
set:function(a){a-=this.width;this.fixed?(this.length+=a,this.container.width+=a):this.adjustLength(a);!this.layout.manualUpdate&&this.layout.apply()}},{key:"paddingLeft",set:function(a){this.items.forEach(function(d){d.padding.x=a});this.layout.apply()}},{key:"paddingLeft",get:function(){return this.items[0].padding.x}},{key:"paddingRight",set:function(a){this.items.forEach(function(d){d.padding.width=a});this.layout.apply()}},{key:"paddingRight",get:function(){return this.items[0].padding.width}},
{key:"emptyAxis",value:function(){var a=new ae.LayoutColumn(new ae.LayoutCell({column:ae.arr.withN(this.items.length,null),layout:this.layout}));ae.arr.zip(a.items,this.items).forEach(function(d){var k=$jscomp.makeIterator(d);d=k.next().value;k=k.next().value;d.height=k.height;d.fixed.height=k.fixed.height;d.frozen.height=k.frozen.height;d.proportion.height=k.proportion.height;d.min.height=k.min.height});return a}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=
null;ae.arr.zip(this.items,a.items).forEach(function(d){var k=$jscomp.makeIterator(d);d=k.next().value;k=k.next().value;d.right=k;k.left=d});this.equalizeDynamicAxis();return a}},{key:"remove",value:function(){var a=this,d=this.before||this.after;this.items.forEach(function(k){k.left&&(k.left.right=k.right);k.right&&(k.right.left=k.left);k.group.disconnect(k);a.layout.removeGroup(k.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=
this.after.getRoot());d.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutColumn"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:40862,end:43236})}(ae.LayoutAxis);ae.LayoutColumn=NE;ae.LayoutColumn=NE;ae.LayoutColumn=NE;var OE=function(f){var m=
lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("LayoutRow")&&"function"===typeof m.LayoutRow?m.LayoutRow:m.LayoutRow=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){$b._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.before),
[a],$jscomp.arrayFromIterable(a.after))}},{key:"dimension",get:function(){return"height"}},{key:"emptyAxis",value:function(){var a=new ae.LayoutRow(new ae.LayoutCell({row:ae.arr.withN(this.items.length,null),layout:this.layout}));ae.arr.zip(a.items,this.items).forEach(function(d){var k=$jscomp.makeIterator(d);d=k.next().value;k=k.next().value;d.width=k.width;d.fixed.width=k.fixed.width;d.frozen.width=k.frozen.width;d.proportion.width=k.proportion.width;d.min.width=k.min.width});return a}},{key:"paddingTop",
set:function(a){this.items.forEach(function(d){d.padding.y=a});this.layout.apply()}},{key:"paddingTop",get:function(){return this.items[0].padding.y}},{key:"paddingBottom",set:function(a){this.items.forEach(function(d){d.padding.height=a});this.layout.apply()}},{key:"paddingBottom",get:function(){return this.items[0].padding.height}},{key:"before",get:function(){return this._before||(this._before=this.origin.top&&new ae.LayoutRow(this.origin.top))}},{key:"after",get:function(){return this._after||
(this._after=this.origin.bottom&&new ae.LayoutRow(this.origin.bottom))}},{key:"dynamicLength",get:function(){return this.origin.dynamicHeight}},{key:"staticLength",get:function(){return this.origin.totalStaticHeight}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=null;ae.arr.zip(this.items,a.items).forEach(function(d){var k=$jscomp.makeIterator(d);d=k.next().value;k=k.next().value;d.bottom=k;k.top=d});this.equalizeDynamicAxis();return a}},{key:"col",value:function(a){return this.items[a]}},
{key:"height",get:function(){return this.length}},{key:"height",set:function(a){a-=this.height;this.fixed?(this.length+=a,this.container.height+=a):(this.adjustLength(a),this.proportion=0<this.origin.dynamicHeight?this.height/this.origin.dynamicHeight:0);!this.layout.manualUpdate&&this.layout.apply()}},{key:"remove",value:function(){var a=this,d=this.before||this.after;this.items.forEach(function(k){k.top&&(k.top.bottom=k.bottom);k.bottom&&(k.bottom.top=k.top);k.group.disconnect(k);a.layout.removeGroup(k.group)});
this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=this.after.getRoot());d.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutRow"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:43245,
end:45706})}(ae.LayoutAxis);ae.LayoutRow=OE;ae.LayoutRow=OE;ae.LayoutRow=OE;var PE=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("LayoutCell")&&"function"===typeof m.LayoutCell?m.LayoutCell:m.LayoutCell=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var d=a.row,k=a.column,b=a.top,e=a.left,
l=a.right,p=a.bottom;a=a.layout;var u;d=$jscomp.makeIterator(d||[]);var x=d.next().value;d=$jscomp.arrayFromIterator(d);k=$jscomp.makeIterator(k||[]);var z=k.next().value;k=$jscomp.arrayFromIterator(k);this.layout=a;this.fixed={width:!1,height:!1};this.frozen={width:!1,height:!1};this.min={width:0,height:0};this.top=b;this.left=e;this.bottom=p;this.right=l;this.padding=ae.rect(0,0,0,0);0<d.length?this.right=new ae.LayoutCell({row:d,left:this,layout:a}):0<k.length&&(this.bottom=new ae.LayoutCell({column:k,
top:this,layout:a}));this.proportion={width:1/(1+this.before.length+this.after.length),height:1/(1+this.above.length+this.below.length)};this.height=this.container.height*this.proportion.height;this.width=this.container.width*this.proportion.width;(u=a&&a.getCellGroupFor(x||z))?u.connect(this):this.group=new ae.CellGroup({cell:this,morph:x||z,layout:a})}},{key:"container",get:function(){return this.layout.container}},{key:"above",get:function(){return this.collect({neighbor:"top",prepend:!0})}},{key:"below",
get:function(){return this.collect({neighbor:"bottom",append:!0})}},{key:"before",get:function(){return this.collect({neighbor:"left",prepend:!0})}},{key:"after",get:function(){return this.collect({neighbor:"right",append:!0})}},{key:"collect",value:function(a){var d=a.neighbor,k=a.prepend;a=a.append;for(var b=[],e=this;e=e[d];)k&&(b=[e].concat($jscomp.arrayFromIterable(b))),a&&(b=[].concat($jscomp.arrayFromIterable(b),[e]));return b}},{key:"col",value:function(a){for(var d=this,k=a;0<k&&d;)d=d.right,
k--;if(!d)throw Error(a+" out of bounds! Last column was "+(a-k-1));return new ae.LayoutColumn(d)}},{key:"row",value:function(a){for(var d=this,k=a;0<k&&d;)d=d.bottom,k--;if(!d)throw Error(a+" out of bounds! Last row was "+(a-k-1));return new ae.LayoutRow(d)}},{key:"extent",get:function(){return ae.pt(this.width,this.height)}},{key:"staticWidth",get:function(){return this.fixed.width||this.min.width==this.width}},{key:"staticHeight",get:function(){return this.fixed.height||this.min.height==this.height}},
{key:"totalStaticWidth",get:function(){return ae.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),$jscomp.arrayFromIterable(this.after)).filter(function(a){return a.staticWidth}).map(function(a){return a.width}))}},{key:"totalStaticHeight",get:function(){return ae.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return a.staticHeight}).map(function(a){return a.height}))}},{key:"dynamicWidth",get:function(){return ae.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),
$jscomp.arrayFromIterable(this.after)).filter(function(a){return!a.staticWidth}).map(function(a){return a.width}))}},{key:"dynamicHeight",get:function(){return ae.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return!a.staticHeight}).map(function(a){return a.height}))}},{key:"height",get:function(){return Math.max(this.min.height,this._height||0)}},{key:"height",set:function(a){this._height=a}},{key:"width",get:function(){return Math.max(this.min.width,
this._width||0)}},{key:"width",set:function(a){this._width=a}},{key:"position",get:function(){return ae.pt(ae.arr.sum(this.before.map(function(a){return a.width})),ae.arr.sum(this.above.map(function(a){return a.height})))}},{key:"bounds",value:function(){return this.position.addPt(this.padding.topLeft()).extent(this.extent.subPt(this.padding.extent()).subPt(this.padding.topLeft()))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutCell"}}],m,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:45715,end:49367})}(void 0);ae.LayoutCell=PE;ae.LayoutCell=PE;ae.LayoutCell=PE;var Hu=Ma("ae",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("GridLayout")&&"function"===typeof m.GridLayout?m.GridLayout:m.GridLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){$b._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=Object.assign({autoAssign:!0,fitToCell:!0},a);this.cellGroups=[];this.config=a}},{key:"name",value:function(){return"Grid"}},{key:"description",value:function(){return"Aligns the submorphs alongside a configurable grid. Columns and rows and be configured to have different proportional, minimal or fixed sizes. Cells can further be grouped such that submorphs fill up multiple slots of the grid."}},
{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"getSpec",value:function(){for(var a=[],d=[],k=[],b={},e=$jscomp.makeIterator(ae.arr.range(0,this.rowCount-1)),l=e.next();!l.done;l=e.next())a.push(this.grid.row(l.value).items.map(function(u){return u.group.state.morph?u.group.state.morph.name||u.group.state.morph:null}));e=$jscomp.makeIterator(ae.arr.range(0,this.rowCount-1));for(l=e.next();!l.done;l=e.next()){l=l.value;var p=this.grid.row(l);d.push(l,Object.assign({},
p.fixed?{fixed:p.length}:{height:p.height},{paddingTop:p.paddingTop,paddingBottom:p.paddingBottom}))}e=$jscomp.makeIterator(ae.arr.range(0,this.columnCount-1));for(l=e.next();!l.done;l=e.next())l=l.value,p=this.grid.col(l),k.push(l,Object.assign({},p.fixed?{fixed:p.length}:{},{paddingLeft:p.paddingLeft,paddingRight:p.paddingRight}));e=$jscomp.makeIterator(this.cellGroups);for(l=e.next();!l.done;l=e.next())l=l.value,l.state.morph&&(b["string"===typeof l.state.morph?l.state.morph:l.morph.name]=ae.obj.select(l,
["align","resize"]));return{autoAssign:!1,grid:a,rows:d,columns:k,groups:b}}},{key:"__serialize__",value:function(){return{__expr__:"new GridLayout("+ae.obj.inspect(this.getSpec(),{escapeKeys:!0})+")",bindings:{"lively.morphic":["GridLayout"]}}}},{key:"initGrid",value:function(){var a=this,d=this.ensureGrid(this.config).map(function(k){return new ae.LayoutRow(new ae.LayoutCell({row:k,layout:a}))});d.reduce(function(k,b){return k.attachTo(b)});this.config.autoAssign&&this.autoAssign(this.notInLayout);
this.grid=d[0].col(0);this.col(0).equalizeDynamicAxis();this.row(0).equalizeDynamicAxis();this.initRowsAndColumns();this.initGroups()}},{key:"initGroups",value:function(){var a=this.config.groups;if(a)for(var d in a){var k=this.getCellGroupFor(this.container.getSubmorphNamed(d)),b=a[d],e=b.resize,l=void 0===b.align?"topLeft":b.align;b=void 0===b.alignedProperty?"topLeft":b.alignedProperty;k&&(void 0!=e&&(k.resize=e),k.align=l,k.alignedProperty=b)}}},{key:"initRowsAndColumns",value:function(){var a=
this.config,d=void 0===a.columns?[]:a.columns,k=$jscomp.makeIterator(ae.arr.toTuples(void 0===a.rows?[]:a.rows,2));for(a=k.next();!a.done;a=k.next()){var b=$jscomp.makeIterator(a.value);a=b.next().value;b=b.next().value;Object.assign(this.row(a),b)}d=$jscomp.makeIterator(ae.arr.toTuples(d,2));for(a=d.next();!a.done;a=d.next())k=$jscomp.makeIterator(a.value),a=k.next().value,b=k.next().value,Object.assign(this.col(a),b)}},{key:"compensateOrigin",get:function(){return this.config.compensateOrigin}},
{key:"compensateOrigin",set:function(a){this.config.compensateOrigin=a;this.apply()}},{key:"fitToCell",get:function(){return this.config.fitToCell}},{key:"fitToCell",set:function(a){this.config.fitToCell=a;this.cellGroups.forEach(function(d){return d.resize=a});this.apply()}},{key:"notInLayout",get:function(){return ae.arr.withoutAll(this.layoutableSubmorphs,this.cellGroups.map(function(a){return a.morph}))}},{key:"col",value:function(a){return this.grid.col(a)}},{key:"row",value:function(a){return this.grid.row(a)}},
{key:"rowCount",get:function(){return this.grid.col(0).items.length}},{key:"columnCount",get:function(){return this.grid.row(0).items.length}},{key:"addGroup",value:function(a){this.cellGroups.push(a)}},{key:"removeGroup",value:function(a){ae.arr.remove(this.cellGroups,a)}},{key:"fitAxis",value:function(){var a=this,d,k;[this.grid.row(0)].concat($jscomp.arrayFromIterable(this.grid.row(0).axisAfter)).map(function(b){b.prepareForResize(a.container.height);d=a.grid.totalStaticHeight;return b}).forEach(function(b){b.fixed||
(b.length=b.proportion*Math.max(0,a.container.height-d))});[this.grid.col(0)].concat($jscomp.arrayFromIterable(this.grid.col(0).axisAfter)).map(function(b){b.prepareForResize(a.container.width);k=a.grid.totalStaticWidth;return b}).forEach(function(b){b.fixed||(b.length=b.proportion*Math.max(0,a.container.width-k))})}},{key:"apply",value:function(a){a=void 0===a?!1:a;this.active||(this.active=!0,$b._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a),this.grid||this.initGrid(),this.fitAxis(),
this.container.extent=ae.pt(Math.max(this.grid.totalStaticWidth,this.container.width),Math.max(this.grid.totalStaticHeight,this.container.height)),this.fitAxis(),this.cellGroups.forEach(function(d){d&&d.apply(a)}),this.lastBoundsExtent=this.container.bounds().extent(),this.active=!1)}},{key:"submorphBoundsChanged",get:function(){for(var a=$jscomp.makeIterator(this.cellGroups),d=a.next();!d.done;d=a.next())if(d=d.value,d.morph&&!d.bounds().equals(d.morph.bounds()))return!0;return!1}},{key:"getCellGroupFor",
value:function(a){return a&&this.cellGroups.find(function(d){return d.morph==a})}},{key:"onSubmorphRemoved",value:function(a){var d=this.getCellGroupFor(a);d&&(d.morph=null);$b._get(Object.getPrototypeOf(n.prototype),"onSubmorphRemoved",this).call(this,a)}},{key:"inspect",value:function(a){}},{key:"ensureGrid",value:function(a){var d=this,k=a.grid,b=a.rowCount,e=a.columnCount;k=k||[[]];b=b||k.length;e=e||ae.arr.max(k.map(function(l){return l.length}));k.length<b&&(k=k.concat(ae.arr.withN(b-k.length,
[])));return k=k.map(function(l){l.length<e&&(l=l.concat(ae.arr.withN(e-l.length,null)));return l.map(function(p){return p&&p.isMorph?(p.owner!=d.container&&d.container.addMorph(p),p):p?d.container.getSubmorphNamed(p)||p:p})})}},{key:"autoAssign",value:function(a){var d=this;a.forEach(function(k){var b,e=Infinity;d.cellGroups.forEach(function(l){l.morph||l.cells.forEach(function(p){p=p.position.dist(k.position);p<e&&(b=l,e=p)})});b&&(b.morph=k)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayout"}}],
m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:49376,end:56477})}(ae.Layout));ae.GridLayout=Hu;ae.GridLayout=Hu;ae.GridLayout=Hu;var R9=Object.freeze({__proto__:null,CustomLayout:HE,SnapLayout:IE,VerticalLayout:Gu,HorizontalLayout:xq,ProportionalLayout:JE,CenteredTilingLayout:KE,TilingLayout:LE,
CellGroup:ME,LayoutColumn:NE,LayoutRow:OE,LayoutCell:PE,GridLayout:Hu});Ma("bQ",R9);lively.FreezerRuntime.recorderFor("lively.serializer2/object-extensions.js");Object.defineProperty(Symbol.prototype,"__serialize__",{configurable:!0,value:function(){var f=function(){return Object.getOwnPropertyNames(Symbol).filter(function(n){return"symbol"===typeof Symbol[n]}).reduce(function(n,a){return n.set(Symbol[a],"Symbol."+a)},new Map)}(),m=/^Symbol\((.*)\)$/;return function(){var n="function"===typeof this[Symbol.toPrimitive]?
this[Symbol.toPrimitive]():this,a=Symbol.keyFor(n);if(a)return{__expr__:'Symbol.for("'+a+'")'};if(f.get(n))return{__expr__:f.get(n)};n=String(n).match(m);return{__expr__:n?'Symbol("'+n[1]+'")':"Symbol()"}}}()});Object.defineProperty(System,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System"}}});Object.defineProperty(System.global,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System.global"}}});Object.defineProperty(Map.prototype,"__serialize__",{configurable:!0,
value:function(f,m,n){var a=f.add(this),d=a.currentRev,k=a.currentSnapshot,b=k.entries=[],e=0;m[a.id]=k;f.classHelper.addClassInfo(a,this,k);k=$jscomp.makeIterator(this);for(var l=k.next();!l.done;l=k.next()){var p=$jscomp.makeIterator(l.value);l=p.next().value;p=p.next().value;e++;l=a.snapshotProperty(a.id,l,n.concat("key",String(e)),m,f);p=a.snapshotProperty(a.id,p,n.concat("value",String(e)),m,f);b.push(l,p)}return a.asRefForSerializedObjMap(d)}});Object.defineProperty(Map.prototype,"__deserialize__",
{configurable:!0,value:function(f,m,n,a,d){f=f.entries;for(var k=0;k<f.length;k+=2){var b=f[k+1],e=m.recreateProperty("key."+k,f[k],n,a,d.concat("key",k));b=m.recreateProperty("value."+k,b,n,a,d.concat("value",k));this.set(e,b)}}});Object.defineProperty(Set.prototype,"__serialize__",{configurable:!0,value:function(f,m,n){var a=f.add(this),d=a.currentRev,k=a.currentSnapshot,b=k.entries=[],e=0;m[a.id]=k;f.classHelper.addClassInfo(a,this,k);k=$jscomp.makeIterator(this);for(var l=k.next();!l.done;l=k.next())l=
l.value,e++,l=a.snapshotProperty(a.id,l,n.concat("entry",String(e)),m,f),b.push(l);return a.asRefForSerializedObjMap(d)}});Object.defineProperty(Set.prototype,"__deserialize__",{configurable:!0,value:function(f,m,n,a,d){f=f.entries;for(var k=0;k<f.length;k++){var b=m.recreateProperty("entry."+k,f[k],n,a,d.concat("key",k));this.add(b)}}});var GV=lively.FreezerRuntime.recorderFor("lively.serializer2/util.js");GV.isPrimitive=cI;GV.isPrimitive=cI;GV.isPrimitive=cI;var Ai=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins.js");
Ai.obj=eg;Ai.properties=go;Ai.Plugin=function(){};var HV=function(){};HV.prototype.serializeObject=function(f,m,n,a,d){if("function"!==typeof f.__serialize__)return null;(f=f.__serialize__(n,a,d))&&f.hasOwnProperty("__expr__")&&(n=n.expressionSerializer.exprStringEncode(f),f=m?n:{__expr__:n});return f};HV.prototype.deserializeObject=function(f,m,n,a){return(m=n.__expr__)?f.expressionSerializer.deserializeExpr(m):null};Ai.CustomSerializePlugin=HV;var IV=function(){};IV.prototype.additionallySerialize=
function(f,m,n,a){f.classHelper.addClassInfo(m,m.realObj,n)};IV.prototype.deserializeObject=function(f,m,n,a){return f.classHelper.restoreIfClassInstance(m,n)};Ai.ClassPlugin=IV;var S9=function(){};S9.prototype.serializeObject=function(f,m,n,a,d){f&&f.isMorph&&(f.__isBeingSerialized__=!0);return null};Ai.SerializationIndicationPlugin=S9;var T9=function(){};T9.prototype.additionallySerialize=function(f,m,n,a){m.realObj&&m.realObj.isMorph&&(m.realObj.__isBeingSerialized__=!1)};Ai.SerializationFinishPlugin=
T9;var vM=function(){};vM.prototype.additionallySerialize=function(f,m,n,a){var d=m.realObj;d&&"function"===typeof d.__additionally_serialize__&&d.__additionally_serialize__(n,m,f,a)};vM.prototype.additionallyDeserializeBeforeProperties=function(f,m,n,a,d,k,b){"function"===typeof n.__deserialize__&&n.__deserialize__(d,m,k,f,b)};vM.prototype.additionallyDeserializeAfterProperties=function(f,m,n,a,d,k){"function"===typeof n.__after_deserialize__&&n.__after_deserialize__(a,m,f)};Ai.AdditionallySerializePlugin=
vM;var U9=function(){};U9.prototype.propertiesToSerialize=function(f,m,n,a){return(f=m.realObj)&&f.__only_serialize__||null};Ai.OnlySerializePropsPlugin=U9;var V9=function(){};V9.prototype.propertiesToSerialize=function(f,m,n,a){f=m.realObj;if(!f||!f.__dont_serialize__)return null;f=Ai.obj.mergePropertyInHierarchy(f,"__dont_serialize__");m=[];for(n=0;n<a.length;n++){var d=a[n];f.includes(d)||m.push(d)}return m};Ai.DontSerializePropsPlugin=V9;var JV=function(){};JV.prototype.propertiesToSerialize=
function(f,m,n,a){var d=m.realObj;m=d.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!m)return null;f=m.properties;n=m.propertySettings.valueStoreProperty||"_state";m=[];if(d[n]){if(d.__only_serialize__){for(var k=0;k<a.length;k++){d=a[k];var b=f[d];d!==n&&(b&&b&&(b.derived||b.readOnly||b.hasOwnProperty("serialize")&&!b.serialize)||m.push(d))}return m}n=a.indexOf(n);-1<n&&a.splice(n,1);for(k in f)n=f[k],d=a.indexOf(k),n.derived||n.readOnly||n.hasOwnProperty("serialize")&&!n.serialize?
-1<d&&a.splice(d,1):-1===d&&m.push(k);return m.concat(a)}};JV.prototype.additionallyDeserializeBeforeProperties=function(f,m,n,a,d,k,b){var e=n.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!e)return a;var l=e.order;e=e.propertySettings.valueStoreProperty||"_state";a=d.props;if(a[e])return a;a=Ai.obj.clone(a);n.hasOwnProperty(e)||n.initializeProperties();for(d=0;d<l.length;d++)e=l[d],a.hasOwnProperty(e)&&(m.recreatePropertyAndSetProperty(n,a,e,k,f,b),delete a[e]);return a};
Ai.LivelyClassPropertiesPlugin=JV;var KV=function(){};KV.prototype.additionallySerialize=function(f,m,n,a){var d=this,k=m.realObj;k&&(this._serializable(k)?Ai.properties.allOwnPropertiesOrFunctions(k,function(b,e){d._serializable(k[e])||console.warn("Attribute cannot be serialized: "+e+" of "+k+". Might be an anonymous function?")}):console.warn("Cannot serialize anonymous function "+k))};KV.prototype._serializable=function(f){return"function"!==typeof f||!!f.isWrapped||!!f.hasLivelyClosure};Ai.SerializableCheckPlugin=
KV;var LV={livelyClassPropertiesPlugin:new Ai.LivelyClassPropertiesPlugin,dontSerializePropsPlugin:new Ai.DontSerializePropsPlugin,onlySerializePropsPlugin:new Ai.OnlySerializePropsPlugin,additionallySerializePlugin:new Ai.AdditionallySerializePlugin,classPlugin:new Ai.ClassPlugin,customSerializePlugin:new Ai.CustomSerializePlugin,indicationPlugin:new Ai.SerializationIndicationPlugin,serializableCheckPlugin:new Ai.SerializableCheckPlugin,finishPlugin:new Ai.SerializationFinishPlugin};Ai.plugins=LV;
Ai.plugins=LV;Ai.plugins=LV;var Mr=[Ai.plugins.indicationPlugin,Ai.plugins.customSerializePlugin,Ai.plugins.classPlugin,Ai.plugins.additionallySerializePlugin,Ai.plugins.onlySerializePropsPlugin,Ai.plugins.dontSerializePropsPlugin,Ai.plugins.livelyClassPropertiesPlugin,Ai.plugins.serializableCheckPlugin,Ai.plugins.finishPlugin];Ai.allPlugins=Mr;Ai.allPlugins=Mr;Ai.allPlugins=Mr;var Jj=lively.FreezerRuntime.recorderFor("lively.serializer2/object-pool.js");Jj.__additionally_serialize__addObjectFunction=
function(f,m,n,a,d){d=void 0===d?[]:d;return function(k,b,e){e=void 0===e?!1:e;return m.props[k]=e?{value:b,verbatim:e}:{value:f.snapshotProperty(f.id,b,d.concat([k]),n,a)}}};Jj.arr=Gf;Jj.Path=Qh;Jj.obj=eg;Jj.string=Dh;Jj.isPrimitive=cI;Jj.ClassHelper=Lr;Jj.ExpressionSerializer=Bl;Jj.allPlugins=Mr;Jj.debugSerialization=!1;Jj.debugDeserialization=!1;var xj=function(f){this.options=Object.assign({checkForLeaks:!1,ignoreClassNotFound:!0,idPropertyName:"id"},f);this.reset()};xj.withDefaultPlugins=function(f){return new this(Object.assign({plugins:Jj.allPlugins},
f))};xj.resolveFromSnapshotAndId=function(f,m){return(new this(m)).resolveFromSnapshotAndId(f)};xj.fromSnapshot=function(f,m){return(new this(m)).readSnapshot(f)};xj.withObject=function(f,m){m=new this(m);m.add(f);return m};xj.prototype.reset=function(){this.uuidGen=Jj.string.newUUID;this._obj_ref_map=new Map;this._id_ref_map={};var f=this.options;this.classHelper=new Jj.ClassHelper(f);this.expressionSerializer=new Jj.ExpressionSerializer;f.idPropertyName&&(this.idPropertyName=f.idPropertyName);f.uuidGen&&
(this.uuidGen=f.uuidGen);f.reinitializeIds&&(this.reinitializeIds=f.reinitializeIds);f.hasOwnProperty("ignoreClassNotFound")&&(this.classHelper.options.ignoreClassNotFound=f.ignoreClassNotFound);var m=this.plugins={serializeObject:[],additionallySerialize:[],propertiesToSerialize:[],deserializeObject:[],additionallyDeserializeBeforeProperties:[],additionallyDeserializeAfterProperties:[],afterDeserialization:[],beforeDeserialization:[],afterSerialization:[],beforeSerialization:[]};f.plugins&&f.plugins.forEach(function(n){"function"===
typeof n.serializeObject&&m.serializeObject.push(n);"function"===typeof n.additionallySerialize&&m.additionallySerialize.push(n);"function"===typeof n.propertiesToSerialize&&m.propertiesToSerialize.push(n);"function"===typeof n.deserializeObject&&m.deserializeObject.push(n);"function"===typeof n.additionallyDeserializeBeforeProperties&&m.additionallyDeserializeBeforeProperties.push(n);"function"===typeof n.additionallyDeserializeAfterProperties&&m.additionallyDeserializeAfterProperties.push(n);"function"===
typeof n.beforeDeserialization&&m.beforeDeserialization.push(n);"function"===typeof n.afterDeserialization&&m.afterDeserialization.push(n);"function"===typeof n.beforeSerialization&&m.beforeSerialization.push(n);"function"===typeof n.afterSerialization&&m.afterSerialization.push(n)})};xj.prototype.knowsId=function(f){return!!this._id_ref_map[f]};xj.prototype.refForId=function(f){return this._id_ref_map[f]};xj.prototype.resolveToObj=function(f){return(f=this._id_ref_map[f])?f.realObj:void 0};xj.prototype.ref=
function(f){return this._obj_ref_map.get(f)};xj.prototype.objects=function(){return Array.from(this._obj_ref_map.keys())};xj.prototype.objectRefs=function(){return Array.from(this._obj_ref_map.values())};xj.prototype.internalAddRef=function(f){f.realObj&&this._obj_ref_map.set(f.realObj,f);return this._id_ref_map[f.id]=f};xj.prototype.add=function(f){var m=this;if(!Jj.isPrimitive(f)){if(Array.isArray(f))return f.map(function(a){return m.add(a)});var n=f.__serialization_id_property__||this.idPropertyName;
return this.ref(f)||this.internalAddRef(new Jj.ObjectRef(f[n]||this.uuidGen(),f,void 0,this.idPropertyName))}};xj.prototype.snapshot=function(f){var m={};this.plugin_beforeSerialization(m,f);for(var n=0,a=Object.keys(this._id_ref_map);n<a.length;n++)this._id_ref_map[a[n]].snapshotObject(m,this);return m=this.plugin_afterSerialization(m,f)};xj.prototype.snapshotObject=function(f){f=this.add(f).id;var m=this.snapshot(f);return{id:f,snapshot:m}};xj.prototype.readSnapshot=function(f,m){if(f.hasOwnProperty("id"))throw Error("readSnapshot expects simple serialized object map, not id-snapshot pair!");
if(this.options.skipMigrations)Jj.ObjectRef.fromSnapshot(m,f,this,[],this.idPropertyName);else{m=0;for(var n=Object.keys(f);m<n.length;m++)this.resolveToObj(n[m])||Jj.ObjectRef.fromSnapshot(n[m],f,this,[],this.idPropertyName)}return this};xj.prototype.resolveFromSnapshotAndId=function(f){if(!f.hasOwnProperty("id"))throw Error("idAndSnapshot does not have id");if(!f.hasOwnProperty("snapshot"))throw Error("idAndSnapshot does not have snapshot");var m=f=this.plugin_beforeDeserialization(f),n=m.id;this.readSnapshot(m.snapshot,
n);this.plugin_afterDeserialization(f);return this.resolveToObj(n)};xj.prototype.plugin_beforeSerialization=function(f,m){for(var n=0;n<this.plugins.beforeSerialization.length;n++)this.plugins.beforeSerialization[n].beforeSerialization(this,f,m)};xj.prototype.plugin_afterSerialization=function(f,m){for(var n=0;n<this.plugins.afterSerialization.length;n++){var a=this.plugins.afterSerialization[n].afterSerialization(this,f,m);a&&(f=a)}return f};xj.prototype.plugin_beforeDeserialization=function(f){for(var m=
0;m<this.plugins.beforeDeserialization.length;m++){var n=this.plugins.beforeDeserialization[m].beforeDeserialization(this,f);n&&(f=n)}return f};xj.prototype.plugin_afterDeserialization=function(f){for(var m=0;m<this.plugins.afterDeserialization.length;m++)this.plugins.afterDeserialization[m].afterDeserialization(this,f)};xj.prototype.plugin_serializeObject=function(f,m,n,a){for(var d=0;d<this.plugins.serializeObject.length;d++){var k=this.plugins.serializeObject[d].serializeObject(f,m,this,n,a);if(k)return k}};
xj.prototype.plugin_propertiesToSerialize=function(f,m,n){for(var a=0;a<this.plugins.propertiesToSerialize.length;a++){var d=this.plugins.propertiesToSerialize[a].propertiesToSerialize(this,f,m,n);d&&(n=d)}return n};xj.prototype.plugin_additionallySerialize=function(f,m,n,a){n=this.plugins.additionallySerialize.length?Jj.__additionally_serialize__addObjectFunction(f,m,n,this,a):null;for(a=0;a<this.plugins.additionallySerialize.length;a++)this.plugins.additionallySerialize[a].additionallySerialize(this,
f,m,n)};xj.prototype.plugin_deserializeObject=function(f,m,n){for(var a=0;a<this.plugins.deserializeObject.length;a++){var d=this.plugins.deserializeObject[a].deserializeObject(this,f,m,n);if(d)return d}};xj.prototype.plugin_additionallyDeserializeBeforeProperties=function(f,m,n,a,d,k){for(var b=0;b<this.plugins.additionallyDeserializeBeforeProperties.length;b++){var e=this.plugins.additionallyDeserializeBeforeProperties[b].additionallyDeserializeBeforeProperties(this,f,m,n,a,d,k);e&&(n=e)}return n};
xj.prototype.plugin_additionallyDeserializeAfterProperties=function(f,m,n,a,d){for(var k=0;k<this.plugins.additionallyDeserializeAfterProperties.length;k++)this.plugins.additionallyDeserializeAfterProperties[k].additionallyDeserializeAfterProperties(this,f,m,n,a,d)};Jj.ObjectPool=xj;var Ep=function(f,m,n,a){this.id=f;this.idPropertyName=void 0===a?"id":a;this.realObj=m;this.snapshotVersions=[];this.snapshots={};n&&(f=n.rev||0,this.snapshotVersions.push(f),this.snapshots[f]=n)};Ep.fromSnapshot=function(f,
m,n,a,d){a=void 0===a?[]:a;f=new this(f,void 0,void 0,d);try{return n.internalAddRef(f).recreateObjFromSnapshot(m,n,a)}catch(k){if(n.options.highlightBuggyMorphs)for(;a.length;){if((m=Jj.Path(a).map(function(b,e){return"submorphs"==b?e.filter(function(l){return!l.isHand&&!l.isEpiMorph}):e}).get(n.options.rootObject))&&m.isMorph&&m.world()){m.show(!0);n.options.highlightBuggyMorphs=!1;break}a.pop()}throw k;}};Ep.prototype.asRefForSerializedObjMap=function(f){return{__ref__:!0,id:this.id,rev:void 0===
f?"????":f}};Ep.prototype.snapshotObject=function(f,m,n){n=void 0===n?[]:n;Jj.debugSerialization&&console.log("[serialize] "+n.join("."));if(100<n.length)throw Error("Stopping serializer, encountered a possibly infinit loop: "+n.join("."));var a=this.id,d=this.realObj,k=this.snapshots;if(!d)return console.error("Cannot marshall object ref "+a+", no real object!"),Object.assign({},this.asRefForSerializedObjMap(),{isMissing:!0});var b=d._rev||0;var e=this.asRefForSerializedObjMap(b);Jj.arr.pushIfNotIncluded(this.snapshotVersions,
b);if(k[b])return f[a]||(f[a]=k[b]),e;var l=typeof a;"number"===l&&(a=String(a),l="string");if("string"!==l)throw Error("Error snapshoting "+d+": id is not a string but "+(a+" (serialization path: ")+(n.join(".")+")"));if(l=m.plugin_serializeObject(d,!1,f,n))return k[b]=f[a]=l,e;l=Object.getOwnPropertyNames(d);var p={};k=k[b]=f[a]={rev:b,props:p};(b=m.plugin_propertiesToSerialize(this,k,l))&&(l=b);for(b=0;b<l.length;b++){var u=l[b];p[u]={value:this.snapshotProperty(a,d[u],n.concat([u]),f,m)}}m.plugin_additionallySerialize(this,
k,f,n);return e};Ep.prototype.snapshotProperty=function(f,m,n,a,d){var k=this;if(Jj.isPrimitive(m))return m;var b=d.plugin_serializeObject(m,!0,a,n);if(b)return b;if("function"!==typeof m)return Array.isArray(m)?m.map(function(e,l){return k.snapshotProperty(f,e,n.concat(l),a,d)}):(m=d.add(m))&&m.isObjectRef?m.snapshotObject(a,d,n):m};Ep.prototype.recreateObjFromSnapshot=function(f,m,n){if(this.realObj)return this;Jj.debugDeserialization&&console.log("[deserialize] "+this.id+" (via "+n.join(".")+")");
var a=f[this.id];if(!a)return console.error("Cannot recreateObjFromSnapshot ObjectRef "+(this.id+" b/c of missing snapshot in snapshot map!")),this;var d=a.rev,k;d=d||0;this.snapshotVersions.push(d);this.snapshots[d]=a;(k=m.plugin_deserializeObject(this,a,n))||(k={});"undefined"===typeof k._rev&&"object"===typeof k&&(k._rev=d||0);this.realObj=k;m.internalAddRef(this);if(!k)return this;d=a.props;var b=m.plugin_additionallyDeserializeBeforeProperties(this,k,d,a,f,n);b&&(d=b);if(d)for(var e in d)this.recreatePropertyAndSetProperty(k,
d,e,f,m,n);e=k.__serialization_id_property__||this.idPropertyName;m.reinitializeIds&&k.hasOwnProperty(e)&&(k[e]=m.reinitializeIds(this.id,this));m.plugin_additionallyDeserializeAfterProperties(this,k,a,f,n);return this};Ep.prototype.recreatePropertyAndSetProperty=function(f,m,n,a,d,k){try{var b=m[n]||{value:"NON EXISTING"},e=b.value;f[n]=b.verbatim?e:this.recreateProperty(n,e,a,d,k.concat(n))}catch(p){try{var l=String(f)}catch(u){l="[some "+f.constructor.name+"]"}p.__seen?console.error("Error deserializing property "+
n+" of "+l):(f=n+" of "+l+" ("+JSON.stringify(e)+")",console.error("Error deserializing property "+f),p.__seen=!0)}};Ep.prototype.recreateProperty=function(f,m,n,a,d){var k=this;if("string"===typeof m&&a.expressionSerializer.isSerializedExpression(m))return a.expressionSerializer.deserializeExpr(m);if(Jj.isPrimitive(m))return m;if(Array.isArray(m))return m.map(function(b,e){return k.recreateProperty(e,b,n,a,d.concat(e))});f=m.__serialization_id_property__||this.idPropertyName;return(a.refForId(m[f])||
Jj.ObjectRef.fromSnapshot(m[f],n,a,d,this.idPropertyName)).realObj};$jscomp.global.Object.defineProperties(Ep.prototype,{isObjectRef:{configurable:!0,enumerable:!0,get:function(){return!0}},currentSnapshot:{configurable:!0,enumerable:!0,get:function(){if(this.snapshotVersions.length)var f=Jj.arr.last(this.snapshotVersions);else f=0,this.snapshotVersions.push(f);return this.snapshots[f]||(this.snapshots[f]={rev:f,props:{}})}},currentRev:{configurable:!0,enumerable:!0,get:function(){return this.snapshotVersions.length?
Jj.arr.last(this.snapshotVersions):0}}});Jj.ObjectRef=Ep;var Ff=lively.FreezerRuntime.recorderFor("lively.serializer2/snapshot-navigation.js");Ff.referenceGraph=NQ;Ff.isReference=dI;Ff.referencesOfRef=OQ;Ff.referencesOfId=eI;Ff.referencesInArray=A_;Ff.moduleOfId=fI;Ff.referencesAndClassNamesOfId=PQ;Ff.classNameOfId=gI;Ff.findPathFromToId=QQ;Ff.lookupPath=RQ;Ff.modifyProperty=SQ;Ff.removeUnreachableObjects=us;Ff.clearDanglingConnections=hI;Ff.requiredModulesOfSnapshot=vs;Ff.ClassHelper=Lr;Ff.Path=
Qh;Ff.obj=eg;Ff.arr=Gf;Ff.graph=Ts;Ff.ExpressionSerializer=Bl;Ff.referenceGraph=NQ;Ff.referenceGraph=NQ;Ff.isReference=dI;Ff.isReference=dI;Ff.referencesOfRef=OQ;Ff.referencesOfRef=OQ;Ff.referencesOfId=eI;Ff.referencesOfId=eI;Ff.moduleOfId=fI;Ff.moduleOfId=fI;Ff.referencesAndClassNamesOfId=PQ;Ff.referencesAndClassNamesOfId=PQ;Ff.classNameOfId=gI;Ff.classNameOfId=gI;Ff.findPathFromToId=QQ;Ff.findPathFromToId=QQ;Ff.lookupPath=RQ;Ff.lookupPath=RQ;Ff.modifyProperty=SQ;Ff.modifyProperty=SQ;Ff.removeUnreachableObjects=
us;Ff.removeUnreachableObjects=us;Ff.clearDanglingConnections=hI;Ff.clearDanglingConnections=hI;Ff.defaultExprSerializer=new Ff.ExpressionSerializer;Ff.requiredModulesOfSnapshot=vs;Ff.requiredModulesOfSnapshot=vs;var W9,xz="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,nl=W9={};try{var Qt="function"==typeof setTimeout?setTimeout:TQ}catch(f){Qt=TQ}try{var Rt="function"==typeof clearTimeout?clearTimeout:UQ}catch(f){Rt=UQ}!0;var qw,ws=[],yz=!1,iI=-1;nl.nextTick=function(f){var m=
Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)m[n-1]=arguments[n];ws.push(new D_(f,m));1!==ws.length||yz||B_(C_)};D_.prototype.run=function(){(this||xz).fun.apply(null,(this||xz).array)};nl.title="browser";nl.browser=!0;nl.env={};nl.argv=[];nl.version="";nl.versions={};nl.on=xs;nl.addListener=xs;nl.once=xs;nl.off=xs;nl.removeListener=xs;nl.removeAllListeners=xs;nl.emit=xs;nl.prependListener=xs;nl.prependOnceListener=xs;nl.listeners=function(f){return[]};nl.binding=
function(f){throw Error("process.binding is not supported");};nl.cwd=function(){return"/"};nl.chdir=function(f){throw Error("process.chdir is not supported");};nl.umask=function(){return 0};var Li=Ma("aX",W9),F_={},E_=!1,H_={},G_=!1,dr={},I_=!1,K_={},J_=!1,M_={},L_=!1,O_={},N_=!1,Q_={},P_=!1,S_={},R_=!1,U_={},T_=!1,W_={},V_=!1,Y_={},X_=!1,$_={},Z_=!1,b0={},a0=!1,d0={},c0=!1,f0={},e0=!1,h0={},g0=!1,j0={},i0=!1,l0={},k0=!1,n0={},m0=!1,q0={},p0=!1,s0={},r0=!1,v0={},u0=!1,x0={},w0=!1,qqa={},rqa=qqa=function(f){f.prototype[Symbol.iterator]=
function n(){var a=this,d;return $jscomp.generator.createGenerator(n,function(k){1==k.nextAddress&&(d=a.head);if(3!=k.nextAddress)return d?k.yield(d.value,3):k.jumpTo(0);d=d.next;return k.jumpTo(2)})}},X9={};X9=zj;zj.Node=rw;zj.create=zj;zj.prototype.removeNode=function(f){if(f.list!==this)throw Error("removing node which does not belong to this list");var m=f.next,n=f.prev;m&&(m.prev=n);n&&(n.next=m);f===this.head&&(this.head=m);f===this.tail&&(this.tail=n);f.list.length--;f.next=null;f.prev=null;
f.list=null;return m};zj.prototype.unshiftNode=function(f){if(f!==this.head){f.list&&f.list.removeNode(f);var m=this.head;f.list=this;if(f.next=m)m.prev=f;this.head=f;this.tail||(this.tail=f);this.length++}};zj.prototype.pushNode=function(f){if(f!==this.tail){f.list&&f.list.removeNode(f);var m=this.tail;f.list=this;if(f.prev=m)m.next=f;this.tail=f;this.head||(this.head=f);this.length++}};zj.prototype.push=function(){for(var f=0,m=arguments.length;f<m;f++)this.tail=new rw(arguments[f],this.tail,null,
this),this.head||(this.head=this.tail),this.length++;return this.length};zj.prototype.unshift=function(){for(var f=0,m=arguments.length;f<m;f++)this.head=new rw(arguments[f],null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length};zj.prototype.pop=function(){if(this.tail){var f=this.tail.value;(this.tail=this.tail.prev)?this.tail.next=null:this.head=null;this.length--;return f}};zj.prototype.shift=function(){if(this.head){var f=this.head.value;(this.head=this.head.next)?
this.head.prev=null:this.tail=null;this.length--;return f}};zj.prototype.forEach=function(f,m){m=m||this;for(var n=this.head,a=0;null!==n;a++)f.call(m,n.value,a,this),n=n.next};zj.prototype.forEachReverse=function(f,m){m=m||this;for(var n=this.tail,a=this.length-1;null!==n;a--)f.call(m,n.value,a,this),n=n.prev};zj.prototype.get=function(f){for(var m=0,n=this.head;null!==n&&m<f;m++)n=n.next;if(m===f&&null!==n)return n.value};zj.prototype.getReverse=function(f){for(var m=0,n=this.tail;null!==n&&m<f;m++)n=
n.prev;if(m===f&&null!==n)return n.value};zj.prototype.map=function(f,m){m=m||this;for(var n=new zj,a=this.head;null!==a;)n.push(f.call(m,a.value,this)),a=a.next;return n};zj.prototype.mapReverse=function(f,m){m=m||this;for(var n=new zj,a=this.tail;null!==a;)n.push(f.call(m,a.value,this)),a=a.prev;return n};zj.prototype.reduce=function(f,m){var n=this.head;if(1<arguments.length)var a=m;else if(this.head)n=this.head.next,a=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");
for(var d=0;null!==n;d++)a=f(a,n.value,d),n=n.next;return a};zj.prototype.reduceReverse=function(f,m){var n=this.tail;if(1<arguments.length)var a=m;else if(this.tail)n=this.tail.prev,a=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=this.length-1;null!==n;d--)a=f(a,n.value,d),n=n.prev;return a};zj.prototype.toArray=function(){for(var f=Array(this.length),m=0,n=this.head;null!==n;m++)f[m]=n.value,n=n.next;return f};zj.prototype.toArrayReverse=function(){for(var f=
Array(this.length),m=0,n=this.tail;null!==n;m++)f[m]=n.value,n=n.prev;return f};zj.prototype.slice=function(f,m){m=m||this.length;0>m&&(m+=this.length);f=f||0;0>f&&(f+=this.length);var n=new zj;if(m<f||0>m)return n;0>f&&(f=0);m>this.length&&(m=this.length);for(var a=0,d=this.head;null!==d&&a<f;a++)d=d.next;for(;null!==d&&a<m;a++,d=d.next)n.push(d.value);return n};zj.prototype.sliceReverse=function(f,m){m=m||this.length;0>m&&(m+=this.length);f=f||0;0>f&&(f+=this.length);var n=new zj;if(m<f||0>m)return n;
0>f&&(f=0);m>this.length&&(m=this.length);for(var a=this.length,d=this.tail;null!==d&&a>m;a--)d=d.prev;for(;null!==d&&a>f;a--,d=d.prev)n.push(d.value);return n};zj.prototype.splice=function(f,m,n){for(var a=[],d=2;d<arguments.length;++d)a[d-2]=arguments[d];f>this.length&&(f=this.length-1);0>f&&(f=this.length+f);d=0;for(var k=this.head;null!==k&&d<f;d++)k=k.next;var b=[];for(d=0;k&&d<m;d++)b.push(k.value),k=this.removeNode(k);null===k&&(k=this.tail);k!==this.head&&k!==this.tail&&(k=k.prev);for(d=0;d<
a.length;d++){var e=a[d];k=k===this.head?new rw(e,null,k,this):new rw(e,k,k.next,this);null===k.next&&(this.tail=k);null===k.prev&&(this.head=k);this.length++}return b};zj.prototype.reverse=function(){for(var f=this.head,m=this.tail,n=f;null!==n;n=n.prev){var a=n.prev;n.prev=n.next;n.next=a}this.head=m;this.tail=f;return this};try{rqa(zj)}catch(f){}var sqa={},tqa=X9,vx=Symbol("max"),Lo=Symbol("length"),RA=Symbol("lengthCalculator"),QE=Symbol("allowStale"),wx=Symbol("maxAge"),$s=Symbol("dispose"),
Y9=Symbol("noDisposeOnSet"),wm=Symbol("lruList"),yq=Symbol("cache"),Z9=Symbol("updateAgeOnGet"),MV=function(){return 1},Qm=function(f){"number"===typeof f&&(f={max:f});f||(f={});if(f.max&&("number"!==typeof f.max||0>f.max))throw new TypeError("max must be a non-negative number");this[vx]=f.max||Infinity;var m=f.length||MV;this[RA]="function"!==typeof m?MV:m;this[QE]=f.stale||!1;if(f.maxAge&&"number"!==typeof f.maxAge)throw new TypeError("maxAge must be a number");this[wx]=f.maxAge||0;this[$s]=f.dispose;
this[Y9]=f.noDisposeOnSet||!1;this[Z9]=f.updateAgeOnGet||!1;this.reset()};Qm.prototype.rforEach=function(f,m){m=m||this;for(var n=this[wm].tail;null!==n;){var a=n.prev;$9(this,f,n,m);n=a}};Qm.prototype.forEach=function(f,m){m=m||this;for(var n=this[wm].head;null!==n;){var a=n.next;$9(this,f,n,m);n=a}};Qm.prototype.keys=function(){return this[wm].toArray().map(function(f){return f.key})};Qm.prototype.values=function(){return this[wm].toArray().map(function(f){return f.value})};Qm.prototype.reset=function(){var f=
this;this[$s]&&this[wm]&&this[wm].length&&this[wm].forEach(function(m){return f[$s](m.key,m.value)});this[yq]=new Map;this[wm]=new tqa;this[Lo]=0};Qm.prototype.dump=function(){var f=this;return this[wm].map(function(m){return wM(f,m)?!1:{k:m.key,v:m.value,e:m.now+(m.maxAge||0)}}).toArray().filter(function(m){return m})};Qm.prototype.dumpLru=function(){return this[wm]};Qm.prototype.set=function(f,m,n){if((n=n||this[wx])&&"number"!==typeof n)throw new TypeError("maxAge must be a number");var a=n?Date.now():
0,d=this[RA](m,f);if(this[yq].has(f)){if(d>this[vx])return SA(this,this[yq].get(f)),!1;var k=this[yq].get(f).value;if(this[$s]&&!this[Y9])this[$s](f,k.value);k.now=a;k.maxAge=n;k.value=m;this[Lo]+=d-k.length;k.length=d;this.get(f);RE(this);return!0}n=new uqa(f,m,d,a,n);if(n.length>this[vx]){if(this[$s])this[$s](f,m);return!1}this[Lo]+=n.length;this[wm].unshift(n);this[yq].set(f,this[wm].head);RE(this);return!0};Qm.prototype.has=function(f){if(!this[yq].has(f))return!1;f=this[yq].get(f).value;return!wM(this,
f)};Qm.prototype.get=function(f){return NV(this,f,!0)};Qm.prototype.peek=function(f){return NV(this,f,!1)};Qm.prototype.pop=function(){var f=this[wm].tail;if(!f)return null;SA(this,f);return f.value};Qm.prototype.del=function(f){SA(this,this[yq].get(f))};Qm.prototype.load=function(f){this.reset();for(var m=Date.now(),n=f.length-1;0<=n;n--){var a=f[n],d=a.e||0;0===d?this.set(a.k,a.v):(d-=m,0<d&&this.set(a.k,a.v,d))}};Qm.prototype.prune=function(){var f=this;this[yq].forEach(function(m,n){return NV(f,
n,!1)})};$jscomp.global.Object.defineProperties(Qm.prototype,{max:{configurable:!0,enumerable:!0,set:function(f){if("number"!==typeof f||0>f)throw new TypeError("max must be a non-negative number");this[vx]=f||Infinity;RE(this)},get:function(){return this[vx]}},allowStale:{configurable:!0,enumerable:!0,set:function(f){this[QE]=!!f},get:function(){return this[QE]}},maxAge:{configurable:!0,enumerable:!0,set:function(f){if("number"!==typeof f)throw new TypeError("maxAge must be a non-negative number");
this[wx]=f;RE(this)},get:function(){return this[wx]}},lengthCalculator:{configurable:!0,enumerable:!0,set:function(f){var m=this;"function"!==typeof f&&(f=MV);f!==this[RA]&&(this[RA]=f,this[Lo]=0,this[wm].forEach(function(n){n.length=m[RA](n.value,n.key);m[Lo]+=n.length}));RE(this)},get:function(){return this[RA]}},length:{configurable:!0,enumerable:!0,get:function(){return this[Lo]}},itemCount:{configurable:!0,enumerable:!0,get:function(){return this[wm].length}}});var NV=function(f,m,n){if(m=f[yq].get(m)){var a=
m.value;if(wM(f,a)){if(SA(f,m),!f[QE])return}else n&&(f[Z9]&&(m.value.now=Date.now()),f[wm].unshiftNode(m));return a.value}},wM=function(f,m){if(!m||!m.maxAge&&!f[wx])return!1;var n=Date.now()-m.now;return m.maxAge?n>m.maxAge:f[wx]&&n>f[wx]},RE=function(f){if(f[Lo]>f[vx])for(var m=f[wm].tail;f[Lo]>f[vx]&&null!==m;){var n=m.prev;SA(f,m);m=n}},SA=function(f,m){if(m){var n=m.value;if(f[$s])f[$s](n.key,n.value);f[Lo]-=n.length;f[yq].delete(n.key);f[wm].removeNode(m)}},uqa=function(f,m,n,a,d){this.key=
f;this.value=m;this.length=n;this.now=a;this.maxAge=d||0},$9=function(f,m,n,a){var d=n.value;wM(f,d)&&(SA(f,n),f[QE]||(d=void 0));d&&m.call(a,d.value,d.key,f)},a$=sqa=Qm,b$=Object.freeze({__proto__:null,"default":a$}),pga="default"in b$?a$:b$,aR={},y0=!1,bR={},z0=!1,B0={},A0=!1,D0={},C0=!1,F0={},E0=!1,H0={},G0=!1,J0={},I0=!1,L0={},K0=!1,N0={},M0=!1,P0={},O0=!1,R0={},Q0=!1,T0={},S0=!1,V0={},U0=!1,X0={},W0=!1,Z0={},Y0=!1,a1={},$0=!1,c1={},b1=!1,e1={},d1=!1,g1={},f1=!1,i1={},h1=!1,c$={},d$=!1,SE=function(){if(d$)return c$;
d$=!0;var f=zz();return c$={re:f.re,src:f.src,tokens:f.t,SEMVER_SPEC_VERSION:jI().SEMVER_SPEC_VERSION,SemVer:vn(),compareIdentifiers:VQ().compareIdentifiers,rcompareIdentifiers:VQ().rcompareIdentifiers,parse:Az(),valid:iga(),clean:tga(),inc:jga(),diff:uga(),major:kga(),minor:vga(),patch:wga(),prerelease:lga(),compare:Xp(),rcompare:mga(),compareLoose:xga(),compareBuild:XQ(),sort:yga(),rsort:nga(),gt:mI(),lt:YQ(),eq:WQ(),neq:o0(),gte:ZQ(),lte:$Q(),cmp:t0(),coerce:oga(),Comparator:nI(),Range:Yp(),satisfies:oI(),
toComparators:zga(),maxSatisfying:qga(),minSatisfying:Aga(),minVersion:Bga(),validRange:rga(),outside:cR(),gtr:Cga(),ltr:Dga(),intersects:sga(),simplifyRange:Ega(),subset:Fga()}}(),Nf=lively.FreezerRuntime.recorderFor("lively.serializer2/index.js");Nf.normalizeOptions=MC;Nf.normalizeMigrations=function(f){f=void 0===f?[]:f;return{before:f.filter(function(m){return"function"===typeof m.snapshotConverter}),after:f.filter(function(m){return"function"===typeof m.objectConverter})}};Nf.runMigrations=function(f,
m,n,a){for(var d=0;d<f.length;d++){var k=f[d];try{n=k[m](n,a)}catch(b){console.error("migration "+k.name+" failed:"),console.error(b)}}return n};Nf.serialize=Bz;Nf.deserialize=NC;Nf.deserializeWithMigrations=OC;Nf.copy=PC;Nf.ObjectPool=xj;Nf.serializerVersion="0.1.3";Nf.requiredModulesOfSnapshot=vs;Nf.removeUnreachableObjects=us;Nf.clearDanglingConnections=hI;Nf.allPlugins=Mr;Nf.semver=SE;Nf.normalizeOptions=MC;Nf.normalizeOptions=MC;Nf.majorAndMinorVersionRe=/\.[^\.]+$/;Nf.ObjectRef=Ep;Nf.ObjectRef=
Ep;Nf.ObjectPool=xj;Nf.ObjectPool=xj;Nf.requiredModulesOfSnapshot=vs;Nf.requiredModulesOfSnapshot=vs;Nf.removeUnreachableObjects=us;Nf.removeUnreachableObjects=us;Nf.serialize=Bz;Nf.serialize=Bz;Nf.deserialize=NC;Nf.deserialize=NC;Nf.deserializeWithMigrations=OC;Nf.deserializeWithMigrations=OC;Nf.copy=PC;Nf.copy=PC;Nf.ExpressionSerializer=Bl;Nf.serializeSpec=vo;Nf.deserializeSpec=Wp;Nf.getSerializableClassMeta=Ot;Nf.locateClass=br;Nf.getClassName=Vp;Nf.ExpressionSerializer=Bl;Nf.ExpressionSerializer=
Bl;Nf.getSerializableClassMeta=Ot;Nf.getSerializableClassMeta=Ot;Nf.locateClass=br;Nf.locateClass=br;Nf.serializeSpec=vo;Nf.serializeSpec=vo;Nf.deserializeSpec=Wp;Nf.deserializeSpec=Wp;Nf.getClassName=Vp;Nf.getClassName=Vp;Nf.allPlugins=Mr;Nf.allPlugins=Mr;var vqa=Object.freeze({__proto__:null,normalizeOptions:MC,ObjectRef:Ep,ObjectPool:xj,requiredModulesOfSnapshot:vs,removeUnreachableObjects:us,serialize:Bz,deserialize:NC,deserializeWithMigrations:OC,copy:PC,ExpressionSerializer:Bl,getSerializableClassMeta:Ot,
locateClass:br,serializeSpec:vo,deserializeSpec:Wp,getClassName:Vp,allPlugins:Mr}),hi=lively.FreezerRuntime.recorderFor("lively.morphic/helpers.js");hi.sanitizeFont=QC;hi.pathForBrowserHistory=Cz;hi.addClassMappings=RC;hi.morph=Dk;hi.newMorphId=SC;hi.lazyInspect=function(f){var m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(System.import("lively.ide/js/inspector.js"),2);m=a.yieldResult;n=m.inspect;hi.inspect=n;return a.return(n(f))})};hi.locateClass=
br;hi.string=Dh;hi.parseQuery=Kb;hi.stringifyQuery=id;hi.touchInput=hi.touchInput||void 0;try{document.createEvent("TouchEvent"),hi.touchInput=!0}catch(f){hi.touchInput=!1}var En=Ma("t",hi.touchInput);hi.touchInputDevice=En;hi.touchInputDevice=En;hi.touchInputDevice=En;hi.nameToClassMapping=hi.nameToClassMapping||{};hi.sanitizeFont=QC;hi.sanitizeFont=QC;hi.pathForBrowserHistory=Cz;hi.pathForBrowserHistory=Cz;hi.addClassMappings=RC;hi.addClassMappings=RC;hi.morph=Dk;hi.morph=Dk;hi.newMorphId=SC;hi.newMorphId=
SC;var xx=Ma("a5",hi.lazyInspect);hi.inspect=xx;hi.inspect=xx;hi.inspect=xx;var wqa={},Hga=Object.prototype.toString,OV=wqa=Array.isArray||Gga,xqa={},TE=xqa="2",dR="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,e$={};dp.NONE=0;dp.VTEXT=1;dp.VNODE=2;dp.WIDGET=3;dp.PROPS=4;dp.ORDER=5;dp.INSERT=6;dp.REMOVE=7;dp.THUNK=8;e$=dp;dp.prototype.version=TE;dp.prototype.type="VirtualPatch";var at=e$,yqa={},UE=yqa=function(f){return f&&"VirtualNode"===f.type&&f.version===TE},
zqa={},xM=zqa=function(f){return f&&"VirtualText"===f.type&&f.version===TE},Aqa={},Iu=Aqa=function(f){return f&&"Widget"===f.type},Bqa={},VE=Bqa=function(f){return f&&"Thunk"===f.type},Cqa={},Iga=UE,Jga=xM,Kga=Iu,f$=Cqa=function(f,m){var n=f,a=m;VE(m)&&(a=j1(m,f));VE(f)&&(n=j1(f,null));return{a:n,b:a}},Dqa={},yM=Dqa=function(f){return"object"===typeof f&&null!==f},Eqa={},WE=Eqa=function(f){return f&&("function"===typeof f.hook&&!f.hasOwnProperty("hook")||"function"===typeof f.unhook&&!f.hasOwnProperty("unhook"))},
g$={},l1=yM,Lga=WE;g$=k1;var h$={},Oga=OV,Lk=at,sw=UE,q1=xM,qI=Iu,pI=VE,Nga=f$,Mga=g$;h$=n1;var Fqa={},Gqa=Fqa=h$,Hqa=Object.freeze({}),i$="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Iqa={},j$="undefined"!==typeof i$?i$:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var PV=document;else(PV=j$["__GLOBAL_DOCUMENT_CACHE@4"])||(PV=j$["__GLOBAL_DOCUMENT_CACHE@4"]=Hqa);var k$=Iqa=PV,Jqa={},s1=WE,l$=Jqa=function(f,m,n){for(var a in m){var d=m[a];
if(void 0===d)r1(f,a,d,n);else if(s1(d))r1(f,a,d,n),d.hook&&d.hook(f,a,n?n[a]:void 0);else if(yM(d)){var k=void 0,b=void 0,e=f,l=a,p=n?n[l]:void 0;if("attributes"===l)for(b in d)k=d[b],void 0===k?e.removeAttribute(b):e.setAttribute(b,k);else if(p&&yM(p)&&t1(p)!==t1(d))e[l]=d;else for(k in yM(e[l])||(e[l]={}),b="style"===l?"":void 0,d)p=d[k],e[l][k]=void 0===p?b:p}else f[a]=d}},Kqa={},v1=k$,Tga=l$,Sga=UE,Rga=xM,Qga=Iu,Pga=f$,m$=Kqa=u1,Lqa={},Mqa=Lqa=function(f,m){return Iu(f)&&Iu(m)?"name"in f&&"name"in
m?f.id===m.id:f.init===m.init:!1},Nqa={},Uga={},Oqa=Nqa=function(f,m,n,a){return n&&0!==n.length?(n.sort(Vga),w1(f,m,n,a,0)):{}},n$={},Wga=Iu;n$=function(f,m,n){var a=f.vNode,d=f.patch;switch(f.type){case at.REMOVE:return(d=m.parentNode)&&d.removeChild(m),y1(m,a),null;case at.INSERT:return d=n.render(d,n),m&&m.appendChild(d),m;case at.VTEXT:return 3===m.nodeType?(m.replaceData(0,m.length,d.text),d=m):(a=m.parentNode,d=n.render(d,n),a&&d!==m&&a.replaceChild(d,m)),d;case at.WIDGET:return d=(f=Mqa(a,
d))?d.update(a,m)||m:n.render(d,n),(n=m.parentNode)&&d!==m&&n.replaceChild(d,m),f||y1(m,a),d;case at.VNODE:return a=m.parentNode,d=n.render(d,n),a&&d!==m&&a.replaceChild(d,m),d;case at.ORDER:a=m.childNodes;n={};for(var k,b=0;b<d.removes.length;b++)k=d.removes[b],f=a[k.from],k.key&&(n[k.key]=f),m.removeChild(f);b=a.length;for(var e=0;e<d.inserts.length;e++)k=d.inserts[e],f=n[k.key],m.insertBefore(f,k.to>=b++?null:a[k.to]);return m;case at.PROPS:return l$(m,d,a.properties),m;case at.THUNK:return d=
n.patch(m,d,n),m&&d&&m!==d&&m.parentNode&&m.parentNode.replaceChild(d,m),d;default:return m}};var o$={},$ga=k$,aha=OV,Yga=m$,Zga=Oqa,A1=n$;o$=z1;var Pqa={},Qqa=Pqa=o$,er="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,p$={},eha=UE,fha=Iu,gha=VE,dha=WE;p$=hR;var bha={},cha=[];hR.prototype.version=TE;hR.prototype.type="VirtualNode";var QV=p$,hha="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,q$={};q$=iR;iR.prototype.version=TE;iR.prototype.type=
"VirtualText";var RV=q$,r$={};r$=function(f){var m=String.prototype.split,n=/()??/.exec("")[1]===f;return function(a,d,k){if("[object RegExp]"!==Object.prototype.toString.call(d))return m.call(a,d,k);var b=[],e=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.extended?"x":"")+(d.sticky?"y":""),l=0;d=new RegExp(d.source,e+"g");var p,u;a+="";n||(p=new RegExp("^"+d.source+"$(?!\\s)",e));for(k=k===f?4294967295:k>>>0;u=d.exec(a);){e=u.index+u[0].length;if(e>l){b.push(a.slice(l,u.index));!n&&1<u.length&&u[0].replace(p,
function(){for(var z=1;z<arguments.length-2;z++)arguments[z]===f&&(u[z]=f)});1<u.length&&u.index<a.length&&Array.prototype.push.apply(b,u.slice(1));var x=u[0].length;l=e;if(b.length>=k)break}d.lastIndex===u.index&&d.lastIndex++}l===a.length?(x||!d.test(""))&&b.push(""):b.push(a.slice(l));return b.length>k?b.slice(0,k):b}}();var Rqa={},Sqa=r$,Tqa=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,Uqa=/^\.|#/,Vqa=Rqa=function(f,m){if(!f)return"DIV";var n=!m.hasOwnProperty("id");f=Sqa(f,Tqa);var a=null;Uqa.test(f[1])&&
(a="DIV");var d,k;for(k=0;k<f.length;k++)if(d=f[k]){var b=d.charAt(0);if(a)if("."===b){var e=e||[];e.push(d.substring(1,d.length))}else"#"===b&&n&&(m.id=d.substring(1,d.length));else a=d}e&&(m.className&&e.push(m.className),m.className=e.join(" "));return m.namespace?a:a.toUpperCase()},s$={};s$=sI;sI.prototype.hook=function(f,m){f[m]!==this.value&&(f[m]=this.value)};var Wqa=s$,t$="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,u$={},SV="undefined"!==typeof window?
window:"undefined"!==typeof t$?t$:{};u$=function(f,m){return f in SV?SV[f]:SV[f]=m};var v$={},w$=u$;v$=function(f,m,n){var a="__INDIVIDUAL_ONE_VERSION_"+f,d=w$(a+"_ENFORCE_SINGLETON",m);if(d!==m)throw Error("Can only have one copy of "+f+".\nYou already have version "+d+" installed.\nThis means you cannot install version "+m);return w$(a,n)};var x$={};v$("ev-store","7");x$=function(f){var m=f["__EV_STORE_KEY@7"];m||(m=f["__EV_STORE_KEY@7"]={});return m};var y$={},z$=x$;y$=TC;TC.prototype.hook=function(f,
m){f=z$(f);m=m.substr(3);f[m]=this.value};TC.prototype.unhook=function(f,m){f=z$(f);m=m.substr(3);f[m]=void 0};var A$={},E1=OV,C1=RV,iha=UE,jha=xM,kha=Iu,lha=VE,Xqa=y$;A$=function(f,m,n){var a=[],d;if(d=!n)d="string"===typeof m||E1(m)||D1(m);if(d){n=m;var k={}}k=k||m||{};f=Vqa(f,k);if(k.hasOwnProperty("key")){var b=k.key;k.key=void 0}if(k.hasOwnProperty("namespace")){var e=k.namespace;k.namespace=void 0}"INPUT"!==f||e||!k.hasOwnProperty("value")||void 0===k.value||WE(k.value)||(k.value=Wqa(k.value));
m=k;for(var l in m)m.hasOwnProperty(l)&&(d=m[l],WE(d)||"ev-"===l.substr(0,3)&&(m[l]=Xqa(d)));void 0!==n&&null!==n&&B1(n,a,f,k);return new QV(f,k,a,b,e)};var Yqa={},Zqa=Yqa=A$,B$={};B$=m$;var $qa={},XE=$qa={diff:Gqa,patch:Qqa,h:Zqa,create:B$,VNode:QV,VText:RV},ara={},bra=ara={abbr:"abbr",accept:"accept","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",alt:"alt",async:"async",autocomplete:"autoComplete",autofocus:"autoFocus",
autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charset",checked:"checked",cite:"cite","class":"className",cols:"cols",colspan:"colSpan",command:"command",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",coords:"coords",crossorigin:"crossOrigin",data:"data",datetime:"dateTime","default":"default",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",dropzone:"dropzone",
enctype:"encType","for":"htmlFor",form:"form",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameBorder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang","http-equiv":"httpEquiv",icon:"icon",id:"id",inputmode:"inputMode",ismap:"isMap",itemid:"itemId",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",kind:"kind",label:"label",lang:"lang",
list:"list",loop:"loop",manifest:"manifest",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",ping:"ping",placeholder:"placeholder",poster:"poster",preload:"preload",radiogroup:"radioGroup",readonly:"readOnly",rel:"rel",required:"required",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",
scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",sortable:"sortable",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srcset:"srcSet",start:"start",step:"step",style:"style",tabindex:"tabIndex",target:"target",title:"title",translate:"translate",type:"type",typemustmatch:"typeMustMatch",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap"},C$={};C$={about:null,"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,
alphabetic:null,amplitude:null,"arabic-form":null,ascent:null,attributeName:null,attributeType:null,azimuth:null,bandwidth:null,baseFrequency:null,baseProfile:null,"baseline-shift":null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,"class":null,clip:null,"clip-path":null,"clip-rule":null,clipPathUnits:null,color:null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,"color-rendering":null,content:null,contentScriptType:null,contentStyleType:null,
cursor:null,cx:null,cy:null,d:null,datatype:null,defaultAction:null,descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,editable:null,elevation:null,"enable-background":null,end:null,"ev:event":"http://www.w3.org/2001/xml-events",event:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,
focusHighlight:null,focusable:null,"font-family":null,"font-size":null,"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:null,height:null,"horiz-adv-x":null,"horiz-origin-x":null,"horiz-origin-y":null,id:null,ideographic:null,"image-rendering":null,
"in":null,in2:null,initialVisibility:null,intercept:null,k:null,k1:null,k2:null,k3:null,k4:null,kernelMatrix:null,kernelUnitLength:null,kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lang:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,"marker-mid":null,"marker-start":null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,
mediaContentEncodings:null,mediaSize:null,mediaTime:null,method:null,min:null,mode:null,name:null,"nav-down":null,"nav-down-left":null,"nav-down-right":null,"nav-left":null,"nav-next":null,"nav-prev":null,"nav-right":null,"nav-up":null,"nav-up-left":null,"nav-up-right":null,numOctaves:null,observer:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,"overline-position":null,"overline-thickness":null,"panose-1":null,path:null,pathLength:null,
patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,playbackOrder:null,"pointer-events":null,points:null,pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:null,r:null,radius:null,refX:null,refY:null,rel:null,"rendering-intent":null,repeatCount:null,repeatDur:null,requiredExtensions:null,requiredFeatures:null,requiredFonts:null,requiredFormats:null,resource:null,restart:null,result:null,rev:null,
role:null,rotate:null,rx:null,ry:null,scale:null,seed:null,"shape-rendering":null,slope:null,snapshotTime:null,spacing:null,specularConstant:null,specularExponent:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,
"stroke-opacity":null,"stroke-width":null,surfaceScale:null,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:null,tableValues:null,target:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,"text-rendering":null,textLength:null,timelineBegin:null,title:null,to:null,transform:null,transformBehavior:null,type:null,"typeof":null,u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,
"unicode-bidi":null,"unicode-range":null,"units-per-em":null,"v-alphabetic":null,"v-hanging":null,"v-ideographic":null,"v-mathematical":null,values:null,version:null,"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,"word-spacing":null,"writing-mode":null,x:null,"x-height":null,x1:null,x2:null,xChannelSelector:null,"xlink:actuate":"http://www.w3.org/1999/xlink","xlink:arcrole":"http://www.w3.org/1999/xlink","xlink:href":"http://www.w3.org/1999/xlink",
"xlink:role":"http://www.w3.org/1999/xlink","xlink:show":"http://www.w3.org/1999/xlink","xlink:title":"http://www.w3.org/1999/xlink","xlink:type":"http://www.w3.org/1999/xlink","xml:base":"http://www.w3.org/XML/1998/namespace","xml:id":"http://www.w3.org/XML/1998/namespace","xml:lang":"http://www.w3.org/XML/1998/namespace","xml:space":"http://www.w3.org/XML/1998/namespace",y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null};var cra={},nha=QV,G1=RV,TV,H1=bra,mha=C$,dra=cra=function(f,
m){if(!f)return jR(document.createTextNode(""));if("string"===typeof f){if(!("DOMParser"in window))throw Error("DOMParser is not available, so parsing string to DOM node is not possible.");TV=TV||new DOMParser;f=TV.parseFromString(f,"text/html");f=f.body.firstChild?f.getElementsByTagName("body")[0].firstChild:f.head.firstChild&&("TITLE"!==f.head.firstChild.tagName||f.title)?f.head.firstChild:f.firstChild&&"HTML"!==f.firstChild.tagName?f.firstChild:document.createTextNode("")}if("object"!==typeof f||
!f||!f.nodeType)throw Error("invalid dom node",f);return jR(f,m)},era="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,UV={};!function(f,m){UV?UV=m():(this||era)[f]=m()}("bowser",function(){function f(k){function b(W){return(W=k.match(W))&&1<W.length&&W[1]||""}function e(W){return(W=k.match(W))&&1<W.length&&W[2]||""}var l=b(/(ipod|iphone|ipad)/i).toLowerCase(),p=!/like android/i.test(k)&&/android/i.test(k),u=/nexus\s*[0-6]\s*/i.test(k),x=!u&&/nexus\s*[0-9]+/i.test(k),
z=/CrOS/.test(k),E=/silk/i.test(k),G=/sailfish/i.test(k),J=/tizen/i.test(k),K=/(web|hpw)os/i.test(k),T=/windows phone/i.test(k),P=!T&&/windows/i.test(k),da=!l&&!E&&/macintosh/i.test(k),fa=!p&&!G&&!J&&!K&&/linux/i.test(k),ka=b(/edge\/(\d+(\.\d+)?)/i),za=b(/version\/(\d+(\.\d+)?)/i),Ia=/tablet/i.test(k),N=!Ia&&/[^-]mobi/i.test(k),ia=/xbox/i.test(k);/opera|opr|opios/i.test(k)?z={name:"Opera",opera:!0,version:za||b(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(k)?z={name:"Opera Coast",coast:!0,
version:za||b(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(k)?z={name:"Yandex Browser",yandexbrowser:!0,version:za||b(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(k)?z={name:"UC Browser",ucbrowser:!0,version:b(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(k)?z={name:"Maxthon",maxthon:!0,version:b(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(k)?z={name:"Epiphany",epiphany:!0,version:b(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(k)?z={name:"Puffin",puffin:!0,
version:b(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(k)?z={name:"Sleipnir",sleipnir:!0,version:b(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(k)?z={name:"K-Meleon",kMeleon:!0,version:b(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:T?(z={name:"Windows Phone",windowsphone:!0},ka?(z.msedge=!0,z.version=ka):(z.msie=!0,z.version=b(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(k)?z={name:"Internet Explorer",msie:!0,version:b(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:z?z={name:"Chrome",chromeos:!0,
chromeBook:!0,chrome:!0,version:b(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(k)?z={name:"Microsoft Edge",msedge:!0,version:ka}:/vivaldi/i.test(k)?z={name:"Vivaldi",vivaldi:!0,version:b(/vivaldi\/(\d+(\.\d+)?)/i)||za}:G?z={name:"Sailfish",sailfish:!0,version:b(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(k)?z={name:"SeaMonkey",seamonkey:!0,version:b(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(k)?(z={name:"Firefox",firefox:!0,version:b(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},
/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(k)&&(z.firefoxos=!0)):E?z={name:"Amazon Silk",silk:!0,version:b(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(k)?z={name:"PhantomJS",phantom:!0,version:b(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(k)?z={name:"SlimerJS",slimer:!0,version:b(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(k)||/rim\stablet/i.test(k)?z={name:"BlackBerry",blackberry:!0,version:za||b(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:K?(z={name:"WebOS",webos:!0,version:za||b(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},
/touchpad\//i.test(k)&&(z.touchpad=!0)):/bada/i.test(k)?z={name:"Bada",bada:!0,version:b(/dolfin\/(\d+(\.\d+)?)/i)}:J?z={name:"Tizen",tizen:!0,version:b(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||za}:/qupzilla/i.test(k)?z={name:"QupZilla",qupzilla:!0,version:b(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||za}:/chromium/i.test(k)?z={name:"Chromium",chromium:!0,version:b(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||za}:/chrome|crios|crmo/i.test(k)?z={name:"Chrome",chrome:!0,version:b(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:
p?z={name:"Android",version:za}:/safari|applewebkit/i.test(k)?(z={name:"Safari",safari:!0},za&&(z.version=za)):l?(z={name:"iphone"==l?"iPhone":"ipad"==l?"iPad":"iPod"},za&&(z.version=za)):z=/googlebot/i.test(k)?{name:"Googlebot",googlebot:!0,version:b(/googlebot\/(\d+(\.\d+))/i)||za}:{name:b(/^(.*)\/(.*) /),version:e(/^(.*)\/(.*) /)};!z.msedge&&/(apple)?webkit/i.test(k)?(/(apple)?webkit\/537\.36/i.test(k)?(z.name=z.name||"Blink",z.blink=!0):(z.name=z.name||"Webkit",z.webkit=!0),!z.version&&za&&(z.version=
za)):!z.opera&&/gecko\//i.test(k)&&(z.name=z.name||"Gecko",z.gecko=!0,z.version=z.version||b(/gecko\/(\d+(\.\d+)?)/i));z.msedge||!p&&!z.silk?l?(z[l]=!0,z.ios=!0):da?z.mac=!0:ia?z.xbox=!0:P?z.windows=!0:fa&&(z.linux=!0):z.android=!0;P="";z.windowsphone?P=b(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):l?(P=b(/os (\d+([_\s]\d+)*) like mac os x/i),P=P.replace(/[_\s]/g,".")):p?P=b(/android[ \/-](\d+(\.\d+)*)/i):z.webos?P=b(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):z.blackberry?P=b(/rim\stablet\sos\s(\d+(\.\d+)*)/i):
z.bada?P=b(/bada\/(\d+(\.\d+)*)/i):z.tizen&&(P=b(/tizen[\/\s](\d+(\.\d+)*)/i));P&&(z.osversion=P);P=P.split(".")[0];if(Ia||x||"ipad"==l||p&&(3==P||4<=P&&!N)||z.silk)z.tablet=!0;else if(N||"iphone"==l||"ipod"==l||p||u||z.blackberry||z.webos||z.bada)z.mobile=!0;z.msedge||z.msie&&10<=z.version||z.yandexbrowser&&15<=z.version||z.vivaldi&&1<=z.version||z.chrome&&20<=z.version||z.firefox&&20<=z.version||z.safari&&6<=z.version||z.opera&&10<=z.version||z.ios&&z.osversion&&6<=z.osversion.split(".")[0]||z.blackberry&&
10.1<=z.version||z.chromium&&20<=z.version?z.a=!0:z.msie&&10>z.version||z.chrome&&20>z.version||z.firefox&&20>z.version||z.safari&&6>z.version||z.opera&&10>z.version||z.ios&&z.osversion&&6>z.osversion.split(".")[0]||z.chromium&&20>z.version?z.c=!0:z.x=!0;return z}function m(k,b){var e=[],l;if(Array.prototype.map)return Array.prototype.map.call(k,b);for(l=0;l<k.length;l++)e=b(k[l]);return e}function n(k){var b=Math.max(k[0].split(".").length,k[1].split(".").length);for(k=m(k,function(e){var l=b-e.split(".").length;
e+=Array(l+1).join(".0");return m(e.split("."),function(p){return Array(20-p.length).join("0")+p}).reverse()});0<=--b;){if(k[0][b]>k[1][b])return 1;if(k[0][b]===k[1][b]){if(0===b)return 0}else return-1}}function a(k,b,e){var l=d;"string"===typeof b&&(e=b,b=void 0);void 0===b&&(b=!1);e&&(l=f(e));e=""+l.version;for(var p in k)if(k.hasOwnProperty(p)&&l[p])return 0>n([e,k[p]]);return b}var d=f("undefined"!==typeof navigator?navigator.userAgent:"");d.test=function(k){for(var b=0;b<k.length;++b){var e=
k[b];if("string"===typeof e&&e in d)return!0}return!1};d.isUnsupportedBrowser=a;d.compareVersions=n;d.check=function(k,b,e){return!a(k,b,e)};d._detect=f;return d});var Fp=UV,Cl=lively.FreezerRuntime.recorderFor("lively.morphic/config.js");Cl.parseURLQuery=function(){if("undefined"===typeof document||!document.location)return{};var f=(document.location.hash||document.location.search).slice(1);f=f&&f.split("&");var m={};if(f)for(var n=0;n<f.length;n++){var a=f[n].split("="),d=a[0],k=!0;if(1<a.length&&
(k=decodeURIComponent(a.slice(1).join("=")),k.match(/^(true|false|null|[0-9"[{].*)$/)))try{k=JSON.parse(k)}catch(b){"["===k[0]&&(k=k.slice(1,-1).split(","))}m[d]=k}return m};Cl.Rectangle=Fe;Cl.Color=ng;Cl.bowser=Fp;Cl.joinPath=ah;Cl.isMac=!!Cl.bowser.mac;Cl.baseURL=window.SERVER_URL||System.baseURL||document.location.origin;"undefined"!==typeof $world&&$world.withAllSubmorphsDo(function(f){return f.hasOwnProperty("_cachedKeyhandlers")&&(f._cachedKeyhandlers=null)});Cl.config={onloadURLQuery:Cl.parseURLQuery(),
defaultShadow:{fast:!0,distance:18,blur:30,color:Cl.Color.black.withA(.2),spread:0},undoLevels:20,halosEnabled:!0,altClickDefinesThat:!0,verboseLogging:!0,maxStatusMessages:5,repeatClickInterval:250,longClick:{minDur:500,maxDur:1E3,maxDist:2},showTooltipsAfter:.8,users:{authServerURL:window.AUTH_SERVER_URL||"https://auth.lively-next.org",autoLoginAsGuest:!1},ide:{workerEnabled:!1,js:{ignoredPackages:["lively.web","no group",function(f){return f.includes("lively.morphic/objectdb")||f.includes("lively.next-node_modules")||
f.includes("node_modules")||f.includes("custom-npm-modules")||f.includes("mocha-es6")||f.includes("test-resources/es6")}]},modes:{aliases:{text:"text",sh:"shell",markdown:"md",javascript:"js",htmlmixed:"html",haskell:"hs",python:"py"}}},globalKeyBindings:[{keys:{mac:"Meta-Z",win:"Ctrl-Z"},command:"undo"},{keys:{mac:"Meta-Shift-Z",win:"Ctrl-Shift-Z"},command:"redo"},{keys:"Alt-X",command:"run command"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"save world"},{keys:"Meta-Shift-L s a v e",command:"save this world"},
{keys:"Meta-H",command:"show halo for focused morph"},{keys:"Meta-Shift-L C O P Y",command:"copy morph"},{keys:"Alt-M",command:"select morph"},{keys:"Escape",command:"escape"},{keys:{win:"Ctrl-Escape",mac:"Meta-Escape"},command:"close active window or morph"},{keys:"Alt-Shift-C",command:"toggle minimize active window"},{keys:{mac:"Meta-Shift-L W S",win:"Ctrl-Shift-L W S"},command:"search workspaces"},{keys:{mac:"Meta-O",win:"Ctrl-O"},command:"open status message of focused morph"},{keys:{win:"Ctrl-K",
mac:"Meta-K"},command:{command:"open javascript workspace",onlyWhenFocused:!1}},{keys:"Alt-Shift-1",command:{command:"open shell terminal",onlyWhenFocused:!1}},{keys:{win:"Ctrl-B",mac:"Meta-B"},command:{command:"open browser",onlyWhenFocused:!1}},{keys:{win:"Ctrl-P",mac:"Meta-P"},command:{command:"open PartsBin",onlyWhenFocused:!0}},{keys:"Alt-T",command:{command:"choose and browse module",onlyWhenFocused:!1}},{keys:"Alt-Shift-T",command:{command:"choose and browse package resources",onlyWhenFocused:!1}},
{keys:{mac:"Ctrl-X D"},command:"open file browser"},{keys:{mac:"Ctrl-X Ctrl-F"},command:"open file"},{keys:{win:"Ctrl-Shift-F",mac:"Meta-Shift-F"},command:{command:"open code search",onlyWhenFocused:!1}},{keys:"Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:1}}},{keys:"Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:1}}},{keys:"Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",
offset:1}}},{keys:"Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:1}}},{keys:"Meta-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:10}}},{keys:"Meta-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:10}}},{keys:"Meta-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:10}}},{keys:"Meta-Down",command:{command:"move or resize halo target",
args:{what:"move",direction:"down",offset:10}}},{keys:"Alt-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:100}}},{keys:"Alt-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:100}}},{keys:"Alt-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:100}}},{keys:"Alt-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:100}}},{keys:"Shift-Left",
command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:1}}},{keys:"Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:1}}},{keys:"Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:1}}},{keys:"Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:1}}},{keys:"Meta-Shift-Left",command:{command:"move or resize halo target",
args:{what:"resize",direction:"left",offset:10}}},{keys:"Meta-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:10}}},{keys:"Meta-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:10}}},{keys:"Meta-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:10}}},{keys:"Alt-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",
offset:100}}},{keys:"Alt-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:100}}},{keys:"Alt-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:100}}},{keys:"Alt-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:100}}},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"close halo target"},{keys:{win:"Ctrl-`|Alt-`",mac:"Meta-1"},command:"window switcher"},
{keys:{mac:"Meta-Shift-L R E S 1",win:"Ctrl-Shift-L R E S 1"},command:{command:"resize active window",args:{how:"col1"}}},{keys:{mac:"Meta-Shift-L R E S 2",win:"Ctrl-Shift-L R E S 2"},command:{command:"resize active window",args:{how:"col2"}}},{keys:{mac:"Meta-Shift-L R E S 3",win:"Ctrl-Shift-L R E S 3"},command:{command:"resize active window",args:{how:"col3"}}},{keys:{mac:"Meta-Shift-L R E S C",win:"Ctrl-Shift-L R E S C"},command:{command:"resize active window",args:{how:"center"}}},{keys:{mac:"Meta-Shift-L R E S L",
win:"Ctrl-Shift-L R E S L"},command:{command:"resize active window",args:{how:"left"}}},{keys:{mac:"Meta-Shift-L R E S R",win:"Ctrl-Shift-L R E S R"},command:{command:"resize active window",args:{how:"right"}}},{keys:{mac:"Meta-Shift-L R E S F",win:"Ctrl-Shift-L R E S F"},command:{command:"resize active window",args:{how:"full"}}},{keys:{mac:"Meta-Shift-L R E S T",win:"Ctrl-Shift-L R E S T"},command:{command:"resize active window",args:{how:"top"}}},{keys:{mac:"Meta-Shift-L R E S B",win:"Ctrl-Shift-L R E S B"},
command:{command:"resize active window",args:{how:"bottom"}}},{keys:{mac:"Meta-Shift-L R E S Escape",win:"Ctrl-Shift-L R E S Escape"},command:{command:"resize active window",args:{how:"reset"}}}],text:{basicFontItems:"Sans-serif;serif;Monospace;Arial Black;Arial Narrow;Comic Sans MS;Garamond;Tahoma;Trebuchet MS;Verdana;custom...".split(";"),cursorBlinkPeriod:.5,useSoftTabs:!0,tabWidth:2,markStackSize:16,undoLevels:50,clipboardBufferLength:100,useMultiSelect:!0,undoGroupDelay:600,defaultKeyBindings:[{keys:{win:"Ctrl-C",
mac:"Meta-C"},command:{command:"clipboard copy",passEvent:!0}},{keys:"Ctrl-W",command:{command:"manual clipboard copy",args:{delete:!0}}},{keys:"Alt-W",command:"manual clipboard copy"},{keys:"Ctrl-Y",command:"manual clipboard paste"},{keys:"Alt-Y",command:{command:"manual clipboard paste",args:{killRingCycleBack:!0}}},{keys:{win:"Ctrl-X",mac:"Meta-X"},command:{command:"clipboard cut",passEvent:!0}},{keys:{win:"Ctrl-V",mac:"Meta-V"},command:{command:"clipboard paste",passEvent:!0}},{keys:{win:"Ctrl-Z|Ctrl-Shift--",
mac:"Meta-Z|Ctrl-Shift--|Ctrl-x u"},command:"text undo"},{keys:{win:"Ctrl-Shift-Z",mac:"Meta-Shift-Z"},command:"text redo"},{keys:{win:"Ctrl-A|Ctrl-X H",mac:"Meta-A|Ctrl-X H"},command:"select all"},{keys:{win:"Alt-Enter",mac:"Meta-D|Alt-Enter"},command:"doit"},{keys:{mac:"Meta-Shift-L X B"},command:"eval all"},{keys:{win:"Alt-Ctrl-Enter",mac:"Meta-P"},command:"printit"},{keys:{win:"Alt-Ctrl-Shift-Enter",mac:"Meta-I"},command:"print inspectit"},{keys:{win:"Ctrl-Shift-I",mac:"Meta-Shift-I"},command:"inspectit"},
{keys:{win:"Ctrl-Shift-E",mac:"Meta-Shift-E"},command:"editit"},{keys:{win:"Ctrl-Shift-U",mac:"Meta-Shift-U"},command:"undefine variable"},{keys:"Backspace",command:"delete backwards"},{keys:"Shift-Backspace",command:"delete backwards"},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"delete"},{keys:{win:"Left|Ctrl-B",mac:"Left|Ctrl-B"},command:"go left"},{keys:{win:"Right|Ctrl-F",mac:"Right|Ctrl-F"},command:"go right"},{keys:{win:"Up|Ctrl-P",mac:"Up|Ctrl-P"},command:"go up"},{keys:{win:"Down|Ctrl-N",
mac:"Down|Ctrl-N"},command:"go down"},{keys:"Shift-Left",command:"select left"},{keys:"Shift-Right",command:"select right"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-Right",mac:"Alt-Right|Alt-F"},command:"goto word right"},{keys:{win:"Ctrl-Left",mac:"Alt-Left|Alt-B"},command:"goto word left"},{keys:{win:"Ctrl-Shift-Right",mac:"Alt-Shift-Right|Alt-Shift-F"},command:{command:"goto word right",args:{select:!0}}},{keys:{win:"Ctrl-Shift-Left",mac:"Alt-Shift-Left|Alt-Shift-B"},
command:{command:"goto word left",args:{select:!0}}},{keys:{win:"Ctrl-Backspace",mac:"Alt-Backspace"},command:"delete word left"},{keys:"Alt-D",command:"delete word right"},{keys:{win:"Alt-Ctrl-K",mac:"Alt-Ctrl-K"},command:"delete word right"},{keys:"Alt-Shift-2",command:"select word right"},{keys:"Ctrl-X Ctrl-X",command:"reverse selection"},{keys:{win:"Ctrl-Shift-L",mac:"Meta-L"},command:"select line"},{keys:{win:"Shift-Home",mac:"Shift-Home|Ctrl-Shift-A"},command:{command:"goto line start",args:{select:!0}}},
{keys:{win:"Home",mac:"Home|Ctrl-A"},command:{command:"goto line start",args:{select:!1}}},{keys:{win:"Shift-End",mac:"Shift-End|Ctrl-Shift-E"},command:{command:"goto line end",args:{select:!0}}},{keys:{win:"End",mac:"End|Ctrl-E"},command:{command:"goto line end",args:{select:!1}}},{keys:"Ctrl-C J",command:{command:"join line",args:{withLine:"before"}}},{keys:"Ctrl-C Shift-J",command:{command:"join line",args:{withLine:"after"}}},{keys:{win:"Ctrl-Shift-D",mac:"Meta-Shift-D|Ctrl-C P"},command:"duplicate line or selection"},
{keys:{win:"Ctrl-Shift-Backspace",mac:"Meta-Backspace"},command:"delete left until beginning of line"},{keys:"Ctrl-K",command:"delete emtpy line or until end of line"},{keys:{win:"Ctrl-Alt-Up|Ctrl-Alt-P",mac:"Ctrl-Meta-Up|Ctrl-Meta-P"},command:"move lines up"},{keys:{win:"Ctrl-Alt-Down|Ctrl-Alt-N",mac:"Ctrl-Meta-Down|Ctrl-Meta-N"},command:"move lines down"},{keys:{win:"PageDown",mac:"PageDown|Ctrl-V"},command:"goto page down"},{keys:{win:"PageUp",mac:"PageUp|Alt-V"},command:"goto page up"},{keys:{win:"Shift-PageDown",
mac:"Shift-PageDown"},command:"goto page down and select"},{keys:{win:"Shift-PageUp",mac:"Shift-PageUp"},command:"goto page up and select"},{keys:"Alt-Ctrl-,",command:"move cursor to screen top in 1/3 steps"},{keys:"Alt-Ctrl-.",command:"move cursor to screen bottom in 1/3 steps"},{keys:{win:"Alt-Left",mac:"Meta-Left"},command:"goto matching left"},{keys:{win:"Alt-Shift-Left",mac:"Meta-Shift-Left"},command:{command:"goto matching left",args:{select:!0}}},{keys:{win:"Alt-Right",mac:"Meta-Right"},command:"goto matching right"},
{keys:{win:"Alt-Shift-Right",mac:"Meta-Shift-Right"},command:{command:"goto matching right",args:{select:!0}}},{keys:"Alt-Ctrl-B",command:"goto matching left"},{keys:"Alt-Ctrl-F",command:"goto matching right"},{keys:"Ctrl-Up",command:"goto paragraph above"},{keys:"Ctrl-Down",command:"goto paragraph below"},{keys:{win:"Ctrl-Shift-Home",mac:"Meta-Shift-Up"},command:{command:"goto start",args:{select:!0}}},{keys:{win:"Ctrl-Shift-End",mac:"Meta-Shift-Down"},command:{command:"goto end",args:{select:!0}}},
{keys:{win:"Ctrl-Home",mac:"Meta-Up|Meta-Home|Alt-Shift-,"},command:"goto start"},{keys:{win:"Ctrl-End",mac:"Meta-Down|Meta-End|Alt-Shift-."},command:"goto end"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{win:"Ctrl-Shift-L",mac:"Ctrl-Shift-L|Alt-G G"},command:"goto line"},{keys:"Enter",command:"newline"},{keys:"Space",command:{command:"insertstring",args:{string:" ",undoGroup:!0}}},{keys:"Tab",command:{command:"tab - snippet expand or indent"}},{keys:{win:"Ctrl-]",mac:"Meta-]"},command:"indent"},
{keys:{win:"Ctrl-[",mac:"Meta-["},command:"outdent"},{keys:{win:"Ctrl-Enter",mac:"Meta-Enter"},command:{command:"insert line",args:{where:"below"}}},{keys:"Shift-Enter",command:{command:"insert line",args:{where:"above"}}},{keys:"Ctrl-O",command:"split line"},{keys:{mac:"Ctrl-X Ctrl-T"},command:"transpose chars"},{keys:{mac:"Ctrl-C Ctrl-U"},command:"uppercase"},{keys:{mac:"Ctrl-C Ctrl-L"},command:"lowercase"},{keys:{mac:"Meta-Shift-L W t"},command:"remove trailing whitespace"},{keys:{mac:"Ctrl-Space"},
command:"toggle active mark"},{keys:{mac:"Meta-Shift-L M O D E"},command:"change editor mode"},{keys:{mac:"Meta-Shift-L L T"},command:"toggle line wrapping"},{keys:"Esc|Ctrl-G",command:"cancel input"},{keys:{win:"Ctrl-/",mac:"Meta-/"},command:"toggle comment"},{keys:{win:"Alt-Ctrl-/",mac:"Alt-Meta-/|Alt-Meta-\u00f7"},command:"toggle block comment"},{keys:"Meta-Shift-L /  D",command:"comment box"},{keys:{win:"Ctrl-.",mac:"Meta-."},command:"[IyGotoChar] activate"},{keys:{win:"Ctrl-,",mac:"Meta-,"},
command:{command:"[IyGotoChar] activate",args:{backwards:!0}}},{keys:{win:"Ctrl-Space|Ctrl-Shift-P",mac:"Alt-Shift-Space|Alt-Space|Meta-Shift-P"},command:"text completion"},{keys:"\u00f7|Alt-/",command:"text completion first match"},{keys:"Alt-Q",command:"fit text to column"},{keys:{win:"Ctrl-F|Ctrl-G|F3",mac:"Meta-F|Meta-G|Ctrl-S"},command:"search in text"},{keys:{win:"Ctrl-Shift-F|Ctrl-Shift-G",mac:"Meta-Shift-F|Meta-Shift-G|Ctrl-R"},command:{command:"search in text",args:{backwards:!0}}},{keys:"Ctrl-Shift-/|Ctrl-C Ctrl-Shift-,",
command:"[multi select] all like this"},{keys:"Alt-Ctrl-P",command:"[multi select] add cursor above"},{keys:"Alt-Ctrl-N",command:"[multi select] add cursor below"},{keys:"Ctrl-Shift-,",command:"[multi select] more like this backward"},{keys:"Ctrl-Shift-.",command:"[multi select] more like this forward"},{keys:{mac:"Meta-Shift-,"},command:"[multi select] goto previous focused cursor"},{keys:{mac:"Meta-Shift-."},command:"[multi select] goto next focused cursor"},{keys:"Ctrl-Shift-;",command:"[multi select] remove focused cursor"},
{keys:"Alt-Ctrl-A",command:"[multi select] align cursors"},{keys:"Ctrl-X R",command:"[multi select] create rectangular selection"},{keys:{win:"Shift-Ctrl-S|Ctrl-Alt-Space",mac:"Ctrl-Command-space|Ctrl-Alt-Space"},command:"contractRegion"},{keys:{win:"Shift-Ctrl-E|Ctrl-Shift-Space",mac:"Shift-Command-Space|Ctrl-Shift-Space"},command:"expandRegion"},{keys:"Ctrl-Alt-h",command:"markDefun"},{keys:"Ctrl-Alt-d|Ctrl-Alt-Down",command:"forwardDownSexp"},{keys:"Ctrl-Alt-u|Ctrl-Alt-Up",command:"backwardUpSexp"},
{keys:"Ctrl-Alt-b|Ctrl-Alt-Left",command:"backwardSexp"},{keys:"Ctrl-Alt-f|Ctrl-Alt-Right",command:"forwardSexp"},{keys:"Alt-.",command:"selectDefinition"},{keys:"Ctrl-Shift-'",command:"selectSymbolReferenceOrDeclaration"},{keys:"Ctrl-Shift-[",command:"selectSymbolReferenceOrDeclarationPrev"},{keys:"Ctrl-Shift-]",command:"selectSymbolReferenceOrDeclarationNext"},{keys:{win:"Ctrl-=",mac:"Meta-="},command:"increase font size"},{keys:{win:"Ctrl--",mac:"Meta--"},command:"decrease font size"},{keys:"Alt-K",
command:"set link of selection"},{keys:"Alt-O",command:"set doit of selection"},{keys:{win:"Ctrl-\\",mac:"Meta-\\"},command:"reset text style"},{keys:{win:"Ctrl-Shift-L T U I",mac:"Meta-Shift-L T U I"},command:"open text attribute controls"},{keys:{win:"Ctrl-Shift-L T D",mac:"Meta-Shift-L T D"},command:"[todo] toggle todo marker"},{keys:{win:"Ctrl-Shift-L D A T E",mac:"Meta-Shift-L D A T E"},command:"insert date"},{keys:"Ctrl-C Ctrl-I",command:"change string inflection"},{keys:"Alt-Shift-4",command:"spell check word"},
{keys:"Alt-Shift-\\",command:"[shell] run shell command on region"},{keys:"Alt-Shift-;",command:"run code on text morph"},{keys:{win:"Ctrl-Shift-L O P E N",mac:"Meta-Shift-L O P E N"},command:"open file at cursor"},{keys:"Meta-F1",command:"report token at cursor"}]},codeEditor:{defaultTheme:"default",collapseSelection:!1,search:{maxCharsPerLine:1E4,fastHighlightLineCount:4E3,showTextMap:!0},defaultStyle:{fontFamily:"IBM Plex Mono",padding:Cl.Rectangle.inset(4,2,4,2),fontSize:12,clipMode:"auto"},modes:{text:{style:{}}}},
systemBrowser:{fixUndeclaredVarsOnSave:!0},objectEditor:{fixUndeclaredVarsOnSave:!0},remotes:{server:System.get("@system-env").browser?document.location.origin+"/eval":null},css:{ibmPlex:Cl.joinPath(Cl.baseURL,"lively.morphic/assets/ibm-plex/css/ibm-plex.css"),fontAwesome:Cl.joinPath(Cl.baseURL,"/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css"),inconsolata:Cl.joinPath(Cl.baseURL,"/lively.morphic/assets/inconsolata/inconsolata.css")}};var $l=Ma("h",Cl.config);Cl.default=$l;var Ph=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/property-dom-mapping.js");
Ph.styleProps=UC;Ph.canBePromotedToCompositionLayer=tI;Ph.addTransform=kR;Ph.addTransformOrigin=function(f,m){if(f=f.origin)m.transformOrigin=f.x+"px "+f.y+"px"};Ph.addDisplay=function(f,m){f=f.visible;null!=f&&(m.display=f?"":"none")};Ph.addBorderRadius=function(f,m){var n=f.borderRadiusLeft,a=f.borderRadiusRight,d=f.borderRadiusBottom;f=f.borderRadiusTop;m.borderRadius=f+"px "+f+"px "+d+"px "+d+"px / "+n+"px "+a+"px "+a+"px "+n+"px"};Ph.addBorder=function(f,m){var n=f.borderWidthLeft,a=f.borderColorLeft,
d=f.borderStyleLeft,k=f.borderWidthRight,b=f.borderColorRight,e=f.borderStyleRight,l=f.borderColor,p=f.borderWidthBottom,u=f.borderColorBottom,x=f.borderStyleBottom,z=f.borderWidthTop,E=f.borderColorTop;f=f.borderStyleTop;var G=function(J){return Ph.bowser.safari?Ph.string.camelize(J):J};m[G("border-left-style")]=""+d;m[G("border-right-style")]=""+e;m[G("border-bottom-style")]=""+x;m[G("border-top-style")]=""+f;m[G("border-left-width")]=n+"px";m[G("border-right-width")]=k+"px";m[G("border-bottom-width")]=
p+"px";m[G("border-top-width")]=z+"px";m[G("border-top-color")]=E?E.toString():"transparent";m[G("border-right-color")]=b?b.toString():"transparent";m[G("border-bottom-color")]=u?u.toString():"transparent";m[G("border-left-color")]=a?a.toString():"transparent";l&&l.isGradient&&(m["border-image"]=l.toString())};Ph.addFill=function(f,m){(f=f.fill)?f.isGradient?m.backgroundImage=f.toString():m.background=f.toString():m.background=Ph.Color.transparent.toString()};Ph.addExtentStyle=function(f,m){f=f.extent;
m.width=f.x+"px";m.height=f.y+"px"};Ph.shadowCss=function(f){return f.dropShadow?f.dropShadow.toFilterCss():""};Ph.addShadowStyle=function(f,m){f.isSvgMorph||f.isImage?m.filter=Ph.shadowCss(f):(f=f.dropShadow)&&f.fast||f&&f.inset?m.boxShadow=f?f.toCss():"none":m.filter=f?f.toFilterCss():""};Ph.addSvgAttributes=VC;Ph.getSvgVertices=Dz;Ph.addPathAttributes=WC;Ph.addSvgBorderStyle=function(f,m){var n=f.borderStyle.valueOf();"dashed"===n?(f=f.borderWidth.valueOf(),m["stroke-dasharray"]=1.61*f+" "+f):
"dotted"===n&&(m["stroke-dasharray"]="1 "+2*f.borderWidth.valueOf(),m["stroke-linecap"]="round",m["stroke-linejoin"]="round");return m};Ph.Color=ng;Ph.string=Dh;Ph.bowser=Fp;Ph.styleProps=UC;Ph.styleProps=UC;Ph.canBePromotedToCompositionLayer=tI;Ph.canBePromotedToCompositionLayer=tI;Ph.addTransform=kR;Ph.addTransform=kR;Ph.addSvgAttributes=VC;Ph.addSvgAttributes=VC;Ph.getSvgVertices=Dz;Ph.getSvgVertices=Dz;Ph.addPathAttributes=WC;Ph.addPathAttributes=WC;var Te=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js");
Te.defaultStyle=Ez;Te.MorphAfterRenderHook=function(f,m){this.morph=f;this.renderer=m};Te.Animation=function(f){this.morph=f};Te.SvgAnimation=lR;Te.defaultAttributes=Fz;Te.svgAttributes=uI;Te.pathAttributes=vI;Te.renderGradient=wI;Te.initDOMState=function(f,m){f.rootNode.appendChild(f.domNode);f.ensureDefaultCSS().then(function(){return Te.promise.delay(500)}).then(function(){return m.env.fontMetric&&m.env.fontMetric.reset()}).then(function(){return m.withAllSubmorphsDo(function(n){if(n.isText||n.isLabel){var a=
(n.metadata||{}).serializationInfo;a&&a.recoveredTextBounds||n.forceRerender()}})}).catch(function(n){return console.error(n)})};Te.renderMorph=xI;Te.renderSubTree=yI;Te.renderRootMorph=zI;Te.vdom=XE;Te.parser=dra;Te.num=zl;Te.obj=eg;Te.arr=Gf;Te.properties=go;Te.promise=bh;Te.Color=ng;Te.RadialGradient=Dn;Te.pt=ui;Te.Point=sg;Te.LinearGradient=Zl;Te.rect=Ll;Te.config=$l;Te.styleProps=UC;Te.addSvgAttributes=VC;Te.addPathAttributes=WC;Te.bowser=Fp;var zM=Te.vdom;Te.h=zM.h;Te.diff=zM.diff;Te.patch=
zM.patch;Te.createNode=zM.create;Te.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Te.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Te.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
var Gp=Ma("bt",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js"),n=m.hasOwnProperty("ShadowObject")&&"function"===typeof m.ShadowObject?m.ShadowObject:m.ShadowObject=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Te.obj.isBoolean(a)&&(a=Te.config.defaultShadow);var d=a;a=d.rotation;var k=d.distance,
b=d.blur,e=d.color,l=d.morph,p=d.inset,u=d.spread;d=d.fast;this.rotation=Te.obj.isNumber(a)?a:45;this.distance=Te.obj.isNumber(k)?k:2;this.blur=Te.obj.isNumber(b)?b:6;this.inset=p||!1;this.spread=u||0;this.color=e||Te.Color.gray.darker();this.morph=l;this.fast=d}},{key:"__dont_serialize__",get:function(){return["morph"]}},{key:"distance",get:function(){return this._distance}},{key:"blur",get:function(){return this._blur}},{key:"rotation",get:function(){return this._rotation}},{key:"color",get:function(){return this._color}},
{key:"inset",get:function(){return this._inset}},{key:"inset",set:function(a){this._inset=a;this.morph&&(this.morph.dropShadow=this)}},{key:"distance",set:function(a){this._distance=a;this.morph&&(this.morph.dropShadow=this)}},{key:"blur",set:function(a){this._blur=a;this.morph&&(this.morph.dropShadow=this)}},{key:"rotation",set:function(a){this._rotation=a;this.morph&&(this.morph.dropShadow=this)}},{key:"color",set:function(a){this._color=a;this.morph&&(this.morph.dropShadow=this)}},{key:"isShadowObject",
get:function(){return!0}},{key:"__serialize__",value:function(){var a=this.toJson(),d=a.distance,k=a.rotation,b=a.color,e=a.inset,l=a.blur,p=a.spread;a=a.fast;b=b.toJSExpr();return{__expr__:"new ShadowObject({"+Object.entries({distance:d,rotation:k,color:b,inset:e,blur:l,spread:p,fast:a}).map(function(u){var x=$jscomp.makeIterator(u);u=x.next().value;x=x.next().value;return u+":"+x})+"})",bindings:{"lively.graphics/color.js":["Color"],"lively.morphic":["ShadowObject"]}}}},{key:"with",value:function(a){return new Te.ShadowObject(Object.assign({distance:this.distance,
rotation:this.rotation,color:this.color,inset:this.inset,blur:this.blur,spread:this.spread,fast:this.fast},a))}},{key:"toCss",value:function(){var a=this.color,d=this.inset,k=this.blur,b=this.spread,e=Te.Point.polar(this.distance,Te.num.toRadians(this.rotation)),l=e.y;return(d?"inset":"")+" "+a.toString()+" "+e.x.toFixed(2)+"px "+l.toFixed(2)+"px "+k+"px "+b+"px"}},{key:"toJson",value:function(){return Te.obj.select(this,"rotation distance blur color inset spread fast".split(" "))}},{key:"equals",
value:function(a){return!!a&&Te.obj.equals(this.toJson(),a.toJson())}},{key:"toFilterCss",value:function(){var a=this.blur,d=this.color,k=Te.Point.polar(this.distance,Te.num.toRadians(this.rotation)),b=k.x;k=k.y;a=Te.bowser.chrome?a/3:a/2;return"drop-shadow("+b.toFixed(2)+"px "+k.toFixed(2)+"px "+a.toFixed(2)+"px "+d.toString()+")"}},{key:"interpolate",value:function(a,d){return new Te.ShadowObject({distance:Te.num.interpolate(a,this.distance,d.distance),rotation:Te.num.interpolate(a,this.rotation,
d.rotation),color:this.color.interpolate(a,d.color),blur:Te.num.interpolate(a,this.blur,d.blur),spread:Te.num.interpolate(a,this.spread,d.spread),inset:d.inset,fast:d.fast})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowObject"}}],m,{pathInPackage:function(){return"rendering/morphic-default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:3438,end:7097})}(void 0));Te.ShadowObject=Gp;Te.ShadowObject=Gp;Te.ShadowObject=Gp;Te.defaultStyle=Ez;Te.defaultStyle=Ez;Te.MorphAfterRenderHook.prototype.hook=function(f,m,n,a){var d=this;a=void 0===a?0:a;var k=!!f.parentNode;k&&(this.morph._submorphOrderChanged&&this.morph.submorphs.length?(this.morph._submorphOrderChanged=!1,this.updateScrollOfSubmorphs(this.morph,this.renderer)):this.morph.isClip()&&this.updateScroll(this.morph,f));k||3<a?(this.morph._rendering=!1,this.morph.onAfterRender(f)):
(a++,setTimeout(function(){return d.hook(f,m,n,a)},20*a))};Te.MorphAfterRenderHook.prototype.updateScroll=function(f,m,n){var a=this,d=f.env.eventDispatcher.eventState.scroll.interactiveScrollInProgress;if(m&&d)return d.then(function(){return a.updateScroll(f,m,!0)});if(!f.isWorld&&m){d=f.scroll;var k=d.x,b=d.y;if(!f._animationQueue.animations.find(function(l){return l.animatedProps.scroll})){var e=f.isText&&f.viewState.fastScroll?m.querySelector(".scrollLayer"):m;!f._skipScrollUpdate&&e&&(e.scrollTop!==
b&&(e.scrollTop=b),e.scrollLeft!==k&&(e.scrollLeft=k),!n&&requestAnimationFrame(function(){e.scrollTop!==b&&(e.scrollTop=b);e.scrollLeft!==k&&(e.scrollLeft=k)},f.id))}}};Te.MorphAfterRenderHook.prototype.unhook=function(f,m){};Te.MorphAfterRenderHook.prototype.updateScrollOfSubmorphs=function(f,m){var n=this;f.submorphs.forEach(function(a){a.isClip()&&n.updateScroll(a,m.getNodeForMorph(a));n.updateScrollOfSubmorphs(a,m)})};Te.Animation.prototype.hook=function(f){this.morph._animationQueue.startAnimationsFor(f)};
Te.SvgAnimation=lR;Te.SvgAnimation=lR;Te.SvgAnimation.prototype.hook=function(f){this.morph._animationQueue.startSvgAnimationsFor(f,this.type)};Te.defaultAttributes=Fz;Te.defaultAttributes=Fz;Te.svgAttributes=uI;Te.svgAttributes=uI;Te.pathAttributes=vI;Te.pathAttributes=vI;Te.renderGradient=wI;Te.renderGradient=wI;Te.renderMorph=xI;Te.renderMorph=xI;Te.renderSubTree=yI;Te.renderSubTree=yI;Te.renderRootMorph=zI;Te.renderRootMorph=zI;var Dc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,VV={};!function(f,m){m(VV)}(VV,function(f){function m(va){return 10===va||13===va||8232===va||8233===va||32===va||9===va||11===va||12===va||160===va||5760<=va&&0<=yx.indexOf(va)}function n(va){return 48<=va&&57>=va}function a(va){(this||Dc).index=0;(this||Dc).path=va;(this||Dc).max=va.length;(this||Dc).result=[];(this||Dc).param=0;(this||Dc).err="";(this||Dc).segmentStart=0;(this||Dc).data=[]}function d(va){for(;va.index<va.max&&m(va.path.charCodeAt(va.index));)va.index++}function k(va){var Wa,
Qa=va.index,cb=Qa,qb=va.max,dc=!1,fb=!1,Xb=!1,Jb=!1;if(cb>=qb)return void(va.err="SvgPath: missed param (at pos "+cb+")");if(Wa=va.path.charCodeAt(cb),43!==Wa&&45!==Wa||(cb++,Wa=cb<qb?va.path.charCodeAt(cb):0),!n(Wa)&&46!==Wa)return void(va.err="SvgPath: param should start with 0..9 or `.` (at pos "+cb+")");if(46!==Wa){if(dc=48===Wa,cb++,Wa=cb<qb?va.path.charCodeAt(cb):0,dc&&cb<qb&&Wa&&n(Wa))return void(va.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+Qa+")");for(;cb<qb&&
n(va.path.charCodeAt(cb));)cb++,fb=!0;Wa=cb<qb?va.path.charCodeAt(cb):0}if(46===Wa){Jb=!0;for(cb++;n(va.path.charCodeAt(cb));)cb++,Xb=!0;Wa=cb<qb?va.path.charCodeAt(cb):0}if(101===Wa||69===Wa){if(Jb&&!fb&&!Xb||(cb++,Wa=cb<qb?va.path.charCodeAt(cb):0,43!==Wa&&45!==Wa||cb++,!(cb<qb&&n(va.path.charCodeAt(cb)))))return void(va.err="SvgPath: invalid float exponent (at pos "+cb+")");for(;cb<qb&&n(va.path.charCodeAt(cb));)cb++}va.index=cb;va.param=parseFloat(va.path.slice(Qa,cb))+0}function b(){if(!((this||
Dc)instanceof b))return new b;(this||Dc).queue=[];(this||Dc).cache=null}function e(va,Wa,Qa,cb){var qb=(va*Qa+Wa*cb)/(Math.sqrt(va*va+Wa*Wa)*Math.sqrt(va*va+Wa*Wa));return 1<qb&&(qb=1),-1>qb&&(qb=-1),(0>va*cb-Wa*Qa?-1:1)*Math.acos(qb)}function l(va,Wa,Qa,cb,qb,dc,fb,Xb,Jb,Yc){var Pb=Yc*(va-Qa)/2+Jb*(Wa-cb)/2,Wd=-Jb*(va-Qa)/2+Yc*(Wa-cb)/2,ue=fb*fb,zf=Xb*Xb,Af=Pb*Pb,Qe=Wd*Wd,Bf=ue*zf-ue*Qe-zf*Af;0>Bf&&(Bf=0);Bf=Math.sqrt(Bf/(ue*Qe+zf*Af))*(qb===dc?-1:1);qb=Bf*fb/Xb*Wd;Bf=Bf*-Xb/fb*Pb;va=Yc*qb-Jb*Bf+
(va+Qa)/2;Wa=Jb*qb+Yc*Bf+(Wa+cb)/2;cb=(Pb-qb)/fb;Jb=(Wd-Bf)/Xb;fb=(-Pb-qb)/fb;Wd=(-Wd-Bf)/Xb;Xb=e(1,0,cb,Jb);Wd=e(cb,Jb,fb,Wd);return 0===dc&&0<Wd&&(Wd-=zx),1===dc&&0>Wd&&(Wd+=zx),[va,Wa,Xb,Wd]}function p(va,Wa){var Qa=4/3*Math.tan(Wa/4),cb=Math.cos(va),qb=Math.sin(va),dc=Math.cos(va+Wa);va=Math.sin(va+Wa);return[cb,qb,cb-qb*Qa,qb+cb*Qa,dc+va*Qa,va-dc*Qa,dc,va]}function u(va,Wa,Qa){if(!((this||Dc)instanceof u))return new u(va,Wa,Qa);(this||Dc).rx=va;(this||Dc).ry=Wa;(this||Dc).ax=Qa}function x(va){if(!((this||
Dc)instanceof x))return new x(va);va=new a(va);var Wa=va.max;for(d(va);va.index<Wa&&!va.err.length;)a:{var Qa,cb=void 0,qb=va,dc=qb.max;qb.segmentStart=qb.index;var fb=qb.path.charCodeAt(qb.index);b:{switch(32|fb){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:fb=!0;break b}fb=!1}if(fb){if(cb=Nr[qb.path[qb.index].toLowerCase()],qb.index++,d(qb),qb.data=[],cb)for(fb=!1;;){for(Qa=cb;0<Qa;Qa--){if(k(qb),qb.err.length)break a;qb.data.push(qb.param);d(qb);
fb=!1;qb.index<dc&&44===qb.path.charCodeAt(qb.index)&&(qb.index++,d(qb),fb=!0)}if(!fb){if(qb.index>=qb.max)break;Qa=qb.path.charCodeAt(qb.index);if(!(48<=Qa&&57>=Qa||43===Qa||45===Qa||46===Qa))break}}dc=qb;qb=dc.path[dc.segmentStart];cb=qb.toLowerCase();fb=dc.data;if("m"===cb&&2<fb.length&&(dc.result.push([qb,fb[0],fb[1]]),fb=fb.slice(2),cb="l",qb="m"===qb?"l":"L"),"r"===cb)dc.result.push([qb].concat(fb));else for(;fb.length>=Nr[cb]&&(dc.result.push([qb].concat(fb.splice(0,Nr[cb]))),Nr[cb]););}else qb.err=
"SvgPath: bad command "+qb.path[qb.index]+" (at pos "+qb.index+")"}va=(va.err.length?va.result=[]:va.result.length&&(0>"mM".indexOf(va.result[0][0])?(va.err="SvgPath: string should start with `M` or `m`",va.result=[]):va.result[0][0]="M"),{err:va.err,segments:va.result});(this||Dc).segments=va.segments;(this||Dc).err=va.err;(this||Dc).__stack=[]}function z(va,Wa,Qa,cb,qb,dc,fb,Xb){(this||Dc).a={x:va,y:Wa};(this||Dc).b={x:Qa,y:cb};(this||Dc).c={x:qb,y:dc};(this||Dc).d={x:fb,y:Xb};null!==fb&&void 0!==
fb&&null!==Xb&&void 0!==Xb?((this||Dc).getArcLength=fa,(this||Dc).getPoint=T,(this||Dc).getDerivative=G):((this||Dc).getArcLength=P,(this||Dc).getPoint=K,(this||Dc).getDerivative=E);this.init()}function E(va,Wa,Qa){return{x:2*(1-Qa)*(va[1]-va[0])+2*Qa*(va[2]-va[1]),y:2*(1-Qa)*(Wa[1]-Wa[0])+2*Qa*(Wa[2]-Wa[1])}}function G(va,Wa,Qa){return K([3*(va[1]-va[0]),3*(va[2]-va[1]),3*(va[3]-va[2])],[3*(Wa[1]-Wa[0]),3*(Wa[2]-Wa[1]),3*(Wa[3]-Wa[2])],Qa)}function J(va,Wa,Qa,cb,qb){for(var dc=1,fb=va/Wa,Xb=(va-
Qa(cb,qb,fb))/Wa;.001<dc;){var Jb=Qa(cb,qb,fb+Xb),Yc=Qa(cb,qb,fb-Xb);Jb=Math.abs(va-Jb)/Wa;Yc=Math.abs(va-Yc)/Wa;Jb<dc?(dc=Jb,fb+=Xb):Yc<dc?(dc=Yc,fb-=Xb):Xb/=2}return fb}function K(va,Wa,Qa){return{x:(1-Qa)*(1-Qa)*va[0]+2*(1-Qa)*Qa*va[1]+Qa*Qa*va[2],y:(1-Qa)*(1-Qa)*Wa[0]+2*(1-Qa)*Qa*Wa[1]+Qa*Qa*Wa[2]}}function T(va,Wa,Qa){return{x:(1-Qa)*(1-Qa)*(1-Qa)*va[0]+3*(1-Qa)*(1-Qa)*Qa*va[1]+3*(1-Qa)*Qa*Qa*va[2]+Qa*Qa*Qa*va[3],y:(1-Qa)*(1-Qa)*(1-Qa)*Wa[0]+3*(1-Qa)*(1-Qa)*Qa*Wa[1]+3*(1-Qa)*Qa*Qa*Wa[2]+Qa*Qa*
Qa*Wa[3]}}function P(va,Wa,Qa){void 0===Qa&&(Qa=1);var cb=va[0]-2*va[1]+va[2],qb=Wa[0]-2*Wa[1]+Wa[2],dc=2*va[1]-2*va[0],fb=2*Wa[1]-2*Wa[0],Xb=4*(cb*cb+qb*qb);if(0===Xb)return Qa*Math.sqrt(Math.pow(va[2]-va[0],2)+Math.pow(Wa[2]-Wa[0],2));va=4*(cb*dc+qb*fb)/(2*Xb);Qa+=va;dc=(dc*dc+fb*fb)/Xb-va*va;return Math.sqrt(Xb)/2*(Qa*Math.sqrt(Qa*Qa+dc)-va*Math.sqrt(va*va+dc)+dc*Math.log(Math.abs((Qa+Math.sqrt(Qa*Qa+dc))/(va+Math.sqrt(va*va+dc)))))}function da(va,Wa,Qa){var cb,qb=Qa.length-1;if(0===qb)return 0;
if(0===va){for(cb=va=0;cb<=qb;cb++)va+=WV[qb][cb]*Math.pow(1-Wa,qb-cb)*Math.pow(Wa,cb)*Qa[cb];return va}var dc=Array(qb);for(cb=0;cb<qb;cb++)dc[cb]=qb*(Qa[cb+1]-Qa[cb]);return da(va-1,Wa,dc)}function fa(va,Wa,Qa){var cb,qb;void 0===Qa&&(Qa=1);Qa/=2;for(qb=cb=0;20>qb;qb++){var dc=Qa*XV[20][qb]+Qa;var fb=YV[20][qb],Xb=Wa,Jb=dc;dc=da(1,Jb,va);Xb=da(1,Jb,Xb);cb+=fb*Math.sqrt(dc*dc+Xb*Xb)}return Qa*cb}function ka(va,Wa,Qa,cb){var qb=va*Qa+Wa*cb;return 1<qb&&(qb=1),-1>qb&&(qb=-1),(0>va*cb-Wa*Qa?-1:1)*Math.acos(qb)}
function za(va,Wa,Qa,cb,qb,dc,fb,Xb,Jb,Yc){var Pb=Yc*(va-Qa)/2+Jb*(Wa-cb)/2,Wd=-Jb*(va-Qa)/2+Yc*(Wa-cb)/2,ue=fb*fb,zf=Xb*Xb,Af=Pb*Pb,Qe=Wd*Wd,Bf=ue*zf-ue*Qe-zf*Af;0>Bf&&(Bf=0);Bf=Math.sqrt(Bf/(ue*Qe+zf*Af))*(qb===dc?-1:1);qb=Bf*fb/Xb*Wd;Bf=Bf*-Xb/fb*Pb;va=Yc*qb-Jb*Bf+(va+Qa)/2;Wa=Jb*qb+Yc*Bf+(Wa+cb)/2;cb=(Pb-qb)/fb;Jb=(Wd-Bf)/Xb;fb=(-Pb-qb)/fb;Wd=(-Wd-Bf)/Xb;Xb=ka(1,0,cb,Jb);Wd=ka(cb,Jb,fb,Wd);return 0===dc&&0<Wd&&(Wd-=Ax),1===dc&&0>Wd&&(Wd+=Ax),[va,Wa,Xb,Wd]}function Ia(va,Wa){var Qa=4/3*Math.tan(Wa/
4),cb=Math.cos(va),qb=Math.sin(va),dc=Math.cos(va+Wa);va=Math.sin(va+Wa);return[cb,qb,cb-qb*Qa,qb+cb*Qa,dc+va*Qa,va-dc*Qa,dc,va]}function N(va,Wa,Qa,cb,qb,dc,fb,Xb,Jb){var Yc=0,Pb=[],Wd=[];ZV(va,Wa,Qa,cb,qb,dc,fb,Xb,Jb).forEach(function(ue){ue=new Mo(ue[0],ue[1],ue[2],ue[3],ue[4],ue[5],ue[6],ue[7]);var zf=ue.getTotalLength();Yc+=zf;Pb.push(zf);Wd.push(ue)});(this||Dc).length=Yc;(this||Dc).partialLengths=Pb;(this||Dc).curves=Wd}function ia(va,Wa,Qa,cb){(this||Dc).x0=va;(this||Dc).x1=Wa;(this||Dc).y0=
Qa;(this||Dc).y1=cb}function W(va,Wa){return Math.sqrt((va[0]-Wa[0])*(va[0]-Wa[0])+(va[1]-Wa[1])*(va[1]-Wa[1]))}function ca(va,Wa,Qa){return[va[0]+(Wa[0]-va[0])*Qa,va[1]+(Wa[1]-va[1])*Qa]}function sa(va,Wa,Qa){var cb=va.map(function(qb,dc){return la(qb,Wa[dc])});return function(qb){var dc=cb.map(function(fb){return fb(qb)});return Qa?Ea(dc):dc}}function la(va,Wa){return function(Qa){return va.map(function(cb,qb){return cb+Qa*(Wa[qb]-cb)})}}function Aa(va){return"number"==typeof va&&isFinite(va)}function ib(va){var Wa;
a:{for(Wa=0;Wa<va.length-2;Wa++){var Qa=va[Wa],cb=va[Wa+1],qb=va[Wa+2];if(Qa[0]*(cb[1]-qb[1])+cb[0]*(qb[1]-Qa[1])+qb[0]*(Qa[1]-cb[1])){Wa=!0;break a}}Wa=!1}if(Wa){qb=-1;var dc=va.length,fb=0,Xb=0,Jb=va[dc-1];for(Wa=0;++qb<dc;)Qa=Jb,Jb=va[qb],Wa+=cb=Qa[0]*Jb[1]-Jb[0]*Qa[1],fb+=(Qa[0]+Jb[0])*cb,Xb+=(Qa[1]+Jb[1])*cb;va=(Wa*=3,[fb/Wa,Xb/Wa])}else va=[(va[0][0]+va[va.length-1][0])/2,(va[0][1]+va[va.length-1][1])/2];return va}function ob(va){return va.toString().split("M").map(function(Wa,Qa){return Wa=
Wa.trim(),Qa&&Wa?"M"+Wa:Wa}).filter(function(Wa){return Wa})}function Ea(va){return"M"+va.join("L")+"Z"}function ua(va,Wa){var Qa=va.length+Wa;Wa=bt(va)/Wa;for(var cb=0,qb=0,dc=Wa/2;va.length<Qa;){var fb=va[cb],Xb=va[(cb+1)%va.length],Jb=W(fb,Xb);dc<=qb+Jb?(va.splice(cb+1,0,Jb?ca(fb,Xb,(dc-qb)/Jb):fb.slice(0)),dc+=Wa):(qb+=Jb,cb++)}}function ya(va,Wa){var Qa;if("string"==typeof va){va=(new AM(va)).abs();a:{var cb=va.segments||[];var qb=[];if(cb.length&&"M"===cb[0][0]){for(var dc=0;dc<cb.length;dc++){var fb=
cb[dc],Xb=fb[0],Jb=fb[1];fb=fb[2];if("M"===Xb&&dc||"Z"===Xb)break;if("M"===Xb||"L"===Xb)qb.push([Jb,fb]);else if("H"===Xb)qb.push([Jb,qb[qb.length-1][1]]);else{if("V"!==Xb){cb=!1;break a}qb.push([qb[qb.length-1][0],Jb])}}cb=!!qb.length&&{ring:qb}}else cb=!1}if(!cb){qb=ob(va)[0];va=[];cb=3;if(!qb)throw new TypeError(TA);a:{if("undefined"!=typeof window&&window&&window.document)try{var Yc=window.document.createElementNS("http://www.w3.org/2000/svg","path");var Pb=(Yc.setAttributeNS(null,"d",qb),Yc);
break a}catch(Wd){}Pb=BM(qb)}Yc=Pb;Pb=Yc.getTotalLength();Wa&&Aa(Wa)&&0<Wa&&(cb=Math.max(cb,Math.ceil(Pb/Wa)));for(qb=0;qb<cb;qb++)dc=Yc.getPointAtLength(Pb*qb/cb),va.push([dc.x,dc.y]);cb={ring:va,skipBisect:!0}}Pb=cb;va=Pb.ring;cb=Pb.skipBisect}else if(!Array.isArray(va))throw new TypeError(TA);if(Qa=va.slice(0),!Sa(Qa))throw new TypeError(TA);1<Qa.length&&1E-9>W(Qa[0],Qa[Qa.length-1])&&Qa.pop();0<Ju(Qa)&&Qa.reverse();if(!cb&&Wa&&Aa(Wa)&&0<Wa)for(void 0===Wa&&(Wa=1/0),Pb=0;Pb<Qa.length;Pb++)for(Yc=
Qa[Pb],va=Pb===Qa.length-1?Qa[0]:Qa[Pb+1];W(Yc,va)>Wa;)va=ca(Yc,va,.5),Qa.splice(Pb+1,0,va);return Qa}function Sa(va){return va.every(function(Wa){return Array.isArray(Wa)&&2<=Wa.length&&Aa(Wa[0])&&Aa(Wa[1])})}function Qb(va,Wa,Qa){var cb;return cb=va.length-Wa.length,ua(va,0>cb?-1*cb:0),ua(Wa,0<cb?cb:0),Or(va,Wa),sa(va,Wa,Qa)}function mc(va,Wa,Qa){Qa=Qa||2;var cb=Wa&&Wa.length,qb=cb?Wa[0]*Qa:va.length,dc=Yb(va,0,qb,Qa,!0),fb=[];if(!dc)return fb;var Xb;if(cb){var Jb=Qa,Yc;var Pb=[];cb=0;for(Yc=Wa.length;cb<
Yc;cb++){var Wd=Wa[cb]*Jb;var ue=cb<Yc-1?Wa[cb+1]*Jb:va.length;Wd=Yb(va,Wd,ue,Jb,!1);Wd===Wd.next&&(Wd.steiner=!0);Pb.push(ta(Wd))}Pb.sort(Nb);for(cb=0;cb<Pb.length;cb++){Wa=Pb[cb];Jb=dc;if(Jb=ld(Wa,Jb))Wa=Ad(Jb,Wa),fc(Wa,Wa.next);dc=fc(dc,dc.next)}}if(va.length>80*Qa){var zf=Xb=va[0];var Af=cb=va[1];for(Jb=Qa;Jb<qb;Jb+=Qa)Pb=va[Jb],Wa=va[Jb+1],Pb<zf&&(zf=Pb),Wa<Af&&(Af=Wa),Pb>Xb&&(Xb=Pb),Wa>cb&&(cb=Wa);Xb=Math.max(Xb-zf,cb-Af)}return Jc(dc,fb,Qa,zf,Af,Xb),fb}function Yb(va,Wa,Qa,cb,qb){if(qb===0<
Fh(va,Wa,Qa,cb))for(qb=Wa;qb<Qa;qb+=cb)var dc=Mc(qb,va[qb],va[qb+1],dc);else for(qb=Qa-cb;qb>=Wa;qb-=cb)dc=Mc(qb,va[qb],va[qb+1],dc);return dc&&Cb(dc,dc.next)&&(Ue(dc),dc=dc.next),dc}function fc(va,Wa){if(!va)return va;Wa||(Wa=va);var Qa=va;do if(va=!1,Qa.steiner||!Cb(Qa,Qa.next)&&0!==Ra(Qa.prev,Qa,Qa.next))Qa=Qa.next;else{if(Ue(Qa),(Qa=Wa=Qa.prev)===Qa.next)return null;va=!0}while(va||Qa!==Wa);return Wa}function Jc(va,Wa,Qa,cb,qb,dc,fb){if(va){if(!fb&&dc){var Xb=va,Jb=Xb;do null===Jb.z&&(Jb.z=Od(Jb.x,
Jb.y,cb,qb,dc)),Jb.prevZ=Jb.prev,Jb=Jb.nextZ=Jb.next;while(Jb!==Xb);Jb.prevZ.nextZ=null;Jb.prevZ=null;Xb=Jb;var Yc,Pb,Wd,ue,zf=1;do{Jb=Xb;var Af=Xb=null;for(Wd=0;Jb;){Wd++;var Qe=Jb;for(Yc=ue=0;Yc<zf&&(ue++,Qe=Qe.nextZ);Yc++);for(Yc=zf;0<ue||0<Yc&&Qe;)0===ue?(Pb=Qe,Qe=Qe.nextZ,Yc--):0!==Yc&&Qe?Jb.z<=Qe.z?(Pb=Jb,Jb=Jb.nextZ,ue--):(Pb=Qe,Qe=Qe.nextZ,Yc--):(Pb=Jb,Jb=Jb.nextZ,ue--),Af?Af.nextZ=Pb:Xb=Pb,Pb.prevZ=Af,Af=Pb;Jb=Qe}Af.nextZ=null;zf*=2}while(1<Wd)}for(Jb=va;va.prev!==va.next;){Pb=va.prev;Xb=
va.next;if(dc)a:{Qe=va;Yc=cb;var Bf=qb,ln=dc;Af=Qe.prev;Wd=Qe;ue=Qe.next;if(0<=Ra(Af,Wd,ue))Qe=!1;else{var CM=Af.x>Wd.x?Af.x>ue.x?Af.x:ue.x:Wd.x>ue.x?Wd.x:ue.x,$V=Af.y>Wd.y?Af.y>ue.y?Af.y:ue.y:Wd.y>ue.y?Wd.y:ue.y;zf=Od(Af.x<Wd.x?Af.x<ue.x?Af.x:ue.x:Wd.x<ue.x?Wd.x:ue.x,Af.y<Wd.y?Af.y<ue.y?Af.y:ue.y:Wd.y<ue.y?Wd.y:ue.y,Yc,Bf,ln);Yc=Od(CM,$V,Yc,Bf,ln);for(Bf=Qe.nextZ;Bf&&Bf.z<=Yc;){if(Bf!==Qe.prev&&Bf!==Qe.next&&Pa(Af.x,Af.y,Wd.x,Wd.y,ue.x,ue.y,Bf.x,Bf.y)&&0<=Ra(Bf.prev,Bf,Bf.next)){Qe=!1;break a}Bf=
Bf.nextZ}for(Bf=Qe.prevZ;Bf&&Bf.z>=zf;){if(Bf!==Qe.prev&&Bf!==Qe.next&&Pa(Af.x,Af.y,Wd.x,Wd.y,ue.x,ue.y,Bf.x,Bf.y)&&0<=Ra(Bf.prev,Bf,Bf.next)){Qe=!1;break a}Bf=Bf.prevZ}Qe=!0}}else a:if(Qe=va,Af=Qe.prev,Wd=Qe,ue=Qe.next,0<=Ra(Af,Wd,ue))Qe=!1;else{for(zf=Qe.next.next;zf!==Qe.prev;){if(Pa(Af.x,Af.y,Wd.x,Wd.y,ue.x,ue.y,zf.x,zf.y)&&0<=Ra(zf.prev,zf,zf.next)){Qe=!1;break a}zf=zf.next}Qe=!0}if(Qe)Wa.push(Pb.i/Qa),Wa.push(va.i/Qa),Wa.push(Xb.i/Qa),Ue(va),Jb=va=Xb.next;else if((va=Xb)===Jb){if(fb)if(1===
fb){fb=Wa;Pb=Qa;Xb=va;do Jb=Xb.prev,Qe=Xb.next.next,!Cb(Jb,Qe)&&ec(Jb,Xb,Xb.next,Qe)&&Bd(Jb,Qe)&&Bd(Qe,Jb)&&(fb.push(Jb.i/Pb),fb.push(Xb.i/Pb),fb.push(Qe.i/Pb),Ue(Xb),Ue(Xb.next),Xb=va=Qe),Xb=Xb.next;while(Xb!==va);va=Xb;Jc(va,Wa,Qa,cb,qb,dc,2)}else{if(2===fb)a:{fb=va;do{for(Pb=fb.next.next;Pb!==fb.prev;){if(Xb=fb.i!==Pb.i){Xb=fb;Jb=Pb;if(Qe=Xb.next.i!==Jb.i&&Xb.prev.i!==Jb.i){b:{Qe=Xb;do{if(Qe.i!==Xb.i&&Qe.next.i!==Xb.i&&Qe.i!==Jb.i&&Qe.next.i!==Jb.i&&ec(Qe,Qe.next,Xb,Jb)){Qe=!0;break b}Qe=Qe.next}while(Qe!==
Xb);Qe=!1}Qe=!Qe}if(Qe=Qe&&Bd(Xb,Jb)&&Bd(Jb,Xb)){Qe=Xb;Af=!1;Wd=(Xb.x+Jb.x)/2;Jb=(Xb.y+Jb.y)/2;do Qe.y>Jb!=Qe.next.y>Jb&&Wd<(Qe.next.x-Qe.x)*(Jb-Qe.y)/(Qe.next.y-Qe.y)+Qe.x&&(Af=!Af),Qe=Qe.next;while(Qe!==Xb);Qe=Af}Xb=Qe}if(Xb){va=Ad(fb,Pb);fb=fc(fb,fb.next);va=fc(va,va.next);Jc(fb,Wa,Qa,cb,qb,dc);Jc(va,Wa,Qa,cb,qb,dc);break a}Pb=Pb.next}fb=fb.next}while(fb!==va)}}else Jc(fc(va),Wa,Qa,cb,qb,dc,1);break}}}}function Nb(va,Wa){return va.x-Wa.x}function ld(va,Wa){var Qa=Wa,cb=va.x,qb=va.y,dc=-1/0;do{if(qb<=
Qa.y&&qb>=Qa.next.y){var fb=Qa.x+(qb-Qa.y)*(Qa.next.x-Qa.x)/(Qa.next.y-Qa.y);if(fb<=cb&&fb>dc){if(dc=fb,fb===cb){if(qb===Qa.y)return Qa;if(qb===Qa.next.y)return Qa.next}var Xb=Qa.x<Qa.next.x?Qa:Qa.next}}Qa=Qa.next}while(Qa!==Wa);if(!Xb)return null;if(cb===dc)return Xb.prev;var Jb;Wa=Xb;fb=Xb.x;var Yc=Xb.y,Pb=1/0;for(Qa=Xb.next;Qa!==Wa;)cb>=Qa.x&&Qa.x>=fb&&Pa(qb<Yc?cb:dc,qb,fb,Yc,qb<Yc?dc:cb,qb,Qa.x,Qa.y)&&((Jb=Math.abs(qb-Qa.y)/(cb-Qa.x))<Pb||Jb===Pb&&Qa.x>Xb.x)&&Bd(Qa,va)&&(Xb=Qa,Pb=Jb),Qa=Qa.next;
return Xb}function Od(va,Wa,Qa,cb,qb){return va=32767*(va-Qa)/qb,Wa=32767*(Wa-cb)/qb,va=16711935&(va|va<<8),va=252645135&(va|va<<4),va=858993459&(va|va<<2),va=1431655765&(va|va<<1),Wa=16711935&(Wa|Wa<<8),Wa=252645135&(Wa|Wa<<4),Wa=858993459&(Wa|Wa<<2),Wa=1431655765&(Wa|Wa<<1),va|Wa<<1}function ta(va){var Wa=va,Qa=va;do Wa.x<Qa.x&&(Qa=Wa),Wa=Wa.next;while(Wa!==va);return Qa}function Pa(va,Wa,Qa,cb,qb,dc,fb,Xb){return 0<=(qb-fb)*(Wa-Xb)-(va-fb)*(dc-Xb)&&0<=(va-fb)*(cb-Xb)-(Qa-fb)*(Wa-Xb)&&0<=(Qa-fb)*
(dc-Xb)-(qb-fb)*(cb-Xb)}function Ra(va,Wa,Qa){return(Wa.y-va.y)*(Qa.x-Wa.x)-(Wa.x-va.x)*(Qa.y-Wa.y)}function Cb(va,Wa){return va.x===Wa.x&&va.y===Wa.y}function ec(va,Wa,Qa,cb){return!!(Cb(va,Wa)&&Cb(Qa,cb)||Cb(va,cb)&&Cb(Qa,Wa))||0<Ra(va,Wa,Qa)!=0<Ra(va,Wa,cb)&&0<Ra(Qa,cb,va)!=0<Ra(Qa,cb,Wa)}function Bd(va,Wa){return 0>Ra(va.prev,va,va.next)?0<=Ra(va,Wa,va.next)&&0<=Ra(va,va.prev,Wa):0>Ra(va,Wa,va.prev)||0>Ra(va,va.next,Wa)}function Ad(va,Wa){var Qa=new Me(va.i,va.x,va.y),cb=new Me(Wa.i,Wa.x,Wa.y),
qb=va.next,dc=Wa.prev;return va.next=Wa,Wa.prev=va,Qa.next=qb,qb.prev=Qa,cb.next=Qa,Qa.prev=cb,dc.next=cb,cb.prev=dc,cb}function Mc(va,Wa,Qa,cb){va=new Me(va,Wa,Qa);return cb?(va.next=cb.next,va.prev=cb,cb.next.prev=va,cb.next=va):(va.prev=va,va.next=va),va}function Ue(va){va.next.prev=va.prev;va.prev.next=va.next;va.prevZ&&(va.prevZ.nextZ=va.nextZ);va.nextZ&&(va.nextZ.prevZ=va.prevZ)}function Me(va,Wa,Qa){(this||Dc).i=va;(this||Dc).x=Wa;(this||Dc).y=Qa;(this||Dc).prev=null;(this||Dc).next=null;(this||
Dc).z=null;(this||Dc).prevZ=null;(this||Dc).nextZ=null;(this||Dc).steiner=!1}function Fh(va,Wa,Qa,cb){for(var qb=0,dc=Qa-cb;Wa<Qa;Wa+=cb)qb+=(va[dc]-va[Wa])*(va[Wa+1]+va[dc+1]),dc=Wa;return qb}function ch(va,Wa){var Qa=Wa.id,cb=Wa.bbox,qb=null==Wa.properties?{}:Wa.properties;va=Oi(va,Wa);return null==Qa&&null==cb?{type:"Feature",properties:qb,geometry:va}:null==cb?{type:"Feature",id:Qa,properties:qb,geometry:va}:{type:"Feature",id:Qa,bbox:cb,properties:qb,geometry:va}}function Oi(va,Wa){function Qa(Yc){return Xb(Yc)}
function cb(Yc){for(var Pb=[],Wd=0,ue=Yc.length;Wd<ue;++Wd){var zf=Yc[Wd],Af=Pb;Af.length&&Af.pop();for(var Qe=Jb[0>zf?~zf:zf],Bf=0,ln=Qe.length;Bf<ln;++Bf)Af.push(Xb(Qe[Bf],Bf));if(0>zf)for(zf=Af,Af=zf.length,Qe=Af-ln;Qe<--Af;)ln=zf[Qe],zf[Qe++]=zf[Af],zf[Af]=ln}return 2>Pb.length&&Pb.push(Pb[0]),Pb}function qb(Yc){for(Yc=cb(Yc);4>Yc.length;)Yc.push(Yc[0]);return Yc}function dc(Yc){return Yc.map(qb)}function fb(Yc){var Pb=Yc.type;switch(Pb){case "GeometryCollection":return{type:Pb,geometries:Yc.geometries.map(fb)};
case "Point":Yc=Xb(Yc.coordinates);break;case "MultiPoint":Yc=Yc.coordinates.map(Qa);break;case "LineString":Yc=cb(Yc.arcs);break;case "MultiLineString":Yc=Yc.arcs.map(cb);break;case "Polygon":Yc=dc(Yc.arcs);break;case "MultiPolygon":Yc=Yc.arcs.map(dc);break;default:return null}return{type:Pb,coordinates:Yc}}var Xb=DM(va.transform),Jb=va.arcs;return fb(Wa)}function Fi(va,Wa){function Qa(Jb){switch(Jb.type){case "GeometryCollection":Jb.geometries.forEach(Qa);break;case "Polygon":cb(Jb.arcs);break;
case "MultiPolygon":Jb.arcs.forEach(cb)}}function cb(Jb){Jb.forEach(function(Yc){Yc.forEach(function(Pb){(dc[Pb=0>Pb?~Pb:Pb]||(dc[Pb]=[])).push(Jb)})});fb.push(Jb)}function qb(Jb){Jb=Oi(va,{type:"Polygon",arcs:[Jb]}).coordinates[0];for(var Yc,Pb=-1,Wd=Jb.length,ue=Jb[Wd-1],zf=0;++Pb<Wd;)Yc=ue,ue=Jb[Pb],zf+=Yc[0]*ue[1]-Yc[1]*ue[0];return Math.abs(zf)}var dc={},fb=[],Xb=[];return Wa.forEach(Qa),fb.forEach(function(Jb){if(!Jb._){var Yc=[],Pb=[Jb];Jb._=1;for(Xb.push(Yc);Jb=Pb.pop();)Yc.push(Jb),Jb.forEach(function(Wd){Wd.forEach(function(ue){dc[0>
ue?~ue:ue].forEach(function(zf){zf._||(zf._=1,Pb.push(zf))})})})}}),fb.forEach(function(Jb){delete Jb._}),{type:"MultiPolygon",arcs:Xb.map(function(Jb){var Yc=[];if(Jb.forEach(function(Af){Af.forEach(function(Qe){Qe.forEach(function(Bf){2>dc[0>Bf?~Bf:Bf].length&&Yc.push(Bf)})})}),Yc=aW(va,Yc),1<(Jb=Yc.length))for(var Pb,Wd,ue=1,zf=qb(Yc[0]);ue<Jb;++ue)(Pb=qb(Yc[ue]))>zf&&(Wd=Yc[0],Yc[0]=Yc[ue],Yc[ue]=Wd,zf=Pb);return Yc})}}function Pi(va){return function(Wa,Qa){return Ku(va(Wa),Qa)}}function qi(va,
Wa){var Qa={},cb={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return va.forEach(function(qb){var dc=[];qb.forEach(function(fb,Xb){Xb=fb[0]<fb[1]?fb.join(","):fb[1]+","+fb[0];fb=fb.map(function(Jb){return Wa[Jb]});Xb in Qa?dc.push(~Qa[Xb]):(dc.push(Qa[Xb]=cb.arcs.length),cb.arcs.push(fb))});cb.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(Ju(qb.map(function(fb){return Wa[fb[0]]}))),arcs:[dc]})}),cb.objects.triangles.geometries.sort(function(qb,
dc){return qb.area-dc.area}),cb}function ri(va,Wa){for(var Qa=va.objects.triangles.geometries,cb=YE(function(qb){return qb.area}).left;Qa.length>Wa;)!function(){var qb=Qa[0],dc=bW(Qa)[0][0],fb=Qa[dc],Xb=Fi(va,[qb,fb]);Xb.area=qb.area+fb.area;Xb.type="Polygon";Xb.arcs=Xb.arcs[0];Qa.splice(dc,1);Qa.shift();Qa.splice(cb(Qa,Xb.area),0,Xb)}();if(Wa>Qa.length)throw new RangeError("Can't collapse topology into "+Wa+" pieces.");return Bx(va,va.objects.triangles).features.map(function(qb){return qb.geometry.coordinates[0].pop(),
qb.geometry.coordinates[0]})}function Sj(va){va=EM(va.reduce(function(qb,dc){return qb.concat([dc[0]],[dc[1]])},[]));for(var Wa=[],Qa=0,cb=va.length;Qa<cb;Qa+=3)Wa.push([[va[Qa],va[Qa+1]],[va[Qa+1],va[Qa+2]],[va[Qa+2],va[Qa]]]);return Wa}function Bi(va,Wa,Qa){function cb(fb,Xb,Jb){void 0===Xb&&(Xb=[]);void 0===Jb&&(Jb=0);for(var Yc=0;Yc<fb.length;Yc++){var Pb=fb.splice(Yc,1),Wd=Qa[Pb[0]][Xb.length];Jb+Wd<qb&&(fb.length?cb(fb.slice(),Xb.concat(Pb),Jb+Wd):(qb=Jb+Wd,dc=Xb.concat(Pb)));fb.length&&fb.splice(Yc,
0,Pb[0])}}var qb=1/0,dc=va.map(function(fb,Xb){return Xb});return cb(dc),dc}function Dj(va,Wa,Qa){void 0===Qa&&(Qa={});var cb=Qa.maxSegmentLength;void 0===cb&&(cb=10);var qb=Qa.string;void 0===qb&&(qb=!0);Qa=Qa.single;void 0===Qa&&(Qa=!1);var dc=ya(va,cb);dc.length<Wa.length+2&&ua(dc,Wa.length+2-dc.length);var fb;dc=FM(dc,Wa.length);var Xb=Wa.map(function(Jb){return ya(Jb,cb)});va="string"==typeof va&&va;return Qa&&!Wa.every(function(Jb){return"string"==typeof Jb})||(fb=Wa.slice(0)),ek(dc,Xb,{match:!0,
string:qb,single:Qa,t0:va,t1:fb})}function ek(va,Wa,Qa){void 0===Qa&&(Qa={});var cb=Qa.string,qb=Qa.single,dc=Qa.t0,fb=Qa.t1,Xb=(Qa=Qa.match)?ZE(va,Wa):va.map(function(Pb,Wd){return Wd}),Jb=Xb.map(function(Pb,Wd){return Qb(va[Pb],Wa[Wd],cb)});if(Qa&&Array.isArray(dc)&&(dc=Xb.map(function(Pb){return dc[Pb]})),qb&&cb&&(Array.isArray(dc)&&(dc=dc.join(" ")),Array.isArray(fb)&&(fb=fb.join(" "))),qb){var Yc=cb?function(Pb){return Jb.map(function(Wd){return Wd(Pb)}).join(" ")}:function(Pb){return Jb.map(function(Wd){return Wd(Pb)})};
return cb&&(dc||fb)?function(Pb){return 1E-4>Pb&&dc||1E-4>1-Pb&&fb||Yc(Pb)}:Yc}return cb?(dc=Array.isArray(dc)?dc.map(function(Pb){return"string"==typeof Pb&&Pb}):[],fb=Array.isArray(fb)?fb.map(function(Pb){return"string"==typeof Pb&&Pb}):[],Jb.map(function(Pb,Wd){return dc[Wd]||fb[Wd]?function(ue){return 1E-4>ue&&dc[Wd]||1E-4>1-ue&&fb[Wd]||Pb(ue)}:Pb})):Jb}function Ej(va,Wa,Qa,cb,qb){var dc=Gd(va,Wa,Qa),fb=va-Qa+","+Wa,Xb="A"+Qa+","+Qa+",0,1,1,";return Lu(dc,cb,"M"+fb+Xb+(va+Qa+","+Wa)+Xb+fb+"Z",
2*Math.PI*Qa,qb)}function fk(va,Wa,Qa,cb,qb,dc){var fb=Hd(va,Wa,Qa,cb),Xb=va+Qa,Jb=Wa+cb;return Lu(fb,qb,"M"+va+","+Wa+"L"+Xb+","+Wa+"L"+Xb+","+Jb+"L"+va+","+Jb+"Z",2*Qa+2*cb,dc)}function Lu(va,Wa,Qa,cb,qb){void 0===qb&&(qb={});var dc=qb.maxSegmentLength;void 0===dc&&(dc=10);qb=qb.string;void 0===qb&&(qb=!0);var fb,Xb;Wa=ya(Wa,dc);return Aa(cb)&&Wa.length<cb/dc&&ua(Wa,Math.ceil(cb/dc-Wa.length)),fb=va(Wa),Xb=sa(fb,Wa,qb),qb?function(Jb){return 1E-4>Jb?Qa:Xb(Jb)}:Xb}function Gd(va,Wa,Qa){return function(cb){var qb=
ib(cb),dc=bt(cb.concat([cb[0]])),fb=Math.atan2(cb[0][1]-qb[1],cb[0][0]-qb[0]),Xb=0;return cb.map(function(Jb,Yc){var Pb;return Yc&&(Xb+=W(Jb,cb[Yc-1])),Pb=fb+2*Math.PI*(dc?Xb/dc:Yc/cb.length),[Math.cos(Pb)*Qa+va,Math.sin(Pb)*Qa+Wa]})}}function Hd(va,Wa,Qa,cb){return function(qb){var dc=ib(qb),fb=bt(qb.concat([qb[0]]));dc=Math.atan2(qb[0][1]-dc[1],qb[0][0]-dc[0]);var Xb=0;0>dc&&(dc=2*Math.PI+dc);var Jb=dc/(2*Math.PI);return qb.map(function(Yc,Pb){Pb&&(Xb+=W(Yc,qb[Pb-1]));Yc=(Jb+(fb?Xb/fb:Pb/qb.length))%
1;Yc=.125>=Yc?[1,.5+4*Yc]:.375>=Yc?[1.5-4*Yc,1]:.625>=Yc?[0,2.5-4*Yc]:.875>=Yc?[4*Yc-2.5,0]:[1,4*Yc-3.5];return[va+Yc[0]*Qa,Wa+Yc[1]*cb]})}}var Ju=function(va){for(var Wa,Qa=-1,cb=va.length,qb=va[cb-1],dc=0;++Qa<cb;)Wa=qb,qb=va[Qa],dc+=Wa[1]*qb[0]-Wa[0]*qb[1];return dc/2},bt=function(va){var Wa=-1,Qa=va.length,cb=va[Qa-1],qb=cb[0];cb=cb[1];for(var dc=0;++Wa<Qa;){var fb=qb;var Xb=cb;cb=va[Wa];qb=cb[0];cb=cb[1];fb-=qb;Xb-=cb;dc+=Math.sqrt(fb*fb+Xb*Xb)}return dc},Nr={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,
t:2,v:1,z:0},yx=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];b.prototype.matrix=function(va){return 1===va[0]&&0===va[1]&&0===va[2]&&1===va[3]&&0===va[4]&&0===va[5]?this||Dc:((this||Dc).cache=null,(this||Dc).queue.push(va),this||Dc)};b.prototype.translate=function(va,Wa){return 0===va&&0===Wa||((this||Dc).cache=null,(this||Dc).queue.push([1,0,0,1,va,Wa])),this||Dc};b.prototype.scale=function(va,Wa){return 1===va&&1===Wa||((this||Dc).cache=null,(this||Dc).queue.push([va,
0,0,Wa,0,0])),this||Dc};b.prototype.rotate=function(va,Wa,Qa){var cb,qb,dc;return 0!==va&&(this.translate(Wa,Qa),cb=va*Math.PI/180,qb=Math.cos(cb),dc=Math.sin(cb),(this||Dc).queue.push([qb,dc,-dc,qb,0,0]),(this||Dc).cache=null,this.translate(-Wa,-Qa)),this||Dc};b.prototype.skewX=function(va){return 0!==va&&((this||Dc).cache=null,(this||Dc).queue.push([1,0,Math.tan(va*Math.PI/180),1,0,0])),this||Dc};b.prototype.skewY=function(va){return 0!==va&&((this||Dc).cache=null,(this||Dc).queue.push([1,Math.tan(va*
Math.PI/180),0,1,0,0])),this||Dc};b.prototype.toArray=function(){var va=this||Dc;if((this||Dc).cache)return(this||Dc).cache;if(!(this||Dc).queue.length)return(this||Dc).cache=[1,0,0,1,0,0],(this||Dc).cache;if((this||Dc).cache=(this||Dc).queue[0],1===(this||Dc).queue.length)return(this||Dc).cache;for(var Wa=1;Wa<(this||Dc).queue.length;Wa++){var Qa=va.cache,cb=va.queue[Wa];va.cache=[Qa[0]*cb[0]+Qa[2]*cb[1],Qa[1]*cb[0]+Qa[3]*cb[1],Qa[0]*cb[2]+Qa[2]*cb[3],Qa[1]*cb[2]+Qa[3]*cb[3],Qa[0]*cb[4]+Qa[2]*cb[5]+
Qa[4],Qa[1]*cb[4]+Qa[3]*cb[5]+Qa[5]]}return(this||Dc).cache};b.prototype.calc=function(va,Wa,Qa){var cb;return(this||Dc).queue.length?((this||Dc).cache||((this||Dc).cache=this.toArray()),cb=(this||Dc).cache,[va*cb[0]+Wa*cb[2]+(Qa?0:cb[4]),va*cb[1]+Wa*cb[3]+(Qa?0:cb[5])]):[va,Wa]};var Cx={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},Dx=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,Ex=/[\s,]+/,Fx=function(va){var Wa,Qa,cb=new b;return va.split(Dx).forEach(function(qb){if(qb.length){if(void 0!==
Cx[qb])return void(Wa=qb);switch(Qa=qb.split(Ex).map(function(dc){return+dc||0}),Wa){case "matrix":return void(6===Qa.length&&cb.matrix(Qa));case "scale":return void(1===Qa.length?cb.scale(Qa[0],Qa[0]):2===Qa.length&&cb.scale(Qa[0],Qa[1]));case "rotate":return void(1===Qa.length?cb.rotate(Qa[0],0,0):3===Qa.length&&cb.rotate(Qa[0],Qa[1],Qa[2]));case "translate":return void(1===Qa.length?cb.translate(Qa[0],0):2===Qa.length&&cb.translate(Qa[0],Qa[1]));case "skewX":return void(1===Qa.length&&cb.skewX(Qa[0]));
case "skewY":return void(1===Qa.length&&cb.skewY(Qa[0]))}}}),cb},zx=2*Math.PI,cW=function(va,Wa,Qa,cb,qb,dc,fb,Xb,Jb){var Yc=Math.sin(Jb*zx/360),Pb=Math.cos(Jb*zx/360);Jb=Pb*(va-Qa)/2+Yc*(Wa-cb)/2;var Wd=-Yc*(va-Qa)/2+Pb*(Wa-cb)/2;if(0===Jb&&0===Wd||0===fb||0===Xb)return[];fb=Math.abs(fb);Xb=Math.abs(Xb);Jb=Jb*Jb/(fb*fb)+Wd*Wd/(Xb*Xb);1<Jb&&(fb*=Math.sqrt(Jb),Xb*=Math.sqrt(Jb));var ue=l(va,Wa,Qa,cb,qb,dc,fb,Xb,Yc,Pb);va=[];Wa=ue[2];Qa=ue[3];cb=Math.max(Math.ceil(Math.abs(Qa)/(zx/4)),1);Qa/=cb;for(qb=
0;qb<cb;qb++)va.push(p(Wa,Qa)),Wa+=Qa;return va.map(function(zf){for(var Af=0;Af<zf.length;Af+=2){var Qe=zf[Af+0],Bf=zf[Af+1];Qe*=fb;Bf*=Xb;var ln=Yc*Qe+Pb*Bf;zf[Af+0]=Pb*Qe-Yc*Bf+ue[0];zf[Af+1]=ln+ue[1]}return zf})},GM=Math.PI/180;u.prototype.transform=function(va){var Wa=Math.cos((this||Dc).ax*GM),Qa=Math.sin((this||Dc).ax*GM),cb=[(this||Dc).rx*(va[0]*Wa+va[2]*Qa),(this||Dc).rx*(va[1]*Wa+va[3]*Qa),(this||Dc).ry*(-va[0]*Qa+va[2]*Wa),(this||Dc).ry*(-va[1]*Qa+va[3]*Wa)];va=cb[0]*cb[0]+cb[2]*cb[2];
Wa=cb[1]*cb[1]+cb[3]*cb[3];Qa=((cb[0]-cb[3])*(cb[0]-cb[3])+(cb[2]+cb[1])*(cb[2]+cb[1]))*((cb[0]+cb[3])*(cb[0]+cb[3])+(cb[2]-cb[1])*(cb[2]-cb[1]));var qb=(va+Wa)/2;if(Qa<1E-10*qb)return(this||Dc).rx=(this||Dc).ry=Math.sqrt(qb),(this||Dc).ax=0,this||Dc;cb=cb[0]*cb[1]+cb[2]*cb[3];Qa=Math.sqrt(Qa);var dc=qb+Qa/2;Qa=qb-Qa/2;return(this||Dc).ax=1E-10>Math.abs(cb)&&1E-10>Math.abs(dc-Wa)?90:180*Math.atan(Math.abs(cb)>Math.abs(dc-Wa)?(dc-va)/cb:cb/(dc-Wa))/Math.PI,0<=(this||Dc).ax?((this||Dc).rx=Math.sqrt(dc),
(this||Dc).ry=Math.sqrt(Qa)):((this||Dc).ax+=90,(this||Dc).rx=Math.sqrt(Qa),(this||Dc).ry=Math.sqrt(dc)),this||Dc};u.prototype.isDegenerate=function(){return(this||Dc).rx<1E-10*(this||Dc).ry||(this||Dc).ry<1E-10*(this||Dc).rx};x.prototype.__matrix=function(va){var Wa,Qa=this||Dc;va.queue.length&&this.iterate(function(cb,qb,dc,fb){switch(cb[0]){case "v":var Xb=va.calc(0,cb[1],!0);dc=0===Xb[0]?["v",Xb[1]]:["l",Xb[0],Xb[1]];break;case "V":Xb=va.calc(dc,cb[1],!1);dc=Xb[0]===va.calc(dc,fb,!1)[0]?["V",
Xb[1]]:["L",Xb[0],Xb[1]];break;case "h":Xb=va.calc(cb[1],0,!0);dc=0===Xb[1]?["h",Xb[0]]:["l",Xb[0],Xb[1]];break;case "H":Xb=va.calc(cb[1],fb,!1);dc=Xb[1]===va.calc(dc,fb,!1)[1]?["H",Xb[0]]:["L",Xb[0],Xb[1]];break;case "a":case "A":Xb=va.toArray();var Jb=u(cb[1],cb[2],cb[3]).transform(Xb);if(0>Xb[0]*Xb[3]-Xb[1]*Xb[2]&&(cb[5]=cb[5]?"0":"1"),Xb=va.calc(cb[6],cb[7],"a"===cb[0]),"A"===cb[0]&&cb[6]===dc&&cb[7]===fb||"a"===cb[0]&&0===cb[6]&&0===cb[7]){dc=["a"===cb[0]?"l":"L",Xb[0],Xb[1]];break}dc=Jb.isDegenerate()?
["a"===cb[0]?"l":"L",Xb[0],Xb[1]]:[cb[0],Jb.rx,Jb.ry,Jb.ax,cb[4],cb[5],Xb[0],Xb[1]];break;case "m":Xb=va.calc(cb[1],cb[2],0<qb);dc=["m",Xb[0],Xb[1]];break;default:for(Xb=cb[0],dc=[Xb],fb=Xb.toLowerCase()===Xb,Wa=1;Wa<cb.length;Wa+=2)Xb=va.calc(cb[Wa],cb[Wa+1],fb),dc.push(Xb[0],Xb[1])}Qa.segments[qb]=dc},!0)};x.prototype.__evaluateStack=function(){var va,Wa=this||Dc;if((this||Dc).__stack.length){if(1===(this||Dc).__stack.length)return this.__matrix((this||Dc).__stack[0]),void((this||Dc).__stack=[]);
var Qa=b();for(va=(this||Dc).__stack.length;0<=--va;)Qa.matrix(Wa.__stack[va].toArray());this.__matrix(Qa);(this||Dc).__stack=[]}};x.prototype.toString=function(){var va=this||Dc,Wa=[];this.__evaluateStack();for(var Qa=0;Qa<(this||Dc).segments.length;Qa++){var cb=va.segments[Qa][0];cb=0<Qa&&"m"!==cb&&"M"!==cb&&cb===va.segments[Qa-1][0];Wa=Wa.concat(cb?va.segments[Qa].slice(1):va.segments[Qa])}return Wa.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")};x.prototype.translate=
function(va,Wa){return(this||Dc).__stack.push(b().translate(va,Wa||0)),this||Dc};x.prototype.scale=function(va,Wa){return(this||Dc).__stack.push(b().scale(va,Wa||0===Wa?Wa:va)),this||Dc};x.prototype.rotate=function(va,Wa,Qa){return(this||Dc).__stack.push(b().rotate(va,Wa||0,Qa||0)),this||Dc};x.prototype.skewX=function(va){return(this||Dc).__stack.push(b().skewX(va)),this||Dc};x.prototype.skewY=function(va){return(this||Dc).__stack.push(b().skewY(va)),this||Dc};x.prototype.matrix=function(va){return(this||
Dc).__stack.push(b().matrix(va)),this||Dc};x.prototype.transform=function(va){return va.trim()?((this||Dc).__stack.push(Fx(va)),this||Dc):this||Dc};x.prototype.round=function(va){var Wa,Qa=0,cb=0,qb=0,dc=0;return va=va||0,this.__evaluateStack(),(this||Dc).segments.forEach(function(fb){var Xb=fb[0].toLowerCase()===fb[0];switch(fb[0]){case "H":case "h":return Xb&&(fb[1]+=qb),qb=fb[1]-fb[1].toFixed(va),void(fb[1]=+fb[1].toFixed(va));case "V":case "v":return Xb&&(fb[1]+=dc),dc=fb[1]-fb[1].toFixed(va),
void(fb[1]=+fb[1].toFixed(va));case "Z":case "z":return qb=Qa,void(dc=cb);case "M":case "m":return Xb&&(fb[1]+=qb,fb[2]+=dc),qb=fb[1]-fb[1].toFixed(va),dc=fb[2]-fb[2].toFixed(va),Qa=qb,cb=dc,fb[1]=+fb[1].toFixed(va),void(fb[2]=+fb[2].toFixed(va));case "A":case "a":return Xb&&(fb[6]+=qb,fb[7]+=dc),qb=fb[6]-fb[6].toFixed(va),dc=fb[7]-fb[7].toFixed(va),fb[1]=+fb[1].toFixed(va),fb[2]=+fb[2].toFixed(va),fb[3]=+fb[3].toFixed(va+2),fb[6]=+fb[6].toFixed(va),void(fb[7]=+fb[7].toFixed(va));default:return Wa=
fb.length,Xb&&(fb[Wa-2]+=qb,fb[Wa-1]+=dc),qb=fb[Wa-2]-fb[Wa-2].toFixed(va),dc=fb[Wa-1]-fb[Wa-1].toFixed(va),void fb.forEach(function(Jb,Yc){Yc&&(fb[Yc]=+fb[Yc].toFixed(va))})}}),this||Dc};x.prototype.iterate=function(va,Wa){var Qa,cb=(this||Dc).segments,qb={},dc=!1,fb=0,Xb=0,Jb=0,Yc=0;if(Wa||this.__evaluateStack(),cb.forEach(function(Wd,ue){var zf=va(Wd,ue,fb,Xb);Array.isArray(zf)&&(qb[ue]=zf,dc=!0);ue=Wd[0]===Wd[0].toLowerCase();switch(Wd[0]){case "m":case "M":return fb=Wd[1]+(ue?fb:0),Xb=Wd[2]+
(ue?Xb:0),Jb=fb,void(Yc=Xb);case "h":case "H":return void(fb=Wd[1]+(ue?fb:0));case "v":case "V":return void(Xb=Wd[1]+(ue?Xb:0));case "z":case "Z":return fb=Jb,void(Xb=Yc);default:fb=Wd[Wd.length-2]+(ue?fb:0),Xb=Wd[Wd.length-1]+(ue?Xb:0)}}),!dc)return this||Dc;var Pb=[];for(Wa=0;Wa<cb.length;Wa++)if(void 0!==qb[Wa])for(Qa=0;Qa<qb[Wa].length;Qa++)Pb.push(qb[Wa][Qa]);else Pb.push(cb[Wa]);return(this||Dc).segments=Pb,this||Dc};x.prototype.abs=function(){return this.iterate(function(va,Wa,Qa,cb){Wa=va[0];
var qb=Wa.toUpperCase();if(Wa!==qb)switch(va[0]=qb,Wa){case "v":return void(va[1]+=cb);case "a":return va[6]+=Qa,void(va[7]+=cb);default:for(Wa=1;Wa<va.length;Wa++)va[Wa]+=Wa%2?Qa:cb}},!0),this||Dc};x.prototype.rel=function(){return this.iterate(function(va,Wa,Qa,cb){var qb=va[0],dc=qb.toLowerCase();if(qb!==dc&&(0!==Wa||"M"!==qb))switch(va[0]=dc,qb){case "V":return void(va[1]-=cb);case "A":return va[6]-=Qa,void(va[7]-=cb);default:for(Wa=1;Wa<va.length;Wa++)va[Wa]-=Wa%2?Qa:cb}},!0),this||Dc};x.prototype.unarc=
function(){return this.iterate(function(va,Wa,Qa,cb){var qb,dc,fb,Xb=[];Wa=va[0];return"A"!==Wa&&"a"!==Wa?null:("a"===Wa?(dc=Qa+va[6],fb=cb+va[7]):(dc=va[6],fb=va[7]),qb=cW(Qa,cb,dc,fb,va[4],va[5],va[1],va[2],va[3]),0===qb.length?[["a"===va[0]?"l":"L",va[6],va[7]]]:(qb.forEach(function(Jb){Xb.push(["C",Jb[2],Jb[3],Jb[4],Jb[5],Jb[6],Jb[7]])}),Xb))}),this||Dc};x.prototype.unshort=function(){var va,Wa,Qa,cb,qb,dc=(this||Dc).segments;return this.iterate(function(fb,Xb,Jb,Yc){var Pb,Wd=fb[0],ue=Wd.toUpperCase();
Xb&&("T"===ue?(Pb="t"===Wd,Qa=dc[Xb-1],"Q"===Qa[0]?(va=Qa[1]-Jb,Wa=Qa[2]-Yc):"q"===Qa[0]?(va=Qa[1]-Qa[3],Wa=Qa[2]-Qa[4]):(va=0,Wa=0),cb=-va,qb=-Wa,Pb||(cb+=Jb,qb+=Yc),dc[Xb]=[Pb?"q":"Q",cb,qb,fb[1],fb[2]]):"S"===ue&&(Pb="s"===Wd,Qa=dc[Xb-1],"C"===Qa[0]?(va=Qa[3]-Jb,Wa=Qa[4]-Yc):"c"===Qa[0]?(va=Qa[3]-Qa[5],Wa=Qa[4]-Qa[6]):(va=0,Wa=0),cb=-va,qb=-Wa,Pb||(cb+=Jb,qb+=Yc),dc[Xb]=[Pb?"c":"C",cb,qb,fb[1],fb[2],fb[3],fb[4]]))}),this||Dc};var AM=x,$E={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},dW=/([astvzqmhlc])([^astvzqmhlc]*)/gi,
fW=function(va){var Wa=[];return va.replace(dW,function(Qa,cb,qb){Qa=cb.toLowerCase();qb=(qb=qb.match(eW))?qb.map(Number):[];for("m"===Qa&&2<qb.length&&(Wa.push([cb].concat(qb.splice(0,2))),Qa="l",cb="m"===cb?"l":"L");0<=qb.length;){if(qb.length===$E[Qa])return qb.unshift(cb),Wa.push(qb);if(qb.length<$E[Qa])throw Error("malformed path data");Wa.push([cb].concat(qb.splice(0,$E[Qa])))}}),Wa},eW=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,Mo=function(va,Wa,Qa,cb,qb,dc,fb,Xb){return new z(va,Wa,Qa,cb,qb,dc,fb,
Xb)};z.prototype={constructor:z,init:function(){(this||Dc).length=this.getArcLength([(this||Dc).a.x,(this||Dc).b.x,(this||Dc).c.x,(this||Dc).d.x],[(this||Dc).a.y,(this||Dc).b.y,(this||Dc).c.y,(this||Dc).d.y])},getTotalLength:function(){return(this||Dc).length},getPointAtLength:function(va){va=J(va,(this||Dc).length,(this||Dc).getArcLength,[(this||Dc).a.x,(this||Dc).b.x,(this||Dc).c.x,(this||Dc).d.x],[(this||Dc).a.y,(this||Dc).b.y,(this||Dc).c.y,(this||Dc).d.y]);return this.getPoint([(this||Dc).a.x,
(this||Dc).b.x,(this||Dc).c.x,(this||Dc).d.x],[(this||Dc).a.y,(this||Dc).b.y,(this||Dc).c.y,(this||Dc).d.y],va)},getTangentAtLength:function(va){va=J(va,(this||Dc).length,(this||Dc).getArcLength,[(this||Dc).a.x,(this||Dc).b.x,(this||Dc).c.x,(this||Dc).d.x],[(this||Dc).a.y,(this||Dc).b.y,(this||Dc).c.y,(this||Dc).d.y]);va=this.getDerivative([(this||Dc).a.x,(this||Dc).b.x,(this||Dc).c.x,(this||Dc).d.x],[(this||Dc).a.y,(this||Dc).b.y,(this||Dc).c.y,(this||Dc).d.y],va);var Wa=Math.sqrt(va.x*va.x+va.y*
va.y);return 0<Wa?{x:va.x/Wa,y:va.y/Wa}:{x:0,y:0}},getPropertiesAtLength:function(va){va=J(va,(this||Dc).length,(this||Dc).getArcLength,[(this||Dc).a.x,(this||Dc).b.x,(this||Dc).c.x,(this||Dc).d.x],[(this||Dc).a.y,(this||Dc).b.y,(this||Dc).c.y,(this||Dc).d.y]);var Wa=this.getDerivative([(this||Dc).a.x,(this||Dc).b.x,(this||Dc).c.x,(this||Dc).d.x],[(this||Dc).a.y,(this||Dc).b.y,(this||Dc).c.y,(this||Dc).d.y],va);var Qa=Math.sqrt(Wa.x*Wa.x+Wa.y*Wa.y);Wa=0<Qa?{x:Wa.x/Qa,y:Wa.y/Qa}:{x:0,y:0};va=this.getPoint([(this||
Dc).a.x,(this||Dc).b.x,(this||Dc).c.x,(this||Dc).d.x],[(this||Dc).a.y,(this||Dc).b.y,(this||Dc).c.y,(this||Dc).d.y],va);return{x:va.x,y:va.y,tangentX:Wa.x,tangentY:Wa.y}}};var XV=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,
.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,
-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,
.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],
[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,
.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,
-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,
.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,
-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,
.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,
-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,
.9951872199970213]],YV=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],
[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],
[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,
.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,
.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],
[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,
.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],
[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,
.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,
.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,
.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,
.0123412297999872,.0123412297999872]],WV=[[1],[1,1],[1,2,1],[1,3,3,1]],Ax=2*Math.PI,ZV=function(va,Wa,Qa,cb,qb,dc,fb,Xb,Jb){var Yc=Math.sin(qb*Ax/360),Pb=Math.cos(qb*Ax/360);qb=Pb*(va-Xb)/2+Yc*(Wa-Jb)/2;var Wd=-Yc*(va-Xb)/2+Pb*(Wa-Jb)/2;if(0===qb&&0===Wd||0===Qa||0===cb)return[];Qa=Math.abs(Qa);cb=Math.abs(cb);qb=qb*qb/(Qa*Qa)+Wd*Wd/(cb*cb);1<qb&&(Qa*=Math.sqrt(qb),cb*=Math.sqrt(qb));var ue=za(va,Wa,Xb,Jb,dc,fb,Qa,cb,Yc,Pb);va=[];Wa=ue[2];dc=ue[3];fb=Math.max(Math.ceil(Math.abs(dc)/(Ax/4)),1);dc/=
fb;for(Xb=0;Xb<fb;Xb++)va.push(Ia(Wa,dc)),Wa+=dc;return va.map(function(zf){for(var Af=0;Af<zf.length;Af+=2){var Qe=zf[Af+0],Bf=zf[Af+1];Qe*=Qa;Bf*=cb;var ln=Yc*Qe+Pb*Bf;zf[Af+0]=Pb*Qe-Yc*Bf+ue[0];zf[Af+1]=ln+ue[1]}return zf})},HM=function(va,Wa,Qa,cb,qb,dc,fb,Xb,Jb){return new N(va,Wa,Qa,cb,qb,dc,fb,Xb,Jb)};N.prototype={constructor:N,init:function(){},getTotalLength:function(){return(this||Dc).length},getPointAtLength:function(va){var Wa=this||Dc;0>va?va=0:va>(this||Dc).length&&(va=(this||Dc).length);
for(var Qa=(this||Dc).partialLengths.length-1;(this||Dc).partialLengths[Qa]>=va&&0<(this||Dc).partialLengths[Qa];)Qa--;Qa<(this||Dc).partialLengths.length-1&&Qa++;for(var cb=0,qb=0;qb<Qa;qb++)cb+=Wa.partialLengths[qb];return(this||Dc).curves[Qa].getPointAtLength(va-cb)},getTangentAtLength:function(va){var Wa=this||Dc;0>va?va=0:va>(this||Dc).length&&(va=(this||Dc).length);for(var Qa=(this||Dc).partialLengths.length-1;(this||Dc).partialLengths[Qa]>=va&&0<(this||Dc).partialLengths[Qa];)Qa--;Qa<(this||
Dc).partialLengths.length-1&&Qa++;for(var cb=0,qb=0;qb<Qa;qb++)cb+=Wa.partialLengths[qb];return(this||Dc).curves[Qa].getTangentAtLength(va-cb)},getPropertiesAtLength:function(va){var Wa=this.getTangentAtLength(va);va=this.getPointAtLength(va);return{x:va.x,y:va.y,tangentX:Wa.x,tangentY:Wa.y}}};var zq=function(va,Wa,Qa,cb){return new ia(va,Wa,Qa,cb)};ia.prototype.getTotalLength=function(){return Math.sqrt(Math.pow((this||Dc).x0-(this||Dc).x1,2)+Math.pow((this||Dc).y0-(this||Dc).y1,2))};ia.prototype.getPointAtLength=
function(va){va/=Math.sqrt(Math.pow((this||Dc).x0-(this||Dc).x1,2)+Math.pow((this||Dc).y0-(this||Dc).y1,2));return{x:(this||Dc).x0+((this||Dc).x1-(this||Dc).x0)*va,y:(this||Dc).y0+((this||Dc).y1-(this||Dc).y0)*va}};ia.prototype.getTangentAtLength=function(){var va=Math.sqrt(((this||Dc).x1-(this||Dc).x0)*((this||Dc).x1-(this||Dc).x0)+((this||Dc).y1-(this||Dc).y0)*((this||Dc).y1-(this||Dc).y0));return{x:((this||Dc).x1-(this||Dc).x0)/va,y:((this||Dc).y1-(this||Dc).y0)/va}};ia.prototype.getPropertiesAtLength=
function(va){va=this.getPointAtLength(va);var Wa=this.getTangentAtLength();return{x:va.x,y:va.y,tangentX:Wa.x,tangentY:Wa.y}};var BM=function(va){function Wa(fb){if(!fb)return null;var Xb;fb=fW(fb);for(var Jb=[0,0],Yc=[0,0],Pb=0;Pb<fb.length;Pb++)"M"===fb[Pb][0]?(Jb=[fb[Pb][1],fb[Pb][2]],qb.push(null)):"m"===fb[Pb][0]?(Jb=[fb[Pb][1]+Jb[0],fb[Pb][2]+Jb[1]],qb.push(null)):"L"===fb[Pb][0]?(Qa+=Math.sqrt(Math.pow(Jb[0]-fb[Pb][1],2)+Math.pow(Jb[1]-fb[Pb][2],2)),qb.push(new zq(Jb[0],fb[Pb][1],Jb[1],fb[Pb][2])),
Jb=[fb[Pb][1],fb[Pb][2]]):"l"===fb[Pb][0]?(Qa+=Math.sqrt(Math.pow(fb[Pb][1],2)+Math.pow(fb[Pb][2],2)),qb.push(new zq(Jb[0],fb[Pb][1]+Jb[0],Jb[1],fb[Pb][2]+Jb[1])),Jb=[fb[Pb][1]+Jb[0],fb[Pb][2]+Jb[1]]):"H"===fb[Pb][0]?(Qa+=Math.abs(Jb[0]-fb[Pb][1]),qb.push(new zq(Jb[0],fb[Pb][1],Jb[1],Jb[1])),Jb[0]=fb[Pb][1]):"h"===fb[Pb][0]?(Qa+=Math.abs(fb[Pb][1]),qb.push(new zq(Jb[0],Jb[0]+fb[Pb][1],Jb[1],Jb[1])),Jb[0]=fb[Pb][1]+Jb[0]):"V"===fb[Pb][0]?(Qa+=Math.abs(Jb[1]-fb[Pb][1]),qb.push(new zq(Jb[0],Jb[0],Jb[1],
fb[Pb][1])),Jb[1]=fb[Pb][1]):"v"===fb[Pb][0]?(Qa+=Math.abs(fb[Pb][1]),qb.push(new zq(Jb[0],Jb[0],Jb[1],Jb[1]+fb[Pb][1])),Jb[1]=fb[Pb][1]+Jb[1]):"z"===fb[Pb][0]||"Z"===fb[Pb][0]?(Qa+=Math.sqrt(Math.pow(fb[0][1]-Jb[0],2)+Math.pow(fb[0][2]-Jb[1],2)),qb.push(new zq(Jb[0],fb[0][1],Jb[1],fb[0][2])),Jb=[fb[0][1],fb[0][2]]):"C"===fb[Pb][0]?(Xb=new Mo(Jb[0],Jb[1],fb[Pb][1],fb[Pb][2],fb[Pb][3],fb[Pb][4],fb[Pb][5],fb[Pb][6]),Qa+=Xb.getTotalLength(),Jb=[fb[Pb][5],fb[Pb][6]],qb.push(Xb)):"c"===fb[Pb][0]?(Xb=new Mo(Jb[0],
Jb[1],Jb[0]+fb[Pb][1],Jb[1]+fb[Pb][2],Jb[0]+fb[Pb][3],Jb[1]+fb[Pb][4],Jb[0]+fb[Pb][5],Jb[1]+fb[Pb][6]),Qa+=Xb.getTotalLength(),Jb=[fb[Pb][5]+Jb[0],fb[Pb][6]+Jb[1]],qb.push(Xb)):"S"===fb[Pb][0]?(Xb=0<Pb&&-1<["C","c","S","s"].indexOf(fb[Pb-1][0])?new Mo(Jb[0],Jb[1],2*Jb[0]-fb[Pb-1][fb[Pb-1].length-4],2*Jb[1]-fb[Pb-1][fb[Pb-1].length-3],fb[Pb][1],fb[Pb][2],fb[Pb][3],fb[Pb][4]):new Mo(Jb[0],Jb[1],Jb[0],Jb[1],fb[Pb][1],fb[Pb][2],fb[Pb][3],fb[Pb][4]),Qa+=Xb.getTotalLength(),Jb=[fb[Pb][3],fb[Pb][4]],qb.push(Xb)):
"s"===fb[Pb][0]?(Xb=0<Pb&&-1<["C","c","S","s"].indexOf(fb[Pb-1][0])?new Mo(Jb[0],Jb[1],Jb[0]+Xb.d.x-Xb.c.x,Jb[1]+Xb.d.y-Xb.c.y,Jb[0]+fb[Pb][1],Jb[1]+fb[Pb][2],Jb[0]+fb[Pb][3],Jb[1]+fb[Pb][4]):new Mo(Jb[0],Jb[1],Jb[0],Jb[1],Jb[0]+fb[Pb][1],Jb[1]+fb[Pb][2],Jb[0]+fb[Pb][3],Jb[1]+fb[Pb][4]),Qa+=Xb.getTotalLength(),Jb=[fb[Pb][3]+Jb[0],fb[Pb][4]+Jb[1]],qb.push(Xb)):"Q"===fb[Pb][0]?(Xb=new Mo(Jb[0],Jb[1],fb[Pb][1],fb[Pb][2],fb[Pb][3],fb[Pb][4]),Qa+=Xb.getTotalLength(),qb.push(Xb),Jb=[fb[Pb][3],fb[Pb][4]],
Yc=[fb[Pb][1],fb[Pb][2]]):"q"===fb[Pb][0]?(Xb=new Mo(Jb[0],Jb[1],Jb[0]+fb[Pb][1],Jb[1]+fb[Pb][2],Jb[0]+fb[Pb][3],Jb[1]+fb[Pb][4]),Qa+=Xb.getTotalLength(),Yc=[Jb[0]+fb[Pb][1],Jb[1]+fb[Pb][2]],Jb=[fb[Pb][3]+Jb[0],fb[Pb][4]+Jb[1]],qb.push(Xb)):"T"===fb[Pb][0]?(Xb=0<Pb&&-1<["Q","q","T","t"].indexOf(fb[Pb-1][0])?new Mo(Jb[0],Jb[1],2*Jb[0]-Yc[0],2*Jb[1]-Yc[1],fb[Pb][1],fb[Pb][2]):new zq(Jb[0],fb[Pb][1],Jb[1],fb[Pb][2]),qb.push(Xb),Qa+=Xb.getTotalLength(),Yc=[2*Jb[0]-Yc[0],2*Jb[1]-Yc[1]],Jb=[fb[Pb][1],fb[Pb][2]]):
"t"===fb[Pb][0]?(Xb=0<Pb&&-1<["Q","q","T","t"].indexOf(fb[Pb-1][0])?new Mo(Jb[0],Jb[1],2*Jb[0]-Yc[0],2*Jb[1]-Yc[1],Jb[0]+fb[Pb][1],Jb[1]+fb[Pb][2]):new zq(Jb[0],Jb[0]+fb[Pb][1],Jb[1],Jb[1]+fb[Pb][2]),Qa+=Xb.getTotalLength(),Yc=[2*Jb[0]-Yc[0],2*Jb[1]-Yc[1]],Jb=[fb[Pb][1]+Jb[0],fb[Pb][2]+Jb[0]],qb.push(Xb)):"A"===fb[Pb][0]?(Xb=new HM(Jb[0],Jb[1],fb[Pb][1],fb[Pb][2],fb[Pb][3],fb[Pb][4],fb[Pb][5],fb[Pb][6],fb[Pb][7]),Qa+=Xb.getTotalLength(),Jb=[fb[Pb][6],fb[Pb][7]],qb.push(Xb)):"a"===fb[Pb][0]&&(Xb=new HM(Jb[0],
Jb[1],fb[Pb][1],fb[Pb][2],fb[Pb][3],fb[Pb][4],fb[Pb][5],Jb[0]+fb[Pb][6],Jb[1]+fb[Pb][7]),Qa+=Xb.getTotalLength(),Jb=[Jb[0]+fb[Pb][6],Jb[1]+fb[Pb][7]],qb.push(Xb)),cb.push(Qa);return Wa}var Qa=0,cb=[],qb=[];Wa.getTotalLength=function(){return Qa};Wa.getPointAtLength=function(fb){fb=dc(fb);return qb[fb.i].getPointAtLength(fb.fraction)};Wa.getTangentAtLength=function(fb){fb=dc(fb);return qb[fb.i].getTangentAtLength(fb.fraction)};Wa.getPropertiesAtLength=function(fb){fb=dc(fb);return qb[fb.i].getPropertiesAtLength(fb.fraction)};
var dc=function(fb){0>fb?fb=0:fb>Qa&&(fb=Qa);for(var Xb=cb.length-1;cb[Xb]>=fb&&0<cb[Xb];)Xb--;return Xb++,{fraction:fb-cb[Xb-1],i:Xb}};return Wa(va)},TA='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n',Or=function(va,Wa){for(var Qa,cb,qb,dc=va.length,fb=1/0,Xb=0;Xb<dc;Xb++)!function(Jb){cb=0;Wa.forEach(function(Yc,
Pb){Yc=W(va[(Jb+Pb)%dc],Yc);cb+=Yc*Yc});cb<fb&&(fb=cb,Qa=Jb)}(Xb);Qa&&(qb=va.splice(0,Qa),va.splice.apply(va,[va.length,0].concat(qb)))},EM=mc;mc.deviation=function(va,Wa,Qa,cb){var qb=Wa&&Wa.length,dc=Math.abs(Fh(va,0,qb?Wa[0]*Qa:va.length,Qa));if(qb){qb=0;for(var fb=Wa.length;qb<fb;qb++)dc-=Math.abs(Fh(va,Wa[qb]*Qa,qb<fb-1?Wa[qb+1]*Qa:va.length,Qa))}for(qb=Wa=0;qb<cb.length;qb+=3){fb=cb[qb]*Qa;var Xb=cb[qb+1]*Qa,Jb=cb[qb+2]*Qa;Wa+=Math.abs((va[fb]-va[Jb])*(va[Xb+1]-va[fb+1])-(va[fb]-va[Xb])*(va[Jb+
1]-va[fb+1]))}return 0===dc&&0===Wa?0:Math.abs((Wa-dc)/dc)};mc.flatten=function(va){for(var Wa=va[0][0].length,Qa={vertices:[],holes:[],dimensions:Wa},cb=0,qb=0;qb<va.length;qb++){for(var dc=0;dc<va[qb].length;dc++)for(var fb=0;fb<Wa;fb++)Qa.vertices.push(va[qb][dc][fb]);0<qb&&(cb+=va[qb-1].length,Qa.holes.push(cb))}return Qa};var IM=function(va){return va},DM=function(va){if(null==va)return IM;var Wa,Qa,cb=va.scale[0],qb=va.scale[1],dc=va.translate[0],fb=va.translate[1];return function(Xb,Jb){Jb||
(Wa=Qa=0);Jb=2;var Yc=Xb.length,Pb=Array(Yc);Pb[0]=(Wa+=Xb[0])*cb+dc;for(Pb[1]=(Qa+=Xb[1])*qb+fb;Jb<Yc;)Pb[Jb]=Xb[Jb],++Jb;return Pb}},Bx=function(va,Wa){return"GeometryCollection"===Wa.type?{type:"FeatureCollection",features:Wa.geometries.map(function(Qa){return ch(va,Qa)})}:ch(va,Wa)},aW=function(va,Wa){function Qa(Yc){var Pb,Wd=va.arcs[0>Yc?~Yc:Yc],ue=Wd[0];return va.transform?(Pb=[0,0],Wd.forEach(function(zf){Pb[0]+=zf[0];Pb[1]+=zf[1]})):Pb=Wd[Wd.length-1],0>Yc?[Pb,ue]:[ue,Pb]}function cb(Yc,
Pb){for(var Wd in Yc){var ue=Yc[Wd];delete Pb[ue.start];delete ue.start;delete ue.end;ue.forEach(function(zf){qb[0>zf?~zf:zf]=1});Xb.push(ue)}}var qb={},dc={},fb={},Xb=[],Jb=-1;return Wa.forEach(function(Yc,Pb){var Wd,ue=va.arcs[0>Yc?~Yc:Yc];3>ue.length&&!ue[1][0]&&!ue[1][1]&&(Wd=Wa[++Jb],Wa[Jb]=Yc,Wa[Pb]=Wd)}),Wa.forEach(function(Yc){var Pb=Qa(Yc);var Wd=Pb[0],ue=Pb[1];(Pb=fb[Wd])?(delete fb[Pb.end],Pb.push(Yc),Pb.end=ue,Yc=dc[ue])?(delete dc[Yc.start],Wd=Yc===Pb?Pb:Pb.concat(Yc),dc[Wd.start=Pb.start]=
fb[Wd.end=Yc.end]=Wd):dc[Pb.start]=fb[Pb.end]=Pb:(Pb=dc[ue])?(delete dc[Pb.start],Pb.unshift(Yc),Pb.start=Wd,Yc=fb[Wd])?(delete fb[Yc.end],Wd=Yc===Pb?Pb:Yc.concat(Pb),dc[Wd.start=Yc.start]=fb[Wd.end=Pb.end]=Wd):dc[Pb.start]=fb[Pb.end]=Pb:(Pb=[Yc],dc[Pb.start=Wd]=fb[Pb.end=ue]=Pb)}),cb(fb,dc),cb(dc,fb),Wa.forEach(function(Yc){qb[0>Yc?~Yc:Yc]||Xb.push([Yc])}),Xb},JM=function(va,Wa){for(var Qa=0,cb=va.length;Qa<cb;){var qb=Qa+cb>>>1;va[qb]<Wa?Qa=qb+1:cb=qb}return Qa},bW=function(va){function Wa(Af,Qe){Af.forEach(function(Bf){0>
Bf&&(Bf=~Bf);var ln=qb[Bf];ln?ln.push(Qe):qb[Bf]=[Qe]})}function Qa(Af,Qe){Af.forEach(function(Bf){Wa(Bf,Qe)})}function cb(Af,Qe){"GeometryCollection"===Af.type?Af.geometries.forEach(function(Bf){cb(Bf,Qe)}):Af.type in fb&&fb[Af.type](Af.arcs,Qe)}var qb={},dc=va.map(function(){return[]}),fb={LineString:Wa,MultiLineString:Qa,Polygon:Qa,MultiPolygon:function(Af,Qe){Af.forEach(function(Bf){Qa(Bf,Qe)})}};va.forEach(cb);for(var Xb in qb){va=qb[Xb];for(var Jb=va.length,Yc=0;Yc<Jb;++Yc)for(var Pb=Yc+1;Pb<
Jb;++Pb){var Wd,ue=va[Yc],zf=va[Pb];(Wd=dc[ue])[Xb=JM(Wd,zf)]!==zf&&Wd.splice(Xb,0,zf);(Wd=dc[zf])[Xb=JM(Wd,ue)]!==ue&&Wd.splice(Xb,0,ue)}}return dc},Ku=function(va,Wa){return va<Wa?-1:va>Wa?1:va>=Wa?0:NaN},YE=function(va){return 1===va.length&&(va=Pi(va)),{left:function(Wa,Qa,cb,qb){null==cb&&(cb=0);for(null==qb&&(qb=Wa.length);cb<qb;){var dc=cb+qb>>>1;0>va(Wa[dc],Qa)?cb=dc+1:qb=dc}return cb},right:function(Wa,Qa,cb,qb){null==cb&&(cb=0);for(null==qb&&(qb=Wa.length);cb<qb;){var dc=cb+qb>>>1;0<va(Wa[dc],
Qa)?qb=dc:cb=dc+1}return cb}}};YE(Ku);var FM=function(va,Wa){return ri(qi(Sj(va),va),Wa)},ZE=function(va,Wa){if(8<va.length)return va.map(function(cb,qb){return qb});var Qa=va.map(function(cb){return Wa.map(function(qb){qb=W(ib(cb),ib(qb));return qb*qb})});return Bi(va,Wa,Qa)};f.interpolate=function(va,Wa,Qa){void 0===Qa&&(Qa={});var cb=Qa.maxSegmentLength;void 0===cb&&(cb=10);Qa=Qa.string;void 0===Qa&&(Qa=!0);var qb=ya(va,cb);cb=ya(Wa,cb);var dc=Qb(qb,cb,Qa);return!Qa||"string"!=typeof va&&"string"!=
typeof Wa?dc:function(fb){return 1E-4>fb&&"string"==typeof va?va:1E-4>1-fb&&"string"==typeof Wa?Wa:dc(fb)}};f.separate=Dj;f.combine=function(va,Wa,Qa){void 0===Qa&&(Qa={});var cb=Qa.maxSegmentLength;void 0===cb&&(cb=10);var qb=Qa.string;void 0===qb&&(qb=!0);Qa=Qa.single;void 0===Qa&&(Qa=!1);var dc=Dj(Wa,va,{maxSegmentLength:cb,string:qb,single:Qa});return Qa?function(fb){return dc(1-fb)}:dc.map(function(fb){return function(Xb){return fb(1-Xb)}})};f.interpolateAll=function(va,Wa,Qa){void 0===Qa&&(Qa=
{});var cb=Qa.maxSegmentLength;void 0===cb&&(cb=10);var qb=Qa.string;void 0===qb&&(qb=!0);Qa=Qa.single;if(void 0===Qa&&(Qa=!1),!Array.isArray(va)||!Array.isArray(Wa)||va.length!==Wa.length||!va.length)throw new TypeError("flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).");var dc,fb,Xb=function(Yc){return ya(Yc,cb)},Jb=va.map(Xb);Xb=Wa.map(Xb);
return Qa?(va.every(function(Yc){return"string"==typeof Yc})&&(dc=va.slice(0)),Wa.every(function(Yc){return"string"==typeof Yc})&&(fb=Wa.slice(0))):(dc=va.slice(0),fb=Wa.slice(0)),ek(Jb,Xb,{string:qb,single:Qa,t0:dc,t1:fb,match:!1})};f.splitPathString=function(va){return ob((new AM(va)).abs())};f.toPathString=Ea;f.fromCircle=Ej;f.toCircle=function(va,Wa,Qa,cb,qb){var dc=Ej(Wa,Qa,cb,va,qb);return function(fb){return dc(1-fb)}};f.fromRect=fk;f.toRect=function(va,Wa,Qa,cb,qb,dc){var fb=fk(Wa,Qa,cb,qb,
va,dc);return function(Xb){return fb(1-Xb)}};Object.defineProperty(f,"__esModule",{value:!0})});var fra={},gra="function"===typeof Float32Array,hra=fra=function(f,m,n,a){if(!(0<=f&&1>=f&&0<=n&&1>=n))throw Error("bezier x values must be in [0, 1] range");if(f===m&&n===a)return oha;for(var d=gra?new Float32Array(11):Array(11),k=0;11>k;++k)d[k]=AI(.1*k,f,n);return function(b){if(0===b)return 0;if(1===b)return 1;for(var e=0,l=1;10!==l&&d[l]<=b;++l)e+=.1;--l;l=e+(b-d[l])/(d[l+1]-d[l])*.1;var p=3*(1-3*
n+3*f)*l*l+2*(3*n-6*f)*l+3*f;if(.001<=p){for(e=0;4>e;++e){p=3*(1-3*n+3*f)*l*l+2*(3*n-6*f)*l+3*f;if(0===p)break;var u=AI(l,f,n)-b;l-=u/p}b=l}else if(0===p)b=l;else{l=e;e+=.1;var x=0;do u=l+(e-l)/2,p=AI(u,f,n)-b,0<p?e=u:l=u;while(1E-7<Math.abs(p)&&10>++x);b=u}return AI(b,m,a)}},tc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;!function(){var f={},m={};!function(n,a){function d(){(this||tc)._delay=0;(this||tc)._endDelay=0;(this||tc)._fill="none";(this||tc)._iterationStart=
0;(this||tc)._iterations=1;(this||tc)._duration=0;(this||tc)._playbackRate=1;(this||tc)._direction="normal";(this||tc)._easing="linear";(this||tc)._easingFunction=G}function k(){return n.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function b(ca,sa,la){var Aa=new d;return sa&&(Aa.fill="both",Aa.duration="auto"),"number"!=typeof ca||isNaN(ca)?void 0!==ca&&Object.getOwnPropertyNames(ca).forEach(function(ib){"auto"==ca[ib]||("number"==typeof Aa[ib]||
"duration"==ib)&&("number"!=typeof ca[ib]||isNaN(ca[ib]))||"fill"==ib&&-1==z.indexOf(ca[ib])||"direction"==ib&&-1==E.indexOf(ca[ib])||"playbackRate"==ib&&1!==ca[ib]&&n.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead.")||(Aa[ib]=ca[ib])}):Aa.duration=ca,Aa}function e(ca,sa,la,Aa){return 0>ca||1<ca||0>la||1<la?G:function(ib){if(0>=ib){var ob=0;return 0<ca?ob=sa/ca:!sa&&0<la&&(ob=Aa/la),ob*ib}if(1<=ib)return ob=0,1>la?ob=(Aa-1)/(la-1):1==la&&1>ca&&(ob=
(sa-1)/(ca-1)),1+ob*(ib-1);ob=0;for(var Ea=1;ob<Ea;){var ua=(ob+Ea)/2,ya=3*ca*(1-ua)*(1-ua)*ua+3*la*(1-ua)*ua*ua+ua*ua*ua;if(1E-5>Math.abs(ib-ya))break;ya<ib?ob=ua:Ea=ua}return 3*sa*(1-ua)*(1-ua)*ua+3*Aa*(1-ua)*ua*ua+ua*ua*ua}}function l(ca,sa){return function(la){if(1<=la)return 1;var Aa=1/ca;return(la+=sa*Aa)-la%Aa}}function p(ca){da||(da=document.createElement("div").style);da.animationTimingFunction="";da.animationTimingFunction=ca;var sa=da.animationTimingFunction;if(""==sa&&k())throw new TypeError(ca+
" is not a valid value for easing");return sa}function u(ca){if("linear"==ca)return G;var sa=fa.exec(ca);return sa?e.apply(this||tc,sa.slice(1).map(Number)):(sa=ka.exec(ca))?l(Number(sa[1]),T):(sa=za.exec(ca))?l(Number(sa[1]),{start:J,middle:K,end:T}[sa[2]]):P[ca]||G}function x(ca,sa,la){if(null==sa)return Ia;var Aa=la.delay+ca+la.endDelay;return sa<Math.min(la.delay,Aa)?N:sa>=Math.min(la.delay+ca,Aa)?ia:W}var z=["backwards","forwards","both","none"],E=["reverse","alternate","alternate-reverse"],
G=function(ca){return ca};d.prototype={_setMember:function(ca,sa){(this||tc)["_"+ca]=sa;(this||tc)._effect&&((this||tc)._effect._timingInput[ca]=sa,(this||tc)._effect._timing=n.normalizeTimingInput((this||tc)._effect._timingInput),(this||tc)._effect.activeDuration=n.calculateActiveDuration((this||tc)._effect._timing),(this||tc)._effect._animation&&(this||tc)._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return(this||tc)._playbackRate},set delay(ca){this._setMember("delay",
ca)},get delay(){return(this||tc)._delay},set endDelay(ca){this._setMember("endDelay",ca)},get endDelay(){return(this||tc)._endDelay},set fill(ca){this._setMember("fill",ca)},get fill(){return(this||tc)._fill},set iterationStart(ca){if((isNaN(ca)||0>ca)&&k())throw new TypeError("iterationStart must be a non-negative number, received: "+ca);this._setMember("iterationStart",ca)},get iterationStart(){return(this||tc)._iterationStart},set duration(ca){if("auto"!=ca&&(isNaN(ca)||0>ca)&&k())throw new TypeError("duration must be non-negative or auto, received: "+
ca);this._setMember("duration",ca)},get duration(){return(this||tc)._duration},set direction(ca){this._setMember("direction",ca)},get direction(){return(this||tc)._direction},set easing(ca){(this||tc)._easingFunction=u(p(ca));this._setMember("easing",ca)},get easing(){return(this||tc)._easing},set iterations(ca){if((isNaN(ca)||0>ca)&&k())throw new TypeError("iterations must be non-negative, received: "+ca);this._setMember("iterations",ca)},get iterations(){return(this||tc)._iterations}};var J=1,K=
.5,T=0,P={ease:e(.25,.1,.25,1),"ease-in":e(.42,0,1,1),"ease-out":e(0,0,.58,1),"ease-in-out":e(.42,0,.58,1),"step-start":l(1,J),"step-middle":l(1,K),"step-end":l(1,T)},da=null,fa=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,ka=/steps\(\s*(\d+)\s*\)/,za=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,Ia=0,N=1,ia=2,W=3;n.cloneTimingInput=function(ca){if("number"==typeof ca)return ca;var sa={},la;for(la in ca)sa[la]=
ca[la];return sa};n.makeTiming=b;n.numericTimingToObject=function(ca){return"number"==typeof ca&&(ca=isNaN(ca)?{duration:0}:{duration:ca}),ca};n.normalizeTimingInput=function(ca,sa){return ca=n.numericTimingToObject(ca),b(ca,sa)};n.calculateActiveDuration=function(ca){return Math.abs((0===ca.duration||0===ca.iterations?0:ca.duration*ca.iterations)/ca.playbackRate)};n.calculateIterationProgress=function(ca,sa,la){var Aa=x(ca,sa,la);a:{var ib=la.fill;switch(Aa){case N:ca="backwards"==ib||"both"==ib?
0:null;break a;case W:ca=sa-la.delay;break a;case ia:ca="forwards"==ib||"both"==ib?ca:null;break a;case Ia:ca=null;break a}ca=void 0}if(null===ca)return null;sa=la.duration;ib=la.iterationStart;sa=(0===sa?Aa!==N&&(ib+=la.iterations):ib+=ca/sa,ib);ib=sa===1/0?la.iterationStart%1:sa%1;ca=(0!==ib||Aa!==ia||0===la.iterations||0===ca&&0!==la.duration||(ib=1),ib);ib=Aa===ia&&la.iterations===1/0?1/0:1===ca?Math.floor(sa)-1:Math.floor(sa);sa=Aa=la.direction;"normal"!==Aa&&"reverse"!==Aa&&("alternate-reverse"===
Aa&&(ib+=1),sa="normal",ib!==1/0&&0!=ib%2&&(sa="reverse"));return la._easingFunction("normal"===sa?ca:1-ca)};n.calculatePhase=x;n.normalizeEasing=p;n.parseEasingFunction=u}(f);(function(n,a){function d(l){var p=[],u;for(u in l)if(!(u in["easing","offset","composite"])){var x=l[u];Array.isArray(x)||(x=[x]);for(var z,E=x.length,G=0;G<E;G++)z={},z.offset="offset"in l?l.offset:1==E?1:G/(E-1),"easing"in l&&(z.easing=l.easing),"composite"in l&&(z.composite=l.composite),z[u]=x[G],p.push(z)}return p.sort(function(J,
K){return J.offset-K.offset}),p}var k={background:"backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundAttachment backgroundOrigin backgroundClip backgroundColor".split(" "),border:"borderTopColor borderTopStyle borderTopWidth borderRightColor borderRightStyle borderRightWidth borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth".split(" "),borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor",
"borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],
font:"fontFamily fontSize fontStyle fontVariant fontWeight lineHeight".split(" "),margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle","outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},b=document.createElementNS("http://www.w3.org/1999/xhtml","div");a={thin:"1px",medium:"3px",thick:"5px"};var e={borderBottomWidth:a,borderLeftWidth:a,borderRightWidth:a,borderTopWidth:a,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",
medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:a,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};n.convertToArrayForm=d;n.normalizeKeyframes=function(l){function p(){var G=u.length;null==u[G-1].offset&&(u[G-1].offset=1);1<G&&null==u[0].offset&&(u[0].offset=0);for(var J=0,K=u[0].offset,T=1;T<G;T++){var P=u[T].offset;if(null!=P){for(var da=1;da<T-J;da++)u[J+da].offset=K+(P-K)*da/(T-J);J=T;K=
P}}}if(null==l)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&l[Symbol.iterator]&&(l=Array.from(l));Array.isArray(l)||(l=d(l));var u=l.map(function(G){var J={},K;for(K in G){var T=G[K];if("offset"==K){if(null!=T){if(T=Number(T),!isFinite(T))throw new TypeError("Keyframe offsets must be numbers.");if(0>T||1<T)throw new TypeError("Keyframe offsets must be between 0 and 1.");}}else if("composite"==K){if("add"==T||"accumulate"==T)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",
message:"add compositing is not supported"};if("replace"!=T)throw new TypeError("Invalid composite mode "+T+".");}else T="easing"==K?n.normalizeEasing(T):""+T;var P=void 0,da=K,fa=T;T=J;var ka=da;if("display"!==ka&&0!==ka.lastIndexOf("animation",0)&&0!==ka.lastIndexOf("transition",0))if(ka=k[da])for(P in b.style[da]=fa,ka)da=ka[P],fa=b.style[da],T[da]=da in e?e[da][fa]||fa:fa;else T[da]=da in e?e[da][fa]||fa:fa}return void 0==J.offset&&(J.offset=null),void 0==J.easing&&(J.easing="linear"),J});l=!0;
for(var x=-1/0,z=0;z<u.length;z++){var E=u[z].offset;if(null!=E){if(E<x)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");x=E}else l=!1}return u=u.filter(function(G){return 0<=G.offset&&1>=G.offset}),l||p(),u}})(f);(function(n){var a={};n.isDeprecated=function(d,k,b,e){e=e?"are":"is";var l=new Date;k=new Date(k);return k.setMonth(k.getMonth()+3),!(l<k&&(d in a||console.warn("Web Animations: "+d+" "+e+" deprecated and will stop working on "+k.toDateString()+
". "+b),a[d]=!0,1))};n.deprecated=function(d,k,b,e){var l=e?"are":"is";if(n.isDeprecated(d,k,b,e))throw Error(d+" "+l+" no longer supported. "+b);}})(f);(function(){if(document.documentElement.animate){var n=document.documentElement.animate([],0),a=!0;if(n&&(a=!1,"play currentTime pause reverse playbackRate cancel finish startTime playState".split(" ").forEach(function(d){void 0===n[d]&&(a=!0)})),!a)return}!function(d,k,b){function e(p){for(var u={},x=0;x<p.length;x++)for(var z in p[x])if("offset"!=
z&&"easing"!=z&&"composite"!=z){var E={offset:p[x].offset,easing:p[x].easing,value:p[x][z]};u[z]=u[z]||[];u[z].push(E)}for(var G in u)if(p=u[G],0!=p[0].offset||1!=p[p.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"Partial keyframes are not supported"};return u}function l(p){var u=[],x;for(x in p)for(var z=p[x],E=0;E<z.length-1;E++){var G=E,J=E+1,K=z[G].offset,T=z[J].offset,P=K,da=T;0==E&&(P=-1/0,0==T&&(J=G));E==z.length-2&&(da=1/0,1==K&&(G=J));u.push({applyFrom:P,
applyTo:da,startOffset:z[G].offset,endOffset:z[J].offset,easingFunction:d.parseEasingFunction(z[G].easing),property:x,interpolation:k.propertyInterpolation(x,z[G].value,z[J].value)})}return u.sort(function(fa,ka){return fa.startOffset-ka.startOffset}),u}k.convertEffectInput=function(p){p=d.normalizeKeyframes(p);var u=e(p),x=l(u);return function(z,E){if(null!=E)x.filter(function(J){return E>=J.applyFrom&&E<J.applyTo}).forEach(function(J){var K=E-J.startOffset,T=J.endOffset-J.startOffset;K=0==T?0:J.easingFunction(K/
T);k.apply(z,J.property,J.interpolation(K))});else for(var G in u)"offset"!=G&&"easing"!=G&&"composite"!=G&&k.clear(z,G)}}}(f,m);(function(d,k,b){function e(u){return u.replace(/-(.)/g,function(x,z){return z.toUpperCase()})}var l={};k.addPropertiesHandler=function(u,x,z){for(var E=0;E<z.length;E++){var G=u,J=x,K=e(z[E]);l[K]=l[K]||[];l[K].push([G,J])}};var p={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",
borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",
maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};k.propertyInterpolation=function(u,x,z){var E=u;/-/.test(u)&&!d.isDeprecated("Hyphenated property names",
"2016-03-22","Use camelCase instead.",!0)&&(E=e(u));"initial"!=x&&"initial"!=z||("initial"==x&&(x=p[E]),"initial"==z&&(z=p[E]));u=x==z?[]:l[E];for(E=0;u&&E<u.length;E++){var G=u[E][0](x),J=u[E][0](z);if(void 0!==G&&void 0!==J&&(G=u[E][1](G,J))){var K=k.Interpolation.apply(null,G);return function(T){return 0==T?x:1==T?z:K(T)}}}return k.Interpolation(!1,!0,function(T){return T?z:x})}})(f,m);(function(d,k,b){function e(l){var p=d.calculateActiveDuration(l),u=function(x){return d.calculateIterationProgress(p,
x,l)};return u._totalDuration=l.delay+p+l.endDelay,u}k.KeyframeEffect=function(l,p,u,x){var z,E=e(d.normalizeTimingInput(u)),G=k.convertEffectInput(p);p=function(){G(l,z)};return p._update=function(J){return null!==(z=E(J))},p._clear=function(){G(l,null)},p._hasSameTarget=function(J){return l===J},p._target=l,p._totalDuration=E._totalDuration,p._id=x,p}})(f,m);(function(d,k){function b(G,J,K){K.enumerable=!0;K.configurable=!0;Object.defineProperty(G,J,K)}function e(G){(this||tc)._element=G;(this||
tc)._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style;(this||tc)._style=G.style;(this||tc)._length=0;(this||tc)._isAnimatedProperty={};var J=window;G=!(!G.namespaceURI||-1==G.namespaceURI.indexOf("/svg"))&&(p in J||(J[p]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(J.navigator.userAgent)),J[p]);(this||tc)._updateSvgTransformAttr=G;(this||tc)._savedTransformAttr=null;for(G=0;G<(this||tc)._style.length;G++)J=(this||tc)._style[G],(this||tc)._surrogateStyle[J]=(this||
tc)._style[J];this._updateIndices()}function l(G){if(!G._webAnimationsPatchedStyle){var J=new e(G);try{b(G,"style",{get:function(){return J}})}catch(K){G.style._set=function(T,P){G.style[T]=P},G.style._clear=function(T){G.style[T]=""}}G._webAnimationsPatchedStyle=G.style}}var p="_webAnimationsUpdateSvgTransformAttr";k={cssText:1,length:1,parentRule:1};var u={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},x={removeProperty:1,setProperty:1};e.prototype=
{get cssText(){return(this||tc)._surrogateStyle.cssText},set cssText(G){for(var J={},K=0;K<(this||tc)._surrogateStyle.length;K++)J[(this||tc)._surrogateStyle[K]]=!0;(this||tc)._surrogateStyle.cssText=G;this._updateIndices();for(K=0;K<(this||tc)._surrogateStyle.length;K++)J[(this||tc)._surrogateStyle[K]]=!0;for(var T in J)(this||tc)._isAnimatedProperty[T]||(this||tc)._style.setProperty(T,(this||tc)._surrogateStyle.getPropertyValue(T))},get length(){return(this||tc)._surrogateStyle.length},get parentRule(){return(this||
tc)._style.parentRule},_updateIndices:function(){for(;(this||tc)._length<(this||tc)._surrogateStyle.length;)Object.defineProperty(this||tc,(this||tc)._length,{configurable:!0,enumerable:!1,get:function(G){return function(){return(this||tc)._surrogateStyle[G]}}((this||tc)._length)}),(this||tc)._length++;for(;(this||tc)._length>(this||tc)._surrogateStyle.length;)(this||tc)._length--,Object.defineProperty(this||tc,(this||tc)._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(G,J){(this||
tc)._style[G]=J;(this||tc)._isAnimatedProperty[G]=!0;(this||tc)._updateSvgTransformAttr&&"transform"==d.unprefixedPropertyName(G)&&(null==(this||tc)._savedTransformAttr&&((this||tc)._savedTransformAttr=(this||tc)._element.getAttribute("transform")),(this||tc)._element.setAttribute("transform",d.transformToSvgMatrix(J)))},_clear:function(G){(this||tc)._style[G]=(this||tc)._surrogateStyle[G];(this||tc)._updateSvgTransformAttr&&"transform"==d.unprefixedPropertyName(G)&&((this||tc)._savedTransformAttr?
(this||tc)._element.setAttribute("transform",(this||tc)._savedTransformAttr):(this||tc)._element.removeAttribute("transform"),(this||tc)._savedTransformAttr=null);delete (this||tc)._isAnimatedProperty[G]}};for(var z in u)e.prototype[z]=function(G,J){return function(){var K=(this||tc)._surrogateStyle[G].apply((this||tc)._surrogateStyle,arguments);return J&&((this||tc)._isAnimatedProperty[arguments[0]]||(this||tc)._style[G].apply((this||tc)._style,arguments),this._updateIndices()),K}}(z,z in x);for(var E in document.documentElement.style)E in
k||E in u||function(G){b(e.prototype,G,{get:function(){return(this||tc)._surrogateStyle[G]},set:function(J){(this||tc)._surrogateStyle[G]=J;this._updateIndices();(this||tc)._isAnimatedProperty[G]||((this||tc)._style[G]=J)}})}(E);d.apply=function(G,J,K){l(G);G.style._set(d.propertyName(J),K)};d.clear=function(G,J){G._webAnimationsPatchedStyle&&G.style._clear(d.propertyName(J))}})(m);(function(d){window.Element.prototype.animate=function(k,b){var e="";return b&&b.id&&(e=b.id),d.timeline._play(d.KeyframeEffect(this||
tc,k,b,e))}})(m);(function(d,k){function b(e,l,p){if("number"==typeof e&&"number"==typeof l)return e*(1-p)+l*p;if("boolean"==typeof e&&"boolean"==typeof l)return.5>p?e:l;if(e.length==l.length){for(var u=[],x=0;x<e.length;x++)u.push(b(e[x],l[x],p));return u}throw"Mismatched interpolation arguments "+e+":"+l;}d.Interpolation=function(e,l,p){return function(u){return p(b(e,l,u))}}})(m);(function(d,k){k=function(){function b(e,l){for(var p=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],u=0;4>u;u++)for(var x=
0;4>x;x++)for(var z=0;4>z;z++)p[u][x]+=l[u][z]*e[z][x];return p}return function(e,l,p,u,x){for(var z=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],E=0;4>E;E++)z[E][3]=x[E];for(E=0;3>E;E++)for(x=0;3>x;x++)z[3][E]+=e[x]*z[x][E];e=u[0];E=u[1];x=u[2];u=u[3];var G=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];G[0][0]=1-2*(E*E+x*x);G[0][1]=2*(e*E-x*u);G[0][2]=2*(e*x+E*u);G[1][0]=2*(e*E+x*u);G[1][1]=1-2*(e*e+x*x);G[1][2]=2*(E*x-e*u);G[2][0]=2*(e*x-E*u);G[2][1]=2*(E*x+e*u);G[2][2]=1-2*(e*e+E*E);z=b(z,G);u=[[1,0,
0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];p[2]&&(u[2][1]=p[2],z=b(z,u));p[1]&&(u[2][1]=0,u[2][0]=p[0],z=b(z,u));p[0]&&(u[2][0]=0,u[1][0]=p[0],z=b(z,u));for(E=0;3>E;E++)for(x=0;3>x;x++)z[E][x]*=l[E];return 0==z[0][2]&&0==z[0][3]&&0==z[1][2]&&0==z[1][3]&&0==z[2][0]&&0==z[2][1]&&1==z[2][2]&&0==z[2][3]&&0==z[3][2]&&1==z[3][3]?[z[0][0],z[0][1],z[1][0],z[1][1],z[3][0],z[3][1]]:z[0].concat(z[1],z[2],z[3])}}();d.composeMatrix=k;d.quat=function(b,e,l){var p=d.dot(b,e);p=Math.max(Math.min(p,1),-1);var u=[];if(1===
p)u=b;else for(var x=Math.acos(p),z=1*Math.sin(l*x)/Math.sqrt(1-p*p),E=0;4>E;E++)u.push(b[E]*(Math.cos(l*x)-p*z)+e[E]*z);return u}})(m);(function(d,k,b){d.sequenceNumber=0;var e=function(l,p,u){(this||tc).target=l;(this||tc).currentTime=p;(this||tc).timelineTime=u;(this||tc).type="finish";(this||tc).bubbles=!1;(this||tc).cancelable=!1;(this||tc).currentTarget=l;(this||tc).defaultPrevented=!1;(this||tc).eventPhase=Event.AT_TARGET;(this||tc).timeStamp=Date.now()};k.Animation=function(l){(this||tc).id=
"";l&&l._id&&((this||tc).id=l._id);(this||tc)._sequenceNumber=d.sequenceNumber++;(this||tc)._currentTime=0;(this||tc)._startTime=null;(this||tc)._paused=!1;(this||tc)._playbackRate=1;(this||tc)._inTimeline=!0;(this||tc)._finishedFlag=!0;(this||tc).onfinish=null;(this||tc)._finishHandlers=[];(this||tc)._effect=l;(this||tc)._inEffect=(this||tc)._effect._update(0);(this||tc)._idle=!0;(this||tc)._currentTimePending=!1};k.Animation.prototype={_ensureAlive:function(){0>(this||tc).playbackRate&&0===(this||
tc).currentTime?(this||tc)._inEffect=(this||tc)._effect._update(-1):(this||tc)._inEffect=(this||tc)._effect._update((this||tc).currentTime);(this||tc)._inTimeline||!(this||tc)._inEffect&&(this||tc)._finishedFlag||((this||tc)._inTimeline=!0,k.timeline._animations.push(this||tc))},_tickCurrentTime:function(l,p){l!=(this||tc)._currentTime&&((this||tc)._currentTime=l,(this||tc)._isFinished&&!p&&((this||tc)._currentTime=0<(this||tc)._playbackRate?(this||tc)._totalDuration:0),this._ensureAlive())},get currentTime(){return(this||
tc)._idle||(this||tc)._currentTimePending?null:(this||tc)._currentTime},set currentTime(l){l=+l;isNaN(l)||(k.restart(),(this||tc)._paused||null==(this||tc)._startTime||((this||tc)._startTime=(this||tc)._timeline.currentTime-l/(this||tc)._playbackRate),(this||tc)._currentTimePending=!1,(this||tc)._currentTime!=l&&((this||tc)._idle&&((this||tc)._idle=!1,(this||tc)._paused=!0),this._tickCurrentTime(l,!0),k.applyDirtiedAnimation(this||tc)))},get startTime(){return(this||tc)._startTime},set startTime(l){l=
+l;isNaN(l)||(this||tc)._paused||(this||tc)._idle||((this||tc)._startTime=l,this._tickCurrentTime(((this||tc)._timeline.currentTime-(this||tc)._startTime)*(this||tc).playbackRate),k.applyDirtiedAnimation(this||tc))},get playbackRate(){return(this||tc)._playbackRate},set playbackRate(l){if(l!=(this||tc)._playbackRate){var p=(this||tc).currentTime;(this||tc)._playbackRate=l;(this||tc)._startTime=null;"paused"!=(this||tc).playState&&"idle"!=(this||tc).playState&&((this||tc)._finishedFlag=!1,(this||tc)._idle=
!1,this._ensureAlive(),k.applyDirtiedAnimation(this||tc));null!=p&&((this||tc).currentTime=p)}},get _isFinished(){return!(this||tc)._idle&&(0<(this||tc)._playbackRate&&(this||tc)._currentTime>=(this||tc)._totalDuration||0>(this||tc)._playbackRate&&0>=(this||tc)._currentTime)},get _totalDuration(){return(this||tc)._effect._totalDuration},get playState(){return(this||tc)._idle?"idle":null==(this||tc)._startTime&&!(this||tc)._paused&&0!=(this||tc).playbackRate||(this||tc)._currentTimePending?"pending":
(this||tc)._paused?"paused":(this||tc)._isFinished?"finished":"running"},_rewind:function(){if(0<=(this||tc)._playbackRate)(this||tc)._currentTime=0;else{if(!((this||tc)._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");(this||tc)._currentTime=(this||tc)._totalDuration}},play:function(){(this||tc)._paused=!1;((this||tc)._isFinished||(this||tc)._idle)&&(this._rewind(),(this||tc)._startTime=null);(this||tc)._finishedFlag=
!1;(this||tc)._idle=!1;this._ensureAlive();k.applyDirtiedAnimation(this||tc)},pause:function(){(this||tc)._isFinished||(this||tc)._paused||(this||tc)._idle?(this||tc)._idle&&(this._rewind(),(this||tc)._idle=!1):(this||tc)._currentTimePending=!0;(this||tc)._startTime=null;(this||tc)._paused=!0},finish:function(){(this||tc)._idle||((this||tc).currentTime=0<(this||tc)._playbackRate?(this||tc)._totalDuration:0,(this||tc)._startTime=(this||tc)._totalDuration-(this||tc).currentTime,(this||tc)._currentTimePending=
!1,k.applyDirtiedAnimation(this||tc))},cancel:function(){(this||tc)._inEffect&&((this||tc)._inEffect=!1,(this||tc)._idle=!0,(this||tc)._paused=!1,(this||tc)._finishedFlag=!0,(this||tc)._currentTime=0,(this||tc)._startTime=null,(this||tc)._effect._update(null),k.applyDirtiedAnimation(this||tc))},reverse:function(){(this||tc).playbackRate*=-1;this.play()},addEventListener:function(l,p){"function"==typeof p&&"finish"==l&&(this||tc)._finishHandlers.push(p)},removeEventListener:function(l,p){"finish"==
l&&(l=(this||tc)._finishHandlers.indexOf(p),0<=l&&(this||tc)._finishHandlers.splice(l,1))},_fireEvents:function(l){if((this||tc)._isFinished){if(!(this||tc)._finishedFlag){var p=new e(this||tc,(this||tc)._currentTime,l),u=(this||tc)._finishHandlers.concat((this||tc).onfinish?[(this||tc).onfinish]:[]);setTimeout(function(){u.forEach(function(x){x.call(p.target,p)})},0);(this||tc)._finishedFlag=!0}}else(this||tc)._finishedFlag=!1},_tick:function(l,p){(this||tc)._idle||(this||tc)._paused||(null==(this||
tc)._startTime?p&&((this||tc).startTime=l-(this||tc)._currentTime/(this||tc).playbackRate):(this||tc)._isFinished||this._tickCurrentTime((l-(this||tc)._startTime)*(this||tc).playbackRate));p&&((this||tc)._currentTimePending=!1,this._fireEvents(l))},get _needsTick(){return(this||tc).playState in{pending:1,running:1}||!(this||tc)._finishedFlag},_targetAnimations:function(){var l=(this||tc)._effect._target;return l._activeAnimations||(l._activeAnimations=[]),l._activeAnimations},_markTarget:function(){var l=
this._targetAnimations();-1===l.indexOf(this||tc)&&l.push(this||tc)},_unmarkTarget:function(){var l=this._targetAnimations(),p=l.indexOf(this||tc);-1!==p&&l.splice(p,1)}}})(f,m);(function(d,k,b){function e(fa){var ka=E;E=[];fa<da.currentTime&&(fa=da.currentTime);da._animations.sort(l);da._animations=x(fa,!0,da._animations)[0];ka.forEach(function(za){za[1](fa)});u()}function l(fa,ka){return fa._sequenceNumber-ka._sequenceNumber}function p(){(this||tc)._animations=[];(this||tc).currentTime=window.performance&&
performance.now?performance.now():0}function u(){T.forEach(function(fa){fa()});T.length=0}function x(fa,ka,za){P=!0;K=!1;k.timeline.currentTime=fa;J=!1;var Ia=[],N=[],ia=[],W=[];return za.forEach(function(ca){ca._tick(fa,ka);ca._inEffect?(N.push(ca._effect),ca._markTarget()):(Ia.push(ca._effect),ca._unmarkTarget());ca._needsTick&&(J=!0);var sa=ca._inEffect||ca._needsTick;(ca._inTimeline=sa)?ia.push(ca):W.push(ca)}),T.push.apply(T,Ia),T.push.apply(T,N),J&&requestAnimationFrame(function(){}),P=!1,[ia,
W]}var z=window.requestAnimationFrame,E=[],G=0;window.requestAnimationFrame=function(fa){var ka=G++;return 0==E.length&&z(e),E.push([ka,fa]),ka};window.cancelAnimationFrame=function(fa){E.forEach(function(ka){ka[0]==fa&&(ka[1]=function(){})})};p.prototype={_play:function(fa){fa._timing=d.normalizeTimingInput(fa.timing);fa=new k.Animation(fa);return fa._idle=!1,fa._timeline=this||tc,(this||tc)._animations.push(fa),k.restart(),k.applyDirtiedAnimation(fa),fa}};var J=!1,K=!1;k.restart=function(){return J||
(J=!0,requestAnimationFrame(function(){}),K=!0),K};k.applyDirtiedAnimation=function(fa){P||(fa._markTarget(),fa=fa._targetAnimations(),fa.sort(l),x(k.timeline.currentTime,!1,fa.slice())[1].forEach(function(ka){ka=da._animations.indexOf(ka);-1!==ka&&da._animations.splice(ka,1)}),u())};var T=[],P=!1,da=new p;k.timeline=da})(f,m);(function(d,k){function b(z,E){for(var G=0,J=0;J<z.length;J++)G+=z[J]*E[J];return G}function e(z,E){return[z[0]*E[0]+z[4]*E[1]+z[8]*E[2]+z[12]*E[3],z[1]*E[0]+z[5]*E[1]+z[9]*
E[2]+z[13]*E[3],z[2]*E[0]+z[6]*E[1]+z[10]*E[2]+z[14]*E[3],z[3]*E[0]+z[7]*E[1]+z[11]*E[2]+z[15]*E[3],z[0]*E[4]+z[4]*E[5]+z[8]*E[6]+z[12]*E[7],z[1]*E[4]+z[5]*E[5]+z[9]*E[6]+z[13]*E[7],z[2]*E[4]+z[6]*E[5]+z[10]*E[6]+z[14]*E[7],z[3]*E[4]+z[7]*E[5]+z[11]*E[6]+z[15]*E[7],z[0]*E[8]+z[4]*E[9]+z[8]*E[10]+z[12]*E[11],z[1]*E[8]+z[5]*E[9]+z[9]*E[10]+z[13]*E[11],z[2]*E[8]+z[6]*E[9]+z[10]*E[10]+z[14]*E[11],z[3]*E[8]+z[7]*E[9]+z[11]*E[10]+z[15]*E[11],z[0]*E[12]+z[4]*E[13]+z[8]*E[14]+z[12]*E[15],z[1]*E[12]+z[5]*
E[13]+z[9]*E[14]+z[13]*E[15],z[2]*E[12]+z[6]*E[13]+z[10]*E[14]+z[14]*E[15],z[3]*E[12]+z[7]*E[13]+z[11]*E[14]+z[15]*E[15]]}function l(z){return 2*((z.deg||0)/360+(z.grad||0)/400+(z.turn||0))*Math.PI+(z.rad||0)}function p(z){switch(z.t){case "rotatex":return z=l(z.d[0]),[1,0,0,0,0,Math.cos(z),Math.sin(z),0,0,-Math.sin(z),Math.cos(z),0,0,0,0,1];case "rotatey":return z=l(z.d[0]),[Math.cos(z),0,-Math.sin(z),0,0,1,0,0,Math.sin(z),0,Math.cos(z),0,0,0,0,1];case "rotate":case "rotatez":return z=l(z.d[0]),
[Math.cos(z),Math.sin(z),0,0,-Math.sin(z),Math.cos(z),0,0,0,0,1,0,0,0,0,1];case "rotate3d":var E=z.d[0],G=z.d[1],J=z.d[2];z=l(z.d[3]);var K=E*E+G*G+J*J;0===K?(E=1,J=G=0):1!==K&&(K=Math.sqrt(K),E/=K,G/=K,J/=K);K=Math.sin(z/2);z=K*Math.cos(z/2);K*=K;return[1-2*(G*G+J*J)*K,2*(E*G*K+J*z),2*(E*J*K-G*z),0,2*(E*G*K-J*z),1-2*(E*E+J*J)*K,2*(G*J*K+E*z),0,2*(E*J*K+G*z),2*(G*J*K-E*z),1-2*(E*E+G*G)*K,0,0,0,0,1];case "scale":return[z.d[0],0,0,0,0,z.d[1],0,0,0,0,1,0,0,0,0,1];case "scalex":return[z.d[0],0,0,0,0,
1,0,0,0,0,1,0,0,0,0,1];case "scaley":return[1,0,0,0,0,z.d[0],0,0,0,0,1,0,0,0,0,1];case "scalez":return[1,0,0,0,0,1,0,0,0,0,z.d[0],0,0,0,0,1];case "scale3d":return[z.d[0],0,0,0,0,z.d[1],0,0,0,0,z.d[2],0,0,0,0,1];case "skew":return E=l(z.d[0]),G=l(z.d[1]),[1,Math.tan(G),0,0,Math.tan(E),1,0,0,0,0,1,0,0,0,0,1];case "skewx":return z=l(z.d[0]),[1,0,0,0,Math.tan(z),1,0,0,0,0,1,0,0,0,0,1];case "skewy":return z=l(z.d[0]),[1,Math.tan(z),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "translate":return E=z.d[0].px||0,G=
z.d[1].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,G,0,1];case "translatex":return E=z.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,0,0,1];case "translatey":return G=z.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,G,0,1];case "translatez":return J=z.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,J,1];case "translate3d":return E=z.d[0].px||0,G=z.d[1].px||0,J=z.d[2].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,G,J,1];case "perspective":return[1,0,0,0,0,1,0,0,0,0,1,z.d[0].px?-1/z.d[0].px:0,0,0,0,1];case "matrix":return[z.d[0],z.d[1],0,0,z.d[2],
z.d[3],0,0,0,0,1,0,z.d[4],z.d[5],0,1];case "matrix3d":return z.d}}function u(z){return 0===z.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:z.map(p).reduce(e)}var x=function(){function z(K){return K[0][0]*K[1][1]*K[2][2]+K[1][0]*K[2][1]*K[0][2]+K[2][0]*K[0][1]*K[1][2]-K[0][2]*K[1][1]*K[2][0]-K[1][2]*K[2][1]*K[0][0]-K[2][2]*K[0][1]*K[1][0]}function E(K){var T=G(K);return[K[0]/T,K[1]/T,K[2]/T]}function G(K){return Math.sqrt(K[0]*K[0]+K[1]*K[1]+K[2]*K[2])}function J(K,T,P,da){return[P*K[0]+da*T[0],P*K[1]+
da*T[1],P*K[2]+da*T[2]]}return function(K){K=[K.slice(0,4),K.slice(4,8),K.slice(8,12),K.slice(12,16)];if(1!==K[3][3])return null;for(var T=[],P=0;4>P;P++)T.push(K[P].slice());for(P=0;3>P;P++)T[P][3]=0;if(0===z(T))return null;var da=[];if(K[0][3]||K[1][3]||K[2][3]){da.push(K[0][3]);da.push(K[1][3]);da.push(K[2][3]);da.push(K[3][3]);var fa=1/z(T),ka=T[0][0],za=T[0][1];P=T[0][2];var Ia=T[1][0],N=T[1][1],ia=T[1][2],W=T[2][0],ca=T[2][1],sa=T[2][2];fa=[[(N*sa-ia*ca)*fa,(P*ca-za*sa)*fa,(za*ia-P*N)*fa,0],
[(ia*W-Ia*sa)*fa,(ka*sa-P*W)*fa,(P*Ia-ka*ia)*fa,0],[(Ia*ca-N*W)*fa,(W*za-ka*ca)*fa,(ka*N-za*Ia)*fa,0]];ka=[];for(za=0;3>za;za++){for(Ia=P=0;3>Ia;Ia++)P+=T[3][Ia]*fa[Ia][za];ka.push(P)}T=(ka.push(1),fa.push(ka),fa);T=[[T[0][0],T[1][0],T[2][0],T[3][0]],[T[0][1],T[1][1],T[2][1],T[3][1]],[T[0][2],T[1][2],T[2][2],T[3][2]],[T[0][3],T[1][3],T[2][3],T[3][3]]];fa=[];for(ka=0;4>ka;ka++){for(P=za=0;4>P;P++)za+=da[P]*T[P][ka];fa.push(za)}da=fa}else da=[0,0,0,1];T=K[3].slice(0,3);fa=[];fa.push(K[0].slice(0,3));
ka=[];ka.push(G(fa[0]));fa[0]=E(fa[0]);za=[];fa.push(K[1].slice(0,3));za.push(b(fa[0],fa[1]));fa[1]=J(fa[1],fa[0],1,-za[0]);ka.push(G(fa[1]));fa[1]=E(fa[1]);za[0]/=ka[1];fa.push(K[2].slice(0,3));za.push(b(fa[0],fa[2]));fa[2]=J(fa[2],fa[0],1,-za[1]);za.push(b(fa[1],fa[2]));fa[2]=J(fa[2],fa[1],1,-za[2]);ka.push(G(fa[2]));fa[2]=E(fa[2]);za[1]/=ka[2];za[2]/=ka[2];K=fa[1];P=fa[2];if(0>b(fa[0],[K[1]*P[2]-K[2]*P[1],K[2]*P[0]-K[0]*P[2],K[0]*P[1]-K[1]*P[0]]))for(P=0;3>P;P++)ka[P]*=-1,fa[P][0]*=-1,fa[P][1]*=
-1,fa[P][2]*=-1;var la,Aa;K=fa[0][0]+fa[1][1]+fa[2][2]+1;return 1E-4<K?(la=.5/Math.sqrt(K),Aa=[(fa[2][1]-fa[1][2])*la,(fa[0][2]-fa[2][0])*la,(fa[1][0]-fa[0][1])*la,.25/la]):fa[0][0]>fa[1][1]&&fa[0][0]>fa[2][2]?(la=2*Math.sqrt(1+fa[0][0]-fa[1][1]-fa[2][2]),Aa=[.25*la,(fa[0][1]+fa[1][0])/la,(fa[0][2]+fa[2][0])/la,(fa[2][1]-fa[1][2])/la]):fa[1][1]>fa[2][2]?(la=2*Math.sqrt(1+fa[1][1]-fa[0][0]-fa[2][2]),Aa=[(fa[0][1]+fa[1][0])/la,.25*la,(fa[1][2]+fa[2][1])/la,(fa[0][2]-fa[2][0])/la]):(la=2*Math.sqrt(1+
fa[2][2]-fa[0][0]-fa[1][1]),Aa=[(fa[0][2]+fa[2][0])/la,(fa[1][2]+fa[2][1])/la,.25*la,(fa[1][0]-fa[0][1])/la]),[T,ka,za,Aa,da]}}();d.dot=b;d.makeMatrixDecomposition=function(z){return[x(u(z))]};d.transformListToMatrix=u})(m);(function(d){function k(p,u){var x=p.exec(u);if(x)return x=p.ignoreCase?x[0].toLowerCase():x[0],[x,u.substr(x.length)]}function b(p,u){u=u.replace(/^\s*/,"");if(p=p(u))return[p[0],p[1].replace(/^\s*/,"")]}function e(p,u){for(var x=p,z=u;x&&z;)x>z?x%=z:z%=x;return p*u/(x+z)}function l(p,
u,x,z,E){for(var G=[],J=[],K=[],T=e(z.length,E.length),P=0;P<T;P++){var da=u(z[P%z.length],E[P%E.length]);if(!da)return;G.push(da[0]);J.push(da[1]);K.push(da[2])}return[G,J,function(fa){fa=fa.map(function(ka,za){return K[za](ka)}).join(x);return p?p(fa):fa}]}d.consumeToken=k;d.consumeTrimmed=b;d.consumeRepeated=function(p,u,x){p=b.bind(null,p);for(var z=[];;){var E=p(x);if(!E||(z.push(E[0]),x=E[1],!(E=k(u,x))||""==E[1]))return[z,x];x=E[1]}};d.consumeParenthesised=function(p,u){for(var x=0,z=0;z<u.length&&
(!/\s|,/.test(u[z])||0!=x);z++)if("("==u[z])x++;else if(")"==u[z]&&(x--,0==x&&z++,0>=x))break;p=p(u.substr(0,z));return void 0==p?void 0:[p,u.substr(z)]};d.ignore=function(p){return function(u){u=p(u);return u&&(u[0]=void 0),u}};d.optional=function(p,u){return function(x){return p(x)||[u,x]}};d.consumeList=function(p,u){for(var x=[],z=0;z<p.length;z++){u=d.consumeTrimmed(p[z],u);if(!u||""==u[0])return;void 0!==u[0]&&x.push(u[0]);u=u[1]}if(""==u)return x};d.mergeNestedRepeated=l.bind(null,null);d.mergeWrappedNestedRepeated=
l;d.mergeList=function(p,u,x){for(var z=[],E=[],G=[],J=0,K=0;K<x.length;K++)if("function"==typeof x[K]){var T=x[K](p[J],u[J++]);z.push(T[0]);E.push(T[1]);G.push(T[2])}else!function(P){z.push(!1);E.push(!1);G.push(function(){return x[P]})}(K);return[z,E,function(P){for(var da="",fa=0;fa<P.length;fa++)da+=G[fa](P[fa]);return da}]}})(m);(function(d){function k(e){var l={inset:!1,lengths:[],color:null};if((e=d.consumeRepeated(function(p){var u=d.consumeToken(/^inset/i,p);return u?(l.inset=!0,u):(u=d.consumeLengthOrPercent(p))?
(l.lengths.push(u[0]),u):(u=d.consumeColor(p),u?(l.color=u[0],u):void 0)},/^/,e))&&e[0].length)return[l,e[1]]}var b=function(e,l,p,u){function x(T){return{inset:T,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var z=[],E=[],G=0;G<p.length||G<u.length;G++){var J=p[G]||x(u[G].inset),K=u[G]||x(p[G].inset);z.push(J);E.push(K)}return d.mergeNestedRepeated(e,l,z,E)}.bind(null,function(e,l){for(;e.lengths.length<Math.max(e.lengths.length,l.lengths.length);)e.lengths.push({px:0});for(;l.lengths.length<
Math.max(e.lengths.length,l.lengths.length);)l.lengths.push({px:0});if(e.inset==l.inset&&!!e.color==!!l.color){for(var p,u=[],x=[[],0],z=[[],0],E=0;E<e.lengths.length;E++){var G=d.mergeDimensions(e.lengths[E],l.lengths[E],2==E);x[0].push(G[0]);z[0].push(G[1]);u.push(G[2])}e.color&&l.color&&(l=d.mergeColors(e.color,l.color),x[1]=l[0],z[1]=l[1],p=l[2]);return[x,z,function(J){for(var K=e.inset?"inset ":" ",T=0;T<u.length;T++)K+=u[T](J[0][T])+" ";return p&&(K+=p(J[1])),K}]}},", ");d.addPropertiesHandler(function(e){if((e=
d.consumeRepeated(k,/^,/,e))&&""==e[1])return e[0]},b,["box-shadow","text-shadow"])})(m);(function(d,k){function b(x){return x.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function e(x,z,E){return Math.min(z,Math.max(x,E))}function l(x){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(x))return Number(x)}function p(x,z){return function(E,G){return[E,G,function(J){return b(e(x,z,J))}]}}function u(x){x=x.trim().split(/\s*[\s,]\s*/);if(0!==x.length){for(var z=[],E=0;E<x.length;E++){var G=l(x[E]);if(void 0===G)return;
z.push(G)}return z}}d.clamp=e;d.addPropertiesHandler(u,function(x,z){if(x.length==z.length)return[x,z,function(E){return E.map(b).join(" ")}]},["stroke-dasharray"]);d.addPropertiesHandler(l,p(0,1/0),["border-image-width","line-height"]);d.addPropertiesHandler(l,p(0,1),["opacity","shape-image-threshold"]);d.addPropertiesHandler(l,function(x,z){if(0!=x)return p(0,1/0)(x,z)},["flex-grow","flex-shrink"]);d.addPropertiesHandler(l,function(x,z){return[x,z,function(E){return Math.round(e(1,1/0,E))}]},["orphans",
"widows"]);d.addPropertiesHandler(l,function(x,z){return[x,z,Math.round]},["z-index"]);d.parseNumber=l;d.parseNumberList=u;d.mergeNumbers=function(x,z){return[x,z,b]};d.numberToString=b})(m);(function(d,k){d.addPropertiesHandler(String,function(b,e){if("visible"==b||"visible"==e)return[0,1,function(l){return 0>=l?b:1<=l?e:"visible"}]},["visibility"])})(m);(function(d,k){function b(p){p=p.trim();l.fillStyle="#000";l.fillStyle=p;var u=l.fillStyle;if(l.fillStyle="#fff",l.fillStyle=p,u==l.fillStyle)return l.fillRect(0,
0,1,1),p=l.getImageData(0,0,1,1).data,l.clearRect(0,0,1,1),u=p[3]/255,[p[0]*u,p[1]*u,p[2]*u,u]}function e(p,u){return[p,u,function(x){if(x[3])for(var z=0;3>z;z++)x[z]=Math.round(Math.max(0,Math.min(255,x[z]/x[3])));return x[3]=d.numberToString(d.clamp(0,1,x[3])),"rgba("+x.join(",")+")"}]}k=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");k.width=k.height=1;var l=k.getContext("2d");d.addPropertiesHandler(b,e,"background-color border-bottom-color border-left-color border-right-color border-top-color color fill flood-color lighting-color outline-color stop-color stroke text-decoration-color".split(" "));
d.consumeColor=d.consumeParenthesised.bind(null,b);d.mergeColors=e})(m);(function(d,k){function b(E){function G(){var fa=da.exec(E);P=fa?fa[0]:void 0}function J(){if("("!==P){var fa=Number(P);return G(),fa}G();fa=T();return")"!==P?NaN:(G(),fa)}function K(){for(var fa=J();"*"===P||"/"===P;){var ka=P;G();var za=J();"*"===ka?fa*=za:fa/=za}return fa}function T(){for(var fa=K();"+"===P||"-"===P;){var ka=P;G();var za=K();"+"===ka?fa+=za:fa-=za}return fa}var P,da=/([\+\-\w\.]+|[\(\)\*\/])/g;return G(),T()}
function e(E,G){if("0"==(G=G.trim().toLowerCase())&&0<="px".search(E))return{px:0};if(/^[^(]*$|^calc/.test(G)){G=G.replace(/calc\(/g,"(");var J={};G=G.replace(E,function(fa){return J[fa]=null,"U"+fa});E="U("+E.source+")";for(var K=G.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+E,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),T=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],P=0;P<T.length;)T[P].test(K)?(K=K.replace(T[P],"$1"),P=0):P++;if("D"==K){for(var da in J){K=
b(G.replace(new RegExp("U"+da,"g"),"").replace(new RegExp(E,"g"),"*0"));if(!isFinite(K))return;J[da]=K}return J}}}function l(E,G){return p(E,G,!0)}function p(E,G,J){var K,T=[];for(K in E)T.push(K);for(K in G)0>T.indexOf(K)&&T.push(K);return E=T.map(function(P){return E[P]||0}),G=T.map(function(P){return G[P]||0}),[E,G,function(P){var da=P.map(function(fa,ka){return 1==P.length&&J&&(fa=Math.max(fa,0)),d.numberToString(fa)+T[ka]}).join(" + ");return 1<P.length?"calc("+da+")":da}]}var u=e.bind(null,
/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g);k=e.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g);var x=e.bind(null,/deg|rad|grad|turn/g);d.parseLength=u;d.parseLengthOrPercent=k;d.consumeLengthOrPercent=d.consumeParenthesised.bind(null,k);d.parseAngle=x;d.mergeDimensions=p;u=d.consumeParenthesised.bind(null,u);u=d.consumeRepeated.bind(void 0,u,/^/);var z=d.consumeRepeated.bind(void 0,u,/^,/);d.consumeSizePairList=z;u=d.mergeNestedRepeated.bind(void 0,l," ");x=d.mergeNestedRepeated.bind(void 0,
u,",");d.mergeNonNegativeSizePair=u;d.addPropertiesHandler(function(E){if((E=z(E))&&""==E[1])return E[0]},x,["background-size"]);d.addPropertiesHandler(k,l,"border-bottom-width border-image-width border-left-width border-right-width border-top-width flex-basis font-size height line-height max-height max-width outline-width width".split(" "));d.addPropertiesHandler(k,p,"border-bottom-left-radius border-bottom-right-radius border-top-left-radius border-top-right-radius bottom left letter-spacing margin-bottom margin-left margin-right margin-top min-height min-width outline-offset padding-bottom padding-left padding-right padding-top perspective right shape-margin stroke-dashoffset text-indent top vertical-align word-spacing".split(" "))})(m);
(function(d,k){function b(l){return d.consumeLengthOrPercent(l)||d.consumeToken(/^auto/,l)}function e(l){if((l=d.consumeList([d.ignore(d.consumeToken.bind(null,/^rect/)),d.ignore(d.consumeToken.bind(null,/^\(/)),d.consumeRepeated.bind(null,b,/^,/),d.ignore(d.consumeToken.bind(null,/^\)/))],l))&&4==l[0].length)return l[0]}k=d.mergeWrappedNestedRepeated.bind(null,function(l){return"rect("+l+")"},function(l,p){return"auto"==l||"auto"==p?[!0,!1,function(u){u=u?l:p;if("auto"==u)return"auto";u=d.mergeDimensions(u,
u);return u[2](u[0])}]:d.mergeDimensions(l,p)},", ");d.parseBox=e;d.mergeBoxes=k;d.addPropertiesHandler(e,k,["clip"])})(m);(function(d,k){function b(K){return function(T){var P=0;return K.map(function(da){return da===z?T[P++]:da})}}function e(K){return K}function l(K){if("none"==(K=K.toLowerCase().trim()))return[];for(var T,P=/\s*(\w+)\(([^)]*)\)/g,da=[],fa=0;(T=P.exec(K))&&T.index==fa;){fa=T.index+T[0].length;var ka=T[1],za=J[ka];if(!za)break;T=T[2].split(",");za=za[0];if(za.length<T.length)break;
for(var Ia=[],N=0;N<za.length;N++){var ia=T[N];var W=za[N];if(void 0===(ia=ia?{A:function(ca){return"0"==ca.trim()?G:d.parseAngle(ca)},N:d.parseNumber,T:d.parseLengthOrPercent,L:d.parseLength}[W.toUpperCase()](ia):{a:G,n:Ia[0],t:E}[W]))return;Ia.push(ia)}if(da.push({t:ka,d:Ia}),P.lastIndex==K.length)return da}}function p(K){return K.toFixed(6).replace(".000000","")}function u(K,T){if(K.decompositionPair!==T){K.decompositionPair=T;var P=d.makeMatrixDecomposition(K)}if(T.decompositionPair!==K){T.decompositionPair=
K;var da=d.makeMatrixDecomposition(T)}return null==P[0]||null==da[0]?[[!1],[!0],function(fa){return fa?T[0].d:K[0].d}]:(P[0].push(0),da[0].push(1),[P,da,function(fa){var ka=d.quat(P[0][3],da[0][3],fa[5]);return d.composeMatrix(fa[0],fa[1],fa[2],ka,fa[4]).map(p).join(",")}])}function x(K){return K.replace(/(x|y|z|3d)?$/,"3d")}var z=null,E={px:0},G={deg:0},J={matrix:["NNNNNN",[z,z,0,0,z,z,0,0,0,0,1,0,z,z,0,1],e],matrix3d:["NNNNNNNNNNNNNNNN",e],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],
rotate3d:["NNNA"],perspective:["L"],scale:["Nn",b([z,z,1]),e],scalex:["N",b([z,1,1]),b([z,1])],scaley:["N",b([1,z,1]),b([1,z])],scalez:["N",b([1,1,z])],scale3d:["NNN",e],skew:["Aa",null,e],skewx:["A",null,b([z,G])],skewy:["A",null,b([G,z])],translate:["Tt",b([z,z,E]),e],translatex:["T",b([z,E,E]),b([z,E])],translatey:["T",b([E,z,E]),b([E,z])],translatez:["L",b([E,E,z])],translate3d:["TTL",e]};d.addPropertiesHandler(l,function(K,T){var P=d.makeMatrixDecomposition&&!0,da=!1;if(!K.length||!T.length){K.length||
(da=!0,K=T,T=[]);for(var fa=0;fa<K.length;fa++){var ka=K[fa].t,za=K[fa].d,Ia="scale"==ka.substr(0,5)?1:0;T.push({t:ka,d:za.map(function(Ea){if("number"==typeof Ea)return Ia;var ua={},ya;for(ya in Ea)ua[ya]=Ia;return ua})})}}za=[];var N=[],ia=[];if(K.length!=T.length){if(!P)return;var W=u(K,T);za=[W[0]];N=[W[1]];ia=[["matrix",[W[2]]]]}else for(fa=0;fa<K.length;fa++){ka=K[fa].t;var ca=T[fa].t,sa=K[fa].d,la=T[fa].d;W=J[ka];var Aa=J[ca];if("perspective"==ka&&"perspective"==ca||!("matrix"!=ka&&"matrix3d"!=
ka||"matrix"!=ca&&"matrix3d"!=ca)){if(!P)return;W=u([K[fa]],[T[fa]]);za.push(W[0]);N.push(W[1]);ia.push(["matrix",[W[2]]])}else{if(ka!=ca)if(W[2]&&Aa[2]&&ka.replace(/[xy]/,"")==ca.replace(/[xy]/,""))ka=ka.replace(/[xy]/,""),sa=W[2](sa),la=Aa[2](la);else{if(!W[1]||!Aa[1]||x(ka)!=x(ca)){if(!P)return;W=u(K,T);za=[W[0]];N=[W[1]];ia=[["matrix",[W[2]]]];break}ka=x(ka);sa=W[1](sa);la=Aa[1](la)}Aa=[];ca=[];for(var ib=[],ob=0;ob<sa.length;ob++)W=("number"==typeof sa[ob]?d.mergeNumbers:d.mergeDimensions)(sa[ob],
la[ob]),Aa[ob]=W[0],ca[ob]=W[1],ib.push(W[2]);za.push(Aa);N.push(ca);ia.push([ka,ib])}}da&&(K=za,za=N,N=K);return[za,N,function(Ea){return Ea.map(function(ua,ya){ua=ua.map(function(Sa,Qb){return ia[ya][1][Qb](Sa)}).join(",");return"matrix"==ia[ya][0]&&16==ua.split(",").length&&(ia[ya][0]="matrix3d"),ia[ya][0]+"("+ua+")"}).join(" ")}]},["transform"]);d.transformToSvgMatrix=function(K){K=d.transformListToMatrix(l(K));return"matrix("+p(K[0])+" "+p(K[1])+" "+p(K[4])+" "+p(K[5])+" "+p(K[12])+" "+p(K[13])+
")"}})(m);(function(d){function k(b){return b=100*Math.round(b/100),b=d.clamp(100,900,b),400===b?"normal":700===b?"bold":String(b)}d.addPropertiesHandler(function(b){b=Number(b);if(!(isNaN(b)||100>b||900<b||0!=b%100))return b},function(b,e){return[b,e,k]},["font-weight"])})(m);(function(d){function k(u){return d.consumeToken(/^(left|center|right|top|bottom)\b/i,u)||d.consumeLengthOrPercent(u)}function b(u,x){if((x=d.consumeRepeated(k,/^/,x))&&""==x[1]&&(x=x[0],x[0]=x[0]||"center",x[1]=x[1]||"center",
3==u&&(x[2]=x[2]||{px:0}),x.length==u)){if(/top|bottom/.test(x[0])||/left|right/.test(x[1]))u=x[0],x[0]=x[1],x[1]=u;if(/left|right|center|Object/.test(x[0])&&/top|bottom|center|Object/.test(x[1]))return x.map(function(z){return"object"==typeof z?z:l[z]})}}function e(u){if(u=d.consumeRepeated(k,/^/,u)){for(var x=u[0],z=[{"%":50},{"%":50}],E=0,G=!1,J=0;J<x.length;J++){var K=x[J];if("string"==typeof K)G=/bottom|right/.test(K),E={left:0,right:0,center:E,top:1,bottom:1}[K],z[E]=l[K],"center"==K&&E++;else{if(G){G=
void 0;var T={};for(G in K)T[G]=-K[G];K=T;K["%"]=(K["%"]||0)+100}z[E]=K;E++;G=!1}}return[z,u[1]]}}var l={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},p=d.mergeNestedRepeated.bind(null,d.mergeDimensions," ");d.addPropertiesHandler(b.bind(null,3),p,["transform-origin"]);d.addPropertiesHandler(b.bind(null,2),p,["perspective-origin"]);d.consumePosition=e;d.mergeOffsetList=p;p=d.mergeNestedRepeated.bind(null,p,", ");d.addPropertiesHandler(function(u){if((u=d.consumeRepeated(e,
/^,/,u))&&""==u[1])return u[0]},p,["background-position","object-position"])})(m);(function(d){var k=d.consumeParenthesised.bind(null,d.parseLengthOrPercent),b=d.consumeRepeated.bind(void 0,k,/^/),e=d.mergeNestedRepeated.bind(void 0,d.mergeDimensions," "),l=d.mergeNestedRepeated.bind(void 0,e,",");d.addPropertiesHandler(function(p){var u=d.consumeToken(/^circle/,p);return u&&u[0]?["circle"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),k,d.ignore(d.consumeToken.bind(void 0,/^at/)),
d.consumePosition,d.ignore(d.consumeToken.bind(void 0,/^\)/))],u[1])):(u=d.consumeToken(/^ellipse/,p))&&u[0]?["ellipse"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),b,d.ignore(d.consumeToken.bind(void 0,/^at/)),d.consumePosition,d.ignore(d.consumeToken.bind(void 0,/^\)/))],u[1])):(p=d.consumeToken(/^polygon/,p))&&p[0]?["polygon"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),d.optional(d.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),d.consumeSizePairList,
d.ignore(d.consumeToken.bind(void 0,/^\)/))],p[1])):void 0},function(p,u){if(p[0]===u[0])return"circle"==p[0]?d.mergeList(p.slice(1),u.slice(1),["circle(",d.mergeDimensions," at ",d.mergeOffsetList,")"]):"ellipse"==p[0]?d.mergeList(p.slice(1),u.slice(1),["ellipse(",d.mergeNonNegativeSizePair," at ",d.mergeOffsetList,")"]):"polygon"==p[0]&&p[1]==u[1]?d.mergeList(p.slice(2),u.slice(2),["polygon(",p[1],l,")"]):void 0},["shape-outside"])})(m);(function(d,k){function b(p,u){u.concat([p]).forEach(function(x){x in
document.documentElement.style&&(e[p]=x);l[x]=p})}var e={},l={};b("transform",["webkitTransform","msTransform"]);b("transformOrigin",["webkitTransformOrigin"]);b("perspective",["webkitPerspective"]);b("perspectiveOrigin",["webkitPerspectiveOrigin"]);d.propertyName=function(p){return e[p]||p};d.unprefixedPropertyName=function(p){return l[p]||p}})(m)})();(function(){if(void 0===document.createElement("div").animate([]).oncancel){var n=window.performance&&performance.now?function(){return performance.now()}:
function(){return Date.now()};var a=function(k,b,e){(this||tc).target=k;(this||tc).currentTime=b;(this||tc).timelineTime=e;(this||tc).type="cancel";(this||tc).bubbles=!1;(this||tc).cancelable=!1;(this||tc).currentTarget=k;(this||tc).defaultPrevented=!1;(this||tc).eventPhase=Event.AT_TARGET;(this||tc).timeStamp=Date.now()},d=window.Element.prototype.animate;window.Element.prototype.animate=function(k,b){k=d.call(this||tc,k,b);k._cancelHandlers=[];k.oncancel=null;var e=k.cancel;k.cancel=function(){e.call(this||
tc);var u=new a(this||tc,null,n()),x=(this||tc)._cancelHandlers.concat((this||tc).oncancel?[(this||tc).oncancel]:[]);setTimeout(function(){x.forEach(function(z){z.call(u.target,u)})},0)};var l=k.addEventListener;k.addEventListener=function(u,x){"function"==typeof x&&"cancel"==u?(this||tc)._cancelHandlers.push(x):l.call(this||tc,u,x)};var p=k.removeEventListener;return k.removeEventListener=function(u,x){"cancel"==u?(u=(this||tc)._cancelHandlers.indexOf(x),0<=u&&(this||tc)._cancelHandlers.splice(u,
1)):p.call(this||tc,u,x)},k}}})();(function(n){var a=document.documentElement,d=null,k=!1;try{var b="0"==getComputedStyle(a).getPropertyValue("opacity")?"1":"0";d=a.animate({opacity:[b,b]},{duration:1});d.currentTime=0;k=getComputedStyle(a).getPropertyValue("opacity")==b}catch(l){}finally{d&&d.cancel()}if(!k){var e=window.Element.prototype.animate;window.Element.prototype.animate=function(l,p){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&l[Symbol.iterator]&&(l=Array.from(l)),Array.isArray(l)||
null===l||(l=n.convertToArrayForm(l)),e.call(this||tc,l,p)}}})(f)}();var Df=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js");Df.convertToSvgEasing=function(f){for(var m in Df.easings)if(Df.easings[m]===f){if(m.includes("inOut"))return m.replace("inOut","").toLowerCase()+"InOut";if(m.includes("out"))return m.replace("out","").toLowerCase()+"Out";if(m.includes("in"))return m.replace("in","").toLowerCase()+"In"}};Df.stringToEasing=St;Df.obj=eg;Df.promise=bh;Df.fun=Vl;Df.num=
zl;Df.properties=go;Df.arr=Gf;Df.string=Dh;Df.Color=ng;Df.styleProps=UC;Df.addPathAttributes=WC;Df.addSvgAttributes=VC;Df.flubber=VV;Df.Bezier=hra;Df.ShadowObject=Gp;var No=Ma("e",{inQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",inCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",inQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",inQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",inSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",inExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",inCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",
inBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",outQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",outCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",outQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",outQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",outSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",outExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",outCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",outBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",inOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",
inOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",inOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",inOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",inOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)",inOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",inOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",inOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",linear:"cubic-bezier(0.5, 0.5, 0.5, 0.5)"});Df.easings=No;Df.easings=No;Df.easings=No;Df.stringToEasing=St;Df.stringToEasing=
St;var KM=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=m.hasOwnProperty("AnimationQueue")&&"function"===typeof m.AnimationQueue?m.AnimationQueue:m.AnimationQueue=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.morph=a;this.animations=[]}},{key:"maskedProps",value:function(a){return 0<this.animations.length?
Df.obj.merge(this.animations.map(function(d){return d.getAnimationProps(a)[0]})):{}}},{key:"animationsActive",get:function(){return!0}},{key:"registerAnimation",value:function(a){var d=this,k=new Df.PropertyAnimation(this,this.morph,a);this.morph.makeDirty();return this.morph.withMetaDo({animation:k},function(){var b=k.affectsMorph&&d.animations.find(function(l){return l.equals(k)});if(!b){var e;if(e=d.animations.find(function(l){return l.canMerge(k)}))return e.mergeWith(k),e;if(k.affectsMorph)return k.assignProps(),
d.animations.push(k),k}return b})}},{key:"startAnimationsFor",value:function(a){for(var d=0;d<this.animations.length;d++)this.animations[d].start(a)}},{key:"startSvgAnimationsFor",value:function(a,d){this.animations.forEach(function(k){return k.startSvg(a,d)})}},{key:"removeAnimation",value:function(a){Df.arr.remove(this.animations,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AnimationQueue"}}],m,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2443,end:3747})}(void 0);Df.AnimationQueue=KM;Df.AnimationQueue=KM;Df.AnimationQueue=KM;var gW=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=m.hasOwnProperty("PropertyAnimation")&&"function"===typeof m.PropertyAnimation?m.PropertyAnimation:m.PropertyAnimation=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k){var b=this;this.queue=a;this.morph=d;if(d.isPath&&"fill"in k){var e=d.fill||Df.Color.transparent,l=k.fill;k.customTween=Df.fun.compose(function(E){d.fill=e.interpolate(E,l);return E},k.customTween||function(E){});delete k.fill;d.fill=e}if("dropShadow"in k){var p=d.dropShadow||new Df.ShadowObject({blur:0,distance:0,spread:0}),u=k.dropShadow;k.customTween=
Df.fun.compose(function(E){d.dropShadow=p.interpolate(E,u||new Df.ShadowObject({blur:0,distance:0,spread:0}));1==E&&(d.dropShadow=u);return E},k.customTween||function(E){});delete k.dropShadow;d.dropShadow=p}if("visible"in k&&k.visible!=d.visible){var x=void 0===a.originalOpacity?d.opacity:a.originalOpacity;a.originalOpacity=x;var z=k.visible;k.customTween=Df.fun.compose(function(E){if(b._otherVisibleTransformationInProgress)return E;0==E&&1==z&&(d.visible=!0);d.opacity=z?Df.num.interpolate(E,0,x):
Df.num.interpolate(E,x,0);1==E&&(d.visible=z,d.opacity=x,delete a.originalOpacity);return E},k.customTween||function(E){});this.queue.animations.forEach(function(E){return E._otherVisibleTransformationInProgress=!0});delete k.visible}this.config=this.convertBounds(k);this.needsAnimation={svg:d.isSvgMorph,path:d.isPath};this.capturedProperties=Df.obj.select(this.morph,this.propsToCapture)}},{key:"propsToCapture",get:function(){return["fill","origin"]}},{key:"asPromise",value:function(){var a=this;
return this._promise||(this._promise=new Promise(function(d,k){a.resolveCallback=function(){a.onFinish(a);a.subAnimations?a.subAnimations.then(d):d(a.morph)}}))}},{key:"finish",value:function(a){var d=this;this.config.scale&&this.morph.whenRendered().then(function(){return d.morph.withAllSubmorphsDo(function(k){return k.isText&&k.invalidateTextLayout(!0,!0)})});this.needsAnimation[a]=!1;Df.arr.any(Df.obj.values(this.needsAnimation),Boolean)||(this.queue.removeAnimation(this),this.resolveCallback?
this.resolveCallback():this.onFinish())}},{key:"convertBounds",value:function(a){var d=a.bounds,k=a.origin,b=a.rotation,e=a.scale;k=k||this.morph.origin;b=b||this.morph.rotation;e=e||this.morph.scale;return d?Object.assign({},Df.obj.dissoc(a,["bounds"]),{origin:k,rotation:b,scale:e,position:d.topLeft().addPt(k),extent:d.extent()}):a}},{key:"equals",value:function(a){return!this.config.customTween&&!a.config.customTweem&&Df.obj.equals(this.animatedProps,a.animatedProps)}},{key:"canMerge",value:function(a){return this.easing==
a.easing&&this.duration==a.duration}},{key:"mergeWith",value:function(a){var d=this.config.customTween;Object.assign(this.morph,a.animatedProps);Object.assign(this.config,a.config);this.config.customTween=function(k){d&&d(k);a.config.customTween&&a.config.customTween(k);return k};this.afterProps=this.gatherAnimationProps()}},{key:"affectsMorph",get:function(){var a=this;return!!this.config.customTween||Df.properties.any(this.animatedProps,function(d,k){return!Df.obj.equals(d[k],a.morph[k])})}},{key:"animatedProps",
get:function(){return Df.obj.dissoc(this.config,["customTween","easing","onFinish","duration"])}},{key:"easing",get:function(){return this.config.easing||Df.easings.inOutQuad}},{key:"onFinish",get:function(){return this.config.onFinish||function(){}}},{key:"setonFinish",value:function(a){this.config.onFinish=a}},{key:"duration",get:function(){return this.config.duration||1E3}},{key:"getChangedProps",value:function(a,d){var k=[],b;for(b in a)Df.obj.equals(d[b],a[b])&&k.push(b);return[Df.obj.dissoc(a,
k),Df.obj.dissoc(d,k)]}},{key:"getAnimationProps",value:function(a){var d=$jscomp.makeIterator(this.getChangedProps(this.beforeProps[a],this.afterProps[a])),k=d.next().value;d=d.next().value;var b=this.capturedProperties.fill,e=this.config.fill;this.morph.isPolygon&&"css"==a&&(b=e=!1,delete k.background,delete d.background,delete k.backgroundImage,delete d.backgroundImage);"none"==k.filter&&d.boxShadow&&(delete k.filter,k.boxShadow="none");"none"==d.filter&&k.boxShadow&&(delete d.filter,d.boxShadow=
"none");b&&e&&(b.isGradient||e.isGradient)&&(this.tweenGradient=this.interpolate("gradient",b,e));a=$jscomp.makeIterator(Df.arr.union(Df.obj.keys(k),Df.obj.keys(d)));for(b=a.next();!b.done;b=a.next())b=b.value,b in k||(k[b]=d[b]),b in d||(d[b]=k[b]);return[Df.obj.isEmpty(k)?!1:k,Df.obj.isEmpty(d)?!1:d]}},{key:"gatherAnimationProps",value:function(){var a=this.morph,d=a.isSvgMorph,k=a.isPath,b=a.isPolygon,e={};e.css=Df.styleProps(this.morph);d&&(e.svg=Df.addSvgAttributes(a,{}));k&&(e.path=Df.addPathAttributes(a,
{}));b&&(e.polygon=Df.addPathAttributes(a,{}));return e}},{key:"assignProps",value:function(){var a=this.morph.styleClasses;this.beforeProps=this.gatherAnimationProps();Object.assign(this.morph,this.animatedProps);this.afterProps=this.gatherAnimationProps();this.config.styleClasses&&(this.morph._animatedStyleClasses={removed:Df.arr.withoutAll(a,this.morph.styleClasses),added:Df.arr.withoutAll(this.morph.styleClasses,a),animation:this})}},{key:"interpolate",value:function(a,d,k){var b=this;switch(a){case "scrollTop":case "scrollLeft":return function(e){return Df.num.interpolate(e,
d,k)};case "d":return Df.flubber.interpolate(d,k);case "stroke-width":return function(e){return Df.num.interpolate(e,d,k)};case "stroke":return function(e){return Df.Color.fromString(d).interpolate(e,Df.Color.fromString(k),b.morph.bounds())};case "gradient":return function(e){return d.interpolate(e,k,b.morph.bounds())};case "fill":return d=Df.Color.fromString(d),k=Df.Color.fromString(k),function(e){return d.interpolate(e,k)}}}},{key:"startSvg",value:function(a,d){var k=this;if(this.needsAnimation[d]){this.needsAnimation[d]=
!1;var b=$jscomp.makeIterator(this.getAnimationProps(d)),e=b.next().value;b=b.next().value;var l={},p=Df.stringToEasing(this.easing),u;for(u in e)l[u]=this.interpolate(u,e[u],b[u]);var x,z=function(E){x||(x=E);E-=x;if(1<E/k.duration)return k.finish(d);for(var G in l)l[G]&&a.setAttribute(G,l[G](p(E/k.duration)));requestAnimationFrame(z)};requestAnimationFrame(z)}}},{key:"start",value:function(a){if(!this.active)try{this.active=!0;var d=$jscomp.makeIterator(this.getAnimationProps("css")),k=d.next().value,
b=d.next().value;a&&this.tween(a,k,b);if(this.config.origin){var e=this.capturedProperties.origin,l=this.config.origin,p=a.childNodes[0];p&&this.tween(p,p.style.top?{left:e.x+"px",top:e.y+"px"}:{transform:"translate3d("+e.x+"px, "+e.y+"px, 0px)"},p.style.top?{left:e.x+"px",top:e.y+"px"}:{transform:"translate3d("+l.x+"px, "+l.y+"px, 0px)"})}}catch(u){this.active=!1}}},{key:"tween",value:function(a,d,k,b){var e=this;b=void 0===b?!0:b;var l=this.animatedProps.scroll,p=this.config.customTween,u=!1,x=
function(){b&&(e.finish("css"),e.morph.makeDirty())};if(p){var z,E=Df.stringToEasing(this.easing),G=function(la){z||(z=la);var Aa=Math.min(1,(la-z)/e.duration);e.morph.dontRecordChangesWhile(function(){return p(E(Aa))});if(1<=Aa)return e.finish("css");requestAnimationFrame(G)};requestAnimationFrame(G);u=!0}if(l){var J,K=this.morph.env.eventDispatcher.eventState;u=Df.promise.deferred();var T=u.promise,P=u.resolve,da=this.interpolate("scrollLeft",a.scrollLeft,l.x),fa=this.interpolate("scrollTop",a.scrollTop,
l.y),ka=Df.stringToEasing(this.easing),za=function(la){J||(J=la);la-=J;var Aa=Math.min(1,la/e.duration);a.scrollTop=fa(ka(Aa));a.scrollLeft=da(ka(Aa));if(1<=la/e.duration)return K.scroll.interactiveScrollInProgress=null,P(),e.finish("css");requestAnimationFrame(za)};T.debounce=function(){};requestAnimationFrame(za);u=!0}if(this.tweenGradient&&!this.morph.isPolygon){var Ia,N=Df.stringToEasing(this.easing),ia=function(la){Ia||(Ia=la);la-=Ia;if(1<=la/e.duration)return e.finish("css");a.style.setProperty("background-image",
e.tweenGradient(N(la/e.duration)));requestAnimationFrame(ia)};delete d.backgroundImage;delete k.backgroundImage;delete d.background;delete k.background;requestAnimationFrame(ia);u=!0}else this.tweenGradient&&(u=!0);if(a&&d&&k){l={};T={};for(var W in d)l[Df.string.camelize(W)]=d[W];for(var ca in k)T[Df.string.camelize(ca)]=k[ca];try{var sa=a.animate([l,T],{duration:this.duration,easing:this.easing,fill:"forwards",composite:"replace"});sa.onfinish=function(){x();setTimeout(function(){return sa.cancel()},
200)};u=!0}catch(la){u=!1}}u||x()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PropertyAnimation"}}],m,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3756,end:17169})}(void 0);Df.PropertyAnimation=gW;Df.PropertyAnimation=gW;Df.PropertyAnimation=gW;var mh=
lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js");mh.cumulativeOffset=Gz;mh.createIFrame=function(f,m,n){m=void 0===m?"about:blank":m;n=void 0===n?new mh.Rectangle(0,0,700,700):n;return new Promise(function(a,d){if(!f)throw Error("Need parent element!");var k=document.createElement("iframe");k.style.position="absolute";k.style.top=n.top()+"px";k.style.left=n.left()+"px";k.style.width=n.width+"px";k.style.height=n.height+"px";k.src=m;var b=!1;k.onload=function(e){b=!0;k.onload=
null;a(k)};mh.promise.waitFor(1E3,function(){return!!b}).catch(function(e){return d(Error("iframe load timeout"))});f.appendChild(k)})};mh.requestAnimationFramePolyfill=function(f){for(var m=0,n=["ms","moz","webkit","o"],a=0;a<n.length&&!f.requestAnimationFrame;++a)f.requestAnimationFrame=f[n[a]+"RequestAnimationFrame"],f.cancelAnimationFrame=f[n[a]+"CancelAnimationFrame"]||f[n[a]+"CancelRequestAnimationFrame"];f.requestAnimationFrame||(f.requestAnimationFrame=function(d,k){var b=Date.now(),e=Math.max(0,
16-(b-m));k=f.setTimeout(function(){d(b+e)},e);m=b+e;return k});f.cancelAnimationFrame||(f.cancelAnimationFrame=function(d){clearTimeout(d)})};mh.createDOMEnvironment_browser=function(){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?(f=mh.IFramedDomEnvironment,m.yield(mh.createIFrame(document.body),2)):m.return(new f(m.yieldResult))})};mh.createDOMEnvironment_node=function(){System.decanonicalize("lively.morphic/").replace(/file:\/\//,"");var f=System._nodeRequire("jsdom"),
m=f.createVirtualConsole().sendTo(console);return new Promise(function(n,a){f.env("<div></div>",["https://code.jquery.com/pep/0.4.1/pep.js"],{virtualConsole:m},function(d,k){return d?a(d):n(new mh.DomEnvironment(k,k.document,function(){return k.close()}))})})};mh.createDOMEnvironment=mR;mh.defaultDOMEnv=BI;mh.setCSSDef=function(f,m,n){mh.arr.from(f.childNodes).forEach(function(a){return f.removeChild(a)});m=document.createTextNode(m);f.styleSheet?f.styleSheet.cssText=m.nodeValue:f.appendChild(m);
return f};mh.addCSSDef=function(f,m,n){var a=document.createElement("style");a.type="text/css";f&&a.setAttribute("id",f);mh.setCSSDef(a,m,n);(n.head||n).appendChild(a);return a};mh.addOrChangeCSSDeclaration=fr;mh.addOrChangeLinkedCSS=tw;mh.promise=bh;mh.obj=eg;mh.arr=Gf;mh.Rectangle=Fe;mh.cumulativeOffset=Gz;mh.cumulativeOffset=Gz;mh.createDOMEnvironment=mR;mh.createDOMEnvironment=mR;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=m.hasOwnProperty("DomEnvironment")&&
"function"===typeof m.DomEnvironment?m.DomEnvironment:m.DomEnvironment=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k){mh.requestAnimationFramePolyfill(a);this.window=a;this.document=d;this.destroyFn=k}},{key:"destroy",value:function(){"function"===typeof this.destroyFn&&this.destroyFn()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DomEnvironment"}}],
m,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3079,end:3372})})(void 0);(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=m.hasOwnProperty("IFramedDomEnvironment")&&"function"===typeof m.IFramedDomEnvironment?m.IFramedDomEnvironment:
m.IFramedDomEnvironment=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){$b._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a.contentWindow,a.contentWindow.document,function(){a.contentWindow&&a.contentWindow.close();a.parentNode&&a.parentNode.removeChild(a)});this.iframe=a}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"IFramedDomEnvironment"}}],m,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3374,end:3718})})(mh.DomEnvironment);mh._defaultEnv=mh._defaultEnv||void 0;mh.defaultDOMEnv=BI;mh.defaultDOMEnv=BI;mh.addOrChangeCSSDeclaration=fr;mh.addOrChangeCSSDeclaration=
fr;mh.addOrChangeLinkedCSS=tw;mh.addOrChangeLinkedCSS=tw;var LM=function(){return function(f){f=void 0===f?window.document:f;return function(m,n,a){var d=n||void 0;"undefined"===typeof a&&(a=n,d=void 0);var k=m.split(".");if(1<k.length)for(m=k.shift(),n=0;n<k.length;n++){var b=k[n],e;-1<(e=b.indexOf("#"))&&(b.slice(e+1),b.slice(0,e))}n=m.split("#");1<n.length&&(m=n[0]);m=f.createElement(m);if(d){for(var l in d)"style"!==l&&"dataset"!==l&&"attributes"!==l&&(m[l]=d[l]);if(l=d.style)for(var p in l)m.style[p]=
l[p];if(p=d.dataset)if(m.dataset)for(var u in p)m.dataset[u]=p[u];else for(u in p)m.setAttribute("data-"+u,p[u]);if(d=d.attributes)for(var x in d)d[x]&&mh.obj.isBoolean(d[x])?m.toggleAttribute(x):m.setAttribute(x,d[x])}a||(a="");if("string"===typeof a)m.appendChild(f.createTextNode(a));else if(Array.isArray(a))for(n=0;n<a.length;n++)x=a[n],m.appendChild("string"===typeof x?f.createTextNode(x):x);else m.appendChild("string"===typeof a?f.createTextNode(a):a);return m}}}();mh.hyperscriptFnForDocument=
LM;mh.hyperscriptFnForDocument=LM;mh.hyperscriptFnForDocument=LM;var Hp=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js");Hp.obj=eg;Hp.morph=Dk;var Fn=Ma("I",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js"),n=m.hasOwnProperty("Icon")&&"function"===typeof m.Icon?m.Icon:m.Icon=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,void 0,[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Icon"}},{key:"makeLabel",value:function(a,d){var k=d=void 0===d?{prefix:"",suffix:""}:d,b=k.prefix;k=k.suffix;var e=[];b&&e.push.apply(e,$jscomp.arrayFromIterable("string"===typeof b?[b||"",{}]:b));e.push.apply(e,$jscomp.arrayFromIterable(this.textAttribute(a,Hp.obj.dissoc(d,["fontSize"]))));k&&e.push.apply(e,$jscomp.arrayFromIterable("string"===typeof k?[k||"",{}]:k));return Hp.morph(Object.assign({type:"label",value:e},Hp.obj.dissoc(d,["prefix","suffix"])))}},{key:"textAttribute",
value:function(a,d){d=void 0===d?{}:d;var k=d.textStyleClasses&&d.textStyleClasses.includes("far");return[Hp.Icons[a].code||"icon "+a+" not found",Object.assign({fontFamily:'"Font Awesome 5 Free", "Font Awesome 5 Brands"',fontWeight:k?"400":"900",textStyleClasses:["fas"]},d)]}},{key:"setIcon",value:function(a,d){a.textAndAttributes=this.textAttribute(d)}}],m,{pathInPackage:function(){return"text/icons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:683,end:1811})}(void 0));Hp.Icon=Fn;Hp.Icon=Fn;Hp.Icon=Fn;var MM=Ma("bw",{"500px":{code:"\uf26e"},"accessible-icon":{code:"\uf368"},accusoft:{code:"\uf369"},"acquisitions-incorporated":{code:"\uf6af"},ad:{code:"\uf641"},"address-book":{code:"\uf2b9"},"address-card":{code:"\uf2bb"},adjust:{code:"\uf042"},adn:{code:"\uf170"},adobe:{code:"\uf778"},adversal:{code:"\uf36a"},affiliatetheme:{code:"\uf36b"},"air-freshener":{code:"\uf5d0"},
airbnb:{code:"\uf834"},algolia:{code:"\uf36c"},"align-center":{code:"\uf037"},"align-justify":{code:"\uf039"},"align-left":{code:"\uf036"},"align-right":{code:"\uf038"},alipay:{code:"\uf642"},allergies:{code:"\uf461"},amazon:{code:"\uf270"},"amazon-pay":{code:"\uf42c"},ambulance:{code:"\uf0f9"},"american-sign-language-interpreting":{code:"\uf2a3"},amilia:{code:"\uf36d"},anchor:{code:"\uf13d"},android:{code:"\uf17b"},angellist:{code:"\uf209"},"angle-double-down":{code:"\uf103"},"angle-double-left":{code:"\uf100"},
"angle-double-right":{code:"\uf101"},"angle-double-up":{code:"\uf102"},"angle-down":{code:"\uf107"},"angle-left":{code:"\uf104"},"angle-right":{code:"\uf105"},"angle-up":{code:"\uf106"},angry:{code:"\uf556"},angrycreative:{code:"\uf36e"},angular:{code:"\uf420"},ankh:{code:"\uf644"},"app-store":{code:"\uf36f"},"app-store-ios":{code:"\uf370"},apper:{code:"\uf371"},apple:{code:"\uf179"},"apple-alt":{code:"\uf5d1"},"apple-pay":{code:"\uf415"},archive:{code:"\uf187"},archway:{code:"\uf557"},"arrow-alt-circle-down":{code:"\uf358"},
"arrow-alt-circle-left":{code:"\uf359"},"arrow-alt-circle-right":{code:"\uf35a"},"arrow-alt-circle-up":{code:"\uf35b"},"arrow-circle-down":{code:"\uf0ab"},"arrow-circle-left":{code:"\uf0a8"},"arrow-circle-right":{code:"\uf0a9"},"arrow-circle-up":{code:"\uf0aa"},"arrow-down":{code:"\uf063"},"arrow-left":{code:"\uf060"},"arrow-right":{code:"\uf061"},"arrow-up":{code:"\uf062"},"arrows-alt":{code:"\uf0b2"},"arrows-alt-h":{code:"\uf337"},"arrows-alt-v":{code:"\uf338"},artstation:{code:"\uf77a"},"assistive-listening-systems":{code:"\uf2a2"},
asterisk:{code:"\uf069"},asymmetrik:{code:"\uf372"},at:{code:"\uf1fa"},atlas:{code:"\uf558"},atlassian:{code:"\uf77b"},atom:{code:"\uf5d2"},audible:{code:"\uf373"},"audio-description":{code:"\uf29e"},autoprefixer:{code:"\uf41c"},avianex:{code:"\uf374"},aviato:{code:"\uf421"},award:{code:"\uf559"},aws:{code:"\uf375"},baby:{code:"\uf77c"},"baby-carriage":{code:"\uf77d"},backspace:{code:"\uf55a"},backward:{code:"\uf04a"},bacon:{code:"\uf7e5"},bahai:{code:"\uf666"},"balance-scale":{code:"\uf24e"},"balance-scale-left":{code:"\uf515"},
"balance-scale-right":{code:"\uf516"},ban:{code:"\uf05e"},"band-aid":{code:"\uf462"},bandcamp:{code:"\uf2d5"},barcode:{code:"\uf02a"},bars:{code:"\uf0c9"},"baseball-ball":{code:"\uf433"},"basketball-ball":{code:"\uf434"},bath:{code:"\uf2cd"},"battery-empty":{code:"\uf244"},"battery-full":{code:"\uf240"},"battery-half":{code:"\uf242"},"battery-quarter":{code:"\uf243"},"battery-three-quarters":{code:"\uf241"},"battle-net":{code:"\uf835"},bed:{code:"\uf236"},beer:{code:"\uf0fc"},behance:{code:"\uf1b4"},
"behance-square":{code:"\uf1b5"},bell:{code:"\uf0f3"},"bell-slash":{code:"\uf1f6"},"bezier-curve":{code:"\uf55b"},bible:{code:"\uf647"},bicycle:{code:"\uf206"},biking:{code:"\uf84a"},bimobject:{code:"\uf378"},binoculars:{code:"\uf1e5"},biohazard:{code:"\uf780"},"birthday-cake":{code:"\uf1fd"},bitbucket:{code:"\uf171"},bitcoin:{code:"\uf379"},bity:{code:"\uf37a"},"black-tie":{code:"\uf27e"},blackberry:{code:"\uf37b"},blender:{code:"\uf517"},"blender-phone":{code:"\uf6b6"},blind:{code:"\uf29d"},blog:{code:"\uf781"},
blogger:{code:"\uf37c"},"blogger-b":{code:"\uf37d"},bluetooth:{code:"\uf293"},"bluetooth-b":{code:"\uf294"},bold:{code:"\uf032"},bolt:{code:"\uf0e7"},bomb:{code:"\uf1e2"},bone:{code:"\uf5d7"},bong:{code:"\uf55c"},book:{code:"\uf02d"},"book-dead":{code:"\uf6b7"},"book-medical":{code:"\uf7e6"},"book-open":{code:"\uf518"},"book-reader":{code:"\uf5da"},bookmark:{code:"\uf02e"},bootstrap:{code:"\uf836"},"border-all":{code:"\uf84c"},"border-none":{code:"\uf850"},"border-style":{code:"\uf853"},"bowling-ball":{code:"\uf436"},
box:{code:"\uf466"},"box-open":{code:"\uf49e"},boxes:{code:"\uf468"},braille:{code:"\uf2a1"},brain:{code:"\uf5dc"},"bread-slice":{code:"\uf7ec"},briefcase:{code:"\uf0b1"},"briefcase-medical":{code:"\uf469"},"broadcast-tower":{code:"\uf519"},broom:{code:"\uf51a"},brush:{code:"\uf55d"},btc:{code:"\uf15a"},buffer:{code:"\uf837"},bug:{code:"\uf188"},building:{code:"\uf1ad"},bullhorn:{code:"\uf0a1"},bullseye:{code:"\uf140"},burn:{code:"\uf46a"},buromobelexperte:{code:"\uf37f"},bus:{code:"\uf207"},"bus-alt":{code:"\uf55e"},
"business-time":{code:"\uf64a"},"buy-n-large":{code:"\uf8a6"},buysellads:{code:"\uf20d"},calculator:{code:"\uf1ec"},calendar:{code:"\uf133"},"calendar-alt":{code:"\uf073"},"calendar-check":{code:"\uf274"},"calendar-day":{code:"\uf783"},"calendar-minus":{code:"\uf272"},"calendar-plus":{code:"\uf271"},"calendar-times":{code:"\uf273"},"calendar-week":{code:"\uf784"},camera:{code:"\uf030"},"camera-retro":{code:"\uf083"},campground:{code:"\uf6bb"},"canadian-maple-leaf":{code:"\uf785"},"candy-cane":{code:"\uf786"},
cannabis:{code:"\uf55f"},capsules:{code:"\uf46b"},car:{code:"\uf1b9"},"car-alt":{code:"\uf5de"},"car-battery":{code:"\uf5df"},"car-crash":{code:"\uf5e1"},"car-side":{code:"\uf5e4"},caravan:{code:"\uf8ff"},"caret-down":{code:"\uf0d7"},"caret-left":{code:"\uf0d9"},"caret-right":{code:"\uf0da"},"caret-square-down":{code:"\uf150"},"caret-square-left":{code:"\uf191"},"caret-square-right":{code:"\uf152"},"caret-square-up":{code:"\uf151"},"caret-up":{code:"\uf0d8"},carrot:{code:"\uf787"},"cart-arrow-down":{code:"\uf218"},
"cart-plus":{code:"\uf217"},"cash-register":{code:"\uf788"},cat:{code:"\uf6be"},"cc-amazon-pay":{code:"\uf42d"},"cc-amex":{code:"\uf1f3"},"cc-apple-pay":{code:"\uf416"},"cc-diners-club":{code:"\uf24c"},"cc-discover":{code:"\uf1f2"},"cc-jcb":{code:"\uf24b"},"cc-mastercard":{code:"\uf1f1"},"cc-paypal":{code:"\uf1f4"},"cc-stripe":{code:"\uf1f5"},"cc-visa":{code:"\uf1f0"},centercode:{code:"\uf380"},centos:{code:"\uf789"},certificate:{code:"\uf0a3"},chair:{code:"\uf6c0"},chalkboard:{code:"\uf51b"},"chalkboard-teacher":{code:"\uf51c"},
"charging-station":{code:"\uf5e7"},"chart-area":{code:"\uf1fe"},"chart-bar":{code:"\uf080"},"chart-line":{code:"\uf201"},"chart-pie":{code:"\uf200"},check:{code:"\uf00c"},"check-circle":{code:"\uf058"},"check-double":{code:"\uf560"},"check-square":{code:"\uf14a"},cheese:{code:"\uf7ef"},chess:{code:"\uf439"},"chess-bishop":{code:"\uf43a"},"chess-board":{code:"\uf43c"},"chess-king":{code:"\uf43f"},"chess-knight":{code:"\uf441"},"chess-pawn":{code:"\uf443"},"chess-queen":{code:"\uf445"},"chess-rook":{code:"\uf447"},
"chevron-circle-down":{code:"\uf13a"},"chevron-circle-left":{code:"\uf137"},"chevron-circle-right":{code:"\uf138"},"chevron-circle-up":{code:"\uf139"},"chevron-down":{code:"\uf078"},"chevron-left":{code:"\uf053"},"chevron-right":{code:"\uf054"},"chevron-up":{code:"\uf077"},child:{code:"\uf1ae"},chrome:{code:"\uf268"},chromecast:{code:"\uf838"},church:{code:"\uf51d"},circle:{code:"\uf111"},"circle-notch":{code:"\uf1ce"},city:{code:"\uf64f"},"clinic-medical":{code:"\uf7f2"},clipboard:{code:"\uf328"},
"clipboard-check":{code:"\uf46c"},"clipboard-list":{code:"\uf46d"},clock:{code:"\uf017"},clone:{code:"\uf24d"},"closed-captioning":{code:"\uf20a"},cloud:{code:"\uf0c2"},"cloud-download-alt":{code:"\uf381"},"cloud-meatball":{code:"\uf73b"},"cloud-moon":{code:"\uf6c3"},"cloud-moon-rain":{code:"\uf73c"},"cloud-rain":{code:"\uf73d"},"cloud-showers-heavy":{code:"\uf740"},"cloud-sun":{code:"\uf6c4"},"cloud-sun-rain":{code:"\uf743"},"cloud-upload-alt":{code:"\uf382"},cloudscale:{code:"\uf383"},cloudsmith:{code:"\uf384"},
cloudversify:{code:"\uf385"},cocktail:{code:"\uf561"},code:{code:"\uf121"},"code-branch":{code:"\uf126"},codepen:{code:"\uf1cb"},codiepie:{code:"\uf284"},coffee:{code:"\uf0f4"},cog:{code:"\uf013"},cogs:{code:"\uf085"},coins:{code:"\uf51e"},columns:{code:"\uf0db"},comment:{code:"\uf075"},"comment-alt":{code:"\uf27a"},"comment-dollar":{code:"\uf651"},"comment-dots":{code:"\uf4ad"},"comment-medical":{code:"\uf7f5"},"comment-slash":{code:"\uf4b3"},comments:{code:"\uf086"},"comments-dollar":{code:"\uf653"},
"compact-disc":{code:"\uf51f"},compass:{code:"\uf14e"},compress:{code:"\uf066"},"compress-alt":{code:"\uf422"},"compress-arrows-alt":{code:"\uf78c"},"concierge-bell":{code:"\uf562"},confluence:{code:"\uf78d"},connectdevelop:{code:"\uf20e"},contao:{code:"\uf26d"},cookie:{code:"\uf563"},"cookie-bite":{code:"\uf564"},copy:{code:"\uf0c5"},copyright:{code:"\uf1f9"},"cotton-bureau":{code:"\uf89e"},couch:{code:"\uf4b8"},cpanel:{code:"\uf388"},"creative-commons":{code:"\uf25e"},"creative-commons-by":{code:"\uf4e7"},
"creative-commons-nc":{code:"\uf4e8"},"creative-commons-nc-eu":{code:"\uf4e9"},"creative-commons-nc-jp":{code:"\uf4ea"},"creative-commons-nd":{code:"\uf4eb"},"creative-commons-pd":{code:"\uf4ec"},"creative-commons-pd-alt":{code:"\uf4ed"},"creative-commons-remix":{code:"\uf4ee"},"creative-commons-sa":{code:"\uf4ef"},"creative-commons-sampling":{code:"\uf4f0"},"creative-commons-sampling-plus":{code:"\uf4f1"},"creative-commons-share":{code:"\uf4f2"},"creative-commons-zero":{code:"\uf4f3"},"credit-card":{code:"\uf09d"},
"critical-role":{code:"\uf6c9"},crop:{code:"\uf125"},"crop-alt":{code:"\uf565"},cross:{code:"\uf654"},crosshairs:{code:"\uf05b"},crow:{code:"\uf520"},crown:{code:"\uf521"},crutch:{code:"\uf7f7"},css3:{code:"\uf13c"},"css3-alt":{code:"\uf38b"},cube:{code:"\uf1b2"},cubes:{code:"\uf1b3"},cut:{code:"\uf0c4"},cuttlefish:{code:"\uf38c"},"d-and-d":{code:"\uf38d"},"d-and-d-beyond":{code:"\uf6ca"},dailymotion:{code:"\uf952"},dashcube:{code:"\uf210"},database:{code:"\uf1c0"},deaf:{code:"\uf2a4"},delicious:{code:"\uf1a5"},
democrat:{code:"\uf747"},deploydog:{code:"\uf38e"},deskpro:{code:"\uf38f"},desktop:{code:"\uf108"},dev:{code:"\uf6cc"},deviantart:{code:"\uf1bd"},dharmachakra:{code:"\uf655"},dhl:{code:"\uf790"},diagnoses:{code:"\uf470"},diaspora:{code:"\uf791"},dice:{code:"\uf522"},"dice-d20":{code:"\uf6cf"},"dice-d6":{code:"\uf6d1"},"dice-five":{code:"\uf523"},"dice-four":{code:"\uf524"},"dice-one":{code:"\uf525"},"dice-six":{code:"\uf526"},"dice-three":{code:"\uf527"},"dice-two":{code:"\uf528"},digg:{code:"\uf1a6"},
"digital-ocean":{code:"\uf391"},"digital-tachograph":{code:"\uf566"},directions:{code:"\uf5eb"},discord:{code:"\uf392"},discourse:{code:"\uf393"},divide:{code:"\uf529"},dizzy:{code:"\uf567"},dna:{code:"\uf471"},dochub:{code:"\uf394"},docker:{code:"\uf395"},dog:{code:"\uf6d3"},"dollar-sign":{code:"\uf155"},dolly:{code:"\uf472"},"dolly-flatbed":{code:"\uf474"},donate:{code:"\uf4b9"},"door-closed":{code:"\uf52a"},"door-open":{code:"\uf52b"},"dot-circle":{code:"\uf192"},dove:{code:"\uf4ba"},download:{code:"\uf019"},
draft2digital:{code:"\uf396"},"drafting-compass":{code:"\uf568"},dragon:{code:"\uf6d5"},"draw-polygon":{code:"\uf5ee"},dribbble:{code:"\uf17d"},"dribbble-square":{code:"\uf397"},dropbox:{code:"\uf16b"},drum:{code:"\uf569"},"drum-steelpan":{code:"\uf56a"},"drumstick-bite":{code:"\uf6d7"},drupal:{code:"\uf1a9"},dumbbell:{code:"\uf44b"},dumpster:{code:"\uf793"},"dumpster-fire":{code:"\uf794"},dungeon:{code:"\uf6d9"},dyalog:{code:"\uf399"},earlybirds:{code:"\uf39a"},ebay:{code:"\uf4f4"},edge:{code:"\uf282"},
edit:{code:"\uf044"},egg:{code:"\uf7fb"},eject:{code:"\uf052"},elementor:{code:"\uf430"},"ellipsis-h":{code:"\uf141"},"ellipsis-v":{code:"\uf142"},ello:{code:"\uf5f1"},ember:{code:"\uf423"},empire:{code:"\uf1d1"},envelope:{code:"\uf0e0"},"envelope-open":{code:"\uf2b6"},"envelope-open-text":{code:"\uf658"},"envelope-square":{code:"\uf199"},envira:{code:"\uf299"},equals:{code:"\uf52c"},eraser:{code:"\uf12d"},erlang:{code:"\uf39d"},ethereum:{code:"\uf42e"},ethernet:{code:"\uf796"},etsy:{code:"\uf2d7"},
"euro-sign":{code:"\uf153"},evernote:{code:"\uf839"},"exchange-alt":{code:"\uf362"},exclamation:{code:"\uf12a"},"exclamation-circle":{code:"\uf06a"},"exclamation-triangle":{code:"\uf071"},expand:{code:"\uf065"},"expand-alt":{code:"\uf424"},"expand-arrows-alt":{code:"\uf31e"},expeditedssl:{code:"\uf23e"},"external-link-alt":{code:"\uf35d"},"external-link-square-alt":{code:"\uf360"},eye:{code:"\uf06e"},"eye-dropper":{code:"\uf1fb"},"eye-slash":{code:"\uf070"},facebook:{code:"\uf09a"},"facebook-f":{code:"\uf39e"},
"facebook-messenger":{code:"\uf39f"},"facebook-square":{code:"\uf082"},fan:{code:"\uf863"},"fantasy-flight-games":{code:"\uf6dc"},"fast-backward":{code:"\uf049"},"fast-forward":{code:"\uf050"},fax:{code:"\uf1ac"},feather:{code:"\uf52d"},"feather-alt":{code:"\uf56b"},fedex:{code:"\uf797"},fedora:{code:"\uf798"},female:{code:"\uf182"},"fighter-jet":{code:"\uf0fb"},figma:{code:"\uf799"},file:{code:"\uf15b"},"file-alt":{code:"\uf15c"},"file-archive":{code:"\uf1c6"},"file-audio":{code:"\uf1c7"},"file-code":{code:"\uf1c9"},
"file-contract":{code:"\uf56c"},"file-csv":{code:"\uf6dd"},"file-download":{code:"\uf56d"},"file-excel":{code:"\uf1c3"},"file-export":{code:"\uf56e"},"file-image":{code:"\uf1c5"},"file-import":{code:"\uf56f"},"file-invoice":{code:"\uf570"},"file-invoice-dollar":{code:"\uf571"},"file-medical":{code:"\uf477"},"file-medical-alt":{code:"\uf478"},"file-pdf":{code:"\uf1c1"},"file-powerpoint":{code:"\uf1c4"},"file-prescription":{code:"\uf572"},"file-signature":{code:"\uf573"},"file-upload":{code:"\uf574"},
"file-video":{code:"\uf1c8"},"file-word":{code:"\uf1c2"},fill:{code:"\uf575"},"fill-drip":{code:"\uf576"},film:{code:"\uf008"},filter:{code:"\uf0b0"},fingerprint:{code:"\uf577"},fire:{code:"\uf06d"},"fire-alt":{code:"\uf7e4"},"fire-extinguisher":{code:"\uf134"},firefox:{code:"\uf269"},"firefox-browser":{code:"\uf907"},"first-aid":{code:"\uf479"},"first-order":{code:"\uf2b0"},"first-order-alt":{code:"\uf50a"},firstdraft:{code:"\uf3a1"},fish:{code:"\uf578"},"fist-raised":{code:"\uf6de"},flag:{code:"\uf024"},
"flag-checkered":{code:"\uf11e"},"flag-usa":{code:"\uf74d"},flask:{code:"\uf0c3"},flickr:{code:"\uf16e"},flipboard:{code:"\uf44d"},flushed:{code:"\uf579"},fly:{code:"\uf417"},folder:{code:"\uf07b"},"folder-minus":{code:"\uf65d"},"folder-open":{code:"\uf07c"},"folder-plus":{code:"\uf65e"},font:{code:"\uf031"},"font-awesome":{code:"\uf2b4"},"font-awesome-alt":{code:"\uf35c"},"font-awesome-flag":{code:"\uf425"},"font-awesome-logo-full":{code:"\uf4e6"},fonticons:{code:"\uf280"},"fonticons-fi":{code:"\uf3a2"},
"football-ball":{code:"\uf44e"},"fort-awesome":{code:"\uf286"},"fort-awesome-alt":{code:"\uf3a3"},forumbee:{code:"\uf211"},forward:{code:"\uf04e"},foursquare:{code:"\uf180"},"free-code-camp":{code:"\uf2c5"},freebsd:{code:"\uf3a4"},frog:{code:"\uf52e"},frown:{code:"\uf119"},"frown-open":{code:"\uf57a"},fulcrum:{code:"\uf50b"},"funnel-dollar":{code:"\uf662"},futbol:{code:"\uf1e3"},"galactic-republic":{code:"\uf50c"},"galactic-senate":{code:"\uf50d"},gamepad:{code:"\uf11b"},"gas-pump":{code:"\uf52f"},
gavel:{code:"\uf0e3"},gem:{code:"\uf3a5"},genderless:{code:"\uf22d"},"get-pocket":{code:"\uf265"},gg:{code:"\uf260"},"gg-circle":{code:"\uf261"},ghost:{code:"\uf6e2"},gift:{code:"\uf06b"},gifts:{code:"\uf79c"},git:{code:"\uf1d3"},"git-alt":{code:"\uf841"},"git-square":{code:"\uf1d2"},github:{code:"\uf09b"},"github-alt":{code:"\uf113"},"github-square":{code:"\uf092"},gitkraken:{code:"\uf3a6"},gitlab:{code:"\uf296"},gitter:{code:"\uf426"},"glass-cheers":{code:"\uf79f"},"glass-martini":{code:"\uf000"},
"glass-martini-alt":{code:"\uf57b"},"glass-whiskey":{code:"\uf7a0"},glasses:{code:"\uf530"},glide:{code:"\uf2a5"},"glide-g":{code:"\uf2a6"},globe:{code:"\uf0ac"},"globe-africa":{code:"\uf57c"},"globe-americas":{code:"\uf57d"},"globe-asia":{code:"\uf57e"},"globe-europe":{code:"\uf7a2"},gofore:{code:"\uf3a7"},"golf-ball":{code:"\uf450"},goodreads:{code:"\uf3a8"},"goodreads-g":{code:"\uf3a9"},google:{code:"\uf1a0"},"google-drive":{code:"\uf3aa"},"google-play":{code:"\uf3ab"},"google-plus":{code:"\uf2b3"},
"google-plus-g":{code:"\uf0d5"},"google-plus-square":{code:"\uf0d4"},"google-wallet":{code:"\uf1ee"},gopuram:{code:"\uf664"},"graduation-cap":{code:"\uf19d"},gratipay:{code:"\uf184"},grav:{code:"\uf2d6"},"greater-than":{code:"\uf531"},"greater-than-equal":{code:"\uf532"},grimace:{code:"\uf57f"},grin:{code:"\uf580"},"grin-alt":{code:"\uf581"},"grin-beam":{code:"\uf582"},"grin-beam-sweat":{code:"\uf583"},"grin-hearts":{code:"\uf584"},"grin-squint":{code:"\uf585"},"grin-squint-tears":{code:"\uf586"},
"grin-stars":{code:"\uf587"},"grin-tears":{code:"\uf588"},"grin-tongue":{code:"\uf589"},"grin-tongue-squint":{code:"\uf58a"},"grin-tongue-wink":{code:"\uf58b"},"grin-wink":{code:"\uf58c"},"grip-horizontal":{code:"\uf58d"},"grip-lines":{code:"\uf7a4"},"grip-lines-vertical":{code:"\uf7a5"},"grip-vertical":{code:"\uf58e"},gripfire:{code:"\uf3ac"},grunt:{code:"\uf3ad"},guitar:{code:"\uf7a6"},gulp:{code:"\uf3ae"},"h-square":{code:"\uf0fd"},"hacker-news":{code:"\uf1d4"},"hacker-news-square":{code:"\uf3af"},
hackerrank:{code:"\uf5f7"},hamburger:{code:"\uf805"},hammer:{code:"\uf6e3"},hamsa:{code:"\uf665"},"hand-holding":{code:"\uf4bd"},"hand-holding-heart":{code:"\uf4be"},"hand-holding-usd":{code:"\uf4c0"},"hand-lizard":{code:"\uf258"},"hand-middle-finger":{code:"\uf806"},"hand-paper":{code:"\uf256"},"hand-peace":{code:"\uf25b"},"hand-point-down":{code:"\uf0a7"},"hand-point-left":{code:"\uf0a5"},"hand-point-right":{code:"\uf0a4"},"hand-point-up":{code:"\uf0a6"},"hand-pointer":{code:"\uf25a"},"hand-rock":{code:"\uf255"},
"hand-scissors":{code:"\uf257"},"hand-spock":{code:"\uf259"},hands:{code:"\uf4c2"},"hands-helping":{code:"\uf4c4"},handshake:{code:"\uf2b5"},hanukiah:{code:"\uf6e6"},"hard-hat":{code:"\uf807"},hashtag:{code:"\uf292"},"hat-cowboy":{code:"\uf8c0"},"hat-cowboy-side":{code:"\uf8c1"},"hat-wizard":{code:"\uf6e8"},hdd:{code:"\uf0a0"},heading:{code:"\uf1dc"},headphones:{code:"\uf025"},"headphones-alt":{code:"\uf58f"},headset:{code:"\uf590"},heart:{code:"\uf004"},"heart-broken":{code:"\uf7a9"},heartbeat:{code:"\uf21e"},
helicopter:{code:"\uf533"},highlighter:{code:"\uf591"},hiking:{code:"\uf6ec"},hippo:{code:"\uf6ed"},hips:{code:"\uf452"},"hire-a-helper":{code:"\uf3b0"},history:{code:"\uf1da"},"hockey-puck":{code:"\uf453"},"holly-berry":{code:"\uf7aa"},home:{code:"\uf015"},hooli:{code:"\uf427"},hornbill:{code:"\uf592"},horse:{code:"\uf6f0"},"horse-head":{code:"\uf7ab"},hospital:{code:"\uf0f8"},"hospital-alt":{code:"\uf47d"},"hospital-symbol":{code:"\uf47e"},"hot-tub":{code:"\uf593"},hotdog:{code:"\uf80f"},hotel:{code:"\uf594"},
hotjar:{code:"\uf3b1"},hourglass:{code:"\uf254"},"hourglass-end":{code:"\uf253"},"hourglass-half":{code:"\uf252"},"hourglass-start":{code:"\uf251"},"house-damage":{code:"\uf6f1"},houzz:{code:"\uf27c"},hryvnia:{code:"\uf6f2"},html5:{code:"\uf13b"},hubspot:{code:"\uf3b2"},"i-cursor":{code:"\uf246"},"ice-cream":{code:"\uf810"},icicles:{code:"\uf7ad"},icons:{code:"\uf86d"},"id-badge":{code:"\uf2c1"},"id-card":{code:"\uf2c2"},"id-card-alt":{code:"\uf47f"},ideal:{code:"\uf913"},igloo:{code:"\uf7ae"},image:{code:"\uf03e"},
images:{code:"\uf302"},imdb:{code:"\uf2d8"},inbox:{code:"\uf01c"},indent:{code:"\uf03c"},industry:{code:"\uf275"},infinity:{code:"\uf534"},info:{code:"\uf129"},"info-circle":{code:"\uf05a"},instagram:{code:"\uf16d"},"instagram-square":{code:"\uf955"},intercom:{code:"\uf7af"},"internet-explorer":{code:"\uf26b"},invision:{code:"\uf7b0"},ioxhost:{code:"\uf208"},italic:{code:"\uf033"},"itch-io":{code:"\uf83a"},itunes:{code:"\uf3b4"},"itunes-note":{code:"\uf3b5"},java:{code:"\uf4e4"},jedi:{code:"\uf669"},
"jedi-order":{code:"\uf50e"},jenkins:{code:"\uf3b6"},jira:{code:"\uf7b1"},joget:{code:"\uf3b7"},joint:{code:"\uf595"},joomla:{code:"\uf1aa"},"journal-whills":{code:"\uf66a"},js:{code:"\uf3b8"},"js-square":{code:"\uf3b9"},jsfiddle:{code:"\uf1cc"},kaaba:{code:"\uf66b"},kaggle:{code:"\uf5fa"},key:{code:"\uf084"},keybase:{code:"\uf4f5"},keyboard:{code:"\uf11c"},keycdn:{code:"\uf3ba"},khanda:{code:"\uf66d"},kickstarter:{code:"\uf3bb"},"kickstarter-k":{code:"\uf3bc"},kiss:{code:"\uf596"},"kiss-beam":{code:"\uf597"},
"kiss-wink-heart":{code:"\uf598"},"kiwi-bird":{code:"\uf535"},korvue:{code:"\uf42f"},landmark:{code:"\uf66f"},language:{code:"\uf1ab"},laptop:{code:"\uf109"},"laptop-code":{code:"\uf5fc"},"laptop-medical":{code:"\uf812"},laravel:{code:"\uf3bd"},lastfm:{code:"\uf202"},"lastfm-square":{code:"\uf203"},laugh:{code:"\uf599"},"laugh-beam":{code:"\uf59a"},"laugh-squint":{code:"\uf59b"},"laugh-wink":{code:"\uf59c"},"layer-group":{code:"\uf5fd"},leaf:{code:"\uf06c"},leanpub:{code:"\uf212"},lemon:{code:"\uf094"},
less:{code:"\uf41d"},"less-than":{code:"\uf536"},"less-than-equal":{code:"\uf537"},"level-down-alt":{code:"\uf3be"},"level-up-alt":{code:"\uf3bf"},"life-ring":{code:"\uf1cd"},lightbulb:{code:"\uf0eb"},line:{code:"\uf3c0"},link:{code:"\uf0c1"},linkedin:{code:"\uf08c"},"linkedin-in":{code:"\uf0e1"},linode:{code:"\uf2b8"},linux:{code:"\uf17c"},"lira-sign":{code:"\uf195"},list:{code:"\uf03a"},"list-alt":{code:"\uf022"},"list-ol":{code:"\uf0cb"},"list-ul":{code:"\uf0ca"},"location-arrow":{code:"\uf124"},
lock:{code:"\uf023"},"lock-open":{code:"\uf3c1"},"long-arrow-alt-down":{code:"\uf309"},"long-arrow-alt-left":{code:"\uf30a"},"long-arrow-alt-right":{code:"\uf30b"},"long-arrow-alt-up":{code:"\uf30c"},"low-vision":{code:"\uf2a8"},"luggage-cart":{code:"\uf59d"},lyft:{code:"\uf3c3"},magento:{code:"\uf3c4"},magic:{code:"\uf0d0"},magnet:{code:"\uf076"},"mail-bulk":{code:"\uf674"},mailchimp:{code:"\uf59e"},male:{code:"\uf183"},mandalorian:{code:"\uf50f"},map:{code:"\uf279"},"map-marked":{code:"\uf59f"},
"map-marked-alt":{code:"\uf5a0"},"map-marker":{code:"\uf041"},"map-marker-alt":{code:"\uf3c5"},"map-pin":{code:"\uf276"},"map-signs":{code:"\uf277"},markdown:{code:"\uf60f"},marker:{code:"\uf5a1"},mars:{code:"\uf222"},"mars-double":{code:"\uf227"},"mars-stroke":{code:"\uf229"},"mars-stroke-h":{code:"\uf22b"},"mars-stroke-v":{code:"\uf22a"},mask:{code:"\uf6fa"},mastodon:{code:"\uf4f6"},maxcdn:{code:"\uf136"},mdb:{code:"\uf8ca"},medal:{code:"\uf5a2"},medapps:{code:"\uf3c6"},medium:{code:"\uf23a"},"medium-m":{code:"\uf3c7"},
medkit:{code:"\uf0fa"},medrt:{code:"\uf3c8"},meetup:{code:"\uf2e0"},megaport:{code:"\uf5a3"},meh:{code:"\uf11a"},"meh-blank":{code:"\uf5a4"},"meh-rolling-eyes":{code:"\uf5a5"},memory:{code:"\uf538"},mendeley:{code:"\uf7b3"},menorah:{code:"\uf676"},mercury:{code:"\uf223"},meteor:{code:"\uf753"},microblog:{code:"\uf91a"},microchip:{code:"\uf2db"},microphone:{code:"\uf130"},"microphone-alt":{code:"\uf3c9"},"microphone-alt-slash":{code:"\uf539"},"microphone-slash":{code:"\uf131"},microscope:{code:"\uf610"},
microsoft:{code:"\uf3ca"},minus:{code:"\uf068"},"minus-circle":{code:"\uf056"},"minus-square":{code:"\uf146"},mitten:{code:"\uf7b5"},mix:{code:"\uf3cb"},mixcloud:{code:"\uf289"},mixer:{code:"\uf956"},mizuni:{code:"\uf3cc"},mobile:{code:"\uf10b"},"mobile-alt":{code:"\uf3cd"},modx:{code:"\uf285"},monero:{code:"\uf3d0"},"money-bill":{code:"\uf0d6"},"money-bill-alt":{code:"\uf3d1"},"money-bill-wave":{code:"\uf53a"},"money-bill-wave-alt":{code:"\uf53b"},"money-check":{code:"\uf53c"},"money-check-alt":{code:"\uf53d"},
monument:{code:"\uf5a6"},moon:{code:"\uf186"},"mortar-pestle":{code:"\uf5a7"},mosque:{code:"\uf678"},motorcycle:{code:"\uf21c"},mountain:{code:"\uf6fc"},mouse:{code:"\uf8cc"},"mouse-pointer":{code:"\uf245"},"mug-hot":{code:"\uf7b6"},music:{code:"\uf001"},napster:{code:"\uf3d2"},neos:{code:"\uf612"},"network-wired":{code:"\uf6ff"},neuter:{code:"\uf22c"},newspaper:{code:"\uf1ea"},nimblr:{code:"\uf5a8"},node:{code:"\uf419"},"node-js":{code:"\uf3d3"},"not-equal":{code:"\uf53e"},"notes-medical":{code:"\uf481"},
npm:{code:"\uf3d4"},ns8:{code:"\uf3d5"},nutritionix:{code:"\uf3d6"},"object-group":{code:"\uf247"},"object-ungroup":{code:"\uf248"},odnoklassniki:{code:"\uf263"},"odnoklassniki-square":{code:"\uf264"},"oil-can":{code:"\uf613"},"old-republic":{code:"\uf510"},om:{code:"\uf679"},opencart:{code:"\uf23d"},openid:{code:"\uf19b"},opera:{code:"\uf26a"},"optin-monster":{code:"\uf23c"},orcid:{code:"\uf8d2"},osi:{code:"\uf41a"},otter:{code:"\uf700"},outdent:{code:"\uf03b"},page4:{code:"\uf3d7"},pagelines:{code:"\uf18c"},
pager:{code:"\uf815"},"paint-brush":{code:"\uf1fc"},"paint-roller":{code:"\uf5aa"},palette:{code:"\uf53f"},palfed:{code:"\uf3d8"},pallet:{code:"\uf482"},"paper-plane":{code:"\uf1d8"},paperclip:{code:"\uf0c6"},"parachute-box":{code:"\uf4cd"},paragraph:{code:"\uf1dd"},parking:{code:"\uf540"},passport:{code:"\uf5ab"},pastafarianism:{code:"\uf67b"},paste:{code:"\uf0ea"},patreon:{code:"\uf3d9"},pause:{code:"\uf04c"},"pause-circle":{code:"\uf28b"},paw:{code:"\uf1b0"},paypal:{code:"\uf1ed"},peace:{code:"\uf67c"},
pen:{code:"\uf304"},"pen-alt":{code:"\uf305"},"pen-fancy":{code:"\uf5ac"},"pen-nib":{code:"\uf5ad"},"pen-square":{code:"\uf14b"},"pencil-alt":{code:"\uf303"},"pencil-ruler":{code:"\uf5ae"},"penny-arcade":{code:"\uf704"},"people-carry":{code:"\uf4ce"},"pepper-hot":{code:"\uf816"},percent:{code:"\uf295"},percentage:{code:"\uf541"},periscope:{code:"\uf3da"},"person-booth":{code:"\uf756"},phabricator:{code:"\uf3db"},"phoenix-framework":{code:"\uf3dc"},"phoenix-squadron":{code:"\uf511"},phone:{code:"\uf095"},
"phone-alt":{code:"\uf879"},"phone-slash":{code:"\uf3dd"},"phone-square":{code:"\uf098"},"phone-square-alt":{code:"\uf87b"},"phone-volume":{code:"\uf2a0"},"photo-video":{code:"\uf87c"},php:{code:"\uf457"},"pied-piper":{code:"\uf2ae"},"pied-piper-alt":{code:"\uf1a8"},"pied-piper-hat":{code:"\uf4e5"},"pied-piper-pp":{code:"\uf1a7"},"pied-piper-square":{code:"\uf91e"},"piggy-bank":{code:"\uf4d3"},pills:{code:"\uf484"},pinterest:{code:"\uf0d2"},"pinterest-p":{code:"\uf231"},"pinterest-square":{code:"\uf0d3"},
"pizza-slice":{code:"\uf818"},"place-of-worship":{code:"\uf67f"},plane:{code:"\uf072"},"plane-arrival":{code:"\uf5af"},"plane-departure":{code:"\uf5b0"},play:{code:"\uf04b"},"play-circle":{code:"\uf144"},playstation:{code:"\uf3df"},plug:{code:"\uf1e6"},plus:{code:"\uf067"},"plus-circle":{code:"\uf055"},"plus-square":{code:"\uf0fe"},podcast:{code:"\uf2ce"},poll:{code:"\uf681"},"poll-h":{code:"\uf682"},poo:{code:"\uf2fe"},"poo-storm":{code:"\uf75a"},poop:{code:"\uf619"},portrait:{code:"\uf3e0"},"pound-sign":{code:"\uf154"},
"power-off":{code:"\uf011"},pray:{code:"\uf683"},"praying-hands":{code:"\uf684"},prescription:{code:"\uf5b1"},"prescription-bottle":{code:"\uf485"},"prescription-bottle-alt":{code:"\uf486"},print:{code:"\uf02f"},procedures:{code:"\uf487"},"product-hunt":{code:"\uf288"},"project-diagram":{code:"\uf542"},pushed:{code:"\uf3e1"},"puzzle-piece":{code:"\uf12e"},python:{code:"\uf3e2"},qq:{code:"\uf1d6"},qrcode:{code:"\uf029"},question:{code:"\uf128"},"question-circle":{code:"\uf059"},quidditch:{code:"\uf458"},
quinscape:{code:"\uf459"},quora:{code:"\uf2c4"},"quote-left":{code:"\uf10d"},"quote-right":{code:"\uf10e"},quran:{code:"\uf687"},"r-project":{code:"\uf4f7"},radiation:{code:"\uf7b9"},"radiation-alt":{code:"\uf7ba"},rainbow:{code:"\uf75b"},random:{code:"\uf074"},"raspberry-pi":{code:"\uf7bb"},ravelry:{code:"\uf2d9"},react:{code:"\uf41b"},reacteurope:{code:"\uf75d"},readme:{code:"\uf4d5"},rebel:{code:"\uf1d0"},receipt:{code:"\uf543"},"record-vinyl":{code:"\uf8d9"},recycle:{code:"\uf1b8"},"red-river":{code:"\uf3e3"},
reddit:{code:"\uf1a1"},"reddit-alien":{code:"\uf281"},"reddit-square":{code:"\uf1a2"},redhat:{code:"\uf7bc"},redo:{code:"\uf01e"},"redo-alt":{code:"\uf2f9"},registered:{code:"\uf25d"},"remove-format":{code:"\uf87d"},renren:{code:"\uf18b"},reply:{code:"\uf3e5"},"reply-all":{code:"\uf122"},replyd:{code:"\uf3e6"},republican:{code:"\uf75e"},researchgate:{code:"\uf4f8"},resolving:{code:"\uf3e7"},restroom:{code:"\uf7bd"},retweet:{code:"\uf079"},rev:{code:"\uf5b2"},ribbon:{code:"\uf4d6"},ring:{code:"\uf70b"},
road:{code:"\uf018"},robot:{code:"\uf544"},rocket:{code:"\uf135"},rocketchat:{code:"\uf3e8"},rockrms:{code:"\uf3e9"},route:{code:"\uf4d7"},rss:{code:"\uf09e"},"rss-square":{code:"\uf143"},"ruble-sign":{code:"\uf158"},ruler:{code:"\uf545"},"ruler-combined":{code:"\uf546"},"ruler-horizontal":{code:"\uf547"},"ruler-vertical":{code:"\uf548"},running:{code:"\uf70c"},"rupee-sign":{code:"\uf156"},"sad-cry":{code:"\uf5b3"},"sad-tear":{code:"\uf5b4"},safari:{code:"\uf267"},salesforce:{code:"\uf83b"},sass:{code:"\uf41e"},
satellite:{code:"\uf7bf"},"satellite-dish":{code:"\uf7c0"},save:{code:"\uf0c7"},schlix:{code:"\uf3ea"},school:{code:"\uf549"},screwdriver:{code:"\uf54a"},scribd:{code:"\uf28a"},scroll:{code:"\uf70e"},"sd-card":{code:"\uf7c2"},search:{code:"\uf002"},"search-dollar":{code:"\uf688"},"search-location":{code:"\uf689"},"search-minus":{code:"\uf010"},"search-plus":{code:"\uf00e"},searchengin:{code:"\uf3eb"},seedling:{code:"\uf4d8"},sellcast:{code:"\uf2da"},sellsy:{code:"\uf213"},server:{code:"\uf233"},servicestack:{code:"\uf3ec"},
shapes:{code:"\uf61f"},share:{code:"\uf064"},"share-alt":{code:"\uf1e0"},"share-alt-square":{code:"\uf1e1"},"share-square":{code:"\uf14d"},"shekel-sign":{code:"\uf20b"},"shield-alt":{code:"\uf3ed"},ship:{code:"\uf21a"},"shipping-fast":{code:"\uf48b"},shirtsinbulk:{code:"\uf214"},"shoe-prints":{code:"\uf54b"},shopify:{code:"\uf957"},"shopping-bag":{code:"\uf290"},"shopping-basket":{code:"\uf291"},"shopping-cart":{code:"\uf07a"},shopware:{code:"\uf5b5"},shower:{code:"\uf2cc"},"shuttle-van":{code:"\uf5b6"},
sign:{code:"\uf4d9"},"sign-in-alt":{code:"\uf2f6"},"sign-language":{code:"\uf2a7"},"sign-out-alt":{code:"\uf2f5"},signal:{code:"\uf012"},signature:{code:"\uf5b7"},"sim-card":{code:"\uf7c4"},simplybuilt:{code:"\uf215"},sistrix:{code:"\uf3ee"},sitemap:{code:"\uf0e8"},sith:{code:"\uf512"},skating:{code:"\uf7c5"},sketch:{code:"\uf7c6"},skiing:{code:"\uf7c9"},"skiing-nordic":{code:"\uf7ca"},skull:{code:"\uf54c"},"skull-crossbones":{code:"\uf714"},skyatlas:{code:"\uf216"},skype:{code:"\uf17e"},slack:{code:"\uf198"},
"slack-hash":{code:"\uf3ef"},slash:{code:"\uf715"},sleigh:{code:"\uf7cc"},"sliders-h":{code:"\uf1de"},slideshare:{code:"\uf1e7"},smile:{code:"\uf118"},"smile-beam":{code:"\uf5b8"},"smile-wink":{code:"\uf4da"},smog:{code:"\uf75f"},smoking:{code:"\uf48d"},"smoking-ban":{code:"\uf54d"},sms:{code:"\uf7cd"},snapchat:{code:"\uf2ab"},"snapchat-ghost":{code:"\uf2ac"},"snapchat-square":{code:"\uf2ad"},snowboarding:{code:"\uf7ce"},snowflake:{code:"\uf2dc"},snowman:{code:"\uf7d0"},snowplow:{code:"\uf7d2"},socks:{code:"\uf696"},
"solar-panel":{code:"\uf5ba"},sort:{code:"\uf0dc"},"sort-alpha-down":{code:"\uf15d"},"sort-alpha-down-alt":{code:"\uf881"},"sort-alpha-up":{code:"\uf15e"},"sort-alpha-up-alt":{code:"\uf882"},"sort-amount-down":{code:"\uf160"},"sort-amount-down-alt":{code:"\uf884"},"sort-amount-up":{code:"\uf161"},"sort-amount-up-alt":{code:"\uf885"},"sort-down":{code:"\uf0dd"},"sort-numeric-down":{code:"\uf162"},"sort-numeric-down-alt":{code:"\uf886"},"sort-numeric-up":{code:"\uf163"},"sort-numeric-up-alt":{code:"\uf887"},
"sort-up":{code:"\uf0de"},soundcloud:{code:"\uf1be"},sourcetree:{code:"\uf7d3"},spa:{code:"\uf5bb"},"space-shuttle":{code:"\uf197"},speakap:{code:"\uf3f3"},"speaker-deck":{code:"\uf83c"},"spell-check":{code:"\uf891"},spider:{code:"\uf717"},spinner:{code:"\uf110"},splotch:{code:"\uf5bc"},spotify:{code:"\uf1bc"},"spray-can":{code:"\uf5bd"},square:{code:"\uf0c8"},"square-full":{code:"\uf45c"},"square-root-alt":{code:"\uf698"},squarespace:{code:"\uf5be"},"stack-exchange":{code:"\uf18d"},"stack-overflow":{code:"\uf16c"},
stackpath:{code:"\uf842"},stamp:{code:"\uf5bf"},star:{code:"\uf005"},"star-and-crescent":{code:"\uf699"},"star-half":{code:"\uf089"},"star-half-alt":{code:"\uf5c0"},"star-of-david":{code:"\uf69a"},"star-of-life":{code:"\uf621"},staylinked:{code:"\uf3f5"},steam:{code:"\uf1b6"},"steam-square":{code:"\uf1b7"},"steam-symbol":{code:"\uf3f6"},"step-backward":{code:"\uf048"},"step-forward":{code:"\uf051"},stethoscope:{code:"\uf0f1"},"sticker-mule":{code:"\uf3f7"},"sticky-note":{code:"\uf249"},stop:{code:"\uf04d"},
"stop-circle":{code:"\uf28d"},stopwatch:{code:"\uf2f2"},store:{code:"\uf54e"},"store-alt":{code:"\uf54f"},strava:{code:"\uf428"},stream:{code:"\uf550"},"street-view":{code:"\uf21d"},strikethrough:{code:"\uf0cc"},stripe:{code:"\uf429"},"stripe-s":{code:"\uf42a"},stroopwafel:{code:"\uf551"},studiovinari:{code:"\uf3f8"},stumbleupon:{code:"\uf1a4"},"stumbleupon-circle":{code:"\uf1a3"},subscript:{code:"\uf12c"},subway:{code:"\uf239"},suitcase:{code:"\uf0f2"},"suitcase-rolling":{code:"\uf5c1"},sun:{code:"\uf185"},
superpowers:{code:"\uf2dd"},superscript:{code:"\uf12b"},supple:{code:"\uf3f9"},surprise:{code:"\uf5c2"},suse:{code:"\uf7d6"},swatchbook:{code:"\uf5c3"},swift:{code:"\uf8e1"},swimmer:{code:"\uf5c4"},"swimming-pool":{code:"\uf5c5"},symfony:{code:"\uf83d"},synagogue:{code:"\uf69b"},sync:{code:"\uf021"},"sync-alt":{code:"\uf2f1"},syringe:{code:"\uf48e"},table:{code:"\uf0ce"},"table-tennis":{code:"\uf45d"},tablet:{code:"\uf10a"},"tablet-alt":{code:"\uf3fa"},tablets:{code:"\uf490"},"tachometer-alt":{code:"\uf3fd"},
tag:{code:"\uf02b"},tags:{code:"\uf02c"},tape:{code:"\uf4db"},tasks:{code:"\uf0ae"},taxi:{code:"\uf1ba"},teamspeak:{code:"\uf4f9"},teeth:{code:"\uf62e"},"teeth-open":{code:"\uf62f"},telegram:{code:"\uf2c6"},"telegram-plane":{code:"\uf3fe"},"temperature-high":{code:"\uf769"},"temperature-low":{code:"\uf76b"},"tencent-weibo":{code:"\uf1d5"},tenge:{code:"\uf7d7"},terminal:{code:"\uf120"},"text-height":{code:"\uf034"},"text-width":{code:"\uf035"},th:{code:"\uf00a"},"th-large":{code:"\uf009"},"th-list":{code:"\uf00b"},
"the-red-yeti":{code:"\uf69d"},"theater-masks":{code:"\uf630"},themeco:{code:"\uf5c6"},themeisle:{code:"\uf2b2"},thermometer:{code:"\uf491"},"thermometer-empty":{code:"\uf2cb"},"thermometer-full":{code:"\uf2c7"},"thermometer-half":{code:"\uf2c9"},"thermometer-quarter":{code:"\uf2ca"},"thermometer-three-quarters":{code:"\uf2c8"},"think-peaks":{code:"\uf731"},"thumbs-down":{code:"\uf165"},"thumbs-up":{code:"\uf164"},thumbtack:{code:"\uf08d"},"ticket-alt":{code:"\uf3ff"},times:{code:"\uf00d"},"times-circle":{code:"\uf057"},
tint:{code:"\uf043"},"tint-slash":{code:"\uf5c7"},tired:{code:"\uf5c8"},"toggle-off":{code:"\uf204"},"toggle-on":{code:"\uf205"},toilet:{code:"\uf7d8"},"toilet-paper":{code:"\uf71e"},toolbox:{code:"\uf552"},tools:{code:"\uf7d9"},tooth:{code:"\uf5c9"},torah:{code:"\uf6a0"},"torii-gate":{code:"\uf6a1"},tractor:{code:"\uf722"},"trade-federation":{code:"\uf513"},trademark:{code:"\uf25c"},"traffic-light":{code:"\uf637"},trailer:{code:"\uf941"},train:{code:"\uf238"},tram:{code:"\uf7da"},transgender:{code:"\uf224"},
"transgender-alt":{code:"\uf225"},trash:{code:"\uf1f8"},"trash-alt":{code:"\uf2ed"},"trash-restore":{code:"\uf829"},"trash-restore-alt":{code:"\uf82a"},tree:{code:"\uf1bb"},trello:{code:"\uf181"},tripadvisor:{code:"\uf262"},trophy:{code:"\uf091"},truck:{code:"\uf0d1"},"truck-loading":{code:"\uf4de"},"truck-monster":{code:"\uf63b"},"truck-moving":{code:"\uf4df"},"truck-pickup":{code:"\uf63c"},tshirt:{code:"\uf553"},tty:{code:"\uf1e4"},tumblr:{code:"\uf173"},"tumblr-square":{code:"\uf174"},tv:{code:"\uf26c"},
twitch:{code:"\uf1e8"},twitter:{code:"\uf099"},"twitter-square":{code:"\uf081"},typo3:{code:"\uf42b"},uber:{code:"\uf402"},ubuntu:{code:"\uf7df"},uikit:{code:"\uf403"},umbraco:{code:"\uf8e8"},umbrella:{code:"\uf0e9"},"umbrella-beach":{code:"\uf5ca"},underline:{code:"\uf0cd"},undo:{code:"\uf0e2"},"undo-alt":{code:"\uf2ea"},uniregistry:{code:"\uf404"},unity:{code:"\uf949"},"universal-access":{code:"\uf29a"},university:{code:"\uf19c"},unlink:{code:"\uf127"},unlock:{code:"\uf09c"},"unlock-alt":{code:"\uf13e"},
untappd:{code:"\uf405"},upload:{code:"\uf093"},ups:{code:"\uf7e0"},usb:{code:"\uf287"},user:{code:"\uf007"},"user-alt":{code:"\uf406"},"user-alt-slash":{code:"\uf4fa"},"user-astronaut":{code:"\uf4fb"},"user-check":{code:"\uf4fc"},"user-circle":{code:"\uf2bd"},"user-clock":{code:"\uf4fd"},"user-cog":{code:"\uf4fe"},"user-edit":{code:"\uf4ff"},"user-friends":{code:"\uf500"},"user-graduate":{code:"\uf501"},"user-injured":{code:"\uf728"},"user-lock":{code:"\uf502"},"user-md":{code:"\uf0f0"},"user-minus":{code:"\uf503"},
"user-ninja":{code:"\uf504"},"user-nurse":{code:"\uf82f"},"user-plus":{code:"\uf234"},"user-secret":{code:"\uf21b"},"user-shield":{code:"\uf505"},"user-slash":{code:"\uf506"},"user-tag":{code:"\uf507"},"user-tie":{code:"\uf508"},"user-times":{code:"\uf235"},users:{code:"\uf0c0"},"users-cog":{code:"\uf509"},usps:{code:"\uf7e1"},ussunnah:{code:"\uf407"},"utensil-spoon":{code:"\uf2e5"},utensils:{code:"\uf2e7"},vaadin:{code:"\uf408"},"vector-square":{code:"\uf5cb"},venus:{code:"\uf221"},"venus-double":{code:"\uf226"},
"venus-mars":{code:"\uf228"},viacoin:{code:"\uf237"},viadeo:{code:"\uf2a9"},"viadeo-square":{code:"\uf2aa"},vial:{code:"\uf492"},vials:{code:"\uf493"},viber:{code:"\uf409"},video:{code:"\uf03d"},"video-slash":{code:"\uf4e2"},vihara:{code:"\uf6a7"},vimeo:{code:"\uf40a"},"vimeo-square":{code:"\uf194"},"vimeo-v":{code:"\uf27d"},vine:{code:"\uf1ca"},vk:{code:"\uf189"},vnv:{code:"\uf40b"},voicemail:{code:"\uf897"},"volleyball-ball":{code:"\uf45f"},"volume-down":{code:"\uf027"},"volume-mute":{code:"\uf6a9"},
"volume-off":{code:"\uf026"},"volume-up":{code:"\uf028"},"vote-yea":{code:"\uf772"},"vr-cardboard":{code:"\uf729"},vuejs:{code:"\uf41f"},walking:{code:"\uf554"},wallet:{code:"\uf555"},warehouse:{code:"\uf494"},water:{code:"\uf773"},"wave-square":{code:"\uf83e"},waze:{code:"\uf83f"},weebly:{code:"\uf5cc"},weibo:{code:"\uf18a"},weight:{code:"\uf496"},"weight-hanging":{code:"\uf5cd"},weixin:{code:"\uf1d7"},whatsapp:{code:"\uf232"},"whatsapp-square":{code:"\uf40c"},wheelchair:{code:"\uf193"},whmcs:{code:"\uf40d"},
wifi:{code:"\uf1eb"},"wikipedia-w":{code:"\uf266"},wind:{code:"\uf72e"},"window-close":{code:"\uf410"},"window-maximize":{code:"\uf2d0"},"window-minimize":{code:"\uf2d1"},"window-restore":{code:"\uf2d2"},windows:{code:"\uf17a"},"wine-bottle":{code:"\uf72f"},"wine-glass":{code:"\uf4e3"},"wine-glass-alt":{code:"\uf5ce"},wix:{code:"\uf5cf"},"wizards-of-the-coast":{code:"\uf730"},"wolf-pack-battalion":{code:"\uf514"},"won-sign":{code:"\uf159"},wordpress:{code:"\uf19a"},"wordpress-simple":{code:"\uf411"},
wpbeginner:{code:"\uf297"},wpexplorer:{code:"\uf2de"},wpforms:{code:"\uf298"},wpressr:{code:"\uf3e4"},wrench:{code:"\uf0ad"},"x-ray":{code:"\uf497"},xbox:{code:"\uf412"},xing:{code:"\uf168"},"xing-square":{code:"\uf169"},"y-combinator":{code:"\uf23b"},yahoo:{code:"\uf19e"},yammer:{code:"\uf840"},yandex:{code:"\uf413"},"yandex-international":{code:"\uf414"},yarn:{code:"\uf7e3"},yelp:{code:"\uf1e9"},"yen-sign":{code:"\uf157"},"yin-yang":{code:"\uf6ad"},yoast:{code:"\uf2b1"},youtube:{code:"\uf167"},
"youtube-square":{code:"\uf431"},zhihu:{code:"\uf63f"}});Hp.Icons=MM;Hp.Icons=MM;Hp.Icons=MM;var ve=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js");ve.vdom=XE;ve.promise=bh;ve.arr=Gf;ve.tree=Us;ve.obj=eg;ve.string=Dh;ve.addOrChangeCSSDeclaration=fr;ve.addOrChangeLinkedCSS=tw;ve.defaultStyle=Ez;ve.renderGradient=wI;ve.defaultAttributes=Fz;ve.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
ve.pathAttributes=vI;ve.svgAttributes=uI;ve.renderMorph=xI;ve.Transform=sk;ve.pt=ui;ve.getSvgVertices=Dz;ve.canBePromotedToCompositionLayer=tI;ve.config=$l;var NM=ve.vdom;ve.h=NM.h;ve.diff=NM.diff;ve.patch=NM.patch;ve.createNode=NM.create;ve.svgNs="http://www.w3.org/2000/svg";ve.CanvasHook=function(f){this.canvasMorph=f};ve.CanvasHook.prototype.hook=function(f,m,n){this.canvasMorph.afterRender(f,this.canvasMorph._canvas!==f&&"CANVAS"==f.tagName)};ve.InitStroke=function(f,m,n){this.path=f;this.renderer=
m;this.reverse=n};ve.InitStroke.prototype.hook=function(f,m,n){m=this.path.drawnProportion||0;0!=m&&(f.setAttribute("stroke-width",this.path.borderWidth.valueOf()+1),f.setAttribute("stroke-dasharray",f.getTotalLength()),f.setAttribute("stroke-dashoffset",f.getTotalLength()*(this.reverse?1-m:-1+(1-m))))};var OM=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js"),n=m.hasOwnProperty("Renderer")&&"function"===typeof m.Renderer?m.Renderer:m.Renderer=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k){if(!a||!a.isMorph)throw Error("Trying to initialize renderer with an invalid world morph: "+a);if(!(d&&"nodeType"in d))throw Error("Trying to initialize renderer with an invalid root node: "+d);k||(k=d.getRootNode(),k={window:System.global,document:k});this.worldMorph=a;a._renderer=this;this.rootNode=d;this.domNode=
null;this.domEnvironment=k;this.renderMap=new WeakMap;this.fixedMorphNodeMap=new Map;this.renderWorldLoopLater=this.renderWorldLoopProcess=null;this.requestAnimationFrame=k.window.requestAnimationFrame.bind(k.window)}},{key:"clear",value:function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return d=a.domNode,b.setCatchFinallyBlocks(2),b.yield(a.stopRenderWorldLoop(),4);case 4:b.leaveTryBlock(3);break;case 2:b.enterCatchBlock();case 3:d&&
(k=d.parentNode,k.removeChild(d),[].concat($jscomp.arrayFromIterable(a.fixedMorphNodeMap.values())).forEach(function(e){return k.removeChild(e)})),a.domNode=null,a.renderMap=new WeakMap,b.jumpToEnd()}})}},{key:"ensureDefaultCSS",value:function(){var a=this;return ve.promise.waitFor(3E3,function(){return a.domNode.getRootNode()}).then(function(d){return Promise.all([ve.addOrChangeCSSDeclaration("lively-morphic-css",ve.defaultCSS,d),ve.addOrChangeLinkedCSS("lively-ibm-plex",ve.config.css.ibmPlex),ve.addOrChangeLinkedCSS("lively-font-awesome",
ve.config.css.fontAwesome,d,!1),ve.addOrChangeLinkedCSS("lively-font-inconsolata",ve.config.css.inconsolata,d,!1)])})}},{key:"startRenderWorldLoop",value:function(){var a=this;this._stopped=!1;this._renderWorldLoopLater=null;this.renderWorldLoopProcess=this.requestAnimationFrame(function(){return a.startRenderWorldLoop()});return this.renderStep()}},{key:"stopRenderWorldLoop",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){a._stopped=!0;a.domEnvironment.window.cancelAnimationFrame(a.renderWorldLoopProcess);
a.renderWorldLoopProcess=null;a.domEnvironment.window.cancelAnimationFrame(a.renderWorldLoopLater);a.renderWorldLoopLater=null;return d.yield(ve.promise.waitFor(2E3,function(){return!a.worldMorph.needsRerender()}),0)})}},{key:"renderLater",value:function(a){var d=this;this.renderWorldLoopLaterCounter=void 0===a?10:a;this.renderWorldLoopLater||this._stopped||(this.renderWorldLoopLater=this.requestAnimationFrame(function(){d.renderWorldLoopLater=null;0<d.renderWorldLoopLaterCounter&&d.renderLater(d.renderWorldLoopLaterCounter-
1);try{d.renderStep()}catch(k){console.error("Error rendering morphs:",k)}}))}},{key:"renderStep",value:function(){this.worldMorph.renderAsRoot(this);return this}},{key:"getNodeForMorph",value:function(a){var d="#"+ve.string.regExpEscape(a.id),k=this.domNode&&this.domNode.querySelector(d);this.domNode&&this.domNode.id==a.id&&(k=this.domNode);if(k)return k;a=$jscomp.makeIterator(this.fixedMorphNodeMap.values());for(k=a.next();!k.done;k=a.next())if(k=k.value.querySelector(d))return k;return null}},
{key:"getMorphForNode",value:function(a){return this.worldMorph?this.worldMorph.withAllSubmorphsDetect(function(d){return d.id===a.id}):null}},{key:"render",value:function(a){if(!a.needsRerender()){var d=this.renderMap.get(a);if(d)return d}a.aboutToRender(this);d=a.render(this);this.renderMap.set(a,d);return d}},{key:"renderAsFixed",value:function(a){var d=this.render(a);a.isHTMLMorph||(d.properties.style.position="fixed");if(this.worldMorph.isEmbedded){var k=this.domNode.getBoundingClientRect(),
b=a.origin,e=a.owner,l=a.position,p=Math.round(l.x-b.x-(a._skipWrapping&&e?e.borderWidthLeft:0));b=Math.round(l.y-b.y-(a._skipWrapping&&e?e.borderWidthTop:0));a=ve.canBePromotedToCompositionLayer(a)?ve.pt(0,0):ve.pt(p,b);p=a.x;d.properties.style.top=a.y+k.y+"px";d.properties.style.left=p+k.x+"px"}return d}},{key:"renderFixedMorphs",value:function(a,d){var k=this;d=this.domNode;var b=this.fixedMorphNodeMap;if((a.length||b.size)&&d&&d.parentNode){d=d.parentNode;for(var e=$jscomp.makeIterator(b),l=e.next();!l.done;l=
e.next()){var p=$jscomp.makeIterator(l.value);l=p.next().value;p=p.next().value;a.includes(l)||(p.parentNode&&p.parentNode.removeChild(p),b.delete(l))}l=a.map(function(J){return b.get(J)});var u=a.map(function(J){return J.id});e=[].concat($jscomp.arrayFromIterable(d.children)).map(function(J){return J.id}).filter(function(J){return u.includes(J)});e=!ve.arr.equals(u,e);var x=new WeakMap;if(e){var z=new WeakMap;p=ve.arr.compact(ve.arr.flatten(a.map(function(J){return J.withAllSubmorphsDo(function(K){return k.getNodeForMorph(K)})})));
p.forEach(function(J){return z.set(J,J.scrollTop)});l.map(function(J){return J&&J.parentNode&&J.parentNode.removeChild(J)});p.forEach(function(J){z.get(J)!=J.scrollTop&&x.set(J,z.get(J))})}a=$jscomp.makeIterator(a);for(l=a.next();!l.done;l=a.next()){l=l.value;p=this.renderMap.get(l)||this.renderAsFixed(l);var E=this.renderAsFixed(l);E=ve.diff(p,E);var G=b.get(l);G||(G=ve.createNode(p,this.domEnvironment),b.set(l,G));G.parentNode||d.appendChild(G);e&&l.withAllSubmorphsDo(function(J){return k.getNodeForMorph(J)}).forEach(function(J){x.has(J)&&
(J.scrollTop=x.get(J))});ve.patch(G,E)}}}},{key:"renderMorph",value:function(a){var d=this.renderSubmorphs(a);return ve.h("div",Object.assign({},ve.defaultAttributes(a,this),{style:ve.defaultStyle(a)}),d)}},{key:"renderSubmorphs",value:function(a){return this.renderSelectedSubmorphs(a,a.submorphs)}},{key:"renderSelectedSubmorphs",value:function(a,d){var k=a.borderWidthLeft,b=a.borderWidthTop,e=a.origin,l=e.x;e=e.y;for(var p=d.length-1,u=Array(p+1);0<=p;p--)u[p]=this.render(d[p]);d={};return ve.h("div",
{style:Object.assign({position:"absolute",left:l-(a.isPath?0:k)+"px",top:e-(a.isPath?0:b)+"px"},a.isPolygon?Object.assign({height:"100%",width:"100%",overflow:a.clipMode},"visible"!==a.clipMode?(d[navigator.userAgent.includes("AppleWebKit")?"-webkit-clip-path":"clip-path"]="url(#clipPath"+a.id+")",d):{}):{})},u)}},{key:"renderWorld",value:function(a){for(var d=a.submorphs,k=[],b=[],e=0;e<d.length;e++){var l=d[e];l.hasFixedPosition?b.push(l):k.push(l)}d=this.renderSelectedSubmorphs(a,k);a=ve.h("div",
Object.assign({},ve.defaultAttributes(a,this),{style:ve.defaultStyle(a)}),d);a.fixedMorphs=b;return a}},{key:"renderImage",value:function(a){var d=a.imageUrl;if(d.startsWith("data:")){var k=d.indexOf(","),b=d.substring(5,k),e=$jscomp.makeIterator(b.split(";"));b=e.next().value;e=e.next().value;k=d.substring(k+1);"base64"!==e&&(d=ve.string.createDataURI(k,b))}return ve.h("div",Object.assign({},ve.defaultAttributes(a,this),{style:ve.defaultStyle(a)}),[ve.h("img",{src:d,alt:a.tooltip||"",draggable:!1,
style:{"pointer-events":"none",position:"absolute",left:0,width:"100%",height:"100%"}}),this.renderSubmorphs(a)])}},{key:"renderCanvas",value:function(a){return ve.h("div",Object.assign({},ve.defaultAttributes(a,this),{style:ve.defaultStyle(a)}),[ve.h("canvas",{width:a.width,height:a.height,style:{"pointer-events":"none",position:"absolute"},canvasHook:new ve.CanvasHook(a)}),this.renderSubmorphs(a)])}},{key:"renderCheckBox",value:function(a){return ve.h("div",Object.assign({},ve.defaultAttributes(a,
this),{style:ve.defaultStyle(a)}),[ve.h("input",{type:"checkbox",checked:a.checked,disabled:!a.active,draggable:!1,style:{"pointer-events":"none",width:"15px",height:"15px",position:"absolute"}}),this.renderSubmorphs(a)])}},{key:"renderPath",value:function(a){var d=a.startMarker,k=a.endMarker,b=a.showControlPoints,e=ve.getSvgVertices(a.vertices),l=ve.h("path",Object.assign({namespace:ve.svgNs,id:"svg"+a.id},ve.pathAttributes(a))),p=ve.h("mask",{namespace:ve.svgNs,id:"mask"+a.id},[ve.h("rect",{namespace:ve.svgNs,
attributes:{fill:"white",x:0,y:0,width:a.width+20,height:a.height+20}}),ve.h("path",{namespace:ve.svgNs,initStroke:new ve.InitStroke(a,this,!0),attributes:{d:e,stroke:"black",fill:"none"}}),ve.h("path",{namespace:ve.svgNs,initStroke:new ve.InitStroke(a,this,!1),attributes:{d:e,stroke:"white",fill:"none"}})]);e=[ve.h("clipPath",{namespace:ve.svgNs,id:"clipPath"+a.id},ve.h("path",{namespace:ve.svgNs,attributes:{d:e,fill:"white"}})),p];d&&(d.id||(d.id="start-marker"),l.properties.attributes["marker-start"]=
"url(#"+a.id+"-"+d.id+")",e=[],e.push(this._renderPath_Marker(a,d)));k&&(k.id||(k.id="end-marker"),l.properties.attributes["marker-end"]="url(#"+a.id+"-"+k.id+")",e||(e=[]),e.push(this._renderPath_Marker(a,k)));var u;b&&(u=ve.h("g",{namespace:ve.svgNs},this._renderPath_ControlPoints(a)));return this.renderSvgMorph(a,l,e,u)}},{key:"_renderPath_ControlPoints",value:function(a,d){function k(da,fa,ka,za,Ia,N){var ia=za?12:Math.min(8,Math.max(3,l));ka="path-point path-point-"+ka;za=za?"orange":p;"string"===
typeof Ia&&(ka+="-"+Ia);N&&(ia=Math.max(3,Math.ceil(ia/2)));return N?ve.h("circle",{namespace:ve.svgNs,style:{fill:"white","stroke-width":2,stroke:za},attributes:{class:ka,cx:da,cy:fa,r:ia}}):ve.h("circle",{namespace:ve.svgNs,style:{fill:za},attributes:{class:ka,cx:da,cy:fa,r:ia}})}var b=a.vertices;d=a.borderWidth;var e=a.showControlPoints;a=a._controlPointDrag;var l=0==d?6:d+2,p="red";d=[];if("object"===typeof e){var u=e.radius;(e=e.fill)&&(p=String(e));"number"===typeof u&&(l=u)}if(b.length){e=
0;var x=b[0];u=x.x;var z=x.y;x=x.controlPoints.next;var E=a&&a.maybeMerge&&a.maybeMerge.includes(e);d.push(k(u,z,e,E));for(e=1;e<b.length-1;e++){var G=b[e];E=G.isSmooth;var J=G.x,K=G.y,T=G.controlPoints;G=T.previous;T=T.next;var P=a&&a.maybeMerge&&a.maybeMerge.includes(e);E?d.push(k(J,K,e,P),k(u+x.x,z+x.y,e-1,!1,"control-2",!0),k(J+G.x,K+G.y,e,!1,"control-1",!0)):d.push(k(J,K,e,P));u=J;z=K;x=T}K=b[b.length-1];b=K.isSmooth;E=K.x;J=K.y;K=K.controlPoints.previous;a=a&&a.maybeMerge&&a.maybeMerge.includes(e);
b?d.push(k(E,J,e,a),k(u+x.x,z+x.y,e-1,!1,"control-2",!0),k(E+K.x,J+K.y,e,!1,"control-1",!0)):d.push(k(E,J,e,a))}return d}},{key:"_renderPath_Marker",value:function(a,d){function k(b){var e=b.tagName,l=b.id,p=b.children,u=b.style;p=p?p.map(k):void 0;l&&(l=a.id+"-"+l);return ve.h(e,{namespace:ve.svgNs,id:l,style:u,attributes:ve.obj.dissoc(b,["tagName","id","children","style"])},p)}return k(d)}},{key:"renderSvgMorph",value:function(a,d,k,b){b=void 0===b?[]:b;var e=ve.svgAttributes(a),l=a.innerBounds(),
p=l.width;l=l.height;var u,x=[];a.fill&&a.fill.isGradient&&(u||(u=[]),u.push(ve.renderGradient("fill"+a.id,a.extent,a.fill)));a.borderColor&&a.borderColor.valueOf().isGradient&&(u||(u=[]),u.push(ve.renderGradient("borderColor"+a.id,a.extent,a.borderColor)));k&&k.length&&(u||(u=[]),u.push.apply(u,$jscomp.arrayFromIterable(k)));x.push(d);u&&x.push(ve.h("defs",{namespace:ve.svgNs},u));d=ve.obj.select(ve.defaultStyle(a),"position filter display opacity transform top left transformOrigin cursor overflow".split(" "));
return ve.h("div",Object.assign({},ve.defaultAttributes(a,this),{style:Object.assign({},d,{width:p+"px",height:l+"px","pointer-events":a.reactsToPointer?"auto":"none"})}),[ve.h("svg",Object.assign({namespace:ve.svgNs,version:"1.1",style:{position:"absolute","stroke-linejoin":a.cornerStyle||"mint","stroke-linecap":a.endStyle||"round",overflow:"visible"}},e),x),this.renderSubmorphs(a),ve.h("svg",Object.assign({namespace:ve.svgNs,version:"1.1",style:{position:"absolute",overflow:"visible"}},e),b)])}},
{key:"renderPreview",value:function(a,d){var k=void 0===d.center?!0:d.center,b=void 0===d.ignoreMorphs?[]:d.ignoreMorphs,e=void 0===d.asNode?!1:d.asNode,l=a.origin,p=a.rotation,u=void 0===d.width?100:d.width;d=void 0===d.height?100:d.height;var x=Math.max(.1,1/a.scale);x=(new ve.Transform(a.position.negated(),0,ve.pt(x,x))).transformRectToRect(a.bounds());var z=Math.max(.1,Math.min(u/x.width,d/x.height));l=new ve.Transform(x.topLeft().negated().scaleBy(z).subPt(l),p,ve.pt(z,z));p=(p=this.getNodeForMorph(a))?
p.cloneNode(!0):ve.renderMorph(a);k&&(a=l.transformRectToRect(a.extent.extentAsRectangle()),l=l.preConcatenate(new ve.Transform(ve.pt(a.width<u?(u-a.width)/2:0,a.height<d?(d-a.height)/2:0))));p.style.transform=l.toCSSTransformString();p.style.pointerEvents="";ve.tree.prewalk(p,function(E){if("string"===typeof E.className){var G=E.className.split(" ").map(function(J){return J.trim()}).filter(Boolean);G.includes("Morph")&&(E.className=ve.arr.withoutAll(G,["morph","Morph"]).join(" "),b.find(function(J){return J.id===
E.id})&&E.remove(),E.id="")}},function(E){return Array.from(E.childNodes)});return e?p:p.outerHTML}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Renderer"}},{key:"default",value:function(){return this._default||new this}}],m,{pathInPackage:function(){return"rendering/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1439,end:22095})}(void 0);ve.Renderer=OM;ve.Renderer=OM;ve.Renderer=OM;var UA=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),D$=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),n=m.hasOwnProperty("FontDetector")&&"function"===typeof m.FontDetector?m.FontDetector:m.FontDetector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,
f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.document=a;this.prepared=!1;this.defaultWidth={};this.defaultHeight={};this.possibleFontWeights="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ");this.namedToNumeric=new Map("Thin;Extra Light;Light;Normal;Medium;Semi Bold;Bold;Extra Bold;Ultra Bold".split(";").map(function(d,k){return[d,String(100*(k+1))]}));this.baseFonts=["monospace","sans-serif","serif","Comic Sans MS"];this.span=null}},{key:"prepare",
value:function(){var a=this.defaultWidth,d=this.defaultHeight,k=this.possibleFontWeights,b=this.baseFonts,e=this.document.getElementsByTagName("body")[0],l=this.span||this.document.createElement("span");l.style.fontSize="72px";l.style.opacity=0;l.innerHTML="mmmmmmmmmmlli";if(!l.parentNode){var p=this.document.createElement("div");p.style.position="absolute";p.style.width="100%";p.style.overflow="hidden";p.style["pointer-events"]="none";p.style["-webkit-user-select"]="none";p.appendChild(l);e.appendChild(p)}for(var u in k)for(var x in b)l.style.fontFamily=
b[x],l.style.fontWeight=k[u],a[b[x]+"@"+k[u]]=l.offsetWidth,d[b[x]+"@"+k[u]]=l.offsetHeight;this.span=l;this.prepared=!0}},{key:"isFontSupported",value:function(a,d){d=void 0===d?"normal":d;this.possibleFontWeights.includes(d)||(d=this.namedToNumeric.get(d)||"normal");this.prepared||this.prepare();var k=this.defaultWidth,b=this.defaultHeight,e=this.baseFonts,l=this.span,p=this.document.body;l.parentNode||p.appendChild(l);for(var u in e)if(l.style.fontWeight=d,l.style.fontFamily=a+","+e[u],l.offsetWidth!=
k[e[u]+"@"+d]||l.offsetHeight!=b[e[u]+"@"+d])return!0;return!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontDetector"}},{key:"fonts",get:function(){return UA.fonts}}],m,{pathInPackage:function(){return"rendering/font-detector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:15,end:3680})}(void 0),ira=D$=
UA.FontDetector,hW=[{name:"serif",type:"default"},{name:"sans-serif",type:"default"},{name:"monospace",type:"default"},{name:"Adobe Jenson",type:"serif"},{name:"Albertus",type:"serif"},{name:"Aldus",type:"serif"},{name:"Alexandria",type:"serif"},{name:"Algerian",type:"serif"},{name:"American Typewriter",type:"serif"},{name:"Antiqua",type:"serif"},{name:"Arno",type:"serif"},{name:"Aster",type:"serif"},{name:"Aurora",type:"serif"},{name:"News 706",type:"serif"},{name:"Baskerville",type:"serif"},{name:"Bell",
type:"serif"},{name:"Belwe Roman",type:"serif"},{name:"Bembo",type:"serif"},{name:"Berkeley Old Style",type:"serif"},{name:"Bernhard Modern",type:"serif"},{name:"Bodoni",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Bookman",type:"serif"},{name:"Bulmer",type:"serif"},{name:"Caledonia",type:"serif"},{name:"Californian FB",type:"serif"},{name:"Calisto MT",type:"serif"},{name:"Cambria",type:"serif"},{name:"Capitals",type:"serif"},{name:"Cartier",type:"serif"},{name:"Caslon",type:"serif"},{name:"Wyld",
type:"serif"},{name:"Caslon Antique / Fifteenth Century",type:"serif"},{name:"Catull",type:"serif"},{name:"Centaur",type:"serif"},{name:"Century Old Style",type:"serif"},{name:"Century Schoolbook",type:"serif"},{name:"New Century Schoolbook",type:"serif"},{name:"Century Schoolbook Infant",type:"serif"},{name:"Charis SIL",type:"serif"},{name:"Charter (typeface)",type:"serif"},{name:"Cheltenham",type:"serif"},{name:"Clearface",type:"serif"},{name:"Cochin",type:"serif"},{name:"Colonna",type:"serif"},
{name:"Computer Modern",type:"serif"},{name:"Concrete Roman",type:"serif"},{name:"Constantia",type:"serif"},{name:"Cooper Black",type:"serif"},{name:"Copperplate Gothic",type:"serif"},{name:"Corona",type:"serif"},{name:"News 705",type:"serif"},{name:"DejaVu Serif",type:"serif"},{name:"Didot",type:"serif"},{name:"Droid Serif",type:"serif"},{name:"Elephant",type:"serif"},{name:"Emerson",type:"serif"},{name:"Excelsior",type:"serif"},{name:"News 702",type:"serif"},{name:"Fairfield",type:"serif"},{name:"FF Scala",
type:"serif"},{name:"Footlight",type:"serif"},{name:"FreeSerif",type:"serif"},{name:"Friz Quadrata",type:"serif"},{name:"Garamond",type:"serif"},{name:"Gentium",type:"serif"},{name:"Georgia",type:"serif"},{name:"Gloucester",type:"serif"},{name:"Goudy",type:"serif"},{name:"Granjon",type:"serif"},{name:"High Tower Text",type:"serif"},{name:"Hoefler Text",type:"serif"},{name:"Imprint",type:"serif"},{name:"Ionic No. 5",type:"serif"},{name:"News 701",type:"serif"},{name:"ITC Benguiat",type:"serif"},{name:"Janson",
type:"serif"},{name:"Jokerman",type:"serif"},{name:"Joanna",type:"serif"},{name:"Korinna",type:"serif"},{name:"Lexicon",type:"serif"},{name:"Liberation Serif",type:"serif"},{name:"Linux Libertine",type:"serif"},{name:"Literaturnaya",type:"serif"},{name:"Lucida Bright",type:"serif"},{name:"Melior",type:"serif"},{name:"Memphis",type:"serif"},{name:"Miller",type:"serif"},{name:"Minion",type:"serif"},{name:"Modern",type:"serif"},{name:"Mona Lisa",type:"serif"},{name:"Mrs Eaves",type:"serif"},{name:"MS Serif",
type:"serif"},{name:"New York",type:"serif"},{name:"Nimbus Roman",type:"serif"},{name:"NPS Rawlinson Roadway",type:"serif"},{name:"OCR A Extended",type:"serif"},{name:"Palatino",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Perpetua",type:"serif"},{name:"Plantin",type:"serif"},{name:"Playbill",type:"serif"},{name:"Primer",type:"serif"},{name:"Renault",type:"serif"},{name:"Requiem",type:"serif"},{name:"Rotis Serif",type:"serif"},{name:"Sabon",type:"serif"},{name:"Sistina",type:"serif"},{name:"Souvenir",
type:"serif"},{name:"XITS",type:"serif"},{name:"Sylfaen",type:"serif"},{name:"Times New Roman",type:"serif"},{name:"Times",type:"serif"},{name:"Torino",type:"serif"},{name:"Trajan",type:"serif"},{name:"Trinit\u00e9",type:"serif"},{name:"Trump Mediaeval",type:"serif"},{name:"Utopia",type:"serif"},{name:"Vera Serif",type:"serif"},{name:"Wide Latin",type:"serif"},{name:"Windsor",type:"serif"},{name:"XITS",type:"serif"},{name:"Playfair Display",type:"serif",isGoogleFont:!0},{name:"Cormorant",type:"serif",
isGoogleFont:!0},{name:"Eczar",type:"serif",isGoogleFont:!0},{name:"Alegreya",type:"serif",isGoogleFont:!0},{name:"Lora",type:"serif",isGoogleFont:!0},{name:"Source Serif Pro",type:"serif",isGoogleFont:!0},{name:"Roboto Slab",type:"serif",isGoogleFont:!0},{name:"BioRhyme",type:"serif",isGoogleFont:!0},{name:"Libre Baskerville",type:"serif",isGoogleFont:!0},{name:"Crimson Text",type:"serif",isGoogleFont:!0},{name:"Old Standard TT",type:"serif",isGoogleFont:!0},{name:"Domine",type:"serif",isGoogleFont:!0},
{name:"Bitter",type:"serif",isGoogleFont:!0},{name:"Gentium Basic",type:"serif",isGoogleFont:!0},{name:"PT Serif",type:"serif",isGoogleFont:!0},{name:"Cardo",type:"serif",isGoogleFont:!0},{name:"Neuton",type:"serif",isGoogleFont:!0},{name:"Arvo",type:"serif",isGoogleFont:!0},{name:"Merriweather",type:"serif",isGoogleFont:!0},{name:"Alexandria",type:"slab serif"},{name:"American Typewriter",type:"slab serif"},{name:"Archer",type:"slab serif"},{name:"Athens",type:"slab serif"},{name:"Candida",type:"slab serif"},
{name:"Cholla Slab",type:"slab serif"},{name:"City",type:"slab serif"},{name:"Clarendon",type:"slab serif"},{name:"Concrete Roman",type:"slab serif"},{name:"Courier",type:"slab serif"},{name:"Egyptienne",type:"slab serif"},{name:"Guardian Egyptian",type:"slab serif"},{name:"Ionic No. 5",type:"slab serif"},{name:"Lexia",type:"slab serif"},{name:"Memphis",type:"slab serif"},{name:"Nilland",type:"slab serif"},{name:"Roboto Slab",type:"slab serif"},{name:"Rockwell",type:"slab serif"},{name:"Schadow",
type:"slab serif"},{name:"Serifa",type:"slab serif"},{name:"Skeleton Antique",type:"slab serif"},{name:"Sreda",type:"slab serif"},{name:"Swift",type:"slab serif"},{name:"Tower",type:"slab serif"},{name:"Agency FB",type:"sans-serif"},{name:"Akzidenz-Grotesk",type:"sans-serif"},{name:"Andal\u00e9 Sans",type:"sans-serif"},{name:"Antique Olive",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Arial Unicode MS",type:"sans-serif"},{name:"Avant Garde Gothic",type:"sans-serif"},{name:"Avenir",type:"sans-serif"},
{name:"Bank Gothic",type:"sans-serif"},{name:"Bauhaus",type:"sans-serif"},{name:"Bell Centennial",type:"sans-serif"},{name:"Bell Gothic",type:"sans-serif"},{name:"Benguiat Gothic",type:"sans-serif"},{name:"Berlin Sans",type:"sans-serif"},{name:"Brandon Grotesque",type:"sans-serif"},{name:"Calibri",type:"sans-serif"},{name:"Casey",type:"sans-serif"},{name:"Century Gothic",type:"sans-serif"},{name:"Charcoal",type:"sans-serif"},{name:"Chicago",type:"sans-serif"},{name:"Clearview",type:"sans-serif"},
{name:"Comic Sans",type:"sans-serif"},{name:"Compacta",type:"sans-serif"},{name:"Corbel",type:"sans-serif"},{name:"DejaVu Sans",type:"sans-serif"},{name:"DIN",type:"sans-serif"},{name:"Dotum",type:"sans-serif"},{name:"Droid Sans",type:"sans-serif"},{name:"Dyslexie",type:"sans-serif"},{name:"Ecofont",type:"sans-serif"},{name:"Eras",type:"sans-serif"},{name:"Esseltub",type:"sans-serif"},{name:"Espy Sans",type:"sans-serif"},{name:"Eurocrat",type:"sans-serif"},{name:"Eurostile",type:"sans-serif"},{name:"Square 721",
type:"sans-serif"},{name:"FF Dax",type:"sans-serif"},{name:"FF Meta",type:"sans-serif"},{name:"FF Scala Sans",type:"sans-serif"},{name:"Fira Sans",type:"sans-serif"},{name:"Folio",type:"sans-serif"},{name:"Franklin Gothic",type:"sans-serif"},{name:"FreeSans",type:"sans-serif"},{name:"Frutiger",type:"sans-serif"},{name:"Futura",type:"sans-serif"},{name:"Geneva",type:"sans-serif"},{name:"Gill Sans",type:"sans-serif"},{name:"Gill Sans Schoolbook",type:"sans-serif"},{name:"Gotham",type:"sans-serif"},
{name:"Haettenschweiler",type:"sans-serif"},{name:"Handel Gothic",type:"sans-serif"},{name:"Hei",type:"sans-serif"},{name:"Helvetica",type:"sans-serif"},{name:"Helvetica Neue",type:"sans-serif"},{name:"Swiss 721",type:"sans-serif"},{name:"Highway Gothic",type:"sans-serif"},{name:"Hobo",type:"sans-serif"},{name:"Impact",type:"sans-serif"},{name:"Industria",type:"sans-serif"},{name:"Interstate",type:"sans-serif"},{name:"Johnston/New Johnston",type:"sans-serif"},{name:"Kabel",type:"sans-serif"},{name:"Klavika",
type:"sans-serif"},{name:"Lexia Readable",type:"sans-serif"},{name:"Liberation Sans",type:"sans-serif"},{name:"Linux Biolinum",type:"sans-serif"},{name:"Lucida Sans",type:"sans-serif"},{name:"Lucida Grande",type:"sans-serif"},{name:"Lucida Sans Unicode",type:"sans-serif"},{name:"Lydian",type:"sans-serif"},{name:"Meiryo",type:"sans-serif"},{name:"Meta",type:"sans-serif"},{name:"Microgramma",type:"sans-serif"},{name:"Modern",type:"sans-serif"},{name:"Motorway",type:"sans-serif"},{name:"Arial",type:"sans-serif"},
{name:"Myriad",type:"sans-serif"},{name:"Neutraface",type:"sans-serif"},{name:"Neuzeit S",type:"sans-serif"},{name:"News Gothic",type:"sans-serif"},{name:"Nimbus Sans L",type:"sans-serif"},{name:"Open Sans",type:"sans-serif"},{name:"Optima",type:"sans-serif"},{name:"Paris",type:"sans-serif"},{name:"Product Sans",type:"sans-serif"},{name:"Proxima Nova",type:"sans-serif"},{name:"Russian Federation",type:"sans-serif"},{name:"Rail Alphabet",type:"sans-serif"},{name:"Roboto",type:"sans-serif"},{name:"Rotis Sans",
type:"sans-serif"},{name:"Segoe UI",type:"sans-serif"},{name:"Skia",type:"sans-serif"},{name:"Source Sans Pro",type:"sans-serif"},{name:"Sweden Sans",type:"sans-serif"},{name:"Syntax",type:"sans-serif"},{name:"Tahoma",type:"sans-serif"},{name:"Template Gothic",type:"sans-serif"},{name:"Thesis Sans",type:"sans-serif"},{name:"Tiresias",type:"sans-serif"},{name:"Trade Gothic",type:"sans-serif"},{name:"Transport",type:"sans-serif"},{name:"Trebuchet MS",type:"sans-serif"},{name:"Twentieth Century (Tw Cen MT)",
type:"sans-serif"},{name:"Ubuntu",type:"sans-serif"},{name:"Univers",type:"sans-serif"},{name:"Zurich",type:"sans-serif"},{name:"Vera Sans",type:"sans-serif"},{name:"Verdana",type:"sans-serif"},{name:"Work Sans",type:"sans-serif",isGoogleFont:!0},{name:"Rubik",type:"sans-serif",isGoogleFont:!0},{name:"Libre Franklin",type:"sans-serif",isGoogleFont:!0},{name:"Fira Sans",type:"sans-serif",isGoogleFont:!0},{name:"Alegreya Sans",type:"sans-serif",isGoogleFont:!0},{name:"Chivo",type:"sans-serif",isGoogleFont:!0},
{name:"Source Sans Pro",type:"sans-serif",isGoogleFont:!0},{name:"Roboto",type:"sans-serif",isGoogleFont:!0},{name:"Poppins",type:"sans-serif",isGoogleFont:!0},{name:"Archivo Narrow",type:"sans-serif",isGoogleFont:!0},{name:"Karla",type:"sans-serif",isGoogleFont:!0},{name:"Montserrat",type:"sans-serif",isGoogleFont:!0},{name:"Rajdhani",type:"sans-serif",isGoogleFont:!0},{name:"PT Sans",type:"sans-serif",isGoogleFont:!0},{name:"Lato",type:"sans-serif",isGoogleFont:!0},{name:"Open Sans",type:"sans-serif",
isGoogleFont:!0},{name:"Cabin",type:"sans-serif",isGoogleFont:!0},{name:"Raleway",type:"sans-serif",isGoogleFont:!0},{name:"Nyala",type:"semi-serif"},{name:"Rotis Semi Serif",type:"semi-serif"},{name:"Easyreading",type:"semi-serif"},{name:"Andal\u00e9 Mono",type:"monospace"},{name:"Arial",type:"monospace"},{name:"Bitstream Vera (Vera Sans Mono)",type:"monospace"},{name:"Consolas",type:"monospace"},{name:"Courier",type:"monospace"},{name:"Courier New",type:"monospace"},{name:"DejaVu Sans Mono",type:"monospace"},
{name:"Droid Sans Mono",type:"monospace"},{name:"Everson Mono",type:"monospace"},{name:"Fixed",type:"monospace"},{name:"Fixedsys",type:"monospace"},{name:"Fixedsys Excelsior",type:"monospace"},{name:"HyperFont",type:"monospace"},{name:"Inconsolata",type:"monospace"},{name:"Letter Gothic",type:"monospace"},{name:"Liberation Mono",type:"monospace"},{name:"Lucida Console",type:"monospace"},{name:"Lucida Sans Typewriter",type:"monospace"},{name:"Lucida Typewriter",type:"monospace"},{name:"Menlo",type:"monospace"},
{name:"MICR",type:"monospace"},{name:"Monaco",type:"monospace"},{name:"Monospace",type:"monospace"},{name:"MS Gothic",type:"monospace"},{name:"MS Mincho",type:"monospace"},{name:"Nimbus Mono L",type:"monospace"},{name:"OCR-A",type:"monospace"},{name:"OCR-B",type:"monospace"},{name:"PragmataPro",type:"monospace"},{name:"Prestige Elite",type:"monospace"},{name:"ProFont",type:"monospace"},{name:"Proggy programming fonts",type:"monospace"},{name:"SimHei",type:"monospace"},{name:"SimSun",type:"monospace"},
{name:"Source Code Pro",type:"monospace"},{name:"Terminal",type:"monospace"},{name:"Trixie",type:"monospace"},{name:"Ubuntu Mono",type:"monospace"},{name:"Vera Sans Mono (Bitstream Vera)",type:"monospace"},{name:"Space Mono",type:"monospace",isGoogleFont:!0},{name:"Inconsolata",type:"monospace",isGoogleFont:!0},{name:"Anonymous Pro",type:"monospace",isGoogleFont:!0},{name:"Balloon",type:"script"},{name:"Brush Script",type:"script"},{name:"Choc",type:"script"},{name:"Dom Casual",type:"script"},{name:"Mistral",
type:"script"},{name:"Papyrus",type:"script"},{name:"Segoe Script",type:"script"},{name:"Utopia",type:"script"},{name:"Coronet",type:"script"},{name:"Curlz",type:"script"},{name:"Gravura",type:"script"},{name:"Script",type:"script"},{name:"Wiesbaden Swing",type:"script"},{name:"American Scribe",type:"script"},{name:"AMS Euler",type:"script"},{name:"Apple Chancery",type:"script"},{name:"Forte",type:"script"},{name:"French Script",type:"script"},{name:"ITC Zapf Chancery",type:"script"},{name:"Kuenstler Script",
type:"script"},{name:"Monotype Corsiva",type:"script"},{name:"Old English Text MT",type:"script"},{name:"Zapfino",type:"script"},{name:"Andy",type:"handwriting"},{name:"Ashley Script",type:"handwriting"},{name:"C\u00e9zanne",type:"handwriting"},{name:"Chalkboard",type:"handwriting"},{name:"Comic Sans MS",type:"handwriting"},{name:"Dom Casual",type:"handwriting"},{name:"Kristen",type:"handwriting"},{name:"Lucida Handwriting",type:"handwriting"},{name:"Bastard",type:"blackletter"},{name:"Breitkopf Fraktur",
type:"blackletter"},{name:"Cloister Black",type:"blackletter"},{name:"Fette Fraktur",type:"blackletter"},{name:"Fletcher",type:"blackletter"},{name:"Fraktur",type:"blackletter"},{name:"Lucida Blackletter",type:"blackletter"},{name:"Old English Text",type:"blackletter"},{name:"Schwabacher",type:"blackletter"},{name:"Aharoni",type:"non-latin"},{name:"Aparajita",type:"non-latin"},{name:"Arial",type:"non-latin"},{name:"Calibri",type:"non-latin"},{name:"Chandas",type:"non-latin"},{name:"Gadugi",type:"non-latin"},
{name:"Grecs du roi",type:"non-latin"},{name:"Javanese script",type:"non-latin"},{name:"Japanese Gothic",type:"non-latin"},{name:"Jomolhari",type:"non-latin"},{name:"Kiran",type:"non-latin"},{name:"Kochi",type:"non-latin"},{name:"Koren",type:"non-latin"},{name:"Kruti Dev",type:"non-latin"},{name:"Malgun Gothic",type:"non-latin"},{name:"Meiryo",type:"non-latin"},{name:"Microsoft JhengHei",type:"non-latin"},{name:"Microsoft YaHei",type:"non-latin"},{name:"Minch\u014d",type:"non-latin"},{name:"Ming",
type:"non-latin"},{name:"Mona",type:"non-latin"},{name:"MS Gothic",type:"non-latin"},{name:"Nastaliq Navees",type:"non-latin"},{name:"Porson",type:"non-latin"},{name:"Segoe UI Symbol",type:"non-latin"},{name:"Shruti",type:"non-latin"},{name:"SimSun",type:"non-latin"},{name:"Sylfaen",type:"non-latin"},{name:"Tahoma",type:"non-latin"},{name:"Tengwar",type:"non-latin"},{name:"Tibetan Machine Uni",type:"non-latin"},{name:"Wilson Greek",type:"non-latin"},{name:"SMP",type:"unicode"},{name:"Microsoft Office",
type:"unicode"},{name:"Bitstream Cyberbit",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"Charis SIL",type:"unicode"},{name:"BMP",type:"unicode"},{name:"SMP",type:"unicode"},{name:"Code2002",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"IPA",type:"unicode"},{name:"Everson Mono",type:"unicode"},{name:"Windows",type:"unicode"},{name:"Fixedsys Excelsior",type:"unicode"},{name:"FreeFont",type:"unicode"},{name:"Gentium",type:"unicode"},{name:"GNU Unifont",type:"unicode"},{name:"Georgia Ref",
type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Junicode",type:"unicode"},{name:"Mac OS 8.5",type:"unicode"},{name:"macOS",type:"unicode"},{name:"ISO 8859-x",type:"unicode"},{name:"MS Gothic",type:"unicode"},{name:"MS Mincho",type:"unicode"},{name:"Nimbus Sans Global",type:"unicode"},{name:"Noto",type:"unicode"},{name:"Fabrizio Schiavi",type:"unicode"},{name:"Squarish Sans CT",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Titus Cyberbit Basic",type:"unicode"},{name:"Verdana Ref",
type:"unicode"},{name:"XITS",type:"unicode"},{name:"Apple Symbols",type:"symbol"},{name:"Asana-Math",type:"symbol"},{name:"Blackboard bold",type:"symbol"},{name:"Bookshelf Symbol 7",type:"symbol"},{name:"Cambria Math",type:"symbol"},{name:"Computer Modern",type:"symbol"},{name:"Lucida Math",type:"symbol"},{name:"Marlett",type:"symbol"},{name:"Symbol",type:"symbol"},{name:"Webdings",type:"symbol"},{name:"Wingdings",type:"symbol"},{name:"Wingdings 2",type:"symbol"},{name:"Wingdings 3",type:"symbol"},
{name:"Zapf Dingbats",type:"symbol"},{name:"Ad Lib",type:"decorative"},{name:"Allegro",type:"decorative"},{name:"Andreas",type:"decorative"},{name:"Arnold B\u00f6cklin",type:"decorative"},{name:"Astur",type:"decorative"},{name:"Banco",type:"decorative"},{name:"Bauhaus",type:"decorative"},{name:"Braggadocio",type:"decorative"},{name:"Broadway",type:"decorative"},{name:"Caslon Antique",type:"decorative"},{name:"Cooper Black",type:"decorative"},{name:"Curlz",type:"decorative"},{name:"Ellington",type:"decorative"},
{name:"Exocet",type:"decorative"},{name:"FIG Script",type:"decorative"},{name:"Forte",type:"decorative"},{name:"Gabriola",type:"decorative"},{name:"Horizon",type:"decorative"},{name:"Jim Crow",type:"decorative"},{name:"Lo-Type",type:"decorative"},{name:"Neuland",type:"decorative"},{name:"Peignot",type:"decorative"},{name:"San Francisco",type:"decorative"},{name:"Stencil",type:"decorative"},{name:"Umbra",type:"decorative"},{name:"Westminster",type:"decorative"},{name:"Willow",type:"decorative"},{name:"Windsor",
type:"decorative"},{name:"Lithos",type:"mimicry"},{name:"Skia",type:"mimicry"},{name:"3x3",type:"misc"},{name:"Compatil",type:"misc"},{name:"Generis",type:"misc"},{name:"Grasset",type:"misc"},{name:"LED",type:"misc"},{name:"Luxi",type:"misc"},{name:"System",type:"misc"}];UA.fonts=hW;UA.fonts=hW;UA.fonts=hW;UA.default=D$;var ai=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js");ai.textlayerNodeForFontMeasure=function(f){var m=f.viewState,n=m.text_layer_node;m=m.fontmetric_text_layer_node;
n&&!n.className.includes("newtext-text-layer")&&(f.viewState.text_layer_node=n=n.parentNode.querySelector(".newtext-text-layer.actual"));m&&!m.className.includes("newtext-text-layer")&&(f.viewState.fontmetric_text_layer_node=m=null);n&&!m&&n.parentNode&&(m=f.viewState.fontmetric_text_layer_node=n.parentNode.querySelector(".newtext-text-layer.font-measure"));return m};ai.isExtendingChar=function(f){return 768<=f.charCodeAt(0)&&ai.extendingChars.test(f)};ai.skipExtendingChars=function(f,m,n){for(;(0>
n?0<m:m<f.length)&&ai.isExtendingChar(f.charAt(m));)m+=n;return m};ai.charBoundsOfBigMonospacedLine=function(f,m,n,a,d,k,b,e){d=void 0===d?0:d;k=void 0===k?0:k;n=n.text.length;if(500>n||m.isProportional(ai.getComputedFontFamily(a)))return null;var l=Infinity,p=b.defaultTextStyle;b.lineWrapping&&(l=a.getBoundingClientRect().width);m=m._domMeasure.defaultCharExtent(f,{defaultTextStyle:p},e);f=m.width;m=m.height;a=Array(n);for(b=0;b<n;b++)d+f>l&&(d=0,k+=m),a[b]={x:d,y:k,width:f,height:m},d+=f;return a};
ai.charBoundsOfLine=function(f,m,n,a){n=void 0===n?0:n;a=void 0===a?0:a;f=m.ELEMENT_NODE;var d=m.TEXT_NODE,k=m.ownerDocument,b=[],e=0;if(m)if(m.className.includes("line")){n-=m.offsetLeft;a-=m.offsetTop;var l=m.childNodes[0]}else l=m.getElementsByClassName("line")[0].childNodes[0],n=n-m.offsetLeft+ai.getComputedMarginLeft(m),a-=m.offsetTop;else l=null;if(!l){var p=l=k.createElement("br");m.appendChild(p)}for(;l&&!(Infinity<e);){var u="BR"!==l.tagName&&l.nodeType===f&&l.childNodes[0]||l;if(u.nodeType===
d)for(var x=u.length,z=0;z<x;z++){var E=ai.measureCharInner(k,u,z,"right");var G=E.left;var J=E.top;m=E.width;E=E.height;G+=n;J+=a;b[e++]={x:G,y:J,width:m,height:E}}else if(l.nodeType===f)u=l.getBoundingClientRect(),G=u.left,J=u.top,m=u.width,E=u.height,G+=n,J+=a,b[e++]={x:G,y:J,width:m,height:E};else throw Error("Cannot deal with node "+l);l=l.nextSibling}p&&p.parentNode.removeChild(p);return b};ai.measureCharInner=function(f,m,n,a){a=void 0===a?"left":a;var d=n;n+=1;if(3==m.nodeType)for(var k=0;4>
k;k++){var b=ai.getUsefulRect(ai.range(f,m,d,n).getClientRects(),a);if(b.left||b.right||0==d)break;n=d;--d}return b};ai.range=function(f,m,n,a,d){f=f.createRange();f.setEnd(d||m,a);f.setStart(m,n);return f};ai.getUsefulRect=function(f,m){var n={left:0,right:0,top:0,bottom:0};if("left"==m)for(m=0;m<f.length&&(n=f[m]).left==n.right;m++);else for(m=f.length-1;0<=m&&(n=f[m]).left==n.right;m--);return n};ai.string=Dh;ai.arr=Gf;ai.obj=eg;ai.FontDetector=ira;ai.cumulativeOffset=Gz;ai.config=$l;ai.debug=
!!ai.config.onloadURLQuery["debug-font-metric"];ai.checkTimeout=1E3;var E$=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=m.hasOwnProperty("FontMetric")&&"function"===typeof m.FontMetric?m.FontMetric:m.FontMetric=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.charMap={};this.cachedBoundsInfo=
{};this.supportedFontCache={};this.element=null;this.isProportionalCache={}}},{key:"reset",value:function(a){if(this.element){var d=this.element.parentNode;var k=this.element.getRootNode()}this.uninstall();this.charMap={};this.cachedBoundsInfo={};k&&d&&this.install(k,d,a)}},{key:"install",value:function(a,d,k){this.element=a.createElement("div");this.element.name="fontMetric";this.setMeasureNodeStyles(this.element.style,!0);d.appendChild(this.element);this._domMeasure=(new ai.DOMTextMeasure).install(a,
d,k)}},{key:"uninstall",value:function(){this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this._domMeasure&&this._domMeasure.uninstall())}},{key:"setMeasureNodeStyles",value:function(a,d){a.width=a.height="auto";a.left=a.top="0px";a.visibility="hidden";a.position="absolute";a.whiteSpace="pre";a.font="inherit";a.overflow=d?"hidden":"visible"}},{key:"measure",value:function(a,d){var k=a.fontFamily,b=a.fontSize,e=a.fontWeight,l=a.fontStyle,p=
a.textDecoration,u=a.textStyleClasses;a=a.transform;var x=this.element;a&&(a=a.inverse());x.textContent=d;Object.assign(x.style,{"-webkit-text-size-adjust":"none",fontFamily:k,fontWeight:e,fontStyle:l,textDecoration:p,transform:a,fontSize:b+"px"});x.className=u?u.join(" "):"";try{var z=x.getBoundingClientRect();var E=z.width;var G=z.height}catch(J){return{width:0,height:0}}return{height:G,width:E}}},{key:"charBoundsFor",value:function(a,d){var k=d.length,b=Array(k),e=this.cachedBoundsInfo,l=e.bounds,
p=e.str;e=e.style;if(this.isProportional(a.fontFamily)){e=l&&ai.obj.equals(e,a);for(var u=!a.fixedCharacterSpacing,x=0,z=0;x<k;x++){var E=d[x];if(u)if(e=e&&E===p[x]){var G=l[x];E=G.width;G=G.height}else E=d.substr(0,x+1),G=this.measure(a,E),E=G.width,G=G.height,E-=z;else G=this.sizeFor(a,E),E=G.width,G=G.height;b[x]={x:z,y:0,width:Math.ceil(E),height:Math.ceil(G)};z+=E}u&&(this.cachedBoundsInfo={bounds:b,str:d,style:a})}else for(d=this.sizeFor(a,"x",!0),a=this.sizeFor(a,"xx",!0).width-d.width,d=d.height,
p=0;p<k;p++)l=a*p,b[p]={x:l,y:0,width:a,height:d};return b}},{key:"isProportional",value:function(a){if(this.isProportionalCache.hasOwnProperty(a))return this.isProportionalCache[a];var d={fontFamily:a,fontSize:12},k=this.sizeFor(d,"w").width;d=this.sizeFor(d,"i").width;return this.isProportionalCache[a]=k!==d}},{key:"sizeFor",value:function(a,d,k){d=void 0===d?"":d;var b=a.fontFamily,e=a.fontSize,l=a.fontWeight,p=a.fontStyle,u=a.textDecoration,x=a.textStyleClasses;a={fontFamily:b,fontSize:e,fontWeight:l,
fontStyle:p,textDecoration:u,textStyleClasses:x};if((void 0===k||!k)&&1<d.length)return this.measure(a,d);k=x?x.join(" "):"";b=[b,e,l,p,u,k].join("-");this.charMap[b]||(this.charMap[b]={});this.charMap[b][d]||(this.charMap[b][d]=this.measure(a,d));return this.charMap[b][d]}},{key:"defaultLineHeight",value:function(a){return this.sizeFor(a," ").height}},{key:"supportedFonts",get:function(){return ai.arr.uniq(Object.keys(this.supportedFontCache).map(function(a){return a.split(",")[0].replaceAll(/-bold|-Medium|"|-normal/g,
"")}))}},{key:"isFontSupported",value:function(a,d){d=void 0===d?"normal":d;var k=this.fontDetector||(this.fontDetector=new ai.FontDetector(this.element.ownerDocument));if(this.supportedFontCache[a+"-"+d]){var b=this.supportedFontCache[a+"-"+d],e=b.ts;b=b.value;if(Date.now()-e<ai.checkTimeout)return b}k=k.isFontSupported(a,d);this.supportedFontCache[a+"-"+d]={ts:Date.now(),value:k};return k}},{key:"defaultCharExtent",value:function(a,d,k){return this._domMeasure.defaultCharExtent(a,d,k)}},{key:"manuallyComputeCharBoundsOfLine",
value:function(a,d,k,b,e,l,p){return this._domMeasure.computeCharBBoxes(a,d,0,0,e,l,p,this)}},{key:"manuallyComputeBoundsOfLines",value:function(a,d,k,b,e,l,p){return this._domMeasure.computeBBoxesOfLines(a,d,0,0,e,l,p)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontMetric"}},{key:"default",value:function(){if(!this._fontMetric)throw Error("FontMetric has not yet been initialized!");return this._fontMetric}},{key:"initDefault",value:function(a){if(!this._fontMetric){if(!a&&"undefined"===
typeof document)throw Error("Cannot initialize FontMetric without document");a||(a={document:document});this._fontMetric=this.forDOMEnv(a)}return this._fontMetric}},{key:"removeDefault",value:function(){this._fontMetric&&(this._fontMetric.uninstall(),this._fontMetric=null)}},{key:"forDOMEnv",value:function(a){a=a.document;var d=new ai.FontMetric;d.install(a,a.body);return d}}],m,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:321,end:7644})}(void 0),jra=E$=ai.FontMetric;ai.extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=m.hasOwnProperty("DOMTextMeasure")&&"function"===typeof m.DOMTextMeasure?m.DOMTextMeasure:m.DOMTextMeasure=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:"reset",value:function(){if(this.element){var a=this.element.parentNode;var d=this.element.ownerDocument}this.uninstall();d&&a&&this.install(d,a);return this}},
{key:"install",value:function(a,d,k){this.maxLineBBoxCacheCount=(this.debug=k=void 0===k?!1:k)?1:3E3;this.lineBBoxCacheCount=0;this.lineBBoxCache={};this.maxTextlayerNodeCacheCount=k?1:30;this.textlayerNodeCacheCount=0;this.textlayerNodeCache={};this.defaultCharWidthHeightCache={};this.doc=a;a=this.element=a.createElement("div");a.className="dom-measure"+(k?" debug":"");this.setMeasureNodeStyles(a.style,!0);d.appendChild(a);return this}},{key:"uninstall",value:function(){var a=this.element;a&&(a.parentNode&&
a.parentNode.removeChild(a),this.element=null)}},{key:"setMeasureNodeStyles",value:function(a,d){a.width=a.height="auto";this.debug||(a.left=a.top="0px",a.visibility="hidden");a.position="absolute";a.whiteSpace="pre";a.font="inherit";a.overflow=d&&!this.debug?"hidden":"visible"}},{key:"generateStyleKey",value:function(a){var d=a.defaultTextStyle;return[d.fontFamily,d.fontSize,d.fontWeight,d.fontStyle,d.textDecoration,d.textStyleClasses,a.paddingLeft,a.paddingRight,a.paddingTop,a.paddingBottom,a.width,
a.height,a.clipMode,a.lineWrapping,a.textAlign].join("-")}},{key:"defaultCharExtent",value:function(a,d,k){var b=this,e=this.generateStyleKey(d),l=this.defaultCharWidthHeightCache[e];if("undefined"!==typeof l&&(0!==l.height||0!==l.width))return l;var p=this.doc;return this.withTextLayerNodeDo(a,k,d,e,function(u){var x=p.createElement("span");x.className="line";x.style.whiteSpace="pre";u.appendChild(x);x.textContent="abcdefghijklmnopqrstufwxyz ABCDEFGHIJKLMNOPQRSTUFWXYZ 1234567890 {}[];,./<>?'\"!@#$%^&*()-=_+";
var z=x.getBoundingClientRect().width,E=p.createElement("span");E.className="line";E.style.whiteSpace="pre";u.appendChild(E);E.textContent="H\ne\nll\no";var G=E.getBoundingClientRect().height;u.removeChild(x);u.removeChild(E);return b.defaultCharWidthHeightCache[e]={width:z/92,height:Math.ceil(G/4)}})}},{key:"computeBBoxesOfLines",value:function(a,d,k,b,e,l,p){var u=this;k=void 0===k?0:k;b=void 0===b?0:b;for(var x=this.generateStyleKey(e),z=Array(d.length),E=!0,G=0;G<d.length;G++){var J=!d[G].textAttributes.length&&
this.lineBBoxCache[x+"_"+d[G].text];J&&J.height&&J.width?z[G]=J:E=!1}return E?z:this.withTextLayerNodeDo(a,l,e,x,function(K,T,P){for(var da=Array(d.length),fa=Array(d.length),ka=0;ka<d.length;ka++)if(!fa[ka]){var za=p(d[ka]);za.style.display="inline-block";K.appendChild(za);da[ka]=za}for(ka=0;ka<da.length;ka++)if(!fa[ka]){za=da[ka];var Ia=za.getBoundingClientRect();u.lineBBoxCache[x+"_"+d[ka].text]=fa[ka]={x:Ia.left-za.offsetLeft+k-T,y:Ia.top-za.offsetTop+b-P,width:Ia.width,height:Ia.height}}for(T=
0;T<da.length;T++)K.removeChild(da[T]);return fa})}},{key:"computeCharBBoxes",value:function(a,d,k,b,e,l,p,u){var x=this;k=void 0===k?0:k;b=void 0===b?0:b;return this.withTextLayerNodeDo(a,l,e,this.generateStyleKey(e),function(z,E,G){var J=p(d);z.appendChild(J);z=1E4<d.stringSize&&ai.charBoundsOfBigMonospacedLine(a,u,d,J,k,b,e,l)||ai.charBoundsOfLine(d,J,k-E,b-G);x.debug||J.parentNode.removeChild(J);return z})}},{key:"withTextLayerNodeDo",value:function(a,d,k,b,e){var l=this.doc,p=this.textlayerNodeCache,
u=this.element,x=ai.textlayerNodeForFontMeasure(a);x||(x=p[b]);if(!x){this.textlayerNodeCacheCount++;x=p[b]=d(k,[]);x.id=b;d=k.width;var z=k.clipMode;k.width||k.clipMode&&"visible"!==k.clipMode?(k=l.createElement("div"),k.style.position="absolute",z&&(k.style.overflow=z),d&&(k.style.width=d+"px"),k.id=b,k.appendChild(x),u.appendChild(k)):u.appendChild(x)}b=a.getGlobalTransform().inverse();a.env.renderer&&a.env.renderer.getNodeForMorph(a)&&(1!=b.getScale()||0!=b.getRotation())&&(b.e=b.f=0,x.style.transform=
b.toString());b=x.getBoundingClientRect();a=b.left;b=b.top;try{return e(x,a,b)}finally{if(x.style.transform="",!this.debug&&this.textlayerNodeCacheCount>this.maxTextlayerNodeCacheCount){e=Math.ceil(this.maxTextlayerNodeCacheCount/2);for(var E;e--&&(E=u.childNodes[0]);)p[E.id]=null,u.removeChild(E);this.textlayerNodeCacheCount-=e}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DOMTextMeasure"}}],m,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11314,end:19760})})(void 0);ai.GLOBAL="undefined"!==typeof System?System.global:window||global||self||void 0;ai.getComputedFontFamily="function"===typeof ai.GLOBAL.getComputedStyle?function(f){return ai.GLOBAL.getComputedStyle(f).fontFamily}:function(){return""};ai.getComputedMarginLeft="function"===typeof ai.GLOBAL.getComputedStyle?function(f){return parseInt(ai.GLOBAL.getComputedStyle(f).marginLeft)||
0}:function(){return 0};ai.default=E$;var Qi=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js");Qi.signalBindings=function(f,m,n){if(f=f.attributeConnections){f=f.slice();for(var a=0;a<f.length;a++)f[a].sourceAttrName===m&&f[a].update(n)}};Qi.informMorph=function(f,m,n){try{n.onChange(m);Qi.signalBindings(n,"change",m);for(var a=n.owner;a;)a.onSubmorphChange(m,n),a=a.owner}catch(d){console.error("Error in informMorph: "+d.stack)}};Qi.arr=Gf;Qi.string=Dh;Qi.obj=eg;Qi.connect=ll;Qi.signal=
hm;Qi.disconnect=cr;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=m.hasOwnProperty("Change")&&"function"===typeof m.Change?m.Change:m.Change=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.target=a;this.group=null}},{key:"type",get:function(){return"abstract change"}},{key:"apply",value:function(){throw Error("Not yet implemented");
}},{key:"reverseApply",value:function(){throw Error("Not yet implemented");}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Change"}}],m,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:769,end:1025})})(void 0);var iW=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),
n=m.hasOwnProperty("GroupChange")&&"function"===typeof m.GroupChange?m.GroupChange:m.GroupChange=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){$b._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.changes=[]}},{key:"consumesChanges",value:function(){return!0}},{key:"addChange",value:function(a){this.changes.push(a);
a.group=this}},{key:"apply",value:function(){this.changes.slice().forEach(function(a){return a.apply()});return this}},{key:"reverseApply",value:function(){this.changes.slice().reverse().forEach(function(a){return a.reverseApply()});return this}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GroupChange"}}],m,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1034,end:1463})}(Qi.Change);Qi.GroupChange=iW;Qi.GroupChange=iW;Qi.GroupChange=iW;var jW=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=m.hasOwnProperty("ValueChange")&&"function"===typeof m.ValueChange?m.ValueChange:m.ValueChange=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:"type",get:function(){return"setter"}},
{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k,b){$b._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.prop=d;this.value=k;this.prevValue=null;this.meta=b}},{key:"apply",value:function(){this.target[this.prop]=this.value}},{key:"reverseApply",value:function(){this.target[this.prop]=this.prevValue}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueChange"}}],m,{pathInPackage:function(){return"changes.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1472,end:1893})}(Qi.Change);Qi.ValueChange=jW;Qi.ValueChange=jW;Qi.ValueChange=jW;var kW=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=m.hasOwnProperty("MethodCallChange")&&"function"===typeof m.MethodCallChange?m.MethodCallChange:m.MethodCallChange=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:"type",get:function(){return"method-call"}},{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k,b,e){$b._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.selector=d;this.args=k;this.undo=b;this.meta=e}},{key:"apply",value:function(){var a=this.target;a[this.selector].apply(a,this.args)}},
{key:"reverseApply",value:function(){if(this.undo)if("function"===typeof this.undo)this.undo();else{var a=this.undo,d=a.target;d[a.selector].apply(d,a.args)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MethodCallChange"}}],m,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1902,end:2486})}(Qi.GroupChange);Qi.MethodCallChange=kW;Qi.MethodCallChange=kW;Qi.MethodCallChange=kW;var PM=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=m.hasOwnProperty("ChangeManager")&&"function"===typeof m.ChangeManager?m.ChangeManager:m.ChangeManager=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},
{key:"reset",value:function(){this.changes=[];this.changeRecordedListeners=[];this.revision=0;this.changeRecordersPerMorph=new WeakMap;this.changeRecorders={};this.changeGroupStack=[];this.defaultMeta={};this.metaStack=[]}},{key:"changesFor",value:function(a){return this.changes.filter(function(d){return d.target===a})}},{key:"apply",value:function(a,d){d.apply()}},{key:"doWithValueChangeMeta",value:function(a,d,k){this.defaultMeta=a;this.metaStack.push(a);try{var b=k(d)}finally{return this.metaStack.pop(),
this.defaultMeta=Qi.arr.last(this.metaStack)||{},b}}},{key:"addValueChange",value:function(a,d,k,b){d=new Qi.ValueChange(a,d,k,Object.assign({},this.defaultMeta,{},b));return this._record(a,d)}},{key:"addMethodCallChangeDoing",value:function(a,d,k){var b=a.target,e=a.selector,l=a.args;(a=a.undo)||(a=function(){return console.warn("No undo recorded for "+b+"."+e)});l=new Qi.MethodCallChange(b,e,l,a,this.defaultMeta);d.groupChangesWhile(l,k);return l}},{key:"_record",value:function(a,d){Qi.signal(this,
"changeRecorded",d);d.hasOwnProperty("value")&&(d.prevValue=a._morphicState[d.prop],a._morphicState[d.prop]=d.value);a.makeDirty(d);var k=Qi.arr.last(this.changeGroupStack);k&&k.consumesChanges()?k.addChange(d):(this.changes.push(d),a._rev=++this.revision,this.informChangeListeners(d));Qi.informMorph(this,d,a);return d}},{key:"groupChangesWhile",value:function(a,d,k,b){b=void 0===b?!0:b;d||(d=new Qi.GroupChange(a));this.changeGroupStack.push(d);try{return k(),Qi.arr.remove(this.changeGroupStack,d),
b?this._record(a,d):d}catch(e){throw Qi.arr.remove(this.changeGroupStack,d),e;}}},{key:"dontRecordChangesWhile",value:function(a,d){return this.groupChangesWhile(a,void 0,d,!1)}},{key:"recordChangesWhile",value:function(a,d){var k=this.changes.length;a();a=this.changes.slice(k,this.changes.length);return d?a.filter(d):a}},{key:"addChangeListener",value:function(a){Qi.arr.pushIfNotIncluded(this.changeRecordedListeners,a)}},{key:"removeChangeListener",value:function(a){Qi.arr.remove(this.changeRecordedListeners,
a)}},{key:"informChangeListeners",value:function(a){this.changeRecordedListeners.forEach(function(d){return d(a)})}},{key:"recordChangesStart",value:function(a,d){d=Qi.obj.newKeyIn(this.changeRecorders,(void 0===d?"":d)+"__change_recorder_"+Date.now());var k=a?function(e){return a(e)&&b.changes.push(e)}:function(e){return b.changes.push(e)},b=this.changeRecorders[d]={id:d,filter:a,changes:[],listener:k};this.addChangeListener(k);return b}},{key:"recordChangesStop",value:function(a){if(!(a in this.changeRecorders))return[];
var d=this.changeRecorders[a],k=d.changes;d=d.listener;delete this.changeRecorders[a];this.removeChangeListener(d);return k}},{key:"recordChangesStartForMorph",value:function(a,d){d=this.recordChangesStart(d,a.id);var k=this.changeRecordersPerMorph.get(a);k||(k=[],this.changeRecordersPerMorph.set(a,k));k.push(d.id);return d}},{key:"recordChangesStopForMorph",value:function(a,d){var k=this.changeRecordersPerMorph.get(a);if(!k||!k.length)return console.warn("Cannot endMorphChangeRecorder for morph "+
a+": recorder not found"),[];(a=d)?Qi.arr.remove(k,a):a=k.pop();return this.recordChangesStop(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ChangeManager"}}],m,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2495,end:7620})}(void 0);Qi.ChangeManager=PM;Qi.ChangeManager=
PM;Qi.ChangeManager=PM;var Dl=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js");Dl.printArg=function(f){return Dl.obj.inspect(f,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};Dl.obj=eg;Dl.arr=Gf;Dl.events=lx;Dl.fun=Vl;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=m.hasOwnProperty("Undo")&&"function"===typeof m.Undo?m.Undo:m.Undo=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k){d=void 0===d?[]:d;this.name=a;this.targets=d;this.timestamp=this.changes=this.recorder=null;this.no=void 0===k?0:k}},{key:"recorded",value:function(){return!!this.changes}},{key:"isRecording",value:function(){return!!this.recorder}},{key:"startRecording",value:function(a){var d=this;if(this.recorded()||this.isRecording())throw Error("Undo already recorded / recording");if(!this.targets.length)throw Error("Undo has no target morphs");
this.timestamp=Date.now();this.recorder=this.targets[0].recordChangesStart(function(k){var b=k.target;return b.isUsedAsEpiMorph()||!d.targets.some(function(e){return e===b||e.isAncestorOf(b)})?!1:"function"===typeof a?a(k):!0});return this}},{key:"stopRecording",value:function(){var a=this.recorder.id;this.changes=$jscomp.makeIterator(this.targets).next().value.recordChangesStop(a);this.recorder=this.targets=null}},{key:"apply",value:function(){if(!this.recorded())throw Error("Cannot apply undo that has no changes recorded yet");
this.changes.slice().forEach(function(a){return a.apply()});return this}},{key:"reverseApply",value:function(){if(!this.recorded())throw Error("Cannot reverseApply undo that has no changes recorded yet");this.changes.slice().reverse().forEach(function(a){return a.reverseApply()});return this}},{key:"addTarget",value:function(a){Dl.arr.pushIfNotIncluded(this.targets,a)}},{key:"addUndos",value:function(a){a=Dl.arr.sortBy(a.concat(this).filter(function(d){return d.recorded()}),function(d){return d.no});
a.length&&(this.changes=Dl.arr.flatmap(a,function(d){return d.changes}),this.timestamp=a[0].timestamp,this.no=a[0].no,this.name=a.map(function(d){return d.name}).join("-"))}},{key:"toString",value:function(){var a=this.name,d=this.changes,k=this.no,b=this.isRecording();d=d.length?"\n  "+d.map(function(e){var l=e.selector,p=e.args,u=e.prop,x=e.value;e=e.target;return l?e+"."+l+"("+p.map(Dl.printArg)+")":e+"."+u+" = "+Dl.printArg(x)}).join("\n  "):"no changes";return"Undo("+k+":"+a+" "+(b?"RECORDING ":
"")+d+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Undo"}}],m,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:54,end:2504})})(void 0);var aF=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=m.hasOwnProperty("UndoManager")&&"function"===
typeof m.UndoManager?m.UndoManager:m.UndoManager=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.reset();this.filter=a}},{key:"reset",value:function(){this.undos=[];this.redos=[];this.undoInProgress=null;this.counter=this.applyCount=0;this.grouping={current:[],debounce:null,debouncedCanceled:!1,debounceTime:31}}},{key:"group",value:function(a){a=
void 0===a?null:a;this.groupLaterCancel();a&&this.undos.includes(a)&&(this.grouping.current=Dl.arr.uniq(this.undos.slice(this.undos.indexOf(a)).concat(this.grouping.current)));this.grouping.current.length&&(a=this.grouping.current.slice(1),this.grouping.current[0].addUndos(a),this.undos=Dl.arr.withoutAll(this.undos,a),this.grouping.current=[])}},{key:"ensureNewGroup",value:function(a,d){d=void 0===d?"new undo group":d;this.group();this.undoStart(a,d);return this.undoStop()}},{key:"groupLaterCancel",
value:function(){var a=this.grouping;a.debounce&&(a.debouncedCanceled=!0,this.grouping=Object.assign({},a,{debounce:null,debouncedCanceled:!1}))}},{key:"groupLater",value:function(a){var d=this,k=this.grouping;(k.debounce||(k.debounce=Dl.fun.debounce(a||k.debounceTime,function(){k.debounce=null;k.debouncedCanceled||d.group()})))()}},{key:"undoStart",value:function(a,d){if(!this.applyCount)if(this.undoInProgress)console.warn("There is already an undo being recorded. Tried to start undo "+d+" for "+
a.name+", but "+this.undoInProgress.name+" is currently in progress.");else return this.undoInProgress=(new Dl.Undo(d,[a],this.counter++)).startRecording(this.filter)}},{key:"undoStop",value:function(){var a=this.undoInProgress;if(!a)return null;a.stopRecording();this.undoInProgress=null;this.undos.push(a);this.grouping.current.push(a);this.redos.length&&(this.redos.length=0);return a}},{key:"removeLatestUndo",value:function(){this.undoStop();var a=this.undos.pop();Dl.arr.remove(this.grouping.current,
a);return a}},{key:"undo",value:function(){var a=this.removeLatestUndo();if(a){Dl.arr.remove(this.grouping.current,a);this.redos.unshift(a);this.applyCount++;try{a.reverseApply()}finally{this.applyCount--}return a}}},{key:"redo",value:function(){this.undoStop();var a=this.redos.shift();if(a){this.undos.push(a);this.applyCount++;try{a.apply()}finally{this.applyCount--}return a}}},{key:"toString",value:function(){var a=0===this.undos.length?"":"\n  "+(20<this.undos.length?"...\n  ":"")+this.undos.slice(-20).join("\n  ");
return"UndoManager("+this.undos.length+" undos, "+this.redos.length+" redos, "+(this.undoInProgress?", UNDO IN PROGRESS":"")+a+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"UndoManager"}}],m,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2639,end:5941})}(void 0);Dl.UndoManager=
aF;Dl.UndoManager=aF;Dl.UndoManager=aF;var xm=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js");xm.promise=bh;xm.bowser=Fp;xm.touchInputDevice=En;xm.placeholderValue="\u0001\u0001";xm.placeholderRe=/\u0001/g;var F$=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js"),n=m.hasOwnProperty("TextInput")&&"function"===typeof m.TextInput?m.TextInput:m.TextInput=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.eventDispatcher=a;this.domState={rootNode:null,textareaNode:null,eventHandlers:[],isInstalled:!1};this.inputState={composition:null,manualCopy:null,manualPaste:null,positionChangedTime:0,scrollLeftWhenChanged:0,scrollTopWhenChanged:0}}},{key:"install",value:function(a,d){var k=this,b=this.domState,e=b.isInstalled,l=b.rootNode;this.world=d;if(e){if(l===a)return;this.uninstall()}b.isInstalled=!0;b.rootNode=
a;a.tabIndex=1;d=b.textareaNode=a.ownerDocument.createElement("textarea");d.setAttribute("style","\n      position: absolute;\n      /*extent cannot be 0, input won't work correctly in Chrome 52.0*/\n      width: 20px; height: 20px;\n      z-index: 0;\n      opacity: 1;\n      background: transparent;\n      -moz-appearance: none;\n      appearance: none;\n      border: none;\n      resize: none;\n      outline: none;\n      overflow: hidden;\n      font: inherit;\n      padding: 0 1px;\n      margin: 0 -1px;\n      text-indent: -1em;\n      -ms-user-select: text;\n      -moz-user-select: text;\n      -webkit-user-select: text;\n      user-select: text;\n      /*with pre-line chrome inserts &nbsp; instead of space*/\n      white-space: pre!important;");
xm.touchInputDevice&&d.setAttribute("x-palm-disable-auto-cap",!0);d.setAttribute("wrap","off");d.setAttribute("autocorrect","off");d.setAttribute("autocapitalize","off");d.setAttribute("spellcheck",!1);d.setAttribute("aria-label","Lively Textinput Node");d.className="lively-text-input";d.value="";a.insertBefore(d,a.firstChild);xm.touchInputDevice&&(d.setAttribute("disabled",!0),d.style.setProperty("transform","scale(0)"));b.eventHandlers=[{type:"focusin",node:a,fn:function(p){return k.onRootNodeFocus(p)},
capturing:!0},{type:"focusin",node:b.textareaNode,fn:function(p){return k.onTextAreaFocus(p)},capturing:!0},{type:"blur",node:b.textareaNode,fn:function(p){return k.onTextAreaBlur(p)},capturing:!0},{type:"keydown",node:b.textareaNode,fn:function(p){return k.eventDispatcher.dispatchDOMEvent(p)},capturing:!1},{type:"keyup",node:b.textareaNode,fn:function(p){return k.eventDispatcher.dispatchDOMEvent(p)},capturing:!1},{type:"cut",node:b.textareaNode,fn:function(p){return k.eventDispatcher.dispatchDOMEvent(p)},
capturing:!1},{type:"copy",node:b.textareaNode,fn:function(p){return k.inputState.manualCopy?k.inputState.manualCopy.onEvent(p):k.eventDispatcher.dispatchDOMEvent(p)},capturing:!1},{type:"paste",node:b.textareaNode,fn:function(p){return k.inputState.manualPaste?k.inputState.manualPaste.onEvent(p):k.eventDispatcher.dispatchDOMEvent(p)},capturing:!1},{type:"compositionstart",node:b.textareaNode,fn:function(p){return k.onCompositionStart(p)},capturing:!1},{type:"compositionend",node:b.textareaNode,fn:function(p){return k.onCompositionEnd(p)},
capturing:!1},{type:"compositionupdate",node:b.textareaNode,fn:function(p){return k.onCompositionUpdate(p)},capturing:!1},{type:"input",node:b.textareaNode,fn:function(p){return k.onInput(p)},capturing:!1}];b.eventHandlers.forEach(function(p){return p.node.addEventListener(p.type,p.fn,p.capturing)});return this}},{key:"uninstall",value:function(){var a=this.domState;a.isInstalled=!1;a.eventHandlers.forEach(function(k){return k.node.removeEventListener(k.type,k.fn,k.capturing)});var d=a.textareaNode;
d&&d.parentNode&&d.parentNode.removeChild(d);a.rootNode=null;return this}},{key:"resetValue",value:function(){var a=this.domState.textareaNode;a&&(a.value=xm.placeholderValue)}},{key:"readValue",value:function(){var a=this.domState.textareaNode;return a?a.value.replace(xm.placeholderRe,""):""}},{key:"focus",value:function(a,d){var k=this.domState.textareaNode;k&&(xm.touchInputDevice&&a&&a.isText&&!a.readOnly&&k.removeAttribute("disabled"),a&&a.stealFocus||k.getRootNode().activeElement!==k&&k.focus(),
xm.bowser.firefox&&Promise.resolve().then(function(){return k.getRootNode().activeElement!==k&&k.focus()}),a&&a.isText&&a.focusable?(xm.touchInputDevice&&k.focus(),this.ensureBeingAtCursorOfText(a)):d&&this.ensureBeingInVisibleBoundsOfWorld(d))}},{key:"blur",value:function(){var a=this.domState.textareaNode;xm.touchInputDevice&&a.setAttribute("disabled",!0);a&&a.blur()}},{key:"doCopyWithMimeTypes",value:function(a){var d=this;return this.execCommand("manualCopy",function(){var k=d.domState.textareaNode,
b=function(e){k.removeEventListener("copy",b);e.preventDefault();a.forEach(function(l){return e.clipboardData.setData(l.type,l.data)})};setTimeout(function(){return k.removeEventListener("copy",b)},300);k.addEventListener("copy",b);k.value="";k.select();k.ownerDocument.execCommand("copy")})}},{key:"doCopy",value:function(a){var d=this;return this.execCommand("manualCopy",function(){var k=d.domState.textareaNode;k.value=a;k.select();k.ownerDocument.execCommand("copy")})}},{key:"doPaste",value:function(){var a=
this;return this.execCommand("manualPaste",function(){var d=a.domState.textareaNode;d.value="";d.select();d.ownerDocument.execCommand("paste")})}},{key:"execCommand",value:function(a,d){var k=this,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:if(!k.domState.isInstalled)throw Error("Cannot copy to clipboard \u2013 input helper is not installed into DOM!");b=k.inputState;if(!b[a]){u.jumpTo(2);break}u.setCatchFinallyBlocks(3);return u.yield(b[a].promise,
5);case 5:u.leaveTryBlock(2);break;case 3:u.enterCatchBlock();case 2:return e=xm.promise.deferred(),l=!1,b[a]={onEvent:function(x){l||(b[a]=null,l=!0,e.resolve(x))},promise:e.promise},d(),u.setCatchFinallyBlocks(6),u.yield(xm.promise.waitFor(1E3,function(){return l}),8);case 8:u.leaveTryBlock(7);break;case 6:p=u.enterCatchBlock(),b[a]=null,l=!0,e.reject(p);case 7:return u.return(e.promise)}})}},{key:"onTextAreaBlur",value:function(a){var d=this;setTimeout(function(){var k=d.domState||{},b=k.textareaNode;
k=k.rootNode;if(b&&k){var e=b.getRootNode();e.activeElement!==k&&(!d.world.isEmbedded||e.activeElement)||d.world.focusedMorph&&d.world.focusedMorph.stealFocus||xm.touchInputDevice||b.focus()}})}},{key:"onTextAreaFocus",value:function(a){}},{key:"onRootNodeFocus",value:function(a){var d=this.domState||{},k=d.rootNode;if(a.target===d.textareaNode||a.target===k)this.world.focusedMorph&&this.world.focusedMorph.stealFocus||this.focus();this.inputState.composition=null}},{key:"onInput",value:function(a){if(!this.inputState.composition){if(!a.data){var d=
this.readValue();a.__defineGetter__("data",function(){return d})}this.resetValue();this.eventDispatcher.dispatchDOMEvent(a)}}},{key:"onCompositionStart",value:function(a){this.inputState.composition={};this.eventDispatcher.dispatchDOMEvent(a)}},{key:"onCompositionUpdate",value:function(a){var d=this.inputState.composition,k=this.readValue();d.lastValue!==k&&(d.lastValue=k,this.eventDispatcher.dispatchDOMEvent(a))}},{key:"onCompositionEnd",value:function(a){this.inputState.composition=null;this.eventDispatcher.dispatchDOMEvent(a)}},
{key:"setPosition",value:function(a){var d=(this.domState||{}).textareaNode;d&&(d.style.left=a.x+"px",d.style.top=a.y+"px")}},{key:"ensureBeingInVisibleBoundsOfWorld",value:function(a){this.setPosition(a.visibleBounds().center())}},{key:"ensureBeingAtCursorOfText",value:function(a){var d=a.world();if(d){var k=a.whatsVisible,b=a.cursorPosition,e=b.row;b=b.column;e=Math.max(k.startRow,Math.min(e,k.endRow));k=a.charBoundsFromTextPosition({row:e,column:b}).topLeft();a=d.visibleBounds().insetBy(10).constrainPt(a.worldPoint(k.subPt(a.scroll)));
this.inputState.positionChangedTime=Date.now();this.inputState.scrollLeftWhenChanged=document.documentElement.scrollLeft;this.inputState.scrollTopWhenChanged=document.documentElement.scrollTop;this.setPosition(a)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextInput"}}],m,{pathInPackage:function(){return"events/TextInput.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:237,end:12394})}(void 0),kra=F$=xm.TextInput;xm.default=F$;var lW=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js");lW.arr=Gf;var G$=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js"),n=m.hasOwnProperty("KillRing")&&"function"===typeof m.KillRing?m.KillRing:m.KillRing=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){this.size=void 0===a?0:a;this.buffer=[];this.pointer=-1}},{key:"isCycling",value:function(){return this.pointer!==this.buffer.length-1}},{key:"add",value:function(a){var d=this.buffer;d.push(a);this.size&&d.length>this.size&&d.splice(0,d.length-this.size);this.pointer=this.buffer.length-1;return a}},{key:"yank",value:function(){return this.buffer[this.pointer]||""}},{key:"back",value:function(){this.pointer=(0>=this.pointer?this.buffer.length:this.pointer)-1;return this.yank()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KillRing"}}],m,{pathInPackage:function(){return"events/KillRing.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:51,end:621})}(void 0),lra=G$=lW.KillRing;lW.default=G$;var Th=lively.FreezerRuntime.recorderFor("lively.morphic/events/Keys.js");Th.computeHashIdOfEvent=function(f){var m=
f.key;f=0|(f.ctrlKey?1:0)|(f.altKey?2:0)|(f.shiftKey?4:0)|(f.metaKey?8:0);0===f&&!Th.canonicalizeFunctionKey(m)&&m&&Th.letterRe.test(m)&&(f=-1);return f};Th.isModifier=function(f){if(Th.isNumber(f))return!1;f=f.replace(/-$/,"").toLowerCase();return Th.arr.withoutAll(Object.keys(Th.KEY_MODS),["","input-"]).includes(f)};Th.canonicalizeFunctionKey=function(f){f&&(f=f.toLowerCase());switch(f){case "space":f="space";break;case "esc":f="escape";break;case "return":f="enter";break;case "arrowleft":f="left";
break;case "arrowright":f="right";break;case "arrowup":f="up";break;case "arrowdown":f="down"}return Th.FUNCTION_KEYS.includes(f)?Th.string.capitalize(f):""};Th.decodeKeyIdentifier=function(f,m){var n=/u\+?([\d\w]{4})/gi,a=function(d,k){return String.fromCharCode(parseInt(k,16))};f=f&&f.replace(n,a);if("Command"===f||"Cmd"===f)f="Meta";" "===f&&(f="Space");8===m&&(f="Backspace");return f};Th.identifyKeyFromCode=function(f){f=f.code;if("string"!==typeof f)return null;if(f.startsWith("Key"))return f.slice(3);
if(f.startsWith("Numpad"))return f;if(f.startsWith("Digit")||f.startsWith("Arrow"))return f.slice(5);if(f.match(/^F[0-9]{1-2}$/))return f;switch(f){case "Insert":case "Home":case "PageUp":case "PageDown":return f;case "Period":return".";case "Comma":return",";case "Help":return"Insert";case "Equal":return"=";case "Backslash":case "IntlBackslash":return"\\";case "Equal":return"=";case "Minus":return"-";case "BracketRight":return"]";case "BracketLeft":return"[";case "Quote":return"'";case "Backquote":return"`";
case "Semicolon":return";"}return null};Th.dedasherize=function(f){for(var m=[];;){var n=f.indexOf("-");if(-1===n)return f&&m.push(f),m;0===n?(m.push(f[0]),f=f.slice(2)):(m.push(f.slice(0,n)),f=f.slice(n+1))}};Th.bowser=Fp;Th.arr=Gf;Th.string=Dh;Th.letterRe=/[a-z]/i;Th.MODIFIER_KEYS={16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"};Th.KEY_MODS=function(){for(var f={control:1,ctrl:1,alt:2,option:2,shift:4,super:8,win:8,meta:8,command:8,cmd:8},m=["alt","ctrl","meta","shift"],n=Math.pow(2,m.length);n--;)f[n]=
m.filter(function(a){return n&f[a]}).join("-")+"-";f[0]="";f[-1]="input-";return f}();Th.isNumber=function(){var f=/^[0-9]+$/;return function(m){return f.test(m)}}();Th.FUNCTION_KEYS="backspace;tab;enter;pause;escape; ;pageup;pagedown;end;home;left;up;right;down;print;insert;delete;numpad0;numpad1;numpad2;numpad3;numpad4;numpad5;numpad6;numpad7;numpad8;numpad9;numpadenter;f1;f2;f3;f4;f5;f6;f7;f8;f9;f10;f11;f12;numlock;scrolllock".split(";");Th.Keys={computeHashIdOfEvent:Th.computeHashIdOfEvent,keyComboToEventSpec:function(f,
m){m=Object.assign({_isLivelyKeyEventSpec:!0,keyCombo:"",key:"",ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,isFunctionKey:!1,isModified:!1,onlyModifiers:!1},m);var n=Th.dedasherize(f),a={shift:"shiftKey",control:"ctrlKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",command:"metaKey",cmd:"metaKey"};if("input"===n[0]&&2===n.length)return m.keyCombo=f,m.key=n[1],m;for(var d=n.length-1;0<=d;d--){var k=a[n[d].toLowerCase()];k&&(n.splice(d,1),m.isModified=!0,m[k]=!0)}if(!n.length)return m.keyCombo=
Th.Keys.eventToKeyCombo(m),m.key=Th.arr.last(Th.dedasherize(m.keyCombo)),m.onlyModifiers=!0,m;1<n.length&&console.warn('Strange key "'+f+'" encountered in keyComboToEventSpec, parsing probably failed');f=Th.arr.last(n);(n=Th.canonicalizeFunctionKey(f))?(m.isFunctionKey=!0,m.key=n):m.key=m.isModified?Th.string.capitalize(f):f;m.keyCombo=Th.Keys.eventToKeyCombo(m);return m},eventToKeyCombo:function(f,m){Object.assign({ignoreModifiersIfNoCombo:!1,ignoreKeys:[]},m);m=f.key;var n=f.data,a=f.keyIdentifier;
if("string"===typeof n)return"input-"+n;if(!m&&a&&(m=Th.decodeKeyIdentifier(a,f.which||f.keyCode),f.key=m=m[f.shiftKey?"toUpperCase":"toLowerCase"](),Th.isModifier(m)))return Th.string.capitalize(m);n=Th.KEY_MODS[Th.computeHashIdOfEvent(f)];if("input-"===n)return n+m;f.code&&(m=Th.identifyKeyFromCode(f)||m);f=!m||Th.isModifier(m)?n.replace(/-$/,""):n+m;f.match(/\s$/)&&(f=f.replace(/\s$/,"Space"));return f.replace(/(^|-)([a-z])/g,function(d,k,b){return k+b.toUpperCase()})},canonicalizeKeyCombo:function(f){return Th.Keys.eventToKeyCombo(Th.Keys.keyComboToEventSpec(f))},
canonicalizeEvent:function(f){return f._isLivelyKeyEventSpec?f:Th.Keys.keyComboToEventSpec(Th.Keys.eventToKeyCombo(f))}};var mW=Th.Keys;Th.default=mW;var Uh=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js");Uh.bowser=Fp;Uh.obj=eg;Uh.pt=ui;Uh.Keys=mW;Uh.cumulativeOffset=Gz;var nW="pointerover pointerenter pointerout pointerleave pointerdown pointermove pointerup pointercancel gotpointercapture lostpointercapture".split(" ");Uh.pointerEvents=nW;Uh.pointerEvents=nW;Uh.pointerEvents=
nW;var oW="mouseover mouseenter mousedown mousemove mouseup mouseout mouseleave click dblclick contextmenu mousewheel".split(" ");Uh.mouseEvents=oW;Uh.mouseEvents=oW;Uh.mouseEvents=oW;var pW=["keydown","keyup","keypress"];Uh.keyboardEvents=pW;Uh.keyboardEvents=pW;Uh.keyboardEvents=pW;var QM=Uh.keyboardEvents.concat("input","compositionstart","compositionupdate","compositionend");Uh.keyLikeEvents=QM;Uh.keyLikeEvents=QM;Uh.keyLikeEvents=QM;var RM=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),
n=m.hasOwnProperty("Event")&&"function"===typeof m.Event?m.Event:m.Event=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k,b,e,l,p){this.type=a;this.domEvt=d;this.dispatcher=k;this.targetMorphs=b;this.hand=e;this.halo=l;this.layoutHalo=p;this.stopped=!1;this._keyCombo=void 0;this.onDispatchCallbacks=[];this.onAfterDispatchCallbacks=[];this.onStopCallbacks=
[]}},{key:"onDispatch",value:function(a){this.onDispatchCallbacks.push(a);return this}},{key:"onAfterDispatch",value:function(a){this.onAfterDispatchCallbacks.push(a);return this}},{key:"onStop",value:function(a){this.onStopCallbacks.push(a);return this}},{key:"data",get:function(){return this.domEvt.data}},{key:"world",get:function(){return this.dispatcher.world}},{key:"state",get:function(){return this.dispatcher.eventState}},{key:"keyInputState",get:function(){return this.state.keyInputState}},
{key:"isMouseEvent",value:function(){return Uh.pointerEvents.includes(this.type)||Uh.mouseEvents.includes(this.type)}},{key:"isKeyboardEvent",value:function(){return!this.isMouseEvent()&&Uh.keyboardEvents.includes(this.type)}},{key:"stop",value:function(){this.stopped=!0;this.domEvt&&"function"===typeof this.domEvt.stopPropagation&&this.domEvt.stopPropagation();this.domEvt&&"function"===typeof this.domEvt.preventDefault&&this.domEvt.preventDefault();this.onStopCallbacks.forEach(function(a){return a()})}},
{key:"targetMorph",get:function(){return this.targetMorphs[0]}},{key:"timestamp",get:function(){return this.domEvt.timeStamp}},{key:"position",get:function(){if(!this.domEvt)return Uh.pt(0,0);for(var a=this.domEvt.composedPath()[0];a&&a.id!==this.world.id;)a=a.parentNode;if(!a){a=this.domEvt.composedPath()[0]||this.domEvt.target;var d=this.world.env.domEnv.document;a=(a.nodeType===a.DOCUMENT_NODE?a:d).getElementById(this.world.id)}if(!a)return console.error("event position: cannot find world node for determining the position!"),
Uh.pt(0,0);a=Uh.cumulativeOffset(a);d=this.domEvt;a=Uh.pt((d.pageX||0)-a.left,(d.pageY||0)-a.top);1!==this.world.scale&&(a=a.scaleBy(1/this.world.scale));return a}},{key:"startPosition",get:function(){return this.state.clickedOnPosition}},{key:"pressure",get:function(){return this.domEvt?this.domEvt.pressure:.5}},{key:"positionIn",value:function(a){return a.localize(this.position)}},{key:"isClickTarget",value:function(a){var d=this.state.clickedOnMorph;return d&&(a===d||a.isAncestorOf(d))}},{key:"leftMouseButtonPressed",
value:function(){return this.domEvt?1===this.domEvt.buttons:!1}},{key:"rightMouseButtonPressed",value:function(){return this.domEvt?2===this.domEvt.buttons:!1}},{key:"middleMouseButtonPressed",value:function(){return this.domEvt?4===this.domEvt.buttons:!1}},{key:"isCommandKey",value:function(){var a=this.domEvt;if(!a)return!1;var d=!1;Uh.bowser.mac||(d=d||a.ctrlKey);if(Uh.bowser.tablet||Uh.bowser.tablet)d=d||!1;return d||a.metaKey||"Meta"===a.keyIdentifier}},{key:"isShiftDown",value:function(){return this.domEvt&&
!!this.domEvt.shiftKey}},{key:"isCtrlDown",value:function(){return this.domEvt&&!!this.domEvt.ctrlKey}},{key:"isAltDown",value:function(){return this.domEvt&&!!this.domEvt.altKey}},{key:"keyCombo",get:function(){return this._keyCombo||(this._keyCombo=Uh.Keys.eventToKeyCombo(this.domEvt))}},{key:"keyCombo",set:function(a){return this._keyCombo=a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Event"}}],m,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:957,end:4928})}(void 0);Uh.Event=RM;Uh.Event=RM;Uh.Event=RM;var SM=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=m.hasOwnProperty("KeyEvent")&&"function"===typeof m.KeyEvent?m.KeyEvent:m.KeyEvent=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k,b,e,l,p){console.assert(Uh.keyLikeEvents.includes(a),"not a keyboard event: "+a);$b._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a,d,k,b,e,l,p);Object.assign(this,Uh.Keys.canonicalizeEvent(d))}},{key:"isKeyEvent",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyEvent"}}],m,{pathInPackage:function(){return"events/Event.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4937,end:5307})}(Uh.Event);Uh.KeyEvent=SM;Uh.KeyEvent=SM;Uh.KeyEvent=SM;var TM=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=m.hasOwnProperty("SimulatedDOMEvent")&&"function"===typeof m.SimulatedDOMEvent?m.SimulatedDOMEvent:m.SimulatedDOMEvent=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;if(a.position){var d=a.position,k=d.x;d=d.y;a=Uh.obj.dissoc(a,["position"]);a.pageX=k;a.pageY=d}!a.hasOwnProperty("pointerId")&&Uh.mouseEvents.concat(Uh.pointerEvents).includes(a.type)&&(a=Object.assign({},a,{pointerId:1}));Object.assign(this,Object.assign({type:void 0,target:void 0,
pageX:void 0,pageY:void 0,pointerId:void 0,pointerType:"mouse",buttons:0,keyCode:void 0,keyString:"",keyIdentifier:void 0,altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,stopped:!1},a))}},{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"composedPath",value:function(){return[this.target]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SimulatedDOMEvent"}}],m,{pathInPackage:function(){return"events/Event.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5316,end:6265})}(void 0);Uh.SimulatedDOMEvent=TM;Uh.SimulatedDOMEvent=TM;Uh.SimulatedDOMEvent=TM;var qf=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js");qf.dragStartEvent=function(f,m,n,a,d,k,b){var e=(new qf.Event("morphicdragstart",f,m,[n],d,k,b)).onDispatch(function(){a.draggedMorph=
n;a.dragStartMorphPosition=n.position;a.dragStartPosition=e.position;a.lastDragPosition=e.position;a.dragDelta=qf.pt(0,0);a.absDragDelta=qf.pt(0,0)}).onStop(function(){a.draggedMorph=null;m.schedule(qf.dragEndEvent(f,m,n,a,d,k,b))});return e};qf.dragEvent=function(f,m,n,a,d,k,b){var e=(new qf.Event("morphicdrag",f,m,[a.draggedMorph],d,k,b)).onDispatch(function(){a.dragDelta=(a.draggedMorph.owner||m.world).getInverseTransform().transformDirection(e.position.subPt(a.lastDragPosition));a.absDragDelta=
e.position.subPt(a.clickedOnPosition)}).onAfterDispatch(function(){return a.lastDragPosition=e.position}).onStop(function(){a.draggedMorph=null;m.schedule(qf.dragEndEvent(f,m,n,a,d,k,b))});return e};qf.dragEndEvent=function(f,m,n,a,d,k,b){var e=a.draggedMorph||n,l=(new qf.Event("morphicdragend",f,m,[e],d,k,b)).onDispatch(function(){a.dragDelta=(e.owner||m.world).getInverseTransform().transformDirection(l.position.subPt(a.lastDragPosition));a.absDragDelta=l.position.subPt(a.clickedOnPosition)}).onAfterDispatch(function(){a.draggedMorph=
null;a.lastDragPosition=null;a.dragDelta=qf.pt(0,0);a.absDragDelta=qf.pt(0,0);a.dragStartMorphPosition=null;a.dragStartPosition=null});return l};qf.focusEvents=function(f,m){var n=f.eventState;if(n.focusedMorph===m)return[];f=[];n.focusedMorph&&f.push((new qf.Event("blur",null,this,[n.focusedMorph],null,null,null)).onDispatch(function(){return n.focusedMorph=null}));f.push((new qf.Event("focus",null,this,[m],null,null,null)).onDispatch(function(){return n.focusedMorph=m}));return f};qf.arr=Gf;qf.fun=
Vl;qf.Path=Qh;qf.promise=bh;qf.pt=ui;qf.config=$l;qf.TextInput=kra;qf.KillRing=lra;qf.Event=RM;qf.KeyEvent=SM;qf.SimulatedDOMEvent=TM;qf.keyLikeEvents=QM;qf.cumulativeOffset=Gz;qf.bowser=Fp;qf.touchInputDevice=En;qf.domEventsWeListenTo=[{type:"pointerdown",capturing:!1},{type:"pointerup",capturing:!1},{type:"pointermove",capturing:!1,passive:!1},{type:"pointerover",capturing:!1,passive:!1},{type:"pointerout",capturing:!1,passive:!1},{type:"contextmenu",capturing:!1},{type:"wheel",capturing:!1,passive:!1},
{type:"scroll",capturing:!0,passive:!1},{type:"drag",capturing:!1},{type:"dragstart",capturing:!1},{type:"dragend",capturing:!1},{type:"dragover",capturing:!1},{type:"dragenter",capturing:!1},{type:"dragleave",capturing:!1},{type:"drop",capturing:!1}];qf.eventsCausingImmediateRender=new Set(["pointerdown","pointerup","keydown","keyup","input"]);qf.globalDomEventsWeListenTo=[{type:"resize",capturing:!1,morphMethod:"onWindowResize"},{type:"orientationchange",capturing:!1,morphMethod:"onWindowResize"},
{type:"scroll",capturing:!1,passive:!1,morphMethod:"onWindowScroll"},{type:"wheel",capturing:!1,passive:!1,morphToMethod:"onMouseWheel"},{type:"beforeunload",capturing:!1,passive:!1,morphMethod:"onBeforeUnload"}];qf.typeToMethodMap={pointerdown:"onMouseDown",pointerup:"onMouseUp",pointermove:"onMouseMove",longclick:"onLongClick",hoverin:"onHoverIn",hoverout:"onHoverOut",morphicdrag:"onDrag",morphicdragstart:"onDragStart",morphicdragend:"onDragEnd",grab:"onGrab",morphicdrop:"onDrop",morphicdrophoverin:"onDropHoverIn",
morphicdrophoverout:"onDropHoverOut",morphicdrophoverupdate:"onDropHoverUpdate",keydown:"onKeyDown",keyup:"onKeyUp",input:"onTextInput",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd",blur:"onBlur",focus:"onFocus",contextmenu:"onContextMenu",cut:"onCut",copy:"onCopy",paste:"onPaste",scroll:"onScroll",wheel:"onMouseWheel",drag:"onNativeDrag",dragstart:"onNativeDragstart",dragend:"onNativeDragend",dragover:"onNativeDragover",dragenter:"onNativeDragenter",
dragleave:"onNativeDragleave",drop:"onNativeDrop"};qf.focusTargetingEvents="keydown keyup keypress input compositionstart compositionupdate compositionend cut copy paste".split(" ");qf.textOnlyEvents=["input","compositionstart","compositionupdate","compositionend"];var H$=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js"),n=m.hasOwnProperty("EventDispatcher")&&"function"===typeof m.EventDispatcher?m.EventDispatcher:m.EventDispatcher=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d){this.activations=0;this.emitter=a;this.keyInputHelper=null;this.world=d;this.installed=!1;this.handlerFunctions=[];this.killRing=new qf.KillRing(qf.config.text.clipboardBufferLength);this.nodeMorphMap=new WeakMap;this.timestampBase=qf.Path("performance.timing.navigationStart").get(a)||0;this.resetState()}},{key:"resetState",value:function(){this.eventState=
{timeOfLastActivity:0,focusedMorph:null,clickedOnPosition:null,clickedOnMorph:null,clickCount:0,prevClick:{},draggedMorph:null,dragDelta:null,absDragDelta:null,lastDragPosition:null,dragStartMorphPosition:null,dragStartPosition:null,hover:{hoveredOverMorphs:[],unresolvedPointerOut:!1},scroll:{interactiveScrollInProgress:null},keyInputState:null,pressedKeys:{},html5Drag:{},dropHoverTarget:null};this.resetKeyInputState()}},{key:"resetKeyInputState",value:function(){this.eventState.keyInputState={keyChain:"",
count:void 0}}},{key:"focusMorph",value:function(a){var d=this;this.keyInputHelper&&this.keyInputHelper.focus(a,this.world);qf.focusEvents(this,a).forEach(function(k){return d.dispatchEvent(k)})}},{key:"isMorphFocused",value:function(a){return this.eventState.focusedMorph===a}},{key:"isMorphHovered",value:function(a){return this.eventState.hover.hoveredOverMorphs.includes(a)}},{key:"isMorphClicked",value:function(a){return this.eventState.clickedMorph==a}},{key:"isKeyPressed",value:function(a){return Object.keys(this.eventState.pressedKeys).map(function(d){return d.toLowerCase()}).includes(a.toLowerCase())}},
{key:"whenIdle",value:function(){var a=this;return qf.promise.waitFor(function(){return 0===a.activations})}},{key:"install",value:function(a){var d=this;if(this.installed)return this;this.installed=!0;var k=this.emitter,b=System.global;qf.domEventsWeListenTo.forEach(function(e){var l=e.type,p=e.capturing;e=e.passive;var u=function(x){return d.dispatchDOMEvent(x)};d.handlerFunctions.push({node:k,type:l,fn:u,capturing:p});k.addEventListener(l,u,{capture:p,passive:e})});b.addEventListener&&qf.globalDomEventsWeListenTo.forEach(function(e){var l=
e.type,p=e.capturing,u=e.morphMethod;e=e.passive;var x=function(z){return d.dispatchDOMEvent(z,d.world,u)};d.handlerFunctions.push({node:b,type:l,fn:x,capturing:p});b.addEventListener(l,x,{capture:p,passive:e})});this.keyInputHelper=(new qf.TextInput(this)).install(a,this.world);qf.bowser.ios&&a.setAttribute("touch-action","auto");return this}},{key:"uninstallHandler",value:function(a){var d=this.handlerFuntions.find(function(k){return k.type==a});d&&d.node.removeEventListener(d.node,d.fn,d.capturing)}},
{key:"uninstall",value:function(){this.installed=!1;var a=this.handlerFunctions;a.forEach(function(d){d.node.removeEventListener(d.type,d.fn,d.capturing)});a.length=0;this.keyInputHelper&&this.keyInputHelper.uninstall();this.keyInputHelper=null;return this}},{key:"processDOMEvent",value:function(a,d){var k=this,b=a.type,e=this.eventState,l=[d].concat(d.ownerChain()),p="touch"===a.pointerType,u=a.pointerId,x=a.composedPath()[0],z="number"===typeof u&&(qf.touchInputDevice||a.isPrimary),E=z?this.world.handForPointerId(u,
a.isPrimary):this.world.firstHand,G=z&&!p?this.world.haloForPointerId(u):null,J=z&&!p?this.world.layoutHaloForPointerId(u):null,K=new (qf.keyLikeEvents.includes(b)?qf.KeyEvent:qf.Event)(b,a,this,l,E,G,J),T=[K];z=[];switch(b){case "keydown":e.pressedKeys[K.key]=!0;break;case "keyup":"Meta"===K.key?e.pressedKeys={}:delete e.pressedKeys[K.key];break;case "click":T=this.processDOMEvent(Object.assign({},a,{type:"pointerdown"}),d).events;b=this.processDOMEvent(Object.assign({},a,{type:"pointerup"}),d).events;
T=T.concat(b);break;case "pointerdown":K.onDispatch(function(){k.focusMorph(d);e.clickedOnMorph=d;e.clickedOnPosition=K.position;e.downTimeStamp=a.timeStamp;var P=!1,da=0;if(e.prevClick){da=e.prevClick;P=da.clickedOnMorph;var fa=da.clickedAtTime;da=da.clickCount;fa=Date.now()-fa;P=P===d&&fa<qf.config.repeatClickInterval}e.clickCount=P?da+1:1});break;case "pointerup":K.onAfterDispatch(function(){var P=e.clickedOnMorph,da=e.clickedOnPosition,fa=e.clickCount,ka=Date.now();e.prevClick={clickedOnMorph:P,
clickedOnPosition:da,clickedAtTime:ka,clickCount:fa};e.clickedOnMorph=null;e.clickCount=0;P=a.timeStamp-e.downTimeStamp;da=e.clickedOnPosition.dist(K.position);fa=qf.config.longClick;ka=fa.minDur;var za=fa.maxDur;da<fa.maxDist&&P>=ka&&P<=za&&(P=new qf.Event("longclick",a,k,l,E,G,J),k.schedule(P))});e.draggedMorph&&(T.push(qf.dragEndEvent(a,this,d,e,E,G,J)),K.targetMorphs=[e.draggedMorph,this.world]);E.carriesMorphs()&&(e.dropHoverTarget?(T.push(new qf.Event("morphicdrophoverout",a,this,[e.dropHoverTarget],
E,G,J)),d=e.dropHoverTarget,e.dropHoverTarget=null):d=E.findDropTarget(K.position,E.grabbedMorphs),E.isAncestorOf(d)&&(d=this.world),T.push(new qf.Event("morphicdrop",a,this,[d],E,G,J)),K.targetMorphs=[this.world]);break;case "pointermove":E.carriesMorphs()?(K.targetMorphs=[this.world],b=E.findDropTarget(K.position,E.grabbedMorphs)||this.world,e.dropHoverTarget===b?T.push(new qf.Event("morphicdrophoverupdate",a,this,[b],E,G,J)):(e.dropHoverTarget&&T.push(new qf.Event("morphicdrophoverout",a,this,
[e.dropHoverTarget],E,G,J)),e.dropHoverTarget=b,T.push(new qf.Event("morphicdrophoverin",a,this,[b],E,G,J)))):e.draggedMorph?(K.targetMorphs=[this.world],T.push(qf.dragEvent(a,this,d,e,E,G,J))):e.clickedOnMorph&&e.clickedOnPosition&&e.clickedOnMorph.draggable&&!e.draggedMorph&&!E.carriesMorphs()&&(b=e.clickedOnPosition.dist(K.position),p=e.clickedOnMorph,b>p.dragTriggerDistance&&(p.grabbable?T.push(new qf.Event("grab",a,this,[p],E,G,J)):p.draggable&&T.push(qf.dragStartEvent(a,this,p,e,E,G,J)),K.targetMorphs=
[this.world]));break;case "pointerover":e.hover.unresolvedPointerOut&&(e.hover.unresolvedPointerOut=!1);b=[d].concat(d.ownerChain()).reverse();T=qf.arr.withoutAll(e.hover.hoveredOverMorphs,b).map(function(P){return(new qf.Event("hoverout",a,k,[P],E,G,J)).onDispatch(function(){return qf.arr.remove(e.hover.hoveredOverMorphs,P)})});b=qf.arr.withoutAll(b,e.hover.hoveredOverMorphs).map(function(P){return(new qf.Event("hoverin",a,k,[P],E,G,J)).onDispatch(function(){return qf.arr.pushIfNotIncluded(e.hover.hoveredOverMorphs,
P)})});T=T.concat(b);break;case "pointerout":T=[];e.hover.unresolvedPointerOut=!0;z.push(function(){if(e.hover.unresolvedPointerOut)return Promise.all(e.hover.hoveredOverMorphs.map(function(P){return k.schedule((new qf.Event("hoverout",a,k,[P],E,G,J)).onAfterDispatch(function(){return qf.arr.remove(e.hover.hoveredOverMorphs,P)}))}))});p&&this.world.removeHandForPointerId(u);break;case "blur":T=[(new qf.Event(b,a,this,[d],E,G,J)).onDispatch(function(){return e.focusedMorph=null})];break;case "focus":T=
qf.focusEvents(this,d);break;case "scroll":T=[(new qf.Event(b,a,this,[d],E,G,J)).onDispatch(function(){if(!e.scroll.interactiveScrollInProgress){var P=qf.promise.deferred(),da=P.promise,fa=P.resolve;P="Firefox"==qf.bowser.name?500:250;"Safari"==qf.bowser.name&&(P=1E3);e.scroll.interactiveScrollInProgress=da;da.debounce=qf.fun.debounce(P,function(){e.scroll.interactiveScrollInProgress=null;fa()})}e.scroll.interactiveScrollInProgress.debounce();da=x.documentElement||x;P=da.scrollLeft;var ka=da.scrollTop,
za=d.scroll,Ia=za.x;za=za.y;if("hidden"!=da.style.overflow&&Ia!==P||za!==ka)d.scroll=qf.pt(P,ka)})];break;case "input":case "compositionstart":case "compositionupdate":case "compositionend":d.isText?K.targetMorphs=[d]:T=[];break;case "drag":case "dragstart":case "dragend":case "dragover":case "dragenter":case "dragleave":case "drop":"drop"!==b&&"dragover"!==b||a.preventDefault()}return{events:T,later:z}}},{key:"schedule",value:function(a){var d=this;this.activations++;return Promise.resolve().then(function(){return d.dispatchEvent(a)}).then(function(){return d.activations--},
function(k){d.activations--;throw k;})}},{key:"dispatchEvent",value:function(a,d){d=d||qf.typeToMethodMap[a.type];if(!d)throw Error("dispatchEvent: "+a.type+" not yet supported!");a.onDispatchCallbacks.forEach(function(e){return e()});this.activations++;for(var k,b=a.targetMorphs.length-1;0<=b;b--){try{a.targetMorphs[b][d](a)}catch(e){k=Error("Error in event handler "+a.targetMorphs[b]+"."+d+": "+(e.stack||e)),k.originalError=e,"undefined"!==typeof this.world?this.world.logError(k):console.error(k)}if(k||
a.stopped)break}this.activations--;a.onAfterDispatchCallbacks.forEach(function(e){return e()});if(k)throw k;}},{key:"dispatchDOMEvent",value:function(a,d,k){var b=this,e=this.world,l=this.eventState,p=this.nodeMorphMap,u=a.type;l.timeOfLastActivity=this.timestampBase+a.timeStamp;if(!d&&qf.focusTargetingEvents.includes(u))d=l.focusedMorph||e;else if(!d){for(l=a.composedPath()[0];;){d=l.className||"";"string"!==typeof d&&"baseVal"in d&&(d=d.baseVal);if(d&&d.includes("Morph"))break;if(!(l=l.parentNode))return}d=
p.get(l);if(!d){var x=l.id;(d=e.withAllSubmorphsDetect(function(z){return z.id===x}))&&p.set(l,d)}}d&&(a=this.processDOMEvent(a,d),p=a.events,a.later.map(function(z){b.activations++;return qf.promise.delay(0).then(z).then(function(){return b.activations--},function(E){b.activations--;throw E;})}),p.forEach(function(z){return b.dispatchEvent(z,k)}),e&&e.needsRerender()&&qf.eventsCausingImmediateRender.has(u)&&e.env.renderer.renderLater())}},{key:"simulateDOMEvents",value:function(a){for(var d=[],k=
0;k<arguments.length;++k)d[k-0]=arguments[k];k=this.emitter.document||this.emitter.ownerDocument;var b=[];d=$jscomp.makeIterator(d);for(var e=d.next();!e.done;e=d.next()){var l=e=e.value,p=l.target,u=l.position;l=l.type;if(qf.focusTargetingEvents.includes(l)){if(!this.keyInputHelper.domState.textareaNode)throw Error("Cannot simulate event of type "+l+", no keyInputHelper installed!");e=Object.assign({},e,{target:this.keyInputHelper.textareaNode})}p||(p=u?this.world.morphsContainingPoint(u)[0]:this.world);
p.isMorph&&(e=Object.assign({},e,{target:k.getElementById(p.id)}));e.position&&(p=qf.cumulativeOffset(k.getElementById(this.world.id)),e.position=e.position.addXY(p.left,p.top));"scroll"===l&&("scrollLeft"in e||"scrollTop"in e)&&(e.target.scrollLeft=e.scrollLeft||0,e.target.scrollTop=e.scrollTop||0);e=new qf.SimulatedDOMEvent(e);b.push(e);this.dispatchDOMEvent(e)}return b}},{key:"doCopy",value:function(a){return this.keyInputHelper.doCopy(a)}},{key:"doCopyWithMimeTypes",value:function(a){return this.keyInputHelper.doCopyWithMimeTypes(a)}},
{key:"doPaste",value:function(){return this.keyInputHelper.doPaste()}},{key:"cancelGrab",value:function(a,d){var k=this,b=[],e=this.eventState;e.clickedOnMorph=null;e.dropHoverTarget&&(b.push(new qf.Event("morphicdrophoverout",d.domEvt,this,[e.dropHoverTarget],a,null,null)),e.dropHoverTarget=null);b.forEach(function(l){return k.dispatchEvent(l)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EventDispatcher"}}],m,{pathInPackage:function(){return"events/EventDispatcher.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7170,end:30003})}(void 0),mra=H$=qf.EventDispatcher;qf.default=H$;var dl=lively.FreezerRuntime.recorderFor("lively.morphic/env.js");dl.defaultDOMEnv=BI;dl.Renderer=OM;dl.FontMetric=jra;dl.ChangeManager=PM;dl.UndoManager=aF;dl.EventDispatcher=mra;dl.subscribe=KC;dl.unsubscribe=DQ;var wp=Ma("ax",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/env.js"),
n=m.hasOwnProperty("MorphicEnv")&&"function"===typeof m.MorphicEnv?m.MorphicEnv:m.MorphicEnv=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var d=this;a=void 0===a?dl.defaultDOMEnv():a;this.initialized=!1;this.synchronizer=this.objPool=this.systemChangeHandlers=this.world=this.eventDispatcher=this.renderer=this.fontMetric=null;this.changeManager=
new dl.ChangeManager;this.undoManager=new dl.UndoManager;this.installSystemChangeHandlers();this.whenRenderedRequesters=new Map;this.whenRenderedTickingProcess=null;"function"===typeof a.then?this._waitForDOMEnv=a.then(function(k){d._waitForDOMEnv=null;d.initWithDOMEnv(k);d.initialized=!0}).catch(function(k){return console.error("Error initializing MorphicEnv with dom env: "+k.stack)}):(this.initWithDOMEnv(a),this.initialized=!0)}},{key:"isDefault",value:function(){return this.constructor.default()===
this}},{key:"initWithDOMEnv",value:function(a){this.domEnv=a;this.fontMetric=dl.FontMetric.forDOMEnv(a)}},{key:"uninstallWorldRelated",value:function(){this.renderer&&this.renderer.clear();this.eventDispatcher&&this.eventDispatcher.uninstall();this.world&&this.world.suspendSteppingAll()}},{key:"uninstall",value:function(){var a=this;if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return a.uninstall()});this.deleteHistory();this.uninstallWorldRelated();this.fontMetric&&(this.fontMetric.uninstall(),
this.fontMetric=null);this.domEnv&&this.whenRenderedTickingProcess&&(this.domEnv.window.cancelAnimationFrame(this.whenRenderedTickingProcess),this.whenRenderedTickingProcess=null);this.whenRenderedRequesters=new Map;this.domEnv&&this.domEnv.destroy();this.initialized=!1;return Promise.resolve()}},{key:"setWorld",value:function(a,d){var k=this;d=void 0===d?this.renderer?this.renderer.rootNode:this.domEnv.document.body:d;return this._waitForDOMEnv?this._waitForDOMEnv.then(function(){return k.setWorld(a)}):
this.setWorldRenderedOn(a,d)}},{key:"setWorldRenderedOn",value:function(a,d,k){var b=this;k=void 0===k?null:k;if(!a||!a.isWorld)throw Error("world object does not look like a morphic world");if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return b.setWorldRenderedOn(a,d,k)});this.deleteHistory();this.uninstallWorldRelated();this.world=a;this.renderer=new dl.Renderer(a,d,this.domEnv);this.renderer.domNode=k;this.eventDispatcher=(new dl.EventDispatcher(a.isEmbedded?d:this.domEnv.window,
a)).install(d);a.resumeSteppingAll();this.isDefault()&&(this.domEnv.window.$world=a);a.focus();a.makeDirty();this.renderer.renderLater();return a.whenRendered().then(function(){return b})}},{key:"installSystemChangeHandlers",value:function(){var a=this;if(!this.systemChangeHandlers){var d=this.systemChangeHandlers={};d["lively.modules/moduleloaded"]=[dl.subscribe("lively.modules/moduleloaded",function(k){return a.getTargetsFor("onModuleLoaded").forEach(function(b){return b.onModuleLoaded(k)})})];
d["lively.modules/modulechanged"]=[dl.subscribe("lively.modules/modulechanged",function(k){return a.getTargetsFor("onModuleChanged").forEach(function(b){return b.onModuleChanged(k)})})];d["lively.partsbin/partpublished"]=[dl.subscribe("lively.partsbin/partpublished",function(k){return a.getTargetsFor("onPartPublished").forEach(function(b){return b.onPartPublished(k)})})];d["lively.user/userchanged"]=[dl.subscribe("lively.user/userchanged",function(k){return a.getTargetsFor("onUserChanged").forEach(function(b){return b.onUserChanged(k)})})]}}},
{key:"uninstallSystemChangeHandlers",value:function(){var a=this.systemChangeHandlers;a&&(this.systemChangeHandlers=null,Object.keys(a).forEach(function(d){return a[d].forEach(function(k){return dl.unsubscribe(d,k)})}))}},{key:"getTargetsFor",value:function(a){var d=this.world,k=[];if(!d||!d.submorphs)return k;"function"===typeof d[a]&&k.push(d);d=$jscomp.makeIterator(d.submorphs);for(var b=d.next();!b.done;b=d.next())b=b.value,"function"===typeof b[a]&&k.push(b),b.isWindow&&b.targetMorph&&"function"===
typeof b.targetMorph[a]&&k.push(b.targetMorph);return k}},{key:"cleanupCaches",value:function(){this.world.withAllSubmorphsDo(function(a){return a._pathDependants=a._pathDependants.filter(function(d){return d.world()})})}},{key:"deleteHistory",value:function(){var a=this.changeManager,d=this.world,k=this.fontMetric;a&&(a.changes.length=0);d&&d.withAllSubmorphsDo(function(b){return b.undoManager&&b.undoManager.reset()});k&&k.reset()}},{key:"printStatus",value:function(){var a=this.changeManager,d=
this.world,k=0,b=0;d&&d.withAllSubmorphsDo(function(e){e.undoManager&&(k++,b+=e.undoManager.undos.length+e.undoManager.redos.length)});return a.changes.length+" changes recorded\n"+k+" morphs with undos\n"+b+" undo changes"}},{key:"updateWhenRenderedRequests",value:function(){for(var a=this,d=this.whenRenderedRequesters,k=0,b=$jscomp.makeIterator(d),e=b.next();!e.done;e=b.next()){var l=$jscomp.makeIterator(e.value);e=l.next().value;var p=l=l.next().value,u=p.maxAttempts,x=p.resolve;p=p.reject;e._dirty||
e._rendering?++l.currentAttempt>u?(d.delete(e),p(Error("Failed to wait for whenRendered of "+e+" (tried "+u+"x)"))):k++:(d.delete(e),x(e))}this.whenRenderedTickingProcess=k?this.domEnv.window.requestAnimationFrame(function(){return a.updateWhenRenderedRequests()}):null}},{key:"whenRendered",value:function(a,d){var k=this;d=void 0===d?50:d;var b=this.whenRenderedRequesters,e=this.whenRenderedTickingProcess,l=b.get(a);if(!l){var p,u;l=new Promise(function(x,z){p=x;u=z});b.set(a,l={maxAttempts:d,currentAttempt:0,
resolve:p,reject:u,promise:l})}e||(this.whenRenderedTickingProcess=this.domEnv.window.requestAnimationFrame(function(){return k.updateWhenRenderedRequests()}));return l.promise}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicEnv"}},{key:"reset",value:function(){for(;;){var a=this.popDefault();if(!a)break;try{a.uninstall()}catch(d){console.error("Error uninstalling MorphicEnv: "+(d.stack||d))}}}},{key:"default",value:function(){var a=this.envs;a.length||this.pushDefault(new this);
return a[a.length-1]}},{key:"pushDefault",value:function(a){this.envs.push(a);return a}},{key:"popDefault",value:function(){return this.envs.pop()}},{key:"envs",get:function(){return this._envs||(this._envs=[])}}],m,{pathInPackage:function(){return"env.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:405,end:8366})}(void 0));dl.MorphicEnv=
wp;dl.MorphicEnv=wp;dl.MorphicEnv=wp;var nra=Object.freeze({__proto__:null,MorphicEnv:wp}),ct=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js");ct.printArg=function(f){return ct.obj.inspect(f,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};ct.obj=eg;ct.arr=Gf;ct.promise=bh;var I$=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js"),n=m.hasOwnProperty("CommandHandler")&&"function"===typeof m.CommandHandler?m.CommandHandler:m.CommandHandler=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.history=[];this.maxHistorySize=1E3}},{key:"addToHistory",value:function(a){this.history.push(a);this.history.length>this.maxHistorySize&&this.history.splice(0,this.history.length-this.maxHistorySize)}},{key:"printHistory",value:function(){return this.history.map(this.printCommand).join("\n")}},
{key:"printCommand",value:function(a){var d=a.target.string,k=a.args,b=a.count,e=a.evt,l=a.keyCombo;return'"'+a.name+'" '+(e?e+" ":"")+(l?l+" ":"")+(k?ct.printArg(k):"")+("number"===typeof b?" x"+b:"")+" "+d}},{key:"lookupCommand",value:function(a,d){var k;if(!a)return{};"string"===typeof a&&(k=a);"string"===typeof a.command&&(k=a.command);if(a.exec){var b=a;k=b.name}b||(b=d.commands.find(function(e){return e.name===k}));return{name:k,command:b}}},{key:"exec",value:function(a,d,k,b,e){var l=this,
p=this.lookupCommand(a,d)||{},u=p.name,x=p.command;if(!x)return console.warn("Cannot find command "+(u||a)),null;if(u){if(e){var z=e.type;if(e.isKeyEvent)var E=e.keyCombo}this.addToHistory({name:u,target:{string:String(d),id:d.id},args:k,count:b,time:Date.now(),evt:z,keyCombo:E})}var G=d.world();"string"===typeof x.progressIndicator&&(this.progressIndicator=G.execCommand("open loading indicator",x.progressIndicator));if("function"===typeof x.exec)try{var J=x.exec(d,k,x.handlesCount?b:void 0,e)}catch(K){J=
K,a="Error in interactive command "+u+": "+(K.stack||K),G?G.logError(a):console.error(a)}else console.error("command "+u+" has no exec function!");this.progressIndicator&&this.progressIndicator.remove();J&&"function"===typeof J.catch?(J.catch(function(K){var T="Error in interactive command "+u+": "+K+"\n"+(K.stack||K);G?G.logError(T):console.error(T);throw K;}),this.progressIndicator&&ct.promise.finally(J,function(){return l.progressIndicator.remove()})):this.progressIndicator&&this.progressIndicator.remove();
J&&"number"===typeof b&&1<b&&!x.handlesCount&&(J="function"===typeof J.then?J.then(function(){return l.exec(x,d,k,b-1,e,null)}):this.exec(x,d,k,b-1,e,null));return J}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CommandHandler"}}],m,{pathInPackage:function(){return"CommandHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:194,end:3656})}(void 0),ora=I$=ct.CommandHandler;ct.default=I$;var qg=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js");qg.ensureSpaces=function(f){return f.length?f:" "};qg.invokeKeyHandlers=function(f,m,n){n=void 0===n?!1:n;var a=m=qg.Keys.canonicalizeEvent(m),d=a.key,k=a.data,b,e=!1,l=f.keyhandlers,p=m.keyInputState||{};a=a.keyCombo.startsWith("input-");var u=!1,x=p.count,z=p.keyChain||"",E=!1;if(!l||n&&a)return!1;for(n=l.length;n--;)if((b=l[n].eventCommandLookup(f,
m))&&b.command){E=b;b=E.command;var G=E.args,J=E.passEvent,K=E.count;u=E.keyChain;var T=E.onlyWhenFocused;E=!0;x=K;z=u;u="null"===b;if(T&&(T=f.world())&&T.focusedMorph&&T.focusedMorph!==f)continue;e=u?!1:f.execCommand(b,G,K,m);!e||a&&"insertstring"===b||J||"function"!==typeof m.stop||m.stop();if(e||u)break}e||u||!a||!f.onTextInput||z||(e=f.execCommand("insertstring",{string:k||d,undoGroup:qg.config.text.undoGroupDelay},p.count,m));if(E)if("function"===typeof m.onAfterDispatch)m.onAfterDispatch(function(){p.count=
e?void 0:x;p.keyChain=e?"":z});else p.count=e?void 0:x,p.keyChain=e?"":z;return e&&!u};qg.simulateKeys=function(f,m,n){n=void 0===n?{keyChain:void 0,count:void 0}:n;var a,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){1==e.nextAddress&&(a=1===m.length?[m]:m.split(/ /g).map(qg.ensureSpaces),d=$jscomp.makeIterator(a),k=d.next());if(3!=e.nextAddress){if(k.done)return e.jumpTo(0);b=k.value;return e.yield(qg.simulateKey(f,b,n),3)}k=d.next();return e.jumpTo(2)})};qg.simulateKey=function(f,
m,n){return qg.invokeKeyHandlers(f,Object.assign({},qg.Keys.keyComboToEventSpec(m),{keyInputState:n}))};qg.bowserOS=function(){return qg.bowser.mac?"mac":qg.bowser.windows?"windows":qg.bowser.windowsphone?"windowsphone":qg.bowser.linux?"linux":qg.bowser.chromeos?"chromeos":qg.bowser.android?"android":qg.bowser.ios?"ios":qg.bowser.blackberry?"blackberry":qg.bowser.firefoxos?"firefoxos":qg.bowser.webos?"webos":qg.bowser.bada?"bada":qg.bowser.tizen?"tizen":qg.bowser.sailfish?"sailfish":"unknown"};qg.findKeysForPlatform=
CI;qg.Keys=mW;qg.bowser=Fp;qg.config=$l;qg.arr=Gf;qg.findKeysForPlatform=CI;qg.findKeysForPlatform=CI;qg.regexps={meta:/Meta|Cmd|Command/gi,alt:/Alt/gi,ctrl:/Ctrl|Control/gi,tab:/Tab/gi,enter:/Enter|Return/gi,shift:/Shift/gi,backspace:/Backspace/gi,delete:/del(ete)?/gi,left:/left/gi,right:/right/gi,up:/up/gi,down:/down/gi,keySpacer:/([^-])-/g,seqSpacer:/([^\s])\s/g};var qW=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js"),n=m.hasOwnProperty("KeyHandler")&&
"function"===typeof m.KeyHandler?m.KeyHandler:m.KeyHandler=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.platform=a=void 0===a?qg.bowserOS():a;this.keyBindings={}}},{key:"eventCommandLookup",value:function(a,d){return this.lookup(d.keyCombo,d.keyInputState)}},{key:"lookup",value:function(a,d){var k=this;d=void 0===d?{keyChain:void 0,
count:void 0}:d;a=qg.Keys.canonicalizeKeyCombo(a);var b=d.keyChain||"";d=d.count;if(!b&&a.startsWith("Ctrl-")){var e=a.match(/^Ctrl-([0-9]+)/);if(e)return{command:"null",count:parseInt(("number"===typeof d?d:"")+e[1])};if("Ctrl-U"===a)return{command:"null",count:4,keyChain:"Ctrl-U"}}e=[a];if(!p&&a.startsWith("input-")){p=a.replace(/^(input-)(.*)$/,function(u,x,z){return x+z.toUpperCase()});var l=a.replace(/^(input-)(.*)$/,function(u,x,z){return x+z.toLowerCase()});e.push(p,l)}var p=e.map(function(u){return k.keyBindings[u]})[0];
b&&(e=e.find(function(u){return k.keyBindings[b+" "+u]}))&&(b+=" "+e,p=this.keyBindings[b]||p);if(p&&"chainKeys"===p)return b=b||a,a={command:"null",keyChain:b},void 0!==d&&(a.count=d),a;if(p)return a="object"===typeof p?Object.assign({},p):{command:p},void 0!==d&&(a.count=d),a}},{key:"bindKey",value:function(a,d){var k=this;"object"===typeof a&&a&&!Array.isArray(a)&&(a=qg.findKeysForPlatform(a,this.platform));if(a){if("function"===typeof d)return this.addCommand({exec:d,bindKey:a,name:d.name||a});
(Array.isArray(a)?a:a.includes("|")?a.split("|"):[a]).forEach(function(b){var e="";if(-1!=b.indexOf(" ")){var l=b.split(/\s+/);b=l.pop();l.forEach(function(p){p=qg.Keys.canonicalizeKeyCombo(p);e+=(e?" ":"")+p;k.addCommandToBinding(e,"chainKeys")});e+=" "}k.addCommandToBinding(e+qg.Keys.canonicalizeKeyCombo(b),d)});this.cleanupUnusedKeyChains()}}},{key:"unbindKey",value:function(a){this.bindKey(a,null)}},{key:"cleanupUnusedKeyChains",value:function(){var a=this,d=Object.keys(this.keyBindings),k=d.filter(function(b){return"chainKeys"===
a.keyBindings[b]});k=qg.arr.sortBy(k,function(b){return b.length}).reverse();k.forEach(function(b){d.some(function(e){return b!==e&&e.startsWith(b)})||(delete a.keyBindings[b],qg.arr.remove(d,b),qg.arr.remove(k,b))})}},{key:"addCommand",value:function(a){return a&&a.bindKey?this.addCommandToBinding(a.bindKey,a):void 0}},{key:"addCommandToBinding",value:function(a,d){var k=this;"chainKeys"===this.keyBindings[a]&&"chainKeys"!=d&&Object.keys(this.keyBindings).forEach(function(b){b.startsWith(a)&&delete k.keyBindings[b]});
d?this.keyBindings[a]=d:delete this.keyBindings[a];"chainKeys"!==d&&this.cleanupUnusedKeyChains()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyHandler"}},{key:"invokeKeyHandlers",value:function(a,d,k){return qg.invokeKeyHandlers(a,d,void 0===k?!1:k)}},{key:"simulateKeys",value:function(a,d,k){return qg.simulateKeys(a,d,k)}},{key:"withBindings",value:function(a,d){var k=new this(d);a.forEach(function(b){return k.bindKey(b.keys,b.command)});return k}},{key:"prettyCombo",value:function(a){var d=
this._prettyCombos||(this._prettyCombos={});return this._prettyCombos[a]?d[a]:d[a]=a.replace(qg.regexps.meta,"mac"==qg.bowserOS()?"\u2318":"\u229e ").replace(qg.regexps.alt,"mac"==qg.bowserOS()?"\u2325":"Alt ").replace(qg.regexps.ctrl,"mac"==qg.bowserOS()?"\u2303":"Ctrl ").replace(qg.regexps.tab,"\u21e5").replace(qg.regexps.enter,"\u23ce").replace(qg.regexps.shift,"\u21e7").replace(qg.regexps.backspace,"\u232b").replace(qg.regexps.delete,"\u2326").replace(qg.regexps.left,"\u2192").replace(qg.regexps.right,
"\u2190").replace(qg.regexps.up,"\u2191").replace(qg.regexps.down,"\u2193").replace(qg.regexps.keySpacer,"$1").replace(qg.regexps.seqSpacer,"$1-")}},{key:"generateCommandToKeybindingMap",value:function(a,d,k){function b(u){if(p[u.id])return p[u.id];var x=l[u.id]||(l[u.id]=u.keyCommandMap);return p[u.id]=qg.arr.groupBy(Object.keys(x),function(z){return x[z].name})}var e=this;k=void 0===k?!0:k;var l={},p={};return((void 0===d?0:d)?a.commandsIncludingOwners:a.commands.map(function(u){return{command:u,
target:a}})).map(function(u){var x=u.target;u=u.command;var z=b(x)[u.name];return{keys:z,target:x,command:u,prettyKeys:z&&k?z.map(function(E){return e.prettyCombo(E)}):null}})}}],m,{pathInPackage:function(){return"events/KeyHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6052,end:13079})}(void 0);qW=qg.KeyHandler;var rW=
Ma("a6",qW);qg.default=qW;var Mu=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),J$=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=m.hasOwnProperty("Script")&&"function"===typeof m.Script?m.Script:m.Script=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.suspended=!1;this.stopped=!0;this.currentTimeout=
this.type=this.tickTime=null}},{key:"__additionally_serialize__",value:function(a,d,k){a.props.suspended.value=!0}},{key:"isScript",get:function(){return!0}},{key:"global",get:function(){return System.global}},{key:"execute",value:function(){throw Error("subclass responsibility");}},{key:"tick",value:function(){try{this.execute()}catch(a){console.error("Error executing script "+this+": "+a+"\n"+a.stack);return}this.stopped||this.startTicking(this.tickTime)}},{key:"startTicking",value:function(a){this.stopped=
!1;this.tickTime=a;this.type="number"===typeof a?"setTimeout":"requestAnimationFrame";this.currentTimeout="setTimeout"===this.type?this.global.setTimeout(this.tick.bind(this),a):this.global.requestAnimationFrame(this.tick.bind(this))}},{key:"stop",value:function(){this.global["setTimeout"===this.type?"clearTimeout":"cancelAnimationFrame"](this.currentTimeout);this.stopped=!0}},{key:"resume",value:function(a){a=void 0===a?this.tickTime:a;this.suspended&&(this.suspended=!1,this.startTicking(this.tickTime=
a))}},{key:"suspend",value:function(){this.stop();this.suspended=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Script"}}],m,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:21,end:1376})}(void 0),sW=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),
n=m.hasOwnProperty("TargetScript")&&"function"===typeof m.TargetScript?m.TargetScript:m.TargetScript=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k){$b._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.target=a;this.selector=d;this.args=k||[]}},{key:"execute",value:function(){this.target.isMorph&&
!this.target.tickingScripts.includes(this)&&this.stop();"function"===typeof this.target[this.selector]&&this.target[this.selector].apply(this.target,this.args)}},{key:"equals",value:function(a){return a.isScript&&this.target==a.target&&this.selector==a.selector}},{key:"toString",value:function(){return"Script("+this.target+">>"+this.selector+"("+this.args.join(",")+"))"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TargetScript"}}],m,{pathInPackage:function(){return"ticking.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1378,end:2013})}(Mu.Script),K$=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=m.hasOwnProperty("FunctionScript")&&"function"===typeof m.FunctionScript?m.FunctionScript:m.FunctionScript=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $b(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){$b._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.callback=a}},{key:"execute",value:function(){this.callback()}},{key:"equals",value:function(a){return a.isScript&&this.callback==a.callback}},{key:"toString",value:function(){return"Script("+(this.callback.toString().replace(/\n/g,"").slice(0,40)+"...)")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FunctionScript"}}],
m,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2015,end:2354})}(Mu.Script);Mu.Script=J$;Mu.Script=J$;Mu.TargetScript=sW;Mu.TargetScript=sW;Mu.FunctionScript=K$;Mu.FunctionScript=K$;var Pr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,pra={},L$=Pr.MutationObserver||
Pr.WebKitMutationObserver;if(L$){var M$=0,qra=new L$(DI),N$=Pr.document.createTextNode("");qra.observe(N$,{characterData:!0});var tW=function(){N$.data=M$=++M$%2}}else if(Pr.setImmediate||"undefined"===typeof Pr.MessageChannel)tW="document"in Pr&&"onreadystatechange"in Pr.document.createElement("script")?function(){var f=Pr.document.createElement("script");f.onreadystatechange=function(){DI();f.onreadystatechange=null;f.parentNode.removeChild(f);f=null};Pr.document.documentElement.appendChild(f)}:
function(){setTimeout(DI,0)};else{var O$=new Pr.MessageChannel;O$.port1.onmessage=DI;tW=function(){O$.port2.postMessage(0)}}var nR,XC=[],rra=pra=function(f){1!==XC.push(f)||nR||tW()},uW={},P$="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(P$){var Q$=new Uint8Array(16);uW=function(){P$(Q$);return Q$}}else{var R$=Array(16);uW=function(){for(var f=
0,m;16>f;f++)0===(f&3)&&(m=4294967296*Math.random()),R$[f]=m>>>((f&3)<<3)&255;return R$}}for(var S$=uW,sra={},Rm=[],UM=0;256>UM;++UM)Rm[UM]=(UM+256).toString(16).substr(1);var T$=sra=function(f,m){m=m||0;return[Rm[f[m++]],Rm[f[m++]],Rm[f[m++]],Rm[f[m++]],"-",Rm[f[m++]],Rm[f[m++]],"-",Rm[f[m++]],Rm[f[m++]],"-",Rm[f[m++]],Rm[f[m++]],"-",Rm[f[m++]],Rm[f[m++]],Rm[f[m++]],Rm[f[m++]],Rm[f[m++]],Rm[f[m++]]].join("")},tra={},U$,vW,wW=0,xW=0,ura=tra=function(f,m,n){n=m&&n||0;var a=m||[];f=f||{};var d=f.node||
U$,k=void 0!==f.clockseq?f.clockseq:vW;if(null==d||null==k){var b=S$();null==d&&(d=U$=[b[0]|1,b[1],b[2],b[3],b[4],b[5]]);null==k&&(k=vW=(b[6]<<8|b[7])&16383)}b=void 0!==f.msecs?f.msecs:(new Date).getTime();var e=void 0!==f.nsecs?f.nsecs:xW+1,l=b-wW+(e-xW)/1E4;0>l&&void 0===f.clockseq&&(k=k+1&16383);(0>l||b>wW)&&void 0===f.nsecs&&(e=0);if(1E4<=e)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");wW=b;xW=e;vW=k;b+=122192928E5;f=(1E4*(b&268435455)+e)%4294967296;a[n++]=f>>>24&255;a[n++]=f>>>
16&255;a[n++]=f>>>8&255;a[n++]=f&255;f=b/4294967296*1E4&268435455;a[n++]=f>>>8&255;a[n++]=f&255;a[n++]=f>>>24&15|16;a[n++]=f>>>16&255;a[n++]=k>>>8|128;a[n++]=k&255;for(k=0;6>k;++k)a[n+k]=d[k];return m?m:T$(a)},V$={};V$=function(f,m,n){n=m&&n||0;"string"==typeof f&&(m="binary"===f?Array(16):null,f=null);f=f||{};f=f.random||(f.rng||S$)();f[6]=f[6]&15|64;f[8]=f[8]&63|128;if(m)for(var a=0;16>a;++a)m[n+a]=f[a];return m||T$(f)};var vra={},yW=V$;yW.v1=ura;var wra=vra=yW.v4=yW,Kh="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,xra={},yra=xra=function(f){function m(u,x){var z=u[0],E=u[1],G=u[2],J=u[3];z+=(E&G|~E&J)+x[0]-680876936|0;z=(z<<7|z>>>25)+E|0;J+=(z&E|~z&G)+x[1]-389564586|0;J=(J<<12|J>>>20)+z|0;G+=(J&z|~J&E)+x[2]+606105819|0;G=(G<<17|G>>>15)+J|0;E+=(G&J|~G&z)+x[3]-1044525330|0;E=(E<<22|E>>>10)+G|0;z+=(E&G|~E&J)+x[4]-176418897|0;z=(z<<7|z>>>25)+E|0;J+=(z&E|~z&G)+x[5]+1200080426|0;J=(J<<12|J>>>20)+z|0;G+=(J&z|~J&E)+x[6]-1473231341|0;G=(G<<17|G>>>15)+J|0;E+=(G&J|~G&z)+
x[7]-45705983|0;E=(E<<22|E>>>10)+G|0;z+=(E&G|~E&J)+x[8]+1770035416|0;z=(z<<7|z>>>25)+E|0;J+=(z&E|~z&G)+x[9]-1958414417|0;J=(J<<12|J>>>20)+z|0;G+=(J&z|~J&E)+x[10]-42063|0;G=(G<<17|G>>>15)+J|0;E+=(G&J|~G&z)+x[11]-1990404162|0;E=(E<<22|E>>>10)+G|0;z+=(E&G|~E&J)+x[12]+1804603682|0;z=(z<<7|z>>>25)+E|0;J+=(z&E|~z&G)+x[13]-40341101|0;J=(J<<12|J>>>20)+z|0;G+=(J&z|~J&E)+x[14]-1502002290|0;G=(G<<17|G>>>15)+J|0;E+=(G&J|~G&z)+x[15]+1236535329|0;E=(E<<22|E>>>10)+G|0;z+=(E&J|G&~J)+x[1]-165796510|0;z=(z<<5|z>>>
27)+E|0;J+=(z&G|E&~G)+x[6]-1069501632|0;J=(J<<9|J>>>23)+z|0;G+=(J&E|z&~E)+x[11]+643717713|0;G=(G<<14|G>>>18)+J|0;E+=(G&z|J&~z)+x[0]-373897302|0;E=(E<<20|E>>>12)+G|0;z+=(E&J|G&~J)+x[5]-701558691|0;z=(z<<5|z>>>27)+E|0;J+=(z&G|E&~G)+x[10]+38016083|0;J=(J<<9|J>>>23)+z|0;G+=(J&E|z&~E)+x[15]-660478335|0;G=(G<<14|G>>>18)+J|0;E+=(G&z|J&~z)+x[4]-405537848|0;E=(E<<20|E>>>12)+G|0;z+=(E&J|G&~J)+x[9]+568446438|0;z=(z<<5|z>>>27)+E|0;J+=(z&G|E&~G)+x[14]-1019803690|0;J=(J<<9|J>>>23)+z|0;G+=(J&E|z&~E)+x[3]-187363961|
0;G=(G<<14|G>>>18)+J|0;E+=(G&z|J&~z)+x[8]+1163531501|0;E=(E<<20|E>>>12)+G|0;z+=(E&J|G&~J)+x[13]-1444681467|0;z=(z<<5|z>>>27)+E|0;J+=(z&G|E&~G)+x[2]-51403784|0;J=(J<<9|J>>>23)+z|0;G+=(J&E|z&~E)+x[7]+1735328473|0;G=(G<<14|G>>>18)+J|0;E+=(G&z|J&~z)+x[12]-1926607734|0;E=(E<<20|E>>>12)+G|0;z+=(E^G^J)+x[5]-378558|0;z=(z<<4|z>>>28)+E|0;J+=(z^E^G)+x[8]-2022574463|0;J=(J<<11|J>>>21)+z|0;G+=(J^z^E)+x[11]+1839030562|0;G=(G<<16|G>>>16)+J|0;E+=(G^J^z)+x[14]-35309556|0;E=(E<<23|E>>>9)+G|0;z+=(E^G^J)+x[1]-1530992060|
0;z=(z<<4|z>>>28)+E|0;J+=(z^E^G)+x[4]+1272893353|0;J=(J<<11|J>>>21)+z|0;G+=(J^z^E)+x[7]-155497632|0;G=(G<<16|G>>>16)+J|0;E+=(G^J^z)+x[10]-1094730640|0;E=(E<<23|E>>>9)+G|0;z+=(E^G^J)+x[13]+681279174|0;z=(z<<4|z>>>28)+E|0;J+=(z^E^G)+x[0]-358537222|0;J=(J<<11|J>>>21)+z|0;G+=(J^z^E)+x[3]-722521979|0;G=(G<<16|G>>>16)+J|0;E+=(G^J^z)+x[6]+76029189|0;E=(E<<23|E>>>9)+G|0;z+=(E^G^J)+x[9]-640364487|0;z=(z<<4|z>>>28)+E|0;J+=(z^E^G)+x[12]-421815835|0;J=(J<<11|J>>>21)+z|0;G+=(J^z^E)+x[15]+530742520|0;G=(G<<16|
G>>>16)+J|0;E+=(G^J^z)+x[2]-995338651|0;E=(E<<23|E>>>9)+G|0;z+=(G^(E|~J))+x[0]-198630844|0;z=(z<<6|z>>>26)+E|0;J+=(E^(z|~G))+x[7]+1126891415|0;J=(J<<10|J>>>22)+z|0;G+=(z^(J|~E))+x[14]-1416354905|0;G=(G<<15|G>>>17)+J|0;E+=(J^(G|~z))+x[5]-57434055|0;E=(E<<21|E>>>11)+G|0;z+=(G^(E|~J))+x[12]+1700485571|0;z=(z<<6|z>>>26)+E|0;J+=(E^(z|~G))+x[3]-1894986606|0;J=(J<<10|J>>>22)+z|0;G+=(z^(J|~E))+x[10]-1051523|0;G=(G<<15|G>>>17)+J|0;E+=(J^(G|~z))+x[1]-2054922799|0;E=(E<<21|E>>>11)+G|0;z+=(G^(E|~J))+x[8]+1873313359|
0;z=(z<<6|z>>>26)+E|0;J+=(E^(z|~G))+x[15]-30611744|0;J=(J<<10|J>>>22)+z|0;G+=(z^(J|~E))+x[6]-1560198380|0;G=(G<<15|G>>>17)+J|0;E+=(J^(G|~z))+x[13]+1309151649|0;E=(E<<21|E>>>11)+G|0;z+=(G^(E|~J))+x[4]-145523070|0;z=(z<<6|z>>>26)+E|0;J+=(E^(z|~G))+x[11]-1120210379|0;J=(J<<10|J>>>22)+z|0;G+=(z^(J|~E))+x[2]+718787259|0;G=(G<<15|G>>>17)+J|0;E+=(J^(G|~z))+x[9]-343485551|0;u[0]=z+u[0]|0;u[1]=((E<<21|E>>>11)+G|0)+u[1]|0;u[2]=G+u[2]|0;u[3]=J+u[3]|0}function n(u){var x=[],z;for(z=0;64>z;z+=4)x[z>>2]=u.charCodeAt(z)+
(u.charCodeAt(z+1)<<8)+(u.charCodeAt(z+2)<<16)+(u.charCodeAt(z+3)<<24);return x}function a(u){var x=[],z;for(z=0;64>z;z+=4)x[z>>2]=u[z]+(u[z+1]<<8)+(u[z+2]<<16)+(u[z+3]<<24);return x}function d(u){var x=u.length,z=[1732584193,-271733879,-1732584194,271733878],E;for(E=64;E<=x;E+=64)m(z,n(u.substring(E-64,E)));u=u.substring(E-64);var G=u.length;var J=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(E=0;E<G;E+=1)J[E>>2]|=u.charCodeAt(E)<<(E%4<<3);J[E>>2]|=128<<(E%4<<3);if(55<E)for(m(z,J),E=0;16>E;E+=1)J[E]=0;x=
(8*x).toString(16).match(/(.*?)(.{0,8})$/);u=parseInt(x[2],16);x=parseInt(x[1],16)||0;J[14]=u;J[15]=x;m(z,J);return z}function k(u){var x;for(x=0;x<u.length;x+=1){var z=x,E,G=u[x],J="";for(E=0;4>E;E+=1)J+=p[G>>8*E+4&15]+p[G>>8*E&15];u[z]=J}return u.join("")}function b(u){/[\u0080-\uFFFF]/.test(u)&&(u=unescape(encodeURIComponent(u)));return u}function e(u){var x=[],z=u.length,E;for(E=0;E<z-1;E+=2)x.push(parseInt(u.substr(E,2),16));return String.fromCharCode.apply(String,x)}function l(){this.reset()}
var p="0123456789abcdef".split("");k(d("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function u(x,z){x=x|0||0;return 0>x?Math.max(x+z,0):Math.min(x,z)}ArrayBuffer.prototype.slice=function(x,z){var E=(this||Kh).byteLength;x=u(x,E);var G=E;z!==f&&(G=u(z,E));if(x>G)return new ArrayBuffer(0);G-=x;z=new ArrayBuffer(G);E=new Uint8Array(z);x=new Uint8Array(this||Kh,x,G);E.set(x);return z}}();l.prototype.append=function(u){this.appendBinary(b(u));return this||Kh};l.prototype.appendBinary=
function(u){(this||Kh)._buff+=u;(this||Kh)._length+=u.length;u=(this||Kh)._buff.length;var x;for(x=64;x<=u;x+=64)m((this||Kh)._hash,n((this||Kh)._buff.substring(x-64,x)));(this||Kh)._buff=(this||Kh)._buff.substring(x-64);return this||Kh};l.prototype.end=function(u){var x=(this||Kh)._buff,z=x.length,E,G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(E=0;E<z;E+=1)G[E>>2]|=x.charCodeAt(E)<<(E%4<<3);this._finish(G,z);x=k((this||Kh)._hash);u&&(x=e(x));this.reset();return x};l.prototype.reset=function(){(this||
Kh)._buff="";(this||Kh)._length=0;(this||Kh)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Kh};l.prototype.getState=function(){return{buff:(this||Kh)._buff,length:(this||Kh)._length,hash:(this||Kh)._hash}};l.prototype.setState=function(u){(this||Kh)._buff=u.buff;(this||Kh)._length=u.length;(this||Kh)._hash=u.hash;return this||Kh};l.prototype.destroy=function(){delete (this||Kh)._hash;delete (this||Kh)._buff;delete (this||Kh)._length};l.prototype._finish=function(u,x){u[x>>2]|=128<<
(x%4<<3);if(55<x)for(m((this||Kh)._hash,u),x=0;16>x;x+=1)u[x]=0;var z=8*(this||Kh)._length;z=z.toString(16).match(/(.*?)(.{0,8})$/);x=parseInt(z[2],16);z=parseInt(z[1],16)||0;u[14]=x;u[15]=z;m((this||Kh)._hash,u)};l.hash=function(u,x){return l.hashBinary(b(u),x)};l.hashBinary=function(u,x){u=d(u);u=k(u);return x?e(u):u};l.ArrayBuffer=function(){this.reset()};l.ArrayBuffer.prototype.append=function(u){var x=(this||Kh)._buff.buffer,z=new Uint8Array(x.byteLength+u.byteLength);z.set(new Uint8Array(x));
z.set(new Uint8Array(u),x.byteLength);x=z.length;(this||Kh)._length+=u.byteLength;for(u=64;u<=x;u+=64)m((this||Kh)._hash,a(z.subarray(u-64,u)));(this||Kh)._buff=u-64<x?new Uint8Array(z.buffer.slice(u-64)):new Uint8Array(0);return this||Kh};l.ArrayBuffer.prototype.end=function(u){var x=(this||Kh)._buff,z=x.length,E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],G;for(G=0;G<z;G+=1)E[G>>2]|=x[G]<<(G%4<<3);this._finish(E,z);x=k((this||Kh)._hash);u&&(x=e(x));this.reset();return x};l.ArrayBuffer.prototype.reset=function(){(this||
Kh)._buff=new Uint8Array(0);(this||Kh)._length=0;(this||Kh)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Kh};l.ArrayBuffer.prototype.getState=function(){var u=l.prototype.getState.call(this||Kh);u.buff=String.fromCharCode.apply(null,new Uint8Array(u.buff));return u};l.ArrayBuffer.prototype.setState=function(u){var x=u.buff,z=x.length,E=new ArrayBuffer(z);E=new Uint8Array(E);var G;for(G=0;G<z;G+=1)E[G]=x.charCodeAt(G);u.buff=E;return l.prototype.setState.call(this||Kh,u)};l.ArrayBuffer.prototype.destroy=
l.prototype.destroy;l.ArrayBuffer.prototype._finish=l.prototype._finish;l.ArrayBuffer.hash=function(u,x){var z=new Uint8Array(u),E=z.length;u=[1732584193,-271733879,-1732584194,271733878];var G;for(G=64;G<=E;G+=64)m(u,a(z.subarray(G-64,G)));z=G-64<E?z.subarray(G-64):new Uint8Array(0);var J=z.length;var K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(G=0;G<J;G+=1)K[G>>2]|=z[G]<<(G%4<<3);K[G>>2]|=128<<(G%4<<3);if(55<G)for(m(u,K),G=0;16>G;G+=1)K[G]=0;E=(8*E).toString(16).match(/(.*?)(.{0,8})$/);z=parseInt(E[2],
16);E=parseInt(E[1],16)||0;K[14]=z;K[15]=E;m(u,K);u=k(u);return x?e(u):u};return l}(),VA={stringify:function(f){var m=[];m.push({obj:f});f="";for(var n,a,d,k,b,e,l;n=m.pop();)if(a=n.obj,d=n.prefix||"",n=n.val||"",f+=d,n)f+=n;else if("object"!==typeof a)f+="undefined"===typeof a?null:JSON.stringify(a);else if(null===a)f+="null";else if(Array.isArray(a)){m.push({val:"]"});for(d=a.length-1;0<=d;d--)n=0===d?"":",",m.push({obj:a[d],prefix:n});m.push({val:"["})}else{n=[];for(k in a)a.hasOwnProperty(k)&&
n.push(k);m.push({val:"}"});for(d=n.length-1;0<=d;d--)b=n[d],e=a[b],l=0<d?",":"",l+=JSON.stringify(b)+":",m.push({obj:e,prefix:l});m.push({val:"{"})}return f},parse:function(f){for(var m=[],n=[],a=0,d,k,b,e;;)if(d=f[a++],"}"===d||"]"===d||"undefined"===typeof d){if(1===m.length)return m.pop();Hz(m.pop(),m,n)}else switch(d){case " ":case "\t":case "\n":case ":":case ",":break;case "n":a+=3;Hz(null,m,n);break;case "t":a+=3;Hz(!0,m,n);break;case "f":a+=4;Hz(!1,m,n);break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "-":d=
"";for(a--;;)if(k=f[a++],/[\d\.\-e\+]/.test(k))d+=k;else{a--;break}Hz(parseFloat(d),m,n);break;case '"':d="";k=void 0;for(b=0;;)if(e=f[a++],'"'!==e||"\\"===k&&1===b%2)d+=e,k=e,"\\"===k?b++:b=0;else break;Hz(JSON.parse('"'+d+'"'),m,n);break;case "[":d={element:[],index:m.length};m.push(d.element);n.push(d);break;case "{":d={element:{},index:m.length};m.push(d.element);n.push(d);break;default:throw Error("unexpectedly reached end of input: "+d);}}},zra={},zW=zra=function(f){return function(){var m=
arguments.length;if(m){for(var n=[],a=-1;++a<m;)n[a]=arguments[a];return f.call(this,n)}return f.call(this,[])}},Ara={},Gk=Ara="function"===typeof Object.create?function(f,m){m&&(f.super_=m,f.prototype=Object.create(m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:function(f,m){if(m){f.super_=m;var n=function(){};n.prototype=m.prototype;f.prototype=new n;f.prototype.constructor=f}},WA="object"==typeof Reflect?Reflect:null,W$=WA&&"function"==typeof WA.apply?WA.apply:
function(f,m,n){return Function.prototype.apply.call(f,m,n)};var Bra=WA&&"function"==typeof WA.ownKeys?WA.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};var X$=Number.isNaN||function(f){return f!=f};Zj.EventEmitter=Zj;Zj.prototype._events=void 0;Zj.prototype._eventsCount=0;Zj.prototype._maxListeners=void 0;var Y$=10;Object.defineProperty(Zj,"defaultMaxListeners",{enumerable:!0,
get:function(){return Y$},set:function(f){if("number"!=typeof f||0>f||X$(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");Y$=f}});Zj.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};Zj.prototype.setMaxListeners=function(f){if("number"!=typeof f||0>f||X$(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+
f+".");return this._maxListeners=f,this};Zj.prototype.getMaxListeners=function(){return void 0===this._maxListeners?Zj.defaultMaxListeners:this._maxListeners};Zj.prototype.emit=function(f){for(var m=[],n=1;n<arguments.length;n++)m.push(arguments[n]);n="error"===f;var a=this._events;if(void 0!==a)n=n&&void 0===a.error;else if(!n)return!1;if(n){var d;if(0<m.length&&(d=m[0]),d instanceof Error)throw d;m=Error("Unhandled error."+(d?" ("+d.message+")":""));throw m.context=d,m;}n=a[f];if(void 0===n)return!1;
if("function"==typeof n)W$(n,this,m);else for(d=n.length,a=L1(n,d),n=0;n<d;++n)W$(a[n],this,m);return!0};Zj.prototype.addListener=function(f,m){return I1(this,f,m,!1)};Zj.prototype.on=Zj.prototype.addListener;Zj.prototype.prependListener=function(f,m){return I1(this,f,m,!0)};Zj.prototype.once=function(f,m){return EI(m),this.on(f,J1(this,f,m)),this};Zj.prototype.prependOnceListener=function(f,m){return EI(m),this.prependListener(f,J1(this,f,m)),this};Zj.prototype.removeListener=function(f,m){var n,
a,d;if((EI(m),void 0===(a=this._events))||void 0===(n=a[f]))return this;if(n===m||n.listener===m)0==--this._eventsCount?this._events=Object.create(null):(delete a[f],a.removeListener&&this.emit("removeListener",f,n.listener||m));else if("function"!=typeof n){var k=-1;for(d=n.length-1;0<=d;d--)if(n[d]===m||n[d].listener===m){var b=n[d].listener;k=d;break}if(0>k)return this;if(0===k)n.shift();else{for(;k+1<n.length;k++)n[k]=n[k+1];n.pop();!0}1===n.length&&(a[f]=n[0]);void 0!==a.removeListener&&this.emit("removeListener",
f,b||m)}return this};Zj.prototype.off=Zj.prototype.removeListener;Zj.prototype.removeAllListeners=function(f){var m,n;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[f]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[f]),this;if(0===arguments.length){var a=Object.keys(n);for(n=0;n<a.length;++n)"removeListener"!==(m=a[n])&&this.removeAllListeners(m);return this.removeAllListeners("removeListener"),
this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(m=n[f]))this.removeListener(f,m);else if(void 0!==m)for(n=m.length-1;0<=n;n--)this.removeListener(f,m[n]);return this};Zj.prototype.listeners=function(f){return K1(this,f,!0)};Zj.prototype.rawListeners=function(f){return K1(this,f,!1)};Zj.listenerCount=function(f,m){return"function"==typeof f.listenerCount?f.listenerCount(m):M1.call(f,m)};Zj.prototype.listenerCount=M1;Zj.prototype.eventNames=function(){return 0<this._eventsCount?
Bra(this._events):[]};var lr=Zj,Z$="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Cra={},NI=Li,hr=Iz(rra),a2=Iz(wra),II=Iz(yra),u2=Iz(VA),Jz=Iz(zW),Aq=Iz(Gk),Wn=lr;Tt.prototype.get=function(f){return this._store["$"+f]};Tt.prototype.set=function(f,m){this._store["$"+f]=m;return!0};Tt.prototype.has=function(f){return"$"+f in this._store};Tt.prototype.delete=function(f){f="$"+f;var m=f in this._store;delete this._store[f];return m};Tt.prototype.forEach=function(f){for(var m=
Object.keys(this._store),n=0,a=m.length;n<a;n++){var d=m[n],k=this._store[d];d=d.substring(1);f(k,d)}};Object.defineProperty(Tt.prototype,"size",{get:function(){return Object.keys(this._store).length}});YC.prototype.add=function(f){return this._store.set(f,!0)};YC.prototype.has=function(f){return this._store.has(f)};YC.prototype.forEach=function(f){this._store.forEach(function(m,n){f(n)})};Object.defineProperty(YC.prototype,"size",{get:function(){return this._store.size}});if(function(){if("undefined"===
typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var f=Object.getOwnPropertyDescriptor(Map,Symbol.species);return f&&"get"in f&&Map[Symbol.species]===Map}()){var fD=Set;var wo=Map}else fD=YC,wo=Tt;var N1=Function.prototype.toString,qha=N1.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var $C=!!localStorage.getItem("_pouch_check_localstorage")}catch(f){$C=!1}Aq(Kz,Wn.EventEmitter);Kz.prototype.addListener=function(f,m,n,a){function d(){if(k._listeners[m])if(b)b=
"waiting";else{b=!0;var e=ZC(a,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));n.changes(e).on("change",function(l){l.seq>a.since&&!a.cancelled&&(a.since=l.seq,a.onChange(l))}).on("complete",function(){"waiting"===b&&hr(d);b=!1}).on("error",function(){b=!1})}}if(!this._listeners[m]){var k=this,b=!1;this._listeners[m]=d;this.on(f,d)}};Kz.prototype.removeListener=function(f,m){m in this._listeners&&(Wn.EventEmitter.prototype.removeListener.call(this,
f,this._listeners[m]),delete this._listeners[m])};Kz.prototype.notifyLocalWindows=function(f){$C&&(localStorage[f]="a"===localStorage[f]?"b":"a")};Kz.prototype.notify=function(f){this.emit(f);this.notifyLocalWindows(f)};var Oz="function"===typeof Object.assign?Object.assign:function(f){for(var m=Object(f),n=1;n<arguments.length;n++){var a=arguments[n];if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(m[d]=a[d])}return m};Aq(nk,Error);nk.prototype.toString=function(){return JSON.stringify({status:this.status,
name:this.name,message:this.message,reason:this.reason})};new nk(401,"unauthorized","Name or password is incorrect.");var Dra=new nk(400,"bad_request","Missing JSON list of 'docs'"),aq=new nk(404,"not_found","missing"),Nz=new nk(409,"conflict","Document update conflict"),U1=new nk(400,"bad_request","_id field must contain a string"),wha=new nk(412,"missing_id","_id is required for puts"),vha=new nk(400,"bad_request","Only reserved document ids may start with underscore.");new nk(412,"precondition_failed",
"Database not open");var S1=new nk(500,"unknown_error","Database encountered an unknown error"),t2=new nk(500,"badarg","Some query argument is invalid");new nk(400,"invalid_request","Request was invalid");var Era=new nk(400,"query_parse_error","Some query parameter is invalid"),s2=new nk(500,"doc_validation","Bad special document member"),FI=new nk(400,"bad_request","Something wrong with the request"),AW=new nk(400,"bad_request","Document must be a JSON object");new nk(404,"not_found","Database not found");
var CR=new nk(500,"indexed_db_went_bad","unknown");new nk(500,"web_sql_went_bad","unknown");new nk(500,"levelDB_went_went_bad","unknown");new nk(403,"forbidden","Forbidden by design doc validate_doc_update function");var q2=new nk(400,"bad_request","Invalid rev format");new nk(412,"file_exists","The database could not be created, the file already exists.");var mia=new nk(412,"missing_stub","A pre-existing attachment stub wasn't found");new nk(413,"invalid_url","Provided URL is invalid");var X1="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),
yha=/(?:^|&)([^&=]*)=?([^&]*)/g,xha=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Eha=Z$.setImmediate||Z$.setTimeout,JI=a2.v4;Aq(aD,Wn.EventEmitter);aD.prototype.cancel=function(){this.isCancelled=!0;this.db.taskqueue.isReady&&this.emit("cancel")};aD.prototype.validateChanges=function(f){var m=f.complete,n=this;pi._changesFilterPlugin?pi._changesFilterPlugin.validate(f,
function(a){if(a)return m(a);n.doChanges(f)}):n.doChanges(f)};aD.prototype.doChanges=function(f){var m=this,n=f.complete;f=Ml(f);"live"in f&&!("continuous"in f)&&(f.continuous=f.live);f.processChange=Mha;"latest"===f.since&&(f.since="now");f.since||(f.since=0);if("now"===f.since)this.db.info().then(function(k){m.isCancelled?n(null,{status:"cancelled"}):(f.since=k.update_seq,m.doChanges(f))},n);else{if(pi._changesFilterPlugin){if(pi._changesFilterPlugin.normalize(f),pi._changesFilterPlugin.shouldFilter(this,
f))return pi._changesFilterPlugin.filter(this,f)}else["doc_ids","filter","selector","view"].forEach(function(k){k in f&&ep("warn",'The "'+k+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in f||(f.descending=!1);f.limit=0===f.limit?1:f.limit;f.complete=n;var a=this.db._changes(f);if(a&&"function"===typeof a.cancel){var d=m.cancel;m.cancel=Jz(function(k){a.cancel();d.apply(this,
k)})}}};Aq(Ek,Wn.EventEmitter);Ek.prototype.post=tl("post",function(f,m,n){"function"===typeof m&&(n=m,m={});if("object"!==typeof f||Array.isArray(f))return n(vi(AW));this.bulkDocs({docs:[f]},m,zR(n,f._id))});Ek.prototype.put=tl("put",function(f,m,n){function a(){var b=f._rev.split("-"),e=b[1];b=parseInt(b[0],10)+1;var l=$1();f._revisions={start:b,ids:[l,e]};f._rev=b+"-"+l;m.new_edits=!1}function d(b){"function"===typeof k._put&&!1!==m.new_edits?k._put(f,m,b):k.bulkDocs({docs:[f]},m,zR(b,f._id))}
"function"===typeof m&&(n=m,m={});if("object"!==typeof f||Array.isArray(f))return n(vi(AW));T1(f._id);if(ww(f._id)&&"function"===typeof this._putLocal)return f._deleted?this._removeLocal(f,n):this._putLocal(f,n);var k=this;m.force&&f._rev?(a(),d(function(b){n(b,b?null:{ok:!0,id:f._id,rev:f._rev})})):d(n)});Ek.prototype.putAttachment=tl("putAttachment",function(f,m,n,a,d){function k(e){var l="_rev"in e?parseInt(e._rev,10):0;e._attachments=e._attachments||{};e._attachments[m]={content_type:d,data:a,
revpos:++l};return b.put(e)}var b=this;"function"===typeof d&&(d=a,a=n,n=null);"undefined"===typeof d&&(d=a,a=n,n=null);d||ep("warn","Attachment",m,"on document",f,"is missing content_type");return b.get(f).then(function(e){if(e._rev!==n)throw vi(Nz);return k(e)},function(e){if(e.reason===aq.message)return k({_id:f});throw e;})});Ek.prototype.removeAttachment=tl("removeAttachment",function(f,m,n,a){var d=this;d.get(f,function(k,b){if(k)a(k);else if(b._rev!==n)a(vi(Nz));else{if(!b._attachments)return a();
delete b._attachments[m];0===Object.keys(b._attachments).length&&delete b._attachments;d.put(b,a)}})});Ek.prototype.remove=tl("remove",function(f,m,n,a){"string"===typeof m?(f={_id:f,_rev:m},"function"===typeof n&&(a=n,n={})):"function"===typeof m?(a=m,n={}):(a=n,n=m);n=n||{};n.was_delete=!0;m={_id:f._id,_rev:f._rev||n.rev,_deleted:!0};if(ww(m._id)&&"function"===typeof this._removeLocal)return this._removeLocal(f,a);this.bulkDocs({docs:[m]},n,zR(a,m._id))});Ek.prototype.revsDiff=tl("revsDiff",function(f,
m,n){function a(l,p){e.has(l)||e.set(l,{missing:[]});e.get(l).missing.push(p)}function d(l,p){var u=f[l].slice(0);vw(p,function(x,z,E,G,J){x=z+"-"+E;z=u.indexOf(x);-1!==z&&(u.splice(z,1),"available"!==J.status&&a(l,x))});u.forEach(function(x){a(l,x)})}"function"===typeof m&&(n=m,m={});var k=Object.keys(f);if(!k.length)return n(null,{});var b=0,e=new wo;k.map(function(l){this._getRevisionTree(l,function(p,u){if(p&&404===p.status&&"missing"===p.message)e.set(l,{missing:f[l]});else{if(p)return n(p);
d(l,u)}if(++b===k.length){var x={};e.forEach(function(z,E){x[E]=z});return n(null,x)}})},this)});Ek.prototype.bulkGet=tl("bulkGet",function(f,m){R1(this,f,m)});Ek.prototype.compactDocument=tl("compactDocument",function(f,m,n){var a=this;this._getRevisionTree(f,function(d,k){if(d)return n(d);var b=Pha(k),e=[],l=[];Object.keys(b).forEach(function(p){b[p]>m&&e.push(p)});vw(k,function(p,u,x,z,E){p=u+"-"+x;"available"===E.status&&-1!==e.indexOf(p)&&l.push(p)});a._doCompaction(f,l,n)})});Ek.prototype.compact=
tl("compact",function(f,m){"function"===typeof f&&(m=f,f={});f=f||{};this._compactionQueue=this._compactionQueue||[];this._compactionQueue.push({opts:f,callback:m});1===this._compactionQueue.length&&g2(this)});Ek.prototype._compact=function(f,m){var n=this,a=[];n.changes({return_docs:!1,last_seq:f.last_seq||0}).on("change",function(d){a.push(n.compactDocument(d.id,0))}).on("complete",function(d){var k=d.last_seq;Promise.all(a).then(function(){return HI(n,"_local/compaction",function(b){return!b.last_seq||
b.last_seq<k?(b.last_seq=k,b):!1})}).then(function(){m(null,{ok:!0})}).catch(m)}).on("error",m)};Ek.prototype.get=tl("get",function(f,m,n){function a(){var l=[],p=d.length;if(!p)return n(null,l);d.forEach(function(u){k.get(f,{rev:u,revs:m.revs,latest:m.latest,attachments:m.attachments,binary:m.binary},function(x,z){if(x)l.push({missing:u});else{x=0;for(var E=l.length;x<E;x++)if(l[x].ok&&l[x].ok._rev===z._rev){var G=!0;break}G||l.push({ok:z})}p--;p||n(null,l)})})}"function"===typeof m&&(n=m,m={});
if("string"!==typeof f)return n(vi(U1));if(ww(f)&&"function"===typeof this._getLocal)return this._getLocal(f,n);var d=[],k=this;if(m.open_revs)if("all"===m.open_revs)this._getRevisionTree(f,function(l,p){if(l)return n(l);d=xR(p).map(function(u){return u.rev});a()});else if(Array.isArray(m.open_revs)){d=m.open_revs;for(var b=0;b<d.length;b++){var e=d[b];if("string"!==typeof e||!/^\d+-/.test(e))return n(vi(q2))}a()}else return n(vi(S1,"function_clause"));else return this._get(f,m,function(l,p){if(l)return l.docId=
f,n(l);var u=p.doc,x=p.metadata,z=p.ctx;m.conflicts&&(p=yR(x),p.length&&(u._conflicts=p));ys(x,u._rev)&&(u._deleted=!0);if(m.revs||m.revs_info){l=u._rev.split("-");p=parseInt(l[0],10);l=l[1];var E=b2(x.rev_tree);x=null;for(var G=0;G<E.length;G++){var J=E[G],K=J.ids.map(function(ka){return ka.id}).indexOf(l);if(K===p-1||!x&&-1!==K)x=J}if(!x)return l=Error("invalid rev tree"),l.docId=f,n(l);p=x.ids.map(function(ka){return ka.id}).indexOf(u._rev.split("-")[1])+1;x.ids.splice(p,x.ids.length-p);x.ids.reverse();
m.revs&&(u._revisions={start:x.pos+x.ids.length-1,ids:x.ids.map(function(ka){return ka.id})});if(m.revs_info){var T=x.pos+x.ids.length;u._revs_info=x.ids.map(function(ka){T--;return{rev:T+"-"+ka.id,status:ka.opts.status}})}}if(m.attachments&&u._attachments){var P=u._attachments,da=Object.keys(P).length;if(0===da)return n(null,u);Object.keys(P).forEach(function(ka){this._getAttachment(u._id,ka,P[ka],{rev:u._rev,binary:m.binary,ctx:z},function(za,Ia){za=u._attachments[ka];za.data=Ia;delete za.stub;
delete za.length;--da||n(null,u)})},k)}else{if(u._attachments)for(var fa in u._attachments)u._attachments.hasOwnProperty(fa)&&(u._attachments[fa].stub=!0);n(null,u)}})});Ek.prototype.getAttachment=tl("getAttachment",function(f,m,n,a){var d=this;n instanceof Function&&(a=n,n={});this._get(f,n,function(k,b){if(k)return a(k);if(b.doc._attachments&&b.doc._attachments[m])n.ctx=b.ctx,n.binary=!0,d._getAttachment(f,m,b.doc._attachments[m],n,a);else return a(vi(aq))})});Ek.prototype.allDocs=tl("allDocs",
function(f,m){"function"===typeof f&&(m=f,f={});f.skip="undefined"!==typeof f.skip?f.skip:0;f.start_key&&(f.startkey=f.start_key);f.end_key&&(f.endkey=f.end_key);if("keys"in f){if(!Array.isArray(f.keys))return m(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(a){return a in f})[0];if(n){m(vi(Era,"Query parameter `"+n+"` is not compatible with multi-get"));return}if(!gr(this)&&(Qha(f),0===f.keys.length))return this._allDocs({limit:0},m)}return this._allDocs(f,
m)});Ek.prototype.changes=function(f,m){"function"===typeof f&&(m=f,f={});f=f||{};f.return_docs="return_docs"in f?f.return_docs:!f.live;return new aD(this,f,m)};Ek.prototype.close=tl("close",function(f){this._closed=!0;this.emit("closed");return this._close(f)});Ek.prototype.info=tl("info",function(f){var m=this;this._info(function(n,a){if(n)return f(n);a.db_name=a.db_name||m.name;a.auto_compaction=!(!m.auto_compaction||gr(m));a.adapter=m.adapter;f(null,a)})});Ek.prototype.id=tl("id",function(f){return this._id(f)});
Ek.prototype.type=function(){return"function"===typeof this._type?this._type():this.adapter};Ek.prototype.bulkDocs=tl("bulkDocs",function(f,m,n){"function"===typeof m&&(n=m,m={});m=m||{};Array.isArray(f)&&(f={docs:f});if(!f||!f.docs||!Array.isArray(f.docs))return n(vi(Dra));for(var a=0;a<f.docs.length;++a)if("object"!==typeof f.docs[a]||Array.isArray(f.docs[a]))return n(vi(AW));var d;f.docs.forEach(function(e){e._attachments&&Object.keys(e._attachments).forEach(function(l){var p;(p=d)||(p="_"===l.charAt(0)?
l+" is not a valid attachment name, attachment names cannot start with '_'":!1);d=p;e._attachments[l].content_type||ep("warn","Attachment",l,"on document",e._id,"is missing content_type")})});if(d)return n(vi(FI,d));"new_edits"in m||(m.new_edits="new_edits"in f?f.new_edits:!0);var k=this;m.new_edits||gr(k)||f.docs.sort(Oha);Nha(f.docs);var b=f.docs.map(function(e){return e._id});return this._bulkDocs(f,m,function(e,l){if(e)return n(e);m.new_edits||(l=l.filter(function(u){return u.error}));if(!gr(k)){e=
0;for(var p=l.length;e<p;e++)l[e].id=l[e].id||b[e]}n(null,l)})});Ek.prototype.registerDependentDatabase=tl("registerDependentDatabase",function(f,m){var n=new this.constructor(f,this.__opts);HI(this,"_local/_pouch_dependentDbs",function(a){a.dependentDbs=a.dependentDbs||{};if(a.dependentDbs[f])return!1;a.dependentDbs[f]=!0;return a}).then(function(){m(null,{db:n})}).catch(m)});Ek.prototype.destroy=tl("destroy",function(f,m){function n(){a._destroy(f,function(k,b){if(k)return m(k);a._destroyed=!0;
a.emit("destroyed");m(null,b||{ok:!0})})}"function"===typeof f&&(m=f,f={});var a=this,d="use_prefix"in a?a.use_prefix:!0;if(gr(a))return n();a.get("_local/_pouch_dependentDbs",function(k,b){if(k)return 404!==k.status?m(k):n();var e=a.constructor;k=Object.keys(b.dependentDbs).map(function(l){l=d?l.replace(new RegExp("^"+e.prefix),""):l;return(new e(l,a.__opts)).destroy()});Promise.all(k).then(n,m)})});bD.prototype.execute=function(){var f;if(this.failed)for(;f=this.queue.shift();)f(this.failed);else for(;f=
this.queue.shift();)f()};bD.prototype.fail=function(f){this.failed=f;this.execute()};bD.prototype.ready=function(f){this.isReady=!0;this.db=f;this.execute()};bD.prototype.addTask=function(f){this.queue.push(f);this.failed&&this.execute()};Aq(pi,Ek);var Aia="undefined"!==typeof AbortController?AbortController:function(){return{abort:function(){}}},C2=fetch,Qz=Headers;pi.adapters={};pi.preferredAdapters=[];pi.prefix="_pouch_";var $$=new Wn.EventEmitter;(function(f){Object.keys(Wn.EventEmitter.prototype).forEach(function(n){"function"===
typeof Wn.EventEmitter.prototype[n]&&(f[n]=$$[n].bind($$))});var m=f._destructionListeners=new wo;f.on("ref",function(n){m.has(n.name)||m.set(n.name,[]);m.get(n.name).push(n)});f.on("unref",function(n){if(m.has(n.name)){var a=m.get(n.name),d=a.indexOf(n);0>d||(a.splice(d,1),1<a.length?m.set(n.name,a):m.delete(n.name))}});f.on("destroyed",function(n){if(m.has(n)){var a=m.get(n);m.delete(n);a.forEach(function(d){d.emit("destroyed",!0)})}})})(pi);pi.adapter=function(f,m,n){m.valid()&&(pi.adapters[f]=
m,n&&pi.preferredAdapters.push(f))};pi.plugin=function(f){if("function"===typeof f)f(pi);else{if("object"!==typeof f||0===Object.keys(f).length)throw Error('Invalid plugin: got "'+f+'", expected an object or a function');Object.keys(f).forEach(function(m){pi.prototype[m]=f[m]})}this.__defaults&&(pi.__defaults=Oz({},this.__defaults));return pi};pi.defaults=function(f){function m(n,a){if(!(this instanceof m))return new m(n,a);a=a||{};n&&"object"===typeof n&&(a=n,n=a.name,delete a.name);a=Oz({},m.__defaults,
a);pi.call(this,n,a)}Aq(m,pi);m.preferredAdapters=pi.preferredAdapters.slice();Object.keys(pi).forEach(function(n){n in m||(m[n]=pi[n])});m.__defaults=Oz({},this.__defaults,f);return m};pi.fetch=function(f,m){return C2(f,m)};var j2=["$or","$nor","$not"],m2={$elemMatch:function(f,m,n,a){return Array.isArray(a)&&0!==a.length?"object"===typeof a[0]?a.some(function(d){return Mz(d,m,Object.keys(m))}):a.some(function(d){return BR(m,f,n,d)}):!1},$allMatch:function(f,m,n,a){return Array.isArray(a)&&0!==a.length?
"object"===typeof a[0]?a.every(function(d){return Mz(d,m,Object.keys(m))}):a.every(function(d){return BR(m,f,n,d)}):!1},$eq:function(f,m,n,a){return yw(a)&&0===im(a,m)},$gte:function(f,m,n,a){return yw(a)&&0<=im(a,m)},$gt:function(f,m,n,a){return yw(a)&&0<im(a,m)},$lte:function(f,m,n,a){return yw(a)&&0>=im(a,m)},$lt:function(f,m,n,a){return yw(a)&&0>im(a,m)},$exists:function(f,m,n,a){return m?yw(a):!yw(a)},$mod:function(f,m,n,a){if(f=dD(a)){f=m[0];m=m[1];if(0===f)throw Error("Bad divisor, cannot divide by zero");
if(parseInt(f,10)!==f)throw Error("Divisor is not an integer");if(parseInt(m,10)!==m)throw Error("Modulus is not an integer");f=parseInt(a,10)!==a?!1:a%f===m}return f},$ne:function(f,m,n,a){return m.every(function(d){return 0!==im(a,d)})},$in:function(f,m,n,a){return dD(a)&&n2(a,m)},$nin:function(f,m,n,a){return dD(a)&&!n2(a,m)},$size:function(f,m,n,a){return dD(a)&&a.length===m},$all:function(f,m,n,a){return Array.isArray(a)&&Zha(a,m)},$regex:function(f,m,n,a){if(f=dD(a))f=(new RegExp(m)).test(a);
return f},$type:function(f,m,n,a){return $ha(a,m)}};pi.plugin(function(f){f._changesFilterPlugin={validate:aia,normalize:bia,shouldFilter:cia,filter:dia}});pi.version="7.2.1";var eia=o2("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),fia=o2("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" ")),
eD=new Kz,FR=!1,GR=[],Pz=new wo,IR,HR=new wo;A2.valid=function(){return"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange};var LR={};KR.valid=function(){return!0};Aq(Bw,Error);Aq(OI,Error);Aq(PI,Error);var Dia=ep.bind(null,"log"),Eia=Array.isArray,Fia=JSON.parse;gD.prototype.add=function(f){return this.promise=this.promise.catch(function(){}).then(function(){return f()})};gD.prototype.finish=function(){return this.promise};var aaa={},baa=new gD,Fra=function(f,m){return OR(m)},Gra=function(f,
m){return m.length},Hra=function(f,m){f=OR(m);for(var n=Math.min.apply(null,m),a=Math.max.apply(null,m),d=m.length,k=0,b=0,e=m.length;b<e;b++){var l=m[b];k+=l*l}return{sum:f,min:n,max:a,count:d,sumsqr:k}},caa=function(f,m,n,a){function d(la,Aa,ib,ob,Ea){try{return{output:Aa(ib,ob,Ea)}}catch(ua){return J2(la,ua),{error:ua}}}function k(la,Aa){var ib=im(la.key,Aa.key);return 0!==ib?ib:im(la.value,Aa.value)}function b(la,Aa,ib){ib=ib||0;return"number"===typeof Aa?la.slice(ib,Aa+ib):0<ib?la.slice(ib):
la}function e(la){var Aa=la.value;return Aa&&"object"===typeof Aa&&Aa._id||la.id}function l(la){la.rows.forEach(function(Aa){var ib=Aa.doc&&Aa.doc._attachments;ib&&Object.keys(ib).forEach(function(ob){var Ea=ib[ob];ib[ob].data=uR(Ea.data,Ea.content_type)})})}function p(la){return function(Aa){la.include_docs&&la.attachments&&la.binary&&l(Aa);return Aa}}function u(la,Aa,ib,ob){Aa=Aa[la];"undefined"!==typeof Aa&&(ob&&(Aa=encodeURIComponent(JSON.stringify(Aa))),ib.push(la+"="+Aa))}function x(la){if("undefined"!==
typeof la){var Aa=Number(la);return isNaN(Aa)||Aa!==parseInt(la,10)?la:Aa}}function z(la){la.group_level=x(la.group_level);la.limit=x(la.limit);la.skip=x(la.skip);return la}function E(la,Aa){var ib=la.descending?"endkey":"startkey",ob=la.descending?"startkey":"endkey";if("undefined"!==typeof la[ib]&&"undefined"!==typeof la[ob]&&0<im(la[ib],la[ob]))throw new Bw("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(Aa.reduce&&!1!==la.reduce){if(la.include_docs)throw new Bw("{include_docs:true} is invalid for reduce");
if(la.keys&&1<la.keys.length&&!la.group&&!la.group_level)throw new Bw("Multi-key fetches for reduce views must use {group: true}");}["group_level","limit","skip"].forEach(function(Ea){a:{if(Ea=la[Ea]){if("number"!==typeof Ea){Ea=new Bw('Invalid value for integer: "'+Ea+'"');break a}if(0>Ea){Ea=new Bw('Invalid value for positive integer: "'+Ea+'"');break a}}Ea=void 0}if(Ea)throw Ea;})}function G(la,Aa,ib){var ob=[],Ea,ua="GET",ya,Sa;u("reduce",ib,ob);u("include_docs",ib,ob);u("attachments",ib,ob);
u("limit",ib,ob);u("descending",ib,ob);u("group",ib,ob);u("group_level",ib,ob);u("skip",ib,ob);u("stale",ib,ob);u("conflicts",ib,ob);u("startkey",ib,ob,!0);u("start_key",ib,ob,!0);u("endkey",ib,ob,!0);u("end_key",ib,ob,!0);u("inclusive_end",ib,ob);u("key",ib,ob,!0);u("update_seq",ib,ob);ob=ob.join("&");ob=""===ob?"":"?"+ob;if("undefined"!==typeof ib.keys){var Qb="keys="+encodeURIComponent(JSON.stringify(ib.keys));2E3>=Qb.length+ob.length+1?ob+=("?"===ob[0]?"&":"?")+Qb:(ua="POST","string"===typeof Aa?
Ea={keys:ib.keys}:Aa.keys=ib.keys)}if("string"===typeof Aa)return Qb=PR(Aa),la.fetch("_design/"+Qb[0]+"/_view/"+Qb[1]+ob,{headers:new Qz({"Content-Type":"application/json"}),method:ua,body:JSON.stringify(Ea)}).then(function(mc){ya=mc.ok;Sa=mc.status;return mc.json()}).then(function(mc){if(!ya)throw mc.status=Sa,Lz(mc);mc.rows.forEach(function(Yb){if(Yb.value&&Yb.value.error&&"builtin_reduce_error"===Yb.value.error)throw Error(Yb.reason);});return mc}).then(p(ib));Ea=Ea||{};Object.keys(Aa).forEach(function(mc){Array.isArray(Aa[mc])?
Ea[mc]=Aa[mc]:Ea[mc]=Aa[mc].toString()});return la.fetch("_temp_view"+ob,{headers:new Qz({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(Ea)}).then(function(mc){ya=mc.ok;Sa=mc.status;return mc.json()}).then(function(mc){if(!ya)throw mc.status=Sa,Lz(mc);return mc}).then(p(ib))}function J(la,Aa,ib){return new Promise(function(ob,Ea){la._query(Aa,ib,function(ua,ya){if(ua)return Ea(ua);ob(ya)})})}function K(la){return new Promise(function(Aa,ib){la._viewCleanup(function(ob,Ea){if(ob)return ib(ob);
Aa(Ea)})})}function T(la){return function(Aa){if(404===Aa.status)return la;throw Aa;}}function P(la,Aa,ib){function ob(Sa,Qb){for(var mc=[],Yb=new fD,fc=0,Jc=Qb.rows.length;fc<Jc;fc++){var Nb=Qb.rows[fc].doc;if(Nb&&(mc.push(Nb),Yb.add(Nb._id),Nb._deleted=!ya.has(Nb._id),!Nb._deleted)){var ld=ya.get(Nb._id);"value"in ld&&(Nb.value=ld.value)}}Qb=NR(ya);Qb.forEach(function(Od){if(!Yb.has(Od)){var ta={_id:Od};Od=ya.get(Od);"value"in Od&&(ta.value=Od.value);mc.push(ta)}});Sa.keys=E2(Qb.concat(Sa.keys));
mc.push(Sa);return mc}var Ea="_local/doc_"+la,ua={_id:Ea,keys:[]};la=ib.get(la);var ya=la[0];Ea=Hia(la[1])?Promise.resolve(ua):Aa.db.get(Ea).catch(T(ua));return Ea.then(function(Sa){return(Sa.keys.length?Aa.db.allDocs({keys:Sa.keys,include_docs:!0}):Promise.resolve({rows:[]})).then(function(Qb){return ob(Sa,Qb)})})}function da(la,Aa,ib){return la.db.get("_local/lastSeq").catch(T({_id:"_local/lastSeq",seq:0})).then(function(ob){var Ea=NR(Aa);return Promise.all(Ea.map(function(ua){return P(ua,la,Aa)})).then(function(ua){ua=
GI(ua);ob.seq=ib;ua.push(ob);return la.db.bulkDocs({docs:ua})})})}function fa(la){la="string"===typeof la?la:la.name;var Aa=aaa[la];Aa||(Aa=aaa[la]=new gD);return Aa}function ka(la){return MR(fa(la),function(){return za(la)})()}function za(la){function Aa(mc,Yb){return function(){return da(la,mc,Yb)}}function ib(){return la.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:Sa,limit:50}).then(ob)}function ob(mc){mc=mc.results;if(mc.length){for(var Yb=new wo,fc=0,
Jc=mc.length;fc<Jc;fc++){var Nb=mc[fc];if("_"!==Nb.doc._id[0]){Ea=[];ua=Nb.doc;if(!ua._deleted){var ld=la.sourceDB;try{ya(ua)}catch(Bd){J2(ld,Bd)}}Ea.sort(k);ld=void 0;for(var Od=Ea,ta=new wo,Pa=0,Ra=Od.length;Pa<Ra;Pa++){var Cb=Od[Pa],ec=[Cb.key,Cb.id];0<Pa&&0===im(Cb.key,ld)&&ec.push(Pa);ta.set($p(ec),Cb);ld=Cb.key}Yb.set(Nb.doc._id,[ta,Nb.changes])}Sa=Nb.seq}Qb.add(Aa(Yb,Sa));if(!(50>mc.length))return ib()}}var Ea,ua,ya=m(la.mapFun,function(mc,Yb){mc={id:ua._id,key:xw(mc)};"undefined"!==typeof Yb&&
null!==Yb&&(mc.value=xw(Yb));Ea.push(mc)}),Sa=la.seq||0,Qb=new gD;return ib().then(function(){return Qb.finish()}).then(function(){la.seq=Sa})}function Ia(la,Aa,ib){0===ib.group_level&&delete ib.group_level;var ob=ib.group||ib.group_level,Ea=n(la.reduceFun),ua=[],ya=isNaN(ib.group_level)?Number.POSITIVE_INFINITY:ib.group_level;Aa.forEach(function(fc){var Jc=ua[ua.length-1],Nb=ob?fc.key:null;ob&&Array.isArray(Nb)&&(Nb=Nb.slice(0,ya));Jc&&0===im(Jc.groupKey,Nb)?(Jc.keys.push([fc.key,fc.id]),Jc.values.push(fc.value)):
ua.push({keys:[[fc.key,fc.id]],values:[fc.value],groupKey:Nb})});Aa=[];for(var Sa=0,Qb=ua.length;Sa<Qb;Sa++){var mc=ua[Sa],Yb=d(la.sourceDB,Ea,mc.keys,mc.values,!1);if(Yb.error&&Yb.error instanceof PI)throw Yb.error;Aa.push({value:Yb.error?null:Yb.output,key:mc.groupKey})}return{rows:b(Aa,ib.limit,ib.skip)}}function N(la,Aa){return MR(fa(la),function(){return ia(la,Aa)})()}function ia(la,Aa){function ib(Yb){Yb.include_docs=!0;return la.db.allDocs(Yb).then(function(fc){Ea=fc.total_rows;return fc.rows.map(function(Jc){if("value"in
Jc.doc&&"object"===typeof Jc.doc.value&&null!==Jc.doc.value){var Nb=Object.keys(Jc.doc.value).sort(),ld=["id","key","value"];if(!(Nb<ld||Nb>ld))return Jc.doc.value}a:{Nb=Jc.doc._id;ld=[];for(var Od=[],ta=0;;){var Pa=Nb[ta++];if("\x00"===Pa)if(1===ld.length){Nb=ld.pop();break a}else{var Ra=ld;var Cb=Od;Pa=Ra.pop();if(Cb.length){var ec=Cb[Cb.length-1];Pa===ec.element&&(Cb.pop(),ec=Cb[Cb.length-1]);Cb=ec.element;ec=ec.index;Array.isArray(Cb)?Cb.push(Pa):ec===Ra.length-2?(Ra=Ra.pop(),Cb[Ra]=Pa):Ra.push(Pa)}continue}switch(Pa){case "1":ld.push(null);
break;case "2":ld.push("1"===Nb[ta]);ta++;break;case "3":ec=Nb;Ra=Pa=ta;if("1"===ec[Pa])ec=0,Pa++;else{Cb="0"===ec[Pa];Pa++;var Bd="",Ad=ec.substring(Pa,Pa+3);Ad=parseInt(Ad,10)+-324;Cb&&(Ad=-Ad);for(Pa+=3;;){var Mc=ec[Pa];if("\x00"===Mc)break;else Bd+=Mc;Pa++}Bd=Bd.split(".");ec=1===Bd.length?parseInt(Bd,10):parseFloat(Bd[0]+"."+Bd[1]);Cb&&(ec-=10);0!==Ad&&(ec=parseFloat(ec+"e"+Ad))}Cb=ec;Pa-=Ra;ld.push(Cb);ta+=Pa;break;case "4":for(Pa="";;){Ra=Nb[ta];if("\x00"===Ra)break;Pa+=Ra;ta++}Pa=Pa.replace(/\u0001\u0001/g,
"\x00").replace(/\u0001\u0002/g,"\u0001").replace(/\u0002\u0002/g,"\u0002");ld.push(Pa);break;case "5":Pa={element:[],index:ld.length};ld.push(Pa.element);Od.push(Pa);break;case "6":Pa={element:{},index:ld.length};ld.push(Pa.element);Od.push(Pa);break;default:throw Error("bad collationIndex or unexpectedly reached end of input: "+Pa);}}}return{key:Nb[0],id:Nb[1],value:"value"in Jc.doc?Jc.doc.value:null}})})}function ob(Yb){var fc=ua?Ia(la,Yb,Aa):{total_rows:Ea,offset:ya,rows:Yb};Aa.update_seq&&(fc.update_seq=
la.seq);if(Aa.include_docs){var Jc=E2(Yb.map(e));return la.sourceDB.allDocs({keys:Jc,include_docs:!0,conflicts:Aa.conflicts,attachments:Aa.attachments,binary:Aa.binary}).then(function(Nb){var ld=new wo;Nb.rows.forEach(function(Od){ld.set(Od.id,Od.doc)});Yb.forEach(function(Od){var ta=e(Od);if(ta=ld.get(ta))Od.doc=ta});return fc})}return fc}var Ea,ua=la.reduceFun&&!1!==Aa.reduce,ya=Aa.skip||0;"undefined"===typeof Aa.keys||Aa.keys.length||(Aa.limit=0,delete Aa.keys);if("undefined"!==typeof Aa.keys){var Sa=
Aa.keys.map(function(Yb){Yb={startkey:$p([Yb]),endkey:$p([Yb,{}])};Aa.update_seq&&(Yb.update_seq=!0);return ib(Yb)});return Promise.all(Sa).then(GI).then(ob)}Sa={descending:Aa.descending};Aa.update_seq&&(Sa.update_seq=!0);if("start_key"in Aa)var Qb=Aa.start_key;"startkey"in Aa&&(Qb=Aa.startkey);if("end_key"in Aa)var mc=Aa.end_key;"endkey"in Aa&&(mc=Aa.endkey);"undefined"!==typeof Qb&&(Sa.startkey=Aa.descending?$p([Qb,{}]):$p([Qb]));"undefined"!==typeof mc&&(Qb=!1!==Aa.inclusive_end,Aa.descending&&
(Qb=!Qb),Sa.endkey=$p(Qb?[mc,{}]:[mc]));"undefined"!==typeof Aa.key&&(mc=$p([Aa.key]),Qb=$p([Aa.key,{}]),Sa.descending?(Sa.endkey=mc,Sa.startkey=Qb):(Sa.startkey=mc,Sa.endkey=Qb));ua||("number"===typeof Aa.limit&&(Sa.limit=Aa.limit),Sa.skip=ya);return ib(Sa).then(ob)}function W(la){return la.fetch("_view_cleanup",{headers:new Qz({"Content-Type":"application/json"}),method:"POST"}).then(function(Aa){return Aa.json()})}function ca(la){return la.get("_local/"+f).then(function(Aa){var ib=new wo;Object.keys(Aa.views).forEach(function(Ea){var ua=
PR(Ea);Ea="_design/"+ua[0];ua=ua[1];var ya=ib.get(Ea);ya||(ya=new fD,ib.set(Ea,ya));ya.add(ua)});var ob={keys:NR(ib),include_docs:!0};return la.allDocs(ob).then(function(Ea){var ua={};Ea.rows.forEach(function(ya){var Sa=ya.key.substring(8);ib.get(ya.key).forEach(function(Qb){var mc=Sa+"/"+Qb;Aa.views[mc]||(mc=Qb);mc=Object.keys(Aa.views[mc]);var Yb=ya.doc&&ya.doc.views&&ya.doc.views[Qb];mc.forEach(function(fc){ua[fc]=ua[fc]||Yb})})});Ea=Object.keys(ua).filter(function(ya){return!ua[ya]}).map(function(ya){return MR(fa(ya),
function(){return(new la.constructor(ya,la.__opts)).destroy()})()});return Promise.all(Ea).then(function(){return{ok:!0}})})},T({ok:!0}))}function sa(la,Aa,ib){if("function"===typeof la._query)return J(la,Aa,ib);if(gr(la))return G(la,Aa,ib);if("string"!==typeof Aa)return E(ib,Aa),baa.add(function(){return I2(la,"temp_view/temp_view",Aa.map,Aa.reduce,!0,f).then(function(ua){return Cia(ka(ua).then(function(){return N(ua,ib)}),function(){return ua.db.destroy()})})}),baa.finish();var ob=PR(Aa),Ea=ob[1];
return la.get("_design/"+ob[0]).then(function(ua){var ya=ua.views&&ua.views[Ea];if(!ya)throw new OI("ddoc "+ua._id+" has no view named "+Ea);a(ua,Ea);E(ib,ya);return I2(la,Aa,ya.map,ya.reduce,!1,f).then(function(Sa){return"ok"===ib.stale||"update_after"===ib.stale?("update_after"===ib.stale&&hr(function(){ka(Sa)}),N(Sa,ib)):ka(Sa).then(function(){return N(Sa,ib)})})})}return{query:function(la,Aa,ib){var ob=this;"function"===typeof Aa&&(ib=Aa,Aa={});Aa=Aa?z(Aa):{};"function"===typeof la&&(la={map:la});
var Ea=Promise.resolve().then(function(){return sa(ob,la,Aa)});D2(Ea,ib);return Ea},viewCleanup:Bia(function(){return"function"===typeof this._viewCleanup?K(this):gr(this)?W(this):ca(this)})}}("mrviews",function(f,m){return"function"===typeof f&&2===f.length?function(n){return f(n,m)}:G2(f.toString(),m)},function(f){f=f.toString();if(/^_sum/.test(f))var m=Fra;else if(/^_count/.test(f))m=Gra;else if(/^_stats/.test(f))m=Hra;else{if(/^_/.test(f))throw Error(f+" is not a supported reduce function.");
m=void 0}return m?m:G2(f)},function(f,m){var n=f.views&&f.views[m];if("string"!==typeof n.map)throw new OI("ddoc "+f._id+" has no string view named "+m+", instead found object of type: "+typeof n.map);});hD.prototype.writeCheckpoint=function(f,m){var n=this;return this.updateTarget(f,m).then(function(){return n.updateSource(f,m)})};hD.prototype.updateTarget=function(f,m){return this.opts.writeTargetCheckpoint?QR(this.target,this.id,f,m,this.returnValue):Promise.resolve(!0)};hD.prototype.updateSource=
function(f,m){if(this.opts.writeSourceCheckpoint){var n=this;return QR(this.src,this.id,f,m,this.returnValue).catch(function(a){if(M2(a))return n.opts.writeSourceCheckpoint=!1,!0;throw a;})}return Promise.resolve(!0)};var daa={undefined:function(f,m){return 0===im(f.last_seq,m.last_seq)?m.last_seq:0},1:function(f,m){f=m.session_id===f.session_id?{last_seq:m.last_seq,history:m.history}:L2(m.history,f.history);return f.last_seq}};hD.prototype.getCheckpoint=function(){var f=this;return f.opts&&f.opts.writeSourceCheckpoint&&
!f.opts.writeTargetCheckpoint?f.src.get(f.id).then(function(m){return m.last_seq||0}).catch(function(m){if(404!==m.status)throw m;return 0}):f.target.get(f.id).then(function(m){return f.opts&&f.opts.writeTargetCheckpoint&&!f.opts.writeSourceCheckpoint?m.last_seq||0:f.src.get(f.id).then(function(n){if(m.version!==n.version)return 0;var a=m.version?m.version.toString():"undefined";return a in daa?daa[a](m,n):0},function(n){if(404===n.status&&m.last_seq)return f.src.put({_id:f.id,last_seq:0}).then(function(){return 0},
function(a){return M2(a)?(f.opts.writeSourceCheckpoint=!1,m.last_seq):0});throw n;})}).catch(function(m){if(404!==m.status)throw m;return 0})};Aq(QI,Wn.EventEmitter);QI.prototype.cancel=function(){this.cancelled=!0;this.state="cancelled";this.emit("cancel")};QI.prototype.ready=function(f,m){function n(){a.cancel()}var a=this;a._readyCalled||(a._readyCalled=!0,f.once("destroyed",n),m.once("destroyed",n),a.once("complete",function(){f.removeListener("destroyed",n);m.removeListener("destroyed",n)}))};
Aq(TR,Wn.EventEmitter);TR.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())};pi.plugin(function(f){f.adapter("idb",A2,!0)}).plugin(function(f){f.adapter("http",KR,!1);f.adapter("https",KR,!1)}).plugin({query:function(f,m,n){return caa.query.call(this,f,m,n)},viewCleanup:function(f){return caa.viewCleanup.call(this,f)}}).plugin(function(f){f.replicate=SR;f.sync=Oia;Object.defineProperty(f.prototype,"replicate",{get:function(){var m=this;"undefined"===
typeof this.replicateMethods&&(this.replicateMethods={from:function(n,a,d){return m.constructor.replicate(n,m,a,d)},to:function(n,a,d){return m.constructor.replicate(m,n,a,d)}});return this.replicateMethods}});f.prototype.sync=function(m,n,a){return this.constructor.sync(this,m,n,a)}});var Ira=Cra=pi,Nu={};Object.defineProperty(Nu,"__esModule",{value:!0});Ut.prototype.get=function(f){return this._store["$"+f]};Ut.prototype.set=function(f,m){this._store["$"+f]=m;return!0};Ut.prototype.has=function(f){return"$"+
f in this._store};Ut.prototype.delete=function(f){f="$"+f;var m=f in this._store;delete this._store[f];return m};Ut.prototype.forEach=function(f){for(var m=Object.keys(this._store),n=0,a=m.length;n<a;n++){var d=m[n],k=this._store[d];d=d.substring(1);f(k,d)}};Object.defineProperty(Ut.prototype,"size",{get:function(){return Object.keys(this._store).length}});iD.prototype.add=function(f){return this._store.set(f,!0)};iD.prototype.has=function(f){return this._store.has(f)};iD.prototype.forEach=function(f){this._store.forEach(function(m,
n){f(n)})};Object.defineProperty(iD.prototype,"size",{get:function(){return this._store.size}});(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var f=Object.getOwnPropertyDescriptor(Map,Symbol.species);return f&&"get"in f&&Map[Symbol.species]===Map})()?(Nu.Set=Set,Nu.Map=Map):(Nu.Set=iD,Nu.Map=Ut);var BW={},CW=Li;BW.test=function(){return"undefined"!==typeof CW&&!CW.browser};BW.install=function(f){return function(){CW.nextTick(f)}};var eaa="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,DW="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,EW={},faa=DW.MutationObserver||DW.WebKitMutationObserver;EW.test=function(){return faa};EW.install=function(f){var m=0;f=new faa(f);var n=DW.document.createTextNode("");f.observe(n,{characterData:!0});return function(){n.data=m=++m%2}};var FW="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,VM="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Jra={},bF=[BW,{test:function(){return"function"===typeof eaa.queueMicrotask},install:function(f){return function(){eaa.queueMicrotask(f)}}},EW,{test:function(){return FW.setImmediate?!1:"undefined"!==typeof FW.MessageChannel},install:function(f){var m=new FW.MessageChannel;m.port1.onmessage=f;return function(){m.port2.postMessage(0)}}},{test:function(){return"document"in VM&&"onreadystatechange"in VM.document.createElement("script")},install:function(f){return function(){var m=
VM.document.createElement("script");m.onreadystatechange=function(){f();m.onreadystatechange=null;m.parentNode.removeChild(m);m=null};VM.document.documentElement.appendChild(m);return f}}},{test:function(){return!0},install:function(f){return function(){setTimeout(f,0)}}}],Rz,Cw,jD=-1,Vt=[],UR=!1,cF=-1,Kra=bF.length;for(;++cF<Kra;)if(bF[cF]&&bF[cF].test&&bF[cF].test()){var Lra=bF[cF].install(O2);break}P2.prototype.run=function(){var f=this.fun,m=this.array;switch(m.length){case 0:return f();case 1:return f(m[0]);
case 2:return f(m[0],m[1]);case 3:return f(m[0],m[1],m[2]);default:return f.apply(null,m)}};var qj=Jra=function(f){var m=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)m[n-1]=arguments[n];Vt.push(new P2(f,m));UR||Rz||(UR=!0,Lra())},Dg={};Object.defineProperty(Dg,"__esModule",{value:!0});(Gk&&"object"===typeof Gk&&"default"in Gk?Gk["default"]:Gk)(ok,Error);ok.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,
reason:this.reason})};var Mra=new ok(401,"unauthorized","Name or password is incorrect."),Nra=new ok(400,"bad_request","Missing JSON list of 'docs'"),Ora=new ok(404,"not_found","missing"),Pra=new ok(409,"conflict","Document update conflict"),Qra=new ok(400,"bad_request","_id field must contain a string"),Rra=new ok(412,"missing_id","_id is required for puts"),Sra=new ok(400,"bad_request","Only reserved document ids may start with underscore."),Tra=new ok(412,"precondition_failed","Database not open"),
gaa=new ok(500,"unknown_error","Database encountered an unknown error"),Ura=new ok(500,"badarg","Some query argument is invalid"),Vra=new ok(400,"invalid_request","Request was invalid"),Wra=new ok(400,"query_parse_error","Some query parameter is invalid"),Xra=new ok(500,"doc_validation","Bad special document member"),Yra=new ok(400,"bad_request","Something wrong with the request"),Zra=new ok(400,"bad_request","Document must be a JSON object"),$ra=new ok(404,"not_found","Database not found"),asa=new ok(500,
"indexed_db_went_bad","unknown"),bsa=new ok(500,"web_sql_went_bad","unknown"),csa=new ok(500,"levelDB_went_went_bad","unknown"),dsa=new ok(403,"forbidden","Forbidden by design doc validate_doc_update function"),esa=new ok(400,"bad_request","Invalid rev format"),fsa=new ok(412,"file_exists","The database could not be created, the file already exists."),gsa=new ok(412,"missing_stub","A pre-existing attachment stub wasn't found"),hsa=new ok(413,"invalid_url","Provided URL is invalid");Dg.UNAUTHORIZED=
Mra;Dg.MISSING_BULK_DOCS=Nra;Dg.MISSING_DOC=Ora;Dg.REV_CONFLICT=Pra;Dg.INVALID_ID=Qra;Dg.MISSING_ID=Rra;Dg.RESERVED_ID=Sra;Dg.NOT_OPEN=Tra;Dg.UNKNOWN_ERROR=gaa;Dg.BAD_ARG=Ura;Dg.INVALID_REQUEST=Vra;Dg.QUERY_PARSE_ERROR=Wra;Dg.DOC_VALIDATION=Xra;Dg.BAD_REQUEST=Yra;Dg.NOT_AN_OBJECT=Zra;Dg.DB_MISSING=$ra;Dg.WSQ_ERROR=bsa;Dg.LDB_ERROR=csa;Dg.FORBIDDEN=dsa;Dg.INVALID_REV=esa;Dg.FILE_EXISTS=fsa;Dg.MISSING_STUB=gsa;Dg.IDB_ERROR=asa;Dg.INVALID_URL=hsa;Dg.createError=function(f,m){function n(a){for(var d=
Object.getOwnPropertyNames(f),k=0,b=d.length;k<b;k++)"function"!==typeof f[d[k]]&&(this[d[k]]=f[d[k]]);void 0!==a&&(this.reason=a)}n.prototype=ok.prototype;return new n(m)};Dg.generateErrorFromResponse=function(f){if("object"!==typeof f){var m=f;f=gaa;f.data=m}"error"in f&&"conflict"===f.error&&(f.name="conflict",f.status=409);"name"in f||(f.name=f.error||"unknown");"status"in f||(f.status=500);"message"in f||(f.message=f.message||f.reason);return f};var isa="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,
GW=Object.prototype.toString,WM=function(f){return!(isa&&f&&"object"==typeof f&&Symbol.toStringTag in f)&&"[object Arguments]"===GW.call(f)},haa=function(f){return!!WM(f)||null!==f&&"object"==typeof f&&"number"==typeof f.length&&0<=f.length&&"[object Array]"!==GW.call(f)&&"[object Function]"===GW.call(f.callee)},jsa=function(){return WM(arguments)}();WM.isLegacyArguments=haa;var ksa=jsa?WM:haa,lsa=Object.prototype.toString,msa=Function.prototype.toString,nsa=/^\s*(?:function)?\*/,iaa="function"==
typeof Symbol&&"symbol"==typeof Symbol.toStringTag,jaa=Object.getPrototypeOf;a:if(iaa){try{var XM=Function("return function*() {}")();break a}catch(f){}XM=void 0}else XM=!1;var osa=XM?jaa(XM):{},$h="function"==typeof Object.create?function(f,m){m&&(f.super_=m,f.prototype=Object.create(m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:function(f,m){if(m){f.super_=m;var n=function(){};n.prototype=m.prototype;f.prototype=new n;f.prototype.constructor=f}},kaa=function(f){return f&&
"object"==typeof f&&"function"==typeof f.copy&&"function"==typeof f.fill&&"function"==typeof f.readUInt8},Ri={},Qia=kaa,i3="undefined"!=typeof BigInt,WR="undefined"!=typeof Symbol,xo=WR&&void 0!==Symbol.toStringTag,Xn="undefined"!=typeof Uint8Array,psa="undefined"!=typeof ArrayBuffer;if(Xn&&xo)var qsa=Object.getPrototypeOf(Uint8Array.prototype),fp=Dw(Object.getOwnPropertyDescriptor(qsa,Symbol.toStringTag).get);var Qk=Dw(Object.prototype.toString),Ria=Dw(Number.prototype.valueOf),Sia=Dw(String.prototype.valueOf),
Tia=Dw(Boolean.prototype.valueOf);if(i3)var Uia=Dw(BigInt.prototype.valueOf);if(WR)var Via=Dw(Symbol.prototype.valueOf);Ri.isArgumentsObject=ksa;Ri.isGeneratorFunction=function(f){return"function"==typeof f&&(!!nsa.test(msa.call(f))||(iaa?jaa(f)===osa:"[object GeneratorFunction]"===lsa.call(f)))};Ri.isPromise=function(f){return"undefined"!=typeof Promise&&f instanceof Promise||null!==f&&"object"==typeof f&&"function"==typeof f.then&&"function"==typeof f.catch};Ri.isArrayBufferView=function(f){return psa&&
ArrayBuffer.isView?ArrayBuffer.isView(f):Q2(f)||c3(f)};Ri.isTypedArray=Q2;Ri.isUint8Array=R2;Ri.isUint8ClampedArray=S2;Ri.isUint16Array=T2;Ri.isUint32Array=U2;Ri.isInt8Array=V2;Ri.isInt16Array=W2;Ri.isInt32Array=X2;Ri.isFloat32Array=Y2;Ri.isFloat64Array=Z2;Ri.isBigInt64Array=$2;Ri.isBigUint64Array=a3;SI.working="undefined"!=typeof Map&&SI(new Map);Ri.isMap=function(f){return"undefined"!=typeof Map&&(SI.working?SI(f):f instanceof Map)};TI.working="undefined"!=typeof Set&&TI(new Set);Ri.isSet=function(f){return"undefined"!=
typeof Set&&(TI.working?TI(f):f instanceof Set)};UI.working="undefined"!=typeof WeakMap&&UI(new WeakMap);Ri.isWeakMap=function(f){return"undefined"!=typeof WeakMap&&(UI.working?UI(f):f instanceof WeakMap)};VR.working="undefined"!=typeof WeakSet&&VR(new WeakSet);Ri.isWeakSet=function(f){return VR(f)};VI.working="undefined"!=typeof ArrayBuffer&&VI(new ArrayBuffer);Ri.isArrayBuffer=b3;WI.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&WI(new DataView(new ArrayBuffer(1),0,1));Ri.isDataView=
c3;XI.working="undefined"!=typeof SharedArrayBuffer&&XI(new SharedArrayBuffer);Ri.isSharedArrayBuffer=d3;Ri.isAsyncFunction=function(f){return"[object AsyncFunction]"===Qk(f)};Ri.isMapIterator=function(f){return"[object Map Iterator]"===Qk(f)};Ri.isSetIterator=function(f){return"[object Set Iterator]"===Qk(f)};Ri.isGeneratorObject=function(f){return"[object Generator]"===Qk(f)};Ri.isWebAssemblyCompiledModule=function(f){return"[object WebAssembly.Module]"===Qk(f)};Ri.isNumberObject=e3;Ri.isStringObject=
f3;Ri.isBooleanObject=g3;Ri.isBigIntObject=h3;Ri.isSymbolObject=j3;Ri.isBoxedPrimitive=function(f){return e3(f)||f3(f)||g3(f)||h3(f)||j3(f)};Ri.isAnyArrayBuffer=function(f){return Xn&&(b3(f)||d3(f))};["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(f){Object.defineProperty(Ri,f,{enumerable:!1,value:function(){throw Error(f+" is not supported in userland");}})});var dF="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Hh={},Qr=Li,laa=Object.getOwnPropertyDescriptors||
function(f){for(var m=Object.keys(f),n={},a=0;a<m.length;a++)n[m[a]]=Object.getOwnPropertyDescriptor(f,m[a]);return n},rsa=/%[sdj%]/g;Hh.format=function(f){if(!$I(f)){for(var m=[],n=0;n<arguments.length;n++)m.push(Wt(arguments[n]));return m.join(" ")}n=1;var a=arguments,d=a.length;m=String(f).replace(rsa,function(b){if("%%"===b)return"%";if(n>=d)return b;switch(b){case "%s":return String(a[n++]);case "%d":return Number(a[n++]);case "%j":try{return JSON.stringify(a[n++])}catch(e){return"[Circular]"}default:return b}});
for(var k=a[n];n<d;k=a[++n])null!==k&&Sz(k)?m+=" "+Wt(k):m+=" "+k;return m};Hh.deprecate=function(f,m){if(void 0!==Qr&&!0===Qr.noDeprecation)return f;if(void 0===Qr)return function(){return Hh.deprecate(f,m).apply(this||dF,arguments)};var n=!1;return function(){if(!n){if(Qr.throwDeprecation)throw Error(m);Qr.traceDeprecation?console.trace(m):console.error(m);n=!0}return f.apply(this||dF,arguments)}};var YM={},maa=/^$/;if(Qr.env.NODE_DEBUG){var HW=Qr.env.NODE_DEBUG;HW=HW.replace(/[|\\{}()[\]^$+?.]/g,
"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase();maa=new RegExp("^"+HW+"$","i")}Hh.debuglog=function(f){if(f=f.toUpperCase(),!YM[f])if(maa.test(f)){var m=Qr.pid;YM[f]=function(){var n=Hh.format.apply(Hh,arguments);console.error("%s %d: %s",f,m,n)}}else YM[f]=function(){};return YM[f]};Hh.inspect=Wt;Wt.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,
39]};Wt.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};Hh.types=Ri;Hh.isArray=l3;Hh.isBoolean=YR;Hh.isNull=function(f){return null===f};Hh.isNullOrUndefined=function(f){return null==f};Hh.isNumber=k3;Hh.isString=$I;Hh.isSymbol=function(f){return"symbol"==typeof f};Hh.isUndefined=Ew;Hh.isRegExp=mD;Hh.types.isRegExp=mD;Hh.isObject=Sz;Hh.isDate=aJ;Hh.types.isDate=aJ;Hh.isError=lD;Hh.types.isNativeError=lD;Hh.isFunction=
ZI;Hh.isPrimitive=function(f){return null===f||"boolean"==typeof f||"number"==typeof f||"string"==typeof f||"symbol"==typeof f||void 0===f};Hh.isBuffer=kaa;var Zia="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");Hh.log=function(){console.log("%s - %s",Yia(),Hh.format.apply(Hh,arguments))};Hh.inherits=$h;Hh._extend=function(f,m){if(!m||!Sz(m))return f;for(var n=Object.keys(m),a=n.length;a--;)f[n[a]]=m[n[a]];return f};var Gx="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;
Hh.promisify=function(f){function m(){for(var n,a,d=new Promise(function(e,l){n=e;a=l}),k=[],b=0;b<arguments.length;b++)k.push(arguments[b]);k.push(function(e,l){e?a(e):n(l)});try{f.apply(this||dF,k)}catch(e){a(e)}return d}if("function"!=typeof f)throw new TypeError('The "original" argument must be of type Function');if(Gx&&f[Gx]){if("function"!=typeof(m=f[Gx]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(m,Gx,{value:m,enumerable:!1,
writable:!1,configurable:!0}),m}return Object.setPrototypeOf(m,Object.getPrototypeOf(f)),Gx&&Object.defineProperty(m,Gx,{value:m,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(m,laa(f))};Hh.promisify.custom=Gx;Hh.callbackify=function(f){function m(){for(var n=[],a=0;a<arguments.length;a++)n.push(arguments[a]);var d=n.pop();if("function"!=typeof d)throw new TypeError("The last argument must be of type Function");var k=this||dF,b=function(){return d.apply(k,arguments)};f.apply(this||
dF,n).then(function(e){Qr.nextTick(b.bind(null,null,e))},function(e){Qr.nextTick($ia.bind(null,e,b))})}if("function"!=typeof f)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(m,Object.getPrototypeOf(f)),Object.defineProperties(m,laa(f)),m};for(var jr=[],Ip=[],ssa="undefined"!=typeof Uint8Array?Uint8Array:Array,XA=0;64>XA;++XA)jr[XA]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[XA],Ip["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(XA)]=
XA;Ip[45]=62;Ip[95]=63;var Rh={},fS={byteLength:function(f){f=m3(f);var m=f[1];return 3*(f[0]+m)/4-m},toByteArray:function(f){var m=m3(f);var n=m[0];m=m[1];var a=new ssa(3*(n+m)/4-m),d=0,k=0<m?n-4:n;for(n=0;n<k;n+=4){var b=Ip[f.charCodeAt(n)]<<18|Ip[f.charCodeAt(n+1)]<<12|Ip[f.charCodeAt(n+2)]<<6|Ip[f.charCodeAt(n+3)];a[d++]=b>>16&255;a[d++]=b>>8&255;a[d++]=255&b}2===m&&(b=Ip[f.charCodeAt(n)]<<2|Ip[f.charCodeAt(n+1)]>>4,a[d++]=255&b);1===m&&(b=Ip[f.charCodeAt(n)]<<10|Ip[f.charCodeAt(n+1)]<<4|Ip[f.charCodeAt(n+
2)]>>2,a[d++]=b>>8&255,a[d++]=255&b);return a},fromByteArray:function(f){for(var m,n=f.length,a=n%3,d=[],k=0,b=n-a;k<b;k+=16383)d.push(aja(f,k,k+16383>b?b:k+16383));1===a?(m=f[n-1],d.push(jr[m>>2]+jr[m<<4&63]+"==")):2===a&&(m=(f[n-2]<<8)+f[n-1],d.push(jr[m>>10]+jr[m>>4&63]+jr[m<<2&63]+"="));return d.join("")}},Tz={read:function(f,m,n,a,d){var k=8*d-a-1;var b=(1<<k)-1,e=b>>1,l=-7;d=n?d-1:0;var p=n?-1:1,u=f[m+d];d+=p;n=u&(1<<-l)-1;u>>=-l;for(l+=k;0<l;n=256*n+f[m+d],d+=p,l-=8);k=n&(1<<-l)-1;n>>=-l;for(l+=
a;0<l;k=256*k+f[m+d],d+=p,l-=8);if(0===n)n=1-e;else{if(n===b)return k?NaN:1/0*(u?-1:1);k+=Math.pow(2,a);n-=e}return(u?-1:1)*k*Math.pow(2,n-a)},write:function(f,m,n,a,d,k){var b,e,l,p=8*k-d-1,u=(1<<p)-1,x=u>>1,z=23===d?Math.pow(2,-24)-Math.pow(2,-77):0;k=a?0:k-1;a=a?1:-1;var E=0>m||0===m&&0>1/m?1:0;m=Math.abs(m);for(isNaN(m)||m===1/0?(e=isNaN(m)?1:0,b=u):(b=Math.floor(Math.log(m)/Math.LN2),1>m*(l=Math.pow(2,-b))&&(b--,l*=2),2<=(m+=1<=b+x?z/l:z*Math.pow(2,1-x))*l&&(b++,l/=2),b+x>=u?(e=0,b=u):1<=b+x?
(e=(m*l-1)*Math.pow(2,d),b+=x):(e=m*Math.pow(2,x-1)*Math.pow(2,d),b=0));8<=d;f[n+k]=255&e,k+=a,e/=256,d-=8);b=b<<d|e;for(p+=d;0<p;f[n+k]=255&b,k+=a,b/=256,p-=8);f[n+k-a]|=128*E}},naa="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Rh.Buffer=Ve;Rh.SlowBuffer=function(f){+f!=f&&(f=0);return Ve.alloc(+f)};Rh.INSPECT_MAX_BYTES=50;Rh.kMaxLength=2147483647;Ve.TYPED_ARRAY_SUPPORT=function(){try{var f=new Uint8Array(1),m={foo:function(){return 42}};return Object.setPrototypeOf(m,
Uint8Array.prototype),Object.setPrototypeOf(f,m),42===f.foo()}catch(n){return!1}}();Ve.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(Ve.prototype,"parent",{enumerable:!0,get:function(){if(Ve.isBuffer(this))return this.buffer}});Object.defineProperty(Ve.prototype,"offset",{enumerable:!0,
get:function(){if(Ve.isBuffer(this))return this.byteOffset}});Ve.poolSize=8192;Ve.from=function(f,m,n){return n3(f,m,n)};Object.setPrototypeOf(Ve.prototype,Uint8Array.prototype);Object.setPrototypeOf(Ve,Uint8Array);Ve.alloc=function(f,m,n){return p3(f),0>=f?zs(f):void 0!==m?"string"==typeof n?zs(f).fill(m,n):zs(f).fill(m):zs(f)};Ve.allocUnsafe=function(f){return bS(f)};Ve.allocUnsafeSlow=function(f){return bS(f)};Ve.isBuffer=function(f){return null!=f&&!0===f._isBuffer&&f!==Ve.prototype};Ve.compare=
function(f,m){if(As(f,Uint8Array)&&(f=Ve.from(f,f.offset,f.byteLength)),As(m,Uint8Array)&&(m=Ve.from(m,m.offset,m.byteLength)),!Ve.isBuffer(f)||!Ve.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===m)return 0;for(var n=f.length,a=m.length,d=0,k=Math.min(n,a);d<k;++d)if(f[d]!==m[d]){n=f[d];a=m[d];break}return n<a?-1:a<n?1:0};Ve.isEncoding=function(f){switch(String(f).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};Ve.concat=function(f,m){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(0===f.length)return Ve.alloc(0);var n;if(void 0===m)for(n=m=0;n<f.length;++n)m+=f[n].length;m=Ve.allocUnsafe(m);var a=0;for(n=0;n<f.length;++n){var d=f[n];if(As(d,Uint8Array)&&(d=Ve.from(d)),!Ve.isBuffer(d))throw new TypeError('"list" argument must be an Array of Buffers');d.copy(m,a);a+=d.length}return m};Ve.byteLength=o3;Ve.prototype._isBuffer=!0;Ve.prototype.swap16=
function(){var f=this.length;if(0!=f%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var m=0;m<f;m+=2)Fw(this,m,m+1);return this};Ve.prototype.swap32=function(){var f=this.length;if(0!=f%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var m=0;m<f;m+=4)Fw(this,m,m+3),Fw(this,m+1,m+2);return this};Ve.prototype.swap64=function(){var f=this.length;if(0!=f%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var m=0;m<f;m+=8)Fw(this,m,
m+7),Fw(this,m+1,m+6),Fw(this,m+2,m+5),Fw(this,m+3,m+4);return this};Ve.prototype.toString=function(){var f=this.length;return 0===f?"":0===arguments.length?r3(this,0,f):cja.apply(this,arguments)};Ve.prototype.toLocaleString=Ve.prototype.toString;Ve.prototype.equals=function(f){if(!Ve.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f||0===Ve.compare(this,f)};Ve.prototype.inspect=function(){var f="",m=Rh.INSPECT_MAX_BYTES;return f=this.toString("hex",0,m).replace(/(.{2})/g,
"$1 ").trim(),this.length>m&&(f+=" ... "),"<Buffer "+f+">"};naa&&(Ve.prototype[naa]=Ve.prototype.inspect);Ve.prototype.compare=function(f,m,n,a,d){if(As(f,Uint8Array)&&(f=Ve.from(f,f.offset,f.byteLength)),!Ve.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(void 0===m&&(m=0),void 0===n&&(n=f?f.length:0),void 0===a&&(a=0),void 0===d&&(d=this.length),0>m||n>f.length||0>a||d>this.length)throw new RangeError("out of range index");
if(a>=d&&m>=n)return 0;if(a>=d)return-1;if(m>=n)return 1;if(this===f)return 0;var k=(d>>>=0)-(a>>>=0),b=(n>>>=0)-(m>>>=0),e=Math.min(k,b);a=this.slice(a,d);f=f.slice(m,n);for(m=0;m<e;++m)if(a[m]!==f[m]){k=a[m];b=f[m];break}return k<b?-1:b<k?1:0};Ve.prototype.includes=function(f,m,n){return-1!==this.indexOf(f,m,n)};Ve.prototype.indexOf=function(f,m,n){return s3(this,f,m,n,!0)};Ve.prototype.lastIndexOf=function(f,m,n){return s3(this,f,m,n,!1)};Ve.prototype.write=function(f,m,n,a){if(void 0===m)a="utf8",
n=this.length,m=0;else if(void 0===n&&"string"==typeof m)a=m,n=this.length,m=0;else{if(!isFinite(m))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");m>>>=0;isFinite(n)?(n>>>=0,void 0===a&&(a="utf8")):(a=n,n=void 0)}var d=this.length-m;if((void 0===n||n>d)&&(n=d),0<f.length&&(0>n||0>m)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(d=!1;;)switch(a){case "hex":a:{m=Number(m)||0;a=this.length-m;n?(n=Number(n))>a&&
(n=a):n=a;a=f.length;n>a/2&&(n=a/2);for(a=0;a<n;++a){d=parseInt(f.substr(2*a,2),16);if(d!=d){n=a;break a}this[m+a]=d}n=a}return n;case "utf8":case "utf-8":return bJ(eS(f,this.length-m),this,m,n);case "ascii":return u3(this,f,m,n);case "latin1":case "binary":return u3(this,f,m,n);case "base64":return bJ(q3(f),this,m,n);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=n;d=this.length-m;for(var k=[],b=0;b<f.length&&!(0>(d-=2));++b){var e=f.charCodeAt(b);n=e>>8;e%=256;k.push(e);k.push(n)}return bJ(k,
this,m,a);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();d=!0}};Ve.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};Ve.prototype.slice=function(f,m){var n=this.length;0>(f=~~f)?0>(f+=n)&&(f=0):f>n&&(f=n);0>(m=void 0===m?n:~~m)?0>(m+=n)&&(m=0):m>n&&(m=n);m<f&&(m=f);f=this.subarray(f,m);return Object.setPrototypeOf(f,Ve.prototype),f};Ve.prototype.readUIntLE=function(f,m,n){f>>>=0;m>>>=0;n||jm(f,m,this.length);n=this[f];
for(var a=1,d=0;++d<m&&(a*=256);)n+=this[f+d]*a;return n};Ve.prototype.readUIntBE=function(f,m,n){f>>>=0;m>>>=0;n||jm(f,m,this.length);n=this[f+--m];for(var a=1;0<m&&(a*=256);)n+=this[f+--m]*a;return n};Ve.prototype.readUInt8=function(f,m){return f>>>=0,m||jm(f,1,this.length),this[f]};Ve.prototype.readUInt16LE=function(f,m){return f>>>=0,m||jm(f,2,this.length),this[f]|this[f+1]<<8};Ve.prototype.readUInt16BE=function(f,m){return f>>>=0,m||jm(f,2,this.length),this[f]<<8|this[f+1]};Ve.prototype.readUInt32LE=
function(f,m){return f>>>=0,m||jm(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]};Ve.prototype.readUInt32BE=function(f,m){return f>>>=0,m||jm(f,4,this.length),16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])};Ve.prototype.readIntLE=function(f,m,n){f>>>=0;m>>>=0;n||jm(f,m,this.length);n=this[f];for(var a=1,d=0;++d<m&&(a*=256);)n+=this[f+d]*a;return n>=128*a&&(n-=Math.pow(2,8*m)),n};Ve.prototype.readIntBE=function(f,m,n){f>>>=0;m>>>=0;n||jm(f,m,this.length);n=m;for(var a=
1,d=this[f+--n];0<n&&(a*=256);)d+=this[f+--n]*a;return d>=128*a&&(d-=Math.pow(2,8*m)),d};Ve.prototype.readInt8=function(f,m){return f>>>=0,m||jm(f,1,this.length),128&this[f]?-1*(255-this[f]+1):this[f]};Ve.prototype.readInt16LE=function(f,m){f>>>=0;m||jm(f,2,this.length);f=this[f]|this[f+1]<<8;return 32768&f?4294901760|f:f};Ve.prototype.readInt16BE=function(f,m){f>>>=0;m||jm(f,2,this.length);f=this[f+1]|this[f]<<8;return 32768&f?4294901760|f:f};Ve.prototype.readInt32LE=function(f,m){return f>>>=0,
m||jm(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24};Ve.prototype.readInt32BE=function(f,m){return f>>>=0,m||jm(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]};Ve.prototype.readFloatLE=function(f,m){return f>>>=0,m||jm(f,4,this.length),Tz.read(this,f,!0,23,4)};Ve.prototype.readFloatBE=function(f,m){return f>>>=0,m||jm(f,4,this.length),Tz.read(this,f,!1,23,4)};Ve.prototype.readDoubleLE=function(f,m){return f>>>=0,m||jm(f,8,this.length),Tz.read(this,f,!0,52,8)};
Ve.prototype.readDoubleBE=function(f,m){return f>>>=0,m||jm(f,8,this.length),Tz.read(this,f,!1,52,8)};Ve.prototype.writeUIntLE=function(f,m,n,a){(f=+f,m>>>=0,n>>>=0,a)||Yn(this,f,m,n,Math.pow(2,8*n)-1,0);a=1;var d=0;for(this[m]=255&f;++d<n&&(a*=256);)this[m+d]=f/a&255;return m+n};Ve.prototype.writeUIntBE=function(f,m,n,a){(f=+f,m>>>=0,n>>>=0,a)||Yn(this,f,m,n,Math.pow(2,8*n)-1,0);a=n-1;var d=1;for(this[m+a]=255&f;0<=--a&&(d*=256);)this[m+a]=f/d&255;return m+n};Ve.prototype.writeUInt8=function(f,m,
n){return f=+f,m>>>=0,n||Yn(this,f,m,1,255,0),this[m]=255&f,m+1};Ve.prototype.writeUInt16LE=function(f,m,n){return f=+f,m>>>=0,n||Yn(this,f,m,2,65535,0),this[m]=255&f,this[m+1]=f>>>8,m+2};Ve.prototype.writeUInt16BE=function(f,m,n){return f=+f,m>>>=0,n||Yn(this,f,m,2,65535,0),this[m]=f>>>8,this[m+1]=255&f,m+2};Ve.prototype.writeUInt32LE=function(f,m,n){return f=+f,m>>>=0,n||Yn(this,f,m,4,4294967295,0),this[m+3]=f>>>24,this[m+2]=f>>>16,this[m+1]=f>>>8,this[m]=255&f,m+4};Ve.prototype.writeUInt32BE=function(f,
m,n){return f=+f,m>>>=0,n||Yn(this,f,m,4,4294967295,0),this[m]=f>>>24,this[m+1]=f>>>16,this[m+2]=f>>>8,this[m+3]=255&f,m+4};Ve.prototype.writeIntLE=function(f,m,n,a){(f=+f,m>>>=0,a)||(a=Math.pow(2,8*n-1),Yn(this,f,m,n,a-1,-a));a=0;var d=1,k=0;for(this[m]=255&f;++a<n&&(d*=256);)0>f&&0===k&&0!==this[m+a-1]&&(k=1),this[m+a]=(f/d>>0)-k&255;return m+n};Ve.prototype.writeIntBE=function(f,m,n,a){(f=+f,m>>>=0,a)||(a=Math.pow(2,8*n-1),Yn(this,f,m,n,a-1,-a));a=n-1;var d=1,k=0;for(this[m+a]=255&f;0<=--a&&(d*=
256);)0>f&&0===k&&0!==this[m+a+1]&&(k=1),this[m+a]=(f/d>>0)-k&255;return m+n};Ve.prototype.writeInt8=function(f,m,n){return f=+f,m>>>=0,n||Yn(this,f,m,1,127,-128),0>f&&(f=255+f+1),this[m]=255&f,m+1};Ve.prototype.writeInt16LE=function(f,m,n){return f=+f,m>>>=0,n||Yn(this,f,m,2,32767,-32768),this[m]=255&f,this[m+1]=f>>>8,m+2};Ve.prototype.writeInt16BE=function(f,m,n){return f=+f,m>>>=0,n||Yn(this,f,m,2,32767,-32768),this[m]=f>>>8,this[m+1]=255&f,m+2};Ve.prototype.writeInt32LE=function(f,m,n){return f=
+f,m>>>=0,n||Yn(this,f,m,4,2147483647,-2147483648),this[m]=255&f,this[m+1]=f>>>8,this[m+2]=f>>>16,this[m+3]=f>>>24,m+4};Ve.prototype.writeInt32BE=function(f,m,n){return f=+f,m>>>=0,n||Yn(this,f,m,4,2147483647,-2147483648),0>f&&(f=4294967295+f+1),this[m]=f>>>24,this[m+1]=f>>>16,this[m+2]=f>>>8,this[m+3]=255&f,m+4};Ve.prototype.writeFloatLE=function(f,m,n){return w3(this,f,m,!0,n)};Ve.prototype.writeFloatBE=function(f,m,n){return w3(this,f,m,!1,n)};Ve.prototype.writeDoubleLE=function(f,m,n){return x3(this,
f,m,!0,n)};Ve.prototype.writeDoubleBE=function(f,m,n){return x3(this,f,m,!1,n)};Ve.prototype.copy=function(f,m,n,a){if(!Ve.isBuffer(f))throw new TypeError("argument should be a Buffer");if((n||(n=0),a||0===a||(a=this.length),m>=f.length&&(m=f.length),m||(m=0),0<a&&a<n&&(a=n),a===n)||0===f.length||0===this.length)return 0;if(0>m)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("sourceEnd out of bounds");
a>this.length&&(a=this.length);f.length-m<a-n&&(a=f.length-m+n);var d=a-n;if(this===f&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(m,n,a);else if(this===f&&n<m&&m<a)for(a=d-1;0<=a;--a)f[a+m]=this[a+n];else Uint8Array.prototype.set.call(f,this.subarray(n,a),m);return d};Ve.prototype.fill=function(f,m,n,a){if("string"==typeof f){if("string"==typeof m?(a=m,m=0,n=this.length):"string"==typeof n&&(a=n,n=this.length),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");
if("string"==typeof a&&!Ve.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===f.length){var d=f.charCodeAt(0);("utf8"===a&&128>d||"latin1"===a)&&(f=d)}}else"number"==typeof f?f&=255:"boolean"==typeof f&&(f=Number(f));if(0>m||this.length<m||this.length<n)throw new RangeError("Out of range index");if(n<=m)return this;if(m>>>=0,n=void 0===n?this.length:n>>>0,f||(f=0),"number"==typeof f)for(a=m;a<n;++a)this[a]=f;else{d=Ve.isBuffer(f)?f:Ve.from(f,a);var k=d.length;if(0===k)throw new TypeError('The value "'+
f+'" is invalid for argument "value"');for(a=0;a<n-m;++a)this[a+m]=d[a%k]}return this};var eja=/[^+/0-9A-Za-z-_]/g,dja=function(){for(var f=Array(256),m=0;16>m;++m)for(var n=16*m,a=0;16>a;++a)f[n+a]="0123456789abcdef"[m]+"0123456789abcdef"[a];return f}(),ZM={},$M=Rh,kr=$M.Buffer;kr.from&&kr.alloc&&kr.allocUnsafe&&kr.allocUnsafeSlow?ZM=$M:(y3($M,ZM),ZM.Buffer=Gw);Gw.prototype=Object.create(kr.prototype);y3(kr,Gw);Gw.from=function(f,m,n){if("number"==typeof f)throw new TypeError("Argument must not be a number");
return kr(f,m,n)};Gw.alloc=function(f,m,n){if("number"!=typeof f)throw new TypeError("Argument must be a number");f=kr(f);return void 0!==m?"string"==typeof n?f.fill(m,n):f.fill(m):f.fill(0),f};Gw.allocUnsafe=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return kr(f)};Gw.allocUnsafeSlow=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return $M.SlowBuffer(f)};var aj=ZM,Uz={},gS=aj.Buffer,z3=gS.isEncoding||function(f){switch((f=
""+f)&&f.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};Uz.StringDecoder=nD;nD.prototype.write=function(f){if(0===f.length)return"";var m;if(this.lastNeed){if(void 0===(m=this.fillLast(f)))return"";var n=this.lastNeed;this.lastNeed=0}else n=0;return n<f.length?m?m+this.text(f,n):this.text(f,n):m||""};nD.prototype.end=function(f){f=f&&f.length?this.write(f):"";
return this.lastNeed?f+"\ufffd":f};nD.prototype.text=function(f,m){var n=f.length-1;if(n<m)n=0;else{var a=hS(f[n]);n=0<=a?(0<a&&(this.lastNeed=a-1),a):--n<m||-2===a?0:0<=(a=hS(f[n]))?(0<a&&(this.lastNeed=a-2),a):--n<m||-2===a?0:0<=(a=hS(f[n]))?(0<a&&(2===a?a=0:this.lastNeed=a-3),a):0}if(!this.lastNeed)return f.toString("utf8",m);this.lastTotal=n;a=f.length-(n-this.lastNeed);return f.copy(this.lastChar,0,a),f.toString("utf8",m,a)};nD.prototype.fillLast=function(f){if(this.lastNeed<=f.length)return f.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length);this.lastNeed-=f.length};var dJ=lr.EventEmitter,cq={},A3={};gp("ERR_INVALID_OPT_VALUE",function(f,m){return'The value "'+m+'" is invalid for option "'+f+'"'},TypeError);gp("ERR_INVALID_ARG_TYPE",function(f,m,n){var a;f=("string"==typeof m&&"not "===m.substr(0,4)?(a="must not be",m=m.replace(/^not /,"")):a="must be",function(d,k,b){return(void 0===
b||b>d.length)&&(b=d.length),d.substring(b-k.length,b)===k}(f," argument"))?"The "+f+" "+a+" "+B3(m,"type"):'The "'+f+'" '+(function(d,k,b){return"number"!=typeof b&&(b=0),!(b+k.length>d.length)&&-1!==d.indexOf(k,b)}(f,".")?"property":"argument")+" "+a+" "+B3(m,"type");return f+=". Received type "+typeof n,f},TypeError);gp("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");gp("ERR_METHOD_NOT_IMPLEMENTED",function(f){return"The "+f+" method is not implemented"});gp("ERR_STREAM_PREMATURE_CLOSE",
"Premature close");gp("ERR_STREAM_DESTROYED",function(f){return"Cannot call "+f+" after a stream was destroyed"});gp("ERR_MULTIPLE_CALLBACK","Callback called multiple times");gp("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");gp("ERR_STREAM_WRITE_AFTER_END","write after end");gp("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);gp("ERR_UNKNOWN_ENCODING",function(f){return"Unknown encoding: "+f},TypeError);gp("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");
cq.codes=A3;var J3=function(){throw Error("Readable.from is not available in the browser");},jS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,L3=function(f,m){if(iS("noDeprecation"))return f;var n=!1;return function(){if(!n){if(iS("throwDeprecation"))throw Error(m);iS("traceDeprecation")?console.trace(m):console.warn(m);n=!0}return f.apply(this||jS,arguments)}},aN=Rh.Buffer,IW=Hh.inspect,tsa=IW&&IW.custom||"inspect",rja=function(){function f(){if(!(this instanceof
f))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=0}var m;return m=[{key:"push",value:function(n){n={data:n,next:null};0<this.length?this.tail.next=n:this.head=n;this.tail=n;++this.length}},{key:"unshift",value:function(n){n={data:n,next:this.head};0===this.length&&(this.tail=n);this.head=n;++this.length}},{key:"shift",value:function(){if(0!==this.length){var n=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,
--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(n){if(0===this.length)return"";for(var a=this.head,d=""+a.data;a=a.next;)d+=n+a.data;return d}},{key:"concat",value:function(n){if(0===this.length)return aN.alloc(0);for(var a,d,k=aN.allocUnsafe(n>>>0),b=this.head,e=0;b;)n=b.data,a=k,d=e,void aN.prototype.copy.call(n,a,d),e+=b.data.length,b=b.next;return k}},{key:"consume",value:function(n,a){var d;return n<this.head.data.length?(d=
this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):d=n===this.head.data.length?this.shift():a?this._getString(n):this._getBuffer(n),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var a=this.head,d=1,k=a.data;for(n-=k.length;a=a.next;){var b=a.data,e=n>b.length?b.length:n;if(e===b.length?k+=b:k+=b.slice(0,n),0==(n-=e)){e===b.length?(++d,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=b.slice(e));break}++d}return this.length-=
d,k}},{key:"_getBuffer",value:function(n){var a=aN.allocUnsafe(n),d=this.head,k=1;d.data.copy(a);for(n-=d.data.length;d=d.next;){var b=d.data,e=n>b.length?b.length:n;if(b.copy(a,a.length-n,0,e),0==(n-=e)){e===b.length?(++k,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=b.slice(e));break}++k}return this.length-=k,a}},{key:tsa,value:function(n,a){return IW(this,function(d){for(var k=1;k<arguments.length;k++){var b=null!=arguments[k]?arguments[k]:{};k%2?C3(Object(b),!0).forEach(function(e){var l=
b[e];e in d?Object.defineProperty(d,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):d[e]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(b)):C3(Object(b)).forEach(function(e){Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(b,e))})}return d}({},a,{depth:0,customInspect:!1}))}}],mja(f.prototype,m),f}(),Hx=Li,H3={destroy:function(f,m){var n=this,a=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||
a?(m?m(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Hx.nextTick(kS,this,f)):Hx.nextTick(kS,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(d){!m&&d?n._writableState?n._writableState.errorEmitted?Hx.nextTick(cJ,n):(n._writableState.errorEmitted=!0,Hx.nextTick(D3,n,d)):Hx.nextTick(D3,n,d):m?(Hx.nextTick(cJ,n),m(d)):Hx.nextTick(cJ,n)}),this)},
undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(f,m){var n=f._readableState,a=f._writableState;n&&n.autoDestroy||
a&&a.autoDestroy?f.destroy(m):f.emit("error",m)}},usa=cq.codes.ERR_INVALID_OPT_VALUE,I3={getHighWaterMark:function(f,m,n,a){m=null!=m.highWaterMark?m.highWaterMark:a?m[n]:null;if(null!=m){if(!isFinite(m)||Math.floor(m)!==m||0>m)throw new usa(a?n:"highWaterMark",m);return Math.floor(m)}return f.objectMode?16:16384}},oaa=cq.codes.ERR_STREAM_PREMATURE_CLOSE,JW,E3=Li,vsa=function d(m,n,a){if("function"==typeof n)return d(m,null,n);n||(n={});a=function(J){var K=!1;return function(){if(!K){K=!0;for(var T=
arguments.length,P=Array(T),da=0;da<T;da++)P[da]=arguments[da];J.apply(this,P)}}}(a||nja);var k=n.readable||!1!==n.readable&&m.readable,b=n.writable||!1!==n.writable&&m.writable,e=function(){m.writable||p()},l=m._writableState&&m._writableState.finished,p=function(){b=!1;l=!0;k||a.call(m)},u=m._readableState&&m._readableState.endEmitted,x=function(){k=!1;u=!0;b||a.call(m)},z=function(J){a.call(m,J)},E=function(){var J;return k&&!u?(m._readableState&&m._readableState.ended||(J=new oaa),a.call(m,J)):
b&&!l?(m._writableState&&m._writableState.ended||(J=new oaa),a.call(m,J)):void 0},G=function(){m.req.on("finish",p)};return m.setHeader&&"function"==typeof m.abort?(m.on("complete",p),m.on("abort",E),m.req?G():m.on("request",G)):b&&!m._writableState&&(m.on("end",e),m.on("close",e)),m.on("end",x),m.on("finish",p),!1!==n.error&&m.on("error",z),m.on("close",E),function(){m.removeListener("complete",p);m.removeListener("abort",E);m.removeListener("request",G);m.req&&m.req.removeListener("finish",p);m.removeListener("end",
e);m.removeListener("close",e);m.removeListener("finish",p);m.removeListener("end",x);m.removeListener("error",z);m.removeListener("close",E)}},Zt=Symbol("lastResolve"),Jw=Symbol("lastReject"),eF=Symbol("error"),bN=Symbol("ended"),Iw=Symbol("lastPromise"),KW=Symbol("handlePromise"),Hw=Symbol("stream"),wsa=Object.getPrototypeOf(function(){}),xsa=Object.setPrototypeOf((Xt(JW={get stream(){return this[Hw]},next:function(){var m=this,n=this[eF];if(null!==n)return Promise.reject(n);if(this[bN])return Promise.resolve(Yt(void 0,
!0));if(this[Hw].destroyed)return new Promise(function(a,d){E3.nextTick(function(){m[eF]?d(m[eF]):a(Yt(void 0,!0))})});if(n=this[Iw])n=new Promise(function(a,d){return function(k,b){a.then(function(){if(d[bN])return k(Yt(void 0,!0)),void 0;d[KW](k,b)},b)}}(n,this));else{n=this[Hw].read();if(null!==n)return Promise.resolve(Yt(n,!1));n=new Promise(this[KW])}return this[Iw]=n,n}},Symbol.asyncIterator,function(){return this}),Xt(JW,"return",function(){var m=this;return new Promise(function(n,a){m[Hw].destroy(null,
function(d){if(d)return a(d),void 0;n(Yt(void 0,!0))})})}),JW),wsa),sja=function(m){var n,a=Object.create(xsa,(Xt(n={},Hw,{value:m,writable:!0}),Xt(n,Zt,{value:null,writable:!0}),Xt(n,Jw,{value:null,writable:!0}),Xt(n,eF,{value:null,writable:!0}),Xt(n,bN,{value:m._readableState.endEmitted,writable:!0}),Xt(n,KW,{value:function(d,k){var b=a[Hw].read();b?(a[Iw]=null,a[Zt]=null,a[Jw]=null,d(Yt(b,!1))):(a[Zt]=d,a[Jw]=k)},writable:!0}),n));return a[Iw]=null,vsa(m,function(d){if(d&&"ERR_STREAM_PREMATURE_CLOSE"!==
d.code){var k=a[Jw];return null!==k&&(a[Iw]=null,a[Zt]=null,a[Jw]=null,k(d)),a[eF]=d,void 0}d=a[Zt];null!==d&&(a[Iw]=null,a[Zt]=null,a[Jw]=null,d(Yt(void 0,!0)));a[bN]=!0}),m.on("readable",pja.bind(null,a)),a},lS={},G3=!1,qja="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,mS={},K3=!1,uja="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,nS={},M3=!1,ysa=F3(),paa=cq.codes.ERR_STREAM_PREMATURE_CLOSE,tS=function k(n,a,d){if("function"==typeof a)return k(n,
null,a);a||(a={});d=function(K){var T=!1;return function(){if(!T){T=!0;for(var P=arguments.length,da=Array(P),fa=0;fa<P;fa++)da[fa]=arguments[fa];K.apply(this,da)}}}(d||vja);var b=a.readable||!1!==a.readable&&n.readable,e=a.writable||!1!==a.writable&&n.writable,l=function(){n.writable||u()},p=n._writableState&&n._writableState.finished,u=function(){e=!1;p=!0;b||d.call(n)},x=n._readableState&&n._readableState.endEmitted,z=function(){b=!1;x=!0;e||d.call(n)},E=function(K){d.call(n,K)},G=function(){var K;
return b&&!x?(n._readableState&&n._readableState.ended||(K=new paa),d.call(n,K)):e&&!p?(n._writableState&&n._writableState.ended||(K=new paa),d.call(n,K)):void 0},J=function(){n.req.on("finish",u)};return n.setHeader&&"function"==typeof n.abort?(n.on("complete",u),n.on("abort",G),n.req?J():n.on("request",J)):e&&!n._writableState&&(n.on("end",l),n.on("close",l)),n.on("end",z),n.on("finish",u),!1!==a.error&&n.on("error",E),n.on("close",G),function(){n.removeListener("complete",u);n.removeListener("abort",
G);n.removeListener("request",J);n.req&&n.req.removeListener("finish",u);n.removeListener("end",l);n.removeListener("close",l);n.removeListener("finish",u);n.removeListener("end",z);n.removeListener("error",E);n.removeListener("close",G)}},cN=Rh.Buffer,LW=Hh.inspect,zsa=LW&&LW.custom||"inspect",Bja=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=0}var a;return a=[{key:"push",value:function(d){d={data:d,
next:null};0<this.length?this.tail.next=d:this.head=d;this.tail=d;++this.length}},{key:"unshift",value:function(d){d={data:d,next:this.head};0===this.length&&(this.tail=d);this.head=d;++this.length}},{key:"shift",value:function(){if(0!==this.length){var d=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,d}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(d){if(0===this.length)return"";for(var k=
this.head,b=""+k.data;k=k.next;)b+=d+k.data;return b}},{key:"concat",value:function(d){if(0===this.length)return cN.alloc(0);for(var k,b,e=cN.allocUnsafe(d>>>0),l=this.head,p=0;l;)d=l.data,k=e,b=p,void cN.prototype.copy.call(d,k,b),p+=l.data.length,l=l.next;return e}},{key:"consume",value:function(d,k){var b;return d<this.head.data.length?(b=this.head.data.slice(0,d),this.head.data=this.head.data.slice(d)):b=d===this.head.data.length?this.shift():k?this._getString(d):this._getBuffer(d),b}},{key:"first",
value:function(){return this.head.data}},{key:"_getString",value:function(d){var k=this.head,b=1,e=k.data;for(d-=e.length;k=k.next;){var l=k.data,p=d>l.length?l.length:d;if(p===l.length?e+=l:e+=l.slice(0,d),0==(d-=p)){p===l.length?(++b,k.next?this.head=k.next:this.head=this.tail=null):(this.head=k,k.data=l.slice(p));break}++b}return this.length-=b,e}},{key:"_getBuffer",value:function(d){var k=cN.allocUnsafe(d),b=this.head,e=1;b.data.copy(k);for(d-=b.data.length;b=b.next;){var l=b.data,p=d>l.length?
l.length:d;if(l.copy(k,k.length-d,0,p),0==(d-=p)){p===l.length?(++e,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=l.slice(p));break}++e}return this.length-=e,k}},{key:zsa,value:function(d,k){return LW(this,function(b){for(var e=1;e<arguments.length;e++){var l=null!=arguments[e]?arguments[e]:{};e%2?N3(Object(l),!0).forEach(function(p){var u=l[p];p in b?Object.defineProperty(b,p,{value:u,enumerable:!0,configurable:!0,writable:!0}):b[p]=u}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,
Object.getOwnPropertyDescriptors(l)):N3(Object(l)).forEach(function(p){Object.defineProperty(b,p,Object.getOwnPropertyDescriptor(l,p))})}return b}({},k,{depth:0,customInspect:!1}))}}],wja(n.prototype,a),n}(),Ix=Li,R3={destroy:function(n,a){var d=this,k=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||k?(a?a(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Ix.nextTick(oS,this,n)):Ix.nextTick(oS,
this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(b){!a&&b?d._writableState?d._writableState.errorEmitted?Ix.nextTick(eJ,d):(d._writableState.errorEmitted=!0,Ix.nextTick(O3,d,b)):Ix.nextTick(O3,d,b):a?(Ix.nextTick(eJ,d),a(b)):Ix.nextTick(eJ,d)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=
!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(n,a){var d=n._readableState,k=n._writableState;d&&d.autoDestroy||k&&k.autoDestroy?n.destroy(a):n.emit("error",a)}},Asa=cq.codes.ERR_INVALID_OPT_VALUE,MW,S3={getHighWaterMark:function(n,a,d,k){a=null!=a.highWaterMark?a.highWaterMark:
k?a[d]:null;if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||0>a)throw new Asa(k?d:"highWaterMark",a);return Math.floor(a)}return n.objectMode?16:16384}},P3=Li,Bsa=tS,bu=Symbol("lastResolve"),Mw=Symbol("lastReject"),fF=Symbol("error"),dN=Symbol("ended"),Lw=Symbol("lastPromise"),NW=Symbol("handlePromise"),Kw=Symbol("stream"),Csa=Object.getPrototypeOf(function(){}),Dsa=Object.setPrototypeOf(($t(MW={get stream(){return this[Kw]},next:function(){var n=this,a=this[fF];if(null!==a)return Promise.reject(a);
if(this[dN])return Promise.resolve(au(void 0,!0));if(this[Kw].destroyed)return new Promise(function(d,k){P3.nextTick(function(){n[fF]?k(n[fF]):d(au(void 0,!0))})});if(a=this[Lw])a=new Promise(function(d,k){return function(b,e){d.then(function(){if(k[dN])return b(au(void 0,!0)),void 0;k[NW](b,e)},e)}}(a,this));else{a=this[Kw].read();if(null!==a)return Promise.resolve(au(a,!1));a=new Promise(this[NW])}return this[Lw]=a,a}},Symbol.asyncIterator,function(){return this}),$t(MW,"return",function(){var n=
this;return new Promise(function(a,d){n[Kw].destroy(null,function(k){if(k)return d(k),void 0;a(au(void 0,!0))})})}),MW),Csa),Cja=function(n){var a,d=Object.create(Dsa,($t(a={},Kw,{value:n,writable:!0}),$t(a,bu,{value:null,writable:!0}),$t(a,Mw,{value:null,writable:!0}),$t(a,fF,{value:null,writable:!0}),$t(a,dN,{value:n._readableState.endEmitted,writable:!0}),$t(a,NW,{value:function(k,b){var e=d[Kw].read();e?(d[Lw]=null,d[bu]=null,d[Mw]=null,k(au(e,!1))):(d[bu]=k,d[Mw]=b)},writable:!0}),a));return d[Lw]=
null,Bsa(n,function(k){if(k&&"ERR_STREAM_PREMATURE_CLOSE"!==k.code){var b=d[Mw];return null!==b&&(d[Lw]=null,d[bu]=null,d[Mw]=null,b(k)),d[fF]=k,void 0}k=d[bu];null!==k&&(d[Lw]=null,d[bu]=null,d[Mw]=null,k(au(void 0,!0)));d[dN]=!0}),n.on("readable",yja.bind(null,d)),d},pS={},Q3=!1,Aja="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,qS={},U3=!1,Dja="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,rS={},V3=!1,Esa=T3(),qaa=oD(),eN=cq.codes,
Fsa=eN.ERR_METHOD_NOT_IMPLEMENTED,Fja=eN.ERR_MULTIPLE_CALLBACK,Ija=eN.ERR_TRANSFORM_ALREADY_TRANSFORMING,Hja=eN.ERR_TRANSFORM_WITH_LENGTH_0,gJ=qaa;$h(mr,gJ);mr.prototype.push=function(n,a){return this._transformState.needTransform=!1,gJ.prototype.push.call(this,n,a)};mr.prototype._transform=function(n,a,d){d(new Fsa("_transform()"))};mr.prototype._write=function(n,a,d){var k=this._transformState;(k.writecb=d,k.writechunk=n,k.writeencoding=a,k.transforming)||(n=this._readableState,(k.needTransform||
n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};mr.prototype._read=function(n){n=this._transformState;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};mr.prototype._destroy=function(n,a){gJ.prototype._destroy.call(this,n,function(d){a(d)})};var X3=mr;$h(pD,X3);pD.prototype._transform=function(n,a,d){d(null,n)};var sS,raa=cq.codes,Gsa=raa.ERR_MISSING_ARGS,Kja=raa.ERR_STREAM_DESTROYED,
vS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,uS=lr.EventEmitter;$h(hp,uS);hp.Readable=ysa;hp.Writable=Esa;hp.Duplex=qaa;hp.Transform=mr;hp.PassThrough=pD;hp.finished=tS;hp.pipeline=function(){for(var n=arguments.length,a=Array(n),d=0;d<n;d++)a[d]=arguments[d];var k,b=a.length?"function"!=typeof a[a.length-1]?Y3:a.pop():Y3;if(Array.isArray(a[0])&&(a=a[0]),2>a.length)throw new Gsa("streams");var e=a.map(function(l,p){var u=p<a.length-1;return Jja(l,u,0<p,function(x){k||
(k=x);x&&e.forEach(Z3);u||(e.forEach(Z3),b(k))})});return a.reduce(Lja)};hp.Stream=hp;hp.prototype.pipe=function(n,a){function d(z){n.writable&&!1===n.write(z)&&u.pause&&u.pause()}function k(){u.readable&&u.resume&&u.resume()}function b(){x||(x=!0,n.end())}function e(){x||(x=!0,"function"==typeof n.destroy&&n.destroy())}function l(z){if(p(),0===uS.listenerCount(this||vS,"error"))throw z;}function p(){u.removeListener("data",d);n.removeListener("drain",k);u.removeListener("end",b);u.removeListener("close",
e);u.removeListener("error",l);n.removeListener("error",l);u.removeListener("end",p);u.removeListener("close",p);n.removeListener("close",p)}var u=this||vS;u.on("data",d);n.on("drain",k);n._isStdio||a&&!1===a.end||(u.on("end",b),u.on("close",e));var x=!1;return u.on("error",l),n.on("error",l),u.on("end",p),u.on("close",p),n.on("close",p),n.emit("pipe",u),n};var Zw=hp,fN="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Sw={},YA=function(n){if(Object.keys)return Object.keys(n);
var a=[],d;for(d in n)a.push(d);return a},Jx=function(n,a){if(n.forEach)return n.forEach(a);for(var d=0;d<n.length;d++)a(n[d],d,n)},Hsa=function(){try{return Object.defineProperty({},"_",{}),function(n,a,d){Object.defineProperty(n,a,{writable:!0,enumerable:!1,configurable:!0,value:d})}}catch(n){return function(a,d,k){a[d]=k}}}(),saa="Array Boolean Date Error EvalError Function Infinity JSON Math NaN Number Object RangeError ReferenceError RegExp String SyntaxError TypeError URIError decodeURI decodeURIComponent encodeURI encodeURIComponent escape eval isFinite isNaN parseFloat parseInt undefined unescape".split(" ");
hJ.prototype={};var Rr=Sw.Script=function(n){if(!((this||fN)instanceof Rr))return new Rr(n);(this||fN).code=n};Rr.prototype.runInContext=function(n){if(!(n instanceof hJ))throw new TypeError("needs a 'context' argument.");var a=document.createElement("iframe");a.style||(a.style={});a.style.display="none";document.body.appendChild(a);var d=a.contentWindow,k=d.eval,b=d.execScript;!k&&b&&(b.call(d,"null"),k=d.eval);Jx(YA(n),function(l){d[l]=n[l]});Jx(saa,function(l){n[l]&&(d[l]=n[l])});var e=YA(d);k=
k.call(d,(this||fN).code);return Jx(YA(d),function(l){var p;if(!(p=l in n)){a:if(e.indexOf)p=e.indexOf(l);else{for(p=0;p<e.length;p++)if(e[p]===l)break a;p=-1}p=-1===p}p&&(n[l]=d[l])}),Jx(saa,function(l){l in n||Hsa(n,l,d[l])}),document.body.removeChild(a),k};Rr.prototype.runInThisContext=function(){return eval((this||fN).code)};Rr.prototype.runInNewContext=function(n){var a=Rr.createContext(n),d=this.runInContext(a);return n&&Jx(YA(a),function(k){n[k]=a[k]}),d};Jx(YA(Rr.prototype),function(n){Sw[n]=
Rr[n]=function(a){var d=Rr(a);return d[n].apply(d,[].slice.call(arguments,1))}});Sw.isContext=function(n){return n instanceof hJ};Sw.createScript=function(n){return Sw.Script(n)};Sw.createContext=Rr.createContext=function(n){var a=new hJ;return"object"==typeof n&&Jx(YA(n),function(d){a[d]=n[d]}),a};var taa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Isa=Li,Jsa=aj.Buffer,gN=taa.crypto||taa.msCrypto,Ou=gN&&gN.getRandomValues?function(n,a){if(4294967295<n)throw new RangeError("requested too many random bytes");
var d=Jsa.allocUnsafe(n);if(0<n)if(65536<n)for(var k=0;k<n;k+=65536)gN.getRandomValues(d.slice(k,k+65536));else gN.getRandomValues(d);return"function"==typeof a?Isa.nextTick(function(){a(null,d)}):d}:function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11");},iJ=aj.Buffer,$3=Zw.Transform;$h(Bs,$3);Bs.prototype._transform=function(n,a,d){var k=null;try{this.update(n,a)}catch(b){k=b}d(k)};Bs.prototype._flush=function(n){var a=
null;try{this.push(this.digest())}catch(d){a=d}n(a)};Bs.prototype.update=function(n,a){var d=n;if(!iJ.isBuffer(d)&&"string"!=typeof d)throw new TypeError("Data must be a string or a buffer");if(!0,this._finalized)throw Error("Digest already called");iJ.isBuffer(n)||(n=iJ.from(n,a));a=this._block;for(d=0;this._blockOffset+n.length-d>=this._blockSize;){for(var k=this._blockOffset;k<this._blockSize;)a[k++]=n[d++];this._update();this._blockOffset=0}for(;d<n.length;)a[this._blockOffset++]=n[d++];a=0;for(n=
8*n.length;0<n;++a)this._length[a]+=n,0<(n=this._length[a]/4294967296|0)&&(this._length[a]-=4294967296*n);return this};Bs.prototype._update=function(){throw Error("_update is not implemented");};Bs.prototype.digest=function(n){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var a=this._digest();void 0!==n&&(a=a.toString(n));this._block.fill(0);for(n=this._blockOffset=0;4>n;++n)this._length[n]=0;return a};Bs.prototype._digest=function(){throw Error("_digest is not implemented");
};var a4=Bs,Ksa=aj.Buffer,fg=Array(16);$h(Vz,a4);Vz.prototype._update=function(){for(var n=0;16>n;++n)fg[n]=this._block.readInt32LE(4*n);n=this._a;var a=this._b,d=this._c,k=this._d;n=bn(n,a,d,k,fg[0],3614090360,7);k=bn(k,n,a,d,fg[1],3905402710,12);d=bn(d,k,n,a,fg[2],606105819,17);a=bn(a,d,k,n,fg[3],3250441966,22);n=bn(n,a,d,k,fg[4],4118548399,7);k=bn(k,n,a,d,fg[5],1200080426,12);d=bn(d,k,n,a,fg[6],2821735955,17);a=bn(a,d,k,n,fg[7],4249261313,22);n=bn(n,a,d,k,fg[8],1770035416,7);k=bn(k,n,a,d,fg[9],
2336552879,12);d=bn(d,k,n,a,fg[10],4294925233,17);a=bn(a,d,k,n,fg[11],2304563134,22);n=bn(n,a,d,k,fg[12],1804603682,7);k=bn(k,n,a,d,fg[13],4254626195,12);d=bn(d,k,n,a,fg[14],2792965006,17);n=cn(n,a=bn(a,d,k,n,fg[15],1236535329,22),d,k,fg[1],4129170786,5);k=cn(k,n,a,d,fg[6],3225465664,9);d=cn(d,k,n,a,fg[11],643717713,14);a=cn(a,d,k,n,fg[0],3921069994,20);n=cn(n,a,d,k,fg[5],3593408605,5);k=cn(k,n,a,d,fg[10],38016083,9);d=cn(d,k,n,a,fg[15],3634488961,14);a=cn(a,d,k,n,fg[4],3889429448,20);n=cn(n,a,d,
k,fg[9],568446438,5);k=cn(k,n,a,d,fg[14],3275163606,9);d=cn(d,k,n,a,fg[3],4107603335,14);a=cn(a,d,k,n,fg[8],1163531501,20);n=cn(n,a,d,k,fg[13],2850285829,5);k=cn(k,n,a,d,fg[2],4243563512,9);d=cn(d,k,n,a,fg[7],1735328473,14);n=dn(n,a=cn(a,d,k,n,fg[12],2368359562,20),d,k,fg[5],4294588738,4);k=dn(k,n,a,d,fg[8],2272392833,11);d=dn(d,k,n,a,fg[11],1839030562,16);a=dn(a,d,k,n,fg[14],4259657740,23);n=dn(n,a,d,k,fg[1],2763975236,4);k=dn(k,n,a,d,fg[4],1272893353,11);d=dn(d,k,n,a,fg[7],4139469664,16);a=dn(a,
d,k,n,fg[10],3200236656,23);n=dn(n,a,d,k,fg[13],681279174,4);k=dn(k,n,a,d,fg[0],3936430074,11);d=dn(d,k,n,a,fg[3],3572445317,16);a=dn(a,d,k,n,fg[6],76029189,23);n=dn(n,a,d,k,fg[9],3654602809,4);k=dn(k,n,a,d,fg[12],3873151461,11);d=dn(d,k,n,a,fg[15],530742520,16);n=en(n,a=dn(a,d,k,n,fg[2],3299628645,23),d,k,fg[0],4096336452,6);k=en(k,n,a,d,fg[7],1126891415,10);d=en(d,k,n,a,fg[14],2878612391,15);a=en(a,d,k,n,fg[5],4237533241,21);n=en(n,a,d,k,fg[12],1700485571,6);k=en(k,n,a,d,fg[3],2399980690,10);d=
en(d,k,n,a,fg[10],4293915773,15);a=en(a,d,k,n,fg[1],2240044497,21);n=en(n,a,d,k,fg[8],1873313359,6);k=en(k,n,a,d,fg[15],4264355552,10);d=en(d,k,n,a,fg[6],2734768916,15);a=en(a,d,k,n,fg[13],1309151649,21);n=en(n,a,d,k,fg[4],4149444226,6);k=en(k,n,a,d,fg[11],3174756917,10);d=en(d,k,n,a,fg[2],718787259,15);a=en(a,d,k,n,fg[9],3951481745,21);this._a=this._a+n|0;this._b=this._b+a|0;this._c=this._c+d|0;this._d=this._d+k|0};Vz.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&
(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=Ksa.allocUnsafe(16);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n};var OW=Rh.Buffer,b4=Bs,Bq=Array(16),gF=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,
2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],hF=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],iF=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],jF=[8,
9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],kF=[0,1518500249,1859775393,2400959708,2840853838],lF=[1352829926,1548603684,1836072691,2053994217,0];$h(Wz,b4);Wz.prototype._update=function(){for(var n=0;16>n;++n)Bq[n]=this._block.readInt32LE(4*n);var a=0|this._a;n=0|this._b;for(var d=0|this._c,k=0|this._d,b=0|this._e,e=0|this._a,l=0|this._b,p=0|this._c,
u=0|this._d,x=0|this._e,z=0;80>z;z+=1){if(16>z){var E=b;E=ip(a+(n^d^k)+Bq[gF[z]]+kF[0]|0,iF[z])+E|0;a=x;var G=ip(e+(l^(p|~u))+Bq[hF[z]]+lF[0]|0,jF[z])+a|0}else 32>z?(E=b,E=ip(a+(n&d|~n&k)+Bq[gF[z]]+kF[1]|0,iF[z])+E|0,a=x,G=ip(e+(l&u|p&~u)+Bq[hF[z]]+lF[1]|0,jF[z])+a|0):48>z?(E=b,E=ip(a+((n|~d)^k)+Bq[gF[z]]+kF[2]|0,iF[z])+E|0,a=x,G=ip(e+((l|~p)^u)+Bq[hF[z]]+lF[2]|0,jF[z])+a|0):64>z?(E=b,E=ip(a+(n&k|d&~k)+Bq[gF[z]]+kF[3]|0,iF[z])+E|0,a=x,G=ip(e+(l&p|~l&u)+Bq[hF[z]]+lF[3]|0,jF[z])+a|0):(E=b,E=ip(a+(n^
(d|~k))+Bq[gF[z]]+kF[4]|0,iF[z])+E|0,a=x,G=ip(e+(l^p^u)+Bq[hF[z]]+lF[4]|0,jF[z])+a|0);a=b;b=k;k=ip(d,10);d=n;n=E;e=x;x=u;u=ip(p,10);p=l;l=G}d=this._b+d+u|0;this._b=this._c+k+x|0;this._c=this._d+b+e|0;this._d=this._e+a+l|0;this._e=this._a+n+p|0;this._a=d};Wz.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],
56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=OW.alloc?OW.alloc(20):new OW(20);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n.writeInt32LE(this._e,16),n};var Fk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,c4=aj.Buffer;Cs.prototype.update=function(n,a){"string"==typeof n&&(a=a||"utf8",n=c4.from(n,a));a=(this||Fk)._block;for(var d=(this||Fk)._blockSize,k=n.length,b=(this||Fk)._len,
e=0;e<k;){for(var l=b%d,p=Math.min(k-e,d-l),u=0;u<p;u++)a[l+u]=n[e+u];e+=p;0==(b+=p)%d&&this._update(a)}return(this||Fk)._len+=k,this||Fk};Cs.prototype.digest=function(n){var a=(this||Fk)._len%(this||Fk)._blockSize;(this||Fk)._block[a]=128;(this||Fk)._block.fill(0,a+1);a>=(this||Fk)._finalSize&&(this._update((this||Fk)._block),(this||Fk)._block.fill(0));a=8*(this||Fk)._len;if(4294967295>=a)(this||Fk)._block.writeUInt32BE(a,(this||Fk)._blockSize-4);else{var d=(4294967295&a)>>>0;(this||Fk)._block.writeUInt32BE((a-
d)/4294967296,(this||Fk)._blockSize-8);(this||Fk)._block.writeUInt32BE(d,(this||Fk)._blockSize-4)}this._update((this||Fk)._block);a=this._hash();return n?a.toString(n):a};Cs.prototype._update=function(){throw Error("_update must be implemented by subclass");};var Sh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,d4=Cs,Lsa=aj.Buffer,Msa=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,
2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,
2428436474,2756734187,3204031479,3329325298],Mja=Array(64);$h(Xz,d4);Xz.prototype.init=function(){return(this||Sh)._a=1779033703,(this||Sh)._b=3144134277,(this||Sh)._c=1013904242,(this||Sh)._d=2773480762,(this||Sh)._e=1359893119,(this||Sh)._f=2600822924,(this||Sh)._g=528734635,(this||Sh)._h=1541459225,this||Sh};Xz.prototype._update=function(n){for(var a,d=(this||Sh)._w,k=0|(this||Sh)._a,b=0|(this||Sh)._b,e=0|(this||Sh)._c,l=0|(this||Sh)._d,p=0|(this||Sh)._e,u=0|(this||Sh)._f,x=0|(this||Sh)._g,z=0|
(this||Sh)._h,E=0;16>E;++E)d[E]=n.readInt32BE(4*E);for(;64>E;++E){n=E;var G=(((a=d[E-2])>>>17|a<<15)^(a>>>19|a<<13)^a>>>10)+d[E-7],J=d[E-15];d[n]=0|G+((J>>>7|J<<25)^(J>>>18|J<<14)^J>>>3)+d[E-16]}for(a=0;64>a;++a)E=z+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(x^p&(u^x))+Msa[a]+d[a]|0,n=((k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10))+(k&b|e&(k|b))|0,z=x,x=u,u=p,p=l+E|0,l=e,e=b,b=k,k=E+n|0;(this||Sh)._a=k+(this||Sh)._a|0;(this||Sh)._b=b+(this||Sh)._b|0;(this||Sh)._c=e+(this||Sh)._c|0;(this||Sh)._d=
l+(this||Sh)._d|0;(this||Sh)._e=p+(this||Sh)._e|0;(this||Sh)._f=u+(this||Sh)._f|0;(this||Sh)._g=x+(this||Sh)._g|0;(this||Sh)._h=z+(this||Sh)._h|0};Xz.prototype._hash=function(){var n=Lsa.allocUnsafe(32);return n.writeInt32BE((this||Sh)._a,0),n.writeInt32BE((this||Sh)._b,4),n.writeInt32BE((this||Sh)._c,8),n.writeInt32BE((this||Sh)._d,12),n.writeInt32BE((this||Sh)._e,16),n.writeInt32BE((this||Sh)._f,20),n.writeInt32BE((this||Sh)._g,24),n.writeInt32BE((this||Sh)._h,28),n};var ak="undefined"!=typeof globalThis?
globalThis:"undefined"!=typeof self?self:global,e4=Cs,Nsa=aj.Buffer,Osa=[1518500249,1859775393,-1894007588,-899497514],Nja=Array(80);$h(qD,e4);qD.prototype.init=function(){return(this||ak)._a=1732584193,(this||ak)._b=4023233417,(this||ak)._c=2562383102,(this||ak)._d=271733878,(this||ak)._e=3285377520,this||ak};qD.prototype._update=function(n){for(var a,d=(this||ak)._w,k=0|(this||ak)._a,b=0|(this||ak)._b,e=0|(this||ak)._c,l=0|(this||ak)._d,p=0|(this||ak)._e,u=0;16>u;++u)d[u]=n.readInt32BE(4*u);for(;80>
u;++u)d[u]=d[u-3]^d[u-8]^d[u-14]^d[u-16];for(n=0;80>n;++n)u=~~(n/20),u=0|((a=k)<<5|a>>>27)+(0===u?b&e|~b&l:2===u?b&e|b&l|e&l:b^e^l)+p+d[n]+Osa[u],p=l,l=e,e=b<<30|b>>>2,b=k,k=u;(this||ak)._a=k+(this||ak)._a|0;(this||ak)._b=b+(this||ak)._b|0;(this||ak)._c=e+(this||ak)._c|0;(this||ak)._d=l+(this||ak)._d|0;(this||ak)._e=p+(this||ak)._e|0};qD.prototype._hash=function(){var n=Nsa.allocUnsafe(20);return n.writeInt32BE(0|(this||ak)._a,0),n.writeInt32BE(0|(this||ak)._b,4),n.writeInt32BE(0|(this||ak)._c,8),
n.writeInt32BE(0|(this||ak)._d,12),n.writeInt32BE(0|(this||ak)._e,16),n};var bk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,f4=Cs,Psa=aj.Buffer,Qsa=[1518500249,1859775393,-1894007588,-899497514],Oja=Array(80);$h(rD,f4);rD.prototype.init=function(){return(this||bk)._a=1732584193,(this||bk)._b=4023233417,(this||bk)._c=2562383102,(this||bk)._d=271733878,(this||bk)._e=3285377520,this||bk};rD.prototype._update=function(n){for(var a,d=(this||bk)._w,k=0|(this||bk)._a,b=
0|(this||bk)._b,e=0|(this||bk)._c,l=0|(this||bk)._d,p=0|(this||bk)._e,u=0;16>u;++u)d[u]=n.readInt32BE(4*u);for(;80>u;++u)d[u]=(a=d[u-3]^d[u-8]^d[u-14]^d[u-16])<<1|a>>>31;for(n=0;80>n;++n)a=~~(n/20),a=(k<<5|k>>>27)+(0===a?b&e|~b&l:2===a?b&e|b&l|e&l:b^e^l)+p+d[n]+Qsa[a]|0,p=l,l=e,e=b<<30|b>>>2,b=k,k=a;(this||bk)._a=k+(this||bk)._a|0;(this||bk)._b=b+(this||bk)._b|0;(this||bk)._c=e+(this||bk)._c|0;(this||bk)._d=l+(this||bk)._d|0;(this||bk)._e=p+(this||bk)._e|0};rD.prototype._hash=function(){var n=Psa.allocUnsafe(20);
return n.writeInt32BE(0|(this||bk)._a,0),n.writeInt32BE(0|(this||bk)._b,4),n.writeInt32BE(0|(this||bk)._c,8),n.writeInt32BE(0|(this||bk)._d,12),n.writeInt32BE(0|(this||bk)._e,16),n};var km="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Qja=Cs,Rsa=aj.Buffer,Pja=Array(64);$h(kJ,Xz);kJ.prototype.init=function(){return(this||km)._a=3238371032,(this||km)._b=914150663,(this||km)._c=812702999,(this||km)._d=4144912697,(this||km)._e=4290775857,(this||km)._f=1750603025,(this||
km)._g=1694076839,(this||km)._h=3204075428,this||km};kJ.prototype._hash=function(){var n=Rsa.allocUnsafe(28);return n.writeInt32BE((this||km)._a,0),n.writeInt32BE((this||km)._b,4),n.writeInt32BE((this||km)._c,8),n.writeInt32BE((this||km)._d,12),n.writeInt32BE((this||km)._e,16),n.writeInt32BE((this||km)._f,20),n.writeInt32BE((this||km)._g,24),n};var jf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,g4=Cs,Ssa=aj.Buffer,uaa=[1116352408,3609767458,1899447441,602891725,
3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,
766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,
506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,
587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],Rja=Array(160);$h(Yz,g4);Yz.prototype.init=function(){return(this||jf)._ah=1779033703,(this||jf)._bh=3144134277,(this||jf)._ch=1013904242,(this||jf)._dh=2773480762,(this||jf)._eh=1359893119,(this||jf)._fh=2600822924,(this||jf)._gh=528734635,(this||jf)._hh=1541459225,(this||jf)._al=4089235720,(this||jf)._bl=2227873595,(this||jf)._cl=4271175723,
(this||jf)._dl=1595750129,(this||jf)._el=2917565137,(this||jf)._fl=725511199,(this||jf)._gl=4215389547,(this||jf)._hl=327033209,this||jf};Yz.prototype._update=function(n){for(var a=(this||jf)._w,d=0|(this||jf)._ah,k=0|(this||jf)._bh,b=0|(this||jf)._ch,e=0|(this||jf)._dh,l=0|(this||jf)._eh,p=0|(this||jf)._fh,u=0|(this||jf)._gh,x=0|(this||jf)._hh,z=0|(this||jf)._al,E=0|(this||jf)._bl,G=0|(this||jf)._cl,J=0|(this||jf)._dl,K=0|(this||jf)._el,T=0|(this||jf)._fl,P=0|(this||jf)._gl,da=0|(this||jf)._hl,fa=
0;32>fa;fa+=2)a[fa]=n.readInt32BE(4*fa),a[fa+1]=n.readInt32BE(4*fa+4);for(;160>fa;fa+=2){n=a[fa-30];var ka=a[fa-30+1],za=(n>>>1|ka<<31)^(n>>>8|ka<<24)^n>>>7,Ia=(ka>>>1|n<<31)^(ka>>>8|n<<24)^(ka>>>7|n<<25);var N=n=a[fa-4];var ia=ka=a[fa-4+1];N=(N>>>19|ia<<13)^(ia>>>29|N<<3)^N>>>6;ka=(ka>>>19|n<<13)^(n>>>29|ka<<3)^(ka>>>6|n<<26);ia=a[fa-32];var W=a[fa-32+1];n=Ia+a[fa-14+1]|0;za=za+a[fa-14]+lm(n,Ia)|0;za=(za=za+N+lm(n=n+ka|0,ka)|0)+ia+lm(n=n+W|0,W)|0;a[fa]=za;a[fa+1]=n}for(fa=0;160>fa;fa+=2){za=a[fa];
n=a[fa+1];ka=d&k|b&(d|k);var ca=z&E|G&(z|E);ia=(d>>>28|z<<4)^(z>>>2|d<<30)^(z>>>7|d<<25);W=(z>>>28|d<<4)^(d>>>2|z<<30)^(d>>>7|z<<25);var sa=uaa[fa],la=uaa[fa+1],Aa=u^l&(p^u),ib=P^K&(T^P);Ia=da+((K>>>14|l<<18)^(K>>>18|l<<14)^(l>>>9|K<<23))|0;N=x+((l>>>14|K<<18)^(l>>>18|K<<14)^(K>>>9|l<<23))+lm(Ia,da)|0;N=(N=(N=N+Aa+lm(Ia=Ia+ib|0,ib)|0)+sa+lm(Ia=Ia+la|0,la)|0)+za+lm(Ia=Ia+n|0,n)|0;n=W+ca|0;za=ia+ka+lm(n,W)|0;x=u;da=P;u=p;P=T;p=l;T=K;l=e+N+lm(K=J+Ia|0,J)|0;e=b;J=G;b=k;G=E;k=d;E=z;d=N+za+lm(z=Ia+n|0,
Ia)|0}(this||jf)._al=(this||jf)._al+z|0;(this||jf)._bl=(this||jf)._bl+E|0;(this||jf)._cl=(this||jf)._cl+G|0;(this||jf)._dl=(this||jf)._dl+J|0;(this||jf)._el=(this||jf)._el+K|0;(this||jf)._fl=(this||jf)._fl+T|0;(this||jf)._gl=(this||jf)._gl+P|0;(this||jf)._hl=(this||jf)._hl+da|0;(this||jf)._ah=(this||jf)._ah+d+lm((this||jf)._al,z)|0;(this||jf)._bh=(this||jf)._bh+k+lm((this||jf)._bl,E)|0;(this||jf)._ch=(this||jf)._ch+b+lm((this||jf)._cl,G)|0;(this||jf)._dh=(this||jf)._dh+e+lm((this||jf)._dl,J)|0;(this||
jf)._eh=(this||jf)._eh+l+lm((this||jf)._el,K)|0;(this||jf)._fh=(this||jf)._fh+p+lm((this||jf)._fl,T)|0;(this||jf)._gh=(this||jf)._gh+u+lm((this||jf)._gl,P)|0;(this||jf)._hh=(this||jf)._hh+x+lm((this||jf)._hl,da)|0};Yz.prototype._hash=function(){function n(d,k,b){a.writeInt32BE(d,b);a.writeInt32BE(k,b+4)}var a=Ssa.allocUnsafe(64);return n((this||jf)._ah,(this||jf)._al,0),n((this||jf)._bh,(this||jf)._bl,8),n((this||jf)._ch,(this||jf)._cl,16),n((this||jf)._dh,(this||jf)._dl,24),n((this||jf)._eh,(this||
jf)._el,32),n((this||jf)._fh,(this||jf)._fl,40),n((this||jf)._gh,(this||jf)._gl,48),n((this||jf)._hh,(this||jf)._hl,56),a};var Fj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Tja=Cs,Tsa=aj.Buffer,Sja=Array(160);$h(lJ,Yz);lJ.prototype.init=function(){return(this||Fj)._ah=3418070365,(this||Fj)._bh=1654270250,(this||Fj)._ch=2438529370,(this||Fj)._dh=355462360,(this||Fj)._eh=1731405415,(this||Fj)._fh=2394180231,(this||Fj)._gh=3675008525,(this||Fj)._hh=1203062813,(this||
Fj)._al=3238371032,(this||Fj)._bl=914150663,(this||Fj)._cl=812702999,(this||Fj)._dl=4144912697,(this||Fj)._el=4290775857,(this||Fj)._fl=1750603025,(this||Fj)._gl=1694076839,(this||Fj)._hl=3204075428,this||Fj};lJ.prototype._hash=function(){function n(d,k,b){a.writeInt32BE(d,b);a.writeInt32BE(k,b+4)}var a=Tsa.allocUnsafe(48);return n((this||Fj)._ah,(this||Fj)._al,0),n((this||Fj)._bh,(this||Fj)._bl,8),n((this||Fj)._ch,(this||Fj)._cl,16),n((this||Fj)._dh,(this||Fj)._dl,24),n((this||Fj)._eh,(this||Fj)._el,
32),n((this||Fj)._fh,(this||Fj)._fl,40),a};var Pu,vaa=Pu={};(Pu=vaa=function(n){n=n.toLowerCase();var a=Pu[n];if(!a)throw Error(n+" is not supported (we accept pull requests)");return new a}).sha=qD;Pu.sha1=rD;Pu.sha224=kJ;Pu.sha256=Xz;Pu.sha384=lJ;Pu.sha512=Yz;var PW=vaa,Yk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,waa=aj.Buffer,h4=Zw.Transform,Usa=Uz.StringDecoder;$h(mm,h4);mm.prototype.update=function(n,a,d){"string"==typeof n&&(n=waa.from(n,a));n=this._update(n);
return(this||Yk).hashMode?this||Yk:(d&&(n=this._toString(n,d)),n)};mm.prototype.setAutoPadding=function(){};mm.prototype.getAuthTag=function(){throw Error("trying to get auth tag in unsupported state");};mm.prototype.setAuthTag=function(){throw Error("trying to set auth tag in unsupported state");};mm.prototype.setAAD=function(){throw Error("trying to set aad in unsupported state");};mm.prototype._transform=function(n,a,d){try{(this||Yk).hashMode?this._update(n):this.push(this._update(n))}catch(b){var k=
b}finally{d(k)}};mm.prototype._flush=function(n){try{this.push(this.__final())}catch(d){var a=d}n(a)};mm.prototype._finalOrDigest=function(n){var a=this.__final()||waa.alloc(0);return n&&(a=this._toString(a,n,!0)),a};mm.prototype._toString=function(n,a,d){if((this||Yk)._decoder||((this||Yk)._decoder=new Usa(a),(this||Yk)._encoding=a),(this||Yk)._encoding!==a)throw Error("can't switch encodings");n=(this||Yk)._decoder.write(n);return d&&(n+=(this||Yk)._decoder.end()),n};var i4=mm;$h(mJ,i4);mJ.prototype._update=
function(n){this._hash.update(n)};mJ.prototype._final=function(){return this._hash.digest()};var mF=function(n){return"md5"===(n=n.toLowerCase())?new Vz:"rmd160"===n||"ripemd160"===n?new Wz:new mJ(PW(n))},xaa=function(n){return(new Vz).update(n).digest()},Vsa=$h,Nw=aj.Buffer,j4=mm,Uja=Nw.alloc(128);Vsa(nJ,j4);nJ.prototype._update=function(n){this._hash.push(n)};nJ.prototype._final=function(){var n=this._alg(Nw.concat(this._hash));return this._alg(Nw.concat([this._opad,n]))};var Wsa=$h,k4=mm,tD=aj.Buffer,
wS=Wz,xS=PW,Vja=tD.alloc(128);Wsa(sD,k4);sD.prototype._update=function(n){this._hash.update(n)};sD.prototype._final=function(){var n=this._hash.digest();return("rmd160"===this._alg?new wS:xS(this._alg)).update(this._opad).update(n).digest()};var yaa=function(n,a){return"rmd160"===(n=n.toLowerCase())||"ripemd160"===n?new sD("rmd160",a):"md5"===n?new nJ(xaa,a):new sD(n,a)},zaa={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",
hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},
"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",
hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",
hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},Wja=Rh.Buffer,Xsa=Math.pow(2,30)-1,QW,Aaa=function(n,a,d,k){if(l4(n,"Password"),l4(a,"Salt"),"number"!=typeof d)throw new TypeError("Iterations not a number");if(0>d)throw new TypeError("Bad iterations");if("number"!=typeof k)throw new TypeError("Key length not a number");if(0>k||k>Xsa||
k!=k)throw new TypeError("Bad key length");},Baa=Li;Baa.browser?QW="utf-8":QW=6<=parseInt(Baa.version.split(".")[0].slice(1),10)?"utf-8":"binary";var hN=QW,eq="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Zja=xaa,Yja=Wz,Xja=PW,dq=aj.Buffer,$ja=dq.alloc(128),oJ={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};m4.prototype.run=function(n,a){return n.copy(a,(this||eq).blocksize),this.hash(a).copy((this||eq).opad,(this||eq).blocksize),this.hash((this||
eq).opad)};var RW,SW=function(n,a,d,k,b){Aaa(n,a,d,k);dq.isBuffer(n)||(n=dq.from(n,hN));dq.isBuffer(a)||(a=dq.from(a,hN));n=new m4(b=b||"sha1",n,a.length);var e=dq.allocUnsafe(k),l=dq.allocUnsafe(a.length+4);a.copy(l,0,0,a.length);var p=0;b=oJ[b];k=Math.ceil(k/b);for(var u=1;u<=k;u++){l.writeUInt32BE(u,a.length);for(var x=n.run(l,n.ipad1),z=x,E=1;E<d;E++){z=n.run(z,n.ipad2);for(var G=0;G<b;G++)x[G]^=z[G]}x.copy(e,p);p+=b}return e},nF="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?
self:global,TW=Li,Zz=aj.Buffer,uD=nF.crypto&&nF.crypto.subtle,Ysa={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},UW=[],iN={pbkdf2:function(n,a,d,k,b,e){"function"==typeof b&&(e=b,b=void 0);var l=Ysa[(b=b||"sha1").toLowerCase()];if(!l||"function"!=typeof nF.Promise)return TW.nextTick(function(){try{var p=SW(n,a,d,k,b)}catch(u){return e(u)}e(null,p)});if(Aaa(n,a,d,k),"function"!=typeof e)throw Error("No callback provided to pbkdf2");
Zz.isBuffer(n)||(n=Zz.from(n,hN));Zz.isBuffer(a)||(a=Zz.from(a,hN));(function(p,u){p.then(function(x){TW.nextTick(function(){u(null,x)})},function(x){TW.nextTick(function(){u(x)})})})(function(p){if(nF.process&&!nF.process.browser||!uD||!uD.importKey||!uD.deriveBits)return Promise.resolve(!1);if(void 0!==UW[p])return UW[p];var u=n4(RW=RW||Zz.alloc(8),RW,10,128,p).then(function(){return!0}).catch(function(){return!1});return UW[p]=u,u}(l).then(function(p){return p?n4(n,a,d,k,l):SW(n,a,d,k,b)}),e)}};
iN.pbkdf2Sync=SW;o4.equal=function(n,a,d){if(n!=a)throw Error(d||"Assertion failed: "+n+" != "+a);};var sp=o4,Pk={readUInt32BE:function(n,a){return(n[0+a]<<24|n[1+a]<<16|n[2+a]<<8|n[3+a])>>>0},writeUInt32BE:function(n,a,d){n[0+d]=a>>>24;n[1+d]=a>>>16&255;n[2+d]=a>>>8&255;n[3+d]=255&a},ip:function(n,a,d,k){for(var b=0,e=0,l=6;0<=l;l-=2){for(var p=0;24>=p;p+=8)b<<=1,b|=a>>>p+l&1;for(p=0;24>=p;p+=8)b<<=1,b|=n>>>p+l&1}for(l=6;0<=l;l-=2){for(p=1;25>=p;p+=8)e<<=1,e|=a>>>p+l&1;for(p=1;25>=p;p+=8)e<<=1,e|=
n>>>p+l&1}d[k+0]=b>>>0;d[k+1]=e>>>0},rip:function(n,a,d,k){for(var b=0,e=0,l=0;4>l;l++)for(var p=24;0<=p;p-=8)b<<=1,b|=a>>>p+l&1,b<<=1,b|=n>>>p+l&1;for(l=4;8>l;l++)for(p=24;0<=p;p-=8)e<<=1,e|=a>>>p+l&1,e<<=1,e|=n>>>p+l&1;d[k+0]=b>>>0;d[k+1]=e>>>0},pc1:function(n,a,d,k){for(var b=0,e=0,l=7;5<=l;l--){for(var p=0;24>=p;p+=8)b<<=1,b|=a>>p+l&1;for(p=0;24>=p;p+=8)b<<=1,b|=n>>p+l&1}for(p=0;24>=p;p+=8)b<<=1,b|=a>>p+l&1;for(l=1;3>=l;l++){for(p=0;24>=p;p+=8)e<<=1,e|=a>>p+l&1;for(p=0;24>=p;p+=8)e<<=1,e|=n>>
p+l&1}for(p=0;24>=p;p+=8)e<<=1,e|=n>>p+l&1;d[k+0]=b>>>0;d[k+1]=e>>>0},r28shl:function(n,a){return n<<a&268435455|n>>>28-a}},jN=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];Pk.pc2=function(n,a,d,k){for(var b=0,e=0,l=jN.length>>>1,p=0;p<l;p++)b<<=1,b|=n>>>jN[p]&1;for(p=l;p<jN.length;p++)e<<=1,e|=a>>>jN[p]&1;d[k+0]=b>>>0;d[k+1]=e>>>0};Pk.expand=function(n,a,d){var k=0;var b=(1&n)<<5|n>>>27;for(var e=23;15<=e;e-=4)b<<=
6,b|=n>>>e&63;for(e=11;3<=e;e-=4)k|=n>>>e&63,k<<=6;a[d+0]=b>>>0;a[d+1]=(k|(31&n)<<1|n>>>31)>>>0};var Caa=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,
9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,
13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];Pk.substitute=function(n,a){for(var d=0,k=0;4>k;k++)d<<=4,d|=Caa[64*k+(n>>>18-6*k&63)];for(k=0;4>k;k++)d<<=4,d|=Caa[256+64*k+(a>>>18-6*k&63)];return d>>>0};var Daa=[16,25,12,11,3,20,
4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];Pk.permute=function(n){for(var a=0,d=0;d<Daa.length;d++)a<<=1,a|=n>>>Daa[d]&1;return a>>>0};Pk.padSplit=function(n,a,d){for(n=n.toString(2);n.length<a;)n="0"+n;for(var k=[],b=0;b<a;b+=d)k.push(n.slice(b,b+d));return k.join(" ")};var Zsa=sp;yo.prototype._init=function(){};yo.prototype.update=function(n){return 0===n.length?[]:"decrypt"===this.type?this._updateDecrypt(n):this._updateEncrypt(n)};yo.prototype._buffer=function(n,a){for(var d=
Math.min(this.buffer.length-this.bufferOff,n.length-a),k=0;k<d;k++)this.buffer[this.bufferOff+k]=n[a+k];return this.bufferOff+=d,d};yo.prototype._flushBuffer=function(n,a){return this._update(this.buffer,0,n,a),this.bufferOff=0,this.blockSize};yo.prototype._updateEncrypt=function(n){var a=0,d=0,k=Array(((this.bufferOff+n.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(a+=this._buffer(n,a),this.bufferOff===this.buffer.length&&(d+=this._flushBuffer(k,d)));for(var b=n.length-(n.length-
a)%this.blockSize;a<b;a+=this.blockSize)this._update(n,a,k,d),d+=this.blockSize;for(;a<n.length;a++,this.bufferOff++)this.buffer[this.bufferOff]=n[a];return k};yo.prototype._updateDecrypt=function(n){for(var a=0,d=0,k=Math.ceil((this.bufferOff+n.length)/this.blockSize)-1,b=Array(k*this.blockSize);0<k;k--)a+=this._buffer(n,a),d+=this._flushBuffer(b,d);return this._buffer(n,a),b};yo.prototype.final=function(n){var a,d;return n&&(a=this.update(n)),d="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),
a?a.concat(d):d};yo.prototype._pad=function(n,a){if(0===a)return!1;for(;a<n.length;)n[a++]=0;return!0};yo.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var n=Array(this.blockSize);return this._update(this.buffer,0,n,0),n};yo.prototype._unpad=function(n){return n};yo.prototype._finalDecrypt=function(){Zsa.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var n=Array(this.blockSize);return this._flushBuffer(n,0),this._unpad(n)};var Eaa=sp,p4=yo;
$h(jp,p4);jp.create=function(n){return new jp(n)};var $sa=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];jp.prototype.deriveKeys=function(n,a){n.keys=Array(32);Eaa.equal(a.length,this.blockSize,"Invalid key length");var d=Pk.readUInt32BE(a,0);a=Pk.readUInt32BE(a,4);Pk.pc1(d,a,n.tmp,0);d=n.tmp[0];a=n.tmp[1];for(var k=0;k<n.keys.length;k+=2){var b=$sa[k>>>1];d=Pk.r28shl(d,b);a=Pk.r28shl(a,b);Pk.pc2(d,a,n.keys,k)}};jp.prototype._update=function(n,a,d,k){var b=this._desState,e=Pk.readUInt32BE(n,a);n=Pk.readUInt32BE(n,
a+4);Pk.ip(e,n,b.tmp,0);e=b.tmp[0];n=b.tmp[1];"encrypt"===this.type?this._encrypt(b,e,n,b.tmp,0):this._decrypt(b,e,n,b.tmp,0);e=b.tmp[0];n=b.tmp[1];Pk.writeUInt32BE(d,e,k);Pk.writeUInt32BE(d,n,k+4)};jp.prototype._pad=function(n,a){for(var d=n.length-a;a<n.length;a++)n[a]=d;return!0};jp.prototype._unpad=function(n){for(var a=n[n.length-1],d=n.length-a;d<n.length;d++)Eaa.equal(n[d],a);return n.slice(0,n.length-a)};jp.prototype._encrypt=function(n,a,d,k,b){for(var e=0;e<n.keys.length;e+=2){var l=n.keys[e],
p=n.keys[e+1];Pk.expand(d,n.tmp,0);l^=n.tmp[0];p^=n.tmp[1];l=Pk.substitute(l,p);p=d;d=(a^Pk.permute(l))>>>0;a=p}Pk.rip(d,a,k,b)};jp.prototype._decrypt=function(n,a,d,k,b){for(var e=n.keys.length-2;0<=e;e-=2){var l=n.keys[e],p=n.keys[e+1];Pk.expand(d,n.tmp,0);l^=n.tmp[0];p^=n.tmp[1];l=Pk.substitute(l,p);p=d;d=(a^Pk.permute(l))>>>0;a=p}Pk.rip(d,a,k,b)};var kN={},cka=sp,ata=$h,lN={};kN.instantiate=function(n){function a(e){n.call(this,e);this._cbcInit()}ata(a,n);for(var d=Object.keys(lN),k=0;k<d.length;k++){var b=
d[k];a.prototype[b]=lN[b]}return a.create=function(e){return new a(e)},a};lN._cbcInit=function(){this._cbcState=new bka(this.options.iv)};lN._update=function(n,a,d,k){var b=this.constructor.super_.prototype,e=this._cbcState.iv;if("encrypt"===this.type){for(var l=0;l<this.blockSize;l++)e[l]^=n[a+l];b._update.call(this,e,0,d,k);for(l=0;l<this.blockSize;l++)e[l]=d[k+l]}else{b._update.call(this,n,a,d,k);for(l=0;l<this.blockSize;l++)d[k+l]^=e[l];for(l=0;l<this.blockSize;l++)e[l]=n[a+l]}};var eka=sp,q4=
yo,cu=jp;$h(nr,q4);nr.create=function(n){return new nr(n)};nr.prototype._update=function(n,a,d,k){var b=this._edeState;b.ciphers[0]._update(n,a,d,k);b.ciphers[1]._update(d,k,d,k);b.ciphers[2]._update(d,k,d,k)};nr.prototype._pad=cu.prototype._pad;nr.prototype._unpad=cu.prototype._unpad;var qJ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,r4=mm,bta=$h,Ow=aj.Buffer,vD={"des-ede3-cbc":kN.instantiate(nr),"des-ede3":nr,"des-ede-cbc":kN.instantiate(nr),"des-ede":nr,"des-cbc":kN.instantiate(jp),
"des-ecb":jp};vD.des=vD["des-cbc"];vD.des3=vD["des-ede3-cbc"];bta(pJ,r4);pJ.prototype._update=function(n){return Ow.from((this||qJ)._des.update(n))};pJ.prototype._final=function(){return Ow.from((this||qJ)._des.final())};var cta=Rh.Buffer,ZA=function(n,a){for(var d=Math.min(n.length,a.length),k=new cta(d),b=0;b<d;++b)k[b]=n[b]^a[b];return k},Faa=function(n){for(var a,d=n.length;d--;){if(255!==(a=n.readUInt8(d))){a++;n.writeUInt8(a,d);break}n.writeUInt8(0,d)}},Gaa={},wD=aj.Buffer,fka=ZA;Gaa.encrypt=
function(n,a,d){for(var k,b=wD.allocUnsafe(0);a.length;){if(0===n._cache.length&&(n._cache=n._cipher.encryptBlock(n._prev),n._prev=wD.allocUnsafe(0)),!(n._cache.length<=a.length)){b=wD.concat([b,s4(n,a,d)]);break}k=n._cache.length;b=wD.concat([b,s4(n,a.slice(0,k),d)]);a=a.slice(k)}return b};var Haa={},VW=aj.Buffer;Haa.encrypt=function(n,a,d){for(var k=a.length,b=VW.allocUnsafe(k),e=-1;++e<k;){var l=e;var p=n;var u=a[e],x=d,z=p._cipher.encryptBlock(p._prev)[0]^u;p=(p._prev=VW.concat([p._prev.slice(1),
VW.from([x?u:z])]),z);b[l]=p}return b};var Iaa={},mN=aj.Buffer;Iaa.encrypt=function(n,a,d){for(var k=a.length,b=mN.allocUnsafe(k),e=-1;++e<k;){for(var l=e,p,u,x=n,z=a[e],E=d,G=-1,J=0;8>++G;){u=z&1<<7-G?128:0;J+=(128&(p=x._cipher.encryptBlock(x._prev)[0]^u))>>G%8;var K=x,T=x._prev;p=E?u:p;u=T.length;var P=-1,da=mN.allocUnsafe(T.length);for(T=mN.concat([T,mN.from([p])]);++P<u;)da[P]=T[P]<<1|T[P+1]>>7;K._prev=da}b[l]=J}return b};var Jaa={},dta=Rh.Buffer;Jaa.encrypt=function(n,a){for(;n._cache.length<
a.length;)n._cache=dta.concat([n._cache,gka(n)]);var d=n._cache.slice(0,a.length);return n._cache=n._cache.slice(a.length),ZA(a,d)};var WW={},Kaa=aj.Buffer;WW.encrypt=function(n,a){var d=Math.ceil(a.length/16),k=n._cache.length;n._cache=Kaa.concat([n._cache,Kaa.allocUnsafe(16*d)]);for(var b=0;b<d;b++){var e=n;var l=e._cipher.encryptBlockRaw(e._prev);e=(Faa(e._prev),l);l=k+16*b;n._cache.writeUInt32BE(e[0],l+0);n._cache.writeUInt32BE(e[1],l+4);n._cache.writeUInt32BE(e[2],l+8);n._cache.writeUInt32BE(e[3],
l+12)}d=n._cache.slice(0,a.length);return n._cache=n._cache.slice(a.length),ZA(a,d)};var Kx={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",
key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},
"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",
key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},eta={ECB:{encrypt:function(n,a){return n._cipher.encryptBlock(a)},decrypt:function(n,a){return n._cipher.decryptBlock(a)}},CBC:{encrypt:function(n,
a){a=ZA(a,n._prev);return n._prev=n._cipher.encryptBlock(a),n._prev},decrypt:function(n,a){var d=n._prev;n._prev=a;n=n._cipher.decryptBlock(a);return ZA(n,d)}},CFB:Gaa,CFB8:Haa,CFB1:Iaa,OFB:Jaa,CTR:WW,GCM:WW},XW;for(XW in Kx)Kx[XW].module=eta[Kx[XW].mode];var lp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,oF={},rJ=aj.Buffer,fta=[0,1,2,4,8,16,32,64,128,27,54],El=function(){for(var n=Array(256),a=0;256>a;a++)n[a]=128>a?a<<1:a<<1^283;a=[];for(var d=[],k=[[],[],[],[]],
b=[[],[],[],[]],e=0,l=0,p=0;256>p;++p){var u=l^l<<1^l<<2^l<<3^l<<4;u=u>>>8^255&u^99;a[e]=u;d[u]=e;var x=n[e],z=n[x],E=n[z],G=257*n[u]^16843008*u;k[0][e]=G<<24|G>>>8;k[1][e]=G<<16|G>>>16;k[2][e]=G<<8|G>>>24;k[3][e]=G;G=16843009*E^65537*z^257*x^16843008*e;b[0][u]=G<<24|G>>>8;b[1][u]=G<<16|G>>>16;b[2][u]=G<<8|G>>>24;b[3][u]=G;0===e?e=l=1:(e=x^n[n[n[E^x]]],l^=n[n[l]])}return{SBOX:a,INV_SBOX:d,SUB_MIX:k,INV_SUB_MIX:b}}();kp.blockSize=16;kp.keySize=32;kp.prototype.blockSize=kp.blockSize;kp.prototype.keySize=
kp.keySize;kp.prototype._reset=function(){for(var n=(this||lp)._key,a=n.length,d=a+6,k=4*(d+1),b=[],e=0;e<a;e++)b[e]=n[e];for(e=a;e<k;e++)n=b[e-1],0==e%a?(n=n<<8|n>>>24,n=El.SBOX[n>>>24]<<24|El.SBOX[n>>>16&255]<<16|El.SBOX[n>>>8&255]<<8|El.SBOX[255&n],n^=fta[e/a|0]<<24):6<a&&4==e%a&&(n=El.SBOX[n>>>24]<<24|El.SBOX[n>>>16&255]<<16|El.SBOX[n>>>8&255]<<8|El.SBOX[255&n]),b[e]=b[e-a]^n;a=[];for(e=0;e<k;e++){n=k-e;var l=b[n-(e%4?0:4)];a[e]=4>e||4>=n?l:El.INV_SUB_MIX[0][El.SBOX[l>>>24]]^El.INV_SUB_MIX[1][El.SBOX[l>>>
16&255]]^El.INV_SUB_MIX[2][El.SBOX[l>>>8&255]]^El.INV_SUB_MIX[3][El.SBOX[255&l]]}(this||lp)._nRounds=d;(this||lp)._keySchedule=b;(this||lp)._invKeySchedule=a};kp.prototype.encryptBlockRaw=function(n){return t4(yS(n),(this||lp)._keySchedule,El.SUB_MIX,El.SBOX,(this||lp)._nRounds)};kp.prototype.encryptBlock=function(n){n=this.encryptBlockRaw(n);var a=rJ.allocUnsafe(16);return a.writeUInt32BE(n[0],0),a.writeUInt32BE(n[1],4),a.writeUInt32BE(n[2],8),a.writeUInt32BE(n[3],12),a};kp.prototype.decryptBlock=
function(n){var a=(n=yS(n))[1];n[1]=n[3];n[3]=a;n=t4(n,(this||lp)._invKeySchedule,El.INV_SUB_MIX,El.INV_SBOX,(this||lp)._nRounds);a=rJ.allocUnsafe(16);return a.writeUInt32BE(n[0],0),a.writeUInt32BE(n[3],4),a.writeUInt32BE(n[2],8),a.writeUInt32BE(n[1],12),a};kp.prototype.scrub=function(){zS((this||lp)._keySchedule);zS((this||lp)._invKeySchedule);zS((this||lp)._key)};oF.AES=kp;var Mm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,$z=aj.Buffer,gta=$z.alloc(16,0);xD.prototype.ghash=
function(n){for(var a=-1;++a<n.length;)(this||Mm).state[a]^=n[a];this._multiply()};xD.prototype._multiply=function(){for(var n,a,d=[(n=(this||Mm).h).readUInt32BE(0),n.readUInt32BE(4),n.readUInt32BE(8),n.readUInt32BE(12)],k=[0,0,0,0],b=-1;128>++b;){0!=((this||Mm).state[~~(b/8)]&1<<7-b%8)&&(k[0]^=d[0],k[1]^=d[1],k[2]^=d[2],k[3]^=d[3]);a=0!=(1&d[3]);for(n=3;0<n;n--)d[n]=d[n]>>>1|(1&d[n-1])<<31;d[0]>>>=1;a&&(d[0]^=-520093696)}(this||Mm).state=u4(k)};xD.prototype.update=function(n){for((this||Mm).cache=
$z.concat([(this||Mm).cache,n]);16<=(this||Mm).cache.length;)n=(this||Mm).cache.slice(0,16),(this||Mm).cache=(this||Mm).cache.slice(16),this.ghash(n)};xD.prototype.final=function(n,a){return(this||Mm).cache.length&&this.ghash($z.concat([(this||Mm).cache,gta],16)),this.ghash(u4([0,n,0,a])),(this||Mm).state};var Ih="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,hka=oF,Zn=aj.Buffer,v4=mm,w4=xD,ika=Faa;$h(du,v4);du.prototype._update=function(n){if(!(this||Ih)._called&&
(this||Ih)._alen){var a=16-(this||Ih)._alen%16;16>a&&(a=Zn.alloc(a,0),(this||Ih)._ghash.update(a))}(this||Ih)._called=!0;a=(this||Ih)._mode.encrypt(this||Ih,n);return(this||Ih)._decrypt?(this||Ih)._ghash.update(n):(this||Ih)._ghash.update(a),(this||Ih)._len+=n.length,a};du.prototype._final=function(){if((this||Ih)._decrypt&&!(this||Ih)._authTag)throw Error("Unsupported state or unable to authenticate data");var n=ZA((this||Ih)._ghash.final(8*(this||Ih)._alen,8*(this||Ih)._len),(this||Ih)._cipher.encryptBlock((this||
Ih)._finID)),a;if(a=(this||Ih)._decrypt){a=(this||Ih)._authTag;var d=0;n.length!==a.length&&d++;for(var k=Math.min(n.length,a.length),b=0;b<k;++b)d+=n[b]^a[b];a=d}if(a)throw Error("Unsupported state or unable to authenticate data");(this||Ih)._authTag=n;(this||Ih)._cipher.scrub()};du.prototype.getAuthTag=function(){if((this||Ih)._decrypt||!Zn.isBuffer((this||Ih)._authTag))throw Error("Attempting to get auth tag in unsupported state");return(this||Ih)._authTag};du.prototype.setAuthTag=function(n){if(!(this||
Ih)._decrypt)throw Error("Attempting to set auth tag in unsupported state");(this||Ih)._authTag=n};du.prototype.setAAD=function(n){if((this||Ih)._called)throw Error("Attempting to set AAD in unsupported state");(this||Ih)._ghash.update(n);(this||Ih)._alen+=n.length};var fq="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,jka=oF,AS=aj.Buffer,x4=mm;$h(yD,x4);yD.prototype._update=function(n){return(this||fq)._mode.encrypt(this||fq,n,(this||fq)._decrypt)};yD.prototype._final=
function(){(this||fq)._cipher.scrub()};var Lx=aj.Buffer,DD=function(n,a,d,k){if(Lx.isBuffer(n)||(n=Lx.from(n,"binary")),a&&(Lx.isBuffer(a)||(a=Lx.from(a,"binary")),8!==a.length))throw new RangeError("salt should be Buffer with 8 byte length");d/=8;for(var b=Lx.alloc(d),e=Lx.alloc(k||0),l=Lx.alloc(0);0<d||0<k;){var p=new Vz;p.update(l);p.update(n);a&&p.update(a);l=p.digest();p=0;if(0<d){var u=b.length-d;p=Math.min(d,l.length);l.copy(b,u,0,p);d-=p}p<l.length&&0<k&&(u=Math.min(k,l.length-p),l.copy(e,
e.length-k,p,p+u),k-=u)}return l.fill(0),{key:b,iv:e}},Gj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,mka=du,aA=aj.Buffer,A4=Kx,lka=yD,y4=mm,kka=oF;$h(zD,y4);zD.prototype._update=function(n){var a;(this||Gj)._cache.add(n);for(n=[];a=(this||Gj)._cache.get((this||Gj)._autopadding);)a=(this||Gj)._mode.decrypt(this||Gj,a),n.push(a);return aA.concat(n)};zD.prototype._final=function(){var n=(this||Gj)._cache.flush();if((this||Gj)._autopadding){n=(this||Gj)._mode.decrypt(this||
Gj,n);var a=n[15];if(1>a||16<a)throw Error("unable to decrypt data");for(var d=-1;++d<a;)if(n[d+(16-a)]!==a)throw Error("unable to decrypt data");n=16===a?void 0:n.slice(0,16-a);return n}if(n)throw Error("data not multiple of block length");};zD.prototype.setAutoPadding=function(n){return(this||Gj)._autopadding=!!n,this||Gj};sJ.prototype.add=function(n){(this||Gj).cache=aA.concat([(this||Gj).cache,n])};sJ.prototype.get=function(n){var a;if(n){if(16<(this||Gj).cache.length)return a=(this||Gj).cache.slice(0,
16),(this||Gj).cache=(this||Gj).cache.slice(16),a}else if(16<=(this||Gj).cache.length)return a=(this||Gj).cache.slice(0,16),(this||Gj).cache=(this||Gj).cache.slice(16),a;return null};sJ.prototype.flush=function(){if((this||Gj).cache.length)return(this||Gj).cache};var pk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,D4=Kx,pka=du,Ds=aj.Buffer,oka=yD,B4=mm,nka=oF;$h(AD,B4);AD.prototype._update=function(n){var a;(this||pk)._cache.add(n);for(n=[];a=(this||pk)._cache.get();)a=
(this||pk)._mode.encrypt(this||pk,a),n.push(a);return Ds.concat(n)};var hta=Ds.alloc(16,16);AD.prototype._final=function(){var n=(this||pk)._cache.flush();if((this||pk)._autopadding)return n=(this||pk)._mode.encrypt(this||pk,n),(this||pk)._cipher.scrub(),n;if(!n.equals(hta))throw(this||pk)._cipher.scrub(),Error("data not multiple of block length");};AD.prototype.setAutoPadding=function(n){return(this||pk)._autopadding=!!n,this||pk};tJ.prototype.add=function(n){(this||pk).cache=Ds.concat([(this||pk).cache,
n])};tJ.prototype.get=function(){if(15<(this||pk).cache.length){var n=(this||pk).cache.slice(0,16);return(this||pk).cache=(this||pk).cache.slice(16),n}return null};tJ.prototype.flush=function(){for(var n=16-(this||pk).cache.length,a=Ds.allocUnsafe(n),d=-1;++d<n;)a.writeUInt8(n,d);return Ds.concat([(this||pk).cache,a])};var Ao={};Ao.createCipher=Ao.Cipher=function(n,a){var d=D4[n.toLowerCase()];if(!d)throw new TypeError("invalid suite type");a=DD(a,!1,d.key,d.iv);return C4(n,a.key,a.iv)};Ao.createCipheriv=
Ao.Cipheriv=C4;Ao.createDecipher=Ao.Decipher=function(n,a){var d=A4[n.toLowerCase()];if(!d)throw new TypeError("invalid suite type");a=DD(a,!1,d.key,d.iv);return z4(n,a.key,a.iv)};Ao.createDecipheriv=Ao.Decipheriv=z4;Ao.listCiphers=Ao.getCiphers=function(){return Object.keys(Kx)};var Qu={"des-ecb":{key:8,iv:0}};Qu["des-cbc"]=Qu.des={key:8,iv:8};Qu["des-ede3-cbc"]=Qu.des3={key:24,iv:8};Qu["des-ede3"]={key:24,iv:0};Qu["des-ede-cbc"]={key:16,iv:8};Qu["des-ede"]={key:16,iv:0};var Laa,Maa,Naa,E4=pJ,CS=
Ao,eu=Kx,Es=Qu;var ita=Laa=function(n,a){if(n=n.toLowerCase(),eu[n]){var d=eu[n].key;var k=eu[n].iv}else{if(!Es[n])throw new TypeError("invalid suite type");d=8*Es[n].key;k=Es[n].iv}a=DD(a,!1,d,k);return BS(n,a.key,a.iv)};var jta=Maa=function(n,a){if(n=n.toLowerCase(),eu[n]){var d=eu[n].key;var k=eu[n].iv}else{if(!Es[n])throw new TypeError("invalid suite type");d=8*Es[n].key;k=Es[n].iv}a=DD(a,!1,d,k);return DS(n,a.key,a.iv)};var kta=Naa=function(){return Object.keys(Es).concat(CS.getCiphers())};var lta=
Object.freeze({}),kb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Oaa={},Paa={exports:Oaa};!function(n,a){function d(N,ia){if(!N)throw Error(ia||"Assertion failed");}function k(N,ia){N.super_=ia;var W=function(){};W.prototype=ia.prototype;N.prototype=new W;N.prototype.constructor=N}function b(N,ia,W){if(b.isBN(N))return N;(this||kb).negative=0;(this||kb).words=null;(this||kb).length=0;(this||kb).red=null;null!==N&&("le"!==ia&&"be"!==ia||(W=ia,ia=10),this._init(N||
0,ia||10,W||"be"))}function e(N,ia,W){var ca=0;for(W=Math.min(N.length,W);ia<W;ia++){var sa=N.charCodeAt(ia)-48;ca<<=4;ca|=49<=sa&&54>=sa?sa-49+10:17<=sa&&22>=sa?sa-17+10:15&sa}return ca}function l(N,ia,W,ca){var sa=0;for(W=Math.min(N.length,W);ia<W;ia++){var la=N.charCodeAt(ia)-48;sa*=ca;sa+=49<=la?la-49+10:17<=la?la-17+10:la}return sa}function p(N,ia,W){W.negative=ia.negative^N.negative;var ca=N.length+ia.length|0;W.length=ca;ca=ca-1|0;var sa=(0|N.words[0])*(0|ia.words[0]),la=sa/67108864|0;W.words[0]=
67108863&sa;for(var Aa=1;Aa<ca;Aa++){var ib=la>>>26;sa=67108863&la;la=Math.min(Aa,ia.length-1);for(var ob=Math.max(0,Aa-N.length+1);ob<=la;ob++)ib+=(sa=(0|N.words[Aa-ob|0])*(0|ia.words[ob])+sa)/67108864|0,sa&=67108863;W.words[Aa]=0|sa;la=0|ib}return 0!==la?W.words[Aa]=0|la:W.length--,W.strip()}function u(N,ia){(this||kb).x=N;(this||kb).y=ia}function x(N,ia){(this||kb).name=N;(this||kb).p=new b(ia,16);(this||kb).n=(this||kb).p.bitLength();(this||kb).k=(new b(1)).iushln((this||kb).n).isub((this||kb).p);
(this||kb).tmp=this._tmp()}function z(){x.call(this||kb,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){x.call(this||kb,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function G(){x.call(this||kb,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function J(){x.call(this||kb,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function K(N){"string"==typeof N?(N=b._prime(N),(this||kb).m=
N.p,(this||kb).prime=N):(d(N.gtn(1),"modulus must be greater than 1"),(this||kb).m=N,(this||kb).prime=null)}function T(N){K.call(this||kb,N);(this||kb).shift=(this||kb).m.bitLength();0!=(this||kb).shift%26&&((this||kb).shift+=26-(this||kb).shift%26);(this||kb).r=(new b(1)).iushln((this||kb).shift);(this||kb).r2=this.imod((this||kb).r.sqr());(this||kb).rinv=(this||kb).r._invmp((this||kb).m);(this||kb).minv=(this||kb).rinv.mul((this||kb).r).isubn(1).div((this||kb).m);(this||kb).minv=(this||kb).minv.umod((this||
kb).r);(this||kb).minv=(this||kb).r.sub((this||kb).minv)}"object"==typeof n?n.exports=b:a.BN=b;b.BN=b;b.wordSize=26;try{var P=lta.Buffer}catch(N){}b.isBN=function(N){return N instanceof b||null!==N&&"object"==typeof N&&N.constructor.wordSize===b.wordSize&&Array.isArray(N.words)};b.max=function(N,ia){return 0<N.cmp(ia)?N:ia};b.min=function(N,ia){return 0>N.cmp(ia)?N:ia};b.prototype._init=function(N,ia,W){if("number"==typeof N)return this._initNumber(N,ia,W);if("object"==typeof N)return this._initArray(N,
ia,W);"hex"===ia&&(ia=16);d(ia===(0|ia)&&2<=ia&&36>=ia);var ca=0;"-"===(N=N.toString().replace(/\s+/g,""))[0]&&ca++;16===ia?this._parseHex(N,ca):this._parseBase(N,ia,ca);"-"===N[0]&&((this||kb).negative=1);this.strip();"le"===W&&this._initArray(this.toArray(),ia,W)};b.prototype._initNumber=function(N,ia,W){0>N&&((this||kb).negative=1,N=-N);67108864>N?((this||kb).words=[67108863&N],(this||kb).length=1):4503599627370496>N?((this||kb).words=[67108863&N,N/67108864&67108863],(this||kb).length=2):(d(9007199254740992>
N),(this||kb).words=[67108863&N,N/67108864&67108863,1],(this||kb).length=3);"le"===W&&this._initArray(this.toArray(),ia,W)};b.prototype._initArray=function(N,ia,W){if(d("number"==typeof N.length),0>=N.length)return(this||kb).words=[0],(this||kb).length=1,this||kb;(this||kb).length=Math.ceil(N.length/3);(this||kb).words=Array((this||kb).length);for(ia=0;ia<(this||kb).length;ia++)(this||kb).words[ia]=0;var ca=0;if("be"===W)for(ia=N.length-1,W=0;0<=ia;ia-=3){var sa=N[ia]|N[ia-1]<<8|N[ia-2]<<16;(this||
kb).words[W]|=sa<<ca&67108863;(this||kb).words[W+1]=sa>>>26-ca&67108863;26<=(ca+=24)&&(ca-=26,W++)}else if("le"===W)for(W=ia=0;ia<N.length;ia+=3)sa=N[ia]|N[ia+1]<<8|N[ia+2]<<16,(this||kb).words[W]|=sa<<ca&67108863,(this||kb).words[W+1]=sa>>>26-ca&67108863,26<=(ca+=24)&&(ca-=26,W++);return this.strip()};b.prototype._parseHex=function(N,ia){(this||kb).length=Math.ceil((N.length-ia)/6);(this||kb).words=Array((this||kb).length);for(var W=0;W<(this||kb).length;W++)(this||kb).words[W]=0;var ca,sa=0;W=N.length-
6;for(ca=0;W>=ia;W-=6){var la=e(N,W,W+6);(this||kb).words[ca]|=la<<sa&67108863;(this||kb).words[ca+1]|=la>>>26-sa&4194303;26<=(sa+=24)&&(sa-=26,ca++)}W+6!==ia&&(la=e(N,ia,W+6),(this||kb).words[ca]|=la<<sa&67108863,(this||kb).words[ca+1]|=la>>>26-sa&4194303);this.strip()};b.prototype._parseBase=function(N,ia,W){(this||kb).words=[0];(this||kb).length=1;for(var ca=0,sa=1;67108863>=sa;sa*=ia)ca++;ca--;sa=sa/ia|0;var la=N.length-W,Aa=la%ca;la=Math.min(la,la-Aa)+W;for(var ib=W;ib<la;ib+=ca)W=l(N,ib,ib+
ca,ia),this.imuln(sa),67108864>(this||kb).words[0]+W?(this||kb).words[0]+=W:this._iaddn(W);if(0!==Aa){ca=1;W=l(N,ib,N.length,ia);for(ib=0;ib<Aa;ib++)ca*=ia;this.imuln(ca);67108864>(this||kb).words[0]+W?(this||kb).words[0]+=W:this._iaddn(W)}};b.prototype.copy=function(N){N.words=Array((this||kb).length);for(var ia=0;ia<(this||kb).length;ia++)N.words[ia]=(this||kb).words[ia];N.length=(this||kb).length;N.negative=(this||kb).negative;N.red=(this||kb).red};b.prototype.clone=function(){var N=new b(null);
return this.copy(N),N};b.prototype._expand=function(N){for(;(this||kb).length<N;)(this||kb).words[(this||kb).length++]=0;return this||kb};b.prototype.strip=function(){for(;1<(this||kb).length&&0===(this||kb).words[(this||kb).length-1];)(this||kb).length--;return this._normSign()};b.prototype._normSign=function(){return 1===(this||kb).length&&0===(this||kb).words[0]&&((this||kb).negative=0),this||kb};b.prototype.inspect=function(){return((this||kb).red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var da=
" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),fa=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ka=[0,0,33554432,43046721,16777216,48828125,60466176,
40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];b.prototype.toString=function(N,ia){if(ia=0|ia||1,16===(N=N||10)||"hex"===N){var W="";for(var ca=N=0,sa=0;sa<(this||kb).length;sa++){var la=(this||kb).words[sa],Aa=(16777215&(la<<N|ca)).toString(16);W=0!==(ca=la>>>24-N&16777215)||sa!==(this||kb).length-
1?da[6-Aa.length]+Aa+W:Aa+W;26<=(N+=2)&&(N-=26,sa--)}for(0!==ca&&(W=ca.toString(16)+W);0!=W.length%ia;)W="0"+W;return 0!==(this||kb).negative&&(W="-"+W),W}if(N===(0|N)&&2<=N&&36>=N){ca=fa[N];sa=ka[N];W="";la=this.clone();for(la.negative=0;!la.isZero();)Aa=la.modn(sa).toString(N),W=(la=la.idivn(sa)).isZero()?Aa+W:da[ca-Aa.length]+Aa+W;for(this.isZero()&&(W="0"+W);0!=W.length%ia;)W="0"+W;return 0!==(this||kb).negative&&(W="-"+W),W}d(!1,"Base should be between 2 and 36")};b.prototype.toNumber=function(){var N=
(this||kb).words[0];return 2===(this||kb).length?N+=67108864*(this||kb).words[1]:3===(this||kb).length&&1===(this||kb).words[2]?N+=4503599627370496+67108864*(this||kb).words[1]:2<(this||kb).length&&d(!1,"Number can only safely store up to 53 bits"),0!==(this||kb).negative?-N:N};b.prototype.toJSON=function(){return this.toString(16)};b.prototype.toBuffer=function(N,ia){return d(void 0!==P),this.toArrayLike(P,N,ia)};b.prototype.toArray=function(N,ia){return this.toArrayLike(Array,N,ia)};b.prototype.toArrayLike=
function(N,ia,W){var ca=this.byteLength();W=W||Math.max(1,ca);d(ca<=W,"byte array longer than desired length");d(0<W,"Requested array length <= 0");this.strip();var sa="le"===ia;N=new N(W);ia=this.clone();if(sa){for(sa=0;!ia.isZero();sa++)ca=ia.andln(255),ia.iushrn(8),N[sa]=ca;for(;sa<W;sa++)N[sa]=0}else{for(sa=0;sa<W-ca;sa++)N[sa]=0;for(sa=0;!ia.isZero();sa++)ca=ia.andln(255),ia.iushrn(8),N[W-sa-1]=ca}return N};Math.clz32?b.prototype._countBits=function(N){return 32-Math.clz32(N)}:b.prototype._countBits=
function(N){var ia=0;return 4096<=N&&(ia+=13,N>>>=13),64<=N&&(ia+=7,N>>>=7),8<=N&&(ia+=4,N>>>=4),2<=N&&(ia+=2,N>>>=2),ia+N};b.prototype._zeroBits=function(N){if(0===N)return 26;var ia=0;return 0==(8191&N)&&(ia+=13,N>>>=13),0==(127&N)&&(ia+=7,N>>>=7),0==(15&N)&&(ia+=4,N>>>=4),0==(3&N)&&(ia+=2,N>>>=2),0==(1&N)&&ia++,ia};b.prototype.bitLength=function(){var N=this._countBits((this||kb).words[(this||kb).length-1]);return 26*((this||kb).length-1)+N};b.prototype.zeroBits=function(){if(this.isZero())return 0;
for(var N=0,ia=0;ia<(this||kb).length;ia++){var W=this._zeroBits((this||kb).words[ia]);if(N+=W,26!==W)break}return N};b.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};b.prototype.toTwos=function(N){return 0!==(this||kb).negative?this.abs().inotn(N).iaddn(1):this.clone()};b.prototype.fromTwos=function(N){return this.testn(N-1)?this.notn(N).iaddn(1).ineg():this.clone()};b.prototype.isNeg=function(){return 0!==(this||kb).negative};b.prototype.neg=function(){return this.clone().ineg()};
b.prototype.ineg=function(){return this.isZero()||((this||kb).negative^=1),this||kb};b.prototype.iuor=function(N){for(;(this||kb).length<N.length;)(this||kb).words[(this||kb).length++]=0;for(var ia=0;ia<N.length;ia++)(this||kb).words[ia]|=N.words[ia];return this.strip()};b.prototype.ior=function(N){return d(0==((this||kb).negative|N.negative)),this.iuor(N)};b.prototype.or=function(N){return(this||kb).length>N.length?this.clone().ior(N):N.clone().ior(this||kb)};b.prototype.uor=function(N){return(this||
kb).length>N.length?this.clone().iuor(N):N.clone().iuor(this||kb)};b.prototype.iuand=function(N){var ia=(this||kb).length>N.length?N:this||kb;for(var W=0;W<ia.length;W++)(this||kb).words[W]&=N.words[W];return(this||kb).length=ia.length,this.strip()};b.prototype.iand=function(N){return d(0==((this||kb).negative|N.negative)),this.iuand(N)};b.prototype.and=function(N){return(this||kb).length>N.length?this.clone().iand(N):N.clone().iand(this||kb)};b.prototype.uand=function(N){return(this||kb).length>
N.length?this.clone().iuand(N):N.clone().iuand(this||kb)};b.prototype.iuxor=function(N){var ia,W;(this||kb).length>N.length?(ia=this||kb,W=N):(ia=N,W=this||kb);for(N=0;N<W.length;N++)(this||kb).words[N]=ia.words[N]^W.words[N];if((this||kb)!==ia)for(;N<ia.length;N++)(this||kb).words[N]=ia.words[N];return(this||kb).length=ia.length,this.strip()};b.prototype.ixor=function(N){return d(0==((this||kb).negative|N.negative)),this.iuxor(N)};b.prototype.xor=function(N){return(this||kb).length>N.length?this.clone().ixor(N):
N.clone().ixor(this||kb)};b.prototype.uxor=function(N){return(this||kb).length>N.length?this.clone().iuxor(N):N.clone().iuxor(this||kb)};b.prototype.inotn=function(N){d("number"==typeof N&&0<=N);var ia=0|Math.ceil(N/26);N%=26;this._expand(ia);0<N&&ia--;for(var W=0;W<ia;W++)(this||kb).words[W]=67108863&~(this||kb).words[W];return 0<N&&((this||kb).words[W]=~(this||kb).words[W]&67108863>>26-N),this.strip()};b.prototype.notn=function(N){return this.clone().inotn(N)};b.prototype.setn=function(N,ia){d("number"==
typeof N&&0<=N);var W=N/26|0;N%=26;return this._expand(W+1),(this||kb).words[W]=ia?(this||kb).words[W]|1<<N:(this||kb).words[W]&~(1<<N),this.strip()};b.prototype.iadd=function(N){var ia,W,ca;if(0!==(this||kb).negative&&0===N.negative)return(this||kb).negative=0,this.isub(N),(this||kb).negative^=1,this._normSign();if(0===(this||kb).negative&&0!==N.negative)return N.negative=0,ia=this.isub(N),N.negative=1,ia._normSign();(this||kb).length>N.length?(W=this||kb,ca=N):(W=N,ca=this||kb);for(N=ia=0;N<ca.length;N++)ia=
(0|W.words[N])+(0|ca.words[N])+ia,(this||kb).words[N]=67108863&ia,ia>>>=26;for(;0!==ia&&N<W.length;N++)ia=(0|W.words[N])+ia,(this||kb).words[N]=67108863&ia,ia>>>=26;if((this||kb).length=W.length,0!==ia)(this||kb).words[(this||kb).length]=ia,(this||kb).length++;else if(W!==(this||kb))for(;N<W.length;N++)(this||kb).words[N]=W.words[N];return this||kb};b.prototype.add=function(N){var ia;return 0!==N.negative&&0===(this||kb).negative?(N.negative=0,ia=this.sub(N),N.negative^=1,ia):0===N.negative&&0!==
(this||kb).negative?((this||kb).negative=0,ia=N.sub(this||kb),(this||kb).negative=1,ia):(this||kb).length>N.length?this.clone().iadd(N):N.clone().iadd(this||kb)};b.prototype.isub=function(N){if(0!==N.negative){N.negative=0;var ia=this.iadd(N);return N.negative=1,ia._normSign()}if(0!==(this||kb).negative)return(this||kb).negative=0,this.iadd(N),(this||kb).negative=1,this._normSign();var W,ca;ia=this.cmp(N);if(0===ia)return(this||kb).negative=0,(this||kb).length=1,(this||kb).words[0]=0,this||kb;0<ia?
(W=this||kb,ca=N):(W=N,ca=this||kb);for(var sa=N=0;sa<ca.length;sa++)N=(ia=(0|W.words[sa])-(0|ca.words[sa])+N)>>26,(this||kb).words[sa]=67108863&ia;for(;0!==N&&sa<W.length;sa++)N=(ia=(0|W.words[sa])+N)>>26,(this||kb).words[sa]=67108863&ia;if(0===N&&sa<W.length&&W!==(this||kb))for(;sa<W.length;sa++)(this||kb).words[sa]=W.words[sa];return(this||kb).length=Math.max((this||kb).length,sa),W!==(this||kb)&&((this||kb).negative=1),this.strip()};b.prototype.sub=function(N){return this.clone().isub(N)};var za=
function(N,ia,W){var ca=N.words,sa=ia.words,la=W.words,Aa=0|ca[0],ib=8191&Aa;Aa>>>=13;var ob=0|ca[1],Ea=8191&ob;ob>>>=13;var ua=0|ca[2],ya=8191&ua;ua>>>=13;var Sa=0|ca[3],Qb=8191&Sa;Sa>>>=13;var mc=0|ca[4],Yb=8191&mc;mc>>>=13;var fc=0|ca[5],Jc=8191&fc;fc>>>=13;var Nb=0|ca[6],ld=8191&Nb;Nb>>>=13;var Od=0|ca[7],ta=8191&Od;Od>>>=13;var Pa=0|ca[8],Ra=8191&Pa;Pa>>>=13;var Cb=0|ca[9];ca=8191&Cb;Cb>>>=13;var ec=0|sa[0],Bd=8191&ec,Ad=ec>>>13,Mc=0|sa[1];ec=8191&Mc;var Ue=Mc>>>13,Me=0|sa[2];Mc=8191&Me;var Fh=
Me>>>13,ch=0|sa[3];Me=8191&ch;var Oi=ch>>>13,Fi=0|sa[4];ch=8191&Fi;var Pi=Fi>>>13,qi=0|sa[5];Fi=8191&qi;var ri=qi>>>13,Sj=0|sa[6];qi=8191&Sj;var Bi=Sj>>>13,Dj=0|sa[7];Sj=8191&Dj;var ek=Dj>>>13,Ej=0|sa[8];Dj=8191&Ej;Ej>>>=13;var fk=0|sa[9];sa=8191&fk;fk>>>=13;W.negative=N.negative^ia.negative;W.length=19;var Lu=(0+Math.imul(ib,Bd)|0)+((8191&(N=(N=Math.imul(ib,Ad))+Math.imul(Aa,Bd)|0))<<13)|0;ia=(Math.imul(Aa,Ad)+(N>>>13)|0)+(Lu>>>26)|0;Lu&=67108863;var Gd=Math.imul(Ea,Bd);N=(N=Math.imul(Ea,Ad))+Math.imul(ob,
Bd)|0;var Hd=Math.imul(ob,Ad);var Ju=(ia+(Gd+Math.imul(ib,ec)|0)|0)+((8191&(N=(N=N+Math.imul(ib,Ue)|0)+Math.imul(Aa,ec)|0))<<13)|0;ia=((Hd+Math.imul(Aa,Ue)|0)+(N>>>13)|0)+(Ju>>>26)|0;Ju&=67108863;Gd=Math.imul(ya,Bd);N=(N=Math.imul(ya,Ad))+Math.imul(ua,Bd)|0;Hd=Math.imul(ua,Ad);Gd=Gd+Math.imul(Ea,ec)|0;N=(N=N+Math.imul(Ea,Ue)|0)+Math.imul(ob,ec)|0;Hd=Hd+Math.imul(ob,Ue)|0;var bt=(ia+(Gd+Math.imul(ib,Mc)|0)|0)+((8191&(N=(N=N+Math.imul(ib,Fh)|0)+Math.imul(Aa,Mc)|0))<<13)|0;ia=((Hd+Math.imul(Aa,Fh)|0)+
(N>>>13)|0)+(bt>>>26)|0;bt&=67108863;Gd=Math.imul(Qb,Bd);N=(N=Math.imul(Qb,Ad))+Math.imul(Sa,Bd)|0;Hd=Math.imul(Sa,Ad);Gd=Gd+Math.imul(ya,ec)|0;N=(N=N+Math.imul(ya,Ue)|0)+Math.imul(ua,ec)|0;Hd=Hd+Math.imul(ua,Ue)|0;Gd=Gd+Math.imul(Ea,Mc)|0;N=(N=N+Math.imul(Ea,Fh)|0)+Math.imul(ob,Mc)|0;Hd=Hd+Math.imul(ob,Fh)|0;var Nr=(ia+(Gd+Math.imul(ib,Me)|0)|0)+((8191&(N=(N=N+Math.imul(ib,Oi)|0)+Math.imul(Aa,Me)|0))<<13)|0;ia=((Hd+Math.imul(Aa,Oi)|0)+(N>>>13)|0)+(Nr>>>26)|0;Nr&=67108863;Gd=Math.imul(Yb,Bd);N=(N=
Math.imul(Yb,Ad))+Math.imul(mc,Bd)|0;Hd=Math.imul(mc,Ad);Gd=Gd+Math.imul(Qb,ec)|0;N=(N=N+Math.imul(Qb,Ue)|0)+Math.imul(Sa,ec)|0;Hd=Hd+Math.imul(Sa,Ue)|0;Gd=Gd+Math.imul(ya,Mc)|0;N=(N=N+Math.imul(ya,Fh)|0)+Math.imul(ua,Mc)|0;Hd=Hd+Math.imul(ua,Fh)|0;Gd=Gd+Math.imul(Ea,Me)|0;N=(N=N+Math.imul(Ea,Oi)|0)+Math.imul(ob,Me)|0;Hd=Hd+Math.imul(ob,Oi)|0;var yx=(ia+(Gd+Math.imul(ib,ch)|0)|0)+((8191&(N=(N=N+Math.imul(ib,Pi)|0)+Math.imul(Aa,ch)|0))<<13)|0;ia=((Hd+Math.imul(Aa,Pi)|0)+(N>>>13)|0)+(yx>>>26)|0;yx&=
67108863;Gd=Math.imul(Jc,Bd);N=(N=Math.imul(Jc,Ad))+Math.imul(fc,Bd)|0;Hd=Math.imul(fc,Ad);Gd=Gd+Math.imul(Yb,ec)|0;N=(N=N+Math.imul(Yb,Ue)|0)+Math.imul(mc,ec)|0;Hd=Hd+Math.imul(mc,Ue)|0;Gd=Gd+Math.imul(Qb,Mc)|0;N=(N=N+Math.imul(Qb,Fh)|0)+Math.imul(Sa,Mc)|0;Hd=Hd+Math.imul(Sa,Fh)|0;Gd=Gd+Math.imul(ya,Me)|0;N=(N=N+Math.imul(ya,Oi)|0)+Math.imul(ua,Me)|0;Hd=Hd+Math.imul(ua,Oi)|0;Gd=Gd+Math.imul(Ea,ch)|0;N=(N=N+Math.imul(Ea,Pi)|0)+Math.imul(ob,ch)|0;Hd=Hd+Math.imul(ob,Pi)|0;var Cx=(ia+(Gd+Math.imul(ib,
Fi)|0)|0)+((8191&(N=(N=N+Math.imul(ib,ri)|0)+Math.imul(Aa,Fi)|0))<<13)|0;ia=((Hd+Math.imul(Aa,ri)|0)+(N>>>13)|0)+(Cx>>>26)|0;Cx&=67108863;Gd=Math.imul(ld,Bd);N=(N=Math.imul(ld,Ad))+Math.imul(Nb,Bd)|0;Hd=Math.imul(Nb,Ad);Gd=Gd+Math.imul(Jc,ec)|0;N=(N=N+Math.imul(Jc,Ue)|0)+Math.imul(fc,ec)|0;Hd=Hd+Math.imul(fc,Ue)|0;Gd=Gd+Math.imul(Yb,Mc)|0;N=(N=N+Math.imul(Yb,Fh)|0)+Math.imul(mc,Mc)|0;Hd=Hd+Math.imul(mc,Fh)|0;Gd=Gd+Math.imul(Qb,Me)|0;N=(N=N+Math.imul(Qb,Oi)|0)+Math.imul(Sa,Me)|0;Hd=Hd+Math.imul(Sa,
Oi)|0;Gd=Gd+Math.imul(ya,ch)|0;N=(N=N+Math.imul(ya,Pi)|0)+Math.imul(ua,ch)|0;Hd=Hd+Math.imul(ua,Pi)|0;Gd=Gd+Math.imul(Ea,Fi)|0;N=(N=N+Math.imul(Ea,ri)|0)+Math.imul(ob,Fi)|0;Hd=Hd+Math.imul(ob,ri)|0;var Dx=(ia+(Gd+Math.imul(ib,qi)|0)|0)+((8191&(N=(N=N+Math.imul(ib,Bi)|0)+Math.imul(Aa,qi)|0))<<13)|0;ia=((Hd+Math.imul(Aa,Bi)|0)+(N>>>13)|0)+(Dx>>>26)|0;Dx&=67108863;Gd=Math.imul(ta,Bd);N=(N=Math.imul(ta,Ad))+Math.imul(Od,Bd)|0;Hd=Math.imul(Od,Ad);Gd=Gd+Math.imul(ld,ec)|0;N=(N=N+Math.imul(ld,Ue)|0)+Math.imul(Nb,
ec)|0;Hd=Hd+Math.imul(Nb,Ue)|0;Gd=Gd+Math.imul(Jc,Mc)|0;N=(N=N+Math.imul(Jc,Fh)|0)+Math.imul(fc,Mc)|0;Hd=Hd+Math.imul(fc,Fh)|0;Gd=Gd+Math.imul(Yb,Me)|0;N=(N=N+Math.imul(Yb,Oi)|0)+Math.imul(mc,Me)|0;Hd=Hd+Math.imul(mc,Oi)|0;Gd=Gd+Math.imul(Qb,ch)|0;N=(N=N+Math.imul(Qb,Pi)|0)+Math.imul(Sa,ch)|0;Hd=Hd+Math.imul(Sa,Pi)|0;Gd=Gd+Math.imul(ya,Fi)|0;N=(N=N+Math.imul(ya,ri)|0)+Math.imul(ua,Fi)|0;Hd=Hd+Math.imul(ua,ri)|0;Gd=Gd+Math.imul(Ea,qi)|0;N=(N=N+Math.imul(Ea,Bi)|0)+Math.imul(ob,qi)|0;Hd=Hd+Math.imul(ob,
Bi)|0;var Ex=(ia+(Gd+Math.imul(ib,Sj)|0)|0)+((8191&(N=(N=N+Math.imul(ib,ek)|0)+Math.imul(Aa,Sj)|0))<<13)|0;ia=((Hd+Math.imul(Aa,ek)|0)+(N>>>13)|0)+(Ex>>>26)|0;Ex&=67108863;Gd=Math.imul(Ra,Bd);N=(N=Math.imul(Ra,Ad))+Math.imul(Pa,Bd)|0;Hd=Math.imul(Pa,Ad);Gd=Gd+Math.imul(ta,ec)|0;N=(N=N+Math.imul(ta,Ue)|0)+Math.imul(Od,ec)|0;Hd=Hd+Math.imul(Od,Ue)|0;Gd=Gd+Math.imul(ld,Mc)|0;N=(N=N+Math.imul(ld,Fh)|0)+Math.imul(Nb,Mc)|0;Hd=Hd+Math.imul(Nb,Fh)|0;Gd=Gd+Math.imul(Jc,Me)|0;N=(N=N+Math.imul(Jc,Oi)|0)+Math.imul(fc,
Me)|0;Hd=Hd+Math.imul(fc,Oi)|0;Gd=Gd+Math.imul(Yb,ch)|0;N=(N=N+Math.imul(Yb,Pi)|0)+Math.imul(mc,ch)|0;Hd=Hd+Math.imul(mc,Pi)|0;Gd=Gd+Math.imul(Qb,Fi)|0;N=(N=N+Math.imul(Qb,ri)|0)+Math.imul(Sa,Fi)|0;Hd=Hd+Math.imul(Sa,ri)|0;Gd=Gd+Math.imul(ya,qi)|0;N=(N=N+Math.imul(ya,Bi)|0)+Math.imul(ua,qi)|0;Hd=Hd+Math.imul(ua,Bi)|0;Gd=Gd+Math.imul(Ea,Sj)|0;N=(N=N+Math.imul(Ea,ek)|0)+Math.imul(ob,Sj)|0;Hd=Hd+Math.imul(ob,ek)|0;var Fx=(ia+(Gd+Math.imul(ib,Dj)|0)|0)+((8191&(N=(N=N+Math.imul(ib,Ej)|0)+Math.imul(Aa,
Dj)|0))<<13)|0;ia=((Hd+Math.imul(Aa,Ej)|0)+(N>>>13)|0)+(Fx>>>26)|0;Fx&=67108863;Gd=Math.imul(ca,Bd);N=(N=Math.imul(ca,Ad))+Math.imul(Cb,Bd)|0;Hd=Math.imul(Cb,Ad);Gd=Gd+Math.imul(Ra,ec)|0;N=(N=N+Math.imul(Ra,Ue)|0)+Math.imul(Pa,ec)|0;Hd=Hd+Math.imul(Pa,Ue)|0;Gd=Gd+Math.imul(ta,Mc)|0;N=(N=N+Math.imul(ta,Fh)|0)+Math.imul(Od,Mc)|0;Hd=Hd+Math.imul(Od,Fh)|0;Gd=Gd+Math.imul(ld,Me)|0;N=(N=N+Math.imul(ld,Oi)|0)+Math.imul(Nb,Me)|0;Hd=Hd+Math.imul(Nb,Oi)|0;Gd=Gd+Math.imul(Jc,ch)|0;N=(N=N+Math.imul(Jc,Pi)|0)+
Math.imul(fc,ch)|0;Hd=Hd+Math.imul(fc,Pi)|0;Gd=Gd+Math.imul(Yb,Fi)|0;N=(N=N+Math.imul(Yb,ri)|0)+Math.imul(mc,Fi)|0;Hd=Hd+Math.imul(mc,ri)|0;Gd=Gd+Math.imul(Qb,qi)|0;N=(N=N+Math.imul(Qb,Bi)|0)+Math.imul(Sa,qi)|0;Hd=Hd+Math.imul(Sa,Bi)|0;Gd=Gd+Math.imul(ya,Sj)|0;N=(N=N+Math.imul(ya,ek)|0)+Math.imul(ua,Sj)|0;Hd=Hd+Math.imul(ua,ek)|0;Gd=Gd+Math.imul(Ea,Dj)|0;N=(N=N+Math.imul(Ea,Ej)|0)+Math.imul(ob,Dj)|0;Hd=Hd+Math.imul(ob,Ej)|0;ib=(ia+(Gd+Math.imul(ib,sa)|0)|0)+((8191&(N=(N=N+Math.imul(ib,fk)|0)+Math.imul(Aa,
sa)|0))<<13)|0;ia=((Hd+Math.imul(Aa,fk)|0)+(N>>>13)|0)+(ib>>>26)|0;ib&=67108863;Gd=Math.imul(ca,ec);N=(N=Math.imul(ca,Ue))+Math.imul(Cb,ec)|0;Hd=Math.imul(Cb,Ue);Gd=Gd+Math.imul(Ra,Mc)|0;N=(N=N+Math.imul(Ra,Fh)|0)+Math.imul(Pa,Mc)|0;Hd=Hd+Math.imul(Pa,Fh)|0;Gd=Gd+Math.imul(ta,Me)|0;N=(N=N+Math.imul(ta,Oi)|0)+Math.imul(Od,Me)|0;Hd=Hd+Math.imul(Od,Oi)|0;Gd=Gd+Math.imul(ld,ch)|0;N=(N=N+Math.imul(ld,Pi)|0)+Math.imul(Nb,ch)|0;Hd=Hd+Math.imul(Nb,Pi)|0;Gd=Gd+Math.imul(Jc,Fi)|0;N=(N=N+Math.imul(Jc,ri)|0)+
Math.imul(fc,Fi)|0;Hd=Hd+Math.imul(fc,ri)|0;Gd=Gd+Math.imul(Yb,qi)|0;N=(N=N+Math.imul(Yb,Bi)|0)+Math.imul(mc,qi)|0;Hd=Hd+Math.imul(mc,Bi)|0;Gd=Gd+Math.imul(Qb,Sj)|0;N=(N=N+Math.imul(Qb,ek)|0)+Math.imul(Sa,Sj)|0;Hd=Hd+Math.imul(Sa,ek)|0;Gd=Gd+Math.imul(ya,Dj)|0;N=(N=N+Math.imul(ya,Ej)|0)+Math.imul(ua,Dj)|0;Hd=Hd+Math.imul(ua,Ej)|0;Aa=(ia+(Gd+Math.imul(Ea,sa)|0)|0)+((8191&(N=(N=N+Math.imul(Ea,fk)|0)+Math.imul(ob,sa)|0))<<13)|0;ia=((Hd+Math.imul(ob,fk)|0)+(N>>>13)|0)+(Aa>>>26)|0;Aa&=67108863;Gd=Math.imul(ca,
Mc);N=(N=Math.imul(ca,Fh))+Math.imul(Cb,Mc)|0;Hd=Math.imul(Cb,Fh);Gd=Gd+Math.imul(Ra,Me)|0;N=(N=N+Math.imul(Ra,Oi)|0)+Math.imul(Pa,Me)|0;Hd=Hd+Math.imul(Pa,Oi)|0;Gd=Gd+Math.imul(ta,ch)|0;N=(N=N+Math.imul(ta,Pi)|0)+Math.imul(Od,ch)|0;Hd=Hd+Math.imul(Od,Pi)|0;Gd=Gd+Math.imul(ld,Fi)|0;N=(N=N+Math.imul(ld,ri)|0)+Math.imul(Nb,Fi)|0;Hd=Hd+Math.imul(Nb,ri)|0;Gd=Gd+Math.imul(Jc,qi)|0;N=(N=N+Math.imul(Jc,Bi)|0)+Math.imul(fc,qi)|0;Hd=Hd+Math.imul(fc,Bi)|0;Gd=Gd+Math.imul(Yb,Sj)|0;N=(N=N+Math.imul(Yb,ek)|0)+
Math.imul(mc,Sj)|0;Hd=Hd+Math.imul(mc,ek)|0;Gd=Gd+Math.imul(Qb,Dj)|0;N=(N=N+Math.imul(Qb,Ej)|0)+Math.imul(Sa,Dj)|0;Hd=Hd+Math.imul(Sa,Ej)|0;Ea=(ia+(Gd+Math.imul(ya,sa)|0)|0)+((8191&(N=(N=N+Math.imul(ya,fk)|0)+Math.imul(ua,sa)|0))<<13)|0;ia=((Hd+Math.imul(ua,fk)|0)+(N>>>13)|0)+(Ea>>>26)|0;Ea&=67108863;Gd=Math.imul(ca,Me);N=(N=Math.imul(ca,Oi))+Math.imul(Cb,Me)|0;Hd=Math.imul(Cb,Oi);Gd=Gd+Math.imul(Ra,ch)|0;N=(N=N+Math.imul(Ra,Pi)|0)+Math.imul(Pa,ch)|0;Hd=Hd+Math.imul(Pa,Pi)|0;Gd=Gd+Math.imul(ta,Fi)|
0;N=(N=N+Math.imul(ta,ri)|0)+Math.imul(Od,Fi)|0;Hd=Hd+Math.imul(Od,ri)|0;Gd=Gd+Math.imul(ld,qi)|0;N=(N=N+Math.imul(ld,Bi)|0)+Math.imul(Nb,qi)|0;Hd=Hd+Math.imul(Nb,Bi)|0;Gd=Gd+Math.imul(Jc,Sj)|0;N=(N=N+Math.imul(Jc,ek)|0)+Math.imul(fc,Sj)|0;Hd=Hd+Math.imul(fc,ek)|0;Gd=Gd+Math.imul(Yb,Dj)|0;N=(N=N+Math.imul(Yb,Ej)|0)+Math.imul(mc,Dj)|0;Hd=Hd+Math.imul(mc,Ej)|0;ob=(ia+(Gd+Math.imul(Qb,sa)|0)|0)+((8191&(N=(N=N+Math.imul(Qb,fk)|0)+Math.imul(Sa,sa)|0))<<13)|0;ia=((Hd+Math.imul(Sa,fk)|0)+(N>>>13)|0)+(ob>>>
26)|0;ob&=67108863;Gd=Math.imul(ca,ch);N=(N=Math.imul(ca,Pi))+Math.imul(Cb,ch)|0;Hd=Math.imul(Cb,Pi);Gd=Gd+Math.imul(Ra,Fi)|0;N=(N=N+Math.imul(Ra,ri)|0)+Math.imul(Pa,Fi)|0;Hd=Hd+Math.imul(Pa,ri)|0;Gd=Gd+Math.imul(ta,qi)|0;N=(N=N+Math.imul(ta,Bi)|0)+Math.imul(Od,qi)|0;Hd=Hd+Math.imul(Od,Bi)|0;Gd=Gd+Math.imul(ld,Sj)|0;N=(N=N+Math.imul(ld,ek)|0)+Math.imul(Nb,Sj)|0;Hd=Hd+Math.imul(Nb,ek)|0;Gd=Gd+Math.imul(Jc,Dj)|0;N=(N=N+Math.imul(Jc,Ej)|0)+Math.imul(fc,Dj)|0;Hd=Hd+Math.imul(fc,Ej)|0;ya=(ia+(Gd+Math.imul(Yb,
sa)|0)|0)+((8191&(N=(N=N+Math.imul(Yb,fk)|0)+Math.imul(mc,sa)|0))<<13)|0;ia=((Hd+Math.imul(mc,fk)|0)+(N>>>13)|0)+(ya>>>26)|0;ya&=67108863;Gd=Math.imul(ca,Fi);N=(N=Math.imul(ca,ri))+Math.imul(Cb,Fi)|0;Hd=Math.imul(Cb,ri);Gd=Gd+Math.imul(Ra,qi)|0;N=(N=N+Math.imul(Ra,Bi)|0)+Math.imul(Pa,qi)|0;Hd=Hd+Math.imul(Pa,Bi)|0;Gd=Gd+Math.imul(ta,Sj)|0;N=(N=N+Math.imul(ta,ek)|0)+Math.imul(Od,Sj)|0;Hd=Hd+Math.imul(Od,ek)|0;Gd=Gd+Math.imul(ld,Dj)|0;N=(N=N+Math.imul(ld,Ej)|0)+Math.imul(Nb,Dj)|0;Hd=Hd+Math.imul(Nb,
Ej)|0;ua=(ia+(Gd+Math.imul(Jc,sa)|0)|0)+((8191&(N=(N=N+Math.imul(Jc,fk)|0)+Math.imul(fc,sa)|0))<<13)|0;ia=((Hd+Math.imul(fc,fk)|0)+(N>>>13)|0)+(ua>>>26)|0;ua&=67108863;Gd=Math.imul(ca,qi);N=(N=Math.imul(ca,Bi))+Math.imul(Cb,qi)|0;Hd=Math.imul(Cb,Bi);Gd=Gd+Math.imul(Ra,Sj)|0;N=(N=N+Math.imul(Ra,ek)|0)+Math.imul(Pa,Sj)|0;Hd=Hd+Math.imul(Pa,ek)|0;Gd=Gd+Math.imul(ta,Dj)|0;N=(N=N+Math.imul(ta,Ej)|0)+Math.imul(Od,Dj)|0;Hd=Hd+Math.imul(Od,Ej)|0;Qb=(ia+(Gd+Math.imul(ld,sa)|0)|0)+((8191&(N=(N=N+Math.imul(ld,
fk)|0)+Math.imul(Nb,sa)|0))<<13)|0;ia=((Hd+Math.imul(Nb,fk)|0)+(N>>>13)|0)+(Qb>>>26)|0;Qb&=67108863;Gd=Math.imul(ca,Sj);N=(N=Math.imul(ca,ek))+Math.imul(Cb,Sj)|0;Hd=Math.imul(Cb,ek);Gd=Gd+Math.imul(Ra,Dj)|0;N=(N=N+Math.imul(Ra,Ej)|0)+Math.imul(Pa,Dj)|0;Hd=Hd+Math.imul(Pa,Ej)|0;Sa=(ia+(Gd+Math.imul(ta,sa)|0)|0)+((8191&(N=(N=N+Math.imul(ta,fk)|0)+Math.imul(Od,sa)|0))<<13)|0;ia=((Hd+Math.imul(Od,fk)|0)+(N>>>13)|0)+(Sa>>>26)|0;Sa&=67108863;Gd=Math.imul(ca,Dj);N=(N=Math.imul(ca,Ej))+Math.imul(Cb,Dj)|0;
Hd=Math.imul(Cb,Ej);Yb=(ia+(Gd+Math.imul(Ra,sa)|0)|0)+((8191&(N=(N=N+Math.imul(Ra,fk)|0)+Math.imul(Pa,sa)|0))<<13)|0;ia=((Hd+Math.imul(Pa,fk)|0)+(N>>>13)|0)+(Yb>>>26)|0;Yb&=67108863;mc=(ia+Math.imul(ca,sa)|0)+((8191&(N=(N=Math.imul(ca,fk))+Math.imul(Cb,sa)|0))<<13)|0;return ia=(Math.imul(Cb,fk)+(N>>>13)|0)+(mc>>>26)|0,mc&=67108863,la[0]=Lu,la[1]=Ju,la[2]=bt,la[3]=Nr,la[4]=yx,la[5]=Cx,la[6]=Dx,la[7]=Ex,la[8]=Fx,la[9]=ib,la[10]=Aa,la[11]=Ea,la[12]=ob,la[13]=ya,la[14]=ua,la[15]=Qb,la[16]=Sa,la[17]=Yb,
la[18]=mc,0!==ia&&(la[19]=ia,W.length++),W};Math.imul||(za=p);b.prototype.mulTo=function(N,ia){var W=(this||kb).length+N.length;if(10===(this||kb).length&&10===N.length)N=za(this||kb,N,ia);else if(63>W)N=p(this||kb,N,ia);else if(1024>W){W=this||kb;ia.negative=N.negative^W.negative;ia.length=W.length+N.length;for(var ca=0,sa=0,la=0;la<ia.length-1;la++){var Aa=sa;sa=0;ca&=67108863;for(var ib=Math.min(la,N.length-1),ob=Math.max(0,la-W.length+1);ob<=ib;ob++){var Ea=(0|W.words[la-ob])*(0|N.words[ob]),
ua=67108863&Ea;ca=67108863&(ua=ua+ca|0);sa+=(Aa=(Aa=Aa+(Ea/67108864|0)|0)+(ua>>>26)|0)>>>26;Aa&=67108863}ia.words[la]=ca;ca=Aa}N=(0!==ca?ia.words[la]=ca:ia.length--,ia.strip())}else W=this||kb,N=(new u).mulp(W,N,ia);return N};u.prototype.makeRBT=function(N){for(var ia=Array(N),W=b.prototype._countBits(N)-1,ca=0;ca<N;ca++)ia[ca]=this.revBin(ca,W,N);return ia};u.prototype.revBin=function(N,ia,W){if(0===N||N===W-1)return N;for(var ca=W=0;ca<ia;ca++)W|=(1&N)<<ia-ca-1,N>>=1;return W};u.prototype.permute=
function(N,ia,W,ca,sa,la){for(var Aa=0;Aa<la;Aa++)ca[Aa]=ia[N[Aa]],sa[Aa]=W[N[Aa]]};u.prototype.transform=function(N,ia,W,ca,sa,la){this.permute(la,N,ia,W,ca,sa);for(N=1;N<sa;N<<=1){ia=N<<1;la=Math.cos(2*Math.PI/ia);for(var Aa=Math.sin(2*Math.PI/ia),ib=0;ib<sa;ib+=ia)for(var ob=la,Ea=Aa,ua=0;ua<N;ua++){var ya=W[ib+ua],Sa=ca[ib+ua],Qb=W[ib+ua+N],mc=ca[ib+ua+N],Yb=ob*Qb-Ea*mc;mc=ob*mc+Ea*Qb;Qb=Yb;W[ib+ua]=ya+Qb;ca[ib+ua]=Sa+mc;W[ib+ua+N]=ya-Qb;ca[ib+ua+N]=Sa-mc;ua!==ia&&(Yb=la*ob-Aa*Ea,Ea=la*Ea+Aa*
ob,ob=Yb)}}};u.prototype.guessLen13b=function(N,ia){N=1|Math.max(ia,N);ia=1&N;var W=0;for(N=N/2|0;N;N>>>=1)W++;return 1<<W+1+ia};u.prototype.conjugate=function(N,ia,W){if(!(1>=W))for(var ca=0;ca<W/2;ca++){var sa=N[ca];N[ca]=N[W-ca-1];N[W-ca-1]=sa;sa=ia[ca];ia[ca]=-ia[W-ca-1];ia[W-ca-1]=-sa}};u.prototype.normalize13b=function(N,ia){for(var W=0,ca=0;ca<ia/2;ca++)W=8192*Math.round(N[2*ca+1]/ia)+Math.round(N[2*ca]/ia)+W,N[ca]=67108863&W,W=67108864>W?0:W/67108864|0;return N};u.prototype.convert13b=function(N,
ia,W,ca){for(var sa=0,la=0;la<ia;la++)sa+=0|N[la],W[2*la]=8191&sa,sa>>>=13,W[2*la+1]=8191&sa,sa>>>=13;for(la=2*ia;la<ca;++la)W[la]=0;d(0===sa);d(0==(-8192&sa))};u.prototype.stub=function(N){for(var ia=Array(N),W=0;W<N;W++)ia[W]=0;return ia};u.prototype.mulp=function(N,ia,W){var ca=2*this.guessLen13b(N.length,ia.length),sa=this.makeRBT(ca),la=this.stub(ca),Aa=Array(ca),ib=Array(ca),ob=Array(ca),Ea=Array(ca),ua=Array(ca),ya=Array(ca),Sa=W.words;Sa.length=ca;this.convert13b(N.words,N.length,Aa,ca);this.convert13b(ia.words,
ia.length,Ea,ca);this.transform(Aa,la,ib,ob,ca,sa);this.transform(Ea,la,ua,ya,ca,sa);for(Aa=0;Aa<ca;Aa++)Ea=ib[Aa]*ua[Aa]-ob[Aa]*ya[Aa],ob[Aa]=ib[Aa]*ya[Aa]+ob[Aa]*ua[Aa],ib[Aa]=Ea;return this.conjugate(ib,ob,ca),this.transform(ib,ob,Sa,la,ca,sa),this.conjugate(Sa,la,ca),this.normalize13b(Sa,ca),W.negative=N.negative^ia.negative,W.length=N.length+ia.length,W.strip()};b.prototype.mul=function(N){var ia=new b(null);return ia.words=Array((this||kb).length+N.length),this.mulTo(N,ia)};b.prototype.mulf=
function(N){var ia=new b(null);ia.words=Array((this||kb).length+N.length);var W=this||kb;return(new u).mulp(W,N,ia)};b.prototype.imul=function(N){return this.clone().mulTo(N,this||kb)};b.prototype.imuln=function(N){d("number"==typeof N);d(67108864>N);for(var ia=0,W=0;W<(this||kb).length;W++){var ca=(0|(this||kb).words[W])*N,sa=(67108863&ca)+(67108863&ia);ia>>=26;ia+=ca/67108864|0;ia+=sa>>>26;(this||kb).words[W]=67108863&sa}return 0!==ia&&((this||kb).words[W]=ia,(this||kb).length++),this||kb};b.prototype.muln=
function(N){return this.clone().imuln(N)};b.prototype.sqr=function(){return this.mul(this||kb)};b.prototype.isqr=function(){return this.imul(this.clone())};b.prototype.pow=function(N){for(var ia=Array(N.bitLength()),W=0;W<ia.length;W++){var ca=W%26;ia[W]=(N.words[W/26|0]&1<<ca)>>>ca}if(0===ia.length)return new b(1);N=this||kb;for(W=0;W<ia.length&&0===ia[W];W++,N=N.sqr());if(++W<ia.length)for(ca=N.sqr();W<ia.length;W++,ca=ca.sqr())0!==ia[W]&&(N=N.mul(ca));return N};b.prototype.iushln=function(N){d("number"==
typeof N&&0<=N);var ia=N%26,W=(N-ia)/26,ca=67108863>>>26-ia<<26-ia;if(0!==ia){var sa=0;for(N=0;N<(this||kb).length;N++){var la=(this||kb).words[N]&ca;(this||kb).words[N]=(0|(this||kb).words[N])-la<<ia|sa;sa=la>>>26-ia}sa&&((this||kb).words[N]=sa,(this||kb).length++)}if(0!==W){for(N=(this||kb).length-1;0<=N;N--)(this||kb).words[N+W]=(this||kb).words[N];for(N=0;N<W;N++)(this||kb).words[N]=0;(this||kb).length+=W}return this.strip()};b.prototype.ishln=function(N){return d(0===(this||kb).negative),this.iushln(N)};
b.prototype.iushrn=function(N,ia,W){d("number"==typeof N&&0<=N);ia=ia?(ia-ia%26)/26:0;var ca=N%26,sa=Math.min((N-ca)/26,(this||kb).length);N=67108863^67108863>>>ca<<ca;if(ia-=sa,ia=Math.max(0,ia),W){for(var la=0;la<sa;la++)W.words[la]=(this||kb).words[la];W.length=sa}if(0!==sa)if((this||kb).length>sa)for((this||kb).length-=sa,la=0;la<(this||kb).length;la++)(this||kb).words[la]=(this||kb).words[la+sa];else(this||kb).words[0]=0,(this||kb).length=1;sa=0;for(la=(this||kb).length-1;0<=la&&(0!==sa||la>=
ia);la--){var Aa=0|(this||kb).words[la];(this||kb).words[la]=sa<<26-ca|Aa>>>ca;sa=Aa&N}return W&&0!==sa&&(W.words[W.length++]=sa),0===(this||kb).length&&((this||kb).words[0]=0,(this||kb).length=1),this.strip()};b.prototype.ishrn=function(N,ia,W){return d(0===(this||kb).negative),this.iushrn(N,ia,W)};b.prototype.shln=function(N){return this.clone().ishln(N)};b.prototype.ushln=function(N){return this.clone().iushln(N)};b.prototype.shrn=function(N){return this.clone().ishrn(N)};b.prototype.ushrn=function(N){return this.clone().iushrn(N)};
b.prototype.testn=function(N){d("number"==typeof N&&0<=N);var ia=N%26;N=(N-ia)/26;return!((this||kb).length<=N)&&!!((this||kb).words[N]&1<<ia)};b.prototype.imaskn=function(N){d("number"==typeof N&&0<=N);var ia=N%26;N=(N-ia)/26;if(d(0===(this||kb).negative,"imaskn works only with positive numbers"),(this||kb).length<=N)return this||kb;if(0!==ia&&N++,(this||kb).length=Math.min(N,(this||kb).length),0!==ia)(this||kb).words[(this||kb).length-1]&=67108863^67108863>>>ia<<ia;return this.strip()};b.prototype.maskn=
function(N){return this.clone().imaskn(N)};b.prototype.iaddn=function(N){return d("number"==typeof N),d(67108864>N),0>N?this.isubn(-N):0!==(this||kb).negative?1===(this||kb).length&&(0|(this||kb).words[0])<N?((this||kb).words[0]=N-(0|(this||kb).words[0]),(this||kb).negative=0,this||kb):((this||kb).negative=0,this.isubn(N),(this||kb).negative=1,this||kb):this._iaddn(N)};b.prototype._iaddn=function(N){(this||kb).words[0]+=N;for(N=0;N<(this||kb).length&&67108864<=(this||kb).words[N];N++)(this||kb).words[N]-=
67108864,N===(this||kb).length-1?(this||kb).words[N+1]=1:(this||kb).words[N+1]++;return(this||kb).length=Math.max((this||kb).length,N+1),this||kb};b.prototype.isubn=function(N){if(d("number"==typeof N),d(67108864>N),0>N)return this.iaddn(-N);if(0!==(this||kb).negative)return(this||kb).negative=0,this.iaddn(N),(this||kb).negative=1,this||kb;if((this||kb).words[0]-=N,1===(this||kb).length&&0>(this||kb).words[0])(this||kb).words[0]=-(this||kb).words[0],(this||kb).negative=1;else for(N=0;N<(this||kb).length&&
0>(this||kb).words[N];N++)(this||kb).words[N]+=67108864,--(this||kb).words[N+1];return this.strip()};b.prototype.addn=function(N){return this.clone().iaddn(N)};b.prototype.subn=function(N){return this.clone().isubn(N)};b.prototype.iabs=function(){return(this||kb).negative=0,this||kb};b.prototype.abs=function(){return this.clone().iabs()};b.prototype._ishlnsubmul=function(N,ia,W){var ca;this._expand(N.length+W);var sa=0;for(ca=0;ca<N.length;ca++){var la=(0|(this||kb).words[ca+W])+sa;sa=(0|N.words[ca])*
ia;sa=((la-=67108863&sa)>>26)-(sa/67108864|0);(this||kb).words[ca+W]=67108863&la}for(;ca<(this||kb).length-W;ca++)sa=(la=(0|(this||kb).words[ca+W])+sa)>>26,(this||kb).words[ca+W]=67108863&la;if(0===sa)return this.strip();d(-1===sa);for(ca=sa=0;ca<(this||kb).length;ca++)sa=(la=-(0|(this||kb).words[ca])+sa)>>26,(this||kb).words[ca]=67108863&la;return(this||kb).negative=1,this.strip()};b.prototype._wordDiv=function(N,ia){var W=((this||kb).length,N.length),ca=this.clone(),sa=0|N.words[N.length-1];0!==
(W=26-this._countBits(sa))&&(N=N.ushln(W),ca.iushln(W),sa=0|N.words[N.length-1]);var la,Aa=ca.length-N.length;if("mod"!==ia){(la=new b(null)).length=Aa+1;la.words=Array(la.length);for(var ib=0;ib<la.length;ib++)la.words[ib]=0}ib=ca.clone()._ishlnsubmul(N,1,Aa);0===ib.negative&&(ca=ib,la&&(la.words[Aa]=1));for(--Aa;0<=Aa;Aa--){ib=67108864*(0|ca.words[N.length+Aa])+(0|ca.words[N.length+Aa-1]);ib=Math.min(ib/sa|0,67108863);for(ca._ishlnsubmul(N,ib,Aa);0!==ca.negative;)ib--,ca.negative=0,ca._ishlnsubmul(N,
1,Aa),ca.isZero()||(ca.negative^=1);la&&(la.words[Aa]=ib)}return la&&la.strip(),ca.strip(),"div"!==ia&&0!==W&&ca.iushrn(W),{div:la||null,mod:ca}};b.prototype.divmod=function(N,ia,W){return d(!N.isZero()),this.isZero()?{div:new b(0),mod:new b(0)}:0!==(this||kb).negative&&0===N.negative?(la=this.neg().divmod(N,ia),"mod"!==ia&&(ca=la.div.neg()),"div"!==ia&&(sa=la.mod.neg(),W&&0!==sa.negative&&sa.iadd(N)),{div:ca,mod:sa}):0===(this||kb).negative&&0!==N.negative?(la=this.divmod(N.neg(),ia),"mod"!==ia&&
(ca=la.div.neg()),{div:ca,mod:la.mod}):0!=((this||kb).negative&N.negative)?(la=this.neg().divmod(N.neg(),ia),"div"!==ia&&(sa=la.mod.neg(),W&&0!==sa.negative&&sa.isub(N)),{div:la.div,mod:sa}):N.length>(this||kb).length||0>this.cmp(N)?{div:new b(0),mod:this||kb}:1===N.length?"div"===ia?{div:this.divn(N.words[0]),mod:null}:"mod"===ia?{div:null,mod:new b(this.modn(N.words[0]))}:{div:this.divn(N.words[0]),mod:new b(this.modn(N.words[0]))}:this._wordDiv(N,ia);var ca,sa,la};b.prototype.div=function(N){return this.divmod(N,
"div",!1).div};b.prototype.mod=function(N){return this.divmod(N,"mod",!1).mod};b.prototype.umod=function(N){return this.divmod(N,"mod",!0).mod};b.prototype.divRound=function(N){var ia=this.divmod(N);if(ia.mod.isZero())return ia.div;var W=0!==ia.div.negative?ia.mod.isub(N):ia.mod,ca=N.ushrn(1);N=N.andln(1);W=W.cmp(ca);return 0>W||1===N&&0===W?ia.div:0!==ia.div.negative?ia.div.isubn(1):ia.div.iaddn(1)};b.prototype.modn=function(N){d(67108863>=N);for(var ia=67108864%N,W=0,ca=(this||kb).length-1;0<=ca;ca--)W=
(ia*W+(0|(this||kb).words[ca]))%N;return W};b.prototype.idivn=function(N){d(67108863>=N);for(var ia=0,W=(this||kb).length-1;0<=W;W--)ia=(0|(this||kb).words[W])+67108864*ia,(this||kb).words[W]=ia/N|0,ia%=N;return this.strip()};b.prototype.divn=function(N){return this.clone().idivn(N)};b.prototype.egcd=function(N){d(0===N.negative);d(!N.isZero());var ia=this||kb,W=N.clone();ia=0!==ia.negative?ia.umod(N):ia.clone();N=new b(1);for(var ca=new b(0),sa=new b(0),la=new b(1),Aa=0;ia.isEven()&&W.isEven();)ia.iushrn(1),
W.iushrn(1),++Aa;for(var ib=W.clone(),ob=ia.clone();!ia.isZero();){for(var Ea=0,ua=1;0==(ia.words[0]&ua)&&26>Ea;++Ea,ua<<=1);if(0<Ea)for(ia.iushrn(Ea);0<Ea--;)(N.isOdd()||ca.isOdd())&&(N.iadd(ib),ca.isub(ob)),N.iushrn(1),ca.iushrn(1);Ea=0;for(ua=1;0==(W.words[0]&ua)&&26>Ea;++Ea,ua<<=1);if(0<Ea)for(W.iushrn(Ea);0<Ea--;)(sa.isOdd()||la.isOdd())&&(sa.iadd(ib),la.isub(ob)),sa.iushrn(1),la.iushrn(1);0<=ia.cmp(W)?(ia.isub(W),N.isub(sa),ca.isub(la)):(W.isub(ia),sa.isub(N),la.isub(ca))}return{a:sa,b:la,gcd:W.iushln(Aa)}};
b.prototype._invmp=function(N){d(0===N.negative);d(!N.isZero());var ia=this||kb,W=N.clone();ia=0!==ia.negative?ia.umod(N):ia.clone();for(var ca,sa=new b(1),la=new b(0),Aa=W.clone();0<ia.cmpn(1)&&0<W.cmpn(1);){for(var ib=0,ob=1;0==(ia.words[0]&ob)&&26>ib;++ib,ob<<=1);if(0<ib)for(ia.iushrn(ib);0<ib--;)sa.isOdd()&&sa.iadd(Aa),sa.iushrn(1);ib=0;for(ob=1;0==(W.words[0]&ob)&&26>ib;++ib,ob<<=1);if(0<ib)for(W.iushrn(ib);0<ib--;)la.isOdd()&&la.iadd(Aa),la.iushrn(1);0<=ia.cmp(W)?(ia.isub(W),sa.isub(la)):(W.isub(ia),
la.isub(sa))}return 0>(ca=0===ia.cmpn(1)?sa:la).cmpn(0)&&ca.iadd(N),ca};b.prototype.gcd=function(N){if(this.isZero())return N.abs();if(N.isZero())return this.abs();var ia=this.clone();N=N.clone();ia.negative=0;for(var W=N.negative=0;ia.isEven()&&N.isEven();W++)ia.iushrn(1),N.iushrn(1);for(;;){for(;ia.isEven();)ia.iushrn(1);for(;N.isEven();)N.iushrn(1);var ca=ia.cmp(N);if(0>ca)ca=ia,ia=N,N=ca;else if(0===ca||0===N.cmpn(1))break;ia.isub(N)}return N.iushln(W)};b.prototype.invm=function(N){return this.egcd(N).a.umod(N)};
b.prototype.isEven=function(){return 0==(1&(this||kb).words[0])};b.prototype.isOdd=function(){return 1==(1&(this||kb).words[0])};b.prototype.andln=function(N){return(this||kb).words[0]&N};b.prototype.bincn=function(N){d("number"==typeof N);var ia=N%26;N=(N-ia)/26;ia=1<<ia;if((this||kb).length<=N)return this._expand(N+1),(this||kb).words[N]|=ia,this||kb;for(;0!==ia&&N<(this||kb).length;N++){var W=0|(this||kb).words[N];ia=(W+=ia)>>>26;W&=67108863;(this||kb).words[N]=W}return 0!==ia&&((this||kb).words[N]=
ia,(this||kb).length++),this||kb};b.prototype.isZero=function(){return 1===(this||kb).length&&0===(this||kb).words[0]};b.prototype.cmpn=function(N){var ia=0>N;if(0!==(this||kb).negative&&!ia)return-1;if(0===(this||kb).negative&&ia)return 1;(this.strip(),1<(this||kb).length)?N=1:(ia&&(N=-N),d(67108863>=N,"Number is too big"),ia=0|(this||kb).words[0],N=ia===N?0:ia<N?-1:1);return 0!==(this||kb).negative?0|-N:N};b.prototype.cmp=function(N){if(0!==(this||kb).negative&&0===N.negative)return-1;if(0===(this||
kb).negative&&0!==N.negative)return 1;N=this.ucmp(N);return 0!==(this||kb).negative?0|-N:N};b.prototype.ucmp=function(N){if((this||kb).length>N.length)return 1;if((this||kb).length<N.length)return-1;for(var ia=0,W=(this||kb).length-1;0<=W;W--){var ca=0|(this||kb).words[W],sa=0|N.words[W];if(ca!==sa){ca<sa?ia=-1:ca>sa&&(ia=1);break}}return ia};b.prototype.gtn=function(N){return 1===this.cmpn(N)};b.prototype.gt=function(N){return 1===this.cmp(N)};b.prototype.gten=function(N){return 0<=this.cmpn(N)};
b.prototype.gte=function(N){return 0<=this.cmp(N)};b.prototype.ltn=function(N){return-1===this.cmpn(N)};b.prototype.lt=function(N){return-1===this.cmp(N)};b.prototype.lten=function(N){return 0>=this.cmpn(N)};b.prototype.lte=function(N){return 0>=this.cmp(N)};b.prototype.eqn=function(N){return 0===this.cmpn(N)};b.prototype.eq=function(N){return 0===this.cmp(N)};b.red=function(N){return new K(N)};b.prototype.toRed=function(N){return d(!(this||kb).red,"Already a number in reduction context"),d(0===(this||
kb).negative,"red works only with positives"),N.convertTo(this||kb)._forceRed(N)};b.prototype.fromRed=function(){return d((this||kb).red,"fromRed works only with numbers in reduction context"),(this||kb).red.convertFrom(this||kb)};b.prototype._forceRed=function(N){return(this||kb).red=N,this||kb};b.prototype.forceRed=function(N){return d(!(this||kb).red,"Already a number in reduction context"),this._forceRed(N)};b.prototype.redAdd=function(N){return d((this||kb).red,"redAdd works only with red numbers"),
(this||kb).red.add(this||kb,N)};b.prototype.redIAdd=function(N){return d((this||kb).red,"redIAdd works only with red numbers"),(this||kb).red.iadd(this||kb,N)};b.prototype.redSub=function(N){return d((this||kb).red,"redSub works only with red numbers"),(this||kb).red.sub(this||kb,N)};b.prototype.redISub=function(N){return d((this||kb).red,"redISub works only with red numbers"),(this||kb).red.isub(this||kb,N)};b.prototype.redShl=function(N){return d((this||kb).red,"redShl works only with red numbers"),
(this||kb).red.shl(this||kb,N)};b.prototype.redMul=function(N){return d((this||kb).red,"redMul works only with red numbers"),(this||kb).red._verify2(this||kb,N),(this||kb).red.mul(this||kb,N)};b.prototype.redIMul=function(N){return d((this||kb).red,"redMul works only with red numbers"),(this||kb).red._verify2(this||kb,N),(this||kb).red.imul(this||kb,N)};b.prototype.redSqr=function(){return d((this||kb).red,"redSqr works only with red numbers"),(this||kb).red._verify1(this||kb),(this||kb).red.sqr(this||
kb)};b.prototype.redISqr=function(){return d((this||kb).red,"redISqr works only with red numbers"),(this||kb).red._verify1(this||kb),(this||kb).red.isqr(this||kb)};b.prototype.redSqrt=function(){return d((this||kb).red,"redSqrt works only with red numbers"),(this||kb).red._verify1(this||kb),(this||kb).red.sqrt(this||kb)};b.prototype.redInvm=function(){return d((this||kb).red,"redInvm works only with red numbers"),(this||kb).red._verify1(this||kb),(this||kb).red.invm(this||kb)};b.prototype.redNeg=
function(){return d((this||kb).red,"redNeg works only with red numbers"),(this||kb).red._verify1(this||kb),(this||kb).red.neg(this||kb)};b.prototype.redPow=function(N){return d((this||kb).red&&!N.red,"redPow(normalNum)"),(this||kb).red._verify1(this||kb),(this||kb).red.pow(this||kb,N)};var Ia={k256:null,p224:null,p192:null,p25519:null};x.prototype._tmp=function(){var N=new b(null);return N.words=Array(Math.ceil((this||kb).n/13)),N};x.prototype.ireduce=function(N){do{this.split(N,(this||kb).tmp);var ia=
(N=(N=this.imulK(N)).iadd((this||kb).tmp)).bitLength()}while(ia>(this||kb).n);ia=ia<(this||kb).n?-1:N.ucmp((this||kb).p);return 0===ia?(N.words[0]=0,N.length=1):0<ia?N.isub((this||kb).p):N.strip(),N};x.prototype.split=function(N,ia){N.iushrn((this||kb).n,0,ia)};x.prototype.imulK=function(N){return N.imul((this||kb).k)};k(z,x);z.prototype.split=function(N,ia){for(var W=Math.min(N.length,9),ca=0;ca<W;ca++)ia.words[ca]=N.words[ca];if(ia.length=W,9>=N.length)return N.words[0]=0,N.length=1,void 0;W=N.words[9];
ia.words[ia.length++]=4194303&W;for(ca=10;ca<N.length;ca++)ia=0|N.words[ca],N.words[ca-10]=(4194303&ia)<<4|W>>>22,W=ia;W>>>=22;N.words[ca-10]=W;0===W&&10<N.length?N.length-=10:N.length-=9};z.prototype.imulK=function(N){N.words[N.length]=0;N.words[N.length+1]=0;N.length+=2;for(var ia=0,W=0;W<N.length;W++){var ca=0|N.words[W];ia+=977*ca;N.words[W]=67108863&ia;ia=64*ca+(ia/67108864|0)}return 0===N.words[N.length-1]&&(N.length--,0===N.words[N.length-1]&&N.length--),N};k(E,x);k(G,x);k(J,x);J.prototype.imulK=
function(N){for(var ia=0,W=0;W<N.length;W++){ia=19*(0|N.words[W])+ia;var ca=67108863&ia;ia>>>=26;N.words[W]=ca}return 0!==ia&&(N.words[N.length++]=ia),N};b._prime=function(N){if(Ia[N])return Ia[N];if("k256"===N)var ia=new z;else if("p224"===N)ia=new E;else if("p192"===N)ia=new G;else{if("p25519"!==N)throw Error("Unknown prime "+N);ia=new J}return Ia[N]=ia,ia};K.prototype._verify1=function(N){d(0===N.negative,"red works only with positives");d(N.red,"red works only with red numbers")};K.prototype._verify2=
function(N,ia){d(0==(N.negative|ia.negative),"red works only with positives");d(N.red&&N.red===ia.red,"red works only with red numbers")};K.prototype.imod=function(N){return(this||kb).prime?(this||kb).prime.ireduce(N)._forceRed(this||kb):N.umod((this||kb).m)._forceRed(this||kb)};K.prototype.neg=function(N){return N.isZero()?N.clone():(this||kb).m.sub(N)._forceRed(this||kb)};K.prototype.add=function(N,ia){this._verify2(N,ia);N=N.add(ia);return 0<=N.cmp((this||kb).m)&&N.isub((this||kb).m),N._forceRed(this||
kb)};K.prototype.iadd=function(N,ia){this._verify2(N,ia);N=N.iadd(ia);return 0<=N.cmp((this||kb).m)&&N.isub((this||kb).m),N};K.prototype.sub=function(N,ia){this._verify2(N,ia);N=N.sub(ia);return 0>N.cmpn(0)&&N.iadd((this||kb).m),N._forceRed(this||kb)};K.prototype.isub=function(N,ia){this._verify2(N,ia);N=N.isub(ia);return 0>N.cmpn(0)&&N.iadd((this||kb).m),N};K.prototype.shl=function(N,ia){return this._verify1(N),this.imod(N.ushln(ia))};K.prototype.imul=function(N,ia){return this._verify2(N,ia),this.imod(N.imul(ia))};
K.prototype.mul=function(N,ia){return this._verify2(N,ia),this.imod(N.mul(ia))};K.prototype.isqr=function(N){return this.imul(N,N.clone())};K.prototype.sqr=function(N){return this.mul(N,N)};K.prototype.sqrt=function(N){if(N.isZero())return N.clone();var ia=(this||kb).m.andln(3);if(d(1==ia%2),3===ia)return ia=(this||kb).m.add(new b(1)).iushrn(2),this.pow(N,ia);for(var W=(this||kb).m.subn(1),ca=0;!W.isZero()&&0===W.andln(1);)ca++,W.iushrn(1);d(!W.isZero());ia=(new b(1)).toRed(this||kb);var sa=ia.redNeg(),
la=(this||kb).m.subn(1).iushrn(1),Aa=(this||kb).m.bitLength();for(Aa=(new b(2*Aa*Aa)).toRed(this||kb);0!==this.pow(Aa,la).cmp(sa);)Aa.redIAdd(sa);la=this.pow(Aa,W);sa=this.pow(N,W.addn(1).iushrn(1));N=this.pow(N,W);for(W=ca;0!==N.cmp(ia);){Aa=N;for(ca=0;0!==Aa.cmp(ia);ca++)Aa=Aa.redSqr();d(ca<W);la=this.pow(la,(new b(1)).iushln(W-ca-1));sa=sa.redMul(la);la=la.redSqr();N=N.redMul(la);W=ca}return sa};K.prototype.invm=function(N){N=N._invmp((this||kb).m);return 0!==N.negative?(N.negative=0,this.imod(N).redNeg()):
this.imod(N)};K.prototype.pow=function(N,ia){if(ia.isZero())return(new b(1)).toRed(this||kb);if(0===ia.cmpn(1))return N.clone();var W=Array(16);W[0]=(new b(1)).toRed(this||kb);W[1]=N;for(var ca=2;ca<W.length;ca++)W[ca]=this.mul(W[ca-1],N);N=W[0];var sa=0,la=0,Aa=ia.bitLength()%26;0===Aa&&(Aa=26);for(ca=ia.length-1;0<=ca;ca--){var ib=ia.words[ca];for(--Aa;0<=Aa;Aa--){var ob=ib>>Aa&1;N!==W[0]&&(N=this.sqr(N));0!==ob||0!==sa?(sa<<=1,sa|=ob,(4===++la||0===ca&&0===Aa)&&(N=this.mul(N,W[sa]),la=0,sa=0)):
la=0}Aa=26}return N};K.prototype.convertTo=function(N){var ia=N.umod((this||kb).m);return ia===N?ia.clone():ia};K.prototype.convertFrom=function(N){N=N.clone();return N.red=null,N};b.mont=function(N){return new T(N)};k(T,K);T.prototype.convertTo=function(N){return this.imod(N.ushln((this||kb).shift))};T.prototype.convertFrom=function(N){N=this.imod(N.mul((this||kb).rinv));return N.red=null,N};T.prototype.imul=function(N,ia){if(N.isZero()||ia.isZero())return N.words[0]=0,N.length=1,N;N=N.imul(ia);
ia=N.maskn((this||kb).shift).mul((this||kb).minv).imaskn((this||kb).shift).mul((this||kb).m);ia=N=N.isub(ia).iushrn((this||kb).shift);return 0<=N.cmp((this||kb).m)?ia=N.isub((this||kb).m):0>N.cmpn(0)&&(ia=N.iadd((this||kb).m)),ia._forceRed(this||kb)};T.prototype.mul=function(N,ia){if(N.isZero()||ia.isZero())return(new b(0))._forceRed(this||kb);N=N.mul(ia);ia=N.maskn((this||kb).shift).mul((this||kb).minv).imaskn((this||kb).shift).mul((this||kb).m);ia=N=N.isub(ia).iushrn((this||kb).shift);return 0<=
N.cmp((this||kb).m)?ia=N.isub((this||kb).m):0>N.cmpn(0)&&(ia=N.iadd((this||kb).m)),ia._forceRed(this||kb)};T.prototype.invm=function(N){return this.imod(N._invmp((this||kb).m).mul((this||kb).r2))._forceRed(this||kb)}}(Paa,Oaa);var ul=Paa.exports,nN,YW,Qaa=Object.freeze({}),uJ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global;if((nN=function(n){return YW||(YW=new fu(null)),YW.generate(n)}).Rand=fu,fu.prototype.generate=function(n){return this._rand(n)},fu.prototype._rand=
function(n){if((this||uJ).rand.getBytes)return(this||uJ).rand.getBytes(n);n=new Uint8Array(n);for(var a=0;a<n.length;a++)n[a]=(this||uJ).rand.getByte();return n},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?fu.prototype._rand=function(n){n=new Uint8Array(n);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?fu.prototype._rand=function(n){n=new Uint8Array(n);return self.msCrypto.getRandomValues(n),n}:"object"==typeof window&&(fu.prototype._rand=
function(){throw Error("Not implemented yet");});else try{if("function"!=typeof Qaa.randomBytes)throw Error("Not supported");fu.prototype._rand=function(n){return Qaa.randomBytes(n)}}catch(n){}var F4="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Mx=ul,qka=nN;gu.create=function(n){return new gu(n)};gu.prototype._randbelow=function(n){var a=n.bitLength();a=Math.ceil(a/8);do var d=new Mx((this||F4).rand.generate(a));while(0<=d.cmp(n));return d};gu.prototype._randrange=
function(n,a){a=a.sub(n);return n.add(this._randbelow(a))};gu.prototype.test=function(n,a,d){var k=n.bitLength(),b=Mx.mont(n),e=(new Mx(1)).toRed(b);a||(a=Math.max(1,k/48|0));k=n.subn(1);for(var l=0;!k.testn(l);l++);n=n.shrn(l);for(var p=k.toRed(b);0<a;a--){var u=this._randrange(new Mx(2),k);d&&d(u);u=u.toRed(b).redPow(n);if(0!==u.cmp(e)&&0!==u.cmp(p)){for(var x=1;x<l;x++){if(0===(u=u.redSqr()).cmp(e))return!1;if(0===u.cmp(p))break}if(x===l)return!1}}return!0};gu.prototype.getDivisor=function(n,a){var d=
n.bitLength(),k=Mx.mont(n),b=(new Mx(1)).toRed(k);a||(a=Math.max(1,d/48|0));d=n.subn(1);for(var e=0;!d.testn(e);e++);for(var l=n.shrn(e),p=d.toRed(k);0<a;a--){var u=this._randrange(new Mx(2),d),x=n.gcd(u);if(0!==x.cmpn(1))return x;u=u.toRed(k).redPow(l);if(0!==u.cmp(b)&&0!==u.cmp(p)){for(x=1;x<e;x++){if(0===(u=u.redSqr()).cmp(b))return u.fromRed().subn(1).gcd(n);if(0===u.cmp(p))break}if(x===e)return u.redSqr().fromRed().subn(1).gcd(n)}}return!1};var rka=Ou;BD.simpleSieve=ES;BD.fermatTest=GS;var fn=
ul,wka=new fn(24),H4=new gu,ska=new fn(1),HS=new fn(2),tka=new fn(5),uka=(new fn(16),new fn(8),new fn(10)),vka=new fn(3),xka=(new fn(7),new fn(11)),G4=new fn(4),FS=(new fn(12),null),fj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,or=Rh.Buffer,mp=ul,Raa=new gu,mta=new mp(24),nta=new mp(11),ota=new mp(10),pta=new mp(3),qta=new mp(7),oN={};Object.defineProperty(gq.prototype,"verifyError",{enumerable:!0,get:function(){if("number"!=typeof(this||fj)._primeCode){var n=(this||
fj).__prime;var a=(this||fj).__gen.toString("hex"),d=[a,n.toString(16)].join("_");if(d in oN)n=oN[d];else{var k,b=0;if(!n.isEven()&&BD.simpleSieve&&BD.fermatTest(n)&&Raa.test(n)){switch(Raa.test(n.shrn(1))||(b+=2),a){case "02":n.mod(mta).cmp(nta)&&(b+=8);break;case "05":(k=n.mod(ota)).cmp(pta)&&k.cmp(qta)&&(b+=8);break;default:b+=4}n=(oN[d]=b,b)}else n=(b+=1,b+="02"===a||"05"===a?8:4,oN[d]=b,b)}(this||fj)._primeCode=n}return(this||fj)._primeCode}});gq.prototype.generateKeys=function(){return(this||
fj)._priv||((this||fj)._priv=new mp(Ou((this||fj)._primeLen))),(this||fj)._pub=(this||fj)._gen.toRed((this||fj)._prime).redPow((this||fj)._priv).fromRed(),this.getPublicKey()};gq.prototype.computeSecret=function(n){n=(new mp(n)).toRed((this||fj)._prime).redPow((this||fj)._priv).fromRed();n=new or(n.toArray());var a=this.getPrime();n.length<a.length&&(a=new or(a.length-n.length),a.fill(0),n=or.concat([a,n]));return n};gq.prototype.getPublicKey=function(n){return vJ((this||fj)._pub,n)};gq.prototype.getPrivateKey=
function(n){return vJ((this||fj)._priv,n)};gq.prototype.getPrime=function(n){return vJ((this||fj).__prime,n)};gq.prototype.getGenerator=function(n){return vJ((this||fj)._gen,n)};gq.prototype.setGenerator=function(n,a){return a=a||"utf8",or.isBuffer(n)||(n=new or(n,a)),(this||fj).__gen=n,(this||fj)._gen=new mp(n),this||fj};var Saa,Taa,Uaa,Ru=Rh.Buffer,Vaa={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},
modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},
modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},
modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},
modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},
modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},
modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}},
rta={binary:!0,hex:!0,base64:!0};var sta=Saa=Taa=function(n){var a=new Ru(Vaa[n].prime,"hex");n=new Ru(Vaa[n].gen,"hex");return new gq(a,n)};var tta=Uaa=function e(a,d,k,b){return Ru.isBuffer(d)||void 0===rta[d]?e(a,"binary",d,k):(d=d||"binary",b=b||"binary",k=k||new Ru([2]),Ru.isBuffer(k)||(k=new Ru(k,b)),"number"==typeof a?new gq(BD(a,k),k,!0):(Ru.isBuffer(a)||(a=new Ru(a,d)),new gq(a,k,!0)))};var Aka=Rh.Buffer,hu=ul,J4=Ou;wJ.getr=I4;var Su={toArray:function(a,d){if(Array.isArray(a))return a.slice();
if(!a)return[];var k=[];if("string"!=typeof a){for(d=0;d<a.length;d++)k[d]=0|a[d];return k}if("hex"===d)for(0!=(a=a.replace(/[^a-z0-9]+/gi,"")).length%2&&(a="0"+a),d=0;d<a.length;d+=2)k.push(parseInt(a[d]+a[d+1],16));else for(d=0;d<a.length;d++){var b=a.charCodeAt(d),e=b>>8;b&=255;e?k.push(e,b):k.push(b)}return k}};Su.zero2=K4;Su.toHex=L4;Su.encode=function(a,d){return"hex"===d?L4(a):a};var si={},uta=ul;si.assert=sp;si.toArray=Su.toArray;si.zero2=Su.zero2;si.toHex=Su.toHex;si.encode=Su.encode;si.getNAF=
function(a,d,k){k=Array(Math.max(a.bitLength(),k)+1);k.fill(0);d=1<<d+1;a=a.clone();for(var b=0;b<k.length;b++){var e,l=a.andln(d-1);a.isOdd()?(e=l>(d>>1)-1?(d>>1)-l:l,a.isubn(e)):e=0;k[b]=e;a.iushrn(1)}return k};si.getJSF=function(a,d){var k=[[],[]];a=a.clone();d=d.clone();for(var b=0,e=0;0<a.cmpn(-b)||0<d.cmpn(-e);){var l;var p=a.andln(3)+b&3;var u=d.andln(3)+e&3;var x=(3===p&&(p=-1),3===u&&(u=-1),0==(1&p))?0:3!==(l=a.andln(7)+b&7)&&5!==l||2!==u?p:-p;p=(k[0].push(x),0==(1&u))?0:3!==(l=d.andln(7)+
e&7)&&5!==l||2!==p?u:-u;k[1].push(p);2*b===x+1&&(b=1-b);2*e===p+1&&(e=1-e);a.iushrn(1);d.iushrn(1)}return k};si.cachedProperty=function(a,d,k){var b="_"+d;a.prototype[d]=function(){return void 0!==this[b]?this[b]:this[b]=k.call(this)}};si.parseBytes=function(a){return"string"==typeof a?si.toArray(a,"hex"):a};si.intFromLE=function(a){return new uta(a,"hex","le")};var xJ=ul,Bka=si.assert;Pw.prototype._importDER=function(a,d){a=si.toArray(a,d);var k=new Cka;if(48!==a[k.place++]||IS(a,k)+k.place!==a.length||
2!==a[k.place++])return!1;var b=IS(a,k);d=a.slice(k.place,b+k.place);if(k.place+=b,2!==a[k.place++])return!1;b=IS(a,k);if(a.length!==b+k.place)return!1;a=a.slice(k.place,b+k.place);return 0===d[0]&&128&d[1]&&(d=d.slice(1)),0===a[0]&&128&a[1]&&(a=a.slice(1)),this.r=new xJ(d),this.s=new xJ(a),this.recoveryParam=null,!0};Pw.prototype.toDER=function(a){var d=this.r.toArray(),k=this.s.toArray();128&d[0]&&(d=[0].concat(d));128&k[0]&&(k=[0].concat(k));d=M4(d);for(k=M4(k);!(k[0]||128&k[1]);)k=k.slice(1);
var b=[2];JS(b,d.length);(b=b.concat(d)).push(2);JS(b,k.length);d=b.concat(k);k=[48];return JS(k,d.length),k=k.concat(d),si.encode(k,a)};var Sf={},vta=sp;Sf.inherits=$h;Sf.toArray=function(a,d){if(Array.isArray(a))return a.slice();if(!a)return[];var k=[];if("string"==typeof a)if(d){if("hex"===d)for(0!=(a=a.replace(/[^a-z0-9]+/gi,"")).length%2&&(a="0"+a),b=0;b<a.length;b+=2)k.push(parseInt(a[b]+a[b+1],16))}else for(var b=d=0;b<a.length;b++){var e=a.charCodeAt(b);if(128>e)k[d++]=e;else if(2048>e)k[d++]=
e>>6|192,k[d++]=63&e|128;else{var l=a,p=b;55296!=(64512&l.charCodeAt(p))||0>p||p+1>=l.length||56320!=(64512&l.charCodeAt(p+1))?(k[d++]=e>>12|224,k[d++]=e>>6&63|128,k[d++]=63&e|128):(e=65536+((1023&e)<<10)+(1023&a.charCodeAt(++b)),k[d++]=e>>18|240,k[d++]=e>>12&63|128,k[d++]=e>>6&63|128,k[d++]=63&e|128)}}else for(b=0;b<a.length;b++)k[b]=0|a[b];return k};Sf.toHex=function(a){for(var d="",k=0;k<a.length;k++)d+=O4(a[k].toString(16));return d};Sf.htonl=N4;Sf.toHex32=function(a,d){for(var k="",b=0;b<a.length;b++){var e=
a[b];"little"===d&&(e=N4(e));k+=P4(e.toString(16))}return k};Sf.zero2=O4;Sf.zero8=P4;Sf.join32=function(a,d,k,b){k-=d;vta(0==k%4);k=Array(k/4);for(var e=0;e<k.length;e++,d+=4)k[e]=("big"===b?a[d]<<24|a[d+1]<<16|a[d+2]<<8|a[d+3]:a[d+3]<<24|a[d+2]<<16|a[d+1]<<8|a[d])>>>0;return k};Sf.split32=function(a,d){for(var k=Array(4*a.length),b=0,e=0;b<a.length;b++,e+=4){var l=a[b];"big"===d?(k[e]=l>>>24,k[e+1]=l>>>16&255,k[e+2]=l>>>8&255,k[e+3]=255&l):(k[e+3]=l>>>24,k[e+2]=l>>>16&255,k[e+1]=l>>>8&255,k[e]=255&
l)}return k};Sf.rotr32=function(a,d){return a>>>d|a<<32-d};Sf.rotl32=function(a,d){return a<<d|a>>>32-d};Sf.sum32=function(a,d){return a+d>>>0};Sf.sum32_3=function(a,d,k){return a+d+k>>>0};Sf.sum32_4=function(a,d,k,b){return a+d+k+b>>>0};Sf.sum32_5=function(a,d,k,b,e){return a+d+k+b+e>>>0};Sf.sum64=function(a,d,k,b){var e=b+a[d+1]>>>0;a[d]=(e<b?1:0)+k+a[d]>>>0;a[d+1]=e};Sf.sum64_hi=function(a,d,k,b){return(d+b>>>0<d?1:0)+a+k>>>0};Sf.sum64_lo=function(a,d,k,b){return d+b>>>0};Sf.sum64_4_hi=function(a,
d,k,b,e,l,p,u){var x=0,z=d;return x+=(z=z+b>>>0)<d?1:0,x+=(z=z+l>>>0)<l?1:0,a+k+e+p+(x+(z+u>>>0<u?1:0))>>>0};Sf.sum64_4_lo=function(a,d,k,b,e,l,p,u){return d+b+l+u>>>0};Sf.sum64_5_hi=function(a,d,k,b,e,l,p,u,x,z){var E=0,G=d;return E+=(G=G+b>>>0)<d?1:0,E+=(G=G+l>>>0)<l?1:0,E+=(G=G+u>>>0)<u?1:0,a+k+e+p+x+(E+(G+z>>>0<z?1:0))>>>0};Sf.sum64_5_lo=function(a,d,k,b,e,l,p,u,x,z){return d+b+l+u+z>>>0};Sf.rotr64_hi=function(a,d,k){return(d<<32-k|a>>>k)>>>0};Sf.rotr64_lo=function(a,d,k){return(a<<32-k|d>>>k)>>>
0};Sf.shr64_hi=function(a,d,k){return a>>>k};Sf.shr64_lo=function(a,d,k){return(a<<32-k|d>>>k)>>>0};var $A={},wta=sp;$A.BlockHash=yJ;yJ.prototype.update=function(a,d){if(a=Sf.toArray(a,d),this.pending?this.pending=this.pending.concat(a):this.pending=a,this.pendingTotal+=a.length,this.pending.length>=this._delta8)for(d=(a=this.pending).length%this._delta8,this.pending=a.slice(a.length-d,a.length),0===this.pending.length&&(this.pending=null),a=Sf.join32(a,0,a.length-d,this.endian),d=0;d<a.length;d+=
this._delta32)this._update(a,d,d+this._delta32);return this};yJ.prototype.digest=function(a){return this.update(this._pad()),wta(null===this.pending),this._digest(a)};yJ.prototype._pad=function(){var a=this.pendingTotal,d=this._delta8,k=d-(a+this.padLength)%d;d=Array(k+this.padLength);d[0]=128;for(var b=1;b<k;b++)d[b]=0;if(a<<=3,"big"===this.endian){for(k=8;k<this.padLength;k++)d[b++]=0;d[b++]=0;d[b++]=0;d[b++]=0;d[b++]=0;d[b++]=a>>>24&255;d[b++]=a>>>16&255;d[b++]=a>>>8&255;d[b++]=255&a}else for(d[b++]=
255&a,d[b++]=a>>>8&255,d[b++]=a>>>16&255,d[b++]=a>>>24&255,d[b++]=0,d[b++]=0,d[b++]=0,d[b++]=0,k=8;k<this.padLength;k++)d[b++]=0;return d};var xta=sp,Sr=Sf.rotr64_hi,Tr=Sf.rotr64_lo,Waa=Sf.shr64_hi,Xaa=Sf.shr64_lo,Tu=Sf.sum64,ZW=Sf.sum64_hi,$W=Sf.sum64_lo,yta=Sf.sum64_4_hi,zta=Sf.sum64_4_lo,Ata=Sf.sum64_5_hi,Bta=Sf.sum64_5_lo,Q4=$A.BlockHash,Dka=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,
2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,
3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,
1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,
4234509866,1607167915,987167468,1816402316,1246189591];Sf.inherits(np,Q4);np.blockSize=1024;np.outSize=512;np.hmacStrength=192;np.padLength=128;np.prototype._prepareBlock=function(a,d){for(var k=this.W,b=0;32>b;b++)k[b]=a[d+b];for(;b<k.length;b+=2){a=k[b-4];d=k[b-3];d=Sr(a,d,19)^Sr(d,a,29)^Waa(a,d,6);a=(0>d&&(d+=4294967296),d);d=k[b-4];var e=k[b-3];e=Tr(d,e,19)^Tr(e,d,29)^Xaa(d,e,6);d=(0>e&&(e+=4294967296),e);e=k[b-14];var l=k[b-13];var p=k[b-30];var u=k[b-29];u=Sr(p,u,1)^Sr(p,u,8)^Waa(p,u,7);p=(0>
u&&(u+=4294967296),u);u=k[b-30];var x=k[b-29];x=Tr(u,x,1)^Tr(u,x,8)^Xaa(u,x,7);u=(0>x&&(x+=4294967296),x);x=k[b-32];var z=k[b-31];k[b]=yta(a,d,e,l,p,u,x,z);k[b+1]=zta(a,d,e,l,p,u,x,z)}};np.prototype._update=function(a,d){this._prepareBlock(a,d);a=this.W;d=this.h[0];var k=this.h[1],b=this.h[2],e=this.h[3],l=this.h[4],p=this.h[5],u=this.h[6],x=this.h[7],z=this.h[8],E=this.h[9],G=this.h[10],J=this.h[11],K=this.h[12],T=this.h[13],P=this.h[14],da=this.h[15];xta(this.k.length===a.length);for(var fa=0;fa<
a.length;fa+=2){var ka=z;var za=E;ka=Sr(ka,za,14)^Sr(ka,za,18)^Sr(za,ka,9);za=(0>ka&&(ka+=4294967296),ka);ka=z;var Ia=E;ka=Tr(ka,Ia,14)^Tr(ka,Ia,18)^Tr(Ia,ka,9);var N=(0>ka&&(ka+=4294967296),ka);ka=z&G^~z&K;Ia=(0>ka&&(ka+=4294967296),ka);ka=E&J^~E&T;var ia=(0>ka&&(ka+=4294967296),ka);var W=this.k[fa],ca=this.k[fa+1],sa=a[fa],la=a[fa+1];ka=Ata(P,da,za,N,Ia,ia,W,ca,sa,la);Ia=Bta(P,da,za,N,Ia,ia,W,ca,sa,la);P=d;da=k;da=Sr(P,da,28)^Sr(da,P,2)^Sr(da,P,7);P=(0>da&&(da+=4294967296),da);da=d;za=k;za=Tr(da,
za,28)^Tr(za,da,2)^Tr(za,da,7);da=(0>za&&(za+=4294967296),za);N=d&b^d&l^b&l;za=(0>N&&(N+=4294967296),N);ia=k&e^k&p^e&p;N=(0>ia&&(ia+=4294967296),ia);ia=ZW(P,da,za,N);za=$W(P,da,za,N);P=K;da=T;K=G;T=J;G=z;J=E;z=ZW(u,x,ka,Ia);E=$W(x,x,ka,Ia);u=l;x=p;l=b;p=e;b=d;e=k;d=ZW(ka,Ia,ia,za);k=$W(ka,Ia,ia,za)}Tu(this.h,0,d,k);Tu(this.h,2,b,e);Tu(this.h,4,l,p);Tu(this.h,6,u,x);Tu(this.h,8,z,E);Tu(this.h,10,G,J);Tu(this.h,12,K,T);Tu(this.h,14,P,da)};np.prototype._digest=function(a){return"hex"===a?Sf.toHex32(this.h,
"big"):Sf.split32(this.h,"big")};var Ur=Sf.rotr32,Cta=sp,Cq=Sf.sum32,Dta=Sf.sum32_4,Eta=Sf.sum32_5,R4=$A.BlockHash,Eka=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,
1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];Sf.inherits(hq,R4);hq.blockSize=512;hq.outSize=256;hq.hmacStrength=192;hq.padLength=64;hq.prototype._update=function(a,d){for(var k=this.W,b=0;16>b;b++)k[b]=a[d+b];for(;b<k.length;b++){a=b;d=k[b-2];
d=Ur(d,17)^Ur(d,19)^d>>>10;var e=k[b-7];var l=k[b-15];l=Ur(l,7)^Ur(l,18)^l>>>3;k[a]=Dta(d,e,l,k[b-16])}a=this.h[0];d=this.h[1];e=this.h[2];l=this.h[3];var p=this.h[4],u=this.h[5],x=this.h[6],z=this.h[7];Cta(this.k.length===k.length);for(b=0;b<k.length;b++){var E=z;z=p;z=Ur(z,6)^Ur(z,11)^Ur(z,25);E=Eta(E,z,p&u^~p&x,this.k[b],k[b]);z=a;z=Ur(z,2)^Ur(z,13)^Ur(z,22);var G=Cq(z,a&d^a&e^d&e);z=x;x=u;u=p;p=Cq(l,E);l=e;e=d;d=a;a=Cq(E,G)}this.h[0]=Cq(this.h[0],a);this.h[1]=Cq(this.h[1],d);this.h[2]=Cq(this.h[2],
e);this.h[3]=Cq(this.h[3],l);this.h[4]=Cq(this.h[4],p);this.h[5]=Cq(this.h[5],u);this.h[6]=Cq(this.h[6],x);this.h[7]=Cq(this.h[7],z)};hq.prototype._digest=function(a){return"hex"===a?Sf.toHex32(this.h,"big"):Sf.split32(this.h,"big")};var aX=Sf.rotl32,pF=Sf.sum32,Fta=Sf.sum32_5,S4=$A.BlockHash,Gta=[1518500249,1859775393,2400959708,3395469782];Sf.inherits(pr,S4);pr.blockSize=512;pr.outSize=160;pr.hmacStrength=80;pr.padLength=64;pr.prototype._update=function(a,d){for(var k=this.W,b=0;16>b;b++)k[b]=a[d+
b];for(;b<k.length;b++)k[b]=aX(k[b-3]^k[b-8]^k[b-14]^k[b-16],1);a=this.h[0];d=this.h[1];var e=this.h[2],l=this.h[3],p=this.h[4];for(b=0;b<k.length;b++){var u=~~(b/20);u=Fta(aX(a,5),0===u?d&e^~d&l:1===u||3===u?d^e^l:2===u?d&e^d&l^e&l:void 0,p,k[b],Gta[u]);p=l;l=e;e=aX(d,30);d=a;a=u}this.h[0]=pF(this.h[0],a);this.h[1]=pF(this.h[1],d);this.h[2]=pF(this.h[2],e);this.h[3]=pF(this.h[3],l);this.h[4]=pF(this.h[4],p)};pr.prototype._digest=function(a){return"hex"===a?Sf.toHex32(this.h,"big"):Sf.split32(this.h,
"big")};var T4=hq;Sf.inherits(Fs,T4);Fs.blockSize=512;Fs.outSize=224;Fs.hmacStrength=192;Fs.padLength=64;Fs.prototype._digest=function(a){return"hex"===a?Sf.toHex32(this.h.slice(0,7),"big"):Sf.split32(this.h.slice(0,7),"big")};var U4=np;Sf.inherits(Gs,U4);Gs.blockSize=1024;Gs.outSize=384;Gs.hmacStrength=192;Gs.padLength=128;Gs.prototype._digest=function(a){return"hex"===a?Sf.toHex32(this.h.slice(0,12),"big"):Sf.split32(this.h.slice(0,12),"big")};var aB={};aB.sha1=pr;aB.sha224=Fs;aB.sha256=hq;aB.sha384=
Gs;aB.sha512=np;var Yaa={},pN=Sf.rotl32,Zaa=Sf.sum32,qF=Sf.sum32_3,$aa=Sf.sum32_4,V4=$A.BlockHash;Sf.inherits(qr,V4);Yaa.ripemd160=qr;qr.blockSize=512;qr.outSize=160;qr.hmacStrength=192;qr.padLength=64;qr.prototype._update=function(a,d){for(var k=this.h[0],b=this.h[1],e=this.h[2],l=this.h[3],p=this.h[4],u=k,x=b,z=e,E=l,G=p,J=0;80>J;J++){var K=Zaa(pN($aa(k,W4(J,b,e,l),a[Hta[J]+d],15>=J?0:31>=J?1518500249:47>=J?1859775393:63>=J?2400959708:2840853838),Ita[J]),p);k=p;p=l;l=pN(e,10);e=b;b=K;K=Zaa(pN($aa(u,
W4(79-J,x,z,E),a[Jta[J]+d],15>=J?1352829926:31>=J?1548603684:47>=J?1836072691:63>=J?2053994217:0),Kta[J]),G);u=G;G=E;E=pN(z,10);z=x;x=K}K=qF(this.h[1],e,E);this.h[1]=qF(this.h[2],l,G);this.h[2]=qF(this.h[3],p,u);this.h[3]=qF(this.h[4],k,x);this.h[4]=qF(this.h[0],b,z);this.h[0]=K};qr.prototype._digest=function(a){return"hex"===a?Sf.toHex32(this.h,"little"):Sf.split32(this.h,"little")};var Hta=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,
11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Jta=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Ita=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Kta=[8,9,9,11,
13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Fka=Sf,Lta=sp;bA.prototype._init=function(a){a.length>this.blockSize&&(a=(new this.Hash).update(a).digest());Lta(a.length<=this.blockSize);for(var d=a.length;d<this.blockSize;d++)a.push(0);for(d=0;d<a.length;d++)a[d]^=54;this.inner=(new this.Hash).update(a);for(d=0;d<a.length;d++)a[d]^=106;this.outer=(new this.Hash).update(a)};
bA.prototype.update=function(a,d){return this.inner.update(a,d),this};bA.prototype.digest=function(a){return this.outer.update(this.inner.digest()),this.outer.digest(a)};var tk={};tk.utils=Sf;tk.common=$A;tk.sha=aB;tk.ripemd=Yaa;tk.hmac=bA;tk.sha1=tk.sha.sha1;tk.sha256=tk.sha.sha256;tk.sha224=tk.sha.sha224;tk.sha384=tk.sha.sha384;tk.sha512=tk.sha.sha512;tk.ripemd160=tk.ripemd.ripemd160;var Qw=Su,X4=sp;Hs.prototype._init=function(a,d,k){a=a.concat(d).concat(k);this.K=Array(this.outLen/8);this.V=Array(this.outLen/
8);for(d=0;d<this.V.length;d++)this.K[d]=0,this.V[d]=1;this._update(a);this._reseed=1;this.reseedInterval=281474976710656};Hs.prototype._hmac=function(){return new tk.hmac(this.hash,this.K)};Hs.prototype._update=function(a){var d=this._hmac().update(this.V).update([0]);a&&(d=d.update(a));this.K=d.digest();this.V=this._hmac().update(this.V).digest();a&&(this.K=this._hmac().update(this.V).update([1]).update(a).digest(),this.V=this._hmac().update(this.V).digest())};Hs.prototype.reseed=function(a,d,k,
b){"string"!=typeof d&&(b=k,k=d,d=null);a=Qw.toArray(a,d);k=Qw.toArray(k,b);X4(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(a.concat(k||[]));this._reseed=1};Hs.prototype.generate=function(a,d,k,b){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof d&&(b=k,k=d,d=null);k&&(k=Qw.toArray(k,b||"hex"),this._update(k));for(b=[];b.length<a;)this.V=this._hmac().update(this.V).digest(),b=b.concat(this.V);a=b.slice(0,
a);return this._update(k),this._reseed++,Qw.encode(a,d)};var Rw=ul,qN=si.getNAF,Mta=si.getJSF,rN=si.assert;iq.prototype.point=function(){throw Error("Not implemented");};iq.prototype.validate=function(){throw Error("Not implemented");};iq.prototype._fixedNafMul=function(a,d){rN(a.precomputed);a=a._getDoubles();var k=qN(d,1,this._bitLength),b=(1<<a.step+1)-(0==a.step%2?2:1);b/=3;for(var e=[],l=0;l<k.length;l+=a.step){var p=0;for(d=l+a.step-1;d>=l;d--)p=(p<<1)+k[d];e.push(p)}d=this.jpoint(null,null,
null);for(k=this.jpoint(null,null,null);0<b;b--){for(l=0;l<e.length;l++)(p=e[l])===b?k=k.mixedAdd(a.points[l]):p===-b&&(k=k.mixedAdd(a.points[l].neg()));d=d.add(k)}return d.toP()};iq.prototype._wnafMul=function(a,d){var k=a._getNAFPoints(4),b=k.points;k=qN(d,k.wnd,this._bitLength);for(var e=this.jpoint(null,null,null),l=k.length-1;0<=l;l--){for(d=0;0<=l&&0===k[l];l--)d++;if(0<=l&&d++,e=e.dblp(d),0>l)break;d=k[l];rN(0!==d);e="affine"===a.type?0<d?e.mixedAdd(b[d-1>>1]):e.mixedAdd(b[-d-1>>1].neg()):
0<d?e.add(b[d-1>>1]):e.add(b[-d-1>>1].neg())}return"affine"===a.type?e.toP():e};iq.prototype._wnafMulAdd=function(a,d,k,b,e){for(var l=this._wnafT1,p=this._wnafT2,u=this._wnafT3,x=0,z=0;z<b;z++){var E=(P=d[z])._getNAFPoints(a);l[z]=E.wnd;p[z]=E.points}for(z=b-1;1<=z;z-=2){E=z-1;var G=z;if(1===l[E]&&1===l[G]){var J=[d[E],null,null,d[G]];0===d[E].y.cmp(d[G].y)?(J[1]=d[E].add(d[G]),J[2]=d[E].toJ().mixedAdd(d[G].neg())):0===d[E].y.cmp(d[G].y.redNeg())?(J[1]=d[E].toJ().mixedAdd(d[G]),J[2]=d[E].add(d[G].neg())):
(J[1]=d[E].toJ().mixedAdd(d[G]),J[2]=d[E].toJ().mixedAdd(d[G].neg()));var K=[-3,-1,-5,-7,0,7,5,1,3],T=Mta(k[E],k[G]);x=Math.max(T[0].length,x);u[E]=Array(x);u[G]=Array(x);for(a=0;a<x;a++)u[E][a]=K[3*((0|T[0][a])+1)+((0|T[1][a])+1)],u[G][a]=0,p[E]=J}else u[E]=qN(k[E],l[E],this._bitLength),u[G]=qN(k[G],l[G],this._bitLength),x=Math.max(u[E].length,x),x=Math.max(u[G].length,x)}d=this.jpoint(null,null,null);k=this._wnafT4;for(z=x;0<=z;z--){for(x=0;0<=z;){l=!0;for(a=0;a<b;a++)k[a]=0|u[a][z],0!==k[a]&&(l=
!1);if(!l)break;x++;z--}if(0<=z&&x++,d=d.dblp(x),0>z)break;for(a=0;a<b;a++){var P;x=k[a];0!==x&&(0<x?P=p[a][x-1>>1]:0>x&&(P=p[a][-x-1>>1].neg()),d="affine"===P.type?d.mixedAdd(P):d.add(P))}}for(z=0;z<b;z++)p[z]=null;return e?d:d.toP()};iq.BasePoint=op;op.prototype.eq=function(){throw Error("Not implemented");};op.prototype.validate=function(){return this.curve.validate(this)};iq.prototype.decodePoint=function(a,d){a=si.toArray(a,d);d=this.p.byteLength();if((4===a[0]||6===a[0]||7===a[0])&&a.length-
1==2*d)return 6===a[0]?rN(0==a[a.length-1]%2):7===a[0]&&rN(1==a[a.length-1]%2),this.point(a.slice(1,1+d),a.slice(1+d,1+2*d));if((2===a[0]||3===a[0])&&a.length-1===d)return this.pointFromX(a.slice(1,1+d),3===a[0]);throw Error("Unknown point format");};op.prototype.encodeCompressed=function(a){return this.encode(a,!0)};op.prototype._encode=function(a){var d=this.curve.p.byteLength(),k=this.getX().toArray("be",d);return a?[this.getY().isEven()?2:3].concat(k):[4].concat(k,this.getY().toArray("be",d))};
op.prototype.encode=function(a,d){return si.encode(this._encode(d),a)};op.prototype.precompute=function(a){if(this.precomputed)return this;var d={doubles:null,naf:null,beta:null};return d.naf=this._getNAFPoints(8),d.doubles=this._getDoubles(4,a),d.beta=this._getBeta(),this.precomputed=d,this};op.prototype._hasDoubles=function(a){if(!this.precomputed)return!1;var d=this.precomputed.doubles;return!!d&&d.points.length>=Math.ceil((a.bitLength()+1)/d.step)};op.prototype._getDoubles=function(a,d){if(this.precomputed&&
this.precomputed.doubles)return this.precomputed.doubles;for(var k=[this],b=this,e=0;e<d;e+=a){for(var l=0;l<a;l++)b=b.dbl();k.push(b)}return{step:a,points:k}};op.prototype._getNAFPoints=function(a){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var d=[this],k=(1<<a)-1,b=1===k?null:this.dbl(),e=1;e<k;e++)d[e]=d[e-1].add(b);return{wnd:a,points:d}};op.prototype._getBeta=function(){return null};op.prototype.dblp=function(a){for(var d=this,k=0;k<a;k++)d=d.dbl();return d};var Zk=
ul,bX=$h,cA=iq,Nta=si.assert;bX(pp,cA);pp.prototype._getEndomorphism=function(a){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(a.beta)var d=(new Zk(a.beta,16)).toRed(this.red);else d=this._getEndoRoots(this.p),d=(d=0>d[0].cmp(d[1])?d[0]:d[1]).toRed(this.red);if(a.lambda)var k=new Zk(a.lambda,16);else{var b=this._getEndoRoots(this.n);0===this.g.mul(b[0]).x.cmp(this.g.x.redMul(d))?k=b[0]:(k=b[1],Nta(0===this.g.mul(k).x.cmp(this.g.x.redMul(d))))}return{beta:d,lambda:k,basis:a.basis?a.basis.map(function(e){return{a:new Zk(e.a,
16),b:new Zk(e.b,16)}}):this._getEndoBasis(k)}}};pp.prototype._getEndoRoots=function(a){var d=a===this.p?this.red:Zk.mont(a),k=(new Zk(2)).toRed(d).redInvm();a=k.redNeg();d=(new Zk(3)).toRed(d).redNeg().redSqrt().redMul(k);return[a.redAdd(d).fromRed(),a.redSub(d).fromRed()]};pp.prototype._getEndoBasis=function(a){for(var d,k,b,e,l,p,u,x=this.n.ushrn(Math.floor(this.n.bitLength()/2)),z=this.n.clone(),E=new Zk(1),G=new Zk(0),J=new Zk(0),K=new Zk(1),T=0;0!==a.cmpn(0);){var P=z.div(a);u=z.sub(P.mul(a));
p=J.sub(P.mul(E));P=K.sub(P.mul(G));if(!b&&0>u.cmp(x))d=l.neg(),k=E,b=u.neg(),e=p;else if(b&&2==++T)break;l=u;z=a;a=u;J=E;E=p;K=G;G=P}l=u.neg();u=b.sqr().add(e.sqr());return 0<=l.sqr().add(p.sqr()).cmp(u)&&(l=d,p=k),b.negative&&(b=b.neg(),e=e.neg()),l.negative&&(l=l.neg(),p=p.neg()),[{a:b,b:e},{a:l,b:p}]};pp.prototype._endoSplit=function(a){var d=this.endo.basis,k=d[0],b=d[1],e=b.b.mul(a).divRound(this.n),l=k.b.neg().mul(a).divRound(this.n);d=e.mul(k.a);var p=l.mul(b.a);k=e.mul(k.b);b=l.mul(b.b);
return{k1:a.sub(d).sub(p),k2:k.add(b).neg()}};pp.prototype.pointFromX=function(a,d){(a=new Zk(a,16)).red||(a=a.toRed(this.red));var k=a.redSqr().redMul(a).redIAdd(a.redMul(this.a)).redIAdd(this.b),b=k.redSqrt();if(0!==b.redSqr().redSub(k).cmp(this.zero))throw Error("invalid point");k=b.fromRed().isOdd();return(d&&!k||!d&&k)&&(b=b.redNeg()),this.point(a,b)};pp.prototype.validate=function(a){if(a.inf)return!0;var d=a.x;a=a.y;var k=this.a.redMul(d);d=d.redSqr().redMul(d).redIAdd(k).redIAdd(this.b);return 0===
a.redSqr().redISub(d).cmpn(0)};pp.prototype._endoWnafMulAdd=function(a,d,k){for(var b=this._endoWnafT1,e=this._endoWnafT2,l=0;l<a.length;l++){var p=this._endoSplit(d[l]),u=a[l],x=u._getBeta();p.k1.negative&&(p.k1.ineg(),u=u.neg(!0));p.k2.negative&&(p.k2.ineg(),x=x.neg(!0));b[2*l]=u;b[2*l+1]=x;e[2*l]=p.k1;e[2*l+1]=p.k2}a=this._wnafMulAdd(1,b,e,2*l,k);for(d=0;d<2*l;d++)b[d]=null,e[d]=null;return a};bX(nm,cA.BasePoint);pp.prototype.point=function(a,d,k){return new nm(this,a,d,k)};pp.prototype.pointFromJSON=
function(a,d){return nm.fromJSON(this,a,d)};nm.prototype._getBeta=function(){if(this.curve.endo){var a=this.precomputed;if(a&&a.beta)return a.beta;var d=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(a){var k=this.curve,b=function(e){return k.point(e.x.redMul(k.endo.beta),e.y)};a.beta=d;d.precomputed={beta:null,naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(b)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(b)}}}return d}};nm.prototype.toJSON=function(){return this.precomputed?
[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};nm.fromJSON=function(a,d,k){function b(l){return a.point(l[0],l[1],k)}"string"==typeof d&&(d=JSON.parse(d));var e=a.point(d[0],d[1],k);if(!d[2])return e;d=d[2];return e.precomputed={beta:null,doubles:d.doubles&&{step:d.doubles.step,
points:[e].concat(d.doubles.points.map(b))},naf:d.naf&&{wnd:d.naf.wnd,points:[e].concat(d.naf.points.map(b))}},e};nm.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};nm.prototype.isInfinity=function(){return this.inf};nm.prototype.add=function(a){if(this.inf)return a;if(a.inf)return this;if(this.eq(a))return this.dbl();if(this.neg().eq(a)||0===this.x.cmp(a.x))return this.curve.point(null,
null);var d=this.y.redSub(a.y);0!==d.cmpn(0)&&(d=d.redMul(this.x.redSub(a.x).redInvm()));a=d.redSqr().redISub(this.x).redISub(a.x);d=d.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,d)};nm.prototype.dbl=function(){if(this.inf)return this;var a=this.y.redAdd(this.y);if(0===a.cmpn(0))return this.curve.point(null,null);var d=this.curve.a,k=this.x.redSqr();a=a.redInvm();k=k.redAdd(k).redIAdd(k).redIAdd(d).redMul(a);d=k.redSqr().redISub(this.x.redAdd(this.x));k=k.redMul(this.x.redSub(d)).redISub(this.y);
return this.curve.point(d,k)};nm.prototype.getX=function(){return this.x.fromRed()};nm.prototype.getY=function(){return this.y.fromRed()};nm.prototype.mul=function(a){return a=new Zk(a,16),this.isInfinity()?this:this._hasDoubles(a)?this.curve._fixedNafMul(this,a):this.curve.endo?this.curve._endoWnafMulAdd([this],[a]):this.curve._wnafMul(this,a)};nm.prototype.mulAdd=function(a,d,k){d=[this,d];a=[a,k];return this.curve.endo?this.curve._endoWnafMulAdd(d,a):this.curve._wnafMulAdd(1,d,a,2)};nm.prototype.jmulAdd=
function(a,d,k){d=[this,d];a=[a,k];return this.curve.endo?this.curve._endoWnafMulAdd(d,a,!0):this.curve._wnafMulAdd(1,d,a,2,!0)};nm.prototype.eq=function(a){return this===a||this.inf===a.inf&&(this.inf||0===this.x.cmp(a.x)&&0===this.y.cmp(a.y))};nm.prototype.neg=function(a){if(this.inf)return this;var d=this.curve.point(this.x,this.y.redNeg());if(a&&this.precomputed){a=this.precomputed;var k=function(b){return b.neg()};d.precomputed={naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(k)},doubles:a.doubles&&
{step:a.doubles.step,points:a.doubles.points.map(k)}}}return d};nm.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)};bX(Nm,cA.BasePoint);pp.prototype.jpoint=function(a,d,k){return new Nm(this,a,d,k)};Nm.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var a=this.z.redInvm(),d=a.redSqr(),k=this.x.redMul(d);a=this.y.redMul(d).redMul(a);return this.curve.point(k,a)};Nm.prototype.neg=function(){return this.curve.jpoint(this.x,
this.y.redNeg(),this.z)};Nm.prototype.add=function(a){if(this.isInfinity())return a;if(a.isInfinity())return this;var d=a.z.redSqr(),k=this.z.redSqr(),b=this.x.redMul(d),e=a.x.redMul(k);d=this.y.redMul(d.redMul(a.z));k=a.y.redMul(k.redMul(this.z));e=b.redSub(e);k=d.redSub(k);if(0===e.cmpn(0))return 0!==k.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=e.redSqr(),p=l.redMul(e);l=b.redMul(l);b=k.redSqr().redIAdd(p).redISub(l).redISub(l);d=k.redMul(l.redISub(b)).redISub(d.redMul(p));a=this.z.redMul(a.z).redMul(e);
return this.curve.jpoint(b,d,a)};Nm.prototype.mixedAdd=function(a){if(this.isInfinity())return a.toJ();if(a.isInfinity())return this;var d=this.z.redSqr(),k=this.x,b=a.x.redMul(d),e=this.y;a=a.y.redMul(d).redMul(this.z);b=k.redSub(b);a=e.redSub(a);if(0===b.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=b.redSqr();d=l.redMul(b);l=k.redMul(l);k=a.redSqr().redIAdd(d).redISub(l).redISub(l);e=a.redMul(l.redISub(k)).redISub(e.redMul(d));b=this.z.redMul(b);return this.curve.jpoint(k,
e,b)};Nm.prototype.dblp=function(a){if(0===a||this.isInfinity())return this;if(!a)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var d=this,k=0;k<a;k++)d=d.dbl();return d}d=this.curve.a;var b=this.curve.tinv,e=this.x;k=this.y;var l=this.z,p=l.redSqr().redSqr(),u=k.redAdd(k);for(k=0;k<a;k++){var x=e.redSqr(),z=u.redSqr(),E=z.redSqr();x=x.redAdd(x).redIAdd(x).redIAdd(d.redMul(p));z=e.redMul(z);e=x.redSqr().redISub(z.redAdd(z));z=z.redISub(e);x=x.redMul(z);x=x.redIAdd(x).redISub(E);l=
u.redMul(l);k+1<a&&(p=p.redMul(E));u=x}return this.curve.jpoint(e,u.redMul(b),l)};Nm.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Nm.prototype._zeroDbl=function(){if(this.zOne){var a=this.x.redSqr();var d=this.y.redSqr();var k=d.redSqr();d=this.x.redAdd(d).redSqr().redISub(a).redISub(k);d=d.redIAdd(d);a=a.redAdd(a).redIAdd(a);var b=a.redSqr().redISub(d).redISub(d),e=k.redIAdd(k);e=(e=e.redIAdd(e)).redIAdd(e);
k=b;a=a.redMul(d.redISub(b)).redISub(e);d=this.y.redAdd(this.y)}else{b=this.x.redSqr();a=this.y.redSqr();k=a.redSqr();a=this.x.redAdd(a).redSqr().redISub(b).redISub(k);a=a.redIAdd(a);b=b.redAdd(b).redIAdd(b);e=b.redSqr();var l=k.redIAdd(k);l=(l=l.redIAdd(l)).redIAdd(l);k=e.redISub(a).redISub(a);a=b.redMul(a.redISub(k)).redISub(l);d=(d=this.y.redMul(this.z)).redIAdd(d)}return this.curve.jpoint(k,a,d)};Nm.prototype._threeDbl=function(){var a;if(this.zOne){var d=this.x.redSqr();var k=this.y.redSqr();
var b=k.redSqr();k=this.x.redAdd(k).redSqr().redISub(d).redISub(b);k=k.redIAdd(k);var e=d.redAdd(d).redIAdd(d).redIAdd(this.curve.a);d=a=e.redSqr().redISub(k).redISub(k);b=b.redIAdd(b);b=(b=b.redIAdd(b)).redIAdd(b);b=e.redMul(k.redISub(a)).redISub(b);a=this.y.redAdd(this.y)}else a=this.z.redSqr(),k=this.y.redSqr(),d=this.x.redMul(k),b=this.x.redSub(a).redMul(this.x.redAdd(a)),b=b.redAdd(b).redIAdd(b),e=d.redIAdd(d),d=(e=e.redIAdd(e)).redAdd(e),d=b.redSqr().redISub(d),a=this.y.redAdd(this.z).redSqr().redISub(k).redISub(a),
k=k.redSqr(),k=(k=(k=k.redIAdd(k)).redIAdd(k)).redIAdd(k),b=b.redMul(e.redISub(d)).redISub(k);return this.curve.jpoint(d,b,a)};Nm.prototype._dbl=function(){var a=this.curve.a,d=this.x,k=this.y,b=this.z,e=b.redSqr().redSqr(),l=d.redSqr(),p=k.redSqr();a=l.redAdd(l).redIAdd(l).redIAdd(a.redMul(e));d=d.redAdd(d);e=d.redIAdd(d).redMul(p);d=a.redSqr().redISub(e.redAdd(e));e=e.redISub(d);p=p.redSqr();p=(p=(p=p.redIAdd(p)).redIAdd(p)).redIAdd(p);p=a.redMul(e).redISub(p);k=k.redAdd(k).redMul(b);return this.curve.jpoint(d,
p,k)};Nm.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var a=this.x.redSqr(),d=this.y.redSqr(),k=this.z.redSqr(),b=d.redSqr(),e=a.redAdd(a).redIAdd(a),l=e.redSqr();a=this.x.redAdd(d).redSqr().redISub(a).redISub(b);var p=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(l)).redSqr();b=b.redIAdd(b);b=(b=(b=b.redIAdd(b)).redIAdd(b)).redIAdd(b);e=e.redIAdd(a).redSqr().redISub(l).redISub(p).redISub(b);d=d.redMul(e);d=(d=d.redIAdd(d)).redIAdd(d);d=this.x.redMul(p).redISub(d);
d=(d=d.redIAdd(d)).redIAdd(d);b=this.y.redMul(e.redMul(b.redISub(e)).redISub(a.redMul(p)));b=(b=(b=b.redIAdd(b)).redIAdd(b)).redIAdd(b);k=this.z.redAdd(a).redSqr().redISub(k).redISub(p);return this.curve.jpoint(d,b,k)};Nm.prototype.mul=function(a,d){return a=new Zk(a,d),this.curve._wnafMul(this,a)};Nm.prototype.eq=function(a){if("affine"===a.type)return this.eq(a.toJ());if(this===a)return!0;var d=this.z.redSqr(),k=a.z.redSqr();if(0!==this.x.redMul(k).redISub(a.x.redMul(d)).cmpn(0))return!1;d=d.redMul(this.z);
k=k.redMul(a.z);return 0===this.y.redMul(k).redISub(a.y.redMul(d)).cmpn(0)};Nm.prototype.eqXToP=function(a){var d=this.z.redSqr(),k=a.toRed(this.curve.red).redMul(d);if(0===this.x.cmp(k))return!0;a=a.clone();for(d=this.curve.redN.redMul(d);;){if(a.iadd(this.curve.n),0<=a.cmp(this.curve.p))return!1;if(k.redIAdd(d),0===this.x.cmp(k))return!0}};Nm.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,
2)+">"};Nm.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var eA=ul,aba=$h,zJ=iq;aba(dA,zJ);dA.prototype.validate=function(a){a=a.normalize().x;var d=a.redSqr();a=d.redMul(a).redAdd(d.redMul(this.a)).redAdd(a);return 0===a.redSqrt().redSqr().cmp(a)};aba(om,zJ.BasePoint);dA.prototype.decodePoint=function(a,d){return this.point(si.toArray(a,d),1)};dA.prototype.point=function(a,d){return new om(this,a,d)};dA.prototype.pointFromJSON=function(a){return om.fromJSON(this,a)};om.prototype.precompute=
function(){};om.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};om.fromJSON=function(a,d){return new om(a,d[0],d[1]||a.one)};om.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};om.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};om.prototype.dbl=function(){var a=this.x.redAdd(this.z).redSqr(),d=this.x.redSub(this.z).redSqr(),k=a.redSub(d);
a=a.redMul(d);d=k.redMul(d.redAdd(this.curve.a24.redMul(k)));return this.curve.point(a,d)};om.prototype.add=function(){throw Error("Not supported on Montgomery curve");};om.prototype.diffAdd=function(a,d){var k=this.x.redAdd(this.z),b=this.x.redSub(this.z),e=a.x.redAdd(a.z);a=a.x.redSub(a.z).redMul(k);e=e.redMul(b);b=d.z.redMul(a.redAdd(e).redSqr());d=d.x.redMul(a.redISub(e).redSqr());return this.curve.point(b,d)};om.prototype.mul=function(a){var d=a.clone();a=this;for(var k=this.curve.point(null,
null),b=[];0!==d.cmpn(0);d.iushrn(1))b.push(d.andln(1));for(d=b.length-1;0<=d;d--)0===b[d]?(a=a.diffAdd(k,this),k=k.dbl()):(k=a.diffAdd(k,this),a=a.dbl());return k};om.prototype.mulAdd=function(){throw Error("Not supported on Montgomery curve");};om.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve");};om.prototype.eq=function(a){return 0===this.getX().cmp(a.getX())};om.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};
om.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Is=ul,bba=$h,AJ=iq,Gka=si.assert;bba(rr,AJ);rr.prototype._mulA=function(a){return this.mOneA?a.redNeg():this.a.redMul(a)};rr.prototype._mulC=function(a){return this.oneC?a:this.c.redMul(a)};rr.prototype.jpoint=function(a,d,k,b){return this.point(a,d,k,b)};rr.prototype.pointFromX=function(a,d){(a=new Is(a,16)).red||(a=a.toRed(this.red));var k=a.redSqr(),b=this.c2.redSub(this.a.redMul(k));k=this.one.redSub(this.c2.redMul(this.d).redMul(k));
k=b.redMul(k.redInvm());b=k.redSqrt();if(0!==b.redSqr().redSub(k).cmp(this.zero))throw Error("invalid point");k=b.fromRed().isOdd();return(d&&!k||!d&&k)&&(b=b.redNeg()),this.point(a,b)};rr.prototype.pointFromY=function(a,d){(a=new Is(a,16)).red||(a=a.toRed(this.red));var k=a.redSqr(),b=k.redSub(this.c2);k=k.redMul(this.d).redMul(this.c2).redSub(this.a);b=b.redMul(k.redInvm());if(0===b.cmp(this.zero)){if(d)throw Error("invalid point");return this.point(this.zero,a)}k=b.redSqrt();if(0!==k.redSqr().redSub(b).cmp(this.zero))throw Error("invalid point");
return k.fromRed().isOdd()!==d&&(k=k.redNeg()),this.point(k,a)};rr.prototype.validate=function(a){if(a.isInfinity())return!0;a.normalize();var d=a.x.redSqr(),k=a.y.redSqr();a=d.redMul(this.a).redAdd(k);d=this.c2.redMul(this.one.redAdd(this.d.redMul(d).redMul(k)));return 0===a.cmp(d)};bba(vk,AJ.BasePoint);rr.prototype.pointFromJSON=function(a){return vk.fromJSON(this,a)};rr.prototype.point=function(a,d,k,b){return new vk(this,a,d,k,b)};vk.fromJSON=function(a,d){return new vk(a,d[0],d[1],d[2])};vk.prototype.inspect=
function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};vk.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))};vk.prototype._extDbl=function(){var a=this.x.redSqr(),d=this.y.redSqr(),k=this.z.redSqr();k=k.redIAdd(k);var b=this.curve._mulA(a),e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(d);
a=b.redAdd(d);k=a.redSub(k);var l=b.redSub(d);d=e.redMul(k);b=a.redMul(l);e=e.redMul(l);a=k.redMul(a);return this.curve.point(d,b,a,e)};vk.prototype._projDbl=function(){var a=this.x.redAdd(this.y).redSqr();var d=this.x.redSqr();var k=this.y.redSqr();if(this.curve.twisted){var b=(l=this.curve._mulA(d)).redAdd(k);if(this.zOne)a=a.redSub(d).redSub(k).redMul(b.redSub(this.curve.two)),d=b.redMul(l.redSub(k)),b=b.redSqr().redSub(b).redSub(b);else{var e=this.z.redSqr();e=b.redSub(e).redISub(e);a=a.redSub(d).redISub(k).redMul(e);
d=b.redMul(l.redSub(k));b=b.redMul(e)}}else{var l=d.redAdd(k);e=this.curve._mulC(this.z).redSqr();e=l.redSub(e).redSub(e);a=this.curve._mulC(a.redISub(l)).redMul(e);d=this.curve._mulC(l).redMul(d.redISub(k));b=l.redMul(e)}return this.curve.point(a,d,b)};vk.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};vk.prototype._extAdd=function(a){var d=this.y.redSub(this.x).redMul(a.y.redSub(a.x)),k=this.y.redAdd(this.x).redMul(a.y.redAdd(a.x)),b=this.t.redMul(this.curve.dd).redMul(a.t),
e=this.z.redMul(a.z.redAdd(a.z)),l=k.redSub(d);a=e.redSub(b);b=e.redAdd(b);e=k.redAdd(d);d=l.redMul(a);k=b.redMul(e);l=l.redMul(e);a=a.redMul(b);return this.curve.point(d,k,a,l)};vk.prototype._projAdd=function(a){var d,k,b=this.z.redMul(a.z),e=b.redSqr(),l=this.x.redMul(a.x),p=this.y.redMul(a.y),u=this.curve.d.redMul(l).redMul(p),x=e.redSub(u);e=e.redAdd(u);a=this.x.redAdd(this.y).redMul(a.x.redAdd(a.y)).redISub(l).redISub(p);a=b.redMul(x).redMul(a);return this.curve.twisted?(d=b.redMul(e).redMul(p.redSub(this.curve._mulA(l))),
k=x.redMul(e)):(d=b.redMul(e).redMul(p.redSub(l)),k=this.curve._mulC(x).redMul(e)),this.curve.point(a,d,k)};vk.prototype.add=function(a){return this.isInfinity()?a:a.isInfinity()?this:this.curve.extended?this._extAdd(a):this._projAdd(a)};vk.prototype.mul=function(a){return this._hasDoubles(a)?this.curve._fixedNafMul(this,a):this.curve._wnafMul(this,a)};vk.prototype.mulAdd=function(a,d,k){return this.curve._wnafMulAdd(1,[this,d],[a,k],2,!1)};vk.prototype.jmulAdd=function(a,d,k){return this.curve._wnafMulAdd(1,
[this,d],[a,k],2,!0)};vk.prototype.normalize=function(){if(this.zOne)return this;var a=this.z.redInvm();return this.x=this.x.redMul(a),this.y=this.y.redMul(a),this.t&&(this.t=this.t.redMul(a)),this.z=this.curve.one,this.zOne=!0,this};vk.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};vk.prototype.getX=function(){return this.normalize(),this.x.fromRed()};vk.prototype.getY=function(){return this.normalize(),this.y.fromRed()};vk.prototype.eq=function(a){return this===
a||0===this.getX().cmp(a.getX())&&0===this.getY().cmp(a.getY())};vk.prototype.eqXToP=function(a){var d=a.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(d))return!0;a=a.clone();for(var k=this.curve.redN.redMul(this.z);;){if(a.iadd(this.curve.n),0<=a.cmp(this.curve.p))return!1;if(d.redIAdd(k),0===this.x.cmp(d))return!0}};vk.prototype.toP=vk.prototype.normalize;vk.prototype.mixedAdd=vk.prototype.add;var bB={};bB.base=iq;bB.short=pp;bB.mont=dA;bB.edwards=rr;var Ota={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a",
"f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c",
"4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d",
"9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047",
"10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83",
"7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725",
"7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39",
"c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d",
"eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11",
"1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8",
"db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5",
"9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751",
"1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f",
"4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2",
"8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151",
"e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366",
"d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e",
"ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe",
"cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34",
"4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714",
"73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5",
"b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb",
"d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530",
"e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120",
"4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb",
"3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45",
"f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c",
"30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf",
"8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940",
"edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63",
"4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6",
"8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5",
"42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5",
"39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94",
"60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5",
"cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889",
"2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030",
"bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38",
"60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea",
"be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4",
"25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c",
"6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d",
"438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193",
"ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8",
"c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f",
"f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c",
"ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917",
"603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66",
"ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},sN={},LS=sN,KS=bB,Z4=si.assert;
LS.PresetCurve=Y4;iu("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:tk.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});iu("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",
a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:tk.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});iu("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",
b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:tk.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});iu("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",
b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:tk.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});iu("p521",{type:"short",prime:null,
p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",
hash:tk.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});iu("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",
hash:tk.sha256,gRed:!1,g:["9"]});iu("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:tk.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{var cba=Ota}catch(a){cba=void 0}iu("secp256k1",
{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:tk.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],
gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",cba]});var Pta=ul,dba=si.assert;pm.fromPublic=function(a,d,k){return d instanceof pm?d:new pm(a,{pub:d,pubEnc:k})};pm.fromPrivate=function(a,d,k){return d instanceof pm?d:new pm(a,{priv:d,privEnc:k})};pm.prototype.validate=function(){var a=this.getPublic();return a.isInfinity()?{result:!1,reason:"Invalid public key"}:a.validate()?a.mul(this.ec.curve.n).isInfinity()?
{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};pm.prototype.getPublic=function(a,d){return"string"==typeof a&&(d=a,a=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),d?this.pub.encode(d,a):this.pub};pm.prototype.getPrivate=function(a){return"hex"===a?this.priv.toString(16,2):this.priv};pm.prototype._importPrivate=function(a,d){this.priv=new Pta(a,d||16);this.priv=this.priv.umod(this.ec.curve.n)};pm.prototype._importPublic=function(a,
d){if(a.x||a.y)return"mont"===this.ec.curve.type?dba(a.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||dba(a.x&&a.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(a.x,a.y),void 0;this.pub=this.ec.curve.decodePoint(a,d)};pm.prototype.derive=function(a){return a.mul(this.priv).getX()};pm.prototype.sign=function(a,d,k){return this.ec.sign(a,this,d,k)};pm.prototype.verify=function(a,d){return this.ec.verify(a,d,this)};pm.prototype.inspect=function(){return"<Key priv: "+
(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Nx=ul,MS=sN,$4=si.assert;qp.prototype.keyPair=function(a){return new pm(this,a)};qp.prototype.keyFromPrivate=function(a,d){return pm.fromPrivate(this,a,d)};qp.prototype.keyFromPublic=function(a,d){return pm.fromPublic(this,a,d)};qp.prototype.genKeyPair=function(a){a||(a={});a=new Hs({hash:this.hash,pers:a.pers,persEnc:a.persEnc||"utf8",entropy:a.entropy||nN(this.hash.hmacStrength),entropyEnc:a.entropy&&a.entropyEnc||
"utf8",nonce:this.n.toArray()});for(var d=this.n.byteLength(),k=this.n.sub(new Nx(2));;){var b=new Nx(a.generate(d));if(!(0<b.cmp(k)))return b.iaddn(1),this.keyFromPrivate(b)}};qp.prototype._truncateToN=function(a,d){var k=8*a.byteLength()-this.n.bitLength();return 0<k&&(a=a.ushrn(k)),!d&&0<=a.cmp(this.n)?a.sub(this.n):a};qp.prototype.sign=function(a,d,k,b){"object"==typeof k&&(b=k,k=null);b||(b={});d=this.keyFromPrivate(d,k);a=this._truncateToN(new Nx(a,16));var e=this.n.byteLength();k=d.getPrivate().toArray("be",
e);e=a.toArray("be",e);e=new Hs({hash:this.hash,entropy:k,nonce:e,pers:b.pers,persEnc:b.persEnc||"utf8"});for(var l=this.n.sub(new Nx(1)),p=0;;p++){var u=b.k?b.k(p):new Nx(e.generate(this.n.byteLength()));if(!(0>=(u=this._truncateToN(u,!0)).cmpn(1)||0<=u.cmp(l))){var x=this.g.mul(u);if(!x.isInfinity()){var z=x.getX();k=z.umod(this.n);if(0!==k.cmpn(0)&&(u=u.invm(this.n).mul(k.mul(d.getPrivate()).iadd(a)),0!==(u=u.umod(this.n)).cmpn(0)))return a=(x.getY().isOdd()?1:0)|(0!==z.cmp(k)?2:0),b.canonical&&
0<u.cmp(this.nh)&&(u=this.n.sub(u),a^=1),new Pw({r:k,s:u,recoveryParam:a})}}}};qp.prototype.verify=function(a,d,k,b){a=this._truncateToN(new Nx(a,16));k=this.keyFromPublic(k,b);b=(d=new Pw(d,"hex")).r;d=d.s;if(0>b.cmpn(1)||0<=b.cmp(this.n)||0>d.cmpn(1)||0<=d.cmp(this.n))return!1;var e;d=d.invm(this.n);a=d.mul(a).umod(this.n);d=d.mul(b).umod(this.n);return this.curve._maxwellTrick?!(e=this.g.jmulAdd(a,k.getPublic(),d)).isInfinity()&&e.eqXToP(b):!(e=this.g.mulAdd(a,k.getPublic(),d)).isInfinity()&&0===
e.getX().umod(this.n).cmp(b)};qp.prototype.recoverPubKey=function(a,d,k,b){$4((3&k)===k,"The recovery param is more than two bits");d=new Pw(d,b);b=this.n;var e=new Nx(a);a=d.r;var l=d.s,p=1&k;k>>=1;if(0<=a.cmp(this.curve.p.umod(this.curve.n))&&k)throw Error("Unable to find sencond key candinate");a=k?this.curve.pointFromX(a.add(this.curve.n),p):this.curve.pointFromX(a,p);d=d.r.invm(b);k=b.sub(e).mul(d).umod(b);b=l.mul(d).umod(b);return this.g.mulAdd(k,a,b)};qp.prototype.getKeyRecoveryParam=function(a,
d,k,b){if(null!==(d=new Pw(d,b)).recoveryParam)return d.recoveryParam;for(b=0;4>b;b++){try{var e=this.recoverPubKey(a,d,b)}catch(l){continue}if(e.eq(k))return b}throw Error("Unable to find valid recovery factor");};var eba=si.assert,a5=si.parseBytes,cB=si.cachedProperty;Ol.fromPublic=function(a,d){return d instanceof Ol?d:new Ol(a,{pub:d})};Ol.fromSecret=function(a,d){return d instanceof Ol?d:new Ol(a,{secret:d})};Ol.prototype.secret=function(){return this._secret};cB(Ol,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});
cB(Ol,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});cB(Ol,"privBytes",function(){var a=this.eddsa,d=this.hash(),k=a.encodingLength-1;a=d.slice(0,a.encodingLength);return a[0]&=248,a[k]&=127,a[k]|=64,a});cB(Ol,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});cB(Ol,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});cB(Ol,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});
Ol.prototype.sign=function(a){return eba(this._secret,"KeyPair can only verify"),this.eddsa.sign(a,this)};Ol.prototype.verify=function(a,d){return this.eddsa.verify(a,d,this)};Ol.prototype.getSecret=function(a){return eba(this._secret,"KeyPair is public only"),si.encode(this.secret(),a)};Ol.prototype.getPublic=function(a){return si.encode(this.pubBytes(),a)};var Jka=ul,Ika=si.assert,tN=si.cachedProperty,Hka=si.parseBytes;tN(ju,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});tN(ju,"R",
function(){return this.eddsa.decodePoint(this.Rencoded())});tN(ju,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});tN(ju,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});ju.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};ju.prototype.toHex=function(){return si.encode(this.toBytes(),"hex").toUpperCase()};var Mka=tk,Lka=sN,Kka=si.assert,fba=si.parseBytes;$n.prototype.sign=function(a,d){a=fba(a);var k=this.keyFromSecret(d),b=this.hashInt(k.messagePrefix(),
a);d=this.g.mul(b);var e=this.encodePoint(d);a=this.hashInt(e,k.pubBytes(),a).mul(k.priv());a=b.add(a).umod(this.curve.n);return this.makeSignature({R:d,S:a,Rencoded:e})};$n.prototype.verify=function(a,d,k){a=fba(a);d=this.makeSignature(d);k=this.keyFromPublic(k);a=this.hashInt(d.Rencoded(),k.pubBytes(),a);var b=this.g.mul(d.S());return d.R().add(k.pub().mul(a)).eq(b)};$n.prototype.hashInt=function(){for(var a=this.hash(),d=0;d<arguments.length;d++)a.update(arguments[d]);return si.intFromLE(a.digest()).umod(this.curve.n)};
$n.prototype.keyFromPublic=function(a){return Ol.fromPublic(this,a)};$n.prototype.keyFromSecret=function(a){return Ol.fromSecret(this,a)};$n.prototype.makeSignature=function(a){return a instanceof ju?a:new ju(this,a)};$n.prototype.encodePoint=function(a){var d=a.getY().toArray("le",this.encodingLength);return d[this.encodingLength-1]|=a.getX().isOdd()?128:0,d};$n.prototype.decodePoint=function(a){var d=(a=si.parseBytes(a)).length-1,k=a.slice(0,d).concat(-129&a[d]);a=0!=(128&a[d]);k=si.intFromLE(k);
return this.curve.pointFromY(k,a)};$n.prototype.encodeInt=function(a){return a.toArray("le",this.encodingLength)};$n.prototype.decodeInt=function(a){return si.intFromLE(a)};$n.prototype.isPoint=function(a){return a instanceof this.pointClass};var dt={version:"6.5.2"};dt.utils=si;dt.rand=nN;dt.curve=bB;dt.curves=sN;dt.ec=qp;dt.eddsa=$n;var ZS={},s5=!1,zo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Pl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?
self:global,e5={},Qta=$h;e5.Reporter=rp;rp.prototype.isError=function(a){return a instanceof fA};rp.prototype.save=function(){var a=(this||Pl)._reporterState;return{obj:a.obj,pathLen:a.path.length}};rp.prototype.restore=function(a){var d=(this||Pl)._reporterState;d.obj=a.obj;d.path=d.path.slice(0,a.pathLen)};rp.prototype.enterKey=function(a){return(this||Pl)._reporterState.path.push(a)};rp.prototype.exitKey=function(a){var d=(this||Pl)._reporterState;d.path=d.path.slice(0,a-1)};rp.prototype.leaveKey=
function(a,d,k){var b=(this||Pl)._reporterState;this.exitKey(a);null!==b.obj&&(b.obj[d]=k)};rp.prototype.path=function(){return(this||Pl)._reporterState.path.join("/")};rp.prototype.enterObject=function(){var a=(this||Pl)._reporterState,d=a.obj;return a.obj={},d};rp.prototype.leaveObject=function(a){var d=(this||Pl)._reporterState,k=d.obj;return d.obj=a,k};rp.prototype.error=function(a){var d=(this||Pl)._reporterState,k=a instanceof fA;if(a=k?a:new fA(d.path.map(function(b){return"["+JSON.stringify(b)+
"]"}).join(""),a.message||a,a.stack),!d.options.partial)throw a;return k||d.errors.push(a),a};rp.prototype.wrapResult=function(a){var d=(this||Pl)._reporterState;return d.options.partial?{result:this.isError(a)?null:a,errors:d.errors}:a};Qta(fA,Error);fA.prototype.rethrow=function(a){if((this||Pl).message=a+" at: "+((this||Pl).path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this||Pl,fA),!(this||Pl).stack)try{throw Error((this||Pl).message);}catch(d){(this||Pl).stack=d.stack}return this||
Pl};var BJ={},c5=!1,sh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,OS={},f5=!1,Ig="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,NS={},d5=!1,ku={},i5=!1,PS={},h5=!1,QS={},k5=!1,lu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,TS={},m5=!1,SS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,RS={},l5=!1,US={},o5=!1,Ql="undefined"!=typeof globalThis?globalThis:"undefined"!=
typeof self?self:global,XS={},q5=!1,WS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,VS={},p5=!1,YS={},r5=!1,el=CJ(),gba=el.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),Rta=el.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),cX=el.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),
Sta=el.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(cX),this.key("subjectPublicKey").bitstr())}),Tta=el.define("RelativeDistinguishedName",function(){this.setof(Rta)}),Uta=el.define("RDNSequence",function(){this.seqof(Tta)}),hba=el.define("Name",function(){this.choice({rdnSequence:this.use(Uta)})}),Vta=el.define("Validity",function(){this.seq().obj(this.key("notBefore").use(gba),this.key("notAfter").use(gba))}),Wta=el.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),
this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),Xta=el.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(cX),this.key("issuer").use(hba),this.key("validity").use(Vta),this.key("subject").use(hba),this.key("subjectPublicKeyInfo").use(Sta),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Wta).optional())}),
Yta=el.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(Xta),this.key("signatureAlgorithm").use(cX),this.key("signatureValue").bitstr())}),Dq={};Dq.certificate=Yta;var Zta=el.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});
Dq.RSAPrivateKey=Zta;var $ta=el.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});Dq.RSAPublicKey=$ta;var aua=el.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(iba),this.key("subjectPublicKey").bitstr())});Dq.PublicKey=aua;var iba=el.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),
this.key("q").int(),this.key("g").int()).optional())}),bua=el.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(iba),this.key("subjectPrivateKey").octstr())});Dq.PrivateKey=bua;var cua=el.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),
this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});Dq.EncryptedPrivateKey=cua;var dua=el.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});Dq.DSAPrivateKey=dua;Dq.DSAparam=el.define("DSAparam",function(){this.int()});var fua=el.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),
this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(eua),this.key("publicKey").optional().explicit(1).bitstr())});Dq.ECPrivateKey=fua;var eua=el.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});Dq.signature=el.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});var Pka=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/=]+)[\n\r]+/m,Rka=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,
Qka=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/=]+)-----END \1-----$/m,DJ=aj.Buffer,ao=Dq,Ska={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc",
"2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},Uka=Ao,Tka=iN,$S=aj.Buffer;gA.signature=ao.signature;var jba={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},dX={},gn=Rh.Buffer,Tw=yaa,gua=dt.ec,EJ=ul;(dX=function(a,d,k,b,e){d=gA(d);if(d.curve){if("ecdsa"!==b&&"ecdsa/rsa"!==b)throw Error("wrong private key type");return function(l,p){var u=jba[p.curve.join(".")];
if(!u)throw Error("unknown curve "+p.curve.join("."));l=(new gua(u)).keyFromPrivate(p.privateKey).sign(l);return new gn(l.toDER())}(a,d)}if("dsa"===d.type){if("dsa"!==b)throw Error("wrong private key type");return function(l,p,u){var x=p.params.priv_key,z=p.params.p,E=p.params.q;p=p.params.g;var G=new EJ(0),J=aT(l,E).mod(E);var K=!1;for(l=t5(x,E,l,u);!1===K;){G=K=u5(E,l,u);var T=E;G=p.toRed(EJ.mont(z)).redPow(G).fromRed().mod(T);0===(K=K.invm(E).imul(J.add(x.mul(G))).mod(E)).cmpn(0)&&(K=!1,G=new EJ(0))}u=
K;x=G.toArray();u=u.toArray();128&x[0]&&(x=[0].concat(x));128&u[0]&&(u=[0].concat(u));z=[48,x.length+u.length+4,2,x.length];return z=z.concat(x,[2,u.length],u),new gn(z)}(a,d,k)}if("rsa"!==b&&"ecdsa/rsa"!==b)throw Error("wrong private key type");a=gn.concat([e,a]);b=d.modulus.byteLength();for(k=[0,1];a.length+k.length+1<b;)k.push(255);k.push(0);for(b=-1;++b<a.length;)k.push(a[b]);return wJ(k,d)}).getKey=t5;dX.makeKey=u5;var eX=Rh.Buffer,rF=ul,hua=dt.ec,$k="undefined"!=typeof globalThis?globalThis:
"undefined"!=typeof self?self:global,uN=Rh.Buffer,w5=mF,FJ=Zw,kba=$h,iua=dX,jua=function(a,d,k,b,e){k=gA(k);if("ec"===k.type){if("ecdsa"!==b&&"ecdsa/rsa"!==b)throw Error("wrong public key type");return function(u,x,z){var E=jba[z.data.algorithm.curve.join(".")];if(!E)throw Error("unknown curve "+z.data.algorithm.curve.join("."));return(new hua(E)).verify(x,u,z.data.subjectPrivateKey.data)}(a,d,k)}if("dsa"===k.type){if("dsa"!==b)throw Error("wrong public key type");return function(u,x,z){var E=z.data.p,
G=z.data.q,J=z.data.g;z=z.data.pub_key;var K=gA.signature.decode(u,"der");u=K.s;K=K.r;v5(u,G);v5(K,G);var T=rF.mont(E);u=u.invm(G);return 0===J.toRed(T).redPow((new rF(x)).mul(u).mod(G)).fromRed().mul(z.toRed(T).redPow(K.mul(u).mod(G)).fromRed()).mod(E).mod(G).cmp(K)}(a,d,k)}if("rsa"!==b&&"ecdsa/rsa"!==b)throw Error("wrong public key type");d=eX.concat([e,d]);e=k.modulus.byteLength();b=[1];for(var l=0;d.length+b.length+2<e;)b.push(255),l++;b.push(0);for(var p=-1;++p<d.length;)b.push(d[p]);b=new eX(b);
d=rF.mont(k.modulus);a=(a=(new rF(a)).toRed(d)).redPow(new rF(k.publicExponent));a=new eX(a.fromRed().toArray());d=8>l?1:0;e=Math.min(a.length,b.length);a.length!==b.length&&(d=1);for(p=-1;++p<e;)d|=a[p]^b[p];return 0===d},Uw=zaa;Object.keys(Uw).forEach(function(a){Uw[a].id=new uN(Uw[a].id,"hex");Uw[a.toLowerCase()]=Uw[a]});kba(ED,FJ.Writable);ED.prototype._write=function(a,d,k){(this||$k)._hash.update(a);k()};ED.prototype.update=function(a,d){return"string"==typeof a&&(a=new uN(a,d)),(this||$k)._hash.update(a),
this||$k};ED.prototype.sign=function(a,d){this.end();var k=(this||$k)._hash.digest();a=iua(k,a,(this||$k)._hashType,(this||$k)._signType,(this||$k)._tag);return d?a.toString(d):a};kba(FD,FJ.Writable);FD.prototype._write=function(a,d,k){(this||$k)._hash.update(a);k()};FD.prototype.update=function(a,d){return"string"==typeof a&&(a=new uN(a,d)),(this||$k)._hash.update(a),this||$k};FD.prototype.verify=function(a,d,k){"string"==typeof d&&(d=new uN(d,k));this.end();k=(this||$k)._hash.digest();return jua(d,
k,a,(this||$k)._signType,(this||$k)._tag)};var Rl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Js=Rh.Buffer,Vka=dt,kua=ul,Bo={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};Bo.p224=Bo.secp224r1;Bo.p256=Bo.secp256r1=Bo.prime256v1;Bo.p192=Bo.secp192r1=
Bo.prime192v1;Bo.p384=Bo.secp384r1;Bo.p521=Bo.secp521r1;Vw.prototype.generateKeys=function(a,d){return(this||Rl).keys=(this||Rl).curve.genKeyPair(),this.getPublicKey(a,d)};Vw.prototype.computeSecret=function(a,d,k){return d=d||"utf8",Js.isBuffer(a)||(a=new Js(a,d)),bT((this||Rl).curve.keyFromPublic(a).getPublic().mul((this||Rl).keys.getPrivate()).getX(),k,(this||Rl).curveType.byteLength)};Vw.prototype.getPublicKey=function(a,d){var k=(this||Rl).keys.getPublic("compressed"===d,!0);return"hybrid"===
d&&(k[k.length-1]%2?k[0]=7:k[0]=6),bT(k,a)};Vw.prototype.getPrivateKey=function(a){return bT((this||Rl).keys.getPrivate(),a)};Vw.prototype.setPublicKey=function(a,d){return d=d||"utf8",Js.isBuffer(a)||(a=new Js(a,d)),(this||Rl).keys._importPublic(a),this||Rl};Vw.prototype.setPrivateKey=function(a,d){d=d||"utf8";Js.isBuffer(a)||(a=new Js(a,d));a=new kua(a);return a=a.toString(16),(this||Rl).keys=(this||Rl).curve.genKeyPair(),(this||Rl).keys._importPrivate(a),this||Rl};var fX=aj.Buffer,vN=function(a,
d){for(var k,b=fX.alloc(0),e=0;b.length<d;){k=e++;var l=fX.allocUnsafe(4);k=(l.writeUInt32BE(k,0),l);b=fX.concat([b,mF("sha1").update(a).update(k).digest()])}return b.slice(0,d)},wN=function(a,d){for(var k=a.length,b=-1;++b<k;)a[b]^=d[b];return a},lba=ul,lua=aj.Buffer,mba=function(a,d){return lua.from(a.toRed(lba.mont(d.modulus)).redPow(new lba(d.publicExponent)).fromRed().toArray())},gX=ul,Eq=aj.Buffer,nba=ul,sF=aj.Buffer,dB={publicEncrypt:function(a,d,k){var b=a.padding?a.padding:k?1:4;a=gA(a);
if(4===b)d=function(e,l){e=e.modulus.byteLength();var p=l.length,u=mF("sha1").update(Eq.alloc(0)).digest(),x=u.length,z=2*x;if(p>e-z-2)throw Error("message too long");z=Eq.alloc(e-p-z-2);var E=e-x-1;p=Ou(x);l=wN(Eq.concat([u,z,Eq.alloc(1,1),l],E),vN(p,E));x=wN(p,vN(l,x));return new gX(Eq.concat([Eq.alloc(1),x,l],e))}(a,d);else if(1===b)d=function(e,l,p){var u=l.length;e=e.modulus.byteLength();if(u>e-11)throw Error("message too long");if(p)var x=Eq.alloc(e-u-3,255);else{u=e-u-3;for(var z=Eq.allocUnsafe(u),
E=0,G=Ou(2*u),J=0;E<u;)J===G.length&&(G=Ou(2*u),J=0),(x=G[J++])&&(z[E++]=x);x=z}return new gX(Eq.concat([Eq.from([0,p?1:2]),x,Eq.alloc(1),l],e))}(a,d,k);else{if(3!==b)throw Error("unknown padding");if(0<=(d=new gX(d)).cmp(a.modulus))throw Error("data too long for modulus");}return k?wJ(d,a):mba(d,a)},privateDecrypt:function(a,d,k){var b=a.padding?a.padding:k?1:4;a=gA(a);var e=a.modulus.byteLength();if(d.length>e||0<=(new nba(d)).cmp(a.modulus))throw Error("decryption error");d=k?mba(new nba(d),a):
wJ(d,a);var l=sF.alloc(e-d.length);if(d=sF.concat([l,d],e),4===b)return function(p,u){var x=p.modulus.byteLength(),z=mF("sha1").update(sF.alloc(0)).digest();p=z.length;if(0!==u[0])throw Error("decryption error");var E=u.slice(1,p+1);u=u.slice(p+1);E=wN(E,vN(u,p));x=wN(u,vN(E,x-p-1));u=x.slice(0,p);z=sF.from(z);u=sF.from(u);E=0;var G=z.length;z.length!==u.length&&(E++,G=Math.min(z.length,u.length));for(var J=-1;++J<G;)E+=z[J]^u[J];if(E)throw Error("decryption error");for(;0===x[p];)p++;if(1!==x[p++])throw Error("decryption error");
return x.slice(p)}(a,d);if(1===b)return function(p,u,x){p=u.slice(0,2);for(var z=2,E=0;0!==u[z++];)if(z>=u.length){E++;break}var G=u.slice(2,z-1);("0002"!==p.toString("hex")&&!x||"0001"!==p.toString("hex")&&x)&&E++;8>G.length&&E++;if(E)throw Error("decryption error");return u.slice(z)}(0,d,k);if(3===b)return d;throw Error("unknown padding");},privateEncrypt:function(a,d){return dB.publicEncrypt(a,d,!0)},publicDecrypt:function(a,d){return dB.privateDecrypt(a,d,!0)}},xN="undefined"!=typeof globalThis?
globalThis:"undefined"!=typeof self?self:global,hX,iX,cT=Li,F5=Ou,oba=aj.Buffer,C5=aj.kMaxLength,dT=xN.crypto||xN.msCrypto,B5=Math.pow(2,32)-1;dT&&dT.getRandomValues||!cT.browser?(hX=function(a,d,k,b){if(!(oba.isBuffer(a)||a instanceof xN.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof d)b=d,d=0,k=a.length;else if("function"==typeof k)b=k,k=a.length-d;else if("function"!=typeof b)throw new TypeError('"cb" argument must be a function');return A5(d,
a.length),D5(k,d,a.length),E5(a,d,k,b)},iX=function(a,d,k){void 0===d&&(d=0);if(!(oba.isBuffer(a)||a instanceof xN.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');A5(d,a.length);void 0===k&&(k=a.length-d);return D5(k,d,a.length),E5(a,d,k)}):(hX=z5,iX=z5);var ih={};ih.randomBytes=ih.rng=ih.pseudoRandomBytes=ih.prng=Ou;ih.createHash=ih.Hash=mF;ih.createHmac=ih.Hmac=yaa;var mua=Object.keys(zaa),nua="sha1 sha224 sha256 sha384 sha512 md5 rmd160".split(" ").concat(mua);
ih.getHashes=function(){return nua};ih.pbkdf2=iN.pbkdf2;ih.pbkdf2Sync=iN.pbkdf2Sync;ih.Cipher=Laa;ih.createCipher=ita;ih.Cipheriv=BS;ih.createCipheriv=BS;ih.Decipher=Maa;ih.createDecipher=jta;ih.Decipheriv=DS;ih.createDecipheriv=DS;ih.getCiphers=Naa;ih.listCiphers=kta;ih.DiffieHellmanGroup=sta;ih.createDiffieHellmanGroup=Saa;ih.getDiffieHellman=Taa;ih.createDiffieHellman=tta;ih.DiffieHellman=Uaa;ih.createSign=x5;ih.Sign=x5;ih.createVerify=y5;ih.Verify=y5;ih.createECDH=function(a){return new Vw(a)};
ih.publicEncrypt=dB.publicEncrypt;ih.privateEncrypt=dB.privateEncrypt;ih.publicDecrypt=dB.publicDecrypt;ih.privateDecrypt=dB.privateDecrypt;ih.randomFill=hX;ih.randomFillSync=iX;ih.createCredentials=function(){throw Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/crypto-browserify/crypto-browserify");};ih.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,
RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};var Vr={};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.default=function(){return oua.default.randomFillSync(pua)};var oua=ih&&ih.__esModule?ih:{default:ih},pua=new Uint8Array(16),Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.default=void 0;for(var Sm=[],jX=0;256>jX;++jX)Sm.push((jX+
256).toString(16).substr(1));Gn.default=function(a,d){d=d||0;return(Sm[a[d+0]]+Sm[a[d+1]]+Sm[a[d+2]]+Sm[a[d+3]]+"-"+Sm[a[d+4]]+Sm[a[d+5]]+"-"+Sm[a[d+6]]+Sm[a[d+7]]+"-"+Sm[a[d+8]]+Sm[a[d+9]]+"-"+Sm[a[d+10]]+Sm[a[d+11]]+Sm[a[d+12]]+Sm[a[d+13]]+Sm[a[d+14]]+Sm[a[d+15]]).toLowerCase()};var yN={};Object.defineProperty(yN,"__esModule",{value:!0});yN.default=void 0;var qua=Vr&&Vr.__esModule?Vr:{default:Vr},rua=Gn&&Gn.__esModule?Gn:{default:Gn},pba,kX,lX=0,mX=0;yN.default=function(a,d,k){k=d&&k||0;var b=d||
[];a=a||{};var e=a.node||pba,l=void 0!==a.clockseq?a.clockseq:kX;if(null==e||null==l){var p=a.random||(a.rng||qua.default)();null==e&&(e=pba=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]);null==l&&(l=kX=(p[6]<<8|p[7])&16383)}p=void 0!==a.msecs?a.msecs:Date.now();var u=void 0!==a.nsecs?a.nsecs:mX+1,x=p-lX+(u-mX)/1E4;0>x&&void 0===a.clockseq&&(l=l+1&16383);(0>x||p>lX)&&void 0===a.nsecs&&(u=0);if(1E4<=u)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");lX=p;mX=u;kX=l;p+=122192928E5;a=(1E4*(p&268435455)+
u)%4294967296;b[k++]=a>>>24&255;b[k++]=a>>>16&255;b[k++]=a>>>8&255;b[k++]=a&255;a=p/4294967296*1E4&268435455;b[k++]=a>>>8&255;b[k++]=a&255;b[k++]=a>>>24&15|16;b[k++]=a>>>16&255;b[k++]=l>>>8|128;b[k++]=l&255;for(l=0;6>l;++l)b[k+l]=e[l];return d||(0,rua.default)(b)};var jo={};Object.defineProperty(jo,"__esModule",{value:!0});jo.default=function(a,d,k){function b(e,l,p,u){u=p&&u||0;if("string"===typeof e){e=unescape(encodeURIComponent(e));for(var x=[],z=0;z<e.length;++z)x.push(e.charCodeAt(z));e=x}"string"===
typeof l&&(l=Wka(l));if(!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(l)||16!==l.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");l=k(l.concat(e));l[6]=l[6]&15|d;l[8]=l[8]&63|128;if(p)for(e=0;16>e;++e)p[u+e]=l[e];return p||(0,sua.default)(l)}try{b.name=a}catch(e){}b.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";b.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";return b};jo.URL=jo.DNS=void 0;var sua=Gn&&Gn.__esModule?Gn:{default:Gn};
jo.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";jo.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";var Ox={},qba=Rh.Buffer;Object.defineProperty(Ox,"__esModule",{value:!0});Ox.default=void 0;var tua=ih&&ih.__esModule?ih:{default:ih};Ox.default=function(a){Array.isArray(a)?a=qba.from(a):"string"===typeof a&&(a=qba.from(a,"utf8"));return tua.default.createHash("md5").update(a).digest()};var zN={};Object.defineProperty(zN,"__esModule",{value:!0});zN.default=void 0;var uua=jo&&jo.__esModule?jo:{default:jo},
vua=Ox&&Ox.__esModule?Ox:{default:Ox},wua=(0,uua.default)("v3",48,vua.default);zN.default=wua;var AN={};Object.defineProperty(AN,"__esModule",{value:!0});AN.default=void 0;var xua=Vr&&Vr.__esModule?Vr:{default:Vr},yua=Gn&&Gn.__esModule?Gn:{default:Gn};AN.default=function(a,d,k){"string"===typeof a&&(d="binary"===a?new Uint8Array(16):null,a=null);a=a||{};a=a.random||(a.rng||xua.default)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(d){k=k||0;for(var b=0;16>b;++b)d[k+b]=a[b];return d}return(0,yua.default)(a)};
var Px={},rba=Rh.Buffer;Object.defineProperty(Px,"__esModule",{value:!0});Px.default=void 0;var zua=ih&&ih.__esModule?ih:{default:ih};Px.default=function(a){Array.isArray(a)?a=rba.from(a):"string"===typeof a&&(a=rba.from(a,"utf8"));return zua.default.createHash("sha1").update(a).digest()};var BN={};Object.defineProperty(BN,"__esModule",{value:!0});BN.default=void 0;var Aua=jo&&jo.__esModule?jo:{default:jo},Bua=Px&&Px.__esModule?Px:{default:Px},Cua=(0,Aua.default)("v5",80,Bua.default);BN.default=Cua;
var Qx={};Object.defineProperty(Qx,"__esModule",{value:!0});Object.defineProperty(Qx,"v1",{enumerable:!0,get:function(){return Dua.default}});Object.defineProperty(Qx,"v3",{enumerable:!0,get:function(){return Eua.default}});Object.defineProperty(Qx,"v4",{enumerable:!0,get:function(){return Fua.default}});Object.defineProperty(Qx,"v5",{enumerable:!0,get:function(){return Gua.default}});var Dua=GJ(yN),Eua=GJ(zN),Fua=GJ(AN),Gua=GJ(BN),Tm={};Object.defineProperty(Tm,"__esModule",{value:!0});Tm.atob=function(a){return sba(a)};
Tm.btoa=function(a){return tba(a)};Tm.base64StringToBlobOrBuffer=function(a,d){return I5(sba(a),d)};Tm.binaryStringToArrayBuffer=H5;Tm.binaryStringToBlobOrBuffer=I5;Tm.blob=G5;Tm.blobOrBufferToBase64=function(a,d){K5(a,function(k){d(tba(k))})};Tm.blobOrBufferToBinaryString=K5;Tm.readAsArrayBuffer=function(a,d){var k=new FileReader;k.onloadend=function(b){b=b.target.result||new ArrayBuffer(0);d(b)};k.readAsArrayBuffer(a)};Tm.readAsBinaryString=J5;Tm.typedBuffer=function(){};var sba=Tm.atob,tba=Tm.btoa,
Lh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Hua={},tF=Hua=function(a){function d(E,G){var J=E[0],K=E[1],T=E[2],P=E[3];J+=(K&T|~K&P)+G[0]-680876936|0;J=(J<<7|J>>>25)+K|0;P+=(J&K|~J&T)+G[1]-389564586|0;P=(P<<12|P>>>20)+J|0;T+=(P&J|~P&K)+G[2]+606105819|0;T=(T<<17|T>>>15)+P|0;K+=(T&P|~T&J)+G[3]-1044525330|0;K=(K<<22|K>>>10)+T|0;J+=(K&T|~K&P)+G[4]-176418897|0;J=(J<<7|J>>>25)+K|0;P+=(J&K|~J&T)+G[5]+1200080426|0;P=(P<<12|P>>>20)+J|0;T+=(P&J|~P&K)+G[6]-1473231341|0;
T=(T<<17|T>>>15)+P|0;K+=(T&P|~T&J)+G[7]-45705983|0;K=(K<<22|K>>>10)+T|0;J+=(K&T|~K&P)+G[8]+1770035416|0;J=(J<<7|J>>>25)+K|0;P+=(J&K|~J&T)+G[9]-1958414417|0;P=(P<<12|P>>>20)+J|0;T+=(P&J|~P&K)+G[10]-42063|0;T=(T<<17|T>>>15)+P|0;K+=(T&P|~T&J)+G[11]-1990404162|0;K=(K<<22|K>>>10)+T|0;J+=(K&T|~K&P)+G[12]+1804603682|0;J=(J<<7|J>>>25)+K|0;P+=(J&K|~J&T)+G[13]-40341101|0;P=(P<<12|P>>>20)+J|0;T+=(P&J|~P&K)+G[14]-1502002290|0;T=(T<<17|T>>>15)+P|0;K+=(T&P|~T&J)+G[15]+1236535329|0;K=(K<<22|K>>>10)+T|0;J+=(K&P|
T&~P)+G[1]-165796510|0;J=(J<<5|J>>>27)+K|0;P+=(J&T|K&~T)+G[6]-1069501632|0;P=(P<<9|P>>>23)+J|0;T+=(P&K|J&~K)+G[11]+643717713|0;T=(T<<14|T>>>18)+P|0;K+=(T&J|P&~J)+G[0]-373897302|0;K=(K<<20|K>>>12)+T|0;J+=(K&P|T&~P)+G[5]-701558691|0;J=(J<<5|J>>>27)+K|0;P+=(J&T|K&~T)+G[10]+38016083|0;P=(P<<9|P>>>23)+J|0;T+=(P&K|J&~K)+G[15]-660478335|0;T=(T<<14|T>>>18)+P|0;K+=(T&J|P&~J)+G[4]-405537848|0;K=(K<<20|K>>>12)+T|0;J+=(K&P|T&~P)+G[9]+568446438|0;J=(J<<5|J>>>27)+K|0;P+=(J&T|K&~T)+G[14]-1019803690|0;P=(P<<9|P>>>
23)+J|0;T+=(P&K|J&~K)+G[3]-187363961|0;T=(T<<14|T>>>18)+P|0;K+=(T&J|P&~J)+G[8]+1163531501|0;K=(K<<20|K>>>12)+T|0;J+=(K&P|T&~P)+G[13]-1444681467|0;J=(J<<5|J>>>27)+K|0;P+=(J&T|K&~T)+G[2]-51403784|0;P=(P<<9|P>>>23)+J|0;T+=(P&K|J&~K)+G[7]+1735328473|0;T=(T<<14|T>>>18)+P|0;K+=(T&J|P&~J)+G[12]-1926607734|0;K=(K<<20|K>>>12)+T|0;J+=(K^T^P)+G[5]-378558|0;J=(J<<4|J>>>28)+K|0;P+=(J^K^T)+G[8]-2022574463|0;P=(P<<11|P>>>21)+J|0;T+=(P^J^K)+G[11]+1839030562|0;T=(T<<16|T>>>16)+P|0;K+=(T^P^J)+G[14]-35309556|0;K=(K<<
23|K>>>9)+T|0;J+=(K^T^P)+G[1]-1530992060|0;J=(J<<4|J>>>28)+K|0;P+=(J^K^T)+G[4]+1272893353|0;P=(P<<11|P>>>21)+J|0;T+=(P^J^K)+G[7]-155497632|0;T=(T<<16|T>>>16)+P|0;K+=(T^P^J)+G[10]-1094730640|0;K=(K<<23|K>>>9)+T|0;J+=(K^T^P)+G[13]+681279174|0;J=(J<<4|J>>>28)+K|0;P+=(J^K^T)+G[0]-358537222|0;P=(P<<11|P>>>21)+J|0;T+=(P^J^K)+G[3]-722521979|0;T=(T<<16|T>>>16)+P|0;K+=(T^P^J)+G[6]+76029189|0;K=(K<<23|K>>>9)+T|0;J+=(K^T^P)+G[9]-640364487|0;J=(J<<4|J>>>28)+K|0;P+=(J^K^T)+G[12]-421815835|0;P=(P<<11|P>>>21)+J|
0;T+=(P^J^K)+G[15]+530742520|0;T=(T<<16|T>>>16)+P|0;K+=(T^P^J)+G[2]-995338651|0;K=(K<<23|K>>>9)+T|0;J+=(T^(K|~P))+G[0]-198630844|0;J=(J<<6|J>>>26)+K|0;P+=(K^(J|~T))+G[7]+1126891415|0;P=(P<<10|P>>>22)+J|0;T+=(J^(P|~K))+G[14]-1416354905|0;T=(T<<15|T>>>17)+P|0;K+=(P^(T|~J))+G[5]-57434055|0;K=(K<<21|K>>>11)+T|0;J+=(T^(K|~P))+G[12]+1700485571|0;J=(J<<6|J>>>26)+K|0;P+=(K^(J|~T))+G[3]-1894986606|0;P=(P<<10|P>>>22)+J|0;T+=(J^(P|~K))+G[10]-1051523|0;T=(T<<15|T>>>17)+P|0;K+=(P^(T|~J))+G[1]-2054922799|0;K=(K<<
21|K>>>11)+T|0;J+=(T^(K|~P))+G[8]+1873313359|0;J=(J<<6|J>>>26)+K|0;P+=(K^(J|~T))+G[15]-30611744|0;P=(P<<10|P>>>22)+J|0;T+=(J^(P|~K))+G[6]-1560198380|0;T=(T<<15|T>>>17)+P|0;K+=(P^(T|~J))+G[13]+1309151649|0;K=(K<<21|K>>>11)+T|0;J+=(T^(K|~P))+G[4]-145523070|0;J=(J<<6|J>>>26)+K|0;P+=(K^(J|~T))+G[11]-1120210379|0;P=(P<<10|P>>>22)+J|0;T+=(J^(P|~K))+G[2]+718787259|0;T=(T<<15|T>>>17)+P|0;K+=(P^(T|~J))+G[9]-343485551|0;E[0]=J+E[0]|0;E[1]=((K<<21|K>>>11)+T|0)+E[1]|0;E[2]=T+E[2]|0;E[3]=P+E[3]|0}function k(E){var G=
[],J;for(J=0;64>J;J+=4)G[J>>2]=E.charCodeAt(J)+(E.charCodeAt(J+1)<<8)+(E.charCodeAt(J+2)<<16)+(E.charCodeAt(J+3)<<24);return G}function b(E){var G=[],J;for(J=0;64>J;J+=4)G[J>>2]=E[J]+(E[J+1]<<8)+(E[J+2]<<16)+(E[J+3]<<24);return G}function e(E){var G=E.length,J=[1732584193,-271733879,-1732584194,271733878],K;for(K=64;K<=G;K+=64)d(J,k(E.substring(K-64,K)));E=E.substring(K-64);var T=E.length;var P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(K=0;K<T;K+=1)P[K>>2]|=E.charCodeAt(K)<<(K%4<<3);P[K>>2]|=128<<(K%
4<<3);if(55<K)for(d(J,P),K=0;16>K;K+=1)P[K]=0;G=(8*G).toString(16).match(/(.*?)(.{0,8})$/);E=parseInt(G[2],16);G=parseInt(G[1],16)||0;P[14]=E;P[15]=G;d(J,P);return J}function l(E){var G;for(G=0;G<E.length;G+=1){var J=G,K,T=E[G],P="";for(K=0;4>K;K+=1)P+=z[T>>8*K+4&15]+z[T>>8*K&15];E[J]=P}return E.join("")}function p(E){/[\u0080-\uFFFF]/.test(E)&&(E=unescape(encodeURIComponent(E)));return E}function u(E){var G=[],J=E.length,K;for(K=0;K<J-1;K+=2)G.push(parseInt(E.substr(K,2),16));return String.fromCharCode.apply(String,
G)}function x(){this.reset()}var z="0123456789abcdef".split("");l(e("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function E(G,J){G=G|0||0;return 0>G?Math.max(G+J,0):Math.min(G,J)}ArrayBuffer.prototype.slice=function(G,J){var K=(this||Lh).byteLength;G=E(G,K);var T=K;J!==a&&(T=E(J,K));if(G>T)return new ArrayBuffer(0);T-=G;J=new ArrayBuffer(T);K=new Uint8Array(J);G=new Uint8Array(this||Lh,G,T);K.set(G);return J}}();x.prototype.append=function(E){this.appendBinary(p(E));
return this||Lh};x.prototype.appendBinary=function(E){(this||Lh)._buff+=E;(this||Lh)._length+=E.length;E=(this||Lh)._buff.length;var G;for(G=64;G<=E;G+=64)d((this||Lh)._hash,k((this||Lh)._buff.substring(G-64,G)));(this||Lh)._buff=(this||Lh)._buff.substring(G-64);return this||Lh};x.prototype.end=function(E){var G=(this||Lh)._buff,J=G.length,K,T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(K=0;K<J;K+=1)T[K>>2]|=G.charCodeAt(K)<<(K%4<<3);this._finish(T,J);G=l((this||Lh)._hash);E&&(G=u(G));this.reset();return G};
x.prototype.reset=function(){(this||Lh)._buff="";(this||Lh)._length=0;(this||Lh)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Lh};x.prototype.getState=function(){return{buff:(this||Lh)._buff,length:(this||Lh)._length,hash:(this||Lh)._hash.slice()}};x.prototype.setState=function(E){(this||Lh)._buff=E.buff;(this||Lh)._length=E.length;(this||Lh)._hash=E.hash;return this||Lh};x.prototype.destroy=function(){delete (this||Lh)._hash;delete (this||Lh)._buff;delete (this||Lh)._length};
x.prototype._finish=function(E,G){E[G>>2]|=128<<(G%4<<3);if(55<G)for(d((this||Lh)._hash,E),G=0;16>G;G+=1)E[G]=0;var J=8*(this||Lh)._length;J=J.toString(16).match(/(.*?)(.{0,8})$/);G=parseInt(J[2],16);J=parseInt(J[1],16)||0;E[14]=G;E[15]=J;d((this||Lh)._hash,E)};x.hash=function(E,G){return x.hashBinary(p(E),G)};x.hashBinary=function(E,G){E=e(E);E=l(E);return G?u(E):E};x.ArrayBuffer=function(){this.reset()};x.ArrayBuffer.prototype.append=function(E){var G=(this||Lh)._buff.buffer,J=new Uint8Array(G.byteLength+
E.byteLength);J.set(new Uint8Array(G));J.set(new Uint8Array(E),G.byteLength);G=J.length;(this||Lh)._length+=E.byteLength;for(E=64;E<=G;E+=64)d((this||Lh)._hash,b(J.subarray(E-64,E)));(this||Lh)._buff=E-64<G?new Uint8Array(J.buffer.slice(E-64)):new Uint8Array(0);return this||Lh};x.ArrayBuffer.prototype.end=function(E){var G=(this||Lh)._buff,J=G.length,K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T;for(T=0;T<J;T+=1)K[T>>2]|=G[T]<<(T%4<<3);this._finish(K,J);G=l((this||Lh)._hash);E&&(G=u(G));this.reset();return G};
x.ArrayBuffer.prototype.reset=function(){(this||Lh)._buff=new Uint8Array(0);(this||Lh)._length=0;(this||Lh)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Lh};x.ArrayBuffer.prototype.getState=function(){var E=x.prototype.getState.call(this||Lh);E.buff=String.fromCharCode.apply(null,new Uint8Array(E.buff));return E};x.ArrayBuffer.prototype.setState=function(E){var G=E.buff,J=G.length,K=new ArrayBuffer(J);K=new Uint8Array(K);var T;for(T=0;T<J;T+=1)K[T]=G.charCodeAt(T);E.buff=K;return x.prototype.setState.call(this||
Lh,E)};x.ArrayBuffer.prototype.destroy=x.prototype.destroy;x.ArrayBuffer.prototype._finish=x.prototype._finish;x.ArrayBuffer.hash=function(E,G){var J=new Uint8Array(E),K=J.length;E=[1732584193,-271733879,-1732584194,271733878];var T;for(T=64;T<=K;T+=64)d(E,b(J.subarray(T-64,T)));J=T-64<K?J.subarray(T-64):new Uint8Array(0);var P=J.length;var da=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(T=0;T<P;T+=1)da[T>>2]|=J[T]<<(T%4<<3);da[T>>2]|=128<<(T%4<<3);if(55<T)for(d(E,da),T=0;16>T;T+=1)da[T]=0;K=(8*K).toString(16).match(/(.*?)(.{0,8})$/);
J=parseInt(K[2],16);K=parseInt(K[1],16)||0;da[14]=J;da[15]=K;d(E,da);E=l(E);return G?u(E):E};return x}(),eB={};Object.defineProperty(eB,"__esModule",{value:!0});var L5=Tm,nX=tF&&"object"===typeof tF&&"default"in tF?tF["default"]:tF,Iua=self.setImmediate||self.setTimeout;eB.binaryMd5=function(a,d){function k(){Iua(e)}function b(){var J=E.end(!0);J=L5.btoa(J);d(J);E.destroy()}function e(){var J=z*u,K=J+u;z++;z<x?G(E,a,J,K,k):G(E,a,J,K,b)}var l="string"===typeof a,p=l?a.length:a.size,u=Math.min(32768,
p),x=Math.ceil(p/u),z=0,E=l?new nX:new nX.ArrayBuffer,G=l?Zka:Yka;e()};eB.stringMd5=function(a){return nX.hash(a)};var nh={};Object.defineProperty(nh,"__esModule",{value:!0});var eT=HJ(zW),Jua=HJ(Gk),uba=HJ(qj),JJ=HJ(lr),M5=Function.prototype.toString,$ka=M5.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var IJ=!!localStorage.getItem("_pouch_check_localstorage")}catch(a){IJ=!1}Jua(hA,JJ);hA.prototype.addListener=function(a,d,k,b){function e(){if(l._listeners[d])if(p)p="waiting";
else{p=!0;var u=fT(b,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));k.changes(u).on("change",function(x){x.seq>b.since&&!b.cancelled&&(b.since=x.seq,b.onChange(x))}).on("complete",function(){"waiting"===p&&uba(e);p=!1}).on("error",function(){p=!1})}}if(!this._listeners[d]){var l=this,p=!1;this._listeners[d]=e;this.on(a,e)}};hA.prototype.removeListener=function(a,d){d in this._listeners&&(JJ.prototype.removeListener.call(this,a,this._listeners[d]),
delete this._listeners[d])};hA.prototype.notifyLocalWindows=function(a){IJ&&(localStorage[a]="a"===localStorage[a]?"b":"a")};hA.prototype.notify=function(a){this.emit(a);this.notifyLocalWindows(a)};var Kua="function"===typeof Object.assign?Object.assign:function(a){for(var d=Object(a),k=1;k<arguments.length;k++){var b=arguments[k];if(null!=b)for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(d[e]=b[e])}return d},Lua=function(){}.name?function(a){return a.name}:function(a){return(a=a.toString().match(/^\s*function\s*(?:(\S+)\s*)?\(/))&&
a[1]?a[1]:""},vba="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Mua=/(?:^|&)([^&=]*)=?([^&]*)/g,Nua=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Oua=Qx.v4;nh.adapterFun=function(a,d){return O5(eT(function(k){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));
var b=this;ala(b,a,k);return this.taskqueue.isReady?d.apply(this,k):new Promise(function(e,l){b.taskqueue.addTask(function(p){p?l(p):e(b[a].apply(b,k))})})}))};nh.assign=Kua;nh.bulkGetShim=function(a,d,k){function b(){var K=[];E.forEach(function(T){T.docs.forEach(function(P){K.push({id:T.id,docs:[P]})})});k(null,{results:K})}function e(){if(!(J>=G.length)){var K=G.slice(J,Math.min(J+6,G.length));l(K,J);J+=K.length}}function l(K,T){K.forEach(function(P,da){var fa=T+da;da=u.get(P);var ka=fT(da[0],["atts_since",
"attachments"]);ka.open_revs=da.map(function(Ia){return Ia.rev});ka.open_revs=ka.open_revs.filter(P5);var za=P5;0===ka.open_revs.length&&(delete ka.open_revs,za=bla);["revs","attachments","binary","ajax","latest"].forEach(function(Ia){Ia in d&&(ka[Ia]=d[Ia])});a.get(P,ka,function(Ia,N){Ia=Ia?[{error:Ia}]:za(N);E[fa]={id:P,docs:Ia};++z===x&&b();e()})})}var p=d.docs,u=new Nu.Map;p.forEach(function(K){u.has(K.id)?u.get(K.id).push(K):u.set(K.id,[K])});var x=u.size,z=0,E=Array(x),G=[];u.forEach(function(K,
T){G.push(T)});var J=0;e()};nh.changesHandler=hA;nh.clone=GD;nh.defaultBackOff=function(a){var d=0;a||(d=2E3);a=parseInt(a,10)||0;d=parseInt(d,10);d=d!==d||d<=a?(a||1)<<1:d+1;6E5<d&&(a=3E5,d=6E5);return~~((d-a)*Math.random()+a)};nh.explainError=function(a,d){gT("info","The above "+a+" is totally normal. "+d)};nh.filterChange=function(a){var d={},k=a.filter&&"function"===typeof a.filter;d.query=a.query_params;return function(b){b.doc||(b.doc={});var e;if(e=k)try{e=!(0,a.filter)(b.doc,d)}catch(p){e=
Dg.createError(Dg.BAD_REQUEST,"Filter function threw: "+p.toString())}if("object"===typeof e)return e;if(e)return!1;if(!a.include_docs)delete b.doc;else if(!a.attachments)for(var l in b.doc._attachments)b.doc._attachments.hasOwnProperty(l)&&(b.doc._attachments[l].stub=!0);return!0}};nh.flatten=function(a){for(var d=[],k=0,b=a.length;k<b;k++)d=d.concat(a[k]);return d};nh.functionName=Lua;nh.guardedConsole=gT;nh.hasLocalStorage=function(){return IJ};nh.invalidIdError=function(a){var d;a?"string"!==
typeof a?d=Dg.createError(Dg.INVALID_ID):/^_/.test(a)&&!/^_(design|local)/.test(a)&&(d=Dg.createError(Dg.RESERVED_ID)):d=Dg.createError(Dg.MISSING_ID);if(d)throw d;};nh.isRemote=function(a){return"boolean"===typeof a._remote?a._remote:"function"===typeof a.type?(gT("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===a.type()):!1};nh.listenerCount=function(a,d){return"listenerCount"in a?a.listenerCount(d):JJ.listenerCount(a,d)};nh.nextTick=uba;nh.normalizeDdocFunctionName=
function(a){return(a=Q5(a))?a.join("/"):null};nh.once=N5;nh.parseDdocFunctionName=Q5;nh.parseUri=function(a){a=Nua.exec(a);for(var d={},k=14;k--;){var b=vba[k],e=a[k]||"",l=-1!==["user","password"].indexOf(b);d[b]=l?decodeURIComponent(e):e}d.queryKey={};d[vba[12]].replace(Mua,function(p,u,x){u&&(d.queryKey[u]=x)});return d};nh.pick=fT;nh.rev=function(a,d){a=GD(a);if(!d)return Qx.v4().replace(/-/g,"").toLowerCase();delete a._rev_tree;return eB.stringMd5(JSON.stringify(a))};nh.scopeEval=function(a,
d){var k=[],b=[],e;for(e in d)d.hasOwnProperty(e)&&(k.push(e),b.push(d[e]));k.push(a);return Function.apply(null,k).apply(null,b)};nh.toPromise=O5;nh.upsert=R5;nh.uuid=Oua;var wba={};wba=function(){for(var a={},d=0;d<arguments.length;d++){var k=arguments[d],b;for(b in k)Pua.call(k,b)&&(a[b]=k[b])}return a};var Pua=Object.prototype.hasOwnProperty,Uu=wba,xba={};xba=function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],b;for(b in k)Qua.call(k,b)&&(a[b]=k[b])}return a};for(var Qua=Object.prototype.hasOwnProperty,
Rua={},Sua=xba,yba=Rua=function(){var a=Uu.apply(null,arguments);return Sua(a,{bufferKeys:a.bufferKeys||!1,snapshots:a.snapshots||!1,permanence:a.permanence||!1,seek:a.seek||!1,clear:a.clear||!1,status:a.status||!1,createIfMissing:a.createIfMissing||!1,errorIfExists:a.errorIfExists||!1,deferredOpen:a.deferredOpen||!1,openCallback:a.openCallback||!1,promises:a.promises||!1,streams:a.streams||!1,encodings:a.encodings||!1,additionalMethods:Uu(a.additionalMethods)})},sr=[],Jp=[],Tua="undefined"!==typeof Uint8Array?
Uint8Array:Array,fB=0;64>fB;++fB)sr[fB]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[fB],Jp["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(fB)]=fB;Jp[45]=62;Jp[95]=63;var KJ={byteLength:function(a){a=S5(a);var d=a[1];return 3*(a[0]+d)/4-d},toByteArray:function(a){var d=S5(a);var k=d[0];d=d[1];var b=new Tua(3*(k+d)/4-d),e=0,l=0<d?k-4:k,p;for(p=0;p<l;p+=4)k=Jp[a.charCodeAt(p)]<<18|Jp[a.charCodeAt(p+1)]<<12|Jp[a.charCodeAt(p+2)]<<6|Jp[a.charCodeAt(p+
3)],b[e++]=k>>16&255,b[e++]=k>>8&255,b[e++]=k&255;2===d&&(k=Jp[a.charCodeAt(p)]<<2|Jp[a.charCodeAt(p+1)]>>4,b[e++]=k&255);1===d&&(k=Jp[a.charCodeAt(p)]<<10|Jp[a.charCodeAt(p+1)]<<4|Jp[a.charCodeAt(p+2)]>>2,b[e++]=k>>8&255,b[e++]=k&255);return b},fromByteArray:function(a){for(var d=a.length,k=d%3,b=[],e=0,l=d-k;e<l;e+=16383)b.push(ela(a,e,e+16383>l?l:e+16383));1===k?(a=a[d-1],b.push(sr[a>>2]+sr[a<<4&63]+"==")):2===k&&(a=(a[d-2]<<8)+a[d-1],b.push(sr[a>>10]+sr[a>>4&63]+sr[a<<2&63]+"="));return b.join("")}},
iA={read:function(a,d,k,b,e){var l=8*e-b-1;var p=(1<<l)-1,u=p>>1,x=-7;e=k?e-1:0;var z=k?-1:1,E=a[d+e];e+=z;k=E&(1<<-x)-1;E>>=-x;for(x+=l;0<x;k=256*k+a[d+e],e+=z,x-=8);l=k&(1<<-x)-1;k>>=-x;for(x+=b;0<x;l=256*l+a[d+e],e+=z,x-=8);if(0===k)k=1-u;else{if(k===p)return l?NaN:Infinity*(E?-1:1);l+=Math.pow(2,b);k-=u}return(E?-1:1)*l*Math.pow(2,k-b)},write:function(a,d,k,b,e,l){var p,u=8*l-e-1,x=(1<<u)-1,z=x>>1,E=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;l=b?0:l-1;var G=b?1:-1,J=0>d||0===d&&0>1/d?1:0;d=Math.abs(d);
isNaN(d)||Infinity===d?(d=isNaN(d)?1:0,b=x):(b=Math.floor(Math.log(d)/Math.LN2),1>d*(p=Math.pow(2,-b))&&(b--,p*=2),d=1<=b+z?d+E/p:d+E*Math.pow(2,1-z),2<=d*p&&(b++,p/=2),b+z>=x?(d=0,b=x):1<=b+z?(d=(d*p-1)*Math.pow(2,e),b+=z):(d=d*Math.pow(2,z-1)*Math.pow(2,e),b=0));for(;8<=e;a[k+l]=d&255,l+=G,d/=256,e-=8);b=b<<e|d;for(u+=e;0<u;a[k+l]=b&255,l+=G,b/=256,u-=8);a[k+l-G]|=128*J}},zba="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;var Aba=De;
var hT=2147483647;De.TYPED_ARRAY_SUPPORT=function(){try{var a=new Uint8Array(1),d={foo:function(){return 42}};Object.setPrototypeOf(d,Uint8Array.prototype);Object.setPrototypeOf(a,d);return 42===a.foo()}catch(k){return!1}}();De.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(De.prototype,
"parent",{enumerable:!0,get:function(){if(De.isBuffer(this))return this.buffer}});Object.defineProperty(De.prototype,"offset",{enumerable:!0,get:function(){if(De.isBuffer(this))return this.byteOffset}});De.poolSize=8192;De.from=function(a,d,k){return T5(a,d,k)};Object.setPrototypeOf(De.prototype,Uint8Array.prototype);Object.setPrototypeOf(De,Uint8Array);De.alloc=function(a,d,k){W5(a);a=0>=a?Ks(a):void 0!==d?"string"===typeof k?Ks(a).fill(d,k):Ks(a).fill(d):Ks(a);return a};De.allocUnsafe=function(a){return iT(a)};
De.allocUnsafeSlow=function(a){return iT(a)};De.isBuffer=function(a){return null!=a&&!0===a._isBuffer&&a!==De.prototype};De.compare=function(a,d){tr(a,Uint8Array)&&(a=De.from(a,a.offset,a.byteLength));tr(d,Uint8Array)&&(d=De.from(d,d.offset,d.byteLength));if(!De.isBuffer(a)||!De.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===d)return 0;for(var k=a.length,b=d.length,e=0,l=Math.min(k,b);e<l;++e)if(a[e]!==d[e]){k=a[e];b=d[e];break}return k<
b?-1:b<k?1:0};De.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};De.concat=function(a,d){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return De.alloc(0);var k;if(void 0===d)for(k=d=0;k<a.length;++k)d+=a[k].length;d=De.allocUnsafe(d);var b=0;for(k=0;k<a.length;++k){var e=
a[k];if(tr(e,Uint8Array))b+e.length>d.length?De.from(e).copy(d,b):Uint8Array.prototype.set.call(d,e,b);else if(De.isBuffer(e))e.copy(d,b);else throw new TypeError('"list" argument must be an Array of Buffers');b+=e.length}return d};De.byteLength=U5;De.prototype._isBuffer=!0;De.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<a;d+=2)Ww(this,d,d+1);return this};De.prototype.swap32=function(){var a=this.length;if(0!==
a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var d=0;d<a;d+=4)Ww(this,d,d+3),Ww(this,d+1,d+2);return this};De.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var d=0;d<a;d+=8)Ww(this,d,d+7),Ww(this,d+1,d+6),Ww(this,d+2,d+5),Ww(this,d+3,d+4);return this};De.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?Y5(this,0,a):gla.apply(this,arguments)};De.prototype.toLocaleString=
De.prototype.toString;De.prototype.equals=function(a){if(!De.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===De.compare(this,a)};De.prototype.inspect=function(){var a=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim();50<this.length&&(a+=" ... ");return"<Buffer "+a+">"};zba&&(De.prototype[zba]=De.prototype.inspect);De.prototype.compare=function(a,d,k,b,e){tr(a,Uint8Array)&&(a=De.from(a,a.offset,a.byteLength));if(!De.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof a);void 0===d&&(d=0);void 0===k&&(k=a?a.length:0);void 0===b&&(b=0);void 0===e&&(e=this.length);if(0>d||k>a.length||0>b||e>this.length)throw new RangeError("out of range index");if(b>=e&&d>=k)return 0;if(b>=e)return-1;if(d>=k)return 1;d>>>=0;k>>>=0;b>>>=0;e>>>=0;if(this===a)return 0;var l=e-b,p=k-d,u=Math.min(l,p);b=this.slice(b,e);a=a.slice(d,k);for(d=0;d<u;++d)if(b[d]!==a[d]){l=b[d];p=a[d];break}return l<p?-1:p<l?1:0};De.prototype.includes=function(a,d,k){return-1!==this.indexOf(a,d,k)};
De.prototype.indexOf=function(a,d,k){return Z5(this,a,d,k,!0)};De.prototype.lastIndexOf=function(a,d,k){return Z5(this,a,d,k,!1)};De.prototype.write=function(a,d,k,b){if(void 0===d)b="utf8",k=this.length,d=0;else if(void 0===k&&"string"===typeof d)b=d,k=this.length,d=0;else if(isFinite(d))d>>>=0,isFinite(k)?(k>>>=0,void 0===b&&(b="utf8")):(b=k,k=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-d;if(void 0===k||k>e)k=e;if(0<a.length&&
(0>k||0>d)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");b||(b="utf8");for(e=!1;;)switch(b){case "hex":a:{d=Number(d)||0;b=this.length-d;k?(k=Number(k),k>b&&(k=b)):k=b;b=a.length;k>b/2&&(k=b/2);for(b=0;b<k;++b){e=parseInt(a.substr(2*b,2),16);if(e!==e){a=b;break a}this[d+b]=e}a=b}return a;case "utf8":case "utf-8":return LJ(lT(a,this.length-d),this,d,k);case "ascii":case "latin1":case "binary":b=[];for(e=0;e<a.length;++e)b.push(a.charCodeAt(e)&255);return LJ(b,this,d,
k);case "base64":return LJ(KJ.toByteArray(X5(a)),this,d,k);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=a;e=this.length-d;for(var l=[],p=0;p<b.length&&!(0>(e-=2));++p){var u=b.charCodeAt(p);a=u>>8;u%=256;l.push(u);l.push(a)}return LJ(l,this,d,k);default:if(e)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase();e=!0}};De.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var a6=4096;De.prototype.slice=function(a,d){var k=
this.length;a=~~a;d=void 0===d?k:~~d;0>a?(a+=k,0>a&&(a=0)):a>k&&(a=k);0>d?(d+=k,0>d&&(d=0)):d>k&&(d=k);d<a&&(d=a);a=this.subarray(a,d);Object.setPrototypeOf(a,De.prototype);return a};De.prototype.readUintLE=De.prototype.readUIntLE=function(a,d,k){a>>>=0;d>>>=0;k||qm(a,d,this.length);k=this[a];for(var b=1,e=0;++e<d&&(b*=256);)k+=this[a+e]*b;return k};De.prototype.readUintBE=De.prototype.readUIntBE=function(a,d,k){a>>>=0;d>>>=0;k||qm(a,d,this.length);k=this[a+--d];for(var b=1;0<d&&(b*=256);)k+=this[a+
--d]*b;return k};De.prototype.readUint8=De.prototype.readUInt8=function(a,d){a>>>=0;d||qm(a,1,this.length);return this[a]};De.prototype.readUint16LE=De.prototype.readUInt16LE=function(a,d){a>>>=0;d||qm(a,2,this.length);return this[a]|this[a+1]<<8};De.prototype.readUint16BE=De.prototype.readUInt16BE=function(a,d){a>>>=0;d||qm(a,2,this.length);return this[a]<<8|this[a+1]};De.prototype.readUint32LE=De.prototype.readUInt32LE=function(a,d){a>>>=0;d||qm(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+
2]<<16)+16777216*this[a+3]};De.prototype.readUint32BE=De.prototype.readUInt32BE=function(a,d){a>>>=0;d||qm(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};De.prototype.readIntLE=function(a,d,k){a>>>=0;d>>>=0;k||qm(a,d,this.length);k=this[a];for(var b=1,e=0;++e<d&&(b*=256);)k+=this[a+e]*b;k>=128*b&&(k-=Math.pow(2,8*d));return k};De.prototype.readIntBE=function(a,d,k){a>>>=0;d>>>=0;k||qm(a,d,this.length);k=d;for(var b=1,e=this[a+--k];0<k&&(b*=256);)e+=this[a+--k]*b;
e>=128*b&&(e-=Math.pow(2,8*d));return e};De.prototype.readInt8=function(a,d){a>>>=0;d||qm(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};De.prototype.readInt16LE=function(a,d){a>>>=0;d||qm(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};De.prototype.readInt16BE=function(a,d){a>>>=0;d||qm(a,2,this.length);a=this[a+1]|this[a]<<8;return a&32768?a|4294901760:a};De.prototype.readInt32LE=function(a,d){a>>>=0;d||qm(a,4,this.length);return this[a]|this[a+1]<<8|this[a+
2]<<16|this[a+3]<<24};De.prototype.readInt32BE=function(a,d){a>>>=0;d||qm(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};De.prototype.readFloatLE=function(a,d){a>>>=0;d||qm(a,4,this.length);return iA.read(this,a,!0,23,4)};De.prototype.readFloatBE=function(a,d){a>>>=0;d||qm(a,4,this.length);return iA.read(this,a,!1,23,4)};De.prototype.readDoubleLE=function(a,d){a>>>=0;d||qm(a,8,this.length);return iA.read(this,a,!0,52,8)};De.prototype.readDoubleBE=function(a,d){a>>>=0;d||
qm(a,8,this.length);return iA.read(this,a,!1,52,8)};De.prototype.writeUintLE=De.prototype.writeUIntLE=function(a,d,k,b){a=+a;d>>>=0;k>>>=0;b||bo(this,a,d,k,Math.pow(2,8*k)-1,0);b=1;var e=0;for(this[d]=a&255;++e<k&&(b*=256);)this[d+e]=a/b&255;return d+k};De.prototype.writeUintBE=De.prototype.writeUIntBE=function(a,d,k,b){a=+a;d>>>=0;k>>>=0;b||bo(this,a,d,k,Math.pow(2,8*k)-1,0);b=k-1;var e=1;for(this[d+b]=a&255;0<=--b&&(e*=256);)this[d+b]=a/e&255;return d+k};De.prototype.writeUint8=De.prototype.writeUInt8=
function(a,d,k){a=+a;d>>>=0;k||bo(this,a,d,1,255,0);this[d]=a&255;return d+1};De.prototype.writeUint16LE=De.prototype.writeUInt16LE=function(a,d,k){a=+a;d>>>=0;k||bo(this,a,d,2,65535,0);this[d]=a&255;this[d+1]=a>>>8;return d+2};De.prototype.writeUint16BE=De.prototype.writeUInt16BE=function(a,d,k){a=+a;d>>>=0;k||bo(this,a,d,2,65535,0);this[d]=a>>>8;this[d+1]=a&255;return d+2};De.prototype.writeUint32LE=De.prototype.writeUInt32LE=function(a,d,k){a=+a;d>>>=0;k||bo(this,a,d,4,4294967295,0);this[d+3]=
a>>>24;this[d+2]=a>>>16;this[d+1]=a>>>8;this[d]=a&255;return d+4};De.prototype.writeUint32BE=De.prototype.writeUInt32BE=function(a,d,k){a=+a;d>>>=0;k||bo(this,a,d,4,4294967295,0);this[d]=a>>>24;this[d+1]=a>>>16;this[d+2]=a>>>8;this[d+3]=a&255;return d+4};De.prototype.writeIntLE=function(a,d,k,b){a=+a;d>>>=0;b||(b=Math.pow(2,8*k-1),bo(this,a,d,k,b-1,-b));b=0;var e=1,l=0;for(this[d]=a&255;++b<k&&(e*=256);)0>a&&0===l&&0!==this[d+b-1]&&(l=1),this[d+b]=(a/e>>0)-l&255;return d+k};De.prototype.writeIntBE=
function(a,d,k,b){a=+a;d>>>=0;b||(b=Math.pow(2,8*k-1),bo(this,a,d,k,b-1,-b));b=k-1;var e=1,l=0;for(this[d+b]=a&255;0<=--b&&(e*=256);)0>a&&0===l&&0!==this[d+b+1]&&(l=1),this[d+b]=(a/e>>0)-l&255;return d+k};De.prototype.writeInt8=function(a,d,k){a=+a;d>>>=0;k||bo(this,a,d,1,127,-128);0>a&&(a=255+a+1);this[d]=a&255;return d+1};De.prototype.writeInt16LE=function(a,d,k){a=+a;d>>>=0;k||bo(this,a,d,2,32767,-32768);this[d]=a&255;this[d+1]=a>>>8;return d+2};De.prototype.writeInt16BE=function(a,d,k){a=+a;d>>>=
0;k||bo(this,a,d,2,32767,-32768);this[d]=a>>>8;this[d+1]=a&255;return d+2};De.prototype.writeInt32LE=function(a,d,k){a=+a;d>>>=0;k||bo(this,a,d,4,2147483647,-2147483648);this[d]=a&255;this[d+1]=a>>>8;this[d+2]=a>>>16;this[d+3]=a>>>24;return d+4};De.prototype.writeInt32BE=function(a,d,k){a=+a;d>>>=0;k||bo(this,a,d,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);this[d]=a>>>24;this[d+1]=a>>>16;this[d+2]=a>>>8;this[d+3]=a&255;return d+4};De.prototype.writeFloatLE=function(a,d,k){return c6(this,a,d,
!0,k)};De.prototype.writeFloatBE=function(a,d,k){return c6(this,a,d,!1,k)};De.prototype.writeDoubleLE=function(a,d,k){return d6(this,a,d,!0,k)};De.prototype.writeDoubleBE=function(a,d,k){return d6(this,a,d,!1,k)};De.prototype.copy=function(a,d,k,b){if(!De.isBuffer(a))throw new TypeError("argument should be a Buffer");k||(k=0);b||0===b||(b=this.length);d>=a.length&&(d=a.length);d||(d=0);0<b&&b<k&&(b=k);if(b===k||0===a.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");
if(0>k||k>=this.length)throw new RangeError("Index out of range");if(0>b)throw new RangeError("sourceEnd out of bounds");b>this.length&&(b=this.length);a.length-d<b-k&&(b=a.length-d+k);var e=b-k;this===a&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(d,k,b):Uint8Array.prototype.set.call(a,this.subarray(k,b),d);return e};De.prototype.fill=function(a,d,k,b){if("string"===typeof a){"string"===typeof d?(b=d,d=0,k=this.length):"string"===typeof k&&(b=k,k=this.length);if(void 0!==
b&&"string"!==typeof b)throw new TypeError("encoding must be a string");if("string"===typeof b&&!De.isEncoding(b))throw new TypeError("Unknown encoding: "+b);if(1===a.length){var e=a.charCodeAt(0);if("utf8"===b&&128>e||"latin1"===b)a=e}}else"number"===typeof a?a&=255:"boolean"===typeof a&&(a=Number(a));if(0>d||this.length<d||this.length<k)throw new RangeError("Out of range index");if(k<=d)return this;d>>>=0;k=void 0===k?this.length:k>>>0;a||(a=0);if("number"===typeof a)for(b=d;b<k;++b)this[b]=a;else{e=
De.isBuffer(a)?a:De.from(a,b);var l=e.length;if(0===l)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(b=0;b<k-d;++b)this[b+d]=e[b%l]}return this};var ila=/[^+/0-9A-Za-z-_]/g,hla=function(){for(var a=Array(256),d=0;16>d;++d)for(var k=16*d,b=0;16>b;++b)a[k+b]="0123456789abcdef"[d]+"0123456789abcdef"[b];return a}(),Ls="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Uua={};mu.prototype.next=function(a){var d=this||Ls;if("function"!==typeof a)throw Error("next() requires a callback argument");
if(d._ended)return qj(a,Error("cannot call next() after end()")),d;if(d._nexting)return qj(a,Error("cannot call next() before previous next() has completed")),d;d._nexting=!0;d._next(function(){d._nexting=!1;a.apply(null,arguments)});return d};mu.prototype._next=function(a){qj(a)};mu.prototype.seek=function(a){if((this||Ls)._ended)throw Error("cannot call seek() after end()");if((this||Ls)._nexting)throw Error("cannot call seek() before next() has completed");a=(this||Ls).db._serializeKey(a);this._seek(a)};
mu.prototype._seek=function(a){};mu.prototype.end=function(a){if("function"!==typeof a)throw Error("end() requires a callback argument");if((this||Ls)._ended)return qj(a,Error("end() already called on iterator"));(this||Ls)._ended=!0;this._end(a)};mu.prototype._end=function(a){qj(a)};mu.prototype._nextTick=qj;var Bba=Uua=mu,Sl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Vua={};jq.prototype._checkWritten=function(){if((this||Sl)._written)throw Error("write() already called on this batch");
};jq.prototype.put=function(a,d){this._checkWritten();var k=(this||Sl).db._checkKey(a)||(this||Sl).db._checkValue(d);if(k)throw k;a=(this||Sl).db._serializeKey(a);d=(this||Sl).db._serializeValue(d);this._put(a,d);return this||Sl};jq.prototype._put=function(a,d){(this||Sl)._operations.push({type:"put",key:a,value:d})};jq.prototype.del=function(a){this._checkWritten();var d=(this||Sl).db._checkKey(a);if(d)throw d;a=(this||Sl).db._serializeKey(a);this._del(a);return this||Sl};jq.prototype._del=function(a){(this||
Sl)._operations.push({type:"del",key:a})};jq.prototype.clear=function(){this._checkWritten();this._clear();return this||Sl};jq.prototype._clear=function(){(this||Sl)._operations=[]};jq.prototype.write=function(a,d){this._checkWritten();"function"===typeof a&&(d=a);if("function"!==typeof d)throw Error("write() requires a callback argument");if("object"!==typeof a||null===a)a={};(this||Sl)._written=!0;this._write(a,d)};jq.prototype._write=function(a,d){(this||Sl).db._batch((this||Sl)._operations,a,
d)};jq.prototype._nextTick=qj;var Wua=Vua=jq,Co="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Cba={},jla=yba,kla=Object.prototype.hasOwnProperty,lla="start end gt gte lt lte".split(" ");Mk.prototype.open=function(a,d){var k=this||Co,b=(this||Co).status;"function"===typeof a&&(d=a);if("function"!==typeof d)throw Error("open() requires a callback argument");if("object"!==typeof a||null===a)a={};a.createIfMissing=!1!==a.createIfMissing;a.errorIfExists=!!a.errorIfExists;
(this||Co).status="opening";this._open(a,function(e){if(e)return k.status=b,d(e);k.status="open";d()})};Mk.prototype._open=function(a,d){qj(d)};Mk.prototype.close=function(a){var d=this||Co,k=(this||Co).status;if("function"!==typeof a)throw Error("close() requires a callback argument");(this||Co).status="closing";this._close(function(b){if(b)return d.status=k,a(b);d.status="closed";a()})};Mk.prototype._close=function(a){qj(a)};Mk.prototype.get=function(a,d,k){"function"===typeof d&&(k=d);if("function"!==
typeof k)throw Error("get() requires a callback argument");var b=this._checkKey(a);if(b)return qj(k,b);a=this._serializeKey(a);if("object"!==typeof d||null===d)d={};d.asBuffer=!1!==d.asBuffer;this._get(a,d,k)};Mk.prototype._get=function(a,d,k){qj(function(){k(Error("NotFound"))})};Mk.prototype.put=function(a,d,k,b){"function"===typeof k&&(b=k);if("function"!==typeof b)throw Error("put() requires a callback argument");var e=this._checkKey(a)||this._checkValue(d);if(e)return qj(b,e);a=this._serializeKey(a);
d=this._serializeValue(d);if("object"!==typeof k||null===k)k={};this._put(a,d,k,b)};Mk.prototype._put=function(a,d,k,b){qj(b)};Mk.prototype.del=function(a,d,k){"function"===typeof d&&(k=d);if("function"!==typeof k)throw Error("del() requires a callback argument");var b=this._checkKey(a);if(b)return qj(k,b);a=this._serializeKey(a);if("object"!==typeof d||null===d)d={};this._del(a,d,k)};Mk.prototype._del=function(a,d,k){qj(k)};Mk.prototype.batch=function(a,d,k){if(!arguments.length)return this._chainedBatch();
"function"===typeof d&&(k=d);"function"===typeof a&&(k=a);if("function"!==typeof k)throw Error("batch(array) requires a callback argument");if(!Array.isArray(a))return qj(k,Error("batch(array) requires an array argument"));if(0===a.length)return qj(k);if("object"!==typeof d||null===d)d={};for(var b=Array(a.length),e=0;e<a.length;e++){if("object"!==typeof a[e]||null===a[e])return qj(k,Error("batch(array) element must be an object and not `null`"));var l=Uu(a[e]);if("put"!==l.type&&"del"!==l.type)return qj(k,
Error("`type` must be 'put' or 'del'"));var p=this._checkKey(l.key);if(p)return qj(k,p);l.key=this._serializeKey(l.key);if("put"===l.type){if(p=this._checkValue(l.value))return qj(k,p);l.value=this._serializeValue(l.value)}b[e]=l}this._batch(b,d,k)};Mk.prototype._batch=function(a,d,k){qj(k)};Mk.prototype.clear=function(a,d){if("function"===typeof a)d=a;else if("function"!==typeof d)throw Error("clear() requires a callback argument");a=e6(this||Co,a);a.reverse=!!a.reverse;a.limit="limit"in a?a.limit:
-1;this._clear(a,d)};Mk.prototype._clear=function(a,d){a.keys=!0;a.values=!1;a.keyAsBuffer=!0;a.valueAsBuffer=!0;var k=this._iterator(a),b={},e=this||Co,l=function(p){if(p)return k.end(function(){d(p)});k.next(function(u,x){if(u)return l(u);if(void 0===x)return k.end(d);e._del(x,b,l)})};l()};Mk.prototype._setupIteratorOptions=function(a){a=e6(this||Co,a);a.reverse=!!a.reverse;a.keys=!1!==a.keys;a.values=!1!==a.values;a.limit="limit"in a?a.limit:-1;a.keyAsBuffer=!1!==a.keyAsBuffer;a.valueAsBuffer=
!1!==a.valueAsBuffer;return a};Mk.prototype.iterator=function(a){if("object"!==typeof a||null===a)a={};a=this._setupIteratorOptions(a);return this._iterator(a)};Mk.prototype._iterator=function(a){return new Bba(this||Co)};Mk.prototype._chainedBatch=function(){return new Wua(this||Co)};Mk.prototype._serializeKey=function(a){return a};Mk.prototype._serializeValue=function(a){return a};Mk.prototype._checkKey=function(a){if(null===a||void 0===a)return Error("key cannot be `null` or `undefined`");if(Aba.isBuffer(a)&&
0===a.length)return Error("key cannot be an empty Buffer");if(""===a)return Error("key cannot be an empty String");if(Array.isArray(a)&&0===a.length)return Error("key cannot be an empty Array")};Mk.prototype._checkValue=function(a){if(null===a||void 0===a)return Error("value cannot be `null` or `undefined`")};Mk.prototype._nextTick=qj;Cba=Mk;var Xua=Cba;var kq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Dba={},f6=Bba;Gk(jA,f6);jA.prototype.setDb=function(a){var d=
(this||kq)._iterator=a.iterator((this||kq)._options);(this||kq)._operations.forEach(function(k){d[k.method].apply(d,k.args)})};jA.prototype._operation=function(a,d){if((this||kq)._iterator)return(this||kq)._iterator[a].apply((this||kq)._iterator,d);(this||kq)._operations.push({method:a,args:d})};["next","end"].forEach(function(a){jA.prototype["_"+a]=function(){this._operation(a,arguments)}});jA.prototype.seek=function(){this._operation("seek",arguments)};Dba=jA;var rm="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,oX={},g6=Xua,j6=Dba,i6=["put","get","del","batch","clear"],mla=["approximateSize","compactRange"];Gk(Xw,g6);Xw.prototype.type="deferred-leveldown";Xw.prototype._open=function(a,d){var k=this||rm;(this||rm)._db.open(a,function(b){if(b)return d(b);k._operations.forEach(function(e){e.iterator?e.iterator.setDb(k._db):k._db[e.method].apply(k._db,e.args)});k._operations=[];nla(k);d()})};Xw.prototype._close=function(a){var d=this||rm;(this||rm)._db.close(function(k){if(k)return a(k);
h6(d);a()})};Xw.prototype._serializeKey=function(a){return a};Xw.prototype._serializeValue=function(a){return a};oX=Xw;oX.DeferredIterator=j6;var Yua=oX,m6={},l6=!1,mT={},n6=!1,oT="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Zua={},zla=Zua=function(a,d){if(nT("noDeprecation"))return a;var k=!1;return function(){if(!k){if(nT("throwDeprecation"))throw Error(d);nT("traceDeprecation")?console.trace(d):console.warn(d);k=!0}return a.apply(this||oT,arguments)}},CN={},
DN=Rh,ur=DN.Buffer;ur.from&&ur.alloc&&ur.allocUnsafe&&ur.allocUnsafeSlow?CN=DN:(o6(DN,CN),CN.Buffer=Yw);Yw.prototype=Object.create(ur.prototype);o6(ur,Yw);Yw.from=function(a,d,k){if("number"===typeof a)throw new TypeError("Argument must not be a number");return ur(a,d,k)};Yw.alloc=function(a,d,k){if("number"!==typeof a)throw new TypeError("Argument must be a number");a=ur(a);void 0!==d?"string"===typeof k?a.fill(d,k):a.fill(d):a.fill(0);return a};Yw.allocUnsafe=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");
return ur(a)};Yw.allocUnsafeSlow=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return DN.SlowBuffer(a)};var uT={},pT=CN.Buffer,p6=pT.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};uT.StringDecoder=HD;HD.prototype.write=function(a){if(0===a.length)return"";if(this.lastNeed){var d=
this.fillLast(a);if(void 0===d)return"";var k=this.lastNeed;this.lastNeed=0}else k=0;return k<a.length?d?d+this.text(a,k):this.text(a,k):d||""};HD.prototype.end=function(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a};HD.prototype.text=function(a,d){var k=wla(this,a,d);if(!this.lastNeed)return a.toString("utf8",d);this.lastTotal=k;k=a.length-(k-this.lastNeed);a.copy(this.lastChar,0,k);return a.toString("utf8",d,k)};HD.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length};var r6={},q6=!1,t6={},s6=!1,w6=Object.freeze({}),v6={},u6=!1,z6={},y6=!1,C6={},B6=!1,sT={},E6=!1,Ala="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,tT={},F6=!1,I6={},H6=!1,vT={},J6=!1,Cla="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wT={},L6=!1,
pX={},Eba=!1,Fba={},Gba=!1,Oo={},Hba=!1;Hba||(Hba=!0,Oo=Oo=G6(),Oo.Stream=Oo,Oo.Readable=Oo,Oo.Writable=D6(),Oo.Duplex=lA(),Oo.Transform=K6(),Oo.PassThrough=function(){function a(k){if(!(this instanceof a))return new a(k);d.call(this,k)}if(Eba)return pX;Eba=!0;pX=a;var d=K6();Gk(a,d);a.prototype._transform=function(k,b,e){e(null,k)};return pX}(),Oo.finished=rT(),Oo.pipeline=function(){function a(z){var E=!1;return function(){E||(E=!0,z.apply(void 0,arguments))}}function d(z){if(z)throw z;}function k(z,
E,G,J){J=a(J);var K=!1;z.on("close",function(){K=!0});void 0===l&&(l=rT());l(z,{readable:E,writable:G},function(P){if(P)return J(P);K=!0;J()});var T=!1;return function(P){if(!K&&!T){T=!0;if(z.setHeader&&"function"===typeof z.abort)return z.abort();if("function"===typeof z.destroy)return z.destroy();J(P||new x("pipe"))}}}function b(z){z()}function e(z,E){return z.pipe(E)}if(Gba)return Fba;Gba=!0;var l,p=kA().codes,u=p.ERR_MISSING_ARGS,x=p.ERR_STREAM_DESTROYED;return Fba=function(){for(var z=arguments.length,
E=Array(z),G=0;G<z;G++)E[G]=arguments[G];var J=E.length?"function"!==typeof E[E.length-1]?d:E.pop():d;Array.isArray(E[0])&&(E=E[0]);if(2>E.length)throw new u("streams");var K,T=E.map(function(P,da){var fa=da<E.length-1;return k(P,fa,0<da,function(ka){K||(K=ka);ka&&T.forEach(b);fa||(T.forEach(b),J(K))})});return E.reduce(e)}}());var Iba=Oo;var lq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Jba={},$ua=Gk,M6=Iba.Readable,Dla=Uu;Jba=mA;$ua(mA,M6);mA.prototype._read=
function(){var a=this||lq,d=(this||lq)._options;(this||lq).destroyed||(this||lq)._iterator.next(function(k,b,e){if(!a.destroyed){if(k)return a.destroy(k);void 0===b&&void 0===e?a.push(null):!1!==d.keys&&!1===d.values?a.push(b):!1===d.keys&&!1!==d.values?a.push(e):a.push({key:b,value:e})}})};mA.prototype._destroy=function(a,d){(this||lq)._iterator.end(function(k){d(a||k)})};var ava=Jba,EN={};(function(a,d,k){EN?EN=k():d[a]=k()})("prr",EN,function(){var a="function"==typeof Object.defineProperty?function(k,
b,e){Object.defineProperty(k,b,e);return k}:function(k,b,e){k[b]=e.value;return k},d=function(k,b){var e="object"==typeof b,l=!e&&"string"==typeof b,p=function(u){return e?!!b[u]:l?-1<b.indexOf(u[0]):!1};return{enumerable:p("enumerable"),configurable:p("configurable"),writable:p("writable"),value:k}};return function(k,b,e,l){var p;l=d(e,l);if("object"==typeof b){for(p in b)Object.hasOwnProperty.call(b,p)&&(l.value=b[p],a(k,p,l));return k}return a(k,b,l)}});var vl="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,bva={},Ela=EN;xT.prototype=Error();var cva=bva=function(a){var d=function(k,b){return Fla(a,k,b)};return{CustomError:xT,FilesystemError:d("FilesystemError"),createError:d}},Wr={},dva=Wr.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,
code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},
{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",
description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},
{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},
{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},
{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},
{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];Wr.errno={};Wr.code={};dva.forEach(function(a){Wr.errno[a.errno]=a;Wr.code[a.code]=a});Wr.custom=cva(Wr);
Wr.create=Wr.custom.createError;var eva={},Rx=Wr.create,Sx=Rx("LevelUPError"),qX=Rx("NotFoundError",Sx);qX.prototype.notFound=!0;qX.prototype.status=404;var Tx=eva={LevelUPError:Sx,InitializationError:Rx("InitializationError",Sx),OpenError:Rx("OpenError",Sx),ReadError:Rx("ReadError",Sx),WriteError:Rx("WriteError",Sx),NotFoundError:qX,EncodingError:Rx("EncodingError",Sx)},fva={},Vu=fva=function(){var a,d=new Promise(function(k,b){a=function(e,l){e?b(e):k(l)}});a.promise=d;return a};var gB=function(a,
d){return"function"===typeof a?a:d};var Kba=function(a){return"object"===typeof a&&null!==a?a:{}};var wl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,gva={},uF=Tx.WriteError;ID.prototype.put=function(a,d){try{(this||wl).batch.put(a,d)}catch(k){throw new uF(k);}(this||wl).ops.push({type:"put",key:a,value:d});(this||wl).length++;return this||wl};ID.prototype.del=function(a){try{(this||wl).batch.del(a)}catch(d){throw new uF(d);}(this||wl).ops.push({type:"del",key:a});
(this||wl).length++;return this||wl};ID.prototype.clear=function(){try{(this||wl).batch.clear()}catch(a){throw new uF(a);}(this||wl).ops=[];(this||wl).length=0;return this||wl};ID.prototype.write=function(a,d){var k=(this||wl)._levelup,b=(this||wl).ops;d=gB(a,d);if(!d){d=Vu();var e=d.promise}a=Kba(a);try{(this||wl).batch.write(a,function(l){if(l)return d(new uF(l));k.emit("batch",b);d()})}catch(l){throw new uF(l);}return e};var hva=gva=ID,Rla={assign:O6,polyfill:function(){Object.assign||Object.defineProperty(Object,
"assign",{enumerable:!1,configurable:!0,writable:!0,value:O6})}},Lba=Object.prototype.toString,Mba=function(a){var d=Lba.call(a),k="[object Arguments]"===d;return k||(k="[object Array]"!==d&&null!==a&&"object"==typeof a&&"number"==typeof a.length&&0<=a.length&&"[object Function]"===Lba.call(a.callee)),k};if(!Object.keys){var FN=Object.prototype.hasOwnProperty,Nba=Object.prototype.toString,Oba=Object.prototype.propertyIsEnumerable,iva=!Oba.call({toString:null},"toString"),jva=Oba.call(function(){},
"prototype"),GN="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),rX=function(a){var d=a.constructor;return d&&d.prototype===a},kva={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,
$webkitStorageInfo:!0,$window:!0},lva=function(){if("undefined"==typeof window)return!1;for(var a in window)try{if(!kva["$"+a]&&FN.call(window,a)&&null!==window[a]&&"object"==typeof window[a])try{rX(window[a])}catch(d){return!0}}catch(d){return!0}return!1}();var mva=function(a){var d=null!==a&&"object"==typeof a,k="[object Function]"===Nba.call(a),b=Mba(a),e=d&&"[object String]"===Nba.call(a),l=[];if(!d&&!k&&!b)throw new TypeError("Object.keys called on a non-object");d=jva&&k;if(e&&0<a.length&&!FN.call(a,
0))for(e=0;e<a.length;++e)l.push(String(e));if(b&&0<a.length)for(b=0;b<a.length;++b)l.push(String(b));else for(var p in a)d&&"prototype"===p||!FN.call(a,p)||l.push(String(p));if(iva){if("undefined"!=typeof window&&lva)try{var u=rX(a)}catch(x){u=!1}else u=rX(a);for(b=0;b<GN.length;++b)u&&"constructor"===GN[b]||!FN.call(a,GN[b])||l.push(GN[b])}return l}}var nva=mva,ova=Array.prototype.slice,Pba=Object.keys,HN=Pba?function(a){return Pba(a)}:nva,Qba=Object.keys;HN.shim=function(){Object.keys?function(){var a=
Object.keys(arguments);return a&&a.length===arguments.length}(1,2)||(Object.keys=function(a){return Mba(a)?Qba(ova.call(a)):Qba(a)}):Object.keys=HN;return Object.keys||HN};var pva="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),qva=Object.prototype.toString,rva=Array.prototype.concat,sX=Object.defineProperty,Rba=sX&&function(){var a={};try{for(var d in sX(a,"x",{enumerable:!1,value:a}),a)return!1;return a.x===a}catch(k){return!1}}(),vF=function(a,d){var k=2<arguments.length?arguments[2]:
{},b=HN(d);pva&&(b=rva.call(b,Object.getOwnPropertySymbols(d)));for(var e=0;e<b.length;e+=1){var l=void 0,p=a,u=b[e],x=d[b[e]],z=k[b[e]];(!(u in p)||"function"==typeof(l=z)&&"[object Function]"===qva.call(l)&&z())&&(Rba?sX(p,u,{configurable:!0,enumerable:!1,value:x,writable:!0}):p[u]=x)}};vF.supportsDescriptors=!!Rba;var Sba=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global).Symbol,sva=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;
if("symbol"==typeof Symbol.iterator)return!0;var a={},d=Symbol("test"),k=Object(d);if("string"==typeof d||"[object Symbol]"!==Object.prototype.toString.call(d)||"[object Symbol]"!==Object.prototype.toString.call(k))return!1;for(d in a[d]=42,a)return!1;if("function"==typeof Object.keys&&0!==Object.keys(a).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(a).length)return!1;k=Object.getOwnPropertySymbols(a);return 1!==k.length||k[0]!==d||!Object.prototype.propertyIsEnumerable.call(a,
d)||"function"==typeof Object.getOwnPropertyDescriptor&&(a=Object.getOwnPropertyDescriptor(a,d),42!==a.value||!0!==a.enumerable)?!1:!0},tX=Array.prototype.slice,tva=Object.prototype.toString,uva=function(a){var d=this;if("function"!=typeof d||"[object Function]"!==tva.call(d))throw new TypeError("Function.prototype.bind called on incompatible "+d);for(var k,b=tX.call(arguments,1),e=Math.max(0,d.length-b.length),l=[],p=0;p<e;p++)l.push("$"+p);if(k=Function("binder","return function ("+l.join(",")+
"){ return binder.apply(this,arguments); }")(function(){if(this instanceof k){var u=d.apply(this,b.concat(tX.call(arguments)));return Object(u)===u?u:this}return d.apply(a,b.concat(tX.call(arguments)))}),d.prototype)e=function(){},e.prototype=d.prototype,k.prototype=new e,e.prototype=null;return k},uX=Function.prototype.bind||uva,wF=TypeError,Ux=Object.getOwnPropertyDescriptor;if(Ux)try{Ux({},"")}catch(a){Ux=null}var vX=function(){throw new wF;},vva=Ux?function(){try{return arguments.callee,vX}catch(a){try{return Ux(arguments,
"callee").get}catch(d){return vX}}}():vX,Vx="function"==typeof Sba&&"function"==typeof Symbol&&"symbol"==typeof Sba("foo")&&"symbol"==typeof Symbol("bar")&&sva(),Wx=Object.getPrototypeOf||function(a){return a.__proto__},wX="undefined"==typeof Uint8Array?void 0:Wx(Uint8Array),xX={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":Vx?Wx([][Symbol.iterator]()):
void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,
"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,
"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?
void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Vx?Wx(Wx([][Symbol.iterator]())):void 0,"%JSON%":"object"==
typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Vx?Wx((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,
"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,
"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Vx?Wx((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:
SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":Vx?Wx(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":Vx?Symbol:void 0,"%SymbolPrototype%":Vx?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":vva,"%TypedArray%":wX,"%TypedArrayPrototype%":wX?wX.prototype:void 0,"%TypeError%":wF,"%TypeErrorPrototype%":wF.prototype,
"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==
typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},Tba=uX.call(Function.call,String.prototype.replace),wva=
/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,xva=/\\(\\)?/g,yva=function(a){var d=[];return Tba(a,wva,function(k,b,e,l){d[d.length]=e?Tba(l,xva,"$1"):b||k}),d},Uba,Vba=function(a,d){if("string"!=typeof a||0===a.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof d)throw new TypeError('"allowMissing" argument must be a boolean');var k=yva(a);var b="%"+(0<k.length?k[0]:"")+"%";if(!(b in
xX))throw new SyntaxError("intrinsic "+b+" does not exist!");if(void 0===xX[b]&&!d)throw new wF("intrinsic "+b+" exists, but is not available. Please file an issue!");b=xX[b];for(var e=1;e<k.length;e+=1)if(null!=b)if(Ux&&e+1>=k.length){var l=Ux(b,k[e]);if(!(d||k[e]in b))throw new wF("base intrinsic for "+a+" exists, but the property is not available.");b=l?l.get||l.value:b[k[e]]}else b=b[k[e]];return b}("%Function%"),zva=Vba.apply,Ava=Vba.call;(Uba=function(){return uX.apply(Ava,arguments)}).apply=
function(){return uX.apply(zva,arguments)};var yX,IN,Bva=(yX=function(a,d){return 0===a&&0===d?1/a==1/d:a===d||!(a==a||d==d)},yX),Cva=(IN=function(){return"function"==typeof Object.is?Object.is:Bva},IN),Wba=Uba(IN(),Object);vF(Wba,{getPolyfill:IN,implementation:yX,shim:function(){var a=Cva();return vF(Object,{is:a},{is:function(){return Object.is!==a}}),a}});var j7=Wba;var Xba=function(a){return a!=a};var JN,Dva=Xba,Eva=(JN=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:
Dva},vF),Fva=Xba,Yba=JN();vF(Yba,{getPolyfill:JN,implementation:Fva,shim:function(){var a=JN();return Eva(Number,{isNaN:a},{isNaN:function(){return Number.isNaN!==a}}),a}});var yT={},Q6=!1,S6={},R6=!1,Ila=void 0!==/a/g.flags,RJ=function(a){var d=[];return a.forEach(function(k){return d.push(k)}),d},g7=function(a){var d=[];return a.forEach(function(k,b){return d.push([b,k])}),d},V6=Object.is?Object.is:j7,NJ=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},BT=Number.isNaN?
Number.isNaN:Yba,KD=AT(Object.prototype.hasOwnProperty),QJ=AT(Object.prototype.propertyIsEnumerable),W6=AT(Object.prototype.toString),Hn=Hh.types,Nla=Hn.isAnyArrayBuffer,Kla=Hn.isArrayBufferView,X6=Hn.isDate,OJ=Hn.isMap,Y6=Hn.isRegExp,PJ=Hn.isSet,Jla=Hn.isNativeError,Ola=Hn.isBoxedPrimitive,Z6=Hn.isNumberObject,$6=Hn.isStringObject,a7=Hn.isBooleanObject,b7=Hn.isBigIntObject,Pla=Hn.isSymbolObject,Lla=Hn.isFloat32Array,Mla=Hn.isFloat64Array,h7={isDeepEqual:function(a,d){return tp(a,d,!1)},isDeepStrictEqual:function(a,
d){return tp(a,d,!0)}},CT={},i7=!1,Gva=zT(),ii="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Hva={},TJ=Li,SJ=lr.EventEmitter,Iva=Hh.inherits,k7=Yua,Ula=yba,Tla=Gva,nA=Kba,KN=Tx.WriteError,l7=Tx.ReadError,Jva=Tx.NotFoundError,Kva=Tx.OpenError,Sla=Tx.InitializationError;qk.prototype.emit=SJ.prototype.emit;qk.prototype.once=SJ.prototype.once;Iva(qk,SJ);qk.prototype.open=function(a,d){var k=this||ii;"function"===typeof a&&(d=a,a=null);if(!d){d=Vu();var b=d.promise}a||
(a=(this||ii).options);if(this.isOpen())return TJ.nextTick(d,null,k),b;if(this._isOpening())return this.once("open",function(){d(null,k)}),b;this.emit("opening");(this||ii).db.open(a,function(e){if(e)return d(new Kva(e));k.db=k._db;d(null,k);k.emit("open");k.emit("ready")});return b};qk.prototype.close=function(a){var d=this||ii;if(!a){a=Vu();var k=a.promise}if(this.isOpen())(this||ii).db.close(function(){d.emit("closed");a.apply(null,arguments)}),this.emit("closing"),(this||ii).db=new k7((this||
ii)._db);else if(this.isClosed())TJ.nextTick(a);else if("closing"===(this||ii).db.status)this.once("closed",a);else if(this._isOpening())this.once("open",function(){d.close(a)});return k};qk.prototype.isOpen=function(){return"open"===(this||ii).db.status};qk.prototype._isOpening=function(){return"opening"===(this||ii).db.status};qk.prototype.isClosed=function(){return/^clos|new/.test((this||ii).db.status)};qk.prototype.get=function(a,d,k){k=gB(d,k);if(!k){k=Vu();var b=k.promise}if(LD(this||ii,k))return b;
d=nA(d);(this||ii).db.get(a,d,function(e,l){if(e)return e=/notfound/i.test(e)||e.notFound?new Jva("Key not found in database ["+a+"]",e):new l7(e),k(e);k(null,l)});return b};qk.prototype.put=function(a,d,k,b){var e=this||ii;b=gB(k,b);if(!b){b=Vu();var l=b.promise}if(LD(this||ii,b))return l;k=nA(k);(this||ii).db.put(a,d,k,function(p){if(p)return b(new KN(p));e.emit("put",a,d);b()});return l};qk.prototype.del=function(a,d,k){var b=this||ii;k=gB(d,k);if(!k){k=Vu();var e=k.promise}if(LD(this||ii,k))return e;
d=nA(d);(this||ii).db.del(a,d,function(l){if(l)return k(new KN(l));b.emit("del",a);k()});return e};qk.prototype.batch=function(a,d,k){if(!arguments.length)return new hva(this||ii);var b=this||ii;k="function"===typeof a?a:gB(d,k);if(!k){k=Vu();var e=k.promise}if(LD(this||ii,k))return e;d=nA(d);(this||ii).db.batch(a,d,function(l){if(l)return k(new KN(l));b.emit("batch",a);k()});return e};qk.prototype.iterator=function(a){return(this||ii).db.iterator(a)};qk.prototype.clear=function(a,d){var k=this||
ii;d=gB(a,d);a=nA(a);if(!d){d=Vu();var b=d.promise}if(LD(this||ii,d))return b;(this||ii).db.clear(a,function(e){if(e)return d(new KN(e));k.emit("clear",a);d()});return b};qk.prototype.readStream=qk.prototype.createReadStream=function(a){a=Uu({keys:!0,values:!0},a);"number"!==typeof a.limit&&(a.limit=-1);return new ava((this||ii).db.iterator(a),a)};qk.prototype.keyStream=qk.prototype.createKeyStream=function(a){return this.createReadStream(Uu(a,{keys:!0,values:!1}))};qk.prototype.valueStream=qk.prototype.createValueStream=
function(a){return this.createReadStream(Uu(a,{keys:!1,values:!0}))};qk.prototype.toString=function(){return"LevelUP"};qk.prototype.type="levelup";qk.errors=Tx;var Lva=Hva=qk.default=qk,fl={},Mva=Rh.Buffer;fl.compare=function(a,d){if(Mva.isBuffer(a)){for(var k=Math.min(a.length,d.length),b=0;b<k;b++){var e=a[b]-d[b];if(e)return e}return a.length-d.length}return a<d?-1:a>d?1:0};var Nva=fl.lowerBoundKey=function(a){return vr(a,"gt")||vr(a,"gte")||vr(a,"min")||(a.reverse?vr(a,"end"):vr(a,"start"))||
void 0},zX=fl.lowerBound=function(a,d){var k=Nva(a);return k?a[k]:d},AX=fl.lowerBoundInclusive=function(a){return Object.hasOwnProperty.call(a,"gt")?!1:!0},BX=fl.upperBoundInclusive=function(a){return Object.hasOwnProperty.call(a,"lt")?!1:!0},Ova=fl.lowerBoundExclusive=function(a){return!AX(a)},Pva=fl.upperBoundExclusive=function(a){return!BX(a)},Qva=fl.upperBoundKey=function(a){return vr(a,"lt")||vr(a,"lte")||vr(a,"max")||(a.reverse?vr(a,"start"):vr(a,"end"))||void 0},CX=fl.upperBound=function(a,
d){var k=Qva(a);return k?a[k]:d};fl.start=function(a,d){return a.reverse?CX(a,d):zX(a,d)};fl.end=function(a,d){return a.reverse?zX(a,d):CX(a,d)};fl.startInclusive=function(a){return a.reverse?BX(a):AX(a)};fl.endInclusive=function(a){return a.reverse?AX(a):BX(a)};fl.toLtgt=function(a,d,k,b,e){d=d||{};k=k||Vla;var l=3<arguments.length,p=fl.lowerBoundKey(a),u=fl.upperBoundKey(a);p?"gt"===p?d.gt=k(a.gt,!1):d.gte=k(a[p],!1):l&&(d.gte=k(b,!1));u?"lt"===u?d.lt=k(a.lt,!0):d.lte=k(a[u],!0):l&&(d.lte=k(e,!0));
null!=a.reverse&&(d.reverse=!!a.reverse);Object.hasOwnProperty.call(d,"max")&&delete d.max;Object.hasOwnProperty.call(d,"min")&&delete d.min;Object.hasOwnProperty.call(d,"start")&&delete d.start;Object.hasOwnProperty.call(d,"end")&&delete d.end;return d};fl.contains=function(a,d,k){k=k||fl.compare;var b=zX(a);if(void 0!==b&&""!==b&&(b=k(d,b),0>b||0===b&&Ova(a)))return!1;b=CX(a);return void 0!==b&&""!==b&&(b=k(d,b),0<b||0===b&&Pva(a))?!1:!0};fl.filter=function(a,d){return function(k){return fl.contains(a,
k,d)}};var et={},ET=Aba;et.utf8=et["utf-8"]={encode:function(a){return DT(a)?a:String(a)},decode:UJ,buffer:!1,type:"utf8"};et.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"};et.binary={encode:function(a){return DT(a)?a:ET.from(a)},decode:UJ,buffer:!0,type:"binary"};et.none={encode:UJ,decode:UJ,buffer:!1,type:"id"};et.id=et.none;"hex ascii base64 ucs2 ucs-2 utf16le utf-16le".split(" ").forEach(function(a){et[a]={encode:function(d){return DT(d)?d:ET.from(d,a)},decode:function(d){return d.toString(a)},
buffer:!0,type:a}});var Ms="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Zba={},FT=et;Zba=wn;wn.prototype._encoding=function(a){"string"===typeof a&&(a=FT[a]);a||(a=FT.id);return a};wn.prototype._keyEncoding=function(a,d){return this._encoding(d&&d.keyEncoding||a&&a.keyEncoding||(this||Ms).opts.keyEncoding)};wn.prototype._valueEncoding=function(a,d){return this._encoding(d&&(d.valueEncoding||d.encoding)||a&&(a.valueEncoding||a.encoding)||(this||Ms).opts.valueEncoding||
(this||Ms).opts.encoding)};wn.prototype.encodeKey=function(a,d,k){return this._keyEncoding(d,k).encode(a)};wn.prototype.encodeValue=function(a,d,k){return this._valueEncoding(d,k).encode(a)};wn.prototype.decodeKey=function(a,d){return this._keyEncoding(d).decode(a)};wn.prototype.decodeValue=function(a,d){return this._valueEncoding(d).decode(a)};wn.prototype.encodeBatch=function(a,d){var k=this||Ms;return a.map(function(b){var e={type:b.type,key:k.encodeKey(b.key,d,b)};k.keyAsBuffer(d,b)&&(e.keyEncoding=
"binary");b.prefix&&(e.prefix=b.prefix);"value"in b&&(e.value=k.encodeValue(b.value,d,b),k.valueAsBuffer(d,b)&&(e.valueEncoding="binary"));return e})};var Rva="lt gt lte gte start end".split(" ");wn.prototype.encodeLtgt=function(a){var d=this||Ms,k={};Object.keys(a).forEach(function(b){k[b]=-1<Rva.indexOf(b)?d.encodeKey(a[b],a):a[b]});return k};wn.prototype.createStreamDecoder=function(a){var d=this||Ms;return a.keys&&a.values?function(k,b){return{key:d.decodeKey(k,a),value:d.decodeValue(b,a)}}:a.keys?
function(k){return d.decodeKey(k,a)}:a.values?function(k,b){return d.decodeValue(b,a)}:function(){}};wn.prototype.keyAsBuffer=function(a){return this._keyEncoding(a).buffer};wn.prototype.valueAsBuffer=function(a){return this._valueEncoding(a).buffer};var Sva=Zba,Tva={},Zla=Tva=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)},xl={},Uva=Rh.Buffer;xl.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)};xl.isBoolean=
function(a){return"boolean"===typeof a};xl.isNull=function(a){return null===a};xl.isNullOrUndefined=function(a){return null==a};xl.isNumber=function(a){return"number"===typeof a};xl.isString=function(a){return"string"===typeof a};xl.isSymbol=function(a){return"symbol"===typeof a};xl.isUndefined=function(a){return void 0===a};xl.isRegExp=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)};xl.isObject=function(a){return"object"===typeof a&&null!==a};xl.isDate=function(a){return"[object Date]"===
Object.prototype.toString.call(a)};xl.isError=function(a){return"[object Error]"===Object.prototype.toString.call(a)||a instanceof Error};xl.isFunction=function(a){return"function"===typeof a};xl.isPrimitive=function(a){return null===a||"boolean"===typeof a||"number"===typeof a||"string"===typeof a||"symbol"===typeof a||"undefined"===typeof a};xl.isBuffer=Uva.isBuffer;var Bg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,IT={},$ba=Rh.Buffer,Vva=$ba.isEncoding||function(a){switch(a&&
a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}},DX=IT.StringDecoder=function(a){(this||Bg).encoding=(a||"utf8").toLowerCase().replace(/[-_]/,"");if(a&&!Vva(a))throw Error("Unknown encoding: "+a);switch((this||Bg).encoding){case "utf8":(this||Bg).surrogateSize=3;break;case "ucs2":case "utf16le":(this||Bg).surrogateSize=2;(this||Bg).detectIncompleteChar=Xla;break;
case "base64":(this||Bg).surrogateSize=3;(this||Bg).detectIncompleteChar=Yla;break;default:(this||Bg).write=Wla;return}(this||Bg).charBuffer=new $ba(6);(this||Bg).charReceived=0;(this||Bg).charLength=0};DX.prototype.write=function(a){for(var d="";(this||Bg).charLength;){d=a.length>=(this||Bg).charLength-(this||Bg).charReceived?(this||Bg).charLength-(this||Bg).charReceived:a.length;a.copy((this||Bg).charBuffer,(this||Bg).charReceived,0,d);(this||Bg).charReceived+=d;if((this||Bg).charReceived<(this||
Bg).charLength)return"";a=a.slice(d,a.length);d=(this||Bg).charBuffer.slice(0,(this||Bg).charLength).toString((this||Bg).encoding);var k=d.charCodeAt(d.length-1);if(55296<=k&&56319>=k)(this||Bg).charLength+=(this||Bg).surrogateSize,d="";else{(this||Bg).charReceived=(this||Bg).charLength=0;if(0===a.length)return d;break}}this.detectIncompleteChar(a);var b=a.length;(this||Bg).charLength&&(a.copy((this||Bg).charBuffer,0,a.length-(this||Bg).charReceived,b),b-=(this||Bg).charReceived);d+=a.toString((this||
Bg).encoding,0,b);b=d.length-1;k=d.charCodeAt(b);return 55296<=k&&56319>=k?(k=(this||Bg).surrogateSize,(this||Bg).charLength+=k,(this||Bg).charReceived+=k,(this||Bg).charBuffer.copy((this||Bg).charBuffer,k,0,k),a.copy((this||Bg).charBuffer,0,0,k),d.substring(0,b)):d};DX.prototype.detectIncompleteChar=function(a){for(var d=3<=a.length?3:a.length;0<d;d--){var k=a[a.length-d];if(1==d&&6==k>>5){(this||Bg).charLength=2;break}if(2>=d&&14==k>>4){(this||Bg).charLength=3;break}if(3>=d&&30==k>>3){(this||Bg).charLength=
4;break}}(this||Bg).charReceived=d};DX.prototype.end=function(a){var d="";a&&a.length&&(d=this.write(a));(this||Bg).charReceived&&(a=(this||Bg).encoding,d+=(this||Bg).charBuffer.slice(0,(this||Bg).charReceived).toString(a));return d};var $la=Object.freeze({}),GT={},n7=!1,ji="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,HT={},o7=!1,nq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,JT={},q7=!1,Pf="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,KT={},s7=!1,sm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,LT={},u7=!1,t7="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Kp={},aca=!1,Wva=function(){if(aca)return Kp;aca=!0;var a=Li;Kp=Kp=p7();Kp.Stream=Zw;Kp.Readable=Kp;Kp.Writable=m7();Kp.Duplex=oA();Kp.Transform=r7();Kp.PassThrough=ama();a.browser||"disable"!==a.env.READABLE_STREAM||(Kp=Zw);return Kp}(),Xva={},dma=MD(fl),Yva=MD(lr),Zva=
MD(Sva),$va=MD(Wva),bca=MD(Gk);bca(MT,Error);MT.prototype.name="NotFoundError";var awa=Yva.EventEmitter,bwa=new MT,cca=function(a,d,k,b){function e(p){var u={},x;if(b)for(x in b)"undefined"!==typeof b[x]&&(u[x]=b[x]);if(p)for(x in p)"undefined"!==typeof p[x]&&(u[x]=p[x]);return u}var l=new awa;l.sublevels={};l.options=b;l.version="6.5.4";l.methods={};d=d||[];l.put=function(p,u,x,z){"function"===typeof x&&(z=x,x={});a.apply([{key:p,value:u,prefix:d.slice(),type:"put"}],e(x),function(E){if(E)return z(E);
l.emit("put",p,u);z(null)})};l.prefix=function(){return d.slice()};l.batch=function(p,u,x){"function"===typeof u&&(x=u,u={});p=p.map(function(z){return{key:z.key,value:z.value,prefix:z.prefix||d,keyEncoding:z.keyEncoding,valueEncoding:z.valueEncoding,type:z.type}});a.apply(p,e(u),function(z){if(z)return x(z);l.emit("batch",p);x(null)})};l.get=function(p,u,x){"function"===typeof u&&(x=u,u={});a.get(p,d,e(u),function(z,E){z?x(bwa):x(null,E)})};l.sublevel=function(p,u){return l.sublevels[p]=l.sublevels[p]||
cca(a,d.concat(p),k,e(u))};l.readStream=l.createReadStream=function(p){p=e(p);p.prefix=d;var u=a.iterator(p);p=k(p,a.createDecoder(p));p.setIterator(u);return p};l.close=function(p){a.close(p)};l.isOpen=a.isOpen;l.isClosed=a.isClosed;return l},v7=$va.Readable;bca(nu,v7);nu.prototype.setIterator=function(a){this._iterator=a;return this._destroyed?a.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this};nu.prototype._read=function(){var a=this;if(!a._destroyed){if(!a._iterator)return this._waiting=
!0;a._iterator.next(function(d,k,b){if(d||void 0===k&&void 0===b)return d||a._destroyed||a.push(null),a._cleanup(d);b=a._makeData(k,b);a._destroyed||a.push(b)})}};nu.prototype._cleanup=function(a){if(!this._destroyed){this._destroyed=!0;var d=this;a&&"iterator has ended"!==a.message&&d.emit("error",a);d._iterator?d._iterator.end(function(){d._iterator=null;d.emit("close")}):d.emit("close")}};nu.prototype.destroy=function(){this._cleanup()};var cwa={encode:function(a){return"\u00ff"+a[0]+"\u00ff"+
a[1]},decode:function(a){a=a.toString();var d=a.indexOf("\u00ff",1);return[a.substring(1,d),a.substring(d+1)]},lowerBound:"\x00",upperBound:"\u00ff"},dwa=new Zva,ewa=Xva=function(a){return cca(cma(a,cwa,dwa),[],nu,a.options)},Ns="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,LN={},fwa=Li,w7=Iba.Transform,dca=Gk;dca(pA,w7);pA.prototype.destroy=function(a){if(!(this||Ns)._destroyed){(this||Ns)._destroyed=!0;var d=this||Ns;fwa.nextTick(function(){a&&d.emit("error",a);
d.emit("close")})}};LN=NT(function(a,d,k){a=new pA(a);a._transform=d;k&&(a._flush=k);return a});LN.ctor=NT(function(a,d,k){function b(e){if(!((this||Ns)instanceof b))return new b(e);(this||Ns).options=Object.assign({},a,e);pA.call(this||Ns,(this||Ns).options)}dca(b,pA);b.prototype._transform=d;k&&(b.prototype._flush=k);return b});LN.obj=NT(function(a,d,k){a=new pA(Object.assign({objectMode:!0,highWaterMark:16},a));a._transform=d;k&&(a._flush=k);return a});var eca=LN,gwa={};Hj.prototype.toArray=function(){for(var a=
this._length,d=Array(a),k=this._front,b=this._capacity,e=0;e<a;++e)d[e]=this[k+e&b-1];return d};Hj.prototype.push=function(a){var d=arguments.length,k=this._length;if(1<d){var b=this._capacity;if(k+d>b){for(var e=0;e<d;++e){this._checkCapacity(k+1);var l=this._front+k&this._capacity-1;this[l]=arguments[e];k++;this._length=k}return k}l=this._front;for(e=0;e<d;++e)this[l+k&b-1]=arguments[e],l++;this._length=k+d;return k+d}if(0===d)return k;this._checkCapacity(k+1);e=this._front+k&this._capacity-1;this[e]=
a;this._length=k+1;return k+1};Hj.prototype.pop=function(){var a=this._length;if(0!==a){var d=this._front+a-1&this._capacity-1,k=this[d];this[d]=void 0;this._length=a-1;return k}};Hj.prototype.shift=function(){var a=this._length;if(0!==a){var d=this._front,k=this[d];this[d]=void 0;this._front=d+1&this._capacity-1;this._length=a-1;return k}};Hj.prototype.unshift=function(a){var d=this._length,k=arguments.length;if(1<k){var b=this._capacity;if(d+k>b){for(var e=k-1;0<=e;e--){this._checkCapacity(d+1);
b=this._capacity;var l=(this._front-1&b-1^b)-b;this[l]=arguments[e];d++;this._length=d;this._front=l}return d}l=this._front;for(e=k-1;0<=e;e--)l=(l-1&b-1^b)-b,this[l]=arguments[e];this._front=l;this._length=d+k;return d+k}if(0===k)return d;this._checkCapacity(d+1);b=this._capacity;e=(this._front-1&b-1^b)-b;this[e]=a;this._length=d+1;this._front=e;return d+1};Hj.prototype.peekBack=function(){var a=this._length;if(0!==a)return this[this._front+a-1&this._capacity-1]};Hj.prototype.peekFront=function(){if(0!==
this._length)return this[this._front]};Hj.prototype.get=function(a){if(a===(a|0)){var d=this._length;0>a&&(a+=d);if(!(0>a||a>=d))return this[this._front+a&this._capacity-1]}};Hj.prototype.isEmpty=function(){return 0===this._length};Hj.prototype.clear=function(){for(var a=this._length,d=this._front,k=this._capacity,b=0;b<a;++b)this[d+b&k-1]=void 0;this._front=this._length=0};Hj.prototype.toString=function(){return this.toArray().toString()};Hj.prototype.valueOf=Hj.prototype.toString;Hj.prototype.removeFront=
Hj.prototype.shift;Hj.prototype.removeBack=Hj.prototype.pop;Hj.prototype.insertFront=Hj.prototype.unshift;Hj.prototype.insertBack=Hj.prototype.push;Hj.prototype.enqueue=Hj.prototype.push;Hj.prototype.dequeue=Hj.prototype.shift;Hj.prototype.toJSON=Hj.prototype.toArray;Object.defineProperty(Hj.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("");}});Hj.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(x7(1.5*this._capacity+16))};Hj.prototype._resizeTo=
function(a){var d=this._capacity;this._capacity=a;a=this._front;var k=this._length;if(a+k>d)for(a=a+k&d-1,k=0;k<a;++k)this[k+d]=this[k+0],this[k+0]=void 0};var y7=Array.isArray,hwa=gwa=Hj,iwa={},Xr=Rh.Buffer,jwa=Object.prototype.toString,EX="function"===typeof Xr.alloc&&"function"===typeof Xr.allocUnsafe&&"function"===typeof Xr.from,kwa=iwa=function(a,d,k){if("number"===typeof a)throw new TypeError('"value" argument must not be a number');if("ArrayBuffer"===jwa.call(a).slice(8,-1)){d>>>=0;var b=a.byteLength-
d;if(0>b)throw new RangeError("'offset' is out of bounds");if(void 0===k)k=b;else if(k>>>=0,k>b)throw new RangeError("'length' is out of bounds");return EX?Xr.from(a.slice(d,d+k)):new Xr(new Uint8Array(a.slice(d,d+k)))}if("string"===typeof a){k=d;if("string"!==typeof k||""===k)k="utf8";if(!Xr.isEncoding(k))throw new TypeError('"encoding" must be a valid string encoding');return EX?Xr.from(a,k):new Xr(a,k)}return EX?Xr.from(a):new Xr(a)},ko={};Object.defineProperty(ko,"__esModule",{value:!0});ko.collectConflicts=
function(a){var d=OT(a);a=z7(a.rev_tree);for(var k=[],b=0,e=a.length;b<e;b++){var l=a[b];l.rev===d||l.opts.deleted||k.push(l.rev)}return k};ko.collectLeaves=z7;ko.compactTree=function(a){var d=[];VJ(a.rev_tree,function(k,b,e,l,p){"available"!==p.status||k||(d.push(b+"-"+e),p.status="missing")});return d};ko.isDeleted=function(a,d){d||(d=OT(a));d=d.substring(d.indexOf("-")+1);a=a.rev_tree.map(jma);for(var k;k=a.pop();){if(k[0]===d)return!!k[1].deleted;a=a.concat(k[2])}};ko.isLocalId=function(a){return/^_local/.test(a)};
ko.merge=function(a,d,k){a=D7(a,d);k=ima(a.tree,k);return{tree:k.tree,stemmedRevs:k.revs,conflicts:a.conflicts}};ko.revExists=function(a,d){a=a.slice();var k=d.split("-");d=parseInt(k[0],10);k=k[1];for(var b;b=a.pop();){if(b.pos===d&&b.ids[0]===k)return!0;for(var e=b.ids[2],l=0,p=e.length;l<p;l++)a.push({pos:b.pos+1,ids:e[l]})}return!1};ko.rootToLeaf=A7;ko.traverseRevTree=VJ;ko.winningRev=OT;ko.latest=function(a,d){for(var k=d.rev_tree.slice(),b;b=k.pop();){var e=b.pos,l=b.ids,p=l[0],u=l[1];l=l[2];
var x=0===l.length;b=b.history?b.history.slice():[];b.push({id:p,pos:e,opts:u});if(x)for(u=0,x=b.length;u<x;u++){var z=b[u];if(z.pos+"-"+z.id===a)return e+"-"+p}p=0;for(u=l.length;p<u;p++)k.push({pos:e+1,ids:l[p],history:b})}throw Error("Unable to resolve latest revision for id "+d.id+", rev "+a);};var am={};Object.defineProperty(am,"__esModule",{value:!0});var $w=nh,ND=Tm,H7=eB,Do=Dg,co=ko,kma=E7("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),
lma=E7("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" "));am.invalidIdError=$w.invalidIdError;am.normalizeDdocFunctionName=$w.normalizeDdocFunctionName;am.parseDdocFunctionName=$w.parseDdocFunctionName;am.isDeleted=co.isDeleted;am.isLocalId=co.isLocalId;am.allDocsKeysQuery=function(a,d){var k={offset:d.skip};return Promise.all(d.keys.map(function(b){var e=$w.assign({key:b,deleted:"ok"},d);["limit","skip","keys"].forEach(function(l){delete e[l]});
return new Promise(function(l,p){a._allDocs(e,function(u,x){if(u)return p(u);d.update_seq&&void 0!==x.update_seq&&(k.update_seq=x.update_seq);k.total_rows=x.total_rows;l(x.rows[0]||{key:b,error:"not_found"})})})})).then(function(b){k.rows=b;return k})};am.parseDoc=G7;am.preprocessAttachments=function(a,d,k){function b(){e++;a.length===e&&(l?k(l):k())}if(!a.length)return k();var e=0,l;a.forEach(function(p){function u(G){l=G;z++;z===x.length&&b()}var x=p.data&&p.data._attachments?Object.keys(p.data._attachments):
[],z=0;if(!x.length)return b();for(var E in p.data._attachments)p.data._attachments.hasOwnProperty(E)&&oma(p.data._attachments[E],d,u)})};am.processDocs=function(a,d,k,b,e,l,p,u,x){a=a||1E3;var z=u.new_edits,E=new Nu.Map,G=0,J=d.length;d.forEach(function(K,T){if(K._id&&co.isLocalId(K._id))k[K._deleted?"_removeLocal":"_putLocal"](K,{ctx:e},function(da,fa){l[T]=da||fa;++G===J&&x&&x()});else{var P=K.metadata.id;E.has(P)?(J--,E.get(P).push([K,T])):E.set(P,[[K,T]])}});E.forEach(function(K,T){function P(){++fa<
K.length?da():++G===J&&x&&x()}function da(){var ka=K[fa],za=ka[0];ka=ka[1];if(b.has(T))I7(a,b.get(T),za,l,ka,P,p,z);else{var Ia=co.merge([],za.metadata.rev_tree[0],a);za.metadata.rev_tree=Ia.tree;za.stemmedRevs=Ia.stemmedRevs||[];Ia=co.winningRev(za.metadata);var N=co.isDeleted(za.metadata,Ia);"was_delete"in u&&N?(l[ka]=Do.createError(Do.MISSING_DOC,"deleted"),P()):z&&"missing"===za.metadata.rev_tree[0].ids[1].status?(za=Do.createError(Do.REV_CONFLICT),l[ka]=za,P()):p(za,Ia,N,N,!1,N?0:1,ka,P)}}var fa=
0;da()})};am.updateDoc=I7;var xF={};Object.defineProperty(xF,"__esModule",{value:!0});var fca=VA&&"object"===typeof VA&&"default"in VA?VA["default"]:VA;xF.safeJsonParse=function(a){try{return JSON.parse(a)}catch(d){return fca.parse(a)}};xF.safeJsonStringify=function(a){try{return JSON.stringify(a)}catch(d){return fca.stringify(a)}};var lwa={},mwa=OD(Lva),nwa=OD(ewa),MN=OD(zW),owa=OD(hwa),pwa=OD(kwa),QD=ko,PD=Tm,oq=Nu;ax.prototype.get=function(a,d,k){var b=K7(this,a),e=b.get(d);if(e)return nh.nextTick(function(){k(null,
e)});if(null===e)return nh.nextTick(function(){k({name:"NotFoundError"})});a.get(d,function(l,p){if(l)return"NotFoundError"===l.name&&b.set(d,null),k(l);b.set(d,p);k(null,p)})};ax.prototype.batch=function(a){for(var d=0,k=a.length;d<k;d++){var b=a[d],e=K7(this,b.prefix);"put"===b.type?e.set(b.key,b.value):e.set(b.key,null)}this._batch=this._batch.concat(a)};ax.prototype.execute=function(a,d){for(var k=new oq.Set,b=[],e=this._batch.length-1;0<=e;e--){var l=this._batch[e],p=l.prefix.prefix()[0]+"\u00ff"+
l.key;k.has(p)||(k.add(p),b.push(l))}a.batch(b,d)};var yF=new oq.Map,qwa={encode:xF.safeJsonStringify,decode:xF.safeJsonParse,buffer:!1,type:"cheap-json"},zF=new nh.changesHandler,rwa=lwa=function(a,d){function k(){P.docStore=N.sublevel("document-store",{valueEncoding:qwa});P.bySeqStore=N.sublevel("by-sequence",{valueEncoding:"json"});P.attachmentStore=N.sublevel("attach-store",{valueEncoding:"json"});P.binaryStore=N.sublevel("attach-binary-store",{valueEncoding:"binary"});P.localStore=N.sublevel("local-store",
{valueEncoding:"json"});P.metaStore=N.sublevel("meta-store",{valueEncoding:"json"});"object"===typeof a.migrate?a.migrate.doMigrationTwo(N,P,b):b()}function b(){P.metaStore.get("_local_last_update_seq",function(ia,W){"undefined"===typeof N._updateSeq&&(N._updateSeq=W||0);P.metaStore.get("_local_doc_count",function(ca,sa){N._docCount=ca?0:sa;P.metaStore.get("_local_uuid",function(la,Aa){T=la?nh.uuid():Aa;P.metaStore.put("_local_uuid",T,function(){nh.nextTick(function(){d(null,K)})})})})})}function e(ia){return N.isClosed()?
ia(Error("database is closed")):ia(null,N._docCount)}function l(ia,W){try{ia.apply(null,W)}catch(ca){W[W.length-1](ca)}}function p(){var ia=N._queue.peekFront();"read"===ia.type?u(ia):x(ia)}function u(ia){var W=[ia];ia=1;for(var ca=N._queue.get(ia);"undefined"!==typeof ca&&"read"===ca.type;)W.push(ca),ia++,ca=N._queue.get(ia);var sa=0;W.forEach(function(la){var Aa=la.args,ib=Aa[Aa.length-1];Aa[Aa.length-1]=MN(function(ob){ib.apply(null,ob);++sa===W.length&&nh.nextTick(function(){W.forEach(function(){N._queue.shift()});
N._queue.length&&p()})});l(la.fun,Aa)})}function x(ia){var W=ia.args,ca=W[W.length-1];W[W.length-1]=MN(function(sa){ca.apply(null,sa);nh.nextTick(function(){N._queue.shift();N._queue.length&&p()})});l(ia.fun,W)}function z(ia){return MN(function(W){N._queue.push({fun:ia,args:W,type:"write"});1===N._queue.length&&nh.nextTick(p)})}function E(ia){return MN(function(W){N._queue.push({fun:ia,args:W,type:"read"});1===N._queue.length&&nh.nextTick(p)})}function G(ia){return("0000000000000000"+ia).slice(-16)}
function J(ia,W){"destroy"in ka?ka.destroy(ia,W):W(null)}a=nh.clone(a);var K=this,T,P={},da=a.revs_limit,fa=a.name;"undefined"===typeof a.createIfMissing&&(a.createIfMissing=!0);var ka=a.db,za=nh.functionName(ka);if(yF.has(za))var Ia=yF.get(za);else Ia=new oq.Map,yF.set(za,Ia);if(Ia.has(fa)){var N=Ia.get(fa);k()}else Ia.set(fa,nwa(mwa(ka(fa),a,function(ia){if(ia)return Ia.delete(fa),d(ia);N=Ia.get(fa);N._docCount=-1;N._queue=new owa;"object"===typeof a.migrate?a.migrate.doMigrationOne(fa,N,k):k()})));
K._remote=!1;K.type=function(){return"leveldb"};K._id=function(ia){ia(null,T)};K._info=function(ia){var W={doc_count:N._docCount,update_seq:N._updateSeq,backend_adapter:nh.functionName(ka)};return nh.nextTick(function(){ia(null,W)})};K._get=E(function(ia,W,ca){W=nh.clone(W);P.docStore.get(ia,function(sa,la){if(sa||!la)return ca(Dg.createError(Dg.MISSING_DOC,"missing"));if(W.rev)var Aa=W.latest?QD.latest(W.rev,la):W.rev;else if(Aa=PT(la),"deleted"in la?la.deleted:am.isDeleted(la,Aa))return ca(Dg.createError(Dg.MISSING_DOC,
"deleted"));P.bySeqStore.get(G(la.rev_map[Aa]),function(ib,ob){if(!ob)return ca(Dg.createError(Dg.MISSING_DOC));if("_id"in ob&&ob._id!==la.id)return ca(Error("wrong doc returned"));ob._id=la.id;if("_rev"in ob){if(ob._rev!==Aa)return ca(Error("wrong doc returned"))}else ob._rev=Aa;return ca(null,{doc:ob,metadata:la})})})});K._getAttachment=function(ia,W,ca,sa,la){var Aa=ca.content_type;P.binaryStore.get(ca.digest,function(ib,ob){if(ib)return"NotFoundError"!==ib.name?la(ib):la(null,sa.binary?PD.blob([""],
{type:Aa}):"");sa.binary?la(null,J7(ob,Aa)):la(null,ob.toString("base64"))})};K._bulkDocs=z(function(ia,W,ca){function sa(Ra,Cb){Jc.get(P.attachmentStore,Ra,function(ec){ec?(ec=Dg.createError(Dg.MISSING_STUB,"unknown stub attachment with digest "+Ra),Cb(ec)):Cb()})}function la(Ra){function Cb(){if(++ec===Od.length)return Ra(Bd)}var ec=0,Bd;Od.forEach(function(Ad){if(Ad._id&&am.isLocalId(Ad._id))return Cb();Jc.get(P.docStore,Ad._id,function(Mc,Ue){Mc?"NotFoundError"!==Mc.name&&(Bd=Mc):Yb.set(Ad._id,
Ue);Cb()})})}function Aa(Ra,Cb){var ec=Promise.resolve();Ra.forEach(function(Bd,Ad){ec=ec.then(function(){return new Promise(function(Mc,Ue){K._doCompactionNoLock(Ad,Bd,{ctx:Jc},function(Me){if(Me)return Ue(Me);Mc()})})})});ec.then(function(){Cb()},Cb)}function ib(Ra){var Cb=new oq.Map;Yb.forEach(function(ec,Bd){Cb.set(Bd,QD.compactTree(ec))});Aa(Cb,Ra)}function ob(){Aa(fc,function(Ra){Ra&&Sa(Ra);if(K.auto_compaction)return ib(Sa);Sa()})}function Ea(Ra,Cb,ec,Bd,Ad,Mc,Ue,Me){function Fh(Bi){qi++;Pi||
(Bi?(Pi=Bi,Me(Pi)):qi===ri.length&&Fi())}function ch(Bi,Dj,ek,Ej){return function(fk){ya(Bi,"md5-"+fk,Dj,ek,Ej)}}function Oi(Bi,Dj,ek){return function(Ej){eB.binaryMd5(Ej,ch(Bi,Dj,Ej,ek))}}function Fi(){var Bi=Ra.metadata.rev_map[Ra.metadata.rev];if(Bi)return Me();Bi=++ld;Ra.metadata.rev_map[Ra.metadata.rev]=Ra.metadata.seq=Bi;Bi=[{key:G(Bi),value:Ra.data,prefix:P.bySeqStore,type:"put"},{key:Ra.metadata.id,value:Ra.metadata,prefix:P.docStore,type:"put"}];Jc.batch(Bi);mc[Ue]={ok:!0,id:Ra.metadata.id,
rev:Ra.metadata.rev};Yb.set(Ra.metadata.id,Ra.metadata);Me()}Nb+=Mc;var Pi=null,qi=0;Ra.metadata.winningRev=Cb;Ra.metadata.deleted=ec;Ra.data._id=Ra.metadata.id;Ra.data._rev=Ra.metadata.rev;Bd&&(Ra.data._deleted=!0);Ra.stemmedRevs.length&&fc.set(Ra.metadata.id,Ra.stemmedRevs);var ri=Ra.data._attachments?Object.keys(Ra.data._attachments):[];for(Cb=0;Cb<ri.length;Cb++)if(ec=ri[Cb],Bd=Ra.data._attachments[ec],Bd.stub)ua(Ra.data._id,Ra.data._rev,Bd.digest,Fh);else if("string"===typeof Bd.data){try{var Sj=
PD.atob(Bd.data)}catch(Bi){ca(Dg.createError(Dg.BAD_ARG,"Attachment is not a valid base64 string"));return}Oi(Ra,ec,Fh)(Sj)}else pma(Bd.data,Oi(Ra,ec,Fh));ri.length||Fi()}function ua(Ra,Cb,ec,Bd){function Ad(){return new Promise(function(Me,Fh){Jc.get(P.attachmentStore,ec,function(ch,Oi){if(ch&&"NotFoundError"!==ch.name)return Fh(ch);Me(Oi)})})}function Mc(Me){var Fh=[Ra,Cb].join("@"),ch={};Me?Me.refs&&(ch.refs=Me.refs,ch.refs[Fh]=!0):(ch.refs={},ch.refs[Fh]=!0);return new Promise(function(Oi){Jc.batch([{type:"put",
prefix:P.attachmentStore,key:ec,value:ch}]);Oi(!Me)})}var Ue=Pa[ec]||Promise.resolve();Pa[ec]=Ue.then(function(){return Ad().then(Mc).then(function(Me){Bd(null,Me)},Bd)})}function ya(Ra,Cb,ec,Bd,Ad){ec=Ra.data._attachments[ec];delete ec.data;ec.digest=Cb;ec.length=Bd.length;var Mc=Ra.metadata.id;Ra=Ra.metadata.rev;ec.revpos=parseInt(Ra,10);ua(Mc,Ra,Cb,function(Ue,Me){if(Ue||0===Bd.length||!Me)return Ad(Ue);Jc.batch([{type:"put",prefix:P.binaryStore,key:Cb,value:pwa(Bd,"binary")}]);Ad()})}function Sa(Ra){if(Ra)return nh.nextTick(function(){ca(Ra)});
Jc.batch([{prefix:P.metaStore,type:"put",key:"_local_last_update_seq",value:ld},{prefix:P.metaStore,type:"put",key:"_local_doc_count",value:N._docCount+Nb}]);Jc.execute(N,function(Cb){if(Cb)return ca(Cb);N._docCount+=Nb;N._updateSeq=ld;zF.notify(fa);nh.nextTick(function(){ca(null,mc)})})}var Qb=W.new_edits,mc=Array(ia.docs.length),Yb=new oq.Map,fc=new oq.Map,Jc=new ax,Nb=0,ld=N._updateSeq,Od=ia.docs,ta=Od.map(function(Ra){if(Ra._id&&am.isLocalId(Ra._id))return Ra;Ra=am.parseDoc(Ra,Qb,K.__opts);Ra.metadata&&
!Ra.metadata.rev_map&&(Ra.metadata.rev_map={});return Ra});ia=ta.filter(function(Ra){return Ra.error});if(ia.length)return ca(ia[0]);var Pa={};if(!ta.length)return ca(null,[]);(function(Ra){var Cb=[];Od.forEach(function(Ad){Ad&&Ad._attachments&&Object.keys(Ad._attachments).forEach(function(Mc){Mc=Ad._attachments[Mc];Mc.stub&&Cb.push(Mc.digest)})});if(!Cb.length)return Ra();var ec=0,Bd;Cb.forEach(function(Ad){sa(Ad,function(Mc){Mc&&!Bd&&(Bd=Mc);++ec===Cb.length&&Ra(Bd)})})})(function(Ra){if(Ra)return ca(Ra);
la(function(Cb){if(Cb)return ca(Cb);am.processDocs(da,ta,K,Yb,Jc,mc,Ea,W,ob)})})});K._allDocs=function(ia,W){return"keys"in ia?am.allDocsKeysQuery(this,ia):E(function(ca,sa){ca=nh.clone(ca);e(function(la,Aa){if(la)return sa(la);la={};var ib=ca.skip||0;ca.startkey&&(la.gte=ca.startkey);ca.endkey&&(la.lte=ca.endkey);ca.key&&(la.gte=la.lte=ca.key);if(ca.descending){la.reverse=!0;var ob=la.lte;la.lte=la.gte;la.gte=ob}if("number"===typeof ca.limit)var Ea=ca.limit;if(0===Ea||"gte"in la&&"lte"in la&&la.gte>
la.lte)return la={total_rows:Aa,offset:ca.skip,rows:[]},ca.update_seq&&(la.update_seq=N._updateSeq),sa(null,la);var ua=[],ya=P.docStore.readStream(la),Sa=eca.obj(function(Qb,mc,Yb){function fc(Od){var ta={id:Jc.id,key:Jc.id,value:{rev:Nb}};if(ca.include_docs){ta.doc=Od;ta.doc._rev=ta.value.rev;ca.conflicts&&(Od=QD.collectConflicts(Jc),Od.length&&(ta.doc._conflicts=Od));for(var Pa in ta.doc._attachments)ta.doc._attachments.hasOwnProperty(Pa)&&(ta.doc._attachments[Pa].stub=!0)}if(!1===ca.inclusive_end&&
Jc.id===ca.endkey)return Yb();if(ld)if("ok"===ca.deleted)ta.value.deleted=!0,ta.doc=null;else return Yb();ua.push(ta);Yb()}var Jc=Qb.value,Nb=PT(Jc),ld="deleted"in Jc?Jc.deleted:am.isDeleted(Jc,Nb);if(!ld){if(0<ib--){Yb();return}if("number"===typeof Ea&&0>=Ea--){ya.unpipe();ya.destroy();Yb();return}}else if("ok"!==ca.deleted){Yb();return}ca.include_docs?P.bySeqStore.get(G(Jc.rev_map[Nb]),function(Od,ta){fc(ta)}):fc()},function(Qb){Promise.resolve().then(function(){if(ca.include_docs&&ca.attachments)return QT(ua,
P,ca)}).then(function(){var mc={total_rows:Aa,offset:ca.skip,rows:ua};ca.update_seq&&(mc.update_seq=N._updateSeq);sa(null,mc)},sa);Qb()}).on("unpipe",function(){Sa.end()});ya.on("error",sa);ya.pipe(Sa)})})(ia,W)};K._changes=function(ia){function W(){ia.done=!0;ia.return_docs&&ia.limit&&ia.limit<la.length&&(la.length=ia.limit);Qb.unpipe(mc);Qb.destroy();ia.continuous||ia.cancelled||(ia.include_docs&&ia.attachments&&ia.return_docs?QT(la,P,ia).then(function(){ia.complete(null,{results:la,last_seq:Aa})}):
ia.complete(null,{results:la,last_seq:Aa}))}ia=nh.clone(ia);if(ia.continuous){var ca=fa+":"+nh.uuid();zF.addListener(fa,ca,K,ia);zF.notify(fa);return{cancel:function(){zF.removeListener(fa,ca)}}}var sa=ia.descending,la=[],Aa=ia.since||0,ib=0,ob={reverse:sa};if("limit"in ia&&0<ia.limit)var Ea=ia.limit;ob.reverse||(ob.start=G(ia.since||0));var ua=ia.doc_ids&&new oq.Set(ia.doc_ids),ya=nh.filterChange(ia),Sa=new oq.Map,Qb=P.bySeqStore.readStream(ob),mc=eca.obj(function(Yb,fc,Jc){function Nb(ta){function Pa(Cb){var ec=
ia.processChange(Cb,ta,ia);ec.seq=ta.seq;Cb=ya(ec);if("object"===typeof Cb)return ia.complete(Cb);if(Cb){ib++;if(ia.attachments&&ia.include_docs)QT([ec],P,ia).then(function(){ia.onChange(ec)});else ia.onChange(ec);ia.return_docs&&la.push(ec)}Jc()}var Ra=PT(ta);if(ta.seq!==ld)return Jc();Aa=ld;if(Ra===Od._rev)return Pa(Od);P.bySeqStore.get(G(ta.rev_map[Ra]),function(Cb,ec){Pa(ec)})}if(Ea&&ib>=Ea)return W(),Jc();if(ia.cancelled||ia.done)return Jc();var ld=parseInt(Yb.key,10),Od=Yb.value;if(ld===ia.since&&
!sa||ua&&!ua.has(Od._id))return Jc();if(Yb=Sa.get(Od._id))return Nb(Yb);P.docStore.get(Od._id,function(ta,Pa){if(ia.cancelled||ia.done||N.isClosed()||am.isLocalId(Pa.id))return Jc();Sa.set(Od._id,Pa);Nb(Pa)})},function(Yb){if(ia.cancelled)return Yb();ia.return_docs&&ia.limit&&ia.limit<la.length&&(la.length=ia.limit);Yb()}).on("unpipe",function(){mc.end();W()});Qb.pipe(mc);return{cancel:function(){ia.cancelled=!0;W()}}};K._close=function(ia){if(N.isClosed())return ia(Dg.createError(Dg.NOT_OPEN));N.close(function(W){W?
ia(W):(Ia.delete(fa),ia())})};K._getRevisionTree=function(ia,W){P.docStore.get(ia,function(ca,sa){ca?W(Dg.createError(Dg.MISSING_DOC)):W(null,sa.rev_tree)})};K._doCompaction=z(function(ia,W,ca,sa){K._doCompactionNoLock(ia,W,ca,sa)});K._doCompactionNoLock=function(ia,W,ca,sa){"function"===typeof ca&&(sa=ca,ca={});if(!W.length)return sa();var la=ca.ctx||new ax;la.get(P.docStore,ia,function(Aa,ib){function ob(Yb){Yb&&(mc=Yb);if(++Qb===W.length){if(mc)return sa(mc);ua()}}function Ea(Yb){if(Yb)return sa(Yb);
la.batch(ya);if(ca.ctx)return sa();la.execute(N,sa)}function ua(){function Yb(Od){Od&&(Nb=Od);++Jc===fc.length&&Ea(Nb)}var fc=Object.keys(Sa);if(!fc.length)return Ea();var Jc=0,Nb,ld=new oq.Map;W.forEach(function(Od){ld.set(ia+"@"+Od,!0)});fc.forEach(function(Od){la.get(P.attachmentStore,Od,function(ta,Pa){if(ta)return"NotFoundError"===ta.name?Yb():Yb(ta);ta=Object.keys(Pa.refs||{}).filter(function(Cb){return!ld.has(Cb)});var Ra={};ta.forEach(function(Cb){Ra[Cb]=!0});ta.length?ya.push({key:Od,type:"put",
value:{refs:Ra},prefix:P.attachmentStore}):ya=ya.concat([{key:Od,type:"del",prefix:P.attachmentStore},{key:Od,type:"del",prefix:P.binaryStore}]);Yb()})})}if(Aa)return sa(Aa);Aa=W.map(function(Yb){var fc=ib.rev_map[Yb];delete ib.rev_map[Yb];return fc});QD.traverseRevTree(ib.rev_tree,function(Yb,fc,Jc,Nb,ld){-1!==W.indexOf(fc+"-"+Jc)&&(ld.status="missing")});var ya=[];ya.push({key:ib.id,value:ib,type:"put",prefix:P.docStore});var Sa={},Qb=0,mc;Aa.forEach(function(Yb){ya.push({key:G(Yb),type:"del",prefix:P.bySeqStore});
la.get(P.bySeqStore,G(Yb),function(fc,Jc){if(fc)return"NotFoundError"===fc.name?ob():ob(fc);Object.keys(Jc._attachments||{}).forEach(function(Nb){Sa[Jc._attachments[Nb].digest]=!0});ob()})})})};K._getLocal=function(ia,W){P.localStore.get(ia,function(ca,sa){ca?W(Dg.createError(Dg.MISSING_DOC)):W(null,sa)})};K._putLocal=function(ia,W,ca){"function"===typeof W&&(ca=W,W={});W.ctx?K._putLocalNoLock(ia,W,ca):K._putLocalWithLock(ia,W,ca)};K._putLocalWithLock=z(function(ia,W,ca){K._putLocalNoLock(ia,W,ca)});
K._putLocalNoLock=function(ia,W,ca){delete ia._revisions;var sa=ia._rev,la=ia._id,Aa=W.ctx||new ax;Aa.get(P.localStore,la,function(ib,ob){if(ib&&sa||ob&&ob._rev!==sa)return ca(Dg.createError(Dg.REV_CONFLICT));ia._rev=sa?"0-"+(parseInt(sa.split("-")[1],10)+1):"0-1";Aa.batch([{type:"put",prefix:P.localStore,key:la,value:ia}]);var Ea={ok:!0,id:ia._id,rev:ia._rev};if(W.ctx)return ca(null,Ea);Aa.execute(N,function(ua){if(ua)return ca(ua);ca(null,Ea)})})};K._removeLocal=function(ia,W,ca){"function"===typeof W&&
(ca=W,W={});W.ctx?K._removeLocalNoLock(ia,W,ca):K._removeLocalWithLock(ia,W,ca)};K._removeLocalWithLock=z(function(ia,W,ca){K._removeLocalNoLock(ia,W,ca)});K._removeLocalNoLock=function(ia,W,ca){var sa=W.ctx||new ax;sa.get(P.localStore,ia._id,function(la,Aa){if(la)return"NotFoundError"!==la.name?ca(la):ca(Dg.createError(Dg.MISSING_DOC));if(Aa._rev!==ia._rev)return ca(Dg.createError(Dg.REV_CONFLICT));sa.batch([{prefix:P.localStore,type:"del",key:ia._id}]);var ib={ok:!0,id:ia._id,rev:"0-0"};if(W.ctx)return ca(null,
ib);sa.execute(N,function(ob){if(ob)return ca(ob);ca(null,ib)})})};K._destroy=function(ia,W){ia=nh.functionName(ka);if(yF.has(ia))var ca=yF.get(ia);else return J(fa,W);ca.has(fa)?(zF.removeAllListeners(fa),ca.get(fa).close(function(){ca.delete(fa);J(fa,W)})):J(fa,W)}},bx="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,swa={},gca=Li;RT.prototype.next=function(a){var d=this||bx;if("function"!=typeof a)throw Error("next() requires a callback argument");if(d._ended)return a(Error("cannot call next() after end()"));
if(d._nexting)return a(Error("cannot call next() before previous next() has completed"));d._nexting=!0;if("function"==typeof d._next)return d._next(function(){d._nexting=!1;a.apply(null,arguments)});gca.nextTick(function(){d._nexting=!1;a()})};RT.prototype.end=function(a){if("function"!=typeof a)throw Error("end() requires a callback argument");if((this||bx)._ended)return a(Error("end() already called on iterator"));(this||bx)._ended=!0;if("function"==typeof(this||bx)._end)return this._end(a);gca.nextTick(a)};
var hca=swa=RT,Nk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,twa={},uwa=Li;ou.prototype._serializeKey=function(a){return(this||Nk)._db._serializeKey(a)};ou.prototype._serializeValue=function(a){return(this||Nk)._db._serializeValue(a)};ou.prototype._checkWritten=function(){if((this||Nk)._written)throw Error("write() already called on this batch");};ou.prototype.put=function(a,d){this._checkWritten();var k=(this||Nk)._db._checkKey(a,"key",(this||Nk)._db._isBuffer);
if(k)throw k;a=this._serializeKey(a);d=this._serializeValue(d);"function"==typeof(this||Nk)._put?this._put(a,d):(this||Nk)._operations.push({type:"put",key:a,value:d});return this||Nk};ou.prototype.del=function(a){this._checkWritten();var d=(this||Nk)._db._checkKey(a,"key",(this||Nk)._db._isBuffer);if(d)throw d;a=this._serializeKey(a);"function"==typeof(this||Nk)._del?this._del(a):(this||Nk)._operations.push({type:"del",key:a});return this||Nk};ou.prototype.clear=function(){this._checkWritten();(this||
Nk)._operations=[];"function"==typeof(this||Nk)._clear&&this._clear();return this||Nk};ou.prototype.write=function(a,d){this._checkWritten();"function"==typeof a&&(d=a);if("function"!=typeof d)throw Error("write() requires a callback argument");"object"!=typeof a&&(a={});(this||Nk)._written=!0;if("function"==typeof(this||Nk)._write)return this._write(d);if("function"==typeof(this||Nk)._db._batch)return(this||Nk)._db._batch((this||Nk)._operations,a,d);uwa.nextTick(d)};var vwa=twa=ou,ml="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ica={},wwa=Rh.Buffer,Wu=Li;xn.prototype.open=function(a,d){var k=this||ml,b=(this||ml).status;"function"==typeof a&&(d=a);if("function"!=typeof d)throw Error("open() requires a callback argument");"object"!=typeof a&&(a={});a.createIfMissing=0!=a.createIfMissing;a.errorIfExists=!!a.errorIfExists;"function"==typeof(this||ml)._open?((this||ml).status="opening",this._open(a,function(e){if(e)return k.status=b,d(e);k.status="open";d()})):
((this||ml).status="open",Wu.nextTick(d))};xn.prototype.close=function(a){var d=this||ml,k=(this||ml).status;if("function"!=typeof a)throw Error("close() requires a callback argument");"function"==typeof(this||ml)._close?((this||ml).status="closing",this._close(function(b){if(b)return d.status=k,a(b);d.status="closed";a()})):((this||ml).status="closed",Wu.nextTick(a))};xn.prototype.get=function(a,d,k){var b;"function"==typeof d&&(k=d);if("function"!=typeof k)throw Error("get() requires a callback argument");
if(b=this._checkKey(a,"key"))return k(b);a=this._serializeKey(a);"object"!=typeof d&&(d={});d.asBuffer=0!=d.asBuffer;if("function"==typeof(this||ml)._get)return this._get(a,d,k);Wu.nextTick(function(){k(Error("NotFound"))})};xn.prototype.put=function(a,d,k,b){var e;"function"==typeof k&&(b=k);if("function"!=typeof b)throw Error("put() requires a callback argument");if(e=this._checkKey(a,"key"))return b(e);a=this._serializeKey(a);d=this._serializeValue(d);"object"!=typeof k&&(k={});if("function"==
typeof(this||ml)._put)return this._put(a,d,k,b);Wu.nextTick(b)};xn.prototype.del=function(a,d,k){var b;"function"==typeof d&&(k=d);if("function"!=typeof k)throw Error("del() requires a callback argument");if(b=this._checkKey(a,"key"))return k(b);a=this._serializeKey(a);"object"!=typeof d&&(d={});if("function"==typeof(this||ml)._del)return this._del(a,d,k);Wu.nextTick(k)};xn.prototype.batch=function(a,d,k){if(!arguments.length)return this._chainedBatch();"function"==typeof d&&(k=d);"function"==typeof a&&
(k=a);if("function"!=typeof k)throw Error("batch(array) requires a callback argument");if(!Array.isArray(a))return k(Error("batch(array) requires an array argument"));d&&"object"==typeof d||(d={});for(var b=0,e=a.length,l,p;b<e;b++)if(l=a[b],"object"==typeof l&&((p=this._checkKey(l.type,"type"))||(p=this._checkKey(l.key,"key"))))return k(p);if("function"==typeof(this||ml)._batch)return this._batch(a,d,k);Wu.nextTick(k)};xn.prototype.approximateSize=function(a,d,k){if(null==a||null==d||"function"==
typeof a||"function"==typeof d)throw Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof k)throw Error("approximateSize() requires a callback argument");a=this._serializeKey(a);d=this._serializeKey(d);if("function"==typeof(this||ml)._approximateSize)return this._approximateSize(a,d,k);Wu.nextTick(function(){k(null,0)})};xn.prototype._setupIteratorOptions=function(a){var d=this||ml;a=Uu(a);"start end gt gte lt lte".split(" ").forEach(function(k){a[k]&&
d._isBuffer(a[k])&&0===a[k].length&&delete a[k]});a.reverse=!!a.reverse;a.keys=0!=a.keys;a.values=0!=a.values;a.limit="limit"in a?a.limit:-1;a.keyAsBuffer=0!=a.keyAsBuffer;a.valueAsBuffer=0!=a.valueAsBuffer;return a};xn.prototype.iterator=function(a){"object"!=typeof a&&(a={});a=this._setupIteratorOptions(a);return"function"==typeof(this||ml)._iterator?this._iterator(a):new hca(this||ml)};xn.prototype._chainedBatch=function(){return new vwa(this||ml)};xn.prototype._isBuffer=function(a){return wwa.isBuffer(a)};
xn.prototype._serializeKey=function(a){return this._isBuffer(a)?a:String(a)};xn.prototype._serializeValue=function(a){return null==a?"":this._isBuffer(a)||Wu.browser?a:String(a)};xn.prototype._checkKey=function(a,d){if(null===a||void 0===a)return Error(d+" cannot be `null` or `undefined`");if(this._isBuffer(a)&&0===a.length)return Error(d+" cannot be an empty Buffer");if(""===String(a))return Error(d+" cannot be an empty String")};ica=xn;var xwa=ica;var jca={};jca=function(a){return new qA(a||rma,
null)};var In=qA.prototype;Object.defineProperty(In,"keys",{get:function(){var a=[];this.forEach(function(d,k){a.push(d)});return a}});Object.defineProperty(In,"values",{get:function(){var a=[];this.forEach(function(d,k){a.push(k)});return a}});Object.defineProperty(In,"length",{get:function(){return this.root?this.root._count:0}});In.insert=function(a,d){for(var k=this._compare,b=this.root,e=[],l=[];b;){var p=k(a,b.key);e.push(b);l.push(p);b=0>=p?b.left:b.right}e.push(new Eo(0,a,d,null,null,1));
for(a=e.length-2;0<=a;--a)b=e[a],e[a]=0>=l[a]?new Eo(b._color,b.key,b.value,e[a+1],b.right,b._count+1):new Eo(b._color,b.key,b.value,b.left,e[a+1],b._count+1);for(a=e.length-1;1<a;--a){l=e[a-1];b=e[a];if(1===l._color||1===b._color)break;d=e[a-2];if(d.left===l)if(l.left===b)if((p=d.right)&&0===p._color)l._color=1,d.right=pu(1,p),d._color=0,--a;else{d._color=0;d.left=l.right;l._color=1;l.right=d;e[a-2]=l;e[a-1]=b;Ok(d);Ok(l);3<=a&&(a=e[a-3],a.left===d?a.left=l:a.right=l);break}else if((p=d.right)&&
0===p._color)l._color=1,d.right=pu(1,p),d._color=0,--a;else{l.right=b.left;d._color=0;d.left=b.right;b._color=1;b.left=l;b.right=d;e[a-2]=b;e[a-1]=l;Ok(d);Ok(l);Ok(b);3<=a&&(a=e[a-3],a.left===d?a.left=b:a.right=b);break}else if(l.right===b)if((p=d.left)&&0===p._color)l._color=1,d.left=pu(1,p),d._color=0,--a;else{d._color=0;d.right=l.left;l._color=1;l.left=d;e[a-2]=l;e[a-1]=b;Ok(d);Ok(l);3<=a&&(a=e[a-3],a.right===d?a.right=l:a.left=l);break}else if((p=d.left)&&0===p._color)l._color=1,d.left=pu(1,p),
d._color=0,--a;else{l.left=b.right;d._color=0;d.right=b.left;b._color=1;b.right=l;b.left=d;e[a-2]=b;e[a-1]=l;Ok(d);Ok(l);Ok(b);3<=a&&(a=e[a-3],a.right===d?a.right=b:a.left=b);break}}e[0]._color=1;return new qA(k,e[0])};In.forEach=function(a,d,k){if(this.root)switch(arguments.length){case 1:return ST(a,this.root);case 2:return TT(d,this._compare,a,this.root);case 3:if(!(0<=this._compare(d,k)))return UT(d,k,this._compare,a,this.root)}};Object.defineProperty(In,"begin",{get:function(){for(var a=[],d=
this.root;d;)a.push(d),d=d.left;return new Fo(this,a)}});Object.defineProperty(In,"end",{get:function(){for(var a=[],d=this.root;d;)a.push(d),d=d.right;return new Fo(this,a)}});In.at=function(a){if(0>a)return new Fo(this,[]);for(var d=this.root,k=[];;){k.push(d);if(d.left){if(a<d.left._count){d=d.left;continue}a-=d.left._count}if(!a)return new Fo(this,k);--a;if(d.right){if(a>=d.right._count)break;d=d.right}else break}return new Fo(this,[])};In.ge=function(a){for(var d=this._compare,k=this.root,b=
[],e=0;k;){var l=d(a,k.key);b.push(k);0>=l&&(e=b.length);k=0>=l?k.left:k.right}b.length=e;return new Fo(this,b)};In.gt=function(a){for(var d=this._compare,k=this.root,b=[],e=0;k;){var l=d(a,k.key);b.push(k);0>l&&(e=b.length);k=0>l?k.left:k.right}b.length=e;return new Fo(this,b)};In.lt=function(a){for(var d=this._compare,k=this.root,b=[],e=0;k;){var l=d(a,k.key);b.push(k);0<l&&(e=b.length);k=0>=l?k.left:k.right}b.length=e;return new Fo(this,b)};In.le=function(a){for(var d=this._compare,k=this.root,
b=[],e=0;k;){var l=d(a,k.key);b.push(k);0<=l&&(e=b.length);k=0>l?k.left:k.right}b.length=e;return new Fo(this,b)};In.find=function(a){for(var d=this._compare,k=this.root,b=[];k;){var e=d(a,k.key);b.push(k);if(0===e)return new Fo(this,b);k=0>=e?k.left:k.right}return new Fo(this,[])};In.remove=function(a){return(a=this.find(a))?a.remove():this};In.get=function(a){for(var d=this._compare,k=this.root;k;){var b=d(a,k.key);if(0===b)return k.value;k=0>=b?k.left:k.right}};var Lp=Fo.prototype;Object.defineProperty(Lp,
"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(Lp,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});Lp.clone=function(){return new Fo(this.tree,this._stack.slice())};Lp.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var d=Array(a.length),k=a[a.length-1];d[d.length-1]=new Eo(k._color,k.key,k.value,k.left,k.right,k._count);for(var b=a.length-2;0<=b;--b)k=a[b],d[b]=k.left===a[b+1]?new Eo(k._color,
k.key,k.value,d[b+1],k.right,k._count):new Eo(k._color,k.key,k.value,k.left,d[b+1],k._count);k=d[d.length-1];if(k.left&&k.right){a=d.length;for(k=k.left;k.right;)d.push(k),k=k.right;b=d[a-1];d.push(new Eo(k._color,b.key,b.value,k.left,k.right,k._count));d[a-1].key=k.key;d[a-1].value=k.value;for(b=d.length-2;b>=a;--b)k=d[b],d[b]=new Eo(k._color,k.key,k.value,k.left,d[b+1],k._count);d[a-1].left=d[a]}k=d[d.length-1];if(0===k._color)for(b=d[d.length-2],b.left===k?b.left=null:b.right===k&&(b.right=null),
d.pop(),b=0;b<d.length;++b)d[b]._count--;else if(k.left||k.right)for(k.left?L7(k,k.left):k.right&&L7(k,k.right),k._color=1,b=0;b<d.length-1;++b)d[b]._count--;else{if(1===d.length)return new qA(this.tree._compare,null);for(b=0;b<d.length;++b)d[b]._count--;b=d[d.length-2];for(var e,l,p,u=d.length-1;0<=u;--u){a=d[u];if(0===u){a._color=1;break}e=d[u-1];if(e.left===a){l=e.right;if(l.right&&0===l.right._color){l=e.right=wr(l);p=l.right=wr(l.right);e.right=l.left;l.left=e;l.right=p;l._color=e._color;a._color=
1;e._color=1;p._color=1;Ok(e);Ok(l);if(1<u){var x=d[u-2];x.left===e?x.left=l:x.right=l}d[u-1]=l;break}else if(l.left&&0===l.left._color){l=e.right=wr(l);p=l.left=wr(l.left);e.right=p.left;l.left=p.right;p.left=e;p.right=l;p._color=e._color;e._color=1;l._color=1;a._color=1;Ok(e);Ok(l);Ok(p);1<u&&(x=d[u-2],x.left===e?x.left=p:x.right=p);d[u-1]=p;break}if(1===l._color)if(0===e._color){e._color=1;e.right=pu(0,l);break}else e.right=pu(0,l);else l=wr(l),e.right=l.left,l.left=e,l._color=e._color,e._color=
0,Ok(e),Ok(l),1<u&&(x=d[u-2],x.left===e?x.left=l:x.right=l),d[u-1]=l,d[u]=e,u+1<d.length?d[u+1]=a:d.push(a),u+=2}else{l=e.left;if(l.left&&0===l.left._color){l=e.left=wr(l);p=l.left=wr(l.left);e.left=l.right;l.right=e;l.left=p;l._color=e._color;a._color=1;e._color=1;p._color=1;Ok(e);Ok(l);1<u&&(x=d[u-2],x.right===e?x.right=l:x.left=l);d[u-1]=l;break}else if(l.right&&0===l.right._color){l=e.left=wr(l);p=l.right=wr(l.right);e.left=p.right;l.right=p.left;p.right=e;p.left=l;p._color=e._color;e._color=
1;l._color=1;a._color=1;Ok(e);Ok(l);Ok(p);1<u&&(x=d[u-2],x.right===e?x.right=p:x.left=p);d[u-1]=p;break}if(1===l._color)if(0===e._color){e._color=1;e.left=pu(0,l);break}else e.left=pu(0,l);else l=wr(l),e.left=l.right,l.right=e,l._color=e._color,e._color=0,Ok(e),Ok(l),1<u&&(x=d[u-2],x.right===e?x.right=l:x.left=l),d[u-1]=l,d[u]=e,u+1<d.length?d[u+1]=a:d.push(a),u+=2}}b.left===k?b.left=null:b.right=null}return new qA(this.tree._compare,d[0])};Object.defineProperty(Lp,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-
1].key},enumerable:!0});Object.defineProperty(Lp,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(Lp,"index",{get:function(){var a=0,d=this._stack;if(0===d.length)return(a=this.tree.root)?a._count:0;d[d.length-1].left&&(a=d[d.length-1].left._count);for(var k=d.length-2;0<=k;--k)d[k+1]===d[k].right&&(++a,d[k].left&&(a+=d[k].left._count));return a},enumerable:!0});Lp.next=function(){var a=this._stack;if(0!==a.length){var d=
a[a.length-1];if(d.right)for(d=d.right;d;)a.push(d),d=d.left;else for(a.pop();0<a.length&&a[a.length-1].right===d;)d=a[a.length-1],a.pop()}};Object.defineProperty(Lp,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var d=a.length-1;0<d;--d)if(a[d-1].left===a[d])return!0;return!1}});Lp.update=function(a){var d=this._stack;if(0===d.length)throw Error("Can't update empty node!");var k=Array(d.length),b=d[d.length-1];k[k.length-1]=new Eo(b._color,
b.key,a,b.left,b.right,b._count);for(a=d.length-2;0<=a;--a)b=d[a],k[a]=b.left===d[a+1]?new Eo(b._color,b.key,b.value,k[a+1],b.right,b._count):new Eo(b._color,b.key,b.value,b.left,k[a+1],b._count);return new qA(this.tree._compare,k[0])};Lp.prev=function(){var a=this._stack;if(0!==a.length){var d=a[a.length-1];if(d.left)for(d=d.left;d;)a.push(d),d=d.right;else for(a.pop();0<a.length&&a[a.length-1].left===d;)d=a[a.length-1],a.pop()}};Object.defineProperty(Lp,"hasPrev",{get:function(){var a=this._stack;
if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var d=a.length-1;0<d;--d)if(a[d-1].right===a[d])return!0;return!1}});var ywa=jca,NN={},ON=Rh,Os=ON.Buffer;Os.from&&Os.alloc&&Os.allocUnsafe&&Os.allocUnsafeSlow?NN=ON:(M7(ON,NN),NN.Buffer=rA);M7(Os,rA);rA.from=function(a,d,k){if("number"===typeof a)throw new TypeError("Argument must not be a number");return Os(a,d,k)};rA.alloc=function(a,d,k){if("number"!==typeof a)throw new TypeError("Argument must be a number");a=Os(a);void 0!==d?"string"===
typeof k?a.fill(d,k):a.fill(d):a.fill(0);return a};rA.allocUnsafe=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return Os(a)};rA.allocUnsafeSlow=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return ON.SlowBuffer(a)};var Jf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,zwa={},kca=Gk,O7=xwa,N7=hca,Go=fl,wma=ywa,PN=NN.Buffer,sA={};kca(WJ,N7);WJ.prototype._next=function(a){if((this||Jf)._done++>=
(this||Jf)._limit||!(this||Jf)._tree.valid)return qj(a);var d=(this||Jf)._tree.key;var k=(this||Jf)._tree.value;if(!this._test(d))return qj(a);(this||Jf).keyAsBuffer&&(d=PN.from(d));(this||Jf).valueAsBuffer&&(k=PN.from(k));(this||Jf)._tree[(this||Jf)._incr]();qj(function(){a(null,d,k)})};WJ.prototype._test=function(){return!0};eo.clearGlobalStore=function(a){a?Object.keys(sA).forEach(function(d){delete sA[d]}):sA={}};kca(eo,O7);eo.prototype._open=function(a,d){var k=this||Jf;qj(function(){d(null,
k)})};eo.prototype._put=function(a,d,k,b){if("undefined"===typeof d||null===d)d="";k=(this||Jf)._store[(this||Jf)._location].find(a);(this||Jf)._store[(this||Jf)._location]=k.valid?k.update(d):(this||Jf)._store[(this||Jf)._location].insert(a,d);qj(b)};eo.prototype._get=function(a,d,k){var b=(this||Jf)._store[(this||Jf)._location].get(a);if("undefined"===typeof b)return qj(function(){k(Error("NotFound"))});!1===d.asBuffer||this._isBuffer(b)||(b=PN.from(String(b)));qj(function(){k(null,b)})};eo.prototype._del=
function(a,d,k){(this||Jf)._store[(this||Jf)._location]=(this||Jf)._store[(this||Jf)._location].remove(a);qj(k)};eo.prototype._batch=function(a,d,k){d=-1;for(var b,e,l,p=a.length,u=(this||Jf)._store[(this||Jf)._location];++d<p;)a[d]&&(b=this._isBuffer(a[d].key)?a[d].key:String(a[d].key),l=u.find(b),"put"===a[d].type?(e=this._isBuffer(a[d].value)?a[d].value:String(a[d].value),u=l.valid?l.update(e):u.insert(b,e)):u=l.remove());(this||Jf)._store[(this||Jf)._location]=u;qj(k)};eo.prototype._iterator=
function(a){return new WJ(this||Jf,a)};eo.prototype._isBuffer=function(a){return PN.isBuffer(a)};eo.destroy=function(a,d){a="$"+a;a in sA&&delete sA[a];qj(d)};var Awa=zwa=eo.default=eo,Bwa={},xma=nh,zma=P7(rwa),yma=P7(Awa);VT.valid=function(){return!0};VT.use_prefix=!1;var Cwa=Bwa=function(a){a.adapter("memory",VT,!0)},Ah=lively.FreezerRuntime.recorderFor("lively.storage/database.js");Ah.nodejsRequire=function(a){if(!Ah.isNode)throw Error("nodejsRequire can only be used in nodejs!");return"undefined"!==
typeof System?System._nodeRequire(a):Ah.require("module")._load(a)};Ah.nodejs_leveldbPath=function(a){if(a.startsWith("/"))return a;if(a.match(/[^\/]+:\/\//))return a.startsWith("file:")&&(a=a.replace(/^file:\/\//,"")),a;if(!Ah.isNode)throw Error("nodejs_leveldbPath called under non-nodejs environment");var d="undefined"!==typeof System&&System.baseURL.startsWith("file://")?System.baseURL.replace("file://",""):Ah.GLOBAL.process.cwd(),k=Ah.nodejsRequire("path").join,b=Ah.nodejsRequire("fs"),e=b.mkdirSync,
l=b.existsSync;b=b.readFileSync;if(a.includes("/"))return k(d,a);try{var p=b(k(d,"../package.json")),u=JSON.parse(p);if("lively.web"===u.name||"lively.next"===u.name){var x=k(d,"../.livelydbs");l(x)||e(x);return k(x,a)}}catch(z){}d=k(d,".livelydbs");l(d)||e(d);return k(d,a)};Ah.nodejs_attemptToLoadProperPouchDB=function(){if(!Ah.isNode)throw Error("nodejs_attemptToLoadProperPouchDB called under non-nodejs environment");if("undefined"!==typeof System){var a=System._nodeRequire("path").join,d=System.normalizeSync("lively.storage/index.js");
d=System.normalizeSync("pouchdb",d).replace(/file:\/\//,"");a=a(d,"../../lib/index.js");try{return Ah.PouchDB=System._nodeRequire(a),Ah.PouchDB.plugin(Ah.pouchdbAdapterMem),!0}catch(k){return!1}}try{return Ah.PouchDB=Ah.require("pouchdb"),Ah.PouchDB.plugin(Ah.pouchdbAdapterMem),!0}catch(k){return!1}};Ah._PouchDB=Ira;Ah.pouchdbAdapterMem=Cwa;Ah.Path=Qh;Ah.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Ah.isNode="undefined"!==typeof global&&
"undefined"!==typeof Ah.process;Ah.PouchDB=Ah._PouchDB;Ah.PouchDB.plugin&&Ah.pouchdbAdapterMem&&Ah.PouchDB.plugin(Ah.pouchdbAdapterMem);Ah.createPouchDB=Ah.isNode?function(){var a=!1,d=!1;return function(k,b){b=void 0===b?{}:b;a||(a=!0,d=Ah.nodejs_attemptToLoadProperPouchDB());b.adapter||(b.adapter=k.startsWith("http")?"http":d?"leveldb":"memory");"leveldb"==b.adapter&&(k=Ah.nodejs_leveldbPath(k));b=Object.assign({},b,{name:k});return new Ah.PouchDB(b)}}():function(a,d){return new Ah.PouchDB(Object.assign({name:a},
d))};var jh=function(a,d){d=void 0===d?{}:d;this.name=a;this.options=d;this._pouchdb=null};jh.findDB=function(a){return this.databases.get(a)};jh.ensureDB=function(a,d){var k=this.findDB(a);if(k)return k;k=new this(a,d);this.databases.set(a,k);a.endsWith("lively.storage-meta")||this.createMetaEntryForDB(a,d);return k};jh.knownDBs=function(a,d){return Ah.Database.ensureDB("lively.storage-meta").getAll().then(function(k){return k.map(function(b){return b._id})})};jh.createMetaEntryForDB=function(a,
d){var k=Ah.Database.ensureDB("lively.storage-meta");k.has(a).then(function(b){return!b&&k.set(a,{created:Date.now(),options:d})})};jh.knowsDB=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(k=d.ensureDB(a),e.yield(k.docCount(),2)):3!=e.nextAddress?(b=e.yieldResult,0<b?e.return(!0):e.yield(k.destroy(),3)):e.return(!1)})};jh.prototype.close=function(){this._pouchdb&&(this._pouchdb.close(),delete this._pouchdb)};jh.prototype.isDestroyed=
function(){return!!this.pouchdb._destroyed};jh.prototype.destroy=function(a){this.constructor.databases.delete(this.name);return this.isDestroyed()?{ok:!0}:this.pouchdb.destroy(a)};jh.prototype.update=function(a,d,k,b){b=void 0===b?0:b;var e=this,l,p,u,x,z,E,G,J,K,T,P,da,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ka){switch(ka.nextAddress){case 1:return l=k=k||{},p=void 0===l.ensure?!0:l.ensure,u=void 0===l.retryOnConflict?!0:l.retryOnConflict,x=void 0===l.maxUpdateAttempts?10:
l.maxUpdateAttempts,z={latest:!0},E=e,G=E.pouchdb,ka.setCatchFinallyBlocks(2),ka.yield(G.get(a,z),4);case 4:J=ka.yieldResult;ka.leaveTryBlock(3);break;case 2:if(T=ka.enterCatchBlock(),"not_found"!==T.name||!p)throw T;case 3:return ka.yield(d(J),5);case 5:K=ka.yieldResult;if(!K||"object"!==typeof K)return ka.return(null);K._id!==a&&(K._id=a);J&&K._rev!==J._rev&&(K._rev=J._rev);ka.setCatchFinallyBlocks(6);return ka.yield(G.put(K),8);case 8:return P=ka.yieldResult,da=P.rev,ka.return(Object.assign(K,
{_rev:da}));case 6:fa=ka.enterCatchBlock();if("conflict"===fa.name&&u&&b<x)return ka.return(e.update(a,d,k,b+1));throw fa;}})};jh.prototype.mixin=function(a,d,k){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(b.update(a,function(l){return Object.assign(l||{_id:a},d)},k))})};jh.prototype.set=function(a,d,k){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(b.update(a,function(l){return d},k))})};jh.prototype.get=function(a,
d){d=void 0===d?{}:d;var k=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.setCatchFinallyBlocks(2),e.yield(k.pouchdb.get(a,d),4);if(2!=e.nextAddress)return e.return(e.yieldResult);b=e.enterCatchBlock();if("not_found"===b.name)return e.return(void 0);throw b;})};jh.prototype.has=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?k.yield(d.get(a),2):k.return(!!k.yieldResult)})};jh.prototype.add=
function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d.pouchdb.post(a))})};jh.prototype.docList=function(a){a=void 0===a?{}:a;var d=this,k,b,e,l,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return E.yield(d.pouchdb.allDocs(a),2);k=E.yieldResult;b=k.rows;e=[];for(l=0;l<b.length;l++)p=b[l],u=p.id,x=p.value,z=x.rev,e.push({id:u,rev:z});return E.return(e)})};jh.prototype.docCount=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==
k.nextAddress)return k.yield(a.pouchdb.allDocs(),2);d=k.yieldResult;return k.return(d.rows.length)})};jh.prototype.revList=function(a){var d=this,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(d.pouchdb.get(a,{revs:!0}),2);k=p.yieldResult;b=k._revisions;e=b.start;l=b.ids;return p.return(l.map(function(u){return e--+"-"+u}))})};jh.prototype.getAllRevisions=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){return 1==
x.nextAddress?(b=d,e=void 0===b.skip?0:b.skip,l=void 0===b.limit?0:b.limit,x.yield(k.revList(a),2)):3!=x.nextAddress?(p=x.yieldResult,0<e&&(p=p.slice(e)),0<l&&(p=p.slice(0,l)),u=p.map(function(z){return{rev:z,id:a}}),x.yield(k.getDocuments(u),3)):x.return(x.yieldResult)})};jh.prototype.getAll=function(a){a=void 0===a?{}:a;var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(d.pouchdb.allDocs(Object.assign({},a,{include_docs:!0})),2);k=e.yieldResult;
b=k.rows;return e.return(b.map(function(l){return l.doc}))})};jh.prototype.setDocuments=function(a,d){var k=this,b,e,l,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(k.pouchdb.bulkDocs(a,d),2);case 2:b=E.yieldResult,e=0;case 3:if(!(e<b.length)){E.jumpTo(5);break}l=a[e];p=b[e];if(p.ok||"conflict"!==p.name||l._rev){E.jumpTo(4);break}return E.yield(k.set(l._id,l),7);case 7:u=E.yieldResult,x=u._id,z=u._rev,b[e]={ok:!0,id:x,rev:z};case 4:e++;
E.jumpTo(3);break;case 5:return E.return(b)}})};jh.prototype.updateDocuments=function(a,d,k){var b=this,e,l,p,u,x,z,E,G,J,K,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:return P.yield(b.pouchdb.bulkDocs(a,k),2);case 2:e=P.yieldResult,l=[],p={},u=0;case 3:if(!(u<e.length)){if(!l.length){P.jumpTo(8);break}J=Object;K=J.assign;T=p;return P.yield(b.updateDocuments(l,d,k),9)}x=a[u];z=e[u];p[z._id||x._id]=z;if(z.ok||"conflict"!==z.name){P.jumpTo(4);break}return P.yield(b.get(x._id),
7);case 7:if(E=P.yieldResult,G=d(E,x))G._id||(G._id=x._id),G._rev||(G._rev=E._rev),l.push(G);case 4:u++;P.jumpTo(3);break;case 9:p=K.call(J,{},T,{},P.yieldResult);case 8:return P.return(p)}})};jh.prototype.getDocuments=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p,u,x,z,E,G,J,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){if(1==T.nextAddress)return b=d,e=void 0===b.ignoreErrors?!0:b.ignoreErrors,T.yield(k.pouchdb.bulkGet({docs:a}),2);l=T.yieldResult;p=l.results;u=[];for(x=0;x<
p.length;x++)for(z=p[x],E=z.docs,G=z.id,console.assert(1===E.length,"getDocuments: expected only one doc for "+G),J=0;J<E.length;J++)K=E[J],e&&!K.ok||u.push(K.ok||K.error||K);return T.return(u)})};jh.prototype.query=function(a,d){return this.pouchdb.query(a,d)};jh.prototype.remove=function(a,d,k){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return"undefined"!==typeof d?(e={_id:a,_rev:d},p.jumpTo(2)):p.yield(b.get(a),3);2!=p.nextAddress&&(e=p.yieldResult);
l=e;return p.return(l?b.pouchdb.remove(l):void 0)})};jh.prototype.removeAll=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(d=a.pouchdb,b.yield(d.allDocs(),2)):3!=b.nextAddress?(k=b.yieldResult,b.yield(Promise.all(k.rows.map(function(e){return d.remove(e.id,e.value.rev)})),3)):b.return(b.yieldResult)})};jh.prototype.replicateTo=function(a,d){a instanceof Ah.Database&&(a=a.pouchdb);return this.pouchdb.replicate.to(a,d)};jh.prototype.replicateFrom=
function(a,d){a instanceof Ah.Database&&(a=a.pouchdb);return this.pouchdb.replicate.from(a,d)};jh.prototype.sync=function(a,d){a instanceof Ah.Database&&(a=a.pouchdb);return this.pouchdb.sync(a,d)};jh.prototype.getConflicts=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(d.pouchdb.query("conflict_index/conflict_index",Object.assign({reduce:!1,include_docs:!0,conflicts:!0},a)),2);k=e.yieldResult;b=k.rows;return e.return(b.map(function(l){var p=
{id:l.id,rev:l.doc._rev,doc:l.doc};l.doc._conflicts&&(p.conflicts=l.doc._conflicts,delete l.doc._conflicts);return p}))})};jh.prototype.resolveConflicts=function(a,d){var k=this,b,e,l,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(k.pouchdb.get(a,{conflicts:!0}),2);case 2:return b=E.yieldResult,e=b._conflicts.map(function(G){return{id:a,rev:G}}),E.yield(k.getDocuments(e),3);case 3:l=E.yieldResult,p=b,u=$jscomp.makeIterator(l),x=u.next();
case 4:if(x.done){E.jumpTo(6);break}z=x.value;return E.yield(d(p,z),7);case 7:return(p=E.yieldResult)?E.yield(k.set(a,p),8):E.return(null);case 8:return p=E.yieldResult,E.yield(k.pouchdb.remove(z),5);case 5:x=u.next();E.jumpTo(4);break;case 6:return E.return(p)}})};jh.prototype.diffWith=function(a){var d=this,k,b,e,l,p,u,x,z,E,G,J,K,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(1==P.nextAddress)return P.yield(a.docList(),2);if(3!=P.nextAddress)return k=P.yieldResult,P.yield(d.docList(),
3);b=P.yieldResult;e=k.reduce(function(da,fa){var ka={};return Object.assign(da,(ka[fa.id]=fa.rev,ka))},{});l=b.reduce(function(da,fa){var ka={};return Object.assign(da,(ka[fa.id]=fa.rev,ka))},{});p=[];u=[];x=[];for(z in e)E=e[z],(G=l[z])?E!=G&&x.push({right:{id:z,rev:E},left:{id:z,rev:G}}):u.push({id:z,rev:E});for(J in l)K=l[J],(T=e[J])||p.push({id:J,rev:K});return P.return({inLeft:p,inRight:u,changed:x})})};jh.loadDump=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){return 1==
x.nextAddress?(b=a,e=b.header,l=b.docs,p=d.name||e.name,u=k.ensureDB(p),x.yield(u.setDocuments(l,{new_edits:!1}),2)):x.return(u)})};jh.prototype.dump=function(a){a=void 0===a?{}:a;var d=this,k,b,e,l,p,u,x,z,E,G,J,K,T,P,da,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ka){if(1==ka.nextAddress)return k=a,b=k.filterFn,e=k.name,l=k.type,p=k.dbInfo,u=d,x=u.name,z=u.pouchdb,G=E=e||x,J=l||z.type(),K=(new Date).toJSON(),T=Object,P=T.assign,ka.yield(z.info(),2);if(3!=ka.nextAddress)return da=
{name:G,db_type:J,start_time:K,db_info:P.call(T,{},ka.yieldResult,{db_name:E},p)},ka.yield(d.getAll({attachments:!0}),3);fa=ka.yieldResult;"function"===typeof b&&(fa=b(fa,da));return ka.return({header:da,docs:fa})})};jh.prototype.backup=function(a){a=void 0===a?1:a;var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(k=d.name+"_backup_"+a,b=d.constructor.ensureDB(k),e.yield(d.replicateTo(b),2)):e.return(b)})};jh.prototype.migrate=function(a){var d=
this,k,b,e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return x.yield(d.getAll(),2);if(3!=x.nextAddress){k=x.yieldResult;b=[];e=[];for(l=0;l<k.length;l++)p=k[l],(u=a(p,l))?(u.hasOwnProperty("_id")||(u._id=p._id),u.hasOwnProperty("_rev")&&delete u._rev,b.push(u)):e.push(p);return x.yield(d.setDocuments(b),3)}return x.return({migrated:b.length,unchanged:e.length})})};jh.prototype.createDesignDocs=function(a){return a.map(this.createDesignDoc)};jh.prototype.createDesignDoc=
function(a){var d=a.name,k=a.mapFn,b=a.reduceFn,e=a.filterFn;a={_id:"_design/"+d,version:void 0===a.version?1:a.version};e&&Ah.Path("filters."+d).set(a,e.toString(),!0);k&&Ah.Path("views."+d+".map").set(a,k.toString(),!0);b&&Ah.Path("views."+d+".reduce").set(a,b.toString(),!0);return a};jh.prototype.addDesignDocs=function(a,d){d=void 0===d?!1:d;var k=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?(b=k.createDesignDocs(a),l.yield(k.updateDocuments(b,
function(p,u){return!p.hasOwnProperty("version")||u.hasOwnProperty("version")&&u.version>p.version?u:null}),2)):3!=l.nextAddress?(e=l.yieldResult,d?l.yield(Promise.all(b.map(function(p){return k.designDocDoQueryStale(p._id)})),3):l.jumpTo(3)):l.return(e)})};jh.prototype.addDesignDoc=function(a,d){var k=a.name,b=a.mapFn,e=a.reduceFn,l=a.version;d=void 0===d?!1:d;var p=this,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){return 1==z.nextAddress?(u=p.createDesignDoc({name:k,mapFn:b,
reduceFn:e,version:l}),z.yield(p.set(u._id,u),2)):3!=z.nextAddress?(x=z.yieldResult,d?z.yield(p.designDocDoQueryStale(u._id),3):z.jumpTo(3)):z.return(x)})};jh.prototype.removeDesignDoc=function(a){return this.remove("_design/"+a)};jh.prototype.designDocDoQueryStale=function(a){a=$jscomp.makeIterator(a.split("/"));a.next();a=a.next().value;return this.query(a,{stale:"update_after"})};$jscomp.global.Object.defineProperties(jh.prototype,{pouchdb:{configurable:!0,enumerable:!0,get:function(){return this._pouchdb?
this._pouchdb:this._pouchdb=Ah.createPouchDB(this.name,this.options)}}});$jscomp.global.Object.defineProperties(jh,{PouchDB:{configurable:!0,enumerable:!0,get:function(){return Ah.PouchDB},set:function(a){Ah.PouchDB=a}},databases:{configurable:!0,enumerable:!0,get:function(){return this._databases||(this._databases=new Map)}}});Ah.Database=jh;Ah.default=jh;var we=lively.FreezerRuntime.recorderFor("lively.storage/objectdb.js");we.isHash=function(a){return"string"===typeof a&&40===a.length&&a.match(we.hashRe)};
we.checkArg=function(a,d,k){if("undefined"===typeof d&&"string"===typeof k&&!k.includes("undefined"))throw Error("parameter "+a+" is undefined");if(null===d&&"string"===typeof k&&!k.includes("null"))throw Error("parameter "+a+" is null");if("string"===typeof k){var b=typeof d,e=d?d.constructor.name:"";if(!k.split("|").some(function(l){return b===l||e===l}))throw Error('parameter "'+a+'" expected to be of type '+k+" but is "+(e||b));}if("function"===typeof k&&(d=k(d))&&d.error)throw Error('check of parameter "'+
a+'" failed: '+d.error);};we.checkArgs=function(a,d,k){for(var b in d)we.checkArg(b,a[b],d[b]);if("function"===typeof k&&(d=k(a))&&d.error)throw Error(d.error);return a};we.Database=jh;we.resource=hd;we.obj=eg;we.promise=bh;we.arr=Gf;we.string=Dh;we.Path=Qh;we.parse=kl;we.categorizer=yE;we.sha1=function(){function a(){var l=e.createHash("sha1");return{update:function(p){return l.update(p)},digest:function(){return l.digest("hex")}}}function d(l){function p(ka){z[P]|=(255&ka)<<da;da?da-=8:(P++,da=
24);16===P&&u()}function u(){for(var ka=16;80>ka;ka++){var za=z[ka-3]^z[ka-8]^z[ka-14]^z[ka-16];z[ka]=za<<1|za>>>31}var Ia,N;za=E;var ia=G,W=J,ca=K,sa=T;for(ka=0;80>ka;ka++){20>ka?(Ia=ca^ia&(W^ca),N=1518500249):40>ka?(Ia=ia^W^ca,N=1859775393):60>ka?(Ia=ia&W|ca&(ia|W),N=2400959708):(Ia=ia^W^ca,N=3395469782);var la=(za<<5|za>>>27)+Ia+sa+N+(0|z[ka]);sa=ca;ca=W;W=ia<<30|ia>>>2;ia=za;za=la}E=E+za|0;G=G+ia|0;J=J+W|0;K=K+ca|0;T=T+sa|0;for(ka=P=0;16>ka;ka++)z[ka]=0}function x(ka){for(var za="",Ia=28;0<=Ia;Ia-=
4)za+=(ka>>Ia&15).toString(16);return za}var z,E=1732584193,G=4023233417,J=2562383102,K=271733878,T=3285377520,P=0,da=24,fa=0;return z=l?k:new Uint32Array(80),{update:function(ka){if("string"===typeof ka){var za=ka.length;fa+=8*za;for(var Ia=0;Ia<za;Ia++)p(ka.charCodeAt(Ia))}else for(za=ka.length,fa+=8*za,Ia=0;Ia<za;Ia++)p(ka[Ia])},digest:function(){p(128);(14<P||14===P&&24>da)&&u();P=14;da=24;p(0);p(0);p(0xffffffffff<fa?fa/1099511627776:0);p(4294967295<fa?fa/4294967296:0);for(var ka=24;0<=ka;ka-=
8)p(fa>>ka);return x(E)+x(G)+x(J)+x(K)+x(T)}}}var k,b,e;return"object"===typeof we.process&&"object"===typeof we.process.versions&&we.process.versions.node&&"renderer"!==we.process.__atom_type?(e="undefined"!==typeof System?System._nodeRequire("crypto"):we.require("crypto"),b=a):(k=new Uint32Array(80),b=d),function(l){if(void 0===l)return b(!1);var p=b(!0);return p.update(l),p.digest()}}();we.hashRe=/^[0-9a-f]+$/i;we.objectDBs=we.objectDBs||new Map;var Mh=function(a,d){this.name=a;if(!d.snapshotLocation||
!d.snapshotLocation.isResource)throw Error("ObjectDB needs snapshotLocation!");this.snapshotLocation=d.snapshotLocation;this.__versionDB=this.__commitDB=null};Mh.dbList=function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(a=we.Database.ensureDB("internal__objectdb-meta"),d.yield(a.getAll(),2)):d.return(d.yieldResult.map(function(k){return k._id}))})};Mh.find=function(a){var d=this,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress){if(k=we.objectDBs.get(a))return l.return(k);b=we.Database.ensureDB("internal__objectdb-meta");return l.yield(b.get(a),2)}return(e=l.yieldResult)?l.return(d.named(a,e)):l.return()})};Mh.named=function(a,d){d=void 0===d?{}:d;var k=we.objectDBs.get(a);if(k)return k;if(!d||!d.snapshotLocation)throw Error("need snapshotLocation");if("string"===typeof d.snapshotLocation)try{d.snapshotLocation=we.resource(d.snapshotLocation)}catch(b){d.snapshotLocation=we.resource(System.baseURL).join(d.snapshotLocation)}k=
new this(a,d);we.objectDBs.set(a,k);we.Database.ensureDB("internal__objectdb-meta").set(a,Object.assign({},d,{snapshotLocation:d.snapshotLocation.url})).catch(function(b){return console.error("error writing objectdb meta:",b)});return k};Mh.prototype.destroy=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return(d=we.Database.findDB(a.name+"-commits"))?e.yield(d.destroy(),2):e.jumpTo(2);if(4!=e.nextAddress)return(k=we.Database.findDB(a.name+
"-version-graph"))?e.yield(k.destroy(),4):e.jumpTo(4);we.objectDBs.delete(a.name);b=we.Database.ensureDB("internal__objectdb-meta");return e.yield(b.remove(a.name),0)})};Mh.prototype.snapshotResourceFor=function(a){var d=a.content.slice(0,2);a=a.content.slice(2);return this.snapshotLocation.join(d+"/"+a+".json")};Mh.prototype.snapshotObject=function(a,d,k,b,e,l,p,u){var x=this,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return z=function(J){return J},G.yield(z(k),
2);E=G.yieldResult;return G.return(x.commit(a,d,E,e,l,p,u))})};Mh.prototype.loadObject=function(a,d,k,b,e){var l=this,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return x.yield(l.loadSnapshot(a,d,b,e),2);p=x.yieldResult;u=function(z){return z};return x.return(u(p))})};Mh.prototype.has=function(a,d){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(k.objectStats(a,d),2):b.return(!!b.yieldResult)})};Mh.prototype.objects=
function(a){var d=this,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(d.objectStats(a),2);k=l.yieldResult;if(a)return l.return(Object.keys(k||{}));b={};for(e in k)b[e]=Object.keys(k[e]);return l.return(b)})};Mh.prototype.objectStats=function(a,d){var k=this,b,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,za,Ia,N,ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){switch(W.nextAddress){case 1:b={};if(e=k.__commitDB){W.jumpTo(2);break}return W.yield(k._commitDB(),
3);case 3:e=W.yieldResult;case 2:return l=e,p={reduce:!0,group:!0},a&&d?p.key=a+"\x00"+d:a&&(p.startkey=a+"\x00",p.endkey=a+"\ufff0"),W.setCatchFinallyBlocks(4),W.yield(l.pouchdb.query("nameWithMaxMinTimestamp_index",p),6);case 6:u=W.yieldResult;x=u.rows;z=$jscomp.makeIterator(x);for(E=z.next();!E.done;E=z.next())J=G=E.value,K=J.key,T=J.value,P=T.count,da=T.max,fa=T.min,ka=$jscomp.makeIterator(K.split("\x00")),za=ka.next().value,Ia=ka.next().value,N=b[za]||(b[za]={}),N[Ia]={count:P,newest:da,oldest:fa};
W.leaveTryBlock(5);break;case 4:return ia=W.enterCatchBlock(),console.error(ia),W.return(b);case 5:return a&&d?W.return((b[a]||{})[d]):a?W.return(b[a]):W.return(b)}})};Mh.prototype.getCommits=function(a,d,k,b){k=void 0===k?"HEAD":k;b=void 0===b?Infinity:b;var e=this,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:return z.yield(e._log(a,d,k,b),2);case 2:l=z.yieldResult;if(!l.length)return z.return([]);if(p=e.__commitDB){z.jumpTo(3);break}return z.yield(e._commitDB(),
4);case 4:p=z.yieldResult;case 3:return u=p,z.yield(u.getDocuments(l.map(function(E){return{id:E}})),5);case 5:return x=z.yieldResult,z.return(x)}})};Mh.prototype.getCommit=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return(k=d.__commitDB)?e.jumpTo(2):e.yield(d._commitDB(),3);2!=e.nextAddress&&(k=e.yieldResult);b=k;return e.return(b.get(a))})};Mh.prototype.getCommitsWithIds=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return a.length?(k=d.__commitDB)?e.jumpTo(2):e.yield(d._commitDB(),3):e.return([]);2!=e.nextAddress&&(k=e.yieldResult);b=k;return e.return(b.getDocuments(a.map(function(l){return{id:l}})))})};Mh.prototype.getLatestCommit=function(a,d,k,b){k=void 0===k?"HEAD":k;b=void 0===b?!1:b;var e=this,l,p,u,x,z,E,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:return l=$jscomp,p=l.makeIterator,J.yield(e._log(a,d,k,1),2);case 2:u=p.call(l,J.yieldResult);
x=u.next().value;if(!x)return J.return(null);if(z=e.__commitDB){J.jumpTo(3);break}return J.yield(e._commitDB(),4);case 4:z=J.yieldResult;case 3:return E=z,J.yield(E.get(x),5);case 5:return(G=J.yieldResult)&&G.deleted&&!b?J.return(null):J.return(G)}})};Mh.prototype.commit=function(a,d,k,b,e,l,p){l=void 0===l?"HEAD":l;var u=this,x,z,E,G,J,K,T,P,da,fa,ka,za,Ia,N,ia,W,ca,sa,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){switch(Aa.nextAddress){case 1:x=b;z=x.author;E=void 0===x.description?
"no description":x.description;G=void 0===x.tags?[]:x.tags;J=x.timestamp;K=void 0===x.message?"":x.message;T=x.metadata;P=x.preview;if(!a)throw Error("object needs a type");if(!d)throw Error("object needs a name");if(!z)throw Error("Cannot commit "+a+"/"+d+" without user");if(da=u.__versionDB){Aa.jumpTo(2);break}return Aa.yield(u._versionDB(),3);case 3:da=Aa.yieldResult;case 2:return fa=da,Aa.yield(u.versionGraph(a,d),4);case 4:Ia=(za=(ka=Aa.yieldResult)?ka.refs[l]:null)?[za]:[];if(p){if(!ka)throw Error('Trying to store "'+
a+"/"+d+'" on top of expected version '+p+" but no version entry exists!");if(za!==p)throw Error('Trying to store "'+a+"/"+d+'" on top of expected version '+p+" but ref "+l+" is of version "+za+"!");}ia=(N=we.isHash(k))?null:k?JSON.stringify(k):null;W=u._createCommit(a,d,E,G,T,z,J,K,Ia,N?null:k,ia,e||P,N?k:null);if(!k||N){Aa.jumpTo(5);break}ca=u.snapshotResourceFor(W);return Aa.yield(ca.parent().ensureExistance(),6);case 6:return ca.canDealWithJSON?Aa.yield(ca.writeJson(k),5):Aa.yield(ca.write(ia),
5);case 5:if(sa=u.__commitDB){Aa.jumpTo(11);break}return Aa.yield(u._commitDB(),12);case 12:sa=Aa.yieldResult;case 11:return la=sa,Aa.yield(la.set(W._id,W),13);case 13:return W=Aa.yieldResult,ka||(ka={refs:{},history:{}}),ka.refs[l]=W._id,ka.history[W._id]=Ia,Aa.yield(fa.set(a+"/"+d,ka),14);case 14:return Aa.return(W)}})};Mh.prototype.loadSnapshot=function(a,d,k,b){b=void 0===b?"HEAD":b;var e=this,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:if(k&&
"string"!==typeof k){l=k;x.jumpTo(2);break}if(k){if(p=e.__commitDB){x.jumpTo(6);break}return x.yield(e._commitDB(),7)}return x.yield(e.getLatestCommit(a,d,b),5);case 5:l=x.yieldResult;x.jumpTo(2);break;case 7:p=x.yieldResult;case 6:return u=p,x.yield(u.get(k),8);case 8:l=x.yieldResult;case 2:if(!l)throw Error("Cannot find commit to loadSnapshot for "+a+"/"+d+" (using "+k+")");return x.return(e.snapshotResourceFor(l).readJson())}})};Mh.prototype.revert=function(a,d,k,b){var e=this,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:if(l=
e.__versionDB){x.jumpTo(2);break}return x.yield(e._versionDB(),3);case 3:l=x.yieldResult;case 2:return p=l,x.yield(p.get(a+"/"+d),4);case 4:return u=x.yieldResult,u.refs[k||"HEAD"]=b,delete u.deleted,x.yield(p.set(a+"/"+d,u),5);case 5:return x.return(u)}})};Mh.prototype._createCommit=function(a,d,k,b,e,l,p,u,x,z,E,G,J){u=void 0===u?"":u;x=void 0===x?[]:x;!G&&z&&z.preview&&(G=z.preview);return this._createCommitFromSpec({name:d,type:a,timestamp:p||Date.now(),author:{name:l.name,email:l.email,realm:l.realm},
tags:b,description:k,preview:G,message:u,content:J||E&&we.sha1(E)||null,deleted:!J&&!z,metadata:e,ancestors:x},!0)};Mh.prototype._createCommitFromSpec=function(a,d){d=void 0===d?!1:d;if(!a.name)throw Error("commit needs name");if(!a.type)throw Error("commit needs type");if(!a.author)throw Error("commit needs author");if(!a.author.name)throw Error("commit needs author.name");a.timestamp||(a.timestamp=Date.now());a.tags||(a.tags=[]);!d&&a.content&&(d=we.isHash(a.content),d||(a.content=we.sha1(a.content)));
d=we.obj.dissoc(a,["preview"]);d=we.sha1(JSON.stringify(d));return Object.assign(a,{_id:d})};Mh.prototype._commitDB=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){if(a.__commitDB)return b.return(a.__commitDB);d=a.name+"-commits";if(k=we.Database.findDB(d))return b.return(a.__commitDB=k);k=we.Database.ensureDB(d);return b.yield(k.addDesignDocs(a._commitdb_indexes),2)}return b.return(a.__commitDB=k)})};Mh.prototype.close=function(){var a=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:if(!a.__commitDB){d.jumpTo(2);break}return d.yield(a.__commitDB.close(),3);case 3:a.__commitDB=null;case 2:if(!a.__versionDB){d.jumpTo(0);break}return d.yield(a.__versionDB.close(),5);case 5:a.__versionDB=null,d.jumpToEnd()}})};Mh.prototype.versionGraph=function(a,d){var k=this,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:if(b=k.__versionDB){p.jumpTo(2);
break}return p.yield(k._versionDB(),3);case 3:b=p.yieldResult;case 2:return e=b,p.yield(e.get(a+"/"+d),4);case 4:return l=p.yieldResult,p.return(!l||l.deleted||l._deleted?null:l)}})};Mh.prototype._log=function(a,d,k,b){b=void 0===b?Infinity:b;var e=this,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return z.yield(e.versionGraph(a,d),2);l=z.yieldResult;if(!l||l.deleted||l._deleted)return z.return([]);p=l.refs.HEAD;for(u=[];;){if(u.includes(p))throw Error("cyclic version graph???");
u.push(p);x=$jscomp.makeIterator(l.history[p]||[]);p=x.next().value;if(!p||u.length>=b)break}return z.return(u)})};Mh.prototype._findTimestampedVersionsOfObjectNamed=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p,u,x,z,E,G,J,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){switch(T.nextAddress){case 1:b=d;e=void 0===b.include_docs?!0:b.include_docs;l=void 0===b.descending?!0:b.descending;p=void 0===b.startTime?"0".repeat(13):b.startTime;u=void 0===b.endTime?"9".repeat(13):b.endTime;
x=a+"\x00"+(l?u:p);z=a+"\x00"+(l?p:u);if(E=k.__commitDB){T.jumpTo(2);break}return T.yield(k._commitDB(),3);case 3:E=T.yieldResult;case 2:return G=E,T.yield(G.pouchdb.query("nameAndTimestamp_index",Object.assign({},d,{descending:l,include_docs:e,startkey:x,endkey:z})),4);case 4:return J=T.yieldResult,K=J.rows,T.return(e?K.map(function(P){return P.doc}):K.map(function(P){return P.id}))}})};Mh.prototype._versionDB=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress){if(a.__versionDB)return b.return(a.__versionDB);d=a.name+"-version-graph";if(k=we.Database.findDB(d))return b.return(a.__versionDB=k);k=we.Database.ensureDB(d);return b.yield(k.addDesignDocs(a._versiondb_indexes),2)}return b.return(a.__versionDB=k)})};Mh.prototype.exportToDir=function(a,d,k,b){k=void 0===k?!1:k;b=void 0===b?!1:b;var e=this,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,za,Ia,N,ia,W,ca,sa,la,Aa,ib,ob,Ea,ua,ya,Sa,Qb,mc,Yb,fc,Jc,Nb,ld,Od,ta,Pa,Ra,Cb,ec,Bd,Ad,Mc,Ue;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Me){switch(Me.nextAddress){case 1:"string"===
typeof a&&(a=we.resource(a));if(e.__commitDB){Me.jumpTo(2);break}return Me.yield(e._commitDB(),3);case 3:case 2:if(l=e.__versionDB){Me.jumpTo(4);break}return Me.yield(e._versionDB(),5);case 5:l=Me.yieldResult;case 4:p=l;u=[];if(!d)return Me.yield(p.getAll(),13);x=$jscomp.makeIterator(d);z=x.next();case 8:if(z.done){Me.jumpTo(7);break}G=E=z.value;J=G.name;K=G.type;T=a.join(K).join(J).asDirectory();return Me.yield(e.versionGraph(K,J),11);case 11:return P=Me.yieldResult,da=P.refs,fa=P.history,ka=Object.keys(fa),
Me.yield(e.getCommitsWithIds(ka),12);case 12:za=Me.yieldResult;u.push({refs:da,history:fa,currentExportDir:T,commits:za,name:J,type:K});z=x.next();Me.jumpTo(8);break;case 13:Ia=Me.yieldResult,N=$jscomp.makeIterator(Ia),ia=N.next();case 14:if(ia.done){Me.jumpTo(7);break}ca=W=ia.value;sa=ca.refs;la=ca.history;Aa=ca._id;if(Aa.startsWith("_")){Me.jumpTo(15);break}return Me.yield(e.getCommit(sa.HEAD||Object.keys(la)[0]),17);case 17:return ib=Me.yieldResult,ob=ib.type,Ea=ib.name,ua=a.join(ob).join(Ea).asDirectory(),
ya=Object.keys(la),Me.yield(e.getCommitsWithIds(ya),18);case 18:Sa=Me.yieldResult,u.push({refs:sa,history:la,currentExportDir:ua,commits:Sa,name:Ea,type:ob});case 15:ia=N.next();Me.jumpTo(14);break;case 7:Qb={},mc=$jscomp.makeIterator(u),Yb=mc.next();case 19:if(Yb.done){Me.jumpTo(0);break}Jc=fc=Yb.value;Nb=Jc.refs;ld=Jc.history;Qb.$jscomp$loop$prop$currentExportDir$1307$2721=Jc.currentExportDir;Od=Jc.commits;ta=Jc.name;Pa=Jc.type;b||(Od=Od.filter(function(Fh){return!Fh.deleted}));Ra=k?Od.map(function(Fh){return function(ch){if(ch.deleted||
ch._deleted||!ch.content)return null;delete ch._rev;ch=e.snapshotResourceFor(ch);var Oi=Fh.$jscomp$loop$prop$currentExportDir$1307$2721.join(ch.parent().name()+"/"+ch.name());return{from:ch,to:Oi}}}(Qb)).filter(Boolean):[];k||Od.forEach(function(Fh){delete Fh._rev});return Me.yield(Qb.$jscomp$loop$prop$currentExportDir$1307$2721.ensureExistance(),22);case 22:return Me.yield(Qb.$jscomp$loop$prop$currentExportDir$1307$2721.join("index.json").writeJson({name:ta,type:Pa}),23);case 23:return Me.yield(Qb.$jscomp$loop$prop$currentExportDir$1307$2721.join("commits.json").writeJson(Od),
24);case 24:return Me.yield(Qb.$jscomp$loop$prop$currentExportDir$1307$2721.join("history.json").writeJson({refs:Nb,history:ld}),25);case 25:Cb=$jscomp.makeIterator(Ra),ec=Cb.next();case 26:if(ec.done){Qb={$jscomp$loop$prop$currentExportDir$1307$2721:Qb.$jscomp$loop$prop$currentExportDir$1307$2721};Yb=mc.next();Me.jumpTo(19);break}Ad=Bd=ec.value;Mc=Ad.from;Ue=Ad.to;return Me.yield(Mc.copyTo(Ue),27);case 27:ec=Cb.next(),Me.jumpTo(26)}})};Mh.prototype.exportToSpecs=function(a,d){d=void 0===d?!1:d;var k=
this,b,e,l,p,u,x,z,E,G,J,K,T,P,da,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ka){switch(ka.nextAddress){case 1:b=[];if(a){ka.jumpTo(2);break}a=[];return ka.yield(k.objectStats(),3);case 3:for(l in e=ka.yieldResult||{},e)for(p in e[l])a.push({type:l,name:p});case 2:u=$jscomp.makeIterator(a),x=u.next();case 4:if(x.done){ka.jumpTo(6);break}E=z=x.value;G=E.name;J=E.type;return ka.yield(k.versionGraph(J,G),7);case 7:return K=ka.yieldResult,T=K.refs,P=K.history,da=Object.keys(P),ka.yield(k.getCommitsWithIds(da),
8);case 8:fa=ka.yieldResult;d||(fa=fa.filter(function(za){return!za.deleted}));fa.forEach(function(za){delete za._rev});b.push({type:J,name:G,commits:fa,history:{refs:T,history:P}});x=u.next();ka.jumpTo(4);break;case 6:return ka.return(b)}})};Mh.prototype.importFromDir=function(a,d,k){function b(K){var T,P,da,fa,ka,za,Ia,N,ia,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ca){switch(ca.nextAddress){case 1:return T=$jscomp,P=T.makeIterator,ca.yield(Promise.all([K.join("index.json").readJson(),
K.join("commits.json").readJson(),K.join("history.json").readJson()]),2);case 2:da=P.call(T,ca.yieldResult);fa=da.next().value;ka=fa.type;za=fa.name;Ia=da.next().value;N=da.next().value;if(!k){ia=[];ca.jumpTo(3);break}return ca.yield(K.dirList(1,{exclude:function(sa){return!sa.isDirectory()}}),4);case 4:ia=ca.yieldResult;case 3:return W=ia,ca.return({dir:K,type:ka,name:za,commits:Ia,history:N,snapshotDirs:W})}})}d=void 0===d?!1:d;k=void 0===k?!1:k;var e=this,l,p,u,x,z,E,G,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(K){switch(K.nextAddress){case 1:return K.yield(a.dirList(3,
{exclude:function(T){return!T.isDirectory()&&"index.json"!==T.name()}}),2);case 2:l=K.yieldResult,l=l.filter(function(T){return"index.json"===T.name()}),p=l.map(function(T){return T.parent()}),u=[],x=$jscomp.makeIterator(p),z=x.next();case 3:if(z.done){K.jumpTo(5);break}E=z.value;G=u;J=G.push;return K.yield(b(E),6);case 6:J.call(G,K.yieldResult);z=x.next();K.jumpTo(3);break;case 5:return K.return(e.importFromSpecs(u,d,k))}})};Mh.prototype.importFromSpecs=function(a,d,k){d=void 0===d?!1:d;k=void 0===
k?!1:k;var b=this,e,l,p,u,x,z,E,G,J,K,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:if(d){P.jumpTo(2);break}if(e=b.__versionDB){P.jumpTo(3);break}return P.yield(b._versionDB(),4);case 4:e=P.yieldResult;case 3:l=e,p=$jscomp.makeIterator(a),u=p.next();case 5:if(u.done){P.jumpTo(2);break}z=x=u.value;E=z.type;G=z.name;return P.yield(l.get(E+"/"+G),8);case 8:if(P.yieldResult)throw Error("Import failed: object "+E+"/"+G+" already exists and overwrite is not allowed");
u=p.next();P.jumpTo(5);break;case 2:J=$jscomp.makeIterator(a),K=J.next();case 9:if(K.done){P.jumpTo(11);break}T=K.value;return P.yield(b.importFromSpec(T,!0,k),10);case 10:K=J.next();P.jumpTo(9);break;case 11:return P.return(a)}})};Mh.prototype.importFromSpec=function(a,d,k){d=void 0===d?!1:d;k=void 0===k?!1:k;var b=this,e,l,p,u,x,z,E,G,J,K,T,P,da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fa){switch(fa.nextAddress){case 1:if(e=b.__versionDB){fa.jumpTo(2);break}return fa.yield(b._versionDB(),
3);case 3:e=fa.yieldResult;case 2:l=e;if(p=b.__commitDB){fa.jumpTo(4);break}return fa.yield(b._commitDB(),5);case 5:p=fa.yieldResult;case 4:u=p;x=b;z=x.snapshotLocation;E=a;G=E.type;J=E.name;K=E.commits;T=E.history;P=E.snapshotDirs;if(!(da=!d)){fa.jumpTo(6);break}return fa.yield(l.get(G+"/"+J),7);case 7:da=fa.yieldResult;case 6:if(da)throw Error("Import failed: object "+G+"/"+J+" already exists and overwrite is not allowed");return fa.yield(Promise.all([u.setDocuments(K),l.set(G+"/"+J,T)].concat($jscomp.arrayFromIterable(P&&
k?P.map(function(ka){return ka.copyTo(z.join(ka.name()).asDirectory())}):[]))),8);case 8:return fa.return(a)}})};Mh.prototype.importFromResource=function(a,d,k,b,e){e=void 0===e?!1:e;var l=this,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:return x.yield(k.readJson(),2);case 2:p=x.yieldResult;if(!(u=e)){x.jumpTo(3);break}return x.yield(l.has(a,d),4);case 4:u=x.yieldResult;case 3:if(!u){x.jumpTo(5);break}return x.yield(l.delete(a,d,!1),5);case 5:return x.return(l.commit(a,
d,p,b))}})};Mh.prototype.replicateTo=function(a,d,k,b){return(new we.Synchronization(this,a,d,k,Object.assign({method:"replicateTo"},b))).start()};Mh.prototype.replicateFrom=function(a,d,k,b){return(new we.Synchronization(this,a,d,k,Object.assign({method:"replicateFrom"},b))).start()};Mh.prototype.sync=function(a,d,k,b){return(new we.Synchronization(this,a,d,k,Object.assign({method:"sync"},b))).start()};Mh.prototype.getConflicts=function(a,d){function k(z,E){var G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){return 1==
J.nextAddress?J.yield(z.getConflicts({include_docs:!0}),2):3!=J.nextAddress?(G=J.yieldResult,J.yield(Promise.all(G.map(function(K){var T,P,da,fa,ka,za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){if(1==Ia.nextAddress){T=K;P=T.id;da=T.rev;fa=T.conflicts;ka=T.doc;if(d&&d[E]&&!d[E][P])return Ia.return(null);if(!a)return Ia.jumpTo(2);za=fa.map(function(N){return{id:P,rev:N}});return Ia.yield(z.getDocuments(za),3)}2!=Ia.nextAddress&&(fa=Ia.yieldResult);a?we.obj.dissoc(ka,["_conflicts"]):
ka=null;return Ia.return({id:P,rev:da,conflicts:fa,kind:E,doc:ka})})})),3)):J.return(J.yieldResult.filter(Boolean))})}var b=this,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:if(e=b.__commitDB){z.jumpTo(2);break}return z.yield(b._commitDB(),3);case 3:e=z.yieldResult;case 2:l=e;if(p=b.__versionDB){z.jumpTo(4);break}return z.yield(b._versionDB(),5);case 5:p=z.yieldResult;case 4:return u=p,z.yield(k(u,"versions"),6);case 6:return x=z.yieldResult,
z.yield(k(l,"commits"),8);case 8:return z.yield(z.yieldResult,7);case 7:return z.return({versionConflicts:x,commitConflicts:z.yieldResult})}})};Mh.prototype.resolveConflict=function(a){var d=this,k,b,e,l,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:k=a;b=k.resolved;e=k.delete;l=k.kind;p=k.id;if("versions"===l){if(z=d.__versionDB){E.jumpTo(7);break}return E.yield(d._versionDB(),8)}if("commits"!==l)throw Error("Unknown conflict kind: "+l);if(x=
d.__commitDB){E.jumpTo(5);break}return E.yield(d._commitDB(),6);case 6:x=E.yieldResult;case 5:u=x;E.jumpTo(3);break;case 8:z=E.yieldResult;case 7:u=z;case 3:return E.yield(u.set(p,b),9);case 9:return E.yield(Promise.all(e.map(function(G){return u.pouchdb.remove(p,G)})),0)}})};Mh.prototype.getDiff=function(a,d){var k=this,b,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,za,Ia,N,ia,W,ca,sa,la,Aa,ib,ob,Ea,ua,ya,Sa,Qb,mc,Yb,fc,Jc,Nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ld){switch(ld.nextAddress){case 1:b=
a;"string"===typeof a&&(b=we.Database.ensureDB(a+"-commits"),d=we.Database.ensureDB(a+"-version-graph"));if(e=k.__commitDB){ld.jumpTo(2);break}return ld.yield(k._commitDB(),3);case 3:e=ld.yieldResult;case 2:l=e;if(p=k.__versionDB){ld.jumpTo(4);break}return ld.yield(k._versionDB(),5);case 5:p=ld.yieldResult;case 4:return u=p,ld.yield(l.diffWith(b),6);case 6:return x=ld.yieldResult,ld.yield(u.diffWith(d),7);case 7:return z=ld.yieldResult,ld.yield(Promise.all(z.inLeft.map(function(Od){var ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pa){return 1==
Pa.nextAddress?(ta=Od.id,Pa.yield(u.get(Od.id),2)):Pa.return({id:ta,doc:Pa.yieldResult})})})),8);case 8:return E=ld.yieldResult,G=we.arr,J=G.groupBy,ld.yield(d.getAll(),9);case 9:return K=J.call(G,ld.yieldResult,function(Od){return Od._id}),ld.yield(Promise.all(z.inRight.map(function(Od){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ta){return ta.return({id:Od.id,doc:K[Od.id]})})})),10);case 10:return T=ld.yieldResult,ld.yield(Promise.all(z.changed.map(function(Od){var ta,Pa,Ra,Cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ec){return 1==
ec.nextAddress?(ta=Object,Pa=ta.assign,Ra=Od.left,ec.yield(u.get(Od.left.id),2)):3!=ec.nextAddress?(Cb=ec.yieldResult,ec.yield(d.get(Od.right.id),3)):ec.return(Pa.call(ta,{},Ra,{docA:Cb,docB:ec.yieldResult}))})})),11);case 11:return P=ld.yieldResult,da=we.arr,fa=da.groupBy,ld.yield(b.getAll(),12);case 12:ka=fa.call(da,ld.yieldResult,function(Od){return Od._id}),za=[],Ia=[],N=[],ia=$jscomp.makeIterator(x.inLeft),W=ia.next();case 13:if(W.done){ld.jumpTo(15);break}ca=W.value;sa=za;la=sa.push;return ld.yield(l.get(ca.id),
16);case 16:la.call(sa,ld.yieldResult);W=ia.next();ld.jumpTo(13);break;case 15:Aa=$jscomp.makeIterator(x.inRight),W=Aa.next();case 17:if(W.done){ld.jumpTo(19);break}ib=W.value;ob=Ia;Ea=ob.push;return ld.yield(ka[ib.id],20);case 20:Ea.call(ob,ld.yieldResult);W=Aa.next();ld.jumpTo(17);break;case 19:ua=$jscomp.makeIterator(x.changed),W=ua.next();case 21:if(W.done){ld.jumpTo(23);break}ya=W.value;Sa=N;Qb=Sa.push;return ld.yield(l.get(ya.left.id),24);case 24:return Qb.call(Sa,ld.yieldResult),mc=N,Yb=mc.push,
ld.yield(b.get(ya.right.id),25);case 25:Yb.call(mc,ld.yieldResult);W=ua.next();ld.jumpTo(21);break;case 23:return fc=za.map(function(Od){return we.obj.select(Od,["_id","name","type"])}),Jc=Ia.map(function(Od){return we.obj.select(Od,["_id","name","type"])}),Nb=N.map(function(Od){return we.obj.select(Od,["_id","name","type"])}),ld.return({changed:P,remote:T,local:E,changedCommitTypeAndNames:Nb,remoteCommitTypeAndNames:Jc,localCommitTypeAndNames:fc})}})};Mh.prototype.delete=function(a,d,k){k=void 0===
k?!0:k;var b=this,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,za,Ia,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ia){switch(ia.nextAddress){case 1:e=[];l=[];if(p=b.__commitDB){ia.jumpTo(2);break}return ia.yield(b._commitDB(),3);case 3:p=ia.yieldResult;case 2:return u=p,x={include_docs:!0,startkey:a+"\x00"+d+"\x00",endkey:a+"\x00"+d+"\uffff"},ia.yield(u.query("nameAndTimestamp_index",x),4);case 4:z=ia.yieldResult;E=z.rows;G=$jscomp.makeIterator(E);for(J=G.next();!J.done;J=G.next())T=K=J.value,
P=T.doc,P.deleted||P._deleted||!P.content||e.push(b.snapshotResourceFor(P)),l.push(Object.assign({},P,{_deleted:!0}));if(da=b.__versionDB){ia.jumpTo(5);break}return ia.yield(b._versionDB(),6);case 6:da=ia.yieldResult;case 5:return fa=da,ia.yield(fa.get(a+"/"+d),7);case 7:ka=ia.yieldResult;za=ka._id;Ia=ka._rev;N={_id:za,_rev:Ia,_deleted:!0};if(k){ia.jumpTo(8);break}return ia.yield(u.setDocuments(l),9);case 9:return ia.yield(fa.setDocuments([N]),10);case 10:Promise.all(e.map(function(W){return W.remove()}));
case 8:return ia.return({commits:l,history:N,resources:e})}})};Mh.prototype.deleteCommit=function(a,d,k){d=void 0===d?!0:d;k=void 0===k?"HEAD":k;var b=this,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(za){switch(za.nextAddress){case 1:if(a&&"string"!==typeof a){e=a;za.jumpTo(2);break}if(!a){za.jumpTo(2);break}if(l=b.__commitDB){za.jumpTo(4);break}return za.yield(b._commitDB(),5);case 5:l=za.yieldResult;case 4:return p=l,za.yield(p.get(a),6);case 6:e=
za.yieldResult;case 2:if(!e)throw Error("commit needed!");if(u=b.__versionDB){za.jumpTo(7);break}return za.yield(b._versionDB(),8);case 8:u=za.yieldResult;case 7:x=u;if(z=b.__commitDB){za.jumpTo(9);break}return za.yield(b._commitDB(),10);case 10:z=za.yieldResult;case 9:return E=z,G=e,J=G.name,K=G.type,T=e.deleted||e._deleted||!e.content?[]:[b.snapshotResourceFor(e)],P=[Object.assign({},e,{_deleted:!0})],za.yield(x.get(K+"/"+J),11);case 11:da=za.yieldResult;if(!da)throw Error("No history for "+K+"/"+
J+"@"+e._id);if(!da.refs[k])throw Error("Cannot delete commit "+K+"/"+J+"@"+e._id+" b/c it is not where ref "+k+" is pointing!");fa=$jscomp.makeIterator(da.history[e._id]||[]);ka=fa.next().value;if(!ka&&1>=Object.keys(da.history).length)da._deleted=!0;else if(ka)delete da.history[e._id],da.refs[k]=ka;else throw Error("Cannot delete commit "+K+"/"+J+"@"+e._id+" b/c it has no ancestor but there are still other commits!");if(d){za.jumpTo(12);break}return za.yield(x.set(K+"/"+J,da),13);case 13:return za.yield(E.setDocuments(P),
14);case 14:return za.yield(Promise.all(T.map(function(Ia){return Ia.remove()})),12);case 12:return za.return({commits:P,history:da,resources:T})}})};$jscomp.global.Object.defineProperties(Mh.prototype,{_commitdb_indexes:{configurable:!0,enumerable:!0,get:function(){return[{name:"name_index",version:4,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name); }'},{name:"nameAndTimestamp_index",version:3,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name + "\x00" + doc.timestamp + "\x00" + doc._id); }'},
{name:"nameWithMaxMinTimestamp_index",version:3,mapFn:'function(doc) { emit(doc.type + "\x00" + doc.name, doc.timestamp); }',reduceFn:"_stats"},{name:"nameTypeFilter",version:9,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames)\n            return !!req.query.onlyTypesAndNames[doc.type + "/" + doc.name];\n          return true;\n        }'},
{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}},_versiondb_indexes:{configurable:!0,enumerable:!0,get:function(){return[{name:"nameTypeFilter",version:3,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames) return !!req.query.onlyTypesAndNames[doc._id];\n          return true;\n        }'},
{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}}});we.ObjectDB=Mh;var ft=function(a,d,k,b,e){e=void 0===e?{}:e;this.options=Object.assign({debug:!1,live:!1,method:"sync",replicationFilter:void 0},e);this.state="not started";this.method="";this.fromObjectDB=a;this.remoteCommitDB=d;this.remoteVersionDB=k;this.remoteLocation=b;this.deferred=we.promise.deferred();this.conflicts=[];this.changes=[];this.errors=[]};ft.prototype.whenPaused=function(){var a=
this;return Promise.resolve().then(function(){return we.promise.waitFor(function(){return a.isPaused||a.isComplete})}).then(function(){return a})};ft.prototype.waitForIt=function(){return this.deferred.promise};ft.prototype.start=function(){this.isSynchonizing||this._startReplicationAndCopy().catch(function(a){return console.error("Error starting synchronization: ",a)});return this};ft.prototype._startReplicationAndCopy=function(){function a(Yb){return"paused"===mc&&"paused"===Qb&&0>=Sa.copyCalls&&
0>=Sa.copyCallsWaiting?Yb.state="paused":"complete"===mc&&"complete"===Qb&&Sa.isComplete()?Yb.state="complete":Yb.state="running"}function d(Yb,fc){if(fc.length||"complete"===Qb&&"complete"===mc&&Sa.isComplete()){ca.cancel();if(fc.length){Yb.state="complete";Yb.errors=fc;ua.cancel();ya.cancel();var Jc=Error("Synchronization error:\n  "+fc.join("\n  "));Jc.errors=fc;console.log(Yb+" errored")}else console.log(Yb+" completed");Jc?Yb.deferred.reject(Jc):Yb.deferred.resolve(Yb)}}function k(Yb){if(!Yb.content)return null;
var fc=Yb.content.slice(0,2);Yb=Yb.content.slice(2);return fc+"/"+Yb+".json"}var b=this,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,za,Ia,N,ia,W,ca,sa,la,Aa,ib,ob,Ea,ua,ya,Sa,Qb,mc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yb){switch(Yb.nextAddress){case 1:e=b;l=e.fromObjectDB;p=e.remoteCommitDB;u=e.remoteVersionDB;x=e.remoteLocation;z=e.options;E=z.debug;G=void 0===z.live?!1:z.live;J=void 0===z.retry?!1:z.retry;K=z.method;T=z.replicationFilter;P=void 0===z.pushDesignDocToRemote?!1:z.pushDesignDocToRemote;
if(da=l.__versionDB){Yb.jumpTo(2);break}return Yb.yield(l._versionDB(),3);case 3:da=Yb.yieldResult;case 2:fa=da;if(ka=l.__commitDB){Yb.jumpTo(4);break}return Yb.yield(l._commitDB(),5);case 5:ka=Yb.yieldResult;case 4:za=ka;Ia=l;N=Ia._commitdb_indexes;ia=Ia._versiondb_indexes;W=Ia.snapshotLocation;b.method=K;la=N.find(function(fc){return"nameTypeFilter"===fc.name});Aa=ia.find(function(fc){return"nameTypeFilter"===fc.name});if(!P){Yb.jumpTo(6);break}console.log("adding commitNameTypeFilter");return Yb.yield(p.addDesignDoc(la),
7);case 7:return console.log("adding versionNameTypeFilter"),Yb.yield(u.addDesignDoc(Aa),6);case 6:return ib={live:G,retry:J},ob=Object.assign({},ib),Ea=Object.assign({},ib),T&&(ob.filter=eval("("+la.filterFn+")"),ob.query_params=T,Ea.filter=eval("("+Aa.filterFn+")"),Ea.query_params=T),ua=za[K](p,ob),ya=fa[K](u,Ea),Sa={copyCalls:0,copyCallsWaiting:0,nFilesToCopy:0,nFilesCopied:0,stopped:!1,isComplete:function(){return this.stopped||0>=this.copyCalls&&0>=this.copyCallsWaiting}},mc=Qb="not started",
b.versionReplication=ya,b.commitReplication=ua,b.snapshotReplication=Sa,sa=p.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),ca=u.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),sa.on("change",function(fc){var Jc=fc.id,Nb=fc.changes;fc=fc.doc._conflicts;E&&console.log("commit changes "+Jc+":",Nb,fc);fc&&(console.log("commit conflict "+Jc+":",Nb,fc),b.conflicts.push({db:"commits",id:Jc,changes:Nb,conflicts:fc}))}),ca.on("change",function(fc){var Jc=fc.id,Nb=fc.changes;fc=fc.doc._conflicts;
E&&console.log("version changes "+Jc+":",Nb,fc);fc&&(console.log("version conflict "+Jc+":",Nb,fc),b.conflicts.push({db:"versions",id:Jc,changes:Nb,conflicts:fc}))}),ua.on("change",function(fc){var Jc,Nb,ld,Od,ta,Pa,Ra,Cb,ec,Bd,Ad;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Mc){switch(Mc.nextAddress){case 1:"replicateTo"===K?fc={direction:"push",change:fc}:"replicateFrom"===K&&(fc={direction:"pull",change:fc});Jc=fc;Nb=Jc.direction;ld=Jc.change;Od=ld.docs;console.log(b+" "+("push"===
Nb?"send":"received")+" "+Od.length+" commits");Mc.setCatchFinallyBlocks(2,3);Pa=[];Ra=$jscomp.makeIterator(Od);for(Cb=Ra.next();!Cb.done;Cb=Ra.next())ec=Cb.value,ec._id.startsWith("_")||(b.changes.push({direction:Nb,kind:"commits",id:ec._id,type:ec.type,name:ec.name}),(Bd=k(ec))&&Pa.push(Bd));Sa.nFilesToCopy+=Pa.length;if(!(0<Sa.copyCalls)){Mc.jumpTo(5);break}Sa.copyCallsWaiting++;return Mc.yield(we.promise.waitFor(function(){return 0>=Sa.copyCalls}),6);case 6:Sa.copyCallsWaiting--;case 5:return Sa.copyCalls++,
a(b),console.log(b+" copying "+Pa.length+" snapshots..."),Mc.yield(we.promise.parallel(Pa.map(function(Ue){return function(){var Me=("push"===Nb?W:x).join(Ue),Fh=("push"===Nb?x:W).join(Ue);return Sa.stopped?(console.warn(b+" Stopping copying resources b/c synchronization ended ("+Sa.copyCalls+", "+Me.url+" => "+Fh.url+")"),Promise.resolve()):Fh.exists().then(function(ch){function Oi(Fi){Fi=void 0===Fi?0:Fi;return Me.copyTo(Fh).catch(function(Pi){if(5<=Fi)throw Pi;return Oi(Fi+1)})}return ch?(E&&console.log("Skip copying to "+
Fh.url+", already exist"),Promise.resolve()):Me.exists().then(function(Fi){if(!Fi)return console.warn("Skip copying "+Me.url+", does not exist"),Promise.resolve();E&&console.log(b+" Copying "+Me.url+" => "+Fh.url);return Oi(0).then(function(Pi){Sa.nFilesCopied++;Sa.stopped||0!==Sa.nFilesCopied%10||console.log(b+" copied "+Sa.nFilesCopied+" of "+Sa.nFilesToCopy+" snapshots");return Pi})})})}}),5),7);case 7:console.log(b+" sending files done");case 3:Mc.enterFinallyBlock();Sa.copyCalls--;a(b);d(b,ta?
[ta]:[]);Mc.leaveFinallyBlock(0);break;case 2:throw Ad=Mc.enterCatchBlock(),console.error("error in commitReplication onChange",Ad),ta=Ad,Ad;}})}).on("paused",function(){Qb="paused";a(b);E&&console.log(b+" commit replication paused")}).on("active",function(){Qb="active";a(b);E&&console.log(b+" commit replication active")}).on("error",function(fc){Qb="complete";a(b);console.error(b+" commit replication error",fc);d(b,[fc])}).on("complete",function(fc){Qb="complete";a(b);fc="sync"===K?fc.push.errors.concat(fc.pull.errors):
fc.errors;d(b,fc)}),ya.on("change",function(fc){"replicateTo"===K?fc={direction:"push",change:fc}:"replicateFrom"===K&&(fc={direction:"pull",change:fc});var Jc=fc.direction;fc=fc.change.docs;E&&console.log(b+" "+("push"===Jc?"send":"received")+" "+fc.length+" histories");fc.forEach(function(Nb){Nb._id.startsWith("_")||b.changes.push({direction:Jc,kind:"versions",id:Nb._id})})}).on("paused",function(){mc="paused";a(b);E&&console.log(b+" version replication paused")}).on("active",function(fc){mc="active";
a(b);E&&console.log(b+" version replication active",fc)}).on("error",function(fc){mc="complete";a(b);console.error(b+" version replication error",fc);d(b,[fc])}).on("complete",function(fc){mc="complete";a(b);fc="sync"===K?fc.push.errors.concat(fc.pull.errors):fc.errors;d(b,fc)}),b.state="running",Yb.return(b)}})};ft.prototype.safeStop=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?"not started"!==a.state&&a.isSynchonizing?d.yield(a.whenPaused(),
2):d.return(a):d.return(a.stop())})};ft.prototype.stop=function(){if("not started"===this.state||!this.isSynchonizing)return this;this.commitReplication.cancel();this.versionReplication.cancel();this.snapshotReplication.stopped=!0;return this};ft.prototype.toString=function(){var a=this.method;return"Synchronization("+this.state+": "+this.fromObjectDB.name+" "+("sync"===a?"<=>":"replicateTo"===a?"=>":"replicateFrom"===a?"<=":"??")+")"};$jscomp.global.Object.defineProperties(ft.prototype,{isSynchonizing:{configurable:!0,
enumerable:!0,get:function(){return this.isPaused||this.isRunning}},isComplete:{configurable:!0,enumerable:!0,get:function(){return"complete"===this.state}},isRunning:{configurable:!0,enumerable:!0,get:function(){return"running"===this.state}},isPaused:{configurable:!0,enumerable:!0,get:function(){return"paused"===this.state}},changesByTypeAndName:{configurable:!0,enumerable:!0,get:function(){var a={push:{},pull:{}};this.changes.forEach(function(d){var k=d.direction,b=d.id,e=d.kind;if("_"!==b[0]){if("versions"===
e)var l=a[k][b]||(a[k][b]=[]);else"commits"===e&&(b=d.type+"/"+d.name,l=a[k][b]||(a[k][b]=[]));l.push(d)}});return a}}});we.Synchronization=ft;var Xx={describe:function(a){function d(u,x){u=u.find(function(J){return J.name===x}).node.value.body;var z=u.body||[],E=(u.comments||[]).find(function(J){return J.end<z[0].start});u={name:x,parameters:[],sideEffect:!1,returns:null,description:""};if(E&&E.text.trim()){E=we.string.changeIndent(E.text," ",0).split("\n");E=$jscomp.makeIterator(E);for(var G=E.next();!G.done;G=
E.next()){G=G.value;if(G.startsWith("ignore-in-doc")){u.description="";break}G.startsWith("side effect:")?u.sideEffect=JSON.parse(G.split(":")[1]):G.startsWith("returns:")?u.returns=G.split(":")[1].trim():u.description+=G+"\n"}}E=$jscomp.makeIterator(z);for(G=E.next();!G.done;G=E.next())if(G=G.value,"checkArgs"===we.Path("declarations.0.init.callee.name").get(G)&&(G=we.Path("declarations.0.id.properties").get(G)))u.parameters=G.map(function(J){return J.key.name});return u}var k=this,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:u.setCatchFinallyBlocks(2);
if(k._methodSpecs){u.jumpTo(4);break}return u.yield(lively.modules.module("lively.storage/objectdb.js").source(),5);case 5:b=u.yieldResult,e=we.parse(b,{withComments:!0}),l=we.categorizer.findDecls(e),k._methodSpecs=l.filter(function(x){return x.parent&&"ObjectDBInterface"===x.parent.name});case 4:return u.return(a?d(k._methodSpecs,a):k._methodSpecs.map(function(x){return d(k._methodSpecs,x.name)}).filter(Boolean));case 2:return p=u.enterCatchBlock(),u.return("Error in describe "+p)}})},ensureDB:function(a){var d,
k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return d=we.checkArgs(a,{db:"string",snapshotLocation:"string|Resource"}),k=d.db,b=d.snapshotLocation,l.yield(we.ObjectDB.find(k),2);if(e=l.yieldResult)return l.return(!1);we.ObjectDB.named(k,{snapshotLocation:b});return l.return(!0)})},destroyDB:function(a){var d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(d=we.checkArgs(a,{db:"string"}),k=d.db,e.yield(we.ObjectDB.find(k),
2)):3!=e.nextAddress?(b=e.yieldResult)?e.yield(b.destroy(),3):e.return(!1):e.return(!0)})},fetchCommits:function(a){var d,k,b,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,za,Ia,N,ia,W,ca,sa,la,Aa,ib,ob,Ea,ua,ya,Sa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qb){switch(Qb.nextAddress){case 1:return d=we.checkArgs(a,{db:"string",ref:"string|undefined",type:"string|undefined",typesAndNames:"Array|undefined",knownCommitIds:"object|undefined",includeDeleted:"boolean|undefined",filterFn:"string|undefined"}),
k=d.db,b=d.ref,e=d.type,l=d.typesAndNames,p=d.knownCommitIds,u=d.includeDeleted,x=d.filterFn,Qb.yield(we.ObjectDB.find(k),2);case 2:z=Qb.yieldResult;b||(b="HEAD");if(!z)throw Error("db "+k+" does not exist");if(z.__commitDB){Qb.jumpTo(3);break}return Qb.yield(z._commitDB(),4);case 4:case 3:if(E=z.__versionDB){Qb.jumpTo(5);break}return Qb.yield(z._versionDB(),6);case 6:E=Qb.yieldResult;case 5:G=E;J={};K={};if(l)for(T=J.keys=[],P=$jscomp.makeIterator(l),da=P.next();!da.done;da=P.next())ka=fa=da.value,
za=ka.type,Ia=ka.name,N=ka.ref,T.push(za+"/"+Ia),N&&(K[za+"/"+Ia]=N);else e&&(J.startkey=e+'/\x00"',J.endkey=e+'/\uffff"');return Qb.yield(G.getAll(J),7);case 7:ia=Qb.yieldResult;W=[];ca=$jscomp.makeIterator(ia);for(sa=ca.next();!sa.done;sa=ca.next())!(la=sa.value)||la.deleted||la._deleted||(Aa=la,ib=Aa._id,ob=Aa.refs,ib.startsWith("_")||(Ea=ob[K[ib]||b]||b,!Ea||p&&p.hasOwnProperty(Ea)||W.push(Ea)));return Qb.yield(z.getCommitsWithIds(W),8);case 8:ua=Qb.yieldResult;u||(ua=ua.filter(function(mc){return mc&&
!mc.deleted}));if(x)try{ya=eval("("+x+")");if("function"!==typeof ya)throw Error(x+" does not eval to a function!");Sa=ua.filter(ya);if(Array.isArray(Sa))ua=Sa;else throw Error(x+" does not return an array!");}catch(mc){console.error("fetchCommits filterFn failed:",mc)}return Qb.return(ua)}})},fetchVersionGraph:function(a){var d,k,b,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return d=we.checkArgs(a,{db:"string",type:"string",name:"string"}),k=d.db,
b=d.type,e=d.name,z.yield(we.ObjectDB.find(k),2);if(3!=z.nextAddress){l=z.yieldResult;if(!l)throw Error("db "+k+" does not exist");return z.yield(l.versionGraph(b,e),3)}p=z.yieldResult;u=p.refs;x=p.history;return z.return({refs:u,history:x})})},exists:function(a){var d,k,b,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return d=we.checkArgs(a,{db:"string",type:"string",name:"string",ref:"string|undefined"}),k=d.db,b=d.type,e=d.name,l=d.ref,z.yield(we.ObjectDB.find(k),
2);if(3!=z.nextAddress)return p=z.yieldResult,z.yield(p.versionGraph(b,e),3);u=z.yieldResult;if(!u)return z.return({exists:!1,commitId:void 0});l=l||"HEAD";return(x=u.refs[l])?z.return({exists:!0,commitId:x}):z.return({exists:!1,commitId:void 0})})},fetchLog:function(a){var d,k,b,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,za,Ia,N,ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){switch(W.nextAddress){case 1:return d=we.checkArgs(a,{db:"string",type:"string|undefined",name:"string|undefined",
ref:"string|undefined",commit:"string|undefined",limit:"number|undefined",includeCommits:"boolean|undefined",knownCommitIds:"object|undefined"},function(ca){return ca.type&&ca.name||ca.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),k=d.db,b=d.type,e=d.name,l=d.ref,p=d.commit,u=d.limit,x=d.includeCommits,z=d.knownCommitIds,W.yield(we.ObjectDB.find(k),2);case 2:E=W.yieldResult;G=l||"HEAD";if(!E)throw Error("db "+k+" does not exist");u||(u=Infinity);p||l||(l=G);if(!p){W.jumpTo(3);break}J=
p;if(b&&e){W.jumpTo(3);break}return W.yield(E.getCommit(p),5);case 5:K=W.yieldResult;if(!K)throw Error("fetchLog: specified commit "+p+" but no commit with this id is in the database!");T=K;b=T.type;e=T.name;case 3:return W.yield(E.versionGraph(b,e),6);case 6:P=W.yieldResult;if(!P)throw Error("Unknown object "+b+"/"+e);da=P;fa=da.refs;ka=da.history;J||(J=fa[l]);za=J;for(Ia=[];Ia.length<u&&!Ia.includes(za);){Ia.push(za);N=ka[za];if(!N||!N.length)break;ia=$jscomp.makeIterator(N);za=ia.next().value}if(!x){W.jumpTo(7);
break}z&&(Ia=Ia.filter(function(ca){return!z.hasOwnProperty(ca)}));return W.yield(E.getCommitsWithIds(Ia),8);case 8:Ia=W.yieldResult;case 7:return W.return(Ia)}})},fetchSnapshot:function(a){var d,k,b,e,l,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return d=we.checkArgs(a,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined"},function(G){return G.type&&G.name||G.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),
k=d.db,b=d.type,e=d.name,l=d.ref,p=d.commit,E.yield(we.ObjectDB.find(k),2);case 2:u=E.yieldResult;l=l||"HEAD";if(!u)throw Error("db "+k+" does not exist");if(p){E.jumpTo(3);break}return E.yield(u.versionGraph(b,e),4);case 4:x=E.yieldResult;if(!x)throw Error("Unknown object "+b+"/"+e);p=x.refs[l];if(!p)throw Error("Cannot find commit for ref "+l+" of "+b+"/"+e);case 3:return E.yield(u.getCommit(p),5);case 5:z=E.yieldResult;if(!z)throw Error("Cannot find commit "+p);return E.return(u.loadSnapshot(void 0,
void 0,z))}})},revert:function(a){var d,k,b,e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return d=we.checkArgs(a,{db:"string",type:"string",name:"string",ref:"string|undefined",toCommitId:"string"}),k=d.db,b=d.type,e=d.name,l=d.ref,p=d.toCommitId,x.yield(we.ObjectDB.find(k),2);u=x.yieldResult;l||(l="HEAD");return x.return(u.revert(b,e,l,p))})},commit:function(a){var d,k,b,e,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==
G.nextAddress)return d=we.checkArgs(a,{db:"string",type:"string",name:"string",ref:"string|undefined",snapshot:"object|string|undefined",preview:"string|undefined",commitSpec:"object",expectedParentCommit:"string|undefined"}),k=d.db,b=d.type,e=d.name,l=d.ref,p=d.expectedParentCommit,u=d.commitSpec,x=d.snapshot,z=d.preview,G.yield(we.ObjectDB.find(k),2);E=G.yieldResult;l||(l="HEAD");return G.return(E.commit(b,e,x,u,z,l,p))})},exportToSpecs:function(a){var d,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return d=we.checkArgs(a,{db:"string",nameAndTypes:"Array|undefined",includeDeleted:"boolean|undefined"}),k=d.db,b=d.nameAndTypes,l.yield(we.ObjectDB.find(k),2);e=l.yieldResult;if(!e)throw Error("db "+k+" does not exist");return l.return(e.exportToSpecs(b))})},exportToDir:function(a){var d,k,b,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return d=we.checkArgs(a,{db:"string",url:"string",nameAndTypes:"Array|undefined",copyResources:"boolean|undefined",
includeDeleted:"boolean|undefined"}),k=d.db,b=d.url,e=d.nameAndTypes,l=d.copyResources,p=d.includeDeleted,z.yield(we.ObjectDB.find(k),2);u=z.yieldResult;if(!u)throw Error("db "+k+" does not exist");try{x=we.resource(b)}catch(E){x=we.resource(System.baseURL).join(b)}return z.return(u.exportToDir(x,e,l,p))})},importFromDir:function(a){var d,k,b,e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return d=we.checkArgs(a,{db:"string",url:"string",overwrite:"boolean|undefined",
copyResources:"boolean|undefined"}),k=d.db,b=d.url,e=d.overwrite,l=d.copyResources,x.yield(we.ObjectDB.find(k),2);p=x.yieldResult;if(!p)throw Error("db "+k+" does not exist");try{u=we.resource(b)}catch(z){u=we.resource(System.baseURL).join(b)}return x.return(p.importFromDir(u,e,l))})},importFromSpecs:function(a){var d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return d=we.checkArgs(a,{db:"string",specs:"object",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),
k=d.db,b=d.specs,e=d.overwrite,l=d.copyResources,u.yield(we.ObjectDB.find(k),2);p=u.yieldResult;if(!p)throw Error("db "+k+" does not exist");return u.return(p.importFromSpecs(b,e,l))})},importFromResource:function(a){var d,k,b,e,l,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return d=we.checkArgs(a,{db:"string",type:"string",name:"string",url:"string",commitSpec:"object",purgeHistory:"boolean|undefined"}),k=d.db,b=d.type,e=d.name,l=d.url,p=d.commitSpec,
u=d.purgeHistory,E.yield(we.ObjectDB.find(k),2);x=E.yieldResult;if(!x)throw Error("db "+k+" does not exist");try{z=we.resource(l)}catch(G){z=we.resource(System.baseURL).join(l)}return E.return(x.importFromResource(b,e,z,p,u))})},delete:function(a){var d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return d=we.checkArgs(a,{db:"string",type:"string",name:"string",dryRun:"boolean|undefined"}),k=d.db,b=d.type,e=d.name,l=d.dryRun,u.yield(we.ObjectDB.find(k),
2);p=u.yieldResult;return u.return(p.delete(b,e,"undefined"===typeof l||l))})},deleteCommit:function(a){var d,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return d=we.checkArgs(a,{db:"string",commit:"string",dryRun:"boolean|undefined"}),k=d.db,b=d.commit,e=d.dryRun,p.yield(we.ObjectDB.find(k),2);l=p.yieldResult;return p.return(l.deleteCommit(b,"undefined"===typeof e||e))})},fetchConflicts:function(a){var d,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==
p.nextAddress)return d=we.checkArgs(a,{db:"string",includeDocs:"boolean|undefined",only:"object|undefined"}),k=d.db,b=d.includeDocs,e=d.only,p.yield(we.ObjectDB.find(k),2);l=p.yieldResult;return p.return(l.getConflicts(b,e))})},resolveConflict:function(a){var d,k,b,e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return d=we.checkArgs(a,{db:"string",id:"string",kind:"string",delete:"Array",resolved:"object"}),k=d.db,b=d.resolved,e=d.delete,l=d.kind,p=d.id,
x.yield(we.ObjectDB.find(k),2);u=x.yieldResult;return x.return(u.resolveConflict({resolved:b,delete:e,kind:l,id:p}))})},fetchDiff:function(a){var d,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return d=we.checkArgs(a,{db:"string",otherDB:"string"}),k=d.db,b=d.otherDB,l.yield(we.ObjectDB.find(k),2);e=l.yieldResult;return l.return(e.getDiff(b))})},synchronize:function(a){var d,k,b,e,l,p,u,x,z,E,G,J,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){switch(T.nextAddress){case 1:return d=
we.checkArgs(a,{db:"string",otherDB:"string",otherDBSnapshotLocation:"string|undefined",onlyTypesAndNames:"object|undefined",method:"string|undefined"}),k=d.db,b=d.otherDB,e=d.otherDBSnapshotLocation,l=d.onlyTypesAndNames,p=d.method,T.yield(we.ObjectDB.find(k),2);case 2:return e||(e=b.replace(/\/$/,"")+"/snapshots"),p||(p="replicateTo"),T.yield(we.ObjectDB.find(k),3);case 3:return u=T.yieldResult,T.yield(we.ObjectDB.named(b,{snapshotLocation:e}),4);case 4:return x=T.yieldResult,T.yield(x._commitDB(),
5);case 5:return z=T.yieldResult,T.yield(x._versionDB(),6);case 6:return E=T.yieldResult,G=x.snapshotLocation,J={replicationFilter:l?{onlyTypesAndNames:l}:void 0,retry:!0,live:!0},K=u[p](z,E,G,J),T.yield(K.whenPaused(),7);case 7:return T.yield(K.safeStop(),8);case 8:return T.yield(K.waitForIt(),9);case 9:return T.return(we.obj.select(K,["state","method","conflicts","errors","changesByTypeAndName"]))}})}};we.ObjectDBInterface=Xx;we.ObjectDBInterface=Xx;we.ObjectDBInterface=Xx;var Tj=function(a){this.serverURL=
a=void 0===a?document.location.origin+"/objectdb/":a};Tj.prototype._processResponse=function(a){var d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return d=a.headers.get("content-type"),e.yield(a.text(),2);k=e.yieldResult;if("application/json"===d)try{b=JSON.parse(k)}catch(l){}if(!a.ok||b&&b.error)throw Error(b&&b.error||k||a.statusText);return e.return(b||k)})};Tj.prototype._GET=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==
u.nextAddress?(b=Object.keys(d).map(function(x){var z=d[x];"object"===typeof z&&(z=JSON.stringify(z));return x+"="+encodeURIComponent(z)}).join("&"),e=k.serverURL+a+"?"+b,l=k,p=l._processResponse,u.yield(fetch(e),2)):u.return(p.call(l,u.yieldResult))})};Tj.prototype._POST=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?(b=k.serverURL+a,e=k,l=e._processResponse,p.yield(fetch(b,{method:"POST",body:JSON.stringify(d),
headers:{"content-type":"application/json"}}),2)):p.return(l.call(e,p.yieldResult))})};Tj.prototype.describe=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("describe",a))})};Tj.prototype.ensureDB=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("ensureDB",a))})};Tj.prototype.destroyDB=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("destroyDB",
a))})};Tj.prototype.fetchCommits=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchCommits",a))})};Tj.prototype.fetchVersionGraph=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchVersionGraph",a))})};Tj.prototype.exists=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("exists",a))})};Tj.prototype.fetchLog=function(a){var d=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchLog",a))})};Tj.prototype.fetchSnapshot=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchSnapshot",a))})};Tj.prototype.revert=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("revert",a))})};Tj.prototype.commit=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("commit",
a))})};Tj.prototype.exportToSpecs=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("exportToSpecs",a))})};Tj.prototype.exportToDir=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("exportToDir",a))})};Tj.prototype.importFromDir=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("importFromDir",a))})};Tj.prototype.importFromSpecs=
function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("importFromSpecs",a))})};Tj.prototype.importFromResource=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("importFromResource",a))})};Tj.prototype.delete=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("delete",a))})};Tj.prototype.deleteCommit=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("deleteCommit",
a))})};Tj.prototype.fetchConflicts=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchConflicts",a))})};Tj.prototype.resolveConflict=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("resolveConflict",a))})};Tj.prototype.fetchDiff=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchDiff",a))})};Tj.prototype.synchronize=
function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("synchronize",a))})};we.ObjectDBHTTPInterface=Tj;we.default=Mh;var Uj=lively.FreezerRuntime.recorderFor("lively.storage/storage-resource.js");Uj.applyExclude=function(a,d){return d?"string"===typeof d?!a.url.includes(d):"function"===typeof d?!d(a):d instanceof RegExp?!d.test(a.url):!0:!0};Uj.Resource=Cg;Uj.Database=jh;Uj.debug=!1;Uj.slashRe=/\//g;var FX=function(){return Uj.Database.apply(this,
arguments)||this};$jscomp.inherits(FX,Uj.Database);FX.ensureDB=function(a,d){return Uj.Database.ensureDB.call(this,"lively.storage-"+a,d)};Uj.StorageDatabase=FX;var Po=function(){return Uj.Resource.apply(this,arguments)||this};$jscomp.inherits(Po,Uj.Resource);Po.prototype.read=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return Uj.debug&&console.log("["+a+"] read"),b.yield(a.db.get(a.pathWithoutQuery()),2);k=(d=b.yieldResult)&&d.content;
return b.return(k?"string"===typeof k?k:JSON.stringify(k):"")})};Po.prototype.readJson=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(a.read(),2);d=k.yieldResult;return k.return("string"===typeof d?JSON.parse(d):d)})};Po.prototype.write=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){Uj.debug&&console.log("["+d+"] write");a||(a="");if(d.isDirectory())throw Error("Cannot write into a directory! ("+
d.url+")");return k.yield(d.db.update(d.pathWithoutQuery(),function(b){if(b&&b.isDirectory)throw Error(d.url+" already exists and is a directory (cannot write into it!)");var e=Date.now();return b?Object.assign({},b,{lastModified:e,size:a.length,content:a}):{etag:void 0,type:void 0,contentType:void 0,user:void 0,group:void 0,mode:void 0,lastModified:e,created:e,size:"string"===typeof a?a.length:0,content:a}}),2)}return k.return(d)})};Po.prototype.writeJson=function(a){return this.write(a)};Po.prototype.mkdir=
function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){Uj.debug&&console.log("["+a+"] mkdir");if(!a.isDirectory())throw Error("Cannot mkdir a file! ("+a.url+")");return b.yield(a.db.get(a.pathWithoutQuery()),2)}if(3!=b.nextAddress){if(d=b.yieldResult){if(!d.isDirectory)throw Error(a.url+" already exists and is a file (cannot mkdir it!)");return b.return(a)}k=Date.now();return b.yield(a.db.set(a.pathWithoutQuery(),{etag:void 0,type:void 0,contentType:void 0,
user:void 0,group:void 0,mode:void 0,lastModified:k,created:k,isDirectory:!0}),3)}return b.return(a)})};Po.prototype.exists=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return Uj.debug&&console.log("["+a+"] exists"),(d=a.isRoot())?k.jumpTo(2):k.yield(a.db.get(a.pathWithoutQuery()),3);2!=k.nextAddress&&(d=!!k.yieldResult);return k.return(d)})};Po.prototype.remove=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==
e.nextAddress?(Uj.debug&&console.log("["+a+"] remove"),d=a.pathWithoutQuery(),k=a.db,e.yield(k.docList({startkey:d,endkey:d+"\uffff"}),2)):3!=e.nextAddress?(b=e.yieldResult,e.yield(k.setDocuments(b.map(function(l){return{_id:l.id,_rev:l.rev,_deleted:!0}})),3)):e.return(a)})};Po.prototype.readProperties=function(){Uj.debug&&console.log("["+this+"] readProperties");return this.db.get(this.pathWithoutQuery())};Po.prototype.dirList=function(a,d){a=void 0===a?1:a;d=void 0===d?{}:d;var k=this,b,e,l,p,u,
x,z,E,G,J,K,T,P,da,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ka){if(1==ka.nextAddress){Uj.debug&&console.log("["+k+"] dirList");if(!k.isDirectory())return ka.return(k.asDirectory().dirList(a,d));b=d;e=b.exclude;l=k.pathWithoutQuery();p=[];return ka.yield(k.db.getAll({startkey:l,endkey:l+"\uffff"}),2)}u=ka.yieldResult;"infinity"===a&&(a=Infinity);x={};for(z=0;z<u.length;x={$jscomp$loop$prop$dirToChild$2723:x.$jscomp$loop$prop$dirToChild$2723},z++)if(G=E=u[z],J=G._id,J.startsWith(l)&&
l!==J)if(K=J.slice(l.length),T=K.includes("/")?K.match(Uj.slashRe).length+1:1,T>a)x.$jscomp$loop$prop$dirToChild$2723=k.join(K.split("/").slice(0,a).join("/")+"/"),p.some(function(za){return function(Ia){return Ia.equals(za.$jscomp$loop$prop$dirToChild$2723)}}(x))||p.push(x.$jscomp$loop$prop$dirToChild$2723);else if(P=k.join(K),!e||Uj.applyExclude(P,e))for(p.push(P),da="created lastModified mode group user contentType type etag size".split(" "),fa=0;fa<da.length;fa++)P[da[fa]]=E[da[fa]];return ka.return(p)})};
$jscomp.global.Object.defineProperties(Po.prototype,{canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!0}},db:{configurable:!0,enumerable:!0,get:function(){return this._db||(this._db=Uj.StorageDatabase.ensureDB(this.host()))}}});Uj.LivelyStorageResource=Po;var GX={name:"lively.storage",matches:function(a){return a.startsWith("lively.storage:")},resourceClass:Uj.LivelyStorageResource};Uj.resourceExtension=GX;Uj.resourceExtension=GX;Uj.resourceExtension=GX;Uj.registerExtension=xe;
Uj.registerExtension(Uj.resourceExtension);Uj.default=Po;var Fq=lively.FreezerRuntime.recorderFor("lively.storage/index.js");Fq.default=jh;Fq.Database=jh;Fq.ObjectDB=Mh;Fq.ObjectDBInterface=Xx;Fq.ObjectDBHTTPInterface=Tj;Fq.ObjectDB=Mh;Fq.ObjectDB=Mh;Fq.ObjectDBInterface=Xx;Fq.ObjectDBInterface=Xx;Fq.ObjectDBHTTPInterface=Tj;Fq.ObjectDBHTTPInterface=Tj;var Dwa=Object.freeze({__proto__:null,Database:jh,ObjectDB:Mh,ObjectDBInterface:Xx,ObjectDBHTTPInterface:Tj}),Sg=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js");
Sg.convertToSerializableCommit=WT;Sg.ensureCommitInfo=RD;Sg.ObjectDBHTTPInterface=Tj;Sg.Database=jh;Sg.loadMorphFromSnapshot=xr;Sg.createMorphSnapshot=hx;Sg.resource=hd;Sg.obj=eg;Sg.Path=Qh;Sg.arr=Gf;Sg.string=Dh;Sg.morphicDBs=Sg.morphicDBs||(Sg.morphicDBs=new Map);Sg.getDefaultServerUrl=function(){return Sg.resource("undefined"!==typeof document?window.SERVER_URL||System.baseURL:"http://localhost:9001").join("objectdb/").url};Sg.convertToSerializableCommit=WT;Sg.convertToSerializableCommit=WT;Sg.ensureCommitInfo=
RD;Sg.ensureCommitInfo=RD;var HX=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),k=d.hasOwnProperty("MorphicDB")&&"function"===typeof d.MorphicDB?d.MorphicDB:d.MorphicDB=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){var l=e.snapshotLocation;e=e.serverURL;this.name=b;this.serverURL=e;this.snapshotLocation=
l||b+"/snapshots/";this.httpDB=new Sg.ObjectDBHTTPInterface(e);this._initialized=!1}},{key:"__serialize__",value:function(){return{__expr__:'MorphicDB.named("'+this.name+'", {snapshotLocation: "'+this.snapshotLocation+'", serverURL: "'+this.serverURL+'"})',bindings:{"lively.morphic/morphicdb/index.js":["MorphicDB"]}}}},{key:"initializeIfNecessary",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return b._initialized?e.return():e.yield(b.ensureDB(),
2);b._initialized=!0;e.jumpToEnd()})}},{key:"snapshotResourceFor",value:function(b){var e=b.content.slice(0,2);b=b.content.slice(2);return Sg.resource(System.decanonicalize(this.snapshotLocation)).join(e+"/"+b+".json")}},{key:"ensureDB",value:function(){return this.httpDB.ensureDB({db:this.name,snapshotLocation:this.snapshotLocation})}},{key:"destroyDB",value:function(){this._initialized=!1;return this.httpDB.destroyDB({db:this.name})}},{key:"latestCommits",value:function(b,e){b=void 0===b?"world":
b;e=void 0===e?!1:e;var l=this,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return z.yield(l.initializeIfNecessary(),2);p=l;u=p.name;x={};return z.return(l.httpDB.fetchCommits({db:u,type:b,ref:"HEAD",knownCommitIds:x,includeDeleted:e}))})}},{key:"fetchCommit",value:function(b,e,l){var p=this,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return z.yield(p.initializeIfNecessary(),2);if(3!=z.nextAddress)return u=[{type:b,
name:e,ref:l}],z.yield(p.httpDB.fetchCommits({db:p.name,ref:l,type:b,typesAndNames:u,knownCommitIds:{}}),3);x=z.yieldResult;return z.return(Sg.convertToSerializableCommit(x[0]))})}},{key:"fetchSnapshot",value:function(b,e,l,p){var u=this,x=arguments,z,E,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress)return z=b,1===x.length&&z.type&&z.name&&(b=z.type,e=z.name,l=z._id),J.yield(u.initializeIfNecessary(),2);E=u;G=E.name;return J.return(u.httpDB.fetchSnapshot({db:G,
type:b,name:e,ref:p,commit:l}))})}},{key:"exists",value:function(b,e,l){var p=this,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return z.yield(p.initializeIfNecessary(),2);u=p;x=u.name;return z.return(p.httpDB.exists({db:x,type:b,name:e,ref:l}))})}},{key:"history",value:function(b,e){var l=this,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return x.yield(l.initializeIfNecessary(),2);p=l;u=p.name;return x.return(l.httpDB.fetchVersionGraph({db:u,
type:b,name:e}))})}},{key:"log",value:function(b,e,l,p){l=void 0===l?!1:l;var u=this,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){return 1==E.nextAddress?E.yield(u.initializeIfNecessary(),2):3!=E.nextAddress?(x=u,z=x.name,E.yield(u.httpDB.fetchLog({db:z,commit:b,limit:e,includeCommits:l,knownCommitIds:p}),3)):E.return(E.yieldResult.map(Sg.convertToSerializableCommit))})}},{key:"revert",value:function(b,e,l,p){p=void 0===p?"HEAD":p;var u=this,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==
E.nextAddress)return E.yield(u.initializeIfNecessary(),2);x=u;z=x.name;return E.return(u.httpDB.revert({db:z,type:b,name:e,toCommitId:l,ref:p}))})}},{key:"snapshotAndCommit",value:function(b,e,l,p,u,x,z){var E=this,G,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(K){if(1==K.nextAddress)return K.yield(Sg.createMorphSnapshot(l,p),2);if(3!=K.nextAddress)return G=K.yieldResult,K.yield(E.commit(b,e,G,u,x,z),3);J=K.yieldResult;J=Sg.convertToSerializableCommit(J);l.changeMetaData("commit",
Sg.obj.dissoc(J,["preview"]),!0,!1);return K.return(J)})}},{key:"commit",value:function(b,e,l,p,u,x){var z=this,E=arguments,G,J,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){if(1==T.nextAddress)return G=b,1===E.length&&G.type&&G.name&&(b=G.type,e=G.name,l=G.snapshot||G.content,p=Sg.obj.dissoc(G,["snapshot","_rev","_id","ancestors","deleted"]),x=G._id),T.yield(z.initializeIfNecessary(),2);J=z;K=J.name;return T.return(z.httpDB.commit({db:K,type:b,name:e,ref:u,expectedParentCommit:x,
commitSpec:p,snapshot:l}))})}},{key:"load",value:function(b,e,l,p,u){var x=this,z,E,G,J,K,T,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(da){switch(da.nextAddress){case 1:"object"===typeof b?p=b:z=b;E=p;if(!E)return da.yield(x.fetchCommit(z,e,u),6);if("string"!==typeof E){da.jumpTo(3);break}G=$jscomp;J=G.makeIterator;return da.yield(x.log(E,1,!0),5);case 5:K=J.call(G,da.yieldResult);E=K.next().value;da.jumpTo(3);break;case 6:E=da.yieldResult;case 3:return da.yield(x.fetchSnapshot(void 0,
void 0,E._id),7);case 7:return T=da.yieldResult,da.yield(Sg.loadMorphFromSnapshot(T,l),8);case 8:return P=da.yieldResult,E=Sg.convertToSerializableCommit(E),P.changeMetaData("commit",Sg.obj.dissoc(E,["preview"]),!0,!1),da.return(P)}})}},{key:"fetchDiff",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(e.initializeIfNecessary(),2);l=e;p=l.name;return u.return(e.httpDB.fetchDiff({db:p,otherDB:b}))})}},{key:"fetchConflicts",
value:function(b,e){var l=this,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return x.yield(l.initializeIfNecessary(),2);p=l;u=p.name;return x.return(l.httpDB.fetchConflicts({db:u,includeDocs:b,only:e}))})}},{key:"resolveConflict",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(e.initializeIfNecessary(),2);l=e;p=l.name;return u.return(e.httpDB.resolveConflict(Object.assign({db:p},
b)))})}},{key:"synchronize",value:function(b){var e=b.method,l=b.otherDB,p=b.otherDBSnapshotLocation,u=b.onlyTypesAndNames,x=this,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return G.yield(x.initializeIfNecessary(),2);z=x;E=z.name;return G.return(x.httpDB.synchronize({db:E,method:e,otherDB:l,otherDBSnapshotLocation:p,onlyTypesAndNames:u}))})}},{key:"softDelete",value:function(b,e,l,p,u){var x=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){return z.return(x.commit(b,
e,void 0,l,p,u))})}},{key:"delete",value:function(b,e,l){l=void 0===l?!0:l;var p=this,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return z.yield(p.initializeIfNecessary(),2);u=p;x=u.name;return z.return(p.httpDB.delete({db:x,type:b,name:e,dryRun:l}))})}},{key:"deleteCommit",value:function(b,e){e=void 0===e?!0:e;var l=this,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return x.yield(l.initializeIfNecessary(),2);p=l;
u=p.name;return x.return(l.httpDB.deleteCommit({db:u,commit:b,dryRun:e}))})}},{key:"codeSearchInPackages",value:function(b,e,l,p){e=void 0===e?"part":e;var u=this,x,z,E,G,J,K,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:return P.yield(u.latestCommits(e),2);case 2:x=P.yieldResult,z=[],E=0,"function"===typeof p&&(x=x.filter(p)),G=$jscomp.makeIterator(x),J=G.next();case 3:if(J.done){P.jumpTo(5);break}K=J.value;"function"===typeof l&&l(K.name,E++,x.length);
return P.yield(u._textSearchInSnapshotOfCommit(b,K),6);case 6:T=P.yieldResult;T.length&&z.push.apply(z,$jscomp.arrayFromIterable(T));J=G.next();P.jumpTo(3);break;case 5:return P.return(z)}})}},{key:"_textSearchInSnapshotOfCommit",value:function(b,e,l){var p=this,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return u=e,x=u._id,(z=l)?G.jumpTo(2):G.yield(p.fetchSnapshot(void 0,void 0,x),3);2!=G.nextAddress&&(z=G.yieldResult);E=z;return G.return((new Sg.SnapshotPackageHelper(E)).textSearch(b,
e))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicDB"}},{key:"default",get:function(){return this.named("lively.morphic/objectdb/morphicdb",{serverURL:Sg.getDefaultServerUrl()})}},{key:"named",value:function(b,e){var l=Sg.morphicDBs.get(b);if(l)return l;if(!e.serverURL)throw Error("Needs serverURL!");e=new this(b,e);Sg.morphicDBs.set(b,e);return e}},{key:"wellKnownMorphicDBs",value:function(){var b=this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress)return e=Sg.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),u.yield(e.getAll(),2);l=u.yieldResult;p=l.reduce(function(x,z){var E={};return Object.assign(x,(E[z._id]=b.named(z.name,{serverURL:z.serverURL,snapshotLocation:z.snapshotLocation}),E))},{});p.default||(p.default=b.default);return u.return(p)})}},{key:"addWellKnownMorphicDB",value:function(b,e){var l,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){l=e;p=l.name;u=l.snapshotLocation;
x=l.serverURL;z=Sg.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return E.yield(z.set(b,{name:p,snapshotLocation:u,serverURL:x}),0)})}},{key:"removeWellKnownMorphicDB",value:function(b){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){e=Sg.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return l.yield(e.remove(b),0)})}}],d,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1570,end:10352})}(void 0);HX=Sg.MorphicDB;var Yr=Ma("ag",HX),QN=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),k=d.hasOwnProperty("SnapshotPackageHelper")&&"function"===typeof d.SnapshotPackageHelper?d.SnapshotPackageHelper:d.SnapshotPackageHelper=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.snapshot=b}},{key:"textSearch",value:function(b,e){var l=b&&b instanceof RegExp,p=[];if(!b)return p;for(var u={},x=$jscomp.makeIterator(this.filesInPackages()),z=x.next();!z.done;u={$jscomp$loop$prop$file$2725:u.$jscomp$loop$prop$file$2725},z=x.next()){u.$jscomp$loop$prop$file$2725=z.value;z=u.$jscomp$loop$prop$file$2725.get(this.snapshot);var E=Sg.string.lineIndexComputer(z),G=Sg.string.lineRanges(z);
if(l)z=Sg.string.reMatches(z,b),z.length&&p.push.apply(p,$jscomp.arrayFromIterable(z.map(function(ka){return function(za){return Object.assign(za,{commit:e,file:ka.$jscomp$loop$prop$file$2725})}}(u))));else for(var J=0,K=0;0<=(J=z.indexOf(b));){var T=J+K,P=T+b.length,da=E(T),fa=z.slice.apply(z,$jscomp.arrayFromIterable(G[da]));p.push({match:b,start:T,end:P,length:b.length,line:da,lineString:fa,commit:e,file:u.$jscomp$loop$prop$file$2725});K+=J+b.length;z=z.slice(J+b.length)}}return p}},{key:"filesInPackages",
value:function(){function b(p,u,x,z,E){E=void 0===E?[]:E;if(p["package.json"]&&"string"===typeof p["package.json"])try{var G=JSON.parse(p["package.json"]);z={url:x,path:u,name:G.name||Sg.arr.last(u)}}catch(K){}G=[];for(var J in p)"string"===typeof p[J]?E.push({path:u.concat(J),url:Sg.string.joinPath(x,J),package:z,get:function(K){return Sg.Path(this.path).get(K.packages)},set:function(K,T){Sg.Path(this.path).set(K.packages,T)}}):G.push(J);G.forEach(function(K){return b(p[K],u.concat(K),Sg.string.joinPath(x,
K),z,E)});return E}var e=[],l;for(l in this.snapshot.packages)b(this.snapshot.packages[l],[l],l,null,e);return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotPackageHelper"}}],d,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10361,end:13434})}(void 0);Sg.SnapshotPackageHelper=
QN;Sg.SnapshotPackageHelper=QN;Sg.SnapshotPackageHelper=QN;Sg.default=HX;var Cd=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js");Cd.ensureAbsoluteComponentRefs=function(a){var d=a.snapshotAndPackages,k=void 0===a.localComponents?SD(snapshot):a.localComponents,b=void 0===a.localWorldName?Qh("metadata.commit.name").get($world):a.localWorldName;Object.values(d.packages["local://lively-object-modules/"]||{}).forEach(function(e){Object.entries(e).forEach(function(l){var p=$jscomp.makeIterator(l);
l=p.next().value;p=p.next().value;if(!l.endsWith(".json")){var u=Cd.ast.parse(p),x=[];Cd.ast.AllNodesVisitor.run(u,function(z,E){"Literal"===z.type&&"string"===typeof z.value&&(z.value.match(/^styleguide:\/\/\$world\/.+/)&&!k.includes(z.value.replace("styleguide://$world/",""))&&x.push({target:z,replacementFunc:function(){return JSON.stringify(z.value.replace("$world",b))}}),z.value.match(/^part:\/\/\$world\/.+/)&&!k.includes(z.value.replace("part://$world/",""))&&x.push({target:z,replacementFunc:function(){return JSON.stringify(z.value.replace("$world",
b))}}))});e[l]=Cd.ast.transform.replaceNodes(x,p).source}})})};Cd.findLocalComponents=SD;Cd.prefetchCoreStyleguides=XJ;Cd.getProjectName=function(a){return Cd.Path("metadata.commit.name").get(a)||a.name};Cd.reset=YJ;Cd.clearSnapshot=XT;Cd.arr=Gf;Cd.properties=go;Cd.Path=Qh;Cd.promise=bh;Cd.obj=eg;Cd.registerExtension=xe;Cd.Resource=Cg;Cd.resource=hd;Cd.pt=ui;Cd.MorphicDB=Yr;Cd.ObjectPool=xj;Cd.allPlugins=Mr;Cd.normalizeOptions=MC;Cd.deserializeMorph=aE;Cd.loadPackagesAndModulesOfSnapshot=bE;Cd.subscribeOnce=
function(a,d,k){UH(k).emitter.once(a,d);return d};Cd.once=ts;Cd.ast=bM;Cd.findLocalComponents=SD;Cd.findLocalComponents=SD;var RN=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),k=d.hasOwnProperty("StyleguidePlugin")&&"function"===typeof d.StyleguidePlugin?d.StyleguidePlugin:d.StyleguidePlugin=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"afterSerialization",
value:function(b,e,l){var p={},u="styleguide://"+Cd.getProjectName($world);Cd.findLocalComponents(e).forEach(function(x){return p[u+"/"+x]="styleguide://$world/"+x});Object.values(e).forEach(function(x){if((x=x.props.master)&&x.value)for(var z in p)Object.values(b.expressionSerializer.deserializeExpr(x.value)).includes(z)&&(x.value=x.value.split(z).join(p[z]))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleguidePlugin"}}],d,{pathInPackage:function(){return"style-guide.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3123,end:4357})}(void 0);Cd.StyleguidePlugin=RN;Cd.StyleguidePlugin=RN;Cd.StyleguidePlugin=RN;Cd.prefetchCoreStyleguides=XJ;Cd.prefetchCoreStyleguides=XJ;var SN=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),k=d.hasOwnProperty("ComponentPolicy")&&
"function"===typeof d.ComponentPolicy?d.ComponentPolicy:d.ComponentPolicy=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.derivedMorph=b;this._overriddenProps=new WeakMap;if(e.isMorph||"string"===typeof e)this.auto=e,e.isMorph&&(this.auto.isComponent=!0),"string"===typeof e&&this.resolveMasterComponents();else{b=e.click;var l=e.auto,
p=e.hover,u=void 0===e.light?{}:e.light;e=void 0===e.dark?{}:e.dark;u&&(this.light=u);e&&(this.dark=e);b&&(this.click=b);l&&(this.auto=l);p&&(this.hover=p);this.resolveMasterComponents()}}},{key:"uses",value:function(b){return[this.auto,this.click,this.hover].includes(b)}},{key:"spec",value:function(){return Cd.obj.select(this,["auto","click","hover","light","dark"])}},{key:"equals",value:function(b){if(!b)return!1;if("string"===typeof b){b=b.replace("styleguide://$world","styleguide://"+Cd.getProjectName($world));
var e=this.getResourceUrlFor(this.auto);e&&(e=e.replace("styleguide://$world","styleguide://"+Cd.getProjectName($world)));return e==b}e=$jscomp.makeIterator(["auto","click","hover"]);for(var l=e.next();!l.done;l=e.next())if(l=l.value,"string"===typeof b[l]){if(this.getResourceUrlFor(this[l])!=b[l])return!1}else if((this[l]||null)!=(b[l]||null))return!1;return!0}},{key:"getManagedMorphs",value:function(){var b=this,e=[];this.derivedMorph.withAllSubmorphsDo(function(l){b.managesMorph(l)&&0<Object.keys(b._overriddenProps.get(l)).filter(function(p){return"_rev"!=
p}).length&&e.push([l,Object.keys(b._overriddenProps.get(l))])});return e}},{key:"__dont_serialize__",get:function(){var b=["_overriddenProps","_applying","_appliedMaster","_hasUnresolvedMaster"];Cd.obj.isEmpty(this.dark)&&b.push("dark");Cd.obj.isEmpty(this.light)&&b.push("light");return b}},{key:"__serialize__",value:function(){var b=this,e={},l=function(p){return Cd.obj.isString(p)?p:b.getResourceUrlFor(p)};this.auto&&(e.auto=l(this.auto));this.click&&(e.click=l(this.click));this.hover&&(e.hover=
l(this.hover));return{__expr__:"("+JSON.stringify(e)+")"}}},{key:"__after_deserialize__",value:function(b,e){this._overriddenProps=new WeakMap;delete this.managedMorphs;this.resolveMasterComponents()}},{key:"whenApplied",value:function(){var b=this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?(e=Cd.promise.deferred(),l=e.promise,p=e.resolve,Cd.once(b,"_appliedMaster",p),u.yield(b._hasUnresolvedMaster,2)):3!=u.nextAddress?b._appliedMaster?u.jumpTo(3):
u.yield(l,3):u.return(!0)})}},{key:"whenReady",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.yield(b._hasUnresolvedMaster,0)})}},{key:"getResourceUrlFor",value:function(b){return b?b._resourceHandle?b._resourceHandle.url.replace("$world",Cd.getProjectName($world)):void 0==b.name?null:"styleguide://"+Cd.getProjectName($world)+"/"+b.name:null}},{key:"getWorldUrlFor",value:function(b){b=Cd.resource("string "===typeof b?b:this.getResourceUrlFor(b)).worldName;
return b==Cd.getProjectName($world)?document.location.href:Cd.worldToUrl[b]}},{key:"resolveMasterComponents",value:function(){var b=this,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){switch(Ia.nextAddress){case 1:e=Cd.promise.deferred(),b._hasUnresolvedMaster=e.promise,l=b,p=void 0===l.light?{}:l.light,u=void 0===l.dark?{}:l.dark,x=["auto","click","hover"],z=[],Ia.setCatchFinallyBlocks(2),E=$jscomp.makeIterator(x),G=E.next();case 4:if(G.done){Ia.leaveTryBlock(3);
break}J=G.value;if("string"!==typeof b[J]){Ia.jumpTo(7);break}K=b;T=J;return Ia.yield(Cd.resource(b[J]).read(),8);case 8:K[T]=Ia.yieldResult;case 7:if("string"!==typeof p[J]){Ia.jumpTo(9);break}P=p;da=J;return Ia.yield(Cd.resource(p[J]).read(),10);case 10:P[da]=Ia.yieldResult;case 9:if("string"!==typeof u[J]){Ia.jumpTo(11);break}fa=u;ka=J;return Ia.yield(Cd.resource(u[J]).read(),12);case 12:fa[ka]=Ia.yieldResult;case 11:z.push(b[J],p[J],u[J]);G=E.next();Ia.jumpTo(4);break;case 2:throw za=Ia.enterCatchBlock(),
Error("Encountered invalid master component reference: "+za.message);case 3:Cd.arr.compact(z).forEach(function(N){N.isComponent||(N.isComponent=!0)}),e.resolve(),b._hasUnresolvedMaster=!1,Ia.jumpToEnd()}})}},{key:"applyAnimated",value:function(b){b=void 0===b?{duration:1E3}:b;var e=Cd.promise.deferred(),l=e.promise;e=e.resolve;this.applyIfNeeded(!0,b);Cd.once(this,"_animationConfig",e);return l}},{key:"applyIfNeeded",value:function(b,e){var l=this;b=void 0===b?!1:b;if(e=void 0===e?!1:e)this._animationConfig=
e;var p=this.derivedMorph;if(p.env.world)if(p.env.eventDispatcher){if(this._hasUnresolvedMaster)return this._originalOpacity=p.opacity,p.withMetaDo({metaInteraction:!0},function(){e||[p].concat($jscomp.arrayFromIterable(p.ownerChain())).find(function(x){return x.isComponent})||(p.opacity=0)}),this._hasUnresolvedMaster.then(function(){l.applyIfNeeded(b);p.withMetaDo({metaInteraction:!0},function(){p.opacity=l._originalOpacity});delete l._originalOpacity;delete l._capturedExtents});var u=this.determineMaster(p);
u&&this._appliedMaster!=u&&(b=!0);u&&b&&(this.apply(p,u),this._appliedMaster=u)}else Cd.once(p.env,"eventDispatcher",function(){l.applyIfNeeded(b,e)});else Cd.once(p.env,"world",function(){l.applyIfNeeded(b,e)})}},{key:"getStyleProperties",value:function(b){var e=b.propertiesAndPropertySettings();b=e.properties;var l=[];e=$jscomp.makeIterator(e.order);for(var p=e.next();!p.done;p=e.next())p=p.value,b[p].isStyleProp&&l.push(p);return l}},{key:"apply",value:function(b,e,l){var p=this;l=void 0===l?this._animationConfig:
l;if(!this._applying){this._applying=!0;try{var u=function(){return b.withMetaDo({metaInteraction:!0},function(){var x=p.prepareSubmorphsToBeManaged(b,e);e.withAllSubmorphsDoExcluding(function(z){var E=z==e,G=E?b:x[z.name];if(G)if(Cd.obj.isArray(G)&&(G=G.pop()),!z.master||E||z.master.equals(G.master)||p._overriddenProps.get(G).master||(G.master=z.master.spec(),G.requestMasterStyling()),G.master&&!E)E=G.master._overriddenProps.get(G)||{},E.position||(G.position=z.position),E.extent||(G.extent=z.extent);
else{E=$jscomp.makeIterator(p.getStyleProperties(z));for(var J=E.next();!J.done;J=E.next())if(J=J.value,!p._overriddenProps.get(G)[J])if("layout"==J)G.layout&&z.layout&&G.layout.name()==z.layout.name()&&G.layout.equals(z.layout)||(G.layout=z.layout?z.layout.copy():void 0);else{if(z==e){if("extent"==J&&!G.extent.equals(Cd.pt(10,10))&&(!G.owner||G.owner.isWorld||G.ownerChain().find(function(K){return K.master&&K.master.managesMorph(G)})))continue;if("position"==J)continue}G.isLabel&&"extent"==J||["border",
"borderTop","borderBottom","borderRight","borderLeft"].includes(J)||(Cd.obj.equals(G[J],z[J])||(G[J]=z[J]),["fixedHeight","fixedWidth"].includes(J)&&G._parametrizedProps&&G._parametrizedProps.extent&&(G.extent=G._parametrizedProps.extent))}G._parametrizedProps&&delete G._parametrizedProps}},function(z){return e!=z&&z.master})})};l?b.withAnimationDo(u,l).then(function(){p._animationConfig=!1;p._applying=!1}):b.dontRecordChangesWhile(u)}finally{l||(this._applying=!1),delete b._parametrizedProps}}}},
{key:"clearOverriddenPropertiesFor",value:function(b,e){var l=this._overriddenProps.get(b);this._overriddenProps.set(b,Cd.obj.dissoc(l,e))}},{key:"prepareSubmorphsToBeManaged",value:function(b,e){var l=this,p={};b.withAllSubmorphsDoExcluding(function(u){p[u.name]&&(Cd.obj.isArray(p[u.name])?p[u.name].push(u):p[u.name]=[p[u.name],u]);p[u.name]=u},function(u){return u!=b&&u.master});e.withAllSubmorphsDoExcluding(function(u){if(u=u==e?b:p[u.name])Cd.obj.isArray(u)&&(u=u.pop()),l.prepareMorphToBeManaged(u)},
function(u){return u!=e&&u.master});return p}},{key:"managedMorphs",get:function(){var b=this,e=Cd.arr.groupBy(this.derivedMorph.withAllSubmorphsSelect(function(p){return b.managesMorph(p)}),function(p){return p.name}),l;for(l in e)e[l]=e[l][0];return e}},{key:"reconcileSubmorphs",value:function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(b.whenReady(),2);e=b.managedMorphs;l=b._appliedMaster||b.auto;e[l.name]=b.derivedMorph;if(!l)return p.return();
b.derivedMorph.submorphs=l.copy().submorphs;b.derivedMorph.submorphs.forEach(function(u,x){u.position=l.submorphs[x].position});b.prepareSubmorphsToBeManaged(b.derivedMorph,l);p.jumpToEnd()})}},{key:"managesMorph",value:function(b){return this._overriddenProps.has(b)}},{key:"propsToSerializeForMorph",value:function(b,e){if(!this.managesMorph(b))return e;for(var l=[],p=$jscomp.makeIterator(this.getStyleProperties(b)),u=p.next();!u.done;u=p.next())u=u.value,this._overriddenProps.get(b)[u]||!("position"==
u&&b==this.derivedMorph||"extent"==u&&b==this.derivedMorph)&&l.push(u);return Cd.arr.withoutAll(e,l)}},{key:"prepareMorphToBeManaged",value:function(b){if(!this._overriddenProps.has(b)){var e={},l;for(l in b._parametrizedProps)"__takenFromSnapshot__"!=l&&(e[l]=!0);this._overriddenProps.set(b,e)}}},{key:"determineMaster",value:function(b){var e=b.env.world.colorScheme,l=b.env.eventDispatcher.isMorphHovered(b);b=b.env.eventDispatcher.isMorphClicked(b);var p=this.getMasterForState(this,{isHovered:l,
isClicked:b});this.light&&"light"==e&&(p=this.getMasterForState(this.light,{isHovered:l,isClicked:b})||p);this.dark&&"dark"==e&&(p=this.getMasterForState(this.light,{isHovered:l,isClicked:b})||p);return p}},{key:"getMasterForState",value:function(b,e){var l=b.auto,p=b.hover,u=b.click,x=e.isClicked;b=l;if(e.isHovered)if(p)b=p;else for(e=b&&b.master,p=[];e;){if(e.hover){b=e.hover;break}e=Cd.Path("auto.master").get(e);if(p.includes(e))break;p.push(e)}if(x)if(b=l,u)b=u;else for(l=b&&b.master,u=[];l;){if(l.click){b=
l.click;break}l=Cd.Path("auto.master").get(l);if(u.includes(l))break;u.push(l)}return b}},{key:"onMorphChange",value:function(b,e){if(!this._applying&&!Cd.Path("meta.metaInteraction").get(e)&&!["_rev","name"].includes(e.prop)&&("opacity"==e.prop&&delete this._originalOpacity,"master"==e.prop&&this.managesMorph(b)&&(this._overriddenProps.get(b).master=!0),b.styleProperties.includes(e.prop)))if(this.managesMorph(b)){if(!b.master||b.master==this||["extent","position"].includes(e.prop))this._overriddenProps.get(b)[e.prop]=
!0}else if(b._parametrizedProps)b._parametrizedProps[e.prop]=e.value;else{var l={};b._parametrizedProps=(l[e.prop]=e.value,l)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentPolicy"}},{key:"for",value:function(b,e){e=e.constructor===Cd.ComponentPolicy?e:new this(b,e);b.master&&(e._overriddenProps=b.master._overriddenProps);return e}}],d,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5251,end:28442})}(void 0);Cd.ComponentPolicy=SN;Cd.ComponentPolicy=SN;Cd.ComponentPolicy=SN;Cd.styleGuideURLRe=/^styleguide:\/\/([^\/]+)\/(.*)$/;Cd.fetchedSnapshots=Cd.fetchedSnapshots||{};Cd.fetchedMasters=Cd.fetchedMasters||{};Cd.resolvedMasters=Cd.resolvedMasters||{};Cd.modulesToLoad=Cd.modulesToLoad||{};Cd.li=Cd.li||void 0;Cd.localNamePromise=Cd.localNamePromise||void 0;Cd.masterComponentFetches=Cd.masterComponentFetches||
{};Cd.worldToUrl=Cd.worldToUrl||{};var lca=Ma("bS",Cd.resolvedMasters);Cd.resolvedMasters=lca;Cd.resolvedMasters=lca;Cd.reset=YJ;Cd.reset=YJ;Cd.clearSnapshot=XT;Cd.clearSnapshot=XT;var AF=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),k=d.hasOwnProperty("StyleGuideResource")&&"function"===typeof d.StyleGuideResource?d.StyleGuideResource:d.StyleGuideResource=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $b(k,a,[{key:"canDealWithJSON",get:function(){return!1}},{key:"componentName",get:function(){var b=this.url.match(Cd.styleGuideURLRe);b=$jscomp.makeIterator(b);b.next();b.next();return b.next().value}},{key:"worldName",get:function(){var b=this.url.match(Cd.styleGuideURLRe);b=$jscomp.makeIterator(b);b.next();var e=b.next().value;b.next();"$world"==e&&(e=this.localWorldName());return e}},{key:"dirList",value:function(b,e){var l=this,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return l.worldName==
Cd.getProjectName($world)?u.return(Cd.arr.uniq([].concat($jscomp.arrayFromIterable($world.localComponents),$jscomp.arrayFromIterable($world.withAllSubmorphsSelect(function(x){return x.isComponent}))))):(p=Cd.resolvedMasters[l.worldName])?u.return(Object.values(p)):u.return([])})}},{key:"localWorldName",value:function(){var b;if(b=Cd.getProjectName($world))return b;if(Cd.localNamePromise)return Cd.localNamePromise;b=Cd.promise.deferred();var e=b.resolve;Cd.localNamePromise=b.promise;if("__newWorld__"==
Cd.resource(document.location.href).query().name)return e("__newWorld__"),Cd.localNamePromise;Cd.subscribeOnce("world/loaded",function(){e(Cd.getProjectName($world))},System);return Cd.localNamePromise}},{key:"fetchFromMasterDir",value:function(b,e){var l=b.join(this.worldName).join(e+".json");if(Cd.masterComponentFetches[l.url])return Cd.masterComponentFetches[l.url];Cd.masterComponentFetches[l.url]=function(){var p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){return 1==x.nextAddress?
(p=Cd,u=p.deserializeMorph,x.yield(l.readJson(),2)):x.return(u.call(p,x.yieldResult))})}();return Cd.masterComponentFetches[l.url]}},{key:"read",value:function(){var b=this,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(za){switch(za.nextAddress){case 1:return e=b.componentName,za.yield(b.worldName,2);case 2:l=za.yieldResult;if(p=Cd.Path([l,b.componentName]).get(Cd.resolvedMasters))return za.return(p);u=Cd.resource(System.baseURL).join("components_cache").join(l).join(e+
".json");return"undefined"===typeof Cd.fetchedMasters[u.url]?(z=Cd.promise.deferred(),x=z.resolve,Cd.fetchedMasters[u.url]=z.promise,za.yield(b.localWorldName(),6)):za.yield(Cd.fetchedMasters[u.url],5);case 5:p=za.yieldResult;za.jumpTo(4);break;case 6:if(za.yieldResult==l){p="undefined"!==typeof $world&&$world.localComponents.find(function(Ia){return Ia.name==e});if(!p)throw Error('Master component "'+e+'" can not be found in "'+l+'"');x(p);za.jumpTo(4);break}return za.yield(u.exists(),8);case 8:if(!za.yieldResult){x(null);
za.jumpTo(4);break}Cd.worldToUrl[l]=Cd.resource(System.baseURL).join("worlds/load").withQuery({file:"lively.morphic/styleguides/"+l+".json"}).url;return za.yield(u.readJson(),10);case 10:return E=za.yieldResult,za.yield(Cd.loadPackagesAndModulesOfSnapshot(E),11);case 11:return p=Cd.deserializeMorph(E),za.yield(b.resolveComponent(p),12);case 12:x(p);case 4:if(p)return za.return(p);Cd.fetchedSnapshots[l]||(console.log("scheduling fetch of",l),J=Cd.promise.deferred(),G=J.resolve,Cd.fetchedSnapshots[l]=
J.promise);return G?(T=Cd.MorphicDB.default,za.yield(T.fetchCommit("world",l),16)):za.yield(Cd.fetchedSnapshots[l],15);case 15:K=za.yieldResult;za.jumpTo(14);break;case 16:if(za.yieldResult)return za.yield(T.fetchSnapshot("world",l),22);P=Cd.resource(System.baseURL).join("lively.morphic/styleguides").join(l+".json");return za.yield(P.exists(),19);case 19:if(!za.yieldResult){G(null);za.jumpTo(18);break}return za.yield(P.readJson(),21);case 21:K=za.yieldResult;Cd.worldToUrl[l]=Cd.resource(System.baseURL).join("worlds/load").withQuery({file:"lively.morphic/styleguides/"+
l+".json"}).url;za.jumpTo(18);break;case 22:K=za.yieldResult,Cd.worldToUrl[l]=Cd.resource(System.baseURL).join("worlds/load").withQuery({name:l}).url;case 18:return Cd.ensureAbsoluteComponentRefs({snapshotAndPackages:K,localComponents:[],localWorldName:b.worldName}),za.yield(Cd.loadPackagesAndModulesOfSnapshot(K),23);case 23:Object.values(K.snapshot).filter(function(Ia){return Ia.props.master}).forEach(function(Ia){var N=Ia.props.master.value;Cd.obj.isString(N)&&(Ia.props.master.value=N.split("$world").join(b.worldName))}),
G(K);case 14:da=new Cd.ObjectPool(Cd.normalizeOptions({plugins:[new Cd.StyleguidePlugin].concat($jscomp.arrayFromIterable(Cd.allPlugins))}));fa=$jscomp.makeIterator(Object.entries(K.snapshot).find(function(Ia){Ia=$jscomp.makeIterator(Ia);Ia.next();Ia=Ia.next().value;return Cd.Path("props.isComponent.value").get(Ia)&&Cd.Path("props.name.value").get(Ia)==e})||[]);ka=fa.next().value;if(!ka)throw Error('Master component "'+e+'" can not be found in "'+l+'"');p=da.resolveFromSnapshotAndId(Object.assign({},
K,{id:ka}));return za.yield(b.resolveComponent(p),24);case 24:return za.return(za.yieldResult)}})}},{key:"resolveComponent",value:function(b){var e=this,l,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:l=e.componentName;Cd.resolvedMasters[e.worldName]?Cd.resolvedMasters[e.worldName][l]=b:(p={},Cd.resolvedMasters[e.worldName]=(p[l]=b,p));b._resourceHandle=e;if(!b._pool||!b._pool.mastersInSubHierarchy){E.jumpTo(2);break}u=$jscomp.makeIterator(b._pool.mastersInSubHierarchy);
x=u.next();case 3:if(x.done){E.jumpTo(5);break}z=x.value;return E.yield(z.applyIfNeeded(!0),6);case 6:z.derivedMorph.ownerChain().includes(b)||z.derivedMorph.requestMasterStyling();x=u.next();E.jumpTo(3);break;case 5:delete b._pool;case 2:return E.return(b)}})}},{key:"write",value:function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){throw Error("Master Components can not be written to!");})}},{key:"exists",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){e=
"undefined"!==typeof $world&&$world.localComponents.find(function(p){return p.name==b.morphName});return l.return(e&&e.isComponent)})}},{key:"remove",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(e="undefined"!==typeof $world&&$world.localComponents.find(function(p){return p.name==b.morphName}))e.isComponent=!1;return l.return(!0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleGuideResource"}}],d,{pathInPackage:function(){return"style-guide.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:32223,end:39780})}(Cd.Resource);Cd.StyleGuideResource=AF;Cd.StyleGuideResource=AF;Cd.StyleGuideResource=AF;var TN={name:"styleguide",matches:function(a){return a.match(Cd.styleGuideURLRe)},resourceClass:Cd.StyleGuideResource};Cd.resourceExtension=TN;Cd.resourceExtension=TN;Cd.resourceExtension=
TN;Cd.registerExtension(Cd.resourceExtension);var fo=lively.FreezerRuntime.recorderFor("lively.modules/src/hooks.js");fo.install=qu;fo.remove=cx;fo.isInstalled=ru;fo.arr=Gf;fo.fun=Vl;fo.install=qu;fo.install=qu;fo.remove=cx;fo.remove=cx;fo.isInstalled=ru;fo.isInstalled=ru;var UN=lively.FreezerRuntime.recorderFor("lively.modules/src/cycle-breaker.js");UN.classHolder={};var gt=UN.classHolder;UN.classHolder=gt;UN.classHolder=gt;var Ps=lively.FreezerRuntime.recorderFor("lively.modules/src/dependencies.js");
Ps.computeRequireMap=TD;Ps.graph=Ts;Ps.arr=Gf;Ps.obj=eg;Ps.loadedModules=wK;Ps.computeRequireMap=TD;Ps.computeRequireMap=TD;var hn=lively.FreezerRuntime.recorderFor("lively.modules/src/import-export.js");hn.scheduleModuleExportsChange=UD;hn.runScheduledExportChanges=ZJ;hn.clearPendingModuleExportChanges=function(a,d){delete a.get("@lively-env").pendingExportChanges[d]};hn.updateModuleExports=function(a,d,k){var b=a.debug;hn.module(a,d).updateRecord(function(e){var l=[],p=[];Object.keys(k).forEach(function(K){var T=
k[K];b&&console.log("[lively.vm es6 updateModuleExports] %s export %s = %s",d,K,String(T).slice(0,30).replace(/\n/g,"")+"...");var P=!(K in e.exports);P&&(e.__lively_modules__.evalOnlyExport[K]=!0);e.exports[K]=T;P?l.push(K):p.push(K)});if(l.length){var u=a.get(d);Object.isFrozen(u)?(console.warn("[lively.vm es6 updateModuleExports] Since module %s is frozen a new module object was installed in the system. Note that only(!) exisiting module bindings are updated. New exports that were added will only be available in already loaded modules after those are reloaded!",
d),a.set(d,a.newModule(e.exports))):(b&&console.log("[lively.vm es6 updateModuleExports] adding new exports to %s",d),l.forEach(function(K){Object.defineProperty(u,K,{configurable:!1,enumerable:!0,get:function(){return e.exports[K]},set:function(){throw Error("exports cannot be changed from the outside");}})}))}if(p.length){b&&console.log("[lively.vm es6 updateModuleExports] updating %s dependents of %s",e.importers.length,d);for(var x=0,z=e.importers.length;x<z;x++){var E=e.importers[x];if(!E.locked){var G;
if(E.dependencies.some(function(K,T){G=T;return K&&K.name===e.name})){if(b){var J=hn.module(a,E.name);console.log("[lively.vm es6 updateModuleExports] calling setters of "+J.package().name+"/"+J.pathInPackage())}hn.module(a,E.name).evaluationStart();E.setters[G](e.exports);hn.module(a,E.name).evaluationEnd()}}}}})};hn.module=ex;hn.scheduleModuleExportsChange=UD;hn.scheduleModuleExportsChange=UD;hn.runScheduledExportChanges=ZJ;hn.runScheduledExportChanges=ZJ;var ck=lively.FreezerRuntime.recorderFor("lively.modules/src/change.js");
ck.moduleSourceChange=VD;ck.moduleSourceChangeEsm=function(a,d,k,b){var e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(za){switch(za.nextAddress){case 1:return e=a.debug,l={status:"loading",source:k,name:d,address:d,linkSets:[],dependencies:[],metadata:{format:"esm"}},za.yield(ck.instrumentSourceOfEsmModuleLoad(a,l),2);case 2:p=za.yieldResult,u=function(Ia,N){return ck.scheduleModuleExportsChange(a,l.name,Ia,N,!0)},x=p.declare(u),e&&console.log("[lively.vm es6] sourceChange of %s with deps",
l.name,p.localDeps),z=[],E=$jscomp.makeIterator(p.localDeps),G=E.next();case 3:if(G.done){za.jumpTo(5);break}J=G.value;return za.yield(a.normalize(J,l.name),6);case 6:return K=za.yieldResult,T=ck.classHolder.module(a,K),za.yield(T.load(),7);case 7:P=za.yieldResult;z.push({name:J,fullname:K,module:T,exports:P});G=E.next();za.jumpTo(3);break;case 5:if(da=a.loads&&a.loads[l.name])da.deps=z.map(function(Ia){return Ia.name}),da.depMap=z.reduce(function(Ia,N){Ia[N.name]=N.fullname;return Ia},{}),da.metadata&&
da.metadata.entry&&(da.metadata.entry.deps=da.deps,da.metadata.entry.normalizedDeps=z.map(function(Ia){return Ia.fullname}),da.metadata.entry.declare=p.declare);fa=ck.classHolder.module(a,l.name);ka=fa.record();z.forEach(function(Ia,N){return fa.addDependencyToModuleRecord(Ia.module,x.setters[N])});ka&&(ka.execute=x.execute);z.forEach(function(Ia,N){return x.setters[N](Ia.exports)});return za.return(x.execute())}})};ck.moduleSourceChangeGlobal=function(a,d,k,b){var e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress)return e={status:"loading",source:k,name:d,address:d,linkSets:[],dependencies:[],metadata:{format:"global"}},a.get(d)?u.jumpTo(2):u.yield(a.import(d),2);if(4!=u.nextAddress)return u.yield(ck.instrumentSourceOfGlobalModuleLoad(a,e),4);l=u.yieldResult;e.source=l.translated;p=ck.doInstantiateGlobalModule(a,e);a.delete(d);a.set(p.name,p.esModule);return u.return(p.module)})};ck.doInstantiateGlobalModule=function(a,d){var k=ck.__createEntry();k.name=d.name;k.esmExports=!0;d.metadata.entry=
k;k.deps=[];for(var b in d.metadata.globals){var e=d.metadata.globals[b];e&&k.deps.push(e)}k.execute=function(l,p,u){(p=(p=ck.classHolder.module(a,u.id).metadata())&&p.entry&&p.entry.module&&p.entry.module.exports)&&Object.keys(p).forEach(function(E){try{delete a.global[E]}catch(G){console.warn('[lively.modules] executeGlobalModule: Cannot delete global["'+E+'"]')}});if(d.metadata.globals){var x={};for(var z in d.metadata.globals)d.metadata.globals[z]&&(x[z]=l(d.metadata.globals[z]))}if(l=d.metadata.exports)d.source+=
'\nSystem.global["'+l+'"] = '+l+";";u=a.get("@@global-helpers").prepareGlobal(u.id,l,x);ck.__evaluateGlobalLoadSource(a,d);return u()};return ck.runExecuteOfGlobalModule(a,k)};ck.__createEntry=function(){return{name:null,deps:null,originalIndices:null,declare:null,execute:null,executingRequire:!1,declarative:!1,normalizedDeps:null,groupIndex:null,evaluated:!1,module:null,esModule:null,esmExports:!1}};ck.__evaluateGlobalLoadSource=function(a,d){function k(){0==--e&&(l.System=l.SystemJS=b)}var b,e=
0,l=a.global;return function(p){try{0==e++&&(b=l.System),l.System=l.SystemJS=this,(0,eval)(p.source),k()}catch(u){throw k(),Error("Error evaluating "+p.address+":\n"+u.stack);}}.call(a,d)};ck.runExecuteOfGlobalModule=function(a,d){var k={},b=d.module={exports:k,id:d.name};d.evaluated=!0;if(k=d.execute.call(a.global,function(e){var l=d.deps.find(function(p){return p===e});if(l=l&&a.get(d.normalizedDeps[d.deps.indexOf(l)])||a.get(a.decanonicalize(e,d.name)))return l;throw Error("Module "+e+" not declared as a dependency of "+
d.name);},k,b))b.exports=k;k=b.exports;b=a.get("@system-env").constructor;d.esModule=k&&(k.__esModule||k instanceof b)?k:d.esmExports&&k!==a.global?a.newModule(k):{default:k};return d};ck.arr=Gf;ck.emit=ss;ck.instrumentSourceOfEsmModuleLoad=mK;ck.instrumentSourceOfGlobalModuleLoad=nK;ck.scheduleModuleExportsChange=UD;ck.classHolder=gt;ck.moduleSourceChange=VD;ck.moduleSourceChange=VD;var tm=lively.FreezerRuntime.recorderFor("lively.modules/src/url-helpers.js");tm.isJsFile=YT;tm.asDir=ZT;tm.isURL=
dx;tm.urlResolve=$J;tm.string=Dh;tm.isJsFile=YT;tm.isJsFile=YT;tm.asDir=ZT;tm.asDir=ZT;var BF=tm.string.joinPath;tm.join=BF;tm.join=BF;tm.join=BF;tm.isURL=dx;tm.isURL=dx;tm.urlResolve=$J;tm.urlResolve=$J;var Mp=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/configuration.js");Mp.arr=Gf;Mp.obj=eg;Mp.isURL=dx;Mp.installHook=qu;Mp.isHookInstalled=ru;var Zr=function(a){this.pkg=a};Zr.prototype.applyConfig=function(a){var d=this.System,k=this.packageURL,b=this.pkg;a=Mp.obj.deepMerge(b.config,
a);var e=a.name||k.split("/").slice(-1)[0],l=a.version,p=a.systemjs||{},u=a.lively,x=a.main||"index.js",z={},E={};d.config({map:(z[e]=k,z),packages:(E[k]=Object.assign({},p,{meta:Object.assign({"package.json":{format:"json"}},p.meta),configured:!0}),E)});d.packages[k].configured=!0;d=d.getConfig().packages[k]||{};d.map||(d.map={});p&&(u&&u.main?x=u.main:p.main&&(x=p.main),this.applySystemJSConfig(p));x.match(/\.[^\/\.]+/)||(x+=".js");d.main=x;b.version=l;b.config=a;b._name=e;b.mergeWithConfig(d);
return u?this.applyLivelyConfig(u):{subPackages:[]}};Zr.prototype.applySystemJSConfig=function(a){var d=this.System;a.packageConfigPaths&&d.config({packageConfigPaths:Mp.arr.uniq(d.packageConfigPaths.concat(a.packageConfigPaths))});a.packages&&d.config({packages:a.packages});a.globalmap&&d.config({map:a.globalmap});a.babelOptions&&d.config({babelOptions:a.babelOptions});a.meta&&d.config({meta:a.meta})};Zr.prototype.applyLivelyConfig=function(a){this.applyLivelyConfigMeta(a);this.applyLivelyConfigHooks(a);
this.applyLivelyConfigBundles(a)};Zr.prototype.applyLivelyConfigHooks=function(a){var d=this;(a.hooks||[]).forEach(function(k){try{var b=eval("("+k.source+")");b.name&&Mp.isHookInstalled(d.System,k.target,b.name)||Mp.installHook(d.System,k.target,b)}catch(e){console.error("Error installing hook for %s: %s",d.packageURL,e,k)}})};Zr.prototype.applyLivelyConfigBundles=function(a){var d=this;if(!a.bundles)return Promise.resolve();var k=Object.keys(a.bundles).reduce(function(b,e){var l=d.packageURL+"/"+
e;e=a.bundles[e].map(function(p){return d.System.decanonicalize(p,d.packageURL+"/")});b[l]=e;return b},{});this.System.config({bundles:k});return Promise.resolve()};Zr.prototype.applyLivelyConfigMeta=function(a){if(a.meta){var d=this.System.getConfig().packages[this.packageURL]||{},k={},b={meta:{},packages:(k[this.packageURL]=d,k)};Object.keys(a.meta).forEach(function(e){var l=a.meta[e];Mp.isURL(e)?b.meta[e]=l:(d.meta||(d.meta={}),d.meta[e]=l)});this.System.config(b)}};$jscomp.global.Object.defineProperties(Zr.prototype,
{System:{configurable:!0,enumerable:!0,get:function(){return this.pkg.System}},packageURL:{configurable:!0,enumerable:!0,get:function(){return this.pkg.url}}});Mp.PackageConfiguration=Zr;Mp.default=Zr;var gf=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package.js");gf.normalizePackageURL=function(a,d,k){k=void 0===k?[]:k;if(k.some(function(b){return b===d}))return d;a=a.decanonicalize(d.replace(/[\/]+$/,"")+"/");if(!gf.isURL(a))throw Error("Strange package URL: "+a+" is not a valid URL");
a.match(/\.js/)&&(a=-1<a.indexOf(a+".js")?a.replace(/\.js$/,""):a.split("/").slice(0,-1).join("/"));a.match(/\.js$/)&&console.warn("packageURL is expected to point to a directory but seems to be a .js file: "+a);return String(a).replace(/\/$/,"")};gf.lookupPackage=aK;gf.ensurePackage=bK;gf.getPackage=WD;gf.applyConfig=cK;gf.importPackage=dK;gf.removePackage=eK;gf.reloadPackage=fK;gf.registerPackage=gK;gf.getPackageSpecs=hK;gf.arr=Gf;gf.promise=bh;gf.obj=eg;gf.emit=ss;gf.module=ex;gf.resource=hd;gf.PackageConfiguration=
Zr;gf.isURL=dx;gf.join=BF;gf.classHolder=gt;var jj=function(a,d,k,b,e){e=void 0===e?{}:e;this.System=a;this.url=d;this.registerProcess=null;this.map={};this.setConfig(e)};jj.allPackages=function(a){return gf.obj.values(gf.classHolder.PackageRegistry.ofSystem(a).byURL)};jj.allPackageURLs=function(a){return gf.classHolder.PackageRegistry.ofSystem(a).allPackageURLs()};jj.forModule=function(a,d){return this.forModuleId(a,d.id)};jj.forModuleId=function(a,d){return(d=gf.classHolder.ModulePackageMapping.forSystem(a).getPackageURLForModuleId(d))?
gf.getPackage(a,d,!0):null};jj.fromJSON=function(a,d){return(new gf.Package(a)).fromJSON(d)};jj.prototype.setConfig=function(a){this._name=a.name;this.version=a.version;this.dependencies=a.dependencies||{};this.devDependencies=a.devDependencies||{};this.main=a.main||"index.js";this.systemjs=a.systemjs;this.lively=a.lively};jj.prototype.toJSON=function(){var a=this.System,d=gf.obj.select(this,"url _name version map dependencies devDependencies main systemjs lively".split(" "));d.url.startsWith(a.baseURL)&&
(d.url=d.url.slice(a.baseURL.length).replace(/^\//,""));return d};jj.prototype.fromJSON=function(a){var d=this.System;this.url=a.url;this._name=a._name;this.version=a.version;this.map=a.map||{};this.main=a.main;this.dependencies=a.dependencies||{};this.devDependencies=a.devDependencies||{};this.systemjs=a.systemjs;this.lively=a.lively;gf.isURL(this.url)||(this.url=gf.join(d.baseURL,this.url));this.registerWithConfig();return this};jj.prototype.asSpec=function(){return Object.assign({},gf.obj.select(this,
"name main map meta url address version lively".split(" ")),{modules:this.modules().map(function(a){return{name:a.id,deps:a.directRequirements().map(function(d){return d.id})}})})};jj.prototype.path=function(){var a=this.System.baseURL;return 0===this.url.indexOf(a)?this.url.slice(a.length):this.url};jj.prototype.modules=function(){var a=this.url,d=this.System;return gf.classHolder.ModulePackageMapping.forSystem(d).getModuleIdsForPackageURL(a).map(function(k){return gf.module(d,k)})};jj.prototype.resources=
function(a,d){d=void 0===d?[".git","node_modules",".module_cache","lively.next-node_modules"]:d;var k=this,b,e,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return b=k,e=b.System,l=b.url,p=gf.Package.allPackageURLs(e),u=p.filter(function(J){return J!==l&&!l.startsWith(J)}),G.yield(gf.resource(l).dirList("infinity",{exclude:d}),2);x=G.yieldResult;z=x.filter(function(J){return!J.isDirectory()&&!u.some(function(K){return J.url.startsWith(K)})}).map(function(J){return J.url});
E=gf.arr.pluck(k.modules(),"id");a&&(z=z.filter(a));return G.return(z.map(function(J){var K=J.replace(l,"").replace(/^\//,"");return{isLoaded:E.includes(J),url:J,nameInPackage:K,package:k}}))})};jj.prototype.hasResource=function(a){var d=this.url;return(a.startsWith(d)?gf.resource(a):gf.resource(d).join(a)).exists()};jj.prototype.toString=function(){return"Package("+this.name+" - "+this.path()+"/)"};jj.prototype.mergeWithConfig=function(a){var d=a=Object.assign({},a),k=d.name;d=d.map;k&&(delete a.name,
this._name=k);d&&(delete a.map,Object.assign(this.map,d));Object.assign(this,a);return this};jj.prototype.addMapping=function(a,d){this.map[a]=d;var k={},b={};this.System.config({packages:(b[this.url]={map:(k[a]=d,k)},b)})};jj.prototype.tryToLoadPackageConfig=function(){var a=this,d,k,b,e,l,p,u,x,z,E,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:d=a;k=d.System;b=d.url;e=b+"/package.json";l={};p={};k.config({meta:(l[e]={format:"json"},l),packages:(p[b]=
{meta:{"package.json":{format:"json"}}},p)});k.debug&&console.log("[lively.modules package reading config] %s",e);J.setCatchFinallyBlocks(2);if(u=k.get(e)){J.jumpTo(4);break}return J.yield(k.import(e),5);case 5:u=J.yieldResult;case 4:return x=u,z=[].concat($jscomp.arrayFromIterable(k.packageConfigPaths)),gf.arr.pushIfNotIncluded(z,e),k.config({packageConfigPaths:z}),J.return(x);case 2:return E=J.enterCatchBlock(),console.log("[lively.modules package] Unable loading package config %s for package: ",
e,E),delete k.meta[e],G=b.split("/").slice(-1)[0],J.return({name:G})}})};jj.prototype.import=function(){var a=this,d,k,b,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:return z.yield(a.register(),2);case 2:return d=a,k=d.url,b=d.System,e=gf,l=e.module,p=b,z.yield(b.normalize(k),3);case 3:return u=l.call(e,p,z.yieldResult),z.yield(b.import(u.id),4);case 4:return x=z.yieldResult,z.yield(gf.promise.waitFor(1E3,function(){return u.isLoaded()}),5);
case 5:return z.return(x)}})};jj.prototype.isRegistering=function(){return!!this.registerProcess};jj.prototype.register=function(a){var d=this,k,b,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:if(d.isRegistering())return z.return(d.registerProcess.promise);k=d;b=k.System;e=k.url;d.registerProcess=gf.promise.deferred();l=d.registerProcess.promise;b.debug&&console.log("[lively.modules package register] %s",e);z.setCatchFinallyBlocks(2,3);if(p=
a){z.jumpTo(5);break}return z.yield(d.tryToLoadPackageConfig(),6);case 6:p=z.yieldResult;case 5:u=p,d.registerWithConfig(u),d.registerProcess.resolve(u);case 3:z.enterFinallyBlock();delete d.registerProcess;z.leaveFinallyBlock(4);break;case 2:throw x=z.enterCatchBlock(),d.registerProcess.reject(x),x;case 4:return z.return(l)}})};jj.prototype.updateConfig=function(a){a=Object.assign({},this.runtimeConfig,{},a);var d=this.name,k=this.version,b=a,e=b.name;b=b.version;(new gf.PackageConfiguration(this)).applyConfig(a);
if(d!==a.name||k!==a.version)console.log("[lively.modules] Updating registry "+d+"@"+k+" => "+e+"@"+b),gf.classHolder.PackageRegistry.ofSystem(this.System).updateNameAndVersionOf(this,d,k,e,b)};jj.prototype.registerWithConfig=function(a){a=void 0===a?this.runtimeConfig:a;var d=this.System,k=this.url,b=(new gf.PackageConfiguration(this)).applyConfig(a),e=gf.join(k,"package.json");d.get(e)||d.set(e,d.newModule(Object.assign({},a,{default:a})));gf.emit("lively.modules/packageregistered",{package:k},
Date.now(),d);return b};jj.prototype.remove=function(a){a=Object.assign({forgetEnv:!0,forgetDeps:!1,unloadModules:!0},a);var d=this.System,k=this.url;k=k.replace(/\/$/,"");a.unloadModules&&this.modules().forEach(function(u){return u.unload(a)});gf.classHolder.PackageRegistry.ofSystem(d).removePackage(this);var b=d.getConfig(),e=k+"/package.json";d.delete(String(e));gf.arr.remove(b.packageConfigPaths||[],e);var l={},p={};d.config({meta:(l[e]={},l),packages:(p[k]={},p),packageConfigPaths:b.packageConfigPaths});
delete d.packages[k];gf.emit("lively.modules/packageremoved",{package:this.url},Date.now(),d)};jj.prototype.reload=function(a){var d=this.url,k=gf.classHolder.PackageRegistry.ofSystem(this.System),b=k.coversDirectory(d);this.remove(a);a={};k.addPackageAt(d,b||"devPackageDirs",(a[d]=this,a));return this.import()};jj.prototype.fork=function(a,d){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(d||(d=gf.resource(k.url).join("../"+a).withRelativePartsResolved().url),
b.yield(k.changeAddress(d,a,!1),2)):b.return(b.yieldResult)})};jj.prototype.rename=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k=gf.resource(d.url).join("../"+a).withRelativePartsResolved().url,b.yield(d.changeAddress(k,a,!0),2)):b.return(b.yieldResult)})};jj.prototype.changeAddress=function(a,d,k){d=void 0===d?null:d;k=void 0===k?!0:k;var b=this,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,za,Ia,N,ia,W,ca,sa,la,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ib){switch(ib.nextAddress){case 1:return a=
a.replace(/\/?/,""),e=b,l=e.System,p=e.url,ib.yield(b.runtimeConfig,2);case 2:return u=ib.yieldResult,x=gf.resource(p).asDirectory(),z=new gf.Package(l,a),ib.yield(gf.resource(a).asDirectory(),3);case 3:return E=ib.yieldResult,u.name=d||b.name,G=gf.classHolder.PackageRegistry.ofSystem(l),J=G.coversDirectory(p),gf.classHolder.ModulePackageMapping.forSystem(l).clearCache(),l.packages[p]&&(l.packages[a]=l.packages[p],k&&delete l.packages[p]),Object.assign(z,gf.obj.select(b,["_name","map","config"])),
ib.yield(E.ensureExistance(),4);case 4:return ib.yield(b.resources(void 0,[]),5);case 5:K=ib.yieldResult.map(function(ob){return ob.url}),T=b.modules(),P=$jscomp.makeIterator(T),da=P.next();case 6:if(da.done){ib.jumpTo(8);break}fa=da.value;ka=E.join(fa.pathInPackage()).url;return k?ib.yield(fa.renameTo(ka),10):ib.yield(fa.copyTo(ka),10);case 10:za=K.indexOf(fa.id);-1<za&&K.splice(za,1);da=P.next();ib.jumpTo(6);break;case 8:Ia=$jscomp.makeIterator(K),N=Ia.next();case 13:if(N.done){if(!k){ib.jumpTo(17);
break}return ib.yield(b.remove({forgetEnv:!0,forgetDeps:!1}),18)}ia=N.value;W=gf.resource(ia);ca=W.relativePathFrom(x);return ib.yield(W.copyTo(E.join(ca)),14);case 14:N=Ia.next();ib.jumpTo(13);break;case 18:return ib.yield(x.remove(),17);case 17:if(!d){ib.jumpTo(20);break}z.name=d;z.config.name=d;sa=gf.resource(a).join("package.json");ib.setCatchFinallyBlocks(21);return ib.yield(sa.exists(),23);case 23:if(!ib.yieldResult){ib.jumpTo(24);break}return ib.yield(sa.readJson(),25);case 25:la=ib.yieldResult;
if(la.name!==b.name){ib.jumpTo(26);break}la.name=d;return ib.yield(sa.writeJson(la,!0),26);case 26:(Aa=l.get(sa.url))&&l.set(sa.url,l.newModule(Object.assign({},Aa,{name:d})));case 24:ib.leaveTryBlock(20);break;case 21:ib.enterCatchBlock();case 20:return J=J||"individualPackageDirs","individualPackageDirs"!==J&&"devPackageDirs"!==J||G._addPackageDir(a,J,!0),G._addPackageWithConfig(z,u,a,J),G.resetByURL(),G._updateLatestPackages(),ib.return(z)}})};jj.prototype.search=function(a,d){d=void 0===d?{}:
d;var k=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return d.includeUnloaded?l.yield(k.resources(function(p){return p.endsWith(".js")},[".git","node_modules","dist",".module_cache","lively.next-node_modules"]),3):(b=k.modules().filter(function(p){return p.isLoaded()}),l.jumpTo(2));2!=l.nextAddress&&(b=l.yieldResult.map(function(p){return gf.module(k.System,p.url)}));e=b;return l.return(Promise.all(e.map(function(p){return p.search(a,d).catch(function(u){console.error("Error searching module "+
p.name+":\n"+u.stack);return[]})})).then(function(p){return gf.arr.flatten(p,1)}))})};$jscomp.global.Object.defineProperties(jj.prototype,{isPackage:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){if(this._name)return this._name;var a=this.System.get(this.url+"/package.json");return a&&a.name?a.name:gf.arr.last(this.url.replace(/[\/]+$/,"").split("/"))},set:function(a){return this._name=a}},nameAndVersion:{configurable:!0,enumerable:!0,get:function(){return this.name+
"@"+this.version}},address:{configurable:!0,enumerable:!0,get:function(){return this.url},set:function(a){return this.url=a}},runtimeConfig:{configurable:!0,enumerable:!0,get:function(){var a=this.main,d=this.systemjs,k=this.lively,b={name:this.name,version:this.version,dependencies:this.dependencies||{},devDependencies:this.devDependencies||{}};a&&(b.main=a);d&&(b.systemjs=d);k&&(b.lively=k);return b}}});gf.Package=jj;gf.ensurePackage=bK;gf.ensurePackage=bK;gf.importPackage=dK;gf.importPackage=dK;
gf.removePackage=eK;gf.removePackage=eK;gf.reloadPackage=fK;gf.reloadPackage=fK;gf.registerPackage=gK;gf.registerPackage=gK;gf.getPackage=WD;gf.getPackage=WD;gf.lookupPackage=aK;gf.lookupPackage=aK;gf.applyConfig=cK;gf.applyConfig=cK;gf.getPackageSpecs=hK;gf.getPackageSpecs=hK;gf.Package=jj;gf.Package=jj;var od=lively.FreezerRuntime.recorderFor("lively.classes/class-to-function-transform.js");od.isFunctionNode=function(a){return"ArrowFunctionExpression"===a.type||"FunctionExpression"===a.type||"FunctionDeclaration"===
a.type};od.ensureIdentifier=function(a){return a.replace(od.firstIdRe,"_").replace(od.trailingIdRe,"_")};od.constructorTemplate=function(a){return od.funcExpr({id:a?od.id(a):null},["__first_arg__"],od.ifStmt(od.binaryExpr(od.id("__first_arg__"),"&&",od.member("__first_arg__",od.funcCall(od.member("Symbol","for"),od.literal("lively-instance-restorer")),!0)),od.block(),od.block(od.exprStmt(od.funcCall(od.member(od.member("this",od.funcCall(od.member("Symbol","for"),od.literal("lively-instance-initialize")),
!0),"apply"),od.id("this"),od.id("arguments"))))))};od.replaceSuper=function(a,d,k,b){console.assert("Super"===a.type);(d=d.currentMethod)||console.warn("[lively.classes] Trying to transform es6 class but got super call outside a method! "+od.stringify(a)+" in "+k.join("."));b=$jscomp.makeIterator(k.slice(-2));k=b.next().value;b=b.next().value;return"callee"===k&&"object"===b||"callee"===b?a:d&&"static"===d[od.methodKindSymbol]?od.funcCall(od.member("Object","getPrototypeOf"),od.id(od.tempLivelyClassVar)):
od.funcCall(od.member("Object","getPrototypeOf"),od.member(od.id(od.tempLivelyClassVar),"prototype"))};od.replaceSuperMethodCall=function(a,d,k,b){console.assert("CallExpression"===a.type);console.assert("Super"===a.callee.object.type);return od.funcCall.apply(od,[od.member(od.funcCall(od.member(b.functionNode,"_get"),od.replaceSuper(a.callee.object,d,k.concat(["callee","object"]),b),od.literal(a.callee.property.value||a.callee.property.name),od.id("this")),"call"),od.id("this")].concat($jscomp.arrayFromIterable(a.arguments)))};
od.replaceDirectSuperCall=function(a,d,k,b){console.assert("CallExpression"===a.type);console.assert("Super"===a.callee.type);return od.funcCall.apply(od,[od.member(od.funcCall(od.member(b.functionNode,"_get"),od.replaceSuper(a.callee,d,k.concat(["callee"]),b),od.funcCall(od.member("Symbol","for"),od.literal("lively-instance-initialize")),od.id("this")),"call"),od.id("this")].concat($jscomp.arrayFromIterable(a.arguments)))};od.replaceSuperGetter=function(a,d,k,b){console.assert("MemberExpression"===
a.type);console.assert("Super"===a.object.type);return od.funcCall(od.member(b.functionNode,"_get"),od.replaceSuper(a.object,d,k.concat(["object"]),b),od.literal(a.property.value||a.property.name),od.id("this"))};od.replaceSuperSetter=function(a,d,k,b){console.assert("AssignmentExpression"===a.type);console.assert("Super"===a.left.object.type);return od.funcCall(od.member(b.functionNode,"_set"),od.replaceSuper(a.left.object,d,k.concat(["left","object"]),b),od.literal(a.left.property.value||a.left.property.name),
a.right,od.id("this"))};od.replaceClass=function(a,d,k,b){console.assert("ClassDeclaration"===a.type||"ClassExpression"===a.type);var e=a.body.body,l=a.superClass;k=a.id;var p=a.type,u=a.start,x=a.end,z=void 0===b.addClassNameGetter?!0:b.addClassNameGetter,E=od.id("undefined"),G=od.id("undefined"),J=k?k.name:"anonymous_class",K=b.evalId,T=b.sourceAccessorName;a=a["x-lively-object-meta"]||{start:u,end:x};z=e.reduce(function(ka,za){var Ia=za.key,N=za.kind,ia=za.value,W=za.static;"Literal"!==Ia.type&&
"Identifier"!==Ia.type&&console.warn("Unexpected key in classToFunctionTransform! "+JSON.stringify(Ia));if("method"===N){N=od.id(J+"_"+od.ensureIdentifier(Ia.name||Ia.value||od.Path("property.name").get(Ia))+"_");za={};ia=["key",od.literal(Ia.name||Ia.value||od.Path("property.name").get(Ia)),"value",Object.assign({},ia,(za.id=N,za[od.methodKindSymbol]=W?"static":"proto",za))];var ca=od.objectLiteral(ia)}else"get"===N||"set"===N?(za={},ca=od.objectLiteral(["key",od.literal(Ia.name||Ia.value||od.Path("property.name").get(Ia)),
N,Object.assign({},ia,(za.id=od.id(N),za[od.methodKindSymbol]=W?"static":"proto",za))])):"constructor"===N?(Ia={},ia=["key",od.funcCall(od.member("Symbol","for"),od.literal("lively-instance-initialize")),"value",Object.assign({},ia,(Ia.id=od.id(J+"_initialize_"),Ia[od.methodKindSymbol]="proto",Ia))],ca=od.objectLiteral(ia)):console.warn("[lively.classes] classToFunctionTransform encountered unknown class property with kind "+N+", ignoring it, "+JSON.stringify(za));(W?ka.clazz:ka.inst).push(ca);return ka},
{inst:[],clazz:z?[od.parse('({ key: Symbol.for("__LivelyClassName__"), get: function get() { return "'+J+'"; } })').body[0].expression]:[]});e=z.inst;z=z.clazz;e.length&&(E={type:"ArrayExpression",elements:e});z.length&&(G={type:"ArrayExpression",elements:z});e=b.scope;if(l&&b.currentModuleAccessor)if(b.classHolder===l.object){var P=l;var da=l.property.name}else{var fa=e&&e.resolvedRefMap&&e.resolvedRefMap.get(l);fa&&fa.decl&&e.decls&&e.decls.find(function(ka){return $jscomp.makeIterator(ka).next().value===
fa.decl})&&(P=l,da=l.name)}da=P?od.objectLiteral(["referencedAs",od.literal(da),"value",P]):l||od.id("undefined");P=k&&"ClassDeclaration"===p;l=["start",od.literal(a.start),"end",od.literal(a.end)];"undefined"!==typeof K&&l.push("evalId",od.literal(K));T&&l.push("moduleSource",od.nodes.id(T));K=od.objectLiteral(l);E=od.funcCall(od.funcExpr({},["superclass"],od.varDecl(od.tempLivelyClassHolderVar,d.classHolder),od.varDecl(od.tempLivelyClassVar,P?{type:"ConditionalExpression",test:od.binaryExpr(od.funcCall(od.member(od.tempLivelyClassHolderVar,
"hasOwnProperty"),od.literal(k.name)),"&&",od.binaryExpr({argument:od.member(od.tempLivelyClassHolderVar,k),operator:"typeof",prefix:!0,type:"UnaryExpression"},"===",od.literal("function"))),consequent:od.member(od.tempLivelyClassHolderVar,k),alternate:od.assign(od.member(od.tempLivelyClassHolderVar,k),od.constructorTemplate(k.name))}:k?od.constructorTemplate(k.name):od.constructorTemplate(null)),od.returnStmt(od.funcCall(b.functionNode,od.id(od.tempLivelyClassVar),od.id("superclass"),E,G,od.id(od.tempLivelyClassHolderVar),
b.currentModuleAccessor||od.id("undefined"),K))),da);if("ClassExpression"===p)return E;p=E;b.declarationWrapper&&d.classHolder===b.classHolder&&(p=od.funcCall(b.declarationWrapper,od.literal(k.name),od.literal("class"),p,b.classHolder,K));p=od.varDecl(k,p,"var");p[od.isTransformedClassVarDeclSymbol]=!0;return p};od.splitExportDefaultWithClass=function(a,d,k,b){return a.declaration&&a.declaration[od.isTransformedClassVarDeclSymbol]?[a.declaration,{declaration:a.declaration.declarations[0].id,type:"ExportDefaultDeclaration"}]:
a};od.classToFunctionTransform=Qs;od.arr=Gf;od.Path=Qh;od.parse=kl;od.stringify=Bk;od.query=wq;od.nodes=Ys;od.Visitor=Ae;var Qo=od.nodes;od.assign=Qo.assign;od.member=Qo.member;od.id=Qo.id;od.exprStmt=Qo.exprStmt;od.funcCall=Qo.funcCall;od.literal=Qo.literal;od.objectLiteral=Qo.objectLiteral;od.varDecl=Qo.varDecl;od.funcExpr=Qo.funcExpr;od.returnStmt=Qo.returnStmt;od.binaryExpr=Qo.binaryExpr;od.ifStmt=Qo.ifStmt;od.block=Qo.block;od.firstIdRe=/^[^_a-z]/i;od.trailingIdRe=/[^_a-z0-9]/ig;od.isTransformedClassVarDeclSymbol=
Symbol();od.methodKindSymbol=Symbol();od.tempLivelyClassVar="__lively_class__";od.tempLivelyClassHolderVar="__lively_classholder__";var VN=function(){return od.Visitor.apply(this,arguments)||this};$jscomp.inherits(VN,od.Visitor);VN.prototype.accept=function(a,d,k){od.isFunctionNode(a)&&(d=Object.assign({},d,{classHolder:od.objectLiteral([]),currentMethod:a[od.methodKindSymbol]?a:d.currentMethod}));if("ClassExpression"===a.type||"ClassDeclaration"===a.type)a=od.replaceClass(a,d,k,d.options);"Super"===
a.type&&(a=od.replaceSuper(a,d,k,d.options));"MemberExpression"===a.type&&a.object&&"Super"===a.object.type&&(a=od.replaceSuperGetter(a,d,k,d.options));"AssignmentExpression"===a.type&&"MemberExpression"===a.left.type&&"Super"===a.left.object.type&&(a=od.replaceSuperSetter(a,d,k,d.options));"CallExpression"===a.type&&"Super"===a.callee.type&&(a=od.replaceDirectSuperCall(a,d,k,d.options));"CallExpression"===a.type&&a.callee.object&&"Super"===a.callee.object.type&&(a=od.replaceSuperMethodCall(a,d,k,
d.options));a=od.Visitor.prototype.accept.call(this,a,d,k);return"ExportDefaultDeclaration"===a.type?od.splitExportDefaultWithClass(a,d,k,d.options):a};VN.run=function(a,d){var k=new this,b=d.classHolder||od.objectLiteral([]);return k.accept(a,{options:d,classHolder:b},[])};od.ClassReplaceVisitor=VN;od.classToFunctionTransform=Qs;od.classToFunctionTransform=Qs;var hB=lively.FreezerRuntime.recorderFor("lively.classes/index.js");hB.runtime=PA;hB.classToFunctionTransform=Qs;hB.runtime=PA;hB.runtime=
PA;hB.classToFunctionTransform=Qs;hB.classToFunctionTransform=Qs;var mca=Object.freeze({__proto__:null,runtime:PA,classToFunctionTransform:Qs});Ma("b1",mca);var rj=lively.FreezerRuntime.recorderFor("lively.modules/src/import-modification.js");rj.arr=Gf;rj.Path=Qh;rj.fuzzyParse=rs;rj.query=wq;rj.stringify=Bk;rj.resource=hd;var $r=function(a,d,k,b,e,l,p){this.System=a;this.intoModuleId=d;this.intoPackage=k;this.intoModuleSource=b;this.fromModuleId=e.moduleId;this.importData=e;this.alias=l;this.parsed=
p||rj.fuzzyParse(b)};$r.run=function(a,d,k,b,e,l,p){return(new this(a,d,k,b,e,l,p)).run()};$r.prototype.run=function(){var a=this.generateImportStatement(),d=a.standaloneImport,k=a.importedVarName,b=this.existingImportsOfFromModule(),e=b.imports,l=b.importsOfFromModule;b=b.importsOfVar;l=this.importsToBeReused(l,b,a);if(b.length)return{status:"not modified",newSource:this.intoModuleSource,generated:"",importedVarName:"",standaloneImport:d,from:b[0].start,to:b[0].end};if(l.length&&(a=this.modifyExistingImport(l,
d)))return a;e=rj.arr.last(e);return this.insertNewImport(l,d,k,e?e.end:0)};$r.prototype.importsToBeReused=function(a,d,k){k.isDefault&&(a=a.filter(function(b){return!b.specifiers.some(function(e){return"ImportDefaultSpecifier"==e.type})}));return a};$r.prototype.generateImportStatement=function(){var a=this.intoModuleId,d=this.fromModuleId,k=this.importData,b=this.intoPackage,e="default"===k.exported,l=this.alias||(e?k.local:k.exported),p=!e&&k.exported!==l;b=b&&b.name;var u=d,x=k.packageName,z=
k.pathInPackage;if(k.isMain)u=x;else if(b===x)try{u=rj.resource(d).relativePathFrom(rj.resource(a)),u.startsWith(".")||(u="./"+u)}catch(E){x&&"no group"!==x&&z&&(u=x+"/"+z)}else x&&"no group"!==x&&z&&(u=x+"/"+z);return{isDefault:e,standaloneImport:e?"import "+l+' from "'+u+'";':"import { "+k.exported+(p?" as "+l:"")+' } from "'+u+'";',importedVarName:l}};$r.prototype.existingImportsOfFromModule=function(){var a=this.System,d=this.fromModuleId,k=this.intoModuleId,b=this.importData,e=b.exported,l=b.local,
p=this.alias,u="default"===e;b=this.parsed.body.filter(function(z){return"ImportDeclaration"===z.type});var x=u?p||l:p||e;l=b.filter(function(z){if(!z.source||"string"!==typeof z.source.value)return null;z=a.decanonicalize(z.source.value,k);return d===z});p=l.filter(function(z){return(z.specifiers||[]).some(function(E){return u?"ImportDefaultSpecifier"===E.type&&E.local.name===x:rj.Path("imported.name").get(E)===e&&rj.Path("local.name").get(E)===x})});return{imports:b,importsOfFromModule:l,importsOfVar:p}};
$r.prototype.modifyExistingImport=function(a,d){a=rj.arr.flatmap(a,function(x){return x.specifiers||[]});if(!a.length)return null;a=$jscomp.makeIterator(rj.arr.partition(a,function(x){return"ImportDefaultSpecifier"===x.type}));var k=$jscomp.makeIterator(a.next().value).next().value,b=$jscomp.makeIterator(a.next().value).next().value;a=this.alias;var e=this.intoModuleSource,l=this.importData,p=l.exported;l=l.local;var u="default"===p;u?console.assert(!!b,"no ImportSpecifier found"):console.assert(b||
k,"at least one kine of specifier is expected");if(u){k=e.slice(0,b.start).lastIndexOf("{")-1;if(0>k)return null;b=(a||l)+",";p=e.slice(0,k);e=e.slice(k);p.endsWith(" ")&&p.endsWith("\n")||(b=" "+b);e.startsWith(" ")||(b+=" ");return{status:"modified",newSource:""+p+b+e,generated:b,standaloneImport:d,importedVarName:a||l,from:k,to:k+b.length}}k=b?b.end:k.end;u=(l=a&&a!==p)?p+" as "+a:p;b=b?", "+u:", { "+u+" }";return{status:"modified",newSource:""+e.slice(0,k)+b+e.slice(k),generated:b,standaloneImport:d,
importedVarName:l?a:p,from:k,to:k+b.length}};$r.prototype.insertNewImport=function(a,d,k,b){b=void 0===b?0:b;a&&a.length&&(b=rj.arr.last(a).end);var e=this.intoModuleSource;a=e.slice(0,b);e=e.slice(b);var l=d;a.length&&!a.endsWith("\n")&&(l="\n"+l);e.length&&!e.startsWith("\n")&&(l+="\n");return{status:"modified",newSource:a+l+e,generated:l,standaloneImport:d,importedVarName:k,from:b,to:b+l.length}};rj.ImportInjector=$r;var WN=function(){};WN.getGlobals=function(a,d){a=d||rj.fuzzyParse(a,{withComments:!0});
d=(d=a.comments?a.comments.find(function(b){return b.isBlock&&b.text.startsWith("global")}):null)?d.text.replace(/^global\s*/,"").split(",").map(function(b){return b.trim()}).filter(Boolean):[];var k=[].concat($jscomp.arrayFromIterable(d),$jscomp.arrayFromIterable(rj.query.knownGlobals));a=rj.query.findGlobalVarRefs(a,{jslintGlobalComment:!0}).filter(function(b){return!k.includes(b.name)}).map(function(b){return b.name});return rj.arr.compact([].concat($jscomp.arrayFromIterable(d),$jscomp.arrayFromIterable(a)))};
WN.run=function(a,d,k){k=k||rj.fuzzyParse(a,{withComments:!0});var b=(k=k.comments?k.comments.find(function(l){return l.isBlock&&l.text.startsWith("global")}):null)?k.text.replace(/^global\s*/,"").split(",").map(function(l){return l.trim()}).filter(Boolean):[],e=d.filter(function(l){return!b.includes(l)});if(!e.length)return{status:"not modified",newSource:a,generated:"",from:0,to:0};if(!k)return k="/*global "+e.join(",")+"*/\n",{status:"modified",newSource:k+a,generated:k,from:0,to:k.length};d=k.start+
2+k.text.length;e=e.join(",");b.length?e=","+e:k.text.startsWith("global ")||(e=" "+e);k=d+e.length;return{status:"modified",newSource:a.slice(0,d)+e+a.slice(d),generated:e,from:d,to:k}};rj.GlobalInjector=WN;var CF=function(){};CF.removeImports=function(a,d,k){k=k||rj.fuzzyParse(a);var b=rj.arr.flatmap(k.body,function(e){return"ImportDeclaration"===e.type&&e.specifiers.length?e.specifiers.map(function(l){return{local:l.local,importStmt:e}}):[]}).filter(function(e){return d.some(function(l){return l.local===
e.local.name})});k=b.map(function(e){return{local:e.local.name,from:e.importStmt.source.value}});a=rj.arr.uniq(b.map(function(e){var l=e.importStmt.specifiers.find(function(p){return e.local===p.local});rj.arr.remove(e.importStmt.specifiers,l);return e.importStmt})).slice().reverse().reduce(function(e,l){var p=e.source;e=e.changes;var u=l.start,x=l.end,z=l.specifiers,E=p.slice(0,u),G=p.slice(x);p=p.slice(u,x);(l=z.length?rj.stringify(l):"")&&l.includes("\n")&&!p.includes("\n")&&(l=l.replace(/\s+/g,
" "));p=E+l+G;e=e.concat({replacement:l,start:u,end:x});return{source:p,changes:e}},{source:a,changes:[]});return Object.assign({},a,{removedImports:k})};CF.findUnusedImports=function(a){var d="string"===typeof a?rj.fuzzyParse(a):a;a=rj.arr.flatmap(d.body,function(e){return"ImportDeclaration"===e.type&&e.specifiers.length?e.specifiers.map(function(l){return{local:l.local,from:e.source?e.source.value:"",importStmt:e}}):[]});var k=a.map(function(e){return e.local});d=rj.query.resolveReferences(rj.query.scopes(d));
d=Array.from(d.resolvedRefMap.keys()).filter(function(e){return!k.includes(e)});var b=rj.arr.uniq(d.map(function(e){return e.name}));return a.filter(function(e){return!b.includes(e.local.name)}).map(function(e){return Object.assign({},e,{local:e.local.name})})};CF.removeUnusedImports=function(a){var d=rj.fuzzyParse(a);return this.removeImports(a,this.findUnusedImports(d),d)};rj.ImportRemover=CF;var yn=lively.FreezerRuntime.recorderFor("lively.modules/src/nodejs.js");yn.ensureParent=function(a,d,k){if(k)return k;
k=a.id;var b=a.System;d=k.startsWith("file://")?k.replace("file://",""):k;if(k=b._nodeRequire("module").Module._cache[k])return k;k={id:d,filename:d,paths:[]};(a=a.package())&&k.paths.push(yn.resource(a.url).join("node_modules/").path());return k};yn.relative=function(a,d){return yn.resource(a.id).parent().join(d).url.replace("file://","")};yn._require=iK;yn._resolve=jK;yn.resource=hd;yn._require=iK;yn._require=iK;yn._resolve=jK;yn._resolve=jK;var ef=lively.FreezerRuntime.recorderFor("lively.modules/src/module.js");
ef.module=ex;ef.isModuleLoaded=kK;ef.doesModuleExist=lK;ef.arr=Gf;ef.obj=eg;ef.graph=Ts;ef.parse=kl;ef.query=wq;ef.computeRequireMap=TD;ef.moduleSourceChange=VD;ef.scheduleModuleExportsChange=UD;ef.runScheduledExportChanges=ZJ;ef.livelySystemEnv=sK;ef.Package=jj;ef.isURL=dx;ef.emit=ss;ef.subscribe=KC;ef.defaultClassToFunctionConverterName="initializeES6ClassForLively";ef.classRuntime=PA;ef.ImportInjector=$r;ef.GlobalInjector=WN;ef.ImportRemover=CF;ef._require=iK;ef._resolve=jK;ef.classHolder=gt;var XN=
function(){var a=/['"]format (esm|es6)['"];/,d=/['"]format cjs['"];/,k=/(^\s*|[}\);\n]\s*)(import\s+(['"]|(\*\s+as\s+)?[^"'\(\)\n;]+\s+from\s+['"]|\{)|export\s+\*\s+from\s+["']|export\s+(\{|default|function|class|var|const|let|async\s+function))/;return function(b,e){return e&&e.format?("es6"==e.format&&"esm"==e.format,e.format):a.test(b.slice(0,5E3))||!d.test(b.slice(0,5E3))&&k.test(b)?"esm":d.test(b.slice(0,5E3))?"cjs":"global"}}();ef.detectModuleFormat=XN;ef.detectModuleFormat=XN;ef.detectModuleFormat=
XN;ef.classHolder.module=ef.module;ef.isModuleLoaded=kK;ef.isModuleLoaded=kK;ef.doesModuleExist=lK;ef.doesModuleExist=lK;ef.globalProps={initialized:!1,descriptors:{}};var tg=function(a,d){var k=this;if(!ef.isURL(d)&&!/^@/.test(d))throw Error("ModuleInterface constructor called with "+d+" that does not seem to be a fully normalized module id.");this.System=a;this.id=d;this.recorderName="__lvVarRecorder";this.sourceAccessorName="__lvOriginalCode";this._scope=this._ast=this._source=this._recorder=null;
this._observersOfTopLevelState=[];this._evaluationsInProgress=0;this._evalId=1;this.createdAt=this.lastModifiedAt=new Date;ef.subscribe("lively.modules/modulechanged",function(b){b.module===k.id&&k.reset()})};tg.prototype.fullName=function(){return this.id};tg.prototype.shortName=function(){return this.package().name+"/"+this.pathInPackage()};tg.prototype.source=function(){var a=this;return"@empty"===this.id?Promise.resolve(""):this._source?Promise.resolve(this._source):this.System.resource(this.id).read().then(function(d){return a._source=
d})};tg.prototype.setSource=function(a){this.sourceAccessorName&&this.recorderName&&a.includes("var "+this.recorderName)&&a.includes("var "+this.sourceAccessorName)||this._source===a||(this.reset(),this._source=a)};tg.prototype.ast=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress){if(a._ast)return e.return(a._ast);d=a;k=ef;b=k.parse;return e.yield(a.source(),2)}return e.return(d._ast=b.call(k,e.yieldResult))})};tg.prototype.scope=function(){var a=
this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return a._scope?k.return(a._scope):k.yield(a.ast(),2);d=k.yieldResult;return k.return(a._scope=ef.query.topLevelDeclsAndRefs(d).scope)})};tg.prototype.resolvedScope=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(d=a,k=ef.query,b=k.resolveReferences,e.yield(a.scope(),2)):e.return(d._scope=b.call(k,e.yieldResult))})};tg.prototype.metadata=function(){var a=
this.System.loads?this.System.loads[this.id]:null;return a?a.metadata:null};tg.prototype.addMetadata=function(a){var d=this.System,k=this.id,b=this.metadata();a=b?Object.assign(b,a):a;b={};d.config({meta:(b[k]=a,b)});return d.meta[k]};tg.prototype.format=function(){var a=this.metadata();return a&&a.format?a.format:this._source?ef.detectModuleFormat(this._source):"global"};tg.prototype.setFormat=function(a){return this.addMetadata({format:a})};tg.prototype.reset=function(){this._scope=this._ast=this._source=
null};tg.prototype.get=function(){return this.System.get(this.id)};tg.prototype.load=function(a){var d=this,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return k=d,b=k.id,e=k.System,a&&d.addMetadata(a),(l=e.get(b))?p.jumpTo(2):p.yield(e.import(b),3);2!=p.nextAddress&&(l=p.yieldResult);return p.return(l)})};tg.prototype.isLoaded=function(){return!!this.System.get(this.id)};tg.prototype.unloadEnv=function(){this._recorder=null;this._observersOfTopLevelState=
[];delete ef.livelySystemEnv(this.System).loadedModules[this.id]};tg.prototype.unloadDeps=function(a){var d=this;a=ef.obj.merge({forgetDeps:!0,forgetEnv:!0},a);this.dependents().forEach(function(k){d.System.delete(k.id);d.System.loads&&delete d.System.loads[k.id];a.forgetEnv&&k.unloadEnv()})};tg.prototype.unload=function(a){var d=this,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return a=Object.assign({reset:!0,forgetDeps:!0,forgetEnv:!0},a),k=d,b=k.System,
e=k.id,a.reset&&d.reset(),a.forgetDeps&&d.unloadDeps(a),d.System.delete(e),b.loads&&delete b.loads[e],b.meta&&delete b.meta[e],a.forgetEnv&&d.unloadEnv(),(l=b._livelyModulesTranslationCache)?p.yield(l.deleteCachedData(e),2):p.jumpTo(2);ef.emit("lively.modules/moduleunloaded",{module:d.id},Date.now(),d.System);p.jumpToEnd()})};tg.prototype.reload=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(a=ef.obj.merge({reloadDeps:!0,resetEnv:!0},
a),k=[d],a.reloadDeps&&(k=d.dependents().concat(k)),b.yield(d.unload({forgetDeps:a.reloadDeps,forgetEnv:a.resetEnv}),2)):3!=b.nextAddress?b.yield(Promise.all(k.map(function(e){return e.id!==d.id&&e.load()})),3):b.yield(d.load(),0)})};tg.prototype.copyTo=function(a){var d=this,k,b,e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return k=d.System.resource(a),b=k.write,x.yield(d.source(),3);if(2!=x.nextAddress)return x.yield(b.call(k,x.yieldResult),2);e=d;l=
e.System;p=ef.module(l,a);u=ef.obj.select(d,"_observersOfTopLevelState _scope _ast _source _recorder sourceAccessorName recorderName".split(" "));Object.assign(p,u);l.set(a,l.newModule(l.get(d.id)));return x.return(p)})};tg.prototype.renameTo=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return b=d,e=void 0===b.unload?!0:b.unload,l=void 0===b.removeFile?!0:b.removeFile,u.yield(k.copyTo(a),2);case 2:p=
u.yieldResult;if(!e){u.jumpTo(3);break}return u.yield(k.unload({reset:!0,forgetDeps:!1,forgetEnv:!0}),3);case 3:if(!l){u.jumpTo(5);break}return u.yield(k.System.resource(k.id).remove(),5);case 5:return u.return(p)}})};tg.prototype.whenLoaded=function(a){if(this.isLoaded())try{a(this)}catch(d){console.error(d)}else ef.livelySystemEnv(this.System).onLoadCallbacks.push({moduleName:this.id,resolved:!0,callback:a})};tg.prototype.changeSourceAction=function(a){var d=this;return Promise.resolve(this.source()).then(function(k){return a(k)}).then(function(k){return d.changeSource(k)})};
tg.prototype.changeSource=function(a,d){d=Object.assign({doSave:!0,doEval:!0},d);var k=this.System,b=this.id,e=this.format(),l;this.reset();this.lastModifiedAt=new Date;return Promise.all([d.doSave&&this.System.resource(b).write(a),d.doEval&&ef.moduleSourceChange(k,b,a,e,d).then(function(p){return l=p})]).then(function(){return l})};tg.prototype.addDependencyToModuleRecord=function(a,d){var k=this;d=void 0===d?function(){}:d;var b=this.record(),e=a.record();if(b&&e){var l,p=b.dependencies.some(function(x,
z){if(x)return l=z,x&&x.name===a.id});p?e!==b.dependencies[l]&&b.dependencies.splice(l,1,e):b.dependencies.push(e);p&&b.setters[l]||(b.setters[p?l:b.dependencies.length-1]=d);var u;e.importers.some(function(x,z){if(x)return u=z,x&&x.name===k.id})?b!==e.importers[u]&&e.importers.splice(u,1,b):e.importers.push(b)}};tg.prototype.dependents=function(){var a=this;return ef.graph.hull(ef.graph.invert(ef.computeRequireMap(this.System)),this.id).map(function(d){return ef.module(a.System,d)})};tg.prototype.requirements=
function(){var a=this;return ef.graph.hull(ef.computeRequireMap(this.System),this.id).map(function(d){return ef.module(a.System,d)})};tg.prototype.directRequirements=function(){var a=this,d=(this.record()||{}).dependencies||[];return ef.arr.pluck(d.filter(Boolean),"name").map(function(k){return ef.module(a.System,k)})};tg.prototype.isMochaTest=function(){if(!this._source)return!1;var a=this._scope||(this._scope=ef.query.topLevelDeclsAndRefs(ef.parse(this._source)).scope);return ef.query.imports(a).map(function(d){return d.fromModule}).some(function(d){return d.endsWith("mocha-es6")||
d.endsWith("mocha-es6/index.js")})?!0:!1};tg.prototype.define=function(a,d,k,b){k=void 0===k?!0:k;var e=this.System,l=this.id,p=this.recorder,u=Symbol.for("lively-object-meta"),x=Symbol.for("lively-module-meta");"function"!==typeof d||!b||"function"!==b.kind&&"class"!==b.kind||(d[u]=b);d&&d[u]&&!d[x]&&(b=this.pathInPackage(),u=this.package(),d[x]={package:u?{name:u.name,version:u.version}:{},pathInPackage:b});p[a]=d;ef.scheduleModuleExportsChange(e,l,a,d,!1);this.notifyTopLevelObservers(a);(k=k||
!this.isEvalutionInProgress())&&ef.runScheduledExportChanges(e,l);return d};tg.prototype.undefine=function(a){delete this.recorder[a]};tg.prototype.subscribeToToplevelDefinitionChanges=function(a){this._observersOfTopLevelState.push(a);return a};tg.prototype.notifyTopLevelObservers=function(a){var d=this.recorder;ef.arr.include(["createOrExtendES6ClassForLively","lively.capturing-declaration-wrapper"],a)||this._observersOfTopLevelState.forEach(function(k){return k(a,d[a])})};tg.prototype.unsubscribeFromToplevelDefinitionChanges=
function(a){this._observersOfTopLevelState="string"===typeof a?this._observersOfTopLevelState.filter(function(d){return d.name!==a}):this._observersOfTopLevelState.filter(function(d){return d!==a})};tg.prototype.evaluationStart=function(){this._evaluationsInProgress++};tg.prototype.evaluationEnd=function(){this._evaluationsInProgress--;ef.runScheduledExportChanges(this.System,this.id)};tg.prototype.nextEvalId=function(){return this._evalId++};tg.prototype.isEvalutionInProgress=function(){return 0<
this._evaluationsInProgress};tg.prototype.env=function(){return this};tg.prototype.package=function(){return ef.Package.forModule(this.System,this)};tg.prototype.pathInPackage=function(){var a=this.package();return a&&0===this.id.indexOf(a.address)?this.id.slice(a.address.length).replace(/^\//,""):this.id};tg.prototype.imports=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(d=ef.query,k=d.imports,b.yield(a.scope(),2)):b.return(k.call(d,
b.yieldResult))})};tg.prototype.exports=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(d=ef.query,k=d.exports,b.yield(a.scope(),2)):b.return(k.call(d,b.yieldResult))})};tg.prototype.addImports=function(a){var d=this,k,b,e,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return G.yield(d.source(),2);k=G.yieldResult;b=$jscomp.makeIterator(a);for(e=b.next();!e.done;e=b.next())l=e.value,p=
ef.module(d.System,l.from||l.moduleId),u=p.package(),x={exported:l.exported||l.local,moduleId:p.id,packageName:u.name,packageURL:u.url,pathInPackage:p.pathInPackage()},z=l.local,E=ef.ImportInjector.run(d.System,d.id,d.package(),k,x,z),k=E.newSource;return G.yield(d.changeSource(k),0)})};tg.prototype.addGlobalDeclaration=function(a){var d=this,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?u.yield(d.source(),2):3!=u.nextAddress?(k=u.yieldResult,b=ef.GlobalInjector.run(k,
a),e=b.status,l=b.newSource,(p="modified"===e)?u.yield(d.changeSource(l),3):u.jumpTo(3)):u.return(p)})};tg.prototype.removeImports=function(a){var d=this,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:return a.length?p.yield(d.source(),2):p.return();case 2:return k=p.yieldResult,p.yield(ef.ImportRemover.removeImports(k,a),3);case 3:return b=p.yieldResult,e=b.source,l=b.removedImports,p.yield(d.changeSource(e),4);case 4:l.forEach(function(u){return delete d.recorder[u.local]}),
p.jumpToEnd()}})};tg.prototype._localDeclForRefAt=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(d.resolvedScope(),2);k=e.yieldResult;b=ef.query.refWithDeclAt(a,k);return e.return(b&&{decl:b.decl,id:b.declId,declModule:d})})};tg.prototype._localDeclForName=function(a){var d=this,k,b,e,l,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return E.yield(d.resolvedScope(),2);k=E.yieldResult;
e=$jscomp.makeIterator(k.resolvedRefMap.values());for(l=e.next();!l.done;l=e.next())if(u=p=l.value,x=u.ref,z=x.name,a===z){b=p;break}return E.return(b&&{decl:b.decl,id:b.declId,declModule:d})})};tg.prototype._importForNSRefAt=function(a){var d=this,k,b,e,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return G.yield(d.resolvedScope(),2);k=G.yieldResult;b=k.node;e=ef.query.nodesAtIndex(b,a);if(2>e.length)return G.return([null,null]);l=e[e.length-1];p=
e[e.length-2];if("Identifier"!=l.type||"MemberExpression"!=p.type||p.computed||"Identifier"!==p.object.type)return G.return([null,null]);u=k.resolvedRefMap.get(p.object)||{};x=u.decl;if(!x||"ImportDeclaration"!==x.type)return G.return([null,null]);z=p.object.name;E=x.specifiers.find(function(J){return J.local.name===z});return G.return("ImportNamespaceSpecifier"!==E.type?[null,null]:[x,E.local,l.name])})};tg.prototype._resolveImportedDecl=function(a){var d=this,k,b,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:if(!a)return z.return([]);
k=a.id;b=k.name;return z.yield(d.imports(),2);case 2:e=z.yieldResult;l=e.find(function(E){return E.local==b});if(!l){z.jumpTo(3);break}p=ef.module(d.System,l.fromModule,d.id);u=[a];x=u.concat;return z.yield(p.bindingPathForExport(l.imported),4);case 4:return z.return(x.call(u,z.yieldResult));case 3:return z.return([a])}})};tg.prototype.bindingPathFor=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(d._localDeclForName(a),2):4!=
b.nextAddress?(k=b.yieldResult)?b.yield(d._resolveImportedDecl(k),4):b.jumpTo(0):b.return(b.yieldResult)})};tg.prototype.bindingPathForExport=function(a){var d=this,k,b,e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:return x.yield(d.resolvedScope(),2);case 2:return x.yield(d.exports(),3);case 3:k=x.yieldResult;b=k.find(function(z){return z.exported===a});if(!b.fromModule)return x.return(d._resolveImportedDecl({decl:b.decl,id:b.declId,declModule:b&&
b.decl?d:null}));e=ef.module(d.System,b.fromModule,d.id);l={decl:b.node,id:b.declId,declModule:d};p=[l];u=p.concat;return x.yield(e.bindingPathForExport(b.imported),5);case 5:return x.return(u.call(p,x.yieldResult))}})};tg.prototype.bindingPathForRefAt=function(a){var d=this,k,b,e,l,p,u,x,z,E,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:return J.yield(d._localDeclForRefAt(a),2);case 2:k=J.yieldResult;if(!k){J.jumpTo(3);break}return J.yield(d._resolveImportedDecl(k),
4);case 4:return J.return(J.yieldResult);case 3:return b=$jscomp,e=b.makeIterator,J.yield(d._importForNSRefAt(a),5);case 5:l=e.call(b,J.yieldResult);p=l.next().value;u=l.next().value;x=l.next().value;if(!p)return J.return([]);z=ef.module(d.System,p.source.value,d.id);E=[{decl:p,declModule:d,id:u}];G=E.concat;return J.yield(z.bindingPathForExport(x),6);case 6:return J.return(G.call(E,J.yieldResult))}})};tg.prototype.definitionForRefAt=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(d.bindingPathForRefAt(a),2);k=b.yieldResult;return b.return(1>k.length?null:k[k.length-1].decl)})};tg.prototype.ensureRecord=function(){var a=this.System,d=a._loader.moduleRecords;return d[this.id]?d[this.id]:d[this.id]={name:this.id,exports:a.newModule({}),dependencies:[],importers:[],setters:[]}};tg.prototype.record=function(){var a=this.System._loader.moduleRecords[this.id];if(!a)return null;a.hasOwnProperty("__lively_modules__")||(a.__lively_modules__={evalOnlyExport:{}});
return a};tg.prototype.updateRecord=function(a){var d=this.record();if(!d)throw Error("es6 environment global of "+this.id+": module not loaded, cannot get export object!");d.locked=!0;try{return a(d)}finally{d.locked=!1}};tg.prototype.search=function(a,d){var k=this,b,e,l,p,u,x,z,E,G,J,K,T,P,da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fa){if(1==fa.nextAddress)return d=Object.assign({excludedModules:[]},d),d.excludedModules.some(function(ka){return"string"===typeof ka?ka===k.id:
ka instanceof RegExp?ka.test(k.id):"function"===typeof ka?ka(k.id):!1})?fa.return([]):fa.yield(k.source(),2);b=fa.yieldResult;a instanceof RegExp?(l="g",a.ignoreCase&&(l+="i"),a.multiline&&(l+="m"),e=RegExp(a.source,l)):e=RegExp(a,"g");for(u=[];null!==(p=e.exec(b));)u.push([p.index,p[0].length]);z=x=0;E=1;for(G=0;x<b.length&&z<u.length;x++)"\n"==b[x]&&(E++,G=x+1),J=$jscomp.makeIterator(u[z]),K=J.next().value,T=J.next().value,x===K&&(P=b.slice(G).indexOf("\n"),P=-1===P?b.length:P+G,da=k.package(),
u[z]={moduleId:k.id,packageName:da?da.name:void 0,pathInPackage:da?k.pathInPackage():k.id,isLoaded:k.isLoaded(),length:T,line:E,column:x-G,lineString:1E3<P-G?"..."+b.slice(x-10,x+100)+"...":b.slice(G,P)},z++);return fa.return(u)})};tg.prototype.toString=function(){return"module("+this.id+")"};$jscomp.global.Object.defineProperties(tg.prototype,{dontTransform:{configurable:!0,enumerable:!0,get:function(){return[this.recorderName,this.sourceAccessorName,"global","self","_moduleExport","_moduleImport",
"localStorage","prompt","alert","fetch","getComputedStyle"].concat($jscomp.arrayFromIterable(this.isMochaTest()?[]:ef.GlobalInjector.getGlobals(this._source))).concat(ef.query.knownGlobals)}},recorder:{configurable:!0,enumerable:!0,set:function(a){return this._recorder=a},get:function(){if(this._recorder)return this._recorder;var a=this.System,d=this;if(!ef.globalProps.initialized){ef.globalProps.initialized=!0;for(var k in a.global)if(a.global.__lookupGetter__(k)||"closed"==k)ef.globalProps.descriptors[k]=
{value:void 0,configurable:!0,writable:!0}}k={};if(a.get("@system-env").node){var b=ef._require.bind(null,this);b.resolve=ef._resolve.bind(null,this);k.require={configurable:!0,writable:!0,value:b}}b={};return this._recorder=Object.create(a.global,Object.assign({},ef.globalProps.descriptors,{},k,(b.event={configurable:!0,writable:!0,value:void 0},b.System={configurable:!0,writable:!0,value:a},b.__currentLivelyModule={value:d},b[ef.defaultClassToFunctionConverterName]={configurable:!0,writable:!0,
value:ef.classRuntime.initializeClass},b[this.varDefinitionCallbackName]={value:function(e,l,p,u,x){x=x||{};x.kind=l;return d.define(e,p,!1,x)}},b._moduleExport={value:function(e,l){ef.scheduleModuleExportsChange(a,d.id,e,l,!0)}},b._moduleImport={value:function(e,l){var p=a.decanonicalize(e,d.id),u=a.get(p);if(u){d.addDependencyToModuleRecord(ef.module(a,p),function(x){return Object.assign(d.recorder,x)});if(void 0==l)return u;u.hasOwnProperty(l)||console.warn("import from "+u+": Has no export "+
l+"!");return u[l]}console.warn("import of "+l+" failed: "+e+" (tried as "+d.id+") is not loaded!")}},b)))}},varDefinitionCallbackName:{configurable:!0,enumerable:!0,get:function(){return"defVar_"+this.id}}});ef.ModuleInterface=tg;ef.default=ex;var Ee=lively.FreezerRuntime.recorderFor("lively.modules/src/instrumentation.js");Ee.canonicalURL=function(a){var d=a.match(/([^:]+:\/\/)(.*)/);if(d){var k=d[1];a=d[2]}a=a.replace(/([^:])\/[\/]+/g,"$1/");return(k||"")+a};Ee.prepareNodejsCaching=function(){var a=
System._nodeRequire("fs"),d=System._nodeRequire("path"),k="win32"===Ee.process.platform;d=k||"/"!==Ee.process.cwd()?Ee.process.cwd():d.join(Ee.process.env.HOME,".lively.next");Ee.nodejsCacheDirURL=k?"file:///"+d.replace(/\\/g,"/"):"file://"+d;a.existsSync(d)||a.mkdirSync(d)};Ee.getExceptions=$T;Ee.setExceptions=aU;Ee.prepareCodeForCustomCompile=bU;Ee.prepareTranslatedCodeForSetterCapture=cU;Ee.getCachedNodejsModule=function(a,d){try{var k=a._nodeRequire("module").Module,b=k._resolveFilename(d.name.replace(/^file:\/\//,
"").replace(/^\/([a-z]:\/)/i,"$1"));return k._cache[b]}catch(e){a.debug&&console.log("[lively.modules getCachedNodejsModule] %s unknown to nodejs",d.name)}return null};Ee.addNodejsWrapperSource=function(a,d){var k=Ee.getCachedNodejsModule(a,d);if(k)return d.metadata.format="esm",d.source="var exports = System._nodeRequire('"+k.id+"'); export default exports;\n"+Ee.properties.allOwnPropertiesOrFunctions(k.exports).map(function(b){return Ee.isValidIdentifier(b)?"export var "+b+" = exports['"+b+"'];":
'/*ignoring export "'+b+'" b/c it is not a valid identifier*/'}).join("\n"),a.debug&&console.log("[lively.modules customTranslate] loading %s from nodejs module cache",d.name),!0;a.debug&&console.log("[lively.modules customTranslate] %s not yet in nodejs module cache",d.name);return!1};Ee.customTranslate=function(a,d){var k=this,b,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,za,Ia,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ia){switch(ia.nextAddress){case 1:b=k;e=b.debug;if(p=(l=d.metadata)&&
l.hasOwnProperty("instrument")&&!l.instrument||Ee.exceptions.some(function(W){return W(d.name)}))return e&&console.log("[lively.modules customTranslate ignoring] %s",d.name),ia.return(a(d));if(Ee.isNode&&Ee.addNodejsWrapperSource(b,d))return e&&console.log("[lively.modules] loaded %s from nodejs cache",d.name),ia.return(a(d));u=Date.now();x=Ee.detectModuleFormat(d.source,l);z=Ee.module(b,d.name);E=!1;G="esm"===x;z.setSource(d.source);ia.setCatchFinallyBlocks(2);J=b.useModuleTranslationCache;K=b.global.indexedDB;
T=J&&String(Ee.string.hashCode(d.source));if(J&&K&&G)return P=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Ee.BrowserModuleTranslationCache),ia.yield(P.fetchStoredModuleSource(d.name),8);if(!(Ee.isNode&&J&&G)){ia.jumpTo(5);break}P=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Ee.NodeModuleTranslationCache);return ia.yield(P.fetchStoredModuleSource(d.name),7);case 7:if((da=ia.yieldResult)&&da.hash==T&&da.timestamp>=Ee.NodeModuleTranslationCache.earliestDate&&
da.source)return l.format="register",l.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from filesystem cache after %sms",d.name,Date.now()-u),ia.return(Promise.resolve(da.source));ia.jumpTo(5);break;case 8:if((da=ia.yieldResult)&&da.hash==T&&da.timestamp>=Ee.BrowserModuleTranslationCache.earliestDate&&da.source)return l.format="register",l.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from browser cache after %sms",d.name,Date.now()-u),ia.return(Promise.resolve(da.source));
case 5:ia.leaveTryBlock(3);break;case 2:fa=ia.enterCatchBlock(),console.error("[lively.modules customTranslate] error reading module translation cache: "+fa.stack);case 3:return ka={},G?(z.recorderName="__lvVarRecorder",z.recorder===b.global&&z.unloadEnv(),d.metadata.format="esm",za=Ee.prepareCodeForCustomCompile(b,d.source,d.name,z,e),ka=za.options,Ia=za.source,d.source=Ia,E=d.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as es6 module",d.name)):"global"===
d.metadata.format&&(z.recorderName="System.global",z.recorder=b.global,d.metadata.format="global",N=Ee.prepareCodeForCustomCompile(b,d.source,d.name,z,e),ka=N.options,Ia=N.source,d.source=Ia,E=d.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as instrumented global module",d.name)),E||e&&console.log("[lively.modules] customTranslate ignoring %s b/c don't know how to handle format %s",d.name,d.metadata.format),ia.return(a(d).then(function(W){var ca,sa,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){switch(Aa.nextAddress){case 1:0===
W.indexOf("System.register(")&&(e&&console.log("[lively.modules customTranslate] Installing System.register setter captures for %s",d.name),W=Ee.prepareTranslatedCodeForSetterCapture(b,W,d.name,z,ka,e));if(Ee.isNode&&J&&G)return ca=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Ee.NodeModuleTranslationCache),Aa.setCatchFinallyBlocks(8),Aa.yield(ca.cacheModuleSource(d.name,T,W),10);if(!(J&&K&&G)){Aa.jumpTo(3);break}ca=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=
new Ee.BrowserModuleTranslationCache);Aa.setCatchFinallyBlocks(5);return Aa.yield(ca.cacheModuleSource(d.name,T,W),7);case 7:e&&console.log("[lively.modules customTranslate] stored cached version for %s",d.name);Aa.leaveTryBlock(3);break;case 5:sa=Aa.enterCatchBlock();console.error("[lively.modules customTranslate] failed storing module cache: "+sa.stack);Aa.jumpTo(3);break;case 10:e&&console.log("[lively.modules customTranslate] stored cached version in filesystem for %s",d.name);Aa.leaveTryBlock(3);
break;case 8:la=Aa.enterCatchBlock(),console.error("[lively.modules customTranslate] failed storing module cache: "+la.stack);case 3:return e&&console.log("[lively.modules customTranslate] done %s after %sms",d.name,Date.now()-u),Aa.return(W)}})}))}})};Ee.instrumentSourceOfEsmModuleLoad=mK;Ee.instrumentSourceOfGlobalModuleLoad=nK;Ee.wrapModuleLoad=XD;Ee.unwrapModuleLoad=oK;Ee.parse=kl;Ee.nodes=Ys;Ee.isValidIdentifier=qz;var IX=Ee.nodes;Ee.funcCall=IX.funcCall;Ee.member=IX.member;Ee.literal=IX.literal;
Ee.evalCodeTransform=Nt;Ee.evalCodeTransformOfSystemRegisterSetters=ow;Ee.arr=Gf;Ee.string=Dh;Ee.properties=go;Ee.module=ex;Ee.detectModuleFormat=XN;Ee.resource=hd;Ee.installHook=qu;Ee.removeHook=cx;Ee.isHookInstalled=ru;Ee.classToFunctionTransform=Qs;Ee.isNode=System.get("@system-env").node;var DF=function(){};DF.prototype.cacheModuleSource=function(a,d,k){throw Error("not yet implemented");};DF.prototype.fetchStoredModuleSource=function(a){throw Error("not yet implemented");};DF.prototype.deleteCachedData=
function(a){throw Error("not yet implemented");};$jscomp.global.Object.defineProperties(DF,{earliestDate:{configurable:!0,enumerable:!0,get:function(){return+new Date("Sun Oct 18 2020 16:00:00 GMT-0800 (PST)")}}});Ee.ModuleTranslationCache=DF;Ee.nodejsCacheDirURL=null;var ht=function(){return Ee.ModuleTranslationCache.apply(this,arguments)||this};$jscomp.inherits(ht,Ee.ModuleTranslationCache);ht.prototype.ensurePath=function(a){var d=this,k,b,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:return z.yield(d.moduleCacheDir.join(a).exists(),
2);case 2:if(z.yieldResult)return z.return();k="";l=$jscomp.makeIterator(a.split("/"));p=l.next();case 3:if(p.done){z.jumpTo(0);break}u=p.value;k+=u+"/";b=d.moduleCacheDir.join(k);return z.yield(b.exists(),6);case 6:if(z.yieldResult){z.jumpTo(7);break}z.setCatchFinallyBlocks(8);return z.yield(b.mkdir(),10);case 10:z.leaveTryBlock(7);break;case 8:if(x=z.enterCatchBlock(),"EEXIST"!=x.code)throw x;case 7:return b=Ee.resource("file://"+k+"/package.json"),z.yield(b.exists(),11);case 11:if(!z.yieldResult){z.jumpTo(4);
break}return z.yield(b.read(),13);case 13:return e=z.yieldResult,z.yield(d.moduleCacheDir.join(k+"/package.json").write(e),4);case 4:p=l.next(),z.jumpTo(3)}})};ht.prototype.dumpModuleCache=function(){var a=this,d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:k=u.forIn(System._nodeRequire("module").Module._cache);case 2:if(null==(d=k.getNext())){u.jumpTo(0);break}b=Ee.resource("file://"+d);return u.yield(b.exists(),5);case 5:if(!u.yieldResult){u.jumpTo(2);
break}e=a;l=e.cacheModuleSource;p=d;return u.yield(b.read(),8);case 8:return u.yield(l.call(e,p,"NO_HASH",u.yieldResult),2)}})};ht.prototype.getFileName=function(a){return a.match(/([^\/]*.)(\.js)?$/)[0]};ht.prototype.fetchStoredModuleSource=function(a){var d=this,k,b,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:return a=a.replace("file://",""),k=d.getFileName(a),b=a.replace(k,""),e=d.moduleCacheDir.join(a),z.yield(e.exists(),2);case 2:return z.yieldResult?
z.yield(e.stat(),3):z.return(null);case 3:return l=z.yieldResult,p=l.birthtime,z.yield(e.read(),4);case 4:return u=z.yieldResult,z.yield(d.moduleCacheDir.join(b+"/.hash_"+k).read(),5);case 5:return x=z.yieldResult,z.return({source:u,timestamp:p,hash:x})}})};ht.prototype.cacheModuleSource=function(a,d,k){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?(a=a.replace("file://",""),e=b.getFileName(a),l=a.replace(e,""),p.yield(b.ensurePath(l),2)):3!=
p.nextAddress?p.yield(b.moduleCacheDir.join(a).write(k),3):p.yield(b.moduleCacheDir.join(l+"/.hash_"+e).write(d),0)})};ht.prototype.deleteCachedData=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(a=a.replace("file://",""),k=d.getFileName(a),a.replace(k,""),b=d.moduleCacheDir.join(a),e.yield(b.exists(),2)):3!=e.nextAddress?e.yieldResult?e.yield(b.remove(),3):e.return(!1):e.return(!0)})};$jscomp.global.Object.defineProperties(ht.prototype,
{moduleCacheDir:{configurable:!0,enumerable:!0,get:function(){Ee.nodejsCacheDirURL||Ee.prepareNodejsCaching();return Ee.resource(Ee.nodejsCacheDirURL+"/.module_cache/")}}});Ee.NodeModuleTranslationCache=ht;var it=function(a){a=void 0===a?"lively.modules-module-translation-cache":a;var d=Ee.ModuleTranslationCache.call(this)||this;d.version=2;d.sourceCodeCacheStoreName="sourceCodeStore";d.dbName=a;d.db=d.openDb();return d};$jscomp.inherits(it,Ee.ModuleTranslationCache);it.prototype.openDb=function(){var a=
this,d=System.global.indexedDB.open(this.version);return new Promise(function(k,b){d.onsuccess=function(e){k(this.result)};d.onerror=function(e){return b(e.target)};d.onupgradeneeded=function(e){return e.currentTarget.result.createObjectStore(a.sourceCodeCacheStoreName,{keyPath:"moduleId"})}})};it.prototype.deleteDb=function(){var a=System.global.indexedDB.deleteDatabase(this.dbName);return new Promise(function(d,k){a.onerror=function(b){return k(b.target)};a.onsuccess=function(b){return d(b)}})};
it.prototype.closeDb=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(a.db,2);d=b.yieldResult;k=d.close();return b.return(new Promise(function(e,l){k.onsuccess=function(p){e(this.result)};k.onerror=function(p){return l(p.target.errorCode)}}))})};it.prototype.cacheModuleSource=function(a,d,k){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.db,2);e=l.yieldResult;
return l.return(new Promise(function(p,u){var x=e.transaction([b.sourceCodeCacheStoreName],"readwrite"),z=x.objectStore(b.sourceCodeCacheStoreName),E=Date.now();z.put({moduleId:a,hash:d,source:k,timestamp:E});x.oncomplete=p;x.onerror=u}))})};it.prototype.fetchStoredModuleSource=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(d.db,2);k=b.yieldResult;return b.return(new Promise(function(e,l){var p=k.transaction([d.sourceCodeCacheStoreName]).objectStore(d.sourceCodeCacheStoreName).get(a);
p.onerror=l;p.onsuccess=function(u){return e(p.result)}}))})};it.prototype.deleteCachedData=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(d.db,2);k=b.yieldResult;return b.return(new Promise(function(e,l){var p=k.transaction([d.sourceCodeCacheStoreName],"readwrite").objectStore(d.sourceCodeCacheStoreName).delete(a);p.onerror=l;p.onsuccess=function(u){return e(p.result)}}))})};Ma("a9",it);Ee.BrowserModuleTranslationCache=it;
Ee.node_modulesDir=System.decanonicalize("lively.modules/node_modules/");Ee.exceptions=[function(a){return!a.endsWith(".js")&&!a.endsWith(".jsx")&&!a.startsWith("https://jspm.dev")},function(a){return a.endsWith("dist/acorn.js")||a.endsWith("dist/escodegen.browser.js")||a.endsWith("bowser.js")||a.endsWith("TweenMax.min.js")},function(a){return a.endsWith("babel-core/browser.js")||a.endsWith("system.src.js")||a.includes("systemjs-plugin-babel")}];Ee.pendingConfigs=[];Ee.configInitialized=!1;Ee.prepareCodeForCustomCompile=
bU;Ee.prepareCodeForCustomCompile=bU;Ee.prepareTranslatedCodeForSetterCapture=cU;Ee.prepareTranslatedCodeForSetterCapture=cU;Ee.wrapModuleLoad=XD;Ee.wrapModuleLoad=XD;Ee.unwrapModuleLoad=oK;Ee.unwrapModuleLoad=oK;Ee.getExceptions=$T;Ee.getExceptions=$T;Ee.setExceptions=aU;Ee.setExceptions=aU;Ee.instrumentSourceOfEsmModuleLoad=mK;Ee.instrumentSourceOfEsmModuleLoad=mK;Ee.instrumentSourceOfGlobalModuleLoad=nK;Ee.instrumentSourceOfGlobalModuleLoad=nK;var gh=lively.FreezerRuntime.recorderFor("lively.modules/src/resource.js");
gh.fetchResource=function(a,d){var k=this,b,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,za,Ia,N,ia,W,ca,sa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(la){switch(la.nextAddress){case 1:b=k;e=25E4;l=b.resource(d.name);p=b.get("@system-env").node&&!l.isNodeJSFileResource;if(!p){la.jumpTo(2);break}return la.yield(Ewa(d.name),3);case 3:l=la.yieldResult;case 2:if(!l)return la.return(a(d));if(gh.jsFileHashMap||b.get("@system-env").node){la.jumpTo(4);break}z=gh;return la.yield(b.resource(b.baseURL).join("__JS_FILE_HASHES__").readJson(),
5);case 5:z.jsFileHashMap=la.yieldResult;case 4:E=b.useModuleTranslationCache;G=b.global.indexedDB;J=b._livelyModulesTranslationCache;if(b.get("@system-env").node||!E||!G||!J){la.jumpTo(6);break}return la.yield(J.fetchStoredModuleSource(d.name),7);case 7:if((K=la.yieldResult)&&(gh.jsFileHashMap[d.name.replace(b.baseURL,"/")]==K.hash||d.name.includes("jspm")))return d.metadata.instrument=!1,la.return(K.source);case 6:if(l.isResource&&l.ext()&&l.ext().startsWith("css"))return la.return("");la.setCatchFinallyBlocks(8);
if(!l.isResource){T=l;la.jumpTo(10);break}return la.yield(l.read(),11);case 11:T=la.yieldResult;case 10:u=T;la.leaveTryBlock(9);break;case 8:x=P=la.enterCatchBlock();case 9:if(!x||!b.get("@system-env").browser){la.jumpTo(12);break}da=l.url.startsWith("http");fa=!l.url.startsWith(document.location.origin);if(!da||!fa){la.jumpTo(12);break}la.setCatchFinallyBlocks(14);return la.yield(l.makeProxied(b.baseURL).read(),16);case 16:u=la.yieldResult;x=null;la.leaveTryBlock(12);break;case 14:la.enterCatchBlock();
case 12:if(x)throw x;if(!p){la.jumpTo(17);break}ka=u.headers||{};za=ka._headers;Ia=$jscomp.makeIterator(za&&za["content-encoding"]||[]);N=Ia.next().value;return"br"==N?(ia=gh.Buffer,W=ia.from,ca=gh.brotli,sa=ca.decompress,la.yield(u.buffer(),21)):la.yield(u.text(),20);case 20:u=la.yieldResult;la.jumpTo(17);break;case 21:u=W.call(ia,sa.call(ca,la.yieldResult)).toString();case 17:if(!(u.length>e&&$world)||b._loadingIndicator){la.jumpTo(22);break}b._loadingIndicator=$world.execCommand("open loading indicator",
{label:"loading module",status:d.name.replace(b.baseURL,"")});return la.yield(gh.promise.delay(500),23);case 23:if(!b._loadingIndicator){la.jumpTo(22);break}return la.yield(b._loadingIndicator.whenRendered(),22);case 22:return la.return(u)}})};gh.livelyProtocol=function(a,d){var k=d.match(gh.livelyURLRe);if(!k)return a(d);a=$jscomp.makeIterator(k);a.next();a.next();var b=a.next().value;return{read:function(){var e="undefined"!==typeof $world&&$world.getMorphWithId(b);return Promise.resolve(e?e.textString:
"/*Could not locate "+b+"*/")},write:function(e){var l="undefined"!==typeof $world&&$world.getMorphWithId(b);if(!l)return Promise.reject("Could not save morph "+b);l.textString=e;return Promise.resolve(this)}}};gh.wrapResource=pK;gh.unwrapResource=dU;gh.resource=hd;gh.Resource=Cg;gh.installHook=qu;gh.removeHook=cx;gh.isHookInstalled=ru;gh.brotli=gh.brotli||void 0;if(System.get("@system-env").node){var Ewa=System._nodeRequire("node-fetch");gh.brotli=System._nodeRequire("brotli")}gh.jsFileHashMap=gh.jsFileHashMap||
void 0;gh.livelyURLRe=/^lively:\/\/([^\/]+)\/(.*)$/;gh.wrapResource=pK;gh.wrapResource=pK;gh.unwrapResource=dU;gh.unwrapResource=dU;var Yx=function(){return gh.Resource.apply(this,arguments)||this};$jscomp.inherits(Yx,gh.Resource);Yx.prototype.read=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){d=a.morphId;k="undefined"!==typeof $world&&$world.getMorphWithId(d);return b.return(Promise.resolve(k?k.textString:"/*Could not locate "+d+"*/"))})};Yx.prototype.write=
function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){k=d.morphId;b="undefined"!==typeof $world&&$world.getMorphWithId(k);if(!b)return e.return(Promise.reject("Could not save morph "+k));b.textString=a;return e.return(Promise.resolve(d))})};Yx.prototype.exists=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return d.return("undefined"!==typeof $world&&$world.getMorphWithId(a.morphId))})};Yx.prototype.remove=function(){var a=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){"undefined"!==typeof $world&&$world.getMorphWithId(a.morphId).remove();return d.return(!0)})};$jscomp.global.Object.defineProperties(Yx.prototype,{canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!1}},morphId:{configurable:!0,enumerable:!0,get:function(){var a=this.url.match(gh.livelyURLRe);a=$jscomp.makeIterator(a);a.next();a.next();return a.next().value}}});gh.LivelyResource=Yx;var JX={name:"lively.modules",matches:function(a){return a.match(gh.livelyURLRe)},
resourceClass:gh.LivelyResource};gh.resourceExtension=JX;gh.resourceExtension=JX;gh.resourceExtension=JX;gh.registerExtension=xe;gh.promise=bh;gh.registerExtension(gh.resourceExtension);var Qd=lively.FreezerRuntime.recorderFor("lively.modules/src/system.js");Qd.wrapModuleResolution=qK;Qd.unwrapModuleResolution=rK;Qd.livelySystemEnv=sK;Qd.systems=function(){System.constructor.systems||(System.constructor.systems={});return System.constructor.systems};Qd.nameOfSystem=function(a){return Object.keys(Qd.systems()).detect(function(d){return Qd.systems()[d]===
a})};Qd.getSystem=fx;Qd.removeSystem=gx;Qd.makeSystem=function(a){return Qd.prepareSystem(new System.constructor,a)};Qd.prepareSystem=tK;Qd.urlQuery=function(){return"undefined"!==typeof document&&document.location?(document.location.search||"").replace(/^\?/,"").split("&").reduce(function(a,d){var k=d.split("=");d=k[0];k=k[1];"true"===k||"false"===k?k=eval(k):isNaN(Number(k))||(k=Number(k));a[d]=k;return a},{}):{}};Qd.preNormalize=function(a,d,k){".."===d&&(d="../index.js");d=d.replace(Qd.doubleSlashRe,
function(u){return":"===u[0]?u:u[0]+"/"});var b=a.get("@lively-env").packageRegistry;if(b){var e=k&&b.findPackageHavingURL(k);if(e){var l=e.map,p=e.url;if(l=l&&l[d]||a.map[d])"object"===typeof l&&(l=Qd.normalize_doMapWithObject(l,e,a)),"string"===typeof l&&""!==l&&(d=l),d.startsWith(".")&&(d=Qd.urlResolve(Qd.join(p,d)))}}b&&(a=b.resolvePath(d,k))&&(a.endsWith("/")&&!d.endsWith("/")&&(a=a.slice(0,-1)),!a.endsWith("/")&&d.endsWith("/")&&(a+="/"),d=a);return d};Qd.postNormalize=function(a,d,k){k=d.replace(Qd.jsExtRe,
"");if(d.endsWith("/"))return d;var b=a.get("@lively-env").packageRegistry;if(b){if(b=b.findPackageWithURL(k))return b=(b.main||"index.js").replace(Qd.dotSlashStartRe,""),a=k.replace(Qd.trailingSlashRe,"")+"/"+b}else if(k in a.packages&&(b=a.packages[k].main))return a=k.replace(Qd.trailingSlashRe,"")+"/"+b.replace(Qd.dotSlashStartRe,"");k=d.match(Qd.jsonJsExtRe);a.debug&&console.log(">> [postNormalize] "+(k?k[1]:d));return k?k[1]:d};Qd.checkExistence=function(a,d){var k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:d._fileCheckMap=
d._fileCheckMap||{};if(a in d._fileCheckMap)return p.return(d._fileCheckMap[a]);k=d._livelyModulesTranslationCache;if(!(b=k)){p.jumpTo(2);break}return p.yield(k.fetchStoredModuleSource(a),3);case 3:b=p.yieldResult;case 2:if(b)return p.return(d._fileCheckMap[a]=!0);e=d._fileCheckMap;l=a;return p.yield(Qd.resource(a).exists(),4);case 4:return p.return(e[l]=p.yieldResult)}})};Qd.normalizeHook=function(a,d,k,b){var e=this,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:if(k&&
"cjs"==d)return G.return("cjs");l=e;p=Qd.preNormalize(l,d,k);return G.yield(a(p,k,b),2);case 2:u=G.yieldResult;x=Qd.postNormalize(l,u||p,!1);z=x.startsWith("file:");l.debug&&console.log("[normalize] "+d+" => "+x);if(Qd.jsExtRe.test(d)||Qd.jsxExtRe.test(d)||Qd.jsonExtRe.test(x)||Qd.nodeModRe.test(x)||Qd.nodeExtRe.test(x)||l.loads&&l.loads[x]){G.jumpTo(3);break}if(Qd.jsExtRe.test(x))return G.yield(Qd.checkExistence(x,l),9);if(x.includes("jspm.dev")||"@empty"==x){G.jumpTo(3);break}return G.yield(Qd.checkExistence(x+
".js",l),7);case 7:return G.yieldResult?G.return(x+".js"):G.yield(Qd.checkExistence(x+"/index.js",l),8);case 8:if(G.yieldResult)return G.return(x+"/index.js");G.jumpTo(3);break;case 9:if(G.yieldResult)return G.return(x);E=x.replace(".js","/index.js");return G.yield(Qd.checkExistence(E,l),10);case 10:return G.yieldResult||!z?G.return(E):G.return(x.replace(".js","/index.node"));case 3:return Qd.jsxJsExtRe.test(x)&&(x=x.replace(".jsx.js",".jsx")),G.return(x)}})};Qd.decanonicalizeHook=function(a,d,k,
b){if(d&&d.endsWith("!cjs")){d=d.replace("!cjs","");var e="!cjs"}var l=Qd.preNormalize(this,d,k);a=a(l,k,b);a=Qd.postNormalize(this,a,!0);e&&(a+=e);this.debug&&console.log("[normalizeSync] "+d+" => "+a);return a};Qd.locateHook=function(a,d){var k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return k=$jscomp.makeIterator(d.name.split("!")),b=k.next().value,k.next(),d.name=b,l.yield(a(d),2);e=l.yieldResult;return l.return(e)})};Qd.normalize_doMapWithObject=
function(a,d,k){d=k.get(d.map["@env"]||"@system-env");var b;for(b in a){var e=(k="~"==b[0])?b.substr(1):b,l=d;for(e=e.split(".");e.length;)l=l[e.shift()];if(!k&&l||k&&!l){var p=a[b];break}}if(p&&"string"!==typeof p)throw Error("Unable to map a package conditional to a package conditional.");return p};Qd.normalize_packageOfURL=function(a,d){var k=Object.keys(d.packages||{}).map(function(b){return 0===a.indexOf(b)?{url:b,penalty:a.slice(b.length).length}:null}).filter(function(b){return!!b});return(d=
(k=k.length?k.reduce(function(b,e){return b.penalty>e.penalty?e:b}).url:null)&&d.packages[k])?{systemPackage:d,packageURL:k}:null};Qd.newModule_volatile=function(a,d){var k=Object.freeze;Object.freeze=function(b){return b};a=a(d);Object.freeze=k;return a};Qd.printSystemConfig=uK;Qd.instantiate_triggerOnLoadCallbacks=function(a,d){var k=this;return a(d).then(function(b){var e={};Qd.promise.waitFor(6E4,function(){return k.get(d.name)},e).then(function(l){if(l===e)console.warn("[lively.modules] instantiate_triggerOnLoadCallbacks for "+
d.name+" timed out");else{l=d.name;for(var p=Qd.classHolder.module(k,l),u=k.get("@lively-env").onLoadCallbacks,x=u.length;x--;){var z=u[x],E=z.moduleName,G=z.callback;if((z.resolved?E:k.decanonicalize(E))===l){u.splice(x,1);try{G(p)}catch(J){console.error(J)}}}Qd.emit("lively.modules/moduleloaded",{module:d.name},Date.now(),k);k._loadingIndicator&&(k._loadingIndicator.remove(),k._loadingIndicator=null)}});return b})};Qd.whenLoaded=vK;Qd.loadedModules=wK;Qd.knownModuleNames=xK;Qd.searchLoadedModules=
eU;Qd.arr=Gf;Qd.obj=eg;Qd.promise=bh;Qd.removeHook=cx;Qd.installHook=qu;Qd.isHookInstalled=ru;Qd.classHolder=gt;Qd.isNode=System.get("@system-env").node;Qd.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Qd.defaultOptions={notificationLimit:null};Qd.wrapModuleResolution=qK;Qd.wrapModuleResolution=qK;Qd.unwrapModuleResolution=rK;Qd.unwrapModuleResolution=rK;Qd.wrapModuleLoad=XD;Qd.wrapResource=pK;Qd.emit=ss;Qd.join=BF;Qd.urlResolve=
$J;Qd.resource=hd;Qd.dotSlashStartRe=/^\.?\//;Qd.trailingSlashRe=/\/$/;Qd.jsExtRe=/\.js$/;Qd.jsxExtRe=/\.jsx$/;Qd.nodeExtRe=/\.node$/;Qd.jsonExtRe=/\.json$/;Qd.jsonJsExtRe=/(.*\.json)\.js$/i;Qd.jsxJsExtRe=/(.*\.jsx)\.js$/i;Qd.doubleSlashRe=/.\/{2,}/g;Qd.nodeModRe=/@node.*/;Qd.whenLoaded=vK;Qd.whenLoaded=vK;Qd.getSystem=fx;Qd.getSystem=fx;Qd.removeSystem=gx;Qd.removeSystem=gx;Qd.prepareSystem=tK;Qd.prepareSystem=tK;Qd.printSystemConfig=uK;Qd.printSystemConfig=uK;Qd.livelySystemEnv=sK;Qd.livelySystemEnv=
sK;Qd.loadedModules=wK;Qd.loadedModules=wK;Qd.knownModuleNames=xK;Qd.knownModuleNames=xK;Qd.searchLoadedModules=eU;Qd.searchLoadedModules=eU;var Ng=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package-registry.js");Ng.isAbsolute=function(a){return a.startsWith("/")||a.startsWith("http:")||a.startsWith("https:")||a.startsWith("file:")||a.match(Ng.urlStartRe)};Ng.ensureResource=function(a){return a.isResource?a:Ng.resource(a)};Ng.semver=SE;Ng.arr=Gf;Ng.obj=eg;Ng.promise=bh;Ng.getPackage=
WD;Ng.Package=jj;Ng.resource=hd;Ng.isURL=dx;Ng.classHolder=gt;Ng.urlStartRe=/^[a-z\.-_\+]+:/i;var Gi=function(a,d){d=void 0===d?{}:d;this.System=a;this.packageBaseDirs=d.packageBaseDirs||[];this.devPackageDirs=d.devPackageDirs||[];this.individualPackageDirs=d.individualPackageDirs||[];this._readyPromise=null;this.packageMap={};this._byURL=null};Gi.ofSystem=function(a){var d=a.get("@lively-env").packageRegistry;d||(d=a["__lively.modules__packageRegistry"]=new this(a));return d};Gi.forDirectory=function(a,
d){return new this(a,{packageBaseDirs:[Ng.ensureResource(d)]})};Gi.fromJSON=function(a,d){return(new this(a)).fromJSON(d)};Gi.prototype.resetByURL=function(){this._byURL=null};Gi.prototype.allPackageURLs=function(){return Object.keys(this.byURL)};Gi.prototype.toJSON=function(){function a(E){E=E.url;return E.startsWith(d.baseURL)?E.slice(d.baseURL.length).replace(/^\//,""):E}var d=this.System,k=this.packageMap,b=this.individualPackageDirs,e=this.devPackageDirs,l=this.packageBaseDirs,p={},u;for(u in k){var x=
k[u];p[u]={};p[u].latest=x.latest;p[u].versions={};for(var z in x.versions)p[u].versions[z]=x.versions[z].toJSON()}return{packageMap:p,individualPackageDirs:b.map(a),devPackageDirs:e.map(a),packageBaseDirs:l.map(a)}};Gi.prototype.fromJSON=function(a){function d(E){return Ng.isURL(E)?Ng.resource(E):Ng.resource(b.baseURL).join(E)}var k={},b=this.System,e=Ng.resource(b.baseURL),l;for(l in a.packageMap){var p=a.packageMap[l];k[l]={};k[l].latest=p.latest;k[l].versions={};for(var u in p.versions){var x=
p.versions[u],z=x.url;Ng.isAbsolute(z)||(z=e.join(z).url);x=Ng.Package.fromJSON(b,Object.assign({},x,{url:z}));k[l].versions[u]=x}}this.packageMap=k;this.individualPackageDirs=a.individualPackageDirs.map(d);this.devPackageDirs=a.devPackageDirs.map(d);this.packageBaseDirs=a.packageBaseDirs.map(d);this.resetByURL();Ng.classHolder.ModulePackageMapping.forSystem(b).clearCache();return this};Gi.prototype.updateFromJSON=function(a){var d=this.packageMap,k;for(k in a.packageMap){var b=a.packageMap[k];d[k]||
(d[k]={});d[k].latest?Ng.semver.gt(b.latest,d[k].latest)&&(d[k].latest=b.latest):d[k].latest;d[k].versions||(d[k].versions={});var e=this.System,l=Ng.resource(e.baseURL),p;for(p in b.versions){var u=b.versions[p],x=u.url;Ng.isAbsolute(x)||(x=l.join(x).url);u=new Ng.Package.fromJSON(e,Object.assign({},u,{url:x}));d[k].versions[p]=u}}this.resetByURL();Ng.classHolder.ModulePackageMapping.forSystem(System).clearCache();return this};Gi.prototype.whenReady=function(){return this._readyPromise||Promise.resolve()};
Gi.prototype.isReady=function(){return!this._readyPromise};Gi.prototype.withPackagesDo=function(a){for(var d in this.packageMap){var k=this.packageMap[d].versions,b;for(b in k)a(k[b])}};Gi.prototype.findPackage=function(a){for(var d in this.packageMap){var k=this.packageMap[d].versions,b;for(b in k){var e=k[b];if(a(e))return e}}return null};Gi.prototype.filterPackages=function(a){var d=[];this.withPackagesDo(function(k){return a(k)&&d.push(k)});return d};Gi.prototype.allPackages=function(){var a=
[],d;for(d in this.packageMap){var k=this.packageMap[d].versions,b;for(b in k)a.push(k[b])}return a};Gi.prototype.sortPackagesByVersion=function(a){return a.sort(function(d,k){return Ng.semver.compare(d.version,k.version,!0)})};Gi.prototype.matches=function(a,d,k){var b=a.version;return a.name!==d?!1:!k||Ng.semver.validRange(b||"",!0)&&Ng.semver.satisfies(b,k,!0)?!0:!1};Gi.prototype.coversDirectory=function(a){a=Ng.ensureResource(a).asDirectory();var d=this.packageBaseDirs,k=this.devPackageDirs;if(this.individualPackageDirs.some(function(e){return e.equals(a)}))return"individualPackageDirs";
if(k.some(function(e){return e.equals(a)}))return"devPackageDirs";var b=a.parent().parent();return d.some(function(e){return e.equals(b)})?this.allPackages().find(function(e){return Ng.ensureResource(e.url).equals(a)})?"packageCollectionDirs":"maybe packageCollectionDirs":null};Gi.prototype.lookup=function(a,d){var k=this,b=this.packageMap[a];if(!b)return null;if(!d||"latest"===d)return b.versions[b.latest];if(!Ng.semver.validRange(d,!0))throw Error("PackageRegistry>>lookup of "+a+": Invalid version - "+
d);b=Ng.obj.values(b.versions).filter(function(e){return k.matches(e,a,d)});return 1>=b.length?b[0]:Ng.arr.last(this.sortPackagesByVersion(b))};Gi.prototype.findPackageDependency=function(a,d,k){k||(k=a.dependencies[d]||a.devDependencies[d]);Ng.semver.validRange(k,!0)||(k=null);return this.lookup(d,k)};Gi.prototype.findPackageWithURL=function(a){a.isResource&&(a=a.url);a.endsWith("/")&&(a=a.slice(0,-1));return this.byURL[a]};Gi.prototype.findPackageHavingURL=function(a){a.isResource&&(a=a.url);a.endsWith("/")&&
(a=a.slice(0,-1));var d=Infinity,k=null,b=this.byURL,e;for(e in b)if(0===a.indexOf(e)){var l=a.slice(e.length).length;l>=d||(d=l,k=b[e])}return k};Gi.prototype.findPackageForPath=function(a,d){if(Ng.isAbsolute(a))return this.findPackageHavingURL(a);if(a.startsWith("."))return null;a=$jscomp.makeIterator(a.split("/")).next().value;if(!a)return null;var k=a.indexOf("@");if(-1<k){var b=a.slice(k+1);a=a.slice(0,k)}return!b&&d?this.findPackageDependency(d,a):this.lookup(a,b)};Gi.prototype.resolvePath=
function(a,d){if(Ng.isAbsolute(a))return a;var k=d&&d.isPackage||null;if(!k&&d){if(a.startsWith("."))return d=Ng.resource(d),d.isDirectory()||(d=d.parent()),d.join(a).withRelativePartsResolved().url;k=this.findPackageHavingURL(d)}d=this.findPackageForPath(a,k);if(!d)return null;k=a.indexOf("/");return(a=-1===k||k===a.length-1?"":a.slice(k))?Ng.resource(d.url).join(a).url:d.url};Gi.prototype.update=function(){var a=this,d,k,b,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,za,Ia,N,ia,W,ca,sa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(la){switch(la.nextAddress){case 1:if(!a.isReady())return la.return(a.whenReady().then(function(){return a.update()}));
d=Ng.promise.deferred();a._readyPromise=d.promise;a.packageBaseDirs=a.packageBaseDirs.map(function(Aa){return Aa.asDirectory()});a.individualPackageDirs=a.individualPackageDirs.map(function(Aa){return Aa.asDirectory()});a.devPackageDirs=a.devPackageDirs.map(function(Aa){return Aa.asDirectory()});k={};la.setCatchFinallyBlocks(2,3);b=$jscomp.makeIterator(a.packageBaseDirs);e=b.next();case 5:if(e.done){la.jumpTo(7);break}l=e.value;p=$jscomp;u=p.makeIterator;return la.yield(l.dirList(1),8);case 8:x=u.call(p,
la.yieldResult),z=x.next();case 9:if(z.done){e=b.next();la.jumpTo(5);break}E=z.value;G=$jscomp;J=G.makeIterator;return la.yield(E.dirList(1),12);case 12:K=J.call(G,la.yieldResult.filter(function(Aa){return Aa.isDirectory()})),T=K.next();case 13:if(T.done){z=x.next();la.jumpTo(9);break}P=T.value;return la.yield(a._discoverPackagesIn(P,k,"packageCollectionDirs"),16);case 16:k=la.yieldResult;T=K.next();la.jumpTo(13);break;case 7:da=$jscomp.makeIterator(a.individualPackageDirs),e=da.next();case 17:if(e.done){la.jumpTo(19);
break}fa=e.value;return la.yield(a._discoverPackagesIn(fa,k,"individualPackageDirs"),20);case 20:k=la.yieldResult;e=da.next();la.jumpTo(17);break;case 19:ka=$jscomp.makeIterator(a.devPackageDirs),e=ka.next();case 21:if(e.done){la.jumpTo(23);break}za=e.value;return la.yield(a._discoverPackagesIn(za,k,"devPackageDirs"),24);case 24:k=la.yieldResult;e=ka.next();la.jumpTo(21);break;case 23:for(Ia in k)N=k[Ia],ia=N.pkg,W=N.config,ca=N.covered,a.System.debug&&console.log("[PackageRegistry] Adding discovered package "+
Ia+" (from "+ca+")"),a._addPackageWithConfig(ia,W,Ia+"/",ca);a._updateLatestPackages();d.resolve();case 3:la.enterFinallyBlock();a._readyPromise=null;a.resetByURL();Ng.classHolder.ModulePackageMapping.forSystem(a.System).clearCache();la.leaveFinallyBlock(4);break;case 2:sa=la.enterCatchBlock();d.reject(sa);la.jumpTo(3);break;case 4:return la.return(a)}})};Gi.prototype.addPackageAt=function(a,d,k){d=void 0===d?"individualPackageDirs":d;var b=this,e,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==
G.nextAddress){e=a.isResource?a.url:a;e.endsWith("/")&&e.slice(0,-1);if(b.byURL[e])throw Error("package in "+e+" already added to registry");return G.yield(b._discoverPackagesIn(Ng.ensureResource(a).asDirectory(),{},void 0,k),2)}l=G.yieldResult;for(p in l)b.byURL[p]||(u=l[p],x=u.pkg,z=u.config,E=b._addPackageDir(p,d,!0),b._addPackageWithConfig(x,z,p+"/",E));b.resetByURL();Ng.classHolder.ModulePackageMapping.forSystem(b.System).clearCache();b._updateLatestPackages();return G.return(b.findPackageWithURL(a))})};
Gi.prototype.removePackage=function(a,d){d=void 0===d?!0:d;var k=a.name,b=a.version,e=Ng.ensureResource(a.url),l=this.coversDirectory(e);"devPackageDirs"===l?this.devPackageDirs=this.devPackageDirs.filter(function(p){return!p.equals(e)}):"individualPackageDirs"===l&&(this.individualPackageDirs=this.individualPackageDirs.filter(function(p){return!p.equals(e)}));l=this.packageMap;l[k]&&(delete l[k].versions[b],0===Object.keys(l[k].versions).length&&delete l[k]);this.resetByURL();Ng.classHolder.ModulePackageMapping.forSystem(this.System).clearCache();
d&&this._updateLatestPackages(a.name)};Gi.prototype.updateNameAndVersionOf=function(a,d,k,b,e){var l=this.packageMap;l[d]?l[d].versions[k]||console.warn("[PackageRegistry>>updateNameAndVersionOf] No version entry "+k+" of "+d+" found in registry ("+a.url+")"):console.warn("[PackageRegistry>>updateNameAndVersionOf] "+d+"@"+k+" not found in registry ("+a.url+")");this._addToPackageMap(a,b,e);l[d]&&l[d].versions[k]&&(delete l[d].versions[k],0===Object.keys(l[d].versions).length&&delete l[d]);this._updateLatestPackages(a.name)};
Gi.prototype._updateLatestPackages=function(a){var d=this.packageMap;if(a&&d[a])d[a].latest=Ng.arr.last(Ng.semver.sort(Object.keys(d[a].versions),!0));else for(var k in d)d[k].latest=Ng.arr.last(Ng.semver.sort(Object.keys(d[k].versions),!0))};Gi.prototype._discoverPackagesIn=function(a,d,k,b){b=void 0===b?null:b;var e=this,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress){if(!a.isDirectory())return G.return(d);l=a.asFile().url;if(d.hasOwnProperty(l))return G.return(d);
G.setCatchFinallyBlocks(2);p=b&&b[l]||new Ng.Package(e.System,l);return G.yield(p.tryToLoadPackageConfig(),4)}if(2!=G.nextAddress)return u=G.yieldResult,p.setConfig(u),d[l]={pkg:p,config:u,covered:k},e.System.debug&&(x=u,z=x.name,E=x.version,console.log("[lively.modules] package "+z+"@"+E+" discovered in "+a.url)),G.return(d);G.enterCatchBlock();return G.return(d)})};Gi.prototype._addToPackageMap=function(a,d,k,b){if(!d)throw Error("Cannot add package without name");k||(k="0.0.0");var e=this.packageMap;
d=e[d]||(e[d]={versions:{},latest:null});if(d.versions[k])if(e="Redefining version "+k+" of package "+a.url,void 0===b||b)console.warn(e);else throw Error(e+" not allowed");d.versions[k]=a};Gi.prototype._addPackageWithConfig=function(a,d,k,b){(void 0===b?0:b)||this._addPackageDir(k,"individualPackageDirs",!0);a.registerWithConfig(d);this._addToPackageMap(a,a.name,a.version);return a};Gi.prototype._addPackageDir=function(a,d,k){d=void 0===d?"individualPackageDirs":d;k=void 0===k?!0:k;a=Ng.ensureResource(a).asDirectory();
if(("packageCollectionDirs"===d||"maybe packageCollectionDirs"===d)&&(this.coversDirectory(a)||"").includes("packageCollectionDirs"))return"packageCollectionDirs";a=this[d].concat(a);this[d]=k?Ng.arr.uniqBy(a,function(b,e){return b.equals(e)}):a;return d};$jscomp.global.Object.defineProperties(Gi.prototype,{byURL:{configurable:!0,enumerable:!0,get:function(){if(!this._byURL){this._byURL={};for(var a=$jscomp.makeIterator(this.allPackages()),d=a.next();!d.done;d=a.next())d=d.value,this._byURL[d.url]=
d}return this._byURL}}});Ng.PackageRegistry=Gi;var ym=lively.FreezerRuntime.recorderFor("lively.modules/src/export-lookup.js");ym.arr=Gf;ym.obj=eg;ym.subscribe=KC;ym.unsubscribe=DQ;ym.module=ex;var Um=function(a){this.System=a;this.subscribeToSystemChanges()};Um.forSystem=function(a){this._forSystemMap||(this._forSystemMap=new WeakMap);var d=this._forSystemMap.get(a);if(d)return d;d=new this(a);this._forSystemMap.set(a,d);return d};Um.run=function(a,d){a=void 0===a?System:a;return this.forSystem(a).systemExports(d)};
Um.findExportOfValue=function(a,d){d=void 0===d?System:d;var k=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(k.run(d),2);b=e.yieldResult;return e.return(b.find(function(l){var p=l.local;l=ym.module(d,l.moduleId);l=l.recorder||d.get(l.id)||{};try{return l[p]===a}catch(u){return!1}}))})};Um.prototype.subscribeToSystemChanges=function(){var a=this;if(!this._notificationHandlers){var d=this.System;this._notificationHandlers=[ym.subscribe("lively.modules/moduleloaded",
function(k){return a.clearCacheFor(k.module)},d),ym.subscribe("lively.modules/modulechanged",function(k){return a.clearCacheFor(k.module)},d),ym.subscribe("lively.vm/doitresult",function(k){return a.clearCacheFor(k.targetModule)},d)]}};Um.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var a=this.System;ym.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],a);ym.unsubscribe("lively.modules/modulechanged",this._notificationHandlers[1],a);ym.unsubscribe("lively.vm/doitresult",
this._notificationHandlers[2],a);this._notificationHandlers=null}};Um.prototype.clearCacheFor=function(a){this.exportByModuleCache[a]=null};Um.prototype.systemExports=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(d.rawExportsByModule(a),2);k=b.yieldResult;Object.keys(k).forEach(function(e){return d.resolveExportsOfModule(e,k)});return b.return(ym.arr.flatmap(Object.keys(k),function(e){return k[e]?k[e].resolvedExports||k[e].rawExports:
[]}))})};Um.prototype.rawExportsByModule=function(a){var d=this,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?(a=a||{},k=d.System,b=k.get("@lively-env")||{},e=Object.keys(b.loadedModules||{}),l={},p=function(x){1>x%50&&a.progress.step&&a.progress.step("Scanning ...",x/e.length)},u.yield(Promise.all(e.map(function(x,z){a.progress&&p(z);return d.rawExportsOfModule(x,a,l).then(function(E){return E?l[x]=E:null})})),2)):u.return(l)})};Um.prototype.rawExportsOfModule=
function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p,u,x,z,E,G,J,K,T,P,da,fa,ka,za,Ia,N,ia,W,ca;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sa){switch(sa.nextAddress){case 1:b=k;e=b.System;l=b.exportByModuleCache;p=d.excludedPackages||[];u=d.excludedURLs||(d.excludedURLs=p.filter(function(la){return"string"===typeof la}));x=d.excludeFns||(d.excludeFns=p.filter(function(la){return"function"===typeof la}));z=d.excludedPackageURLs||(d.excludedPackageURLs=u.concat(u.map(function(la){return e.decanonicalize(la.replace(/\/?$/,
"/")).replace(/\/$/,"")})));E=d.livelyEnv||(d.livelyEnv=e.get("@lively-env")||{});d.modes||(d.modes=Object.keys(E.loadedModules||{}));if(l[a])return G=l[a].rawExports,sa.return(z.includes(G.packageURL)||x.some(function(la){return la(G.packageURL)})?null:l[a]);J=ym.module(e,a);K=J.pathInPackage();P=(T=J.package())&&T.main&&K===T.main;da=T?T.url:"";fa=T?T.name:"";ka=T?T.version:"";za={moduleId:a,isMain:P,pathInPackage:K,packageName:fa,packageURL:da,packageVersion:ka,exports:[]};if(z.includes(da)||x.some(function(la){return la(da)}))return sa.return(null);
sa.setCatchFinallyBlocks(2);Ia=J.format();return["register","es6","esm"].includes(Ia)?(W=za,sa.yield(J.exports(),7)):sa.yield(J.load(),6);case 6:N=sa.yieldResult;za.exports=[];for(ia in N)"__useDefault"!==ia&&"default"!==ia&&za.exports.push({exported:ia,local:ia,type:"id"});sa.jumpTo(5);break;case 7:W.exports=sa.yieldResult;case 5:sa.leaveTryBlock(3);break;case 2:ca=sa.enterCatchBlock(),za.error=ca;case 3:return sa.return(l[a]={rawExports:za})}})};Um.prototype.resolveExportsOfModule=function(a,d,
k){var b=this;k=void 0===k?{}:k;if(!k[a]){k[a]=!0;var e=d[a];if(e&&!e.resolvedExports){var l=this.System,p=ym.obj.select(e.rawExports,"moduleId isMain packageName packageURL packageVersion pathInPackage".split(" "));e.resolvedExports=ym.arr.flatmap(e.rawExports.exports,function(u){var x=u.type,z=u.exported,E=u.local,G=u.fromModule;if("all"!==x)return[Object.assign({},p,{type:x,exported:z,local:E,fromModule:G})];u=l.decanonicalize(G,a);b.resolveExportsOfModule(u,d,k);return(d[u]&&d[u].resolvedExports||
[]).map(function(J){return Object.assign({},p,{type:J.type,exported:J.exported,local:J.local,fromModule:J.fromModule||G})})});k[a]=!1}}};$jscomp.global.Object.defineProperties(Um.prototype,{exportByModuleCache:{configurable:!0,enumerable:!0,get:function(){return this._exportByModuleCache||(this._exportByModuleCache={})}}});Ma("F",Um);ym.ExportLookup=Um;ym.default=Um;var Tl=lively.FreezerRuntime.recorderFor("lively.modules/cjs/dependencies.js");Tl.buildPackageMap=YD;Tl.resolvePackageDependencies=yK;
Tl.dependencyGraph=zK;Tl.arr=Gf;Tl.fun=Vl;Tl.promise=bh;Tl.obj=eg;Tl.resource=hd;Tl.buildPackageMap=YD;Tl.buildPackageMap=YD;Tl.resolvePackageDependencies=yK;Tl.resolvePackageDependencies=yK;Tl.dependencyGraph=zK;Tl.dependencyGraph=zK;var YN=Object.freeze({__proto__:null,buildPackageMap:YD,resolvePackageDependencies:yK,dependencyGraph:zK}),zm=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/module-package-mapping.js");zm.arr=Gf;zm.unsubscribe=DQ;zm.subscribe=KC;zm.knownModuleNames=xK;
zm.classHolder=gt;var Np=function(a){this.System=a;this._notificationHandlers=null;this.clearCache();this.subscribeToSystemChanges()};Np.forSystem=function(a){var d=a["__lively.modules__modulePackageMapCache"];if(d)return d;d=new this(a);return a["__lively.modules__modulePackageMapCache"]=d};Np.prototype.subscribeToSystemChanges=function(){var a=this;if(!this._notificationHandlers){var d=this.System;this._notificationHandlers=[zm.subscribe("lively.modules/moduleloaded",function(k){return a.addModuleIdToCache(k.module)},
d),zm.subscribe("lively.modules/moduleunloaded",function(k){return a.removeModuleFromCache(k.module)},d),zm.subscribe("lively.modules/packageregistered",function(k){return a.clearCache()},d),zm.subscribe("lively.modules/packageremoved",function(k){return a.clearCache()},d)]}};Np.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var a=this.System;zm.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],a);zm.unsubscribe("lively.modules/moduleunloaded",
this._notificationHandlers[1],a);zm.unsubscribe("lively.modules/packageregistered",this._notificationHandlers[2],a);zm.unsubscribe("lively.modules/packageremoved",this._notificationHandlers[3],a);this._notificationHandlers=null}};Np.prototype.clearCache=function(){this._cacheInitialized=!1;this.packageToModule={};this.modulesToPackage={};this.modulesWithoutPackage={}};Np.prototype.ensureCache=function(){var a=this.System,d=this.packageToModule,k=this.modulesToPackage,b=this.modulesWithoutPackage;
if(this._cacheInitialized)return this;for(var e=zm.classHolder.Package.allPackageURLs(a),l=0;l<e.length;l++)d[e[l]]=[];a=zm.knownModuleNames(a);for(l=0;l<a.length;l++){for(var p=a[l],u=void 0,x=0;x<e.length;x++){var z=e[x];p.startsWith(z)&&(!u||u.length<z.length)&&(u=z)}u?(d[u].push(p),k[p]=u):b[p]={}}this._cacheInitialized=!0;return this};Np.prototype.addModuleIdToCache=function(a){this.ensureCache();var d=this.packageToModule,k=this.modulesToPackage,b=this.modulesWithoutPackage;if(k[a])return k[a];
if(b[a])return null;for(var e=Object.keys(d),l,p=0;p<e.length;p++){var u=e[p];a.startsWith(u)&&(!l||l.length<u.length)&&(l=u)}if(l)return(d[l]||(d[l]=[])).push(a),k[a]=l;b[a]={};return null};Np.prototype.removeModuleFromCache=function(a){if(this._cacheInitialized){var d=this.packageToModule,k=this.modulesToPackage,b=this.modulesWithoutPackage;if(b.hasOwnProperty(a))delete b[a];else if(b=k[a])delete k[a],d[b]&&zm.arr.remove(d[b],a)}};Np.prototype.getPackageURLForModuleId=function(a){return this.modulesToPackage[a]||
this.addModuleIdToCache(a)};Np.prototype.getModuleIdsForPackageURL=function(a){this.ensureCache();return this.packageToModule[a]||[]};zm.ModulePackageMapping=Np;zm.default=Np;var cd=lively.FreezerRuntime.recorderFor("lively.modules/index.js");cd.changeSystem=AK;cd.wrapModuleResolution=BK;cd.unwrapModuleResolution=CK;cd.loadedModules=DK;cd.module=ZD;cd.isModuleLoaded=EK;cd.doesModuleExist=FK;cd.printSystemConfig=GK;cd.whenLoaded=HK;cd.importPackage=IK;cd.registerPackage=JK;cd.removePackage=KK;cd.reloadPackage=
LK;cd.getPackages=MK;cd.getPackage=NK;cd.getPackageOfModule=OK;cd.ensurePackage=PK;cd.applyPackageConfig=QK;cd.lookupPackage=RK;cd.moduleSourceChange=SK;cd.requireMap=TK;cd.isHookInstalled=UK;cd.installHook=VK;cd.removeHook=WK;cd.wrapModuleLoad=XK;cd.unwrapModuleLoad=YK;cd.getSystem=fx;cd.removeSystem=gx;cd.prepareSystem=tK;cd._printSystemConfig=uK;cd._unwrapModuleResolution=rK;cd._wrapModuleResolution=qK;cd._whenLoaded=vK;cd._module=ex;cd._doesModuleExist=lK;cd._isModuleLoaded=kK;cd.GLOBAL="undefined"!==
typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;cd.defaultSystem=cd.defaultSystem||cd.prepareSystem(cd.GLOBAL.System);var KX=cd.defaultSystem;cd.System=KX;cd.defaultSystem=KX;cd.getSystem=fx;cd.getSystem=fx;cd.removeSystem=gx;cd.removeSystem=gx;cd.loadedModules=DK;cd.loadedModules=DK;cd.printSystemConfig=GK;cd.printSystemConfig=GK;cd.whenLoaded=HK;cd.whenLoaded=HK;cd.changeSystem=AK;cd.changeSystem=AK;cd.module=ZD;cd.module=ZD;cd.doesModuleExist=FK;cd.doesModuleExist=
FK;cd.isModuleLoaded=EK;cd.isModuleLoaded=EK;cd.unwrapModuleResolution=CK;cd.unwrapModuleResolution=CK;cd.wrapModuleResolution=BK;cd.wrapModuleResolution=BK;cd.Package=jj;cd._getPackage=WD;cd._ensurePackage=bK;cd.getPackageSpecs=hK;cd._applyPackageConfig=cK;cd._importPackage=dK;cd._removePackage=eK;cd._reloadPackage=fK;cd._registerPackage=gK;cd._lookupPackage=aK;cd.importPackage=IK;cd.importPackage=IK;cd.registerPackage=JK;cd.registerPackage=JK;cd.removePackage=KK;cd.removePackage=KK;cd.reloadPackage=
LK;cd.reloadPackage=LK;cd.getPackages=MK;cd.getPackages=MK;cd.getPackage=NK;cd.getPackage=NK;cd.getPackageOfModule=OK;cd.getPackageOfModule=OK;cd.ensurePackage=PK;cd.ensurePackage=PK;cd.applyPackageConfig=QK;cd.applyPackageConfig=QK;cd.lookupPackage=RK;cd.lookupPackage=RK;cd.PackageRegistry=Gi;cd.PackageRegistry=Gi;cd.PackageRegistry=Gi;cd._moduleSourceChange=VD;cd.moduleSourceChange=SK;cd.moduleSourceChange=SK;cd.computeRequireMap=TD;cd.requireMap=TK;cd.requireMap=TK;cd._isHookInstalled=ru;cd._installHook=
qu;cd._removeHook=cx;cd.isHookInstalled=UK;cd.isHookInstalled=UK;cd.installHook=VK;cd.installHook=VK;cd.removeHook=WK;cd.removeHook=WK;cd._wrapModuleLoad=XD;cd._unwrapModuleLoad=oK;cd.wrapModuleLoad=XK;cd.wrapModuleLoad=XK;cd.unwrapModuleLoad=YK;cd.unwrapModuleLoad=YK;cd.default=Um;cd.ExportLookup=Um;cd.cjs=YN;cd.cjs=YN;cd.cjs=YN;cd.default=SE;cd.semver=SE;cd.ImportInjector=$r;cd.scripting=cd.defaultSystem._scripting={module:cd._module,ensurePackage:cd._ensurePackage,registerPackage:cd._registerPackage,
importPackage:cd._importPackage,lookupPackage:cd._lookupPackage,ImportInjector:cd.ImportInjector};cd.defaultClassToFunctionConverterName="initializeES6ClassForLively";cd.classRuntime=PA;cd.defaultSystem.global[cd.defaultClassToFunctionConverterName]=cd.classRuntime.initializeClass;cd.classHolder=gt;cd.ModulePackageMapping=Np;cd.classHolder.ModulePackageMapping=cd.ModulePackageMapping;cd.classHolder.Package=cd.Package;cd.classHolder.PackageRegistry=cd.PackageRegistry;var LX=Ma("E",cd.scripting);cd.scripting=
LX;cd.scripting=LX;var ZN=Object.freeze({__proto__:null,System:KX,getSystem:fx,removeSystem:gx,loadedModules:DK,printSystemConfig:GK,whenLoaded:HK,changeSystem:AK,module:ZD,doesModuleExist:FK,isModuleLoaded:EK,unwrapModuleResolution:CK,wrapModuleResolution:BK,importPackage:IK,registerPackage:JK,removePackage:KK,reloadPackage:LK,getPackages:MK,getPackage:NK,getPackageOfModule:OK,ensurePackage:PK,applyPackageConfig:QK,lookupPackage:RK,PackageRegistry:Gi,moduleSourceChange:SK,requireMap:TK,isHookInstalled:UK,
installHook:VK,removeHook:WK,wrapModuleLoad:XK,unwrapModuleLoad:YK,ExportLookup:Um,cjs:YN,semver:SE,scripting:LX});Ma("a$",ZN);var bm=lively.FreezerRuntime.recorderFor("lively.morphic/object-migration.js");bm.isReference=fU;bm.removeUnreachableObjects=us;bm.obj=eg;bm.Path=Qh;bm.connect=ll;bm.disconnectAll=wz;bm.isReference=fU;bm.isReference=fU;var $N=[{date:"2017-04-08",name:"Text and Label textAndAttributes format change",description:"\nChanging the format from\n  [[string1, attr1_1, attr1_2], [string2, attr2_1, attr2_2], ...]\nto\n  [string1, attr1, string2, attr2, ...].\n    ",
snapshotConverter:function(a){var d=a.snapshot,k;for(k in d){var b=d[k],e=b.props&&b.props.textAndAttributes;if(e){var l=e.value;if(!Array.isArray(l))console.warn("object migrator found textAndAttributes field but it is not an Array!");else if(l.length&&"string"!==typeof l[0]){l=[].concat.apply([],l);for(var p=0;p<l.length;p+=2){var u=l[p+1];u&&Array.isArray(u)&&(l[p+1]=Object.assign.apply(Object,[{}].concat($jscomp.arrayFromIterable(u))))}b.props.textAndAttributes=Object.assign({},e,{value:l})}}}return a}},
{date:"2017-04-29",name:"Window button fix",description:'\nA recent change in the structure of windows, that now adds a "button wrapper"\nmorph breaks old windows without it.\n',objectConverter:function(a,d){(d=d.refForId(a.id).realObj)&&d.isMorph&&d.withAllSubmorphsDo(function(k){k.isWindow&&(k.submorphs.some(function(b){return"button wrapper"===b.name})&&k.get("button wrapper").submorphs.some(function(b){return"window menu button"===b.name}),k.minimizedBounds=null,bm.disconnectAll(k.get("minimize")),
bm.connect(k.get("minimize"),"onMouseDown",k,"minimized",{updater:function(b){b(!this.targetObj.minimized)}}))});return a}},{date:"2017-05-03",name:"Style Sheet Status Fix",description:"\nState management of the style sheets has changes substantially, moving all of the style sheets that are being applied to the world.\n",snapshotConverter:function(a){var d=a.id,k=a.snapshot,b;for(b in k){var e=k[b].props;e&&e.styleSheets&&(e.styleSheets.value||(e.styleSheets.value=[]),e.styleSheets.value=e.styleSheets.value&&
e.styleSheets.value.filter(function(l){l=k[l.id];var p=k[l.props.rules.value.id];return!l.props.styledMorphs&&!("lively.serializer-class-info"in p)}))}bm.removeUnreachableObjects([d],k);return a}},{date:"2017-05-22",name:"Removal of ChromeTheme and GithubTheme",description:"\nFor now only a simple default theme...\n",snapshotConverter:function(a){var d=a.snapshot,k;for(k in d){var b=d[k],e=b["lively.serializer-class-info"];e&&("ChromeTheme"===e.className||"GithubTheme"===e.className?(e.className=
"DefaultTheme",e.module.pathInPackage="ide/themes/default.js"):"JavaScriptTokenizer"===e.className&&delete b["lively.serializer-class-info"])}return a}},{date:"2017-06-20",name:"Unwrapped Style Sheet Props",description:"Style Sheets now store foldable props in their nested format.",objectConverter:function(a,d){(d=d.refForId(a.id).realObj)&&d.isMorph&&d.withAllSubmorphsDo(function(k){k.styleSheets&&0<k.styleSheets.length&&k.styleSheets.forEach(function(b){for(var e in bm.obj.dissoc(b.rules,["_rev"]))b.rules[e]=
b.unwrapFoldedProps(b.rules[e])})});return a}},{date:"2017-07-13",name:"Renamed style-rules.js to style-sheets.js",snapshotConverter:function(a){var d=a.snapshot,k;for(k in d){var b=d[k]["lively.serializer-class-info"];b&&"StyleSheet"===b.className&&(b.module.pathInPackage="style-sheets.js")}return a}},{date:"2017-07-26",name:"components, ide, and halo extraction",snapshotConverter:function(a){var d=a.snapshot,k=a.packages,b=k&&k["local://lively-object-modules/"]||{};k=[["lively.morphic/halo","lively.halos"],
["lively.morphic/components/markers.js","lively.halos"],["lively.morphic/components/icons.js","lively.morphic"],["lively.morphic/components/loading-indicator.js","lively.components",function(J){return"{"+J+"}"}],["lively.morphic/components","lively.components"],["lively.components/markers.js","lively.halos"],["lively.morphic/ide","lively.ide"],["lively.morphic/text/ui.js","lively.ide",null,"text/ui.js"]];for(var e in b){for(var l=b[e]["index.js"],p=$jscomp.makeIterator(k),u=p.next();!u.done;u=p.next()){var x=
$jscomp.makeIterator(u.value),z=x.next().value;u=x.next().value;if(x=x.next().value){z=new RegExp('(import\\s)(.*)(\\sfrom \\"'+z+")","g");var E=z.exec(l);E&&(l=l.replace(z,"import "+x(E[2])+'from "'+u))}else l=l.replace(new RegExp(z,"g"),u)}b[e]["index.js"]=l}for(var G in d)if((e=d[G]["lively.serializer-class-info"])&&e.module)for(b=e.module.package.name+"/"+e.module.pathInPackage,l=$jscomp.makeIterator(k),p=l.next();!p.done;p=l.next())if(x=$jscomp.makeIterator(p.value),p=x.next().value,u=x.next().value,
x.next(),x=x.next().value,b.includes(p)){e.module.package.name=u;e.module.package.version="0.1.0";e.module.pathInPackage=x||b.substring(b.indexOf(p)+p.length+1)||"index.js";break}return a}},{date:"2017-10-16",name:"change scroll implementation of list items",objectConverter:function(a,d){d=$jscomp.makeIterator(d.objectRefs());for(var k=d.next();!k.done;k=d.next())k=k.value.realObj,k.isList&&"function"===typeof k.initializeSubmorphs&&k.initializeSubmorphs();return a}},{date:"2017-10-30",name:"change implementation of tree",
snapshotConverter:function(a){var d=a.snapshot,k;for(k in d){var b=d[k],e=b["lively.serializer-class-info"];e&&e.module&&("Tree"==e.className&&b.props.submorphs&&(b.props.submorphs.value=[]),"TreeNode"==e.className&&delete d[k],"InspectorTreeData"==e.className&&delete d[k],["PropertyNode","InspectionNode","MorphNode","FoldedNode"].includes(e.className)&&(e.module.pathInPackage="js/inspector/context.js"),"nodeItemContainer"==b.props.name&&delete d[k])}return a}},{date:"2019-02-17",name:"change storage of commit metadata",
snapshotConverter:function(a){var d=a.id,k=a.snapshot;Object.values(k).map(function(b){if(b.props.metadata&&bm.isReference(b.props.metadata.value)&&(b=k[b.props.metadata.value.id],b.props.commit&&bm.isReference(b.props.commit.value))){var e=k[b.props.commit.value.id].props,l=e.type,p=e.name;e=e._id;l&&p&&e&&(b.props.commit.value='__lv_expr__:({type: "'+l.value+'", name: "'+p.value+'", _id: "'+e.value+'"})')}});bm.removeUnreachableObjects([d],k);return a}},{date:"2019-07-25",name:"world superclass extraction",
snapshotConverter:function(a){var d=a.packages,k,b=bm.Path(["local://lively-object-modules/","EmptyWorld","index.js"]);if(k=b.get(d))k=k.replace('import { World, morph } from "lively.morphic";','import { morph } from "lively.morphic";\nimport { LivelyWorld as World } from "lively.ide/world.js"').replace('import { World } from "lively.morphic";','import { LivelyWorld as World } from "lively.ide/world.js"'),b.set(d,k);return a}},{date:"2019-08-05",name:"remove Camphor from system",snapshotConverter:function(a){Object.values(a.snapshot).map(function(d){d.props.fontFamily&&
"Camphor"==d.props.fontFamily.value&&(d.props.fontFamily.value="Nunito")});return a}},{date:"2020-10-09",name:"remove style guide",snapshotConverter:function(a){var d=a.snapshot;Object.values(d).map(function(k){k.props.master&&"string"===typeof k.props.master.value&&(k.props.master.value=k.props.master.value.split("styleguide://style guide").join("styleguide://System"));k.props.master&&k.props.master.value.id&&(k=d[k.props.master.value.id],k.props.auto.value=k.props.auto.value.split("styleguide://style guide").join("styleguide://System"))});
return a}}];bm.migrations=$N;bm.migrations=$N;bm.migrations=$N;var Le=lively.FreezerRuntime.recorderFor("lively.morphic/serialization.js");Le.normalizeOptions=function(a){a=Object.assign({reinitializeIds:!1,plugins:[].concat($jscomp.arrayFromIterable(Le.allPlugins),[new Le.StyleguidePlugin])},a);a.reinitializeIds&&(a.reinitializeIds="function"===typeof a.reinitializeIds?a.reinitializeIds:function(d,k){return k.realObj.isMorph?Le.newMorphId(k.realObj.constructor):null});return a};Le.serializeMorph=
$D;Le.deserializeMorph=aE;Le.loadWorldFromResource=gU;Le.saveWorldToResource=hU;Le.copyMorph=ZK;Le.createMorphSnapshot=hx;Le.loadMorphFromSnapshot=xr;Le.resourceToJSON=Q7;Le.findPackagesInFileSpec=R7;Le.packagesOfSnapshot=iU;Le.loadPackagesAndModulesOfSnapshot=bE;Le.findRequiredPackagesOfSnapshot=$K;Le.requiredModulesOfSnapshot=vs;Le.deserializeWithMigrations=OC;Le.serialize=Bz;Le.allPlugins=Mr;Le.MorphicEnv=wp;Le.resource=hd;Le.newMorphId=SC;Le.morph=Dk;Le.pathForBrowserHistory=Cz;Le.ast=bM;Le.StyleguidePlugin=
RN;Le.findLocalComponents=SD;Le.serializeMorph=$D;Le.serializeMorph=$D;Le.deserializeMorph=aE;Le.deserializeMorph=aE;Le.loadWorldFromResource=gU;Le.loadWorldFromResource=gU;Le.saveWorldToResource=hU;Le.saveWorldToResource=hU;Le.copyMorph=ZK;Le.copyMorph=ZK;Le.modules=ZN;Le.createFiles=se;Le.promise=bh;Le.Path=Qh;Le.graph=Ts;Le.arr=Gf;Le.migrations=$N;var iB=Le.modules;Le.registerPackage=iB.registerPackage;Le.module=iB.module;Le.getPackage=iB.getPackage;Le.ensurePackage=iB.ensurePackage;Le.lookupPackage=
iB.lookupPackage;Le.semver=iB.semver;Le.objectScriptingEnabled=!1;Le.createMorphSnapshot=hx;Le.createMorphSnapshot=hx;Le.loadMorphFromSnapshot=xr;Le.loadMorphFromSnapshot=xr;Le.packagesOfSnapshot=iU;Le.packagesOfSnapshot=iU;Le.loadPackagesAndModulesOfSnapshot=bE;Le.loadPackagesAndModulesOfSnapshot=bE;Le.findRequiredPackagesOfSnapshot=$K;Le.findRequiredPackagesOfSnapshot=$K;var xc=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js");xc.generateUnfolded=function(a,d,k){d=void 0===d?["top","left",
"right","bottom"]:d;k=void 0===k?"core":k;var b={},e={};d=$jscomp.makeIterator(d);for(var l=d.next();!l.done;e={$jscomp$loop$prop$m$1457$2730:e.$jscomp$loop$prop$m$1457$2730},l=d.next())e.$jscomp$loop$prop$m$1457$2730=l.value,b[a+xc.string.capitalize(e.$jscomp$loop$prop$m$1457$2730)]={group:k,derived:!0,generated:!0,after:[a],get:function(p){return function(){return this.getProperty(a)[p.$jscomp$loop$prop$m$1457$2730]}}(e),set:function(p){return function(u){var x={};this[a]=Object.assign({},this.getProperty(a),
(x[p.$jscomp$loop$prop$m$1457$2730]=u,x))}}(e)};return b};xc.Color=ng;xc.Line=Yl;xc.Point=sg;xc.pt=ui;xc.rect=Ll;xc.Rectangle=Fe;xc.Transform=sk;xc.string=Dh;xc.properties=go;xc.obj=eg;xc.arr=Gf;xc.num=zl;xc.promise=bh;xc.tree=Us;xc.PropertyPath=Qh;xc.signal=hm;xc.copy=PC;xc.deserializeSpec=Wp;xc.ExpressionSerializer=Bl;xc.serializeSpec=vo;xc.getClassName=Vp;xc.renderRootMorph=zI;xc.ShadowObject=Gp;xc.AnimationQueue=KM;xc.easings=No;xc.addOrChangeCSSDeclaration=fr;xc.Icon=Fn;xc.morph=Dk;xc.newMorphId=
SC;xc.sanitizeFont=QC;xc.MorphicEnv=wp;xc.config=$l;xc.CommandHandler=ora;xc.KeyHandler=rW;xc.findKeysForPlatform=CI;xc.TargetScript=sW;xc.copyMorph=ZK;xc.ComponentPolicy=SN;xc.defaultCommandHandler=new xc.CommandHandler;var xk=Ma("M",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Morph")&&"function"===typeof d.Morph?d.Morph:d.Morph=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b||(b={});var e=b.env||xc.MorphicEnv.default();this._env=e;this._rev=e.changeManager.revision;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=xc.newMorphId(xc.getClassName(this));this._animationQueue=new xc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=xc.obj.select(b,xc.arr.intersect(Object.keys(b),this.styleProperties));
this.initializeProperties(b);b.bounds&&(this.setBounds(b.bounds),this._parametrizedProps.extent=this.extent,this._parametrizedProps.position=this.position);if(void 0!=b.height||void 0!=b.width)this._parametrizedProps.extent=this.extent;b.layout&&(this.layout=b.layout);if("function"===typeof this.onLoad&&!this.isComponent)this.onLoad()}},{key:"__serialization_id_property__",get:function(){return"_id"}},{key:"__deserialize__",value:function(b,e,l,p){this._env=xc.MorphicEnv.default();this._rev=b.rev;
this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=e.id;this._animationQueue=new xc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=xc.obj.select(b.props,xc.arr.intersect(Object.keys(b.props),this.styleProperties));this._parametrizedProps.__takenFromSnapshot__=!0;b=p.expressionSerializer;for(var u in this._parametrizedProps)(e=this._parametrizedProps[u].value)&&xc.obj.isString(e)&&b.isSerializedExpression(e)&&
(this._parametrizedProps[u]=b.deserializeExpr(e));this.initializeProperties();this._pool=p}},{key:"__after_deserialize__",value:function(b,e,l){this.resumeStepping();if("function"===typeof this.onLoad)try{this.onLoad()}catch(p){console.error("[lively.morphic] "+this+".onLoad() error: "+p.stack)}this.isComponent&&!this.owner||delete this._pool;this.master&&(l.mastersInSubHierarchy?l.mastersInSubHierarchy.push(this.master):l.mastersInSubHierarchy=[this.master])}},{key:"__only_serialize__",get:function(){var b=
this.defaultProperties,e=this.propertiesAndPropertySettings().properties,l=[];0<this._tickingScripts.length&&l.push("_tickingScripts");this.attributeConnections&&l.push("attributeConnections");var p=[this].concat($jscomp.arrayFromIterable(this.ownerChain())).map(function(z){return z.__isBeingSerialized__&&z.master}).find(Boolean),u;for(u in e){var x=e[u];p&&p.managesMorph(this)&&void 0!=p._overriddenProps.get(this)[u]?l.push(u):x.readOnly||x.derived||xc.obj.equals(this[u],b[u])||x.hasOwnProperty("serialize")&&
!x.serialize||l.push(u)}return p&&!this.isComponent?p.propsToSerializeForMorph(this,l):l}},{key:"__additionally_serialize__",value:function(b,e,l,p){if((e=b.props.submorphs)&&!this.isEpiMorph)for(e=e.value,p=e.length;p--;)l.refForId(e[p].id).realObj.isEpiMorph&&xc.arr.removeAt(e,p);l=$jscomp.makeIterator(xc.arr.intersect(this.__only_serialize__,["borderColor","borderWidth","borderStyle","borderRadius"]));for(e=l.next();!e.done;e=l.next())e=e.value,b.props[e]={key:e,verbatim:!0,value:xc.obj.extract(this[e],
["top","right","bottom","left"],function(u,x){return x&&x.isColor?x.toTuple():x})}}},{key:"isMorph",get:function(){return!0}},{key:"id",get:function(){return this._id}},{key:"env",get:function(){return this._env}},{key:"spec",value:function(b,e){b=void 0===b?!0:b;e=void 0===e?new WeakMap:e;var l=this.defaultProperties,p=this.propertiesAndPropertySettings().properties,u={submorphs:!0},x={};if(e.has(this))return e.get(this);e.set(this,x);for(var z in p){var E=p[z];E&&(E.readOnly||E.derived||E.hasOwnProperty("serialize")&&
!E.serialize||z in u||b&&(xc.obj.equals(this[z],l[z])||this[z]&&l[z]&&this[z].valueOf&&l[z].valueOf&&xc.obj.equals(this[z].valueOf(),l[z].valueOf()))||(x[z]=this[z]&&this[z].isMorph?this[z].spec(b,e):this[z]&&"layout"===z?this[z].copy():this[z]))}x.submorphs=this.submorphs.map(function(G){return G.spec(b,e)});x.type=this.constructor;return x}},{key:"printSpec",value:function(b,e){e=void 0===e?0:e;b=(void 0===b?null:b)||this.spec();var l={name:!0,type:!0,submorphs:!0},p="  ".repeat(e+1),u="  ".repeat(e)+
"{\n"+(p+'name: "'+b.name+'",\n')+(p+'type: "'+b.type+'",\n'),x;for(x in b)l[x]||(u+=""+p+x+": "+xc.string.print(b[x])+",\n");if(b.submorphs){u+=p+"submorphs: [\n";b=$jscomp.makeIterator(b.submorphs);for(l=b.next();!l.done;l=b.next())u+=this.printSpec(l.value,e+1);u+="]\n"}return u+="  ".repeat(e)+"}\n"}},{key:"defaultProperties",get:function(){var b=this.constructor,e=b[Symbol.for("lively-instance-superclass")];if(!b._morphicDefaultPropertyValues||b._morphicDefaultPropertyValues==(e&&e._morphicDefaultPropertyValues)){b=
this.constructor._morphicDefaultPropertyValues={};e=this.propertiesAndPropertySettings().properties;for(var l in e){var p=e[l];p.hasOwnProperty("defaultValue")&&(p=p.defaultValue,Array.isArray(p)&&(p=p.slice()),b[l]=p)}}return this.constructor._morphicDefaultPropertyValues}},{key:"defaultProperty",value:function(b){return this.defaultProperties[b]}},{key:"getProperty",value:function(b){return this._morphicState[b]}},{key:"setProperty",value:function(b,e,l){return this.addValueChange(b,e,l)}},{key:"changeMetaData",
value:function(b,e,l,p){l=void 0===l?!0:l;p=void 0===p?!0:p;var u=this.metadata;u||(u={});(new xc.PropertyPath(b)).withParentAndKeyDo(u,!0,function(x,z){x[z]=p?Object.assign({},x[z],{},e):e;var E=x.__dont_serialize__;l?E&&E.includes(z)&&(xc.arr.remove(E,z),0===E.length&&delete x.__dont_serialize__):(E||(E=x.__dont_serialize__=[]),xc.arr.pushIfNotIncluded(E,z))});this.metadata=u}},{key:"installFont",value:function(b,e){var l={};this.installedFonts=Object.assign({},this.installedFonts,(l[b]=e,l));this.insertFontCSS(b,
e)}},{key:"uninstallFont",value:function(b){delete this.installedFonts[b];(b=document.getElementById(this.id+"-"+b))&&b.remove()}},{key:"ensureInstalledFonts",value:function(b,e){b=$jscomp.makeIterator(b);for(var l=b.next();!l.done;l=b.next())(l=document.getElementById(this.id+"-"+l.value))&&l.remove();e=$jscomp.makeIterator(e);for(l=e.next();!l.done;l=e.next())b=l.value,this.env.fontMetric.isFontSupported(xc.sanitizeFont(b))||this.insertFontCSS(b,this.installedFonts[b])}},{key:"insertFontCSS",value:function(b,
e){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(l.whenRendered(),2);e.endsWith(".otf")?xc.addOrChangeCSSDeclaration(l.id+"-"+b,"@font-face {\n             font-family: "+b+';\n             src: url("'+l.installedFonts[b]+'") format("opentype");\n         }'):xc.addOrChangeCSSDeclaration(l.id+"-"+b,'@import url("'+l.installedFonts[b]+'");');p.jumpToEnd()})}},{key:"toString",value:function(){return"<"+xc.getClassName(this)+" - "+(this.name?
this.name:this.id)+">"}},{key:"edit",value:function(b){return this.env.world.execCommand("open object editor",Object.assign({className:xc.getClassName(this)},b,{target:this}))}},{key:"inspect",value:function(b){return this.env.world.execCommand("open object inspector",Object.assign({},b,{target:this}))}},{key:"livelyCustomInspect",value:function(){var b={_id:!0,_owner:!0},e={},l=this.propertiesAndPropertySettings().properties,p=[],u;for(u in l)b[u]||l[u].derived&&!l[u].showInInspector||(e[u]=!0,p.push({key:u,
value:this[u]}));p.push({key:"id",value:this.id});p.push({key:"owner",value:this.owner});p=p.sort(function(z,E){z=z.key.toLowerCase();E=E.key.toLowerCase();return z<E?-1:z===E?0:1});if(this.attributeConnections)for(l=$jscomp.makeIterator(this.attributeConnections),u=l.next();!u.done;u=l.next())u=u.value,b["$$"+u.sourceAttrName,""+u.sourceAttrName]=!0;Object.assign(e,b);b=$jscomp.makeIterator("attributeConnections _animationQueue _morphicState _dirty doNotCopyProperties doNotSerialize _env _cachedPaths _pathDependants _rendering _rev _submorphOrderChanged _tickingScripts _transform _invTransform _styleSheetProps _renderer _tooltipViewer layout".split(" "));
for(l=b.next();!l.done;l=b.next())l=l.value,l in this&&(e[l]=!0,p.push({key:l,value:this[l],keyString:"[internal] "+l}));for(var x in this)!e[x]&&this.hasOwnProperty(x)&&p.unshift({key:x,value:this[x],keyString:"[UNKNOWN PROPERTY] "+x});return{sort:!1,includeDefault:!1,properties:p}}},{key:"show",value:function(b){return $world.execCommand("show morph",{morph:this,loop:b})}},{key:"setStatusMessage",value:function(b,e,l,p){var u=this.world();p=Object.assign({maxLines:7},p);return u?u.setStatusMessageFor(this,
b,e,l,p):console.log(b)}},{key:"showError",value:function(b){var e=this.world();return e?e.showErrorFor(this,b):console.error(b)}},{key:"onChange",value:function(b){var e=this,l=b.meta&&b.meta.animation,p=b.prop,u=b.value;if("position"===p||"rotation"===p||"scale"===p||"origin"===p||"reactsToPointer"===p)this.onBoundsChanged(this.bounds()),l={},this.updateTransform((l[p]=u,l));else if("extent"==p)this.onBoundsChanged(this.bounds());else"layout"==p&&(l?u&&u.attachAnimated(l.duration,this,l.easing):
u&&u.attach());this.layout&&this.layout.onChange(b);this.isComponent&&!xc.PropertyPath("meta.metaInteraction").get(b)&&(p=this.world(),delete this._preview,(p?p.withAllSubmorphsSelect(function(x){return x.master&&x.master.uses(e)}):[]).forEach(function(x){x.requestMasterStyling()}));if(this.master)this.master.onMorphChange(this,b)}},{key:"onBoundsChanged",value:function(b){var e=this;xc.signal(this,"bounds",b);[].concat($jscomp.arrayFromIterable(b.corners),$jscomp.arrayFromIterable(b.sides)).forEach(function(l){xc.signal(e,
l,b.partNamed(l))})}},{key:"onSubmorphChange",value:function(b,e){var l=this;if(this.isComponent&&!xc.PropertyPath("meta.metaInteraction").get(b)&&!xc.PropertyPath("meta.layoutAction").get(b)){var p=this.world();p&&p.withAllSubmorphsDo(function(u){u.master&&u.master.uses(l)&&u.requestMasterStyling()})}if(this.master)this.master.onMorphChange(e,b);this.layout&&this.layout.onSubmorphChange(e,b)}},{key:"changes",get:function(){return this.env.changeManager.changesFor(this)}},{key:"applyChange",value:function(b){this.env.changeManager.apply(this,
b)}},{key:"addValueChange",value:function(b,e,l){return this.env.changeManager.addValueChange(this,b,e,l)}},{key:"addMethodCallChangeDoing",value:function(b,e){return this.env.changeManager.addMethodCallChangeDoing(b,this,e)}},{key:"groupChangesWhile",value:function(b,e){return this.env.changeManager.groupChangesWhile(this,b,e)}},{key:"dontRecordChangesWhile",value:function(b){return this.env.changeManager.dontRecordChangesWhile(this,b)}},{key:"recordChangesWhile",value:function(b,e){return this.env.changeManager.recordChangesWhile(b,
e)}},{key:"recordChangesStart",value:function(b){return this.env.changeManager.recordChangesStartForMorph(this,b)}},{key:"recordChangesStop",value:function(b){return this.env.changeManager.recordChangesStopForMorph(this,b)}},{key:"withMetaDo",value:function(b,e){return this.env.changeManager.doWithValueChangeMeta(b,this,e)}},{key:"undoStart",value:function(b){return this.env.undoManager.undoStart(this,b)}},{key:"undoStop",value:function(b){return this.env.undoManager.undoStop(this,b)}},{key:"undoInProgress",
get:function(){return this.env.undoManager.undoInProgress}},{key:"animate",value:function(b){var e=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?(l=e._animationQueue.registerAnimation(b),e._animationQueue.animationsActive?l?p.yield(l.asPromise(),3):p.jumpTo(2):(l&&l.finish(),p.return(Promise.resolve(e)))):2!=p.nextAddress?p.return(p.yieldResult):p.return(Promise.resolve(e))})}},{key:"withAnimationDo",value:function(b,e){var l=this,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){p=
l.groupChangesWhile(!1,b);u=p.changes;return x.yield(Promise.all(Object.values(xc.arr.groupBy(u,function(z){return z.target.id})).map(function(z){var E=Object.assign({},e),G;z.forEach(function(J){G=J.target;J.reverseApply();E[J.prop]=J.value});return G&&G.animate(E)})),0)})}},{key:"isClip",value:function(){return"visible"!==this.clipMode}},{key:"scrollExtent",get:function(){return(this.submorphs.length?this.innerBounds().union(this.submorphBounds()):this.innerBounds()).extent().addPt(this.scrollbarOffset)}},
{key:"scrollBounds",value:function(){var b=this.scroll,e=this.scrollExtent;return new xc.Rectangle(b.x,b.y,e.x,e.y)}},{key:"scrollDown",value:function(b){this.scroll=this.scroll.addXY(0,b)}},{key:"scrollUp",value:function(b){this.scrollDown(50*-b)}},{key:"scrollLeft",value:function(b){this.scroll=this.scroll.addXY(b,0)}},{key:"scrollRight",value:function(b){this.scrollLeft(-b)}},{key:"scrollPageDown",value:function(){this.scrollDown(this.height)}},{key:"scrollPageUp",value:function(){this.scrollUp(this.height)}},
{key:"addStyleClass",value:function(b){this.styleClasses=xc.arr.uniq(this.styleClasses.concat(b))}},{key:"removeStyleClass",value:function(b){this.styleClasses=this.styleClasses.filter(function(e){return e!=b})}},{key:"adjustOrigin",value:function(b){var e=this.origin,l=this.globalBounds().topLeft();this.origin=b;this.submorphs.forEach(function(u){return u.position=u.position.subPt(b.subPt(e))});var p=this.globalBounds().topLeft();l=l.subPt(p);this.globalPosition=this.globalPosition.addPt(l)}},{key:"setBounds",
value:function(b){this.extent=b.extent();this.position=b.topLeft().addPt(this.origin)}},{key:"innerBounds",value:function(){var b=this.extent;return xc.rect(0,0,b.x,b.y)}},{key:"relativeBounds",value:function(b){b=b||this.world();var e=this.origin.negated().extent(this.extent);e=b?this.transformRectToMorph(b,e):this.getGlobalTransform().transformRectToRect(e);this.isClip()||this.submorphs.forEach(function(l){e=e.union(l.relativeBounds(b))});return e}},{key:"bounds",value:function(){return this.relativeBounds(this.owner)}},
{key:"relativeSubmorphBounds",value:function(){var b=this.innerBounds();return this.submorphs.map(function(e){e=e.bounds();return xc.rect(e.x/b.width,e.y/b.height,e.width/b.width,e.height/b.height)})}},{key:"globalBounds",value:function(){return this.relativeBounds(this.world())}},{key:"submorphBounds",value:function(b){b=xc.arr.filter(this.submorphs,void 0===b?function(){return!0}:b);return 1>b.length?this.innerBounds():b.map(function(e){return e.bounds()}).reduce(function(e,l){return e.union(l)})}},
{key:"fitToSubmorphs",value:function(b){b=void 0===b?xc.Rectangle.inset(0):b;var e=this.submorphs;if(e.length){e=e.reduce(function(u,x){return u.union(x.bounds())},e[0].bounds());var l=e.top()-b.top(),p=e.left()-b.left();this.moveBy(xc.pt(p,l));xc.arr.invoke(this.submorphs,"moveBy",xc.pt(-p,-l));this.extent=xc.pt(e.width+b.left()+b.right(),e.height+b.top()+b.bottom())}}},{key:"align",value:function(b,e){return this.moveBy(e.subPt(b))}},{key:"moveBy",value:function(b){this.position=this.position.addPt(b);
return this}},{key:"rotateBy",value:function(b){this.rotation+=b}},{key:"resizeBy",value:function(b){this.extent=this.extent.addPt(b)}},{key:"snap",value:function(b){this.position=this.position.roundTo(b||1)}},{key:"isEpiMorph",get:function(){return this.getProperty("epiMorph")&&!this.isComponent}},{key:"isUsedAsEpiMorph",value:function(){for(var b=this;b;){if(b.isEpiMorph)return!0;b=b.owner}return!1}},{key:"replaceWith",value:function(b,e,l){l=void 0===l?!0:l;if(this===b||!b)return b;if(this===b.owner)return b.replaceWith(this),
b;var p=this.owner,u=this.submorphs,x=this.getTransform().copy();e="number"===typeof e?e:p?p.submorphs.indexOf(this):-1;var z=b.owner,E=xc.arr.without(b.submorphs,this),G=b.getTransform().copy(),J=z?z.submorphs.indexOf(b):-1;p&&this.remove();z&&b.remove();l&&(this.submorphs=[],b.submorphs=[]);p===b?(z&&z.addMorphAt(this,J),l&&(this.submorphs=E.slice(0,e).concat(b).concat(E.slice(e)),b.submorphs=u)):(p&&p.addMorphAt(b,e),z&&z.addMorphAt(this,J),l&&(b.submorphs=u,this.submorphs=E));b.setTransform(x);
this.setTransform(G);return b}},{key:"addMorphAt",value:function(b,e){var l=this;if(!b||"object"!==typeof b)throw Error(b+" cannot be added as a submorph to "+this);if(b.isMorph){if(b.isAncestorOf(this))return this.env.world.logError(Error("addMorph: Circular relationships between morphs not allowed\ntried to add "+b+" to "+this)),null;if(b===this)return this.env.world.logError(Error("addMorph: Trying to add itself as a submorph: "+this)),null}b.isMorph||(b=xc.morph(b));var p=this.submorphs.indexOf(b);
if(!(-1<p&&p===e))return this.requestMasterStyling(),this.addMethodCallChangeDoing({target:this,selector:"addMorphAt",args:[b,e],undo:{target:this,selector:"removeMorph",args:[b]}},function(){var u=b.owner,x=l.submorphs;if(u&&u!==l){var z=b.transformForNewOwner(l);b.remove()}b._env!==l._env&&(b._env=l._env);e=Math.min(x.length,Math.max(0,e));-1<p&&(x.splice(p,1),p<e&&e--);x.splice(e,0,b);b._owner=l;b._cachedPaths={};z&&b.setTransform(z);b.requestStyling();l._morphicState.submorphs=x;l._submorphOrderChanged=
!0;l.makeDirty();b.resumeSteppingAll();b.withAllSubmorphsDo(function(E){return E.onOwnerChanged(l)});l.world()&&b._requestMasterStyling&&(b.master&&b.master.applyIfNeeded(!0),b._requestMasterStyling=!1)}),b}},{key:"addMorph",value:function(b,e){var l=this.submorphs;e=e?l.indexOf(e):-1;return this.addMorphAt(b,-1===e?l.length:e)}},{key:"addMorphBack",value:function(b){return this.addMorph(b,b===this.submorphs[0]?this.submorphs[1]:this.submorphs[0])}},{key:"removeMorph",value:function(b){var e=this.submorphs.indexOf(b);
-1!==e&&((this.getProperty("submorphs")||[]).splice(e,1),this.addMethodCallChangeDoing({target:this,selector:"removeMorph",args:[b],undo:{target:this,selector:"addMorphAt",args:[b,e]}},function(){b.suspendSteppingAll();b._owner=null}),this._pathDependants=xc.arr.withoutAll(this._pathDependants,b._pathDependants))}},{key:"remove",value:function(){var b=this;xc.signal(this,"onRemove");this.ownerChain().forEach(function(e){e._stylingVisitor&&e._stylingVisitor.deleteFromCache(b)});this.owner&&this.owner.removeMorph(this);
this._cachedPaths={};this._pathDependants.forEach(function(e){return e._cachedPaths={}});this._pathDependants=[];this.withAllSubmorphsDo(function(e){return e.onOwnerChanged(null)});return this}},{key:"abandon",value:function(b){b=void 0===b?!0:b;xc.signal(this,"onAbandon");this.emptyComments();b&&this.remove();this.submorphs.forEach(function(e){return e.abandon(!1)})}},{key:"onOwnerChanged",value:function(b){b&&this.master&&this.requestMasterStyling()}},{key:"fadeOut",value:function(b){b=void 0===
b?1E3:b;var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(e.animate({opacity:0,duration:b,easing:xc.easings.outQuad}),2);e.remove();e.opacity=1;l.jumpToEnd()})}},{key:"fadeIn",value:function(b){b=void 0===b?1E3:b;var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){e.opacity=0;e.animate({opacity:1,duration:b});return l.return(e)})}},{key:"fadeIntoWorld",value:function(b,e){b=void 0===b?$world.visibleBounds().center():
b;e=void 0===e?200:e;var l=this,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return p=new xc.Morph({opacity:0,scale:0,epiMorph:!0,hasFixedPosition:!0,fill:xc.Color.transparent}),u=l.env.world,p.openInWorld(),p.addMorph(l),l.position=p.extent.scaleBy(.5),p.center=b,p.scale=.8,z.yield(p.animate({opacity:1,scale:1,duration:e}),2);x=l.globalBounds();u.addMorph(l);l.top=x.top();l.left=x.left();p.remove();return z.return(l)})}},{key:"removeAllMorphs",value:function(){this.submorphs=
[]}},{key:"bringToFront",value:function(){this.owner&&xc.arr.last(this.owner.submorphs)!==this&&this.owner.addMorph(this);return this}},{key:"owner",get:function(){return this._owner}},{key:"withAllSubmorphsDetect",value:function(b){if(b(this))return this;for(var e=$jscomp.makeIterator(this.submorphs),l=e.next();!l.done;l=e.next())if(l=l.value.withAllSubmorphsDetect(b))return l}},{key:"withAllSubmorphsDoExcluding",value:function(b,e){var l=[b(this)];if(e(this))return l;for(var p=$jscomp.makeIterator(this.submorphs),
u=p.next();!u.done;u=p.next())xc.arr.pushAll(l,u.value.withAllSubmorphsDoExcluding(b,e));return l}},{key:"withAllSubmorphsDo",value:function(b){for(var e=[b(this)],l=$jscomp.makeIterator(this.submorphs),p=l.next();!p.done;p=l.next())xc.arr.pushAll(e,p.value.withAllSubmorphsDo(b));return e}},{key:"withAllSubmorphsSelect",value:function(b){var e=[];this.withAllSubmorphsDo(function(l){return b(l)&&e.push(l)});return e}},{key:"ownerChain",value:function(){return this.owner?[this.owner].concat(this.owner.ownerChain()):
[]}},{key:"world",value:function(){return this.owner?this.owner.world():null}},{key:"getWindow",value:function(){return this.isWindow?this:this.ownerChain().find(function(b){return b.isWindow})}},{key:"openInWorldNear",value:function(b,e){var l=this;e=e||this.world()||this.env.world;if(!e)return this;this.master&&(this.opacity=0,this.master.whenApplied().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(l.whenRendered(),2);l.opacity=
1;p.jumpToEnd()})}));this.center=b;this.setBounds(e.visibleBoundsExcludingTopBar().translateForInclusion(this.bounds()));return this.openInWorld(this.position)}},{key:"openInWorldNearHand",value:function(b){b=b||this.world()||this.env.world;var e=b.firstHand?b.firstHand.position.addPt(this.hasFixedPosition?xc.pt(0,0):b.scroll):xc.pt(0,0);return b?this.openInWorldNear(e):void 0}},{key:"openInWorld",value:function(b,e){e=e||this.world()||this.env.world;if(!e)return console.warn("Cannot open morph "+
this+", world morph not found;"),this;b?this.position=b:(this.center=this.hasFixedPosition?e.visibleBounds().extent().scaleBy(.5,.5):e.visibleBounds().center(),this.snap());e.addMorph(this);return this}},{key:"openInHand",value:function(b){b||(b=(this.world()||this.env.world).firstHand);b.grab(this);this.center=xc.pt(0,0)}},{key:"openInWindow",value:function(b){b=void 0===b?{title:this.name,name:"window for "+this.name,world:null}:b;return(b.world||this.world()||this.env.world).openInWindow(this,
xc.obj.dissoc(b,["world"]))}},{key:"isAncestorOf",value:function(b){for(b=b.owner;b;){if(b===this)return!0;b=b.owner}return!1}},{key:"morphsContainingPoint",value:function(b,e){e||(e=[]);if(!this.fullContainsWorldPoint(b))return e;for(var l=this.submorphs.length-1;0<=l;l--)this.submorphs[l].morphsContainingPoint(b,e);this.innerBoundsContainsWorldPoint(b)&&e.push(this);return e}},{key:"morphBeneath",value:function(b){var e=this.world()||this.owner;if(!e)return null;b=e.morphsContainingPoint(b);e=b.indexOf(this);
return b[e+1]}},{key:"transformTillMorph",value:function(b,e){if("down"==(void 0===e?"up":e))return b.transformTillMorph(this,"up").inverse();e=new xc.Transform;for(var l=this;l&&l!=b;l=l.owner){var p=l,u=p.origin;p=p.scroll;0===u.x&&0===u.y||e.preConcatenate(new xc.Transform(l.origin));e.preConcatenate(l.getTransform());l!=this&&(0===p.x&&0===p.y||!l.owner||e.preConcatenate(new xc.Transform(p.negated())));l.hasFixedPosition&&l.owner&&e.preConcatenate(new xc.Transform(l.owner.scroll))}return e}},
{key:"localize",value:function(b){var e=this.world(),l=b.x,p=b.y;return e?e.transformPointToMorph(this,xc.pt(l,p)):b}},{key:"worldPoint",value:function(b){var e=this.world(),l=b.x,p=b.y;return e?this.transformPointToMorph(e,xc.pt(l,p)):b.addPt(this.position)}},{key:"transformToMorph",value:function(b){var e=this.getGlobalTransform(),l=b.getGlobalTransform().inverse();e.preConcatenate(l);l=b.scroll;0===l.x&&0===l.y||!b.owner||e.preConcatenate(new xc.Transform(l));return e}},{key:"transformPointToMorph",
value:function(b,e){for(var l=this.hasFixedPosition,p=$jscomp.makeIterator(this.pathToMorph(b)),u=p.next();!u.done;u=p.next()){var x=$jscomp.makeIterator(u.value);u=x.next().value;x=x.next().value;this!=x&&"up"==u&&(e.x-=x.scroll.x,e.y-=x.scroll.y,x.hasFixedPosition&&(l=x.owner&&x.owner.isWorld),x.hasFixedPosition&&x.owner&&x.owner.owner&&(e.x+=x.owner.scroll.x,e.y+=x.owner.scroll.y));this.applyTransform(u,x,e);this!=x&&"down"==u&&(e.x+=x.scroll.x,e.y+=x.scroll.y,x.hasFixedPosition&&(l=x.owner&&x.owner.isWorld),
x.hasFixedPosition&&x.owner&&x.owner.owner&&(e.x-=x.owner.scroll.x,e.y-=x.owner.scroll.y))}l&&b.isWorld&&(e.x=e.x-b.position.x+b.scroll.x,e.y=e.y-b.position.y+b.scroll.y);l&&this.isWorld&&(e.x=e.x+this.position.x-this.scroll.x,e.y=e.y+this.position.y-this.scroll.y);return e}},{key:"transformRectToMorph",value:function(b,e){var l=this,p,u,x;[p=e.topLeft(),u=e.topRight(),x=e.bottomRight(),e=e.bottomLeft()].forEach(function(z){return l.transformPointToMorph(b,z)});return xc.Rectangle.unionPts([p,u,x,
e])}},{key:"applyTransform",value:function(b,e,l){"up"==b?(l.x+=e.origin.x,l.y+=e.origin.y,l.matrixTransform(e.getTransform(),l)):(l.matrixTransform(e.getInverseTransform(),l),l.x-=e.origin.x,l.y-=e.origin.y)}},{key:"_addPathDependant",value:function(b){this._pathDependants.includes(b)||this._pathDependants.push(b)}},{key:"pathToMorph",value:function(b){var e;if(e=this._cachedPaths[b.id])return e;e=this.closestCommonAncestor(b)||this;var l=this,p=[],u=[];for(e._addPathDependant(this);l&&l!=e;)u.push(["up",
l]),l._addPathDependant(this),l=l.owner;for(l=b;l&&l!=e;)p.push(["down",l]),l._addPathDependant(this),l=l.owner;return this._cachedPaths[b.id]=e=[].concat($jscomp.arrayFromIterable(u),$jscomp.arrayFromIterable(p.reverse()))}},{key:"closestCommonAncestor",value:function(b){return xc.arr.intersect([this].concat($jscomp.arrayFromIterable(this.ownerChain())),[b].concat($jscomp.arrayFromIterable(b.ownerChain())))[0]}},{key:"transformForNewOwner",value:function(b){return new xc.Transform(this.transformToMorph(b))}},
{key:"localizePointFrom",value:function(b,e){var l=b.x;b=b.y;try{return e.transformPointToMorph(this,xc.pt(l,b))}catch(p){return console.warn("problem "+p+" in localizePointFrom"),xc.pt}}},{key:"getGlobalTransform",value:function(){return this.transformTillMorph(this.world())}},{key:"globalPosition",get:function(){return this.worldPoint(xc.pt(0,0))}},{key:"globalPosition",set:function(b){return this.position=this.owner?this.owner.localize(b):b}},{key:"ensureToBeInWorldBounds",value:function(){var b=
this.world();if(b){var e=this.globalBounds();b=b.innerBounds().translateForInclusion(e).topLeft().subPt(e.topLeft());this.moveBy(b)}}},{key:"getTransform",value:function(){this._transform||this.updateTransform();return this._transform}},{key:"getInverseTransform",value:function(){this._invTransform||this.updateTransform();return this._invTransform}},{key:"updateTransform",value:function(b){b=void 0===b?{}:b;var e=b.position,l=b.scale,p=b.origin,u=b.rotation;b=this._transform||new xc.Transform;var x=
this._invTransform||new xc.Transform;e=e||this.position;p=p||this.origin;l=l||this.scale;u=u||this.rotation;b.a=l*Math.cos(u);b.b=l*Math.sin(u);b.c=l*-Math.sin(u);b.d=l*Math.cos(u);b.e=b.a*-p.x+b.c*-p.y+e.x;b.f=b.b*-p.x+b.d*-p.y+e.y;e=b.a;l=b.b;p=b.c;u=b.d;var z=b.e,E=b.f,G=1/(e*u-p*l);x.a=u*G;x.b=-l*G;x.c=-p*G;x.d=e*G;x.e=(p*E-z*u)*G;x.f=-(e*E-l*z)*G;this._transform=b;this._invTransform=x}},{key:"setTransform",value:function(b){this.position=b.getTranslation();this.rotation=xc.num.toRadians(b.getRotation());
this.scale=b.getScalePoint().x;this.updateTransform(this)}},{key:"fullContainsWorldPoint",value:function(b){return this.fullContainsPoint(null==this.owner?b:this.owner.localize(b))}},{key:"fullContainsPoint",value:function(b){return this.bounds().containsPoint(b)}},{key:"innerBoundsContainsWorldPoint",value:function(b){return this.innerBoundsContainsPoint(this.localize(b))}},{key:"innerBoundsContainsPoint",value:function(b){return this.innerBounds().containsPoint(b.addPt(this.origin).subPt(this.scroll))}},
{key:"get",value:function(b){if(!b)return null;try{return this.getSubmorphNamed(b)||this.getNameTest(this,b)&&this||this.getOwnerOrOwnerSubmorphNamed(b)}catch(e){if(e.constructor==RangeError&&"Maximum call stack size exceeded"==e.message)throw Error("'get' failed due to a stack overflow. The most\nlikely source of the problem is using 'get' as part of\ntoString, because 'get' calls 'getOwnerOrOwnerSubmorphNamed', which\ncalls 'toString' on this. Try using 'getSubmorphNamed' instead,\nwhich only searches in this' children.\nOriginal error:\n"+
e.stack);throw e;}}},{key:"getNameTest",value:function(b,e){if(xc.obj.isRegExp(e)){if(e.test(b.name)||e.test(String(b)))return!0}else if(b.name===e||String(b)===e)return!0;return!1}},{key:"getAllNamed",value:function(b,e){e=void 0===e?[]:e;if(!this._morphicState||!this.submorphs.length)return e;for(var l=0;l<this.submorphs.length;l++){var p=this.submorphs[l];this.getNameTest(p,b)&&e.push(p)}for(l=0;l<this.submorphs.length;l++)this.submorphs[l].getAllNamed(b,e);return e}},{key:"getSubmorphNamed",value:function(b){if(!this._morphicState||
!this.submorphs.length)return null;for(var e=0;e<this.submorphs.length;e++){var l=this.submorphs[e];if(this.getNameTest(l,b))return l}for(e=0;e<this.submorphs.length;e++)if(l=this.submorphs[e].getSubmorphNamed(b))return l;return null}},{key:"getSubmorphsByStyleClassName",value:function(b){return this.withAllSubmorphsSelect(function(e){return e.styleClasses.includes(b)})}},{key:"getOwnerNamed",value:function(b){return this.ownerChain().find(function(e){return e.name===b})}},{key:"getOwnerOrOwnerSubmorphNamed",
value:function(b){var e=this.owner;if(!e)return null;if(e.name===b)return e;for(var l=0;l<e.submorphs.length;l++){var p=e.submorphs[l];if(p!==this&&(this.getNameTest(p,b)||(p=p.getSubmorphNamed(b))))return p}return this.owner.getOwnerOrOwnerSubmorphNamed(b)}},{key:"getMorphWithId",value:function(b){return this.withAllSubmorphsDetect(function(e){return b===e.id})}},{key:"setMirrored",value:function(b){b?this.removeStyleClass("hidden-in-mirror"):this.addStyleClass("hidden-in-mirror")}},{key:"isMirrored",
value:function(){return 0<=this.styleClasses.indexOf("hidden-in-mirror")?!0:!1}},{key:"dragTriggerDistance",get:function(){return 0}},{key:"onMouseDown",value:function(b){if(this===b.targetMorph&&(b.state.clickedMorph=this,1==b.state.prevClick.clickCount&&200>=Date.now()-b.state.prevClick.clickedAtTime)){this.onDoubleMouseDown(b);return}this===b.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onDoubleMouseDown",value:function(b){}},{key:"onMouseUp",value:function(b){b.state.clickedMorph=
null;this===b.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseMove",value:function(b){}},{key:"onLongClick",value:function(b){}},{key:"addKeyBindings",value:function(b){var e=this;this.addMethodCallChangeDoing({target:this,selector:"addKeyBindings",args:[b],undo:null},function(){e._keybindings||(e._keybindings=[]);e._cachedKeyhandlers=null;e._keybindings.unshift.apply(e._keybindings,$jscomp.arrayFromIterable(b))})}},{key:"keybindings",get:function(){return this._keybindings||
[]}},{key:"keybindings",set:function(b){this._cachedKeyhandlers=null;return this._keybindings=b}},{key:"keyhandlers",get:function(){return this._cachedKeyhandlers||(this._cachedKeyhandlers=[xc.KeyHandler.withBindings(this.keybindings)])}},{key:"keyCommandMap",get:function(){var b=this.keyhandlers[0].platform;return this.keybindings.reduce(function(e,l){var p=xc.findKeysForPlatform(l.keys,b),u=l.command,x="string"===typeof u?u:u.command||u.name;return"string"!==typeof p?e:p.split("|").reduce(function(z,
E){var G={};return Object.assign(z,(G[E]={name:x,command:u,prettyKeys:xc.KeyHandler.prettyCombo(E)},G))},e)},{})}},{key:"keysForCommand",value:function(b,e){e=void 0===e?!0:e;var l=this.keyCommandMap,p=Object.keys(l).find(function(u){return l[u].name===b});return p&&e?l[p].prettyKeys:p}},{key:"simulateKeys",value:function(b){return xc.KeyHandler.simulateKeys(this,b)}},{key:"onKeyDown",value:function(b){xc.KeyHandler.invokeKeyHandlers(this,b,!1)&&b.stop()}},{key:"onKeyUp",value:function(b){}},{key:"onContextMenu",
value:function(b){var e=this;b.targetMorph===this&&(lively.FreezerRuntime||b.stop(),Promise.resolve(this.menuItems(b)).then(function(l){return e.openMenu(l,b)}).catch(function(l){return $world.logError(l)}))}},{key:"openMenu",value:function(b,e){var l=this.world();return b&&b.length&&l?l.openWorldMenu(e,b):null}},{key:"menuItems",value:function(b){return $world.defaultMenuItems(this,b)}},{key:"onCut",value:function(b){}},{key:"onCopy",value:function(b){}},{key:"onPaste",value:function(b){}},{key:"onDragStart",
value:function(b){this.undoStart("drag-move");b=b.state;this.position=b.dragStartMorphPosition.addPt(b.absDragDelta)}},{key:"onDragEnd",value:function(b){this.undoStop("drag-move");$world.execCommand("remove snap to guides",this)}},{key:"onDrag",value:function(b){var e=b.state;this.position=e.dragStartMorphPosition.addPt(e.absDragDelta);$world.execCommand("show and snap to guides",{target:this,showGuides:b.isCtrlDown(),snap:b.isCtrlDown()})}},{key:"onGrab",value:function(b){if(b.isShiftDown()){var e=
this.copy();e.position=this.transformPointToMorph(b.hand,xc.pt(0,0));b.hand.grab(e)}else b.hand.grab(this)}},{key:"onDrop",value:function(b){b.hand.dropMorphsOn(this)}},{key:"doNotAcceptDropsForThisAndSubmorphs",value:function(){this.withAllSubmorphsDo(function(b){return b.acceptsDrops=!1})}},{key:"acceptDropsForThisAndSubmorphs",value:function(){this.withAllSubmorphsDo(function(b){return b.acceptsDrops=!0})}},{key:"wantsToBeDroppedOn",value:function(b){return!0}},{key:"onDropHoverIn",value:function(b){}},
{key:"onDropHoverUpdate",value:function(b){}},{key:"onDropHoverOut",value:function(b){}},{key:"onBeingDroppedOn",value:function(b,e){e.addMorph(this)}},{key:"onHoverIn",value:function(b){this.master&&this.requestMasterStyling()}},{key:"onHoverOut",value:function(b){this.master&&this.requestMasterStyling()}},{key:"onScroll",value:function(b){}},{key:"onMouseWheel",value:function(b){}},{key:"onNativeDrop",value:function(b){}},{key:"onNativeDragleave",value:function(b){}},{key:"onNativeDragenter",value:function(b){}},
{key:"onNativeDragover",value:function(b){}},{key:"onNativeDragend",value:function(b){}},{key:"onNativeDragstart",value:function(b){}},{key:"onNativeDrag",value:function(b){}},{key:"focus",value:function(){var b=this.env.eventDispatcher;b&&b.focusMorph(this)}},{key:"onFocus",value:function(b){}},{key:"onBlur",value:function(b){}},{key:"isFocused",value:function(){var b=this.env.eventDispatcher;return b&&b.isMorphFocused(this)}},{key:"exportToJSON",value:function(b){return xc.serializeSpec(this,b)}},
{key:"initFromJSON",value:function(b){var e=this;this._env=b.env||b._env||xc.MorphicEnv.default();this._rev=0;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=b._id||xc.newMorphId(xc.getClassName(this));this._animationQueue=new xc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this.dontRecordChangesWhile(function(){e.initializeProperties();xc.deserializeSpec(b,function(l){return xc.morph(l)},e)});return this}},{key:"copyViaJSON",
value:function(){var b=this.exportToJSON();xc.tree.prewalk(b,function(e){return e._id=xc.newMorphId(e.type)},function(e){return e.submorphs});b.name=b.name.replace(/copy( [0-9]+)?$/,function(e,l){return"copy "+(l&&l.trim()?Number(l)+1:"1")});return xc.morph({type:b.type}).initFromJSON(b)}},{key:"canBeCopied",value:function(){return!0}},{key:"copy",value:function(b){return xc.copyMorph(this,void 0===b?!1:b)}},{key:"interactivelyPublish",value:function(){var b=this,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:return e=
b.world()||b.env.world,z.setCatchFinallyBlocks(2),z.yield(System.import("lively.morphic/partsbin.js"),4);case 4:return l=z.yieldResult,p=l.interactivelySavePart,z.yield(p(b,{notifications:!1,loadingIndicator:!0}),5);case 5:u=z.yieldResult;e.setStatusMessage(u?"Published "+b+" as "+u.name:"Failed to publish part "+b,u?xc.Color.green:xc.Color.red);z.leaveTryBlock(0);break;case 2:x=z.enterCatchBlock(),"canceled"!=x&&e.showError(x),z.jumpToEnd()}})}},{key:"makeDirty",value:function(b){this._dirty=!0;
this.owner&&this.owner.makeDirty()}},{key:"needsRerender",value:function(){return this._dirty}},{key:"aboutToRender",value:function(b){this._dirty=!1;this._rendering=!0}},{key:"onAfterRender",value:function(b){}},{key:"whenRendered",value:function(b){return this.env.whenRendered(this,void 0===b?50:b).then(function(){return!0}).catch(function(){return!1})}},{key:"render",value:function(b){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return b.renderMorph(this)}},
{key:"applyLayoutIfNeeded",value:function(){if(this._dirty){for(var b=0;b<this.submorphs.length;b++)this.submorphs[b].applyLayoutIfNeeded();this.layout&&!this.layout.manualUpdate&&this.layout.onContainerRender()}}},{key:"requestMasterStyling",value:function(){var b=this;this._rendering||(this.master&&this.master._hasUnresolvedMaster&&(this.master._capturedExtents=new WeakMap,this.withAllSubmorphsDo(function(e){return b.master._capturedExtents.set(e,e.extent)})),this.master&&(this._requestMasterStyling=
!0,this.makeDirty()))}},{key:"requestStyling",value:function(){this.withAllSubmorphsDo(function(b){b._wantsStyling=!0;b.makeDirty()})}},{key:"renderAsRoot",value:function(b){var e=this;this.dontRecordChangesWhile(function(){e.applyLayoutIfNeeded()});return xc.renderRootMorph(this,b)}},{key:"renderPreview",value:function(b,e){b=void 0===b?{}:b;e=void 0===e?this.env.renderer:e;return e.renderPreview(this,b)}},{key:"startStepping",value:function(){var b=Array.from(arguments),e="number"===typeof b[0]?
b.shift():null,l=b.shift();b=new xc.TargetScript(this,l,b);this.removeEqualScripts(b);this._tickingScripts.push(b);b.startTicking(e);return b}},{key:"tickingScripts",get:function(){return this._tickingScripts}},{key:"stopStepping",value:function(){xc.arr.invoke(this._tickingScripts,"stop");this._tickingScripts.length=[]}},{key:"stopSteppingScriptNamed",value:function(b){var e=this._tickingScripts.filter(function(l){return l.selector===b});this.stopScripts(e)}},{key:"stopScripts",value:function(b){xc.arr.invoke(b,
"stop");this._tickingScripts=xc.arr.withoutAll(this._tickingScripts,b)}},{key:"suspendStepping",value:function(){this._tickingScripts&&xc.arr.invoke(this._tickingScripts,"suspend")}},{key:"suspendSteppingAll",value:function(){this.withAllSubmorphsDo(function(b){return b.suspendStepping()})}},{key:"resumeStepping",value:function(){xc.arr.invoke(this._tickingScripts,"resume")}},{key:"resumeSteppingAll",value:function(){this.withAllSubmorphsDo(function(b){return xc.arr.invoke(b._tickingScripts,"resume")})}},
{key:"removeEqualScripts",value:function(b){this.stopScripts(this._tickingScripts.filter(function(e){return e.equals(b)}))}},{key:"addComment",value:function(b,e){e=void 0===e?xc.pt(0,0):e;var l=this,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){return 1==E.nextAddress?E.yield(System.import("lively.collab"),2):3!=E.nextAddress?(p=E.yieldResult,u=p.Comment,x=p.CommentBrowser,z=new u(b,e),l.comments.push(z),E.yield(x.addCommentForMorph(z,l),3)):E.return(z)})}},{key:"removeComment",
value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(System.import("lively.collab"),2);l=u.yieldResult;p=l.CommentBrowser;e.comments=e.comments.filter(function(x){return!b.equals(x)});p.removeCommentForMorph(b,e);u.jumpToEnd()})}},{key:"emptyComments",value:function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(System.import("lively.collab"),2);e=p.yieldResult;
l=e.CommentBrowser;b.comments.forEach(function(u){return l.removeCommentForMorph(u,b)});b.comments=[];p.jumpToEnd()})}},{key:"commands",get:function(){return this._commands||[]}},{key:"commands",set:function(b){this._commands&&this.removeCommands(this._commands);this.addCommands(b)}},{key:"commandsIncludingOwners",get:function(){return xc.arr.flatmap([this].concat(this.ownerChain()),function(b){return xc.arr.sortByKey(b.commands,"name").map(function(e){return{target:b,command:e}})})}},{key:"addCommands",
value:function(b){var e=this;this.addMethodCallChangeDoing({target:this,selector:"addCommands",args:[b],undo:{target:this,selector:"removeCommands",args:[b]}},function(){e.removeCommands(b);e._commands=(e._commands||[]).concat(b)})}},{key:"removeCommands",value:function(b){var e=this;this.addMethodCallChangeDoing({target:this,selector:"removeCommands",args:[b],undo:{target:this,selector:"addCommands",args:[b]}},function(){var l=b.map(function(u){return"string"===typeof u?u:u.name}),p=(e._commands||
[]).filter(function(u){return!l.includes(u.name)});p.length?e._commands=p:delete e._commands})}},{key:"commandHandler",get:function(){return this._commandHandler||xc.defaultCommandHandler}},{key:"lookupCommand",value:function(b){return(b=this.commandHandler.lookupCommand(b,this))&&b.command?b:null}},{key:"execCommand",value:function(b,e,l,p){return this.commandHandler.exec(b,this,e,l,p)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Morph"}},{key:"propertySettings",get:function(){return{defaultGetter:function(b){return this.getProperty(b)},
defaultSetter:function(b,e){this.setProperty(b,e)},valueStoreProperty:"_morphicState"}}},{key:"properties",get:function(){return Object.assign({name:{group:"core",initialize:function(b){b||(b=xc.getClassName(this),b=xc.string.findArticle(b)+b);this.name=b}},isComponent:{group:"core",defaultValue:!1,after:["master"],set:function(b){this.setProperty("isComponent",b);b&&(this.master||delete this._parametrizedProps)}},master:{before:["metadata"],group:"core",set:function(b){this.master&&this.master.equals(b)||
(this.setProperty("master",b?xc.ComponentPolicy.for(this,b):0==b?!1:null),b&&this.requestMasterStyling())}},renderOnGPU:{group:"core",defaultValue:!1},draggable:{group:"interaction",isStyleProp:!0,defaultValue:!1},grabbable:{group:"interaction",isStyleProp:!0,defaultValue:!1,set:function(b){b&&!this.draggable&&(this.draggable=!0);this.setProperty("grabbable",b)}},acceptsDrops:{group:"interaction",isStyleProp:!0,defaultValue:!0},grayscale:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,
min:0,max:1,isFloat:!0},blur:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,isFloat:!0},dropShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null,set:function(b){b&&!b.isShadowObject&&(b=new xc.ShadowObject(b),b.morph=this);this.setProperty("dropShadow",b)}},tooltip:{group:"core",defaultValue:null},focusable:{group:"interaction",defaultValue:!0},nativeCursor:{group:"interaction",type:"Enum",values:"auto default none context-menu help pointer progress wait cell crosshair text vertical-text alias copy move no-drop not-allowed e-resize n-resize ne-resize nw-resize s-resize se-resize sw-resize w-resize ew-resize ns-resize nesw-resize nwse-resize col-resize row-resize all-scroll zoom-in zoom-out grab grabbing".split(" "),
isStyleProp:!0,defaultValue:"auto"},halosEnabled:{group:"interaction",isStyleProp:!0,defaultValue:!!xc.config.halosEnabled},reactsToPointer:{group:"interaction",isStyleProp:!0,defaultValue:!0},position:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:xc.pt(0,0)},origin:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:xc.pt(0,0)},extent:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:xc.pt(10,10),set:function(b){var e=this.extent;this.setProperty("extent",b);this.origin.equals(xc.pt(0,
0))||(b=xc.pt(b.x/e.x,b.y/e.y),this.adjustOrigin(this.origin.scaleByPt(b)))}},width:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.x},set:function(b){return this.extent=xc.pt(b,this.extent.y)}},height:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.y},set:function(b){return this.extent=xc.pt(this.extent.x,b)}},left:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().left()},
set:function(b){return this.moveBy(xc.pt(b-this.left),0)}},right:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().right()},set:function(b){return this.moveBy(xc.pt(b-this.right),0)}},top:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().top()},set:function(b){return this.moveBy(xc.pt(0,b-this.top))}},bottom:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottom()},
set:function(b){return this.moveBy(xc.pt(0,b-this.bottom))}},center:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().center()},set:function(b){return this.align(this.center,b)}},topLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topLeft()},set:function(b){return this.align(this.topLeft,b)}},topRight:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topRight()},
set:function(b){return this.align(this.topRight,b)}},bottomRight:{group:"geometry",derived:!0,after:["extent","layout"],get:function(){return this.bounds().bottomRight()},set:function(b){return this.align(this.bottomRight,b)}},bottomLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomLeft()},set:function(b){return this.align(this.bottomLeft,b)}},bottomCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomCenter()},
set:function(b){return this.align(this.bottomCenter,b)}},topCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topCenter()},set:function(b){return this.align(this.topCenter,b)}},leftCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().leftCenter()},set:function(b){return this.align(this.leftCenter,b)}},rightCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().rightCenter()},
set:function(b){return this.align(this.rightCenter,b)}},rotation:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0},flipped:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},tilted:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},perspective:{group:"geometry",type:"Number",isStyleProp:!0,defaultValue:0,min:0},scale:{group:"geometry",type:"Number",min:0,isFloat:!0,isStyleProp:!0,defaultValue:1},hasFixedPosition:{group:"geometry",
doc:"When morph is submorph of world hasFixedPosition == true will keep the morph at the same position relative to top left of the browser window. This means, when the world is scrolled, the morph keeps its place.",defaultValue:!1},opacity:{group:"styling",type:"Number",isFloat:!0,min:0,max:1,isStyleProp:!0,defaultValue:1},fill:{group:"styling",type:"ColorGradient",isStyleProp:!0,defaultValue:xc.Color.white},visible:{group:"styling",isStyleProp:!0,defaultValue:!0,set:function(b){b||this.makeDirty();
this.setProperty("visible",b)}},submorphs:{group:"core",defaultValue:[],after:["isLayoutable","origin","position","rotation","scale"],get:function(){return(this.getProperty("submorphs")||[]).concat()},set:function(b){var e=this,l=this.layout,p=l&&l.isEnabled();p&&l.disable();this.submorphs.forEach(function(u){return b.includes(u)||u.remove()});b.forEach(function(u,x){return e.submorphs[x]!==u&&e.addMorph(u,e.submorphs[x])});p&&l.enable()}},clipMode:{group:"styling",type:"Enum",values:["visible","hidden",
"scroll","auto"],isStyleProp:!0,defaultValue:"visible",set:function(b){this.setProperty("clipMode",b);this.isClip()||(this.scroll=xc.pt(0,0))}},scroll:{group:"geometry",defaultValue:xc.pt(0,0),after:["clipMode","submorphs"],type:"Point",set:function(b){var e=b.x;b=b.y;if(this.isClip()){var l=this.scrollExtent.subPt(this.extent),p=l.y;e=Math.max(0,Math.min(l.x,e));b=Math.max(0,Math.min(p,b));this.setProperty("scroll",xc.pt(e,b));this.makeDirty()}}},scrollbarOffset:{group:"styling",defaultValue:xc.pt(15,
15)},styleClasses:{group:"styling",isStyleProp:!0,defaultValue:["morph"],get:function(){return this._cachedStyleClasses||(this._cachedStyleClasses=this.constructor.styleClasses.concat(this.getProperty("styleClasses")))},set:function(b){this._cachedStyleClasses=null;this.setProperty("styleClasses",xc.arr.withoutAll(b,this.constructor.styleClasses));this.requestStyling()}},layout:{group:"layouting",isStyleProp:!0,type:"Layout",after:["submorphs","extent","origin","position","isLayoutable"],set:function(b){b&&
(b.container=this);this.setProperty("layout",b)}},isLayoutable:{group:"layouting",isStyleProp:!0,defaultValue:!0},borderLeft:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleLeft","borderWidthLeft","borderColorLeft"],get:function(){return{style:this.borderStyleLeft,width:this.borderWidthLeft,color:this.borderColorLeft}},set:function(b){"style"in b&&(this.borderStyleLeft=b.style);"width"in b&&(this.borderWidthLeft=b.width);"color"in b&&(this.borderColorLeft=b.color);"radius"in b&&(this.borderRadiusLeft=
b.radius)}},borderRight:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleRight","borderWidthRight","borderColorRight"],get:function(){return{style:this.borderStyleRight,width:this.borderWidthRight,color:this.borderColorRight}},set:function(b){"style"in b&&(this.borderStyleRight=b.style);"width"in b&&(this.borderWidthRight=b.width);"color"in b&&(this.borderColorRight=b.color);"radius"in b&&(this.borderRadiusRight=b.radius)}},borderBottom:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleBottom",
"borderWidthBottom","borderColorBottom"],get:function(){return{style:this.borderStyleBottom,width:this.borderWidthBottom,color:this.borderColorBottom}},set:function(b){"style"in b&&(this.borderStyleBottom=b.style);"width"in b&&(this.borderWidthBottom=b.width);"color"in b&&(this.borderColorBottom=b.color);"radius"in b&&(this.borderRadiusBottom=b.radius)}},borderTop:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleTop","borderWidthTop","borderColorTop"],get:function(){return{style:this.borderStyleTop,
width:this.borderWidthTop,color:this.borderColorTop}},set:function(b){"style"in b&&(this.borderStyleTop=b.style);"width"in b&&(this.borderWidthTop=b.width);"color"in b&&(this.borderColorTop=b.color);"radius"in b&&(this.borderRadiusTop=b.radius)}},borderWidth:{group:"styling",isStyleProp:!0,type:"Number",foldable:["top","left","right","bottom"],min:0,defaultValue:{top:0,bottom:0,left:0,right:0,valueOf:function(){return 0}},get:function(){var b=this.getProperty("borderWidth");return Object.assign({},
b,{valueOf:function(){return b.left}})},set:function(b){xc.obj.isNumber(b)&&(b={left:b,right:b,top:b,bottom:b});this.setProperty("borderWidth",b)}}},xc.generateUnfolded("borderWidth",void 0,"styling"),{borderRadius:{group:"styling",isStyleProp:!0,type:"Number",min:0,foldable:["top","left","right","bottom"],defaultValue:{top:0,bottom:0,right:0,left:0,valueOf:function(){return 0}},get:function(){var b=this.getProperty("borderRadius");return Object.assign({},b,{valueOf:function(){return b.left}})},set:function(b){b||
(b=0);xc.obj.isNumber(b)&&(b={left:b,right:b,top:b,bottom:b});b.isRectangle&&(b={left:b.left(),right:b.right(),top:b.top(),bottom:b.bottom()});this.setProperty("borderRadius",b)}}},xc.generateUnfolded("borderRadius",void 0,"styling"),{borderStyle:{group:"styling",isStyleProp:!0,type:"Enum",foldable:["top","left","right","bottom"],values:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),defaultValue:{top:"solid",left:"solid",bottom:"solid",right:"solid",valueOf:function(){return"solid"}},
get:function(){var b=this.getProperty("borderStyle");return Object.assign({},b,{valueOf:function(){return b.left}})},set:function(b){xc.obj.isString(b)&&(b={left:b,right:b,top:b,bottom:b});this.setProperty("borderStyle",b)}}},xc.generateUnfolded("borderStyle",void 0,"styling"),{borderColor:{group:"styling",isStyleProp:!0,type:"Color",foldable:["top","left","right","bottom"],defaultValue:{top:xc.Color.white,left:xc.Color.white,bottom:xc.Color.white,right:xc.Color.white,valueOf:function(){return xc.Color.white}},
get:function(){var b=this.getProperty("borderColor");return Object.assign({},b,{valueOf:function(){return b.left}})},set:function(b){b||(b=xc.Color.white);b.isColor&&(b={top:b,left:b,right:b,bottom:b});this.setProperty("borderColor",b?xc.obj.extract(b,["top","left","right","bottom"],function(e,l){return xc.obj.isArray(l)?xc.Color.fromTuple(l):l}):b)}}},xc.generateUnfolded("borderColor",void 0,"styling"),{border:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyle","borderWidth","borderColor"],
get:function(){var b=this;return{get style(){return b.borderStyle},set style(e){b.borderStyle=e},get width(){return b.borderWidth},set width(e){b.borderWidth=e},get color(){return b.borderColor},set color(e){b.borderColor=e},get borderRadius(){return b.borderRadius},set borderRadius(e){b.borderRadius=e}}},set:function(b){"style"in b&&(this.borderStyle=b.style);"width"in b&&(this.borderWidth=b.width);"color"in b&&(this.borderColor=b.color);"radius"in b&&(this.borderRadius=b.radius)}},styleProperties:{group:"styling",
derived:!0,readOnly:!0,get:function(){var b=this.propertiesAndPropertySettings(),e=b.properties,l=[];b=$jscomp.makeIterator(b.order);for(var p=b.next();!p.done;p=b.next())p=p.value,e[p].isStyleProp&&l.push(p);return l}},style:{group:"styling",derived:!0,readOnly:!0,get:function(){for(var b=this.styleProperties,e={},l=0;l<b.length;l++){var p=b[l];e[p]=this[p]}return e}},epiMorph:{group:"core",doc:"epi morphs are 'transient' morphs, i.e. meta objects that should not be serialized like halo items, menus, etc.",
defaultValue:!1},respondsToVisibleWindow:{group:"interaction",doc:"Morphs will respond to changes to the visible browser window and a call will be made to the morph's relayout function, supplying the event generated",defaultValue:!1},installedFonts:{doc:"custom fonts can be installed from a respective morph, and are then kept as part of this morph's state in order to be loaded again the next time the it is cold loaded. (i.e. deserialization of a part)",defaultValue:{},set:function(b){var e=xc.arr.without(xc.obj.keys(this.installedFonts||
{}),"_rev"),l=xc.arr.without(xc.obj.keys(b||{}),"_rev");this.setProperty("installedFonts",b);this.ensureInstalledFonts(e,l)},get:function(){return this.getProperty("installedFonts")||{}}},comments:{doc:"Holds all comments belonging to this Morph.",type:"list",defaultValue:[]},metadata:{group:"core"}})}},{key:"styleClasses",get:function(){if(this.hasOwnProperty("_styclassNames"))return this._styleClasses;for(var b=this,e=[];b&&b!==Object;)e.push(b[Symbol.for("__LivelyClassName__")]),b=b[Symbol.for("lively-instance-superclass")];
return this._styleClasses=e}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1667,end:82521})}(void 0));xc.Morph=xk;xc.Morph=xk;xc.Morph=xk;var Zx=Ma("Y",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Ellipse")&&"function"===typeof d.Ellipse?
d.Ellipse:d.Ellipse=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Ellipse"}},{key:"properties",get:function(){return{borderRadius:{derived:!0,get:function(){var b=this;return{top:this.borderRadiusTop,right:this.borderRadiusRight,left:this.borderRadiusLeft,bottom:this.borderRadiusBottom,valueOf:function(){return b.borderRadiusLeft}}}},
borderRadiusLeft:{get:function(){return this.height},set:function(){}},borderRadiusRight:{get:function(){return this.height},set:function(){}},borderRadiusTop:{get:function(){return this.width},set:function(){}},borderRadiusBottom:{get:function(){return this.width},set:function(){}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:82530,end:83287})}(xc.Morph));xc.Ellipse=Zx;xc.Ellipse=Zx;xc.Ellipse=Zx;var jB=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Triangle")&&"function"===typeof d.Triangle?d.Triangle:d.Triangle=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;$b._get(Object.getPrototypeOf(k.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,b);this.update()}},{key:"onChange",value:function(b){("extent"==b.prop||"direction"==b.prop||"fill"==b.prop&&b.value)&&this.update();$b._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b)}},{key:"update",value:function(){var b=this.extent,e=b.x;b=b.y;e!=b&&(this.extent=xc.pt(Math.max(e,b),Math.max(e,b)));this.origin=xc.pt(e/2,b/2);var l=this.triangleFill=this.fill||this.triangleFill;this.fill=null;e={width:e/2,style:"solid",
color:l};b={width:b/2,style:"solid",color:xc.Color.transparent};switch(this.direction){case "down":var p="borderLeft";var u="borderRight";var x="borderTop";break;case "up":p="borderLeft";u="borderRight";x="borderBottom";break;case "left":p="borderBottom";u="borderTop";x="borderRight";break;case "right":p="borderBottom",u="borderTop",x="borderLeft"}l={};Object.assign(this,(l[p]=b,l[u]=b,l[x]=e,l))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Triangle"}},{key:"properties",get:function(){return{direction:{defaultValue:"up"},
triangleFill:{after:["fill"],initialize:function(){this.triangleFill=this.fill}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:83296,end:84754})}(xc.Morph);xc.Triangle=jB;xc.Triangle=jB;xc.Triangle=jB;var Xu=Ma("W",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),
k=d.hasOwnProperty("Image")&&"function"===typeof d.Image?d.Image:d.Image=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"__deserialize__",value:function(b,e,l,p){this._isDeserializing=!0;$b._get(Object.getPrototypeOf(k.prototype),"__deserialize__",this).call(this,b,e,l,p)}},{key:"__after_deserialize__",value:function(b,e,l){delete this._isDeserializing;$b._get(Object.getPrototypeOf(k.prototype),"__after_deserialize__",
this).call(this,b,e,l)}},{key:"isImage",get:function(){return!0}},{key:"ratio",get:function(){var b=this.naturalExtent;return b.x/b.y}},{key:"setWidthKeepingRatio",value:function(b){this.width=b;this.height=b/this.ratio}},{key:"setHeightKeepingRatio",value:function(b){this.width=this.ratio*b;this.height=b}},{key:"loadUrl",value:function(b,e){var l=this;e=void 0===e?this.autoResize:e;var p=this.autoResize;this.autoResize=e;this.imageUrl=b;return xc.promise.finally(this.whenLoaded(),function(){return l.autoResize=
p})}},{key:"whenLoaded",value:function(){var b=this;return this.isLoaded?Promise.resolve(this):new Promise(function(e,l){var p=b.imageUrl;b.imageElement(function(u){b.imageUrl!==p&&l(Error("url changed ("+p+" => "+b.imageUrl+")"));b.naturalExtent=xc.pt(u.width,u.height);b.isLoaded=!0;e(b)})})}},{key:"determineNaturalExtent",value:function(){var b=this;return this.whenLoaded().then(function(){return b.naturalExtent})}},{key:"render",value:function(b){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),
this._requestMasterStyling=!1);return b.renderImage(this)}},{key:"clear",value:function(){return this.loadUrl("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",!1)}},{key:"imageElement",value:function(b){var e=this;return new Promise(function(l,p){var u=e.env.domEnv.document.createElement("img");u.onload=function(){l(u);"function"===typeof b&&b(u)};u.src=e.imageUrl})}},{key:"canvasElementAndContext",value:function(){var b=this,e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==
x.nextAddress)return e=b.env.domEnv.document,x.yield(b.imageElement(),2);l=x.yieldResult;p=e.createElement("canvas");u=p.getContext("2d");p.width=l.width;p.height=l.height;u.drawImage(l,0,0,l.width,l.height);return x.return({canvas:p,ctx:u,image:l})})}},{key:"imageData",value:function(b){var e=this,l,p,u,x,z,E,G,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(K){if(1==K.nextAddress)return K.yield(e.canvasElementAndContext(),2);l=K.yieldResult;p=l.ctx;u=l.image;b||(b=xc.rect(0,0,u.width,
u.height));x=b;z=x.x;E=x.y;G=x.width;J=x.height;return K.return(p.getImageData(z,E,G,J))})}},{key:"pixelAt",value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?l.yield(e.imageData(b.extent(xc.pt(1,1))),2):l.return(l.yieldResult.data)})}},{key:"colorAt",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?(l=xc.Color,p=l.fromTuple8Bit,u.yield(e.pixelAt(b),2)):u.return(p.call(l,
u.yieldResult))})}},{key:"loadArrayBuffer",value:function(b,e){b=new Uint8Array(b);b=new Blob([b],{type:"image/jpeg"});this.imageUrl=(window.URL||window.webkitURL).createObjectURL(b);this.makeDirty()}},{key:"convertToBase64",value:function(){var b=this,e,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return e=b.imageUrl,l=e.slice(e.lastIndexOf(".")+1,e.length).toLowerCase(),"jpg"===l?l="jpeg":"svg"===l&&(l="svg+xml"),["gif","jpeg","png","tiff","svg+xml"].includes(l)||
(l="gif"),e.startsWith("http")||(e=xc.location.origin+"/"+e),G.yield(System.import("lively.ide/shell/shell-interface"),2);if(3!=G.nextAddress)return p=G.yieldResult,u=p.runCommand,x='curl --silent "'+e+'" | openssl base64',G.yield(u(x).whenDone(),3);z=G.yieldResult;E=z.stdout;return G.return(b.loadUrl("data:image/"+l+";base64,"+E,!1))})}},{key:"downloadImage",value:function(){var b=this.imageUrl;if(b.match(/^data:image/)){var e=this.name||"image-from-lively";var l=b.match(/image\/([^;]+)/);l&&l[1]&&
(e+="."+l[1])}else e||(e=xc.arr.last(b.split("/")));l=document.createElement("a");l.download=e;l.href=b;l.click()}},{key:"convertTo",value:function(b,e){e||(e=1);var l=this.canvasElementAndContext(),p=l.ctx,u=l.canvas;l=l.image;var x=this.width,z=this.height;u.width=l.width;u.height=l.height;p.drawImage(l,0,0,x,z);return this.loadUrl(u.toDataURL(b,e),!1)}},{key:"resampleImageToFitBounds",value:function(){var b=this,e,l,p,u,x,z,E,G,J,K,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(1==
P.nextAddress)return P.yield(b.canvasElementAndContext(),2);e=P.yieldResult;l=e.ctx;p=e.canvas;u=e.image;x=b;z=x.width;E=x.height;G=u;J=G.width;K=G.height;p.width=J;p.height=K;l.drawImage(u,0,0,z,E);T=l.getImageData(0,0,J,K);p.width=z;p.height=E;l.putImageData(T,0,0);return P.return(b.loadUrl(p.toDataURL(),!1))})}},{key:"crop",value:function(b){var e=this.canvasElementAndContext(),l=e.ctx,p=e.canvas;e=e.image;var u=this.innerBounds(),x=e.width,z=e.height;b=u.intersection(b);b=new xc.Rectangle(b.x/
u.width,b.y/u.height,b.width/u.width,b.height/u.height);b=$jscomp.makeIterator((new xc.Rectangle(0,0,x,z)).divide([b])).next().value;p.width=x;p.height=z;l.drawImage(e,0,0,x,z);e=l.getImageData(b.x,b.y,b.width,b.height);p.width=b.width;p.height=b.height;l.putImageData(e,0,0);return this.loadUrl(p.toDataURL(),!1)}},{key:"interactivelyChangeImageURL",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.world().prompt("Enter image url",
{historyId:"lively.morphic-image-url-inputs",input:b.imageUrl.startsWith("data:")?"":b.imageUrl,requester:b,selectInput:!0}),2);e=l.yieldResult;"string"===typeof e&&(b.imageUrl=e);l.jumpToEnd()})}},{key:"menuItems",value:function(b){var e=this;b=$b._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this,b);b.unshift(["change image url...",function(){return e.interactivelyChangeImageURL()}],["resize image to to fit world",function(){var l=Math.min(e.world().visibleBounds().width/e.naturalExtent.x,
e.world().visibleBounds().height/e.naturalExtent.y);e.extent=e.naturalExtent.scaleBy(l)}],["resize image to its real image size",function(){var l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?(l=e,p.yield(e.determineNaturalExtent(),2)):p.return(l.extent=p.yieldResult)})}],["resample image to fit current bounds",function(){return e.resampleImageToFitBounds()}],{isDivider:!0});return b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Image"}},
{key:"properties",get:function(){return{imageUrl:{isStyleProp:!0,copyAssetOnFreeze:!0,after:["extent","autoResize"],defaultValue:System.decanonicalize("lively.morphic/lively-web-logo-small.svg"),set:function(b){var e=this;this.isLoaded=!1;this.setProperty("imageUrl",b);this.setProperty("naturalExtent",null);var l=this.autoResize&&!this._isDeserializing;this.whenLoaded().then(function(){e.imageUrl===b&&(e.isLoaded=!0,l&&(e.extent=e.naturalExtent))})}},fill:{defaultValue:xc.Color.transparent},naturalExtent:{defaultValue:null},
isLoaded:{defaultValue:!1,serialize:!1},autoResize:{isStyleProp:!0,defaultValue:!1}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:84763,end:94132})}(xc.Morph));xc.Image=Xu;xc.Image=Xu;xc.Image=Xu;var EF=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),
k=d.hasOwnProperty("PathPoint")&&"function"===typeof d.PathPoint?d.PathPoint:d.PathPoint=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){e=void 0===e?{}:e;this.path=b;this._isSmooth=e.isSmooth||!1;this.x=e.position?e.position.x:e.x||0;this.y=e.position?e.position.y:e.y||0;this._controlPoints=e.controlPoints}},{key:"__dont_serialize__",get:function(){return["attributeConnections",
"$$controlPoints","$$position","doNotCopyProperties","doNotSerialize"]}},{key:"isPathPoint",get:function(){return!0}},{key:"isSmooth",get:function(){return this._isSmooth||!1}},{key:"isSmooth",set:function(b){this._isSmooth!==b&&(this._isSmooth=b,this.adaptControlPoints(b))}},{key:"position",get:function(){return xc.pt(this.x,this.y)}},{key:"position",set:function(b){var e=b.y;this.x=b.x;this.y=e;this.path.makeDirty()}},{key:"moveBy",value:function(b){this.position=this.position.addPt(b);this.path.onVertexChanged(this);
return this}},{key:"copy",value:function(){var b=new xc.ExpressionSerializer;return new xc.PathPoint(this.path,b.deserializeExprObj(this.__serialize__()))}},{key:"__serialize__",value:function(){return{__expr__:("({\n         position: "+this.position.toString(!1)+",\n         isSmooth: "+this.isSmooth+",\n         controlPoints: {\n           next: "+this.controlPoints.next.toString(!1)+",\n           previous: "+this.controlPoints.previous.toString(!1)+"\n         }\n      })").replace(/[\n|\s]/g,
""),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}}},{key:"controlPoints",get:function(){return this._controlPoints||{next:xc.pt(0,0),previous:xc.pt(0,0)}}},{key:"controlPoints",set:function(b){var e=b=void 0===b?{}:b;b=e.next;e=e.previous;this._controlPoints={next:b?xc.Point.fromLiteral(b):xc.pt(0,0),previous:e?xc.Point.fromLiteral(e):xc.pt(0,0)};this.path.makeDirty()}},{key:"moveNextControlPoint",value:function(b){this.moveControlPoint("next",b)}},{key:"movePreviousControlPoint",value:function(b){this.moveControlPoint("previous",
b)}},{key:"moveControlPoint",value:function(b,e){var l=this.controlPoints[b];l=l?l.addPt(e):e;e="next"==b?"previous":"next";var p=this.controlPoints[e];this.isSmooth&&(p=l.negated().normalized().scaleBy(p.r()));var u={};this.controlPoints=(u[b]=l,u[e]=p,u);this.path.onVertexChanged(this)}},{key:"pointOnLine",value:function(b,e,l,p){b=xc.pt(b.x,b.y);e=xc.pt(e.x,e.y);b=e.subPt(b);var u=b.scaleBy(1/b.r());l=e.subPt(l).dotProduct(u);return e.subPt(u.scaleBy(Math.max(1,Math.min(l,b.r())))).addXY(p,p)}},
{key:"nextVertex",get:function(){return this.path.vertexAfter(this)}},{key:"previousVertex",get:function(){return this.path.vertexBefore(this)}},{key:"interpolate",value:function(b,e){var l=this.copy();l.position=l.position.interpolate(b,e);return l}},{key:"adaptControlPoints",value:function(b){var e=this.nextVertex,l=this.previousVertex,p=this.position,u=this.path,x=u.vertices,z=x.indexOf(this),E=0===z;x=z===x.length-1;l=l?l.position:p;e=e?e.position:p;b?(b=this.pointOnLine(l,e,p,u.borderWidth),
this.controlPoints={previous:E?xc.pt(0,0):b.subPt(e),next:b.subPt(l)}):this.controlPoints={previous:E?xc.pt(0,0):l.subPt(p).scaleBy(.5),next:x?xc.pt(0,0):e.subPt(p).scaleBy(.5)};u.onVertexChanged(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PathPoint"}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:94141,end:98106})}(void 0);xc.PathPoint=EF;xc.PathPoint=EF;xc.PathPoint=EF;var $x=Ma("V",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Path")&&"function"===typeof d.Path?d.Path:d.Path=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;$b._get(Object.getPrototypeOf(k.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,Object.assign({},xc.obj.dissoc(b,"origin")));this.adjustOrigin(b.origin||this.origin);this.position=b.position||this.position;this.updateBounds(this.vertices)}},{key:"__after_deserialize__",value:function(b,e,l){$b._get(Object.getPrototypeOf(k.prototype),"__after_deserialize__",this).call(this,b,e,l);this.updateBounds(this.vertices)}},{key:"__additionally_serialize__",value:function(b,e,l,p){$b._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",
this).call(this,b,e,l,p);e=this.getProperty("draggable");e!=this.propertiesAndPropertySettings().properties.draggable.defaultValue&&(b.props.draggable={value:e});if(e=this.borderColor.valueOf())b.props.borderColor={key:"borderColor",value:l.expressionSerializer.exprStringEncode({__expr__:e.toJSExpr(),bindings:{"lively.graphics/geometry-2d.js":["pt","rect"],"lively.graphics/color.js":["Color",xc.getClassName(e)]}})}}},{key:"isPath",get:function(){return!0}},{key:"isSvgMorph",get:function(){return!0}},
{key:"onVertexChanged",value:function(b){this.makeDirty();this.updateBounds(this.vertices)}},{key:"copyVertices",value:function(){return this.vertices.map(function(b){return b.copy()})}},{key:"updateBounds",value:function(b){b=void 0===b?this.vertices:b;if(b.length&&!this._adjustingVertices){this._adjustingVertices=!0;var e=this.origin,l=this.extent,p=e.x/l.x;l=e.y/l.y;var u=[];b.forEach(function(z,E){var G=z.isSmooth,J=z.position,K=z.controlPoints||{};z=K.next;K=K.previous;u.push(J);G&&0<E&&E<b.length-
1&&u.push(J.addPt(z),J.addPt(K))});e=xc.Rectangle.unionPts(u);p=xc.pt(e.width*p,e.height*l);var x=e.topLeft();b.forEach(function(z){return z.moveBy(x.negated())});this.moveBy(this.getTransform().transformDirection(x));this.extent=e.extent().maxPt(xc.pt(this.borderWidth,this.borderWidth));this.origin=p;this._adjustingVertices=!1}}},{key:"onChange",value:function(b){var e=b.prop,l=b.value,p=b.prevValue,u=this._adjustingVertices,x=this._adjustingOrigin;"extent"==e&&l&&p&&!u&&this.adjustVertices(l.scaleByPt(p.inverted()));
(!x&&"vertices"===e||"borderWidthLeft"===e)&&this.updateBounds("vertices"==e?l:this.vertices);u||"origin"!==e||this.updateBounds(this.vertices);$b._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b)}},{key:"vertexBefore",value:function(b){b=this.vertices.indexOf(b)-1;return this.vertices[0<=b?b:this.vertices.length-1]}},{key:"vertexAfter",value:function(b){b=this.vertices.indexOf(b)+1;return this.vertices[b>this.vertices.length-1?0:b]}},{key:"adjustVertices",value:function(b){var e=
this,l=this.vertices;l&&l.forEach(function(p){var u=p.controlPoints,x=u.next;u=u.previous;x=x.scaleByPt(b);u=u.scaleByPt(b);p.position=p.position.addPt(e.origin).scaleByPt(b).subPt(e.origin);p.controlPoints={next:x,previous:u}})}},{key:"adjustOrigin",value:function(b){this._adjustingOrigin=!0;var e=this.origin;this.vertices.forEach(function(l){return l.position=e.subPt(b).addXY(l.x,l.y)});$b._get(Object.getPrototypeOf(k.prototype),"adjustOrigin",this).call(this,b);this._adjustingOrigin=!1}},{key:"addVertex",
value:function(b,e){e=void 0===e?null:e;var l=this.vertices;e="number"===typeof e?e:e&&e.isPathPoint?l.indexOf(e):void 0;"number"===typeof e&&-1<e?l.splice(e,0,b):l.push(b);this.vertices=l}},{key:"addVertexCloseTo",value:function(b){var e=this.verticesCloseTo(b),l=e.closest,p=l.length;l=l.vertex;e=e.next;b=this.findClosestPointOnPath(b,10,3);return this.addVertex(b.point,b.length<=p?l:e?e.vertex:null)}},{key:"render",value:function(b){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),
this._requestMasterStyling=!1);return b.renderPath(this)}},{key:"_pathNode",get:function(){var b=xc.PropertyPath("env.renderer").get(this);return(b=b&&b.getNodeForMorph(this))&&b.querySelector("#svg"+xc.string.regExpEscape(this.id))}},{key:"verticesCloseTo",value:function(b,e){e=void 0===e?!0:e;for(var l=this.vertices,p=Infinity,u=-1,x=0;x<l.length;x++){var z=l[x].position.dist(b);z>=p||(p=z,u=x)}b=0===u?null:{index:u-1,vertex:l[u-1]};p=u===l.length-1?null:{index:u+1,vertex:l[u+1]};l={index:u,vertex:l[u]};
e&&(e=this._pathNode,b&&(u=this.findClosestPointOnPath(b.vertex.position,6,3,e).length,b.length=u),p&&(u=this.findClosestPointOnPath(p.vertex.position,6,3,e).length,p.length=u),e=this.findClosestPointOnPath(l.vertex.position,20,3,e).length,l.length=e);return{previous:b,next:p,closest:l}}},{key:"findClosestPointOnPath",value:function(b,e,l,p){function u(x,z,E,G,J,K,T){E=void 0===E?10:E;G=void 0===G?3:G;J=void 0===J?0:J;K=void 0===K?x.getTotalLength():K;T=void 0===T?0:T;var P=K,da=E;K=[];var fa=(J-
P)/(da-1),ka=0;K.push([xc.Point.ensure(x.getPointAtLength(P)),P,ka]);for(ka=1;ka<da-1;ka++){var za=P+ka*fa;K.push([xc.Point.ensure(x.getPointAtLength(za)),za,ka])}K.push([xc.Point.ensure(x.getPointAtLength(J)),J,ka]);J=Infinity;P=-1;da=$jscomp.makeIterator(K);for(fa=da.next();!fa.done;fa=da.next())ka=$jscomp.makeIterator(fa.value),fa=ka.next().value,ka.next(),ka=ka.next().value,fa=z.dist(fa),fa>=J||(J=fa,P=ka);if(T>=G)return z=$jscomp.makeIterator(K[P]),x=z.next().value,z=z.next().value,{point:x,
length:z};J=K[Math.max(0,P-1)][1];K=K[Math.min(K.length-1,P+1)][1];return u(x,z,E,G,J,K,T+1)}p||(p=(p=this.env.renderer.getNodeForMorph(this))&&p.querySelector("#svg"+xc.string.regExpEscape(this.id)));return p?u(p,b,e,l):{length:0,point:b}}},{key:"onDragStart",value:function(b){var e=b.domEvt.target,l=(new xc.PropertyPath("attributes.class.value")).get(e);if(l&&l.includes("path-point"))l=$jscomp.makeIterator(l.match(/path-point-([0-9]+)(?:-control-([0-9]+))?$/)),l.next(),b=l.next().value,l=l.next().value,
this._controlPointDrag={marker:e,n:Number(b)},void 0!==l&&(this._controlPointDrag.ctrlN=Number(l));else return $b._get(Object.getPrototypeOf(k.prototype),"onDragStart",this).call(this,b)}},{key:"onDrag",value:function(b){if(!this._controlPointDrag)return $b._get(Object.getPrototypeOf(k.prototype),"onDrag",this).call(this,b);var e=this._controlPointDrag,l=e.n,p=e.ctrlN,u=this.vertices;if(e=u[l])b=this.getInverseTransform().transformDirection(b.state.dragDelta),void 0===p?(e.moveBy(b),b=u[l-1],u=u[l+
1],b&&10>b.position.dist(e.position)?this._controlPointDrag.maybeMerge=[l-1,l]:u&&10>u.position.dist(e.position)?this._controlPointDrag.maybeMerge=[l,l+1]:this._controlPointDrag.maybeMerge=void 0):1===p?e.movePreviousControlPoint(b):2===p&&e.moveNextControlPoint(b)}},{key:"onDragEnd",value:function(b){b=this.vertices;var e=this._controlPointDrag;if(e&&(e=e.maybeMerge,delete this._controlPointDrag,e)){var l=$jscomp.makeIterator(e);e=l.next().value;l=l.next().value;b[e].controlPoints.next=b[l].controlPoints.next;
b.splice(l,1);this.vertices=b}}},{key:"onDoubleMouseDown",value:function(b){this.showControlPoints&&this.addVertexCloseTo(this.localize(b.position))}},{key:"menuItems",value:function(){var b=this,e=xc.Icon.textAttribute("check-square",{textStyleClasses:["far"]}),l=xc.Icon.textAttribute("square",{textStyleClasses:["far"]});l[1].paddingRight="7px";e[1].paddingRight="5px";return[[[].concat($jscomp.arrayFromIterable(this.showControlPoints?e:l),[" control points"]),function(){return b.showControlPoints=
!b.showControlPoints}],[[].concat($jscomp.arrayFromIterable(this.isSmooth?e:l),[" smooth"]),function(){return b.isSmooth=!b.isSmooth}],{isDivider:!0}].concat($jscomp.arrayFromIterable($b._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this)))}},{key:"getPointOnPath",value:function(b){if(!this._pathNode)return xc.pt(0,0);b=this._pathNode.getPointAtLength(this._pathNode.getTotalLength()*b)||xc.pt(0,0);return xc.pt(b.x,b.y)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Path"}},
{key:"properties",get:function(){return{borderColor:{isStyleProp:!0,type:"ColorGradient",foldable:["top","left","right","bottom"],set:function(b){b||(b=xc.Color.white);if(b.isColor||b.isGradient)b={top:b,left:b,right:b,bottom:b};this.setProperty("borderColor",xc.obj.extract(b,["top","left","right","bottom"],function(e,l){return xc.obj.isArray(l)?xc.Color.fromTuple(l):l}))}},showControlPoints:{defaultValue:!1},vertices:{defaultValue:[],isStyleProp:!0,after:["isSmooth","borderWidth"],before:["extent",
"origin"],type:"Vertices",set:function(b){var e=this,l=this.isSmooth;this._adjustingVertices=!0;b=b.map(function(p){return p.isPathPoint?Object.assign(p,{path:e}):new xc.PathPoint(e,Object.assign({isSmooth:l},p))});this.setProperty("vertices",b);this._adjustingVertices=!1;this.updateBounds(b)}},startMarker:{defaultValue:null,type:"Object"},endMarker:{defaultValue:null,type:"Object"},endStyle:{isStyleProp:!0,type:"Enum",values:["butt","round","square"],defaultValue:"butt"},drawnProportion:{type:"Number",
isStyleProp:!0,isFloat:!0,min:-1,max:1,defaultValue:0},cornerStyle:{type:"Enum",isStyleProp:!0,values:["arcs","bevel","miter","miter-clip","round"],defaultValue:"miter"},draggable:{get:function(){return this.getProperty("draggable")||this.showControlPoints}},isSmooth:{defaultValue:!1,before:["vertices"],type:"Boolean",set:function(b){this.setProperty("isSmooth",b);this.vertices&&(this._adjustingVertices=!0,this.vertices.forEach(function(e){return e.isSmooth=b}),this._adjustingVertices=!1,this.updateBounds(this.vertices))}}}}}],
d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:98115,end:111865})}(xc.Morph));xc.Path=$x;xc.Path=$x;xc.Path=$x;var kB=Ma("Q",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Polygon")&&"function"===typeof d.Polygon?d.Polygon:d.Polygon=function(b){b&&
b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){if(b.vertices&&2<b.vertices.length)$b._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);else throw Error("A polygon requires 3 or more vertices!");}},{key:"isPolygon",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Polygon"}}],
d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:111874,end:112128})}(xc.Path));xc.Polygon=kB;xc.Polygon=kB;xc.Polygon=kB;var lB=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("LineMorph")&&"function"===typeof d.LineMorph?d.LineMorph:d.LineMorph=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"isPolygon",get:function(){return!0}},{key:"update",value:function(){if(!this._isUpdating){this._isUpdating=!0;var b=this.line,e=this.height,l=b.toVector();this.setProperty("position",this.position.addPt(b.perpendicularLine(0,e,"cc").toVector()));this.width=l.fastR();this.rotation=l.theta();this.vec=l;this._isUpdating=!1}}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"LineMorph"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:0},fill:{defaultValue:xc.Color.black},height:{defaultValue:1},line:{defaultValue:xc.Line.fromCoords(0,0,0,0),set:function(b){this.setProperty("line",b);this.update(b)}},start:{derived:!0,after:["line"],get:function(b){return this.line.start},set:function(b){this.line=this.line.withStart(b)}},end:{derived:!0,after:["line"],get:function(b){return this.line.end},set:function(b){this.line=this.line.withEnd(b)}},
position:{derived:!0,after:["line"],get:function(b){return this.start},set:function(b){var e=b.subPt(this.start),l=this.rotation;this.line=new xc.Line(b,this.end.addPt(e));this.rotation=l}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:112137,end:113629})}(xc.Morph);xc.LineMorph=lB;
xc.LineMorph=lB;xc.LineMorph=lB;var Fwa=Object.freeze({__proto__:null,Morph:xk,Ellipse:Zx,Triangle:jB,Image:Xu,PathPoint:EF,Path:$x,Polygon:kB,LineMorph:lB}),We=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js");We.getAllPartResources=jU;We.loadPart=aL;We.savePart=kU;We.interactivelySavePart=cE;We.interactivelyLoadObjectFromPartsBinFolder=lU;We.interactivelySaveObjectToPartsBinFolder=mU;We.saveObjectToPartsbinFolder=nU;We.loadObjectFromPartsbinFolder=bL;We.buildCommitEditor=oU;We.resource=
hd;We.Resource=Cg;We.registerExtension=xe;We.Path=Qh;We.obj=eg;We.date=Er;We.promise=bh;We.HorizontalLayout=xq;We.VerticalLayout=Gu;We.morph=Dk;We.Morph=xk;We.pt=ui;We.Color=ng;We.Rectangle=Fe;We.connect=ll;We.emit=ss;We.SnapshotPackageHelper=QN;We.ensureCommitInfo=RD;We.MorphicDB=Yr;We.createMorphSnapshot=hx;We.getClassName=Vp;We.getAllPartResources=jU;We.getAllPartResources=jU;We.loadPart=aL;We.loadPart=aL;We.savePart=kU;We.savePart=kU;We.interactivelySavePart=cE;We.interactivelySavePart=cE;We.interactivelyLoadObjectFromPartsBinFolder=
lU;We.interactivelyLoadObjectFromPartsBinFolder=lU;We.interactivelySaveObjectToPartsBinFolder=mU;We.interactivelySaveObjectToPartsBinFolder=mU;We.saveObjectToPartsbinFolder=nU;We.saveObjectToPartsbinFolder=nU;We.loadObjectFromPartsbinFolder=bL;We.loadObjectFromPartsbinFolder=bL;var MX=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),k=d.hasOwnProperty("SnapshotEditor")&&"function"===typeof d.SnapshotEditor?d.SnapshotEditor:d.SnapshotEditor=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l){this.commit=b;this.snapshot=e;this._db=l}},{key:"db",get:function(){return this._db||We.MorphicDB.default}},{key:"saveModifiedSnapshot",value:function(b,e){var l=this,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress){p=b;u=p._id;x=p.name;z=p.type;if(!u)throw Error("No id of commit, cannot save!");return E.yield(l.db.commit(z,
x,e,b,void 0,u),2)}b=E.yieldResult;l.commit=b;l.snapshot=e;return E.return(b)})}},{key:"interactivelySaveModifiedSnapshot",value:function(b,e){var l=this,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){p=We.promise.deferred();u=p.promise;x=p.resolve;z=p.reject;E=l;Object.assign(We.buildCommitEditor(),{commit:Object.assign({},l.commit,{},b),cancel:function(){(this.getWindow()||this).remove();z("canceled")},accept:function(){var J=this,K,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(1==
P.nextAddress)return P.setCatchFinallyBlocks(2),P.yield(E.saveModifiedSnapshot(J.commit,e),4);if(2!=P.nextAddress)return K=P.yieldResult,(J.getWindow()||J).remove(),x(J.commit=K),P.leaveTryBlock(0);T=P.enterCatchBlock();J.showError(T);z(T);P.jumpToEnd()})}}).openInWindow({title:"commit"});return G.return(u)})}},{key:"interactivelyEditMetadata",value:function(b){var e=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(e.interactivelySaveModifiedSnapshot(e.commit,
e.snapshot),2);l=p.yieldResult;"function"===typeof b&&b({commit:l,snapshot:e.snapshot});return p.return(l)})}},{key:"interactivelyEditSnapshotJSON",value:function(b){var e=this,l,p,u,x,z,E,G,J,K,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(1==P.nextAddress)return l=e,p=l.commit,u=l.snapshot,x=p,z=x._id,E=x.name,G=x.type,P.yield(System.import("lively.ide/text-editor.js"),2);K=P.yieldResult;T=K.default;T.openURL("<"+G+"/"+E+">",{historyId:"object-serialization-debugger-editor",
customSaveAction:function(da){var fa,ka,za,Ia,N,ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){switch(W.nextAddress){case 1:if(fa=u){W.jumpTo(2);break}return W.yield(e.db.fetchSnapshot(void 0,void 0,z),3);case 3:fa=W.yieldResult;case 2:ka=fa;za=JSON.stringify(ka,null,2);if(za===J){W.jumpTo(4);break}return W.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),5);case 5:if(Ia=
W.yieldResult,!Ia)return W.return({saved:!1,message:"canceled"});case 4:return N=JSON.parse(da.ui.contentText.textString),W.yield(e.interactivelySaveModifiedSnapshot(e.commit,N),6);case 6:return p=W.yieldResult,u=N,J=da.ui.contentText.textString,ia={saved:!0,snapshot:N,commit:p},"function"===typeof b&&b(ia),W.return(ia)}})},customLoadContentAction:function(da,fa){var ka,za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){if(1==Ia.nextAddress)return(ka=u)?Ia.jumpTo(2):Ia.yield(e.db.fetchSnapshot(void 0,
void 0,z),3);2!=Ia.nextAddress&&(ka=Ia.yieldResult);za=ka;return Ia.return({content:J=JSON.stringify(za,null,2),url:G+"/"+E+".json"})})}});P.jumpToEnd()})}},{key:"interactivelyEditPackageCode",value:function(b){var e=this,l,p,u,x,z,E,G,J,K,T,P,da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fa){switch(fa.nextAddress){case 1:l=e;p=l.commit;u=l.snapshot;x=p;z=x._id;if(E=u){fa.jumpTo(2);break}return fa.yield(e.db.fetchSnapshot(void 0,void 0,z),3);case 3:E=fa.yieldResult;case 2:return G=
E,J=(new We.SnapshotPackageHelper(G)).filesInPackages(),K=J.map(function(ka){return{isListItem:!0,string:ka.url,value:ka}}),fa.yield($world.filterableListPrompt("Select file to edit",K,{historyId:"object-serialization-debugger-hist"}),4);case 4:return T=fa.yieldResult,P=$jscomp.makeIterator(T.selected),(da=P.next().value)?fa.return(e.interactivelyEditFileInSnapshotPackage(da,b)):fa.return()}})}},{key:"interactivelyEditFileInSnapshotPackage",value:function(b,e,l){var p=this,u,x,z,E,G,J,K,T,P,da,fa,
ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(za){switch(za.nextAddress){case 1:u=p;x=u.snapshot;z=u.commit;E=z._id;G=z.name;J=z.type;if(K=x){za.jumpTo(2);break}return za.yield(p.db.fetchSnapshot(void 0,void 0,E),3);case 3:K=za.yieldResult;case 2:return T=K,P=b.get(T),za.yield(System.import("lively.ide/text-editor.js"),4);case 4:return da=za.yieldResult,fa=da.default,ka=fa.openURL("<"+J+"/"+G+" - "+b.path.slice(1).join("/")+">",{historyId:"interactivelyEditFileInSnapshotPackage-hist",
customSaveAction:function(Ia){var N,ia,W,ca;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sa){switch(sa.nextAddress){case 1:N=b.get(T);if(N===P){sa.jumpTo(2);break}return sa.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),3);case 3:if(ia=sa.yieldResult,!ia)return sa.return({saved:!1,message:"canceled"});case 2:return b.set(T,Ia.ui.contentText.textString),W=p,sa.yield(p.interactivelySaveModifiedSnapshot(p.commit,
T),4);case 4:return W.commit=sa.yieldResult,ca={commit:p.commit,snapshot:T,saved:!0},"function"===typeof e&&e(ca),sa.return(ca)}})},customLoadContentAction:function(Ia,N){return{content:b.get(T),url:b.url}}}),l&&ka.whenRendered().then(function(){return ka.lineNumber=l.row}),za.return(ka)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotEditor"}}],d,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9614,end:14833})}(void 0);We.SnapshotEditor=MX;We.SnapshotEditor=MX;We.SnapshotEditor=MX;We.partURLRe=/^part:\/\/([^\/]+)\/(.*)$/;var mB=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),k=d.hasOwnProperty("PartResource")&&"function"===typeof d.PartResource?d.PartResource:d.PartResource=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $b(k,a,[{key:"canDealWithJSON",get:function(){return!1}},{key:"dirList",value:function(b,e){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?p.yield(We.resource(l.url.replace("part://","styleguide://")).dirList(b,e),2):p.return(p.yieldResult)})}},{key:"write",value:function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){throw Error("Part urls are ready only! Please go to the world they are defined in and change the exported component directly.");
})}},{key:"read",value:function(){var b=this,e,l,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(We.resource(b.url.replace("part://","styleguide://")).read(),2);case 2:e=E.yieldResult;if(!e.master){E.jumpTo(3);break}return E.yield(e.master.whenReady(),3);case 3:l=e.copy();l.isComponent=!1;l.name="a"+We.getClassName(l);l.withAllSubmorphsDoExcluding(function(G){G!=l&&G.master||delete G._parametrizedProps},function(G){return G.master&&
G!=l});p=l.master;l.master=e;if(!l._pool.mastersInSubHierarchy){E.jumpTo(5);break}u=$jscomp.makeIterator(l._pool.mastersInSubHierarchy);x=u.next();case 6:if(x.done){E.jumpTo(5);break}z=x.value;if(p==z){E.jumpTo(7);break}return E.yield(z.applyIfNeeded(!0),9);case 9:z.derivedMorph.ownerChain().includes(l)||z.derivedMorph.requestMasterStyling();case 7:x=u.next();E.jumpTo(6);break;case 5:return l.master.applyIfNeeded(!0),delete l._pool,l.withAllSubmorphsDo(function(G){if("function"===typeof G.onLoad)G.onLoad()}),
E.return(l)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PartResource"}}],d,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14890,end:16664})}(We.Resource);We.PartResource=mB;We.PartResource=mB;We.PartResource=mB;var aO={name:"part",matches:function(a){return a.match(We.partURLRe)},
resourceClass:We.PartResource};We.resourceExtension=aO;We.resourceExtension=aO;We.resourceExtension=aO;We.registerExtension(We.resourceExtension);(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),k=d.hasOwnProperty("CommitEditor")&&"function"===typeof d.CommitEditor?d.CommitEditor:d.CommitEditor=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"onLoad",value:function(){We.connect(this.ui.okButton,
"fire",this,"accept");We.connect(this.ui.cancelButton,"fire",this,"cancel")}},{key:"accept",value:function(){}},{key:"cancel",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CommitEditor"}},{key:"properties",get:function(){return{name:{defaultValue:"commit editor"},extent:{defaultValue:We.pt(420,24)},layout:{initialize:function(){this.layout=new We.VerticalLayout({resizeSubmorphs:!0,spacing:3})}},commit:{set:function(b){this._commit=b;var e=b.type,l=b.timestamp,
p=b.author,u=b.tags,x=b.description,z=b.metadata,E=this.ui,G=E.typeInput,J=E.timestampInput,K=E.authorNameInput,T=E.authorEmailInput,P=E.authorRealmInput,da=E.tagsInput,fa=E.descriptionInput,ka=E.messageInput,za=E.metadataInput;E.nameInput.input=b.name;G.input=e;J.input=String(new Date(l));K.input=p.name;T.input=p.email;P.input=p.realm;da.input=u.join(" ");fa.textString=x;ka.textString="";za.textString=z?JSON.stringify(z,null,2):""},get:function(){var b=this._commit;if(!b)throw Error("commit editor does not have a _commit object");
var e=this.ui,l=e.authorNameInput,p=e.authorEmailInput,u=e.authorRealmInput,x=e.tagsInput,z=e.descriptionInput,E=e.messageInput,G=e.metadataInput,J=e.nameInput.input;e=e.typeInput.input;if(b.name!==J)throw Error("name does not match _commit.name: "+J+" vs "+b.name);if(b.type!==e)throw Error("type does not match _commit.type: "+e+" vs "+b.type);b.author.name=l.input;b.author.email=p.input;b.author.realm=u.input;b.tags=x.input.split(" ").map(function(K){return K.trim()}).filter(Boolean);b.description=
z.textString;b.message=E.textString;b.metadata=G.textString?JSON.parse(G.textString):null;return b}},ui:{get:function(){return{metadataInput:this.get("metadata input"),messageInput:this.get("message input"),descriptionInput:this.get("description input"),tagsInput:this.get("tags input"),authorRealmInput:this.get("author.realm input"),authorEmailInput:this.get("author.email input"),authorNameInput:this.get("author.name input"),timestampInput:this.get("timestamp input"),typeInput:this.get("type input"),
nameInput:this.get("name input"),cancelButton:this.get("cancel button"),okButton:this.get("ok button")}}},submorphs:{initialize:function(){var b={type:"input",extent:We.pt(420,24),fixedWidth:!0,fixedHeight:!0,padding:We.Rectangle.inset(4,4),border:{color:We.Color.gray,width:1}};this.submorphs=[Object.assign({},b,{name:"name input",placeholder:"name"}),Object.assign({},b,{name:"type input",placeholder:"type"}),Object.assign({},b,{name:"timestamp input",placeholder:"timestamp"}),{layout:new We.VerticalLayout({resizeSubmorphs:!0,
spacing:3}),submorphs:[Object.assign({},b,{name:"author.name input",placeholder:"author name"}),Object.assign({},b,{name:"author.email input",placeholder:"author email"}),Object.assign({},b,{name:"author.realm input",placeholder:"author realm"})]},Object.assign({},b,{name:"tags input",placeholder:"tags"}),Object.assign({},b,{height:70,name:"description input",type:"text"}),Object.assign({},b,{height:70,name:"message input",type:"text"}),Object.assign({},b,{height:70,name:"metadata input",type:"text"}),
{layout:new We.HorizontalLayout({spacing:3,direction:"centered"}),submorphs:[{type:"button",name:"ok button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}]}}}}}],d,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:16850,end:21944})})(We.Morph);We.buildCommitEditor=oU;
We.buildCommitEditor=oU;var Am=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js");Am.pt=ui;Am.Morph=xk;Am.morph=Dk;Am.touchInputDevice=En;Am.config=$l;Am.fun=Vl;var nB=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),k=d.hasOwnProperty("TooltipViewer")&&"function"===typeof d.TooltipViewer?d.TooltipViewer:d.TooltipViewer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,
a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.currentMorph=b}},{key:"__dont_serialize__",get:function(){return["currentTooltip","currentMorph"]}},{key:"notPartOfCurrentTooltip",value:function(b){return!b.ownerChain().includes(this.currentMorph)}},{key:"invalidatesCurrentTooltip",value:function(b){return b.tooltip||this.notPartOfCurrentTooltip(b)}},{key:"mouseMove",value:function(b){var e=this;if(!Am.touchInputDevice&&!b.state.draggedMorph){var l=b.hand,p=$world.morphsContainingPoint(b.positionIn($world)).filter(function(E){return E.reactsToPointer||
E.tooltip});p=$jscomp.makeIterator(p.slice(p.indexOf(l)+1));for(var u=p.next();!u.done;u=p.next()){u=u.value;if(z&&!z.ownerChain().includes(u))break;if(u.tooltip){var x=u;break}var z=u}for(;x&&!x.visible;)x=x.morphBeneath(b.positionIn($world));x?this.currentMorph!==x&&this.invalidatesCurrentTooltip(x)&&(this.hoverOutOfMorph(this.currentMorph),this.hoverIntoMorph(x,l),this.currentMorph=x):this.currentTooltip?this.currentTooltip.softRemove().then(function(){e.currentTooltip&&!e.currentTooltip.owner&&
(e.currentTooltip=null)}):this.currentMorph=null}}},{key:"mouseDown",value:function(b){this.currentTooltip&&this.currentTooltip.remove();this.currentTooltip=null}},{key:"hoverIntoMorph",value:function(b,e){this.clearScheduledTooltip();this.currentTooltip?this.showTooltipFor(b,e):this.scheduleTooltipFor(b,e)}},{key:"hoverOutOfMorph",value:function(b){var e=this;this.currentTooltip&&this.currentTooltip.softRemove(function(l){return e.currentTooltip==l&&(e.currentTooltip=null)})}},{key:"scheduleTooltipFor",
value:function(b,e){var l=this;this.timer=setTimeout(function(){l.currentMorph&&l.showTooltipFor(b,e)},1E3*Am.config.showTooltipsAfter)}},{key:"clearScheduledTooltip",value:function(){clearTimeout(this.timer)}},{key:"clearCurrentTooltip",value:function(){var b=this.currentTooltip;b&&b.remove()}},{key:"showTooltipFor",value:function(b,e){b.tooltip&&b.world()&&!e.env.eventDispatcher.eventState.draggedMorph&&(this.clearCurrentTooltip(),e=e?e.position.addXY(10,7):b.globalBounds().bottomRight(),this.currentTooltip=
new Am.Tooltip({position:e,description:b.tooltip}),$world.addMorph(this.currentTooltip),this.currentTooltip.update(b))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TooltipViewer"}}],d,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:207,end:3202})}(void 0);Am.TooltipViewer=
nB;Am.TooltipViewer=nB;Am.TooltipViewer=nB;var ay=Ma("T",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),k=d.hasOwnProperty("Tooltip")&&"function"===typeof d.Tooltip?d.Tooltip:d.Tooltip=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"update",value:function(b){this.position=b.globalBounds().bottomCenter().subPt(b.world().scroll).addPt(Am.pt(0,7))}},{key:"softRemove",
value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(e.animate({opacity:0,duration:300}),2);b&&b(e);e.remove();l.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tooltip"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},reactsToPointer:{defaultValue:!1},isEpiMorph:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://System/tooltip"}}},description:{after:["submorphs"],
derived:!0,get:function(){return $jscomp.makeIterator(this.submorphs).next().value.value},set:function(b){var e=$jscomp.makeIterator(this.submorphs).next().value;e.value=b;e.fit()}},submorphs:{initialize:function(){this.submorphs=[new Am.morph({reactsToPointer:!1,type:"label",width:200})]}}}}}],d,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:3211,end:4406})}(Am.Morph));Am.Tooltip=ay;Am.Tooltip=ay;Am.Tooltip=ay;var Gwa=Object.freeze({__proto__:null,TooltipViewer:nB,Tooltip:ay}),nca=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/index.js");nca.default=Yr;nca.MorphicDB=Yr;var Hwa=Object.freeze({__proto__:null,MorphicDB:Yr}),Fl=lively.FreezerRuntime.recorderFor("lively.2lively/interface.js");Fl.nyi=function(a){throw Error("Not yet implemented: "+a);};Fl.string=Dh;Fl.promise=bh;Fl.debugMessageOrder=!1;
var jk=function(a){this.id=Fl.string.newUUID();this.actions={};this.options={ackTimeout:3500,debug:!1};this._incomingOrderNumberingBySenders=new Map;this._outgoingOrderNumberingByTargets=new Map;this._outOfOrderCacheBySenders=new Map};jk.prototype.isOnline=function(){Fl.nyi("isOnline")};jk.prototype.open=function(){Fl.nyi("open")};jk.prototype.close=function(){Fl.nyi("close")};jk.prototype.remove=function(){Fl.nyi("remove")};jk.prototype.whenOnline=function(a){var d=this;return Fl.promise.waitFor(a,
function(){return d.isOnline()}).then(function(){return d}).catch(function(k){return Promise.reject(/timeout/i.test(String(k))?Error("Timeout in "+d+".whenOnline"):k)})};jk.prototype.onError=function(a){this.debug&&console.log("["+this+"] error: "+a)};jk.prototype.removeService=function(a){delete this.actions[a]};jk.prototype.removeServices=function(a){var d=this;a.forEach(function(k){return d.removeService(k)})};jk.prototype.addService=function(a,d){this.actions[a]=d};jk.prototype.addServices=function(a){var d=
this;Object.keys(a).forEach(function(k){return d.addService(k,a[k])})};jk.prototype.ping=function(a){var d=this,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return k=Date.now(),u.yield(d.sendToAndWait(a,"l2l-ping",{timestamp:k}),2);b=u.yieldResult;e=b.data;l=e.timestamp;p=Date.now();return u.return({to:l-k,from:p-l,roundtrip:p-k})})};jk.prototype.send=function(a,d){Fl.nyi("send")};jk.prototype.sendAndWait=function(a){var d=this,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:return k=
new Promise(function(u,x){return d.send(a,u)}),b={},e=d.options.ackTimeout+400,"ackTimeout"in a&&(e=!a.ackTimeout||0>a.ackTimeout?null:a.ackTimeout+400),e?p.yield(Promise.race([Fl.promise.delay(e,b),k]),5):p.yield(k,4);case 4:l=p.yieldResult;p.jumpTo(3);break;case 5:l=p.yieldResult;case 3:if(l===b)throw Error("Timeout sending "+a.action);return p.return(l)}})};jk.prototype.sendTo=function(a,d,k,b){return this.send({target:a,action:d,data:k},b)};jk.prototype.sendToAndWait=function(a,d,k,b){return this.sendAndWait(Object.assign({target:a,
action:d,data:k},b))};jk.prototype.prepareSend=function(a,d){var k=a.target,b=a.action,e=a.messageId,l=a.sender;if(!b)throw Error("Trying to send a message without specifying action!");if(!k)throw Error("Trying to send message "+b+" without specifying target!");e||(a.messageId=Fl.string.newUUID());l||(a.sender=this.id);b=a.n=this._outgoingOrderNumberingByTargets.get(k)||0;this._outgoingOrderNumberingByTargets.set(k,b+1);if("function"===typeof d){l=this;var p=d;d=function(u){var x=l._incomingOrderNumberingBySenders.get(u.sender)||
0;l.debug&&Fl.debugMessageOrder&&console.log("[MSG ORDER] "+l+" received ack for "+u.action+" as msg "+x);try{p.apply(null,arguments)}catch(z){console.error("Error in ack fn of "+l+": "+z.stack)}l._incomingOrderNumberingBySenders.set(u.sender,x+1);setTimeout(function(){return l.invokeOutOfOrderMessages(u.sender)},0)}}this.debug&&Fl.debugMessageOrder&&console.log("[MSG ORDER] "+this+" sending "+b+" ("+a.action+") to "+k);return[a,d]};jk.prototype.prepareAnswerMessage=function(a,d){return{action:a.action+
"-response",inResponseTo:a.messageId,target:a.sender,data:d,sender:this.id}};jk.prototype.installEventToMessageTranslator=function(a){var d=this,k=a.onevent;a.onevent=function(b){var e=b.data||[];k.call(this,b);b.data=["*"].concat(e);k.call(this,b)};a.on("*",function(b,e){b&&"object"===typeof b&&b.action&&(e=b,b=e.action);var l=arguments[arguments.length-1];l="function"===typeof l?l:null;(e=e===l?null:e)&&e.data&&("number"===typeof e.n||e.broadcast)&&e.sender?d.receive(e,a,l):(console.warn(d+" received non-conformant message "+
b+":",arguments),"function"===typeof l&&l({data:{error:"invalid l2l message"}}))})};jk.prototype.receive=function(a,d,k){this.dispatchL2LMessageToSelf(a,d,k)};jk.prototype.dispatchL2LMessageToSelf=function(a,d,k){var b=this,e=a.action;if(a.broadcast)this.safeInvokeServiceHandler(e,a,k,d);else try{var l=this._incomingOrderNumberingBySenders.get(a.sender)||0,p="register"===e||"unregister";if(!p&&a.n<l)console.error("[MSG ORDER] ["+this+"] received message no. "+a.n+" but expected >= "+l+", dropping "+
e);else if(!p&&a.n>l){this.debug&&Fl.debugMessageOrder&&console.log("[MSG ORDER] ["+this+"] storing out of order message "+e+" ("+a.n+") for later invocation");var u=this._outOfOrderCacheBySenders.get(a.sender);u||(u=[],this._outOfOrderCacheBySenders.set(a.sender,u));u.push([e,a,k,d])}else this.safeInvokeServiceHandler(e,a,k,d),setTimeout(function(){return b.invokeOutOfOrderMessages(a.sender)},0)}catch(x){console.error("Error message ordering when handling "+e+": "+(x.stack||x)),"function"===typeof k&&
k(this.prepareAnswerMessage(a,{isError:!0,error:String(x.stack||x)}))}};jk.prototype.invokeOutOfOrderMessages=function(a){var d=this._outOfOrderCacheBySenders.get(a);if(d&&d.length){var k=this._incomingOrderNumberingBySenders.get(a)||0;a=d.findIndex(function(b){b=$jscomp.makeIterator(b);b.next();return b.next().value.n===k});-1!==a&&(d.splice(a,1),this.invokeServiceHandler.apply(this,d[a]))}};jk.prototype.renameTarget=function(a,d){if(a!==d){var k=this._outgoingOrderNumberingByTargets.get(a);this._outgoingOrderNumberingByTargets.delete(a);
this._outgoingOrderNumberingByTargets.set(d,k)}};jk.prototype.safeInvokeServiceHandler=function(a,d,k,b){try{"function"===typeof this.actions[a]?this.invokeServiceHandler(a,d,k,b):b._events&&Object.keys(b._events).includes(a)||(console.warn("WARNING ["+this+"] Unhandled message: "+a),"function"===typeof k&&k(this.prepareAnswerMessage(d,{isError:!0,error:"message not understood: "+a})))}catch(e){console.error("Error when handling "+a+": "+(e.stack||e)),"function"===typeof k&&k(this.prepareAnswerMessage(d,
{isError:!0,error:String(e.stack||e)}))}};jk.prototype.invokeServiceHandler=function(a,d,k,b){var e=this;this.debug&&Fl.debugMessageOrder&&console.log("[MSG ORDER] "+this+" received "+d.n+" ("+d.action+") from "+d.sender);this._incomingOrderNumberingBySenders.set(d.sender,d.n+1);if("function"===typeof k){var l=!1,p=!1,u="ackTimeout"in d?d.ackTimeout:this.options.ackTimeout,x=this._outgoingOrderNumberingByTargets.get(d.sender)||0;this._outgoingOrderNumberingByTargets.set(d.sender,x+1);var z=function(E){p?
console.warn("["+e+"] ackFn for "+d.action+" called after it timed out, dropping answer!"):l?console.warn("["+e+"] ack function called repeatedly when handling "+d.action):(l=!0,k(e.prepareAnswerMessage(d,E)),e.debug&&Fl.debugMessageOrder&&console.log("[MSG ORDER] "+e+" sending "+x+" (ack for "+d.action+")"))};u&&setTimeout(function(){l||(z({isError:!0,error:"Timeout error: "+e+" did not send answer for "+d.action+" after "+u+"ms"}),p=!0)},u)}try{this.actions[a].call(this,this,d,z,b)}catch(E){console.error("["+
this+"] Error handling "+a+": "+(E.stack||E)),z&&z({error:E.stack})}};$jscomp.global.Object.defineProperties(jk.prototype,{debug:{configurable:!0,enumerable:!0,get:function(){return this.options.debug},set:function(a){this.options.debug=a}}});Fl.L2LConnection=jk;Fl.default=jk;var jt=lively.FreezerRuntime.recorderFor("lively.2lively/default-actions.js"),bO={"l2l-ping":function(a,d,k,b){b=d.sender;d=d.data.timestamp;var e=Date.now();"function"===typeof k&&k({timestamp:e});a.debug&&console.log("[undefined] got ping from "+
b+", time: "+(e-d)+"ms")},"remote-eval":function(a,d,k,b){var e=d.data.source;Promise.resolve().then(function(){return eval(e)}).then(function(l){return k({value:l})}).catch(function(l){l.originalErr&&(l=l.originalErr);console.error("eval error: "+l);"function"===typeof k&&k({isError:!0,value:String(l.stack||l)})})},"remote-eval-2":function(a,d,k,b){var e=d.data.source;Promise.resolve().then(function(){var l=eval(e);if(!(l instanceof Promise))throw console.error("unexpected eval result:"+l),Error("unexpected eval result:"+
l);return l}).then(function(l){return k(l)}).catch(function(l){console.error("eval error: "+l);l.originalErr&&(l=l.originalErr);"function"===typeof k&&k({isError:!0,value:String(l.stack||l)})})}};jt.defaultActions=bO;jt.defaultActions=bO;jt.defaultActions=bO;var Yu={},NX=(Yu["[broadcast] send"]=function(a,d,k,b){var e=d.sender,l=d.data,p,u,x,z,E,G,J,K,T,P,da,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ka){p=l;u=p.action;x=p.broadcast;z=p.room;E=p.namespace;G=p.isSystemBroadcast;
J=p.isMultiServerBroadcast;K=[];J?(console.log(".......isMultiServerBroadcast"),T=a,P=T.id,da=a.getTrackerList(),console.log(da),K=da.map(function(za){return za.id!=P?za.io.nsps["/"+za.namespace]:b.broadcast})):(G&&(E=a.namespace),K.push(E?a.io.nsps["/"+E]:b.broadcast));K.forEach(function(za){console.log(u,{action:u,sender:e,broadcast:!0,data:x});za.to(z).emit(u,{action:u,sender:e,broadcast:!0,data:x})});k&&"function"===typeof k&&(fa="message broadcasted to "+z,E&&(fa+=" in namespace "+E),1<K.length&&
(fa+=" "+K.length+" trackers"),console.log(fa),k({status:fa}));ka.jumpToEnd()})},Yu["[broadcast] join room"]=function(a,d,k,b){var e=d.sender,l=d.data.room,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return u=!1,x=a.io.nsps["/"+a.namespace].adapter.rooms,(z=x[l]&&x[l].sockets&&x[l].sockets[b.id])?(p=e+" already in "+l,E.jumpTo(2)):E.yield(new Promise(function(G,J){return b.join(l,function(K){return K?J(K):G()})}),3);2!=E.nextAddress&&(p=e+" joined "+
l,u=!0);k&&"function"===typeof k&&k({status:p,joined:u});E.jumpToEnd()})},Yu["[broadcast] leave room"]=function(a,d,k,b){var e=d.sender,l=d.data.room,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return u=!1,x=a.io.nsps["/"+a.namespace].adapter.rooms,z=x[l]&&x[l].sockets&&x[l].sockets[b.id],z?E.yield(new Promise(function(G,J){return b.leave(l,function(K){return K?J(K):G()})}),3):(p=e+" not in "+l,E.jumpTo(2));2!=E.nextAddress&&(p=e+" left room "+l,u=!0);
console.log(p);k&&"function"===typeof k&&k({left:u,status:p});E.jumpToEnd()})},Yu["[broadcast] my rooms"]=function(a,d,k,b){k(b.rooms)},Yu["[broadcast] all rooms"]=function(a,d,k,b){k(a.io.nsps["/"+a.namespace].adapter.rooms)},Yu["[broadcast] list room members"]=function(a,d,k,b){d=d.data.room;b=a.io;d?(a=b.nsps["/"+a.namespace].adapter.rooms[d],k({room:d,sockets:a?a.sockets:{},length:a?a.length:0})):k({isError:!0,error:"`room` paramerter missing!"})},Yu.getClients=function(a,d,k){a.removeDisconnectedClients();
k(Array.from(a.clients))},Yu);jt.defaultTrackerActions=NX;jt.defaultTrackerActions=NX;jt.defaultTrackerActions=NX;var FF={},cO=(FF.getRoomList=function(a){var d=a.client,k=a.ackFn,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b=d._socketioClient.rooms;k(b);e.jumpToEnd()})},FF["ask for"]=function(a,d,k,b){var e=d.sender,l=d.data.query,p=this,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return u=l.match(/password|sudo/i)?"passwordPrompt":
"prompt",z.yield($world[u](l),2);x=z.yieldResult;"function"===typeof k&&k({answer:x});a.debug&&console.log("["+p+"] message 'ask for' from "+e+", query: "+l);z.jumpToEnd()})},FF["open editor"]=function(a,d,k,b){var e=d.data.args,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return e.length?p.yield($world.execCommand("open file for EDITOR",{url:e[0]}),2):(k({error:"no file specified"}),p.return());l=p.yieldResult;"function"===typeof k&&k("aborted"===l?{error:String(l)}:
{status:l});p.jumpToEnd()})},FF.changeWorkingDirectory=function(a,d,k,b){var e=d.data.args,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){l=$jscomp.makeIterator(e||[]);p=l.next().value;u=l.next().value;x="OK";try{if(p)if(u){if(z=$world.getMorphWithId(u))if(z.__lookupSetter__("cwd"))z.cwd=p;else if("function"===typeof z.changeWorkingDirectory)z.changeWorkingDirectory(p);else if("function"===typeof z.pluginFind){if(E=z.pluginFind(function(J){return J.isShellEditorPlugin}))E.cwd=
p}else x="[changeWorkingDirectory] cannot figure pout how to set dir"}else x="[changeWorkingDirectory] No command morph";else x="[changeWorkingDirectory] No directory received"}catch(J){x=String(J)}"OK"!==x&&console.warn(x);"function"===typeof k&&k(x);G.jumpToEnd()})},FF);jt.defaultClientActions=cO;jt.defaultClientActions=cO;jt.defaultClientActions=cO;var Iwa={},Jwa=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
Kwa="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),oca=Iwa=function(a){var d=a,k=a.indexOf("["),b=a.indexOf("]");-1!=k&&-1!=b&&(a=a.substring(0,k)+a.substring(k,b).replace(/:/g,";")+a.substring(b,a.length));var e=Jwa.exec(a||"");a={};for(var l=14;l--;)a[Kwa[l]]=e[l]||"";-1!=k&&-1!=b&&(a.source=d,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=
!0);d=a.path;k=d.replace(/\/{2,9}/g,"/").split("/");"/"!=d.substr(0,1)&&0!==d.length||k.splice(0,1);"/"==d.substr(d.length-1,1)&&k.splice(k.length-1,1);a.pathNames=k;a.queryKey=Ama(a,a.query);return a},Lwa={},dE=864E5,Cma=365.25*dE,Mwa=Lwa=function(a,d){d=d||{};var k=typeof a;if("string"===k&&0<a.length)return Bma(a);if("number"===k&&!1===isNaN(a))return d.long?cL(a,dE,"day")||cL(a,36E5,"hour")||cL(a,6E4,"minute")||cL(a,1E3,"second")||a+" ms":a>=dE?Math.round(a/dE)+"d":36E5<=a?Math.round(a/36E5)+
"h":6E4<=a?Math.round(a/6E4)+"m":1E3<=a?Math.round(a/1E3)+"s":a+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a));},Fma="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Di={};Di=Di=pU.debug=pU["default"]=pU;Di.coerce=function(a){return a instanceof Error?a.stack||a.message:a};Di.disable=function(){Di.enable("")};Di.enable=function(a){Di.save(a);Di.names=[];Di.skips=[];var d,k=("string"===typeof a?a:"").split(/[\s,]+/),b=k.length;
for(d=0;d<b;d++)k[d]&&(a=k[d].replace(/\*/g,".*?"),"-"===a[0]?Di.skips.push(new RegExp("^"+a.substr(1)+"$")):Di.names.push(new RegExp("^"+a+"$")));for(d=0;d<Di.instances.length;d++)a=Di.instances[d],a.enabled=Di.enabled(a.namespace)};Di.enabled=function(a){if("*"===a[a.length-1])return!0;var d;var k=0;for(d=Di.skips.length;k<d;k++)if(Di.skips[k].test(a))return!1;k=0;for(d=Di.names.length;k<d;k++)if(Di.names[k].test(a))return!0;return!1};Di.humanize=Mwa;Di.instances=[];Di.names=[];Di.skips=[];Di.formatters=
{};var dO="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,jn={},qU=Li;jn=jn=Di;jn.log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)};jn.formatArgs=function(a){var d=(this||dO).useColors;a[0]=(d?"%c":"")+(this||dO).namespace+(d?" %c":" ")+a[0]+(d?"%c ":" ")+"+"+jn.humanize((this||dO).diff);if(d){d="color: "+(this||dO).color;a.splice(1,0,d,"color: inherit");var k=0,b=0;a[0].replace(/%[a-zA-Z%]/g,
function(e){"%%"!==e&&(k++,"%c"===e&&(b=k))});a.splice(b,0,d)}};jn.save=function(a){try{null==a?jn.storage.removeItem("debug"):jn.storage.debug=a}catch(d){}};jn.load=S7;jn.useColors=function(){return"undefined"!==typeof window&&window.process&&"renderer"===window.process.type?!0:"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||
"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)};var Nwa=jn;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage)var OX=chrome.storage.local;else a:{try{OX=window.localStorage;
break a}catch(a){}OX=void 0}Nwa.storage=OX;jn.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" ");
jn.formatters.j=function(a){try{return JSON.stringify(a)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}};jn.enable(S7());var kt=jn,Ik="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,pca={};pca=Ho;Ho.prototype.on=Ho.prototype.addEventListener=function(a,d){(this||Ik)._callbacks=(this||Ik)._callbacks||{};((this||Ik)._callbacks["$"+a]=(this||Ik)._callbacks["$"+a]||[]).push(d);return this||Ik};Ho.prototype.once=function(a,d){function k(){this.off(a,k);d.apply(this||
Ik,arguments)}k.fn=d;this.on(a,k);return this||Ik};Ho.prototype.off=Ho.prototype.removeListener=Ho.prototype.removeAllListeners=Ho.prototype.removeEventListener=function(a,d){(this||Ik)._callbacks=(this||Ik)._callbacks||{};if(0==arguments.length)return(this||Ik)._callbacks={},this||Ik;var k=(this||Ik)._callbacks["$"+a];if(!k)return this||Ik;if(1==arguments.length)return delete (this||Ik)._callbacks["$"+a],this||Ik;for(var b,e=0;e<k.length;e++)if(b=k[e],b===d||b.fn===d){k.splice(e,1);break}0===k.length&&
delete (this||Ik)._callbacks["$"+a];return this||Ik};Ho.prototype.emit=function(a){(this||Ik)._callbacks=(this||Ik)._callbacks||{};for(var d=Array(arguments.length-1),k=(this||Ik)._callbacks["$"+a],b=1;b<arguments.length;b++)d[b-1]=arguments[b];if(k){k=k.slice(0);b=0;for(var e=k.length;b<e;++b)k[b].apply(this||Ik,d)}return this||Ik};Ho.prototype.listeners=function(a){(this||Ik)._callbacks=(this||Ik)._callbacks||{};return(this||Ik)._callbacks["$"+a]||[]};Ho.prototype.hasListeners=function(a){return!!this.listeners(a).length};
var by=pca,Owa={},Pwa={}.toString,PX=Owa=Array.isArray||function(a){return"[object Array]"==Pwa.call(a)},qca={},QX=Rh.Buffer;qca=function(a){var d;!(d=Qwa&&QX.isBuffer(a))&&(d=Rwa)&&((d=a instanceof ArrayBuffer)||(d="function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer));return d};var Qwa="function"===typeof QX&&"function"===typeof QX.isBuffer,Rwa="function"===typeof ArrayBuffer,rca=qca,sca="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,eO={},sU=PX,T7=rca,tca=Object.prototype.toString,Swa="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===tca.call(Blob),Twa="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===tca.call(File);eO.deconstructPacket=function(a){var d=[];a.data=rU(a.data,d);a.attachments=d.length;return{packet:a,buffers:d}};eO.reconstructPacket=function(a,d){a.data=tU(a.data,d);a.attachments=void 0;return a};eO.removeBlobs=function(a,d){function k(l,
p,u){if(!l)return l;if(Swa&&l instanceof Blob||Twa&&l instanceof File){b++;var x=new FileReader;x.onload=function(){u?u[p]=(this||sca).result:e=(this||sca).result;--b||d(e)};x.readAsArrayBuffer(l)}else if(sU(l))for(x=0;x<l.length;x++)k(l[x],x,l);else if("object"===typeof l&&!T7(l))for(x in l)k(l[x],x,l)}var b=0,e=a;k(e);b||d(e)};var Om="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,rk={},uU=kt("socket.io-parser"),vU=eO;rk.protocol=4;rk.types="CONNECT DISCONNECT EVENT ACK ERROR BINARY_EVENT BINARY_ACK".split(" ");
rk.CONNECT=0;rk.DISCONNECT=1;rk.EVENT=2;rk.ACK=3;rk.ERROR=4;rk.BINARY_EVENT=5;rk.BINARY_ACK=6;rk.Encoder=U7;rk.Decoder=dL;var Gma=rk.ERROR+'"encode error"';U7.prototype.encode=function(a,d){uU("encoding packet %j",a);rk.BINARY_EVENT===a.type||rk.BINARY_ACK===a.type?Hma(a,d):(a=V7(a),d([a]))};by(dL.prototype);dL.prototype.add=function(a){if("string"===typeof a){a:{var d=0,k={type:Number(a.charAt(0))};if(null==rk.types[k.type])a={type:rk.ERROR,data:"parser error: unknown packet type "+k.type};else{if(rk.BINARY_EVENT===
k.type||rk.BINARY_ACK===k.type){for(var b=d+1;"-"!==a.charAt(++d)&&d!=a.length;);b=a.substring(b,d);if(b!=Number(b)||"-"!==a.charAt(d))throw Error("Illegal attachments");k.attachments=Number(b)}if("/"===a.charAt(d+1)){for(b=d+1;++d;){var e=a.charAt(d);if(","===e)break;if(d===a.length)break}k.nsp=a.substring(b,d)}else k.nsp="/";b=a.charAt(d+1);if(""!==b&&Number(b)==b){for(b=d+1;++d;){e=a.charAt(d);if(null==e||Number(e)!=e){--d;break}if(d===a.length)break}k.id=Number(a.substring(b,d+1))}if(a.charAt(++d)){d=
a.substr(d);try{var l=JSON.parse(d)}catch(p){l=!1}if(!1===l||k.type!==rk.ERROR&&!PX(l)){a={type:rk.ERROR,data:"parser error: invalid payload"};break a}else k.data=l}uU("decoded %s as %j",a,k);a=k}}rk.BINARY_EVENT===a.type||rk.BINARY_ACK===a.type?((this||Om).reconstructor=new wU(a),0===(this||Om).reconstructor.reconPack.attachments&&this.emit("decoded",a)):this.emit("decoded",a)}else if(rca(a)||a.base64)if((this||Om).reconstructor){if(a=(this||Om).reconstructor.takeBinaryData(a))(this||Om).reconstructor=
null,this.emit("decoded",a)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+a);};dL.prototype.destroy=function(){(this||Om).reconstructor&&(this||Om).reconstructor.finishedReconstruction()};wU.prototype.takeBinaryData=function(a){(this||Om).buffers.push(a);return(this||Om).buffers.length===(this||Om).reconPack.attachments?(a=vU.reconstructPacket((this||Om).reconPack,(this||Om).buffers),this.finishedReconstruction(),a):null};wU.prototype.finishedReconstruction=
function(){(this||Om).reconPack=null;(this||Om).buffers=[]};var RX={};try{RX="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(a){RX=!1}var Uwa=RX,Vwa={},SX=Vwa="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")(),Wwa={},TX=Wwa=function(a){var d=a.xdomain,k=a.xscheme;a=a.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!d||Uwa))return new XMLHttpRequest}catch(b){}try{if("undefined"!==typeof XDomainRequest&&!k&&a)return new XDomainRequest}catch(b){}if(!d)try{return new (SX[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(b){}},
Xwa={},xU=Rh.Buffer,Ima=PX,uca=Object.prototype.toString,Jma="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===uca.call(Blob),Kma="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===uca.call(File),UX=Xwa=eL,Ywa={},fO=Ywa=function(a,d,k){var b=a.byteLength;d=d||0;k=k||b;if(a.slice)return a.slice(d,k);0>d&&(d+=b);0>k&&(k+=b);k>b&&(k=b);if(d>=b||d>=k||0===b)return new ArrayBuffer(0);a=new Uint8Array(a);b=new Uint8Array(k-d);for(var e=0;d<
k;d++,e++)b[e]=a[d];return b.buffer},Zwa={},$wa=Zwa=function(a,d,k){function b(l,p){if(0>=b.count)throw Error("after called too many times");--b.count;l?(e=!0,d(l),d=k):0!==b.count||e||d(null,p)}var e=!1;k=k||Lma;b.count=a;return 0===a?d():b},VX={};(function(a){VX.encode=function(d){d=new Uint8Array(d);var k,b=d.length,e="";for(k=0;k<b;k+=3)e+=a[d[k]>>2],e+=a[(d[k]&3)<<4|d[k+1]>>4],e+=a[(d[k+1]&15)<<2|d[k+2]>>6],e+=a[d[k+2]&63];2===b%3?e=e.substring(0,e.length-1)+"=":1===b%3&&(e=e.substring(0,e.length-
2)+"==");return e};VX.decode=function(d){var k=.75*d.length,b=d.length,e=0;"="===d[d.length-1]&&(k--,"="===d[d.length-2]&&k--);var l=new ArrayBuffer(k),p=new Uint8Array(l);for(k=0;k<b;k+=4){var u=a.indexOf(d[k]);var x=a.indexOf(d[k+1]);var z=a.indexOf(d[k+2]);var E=a.indexOf(d[k+3]);p[e++]=u<<2|x>>4;p[e++]=(x&15)<<4|z>>2;p[e++]=(z&3)<<6|E&63}return l}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");var vca={},tA="undefined"!==typeof tA?tA:"undefined"!==typeof WebKitBlobBuilder?
WebKitBlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:!1;try{var WX=2===(new Blob(["hi"])).size}catch(a){WX=!1}var gO;if(gO=WX)try{gO=2===(new Blob([new Uint8Array([1,2])])).size}catch(a){gO=!1}var axa=gO,bxa=tA&&tA.prototype.append&&tA.prototype.getBlob;"undefined"!==typeof Blob&&(X7.prototype=Blob.prototype,Y7.prototype=Blob.prototype);vca=WX?axa?Blob:Y7:bxa?X7:void 0;var Ro=vca,cxa={},dxa=cxa=Object.keys||function(a){var d=[],k=Object.prototype.hasOwnProperty,
b;for(b in a)k.call(a,b)&&d.push(b);return d},wca={},as=String.fromCharCode,gL,fL,su;wca={version:"2.1.2",encode:function(a,d){d=d||{};d=!1!==d.strict;a=Z7(a);for(var k=a.length,b=-1,e,l="";++b<k;){e=a[b];var p=d;if(0==(e&4294967168))e=as(e);else{var u="";0==(e&4294965248)?u=as(e>>6&31|192):0==(e&4294901760)?($7(e,p)||(e=65533),u=as(e>>12&15|224),u+=as(e>>6&63|128)):0==(e&4292870144)&&(u=as(e>>18&7|240),u+=as(e>>12&63|128),u+=as(e>>6&63|128));e=u+=as(e&63|128)}l+=e}return l},decode:function(a,d){d=
d||{};d=!1!==d.strict;gL=Z7(a);fL=gL.length;su=0;a=[];for(var k;!1!==(k=Mma(d));)a.push(k);d=a.length;k=-1;for(var b,e="";++k<d;)b=a[k],65535<b&&(b-=65536,e+=as(b>>>10&1023|55296),b=56320|b&1023),e+=as(b);return e}};var Aj={},Oma=$wa,xca=wca,XX;"undefined"!==typeof ArrayBuffer&&(XX=VX);var exa="undefined"!==typeof navigator&&/Android/i.test(navigator.userAgent),fxa="undefined"!==typeof navigator&&/PhantomJS/i.test(navigator.userAgent),yca=exa||fxa;Aj.protocol=3;var hO=Aj.packets={open:0,close:1,ping:2,
pong:3,message:4,upgrade:5,noop:6},GF=dxa(hO),Gq={type:"error",data:"parser error"};Aj.encodePacket=function(a,d,k,b){"function"===typeof d&&(b=d,d=!1);"function"===typeof k&&(b=k,k=null);var e=void 0===a.data?void 0:a.data.buffer||a.data;if("undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer){if(d){k=a.data;d=new Uint8Array(k);k=new Uint8Array(1+k.byteLength);k[0]=hO[a.type];for(a=0;a<d.length;a++)k[a+1]=d[a];a=b(k.buffer)}else a=Aj.encodeBase64Packet(a,b);return a}if("undefined"!==typeof Ro&&
e instanceof Ro)return d?yca?a=Nma(a,d,b):(d=new Uint8Array(1),d[0]=hO[a.type],a=new Ro([d.buffer,a.data]),a=b(a)):a=Aj.encodeBase64Packet(a,b),a;if(e&&e.base64)return b("b"+Aj.packets[a.type]+a.data.data);d=hO[a.type];void 0!==a.data&&(d+=k?xca.encode(String(a.data),{strict:!1}):String(a.data));return b(""+d)};Aj.encodeBase64Packet=function(a,d){var k="b"+Aj.packets[a.type];if("undefined"!==typeof Ro&&a.data instanceof Ro){var b=new FileReader;b.onload=function(){var p=b.result.split(",")[1];d(k+
p)};return b.readAsDataURL(a.data)}try{var e=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(p){a=new Uint8Array(a.data);e=Array(a.length);for(var l=0;l<a.length;l++)e[l]=a[l];e=String.fromCharCode.apply(null,e)}k+=btoa(e);return d(k)};Aj.decodePacket=function(a,d,k){if(void 0===a)return Gq;if("string"===typeof a){if("b"===a.charAt(0))return Aj.decodeBase64Packet(a.substr(1),d);if(k){a:{d=a;try{d=xca.decode(d,{strict:!1})}catch(b){a=!1;break a}a=d}if(!1===a)return Gq}k=a.charAt(0);return Number(k)==
k&&GF[k]?1<a.length?{type:GF[k],data:a.substring(1)}:{type:GF[k]}:Gq}k=(new Uint8Array(a))[0];a=fO(a,1);Ro&&"blob"===d&&(a=new Ro([a]));return{type:GF[k],data:a}};Aj.decodeBase64Packet=function(a,d){var k=GF[a.charAt(0)];if(!XX)return{type:k,data:{base64:!0,data:a.substr(1)}};a=XX.decode(a.substr(1));"blob"===d&&Ro&&(a=new Ro([a]));return{type:k,data:a}};Aj.encodePayload=function(a,d,k){"function"===typeof d&&(k=d,d=null);var b=UX(a);if(d&&b)return Ro&&!yca?Aj.encodePayloadAsBlob(a,k):Aj.encodePayloadAsArrayBuffer(a,
k);if(!a.length)return k("0:");yU(a,function(e,l){Aj.encodePacket(e,b?d:!1,!1,function(p){l(null,p.length+":"+p)})},function(e,l){return k(l.join(""))})};Aj.decodePayload=function(a,d,k){if("string"!==typeof a)return Aj.decodePayloadAsBinary(a,d,k);"function"===typeof d&&(k=d,d=null);if(""===a)return k(Gq,0,1);var b="";for(var e,l,p=0,u=a.length;p<u;p++)if(l=a.charAt(p),":"!==l)b+=l;else{if(""===b||b!=(e=Number(b)))return k(Gq,0,1);l=a.substr(p+1,e);if(b!=l.length)return k(Gq,0,1);if(l.length){b=
Aj.decodePacket(l,d,!1);if(Gq.type===b.type&&Gq.data===b.data)return k(Gq,0,1);if(!1===k(b,p+e,u))return}p+=e;b=""}if(""!==b)return k(Gq,0,1)};Aj.encodePayloadAsArrayBuffer=function(a,d){if(!a.length)return d(new ArrayBuffer(0));yU(a,function(k,b){Aj.encodePacket(k,!0,!0,function(e){return b(null,e)})},function(k,b){k=b.reduce(function(p,u){u="string"===typeof u?u.length:u.byteLength;return p+u.toString().length+u+2},0);var e=new Uint8Array(k),l=0;b.forEach(function(p){var u="string"===typeof p,x=
p;if(u){x=new Uint8Array(p.length);for(var z=0;z<p.length;z++)x[z]=p.charCodeAt(z);x=x.buffer}u?e[l++]=0:e[l++]=1;p=x.byteLength.toString();for(z=0;z<p.length;z++)e[l++]=parseInt(p[z]);e[l++]=255;x=new Uint8Array(x);for(z=0;z<x.length;z++)e[l++]=x[z]});return d(e.buffer)})};Aj.encodePayloadAsBlob=function(a,d){yU(a,function(k,b){Aj.encodePacket(k,!0,!0,function(e){var l=new Uint8Array(1);l[0]=1;if("string"===typeof e){for(var p=new Uint8Array(e.length),u=0;u<e.length;u++)p[u]=e.charCodeAt(u);e=p.buffer;
l[0]=0}p=(e instanceof ArrayBuffer?e.byteLength:e.size).toString();var x=new Uint8Array(p.length+1);for(u=0;u<p.length;u++)x[u]=parseInt(p[u]);x[p.length]=255;Ro&&(e=new Ro([l.buffer,x.buffer,e]),b(null,e))})},function(k,b){return d(new Ro(b))})};Aj.decodePayloadAsBinary=function(a,d,k){"function"===typeof d&&(k=d,d=null);for(var b=[];0<a.byteLength;){for(var e=new Uint8Array(a),l=0===e[0],p="",u=1;255!==e[u];u++){if(310<p.length)return k(Gq,0,1);p+=e[u]}a=fO(a,2+p.length);p=parseInt(p);e=fO(a,0,
p);if(l)try{e=String.fromCharCode.apply(null,new Uint8Array(e))}catch(z){for(l=new Uint8Array(e),e="",u=0;u<l.length;u++)e+=String.fromCharCode(l[u])}b.push(e);a=fO(a,p)}var x=b.length;b.forEach(function(z,E){k(Aj.decodePacket(z,d,!0),E,x)})};for(var iO={encode:function(a){var d="",k;for(k in a)a.hasOwnProperty(k)&&(d.length&&(d+="&"),d+=encodeURIComponent(k)+"="+encodeURIComponent(a[k]));return d},decode:function(a){var d={};a=a.split("&");for(var k=0,b=a.length;k<b;k++){var e=a[k].split("=");d[decodeURIComponent(e[0])]=
decodeURIComponent(e[1])}return d}},gxa={},jO=gxa=function(a,d){var k=function(){};k.prototype=d.prototype;a.prototype=new k;a.prototype.constructor=a},hxa={},a8="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),zca={},c8=0,Zu=0,b8;64>Zu;Zu++)zca[a8[Zu]]=Zu;AU.encode=zU;AU.decode=function(a){var d=0;for(Zu=0;Zu<a.length;Zu++)d=64*d+zca[a.charAt(Zu)];return d};var Aca=hxa=AU,Zi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Bca={},ixa=Aj;
Bca=yr;by(yr.prototype);yr.prototype.onError=function(a,d){a=Error(a);a.type="TransportError";a.description=d;this.emit("error",a);return this||Zi};yr.prototype.open=function(){if("closed"===(this||Zi).readyState||""===(this||Zi).readyState)(this||Zi).readyState="opening",this.doOpen();return this||Zi};yr.prototype.close=function(){if("opening"===(this||Zi).readyState||"open"===(this||Zi).readyState)this.doClose(),this.onClose();return this||Zi};yr.prototype.send=function(a){if("open"===(this||Zi).readyState)this.write(a);
else throw Error("Transport not open");};yr.prototype.onOpen=function(){(this||Zi).readyState="open";(this||Zi).writable=!0;this.emit("open")};yr.prototype.onData=function(a){a=ixa.decodePacket(a,(this||Zi).socket.binaryType);this.onPacket(a)};yr.prototype.onPacket=function(a){this.emit("packet",a)};yr.prototype.onClose=function(){(this||Zi).readyState="closed";this.emit("close")};var YX=Bca,wj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Cca={},d8=YX,Dca=Aj,Hq=
kt("engine.io-client:polling");Cca=zr;var Pma=null!=(new TX({xdomain:!1})).responseType;jO(zr,d8);zr.prototype.name="polling";zr.prototype.doOpen=function(){this.poll()};zr.prototype.pause=function(a){function d(){Hq("paused");k.readyState="paused";a()}var k=this||wj;(this||wj).readyState="pausing";if((this||wj).polling||!(this||wj).writable){var b=0;(this||wj).polling&&(Hq("we are currently polling - waiting to pause"),b++,this.once("pollComplete",function(){Hq("pre-pause polling complete");--b||
d()}));(this||wj).writable||(Hq("we are currently writing - waiting to pause"),b++,this.once("drain",function(){Hq("pre-pause writing complete");--b||d()}))}else d()};zr.prototype.poll=function(){Hq("polling");(this||wj).polling=!0;this.doPoll();this.emit("poll")};zr.prototype.onData=function(a){var d=this||wj;Hq("polling got data %s",a);Dca.decodePayload(a,(this||wj).socket.binaryType,function(k,b,e){if("opening"===d.readyState)d.onOpen();if("close"===k.type)return d.onClose(),!1;d.onPacket(k)});
"closed"!==(this||wj).readyState&&((this||wj).polling=!1,this.emit("pollComplete"),"open"===(this||wj).readyState?this.poll():Hq('ignoring poll - transport state "%s"',(this||wj).readyState))};zr.prototype.doClose=function(){function a(){Hq("writing close packet");d.write([{type:"close"}])}var d=this||wj;"open"===(this||wj).readyState?(Hq("transport open - closing"),a()):(Hq("transport not open - deferring close"),this.once("open",a))};zr.prototype.write=function(a){var d=this||wj;(this||wj).writable=
!1;var k=function(){d.writable=!0;d.emit("drain")};Dca.encodePayload(a,(this||wj).supportsBinary,function(b){d.doWrite(b,k)})};zr.prototype.uri=function(){var a=(this||wj).query||{},d=(this||wj).secure?"https":"http",k="";!1!==(this||wj).timestampRequests&&(a[(this||wj).timestampParam]=Aca());(this||wj).supportsBinary||a.sid||(a.b64=1);a=iO.encode(a);(this||wj).port&&("https"===d&&443!==Number((this||wj).port)||"http"===d&&80!==Number((this||wj).port))&&(k=":"+(this||wj).port);a.length&&(a="?"+a);
var b=-1!==(this||wj).hostname.indexOf(":");return d+"://"+(b?"["+(this||wj).hostname+"]":(this||wj).hostname)+k+(this||wj).path+a};var Eca=Cca,lf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ZX={},f8=Eca,$X=kt("engine.io-client:polling-xhr");ZX=vA;ZX.Request=Ul;jO(vA,f8);vA.prototype.supportsBinary=!0;vA.prototype.request=function(a){a=a||{};a.uri=this.uri();a.xd=(this||lf).xd;a.xs=(this||lf).xs;a.agent=(this||lf).agent||!1;a.supportsBinary=(this||lf).supportsBinary;
a.enablesXDR=(this||lf).enablesXDR;a.withCredentials=(this||lf).withCredentials;a.pfx=(this||lf).pfx;a.key=(this||lf).key;a.passphrase=(this||lf).passphrase;a.cert=(this||lf).cert;a.ca=(this||lf).ca;a.ciphers=(this||lf).ciphers;a.rejectUnauthorized=(this||lf).rejectUnauthorized;a.requestTimeout=(this||lf).requestTimeout;a.extraHeaders=(this||lf).extraHeaders;return new Ul(a)};vA.prototype.doWrite=function(a,d){a=this.request({method:"POST",data:a,isBinary:"string"!==typeof a&&void 0!==a});var k=this||
lf;a.on("success",d);a.on("error",function(b){k.onError("xhr post error",b)});(this||lf).sendXhr=a};vA.prototype.doPoll=function(){$X("xhr poll");var a=this.request(),d=this||lf;a.on("data",function(k){d.onData(k)});a.on("error",function(k){d.onError("xhr poll error",k)});(this||lf).pollXhr=a};by(Ul.prototype);Ul.prototype.create=function(){var a={agent:(this||lf).agent,xdomain:(this||lf).xd,xscheme:(this||lf).xs,enablesXDR:(this||lf).enablesXDR};a.pfx=(this||lf).pfx;a.key=(this||lf).key;a.passphrase=
(this||lf).passphrase;a.cert=(this||lf).cert;a.ca=(this||lf).ca;a.ciphers=(this||lf).ciphers;a.rejectUnauthorized=(this||lf).rejectUnauthorized;var d=(this||lf).xhr=new TX(a),k=this||lf;try{$X("xhr open %s: %s",(this||lf).method,(this||lf).uri);d.open((this||lf).method,(this||lf).uri,(this||lf).async);try{if((this||lf).extraHeaders){d.setDisableHeaderCheck&&d.setDisableHeaderCheck(!0);for(var b in(this||lf).extraHeaders)(this||lf).extraHeaders.hasOwnProperty(b)&&d.setRequestHeader(b,(this||lf).extraHeaders[b])}}catch(e){}if("POST"===
(this||lf).method)try{(this||lf).isBinary?d.setRequestHeader("Content-type","application/octet-stream"):d.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{d.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in d&&(d.withCredentials=(this||lf).withCredentials);(this||lf).requestTimeout&&(d.timeout=(this||lf).requestTimeout);this.hasXDR()?(d.onload=function(){k.onLoad()},d.onerror=function(){k.onError(d.responseText)}):d.onreadystatechange=function(){if(2===d.readyState)try{var e=
d.getResponseHeader("Content-Type");if(k.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)d.responseType="arraybuffer"}catch(l){}if(4===d.readyState)if(200===d.status||1223===d.status)k.onLoad();else setTimeout(function(){k.onError("number"===typeof d.status?d.status:0)},0)};$X("xhr data %s",(this||lf).data);d.send((this||lf).data)}catch(e){setTimeout(function(){k.onError(e)},0);return}"undefined"!==typeof document&&((this||lf).index=Ul.requestsCount++,
Ul.requests[(this||lf).index]=this||lf)};Ul.prototype.onSuccess=function(){this.emit("success");this.cleanup()};Ul.prototype.onData=function(a){this.emit("data",a);this.onSuccess()};Ul.prototype.onError=function(a){this.emit("error",a);this.cleanup(!0)};Ul.prototype.cleanup=function(a){if("undefined"!==typeof(this||lf).xhr&&null!==(this||lf).xhr){this.hasXDR()?(this||lf).xhr.onload=(this||lf).xhr.onerror=e8:(this||lf).xhr.onreadystatechange=e8;if(a)try{(this||lf).xhr.abort()}catch(d){}"undefined"!==
typeof document&&delete Ul.requests[(this||lf).index];(this||lf).xhr=null}};Ul.prototype.onLoad=function(){try{try{var a=(this||lf).xhr.getResponseHeader("Content-Type")}catch(k){}var d="application/octet-stream"===a||"application/octet-stream; charset=UTF-8"===a?(this||lf).xhr.response||(this||lf).xhr.responseText:(this||lf).xhr.responseText}catch(k){this.onError(k)}if(null!=d)this.onData(d)};Ul.prototype.hasXDR=function(){return"undefined"!==typeof XDomainRequest&&!(this||lf).xs&&(this||lf).enablesXDR};
Ul.prototype.abort=function(){this.cleanup()};Ul.requestsCount=0;Ul.requests={};"undefined"!==typeof document&&("function"===typeof attachEvent?attachEvent("onunload",g8):"function"===typeof addEventListener&&addEventListener("onpagehide"in SX?"pagehide":"unload",g8,!1));var jxa=ZX,kxa={},lxa=[].indexOf,aY=kxa=function(a,d){if(lxa)return a.indexOf(d);for(var k=0;k<a.length;++k)if(a[k]===d)return k;return-1},gj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Fca={},
BU=Eca,h8=SX;Fca=wA;var mxa=/\n/g,nxa=/\\n/g,hL;jO(wA,BU);wA.prototype.supportsBinary=!1;wA.prototype.doClose=function(){(this||gj).script&&((this||gj).script.parentNode.removeChild((this||gj).script),(this||gj).script=null);(this||gj).form&&((this||gj).form.parentNode.removeChild((this||gj).form),(this||gj).form=null,(this||gj).iframe=null);BU.prototype.doClose.call(this||gj)};wA.prototype.doPoll=function(){var a=this||gj,d=document.createElement("script");(this||gj).script&&((this||gj).script.parentNode.removeChild((this||
gj).script),(this||gj).script=null);d.async=!0;d.src=this.uri();d.onerror=function(b){a.onError("jsonp poll error",b)};var k=document.getElementsByTagName("script")[0];k?k.parentNode.insertBefore(d,k):(document.head||document.body).appendChild(d);(this||gj).script=d;"undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var b=document.createElement("iframe");document.body.appendChild(b);document.body.removeChild(b)},100)};wA.prototype.doWrite=function(a,d){function k(){b();
d()}function b(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(z){e.onError("jsonp polling iframe removal error",z)}try{x=document.createElement('<iframe src="javascript:0" name="'+e.iframeId+'">')}catch(z){x=document.createElement("iframe"),x.name=e.iframeId,x.src="javascript:0"}x.id=e.iframeId;e.form.appendChild(x);e.iframe=x}var e=this||gj;if(!(this||gj).form){var l=document.createElement("form"),p=document.createElement("textarea"),u=(this||gj).iframeId="eio_iframe_"+(this||gj).index,x;l.className=
"socketio";l.style.position="absolute";l.style.top="-1000px";l.style.left="-1000px";l.target=u;l.method="POST";l.setAttribute("accept-charset","utf-8");p.name="d";l.appendChild(p);document.body.appendChild(l);(this||gj).form=l;(this||gj).area=p}(this||gj).form.action=this.uri();b();a=a.replace(nxa,"\\\n");(this||gj).area.value=a.replace(mxa,"\\n");try{(this||gj).form.submit()}catch(z){}(this||gj).iframe.attachEvent?(this||gj).iframe.onreadystatechange=function(){"complete"===e.iframe.readyState&&
k()}:(this||gj).iframe.onload=k};var oxa=Fca,pxa=Object.freeze({}),Jg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Gca={},qxa=Rh.Buffer,CU=YX,rxa=Aj,sxa=kt("engine.io-client:websocket"),iL;"undefined"!==typeof WebSocket?iL=WebSocket:"undefined"!==typeof self&&(iL=self.WebSocket||self.MozWebSocket);if("undefined"===typeof window)try{var i8=pxa}catch(a){}var xA=iL||i8;Gca=up;jO(up,CU);up.prototype.name="websocket";up.prototype.supportsBinary=!0;up.prototype.doOpen=
function(){if(this.check()){var a=this.uri(),d=(this||Jg).protocols,k={};(this||Jg).isReactNative||(k.agent=(this||Jg).agent,k.perMessageDeflate=(this||Jg).perMessageDeflate,k.pfx=(this||Jg).pfx,k.key=(this||Jg).key,k.passphrase=(this||Jg).passphrase,k.cert=(this||Jg).cert,k.ca=(this||Jg).ca,k.ciphers=(this||Jg).ciphers,k.rejectUnauthorized=(this||Jg).rejectUnauthorized);(this||Jg).extraHeaders&&(k.headers=(this||Jg).extraHeaders);(this||Jg).localAddress&&(k.localAddress=(this||Jg).localAddress);
try{(this||Jg).ws=(this||Jg).usingBrowserWebSocket&&!(this||Jg).isReactNative?d?new xA(a,d):new xA(a):new xA(a,d,k)}catch(b){return this.emit("error",b)}void 0===(this||Jg).ws.binaryType&&((this||Jg).supportsBinary=!1);(this||Jg).ws.supports&&(this||Jg).ws.supports.binary?((this||Jg).supportsBinary=!0,(this||Jg).ws.binaryType="nodebuffer"):(this||Jg).ws.binaryType="arraybuffer";this.addEventListeners()}};up.prototype.addEventListeners=function(){var a=this||Jg;(this||Jg).ws.onopen=function(){a.onOpen()};
(this||Jg).ws.onclose=function(){a.onClose()};(this||Jg).ws.onmessage=function(d){a.onData(d.data)};(this||Jg).ws.onerror=function(d){a.onError("websocket error",d)}};up.prototype.write=function(a){function d(){k.emit("flush");setTimeout(function(){k.writable=!0;k.emit("drain")},0)}var k=this||Jg;(this||Jg).writable=!1;for(var b=a.length,e=0,l=b;e<l;e++)(function(p){rxa.encodePacket(p,k.supportsBinary,function(u){if(!k.usingBrowserWebSocket){var x={};p.options&&(x.compress=p.options.compress);k.perMessageDeflate&&
("string"===typeof u?qxa.byteLength(u):u.length)<k.perMessageDeflate.threshold&&(x.compress=!1)}try{k.usingBrowserWebSocket?k.ws.send(u):k.ws.send(u,x)}catch(z){sxa("websocket closed before onclose event")}--b||d()})})(a[e])};up.prototype.onClose=function(){CU.prototype.onClose.call(this||Jg)};up.prototype.doClose=function(){"undefined"!==typeof(this||Jg).ws&&(this||Jg).ws.close()};up.prototype.uri=function(){var a=(this||Jg).query||{},d=(this||Jg).secure?"wss":"ws",k="";(this||Jg).port&&("wss"===
d&&443!==Number((this||Jg).port)||"ws"===d&&80!==Number((this||Jg).port))&&(k=":"+(this||Jg).port);(this||Jg).timestampRequests&&(a[(this||Jg).timestampParam]=Aca());(this||Jg).supportsBinary||(a.b64=1);a=iO.encode(a);a.length&&(a="?"+a);var b=-1!==(this||Jg).hostname.indexOf(":");return d+"://"+(b?"["+(this||Jg).hostname+"]":(this||Jg).hostname)+k+(this||Jg).path+a};up.prototype.check=function(){return!!xA&&!("__initialize"in xA&&(this||Jg).name===up.prototype.name)};var kO={},txa=Gca;kO.polling=
function(a){var d=!1,k=!1,b=!1!==a.jsonp;"undefined"!==typeof location&&(k="https:"===location.protocol,(d=location.port)||(d=k?443:80),d=a.hostname!==location.hostname||d!==a.port,k=a.secure!==k);a.xdomain=d;a.xscheme=k;if("open"in new TX(a)&&!a.forceJSONP)return new jxa(a);if(!b)throw Error("JSONP disabled");return new oxa(a)};kO.websocket=txa;var Rd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Hca={},Gl=kt("engine.io-client:socket"),Ica=Aj,j8=oca,Rma=iO;Hca=
hj;hj.priorWebsocketSuccess=!1;by(hj.prototype);hj.protocol=Ica.protocol;hj.Socket=hj;hj.Transport=YX;hj.transports=kO;hj.parser=Aj;hj.prototype.createTransport=function(a){Gl('creating transport "%s"',a);var d=(this||Rd).query,k={},b;for(b in d)d.hasOwnProperty(b)&&(k[b]=d[b]);k.EIO=Ica.protocol;k.transport=a;d=(this||Rd).transportOptions[a]||{};(this||Rd).id&&(k.sid=(this||Rd).id);return new kO[a]({query:k,socket:this||Rd,agent:d.agent||(this||Rd).agent,hostname:d.hostname||(this||Rd).hostname,
port:d.port||(this||Rd).port,secure:d.secure||(this||Rd).secure,path:d.path||(this||Rd).path,forceJSONP:d.forceJSONP||(this||Rd).forceJSONP,jsonp:d.jsonp||(this||Rd).jsonp,forceBase64:d.forceBase64||(this||Rd).forceBase64,enablesXDR:d.enablesXDR||(this||Rd).enablesXDR,withCredentials:d.withCredentials||(this||Rd).withCredentials,timestampRequests:d.timestampRequests||(this||Rd).timestampRequests,timestampParam:d.timestampParam||(this||Rd).timestampParam,policyPort:d.policyPort||(this||Rd).policyPort,
pfx:d.pfx||(this||Rd).pfx,key:d.key||(this||Rd).key,passphrase:d.passphrase||(this||Rd).passphrase,cert:d.cert||(this||Rd).cert,ca:d.ca||(this||Rd).ca,ciphers:d.ciphers||(this||Rd).ciphers,rejectUnauthorized:d.rejectUnauthorized||(this||Rd).rejectUnauthorized,perMessageDeflate:d.perMessageDeflate||(this||Rd).perMessageDeflate,extraHeaders:d.extraHeaders||(this||Rd).extraHeaders,forceNode:d.forceNode||(this||Rd).forceNode,localAddress:d.localAddress||(this||Rd).localAddress,requestTimeout:d.requestTimeout||
(this||Rd).requestTimeout,protocols:d.protocols||void 0,isReactNative:(this||Rd).isReactNative})};hj.prototype.open=function(){if((this||Rd).rememberUpgrade&&hj.priorWebsocketSuccess&&-1!==(this||Rd).transports.indexOf("websocket"))var a="websocket";else{if(0===(this||Rd).transports.length){var d=this||Rd;setTimeout(function(){d.emit("error","No transports available")},0);return}a=(this||Rd).transports[0]}(this||Rd).readyState="opening";try{a=this.createTransport(a)}catch(k){(this||Rd).transports.shift();
this.open();return}a.open();this.setTransport(a)};hj.prototype.setTransport=function(a){Gl("setting transport %s",a.name);var d=this||Rd;(this||Rd).transport&&(Gl("clearing existing transport %s",(this||Rd).transport.name),(this||Rd).transport.removeAllListeners());(this||Rd).transport=a;a.on("drain",function(){d.onDrain()}).on("packet",function(k){d.onPacket(k)}).on("error",function(k){d.onError(k)}).on("close",function(){d.onClose("transport close")})};hj.prototype.probe=function(a){function d(){if(E.onlyBinaryUpgrades){var G=
!(this||Rd).supportsBinary&&E.transport.supportsBinary;z=z||G}z||(Gl('probe transport "%s" opened',a),x.send([{type:"ping",data:"probe"}]),x.once("packet",function(J){z||("pong"===J.type&&"probe"===J.data?(Gl('probe transport "%s" pong',a),E.upgrading=!0,E.emit("upgrading",x),x&&(hj.priorWebsocketSuccess="websocket"===x.name,Gl('pausing current transport "%s"',E.transport.name),E.transport.pause(function(){z||"closed"===E.readyState||(Gl("changing transport and sending upgrade packet"),u(),E.setTransport(x),
x.send([{type:"upgrade"}]),E.emit("upgrade",x),x=null,E.upgrading=!1,E.flush())}))):(Gl('probe transport "%s" failed',a),J=Error("probe error"),J.transport=x.name,E.emit("upgradeError",J)))}))}function k(){z||(z=!0,u(),x.close(),x=null)}function b(G){var J=Error("probe error: "+G);J.transport=x.name;k();Gl('probe transport "%s" failed because of error: %s',a,G);E.emit("upgradeError",J)}function e(){b("transport closed")}function l(){b("socket closed")}function p(G){x&&G.name!==x.name&&(Gl('"%s" works - aborting "%s"',
G.name,x.name),k())}function u(){x.removeListener("open",d);x.removeListener("error",b);x.removeListener("close",e);E.removeListener("close",l);E.removeListener("upgrading",p)}Gl('probing transport "%s"',a);var x=this.createTransport(a,{probe:1}),z=!1,E=this||Rd;hj.priorWebsocketSuccess=!1;x.once("open",d);x.once("error",b);x.once("close",e);this.once("close",l);this.once("upgrading",p);x.open()};hj.prototype.onOpen=function(){Gl("socket open");(this||Rd).readyState="open";hj.priorWebsocketSuccess=
"websocket"===(this||Rd).transport.name;this.emit("open");this.flush();if("open"===(this||Rd).readyState&&(this||Rd).upgrade&&(this||Rd).transport.pause){Gl("starting upgrade probes");for(var a=0,d=(this||Rd).upgrades.length;a<d;a++)this.probe((this||Rd).upgrades[a])}};hj.prototype.onPacket=function(a){if("opening"===(this||Rd).readyState||"open"===(this||Rd).readyState||"closing"===(this||Rd).readyState)switch(Gl('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),
a.type){case "open":this.onHandshake(JSON.parse(a.data));break;case "pong":this.setPing();this.emit("pong");break;case "error":var d=Error("server error");d.code=a.data;this.onError(d);break;case "message":this.emit("data",a.data),this.emit("message",a.data)}else Gl('packet received with socket readyState "%s"',(this||Rd).readyState)};hj.prototype.onHandshake=function(a){this.emit("handshake",a);(this||Rd).id=a.sid;(this||Rd).transport.query.sid=a.sid;(this||Rd).upgrades=this.filterUpgrades(a.upgrades);
(this||Rd).pingInterval=a.pingInterval;(this||Rd).pingTimeout=a.pingTimeout;this.onOpen();"closed"!==(this||Rd).readyState&&(this.setPing(),this.removeListener("heartbeat",(this||Rd).onHeartbeat),this.on("heartbeat",(this||Rd).onHeartbeat))};hj.prototype.onHeartbeat=function(a){clearTimeout((this||Rd).pingTimeoutTimer);var d=this||Rd;d.pingTimeoutTimer=setTimeout(function(){if("closed"!==d.readyState)d.onClose("ping timeout")},a||d.pingInterval+d.pingTimeout)};hj.prototype.setPing=function(){var a=
this||Rd;clearTimeout(a.pingIntervalTimer);a.pingIntervalTimer=setTimeout(function(){Gl("writing ping packet - expecting pong within %sms",a.pingTimeout);a.ping();a.onHeartbeat(a.pingTimeout)},a.pingInterval)};hj.prototype.ping=function(){var a=this||Rd;this.sendPacket("ping",function(){a.emit("ping")})};hj.prototype.onDrain=function(){(this||Rd).writeBuffer.splice(0,(this||Rd).prevBufferLen);(this||Rd).prevBufferLen=0;0===(this||Rd).writeBuffer.length?this.emit("drain"):this.flush()};hj.prototype.flush=
function(){"closed"!==(this||Rd).readyState&&(this||Rd).transport.writable&&!(this||Rd).upgrading&&(this||Rd).writeBuffer.length&&(Gl("flushing %d packets in socket",(this||Rd).writeBuffer.length),(this||Rd).transport.send((this||Rd).writeBuffer),(this||Rd).prevBufferLen=(this||Rd).writeBuffer.length,this.emit("flush"))};hj.prototype.write=hj.prototype.send=function(a,d,k){this.sendPacket("message",a,d,k);return this||Rd};hj.prototype.sendPacket=function(a,d,k,b){"function"===typeof d&&(b=d,d=void 0);
"function"===typeof k&&(b=k,k=null);if("closing"!==(this||Rd).readyState&&"closed"!==(this||Rd).readyState){k=k||{};k.compress=!1!==k.compress;a={type:a,data:d,options:k};this.emit("packetCreate",a);(this||Rd).writeBuffer.push(a);if(b)this.once("flush",b);this.flush()}};hj.prototype.close=function(){function a(){b.onClose("forced close");Gl("socket closing - telling transport to close");b.transport.close()}function d(){b.removeListener("upgrade",d);b.removeListener("upgradeError",d);a()}function k(){b.once("upgrade",
d);b.once("upgradeError",d)}if("opening"===(this||Rd).readyState||"open"===(this||Rd).readyState){(this||Rd).readyState="closing";var b=this||Rd;if((this||Rd).writeBuffer.length)this.once("drain",function(){(this||Rd).upgrading?k():a()});else(this||Rd).upgrading?k():a()}return this||Rd};hj.prototype.onError=function(a){Gl("socket error %j",a);hj.priorWebsocketSuccess=!1;this.emit("error",a);this.onClose("transport error",a)};hj.prototype.onClose=function(a,d){if("opening"===(this||Rd).readyState||
"open"===(this||Rd).readyState||"closing"===(this||Rd).readyState){Gl('socket close with reason: "%s"',a);var k=this||Rd;clearTimeout((this||Rd).pingIntervalTimer);clearTimeout((this||Rd).pingTimeoutTimer);(this||Rd).transport.removeAllListeners("close");(this||Rd).transport.close();(this||Rd).transport.removeAllListeners();(this||Rd).readyState="closed";(this||Rd).id=null;this.emit("close",a,d);k.writeBuffer=[];k.prevBufferLen=0}};hj.prototype.filterUpgrades=function(a){for(var d=[],k=0,b=a.length;k<
b;k++)~aY((this||Rd).transports,a[k])&&d.push(a[k]);return d};var bY={};bY=Hca;bY.parser=Aj;var uxa=bY,vxa={},cY=vxa=function(a,d){for(var k=[],b=(d=d||0)||0;b<a.length;b++)k[b-d]=a[b];return k},wxa={},Jca=[].slice,lt=wxa=function(a,d){"string"==typeof d&&(d=a[d]);if("function"!=typeof d)throw Error("bind() requires a function");var k=Jca.call(arguments,2);return function(){return d.apply(a,k.concat(Jca.call(arguments)))}},xxa={},Iq=xxa=function(a,d,k){a.on(d,k);return{destroy:function(){a.removeListener(d,
k)}}},vf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,dY={},Jn=rk,Jq=kt("socket.io-client:socket");dY=dY=al;var yxa={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},eY=by.prototype.emit;by(al.prototype);al.prototype.subEvents=function(){if(!(this||vf).subs){var a=(this||vf).io;(this||vf).subs=[Iq(a,"open",lt(this||vf,"onopen")),Iq(a,"packet",
lt(this||vf,"onpacket")),Iq(a,"close",lt(this||vf,"onclose"))]}};al.prototype.open=al.prototype.connect=function(){if((this||vf).connected)return this||vf;this.subEvents();(this||vf).io.reconnecting||(this||vf).io.open();if("open"===(this||vf).io.readyState)this.onopen();this.emit("connecting");return this||vf};al.prototype.send=function(){var a=cY(arguments);a.unshift("message");(this||vf).emit.apply(this||vf,a);return this||vf};al.prototype.emit=function(a){if(yxa.hasOwnProperty(a))return eY.apply(this||
vf,arguments),this||vf;var d=cY(arguments),k={type:(void 0!==(this||vf).flags.binary?(this||vf).flags.binary:UX(d))?Jn.BINARY_EVENT:Jn.EVENT,data:d,options:{}};k.options.compress=!(this||vf).flags||!1!==(this||vf).flags.compress;"function"===typeof d[d.length-1]&&(Jq("emitting packet with ack id %d",(this||vf).ids),(this||vf).acks[(this||vf).ids]=d.pop(),k.id=(this||vf).ids++);(this||vf).connected?this.packet(k):(this||vf).sendBuffer.push(k);(this||vf).flags={};return this||vf};al.prototype.packet=
function(a){a.nsp=(this||vf).nsp;(this||vf).io.packet(a)};al.prototype.onopen=function(){Jq("transport is open - connecting");if("/"!==(this||vf).nsp)if((this||vf).query){var a="object"===typeof(this||vf).query?iO.encode((this||vf).query):(this||vf).query;Jq("sending connect packet with query %s",a);this.packet({type:Jn.CONNECT,query:a})}else this.packet({type:Jn.CONNECT})};al.prototype.onclose=function(a){Jq("close (%s)",a);(this||vf).connected=!1;(this||vf).disconnected=!0;delete (this||vf).id;
this.emit("disconnect",a)};al.prototype.onpacket=function(a){var d=a.type===Jn.ERROR&&"/"===a.nsp;if(a.nsp===(this||vf).nsp||d)switch(a.type){case Jn.CONNECT:this.onconnect();break;case Jn.EVENT:this.onevent(a);break;case Jn.BINARY_EVENT:this.onevent(a);break;case Jn.ACK:this.onack(a);break;case Jn.BINARY_ACK:this.onack(a);break;case Jn.DISCONNECT:this.ondisconnect();break;case Jn.ERROR:this.emit("error",a.data)}};al.prototype.onevent=function(a){var d=a.data||[];Jq("emitting event %j",d);null!=a.id&&
(Jq("attaching ack callback to event"),d.push(this.ack(a.id)));(this||vf).connected?eY.apply(this||vf,d):(this||vf).receiveBuffer.push(d)};al.prototype.ack=function(a){var d=this||vf,k=!1;return function(){if(!k){k=!0;var b=cY(arguments);Jq("sending ack %j",b);d.packet({type:UX(b)?Jn.BINARY_ACK:Jn.ACK,id:a,data:b})}}};al.prototype.onack=function(a){var d=(this||vf).acks[a.id];"function"===typeof d?(Jq("calling ack %s with %j",a.id,a.data),d.apply(this||vf,a.data),delete (this||vf).acks[a.id]):Jq("bad ack %s",
a.id)};al.prototype.onconnect=function(){(this||vf).connected=!0;(this||vf).disconnected=!1;this.emit("connect");this.emitBuffered()};al.prototype.emitBuffered=function(){var a;for(a=0;a<(this||vf).receiveBuffer.length;a++)eY.apply(this||vf,(this||vf).receiveBuffer[a]);(this||vf).receiveBuffer=[];for(a=0;a<(this||vf).sendBuffer.length;a++)this.packet((this||vf).sendBuffer[a]);(this||vf).sendBuffer=[]};al.prototype.ondisconnect=function(){Jq("server disconnect (%s)",(this||vf).nsp);this.destroy();
this.onclose("io server disconnect")};al.prototype.destroy=function(){if((this||vf).subs){for(var a=0;a<(this||vf).subs.length;a++)(this||vf).subs[a].destroy();(this||vf).subs=null}(this||vf).io.destroy(this||vf)};al.prototype.close=al.prototype.disconnect=function(){(this||vf).connected&&(Jq("performing disconnect (%s)",(this||vf).nsp),this.packet({type:Jn.DISCONNECT}));this.destroy();if((this||vf).connected)this.onclose("io client disconnect");return this||vf};al.prototype.compress=function(a){(this||
vf).flags.compress=a;return this||vf};al.prototype.binary=function(a){(this||vf).flags.binary=a;return this||vf};var Kca=dY,zn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Lca={};Lca=yA;yA.prototype.duration=function(){var a=(this||zn).ms*Math.pow((this||zn).factor,(this||zn).attempts++);if((this||zn).jitter){var d=Math.random(),k=Math.floor(d*(this||zn).jitter*a);a=0==(Math.floor(10*d)&1)?a-k:a+k}return Math.min(a,(this||zn).max)|0};yA.prototype.reset=function(){(this||
zn).attempts=0};yA.prototype.setMin=function(a){(this||zn).ms=a};yA.prototype.setMax=function(a){(this||zn).max=a};yA.prototype.setJitter=function(a){(this||zn).jitter=a};var zxa=Lca,Axa={},Mca=kt("socket.io-client:url"),Bxa=Axa=function(a,d){var k=a;d=d||"undefined"!==typeof location&&location;null==a&&(a=d.protocol+"//"+d.host);"string"===typeof a&&("/"===a.charAt(0)&&(a="/"===a.charAt(1)?d.protocol+a:d.host+a),/^(https?|wss?):\/\//.test(a)||(Mca("protocol-less url %s",a),a="undefined"!==typeof d?
d.protocol+"//"+a:"https://"+a),Mca("parse %s",a),k=oca(a));k.port||(/^(http|ws)$/.test(k.protocol)?k.port="80":/^(http|ws)s$/.test(k.protocol)&&(k.port="443"));k.path=k.path||"/";a=-1!==k.host.indexOf(":")?"["+k.host+"]":k.host;k.id=k.protocol+"://"+a+":"+k.port;k.href=k.protocol+"://"+a+(d&&d.port===k.port?"":":"+k.port);return k},me="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Nca={},Tma=rk,mn=kt("socket.io-client:manager"),Sma=zxa,Oca=Object.prototype.hasOwnProperty;
Nca=Bj;Bj.prototype.emitAll=function(){(this||me).emit.apply(this||me,arguments);for(var a in(this||me).nsps)Oca.call((this||me).nsps,a)&&(this||me).nsps[a].emit.apply((this||me).nsps[a],arguments)};Bj.prototype.updateSocketIds=function(){for(var a in(this||me).nsps)Oca.call((this||me).nsps,a)&&((this||me).nsps[a].id=this.generateId(a))};Bj.prototype.generateId=function(a){return("/"===a?"":a+"#")+(this||me).engine.id};by(Bj.prototype);Bj.prototype.reconnection=function(a){if(!arguments.length)return(this||
me)._reconnection;(this||me)._reconnection=!!a;return this||me};Bj.prototype.reconnectionAttempts=function(a){if(!arguments.length)return(this||me)._reconnectionAttempts;(this||me)._reconnectionAttempts=a;return this||me};Bj.prototype.reconnectionDelay=function(a){if(!arguments.length)return(this||me)._reconnectionDelay;(this||me)._reconnectionDelay=a;(this||me).backoff&&(this||me).backoff.setMin(a);return this||me};Bj.prototype.randomizationFactor=function(a){if(!arguments.length)return(this||me)._randomizationFactor;
(this||me)._randomizationFactor=a;(this||me).backoff&&(this||me).backoff.setJitter(a);return this||me};Bj.prototype.reconnectionDelayMax=function(a){if(!arguments.length)return(this||me)._reconnectionDelayMax;(this||me)._reconnectionDelayMax=a;(this||me).backoff&&(this||me).backoff.setMax(a);return this||me};Bj.prototype.timeout=function(a){if(!arguments.length)return(this||me)._timeout;(this||me)._timeout=a;return this||me};Bj.prototype.maybeReconnectOnOpen=function(){!(this||me).reconnecting&&(this||
me)._reconnection&&0===(this||me).backoff.attempts&&this.reconnect()};Bj.prototype.open=Bj.prototype.connect=function(a,d){mn("readyState %s",(this||me).readyState);if(~(this||me).readyState.indexOf("open"))return this||me;mn("opening %s",(this||me).uri);(this||me).engine=uxa((this||me).uri,(this||me).opts);var k=(this||me).engine,b=this||me;(this||me).readyState="opening";(this||me).skipReconnect=!1;var e=Iq(k,"open",function(){b.onopen();a&&a()});d=Iq(k,"error",function(u){mn("connect_error");b.cleanup();
b.readyState="closed";b.emitAll("connect_error",u);if(a){var x=Error("Connection error");x.data=u;a(x)}else b.maybeReconnectOnOpen()});if(!1!==(this||me)._timeout){var l=(this||me)._timeout;mn("connect attempt will timeout after %d",l);0===l&&e.destroy();var p=setTimeout(function(){mn("connect attempt timed out after %d",l);e.destroy();k.close();k.emit("error","timeout");b.emitAll("connect_timeout",l)},l);(this||me).subs.push({destroy:function(){clearTimeout(p)}})}(this||me).subs.push(e);(this||me).subs.push(d);
return this||me};Bj.prototype.onopen=function(){mn("open");this.cleanup();(this||me).readyState="open";this.emit("open");var a=(this||me).engine;(this||me).subs.push(Iq(a,"data",lt(this||me,"ondata")));(this||me).subs.push(Iq(a,"ping",lt(this||me,"onping")));(this||me).subs.push(Iq(a,"pong",lt(this||me,"onpong")));(this||me).subs.push(Iq(a,"error",lt(this||me,"onerror")));(this||me).subs.push(Iq(a,"close",lt(this||me,"onclose")));(this||me).subs.push(Iq((this||me).decoder,"decoded",lt(this||me,"ondecoded")))};
Bj.prototype.onping=function(){(this||me).lastPing=new Date;this.emitAll("ping")};Bj.prototype.onpong=function(){this.emitAll("pong",new Date-(this||me).lastPing)};Bj.prototype.ondata=function(a){(this||me).decoder.add(a)};Bj.prototype.ondecoded=function(a){this.emit("packet",a)};Bj.prototype.onerror=function(a){mn("error",a);this.emitAll("error",a)};Bj.prototype.socket=function(a,d){function k(){~aY(e.connecting,b)||e.connecting.push(b)}var b=(this||me).nsps[a];if(!b){b=new Kca(this||me,a,d);(this||
me).nsps[a]=b;var e=this||me;b.on("connecting",k);b.on("connect",function(){b.id=e.generateId(a)});(this||me).autoConnect&&k()}return b};Bj.prototype.destroy=function(a){a=aY((this||me).connecting,a);~a&&(this||me).connecting.splice(a,1);(this||me).connecting.length||this.close()};Bj.prototype.packet=function(a){mn("writing packet %j",a);var d=this||me;a.query&&0===a.type&&(a.nsp+="?"+a.query);d.encoding?d.packetBuffer.push(a):(d.encoding=!0,(this||me).encoder.encode(a,function(k){for(var b=0;b<k.length;b++)d.engine.write(k[b],
a.options);d.encoding=!1;d.processPacketQueue()}))};Bj.prototype.processPacketQueue=function(){if(0<(this||me).packetBuffer.length&&!(this||me).encoding){var a=(this||me).packetBuffer.shift();this.packet(a)}};Bj.prototype.cleanup=function(){mn("cleanup");for(var a=(this||me).subs.length,d=0;d<a;d++)(this||me).subs.shift().destroy();(this||me).packetBuffer=[];(this||me).encoding=!1;(this||me).lastPing=null;(this||me).decoder.destroy()};Bj.prototype.close=Bj.prototype.disconnect=function(){mn("disconnect");
(this||me).skipReconnect=!0;(this||me).reconnecting=!1;"opening"===(this||me).readyState&&this.cleanup();(this||me).backoff.reset();(this||me).readyState="closed";(this||me).engine&&(this||me).engine.close()};Bj.prototype.onclose=function(a){mn("onclose");this.cleanup();(this||me).backoff.reset();(this||me).readyState="closed";this.emit("close",a);(this||me)._reconnection&&!(this||me).skipReconnect&&this.reconnect()};Bj.prototype.reconnect=function(){if((this||me).reconnecting||(this||me).skipReconnect)return this||
me;var a=this||me;if((this||me).backoff.attempts>=(this||me)._reconnectionAttempts)mn("reconnect failed"),(this||me).backoff.reset(),this.emitAll("reconnect_failed"),(this||me).reconnecting=!1;else{var d=(this||me).backoff.duration();mn("will wait %dms before reconnect attempt",d);(this||me).reconnecting=!0;var k=setTimeout(function(){a.skipReconnect||(mn("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(b){b?
(mn("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(mn("reconnect success"),a.onreconnect())}))},d);(this||me).subs.push({destroy:function(){clearTimeout(k)}})}};Bj.prototype.onreconnect=function(){var a=(this||me).backoff.attempts;(this||me).reconnecting=!1;(this||me).backoff.reset();this.updateSocketIds();this.emitAll("reconnect",a)};var Pca=Nca,$u={},Uma=Bxa,Cxa=rk,m8=Pca,l8=kt("socket.io-client");$u=$u=k8;var eE=$u.managers={};$u.protocol=Cxa.protocol;
$u.connect=k8;$u.Manager=Pca;$u.Socket=Kca;var Dxa=$u,Og=lively.FreezerRuntime.recorderFor("lively.2lively/client.js");Og.determineLocation=function(){return"undefined"!==typeof document&&document.location?System.baseURL||document.location.origin:Og.isNode?System._nodeRequire("os").hostname():System.baseURL};Og.promise=bh;Og.fun=Vl;Og.obj=eg;Og.events=lx;Og.num=zl;Og.L2LConnection=jk;Og.defaultActions=bO;Og.defaultClientActions=cO;Og.isNode="undefined"!==typeof System?System.get("@system-env").node:
"undefined"!==typeof Og.process&&Og.process.env;Og._ioClient=Dxa;Og.resource=hd;Og.ioClient=Og.ioClient||void 0;Og.isNode?(Og.require=System._nodeRequire("module")._load,Og.ioClient=Og.require("socket.io-client")):Og.ioClient=Og._ioClient;Og.urlHelper={isRoot:function(a){return"/"===Og.urlHelper.path(a)},root:function(a){return Og.urlHelper.isRoot(a)?a:a.slice(0,-Og.urlHelper.path(a).length)+"/"},path:function(){var a=/^[a-z0-9-_\.]+:/,d=/^\/\/[^\/]+/;return function(k){k=k.replace(a,"").replace(d,
"");return""===k?"/":k}}(),join:function(a,d){a.endsWith("/")&&(a=a.slice(0,-1));d.startsWith("/")&&(d=d.slice(1));return a+"/"+d}};var Vj=function(a,d,k,b){var e=Og.L2LConnection.call(this)||this;Og.events.makeEmitter(e);e.info=b;e.origin=a;e.path=d;e.namespace=k.replace(/^\/?/,"/");e.trackerId=null;e._socketioClient=null;e._reconnectState={closed:!1,autoReconnect:!0,isReconnecting:!1,isReconnectingViaSocketio:!1,registerAttempt:0,registerProcess:null,isOpening:!1};Object.keys(Og.defaultActions).forEach(function(l){return e.addService(l,
Og.defaultActions[l])});Object.keys(Og.defaultClientActions).forEach(function(l){return e.addService(l,Og.defaultClientActions[l])});return e};$jscomp.inherits(Vj,Og.L2LConnection);Vj.clientKey=function(a,d,k){a=a.replace(/\/$/,"");d=d.replace(/^\//,"");k=k.replace(/^\//,"");return a+"-"+d+"-"+k};Vj.forLivelyInBrowser=function(a){var d=!!a;a=Object.assign({type:"lively.morphic browser"},a);var k=this.default();if(!k)return Og.L2LClient.ensure({url:Og.resource(Og.determineLocation()).join("/lively-socket.io").url,
namespace:"l2l",info:a});d&&!Og.obj.equals(k.info,a)&&k.isRegistered()&&(k.info=a,k.unregister().then(function(){return k.register()}).catch(function(b){return console.error("l2l re-register on info change errored: "+b)}));return k};Vj.default=function(){var a=Og.L2LClient.clients.keys().next().value;return Og.L2LClient.clients.get(a)};Vj.create=function(a){var d=a=void 0===a?{}:a;a=void 0===d.debug?!1:d.debug;var k=d.url,b=d.namespace,e=void 0===d.autoOpen?!0:d.autoOpen;d=void 0===d.info?{}:d.info;
if(!k)throw Error("L2LClient needs server url!");var l=Og.urlHelper.root(k).replace(/\/+$/,"");k=Og.urlHelper.path(k);b=new this(l,k,b||"",d);e&&b.register();b.debug=a;return b};Vj.ensure=function(a){var d=a=void 0===a?{}:a,k=d.url;d=d.namespace;if(!k)throw Error("L2LClient needs server url!");var b=Og.urlHelper.root(k).replace(/\/+$/,""),e=Og.urlHelper.path(k);b=this.clientKey(b,e,d||"");(e=this.clients.get(b))||this.clients.set(b,e=this.create(Object.assign({},a,{url:k,namespace:d})));return e};
Vj.prototype.isOnline=function(){return this.socket&&this.socket.connected};Vj.prototype.isRegistered=function(){return this.isOnline()&&!!this.trackerId};Vj.prototype.open=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return a.isOnline()||a._reconnectState.isOpening?e.return(a):e.yield(a.close(),2);a._reconnectState.closed=!1;d=Og.urlHelper.join(a.origin,a.namespace);k={path:a.path,transports:["websocket","polling"]};b=a._socketioClient=
Og.ioClient(d,k);a.debug&&console.log("["+a+"] connecting");b.on("error",function(l){a._reconnectState.isOpening=!1;a.debug&&console.log("["+a+"] errored: "+l)});b.on("close",function(l){return a.debug&&console.log("["+a+"] closed: "+l)});b.on("reconnect_failed",function(){return a.debug&&console.log("["+a+"] could not reconnect")});b.on("reconnect_error",function(l){return a.debug&&console.log("["+a+"] reconnect error "+l)});b.on("connect",function(){a.debug&&console.log("["+a+"] connected");a.emit("connected",
a);a._reconnectState.isOpening=!1;a._reconnectState.isReconnecting=!1;a._reconnectState.isReconnectingViaSocketio=!1});b.on("disconnect",function(){a._reconnectState.isOpening=!1;a.debug&&console.log("["+a+"] disconnected");a.emit("disconnected",a);a.trackerId?("tracker"!==a.trackerId&&(a.renameTarget(a.trackerId,"tracker"),a.trackerId=null),a._reconnectState.closed?a.debug&&console.log("["+a+"] won't reconnect b/c client is marked as closed"):a._reconnectState.autoReconnect?(a._reconnectState.isReconnecting=
!0,setTimeout(function(){a._reconnectState.closed?a.debug&&console.log("["+a+"] won't reconnect b/c client is marked as closed 2"):a._reconnectState.isReconnectingViaSocketio?a.debug&&console.log("["+a+"] won't reconnect again, client already reconnecting"):(a.debug&&console.log("["+a+"] initiating reconnection to tracker"),a.register())},20)):a.debug&&console.log("["+a+"] won't reconnect b/c client has reconnection disabled")):(a.debug&&console.log("["+a+"] disconnect: don't have a tracker id, won't try reconnect"),
a.trackerId="tracker")});b.on("reconnecting",function(){a.debug&&console.log("["+a+"] reconnecting",a._reconnectState);a.emit("reconnecting",a);a._reconnectState.closed?(a._reconnectState.isReconnecting=!1,a._reconnectState.isReconnectingViaSocketio=!1,b.close(),a.close()):(a._reconnectState.isReconnecting=!0,a._reconnectState.isReconnectingViaSocketio=!0)});b.on("reconnect",function(){a.debug&&console.log("["+a+"] reconnected");a._reconnectState.isReconnecting=!1;a._reconnectState.isReconnectingViaSocketio=
!1;a.register();if(a.onReconnect&&"function"===typeof a.onReconnect)a.onReconnect()});a.installEventToMessageTranslator(b);a._reconnectState.isOpening=!0;return e.return((new Promise(function(l,p){b.once("error",p);b.once("connect",l)})).then(function(){return a}))})};Vj.prototype.onReconnect=function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){a=(new Date).toTimeString();console.log("Reconnected at "+a);d.jumpToEnd()})};Vj.prototype.close=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress){a._reconnectState.closed=!0;if(d=a.socket)d.removeAllListeners("reconnect"),d.removeAllListeners("reconnecting"),d.removeAllListeners("disconnect"),d.removeAllListeners("connect"),d.removeAllListeners("reconnect_error"),d.removeAllListeners("reconnect_failed"),d.removeAllListeners("close"),d.removeAllListeners("error"),d.close();a.debug&&console.log("["+a+"] closing...");return a.isRegistered()?b.yield(a.unregister(),2):b.jumpTo(2)}return a.isOnline()||a.socket?d&&!d.connected?(a.debug&&
console.log("["+a+"] socket not connected, considering client closed"),b.return(a)):b.return(Promise.race([Og.promise.delay(2E3).then(function(){return d.removeAllListeners("disconnect")}),new Promise(function(e){return d.once("disconnect",e)})]).then(function(){a.debug&&console.log("["+a+"] closed");return a})):(a.debug&&(k=a.isOnline()?"no socket":"not online",a.debug&&console.log("["+a+"] cannot close: "+k)),b.return(a))})};Vj.prototype.remove=function(){var a=this.constructor.clientKey(this.origin,
this.path,this.namespace);this.constructor.clients.delete(a);return this.close()};Vj.prototype.register=function(){var a=this,d,k,b,e,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:if(a.isRegistered())return G.return();if(a._reconnectState.closed)return a.debug&&console.log("["+a+"] not registering this b/c closed"),a._reconnectState.registerAttempt=0,G.return();if(a._reconnectState.registerProcess)return a.debug&&console.log("["+a+"] not registering this b/c register process exists"),
G.return();G.setCatchFinallyBlocks(2);if(a.isOnline()){G.jumpTo(4);break}return G.yield(a.open(),4);case 4:return a.debug&&console.log("["+a+"] register"),G.yield(a.sendToAndWait("tracker","register",Object.assign({userName:"unknown",type:"l2l "+(Og.isNode?"node":"browser"),location:Og.determineLocation()},a.info)),6);case 6:d=G.yieldResult;if(!d.data)throw k=Error("Register answer is empty!"),a.emit("error",k),k;if(d.data.isError)throw b=Error(d.data.error),a.emit("error",b),b;a._reconnectState.registerAttempt=
0;e=d;l=e.data;p=l.trackerId;u=l.messageNumber;a.trackerId=p;a._incomingOrderNumberingBySenders.set(p,u||0);a.emit("registered",{trackerId:p});if(a.onReconnect&&"function"===typeof a.onReconnect)a.onReconnect();G.leaveTryBlock(0);break;case 2:x=G.enterCatchBlock(),console.error("Error in register request of "+a+": "+x),z=a._reconnectState.registerAttempt++,E=Og.num.backoff(z,4,3E5),a._reconnectState.registerProcess=setTimeout(function(){a._reconnectState.registerProcess=null;a.register()},E),G.jumpToEnd()}})};
Vj.prototype.unregister=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:if(!a.isRegistered())return k.return();a.debug&&console.log("["+a+"] unregister");d=a.trackerId;k.setCatchFinallyBlocks(2);return k.yield(a.sendToAndWait(a.trackerId,"unregister",{}),4);case 4:k.leaveTryBlock(3);break;case 2:k.enterCatchBlock();case 3:a.renameTarget(d,"tracker"),a.trackerId=null,a.emit("unregistered",a),k.jumpToEnd()}})};Vj.prototype.whenRegistered=
function(a){var d=this;return Og.promise.waitFor(a,function(){return d.isRegistered()}).catch(function(k){return Promise.reject(/timeout/i.test(String(k))?Error("Timeout in "+d+".whenRegistered"):k)})};Vj.prototype.send=function(a,d){var k=this,b=$jscomp.makeIterator(this.prepareSend(a,d));a=b.next().value;d=b.next().value;this.whenOnline().then(function(){var e=k.socket,l=a,p=l.action;l=l.target;if(!e)throw Error("Trying to send message "+p+" to "+l+" but cannot find a connection to it!");"function"===
typeof d?e.emit(p,a,d):e.emit(p,a)})};Vj.prototype.joinRoom=function(a){var d=this;return this.whenOnline().then(function(){return d.sendToAndWait(d.trackerId,"[broadcast] join room",{room:a})})};Vj.prototype.leaveRoom=function(a){var d=this;return this.whenOnline().then(function(){return d.sendToAndWait(d.trackerId,"[broadcast] leave room",{room:a})})};Vj.prototype.broadcast=function(a,d,k,b,e){var l=this,p={action:d,room:a,broadcast:k};if(void 0===b?0:b)p.isSystemBroadcast=!0;if(void 0===e?0:e)p.isMultiServerBroadcast=
!0;return this.whenOnline().then(function(){return l.sendToAndWait(l.trackerId,"[broadcast] send",p)})};Vj.prototype.listRoomMembers=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(d.sendToAndWait(d.trackerId,"[broadcast] list room members",{room:a}),2);k=e.yieldResult;b=k.data;return e.return(b)})};Vj.prototype.joinedRooms=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(a.sendToAndWait(a.trackerId,
"[broadcast] my rooms",{}),2);d=b.yieldResult;k=d.data;return b.return(k)})};Vj.prototype.listRooms=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(a.sendToAndWait(a.trackerId,"[broadcast] all rooms",{}),2);d=b.yieldResult;k=d.data;return b.return(k)})};Vj.prototype.listPeers=function(a){a=void 0===a?!1:a;var d=this,k,b,e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return k=d,b=
k._peersCached,e=Date.now(),!a&&b&&1E3>e-b.timestamp?x.return(d._peersCached.sessions):d.isOnline()?x.yield(d.sendToAndWait(d.trackerId,"getClients",{}),2):x.return([]);l=x.yieldResult;p=l.data;u=p.map(function(z){var E=$jscomp.makeIterator(z);z=E.next().value;var G=E.next().value,J=G.info||{};E=J.userRealm;var K=J.userToken,T=J.l2lUserToken,P=J.location,da=J.type;J=J.world;z=Object.assign({},Og.obj.dissoc(G,["info"]),{id:z,world:J,location:P,type:da});(K=K||T)&&"null"!==K&&(lively.user?z.user=lively.user.ClientUser.fromToken(K,
E):(z.userToken=K,z.userRealm=E));return z});d._peersCached={timestamp:e,sessions:u};return x.return(u)})};Vj.prototype.toString=function(){var a=this.origin,d=this.path,k=this.namespace,b=this.id,e=this.isOnline()?this.isRegistered()?"registered":"unregistered":"disconnected";return"L2LClient("+(b||"").slice(0,5)+" "+a+d+" - "+k+" "+e+")"};$jscomp.global.Object.defineProperties(Vj.prototype,{socket:{configurable:!0,enumerable:!0,get:function(){return this._socketioClient}},socketId:{configurable:!0,
enumerable:!0,get:function(){return this.socket?this.socket.id:null}}});$jscomp.global.Object.defineProperties(Vj,{clients:{configurable:!0,enumerable:!0,get:function(){return this._clients||(this._clients=new Map)}}});Og.L2LClient=Vj;Og.default=Vj;var Qca=Object.freeze({__proto__:null,"default":Vj});Ma("bU",Qca);var cy=lively.FreezerRuntime.recorderFor("lively.shell/command-interface.js");cy.promise=bh;cy.events=lx;var So=function(){this._stderr=this._stdout="";this.exitCode=void 0;this.commandString=
"";this.process=null;this._whenDone=cy.promise.deferred();this._whenStarted=cy.promise.deferred();this.startTime=0;this.lastSignal=null;cy.events.makeEmitter(this)};So.findCommand=function(a){return this.commands.find(function(d){return d.pid===a})};So.prototype.isRunning=function(){return this.process&&void 0===this.exitCode};So.prototype.isDone=function(){return void 0!=this.exitCode};So.prototype.whenStarted=function(){return this._whenStarted.promise};So.prototype.whenDone=function(){return this._whenDone.promise};
So.prototype.spawn=function(a){throw Error("not yet implemented");};So.prototype.kill=function(a){this.lastSignal=void 0===a?"KILL":a};So.prototype.toString=function(){return this.constructor.name+"("+this.commandString+", "+this.status+")"};$jscomp.global.Object.defineProperties(So.prototype,{isShellCommand:{configurable:!0,enumerable:!0,get:function(){return!0}},status:{configurable:!0,enumerable:!0,get:function(){return this.process?void 0===this.exitCode?"running, pid "+this.pid:"exited "+this.exitCode+
", pid "+this.pid:"not started"}},pid:{configurable:!0,enumerable:!0,get:function(){return this.process?this.process.pid:null}},output:{configurable:!0,enumerable:!0,get:function(){return this.stdout+(this.stderr?"\n"+this.stderr:"")}},stdout:{configurable:!0,enumerable:!0,get:function(){return this._stdout}},stderr:{configurable:!0,enumerable:!0,get:function(){return this._stderr}}});$jscomp.global.Object.defineProperties(So,{commands:{configurable:!0,enumerable:!0,get:function(){return this._commands||
(this._commands=[])}}});cy.CommandInterface=So;cy.default=So;var Eg=lively.FreezerRuntime.recorderFor("lively.shell/client-command.js");Eg.runCommand=ix;Eg.defaultDirectory=fE;Eg.env=gE;Eg.readFile=jL;Eg.writeFile=kL;Eg.CommandInterface=So;Eg.promise=bh;Eg.arr=Gf;Eg.obj=eg;Eg.signal=hm;Eg.debug=!1;Eg.runCommand=ix;Eg.runCommand=ix;Eg.dirCache={};Eg.defaultDirectory=fE;Eg.defaultDirectory=fE;Eg.env=gE;Eg.env=gE;Eg.readFile=jL;Eg.readFile=jL;Eg.writeFile=kL;Eg.writeFile=kL;var Op=function(a){var d=
Eg.CommandInterface.call(this)||this;d.debug=Eg.debug;d.l2lClient=a;return d};$jscomp.inherits(Op,Eg.CommandInterface);Op.installLively2LivelyServices=function(a){Object.keys(Eg.L2LServices).forEach(function(d){return a.addService(d,function(k,b,e){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(Eg.L2LServices[d](k,b,e))})})})};Op.prototype.envForCommand=function(a){var d=this.l2lClient,k=d.id,b=d.origin,e=d.path;d=d.namespace;var l=a||{};a=l.env;l=l.owner;a=a||{};l&&
(a.LIVELY_COMMAND_OWNER=l);return Object.assign({ASKPASS_SESSIONID:k,L2L_EDITOR_SESSIONID:k,L2L_SESSIONTRACKER_SERVER:b,L2L_SESSIONTRACKER_PATH:e,L2L_SESSIONTRACKER_NS:d},a)};Op.prototype.spawn=function(a){a=void 0===a?{command:null,env:{},cwd:null,stdin:null}:a;var d=this,k,b,e,l,p,u,x,z,E,G,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(K){if(1==K.nextAddress)return k=d,b=k.l2lClient,e=a,l=e.command,p=e.env,u=e.cwd,x=e.stdin,d.startTime=new Date,p=d.envForCommand(a),d.debug&&console.log(d+
" spawning "+l),d.debug&&d.whenStarted().then(function(){return console.log(d+" started")}),d.debug&&d.whenDone().then(function(){return console.log(d+" exited")}),Eg.arr.pushIfNotIncluded(d.constructor.commands,d),d.commandString=Array.isArray(l)?l.join(""):l,K.yield(b.sendToAndWait(b.trackerId,"lively.shell.spawn",{command:l,env:p,cwd:u,stdin:x},{ackTimeout:3E4}),2);z=K.yieldResult;E=z.data;G=E.error;J=E.pid;if(G)throw Eg.debug&&console.error("["+d+"] error at start: "+G),d.process={error:G},d.exitCode=
1,Eg.signal(d,"error",G),Error(G);d.process={pid:J};Eg.debug&&console.log("["+d+"] got pid "+J);Eg.signal(d,"pid",J);d._whenStarted.resolve();return K.return(d)})};Op.prototype.writeToStdin=function(a){var d=this,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(!d.isRunning())return l.return();k=d;b=k.l2lClient;e=k.pid;return l.yield(b.sendToAndWait(b.trackerId,"lively.shell.writeToStdin",{pid:e,stdin:String(a)}),0)})};Op.prototype.kill=function(a){a=void 0===a?"KILL":a;var d=
this,k,b,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress){if(!d.isRunning())return z.return();Eg.debug&&console.log(d+" signaling "+a);d.lastSignal=a;k=d;b=k.pid;e=k.l2lClient;return z.yield(e.sendToAndWait(e.trackerId,"lively.shell.kill",{pid:b}),2)}l=z.yieldResult;p=l.data;u=p.status;x=p.error;Eg.debug&&console.log(d+" kill send: "+(x||u));if(x)throw Error(x);return z.return(d.whenDone())})};Op.prototype.onOutput=function(a){var d=a.stdout;a=a.stderr;
d&&(this._stdout+=d,Eg.signal(this,"stdout",d),this.emit("stdout",d));a&&(this._stderr+=a,Eg.signal(this,"stderr",a),this.emit("stderr",a))};Op.prototype.onClose=function(a){Eg.arr.remove(this.constructor.commands,this);this.exitCode=a;this.emit("close",a);Eg.signal(this,"close",a);this._whenDone.resolve(this)};Op.prototype.onError=function(a){Eg.arr.remove(this.constructor.commands,this);this._stderr+=a.stack;this.exitCode=1;this.emit("error",a.stack);Eg.signal(this,"error",a.stack);this._whenDone.reject(a)};
Eg.ClientCommand=Op;Eg.L2LServices={"lively.shell.onOutput":function(a,d,k,b){a=d.data;var e=a.pid,l=a.stdout,p=a.stderr,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:return Eg.debug&&console.log("[lively.shell] client received lively.shell.onOutput for command "+e),x.setCatchFinallyBlocks(2),x.yield(Eg.promise.waitFor(1E3,function(){return Eg.ClientCommand.findCommand(e)}),4);case 4:u=x.yieldResult;x.leaveTryBlock(3);break;case 2:return x.enterCatchBlock(),
console.warn("[lively.shell] received output for command "+e+" but it isn't registered!'"),x.return();case 3:u.onOutput({stdout:l,stderr:p}),x.jumpToEnd()}})},"lively.shell.onExit":function(a,d,k,b){a=d.data;var e=a.pid,l=a.code,p=a.error,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:return Eg.debug&&console.log("[lively.shell] client received lively.shell.onExit for command "+e),x.setCatchFinallyBlocks(2),x.yield(Eg.promise.waitFor(1E3,function(){return Eg.ClientCommand.findCommand(e)}),
4);case 4:u=x.yieldResult;x.leaveTryBlock(3);break;case 2:return x.enterCatchBlock(),console.warn("[lively.shell] received exit message for command "+e+" but it isn't registered!'"),x.return();case 3:if(p)"string"===typeof p&&(p=Error(p)),u.onError(p);else u.onClose(l);x.jumpToEnd()}})}};Eg.default=Op;var Exa=Object.freeze({__proto__:null,runCommand:ix,defaultDirectory:fE,env:gE,readFile:jL,writeFile:kL,"default":Op}),Mi=lively.FreezerRuntime.recorderFor("lively.ide/shell/shell-interface.js");Mi.runCommand=
lL;Mi.defaultDirectory=hE;Mi.env=DU;Mi.readFile=function(a,d){d=(d=void 0===d?{}:d)||{};var k=Mi.runCommand('cat "'+a+'"',d);return k.whenDone().then(function(){return k.output})};Mi.writeFile=function(a,d,k){"string"===typeof d&&(d={content:d});d=d||{};d.content=d.content||"";"win32"!==this.PLATFORM&&(a='"'+a+'"');a=this.run("tee "+a,{stdin:d.content,cwd:d.cwd});d.onEnd&&lively.bindings.connect(a,"end",d,"onEnd");k&&lively.bindings.connect(a,"end",{thenDo:k},"thenDo");return a};Mi.parseCommand=EU;
Mi.doGrep=FU;Mi.L2LClient=Vj;Mi._runCommand=ix;Mi._env=gE;Mi._defaultDirectory=fE;Mi.string=Dh;Mi.defaultConnection={url:document.location.origin+"/lively-socket.io",namespace:"l2l"};Mi.runCommand=lL;Mi.runCommand=lL;Mi.defaultDirectory=hE;Mi.defaultDirectory=hE;Mi.env=DU;Mi.env=DU;Mi.parseCommand=EU;Mi.parseCommand=EU;Mi.defaultGrepExclusions=".svn .git node_modules dist .module_cache lively.next-node_modules".split(" ");Mi.doGrep=FU;Mi.doGrep=FU;var wi=lively.FreezerRuntime.recorderFor("lively.shell/client-fs-helper.js");
wi.fileInfo=mL;wi.fileInfoCommandString=function(a,d){var k=d=void 0===d?{}:d;d=k.rootDirectory;k=k.platform;d=d||".";var b="win32"===k?"\\":"/";"win32"===k||d.endsWith(b)||(d+=b);return"win32"===k?"cd "+d+' && ls -lLd --time-style=locale "'+a+'"':'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && env TZ=GMT LANG=en_US.UTF-8 cd '+(d+' && ls -lLd "$timeformat" "'+a+'"')};wi.parseDirectoryListFromLs=GU;wi.findFiles=nL;wi.findFilesCommandString=
function(a,d){var k=d=void 0===d?{}:d,b=k.rootDirectory,e=k.exclude,l=k.depth;k=k.platform;b=b||".";e=e||"-iname "+wi.defaultExcludes.map(wi.string.print).join(" -o -iname ");var p="win32"===k?"\\":"/";"win32"===k||b.endsWith(p)||(b+=p);a=wi.string.format('%s "%s"',d.re?"-iregex":d.matchPath?"-ipath":"-iname",a);l="number"===typeof l?" -maxdepth "+l:"";return"win32"===k?wi.string.format("find %s %s ( %s ) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd --time-style=locale {}",b,d.re?"-E ":"",e.replace(/"/g,
""),a.replace(/"/g,""),l):'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && '+wi.string.format('env TZ=GMT LANG=en_US.UTF-8 find %s %s \\( %s \\) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd "$timeformat" "{}"',b,d.re?"-E ":"",e,a,l)};wi.convertDirectoryUploadEntriesToFileInfos=HU;wi.runCommand=ix;wi.string=Dh;wi.promise=bh;wi.arr=Gf;wi.fileInfo=mL;wi.fileInfo=mL;wi.parseDirectoryListFromLs=GU;wi.parseDirectoryListFromLs=
GU;var lO=function(a){this.rootDirectory=a;this.fileName=this.path="";this.isDirectory=!1;this.lastModified=null;this.mode="";this.isLink=!1;this.linkCount=0;this.group=this.user="";this.size=0;this.rootDirectory=null};lO.prototype.readFromDirectoryListLine=function(a){var d=this;if(!a.trim().length)return null;var k=a;this.reader.forEach(function(b){return k=b(k,d)});return this};lO.prototype.toString=function(){return this.path};$jscomp.global.Object.defineProperties(lO.prototype,{reader:{configurable:!0,
enumerable:!0,get:function(){return[function(a,d){var k=a.indexOf(" ");d.mode=a.slice(0,k);d.isDirectory="d"===d.mode[0];return a.slice(k+1).trim()},function(a,d){var k=a.indexOf(" ");d.linkCount=Number(a.slice(0,k));return a.slice(k+1).trim()},function(a,d){var k=a.indexOf(" ");d.user=a.slice(0,k);return a.slice(k+1).trim()},function(a,d){var k=wi.string.peekRight(a,0,/\s+[0-9]/);d.group=a.slice(0,k).trim();return a.slice(k).trim()},function(a,d){var k=a.indexOf(" ");d.size=Number(a.slice(0,k));
return a.slice(k+1).trim()},function(a,d){var k=wi.string.reMatches(a,/[^s]+\s+[0-9:\s]+/);if(!k||!k[0])return a;d.lastModified=new Date(k[0].match+" GMT");return a.slice(k[0].end).trim()},function(a,d){var k=(a=a.replace(/^\.\/+/g,"").replace(/\/\//g,"/"))&&a.split(" -> "),b=""===a?!1:a&&2===k.length,e=(k=b?k[0]:a)&&0===k.indexOf(d.rootDirectory)?k.slice(d.rootDirectory.length):k;d.fileName=""===a?".":e;d.path=k;d.isLink=b;return e}]}}});wi.FileInfo=lO;wi.findFilesProcesses={};wi.findFiles=nL;wi.findFiles=
nL;wi.defaultExcludes=[".svn",".git","node_modules",".module_cache"];wi.convertDirectoryUploadEntriesToFileInfos=HU;wi.convertDirectoryUploadEntriesToFileInfos=HU;var yj=lively.FreezerRuntime.recorderFor("lively.shell/client-resource.js");yj.Resource=Cg;yj.runCommand=ix;yj.fileInfo=mL;yj.findFiles=nL;yj.string=Dh;yj.promise=bh;yj.arr=Gf;yj.obj=eg;var nn=function(a,d,k){k=void 0===k?{}:k;a=yj.Resource.call(this,a)||this;a.options=Object.assign({},k,{l2lClient:d||a.constructor.defaultL2lClient});return a};
$jscomp.inherits(nn,yj.Resource);nn.prototype.newResource=function(a){return new this.constructor(a,this.options.l2lClient,this.options)};nn.prototype.read=function(){var a=this,d=yj.runCommand('cat "'+this.url+'"',this.options);return d.whenDone().then(function(){if(d.exitCode)throw Error("Read "+a.url+" failed: "+d.stderr);return d.output})};nn.prototype.write=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return a?e.yield(yj.runCommand('touch "'+
d.url+'" && tee "'+d.url+'"',Object.assign({stdin:String(a)},d.options)).whenDone(),4):e.yield(yj.runCommand('echo -n > "'+d.url+'"',Object.assign({},d.options)).whenDone(),5);case 4:k=e.yieldResult;e.jumpTo(3);break;case 5:k=e.yieldResult;case 3:b=k;if(b.exitCode)throw Error("Write "+d.url+" failed: "+b.stderr);return e.return(d)}})};nn.prototype.mkdir=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(yj.runCommand('mkdir -p "'+
a.url+'"',a.options).whenDone(),2);d=k.yieldResult;if(d.exitCode)throw Error(a+" cannot create directory: "+d.stderr);return k.return(a)})};nn.prototype.exists=function(){var a=yj.runCommand('test -d "'+this.url+'" || test -f "'+this.url+'"',this.options);return a.whenDone().then(function(){return 0===a.exitCode})};nn.prototype.remove=function(){var a=this,d=yj.runCommand('rm -rf "'+this.url+'"',this.options);return d.whenDone().then(function(){if(d.exitCode)throw Error("Remove of "+a.url+" failed: "+
d.stderr);return a})};nn.prototype.gzip=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){k=yj.runCommand('gzip > "'+d.url+'"',Object.assign({stdin:String(a)},d.options));return b.return(k.whenDone().then(function(){if(k.exitCode)throw Error("Gzip compression of "+d.url+" failed: "+k.stderr);return d}))})};nn.prototype.brotli=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){k=yj.runCommand('brotli > "'+d.url+'"',Object.assign({stdin:String(a)},
d.options));return b.return(k.whenDone().then(function(){if(k.exitCode)throw Error("Brotli compression of "+d.url+" failed: "+k.stderr);return d}))})};nn.prototype.readProperties=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(yj.fileInfo(a.url,a.options),2);d=k.yieldResult;a.assignProperties(yj.obj.dissoc(d,["fileName","path","rootDirectory"]));return k.return(a)})};nn.prototype.dirList=function(a,d){a=void 0===a?1:a;d=void 0===
d?{}:d;var k=this,b,e,l,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return b=d,e=b.exclude,Array.isArray(e)&&(e="-iname "+e.map(yj.string.print).join(" -o -iname ")),l=k,p=l.url,u=l.options,x=u.l2lClient,E.yield(yj.findFiles("*",{exclude:e,depth:a,rootDirectory:p,l2lClient:x}),2);z=E.yieldResult;z[0].path.replace(/\/$/,"")===k.url.replace(/\/$/,"")&&z.shift();return E.return(z.map(function(G){var J=G.path;G.isDirectory&&(J=J.replace(/\/?$/,"/"));J=new k.constructor(J,
x,k.options);J.assignProperties(yj.obj.dissoc(G,["fileName","path","rootDirectory"]));return J}))})};$jscomp.global.Object.defineProperties(nn,{defaultL2lClient:{configurable:!0,enumerable:!0,get:function(){return this._defaultL2lClient||yj._defaultL2LClient},set:function(a){this._defaultL2lClient=yj._defaultL2LClient=a}}});yj.ShellClientResource=nn;yj._defaultL2LClient=yj._defaultL2LClient||void 0;var mO={name:"shell-client",matches:function(a){return a.startsWith("/")||a.match(/[a-z]:\\/i)},resourceClass:yj.ShellClientResource};
yj.resourceExtension=mO;yj.resourceExtension=mO;yj.resourceExtension=mO;yj.default=nn;var Fxa=Object.freeze({__proto__:null,"default":nn,resourceExtension:mO}),Of=lively.FreezerRuntime.recorderFor("lively.morphic/world-loading.js");Of.loadWorldFromURL=oL;Of.loadWorldFromCommit=pL;Of.loadWorldFromDB=qL;Of.loadWorld=rL;Of.loadLocalConfig=function(){var a,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:return a=lively.modules.module("localconfig.js"),k.setCatchFinallyBlocks(2),
k.yield(Of.resource(a.id).exists(),4);case 4:if(!k.yieldResult){k.jumpTo(5);break}return k.yield(a.reload({resetEnv:!1,reloadDeps:!1}),5);case 5:k.leaveTryBlock(0);break;case 2:d=k.enterCatchBlock(),console.error("Error loading localconfig:",d),"undefined"!==typeof $world&&$world.showError("Error loading localconfig.js: "+d),k.jumpToEnd()}})};Of.setupLivelyShell=function(a){var d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return u.yield(lively.modules.importPackage("lively.shell"),
2);case 2:return u.yield(System.import("lively.shell/client-command.js"),3);case 3:return d=u.yieldResult,k=d.default,u.yield(System.import("lively.shell/client-resource.js"),4);case 4:b=u.yieldResult,e=b.resourceExtension,l=a,p=l.l2lClient,k.installLively2LivelyServices(p),e.resourceClass.defaultL2lClient=p,Of.registerResourceExension(e),console.log("[lively] lively.shell setup"),u.jumpToEnd()}})};Of.setupLively2Lively=function(a){var d,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:return d=
a.getCurrentUser(),k={world:a.name},d&&(k.userToken=d.token,k.userRealm=d.realm),p.yield(lively.modules.importPackage("lively.2lively"),2);case 2:return p.yield(System.import("lively.2lively/client.js"),3);case 3:return b=p.yieldResult,e=b.default,p.yield(e.forLivelyInBrowser(k),4);case 4:return l=p.yieldResult,console.log("[lively] lively2lively client created "+l),l._onUserChange?Of.reportWorldLoad(a,d):(l._onUserChange=function(u){l.isOnline()&&u.user&&(u=u.user,l.info=Object.assign({},l.info,
{userToken:u.token,userRealm:u.realm}),l.unregister().then(function(){return l.register()}).then(function(){return console.log("re-registered after user change")}))},Of.subscribe("lively.user/userchanged",l._onUserChange,System),l.once("registered",function(){Of.reportWorldLoad(a,d)}),l.on("registered",function(){var u=a.get("user flap");u&&u.updateNetworkIndicator(l)}),l.on("connected",function(){var u=a.get("user flap");u&&u.updateNetworkIndicator(l)}),l.on("reconnecting",function(){var u=a.get("user flap");
u&&u.updateNetworkIndicator(l)}),l.on("disconnected",function(){var u=a.get("user flap");u&&u.updateNetworkIndicator(l)})),p.return(l)}})};Of.interactivelySaveWorld=zA;Of.reportWorldLoad=function(a,d){d=d?d.name+" ("+(d.token||"").slice(0,5)+")":"---";fetch(Of.joinPath(System.baseURL,"/report-world-load"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:d+" logged in at "+a.name+" ["+window._livelyLoadId+"]"})}).catch(function(k){return console.warn("report-world-load failed: "+
k)})};Of.resource=hd;Of.registerResourceExension=xe;Of.Color=ng;Of.Path=Qh;Of.obj=eg;Of.date=Er;Of.promise=bh;Of.MorphicEnv=wp;Of.createMorphSnapshot=hx;Of.MorphicDB=Yr;Of.ensureCommitInfo=RD;Of.pathForBrowserHistory=Cz;Of.subscribe=KC;Of.emit=ss;Of.defaultDirectory=hE;Of.ShellClientResource=nn;Of.joinPath=ah;Of.reset=YJ;Of.loadWorldFromURL=oL;Of.loadWorldFromURL=oL;Of.loadWorldFromCommit=pL;Of.loadWorldFromCommit=pL;Of.loadWorldFromDB=qL;Of.loadWorldFromDB=qL;Of.loadWorld=rL;Of.loadWorld=rL;Of.interactivelySaveWorld=
zA;Of.interactivelySaveWorld=zA;var Kj=lively.FreezerRuntime.recorderFor("lively.user/client/user.js");Kj.jwtTokenDecode=function(a){a=$jscomp.makeIterator(a.split("."));a.next();var d=a.next().value;a.next();return JSON.parse(atob(d))};Kj.guid=function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};Kj.makeRequest=function(a,d,k,b){b=void 0===b?{}:b;d={method:void 0===d?"GET":d,mode:"cors"};k&&(d.body=
k);d.redirect="follow";d.headers=Object.assign({},b);return fetch(a,d)};Kj.POST=function(a,d){var k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return"string"!==typeof d&&(d=JSON.stringify(d)),l.yield(Kj.makeRequest(a,"POST",d,{}),2);case 2:return k=l.yieldResult,l.setCatchFinallyBlocks(3),l.yield(k.text(),5);case 5:b=l.yieldResult;l.leaveTryBlock(4);break;case 3:l.enterCatchBlock();case 4:if(b&&"application/json"===k.headers.get("content-type"))try{e=
JSON.parse(b)}catch(p){}if(!e)throw Error("Unexpected response: "+b);return l.return(e)}})};Kj.resource=hd;var dy=Ma("q",function(a){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),k=d.hasOwnProperty("User")&&"function"===typeof d.User?d.User:d.User=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.realm=e;this.name=
b;this.roles={};this.createdAt=0;this.token=this.email=null}},{key:"isLoggedIn",value:function(){return!!this.token}},{key:"loginOrRegister",value:function(b,e,l){var p=this,u,x,z,E,G,J,K,T,P,da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fa){if(1==fa.nextAddress)return u=p,x=u.email,z=u.createdAt,E=u.roles,G=u.name,J="register"===b?{password:e,email:x,createdAt:z,roles:E,name:G}:{password:e,name:G},fa.yield(Kj.POST(l+"/"+b,J),2);K=fa.yieldResult;if(K.error)return fa.return(K);T=K;
P=T.token;da=Kj.jwtTokenDecode(P);E=da.roles;z=da.createdAt;x=da.email;Object.assign(p,{roles:E,createdAt:z,email:x,token:P});return fa.return({status:K.status})})}},{key:"verify",value:function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(Kj.POST(b.realm+"/verify",{token:b.token}),2);e=p.yieldResult;l=e.error;return p.return(!l)})}},{key:"login",value:function(b){return this.loginOrRegister("login",b,this.realm)}},{key:"register",
value:function(b){return this.loginOrRegister("register",b,this.realm)}},{key:"checkPassword",value:function(b){var e=this,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress){if(!e.isLoggedIn)throw Error("To check password, user needs to login.");return x.yield(Kj.POST(e.realm+"/check-password",{token:e.token,password:b}),2)}l=x.yieldResult;p=l.error;u=l.status;if(p)throw Error(p);return x.return(u)})}},{key:"modify",value:function(b){var e=this,l,p,u,x,z,E,G,
J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(K){if(1==K.nextAddress)return K.yield(Kj.POST(e.realm+"/modify",{token:e.token,changes:b}),2);l=K.yieldResult;p=l.error;u=l.status;x=l.token;if(p)return K.return({error:p});x&&(z=Kj.jwtTokenDecode(x),E=z.roles,G=z.createdAt,J=z.email,Object.assign(e,{roles:E,createdAt:G,email:J,token:x}));return K.return({status:u})})}},{key:"getDir",value:function(){return Kj.resource(System.baseURL).join("users").join(this.name)}},{key:"toString",value:function(){return"<"+
this.constructor.name+" "+this.name+" "+(this.isLoggedIn()?"":"not ")+"logged in>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"User"}},{key:"guest",get:function(){return Kj.guestUser}},{key:"named",value:function(b,e){var l=b+"-"+e,p=Kj.userMap.get(l);p||(p=new this(b,e),Kj.userMap.set(l,p));return p}},{key:"fromToken",value:function(b,e){var l=Kj.jwtTokenDecode(b),p=l.roles,u=l.createdAt,x=l.email;return Object.assign(this.named(l.name,e),{roles:p,createdAt:u,email:x,token:b})}},
{key:"clearCache",value:function(){Kj.userMap=new Map}}],d,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:1106,end:3681})}(void 0));Kj.User=dy;Kj.User=dy;Kj.User=dy;var ey=function(a){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),k=d.hasOwnProperty("GuestUser")&&
"function"===typeof d.GuestUser?d.GuestUser:d.GuestUser=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"isGuestUser",get:function(){return!0}},{key:"isLoggedIn",value:function(){return!1}},{key:"loginOrRegister",value:function(b,e,l){return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){throw Error("Guest user cannot "+b+"!");})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GuestUser"}}],
d,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:3690,end:3918})}(Kj.User);Kj.GuestUser=ey;Kj.GuestUser=ey;Kj.GuestUser=ey;Kj.userMap=Kj.userMap||new Map;Kj.guestUser=Kj.guestUser||Kj.GuestUser.named("guest-"+Kj.guid(),null);var Kq=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js");
Kq.User=dy;Kq.GuestUser=ey;Kq.emit=ss;var fY=function(a){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js"),k=d.hasOwnProperty("UserRegistry")&&"function"===typeof d.UserRegistry?d.UserRegistry:d.UserRegistry=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"isTrackingGuestUsers",get:function(){return!1}},{key:"hasUserStored",value:function(){try{return!!localStorage["lively.user"]||
!!sessionStorage["lively.user"]}catch(b){return!1}}},{key:"login",value:function(b,e){var l=this,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return b.isGuestUser?x.jumpTo(2):x.yield(b.login(e),3);if(2!=x.nextAddress&&(p=x.yieldResult,u=p.error))throw Error(u);l.saveUserToLocalStorage(b);return x.return(b)})}},{key:"logout",value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){try{e.isTrackingGuestUsers||(delete localStorage["lively.user"],
delete sessionStorage["lively.user"])}catch(p){}b=b&&b.isGuestUser?b:Kq.User.guest;Kq.emit("lively.user/userchanged",{user:b},Date.now(),System);return l.return(b)})}},{key:"register",value:function(b,e){var l=this,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress){if(!b||b.isGuestUser)throw Error("guest users cannot register");return x.yield(b.register(e),2)}p=x.yieldResult;if(u=p.error)throw Error(u);l.saveUserToLocalStorage(b);return x.return(b)})}},{key:"loadUserFromLocalStorage",
value:function(b){try{var e=localStorage["lively.user"]||sessionStorage["lively.user"];if(e)return e=JSON.parse(e),e.isGuest?Kq.GuestUser.named(e.name,null):Kq.User.fromToken(e.token,b)}catch(l){console.warn("Could not read user from localStorage: "+l)}return this.isTrackingGuestUsers?!1:Kq.GuestUser.guest}},{key:"saveUserToLocalStorage",value:function(b){if(!b||!b.isGuestUser&&!b.token)return!1;Kq.emit("lively.user/userchanged",{user:b},Date.now(),System);try{return b.isGuestUser&&!this.isTrackingGuestUsers?
(sessionStorage["lively.user"]=JSON.stringify({isGuest:!0,name:b.name}),delete localStorage["lively.user"]):localStorage["lively.user"]=b.isGuestUser&&this.isTrackingGuestUsers?JSON.stringify({isGuest:!0,name:b.name}):JSON.stringify({token:b.token}),!0}catch(e){return console.warn("Could not save user into local/sessionStorage: "+e),!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"UserRegistry"}},{key:"current",get:function(){return this._current||(this._current=new this)}}],d,
{pathInPackage:function(){return"client/user-registry.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:135,end:2531})}(void 0);fY=Kq.UserRegistry;var nO=Ma("U",fY);Kq.default=fY;var oB=lively.FreezerRuntime.recorderFor("lively.user/index.js");oB.User=dy;oB.ClientUser=dy;oB.GuestUser=ey;oB.GuestUser=ey;oB.default=nO;oB.UserRegistry=
nO;var Gxa=Object.freeze({__proto__:null,ClientUser:dy,GuestUser:ey,UserRegistry:nO}),gg=lively.FreezerRuntime.recorderFor("lively.morphic/world.js");gg.bowser=Fp;gg.Rectangle=Fe;gg.Color=ng;gg.pt=ui;gg.arr=Gf;gg.promise=bh;gg.Path=Qh;gg.obj=eg;gg.signal=hm;gg.config=$l;gg.MorphicEnv=wp;gg.Morph=xk;gg.TooltipViewer=nB;gg.Tooltip=ay;gg.loadWorldFromURL=oL;gg.loadWorldFromDB=qL;gg.loadWorldFromCommit=pL;gg.loadWorld=rL;gg.touchInputDevice=En;gg.UserRegistry=nO;gg.emit=ss;gg.resource=hd;gg.loadMorphFromSnapshot=
xr;var Ss=Ma("aj",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),k=d.hasOwnProperty("World")&&"function"===typeof d.World?d.World:d.World=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){$b._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this._renderer=null;this._tooltipViewer=
new gg.TooltipViewer(this)}},{key:"__deserialize__",value:function(b,e,l,p){$b._get(Object.getPrototypeOf(k.prototype),"__deserialize__",this).call(this,b,e,l,p);this._renderer=null;this._tooltipViewer=new gg.TooltipViewer(this)}},{key:"__additionally_serialize__",value:function(b,e,l,p){$b._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",this).call(this,b,e,l,p);if(b.props.submorphs)for(b=b.props.submorphs.value,e=b.length;e--;)l.refForId(b[e].id).realObj.isHand&&gg.arr.removeAt(b,
e)}},{key:"commands",get:function(){return[].concat($jscomp.arrayFromIterable($b._get(Object.getPrototypeOf(k.prototype),"commands",this)),[{name:"resize to fit window",exec:function(b){var e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:e=function(){b.extent=lively.FreezerRuntime?b.windowBounds().extent():b.windowBounds().union(b.submorphBounds(function(z){return!z.isEpiMorph&&!z.hasFixedPosition})).extent()},l=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==
z.nextAddress)return z.yield(b.whenRendered(),2);delete b._cachedWindowBounds;return z.return(!b.windowBounds().extent().equals(b.extent))})},p=0;case 2:if(!(u=5>p)){x.jumpTo(4);break}return x.yield(l(),5);case 5:u=x.yieldResult;case 4:if(!u){x.jumpTo(3);break}p++;e();x.jumpTo(2);break;case 3:return b.relayout(),x.return(!0)}})}}])}},{key:"isWorld",get:function(){return!0}},{key:"whenReady",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.return(!0)})}},{key:"render",
value:function(b){return b.renderWorld(this)}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",set:function(b){}},{key:"existingHandForPointerId",value:function(b){return this.submorphs.find(function(e){return e instanceof gg.Hand&&e.pointerId===b})}},{key:"layoutHaloForPointerId",value:function(b){}},{key:"haloForPointerId",value:function(b){}},{key:"handForPointerId",value:function(b,e){e=void 0===e?!1:e;var l=this.existingHandForPointerId(b);return l?l:!l&&this.firstHand&&e?(this.firstHand.pointerId=
b,this.firstHand):this.addMorph(new gg.Hand(b),this.submorphs[0])}},{key:"removeHandForPointerId",value:function(b){(b=this.existingHandForPointerId(b))&&1<this.hands.length&&b.remove()}},{key:"world",value:function(){return this}},{key:"makeDirty",value:function(){if(!this._dirty){this._dirty=!0;var b=this.env.renderer;b&&b.renderLater()}}},{key:"hands",get:function(){return gg.arr.sortBy(this.submorphs.filter(function(b){return b.isHand}),function(b){return b.pointerId})}},{key:"firstHand",get:function(){return this.hands[0]}},
{key:"getCurrentUser",value:function(){return gg.UserRegistry.current.loadUserFromLocalStorage(window.AUTH_SERVER_URL||gg.config.users.authServerURL)}},{key:"focusedMorph",get:function(){var b=this.env.eventDispatcher;return(b=b&&b.eventState.focusedMorph)&&b.world()===this?b:this}},{key:"onMouseMove",value:function(b){b.hand&&b.hand.update(b);this._tooltipViewer.mouseMove(b)}},{key:"onHoverOut",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onHoverOut",this).call(this,b);if(b.state.draggedMorph){var e=
b.state;e.dragDelta=(e.draggedMorph.owner||this).getInverseTransform().transformDirection(b.position.subPt(e.lastDragPosition));e.absDragDelta=b.position.subPt(e.clickedOnPosition);b.onAfterDispatch(function(){return e.lastDragPosition=b.position});b.state.draggedMorph.onDrag(b)}}},{key:"onMouseDown",value:function(b){b.state.menu&&b.state.menu.remove();this.onWindowScroll();this._tooltipViewer.mouseDown(b)}},{key:"onMouseUp",value:function(b){b.isCommandKey()&&b.stop();if(b.isAltDown()&&gg.config.altClickDefinesThat){var e=
this.morphsContainingPoint(b.position)[0];setTimeout(function(){return System.global.that=e},100);e.show();b.stop();console.log('Set global "that" to '+e)}}},{key:"onMouseWheel",value:function(b){b.isShiftDown()&&(window.scrollBy(-b.domEvt.wheelDeltaX,-b.domEvt.wheelDeltaY),b.stop())}},{key:"onBeforeUnload",value:function(b){return this.onUnload(b)}},{key:"onUnload",value:function(b){this.submorphs.forEach(function(e){if("function"===typeof e.onWorldUnload)e.onWorldUnload(b)})}},{key:"updateVisibleWindowMorphs",
value:function(){this.withAllSubmorphsDo(function(b){if(b.respondsToVisibleWindow){if("function"!==typeof b.relayout)return b.showError(Error(b+" listed as responding to visible window change, but has no relayout instruction"));b.relayout()}})}},{key:"onWindowScroll",value:function(){var b=this.env.eventDispatcher.keyInputHelper.inputState,e=b.positionChangedTime,l=b.scrollLeftWhenChanged;b=b.scrollTopWhenChanged;var p=document.documentElement;500>Date.now()-e&&!gg.bowser.firefox?(p.scrollLeft=l,
p.scrollTop=b):(this.setProperty("scroll",gg.pt(p.scrollLeft,p.scrollTop)),this._cachedWindowBounds=null,this.updateVisibleWindowMorphs())}},{key:"onWindowResize",value:function(b){var e=this,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return x.yield(e.whenRendered(),2);if(3!=x.nextAddress)return e._cachedWindowBounds=null,"elastic"!==e.resizePolicy?x.jumpTo(3):x.yield(e.execCommand("resize to fit window"),3);e.updateVisibleWindowMorphs();l=$jscomp.makeIterator(e.submorphs);
for(p=l.next();!p.done;p=l.next())if(u=p.value,"function"===typeof u.onWorldResize)u.onWorldResize(b);x.jumpToEnd()})}},{key:"relayCommandExecutionToFocusedMorph",value:function(b){if(!b)return null;var e=this.focusedMorph,l=gg.arr.findAndGet(gg.arr.without([e].concat($jscomp.arrayFromIterable(e.ownerChain())),this),function(p){return gg.arr.findAndGet(p.keyhandlers,function(u){return(u=u.eventCommandLookup(p,b))?{command:u,morph:p}:null})})||{};e=l.command;l=l.morph;return e?l.execCommand(e):null}},
{key:"visibleBounds",value:function(){return this.env.renderer?this.windowBounds().intersection(this.innerBounds()):this.innerBounds()}},{key:"visibleBoundsExcludingTopBar",value:function(){return this.visibleBounds()}},{key:"windowBounds",value:function(b){if(this._cachedWindowBounds)return this._cachedWindowBounds;b=this.env.domEnv.window;var e=1/this.scale;return this._cachedWindowBounds=new gg.Rectangle(b.scrollX*e,b.scrollY*e,(b.innerWidth||this.width)*e,(b.innerHeight||this.height)*e)}},{key:"logError",
value:function(b){console.log(b)}},{key:"relayout",value:function(){}},{key:"defaultMenuItems",value:function(b){return[]}},{key:"serveFileAsDownload",value:function(b,e){var l=void 0===e?{}:e;e=void 0===l.fileName?"file.txt":l.fileName;l=void 0===l.type?"text/plain":l.type;var p=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+=[a-z\-]+)?)?(;base64)?,[a-z0-9!\$&',\(\)\*\+,;=\-\._~:@\/\?%\s]*\s*$/i,u=b instanceof Blob,x=window.document.createElement("a");x.href=gg.obj.isString(b)&&b.match(p)?b:window.URL.createObjectURL(u?
b:new Blob([b],{type:l}));x.download=e;document.body.appendChild(x);x.click();document.body.removeChild(x)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"World"}},{key:"properties",get:function(){return{resizePolicy:{doc:"how the world behaves on window size changes 'elastic': resizes to window extent, 'static': leaves its extent unchanged",defaultValue:"elastic",after:["clipMode"],type:"Enum",values:["static","elastic"],set:function(b){this.setProperty("resizePolicy",b);this.clipMode=
"static"===b?"visible":"hidden";"elastic"==b&&this.execCommand("resize to fit window")}},colorScheme:{derived:!0,get:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}},showsUserFlap:{defaultValue:!0,set:function(b){var e=this,l=gg.resource(document.location.href).query().showsUserFlap;"undefined"!==typeof l&&(b=l);this.setProperty("showsUserFlap",b);System.import("lively.user/morphic/user-ui.js").then(function(p){return p.UserUI[b?"showUserFlap":"hideUserFlap"](e).then(function(){b&&
(e.enableComments=!0)})})}},enableComments:{defaultValue:!0,set:function(b){this.setProperty("enableComments",b);b&&System.import("lively.collab").then(function(e){return e.CommentBrowser.initializeCommentBrowser()})}}}}},{key:"defaultWorld",value:function(){return gg.MorphicEnv.default().world}},{key:"loadWorldFromURL",value:function(b,e,l){e=void 0===e?this.defaultWorld():e;l=void 0===l?{}:l;return gg.loadWorldFromURL(b,e,l)}},{key:"loadWorld",value:function(b,e,l){e=void 0===e?this.defaultWorld():
e;l=void 0===l?{}:l;return gg.loadWorld(b,e,l)}},{key:"loadFromCommit",value:function(b,e,l){e=void 0===e?this.defaultWorld():e;l=void 0===l?{}:l;return gg.loadWorldFromCommit(b,e,l)}},{key:"loadFromDB",value:function(b,e,l,p){l=void 0===l?this.defaultWorld():l;p=void 0===p?{}:p;return gg.loadWorldFromDB(b,e,l,p)}},{key:"loadFromResource",value:function(b,e,l){e=void 0===e?this.defaultWorld():e;l=void 0===l?{}:l;var p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return p=
gg,u=p.loadWorld,x=gg,z=x.loadMorphFromSnapshot,E.yield(b.readJson(),4);case 4:return E.yield(z.call(x,E.yieldResult),3);case 3:return E.yield(u.call(p,E.yieldResult,e,l),2);case 2:return E.return(E.yieldResult)}})}}],d,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:774,end:12867})}(gg.Morph));
gg.World=Ss;gg.World=Ss;gg.World=Ss;var pB=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),k=d.hasOwnProperty("Hand")&&"function"===typeof d.Hand?d.Hand:d.Hand=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){$b._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{pointerId:b})}},
{key:"__deserialize__",value:function(b,e,l,p){$b._get(Object.getPrototypeOf(k.prototype),"__deserialize__",this).call(this,b,e,l,p);this.reset()}},{key:"reset",value:function(){this._grabbedMorphProperties=new WeakMap}},{key:"carriesMorphs",value:function(){return!!this.grabbedMorphs.length}},{key:"morphsContainingPoint",value:function(b,e){return e}},{key:"update",value:function(b){this.position=b.position.subXY(window.scrollX,window.scrollY)}},{key:"cancelGrab",value:function(b,e){b=void 0===b?
!0:b;var l=this,p,u,x,z,E,G,J,K,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(!l.grabbedMorphs.length)return P.return();l.env.eventDispatcher.cancelGrab(l,e);p=[];u=$jscomp.makeIterator(l.grabbedMorphs);for(x=u.next();!x.done;x=u.next())z=x.value,E=l._grabbedMorphProperties.get(z)||{},G=E.prevOwner,J=E.prevIndex,K=E.prevPosition,T=E.pointerAndShadow,Object.assign(z,T),G?(G.addMorphAt(z,J),b?p.push(z.animate({position:K})):z.position=K):z.remove();return P.return(p.length?Promise.all(p):
null)})}},{key:"grab",value:function(b){var e=this;if(gg.obj.isArray(b))return b.forEach(function(l){return e.grab(l)});this.withMetaDo({metaInteraction:!0},function(){e._grabbedMorphProperties.set(b,{prevOwner:b.owner,prevPosition:b.position,prevIndex:b.owner?b.owner.submorphs.indexOf(b):-1,pointerAndShadow:gg.obj.select(b,["dropShadow","reactsToPointer"])});b.reactsToPointer=!1;b.dropShadow=!0;e.addMorph(b)});gg.signal(this,"grab",b)}},{key:"dropMorphsOn",value:function(b){var e=this;this.withMetaDo({metaInteraction:!0},
function(){e.grabbedMorphs.forEach(function(l){try{var p=(e._grabbedMorphProperties.get(l)||{}).pointerAndShadow;Object.assign(l,p);gg.signal(e,"drop",l);l.onBeingDroppedOn(e,b)}catch(u){console.error(u),e.world().showError("Error dropping "+l+" onto "+b+":\n"+u.stack),l.owner!==b&&e.world().addMorph(b)}})})}},{key:"findDropTarget",value:function(b,e,l){var p=this;b=void 0===b?this.globalPosition:b;e=void 0===e?this.grabbedMorphs:e;b=this.world().morphsContainingPoint(b);return gg.arr.sortBy(b,function(u){return[u].concat($jscomp.arrayFromIterable(u.ownerChain())).find(function(x){return gg.Path("owner.isWorld").get(x)&&
x.hasFixedPosition})?0:1}).find("function"===typeof l?function(u,x){return!p.isAncestorOf(u)&&u.acceptsDrops&&!e.includes(u)&&e.every(function(z){return z.wantsToBeDroppedOn(u)})&&l(u,x)}:function(u){return!p.isAncestorOf(u)&&u.acceptsDrops&&u.ownerChain().every(function(x){return x.visible})&&e.every(function(x){return x.wantsToBeDroppedOn(u)})})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Hand"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},fill:{defaultValue:gg.touchInputDevice?
gg.Color.transparent:gg.Color.orange},extent:{defaultValue:gg.pt(1,1)},reactsToPointer:{defaultValue:!1},pointerId:{},isHand:{readOnly:!0,get:function(){return!0}},draggable:{readOnly:!0,get:function(){return!1}},grabbable:{readOnly:!0,get:function(){return!1}},grabbedMorphs:{readOnly:!0,get:function(){return this.submorphs}},_grabbedMorphProperties:{serialize:!1,initialize:function(){this._grabbedMorphProperties=new WeakMap}}}}}],d,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:12876,end:16942})}(gg.Morph);gg.Hand=pB;gg.Hand=pB;gg.Hand=pB;var Hxa=Object.freeze({__proto__:null,World:Ss,Hand:pB}),Rk=lively.FreezerRuntime.recorderFor("lively.morphic/text/position.js");Rk.comparePosition=IU;Rk.lessPosition=Ar;Rk.lessEqPosition=AA;Rk.eqPosition=Br;Rk.minPosition=BA;Rk.maxPosition=CA;Rk.comparePosition=IU;Rk.comparePosition=IU;Rk.lessPosition=
Ar;Rk.lessPosition=Ar;Rk.lessEqPosition=AA;Rk.lessEqPosition=AA;Rk.eqPosition=Br;Rk.eqPosition=Br;Rk.minPosition=BA;Rk.minPosition=BA;Rk.maxPosition=CA;Rk.maxPosition=CA;var Vg=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js");Vg.lessPosition=Ar;Vg.lessEqPosition=AA;Vg.eqPosition=Br;Vg.minPosition=BA;Vg.maxPosition=CA;var av=Ma("bB",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js"),k=d.hasOwnProperty("Range")&&"function"===typeof d.Range?d.Range:d.Range=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var e=b=void 0===b?{start:{row:0,column:0},end:{row:0,column:0}}:b,l=e.start;b=l.row;l=l.column;var p=e.end;e=p.row;p=p.column;if(e<b||e===b&&p<l)l=$jscomp.makeIterator([b,l,e,p]),e=l.next().value,p=l.next().value,b=l.next().value,l=l.next().value;this.start={row:b,column:l};this.end={row:e,column:p}}},
{key:"isRange",get:function(){return!0}},{key:"isEmpty",value:function(){return this.start.row===this.end.row&&this.start.column===this.end.column}},{key:"equals",value:function(b){return b&&b.start&&b.end?Vg.eqPosition(this.start,b.start)&&Vg.eqPosition(this.end,b.end):!1}},{key:"copy",value:function(){return new Vg.Range(this)}},{key:"toLiteral",value:function(){return{start:this.start,end:this.end}}},{key:"merge",value:function(b){b.isRange||(b=new Vg.Range(b));return Vg.lessPosition(this.end,
b.start)||Vg.lessPosition(b.end,this.start)?this:Vg.Range.fromPositions(Vg.minPosition(this.start,b.start),Vg.maxPosition(this.end,b.end))}},{key:"without",value:function(b){b.isRange||(b=new Vg.Range(b));var e=Vg.Range.compare(this,b);return 0===e?Vg.Range.fromPositions(this.start,this.start):5<=Math.abs(e)?this:0>e?Vg.Range.fromPositions(this.start,b.start):Vg.Range.fromPositions(b.end,this.end)}},{key:"intersect",value:function(b){b.isRange||(b=new Vg.Range(b));var e=Vg.Range.compare(this,b),l=
0>e?this:b;b=0>e?b:this;switch(Math.abs(e)){case 0:case 1:return new Vg.Range(l);case 2:case 3:return new Vg.Range(b);case 4:return Vg.Range.fromPositions(b.start,l.end);case 5:return Vg.Range.at(b.start);case 6:return Vg.Range.at(l.end)}}},{key:"subtract",value:function(b){b.isRange||(b=new Vg.Range(b));switch(Vg.Range.compare(this,b)){case -6:case -5:case 5:case 6:return[new Vg.Range(this)];case -1:case 0:case 2:case 3:return[Vg.Range.at(this.start)];case 1:case 4:return[Vg.Range.fromPositions(b.end,
this.end)];case -4:case -3:return[Vg.Range.fromPositions(this.start,b.start)];case -2:return[Vg.Range.fromPositions(this.start,b.start),Vg.Range.fromPositions(b.end,this.end)]}}},{key:"containsPosition",value:function(b){return Vg.lessEqPosition(this.start,b)&&Vg.lessEqPosition(b,this.end)}},{key:"toString",value:function(){var b=this.start,e=this.end;return"Range("+b.row+"/"+b.column+" -> "+e.row+"/"+e.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Range"}},{key:"sort",
value:function(b){return b.sort(Vg.Range.compare)}},{key:"compare",value:function(b,e){var l=b.start,p=b.end,u=e.start,x=e.end;return Vg.lessPosition(l,u)?Vg.lessPosition(p,u)?-6:Vg.eqPosition(p,u)?-5:Vg.lessPosition(p,x)?-4:Vg.eqPosition(p,x)?-3:-2:Vg.eqPosition(l,u)?Vg.eqPosition(p,x)?0:Vg.lessPosition(p,x)?-1:1:-1*Vg.Range.compare(e,b)}},{key:"at",value:function(b){return new this({start:b,end:b})}},{key:"fromPositions",value:function(b,e){return new this({start:b,end:e})}},{key:"create",value:function(b,
e,l,p){return new this({start:{row:b,column:e},end:{row:l,column:p}})}},{key:"isValidLiteral",value:function(b){return b?b.isRange?!0:b.start&&b.end&&"number"===typeof b.start.row&&"number"===typeof b.start.column&&"number"===typeof b.end.row&&"number"===typeof b.end.column:!1}}],d,{pathInPackage:function(){return"text/range.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:108,end:5369})}(void 0));Vg.Range=av;Vg.Range=av;Vg.Range=av;var oO=new Vg.Range;Vg.defaultRange=oO;Vg.defaultRange=oO;Vg.defaultRange=oO;var Wj=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js");Wj.lessPosition=Ar;Wj.Range=av;Wj.defaultRange=oO;Wj.config=$l;Wj.string=Dh;Wj.arr=Gf;Wj.signal=hm;var pO=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),k=d.hasOwnProperty("Selection")&&"function"===typeof d.Selection?d.Selection:
d.Selection=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.textMorph=b;this.initialize(e)}},{key:"isSelection",get:function(){return!0}},{key:"initialize",value:function(b){this._goalX=this._goalColumn=void 0;this._isReverse=!1;var e=Wj.string.newUUID();this.startAnchor=this.textMorph.addAnchor("selection-start-"+e);this.endAnchor=this.textMorph.addAnchor("selection-end-"+
e);this.range=Wj.Range.isValidLiteral(b)?b:Wj.defaultRange;this._cursorVisible=!0;this.cursorBlinkProcess=null}},{key:"isSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.cursorBlinkStop();this.textMorph.removeAnchor(this.startAnchor);this.textMorph.removeAnchor(this.endAnchor)}},{key:"compareRangesForMerge",value:function(b,e){var l=b.start,p=l.row;l=l.column;var u=b.end,x=u.row;u=u.column;var z=e.start,E=z.row;z=z.column;var G=e.end,J=G.row;G=G.column;return p<E||p===E&&
l<z?x<E||x===E&&u<z?"separate":x===E&&u===z?E===J&&z===G?"overlapping":"bordering":"overlapping":p===E&&l===z?x===J&&u===G?"equal":"overlapping":this.compareRangesForMerge(e,b)}},{key:"mergeWith",value:function(b){if(!b||!b.isSelection)return!1;var e=this.compareRangesForMerge(this.range,b.range);if("separate"===e||"bordering"===e)return!1;this.range=this.range.merge(b.range);b.isReverse()!=this.isReverse()&&this.reverse();return!0}},{key:"range",get:function(){return this._range}},{key:"range",set:function(b){if(b){var e=
b,l=e.start;e=e.end;if(void 0!==l&&void 0!==e){var p=this.textMorph.document;"number"===typeof l&&(b.start=l=p.indexToPosition(l));"number"===typeof e&&(b.end=e=p.indexToPosition(e));if(Wj.Range.isValidLiteral(b)){l=p.clipPositionToLines(l);e=p.clipPositionToLines(e);if(this._isReverse=Wj.lessPosition(e,l))e=$jscomp.makeIterator([e,l]),l=e.next().value,e=e.next().value;b.start=l;b.end=e;b.isRange||(b=new Wj.Range(b));b.equals(this._range)||(this._range=b,this._goalColumn=this.textMorph.lineWrapping?
this.textMorph.columnInWrappedLine(this.lead):this.lead.column,this._goalX=this.textMorph.charBoundsFromTextPosition(this.lead).x,this.startAnchor.position=b.start,this.endAnchor.position=b.end,this.textMorph.makeDirty(),Wj.signal(this.textMorph,"selectionChange",this))}}}}},{key:"directedRange",get:function(){return{end:this.lead,start:this.anchor}}},{key:"updateFromAnchors",value:function(){this.range={start:this.startAnchor.position,end:this.endAnchor.position}}},{key:"start",get:function(){return this.range.start}},
{key:"start",set:function(b){this.range=Wj.Range.fromPositions(b,this.end)}},{key:"end",get:function(){return this.range.end}},{key:"end",set:function(b){this.range=Wj.Range.fromPositions(this.start,b)}},{key:"selectionColor",get:function(){return this.textMorph.selectionColor||"#bed8f7"}},{key:"anchor",get:function(){return this.isReverse()?this.range.end:this.range.start}},{key:"anchor",set:function(b){this.range={start:b,end:this.lead}}},{key:"lead",get:function(){return this.isReverse()?this.range.start:
this.range.end}},{key:"lead",set:function(b){this.range={start:this.anchor,end:b}}},{key:"text",get:function(){return this.textMorph.document.textInRange(this.range)}},{key:"text",set:function(b){this.replace(b)}},{key:"replace",value:function(b,e,l,p){var u=this.range,x=this.textMorph,z=this.isReverse();this.range=x.replace(u,b,e,l,p);z&&this.reverse();return this.range}},{key:"selectedRows",get:function(){return{first:this.start.row,last:this.end.row}}},{key:"reverse",value:function(){this._isReverse=
!this.isEmpty()&&!this._isReverse;return this}},{key:"isReverse",value:function(){return this._isReverse&&!this.isEmpty()}},{key:"isEmpty",value:function(){return this.range.isEmpty()}},{key:"collapse",value:function(b){b=void 0===b?this.start:b;this.range={start:b,end:b};return this}},{key:"collapseToEnd",value:function(){this.collapse(this.end);return this}},{key:"growLeft",value:function(b){var e=this.textMorph.document,l=e.positionToIndex(this.end);b=Math.min(l,e.positionToIndex(this.start)-b);
l=this.isReverse();this.start=e.indexToPosition(b);this._isReverse=l;return this}},{key:"growRight",value:function(b){var e=this.textMorph.document,l=e.positionToIndex(this.start);b=Math.max(l,e.positionToIndex(this.end)+b);l=this.isReverse();this.end=e.indexToPosition(b);this._isReverse=l;return this}},{key:"selectAll",value:function(){this.range={start:{row:0,column:0},end:this.textMorph.document.endPosition};return this}},{key:"selectLine",value:function(b,e){b=void 0===b?this.lead.row:b;this.includingLineEnd=
void 0===e?!1:e;this.range={start:{row:b,column:0},end:{row:b,column:this.textMorph.getLine(b).length}};return this}},{key:"gotoLineEnd",value:function(b){b=void 0===b?this.lead.row:b;b={row:b,column:this.textMorph.getLine(b).length};this.range={start:b,end:b}}},{key:"selectLeft",value:function(b){b=void 0===b?1:b;this.isEmpty()?(this.growLeft(b),this.reverse()):this.isReverse()?this.growLeft(b):this.growRight(-b);return this}},{key:"selectRight",value:function(b){b=void 0===b?1:b;this.isReverse()?
this.growLeft(-b):this.growRight(b);return this}},{key:"selectUp",value:function(b,e){return this.goUp(void 0===b?1:b,e,!0)}},{key:"selectDown",value:function(b,e){return this.selectUp(-(void 0===b?1:b),e)}},{key:"goUp",value:function(b,e,l){b=void 0===b?1:b;l=void 0===l?!1:l;if(0===b)return this;var p=this._goalColumn,u=this._goalX;this.lead=this.textMorph.getPositionAboveOrBelow(b,this.lead,void 0===e?!1:e,p,u);l||(this.anchor=this.lead);this._goalColumn=p;this._goalX=u;return this}},{key:"goDown",
value:function(b,e){return this.goUp(-(void 0===b?1:b),e)}},{key:"goLeft",value:function(b){b=void 0===b?1:b;this.isEmpty()&&this.growLeft(b);this.collapse();return this}},{key:"goRight",value:function(b){b=void 0===b?1:b;this.isEmpty()&&this.growRight(b);this.collapseToEnd();return this}},{key:"cursorVisible",get:function(){return this._cursorVisible&&this.textMorph.isFocused()&&!this.textMorph.rejectsInput()}},{key:"cursorBlinkStart",value:function(){var b=this;this.cursorBlinkStop();var e=Wj.config.text.cursorBlinkPeriod;
if(e){var l=this.textMorph,p=l.env.renderer.getNodeForMorph(l);this.cursorBlinkProcess=setInterval(function(){p||(p=l.env.renderer.getNodeForMorph(l));if(p){b._cursorVisible=!b._cursorVisible;var u=p.className.split(" "),x=u.indexOf("hidden-cursor");b._cursorVisible&&-1<x&&(u.splice(x,1),p.className=u.join(" "));b._cursorVisible||-1!==x||(p.className=[].concat($jscomp.arrayFromIterable(u),["hidden-cursor"]).join(" "))}},1E3*e)}}},{key:"cursorBlinkStop",value:function(){this.cursorBlinkProcess&&clearInterval(this.cursorBlinkProcess);
this.cursorBlinkProcess=null;this._cursorVisible=!0;var b=this.textMorph;if(b=b.env.renderer.getNodeForMorph(b)){var e=b.className.split(" "),l=e.indexOf("hidden-cursor");-1<l&&(e.splice(l,1),b.className=e.join(" "))}}},{key:"toString",value:function(){var b=this.anchor,e=this.lead;return"Selection("+b.row+"/"+b.column+" -> "+e.row+"/"+e.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Selection"}}],d,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:224,end:9243})}(void 0);Wj.Selection=pO;Wj.Selection=pO;Wj.Selection=pO;var qO=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),k=d.hasOwnProperty("MultiSelection")&&"function"===typeof d.MultiSelection?d.MultiSelection:d.MultiSelection=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $b(k,a,[{key:"initialize",value:function(b){this._selections=[new Wj.Selection(this.textMorph,b)]}},{key:"__deserialize__",value:function(b,e){this._selections=[]}},{key:"selections",get:function(){return this._selections}},{key:"selections",set:function(b){var e=this._selections?this._selections.filter(function(l){return!b.includes(l)}):[];this._selections=b;e.forEach(function(l){return l.uninstall()})}},{key:"isMultiSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.selections.forEach(function(b){return b.uninstall()})}},
{key:"defaultSelection",get:function(){return Wj.arr.last(this.selections)}},{key:"removeSelections",value:function(b){b=this.selections.slice(void 0===b?1:b);b.forEach(function(e){return e.uninstall()});this.selections=Wj.arr.withoutAll(this.selections,b)}},{key:"disableMultiSelect",value:function(){Wj.arr.without(this.selections,this.defaultSelection).forEach(function(b){return b.uninstall()});this.selections=[this.defaultSelection]}},{key:"range",get:function(){return this.defaultSelection.range}},
{key:"range",set:function(b){this.disableMultiSelect();this.defaultSelection.range=b}},{key:"updateFromAnchors",value:function(){this.selections.forEach(function(b){return b.updateFromAnchors()})}},{key:"start",get:function(){return this.defaultSelection.start}},{key:"start",set:function(b){this.defaultSelection.start=b}},{key:"end",get:function(){return this.defaultSelection.end}},{key:"end",set:function(b){this.defaultSelection.end=b}},{key:"anchor",get:function(){return this.defaultSelection.anchor}},
{key:"anchor",set:function(b){this.defaultSelection.anchor=b}},{key:"lead",get:function(){return this.defaultSelection.lead}},{key:"lead",set:function(b){this.defaultSelection.lead=b}},{key:"text",get:function(){return this.selections.map(function(b){return b.text}).join("\n")}},{key:"text",set:function(b){this.selections.forEach(function(e){return e.text=b})}},{key:"selectedRows",get:function(){return this.defaultSelection.selectedRows}},{key:"reverse",value:function(){this.defaultSelection.reverse()}},
{key:"isReverse",value:function(){return this.defaultSelection.isReverse()}},{key:"isEmpty",value:function(){return this.defaultSelection.isEmpty()}},{key:"collapse",value:function(b){this.defaultSelection.collapse(b);return this}},{key:"collapseToEnd",value:function(){this.defaultSelection.collapseToEnd();return this}},{key:"growLeft",value:function(b){this.defaultSelection.growLeft(b);return this}},{key:"growRight",value:function(b){this.defaultSelection.growRight(b);return this}},{key:"selectAll",
value:function(){this.disableMultiSelect();this.defaultSelection.selectAll();return this}},{key:"selectLine",value:function(b,e){this.includingLineEnd=e;this.defaultSelection.selectLine(b,e);return this}},{key:"gotoLineEnd",value:function(b){this.defaultSelection.gotoLineEnd(b)}},{key:"selectLeft",value:function(b){this.defaultSelection.selectLeft(b);return this}},{key:"selectRight",value:function(b){this.defaultSelection.selectRight(b);return this}},{key:"selectUp",value:function(b,e){this.defaultSelection.selectUp(b,
e);return this}},{key:"selectDown",value:function(b,e){this.defaultSelection.selectDown(b,e);return this}},{key:"goUp",value:function(b,e){return this.defaultSelection.goUp(b,e)}},{key:"goDown",value:function(b,e){return this.defaultSelection.goDown(b,e)}},{key:"goLeft",value:function(b){return this.defaultSelection.goLeft(b)}},{key:"goRight",value:function(b){return this.defaultSelection.goRight(b)}},{key:"cursorVisible",get:function(){return this.defaultSelection.cursorVisible}},{key:"style",set:function(b){this.defaultSelection.style=
b}},{key:"getTextAttributes",value:function(){return this.defaultSelection.getTextAttributes()}},{key:"toString",value:function(){return"MultiSelection("+this.selections.join(", ")+")"}},{key:"mergeSelections",value:function(){for(var b=this.selections.slice(),e=b.length-1;0<=e;e--)for(var l=b.length-1;0<=l;l--)if(e!==l&&b[l].mergeWith(b[e])){b.splice(e,1);break}this.selections=b}},{key:"ranges",get:function(){return this.selections.map(function(b){return b.range})}},{key:"ranges",set:function(b){for(var e=
0;e<b.length;e++){var l=this.selections[e];l?l.range=b[e]:this.addRange(b[e],!1)}this.removeSelections(e);this.mergeSelections()}},{key:"addRange",value:function(b,e){e=void 0===e?!0:e;this.selections.push(new Wj.Selection(this.textMorph,b));e&&this.mergeSelections();return Wj.arr.last(this.selections).range}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelection"}}],d,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9252,end:13920})}(Wj.Selection);Wj.MultiSelection=qO;Wj.MultiSelection=qO;Wj.MultiSelection=qO;var zh=lively.FreezerRuntime.recorderFor("lively.morphic/text/attributes.js");zh.shallowEquals=JU;zh.concatAttributePair=sL;zh.joinTextAttributes=tL;zh.splitTextAndAttributesAt=uL;zh.splitTextAndAttributesAtColumns=vL;zh.concatTextAndAttributes=wL;zh.modifyAttributesInRange=
xL;zh.textAndAttributesWithSubRanges=yL;zh.textAndAttributesDo=function(a,d){for(var k=0;k<a.length;k+=2)d(a[k],a[k+1])};zh.splitTextAndAttributesIntoLines=iE;zh.eqPosition=Br;zh.lessPosition=Ar;zh.shallowEquals=JU;zh.shallowEquals=JU;zh.concatAttributePair=sL;zh.concatAttributePair=sL;zh.joinTextAttributes=tL;zh.joinTextAttributes=tL;zh.splitTextAndAttributesAt=uL;zh.splitTextAndAttributesAt=uL;zh.splitTextAndAttributesAtColumns=vL;zh.splitTextAndAttributesAtColumns=vL;zh.concatTextAndAttributes=
wL;zh.concatTextAndAttributes=wL;zh.modifyAttributesInRange=xL;zh.modifyAttributesInRange=xL;zh.textAndAttributesWithSubRanges=yL;zh.textAndAttributesWithSubRanges=yL;zh.splitTextAndAttributesIntoLines=iE;zh.splitTextAndAttributesIntoLines=iE;var he=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js");he.arr=Gf;he.num=zl;he.string=Dh;he.lessEqPosition=AA;he.minPosition=BA;he.maxPosition=CA;he.lessPosition=Ar;he.eqPosition=Br;he.concatTextAndAttributes=wL;he.splitTextAndAttributesAtColumns=
vL;he.splitTextAndAttributesIntoLines=iE;he.joinTextAttributes=tL;he.modifyAttributesInRange=xL;he.concatAttributePair=sL;he.splitTextAndAttributesAt=uL;he.objectReplacementChar="\ufffd";he.objectReplacementChar="\ufffd";he.objectReplacementChar="\ufffd";he.defaultOptions={maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5};(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),k=d.hasOwnProperty("TreeNode")&&"function"===typeof d.TreeNode?
d.TreeNode:d.TreeNode=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.parent=b}},{key:"root",get:function(){return this.parent?this.parent.root:this}},{key:"isRoot",get:function(){return!this.parent}},{key:"withParents",value:function(){for(var b=this,e=[];b;)e.push(b),b=b.parent;return e}},{key:"traverse",value:function(b){var e=[b.call(null,
this)];if(this.isLeaf)return e;for(var l=0;l<this.children.length;l++)e.push.apply(e,$jscomp.arrayFromIterable(this.children[l].traverse(b)));return e}},{key:"consistencyCheck",value:function(){var b=[],e=this.isRoot,l=this.isLeaf,p=this.children,u=this.size,x=this.stringSize,z=this.height,E=this.width,G=this.options,J=G.maxLeafSize,K=G.maxNodeSize,T=G.minLeafSize;G=G.minNodeSize;e||0!==u||b.push({error:"size of "+this+" expected to be > 0!"});if(!Array.isArray(p))return b.push({error:this+".children is not an array but "+
p}),b;var P=he.arr.sum(he.arr.pluck(p,"size"));P!=u&&b.push({error:"Sum of child sizes is not size of "+this+": "+P+" != "+u});u=he.arr.sum(he.arr.pluck(p,"stringSize"));u!=x&&b.push({error:"Sum of child stringSize is not stringSIze of "+this+": "+u+" != "+x});x=he.arr.sum(he.arr.pluck(p,"height"));Number.parseInt(x)!=Number.parseInt(z)&&b.push({error:"Sum of child Height is not Height of "+this+": "+x+" != "+z});z=p.length?Math.max.apply(null,he.arr.pluck(p,"width")):0;(p.find(function(da){return da.isLine&&
da.hasEstimatedExtent})?Number.parseInt(z)>Number.parseInt(E):Number.parseInt(z)!=Number.parseInt(E))&&b.push({error:"max width of children of "+this+" is not node width: "+z+" != "+E});E=l?J:K;!e&&p.length>E&&b.push({error:"children count of "+this+" expected to be between "+(l?T:G)+" and "+E+" but is "+p.length});for(e=0;e<p.length;e++)(T=p[e])?(l&&!T.isLine?b.push({error:"child "+e+" of leaf "+this+" is not a line!"}):!l&&T.isLine&&b.push({error:"child of non-leaf "+this+" is a line!"}),this!==
T.parent&&b.push({error:"child.parent is "+T.parent+" but should be "+this})):b.push({error:"child "+e+" of "+this+" is nullish!"});b.push.apply(b,$jscomp.arrayFromIterable(he.arr.flatmap(p,function(da){return da.consistencyCheck()})));return b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeNode"}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1422,end:4636})})(void 0);(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),k=d.hasOwnProperty("InnerTreeNode")&&"function"===typeof d.InnerTreeNode?d.InnerTreeNode:d.InnerTreeNode=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){$b._get(Object.getPrototypeOf(k.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,b.parent);this.options=b.options;this.children=b.children;this.size=b.size;this.stringSize=b.stringSize;this.height=b.height;this.width=b.width;this.isLeaf=!0}},{key:"isNode",get:function(){return!0}},{key:"resize",value:function(b,e,l){this.size+=b;this.height+=e;this.stringSize+=l;for(var p=0,u=0;u<this.children.length;u++){var x=this.children[u].width;x>p&&(p=x)}this.width=p;this.parent&&this.parent.resize(b,e,l)}},{key:"lines",value:function(b){b=
void 0===b?[]:b;if(this.isLeaf)return b.push.apply(b,$jscomp.arrayFromIterable(this.children)),b;for(var e=0;e<this.children.length;e++)this.children[e].lines(b);return b}},{key:"findRow",value:function(b){if(0>b||b>=this.size)return null;if(this.isLeaf)return this.children[b];for(var e=0;e<this.children.length;e++){var l=this.children[e],p=l.size;if(b<p)return l.findRow(b);b-=p}return null}},{key:"findLineByVerticalOffset",value:function(b,e,l){e=void 0===e?0:e;l=void 0===l?0:l;if(0>b||b>this.height)return null;
for(var p=0;p<this.children.length;p++){var u=this.children[p],x=u.height;if(b<=x)return this.isLeaf?{line:u,offset:b,y:e,row:l}:u.findLineByVerticalOffset(b,e,l);b-=x;e+=x;l+=u.size}return null}},{key:"computeVerticalOffsetOf",value:function(b,e){e=void 0===e?0:e;if(0>b||b>=this.size)return console.warn("strange row in computeVerticalOffsetOf: "+b),e;if(this.isLeaf){for(var l=0;l<Math.min(b,this.children.length);l++)e+=this.children[l].height;return e}for(l=0;l<this.children.length;l++){var p=this.children[l],
u=p.size;if(b<u)return p.computeVerticalOffsetOf(b,e);b-=u;e+=p.height}return e}},{key:"ensureLine",value:function(b){b||(b="");var e="string"===typeof b;return!e&&b.isLine?(b.parent=this,b):new he.Line({parent:this,width:e?0:b.width||0,height:e?0:b.height||0,textAndAttributes:e?[b,null]:b.textAndAttributes||[b.text||"",null]})}},{key:"insert",value:function(b,e){e=void 0===e?this.size:e;var l=this.children,p=this.options;if(this.isLeaf){var u=[],x=0,z=0;for(p=0;p<b.length;p++){var E=this.ensureLine(b[p]);
u.push(E);x+=E.height;z+=E.stringSize;l.splice(e++,0,E)}this.resize(u.length,x,z);this.balanceAfterGrowth();return u}0===l.length&&l.push(new he.InnerTreeNode({parent:this,children:[],size:0,stringSize:0,width:0,height:0,options:p}));for(p=0;p<l.length;p++){u=l[p];x=u.size;if(e<=x)return u.insert(b,e);e-=x}e=l[p-1];return e.insert(b,e.size)}},{key:"withParentChainsUpToCommonParentDo",value:function(b,e,l){for(var p=this.withParents(),u,x=0;b;){if(p.includes(b)){u=b;break}e(b,x++);b=b.parent}e=p.indexOf(u);
0>e&&(e=p.length);p=p.slice(0,e);for(e=0;e<p.length;e++)l(p[e],e)}},{key:"findLineWithTextIndex",value:function(b,e){e=void 0===e?0:e;if(this.isLeaf){for(var l=0;l<this.children.length;l++){var p=this.children[l],u=p.stringSize;if(b<u)return{line:p,column:b,row:e};b-=u;e++}b=he.arr.last(this.children);return{line:b,row:e-1,column:b.stringSize-1}}for(p=l=0;p<this.children.length;p++){u=this.children[p];var x=u.stringSize;if(b<l+x)return u.findLineWithTextIndex(b-l,e);e+=u.size;l+=x}return he.arr.last(this.children).findLineWithTextIndex(b-
l)}},{key:"findLeafs",value:function(b,e,l){l=void 0===l?0:l;if(b>l+this.size||e<l)return[];if(this.isLeaf){b=Math.max(0,b-l);var p=this.children.length-1;e=Math.min(p,e-l);l=!1;0===b&&e===p&&(l=!0,e=p);return[{node:this,firstLine:b,lastLine:e,full:l}]}p=[];for(var u=0;u<this.children.length;u++){var x=this.children[u];p.push.apply(p,$jscomp.arrayFromIterable(x.findLeafs(b,e,l)));l+=x.size}return p}},{key:"removeFromToInRoot",value:function(b,e,l){var p=this;if(!this.isRoot)throw Error("removeFromTo() should be called on the root node");
b>e&&(e=$jscomp.makeIterator([e,b]),b=e.next().value,e=e.next().value);var u=this.size,x=this.options.minLeafSize,z=this.findLeafs(b,e),E=z.shift();e=z.pop();var G=[],J=!1,K=!1;if(!(b>=u)){e&&E.node===e.node&&(e=null);E.full?(l&&l.log("Removing complete first line "+E),z.push(E)):J=E.node.children.length-(E.lastLine-E.firstLine+1)<x;e&&(e.full?(l&&l.log("Removing complete last line "+e),z.push(e)):(K=e,K=K.node.children.length-(K.lastLine-K.firstLine+1)<x));if(J||K){var T=(T=E.node.children[0].prevLine())?
T.parent:null;var P=(P=he.arr.last(e?e.node.children:E.node.children).nextLine())?P.parent:null}for(b=0;b<z.length;b++){x=z[b].node;u=x.children.length;for(var da=0,fa=0,ka=0;ka<u;ka++){var za=x.children[ka];da+=za.height;fa+=za.stringSize;za.parent=null}x.children.length=0;x.resize(-u,-da,-fa);if(u=x.parent)x.parent=null,u.children.splice(u.children.indexOf(x),1),G.includes(u)||G.push(u)}if(!E.full){x=E.firstLine;z=E.node;b=E.lastLine-x+1;x=z.children.splice(x,b);for(fa=da=u=0;fa<x.length;fa++)ka=
x[fa],u+=ka.height,da+=ka.stringSize,ka.parent=null;z.resize(-b,-u,-da)}if(e&&!e.full){b=e;x=b.firstLine;z=b.node;b=b.lastLine-x+1;x=z.children.splice(x,b);for(fa=da=u=0;fa<x.length;fa++)ka=x[fa],u+=ka.height,da+=ka.stringSize,ka.parent=null;z.resize(-b,-u,-da)}l&&l.dump(""+this.print(!1));J&&E.node.balanceByMergeOrTheft(T,!e||e.full?P:e.node,l);e&&K&&e.node.root===this&&(K=!0,T=E.full||!E.node.parent?T:E.node,J&&(e.node.root!==this&&(K=!1),T&&T.root!==this&&(T=null),P&&P.root!==this&&(P=null)),K&&
e.node.balanceByMergeOrTheft(T,P,l));G.forEach(function(Ia){return Ia.root===p&&Ia.balanceAfterShrink(l)})}}},{key:"balanceByMergeOrTheft",value:function(b,e,l){var p=this,u=this.children,x=this.options,z=this.isLeaf,E=z?x.maxLeafSize:x.maxNodeSize;x=z?x.minLeafSize:x.minNodeSize;z=b&&b.children.length+u.length<=E;E=!z&&e&&e.children.length+u.length<=E;var G=z?b:E?e:null;if(G){l&&l.log("[balanceByMergeOrTheft] merging "+this+" "+(z?"left":"right")+" into "+G);var J=this.size,K=this.width,T=this.height,
P=this.stringSize;u.forEach(function(W){return W.parent=G});z?G.children.push.apply(G.children,$jscomp.arrayFromIterable(u)):G.children.unshift.apply(G.children,$jscomp.arrayFromIterable(u));this.width=u.length=0;this.withParentChainsUpToCommonParentDo(G,function(W){K>W.width&&(W.width=K);W.height+=T;W.size+=J;W.stringSize+=P},function(W){if(K===W.width)for(var ca=0;ca<W.children.length;ca++){var sa=W.children[ca];sa.width>W.width&&(W.width=sa.width)}W.height-=T;W.size-=J;W.stringSize-=P})}else{z=
b?Math.ceil((b.children.length-x)/2):0;var da=e?Math.ceil((e.children.length-x)/2):0;if((E=0<z&&z>=da)||!E&&0<da){x=E?b.children.splice(b.children.length-z,z):e.children.splice(0,da);var fa=E?b:e,ka=E?z:da,za=0,Ia=0,N=0,ia=0;l&&l.log("[balanceByMergeOrTheft] "+this+" steals from "+(E?"left":"right")+" node "+fa+" "+ka+" nodes");for(b=0;b<x.length;b++)za+=x[b].height,Ia+=x[b].stringSize,N=Math.max(N,x[b].width);for(b=0;b<fa.children.length;b++)ia=Math.max(ia,fa.children[b].width);this.withParentChainsUpToCommonParentDo(fa,
function(W){if(ia<N&&ia<W.width){if(W===fa)W.width=ia;else{for(var ca=!1,sa=0;sa<W.children.length;sa++)if(W.children[sa].width>ia){ca=!0;break}ca||(W.width=ia)}W.width=N}W.height-=za;W.size-=ka;W.stringSize-=Ia},function(W){W.width<N&&(W.width=N);W.height+=za;W.size+=ka;W.stringSize+=Ia});x.forEach(function(W){return W.parent=p});E?this.children.unshift.apply(this.children,$jscomp.arrayFromIterable(x)):this.children.push.apply(this.children,$jscomp.arrayFromIterable(x))}}b=this.parent;0===u.length&&
(this.parent=null,b&&b.children.splice(b.children.indexOf(this),1));b&&b.balanceAfterShrink(l)}},{key:"balanceAfterGrowth",value:function(){var b=this.isLeaf,e=this.size,l=this.stringSize,p=this.parent,u=this.children,x=this.width,z=this.height,E=this.options,G=b?E.maxLeafSize:E.maxNodeSize;if(u.length>G){p||(p=this.parent=new he.InnerTreeNode({parent:null,children:[this],size:e,width:x,height:z,stringSize:l,options:E}),p.isLeaf=!1);var J=Math.floor(u.length/2),K=0,T=0,P=e=0,da=l=0,fa=x=0;for(z=0;K<
J;K++)T+=u[K].size,P=Math.max(P,u[K].width),da+=u[K].height,fa+=u[K].stringSize;for(;K<u.length;K++)e+=u[K].size,l=Math.max(l,u[K].width),x+=u[K].height,z+=u[K].stringSize;this.children=u.slice(0,J);this.size=T;this.width=P;this.height=da;this.stringSize=fa;K=p.children.indexOf(this);u=u.slice(J);var ka=new he.InnerTreeNode({parent:p,children:u,size:e,height:x,width:l,stringSize:z,options:E});ka.isLeaf=b;u.forEach(function(za){return za.parent=ka});p.children.splice(K+1,0,ka);ka.children.length>G&&
ka.balanceAfterGrowth();this.children.length>G&&this.balanceAfterGrowth();this.parent.balanceAfterGrowth()}}},{key:"balanceAfterShrink",value:function(b){var e=this,l=this.isLeaf,p=this.parent,u=this.children,x=this.options,z=x.maxLeafSize,E=x.maxNodeSize,G=x.minLeafSize,J=x.minNodeSize;x=l?z:E;G=l?G:J;J=!1;for(var K=u.length;K--;)0===u[K].size&&(u.splice(K,1),J=!0,b&&b.log("[balanceAfterShrink] "+this+" removes node "+K+" b/c it is empty, remaining children: "+u.length+" (min: "+G+", max: "+x+")"));
J&&b&&b.dump(""+this.root.print(!1));if(u.length>=G)p&&p.balanceAfterShrink(b);else if(0===u.length)p&&p.balanceAfterShrink(b);else if(l)p&&(1===p.children.length?(b&&b.log("[balanceAfterShrink] "+this+" is the only child - will remove it's parent and take its position"),b&&b.dump(""+this.root.print(!1)),this.parent=null,p.children.length=0,p.children.push.apply(p.children,$jscomp.arrayFromIterable(u)),u.forEach(function(P){return P.parent=p}),p.isLeaf=!0):(z=(z=u[0].prevLine())&&z.parent,u=he.arr.last(u).nextLine(),
this.balanceByMergeOrTheft(z,u&&u.parent,b))),this.parent&&this.parent.balanceAfterShrink(b);else{l=[];x=J=G=!1;for(K=0;K<u.length;K++){var T=u[K];!G&&T.isLeaf&&(G=!0);J||T.isLeaf||(J=!0);if(G&&J){x=!0;break}l.push.apply(l,$jscomp.arrayFromIterable(T.children))}!x&&l.length<=(G?z:E)&&(b&&b.log("[balanceAfterShrink] "+this+" grandChildren.length is "+l.length+" and <= max size so it is removing all its children and adopting their children"),u.forEach(function(P){return P.parent=null}),l.forEach(function(P){return P.parent=
e}),u.length=0,u.push.apply(u,$jscomp.arrayFromIterable(l)),this.isLeaf=G,b&&b.log("[balanceAfterShrink] "+u.join("\n")),b&&b.dump(""+this.root.print(!1)));p&&p.balanceAfterShrink(b)}}},{key:"print",value:function(b,e,l,p){b=void 0===b?!0:b;e=void 0===e?0:e;l=void 0===l?0:l;var u=this.isLeaf,x=this.size,z=this.stringSize,E=this.width,G=this.height,J=this.children;p=p||(u?"leaf":"node");z=""+" ".repeat(l)+p+" (size: "+x+" width: "+Math.round(E)+" height: "+Math.round(G)+" text length: "+z+")";if(J.length){E=
"";e+=x;for(x=J.length;x--;)G=J[x],e-=G.size,E="\n"+G.print(b,e,l+1)+E;z+=E}return z}},{key:"toString",value:function(){var b=this.isLeaf,e=this.size,l=this.width,p=this.height,u=this.children;return"node ("+(b?"leaf, ":"")+(b&&u.length?"rows: "+u[0].row+"-"+he.arr.last(u).row+" ":"")+("size: "+e+" "+l+"x"+p+")")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InnerTreeNode"}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4638,end:29081})})(he.TreeNode);var gY=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),k=d.hasOwnProperty("Line")&&"function"===typeof d.Line?d.Line:d.Line=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){$b._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b.parent);this.textAndAttributes=he.joinTextAttributes(b.textAndAttributes||[]);this._text="";this._textAttributes=null;this.width=b.width;this.height=b.height;this.hasEstimatedExtent=!1;this.modeState=null;this.textAlign="left";this.lineHeight=null;this.marginBottom=this.marginTop=0}},{key:"isLine",get:function(){return!0}},{key:"size",get:function(){return 1}},{key:"stringSize",
get:function(){return this.text.length+1}},{key:"text",get:function(){if(this._text)return this._text;for(var b="",e=this.textAndAttributes,l=0;l<e.length;l+=2)b+="string"===typeof e[l]?e[l]:he.objectReplacementChar;return this._text=b}},{key:"textAttributes",get:function(){if(this._textAttributes)return this._textAttributes;for(var b=[],e=this.textAndAttributes,l=0;l<e.length;l+=2){var p=e[l+1];p&&!b.includes(p)&&b.push(p)}return this._textAttributes=b}},{key:"row",get:function(){if(!this.parent)return 0;
var b=this.withParents();if(1===b.length)return b.children.indexOf(this);for(var e=0,l=b.length-1;1<=l;l--)for(var p=b[l],u=p.children.indexOf(b[l-1]),x=0;x<u;x++)e+=p.children[x].size;return e}},{key:"nextLine",value:function(){var b=this.parent;return b?(b=b.children[b.children.indexOf(this)+1])?b:this.root.findRow(this.row+1):null}},{key:"prevLine",value:function(){var b=this.parent;return b?(b=b.children[b.children.indexOf(this)-1])?b:this.root.findRow(this.row-1):null}},{key:"changeExtent",value:function(b,
e,l){var p=this.height,u=this.width,x=this.parent;this.width=b;this.height=e;this.hasEstimatedExtent=void 0===l?!1:l;if(u!==b||p!==e)for(e-=p;x;){x.height+=e;if(b>=x.width)x.width=b;else if(u===x.width){for(p=l=0;p<x.children.length;p++){var z=x.children[p].width;z>l&&(l=z)}x.width=l}x=x.parent}return this}},{key:"changeText",value:function(b,e){e=void 0===e?null:e;var l=this.parent,p=this.height,u=b.length+1-(this.text.length+1),x=0;this.modeState&&this.modeState._string!==b&&(this.modeState=null);
this.height||this.width?this.hasEstimatedExtent=!0:(this.width=this.height=0,this.hasEstimatedExtent=!1,x=-p);this._text=b;this._textAttributes=null;this.textAndAttributes=e||(e=[b,null]);if(0!==e.length%2)throw Error("textAndAttributes list is strange, expected flat pairs of text/attr");for(b=0;b<e.length;b+=2)if((p=e[b+1])&&Array.isArray(p))throw Error("invalid attr part of text/attr pair, its an array: "+p);for(;l;){l.stringSize+=u;l.height+=x;for(b=e=0;b<l.children.length;b++)p=l.children[b].width,
p>e&&(e=p);l.width=e;l=l.parent}return this}},{key:"changeTextAndAttributes",value:function(b){b=he.joinTextAttributes(b);for(var e="",l=0;l<b.length;l+=2)e+="string"===typeof b[l]?b[l]:he.objectReplacementChar;return this.changeText(e,b)}},{key:"print",value:function(b,e,l){b=void 0===b?!0:b;e=void 0===e?0:e;e=" ".repeat(void 0===l?0:l)+"line "+e+" (size: 1 width: "+Math.round(this.width)+" height: "+Math.round(this.height)+" text length: "+this.stringSize;l=he.arr.toTuples(this.textAndAttributes,
2).map(function(p){var u=$jscomp.makeIterator(p);p=u.next().value;u=u.next().value;return("string"===typeof p?'"'+p+'"':String(p))+(","+JSON.stringify(u))}).join(",");return e+(b?")":" content: ["+l+"])")}},{key:"toString",value:function(){var b=this.width,e=this.height;return'line ("'+he.string.truncate(this._text,30)+'", '+b+"x"+e+")"}},{key:"consistencyCheck",value:function(){var b=[];if(!this.parent)return b.push("line "+this+" has no parent!"),b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Line"}}],
d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:29090,end:35532})}(he.TreeNode);he.Line=gY;he.Line=gY;he.Line=gY;he.documentFuzzier={makeString:function(a,d){a=void 0===a?5:a;d=void 0===d?50:d;var k=he.arr.range(65,90).map(function(b){return String.fromCharCode(b)}).join("");k+=
k.toLowerCase()+" \n";a=he.num.random(a,d);return he.arr.shuffle(Array.from(k.repeat(Math.ceil(a/k.length)))).slice(0,a).join("")},randomDocPosition:function(a){var d=0===a.rowCount?0:he.num.random(0,a.rowCount-1);a=he.num.random(0,a.getLineString(d).length-1);return{row:d,column:a}},insertRandom:function(a,d,k,b){k=[this.makeString(k,b),null];b=this.randomDocPosition(a);d.push(["insertTextAndAttributes",k,b]);a.insertTextAndAttributes(k,b)},deleteRandom:function(a,d,k,b){k={start:this.randomDocPosition(a),
end:this.randomDocPosition(a)};d.push(["remove",k]);a.remove(k)},maybe:function(){return.5>Math.random()},replay:function(a,d,k,b){k=void 0===k?!1:k;b=void 0===b?!1:b;k&&(a.debug=k,k=a.debugHelper(),k.reset());var e=new he.Document([""]);d.forEach(function(l,p){var u=$jscomp.makeIterator(l);l=u.next().value;u=$jscomp.arrayFromIterator(u);if(b&&p==d.length-1)debugger;e[l].apply(e,[].concat($jscomp.arrayFromIterable(u),[k]))});a.changeDocument(e)},run:function(){var a=Date.now(),d=0,k=new he.Document([],
{maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5}),b=[];try{for(;1E4>k.stringSize&&1E4>d++;)this.maybe()?this.deleteRandom(k,b):this.insertRandom(k,b),k.consistencyCheck()}catch(l){var e=l}a=Date.now()-a;return{error:e,doc:k,actions:b,time:a}}};he.newline="\n";he.newlineLength=1;var Rca=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),k=d.hasOwnProperty("Document")&&"function"===typeof d.Document?d.Document:d.Document=function(b){b&&
b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.options=Object.assign({},he.defaultOptions,{},e);this.lines=b}},{key:"balance",value:function(){this.root.balanceAfterGrowth();this.fixRoot()}},{key:"fixRoot",value:function(){var b=this.root.root;this.root!==b&&(this.root=b)}},{key:"height",get:function(){return this.root.height}},{key:"width",get:function(){return this.root.width}},
{key:"rowCount",get:function(){return this.root.size}},{key:"stringSize",get:function(){return 0===this.rowCount?0:this.root.stringSize-1}},{key:"lineStrings",get:function(){return this.lines.map(function(b){return b.text})}},{key:"lines",get:function(){return this.root.lines()}},{key:"lines",set:function(b){b=void 0===b?[]:b;this.root=new he.InnerTreeNode({parent:null,children:[],size:0,width:0,height:0,stringSize:0,options:this.options});this.insertLines(b)}},{key:"clipRow",value:function(b){return Math.max(0,
Math.min(b,this.rowCount-1))}},{key:"clipPositionToLines",value:function(b){var e=b.row;b=b.column;var l=this.rowCount;if(0===l)return{row:0,column:0};0>e?e=0:e>=l&&(e=l-1,b=Infinity);0>b?b=0:(l=this.getLineString(e).length,b>l&&(b=l));return{row:e,column:b}}},{key:"findLineByVerticalOffset",value:function(b){return this.root.findLineByVerticalOffset(b)}},{key:"computeVerticalOffsetOf",value:function(b){return this.root.computeVerticalOffsetOf(b)}},{key:"getLine",value:function(b){return this.root.findRow(this.clipRow(b))}},
{key:"getLineString",value:function(b){return(b=this.getLine(b))?b.text:""}},{key:"insertLine",value:function(b,e){e=void 0===e?this.root.rowCount:e;return this.insertLines([b],e)[0]}},{key:"removeLine",value:function(b){this.root.removeFromToInRoot(b,b)}},{key:"removeLines",value:function(b,e,l){this.root.removeFromToInRoot(b,e,l)}},{key:"insertLines",value:function(b,e){b=this.root.insert(b,e);this.fixRoot();return b}},{key:"textString",get:function(){var b="",e=this.lines;if(!e.length)return b;
for(var l=0;l<e.length-1;l++)b=b+e[l].text+he.newline;return b+=e[l].text}},{key:"textString",set:function(b){this.lines=b.split(he.newline)}},{key:"endPosition",get:function(){var b=this.rowCount;if(0===b)return{row:0,column:0};--b;var e=this.getLine(b);return{row:b,column:e.stringSize-1}}},{key:"textAndAttributes",get:function(){var b=this.lines;if(!b.length)return[];for(var e=he.newline,l=b.length-1,p=b[0].textAndAttributes.slice(),u=1;u<=l;u++){var x=b[u],z=p.pop()||null,E=p.pop()||"";x=x.textAndAttributes;
p.push.apply(p,$jscomp.arrayFromIterable(he.concatAttributePair(E,z,x[0]||"",x[1]||null,e)));for(z=2;z<x.length;z+=2)p.push(x[z],x[z+1])}return p}},{key:"textAndAttributes",set:function(b){this.lines=he.splitTextAndAttributesIntoLines(b,he.newline).map(function(e){return new he.Line({parent:null,width:0,height:0,textAndAttributes:e})})}},{key:"getTextAndAttributesOfLine",value:function(b){return this.getLine(b).textAndAttributes}},{key:"setTextAndAttributesOfLine",value:function(b,e){this.getLine(b).changeTextAndAttributes(e);
return e}},{key:"mixinTextAttribute",value:function(b,e){he.modifyAttributesInRange(this,e,function(l,p){l._textAttributes=null;return Object.assign({},p,b)})}},{key:"setTextAttribute",value:function(b,e){he.modifyAttributesInRange(this,e,function(l,p){l._textAttributes=null;return b})}},{key:"mixoutTextAttribute",value:function(b,e){e=void 0===e?{start:{row:0,column:0},end:this.endPosition}:e;if(b){var l=Object.keys(b);he.modifyAttributesInRange(this,e,function(p,u){if(!u)return u;p._textAttributes=
null;p=0;var x={},z;for(z in u)l.includes(z)||(x[z]=u[z],p++);return 0===p?null:x})}}},{key:"setTextAttributesWithSortedRanges",value:function(b){function e(K,T,P,da){da=void 0===da?0:da;var fa=0,ka=T.length;if(0>=P.length-da)return{attributes:[T,null],index:da};for(var za=[];da<P.length&&!(fa>=ka);da+=2){var Ia=P[da],N=Ia.start;Ia=Ia.end;var ia=P[da+1];if(Ia.row<K)fa=0;else{N.row===K&&fa<N.column&&(za.push(T.slice(fa,N.column),null),fa=N.column);if(Ia.row>K){za.push(ia.embeddedMorph||T.slice(fa,
ka),ia);fa=ka;break}fa<Ia.column&&za.push(ia.embeddedMorph||T.slice(fa,Ia.column),ia);fa=Ia.column}}fa<ka&&za.push(T.slice(fa,ka),null);return{attributes:za,index:da}}if(!(2>b.length)){var l=b[0].start,p=b.slice(-2)[0].end,u=this.getLine(l.row);if(l.row===p.row){if(!(l.column>=p.column)){var x=e(l.row,u.text,b,0).attributes,z=$jscomp.makeIterator(he.splitTextAndAttributesAtColumns(u.textAndAttributes,[l.column,p.column]));b=z.next().value;z.next();z=z.next().value;p=$jscomp.makeIterator(he.splitTextAndAttributesAtColumns(x,
[l.column,p.column]));p.next();l=p.next().value;p.next();u.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(b),$jscomp.arrayFromIterable(l),$jscomp.arrayFromIterable(z)))}}else{z=l.row;var E=l.column;l=e(z,u.text,b,0);var G=l.attributes;l=l.index;var J=$jscomp.makeIterator(he.splitTextAndAttributesAt(u.textAndAttributes,E));x=J.next().value;J.next();E=$jscomp.makeIterator(he.splitTextAndAttributesAt(G,E));E.next();E=E.next().value;for(u.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(x),
$jscomp.arrayFromIterable(E)));u=u.nextLine();){z++;if(z===p.row)break;l=e(z,u.text,b,l);x=l.attributes;l=l.index;u.changeTextAndAttributes(x)}u&&(p=p.column,b=e(z,u.text,b,l).attributes,z=$jscomp.makeIterator(he.splitTextAndAttributesAt(u.textAndAttributes,p)),z.next(),z=z.next().value,p=$jscomp.makeIterator(he.splitTextAndAttributesAt(b,p)).next().value,u.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(p),$jscomp.arrayFromIterable(z))))}}}},{key:"resetTextAttributes",value:function(){this.lines.forEach(function(b){return b.changeText(b.text)})}},
{key:"textAttributeAt",value:function(b){var e=b.row;b=b.column;b=Math.max(0,b);var l=this.getLine(e);if(!l)return null;e=0;l=l.textAndAttributes;for(var p=0;p<l.length;p+=2){var u=l[p],x=l[p+1];e+="string"===typeof u?u.length:1;if(b<e)return x}return l[l.length-1]}},{key:"textAndAttributesInRange",value:function(b){var e=b.start,l=b.end;if(he.eqPosition(e,l))return["",null];he.lessPosition(l,e)&&(b=$jscomp.makeIterator([l,e]),e=b.next().value,l=b.next().value);e=he.maxPosition(e,{column:0,row:0});
l=he.minPosition(l,this.endPosition);var p=this.getLine(e.row),u=p;if(l.row===e.row)return b=e.column,l=l.column,b===l&&l++,b=$jscomp.makeIterator(he.splitTextAndAttributesAtColumns(u.textAndAttributes,[b,l])),b.next(),b.next().value;b=[p];for(var x=0;x<l.row-e.row;x++)b.push(p=p.nextLine());p=b[b.length-1];e=$jscomp.makeIterator(he.splitTextAndAttributesAt(u.textAndAttributes,e.column));e.next();e=e.next().value;l=$jscomp.makeIterator(he.splitTextAndAttributesAt(p.textAndAttributes,l.column)).next().value;
0===e.length&&(e=["",null]);if(1===b.length)return he.concatTextAndAttributes(e,l,!0);for(u=1;u<b.length-1;u++)"string"===typeof e[e.length-2]&&(e[e.length-2]+=he.newline),he.concatTextAndAttributes(e,b[u].textAndAttributes,!0);"string"===typeof e[e.length-2]&&(e[e.length-2]+=he.newline);he.concatTextAndAttributes(e,l,!0);return he.joinTextAttributes(e,"")}},{key:"textInRange",value:function(b){var e=b.start,l=b.end;e=this.clipPositionToLines(e);l=this.clipPositionToLines(l);he.lessPosition(l,e)&&
(b=$jscomp.makeIterator([l,e]),e=b.next().value,l=b.next().value);b=e;e=b.row;b=b.column;var p=l;l=p.row;p=p.column;if(e===l)return b===p?"":this.getLineString(e).slice(b,p);var u=this.getLine(e);for(b=u.text.slice(b);(u=u.nextLine())&&++e<l;)b+=he.newline+u.text;return b+he.newline+this.getLineString(l).slice(0,p)}},{key:"setTextInRange",value:function(b,e){this.remove(e);return this.insertText(b,e.start,!1)}},{key:"indexToPosition",value:function(b){0>b&&(b=0);b=this.root.findLineWithTextIndex(b,
0);return{row:b.row,column:b.column}}},{key:"positionToIndex",value:function(b){var e=b.column,l=this.getLine(b.row);e=Math.max(0,Math.min(e,l.stringSize-1));for(b=l.parent;b;){l=b.children.indexOf(l);l=b.children.slice(0,l);for(var p=0;p<l.length;p++)e+=l[p].stringSize;l=b;b=b.parent}return e}},{key:"insertTextAndAttributes",value:function(b,e,l){l=void 0===l?!1:l;if(!b||!b.length||2===b.length&&!b[0])return{start:e,end:e};l&&!l.debugDocumentUpdate&&(l=!1);l&&!l.log&&(l=console);var p=e.row;e=e.column;
0>p&&(p=0);0>e&&(e=0);var u=this.getLine(p);b=he.splitTextAndAttributesIntoLines(b,he.newline);l&&(l.log||(l={log:console.log.bind(console),dump:console.log.bind(console)}));if(!u)return p=this.insertLines(b.map(function(da){return new he.Line({parent:null,width:0,height:0,textAndAttributes:da})})),l&&l.log("insert "+p.length+" lines into empty text"),{start:{row:0,column:0},end:{row:p.length,column:he.arr.last(p).text.length}};if(p>=this.rowCount){var x=this.endPosition;l&&l.log("insertion after doc end, "+
p+"/"+e+", inserting "+(p-x.row)+" rows");for(e=0;e<p-x.row;e++)b.unshift(["",null]);p=x.row;e=x.column}if(1===b.length&&""===b[0][0])return l&&l.log("insert just newline at "+p+"/"+e),p=this.splitLineAt({row:p,column:e}),l&&l.dump(""+this.root.print(!1)),p;var z=b.shift(),E=b.length;x={row:p,column:e};var G=u.stringSize-1;e>G&&(l&&l.log("filling up insertion column at "+p+"/"+e+": "+(e-G)),G=" ".repeat(e-G),z.length?"string"===typeof z[0]?z[0]=G+z[0]:z.unshift(G,null):z.push(G,null));G=$jscomp.makeIterator(he.splitTextAndAttributesAt(u.textAndAttributes,
e));var J=G.next().value;G=G.next().value;""===J[0]&&(J=[]);J=he.concatTextAndAttributes(J,z,!0);if(0===E){for(var K=0,T=0;T<z.length;T+=2){var P=z[T];K+="string"===typeof P?P.length:1}x.column=e+K;he.concatTextAndAttributes(J,G,!0)}u.changeTextAndAttributes(J);if(0===E)return l&&(l.log("single line inserted at "+p+"/"+e),l&&l.dump(""+this.root.print(!1))),{start:{row:p,column:e},end:x};u=b[E-1];for(J=z=0;J<u.length;J+=2)K=u[J],z+="string"===typeof K?K.length:1;x.row+=E;x.column=z;b=this.insertLines(b.map(function(da){return new he.Line({parent:null,
width:0,height:0,textAndAttributes:da})}),p+1);E=he.arr.last(b);E.changeTextAndAttributes(he.concatTextAndAttributes(E.textAndAttributes,G,!0));l&&(l.log(b.length+" inserted at "+p+"/"+e),l&&l.dump(""+this.root.print(!1)));return{start:{row:p,column:e},end:x}}},{key:"insertText",value:function(b,e,l){l=void 0===l?!1:l;if(!b)return{start:e,end:e};var p=e.row;e=e.column;0>p&&(p=0);0>e&&(e=0);var u=this.getLine(p);if(!u)return p=this.insertLines(b.split(he.newline)),{start:{row:0,column:0},end:{row:p.length,
column:he.arr.last(p).text.length}};p>=this.rowCount&&(e=this.endPosition,b="\n".repeat(p-e.row)+b,p=e.row,e=e.column);var x=b.split(he.newline),z=x.shift(),E=x.length;b={row:p,column:e};var G=u.stringSize-1;e>G&&(z=" ".repeat(e-G)+z);G=$jscomp.makeIterator(he.splitTextAndAttributesAt(u.textAndAttributes,e));var J=G.next().value;G=G.next().value;""===J[0]&&(J=[]);l=he.concatTextAndAttributes(J,[z,l&&J.length?J[J.length-1]:null],!0);0===E&&(b.column=e+z.length,he.concatTextAndAttributes(l,G,!0));u.changeTextAndAttributes(l);
if(0===E)return{start:{row:p,column:e},end:b};b.row+=E;b.column=x[E-1].length;l=this.insertLines(x,p+1);l=he.arr.last(l);l.changeTextAndAttributes(he.concatTextAndAttributes(l.textAndAttributes,G,!0));return{start:{row:p,column:e},end:b}}},{key:"remove",value:function(b,e){e=void 0===e?!1:e;if(0!==this.rowCount){var l=b.start,p=b.end;if(l.row!==p.row||l.column!==p.column){he.lessPosition(p,l)&&(p=$jscomp.makeIterator([p,l]),l=p.next().value,p=p.next().value);var u=this.endPosition;if(!he.lessEqPosition(u,
l)){var x=he.maxPosition(l,{column:0,row:0});l=x.row;x=x.column;u=he.minPosition(p,u);p=u.row;var z=u.column;0>x&&(x=0);0>z&&(z=0);e&&!e.debugDocumentUpdate&&(e=!1);e&&(e.log||(e={log:console.log.bind(console),dump:console.log.bind(console),group:console.group.bind(console),groupEnd:console.groupEnd.bind(console)}),e.group("document.remove "+JSON.stringify(b)),e.log("[text doc] removing "+l+"/"+x+" => "+p+"/"+z));var E=this.getLine(l);b=E;u=[E];for(var G=0;G<p-l;G++)u.push(E=E.nextLine());E=u[u.length-
1];x=$jscomp.makeIterator(he.splitTextAndAttributesAt(b.textAndAttributes,x)).next().value;z=$jscomp.makeIterator(he.splitTextAndAttributesAt(E.textAndAttributes,z));z.next();z=z.next().value;b.changeTextAndAttributes(he.concatTextAndAttributes(x,z,!0));e&&e.log('[text doc removal] what remains of start/end line: "'+b.textAndAttributes+'"');1<u.length&&this.removeLines(l+1,p,e);e&&e.groupEnd("[text doc removal]")}}}}},{key:"splitLineAt",value:function(b){var e=b.row;b=b.column;var l=this.getLine(e),
p=$jscomp.makeIterator(he.splitTextAndAttributesAt(l.textAndAttributes,b)),u=p.next().value;p=p.next().value;l.changeTextAndAttributes(u);l=new he.Line({parent:null,width:0,height:0,textAndAttributes:p});this.insertLines([l],e+1);return{start:{row:e,column:b},end:{row:e+1,column:0}}}},{key:"replace",value:function(b,e,l){var p=b.start;b=b.end;if(!e.length)return this.remove({start:p,end:b},l),{removed:{start:p,end:b},inserted:{start:p,end:p}};var u=this.clipPositionToLines(p),x=this.clipPositionToLines(b);
u.row===x.row&&this.remove({start:u,end:x},l);if(u.row===x.row||he.lessEqPosition(this.endPosition,p)){var z;"string"===typeof e?e.length&&(z=e.length&&this.insertText(e,p)):e.length&&(2!==e.length||e[0])&&(z=this.insertTextAndAttributes(e,p,l));z||(z={start:u,end:u});return{removed:{start:p,end:b},inserted:z}}p=u;b=x;l=p;z=l.row;x=l.column;u=b.row;if("string"===typeof e){l=[];e=e.split(he.newline);for(var E=0;E<e.length;E++)l.push([e[E],null])}else l=he.splitTextAndAttributesIntoLines(e,he.newline);
var G=!l.length||1===l.length&&(!l[0].length||!l[0][0].length);G&&(l=[]);var J=e=this.getLine(z);E=this.getLine(u);x=$jscomp.makeIterator(he.splitTextAndAttributesAt(J.textAndAttributes,x));var K=x.next().value;x.next();for(J.changeTextAndAttributes(G?K:he.concatTextAndAttributes(K,l.shift(),!0));l.length;){e=e.nextLine();z++;if(e===E)break;e.changeTextAndAttributes(l.shift())}if(!l.length)return l=e.stringSize-1,this.remove({start:{row:z,column:e.stringSize},end:b}),{removed:{start:p,end:b},inserted:{start:p,
end:{row:z,column:l}}};console.assert(z==u,"not end row");console.assert(e.row==z,"row != last line.row");this.remove({start:{row:z,column:0},end:b});u=[];e=l.length;for(x=0;x<e-1;x++)E=l[x],E.length||(E=["",null]),"string"===typeof E[E.length-2]?E[E.length-2]+=he.newline:E.push(he.newline,null),u.push.apply(u,$jscomp.arrayFromIterable(E));u.push.apply(u,$jscomp.arrayFromIterable(l[e-1]));l=this.insertTextAndAttributes(u,{row:z,column:0}).end;return{removed:{start:p,end:b},inserted:{start:p,end:l}}}},
{key:"wordsOfLine",value:function(b){for(var e=this.getLineString(b),l=[],p,u=0;u<e.length;u++)/[^a-z0-9_]/i.test(e[u])?p&&(p.range.end.column=u,l.push(p),p=null):(p=p||{index:l.length,string:"",range:{start:{row:b,column:u},end:{row:b,column:u}}},p.string+=e[u]);p&&(p.range.end.column=u,l.push(p));return l}},{key:"wordAt",value:function(b,e){var l=b.row,p=b.column;e=void 0===e?this.wordsOfLine(l):e;return e.find(function(u){u=u.range;var x=u.end.column;return u.start.column<=p&&p<=x})||{range:{start:{column:p,
row:l},end:{column:p,row:l}},string:""}}},{key:"wordLeft",value:function(b){var e=b.row,l=b.column,p=this.wordsOfLine(e);if(!p.length||he.lessEqPosition(b,p[0].range.start)){for(;0<=--e;)if(p=this.wordsOfLine(e),p.length)return he.arr.last(p);return{range:{start:b,end:b},string:""}}e=this.wordAt(b);return e.string?he.eqPosition(e.range.start,b)?p[e.index-1]:e:p.slice().reverse().find(function(u){return u.range.end.column<=l})||{range:{start:b,end:b},string:""}}},{key:"wordRight",value:function(b){var e=
b.column,l=b.row,p=this.wordsOfLine(b.row);if(!p.length||he.lessEqPosition(he.arr.last(p).range.end,b)){for(;++l<this.lines.length;)if(p=this.wordsOfLine(l),p.length)return p[0];return{range:{start:b,end:b},string:""}}l=this.wordAt(b);return l.string?he.eqPosition(l.range.end,b)?p[l.index+1]:l:p.find(function(u){return u.range.start.column>=e})||{range:{start:b,end:b},string:""}}},{key:"scanForward",value:function(b,e){var l=b.row,p=b.column;b=this.getLine(l);for(var u=b.text;p<b.stringSize-1;p++){var x=
e(u[p],{row:l,column:p});if(x)return x}for(;b=b.nextLine();)for(l++,u=b.text,p=0;p<b.stringSize-1;p++)if(x=e(u[p],{row:l,column:p}))return x;return null}},{key:"scanBackward",value:function(b,e){var l=b.row,p=b.column;b=this.getLine(l);var u=b.text;for(--p;0<=p;p--){var x=e(u[p],{row:l,column:p});if(x)return x}for(;b=b.prevLine();)for(l--,u=b.text,p=b.stringSize-2;0<=p;p--)if(x=e(u[p],{row:l,column:p}))return x;return null}},{key:"copy",value:function(){return new this.constructor(this.lines.slice(),
this.options)}},{key:"toString",value:function(){return"Document("+this.rowCount+" lines)"}},{key:"consistencyCheck",value:function(){var b=[],e=this.rowCount,l=this.stringSize,p=this.lines,u=this.textString,x=this.root;e!==p.length&&b.push({error:"document "+this+" row count: "+e+" !== "+p.length});u.length!==l&&b.push({error:"document "+this+" textString.length vs stringSize: "+u.length+" !== "+l});b.push.apply(b,$jscomp.arrayFromIterable(x.consistencyCheck()));e=0;for(l=p[0];l;)l!=p[e]&&b.push({error:"line iteration at "+
e+" is broken: nextLine() of "+p[e-1]+" is not "+p[e]+"!"}),e++,l=l.nextLine();p[e]&&b.push({error:"nextLine() of\n  "+p[e-1]+"\nis nullish but \n  "+p[e]+"\nexists in tree!"});if(b.length)throw Error("Consistency check of document revealed "+b.length+" error"+(1<b.length?"s":"")+":\n"+b.map(function(z){return z.error}).filter(Boolean).join("\n"));}},{key:"print",value:function(){return this.root.print(!1,0,0,"root")}},{key:"print2",value:function(){var b=System.decanonicalize("lively.lang/text-graphics.js"),
e=(System.get(b)||{}).printTree;return e?e(this.root,function(l){return l.toString()},function(l){return l.children},{padding:[2,1,2,1]}):(lively.module.module(b).load().then(function(){return console.log("lively.lang/text-graphics.js loaded")}).catch(function(l){return console.error(l)}),"Loading lively.lang/text-graphics.js lib, please try again later :P")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Document"}},{key:"fuzzyTest",value:function(){return he.documentFuzzier.run()}},
{key:"newline",get:function(){return he.newline}},{key:"fromString",value:function(b,e){return new this(b.split(he.newline),e)}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:37798,end:71716})}(void 0),Ixa=Rca=he.Document;he.default=Rca;var To=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js");
To.lessPosition=Ar;To.lessEqPosition=AA;To.eqPosition=Br;var qB=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js"),k=d.hasOwnProperty("Anchor")&&"function"===typeof d.Anchor?d.Anchor:d.Anchor=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l){e=void 0===e?{column:0,row:0}:e;this.id=b||""+(this.constructor._id=
(this.constructor._id||0)+1);this.position=e;this.insertBehavior=void 0===l?"move":l}},{key:"isAnchor",get:function(){return!0}},{key:"onDelete",value:function(b){if(To.lessEqPosition(this.position,b.start))return!1;if(To.lessEqPosition(b.start,this.position)&&To.lessEqPosition(this.position,b.end))return this.position=b.start,!0;var e=this.position,l=e.column,p=b.start,u=p.column,x=b.end;b=x.row;x=x.column;this.position={column:b!==this.position.row?l:u===x?l-(x-u):u+(l-x),row:e.row-(b-p.row)};return!0}},
{key:"onInsert",value:function(b){if(To.lessPosition(this.position,b.start)||To.eqPosition(this.position,b.start)&&"stay"===this.insertBehavior)return!1;var e=this.position,l=b.start,p=l.row;l=l.column;b=b.end;var u=b.column;this.position={column:e.column+(p!==this.position.row?0:u-l),row:e.row+(b.row-p)};return!0}},{key:"equalsPosition",value:function(b){return b?b.isAnchor?To.eqPosition(this.position,b.position):To.eqPosition(this.position,b):!1}},{key:"toString",value:function(){var b=this.position;
return"Anchor("+this.id+" "+b.row+"/"+b.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Anchor"}}],d,{pathInPackage:function(){return"text/anchors.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:82,end:3025})}(void 0);To.Anchor=qB;To.Anchor=qB;To.Anchor=qB;var Jxa=Object.freeze({__proto__:null,Anchor:qB}),
hg=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js");hg.pt=ui;hg.Color=ng;hg.connect=ll;hg.once=ts;hg.disconnect=cr;hg.Path=Qh;hg.morph=Dk;hg.GridLayout=Hu;hg.config=$l;hg.Morph=xk;hg.lessPosition=Ar;hg.minPosition=BA;hg.maxPosition=CA;hg.Icon=Fn;var rO=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),k=d.hasOwnProperty("TextSearcher")&&"function"===typeof d.TextSearcher?d.TextSearcher:d.TextSearcher=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.morph=b;this.STOP={}}},{key:"doc",get:function(){return this.morph.document}},{key:"processFind",value:function(b,e){var l=this.doc.positionToIndex(b);l=this.doc.indexToPosition(l+e.length);return{range:{start:b,end:l},match:e}}},{key:"stringSearch",value:function(b,e,l,p,u,x,z){if(u&&(hg.lessPosition(z,u.start)||hg.lessPosition(u.end,z)))return this.STOP;
l||(x=x.toLowerCase());if(x!==e[0])return null;u=z.row;z=z.column;x=b[u];b=1>=p?"":"\n"+b.slice(u+1,u+1+(p-1)).join("\n");b=x.slice(z)+b;return 0!==(l?b:b.toLowerCase()).indexOf(e)?null:this.processFind({row:u,column:z},b.slice(0,e.length))}},{key:"reSearch",value:function(b,e,l,p,u,x){if(p&&(hg.lessPosition(x,p.start)||hg.lessPosition(p.end,x)))return this.STOP;p=x.row;x=x.column;return(b=(b[p].slice(x)+(l?"\n"+b.slice(p+1).join("\n"):"")).match(e))?this.processFind({row:p,column:x},b[0]):null}},
{key:"search",value:function(b){var e=Object.assign({start:this.morph.cursorPosition,needle:"",backwards:!1,caseSensitive:!1,inRange:null},b);b=e.start;var l=e.needle,p=e.backwards,u=e.caseSensitive;e=e.inRange;if(!l)return null;e&&(b=p?hg.minPosition(e.end,b):hg.maxPosition(e.start,b));if(l instanceof RegExp){var x=(l.flags||"").split(""),z=!!l.multiline;x.splice(x.indexOf("m"),1);u||x.includes("i")||x.push("i");l=new RegExp("^"+l.source.replace(/^\^+/,""),x.join(""));l=this.reSearch.bind(this,this.doc.lineStrings,
l,z,e)}else l=String(l),u||(l=l.toLowerCase()),x=l.split(this.doc.constructor.newline).length,l=this.stringSearch.bind(this,this.doc.lineStrings,l,u,x,e);b=this.doc[p?"scanBackward":"scanForward"](b,l);return b===this.STOP?null:b}},{key:"searchForAll",value:function(b){for(var e=[],l=0;;){if(1E4<l++)throw Error("endless loop");var p=this.search(b);if(!p)return e;e.push(p);b=Object.assign({},b,{start:b.backwards?p.range.start:p.range.end})}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextSearcher"}}],
d,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:538,end:3748})}(void 0);hg.TextSearcher=rO;hg.TextSearcher=rO;hg.TextSearcher=rO;var hY=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),k=d.hasOwnProperty("SearchWidget")&&"function"===typeof d.SearchWidget?
d.SearchWidget:d.SearchWidget=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var e=this;b=void 0===b?{}:b;b.targetText&&(b.target=b.targetText);if(!b.target)throw Error("SearchWidget needs a target text morph!");$b._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);b=this.getSubmorphNamed("replaceButton");
var l=this.getSubmorphNamed("replaceAllButton");this.getSubmorphNamed("replaceInput");var p=this.getSubmorphNamed("searchInput"),u=this.getSubmorphNamed("prevButton"),x=this.getSubmorphNamed("nextButton"),z=this.getSubmorphNamed("cancelButton"),E=this.getSubmorphNamed("acceptButton");hg.connect(E,"fire",this,"execCommand",{converter:function(){return"accept search"}});hg.connect(z,"fire",this,"execCommand",{converter:function(){return"cancel search and reset cursor in text"}});hg.connect(x,"fire",
this,"execCommand",{converter:function(){return"search next"}});hg.connect(u,"fire",this,"execCommand",{converter:function(){return"search prev"}});hg.connect(p,"inputChanged",this,"search");hg.connect(b,"fire",this,"execCommand",{converter:function(){return"replace and go to next"}});hg.connect(l,"fire",this,"execCommand",{converter:function(){return"replace all"}});this.state={backwards:!1,before:null,position:null,inProgress:null,last:null};p.addCommands([{name:"realign top-bottom-center",exec:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){e.target.execCommand("realign top-bottom-center");
e.addSearchMarkersForPreview(e.state.inProgress&&e.state.inProgress.found,!1);return G.return(!0)})}}])}},{key:"focus",value:function(){var b=this;this.get("searchInput").focus();this.whenRendered().then(function(){return b.get("searchInput").invalidateTextLayout(!0,!0)})}},{key:"onBlur",value:function(b){var e=this,l=this.world();l&&setTimeout(function(){var p=l.focusedMorph;e.withAllSubmorphsDetect(function(u){return u.isFocused()})?e.get("searchInput")!=p&&e.get("replaceInput")!=p&&e.get("searchInput").focus():
e.cancelSearch(!1)})}},{key:"cleanup",value:function(){this.removeSearchMarkers();this.state.inProgress=null;this.textMap&&this.textMap.update()}},{key:"cancelSearch",value:function(b){this.state.inProgress&&(this.state.last=this.state.inProgress);this.cleanup();this.removeTextMap();if(this.state.before&&b){b=this.state.before;var e=b.scroll;this.target.selection=b.selectionRange;this.target.scroll=e;this.state.before=null}this.remove();this.target.focus()}},{key:"acceptSearch",value:function(){this.state.inProgress&&
(this.state.last=this.state.inProgress);this.applySearchResult(this.state.inProgress)&&this.state.before&&this.target.saveMark(this.state.before.position);this.get("searchInput").acceptInput();this.cleanup();this.removeTextMap();this.state.before=null;this.remove();this.target.focus()}},{key:"applySearchResult",value:function(b){if(!b||!b.found)return null;var e=this.target,l=e.selection,p=!!e.activeMark||!l.isEmpty(),u=b.found.range,x=u.start;u=u.end;x=b.backwards?x:u;p?l.lead=x:e.cursorPosition=
x;e.isLineFullyVisible(x.row)||e.centerRow();return b}},{key:"removeSearchMarkers",value:function(){var b=this;(this.target.markers||[]).forEach(function(e){e=e.id;return e.startsWith("search-highlight")&&b.target.removeMarker(e)})}},{key:"addSearchMarkers",value:function(b,e,l){l=void 0===l?!1:l;this.removeSearchMarkers();e=this.target;var p=this.textMap,u=e.whatsVisible,x=u.startRow;u=u.endRow;var z=e.document.lineStrings,E=0,G=hg.config.codeEditor.search,J=G.maxCharsPerLine;G=G.fastHighlightLineCount;
p&&3<=b.match.length&&z.length<G&&(x=0,u=z.length-1);G=!1;for(var K=window.performance.now();x<=u&&!G;x++)for(var T=z[x]||"",P=0;P<Math.min(T.length,J);P++){if(300<window.performance.now()-K){G=!0;break}if(l?0===T.slice(P).indexOf(b.match):0===T.slice(P).toLowerCase().indexOf(b.match.toLowerCase()))e.addMarker({id:"search-highlight-"+E++,range:{start:{row:x,column:P},end:{row:x,column:P+b.match.length}},style:{"border-radius":"4px","background-color":"rgba(255, 200, 0, 0.3)","box-shadow":"0 0 4px rgba(255, 200, 0, 0.3)",
"pointer-events":"none"}}),P+=b.match.length}this.state.backwards?(l=b.range.start,b=l.row,l=l.column,b={start:{row:b,column:l},end:{row:b,column:l+1}}):(l=b.range.end,b=l.row,l=l.column,b={start:{row:b,column:l-1},end:{row:b,column:l}});l={};e.addMarker({id:"search-highlight-cursor",range:b,style:(l["pointer-events"]="none",l["box-sizing"]="border-box",l[this.state.backwards?"border-left":"border-right"]="3px red solid",l)});p&&p.update()}},{key:"addSearchMarkersForPreview",value:function(b,e){e=
void 0===e?!0:e;b&&(this.addSearchMarkers(b),e&&this.target.removeMarker("search-highlight-cursor"))}},{key:"prepareForNewSearch",value:function(){var b=this.target,e=this.state,l=b.world();if(l){this.openInWorld(l.visibleBounds().center(),l);this.topRight=b.globalBounds().insetBy(5).topRight();if(b.getWindow())hg.once(b.getWindow(),"remove",this,"remove");l=this.get("searchInput");var p=b.scroll;b=b.selection;e.position=b.lead;e.before={scroll:p,position:b.lead,selectionRange:b.range,selectionReverse:b.isReverse()};
e.last&&e.last.found&&(hg.disconnect(l,"inputChanged",this,"search"),this.input=e.last.needle,hg.connect(l,"inputChanged",this,"search"),this.addSearchMarkersForPreview(e.last.found));this.focus();l.selectAll()}}},{key:"advance",value:function(b){var e=this.state.inProgress;if(e&&e.found){var l=e.found.range;e=l.start;l=l.end;this.state.position=b!==this.state.backwards?b?l:e:b?e:l}this.state.backwards=b;return this.search()}},{key:"searchNext",value:function(){return this.advance(!1)}},{key:"searchPrev",
value:function(){return this.advance(!0)}},{key:"search",value:function(){if(!this.input)return this.cleanup(),null;var b=this.state,e=b.backwards,l={backwards:e,start:b.position};b=this.target.search(this.input,l);l=this.state.inProgress=Object.assign({},l,{needle:this.input,found:b});this.applySearchResult(l);b?this.addSearchMarkers(b,e):this.cleanup();return l}},{key:"showTextMap",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(System.import("lively.morphic/text/map.js"),
2);e=b.textMap=hg.morph({type:"textmap"});e.attachTo(b.target);e.isLayoutable=!1;b.addMorph(e);e.topRight=b.innerBounds().bottomRight().addXY(0,5);e.height=b.target.height-b.height-15;e.update();b.renderOnGPU=!0;return l.return(e)})}},{key:"removeTextMap",value:function(){this.textMap&&(this.textMap.remove(),this.textMap.detachFromCurrentTextMorph(),this.textMap=null)}},{key:"keybindings",get:function(){return[{keys:"Enter",command:"search next or replace and go to next"},{keys:"Alt-Enter",command:"only search prev"},
{keys:"Tab",command:"change focus"},{keys:{mac:"Ctrl-O",win:"Alt-O"},command:"occur with search term"},{keys:"Ctrl-W",command:"yank next word from text"},{keys:"Escape",command:"cancel search"},{keys:{win:"Ctrl-F|Ctrl-S|Ctrl-G",mac:"Meta-F|Ctrl-S|Meta-G"},command:"search next"},{keys:{win:"Ctrl-Shift-F|Ctrl-R|Ctrl-Shift-G",mac:"Meta-Shift-F|Ctrl-R|Meta-Shift-G"},command:"search prev"}]}},{key:"commands",get:function(){var b=this;return[{name:"occur with search term",exec:function(){var e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==
p.nextAddress)return p.yield(System.import("lively.morphic/text/occur.js"),2);e=p.yieldResult;l=e.occurStartCommand;b.target.addCommands([l]);b.execCommand("accept search");return p.return(b.target.execCommand("occur",{needle:b.input}))})}},{name:"accept search",exec:function(){b.acceptSearch();return!0}},{name:"cancel search and reset cursor in text",exec:function(){b.cancelSearch(!0);return!0}},{name:"cancel search",exec:function(){b.cancelSearch(!1);return!0}},{name:"search next",exec:function(){b.searchNext();
return!0}},{name:"search prev",exec:function(){b.searchPrev();return!0}},{name:"only search prev",exec:function(){if(b.get("searchInput").isFocused())return b.searchPrev(),!0}},{name:"search next or replace and go to next",exec:function(e,l,p){b.get("searchInput").acceptInput();return b.execCommand(b.get("replaceInput").isFocused()?"replace and go to next":"search next",l,p)}},{name:"replace current search location with replace input",exec:function(){var e=hg.Path("state.inProgress").get(b);if(e.found){var l=
b.get("replaceInput").textString;b.get("replaceInput").get("replaceInput").acceptInput();e.needle instanceof RegExp&&(l=e.found.match.replace(e.needle,l));b.target.replace(e.found.range,l)}return!0}},{name:"replace and go to next",exec:function(){b.execCommand("replace current search location with replace input");b.execCommand(b.state.backwards?"search prev":"search next");return!0}},{name:"replace all",exec:function(){var e=hg.Path("state.inProgress").get(b);if(e.found){e=Object.assign({},e,{start:{row:0,
column:0}});var l=b.get("replaceInput").textString;b.get("replaceInput").get("replaceInput").acceptInput();var p=(new hg.TextSearcher(b.target)).searchForAll(e);b.target.undoManager.group();p.forEach(function(u){var x=u.range;u=u.match;e.needle instanceof RegExp&&(l=u.replace(e.needle,l));b.target.replace(x,l,!0,!0,!1)});b.target.undoManager.group();b.acceptSearch()}return!0}},{name:"change focus",exec:function(){b.get("searchInput").isFocused()?b.get("replaceInput").focus():b.get("searchInput").focus();
return!0}},{name:"yank next word from text",exec:function(){var e=b.target,l=e.wordRight(),p=b.get("searchInput");p.selection.isEmpty()||(p.selection.text="");e=e.textInRange({start:e.cursorPosition,end:l.range.end});p.textString+=e;return!0}}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchWidget"}},{key:"properties",get:function(){return{name:{defaultValue:"search widget"},borderWidth:{defaultValue:1},borderColor:{defaultValue:hg.Color.gray},borderRadius:{defaultValue:3},
fill:{defaultValue:hg.Color.black.withA(.6)},epiMorph:{defaultValue:!0},target:{},state:{},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search widget"}}},input:{after:["submorphs"],get:function(){var b=this.get("searchInput").textString,e=b.match(/^\/(.*)\/([a-z]*)$/);return e?new RegExp(e[1],e[2]):b},set:function(b){this.get("searchInput").textString=String(b)}},fontSize:{after:["submorphs"],get:function(){return this.get("searchInput").fontSize},set:function(b){this.get("replaceInput").fontSize=
b}},fontFamily:{after:["submorphs"],get:function(){return this.get("searchInput").fontFamily},set:function(b){this.get("searchInput").fontFamily=b;this.get("replaceInput").fontFamily=b}},layout:{initialize:function(){this.layout=new hg.GridLayout({groups:{nextButton:{resize:!1},prevButton:{resize:!1},acceptButton:{resize:!1},cancelButton:{resize:!1}},rows:[0,{fixed:28,paddingTop:5,paddingBottom:2.5},1,{fixed:28,paddingTop:2.5,paddingBottom:5}],columns:[0,{paddingLeft:5,paddingRight:5},1,{fixed:25},
2,{fixed:25},3,{fixed:5},4,{fixed:25},5,{fixed:25},6,{fixed:10}],grid:[["searchInput","nextButton","prevButton",null,"acceptButton","cancelButton",null],["replaceInput","replaceButton","replaceButton",null,"replaceAllButton","replaceAllButton",null]]})}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[hg.morph({type:"button",name:"acceptButton",label:hg.Icon.textAttribute("check-circle")}).fit(),hg.morph({type:"button",name:"cancelButton",label:hg.Icon.textAttribute("times-circle")}).fit(),
hg.morph({type:"button",name:"nextButton",label:hg.Icon.textAttribute("arrow-alt-circle-down",{textStyleClasses:["far"]})}).fit(),hg.morph({type:"button",name:"prevButton",label:hg.Icon.textAttribute("arrow-alt-circle-up",{textStyleClasses:["far"]})}).fit(),hg.morph({type:"input",name:"searchInput",placeholder:"search input",historyId:"lively.morphic-text search"}),hg.morph({type:"input",name:"replaceInput",placeholder:"replace input",historyId:"lively.morphic-text replace"}),hg.morph({type:"button",
styleClasses:["replace"],name:"replaceButton",label:"replace"}),hg.morph({type:"button",styleClasses:["replace"],name:"replaceAllButton",label:"replace all"})];hg.connect(this.get("searchInput"),"onBlur",this,"onBlur");hg.connect(this.get("replaceInput"),"onBlur",this,"onBlur")}},textMap:{after:["submorphs"]}}}}],d,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3867,end:21677})}(hg.Morph);hg.SearchWidget=hY;hg.SearchWidget=hY;hg.SearchWidget=hY;var sO=[{name:"search in text",exec:function(a,d){d=void 0===d?{backwards:!1}:d;a=a._searchWidget||(a._searchWidget=new hg.SearchWidget({target:a,extent:hg.pt(300,20)}));a.state.backwards=d.backwards;a.prepareForNewSearch();hg.config.codeEditor.search.showTextMap&&a.showTextMap();return!0}}];hg.searchCommands=sO;hg.searchCommands=sO;hg.searchCommands=
sO;var ol=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js");ol.todo=function(a){throw Error("not yet implemented "+a);};ol.Rectangle=Fe;ol.rect=Ll;ol.pt=ui;ol.arr=Gf;ol.Range=av;var Sca=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js"),k=d.hasOwnProperty("TextLayout")&&"function"===typeof d.TextLayout?d.TextLayout:d.TextLayout=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.resetLineCharBoundsCache()}},{key:"restore",value:function(b,e){var l=function(x){var z=0;return ol.arr.flatten(ol.arr.histogram(x,x.length/3).map(function(E){var G=$jscomp.makeIterator(E);E=G.next().value;var J=G.next().value;G=G.next().value;for(var K=[],T=0;T<E;T++)K.push(ol.rect(z,0,J,G)),z+=J;return K}))};b=$jscomp.makeIterator(b);for(var p=b.next();!p.done;p=b.next()){var u=
$jscomp.makeIterator(p.value);p=u.next().value;u=u.next().value;u=l(u);this.lineCharBoundsCache.set(e.document.getLine(p),u)}}},{key:"resetLineCharBoundsCache",value:function(b){this.lineCharBoundsCache=new WeakMap;b&&!b._isDeserializing&&(this.estimateLineHeights(b),b.makeDirty())}},{key:"resetLineCharBoundsCacheOfLine",value:function(b){b&&this.lineCharBoundsCache.set(b,null)}},{key:"resetLineCharBoundsCacheOfRow",value:function(b,e){var l=b.document;b._isDeserializing&&b._initializedByCachedBounds||
l&&this.resetLineCharBoundsCacheOfLine(l.getLine(e))}},{key:"resetLineCharBoundsCacheOfRange",value:function(b,e){for(var l=e.start.row;l<=e.end.row;l++)this.resetLineCharBoundsCacheOfRow(b,l)}},{key:"estimateLineHeightsInRange",value:function(b,e){for(var l=b.document,p=b.getGlobalTransform(),u=e.start.row;u<=e.end.row;u++)this.resetLineCharBoundsCacheOfRow(b,l.getLine(u),p)}},{key:"estimateExtentOfLine",value:function(b,e,l){l=void 0===l?b.getGlobalTransform():l;var p=b.fontMetric,u=b.lineWrapping,
x=b.padding,z=b.textRenderer,E=b.debug,G=b.defaultTextStyle,J=b.getProperty("extent").x,K=x.left(),T=x.right(),P=x.top();x=x.bottom();z=z.directRenderTextLayerFn(b);var da=e.textAndAttributes,fa=[],ka;J=J-K-T;if(da&&da.length)for(var za=0,Ia=0;za<da.length;za+=2)(ka=da[za])&&ka.isMorph?(ka.position=this.pixelPositionFor(b,{row:e.row,column:Ia}).subPt(b.origin),Ia++):ka&&(Ia+=ka.length),fa.push(Object.assign({},G,{},da[za+1]));else fa.push(G);da=fa.length;for(za=G=ka=0;za<da;za++){Ia=p.defaultCharExtent(b,
{defaultTextStyle:fa[za],width:1E3,transform:l,paddingBottom:x,paddingTop:P,paddingRight:T,paddingLeft:K},z);var N=Ia.width;G=Math.max(Ia.height,G);ka+=N}b=G;l=e.text.length||1;p=Math.round(ka/da);K=l*p;K=u?Math.min(K,J):K;u&&(b=Math.round((Math.ceil(l/Math.max(3,J/p))||1)*G));E&&console.log(e.row+": "+e.height+" => "+b);e.changeExtent(K,b,!0)}},{key:"estimateLineHeights",value:function(b,e){var l=b.fontMetric,p=b.textRenderer,u=b.document,x=b.defaultTextStyle,z=b.clipMode,E=b.textAlign,G=b.padding,
J=b.lineWrapping,K=b.debug,T=b.getProperty("extent"),P=T.x,da=T.y;T=b.getGlobalTransform();var fa=G.left(),ka=G.right(),za=G.top();G=G.bottom();u=u.lines;var Ia=p.directRenderTextLayerFn(b);K&&(K=b.debugHelper(K),K.debugTextLayout||(K=!1));if(!K&&10>b.lineCount()&&3E3>b.document.stringSize&&!ol.arr.any(b.textAndAttributes,function(N){return N&&void 0!=N.fontFamily}))for(e=p.directRenderLineFn(b),e=l.manuallyComputeBoundsOfLines(b,u,0,0,{defaultTextStyle:x,width:P,height:da,clipMode:z,lineWrapping:J,
textAlign:E,transform:T,paddingLeft:fa,paddingRight:ka,paddingTop:za,paddingBottom:G},Ia,e),x=0;x<u.length;x++)K=e[x],u[x].changeExtent(K.width,K.height,!l.isFontSupported(b.fontFamily,b.fontWeight));else{for(x=l=0;x<u.length;x++)z=u[x],!e&&0<z.height||(l++,this.estimateExtentOfLine(b,z,T));b.viewState._textLayoutStale=!1;K&&K.log("estimateLineHeights, "+l+"/"+u.length+" updated, force: "+e)}}},{key:"defaultCharExtent",value:function(b){var e=b.textRenderer,l=b.fontMetric,p=b.defaultTextStyle,u=b.getGlobalTransform();
e=e.directRenderTextLayerFn(b);return l.defaultCharExtent(b,{transform:u,defaultTextStyle:p,width:1E3},e)}},{key:"textBounds",value:function(b){var e=b.document,l=b.padding,p=b.borderWidthLeft,u=b.borderWidthRight,x=b.borderWidthTop;b=b.borderWidthBottom;return new ol.Rectangle(l.left(),l.top(),Math.round(e.width+p+u),Math.round(e.height+x+b))}},{key:"isFirstLineVisible",value:function(b){return 0>=b.viewState.firstVisibleRow}},{key:"isLastLineVisible",value:function(b){return b.viewState.lastVisibleRow>=
b.lineCount()-1}},{key:"isLineVisible",value:function(b,e){return e>=b.viewState.firstVisibleRow&&e<=b.viewState.lastVisibleRow}},{key:"isLineFullyVisible",value:function(b,e){return e>=b.viewState.firstFullyVisibleRow&&e<=b.viewState.lastFullyVisibleRow}},{key:"whatsVisible",value:function(b){var e=b.viewState.firstVisibleRow,l=b.viewState.lastVisibleRow;return{lines:b.document.lines.slice(e,l),startRow:e,endRow:l}}},{key:"firstFullVisibleLine",value:function(b){return b.viewState.firstFullyVisibleRow}},
{key:"lastFullVisibleLine",value:function(b){return b.viewState.lastFullyVisibleRow}},{key:"screenLineRange",value:function(b,e,l){var p=e.row,u=e.column;u=Math.max(0,u);p=Math.min(b.lineCount()-1,Math.max(0,p));var x=this.charBoundsOfRow(b,p);u>x.length-1&&(u=x.length-1);for(var z=x[u],E=e=u,G=u+1;G<x.length&&!(x[G].y>z.y+z.height);G++)E=G;E===x.length-1&&E++;for(G=u-1;0<=G&&!(x[G].y<z.y+z.height);G--)e=G;l&&(b=b.getLine(p).slice(e,E).match(/^\s*/)[0].length,e+=b);return new ol.Range({start:{row:p,
column:e},end:{row:p,column:E}})}},{key:"rangesOfWrappedLine",value:function(b,e){for(var l=b.getLine(e).length,p=0,u=[];;){var x=this.screenLineRange(b,{row:e,column:p},!1);u.push(x);if(x.end.column>=l)break;var z=x.end.column+1;if(z>=l)break;if(z<=p){if(!b.env.renderer.getNodeForMorph(b))break;throw Error("should not happen "+x.end.column+" vs "+p);}p=z}return u}},{key:"chunkAtPos",value:function(b,e){ol.todo("chunkAtPos")}},{key:"charBoundsOfRow",value:function(b,e){e=b.document.getLine(e);b._initializedByCachedBounds&&
!this._restored&&(this.restore(b._initializedByCachedBounds,b),this._restored=!0);var l=this.lineCharBoundsCache.get(e);if(l)return l;var p=b.getProperty("extent");l=p.x;p=p.y;var u=b.fontMetric,x=b.textRenderer,z=b.defaultTextStyle,E=b.clipMode,G=b.textAlign,J=b.padding,K=b.lineWrapping,T=b.getGlobalTransform(),P=J.left(),da=J.right(),fa=J.top();J=J.bottom();var ka=x.directRenderLineFn(b);x=x.directRenderTextLayerFn(b);b=u.manuallyComputeCharBoundsOfLine(b,e,0,0,{defaultTextStyle:z,width:l,height:p,
clipMode:E,lineWrapping:K,textAlign:G,paddingLeft:P,paddingRight:da,paddingTop:fa,paddingBottom:J,transform:T},x,ka);if(b.find(function(za){return void 0==za.width&&void 0==za.height}))return b;this.lineCharBoundsCache.set(e,b);return b}},{key:"computeMaxBoundsForLineSelection",value:function(b,e){var l=e.start,p=e.end,u=b.textLayout,x=u.rangesOfWrappedLine(b,l.row).find(function(z){return z.containsPosition(l)});p=b.lineWrapping&&x?x.intersect(e).end:p;p=p.row==l.row?p:{row:p.row,column:-1};e=u.charBoundsOfRow(b,
l.row);e=0>p.column?e.slice(l.column):e.slice(l.column,p.column+1);p=l.column+(e?e.indexOf(ol.arr.max(e,function(z){return z.height})):0);return u.boundsFor(b,{row:l.row,column:p})}},{key:"boundsFor",value:function(b,e){var l=e.row;e=e.column;e=Math.max(0,e);l=Math.min(b.lineCount()-1,Math.max(0,l));var p=this.charBoundsOfRow(b,l);if(0<p.length)if(e>=p.length){var u=p[p.length-1];u=new ol.Rectangle(u.x+u.width,u.y,0,u.height)}else u=ol.Rectangle.fromLiteral(p[e]);u||(console.warn("Cannot compute bounds for line "+
l+"/"+e),u=new ol.Rectangle(0,0,0,0));e=b.document;b=b.padding;u.x+=b.left();u.y=u.y+e.computeVerticalOffsetOf(l)+b.top();return u}},{key:"pixelPositionFor",value:function(b,e){return this.boundsFor(b,e).topLeft()}},{key:"textPositionFromPoint",value:function(b,e){var l=e.addPt(b.origin),p=l.x,u=l.y,x=b.document;l=b.padding;var z=l.left(),E=l.top();if(u>x.height+E)return x.endPosition;if(u<E)return{row:0,column:0};l=x.findLineByVerticalOffset(u-E);if(!l)return{row:0,column:0};var G=l.line.row;b=this.charBoundsOfRow(b,
G);var J=b.length,K=b[0],T=b[J-1];l={row:G,column:0};p-=z;u-=E+x.computeVerticalOffsetOf(G);if(0===J||p<=K.x+Math.round(K.width/2)&&u>=K.y&&u<=K.y+K.height)return l;if(p>T.x+Math.round(T.width/2)&&u>=T.y&&u<=T.y+T.height)return l.column=J,l;z=[];for(x=J-1;0<=x;x--)if(T=E=b[x],G=T.x,J=T.width,K=T.y,T=T.height,!(u<K||u>K+T)&&(z.push(E),p>=G+Math.round(J/2)))return l.column=1===z.length?x:x+1,l;if(z.length)return l.column=b.indexOf(ol.arr.last(z)),l;p=Infinity;u=-1;for(x=0;x<b.length;x++)z=b[x],z=e.distSquared(ol.pt(z.x+
z.width/2,z.y+z.height/2)),z>=p||(p=z,u=x);l.column=u;return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextLayout"}}],d,{pathInPackage:function(){return"text/layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:244,end:17181})}(void 0),Kxa=Sca=ol.TextLayout;ol.default=Sca;var tf=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js");
tf.printViewState=function(a){var d=a.viewState,k=d.scrollTop,b=d.scrollHeight,e=d.textHeight,l=d.firstVisibleRow;d=d.lastVisibleRow;var p=a.document.lines;console.log(a+" #"+a.id.slice(0,12)+"\nscroll: "+k+" + "+b+"\nlines: "+l+" - "+d+"\nvisible lines: "+(d-l)+"\nheight: "+e+", "+p.length+" lines")};tf.installCSS=function(a){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return tf.cssInstalled=!0,k.yield(tf.waitFor(2E4,function(){return a.renderer&&a.renderer.domNode}),
2);d=k.yieldResult;tf.addOrChangeCSSDeclaration("new-text-css","\n\n    /* markers */\n\n    .newtext-marker-layer {\n      position: absolute;\n    }\n\n    /* selection / cursor */\n\n    .newtext-cursor {\n      z-index: 5;\n      pointer-events: none;\n      position: absolute;\n      background-color: black;\n    }\n\n    .hidden-cursor .newtext-cursor {\n      background-color: transparent !important;\n    }\n\n    .newtext-cursor.diminished {\n      background-color: gray;\n    }\n\n    .newtext-selection-layer {\n      position: absolute;\n    }\n\n    /*-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* text layer / content */\n\n    .newtext-text-layer {\n      box-sizing: border-box;\n      position: absolute;\n      white-space: pre;\n      z-index: 0;\n      min-width: 100%;\n      pointer-events: none;\n    }\n\n    .newtext-before-filler {}\n\n    .newtext-text-layer.wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-word;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.only-wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.wrap-by-chars {\n      white-space: pre-wrap;\n      word-break: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.no-wrapping {\n    }\n\n    .newtext-text-layer a {\n       pointer-events: auto;\n    }\n\n    .newtext-text-layer.auto-width .line {\n      width: fit-content;\n    }\n\n    .newtext-text-layer .line {\n      -moz-border-radius: 0;\n      -webkit-border-radius: 0;\n      border-radius: 0;\n      border-width: 0;\n      background: transparent;\n      font-family: inherit;\n      font-size: inherit;\n      margin: 0;\n      word-wrap: normal;\n      line-height: inherit;\n      color: inherit;\n      position: relative;\n      overflow: visible;\n      -webkit-tap-highlight-color: transparent;\n      -webkit-font-variant-ligatures: contextual;\n      font-variant-ligatures: contextual;\n    }\n\n    .line > .Morph {\n      display: inline-block !important;\n      vertical-align: top !important;\n    }\n\n    blockquote {\n      margin: 0;\n      -webkit-margin-start: 0;\n      -webkit-margin-end: 0;\n    }\n\n    .newtext-text-layer blockquote {\n      margin-left: 2em;\n      margin-right: 2em;\n      border-left: 2px lightgray solid;\n      padding-left: 2%;\n    }\n\n    /* -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* debug styling */\n\n    .debug-info {\n      position: absolute;\n      outline: 1px solid green;\n      pointer-events: none;\n      z-index: 4;\n      text-align: center;\n      font-family: monospace;\n      color: green;\n      background-color: white;\n      font-size: small;\n      vertical-align: baseline;\n    }\n\n    .debug-line {\n      position: absolute;\n      outline: 1px solid red;\n      pointer-events: none;\n      z-index: 4,\n      text-align: right;\n      font-family: monospace;\n      font-size: small;\n      vertical-align: baseline;\n      color: red;\n    }\n\n    .debug-char {\n      position: absolute;\n      outline: 1px solid orange;\n      pointer-events: none;\n      z-index: 3\n    }\n\n  ",
d.getRootNode());k.jumpToEnd()})};tf.extractHTMLFromTextMorph=zL;tf.obj=eg;tf.arr=Gf;tf.num=zl;tf.pt=ui;tf.Rectangle=Fe;tf.vdom=XE;tf.defaultAttributes=Fz;tf.defaultStyle=Ez;tf.addOrChangeCSSDeclaration=fr;tf.hyperscriptFnForDocument=LM;tf.objectReplacementChar="\ufffd";tf.config=$l;tf.getSvgVertices=Dz;tf.waitFor=Jv;var tO=tf.vdom;tf.h=tO.h;tf.create=tO.create;tf.patch=tO.patch;tf.diff=tO.diff;tf.cssInstalled=!1;tf.debug=!!tf.config.onloadURLQuery["debug-text"];tf.nextTick=function(a,d,k,b,e,l){for(;!e&&
k<d.length;)e=a[d[k++]+"equestAnimationFrame"];return e&&e.bind(a)||a.setImmediate||function(p){a.setTimeout(p,0)}}("undefined"!==typeof window?window:global,["r","webkitR","mozR","msR","oR"],0);(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),k=d.hasOwnProperty("AfterTextRenderHook")&&"function"===typeof d.AfterTextRenderHook?d.AfterTextRenderHook:d.AfterTextRenderHook=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $b(k,a,[{key:"reset",value:function(b){this.morph=b;this.needsRerender=this.called=!1}},{key:"updateLineHeightOfNode",value:function(b,e,l){if(0===e.height||e.hasEstimatedExtent){var p=b.getGlobalTransform().inverse();p.e=p.f=0;var u=1!=p.getScale()||0!=p.getRotation();u&&(l.style.transform=p.toString());var x=l.getBoundingClientRect();p=x.height;x=x.width;u&&(l.style.transform="");p&&x&&(e.height!==p||e.width!==x)&&b.fontMetric.isFontSupported(b.fontFamily,b.fontWeight)&&(e.changeExtent(x,
p,!1),b.textLayout.resetLineCharBoundsCacheOfLine(e),this.needsRerender=!0,b.viewState._needsFit=!0);if(e.textAndAttributes&&e.textAndAttributes.length)for(x=u=0;u<e.textAndAttributes.length;u+=2)(l=e.textAndAttributes[u])&&l.isMorph?(b._positioningSubmorph=l,l.position=b.textLayout.pixelPositionFor(b,{row:e.row,column:x}).subPt(b.origin),l._dirty=!1,b._positioningSubmorph=null,x++):l&&(x+=l.length);return p}return e.height}},{key:"updateExtentsOfLines",value:function(b){var e=this.morph,l=e.viewState,
p=e.fontMetric;l.dom_nodes=[];l.dom_nodeFirstRow=0;l.textWidth=b.scrollWidth;b=b.children;for(var u=0,x;u<b.length&&"line"!=b[u].className;)u++;if(u<b.length){x=b[u];var z=x.dataset;z=Number(z?z.row:x.getAttribute("data-row"));if("number"===typeof z&&!isNaN(z)){l.dom_nodeFirstRow=z;x=0;z=e.document.getLine(z);for(var E;u<b.length;u++){var G=b[u];l.dom_nodes.push(G);z&&(E||(E=z.hasEstimatedExtent),z.hasEstimatedExtent=E,x+=this.updateLineHeightOfNode(e,z,G),z.hasEstimatedExtent=!p.isFontSupported(e.fontFamily,
e.fontWeight),z=z.nextLine())}this.needsRerender?(e.fitIfNeeded(),e.makeDirty()):e._dirty=!!e.submorphs.find(function(J){return J.needsRerender()})}}}},{key:"hook",value:function(b,e,l){b&&b.parentNode&&(e=this.morph.viewState,e.text_layer_node=b,e.fontmetric_text_layer_node=null,this.called=!0,this.updateExtentsOfLines(b))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AfterTextRenderHook"}}],d,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5104,end:9179})})(void 0);var Tca=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),k=d.hasOwnProperty("TextRenderer")&&"function"===typeof d.TextRenderer?d.TextRenderer:d.TextRenderer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,
a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b.domEnv?tf.cssInstalled||tf.installCSS(b):console.warn("Text renderer initialized without domEnv. Depending on what you want to do you might have bad luck...!");this.domEnv=b.domEnv}},{key:"directRenderLineFn",value:function(b){var e=this,l=b.viewState._renderLineFn;if(!l){var p=tf.hyperscriptFnForDocument(this.domEnv.document);l=b.viewState._renderLineFn=function(u){return e.renderLine(p,null,b,u)}}return l}},{key:"directRenderTextLayerFn",
value:function(b){var e=this,l=b.viewState._renderTextLayerFn;if(!l){var p=tf.hyperscriptFnForDocument(this.domEnv.document);l=b.viewState._renderTextLayerFn=function(u){return e.renderJustTextLayerNode(p,b,u,[])}}return l}},{key:"renderMorph",value:function(b,e){var l=b.cursorWidth||1,p=[],u=b.selection;if(b.inMultiSelectMode()){l=u.selections;for(u=0;u<l.length-1;u++)p.push.apply(p,$jscomp.arrayFromIterable(this.renderSelectionLayer(b,l[u],!0,2)));p.push.apply(p,$jscomp.arrayFromIterable(this.renderSelectionLayer(b,
l[u],!1,4)))}else p=this.renderSelectionLayer(b,u,!1,l);l=this.renderTextLayer(b,e);u=this.renderJustTextLayerNode(tf.h,b,null,[]);var x=this.renderMarkerLayer(b,e),z=b.document.width>b.width?b.scrollbarOffset:tf.pt(0,0);z=tf.h("div",{className:"scrollLayer",style:Object.assign({position:"absolute",top:"0px"},b.viewState.fastScroll?{overflow:b.scrollActive?b.clipMode:"hidden"}:{},{width:b.width+"px",height:b.height+"px"})},[tf.h("div",{style:{width:Math.max(b.document.width,b.width)+"px",height:Math.max(b.document.height,
b.height)-z.y+"px"}})]);l.properties.className+=" actual";l.properties.style.overflow="visible"===b.clipMode?"visible":"hidden";u.properties.className+=" font-measure";var E=b.embeddedMorphMap,G=E?b.submorphs.filter(function(J){return!E.has(J)}):b.submorphs;p=[].concat($jscomp.arrayFromIterable(p),[x,u,l,e.renderSelectedSubmorphs(b,G)]);return tf.h("div",Object.assign({},tf.defaultAttributes(b,e),{style:Object.assign({},tf.defaultStyle(b),{},b.viewState.fastScroll?{overflow:"visible"==b.clipMode?
"visible":"hidden"}:{},{"-moz-user-select":"none",cursor:"auto"===b.nativeCursor?b.readOnly?"default":"text":b.nativeCursor})}),[z].concat($jscomp.arrayFromIterable(b.viewState.fastScroll?[tf.h("div",{className:"scrollWrapper",style:{"pointer-events":"none",position:"absolute",width:"100%",height:"100%",transform:"translate(-"+b.scroll.x+"px, -"+b.scroll.y+"px)"}},p)]:p)))}},{key:"renderTextLayer",value:function(b,e){var l=this,p=b.debug?[].concat($jscomp.arrayFromIterable(this.renderDebugLayer(b)),
$jscomp.arrayFromIterable(this.renderLines(tf.h,e,b))):this.renderLines(tf.h,e,b);p=this.renderJustTextLayerNode(tf.h,b,null,p);p.properties.style.position="absolute";var u=b.viewState.afterTextRenderHook||(b.viewState.afterTextRenderHook=new tf.AfterTextRenderHook);u.reset(b);p.properties["after-text-render-hook"]=u;tf.nextTick(function(){l.manuallyTriggerTextRenderHook(b,e)});return p}},{key:"manuallyTriggerTextRenderHook",value:function(b,e){var l=b.viewState.afterTextRenderHook;l&&!l.called&&
((e=(e=e.getNodeForMorph(b))&&e.querySelector(".actual.newtext-text-layer"))&&l.hook(e),b.ownerChain().every(function(p){return p.visible})&&b.fit())}},{key:"renderJustTextLayerNode",value:function(b,e,l,p){var u=e.padding,x=u.x,z=u.y,E=e.fixedWidth,G=e.fixedHeight,J=e.backgroundColor,K=e.fontColor,T=e.textAlign,P=e.fontSize,da=e.textDecoration,fa=e.fontStyle,ka=e.fontWeight,za=e.fontFamily,Ia=e.lineHeight,N=e.wordSpacing,ia=e.letterSpacing,W=e.tabWidth,ca=x+u.width;u=z+u.height;var sa=Math.max(e.document.height,
e.height),la="newtext-text-layer";switch(e.lineWrapping){case !0:case "by-words":la+=" wrap-by-words";break;case "only-by-words":la+=" only-wrap-by-words";break;case "by-chars":la+=" wrap-by-chars";break;case !1:la+=" no-wrapping"}E||(la+=" auto-width");G||(la+=" auto-height");e={height:sa+"px"};0<x&&(e.paddingLeft=x+"px");0<ca&&(e.paddingRight=ca+"px");0<z&&(e.paddingTop=z+"px");0<u&&(e.paddingBottom=u+"px");ia&&(e.letterSpacing=ia);N&&(e.wordSpacing=N);Ia&&(e.lineHeight=Ia);za&&(e.fontFamily=za);
ka&&(e.fontWeight=ka);fa&&(e.fontStyle=fa);da&&(e.textDecoration=da);P&&(e.fontSize=P+"px");T&&(e.textAlign=T);K&&(e.color=String(K));J&&(e.backgroundColor=J);8!==W&&(e.tabSize=W);x={className:la,style:e};e.overflow="hidden";l&&(z=l.clipMode,J=l.height,l=l.width,"number"===typeof l&&(e.width=l+"px"),"number"===typeof J&&(e.height=J+"px"),z&&(e.overflow=z));return b("div",x,p)}},{key:"renderLines",value:function(b,e,l){var p=l.height,u=l.scroll,x=l.padding.y,z=l.document,E=l.clipMode;e.getNodeForMorph(l);
u=u.y;var G=z.rowCount-1,J=z.height,K="visible"!==E,T=z.findLineByVerticalOffset(K?Math.max(0,K?u-x:0):0)||{row:0,y:0,offset:0,line:z.getLine(0)},P=T.line,da=T.offset;E=T.y;T=T.row;x=z.findLineByVerticalOffset(K?Math.min(J,u-x+p):J)||{row:G,offset:0,y:0,line:z.getLine(G)};z=x.line;var fa=x.offset,ka=x.row;x=K?T:0;da=0===da?T:T+1;G=K?ka+1:G;K=z&&fa!==z.height?ka-1:ka;this.maxVisibleLines=Math.max(this.maxVisibleLines||1,G-x+1);T=[];z=[];z.push(b("div.newtext-before-filler",{key:"filler",style:{height:E+
"px"}}));for(fa=0;fa<this.maxVisibleLines&&(T.push(P),ka=this.renderLine(b,e,l,P),z.push(ka),ka.key=P.row%this.maxVisibleLines,fa++,P=P.nextLine(),P););Object.assign(l.viewState,{scrollTop:u,scrollHeight:p,scrollBottom:u+p,heightBefore:E,textHeight:J,firstVisibleRow:x,lastVisibleRow:G,firstFullyVisibleRow:da,lastFullyVisibleRow:K,visibleLines:T});l.debug&&tf.printViewState(l);return z}},{key:"renderLine",value:function(b,e,l,p){var u=p.textAndAttributes,x=[],z=u.length,E=l.fontSize;if(0<z)for(var G=
0;G<z;G+=2){var J=u[G]||"\u00a0";var K=u[G+1];if("string"!==typeof J)x.push(J.isMorph?this.renderEmbeddedSubmorph(b,e,J,K):tf.objectReplacementChar);else if(K){var T=K.fontSize&&(tf.obj.isString(K.fontSize)?K.fontSize:K.fontSize+"px");var P=K.fontFamily;var da=K.fontWeight;var fa=K.fontStyle;var ka=K.textDecoration;var za=K.fontColor;var Ia=K.backgroundColor;var N=K.nativeCursor;var ia=K.textStyleClasses;var W=K.link;var ca=K.lineHeight||ca;var sa=K.textAlign||sa;var la=K.wordSpacing||la;var Aa=K.letterSpacing||
Aa;var ib=K.paddingRight;var ob=K.paddingLeft;var Ea=K.paddingTop;var ua=K.paddingBottom;var ya=K.verticalAlign;var Sa=K.textStroke;var Qb=K.quote||Qb;var mc="span";var Yb={};var fc={style:Yb};T&&K.fontSize<E&&(E=K.fontSize);W&&(mc="a",(fc.href=W)&&W.startsWith("http")&&(fc.target="_blank"));if(W||N)Yb.pointerEvents="auto";T&&(Yb.fontSize=T);P&&(Yb.fontFamily=P);da&&(Yb.fontWeight=da);fa&&(Yb.fontStyle=fa);ka&&(Yb.textDecoration=ka);za&&(Yb.color=String(za));Ia&&(Yb.backgroundColor=String(Ia));N&&
(Yb.cursor=N);ib&&(Yb.paddingRight=ib);ob&&(Yb.paddingLeft=ob);Ea&&(Yb.paddingTop=Ea);ua&&(Yb.paddingBottom=ua);ya&&(Yb.verticalAlign=ya);Sa&&(Yb["-webkit-text-stroke"]=Sa);K.doit&&(Yb.pointerEvents="auto",Yb.cursor="pointer");ia&&ia.length&&(fc.className=ia.join(" "));x.push(b(mc,fc,J))}else x.push(J)}else x.push(b("br"));e={};l.fontSize>E&&(e.fontSize=E+"px");ca&&(e.lineHeight=ca);sa&&(e.textAlign=sa);Aa&&(e.letterSpacing=Aa);la&&(e.wordSpacing=la);l=b("div",{className:"line",style:e,dataset:{row:p.row}},
x);if(Qb)for("number"!==typeof Qb&&(Qb=1);Qb--;)l=b("blockquote",{},l);return l}},{key:"renderEmbeddedSubmorph",value:function(b,e,l,p){p=p||{};if(e)return b=e.render(l),b.properties.style.position="relative",b.properties.style.transform="",b.properties.style.textAlign="initial",p.paddingTop&&(b.properties.style.marginTop=p.paddingTop),p.paddingLeft&&(b.properties.style.marginLeft=p.paddingLeft),p.paddingRight&&(b.properties.style.marginRight=p.paddingRight),p.paddingBottom&&(b.properties.style.marginBottom=
p.paddingBottom),b;e=l.extent;p=e.x+"px";e=e.y+"px";return b("div",{className:l.styleClasses.join(" "),style:{width:p,height:e}},[])}},{key:"renderSelectionLayer",value:function(b,e,l,p){l=void 0===l?!1:l;p=void 0===p?2:p;if(!e)return[];var u=b.textLayout,x=e.start,z=e.end,E=e.cursorVisible,G=e.selectionColor,J=b.document,K=b.cursorColor,T=e.isReverse();x=u.boundsFor(b,x);var P=u.computeMaxBoundsForLineSelection(b,e),da=u.boundsFor(b,z);tf.pt(x.x,P.y);P=tf.pt(da.x,da.y);z=x.height;da=da.height;x=
T?tf.pt(x.x,x.y):P;l=this.cursor(x,T?z:da,E,l,p,K);if(e.isEmpty())return[l];p=[];E=e.start.row;K=J.computeVerticalOffsetOf(E)+b.padding.top();T=b.padding.left();for(var fa,ka,za;E<=e.end.row;){z=J.getLine(E);if(!(E<b.viewState.firstVisibleRow-50)){if(E>b.viewState.lastVisibleRow+50)break;x=u.charBoundsOfRow(b,E).map(tf.Rectangle.fromLiteral);da=E==e.start.row;if(za=x[0].bottom()<tf.arr.last(x).top()){P=u.rangesOfWrappedLine(b,E).map(function(W){return W.intersect(e)});ka=da;var Ia=0,N=fa=void 0,ia=
$jscomp.makeIterator(P);for(P=ia.next();!P.done;P=ia.next())P=P.value,P.isEmpty()||(fa=x.slice(P.start.column,P.end.column),Ia=ka?tf.arr.min(fa.map(function(W){return W.top()})):Ia,N=tf.arr.max(fa.map(function(W){return W.bottom()})),ka=fa[0],P=tf.pt(T+ka.left(),K+Ia),ka=tf.arr.last(fa),fa=tf.pt(T+ka.right(),K+N),Ia=N,ka=!1,p.push(tf.Rectangle.fromAny(P,fa)))}za||(za=E==e.end.row,P=da?e.start.column:0,Ia=za?e.end.column:x.length-1,da=da&&tf.arr.min(x.slice(P,Ia+1).map(function(W){return W.top()}))||
0,ia=P>=Ia?5:0,ka=x[P],P=tf.pt(T+(ka?ka.left():tf.arr.last(x).right()),K+da),ka=x[Ia],e.includingLineEnd?fa=tf.pt(b.width-b.padding.right(),K+da+z.height):(za=za&&e.end.column<=x.length-1,fa=tf.pt(T+(ka?za?ka.left():ka.right():tf.arr.last(x).right())+ia,K+da+z.height)),p.push(tf.Rectangle.fromAny(P,fa)))}K+=z.height;E++}b=this.selectionLayerRounded(p,G,b);b.push(l);return b}},{key:"selectionLayerRounded",value:function(b,e,l){var p=[l={left:[],right:[]}];b=$jscomp.makeIterator(b);for(var u=b.next();!u.done;u=
b.next()){u=u.value;x&&(x.left()>u.right()||x.right()<u.left())&&p.push(l={left:[],right:[]});l.left.push(u.topLeft(),u.bottomLeft());l.right.push(u.topRight(),u.bottomRight());var x=u}x=[];l={};p=$jscomp.makeIterator(p);for(b=p.next();!b.done;l={$jscomp$loop$prop$pos$2734:l.$jscomp$loop$prop$pos$2734},b=p.next())if(b=b.value,b.left.length){l.$jscomp$loop$prop$pos$2734=b.left.reduce(function(T,P){return T.minPt(P)});u=b.left.concat(b.right.reverse());b=[];for(var z=0;z<u.length;z++){var E=u[z-1]||
tf.arr.last(u),G=u[z],J=u[z+1]||tf.arr.first(u),K=E.subPt(G).normalized().scaleBy(6);E=G.addPt(K);E._next=K.scaleBy(-1);J=J.subPt(G).normalized().scaleBy(6);G=G.addPt(J);G._prev=J.scaleBy(-1);b.push(E,G)}b=b.map(function(T){return function(P){return{position:P.subPt(T.$jscomp$loop$prop$pos$2734),isSmooth:!0,controlPoints:{next:P._next||tf.pt(0),previous:P._prev||tf.pt(0)}}}}(l));u=tf.getSvgVertices(b);G=b.map(function(T){return T.position}).reduce(function(T,P){return T.minPt(P)});z=G.y;G=G.x;b=b.map(function(T){return T.position}).reduce(function(T,
P){return T.maxPt(P)});x.push(tf.h("svg",{namespace:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute",left:l.$jscomp$loop$prop$pos$2734.x+"px",top:l.$jscomp$loop$prop$pos$2734.y+"px",width:b.x-G,height:b.y-z}},tf.h("path",{namespace:"http://www.w3.org/2000/svg",attributes:{d:u,fill:e.toString()}})))}return x}},{key:"cursor",value:function(b,e,l,p,u,x){return tf.h("div",{className:"newtext-cursor"+(p?" diminished":""),style:{left:b.x-Math.ceil(u/2)+"px",top:b.y+"px",width:u+"px",
height:e+"px",display:l?"":"none",background:x||"black"}})}},{key:"renderMarkerLayer",value:function(b){var e=b.markers,l=b.textLayout,p=b.viewState,u=p.firstVisibleRow;p=p.lastVisibleRow;var x=[];if(!e)return x;e=$jscomp.makeIterator(e);for(var z=e.next();!z.done;z=e.next()){var E=z.value;z=E.style;E=E.range;var G=E.start;E=E.end;if(!(E.row<u||G.row>p))if(G.row===E.row)x.push(this.renderMarkerPart(l,b,G,E,z));else{x.push(this.renderMarkerPart(l,b,G,b.lineRange(G.row).end,z));for(G=G.row+1;G<=E.row-
1;G++){var J=b.lineRange(G);x.push(this.renderMarkerPart(l,b,J.start,J.end,z,!0))}x.push(this.renderMarkerPart(l,b,{row:E.row,column:0},E,z))}}return x}},{key:"renderMarkerPart",value:function(b,e,l,p,u,x){x=void 0===x?!1:x;var z=e.document;var E=z.getLine(l.row);x?(b=e.padding,x=b.left(),l=b.top()+z.computeVerticalOffsetOf(l.row),b=x+E.width,E=E.height):(E=b.boundsFor(e,l),x=E.x,l=E.y,E=b.boundsFor(e,p),b=E.x,E=E.height);E=Math.ceil(E);return tf.h("div.newtext-marker-layer",{style:Object.assign({},
u,{left:x+"px",top:l+"px",height:E+"px",width:b-x+"px"})})}},{key:"renderDebugLayer",value:function(b){var e=[],l=b.viewState,p=l.heightBefore,u=l.firstVisibleRow,x=l.lastVisibleRow;l=l.visibleLines;var z=b.padding,E=b.scroll,G=E.x,J=E.y;E=z.left();var K=z.right(),T=z.top();z.bottom();e.push(tf.h("div.debug-info",{style:{left:G+E+"px",top:J+"px",width:b.width-K+"px"}},tf.h("span","visible rows: "+u+" - "+x)));for(z=0;u<x;z++,u++){var P=l[z];J=b.textLayout.lineCharBoundsCache.get(P);P=P.height;e.push(tf.h("div.debug-line",
{style:{left:G+E+"px",top:T+p+"px",width:b.width-K+"px",height:P+"px"}},tf.h("span",String(u))));if(J)for(var da=0;da<J.length;da++){var fa=J[da];e.push(tf.h("div.debug-char",{style:{left:E+fa.x+"px",top:T+p+fa.y+"px",width:fa.width+"px",height:fa.height+"px"}}))}p+=P}return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextRenderer"}}],d,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9196,end:36226})}(void 0),Lxa=Tca=tf.TextRenderer;tf.extractHTMLFromTextMorph=zL;tf.extractHTMLFromTextMorph=zL;tf.default=Tca;var Uo=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js");Uo.arr=Gf;Uo.eqPosition=Br;Uo.KeyHandler=rW;Uo.commands={activate:{name:"[IyGotoChar] activate",exec:function(a,d){d=void 0===d?{backwards:!1}:d;Uo.IyGotoCharKeyHandler.installInto(a,d.backwards);return!0}},moveTo:{name:"[IyGotoChar] move to",
exec:function(a,d){a.saveMark();var k=a.selection,b=k.lead,e=b.row,l=b.column;b=!!a.activeMark||!k.isEmpty();var p={row:e,column:l-1};a=a.document[d.backwards?"scanBackward":"scanForward"](p,function(u,x){return u!==d.needle||Uo.eqPosition(p,x)?null:x});if(!a)return!0;a.column++;k.lead=a;b||(k.anchor=a);return!0},multiSelectAction:"forEach",readOnly:!0}};var uO=Uo.commands.activate;Uo.activate=uO;Uo.activate=uO;Uo.activate=uO;(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js"),
k=d.hasOwnProperty("IyGotoCharKeyHandler")&&"function"===typeof d.IyGotoCharKeyHandler?d.IyGotoCharKeyHandler:d.IyGotoCharKeyHandler=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?!1:b;$b._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.charToFind=void 0;this.backwards=b}},
{key:"isIyGoToChar",get:function(){return!0}},{key:"uninstallFrom",value:function(b){b._cachedKeyhandlers=null;Uo.arr.remove(b._keyhandlers||[],this)}},{key:"eventCommandLookup",value:function(b,e){var l=e.keyCombo,p=l.startsWith("input-");if(e.onlyModifiers||l.startsWith("Shift-")||!p&&!e.isModified&&!e.isFunctionKey)return{command:"null",passEvent:!0};e=p&&l.slice(6);if(!this.charToFind)if(p)this.charToFind=e;else return this.uninstallFrom(b),null;return e!==this.charToFind?(this.uninstallFrom(b),
null):{command:Uo.commands.moveTo,args:{backwards:this.backwards,needle:e}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IyGotoCharKeyHandler"}},{key:"installInto",value:function(b,e){e=void 0===e?!1:e;b.keyhandlers.filter(function(l){return l.isIyGoToChar}).forEach(function(l){return l.uninstallFrom(b)});b._cachedKeyhandlers=null;b._keyhandlers=(b._keyhandlers||[]).concat(new this(e))}}],d,{pathInPackage:function(){return"text/iy-goto-char.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1063,end:3067})})(Uo.KeyHandler);var li=lively.FreezerRuntime.recorderFor("lively.morphic/text/commands.js");li.chain=so;li.arr=Gf;li.string=Dh;li.date=Er;li.pt=ui;li.Range=av;li.eqPosition=Br;li.commands=[{name:"clipboard copy",doc:"placeholder for native copy",scrollCursorIntoView:!1,exec:function(a){a.selection.isEmpty()&&a.selectLine(a.cursorPosition.row);
return!0}},{name:"manual clipboard copy",doc:"attempts to copy selection via browser interface",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(a,d){d=void 0===d?{collapseSelection:!0,delete:!1,dontTryNativeClipboard:!1}:d;var k=a.selection,b=k.text,e=d.hasOwnProperty("collapseSelection")?d.collapseSelection:!0;a.saveMark(k.anchor);a.activeMark=null;(k.isMultiSelection?k.selections.slice():[k]).forEach(function(l){var p=l.isEmpty()?a.lineRange():l.range,u=a.textInRange(p);a.env.eventDispatcher.killRing.add(u);
d.delete?a.deleteText(p):!l.isEmpty()&&e&&l.collapse(l.lead)});d.dontTryNativeClipboard||a.env.eventDispatcher.doCopy(b);return!0}},{name:"clipboard cut",doc:"placeholder for native cut",exec:function(a){a.selection.isEmpty()&&a.selectLine(a.cursorPosition.row,!0);return!0}},{name:"clipboard paste",doc:"placeholder for native paste",exec:function(){return!0}},{name:"manual clipboard paste",doc:"attempts to paste from the clipboard to lively \u2013 currently requires browser extension!",multiSelectAction:"single",
exec:function(a,d){d=void 0===d?{killRingCycleBack:!1}:d;var k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b=a.env.eventDispatcher.killRing;d.killRingCycleBack&&(li.arr.last(li.arr.pluck(a.commandHandler.history,"name"))||"").includes("clipboard paste")&&(k=b.back());!k&&b.isCycling()&&(k=b.yank());k||(k=b.yank());a.selection.isMultiSelection?(a.undoManager.group(),a.selection.selections.slice(0,-1).reverse().map(function(l,p){p=b.pointer-1-p;0>p&&(p=b.buffer.length-1);return{selection:l,
pasted:b.buffer[p]||""}}).concat({selection:a.selection.defaultSelection,pasted:k}).forEach(function(l){return l.selection.text=l.pasted}),a.undoManager.group()):k&&(a.undoManager.group(),a.selection.text=k,a.undoManager.group());return e.return(!0)})}},{name:"browse clipboard",exec:function(a){var d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return d=a.env.eventDispatcher.killRing,k=d.pointer,b=d.buffer,e=b.map(function(x){return{isListItem:!0,string:li.string.truncate(x,
80).replace(/\n/g,""),value:x}}),u.yield(a.world().filterableListPrompt("select items to paste",e,{preselect:k,multiSelect:!0}),2);l=u.yieldResult;p=l.selected;p.length&&(a.undoManager.group(),a.insertTextAndSelect(p.join("\n")),a.undoManager.group());return u.return(!0)})}},{name:"text undo",doc:"undo text changes",multiSelectAction:"single",exec:function(a){a.textUndo();return!0}},{name:"text redo",doc:"redo text changes",multiSelectAction:"single",exec:function(a){a.textRedo();return!0}},{name:"select all",
doc:"Selects entire text contents.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(a){a.saveMark();a.selectAll();return!0}},{name:"delete backwards",doc:"Delete the character in front of the cursor or the selection.",exec:function(a){if(a.rejectsInput())return!1;if(a.editorPlugin&&"function"===typeof a.editorPlugin.cmd_newline&&a.editorPlugin.cmd_delete_backwards())return!0;var d=a.selection;d.isEmpty()&&d.growLeft(1);d.text="";d.collapse();a.activeMark&&(a.activeMark=null);return!0}},
{name:"delete",doc:"Delete the character following the cursor or the selection.",exec:function(a){var d=a.selection;if(a.rejectsInput())return!1;d.isEmpty()&&d.growRight(1);d.text="";d.collapse();a.activeMark&&(a.activeMark=null);return!0}},{name:"indent",scrollCursorIntoView:!1,exec:function(a){a.undoManager.group();a.withSelectedLinesDo(function(d,k){return a.insertText(a.tab,k.start)});a.undoManager.group();return!0}},{name:"outdent",scrollCursorIntoView:!1,exec:function(a){a.undoManager.group();
a.withSelectedLinesDo(function(d,k){return d.startsWith(a.tab)&&a.deleteText({start:k.start,end:{row:k.start.row,column:a.tab.length}})});a.undoManager.group();return!0}},{name:"indent according to mode",exec:function(a,d){d=void 0===d?{}:d;var k,b,e,l,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress){k=a.editorPlugin&&a.editorPlugin.mode;if(!k)return E.return(!0);l=d.hasOwnProperty("undo")?d.undo:!0;d.hasOwnProperty("firstRow")&&d.hasOwnProperty("lastRow")?
(p=d,b=p.firstRow,e=p.lastRow):a.selection.isEmpty()?b=e=a.cursorPosition.row:(u=a.selection.selectedRows,b=u.first,e=u.last);return E.yield(System.import("lively.ide/editor-modes.js"),2)}x=E.yieldResult;z=x.indentLines;l&&a.undoManager.group();z(a,k,b,e,"smart",!0,d);l&&a.undoManager.group();return E.return(!0)})}},{name:"tab - snippet expand or indent",scrollCursorIntoView:!0,exec:function(a){var d=a.snippets.find(function(k){return k.canExpand(a)});return d?(d.expandAtCursor(a),!0):a.selection.isEmpty()?
a.execCommand("insertstring",{string:a.tab}):a.execCommand("indent according to mode")}},{name:"browse snippets",scrollCursorIntoView:!0,exec:function(a){var d,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return d=a.snippets.map(function(p){return{isListItem:!0,string:p.trigger+" - "+p.expansion,value:p}}),l.yield(a.world().filterableListPrompt("select snippet",d,{requester:a}),2);k=l.yieldResult;b=$jscomp.makeIterator(k.selected);(e=b.next().value)&&e.expandAtCursor(a);
return l.return(!0)})}},{name:"transpose chars",exec:function(a){if(a.selection.isEmpty()){var d=a.cursorPosition,k=d.row,b=d.column;d=li.Range.create(k,b-1,k,b+1);var e=a.getLine(k);k=e[b-1];b=e[b];k&&b&&a.replace(d,b+k,!0)}return!0}},{name:"cycle selection contents",documentation:"If there are multiple selections, will take the text of the first one and replace the second one with it, the text of the second will replace the third, the last selection contents will replace the contents of the first.",
multiSelectAction:"single",exec:function(a){var d=a.selection.selections;a.undoManager.group();d.reduce(function(k,b){var e=b.text;b.text=k;return e},li.arr.last(d).text);a.undoManager.group();return!0}},{name:"go left",doc:"Move the cursor 1 character left. At the beginning of a line move the cursor up. If a selection is active, collapse the selection left.",exec:function(a){a.activeMark?a.selection.selectLeft(1):a.selection.goLeft(1);return!0}},{name:"go right",doc:"Move the cursor 1 character right. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",
exec:function(a){a.activeMark?a.selection.selectRight(1):a.selection.goRight(1);return!0}},{name:"go up",doc:"Move the cursor 1 line. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",scrollCursorIntoView:!0,exec:function(a){a.activeMark?a.selection.selectUp(1):a.selection.goUp(1,!0);return!0}},{name:"go down",exec:function(a){a.activeMark?a.selection.selectDown(1):a.selection.goDown(1,!0);return!0}},{name:"select left",exec:function(a){a.selection.selectLeft(1);
return!0}},{name:"select right",exec:function(a){a.selection.selectRight(1);return!0}},{name:"select up",exec:function(a){a.selection.selectUp(1,!0);return!0}},{name:"select down",exec:function(a){a.selection.selectDown(1,!0);return!0}},{name:"select line",exec:function(a){var d=a.selection,k=d.lead.row,b=a.lineRange(k,!1);d.range=d.range.equals(b)?a.lineRange(k,!0):b;return!0}},{name:"goto line start",exec:function(a,d){d=void 0===d?{select:!1}:d;d=d.select||!!a.activeMark;var k=a.selection,b=k.lead;
a=a.screenLineRange(b,!0);k.lead=li.eqPosition(b,a.start)?{column:0,row:b.row}:a.start;!d&&(k.anchor=k.lead);return!0}},{name:"goto line end",exec:function(a,d){d=void 0===d?{select:!1}:d;d=d.select||!!a.activeMark;var k=a.selection;a=a.screenLineRange(k.lead,!0);k.lead=a.end;!d&&(k.anchor=k.lead);return!0}},{name:"goto page up",exec:function(a){a.pageUpOrDown({direction:"up",select:!!a.activeMark});return!0}},{name:"goto page down",exec:function(a){a.pageUpOrDown({direction:"down",select:!!a.activeMark});
return!0}},{name:"goto page up and select",exec:function(a){a.pageUpOrDown({direction:"up",select:!0});return!0}},{name:"goto page down and select",exec:function(a){a.pageUpOrDown({direction:"down",select:!0});return!0}},{name:"goto start",exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;a.gotoDocumentStart(Object.assign({},d));return!0}},{name:"goto end",exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;a.gotoDocumentEnd(Object.assign({},d));return!0}},{name:"goto paragraph above",
exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;var k=a.paragraphRangeAbove(a.cursorPosition.row);k.start.row--;a.selection.lead=k.start;d.select||a.collapseSelection();return!0}},{name:"goto paragraph below",exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;var k=a.paragraphRangeBelow(a.cursorPosition.row);k.end.row++;a.selection.lead=k.end;d.select||a.collapseSelection();return!0}},{name:"move cursor to screen bottom in 1/3 steps",readOnly:!0,exec:function(a){var d=!!a.activeMark,
k=a.cursorPosition,b=a.textLayout.firstFullVisibleLine(a),e=a.textLayout.lastFullVisibleLine(a),l=b+Math.floor((e-b)/2);if(k.row<b)k.row=b;else if(k.row<l)k.row=l;else if(k.row<e)k.row=e;else return!0;a.selection.lead=k;d||(a.selection.anchor=a.selection.lead);return!0}},{name:"move cursor to screen top in 1/3 steps",readOnly:!0,exec:function(a){var d=!!a.activeMark,k=a.cursorPosition,b=a.textLayout.firstFullVisibleLine(a),e=a.textLayout.lastFullVisibleLine(a),l=b+Math.floor((e-b)/2);if(k.row<=b)return!0;
k.row=k.row<=l?b:k.row<=e?l:e;a.selection.lead=k;d||(a.selection.anchor=a.selection.lead);return!0}},{name:"goto line",exec:function(a){var d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return d=!!a.activeMark,k=Number,e.yield(a.world().prompt("Enter line number"),2);b=k(e.yieldResult);isNaN(b)||(d?a.selection.lead={row:b,column:0}:a.cursorPosition={row:b,column:0},a.scrollCursorIntoView(),a.focus());return e.return(!0)})}},{name:"join line",exec:function(a,
d){d=void 0===d?{withLine:"before"}:d;var k=a.selection,b=k.start,e=k.end;k=k.lead;if(!a.selection.isEmpty()){if(b.row===e.row)return!0;d=a.undoManager.ensureNewGroup(a,"join line");e=li.arr.range(0,e.row-1-b.row).map(function(l){return a.joinLine(b.row)});a.undoManager.group(d);a.selection.isMultiSelection&&(a.cursorPosition=e[0],e.slice(1).forEach(function(l){return a.selection.addRange({start:l,end:l})}));return!0}e=k.row;if("before"===d.withLine&&0>=e||"after"===d.withLine&&e>=a.document.endPosition.row)return!0;
a.undoManager.group();a.cursorPosition=a.joinLine("before"===d.withLine?e-1:e);a.undoManager.group();return!0}},{name:"split line",exec:function(a){var d=a.cursorPosition,k=a.getLine(d.row).match(/^\s*/)[0].length;a.insertText("\n"+" ".repeat(k),d);a.cursorPosition=d;return!0}},{name:"insert line",exec:function(a,d){d=void 0===d?{where:"above"}:d;var k=a.cursorPosition.row,b=a.getLine(k).match(/^\s*/)[0].length;"below"===d.where&&k++;a.insertText(" ".repeat(b)+"\n",{column:0,row:k});a.cursorPosition=
{column:b,row:k};return!0}},{name:"duplicate line or selection",exec:function(a){a.undoManager.group();var d=a.selection.end;if(a.selection.isEmpty())a.insertText(a.getLine(d.row)+"\n",{column:0,row:d.row+1});else{var k=a.selection.range;a.insertText(a.selection.text,d);a.selection=k}a.undoManager.group();return!0}},{name:"delete emtpy line or until end of line",exec:function(a){var d=a.cursorPosition,k=a.getLine(d.row);if(li.eqPosition(a.document.endPosition,d))return!0;d=k.trim()?{start:d,end:{row:d.row,
column:k.length}}:{start:{row:d.row,column:0},end:{row:d.row+1,column:0}};a.env.eventDispatcher.doCopy(a.textInRange(d));a.undoManager.group();a.deleteText(d);a.undoManager.group();return!0}},{name:"delete left until beginning of line",exec:function(a){a.activeMark&&(a.activeMark=null);if(!a.selection.isEmpty())return a.selection.text="",!0;var d=a.lineRange(),k=a.cursorPosition;if(li.eqPosition({row:k.row,column:0},k))return!0;d={start:li.eqPosition(d.start,k)?{row:k.row,column:0}:d.start,end:k};
a.deleteText(d);return!0}},{name:"move lines up",multiSelectAction:"single",exec:function(a){var d=a.selection;if(a.inMultiSelectMode()){var k=d.selections.map(function(l){return l.range});k.slice().sort(li.Range.compare).forEach(function(l){a.selection=l;a.execCommand("move lines up")});k.forEach(function(l){l.start.row--;l.end.row--});a.selection.ranges=k;return!0}d.isEmpty()||0!==d.end.column||d.growRight(-1);k=d.start;d=d.end;var b=a.getLine(k.row-1),e=a.undoManager.ensureNewGroup(a);a.insertText(b+
"\n",{row:d.row+1,column:0});a.deleteText({start:{row:k.row-1,column:0},end:{row:k.row,column:0}});a.undoManager.group(e);return!0}},{name:"move lines down",multiSelectAction:"single",exec:function(a){var d=a.selection;if(a.inMultiSelectMode()){var k=d.selections.map(function(l){return l.range});k.slice().sort(li.Range.compare).reverse().forEach(function(l){a.selection=l;a.execCommand("move lines down")});k.forEach(function(l){l.start.row++;l.end.row++});a.selection.ranges=k;return!0}d.isEmpty()||
0!==d.end.column||d.growRight(-1);var b=d.range,e=b;k=e.start;e=e.end;d.isEmpty()?b={start:{row:k.row,column:0},end:{row:k.row+1,column:0}}:0!==e.column&&(b={start:k,end:{row:e.row+1,column:0}});d=a.undoManager.ensureNewGroup(a);b=a.deleteText(b);a.insertText(b,{row:k.row+1,column:0});a.undoManager.group(d);a.selection={start:Object.assign({},k,{row:k.row+1}),end:Object.assign({},e,{row:e.row+1})};return!0}},{name:"old select word",exec:function(a){var d=a.selection;d.range=a.wordAt(d.lead).range;
return!0}},{name:"select word",exec:function(a){var d=a.selection;if(a=a.selectMatchingBrackets(a.textString,a.positionToIndex(d.lead)))d.range={start:a[0],end:a[1]+1};return!0}},{name:"select word right",exec:function(a){var d=a.selection;d.anchor=a.wordRight(d.end).range.end;return!0}},{name:"goto word left",exec:function(a,d){d=void 0===d?{select:!1}:d;d=d.select||!!a.activeMark;var k=a.wordLeft().range;a.selection.lead=k.start;d||(a.selection.anchor=k.start);return!0}},{name:"goto word right",
exec:function(a,d){d=void 0===d?{select:!1}:d;d=d.select||!!a.activeMark;var k=a.wordRight().range;a.selection.lead=k.end;d||(a.selection.anchor=k.end);return!0}},{name:"delete word right",exec:function(a){a.undoManager.group();var d=a.wordRight().range.end;d={start:a.cursorPosition,end:d};a.env.eventDispatcher.doCopy(a.textInRange(d));a.deleteText(d);a.undoManager.group();return!0}},{name:"delete word left",exec:function(a){a.undoManager.group();var d={start:a.wordLeft().range.start,end:a.cursorPosition};
a.deleteText(d);a.undoManager.group();return!0}},{name:"goto matching right",exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;var k=d.pairs||{"{":"}","[":"]","(":")","<":">"};if(k=a.findMatchingForward(a.cursorPosition,"right",k)||a.findMatchingForward(a.cursorPosition,"left",k))a.selection.lead=k,d.select||(a.selection.anchor=a.selection.lead);return!0}},{name:"goto matching left",exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;var k=d.pairs||{"}":"{","]":"[",")":"(",">":"<"};
if(k=a.findMatchingBackward(a.cursorPosition,"left",k)||a.findMatchingBackward(a.cursorPosition,"right",k))a.selection.lead=k,d.select||(a.selection.anchor=a.selection.lead);return!0}},{name:"realign top-bottom-center",doc:"Cycles through centering the cursor position, aligning it at the top, aligning it at the bottom.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(a){var d=a.charBoundsFromTextPosition(a.cursorPosition),k=d.topLeft();d=a.height-d.height;var b=a.scroll,e=b.x;b=b.y;
b=2>Math.abs(k.y-b)?k.y-d:2>Math.abs(k.y-b-.5*d)?k.y:k.y-.5*d;a.scroll=li.pt(e,b);return!0}},{name:"reverse selection",doc:"switches the selection lead and anchor",exec:function(a){var d=a.selection;if(d.isEmpty()){var k=a.popSavedMark();k&&(a.saveMark(a.cursorPosition),d.lead=k.position)}else d.reverse();return!0}},{name:"toggle active mark",doc:"....",handlesCount:!0,multiSelectAction:"single",exec:function(a,d,k){var b=a.activeMark;d=a.selection;var e=!d.isEmpty();if(4===k){if(a=a.popSavedMark())d.lead=
a.position,e||(d.anchor=d.lead);return!0}if(!b&&!e)return a.activeMark=d.lead,!0;a.saveMark(b||d.anchor);a.activeMark=null;e&&(a.inMultiSelectMode()?d.selections:[d]).forEach(function(l){return l.anchor=l.lead});return!0}},{name:"fit text to column",handlesCount:!0,multiSelectAction:"forEach",exec:function(a,d,k){function b(x,z,E){if(x.length<=e)return[z+x.trim()];E=x.slice(0,e);var G=li.arr.last(li.string.reMatches(E,p)),J=G&&0<G.start?G.start:e;G=E.slice(0,J);x=z+(E.slice(J)+x.slice(e)).trimLeft();
return[G].concat(b(x,z))}if(4===k)return a.execCommand("join line");a.selection.isEmpty()&&a.selectLine();d=a.selection;var e=k||80,l=d.selectedRows;k=d.range;var p=/[ ]+/g,u=/^[\s\t]+/;d=li.string.paragraphs(li.arr.range(l.first,l.last).map(function(x){return a.getLine(x)}).join("\n"),{keepEmptyLines:!0});d=li.chain(d.map(function(x){if(!/^\s*$/.test(x)){x=x.split("\n").join(" ");if(""===x.trim())x=[""];else{var z=x.match(u);z=z?z[0]:"";x=b(z+x.trim(),z)}x=x.join("\n")+"\n"}return x})).flatten().value().join("\n");
a.undoManager.group();a.replace(k,d);a.undoManager.group();return!0}},{name:"lowercase",exec:function(a){a.undoManager.group();a.selection.isEmpty()&&(a.selection=a.wordAt().range);a.selection.text=a.selection.text.toLowerCase();a.undoManager.group();return!0}},{name:"remove trailing whitespace",exec:function(a){a.undoManager.group();var d=0;a.withLinesDo(0,a.documentEndPosition.row,function(k,b){return k.match(/\s+$/)&&++d&&a.replace(b,k.trimRight())});a.world().setStatusMessage(d+" lines cleaned up");
a.undoManager.group();return!0}},{name:"uppercase",exec:function(a){a.undoManager.group();a.selection.isEmpty()&&(a.selection=a.wordAt().range);a.selection.text=a.selection.text.toUpperCase();a.undoManager.group();return!0}},{name:"newline",exec:function(a){var d=a.cursorPosition,k=a.getLine(d.row),b=k.match(/^\s*/)[0].length;a.undoManager.group();!k.trim()&&b&&(a.deleteText({start:{row:d.row,column:0},end:{row:d.row,column:b}}),d.column=0);if(a.editorPlugin&&"function"===typeof a.editorPlugin.cmd_newline&&
a.editorPlugin.cmd_newline(d,k,b))return!0;a.selection.text="\n"+" ".repeat(b);a.selection.collapseToEnd();a.undoManager.group();return!0}},{name:"insertstring",exec:function(a,d){var k=d=void 0===d?{string:null,undoGroup:!1}:d;d=k.string;k=k.undoGroup;var b="string"===typeof d&&d.length;b||console.warn("command insertstring called with not string value");if(a.rejectsInput()||!b)return!1;a.saveActiveMarkAndDeactivate();if(a.editorPlugin&&"function"===typeof a.editorPlugin.cmd_insertstring&&a.editorPlugin.cmd_insertstring(d))return!0;
b=a.selection;var e=!b.isEmpty();e&&a.undoManager.group();var l=b.lead;b.replace(d,!0,!0,!0,!(1===d.length&&"\n"!==d&&0<l.column));b.collapseToEnd();e&&a.undoManager.group();k&&(/^[\s\.,\?\+=]+$/.test(d)||"number"!==typeof k?a.undoManager.group():a.undoManager.groupLater(k));return!0}},{name:"toggle line wrapping",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(a){a.keepPosAtSameScrollOffsetWhile(function(){return a.lineWrapping=a.lineWrapping?!1:a.fontMetric.isProportional(a.fontFamily)?
!0:"by-chars"});return!0}},{name:"cancel input",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(a,d,k,b){a.env.eventDispatcher.resetKeyInputState();a.selection.disableMultiSelect&&a.selection.disableMultiSelect();a.selection.isEmpty()||(a.selection.anchor=a.selection.lead);a.activeMark&&(a.activeMark=null);return!0}}];li.usefulEditorCommands=[{name:"insert date",handlesCount:!0,exec:function(a,d,k){d=li.date.format(new Date,k?"mediumDate":"isoDate");a.undoManager.group();a.insertText(d);
a.undoManager.group();return!0}},{name:"[todo] toggle todo marker",exec:function(a){var d=a.selection;d.isEmpty()&&a.selectLine();a=/\[\s*\]/g;var k=/\[X\]/g,b=d.text;b=a.test(b)?b.replace(a,"[X]"):k.test(b)?b.replace(k,"[ ]"):"[ ] "+b.trimLeft();d.text=b;return!0}},{name:"selected lines: sort",exec:function(a){var d=a.selection,k=d.start.row;d=d.end.row;var b=[];a.withLinesDo(k,d,function(e){var l=b.findIndex(function(p){return p>e});-1<l?b.splice(l,0,e):b.push(e)});a.undoManager.group();a.replace({start:{row:k,
column:0},end:{row:d+1,column:0}},b.join("\n")+"\n");a.undoManager.group();return!0}},{name:"selected lines: reverse",exec:function(a){var d=a.selection,k=d.start.row;d=d.end.row;var b=[];a.withLinesDo(k,d,function(e){return b.push(e)});a.undoManager.group();a.replace({start:{row:k,column:0},end:{row:d+1,column:0}},b.reverse().join("\n")+"\n");a.undoManager.group();return!0}},{name:"selected lines: remove duplicates (uniq)",exec:function(a){var d=a.selection,k=d.start.row;d=d.end.row;var b=[];a.withLinesDo(k,
d,function(e){return li.arr.pushIfNotIncluded(b,e)});a.undoManager.group();a.replace({start:{row:k,column:0},end:{row:d+1,column:0}},b.join("\n")+"\n");a.undoManager.group();return!0}},{name:"change string inflection",handlesCount:!0,multiSelectAction:"single",exec:function(a,d,k){function b(J,K){var T,P,da=e(J).trim();"uppercased"===da?T=/\s*[A-Z0-9]+/g:"dashed"===da?T=/-\w/g:"spaced"===da&&(T=/\s+.?/g);"uppercased"===K?P=function(fa){return fa.trim().replace(/^-/,"").toUpperCase()}:"dashed"===K?
P=function(fa){return"-"+fa.trim().replace(/^-/,"").toLowerCase()}:"spaced"===K&&(P=function(fa){return" "+fa.trim().replace(/^-/,"").toLowerCase()});return J.replace(T,P)}function e(J){return J.match(/[A-Z]/)?"uppercased":J.match(/-/)?"dashed":J.match(/\s/)?"spaced":"unknown"}var l,p,u,x,z,E,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress){a.selection.isEmpty()&&(a.selection=a.wordAt().range);l=a.selection.ranges;p=a.textInRange(l[0]);if(!p)return a.setStatusMessage("Please select some text"),
J.return(!0);u=e(p);x=li.arr.without(["uppercased","dashed","spaced"],u);return J.yield(a.world().listPrompt("Convert "+u+" into?",x,{}),2)}z=J.yieldResult;E=$jscomp.makeIterator(z.selected);G=E.next().value;if(!G)return J.return(!0);a.undoManager.group();l.forEach(function(K,T){T=a.textInRange(K);T=b(T,G);a.replace(K,T)});a.undoManager.group();a.focus();return J.return(!0)})}},{name:"spell check word",exec:function(a,d){var k,b,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:return k=
a.wordAt(),k.string?z.yield(System.import("lively.ide/shell/spell-checker.js"),2):(a.setStatusMessage("no word for spellcheck!"),z.return(!0));case 2:return b=z.yieldResult,e=b.spellCheckWord,z.yield(e(k.string),3);case 3:return l=z.yieldResult,l.length?z.yield(a.world().filterableListPrompt("Choose replacement for "+k.string,l),4):(a.setStatusMessage("no suggestions for word "+k.string),z.return(!0));case 4:p=z.yieldResult;u=$jscomp.makeIterator(p.selected);if(x=u.next().value)a.undoManager.group(),
a.replace(k.range,x),a.undoManager.group();return z.return(!0)}})}},{name:"[shell] run shell command on region",multiSelectAction:"single",exec:function(a,d){var k,b,e,l,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return b=(k=a.textInRange(a.selection))&&0!==k.length?{stdin:k}:{},E.yield(a.world().prompt("Enter shell command to run on region.",{historyId:"lively.ide.execShellCommand"}),2);case 2:return e=E.yieldResult,E.yield(System.import("lively.ide/shell/shell-interface.js"),
3);case 3:l=E.yieldResult;p=l.runCommand;if(!e)return E.return(a.setStatusMessage("No command entered, aborting...!"));u=p(e,b);E.setCatchFinallyBlocks(4);return E.yield(u.whenDone(),6);case 6:x=u.output.trim();a.undoManager.group();a.selection.selections.forEach(function(G){return G.text=x});a.undoManager.group();E.leaveTryBlock(5);break;case 4:z=E.enterCatchBlock(),a.showError(z);case 5:return E.return(!0)}})}},{name:"open file at cursor",exec:function(a,d){var k,b,e,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==
G.nextAddress)return a.getLine(),k=a.cursorPosition.row,b=a.document.scanBackward(a.cursorPosition,function(J,K){return(0>=K.column||J.match(/\s/))&&K})||{row:0,column:0},e=a.document.scanForward(a.cursorPosition,function(J,K){return(K.row!=k||J.match(/\s/))&&K})||a.documentEndPosition,l=a.textInRange({start:b,end:e}).replace(/\s/g,""),p=l.split(":"),u=p[0].match(/^file|http/)?p.shift()+":"+p.shift():p.shift(),p[0].match(/^[0-9]+$/)&&(u+=":"+p.shift()),G.yield(System.import("lively.ide/text-editor.js"),
2);x=G.yieldResult;z=x.default;E=z.openInWindow();E.location=u;return G.return(E)})}},{name:"run code on text morph",doc:"...",exec:function(a,d){var k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return k={targetModule:"lively://code-on-text-morph",context:a},u.yield(a.world().editPrompt("Run code on selection. Use this.selection.text to access it",{requester:a,mode:"js",evalEnvironment:k,historyId:"run-code-on-text-morph-hist"}),2);case 2:return b=
u.yieldResult,u.setCatchFinallyBlocks(3),a.undoManager.group(),u.yield(lively.vm.runEval(b,k),5);case 5:l=u.yieldResult;a.undoManager.group();e=l.isError?l.value:null;u.leaveTryBlock(4);break;case 3:e=p=u.enterCatchBlock();case 4:return e&&a.showError(e),u.return(void 0)}})}},{name:"change editor mode",exec:function(a){var d,k,b,e,l,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return d=function(G){return!G.endsWith("ide/editor-plugin.js")&&G.endsWith("editor-plugin.js")},
E.yield(lively.modules.getPackage("lively.ide").resources(d),2);case 2:return k=E.yieldResult,b=a.editorPlugin||{},e=b.shortName,l=0,p=["<no mode>"].concat(k.map(function(G,J){var K=G.url.match(/([^\/]+)\/editor-plugin.js/)[1];K===e&&(l=J);return{isListItem:!0,string:K,value:G}})),E.yield(a.world().filterableListPrompt("choose mode",p,{requester:a,preselect:l,historyId:"lively.morphic/text-change-editor-mode-hist",fuzzy:!0}),3);case 3:u=E.yieldResult;x=$jscomp.makeIterator(u.selected);z=x.next().value;
if(!z)return E.return();if("<no mode>"!==z){E.jumpTo(4);break}return E.yield(a.changeEditorMode(null),5);case 5:return a.resetTextAttributes(),E.return();case 4:if(z.isLoaded){E.jumpTo(6);break}return E.yield(lively.modules.module(z.url).load(),6);case 6:return E.yield(a.changeEditorMode(z.url),0)}})}},{name:"report token at cursor",exec:function(a){var d,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){d=a.tokenAt(a.cursorPosition)||{};k=d.token;b=d.start;e=d.end;a.setStatusMessage(k?
k+" "+b.column+" => "+e.column:"no token");return l.return(!0)})}}];li.commands.push.apply(li.commands,$jscomp.arrayFromIterable(li.usefulEditorCommands));li.iyGotoCharActivate=uO;li.commands.push(li.iyGotoCharActivate);li.searchCommands=sO;li.commands.push.apply(li.commands,$jscomp.arrayFromIterable(li.searchCommands));var Uca=li.commands;li.default=Uca;var pd=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js");pd.Rectangle=Fe;pd.Point=sg;pd.rect=Ll;pd.Color=ng;pd.pt=ui;pd.string=Dh;
pd.num=zl;pd.obj=eg;pd.fun=Vl;pd.promise=bh;pd.arr=Gf;pd.signal=hm;pd.noUpdate=Pt;pd.connect=ll;pd.disconnect=cr;pd.bowser=Fp;pd.morph=Dk;pd.touchInputDevice=En;pd.sanitizeFont=QC;pd.config=$l;pd.Morph=xk;pd.Selection=pO;pd.MultiSelection=qO;pd.Document=Ixa;pd.objectReplacementChar="\ufffd";pd.Anchor=qB;pd.Range=av;pd.eqPosition=Br;pd.lessPosition=Ar;pd.KeyHandler=rW;pd.UndoManager=aF;pd.TextSearcher=rO;pd.TextLayout=Kxa;pd.Renderer=Lxa;pd.extractHTMLFromTextMorph=zL;pd.commands=Uca;pd.textAndAttributesWithSubRanges=
yL;pd.serializeMorph=$D;pd.deserializeMorph=aE;pd.getSvgVertices=Dz;pd.renderSubTree=yI;pd.ShadowObject=Gp;pd.getClassName=Vp;var Lq=Ma("O",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js"),k=d.hasOwnProperty("Text")&&"function"===typeof d.Text?d.Text:d.Text=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var e=
b=void 0===b?{}:b,l=e.position,p=e.rightCenter,u=e.leftCenter,x=e.topCenter,z=e.bottom,E=e.top,G=e.right,J=e.left,K=e.bottomCenter,T=e.bottomLeft,P=e.bottomRight,da=e.topRight,fa=e.topLeft;e=e.center;$b._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.undoManager.reset();this.fit();void 0!==l&&(this.position=l);void 0!==p&&(this.rightCenter=p);void 0!==u&&(this.leftCenter=u);void 0!==x&&(this.topCenter=x);void 0!==z&&(this.bottom=z);void 0!==
E&&(this.top=E);void 0!==G&&(this.right=G);void 0!==J&&(this.left=J);void 0!==K&&(this.bottomCenter=K);void 0!==T&&(this.bottomLeft=T);void 0!==P&&(this.bottomRight=P);void 0!==da&&(this.topRight=da);void 0!==fa&&(this.topLeft=fa);void 0!==e&&(this.center=e)}},{key:"__deserialize__",value:function(b,e,l,p){$b._get(Object.getPrototypeOf(k.prototype),"__deserialize__",this).call(this,b,e,l,p);this.viewState=this.defaultViewState;this.markers=[];this.textRenderer=new pd.Renderer(this.env);this.textLayout=
new pd.TextLayout(this);this.changeDocument(pd.Document.fromString(""));this.ensureUndoManager();b.cachedLineBounds&&(this._initializedByCachedBounds=b.cachedLineBounds);this._isDeserializing=!0}},{key:"__after_deserialize__",value:function(b,e,l){var p=this;$b._get(Object.getPrototypeOf(k.prototype),"__after_deserialize__",this).call(this,b,e,l);this._isDeserializing=!1;this.whenRendered().then(function(){p.embeddedMorphs.forEach(function(u){return u.top=0})})}},{key:"__only_serialize__",get:function(){return pd.arr.withoutAll($b._get(Object.getPrototypeOf(k.prototype),
"__only_serialize__",this),["document","textRenderer","viewState","undoManager","markers","textLayout","embeddedMorphMap",this.displacingMorphMap.size?"":"displacingMorphMap"])}},{key:"__additionally_serialize__",value:function(b,e,l,p){$b._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",this).call(this,b,e,l,p);b.props.selections={key:"selections",verbatim:!0,value:(this.selection.isMultiSelection?this.selection.ranges:[this.selection.range]).map(function(K){return pd.obj.select(K,
["start","end"])})};b.props.anchors&&this.selection.isEmpty()&&(b.props.anchors.value=b.props.anchors.value.filter(function(K){return!K.id.includes("selection-")}));b.props.textAndAttributes={key:"textAndAttributes",value:this.textAndAttributes.map(function(K){if(!K)return K;if(K.isMorph)return l.ref(K).asRefForSerializedObjMap();if(pd.obj.isObject(K)){var T={};K=JSON.stringify(K,function(P,da){return da&&da.__serialize__?(da=da.__serialize__(),Object.assign(T,da.bindings),"->["+(da.__expr__+"]")):
da});K=K.replace(/"->\[.*\]"/g,function(P){return P.slice(4,-2)});return l.expressionSerializer.exprStringEncode({__expr__:"("+K+")",bindings:T})}return K})};e=[];p=$jscomp.makeIterator(this.document.lines);for(var u=p.next();!u.done;u=p.next()){u=u.value;var x=this.textLayout.lineCharBoundsCache.get(u);if(x){var z=[],E=void 0,G=0;if(x){x=$jscomp.makeIterator(x);for(var J=x.next();!J.done;J=x.next()){J=J.value;if(E){if(pd.num.roundTo(E.width,.001)==pd.num.roundTo(J.width||0,.001)&&J.height==E.height){G++;
continue}z.push([G,pd.num.roundTo(E.width||0,.001),E.height||0])}G=1;E=J}}E&&z.push([G,pd.num.roundTo(E.width||0,.001),E.height||0]);e.push([u.row,pd.arr.flatten(z)])}}b.cachedLineBounds=e}},{key:"spec",value:function(){var b=$b._get(Object.getPrototypeOf(k.prototype),"spec",this).call(this);b.textString=this.textString;return pd.obj.dissoc(b,"anchors embeddedMorphMap plugins savedMarks textLayout textRenderer viewState undoManager metadata document displacingMorphMap".split(" "))}},{key:"isText",
get:function(){return!0}},{key:"makeDirty",value:function(){this._positioningSubmorph||$b._get(Object.getPrototypeOf(k.prototype),"makeDirty",this).call(this)}},{key:"onChange",value:function(b){var e=this,l=b.prop,p=b.selector,u=b.meta,x=this.lineWrapping,z=!1,E=!1,G=!1,J=!1,K=!1,T=!1;if(p)z="replace"===p,J="addTextAttribute"===p,this._displacementChange=!this._displacing&&z;else switch(l){case "scroll":K=E=!0;break;case "extent":E=!0;l=b.prevValue.subPt(b.value);T=(G=this.fixedWidth&&!!this.lineWrapping&&
!!l.x)&&(!this.fixedWidth||!this.fixedHeight);break;case "wordSpacing":case "letterSpacing":case "tabWidth":x&&(J=!0);break;case "fontFamily":case "fontSize":case "lineHeight":case "textAlign":case "fontWeight":case "fontStyle":case "textStyleClasses":case "fixedWidth":J=b.prevValue!=b.value;break;case "lineWrapping":J=!0;break;case "borderWidth":case "fixedHeight":G=b.prevValue!=b.value;break;case "padding":G=!0}$b._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);l=function(){e._textChange=
!0;K&&(e.viewState.wasScrolled=!0);(J||T||G&&!u.styleSheetChange)&&e.invalidateTextLayout(J,J);(G||J)&&e.document&&e.world()&&e.document.lines.forEach(function(P){return P.hasEstimatedExtent=!0});e._displacementChange&&(e._displacementChange=!1);z&&pd.signal(e,"textChange",b);E&&pd.signal(e,"viewChange",b);e._textChange=!1};u.animation?pd.promise.delay(u.animation.duration).then(l):this.ownerChain().every(function(P){return P.visible})&&l()}},{key:"onSubmorphChange",value:function(b,e){var l=this,
p,u,x,z,E,G,J,K,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(1==P.nextAddress){if(b.meta&&b.meta.styleSheetChange)return P.return();$b._get(Object.getPrototypeOf(k.prototype),"onSubmorphChange",l).call(l,b,e);return b.meta.animation?P.yield(b.meta.animation.asPromise(),2):P.jumpTo(2)}if(l._textChange||l._positioningSubmorph===e)return P.return();p=b;u=p.prop;x="position"==u||"extent"==u||"scale"==u||"rotation"==u;l.displacingMorphMap.get(e)&&x&&[].concat($jscomp.arrayFromIterable(l.displacingMorphMap.keys())).filter(function(da){return da.top>=
e.top}).forEach(function(da){l._intersectionShapeCache&&l._intersectionShapeCache.delete(da);l.updateTextDisplacementFor(da)});z=l.embeddedMorphMap.get(e)||{};if((E=z.anchor)&&x){if("position"==u)return l._positioningSubmorph=e,e.position=b.prevValue,l._positioningSubmorph=null,P.return();G=e.bounds();J=e._lastBounds;K=E.position.row;T=l.document.getLine(K);J&&J.height==G.height&&J.bottom()==G.bottom()||(T.hasEstimatedExtent=!0,e._lastBounds=G)}P.jumpToEnd()})}},{key:"removeMorph",value:function(b,
e){e=void 0===e?!0:e;var l=this.embeddedMorphMap,p=this.displacingMorphMap;p&&p.has(b)&&this.toggleTextWrappingAround(b,!1);if(l&&l.has(b)){if(p=l.get(b).anchor){var u=p.position;p=u.row;u=u.column;this.replace({start:{row:p,column:u},end:{row:p,column:u+1}},[],!0,e);this.replace}l.delete(b)}return $b._get(Object.getPrototypeOf(k.prototype),"removeMorph",this).call(this,b)}},{key:"toggleTextWrappingAround",value:function(b,e){var l=this;if(e)this.displacingMorphMap.has(b)||(this.embeddedMorphMap.has(b)&&
this.addMorph(b.remove()),this.displacingMorphMap.set(b,[]),this.updateTextDisplacementFor(b));else if(e=this.displacingMorphMap.get(b))this._displacing=!0,e.forEach(function(p){return l.removeMorph(p)}),this._displacing=!1,this.displacingMorphMap.delete(b)}},{key:"updateTextDisplacementFor",value:function(b){var e=this;if(!this._displacing){this._displacing=!0;var l=this.displacingMorphMap.get(b),p=this.computeDisplacementRectsFor(b).values(),u=[];l.forEach(function(J){return e.removeMorph(J,!1)});
this.textLayout.resetLineCharBoundsCacheOfRange(this,b._displacementRange);p=$jscomp.makeIterator(p);for(var x=p.next();!x.done;x=p.next()){x=x.value;var z=l.shift()||pd.morph({visible:!0,reactsToPointer:!1,isDisplacementMorph:!0}),E=this.textLayout.textPositionFromPoint(this,x.leftCenter());z.setBounds(x);this.insertText([z,{}],E);this.viewState._needsFit=!1;if(G==z.top)z.remove();else{var G=z.top;u.push(z)}}l.forEach(function(J){return e.removeMorph(J,!1)});this.displacingMorphMap.set(b,u);this._displacing=
!1}}},{key:"computeDisplacementRectsFor",value:function(b){var e=this.textLayout,l=e.textPositionFromPoint(this,b.topLeft),p=e.textPositionFromPoint(this,b.bottomLeft),u=[];b._displacementRange=pd.Range.fromPositions(l,p);for(l=l.row;l<p.row+1;l++)u.push.apply(u,$jscomp.arrayFromIterable(e.rangesOfWrappedLine(this,l)));this._intersectionShapeCache||(this._intersectionShapeCache=new Map);(p=this._intersectionShapeCache.get(b))||(p=b.isPath?pd.Shapes.path(pd.getSvgVertices(b.vertices)):"Ellipse"==pd.getClassName(b)?
pd.Shapes.ellipse(b.center.x,b.center.y,b.width/2,b.height/2):pd.Shapes.rectangle(b.left,b.top,b.width,b.height));this._intersectionShapeCache.set(b,p);b=this.width;l=new Map;u=$jscomp.makeIterator(u);for(var x=u.next();!x.done;x=u.next()){x=x.value;var z=e.computeMaxBoundsForLineSelection(this,x),E=z.height;z=z.y;var G=pd.Shapes.rectangle(b,E,0,z);G=pd.Intersection.intersect(G,p);1>G.points.length||(G=pd.Rectangle.unionPts(G.points.map(pd.Point.fromLiteral)),G.y=z,G.height=E,G.x-=15,G.width+=30,
l.set(x,G))}return l}},{key:"rejectsInput",value:function(){return this.readOnly}},{key:"addAnchor",value:function(b){if(b){"string"===typeof b&&(b={id:b,row:0,column:0});if(!b.isAnchor){var e=b,l=e.column,p=e.row;b=new pd.Anchor(e.id,"number"===typeof p&&"number"===typeof l?{row:p,column:l}:void 0,e.insertBehavior||"move")}if(e=b.id&&this.anchors.find(function(u){return u.id===b.id}))return Object.assign(e,b);this.anchors.push(b);return b}}},{key:"removeAnchor",value:function(b){for(var e=this.anchors,
l,p=e.length;p--;){var u=e[p];if(u.id==b||u===b)l=u,e.splice(p,1)}return l}},{key:"addMarker",value:function(b){this.removeMarker(b.id);this.markers.push(b);this.makeDirty();return b}},{key:"removeMarker",value:function(b){var e="string"===typeof b?b:b.id;this.markers=this.markers.filter(function(l){return l.id!==e});this.makeDirty()}},{key:"saveMark",value:function(b,e){b=void 0===b?this.cursorPosition:b;var l=this.activeMark;l&&l!==b&&!l.equalsPosition(b)&&(this.savedMarks=this.savedMarks.concat(l));
e?this.activeMark=b:this.savedMarks=this.savedMarks.concat(b)}},{key:"saveActiveMarkAndDeactivate",value:function(){var b=this.activeMark;b&&(this.saveMark(b),this.activeMark=null)}},{key:"popSavedMark",value:function(){var b=this.activeMark;if(b)return this.activeMark=null,b;b=pd.arr.last(this.savedMarks);this.savedMarks=this.savedMarks.slice(0,-1);return b}},{key:"lastSavedMark",get:function(){return this.activeMark||pd.arr.last(this.savedMarks)}},{key:"savedMarkForSelection",value:function(b){var e=
this.selection,l=this.savedMarks,p=this.multiSelect?this.multiSelect.getAllRanges().length:1;p=l.length-(p-(e.index||0));e=l[p]||e.anchor;b&&"row"in b&&"column"in b&&(this.savedMarks=l.slice(0,p).concat(b).concat(l.slice(p+1)));return e}},{key:"addPlugin",value:function(b){this.plugins.includes(b)||(this.plugins.push(b),this._cachedKeyhandlers=null,"function"===typeof b.attach&&b.attach(this));return b}},{key:"removePlugin",value:function(b){if(!this.plugins.includes(b))return!1;this._cachedKeyhandlers=
null;pd.arr.remove(this.plugins,b);"function"===typeof b.detach&&b.detach(this);return!0}},{key:"pluginCollect",value:function(b,e){e=void 0===e?[]:e;this.plugins.forEach(function(l){return"function"===typeof l[b]&&(e=l[b](e))});return e}},{key:"pluginInvokeFirst",value:function(b,e){for(var l=[],p=1;p<arguments.length;++p)l[p-1]=arguments[p];return(p=this.pluginFind(function(u){return"function"===typeof u[b]}))?p[b].apply(p,$jscomp.arrayFromIterable(l)):void 0}},{key:"pluginFind",value:function(b){return this.plugins.slice().reverse().find(b)}},
{key:"editorPlugin",get:function(){return this.pluginFind(function(b){return b.isEditorPlugin})}},{key:"lookupEditorPluginNamed",value:function(b){var e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return b=pd.config.ide.modes.aliases[b]||b,l=(e=/^[^:\\]+:\/\//.test(b))?b:"lively.ide/"+b+"/editor-plugin.js",x.yield(lively.modules.doesModuleExist(l),2);if(3!=x.nextAddress)return x.yieldResult?x.yield(lively.modules.module(l).load(),3):x.return(null);p=x.yieldResult;
u=p.default;return x.return(u)})}},{key:"changeEditorMode",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return l=e.plugins.filter(function(x){return!x.isEditorPlugin}),b?"string"!==typeof b?u.jumpTo(2):u.yield(e.lookupEditorPluginNamed(b),3):(e.plugins=l,u.return(null));if(2!=u.nextAddress){p=u.yieldResult;if(!p)throw Error("Cannot find editor mode "+b);b=new p(pd.config.codeEditor.defaultTheme);e.evalEnvironment&&(b.evalEnvironment=
e.evalEnvironment)}e.plugins=l.concat(b);return u.return(b)})}},{key:"invalidateTextLayout",value:function(b,e){e=void 0===e?!1:e;if(!this._isDeserializing){var l=this.viewState;l&&(this.fixedWidth&&this.fixedHeight||(l._needsFit=!0),l=this.textLayout)&&((void 0===b?0:b)&&l.resetLineCharBoundsCache(this),l.estimateLineHeights(this,e))}}},{key:"textBounds",value:function(){return this.textLayout.textBounds(this)}},{key:"defaultCharExtent",value:function(){return this.textLayout.defaultCharExtent(this)}},
{key:"scrollExtent",get:function(){return this.textBounds().extent().addPt(this.padding.topLeft()).addPt(this.padding.bottomRight()).addPt(this.scrollbarOffset).maxPt($b._get(Object.getPrototypeOf(k.prototype),"scrollExtent",this))}},{key:"commands",get:function(){return this.pluginCollect("getCommands",(this._commands||[]).concat(pd.commands))}},{key:"execCommand",value:function(b,e,l,p){function u(fa){(z.hasOwnProperty("scrollCursorIntoView")?z.scrollCursorIntoView:1)&&pd.fun.debounceNamed("execCommand-scrollCursorIntoView-"+
fa.id,100,function(){return fa.scrollCursorIntoView()})()}var x=this,z=(this.lookupCommand(b)||{}).command;if(z){var E=this.inMultiSelectMode(),G=z.hasOwnProperty("multiSelectAction")?z.multiSelectAction:"forEach";if(E&&"forEach"===G){var J=this.selection;E=this.selection.selections.slice().reverse();this.selection=E[0];this._multiSelection=J;try{var K=this.execCommand(b,e,l,p)}catch(fa){throw this.selection=J,this._multiSelection=null,this.selection.mergeSelections(),fa;}if(!K)return K;var T=[K];
if("function"===typeof K.then&&"function"===typeof K.catch)return pd.promise.finally(pd.promise.chain([function(){return K}].concat(E.slice(1).map(function(fa){return function(){x.selection=fa;return Promise.resolve(x.execCommand(b,e,l,p)).then(function(ka){return T.push(ka)})}}))).then(function(){return T}),function(){x.selection=J;x._multiSelection=null;x.selection.mergeSelections()});try{for(var P=$jscomp.makeIterator(E.slice(1)),da=P.next();!da.done;da=P.next())this.selection=da.value,T.push(this.execCommand(b,
e,l,p))}finally{this.selection=J,this._multiSelection=null,this.selection.mergeSelections()}return T}(K=this.commandHandler.exec(b,this,e,l,p))&&("function"===typeof K.then&&"function"===typeof K.catch?K.then(function(){return u(x)}):u(this));return K}}},{key:"changeDocument",value:function(b,e){e=void 0===e?!1:e;if(this.document)var l=this.defaultTextStyle;else e=!1;this.document=b;this.textLayout.reset();e&&(this.defaultTextStyle=l);this.makeDirty();this.consistencyCheck()}},{key:"textInRange",
value:function(b){return this.document.textInRange(b)}},{key:"charRight",value:function(b){b=void 0===b?this.cursorPosition:b;var e=b.column;return this.getLine(b.row).slice(e,e+1)}},{key:"charLeft",value:function(b){b=void 0===b?this.cursorPosition:b;var e=b.column;return this.getLine(b.row).slice(e-1,e)}},{key:"indexToPosition",value:function(b){return this.document.indexToPosition(b)}},{key:"positionToIndex",value:function(b){return this.document.positionToIndex(b)}},{key:"getVisibleLine",value:function(b){b=
void 0===b?this.cursorPosition.row:b;return this.textLayout.wrappedLines(this)[b].text}},{key:"isLineVisible",value:function(b){b=void 0===b?this.cursorPosition.row:b;return this.textLayout.isLineVisible(this,b)}},{key:"isLineFullyVisible",value:function(b){b=void 0===b?this.cursorPosition.row:b;return this.textLayout.isLineFullyVisible(this,b)}},{key:"getLine",value:function(b){b=void 0===b?this.cursorPosition.row:b;return this.document.getLineString(b)}},{key:"lineCount",value:function(){return this.document.rowCount}},
{key:"isLineEmpty",value:function(b){return!this.getLine(b).trim()}},{key:"isAtLineEnd",value:function(b){b=void 0===b?this.cursorPosition:b;var e=this.getLine(b.row);return b.column===e.length}},{key:"wordsOfLine",value:function(b){b=void 0===b?this.cursorPosition.row:b;return this.document.wordsOfLine(b)}},{key:"wordAt",value:function(b){b=void 0===b?this.cursorPosition:b;return this.document.wordAt(b)}},{key:"wordLeft",value:function(b){b=void 0===b?this.cursorPosition:b;return this.document.wordLeft(b)}},
{key:"wordRight",value:function(b){b=void 0===b?this.cursorPosition:b;return this.document.wordRight(b)}},{key:"lineRange",value:function(b,e){b=void 0===b?this.cursorPosition.row:b;e=void 0===e?!0:e;"number"!==typeof b&&this.cursorPosition.row;var l=this.getLine(b);b={start:{column:0,row:b},end:{column:l.length,row:b}};l=l.match(/^\s*/);l[0].length&&e&&(b.start.column+=l[0].length);return new pd.Range(b)}},{key:"screenLineRange",value:function(b,e){b=void 0===b?this.cursorPosition:b;return this.textLayout.screenLineRange(this,
b,void 0===e?!0:e)}},{key:"insertTextAndSelect",value:function(b,e){e=void 0===e?null:e;b=String(b);e?this.selection.range=this.insertText(b,e):this.selection.text=b}},{key:"append",value:function(b){var e=this;return this.saveExcursion(function(){return e.insertText(b,e.documentEndPosition)})}},{key:"insertText",value:function(b,e,l,p){e=void 0===e?this.cursorPosition:e;return this.replace({start:e,end:e},b,void 0===l?!0:l,void 0===p?!0:p)}},{key:"deleteText",value:function(b,e){e=void 0===e?!0:
e;var l=this.textAndAttributesInRange(b);this.replace(b,[],!1,e);return l}},{key:"replace",value:function(b,e,l,p,u,x){var z=this;l=void 0===l?!0:l;p=void 0===p?!0:p;u=void 0===u?!0:u;x=void 0===x?!0:x;b=b.isRange?b:new pd.Range(b);var E="string"===typeof e?[e,null]:Array.isArray(e)?e:[String(e||""),null];e=!E.length||2==E.length&&!E[0];var G=b.isEmpty();if(e&&G)return b;var J;l&&(J=this.textAttributeAt({row:b.start.row,column:b.start.column-(0<b.start.column?1:0)}));var K=[];for(l=0;l<E.length;l+=
2)e=E[l],G=E[l+1],e.isMorph&&K.push(e),J&&(E[l+1]=Object.assign({},J,{},G));u&&this.undoManager.undoStart(this,"replace");var T=this.textAndAttributesInRange(b),P=this.document.replace(b,E,this.debug&&this.debugHelper(this.debug)).inserted;this.addMethodCallChangeDoing({target:this,selector:"replace",args:[b,E],undo:{target:this,selector:"replace",args:[P,T,!1]}},function(){p&&(z.invalidateTextLayout(!1,!1),z.textLayout.resetLineCharBoundsCacheOfRange(z,P));if(!pd.eqPosition(b.end,P.end)){if(pd.lessPosition(P.end,
b.end)){var da=$jscomp.makeIterator((new pd.Range(b)).subtract(P)).next().value;z.anchors.forEach(function(ka){return ka.onDelete(da)})}else{var fa=$jscomp.makeIterator((new pd.Range(P)).subtract(b)).next().value;z.anchors.forEach(function(ka){return ka.onInsert(fa)})}z._multiSelection?z._multiSelection.updateFromAnchors():z.selection.updateFromAnchors()}z._updateEmbeddedMorphsDuringReplace(K,P,E,T);z._isDeserializing&&z._initializedByCachedBounds||z.textLayout.estimateLineHeights(z,!1);x&&z.consistencyCheck()});
u&&this.undoManager.undoStop();return P}},{key:"_updateEmbeddedMorphsDuringReplace",value:function(b,e,l,p){for(var u=this.embeddedMorphMap,x=0;x<p.length;x+=2){var z=p[x];if(z.isMorph&&!b.includes(z)){if(u){var E=u.get(z);E&&E.anchor&&(this.removeAnchor(E.anchor),pd.disconnect(E.anchor,"position",z,"position"));u.set(z,Object.assign({},E,{anchor:null}))}z.remove()}}if(b.length)for(l=pd.textAndAttributesWithSubRanges(e.start,l),e=l.ranges,l=l.textAndAttributes,p=0;p<e.length;p++)x=l[2*p],x.isMorph&&
(console.assert(b.includes(x),"????"),z=e[p].start,x.owner!==this&&this.addMorph(x),u&&(u.has(x)?u.get(x).anchor.position=z:(z=this.addAnchor(Object.assign({id:"embedded-"+x.id},z)),pd.connect(z,"position",x,"position",{updater:function(G,J){var K=this.targetObj.owner,T=this.targetObj;J=K&&K.isText?K.charBoundsFromTextPosition(J).topLeft().subPt(K.origin):T.position;K&&(K._positioningSubmorph=T);G(J);K&&(K._positioningSubmorph=!1)}}).update(z.position),u.set(x,{anchor:z}))))}},{key:"applyJsDiffPatch",
value:function(b){function e(G,J,K,T){var P=p.indexToPosition(G+K),da=p.indexToPosition(J+K);T.push(p.deleteText({start:P,end:da}));return K-(J-G)}function l(G,J,K,T){T.push(p.insertText(J,p.indexToPosition(G+K)));return K}var p=this,u=[],x=0,z=0;b=$jscomp.makeIterator(b);for(var E=b.next();!E.done;E=b.next())E=E.value,E.removed?z=e(x,x+E.count,z,u):E.added&&(z=l(x,E.value,z,u)),x+=E.count;return u}},{key:"applyTextChanges",value:function(b,e,l,p){e=void 0===e?0:e;l=void 0===l?!0:l;var u=[];b=$jscomp.makeIterator(b);
for(var x=b.next();!x.done;x=b.next()){var z=$jscomp.makeIterator(x.value);x=z.next().value;var E=z.next().value;z=z.next().value;e&&(E="number"===typeof E?E:this.positionToIndex(E),z&&"string"!==typeof z&&!Array.isArray(z)&&(z=("number"===typeof z?z:this.positionToIndex(z))+e),E+=e);E="number"===typeof E?this.indexToPosition(E):E;switch(x){case "delete":case "remove":x="number"===typeof z?this.indexToPosition(z):z;u.push(this.deleteText({start:E,end:x},p));break;case "insert":u.push(this.insertText(z,
E,l,p));break;default:console.warn("[applyTextChanges] unknown type: "+x)}}return u}},{key:"modifyLines",value:function(b,e,l){var p=this;l=pd.arr.range(b,e).map(function(u){return p.getLine(u)}).map(l).join("\n")+"\n";this.deleteText({start:{row:b,column:0},end:{row:e+1,column:0}},!1);this.insertText(l,{row:b,column:0})}},{key:"modifySelectedLines",value:function(b){var e=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range;return this.modifyLines(e.start.row,e.end.row,b)}},{key:"withLinesDo",
value:function(b,e,l){var p=this;return pd.arr.range(b,e).map(function(u){var x=p.getLine(u);u=pd.Range.create(u,0,u,x.length);return l(x,u)})}},{key:"withSelectedLinesDo",value:function(b){var e=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range,l=e.start.row;e=e.end;var p=e.row;return this.withLinesDo(l,0===e.column&&p>l?p-1:p,b)}},{key:"joinLine",value:function(b){b=void 0===b?this.cursorPosition.row:b;var e=this.getLine(b),l=this.getLine(b+1);l=e+l.replace(/^\s+/,"")+this.document.constructor.newline;
this.replace({start:{column:0,row:b},end:{column:0,row:b+2}},l,!0);return{row:b,column:e.length}}},{key:"whatsVisible",get:function(){return this.textLayout.whatsVisible(this)}},{key:"flash",value:function(b,e){var l=this;b=void 0===b?this.selection.range:b;e=Object.assign({time:1E3,fill:pd.Color.orange},e);var p=e.id||"flash"+pd.string.newUUID();this.addMarker({id:p,range:b,style:{"background-color":e.fill.toCSSString(),"pointer-events":"none"}});pd.fun.debounceNamed("flash-"+p,e.time,function(){return l.removeMarker(p)})()}},
{key:"addTextAttribute",value:function(b,e){var l=this;e=void 0===e?this.selection:e;var p={start:e.start,end:e.end};this.undoManager.undoStart(this,"addTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"addTextAttribute",args:[b,p],undo:{target:this,selector:"removeTextAttribute",args:[b,p]}},function(){l.document.mixinTextAttribute(b,p);l.onAttributesChanged(p);l.consistencyCheck()});this.undoManager.undoStop();return b}},{key:"removeTextAttribute",value:function(b,e){var l=this;
e=void 0===e?this.selection:e;var p={start:e.start,end:e.end};this.undoManager.undoStart(this,"removeTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"removeTextAttribute",args:[b,p],undo:{target:this,selector:"addTextAttribute",args:[b,p]}},function(){l.document.mixoutTextAttribute(b,p);l.onAttributesChanged(p);l.consistencyCheck()});this.undoManager.undoStop()}},{key:"setTextAttributesWithSortedRanges",value:function(b){this.document.setTextAttributesWithSortedRanges(b);this.consistencyCheck();
for(var e=0;e<b.length;)this.onAttributesChanged(b[e]),e+=2}},{key:"textAttributeAt",value:function(b){return this.document.textAttributeAt(b)}},{key:"textAttributeAtPoint",value:function(b){return this.textAttributeAt(this.textLayout.textPositionFromPoint(this,b))}},{key:"textAndAttributesInRange",value:function(b){b=void 0===b?this.selection.range:b;return this.document.textAndAttributesInRange(b)}},{key:"resetTextAttributes",value:function(){this.document.resetTextAttributes();this.onAttributesChanged(this.documentRange);
this.consistencyCheck()}},{key:"onAttributesChanged",value:function(b){this.invalidateTextLayout(!1,!1);var e=this.textLayout;e&&e.resetLineCharBoundsCacheOfRange(this,b);this.makeDirty()}},{key:"styleAt",value:function(b){return(b=this.textLayout.chunkAtPos(this,b))?b.style:Object.assign({},this.defaultTextStyle)}},{key:"getStyleInRange",value:function(b){b=void 0===b?this.selection:b;return this.textAndAttributesInRange(b).filter(function(e,l){return 0!=l%2}).reduce(function(e,l){for(var p in l){var u=
l[p];if(!e.hasOwnProperty(p)||void 0!==u&&null!==u)e[p]=u}return e},{})}},{key:"setStyleInRange",value:function(b,e){var l=this;e=void 0===e?this.selection:e;for(var p=this.textAndAttributesInRange(e),u={start:Object.assign({},e.start),end:Object.assign({},e.start)},x=[],z=0;z<p.length;z+=2){var E=p[z],G=p[z+1],J=-1;"string"!==typeof E&&(E=pd.objectReplacementChar);for(;-1<(J=E.indexOf("\n"));)0<J&&(u.end.column+=J,x.push(u,G)),u={row:u.end.row+1,column:0},u={start:u,end:Object.assign({},u)},E=E.slice(J+
1);u.end.column+=E.length;x.push(u,G);u={start:Object.assign({},u.end),end:Object.assign({},u.end)}}this.undoManager.undoStart(this,"setStyleInRange");this.addMethodCallChangeDoing({target:this,selector:"setStyleInRange",args:[b,e],undo:{target:this,selector:"setTextAttributesWithSortedRanges",args:[x]}},function(){l.document.setTextAttribute(b,e);l.consistencyCheck();l.onAttributesChanged(e)});this.undoManager.undoStop()}},{key:"resetStyleInRange",value:function(b){b=void 0===b?this.selection:b;
for(var e=this.document.textAndAttributesInRange(b),l={},p=0;p<e.length;p+=2)Object.assign(l,e[p+1]);this.removeTextAttribute(l,b)}},{key:"changeStyleProperty",value:function(b,e,l){var p=this;l=void 0===l?this.selection:l;l=this.getStyleInRange(l)[b];var u=e(l);this.selections.forEach(function(x){var z={};return p.addTextAttribute((z[b]=u,z),x)})}},{key:"inMultiSelectMode",value:function(){return this.selection.selections&&1<this.selection.selections.length}},{key:"selectionBounds",value:function(){var b=
this;return this.selections.map(function(e){var l=b.charBoundsFromTextPosition(e.start),p=b.charBoundsFromTextPosition(e.end);return e.start.row===e.end.row?l.union(p):pd.rect(pd.pt(b.padding.left(),l.top()),pd.pt(b.width-b.padding.left(),p.bottom()))}).reduce(function(e,l){return l.union(e)})}},{key:"documentEndPosition",get:function(){return this.document?this.document.endPosition:{row:0,column:0}}},{key:"isAtDocumentEnd",value:function(){return pd.eqPosition(this.cursorPosition,this.documentEndPosition)}},
{key:"documentRange",get:function(){return{start:{row:0,column:0},end:this.documentEndPosition}}},{key:"cursorUp",value:function(b){return this.selection.goUp(void 0===b?1:b)}},{key:"cursorDown",value:function(b){return this.selection.goDown(void 0===b?1:b)}},{key:"cursorLeft",value:function(b){return this.selection.goLeft(void 0===b?1:b)}},{key:"cursorRight",value:function(b){return this.selection.goRight(void 0===b?1:b)}},{key:"getPositionAboveOrBelow",value:function(b,e,l,p,u){function x(J,K){J=
J.slice();J.push({x:pd.arr.last(J).x+pd.arr.last(J).width});for(var T=0,P=Infinity,da=0;da<J.length;da++){var fa=Math.abs(J[da].x-K);fa<P&&(P=fa,T=da)}return T}b=void 0===b?1:b;e=void 0===e?this.cursorPosition:e;l=void 0===l?!1:l;if(0===b)return e;"number"===typeof u&&(u-=this.padding.left());var z=e.row,E=e.column;if(l&&this.lineWrapping){z=this.textLayout.rangesOfWrappedLine(this,e.row);if(!z.length)return e;E=z.length-1-z.slice().reverse().findIndex(function(J){return J.start.column<=e.column});
if(1<=b){var G=0===E?0>=e.row?null:pd.arr.last(this.textLayout.rangesOfWrappedLine(this,e.row-1)):z[E-1];if(!G)return e}else if(-1>=b&&(G=(z.length-1===E?e.row>=this.lineCount()-1?[]:this.textLayout.rangesOfWrappedLine(this,e.row+1):z.slice(E+1))[0],!G))return e;z=G.start.row;E=this.textLayout.charBoundsOfRow(this,z).slice(G.start.column,G.end.column+1);E=G.start.column+x(E,u)}else z=Math.min(Math.max(0,e.row-b),this.lineCount()-1),"number"===typeof u&&(G=this.textLayout.charBoundsOfRow(this,z),E=
x(G,u));G={row:z,column:E};return 1<Math.abs(b)?this.getPositionAboveOrBelow(b+(1<b?-1:1),G,l,p,u):G}},{key:"collapseSelection",value:function(){this.selection.collapse(this.selection.lead);return this.selection}},{key:"selectAll",value:function(){this.selection.selectAll();return this.selection}},{key:"selectLine",value:function(b,e){b=void 0===b?this.cursorPosition.row:b;this.selection.selectLine(b,void 0===e?!1:e);return this.selection}},{key:"selectionOrLineString",value:function(){var b=this.selection,
e=b.start;return b.text||this.getLine(e.row)}},{key:"scrollCursorIntoView",value:function(){this.scrollPositionIntoView(this.cursorPosition)}},{key:"centerRange",value:function(b,e,l){b=void 0===b?this.selection.range:b;e=void 0===e?pd.pt(0,0):e;l=void 0===l?!0:l;var p=this.charBoundsFromTextPosition(b.start).top();b=this.charBoundsFromTextPosition(b.end).bottom()-p;this.scroll=b<this.height||!1===l?this.scroll.withY(p+b/2-this.height/2).addPt(e):this.scroll.withY(p).addPt(e)}},{key:"centerRow",value:function(b,
e){b=void 0===b?this.cursorPosition.row:b;e=void 0===e?pd.pt(0,0):e;return this.alignRowAtTop(b,e.addXY(0,-this.height/2))}},{key:"alignRowAtTop",value:function(b,e){b=void 0===b?this.cursorPosition.row:b;e=void 0===e?pd.pt(0,0):e;this.scroll=this.charBoundsFromTextPosition({row:b,column:0}).topLeft().addXY(-this.padding.left(),0).addPt(e)}},{key:"alignRowAtBottom",value:function(b,e){b=void 0===b?this.cursorPosition.row:b;e=void 0===e?pd.pt(0,0):e;var l=this.charBoundsFromTextPosition({row:b,column:0}).height;
this.alignRowAtTop(b,e.addXY(0,-this.textPageHeight()+l))}},{key:"scrollPositionIntoView",value:function(b,e){e=void 0===e?pd.pt(0,0):e;if(this.isClip()){var l=this.scroll;l=this.innerBounds().translatedBy(l).insetByRect(this.padding).insetBy(this.borderWidth);b=this.charBoundsFromTextPosition(b);this.lineWrapping||(b=b.insetByPt(pd.pt(-20,0)));var p=20<l.bottom()-b.bottom()?"bottomLeft":"topLeft";l=b[p]().subPt(l.translateForInclusion(b)[p]()).addPt(e);if(0!=l.x||0!=l.y)this.scroll=this.scroll.addPt(l).addPt(e),
this.isFocused()&&this.ensureKeyInputHelperAtCursor()}}},{key:"keepPosAtSameScrollOffsetWhile",value:function(b,e){var l=this;e=void 0===e?this.cursorPosition:e;var p=this.scroll;e=this.selection.lead;var u=this.charBoundsFromTextPosition(e).y-p.y;p=!1;var x=function(){return l.scroll=l.scroll.withY(l.charBoundsFromTextPosition(e).y-u)};try{var z=b();p=z&&z instanceof Promise}finally{!p&&x()}p&&pd.promise.finally(z,x);return z}},{key:"saveExcursion",value:function(b,e){var l=this;e=Object.assign({useAnchors:!1},
e);var p=this.selection.isMultiSelection?this.selection.selections.map(function(E){return E.directedRange}):[this.selection],u=e.useAnchors?p.map(function(E){var G=E.end;return[l.addAnchor(Object.assign({},E.start,{id:"save-excursion-"+pd.string.newUUID()})),l.addAnchor(Object.assign({},G,{id:"save-excursion-"+pd.string.newUUID()}))]}):null,x=!1;e=e.useAnchors?function(){var E=u.map(function(G){var J=$jscomp.makeIterator(G);G=J.next().value.position;J=J.next().value.position;return{start:G,end:J}});
l.selections=E;u.forEach(function(G){var J=$jscomp.makeIterator(G);G=J.next().value;J=J.next().value;l.removeAnchor(G);l.removeAnchor(J)})}:function(){return l.selections=p};try{var z=this.keepPosAtSameScrollOffsetWhile(b);x=z&&z instanceof Promise}finally{!x&&e()}x&&pd.promise.finally(z,e);return z}},{key:"alignRow",value:function(b,e){e=void 0===e?"center":e;if(this.isClip()){var l=this.scroll,p=this.padding;l=this.innerBounds().insetByRect(p).translatedBy(l);b=this.charBoundsFromTextPosition({row:b,
column:0});if(e="top"===e||"bottom"===e?l[e]()-b[e]():"center"===e?l[e]().y-b[e]().y:0)this.scroll=this.scroll.addXY(0,-e)}}},{key:"fit",value:function(){var b=this,e=this.viewState,l=this.fixedWidth,p=this.fixedHeight;e._needsFit=!1;if(p&&l||!this.textLayout||this.master&&!this.master._appliedMaster)return this;var u=this.textBounds().outsetByRect(this.padding),x=function(){p||b.height==u.height||(b.height=u.height);l||b.width==u.width||(b.width=u.width);b.embeddedMorphs.forEach(function(z){z=b.embeddedMorphMap.get(z).anchor;
z.position=z.position})};e._needsFit=!1;this.document.lines.find(function(z){return z.hasEstimatedExtent})?this.whenRendered().then(x):x();return this}},{key:"fitIfNeeded",value:function(){this.viewState._needsFit&&this.fit()}},{key:"defaultLineHeight",get:function(){var b=this.padding;return b.top()+b.bottom()+this.fontMetric.defaultLineHeight({fontSize:this.fontSize,fontFamily:this.fontFamily})}},{key:"columnInWrappedLine",value:function(b){if(!this.lineWrapping)return b.column;var e=this.screenLineRange(b,
!0).start.column;return b.column-e}},{key:"textPositionFromPoint",value:function(b){return this.textLayout.textPositionFromPoint(this,b)}},{key:"charBoundsFromTextPosition",value:function(b){return this.textLayout.boundsFor(this,b)}},{key:"forceRerender",value:function(){this.textLayout.reset();this.makeDirty()}},{key:"aboutToRender",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"aboutToRender",this).call(this,b)}},{key:"applyLayoutIfNeeded",value:function(){this._requestMasterStyling&&
(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);this.fitIfNeeded();$b._get(Object.getPrototypeOf(k.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(b){return this.textRenderer.renderMorph(this,b)}},{key:"directRender",value:function(){var b=this.env.renderer,e=this.textRenderer;b&&e&&!b._stopped&&(pd.renderSubTree(this,b),e.manuallyTriggerTextRenderHook(this,b))}},{key:"onMouseDown",value:function(b){if(!b.rightMouseButtonPressed()){this.activeMark&&
(this.activeMark=null);var e=b.state;if(e.clickedOnMorph===this){e=(e.clickCount-1)%3+1;var l=this.localize(b.position),p=this.textPositionFromPoint(l);b.leftMouseButtonPressed()&&!b.isShiftDown()&&!b.isAltDown()&&this.callTextAttributeDoitFromMouseEvent(b,l);this.selectable&&(b.isShiftDown()?this.selection.lead=p:b.isAltDown()?this.selection.addRange(pd.Range.at(p)):(this.selection.disableMultiSelect(),1===e?b.isShiftDown()?this.selection.lead=p:this.selection={start:p,end:p}:2===e?this.execCommand("select word",
null,1,b):3===e&&this.execCommand("select line",null,1,b)),this.isFocused()&&this.ensureKeyInputHelperAtCursor())}}}},{key:"evalEnvForDoit",value:function(b){var e="lively://text-doit/"+this.id;lively.modules.module(e);return{context:b.context||this,format:"esm",targetModule:e}}},{key:"callTextAttributeDoitFromMouseEvent",value:function(b,e){var l=this;e=(e=this.textAttributeAtPoint(e)||[],e.doit);if(!e||!e.code)return!1;var p=this.evalEnvForDoit(e),u=lively.modules.module(p.targetModule);u.recorder.evt=
b;lively.vm.runEval(e.code,p).catch(function(x){return l.world().logError(Error("Error in text doit: "+x.stack))}).then(function(){return u.recorder.evt=null});return!0}},{key:"onMouseMove",value:function(b){b.leftMouseButtonPressed()&&this.selectable&&b.state.clickedOnMorph===this&&(this.selection.lead=this.textPositionFromPoint(this.localize(b.position)))}},{key:"selectMatchingBrackets",value:function(b,e){function l(G){return"\t"===G||" "===G}function p(G,J,K,T,P){for(var da=1;(0>P?0<=T-1:T+1<
G.length)&&(T+=P,G[T]==J&&J!=K&&da++,G[T]==K&&da--,0!=da););return T}function u(G,J,K,T){for(var P=J;0>K?0<=P-1:P+1<G.length;)if(P+=K,G[P]==T)return 0<K?[J,P]:[P+1,J];return 0<K?[J+1,G.length-1]:[0,J]}if(!b)return e;if(0==e||e==b.length)return[0,b.length-1];var x=e-1;if(0<e){if("\n"==b[e-1]||"\r"==b[e-1])return u(b,e,1,b[e-1]);var z="*({[<'\"`".indexOf(b[e-1]);"*"==b[e-1]&&(0>e-2||"/"!=b[e-2])&&(z=-1);if(0<=z)return x=p(b,"*({[<'\"`"[z],"*)}]>'\"`"[z],e-1,1),[e,x-1]}if(e<b.length){if("\n"==b[e]||
"\r"==b[e])return u(b,e,-1,b[e]);z="*)}]>'\"`".indexOf(b[e]);"*"==b[e]&&(e+1>=b.length||"/"!=b[e+1])&&(z=-1);if(0<=z)return e=p(b,"*)}]>'\"`"[z],"*({[<'\"`"[z],e,-1),[e+1,x]}if("/"===b[e-1]&&"/"===b[e-2]){for(;x+1<b.length&&"\n"!==b[x+1]&&"\r"!==b[x+1];)x++;return[e,x]}z=e;for(var E=x;0<=z-1&&l(b[z-1]);)z--;for(;E<b.length&&l(b[E+1]);)E++;if(1<=E-z)return[z,E];for(z=e<b.length?b[e]:"";0<=e-1&&((b[e-1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=b[e-1]?0:0<="0123456789".indexOf(z)));)z=b[e-1],e--;for(;x+
1<b.length&&((b[x+1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=b[x+1]?0:0<="0123456789".indexOf(z)));)z=b[x+1],x++;return[e,x]}},{key:"onContextMenu",value:function(b){var e=this;if(b.targetMorph===this){b.stop();var l=this.textPositionFromPoint(this.localize(b.position)),p=this.selection.selections||[this.selection];if(this.selection.isEmpty()||p.every(function(u){return!u.range.containsPosition(l)}))this.cursorPosition=l;Promise.resolve(this.menuItemsForContextMenu()).then(function(u){return e.openMenu(u,
b)}).catch(function(u){return $world.logError(u)})}}},{key:"onDrop",value:function(b){var e=b.hand.grabbedMorphs.filter(function(p){return p.isLayoutable});$b._get(Object.getPrototypeOf(k.prototype),"onDrop",this).call(this,b);if(e[0]){var l=this.textPositionFromPoint(this.localize(b.hand.globalPosition));this.insertText([e[0],null],l);e[0].opacity=b.state.originalOpacity||1}}},{key:"buildDropHoverGrid",value:function(b){var e=this;if(b.simpleDrop)return null;var l=this.whatsVisible,p=l.startRow;
l=Math.min(this.documentEndPosition.row,l.endRow);var u=this.document,x=this.padding.left(),z=this.padding.top();p=pd.arr.range(p,l).reduce(function(E,G){var J=e.textLayout.charBoundsOfRow(e,G).slice();1<=J.length&&0==pd.arr.last(J).width&&(pd.arr.last(J).width=12);if(1<J.length){var K=pd.arr.last(J);J.push({x:K.x+K.width,y:K.y,height:K.height,width:K.width||12})}J=J.map(function(T,P){T=pd.Rectangle.fromLiteral(T).translatedBy(pd.pt(x,z+u.computeVerticalOffsetOf(G)));var da=e.getGlobalTransform().transformRectToRect(T);
return{textPos:{row:G,column:P},bounds:T,globalBounds:da,morph:b.showDropGrid?pd.morph({reactsToPointer:!1,acceptsDrops:!1,bounds:T,border:{width:1,color:pd.Color.green},fill:null}):null}});return E.concat(J)},[]);p.forEach(function(E){return E.morph&&e.addMorph(E.morph)});return p}},{key:"onDropHoverIn",value:function(b){var e={simpleDrop:window.hasOwnProperty("simpleDrop")?window.simpleDrop:!0,showDropGrid:window.hasOwnProperty("showDropGrid")?window.showDropGrid:!1,useTextFlowPlaceholder:window.hasOwnProperty("useTextFlowPlaceholder")?
window.useTextFlowPlaceholder:!1},l=b.hand.grabbedMorphs[0];l&&(b.state.originalOpacity=l.opacity,l.opacity=.3);l=this.buildDropHoverGrid(e);b=b.state.dropHover||(b.state.dropHover=new WeakMap);var p=b.get(this);p||(p={},b.set(this,p));p.config=e;p.dropGrid=l}},{key:"onDropHoverUpdate",value:function(b){var e=b.hand.grabbedMorphs[0];if(e){var l=b.state.dropHover;if(l&&(l=l.get(this)))if(l.dropGrid){var p=l.config;b=b.positionIn(this);for(var u,x,z=Infinity,E=$jscomp.makeIterator(l.dropGrid),G=E.next();!G.done;G=
E.next()){G=G.value;if(G.bounds.containsPoint(b)){u=G;break}var J=G.bounds.closestPointToPt(b).dist(b);J<z&&(z=J,x=G)}u||(u=x);u&&(x=l.placeholder,x||(l.placeholder=x=pd.morph({fill:e.fill,extent:e.extent,reactsToPointer:!1,acceptsDrops:!1})),pd.obj.equals(x._textPos||{},u.textPos)||(this!==x.owner&&this.addMorph(x),x.position=u.bounds.topLeft(),p&&p.useTextFlowPlaceholder&&(x.remove(),x._textPos=u.textPos,this.insertText([x,null],u.textPos))))}else e=this.textPositionFromPoint(b.positionIn(this)),
this.focus(),this.cursorPosition=e}}},{key:"onDropHoverOut",value:function(b){var e=b.hand.grabbedMorphs[0];e&&(e.opacity=b.state.originalOpacity||1);if(b=b.state.dropHover)if(e=b.get(this))b.delete(this),e.dropGrid&&(e.dropGrid.forEach(function(l){return l.morph&&l.morph.remove()}),e.dropGrid=null),e.placeholder&&(e.placeholder.remove(),e.placeholder=null)}},{key:"menuItems",value:function(){var b=this,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return e=
$jscomp,l=e.makeIterator,z.yield(Promise.all([$b._get(Object.getPrototypeOf(k.prototype),"menuItems",b).call(b),b.menuItemsForContextMenu()]),2);p=l.call(e,z.yieldResult);u=p.next().value;x=p.next().value;return z.return(u.concat({isDivider:!0}).concat(x))})}},{key:"menuItemsForContextMenu",value:function(){var b=this,e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:e=[{command:"text undo",alias:"undo",target:b,showKeyShortcuts:!0},{command:"text redo",
alias:"redo",target:b,showKeyShortcuts:!0},{command:"manual clipboard copy",alias:"copy",target:b,showKeyShortcuts:b.keysForCommand("clipboard copy"),args:{collapseSelection:!1,delete:!1}},{command:"manual clipboard paste",alias:"paste",target:b,showKeyShortcuts:b.keysForCommand("clipboard paste")},{command:"open text attribute controls",alias:"edit text attributes",target:b},{isDivider:!0},{command:"toggle line wrapping",alias:(b.lineWrapping?"disable":"enable")+" line wrapping",target:b,showKeyShortcuts:!0},
["run command",function(){b.focus();b.world().execCommand("run command")}]],l=$jscomp.makeIterator(b.plugins),p=l.next();case 2:if(p.done){x.jumpTo(4);break}u=p.value;if("function"!==typeof u.getMenuItems){x.jumpTo(3);break}return x.yield(u.getMenuItems(e),6);case 6:e=x.yieldResult;case 3:p=l.next();x.jumpTo(2);break;case 4:return x.return(e)}})}},{key:"keybindings",get:function(){var b=this.world();b=b&&b.getCurrentUser()&&b.getCurrentUser().config&&b.getCurrentUser().config.textKeyBindings||[];
b=$b._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat(b).concat(pd.config.text.defaultKeyBindings);return this.pluginCollect("getKeyBindings",b)}},{key:"keybindings",set:function(b){$b._set(Object.getPrototypeOf(k.prototype),"keybindings",b,this)}},{key:"keyhandlers",get:function(){if(this._cachedKeyhandlers)return this._cachedKeyhandlers;var b=$b._get(Object.getPrototypeOf(k.prototype),"keyhandlers",this).concat(this._keyhandlers||[]);return this._cachedKeyhandlers=b=this.pluginCollect("getKeyHandlers",
b)}},{key:"snippets",get:function(){return this.pluginCollect("getSnippets",[])}},{key:"onHoverIn",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onHoverIn",this).call(this,b);this.scrollActive=!0;this.makeDirty()}},{key:"onHoverOut",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onHoverOut",this).call(this,b);pd.touchInputDevice||(this.scrollActive=!1,this.makeDirty())}},{key:"onKeyDown",value:function(b){this.compositionRange||b.targetMorph!=this||(this.selection.cursorBlinkStart(),
pd.KeyHandler.invokeKeyHandlers(this,b,!0))}},{key:"onTextInput",value:function(b){pd.KeyHandler.invokeKeyHandlers(this,b,!1)}},{key:"onCompositionStart",value:function(b){this.insertTextAndSelect(b.data);this.compositionRange=this.selection.range}},{key:"onCompositionUpdate",value:function(b){this.selection.range=this.compositionRange;this.selection.text=[b.data,{textDecoration:"underline"}];this.compositionRange=this.selection.range}},{key:"onCompositionEnd",value:function(b){this.selection.range=
this.compositionRange;this.selection.text=b.data;this.cursorPosition=this.compositionRange.end;this.compositionRange=null}},{key:"onCut",value:function(b){if(!this.rejectsInput()&&this.isFocused()&&!pd.config.emacs)this.onCopy(b,!this.rejectsInput())}},{key:"onCopy",value:function(b,e){e=void 0===e?!1:e;if(this.isFocused()){b.stop();var l=this.selection;try{for(var p=this.textAndAttributesInRange(this.selection.range),u=this.defaultTextStyle,x={},z=0;z<p.length;z+=2){var E=p[z];if(E.isMorph)if(E.isDisplacementMorph)p[z]=
"";else{var G=x[z]=pd.serializeMorph(p[z]);p[z]=pd.deserializeMorph(G,{reinitializeIds:!0})}}var J=pd.extractHTMLFromTextMorph(this,p);b.domEvt.clipboardData.setData("text/html",J);for(var K in x)p[K]=x[K];var T=JSON.stringify({textAndAttributes:p,defaultTextStyle:u});b.domEvt.clipboardData.setData("application/x-lively-text",T)}catch(P){$world.logError(P)}b.domEvt.clipboardData.setData("text/plain",l.text);this.execCommand("manual clipboard copy",{collapseSelection:pd.config.codeEditor.collapseSelection||
!1,delete:e,dontTryNativeClipboard:!0})}}},{key:"onPaste",value:function(b){var e=this;if(!this.rejectsInput()){b.stop();var l="";try{l=b.domEvt.clipboardData.getData("text")}catch(z){console.warn(z)}if(!this.editorPlugin)try{var p=b.domEvt.clipboardData.getData("application/x-lively-text");var u=p&&JSON.parse(p);var x=u.textAndAttributes;for(b=0;b<x.length;b+=2)"string"!==typeof x[b]&&(x[b]=pd.deserializeMorph(x[b],{reinitializeIds:!0}))}catch(z){console.warn(z)}x=this.selection;x=x.isMultiSelection?
x.selections:[x];u&&this.undoManager.group();x.forEach(function(z){u?e.replace(z.range,u.textAndAttributes,!1,!0,!0):z.text=l;e.saveMark(z.start);z.collapseToEnd()});u&&this.undoManager.group()}}},{key:"onFocus",value:function(b){var e=this;$b._get(Object.getPrototypeOf(k.prototype),"onFocus",this).call(this,b);this.makeDirty();this.selection.cursorBlinkStart();if(!this._originalShadow){var l=this.haloShadow||this.propertiesAndPropertySettings().properties.haloShadow.defaultValue;l&&!l.equals&&(l=
new pd.ShadowObject(l));l&&!l.equals(this.dropShadow)&&(this._originalShadow=this.dropShadow);this.withMetaDo({metaInteraction:!0},function(){e.highlightWhenFocused&&e.animate({dropShadow:l,duration:200})})}}},{key:"onBlur",value:function(b){this.makeDirty();this.selection.cursorBlinkStop();this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null;$b._get(Object.getPrototypeOf(k.prototype),"onBlur",this).call(this,b)}},{key:"onScroll",
value:function(b){this.isFocused()&&this.ensureKeyInputHelperAtCursor();(b=this.env.renderer.getNodeForMorph(this))&&pd.signal(this,"viewChanged",{prop:"scroll",value:pd.pt(b.scrollLeft,b.scrollTop)})}},{key:"ensureKeyInputHelperAtCursor",value:function(){this.env.eventDispatcher.keyInputHelper&&this.env.eventDispatcher.keyInputHelper.ensureBeingAtCursorOfText(this)}},{key:"textPageHeight",value:function(){var b=this.padding,e=this.borderWidthBottom,l=this.borderWidthTop;return this.height-b.top()-
b.bottom()-e-l}},{key:"scrollPageDown",value:function(){this.scrollDown(this.textPageHeight())}},{key:"scrollPageUp",value:function(){this.scrollUp(this.textPageHeight())}},{key:"pageUpOrDown",value:function(b){var e=b=void 0===b?{direction:"up",select:!1}:b;b=e.direction;e=e.select;var l=this.textLayout["down"===b?"lastFullVisibleLine":"firstFullVisibleLine"](this),p=this.cursorPosition.column,u=this.padding;e?this.selection.lead={row:l,column:p}:this.cursorPosition={row:l,column:p};"down"===b?this.alignRowAtTop(l,
pd.pt(0,-u.top()-u.bottom())):(this.alignRowAtBottom(l,pd.pt(0,0)),this.alignRowAtBottom(l,pd.pt(0,u.top()+u.bottom())))}},{key:"gotoDocumentStart",value:function(b){b=void 0===b?{select:!1}:b;this.selection.lead={row:0,column:0};b&&b.select||(this.selection.anchor=this.selection.lead)}},{key:"gotoDocumentEnd",value:function(b){b=void 0===b?{select:!1}:b;this.selection.lead=this.documentEndPosition;b&&b.select||(this.selection.anchor=this.selection.lead)}},{key:"paragraphRangeAbove",value:function(b){if(this.isLineEmpty(b)){for(var e=
b-1;0<=e;e--)if(!this.isLineEmpty(e)){var l=e;break}if(void 0===l)return{start:{row:b,column:0},end:{row:b,column:0}}}else l=b;return this.paragraphRange(l)}},{key:"paragraphRangeBelow",value:function(b){var e=this.isLineEmpty(b),l=this.documentEndPosition;if(e){for(e=b+1;e<=l.row;e++)if(!this.isLineEmpty(e)){var p=e;break}if(void 0===p)return{start:{row:b,column:0},end:{row:b,column:0}}}else p=b;return this.paragraphRange(p)}},{key:"paragraphRange",value:function(b){if(this.isLineEmpty(b))return{start:{row:b,
column:0},end:{row:b,column:0}};var e=this.documentEndPosition;for(b+=1;b<=e.row;b++)if(this.isLineEmpty(b)){var l={row:b-1,column:this.getLine(b-1).length};break}l||(l=e);for(b=l.row-1;0<=b;b--)if(this.isLineEmpty(b)){var p={row:b+1,column:0};break}p||(p={row:0,column:0});return{start:p,end:l}}},{key:"astNodeRange",value:function(b){return{start:this.document.indexToPosition(b.start),end:this.document.indexToPosition(b.end)}}},{key:"parseIntoLines",value:function(b){return b.split("\n")}},{key:"computeTextRangeForChanges",
value:function(b){function e(z,E){for(var G="",J=0;J<z.length;J+=2)G+="string"===typeof z[J]?z[J]:pd.objectReplacementChar;z=p.parseIntoLines(G);return 1===z.length?pd.Range.fromPositions(E,{row:E.row,column:E.column+z[0].length}):1<z.length?pd.Range.fromPositions(E,{row:E.row+z.length-1,column:pd.arr.last(z).length}):pd.Range.at(E)}var l=pd.Range.at(this.cursorPosition);if(!b.length)return l;var p=this,u=b[0];l="replace"===u.selector?e(u.args[1],u.args[0].start):l;for(u=1;u<b.length;u++){var x=b[u];
l="replace"===x.selector?l.merge(e(x.args[1],x.args[0].start)):l}return l}},{key:"ensureUndoManager",value:function(){if(this.undoManager)return this.undoManager;var b=["addTextAttribute","removeTextAttribute","setStyleInRange","replace"];return this.undoManager=new pd.UndoManager(function(e){return b.includes(e.selector)})}},{key:"textUndo",value:function(){var b=this.undoManager.undo();b&&(b=b.changes.slice().reverse().map(function(e){return e.undo}),this.selection=this.computeTextRangeForChanges(b))}},
{key:"textRedo",value:function(){var b=this.undoManager.redo();b&&(b=b.changes.slice(),this.selection=this.computeTextRangeForChanges(b))}},{key:"findMatchingForward",value:function(b,e,l){e=void 0===e?"right":e;l=void 0===l?{}:l;var p=this["right"===e?"charRight":"charLeft"](b),u=l[p];if(!u)return null;var x="right"===e?-1:0;return this.document.scanForward(b,function(z,E){if(z===u){if(0===x)return"right"===e?{row:E.row,column:E.column+1}:E;x--}else z===p&&x++;return null})}},{key:"findMatchingBackward",
value:function(b,e,l){e=void 0===e?"right":e;l=void 0===l?{}:l;var p=this["right"===e?"charRight":"charLeft"](b),u=l[p];if(!u)return null;var x="left"===e?-1:0;return this.document.scanBackward(b,function(z,E){if(z===u){if(0===x)return"right"===e?{row:E.row,column:E.column+1}:E;x--}else z===p&&x++;return null})}},{key:"search",value:function(b,e){e=void 0===e?{start:this.cursorPosition,backwards:!1,caseSensitive:!1}:e;return(new pd.TextSearcher(this)).search(Object.assign({needle:b},e))}},{key:"searchForAll",
value:function(b,e){e=void 0===e?{caseSensitive:!1}:e;return(new pd.TextSearcher(this)).searchForAll(Object.assign({needle:b},e))}},{key:"tokenAt",value:function(b){return this.pluginInvokeFirst("tokenAt",b)}},{key:"astAt",value:function(b){return this.pluginInvokeFirst("astAt",b)}},{key:"evalEnvironment",get:function(){var b=this.editorPlugin;return b&&b.evalEnvironment}},{key:"evalEnvironment",set:function(b){var e=this.editorPlugin;e&&(e.evalEnvironment=b)}},{key:"doitContext",get:function(){return(this.evalEnvironment||
{}).context}},{key:"doitContext",set:function(b){(this.evalEnvironment||{}).context=b}},{key:"logDoit",value:function(b,e){e=void 0===e?{}:e;e=void 0===e.time?Date.now():e.time;if(!(12E4<b.length)){try{var l=JSON.parse(localStorage["lively.next-js-ide-doitlog"])}catch(p){}l||(l=[]);if(!l.some(function(p){return"string"===typeof p?p===b:p.source===b})){l.push({source:b,time:e});50<l.length&&(l=l.slice(-50));try{localStorage["lively.next-js-ide-doitlog"]=JSON.stringify(l)}catch(p){}}}}},{key:"doEval",
value:function(b,e,l){b=void 0===b?this.selection.isEmpty()?this.lineRange():this.selection.range:b;l=void 0===l?this.textInRange(b):l;b=this.pluginFind(function(p){return p.isEditorPlugin&&"function"===typeof p.runEval});if(!b)throw Error("doit not possible: cannot find js editor plugin of !"+this);e&&e.logDoit&&this.logDoit(l,e);return b.runEval(l,e)}},{key:"maybeSelectCommentOrLine",value:function(){var b=this.selection,e=b.lead,l=e.row;e=e.column;var p=this.selectionOrLineString();if(b.isEmpty()){var u=
p.indexOf("//");-1===u||e<u||0<u&&0<=":\"'".indexOf(p[u-1])?this.selectLine(l):b.range={start:{row:l,column:u+2},end:{row:l,column:p.length}}}}},{key:"debugHelper",value:function(b){b=Object.assign({debugDocumentUpdate:!0,debugTextLayout:!0},b);return this._debugHelper?Object.assign(this._debugHelper,b):this._debugHelper=Object.assign({},b,{logged:[],groups:[],reset:function(){this.groups=[[]];this.logged=this.groups[0]},log:function(e){for(var l=[],p=0;p<arguments.length;++p)l[p-0]=arguments[p];
console.log.apply(console,$jscomp.arrayFromIterable(l));this.logged.push({args:l})},dump:function(e){console.log(e.split("\n").map(function(l){return l.slice(0,100)}).join("\n"));this.logged.push({dump:e})},group:function(e){this.groups.push([]);this.logged=pd.arr.last(this.groups);console.group(e)},groupEnd:function(e){console.groupEnd(e)},steps:function(e){for(var l=[];e.length;){var p=pd.arr.takeWhile(e,function(x){return!x.dump});e=e.slice(p.length);var u=(e.shift()||{}).dump;l.push({actions:p,
dump:u})}return l},printToConsole:function(){var e=this;console.clear();this.groups.forEach(function(l){var p=e.steps(l);console.group(p.length);e.steps(l).forEach(function(u,x){u=u.actions;console.group("step "+(x+1));u.forEach(function(z){return console.log.apply(console,$jscomp.arrayFromIterable(z.args))});console.groupEnd("step "+(x+1))});console.groupEnd(p.length)})},report:function(){var e=this,l,p,u,x,z,E,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress)return J.yield(System.import("jsdiff",
System.decanonicalize("lively.morphic")),2);if(3!=J.nextAddress)return l=J.yieldResult,J.yield(System.import("lively.ide/diff/editor-plugin.js"),3);p=J.yieldResult;u=p.default;x=0;z="";E=[];G=0;e.groups.forEach(function(K,T){z+=">>> group "+(T+1)+"\n";G++;x++;var P=e.steps(K);P.forEach(function(da,fa){var ka=da.actions;da=da.dump;z+=pd.string.indent(">>> step "+(fa+1)," ",x)+"\n";G++;x++;ka.forEach(function(za){za=pd.string.indent(pd.string.formatFromArray(za.args.slice()).trim()," ",x);G+=za.split("\n").length;
z+=za+"\n"});1<=fa&&da&&P[fa-1].dump&&(ka=new u,da=l.createPatch(String(fa),P[fa-1].dump,da),ka.tokenize(da),E.push.apply(E,$jscomp.arrayFromIterable(ka.styledRanges(G,x))),z+=da,G+=da.split("\n").length-1);z+=pd.string.indent("<< step "+(fa+1)," ",x)+"\n";G++;x--});z+="<<< group "+(T+1)+"\n";G++;x--});return J.return({report:z,reportStyles:E})})},openReport:function(){var e=this,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return x.yield(e.report(),2);
l=x.yieldResult;p=l.reportStyles;u=l.report;return x.return($world.execCommand("open text window",{title:"text debug",fontFamily:"monospace",content:u,rangesAndStyles:p}))})}})}},{key:"consistencyCheck",value:function(){if(this.debug)return this.document.consistencyCheck();try{return this.document.consistencyCheck()}catch(p){var b=this.document;this.brokenDocument||(this.brokenDocument=b);var e=this.world()||$world;try{var l=new pd.Document([]);l.textAndAttributes=b.textAndAttributes;this.changeDocument(l)}catch(u){e?
e.logError("Broken document could not be fixed"):console.error("Broken document could not be fixed")}e?e.logError(p):console.error(p)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Text"}},{key:"makeLabel",value:function(b,e){return new pd.morph(Object.assign({type:"label",value:b,fontFamily:"IBM Plex, Helvetica Neue, Arial, sans-serif",fontColor:pd.Color.almostBlack,fontSize:11},e))}},{key:"makeInputLine",value:function(b){return new (System.get(System.decanonicalize("lively.morphic")).InputLine)(b)}},
{key:"defaultTextStyle",get:function(){if(this._defaultTextStyle)return this._defaultTextStyle;for(var b=this.prototype.propertiesAndPropertySettings().properties,e=this.defaultTextStyleProps,l={},p=0;p<e.length;p++){var u=e[p];l[u]=b[u].defaultValue}return this._defaultTextStyle=l}},{key:"defaultTextStyleProps",get:function(){if(this._defaultTextStyleProps)return this._defaultTextStyleProps;var b=this.prototype.propertiesAndPropertySettings().properties,e=[],l;for(l in b)b[l].isDefaultTextStyleProp&&
e.push(l);return this._defaultTextStyleProps=e}},{key:"properties",get:function(){return{clipMode:{isStyleProp:!0,defaultValue:"visible",set:function(b){this.setProperty("clipMode",b);this.fixedWidth=this.fixedHeight=this.isClip()}},fontMetric:{group:"_rendering",serialize:!1,get:function(){return this.getProperty("fontMetric")||this.env.fontMetric}},undoManager:{group:"core",before:["document"],initialize:function(){this.ensureUndoManager()}},textRenderer:{group:"_rendering",after:["viewState"],
initialize:function(){this.textRenderer=new pd.Renderer(this.env)}},debug:{group:"_debugging",isStyleProp:!0,after:["textRenderer","textLayout"],defaultValue:!1,doc:"For visualizing and debugging text layout and rendering"},defaultViewState:{group:"_rendering",derived:!0,readOnly:!0,get:function(){return{_needsFit:!0,text_layer_node:null,fontmetric_text_layer_node:null,dom_nodes:[],dom_nodeFirstRow:[],scrollTop:0,scrollHeight:0,scrollBottom:0,textHeight:0,textWidth:0,firstVisibleRow:0,lastVisibleRow:0,
heightBefore:0,wasScrolled:!1,afterTextRenderHook:null,fastScroll:!0}}},viewState:{group:"_rendering",initialize:function(){this.viewState=this.defaultViewState}},displacingMorphMap:{group:"_rendering",initialize:function(){this.displacingMorphMap=new Map}},embeddedMorphMap:{group:"_rendering",initialize:function(){this.embeddedMorphMap=new Map}},embeddedMorphs:{group:"text",derived:!0,readOnly:!0,after:["embeddedMorphMap"],get:function(){return this.embeddedMorphMap?Array.from(this.embeddedMorphMap.keys()):
[]}},textLayout:{group:"_rendering",after:["textRenderer"],initialize:function(){this.textLayout=new pd.TextLayout(this)}},document:{group:"text",initialize:function(){this.document=pd.Document.fromString("",{maxLeafSize:50,minLeafSize:25,maxNodeSize:35,minNodeSize:7});this.consistencyCheck()}},draggable:{defaultValue:!1},useSoftTabs:{group:"text",isStyleProp:!0,defaultValue:void 0!==pd.config.text.useSoftTabs?pd.config.text.useSoftTabs:!0},tabWidth:{group:"text",isStyleProp:!0,defaultValue:pd.config.text.tabWidth||
2},tab:{group:"text",after:["useSoftTabs","tabWidth"],readOnly:!0,derived:!0,get:function(){return this.useSoftTabs?" ".repeat(this.tabWidth):"\t"}},autoInsertPairs:{group:"text",defaultValue:!0},extent:{get:function(){var b=this,e=this.getProperty("extent");!this._textChange&&this.viewState&&this.viewState._needsFit&&!this._rendering&&!this._measuringTextBox&&e&&this.owner&&(this._measuringTextBox=!0,pd.noUpdate(function(){b.directRender()}),this._measuringTextBox=!1);return this.getProperty("extent")}},
fixedWidth:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},fixedHeight:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},readOnly:{group:"text",isStyleProp:!0,defaultValue:!1},selectable:{group:"selection",isStyleProp:!0,after:["selection"],defaultValue:!0,set:function(b){this.setProperty("selectable",b);b||this.selection.collapse()}},padding:{group:"styling",type:"Rectangle",isStyleProp:!0,after:["textLayout","viewState"],defaultValue:pd.Rectangle.inset(0),
set:function(b){this.setProperty("padding","number"===typeof b?pd.Rectangle.inset(b):b)}},haloShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null},highlightWhenFocused:{group:"styling",defaultValue:!1,after:["haloShadow"],set:function(b){this.setProperty("highlightWhenFocused",b);b&&!this.haloShadow&&(this.haloShadow={blur:6,color:pd.Color.rgb(52,152,219),distance:0,rotation:45})}},cursorPosition:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.lead},
set:function(b){this.selection.range={start:b,end:b}}},cursorWidth:{defaultValue:1,type:"Number"},selection:{group:"selection",derived:!0,after:["document","anchors"],get:function(){var b=this.getProperty("selection");if(b)return b;b=new (pd.config.text.useMultiSelect?pd.MultiSelection:pd.Selection)(this);this.setProperty("selection",b);return b},set:function(b){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);b?b.isSelection?this.setProperty("selection",
b):this.selection.range=b:(this.selection.isMultiSelection&&this.selection.disableMultiSelect(),this.selection.collapse())}},selections:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.isMultiSelection?this.selection.selections:[this.selection]},set:function(b){var e=this;this.selection=b[0];this.selection.isMultiSelection&&b.slice(1).forEach(function(l){return e.selection.addRange(l)})}},textString:{group:"text",after:["document"],derived:!0,get:function(){return this.document?
this.document.textString:""},set:function(b){b=null!=b?String(b):"";this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.deleteText({start:{column:0,row:0},end:this.document.endPosition});this.insertText(b,{column:0,row:0})}},value:{group:"text",after:["document","embeddedMorphMap"],derived:!0,get:function(){var b=this.textAndAttributes;if(1===b.length){var e=$jscomp.makeIterator(b[0]),l=e.next().value;e=e.next().value;if(!Object.keys(e||
{}).length)return l}return b},set:function(b){"string"===typeof b?this.textString=b:this.textAndAttributes=b}},textAndAttributes:{group:"text",derived:!0,after:["document"],get:function(){return this.document.textAndAttributes},set:function(b){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.replace({start:{row:0,column:0},end:this.documentEndPosition},b)}},defaultTextStyleProps:{group:"_internal",readOnly:!0,derived:!0,get:function(){return this.constructor.defaultTextStyleProps}},
defaultTextStyle:{group:"styling",after:["viewState"],derived:!0,get:function(){return pd.obj.select(this,this.defaultTextStyleProps)},set:function(b){Object.assign(this,b)}},customizedTextStyle:{group:"styling",readOnly:!0,derived:!0,get:function(){for(var b={},e=this.defaultTextStyleProps,l=this.constructor.defaultTextStyle,p=0;p<e.length;p++){var u=e[p],x=this[u];x!==l[u]&&(b[u]=x)}return b}},nativeCursor:{defaultValue:"text",isDefaultTextStyleProp:!0},fontFamily:{group:"text styling",type:"Enum",
values:pd.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"],set:function(b){this.setProperty("fontFamily",pd.sanitizeFont(b))}},fontSize:{group:"text styling",type:"Number",min:1,unit:"pt",defaultValue:12,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},selectionColor:{group:"text styling",type:"Color",defaultValue:pd.Color.rgba(212,230,241,.8),isStyleProp:!0,after:["defaultTextStyle"]},cursorColor:{group:"text styling",
type:"Color",isStyleProp:!0,after:["defaultTextStyle"],defaultValue:pd.Color.black},fontColor:{group:"text styling",type:"Color",defaultValue:pd.Color.black,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontWeight:{group:"text styling",type:"Enum",values:["bold","bolder","light","lighter","normal"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontStyle:{group:"text styling",type:"Enum",values:["normal","italic","oblique"],defaultValue:"normal",
isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textDecoration:{group:"text styling",type:"Enum",values:["none","underline"],defaultValue:"none",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textStyleClasses:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},backgroundColor:{group:"text styling",type:"Color",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textAlign:{group:"text styling",type:"Enum",
values:["center","justify","left","right"],isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineHeight:{group:"text styling",type:"Number",min:1,isFloat:!0,isStyleProp:!0,isDefaultTextStyleProp:!0,defaultValue:1.4,after:["document","defaultTextStyle","viewState"]},letterSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},wordSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,
after:["document","defaultTextStyle","viewState"]},lineWrapping:{group:"text",type:"Enum",values:[!1,!0,"by-words","anywhere","only-by-words","wider","by-chars"],isStyleProp:!0,defaultValue:!1,after:["document","viewState"]},anchors:{group:"core",defaultValue:[],set:function(b){var e=this,l=pd.arr.withoutAll(b,this.anchors);pd.arr.withoutAll(this.anchors,b).forEach(function(p){return e.removeAnchor(p)});l.forEach(function(p){return e.addAnchor(p)})}},markers:{group:"core",defaultValue:[]},savedMarks:{group:"core",
defaultValue:[],after:["anchors"],set:function(b){var e=this;b=b.map(function(p){return p.isAnchor?p:e.addAnchor(Object.assign({},p,{id:"saved-mark-"+pd.string.newUUID()}))});var l=this.savedMarks.filter(function(p){return!b.includes(p)});b>pd.config.text.markStackSize&&l.push.apply(l,$jscomp.arrayFromIterable(b.splice(0,b.length-pd.config.text.markStackSize)));l.map(function(p){return e.removeAnchor(p)});return this.setProperty("savedMarks",b)}},activeMarkPosition:{group:"_internal",after:["activeMark"],
derived:!0,get:function(){var b=this.activeMark;return b?b.position:null}},activeMark:{group:"core",after:["anchors"],set:function(b){if(b)b=this.addAnchor(b.isAnchor?b:Object.assign({},b,{id:"saved-mark-"+pd.string.newUUID()}));else{var e=this.activeMark;this.savedMarks.includes(e)||this.removeAnchor(e)}this.setProperty("activeMark",b)}},plugins:{group:"plugins",defaultValue:[],after:["value"],set:function(b){var e=this,l=this.getProperty("plugins");pd.arr.withoutAll(l,b).forEach(function(p){return p&&
e.removePlugin(p)});b.forEach(function(p){return p&&e.addPlugin(p)})}},editorModeName:{group:"plugins",derived:!0,after:["plugins"],get:function(){var b=this.editorPlugin;return b?b.shortName:null},set:function(b){this.changeEditorMode(b)}}}}}],d,{pathInPackage:function(){return"text/morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1319,end:113497})}(pd.Morph));pd.Text=Lq;pd.Text=Lq;pd.Text=Lq;var Mxa=Object.freeze({__proto__:null,Text:Lq}),th=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js");th.obj=eg;th.promise=bh;th.arr=Gf;th.string=Dh;th.properties=go;th.Rectangle=Fe;th.Color=ng;th.signal=hm;th.connect=ll;th.vdom=XE;th.Morph=xk;th.config=$l;th.defaultStyle=Ez;th.defaultAttributes=Fz;th.Icon=Fn;th.Icons=MM;th.splitTextAndAttributesIntoLines=iE;th.h=th.vdom.h;var Mq=Ma("S",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js"),
k=d.hasOwnProperty("Label")&&"function"===typeof d.Label?d.Label:d.Label=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"onChange",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);b.prop&&b.prop.includes("borderWidth")&&this.fit()}},{key:Symbol.for("lively-instance-initialize"),value:function(b){var e=b=void 0===b?{}:b,l=e.fontMetric,p=e.position,u=e.rightCenter,
x=e.leftCenter,z=e.topCenter,E=e.bottom,G=e.top,J=e.right,K=e.left,T=e.bottomCenter,P=e.bottomLeft,da=e.bottomRight,fa=e.topRight,ka=e.topLeft,za=e.center;e=e.extent;$b._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,th.obj.dissoc(b,["fontMetric"]));l&&(this._fontMetric=l);this._cachedTextBounds=null;this.fit();void 0!==e&&(this.extent=e);void 0!==p&&(this.position=p);void 0!==u&&(this.rightCenter=u);void 0!==x&&(this.leftCenter=x);void 0!==z&&(this.topCenter=
z);void 0!==E&&(this.bottom=E);void 0!==G&&(this.top=G);void 0!==J&&(this.right=J);void 0!==K&&(this.left=K);void 0!==T&&(this.bottomCenter=T);void 0!==P&&(this.bottomLeft=P);void 0!==da&&(this.bottomRight=da);void 0!==fa&&(this.topRight=fa);void 0!==ka&&(this.topLeft=ka);void 0!==za&&(this.center=za)}},{key:"__additionally_serialize__",value:function(b,e,l,p){$b._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",this).call(this,b,e,l,p);this.autofit&&this.fitIfNeeded();b._cachedTextBounds=
this._cachedTextBounds&&this._cachedTextBounds.toTuple()}},{key:"__after_deserialize__",value:function(b,e,l){$b._get(Object.getPrototypeOf(k.prototype),"__after_deserialize__",this).call(this,b,e,l);b._cachedTextBounds&&(this.changeMetaData("deserializeInfo",{recoveredTextBounds:!0}),this._cachedTextBounds=th.Rectangle.fromTuple(b._cachedTextBounds))}},{key:"isLabel",get:function(){return!0}},{key:"textStyle",get:function(){return th.obj.select(this,"textStyleClasses textDecoration fontStyle fontWeight textShadow fontColor fontSize fontFamily".split(" "))}},
{key:"fit",value:function(){this.extent=this.textBounds().extent().addXY(this.borderWidthLeft+this.borderWidthRight,this.borderWidthTop+this.borderWidthBottom);this.visible?this._needsFit=!1:this._cachedTextBounds=null;return this}},{key:"fitIfNeeded",value:function(){this._needsFit&&this.allFontsLoaded()&&this.fit()}},{key:"textAndAttributesOfLines",get:function(){return th.splitTextAndAttributesIntoLines(this.textAndAttributes,"\n")}},{key:"allFontsLoaded",value:function(){var b=this,e=this.env.fontMetric;
return[this].concat($jscomp.arrayFromIterable(this.textAndAttributes.map(function(l,p){if(p%2)return{fontFamily:l&&l.fontFamily||b.fontFamily,fontWeight:l&&l.fontWeight||b.fontWeight}}).filter(Boolean))).every(function(l){return e.isFontSupported(l.fontFamily,l.fontWeight)})}},{key:"whenFontLoaded",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(th.promise.waitFor(5E3,function(){return b.allFontsLoaded()}))})}},{key:"textBoundsSingleChunk",
value:function(){var b=this._fontMetric||this.env.fontMetric,e=$jscomp.makeIterator(this.textAndAttributes),l=e.next().value;e=e.next().value;var p=Object.assign({},this.textStyle,{},e);e=this.padding;b.isProportional(p.fontFamily)?(b=b.sizeFor(p,l),l=b.width,b=b.height):(p=b.sizeFor(p,"x"),b=p.height,l=l.length*p.width);return new th.Rectangle(0,0,Math.ceil(e.left()+e.right()+l),Math.ceil(e.top()+e.bottom()+b))}},{key:"textBoundsAllChunks",value:function(){for(var b=this._fontMetric||this.env.fontMetric,
e=this.padding,l=this.textStyle,p=this.textAndAttributesOfLines,u=!b.isProportional(l.fontFamily),x=b.sizeFor(l,"x").height,z=0,E=0,G=0;G<p.length;G++){var J=p[G];if(J.length){for(var K=0,T=0,P=0;P<J.length;P+=2){var da=J[P],fa=J[P+1]||{},ka=Object.assign({},l,{},fa);u&&!fa.fontFamily||!b.isProportional(ka.fontFamily)?(ka=b.sizeFor(ka,"x"),fa=ka.height,T+=da.length*ka.width,K=Math.max(K,fa)):(da=b.sizeFor(ka,da),fa=da.height,T+=da.width,ka.paddingRight&&(T+=Number.parseInt(ka.paddingRight)),ka.paddingLeft&&
(T+=Number.parseInt(ka.paddingLeft)),K=Math.max(K,fa))}z+=K;E=Math.max(E,T)}else z+=x}return new th.Rectangle(0,0,Math.ceil(e.left()+e.right()+E),Math.ceil(e.top()+e.bottom()+z))}},{key:"invalidateTextLayout",value:function(){this._cachedTextBounds=null;this.autofit&&(this._needsFit=!0);this.makeDirty()}},{key:"textBounds",value:function(){var b=this.textAndAttributes;return this._cachedTextBounds||(this._cachedTextBounds=2>=b.length?this.textBoundsSingleChunk():this.textBoundsAllChunks())}},{key:"forceRerender",
value:function(){this._cachedTextBounds=null;this.makeDirty()}},{key:"applyLayoutIfNeeded",value:function(){this.fitIfNeeded();$b._get(Object.getPrototypeOf(k.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(b){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);for(var e=[],l=this.textAndAttributesOfLines.length,p=0;p<l;p++){for(var u=this.textAndAttributesOfLines[p],x=0;x<u.length;x+=2){var z=u[x+1];e.push(this.renderChunk(u[x],
z))}p<l-1&&e.push(th.h("br"))}z=this.textStyle;var E=z.fontColor,G=z.fontSize;l=z.fontStyle;p=z.fontWeight;u=z.textShadow;x=z.textDecoration;var J=z.textStyleClasses,K=this.padding;z={fontFamily:z.fontFamily,fontSize:"number"===typeof G?G+"px":G,color:E?String(E):"transparent",position:"absolute",cursor:this.nativeCursor};E=th.defaultAttributes(this,b);u&&(z.textShadow=u);"normal"!==p&&(z.fontWeight=p);"normal"!==l&&(z.fontStyle=l);"none"!==x&&(z.textDecoration=x);J&&J.length&&(E.className=(E.className||
"")+" "+J.join(" "));E.style=Object.assign({},th.defaultStyle(this),{},z);return th.h("div",E,[th.h("div",{style:{pointerEvents:"none",position:"absolute",paddingLeft:K.left()+"px",paddingRight:K.right()+"px",paddingTop:K.top()+"px",paddingBottom:K.bottom()+"px",width:"calc(100% - "+K.left()+"px - "+K.right()+"px)"}},e),b.renderSubmorphs(this)])}},{key:"renderChunk",value:function(b,e){var l=e=e||{},p=l.backgroundColor,u=l.fontColor,x=l.fontFamily,z=l.fontStyle,E=l.fontWeight,G=l.textShadow,J=l.textDecoration,
K=l.textStyleClasses,T=l.textAlign,P=l.float,da=l.display,fa=l.lineHeight,ka=l.opacity;l={};var za={style:l};P&&(l.float=P);da&&(l.display=da);p&&(l.backgroundColor=String(p));x&&(l.fontFamily=x);u&&(l.color=String(u));G&&(l.textShadow=G);"normal"!==E&&(l.fontWeight=E);"normal"!==z&&(l.fontStyle=z);"none"!==J&&(l.textDecoration=J);T&&(l.textAlign=T);fa&&(l.lineHeight=fa);ka&&(l.opacity=ka);K&&K.length&&(za.className=K.join(" "));p="fontSize width height maxWidth maxHeight top left padding paddingLeft paddingRight paddingBottom paddingTop marginTop marginRight marginLeft marginBottom".split(" ");
for(u=0;u<p.length;u++)x=p[u],e.hasOwnProperty(x)&&(z=e[x],l[x]="number"===typeof z?z+"px":z);return th.h("span",za,b)}},{key:"interactivelyChangeLabel",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.world().prompt("edit label",{input:b.textString,historyId:"lively.morphic-label-edit-hist",selectInput:!0}),2);e=l.yieldResult;"string"===typeof e&&(b.textString=e);l.jumpToEnd()})}},{key:"interactivelySetIcon",value:function(){var b=
this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(b.world().filterableListPrompt("Select Icon",Object.keys(th.Icons).map(function(x){return{isListItem:!0,label:[].concat($jscomp.arrayFromIterable(th.Icon.textAttribute(x,{paddingRight:"10px"})),[x,{}]),value:x}})),2);e=u.yieldResult;l=$jscomp.makeIterator(e.selected);if(p=l.next().value)b.value=th.Icon.textAttribute(p);u.jumpToEnd()})}},{key:"menuItems",value:function(){var b=this,e=$b._get(Object.getPrototypeOf(k.prototype),
"menuItems",this).call(this);e.unshift({isDivider:!0});e.unshift(["edit label as rich text",function(){var l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield($world.editPrompt("rich text",{input:b.value,resolveTextAttributes:!0}),2);if(l=p.yieldResult)b.value=l;p.jumpToEnd()})}]);e.unshift(["change label",function(){return b.interactivelyChangeLabel()}]);e.unshift(["set Icon",function(){return b.interactivelySetIcon()}]);return e}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Label"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fill:{defaultValue:th.Color.transparent},draggable:{defaultValue:!1},nativeCursor:{defaultValue:"default"},isIcon:{derived:!0,get:function(){return th.properties.values(th.Icons).map(function(b){return b.code}).includes(this.textString)}},value:{derived:!0,after:["textAndAttributes","textString"],get:function(){var b=this.textAndAttributes;if(2>=b.length){var e=$jscomp.makeIterator(b),l=e.next().value;
e=e.next().value;if(!Object.keys(e||{}).length)return l||""}return b},set:function(b){"string"===typeof b?this.textString=b:this.textAndAttributes=b}},textString:{derived:!0,after:["textAndAttributes"],get:function(){return this.textAndAttributes.map(function(b,e){return 0==e%2?b:""}).join("")},set:function(b){this.textAndAttributes=[b,null]}},textAndAttributes:{after:["autofit"],get:function(){var b=this.getProperty("textAndAttributes");if(!b||1>b.length)b=["",null];return b},set:function(b){Array.isArray(b)||
(b=[String(b),{}]);0===b.length&&(b=["",{}]);this.setProperty("textAndAttributes",b);this.autofit&&this.invalidateTextLayout();th.signal(this,"value",b)}},valueAndAnnotation:{derived:!0,after:["textAndAttributes"],get:function(){var b=this.textAndAttributes,e=null;if(2<b.length){var l=$jscomp.makeIterator(b.slice(-2)),p=l.next().value;(l=l.next().value)&&l.textStyleClasses&&l.textStyleClasses.includes("annotation")&&(b=b.slice(0,-2),e=[p,l])}return{value:b,annotation:e}},set:function(b){var e=b.value;
b=b.annotation;e||(e="");"string"===typeof e&&(e=[e,null]);Array.isArray(e)||(e=[String(e),null]);e=e.slice();if(b){"string"===typeof b&&(b=[b,null]);var l=b[1];l||(l=b[1]={});e.push.apply(e,$jscomp.arrayFromIterable(b));l.textStyleClasses=(l.textStyleClasses||[]).concat("annotation");l.textStyleClasses.includes("annotation")||l.textStyleClasses.push("annotation")}this.textAndAttributes=e}},autofit:{defaultValue:!0,set:function(b){this.setProperty("autofit",b);b&&(this._needsFit=!0)}},padding:{type:"Rectangle",
isStyleProp:!0,defaultValue:th.Rectangle.inset(0),after:["autofit"],initialize:function(b){this.padding=b},set:function(b){b||(b=th.Rectangle.inset(0));var e=this.padding;this.setProperty("padding","number"===typeof b?th.Rectangle.inset(b):b);this.autofit&&!e.equals(b)&&this.invalidateTextLayout()}},fontFamily:{isStyleProp:!0,type:"Enum",values:th.config.text.basicFontItems,after:["autofit"],defaultValue:"IBM Plex Sans, Sans-Serif",set:function(b){var e=this.fontFamily;this.setProperty("fontFamily",
b);this.autofit&&e!=b&&this.invalidateTextLayout()}},fontSize:{type:"Number",min:1,isStyleProp:!0,defaultValue:12,after:["autofit"],set:function(b){var e=this.fontSize;this.setProperty("fontSize",b);this.autofit&&b!=e&&this.invalidateTextLayout()}},fontColor:{type:"Color",isStyleProp:!0,defaultValue:th.Color.black},fontWeight:{type:"Enum",values:["bold","bolder","light","lighter"],isStyleProp:!0,defaultValue:"normal",after:["autofit"],set:function(b){var e=this.fontWeight;this.setProperty("fontWeight",
b);this.autofit&&e!=b&&this.invalidateTextLayout()}},fontStyle:{type:"Enum",values:["normal","italic","oblique"],isStyleProp:!0,defaultValue:"normal",after:["autofit"],set:function(b){var e=this.fontStyle;this.setProperty("fontStyle",b);this.autofit&&e!=b&&this.invalidateTextLayout()}},textShadow:{type:"String",isStyleProp:!0,defaultValue:""},textDecoration:{defaultValue:"none"},textStyleClasses:{defaultValue:void 0,after:["autofit"],set:function(b){this.setProperty("textStyleClasses",b);this.autofit&&
this.invalidateTextLayout()}}}}},{key:"icon",value:function(b,e){e=void 0===e?{prefix:"",suffix:""}:e;return th.Icon.makeLabel(b,e)}}],d,{pathInPackage:function(){return"text/label.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:499,end:18907})}(th.Morph));th.Label=Mq;th.Label=Mq;th.Label=Mq;var Nxa=Object.freeze({__proto__:null,
Label:Mq}),iY="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Oxa={},Vca=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Pxa=Oxa=function(a,d){function k(la){var Aa=la.match(/\n/g);Aa&&(Ia+=Aa.length);Aa=la.lastIndexOf("\n");N=~Aa?la.length-Aa:N+la.length}function b(){var la={line:Ia,column:N};return function(Aa){Aa.position=new e(la);z(/^\s*/);return Aa}}function e(la){(this||iY).start=la;(this||iY).end={line:Ia,column:N};(this||iY).source=d.source}function l(la){var Aa=Error(d.source+
":"+Ia+":"+N+": "+la);Aa.reason=la;Aa.filename=d.source;Aa.line=Ia;Aa.column=N;Aa.source=a;if(d.silent)ia.push(Aa);else throw Aa;}function p(){return z(/^{\s*/)}function u(){return z(/^}/)}function x(){var la,Aa=[];z(/^\s*/);for(E(Aa);a.length&&"}"!=a.charAt(0)&&(la=ka()||za());)!1!==la&&(Aa.push(la),E(Aa));return Aa}function z(la){if(la=la.exec(a)){var Aa=la[0];k(Aa);a=a.slice(Aa.length);return la}}function E(la){var Aa;for(la=la||[];Aa=G();)!1!==Aa&&la.push(Aa);return la}function G(){var la=b();
if("/"==a.charAt(0)&&"*"==a.charAt(1)){for(var Aa=2;""!=a.charAt(Aa)&&("*"!=a.charAt(Aa)||"/"!=a.charAt(Aa+1));)++Aa;Aa+=2;if(""===a.charAt(Aa-1))return l("End of comment missing");var ib=a.slice(2,Aa-2);N+=2;k(ib);a=a.slice(Aa);N+=2;return la({type:"comment",comment:ib})}}function J(){var la=z(/^([^{]+)/);if(la)return Rs(la[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(Aa){return Aa.replace(/,/g,"\u200c")}).split(/\s*(?![^(]*\)),\s*/).map(function(Aa){return Aa.replace(/\u200C/g,
",")})}function K(){var la=b(),Aa=z(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(Aa){Aa=Rs(Aa[0]);if(!z(/^:\s*/))return l("property missing ':'");var ib=z(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);la=la({type:"declaration",property:Aa.replace(Vca,""),value:ib?Rs(ib[0]).replace(Vca,""):""});z(/^[;\s]*/);return la}}function T(){var la=[];if(!p())return l("missing '{'");E(la);for(var Aa;Aa=K();)!1!==Aa&&(la.push(Aa),E(la));return u()?la:l("missing '}'")}function P(){for(var la,Aa=[],
ib=b();la=z(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)Aa.push(la[1]),z(/^,\s*/);if(Aa.length)return ib({type:"keyframe",values:Aa,declarations:T()})}function da(){var la=b(),Aa=z(/^@([-\w]+)?keyframes\s*/);if(Aa){var ib=Aa[1];Aa=z(/^([-\w]+)\s*/);if(!Aa)return l("@keyframes missing name");Aa=Aa[1];if(!p())return l("@keyframes missing '{'");for(var ob,Ea=E();ob=P();)Ea.push(ob),Ea=Ea.concat(E());return u()?la({type:"keyframes",name:Aa,vendor:ib,keyframes:Ea}):l("@keyframes missing '}'")}}function fa(la){var Aa=
new RegExp("^@"+la+"\\s*([^;]+);");return function(){var ib=b(),ob=z(Aa);if(ob){var Ea={type:la};Ea[la]=ob[1].trim();return ib(Ea)}}}function ka(){if("@"==a[0]){var la;if(!(la=da())){la=b();var Aa=z(/^@media *([^{]+)/);if(Aa)if(Aa=Rs(Aa[1]),p()){var ib=E().concat(x());la=u()?la({type:"media",media:Aa,rules:ib}):l("@media missing '}'")}else la=l("@media missing '{'");else la=void 0}la||(la=b(),la=(Aa=z(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/))?la({type:"custom-media",name:Rs(Aa[1]),media:Rs(Aa[2])}):
void 0);la||(la=b(),(Aa=z(/^@supports *([^{]+)/))?(Aa=Rs(Aa[1]),p()?(ib=E().concat(x()),la=u()?la({type:"supports",supports:Aa,rules:ib}):l("@supports missing '}'")):la=l("@supports missing '{'")):la=void 0);if(!(la=la||W()||ca()||sa()))if(la=b(),ib=z(/^@([-\w]+)?document *([^{]+)/))if(Aa=Rs(ib[1]),ib=Rs(ib[2]),p()){var ob=E().concat(x());la=u()?la({type:"document",document:ib,vendor:Aa,rules:ob}):l("@document missing '}'")}else la=l("@document missing '{'");else la=void 0;if(!la)if(la=b(),z(/^@page */))if(Aa=
J()||[],p()){for(ib=E();ob=K();)ib.push(ob),ib=ib.concat(E());la=u()?la({type:"page",selectors:Aa,declarations:ib}):l("@page missing '}'")}else la=l("@page missing '{'");else la=void 0;la||(la=b(),z(/^@host\s*/)?p()?(Aa=E().concat(x()),la=u()?la({type:"host",rules:Aa}):l("@host missing '}'")):la=l("@host missing '{'"):la=void 0);if(!la)if(la=b(),z(/^@font-face\s*/))if(p()){for(Aa=E();ib=K();)Aa.push(ib),Aa=Aa.concat(E());la=u()?la({type:"font-face",declarations:Aa}):l("@font-face missing '}'")}else la=
l("@font-face missing '{'");else la=void 0;return la}}function za(){var la=b(),Aa=J();if(!Aa)return l("selector missing");E();return la({type:"rule",selectors:Aa,declarations:T()})}d=d||{};var Ia=1,N=1;e.prototype.content=a;var ia=[],W=fa("import"),ca=fa("charset"),sa=fa("namespace");return KU(function(){var la=x();return{type:"stylesheet",stylesheet:{source:d.source,rules:la,parsingErrors:ia}}}())},Vma="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Wca={};Wca=AL;
AL.prototype.emit=function(a){return a};AL.prototype.visit=function(a){return this[a.type](a)};AL.prototype.mapVisit=function(a,d){var k="";d=d||"";for(var b=0,e=a.length;b<e;b++)k+=this.visit(a[b]),d&&b<e-1&&(k+=this.emit(d));return k};var Xca=Wca,tu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Yca={},n8=Xca,Qxa=Gk;Yca=yl;Qxa(yl,n8);yl.prototype.compile=function(a){return this.stylesheet(a)};yl.prototype.stylesheet=function(a){return this.mapVisit(a.stylesheet.rules,
"\n\n")};yl.prototype.comment=function(a){return this.emit(this.indent()+"/*"+a.comment+"*/",a.position)};yl.prototype.import=function(a){return this.emit("@import "+a.import+";",a.position)};yl.prototype.media=function(a){return this.emit("@media "+a.media,a.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(a.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};yl.prototype.document=function(a){return this.emit("@"+(a.vendor||"")+"document "+a.document,a.position)+this.emit("  {\n"+this.indent(1))+
this.mapVisit(a.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};yl.prototype.charset=function(a){return this.emit("@charset "+a.charset+";",a.position)};yl.prototype.namespace=function(a){return this.emit("@namespace "+a.namespace+";",a.position)};yl.prototype.supports=function(a){return this.emit("@supports "+a.supports,a.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(a.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};yl.prototype.keyframes=function(a){return this.emit("@"+(a.vendor||"")+
"keyframes "+a.name,a.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(a.keyframes,"\n")+this.emit(this.indent(-1)+"}")};yl.prototype.keyframe=function(a){var d=a.declarations;return this.emit(this.indent())+this.emit(a.values.join(", "),a.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(d,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")};yl.prototype.page=function(a){var d=a.selectors.length?a.selectors.join(", ")+" ":"";return this.emit("@page "+d,a.position)+this.emit("{\n")+
this.emit(this.indent(1))+this.mapVisit(a.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};yl.prototype["font-face"]=function(a){return this.emit("@font-face ",a.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(a.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};yl.prototype.host=function(a){return this.emit("@host",a.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(a.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};yl.prototype["custom-media"]=
function(a){return this.emit("@custom-media "+a.name+" "+a.media+";",a.position)};yl.prototype.rule=function(a){var d=this.indent(),k=a.declarations;return k.length?this.emit(a.selectors.map(function(b){return d+b}).join(",\n"),a.position)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(k,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""};yl.prototype.declaration=function(a){return this.emit(this.indent())+this.emit(a.property+": "+a.value,a.position)+this.emit(";")};
yl.prototype.indent=function(a){(this||tu).level=(this||tu).level||1;return null!=a?((this||tu).level+=a,""):Array((this||tu).level).join((this||tu).indentation||"  ")};var Rxa=Yca,jY={},Zca=Rh.Buffer;(function(a){var d=function(k){return"function"===typeof k?k:"function"===typeof Zca?function(b){return(new Zca(b,"base64")).toString("binary")}:"object"===typeof a.base64js?function(b){b=a.base64js.b64ToByteArray(b);return Array.prototype.map.call(b,function(e){return String.fromCharCode(e)}).join("")}:
function(){throw Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.");}}(a.atob);a.atob=d;jY&&(jY=d)})(window);var Sxa=jY,Txa=/^xn--/,Uxa=/[^\0-\x7E]/,Xma=/[\x2E\u3002\uFF0E\uFF61]/g,Wma={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},bs=Math.floor,kY=String.fromCharCode,$ca=function(a,d){return a+22+75*(26>a)-((0!=d)<<5)},ada=function(a,
d,k){var b=0;a=k?bs(a/700):a>>1;for(a+=bs(a/d);455<a;b+=36)a=bs(a/35);return bs(b+36*a/(a+38))},bda=function(a){var d=[],k=a.length,b=0,e=128,l=72,p=a.lastIndexOf("-");0>p&&(p=0);for(var u=0;u<p;++u)128<=a.charCodeAt(u)&&jx("not-basic"),d.push(a.charCodeAt(u));for(p=0<p?p+1:0;p<k;){u=b;for(var x=1,z=36;;z+=36){p>=k&&jx("invalid-input");var E=10>(J=a.charCodeAt(p++))-48?J-22:26>J-65?J-65:26>J-97?J-97:36;(36<=E||E>bs((2147483647-b)/x))&&jx("overflow");b+=E*x;var G=z<=l?1:z>=l+26?26:z-l;if(E<G)break;
E=36-G;x>bs(2147483647/E)&&jx("overflow");x*=E}x=d.length+1;l=ada(b-u,x,0==u);bs(b/x)>2147483647-e&&jx("overflow");e+=bs(b/x);b%=x;d.splice(b++,0,e)}var J;return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(d))},cda=function(a){for(var d=[],k=(a=p8(a)).length,b=128,e=0,l=72,p=$jscomp.makeIterator(a),u=p.next();!u.done;u=p.next()){var x=u.value;128>x&&d.push(kY(x))}for((x=p=d.length)&&d.push("-");x<k;){var z=2147483647,E=$jscomp.makeIterator(a);for(u=E.next();!u.done;u=E.next())u=u.value,
u>=b&&u<z&&(z=u);u=x+1;z-b>bs((2147483647-e)/u)&&jx("overflow");e+=(z-b)*u;b=z;z=$jscomp.makeIterator(a);for(E=z.next();!E.done;E=z.next())if(E=E.value,E<b&&2147483647<++e&&jx("overflow"),E==b){var G=e;for(E=36;;E+=36){var J=E<=l?1:E>=l+26?26:E-l;if(G<J)break;G-=J;var K=36-J;d.push(kY($ca(J+G%K,0)));G=bs(G/K)}d.push(kY($ca(G,0)));l=ada(e,u,x==p);e=0;++x}++e;++b}return d.join("")},Vxa={version:"2.1.0",ucs2:{decode:p8,encode:function(a){return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(a))}},
decode:bda,encode:cda,toASCII:function(a){return o8(a,function(d){return Uxa.test(d)?"xn--"+cda(d):d})},toUnicode:function(a){return o8(a,function(d){return Txa.test(d)?bda(d.slice(4).toLowerCase()):d})}},HF=function(a){switch(typeof a){case "string":return a;case "boolean":return a?"true":"false";case "number":return isFinite(a)?a:"";default:return""}},fy={};fy.decode=fy.parse=function(a,d,k,b){k=k||"=";var e={};if("string"!=typeof a||0===a.length)return e;var l=/\+/g;a=a.split(d||"&");d=1E3;b&&
"number"==typeof b.maxKeys&&(d=b.maxKeys);b=a.length;0<d&&b>d&&(b=d);for(d=0;d<b;++d){var p,u;var x=a[d].replace(l,"%20");var z=x.indexOf(k);0<=z?(p=x.substr(0,z),u=x.substr(z+1)):(p=x,u="");x=decodeURIComponent(p);z=decodeURIComponent(u);Object.prototype.hasOwnProperty.call(e,x)?Array.isArray(e[x])?e[x].push(z):e[x]=[e[x],z]:e[x]=z}return e};fy.encode=fy.stringify=function(a,d,k,b){return d=d||"&",k=k||"=",null===a&&(a=void 0),"object"==typeof a?Object.keys(a).map(function(e){var l=encodeURIComponent(HF(e))+
k;return Array.isArray(a[e])?a[e].map(function(p){return l+encodeURIComponent(HF(p))}).join(d):l+encodeURIComponent(HF(a[e]))}).join(d):b?encodeURIComponent(HF(b))+k+encodeURIComponent(HF(a)):""};var rB={},Cr={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}};rB.parse=jE;rB.resolve=function(a,d){return jE(a,!1,!0).resolve(d)};rB.resolveObject=function(a,d){return a?
jE(a,!1,!0).resolveObject(d):d};rB.format=function(a){Cr.isString(a)&&(a=jE(a));return a instanceof vp?a.format():vp.prototype.format.call(a)};rB.Url=vp;var Wxa=/^([a-z0-9.+-]+:)/i,Xxa=/:[0-9]*$/,Yxa=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Zxa="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),lY=["'"].concat(Zxa),dda=["%","/","?",";","#"].concat(lY),eda=["/","?","#"],fda=/^[+a-z0-9A-Z_-]{0,63}$/,$xa=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,aya={javascript:!0,"javascript:":!0},mY={javascript:!0,"javascript:":!0},
sB={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};vp.prototype.parse=function(a,d,k){if(!Cr.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var b=a.indexOf("?");b=-1!==b&&b<a.indexOf("#")?"?":"#";a=a.split(b);a[0]=a[0].replace(/\\/g,"/");b=a=a.join(b);if(b=b.trim(),!k&&1===a.split("#").length)if(a=Yxa.exec(b))return this.path=b,this.href=b,this.pathname=a[1],a[2]?(this.search=a[2],this.query=d?fy.parse(this.search.substr(1)):
this.search.substr(1)):d&&(this.search="",this.query={}),this;if(a=Wxa.exec(b)){var e=(a=a[0]).toLowerCase();this.protocol=e;b=b.substr(a.length)}if(k||a||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===b.substr(0,2);!l||a&&mY[a]||(b=b.substr(2),this.slashes=!0)}if(!mY[a]&&(l||a&&!sB[a])){var p,u;l=-1;for(k=0;k<eda.length;k++)-1!==(x=b.indexOf(eda[k]))&&(-1===l||x<l)&&(l=x);-1!==(u=-1===l?b.lastIndexOf("@"):b.lastIndexOf("@",l))&&(p=b.slice(0,u),b=b.slice(u+1),this.auth=decodeURIComponent(p));l=-1;
for(k=0;k<dda.length;k++){var x;-1!==(x=b.indexOf(dda[k]))&&(-1===l||x<l)&&(l=x)}-1===l&&(l=b.length);this.host=b.slice(0,l);b=b.slice(l);this.parseHost();this.hostname=this.hostname||"";p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(l=this.hostname.split(/\./),u=(k=0,l.length);k<u;k++)if((x=l[k])&&!x.match(fda)){a="";for(var z=0,E=x.length;z<E;z++)127<x.charCodeAt(z)?a+="x":a+=x[z];if(!a.match(fda)){u=l.slice(0,k);k=l.slice(k+1);(x=x.match($xa))&&(u.push(x[1]),k.unshift(x[2]));
k.length&&(b="/"+k.join(".")+b);this.hostname=u.join(".");break}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase();p||(this.hostname=Vxa.toASCII(this.hostname));k=this.port?":"+this.port:"";this.host=(this.hostname||"")+k;this.href+=this.host;p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!aya[e])for(k=0,u=lY.length;k<u;k++)p=lY[k],-1!==b.indexOf(p)&&(x=encodeURIComponent(p),x===p&&(x=escape(p)),b=b.split(p).join(x));k=
b.indexOf("#");-1!==k&&(this.hash=b.substr(k),b=b.slice(0,k));k=b.indexOf("?");if(-1!==k?(this.search=b.substr(k),this.query=b.substr(k+1),d&&(this.query=fy.parse(this.query)),b=b.slice(0,k)):d&&(this.search="",this.query={}),b&&(this.pathname=b),sB[e]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search)k=this.pathname||"",this.path=k+(this.search||"");return this.href=this.format(),this};vp.prototype.format=function(){var a=this.auth||"";a&&(a=(a=encodeURIComponent(a)).replace(/%3A/i,
":"),a+="@");var d=this.protocol||"",k=this.pathname||"",b=this.hash||"",e=!1,l="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port));this.query&&Cr.isObject(this.query)&&Object.keys(this.query).length&&(l=fy.stringify(this.query));a=this.search||l&&"?"+l||"";return d&&":"!==d.substr(-1)&&(d+=":"),this.slashes||(!d||sB[d])&&!1!==e?(e="//"+(e||""),k&&"/"!==k.charAt(0)&&(k="/"+k)):e||(e=""),b&&"#"!==b.charAt(0)&&
(b="#"+b),a&&"?"!==a.charAt(0)&&(a="?"+a),d+e+(k=k.replace(/[?#]/g,function(p){return encodeURIComponent(p)}))+(a=a.replace("#","%23"))+b};vp.prototype.resolve=function(a){return this.resolveObject(jE(a,!1,!0)).format()};vp.prototype.resolveObject=function(a){if(Cr.isString(a)){var d=new vp;d.parse(a,!1,!0);a=d}d=new vp;for(var k=Object.keys(this),b=0;b<k.length;b++){var e=k[b];d[e]=this[e]}if(d.hash=a.hash,""===a.href)return d.href=d.format(),d;if(a.slashes&&!a.protocol){var l=Object.keys(a);for(k=
0;k<l.length;k++)b=l[k],"protocol"!==b&&(d[b]=a[b]);return sB[d.protocol]&&d.hostname&&!d.pathname&&(d.path=d.pathname="/"),d.href=d.format(),d}if(a.protocol&&a.protocol!==d.protocol){if(!sB[a.protocol]){l=Object.keys(a);for(k=0;k<l.length;k++)b=l[k],d[b]=a[b];return d.href=d.format(),d}if(d.protocol=a.protocol,a.host||mY[a.protocol])d.pathname=a.pathname;else{for(var p=(a.pathname||"").split("/");p.length&&!(a.host=p.shift()););a.host||(a.host="");a.hostname||(a.hostname="");""!==p[0]&&p.unshift("");
2>p.length&&p.unshift("");d.pathname=p.join("/")}if(d.search=a.search,d.query=a.query,d.host=a.host||"",d.auth=a.auth,d.hostname=a.hostname||a.host,d.port=a.port,d.pathname||d.search)d.path=(d.pathname||"")+(d.search||"");return d.slashes=d.slashes||a.slashes,d.href=d.format(),d}k=d.pathname&&"/"===d.pathname.charAt(0);var u=a.host||a.pathname&&"/"===a.pathname.charAt(0),x=k=u||k||d.host&&a.pathname;b=d.pathname&&d.pathname.split("/")||[];e=(p=a.pathname&&a.pathname.split("/")||[],d.protocol&&!sB[d.protocol]);
if(e&&(d.hostname="",d.port=null,d.host&&(""===b[0]?b[0]=d.host:b.unshift(d.host)),d.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===p[0]?p[0]=a.host:p.unshift(a.host)),a.host=null),k=k&&(""===p[0]||""===b[0])),u)d.host=a.host||""===a.host?a.host:d.host,d.hostname=a.hostname||""===a.hostname?a.hostname:d.hostname,d.search=a.search,d.query=a.query,b=p;else if(p.length)b||(b=[]),b.pop(),b=b.concat(p),d.search=a.search,d.query=a.query;else if(!Cr.isNullOrUndefined(a.search))return e&&
(d.hostname=d.host=b.shift(),(l=!!(d.host&&0<d.host.indexOf("@"))&&d.host.split("@"))&&(d.auth=l.shift(),d.host=d.hostname=l.shift())),d.search=a.search,d.query=a.query,Cr.isNull(d.pathname)&&Cr.isNull(d.search)||(d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"")),d.href=d.format(),d;if(!b.length)return d.pathname=null,d.search?d.path="/"+d.search:d.path=null,d.href=d.format(),d;u=b.slice(-1)[0];p=(d.host||a.host||1<b.length)&&("."===u||".."===u)||""===u;for(var z=0,E=b.length;0<=E;E--)"."===
(u=b[E])?b.splice(E,1):".."===u?(b.splice(E,1),z++):z&&(b.splice(E,1),z--);if(!k&&!x)for(;z--;z)b.unshift("..");!k||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift("");p&&"/"!==b.join("/").substr(-1)&&b.push("");x=""===b[0]||b[0]&&"/"===b[0].charAt(0);e&&(d.hostname=d.host=x?"":b.length?b.shift():"",(l=!!(d.host&&0<d.host.indexOf("@"))&&d.host.split("@"))&&(d.auth=l.shift(),d.host=d.hostname=l.shift()));return(k||d.host&&b.length)&&!x&&b.unshift(""),b.length?d.pathname=b.join("/"):(d.pathname=null,
d.path=null),Cr.isNull(d.pathname)&&Cr.isNull(d.search)||(d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"")),d.auth=a.auth||d.auth,d.slashes=d.slashes||a.slashes,d.href=d.format(),d};vp.prototype.parseHost=function(){var a=this.host,d=Xxa.exec(a);d&&(":"!==(d=d[0])&&(this.port=d.substr(1)),a=a.substr(0,a.length-d.length));a&&(this.hostname=a)};var bya=Li,tB={resolve:function(){for(var a,d="",k=!1,b=arguments.length-1;-1<=b&&!k;b--){var e;0<=b?e=arguments[b]:(void 0===a&&(a=bya.cwd()),e=a);
Dr(e);0!==e.length&&(d=e+"/"+d,k=47===e.charCodeAt(0))}return d=q8(d,!k),k?0<d.length?"/"+d:"/":0<d.length?d:"."},normalize:function(a){if(Dr(a),0===a.length)return".";var d=47===a.charCodeAt(0),k=47===a.charCodeAt(a.length-1);return 0!==(a=q8(a,!d)).length||d||(a="."),0<a.length&&k&&(a+="/"),d?"/"+a:a},isAbsolute:function(a){return Dr(a),0<a.length&&47===a.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var a,d=0;d<arguments.length;++d){var k=arguments[d];Dr(k);0<k.length&&(void 0===
a?a=k:a+="/"+k)}return void 0===a?".":tB.normalize(a)},relative:function(a,d){if((Dr(a),Dr(d),a===d)||(a=tB.resolve(a))===(d=tB.resolve(d)))return"";for(var k=1;k<a.length&&47===a.charCodeAt(k);++k);for(var b=a.length,e=b-k,l=1;l<d.length&&47===d.charCodeAt(l);++l);for(var p=d.length-l,u=e<p?e:p,x=-1,z=0;z<=u;++z){if(z===u){if(p>u){if(47===d.charCodeAt(l+z))return d.slice(l+z+1);if(0===z)return d.slice(l+z)}else e>u&&(47===a.charCodeAt(k+z)?x=z:0===z&&(x=0));break}var E=a.charCodeAt(k+z);if(E!==d.charCodeAt(l+
z))break;47===E&&(x=z)}e="";for(z=k+x+1;z<=b;++z)z!==b&&47!==a.charCodeAt(z)||(0===e.length?e+="..":e+="/..");return 0<e.length?e+d.slice(l+x):(l+=x,47===d.charCodeAt(l)&&++l,d.slice(l))},_makeLong:function(a){return a},dirname:function(a){if(Dr(a),0===a.length)return".";for(var d=47===a.charCodeAt(0),k=-1,b=!0,e=a.length-1;1<=e;--e)if(47===a.charCodeAt(e)){if(!b){k=e;break}}else b=!1;return-1===k?d?"/":".":d&&1===k?"//":a.slice(0,k)},basename:function(a,d){if(void 0!==d&&"string"!=typeof d)throw new TypeError('"ext" argument must be a string');
Dr(a);var k,b=0,e=-1,l=!0;if(void 0!==d&&0<d.length&&d.length<=a.length){if(d.length===a.length&&d===a)return"";var p=d.length-1,u=-1;for(k=a.length-1;0<=k;--k){var x=a.charCodeAt(k);if(47===x){if(!l){b=k+1;break}}else-1===u&&(l=!1,u=k+1),0<=p&&(x===d.charCodeAt(p)?-1==--p&&(e=k):(p=-1,e=u))}return b===e?e=u:-1===e&&(e=a.length),a.slice(b,e)}for(k=a.length-1;0<=k;--k)if(47===a.charCodeAt(k)){if(!l){b=k+1;break}}else-1===e&&(l=!1,e=k+1);return-1===e?"":a.slice(b,e)},extname:function(a){Dr(a);for(var d=
-1,k=0,b=-1,e=!0,l=0,p=a.length-1;0<=p;--p){var u=a.charCodeAt(p);if(47!==u)-1===b&&(e=!1,b=p+1),46===u?-1===d?d=p:1!==l&&(l=1):-1!==d&&(l=-1);else if(!e){k=p+1;break}}return-1===d||-1===b||0===l||1===l&&d===b-1&&d===k+1?"":a.slice(d,b)},format:function(a){if(null===a||"object"!=typeof a)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);var d=a.dir||a.root,k=a.base||(a.name||"")+(a.ext||"");return d?d===a.root?d+k:d+"/"+k:k},parse:function(a){Dr(a);var d=
{root:"",dir:"",base:"",ext:"",name:""};if(0===a.length)return d;var k,b=a.charCodeAt(0),e=47===b;e?(d.root="/",k=1):k=0;for(var l=-1,p=0,u=-1,x=!0,z=a.length-1,E=0;z>=k;--z)if(47!==(b=a.charCodeAt(z)))-1===u&&(x=!1,u=z+1),46===b?-1===l?l=z:1!==E&&(E=1):-1!==l&&(E=-1);else if(!x){p=z+1;break}return-1===l||-1===u||0===E||1===E&&l===u-1&&l===p+1?-1!==u&&(d.base=d.name=0===p&&e?a.slice(1,u):a.slice(p,u)):(0===p&&e?(d.name=a.slice(1,l),d.base=a.slice(1,u)):(d.name=a.slice(p,l),d.base=a.slice(p,u)),d.ext=
a.slice(l,u)),0<p?d.dir=a.slice(0,p-1):e&&(d.dir="/"),d},sep:"/",delimiter:":",win32:null,posix:null};tB.posix=tB;var Bm=Ma("aH",tB);Ma("aI",Bm._makeLong);Ma("aJ",Bm.basename);Ma("aK",Bm.delimiter);Ma("aL",Bm.dirname);Ma("aM",Bm.extname);Ma("aN",Bm.format);Ma("aO",Bm.isAbsolute);Ma("aP",Bm.join);Ma("aQ",Bm.normalize);Ma("aR",Bm.parse);Ma("aS",Bm.posix);Ma("aT",Bm.relative);Ma("aU",Bm.resolve);Ma("aV",Bm.sep);Ma("aW",Bm.win32);var gda={},hda=/%[a-f0-9]{2}/gi,ida=/(%[a-f0-9]{2})+/gi;gda=function(a){if("string"!==
typeof a)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof a+"`");try{return a=a.replace(/\+/g," "),decodeURIComponent(a)}catch(p){for(var d={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},k=ida.exec(a);k;){try{d[k[0]]=decodeURIComponent(k[0])}catch(u){var b=k[0];try{var e=decodeURIComponent(b)}catch(x){e=b.match(hda);for(var l=1;l<e.length;l++)b=LU(e,l).join(""),e=b.match(hda);e=b}e!==k[0]&&(d[k[0]]=e)}k=ida.exec(a)}d["%C2"]="\ufffd";k=Object.keys(d);for(b=0;b<k.length;b++)e=
k[b],a=a.replace(new RegExp(e,"g"),d[e]);return a}};var cya={},ana=Li,w8=Sxa,Yma=rB,Zma=Bm,$ma=gda,jda=/[#@] sourceMappingURL=([^\s'"]*)/,bna=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+jda.source+")\\s*\\*/|//(?:"+jda.source+"))\\s*"),cna=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,dna=/^(?:application|text)\/json$/,ena="utf-8",fna=/\/?$/,dya=cya={resolveSourceMap:t8,resolveSourceMapSync:v8,resolveSources:x8,resolveSourcesSync:z8,resolve:function(a,d,k,b,e){function l(u){x8(u.map,u.sourcesRelativeTo,k,b,
function(x,z){if(x)return e(x);u.sourcesResolved=z.sourcesResolved;u.sourcesContent=z.sourcesContent;e(null,u)})}"function"===typeof b&&(e=b,b={});if(null===a){var p={sourceMappingURL:null,url:d,sourcesRelativeTo:d,map:null};a=kE(d);k(a,function(u,x){if(u)return u.sourceMapData=p,e(u);p.map=String(x);try{p.map=DA(p.map,p)}catch(z){return e(z)}l(p)})}else t8(a,d,k,function(u,x){if(u)return e(u);if(!x)return e(null,null);l(x)})},resolveSync:function(a,d,k,b){if(null===a)a={sourceMappingURL:null,url:d,
sourcesRelativeTo:d,map:null},a.map=s8(k,d,a),a.map=DA(a.map,a);else if(a=v8(a,d,k),!a)return null;d=z8(a.map,a.sourcesRelativeTo,k,b);a.sourcesResolved=d.sourcesResolved;a.sourcesContent=d.sourcesContent;return a},parseMapToJSON:DA},eya=function(){throw Error("Node.js fs module is not supported by jspm core"+("undefined"!=typeof Deno?". Deno support here is tracking in https://github.com/jspm/jspm-core/issues/4, +1's are appreciated!":" in the browser"));},NU="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,kda={},A8=Xca,fya=Gk;kda=um;fya(um,A8);um.prototype.compile=function(a){return a.stylesheet.rules.map((this||NU).visit,this||NU).join("")};um.prototype.comment=function(a){return this.emit("",a.position)};um.prototype.import=function(a){return this.emit("@import "+a.import+";",a.position)};um.prototype.media=function(a){return this.emit("@media "+a.media,a.position)+this.emit("{")+this.mapVisit(a.rules)+this.emit("}")};um.prototype.document=function(a){return this.emit("@"+
(a.vendor||"")+"document "+a.document,a.position)+this.emit("{")+this.mapVisit(a.rules)+this.emit("}")};um.prototype.charset=function(a){return this.emit("@charset "+a.charset+";",a.position)};um.prototype.namespace=function(a){return this.emit("@namespace "+a.namespace+";",a.position)};um.prototype.supports=function(a){return this.emit("@supports "+a.supports,a.position)+this.emit("{")+this.mapVisit(a.rules)+this.emit("}")};um.prototype.keyframes=function(a){return this.emit("@"+(a.vendor||"")+"keyframes "+
a.name,a.position)+this.emit("{")+this.mapVisit(a.keyframes)+this.emit("}")};um.prototype.keyframe=function(a){var d=a.declarations;return this.emit(a.values.join(","),a.position)+this.emit("{")+this.mapVisit(d)+this.emit("}")};um.prototype.page=function(a){var d=a.selectors.length?a.selectors.join(", "):"";return this.emit("@page "+d,a.position)+this.emit("{")+this.mapVisit(a.declarations)+this.emit("}")};um.prototype["font-face"]=function(a){return this.emit("@font-face",a.position)+this.emit("{")+
this.mapVisit(a.declarations)+this.emit("}")};um.prototype.host=function(a){return this.emit("@host",a.position)+this.emit("{")+this.mapVisit(a.rules)+this.emit("}")};um.prototype["custom-media"]=function(a){return this.emit("@custom-media "+a.name+" "+a.media+";",a.position)};um.prototype.rule=function(a){var d=a.declarations;return d.length?this.emit(a.selectors.join(","),a.position)+this.emit("{")+this.mapVisit(d)+this.emit("}"):""};um.prototype.declaration=function(a){return this.emit(a.property+
":"+a.value,a.position)+this.emit(";")};var gya=kda,Kn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,mt={};mt=function(a){a._comment=a.comment;a.map=new Yf;a.position={line:1,column:1};a.files={};for(var d in mt)a[d]=mt[d]};var lda=function(a){return"\\"===Bm.sep?a.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):a};mt.updatePosition=function(a){var d=a.match(/\n/g);d&&((this||Kn).position.line+=d.length);d=a.lastIndexOf("\n");(this||Kn).position.column=~d?a.length-
d:(this||Kn).position.column+a.length};mt.emit=function(a,d){if(d){var k=lda(d.source||"source.css");(this||Kn).map.addMapping({source:k,generated:{line:(this||Kn).position.line,column:Math.max((this||Kn).position.column-1,0)},original:{line:d.start.line,column:d.start.column-1}});this.addFile(k,d)}this.updatePosition(a);return a};mt.addFile=function(a,d){"string"!==typeof d.content||Object.prototype.hasOwnProperty.call((this||Kn).files,a)||((this||Kn).files[a]=d.content)};mt.applySourceMaps=function(){Object.keys((this||
Kn).files).forEach(function(a){var d=(this||Kn).files[a];(this||Kn).map.setSourceContent(a,d);if(!1!==(this||Kn).options.inputSourcemaps&&(d=dya.resolveSync(d,a,eya))){var k=new Xi(d.map);(this||Kn).map.applySourceMap(k,a,lda(Bm.dirname(d.sourcesRelativeTo)))}},this||Kn)};mt.comment=function(a){return/^# sourceMappingURL=/.test(a.comment)?this.emit("",a.position):this._comment(a)};var hya=mt,iya={},jya=iya=function(a,d){d=d||{};var k=d.compress?new gya(d):new Rxa(d);return d.sourcemap?(hya(k),a=k.compile(a),
k.applySourceMaps(),d="generator"===d.sourcemap?k.map:k.map.toJSON(),{code:a,map:d}):a=k.compile(a)},nY={};nY.parse=Pxa;nY.stringify=jya;var Si=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js");Si.obj=eg;Si.promise=bh;Si.string=Dh;Si.pt=ui;Si.Morph=xk;Si.vdom=XE;Si.addOrChangeCSSDeclaration=fr;Si.css=nY;var vO=Si.vdom;Si.diff=vO.diff;Si.patch=vO.patch;Si.h=vO.h;Si.createElement=vO.create;(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),k=d.hasOwnProperty("CustomVNode")&&
"function"===typeof d.CustomVNode?d.CustomVNode:d.CustomVNode=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.morph=b;this.renderer=e;this.morphVtree=null;this.key="custom-"+b.id}},{key:"type",get:function(){return"Widget"}},{key:"renderMorph",value:function(){var b=this.morph,e=this.morphVtree=this.renderer.renderMorph(b),l="customNode-key-"+
b.id;e.children[0]&&e.children[0].key===l||e.children.unshift(Si.h(b.domNodeTagName||"div",{key:l},[]));b._updateCSSDeclaration&&(b.ensureCSSDeclaration(),b._updateCSSDeclaration=!1);return e}},{key:"init",value:function(){var b=Si.createElement(this.renderMorph(),this.renderer.domEnvironment);b.childNodes[0].appendChild(this.morph.domNode);this.morph.cssDeclaration&&this.morph.ensureCSSDeclaration();return b}},{key:"update",value:function(b,e){b=b.morphVtree||this.renderMorph();var l=this.renderMorph();
b=Si.diff(b,l);Si.patch(e,b);return null}},{key:"destroy",value:function(b){(b=this.renderer.domEnvironment.document.getElementById("css-for-"+this.morph.id))&&b.remove();console.log("[HTMLMorph] node of "+this.morph.name+" gets removed from DOM")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CustomVNode"}}],d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:426,end:2427})})(void 0);var bv=Ma("X",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),k=d.hasOwnProperty("HTMLMorph")&&"function"===typeof d.HTMLMorph?d.HTMLMorph:d.HTMLMorph=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"isHTMLMorph",get:function(){return!0}},{key:"ensureCSSDeclaration",
value:function(){var b=this;try{var e=Si.css.parse(this.cssDeclaration);this.whenRendered().then(function(){e.stylesheet.rules.forEach(function(l){l.selectors&&(l.selectors=l.selectors.map(function(p){return"#"+b.id+" "+p}))});Si.addOrChangeCSSDeclaration("css-for-"+b.id,Si.css.stringify(e))})}catch(l){console.error("Error setting cssDeclaration of "+this+": "+l)}}},{key:"defaultHTML",get:function(){return'\n<div style="display: flex;\n            align-items: center;\n            justify-content: center;\n            height: 100%;\n            background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n  <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;HTML&#x2F;&gt;</p>\n</div>'}},
{key:"render",value:function(b){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return new Si.CustomVNode(this,b)}},{key:"menuItems",value:function(){var b=this,e=$b._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this);e.unshift(["edit CSS...",function(){return b.world().execCommand("open workspace",{language:"css",content:b.cssDeclaration,target:b})}],["edit html...",function(){return b.world().execCommand("open workspace",{language:"html",
content:b.html,target:b})}],{isDivider:!0});return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HTMLMorph"}},{key:"properties",get:function(){return{extent:{defaultValue:Si.pt(420,330)},html:{after:["cssDeclaration"],isStyleProp:!0,initialize:function(){this.html=this.defaultHTML},get:function(){return this.domNode.innerHTML},set:function(b){this.domNode.innerHTML=b;var e=[this].concat($jscomp.arrayFromIterable(this.ownerChain())).find(function(z){return z.master});if(e)e.master.onMorphChange(this,
{prop:"html",value:b});if(b.includes("<script"))for(b=this.domNode.querySelectorAll("script"),b=$jscomp.makeIterator(b),e=b.next();!e.done;e=b.next()){var l=e.value;e=l.parentNode;l.remove();for(var p=document.createElement("script"),u=$jscomp.makeIterator(l.attributes),x=u.next();!x.done;x=u.next())x=x.value,p.setAttribute(x.name,x.value);l=$jscomp.makeIterator(l.childNodes);for(u=l.next();!u.done;u=l.next())p.appendChild(u.value);e.appendChild(p)}}},domNodeTagName:{readOnly:!0,get:function(){return"div"}},
domNodeStyle:{readOnly:!0,get:function(){return"position: absolute; width: 100%; height: 100%;"}},domNode:{derived:!0,get:function(){this._domNode||(this._domNode=this.document.createElement(this.domNodeTagName),this._domNode.setAttribute("style",this.domNodeStyle));return this._domNode},set:function(b){this.domNode.parentNode&&this.domNode.parentNode.replaceChild(b,this.domNode);return this._domNode=b}},document:{readOnly:!0,get:function(){return this.env.domEnv.document}},scrollExtent:{readOnly:!0,
get:function(){return Si.pt(this.domNode.scrollWidth,this.domNode.scrollHeight)}},cssDeclaration:{isStyleProp:!0,set:function(b){this.setProperty("cssDeclaration",b);b?(this.makeDirty(),this._updateCSSDeclaration=!0):(b=this.env.domEnv.document.getElementById("css-for-"+this.id))&&b.remove()}}}}}],d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:2752,end:7157})}(Si.Morph));Si.HTMLMorph=bv;Si.HTMLMorph=bv;Si.HTMLMorph=bv;var IF=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),k=d.hasOwnProperty("IFrameMorph")&&"function"===typeof d.IFrameMorph?d.IFrameMorph:d.IFrameMorph=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"isIFrameMorph",get:function(){return!0}},{key:"reload",value:function(){return this.src?
this.loadURL(this.src):this.srcDoc?this.displayHTML(this.srcDoc):null}},{key:"whenLoaded",value:function(){return this._whenLoaded||Promise.resolve()}},{key:"displayHTML",value:function(b,e){e=void 0===e?{}:e;var l=this,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress){p=e;if(u=void 0===p.keepScroll?!0:p.keepScroll)x=l.iframeScroll;l.srcDoc=b;return z.yield(l.whenLoaded(),2)}u&&x&&(l.iframeScroll=x);return z.return(l)})}},{key:"loadURL",value:function(b,e){e=
void 0===e?{}:e;var l=this,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress){p=e;if(u=void 0===p.keepScroll?!0:p.keepScroll)x=l.iframeScroll;l.src=b;return z.yield(l.whenLoaded(),2)}u&&x&&(l.iframeScroll=x);return z.return(l)})}},{key:"defaultSrcDoc",get:function(){return'\n    <div style="display: flex;\n                align-items: center;\n                justify-content: center;\n                height: 100%;\n                background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n      <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;iFrame&#x2F;&gt;</p>\n    </div>'}},
{key:"defaultHTML",get:function(){return'<iframe width="100%" height="100%" frameBorder="false" srcdoc=""></iframe>'}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"example",value:function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return b=(new Si.IFrameMorph).openInWindow({title:"iframe"}).targetMorph,b.srcDoc="",b.src="http://localhost:9011/worlds/html%20export",e.yield(b.loadURL("https://google.com"),2);b.iframe.src;
b.iframe.srcDoc;b.src="";b.srcDoc="fooo";return e.yield(b.reload(),0)})}},{key:"properties",get:function(){return{html:{initialize:function(){this.html=this.defaultHTML;this.srcDoc=this.defaultSrcDoc}},iframe:{derived:!0,readOnly:!0,after:["domNode"],get:function(){return this.domNode.querySelector("iframe")}},src:{derived:!0,after:["iframe"],get:function(){return this.iframe.src},set:function(b){this.iframe.removeAttribute("srcDoc");this.iframe.src=b;var e=Si.promise.deferred().resolve;this._whenLoaded=
Si.promise;this.iframe.onload=function(l){return e(l)}}},srcDoc:{derived:!0,after:["iframe"],get:function(){return this.iframe.srcdoc},set:function(b){this.iframe.removeAttribute("src");this.iframe.srcdoc=b;this._whenLoaded=this.whenRendered().then(function(){return Si.promise.delay(20)})}},iframeScroll:{derived:!0,after:["iframe"],get:function(){try{var b=this.iframe.contentWindow;return Si.pt(b.scrollX,b.scrollY)}catch(e){return Si.pt(0,0)}},set:function(b){try{this.iframe.contentWindow.scrollTo(b.x,
b.y)}catch(e){}}}}}}],d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7167,end:10464})}(Si.HTMLMorph);Si.IFrameMorph=IF;Si.IFrameMorph=IF;Si.IFrameMorph=IF;var kya=Object.freeze({__proto__:null,HTMLMorph:bv,IFrameMorph:IF}),Tk=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js");
Tk.arr=Gf;Tk.obj=eg;Tk.rect=Ll;Tk.ShadowObject=Gp;Tk.morph=Dk;var cs=Ma("aA",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js"),k=d.hasOwnProperty("StyleSheet")&&"function"===typeof d.StyleSheet?d.StyleSheet:d.StyleSheet=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){Tk.obj.isObject(b)&&!e&&(e=b,b=null);
this.rules=e;for(var l in e)e[l]=this.unwrapFoldedProps(e[l]);this.name=b}},{key:"copy",value:function(){var b={},e;for(e in this.rules)b[e]=Object.assign({},this.rules[e]);return new Tk.StyleSheet(this.name,b)}},{key:"__only_serialize__",get:function(){return["rules","context"]}},{key:"context",set:function(b){this._context=b}},{key:"context",get:function(){return this._context}},{key:"unwrapFoldedProps",value:function(b){["borderRadius","borderWidth","borderColor","borderStyle"].forEach(function(e){if(e in
b){var l=b[e];l||(l=0);b[e]=4==Tk.arr.intersect(Tk.obj.keys(l),["top","left","bottom","right"]).length?l:{top:l,bottom:l,right:l,left:l,valueOf:function(){return l}}}});return b}},{key:"removeRule",value:function(b){delete this.rules[b];this.context.requestStyling()}},{key:"setRule",value:function(b,e){this.rules[b]=this.unwrapFoldedProps(e);this.context.requestStyling()}},{key:"toggleRule",value:function(b,e){this.rules[b]._deactivated=!e;this.context.requestStyling()}},{key:"applicableRules",value:function(){var b=
{},e;for(e in this.rules)b[e]={styleSheet:this,rule:e};return b}},{key:"toJSExpr",value:function(){return"new StyleSheet("+Tk.obj.inspect(this.rules,{customPrinter:function(b,e,l){return b&&b.isColor||b&&b.isGradient?b.toJSExpr():b&&b.isPoint?b.toString():b&&Tk.arr.all([b.top,b.left,b.right,b.bottom],function(p){return p&&Tk.obj.equals(p,b.top)})?l(b.top):b&&Tk.obj.keys(b).includes("_rev")?l(Tk.obj.dissoc(b,["_rev","_deactivated"])):e},escapeKeys:!0})+")"}},{key:"applyRule",value:function(b,e,l){var p=
this.rules[b];if(p._deactivated)return{};p=Tk.obj.dissoc(p,["_deactivated"]);return e.withMetaDo({styleSheetChange:!0},function(){if("layout"in p){var u=p.layout.copy();u.container=e;p.layout=u}"dropShadow"in p&&(p.dropShadow=new Tk.ShadowObject(p.dropShadow),p.dropShadow.morph=e);"padding"in p&&(p.padding=p.padding.isRect?p.padding:Tk.rect(p.padding,p.padding));u=Tk.obj.keys(p).filter(function(G){return!Tk.obj.equals(e[G],p[G])});u=Tk.obj.select(p,u);var x=e.propertiesAndPropertySettings().properties,
z={},E;for(E in p)z[E]=x[E]&&x[E].defaultValue||e[E];l?e.animate(Object.assign({},u,{duration:l.duration,easing:l.easing})):Object.assign(e,u);return z})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleSheet"}}],d,{pathInPackage:function(){return"style-sheets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:203,
end:3712})}(void 0));Tk.StyleSheet=cs;Tk.StyleSheet=cs;Tk.StyleSheet=cs;var Gg=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js");Gg.obj=eg;Gg.arr=Gf;Gg.num=zl;Gg.Rectangle=Fe;Gg.rect=Ll;Gg.Color=ng;Gg.pt=ui;Gg.connect=ll;Gg.noUpdate=Pt;Gg.signal=hm;Gg.disconnect=cr;Gg.Text=Lq;Gg.Range=av;Gg.HTMLMorph=bv;Gg.Icon=Fn;Gg.morph=Dk;var oY=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),k=d.hasOwnProperty("InputLine")&&"function"===typeof d.InputLine?
d.InputLine:d.InputLine=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;$b._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);Gg.connect(this,"textChange",this,"onInputChanged");Gg.connect(this,"selectionChange",this,"fixCursor")}},{key:"menuItems",value:function(){var b=this,
e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){return 1==x.nextAddress?(e=[{command:"change placeholder",target:b},{isDivider:!0}],l=e.concat,p=$jscomp,u=p.arrayFromIterable,x.yield($b._get(Object.getPrototypeOf(k.prototype),"menuItems",b).call(b),2)):x.return(l.call(e,u.call(p,x.yieldResult)))})}},{key:"onChange",value:function(b){"extent fontSize padding fontFamily position selection".split(" ").includes(b.prop)&&this.updatePlaceholder();return $b._get(Object.getPrototypeOf(k.prototype),
"onChange",this).call(this,b)}},{key:"isInputLine",get:function(){return!0}},{key:"allowDuplicatesInHistory",get:function(){return!1}},{key:"resetHistory",value:function(){this.inputHistory={items:[],max:50,index:0}}},{key:"inputHistory",get:function(){return this._inputHistory?this._inputHistory:this._inputHistory=this.historyId?this.constructor.getHistory(this.historyId):{items:[],max:30,index:0}}},{key:"inputHistory",set:function(b){this._inputHistory=b;this.historyId&&this.constructor.setHistory(this.historyId,
this._inputHistory)}},{key:"clear",value:function(){this.input=""}},{key:"focus",value:function(){this.fixCursor();$b._get(Object.getPrototypeOf(k.prototype),"focus",this).call(this)}},{key:"onBlur",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onBlur",this).call(this,b);this.updatePlaceholder()}},{key:"fitToLineHeight",value:function(){this.height=this.defaultLineHeight+this.padding.top()+this.padding.bottom()}},{key:"indicateError",value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return e.borderColor=Gg.Color.red,e._errorIcon=e.addMorph(e._errorIcon||Gg.morph({type:"label",value:[" "+b,{fontSize:e.fontSize}," ",{}].concat($jscomp.arrayFromIterable(Gg.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:e.fontSize,fontColor:Gg.Color.red,opacity:0,reactsToPointer:!1,fill:Gg.Color.white.withA(.9)})),l.yield(e.whenRendered(),2);e._errorIcon.opacity=1;e._errorIcon.rightCenter=e.innerBounds().insetBy(10).rightCenter();l.jumpToEnd()})}},{key:"clearError",
value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=Gg.Color.transparent)}},{key:"updatePlaceholder",value:function(){var b=this.getSubmorphNamed("placeholder");if(b)if(this.input.length)b.visible=!1;else{var e=this.innerBounds();b.fontSize=this.fontSize;b.visible=!0;b.height=this.height;b.padding=this.padding;b.defaultTextStyle=this.defaultTextStyle;b.lineHeight=this.height+"px";b.fit();b.topLeft=this.label.length?e.topLeft().addXY(0,
this.borderWidth):e.topLeft().withX(0)}}},{key:"fixCursor",value:function(){this.label&&(this.positionToIndex(this.selection.lead)<this.label.length&&(this.selection.lead=this.indexToPosition(this.label.length)),this.positionToIndex(this.selection.anchor)<this.label.length&&(this.selection.anchor=this.indexToPosition(this.label.length)))}},{key:"acceptInput",value:function(){var b=this.input;this.onInput(b);return b}},{key:"onInput",value:function(b){0<this.input.length&&this.addInputToHistory(this.input);
this.clearOnInput&&this.clear();Gg.signal(this,"inputAccepted",b)}},{key:"onInputChanged",value:function(b){Gg.signal(this,"inputChanged",b);this.clearError();this.updatePlaceholder()}},{key:"onMouseDown",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,b);this._errorIcon&&this._errorIcon.remove()}},{key:"deleteText",value:function(b){b=b.isRange?b:new Gg.Range(b);if(!b.isEmpty())return b=b.subtract({start:{row:0,column:0},end:{row:0,column:this.label.length}})[0],
$b._get(Object.getPrototypeOf(k.prototype),"deleteText",this).call(this,b)}},{key:"addInputToHistory",value:function(b){var e=this.inputHistory,l=e.items;if(Gg.arr.last(l)!==b){l.push(b);l.length>e.max&&(e.items=l=l.slice(-e.max));e.index=l.length-1;if(!this.allowDuplicatesInHistory)for(l=e.items.length-1;l--;)e.items[l]===b&&(e.items.splice(l,1),e.index--);this.historyId&&this.constructor.addHistoryToLocalStorage(this.historyId,e)}}},{key:"browseHistory",value:function(){var b=this,e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==
x.nextAddress)return e=b.inputHistory.items.map(function(z,E){return{isListItem:!0,string:z,value:E}}).reverse(),x.yield(b.world().filterableListPrompt("Choose item:",e,{commands:[b.histEditCommandForHistBrowse()]}),2);l=x.yieldResult;p=$jscomp.makeIterator(l.selected);u=p.next().value;"number"===typeof u&&b.setAndShowHistItem(u);b.focus();x.jumpToEnd()})}},{key:"histEditCommandForHistBrowse",value:function(){var b=this;return{name:"edit history "+this.historyId,exec:function(e){var l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==
z.nextAddress)return l=b.inputHistory.items.slice().reverse(),z.yield(e.world().editListPrompt("edit history "+b.historyId,l),2);p=z.yieldResult;u=p.status;x=p.list;if("canceled"===u)return z.return(!0);l=l.filter(function(E){return E.isListItem?x.includes(E.value):x.includes(E)});b.inputHistory=Object.assign({},b.inputHistory,{items:l});e.get("list").items=l.map(function(E,G){return{isListItem:!0,string:E,value:G}}).reverse();return z.return(!0)})}}}},{key:"setAndShowHistItem",value:function(b){var e=
this.inputHistory,l=e.items,p=l.length-1;Gg.num.between(b,0,p+1)?e.index=b:e.index=b=p;this.input!==l[b]&&"undefined"!==typeof l[b]&&(this.input=l[b])}},{key:"showHistItem",value:function(b){b=b||"next";var e=this.inputHistory,l=e.items,p=l.length-1,u=e.index;Gg.num.between(u,0,p+1)||(e.index=u=p);if(this.input!==l[u]&&"undefined"!==typeof l[u])this.input=l[u];else{if("next"===b){if(u>p)return;u=++e.index}else{if(0>=u)return;u=--e.index}this.input=l[u]||""}}},{key:"commands",get:function(){var b=
this;return[{name:"change placeholder",exec:function(){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.world().prompt("Enter Placeholder:",{input:b.placeholder}),2);if(e=l.yieldResult)b.placeholder=e;l.jumpToEnd()})}},{name:"accept input",exec:function(){b.acceptInput();return!0}},{name:"show previous input from history",exec:function(){b.showHistItem("prev");return!0}},{name:"show next input from history",exec:function(){b.showHistItem("next");
return!0}},{name:"browse history",exec:function(){b.browseHistory();return!0}},{name:"remove items from history",exec:function(e){var l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return l=e.inputHistory,p=l.items.map(function(E,G){return{isListItem:!0,string:E,value:G}}).reverse(),z.yield(e.world().filterableListPrompt("Choose items to delete:",p,{multiSelect:!0}),2);u=z.yieldResult;x=u.selected;Gg.arr.sort(x).reverse().forEach(function(E){E<l.index&&
l.index--;l.items.splice(E,1)});e.inputHistory=l;return z.return(!0)})}}].concat($b._get(Object.getPrototypeOf(k.prototype),"commands",this))}},{key:"keybindings",get:function(){return $b._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"},{keys:"Up|Ctrl-Up|Alt-P",command:"show previous input from history"},{keys:"Down|Ctrl-Down|Alt-N",command:"show next input from history"},{keys:"Alt-H",
command:"browse history"},{keys:"Alt-Shift-H",command:"remove items from history"}])}},{key:"htmlExport_transformNode",value:function(b){var e=b.getRootNode().createElement("input"),l=b.querySelector(".newtext-text-layer.actual");e.id=b.id;e.className=b.className;e.style=b.style.cssText;Object.assign(e.style,Gg.obj.select(l.style,"padding font-family font-weight font-style text-decoration font-size color".split(" ")));e.placeholder=this.placeholder;e.type="text";e.autocomplete=e.name=this.name.replace(/[\s"]/g,
"-");return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InputLine"}},{key:"getHistoryFromLocalSorage",value:function(b){if("undefined"===typeof localStorage)return null;try{var e=localStorage.getItem("lively.morphic-inputline-"+b);return e?JSON.parse(e):null}catch(l){return null}}},{key:"addHistoryToLocalStorage",value:function(b,e){if("undefined"!==typeof localStorage)try{localStorage.setItem("lively.morphic-inputline-"+b,JSON.stringify(e))}catch(l){console.error(l)}}},{key:"histories",
get:function(){this._histories||(this._histories=new Map);return this._histories}},{key:"getHistory",value:function(b){var e=this.histories.get(b);if(e)return e;e=this.getHistoryFromLocalSorage(b)||{items:[],max:50,index:0};this.histories.set(b,e);return e}},{key:"setHistory",value:function(b,e){e=void 0===e?{items:[],max:50,index:0}:e;this.histories.set(b,e);this.addHistoryToLocalStorage(b,e);return e}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},
extent:{defaultValue:Gg.pt(100,20)},padding:{defaultValue:Gg.Rectangle.inset(2,4)},clipMode:{defaultValue:"hidden"},lineWrapping:{defaultValue:!1},historyId:{defaultValue:null},clearOnInput:{defaultValue:!1},label:{after:["textAndAttributes","extent","padding","submorphs"],defaultValue:"",set:function(b){var e=this;this.setProperty("label",b);this.textString.startsWith(b)||Gg.noUpdate(function(){e.textString=b+e.input})}},input:{after:["label"],derived:!0,get:function(){return this.textString.slice(this.label.length)},
set:function(b){this.textString=this.label+(b?String(b):"");this.updatePlaceholder()}},placeholder:{after:["submorphs","label","defaultTextStyle"],dervied:!0,get:function(){var b=this.getSubmorphNamed("placeholder");return b?b.value:null},set:function(b){var e=this.getSubmorphNamed("placeholder");b?e?(e.defaultTextStyle=Object.assign({},this.defaultTextStyle,{fontColor:Gg.Color.gray}),e.value=b):this.addMorph(Gg.Text.makeLabel(b,Object.assign({},this.defaultTextStyle,{name:"placeholder",reactsToPointer:!1,
fontColor:Gg.Color.gray}))):e&&e.remove();this.updatePlaceholder()}}}}}],d,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:466,end:14839})}(Gg.Text);oY=Gg.InputLine;var JF=Ma("aD",oY),cv=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),k=d.hasOwnProperty("PasswordInputLine")&&
"function"===typeof d.PasswordInputLine?d.PasswordInputLine:d.PasswordInputLine=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"onChange",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);"borderRadius"==b.prop&&this.updateHtml(this.input)}},{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;$b._get(Object.getPrototypeOf(k.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,b);this.onLoad()}},{key:"onChange",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);["fill","borderRadius"].includes(b.prop)&&this.updateHtml(this.input)}},{key:"onLoad",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(b.whenRendered(),2);b.ensureInputNode().then(function(l){b.updateHtml(b.input);l.onkeydown=function(p){return b.env.eventDispatcher.dispatchDOMEvent(p,
b,"onKeyDown")};l.onkeyup=function(p){return b.env.eventDispatcher.dispatchDOMEvent(p,b,"onKeyUp")}});e.jumpToEnd()})}},{key:"onMouseDown",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,b);this._errorIcon&&this._errorIcon.remove()}},{key:"onAfterRender",value:function(b){this.ensureInputNode()}},{key:"ensureInputNode",value:function(){var b=this;return this.whenRendered().then(function(){var e=b.domNode;e.parentNode&&"INPUT"==e.parentNode.tagName&&(e.parentNode.remove(),
e=b.env.renderer.getNodeForMorph(b),e.insertBefore(b.domNode,e.firstChild));return b.domNode})}},{key:"onKeyDown",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onKeyDown",this).call(this,b);if(this.input!=this.lastInput)this.onInputChanged(this.input);this.lastInput=this.input}},{key:"focus",value:function(){$b._get(Object.getPrototypeOf(k.prototype),"focus",this).call(this);this.domNode&&this.domNode.focus()}},{key:"onFocus",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),
"onFocus",this).call(this,b);this._originalShadow||(this._originalShadow=this.dropShadow,this.highlightWhenFocused&&this.animate({dropShadow:this.haloShadow,duration:200}))}},{key:"onBlur",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onBlur",this).call(this,b);this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null}},{key:"indicateError",value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return e.borderWidth=3,e.borderColor=Gg.Color.red,e._errorIcon=e.addMorph(e._errorIcon||Gg.morph({type:"label",value:[" "+b,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(Gg.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:Gg.Color.red,opacity:0,reactsToPointer:!1,fill:Gg.Color.white.withA(.9)})),l.yield(e.whenRendered(),2);e._errorIcon.opacity=1;e._errorIcon.rightCenter=e.innerBounds().insetBy(10).rightCenter();l.jumpToEnd()})}},{key:"clearError",
value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=Gg.Color.transparent)}},{key:"acceptInput",value:function(){var b=this.input;Gg.signal(this,"inputAccepted",b);return b}},{key:"onInputChanged",value:function(b){this.clearError();Gg.signal(this,"inputChanged",b)}},{key:"updateHtml",value:function(b){var e=this,l,p,u,x,z,E,G,J,K,T,P,da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fa){if(1==fa.nextAddress)return l=e,p=l.fontSize,
u=l.fontFamily,x=l.padding,z=l.placeholder,E=void 0===l.fill?ng.white:l.fill,G=l.borderRadius,J=x.top(),K=x.right(),T=x.bottom(),P=x.left(),fa.yield(e.ensureInputNode(),2);da=fa.yieldResult;da.setAttribute("type","password");da.setAttribute("placeholder",z);da.setAttribute("value",b);Object.assign(da.style,{position:"absolute",width:"calc(100% - "+P+"px - "+K+"px)","border-width":0,outline:"none","border-radius":G.valueOf()+"px",background:E.toString(),padding:J+"px "+K+"px "+T+"px "+P+"px","font-size":p+
"px","font-family":""+u});fa.jumpToEnd()})}},{key:"commands",get:function(){var b=this;return[{name:"accept input",exec:function(){b.acceptInput();return!0}}].concat($b._get(Object.getPrototypeOf(k.prototype),"commands",this))}},{key:"keybindings",get:function(){return $b._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"}])}},{key:"htmlExport_transformNode",value:function(b){var e=b.getRootNode(),
l=e.createElement("div"),p=b.querySelector("input");e=e.createElement("input");p.childNodes[0]&&"INPUT"===p.childNodes[0].tagName&&(p=p.childNodes[0]);e.id=b.id;e.className=b.className;l.style=b.style.cssText;Object.assign(e.style,Gg.obj.select(p.style,"padding font-family font-weight font-style text-decoration font-size border-radius color".split(" ")));e.style.position="absolute";e.style.width=b.style.width;e.style.height=b.style.height;e.style["border-width"]=b.style["border-width"];e.placeholder=
this.placeholder;e.type="password";e.autocomplete=e.name=this.name.replace(/[\s"]/g,"-");l.appendChild(e);l.appendChild(b.childNodes[1]);return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordInputLine"}},{key:"properties",get:function(){return{extent:{defaultValue:Gg.pt(100,20)},html:{derived:!0,initialize:function(){},get:function(){return""},set:function(b){}},highlightWhenFocused:{defaultValue:!0},haloShadow:{type:"Shadow"},domNodeTagName:{readOnly:!0,get:function(){return"input"}},
domNodeStyle:{readOnly:!0,get:function(){return"background: grey"}},input:{derived:!0,after:["domNode"],get:function(){return this.domNode&&this.domNode.value||""},set:function(b){this.domNode.value=b;this.updateHtml(this.input)}},placeholder:{after:["domNode"],set:function(b){this.setProperty("placeholder",b);this.updateHtml(this.input)}},fontSize:{defaultValue:12,after:["input"],set:function(b){this.setProperty("fontSize",b);this.updateHtml(this.input)}},fontFamily:{defaultValue:"sans-serif",after:["input"],
set:function(b){this.setProperty("fontFamily",b);this.updateHtml(this.input)}},padding:{defaultValue:Gg.Rectangle.inset(2),after:["input"],set:function(b){this.setProperty("padding",b);this.updateHtml(this.input)}}}}}],d,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14914,end:21842})}(Gg.HTMLMorph);
Gg.PasswordInputLine=cv;Gg.PasswordInputLine=cv;Gg.PasswordInputLine=cv;Gg.default=oY;var Rf=lively.FreezerRuntime.recorderFor("lively.morphic/index.js");Rf.default=$l;Rf.config=$l;Object.assign(Rf,Fwa);Object.assign(Rf,Hxa);Object.assign(Rf,Mxa);Object.assign(Rf,Nxa);Object.assign(Rf,Jxa);Object.assign(Rf,kya);Object.assign(Rf,nra);Object.assign(Rf,R9);Rf.StyleSheet=cs;Rf.StyleSheet=cs;Rf.ShadowObject=Gp;Rf.ShadowObject=Gp;Rf.addOrChangeCSSDeclaration=fr;Rf.addOrChangeCSSDeclaration=fr;Rf.addOrChangeLinkedCSS=
tw;Rf.addOrChangeLinkedCSS=tw;Rf.easings=No;Rf.easings=No;Rf.stringToEasing=St;Rf.stringToEasing=St;Object.assign(Rf,Gwa);Rf.Icon=Fn;Rf.Icon=Fn;Rf.loadMorphFromSnapshot=xr;Rf.loadMorphFromSnapshot=xr;Object.assign(Rf,Hwa);Rf.World=Ss;Rf.Hand=pB;Rf.Morph=xk;Rf.Image=Xu;Rf.Ellipse=Zx;Rf.Triangle=jB;Rf.Path=$x;Rf.Polygon=kB;Rf.LineMorph=lB;Rf.Text=Lq;Rf.Label=Mq;Rf.HTMLMorph=bv;Rf.InputLine=JF;Rf.PasswordInputLine=cv;Rf.InputLine=JF;Rf.InputLine=JF;Rf.PasswordInputLine=cv;Rf.PasswordInputLine=cv;Rf.locateClass=
br;Rf.morph=Dk;Rf.addClassMappings=RC;Rf.inspect=xx;Rf.touchInputDevice=En;Rf.addClassMappings({default:Rf.Morph,world:Rf.World,hand:Rf.Hand,image:Rf.Image,ellipse:Rf.Ellipse,triangle:Rf.Triangle,path:Rf.Path,text:Rf.Text,input:Rf.InputLine,label:Rf.Label,polygon:Rf.Polygon,line:Rf.LineMorph,html:Rf.HTMLMorph});Rf.morph=Dk;Rf.morph=Dk;Rf.inspect=xx;Rf.inspect=xx;Rf.touchInputDevice=En;Rf.touchInputDevice=En;var lya=Object.freeze({__proto__:null,config:$l,StyleSheet:cs,ShadowObject:Gp,addOrChangeCSSDeclaration:fr,
addOrChangeLinkedCSS:tw,easings:No,stringToEasing:St,Icon:Fn,loadMorphFromSnapshot:xr,InputLine:JF,PasswordInputLine:cv,morph:Dk,inspect:xx,touchInputDevice:En,Morph:xk,Ellipse:Zx,Triangle:jB,Image:Xu,PathPoint:EF,Path:$x,Polygon:kB,LineMorph:lB,World:Ss,Hand:pB,Text:Lq,Label:Mq,Anchor:qB,HTMLMorph:bv,IFrameMorph:IF,MorphicEnv:wp,CustomLayout:HE,SnapLayout:IE,VerticalLayout:Gu,HorizontalLayout:xq,ProportionalLayout:JE,CenteredTilingLayout:KE,TilingLayout:LE,CellGroup:ME,LayoutColumn:NE,LayoutRow:OE,
LayoutCell:PE,GridLayout:Hu,TooltipViewer:nB,Tooltip:ay,MorphicDB:Yr}),kh=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js");kh.promise=bh;kh.fun=Vl;kh.num=zl;kh.Icon=Fn;kh.stringToEasing=St;kh.easings=No;kh.VerticalLayout=Gu;kh.ShadowObject=Gp;kh.HorizontalLayout=xq;kh.morph=Dk;kh.Morph=xk;kh.StyleSheet=cs;kh.Image=Xu;kh.pt=ui;kh.RadialGradient=Dn;kh.rect=Ll;kh.Rectangle=Fe;kh.Color=ng;kh.connect=ll;(function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),
k=d.hasOwnProperty("ProgressBar")&&"function"===typeof d.ProgressBar?d.ProgressBar:d.ProgressBar=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"test",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){1==e.nextAddress&&(b.progress=0);if(!(1>b.progress))return e.jumpTo(0);b.progress+=.1;return e.yield(kh.promise.delay(1E3),2)})}},{key:"update",value:function(){var b=
this;setTimeout(function(){b.world()||b.stopStepping()},1E3);if(this._lastWidth){var e=this.get("progress path"),l=kh.stringToEasing(kh.easings.inOutExpo)(kh.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3),p=this._targetWidth;e.topLeft=kh.pt(0,0);e.height=this.height;e.width=this._lastWidth>p?p:kh.num.interpolate(l,this._lastWidth,p)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProgressBar"}},{key:"properties",get:function(){return{progress:{after:["submorphs"],initialize:function(){this.progress=
0;this.startStepping("update")},set:function(b){var e=this.get("progress path");this._lastWidth=Math.max(e.width,this._targetWidth,1);this._targetWidth=this.width*b;this._timeStamp=Date.now();this.setProperty("progress",b)}},fill:{defaultValue:kh.Color.darkGray},borderRadius:{defaultValue:5},clipMode:{defaultValue:"hidden"},submorphs:{initialize:function(){this.submorphs=[{name:"progress path",fill:kh.Color.orange,width:1}]}}}}}],d,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:336,end:1943})})(kh.Morph);var pY=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),k=d.hasOwnProperty("LoadingIndicator")&&"function"===typeof d.LoadingIndicator?d.LoadingIndicator:d.LoadingIndicator=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;$b._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);var e=this.ui;b=e.label;var l=e.closeButton;if(e=e.progressBar)e.opacity=0,e.isLayoutable=!1;kh.connect(this,"extent",this,"relayout");kh.connect(b,"extent",this,"relayout");kh.connect(b,"value",this,"updateLabel");kh.connect(b,"fontSize",this,"updateLabel");kh.connect(b,"fontFamily",this,
"updateLabel");kh.connect(l,"fire",this,"remove");l.fit();this.relayout()}},{key:"animateProgress",value:function(b){var e=this,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return l=e.ui,(p=l.progressBar)||(p=e.addMorph(new kh.ProgressBar({name:"progress bar"}))),u=e.center,0==b?(p.isLayoutable=!1,p.opacity=0):(p.isLayoutable=!0,p.opacity=1),p.progress=b,x.yield(e.whenRendered(),2);e.center=u;x.jumpToEnd()})}},{key:"hideSpinner",value:function(){var b=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(!b.ui.spinner)return e.return();b.ui.spinner.visible=!1;b.ui.spinner.width=50;b.ui.spinner.remove();return e.yield(b.whenRendered(),0)})}},{key:"isEpiMorph",get:function(){return!0}},{key:"updateLabel",value:function(){var b=this.center;this.relayout();this.center=b}},{key:"relayout",value:function(){kh.Rectangle.inset(20,12);var b=this.ui,e=b.label,l=b.progressBar,p=b.status;b.closeButton.topRight=this.innerBounds().insetBy(2).topRight();
l.extent=kh.pt(e.owner.bounds().width,5);p[p.visible?"top":"bottom"]=e.height}},{key:"onHoverIn",value:function(b){this.ui.closeButton.visible=!0}},{key:"onHoverOut",value:function(b){this.ui.closeButton.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LoadingIndicator"}},{key:"open",value:function(b,e){var l=kh.morph(Object.assign({type:kh.LoadingIndicator},e,{label:b}));if(e&&e.animated)return kh.promise.delay(e.delay||0).then(function(){l.openInWorld();l.opacity=0;l.whenRendered().then(function(){l.ui.spinner&&
(l.ui.spinner.visible=!0);l.top+=25;l.animate({top:l.top-25,easing:kh.easings.outExpo});l.animate({opacity:1,easing:kh.easings.outExpo})})}),l;l.openInWorld();l.ui.label.whenRendered().then(function(){l.ui.spinner&&(l.ui.spinner.visible=!0);l.ui.label.fit()});return l}},{key:"forPromise",value:function(b,e,l){var p=this.open(e,l);kh.promise.finally(Promise.resolve(b),function(){return p.remove()});return p}},{key:"runFn",value:function(b,e,l){var p=this,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:return u=
p.open(e,l),x.yield(u.whenRendered(),2);case 2:return x.setFinallyBlock(3),x.yield(b(u),5);case 5:return x.return(x.yieldResult);case 3:x.enterFinallyBlock(),u.remove(),x.leaveFinallyBlock(0)}})}},{key:"properties",get:function(){return{name:{defaultValue:"LoadingIndicator"},styleClasses:{defaultValue:["Halo"]},hasFixedPosition:{defaultValue:!0},ui:{derived:!0,get:function(){return{progressBar:this.getSubmorphNamed("progress bar"),closeButton:this.getSubmorphNamed("closeButton"),spinner:this.getSubmorphNamed("spinner"),
label:this.getSubmorphNamed("ld label"),status:this.getSubmorphNamed("status")}}},progress:{derived:!0,set:function(b){this.animateProgress(kh.num.clamp(b,0,1))}},label:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.value},set:function(b){this.ui.label.value=b}},status:{derived:!0,after:["submorphs"],defaultValue:!1,get:function(){return this.getSubmorphNamed("status").value},set:function(b){var e=this.ui.status;b?(e.visible=!0,e.value=b):(e.visible=!1,e.value="");this.relayout()}},
fontFamily:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontFamily},set:function(b){this.ui.label.fontFamily=b}},fontSize:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontSize},set:function(b){this.ui.label.fontSize=b}},loadingImage:{defaultValue:System.decanonicalize("lively.morphic/")+"lively-web-logo-small-animate.svg"},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/loading indicator"}}},submorphs:{initialize:function(){this.submorphs=
[{name:"wrapper",submorphs:[{type:"html",name:"spinner",extent:kh.pt(86.2,70.2)},{type:"label",name:"ld label",extent:kh.pt(20,100),submorphs:[{type:"label",name:"status"}]}]},{type:"button",name:"closeButton",label:kh.Icon.textAttribute("times")},{type:kh.ProgressBar,name:"progress bar"}]}}}}}],d,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:2099,end:8211})}(kh.Morph);pY=kh.LoadingIndicator;var uB=Ma("v",pY);kh.default=pY;var Ci=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js");Ci.Morph=xk;Ci.World=Ss;Ci.HorizontalLayout=xq;Ci.morph=Dk;Ci.MorphicDB=Yr;Ci.graph=Ts;Ci.promise=bh;Ci.date=Er;Ci.string=Dh;Ci.arr=Gf;Ci.Color=ng;Ci.pt=ui;Ci.LoadingIndicator=uB;Ci.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
Ci.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
Ci.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
(function(a){var d=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),k=d.hasOwnProperty("WorldVersion")&&"function"===typeof d.WorldVersion?d.WorldVersion:d.WorldVersion=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"update",value:function(){var b=$jscomp.makeIterator(this.submorphs),e=b.next().value;b=b.next().value;e.imageUrl=this.commit.preview||Ci.missingSVG;b.textAndAttributes=
this.info;b.fontColor=this.selected?Ci.Color.white:Ci.Color.darkGray}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldVersion"}},{key:"properties",get:function(){return{commit:{},fill:{defaultValue:Ci.Color.transparent},info:{derived:!0,get:function(){var b=this.commit,e=b.message,l=b.name,p=b.timestamp;return[b._id.slice(0,6)+" ",{fontWeight:"bold"},Ci.string.truncate(e.split("\n")[0],40)+" ",{}," ("+l+" ",{},""+Ci.date.format(new Date(p),"yyyy-mm-dd HH:MM Z"),{}]}},selected:{set:function(b){this.setProperty("selected",
b);this.update()}},layout:{initialize:function(){this.layout=new Ci.HorizontalLayout({align:"center",spacing:5})}},submorphs:{initialize:function(){this.submorphs=[{type:"image",extent:Ci.pt(30,30),name:"preview",reactsToPointer:!1},{reactsToPointer:!1,type:"label",fill:null,name:"commit info",fontFamily:"Nunito",fontColor:Ci.Color.gray}]}}}}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"WorldVersionViewer",version:"0.1.1-34"}}},{start:1327,end:2884})})(Ci.Morph);var mda=function(a){var d=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),k=d.hasOwnProperty("WorldVersionViewer")&&"function"===typeof d.WorldVersionViewer?d.WorldVersionViewer:d.WorldVersionViewer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"reset",value:function(){this.getSubmorphNamed("version list").items=
[];this.getSubmorphNamed("version list spinner").visible=!1}},{key:"onMouseDown",value:function(b){switch(b.targetMorph.name){case "visit button":this.visitSelectedCommit();break;case "revert button":this.revertToSelectedCommit()}}},{key:"visitSelectedCommit",value:function(){var b=this,e,l,p,u,x,z,E,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:return e=b.get("version list").selection,l=Ci.LoadingIndicator.open("Loading "+e.name+"..."),p=$world,u=b.db||
Ci.MorphicDB.default,x=e._id,J.setCatchFinallyBlocks(2,3),x?J.yield(Ci.World.loadFromCommit(x,void 0,{morphicDB:u}),8):J.yield(Ci.World.loadFromDB(e.name,e.ref,void 0,{morphicDB:u}),7);case 7:z=J.yieldResult;J.jumpTo(6);break;case 8:z=J.yieldResult;case 6:return E=z,J.return(E);case 3:J.enterFinallyBlock();l.remove();J.leaveFinallyBlock(0);break;case 2:G=J.enterCatchBlock(),console.error(G),p.showError("Error loading world:"+G),J.jumpTo(3)}})}},{key:"revertToSelectedCommit",value:function(){var b=
this,e,l,p,u,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress){e=b.get("version list").selection;if(!e)return E.return();l=b.db||Ci.MorphicDB.default;p=e;u=p._id;x=p.name;z=p.type;return E.yield(l.revert(z,x,u,"HEAD"),2)}return E.return(b.initializeFromStartCommit(e,l,{showRevertButton:!0}))})}},{key:"initializeFromStartCommit",value:function(b,e,l){e=void 0===e?Ci.MorphicDB.default:e;l=void 0===l?{}:l;var p=this,u,x,z,E,G,J,K,T,P,da,fa,ka,za,Ia,N,ia,W,ca,sa,
la,Aa,ib,ob;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ea){switch(Ea.nextAddress){case 1:return u=l,x=void 0===u.showRefs?!0:u.showRefs,z=p.startCommit=b,E=z._id,G=z.type,J=z.name,K=p.getSubmorphNamed("version list spinner"),K.visible=!0,K.center=p.get("version list").center,p.db=e,Ea.yield(e.history(G,J),2);case 2:T=Ea.yieldResult,P=T.refs,da=T.history,fa=E,ka=Ci.graph.invert(da),za=Ci.graph.hull(ka,E),Ia={_id:!0},N=[b],ia=$jscomp.makeIterator(za),W=ia.next();case 3:if(W.done)return la=
Ci.arr.max(N,function(ua){return ua.timestamp}),fa=la._id,Ea.yield(e.log(fa,void 0,!0),7);ca=W.value;return Ea.yield(e.log(ca,void 0,!0,Ia),6);case 6:sa=Ea.yieldResult;N.push.apply(N,$jscomp.arrayFromIterable(sa));sa.forEach(function(ua){return Ia[ua._id]=!0});W=ia.next();Ea.jumpTo(3);break;case 7:Aa=Ea.yieldResult;if(x)for(ib in P);ob=Aa.map(function(ua){var ya=new Ci.WorldVersion({reactsToPointer:!1,commit:ua});ya.update();return{isListItem:!0,morph:ya,value:ua}});p.get("version list").items=ob;
K.visible=!1;Ea.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldVersionViewer"}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"WorldVersionViewer",version:"0.1.1-34"}}},{start:2901,end:6778})}(Ci.Morph);mda=Ci.WorldVersionViewer;Ci.default=mda;var gl=lively.FreezerRuntime.recorderFor("lively.components/canvas.js");
gl.pt=ui;gl.Point=sg;gl.rect=Ll;gl.Color=ng;gl.Morph=xk;gl.Image=Xu;gl.connect=ll;var KF=Ma("$",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/canvas.js"),k=d.hasOwnProperty("Canvas")&&"function"===typeof d.Canvas?d.Canvas:d.Canvas=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"context",get:function(){if(this._canvas)return this._canvas.getContext(this.contextType);this.world()&&
this.env.renderer.getNodeForMorph(this)||console.warn("Context not yet rendered. Please ensure that the Canvas Morph has been rendered first before accessing the context. This can be achieved by waiting for the whenRendered() promise before you proceed accessing the context property.");return null}},{key:"_canvas",set:function(b){var e=this.__canvas__;this.__canvas__=b;this.restoreContent(e,b)}},{key:"_canvas",get:function(){return this.__canvas__}},{key:Symbol.for("lively-instance-initialize"),value:function(b){b=
void 0===b?{}:b;$b._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);gl.connect(this,"extent",this,"onExtentChanged")}},{key:"afterRender",value:function(b,e){e?this._canvas=b:"function"===typeof this.__canvas_init__&&(this.__canvas_init__(),delete this.__canvas_init__)}},{key:"restoreContent",value:function(b,e){var l=this.contextType,p=this.preserveContents;"function"===typeof this.__canvas_init__?(this.__canvas_init__(),delete this.__canvas_init__):
p&&"2d"==l&&b&&b!==e&&this.context.drawImage(b,0,0)}},{key:"onExtentChanged",value:function(){var b=this;if(this._canvas&&this.preserveContents&&this.context.getImageData){var e=this._canvas,l=e.width;e=e.height;if(l&&e){var p=this.context.getImageData(0,0,l,e);this.__canvas_init__=function(){b.context.putImageData(p,0,0)}}}}},{key:"clear",value:function(b){var e=this.context;if(e){var l=this._canvas,p=l.width;l=l.height;e.save();e.setTransform(1,0,0,1,0,0);b?(b.toCSSString&&(b=b.toCSSString()),e.fillStyle=
b,e.fillRect(0,0,p,l)):e.clearRect(0,0,p,l);e.restore()}}},{key:"render",value:function(b){return b.renderCanvas(this)}},{key:"withContextDo",value:function(b){var e=this;this._canvas?b(this.context):this.__canvas_init__=function(){return b(e.context)}}},{key:"toDataURI",value:function(){return this._canvas&&this._canvas.toDataURL()}},{key:"fromDataURI",value:function(b){var e=this,l=new gl.Image;l.onload=function(){e._canvas.width=l.width;e._canvas.height=l.height;e.context.drawImage(l,0,0)};l.src=
b}},{key:"imageData",value:function(b){b||(b=this.canvasBounds);return this.context.getImageData(b.x,b.y,b.width,b.height)}},{key:"nonTransparentArea",value:function(){for(var b=this.imageData(),e=b.data,l=b.width,p=b.height,u=l,x=p,z=0;z<p;z++)for(var E=0;E<u;E++)0<e[4*(z*l+E)+3]&&(u=E,x>z&&(x=z));if(u===l)return gl.rect(0,0,0,0);z=u;E=x;for(--p;p>x;p--)for(var G=l-1;G>z;G--)0<e[4*(p*l+G)+3]&&(z=G,E<p&&(E=p));return{imageData:b,bounds:gl.rect(u,x,z-u+1,E-x+1)}}},{key:"trimNonTransparent",value:function(){var b=
this.nonTransparentArea(),e=b.imageData;b=b.bounds;if(!b.topLeft().equals(gl.pt(0,0))){var l=b.x,p=b.y;this.context.putImageData(e,-l,-p,l,p,b.width,b.height);this.position=this.position.addPt(b.topLeft())}b.extent().equals(this.extent)||(this.extent=b.extent())}},{key:"finishDraw",value:function(b){b=void 0===b?{}:b;var e=this.context,l=b,p=void 0===l.color?"rgba(0,0,0,0.6)":l.color,u=void 0===l.width?4:l.width;l=void 0===l.fill?!1:l.fill;b=b.fillColor||p;p.toCSSString&&(p=p.toCSSString());b.toCSSString&&
(b=b.toCSSString());e.strokeStyle=p;e.lineWidth=u;e.stroke();e.closePath();l&&(e.fillStyle=b,e.fill())}},{key:"line",value:function(b,e,l){l=void 0===l?{}:l;var p=this.context;p.beginPath();p.moveTo(b.x,b.y);p.lineTo(e.x,e.y);p.lineCap="round";this.finishDraw(l)}},{key:"arc",value:function(b,e,l,p,u,x){u=void 0===u?!1:u;x=void 0===x?{}:x;var z=this.context;z.beginPath();z.arc(b.x,b.y,e,l,p,u);this.finishDraw(x)}},{key:"polygon",value:function(b,e){e=void 0===e?{}:e;var l=this.context;l.beginPath();
l.moveTo(b[0].x,b[0].y);for(var p=0;p<b.length;p++)l.lineTo(b[p].x,b[p].y);l.lineTo(b[0].x,b[0].y);this.finishDraw(e)}},{key:"text",value:function(b,e,l){l=void 0===l?{}:l;var p=this.context,u=l,x=void 0===u.color?"black":u.color,z=void 0===u.font?"14px Arial":u.font,E=void 0===u.align?"start":u.align;u=void 0===u.baseline?"bottom":u.baseline;p.save();p.font=z;p.fillStyle=x;p.textAlign=E;p.textBaseline=u;l.angle&&!isNaN(l.angle)&&(p.translate(e.x,e.y),p.rotate(l.angle),p.translate(-e.x,-e.y));p.fillText(b,
e.x,e.y);p.restore()}},{key:"line",value:function(b,e,l){l=void 0===l?{}:l;var p=this.context,u=l.color||"rgba(0,0,0,0.6)";l=l.width||4;u.toCSSString&&(u=u.toCSSString());p.strokeStyle=u;p.beginPath();p.lineWidth=l;p.moveTo(b.x,b.y);p.lineTo(e.x,e.y);p.stroke();p.closePath()}},{key:"spiral",value:function(){this.clear(gl.Color.white);for(var b=this.innerBounds().center(),e=0,l=1,p=0;150>p;p++){var u=b.addPt(gl.Point.polar(l,e));this.line(b,u,{color:gl.Color.random()});b=u;e+=Math.PI/10;l+=.3}}},{key:"rect",
value:function(b,e,l){l=void 0===l?{}:l;var p=this.context;p.beginPath();p.rect(b.x,b.y,e.x,e.y);this.finishDraw(l)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Canvas"}},{key:"properties",get:function(){return{extent:{defaultValue:gl.pt(200,200)},fill:{defaultValue:gl.Color.transparent},contextType:{defaultValue:"2d"},preserveContents:{defaultValue:!0},canvasExtent:{get:function(){return this._canvas&&gl.pt(this._canvas.width,this._canvas.height)}},canvasBounds:{readOnly:!0,get:function(){return this._canvas&&
this.canvasExtent.extentAsRectangle()}},_serializedContents:{get:function(){return this.preserveContents&&this.toDataURI()},set:function(b){var e=this;this.withContextDo(function(){return e.fromDataURI(b)})}}}}}],d,{pathInPackage:function(){return"canvas.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:233,end:8699})}(gl.Morph));
gl.Canvas=KF;gl.Canvas=KF;gl.Canvas=KF;var nt=lively.FreezerRuntime.recorderFor("Globe/index.js");nt.Canvas=KF;nt.promise=bh;nt.easings=No;var nda=function(a){var d=lively.FreezerRuntime.recorderFor("Globe/index.js"),k=d.hasOwnProperty("Globe")&&"function"===typeof d.Globe?d.Globe:d.Globe=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"fullyLoaded",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==
l.nextAddress?(e=b.get("webgl canvas"),l.yield(nt.promise.waitFor(5E3,function(){return e.firstFrameRendered}),2)):l.return(l.yieldResult)})}},{key:"onLoad",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return navigator.webdriver||!lively.FreezerRuntime?l.return():l.yield(b.whenRendered(),2);case 2:return e=b.get("webgl canvas"),e.renderGlobe(),l.yield(b.fullyLoaded(),3);case 3:return l.yield(nt.promise.delay(500),4);case 4:b.get("cover").animate({opacity:0,
easing:nt.easings.inOutCubic}),e.relayout(),l.jumpToEnd()}})}},{key:"beforePublish",value:function(){this.get("cover").opacity=1}},{key:"onExtentChanged",value:function(){$b._get(Object.getPrototypeOf(k.prototype),"onExtentChanged",this).call(this);this.get("webgl canvas").extent=this.extent;this.get("cover").extent=this.extent}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Globe"}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"Globe",version:"0.1.1-26"}}},{start:169,end:918})}(nt.Canvas);nda=nt.Globe;nt.default=nda;var vB={},oda=!1,q="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,yza=function(){var a;if(oda)return vB;oda=!0;(function(d,k){"object"===typeof vB?k(vB):"function"===typeof define&&define.amd?define(["exports"],k):(d="undefined"!==typeof globalThis?globalThis:d||self,k(d.THREE=
{}))})(vB,function(d){function k(A,D,r,t,B,I,M){try{var U=A[I](M),Z=U.value}catch(aa){r(aa);return}U.done?D(Z):Promise.resolve(Z).then(t,B)}function b(A){return function(){var D=this||q,r=arguments;return new Promise(function(t,B){function I(Z){k(U,t,B,I,M,"next",Z)}function M(Z){k(U,t,B,I,M,"throw",Z)}var U=A.apply(D,r);I(void 0)})}}function e(A,D){for(var r=0;r<D.length;r++){var t=D[r];t.enumerable=t.enumerable||!1;t.configurable=!0;"value"in t&&(t.writable=!0);Object.defineProperty(A,t.key,t)}}
function l(A,D,r){D&&e(A.prototype,D);r&&e(A,r);return A}function p(A,D){A.prototype=Object.create(D.prototype);A.prototype.constructor=A;u(A,D)}function u(A,D){u=Object.setPrototypeOf||function(r,t){r.__proto__=t;return r};return u(A,D)}function x(A){if(void 0===A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function z(A,D){if(A){if("string"===typeof A)return E(A,D);var r=Object.prototype.toString.call(A).slice(8,-1);"Object"===r&&A.constructor&&
(r=A.constructor.name);if("Map"===r||"Set"===r)return Array.from(A);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(A,D)}}function E(A,D){if(null==D||D>A.length)D=A.length;for(var r=0,t=Array(D);r<D;r++)t[r]=A[r];return t}function G(A,D){var r;if("undefined"===typeof Symbol||null==A[Symbol.iterator]){if(Array.isArray(A)||(r=z(A))||D&&A&&"number"===typeof A.length){r&&(A=r);var t=0;return function(){return t>=A.length?{done:!0}:{done:!1,value:A[t++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}r=A[Symbol.iterator]();return r.next.bind(r)}function J(){}function K(A){if("undefined"!==typeof HTMLImageElement&&A instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&A instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&A instanceof ImageBitmap)return gy.getDataURL(A);if(A.data)return{data:Array.prototype.slice.call(A.data),width:A.width,height:A.height,type:A.data.constructor.name};console.warn("THREE.Texture: Unable to serialize Texture.");return{}}function T(A,
D,r,t,B){for(var I=0,M=A.length-3;I<=M;I+=3){hy.fromArray(A,I);var U=B.x*Math.abs(hy.x)+B.y*Math.abs(hy.y)+B.z*Math.abs(hy.z),Z=D.dot(hy),aa=r.dot(hy),oa=t.dot(hy);if(Math.max(-Math.max(Z,aa,oa),Math.min(Z,aa,oa))>U)return!1}return!0}function P(){Object.defineProperty(this||q,"id",{value:mya++});(this||q).uuid=oh.generateUUID();(this||q).name="";(this||q).type="Object3D";(this||q).parent=null;(this||q).children=[];(this||q).up=P.DefaultUp.clone();var A=new jc,D=new LF,r=new Cm,t=new jc(1,1,1);D._onChange(function(){r.setFromEuler(D,
!1)});r._onChange(function(){D.setFromQuaternion(r,void 0,!1)});Object.defineProperties(this||q,{position:{configurable:!0,enumerable:!0,value:A},rotation:{configurable:!0,enumerable:!0,value:D},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:t},modelViewMatrix:{value:new Fg},normalMatrix:{value:new cm}});(this||q).matrix=new Fg;(this||q).matrixWorld=new Fg;(this||q).matrixAutoUpdate=P.DefaultMatrixAutoUpdate;(this||q).matrixWorldNeedsUpdate=!1;(this||
q).layers=new qY;(this||q).visible=!0;(this||q).castShadow=!1;(this||q).receiveShadow=!1;(this||q).frustumCulled=!0;(this||q).renderOrder=0;(this||q).animations=[];(this||q).userData={}}function da(){Object.defineProperty(this||q,"id",{value:nya++});(this||q).uuid=oh.generateUUID();(this||q).name="";(this||q).type="Material";(this||q).fog=!0;(this||q).blending=1;(this||q).side=0;(this||q).vertexColors=!1;(this||q).opacity=1;(this||q).transparent=!1;(this||q).blendSrc=204;(this||q).blendDst=205;(this||
q).blendEquation=100;(this||q).blendSrcAlpha=null;(this||q).blendDstAlpha=null;(this||q).blendEquationAlpha=null;(this||q).depthFunc=3;(this||q).depthTest=!0;(this||q).depthWrite=!0;(this||q).stencilWriteMask=255;(this||q).stencilFunc=519;(this||q).stencilRef=0;(this||q).stencilFuncMask=255;(this||q).stencilFail=7680;(this||q).stencilZFail=7680;(this||q).stencilZPass=7680;(this||q).stencilWrite=!1;(this||q).clippingPlanes=null;(this||q).clipIntersection=!1;(this||q).clipShadows=!1;(this||q).shadowSide=
null;(this||q).colorWrite=!0;(this||q).precision=null;(this||q).polygonOffset=!1;(this||q).polygonOffsetFactor=0;(this||q).polygonOffsetUnits=0;(this||q).dithering=!1;(this||q).alphaTest=0;(this||q).premultipliedAlpha=!1;(this||q).visible=!0;(this||q).toneMapped=!0;(this||q).userData={};(this||q).version=0}function fa(A,D,r){0>r&&(r+=1);1<r&&--r;return r<1/6?A+6*(D-A)*r:.5>r?D:r<2/3?A+6*(D-A)*(2/3-r):A}function ka(A){return.04045>A?.0773993808*A:Math.pow(.9478672986*A+.0521327014,2.4)}function za(A){return.0031308>
A?12.92*A:1.055*Math.pow(A,.41666)-.055}function Ia(A,D,r){if(Array.isArray(A))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");(this||q).name="";(this||q).array=A;(this||q).itemSize=D;(this||q).count=void 0!==A?A.length/D:0;(this||q).normalized=!0===r;(this||q).usage=35044;(this||q).updateRange={offset:0,count:-1};(this||q).version=0}function N(A,D,r){Ia.call(this||q,new Int8Array(A),D,r)}function ia(A,D,r){Ia.call(this||q,new Uint8Array(A),D,r)}function W(A,D,r){Ia.call(this||
q,new Uint8ClampedArray(A),D,r)}function ca(A,D,r){Ia.call(this||q,new Int16Array(A),D,r)}function sa(A,D,r){Ia.call(this||q,new Uint16Array(A),D,r)}function la(A,D,r){Ia.call(this||q,new Int32Array(A),D,r)}function Aa(A,D,r){Ia.call(this||q,new Uint32Array(A),D,r)}function ib(A,D,r){Ia.call(this||q,new Uint16Array(A),D,r)}function ob(A,D,r){Ia.call(this||q,new Float32Array(A),D,r)}function Ea(A,D,r){Ia.call(this||q,new Float64Array(A),D,r)}function ua(A){if(0===A.length)return-Infinity;for(var D=
A[0],r=1,t=A.length;r<t;++r)A[r]>D&&(D=A[r]);return D}function ya(){Object.defineProperty(this||q,"id",{value:oya++});(this||q).uuid=oh.generateUUID();(this||q).name="";(this||q).type="BufferGeometry";(this||q).index=null;(this||q).attributes={};(this||q).morphAttributes={};(this||q).morphTargetsRelative=!1;(this||q).groups=[];(this||q).boundingBox=null;(this||q).boundingSphere=null;(this||q).drawRange={start:0,count:Infinity};(this||q).userData={}}function Sa(A,D){void 0===A&&(A=new ya);void 0===
D&&(D=new ot);P.call(this||q);(this||q).type="Mesh";(this||q).geometry=A;(this||q).material=D;this.updateMorphTargets()}function Qb(A,D,r,t,B,I,M,U,Z,aa,oa,wa){dv.fromBufferAttribute(B,aa);ev.fromBufferAttribute(B,oa);fv.fromBufferAttribute(B,wa);B=A.morphTargetInfluences;if(D.morphTargets&&I&&B){wO.set(0,0,0);xO.set(0,0,0);yO.set(0,0,0);for(var Oa=0,Ya=I.length;Oa<Ya;Oa++){var ab=B[Oa],zb=I[Oa];0!==ab&&(rY.fromBufferAttribute(zb,aa),sY.fromBufferAttribute(zb,oa),tY.fromBufferAttribute(zb,wa),M?(wO.addScaledVector(rY,
ab),xO.addScaledVector(sY,ab),yO.addScaledVector(tY,ab)):(wO.addScaledVector(rY.sub(dv),ab),xO.addScaledVector(sY.sub(ev),ab),yO.addScaledVector(tY.sub(fv),ab)))}dv.add(wO);ev.add(xO);fv.add(yO)}A.isSkinnedMesh&&D.skinning&&(A.boneTransform(aa,dv),A.boneTransform(oa,ev),A.boneTransform(wa,fv));I=dv;M=ev;B=fv;Oa=uY;null===(1===D.side?t.intersectTriangle(B,M,I,!0,Oa):t.intersectTriangle(I,M,B,2!==D.side,Oa))?A=null:(zO.copy(Oa),zO.applyMatrix4(A.matrixWorld),D=r.ray.origin.distanceTo(zO),A=D<r.near||
D>r.far?null:{distance:D,point:zO.clone(),object:A});A&&(U&&(AO.fromBufferAttribute(U,aa),BO.fromBufferAttribute(U,oa),CO.fromBufferAttribute(U,wa),A.uv=Ln.getUV(uY,dv,ev,fv,AO,BO,CO,new Ye)),Z&&(AO.fromBufferAttribute(Z,aa),BO.fromBufferAttribute(Z,oa),CO.fromBufferAttribute(Z,wa),A.uv2=Ln.getUV(uY,dv,ev,fv,AO,BO,CO,new Ye)),U={a:aa,b:oa,c:wa,normal:new jc,materialIndex:0},Ln.getNormal(dv,ev,fv,U.normal),A.face=U);return A}function mc(A){var D={},r;for(r in A){D[r]={};for(var t in A[r]){var B=A[r][t];
B&&(B.isColor||B.isMatrix3||B.isMatrix4||B.isVector2||B.isVector3||B.isVector4||B.isTexture||B.isQuaternion)?D[r][t]=B.clone():Array.isArray(B)?D[r][t]=B.slice():D[r][t]=B}}return D}function Yb(A){for(var D={},r=0;r<A.length;r++){var t=mc(A[r]),B;for(B in t)D[B]=t[B]}return D}function fc(A){da.call(this||q);(this||q).type="ShaderMaterial";(this||q).defines={};(this||q).uniforms={};(this||q).vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";
(this||q).fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";(this||q).linewidth=1;(this||q).wireframe=!1;(this||q).wireframeLinewidth=1;(this||q).fog=!1;(this||q).lights=!1;(this||q).clipping=!1;(this||q).skinning=!1;(this||q).morphTargets=!1;(this||q).morphNormals=!1;(this||q).extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};(this||q).defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};(this||q).index0AttributeName=void 0;(this||q).uniformsNeedUpdate=
!1;(this||q).glslVersion=null;void 0!==A&&(void 0!==A.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(A))}function Jc(){P.call(this||q);(this||q).type="Camera";(this||q).matrixWorldInverse=new Fg;(this||q).projectionMatrix=new Fg;(this||q).projectionMatrixInverse=new Fg}function Nb(A,D,r,t){void 0===A&&(A=50);void 0===D&&(D=1);void 0===r&&(r=.1);void 0===t&&(t=2E3);Jc.call(this||q);(this||q).type="PerspectiveCamera";
(this||q).fov=A;(this||q).zoom=1;(this||q).near=r;(this||q).far=t;(this||q).focus=10;(this||q).aspect=D;(this||q).view=null;(this||q).filmGauge=35;(this||q).filmOffset=0;this.updateProjectionMatrix()}function ld(){function A(I,M){t(I,M);B=D.requestAnimationFrame(A)}var D=null,r=!1,t=null,B=null;return{start:function(){!0!==r&&null!==t&&(B=D.requestAnimationFrame(A),r=!0)},stop:function(){D.cancelAnimationFrame(B);r=!1},setAnimationLoop:function(I){t=I},setContext:function(I){D=I}}}function Od(A,D){function r(I,
M){var U=I.array,Z=I.usage,aa=A.createBuffer();A.bindBuffer(M,aa);A.bufferData(M,U,Z);I.onUploadCallback();M=5126;U instanceof Float32Array?M=5126:U instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):U instanceof Uint16Array?I.isFloat16BufferAttribute?t?M=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):M=5123:U instanceof Int16Array?M=5122:U instanceof Uint32Array?M=5125:U instanceof Int32Array?
M=5124:U instanceof Int8Array?M=5120:U instanceof Uint8Array&&(M=5121);return{buffer:aa,type:M,bytesPerElement:U.BYTES_PER_ELEMENT,version:I.version}}var t=D.isWebGL2,B=new WeakMap;return{get:function(I){I.isInterleavedBufferAttribute&&(I=I.data);return B.get(I)},remove:function(I){I.isInterleavedBufferAttribute&&(I=I.data);var M=B.get(I);M&&(A.deleteBuffer(M.buffer),B.delete(I))},update:function(I,M){if(I.isGLBufferAttribute)M=B.get(I),(!M||M.version<I.version)&&B.set(I,{buffer:I.buffer,type:I.type,
bytesPerElement:I.elementSize,version:I.version});else{I.isInterleavedBufferAttribute&&(I=I.data);var U=B.get(I);if(void 0===U)B.set(I,r(I,M));else if(U.version<I.version){var Z=I.array,aa=I.updateRange;A.bindBuffer(M,U.buffer);-1===aa.count?A.bufferSubData(M,0,Z):(t?A.bufferSubData(M,aa.offset*Z.BYTES_PER_ELEMENT,Z,aa.offset,aa.count):A.bufferSubData(M,aa.offset*Z.BYTES_PER_ELEMENT,Z.subarray(aa.offset,aa.offset+aa.count)),aa.count=-1);U.version=I.version}}}}}function ta(A,D,r,t,B){function I(Ya,
ab){r.buffers.color.setClear(Ya.r,Ya.g,Ya.b,ab,B)}var M=new Zf(0),U=0,Z,aa,oa=null,wa=0,Oa=null;return{getClearColor:function(){return M},setClearColor:function(Ya,ab){void 0===ab&&(ab=1);M.set(Ya);U=ab;I(M,U)},getClearAlpha:function(){return U},setClearAlpha:function(Ya){U=Ya;I(M,U)},render:function(Ya,ab,zb,sb){(ab=!0===ab.isScene?ab.background:null)&&ab.isTexture&&(ab=D.get(ab));zb=A.xr;(zb=zb.getSession&&zb.getSession())&&"additive"===zb.environmentBlendMode&&(ab=null);null===ab?I(M,U):ab&&ab.isColor&&
(I(ab,1),sb=!0);(A.autoClear||sb)&&A.clear(A.autoClearColor,A.autoClearDepth,A.autoClearStencil);if(ab&&(ab.isCubeTexture||ab.isWebGLCubeRenderTarget||306===ab.mapping)){void 0===aa&&(aa=new Sa(new iy(1,1,1),new fc({name:"BackgroundCubeMaterial",uniforms:mc(Nq.cube.uniforms),vertexShader:Nq.cube.vertexShader,fragmentShader:Nq.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),aa.geometry.deleteAttribute("normal"),aa.geometry.deleteAttribute("uv"),aa.onBeforeRender=function(nc,oc,Fc){(this||
q).matrixWorld.copyPosition(Fc.matrixWorld)},Object.defineProperty(aa.material,"envMap",{get:function(){return(this||q).uniforms.envMap.value}}),t.update(aa));ab.isWebGLCubeRenderTarget&&(ab=ab.texture);aa.material.uniforms.envMap.value=ab;aa.material.uniforms.flipEnvMap.value=ab.isCubeTexture&&ab._needsFlipEnvMap?-1:1;if(oa!==ab||wa!==ab.version||Oa!==A.toneMapping)aa.material.needsUpdate=!0,oa=ab,wa=ab.version,Oa=A.toneMapping;Ya.unshift(aa,aa.geometry,aa.material,0,0,null)}else if(ab&&ab.isTexture){void 0===
Z&&(Z=new Sa(new MF(2,2),new fc({name:"BackgroundMaterial",uniforms:mc(Nq.background.uniforms),vertexShader:Nq.background.vertexShader,fragmentShader:Nq.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),Z.geometry.deleteAttribute("normal"),Object.defineProperty(Z.material,"map",{get:function(){return(this||q).uniforms.t2D.value}}),t.update(Z));Z.material.uniforms.t2D.value=ab;!0===ab.matrixAutoUpdate&&ab.updateMatrix();Z.material.uniforms.uvTransform.value.copy(ab.matrix);if(oa!==
ab||wa!==ab.version||Oa!==A.toneMapping)Z.material.needsUpdate=!0,oa=ab,wa=ab.version,Oa=A.toneMapping;Ya.unshift(Z,Z.geometry,Z.material,0,0,null)}}}}function Pa(A,D,r,t){function B(Fc){return t.isWebGL2?A.bindVertexArray(Fc):ab.bindVertexArrayOES(Fc)}function I(Fc){return t.isWebGL2?A.deleteVertexArray(Fc):ab.deleteVertexArrayOES(Fc)}function M(Fc){for(var Sc=[],rd=[],jd=[],Tc=0;Tc<Ya;Tc++)Sc[Tc]=0,rd[Tc]=0,jd[Tc]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Sc,enabledAttributes:rd,
attributeDivisors:jd,object:Fc,attributes:{},index:null}}function U(){for(var Fc=oc.newAttributes,Sc=0,rd=Fc.length;Sc<rd;Sc++)Fc[Sc]=0}function Z(Fc){aa(Fc,0)}function aa(Fc,Sc){var rd=oc.enabledAttributes,jd=oc.attributeDivisors;oc.newAttributes[Fc]=1;0===rd[Fc]&&(A.enableVertexAttribArray(Fc),rd[Fc]=1);jd[Fc]!==Sc&&((t.isWebGL2?A:D.get("ANGLE_instanced_arrays"))[t.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Fc,Sc),jd[Fc]=Sc)}function oa(){for(var Fc=oc.newAttributes,Sc=oc.enabledAttributes,
rd=0,jd=Sc.length;rd<jd;rd++)Sc[rd]!==Fc[rd]&&(A.disableVertexAttribArray(rd),Sc[rd]=0)}function wa(){Oa();oc!==nc&&(oc=nc,B(oc.object))}function Oa(){nc.geometry=null;nc.program=null;nc.wireframe=!1}var Ya=A.getParameter(34921),ab=t.isWebGL2?null:D.get("OES_vertex_array_object"),zb=t.isWebGL2||null!==ab,sb={},nc=M(null),oc=nc;return{setup:function(Fc,Sc,rd,jd,Tc){var Uc=!1;if(zb){Uc=!0===Sc.wireframe;var qd=sb[jd.id];void 0===qd&&(qd={},sb[jd.id]=qd);var Ld=qd[rd.id];void 0===Ld&&(Ld={},qd[rd.id]=
Ld);qd=Ld[Uc];void 0===qd&&(qd=M(t.isWebGL2?A.createVertexArray():ab.createVertexArrayOES()),Ld[Uc]=qd);Uc=qd;oc!==Uc&&(oc=Uc,B(oc.object));a:{Uc=oc.attributes;Ld=jd.attributes;qd=0;for(var Fd in Ld){var ce=Uc[Fd],rf=Ld[Fd];if(void 0===ce||ce.attribute!==rf||ce.data!==rf.data){Uc=!0;break a}qd++}Uc=oc.attributesNum!==qd||oc.index!==Tc?!0:!1}if(Uc){Fd={};Ld=jd.attributes;qd=0;for(var sd in Ld)ce=Ld[sd],rf={},rf.attribute=ce,ce.data&&(rf.data=ce.data),Fd[sd]=rf,qd++;oc.attributes=Fd;oc.attributesNum=
qd;oc.index=Tc}}else if(sd=!0===Sc.wireframe,oc.geometry!==jd.id||oc.program!==rd.id||oc.wireframe!==sd)oc.geometry=jd.id,oc.program=rd.id,oc.wireframe=sd,Uc=!0;!0===Fc.isInstancedMesh&&(Uc=!0);null!==Tc&&r.update(Tc,34963);if(Uc){if(!1!==t.isWebGL2||!Fc.isInstancedMesh&&!jd.isInstancedBufferGeometry||null!==D.get("ANGLE_instanced_arrays")){U();sd=jd.attributes;rd=rd.getAttributes();Sc=Sc.defaultAttributeValues;for(var zd in rd)if(Uc=rd[zd],0<=Uc){var Td=sd[zd];if(void 0!==Td){if(Fd=Td.normalized,
ce=Td.itemSize,qd=r.get(Td),void 0!==qd){var $f=qd.buffer;Ld=qd.type;qd=qd.bytesPerElement;if(Td.isInterleavedBufferAttribute){var Ne=Td.data;rf=Ne.stride;Td=Td.offset;Ne&&Ne.isInstancedInterleavedBuffer?(aa(Uc,Ne.meshPerAttribute),void 0===jd._maxInstanceCount&&(jd._maxInstanceCount=Ne.meshPerAttribute*Ne.count)):Z(Uc);A.bindBuffer(34962,$f);rf*=qd;qd*=Td;!0!==t.isWebGL2||5124!==Ld&&5125!==Ld?A.vertexAttribPointer(Uc,ce,Ld,Fd,rf,qd):A.vertexAttribIPointer(Uc,ce,Ld,rf,qd)}else Td.isInstancedBufferAttribute?
(aa(Uc,Td.meshPerAttribute),void 0===jd._maxInstanceCount&&(jd._maxInstanceCount=Td.meshPerAttribute*Td.count)):Z(Uc),A.bindBuffer(34962,$f),qd=ce,!0!==t.isWebGL2||5124!==Ld&&5125!==Ld?A.vertexAttribPointer(Uc,qd,Ld,Fd,0,0):A.vertexAttribIPointer(Uc,qd,Ld,0,0)}}else if("instanceMatrix"===zd)Ld=r.get(Fc.instanceMatrix),void 0!==Ld&&(Fd=Ld.buffer,Ld=Ld.type,aa(Uc+0,1),aa(Uc+1,1),aa(Uc+2,1),aa(Uc+3,1),A.bindBuffer(34962,Fd),A.vertexAttribPointer(Uc+0,4,Ld,!1,64,0),A.vertexAttribPointer(Uc+1,4,Ld,!1,
64,16),A.vertexAttribPointer(Uc+2,4,Ld,!1,64,32),A.vertexAttribPointer(Uc+3,4,Ld,!1,64,48));else if("instanceColor"===zd)Ld=r.get(Fc.instanceColor),void 0!==Ld&&(Fd=Ld.buffer,Ld=Ld.type,aa(Uc,1),A.bindBuffer(34962,Fd),A.vertexAttribPointer(Uc,3,Ld,!1,12,0));else if(void 0!==Sc&&(Fd=Sc[zd],void 0!==Fd))switch(Fd.length){case 2:A.vertexAttrib2fv(Uc,Fd);break;case 3:A.vertexAttrib3fv(Uc,Fd);break;case 4:A.vertexAttrib4fv(Uc,Fd);break;default:A.vertexAttrib1fv(Uc,Fd)}}oa()}null!==Tc&&A.bindBuffer(34963,
r.get(Tc).buffer)}},reset:wa,resetDefaultState:Oa,dispose:function(){wa();for(var Fc in sb){var Sc=sb[Fc],rd;for(rd in Sc){var jd=Sc[rd],Tc;for(Tc in jd)I(jd[Tc].object),delete jd[Tc];delete Sc[rd]}delete sb[Fc]}},releaseStatesOfGeometry:function(Fc){if(void 0!==sb[Fc.id]){var Sc=sb[Fc.id],rd;for(rd in Sc){var jd=Sc[rd],Tc;for(Tc in jd)I(jd[Tc].object),delete jd[Tc];delete Sc[rd]}delete sb[Fc.id]}},releaseStatesOfProgram:function(Fc){for(var Sc in sb){var rd=sb[Sc];if(void 0!==rd[Fc.id]){var jd=rd[Fc.id],
Tc;for(Tc in jd)I(jd[Tc].object),delete jd[Tc];delete rd[Fc.id]}}},initAttributes:U,enableAttribute:Z,disableUnusedAttributes:oa}}function Ra(A,D,r,t){var B=t.isWebGL2,I;(this||q).setMode=function(M){I=M};(this||q).render=function(M,U){A.drawArrays(I,M,U);r.update(U,I,1)};(this||q).renderInstances=function(M,U,Z){if(0!==Z){if(B){var aa=A;var oa="drawArraysInstanced"}else if(aa=D.get("ANGLE_instanced_arrays"),oa="drawArraysInstancedANGLE",null===aa){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
return}aa[oa](I,M,U,Z);r.update(U,I,Z)}}}function Cb(A,D,r){function t(Fc){if("highp"===Fc){if(0<A.getShaderPrecisionFormat(35633,36338).precision&&0<A.getShaderPrecisionFormat(35632,36338).precision)return"highp";Fc="mediump"}return"mediump"===Fc&&0<A.getShaderPrecisionFormat(35633,36337).precision&&0<A.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var B,I="undefined"!==typeof WebGL2RenderingContext&&A instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&
A instanceof WebGL2ComputeRenderingContext,M=void 0!==r.precision?r.precision:"highp",U=t(M);U!==M&&(console.warn("THREE.WebGLRenderer:",M,"not supported, using",U,"instead."),M=U);r=!0===r.logarithmicDepthBuffer;U=A.getParameter(34930);var Z=A.getParameter(35660),aa=A.getParameter(3379),oa=A.getParameter(34076),wa=A.getParameter(34921),Oa=A.getParameter(36347),Ya=A.getParameter(36348),ab=A.getParameter(36349),zb=0<Z,sb=I||D.has("OES_texture_float"),nc=zb&&sb,oc=I?A.getParameter(36183):0;return{isWebGL2:I,
getMaxAnisotropy:function(){if(void 0!==B)return B;if(!0===D.has("EXT_texture_filter_anisotropic")){var Fc=D.get("EXT_texture_filter_anisotropic");B=A.getParameter(Fc.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else B=0;return B},getMaxPrecision:t,precision:M,logarithmicDepthBuffer:r,maxTextures:U,maxVertexTextures:Z,maxTextureSize:aa,maxCubemapSize:oa,maxAttributes:wa,maxVertexUniforms:Oa,maxVaryings:Ya,maxFragmentUniforms:ab,vertexTextures:zb,floatFragmentTextures:sb,floatVertexTextures:nc,maxSamples:oc}}function ec(A){function D(){oa.value!==
B&&(oa.value=B,oa.needsUpdate=0<I);t.numPlanes=I;t.numIntersection=0}function r(wa,Oa,Ya,ab){var zb=null!==wa?wa.length:0,sb=null;if(0!==zb){sb=oa.value;if(!0!==ab||null===sb){ab=Ya+4*zb;Oa=Oa.matrixWorldInverse;aa.getNormalMatrix(Oa);if(null===sb||sb.length<ab)sb=new Float32Array(ab);for(ab=0;ab!==zb;++ab,Ya+=4)Z.copy(wa[ab]).applyMatrix4(Oa,aa),Z.normal.toArray(sb,Ya),sb[Ya+3]=Z.constant}oa.value=sb;oa.needsUpdate=!0}t.numPlanes=zb;t.numIntersection=0;return sb}var t=this||q,B=null,I=0,M=!1,U=!1,
Z=new Oq,aa=new cm,oa={value:null,needsUpdate:!1};(this||q).uniform=oa;(this||q).numPlanes=0;(this||q).numIntersection=0;(this||q).init=function(wa,Oa,Ya){var ab=0!==wa.length||Oa||0!==I||M;M=Oa;B=r(wa,Ya,0);I=wa.length;return ab};(this||q).beginShadows=function(){U=!0;r(null)};(this||q).endShadows=function(){U=!1;D()};(this||q).setState=function(wa,Oa,Ya){var ab=wa.clippingPlanes,zb=wa.clipIntersection,sb=wa.clipShadows;wa=A.get(wa);if(!M||null===ab||0===ab.length||U&&!sb)U?r(null):D();else{sb=U?
0:I;var nc=4*sb,oc=wa.clippingState||null;oa.value=oc;oc=r(ab,Oa,nc,Ya);for(Oa=0;Oa!==nc;++Oa)oc[Oa]=B[Oa];wa.clippingState=oc;(this||q).numIntersection=zb?(this||q).numPlanes:0;(this||q).numPlanes+=sb}}}function Bd(A){function D(B,I){303===I?B.mapping=301:304===I&&(B.mapping=302);return B}function r(B){B=B.target;B.removeEventListener("dispose",r);var I=t.get(B);void 0!==I&&(t.delete(B),I.dispose())}var t=new WeakMap;return{get:function(B){if(B&&B.isTexture){var I=B.mapping;if(303===I||304===I){if(t.has(B))return I=
t.get(B).texture,D(I,B.mapping);var M=B.image;return M&&0<M.height?(I=A.getRenderTarget(),M=new DO(M.height/2),M.fromEquirectangularTexture(A,B),t.set(B,M),A.setRenderTarget(I),B.addEventListener("dispose",r),D(M.texture,B.mapping)):null}}return B},dispose:function(){t=new WeakMap}}}function Ad(A){function D(t){if(void 0!==r[t])return r[t];switch(t){case "WEBGL_depth_texture":var B=A.getExtension("WEBGL_depth_texture")||A.getExtension("MOZ_WEBGL_depth_texture")||A.getExtension("WEBKIT_WEBGL_depth_texture");
break;case "EXT_texture_filter_anisotropic":B=A.getExtension("EXT_texture_filter_anisotropic")||A.getExtension("MOZ_EXT_texture_filter_anisotropic")||A.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":B=A.getExtension("WEBGL_compressed_texture_s3tc")||A.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||A.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":B=A.getExtension("WEBGL_compressed_texture_pvrtc")||
A.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:B=A.getExtension(t)}return r[t]=B}var r={};return{has:function(t){return null!==D(t)},init:function(t){t.isWebGL2?D("EXT_color_buffer_float"):(D("WEBGL_depth_texture"),D("OES_texture_float"),D("OES_texture_half_float"),D("OES_texture_half_float_linear"),D("OES_standard_derivatives"),D("OES_element_index_uint"),D("OES_vertex_array_object"),D("ANGLE_instanced_arrays"));D("OES_texture_float_linear");D("EXT_color_buffer_half_float")},
get:function(t){var B=D(t);null===B&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported.");return B}}}function Mc(A,D,r,t){function B(Z){Z=Z.target;null!==Z.index&&D.remove(Z.index);for(var aa in Z.attributes)D.remove(Z.attributes[aa]);Z.removeEventListener("dispose",B);delete M[Z.id];if(aa=U.get(Z))D.remove(aa),U.delete(Z);t.releaseStatesOfGeometry(Z);!0===Z.isInstancedBufferGeometry&&delete Z._maxInstanceCount;r.memory.geometries--}function I(Z){var aa=[],oa=Z.index,wa=Z.attributes.position;
if(null!==oa){wa=oa.array;oa=oa.version;for(var Oa=0,Ya=wa.length;Oa<Ya;Oa+=3){var ab=wa[Oa+0],zb=wa[Oa+1],sb=wa[Oa+2];aa.push(ab,zb,zb,sb,sb,ab)}}else for(Oa=wa.array,oa=wa.version,wa=0,Oa=Oa.length/3-1;wa<Oa;wa+=3)Ya=wa+0,ab=wa+1,zb=wa+2,aa.push(Ya,ab,ab,zb,zb,Ya);aa=new (65535<ua(aa)?Aa:sa)(aa,1);aa.version=oa;(oa=U.get(Z))&&D.remove(oa);U.set(Z,aa)}var M={},U=new WeakMap;return{get:function(Z,aa){if(!0===M[aa.id])return aa;aa.addEventListener("dispose",B);M[aa.id]=!0;r.memory.geometries++;return aa},
update:function(Z){var aa=Z.attributes;for(wa in aa)D.update(aa[wa],34962);Z=Z.morphAttributes;for(var oa in Z){aa=Z[oa];var wa=0;for(var Oa=aa.length;wa<Oa;wa++)D.update(aa[wa],34962)}},getWireframeAttribute:function(Z){var aa=U.get(Z);if(aa){var oa=Z.index;null!==oa&&aa.version<oa.version&&I(Z)}else I(Z);return U.get(Z)}}}function Ue(A,D,r,t){var B=t.isWebGL2,I,M,U;(this||q).setMode=function(Z){I=Z};(this||q).setIndex=function(Z){M=Z.type;U=Z.bytesPerElement};(this||q).render=function(Z,aa){A.drawElements(I,
aa,M,Z*U);r.update(aa,I,1)};(this||q).renderInstances=function(Z,aa,oa){if(0!==oa){if(B){var wa=A;var Oa="drawElementsInstanced"}else if(wa=D.get("ANGLE_instanced_arrays"),Oa="drawElementsInstancedANGLE",null===wa){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}wa[Oa](I,aa,M,Z*U,oa);r.update(aa,I,oa)}}}function Me(A){var D={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,
textures:0},render:D,programs:null,autoReset:!0,reset:function(){D.frame++;D.calls=0;D.triangles=0;D.points=0;D.lines=0},update:function(r,t,B){D.calls++;switch(t){case 4:D.triangles+=r/3*B;break;case 1:D.lines+=r/2*B;break;case 3:D.lines+=B*(r-1);break;case 2:D.lines+=B*r;break;case 0:D.points+=B*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t)}}}}function Fh(A,D){return A[0]-D[0]}function ch(A,D){return Math.abs(D[1])-Math.abs(A[1])}function Oi(A){for(var D={},r=new Float32Array(8),
t=[],B=0;8>B;B++)t[B]=[B,0];return{update:function(I,M,U,Z){var aa=I.morphTargetInfluences;I=void 0===aa?0:aa.length;var oa=D[M.id];if(void 0===oa){oa=[];for(var wa=0;wa<I;wa++)oa[wa]=[wa,0];D[M.id]=oa}for(wa=0;wa<I;wa++){var Oa=oa[wa];Oa[0]=wa;Oa[1]=aa[wa]}oa.sort(ch);for(aa=0;8>aa;aa++)aa<I&&oa[aa][1]?(t[aa][0]=oa[aa][0],t[aa][1]=oa[aa][1]):(t[aa][0]=Number.MAX_SAFE_INTEGER,t[aa][1]=0);t.sort(Fh);I=U.morphTargets&&M.morphAttributes.position;U=U.morphNormals&&M.morphAttributes.normal;for(aa=oa=0;8>
aa;aa++)Oa=t[aa],wa=Oa[0],Oa=Oa[1],wa!==Number.MAX_SAFE_INTEGER&&Oa?(I&&M.getAttribute("morphTarget"+aa)!==I[wa]&&M.setAttribute("morphTarget"+aa,I[wa]),U&&M.getAttribute("morphNormal"+aa)!==U[wa]&&M.setAttribute("morphNormal"+aa,U[wa]),r[aa]=Oa,oa+=Oa):(I&&!0===M.hasAttribute("morphTarget"+aa)&&M.deleteAttribute("morphTarget"+aa),U&&!0===M.hasAttribute("morphNormal"+aa)&&M.deleteAttribute("morphNormal"+aa),r[aa]=0);M=M.morphTargetsRelative?1:1-oa;Z.getUniforms().setValue(A,"morphTargetBaseInfluence",
M);Z.getUniforms().setValue(A,"morphTargetInfluences",r)}}}function Fi(A,D,r,t){function B(M){M=M.target;M.removeEventListener("dispose",B);r.remove(M.instanceMatrix);null!==M.instanceColor&&r.remove(M.instanceColor)}var I=new WeakMap;return{update:function(M){var U=t.render.frame,Z=D.get(M,M.geometry);I.get(Z)!==U&&(D.update(Z),I.set(Z,U));M.isInstancedMesh&&(!1===M.hasEventListener("dispose",B)&&M.addEventListener("dispose",B),r.update(M.instanceMatrix,34962),null!==M.instanceColor&&r.update(M.instanceColor,
34962));return Z},dispose:function(){I=new WeakMap}}}function Pi(A,D,r){var t=A[0];if(0>=t||0<t)return A;var B=D*r,I=pda[B];void 0===I&&(I=new Float32Array(B),pda[B]=I);if(0!==D)for(t.toArray(I,0),t=1,B=0;t!==D;++t)B+=r,A[t].toArray(I,B);return I}function qi(A,D){if(A.length!==D.length)return!1;for(var r=0,t=A.length;r<t;r++)if(A[r]!==D[r])return!1;return!0}function ri(A,D){for(var r=0,t=D.length;r<t;r++)A[r]=D[r]}function Sj(A,D){var r=qda[D];void 0===r&&(r=new Int32Array(D),qda[D]=r);for(var t=
0;t!==D;++t)r[t]=A.allocateTextureUnit();return r}function Bi(A,D){var r=(this||q).cache;r[0]!==D&&(A.uniform1f((this||q).addr,D),r[0]=D)}function Dj(A,D){var r=(this||q).cache;if(void 0!==D.x){if(r[0]!==D.x||r[1]!==D.y)A.uniform2f((this||q).addr,D.x,D.y),r[0]=D.x,r[1]=D.y}else qi(r,D)||(A.uniform2fv((this||q).addr,D),ri(r,D))}function ek(A,D){var r=(this||q).cache;if(void 0!==D.x){if(r[0]!==D.x||r[1]!==D.y||r[2]!==D.z)A.uniform3f((this||q).addr,D.x,D.y,D.z),r[0]=D.x,r[1]=D.y,r[2]=D.z}else if(void 0!==
D.r){if(r[0]!==D.r||r[1]!==D.g||r[2]!==D.b)A.uniform3f((this||q).addr,D.r,D.g,D.b),r[0]=D.r,r[1]=D.g,r[2]=D.b}else qi(r,D)||(A.uniform3fv((this||q).addr,D),ri(r,D))}function Ej(A,D){var r=(this||q).cache;if(void 0!==D.x){if(r[0]!==D.x||r[1]!==D.y||r[2]!==D.z||r[3]!==D.w)A.uniform4f((this||q).addr,D.x,D.y,D.z,D.w),r[0]=D.x,r[1]=D.y,r[2]=D.z,r[3]=D.w}else qi(r,D)||(A.uniform4fv((this||q).addr,D),ri(r,D))}function fk(A,D){var r=(this||q).cache,t=D.elements;void 0===t?qi(r,D)||(A.uniformMatrix2fv((this||
q).addr,!1,D),ri(r,D)):qi(r,t)||(rda.set(t),A.uniformMatrix2fv((this||q).addr,!1,rda),ri(r,t))}function Lu(A,D){var r=(this||q).cache,t=D.elements;void 0===t?qi(r,D)||(A.uniformMatrix3fv((this||q).addr,!1,D),ri(r,D)):qi(r,t)||(sda.set(t),A.uniformMatrix3fv((this||q).addr,!1,sda),ri(r,t))}function Gd(A,D){var r=(this||q).cache,t=D.elements;void 0===t?qi(r,D)||(A.uniformMatrix4fv((this||q).addr,!1,D),ri(r,D)):qi(r,t)||(tda.set(t),A.uniformMatrix4fv((this||q).addr,!1,tda),ri(r,t))}function Hd(A,D,r){var t=
(this||q).cache,B=r.allocateTextureUnit();t[0]!==B&&(A.uniform1i((this||q).addr,B),t[0]=B);r.safeSetTexture2D(D||uda,B)}function Ju(A,D,r){var t=(this||q).cache,B=r.allocateTextureUnit();t[0]!==B&&(A.uniform1i((this||q).addr,B),t[0]=B);r.setTexture2DArray(D||pya,B)}function bt(A,D,r){var t=(this||q).cache,B=r.allocateTextureUnit();t[0]!==B&&(A.uniform1i((this||q).addr,B),t[0]=B);r.setTexture3D(D||qya,B)}function Nr(A,D,r){var t=(this||q).cache,B=r.allocateTextureUnit();t[0]!==B&&(A.uniform1i((this||
q).addr,B),t[0]=B);r.safeSetTextureCube(D||vda,B)}function yx(A,D){var r=(this||q).cache;r[0]!==D&&(A.uniform1i((this||q).addr,D),r[0]=D)}function Cx(A,D){var r=(this||q).cache;qi(r,D)||(A.uniform2iv((this||q).addr,D),ri(r,D))}function Dx(A,D){var r=(this||q).cache;qi(r,D)||(A.uniform3iv((this||q).addr,D),ri(r,D))}function Ex(A,D){var r=(this||q).cache;qi(r,D)||(A.uniform4iv((this||q).addr,D),ri(r,D))}function Fx(A,D){var r=(this||q).cache;r[0]!==D&&(A.uniform1ui((this||q).addr,D),r[0]=D)}function zx(A){switch(A){case 5126:return Bi;
case 35664:return Dj;case 35665:return ek;case 35666:return Ej;case 35674:return fk;case 35675:return Lu;case 35676:return Gd;case 5124:case 35670:return yx;case 35667:case 35671:return Cx;case 35668:case 35672:return Dx;case 35669:case 35673:return Ex;case 5125:return Fx;case 35678:case 36198:case 36298:case 36306:case 35682:return Hd;case 35679:case 36299:case 36307:return bt;case 35680:case 36300:case 36308:case 36293:return Nr;case 36289:case 36303:case 36311:case 36292:return Ju}}function cW(A,
D){A.uniform1fv((this||q).addr,D)}function GM(A,D){A.uniform1iv((this||q).addr,D)}function AM(A,D){A.uniform2iv((this||q).addr,D)}function $E(A,D){A.uniform3iv((this||q).addr,D)}function dW(A,D){A.uniform4iv((this||q).addr,D)}function fW(A,D){D=Pi(D,(this||q).size,2);A.uniform2fv((this||q).addr,D)}function eW(A,D){D=Pi(D,(this||q).size,3);A.uniform3fv((this||q).addr,D)}function Mo(A,D){D=Pi(D,(this||q).size,4);A.uniform4fv((this||q).addr,D)}function XV(A,D){D=Pi(D,(this||q).size,4);A.uniformMatrix2fv((this||
q).addr,!1,D)}function YV(A,D){D=Pi(D,(this||q).size,9);A.uniformMatrix3fv((this||q).addr,!1,D)}function WV(A,D){D=Pi(D,(this||q).size,16);A.uniformMatrix4fv((this||q).addr,!1,D)}function Ax(A,D,r){var t=D.length,B=Sj(r,t);A.uniform1iv((this||q).addr,B);for(A=0;A!==t;++A)r.safeSetTexture2D(D[A]||uda,B[A])}function ZV(A,D,r){var t=D.length,B=Sj(r,t);A.uniform1iv((this||q).addr,B);for(A=0;A!==t;++A)r.safeSetTextureCube(D[A]||vda,B[A])}function HM(A){switch(A){case 5126:return cW;case 35664:return fW;
case 35665:return eW;case 35666:return Mo;case 35674:return XV;case 35675:return YV;case 35676:return WV;case 5124:case 35670:return GM;case 35667:case 35671:return AM;case 35668:case 35672:return $E;case 35669:case 35673:return dW;case 35678:case 36198:case 36298:case 36306:case 35682:return Ax;case 35680:case 36300:case 36308:case 36293:return ZV}}function zq(A,D,r){(this||q).id=A;(this||q).addr=r;(this||q).cache=[];(this||q).setValue=zx(D.type)}function BM(A,D,r){(this||q).id=A;(this||q).addr=
r;(this||q).cache=[];(this||q).size=D.size;(this||q).setValue=HM(D.type)}function TA(A){(this||q).id=A;(this||q).seq=[];(this||q).map={}}function Or(A,D){(this||q).seq=[];(this||q).map={};for(var r=A.getProgramParameter(D,35718),t=0;t<r;++t){var B=A.getActiveUniform(D,t),I=A.getUniformLocation(D,B.name),M=this||q,U=B.name,Z=U.length;for(vY.lastIndex=0;;){var aa=vY.exec(U),oa=vY.lastIndex,wa=aa[1],Oa=aa[3];"]"===aa[2]&&(wa|=0);if(void 0===Oa||"["===Oa&&oa+2===Z){U=M;B=void 0===Oa?new zq(wa,B,I):new BM(wa,
B,I);U.seq.push(B);U.map[B.id]=B;break}else Oa=M.map[wa],void 0===Oa&&(Oa=new TA(wa),wa=M,M=Oa,wa.seq.push(M),wa.map[M.id]=M),M=Oa}}}function EM(A,D,r){D=A.createShader(D);A.shaderSource(D,r);A.compileShader(D);return D}function IM(A){switch(A){case 3E3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma",
"( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",A),["Linear","( value )"]}}function DM(A,D,r){var t=A.getShaderParameter(D,35713),B=A.getShaderInfoLog(D).trim();if(t&&""===B)return"";A=A.getShaderSource(D).split("\n");for(D=0;D<A.length;D++)A[D]=D+1+": "+A[D];A=A.join("\n");return"THREE.WebGLShader: gl.getShaderInfoLog() "+r+"\n"+B+A}function Bx(A,D){D=IM(D);return"vec4 "+A+"( vec4 value ) { return "+
D[0]+"ToLinear"+D[1]+"; }"}function aW(A,D){D=IM(D);return"vec4 "+A+"( vec4 value ) { return LinearTo"+D[0]+D[1]+"; }"}function JM(A,D){switch(D){case 1:D="Linear";break;case 2:D="Reinhard";break;case 3:D="OptimizedCineon";break;case 4:D="ACESFilmic";break;case 5:D="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",D),D="Linear"}return"vec3 "+A+"( vec3 color ) { return "+D+"ToneMapping( color ); }"}function bW(A){var D=[],r;for(r in A){var t=A[r];!1!==t&&D.push("#define "+
r+" "+t)}return D.join("\n")}function Ku(A){return""!==A}function YE(A,D){return A.replace(/NUM_DIR_LIGHTS/g,D.numDirLights).replace(/NUM_SPOT_LIGHTS/g,D.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,D.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,D.numPointLights).replace(/NUM_HEMI_LIGHTS/g,D.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,D.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,D.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,D.numPointLightShadows)}function FM(A,D){return A.replace(/NUM_CLIPPING_PLANES/g,
D.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,D.numClippingPlanes-D.numClipIntersection)}function ZE(A,D){A=Hi[D];if(void 0===A)throw Error("Can not resolve #include <"+D+">");return A.replace(wY,ZE)}function va(A,D,r,t){console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.");return Wa(A,D,r,t)}function Wa(A,D,r,t){A="";for(D=parseInt(D);D<parseInt(r);D++)A+=t.replace(/\[\s*i\s*\]/g,"[ "+D+" ]").replace(/UNROLLED_LOOP_INDEX/g,
D);return A}function Qa(A){var D="precision "+A.precision+" float;\nprecision "+A.precision+" int;";"highp"===A.precision?D+="\n#define HIGH_PRECISION":"mediump"===A.precision?D+="\n#define MEDIUM_PRECISION":"lowp"===A.precision&&(D+="\n#define LOW_PRECISION");return D}function cb(A){var D="SHADOWMAP_TYPE_BASIC";1===A.shadowMapType?D="SHADOWMAP_TYPE_PCF":2===A.shadowMapType?D="SHADOWMAP_TYPE_PCF_SOFT":3===A.shadowMapType&&(D="SHADOWMAP_TYPE_VSM");return D}function qb(A){var D="ENVMAP_TYPE_CUBE";if(A.envMap)switch(A.envMapMode){case 301:case 302:D=
"ENVMAP_TYPE_CUBE";break;case 306:case 307:D="ENVMAP_TYPE_CUBE_UV"}return D}function dc(A){var D="ENVMAP_MODE_REFLECTION";if(A.envMap)switch(A.envMapMode){case 302:case 307:D="ENVMAP_MODE_REFRACTION"}return D}function fb(A){var D="ENVMAP_BLENDING_NONE";if(A.envMap)switch(A.combine){case 0:D="ENVMAP_BLENDING_MULTIPLY";break;case 1:D="ENVMAP_BLENDING_MIX";break;case 2:D="ENVMAP_BLENDING_ADD"}return D}function Xb(A,D,r,t){var B=A.getContext(),I=r.defines,M=r.vertexShader,U=r.fragmentShader,Z=cb(r),aa=
qb(r),oa=dc(r),wa=fb(r),Oa=0<A.gammaFactor?A.gammaFactor:1,Ya=r.isWebGL2?"":[r.extensionDerivatives||r.envMapCubeUV||r.bumpMap||r.tangentSpaceNormalMap||r.clearcoatNormalMap||r.flatShading||"physical"===r.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||
r.envMap)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ku).join("\n"),ab=bW(I),zb=B.createProgram(),sb=r.glslVersion?"#version "+r.glslVersion+"\n":"";r.isRawShaderMaterial?(I=[ab].filter(Ku).join("\n"),0<I.length&&(I+="\n"),Z=[Ya,ab].filter(Ku).join("\n"),0<Z.length&&(Z+="\n")):(I=[Qa(r),"#define SHADER_NAME "+r.shaderName,ab,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":
"","#define GAMMA_FACTOR "+Oa,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+oa:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?
"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",
r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":
"",r.shadowMapEnabled?"#define "+Z:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;",
"#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;",
"\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ku).join("\n"),Z=[Ya,Qa(r),"#define SHADER_NAME "+r.shaderName,ab,r.alphaTest?"#define ALPHATEST "+r.alphaTest+(r.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+
Oa,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+aa:"",r.envMap?"#define "+oa:"",r.envMap?"#define "+wa:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":
"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.sheen?"#define USE_SHEEN":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.vertexTangents?
"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+Z:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":
"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(r.extensionShaderTextureLOD||r.envMap)&&r.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==r.toneMapping?"#define TONE_MAPPING":"",0!==r.toneMapping?Hi.tonemapping_pars_fragment:"",0!==r.toneMapping?JM("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":
"",Hi.encodings_pars_fragment,r.map?Bx("mapTexelToLinear",r.mapEncoding):"",r.matcap?Bx("matcapTexelToLinear",r.matcapEncoding):"",r.envMap?Bx("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMap?Bx("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.lightMap?Bx("lightMapTexelToLinear",r.lightMapEncoding):"",aW("linearToOutputTexel",r.outputEncoding),r.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Ku).join("\n"));M=M.replace(wY,ZE);M=YE(M,r);M=FM(M,r);U=U.replace(wY,
ZE);U=YE(U,r);U=FM(U,r);M=M.replace(wda,Wa).replace(xda,va);U=U.replace(wda,Wa).replace(xda,va);r.isWebGL2&&!0!==r.isRawShaderMaterial&&(sb="#version 300 es\n",I="#define attribute in\n#define varying out\n#define texture2D texture\n"+I,Z=["#define varying in","300 es"===r.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===r.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+
"\n"+Z);U=sb+Z+U;M=EM(B,35633,sb+I+M);U=EM(B,35632,U);B.attachShader(zb,M);B.attachShader(zb,U);void 0!==r.index0AttributeName?B.bindAttribLocation(zb,0,r.index0AttributeName):!0===r.morphTargets&&B.bindAttribLocation(zb,0,"position");B.linkProgram(zb);if(A.debug.checkShaderErrors){A=B.getProgramInfoLog(zb).trim();sb=B.getShaderInfoLog(M).trim();aa=B.getShaderInfoLog(U).trim();wa=oa=!0;if(!1===B.getProgramParameter(zb,35714))oa=!1,Oa=DM(B,M,"vertex"),Ya=DM(B,U,"fragment"),console.error("THREE.WebGLProgram: shader error: ",
B.getError(),"35715",B.getProgramParameter(zb,35715),"gl.getProgramInfoLog",A,Oa,Ya);else if(""!==A)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",A);else if(""===sb||""===aa)wa=!1;wa&&((this||q).diagnostics={runnable:oa,programLog:A,vertexShader:{log:sb,prefix:I},fragmentShader:{log:aa,prefix:Z}})}B.deleteShader(M);B.deleteShader(U);var nc;(this||q).getUniforms=function(){void 0===nc&&(nc=new Or(B,zb));return nc};var oc;(this||q).getAttributes=function(){if(void 0===oc){for(var Fc={},
Sc=B.getProgramParameter(zb,35721),rd=0;rd<Sc;rd++){var jd=B.getActiveAttrib(zb,rd).name;Fc[jd]=B.getAttribLocation(zb,jd)}oc=Fc}return oc};(this||q).destroy=function(){t.releaseStatesOfProgram(this||q);B.deleteProgram(zb);(this||q).program=void 0};(this||q).name=r.shaderName;(this||q).id=rya++;(this||q).cacheKey=D;(this||q).usedTimes=1;(this||q).program=zb;(this||q).vertexShader=M;(this||q).fragmentShader=U;return this||q}function Jb(A,D,r,t,B,I){function M(sb){sb&&sb.isTexture?sb=sb.encoding:sb&&
sb.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),sb=sb.texture.encoding):sb=3E3;return sb}var U=[],Z=t.isWebGL2,aa=t.logarithmicDepthBuffer,oa=t.floatVertexTextures,wa=t.maxVertexUniforms,Oa=t.vertexTextures,Ya=t.precision,ab={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",
MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},zb="precision isWebGL2 supportsVertexTextures outputEncoding instancing instancingColor map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatMap clearcoatRoughnessMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen transmissionMap".split(" ");
return{getParameters:function(sb,nc,oc,Fc,Sc){var rd=Fc.fog;Fc=sb.isMeshStandardMaterial?Fc.environment:null;Fc=D.get(sb.envMap||Fc);var jd=ab[sb.type];if(Sc.isSkinnedMesh){var Tc=Sc.skeleton.bones;if(oa)Tc=1024;else{var Uc=Math.min(Math.floor((wa-20)/4),Tc.length);Uc<Tc.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Tc.length+" bones. This GPU supports "+Uc+"."),Tc=0):Tc=Uc}}else Tc=0;null!==sb.precision&&(Ya=t.getMaxPrecision(sb.precision),Ya!==sb.precision&&console.warn("THREE.WebGLProgram.getParameters:",
sb.precision,"not supported, using",Ya,"instead."));if(jd){var qd=Nq[jd];Uc=qd.vertexShader;qd=qd.fragmentShader}else Uc=sb.vertexShader,qd=sb.fragmentShader;var Ld=A.getRenderTarget();return{isWebGL2:Z,shaderID:jd,shaderName:sb.type,vertexShader:Uc,fragmentShader:qd,defines:sb.defines,isRawShaderMaterial:!0===sb.isRawShaderMaterial,glslVersion:sb.glslVersion,precision:Ya,instancing:!0===Sc.isInstancedMesh,instancingColor:!0===Sc.isInstancedMesh&&null!==Sc.instanceColor,supportsVertexTextures:Oa,
outputEncoding:null!==Ld?M(Ld.texture):A.outputEncoding,map:!!sb.map,mapEncoding:M(sb.map),matcap:!!sb.matcap,matcapEncoding:M(sb.matcap),envMap:!!Fc,envMapMode:Fc&&Fc.mapping,envMapEncoding:M(Fc),envMapCubeUV:!!Fc&&(306===Fc.mapping||307===Fc.mapping),lightMap:!!sb.lightMap,lightMapEncoding:M(sb.lightMap),aoMap:!!sb.aoMap,emissiveMap:!!sb.emissiveMap,emissiveMapEncoding:M(sb.emissiveMap),bumpMap:!!sb.bumpMap,normalMap:!!sb.normalMap,objectSpaceNormalMap:1===sb.normalMapType,tangentSpaceNormalMap:0===
sb.normalMapType,clearcoatMap:!!sb.clearcoatMap,clearcoatRoughnessMap:!!sb.clearcoatRoughnessMap,clearcoatNormalMap:!!sb.clearcoatNormalMap,displacementMap:!!sb.displacementMap,roughnessMap:!!sb.roughnessMap,metalnessMap:!!sb.metalnessMap,specularMap:!!sb.specularMap,alphaMap:!!sb.alphaMap,gradientMap:!!sb.gradientMap,sheen:!!sb.sheen,transmissionMap:!!sb.transmissionMap,combine:sb.combine,vertexTangents:sb.normalMap&&sb.vertexTangents,vertexColors:sb.vertexColors,vertexUvs:!!sb.map||!!sb.bumpMap||
!!sb.normalMap||!!sb.specularMap||!!sb.alphaMap||!!sb.emissiveMap||!!sb.roughnessMap||!!sb.metalnessMap||!!sb.clearcoatMap||!!sb.clearcoatRoughnessMap||!!sb.clearcoatNormalMap||!!sb.displacementMap||!!sb.transmissionMap,uvsVertexOnly:!(sb.map||sb.bumpMap||sb.normalMap||sb.specularMap||sb.alphaMap||sb.emissiveMap||sb.roughnessMap||sb.metalnessMap||sb.clearcoatNormalMap||sb.transmissionMap)&&!!sb.displacementMap,fog:!!rd,useFog:sb.fog,fogExp2:rd&&rd.isFogExp2,flatShading:!!sb.flatShading,sizeAttenuation:sb.sizeAttenuation,
logarithmicDepthBuffer:aa,skinning:sb.skinning&&0<Tc,maxBones:Tc,useVertexTexture:oa,morphTargets:sb.morphTargets,morphNormals:sb.morphNormals,maxMorphTargets:A.maxMorphTargets,maxMorphNormals:A.maxMorphNormals,numDirLights:nc.directional.length,numPointLights:nc.point.length,numSpotLights:nc.spot.length,numRectAreaLights:nc.rectArea.length,numHemiLights:nc.hemi.length,numDirLightShadows:nc.directionalShadowMap.length,numPointLightShadows:nc.pointShadowMap.length,numSpotLightShadows:nc.spotShadowMap.length,
numClippingPlanes:I.numPlanes,numClipIntersection:I.numIntersection,dithering:sb.dithering,shadowMapEnabled:A.shadowMap.enabled&&0<oc.length,shadowMapType:A.shadowMap.type,toneMapping:sb.toneMapped?A.toneMapping:0,physicallyCorrectLights:A.physicallyCorrectLights,premultipliedAlpha:sb.premultipliedAlpha,alphaTest:sb.alphaTest,doubleSided:2===sb.side,flipSided:1===sb.side,depthPacking:void 0!==sb.depthPacking?sb.depthPacking:!1,index0AttributeName:sb.index0AttributeName,extensionDerivatives:sb.extensions&&
sb.extensions.derivatives,extensionFragDepth:sb.extensions&&sb.extensions.fragDepth,extensionDrawBuffers:sb.extensions&&sb.extensions.drawBuffers,extensionShaderTextureLOD:sb.extensions&&sb.extensions.shaderTextureLOD,rendererExtensionFragDepth:Z||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:Z||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:Z||r.has("EXT_shader_texture_lod"),customProgramCacheKey:sb.customProgramCacheKey()}},getProgramCacheKey:function(sb){var nc=[];sb.shaderID?
nc.push(sb.shaderID):(nc.push(sb.fragmentShader),nc.push(sb.vertexShader));if(void 0!==sb.defines)for(var oc in sb.defines)nc.push(oc),nc.push(sb.defines[oc]);if(!1===sb.isRawShaderMaterial){for(oc=0;oc<zb.length;oc++)nc.push(sb[zb[oc]]);nc.push(A.outputEncoding);nc.push(A.gammaFactor)}nc.push(sb.customProgramCacheKey);return nc.join()},getUniforms:function(sb){var nc=ab[sb.type];return nc?yda.clone(Nq[nc].uniforms):sb.uniforms},acquireProgram:function(sb,nc){for(var oc,Fc=0,Sc=U.length;Fc<Sc;Fc++){var rd=
U[Fc];if(rd.cacheKey===nc){oc=rd;++oc.usedTimes;break}}void 0===oc&&(oc=new Xb(A,nc,sb,B),U.push(oc));return oc},releaseProgram:function(sb){if(0===--sb.usedTimes){var nc=U.indexOf(sb);U[nc]=U[U.length-1];U.pop();sb.destroy()}},programs:U}}function Yc(){var A=new WeakMap;return{get:function(D){var r=A.get(D);void 0===r&&(r={},A.set(D,r));return r},remove:function(D){A.delete(D)},update:function(D,r,t){A.get(D)[r]=t},dispose:function(){A=new WeakMap}}}function Pb(A,D){return A.groupOrder!==D.groupOrder?
A.groupOrder-D.groupOrder:A.renderOrder!==D.renderOrder?A.renderOrder-D.renderOrder:A.program!==D.program?A.program.id-D.program.id:A.material.id!==D.material.id?A.material.id-D.material.id:A.z!==D.z?A.z-D.z:A.id-D.id}function Wd(A,D){return A.groupOrder!==D.groupOrder?A.groupOrder-D.groupOrder:A.renderOrder!==D.renderOrder?A.renderOrder-D.renderOrder:A.z!==D.z?D.z-A.z:A.id-D.id}function ue(A){function D(U,Z,aa,oa,wa,Oa){var Ya=r[t],ab=A.get(aa);void 0===Ya?(Ya={id:U.id,object:U,geometry:Z,material:aa,
program:ab.program||M,groupOrder:oa,renderOrder:U.renderOrder,z:wa,group:Oa},r[t]=Ya):(Ya.id=U.id,Ya.object=U,Ya.geometry=Z,Ya.material=aa,Ya.program=ab.program||M,Ya.groupOrder=oa,Ya.renderOrder=U.renderOrder,Ya.z=wa,Ya.group=Oa);t++;return Ya}var r=[],t=0,B=[],I=[],M={id:-1};return{opaque:B,transparent:I,init:function(){t=0;B.length=0;I.length=0},push:function(U,Z,aa,oa,wa,Oa){U=D(U,Z,aa,oa,wa,Oa);(!0===aa.transparent?I:B).push(U)},unshift:function(U,Z,aa,oa,wa,Oa){U=D(U,Z,aa,oa,wa,Oa);(!0===aa.transparent?
I:B).unshift(U)},finish:function(){for(var U=t,Z=r.length;U<Z;U++){var aa=r[U];if(null===aa.id)break;aa.id=null;aa.object=null;aa.geometry=null;aa.material=null;aa.program=null;aa.group=null}},sort:function(U,Z){1<B.length&&B.sort(U||Pb);1<I.length&&I.sort(Z||Wd)}}}function zf(A){var D=new WeakMap;return{get:function(r,t){!1===D.has(r)?(t=new ue(A),D.set(r,[t])):t>=D.get(r).length?(t=new ue(A),D.get(r).push(t)):t=D.get(r)[t];return t},dispose:function(){D=new WeakMap}}}function Af(){var A={};return{get:function(D){if(void 0!==
A[D.id])return A[D.id];switch(D.type){case "DirectionalLight":var r={direction:new jc,color:new Zf};break;case "SpotLight":r={position:new jc,direction:new jc,color:new Zf,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case "PointLight":r={position:new jc,color:new Zf,distance:0,decay:0};break;case "HemisphereLight":r={direction:new jc,skyColor:new Zf,groundColor:new Zf};break;case "RectAreaLight":r={color:new Zf,position:new jc,halfWidth:new jc,halfHeight:new jc}}return A[D.id]=r}}}function Qe(){var A=
{};return{get:function(D){if(void 0!==A[D.id])return A[D.id];switch(D.type){case "DirectionalLight":var r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case "SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case "PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye,shadowCameraNear:1,shadowCameraFar:1E3}}return A[D.id]=r}}}function Bf(A,D){return(D.castShadow?1:0)-(A.castShadow?1:0)}function ln(A,D){for(var r=
new Af,t=Qe(),B={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},I=0;9>I;I++)B.probe.push(new jc);
var M=new jc,U=new Fg,Z=new Fg;return{setup:function(aa){for(var oa=0,wa=0,Oa=0,Ya=0;9>Ya;Ya++)B.probe[Ya].set(0,0,0);var ab=Ya=0,zb=0,sb=0,nc=0,oc=0,Fc=0,Sc=0;aa.sort(Bf);for(var rd=0,jd=aa.length;rd<jd;rd++){var Tc=aa[rd],Uc=Tc.color,qd=Tc.intensity,Ld=Tc.distance,Fd=Tc.shadow&&Tc.shadow.map?Tc.shadow.map.texture:null;if(Tc.isAmbientLight)oa+=Uc.r*qd,wa+=Uc.g*qd,Oa+=Uc.b*qd;else if(Tc.isLightProbe)for(Fd=0;9>Fd;Fd++)B.probe[Fd].addScaledVector(Tc.sh.coefficients[Fd],qd);else if(Tc.isDirectionalLight){qd=
r.get(Tc);qd.color.copy(Tc.color).multiplyScalar(Tc.intensity);if(Tc.castShadow){var ce=Tc.shadow;Uc=t.get(Tc);Uc.shadowBias=ce.bias;Uc.shadowNormalBias=ce.normalBias;Uc.shadowRadius=ce.radius;Uc.shadowMapSize=ce.mapSize;B.directionalShadow[Ya]=Uc;B.directionalShadowMap[Ya]=Fd;B.directionalShadowMatrix[Ya]=Tc.shadow.matrix;oc++}B.directional[Ya]=qd;Ya++}else Tc.isSpotLight?(ce=r.get(Tc),ce.position.setFromMatrixPosition(Tc.matrixWorld),ce.color.copy(Uc).multiplyScalar(qd),ce.distance=Ld,ce.coneCos=
Math.cos(Tc.angle),ce.penumbraCos=Math.cos(Tc.angle*(1-Tc.penumbra)),ce.decay=Tc.decay,Tc.castShadow&&(qd=Tc.shadow,Uc=t.get(Tc),Uc.shadowBias=qd.bias,Uc.shadowNormalBias=qd.normalBias,Uc.shadowRadius=qd.radius,Uc.shadowMapSize=qd.mapSize,B.spotShadow[zb]=Uc,B.spotShadowMap[zb]=Fd,B.spotShadowMatrix[zb]=Tc.shadow.matrix,Sc++),B.spot[zb]=ce,zb++):Tc.isRectAreaLight?(Fd=r.get(Tc),Fd.color.copy(Uc).multiplyScalar(qd),Fd.halfWidth.set(.5*Tc.width,0,0),Fd.halfHeight.set(0,.5*Tc.height,0),B.rectArea[sb]=
Fd,sb++):Tc.isPointLight?(qd=r.get(Tc),qd.color.copy(Tc.color).multiplyScalar(Tc.intensity),qd.distance=Tc.distance,qd.decay=Tc.decay,Tc.castShadow&&(ce=Tc.shadow,Uc=t.get(Tc),Uc.shadowBias=ce.bias,Uc.shadowNormalBias=ce.normalBias,Uc.shadowRadius=ce.radius,Uc.shadowMapSize=ce.mapSize,Uc.shadowCameraNear=ce.camera.near,Uc.shadowCameraFar=ce.camera.far,B.pointShadow[ab]=Uc,B.pointShadowMap[ab]=Fd,B.pointShadowMatrix[ab]=Tc.shadow.matrix,Fc++),B.point[ab]=qd,ab++):Tc.isHemisphereLight&&(Fd=r.get(Tc),
Fd.skyColor.copy(Tc.color).multiplyScalar(qd),Fd.groundColor.copy(Tc.groundColor).multiplyScalar(qd),B.hemi[nc]=Fd,nc++)}0<sb&&(D.isWebGL2?(B.rectAreaLTC1=Lf.LTC_FLOAT_1,B.rectAreaLTC2=Lf.LTC_FLOAT_2):!0===A.has("OES_texture_float_linear")?(B.rectAreaLTC1=Lf.LTC_FLOAT_1,B.rectAreaLTC2=Lf.LTC_FLOAT_2):!0===A.has("OES_texture_half_float_linear")?(B.rectAreaLTC1=Lf.LTC_HALF_1,B.rectAreaLTC2=Lf.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions."));B.ambient[0]=
oa;B.ambient[1]=wa;B.ambient[2]=Oa;aa=B.hash;if(aa.directionalLength!==Ya||aa.pointLength!==ab||aa.spotLength!==zb||aa.rectAreaLength!==sb||aa.hemiLength!==nc||aa.numDirectionalShadows!==oc||aa.numPointShadows!==Fc||aa.numSpotShadows!==Sc)B.directional.length=Ya,B.spot.length=zb,B.rectArea.length=sb,B.point.length=ab,B.hemi.length=nc,B.directionalShadow.length=oc,B.directionalShadowMap.length=oc,B.pointShadow.length=Fc,B.pointShadowMap.length=Fc,B.spotShadow.length=Sc,B.spotShadowMap.length=Sc,B.directionalShadowMatrix.length=
oc,B.pointShadowMatrix.length=Fc,B.spotShadowMatrix.length=Sc,aa.directionalLength=Ya,aa.pointLength=ab,aa.spotLength=zb,aa.rectAreaLength=sb,aa.hemiLength=nc,aa.numDirectionalShadows=oc,aa.numPointShadows=Fc,aa.numSpotShadows=Sc,B.version=sya++},setupView:function(aa,oa){var wa=0,Oa=0,Ya=0,ab=0,zb=0;oa=oa.matrixWorldInverse;for(var sb=0,nc=aa.length;sb<nc;sb++){var oc=aa[sb];if(oc.isDirectionalLight){var Fc=B.directional[wa];Fc.direction.setFromMatrixPosition(oc.matrixWorld);M.setFromMatrixPosition(oc.target.matrixWorld);
Fc.direction.sub(M);Fc.direction.transformDirection(oa);wa++}else oc.isSpotLight?(Fc=B.spot[Ya],Fc.position.setFromMatrixPosition(oc.matrixWorld),Fc.position.applyMatrix4(oa),Fc.direction.setFromMatrixPosition(oc.matrixWorld),M.setFromMatrixPosition(oc.target.matrixWorld),Fc.direction.sub(M),Fc.direction.transformDirection(oa),Ya++):oc.isRectAreaLight?(Fc=B.rectArea[ab],Fc.position.setFromMatrixPosition(oc.matrixWorld),Fc.position.applyMatrix4(oa),Z.identity(),U.copy(oc.matrixWorld),U.premultiply(oa),
Z.extractRotation(U),Fc.halfWidth.set(.5*oc.width,0,0),Fc.halfHeight.set(0,.5*oc.height,0),Fc.halfWidth.applyMatrix4(Z),Fc.halfHeight.applyMatrix4(Z),ab++):oc.isPointLight?(Fc=B.point[Oa],Fc.position.setFromMatrixPosition(oc.matrixWorld),Fc.position.applyMatrix4(oa),Oa++):oc.isHemisphereLight&&(Fc=B.hemi[zb],Fc.direction.setFromMatrixPosition(oc.matrixWorld),Fc.direction.transformDirection(oa),Fc.direction.normalize(),zb++)}},state:B}}function CM(A,D){var r=new ln(A,D),t=[],B=[];return{init:function(){t.length=
0;B.length=0},state:{lightsArray:t,shadowsArray:B,lights:r},setupLights:function(){r.setup(t)},setupLightsView:function(I){r.setupView(t,I)},pushLight:function(I){t.push(I)},pushShadow:function(I){B.push(I)}}}function $V(A,D){var r=new WeakMap;return{get:function(t,B){void 0===B&&(B=0);!1===r.has(t)?(B=new CM(A,D),r.set(t,[B])):B>=r.get(t).length?(B=new CM(A,D),r.get(t).push(B)):B=r.get(t)[B];return B},dispose:function(){r=new WeakMap}}}function zda(A,D,r){function t(Sc,rd,jd){jd=Sc<<0|rd<<1|jd<<
2;var Tc=wa[jd];void 0===Tc&&(Tc=new EO({depthPacking:3201,morphTargets:Sc,skinning:rd}),wa[jd]=Tc);return Tc}function B(Sc,rd,jd){jd=Sc<<0|rd<<1|jd<<2;var Tc=Oa[jd];void 0===Tc&&(Tc=new FO({morphTargets:Sc,skinning:rd}),Oa[jd]=Tc);return Tc}function I(Sc,rd,jd,Tc,Uc,qd,Ld){var Fd=t,ce=Sc.customDepthMaterial;!0===Tc.isPointLight&&(Fd=B,ce=Sc.customDistanceMaterial);void 0===ce?(ce=!1,!0===jd.morphTargets&&(ce=rd.morphAttributes&&rd.morphAttributes.position&&0<rd.morphAttributes.position.length),rd=
!1,!0===Sc.isSkinnedMesh&&(!0===jd.skinning?rd=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",Sc)),Sc=Fd(ce,rd,!0===Sc.isInstancedMesh)):Sc=ce;A.localClippingEnabled&&!0===jd.clipShadows&&0!==jd.clippingPlanes.length&&(ce=Sc.uuid,Fd=jd.uuid,rd=Ya[ce],void 0===rd&&(rd={},Ya[ce]=rd),ce=rd[Fd],void 0===ce&&(ce=Sc.clone(),rd[Fd]=ce),Sc=ce);Sc.visible=jd.visible;Sc.wireframe=jd.wireframe;Sc.side=3===Ld?null!==jd.shadowSide?jd.shadowSide:jd.side:null!==jd.shadowSide?
jd.shadowSide:ab[jd.side];Sc.clipShadows=jd.clipShadows;Sc.clippingPlanes=jd.clippingPlanes;Sc.clipIntersection=jd.clipIntersection;Sc.wireframeLinewidth=jd.wireframeLinewidth;Sc.linewidth=jd.linewidth;!0===Tc.isPointLight&&!0===Sc.isMeshDistanceMaterial&&(Sc.referencePosition.setFromMatrixPosition(Tc.matrixWorld),Sc.nearDistance=Uc,Sc.farDistance=qd);return Sc}function M(Sc,rd,jd,Tc,Uc){if(!1!==Sc.visible){if(Sc.layers.test(rd.layers)&&(Sc.isMesh||Sc.isLine||Sc.isPoints)&&(Sc.castShadow||Sc.receiveShadow&&
3===Uc)&&(!Sc.frustumCulled||U.intersectsObject(Sc))){Sc.modelViewMatrix.multiplyMatrices(jd.matrixWorldInverse,Sc.matrixWorld);var qd=D.update(Sc),Ld=Sc.material;if(Array.isArray(Ld))for(var Fd=qd.groups,ce=0,rf=Fd.length;ce<rf;ce++){var sd=Fd[ce],zd=Ld[sd.materialIndex];zd&&zd.visible&&(zd=I(Sc,qd,zd,Tc,jd.near,jd.far,Uc),A.renderBufferDirect(jd,null,qd,zd,Sc,sd))}else Ld.visible&&(Ld=I(Sc,qd,Ld,Tc,jd.near,jd.far,Uc),A.renderBufferDirect(jd,null,qd,Ld,Sc,null))}Sc=Sc.children;qd=0;for(Ld=Sc.length;qd<
Ld;qd++)M(Sc[qd],rd,jd,Tc,Uc)}}var U=new NF,Z=new Ye,aa=new Ye,oa=new Xj,wa=[],Oa=[],Ya={},ab={0:1,1:0,2:2},zb=new fc({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new Ye},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),
sb=zb.clone();sb.defines.HORIZONTAL_PASS=1;var nc=new ya;nc.setAttribute("position",new Ia(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var oc=new Sa(nc,zb),Fc=this||q;(this||q).enabled=!1;(this||q).autoUpdate=!0;(this||q).needsUpdate=!1;(this||q).type=1;(this||q).render=function(Sc,rd,jd){if(!1!==Fc.enabled&&(!1!==Fc.autoUpdate||!1!==Fc.needsUpdate)&&0!==Sc.length){var Tc=A.getRenderTarget(),Uc=A.getActiveCubeFace(),qd=A.getActiveMipmapLevel(),Ld=A.state;Ld.setBlending(0);Ld.buffers.color.setClear(1,
1,1,1);Ld.buffers.depth.setTest(!0);Ld.setScissorTest(!1);for(var Fd=0,ce=Sc.length;Fd<ce;Fd++){var rf=Sc[Fd],sd=rf.shadow;if(void 0===sd)console.warn("THREE.WebGLShadowMap:",rf,"has no shadow.");else if(!1!==sd.autoUpdate||!1!==sd.needsUpdate){Z.copy(sd.mapSize);var zd=sd.getFrameExtents();Z.multiply(zd);aa.copy(sd.mapSize);if(Z.x>r||Z.y>r)Z.x>r&&(aa.x=Math.floor(r/zd.x),Z.x=aa.x*zd.x,sd.mapSize.x=aa.x),Z.y>r&&(aa.y=Math.floor(r/zd.y),Z.y=aa.y*zd.y,sd.mapSize.y=aa.y);null!==sd.map||sd.isPointLightShadow||
3!==(this||q).type||(zd={minFilter:1006,magFilter:1006,format:1023},sd.map=new pt(Z.x,Z.y,zd),sd.map.texture.name=rf.name+".shadowMap",sd.mapPass=new pt(Z.x,Z.y,zd),sd.camera.updateProjectionMatrix());null===sd.map&&(sd.map=new pt(Z.x,Z.y,{minFilter:1003,magFilter:1003,format:1023}),sd.map.texture.name=rf.name+".shadowMap",sd.camera.updateProjectionMatrix());A.setRenderTarget(sd.map);A.clear();zd=sd.getViewportCount();for(var Td=0;Td<zd;Td++){var $f=sd.getViewport(Td);oa.set(aa.x*$f.x,aa.y*$f.y,aa.x*
$f.z,aa.y*$f.w);Ld.viewport(oa);sd.updateMatrices(rf,Td);U=sd.getFrustum();M(rd,jd,sd.camera,rf,(this||q).type)}sd.isPointLightShadow||3!==(this||q).type||(rf=sd,zd=jd,Td=D.update(oc),zb.uniforms.shadow_pass.value=rf.map.texture,zb.uniforms.resolution.value=rf.mapSize,zb.uniforms.radius.value=rf.radius,A.setRenderTarget(rf.mapPass),A.clear(),A.renderBufferDirect(zd,null,Td,zb,oc,null),sb.uniforms.shadow_pass.value=rf.mapPass.texture,sb.uniforms.resolution.value=rf.mapSize,sb.uniforms.radius.value=
rf.radius,A.setRenderTarget(rf.map),A.clear(),A.renderBufferDirect(zd,null,Td,sb,oc,null));sd.needsUpdate=!1}}Fc.needsUpdate=!1;A.setRenderTarget(Tc,Uc,qd)}}}function tya(A,D,r){function t(Pc,Oe,hf){var ig=new Uint8Array(4),mf=A.createTexture();A.bindTexture(Pc,mf);A.texParameteri(Pc,10241,9728);A.texParameteri(Pc,10240,9728);for(Pc=0;Pc<hf;Pc++)A.texImage2D(Oe+Pc,0,6408,1,1,0,6408,5121,ig);return mf}function B(Pc){!0!==sb[Pc]&&(A.enable(Pc),sb[Pc]=!0)}function I(Pc){!1!==sb[Pc]&&(A.disable(Pc),sb[Pc]=
!1)}function M(Pc,Oe,hf,ig,mf,ph,uh,bi){if(0===Pc)!0===oc&&(I(3042),oc=!1);else if(!1===oc&&(B(3042),oc=!0),5!==Pc){if(Pc!==Fc||bi!==Ld){if(100!==Sc||100!==Tc)A.blendEquation(32774),Tc=Sc=100;if(bi)switch(Pc){case 1:A.blendFuncSeparate(1,771,1,771);break;case 2:A.blendFunc(1,1);break;case 3:A.blendFuncSeparate(0,0,769,771);break;case 4:A.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pc)}else switch(Pc){case 1:A.blendFuncSeparate(770,771,1,771);break;
case 2:A.blendFunc(770,1);break;case 3:A.blendFunc(0,769);break;case 4:A.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pc)}qd=Uc=jd=rd=null;Fc=Pc;Ld=bi}}else{mf=mf||Oe;ph=ph||hf;uh=uh||ig;if(Oe!==Sc||mf!==Tc)A.blendEquationSeparate(ad[Oe],ad[mf]),Sc=Oe,Tc=mf;if(hf!==rd||ig!==jd||ph!==Uc||uh!==qd)A.blendFuncSeparate(Vd[hf],Vd[ig],Vd[ph],Vd[uh]),rd=hf,jd=ig,Uc=ph,qd=uh;Fc=Pc;Ld=null}}function U(Pc){Fd!==Pc&&(Pc?A.frontFace(2304):A.frontFace(2305),Fd=Pc)}function Z(Pc){0!==
Pc?(B(2884),Pc!==ce&&(1===Pc?A.cullFace(1029):2===Pc?A.cullFace(1028):A.cullFace(1032))):I(2884);ce=Pc}function aa(Pc,Oe,hf){if(Pc){if(B(32823),sd!==Oe||zd!==hf)A.polygonOffset(Oe,hf),sd=Oe,zd=hf}else I(32823)}function oa(Pc){void 0===Pc&&(Pc=33984+Td-1);bg!==Pc&&(A.activeTexture(Pc),bg=Pc)}var wa,Oa;r=r.isWebGL2;var Ya=new function(){var Pc=!1,Oe=new Xj,hf=null,ig=new Xj(0,0,0,0);return{setMask:function(mf){hf===mf||Pc||(A.colorMask(mf,mf,mf,mf),hf=mf)},setLocked:function(mf){Pc=mf},setClear:function(mf,
ph,uh,bi,ci){!0===ci&&(mf*=bi,ph*=bi,uh*=bi);Oe.set(mf,ph,uh,bi);!1===ig.equals(Oe)&&(A.clearColor(mf,ph,uh,bi),ig.copy(Oe))},reset:function(){Pc=!1;hf=null;ig.set(-1,0,0,0)}}},ab=new function(){var Pc=!1,Oe=null,hf=null,ig=null;return{setTest:function(mf){mf?B(2929):I(2929)},setMask:function(mf){Oe===mf||Pc||(A.depthMask(mf),Oe=mf)},setFunc:function(mf){if(hf!==mf){if(mf)switch(mf){case 0:A.depthFunc(512);break;case 1:A.depthFunc(519);break;case 2:A.depthFunc(513);break;case 3:A.depthFunc(515);break;
case 4:A.depthFunc(514);break;case 5:A.depthFunc(518);break;case 6:A.depthFunc(516);break;case 7:A.depthFunc(517);break;default:A.depthFunc(515)}else A.depthFunc(515);hf=mf}},setLocked:function(mf){Pc=mf},setClear:function(mf){ig!==mf&&(A.clearDepth(mf),ig=mf)},reset:function(){Pc=!1;ig=hf=Oe=null}}},zb=new function(){var Pc=!1,Oe=null,hf=null,ig=null,mf=null,ph=null,uh=null,bi=null,ci=null;return{setTest:function(kj){Pc||(kj?B(2960):I(2960))},setMask:function(kj){Oe===kj||Pc||(A.stencilMask(kj),
Oe=kj)},setFunc:function(kj,Wg,de){if(hf!==kj||ig!==Wg||mf!==de)A.stencilFunc(kj,Wg,de),hf=kj,ig=Wg,mf=de},setOp:function(kj,Wg,de){if(ph!==kj||uh!==Wg||bi!==de)A.stencilOp(kj,Wg,de),ph=kj,uh=Wg,bi=de},setLocked:function(kj){Pc=kj},setClear:function(kj){ci!==kj&&(A.clearStencil(kj),ci=kj)},reset:function(){Pc=!1;ci=bi=uh=ph=mf=ig=hf=Oe=null}}},sb={},nc=null,oc=!1,Fc=null,Sc=null,rd=null,jd=null,Tc=null,Uc=null,qd=null,Ld=!1,Fd=null,ce=null,rf=null,sd=null,zd=null,Td=A.getParameter(35661),$f=!1,Ne=
0;Ne=A.getParameter(7938);-1!==Ne.indexOf("WebGL")?(Ne=parseFloat(/^WebGL (\d)/.exec(Ne)[1]),$f=1<=Ne):-1!==Ne.indexOf("OpenGL ES")&&(Ne=parseFloat(/^OpenGL ES (\d)/.exec(Ne)[1]),$f=2<=Ne);var bg=null,qh={},mi=new Xj,kk=new Xj,uc={};uc[3553]=t(3553,3553,1);uc[34067]=t(34067,34069,6);Ya.setClear(0,0,0,1);ab.setClear(1);zb.setClear(0);B(2929);ab.setFunc(3);U(!1);Z(1);B(2884);M(0);var ad=(wa={},wa[100]=32774,wa[101]=32778,wa[102]=32779,wa);r?(ad[103]=32775,ad[104]=32776):(D=D.get("EXT_blend_minmax"),
null!==D&&(ad[103]=D.MIN_EXT,ad[104]=D.MAX_EXT));var Vd=(Oa={},Oa[200]=0,Oa[201]=1,Oa[202]=768,Oa[204]=770,Oa[210]=776,Oa[208]=774,Oa[206]=772,Oa[203]=769,Oa[205]=771,Oa[209]=775,Oa[207]=773,Oa);return{buffers:{color:Ya,depth:ab,stencil:zb},enable:B,disable:I,useProgram:function(Pc){return nc!==Pc?(A.useProgram(Pc),nc=Pc,!0):!1},setBlending:M,setMaterial:function(Pc,Oe){2===Pc.side?I(2884):B(2884);var hf=1===Pc.side;Oe&&(hf=!hf);U(hf);1===Pc.blending&&!1===Pc.transparent?M(0):M(Pc.blending,Pc.blendEquation,
Pc.blendSrc,Pc.blendDst,Pc.blendEquationAlpha,Pc.blendSrcAlpha,Pc.blendDstAlpha,Pc.premultipliedAlpha);ab.setFunc(Pc.depthFunc);ab.setTest(Pc.depthTest);ab.setMask(Pc.depthWrite);Ya.setMask(Pc.colorWrite);Oe=Pc.stencilWrite;zb.setTest(Oe);Oe&&(zb.setMask(Pc.stencilWriteMask),zb.setFunc(Pc.stencilFunc,Pc.stencilRef,Pc.stencilFuncMask),zb.setOp(Pc.stencilFail,Pc.stencilZFail,Pc.stencilZPass));aa(Pc.polygonOffset,Pc.polygonOffsetFactor,Pc.polygonOffsetUnits)},setFlipSided:U,setCullFace:Z,setLineWidth:function(Pc){Pc!==
rf&&($f&&A.lineWidth(Pc),rf=Pc)},setPolygonOffset:aa,setScissorTest:function(Pc){Pc?B(3089):I(3089)},activeTexture:oa,bindTexture:function(Pc,Oe){null===bg&&oa();var hf=qh[bg];void 0===hf&&(hf={type:void 0,texture:void 0},qh[bg]=hf);if(hf.type!==Pc||hf.texture!==Oe)A.bindTexture(Pc,Oe||uc[Pc]),hf.type=Pc,hf.texture=Oe},unbindTexture:function(){var Pc=qh[bg];void 0!==Pc&&void 0!==Pc.type&&(A.bindTexture(Pc.type,null),Pc.type=void 0,Pc.texture=void 0)},compressedTexImage2D:function(){try{A.compressedTexImage2D.apply(A,
arguments)}catch(Pc){console.error("THREE.WebGLState:",Pc)}},texImage2D:function(){try{A.texImage2D.apply(A,arguments)}catch(Pc){console.error("THREE.WebGLState:",Pc)}},texImage3D:function(){try{A.texImage3D.apply(A,arguments)}catch(Pc){console.error("THREE.WebGLState:",Pc)}},scissor:function(Pc){!1===mi.equals(Pc)&&(A.scissor(Pc.x,Pc.y,Pc.z,Pc.w),mi.copy(Pc))},viewport:function(Pc){!1===kk.equals(Pc)&&(A.viewport(Pc.x,Pc.y,Pc.z,Pc.w),kk.copy(Pc))},reset:function(){A.disable(3042);A.disable(2884);
A.disable(2929);A.disable(32823);A.disable(3089);A.disable(2960);A.blendEquation(32774);A.blendFunc(1,0);A.blendFuncSeparate(1,0,1,0);A.colorMask(!0,!0,!0,!0);A.clearColor(0,0,0,0);A.depthMask(!0);A.depthFunc(513);A.clearDepth(1);A.stencilMask(4294967295);A.stencilFunc(519,0,4294967295);A.stencilOp(7680,7680,7680);A.clearStencil(0);A.cullFace(1029);A.frontFace(2305);A.polygonOffset(0,0);A.activeTexture(33984);A.useProgram(null);A.lineWidth(1);A.scissor(0,0,A.canvas.width,A.canvas.height);A.viewport(0,
0,A.canvas.width,A.canvas.height);sb={};bg=null;qh={};nc=null;oc=!1;qd=Uc=Tc=jd=rd=Sc=Fc=null;Ld=!1;zd=sd=rf=ce=Fd=null;Ya.reset();ab.reset();zb.reset()}}}function uya(A,D,r,t,B,I,M){function U(uc,ad){return $f?new OffscreenCanvas(uc,ad):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function Z(uc,ad,Vd,Pc){var Oe=1;if(uc.width>Pc||uc.height>Pc)Oe=Pc/Math.max(uc.width,uc.height);if(1>Oe||!0===ad){if("undefined"!==typeof HTMLImageElement&&uc instanceof HTMLImageElement||"undefined"!==
typeof HTMLCanvasElement&&uc instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&uc instanceof ImageBitmap)return Pc=ad?oh.floorPowerOfTwo:Math.floor,ad=Pc(Oe*uc.width),Oe=Pc(Oe*uc.height),void 0===Td&&(Td=U(ad,Oe)),Vd=Vd?U(ad,Oe):Td,Vd.width=ad,Vd.height=Oe,Vd.getContext("2d").drawImage(uc,0,0,ad,Oe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+uc.width+"x"+uc.height+") to ("+ad+"x"+Oe+")."),Vd;"data"in uc&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+
uc.width+"x"+uc.height+").")}return uc}function aa(uc){return oh.isPowerOfTwo(uc.width)&&oh.isPowerOfTwo(uc.height)}function oa(uc,ad){return uc.generateMipmaps&&ad&&1003!==uc.minFilter&&1006!==uc.minFilter}function wa(uc,ad,Vd,Pc){A.generateMipmap(uc);t.get(ad).__maxMipLevel=Math.log2(Math.max(Vd,Pc))}function Oa(uc,ad,Vd){if(!1===Ld)return ad;if(null!==uc){if(void 0!==A[uc])return A[uc];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+uc+"'")}uc=ad;6403===
ad&&(5126===Vd&&(uc=33326),5131===Vd&&(uc=33325),5121===Vd&&(uc=33321));6407===ad&&(5126===Vd&&(uc=34837),5131===Vd&&(uc=34843),5121===Vd&&(uc=32849));6408===ad&&(5126===Vd&&(uc=34836),5131===Vd&&(uc=34842),5121===Vd&&(uc=32856));33325!==uc&&33326!==uc&&34842!==uc&&34836!==uc||D.get("EXT_color_buffer_float");return uc}function Ya(uc){return 1003===uc||1004===uc||1005===uc?9728:9729}function ab(uc){uc=uc.target;uc.removeEventListener("dispose",ab);var ad=t.get(uc);void 0!==ad.__webglInit&&(A.deleteTexture(ad.__webglTexture),
t.remove(uc));uc.isVideoTexture&&zd.delete(uc);M.memory.textures--}function zb(uc){uc=uc.target;uc.removeEventListener("dispose",zb);var ad=uc.texture,Vd=t.get(uc),Pc=t.get(ad);if(uc){void 0!==Pc.__webglTexture&&A.deleteTexture(Pc.__webglTexture);uc.depthTexture&&uc.depthTexture.dispose();if(uc.isWebGLCubeRenderTarget)for(Pc=0;6>Pc;Pc++)A.deleteFramebuffer(Vd.__webglFramebuffer[Pc]),Vd.__webglDepthbuffer&&A.deleteRenderbuffer(Vd.__webglDepthbuffer[Pc]);else A.deleteFramebuffer(Vd.__webglFramebuffer),
Vd.__webglDepthbuffer&&A.deleteRenderbuffer(Vd.__webglDepthbuffer),Vd.__webglMultisampledFramebuffer&&A.deleteFramebuffer(Vd.__webglMultisampledFramebuffer),Vd.__webglColorRenderbuffer&&A.deleteRenderbuffer(Vd.__webglColorRenderbuffer),Vd.__webglDepthRenderbuffer&&A.deleteRenderbuffer(Vd.__webglDepthRenderbuffer);t.remove(ad);t.remove(uc)}M.memory.textures--}function sb(uc,ad){var Vd=t.get(uc);if(uc.isVideoTexture){var Pc=M.render.frame;zd.get(uc)!==Pc&&(zd.set(uc,Pc),uc.update())}if(0<uc.version&&
Vd.__version!==uc.version)if(Pc=uc.image,void 0===Pc)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(!1===Pc.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Sc(Vd,uc,ad);return}r.activeTexture(33984+ad);r.bindTexture(3553,Vd.__webglTexture)}function nc(uc,ad){var Vd=t.get(uc);if(0<uc.version&&Vd.__version!==uc.version){if(6===uc.image.length){Fc(Vd,uc);r.activeTexture(33984+ad);r.bindTexture(34067,Vd.__webglTexture);
A.pixelStorei(37440,uc.flipY);A.pixelStorei(37441,uc.premultiplyAlpha);A.pixelStorei(3317,uc.unpackAlignment);A.pixelStorei(37443,0);var Pc=uc&&(uc.isCompressedTexture||uc.image[0].isCompressedTexture),Oe=uc.image[0]&&uc.image[0].isDataTexture;ad=[];for(var hf=0;6>hf;hf++)ad[hf]=Pc||Oe?Oe?uc.image[hf].image:uc.image[hf]:Z(uc.image[hf],!1,!0,ce);hf=ad[0];var ig=aa(hf)||Ld,mf=I.convert(uc.format),ph=I.convert(uc.type),uh=Oa(uc.internalFormat,mf,ph);oc(34067,uc,ig);if(Pc){for(Oe=0;6>Oe;Oe++){var bi=
ad[Oe].mipmaps;for(Pc=0;Pc<bi.length;Pc++){var ci=bi[Pc];1023!==uc.format&&1022!==uc.format?null!==mf?r.compressedTexImage2D(34069+Oe,Pc,uh,ci.width,ci.height,0,ci.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(34069+Oe,Pc,uh,ci.width,ci.height,0,mf,ph,ci.data)}}Vd.__maxMipLevel=bi.length-1}else{bi=uc.mipmaps;for(Pc=0;6>Pc;Pc++)if(Oe)for(r.texImage2D(34069+Pc,0,uh,ad[Pc].width,ad[Pc].height,0,mf,ph,ad[Pc].data),ci=
0;ci<bi.length;ci++){var kj=bi[ci].image[Pc].image;r.texImage2D(34069+Pc,ci+1,uh,kj.width,kj.height,0,mf,ph,kj.data)}else for(r.texImage2D(34069+Pc,0,uh,mf,ph,ad[Pc]),ci=0;ci<bi.length;ci++)r.texImage2D(34069+Pc,ci+1,uh,mf,ph,bi[ci].image[Pc]);Vd.__maxMipLevel=bi.length}oa(uc,ig)&&wa(34067,uc,hf.width,hf.height);Vd.__version=uc.version;if(uc.onUpdate)uc.onUpdate(uc)}}else r.activeTexture(33984+ad),r.bindTexture(34067,Vd.__webglTexture)}function oc(uc,ad,Vd){Vd?(A.texParameteri(uc,10242,bg[ad.wrapS]),
A.texParameteri(uc,10243,bg[ad.wrapT]),32879!==uc&&35866!==uc||A.texParameteri(uc,32882,bg[ad.wrapR]),A.texParameteri(uc,10240,qh[ad.magFilter]),A.texParameteri(uc,10241,qh[ad.minFilter])):(A.texParameteri(uc,10242,33071),A.texParameteri(uc,10243,33071),32879!==uc&&35866!==uc||A.texParameteri(uc,32882,33071),1001===ad.wrapS&&1001===ad.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),A.texParameteri(uc,
10240,Ya(ad.magFilter)),A.texParameteri(uc,10241,Ya(ad.minFilter)),1003!==ad.minFilter&&1006!==ad.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));!0===D.has("EXT_texture_filter_anisotropic")&&(Vd=D.get("EXT_texture_filter_anisotropic"),1015===ad.type&&!1===D.has("OES_texture_float_linear")||!1===Ld&&1016===ad.type&&!1===D.has("OES_texture_half_float_linear")||!(1<ad.anisotropy||t.get(ad).__currentAnisotropy)||
(A.texParameterf(uc,Vd.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ad.anisotropy,B.getMaxAnisotropy())),t.get(ad).__currentAnisotropy=ad.anisotropy))}function Fc(uc,ad){void 0===uc.__webglInit&&(uc.__webglInit=!0,ad.addEventListener("dispose",ab),uc.__webglTexture=A.createTexture(),M.memory.textures++)}function Sc(uc,ad,Vd){var Pc=3553;ad.isDataTexture2DArray&&(Pc=35866);ad.isDataTexture3D&&(Pc=32879);Fc(uc,ad);r.activeTexture(33984+Vd);r.bindTexture(Pc,uc.__webglTexture);A.pixelStorei(37440,ad.flipY);A.pixelStorei(37441,
ad.premultiplyAlpha);A.pixelStorei(3317,ad.unpackAlignment);A.pixelStorei(37443,0);Vd=Ld?!1:1001!==ad.wrapS||1001!==ad.wrapT||1003!==ad.minFilter&&1006!==ad.minFilter;Vd=Vd&&!1===aa(ad.image);Vd=Z(ad.image,Vd,!1,rf);var Oe=aa(Vd)||Ld,hf=I.convert(ad.format),ig=I.convert(ad.type),mf=Oa(ad.internalFormat,hf,ig);oc(Pc,ad,Oe);var ph=ad.mipmaps;if(ad.isDepthTexture)mf=6402,Ld?mf=1015===ad.type?36012:1014===ad.type?33190:1020===ad.type?35056:33189:1015===ad.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),
1026===ad.format&&6402===mf&&1012!==ad.type&&1014!==ad.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ad.type=1012,ig=I.convert(ad.type)),1027===ad.format&&6402===mf&&(mf=34041,1020!==ad.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ad.type=1020,ig=I.convert(ad.type))),r.texImage2D(3553,0,mf,Vd.width,Vd.height,0,hf,ig,null);else if(ad.isDataTexture)if(0<ph.length&&Oe){for(var uh=
0,bi=ph.length;uh<bi;uh++){var ci=ph[uh];r.texImage2D(3553,uh,mf,ci.width,ci.height,0,hf,ig,ci.data)}ad.generateMipmaps=!1;uc.__maxMipLevel=ph.length-1}else r.texImage2D(3553,0,mf,Vd.width,Vd.height,0,hf,ig,Vd.data),uc.__maxMipLevel=0;else if(ad.isCompressedTexture){uh=0;for(bi=ph.length;uh<bi;uh++)ci=ph[uh],1023!==ad.format&&1022!==ad.format?null!==hf?r.compressedTexImage2D(3553,uh,mf,ci.width,ci.height,0,ci.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):
r.texImage2D(3553,uh,mf,ci.width,ci.height,0,hf,ig,ci.data);uc.__maxMipLevel=ph.length-1}else if(ad.isDataTexture2DArray)r.texImage3D(35866,0,mf,Vd.width,Vd.height,Vd.depth,0,hf,ig,Vd.data),uc.__maxMipLevel=0;else if(ad.isDataTexture3D)r.texImage3D(32879,0,mf,Vd.width,Vd.height,Vd.depth,0,hf,ig,Vd.data),uc.__maxMipLevel=0;else if(0<ph.length&&Oe){uh=0;for(bi=ph.length;uh<bi;uh++)ci=ph[uh],r.texImage2D(3553,uh,mf,hf,ig,ci);ad.generateMipmaps=!1;uc.__maxMipLevel=ph.length-1}else r.texImage2D(3553,0,
mf,hf,ig,Vd),uc.__maxMipLevel=0;oa(ad,Oe)&&wa(Pc,ad,Vd.width,Vd.height);uc.__version=ad.version;if(ad.onUpdate)ad.onUpdate(ad)}function rd(uc,ad,Vd,Pc){var Oe=ad.texture,hf=I.convert(Oe.format),ig=I.convert(Oe.type),mf=Oa(Oe.internalFormat,hf,ig);32879===Pc||35866===Pc?r.texImage3D(Pc,0,mf,ad.width,ad.height,ad.depth,0,hf,ig,null):r.texImage2D(Pc,0,mf,ad.width,ad.height,0,hf,ig,null);A.bindFramebuffer(36160,uc);A.framebufferTexture2D(36160,Vd,Pc,t.get(Oe).__webglTexture,0);A.bindFramebuffer(36160,
null)}function jd(uc,ad,Vd){A.bindRenderbuffer(36161,uc);if(ad.depthBuffer&&!ad.stencilBuffer){var Pc=33189;Vd?((Vd=ad.depthTexture)&&Vd.isDepthTexture&&(1015===Vd.type?Pc=36012:1014===Vd.type&&(Pc=33190)),Vd=Tc(ad),A.renderbufferStorageMultisample(36161,Vd,Pc,ad.width,ad.height)):A.renderbufferStorage(36161,Pc,ad.width,ad.height);A.framebufferRenderbuffer(36160,36096,36161,uc)}else if(ad.depthBuffer&&ad.stencilBuffer)Vd?(Vd=Tc(ad),A.renderbufferStorageMultisample(36161,Vd,35056,ad.width,ad.height)):
A.renderbufferStorage(36161,34041,ad.width,ad.height),A.framebufferRenderbuffer(36160,33306,36161,uc);else{uc=ad.texture;Pc=I.convert(uc.format);var Oe=I.convert(uc.type);uc=Oa(uc.internalFormat,Pc,Oe);Vd?(Vd=Tc(ad),A.renderbufferStorageMultisample(36161,Vd,uc,ad.width,ad.height)):A.renderbufferStorage(36161,uc,ad.width,ad.height)}A.bindRenderbuffer(36161,null)}function Tc(uc){return Ld&&uc.isWebGLMultisampleRenderTarget?Math.min(sd,uc.samples):0}var Uc,qd,Ld=B.isWebGL2,Fd=B.maxTextures,ce=B.maxCubemapSize,
rf=B.maxTextureSize,sd=B.maxSamples,zd=new WeakMap,Td,$f=!1;try{$f="undefined"!==typeof OffscreenCanvas&&null!==(new OffscreenCanvas(1,1)).getContext("2d")}catch(uc){}var Ne=0,bg=(Uc={},Uc[1E3]=10497,Uc[1001]=33071,Uc[1002]=33648,Uc),qh=(qd={},qd[1003]=9728,qd[1004]=9984,qd[1005]=9986,qd[1006]=9729,qd[1007]=9985,qd[1008]=9987,qd),mi=!1,kk=!1;(this||q).allocateTextureUnit=function(){var uc=Ne;uc>=Fd&&console.warn("THREE.WebGLTextures: Trying to use "+uc+" texture units while this GPU supports only "+
Fd);Ne+=1;return uc};(this||q).resetTextureUnits=function(){Ne=0};(this||q).setTexture2D=sb;(this||q).setTexture2DArray=function(uc,ad){var Vd=t.get(uc);0<uc.version&&Vd.__version!==uc.version?Sc(Vd,uc,ad):(r.activeTexture(33984+ad),r.bindTexture(35866,Vd.__webglTexture))};(this||q).setTexture3D=function(uc,ad){var Vd=t.get(uc);0<uc.version&&Vd.__version!==uc.version?Sc(Vd,uc,ad):(r.activeTexture(33984+ad),r.bindTexture(32879,Vd.__webglTexture))};(this||q).setTextureCube=nc;(this||q).setupRenderTarget=
function(uc){var ad=uc.texture,Vd=t.get(uc),Pc=t.get(ad);uc.addEventListener("dispose",zb);Pc.__webglTexture=A.createTexture();M.memory.textures++;var Oe=!0===uc.isWebGLCubeRenderTarget,hf=!0===uc.isWebGLMultisampleRenderTarget,ig=ad.isDataTexture3D||ad.isDataTexture2DArray,mf=aa(uc)||Ld;!Ld||1022!==ad.format||1015!==ad.type&&1016!==ad.type||(ad.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead."));if(Oe)for(Vd.__webglFramebuffer=
[],hf=0;6>hf;hf++)Vd.__webglFramebuffer[hf]=A.createFramebuffer();else if(Vd.__webglFramebuffer=A.createFramebuffer(),hf)if(Ld){Vd.__webglMultisampledFramebuffer=A.createFramebuffer();Vd.__webglColorRenderbuffer=A.createRenderbuffer();A.bindRenderbuffer(36161,Vd.__webglColorRenderbuffer);hf=I.convert(ad.format);var ph=I.convert(ad.type);hf=Oa(ad.internalFormat,hf,ph);ph=Tc(uc);A.renderbufferStorageMultisample(36161,ph,hf,uc.width,uc.height);A.bindFramebuffer(36160,Vd.__webglMultisampledFramebuffer);
A.framebufferRenderbuffer(36160,36064,36161,Vd.__webglColorRenderbuffer);A.bindRenderbuffer(36161,null);uc.depthBuffer&&(Vd.__webglDepthRenderbuffer=A.createRenderbuffer(),jd(Vd.__webglDepthRenderbuffer,uc,!0));A.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Oe){r.bindTexture(34067,Pc.__webglTexture);oc(34067,ad,mf);for(Pc=0;6>Pc;Pc++)rd(Vd.__webglFramebuffer[Pc],uc,36064,34069+Pc);oa(ad,mf)&&wa(34067,ad,uc.width,
uc.height);r.bindTexture(34067,null)}else Oe=3553,ig&&(Ld?Oe=ad.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),r.bindTexture(Oe,Pc.__webglTexture),oc(Oe,ad,mf),rd(Vd.__webglFramebuffer,uc,36064,Oe),oa(ad,mf)&&wa(3553,ad,uc.width,uc.height),r.bindTexture(3553,null);if(uc.depthBuffer){ad=t.get(uc);Vd=!0===uc.isWebGLCubeRenderTarget;if(uc.depthTexture){if(Vd)throw Error("target.depthTexture not supported in Cube render targets");
if(uc&&uc.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");A.bindFramebuffer(36160,ad.__webglFramebuffer);if(!uc.depthTexture||!uc.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");t.get(uc.depthTexture).__webglTexture&&uc.depthTexture.image.width===uc.width&&uc.depthTexture.image.height===uc.height||(uc.depthTexture.image.width=uc.width,uc.depthTexture.image.height=uc.height,uc.depthTexture.needsUpdate=
!0);sb(uc.depthTexture,0);ad=t.get(uc.depthTexture).__webglTexture;if(1026===uc.depthTexture.format)A.framebufferTexture2D(36160,36096,3553,ad,0);else if(1027===uc.depthTexture.format)A.framebufferTexture2D(36160,33306,3553,ad,0);else throw Error("Unknown depthTexture format");}else if(Vd)for(ad.__webglDepthbuffer=[],Vd=0;6>Vd;Vd++)A.bindFramebuffer(36160,ad.__webglFramebuffer[Vd]),ad.__webglDepthbuffer[Vd]=A.createRenderbuffer(),jd(ad.__webglDepthbuffer[Vd],uc,!1);else A.bindFramebuffer(36160,ad.__webglFramebuffer),
ad.__webglDepthbuffer=A.createRenderbuffer(),jd(ad.__webglDepthbuffer,uc,!1);A.bindFramebuffer(36160,null)}};(this||q).updateRenderTargetMipmap=function(uc){var ad=uc.texture,Vd=aa(uc)||Ld;if(oa(ad,Vd)){Vd=uc.isWebGLCubeRenderTarget?34067:3553;var Pc=t.get(ad).__webglTexture;r.bindTexture(Vd,Pc);wa(Vd,ad,uc.width,uc.height);r.bindTexture(Vd,null)}};(this||q).updateMultisampleRenderTarget=function(uc){if(uc.isWebGLMultisampleRenderTarget)if(Ld){var ad=t.get(uc);A.bindFramebuffer(36008,ad.__webglMultisampledFramebuffer);
A.bindFramebuffer(36009,ad.__webglFramebuffer);var Vd=uc.width,Pc=uc.height,Oe=16384;uc.depthBuffer&&(Oe|=256);uc.stencilBuffer&&(Oe|=1024);A.blitFramebuffer(0,0,Vd,Pc,0,0,Vd,Pc,Oe,9728);A.bindFramebuffer(36160,ad.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")};(this||q).safeSetTexture2D=function(uc,ad){uc&&uc.isWebGLRenderTarget&&(!1===mi&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),
mi=!0),uc=uc.texture);sb(uc,ad)};(this||q).safeSetTextureCube=function(uc,ad){uc&&uc.isWebGLCubeRenderTarget&&(!1===kk&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),kk=!0),uc=uc.texture);nc(uc,ad)}}function Ada(A,D,r){var t=r.isWebGL2;return{convert:function(B){if(1009===B)return 5121;if(1017===B)return 32819;if(1018===B)return 32820;if(1019===B)return 33635;if(1010===B)return 5120;if(1011===B)return 5122;
if(1012===B)return 5123;if(1013===B)return 5124;if(1014===B)return 5125;if(1015===B)return 5126;if(1016===B){if(t)return 5131;var I=D.get("OES_texture_half_float");return null!==I?I.HALF_FLOAT_OES:null}if(1021===B)return 6406;if(1022===B)return 6407;if(1023===B)return 6408;if(1024===B)return 6409;if(1025===B)return 6410;if(1026===B)return 6402;if(1027===B)return 34041;if(1028===B)return 6403;if(1029===B)return 36244;if(1030===B)return 33319;if(1031===B)return 33320;if(1032===B)return 36248;if(1033===
B)return 36249;if(33776===B||33777===B||33778===B||33779===B)if(I=D.get("WEBGL_compressed_texture_s3tc"),null!==I){if(33776===B)return I.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===B)return I.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===B)return I.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===B)return I.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(35840===B||35841===B||35842===B||35843===B)if(I=D.get("WEBGL_compressed_texture_pvrtc"),null!==I){if(35840===B)return I.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===
B)return I.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===B)return I.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===B)return I.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(36196===B)return I=D.get("WEBGL_compressed_texture_etc1"),null!==I?I.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===B||37496===B)if(I=D.get("WEBGL_compressed_texture_etc"),null!==I){if(37492===B)return I.COMPRESSED_RGB8_ETC2;if(37496===B)return I.COMPRESSED_RGBA8_ETC2_EAC}if(37808===B||37809===B||37810===B||37811===B||37812===B||37813===
B||37814===B||37815===B||37816===B||37817===B||37818===B||37819===B||37820===B||37821===B||37840===B||37841===B||37842===B||37843===B||37844===B||37845===B||37846===B||37847===B||37848===B||37849===B||37850===B||37851===B||37852===B||37853===B)return I=D.get("WEBGL_compressed_texture_astc"),null!==I?B:null;if(36492===B)return I=D.get("EXT_texture_compression_bptc"),null!==I?B:null;if(1020===B){if(t)return 34042;I=D.get("WEBGL_depth_texture");return null!==I?I.UNSIGNED_INT_24_8_WEBGL:null}}}}function GO(A){void 0===
A&&(A=[]);Nb.call(this||q);(this||q).cameras=A}function OF(){(this||q)._targetRay=null;(this||q)._grip=null;(this||q)._hand=null}function Bda(A,D){function r(Uc){var qd=Ya.get(Uc.inputSource);qd&&qd.dispatchEvent({type:Uc.type,data:Uc.inputSource})}function t(){Ya.forEach(function(Uc,qd){Uc.disconnect(qd)});Ya.clear();Fc=oc=null;A.setFramebuffer(null);A.setRenderTarget(A.getRenderTarget());Tc.stop();M.isPresenting=!1;M.dispatchEvent({type:"sessionend"})}function B(Uc){for(var qd=U.inputSources,Ld=
0;Ld<Oa.length;Ld++)Ya.set(qd[Ld],Oa[Ld]);for(qd=0;qd<Uc.removed.length;qd++){Ld=Uc.removed[qd];var Fd=Ya.get(Ld);Fd&&(Fd.dispatchEvent({type:"disconnected",data:Ld}),Ya.delete(Ld))}for(qd=0;qd<Uc.added.length;qd++)Ld=Uc.added[qd],(Fd=Ya.get(Ld))&&Fd.dispatchEvent({type:"connected",data:Ld})}function I(Uc,qd){null===qd?Uc.matrixWorld.copy(Uc.matrix):Uc.matrixWorld.multiplyMatrices(qd.matrixWorld,Uc.matrix);Uc.matrixWorldInverse.copy(Uc.matrixWorld).invert()}var M=this||q,U=null,Z=1,aa=null,oa="local-floor",
wa=null,Oa=[],Ya=new Map,ab=new Nb;ab.layers.enable(1);ab.viewport=new Xj;var zb=new Nb;zb.layers.enable(2);zb.viewport=new Xj;var sb=[ab,zb],nc=new GO;nc.layers.enable(1);nc.layers.enable(2);var oc=null,Fc=null;(this||q).enabled=!1;(this||q).isPresenting=!1;(this||q).getController=function(Uc){var qd=Oa[Uc];void 0===qd&&(qd=new OF,Oa[Uc]=qd);return qd.getTargetRaySpace()};(this||q).getControllerGrip=function(Uc){var qd=Oa[Uc];void 0===qd&&(qd=new OF,Oa[Uc]=qd);return qd.getGripSpace()};(this||q).getHand=
function(Uc){var qd=Oa[Uc];void 0===qd&&(qd=new OF,Oa[Uc]=qd);return qd.getHandSpace()};(this||q).setFramebufferScaleFactor=function(Uc){Z=Uc;!0===M.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")};(this||q).setReferenceSpaceType=function(Uc){oa=Uc;!0===M.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")};(this||q).getReferenceSpace=function(){return aa};(this||q).getSession=function(){return U};
(this||q).setSession=function(){var Uc=b(a.mark(function Fd(Ld){var ce,rf,sd;return a.wrap(function(zd){for(;;)switch(zd.prev=zd.next){case 0:U=Ld;if(null===U){zd.next=24;break}U.addEventListener("select",r);U.addEventListener("selectstart",r);U.addEventListener("selectend",r);U.addEventListener("squeeze",r);U.addEventListener("squeezestart",r);U.addEventListener("squeezeend",r);U.addEventListener("end",t);U.addEventListener("inputsourceschange",B);ce=D.getContextAttributes();if(!0===ce.xrCompatible){zd.next=
14;break}zd.next=14;return D.makeXRCompatible();case 14:return rf={antialias:ce.antialias,alpha:ce.alpha,depth:ce.depth,stencil:ce.stencil,framebufferScaleFactor:Z},sd=new XRWebGLLayer(U,D,rf),U.updateRenderState({baseLayer:sd}),zd.next=19,U.requestReferenceSpace(oa);case 19:aa=zd.sent,Tc.setContext(U),Tc.start(),M.isPresenting=!0,M.dispatchEvent({type:"sessionstart"});case 24:case "end":return zd.stop()}},Fd)}));return function(Ld){return Uc.apply(this||q,arguments)}}();var Sc=new jc,rd=new jc;(this||
q).getCamera=function(Uc){nc.near=zb.near=ab.near=Uc.near;nc.far=zb.far=ab.far=Uc.far;if(oc!==nc.near||Fc!==nc.far)U.updateRenderState({depthNear:nc.near,depthFar:nc.far}),oc=nc.near,Fc=nc.far;var qd=Uc.parent,Ld=nc.cameras;I(nc,qd);for(var Fd=0;Fd<Ld.length;Fd++)I(Ld[Fd],qd);Uc.matrixWorld.copy(nc.matrixWorld);Uc.matrix.copy(nc.matrix);Uc.matrix.decompose(Uc.position,Uc.quaternion,Uc.scale);Uc=Uc.children;qd=0;for(Fd=Uc.length;qd<Fd;qd++)Uc[qd].updateMatrixWorld(!0);if(2===Ld.length){Sc.setFromMatrixPosition(ab.matrixWorld);
rd.setFromMatrixPosition(zb.matrixWorld);Ld=Sc.distanceTo(rd);var ce=ab.projectionMatrix.elements,rf=zb.projectionMatrix.elements,sd=ce[14]/(ce[10]-1);Uc=ce[14]/(ce[10]+1);qd=(ce[9]+1)/ce[5];Fd=(ce[9]-1)/ce[5];var zd=(ce[8]-1)/ce[0],Td=(rf[8]+1)/rf[0];rf=sd*zd;ce=sd*Td;Td=Ld/(-zd+Td);zd=Td*-zd;ab.matrixWorld.decompose(nc.position,nc.quaternion,nc.scale);nc.translateX(zd);nc.translateZ(Td);nc.matrixWorld.compose(nc.position,nc.quaternion,nc.scale);nc.matrixWorldInverse.copy(nc.matrixWorld).invert();
sd+=Td;Td=Uc+Td;nc.projectionMatrix.makePerspective(rf-zd,ce+(Ld-zd),qd*Uc/Td*sd,Fd*Uc/Td*sd,sd,Td)}else nc.projectionMatrix.copy(ab.projectionMatrix);return nc};var jd=null,Tc=new ld;Tc.setAnimationLoop(function(Uc,qd){wa=qd.getViewerPose(aa);if(null!==wa){var Ld=wa.views,Fd=U.renderState.baseLayer;A.setFramebuffer(Fd.framebuffer);var ce=!1;Ld.length!==nc.cameras.length&&(nc.cameras.length=0,ce=!0);for(var rf=0;rf<Ld.length;rf++){var sd=Ld[rf],zd=Fd.getViewport(sd),Td=sb[rf];Td.matrix.fromArray(sd.transform.matrix);
Td.projectionMatrix.fromArray(sd.projectionMatrix);Td.viewport.set(zd.x,zd.y,zd.width,zd.height);0===rf&&nc.matrix.copy(Td.matrix);!0===ce&&nc.cameras.push(Td)}}Ld=U.inputSources;for(Fd=0;Fd<Oa.length;Fd++)Oa[Fd].update(Ld[Fd],qd,aa);jd&&jd(Uc,qd)});(this||q).setAnimationLoop=function(Uc){jd=Uc};(this||q).dispose=function(){}}function vya(A){function D(t,B){t.opacity.value=B.opacity;B.color&&t.diffuse.value.copy(B.color);B.emissive&&t.emissive.value.copy(B.emissive).multiplyScalar(B.emissiveIntensity);
B.map&&(t.map.value=B.map);B.alphaMap&&(t.alphaMap.value=B.alphaMap);B.specularMap&&(t.specularMap.value=B.specularMap);var I=A.get(B).envMap;I&&(t.envMap.value=I,t.flipEnvMap.value=I.isCubeTexture&&I._needsFlipEnvMap?-1:1,t.reflectivity.value=B.reflectivity,t.refractionRatio.value=B.refractionRatio,I=A.get(I).__maxMipLevel,void 0!==I&&(t.maxMipLevel.value=I));B.lightMap&&(t.lightMap.value=B.lightMap,t.lightMapIntensity.value=B.lightMapIntensity);B.aoMap&&(t.aoMap.value=B.aoMap,t.aoMapIntensity.value=
B.aoMapIntensity);if(B.map)var M=B.map;else B.specularMap?M=B.specularMap:B.displacementMap?M=B.displacementMap:B.normalMap?M=B.normalMap:B.bumpMap?M=B.bumpMap:B.roughnessMap?M=B.roughnessMap:B.metalnessMap?M=B.metalnessMap:B.alphaMap?M=B.alphaMap:B.emissiveMap?M=B.emissiveMap:B.clearcoatMap?M=B.clearcoatMap:B.clearcoatNormalMap?M=B.clearcoatNormalMap:B.clearcoatRoughnessMap&&(M=B.clearcoatRoughnessMap);void 0!==M&&(M.isWebGLRenderTarget&&(M=M.texture),!0===M.matrixAutoUpdate&&M.updateMatrix(),t.uvTransform.value.copy(M.matrix));
if(B.aoMap)var U=B.aoMap;else B.lightMap&&(U=B.lightMap);void 0!==U&&(U.isWebGLRenderTarget&&(U=U.texture),!0===U.matrixAutoUpdate&&U.updateMatrix(),t.uv2Transform.value.copy(U.matrix))}function r(t,B){t.roughness.value=B.roughness;t.metalness.value=B.metalness;B.roughnessMap&&(t.roughnessMap.value=B.roughnessMap);B.metalnessMap&&(t.metalnessMap.value=B.metalnessMap);B.emissiveMap&&(t.emissiveMap.value=B.emissiveMap);B.bumpMap&&(t.bumpMap.value=B.bumpMap,t.bumpScale.value=B.bumpScale,1===B.side&&
(t.bumpScale.value*=-1));B.normalMap&&(t.normalMap.value=B.normalMap,t.normalScale.value.copy(B.normalScale),1===B.side&&t.normalScale.value.negate());B.displacementMap&&(t.displacementMap.value=B.displacementMap,t.displacementScale.value=B.displacementScale,t.displacementBias.value=B.displacementBias);A.get(B).envMap&&(t.envMapIntensity.value=B.envMapIntensity)}return{refreshFogUniforms:function(t,B){t.fogColor.value.copy(B.color);B.isFog?(t.fogNear.value=B.near,t.fogFar.value=B.far):B.isFogExp2&&
(t.fogDensity.value=B.density)},refreshMaterialUniforms:function(t,B,I,M){if(B.isMeshBasicMaterial)D(t,B);else if(B.isMeshLambertMaterial)D(t,B),B.emissiveMap&&(t.emissiveMap.value=B.emissiveMap);else if(B.isMeshToonMaterial)D(t,B),B.gradientMap&&(t.gradientMap.value=B.gradientMap),B.emissiveMap&&(t.emissiveMap.value=B.emissiveMap),B.bumpMap&&(t.bumpMap.value=B.bumpMap,t.bumpScale.value=B.bumpScale,1===B.side&&(t.bumpScale.value*=-1)),B.normalMap&&(t.normalMap.value=B.normalMap,t.normalScale.value.copy(B.normalScale),
1===B.side&&t.normalScale.value.negate()),B.displacementMap&&(t.displacementMap.value=B.displacementMap,t.displacementScale.value=B.displacementScale,t.displacementBias.value=B.displacementBias);else if(B.isMeshPhongMaterial)D(t,B),t.specular.value.copy(B.specular),t.shininess.value=Math.max(B.shininess,1E-4),B.emissiveMap&&(t.emissiveMap.value=B.emissiveMap),B.bumpMap&&(t.bumpMap.value=B.bumpMap,t.bumpScale.value=B.bumpScale,1===B.side&&(t.bumpScale.value*=-1)),B.normalMap&&(t.normalMap.value=B.normalMap,
t.normalScale.value.copy(B.normalScale),1===B.side&&t.normalScale.value.negate()),B.displacementMap&&(t.displacementMap.value=B.displacementMap,t.displacementScale.value=B.displacementScale,t.displacementBias.value=B.displacementBias);else if(B.isMeshStandardMaterial)D(t,B),B.isMeshPhysicalMaterial?(r(t,B),t.reflectivity.value=B.reflectivity,t.clearcoat.value=B.clearcoat,t.clearcoatRoughness.value=B.clearcoatRoughness,B.sheen&&t.sheen.value.copy(B.sheen),B.clearcoatMap&&(t.clearcoatMap.value=B.clearcoatMap),
B.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=B.clearcoatRoughnessMap),B.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(B.clearcoatNormalScale),t.clearcoatNormalMap.value=B.clearcoatNormalMap,1===B.side&&t.clearcoatNormalScale.value.negate()),t.transmission.value=B.transmission,B.transmissionMap&&(t.transmissionMap.value=B.transmissionMap)):r(t,B);else if(B.isMeshMatcapMaterial)D(t,B),B.matcap&&(t.matcap.value=B.matcap),B.bumpMap&&(t.bumpMap.value=B.bumpMap,t.bumpScale.value=B.bumpScale,
1===B.side&&(t.bumpScale.value*=-1)),B.normalMap&&(t.normalMap.value=B.normalMap,t.normalScale.value.copy(B.normalScale),1===B.side&&t.normalScale.value.negate()),B.displacementMap&&(t.displacementMap.value=B.displacementMap,t.displacementScale.value=B.displacementScale,t.displacementBias.value=B.displacementBias);else if(B.isMeshDepthMaterial)D(t,B),B.displacementMap&&(t.displacementMap.value=B.displacementMap,t.displacementScale.value=B.displacementScale,t.displacementBias.value=B.displacementBias);
else if(B.isMeshDistanceMaterial)D(t,B),B.displacementMap&&(t.displacementMap.value=B.displacementMap,t.displacementScale.value=B.displacementScale,t.displacementBias.value=B.displacementBias),t.referencePosition.value.copy(B.referencePosition),t.nearDistance.value=B.nearDistance,t.farDistance.value=B.farDistance;else if(B.isMeshNormalMaterial)D(t,B),B.bumpMap&&(t.bumpMap.value=B.bumpMap,t.bumpScale.value=B.bumpScale,1===B.side&&(t.bumpScale.value*=-1)),B.normalMap&&(t.normalMap.value=B.normalMap,
t.normalScale.value.copy(B.normalScale),1===B.side&&t.normalScale.value.negate()),B.displacementMap&&(t.displacementMap.value=B.displacementMap,t.displacementScale.value=B.displacementScale,t.displacementBias.value=B.displacementBias);else if(B.isLineBasicMaterial)t.diffuse.value.copy(B.color),t.opacity.value=B.opacity,B.isLineDashedMaterial&&(t.dashSize.value=B.dashSize,t.totalSize.value=B.dashSize+B.gapSize,t.scale.value=B.scale);else if(B.isPointsMaterial){t.diffuse.value.copy(B.color);t.opacity.value=
B.opacity;t.size.value=B.size*I;t.scale.value=.5*M;B.map&&(t.map.value=B.map);B.alphaMap&&(t.alphaMap.value=B.alphaMap);if(B.map)var U=B.map;else B.alphaMap&&(U=B.alphaMap);void 0!==U&&(!0===U.matrixAutoUpdate&&U.updateMatrix(),t.uvTransform.value.copy(U.matrix))}else if(B.isSpriteMaterial){t.diffuse.value.copy(B.color);t.opacity.value=B.opacity;t.rotation.value=B.rotation;B.map&&(t.map.value=B.map);B.alphaMap&&(t.alphaMap.value=B.alphaMap);if(B.map)var Z=B.map;else B.alphaMap&&(Z=B.alphaMap);void 0!==
Z&&(!0===Z.matrixAutoUpdate&&Z.updateMatrix(),t.uvTransform.value.copy(Z.matrix))}else B.isShadowMaterial?(t.color.value.copy(B.color),t.opacity.value=B.opacity):B.isShaderMaterial&&(B.uniformsNeedUpdate=!1)}}}function wya(){var A=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");A.style.display="block";return A}function lk(A){function D(gc,be){for(var Yd=0;Yd<gc.length;Yd++){var qe=Ya.getContext(gc[Yd],be);if(null!==qe)return qe}return null}function r(){Xg=new Ad(de);Nh=new Cb(de,
Xg,A);Xg.init(Nh);Pq=new Ada(de,Xg,Nh);Yg=new tya(de,Xg,Nh);Yg.scissor(mi.copy(ig).multiplyScalar(Vd).floor());Yg.viewport(qh.copy(hf).multiplyScalar(Vd).floor());Lj=new Me(de);Mj=new Yc;lj=new uya(de,Xg,Yg,Mj,Nh,Pq,Lj);Mn=new Bd(Fd);Qq=new Od(de,Nh);lo=new Pa(de,Xg,Qq,Nh);PF=new Mc(de,Qq,Lj,lo);wB=new Fi(de,PF,Qq,Lj);Cda=new Oi(de);Rq=new ec(Mj);jy=new Jb(Fd,Mn,Xg,Nh,lo,Rq);xY=new vya(Mj);HO=new zf(Mj);IO=new $V(Xg,Nh);gv=new ta(Fd,Mn,Yg,wB,Fc);Dda=new Ra(de,Xg,Lj,Nh);Eda=new Ue(de,Xg,Lj,Nh);Lj.programs=
jy.programs;Fd.capabilities=Nh;Fd.extensions=Xg;Fd.properties=Mj;Fd.renderLists=HO;Fd.state=Yg;Fd.info=Lj}function t(gc){gc.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");ce=!0}function B(){console.log("THREE.WebGLRenderer: Context Restored.");ce=!1;r()}function I(gc){gc=gc.target;gc.removeEventListener("dispose",I);M(gc);Mj.remove(gc)}function M(gc){gc=Mj.get(gc).program;void 0!==gc&&jy.releaseProgram(gc)}function U(gc,be){gc.render(function(Yd){Fd.renderBufferImmediate(Yd,be)})}
function Z(gc,be,Yd,qe){if(!1!==gc.visible){if(gc.layers.test(be.layers))if(gc.isGroup)Yd=gc.renderOrder;else if(gc.isLOD)!0===gc.autoUpdate&&gc.update(be);else if(gc.isLight)Uc.pushLight(gc),gc.castShadow&&Uc.pushShadow(gc);else if(gc.isSprite){if(!gc.frustumCulled||ph.intersectsSprite(gc)){qe&&kj.setFromMatrixPosition(gc.matrixWorld).applyMatrix4(ci);var uf=wB.update(gc),Wf=gc.material;Wf.visible&&Tc.push(gc,uf,Wf,Yd,kj.z,null)}}else if(gc.isImmediateRenderObject)qe&&kj.setFromMatrixPosition(gc.matrixWorld).applyMatrix4(ci),
Tc.push(gc,null,gc.material,Yd,kj.z,null);else if(gc.isMesh||gc.isLine||gc.isPoints)if(gc.isSkinnedMesh&&gc.skeleton.frame!==Lj.render.frame&&(gc.skeleton.update(),gc.skeleton.frame=Lj.render.frame),!gc.frustumCulled||ph.intersectsObject(gc))if(qe&&kj.setFromMatrixPosition(gc.matrixWorld).applyMatrix4(ci),uf=wB.update(gc),Wf=gc.material,Array.isArray(Wf))for(var yg=uf.groups,Ti=0,Ii=yg.length;Ti<Ii;Ti++){var hl=yg[Ti],mj=Wf[hl.materialIndex];mj&&mj.visible&&Tc.push(gc,uf,mj,Yd,kj.z,hl)}else Wf.visible&&
Tc.push(gc,uf,Wf,Yd,kj.z,null);gc=gc.children;uf=0;for(Wf=gc.length;uf<Wf;uf++)Z(gc[uf],be,Yd,qe)}}function aa(gc,be,Yd){for(var qe=!0===be.isScene?be.overrideMaterial:null,uf=0,Wf=gc.length;uf<Wf;uf++){var yg=gc[uf],Ti=yg.object,Ii=yg.geometry,hl=null===qe?yg.material:qe;yg=yg.group;if(Yd.isArrayCamera)for(var mj=Yd.cameras,Sq=0,QF=mj.length;Sq<QF;Sq++){var xB=mj[Sq];Ti.layers.test(xB.layers)&&(Yg.viewport(qh.copy(xB.viewport)),Uc.setupLightsView(xB),oa(Ti,be,xB,Ii,hl,yg))}else oa(Ti,be,Yd,Ii,hl,
yg)}}function oa(gc,be,Yd,qe,uf,Wf){gc.onBeforeRender(Fd,be,Yd,qe,uf,Wf);gc.modelViewMatrix.multiplyMatrices(Yd.matrixWorldInverse,gc.matrixWorld);gc.normalMatrix.getNormalMatrix(gc.modelViewMatrix);if(gc.isImmediateRenderObject){var yg=Oa(Yd,be,uf,gc);Yg.setMaterial(uf);lo.reset();U(gc,yg)}else Fd.renderBufferDirect(Yd,be,qe,uf,gc,Wf);gc.onAfterRender(Fd,be,Yd,qe,uf,Wf)}function wa(gc,be,Yd){!0!==be.isScene&&(be=Wg);var qe=Mj.get(gc),uf=Uc.state.lights,Wf=uf.state.version;Yd=jy.getParameters(gc,
uf.state,Uc.state.shadowsArray,be,Yd);var yg=jy.getProgramCacheKey(Yd),Ti=qe.program,Ii=!0;qe.environment=gc.isMeshStandardMaterial?be.environment:null;qe.fog=be.fog;qe.envMap=Mn.get(gc.envMap||qe.environment);if(void 0===Ti)gc.addEventListener("dispose",I);else if(Ti.cacheKey!==yg)M(gc);else{if(qe.lightsStateVersion===Wf&&void 0!==Yd.shaderID)return;Ii=!1}Ii&&(Yd.uniforms=jy.getUniforms(gc),gc.onBeforeCompile(Yd,Fd),Ti=jy.acquireProgram(Yd,yg),qe.program=Ti,qe.uniforms=Yd.uniforms,qe.outputEncoding=
Yd.outputEncoding);be=qe.uniforms;if(!gc.isShaderMaterial&&!gc.isRawShaderMaterial||!0===gc.clipping)qe.numClippingPlanes=Rq.numPlanes,qe.numIntersection=Rq.numIntersection,be.clippingPlanes=Rq.uniform;qe.needsLights=gc.isMeshLambertMaterial||gc.isMeshToonMaterial||gc.isMeshPhongMaterial||gc.isMeshStandardMaterial||gc.isShadowMaterial||gc.isShaderMaterial&&!0===gc.lights;qe.lightsStateVersion=Wf;qe.needsLights&&(be.ambientLightColor.value=uf.state.ambient,be.lightProbe.value=uf.state.probe,be.directionalLights.value=
uf.state.directional,be.directionalLightShadows.value=uf.state.directionalShadow,be.spotLights.value=uf.state.spot,be.spotLightShadows.value=uf.state.spotShadow,be.rectAreaLights.value=uf.state.rectArea,be.ltc_1.value=uf.state.rectAreaLTC1,be.ltc_2.value=uf.state.rectAreaLTC2,be.pointLights.value=uf.state.point,be.pointLightShadows.value=uf.state.pointShadow,be.hemisphereLights.value=uf.state.hemi,be.directionalShadowMap.value=uf.state.directionalShadowMap,be.directionalShadowMatrix.value=uf.state.directionalShadowMatrix,
be.spotShadowMap.value=uf.state.spotShadowMap,be.spotShadowMatrix.value=uf.state.spotShadowMatrix,be.pointShadowMap.value=uf.state.pointShadowMap,be.pointShadowMatrix.value=uf.state.pointShadowMatrix);gc=qe.program.getUniforms();gc=Or.seqWithValue(gc.seq,be);qe.uniformsList=gc}function Oa(gc,be,Yd,qe){!0!==be.isScene&&(be=Wg);lj.resetTextureUnits();var uf=be.fog,Wf=Yd.isMeshStandardMaterial?be.environment:null,yg=null===Td?Fd.outputEncoding:Td.texture.encoding,Ti=Mn.get(Yd.envMap||Wf),Ii=Mj.get(Yd),
hl=Uc.state.lights;!0!==uh||!0!==bi&&gc===bg||Rq.setState(Yd,gc,gc===bg&&Yd.id===Ne);Yd.version===Ii.__version?Yd.fog&&Ii.fog!==uf?wa(Yd,be,qe):Ii.environment!==Wf?wa(Yd,be,qe):Ii.needsLights&&Ii.lightsStateVersion!==hl.state.version?wa(Yd,be,qe):void 0===Ii.numClippingPlanes||Ii.numClippingPlanes===Rq.numPlanes&&Ii.numIntersection===Rq.numIntersection?Ii.outputEncoding!==yg?wa(Yd,be,qe):Ii.envMap!==Ti&&wa(Yd,be,qe):wa(Yd,be,qe):(wa(Yd,be,qe),Ii.__version=Yd.version);var mj=!1;hl=Ti=!1;be=Ii.program;
Wf=be.getUniforms();yg=Ii.uniforms;Yg.useProgram(be.program)&&(hl=Ti=mj=!0);Yd.id!==Ne&&(Ne=Yd.id,Ti=!0);if(mj||bg!==gc){Wf.setValue(de,"projectionMatrix",gc.projectionMatrix);Nh.logarithmicDepthBuffer&&Wf.setValue(de,"logDepthBufFC",2/(Math.log(gc.far+1)/Math.LN2));bg!==gc&&(bg=gc,hl=Ti=!0);if(Yd.isShaderMaterial||Yd.isMeshPhongMaterial||Yd.isMeshToonMaterial||Yd.isMeshStandardMaterial||Yd.envMap)mj=Wf.map.cameraPosition,void 0!==mj&&mj.setValue(de,kj.setFromMatrixPosition(gc.matrixWorld));(Yd.isMeshPhongMaterial||
Yd.isMeshToonMaterial||Yd.isMeshLambertMaterial||Yd.isMeshBasicMaterial||Yd.isMeshStandardMaterial||Yd.isShaderMaterial)&&Wf.setValue(de,"isOrthographic",!0===gc.isOrthographicCamera);(Yd.isMeshPhongMaterial||Yd.isMeshToonMaterial||Yd.isMeshLambertMaterial||Yd.isMeshBasicMaterial||Yd.isMeshStandardMaterial||Yd.isShaderMaterial||Yd.isShadowMaterial||Yd.skinning)&&Wf.setValue(de,"viewMatrix",gc.matrixWorldInverse)}if(Yd.skinning&&(Wf.setOptional(de,qe,"bindMatrix"),Wf.setOptional(de,qe,"bindMatrixInverse"),
gc=qe.skeleton))if(mj=gc.bones,Nh.floatVertexTextures){if(null===gc.boneTexture){mj=Math.sqrt(4*mj.length);mj=oh.ceilPowerOfTwo(mj);mj=Math.max(mj,4);var Sq=new Float32Array(mj*mj*4);Sq.set(gc.boneMatrices);var QF=new yB(Sq,mj,mj,1023,1015);gc.boneMatrices=Sq;gc.boneTexture=QF;gc.boneTextureSize=mj}Wf.setValue(de,"boneTexture",gc.boneTexture,lj);Wf.setValue(de,"boneTextureSize",gc.boneTextureSize)}else Wf.setOptional(de,gc,"boneMatrices");if(Ti||Ii.receiveShadow!==qe.receiveShadow)Ii.receiveShadow=
qe.receiveShadow,Wf.setValue(de,"receiveShadow",qe.receiveShadow);Ti&&(Wf.setValue(de,"toneMappingExposure",Fd.toneMappingExposure),Ii.needsLights&&(gc=hl,yg.ambientLightColor.needsUpdate=gc,yg.lightProbe.needsUpdate=gc,yg.directionalLights.needsUpdate=gc,yg.directionalLightShadows.needsUpdate=gc,yg.pointLights.needsUpdate=gc,yg.pointLightShadows.needsUpdate=gc,yg.spotLights.needsUpdate=gc,yg.spotLightShadows.needsUpdate=gc,yg.rectAreaLights.needsUpdate=gc,yg.hemisphereLights.needsUpdate=gc),uf&&
Yd.fog&&xY.refreshFogUniforms(yg,uf),xY.refreshMaterialUniforms(yg,Yd,Vd,ad),Or.upload(de,Ii.uniformsList,yg,lj));Yd.isShaderMaterial&&!0===Yd.uniformsNeedUpdate&&(Or.upload(de,Ii.uniformsList,yg,lj),Yd.uniformsNeedUpdate=!1);Yd.isSpriteMaterial&&Wf.setValue(de,"center",qe.center);Wf.setValue(de,"modelViewMatrix",qe.modelViewMatrix);Wf.setValue(de,"normalMatrix",qe.normalMatrix);Wf.setValue(de,"modelMatrix",qe.matrixWorld);return be}A=A||{};var Ya=void 0!==A.canvas?A.canvas:wya(),ab=void 0!==A.context?
A.context:null,zb=void 0!==A.alpha?A.alpha:!1,sb=void 0!==A.depth?A.depth:!0,nc=void 0!==A.stencil?A.stencil:!0,oc=void 0!==A.antialias?A.antialias:!1,Fc=void 0!==A.premultipliedAlpha?A.premultipliedAlpha:!0,Sc=void 0!==A.preserveDrawingBuffer?A.preserveDrawingBuffer:!1,rd=void 0!==A.powerPreference?A.powerPreference:"default",jd=void 0!==A.failIfMajorPerformanceCaveat?A.failIfMajorPerformanceCaveat:!1,Tc=null,Uc=null,qd=[],Ld=[];(this||q).domElement=Ya;(this||q).debug={checkShaderErrors:!0};(this||
q).autoClear=!0;(this||q).autoClearColor=!0;(this||q).autoClearDepth=!0;(this||q).autoClearStencil=!0;(this||q).sortObjects=!0;(this||q).clippingPlanes=[];(this||q).localClippingEnabled=!1;(this||q).gammaFactor=2;(this||q).outputEncoding=3E3;(this||q).physicallyCorrectLights=!1;(this||q).toneMapping=0;(this||q).toneMappingExposure=1;(this||q).maxMorphTargets=8;(this||q).maxMorphNormals=4;var Fd=this||q,ce=!1,rf=null,sd=0,zd=0,Td=null,$f=null,Ne=-1,bg=null,qh=new Xj,mi=new Xj,kk=null,uc=Ya.width,ad=
Ya.height,Vd=1,Pc=null,Oe=null,hf=new Xj(0,0,uc,ad),ig=new Xj(0,0,uc,ad),mf=!1,ph=new NF,uh=!1,bi=!1,ci=new Fg,kj=new jc,Wg={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},de=ab;try{ab={alpha:zb,depth:sb,stencil:nc,antialias:oc,premultipliedAlpha:Fc,preserveDrawingBuffer:Sc,powerPreference:rd,failIfMajorPerformanceCaveat:jd};Ya.addEventListener("webglcontextlost",t,!1);Ya.addEventListener("webglcontextrestored",B,!1);if(null===de&&(zb=["webgl2","webgl","experimental-webgl"],
!0===Fd.isWebGL1Renderer&&zb.shift(),de=D(zb,ab),null===de)){if(D(zb))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.");}void 0===de.getShaderPrecisionFormat&&(de.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(gc){throw console.error("THREE.WebGLRenderer: "+gc.message),gc;}var Xg,Nh,Yg,Lj,Mj,lj,Mn,Qq,PF,wB,jy,xY,HO,IO,Rq,gv,Cda,Dda,Eda,Pq,lo;r();var hv=new Bda(Fd,de);(this||q).xr=hv;var Fda=
new zda(Fd,wB,Nh.maxTextureSize);(this||q).shadowMap=Fda;(this||q).getContext=function(){return de};(this||q).getContextAttributes=function(){return de.getContextAttributes()};(this||q).forceContextLoss=function(){var gc=Xg.get("WEBGL_lose_context");gc&&gc.loseContext()};(this||q).forceContextRestore=function(){var gc=Xg.get("WEBGL_lose_context");gc&&gc.restoreContext()};(this||q).getPixelRatio=function(){return Vd};(this||q).setPixelRatio=function(gc){void 0!==gc&&(Vd=gc,this.setSize(uc,ad,!1))};
(this||q).getSize=function(gc){void 0===gc&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),gc=new Ye);return gc.set(uc,ad)};(this||q).setSize=function(gc,be,Yd){hv.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(uc=gc,ad=be,Ya.width=Math.floor(gc*Vd),Ya.height=Math.floor(be*Vd),!1!==Yd&&(Ya.style.width=gc+"px",Ya.style.height=be+"px"),this.setViewport(0,0,gc,be))};(this||q).getDrawingBufferSize=function(gc){void 0===
gc&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),gc=new Ye);return gc.set(uc*Vd,ad*Vd).floor()};(this||q).setDrawingBufferSize=function(gc,be,Yd){uc=gc;ad=be;Vd=Yd;Ya.width=Math.floor(gc*Yd);Ya.height=Math.floor(be*Yd);this.setViewport(0,0,gc,be)};(this||q).getCurrentViewport=function(gc){void 0===gc&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),gc=new Xj);return gc.copy(qh)};(this||q).getViewport=function(gc){return gc.copy(hf)};
(this||q).setViewport=function(gc,be,Yd,qe){gc.isVector4?hf.set(gc.x,gc.y,gc.z,gc.w):hf.set(gc,be,Yd,qe);Yg.viewport(qh.copy(hf).multiplyScalar(Vd).floor())};(this||q).getScissor=function(gc){return gc.copy(ig)};(this||q).setScissor=function(gc,be,Yd,qe){gc.isVector4?ig.set(gc.x,gc.y,gc.z,gc.w):ig.set(gc,be,Yd,qe);Yg.scissor(mi.copy(ig).multiplyScalar(Vd).floor())};(this||q).getScissorTest=function(){return mf};(this||q).setScissorTest=function(gc){Yg.setScissorTest(mf=gc)};(this||q).setOpaqueSort=
function(gc){Pc=gc};(this||q).setTransparentSort=function(gc){Oe=gc};(this||q).getClearColor=function(gc){void 0===gc&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),gc=new Zf);return gc.copy(gv.getClearColor())};(this||q).setClearColor=function(){gv.setClearColor.apply(gv,arguments)};(this||q).getClearAlpha=function(){return gv.getClearAlpha()};(this||q).setClearAlpha=function(){gv.setClearAlpha.apply(gv,arguments)};(this||q).clear=function(gc,be,Yd){var qe=
0;if(void 0===gc||gc)qe|=16384;if(void 0===be||be)qe|=256;if(void 0===Yd||Yd)qe|=1024;de.clear(qe)};(this||q).clearColor=function(){this.clear(!0,!1,!1)};(this||q).clearDepth=function(){this.clear(!1,!0,!1)};(this||q).clearStencil=function(){this.clear(!1,!1,!0)};(this||q).dispose=function(){Ya.removeEventListener("webglcontextlost",t,!1);Ya.removeEventListener("webglcontextrestored",B,!1);HO.dispose();IO.dispose();Mj.dispose();Mn.dispose();wB.dispose();lo.dispose();hv.dispose();RF.stop()};(this||
q).renderBufferImmediate=function(gc,be){lo.initAttributes();var Yd=Mj.get(gc);gc.hasPositions&&!Yd.position&&(Yd.position=de.createBuffer());gc.hasNormals&&!Yd.normal&&(Yd.normal=de.createBuffer());gc.hasUvs&&!Yd.uv&&(Yd.uv=de.createBuffer());gc.hasColors&&!Yd.color&&(Yd.color=de.createBuffer());be=be.getAttributes();gc.hasPositions&&(de.bindBuffer(34962,Yd.position),de.bufferData(34962,gc.positionArray,35048),lo.enableAttribute(be.position),de.vertexAttribPointer(be.position,3,5126,!1,0,0));gc.hasNormals&&
(de.bindBuffer(34962,Yd.normal),de.bufferData(34962,gc.normalArray,35048),lo.enableAttribute(be.normal),de.vertexAttribPointer(be.normal,3,5126,!1,0,0));gc.hasUvs&&(de.bindBuffer(34962,Yd.uv),de.bufferData(34962,gc.uvArray,35048),lo.enableAttribute(be.uv),de.vertexAttribPointer(be.uv,2,5126,!1,0,0));gc.hasColors&&(de.bindBuffer(34962,Yd.color),de.bufferData(34962,gc.colorArray,35048),lo.enableAttribute(be.color),de.vertexAttribPointer(be.color,3,5126,!1,0,0));lo.disableUnusedAttributes();de.drawArrays(4,
0,gc.count);gc.count=0};(this||q).renderBufferDirect=function(gc,be,Yd,qe,uf,Wf){null===be&&(be=Wg);var yg=uf.isMesh&&0>uf.matrixWorld.determinant();gc=Oa(gc,be,qe,uf);Yg.setMaterial(qe,yg);yg=Yd.index;be=Yd.attributes.position;if(null===yg){if(void 0===be||0===be.count)return}else if(0===yg.count)return;var Ti=1;!0===qe.wireframe&&(yg=PF.getWireframeAttribute(Yd),Ti=2);(qe.morphTargets||qe.morphNormals)&&Cda.update(uf,Yd,qe,gc);lo.setup(uf,qe,gc,Yd,yg);gc=Dda;if(null!==yg){var Ii=Qq.get(yg);gc=Eda;
gc.setIndex(Ii)}var hl=Yd.drawRange.start*Ti,mj=null!==Wf?Wf.start*Ti:0;Ii=Math.max(hl,mj);Wf=Math.max(0,Math.min(null!==yg?yg.count:be.count,hl+Yd.drawRange.count*Ti,mj+(null!==Wf?Wf.count*Ti:Infinity))-1-Ii+1);0!==Wf&&(uf.isMesh?!0===qe.wireframe?(Yg.setLineWidth(qe.wireframeLinewidth*(null===Td?Vd:1)),gc.setMode(1)):gc.setMode(4):uf.isLine?(qe=qe.linewidth,void 0===qe&&(qe=1),Yg.setLineWidth(qe*(null===Td?Vd:1)),uf.isLineSegments?gc.setMode(1):uf.isLineLoop?gc.setMode(2):gc.setMode(3)):uf.isPoints?
gc.setMode(0):uf.isSprite&&gc.setMode(4),uf.isInstancedMesh?gc.renderInstances(Ii,Wf,uf.count):Yd.isInstancedBufferGeometry?gc.renderInstances(Ii,Wf,Math.min(Yd.instanceCount,Yd._maxInstanceCount)):gc.render(Ii,Wf))};(this||q).compile=function(gc,be){Uc=IO.get(gc);Uc.init();gc.traverseVisible(function(qe){qe.isLight&&qe.layers.test(be.layers)&&(Uc.pushLight(qe),qe.castShadow&&Uc.pushShadow(qe))});Uc.setupLights();var Yd=new WeakMap;gc.traverse(function(qe){var uf=qe.material;if(uf)if(Array.isArray(uf))for(var Wf=
0;Wf<uf.length;Wf++){var yg=uf[Wf];!1===Yd.has(yg)&&(wa(yg,gc,qe),Yd.set(yg))}else!1===Yd.has(uf)&&(wa(uf,gc,qe),Yd.set(uf))})};var yY=null,RF=new ld;RF.setAnimationLoop(function(gc){hv.isPresenting||yY&&yY(gc)});"undefined"!==typeof window&&RF.setContext(window);(this||q).setAnimationLoop=function(gc){yY=gc;hv.setAnimationLoop(gc);null===gc?RF.stop():RF.start()};(this||q).render=function(gc,be,Yd,qe){if(void 0!==Yd){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");
var uf=Yd}if(void 0!==qe){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var Wf=qe}if(void 0!==be&&!0!==be.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!0!==ce){lo.resetDefaultState();Ne=-1;bg=null;!0===gc.autoUpdate&&gc.updateMatrixWorld();null===be.parent&&be.updateMatrixWorld();!0===hv.enabled&&!0===hv.isPresenting&&(be=hv.getCamera(be));if(!0===gc.isScene)gc.onBeforeRender(Fd,
gc,be,uf||Td);Uc=IO.get(gc,Ld.length);Uc.init();Ld.push(Uc);ci.multiplyMatrices(be.projectionMatrix,be.matrixWorldInverse);ph.setFromProjectionMatrix(ci);bi=(this||q).localClippingEnabled;uh=Rq.init((this||q).clippingPlanes,bi,be);Tc=HO.get(gc,qd.length);Tc.init();qd.push(Tc);Z(gc,be,0,Fd.sortObjects);Tc.finish();!0===Fd.sortObjects&&Tc.sort(Pc,Oe);!0===uh&&Rq.beginShadows();Fda.render(Uc.state.shadowsArray,gc,be);Uc.setupLights();Uc.setupLightsView(be);!0===uh&&Rq.endShadows();!0===(this||q).info.autoReset&&
(this||q).info.reset();void 0!==uf&&this.setRenderTarget(uf);gv.render(Tc,gc,be,Wf);Yd=Tc.opaque;qe=Tc.transparent;0<Yd.length&&aa(Yd,gc,be);0<qe.length&&aa(qe,gc,be);if(!0===gc.isScene)gc.onAfterRender(Fd,gc,be);null!==Td&&(lj.updateRenderTargetMipmap(Td),lj.updateMultisampleRenderTarget(Td));Yg.buffers.depth.setTest(!0);Yg.buffers.depth.setMask(!0);Yg.buffers.color.setMask(!0);Yg.setPolygonOffset(!1);Ld.pop();Uc=0<Ld.length?Ld[Ld.length-1]:null;qd.pop();Tc=0<qd.length?qd[qd.length-1]:null}};(this||
q).setFramebuffer=function(gc){rf!==gc&&null===Td&&de.bindFramebuffer(36160,gc);rf=gc};(this||q).getActiveCubeFace=function(){return sd};(this||q).getActiveMipmapLevel=function(){return zd};(this||q).getRenderTarget=function(){return Td};(this||q).setRenderTarget=function(gc,be,Yd){void 0===be&&(be=0);void 0===Yd&&(Yd=0);Td=gc;sd=be;zd=Yd;gc&&void 0===Mj.get(gc).__webglFramebuffer&&lj.setupRenderTarget(gc);var qe=rf,uf=!1,Wf=!1;if(gc){qe=gc.texture;if(qe.isDataTexture3D||qe.isDataTexture2DArray)Wf=
!0;qe=Mj.get(gc).__webglFramebuffer;gc.isWebGLCubeRenderTarget?(qe=qe[be],uf=!0):qe=gc.isWebGLMultisampleRenderTarget?Mj.get(gc).__webglMultisampledFramebuffer:qe;qh.copy(gc.viewport);mi.copy(gc.scissor);kk=gc.scissorTest}else qh.copy(hf).multiplyScalar(Vd).floor(),mi.copy(ig).multiplyScalar(Vd).floor(),kk=mf;$f!==qe&&(de.bindFramebuffer(36160,qe),$f=qe);Yg.viewport(qh);Yg.scissor(mi);Yg.setScissorTest(kk);uf?(gc=Mj.get(gc.texture),de.framebufferTexture2D(36160,36064,34069+be,gc.__webglTexture,Yd)):
Wf&&(gc=Mj.get(gc.texture),de.framebufferTextureLayer(36160,36064,gc.__webglTexture,Yd||0,be||0))};(this||q).readRenderTargetPixels=function(gc,be,Yd,qe,uf,Wf,yg){if(gc&&gc.isWebGLRenderTarget){var Ti=Mj.get(gc).__webglFramebuffer;gc.isWebGLCubeRenderTarget&&void 0!==yg&&(Ti=Ti[yg]);if(Ti){yg=!1;Ti!==$f&&(de.bindFramebuffer(36160,Ti),yg=!0);try{var Ii=gc.texture,hl=Ii.format,mj=Ii.type;if(1023!==hl&&Pq.convert(hl)!==de.getParameter(35739))console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");
else{var Sq=1016===mj&&(Xg.has("EXT_color_buffer_half_float")||Nh.isWebGL2&&Xg.has("EXT_color_buffer_float"));1009===mj||Pq.convert(mj)===de.getParameter(35738)||1015===mj&&(Nh.isWebGL2||Xg.has("OES_texture_float")||Xg.has("WEBGL_color_buffer_float"))||Sq?36053===de.checkFramebufferStatus(36160)?0<=be&&be<=gc.width-qe&&0<=Yd&&Yd<=gc.height-uf&&de.readPixels(be,Yd,qe,uf,Pq.convert(hl),Pq.convert(mj),Wf):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):
console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}}finally{yg&&de.bindFramebuffer(36160,$f)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")};(this||q).copyFramebufferToTexture=function(gc,be,Yd){void 0===Yd&&(Yd=0);var qe=Math.pow(2,-Yd),uf=Math.floor(be.image.width*qe);qe=Math.floor(be.image.height*qe);var Wf=Pq.convert(be.format);lj.setTexture2D(be,
0);de.copyTexImage2D(3553,Yd,Wf,gc.x,gc.y,uf,qe,0);Yg.unbindTexture()};(this||q).copyTextureToTexture=function(gc,be,Yd,qe){void 0===qe&&(qe=0);var uf=be.image.width,Wf=be.image.height,yg=Pq.convert(Yd.format),Ti=Pq.convert(Yd.type);lj.setTexture2D(Yd,0);de.pixelStorei(37440,Yd.flipY);de.pixelStorei(37441,Yd.premultiplyAlpha);de.pixelStorei(3317,Yd.unpackAlignment);be.isDataTexture?de.texSubImage2D(3553,qe,gc.x,gc.y,uf,Wf,yg,Ti,be.image.data):be.isCompressedTexture?de.compressedTexSubImage2D(3553,
qe,gc.x,gc.y,be.mipmaps[0].width,be.mipmaps[0].height,yg,be.mipmaps[0].data):de.texSubImage2D(3553,qe,gc.x,gc.y,yg,Ti,be.image);0===qe&&Yd.generateMipmaps&&de.generateMipmap(3553);Yg.unbindTexture()};(this||q).copyTextureToTexture3D=function(gc,be,Yd,qe,uf){void 0===uf&&(uf=0);if(Fd.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var Wf=Yd.image;Yd=Wf.width;var yg=Wf.height;Wf=Wf.data;var Ti=Pq.convert(qe.format),Ii=Pq.convert(qe.type);
if(qe.isDataTexture3D){lj.setTexture3D(qe,0);var hl=32879}else if(qe.isDataTexture2DArray)lj.setTexture2DArray(qe,0),hl=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}de.pixelStorei(37440,qe.flipY);de.pixelStorei(37441,qe.premultiplyAlpha);de.pixelStorei(3317,qe.unpackAlignment);var mj=de.getParameter(3314),Sq=de.getParameter(32878),QF=de.getParameter(3316),xB=de.getParameter(3315),xya=de.getParameter(32877);
de.pixelStorei(3314,Yd);de.pixelStorei(32878,yg);de.pixelStorei(3316,gc.min.x);de.pixelStorei(3315,gc.min.y);de.pixelStorei(32877,gc.min.z);de.texSubImage3D(hl,uf,be.x,be.y,be.z,gc.max.x-gc.min.x+1,gc.max.y-gc.min.y+1,gc.max.z-gc.min.z+1,Ti,Ii,Wf);de.pixelStorei(3314,mj);de.pixelStorei(32878,Sq);de.pixelStorei(3316,QF);de.pixelStorei(3315,xB);de.pixelStorei(32877,xya);0===uf&&qe.generateMipmaps&&de.generateMipmap(hl);Yg.unbindTexture()}};(this||q).initTexture=function(gc){lj.setTexture2D(gc,0);Yg.unbindTexture()};
(this||q).resetState=function(){Yg.reset();lo.reset()};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this||q}))}function mo(A,D){(this||q).array=A;(this||q).stride=D;(this||q).count=void 0!==A?A.length/D:0;(this||q).usage=35044;(this||q).updateRange={offset:0,count:-1};(this||q).version=0;(this||q).uuid=oh.generateUUID()}function iv(A,D,r,t){(this||q).name="";(this||q).data=A;(this||q).itemSize=D;(this||q).offset=r;(this||q).normalized=
!0===t}function JO(A,D,r,t,B,I){zB.subVectors(A,r).addScalar(.5).multiply(t);void 0!==B?(SF.x=I*zB.x-B*zB.y,SF.y=B*zB.x+I*zB.y):SF.copy(zB);A.copy(D);A.x+=SF.x;A.y+=SF.y;A.applyMatrix4(Gda)}function TF(A,D){Sa.call(this||q,A,D);(this||q).type="SkinnedMesh";(this||q).bindMode="attached";(this||q).bindMatrix=new Fg;(this||q).bindMatrixInverse=new Fg}function UF(){P.call(this||q);(this||q).type="Bone"}function KO(A,D,r){Sa.call(this||q,A,D);(this||q).instanceMatrix=new Ia(new Float32Array(16*r),16);
(this||q).instanceColor=null;(this||q).count=r;(this||q).frustumCulled=!1}function Tq(A,D){void 0===A&&(A=new ya);void 0===D&&(D=new Dm);P.call(this||q);(this||q).type="Line";(this||q).geometry=A;(this||q).material=D;this.updateMorphTargets()}function Nn(A,D){Tq.call(this||q,A,D);(this||q).type="LineSegments"}function AB(A,D){void 0===A&&(A=new ya);void 0===D&&(D=new ky);P.call(this||q);(this||q).type="Points";(this||q).geometry=A;(this||q).material=D;this.updateMorphTargets()}function Hda(A,D,r,
t,B,I,M){var U=zY.distanceSqToPoint(A);U<r&&(r=new jc,zY.closestPointToPoint(A,r),r.applyMatrix4(t),A=B.ray.origin.distanceTo(r),A<B.near||A>B.far||I.push({distance:A,distanceToRay:Math.sqrt(U),point:r,index:D,face:null,object:M}))}function Ida(A,D,r,t,B){for(var I,M=0,U=D,Z=r-t;U<r;U+=t)M+=(A[Z]-A[U])*(A[U+1]+A[Z+1]),Z=U;if(B===0<M)for(B=D;B<r;B+=t)I=Jda(B,A[B],A[B+1],I);else for(B=r-t;B>=D;B-=t)I=Jda(B,A[B],A[B+1],I);I&&LO(I,I.next)&&(VF(I),I=I.next);return I}function jv(A,D){if(!A)return A;D||
(D=A);do{var r=!1;if(A.steiner||!LO(A,A.next)&&0!==Uk(A.prev,A,A.next))A=A.next;else{VF(A);A=D=A.prev;if(A===A.next)break;r=!0}}while(r||A!==D);return D}function WF(A,D,r,t,B,I,M){if(A){if(!M&&I){var U=A,Z=U;do null===Z.z&&(Z.z=AY(Z.x,Z.y,t,B,I)),Z.prevZ=Z.prev,Z=Z.nextZ=Z.next;while(Z!==U);Z.prevZ.nextZ=null;Z.prevZ=null;U=Z;var aa,oa,wa,Oa,Ya=1;do{Z=U;var ab=U=null;for(oa=0;Z;){oa++;var zb=Z;for(aa=wa=0;aa<Ya&&(wa++,zb=zb.nextZ,zb);aa++);for(Oa=Ya;0<wa||0<Oa&&zb;)0!==wa&&(0===Oa||!zb||Z.z<=zb.z)?
(aa=Z,Z=Z.nextZ,wa--):(aa=zb,zb=zb.nextZ,Oa--),ab?ab.nextZ=aa:U=aa,aa.prevZ=ab,ab=aa;Z=zb}ab.nextZ=null;Ya*=2}while(1<oa)}for(U=A;A.prev!==A.next;){Z=A.prev;zb=A.next;if(I)ab=yya(A,t,B,I);else a:if(ab=A,oa=ab.prev,wa=ab,Ya=ab.next,0<=Uk(oa,wa,Ya))ab=!1;else{for(aa=ab.next.next;aa!==ab.prev;){if(BB(oa.x,oa.y,wa.x,wa.y,Ya.x,Ya.y,aa.x,aa.y)&&0<=Uk(aa.prev,aa,aa.next)){ab=!1;break a}aa=aa.next}ab=!0}if(ab)D.push(Z.i/r),D.push(A.i/r),D.push(zb.i/r),VF(A),U=A=zb.next;else if(A=zb,A===U){if(!M)WF(jv(A),
D,r,t,B,I,1);else if(1===M){A=jv(A);M=D;U=r;Z=A;do zb=Z.prev,ab=Z.next.next,!LO(zb,ab)&&Kda(zb,Z,Z.next,ab)&&XF(zb,ab)&&XF(ab,zb)&&(M.push(zb.i/U),M.push(Z.i/U),M.push(ab.i/U),VF(Z),VF(Z.next),Z=A=ab),Z=Z.next;while(Z!==A);A=jv(Z);WF(A,D,r,t,B,I,2)}else if(2===M)a:{M=A;do{for(U=M.next.next;U!==M.prev;){if(Z=M.i!==U.i){Z=M;zb=U;if(ab=Z.next.i!==zb.i&&Z.prev.i!==zb.i){b:{ab=Z;do{if(ab.i!==Z.i&&ab.next.i!==Z.i&&ab.i!==zb.i&&ab.next.i!==zb.i&&Kda(ab,ab.next,Z,zb)){ab=!0;break b}ab=ab.next}while(ab!==
Z);ab=!1}ab=!ab}if(ab){if(ab=XF(Z,zb)&&XF(zb,Z)){ab=Z;oa=!1;wa=(Z.x+zb.x)/2;Ya=(Z.y+zb.y)/2;do ab.y>Ya!==ab.next.y>Ya&&ab.next.y!==ab.y&&wa<(ab.next.x-ab.x)*(Ya-ab.y)/(ab.next.y-ab.y)+ab.x&&(oa=!oa),ab=ab.next;while(ab!==Z);ab=oa}ab=ab&&(Uk(Z.prev,Z,zb.prev)||Uk(Z,zb.prev,zb))||LO(Z,zb)&&0<Uk(Z.prev,Z,Z.next)&&0<Uk(zb.prev,zb,zb.next)}Z=ab}if(Z){A=Lda(M,U);M=jv(M,M.next);A=jv(A,A.next);WF(M,D,r,t,B,I);WF(A,D,r,t,B,I);break a}U=U.next}M=M.next}while(M!==A)}break}}}}function yya(A,D,r,t){var B=A.prev,
I=A.next;if(0<=Uk(B,A,I))return!1;var M=B.x>A.x?B.x>I.x?B.x:I.x:A.x>I.x?A.x:I.x,U=B.y>A.y?B.y>I.y?B.y:I.y:A.y>I.y?A.y:I.y,Z=AY(B.x<A.x?B.x<I.x?B.x:I.x:A.x<I.x?A.x:I.x,B.y<A.y?B.y<I.y?B.y:I.y:A.y<I.y?A.y:I.y,D,r,t);D=AY(M,U,D,r,t);r=A.prevZ;for(t=A.nextZ;r&&r.z>=Z&&t&&t.z<=D;){if(r!==A.prev&&r!==A.next&&BB(B.x,B.y,A.x,A.y,I.x,I.y,r.x,r.y)&&0<=Uk(r.prev,r,r.next))return!1;r=r.prevZ;if(t!==A.prev&&t!==A.next&&BB(B.x,B.y,A.x,A.y,I.x,I.y,t.x,t.y)&&0<=Uk(t.prev,t,t.next))return!1;t=t.nextZ}for(;r&&r.z>=
Z;){if(r!==A.prev&&r!==A.next&&BB(B.x,B.y,A.x,A.y,I.x,I.y,r.x,r.y)&&0<=Uk(r.prev,r,r.next))return!1;r=r.prevZ}for(;t&&t.z<=D;){if(t!==A.prev&&t!==A.next&&BB(B.x,B.y,A.x,A.y,I.x,I.y,t.x,t.y)&&0<=Uk(t.prev,t,t.next))return!1;t=t.nextZ}return!0}function zya(A,D){return A.x-D.x}function Aya(A,D){var r=D,t=A.x,B=A.y,I=-Infinity;do{if(B<=r.y&&B>=r.next.y&&r.next.y!==r.y){var M=r.x+(B-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(M<=t&&M>I){I=M;if(M===t){if(B===r.y)return r;if(B===r.next.y)return r.next}var U=r.x<
r.next.x?r:r.next}}r=r.next}while(r!==D);if(!U)return null;if(t===I)return U;D=U;M=U.x;var Z=U.y,aa=Infinity;r=U;do{if(t>=r.x&&r.x>=M&&t!==r.x&&BB(B<Z?t:I,B,M,Z,B<Z?I:t,B,r.x,r.y)){var oa=Math.abs(B-r.y)/(t-r.x);var wa;if((wa=XF(r,A))&&!(wa=oa<aa)&&(wa=oa===aa)&&!(wa=r.x>U.x)&&(wa=r.x===U.x)){wa=U;var Oa=r;wa=0>Uk(wa.prev,wa,Oa.prev)&&0>Uk(Oa.next,wa,wa.next)}wa&&(U=r,aa=oa)}r=r.next}while(r!==D);return U}function AY(A,D,r,t,B){A=32767*(A-r)*B;D=32767*(D-t)*B;A=(A|A<<8)&16711935;A=(A|A<<4)&252645135;
A=(A|A<<2)&858993459;D=(D|D<<8)&16711935;D=(D|D<<4)&252645135;D=(D|D<<2)&858993459;return(A|A<<1)&1431655765|((D|D<<1)&1431655765)<<1}function Bya(A){var D=A,r=A;do{if(D.x<r.x||D.x===r.x&&D.y<r.y)r=D;D=D.next}while(D!==A);return r}function BB(A,D,r,t,B,I,M,U){return 0<=(B-M)*(D-U)-(A-M)*(I-U)&&0<=(A-M)*(t-U)-(r-M)*(D-U)&&0<=(r-M)*(I-U)-(B-M)*(t-U)}function Uk(A,D,r){return(D.y-A.y)*(r.x-D.x)-(D.x-A.x)*(r.y-D.y)}function LO(A,D){return A.x===D.x&&A.y===D.y}function Kda(A,D,r,t){var B=MO(Uk(A,D,r)),
I=MO(Uk(A,D,t)),M=MO(Uk(r,t,A)),U=MO(Uk(r,t,D));return B!==I&&M!==U||0===B&&NO(A,r,D)||0===I&&NO(A,t,D)||0===M&&NO(r,A,t)||0===U&&NO(r,D,t)?!0:!1}function NO(A,D,r){return D.x<=Math.max(A.x,r.x)&&D.x>=Math.min(A.x,r.x)&&D.y<=Math.max(A.y,r.y)&&D.y>=Math.min(A.y,r.y)}function MO(A){return 0<A?1:0>A?-1:0}function XF(A,D){return 0>Uk(A.prev,A,A.next)?0<=Uk(A,D,A.next)&&0<=Uk(A,A.prev,D):0>Uk(A,D,A.prev)||0>Uk(A,A.next,D)}function Lda(A,D){var r=new BY(A.i,A.x,A.y),t=new BY(D.i,D.x,D.y),B=A.next,I=D.prev;
A.next=D;D.prev=A;r.next=B;B.prev=r;t.next=r;r.prev=t;I.next=t;t.prev=I;return t}function Jda(A,D,r,t){A=new BY(A,D,r);t?(A.next=t.next,A.prev=t,t.next.prev=A,t.next=A):(A.prev=A,A.next=A);return A}function VF(A){A.next.prev=A.prev;A.prev.next=A.next;A.prevZ&&(A.prevZ.nextZ=A.nextZ);A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function BY(A,D,r){(this||q).i=A;(this||q).x=D;(this||q).y=r;(this||q).prev=null;(this||q).next=null;(this||q).z=null;(this||q).prevZ=null;(this||q).nextZ=null;(this||q).steiner=!1}function Mda(A){var D=
A.length;2<D&&A[D-1].equals(A[0])&&A.pop()}function Nda(A,D){for(var r=0;r<D.length;r++)A.push(D[r].x),A.push(D[r].y)}function ly(A,D,r){ya.call(this||q);(this||q).type="ParametricGeometry";(this||q).parameters={func:A,slices:D,stacks:r};var t=[],B=[],I=[],M=[],U=new jc,Z=new jc,aa=new jc,oa=new jc,wa=new jc;3>A.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var Oa=D+1,Ya=0;Ya<=r;Ya++)for(var ab=Ya/r,zb=0;zb<=D;zb++){var sb=zb/D;A(sb,
ab,Z);B.push(Z.x,Z.y,Z.z);0<=sb-1E-5?(A(sb-1E-5,ab,aa),oa.subVectors(Z,aa)):(A(sb+1E-5,ab,aa),oa.subVectors(aa,Z));0<=ab-1E-5?(A(sb,ab-1E-5,aa),wa.subVectors(Z,aa)):(A(sb,ab+1E-5,aa),wa.subVectors(aa,Z));U.crossVectors(oa,wa).normalize();I.push(U.x,U.y,U.z);M.push(sb,ab)}for(A=0;A<r;A++)for(U=0;U<D;U++)Z=A*Oa+U+1,aa=(A+1)*Oa+U+1,oa=(A+1)*Oa+U,t.push(A*Oa+U,Z,oa),t.push(Z,aa,oa);this.setIndex(t);this.setAttribute("position",new ob(B,3));this.setAttribute("normal",new ob(I,3));this.setAttribute("uv",
new ob(M,2))}function ds(A){da.call(this||q);(this||q).defines={STANDARD:""};(this||q).type="MeshStandardMaterial";(this||q).color=new Zf(16777215);(this||q).roughness=1;(this||q).metalness=0;(this||q).map=null;(this||q).lightMap=null;(this||q).lightMapIntensity=1;(this||q).aoMap=null;(this||q).aoMapIntensity=1;(this||q).emissive=new Zf(0);(this||q).emissiveIntensity=1;(this||q).emissiveMap=null;(this||q).bumpMap=null;(this||q).bumpScale=1;(this||q).normalMap=null;(this||q).normalMapType=0;(this||
q).normalScale=new Ye(1,1);(this||q).displacementMap=null;(this||q).displacementScale=1;(this||q).displacementBias=0;(this||q).roughnessMap=null;(this||q).metalnessMap=null;(this||q).alphaMap=null;(this||q).envMap=null;(this||q).envMapIntensity=1;(this||q).refractionRatio=.98;(this||q).wireframe=!1;(this||q).wireframeLinewidth=1;(this||q).wireframeLinecap="round";(this||q).wireframeLinejoin="round";(this||q).skinning=!1;(this||q).morphTargets=!1;(this||q).morphNormals=!1;(this||q).flatShading=!1;
(this||q).vertexTangents=!1;this.setValues(A)}function kv(A){ds.call(this||q);(this||q).defines={STANDARD:"",PHYSICAL:""};(this||q).type="MeshPhysicalMaterial";(this||q).clearcoat=0;(this||q).clearcoatMap=null;(this||q).clearcoatRoughness=0;(this||q).clearcoatRoughnessMap=null;(this||q).clearcoatNormalScale=new Ye(1,1);(this||q).clearcoatNormalMap=null;(this||q).reflectivity=.5;Object.defineProperty(this||q,"ior",{get:function(){return(1+.4*(this||q).reflectivity)/(1-.4*(this||q).reflectivity)},set:function(D){(this||
q).reflectivity=oh.clamp(2.5*(D-1)/(D+1),0,1)}});(this||q).sheen=null;(this||q).transmission=0;(this||q).transmissionMap=null;this.setValues(A)}function Vo(A,D,r,t){(this||q).parameterPositions=A;(this||q)._cachedIndex=0;(this||q).resultBuffer=void 0!==t?t:new D.constructor(r);(this||q).sampleValues=D;(this||q).valueSize=r}function OO(A,D,r,t){Vo.call(this||q,A,D,r,t);(this||q)._weightPrev=-0;(this||q)._offsetPrev=-0;(this||q)._weightNext=-0;(this||q)._offsetNext=-0}function YF(A,D,r,t){Vo.call(this||
q,A,D,r,t)}function PO(A,D,r,t){Vo.call(this||q,A,D,r,t)}function QO(A,D,r,t){Vo.call(this||q,A,D,r,t)}function Cya(A){switch(A.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return ZF;case "vector":case "vector2":case "vector3":case "vector4":return $F;case "color":return CY;case "quaternion":return CB;case "bool":case "boolean":return my;case "string":return ny}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+A);}function Dya(A){if(void 0===A.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");
var D=Cya(A.type);if(void 0===A.times){var r=[],t=[];Jk.flattenJSON(A.keys,r,t,"value");A.times=r;A.values=t}return void 0!==D.parse?D.parse(A):new D(A.name,A.times,A.values,A.interpolation)}function DY(A,D,r){var t=this||q,B=!1,I=0,M=0,U=void 0,Z=[];(this||q).onStart=void 0;(this||q).onLoad=A;(this||q).onProgress=D;(this||q).onError=r;(this||q).itemStart=function(aa){M++;if(!1===B&&void 0!==t.onStart)t.onStart(aa,I,M);B=!0};(this||q).itemEnd=function(aa){I++;if(void 0!==t.onProgress)t.onProgress(aa,
I,M);if(I===M&&(B=!1,void 0!==t.onLoad))t.onLoad()};(this||q).itemError=function(aa){if(void 0!==t.onError)t.onError(aa)};(this||q).resolveURL=function(aa){return U?U(aa):aa};(this||q).setURLModifier=function(aa){U=aa;return this||q};(this||q).addHandler=function(aa,oa){Z.push(aa,oa);return this||q};(this||q).removeHandler=function(aa){aa=Z.indexOf(aa);-1!==aa&&Z.splice(aa,2);return this||q};(this||q).getHandler=function(aa){for(var oa=0,wa=Z.length;oa<wa;oa+=2){var Oa=Z[oa],Ya=Z[oa+1];Oa.global&&
(Oa.lastIndex=0);if(Oa.test(aa))return Ya}return null}}function il(A){(this||q).manager=void 0!==A?A:Oda;(this||q).crossOrigin="anonymous";(this||q).withCredentials=!1;(this||q).path="";(this||q).resourcePath="";(this||q).requestHeader={}}function Pp(A){il.call(this||q,A)}function EY(A){il.call(this||q,A)}function RO(A){il.call(this||q,A)}function SO(A){il.call(this||q,A)}function On(){(this||q).type="Curve";(this||q).arcLengthDivisions=200}function FY(){var A=0,D=0,r=0,t=0;return{initCatmullRom:function(B,
I,M,U,Z){B=Z*(M-B);U=Z*(U-I);A=I;D=B;r=-3*I+3*M-2*B-U;t=2*I-2*M+B+U},initNonuniformCatmullRom:function(B,I,M,U,Z,aa,oa){B=((I-B)/Z-(M-B)/(Z+aa)+(M-I)/aa)*aa;U=((M-I)/aa-(U-I)/(aa+oa)+(U-M)/oa)*aa;A=I;D=B;r=-3*I+3*M-2*B-U;t=2*I-2*M+B+U},calc:function(B){var I=B*B;return A+D*B+r*I+t*I*B}}}function Pda(A,D,r,t,B){D=.5*(t-D);B=.5*(B-r);var I=A*A;return(2*r-2*t+D+B)*A*I+(-3*r+3*t-2*D-B)*I+D*A+r}function aG(A,D,r,t){var B=1-A;return B*B*D+2*(1-A)*A*r+A*A*t}function bG(A,D,r,t,B){var I=1-A,M=1-A;return I*
I*I*D+3*M*M*A*r+3*(1-A)*A*A*t+A*A*A*B}function cG(){ya.call(this||q);(this||q).type="InstancedBufferGeometry";(this||q).instanceCount=Infinity}function TO(A,D,r,t){"number"===typeof r&&(t=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));Ia.call(this||q,A,D,r);(this||q).meshPerAttribute=t||1}function GY(A){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===
typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");il.call(this||q,A);(this||q).options={premultiplyAlpha:"none"}}function Qda(){return("undefined"===typeof performance?Date:performance).now()}function Rda(A,D,r){r=r||on.parseTrackName(D);(this||q)._targetGroup=A;(this||q)._bindings=A.subscribe_(D,r)}function on(A,D,r){(this||q).path=D;(this||q).parsedPath=r||on.parseTrackName(D);(this||q).node=on.findNode(A,(this||q).parsedPath.nodeName)||A;(this||q).rootNode=A}function HY(A,
D,r){mo.call(this||q,A,D);(this||q).meshPerAttribute=r||1}function IY(A,D,r,t,B){(this||q).buffer=A;(this||q).type=D;(this||q).itemSize=r;(this||q).elementSize=t;(this||q).count=B;(this||q).version=0}function JY(A,D,r,t){void 0===r&&(r=0);void 0===t&&(t=Infinity);(this||q).ray=new lv(A,D);(this||q).near=r;(this||q).far=t;(this||q).camera=null;(this||q).layers=new qY;(this||q).params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties((this||q).params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");
return(this||q).Points}}})}function Sda(A,D){return A.distance-D.distance}function KY(A,D,r,t){A.layers.test(D.layers)&&A.raycast(D,r);if(!0===t){A=A.children;t=0;for(var B=A.length;t<B;t++)KY(A[t],D,r,!0)}}function dG(A){P.call(this||q);(this||q).material=A;(this||q).render=function(){};(this||q).hasPositions=!1;(this||q).hasNormals=!1;(this||q).hasColors=!1;(this||q).hasUvs=!1;(this||q).positionArray=null;(this||q).normalArray=null;(this||q).colorArray=null;(this||q).uvArray=null;(this||q).count=
0}function Tda(A){var D=[];A&&A.isBone&&D.push(A);for(var r=0;r<A.children.length;r++)D.push.apply(D,Tda(A.children[r]));return D}function pl(A,D,r,t,B,I,M){UO.set(B,I,M).unproject(t);A=D[A];if(void 0!==A)for(r=r.getAttribute("position"),D=0,t=A.length;D<t;D++)r.setXYZ(A[D],UO.x,UO.y,UO.z)}function Uda(A){var D=Math.min(Math.max(Math.ceil(Math.log2(Math.max(A.r,A.g,A.b))),-128),127);A.multiplyScalar(Math.pow(2,-D));return(D+128)/255}function Vda(A){A=new pt(3*es,3*es,A);A.texture.mapping=306;A.texture.name=
"PMREM.cubeUv";A.scissorTest=!0;return A}function VO(A,D,r,t,B){A.viewport.set(D,r,t,B);A.scissor.set(D,r,t,B)}function Wda(){var A=new Ye(1,1);return new DB({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:A},inputEncoding:{value:fs[3E3]},outputEncoding:{value:fs[3E3]}},vertexShader:LY(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t"+
MY()+"\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function Xda(){return new DB({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:fs[3E3]},outputEncoding:{value:fs[3E3]}},vertexShader:LY(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t"+MY()+"\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function LY(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}
function MY(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}
var Yda=function(A){function D(sd,zd,Td){Object.defineProperty(sd,zd,{value:Td,enumerable:!0,configurable:!0,writable:!0});return sd[zd]}function r(sd,zd,Td,$f){zd=Object.create((zd&&zd.prototype instanceof B?zd:B).prototype);$f=new Ya($f||[]);zd._invoke=aa(sd,Td,$f);return zd}function t(sd,zd,Td){try{return{type:"normal",arg:sd.call(zd,Td)}}catch($f){return{type:"throw",arg:$f}}}function B(){}function I(){}function M(){}function U(sd){["next","throw","return"].forEach(function(zd){D(sd,zd,function(Td){return this._invoke(zd,
Td)})})}function Z(sd,zd){function Td(Ne,bg,qh,mi){Ne=t(sd[Ne],sd,bg);if("throw"===Ne.type)mi(Ne.arg);else{var kk=Ne.arg;return(Ne=kk.value)&&"object"===typeof Ne&&nc.call(Ne,"__await")?zd.resolve(Ne.__await).then(function(uc){Td("next",uc,qh,mi)},function(uc){Td("throw",uc,qh,mi)}):zd.resolve(Ne).then(function(uc){kk.value=uc;qh(kk)},function(uc){return Td("throw",uc,qh,mi)})}}var $f;(this||q)._invoke=function(Ne,bg){function qh(){return new zd(function(mi,kk){Td(Ne,bg,mi,kk)})}return $f=$f?$f.then(qh,
qh):qh()}}function aa(sd,zd,Td){var $f=Tc;return function(Ne,bg){if($f===qd)throw Error("Generator is already running");if($f===Ld){if("throw"===Ne)throw bg;return zb()}Td.method=Ne;for(Td.arg=bg;;){if(Ne=Td.delegate)if(Ne=oa(Ne,Td)){if(Ne===Fd)continue;return Ne}if("next"===Td.method)Td.sent=Td._sent=Td.arg;else if("throw"===Td.method){if($f===Tc)throw $f=Ld,Td.arg;Td.dispatchException(Td.arg)}else"return"===Td.method&&Td.abrupt("return",Td.arg);$f=qd;Ne=t(sd,zd,Td);if("normal"===Ne.type){$f=Td.done?
Ld:Uc;if(Ne.arg===Fd)continue;return{value:Ne.arg,done:Td.done}}"throw"===Ne.type&&($f=Ld,Td.method="throw",Td.arg=Ne.arg)}}}function oa(sd,zd){var Td=sd.iterator[zd.method];if(Td===oc){zd.delegate=null;if("throw"===zd.method){if(sd.iterator["return"]&&(zd.method="return",zd.arg=oc,oa(sd,zd),"throw"===zd.method))return Fd;zd.method="throw";zd.arg=new TypeError("The iterator does not provide a 'throw' method")}return Fd}Td=t(Td,sd.iterator,zd.arg);if("throw"===Td.type)return zd.method="throw",zd.arg=
Td.arg,zd.delegate=null,Fd;Td=Td.arg;if(!Td)return zd.method="throw",zd.arg=new TypeError("iterator result is not an object"),zd.delegate=null,Fd;if(Td.done)zd[sd.resultName]=Td.value,zd.next=sd.nextLoc,"return"!==zd.method&&(zd.method="next",zd.arg=oc);else return Td;zd.delegate=null;return Fd}function wa(sd){var zd={tryLoc:sd[0]};1 in sd&&(zd.catchLoc=sd[1]);2 in sd&&(zd.finallyLoc=sd[2],zd.afterLoc=sd[3]);(this||q).tryEntries.push(zd)}function Oa(sd){var zd=sd.completion||{};zd.type="normal";delete zd.arg;
sd.completion=zd}function Ya(sd){(this||q).tryEntries=[{tryLoc:"root"}];sd.forEach(wa,this||q);this.reset(!0)}function ab(sd){if(sd){var zd=sd[Sc];if(zd)return zd.call(sd);if("function"===typeof sd.next)return sd;if(!isNaN(sd.length)){var Td=-1;zd=function Ne(){for(;++Td<sd.length;)if(nc.call(sd,Td))return Ne.value=sd[Td],Ne.done=!1,Ne;Ne.value=oc;Ne.done=!0;return Ne};return zd.next=zd}}return{next:zb}}function zb(){return{value:oc,done:!0}}var sb=Object.prototype,nc=sb.hasOwnProperty,oc,Fc="function"===
typeof Symbol?Symbol:{},Sc=Fc.iterator||"@@iterator",rd=Fc.asyncIterator||"@@asyncIterator",jd=Fc.toStringTag||"@@toStringTag";try{D({},"")}catch(sd){D=function(zd,Td,$f){return zd[Td]=$f}}A.wrap=r;var Tc="suspendedStart",Uc="suspendedYield",qd="executing",Ld="completed",Fd={};Fc={};Fc[Sc]=function(){return this||q};var ce=Object.getPrototypeOf;(ce=ce&&ce(ce(ab([]))))&&ce!==sb&&nc.call(ce,Sc)&&(Fc=ce);var rf=M.prototype=B.prototype=Object.create(Fc);I.prototype=rf.constructor=M;M.constructor=I;I.displayName=
D(M,jd,"GeneratorFunction");A.isGeneratorFunction=function(sd){return(sd="function"===typeof sd&&sd.constructor)?sd===I||"GeneratorFunction"===(sd.displayName||sd.name):!1};A.mark=function(sd){Object.setPrototypeOf?Object.setPrototypeOf(sd,M):(sd.__proto__=M,D(sd,jd,"GeneratorFunction"));sd.prototype=Object.create(rf);return sd};A.awrap=function(sd){return{__await:sd}};U(Z.prototype);Z.prototype[rd]=function(){return this||q};A.AsyncIterator=Z;A.async=function(sd,zd,Td,$f,Ne){void 0===Ne&&(Ne=Promise);
var bg=new Z(r(sd,zd,Td,$f),Ne);return A.isGeneratorFunction(zd)?bg:bg.next().then(function(qh){return qh.done?qh.value:bg.next()})};U(rf);D(rf,jd,"Generator");rf[Sc]=function(){return this||q};rf.toString=function(){return"[object Generator]"};A.keys=function(sd){var zd=[],Td;for(Td in sd)zd.push(Td);zd.reverse();return function Ne(){for(;zd.length;){var bg=zd.pop();if(bg in sd)return Ne.value=bg,Ne.done=!1,Ne}Ne.done=!0;return Ne}};A.values=ab;Ya.prototype={constructor:Ya,reset:function(sd){(this||
q).prev=0;(this||q).next=0;(this||q).sent=(this||q)._sent=oc;(this||q).done=!1;(this||q).delegate=null;(this||q).method="next";(this||q).arg=oc;(this||q).tryEntries.forEach(Oa);if(!sd)for(var zd in this||q)"t"===zd.charAt(0)&&nc.call(this||q,zd)&&!isNaN(+zd.slice(1))&&((this||q)[zd]=oc)},stop:function(){(this||q).done=!0;var sd=(this||q).tryEntries[0].completion;if("throw"===sd.type)throw sd.arg;return(this||q).rval},dispatchException:function(sd){function zd(kk,uc){bg.type="throw";bg.arg=sd;Td.next=
kk;uc&&(Td.method="next",Td.arg=oc);return!!uc}if((this||q).done)throw sd;for(var Td=this||q,$f=(this||q).tryEntries.length-1;0<=$f;--$f){var Ne=(this||q).tryEntries[$f],bg=Ne.completion;if("root"===Ne.tryLoc)return zd("end");if(Ne.tryLoc<=(this||q).prev){var qh=nc.call(Ne,"catchLoc"),mi=nc.call(Ne,"finallyLoc");if(qh&&mi){if((this||q).prev<Ne.catchLoc)return zd(Ne.catchLoc,!0);if((this||q).prev<Ne.finallyLoc)return zd(Ne.finallyLoc)}else if(qh){if((this||q).prev<Ne.catchLoc)return zd(Ne.catchLoc,
!0)}else if(mi){if((this||q).prev<Ne.finallyLoc)return zd(Ne.finallyLoc)}else throw Error("try statement without catch or finally");}}},abrupt:function(sd,zd){for(var Td=(this||q).tryEntries.length-1;0<=Td;--Td){var $f=(this||q).tryEntries[Td];if($f.tryLoc<=(this||q).prev&&nc.call($f,"finallyLoc")&&(this||q).prev<$f.finallyLoc){var Ne=$f;break}}Ne&&("break"===sd||"continue"===sd)&&Ne.tryLoc<=zd&&zd<=Ne.finallyLoc&&(Ne=null);Td=Ne?Ne.completion:{};Td.type=sd;Td.arg=zd;return Ne?((this||q).method="next",
(this||q).next=Ne.finallyLoc,Fd):this.complete(Td)},complete:function(sd,zd){if("throw"===sd.type)throw sd.arg;"break"===sd.type||"continue"===sd.type?(this||q).next=sd.arg:"return"===sd.type?((this||q).rval=(this||q).arg=sd.arg,(this||q).method="return",(this||q).next="end"):"normal"===sd.type&&zd&&((this||q).next=zd);return Fd},finish:function(sd){for(var zd=(this||q).tryEntries.length-1;0<=zd;--zd){var Td=(this||q).tryEntries[zd];if(Td.finallyLoc===sd)return this.complete(Td.completion,Td.afterLoc),
Oa(Td),Fd}},"catch":function(sd){for(var zd=(this||q).tryEntries.length-1;0<=zd;--zd){var Td=(this||q).tryEntries[zd];if(Td.tryLoc===sd){sd=Td.completion;if("throw"===sd.type){var $f=sd.arg;Oa(Td)}return $f}}throw Error("illegal catch attempt");},delegateYield:function(sd,zd,Td){(this||q).delegate={iterator:ab(sd),resultName:zd,nextLoc:Td};"next"===(this||q).method&&((this||q).arg=oc);return Fd}};return A}(vB);try{q.regeneratorRuntime=a=Yda}catch(A){Function("r","regeneratorRuntime = r")(Yda)}Object.assign(J.prototype,
{addEventListener:function(A,D){void 0===(this||q)._listeners&&((this||q)._listeners={});var r=(this||q)._listeners;void 0===r[A]&&(r[A]=[]);-1===r[A].indexOf(D)&&r[A].push(D)},hasEventListener:function(A,D){if(void 0===(this||q)._listeners)return!1;var r=(this||q)._listeners;return void 0!==r[A]&&-1!==r[A].indexOf(D)},removeEventListener:function(A,D){void 0!==(this||q)._listeners&&(A=(this||q)._listeners[A],void 0!==A&&(D=A.indexOf(D),-1!==D&&A.splice(D,1)))},dispatchEvent:function(A){if(void 0!==
(this||q)._listeners){var D=(this||q)._listeners[A.type];if(void 0!==D){A.target=this||q;D=D.slice(0);for(var r=0,t=D.length;r<t;r++)D[r].call(this||q,A)}}}});for(var Vm=[],eG=0;256>eG;eG++)Vm[eG]=(16>eG?"0":"")+eG.toString(16);var WO=1234567,oh={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var A=4294967295*Math.random()|0,D=4294967295*Math.random()|0,r=4294967295*Math.random()|0,t=4294967295*Math.random()|0;return(Vm[A&255]+Vm[A>>8&255]+Vm[A>>16&255]+Vm[A>>24&255]+"-"+Vm[D&255]+
Vm[D>>8&255]+"-"+Vm[D>>16&15|64]+Vm[D>>24&255]+"-"+Vm[r&63|128]+Vm[r>>8&255]+"-"+Vm[r>>16&255]+Vm[r>>24&255]+Vm[t&255]+Vm[t>>8&255]+Vm[t>>16&255]+Vm[t>>24&255]).toUpperCase()},clamp:function(A,D,r){return Math.max(D,Math.min(r,A))},euclideanModulo:function(A,D){return(A%D+D)%D},mapLinear:function(A,D,r,t,B){return t+(A-D)*(B-t)/(r-D)},lerp:function(A,D,r){return(1-r)*A+r*D},damp:function(A,D,r,t){return oh.lerp(A,D,1-Math.exp(-r*t))},pingpong:function(A,D){void 0===D&&(D=1);return D-Math.abs(oh.euclideanModulo(A,
2*D)-D)},smoothstep:function(A,D,r){if(A<=D)return 0;if(A>=r)return 1;A=(A-D)/(r-D);return A*A*(3-2*A)},smootherstep:function(A,D,r){if(A<=D)return 0;if(A>=r)return 1;A=(A-D)/(r-D);return A*A*A*(A*(6*A-15)+10)},randInt:function(A,D){return A+Math.floor(Math.random()*(D-A+1))},randFloat:function(A,D){return A+Math.random()*(D-A)},randFloatSpread:function(A){return A*(.5-Math.random())},seededRandom:function(A){void 0!==A&&(WO=A%2147483647);WO=16807*WO%2147483647;return(WO-1)/2147483646},degToRad:function(A){return A*
oh.DEG2RAD},radToDeg:function(A){return A*oh.RAD2DEG},isPowerOfTwo:function(A){return 0===(A&A-1)&&0!==A},ceilPowerOfTwo:function(A){return Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))},floorPowerOfTwo:function(A){return Math.pow(2,Math.floor(Math.log(A)/Math.LN2))},setQuaternionFromProperEuler:function(A,D,r,t,B){var I=Math.cos,M=Math.sin,U=I(r/2);r=M(r/2);var Z=I((D+t)/2),aa=M((D+t)/2),oa=I((D-t)/2),wa=M((D-t)/2);I=I((t-D)/2);D=M((t-D)/2);switch(B){case "XYX":A.set(U*aa,r*oa,r*wa,U*Z);break;case "YZY":A.set(r*
wa,U*aa,r*oa,U*Z);break;case "ZXZ":A.set(r*oa,r*wa,U*aa,U*Z);break;case "XZX":A.set(U*aa,r*D,r*I,U*Z);break;case "YXY":A.set(r*I,U*aa,r*D,U*Z);break;case "ZYZ":A.set(r*D,r*I,U*aa,U*Z);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+B)}}},Ye=function(){function A(r,t){void 0===r&&(r=0);void 0===t&&(t=0);(this||q).x=r;(this||q).y=t}var D=A.prototype;D.set=function(r,t){(this||q).x=r;(this||q).y=t;return this||q};D.setScalar=function(r){(this||
q).x=r;(this||q).y=r;return this||q};D.setX=function(r){(this||q).x=r;return this||q};D.setY=function(r){(this||q).y=r;return this||q};D.setComponent=function(r,t){switch(r){case 0:(this||q).x=t;break;case 1:(this||q).y=t;break;default:throw Error("index is out of range: "+r);}return this||q};D.getComponent=function(r){switch(r){case 0:return(this||q).x;case 1:return(this||q).y;default:throw Error("index is out of range: "+r);}};D.clone=function(){return new (this||q).constructor((this||q).x,(this||
q).y)};D.copy=function(r){(this||q).x=r.x;(this||q).y=r.y;return this||q};D.add=function(r,t){if(void 0!==t)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,t);(this||q).x+=r.x;(this||q).y+=r.y;return this||q};D.addScalar=function(r){(this||q).x+=r;(this||q).y+=r;return this||q};D.addVectors=function(r,t){(this||q).x=r.x+t.x;(this||q).y=r.y+t.y;return this||q};D.addScaledVector=function(r,t){(this||q).x+=r.x*t;(this||q).y+=
r.y*t;return this||q};D.sub=function(r,t){if(void 0!==t)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,t);(this||q).x-=r.x;(this||q).y-=r.y;return this||q};D.subScalar=function(r){(this||q).x-=r;(this||q).y-=r;return this||q};D.subVectors=function(r,t){(this||q).x=r.x-t.x;(this||q).y=r.y-t.y;return this||q};D.multiply=function(r){(this||q).x*=r.x;(this||q).y*=r.y;return this||q};D.multiplyScalar=function(r){(this||q).x*=
r;(this||q).y*=r;return this||q};D.divide=function(r){(this||q).x/=r.x;(this||q).y/=r.y;return this||q};D.divideScalar=function(r){return this.multiplyScalar(1/r)};D.applyMatrix3=function(r){var t=(this||q).x,B=(this||q).y;r=r.elements;(this||q).x=r[0]*t+r[3]*B+r[6];(this||q).y=r[1]*t+r[4]*B+r[7];return this||q};D.min=function(r){(this||q).x=Math.min((this||q).x,r.x);(this||q).y=Math.min((this||q).y,r.y);return this||q};D.max=function(r){(this||q).x=Math.max((this||q).x,r.x);(this||q).y=Math.max((this||
q).y,r.y);return this||q};D.clamp=function(r,t){(this||q).x=Math.max(r.x,Math.min(t.x,(this||q).x));(this||q).y=Math.max(r.y,Math.min(t.y,(this||q).y));return this||q};D.clampScalar=function(r,t){(this||q).x=Math.max(r,Math.min(t,(this||q).x));(this||q).y=Math.max(r,Math.min(t,(this||q).y));return this||q};D.clampLength=function(r,t){var B=this.length();return this.divideScalar(B||1).multiplyScalar(Math.max(r,Math.min(t,B)))};D.floor=function(){(this||q).x=Math.floor((this||q).x);(this||q).y=Math.floor((this||
q).y);return this||q};D.ceil=function(){(this||q).x=Math.ceil((this||q).x);(this||q).y=Math.ceil((this||q).y);return this||q};D.round=function(){(this||q).x=Math.round((this||q).x);(this||q).y=Math.round((this||q).y);return this||q};D.roundToZero=function(){(this||q).x=0>(this||q).x?Math.ceil((this||q).x):Math.floor((this||q).x);(this||q).y=0>(this||q).y?Math.ceil((this||q).y):Math.floor((this||q).y);return this||q};D.negate=function(){(this||q).x=-(this||q).x;(this||q).y=-(this||q).y;return this||
q};D.dot=function(r){return(this||q).x*r.x+(this||q).y*r.y};D.cross=function(r){return(this||q).x*r.y-(this||q).y*r.x};D.lengthSq=function(){return(this||q).x*(this||q).x+(this||q).y*(this||q).y};D.length=function(){return Math.sqrt((this||q).x*(this||q).x+(this||q).y*(this||q).y)};D.manhattanLength=function(){return Math.abs((this||q).x)+Math.abs((this||q).y)};D.normalize=function(){return this.divideScalar(this.length()||1)};D.angle=function(){return Math.atan2(-(this||q).y,-(this||q).x)+Math.PI};
D.distanceTo=function(r){return Math.sqrt(this.distanceToSquared(r))};D.distanceToSquared=function(r){var t=(this||q).x-r.x;r=(this||q).y-r.y;return t*t+r*r};D.manhattanDistanceTo=function(r){return Math.abs((this||q).x-r.x)+Math.abs((this||q).y-r.y)};D.setLength=function(r){return this.normalize().multiplyScalar(r)};D.lerp=function(r,t){(this||q).x+=(r.x-(this||q).x)*t;(this||q).y+=(r.y-(this||q).y)*t;return this||q};D.lerpVectors=function(r,t,B){(this||q).x=r.x+(t.x-r.x)*B;(this||q).y=r.y+(t.y-
r.y)*B;return this||q};D.equals=function(r){return r.x===(this||q).x&&r.y===(this||q).y};D.fromArray=function(r,t){void 0===t&&(t=0);(this||q).x=r[t];(this||q).y=r[t+1];return this||q};D.toArray=function(r,t){void 0===r&&(r=[]);void 0===t&&(t=0);r[t]=(this||q).x;r[t+1]=(this||q).y;return r};D.fromBufferAttribute=function(r,t,B){void 0!==B&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");(this||q).x=r.getX(t);(this||q).y=r.getY(t);return this||q};D.rotateAround=
function(r,t){var B=Math.cos(t);t=Math.sin(t);var I=(this||q).x-r.x,M=(this||q).y-r.y;(this||q).x=I*B-M*t+r.x;(this||q).y=I*t+M*B+r.y;return this||q};D.random=function(){(this||q).x=Math.random();(this||q).y=Math.random();return this||q};l(A,[{key:"width",get:function(){return(this||q).x},set:function(r){(this||q).x=r}},{key:"height",get:function(){return(this||q).y},set:function(r){(this||q).y=r}}]);return A}();Ye.prototype.isVector2=!0;var cm=function(){function A(){(this||q).elements=[1,0,0,0,
1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}var D=A.prototype;D.set=function(r,t,B,I,M,U,Z,aa,oa){var wa=(this||q).elements;wa[0]=r;wa[1]=I;wa[2]=Z;wa[3]=t;wa[4]=M;wa[5]=aa;wa[6]=B;wa[7]=U;wa[8]=oa;return this||q};D.identity=function(){this.set(1,0,0,0,1,0,0,0,1);return this||q};D.copy=function(r){var t=(this||q).elements;r=r.elements;t[0]=r[0];t[1]=r[1];t[2]=r[2];t[3]=r[3];t[4]=r[4];t[5]=r[5];t[6]=r[6];t[7]=r[7];t[8]=
r[8];return this||q};D.extractBasis=function(r,t,B){r.setFromMatrix3Column(this||q,0);t.setFromMatrix3Column(this||q,1);B.setFromMatrix3Column(this||q,2);return this||q};D.setFromMatrix4=function(r){r=r.elements;this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]);return this||q};D.multiply=function(r){return this.multiplyMatrices(this||q,r)};D.premultiply=function(r){return this.multiplyMatrices(r,this||q)};D.multiplyMatrices=function(r,t){var B=r.elements,I=t.elements;t=(this||q).elements;r=
B[0];var M=B[3],U=B[6],Z=B[1],aa=B[4],oa=B[7],wa=B[2],Oa=B[5];B=B[8];var Ya=I[0],ab=I[3],zb=I[6],sb=I[1],nc=I[4],oc=I[7],Fc=I[2],Sc=I[5];I=I[8];t[0]=r*Ya+M*sb+U*Fc;t[3]=r*ab+M*nc+U*Sc;t[6]=r*zb+M*oc+U*I;t[1]=Z*Ya+aa*sb+oa*Fc;t[4]=Z*ab+aa*nc+oa*Sc;t[7]=Z*zb+aa*oc+oa*I;t[2]=wa*Ya+Oa*sb+B*Fc;t[5]=wa*ab+Oa*nc+B*Sc;t[8]=wa*zb+Oa*oc+B*I;return this||q};D.multiplyScalar=function(r){var t=(this||q).elements;t[0]*=r;t[3]*=r;t[6]*=r;t[1]*=r;t[4]*=r;t[7]*=r;t[2]*=r;t[5]*=r;t[8]*=r;return this||q};D.determinant=
function(){var r=(this||q).elements,t=r[0],B=r[1],I=r[2],M=r[3],U=r[4],Z=r[5],aa=r[6],oa=r[7];r=r[8];return t*U*r-t*Z*oa-B*M*r+B*Z*aa+I*M*oa-I*U*aa};D.invert=function(){var r=(this||q).elements,t=r[0],B=r[1],I=r[2],M=r[3],U=r[4],Z=r[5],aa=r[6],oa=r[7],wa=r[8],Oa=wa*U-Z*oa,Ya=Z*aa-wa*M,ab=oa*M-U*aa,zb=t*Oa+B*Ya+I*ab;if(0===zb)return this.set(0,0,0,0,0,0,0,0,0);zb=1/zb;r[0]=Oa*zb;r[1]=(I*oa-wa*B)*zb;r[2]=(Z*B-I*U)*zb;r[3]=Ya*zb;r[4]=(wa*t-I*aa)*zb;r[5]=(I*M-Z*t)*zb;r[6]=ab*zb;r[7]=(B*aa-oa*t)*zb;r[8]=
(U*t-B*M)*zb;return this||q};D.transpose=function(){var r=(this||q).elements;var t=r[1];r[1]=r[3];r[3]=t;t=r[2];r[2]=r[6];r[6]=t;t=r[5];r[5]=r[7];r[7]=t;return this||q};D.getNormalMatrix=function(r){return this.setFromMatrix4(r).invert().transpose()};D.transposeIntoArray=function(r){var t=(this||q).elements;r[0]=t[0];r[1]=t[3];r[2]=t[6];r[3]=t[1];r[4]=t[4];r[5]=t[7];r[6]=t[2];r[7]=t[5];r[8]=t[8];return this||q};D.setUvTransform=function(r,t,B,I,M,U,Z){var aa=Math.cos(M);M=Math.sin(M);this.set(B*aa,
B*M,-B*(aa*U+M*Z)+U+r,-I*M,I*aa,-I*(-M*U+aa*Z)+Z+t,0,0,1);return this||q};D.scale=function(r,t){var B=(this||q).elements;B[0]*=r;B[3]*=r;B[6]*=r;B[1]*=t;B[4]*=t;B[7]*=t;return this||q};D.rotate=function(r){var t=Math.cos(r);r=Math.sin(r);var B=(this||q).elements,I=B[0],M=B[3],U=B[6],Z=B[1],aa=B[4],oa=B[7];B[0]=t*I+r*Z;B[3]=t*M+r*aa;B[6]=t*U+r*oa;B[1]=-r*I+t*Z;B[4]=-r*M+t*aa;B[7]=-r*U+t*oa;return this||q};D.translate=function(r,t){var B=(this||q).elements;B[0]+=r*B[2];B[3]+=r*B[5];B[6]+=r*B[8];B[1]+=
t*B[2];B[4]+=t*B[5];B[7]+=t*B[8];return this||q};D.equals=function(r){var t=(this||q).elements;r=r.elements;for(var B=0;9>B;B++)if(t[B]!==r[B])return!1;return!0};D.fromArray=function(r,t){void 0===t&&(t=0);for(var B=0;9>B;B++)(this||q).elements[B]=r[B+t];return this||q};D.toArray=function(r,t){void 0===r&&(r=[]);void 0===t&&(t=0);var B=(this||q).elements;r[t]=B[0];r[t+1]=B[1];r[t+2]=B[2];r[t+3]=B[3];r[t+4]=B[4];r[t+5]=B[5];r[t+6]=B[6];r[t+7]=B[7];r[t+8]=B[8];return r};D.clone=function(){return(new (this||
q).constructor).fromArray((this||q).elements)};return A}();cm.prototype.isMatrix3=!0;var EB,gy={getDataURL:function(A){if(/^data:/i.test(A.src)||"undefined"==typeof HTMLCanvasElement)return A.src;if(!(A instanceof HTMLCanvasElement)){void 0===EB&&(EB=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"));EB.width=A.width;EB.height=A.height;var D=EB.getContext("2d");A instanceof ImageData?D.putImageData(A,0,0):D.drawImage(A,0,0,A.width,A.height);A=EB}return 2048<A.width||2048<A.height?
A.toDataURL("image/jpeg",.6):A.toDataURL("image/png")}},Eya=0,pn=function(A){function D(t,B,I,M,U,Z,aa,oa,wa,Oa){void 0===t&&(t=D.DEFAULT_IMAGE);void 0===B&&(B=D.DEFAULT_MAPPING);void 0===I&&(I=1001);void 0===M&&(M=1001);void 0===U&&(U=1006);void 0===Z&&(Z=1008);void 0===aa&&(aa=1023);void 0===oa&&(oa=1009);void 0===wa&&(wa=1);void 0===Oa&&(Oa=3E3);var Ya=A.call(this||q)||this||q;Object.defineProperty(x(Ya),"id",{value:Eya++});Ya.uuid=oh.generateUUID();Ya.name="";Ya.image=t;Ya.mipmaps=[];Ya.mapping=
B;Ya.wrapS=I;Ya.wrapT=M;Ya.magFilter=U;Ya.minFilter=Z;Ya.anisotropy=wa;Ya.format=aa;Ya.internalFormat=null;Ya.type=oa;Ya.offset=new Ye(0,0);Ya.repeat=new Ye(1,1);Ya.center=new Ye(0,0);Ya.rotation=0;Ya.matrixAutoUpdate=!0;Ya.matrix=new cm;Ya.generateMipmaps=!0;Ya.premultiplyAlpha=!1;Ya.flipY=!0;Ya.unpackAlignment=4;Ya.encoding=Oa;Ya.version=0;Ya.onUpdate=null;return Ya}p(D,A);var r=D.prototype;r.updateMatrix=function(){(this||q).matrix.setUvTransform((this||q).offset.x,(this||q).offset.y,(this||q).repeat.x,
(this||q).repeat.y,(this||q).rotation,(this||q).center.x,(this||q).center.y)};r.clone=function(){return(new (this||q).constructor).copy(this||q)};r.copy=function(t){(this||q).name=t.name;(this||q).image=t.image;(this||q).mipmaps=t.mipmaps.slice(0);(this||q).mapping=t.mapping;(this||q).wrapS=t.wrapS;(this||q).wrapT=t.wrapT;(this||q).magFilter=t.magFilter;(this||q).minFilter=t.minFilter;(this||q).anisotropy=t.anisotropy;(this||q).format=t.format;(this||q).internalFormat=t.internalFormat;(this||q).type=
t.type;(this||q).offset.copy(t.offset);(this||q).repeat.copy(t.repeat);(this||q).center.copy(t.center);(this||q).rotation=t.rotation;(this||q).matrixAutoUpdate=t.matrixAutoUpdate;(this||q).matrix.copy(t.matrix);(this||q).generateMipmaps=t.generateMipmaps;(this||q).premultiplyAlpha=t.premultiplyAlpha;(this||q).flipY=t.flipY;(this||q).unpackAlignment=t.unpackAlignment;(this||q).encoding=t.encoding;return this||q};r.toJSON=function(t){var B=void 0===t||"string"===typeof t;if(!B&&void 0!==t.textures[(this||
q).uuid])return t.textures[(this||q).uuid];var I={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:(this||q).uuid,name:(this||q).name,mapping:(this||q).mapping,repeat:[(this||q).repeat.x,(this||q).repeat.y],offset:[(this||q).offset.x,(this||q).offset.y],center:[(this||q).center.x,(this||q).center.y],rotation:(this||q).rotation,wrap:[(this||q).wrapS,(this||q).wrapT],format:(this||q).format,type:(this||q).type,encoding:(this||q).encoding,minFilter:(this||q).minFilter,magFilter:(this||
q).magFilter,anisotropy:(this||q).anisotropy,flipY:(this||q).flipY,premultiplyAlpha:(this||q).premultiplyAlpha,unpackAlignment:(this||q).unpackAlignment};if(void 0!==(this||q).image){var M=(this||q).image;void 0===M.uuid&&(M.uuid=oh.generateUUID());if(!B&&void 0===t.images[M.uuid]){if(Array.isArray(M)){var U=[];for(var Z=0,aa=M.length;Z<aa;Z++)M[Z].isDataTexture?U.push(K(M[Z].image)):U.push(K(M[Z]))}else U=K(M);t.images[M.uuid]={uuid:M.uuid,url:U}}I.image=M.uuid}B||(t.textures[(this||q).uuid]=I);
return I};r.dispose=function(){this.dispatchEvent({type:"dispose"})};r.transformUv=function(t){if(300!==(this||q).mapping)return t;t.applyMatrix3((this||q).matrix);if(0>t.x||1<t.x)switch((this||q).wrapS){case 1E3:t.x-=Math.floor(t.x);break;case 1001:t.x=0>t.x?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(0>t.y||1<t.y)switch((this||q).wrapT){case 1E3:t.y-=Math.floor(t.y);break;case 1001:t.y=0>t.y?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%
2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}(this||q).flipY&&(t.y=1-t.y);return t};l(D,[{key:"needsUpdate",set:function(t){!0===t&&(this||q).version++}}]);return D}(J);pn.DEFAULT_IMAGE=void 0;pn.DEFAULT_MAPPING=300;pn.prototype.isTexture=!0;var Xj=function(){function A(r,t,B,I){void 0===r&&(r=0);void 0===t&&(t=0);void 0===B&&(B=0);void 0===I&&(I=1);(this||q).x=r;(this||q).y=t;(this||q).z=B;(this||q).w=I}var D=A.prototype;D.set=function(r,t,B,I){(this||q).x=r;(this||q).y=t;(this||q).z=B;(this||q).w=
I;return this||q};D.setScalar=function(r){(this||q).x=r;(this||q).y=r;(this||q).z=r;(this||q).w=r;return this||q};D.setX=function(r){(this||q).x=r;return this||q};D.setY=function(r){(this||q).y=r;return this||q};D.setZ=function(r){(this||q).z=r;return this||q};D.setW=function(r){(this||q).w=r;return this||q};D.setComponent=function(r,t){switch(r){case 0:(this||q).x=t;break;case 1:(this||q).y=t;break;case 2:(this||q).z=t;break;case 3:(this||q).w=t;break;default:throw Error("index is out of range: "+
r);}return this||q};D.getComponent=function(r){switch(r){case 0:return(this||q).x;case 1:return(this||q).y;case 2:return(this||q).z;case 3:return(this||q).w;default:throw Error("index is out of range: "+r);}};D.clone=function(){return new (this||q).constructor((this||q).x,(this||q).y,(this||q).z,(this||q).w)};D.copy=function(r){(this||q).x=r.x;(this||q).y=r.y;(this||q).z=r.z;(this||q).w=void 0!==r.w?r.w:1;return this||q};D.add=function(r,t){if(void 0!==t)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
this.addVectors(r,t);(this||q).x+=r.x;(this||q).y+=r.y;(this||q).z+=r.z;(this||q).w+=r.w;return this||q};D.addScalar=function(r){(this||q).x+=r;(this||q).y+=r;(this||q).z+=r;(this||q).w+=r;return this||q};D.addVectors=function(r,t){(this||q).x=r.x+t.x;(this||q).y=r.y+t.y;(this||q).z=r.z+t.z;(this||q).w=r.w+t.w;return this||q};D.addScaledVector=function(r,t){(this||q).x+=r.x*t;(this||q).y+=r.y*t;(this||q).z+=r.z*t;(this||q).w+=r.w*t;return this||q};D.sub=function(r,t){if(void 0!==t)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(r,t);(this||q).x-=r.x;(this||q).y-=r.y;(this||q).z-=r.z;(this||q).w-=r.w;return this||q};D.subScalar=function(r){(this||q).x-=r;(this||q).y-=r;(this||q).z-=r;(this||q).w-=r;return this||q};D.subVectors=function(r,t){(this||q).x=r.x-t.x;(this||q).y=r.y-t.y;(this||q).z=r.z-t.z;(this||q).w=r.w-t.w;return this||q};D.multiply=function(r){(this||q).x*=r.x;(this||q).y*=r.y;(this||q).z*=r.z;(this||q).w*=r.w;return this||q};D.multiplyScalar=function(r){(this||q).x*=r;(this||q).y*=r;(this||
q).z*=r;(this||q).w*=r;return this||q};D.applyMatrix4=function(r){var t=(this||q).x,B=(this||q).y,I=(this||q).z,M=(this||q).w;r=r.elements;(this||q).x=r[0]*t+r[4]*B+r[8]*I+r[12]*M;(this||q).y=r[1]*t+r[5]*B+r[9]*I+r[13]*M;(this||q).z=r[2]*t+r[6]*B+r[10]*I+r[14]*M;(this||q).w=r[3]*t+r[7]*B+r[11]*I+r[15]*M;return this||q};D.divideScalar=function(r){return this.multiplyScalar(1/r)};D.setAxisAngleFromQuaternion=function(r){(this||q).w=2*Math.acos(r.w);var t=Math.sqrt(1-r.w*r.w);1E-4>t?((this||q).x=1,(this||
q).y=0,(this||q).z=0):((this||q).x=r.x/t,(this||q).y=r.y/t,(this||q).z=r.z/t);return this||q};D.setAxisAngleFromRotationMatrix=function(r){r=r.elements;var t=r[0];var B=r[4];var I=r[8],M=r[1],U=r[5],Z=r[9];var aa=r[2];var oa=r[6];var wa=r[10];if(.01>Math.abs(B-M)&&.01>Math.abs(I-aa)&&.01>Math.abs(Z-oa)){if(.1>Math.abs(B+M)&&.1>Math.abs(I+aa)&&.1>Math.abs(Z+oa)&&.1>Math.abs(t+U+wa-3))return this.set(1,0,0,0),this||q;r=Math.PI;t=(t+1)/2;U=(U+1)/2;wa=(wa+1)/2;B=(B+M)/4;I=(I+aa)/4;Z=(Z+oa)/4;t>U&&t>wa?
.01>t?(oa=0,B=aa=.707106781):(oa=Math.sqrt(t),aa=B/oa,B=I/oa):U>wa?.01>U?(oa=.707106781,aa=0,B=.707106781):(aa=Math.sqrt(U),oa=B/aa,B=Z/aa):.01>wa?(aa=oa=.707106781,B=0):(B=Math.sqrt(wa),oa=I/B,aa=Z/B);this.set(oa,aa,B,r);return this||q}r=Math.sqrt((oa-Z)*(oa-Z)+(I-aa)*(I-aa)+(M-B)*(M-B));.001>Math.abs(r)&&(r=1);(this||q).x=(oa-Z)/r;(this||q).y=(I-aa)/r;(this||q).z=(M-B)/r;(this||q).w=Math.acos((t+U+wa-1)/2);return this||q};D.min=function(r){(this||q).x=Math.min((this||q).x,r.x);(this||q).y=Math.min((this||
q).y,r.y);(this||q).z=Math.min((this||q).z,r.z);(this||q).w=Math.min((this||q).w,r.w);return this||q};D.max=function(r){(this||q).x=Math.max((this||q).x,r.x);(this||q).y=Math.max((this||q).y,r.y);(this||q).z=Math.max((this||q).z,r.z);(this||q).w=Math.max((this||q).w,r.w);return this||q};D.clamp=function(r,t){(this||q).x=Math.max(r.x,Math.min(t.x,(this||q).x));(this||q).y=Math.max(r.y,Math.min(t.y,(this||q).y));(this||q).z=Math.max(r.z,Math.min(t.z,(this||q).z));(this||q).w=Math.max(r.w,Math.min(t.w,
(this||q).w));return this||q};D.clampScalar=function(r,t){(this||q).x=Math.max(r,Math.min(t,(this||q).x));(this||q).y=Math.max(r,Math.min(t,(this||q).y));(this||q).z=Math.max(r,Math.min(t,(this||q).z));(this||q).w=Math.max(r,Math.min(t,(this||q).w));return this||q};D.clampLength=function(r,t){var B=this.length();return this.divideScalar(B||1).multiplyScalar(Math.max(r,Math.min(t,B)))};D.floor=function(){(this||q).x=Math.floor((this||q).x);(this||q).y=Math.floor((this||q).y);(this||q).z=Math.floor((this||
q).z);(this||q).w=Math.floor((this||q).w);return this||q};D.ceil=function(){(this||q).x=Math.ceil((this||q).x);(this||q).y=Math.ceil((this||q).y);(this||q).z=Math.ceil((this||q).z);(this||q).w=Math.ceil((this||q).w);return this||q};D.round=function(){(this||q).x=Math.round((this||q).x);(this||q).y=Math.round((this||q).y);(this||q).z=Math.round((this||q).z);(this||q).w=Math.round((this||q).w);return this||q};D.roundToZero=function(){(this||q).x=0>(this||q).x?Math.ceil((this||q).x):Math.floor((this||
q).x);(this||q).y=0>(this||q).y?Math.ceil((this||q).y):Math.floor((this||q).y);(this||q).z=0>(this||q).z?Math.ceil((this||q).z):Math.floor((this||q).z);(this||q).w=0>(this||q).w?Math.ceil((this||q).w):Math.floor((this||q).w);return this||q};D.negate=function(){(this||q).x=-(this||q).x;(this||q).y=-(this||q).y;(this||q).z=-(this||q).z;(this||q).w=-(this||q).w;return this||q};D.dot=function(r){return(this||q).x*r.x+(this||q).y*r.y+(this||q).z*r.z+(this||q).w*r.w};D.lengthSq=function(){return(this||
q).x*(this||q).x+(this||q).y*(this||q).y+(this||q).z*(this||q).z+(this||q).w*(this||q).w};D.length=function(){return Math.sqrt((this||q).x*(this||q).x+(this||q).y*(this||q).y+(this||q).z*(this||q).z+(this||q).w*(this||q).w)};D.manhattanLength=function(){return Math.abs((this||q).x)+Math.abs((this||q).y)+Math.abs((this||q).z)+Math.abs((this||q).w)};D.normalize=function(){return this.divideScalar(this.length()||1)};D.setLength=function(r){return this.normalize().multiplyScalar(r)};D.lerp=function(r,
t){(this||q).x+=(r.x-(this||q).x)*t;(this||q).y+=(r.y-(this||q).y)*t;(this||q).z+=(r.z-(this||q).z)*t;(this||q).w+=(r.w-(this||q).w)*t;return this||q};D.lerpVectors=function(r,t,B){(this||q).x=r.x+(t.x-r.x)*B;(this||q).y=r.y+(t.y-r.y)*B;(this||q).z=r.z+(t.z-r.z)*B;(this||q).w=r.w+(t.w-r.w)*B;return this||q};D.equals=function(r){return r.x===(this||q).x&&r.y===(this||q).y&&r.z===(this||q).z&&r.w===(this||q).w};D.fromArray=function(r,t){void 0===t&&(t=0);(this||q).x=r[t];(this||q).y=r[t+1];(this||q).z=
r[t+2];(this||q).w=r[t+3];return this||q};D.toArray=function(r,t){void 0===r&&(r=[]);void 0===t&&(t=0);r[t]=(this||q).x;r[t+1]=(this||q).y;r[t+2]=(this||q).z;r[t+3]=(this||q).w;return r};D.fromBufferAttribute=function(r,t,B){void 0!==B&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");(this||q).x=r.getX(t);(this||q).y=r.getY(t);(this||q).z=r.getZ(t);(this||q).w=r.getW(t);return this||q};D.random=function(){(this||q).x=Math.random();(this||q).y=Math.random();(this||
q).z=Math.random();(this||q).w=Math.random();return this||q};l(A,[{key:"width",get:function(){return(this||q).z},set:function(r){(this||q).z=r}},{key:"height",get:function(){return(this||q).w},set:function(r){(this||q).w=r}}]);return A}();Xj.prototype.isVector4=!0;var pt=function(A){function D(t,B,I){var M=A.call(this||q)||this||q;M.width=t;M.height=B;M.depth=1;M.scissor=new Xj(0,0,t,B);M.scissorTest=!1;M.viewport=new Xj(0,0,t,B);I=I||{};M.texture=new pn(void 0,I.mapping,I.wrapS,I.wrapT,I.magFilter,
I.minFilter,I.format,I.type,I.anisotropy,I.encoding);M.texture.image={};M.texture.image.width=t;M.texture.image.height=B;M.texture.image.depth=1;M.texture.generateMipmaps=void 0!==I.generateMipmaps?I.generateMipmaps:!1;M.texture.minFilter=void 0!==I.minFilter?I.minFilter:1006;M.depthBuffer=void 0!==I.depthBuffer?I.depthBuffer:!0;M.stencilBuffer=void 0!==I.stencilBuffer?I.stencilBuffer:!1;M.depthTexture=void 0!==I.depthTexture?I.depthTexture:null;return M}p(D,A);var r=D.prototype;r.setTexture=function(t){t.image=
{width:(this||q).width,height:(this||q).height,depth:(this||q).depth};(this||q).texture=t};r.setSize=function(t,B,I){void 0===I&&(I=1);if((this||q).width!==t||(this||q).height!==B||(this||q).depth!==I)(this||q).width=t,(this||q).height=B,(this||q).depth=I,(this||q).texture.image.width=t,(this||q).texture.image.height=B,(this||q).texture.image.depth=I,this.dispose();(this||q).viewport.set(0,0,t,B);(this||q).scissor.set(0,0,t,B)};r.clone=function(){return(new (this||q).constructor).copy(this||q)};r.copy=
function(t){(this||q).width=t.width;(this||q).height=t.height;(this||q).depth=t.depth;(this||q).viewport.copy(t.viewport);(this||q).texture=t.texture.clone();(this||q).depthBuffer=t.depthBuffer;(this||q).stencilBuffer=t.stencilBuffer;(this||q).depthTexture=t.depthTexture;return this||q};r.dispose=function(){this.dispatchEvent({type:"dispose"})};return D}(J);pt.prototype.isWebGLRenderTarget=!0;var Zda=function(A){function D(r,t,B){r=A.call(this||q,r,t,B)||this||q;r.samples=4;return r}p(D,A);D.prototype.copy=
function(r){A.prototype.copy.call(this||q,r);(this||q).samples=r.samples;return this||q};return D}(pt);Zda.prototype.isWebGLMultisampleRenderTarget=!0;var Cm=function(){function A(r,t,B,I){void 0===r&&(r=0);void 0===t&&(t=0);void 0===B&&(B=0);void 0===I&&(I=1);(this||q)._x=r;(this||q)._y=t;(this||q)._z=B;(this||q)._w=I}A.slerp=function(r,t,B,I){return B.copy(r).slerp(t,I)};A.slerpFlat=function(r,t,B,I,M,U,Z){var aa=B[I+0],oa=B[I+1],wa=B[I+2];B=B[I+3];I=M[U+0];var Oa=M[U+1],Ya=M[U+2];M=M[U+3];if(0===
Z)r[t+0]=aa,r[t+1]=oa,r[t+2]=wa,r[t+3]=B;else if(1===Z)r[t+0]=I,r[t+1]=Oa,r[t+2]=Ya,r[t+3]=M;else{if(B!==M||aa!==I||oa!==Oa||wa!==Ya){U=1-Z;var ab=aa*I+oa*Oa+wa*Ya+B*M,zb=0<=ab?1:-1,sb=1-ab*ab;sb>Number.EPSILON&&(sb=Math.sqrt(sb),ab=Math.atan2(sb,ab*zb),U=Math.sin(U*ab)/sb,Z=Math.sin(Z*ab)/sb);zb*=Z;aa=aa*U+I*zb;oa=oa*U+Oa*zb;wa=wa*U+Ya*zb;B=B*U+M*zb;U===1-Z&&(Z=1/Math.sqrt(aa*aa+oa*oa+wa*wa+B*B),aa*=Z,oa*=Z,wa*=Z,B*=Z)}r[t]=aa;r[t+1]=oa;r[t+2]=wa;r[t+3]=B}};A.multiplyQuaternionsFlat=function(r,t,
B,I,M,U){var Z=B[I],aa=B[I+1],oa=B[I+2];B=B[I+3];I=M[U];var wa=M[U+1],Oa=M[U+2];M=M[U+3];r[t]=Z*M+B*I+aa*Oa-oa*wa;r[t+1]=aa*M+B*wa+oa*I-Z*Oa;r[t+2]=oa*M+B*Oa+Z*wa-aa*I;r[t+3]=B*M-Z*I-aa*wa-oa*Oa;return r};var D=A.prototype;D.set=function(r,t,B,I){(this||q)._x=r;(this||q)._y=t;(this||q)._z=B;(this||q)._w=I;this._onChangeCallback();return this||q};D.clone=function(){return new (this||q).constructor((this||q)._x,(this||q)._y,(this||q)._z,(this||q)._w)};D.copy=function(r){(this||q)._x=r.x;(this||q)._y=
r.y;(this||q)._z=r.z;(this||q)._w=r.w;this._onChangeCallback();return this||q};D.setFromEuler=function(r,t){if(!r||!r.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var B=r._x,I=r._y,M=r._z;r=r._order;var U=Math.cos,Z=Math.sin,aa=U(B/2),oa=U(I/2);U=U(M/2);B=Z(B/2);I=Z(I/2);M=Z(M/2);switch(r){case "XYZ":(this||q)._x=B*oa*U+aa*I*M;(this||q)._y=aa*I*U-B*oa*M;(this||q)._z=aa*oa*M+B*I*U;(this||q)._w=aa*oa*U-B*I*M;break;case "YXZ":(this||
q)._x=B*oa*U+aa*I*M;(this||q)._y=aa*I*U-B*oa*M;(this||q)._z=aa*oa*M-B*I*U;(this||q)._w=aa*oa*U+B*I*M;break;case "ZXY":(this||q)._x=B*oa*U-aa*I*M;(this||q)._y=aa*I*U+B*oa*M;(this||q)._z=aa*oa*M+B*I*U;(this||q)._w=aa*oa*U-B*I*M;break;case "ZYX":(this||q)._x=B*oa*U-aa*I*M;(this||q)._y=aa*I*U+B*oa*M;(this||q)._z=aa*oa*M-B*I*U;(this||q)._w=aa*oa*U+B*I*M;break;case "YZX":(this||q)._x=B*oa*U+aa*I*M;(this||q)._y=aa*I*U+B*oa*M;(this||q)._z=aa*oa*M-B*I*U;(this||q)._w=aa*oa*U-B*I*M;break;case "XZY":(this||q)._x=
B*oa*U-aa*I*M;(this||q)._y=aa*I*U-B*oa*M;(this||q)._z=aa*oa*M+B*I*U;(this||q)._w=aa*oa*U+B*I*M;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}!1!==t&&this._onChangeCallback();return this||q};D.setFromAxisAngle=function(r,t){t/=2;var B=Math.sin(t);(this||q)._x=r.x*B;(this||q)._y=r.y*B;(this||q)._z=r.z*B;(this||q)._w=Math.cos(t);this._onChangeCallback();return this||q};D.setFromRotationMatrix=function(r){var t=r.elements,B=t[0];r=t[4];var I=t[8],M=t[1],
U=t[5],Z=t[9],aa=t[2],oa=t[6];t=t[10];var wa=B+U+t;0<wa?(B=.5/Math.sqrt(wa+1),(this||q)._w=.25/B,(this||q)._x=(oa-Z)*B,(this||q)._y=(I-aa)*B,(this||q)._z=(M-r)*B):B>U&&B>t?(B=2*Math.sqrt(1+B-U-t),(this||q)._w=(oa-Z)/B,(this||q)._x=.25*B,(this||q)._y=(r+M)/B,(this||q)._z=(I+aa)/B):U>t?(B=2*Math.sqrt(1+U-B-t),(this||q)._w=(I-aa)/B,(this||q)._x=(r+M)/B,(this||q)._y=.25*B,(this||q)._z=(Z+oa)/B):(B=2*Math.sqrt(1+t-B-U),(this||q)._w=(M-r)/B,(this||q)._x=(I+aa)/B,(this||q)._y=(Z+oa)/B,(this||q)._z=.25*B);
this._onChangeCallback();return this||q};D.setFromUnitVectors=function(r,t){var B=r.dot(t)+1;1E-6>B?(B=0,Math.abs(r.x)>Math.abs(r.z)?((this||q)._x=-r.y,(this||q)._y=r.x,(this||q)._z=0):((this||q)._x=0,(this||q)._y=-r.z,(this||q)._z=r.y)):((this||q)._x=r.y*t.z-r.z*t.y,(this||q)._y=r.z*t.x-r.x*t.z,(this||q)._z=r.x*t.y-r.y*t.x);(this||q)._w=B;return this.normalize()};D.angleTo=function(r){return 2*Math.acos(Math.abs(oh.clamp(this.dot(r),-1,1)))};D.rotateTowards=function(r,t){var B=this.angleTo(r);if(0===
B)return this||q;this.slerp(r,Math.min(1,t/B));return this||q};D.identity=function(){return this.set(0,0,0,1)};D.invert=function(){return this.conjugate()};D.conjugate=function(){(this||q)._x*=-1;(this||q)._y*=-1;(this||q)._z*=-1;this._onChangeCallback();return this||q};D.dot=function(r){return(this||q)._x*r._x+(this||q)._y*r._y+(this||q)._z*r._z+(this||q)._w*r._w};D.lengthSq=function(){return(this||q)._x*(this||q)._x+(this||q)._y*(this||q)._y+(this||q)._z*(this||q)._z+(this||q)._w*(this||q)._w};
D.length=function(){return Math.sqrt((this||q)._x*(this||q)._x+(this||q)._y*(this||q)._y+(this||q)._z*(this||q)._z+(this||q)._w*(this||q)._w)};D.normalize=function(){var r=this.length();0===r?((this||q)._x=0,(this||q)._y=0,(this||q)._z=0,(this||q)._w=1):(r=1/r,(this||q)._x*=r,(this||q)._y*=r,(this||q)._z*=r,(this||q)._w*=r);this._onChangeCallback();return this||q};D.multiply=function(r,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),
this.multiplyQuaternions(r,t)):this.multiplyQuaternions(this||q,r)};D.premultiply=function(r){return this.multiplyQuaternions(r,this||q)};D.multiplyQuaternions=function(r,t){var B=r._x,I=r._y,M=r._z;r=r._w;var U=t._x,Z=t._y,aa=t._z;t=t._w;(this||q)._x=B*t+r*U+I*aa-M*Z;(this||q)._y=I*t+r*Z+M*U-B*aa;(this||q)._z=M*t+r*aa+B*Z-I*U;(this||q)._w=r*t-B*U-I*Z-M*aa;this._onChangeCallback();return this||q};D.slerp=function(r,t){if(0===t)return this||q;if(1===t)return this.copy(r);var B=(this||q)._x,I=(this||
q)._y,M=(this||q)._z,U=(this||q)._w,Z=U*r._w+B*r._x+I*r._y+M*r._z;0>Z?((this||q)._w=-r._w,(this||q)._x=-r._x,(this||q)._y=-r._y,(this||q)._z=-r._z,Z=-Z):this.copy(r);if(1<=Z)return(this||q)._w=U,(this||q)._x=B,(this||q)._y=I,(this||q)._z=M,this||q;r=1-Z*Z;if(r<=Number.EPSILON)return Z=1-t,(this||q)._w=Z*U+t*(this||q)._w,(this||q)._x=Z*B+t*(this||q)._x,(this||q)._y=Z*I+t*(this||q)._y,(this||q)._z=Z*M+t*(this||q)._z,this.normalize(),this._onChangeCallback(),this||q;r=Math.sqrt(r);var aa=Math.atan2(r,
Z);Z=Math.sin((1-t)*aa)/r;t=Math.sin(t*aa)/r;(this||q)._w=U*Z+(this||q)._w*t;(this||q)._x=B*Z+(this||q)._x*t;(this||q)._y=I*Z+(this||q)._y*t;(this||q)._z=M*Z+(this||q)._z*t;this._onChangeCallback();return this||q};D.equals=function(r){return r._x===(this||q)._x&&r._y===(this||q)._y&&r._z===(this||q)._z&&r._w===(this||q)._w};D.fromArray=function(r,t){void 0===t&&(t=0);(this||q)._x=r[t];(this||q)._y=r[t+1];(this||q)._z=r[t+2];(this||q)._w=r[t+3];this._onChangeCallback();return this||q};D.toArray=function(r,
t){void 0===r&&(r=[]);void 0===t&&(t=0);r[t]=(this||q)._x;r[t+1]=(this||q)._y;r[t+2]=(this||q)._z;r[t+3]=(this||q)._w;return r};D.fromBufferAttribute=function(r,t){(this||q)._x=r.getX(t);(this||q)._y=r.getY(t);(this||q)._z=r.getZ(t);(this||q)._w=r.getW(t);return this||q};D._onChange=function(r){(this||q)._onChangeCallback=r;return this||q};D._onChangeCallback=function(){};l(A,[{key:"x",get:function(){return(this||q)._x},set:function(r){(this||q)._x=r;this._onChangeCallback()}},{key:"y",get:function(){return(this||
q)._y},set:function(r){(this||q)._y=r;this._onChangeCallback()}},{key:"z",get:function(){return(this||q)._z},set:function(r){(this||q)._z=r;this._onChangeCallback()}},{key:"w",get:function(){return(this||q)._w},set:function(r){(this||q)._w=r;this._onChangeCallback()}}]);return A}();Cm.prototype.isQuaternion=!0;var jc=function(){function A(r,t,B){void 0===r&&(r=0);void 0===t&&(t=0);void 0===B&&(B=0);(this||q).x=r;(this||q).y=t;(this||q).z=B}var D=A.prototype;D.set=function(r,t,B){void 0===B&&(B=(this||
q).z);(this||q).x=r;(this||q).y=t;(this||q).z=B;return this||q};D.setScalar=function(r){(this||q).x=r;(this||q).y=r;(this||q).z=r;return this||q};D.setX=function(r){(this||q).x=r;return this||q};D.setY=function(r){(this||q).y=r;return this||q};D.setZ=function(r){(this||q).z=r;return this||q};D.setComponent=function(r,t){switch(r){case 0:(this||q).x=t;break;case 1:(this||q).y=t;break;case 2:(this||q).z=t;break;default:throw Error("index is out of range: "+r);}return this||q};D.getComponent=function(r){switch(r){case 0:return(this||
q).x;case 1:return(this||q).y;case 2:return(this||q).z;default:throw Error("index is out of range: "+r);}};D.clone=function(){return new (this||q).constructor((this||q).x,(this||q).y,(this||q).z)};D.copy=function(r){(this||q).x=r.x;(this||q).y=r.y;(this||q).z=r.z;return this||q};D.add=function(r,t){if(void 0!==t)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,t);(this||q).x+=r.x;(this||q).y+=r.y;(this||q).z+=r.z;return this||
q};D.addScalar=function(r){(this||q).x+=r;(this||q).y+=r;(this||q).z+=r;return this||q};D.addVectors=function(r,t){(this||q).x=r.x+t.x;(this||q).y=r.y+t.y;(this||q).z=r.z+t.z;return this||q};D.addScaledVector=function(r,t){(this||q).x+=r.x*t;(this||q).y+=r.y*t;(this||q).z+=r.z*t;return this||q};D.sub=function(r,t){if(void 0!==t)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,t);(this||q).x-=r.x;(this||q).y-=r.y;(this||
q).z-=r.z;return this||q};D.subScalar=function(r){(this||q).x-=r;(this||q).y-=r;(this||q).z-=r;return this||q};D.subVectors=function(r,t){(this||q).x=r.x-t.x;(this||q).y=r.y-t.y;(this||q).z=r.z-t.z;return this||q};D.multiply=function(r,t){if(void 0!==t)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(r,t);(this||q).x*=r.x;(this||q).y*=r.y;(this||q).z*=r.z;return this||q};D.multiplyScalar=function(r){(this||
q).x*=r;(this||q).y*=r;(this||q).z*=r;return this||q};D.multiplyVectors=function(r,t){(this||q).x=r.x*t.x;(this||q).y=r.y*t.y;(this||q).z=r.z*t.z;return this||q};D.applyEuler=function(r){r&&r.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion($da.setFromEuler(r))};D.applyAxisAngle=function(r,t){return this.applyQuaternion($da.setFromAxisAngle(r,t))};D.applyMatrix3=function(r){var t=(this||q).x,B=(this||
q).y,I=(this||q).z;r=r.elements;(this||q).x=r[0]*t+r[3]*B+r[6]*I;(this||q).y=r[1]*t+r[4]*B+r[7]*I;(this||q).z=r[2]*t+r[5]*B+r[8]*I;return this||q};D.applyNormalMatrix=function(r){return this.applyMatrix3(r).normalize()};D.applyMatrix4=function(r){var t=(this||q).x,B=(this||q).y,I=(this||q).z;r=r.elements;var M=1/(r[3]*t+r[7]*B+r[11]*I+r[15]);(this||q).x=(r[0]*t+r[4]*B+r[8]*I+r[12])*M;(this||q).y=(r[1]*t+r[5]*B+r[9]*I+r[13])*M;(this||q).z=(r[2]*t+r[6]*B+r[10]*I+r[14])*M;return this||q};D.applyQuaternion=
function(r){var t=(this||q).x,B=(this||q).y,I=(this||q).z,M=r.x,U=r.y,Z=r.z;r=r.w;var aa=r*t+U*I-Z*B,oa=r*B+Z*t-M*I,wa=r*I+M*B-U*t;t=-M*t-U*B-Z*I;(this||q).x=aa*r+t*-M+oa*-Z-wa*-U;(this||q).y=oa*r+t*-U+wa*-M-aa*-Z;(this||q).z=wa*r+t*-Z+aa*-U-oa*-M;return this||q};D.project=function(r){return this.applyMatrix4(r.matrixWorldInverse).applyMatrix4(r.projectionMatrix)};D.unproject=function(r){return this.applyMatrix4(r.projectionMatrixInverse).applyMatrix4(r.matrixWorld)};D.transformDirection=function(r){var t=
(this||q).x,B=(this||q).y,I=(this||q).z;r=r.elements;(this||q).x=r[0]*t+r[4]*B+r[8]*I;(this||q).y=r[1]*t+r[5]*B+r[9]*I;(this||q).z=r[2]*t+r[6]*B+r[10]*I;return this.normalize()};D.divide=function(r){(this||q).x/=r.x;(this||q).y/=r.y;(this||q).z/=r.z;return this||q};D.divideScalar=function(r){return this.multiplyScalar(1/r)};D.min=function(r){(this||q).x=Math.min((this||q).x,r.x);(this||q).y=Math.min((this||q).y,r.y);(this||q).z=Math.min((this||q).z,r.z);return this||q};D.max=function(r){(this||q).x=
Math.max((this||q).x,r.x);(this||q).y=Math.max((this||q).y,r.y);(this||q).z=Math.max((this||q).z,r.z);return this||q};D.clamp=function(r,t){(this||q).x=Math.max(r.x,Math.min(t.x,(this||q).x));(this||q).y=Math.max(r.y,Math.min(t.y,(this||q).y));(this||q).z=Math.max(r.z,Math.min(t.z,(this||q).z));return this||q};D.clampScalar=function(r,t){(this||q).x=Math.max(r,Math.min(t,(this||q).x));(this||q).y=Math.max(r,Math.min(t,(this||q).y));(this||q).z=Math.max(r,Math.min(t,(this||q).z));return this||q};D.clampLength=
function(r,t){var B=this.length();return this.divideScalar(B||1).multiplyScalar(Math.max(r,Math.min(t,B)))};D.floor=function(){(this||q).x=Math.floor((this||q).x);(this||q).y=Math.floor((this||q).y);(this||q).z=Math.floor((this||q).z);return this||q};D.ceil=function(){(this||q).x=Math.ceil((this||q).x);(this||q).y=Math.ceil((this||q).y);(this||q).z=Math.ceil((this||q).z);return this||q};D.round=function(){(this||q).x=Math.round((this||q).x);(this||q).y=Math.round((this||q).y);(this||q).z=Math.round((this||
q).z);return this||q};D.roundToZero=function(){(this||q).x=0>(this||q).x?Math.ceil((this||q).x):Math.floor((this||q).x);(this||q).y=0>(this||q).y?Math.ceil((this||q).y):Math.floor((this||q).y);(this||q).z=0>(this||q).z?Math.ceil((this||q).z):Math.floor((this||q).z);return this||q};D.negate=function(){(this||q).x=-(this||q).x;(this||q).y=-(this||q).y;(this||q).z=-(this||q).z;return this||q};D.dot=function(r){return(this||q).x*r.x+(this||q).y*r.y+(this||q).z*r.z};D.lengthSq=function(){return(this||
q).x*(this||q).x+(this||q).y*(this||q).y+(this||q).z*(this||q).z};D.length=function(){return Math.sqrt((this||q).x*(this||q).x+(this||q).y*(this||q).y+(this||q).z*(this||q).z)};D.manhattanLength=function(){return Math.abs((this||q).x)+Math.abs((this||q).y)+Math.abs((this||q).z)};D.normalize=function(){return this.divideScalar(this.length()||1)};D.setLength=function(r){return this.normalize().multiplyScalar(r)};D.lerp=function(r,t){(this||q).x+=(r.x-(this||q).x)*t;(this||q).y+=(r.y-(this||q).y)*t;
(this||q).z+=(r.z-(this||q).z)*t;return this||q};D.lerpVectors=function(r,t,B){(this||q).x=r.x+(t.x-r.x)*B;(this||q).y=r.y+(t.y-r.y)*B;(this||q).z=r.z+(t.z-r.z)*B;return this||q};D.cross=function(r,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(r,t)):this.crossVectors(this||q,r)};D.crossVectors=function(r,t){var B=r.x,I=r.y;r=r.z;var M=t.x,U=t.y;t=t.z;(this||q).x=I*t-r*U;(this||q).y=r*M-B*t;(this||q).z=
B*U-I*M;return this||q};D.projectOnVector=function(r){var t=r.lengthSq();if(0===t)return this.set(0,0,0);t=r.dot(this||q)/t;return this.copy(r).multiplyScalar(t)};D.projectOnPlane=function(r){NY.copy(this||q).projectOnVector(r);return this.sub(NY)};D.reflect=function(r){return this.sub(NY.copy(r).multiplyScalar(2*this.dot(r)))};D.angleTo=function(r){var t=Math.sqrt(this.lengthSq()*r.lengthSq());if(0===t)return Math.PI/2;r=this.dot(r)/t;return Math.acos(oh.clamp(r,-1,1))};D.distanceTo=function(r){return Math.sqrt(this.distanceToSquared(r))};
D.distanceToSquared=function(r){var t=(this||q).x-r.x,B=(this||q).y-r.y;r=(this||q).z-r.z;return t*t+B*B+r*r};D.manhattanDistanceTo=function(r){return Math.abs((this||q).x-r.x)+Math.abs((this||q).y-r.y)+Math.abs((this||q).z-r.z)};D.setFromSpherical=function(r){return this.setFromSphericalCoords(r.radius,r.phi,r.theta)};D.setFromSphericalCoords=function(r,t,B){var I=Math.sin(t)*r;(this||q).x=I*Math.sin(B);(this||q).y=Math.cos(t)*r;(this||q).z=I*Math.cos(B);return this||q};D.setFromCylindrical=function(r){return this.setFromCylindricalCoords(r.radius,
r.theta,r.y)};D.setFromCylindricalCoords=function(r,t,B){(this||q).x=r*Math.sin(t);(this||q).y=B;(this||q).z=r*Math.cos(t);return this||q};D.setFromMatrixPosition=function(r){r=r.elements;(this||q).x=r[12];(this||q).y=r[13];(this||q).z=r[14];return this||q};D.setFromMatrixScale=function(r){var t=this.setFromMatrixColumn(r,0).length(),B=this.setFromMatrixColumn(r,1).length();r=this.setFromMatrixColumn(r,2).length();(this||q).x=t;(this||q).y=B;(this||q).z=r;return this||q};D.setFromMatrixColumn=function(r,
t){return this.fromArray(r.elements,4*t)};D.setFromMatrix3Column=function(r,t){return this.fromArray(r.elements,3*t)};D.equals=function(r){return r.x===(this||q).x&&r.y===(this||q).y&&r.z===(this||q).z};D.fromArray=function(r,t){void 0===t&&(t=0);(this||q).x=r[t];(this||q).y=r[t+1];(this||q).z=r[t+2];return this||q};D.toArray=function(r,t){void 0===r&&(r=[]);void 0===t&&(t=0);r[t]=(this||q).x;r[t+1]=(this||q).y;r[t+2]=(this||q).z;return r};D.fromBufferAttribute=function(r,t,B){void 0!==B&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");
(this||q).x=r.getX(t);(this||q).y=r.getY(t);(this||q).z=r.getZ(t);return this||q};D.random=function(){(this||q).x=Math.random();(this||q).y=Math.random();(this||q).z=Math.random();return this||q};return A}();jc.prototype.isVector3=!0;var NY=new jc,$da=new Cm,no=function(){function A(r,t){void 0===r&&(r=new jc(Infinity,Infinity,Infinity));void 0===t&&(t=new jc(-Infinity,-Infinity,-Infinity));(this||q).min=r;(this||q).max=t}var D=A.prototype;D.set=function(r,t){(this||q).min.copy(r);(this||q).max.copy(t);
return this||q};D.setFromArray=function(r){for(var t=Infinity,B=Infinity,I=Infinity,M=-Infinity,U=-Infinity,Z=-Infinity,aa=0,oa=r.length;aa<oa;aa+=3){var wa=r[aa],Oa=r[aa+1],Ya=r[aa+2];wa<t&&(t=wa);Oa<B&&(B=Oa);Ya<I&&(I=Ya);wa>M&&(M=wa);Oa>U&&(U=Oa);Ya>Z&&(Z=Ya)}(this||q).min.set(t,B,I);(this||q).max.set(M,U,Z);return this||q};D.setFromBufferAttribute=function(r){for(var t=Infinity,B=Infinity,I=Infinity,M=-Infinity,U=-Infinity,Z=-Infinity,aa=0,oa=r.count;aa<oa;aa++){var wa=r.getX(aa),Oa=r.getY(aa),
Ya=r.getZ(aa);wa<t&&(t=wa);Oa<B&&(B=Oa);Ya<I&&(I=Ya);wa>M&&(M=wa);Oa>U&&(U=Oa);Ya>Z&&(Z=Ya)}(this||q).min.set(t,B,I);(this||q).max.set(M,U,Z);return this||q};D.setFromPoints=function(r){this.makeEmpty();for(var t=0,B=r.length;t<B;t++)this.expandByPoint(r[t]);return this||q};D.setFromCenterAndSize=function(r,t){t=fG.copy(t).multiplyScalar(.5);(this||q).min.copy(r).sub(t);(this||q).max.copy(r).add(t);return this||q};D.setFromObject=function(r){this.makeEmpty();return this.expandByObject(r)};D.clone=
function(){return(new (this||q).constructor).copy(this||q)};D.copy=function(r){(this||q).min.copy(r.min);(this||q).max.copy(r.max);return this||q};D.makeEmpty=function(){(this||q).min.x=(this||q).min.y=(this||q).min.z=Infinity;(this||q).max.x=(this||q).max.y=(this||q).max.z=-Infinity;return this||q};D.isEmpty=function(){return(this||q).max.x<(this||q).min.x||(this||q).max.y<(this||q).min.y||(this||q).max.z<(this||q).min.z};D.getCenter=function(r){void 0===r&&(console.warn("THREE.Box3: .getCenter() target is now required"),
r=new jc);return this.isEmpty()?r.set(0,0,0):r.addVectors((this||q).min,(this||q).max).multiplyScalar(.5)};D.getSize=function(r){void 0===r&&(console.warn("THREE.Box3: .getSize() target is now required"),r=new jc);return this.isEmpty()?r.set(0,0,0):r.subVectors((this||q).max,(this||q).min)};D.expandByPoint=function(r){(this||q).min.min(r);(this||q).max.max(r);return this||q};D.expandByVector=function(r){(this||q).min.sub(r);(this||q).max.add(r);return this||q};D.expandByScalar=function(r){(this||
q).min.addScalar(-r);(this||q).max.addScalar(r);return this||q};D.expandByObject=function(r){r.updateWorldMatrix(!1,!1);var t=r.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),OY.copy(t.boundingBox),OY.applyMatrix4(r.matrixWorld),this.union(OY));r=r.children;t=0;for(var B=r.length;t<B;t++)this.expandByObject(r[t]);return this||q};D.containsPoint=function(r){return r.x<(this||q).min.x||r.x>(this||q).max.x||r.y<(this||q).min.y||r.y>(this||q).max.y||r.z<(this||q).min.z||r.z>(this||
q).max.z?!1:!0};D.containsBox=function(r){return(this||q).min.x<=r.min.x&&r.max.x<=(this||q).max.x&&(this||q).min.y<=r.min.y&&r.max.y<=(this||q).max.y&&(this||q).min.z<=r.min.z&&r.max.z<=(this||q).max.z};D.getParameter=function(r,t){void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new jc);return t.set((r.x-(this||q).min.x)/((this||q).max.x-(this||q).min.x),(r.y-(this||q).min.y)/((this||q).max.y-(this||q).min.y),(r.z-(this||q).min.z)/((this||q).max.z-(this||q).min.z))};
D.intersectsBox=function(r){return r.max.x<(this||q).min.x||r.min.x>(this||q).max.x||r.max.y<(this||q).min.y||r.min.y>(this||q).max.y||r.max.z<(this||q).min.z||r.min.z>(this||q).max.z?!1:!0};D.intersectsSphere=function(r){this.clampPoint(r.center,fG);return fG.distanceToSquared(r.center)<=r.radius*r.radius};D.intersectsPlane=function(r){if(0<r.normal.x){var t=r.normal.x*(this||q).min.x;var B=r.normal.x*(this||q).max.x}else t=r.normal.x*(this||q).max.x,B=r.normal.x*(this||q).min.x;0<r.normal.y?(t+=
r.normal.y*(this||q).min.y,B+=r.normal.y*(this||q).max.y):(t+=r.normal.y*(this||q).max.y,B+=r.normal.y*(this||q).min.y);0<r.normal.z?(t+=r.normal.z*(this||q).min.z,B+=r.normal.z*(this||q).max.z):(t+=r.normal.z*(this||q).max.z,B+=r.normal.z*(this||q).min.z);return t<=-r.constant&&B>=-r.constant};D.intersectsTriangle=function(r){if(this.isEmpty())return!1;this.getCenter(gG);XO.subVectors((this||q).max,gG);FB.subVectors(r.a,gG);GB.subVectors(r.b,gG);HB.subVectors(r.c,gG);mv.subVectors(GB,FB);nv.subVectors(HB,
GB);oy.subVectors(FB,HB);r=[0,-mv.z,mv.y,0,-nv.z,nv.y,0,-oy.z,oy.y,mv.z,0,-mv.x,nv.z,0,-nv.x,oy.z,0,-oy.x,-mv.y,mv.x,0,-nv.y,nv.x,0,-oy.y,oy.x,0];if(!T(r,FB,GB,HB,XO))return!1;r=[1,0,0,0,1,0,0,0,1];if(!T(r,FB,GB,HB,XO))return!1;YO.crossVectors(mv,nv);r=[YO.x,YO.y,YO.z];return T(r,FB,GB,HB,XO)};D.clampPoint=function(r,t){void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new jc);return t.copy(r).clamp((this||q).min,(this||q).max)};D.distanceToPoint=function(r){return fG.copy(r).clamp((this||
q).min,(this||q).max).sub(r).length()};D.getBoundingSphere=function(r){void 0===r&&console.error("THREE.Box3: .getBoundingSphere() target is now required");this.getCenter(r.center);r.radius=.5*this.getSize(fG).length();return r};D.intersect=function(r){(this||q).min.max(r.min);(this||q).max.min(r.max);this.isEmpty()&&this.makeEmpty();return this||q};D.union=function(r){(this||q).min.min(r.min);(this||q).max.max(r.max);return this||q};D.applyMatrix4=function(r){if(this.isEmpty())return this||q;qt[0].set((this||
q).min.x,(this||q).min.y,(this||q).min.z).applyMatrix4(r);qt[1].set((this||q).min.x,(this||q).min.y,(this||q).max.z).applyMatrix4(r);qt[2].set((this||q).min.x,(this||q).max.y,(this||q).min.z).applyMatrix4(r);qt[3].set((this||q).min.x,(this||q).max.y,(this||q).max.z).applyMatrix4(r);qt[4].set((this||q).max.x,(this||q).min.y,(this||q).min.z).applyMatrix4(r);qt[5].set((this||q).max.x,(this||q).min.y,(this||q).max.z).applyMatrix4(r);qt[6].set((this||q).max.x,(this||q).max.y,(this||q).min.z).applyMatrix4(r);
qt[7].set((this||q).max.x,(this||q).max.y,(this||q).max.z).applyMatrix4(r);this.setFromPoints(qt);return this||q};D.translate=function(r){(this||q).min.add(r);(this||q).max.add(r);return this||q};D.equals=function(r){return r.min.equals((this||q).min)&&r.max.equals((this||q).max)};return A}();no.prototype.isBox3=!0;var qt=[new jc,new jc,new jc,new jc,new jc,new jc,new jc,new jc],fG=new jc,OY=new no,FB=new jc,GB=new jc,HB=new jc,mv=new jc,nv=new jc,oy=new jc,gG=new jc,XO=new jc,YO=new jc,hy=new jc,
Fya=new no,ov=function(){function A(r,t){void 0===r&&(r=new jc);void 0===t&&(t=-1);(this||q).center=r;(this||q).radius=t}var D=A.prototype;D.set=function(r,t){(this||q).center.copy(r);(this||q).radius=t;return this||q};D.setFromPoints=function(r,t){var B=(this||q).center;void 0!==t?B.copy(t):Fya.setFromPoints(r).getCenter(B);for(var I=t=0,M=r.length;I<M;I++)t=Math.max(t,B.distanceToSquared(r[I]));(this||q).radius=Math.sqrt(t);return this||q};D.copy=function(r){(this||q).center.copy(r.center);(this||
q).radius=r.radius;return this||q};D.isEmpty=function(){return 0>(this||q).radius};D.makeEmpty=function(){(this||q).center.set(0,0,0);(this||q).radius=-1;return this||q};D.containsPoint=function(r){return r.distanceToSquared((this||q).center)<=(this||q).radius*(this||q).radius};D.distanceToPoint=function(r){return r.distanceTo((this||q).center)-(this||q).radius};D.intersectsSphere=function(r){var t=(this||q).radius+r.radius;return r.center.distanceToSquared((this||q).center)<=t*t};D.intersectsBox=
function(r){return r.intersectsSphere(this||q)};D.intersectsPlane=function(r){return Math.abs(r.distanceToPoint((this||q).center))<=(this||q).radius};D.clampPoint=function(r,t){var B=(this||q).center.distanceToSquared(r);void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new jc);t.copy(r);B>(this||q).radius*(this||q).radius&&(t.sub((this||q).center).normalize(),t.multiplyScalar((this||q).radius).add((this||q).center));return t};D.getBoundingBox=function(r){void 0===
r&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),r=new no);if(this.isEmpty())return r.makeEmpty(),r;r.set((this||q).center,(this||q).center);r.expandByScalar((this||q).radius);return r};D.applyMatrix4=function(r){(this||q).center.applyMatrix4(r);(this||q).radius*=r.getMaxScaleOnAxis();return this||q};D.translate=function(r){(this||q).center.add(r);return this||q};D.equals=function(r){return r.center.equals((this||q).center)&&r.radius===(this||q).radius};D.clone=function(){return(new (this||
q).constructor).copy(this||q)};return A}(),rt=new jc,PY=new jc,ZO=new jc,pv=new jc,QY=new jc,$O=new jc,RY=new jc,lv=function(){function A(r,t){void 0===r&&(r=new jc);void 0===t&&(t=new jc(0,0,-1));(this||q).origin=r;(this||q).direction=t}var D=A.prototype;D.set=function(r,t){(this||q).origin.copy(r);(this||q).direction.copy(t);return this||q};D.copy=function(r){(this||q).origin.copy(r.origin);(this||q).direction.copy(r.direction);return this||q};D.at=function(r,t){void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),
t=new jc);return t.copy((this||q).direction).multiplyScalar(r).add((this||q).origin)};D.lookAt=function(r){(this||q).direction.copy(r).sub((this||q).origin).normalize();return this||q};D.recast=function(r){(this||q).origin.copy(this.at(r,rt));return this||q};D.closestPointToPoint=function(r,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new jc);t.subVectors(r,(this||q).origin);r=t.dot((this||q).direction);return 0>r?t.copy((this||q).origin):t.copy((this||
q).direction).multiplyScalar(r).add((this||q).origin)};D.distanceToPoint=function(r){return Math.sqrt(this.distanceSqToPoint(r))};D.distanceSqToPoint=function(r){var t=rt.subVectors(r,(this||q).origin).dot((this||q).direction);if(0>t)return(this||q).origin.distanceToSquared(r);rt.copy((this||q).direction).multiplyScalar(t).add((this||q).origin);return rt.distanceToSquared(r)};D.distanceSqToSegment=function(r,t,B,I){PY.copy(r).add(t).multiplyScalar(.5);ZO.copy(t).sub(r).normalize();pv.copy((this||
q).origin).sub(PY);var M=.5*r.distanceTo(t),U=-(this||q).direction.dot(ZO),Z=pv.dot((this||q).direction),aa=-pv.dot(ZO),oa=pv.lengthSq(),wa=Math.abs(1-U*U);if(0<wa){r=U*aa-Z;t=U*Z-aa;var Oa=M*wa;0<=r?t>=-Oa?t<=Oa?(M=1/wa,r*=M,t*=M,U=r*(r+U*t+2*Z)+t*(U*r+t+2*aa)+oa):(t=M,r=Math.max(0,-(U*t+Z)),U=-r*r+t*(t+2*aa)+oa):(t=-M,r=Math.max(0,-(U*t+Z)),U=-r*r+t*(t+2*aa)+oa):t<=-Oa?(r=Math.max(0,-(-U*M+Z)),t=0<r?-M:Math.min(Math.max(-M,-aa),M),U=-r*r+t*(t+2*aa)+oa):t<=Oa?(r=0,t=Math.min(Math.max(-M,-aa),M),
U=t*(t+2*aa)+oa):(r=Math.max(0,-(U*M+Z)),t=0<r?M:Math.min(Math.max(-M,-aa),M),U=-r*r+t*(t+2*aa)+oa)}else t=0<U?-M:M,r=Math.max(0,-(U*t+Z)),U=-r*r+t*(t+2*aa)+oa;B&&B.copy((this||q).direction).multiplyScalar(r).add((this||q).origin);I&&I.copy(ZO).multiplyScalar(t).add(PY);return U};D.intersectSphere=function(r,t){rt.subVectors(r.center,(this||q).origin);var B=rt.dot((this||q).direction),I=rt.dot(rt)-B*B;r=r.radius*r.radius;if(I>r)return null;r=Math.sqrt(r-I);I=B-r;B+=r;return 0>I&&0>B?null:0>I?this.at(B,
t):this.at(I,t)};D.intersectsSphere=function(r){return this.distanceSqToPoint(r.center)<=r.radius*r.radius};D.distanceToPlane=function(r){var t=r.normal.dot((this||q).direction);if(0===t)return 0===r.distanceToPoint((this||q).origin)?0:null;r=-((this||q).origin.dot(r.normal)+r.constant)/t;return 0<=r?r:null};D.intersectPlane=function(r,t){r=this.distanceToPlane(r);return null===r?null:this.at(r,t)};D.intersectsPlane=function(r){var t=r.distanceToPoint((this||q).origin);return 0===t||0>r.normal.dot((this||
q).direction)*t?!0:!1};D.intersectBox=function(r,t){var B=1/(this||q).direction.x;var I=1/(this||q).direction.y;var M=1/(this||q).direction.z,U=(this||q).origin;if(0<=B){var Z=(r.min.x-U.x)*B;B*=r.max.x-U.x}else Z=(r.max.x-U.x)*B,B*=r.min.x-U.x;if(0<=I){var aa=(r.min.y-U.y)*I;I*=r.max.y-U.y}else aa=(r.max.y-U.y)*I,I*=r.min.y-U.y;if(Z>I||aa>B)return null;if(aa>Z||Z!==Z)Z=aa;if(I<B||B!==B)B=I;0<=M?(aa=(r.min.z-U.z)*M,r=(r.max.z-U.z)*M):(aa=(r.max.z-U.z)*M,r=(r.min.z-U.z)*M);if(Z>r||aa>B)return null;
if(aa>Z||Z!==Z)Z=aa;if(r<B||B!==B)B=r;return 0>B?null:this.at(0<=Z?Z:B,t)};D.intersectsBox=function(r){return null!==this.intersectBox(r,rt)};D.intersectTriangle=function(r,t,B,I,M){QY.subVectors(t,r);$O.subVectors(B,r);RY.crossVectors(QY,$O);t=(this||q).direction.dot(RY);if(0<t){if(I)return null;I=1}else if(0>t)I=-1,t=-t;else return null;pv.subVectors((this||q).origin,r);r=I*(this||q).direction.dot($O.crossVectors(pv,$O));if(0>r)return null;B=I*(this||q).direction.dot(QY.cross(pv));if(0>B||r+B>t)return null;
r=-I*pv.dot(RY);return 0>r?null:this.at(r/t,M)};D.applyMatrix4=function(r){(this||q).origin.applyMatrix4(r);(this||q).direction.transformDirection(r);return this||q};D.equals=function(r){return r.origin.equals((this||q).origin)&&r.direction.equals((this||q).direction)};D.clone=function(){return(new (this||q).constructor).copy(this||q)};return A}(),Fg=function(){function A(){(this||q).elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}
var D=A.prototype;D.set=function(r,t,B,I,M,U,Z,aa,oa,wa,Oa,Ya,ab,zb,sb,nc){var oc=(this||q).elements;oc[0]=r;oc[4]=t;oc[8]=B;oc[12]=I;oc[1]=M;oc[5]=U;oc[9]=Z;oc[13]=aa;oc[2]=oa;oc[6]=wa;oc[10]=Oa;oc[14]=Ya;oc[3]=ab;oc[7]=zb;oc[11]=sb;oc[15]=nc;return this||q};D.identity=function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this||q};D.clone=function(){return(new A).fromArray((this||q).elements)};D.copy=function(r){var t=(this||q).elements;r=r.elements;t[0]=r[0];t[1]=r[1];t[2]=r[2];t[3]=r[3];
t[4]=r[4];t[5]=r[5];t[6]=r[6];t[7]=r[7];t[8]=r[8];t[9]=r[9];t[10]=r[10];t[11]=r[11];t[12]=r[12];t[13]=r[13];t[14]=r[14];t[15]=r[15];return this||q};D.copyPosition=function(r){var t=(this||q).elements;r=r.elements;t[12]=r[12];t[13]=r[13];t[14]=r[14];return this||q};D.setFromMatrix3=function(r){r=r.elements;this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1);return this||q};D.extractBasis=function(r,t,B){r.setFromMatrixColumn(this||q,0);t.setFromMatrixColumn(this||q,1);B.setFromMatrixColumn(this||
q,2);return this||q};D.makeBasis=function(r,t,B){this.set(r.x,t.x,B.x,0,r.y,t.y,B.y,0,r.z,t.z,B.z,0,0,0,0,1);return this||q};D.extractRotation=function(r){var t=(this||q).elements,B=r.elements,I=1/IB.setFromMatrixColumn(r,0).length(),M=1/IB.setFromMatrixColumn(r,1).length();r=1/IB.setFromMatrixColumn(r,2).length();t[0]=B[0]*I;t[1]=B[1]*I;t[2]=B[2]*I;t[3]=0;t[4]=B[4]*M;t[5]=B[5]*M;t[6]=B[6]*M;t[7]=0;t[8]=B[8]*r;t[9]=B[9]*r;t[10]=B[10]*r;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this||q};D.makeRotationFromEuler=
function(r){r&&r.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=(this||q).elements,B=r.x,I=r.y,M=r.z,U=Math.cos(B);B=Math.sin(B);var Z=Math.cos(I);I=Math.sin(I);var aa=Math.cos(M);M=Math.sin(M);if("XYZ"===r.order){r=U*aa;var oa=U*M,wa=B*aa,Oa=B*M;t[0]=Z*aa;t[4]=-Z*M;t[8]=I;t[1]=oa+wa*I;t[5]=r-Oa*I;t[9]=-B*Z;t[2]=Oa-r*I;t[6]=wa+oa*I;t[10]=U*Z}else"YXZ"===r.order?(r=Z*aa,oa=Z*M,wa=I*aa,Oa=I*M,t[0]=r+Oa*B,t[4]=wa*
B-oa,t[8]=U*I,t[1]=U*M,t[5]=U*aa,t[9]=-B,t[2]=oa*B-wa,t[6]=Oa+r*B,t[10]=U*Z):"ZXY"===r.order?(r=Z*aa,oa=Z*M,wa=I*aa,Oa=I*M,t[0]=r-Oa*B,t[4]=-U*M,t[8]=wa+oa*B,t[1]=oa+wa*B,t[5]=U*aa,t[9]=Oa-r*B,t[2]=-U*I,t[6]=B,t[10]=U*Z):"ZYX"===r.order?(r=U*aa,oa=U*M,wa=B*aa,Oa=B*M,t[0]=Z*aa,t[4]=wa*I-oa,t[8]=r*I+Oa,t[1]=Z*M,t[5]=Oa*I+r,t[9]=oa*I-wa,t[2]=-I,t[6]=B*Z,t[10]=U*Z):"YZX"===r.order?(r=U*Z,oa=U*I,wa=B*Z,Oa=B*I,t[0]=Z*aa,t[4]=Oa-r*M,t[8]=wa*M+oa,t[1]=M,t[5]=U*aa,t[9]=-B*aa,t[2]=-I*aa,t[6]=oa*M+wa,t[10]=
r-Oa*M):"XZY"===r.order&&(r=U*Z,oa=U*I,wa=B*Z,Oa=B*I,t[0]=Z*aa,t[4]=-M,t[8]=I*aa,t[1]=r*M+Oa,t[5]=U*aa,t[9]=oa*M-wa,t[2]=wa*M-oa,t[6]=B*aa,t[10]=Oa*M+r);t[3]=0;t[7]=0;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this||q};D.makeRotationFromQuaternion=function(r){return this.compose(Gya,r,Hya)};D.lookAt=function(r,t,B){var I=(this||q).elements;Pn.subVectors(r,t);0===Pn.lengthSq()&&(Pn.z=1);Pn.normalize();qv.crossVectors(B,Pn);0===qv.lengthSq()&&(1===Math.abs(B.z)?Pn.x+=1E-4:Pn.z+=1E-4,Pn.normalize(),
qv.crossVectors(B,Pn));qv.normalize();aP.crossVectors(Pn,qv);I[0]=qv.x;I[4]=aP.x;I[8]=Pn.x;I[1]=qv.y;I[5]=aP.y;I[9]=Pn.y;I[2]=qv.z;I[6]=aP.z;I[10]=Pn.z;return this||q};D.multiply=function(r,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(r,t)):this.multiplyMatrices(this||q,r)};D.premultiply=function(r){return this.multiplyMatrices(r,this||q)};D.multiplyMatrices=function(r,t){var B=r.elements,
I=t.elements;t=(this||q).elements;r=B[0];var M=B[4],U=B[8],Z=B[12],aa=B[1],oa=B[5],wa=B[9],Oa=B[13],Ya=B[2],ab=B[6],zb=B[10],sb=B[14],nc=B[3],oc=B[7],Fc=B[11];B=B[15];var Sc=I[0],rd=I[4],jd=I[8],Tc=I[12],Uc=I[1],qd=I[5],Ld=I[9],Fd=I[13],ce=I[2],rf=I[6],sd=I[10],zd=I[14],Td=I[3],$f=I[7],Ne=I[11];I=I[15];t[0]=r*Sc+M*Uc+U*ce+Z*Td;t[4]=r*rd+M*qd+U*rf+Z*$f;t[8]=r*jd+M*Ld+U*sd+Z*Ne;t[12]=r*Tc+M*Fd+U*zd+Z*I;t[1]=aa*Sc+oa*Uc+wa*ce+Oa*Td;t[5]=aa*rd+oa*qd+wa*rf+Oa*$f;t[9]=aa*jd+oa*Ld+wa*sd+Oa*Ne;t[13]=aa*Tc+
oa*Fd+wa*zd+Oa*I;t[2]=Ya*Sc+ab*Uc+zb*ce+sb*Td;t[6]=Ya*rd+ab*qd+zb*rf+sb*$f;t[10]=Ya*jd+ab*Ld+zb*sd+sb*Ne;t[14]=Ya*Tc+ab*Fd+zb*zd+sb*I;t[3]=nc*Sc+oc*Uc+Fc*ce+B*Td;t[7]=nc*rd+oc*qd+Fc*rf+B*$f;t[11]=nc*jd+oc*Ld+Fc*sd+B*Ne;t[15]=nc*Tc+oc*Fd+Fc*zd+B*I;return this||q};D.multiplyScalar=function(r){var t=(this||q).elements;t[0]*=r;t[4]*=r;t[8]*=r;t[12]*=r;t[1]*=r;t[5]*=r;t[9]*=r;t[13]*=r;t[2]*=r;t[6]*=r;t[10]*=r;t[14]*=r;t[3]*=r;t[7]*=r;t[11]*=r;t[15]*=r;return this||q};D.determinant=function(){var r=(this||
q).elements,t=r[0],B=r[4],I=r[8],M=r[12],U=r[1],Z=r[5],aa=r[9],oa=r[13],wa=r[2],Oa=r[6],Ya=r[10],ab=r[14];return r[3]*(+M*aa*Oa-I*oa*Oa-M*Z*Ya+B*oa*Ya+I*Z*ab-B*aa*ab)+r[7]*(+t*aa*ab-t*oa*Ya+M*U*Ya-I*U*ab+I*oa*wa-M*aa*wa)+r[11]*(+t*oa*Oa-t*Z*ab-M*U*Oa+B*U*ab+M*Z*wa-B*oa*wa)+r[15]*(-I*Z*wa-t*aa*Oa+t*Z*Ya+I*U*Oa-B*U*Ya+B*aa*wa)};D.transpose=function(){var r=(this||q).elements;var t=r[1];r[1]=r[4];r[4]=t;t=r[2];r[2]=r[8];r[8]=t;t=r[6];r[6]=r[9];r[9]=t;t=r[3];r[3]=r[12];r[12]=t;t=r[7];r[7]=r[13];r[13]=
t;t=r[11];r[11]=r[14];r[14]=t;return this||q};D.setPosition=function(r,t,B){var I=(this||q).elements;r.isVector3?(I[12]=r.x,I[13]=r.y,I[14]=r.z):(I[12]=r,I[13]=t,I[14]=B);return this||q};D.invert=function(){var r=(this||q).elements,t=r[0],B=r[1],I=r[2],M=r[3],U=r[4],Z=r[5],aa=r[6],oa=r[7],wa=r[8],Oa=r[9],Ya=r[10],ab=r[11],zb=r[12],sb=r[13],nc=r[14],oc=r[15],Fc=Oa*nc*oa-sb*Ya*oa+sb*aa*ab-Z*nc*ab-Oa*aa*oc+Z*Ya*oc,Sc=zb*Ya*oa-wa*nc*oa-zb*aa*ab+U*nc*ab+wa*aa*oc-U*Ya*oc,rd=wa*sb*oa-zb*Oa*oa+zb*Z*ab-U*
sb*ab-wa*Z*oc+U*Oa*oc,jd=zb*Oa*aa-wa*sb*aa-zb*Z*Ya+U*sb*Ya+wa*Z*nc-U*Oa*nc,Tc=t*Fc+B*Sc+I*rd+M*jd;if(0===Tc)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);Tc=1/Tc;r[0]=Fc*Tc;r[1]=(sb*Ya*M-Oa*nc*M-sb*I*ab+B*nc*ab+Oa*I*oc-B*Ya*oc)*Tc;r[2]=(Z*nc*M-sb*aa*M+sb*I*oa-B*nc*oa-Z*I*oc+B*aa*oc)*Tc;r[3]=(Oa*aa*M-Z*Ya*M-Oa*I*oa+B*Ya*oa+Z*I*ab-B*aa*ab)*Tc;r[4]=Sc*Tc;r[5]=(wa*nc*M-zb*Ya*M+zb*I*ab-t*nc*ab-wa*I*oc+t*Ya*oc)*Tc;r[6]=(zb*aa*M-U*nc*M-zb*I*oa+t*nc*oa+U*I*oc-t*aa*oc)*Tc;r[7]=(U*Ya*M-wa*aa*M+wa*I*oa-t*
Ya*oa-U*I*ab+t*aa*ab)*Tc;r[8]=rd*Tc;r[9]=(zb*Oa*M-wa*sb*M-zb*B*ab+t*sb*ab+wa*B*oc-t*Oa*oc)*Tc;r[10]=(U*sb*M-zb*Z*M+zb*B*oa-t*sb*oa-U*B*oc+t*Z*oc)*Tc;r[11]=(wa*Z*M-U*Oa*M-wa*B*oa+t*Oa*oa+U*B*ab-t*Z*ab)*Tc;r[12]=jd*Tc;r[13]=(wa*sb*I-zb*Oa*I+zb*B*Ya-t*sb*Ya-wa*B*nc+t*Oa*nc)*Tc;r[14]=(zb*Z*I-U*sb*I-zb*B*aa+t*sb*aa+U*B*nc-t*Z*nc)*Tc;r[15]=(U*Oa*I-wa*Z*I+wa*B*aa-t*Oa*aa-U*B*Ya+t*Z*Ya)*Tc;return this||q};D.scale=function(r){var t=(this||q).elements,B=r.x,I=r.y;r=r.z;t[0]*=B;t[4]*=I;t[8]*=r;t[1]*=B;t[5]*=
I;t[9]*=r;t[2]*=B;t[6]*=I;t[10]*=r;t[3]*=B;t[7]*=I;t[11]*=r;return this||q};D.getMaxScaleOnAxis=function(){var r=(this||q).elements;return Math.sqrt(Math.max(r[0]*r[0]+r[1]*r[1]+r[2]*r[2],r[4]*r[4]+r[5]*r[5]+r[6]*r[6],r[8]*r[8]+r[9]*r[9]+r[10]*r[10]))};D.makeTranslation=function(r,t,B){this.set(1,0,0,r,0,1,0,t,0,0,1,B,0,0,0,1);return this||q};D.makeRotationX=function(r){var t=Math.cos(r);r=Math.sin(r);this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1);return this||q};D.makeRotationY=function(r){var t=Math.cos(r);
r=Math.sin(r);this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1);return this||q};D.makeRotationZ=function(r){var t=Math.cos(r);r=Math.sin(r);this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1);return this||q};D.makeRotationAxis=function(r,t){var B=Math.cos(t);t=Math.sin(t);var I=1-B,M=r.x,U=r.y;r=r.z;var Z=I*M,aa=I*U;this.set(Z*M+B,Z*U-t*r,Z*r+t*U,0,Z*U+t*r,aa*U+B,aa*r-t*M,0,Z*r-t*U,aa*r+t*M,I*r*r+B,0,0,0,0,1);return this||q};D.makeScale=function(r,t,B){this.set(r,0,0,0,0,t,0,0,0,0,B,0,0,0,0,1);return this||q};D.makeShear=
function(r,t,B){this.set(1,t,B,0,r,1,B,0,r,t,1,0,0,0,0,1);return this||q};D.compose=function(r,t,B){var I=(this||q).elements,M=t._x,U=t._y,Z=t._z,aa=t._w,oa=M+M,wa=U+U,Oa=Z+Z;t=M*oa;var Ya=M*wa;M*=Oa;var ab=U*wa;U*=Oa;Z*=Oa;oa*=aa;wa*=aa;aa*=Oa;Oa=B.x;var zb=B.y;B=B.z;I[0]=(1-(ab+Z))*Oa;I[1]=(Ya+aa)*Oa;I[2]=(M-wa)*Oa;I[3]=0;I[4]=(Ya-aa)*zb;I[5]=(1-(t+Z))*zb;I[6]=(U+oa)*zb;I[7]=0;I[8]=(M+wa)*B;I[9]=(U-oa)*B;I[10]=(1-(t+ab))*B;I[11]=0;I[12]=r.x;I[13]=r.y;I[14]=r.z;I[15]=1;return this||q};D.decompose=
function(r,t,B){var I=(this||q).elements,M=IB.set(I[0],I[1],I[2]).length(),U=IB.set(I[4],I[5],I[6]).length(),Z=IB.set(I[8],I[9],I[10]).length();0>this.determinant()&&(M=-M);r.x=I[12];r.y=I[13];r.z=I[14];Hl.copy(this||q);r=1/M;I=1/U;var aa=1/Z;Hl.elements[0]*=r;Hl.elements[1]*=r;Hl.elements[2]*=r;Hl.elements[4]*=I;Hl.elements[5]*=I;Hl.elements[6]*=I;Hl.elements[8]*=aa;Hl.elements[9]*=aa;Hl.elements[10]*=aa;t.setFromRotationMatrix(Hl);B.x=M;B.y=U;B.z=Z;return this||q};D.makePerspective=function(r,t,
B,I,M,U){void 0===U&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var Z=(this||q).elements;Z[0]=2*M/(t-r);Z[4]=0;Z[8]=(t+r)/(t-r);Z[12]=0;Z[1]=0;Z[5]=2*M/(B-I);Z[9]=(B+I)/(B-I);Z[13]=0;Z[2]=0;Z[6]=0;Z[10]=-(U+M)/(U-M);Z[14]=-2*U*M/(U-M);Z[3]=0;Z[7]=0;Z[11]=-1;Z[15]=0;return this||q};D.makeOrthographic=function(r,t,B,I,M,U){var Z=(this||q).elements,aa=1/(t-r),oa=1/(B-I),wa=1/(U-M);Z[0]=2*aa;Z[4]=0;Z[8]=0;Z[12]=-((t+r)*aa);Z[1]=
0;Z[5]=2*oa;Z[9]=0;Z[13]=-((B+I)*oa);Z[2]=0;Z[6]=0;Z[10]=-2*wa;Z[14]=-((U+M)*wa);Z[3]=0;Z[7]=0;Z[11]=0;Z[15]=1;return this||q};D.equals=function(r){var t=(this||q).elements;r=r.elements;for(var B=0;16>B;B++)if(t[B]!==r[B])return!1;return!0};D.fromArray=function(r,t){void 0===t&&(t=0);for(var B=0;16>B;B++)(this||q).elements[B]=r[B+t];return this||q};D.toArray=function(r,t){void 0===r&&(r=[]);void 0===t&&(t=0);var B=(this||q).elements;r[t]=B[0];r[t+1]=B[1];r[t+2]=B[2];r[t+3]=B[3];r[t+4]=B[4];r[t+5]=
B[5];r[t+6]=B[6];r[t+7]=B[7];r[t+8]=B[8];r[t+9]=B[9];r[t+10]=B[10];r[t+11]=B[11];r[t+12]=B[12];r[t+13]=B[13];r[t+14]=B[14];r[t+15]=B[15];return r};return A}();Fg.prototype.isMatrix4=!0;var IB=new jc,Hl=new Fg,Gya=new jc(0,0,0),Hya=new jc(1,1,1),qv=new jc,aP=new jc,Pn=new jc,aea=new Fg,bea=new Cm,LF=function(){function A(r,t,B,I){void 0===r&&(r=0);void 0===t&&(t=0);void 0===B&&(B=0);void 0===I&&(I=A.DefaultOrder);(this||q)._x=r;(this||q)._y=t;(this||q)._z=B;(this||q)._order=I}var D=A.prototype;D.set=
function(r,t,B,I){(this||q)._x=r;(this||q)._y=t;(this||q)._z=B;(this||q)._order=I||(this||q)._order;this._onChangeCallback();return this||q};D.clone=function(){return new (this||q).constructor((this||q)._x,(this||q)._y,(this||q)._z,(this||q)._order)};D.copy=function(r){(this||q)._x=r._x;(this||q)._y=r._y;(this||q)._z=r._z;(this||q)._order=r._order;this._onChangeCallback();return this||q};D.setFromRotationMatrix=function(r,t,B){var I=oh.clamp,M=r.elements;r=M[0];var U=M[4],Z=M[8],aa=M[1],oa=M[5],wa=
M[9],Oa=M[2],Ya=M[6];M=M[10];t=t||(this||q)._order;switch(t){case "XYZ":(this||q)._y=Math.asin(I(Z,-1,1));.9999999>Math.abs(Z)?((this||q)._x=Math.atan2(-wa,M),(this||q)._z=Math.atan2(-U,r)):((this||q)._x=Math.atan2(Ya,oa),(this||q)._z=0);break;case "YXZ":(this||q)._x=Math.asin(-I(wa,-1,1));.9999999>Math.abs(wa)?((this||q)._y=Math.atan2(Z,M),(this||q)._z=Math.atan2(aa,oa)):((this||q)._y=Math.atan2(-Oa,r),(this||q)._z=0);break;case "ZXY":(this||q)._x=Math.asin(I(Ya,-1,1));.9999999>Math.abs(Ya)?((this||
q)._y=Math.atan2(-Oa,M),(this||q)._z=Math.atan2(-U,oa)):((this||q)._y=0,(this||q)._z=Math.atan2(aa,r));break;case "ZYX":(this||q)._y=Math.asin(-I(Oa,-1,1));.9999999>Math.abs(Oa)?((this||q)._x=Math.atan2(Ya,M),(this||q)._z=Math.atan2(aa,r)):((this||q)._x=0,(this||q)._z=Math.atan2(-U,oa));break;case "YZX":(this||q)._z=Math.asin(I(aa,-1,1));.9999999>Math.abs(aa)?((this||q)._x=Math.atan2(-wa,oa),(this||q)._y=Math.atan2(-Oa,r)):((this||q)._x=0,(this||q)._y=Math.atan2(Z,M));break;case "XZY":(this||q)._z=
Math.asin(-I(U,-1,1));.9999999>Math.abs(U)?((this||q)._x=Math.atan2(Ya,oa),(this||q)._y=Math.atan2(Z,r)):((this||q)._x=Math.atan2(-wa,M),(this||q)._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}(this||q)._order=t;!1!==B&&this._onChangeCallback();return this||q};D.setFromQuaternion=function(r,t,B){aea.makeRotationFromQuaternion(r);return this.setFromRotationMatrix(aea,t,B)};D.setFromVector3=function(r,t){return this.set(r.x,r.y,r.z,t||(this||
q)._order)};D.reorder=function(r){bea.setFromEuler(this||q);return this.setFromQuaternion(bea,r)};D.equals=function(r){return r._x===(this||q)._x&&r._y===(this||q)._y&&r._z===(this||q)._z&&r._order===(this||q)._order};D.fromArray=function(r){(this||q)._x=r[0];(this||q)._y=r[1];(this||q)._z=r[2];void 0!==r[3]&&((this||q)._order=r[3]);this._onChangeCallback();return this||q};D.toArray=function(r,t){void 0===r&&(r=[]);void 0===t&&(t=0);r[t]=(this||q)._x;r[t+1]=(this||q)._y;r[t+2]=(this||q)._z;r[t+3]=
(this||q)._order;return r};D.toVector3=function(r){return r?r.set((this||q)._x,(this||q)._y,(this||q)._z):new jc((this||q)._x,(this||q)._y,(this||q)._z)};D._onChange=function(r){(this||q)._onChangeCallback=r;return this||q};D._onChangeCallback=function(){};l(A,[{key:"x",get:function(){return(this||q)._x},set:function(r){(this||q)._x=r;this._onChangeCallback()}},{key:"y",get:function(){return(this||q)._y},set:function(r){(this||q)._y=r;this._onChangeCallback()}},{key:"z",get:function(){return(this||
q)._z},set:function(r){(this||q)._z=r;this._onChangeCallback()}},{key:"order",get:function(){return(this||q)._order},set:function(r){(this||q)._order=r;this._onChangeCallback()}}]);return A}();LF.prototype.isEuler=!0;LF.DefaultOrder="XYZ";LF.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");var qY=function(){function A(){(this||q).mask=1}var D=A.prototype;D.set=function(r){(this||q).mask=1<<r|0};D.enable=function(r){(this||q).mask=(this||q).mask|1<<r|0};D.enableAll=function(){(this||q).mask=-1};
D.toggle=function(r){(this||q).mask^=1<<r|0};D.disable=function(r){(this||q).mask&=~(1<<r|0)};D.disableAll=function(){(this||q).mask=0};D.test=function(r){return 0!==((this||q).mask&r.mask)};return A}(),mya=0,cea=new jc,JB=new Cm,st=new Fg,bP=new jc,hG=new jc,Iya=new jc,Jya=new Cm,dea=new jc(1,0,0),eea=new jc(0,1,0),fea=new jc(0,0,1),Kya={type:"added"},gea={type:"removed"};P.DefaultUp=new jc(0,1,0);P.DefaultMatrixAutoUpdate=!0;P.prototype=Object.assign(Object.create(J.prototype),{constructor:P,isObject3D:!0,
onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(A){(this||q).matrixAutoUpdate&&this.updateMatrix();(this||q).matrix.premultiply(A);(this||q).matrix.decompose((this||q).position,(this||q).quaternion,(this||q).scale)},applyQuaternion:function(A){(this||q).quaternion.premultiply(A);return this||q},setRotationFromAxisAngle:function(A,D){(this||q).quaternion.setFromAxisAngle(A,D)},setRotationFromEuler:function(A){(this||q).quaternion.setFromEuler(A,!0)},setRotationFromMatrix:function(A){(this||
q).quaternion.setFromRotationMatrix(A)},setRotationFromQuaternion:function(A){(this||q).quaternion.copy(A)},rotateOnAxis:function(A,D){JB.setFromAxisAngle(A,D);(this||q).quaternion.multiply(JB);return this||q},rotateOnWorldAxis:function(A,D){JB.setFromAxisAngle(A,D);(this||q).quaternion.premultiply(JB);return this||q},rotateX:function(A){return this.rotateOnAxis(dea,A)},rotateY:function(A){return this.rotateOnAxis(eea,A)},rotateZ:function(A){return this.rotateOnAxis(fea,A)},translateOnAxis:function(A,
D){cea.copy(A).applyQuaternion((this||q).quaternion);(this||q).position.add(cea.multiplyScalar(D));return this||q},translateX:function(A){return this.translateOnAxis(dea,A)},translateY:function(A){return this.translateOnAxis(eea,A)},translateZ:function(A){return this.translateOnAxis(fea,A)},localToWorld:function(A){return A.applyMatrix4((this||q).matrixWorld)},worldToLocal:function(A){return A.applyMatrix4(st.copy((this||q).matrixWorld).invert())},lookAt:function(A,D,r){A.isVector3?bP.copy(A):bP.set(A,
D,r);A=(this||q).parent;this.updateWorldMatrix(!0,!1);hG.setFromMatrixPosition((this||q).matrixWorld);(this||q).isCamera||(this||q).isLight?st.lookAt(hG,bP,(this||q).up):st.lookAt(bP,hG,(this||q).up);(this||q).quaternion.setFromRotationMatrix(st);A&&(st.extractRotation(A.matrixWorld),JB.setFromRotationMatrix(st),(this||q).quaternion.premultiply(JB.invert()))},add:function(A){if(1<arguments.length){for(var D=0;D<arguments.length;D++)this.add(arguments[D]);return this||q}if(A===(this||q))return console.error("THREE.Object3D.add: object can't be added as a child of itself.",
A),this||q;A&&A.isObject3D?(null!==A.parent&&A.parent.remove(A),A.parent=this||q,(this||q).children.push(A),A.dispatchEvent(Kya)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",A);return this||q},remove:function(A){if(1<arguments.length){for(var D=0;D<arguments.length;D++)this.remove(arguments[D]);return this||q}D=(this||q).children.indexOf(A);-1!==D&&(A.parent=null,(this||q).children.splice(D,1),A.dispatchEvent(gea));return this||q},clear:function(){for(var A=0;A<(this||
q).children.length;A++){var D=(this||q).children[A];D.parent=null;D.dispatchEvent(gea)}(this||q).children.length=0;return this||q},attach:function(A){this.updateWorldMatrix(!0,!1);st.copy((this||q).matrixWorld).invert();null!==A.parent&&(A.parent.updateWorldMatrix(!0,!1),st.multiply(A.parent.matrixWorld));A.applyMatrix4(st);this.add(A);A.updateWorldMatrix(!1,!0);return this||q},getObjectById:function(A){return this.getObjectByProperty("id",A)},getObjectByName:function(A){return this.getObjectByProperty("name",
A)},getObjectByProperty:function(A,D){if((this||q)[A]===D)return this||q;for(var r=0,t=(this||q).children.length;r<t;r++){var B=(this||q).children[r].getObjectByProperty(A,D);if(void 0!==B)return B}},getWorldPosition:function(A){void 0===A&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),A=new jc);this.updateWorldMatrix(!0,!1);return A.setFromMatrixPosition((this||q).matrixWorld)},getWorldQuaternion:function(A){void 0===A&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),
A=new Cm);this.updateWorldMatrix(!0,!1);(this||q).matrixWorld.decompose(hG,A,Iya);return A},getWorldScale:function(A){void 0===A&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),A=new jc);this.updateWorldMatrix(!0,!1);(this||q).matrixWorld.decompose(hG,Jya,A);return A},getWorldDirection:function(A){void 0===A&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),A=new jc);this.updateWorldMatrix(!0,!1);var D=(this||q).matrixWorld.elements;return A.set(D[8],
D[9],D[10]).normalize()},raycast:function(){},traverse:function(A){A(this||q);for(var D=(this||q).children,r=0,t=D.length;r<t;r++)D[r].traverse(A)},traverseVisible:function(A){if(!1!==(this||q).visible){A(this||q);for(var D=(this||q).children,r=0,t=D.length;r<t;r++)D[r].traverseVisible(A)}},traverseAncestors:function(A){var D=(this||q).parent;null!==D&&(A(D),D.traverseAncestors(A))},updateMatrix:function(){(this||q).matrix.compose((this||q).position,(this||q).quaternion,(this||q).scale);(this||q).matrixWorldNeedsUpdate=
!0},updateMatrixWorld:function(A){(this||q).matrixAutoUpdate&&this.updateMatrix();if((this||q).matrixWorldNeedsUpdate||A)null===(this||q).parent?(this||q).matrixWorld.copy((this||q).matrix):(this||q).matrixWorld.multiplyMatrices((this||q).parent.matrixWorld,(this||q).matrix),(this||q).matrixWorldNeedsUpdate=!1,A=!0;for(var D=(this||q).children,r=0,t=D.length;r<t;r++)D[r].updateMatrixWorld(A)},updateWorldMatrix:function(A,D){var r=(this||q).parent;!0===A&&null!==r&&r.updateWorldMatrix(!0,!1);(this||
q).matrixAutoUpdate&&this.updateMatrix();null===(this||q).parent?(this||q).matrixWorld.copy((this||q).matrix):(this||q).matrixWorld.multiplyMatrices((this||q).parent.matrixWorld,(this||q).matrix);if(!0===D)for(A=(this||q).children,D=0,r=A.length;D<r;D++)A[D].updateWorldMatrix(!1,!0)},toJSON:function(A){function D(Oa,Ya){void 0===Oa[Ya.uuid]&&(Oa[Ya.uuid]=Ya.toJSON(A));return Ya.uuid}function r(Oa){var Ya=[],ab;for(ab in Oa){var zb=Oa[ab];delete zb.metadata;Ya.push(zb)}return Ya}var t=void 0===A||
"string"===typeof A,B={};t&&(A={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},B.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var I={};I.uuid=(this||q).uuid;I.type=(this||q).type;""!==(this||q).name&&(I.name=(this||q).name);!0===(this||q).castShadow&&(I.castShadow=!0);!0===(this||q).receiveShadow&&(I.receiveShadow=!0);!1===(this||q).visible&&(I.visible=!1);!1===(this||q).frustumCulled&&(I.frustumCulled=!1);0!==(this||q).renderOrder&&(I.renderOrder=
(this||q).renderOrder);"{}"!==JSON.stringify((this||q).userData)&&(I.userData=(this||q).userData);I.layers=(this||q).layers.mask;I.matrix=(this||q).matrix.toArray();!1===(this||q).matrixAutoUpdate&&(I.matrixAutoUpdate=!1);(this||q).isInstancedMesh&&(I.type="InstancedMesh",I.count=(this||q).count,I.instanceMatrix=(this||q).instanceMatrix.toJSON());if((this||q).isMesh||(this||q).isLine||(this||q).isPoints){I.geometry=D(A.geometries,(this||q).geometry);var M=(this||q).geometry.parameters;if(void 0!==
M&&void 0!==M.shapes)if(M=M.shapes,Array.isArray(M))for(var U=0,Z=M.length;U<Z;U++)D(A.shapes,M[U]);else D(A.shapes,M)}(this||q).isSkinnedMesh&&(I.bindMode=(this||q).bindMode,I.bindMatrix=(this||q).bindMatrix.toArray(),void 0!==(this||q).skeleton&&(D(A.skeletons,(this||q).skeleton),I.skeleton=(this||q).skeleton.uuid));if(void 0!==(this||q).material)if(Array.isArray((this||q).material)){M=[];U=0;for(Z=(this||q).material.length;U<Z;U++)M.push(D(A.materials,(this||q).material[U]));I.material=M}else I.material=
D(A.materials,(this||q).material);if(0<(this||q).children.length)for(I.children=[],M=0;M<(this||q).children.length;M++)I.children.push((this||q).children[M].toJSON(A).object);if(0<(this||q).animations.length)for(I.animations=[],M=0;M<(this||q).animations.length;M++)I.animations.push(D(A.animations,(this||q).animations[M]));if(t){t=r(A.geometries);M=r(A.materials);U=r(A.textures);Z=r(A.images);var aa=r(A.shapes),oa=r(A.skeletons),wa=r(A.animations);0<t.length&&(B.geometries=t);0<M.length&&(B.materials=
M);0<U.length&&(B.textures=U);0<Z.length&&(B.images=Z);0<aa.length&&(B.shapes=aa);0<oa.length&&(B.skeletons=oa);0<wa.length&&(B.animations=wa)}B.object=I;return B},clone:function(A){return(new (this||q).constructor).copy(this||q,A)},copy:function(A,D){void 0===D&&(D=!0);(this||q).name=A.name;(this||q).up.copy(A.up);(this||q).position.copy(A.position);(this||q).rotation.order=A.rotation.order;(this||q).quaternion.copy(A.quaternion);(this||q).scale.copy(A.scale);(this||q).matrix.copy(A.matrix);(this||
q).matrixWorld.copy(A.matrixWorld);(this||q).matrixAutoUpdate=A.matrixAutoUpdate;(this||q).matrixWorldNeedsUpdate=A.matrixWorldNeedsUpdate;(this||q).layers.mask=A.layers.mask;(this||q).visible=A.visible;(this||q).castShadow=A.castShadow;(this||q).receiveShadow=A.receiveShadow;(this||q).frustumCulled=A.frustumCulled;(this||q).renderOrder=A.renderOrder;(this||q).userData=JSON.parse(JSON.stringify(A.userData));if(!0===D)for(D=0;D<A.children.length;D++)this.add(A.children[D].clone());return this||q}});
var SY=new jc,Lya=new jc,Mya=new cm,Oq=function(){function A(r,t){void 0===r&&(r=new jc(1,0,0));void 0===t&&(t=0);(this||q).normal=r;(this||q).constant=t}var D=A.prototype;D.set=function(r,t){(this||q).normal.copy(r);(this||q).constant=t;return this||q};D.setComponents=function(r,t,B,I){(this||q).normal.set(r,t,B);(this||q).constant=I;return this||q};D.setFromNormalAndCoplanarPoint=function(r,t){(this||q).normal.copy(r);(this||q).constant=-t.dot((this||q).normal);return this||q};D.setFromCoplanarPoints=
function(r,t,B){t=SY.subVectors(B,t).cross(Lya.subVectors(r,t)).normalize();this.setFromNormalAndCoplanarPoint(t,r);return this||q};D.copy=function(r){(this||q).normal.copy(r.normal);(this||q).constant=r.constant;return this||q};D.normalize=function(){var r=1/(this||q).normal.length();(this||q).normal.multiplyScalar(r);(this||q).constant*=r;return this||q};D.negate=function(){(this||q).constant*=-1;(this||q).normal.negate();return this||q};D.distanceToPoint=function(r){return(this||q).normal.dot(r)+
(this||q).constant};D.distanceToSphere=function(r){return this.distanceToPoint(r.center)-r.radius};D.projectPoint=function(r,t){void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new jc);return t.copy((this||q).normal).multiplyScalar(-this.distanceToPoint(r)).add(r)};D.intersectLine=function(r,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new jc);var B=r.delta(SY),I=(this||q).normal.dot(B);if(0===I){if(0===this.distanceToPoint(r.start))return t.copy(r.start)}else if(I=
-(r.start.dot((this||q).normal)+(this||q).constant)/I,!(0>I||1<I))return t.copy(B).multiplyScalar(I).add(r.start)};D.intersectsLine=function(r){var t=this.distanceToPoint(r.start);r=this.distanceToPoint(r.end);return 0>t&&0<r||0>r&&0<t};D.intersectsBox=function(r){return r.intersectsPlane(this||q)};D.intersectsSphere=function(r){return r.intersectsPlane(this||q)};D.coplanarPoint=function(r){void 0===r&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),r=new jc);return r.copy((this||
q).normal).multiplyScalar(-(this||q).constant)};D.applyMatrix4=function(r,t){t=t||Mya.getNormalMatrix(r);r=this.coplanarPoint(SY).applyMatrix4(r);t=(this||q).normal.applyMatrix3(t).normalize();(this||q).constant=-r.dot(t);return this||q};D.translate=function(r){(this||q).constant-=r.dot((this||q).normal);return this||q};D.equals=function(r){return r.normal.equals((this||q).normal)&&r.constant===(this||q).constant};D.clone=function(){return(new (this||q).constructor).copy(this||q)};return A}();Oq.prototype.isPlane=
!0;var Uq=new jc,tt=new jc,TY=new jc,ut=new jc,KB=new jc,LB=new jc,hea=new jc,UY=new jc,VY=new jc,WY=new jc,Ln=function(){function A(r,t,B){void 0===r&&(r=new jc);void 0===t&&(t=new jc);void 0===B&&(B=new jc);(this||q).a=r;(this||q).b=t;(this||q).c=B}A.getNormal=function(r,t,B,I){void 0===I&&(console.warn("THREE.Triangle: .getNormal() target is now required"),I=new jc);I.subVectors(B,t);Uq.subVectors(r,t);I.cross(Uq);r=I.lengthSq();return 0<r?I.multiplyScalar(1/Math.sqrt(r)):I.set(0,0,0)};A.getBarycoord=
function(r,t,B,I,M){Uq.subVectors(I,t);tt.subVectors(B,t);TY.subVectors(r,t);r=Uq.dot(Uq);t=Uq.dot(tt);B=Uq.dot(TY);var U=tt.dot(tt);I=tt.dot(TY);var Z=r*U-t*t;void 0===M&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),M=new jc);if(0===Z)return M.set(-2,-1,-1);Z=1/Z;U=(U*B-t*I)*Z;r=(r*I-t*B)*Z;return M.set(1-U-r,r,U)};A.containsPoint=function(r,t,B,I){this.getBarycoord(r,t,B,I,ut);return 0<=ut.x&&0<=ut.y&&1>=ut.x+ut.y};A.getUV=function(r,t,B,I,M,U,Z,aa){this.getBarycoord(r,
t,B,I,ut);aa.set(0,0);aa.addScaledVector(M,ut.x);aa.addScaledVector(U,ut.y);aa.addScaledVector(Z,ut.z);return aa};A.isFrontFacing=function(r,t,B,I){Uq.subVectors(B,t);tt.subVectors(r,t);return 0>Uq.cross(tt).dot(I)?!0:!1};var D=A.prototype;D.set=function(r,t,B){(this||q).a.copy(r);(this||q).b.copy(t);(this||q).c.copy(B);return this||q};D.setFromPointsAndIndices=function(r,t,B,I){(this||q).a.copy(r[t]);(this||q).b.copy(r[B]);(this||q).c.copy(r[I]);return this||q};D.clone=function(){return(new (this||
q).constructor).copy(this||q)};D.copy=function(r){(this||q).a.copy(r.a);(this||q).b.copy(r.b);(this||q).c.copy(r.c);return this||q};D.getArea=function(){Uq.subVectors((this||q).c,(this||q).b);tt.subVectors((this||q).a,(this||q).b);return.5*Uq.cross(tt).length()};D.getMidpoint=function(r){void 0===r&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),r=new jc);return r.addVectors((this||q).a,(this||q).b).add((this||q).c).multiplyScalar(1/3)};D.getNormal=function(r){return A.getNormal((this||
q).a,(this||q).b,(this||q).c,r)};D.getPlane=function(r){void 0===r&&(console.warn("THREE.Triangle: .getPlane() target is now required"),r=new Oq);return r.setFromCoplanarPoints((this||q).a,(this||q).b,(this||q).c)};D.getBarycoord=function(r,t){return A.getBarycoord(r,(this||q).a,(this||q).b,(this||q).c,t)};D.getUV=function(r,t,B,I,M){return A.getUV(r,(this||q).a,(this||q).b,(this||q).c,t,B,I,M)};D.containsPoint=function(r){return A.containsPoint(r,(this||q).a,(this||q).b,(this||q).c)};D.isFrontFacing=
function(r){return A.isFrontFacing((this||q).a,(this||q).b,(this||q).c,r)};D.intersectsBox=function(r){return r.intersectsTriangle(this||q)};D.closestPointToPoint=function(r,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new jc);var B=(this||q).a,I=(this||q).b,M=(this||q).c;KB.subVectors(I,B);LB.subVectors(M,B);UY.subVectors(r,B);var U=KB.dot(UY),Z=LB.dot(UY);if(0>=U&&0>=Z)return t.copy(B);VY.subVectors(r,I);var aa=KB.dot(VY),oa=LB.dot(VY);if(0<=aa&&
oa<=aa)return t.copy(I);var wa=U*oa-aa*Z;if(0>=wa&&0<=U&&0>=aa)return I=U/(U-aa),t.copy(B).addScaledVector(KB,I);WY.subVectors(r,M);r=KB.dot(WY);var Oa=LB.dot(WY);if(0<=Oa&&r<=Oa)return t.copy(M);U=r*Z-U*Oa;if(0>=U&&0<=Z&&0>=Oa)return wa=Z/(Z-Oa),t.copy(B).addScaledVector(LB,wa);Z=aa*Oa-r*oa;if(0>=Z&&0<=oa-aa&&0<=r-Oa)return hea.subVectors(M,I),wa=(oa-aa)/(oa-aa+(r-Oa)),t.copy(I).addScaledVector(hea,wa);M=1/(Z+U+wa);I=U*M;wa*=M;return t.copy(B).addScaledVector(KB,I).addScaledVector(LB,wa)};D.equals=
function(r){return r.a.equals((this||q).a)&&r.b.equals((this||q).b)&&r.c.equals((this||q).c)};return A}(),nya=0;da.prototype=Object.assign(Object.create(J.prototype),{constructor:da,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return(this||q).onBeforeCompile.toString()},setValues:function(A){if(void 0!==A)for(var D in A){var r=A[D];if(void 0===r)console.warn("THREE.Material: '"+D+"' parameter is undefined.");else if("shading"===D)console.warn("THREE."+(this||q).type+
": .shading has been removed. Use the boolean .flatShading instead."),(this||q).flatShading=1===r?!0:!1;else{var t=(this||q)[D];void 0===t?console.warn("THREE."+(this||q).type+": '"+D+"' is not a property of this material."):t&&t.isColor?t.set(r):t&&t.isVector3&&r&&r.isVector3?t.copy(r):(this||q)[D]=r}}},toJSON:function(A){function D(B){var I=[],M;for(M in B){var U=B[M];delete U.metadata;I.push(U)}return I}var r=void 0===A||"string"===typeof A;r&&(A={textures:{},images:{}});var t={metadata:{version:4.5,
type:"Material",generator:"Material.toJSON"}};t.uuid=(this||q).uuid;t.type=(this||q).type;""!==(this||q).name&&(t.name=(this||q).name);(this||q).color&&(this||q).color.isColor&&(t.color=(this||q).color.getHex());void 0!==(this||q).roughness&&(t.roughness=(this||q).roughness);void 0!==(this||q).metalness&&(t.metalness=(this||q).metalness);(this||q).sheen&&(this||q).sheen.isColor&&(t.sheen=(this||q).sheen.getHex());(this||q).emissive&&(this||q).emissive.isColor&&(t.emissive=(this||q).emissive.getHex());
(this||q).emissiveIntensity&&1!==(this||q).emissiveIntensity&&(t.emissiveIntensity=(this||q).emissiveIntensity);(this||q).specular&&(this||q).specular.isColor&&(t.specular=(this||q).specular.getHex());void 0!==(this||q).shininess&&(t.shininess=(this||q).shininess);void 0!==(this||q).clearcoat&&(t.clearcoat=(this||q).clearcoat);void 0!==(this||q).clearcoatRoughness&&(t.clearcoatRoughness=(this||q).clearcoatRoughness);(this||q).clearcoatMap&&(this||q).clearcoatMap.isTexture&&(t.clearcoatMap=(this||
q).clearcoatMap.toJSON(A).uuid);(this||q).clearcoatRoughnessMap&&(this||q).clearcoatRoughnessMap.isTexture&&(t.clearcoatRoughnessMap=(this||q).clearcoatRoughnessMap.toJSON(A).uuid);(this||q).clearcoatNormalMap&&(this||q).clearcoatNormalMap.isTexture&&(t.clearcoatNormalMap=(this||q).clearcoatNormalMap.toJSON(A).uuid,t.clearcoatNormalScale=(this||q).clearcoatNormalScale.toArray());(this||q).map&&(this||q).map.isTexture&&(t.map=(this||q).map.toJSON(A).uuid);(this||q).matcap&&(this||q).matcap.isTexture&&
(t.matcap=(this||q).matcap.toJSON(A).uuid);(this||q).alphaMap&&(this||q).alphaMap.isTexture&&(t.alphaMap=(this||q).alphaMap.toJSON(A).uuid);(this||q).lightMap&&(this||q).lightMap.isTexture&&(t.lightMap=(this||q).lightMap.toJSON(A).uuid,t.lightMapIntensity=(this||q).lightMapIntensity);(this||q).aoMap&&(this||q).aoMap.isTexture&&(t.aoMap=(this||q).aoMap.toJSON(A).uuid,t.aoMapIntensity=(this||q).aoMapIntensity);(this||q).bumpMap&&(this||q).bumpMap.isTexture&&(t.bumpMap=(this||q).bumpMap.toJSON(A).uuid,
t.bumpScale=(this||q).bumpScale);(this||q).normalMap&&(this||q).normalMap.isTexture&&(t.normalMap=(this||q).normalMap.toJSON(A).uuid,t.normalMapType=(this||q).normalMapType,t.normalScale=(this||q).normalScale.toArray());(this||q).displacementMap&&(this||q).displacementMap.isTexture&&(t.displacementMap=(this||q).displacementMap.toJSON(A).uuid,t.displacementScale=(this||q).displacementScale,t.displacementBias=(this||q).displacementBias);(this||q).roughnessMap&&(this||q).roughnessMap.isTexture&&(t.roughnessMap=
(this||q).roughnessMap.toJSON(A).uuid);(this||q).metalnessMap&&(this||q).metalnessMap.isTexture&&(t.metalnessMap=(this||q).metalnessMap.toJSON(A).uuid);(this||q).emissiveMap&&(this||q).emissiveMap.isTexture&&(t.emissiveMap=(this||q).emissiveMap.toJSON(A).uuid);(this||q).specularMap&&(this||q).specularMap.isTexture&&(t.specularMap=(this||q).specularMap.toJSON(A).uuid);(this||q).envMap&&(this||q).envMap.isTexture&&(t.envMap=(this||q).envMap.toJSON(A).uuid,t.reflectivity=(this||q).reflectivity,t.refractionRatio=
(this||q).refractionRatio,void 0!==(this||q).combine&&(t.combine=(this||q).combine),void 0!==(this||q).envMapIntensity&&(t.envMapIntensity=(this||q).envMapIntensity));(this||q).gradientMap&&(this||q).gradientMap.isTexture&&(t.gradientMap=(this||q).gradientMap.toJSON(A).uuid);void 0!==(this||q).size&&(t.size=(this||q).size);void 0!==(this||q).sizeAttenuation&&(t.sizeAttenuation=(this||q).sizeAttenuation);1!==(this||q).blending&&(t.blending=(this||q).blending);0!==(this||q).side&&(t.side=(this||q).side);
(this||q).vertexColors&&(t.vertexColors=!0);1>(this||q).opacity&&(t.opacity=(this||q).opacity);!0===(this||q).transparent&&(t.transparent=(this||q).transparent);t.depthFunc=(this||q).depthFunc;t.depthTest=(this||q).depthTest;t.depthWrite=(this||q).depthWrite;t.stencilWrite=(this||q).stencilWrite;t.stencilWriteMask=(this||q).stencilWriteMask;t.stencilFunc=(this||q).stencilFunc;t.stencilRef=(this||q).stencilRef;t.stencilFuncMask=(this||q).stencilFuncMask;t.stencilFail=(this||q).stencilFail;t.stencilZFail=
(this||q).stencilZFail;t.stencilZPass=(this||q).stencilZPass;(this||q).rotation&&0!==(this||q).rotation&&(t.rotation=(this||q).rotation);!0===(this||q).polygonOffset&&(t.polygonOffset=!0);0!==(this||q).polygonOffsetFactor&&(t.polygonOffsetFactor=(this||q).polygonOffsetFactor);0!==(this||q).polygonOffsetUnits&&(t.polygonOffsetUnits=(this||q).polygonOffsetUnits);(this||q).linewidth&&1!==(this||q).linewidth&&(t.linewidth=(this||q).linewidth);void 0!==(this||q).dashSize&&(t.dashSize=(this||q).dashSize);
void 0!==(this||q).gapSize&&(t.gapSize=(this||q).gapSize);void 0!==(this||q).scale&&(t.scale=(this||q).scale);!0===(this||q).dithering&&(t.dithering=!0);0<(this||q).alphaTest&&(t.alphaTest=(this||q).alphaTest);!0===(this||q).premultipliedAlpha&&(t.premultipliedAlpha=(this||q).premultipliedAlpha);!0===(this||q).wireframe&&(t.wireframe=(this||q).wireframe);1<(this||q).wireframeLinewidth&&(t.wireframeLinewidth=(this||q).wireframeLinewidth);"round"!==(this||q).wireframeLinecap&&(t.wireframeLinecap=(this||
q).wireframeLinecap);"round"!==(this||q).wireframeLinejoin&&(t.wireframeLinejoin=(this||q).wireframeLinejoin);!0===(this||q).morphTargets&&(t.morphTargets=!0);!0===(this||q).morphNormals&&(t.morphNormals=!0);!0===(this||q).skinning&&(t.skinning=!0);!0===(this||q).flatShading&&(t.flatShading=(this||q).flatShading);!1===(this||q).visible&&(t.visible=!1);!1===(this||q).toneMapped&&(t.toneMapped=!1);"{}"!==JSON.stringify((this||q).userData)&&(t.userData=(this||q).userData);r&&(r=D(A.textures),A=D(A.images),
0<r.length&&(t.textures=r),0<A.length&&(t.images=A));return t},clone:function(){return(new (this||q).constructor).copy(this||q)},copy:function(A){(this||q).name=A.name;(this||q).fog=A.fog;(this||q).blending=A.blending;(this||q).side=A.side;(this||q).vertexColors=A.vertexColors;(this||q).opacity=A.opacity;(this||q).transparent=A.transparent;(this||q).blendSrc=A.blendSrc;(this||q).blendDst=A.blendDst;(this||q).blendEquation=A.blendEquation;(this||q).blendSrcAlpha=A.blendSrcAlpha;(this||q).blendDstAlpha=
A.blendDstAlpha;(this||q).blendEquationAlpha=A.blendEquationAlpha;(this||q).depthFunc=A.depthFunc;(this||q).depthTest=A.depthTest;(this||q).depthWrite=A.depthWrite;(this||q).stencilWriteMask=A.stencilWriteMask;(this||q).stencilFunc=A.stencilFunc;(this||q).stencilRef=A.stencilRef;(this||q).stencilFuncMask=A.stencilFuncMask;(this||q).stencilFail=A.stencilFail;(this||q).stencilZFail=A.stencilZFail;(this||q).stencilZPass=A.stencilZPass;(this||q).stencilWrite=A.stencilWrite;var D=A.clippingPlanes,r=null;
if(null!==D){var t=D.length;r=Array(t);for(var B=0;B!==t;++B)r[B]=D[B].clone()}(this||q).clippingPlanes=r;(this||q).clipIntersection=A.clipIntersection;(this||q).clipShadows=A.clipShadows;(this||q).shadowSide=A.shadowSide;(this||q).colorWrite=A.colorWrite;(this||q).precision=A.precision;(this||q).polygonOffset=A.polygonOffset;(this||q).polygonOffsetFactor=A.polygonOffsetFactor;(this||q).polygonOffsetUnits=A.polygonOffsetUnits;(this||q).dithering=A.dithering;(this||q).alphaTest=A.alphaTest;(this||
q).premultipliedAlpha=A.premultipliedAlpha;(this||q).visible=A.visible;(this||q).toneMapped=A.toneMapped;(this||q).userData=JSON.parse(JSON.stringify(A.userData));return this||q},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(da.prototype,"needsUpdate",{set:function(A){!0===A&&(this||q).version++}});var iea={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,
blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,
darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,
lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,
mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,
rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},oo={h:0,
s:0,l:0},cP={h:0,s:0,l:0},Zf=function(){function A(r,t,B){return void 0===t&&void 0===B?this.set(r):this.setRGB(r,t,B)}var D=A.prototype;D.set=function(r){r&&r.isColor?this.copy(r):"number"===typeof r?this.setHex(r):"string"===typeof r&&this.setStyle(r);return this||q};D.setScalar=function(r){(this||q).r=r;(this||q).g=r;(this||q).b=r;return this||q};D.setHex=function(r){r=Math.floor(r);(this||q).r=(r>>16&255)/255;(this||q).g=(r>>8&255)/255;(this||q).b=(r&255)/255;return this||q};D.setRGB=function(r,
t,B){(this||q).r=r;(this||q).g=t;(this||q).b=B;return this||q};D.setHSL=function(r,t,B){r=oh.euclideanModulo(r,1);t=oh.clamp(t,0,1);B=oh.clamp(B,0,1);0===t?(this||q).r=(this||q).g=(this||q).b=B:(t=.5>=B?B*(1+t):B+t-B*t,B=2*B-t,(this||q).r=fa(B,t,r+1/3),(this||q).g=fa(B,t,r),(this||q).b=fa(B,t,r-1/3));return this||q};D.setStyle=function(r){function t(Z){void 0!==Z&&1>parseFloat(Z)&&console.warn("THREE.Color: Alpha component of "+r+" will be ignored.")}var B;if(B=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(r)){var I=
B[2];switch(B[1]){case "rgb":case "rgba":if(B=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(I))return(this||q).r=Math.min(255,parseInt(B[1],10))/255,(this||q).g=Math.min(255,parseInt(B[2],10))/255,(this||q).b=Math.min(255,parseInt(B[3],10))/255,t(B[4]),this||q;if(B=/^\s*(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(I))return(this||q).r=Math.min(100,parseInt(B[1],10))/100,(this||q).g=Math.min(100,parseInt(B[2],10))/100,(this||q).b=Math.min(100,parseInt(B[3],
10))/100,t(B[4]),this||q;break;case "hsl":case "hsla":if(B=/^\s*(\d*\.?\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(I)){I=parseFloat(B[1])/360;var M=parseInt(B[2],10)/100,U=parseInt(B[3],10)/100;t(B[4]);return this.setHSL(I,M,U)}}}else if(B=/^#([A-Fa-f\d]+)$/.exec(r)){B=B[1];I=B.length;if(3===I)return(this||q).r=parseInt(B.charAt(0)+B.charAt(0),16)/255,(this||q).g=parseInt(B.charAt(1)+B.charAt(1),16)/255,(this||q).b=parseInt(B.charAt(2)+B.charAt(2),16)/255,this||q;if(6===I)return(this||
q).r=parseInt(B.charAt(0)+B.charAt(1),16)/255,(this||q).g=parseInt(B.charAt(2)+B.charAt(3),16)/255,(this||q).b=parseInt(B.charAt(4)+B.charAt(5),16)/255,this||q}return r&&0<r.length?this.setColorName(r):this||q};D.setColorName=function(r){var t=iea[r];void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+r);return this||q};D.clone=function(){return new (this||q).constructor((this||q).r,(this||q).g,(this||q).b)};D.copy=function(r){(this||q).r=r.r;(this||q).g=r.g;(this||q).b=r.b;return this||
q};D.copyGammaToLinear=function(r,t){void 0===t&&(t=2);(this||q).r=Math.pow(r.r,t);(this||q).g=Math.pow(r.g,t);(this||q).b=Math.pow(r.b,t);return this||q};D.copyLinearToGamma=function(r,t){void 0===t&&(t=2);t=0<t?1/t:1;(this||q).r=Math.pow(r.r,t);(this||q).g=Math.pow(r.g,t);(this||q).b=Math.pow(r.b,t);return this||q};D.convertGammaToLinear=function(r){this.copyGammaToLinear(this||q,r);return this||q};D.convertLinearToGamma=function(r){this.copyLinearToGamma(this||q,r);return this||q};D.copySRGBToLinear=
function(r){(this||q).r=ka(r.r);(this||q).g=ka(r.g);(this||q).b=ka(r.b);return this||q};D.copyLinearToSRGB=function(r){(this||q).r=za(r.r);(this||q).g=za(r.g);(this||q).b=za(r.b);return this||q};D.convertSRGBToLinear=function(){this.copySRGBToLinear(this||q);return this||q};D.convertLinearToSRGB=function(){this.copyLinearToSRGB(this||q);return this||q};D.getHex=function(){return 255*(this||q).r<<16^255*(this||q).g<<8^255*(this||q).b<<0};D.getHexString=function(){return("000000"+this.getHex().toString(16)).slice(-6)};
D.getHSL=function(r){void 0===r&&(console.warn("THREE.Color: .getHSL() target is now required"),r={h:0,s:0,l:0});var t=(this||q).r,B=(this||q).g,I=(this||q).b,M=Math.max(t,B,I),U=Math.min(t,B,I),Z,aa=(U+M)/2;if(U===M)U=Z=0;else{var oa=M-U;U=.5>=aa?oa/(M+U):oa/(2-M-U);switch(M){case t:Z=(B-I)/oa+(B<I?6:0);break;case B:Z=(I-t)/oa+2;break;case I:Z=(t-B)/oa+4}Z/=6}r.h=Z;r.s=U;r.l=aa;return r};D.getStyle=function(){return"rgb("+(255*(this||q).r|0)+","+(255*(this||q).g|0)+","+(255*(this||q).b|0)+")"};D.offsetHSL=
function(r,t,B){this.getHSL(oo);oo.h+=r;oo.s+=t;oo.l+=B;this.setHSL(oo.h,oo.s,oo.l);return this||q};D.add=function(r){(this||q).r+=r.r;(this||q).g+=r.g;(this||q).b+=r.b;return this||q};D.addColors=function(r,t){(this||q).r=r.r+t.r;(this||q).g=r.g+t.g;(this||q).b=r.b+t.b;return this||q};D.addScalar=function(r){(this||q).r+=r;(this||q).g+=r;(this||q).b+=r;return this||q};D.sub=function(r){(this||q).r=Math.max(0,(this||q).r-r.r);(this||q).g=Math.max(0,(this||q).g-r.g);(this||q).b=Math.max(0,(this||q).b-
r.b);return this||q};D.multiply=function(r){(this||q).r*=r.r;(this||q).g*=r.g;(this||q).b*=r.b;return this||q};D.multiplyScalar=function(r){(this||q).r*=r;(this||q).g*=r;(this||q).b*=r;return this||q};D.lerp=function(r,t){(this||q).r+=(r.r-(this||q).r)*t;(this||q).g+=(r.g-(this||q).g)*t;(this||q).b+=(r.b-(this||q).b)*t;return this||q};D.lerpColors=function(r,t,B){(this||q).r=r.r+(t.r-r.r)*B;(this||q).g=r.g+(t.g-r.g)*B;(this||q).b=r.b+(t.b-r.b)*B;return this||q};D.lerpHSL=function(r,t){this.getHSL(oo);
r.getHSL(cP);r=oh.lerp(oo.h,cP.h,t);var B=oh.lerp(oo.s,cP.s,t);t=oh.lerp(oo.l,cP.l,t);this.setHSL(r,B,t);return this||q};D.equals=function(r){return r.r===(this||q).r&&r.g===(this||q).g&&r.b===(this||q).b};D.fromArray=function(r,t){void 0===t&&(t=0);(this||q).r=r[t];(this||q).g=r[t+1];(this||q).b=r[t+2];return this||q};D.toArray=function(r,t){void 0===r&&(r=[]);void 0===t&&(t=0);r[t]=(this||q).r;r[t+1]=(this||q).g;r[t+2]=(this||q).b;return r};D.fromBufferAttribute=function(r,t){(this||q).r=r.getX(t);
(this||q).g=r.getY(t);(this||q).b=r.getZ(t);!0===r.normalized&&((this||q).r/=255,(this||q).g/=255,(this||q).b/=255);return this||q};D.toJSON=function(){return this.getHex()};return A}();Zf.NAMES=iea;Zf.prototype.isColor=!0;Zf.prototype.r=1;Zf.prototype.g=1;Zf.prototype.b=1;var ot=function(A){function D(r){var t=A.call(this||q)||this||q;t.type="MeshBasicMaterial";t.color=new Zf(16777215);t.map=null;t.lightMap=null;t.lightMapIntensity=1;t.aoMap=null;t.aoMapIntensity=1;t.specularMap=null;t.alphaMap=
null;t.envMap=null;t.combine=0;t.reflectivity=1;t.refractionRatio=.98;t.wireframe=!1;t.wireframeLinewidth=1;t.wireframeLinecap="round";t.wireframeLinejoin="round";t.skinning=!1;t.morphTargets=!1;t.setValues(r);return t}p(D,A);D.prototype.copy=function(r){A.prototype.copy.call(this||q,r);(this||q).color.copy(r.color);(this||q).map=r.map;(this||q).lightMap=r.lightMap;(this||q).lightMapIntensity=r.lightMapIntensity;(this||q).aoMap=r.aoMap;(this||q).aoMapIntensity=r.aoMapIntensity;(this||q).specularMap=
r.specularMap;(this||q).alphaMap=r.alphaMap;(this||q).envMap=r.envMap;(this||q).combine=r.combine;(this||q).reflectivity=r.reflectivity;(this||q).refractionRatio=r.refractionRatio;(this||q).wireframe=r.wireframe;(this||q).wireframeLinewidth=r.wireframeLinewidth;(this||q).wireframeLinecap=r.wireframeLinecap;(this||q).wireframeLinejoin=r.wireframeLinejoin;(this||q).skinning=r.skinning;(this||q).morphTargets=r.morphTargets;return this||q};return D}(da);ot.prototype.isMeshBasicMaterial=!0;var yk=new jc,
dP=new Ye;Object.defineProperty(Ia.prototype,"needsUpdate",{set:function(A){!0===A&&(this||q).version++}});Object.assign(Ia.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(A){(this||q).usage=A;return this||q},copy:function(A){(this||q).name=A.name;(this||q).array=new A.array.constructor(A.array);(this||q).itemSize=A.itemSize;(this||q).count=A.count;(this||q).normalized=A.normalized;(this||q).usage=A.usage;return this||q},copyAt:function(A,D,r){A*=(this||q).itemSize;
r*=D.itemSize;for(var t=0,B=(this||q).itemSize;t<B;t++)(this||q).array[A+t]=D.array[r+t];return this||q},copyArray:function(A){(this||q).array.set(A);return this||q},copyColorsArray:function(A){for(var D=(this||q).array,r=0,t=0,B=A.length;t<B;t++){var I=A[t];void 0===I&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",t),I=new Zf);D[r++]=I.r;D[r++]=I.g;D[r++]=I.b}return this||q},copyVector2sArray:function(A){for(var D=(this||q).array,r=0,t=0,B=A.length;t<B;t++){var I=A[t];
void 0===I&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",t),I=new Ye);D[r++]=I.x;D[r++]=I.y}return this||q},copyVector3sArray:function(A){for(var D=(this||q).array,r=0,t=0,B=A.length;t<B;t++){var I=A[t];void 0===I&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",t),I=new jc);D[r++]=I.x;D[r++]=I.y;D[r++]=I.z}return this||q},copyVector4sArray:function(A){for(var D=(this||q).array,r=0,t=0,B=A.length;t<B;t++){var I=A[t];void 0===I&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",
t),I=new Xj);D[r++]=I.x;D[r++]=I.y;D[r++]=I.z;D[r++]=I.w}return this||q},applyMatrix3:function(A){if(2===(this||q).itemSize)for(var D=0,r=(this||q).count;D<r;D++)dP.fromBufferAttribute(this||q,D),dP.applyMatrix3(A),this.setXY(D,dP.x,dP.y);else if(3===(this||q).itemSize)for(D=0,r=(this||q).count;D<r;D++)yk.fromBufferAttribute(this||q,D),yk.applyMatrix3(A),this.setXYZ(D,yk.x,yk.y,yk.z);return this||q},applyMatrix4:function(A){for(var D=0,r=(this||q).count;D<r;D++)yk.x=this.getX(D),yk.y=this.getY(D),
yk.z=this.getZ(D),yk.applyMatrix4(A),this.setXYZ(D,yk.x,yk.y,yk.z);return this||q},applyNormalMatrix:function(A){for(var D=0,r=(this||q).count;D<r;D++)yk.x=this.getX(D),yk.y=this.getY(D),yk.z=this.getZ(D),yk.applyNormalMatrix(A),this.setXYZ(D,yk.x,yk.y,yk.z);return this||q},transformDirection:function(A){for(var D=0,r=(this||q).count;D<r;D++)yk.x=this.getX(D),yk.y=this.getY(D),yk.z=this.getZ(D),yk.transformDirection(A),this.setXYZ(D,yk.x,yk.y,yk.z);return this||q},set:function(A,D){void 0===D&&(D=
0);(this||q).array.set(A,D);return this||q},getX:function(A){return(this||q).array[A*(this||q).itemSize]},setX:function(A,D){(this||q).array[A*(this||q).itemSize]=D;return this||q},getY:function(A){return(this||q).array[A*(this||q).itemSize+1]},setY:function(A,D){(this||q).array[A*(this||q).itemSize+1]=D;return this||q},getZ:function(A){return(this||q).array[A*(this||q).itemSize+2]},setZ:function(A,D){(this||q).array[A*(this||q).itemSize+2]=D;return this||q},getW:function(A){return(this||q).array[A*
(this||q).itemSize+3]},setW:function(A,D){(this||q).array[A*(this||q).itemSize+3]=D;return this||q},setXY:function(A,D,r){A*=(this||q).itemSize;(this||q).array[A+0]=D;(this||q).array[A+1]=r;return this||q},setXYZ:function(A,D,r,t){A*=(this||q).itemSize;(this||q).array[A+0]=D;(this||q).array[A+1]=r;(this||q).array[A+2]=t;return this||q},setXYZW:function(A,D,r,t,B){A*=(this||q).itemSize;(this||q).array[A+0]=D;(this||q).array[A+1]=r;(this||q).array[A+2]=t;(this||q).array[A+3]=B;return this||q},onUpload:function(A){(this||
q).onUploadCallback=A;return this||q},clone:function(){return(new (this||q).constructor((this||q).array,(this||q).itemSize)).copy(this||q)},toJSON:function(){return{itemSize:(this||q).itemSize,type:(this||q).array.constructor.name,array:Array.prototype.slice.call((this||q).array),normalized:(this||q).normalized}}});N.prototype=Object.create(Ia.prototype);N.prototype.constructor=N;ia.prototype=Object.create(Ia.prototype);ia.prototype.constructor=ia;W.prototype=Object.create(Ia.prototype);W.prototype.constructor=
W;ca.prototype=Object.create(Ia.prototype);ca.prototype.constructor=ca;sa.prototype=Object.create(Ia.prototype);sa.prototype.constructor=sa;la.prototype=Object.create(Ia.prototype);la.prototype.constructor=la;Aa.prototype=Object.create(Ia.prototype);Aa.prototype.constructor=Aa;ib.prototype=Object.create(Ia.prototype);ib.prototype.constructor=ib;ib.prototype.isFloat16BufferAttribute=!0;ob.prototype=Object.create(Ia.prototype);ob.prototype.constructor=ob;Ea.prototype=Object.create(Ia.prototype);Ea.prototype.constructor=
Ea;var iG={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array},oya=0,gs=new Fg,XY=new P,MB=new jc,Wo=new no,jG=new no,Em=new jc;ya.prototype=Object.assign(Object.create(J.prototype),{constructor:ya,isBufferGeometry:!0,getIndex:function(){return(this||q).index},setIndex:function(A){Array.isArray(A)?(this||q).index=new (65535<ua(A)?
Aa:sa)(A,1):(this||q).index=A;return this||q},getAttribute:function(A){return(this||q).attributes[A]},setAttribute:function(A,D){(this||q).attributes[A]=D;return this||q},deleteAttribute:function(A){delete (this||q).attributes[A];return this||q},hasAttribute:function(A){return void 0!==(this||q).attributes[A]},addGroup:function(A,D,r){void 0===r&&(r=0);(this||q).groups.push({start:A,count:D,materialIndex:r})},clearGroups:function(){(this||q).groups=[]},setDrawRange:function(A,D){(this||q).drawRange.start=
A;(this||q).drawRange.count=D},applyMatrix4:function(A){var D=(this||q).attributes.position;void 0!==D&&(D.applyMatrix4(A),D.needsUpdate=!0);D=(this||q).attributes.normal;if(void 0!==D){var r=(new cm).getNormalMatrix(A);D.applyNormalMatrix(r);D.needsUpdate=!0}D=(this||q).attributes.tangent;void 0!==D&&(D.transformDirection(A),D.needsUpdate=!0);null!==(this||q).boundingBox&&this.computeBoundingBox();null!==(this||q).boundingSphere&&this.computeBoundingSphere();return this||q},rotateX:function(A){gs.makeRotationX(A);
this.applyMatrix4(gs);return this||q},rotateY:function(A){gs.makeRotationY(A);this.applyMatrix4(gs);return this||q},rotateZ:function(A){gs.makeRotationZ(A);this.applyMatrix4(gs);return this||q},translate:function(A,D,r){gs.makeTranslation(A,D,r);this.applyMatrix4(gs);return this||q},scale:function(A,D,r){gs.makeScale(A,D,r);this.applyMatrix4(gs);return this||q},lookAt:function(A){XY.lookAt(A);XY.updateMatrix();this.applyMatrix4(XY.matrix);return this||q},center:function(){this.computeBoundingBox();
(this||q).boundingBox.getCenter(MB).negate();this.translate(MB.x,MB.y,MB.z);return this||q},setFromPoints:function(A){for(var D=[],r=0,t=A.length;r<t;r++){var B=A[r];D.push(B.x,B.y,B.z||0)}this.setAttribute("position",new ob(D,3));return this||q},computeBoundingBox:function(){null===(this||q).boundingBox&&((this||q).boundingBox=new no);var A=(this||q).attributes.position,D=(this||q).morphAttributes.position;if(A&&A.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',
this||q),(this||q).boundingBox.set(new jc(-Infinity,-Infinity,-Infinity),new jc(Infinity,Infinity,Infinity));else{if(void 0!==A){if((this||q).boundingBox.setFromBufferAttribute(A),D){A=0;for(var r=D.length;A<r;A++)Wo.setFromBufferAttribute(D[A]),(this||q).morphTargetsRelative?(Em.addVectors((this||q).boundingBox.min,Wo.min),(this||q).boundingBox.expandByPoint(Em),Em.addVectors((this||q).boundingBox.max,Wo.max),(this||q).boundingBox.expandByPoint(Em)):((this||q).boundingBox.expandByPoint(Wo.min),(this||
q).boundingBox.expandByPoint(Wo.max))}}else(this||q).boundingBox.makeEmpty();(isNaN((this||q).boundingBox.min.x)||isNaN((this||q).boundingBox.min.y)||isNaN((this||q).boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this||q)}},computeBoundingSphere:function(){null===(this||q).boundingSphere&&((this||q).boundingSphere=new ov);var A=(this||q).attributes.position,D=(this||q).morphAttributes.position;
if(A&&A.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this||q),(this||q).boundingSphere.set(new jc,Infinity);else if(A){var r=(this||q).boundingSphere.center;Wo.setFromBufferAttribute(A);if(D)for(var t=0,B=D.length;t<B;t++)jG.setFromBufferAttribute(D[t]),(this||q).morphTargetsRelative?(Em.addVectors(Wo.min,jG.min),Wo.expandByPoint(Em),Em.addVectors(Wo.max,jG.max),
Wo.expandByPoint(Em)):(Wo.expandByPoint(jG.min),Wo.expandByPoint(jG.max));Wo.getCenter(r);B=t=0;for(var I=A.count;B<I;B++)Em.fromBufferAttribute(A,B),t=Math.max(t,r.distanceToSquared(Em));if(D)for(B=0,I=D.length;B<I;B++)for(var M=D[B],U=(this||q).morphTargetsRelative,Z=0,aa=M.count;Z<aa;Z++)Em.fromBufferAttribute(M,Z),U&&(MB.fromBufferAttribute(A,Z),Em.add(MB)),t=Math.max(t,r.distanceToSquared(Em));(this||q).boundingSphere.radius=Math.sqrt(t);isNaN((this||q).boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',
this||q)}},computeFaceNormals:function(){},computeTangents:function(){function A(Fd,ce,rf){wa.fromArray(B,3*Fd);Oa.fromArray(B,3*ce);Ya.fromArray(B,3*rf);ab.fromArray(M,2*Fd);zb.fromArray(M,2*ce);sb.fromArray(M,2*rf);Oa.sub(wa);Ya.sub(wa);zb.sub(ab);sb.sub(ab);var sd=1/(zb.x*sb.y-sb.x*zb.y);isFinite(sd)&&(nc.copy(Oa).multiplyScalar(sb.y).addScaledVector(Ya,-zb.y).multiplyScalar(sd),oc.copy(Ya).multiplyScalar(zb.x).addScaledVector(Oa,-sb.x).multiplyScalar(sd),aa[Fd].add(nc),aa[ce].add(nc),aa[rf].add(nc),
oa[Fd].add(oc),oa[ce].add(oc),oa[rf].add(oc))}function D(Fd){qd.fromArray(I,3*Fd);Ld.copy(qd);var ce=aa[Fd];Tc.copy(ce);Tc.sub(qd.multiplyScalar(qd.dot(ce))).normalize();Uc.crossVectors(Ld,ce);ce=Uc.dot(oa[Fd]);Z[4*Fd]=Tc.x;Z[4*Fd+1]=Tc.y;Z[4*Fd+2]=Tc.z;Z[4*Fd+3]=0>ce?-1:1}var r=(this||q).index,t=(this||q).attributes;if(null===r||void 0===t.position||void 0===t.normal||void 0===t.uv)console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");
else{r=r.array;var B=t.position.array,I=t.normal.array,M=t.uv.array,U=B.length/3;void 0===t.tangent&&this.setAttribute("tangent",new Ia(new Float32Array(4*U),4));var Z=t.tangent.array,aa=[],oa=[];for(t=0;t<U;t++)aa[t]=new jc,oa[t]=new jc;var wa=new jc,Oa=new jc,Ya=new jc,ab=new Ye,zb=new Ye,sb=new Ye,nc=new jc,oc=new jc;t=(this||q).groups;0===t.length&&(t=[{start:0,count:r.length}]);U=0;for(var Fc=t.length;U<Fc;++U){var Sc=t[U],rd=Sc.start,jd=rd;for(Sc=rd+Sc.count;jd<Sc;jd+=3)A(r[jd+0],r[jd+1],r[jd+
2])}var Tc=new jc,Uc=new jc,qd=new jc,Ld=new jc;U=0;for(Fc=t.length;U<Fc;++U)for(Sc=t[U],jd=rd=Sc.start,Sc=rd+Sc.count;jd<Sc;jd+=3)D(r[jd+0]),D(r[jd+1]),D(r[jd+2])}},computeVertexNormals:function(){var A=(this||q).index,D=this.getAttribute("position");if(void 0!==D){var r=this.getAttribute("normal");if(void 0===r)r=new Ia(new Float32Array(3*D.count),3),this.setAttribute("normal",r);else for(var t=0,B=r.count;t<B;t++)r.setXYZ(t,0,0,0);t=new jc;B=new jc;var I=new jc,M=new jc,U=new jc,Z=new jc,aa=new jc,
oa=new jc;if(A)for(var wa=0,Oa=A.count;wa<Oa;wa+=3){var Ya=A.getX(wa+0),ab=A.getX(wa+1),zb=A.getX(wa+2);t.fromBufferAttribute(D,Ya);B.fromBufferAttribute(D,ab);I.fromBufferAttribute(D,zb);aa.subVectors(I,B);oa.subVectors(t,B);aa.cross(oa);M.fromBufferAttribute(r,Ya);U.fromBufferAttribute(r,ab);Z.fromBufferAttribute(r,zb);M.add(aa);U.add(aa);Z.add(aa);r.setXYZ(Ya,M.x,M.y,M.z);r.setXYZ(ab,U.x,U.y,U.z);r.setXYZ(zb,Z.x,Z.y,Z.z)}else for(A=0,M=D.count;A<M;A+=3)t.fromBufferAttribute(D,A+0),B.fromBufferAttribute(D,
A+1),I.fromBufferAttribute(D,A+2),aa.subVectors(I,B),oa.subVectors(t,B),aa.cross(oa),r.setXYZ(A+0,aa.x,aa.y,aa.z),r.setXYZ(A+1,aa.x,aa.y,aa.z),r.setXYZ(A+2,aa.x,aa.y,aa.z);this.normalizeNormals();r.needsUpdate=!0}},merge:function(A,D){if(A&&A.isBufferGeometry){void 0===D&&(D=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var r=(this||q).attributes,t;for(t in r)if(void 0!==A.attributes[t]){var B=
r[t].array,I=A.attributes[t],M=I.array,U=I.itemSize*D;I=Math.min(M.length,B.length-U);for(var Z=0;Z<I;Z++,U++)B[U]=M[Z]}return this||q}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",A)},normalizeNormals:function(){for(var A=(this||q).attributes.normal,D=0,r=A.count;D<r;D++)Em.fromBufferAttribute(A,D),Em.normalize(),A.setXYZ(D,Em.x,Em.y,Em.z)},toNonIndexed:function(){function A(oa,wa){var Oa=oa.array,Ya=oa.itemSize;oa=oa.normalized;for(var ab=new Oa.constructor(wa.length*
Ya),zb,sb=0,nc=0,oc=wa.length;nc<oc;nc++){zb=wa[nc]*Ya;for(var Fc=0;Fc<Ya;Fc++)ab[sb++]=Oa[zb++]}return new Ia(ab,Ya,oa)}if(null===(this||q).index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this||q;var D=new ya,r=(this||q).index.array,t=(this||q).attributes;for(M in t){var B=A(t[M],r);D.setAttribute(M,B)}t=(this||q).morphAttributes;for(var I in t){var M=[];B=t[I];for(var U=0,Z=B.length;U<Z;U++){var aa=A(B[U],r);M.push(aa)}D.morphAttributes[I]=
M}D.morphTargetsRelative=(this||q).morphTargetsRelative;r=(this||q).groups;I=0;for(t=r.length;I<t;I++)M=r[I],D.addGroup(M.start,M.count,M.materialIndex);return D},toJSON:function(){var A={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};A.uuid=(this||q).uuid;A.type=(this||q).type;""!==(this||q).name&&(A.name=(this||q).name);0<Object.keys((this||q).userData).length&&(A.userData=(this||q).userData);if(void 0!==(this||q).parameters){var D=(this||q).parameters;for(r in D)void 0!==
D[r]&&(A[r]=D[r]);return A}A.data={attributes:{}};var r=(this||q).index;null!==r&&(A.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});r=(this||q).attributes;for(var t in r){var B=r[t],I=B.toJSON(A.data);""!==B.name&&(I.name=B.name);A.data.attributes[t]=I}t={};r=!1;for(D in(this||q).morphAttributes){B=(this||q).morphAttributes[D];I=[];for(var M=0,U=B.length;M<U;M++){var Z=B[M],aa=Z.toJSON(A.data);""!==Z.name&&(aa.name=Z.name);I.push(aa)}0<I.length&&(t[D]=I,r=!0)}r&&
(A.data.morphAttributes=t,A.data.morphTargetsRelative=(this||q).morphTargetsRelative);D=(this||q).groups;0<D.length&&(A.data.groups=JSON.parse(JSON.stringify(D)));D=(this||q).boundingSphere;null!==D&&(A.data.boundingSphere={center:D.center.toArray(),radius:D.radius});return A},clone:function(){return(new ya).copy(this||q)},copy:function(A){(this||q).index=null;(this||q).attributes={};(this||q).morphAttributes={};(this||q).groups=[];(this||q).boundingBox=null;(this||q).boundingSphere=null;var D={};
(this||q).name=A.name;var r=A.index;null!==r&&this.setIndex(r.clone(D));r=A.attributes;for(var t in r)this.setAttribute(t,r[t].clone(D));t=A.morphAttributes;for(var B in t){r=[];for(var I=t[B],M=0,U=I.length;M<U;M++)r.push(I[M].clone(D));(this||q).morphAttributes[B]=r}(this||q).morphTargetsRelative=A.morphTargetsRelative;D=A.groups;B=0;for(t=D.length;B<t;B++)r=D[B],this.addGroup(r.start,r.count,r.materialIndex);D=A.boundingBox;null!==D&&((this||q).boundingBox=D.clone());D=A.boundingSphere;null!==
D&&((this||q).boundingSphere=D.clone());(this||q).drawRange.start=A.drawRange.start;(this||q).drawRange.count=A.drawRange.count;(this||q).userData=A.userData;return this||q},dispose:function(){this.dispatchEvent({type:"dispose"})}});var jea=new Fg,NB=new lv,YY=new ov,dv=new jc,ev=new jc,fv=new jc,rY=new jc,sY=new jc,tY=new jc,wO=new jc,xO=new jc,yO=new jc,AO=new Ye,BO=new Ye,CO=new Ye,uY=new jc,zO=new jc;Sa.prototype=Object.assign(Object.create(P.prototype),{constructor:Sa,isMesh:!0,copy:function(A){P.prototype.copy.call(this||
q,A);void 0!==A.morphTargetInfluences&&((this||q).morphTargetInfluences=A.morphTargetInfluences.slice());void 0!==A.morphTargetDictionary&&((this||q).morphTargetDictionary=Object.assign({},A.morphTargetDictionary));(this||q).material=A.material;(this||q).geometry=A.geometry;return this||q},updateMorphTargets:function(){var A=(this||q).geometry;if(A.isBufferGeometry){A=A.morphAttributes;var D=Object.keys(A);if(0<D.length&&(A=A[D[0]],void 0!==A)){(this||q).morphTargetInfluences=[];(this||q).morphTargetDictionary=
{};D=0;for(var r=A.length;D<r;D++){var t=A[D].name||String(D);(this||q).morphTargetInfluences.push(0);(this||q).morphTargetDictionary[t]=D}}}else A=A.morphTargets,void 0!==A&&0<A.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(A,D){var r=(this||q).geometry,t=(this||q).material,B=(this||q).matrixWorld;if(void 0!==t&&(null===r.boundingSphere&&r.computeBoundingSphere(),YY.copy(r.boundingSphere),YY.applyMatrix4(B),
!1!==A.ray.intersectsSphere(YY)&&(jea.copy(B).invert(),NB.copy(A.ray).applyMatrix4(jea),null===r.boundingBox||!1!==NB.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var I=r.index;B=r.attributes.position;var M=r.morphAttributes.position,U=r.morphTargetsRelative,Z=r.attributes.uv,aa=r.attributes.uv2,oa=r.groups;r=r.drawRange;if(null!==I)if(Array.isArray(t))for(var wa=0,Oa=oa.length;wa<Oa;wa++)for(var Ya=oa[wa],ab=t[Ya.materialIndex],zb=Math.max(Ya.start,r.start),sb=Math.min(Ya.start+Ya.count,
r.start+r.count);zb<sb;zb+=3){var nc=I.getX(zb);var oc=I.getX(zb+1),Fc=I.getX(zb+2);if(nc=Qb(this||q,ab,A,NB,B,M,U,Z,aa,nc,oc,Fc))nc.faceIndex=Math.floor(zb/3),nc.face.materialIndex=Ya.materialIndex,D.push(nc)}else for(oa=Math.max(0,r.start),r=Math.min(I.count,r.start+r.count);oa<r;oa+=3){if(nc=I.getX(oa),wa=I.getX(oa+1),Oa=I.getX(oa+2),nc=Qb(this||q,t,A,NB,B,M,U,Z,aa,nc,wa,Oa))nc.faceIndex=Math.floor(oa/3),D.push(nc)}else if(void 0!==B)if(Array.isArray(t))for(I=0,wa=oa.length;I<wa;I++)for(Oa=oa[I],
Ya=t[Oa.materialIndex],ab=Math.max(Oa.start,r.start),zb=Math.min(Oa.start+Oa.count,r.start+r.count);ab<zb;ab+=3){if(nc=Qb(this||q,Ya,A,NB,B,M,U,Z,aa,ab,ab+1,ab+2))nc.faceIndex=Math.floor(ab/3),nc.face.materialIndex=Oa.materialIndex,D.push(nc)}else for(oa=Math.max(0,r.start),r=Math.min(B.count,r.start+r.count);oa<r;oa+=3)if(nc=Qb(this||q,t,A,NB,B,M,U,Z,aa,oa,oa+1,oa+2))nc.faceIndex=Math.floor(oa/3),D.push(nc)}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}});
var iy=function(A){function D(r,t,B,I,M,U){function Z(nc,oc,Fc,Sc,rd,jd,Tc,Uc,qd,Ld,Fd){var ce=jd/qd,rf=Tc/Ld,sd=jd/2,zd=Tc/2,Td=Uc/2;Tc=qd+1;for(var $f=Ld+1,Ne=jd=0,bg=new jc,qh=0;qh<$f;qh++)for(var mi=qh*rf-zd,kk=0;kk<Tc;kk++)bg[nc]=(kk*ce-sd)*Sc,bg[oc]=mi*rd,bg[Fc]=Td,Oa.push(bg.x,bg.y,bg.z),bg[nc]=0,bg[oc]=0,bg[Fc]=0<Uc?1:-1,Ya.push(bg.x,bg.y,bg.z),ab.push(kk/qd),ab.push(1-qh/Ld),jd+=1;for(nc=0;nc<Ld;nc++)for(oc=0;oc<qd;oc++)Fc=zb+oc+Tc*(nc+1),Sc=zb+(oc+1)+Tc*(nc+1),rd=zb+(oc+1)+Tc*nc,wa.push(zb+
oc+Tc*nc,Fc,rd),wa.push(Fc,Sc,rd),Ne+=6;oa.addGroup(sb,Ne,Fd);sb+=Ne;zb+=jd}void 0===r&&(r=1);void 0===t&&(t=1);void 0===B&&(B=1);void 0===I&&(I=1);void 0===M&&(M=1);void 0===U&&(U=1);var aa=A.call(this||q)||this||q;aa.type="BoxGeometry";aa.parameters={width:r,height:t,depth:B,widthSegments:I,heightSegments:M,depthSegments:U};var oa=x(aa);I=Math.floor(I);M=Math.floor(M);U=Math.floor(U);var wa=[],Oa=[],Ya=[],ab=[],zb=0,sb=0;Z("z","y","x",-1,-1,B,t,r,U,M,0);Z("z","y","x",1,-1,B,t,-r,U,M,1);Z("x","z",
"y",1,1,r,B,t,I,U,2);Z("x","z","y",1,-1,r,B,-t,I,U,3);Z("x","y","z",1,-1,r,t,B,I,M,4);Z("x","y","z",-1,-1,r,t,-B,I,M,5);aa.setIndex(wa);aa.setAttribute("position",new ob(Oa,3));aa.setAttribute("normal",new ob(Ya,3));aa.setAttribute("uv",new ob(ab,2));return aa}p(D,A);return D}(ya),yda={clone:mc,merge:Yb};fc.prototype=Object.create(da.prototype);fc.prototype.constructor=fc;fc.prototype.isShaderMaterial=!0;fc.prototype.copy=function(A){da.prototype.copy.call(this||q,A);(this||q).fragmentShader=A.fragmentShader;
(this||q).vertexShader=A.vertexShader;(this||q).uniforms=mc(A.uniforms);(this||q).defines=Object.assign({},A.defines);(this||q).wireframe=A.wireframe;(this||q).wireframeLinewidth=A.wireframeLinewidth;(this||q).lights=A.lights;(this||q).clipping=A.clipping;(this||q).skinning=A.skinning;(this||q).morphTargets=A.morphTargets;(this||q).morphNormals=A.morphNormals;(this||q).extensions=Object.assign({},A.extensions);(this||q).glslVersion=A.glslVersion;return this||q};fc.prototype.toJSON=function(A){var D=
da.prototype.toJSON.call(this||q,A);D.glslVersion=(this||q).glslVersion;D.uniforms={};for(var r in(this||q).uniforms){var t=(this||q).uniforms[r].value;D.uniforms[r]=t&&t.isTexture?{type:"t",value:t.toJSON(A).uuid}:t&&t.isColor?{type:"c",value:t.getHex()}:t&&t.isVector2?{type:"v2",value:t.toArray()}:t&&t.isVector3?{type:"v3",value:t.toArray()}:t&&t.isVector4?{type:"v4",value:t.toArray()}:t&&t.isMatrix3?{type:"m3",value:t.toArray()}:t&&t.isMatrix4?{type:"m4",value:t.toArray()}:{value:t}}0<Object.keys((this||
q).defines).length&&(D.defines=(this||q).defines);D.vertexShader=(this||q).vertexShader;D.fragmentShader=(this||q).fragmentShader;A={};for(var B in(this||q).extensions)!0===(this||q).extensions[B]&&(A[B]=!0);0<Object.keys(A).length&&(D.extensions=A);return D};Jc.prototype=Object.assign(Object.create(P.prototype),{constructor:Jc,isCamera:!0,copy:function(A,D){P.prototype.copy.call(this||q,A,D);(this||q).matrixWorldInverse.copy(A.matrixWorldInverse);(this||q).projectionMatrix.copy(A.projectionMatrix);
(this||q).projectionMatrixInverse.copy(A.projectionMatrixInverse);return this||q},getWorldDirection:function(A){void 0===A&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),A=new jc);this.updateWorldMatrix(!0,!1);var D=(this||q).matrixWorld.elements;return A.set(-D[8],-D[9],-D[10]).normalize()},updateMatrixWorld:function(A){P.prototype.updateMatrixWorld.call(this||q,A);(this||q).matrixWorldInverse.copy((this||q).matrixWorld).invert()},updateWorldMatrix:function(A,D){P.prototype.updateWorldMatrix.call(this||
q,A,D);(this||q).matrixWorldInverse.copy((this||q).matrixWorld).invert()},clone:function(){return(new (this||q).constructor).copy(this||q)}});Nb.prototype=Object.assign(Object.create(Jc.prototype),{constructor:Nb,isPerspectiveCamera:!0,copy:function(A,D){Jc.prototype.copy.call(this||q,A,D);(this||q).fov=A.fov;(this||q).zoom=A.zoom;(this||q).near=A.near;(this||q).far=A.far;(this||q).focus=A.focus;(this||q).aspect=A.aspect;(this||q).view=null===A.view?null:Object.assign({},A.view);(this||q).filmGauge=
A.filmGauge;(this||q).filmOffset=A.filmOffset;return this||q},setFocalLength:function(A){A=.5*this.getFilmHeight()/A;(this||q).fov=2*oh.RAD2DEG*Math.atan(A);this.updateProjectionMatrix()},getFocalLength:function(){var A=Math.tan(.5*oh.DEG2RAD*(this||q).fov);return.5*this.getFilmHeight()/A},getEffectiveFOV:function(){return 2*oh.RAD2DEG*Math.atan(Math.tan(.5*oh.DEG2RAD*(this||q).fov)/(this||q).zoom)},getFilmWidth:function(){return(this||q).filmGauge*Math.min((this||q).aspect,1)},getFilmHeight:function(){return(this||
q).filmGauge/Math.max((this||q).aspect,1)},setViewOffset:function(A,D,r,t,B,I){(this||q).aspect=A/D;null===(this||q).view&&((this||q).view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});(this||q).view.enabled=!0;(this||q).view.fullWidth=A;(this||q).view.fullHeight=D;(this||q).view.offsetX=r;(this||q).view.offsetY=t;(this||q).view.width=B;(this||q).view.height=I;this.updateProjectionMatrix()},clearViewOffset:function(){null!==(this||q).view&&((this||q).view.enabled=!1);
this.updateProjectionMatrix()},updateProjectionMatrix:function(){var A=(this||q).near,D=A*Math.tan(.5*oh.DEG2RAD*(this||q).fov)/(this||q).zoom,r=2*D,t=(this||q).aspect*r,B=-.5*t,I=(this||q).view;if(null!==(this||q).view&&(this||q).view.enabled){var M=I.fullWidth,U=I.fullHeight;B+=I.offsetX*t/M;D-=I.offsetY*r/U;t*=I.width/M;r*=I.height/U}I=(this||q).filmOffset;0!==I&&(B+=A*I/this.getFilmWidth());(this||q).projectionMatrix.makePerspective(B,B+t,D,D-r,A,(this||q).far);(this||q).projectionMatrixInverse.copy((this||
q).projectionMatrix).invert()},toJSON:function(A){A=P.prototype.toJSON.call(this||q,A);A.object.fov=(this||q).fov;A.object.zoom=(this||q).zoom;A.object.near=(this||q).near;A.object.far=(this||q).far;A.object.focus=(this||q).focus;A.object.aspect=(this||q).aspect;null!==(this||q).view&&(A.object.view=Object.assign({},(this||q).view));A.object.filmGauge=(this||q).filmGauge;A.object.filmOffset=(this||q).filmOffset;return A}});var eP=function(A){function D(r,t,B){var I=A.call(this||q)||this||q;I.type=
"CubeCamera";if(!0!==B.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),x(I);I.renderTarget=B;B=new Nb(90,1,r,t);B.layers=I.layers;B.up.set(0,-1,0);B.lookAt(new jc(1,0,0));I.add(B);B=new Nb(90,1,r,t);B.layers=I.layers;B.up.set(0,-1,0);B.lookAt(new jc(-1,0,0));I.add(B);B=new Nb(90,1,r,t);B.layers=I.layers;B.up.set(0,0,1);B.lookAt(new jc(0,1,0));I.add(B);B=new Nb(90,1,r,t);B.layers=I.layers;B.up.set(0,
0,-1);B.lookAt(new jc(0,-1,0));I.add(B);B=new Nb(90,1,r,t);B.layers=I.layers;B.up.set(0,-1,0);B.lookAt(new jc(0,0,1));I.add(B);r=new Nb(90,1,r,t);r.layers=I.layers;r.up.set(0,-1,0);r.lookAt(new jc(0,0,-1));I.add(r);return I}p(D,A);D.prototype.update=function(r,t){null===(this||q).parent&&this.updateMatrixWorld();var B=(this||q).renderTarget,I=(this||q).children,M=I[0],U=I[1],Z=I[2],aa=I[3],oa=I[4];I=I[5];var wa=r.xr.enabled,Oa=r.getRenderTarget();r.xr.enabled=!1;var Ya=B.texture.generateMipmaps;B.texture.generateMipmaps=
!1;r.setRenderTarget(B,0);r.render(t,M);r.setRenderTarget(B,1);r.render(t,U);r.setRenderTarget(B,2);r.render(t,Z);r.setRenderTarget(B,3);r.render(t,aa);r.setRenderTarget(B,4);r.render(t,oa);B.texture.generateMipmaps=Ya;r.setRenderTarget(B,5);r.render(t,I);r.setRenderTarget(Oa);r.xr.enabled=wa};return D}(P),OB=function(A){function D(r,t,B,I,M,U,Z,aa,oa,wa){r=void 0!==r?r:[];r=A.call(this||q,r,void 0!==t?t:301,B,I,M,U,void 0!==Z?Z:1022,aa,oa,wa)||this||q;r._needsFlipEnvMap=!0;r.flipY=!1;return r}p(D,
A);l(D,[{key:"images",get:function(){return(this||q).image},set:function(r){(this||q).image=r}}]);return D}(pn);OB.prototype.isCubeTexture=!0;var DO=function(A){function D(t,B,I){Number.isInteger(B)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),B=I);t=A.call(this||q,t,t,B)||this||q;B=B||{};t.texture=new OB(void 0,B.mapping,B.wrapS,B.wrapT,B.magFilter,B.minFilter,B.format,B.type,B.anisotropy,B.encoding);t.texture.generateMipmaps=
void 0!==B.generateMipmaps?B.generateMipmaps:!1;t.texture.minFilter=void 0!==B.minFilter?B.minFilter:1006;t.texture._needsFlipEnvMap=!1;return t}p(D,A);var r=D.prototype;r.fromEquirectangularTexture=function(t,B){(this||q).texture.type=B.type;(this||q).texture.format=1023;(this||q).texture.encoding=B.encoding;(this||q).texture.generateMipmaps=B.generateMipmaps;(this||q).texture.minFilter=B.minFilter;(this||q).texture.magFilter=B.magFilter;var I=new iy(5,5,5),M=new fc({name:"CubemapFromEquirect",uniforms:mc({tEquirect:{value:null}}),
vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",
side:1,blending:0});M.uniforms.tEquirect.value=B;I=new Sa(I,M);M=B.minFilter;1008===B.minFilter&&(B.minFilter=1006);(new eP(1,10,this||q)).update(t,I);B.minFilter=M;I.geometry.dispose();I.material.dispose();return this||q};r.clear=function(t,B,I,M){for(var U=t.getRenderTarget(),Z=0;6>Z;Z++)t.setRenderTarget(this||q,Z),t.clear(B,I,M);t.setRenderTarget(U)};return D}(pt);DO.prototype.isWebGLCubeRenderTarget=!0;var yB=function(A){function D(r,t,B,I,M,U,Z,aa,oa,wa,Oa,Ya){I=A.call(this||q,null,U,Z,aa,oa,
wa,I,M,Oa,Ya)||this||q;I.image={data:r||null,width:t||1,height:B||1};I.magFilter=void 0!==oa?oa:1003;I.minFilter=void 0!==wa?wa:1003;I.generateMipmaps=!1;I.flipY=!1;I.unpackAlignment=1;I.needsUpdate=!0;return I}p(D,A);return D}(pn);yB.prototype.isDataTexture=!0;var PB=new ov,fP=new jc,NF=function(){function A(r,t,B,I,M,U){void 0===r&&(r=new Oq);void 0===t&&(t=new Oq);void 0===B&&(B=new Oq);void 0===I&&(I=new Oq);void 0===M&&(M=new Oq);void 0===U&&(U=new Oq);(this||q).planes=[r,t,B,I,M,U]}var D=A.prototype;
D.set=function(r,t,B,I,M,U){var Z=(this||q).planes;Z[0].copy(r);Z[1].copy(t);Z[2].copy(B);Z[3].copy(I);Z[4].copy(M);Z[5].copy(U);return this||q};D.copy=function(r){for(var t=(this||q).planes,B=0;6>B;B++)t[B].copy(r.planes[B]);return this||q};D.setFromProjectionMatrix=function(r){var t=(this||q).planes,B=r.elements;r=B[0];var I=B[1],M=B[2],U=B[3],Z=B[4],aa=B[5],oa=B[6],wa=B[7],Oa=B[8],Ya=B[9],ab=B[10],zb=B[11],sb=B[12],nc=B[13],oc=B[14];B=B[15];t[0].setComponents(U-r,wa-Z,zb-Oa,B-sb).normalize();t[1].setComponents(U+
r,wa+Z,zb+Oa,B+sb).normalize();t[2].setComponents(U+I,wa+aa,zb+Ya,B+nc).normalize();t[3].setComponents(U-I,wa-aa,zb-Ya,B-nc).normalize();t[4].setComponents(U-M,wa-oa,zb-ab,B-oc).normalize();t[5].setComponents(U+M,wa+oa,zb+ab,B+oc).normalize();return this||q};D.intersectsObject=function(r){var t=r.geometry;null===t.boundingSphere&&t.computeBoundingSphere();PB.copy(t.boundingSphere).applyMatrix4(r.matrixWorld);return this.intersectsSphere(PB)};D.intersectsSprite=function(r){PB.center.set(0,0,0);PB.radius=
.7071067811865476;PB.applyMatrix4(r.matrixWorld);return this.intersectsSphere(PB)};D.intersectsSphere=function(r){var t=(this||q).planes,B=r.center;r=-r.radius;for(var I=0;6>I;I++)if(t[I].distanceToPoint(B)<r)return!1;return!0};D.intersectsBox=function(r){for(var t=(this||q).planes,B=0;6>B;B++){var I=t[B];fP.x=0<I.normal.x?r.max.x:r.min.x;fP.y=0<I.normal.y?r.max.y:r.min.y;fP.z=0<I.normal.z?r.max.z:r.min.z;if(0>I.distanceToPoint(fP))return!1}return!0};D.containsPoint=function(r){for(var t=(this||q).planes,
B=0;6>B;B++)if(0>t[B].distanceToPoint(r))return!1;return!0};D.clone=function(){return(new (this||q).constructor).copy(this||q)};return A}(),MF=function(A){function D(r,t,B,I){void 0===r&&(r=1);void 0===t&&(t=1);void 0===B&&(B=1);void 0===I&&(I=1);var M=A.call(this||q)||this||q;M.type="PlaneGeometry";M.parameters={width:r,height:t,widthSegments:B,heightSegments:I};var U=r/2,Z=t/2;B=Math.floor(B);I=Math.floor(I);var aa=B+1,oa=I+1,wa=r/B,Oa=t/I;t=[];r=[];for(var Ya=[],ab=[],zb=0;zb<oa;zb++)for(var sb=
zb*Oa-Z,nc=0;nc<aa;nc++)r.push(nc*wa-U,-sb,0),Ya.push(0,0,1),ab.push(nc/B),ab.push(1-zb/I);for(U=0;U<I;U++)for(Z=0;Z<B;Z++)oa=Z+aa*(U+1),wa=Z+1+aa*(U+1),Oa=Z+1+aa*U,t.push(Z+aa*U,oa,Oa),t.push(oa,wa,Oa);M.setIndex(t);M.setAttribute("position",new ob(r,3));M.setAttribute("normal",new ob(Ya,3));M.setAttribute("uv",new ob(ab,2));return M}p(D,A);return D}(ya),Hi={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",
aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",
color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",
defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",
displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",
emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",
envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",
envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",
lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",
lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",
lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",
lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",
lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(\t\t0, 1,\t\t0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",
lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",
lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",
logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",
map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",
map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",
morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",
normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",
normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",
clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",
clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",
premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",
shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",
shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",
skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",
skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(\t1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,\t1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,\t1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",
transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",
uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",
background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",
depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",
distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",
distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",
equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",
linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",
meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",
meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",
normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",
points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",
shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},
Lf={common:{diffuse:{value:new Zf(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new cm},uv2Transform:{value:new cm},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},
bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ye(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new Zf(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],
properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],
properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Zf(15658734)},opacity:{value:1},
size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new cm}},sprite:{diffuse:{value:new Zf(15658734)},opacity:{value:1},center:{value:new Ye(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new cm}}},Nq={basic:{uniforms:Yb([Lf.common,Lf.specularmap,Lf.envmap,Lf.aomap,Lf.lightmap,Lf.fog]),vertexShader:Hi.meshbasic_vert,fragmentShader:Hi.meshbasic_frag},lambert:{uniforms:Yb([Lf.common,Lf.specularmap,Lf.envmap,Lf.aomap,Lf.lightmap,
Lf.emissivemap,Lf.fog,Lf.lights,{emissive:{value:new Zf(0)}}]),vertexShader:Hi.meshlambert_vert,fragmentShader:Hi.meshlambert_frag},phong:{uniforms:Yb([Lf.common,Lf.specularmap,Lf.envmap,Lf.aomap,Lf.lightmap,Lf.emissivemap,Lf.bumpmap,Lf.normalmap,Lf.displacementmap,Lf.fog,Lf.lights,{emissive:{value:new Zf(0)},specular:{value:new Zf(1118481)},shininess:{value:30}}]),vertexShader:Hi.meshphong_vert,fragmentShader:Hi.meshphong_frag},standard:{uniforms:Yb([Lf.common,Lf.envmap,Lf.aomap,Lf.lightmap,Lf.emissivemap,
Lf.bumpmap,Lf.normalmap,Lf.displacementmap,Lf.roughnessmap,Lf.metalnessmap,Lf.fog,Lf.lights,{emissive:{value:new Zf(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Hi.meshphysical_vert,fragmentShader:Hi.meshphysical_frag},toon:{uniforms:Yb([Lf.common,Lf.aomap,Lf.lightmap,Lf.emissivemap,Lf.bumpmap,Lf.normalmap,Lf.displacementmap,Lf.gradientmap,Lf.fog,Lf.lights,{emissive:{value:new Zf(0)}}]),vertexShader:Hi.meshtoon_vert,fragmentShader:Hi.meshtoon_frag},matcap:{uniforms:Yb([Lf.common,
Lf.bumpmap,Lf.normalmap,Lf.displacementmap,Lf.fog,{matcap:{value:null}}]),vertexShader:Hi.meshmatcap_vert,fragmentShader:Hi.meshmatcap_frag},points:{uniforms:Yb([Lf.points,Lf.fog]),vertexShader:Hi.points_vert,fragmentShader:Hi.points_frag},dashed:{uniforms:Yb([Lf.common,Lf.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Hi.linedashed_vert,fragmentShader:Hi.linedashed_frag},depth:{uniforms:Yb([Lf.common,Lf.displacementmap]),vertexShader:Hi.depth_vert,fragmentShader:Hi.depth_frag},
normal:{uniforms:Yb([Lf.common,Lf.bumpmap,Lf.normalmap,Lf.displacementmap,{opacity:{value:1}}]),vertexShader:Hi.normal_vert,fragmentShader:Hi.normal_frag},sprite:{uniforms:Yb([Lf.sprite,Lf.fog]),vertexShader:Hi.sprite_vert,fragmentShader:Hi.sprite_frag},background:{uniforms:{uvTransform:{value:new cm},t2D:{value:null}},vertexShader:Hi.background_vert,fragmentShader:Hi.background_frag},cube:{uniforms:Yb([Lf.envmap,{opacity:{value:1}}]),vertexShader:Hi.cube_vert,fragmentShader:Hi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},
vertexShader:Hi.equirect_vert,fragmentShader:Hi.equirect_frag},distanceRGBA:{uniforms:Yb([Lf.common,Lf.displacementmap,{referencePosition:{value:new jc},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:Hi.distanceRGBA_vert,fragmentShader:Hi.distanceRGBA_frag},shadow:{uniforms:Yb([Lf.lights,Lf.fog,{color:{value:new Zf(0)},opacity:{value:1}}]),vertexShader:Hi.shadow_vert,fragmentShader:Hi.shadow_frag}};Nq.physical={uniforms:Yb([Nq.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},
clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ye(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Zf(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Hi.meshphysical_vert,fragmentShader:Hi.meshphysical_frag};var ZY=function(A){function D(r,t,B,I){void 0===r&&(r=null);void 0===t&&(t=1);void 0===B&&(B=1);void 0===I&&(I=1);var M=A.call(this||q,null)||this||q;M.image={data:r,width:t,height:B,depth:I};M.magFilter=1003;M.minFilter=
1003;M.wrapR=1001;M.generateMipmaps=!1;M.flipY=!1;M.needsUpdate=!0;return M}p(D,A);return D}(pn);ZY.prototype.isDataTexture2DArray=!0;var $Y=function(A){function D(r,t,B,I){void 0===r&&(r=null);void 0===t&&(t=1);void 0===B&&(B=1);void 0===I&&(I=1);var M=A.call(this||q,null)||this||q;M.image={data:r,width:t,height:B,depth:I};M.magFilter=1003;M.minFilter=1003;M.wrapR=1001;M.generateMipmaps=!1;M.flipY=!1;M.needsUpdate=!0;return M}p(D,A);return D}(pn);$Y.prototype.isDataTexture3D=!0;var uda=new pn,pya=
new ZY,qya=new $Y,vda=new OB,pda=[],qda=[],tda=new Float32Array(16),sda=new Float32Array(9),rda=new Float32Array(4);BM.prototype.updateCache=function(A){var D=(this||q).cache;A instanceof Float32Array&&D.length!==A.length&&((this||q).cache=new Float32Array(A.length));ri(D,A)};TA.prototype.setValue=function(A,D,r){for(var t=(this||q).seq,B=0,I=t.length;B!==I;++B){var M=t[B];M.setValue(A,D[M.id],r)}};var vY=/(\w+)(\])?(\[|\.)?/g;Or.prototype.setValue=function(A,D,r,t){D=(this||q).map[D];void 0!==D&&
D.setValue(A,r,t)};Or.prototype.setOptional=function(A,D,r){D=D[r];void 0!==D&&this.setValue(A,r,D)};Or.upload=function(A,D,r,t){for(var B=0,I=D.length;B!==I;++B){var M=D[B],U=r[M.id];!1!==U.needsUpdate&&M.setValue(A,U.value,t)}};Or.seqWithValue=function(A,D){for(var r=[],t=0,B=A.length;t!==B;++t){var I=A[t];I.id in D&&r.push(I)}return r};var rya=0,wY=/^[ \t]*#include +<([\w\d./]+)>/gm,xda=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,wda=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g,
sya=0,EO=function(A){function D(r){var t=A.call(this||q)||this||q;t.type="MeshDepthMaterial";t.depthPacking=3200;t.skinning=!1;t.morphTargets=!1;t.map=null;t.alphaMap=null;t.displacementMap=null;t.displacementScale=1;t.displacementBias=0;t.wireframe=!1;t.wireframeLinewidth=1;t.fog=!1;t.setValues(r);return t}p(D,A);D.prototype.copy=function(r){A.prototype.copy.call(this||q,r);(this||q).depthPacking=r.depthPacking;(this||q).skinning=r.skinning;(this||q).morphTargets=r.morphTargets;(this||q).map=r.map;
(this||q).alphaMap=r.alphaMap;(this||q).displacementMap=r.displacementMap;(this||q).displacementScale=r.displacementScale;(this||q).displacementBias=r.displacementBias;(this||q).wireframe=r.wireframe;(this||q).wireframeLinewidth=r.wireframeLinewidth;return this||q};return D}(da);EO.prototype.isMeshDepthMaterial=!0;var FO=function(A){function D(r){var t=A.call(this||q)||this||q;t.type="MeshDistanceMaterial";t.referencePosition=new jc;t.nearDistance=1;t.farDistance=1E3;t.skinning=!1;t.morphTargets=
!1;t.map=null;t.alphaMap=null;t.displacementMap=null;t.displacementScale=1;t.displacementBias=0;t.fog=!1;t.setValues(r);return t}p(D,A);D.prototype.copy=function(r){A.prototype.copy.call(this||q,r);(this||q).referencePosition.copy(r.referencePosition);(this||q).nearDistance=r.nearDistance;(this||q).farDistance=r.farDistance;(this||q).skinning=r.skinning;(this||q).morphTargets=r.morphTargets;(this||q).map=r.map;(this||q).alphaMap=r.alphaMap;(this||q).displacementMap=r.displacementMap;(this||q).displacementScale=
r.displacementScale;(this||q).displacementBias=r.displacementBias;return this||q};return D}(da);FO.prototype.isMeshDistanceMaterial=!0;GO.prototype=Object.assign(Object.create(Nb.prototype),{constructor:GO,isArrayCamera:!0});var py=function(A){function D(){var r=A.call(this||q)||this||q;r.type="Group";return r}p(D,A);return D}(P);py.prototype.isGroup=!0;Object.assign(OF.prototype,{constructor:OF,getHandSpace:function(){null===(this||q)._hand&&((this||q)._hand=new py,(this||q)._hand.matrixAutoUpdate=
!1,(this||q)._hand.visible=!1,(this||q)._hand.joints={},(this||q)._hand.inputState={pinching:!1});return(this||q)._hand},getTargetRaySpace:function(){null===(this||q)._targetRay&&((this||q)._targetRay=new py,(this||q)._targetRay.matrixAutoUpdate=!1,(this||q)._targetRay.visible=!1);return(this||q)._targetRay},getGripSpace:function(){null===(this||q)._grip&&((this||q)._grip=new py,(this||q)._grip.matrixAutoUpdate=!1,(this||q)._grip.visible=!1);return(this||q)._grip},dispatchEvent:function(A){null!==
(this||q)._targetRay&&(this||q)._targetRay.dispatchEvent(A);null!==(this||q)._grip&&(this||q)._grip.dispatchEvent(A);null!==(this||q)._hand&&(this||q)._hand.dispatchEvent(A);return this||q},disconnect:function(A){this.dispatchEvent({type:"disconnected",data:A});null!==(this||q)._targetRay&&((this||q)._targetRay.visible=!1);null!==(this||q)._grip&&((this||q)._grip.visible=!1);null!==(this||q)._hand&&((this||q)._hand.visible=!1);return this||q},update:function(A,D,r){var t=null,B=null,I=null,M=(this||
q)._targetRay,U=(this||q)._grip,Z=(this||q)._hand;if(A&&"visible-blurred"!==D.session.visibilityState)if(Z&&A.hand){I=!0;for(var aa=G(A.hand.values()),oa;!(oa=aa()).done;){var wa=oa.value;oa=D.getJointPose(wa,r);if(void 0===Z.joints[wa.jointName]){var Oa=new py;Oa.matrixAutoUpdate=!1;Oa.visible=!1;Z.joints[wa.jointName]=Oa;Z.add(Oa)}wa=Z.joints[wa.jointName];null!==oa&&(wa.matrix.fromArray(oa.transform.matrix),wa.matrix.decompose(wa.position,wa.rotation,wa.scale),wa.jointRadius=oa.radius);wa.visible=
null!==oa}D=Z.joints["index-finger-tip"].position.distanceTo(Z.joints["thumb-tip"].position);Z.inputState.pinching&&.025<D?(Z.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:A.handedness,target:this||q})):!Z.inputState.pinching&&.015>=D&&(Z.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:A.handedness,target:this||q}))}else null!==M&&(t=D.getPose(A.targetRaySpace,r),null!==t&&(M.matrix.fromArray(t.transform.matrix),M.matrix.decompose(M.position,M.rotation,
M.scale))),null!==U&&A.gripSpace&&(B=D.getPose(A.gripSpace,r),null!==B&&(U.matrix.fromArray(B.transform.matrix),U.matrix.decompose(U.position,U.rotation,U.scale)));null!==M&&(M.visible=null!==t);null!==U&&(U.visible=null!==B);null!==Z&&(Z.visible=null!==I);return this||q}});Object.assign(Bda.prototype,J.prototype);var kea=function(A){function D(){return A.apply(this||q,arguments)||this||q}p(D,A);return D}(lk);kea.prototype.isWebGL1Renderer=!0;var aZ=function(){function A(r,t){(this||q).name="";(this||
q).color=new Zf(r);(this||q).density=void 0!==t?t:2.5E-4}var D=A.prototype;D.clone=function(){return new A((this||q).color,(this||q).density)};D.toJSON=function(){return{type:"FogExp2",color:(this||q).color.getHex(),density:(this||q).density}};return A}();aZ.prototype.isFogExp2=!0;var bZ=function(){function A(r,t,B){(this||q).name="";(this||q).color=new Zf(r);(this||q).near=void 0!==t?t:1;(this||q).far=void 0!==B?B:1E3}var D=A.prototype;D.clone=function(){return new A((this||q).color,(this||q).near,
(this||q).far)};D.toJSON=function(){return{type:"Fog",color:(this||q).color.getHex(),near:(this||q).near,far:(this||q).far}};return A}();bZ.prototype.isFog=!0;var gP=function(A){function D(){var t=A.call(this||q)||this||q;t.type="Scene";t.background=null;t.environment=null;t.fog=null;t.overrideMaterial=null;t.autoUpdate=!0;"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:x(t)}));return t}p(D,A);var r=D.prototype;r.copy=function(t,B){A.prototype.copy.call(this||
q,t,B);null!==t.background&&((this||q).background=t.background.clone());null!==t.environment&&((this||q).environment=t.environment.clone());null!==t.fog&&((this||q).fog=t.fog.clone());null!==t.overrideMaterial&&((this||q).overrideMaterial=t.overrideMaterial.clone());(this||q).autoUpdate=t.autoUpdate;(this||q).matrixAutoUpdate=t.matrixAutoUpdate;return this||q};r.toJSON=function(t){var B=A.prototype.toJSON.call(this||q,t);null!==(this||q).background&&(B.object.background=(this||q).background.toJSON(t));
null!==(this||q).environment&&(B.object.environment=(this||q).environment.toJSON(t));null!==(this||q).fog&&(B.object.fog=(this||q).fog.toJSON());return B};return D}(P);gP.prototype.isScene=!0;Object.defineProperty(mo.prototype,"needsUpdate",{set:function(A){!0===A&&(this||q).version++}});Object.assign(mo.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(A){(this||q).usage=A;return this||q},copy:function(A){(this||q).array=new A.array.constructor(A.array);(this||q).count=
A.count;(this||q).stride=A.stride;(this||q).usage=A.usage;return this||q},copyAt:function(A,D,r){A*=(this||q).stride;r*=D.stride;for(var t=0,B=(this||q).stride;t<B;t++)(this||q).array[A+t]=D.array[r+t];return this||q},set:function(A,D){void 0===D&&(D=0);(this||q).array.set(A,D);return this||q},clone:function(A){void 0===A.arrayBuffers&&(A.arrayBuffers={});void 0===(this||q).array.buffer._uuid&&((this||q).array.buffer._uuid=oh.generateUUID());void 0===A.arrayBuffers[(this||q).array.buffer._uuid]&&
(A.arrayBuffers[(this||q).array.buffer._uuid]=(this||q).array.slice(0).buffer);A=new (this||q).array.constructor(A.arrayBuffers[(this||q).array.buffer._uuid]);A=new mo(A,(this||q).stride);A.setUsage((this||q).usage);return A},onUpload:function(A){(this||q).onUploadCallback=A;return this||q},toJSON:function(A){void 0===A.arrayBuffers&&(A.arrayBuffers={});void 0===(this||q).array.buffer._uuid&&((this||q).array.buffer._uuid=oh.generateUUID());void 0===A.arrayBuffers[(this||q).array.buffer._uuid]&&(A.arrayBuffers[(this||
q).array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array((this||q).array.buffer)));return{uuid:(this||q).uuid,buffer:(this||q).array.buffer._uuid,type:(this||q).array.constructor.name,stride:(this||q).stride}}});var qy=new jc;Object.defineProperties(iv.prototype,{count:{get:function(){return(this||q).data.count}},array:{get:function(){return(this||q).data.array}},needsUpdate:{set:function(A){(this||q).data.needsUpdate=A}}});Object.assign(iv.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(A){for(var D=
0,r=(this||q).data.count;D<r;D++)qy.x=this.getX(D),qy.y=this.getY(D),qy.z=this.getZ(D),qy.applyMatrix4(A),this.setXYZ(D,qy.x,qy.y,qy.z);return this||q},setX:function(A,D){(this||q).data.array[A*(this||q).data.stride+(this||q).offset]=D;return this||q},setY:function(A,D){(this||q).data.array[A*(this||q).data.stride+(this||q).offset+1]=D;return this||q},setZ:function(A,D){(this||q).data.array[A*(this||q).data.stride+(this||q).offset+2]=D;return this||q},setW:function(A,D){(this||q).data.array[A*(this||
q).data.stride+(this||q).offset+3]=D;return this||q},getX:function(A){return(this||q).data.array[A*(this||q).data.stride+(this||q).offset]},getY:function(A){return(this||q).data.array[A*(this||q).data.stride+(this||q).offset+1]},getZ:function(A){return(this||q).data.array[A*(this||q).data.stride+(this||q).offset+2]},getW:function(A){return(this||q).data.array[A*(this||q).data.stride+(this||q).offset+3]},setXY:function(A,D,r){A=A*(this||q).data.stride+(this||q).offset;(this||q).data.array[A+0]=D;(this||
q).data.array[A+1]=r;return this||q},setXYZ:function(A,D,r,t){A=A*(this||q).data.stride+(this||q).offset;(this||q).data.array[A+0]=D;(this||q).data.array[A+1]=r;(this||q).data.array[A+2]=t;return this||q},setXYZW:function(A,D,r,t,B){A=A*(this||q).data.stride+(this||q).offset;(this||q).data.array[A+0]=D;(this||q).data.array[A+1]=r;(this||q).data.array[A+2]=t;(this||q).data.array[A+3]=B;return this||q},clone:function(A){if(void 0===A){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");
A=[];for(var D=0;D<(this||q).count;D++)for(var r=D*(this||q).data.stride+(this||q).offset,t=0;t<(this||q).itemSize;t++)A.push((this||q).data.array[r+t]);return new Ia(new (this||q).array.constructor(A),(this||q).itemSize,(this||q).normalized)}void 0===A.interleavedBuffers&&(A.interleavedBuffers={});void 0===A.interleavedBuffers[(this||q).data.uuid]&&(A.interleavedBuffers[(this||q).data.uuid]=(this||q).data.clone(A));return new iv(A.interleavedBuffers[(this||q).data.uuid],(this||q).itemSize,(this||
q).offset,(this||q).normalized)},toJSON:function(A){if(void 0===A){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");A=[];for(var D=0;D<(this||q).count;D++)for(var r=D*(this||q).data.stride+(this||q).offset,t=0;t<(this||q).itemSize;t++)A.push((this||q).data.array[r+t]);return{itemSize:(this||q).itemSize,type:(this||q).array.constructor.name,array:A,normalized:(this||q).normalized}}void 0===A.interleavedBuffers&&(A.interleavedBuffers=
{});void 0===A.interleavedBuffers[(this||q).data.uuid]&&(A.interleavedBuffers[(this||q).data.uuid]=(this||q).data.toJSON(A));return{isInterleavedBufferAttribute:!0,itemSize:(this||q).itemSize,data:(this||q).data.uuid,offset:(this||q).offset,normalized:(this||q).normalized}}});var hP=function(A){function D(r){var t=A.call(this||q)||this||q;t.type="SpriteMaterial";t.color=new Zf(16777215);t.map=null;t.alphaMap=null;t.rotation=0;t.sizeAttenuation=!0;t.transparent=!0;t.setValues(r);return t}p(D,A);D.prototype.copy=
function(r){A.prototype.copy.call(this||q,r);(this||q).color.copy(r.color);(this||q).map=r.map;(this||q).alphaMap=r.alphaMap;(this||q).rotation=r.rotation;(this||q).sizeAttenuation=r.sizeAttenuation;return this||q};return D}(da);hP.prototype.isSpriteMaterial=!0;var QB,kG=new jc,RB=new jc,SB=new jc,zB=new Ye,SF=new Ye,Gda=new Fg,iP=new jc,lG=new jc,jP=new jc,lea=new Ye,cZ=new Ye,mea=new Ye,kP=function(A){function D(t){var B=A.call(this||q)||this||q;B.type="Sprite";if(void 0===QB){QB=new ya;var I=new Float32Array([-.5,
-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);I=new mo(I,5);QB.setIndex([0,1,2,0,2,3]);QB.setAttribute("position",new iv(I,3,0,!1));QB.setAttribute("uv",new iv(I,2,3,!1))}B.geometry=QB;B.material=void 0!==t?t:new hP;B.center=new Ye(.5,.5);return B}p(D,A);var r=D.prototype;r.raycast=function(t,B){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.');RB.setFromMatrixScale((this||q).matrixWorld);Gda.copy(t.camera.matrixWorld);(this||
q).modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,(this||q).matrixWorld);SB.setFromMatrixPosition((this||q).modelViewMatrix);t.camera.isPerspectiveCamera&&!1===(this||q).material.sizeAttenuation&&RB.multiplyScalar(-SB.z);var I=(this||q).material.rotation;if(0!==I){var M=Math.cos(I);var U=Math.sin(I)}I=(this||q).center;JO(iP.set(-.5,-.5,0),SB,I,RB,U,M);JO(lG.set(.5,-.5,0),SB,I,RB,U,M);JO(jP.set(.5,.5,0),SB,I,RB,U,M);lea.set(0,0);cZ.set(1,0);mea.set(1,1);var Z=t.ray.intersectTriangle(iP,
lG,jP,!1,kG);if(null===Z&&(JO(lG.set(-.5,.5,0),SB,I,RB,U,M),cZ.set(0,1),Z=t.ray.intersectTriangle(iP,jP,lG,!1,kG),null===Z))return;U=t.ray.origin.distanceTo(kG);U<t.near||U>t.far||B.push({distance:U,point:kG.clone(),uv:Ln.getUV(kG,iP,lG,jP,lea,cZ,mea,new Ye),face:null,object:this||q})};r.copy=function(t){A.prototype.copy.call(this||q,t);void 0!==t.center&&(this||q).center.copy(t.center);(this||q).material=t.material;return this||q};return D}(P);kP.prototype.isSprite=!0;var lP=new jc,nea=new jc,dZ=
function(A){function D(){var t=A.call(this||q)||this||q;t._currentLevel=0;t.type="LOD";Object.defineProperties(x(t),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}});t.autoUpdate=!0;return t}p(D,A);var r=D.prototype;r.copy=function(t){A.prototype.copy.call(this||q,t,!1);for(var B=t.levels,I=0,M=B.length;I<M;I++){var U=B[I];this.addLevel(U.object.clone(),U.distance)}(this||q).autoUpdate=t.autoUpdate;return this||q};r.addLevel=function(t,B){void 0===B&&(B=0);B=Math.abs(B);var I=(this||q).levels,M;
for(M=0;M<I.length&&!(B<I[M].distance);M++);I.splice(M,0,{distance:B,object:t});this.add(t);return this||q};r.getCurrentLevel=function(){return(this||q)._currentLevel};r.getObjectForDistance=function(t){var B=(this||q).levels;if(0<B.length){var I;var M=1;for(I=B.length;M<I&&!(t<B[M].distance);M++);return B[M-1].object}return null};r.raycast=function(t,B){if(0<(this||q).levels.length){lP.setFromMatrixPosition((this||q).matrixWorld);var I=t.ray.origin.distanceTo(lP);this.getObjectForDistance(I).raycast(t,
B)}};r.update=function(t){var B=(this||q).levels;if(1<B.length){lP.setFromMatrixPosition(t.matrixWorld);nea.setFromMatrixPosition((this||q).matrixWorld);t=lP.distanceTo(nea)/t.zoom;B[0].object.visible=!0;var I;var M=1;for(I=B.length;M<I;M++)if(t>=B[M].distance)B[M-1].object.visible=!1,B[M].object.visible=!0;else break;for((this||q)._currentLevel=M-1;M<I;M++)B[M].object.visible=!1}};r.toJSON=function(t){t=A.prototype.toJSON.call(this||q,t);!1===(this||q).autoUpdate&&(t.object.autoUpdate=!1);t.object.levels=
[];for(var B=(this||q).levels,I=0,M=B.length;I<M;I++){var U=B[I];t.object.levels.push({object:U.object.uuid,distance:U.distance})}return t};return D}(P),oea=new jc,pea=new Xj,qea=new Xj,Nya=new jc,rea=new Fg;TF.prototype=Object.assign(Object.create(Sa.prototype),{constructor:TF,isSkinnedMesh:!0,copy:function(A){Sa.prototype.copy.call(this||q,A);(this||q).bindMode=A.bindMode;(this||q).bindMatrix.copy(A.bindMatrix);(this||q).bindMatrixInverse.copy(A.bindMatrixInverse);(this||q).skeleton=A.skeleton;
return this||q},bind:function(A,D){(this||q).skeleton=A;void 0===D&&(this.updateMatrixWorld(!0),(this||q).skeleton.calculateInverses(),D=(this||q).matrixWorld);(this||q).bindMatrix.copy(D);(this||q).bindMatrixInverse.copy(D).invert()},pose:function(){(this||q).skeleton.pose()},normalizeSkinWeights:function(){for(var A=new Xj,D=(this||q).geometry.attributes.skinWeight,r=0,t=D.count;r<t;r++){A.x=D.getX(r);A.y=D.getY(r);A.z=D.getZ(r);A.w=D.getW(r);var B=1/A.manhattanLength();Infinity!==B?A.multiplyScalar(B):
A.set(1,0,0,0);D.setXYZW(r,A.x,A.y,A.z,A.w)}},updateMatrixWorld:function(A){Sa.prototype.updateMatrixWorld.call(this||q,A);"attached"===(this||q).bindMode?(this||q).bindMatrixInverse.copy((this||q).matrixWorld).invert():"detached"===(this||q).bindMode?(this||q).bindMatrixInverse.copy((this||q).bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+(this||q).bindMode)},boneTransform:function(A,D){var r=(this||q).skeleton,t=(this||q).geometry;pea.fromBufferAttribute(t.attributes.skinIndex,
A);qea.fromBufferAttribute(t.attributes.skinWeight,A);oea.fromBufferAttribute(t.attributes.position,A).applyMatrix4((this||q).bindMatrix);D.set(0,0,0);for(A=0;4>A;A++)if(t=qea.getComponent(A),0!==t){var B=pea.getComponent(A);rea.multiplyMatrices(r.bones[B].matrixWorld,r.boneInverses[B]);D.addScaledVector(Nya.copy(oea).applyMatrix4(rea),t)}return D.applyMatrix4((this||q).bindMatrixInverse)}});UF.prototype=Object.assign(Object.create(P.prototype),{constructor:UF,isBone:!0});var sea=new Fg,Oya=new Fg,
eZ=function(){function A(r,t){void 0===r&&(r=[]);void 0===t&&(t=[]);(this||q).uuid=oh.generateUUID();(this||q).bones=r.slice(0);(this||q).boneInverses=t;(this||q).boneMatrices=null;(this||q).boneTexture=null;(this||q).boneTextureSize=0;(this||q).frame=-1;this.init()}var D=A.prototype;D.init=function(){var r=(this||q).bones,t=(this||q).boneInverses;(this||q).boneMatrices=new Float32Array(16*r.length);if(0===t.length)this.calculateInverses();else if(r.length!==t.length)for(console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),
(this||q).boneInverses=[],r=0,t=(this||q).bones.length;r<t;r++)(this||q).boneInverses.push(new Fg)};D.calculateInverses=function(){for(var r=(this||q).boneInverses.length=0,t=(this||q).bones.length;r<t;r++){var B=new Fg;(this||q).bones[r]&&B.copy((this||q).bones[r].matrixWorld).invert();(this||q).boneInverses.push(B)}};D.pose=function(){for(var r=0,t=(this||q).bones.length;r<t;r++){var B=(this||q).bones[r];B&&B.matrixWorld.copy((this||q).boneInverses[r]).invert()}r=0;for(t=(this||q).bones.length;r<
t;r++)if(B=(this||q).bones[r])B.parent&&B.parent.isBone?(B.matrix.copy(B.parent.matrixWorld).invert(),B.matrix.multiply(B.matrixWorld)):B.matrix.copy(B.matrixWorld),B.matrix.decompose(B.position,B.quaternion,B.scale)};D.update=function(){for(var r=(this||q).bones,t=(this||q).boneInverses,B=(this||q).boneMatrices,I=(this||q).boneTexture,M=0,U=r.length;M<U;M++)sea.multiplyMatrices(r[M]?r[M].matrixWorld:Oya,t[M]),sea.toArray(B,16*M);null!==I&&(I.needsUpdate=!0)};D.clone=function(){return new A((this||
q).bones,(this||q).boneInverses)};D.getBoneByName=function(r){for(var t=0,B=(this||q).bones.length;t<B;t++){var I=(this||q).bones[t];if(I.name===r)return I}};D.dispose=function(){null!==(this||q).boneTexture&&((this||q).boneTexture.dispose(),(this||q).boneTexture=null)};D.fromJSON=function(r,t){(this||q).uuid=r.uuid;for(var B=0,I=r.bones.length;B<I;B++){var M=r.bones[B],U=t[M];void 0===U&&(console.warn("THREE.Skeleton: No bone found with UUID:",M),U=new UF);(this||q).bones.push(U);(this||q).boneInverses.push((new Fg).fromArray(r.boneInverses[B]))}this.init();
return this||q};D.toJSON=function(){var r={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};r.uuid=(this||q).uuid;for(var t=(this||q).bones,B=(this||q).boneInverses,I=0,M=t.length;I<M;I++)r.bones.push(t[I].uuid),r.boneInverses.push(B[I].toArray());return r};return A}(),tea=new Fg,uea=new Fg,mP=[],mG=new Sa;KO.prototype=Object.assign(Object.create(Sa.prototype),{constructor:KO,isInstancedMesh:!0,copy:function(A){Sa.prototype.copy.call(this||q,A);(this||q).instanceMatrix.copy(A.instanceMatrix);
null!==A.instanceColor&&((this||q).instanceColor=A.instanceColor.clone());(this||q).count=A.count;return this||q},getColorAt:function(A,D){D.fromArray((this||q).instanceColor.array,3*A)},getMatrixAt:function(A,D){D.fromArray((this||q).instanceMatrix.array,16*A)},raycast:function(A,D){var r=(this||q).matrixWorld,t=(this||q).count;mG.geometry=(this||q).geometry;mG.material=(this||q).material;if(void 0!==mG.material)for(var B=0;B<t;B++){this.getMatrixAt(B,tea);uea.multiplyMatrices(r,tea);mG.matrixWorld=
uea;mG.raycast(A,mP);for(var I=0,M=mP.length;I<M;I++){var U=mP[I];U.instanceId=B;U.object=this||q;D.push(U)}mP.length=0}},setColorAt:function(A,D){null===(this||q).instanceColor&&((this||q).instanceColor=new Ia(new Float32Array(3*(this||q).count),3));D.toArray((this||q).instanceColor.array,3*A)},setMatrixAt:function(A,D){D.toArray((this||q).instanceMatrix.array,16*A)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Dm=function(A){function D(r){var t=
A.call(this||q)||this||q;t.type="LineBasicMaterial";t.color=new Zf(16777215);t.linewidth=1;t.linecap="round";t.linejoin="round";t.morphTargets=!1;t.setValues(r);return t}p(D,A);D.prototype.copy=function(r){A.prototype.copy.call(this||q,r);(this||q).color.copy(r.color);(this||q).linewidth=r.linewidth;(this||q).linecap=r.linecap;(this||q).linejoin=r.linejoin;(this||q).morphTargets=r.morphTargets;return this||q};return D}(da);Dm.prototype.isLineBasicMaterial=!0;var vea=new jc,wea=new jc,xea=new Fg,fZ=
new lv,nG=new ov;Tq.prototype=Object.assign(Object.create(P.prototype),{constructor:Tq,isLine:!0,copy:function(A){P.prototype.copy.call(this||q,A);(this||q).material=A.material;(this||q).geometry=A.geometry;return this||q},computeLineDistances:function(){var A=(this||q).geometry;if(A.isBufferGeometry)if(null===A.index){for(var D=A.attributes.position,r=[0],t=1,B=D.count;t<B;t++)vea.fromBufferAttribute(D,t-1),wea.fromBufferAttribute(D,t),r[t]=r[t-1],r[t]+=vea.distanceTo(wea);A.setAttribute("lineDistance",
new ob(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else A.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this||q},raycast:function(A,D){var r=(this||q).geometry,t=(this||q).matrixWorld,B=A.params.Line.threshold;null===r.boundingSphere&&r.computeBoundingSphere();nG.copy(r.boundingSphere);nG.applyMatrix4(t);nG.radius+=B;if(!1!==A.ray.intersectsSphere(nG)){xea.copy(t).invert();
fZ.copy(A.ray).applyMatrix4(xea);t=B/(((this||q).scale.x+(this||q).scale.y+(this||q).scale.z)/3);t*=t;B=new jc;var I=new jc,M=new jc,U=new jc,Z=(this||q).isLineSegments?2:1;if(r.isBufferGeometry){var aa=r.index;r=r.attributes.position;if(null!==aa){aa=aa.array;for(var oa=0,wa=aa.length-1;oa<wa;oa+=Z){var Oa=aa[oa+1];B.fromBufferAttribute(r,aa[oa]);I.fromBufferAttribute(r,Oa);fZ.distanceSqToSegment(B,I,U,M)>t||(U.applyMatrix4((this||q).matrixWorld),Oa=A.ray.origin.distanceTo(U),Oa<A.near||Oa>A.far||
D.push({distance:Oa,point:M.clone().applyMatrix4((this||q).matrixWorld),index:oa,face:null,faceIndex:null,object:this||q}))}}else for(aa=0,oa=r.count-1;aa<oa;aa+=Z)B.fromBufferAttribute(r,aa),I.fromBufferAttribute(r,aa+1),fZ.distanceSqToSegment(B,I,U,M)>t||(U.applyMatrix4((this||q).matrixWorld),wa=A.ray.origin.distanceTo(U),wa<A.near||wa>A.far||D.push({distance:wa,point:M.clone().applyMatrix4((this||q).matrixWorld),index:aa,face:null,faceIndex:null,object:this||q}))}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},
updateMorphTargets:function(){var A=(this||q).geometry;if(A.isBufferGeometry){A=A.morphAttributes;var D=Object.keys(A);if(0<D.length&&(A=A[D[0]],void 0!==A)){(this||q).morphTargetInfluences=[];(this||q).morphTargetDictionary={};D=0;for(var r=A.length;D<r;D++){var t=A[D].name||String(D);(this||q).morphTargetInfluences.push(0);(this||q).morphTargetDictionary[t]=D}}}else A=A.morphTargets,void 0!==A&&0<A.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}});
var yea=new jc,zea=new jc;Nn.prototype=Object.assign(Object.create(Tq.prototype),{constructor:Nn,isLineSegments:!0,computeLineDistances:function(){var A=(this||q).geometry;if(A.isBufferGeometry)if(null===A.index){for(var D=A.attributes.position,r=[],t=0,B=D.count;t<B;t+=2)yea.fromBufferAttribute(D,t),zea.fromBufferAttribute(D,t+1),r[t]=0===t?0:r[t-1],r[t+1]=r[t]+yea.distanceTo(zea);A.setAttribute("lineDistance",new ob(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
else A.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this||q}});var gZ=function(A){function D(r,t){r=A.call(this||q,r,t)||this||q;r.type="LineLoop";return r}p(D,A);return D}(Tq);gZ.prototype.isLineLoop=!0;var ky=function(A){function D(r){var t=A.call(this||q)||this||q;t.type="PointsMaterial";t.color=new Zf(16777215);t.map=null;t.alphaMap=null;t.size=1;t.sizeAttenuation=!0;t.morphTargets=!1;t.setValues(r);
return t}p(D,A);D.prototype.copy=function(r){A.prototype.copy.call(this||q,r);(this||q).color.copy(r.color);(this||q).map=r.map;(this||q).alphaMap=r.alphaMap;(this||q).size=r.size;(this||q).sizeAttenuation=r.sizeAttenuation;(this||q).morphTargets=r.morphTargets;return this||q};return D}(da);ky.prototype.isPointsMaterial=!0;var Aea=new Fg,zY=new lv,oG=new ov,nP=new jc;AB.prototype=Object.assign(Object.create(P.prototype),{constructor:AB,isPoints:!0,copy:function(A){P.prototype.copy.call(this||q,A);
(this||q).material=A.material;(this||q).geometry=A.geometry;return this||q},raycast:function(A,D){var r=(this||q).geometry,t=(this||q).matrixWorld,B=A.params.Points.threshold;null===r.boundingSphere&&r.computeBoundingSphere();oG.copy(r.boundingSphere);oG.applyMatrix4(t);oG.radius+=B;if(!1!==A.ray.intersectsSphere(oG))if(Aea.copy(t).invert(),zY.copy(A.ray).applyMatrix4(Aea),B/=((this||q).scale.x+(this||q).scale.y+(this||q).scale.z)/3,B*=B,r.isBufferGeometry){var I=r.index;r=r.attributes.position;if(null!==
I){I=I.array;for(var M=0,U=I.length;M<U;M++){var Z=I[M];nP.fromBufferAttribute(r,Z);Hda(nP,Z,B,t,A,D,this||q)}}else for(I=0,M=r.count;I<M;I++)nP.fromBufferAttribute(r,I),Hda(nP,I,B,t,A,D,this||q)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){var A=(this||q).geometry;if(A.isBufferGeometry){A=A.morphAttributes;var D=Object.keys(A);if(0<D.length&&(A=A[D[0]],void 0!==A)){(this||q).morphTargetInfluences=
[];(this||q).morphTargetDictionary={};D=0;for(var r=A.length;D<r;D++){var t=A[D].name||String(D);(this||q).morphTargetInfluences.push(0);(this||q).morphTargetDictionary[t]=D}}}else A=A.morphTargets,void 0!==A&&0<A.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}});var Bea=function(A){function D(t,B,I,M,U,Z,aa,oa,wa){function Oa(){Ya.needsUpdate=!0;t.requestVideoFrameCallback(Oa)}B=A.call(this||q,t,B,I,M,U,Z,aa,oa,wa)||this||
q;B.format=void 0!==aa?aa:1022;B.minFilter=void 0!==Z?Z:1006;B.magFilter=void 0!==U?U:1006;B.generateMipmaps=!1;var Ya=x(B);"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(Oa);return B}p(D,A);var r=D.prototype;r.clone=function(){return(new (this||q).constructor((this||q).image)).copy(this||q)};r.update=function(){var t=(this||q).image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&((this||q).needsUpdate=!0)};return D}(pn);Bea.prototype.isVideoTexture=!0;var hZ=
function(A){function D(r,t,B,I,M,U,Z,aa,oa,wa,Oa,Ya){I=A.call(this||q,null,U,Z,aa,oa,wa,I,M,Oa,Ya)||this||q;I.image={width:t,height:B};I.mipmaps=r;I.flipY=!1;I.generateMipmaps=!1;return I}p(D,A);return D}(pn);hZ.prototype.isCompressedTexture=!0;var Cea=function(A){function D(r,t,B,I,M,U,Z,aa,oa){r=A.call(this||q,r,t,B,I,M,U,Z,aa,oa)||this||q;r.needsUpdate=!0;return r}p(D,A);return D}(pn);Cea.prototype.isCanvasTexture=!0;var Dea=function(A){function D(r,t,B,I,M,U,Z,aa,oa,wa){wa=void 0!==wa?wa:1026;
if(1026!==wa&&1027!==wa)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===B&&1026===wa&&(B=1012);void 0===B&&1027===wa&&(B=1020);B=A.call(this||q,null,I,M,U,Z,aa,wa,B,oa)||this||q;B.image={width:r,height:t};B.magFilter=void 0!==Z?Z:1003;B.minFilter=void 0!==aa?aa:1003;B.flipY=!1;B.generateMipmaps=!1;return B}p(D,A);return D}(pn);Dea.prototype.isDepthTexture=!0;var oP=function(A){function D(r,t,B,I){void 0===r&&(r=1);void 0===t&&(t=8);void 0===
B&&(B=0);void 0===I&&(I=2*Math.PI);var M=A.call(this||q)||this||q;M.type="CircleGeometry";M.parameters={radius:r,segments:t,thetaStart:B,thetaLength:I};t=Math.max(3,t);var U=[],Z=[],aa=[],oa=[],wa=new jc,Oa=new Ye;Z.push(0,0,0);aa.push(0,0,1);oa.push(.5,.5);for(var Ya=0,ab=3;Ya<=t;Ya++,ab+=3){var zb=B+Ya/t*I;wa.x=r*Math.cos(zb);wa.y=r*Math.sin(zb);Z.push(wa.x,wa.y,wa.z);aa.push(0,0,1);Oa.x=(Z[ab]/r+1)/2;Oa.y=(Z[ab+1]/r+1)/2;oa.push(Oa.x,Oa.y)}for(r=1;r<=t;r++)U.push(r,r+1,0);M.setIndex(U);M.setAttribute("position",
new ob(Z,3));M.setAttribute("normal",new ob(aa,3));M.setAttribute("uv",new ob(oa,2));return M}p(D,A);return D}(ya),TB=function(A){function D(r,t,B,I,M,U,Z,aa){function oa(rd){for(var jd=nc,Tc=new Ye,Uc=new jc,qd=0,Ld=!0===rd?r:t,Fd=!0===rd?1:-1,ce=1;ce<=I;ce++)ab.push(0,Fc*Fd,0),zb.push(0,Fd,0),sb.push(.5,.5),nc++;ce=nc;for(var rf=0;rf<=I;rf++){var sd=rf/I*aa+Z,zd=Math.cos(sd);sd=Math.sin(sd);Uc.x=Ld*sd;Uc.y=Fc*Fd;Uc.z=Ld*zd;ab.push(Uc.x,Uc.y,Uc.z);zb.push(0,Fd,0);Tc.x=.5*zd+.5;Tc.y=.5*sd*Fd+.5;sb.push(Tc.x,
Tc.y);nc++}for(Tc=0;Tc<I;Tc++)Uc=jd+Tc,Ld=ce+Tc,!0===rd?Ya.push(Ld,Ld+1,Uc):Ya.push(Ld+1,Ld,Uc),qd+=3;Oa.addGroup(Sc,qd,!0===rd?1:2);Sc+=qd}void 0===r&&(r=1);void 0===t&&(t=1);void 0===B&&(B=1);void 0===I&&(I=8);void 0===M&&(M=1);void 0===U&&(U=!1);void 0===Z&&(Z=0);void 0===aa&&(aa=2*Math.PI);var wa=A.call(this||q)||this||q;wa.type="CylinderGeometry";wa.parameters={radiusTop:r,radiusBottom:t,height:B,radialSegments:I,heightSegments:M,openEnded:U,thetaStart:Z,thetaLength:aa};var Oa=x(wa);I=Math.floor(I);
M=Math.floor(M);var Ya=[],ab=[],zb=[],sb=[],nc=0,oc=[],Fc=B/2,Sc=0;(function(){for(var rd=new jc,jd=new jc,Tc=0,Uc=(t-r)/B,qd=0;qd<=M;qd++){for(var Ld=[],Fd=qd/M,ce=Fd*(t-r)+r,rf=0;rf<=I;rf++){var sd=rf/I,zd=sd*aa+Z,Td=Math.sin(zd);zd=Math.cos(zd);jd.x=ce*Td;jd.y=-Fd*B+Fc;jd.z=ce*zd;ab.push(jd.x,jd.y,jd.z);rd.set(Td,Uc,zd).normalize();zb.push(rd.x,rd.y,rd.z);sb.push(sd,1-Fd);Ld.push(nc++)}oc.push(Ld)}for(rd=0;rd<I;rd++)for(jd=0;jd<M;jd++)Uc=oc[jd+1][rd],qd=oc[jd+1][rd+1],Ld=oc[jd][rd+1],Ya.push(oc[jd][rd],
Uc,Ld),Ya.push(Uc,qd,Ld),Tc+=6;Oa.addGroup(Sc,Tc,0);Sc+=Tc})();!1===U&&(0<r&&oa(!0),0<t&&oa(!1));wa.setIndex(Ya);wa.setAttribute("position",new ob(ab,3));wa.setAttribute("normal",new ob(zb,3));wa.setAttribute("uv",new ob(sb,2));return wa}p(D,A);return D}(ya),pP=function(A){function D(r,t,B,I,M,U,Z){void 0===r&&(r=1);void 0===t&&(t=1);void 0===B&&(B=8);void 0===I&&(I=1);void 0===M&&(M=!1);void 0===U&&(U=0);void 0===Z&&(Z=2*Math.PI);var aa=A.call(this||q,0,r,t,B,I,M,U,Z)||this||q;aa.type="ConeGeometry";
aa.parameters={radius:r,height:t,radialSegments:B,heightSegments:I,openEnded:M,thetaStart:U,thetaLength:Z};return aa}p(D,A);return D}(TB),rv=function(A){function D(r,t,B,I){function M(Oa){oa.push(Oa.x,Oa.y,Oa.z)}function U(Oa,Ya){Oa*=3;Ya.x=r[Oa+0];Ya.y=r[Oa+1];Ya.z=r[Oa+2]}function Z(Oa,Ya,ab,zb){0>zb&&1===Oa.x&&(wa[Ya]=Oa.x-1);0===ab.x&&0===ab.z&&(wa[Ya]=zb/2/Math.PI+.5)}void 0===B&&(B=1);void 0===I&&(I=0);var aa=A.call(this||q)||this||q;aa.type="PolyhedronGeometry";aa.parameters={vertices:r,indices:t,
radius:B,detail:I};var oa=[],wa=[];(function(Oa){for(var Ya=new jc,ab=new jc,zb=new jc,sb=0;sb<t.length;sb+=3){U(t[sb+0],Ya);U(t[sb+1],ab);U(t[sb+2],zb);for(var nc=Ya,oc=ab,Fc=zb,Sc=Oa+1,rd=[],jd=0;jd<=Sc;jd++){rd[jd]=[];for(var Tc=nc.clone().lerp(Fc,jd/Sc),Uc=oc.clone().lerp(Fc,jd/Sc),qd=Sc-jd,Ld=0;Ld<=qd;Ld++)rd[jd][Ld]=0===Ld&&jd===Sc?Tc:Tc.clone().lerp(Uc,Ld/qd)}for(nc=0;nc<Sc;nc++)for(oc=0;oc<2*(Sc-nc)-1;oc++)Fc=Math.floor(oc/2),0===oc%2?(M(rd[nc][Fc+1]),M(rd[nc+1][Fc]),M(rd[nc][Fc])):(M(rd[nc][Fc+
1]),M(rd[nc+1][Fc+1]),M(rd[nc+1][Fc]))}})(I);(function(Oa){for(var Ya=new jc,ab=0;ab<oa.length;ab+=3)Ya.x=oa[ab+0],Ya.y=oa[ab+1],Ya.z=oa[ab+2],Ya.normalize().multiplyScalar(Oa),oa[ab+0]=Ya.x,oa[ab+1]=Ya.y,oa[ab+2]=Ya.z})(B);(function(){for(var Oa=new jc,Ya=0;Ya<oa.length;Ya+=3)Oa.x=oa[Ya+0],Oa.y=oa[Ya+1],Oa.z=oa[Ya+2],wa.push(Math.atan2(Oa.z,-Oa.x)/2/Math.PI+.5,1-(Math.atan2(-Oa.y,Math.sqrt(Oa.x*Oa.x+Oa.z*Oa.z))/Math.PI+.5));Oa=new jc;Ya=new jc;for(var ab=new jc,zb=new jc,sb=new Ye,nc=new Ye,oc=new Ye,
Fc=0,Sc=0;Fc<oa.length;Fc+=9,Sc+=6){Oa.set(oa[Fc+0],oa[Fc+1],oa[Fc+2]);Ya.set(oa[Fc+3],oa[Fc+4],oa[Fc+5]);ab.set(oa[Fc+6],oa[Fc+7],oa[Fc+8]);sb.set(wa[Sc+0],wa[Sc+1]);nc.set(wa[Sc+2],wa[Sc+3]);oc.set(wa[Sc+4],wa[Sc+5]);zb.copy(Oa).add(Ya).add(ab).divideScalar(3);var rd=Math.atan2(zb.z,-zb.x);Z(sb,Sc+0,Oa,rd);Z(nc,Sc+2,Ya,rd);Z(oc,Sc+4,ab,rd)}for(Oa=0;Oa<wa.length;Oa+=6)Ya=wa[Oa+0],ab=wa[Oa+2],zb=wa[Oa+4],sb=Math.min(Ya,ab,zb),.9<Math.max(Ya,ab,zb)&&.1>sb&&(.2>Ya&&(wa[Oa+0]+=1),.2>ab&&(wa[Oa+2]+=1),
.2>zb&&(wa[Oa+4]+=1))})();aa.setAttribute("position",new ob(oa,3));aa.setAttribute("normal",new ob(oa.slice(),3));aa.setAttribute("uv",new ob(wa,2));0===I?aa.computeVertexNormals():aa.normalizeNormals();return aa}p(D,A);return D}(ya),qP=function(A){function D(r,t){void 0===r&&(r=1);void 0===t&&(t=0);var B=(1+Math.sqrt(5))/2;var I=1/B;B=A.call(this||q,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-I,-B,0,-I,B,0,I,-B,0,I,B,-I,-B,0,-I,B,0,I,-B,0,I,B,0,-B,0,-I,B,0,-I,-B,0,I,B,0,I],[3,
11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],r,t)||this||q;B.type="DodecahedronGeometry";B.parameters={radius:r,detail:t};return B}p(D,A);return D}(rv),rP=new jc,sP=new jc,iZ=new jc,UB=new Ln,jZ=function(A){function D(r,t){var B=A.call(this||q)||this||q;B.type="EdgesGeometry";B.parameters=
{thresholdAngle:t};t=void 0!==t?t:1;if(!0===r.isGeometry)return console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),x(B);var I=Math.pow(10,4),M=Math.cos(oh.DEG2RAD*t),U=r.getIndex();r=r.getAttribute("position");var Z=U?U.count:r.count,aa=[0,0,0],oa=["a","b","c"],wa=Array(3);t={};for(var Oa=[],Ya=0;Ya<Z;Ya+=3){U?(aa[0]=U.getX(Ya),aa[1]=U.getX(Ya+1),aa[2]=U.getX(Ya+2)):(aa[0]=Ya,aa[1]=Ya+1,aa[2]=Ya+2);var ab=UB.a,zb=UB.b,sb=UB.c;ab.fromBufferAttribute(r,
aa[0]);zb.fromBufferAttribute(r,aa[1]);sb.fromBufferAttribute(r,aa[2]);UB.getNormal(iZ);wa[0]=Math.round(ab.x*I)+","+Math.round(ab.y*I)+","+Math.round(ab.z*I);wa[1]=Math.round(zb.x*I)+","+Math.round(zb.y*I)+","+Math.round(zb.z*I);wa[2]=Math.round(sb.x*I)+","+Math.round(sb.y*I)+","+Math.round(sb.z*I);if(wa[0]!==wa[1]&&wa[1]!==wa[2]&&wa[2]!==wa[0])for(ab=0;3>ab;ab++){zb=(ab+1)%3;var nc=wa[ab],oc=wa[zb];sb=UB[oa[ab]];var Fc=UB[oa[zb]],Sc=nc+"_"+oc;nc=oc+"_"+nc;nc in t&&t[nc]?(iZ.dot(t[nc].normal)<=M&&
(Oa.push(sb.x,sb.y,sb.z),Oa.push(Fc.x,Fc.y,Fc.z)),t[nc]=null):Sc in t||(t[Sc]={index0:aa[ab],index1:aa[zb],normal:iZ.clone()})}}for(var rd in t)t[rd]&&(I=t[rd],M=I.index1,rP.fromBufferAttribute(r,I.index0),sP.fromBufferAttribute(r,M),Oa.push(rP.x,rP.y,rP.z),Oa.push(sP.x,sP.y,sP.z));B.setAttribute("position",new ob(Oa,3));return B}p(D,A);return D}(ya),Pya={triangulate:function(A,D,r){r=r||2;var t=D&&D.length,B=t?D[0]*r:A.length,I=Ida(A,0,B,r,!0),M=[];if(!I||I.next===I.prev)return M;var U;if(t){var Z=
r;t=[];var aa;var oa=0;for(aa=D.length;oa<aa;oa++){var wa=D[oa]*Z;var Oa=oa<aa-1?D[oa+1]*Z:A.length;wa=Ida(A,wa,Oa,Z,!1);wa===wa.next&&(wa.steiner=!0);t.push(Bya(wa))}t.sort(zya);for(oa=0;oa<t.length;oa++){Z=t[oa];D=I;if(D=Aya(Z,D))Z=Lda(D,Z),jv(D,D.next),jv(Z,Z.next);I=jv(I,I.next)}}if(A.length>80*r){var Ya=U=A[0];var ab=t=A[1];for(Z=r;Z<B;Z+=r)oa=A[Z],D=A[Z+1],oa<Ya&&(Ya=oa),D<ab&&(ab=D),oa>U&&(U=oa),D>t&&(t=D);U=Math.max(U-Ya,t-ab);U=0!==U?1/U:0}WF(I,M,r,Ya,ab,U);return M}},vt={area:function(A){for(var D=
A.length,r=0,t=D-1,B=0;B<D;t=B++)r+=A[t].x*A[B].y-A[B].x*A[t].y;return.5*r},isClockWise:function(A){return 0>vt.area(A)},triangulateShape:function(A,D){var r=[],t=[],B=[];Mda(A);Nda(r,A);A=A.length;D.forEach(Mda);for(var I=0;I<D.length;I++)t.push(A),A+=D[I].length,Nda(r,D[I]);D=Pya.triangulate(r,t);for(r=0;r<D.length;r+=3)B.push(D.slice(r,r+3));return B}},wt=function(A){function D(r,t){function B(wa){function Oa(Wg,de,Xg){de||console.error("THREE.ExtrudeGeometry: vec does not exist");return de.clone().multiplyScalar(Xg).add(Wg)}
function Ya(Wg,de,Xg){var Nh=Wg.x-de.x;var Yg=Wg.y-de.y;var Lj=Xg.x-Wg.x;var Mj=Xg.y-Wg.y,lj=Nh*Nh+Yg*Yg;if(Math.abs(Nh*Mj-Yg*Lj)>Number.EPSILON){var Mn=Math.sqrt(lj),Qq=Math.sqrt(Lj*Lj+Mj*Mj);lj=de.x-Yg/Mn;de=de.y+Nh/Mn;Mj=((Xg.x-Mj/Qq-lj)*Mj-(Xg.y+Lj/Qq-de)*Lj)/(Nh*Mj-Yg*Lj);Lj=lj+Nh*Mj-Wg.x;Nh=de+Yg*Mj-Wg.y;Yg=Lj*Lj+Nh*Nh;if(2>=Yg)return new Ye(Lj,Nh);Yg=Math.sqrt(Yg/2)}else Wg=!1,Nh>Number.EPSILON?Lj>Number.EPSILON&&(Wg=!0):Nh<-Number.EPSILON?Lj<-Number.EPSILON&&(Wg=!0):Math.sign(Yg)===Math.sign(Mj)&&
(Wg=!0),Wg?(Lj=-Yg,Yg=Math.sqrt(lj)):(Lj=Nh,Nh=Yg,Yg=Math.sqrt(lj/2));return new Ye(Lj/Yg,Nh/Yg)}function ab(Wg,de){for(var Xg=Wg.length;0<=--Xg;){var Nh=Xg,Yg=Xg-1;0>Yg&&(Yg=Wg.length-1);for(var Lj=0,Mj=rd+2*Fd;Lj<Mj;Lj++){var lj=ad*Lj,Mn=ad*(Lj+1),Qq=de+Yg+lj,PF=de+Yg+Mn;Mn=de+Nh+Mn;nc(de+Nh+lj);nc(Qq);nc(Mn);nc(Qq);nc(PF);nc(Mn);lj=U.length/3;lj=rf.generateSideWallUV(M,U,lj-6,lj-3,lj-2,lj-1);oc(lj[0]);oc(lj[1]);oc(lj[3]);oc(lj[1]);oc(lj[2]);oc(lj[3])}}}function zb(Wg,de,Xg){Fc.push(Wg);Fc.push(de);
Fc.push(Xg)}function sb(Wg,de,Xg){nc(Wg);nc(de);nc(Xg);Wg=U.length/3;Wg=rf.generateTopUV(M,U,Wg-3,Wg-2,Wg-1);oc(Wg[0]);oc(Wg[1]);oc(Wg[2])}function nc(Wg){U.push(Fc[3*Wg]);U.push(Fc[3*Wg+1]);U.push(Fc[3*Wg+2])}function oc(Wg){Z.push(Wg.x);Z.push(Wg.y)}var Fc=[],Sc=void 0!==t.curveSegments?t.curveSegments:12,rd=void 0!==t.steps?t.steps:1,jd=void 0!==t.depth?t.depth:100,Tc=void 0!==t.bevelEnabled?t.bevelEnabled:!0,Uc=void 0!==t.bevelThickness?t.bevelThickness:6,qd=void 0!==t.bevelSize?t.bevelSize:Uc-
2,Ld=void 0!==t.bevelOffset?t.bevelOffset:0,Fd=void 0!==t.bevelSegments?t.bevelSegments:3,ce=t.extrudePath,rf=void 0!==t.UVGenerator?t.UVGenerator:Qya;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),jd=t.amount);var sd=!1;if(ce){var zd=ce.getSpacedPoints(rd);sd=!0;Tc=!1;var Td=ce.computeFrenetFrames(rd,!1);var $f=new jc;var Ne=new jc;var bg=new jc}Tc||(Ld=qd=Uc=Fd=0);wa=wa.extractPoints(Sc);ce=wa.shape;var qh=wa.holes;if(!vt.isClockWise(ce))for(ce=
ce.reverse(),wa=0,Sc=qh.length;wa<Sc;wa++){var mi=qh[wa];vt.isClockWise(mi)&&(qh[wa]=mi.reverse())}var kk=vt.triangulateShape(ce,qh),uc=ce;wa=0;for(Sc=qh.length;wa<Sc;wa++)ce=ce.concat(qh[wa]);var ad=ce.length,Vd=kk.length;wa=[];Sc=0;mi=uc.length;for(var Pc=mi-1,Oe=Sc+1;Sc<mi;Sc++,Pc++,Oe++)Pc===mi&&(Pc=0),Oe===mi&&(Oe=0),wa[Sc]=Ya(uc[Sc],uc[Pc],uc[Oe]);Sc=[];mi=wa.concat();Oe=0;for(var hf=qh.length;Oe<hf;Oe++){var ig=qh[Oe];Pc=[];for(var mf=0,ph=ig.length,uh=ph-1,bi=mf+1;mf<ph;mf++,uh++,bi++)uh===
ph&&(uh=0),bi===ph&&(bi=0),Pc[mf]=Ya(ig[mf],ig[uh],ig[bi]);Sc.push(Pc);mi=mi.concat(Pc)}for(Oe=0;Oe<Fd;Oe++){Pc=Oe/Fd;hf=Uc*Math.cos(Pc*Math.PI/2);ig=qd*Math.sin(Pc*Math.PI/2)+Ld;Pc=0;for(mf=uc.length;Pc<mf;Pc++)ph=Oa(uc[Pc],wa[Pc],ig),zb(ph.x,ph.y,-hf);mf=0;for(ph=qh.length;mf<ph;mf++){uh=qh[mf];Pc=Sc[mf];bi=0;for(var ci=uh.length;bi<ci;bi++){var kj=Oa(uh[bi],Pc[bi],ig);zb(kj.x,kj.y,-hf)}}}Pc=qd+Ld;for(Oe=0;Oe<ad;Oe++)hf=Tc?Oa(ce[Oe],mi[Oe],Pc):ce[Oe],sd?(Ne.copy(Td.normals[0]).multiplyScalar(hf.x),
$f.copy(Td.binormals[0]).multiplyScalar(hf.y),bg.copy(zd[0]).add(Ne).add($f),zb(bg.x,bg.y,bg.z)):zb(hf.x,hf.y,0);for(Oe=1;Oe<=rd;Oe++)for(hf=0;hf<ad;hf++)ig=Tc?Oa(ce[hf],mi[hf],Pc):ce[hf],sd?(Ne.copy(Td.normals[Oe]).multiplyScalar(ig.x),$f.copy(Td.binormals[Oe]).multiplyScalar(ig.y),bg.copy(zd[Oe]).add(Ne).add($f),zb(bg.x,bg.y,bg.z)):zb(ig.x,ig.y,jd/rd*Oe);for(Td=Fd-1;0<=Td;Td--){Ne=Td/Fd;$f=Uc*Math.cos(Ne*Math.PI/2);Ne=qd*Math.sin(Ne*Math.PI/2)+Ld;bg=0;for(ce=uc.length;bg<ce;bg++)mi=Oa(uc[bg],wa[bg],
Ne),zb(mi.x,mi.y,jd+$f);bg=0;for(ce=qh.length;bg<ce;bg++)for(mi=qh[bg],Pc=Sc[bg],Oe=0,hf=mi.length;Oe<hf;Oe++)ig=Oa(mi[Oe],Pc[Oe],Ne),sd?zb(ig.x,ig.y+zd[rd-1].y,zd[rd-1].x+$f):zb(ig.x,ig.y,jd+$f)}(function(){var Wg=U.length/3;if(Tc){for(var de=0*ad,Xg=0;Xg<Vd;Xg++){var Nh=kk[Xg];sb(Nh[2]+de,Nh[1]+de,Nh[0]+de)}de=ad*(rd+2*Fd);for(Xg=0;Xg<Vd;Xg++)Nh=kk[Xg],sb(Nh[0]+de,Nh[1]+de,Nh[2]+de)}else{for(de=0;de<Vd;de++)Xg=kk[de],sb(Xg[2],Xg[1],Xg[0]);for(de=0;de<Vd;de++)Xg=kk[de],sb(Xg[0]+ad*rd,Xg[1]+ad*rd,
Xg[2]+ad*rd)}M.addGroup(Wg,U.length/3-Wg,0)})();(function(){var Wg=U.length/3,de=0;ab(uc,de);de+=uc.length;for(var Xg=0,Nh=qh.length;Xg<Nh;Xg++){var Yg=qh[Xg];ab(Yg,de);de+=Yg.length}M.addGroup(Wg,U.length/3-Wg,1)})()}var I=A.call(this||q)||this||q;I.type="ExtrudeGeometry";I.parameters={shapes:r,options:t};r=Array.isArray(r)?r:[r];for(var M=x(I),U=[],Z=[],aa=0,oa=r.length;aa<oa;aa++)B(r[aa]);I.setAttribute("position",new ob(U,3));I.setAttribute("uv",new ob(Z,2));I.computeVertexNormals();return I}
p(D,A);D.prototype.toJSON=function(){var r=ya.prototype.toJSON.call(this||q),t=(this||q).parameters.shapes,B=(this||q).parameters.options;r.shapes=[];if(Array.isArray(t))for(var I=0,M=t.length;I<M;I++)r.shapes.push(t[I].uuid);else r.shapes.push(t.uuid);void 0!==B.extrudePath&&(r.options.extrudePath=B.extrudePath.toJSON());return r};return D}(ya),Qya={generateTopUV:function(A,D,r,t,B){A=D[3*t];t=D[3*t+1];var I=D[3*B];B=D[3*B+1];return[new Ye(D[3*r],D[3*r+1]),new Ye(A,t),new Ye(I,B)]},generateSideWallUV:function(A,
D,r,t,B,I){A=D[3*r];var M=D[3*r+1];r=D[3*r+2];var U=D[3*t],Z=D[3*t+1];t=D[3*t+2];var aa=D[3*B],oa=D[3*B+1];B=D[3*B+2];var wa=D[3*I],Oa=D[3*I+1];D=D[3*I+2];return.01>Math.abs(M-Z)?[new Ye(A,1-r),new Ye(U,1-t),new Ye(aa,1-B),new Ye(wa,1-D)]:[new Ye(M,1-r),new Ye(Z,1-t),new Ye(oa,1-B),new Ye(Oa,1-D)]}},tP=function(A){function D(r,t){void 0===r&&(r=1);void 0===t&&(t=0);var B=(1+Math.sqrt(5))/2;B=A.call(this||q,[-1,B,0,1,B,0,-1,-B,0,1,-B,0,0,-1,B,0,1,B,0,-1,-B,0,1,-B,B,0,-1,B,0,1,-B,0,-1,-B,0,1],[0,11,
5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],r,t)||this||q;B.type="IcosahedronGeometry";B.parameters={radius:r,detail:t};return B}p(D,A);return D}(rv),uP=function(A){function D(r,t,B,I){void 0===t&&(t=12);void 0===B&&(B=0);void 0===I&&(I=2*Math.PI);var M=A.call(this||q)||this||q;M.type="LatheGeometry";M.parameters={points:r,segments:t,phiStart:B,phiLength:I};t=Math.floor(t);I=oh.clamp(I,0,2*Math.PI);for(var U=[],Z=[],
aa=[],oa=1/t,wa=new jc,Oa=new Ye,Ya=0;Ya<=t;Ya++){var ab=B+Ya*oa*I,zb=Math.sin(ab);ab=Math.cos(ab);for(var sb=0;sb<=r.length-1;sb++)wa.x=r[sb].x*zb,wa.y=r[sb].y,wa.z=r[sb].x*ab,Z.push(wa.x,wa.y,wa.z),Oa.x=Ya/t,Oa.y=sb/(r.length-1),aa.push(Oa.x,Oa.y)}for(B=0;B<t;B++)for(oa=0;oa<r.length-1;oa++)wa=oa+B*r.length,Oa=wa+r.length,Ya=wa+r.length+1,zb=wa+1,U.push(wa,Oa,zb),U.push(Oa,Ya,zb);M.setIndex(U);M.setAttribute("position",new ob(Z,3));M.setAttribute("uv",new ob(aa,2));M.computeVertexNormals();if(I===
2*Math.PI)for(I=M.attributes.normal.array,U=new jc,Z=new jc,aa=new jc,t=t*r.length*3,oa=B=0;B<r.length;B++,oa+=3)U.x=I[oa+0],U.y=I[oa+1],U.z=I[oa+2],Z.x=I[t+oa+0],Z.y=I[t+oa+1],Z.z=I[t+oa+2],aa.addVectors(U,Z).normalize(),I[oa+0]=I[t+oa+0]=aa.x,I[oa+1]=I[t+oa+1]=aa.y,I[oa+2]=I[t+oa+2]=aa.z;return M}p(D,A);return D}(ya),pG=function(A){function D(r,t){void 0===r&&(r=1);void 0===t&&(t=0);var B=A.call(this||q,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],r,
t)||this||q;B.type="OctahedronGeometry";B.parameters={radius:r,detail:t};return B}p(D,A);return D}(rv);ly.prototype=Object.create(ya.prototype);ly.prototype.constructor=ly;var vP=function(A){function D(r,t,B,I,M,U){void 0===r&&(r=.5);void 0===t&&(t=1);void 0===B&&(B=8);void 0===I&&(I=1);void 0===M&&(M=0);void 0===U&&(U=2*Math.PI);var Z=A.call(this||q)||this||q;Z.type="RingGeometry";Z.parameters={innerRadius:r,outerRadius:t,thetaSegments:B,phiSegments:I,thetaStart:M,thetaLength:U};B=Math.max(3,B);
I=Math.max(1,I);var aa=[],oa=[],wa=[],Oa=[],Ya=r;r=(t-r)/I;for(var ab=new jc,zb=new Ye,sb=0;sb<=I;sb++){for(var nc=0;nc<=B;nc++){var oc=M+nc/B*U;ab.x=Ya*Math.cos(oc);ab.y=Ya*Math.sin(oc);oa.push(ab.x,ab.y,ab.z);wa.push(0,0,1);zb.x=(ab.x/t+1)/2;zb.y=(ab.y/t+1)/2;Oa.push(zb.x,zb.y)}Ya+=r}for(t=0;t<I;t++)for(M=t*(B+1),U=0;U<B;U++)Ya=U+M,r=Ya+B+1,ab=Ya+B+2,zb=Ya+1,aa.push(Ya,r,zb),aa.push(r,ab,zb);Z.setIndex(aa);Z.setAttribute("position",new ob(oa,3));Z.setAttribute("normal",new ob(wa,3));Z.setAttribute("uv",
new ob(Oa,2));return Z}p(D,A);return D}(ya),qG=function(A){function D(r,t){function B(Ya){var ab=U.length/3,zb=Ya.extractPoints(t);Ya=zb.shape;var sb=zb.holes;!1===vt.isClockWise(Ya)&&(Ya=Ya.reverse());zb=0;for(var nc=sb.length;zb<nc;zb++){var oc=sb[zb];!0===vt.isClockWise(oc)&&(sb[zb]=oc.reverse())}zb=vt.triangulateShape(Ya,sb);nc=0;for(oc=sb.length;nc<oc;nc++)Ya=Ya.concat(sb[nc]);sb=0;for(nc=Ya.length;sb<nc;sb++)oc=Ya[sb],U.push(oc.x,oc.y,0),Z.push(0,0,1),aa.push(oc.x,oc.y);Ya=0;for(sb=zb.length;Ya<
sb;Ya++)nc=zb[Ya],M.push(nc[0]+ab,nc[1]+ab,nc[2]+ab),wa+=3}void 0===t&&(t=12);var I=A.call(this||q)||this||q;I.type="ShapeGeometry";I.parameters={shapes:r,curveSegments:t};var M=[],U=[],Z=[],aa=[],oa=0,wa=0;if(!1===Array.isArray(r))B(r);else for(var Oa=0;Oa<r.length;Oa++)B(r[Oa]),I.addGroup(oa,wa,Oa),oa+=wa,wa=0;I.setIndex(M);I.setAttribute("position",new ob(U,3));I.setAttribute("normal",new ob(Z,3));I.setAttribute("uv",new ob(aa,2));return I}p(D,A);D.prototype.toJSON=function(){var r=ya.prototype.toJSON.call(this||
q),t=(this||q).parameters.shapes;r.shapes=[];if(Array.isArray(t))for(var B=0,I=t.length;B<I;B++)r.shapes.push(t[B].uuid);else r.shapes.push(t.uuid);return r};return D}(ya),rG=function(A){function D(r,t,B,I,M,U,Z){void 0===r&&(r=1);void 0===t&&(t=8);void 0===B&&(B=6);void 0===I&&(I=0);void 0===M&&(M=2*Math.PI);void 0===U&&(U=0);void 0===Z&&(Z=Math.PI);var aa=A.call(this||q)||this||q;aa.type="SphereGeometry";aa.parameters={radius:r,widthSegments:t,heightSegments:B,phiStart:I,phiLength:M,thetaStart:U,
thetaLength:Z};t=Math.max(3,Math.floor(t));B=Math.max(2,Math.floor(B));for(var oa=Math.min(U+Z,Math.PI),wa=0,Oa=[],Ya=new jc,ab=new jc,zb=[],sb=[],nc=[],oc=[],Fc=0;Fc<=B;Fc++){var Sc=[],rd=Fc/B,jd=0;0==Fc&&0==U?jd=.5/t:Fc==B&&oa==Math.PI&&(jd=-.5/t);for(var Tc=0;Tc<=t;Tc++){var Uc=Tc/t;Ya.x=-r*Math.cos(I+Uc*M)*Math.sin(U+rd*Z);Ya.y=r*Math.cos(U+rd*Z);Ya.z=r*Math.sin(I+Uc*M)*Math.sin(U+rd*Z);sb.push(Ya.x,Ya.y,Ya.z);ab.copy(Ya).normalize();nc.push(ab.x,ab.y,ab.z);oc.push(Uc+jd,1-rd);Sc.push(wa++)}Oa.push(Sc)}for(r=
0;r<B;r++)for(I=0;I<t;I++)M=Oa[r][I+1],Z=Oa[r][I],wa=Oa[r+1][I],Ya=Oa[r+1][I+1],(0!==r||0<U)&&zb.push(M,Z,Ya),(r!==B-1||oa<Math.PI)&&zb.push(Z,wa,Ya);aa.setIndex(zb);aa.setAttribute("position",new ob(sb,3));aa.setAttribute("normal",new ob(nc,3));aa.setAttribute("uv",new ob(oc,2));return aa}p(D,A);return D}(ya),wP=function(A){function D(r,t){void 0===r&&(r=1);void 0===t&&(t=0);var B=A.call(this||q,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],r,t)||this||q;B.type="TetrahedronGeometry";
B.parameters={radius:r,detail:t};return B}p(D,A);return D}(rv),xP=function(A){function D(r,t){void 0===t&&(t={});var B=t.font;if(!B||!B.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ya;r=B.generateShapes(r,t.size);t.depth=void 0!==t.height?t.height:50;void 0===t.bevelThickness&&(t.bevelThickness=10);void 0===t.bevelSize&&(t.bevelSize=8);void 0===t.bevelEnabled&&(t.bevelEnabled=!1);t=A.call(this||q,r,t)||this||q;t.type="TextGeometry";return t}
p(D,A);return D}(wt),yP=function(A){function D(r,t,B,I,M){void 0===r&&(r=1);void 0===t&&(t=.4);void 0===B&&(B=8);void 0===I&&(I=6);void 0===M&&(M=2*Math.PI);var U=A.call(this||q)||this||q;U.type="TorusGeometry";U.parameters={radius:r,tube:t,radialSegments:B,tubularSegments:I,arc:M};B=Math.floor(B);I=Math.floor(I);for(var Z=[],aa=[],oa=[],wa=[],Oa=new jc,Ya=new jc,ab=new jc,zb=0;zb<=B;zb++)for(var sb=0;sb<=I;sb++){var nc=sb/I*M,oc=zb/B*Math.PI*2;Ya.x=(r+t*Math.cos(oc))*Math.cos(nc);Ya.y=(r+t*Math.cos(oc))*
Math.sin(nc);Ya.z=t*Math.sin(oc);aa.push(Ya.x,Ya.y,Ya.z);Oa.x=r*Math.cos(nc);Oa.y=r*Math.sin(nc);ab.subVectors(Ya,Oa).normalize();oa.push(ab.x,ab.y,ab.z);wa.push(sb/I);wa.push(zb/B)}for(r=1;r<=B;r++)for(t=1;t<=I;t++)M=(I+1)*(r-1)+t-1,Oa=(I+1)*(r-1)+t,Ya=(I+1)*r+t,Z.push((I+1)*r+t-1,M,Ya),Z.push(M,Oa,Ya);U.setIndex(Z);U.setAttribute("position",new ob(aa,3));U.setAttribute("normal",new ob(oa,3));U.setAttribute("uv",new ob(wa,2));return U}p(D,A);return D}(ya),zP=function(A){function D(r,t,B,I,M,U){function Z(qd,
Ld,Fd,ce,rf){var sd=Math.sin(qd);Ld=Fd/Ld*qd;Fd=Math.cos(Ld);rf.x=ce*(2+Fd)*.5*Math.cos(qd);rf.y=ce*(2+Fd)*sd*.5;rf.z=ce*Math.sin(Ld)*.5}void 0===r&&(r=1);void 0===t&&(t=.4);void 0===B&&(B=64);void 0===I&&(I=8);void 0===M&&(M=2);void 0===U&&(U=3);var aa=A.call(this||q)||this||q;aa.type="TorusKnotGeometry";aa.parameters={radius:r,tube:t,tubularSegments:B,radialSegments:I,p:M,q:U};B=Math.floor(B);I=Math.floor(I);for(var oa=[],wa=[],Oa=[],Ya=[],ab=new jc,zb=new jc,sb=new jc,nc=new jc,oc=new jc,Fc=new jc,
Sc=new jc,rd=0;rd<=B;++rd){var jd=rd/B*M*Math.PI*2;Z(jd,M,U,r,sb);Z(jd+.01,M,U,r,nc);Fc.subVectors(nc,sb);Sc.addVectors(nc,sb);oc.crossVectors(Fc,Sc);Sc.crossVectors(oc,Fc);oc.normalize();Sc.normalize();for(jd=0;jd<=I;++jd){var Tc=jd/I*Math.PI*2,Uc=-t*Math.cos(Tc);Tc=t*Math.sin(Tc);ab.x=sb.x+(Uc*Sc.x+Tc*oc.x);ab.y=sb.y+(Uc*Sc.y+Tc*oc.y);ab.z=sb.z+(Uc*Sc.z+Tc*oc.z);wa.push(ab.x,ab.y,ab.z);zb.subVectors(ab,sb).normalize();Oa.push(zb.x,zb.y,zb.z);Ya.push(rd/B);Ya.push(jd/I)}}for(r=1;r<=B;r++)for(t=1;t<=
I;t++)M=(I+1)*r+(t-1),U=(I+1)*r+t,ab=(I+1)*(r-1)+t,oa.push((I+1)*(r-1)+(t-1),M,ab),oa.push(M,U,ab);aa.setIndex(oa);aa.setAttribute("position",new ob(wa,3));aa.setAttribute("normal",new ob(Oa,3));aa.setAttribute("uv",new ob(Ya,2));return aa}p(D,A);return D}(ya),AP=function(A){function D(r,t,B,I,M){function U(oc){Ya=r.getPointAt(oc/t,Ya);var Fc=aa.normals[oc];oc=aa.binormals[oc];for(var Sc=0;Sc<=I;Sc++){var rd=Sc/I*Math.PI*2,jd=Math.sin(rd);rd=-Math.cos(rd);wa.x=rd*Fc.x+jd*oc.x;wa.y=rd*Fc.y+jd*oc.y;
wa.z=rd*Fc.z+jd*oc.z;wa.normalize();zb.push(wa.x,wa.y,wa.z);oa.x=Ya.x+B*wa.x;oa.y=Ya.y+B*wa.y;oa.z=Ya.z+B*wa.z;ab.push(oa.x,oa.y,oa.z)}}void 0===t&&(t=64);void 0===B&&(B=1);void 0===I&&(I=8);void 0===M&&(M=!1);var Z=A.call(this||q)||this||q;Z.type="TubeGeometry";Z.parameters={path:r,tubularSegments:t,radius:B,radialSegments:I,closed:M};var aa=r.computeFrenetFrames(t,M);Z.tangents=aa.tangents;Z.normals=aa.normals;Z.binormals=aa.binormals;var oa=new jc,wa=new jc,Oa=new Ye,Ya=new jc,ab=[],zb=[],sb=[],
nc=[];(function(){for(var oc=0;oc<t;oc++)U(oc);U(!1===M?t:0);for(oc=0;oc<=t;oc++)for(var Fc=0;Fc<=I;Fc++)Oa.x=oc/t,Oa.y=Fc/I,sb.push(Oa.x,Oa.y);for(oc=1;oc<=t;oc++)for(Fc=1;Fc<=I;Fc++){var Sc=(I+1)*oc+(Fc-1),rd=(I+1)*oc+Fc,jd=(I+1)*(oc-1)+Fc;nc.push((I+1)*(oc-1)+(Fc-1),Sc,jd);nc.push(Sc,rd,jd)}})();Z.setIndex(nc);Z.setAttribute("position",new ob(ab,3));Z.setAttribute("normal",new ob(zb,3));Z.setAttribute("uv",new ob(sb,2));return Z}p(D,A);D.prototype.toJSON=function(){var r=ya.prototype.toJSON.call(this||
q);r.path=(this||q).parameters.path.toJSON();return r};return D}(ya),kZ=function(A){function D(r){var t=A.call(this||q)||this||q;t.type="WireframeGeometry";if(!0===r.isGeometry)return console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),x(t);var B=[],I=[0,0],M={},U=new jc;if(null!==r.index){var Z=r.attributes.position,aa=r.index;r=r.groups;0===r.length&&(r=[{start:0,count:aa.count,materialIndex:0}]);for(var oa=0,wa=r.length;oa<wa;++oa){var Oa=
r[oa],Ya=Oa.start,ab=Ya;for(Oa=Ya+Oa.count;ab<Oa;ab+=3)for(Ya=0;3>Ya;Ya++){var zb=aa.getX(ab+Ya),sb=aa.getX(ab+(Ya+1)%3);I[0]=Math.min(zb,sb);I[1]=Math.max(zb,sb);zb=I[0]+","+I[1];void 0===M[zb]&&(M[zb]={index1:I[0],index2:I[1]})}}for(var nc in M)I=M[nc],U.fromBufferAttribute(Z,I.index1),B.push(U.x,U.y,U.z),U.fromBufferAttribute(Z,I.index2),B.push(U.x,U.y,U.z)}else for(M=r.attributes.position,Z=0,nc=M.count/3;Z<nc;Z++)for(I=0;3>I;I++)U.fromBufferAttribute(M,3*Z+I),B.push(U.x,U.y,U.z),U.fromBufferAttribute(M,
3*Z+(I+1)%3),B.push(U.x,U.y,U.z);t.setAttribute("position",new ob(B,3));return t}p(D,A);return D}(ya),Qn=Object.freeze({__proto__:null,BoxGeometry:iy,BoxBufferGeometry:iy,CircleGeometry:oP,CircleBufferGeometry:oP,ConeGeometry:pP,ConeBufferGeometry:pP,CylinderGeometry:TB,CylinderBufferGeometry:TB,DodecahedronGeometry:qP,DodecahedronBufferGeometry:qP,EdgesGeometry:jZ,ExtrudeGeometry:wt,ExtrudeBufferGeometry:wt,IcosahedronGeometry:tP,IcosahedronBufferGeometry:tP,LatheGeometry:uP,LatheBufferGeometry:uP,
OctahedronGeometry:pG,OctahedronBufferGeometry:pG,ParametricGeometry:ly,ParametricBufferGeometry:ly,PlaneGeometry:MF,PlaneBufferGeometry:MF,PolyhedronGeometry:rv,PolyhedronBufferGeometry:rv,RingGeometry:vP,RingBufferGeometry:vP,ShapeGeometry:qG,ShapeBufferGeometry:qG,SphereGeometry:rG,SphereBufferGeometry:rG,TetrahedronGeometry:wP,TetrahedronBufferGeometry:wP,TextGeometry:xP,TextBufferGeometry:xP,TorusGeometry:yP,TorusBufferGeometry:yP,TorusKnotGeometry:zP,TorusKnotBufferGeometry:zP,TubeGeometry:AP,
TubeBufferGeometry:AP,WireframeGeometry:kZ}),lZ=function(A){function D(r){var t=A.call(this||q)||this||q;t.type="ShadowMaterial";t.color=new Zf(0);t.transparent=!0;t.setValues(r);return t}p(D,A);D.prototype.copy=function(r){A.prototype.copy.call(this||q,r);(this||q).color.copy(r.color);return this||q};return D}(da);lZ.prototype.isShadowMaterial=!0;var DB=function(A){function D(r){r=A.call(this||q,r)||this||q;r.type="RawShaderMaterial";return r}p(D,A);return D}(fc);DB.prototype.isRawShaderMaterial=
!0;ds.prototype=Object.create(da.prototype);ds.prototype.constructor=ds;ds.prototype.isMeshStandardMaterial=!0;ds.prototype.copy=function(A){da.prototype.copy.call(this||q,A);(this||q).defines={STANDARD:""};(this||q).color.copy(A.color);(this||q).roughness=A.roughness;(this||q).metalness=A.metalness;(this||q).map=A.map;(this||q).lightMap=A.lightMap;(this||q).lightMapIntensity=A.lightMapIntensity;(this||q).aoMap=A.aoMap;(this||q).aoMapIntensity=A.aoMapIntensity;(this||q).emissive.copy(A.emissive);
(this||q).emissiveMap=A.emissiveMap;(this||q).emissiveIntensity=A.emissiveIntensity;(this||q).bumpMap=A.bumpMap;(this||q).bumpScale=A.bumpScale;(this||q).normalMap=A.normalMap;(this||q).normalMapType=A.normalMapType;(this||q).normalScale.copy(A.normalScale);(this||q).displacementMap=A.displacementMap;(this||q).displacementScale=A.displacementScale;(this||q).displacementBias=A.displacementBias;(this||q).roughnessMap=A.roughnessMap;(this||q).metalnessMap=A.metalnessMap;(this||q).alphaMap=A.alphaMap;
(this||q).envMap=A.envMap;(this||q).envMapIntensity=A.envMapIntensity;(this||q).refractionRatio=A.refractionRatio;(this||q).wireframe=A.wireframe;(this||q).wireframeLinewidth=A.wireframeLinewidth;(this||q).wireframeLinecap=A.wireframeLinecap;(this||q).wireframeLinejoin=A.wireframeLinejoin;(this||q).skinning=A.skinning;(this||q).morphTargets=A.morphTargets;(this||q).morphNormals=A.morphNormals;(this||q).flatShading=A.flatShading;(this||q).vertexTangents=A.vertexTangents;return this||q};kv.prototype=
Object.create(ds.prototype);kv.prototype.constructor=kv;kv.prototype.isMeshPhysicalMaterial=!0;kv.prototype.copy=function(A){ds.prototype.copy.call(this||q,A);(this||q).defines={STANDARD:"",PHYSICAL:""};(this||q).clearcoat=A.clearcoat;(this||q).clearcoatMap=A.clearcoatMap;(this||q).clearcoatRoughness=A.clearcoatRoughness;(this||q).clearcoatRoughnessMap=A.clearcoatRoughnessMap;(this||q).clearcoatNormalMap=A.clearcoatNormalMap;(this||q).clearcoatNormalScale.copy(A.clearcoatNormalScale);(this||q).reflectivity=
A.reflectivity;(this||q).sheen=A.sheen?((this||q).sheen||new Zf).copy(A.sheen):null;(this||q).transmission=A.transmission;(this||q).transmissionMap=A.transmissionMap;return this||q};var BP=function(A){function D(r){var t=A.call(this||q)||this||q;t.type="MeshPhongMaterial";t.color=new Zf(16777215);t.specular=new Zf(1118481);t.shininess=30;t.map=null;t.lightMap=null;t.lightMapIntensity=1;t.aoMap=null;t.aoMapIntensity=1;t.emissive=new Zf(0);t.emissiveIntensity=1;t.emissiveMap=null;t.bumpMap=null;t.bumpScale=
1;t.normalMap=null;t.normalMapType=0;t.normalScale=new Ye(1,1);t.displacementMap=null;t.displacementScale=1;t.displacementBias=0;t.specularMap=null;t.alphaMap=null;t.envMap=null;t.combine=0;t.reflectivity=1;t.refractionRatio=.98;t.wireframe=!1;t.wireframeLinewidth=1;t.wireframeLinecap="round";t.wireframeLinejoin="round";t.skinning=!1;t.morphTargets=!1;t.morphNormals=!1;t.flatShading=!1;t.setValues(r);return t}p(D,A);D.prototype.copy=function(r){A.prototype.copy.call(this||q,r);(this||q).color.copy(r.color);
(this||q).specular.copy(r.specular);(this||q).shininess=r.shininess;(this||q).map=r.map;(this||q).lightMap=r.lightMap;(this||q).lightMapIntensity=r.lightMapIntensity;(this||q).aoMap=r.aoMap;(this||q).aoMapIntensity=r.aoMapIntensity;(this||q).emissive.copy(r.emissive);(this||q).emissiveMap=r.emissiveMap;(this||q).emissiveIntensity=r.emissiveIntensity;(this||q).bumpMap=r.bumpMap;(this||q).bumpScale=r.bumpScale;(this||q).normalMap=r.normalMap;(this||q).normalMapType=r.normalMapType;(this||q).normalScale.copy(r.normalScale);
(this||q).displacementMap=r.displacementMap;(this||q).displacementScale=r.displacementScale;(this||q).displacementBias=r.displacementBias;(this||q).specularMap=r.specularMap;(this||q).alphaMap=r.alphaMap;(this||q).envMap=r.envMap;(this||q).combine=r.combine;(this||q).reflectivity=r.reflectivity;(this||q).refractionRatio=r.refractionRatio;(this||q).wireframe=r.wireframe;(this||q).wireframeLinewidth=r.wireframeLinewidth;(this||q).wireframeLinecap=r.wireframeLinecap;(this||q).wireframeLinejoin=r.wireframeLinejoin;
(this||q).skinning=r.skinning;(this||q).morphTargets=r.morphTargets;(this||q).morphNormals=r.morphNormals;(this||q).flatShading=r.flatShading;return this||q};return D}(da);BP.prototype.isMeshPhongMaterial=!0;var mZ=function(A){function D(r){var t=A.call(this||q)||this||q;t.defines={TOON:""};t.type="MeshToonMaterial";t.color=new Zf(16777215);t.map=null;t.gradientMap=null;t.lightMap=null;t.lightMapIntensity=1;t.aoMap=null;t.aoMapIntensity=1;t.emissive=new Zf(0);t.emissiveIntensity=1;t.emissiveMap=null;
t.bumpMap=null;t.bumpScale=1;t.normalMap=null;t.normalMapType=0;t.normalScale=new Ye(1,1);t.displacementMap=null;t.displacementScale=1;t.displacementBias=0;t.alphaMap=null;t.wireframe=!1;t.wireframeLinewidth=1;t.wireframeLinecap="round";t.wireframeLinejoin="round";t.skinning=!1;t.morphTargets=!1;t.morphNormals=!1;t.setValues(r);return t}p(D,A);D.prototype.copy=function(r){A.prototype.copy.call(this||q,r);(this||q).color.copy(r.color);(this||q).map=r.map;(this||q).gradientMap=r.gradientMap;(this||
q).lightMap=r.lightMap;(this||q).lightMapIntensity=r.lightMapIntensity;(this||q).aoMap=r.aoMap;(this||q).aoMapIntensity=r.aoMapIntensity;(this||q).emissive.copy(r.emissive);(this||q).emissiveMap=r.emissiveMap;(this||q).emissiveIntensity=r.emissiveIntensity;(this||q).bumpMap=r.bumpMap;(this||q).bumpScale=r.bumpScale;(this||q).normalMap=r.normalMap;(this||q).normalMapType=r.normalMapType;(this||q).normalScale.copy(r.normalScale);(this||q).displacementMap=r.displacementMap;(this||q).displacementScale=
r.displacementScale;(this||q).displacementBias=r.displacementBias;(this||q).alphaMap=r.alphaMap;(this||q).wireframe=r.wireframe;(this||q).wireframeLinewidth=r.wireframeLinewidth;(this||q).wireframeLinecap=r.wireframeLinecap;(this||q).wireframeLinejoin=r.wireframeLinejoin;(this||q).skinning=r.skinning;(this||q).morphTargets=r.morphTargets;(this||q).morphNormals=r.morphNormals;return this||q};return D}(da);mZ.prototype.isMeshToonMaterial=!0;var nZ=function(A){function D(r){var t=A.call(this||q)||this||
q;t.type="MeshNormalMaterial";t.bumpMap=null;t.bumpScale=1;t.normalMap=null;t.normalMapType=0;t.normalScale=new Ye(1,1);t.displacementMap=null;t.displacementScale=1;t.displacementBias=0;t.wireframe=!1;t.wireframeLinewidth=1;t.fog=!1;t.skinning=!1;t.morphTargets=!1;t.morphNormals=!1;t.flatShading=!1;t.setValues(r);return t}p(D,A);D.prototype.copy=function(r){A.prototype.copy.call(this||q,r);(this||q).bumpMap=r.bumpMap;(this||q).bumpScale=r.bumpScale;(this||q).normalMap=r.normalMap;(this||q).normalMapType=
r.normalMapType;(this||q).normalScale.copy(r.normalScale);(this||q).displacementMap=r.displacementMap;(this||q).displacementScale=r.displacementScale;(this||q).displacementBias=r.displacementBias;(this||q).wireframe=r.wireframe;(this||q).wireframeLinewidth=r.wireframeLinewidth;(this||q).skinning=r.skinning;(this||q).morphTargets=r.morphTargets;(this||q).morphNormals=r.morphNormals;(this||q).flatShading=r.flatShading;return this||q};return D}(da);nZ.prototype.isMeshNormalMaterial=!0;var oZ=function(A){function D(r){var t=
A.call(this||q)||this||q;t.type="MeshLambertMaterial";t.color=new Zf(16777215);t.map=null;t.lightMap=null;t.lightMapIntensity=1;t.aoMap=null;t.aoMapIntensity=1;t.emissive=new Zf(0);t.emissiveIntensity=1;t.emissiveMap=null;t.specularMap=null;t.alphaMap=null;t.envMap=null;t.combine=0;t.reflectivity=1;t.refractionRatio=.98;t.wireframe=!1;t.wireframeLinewidth=1;t.wireframeLinecap="round";t.wireframeLinejoin="round";t.skinning=!1;t.morphTargets=!1;t.morphNormals=!1;t.setValues(r);return t}p(D,A);D.prototype.copy=
function(r){A.prototype.copy.call(this||q,r);(this||q).color.copy(r.color);(this||q).map=r.map;(this||q).lightMap=r.lightMap;(this||q).lightMapIntensity=r.lightMapIntensity;(this||q).aoMap=r.aoMap;(this||q).aoMapIntensity=r.aoMapIntensity;(this||q).emissive.copy(r.emissive);(this||q).emissiveMap=r.emissiveMap;(this||q).emissiveIntensity=r.emissiveIntensity;(this||q).specularMap=r.specularMap;(this||q).alphaMap=r.alphaMap;(this||q).envMap=r.envMap;(this||q).combine=r.combine;(this||q).reflectivity=
r.reflectivity;(this||q).refractionRatio=r.refractionRatio;(this||q).wireframe=r.wireframe;(this||q).wireframeLinewidth=r.wireframeLinewidth;(this||q).wireframeLinecap=r.wireframeLinecap;(this||q).wireframeLinejoin=r.wireframeLinejoin;(this||q).skinning=r.skinning;(this||q).morphTargets=r.morphTargets;(this||q).morphNormals=r.morphNormals;return this||q};return D}(da);oZ.prototype.isMeshLambertMaterial=!0;var pZ=function(A){function D(r){var t=A.call(this||q)||this||q;t.defines={MATCAP:""};t.type=
"MeshMatcapMaterial";t.color=new Zf(16777215);t.matcap=null;t.map=null;t.bumpMap=null;t.bumpScale=1;t.normalMap=null;t.normalMapType=0;t.normalScale=new Ye(1,1);t.displacementMap=null;t.displacementScale=1;t.displacementBias=0;t.alphaMap=null;t.skinning=!1;t.morphTargets=!1;t.morphNormals=!1;t.flatShading=!1;t.setValues(r);return t}p(D,A);D.prototype.copy=function(r){A.prototype.copy.call(this||q,r);(this||q).defines={MATCAP:""};(this||q).color.copy(r.color);(this||q).matcap=r.matcap;(this||q).map=
r.map;(this||q).bumpMap=r.bumpMap;(this||q).bumpScale=r.bumpScale;(this||q).normalMap=r.normalMap;(this||q).normalMapType=r.normalMapType;(this||q).normalScale.copy(r.normalScale);(this||q).displacementMap=r.displacementMap;(this||q).displacementScale=r.displacementScale;(this||q).displacementBias=r.displacementBias;(this||q).alphaMap=r.alphaMap;(this||q).skinning=r.skinning;(this||q).morphTargets=r.morphTargets;(this||q).morphNormals=r.morphNormals;(this||q).flatShading=r.flatShading;return this||
q};return D}(da);pZ.prototype.isMeshMatcapMaterial=!0;var qZ=function(A){function D(r){var t=A.call(this||q)||this||q;t.type="LineDashedMaterial";t.scale=1;t.dashSize=3;t.gapSize=1;t.setValues(r);return t}p(D,A);D.prototype.copy=function(r){A.prototype.copy.call(this||q,r);(this||q).scale=r.scale;(this||q).dashSize=r.dashSize;(this||q).gapSize=r.gapSize;return this||q};return D}(Dm);qZ.prototype.isLineDashedMaterial=!0;var Rya=Object.freeze({__proto__:null,ShadowMaterial:lZ,SpriteMaterial:hP,RawShaderMaterial:DB,
ShaderMaterial:fc,PointsMaterial:ky,MeshPhysicalMaterial:kv,MeshStandardMaterial:ds,MeshPhongMaterial:BP,MeshToonMaterial:mZ,MeshNormalMaterial:nZ,MeshLambertMaterial:oZ,MeshDepthMaterial:EO,MeshDistanceMaterial:FO,MeshBasicMaterial:ot,MeshMatcapMaterial:pZ,LineDashedMaterial:qZ,LineBasicMaterial:Dm,Material:da}),Jk={arraySlice:function(A,D,r){return Jk.isTypedArray(A)?new A.constructor(A.subarray(D,void 0!==r?r:A.length)):A.slice(D,r)},convertArray:function(A,D,r){return!A||!r&&A.constructor===D?
A:"number"===typeof D.BYTES_PER_ELEMENT?new D(A):Array.prototype.slice.call(A)},isTypedArray:function(A){return ArrayBuffer.isView(A)&&!(A instanceof DataView)},getKeyframeOrder:function(A){for(var D=A.length,r=Array(D),t=0;t!==D;++t)r[t]=t;r.sort(function(B,I){return A[B]-A[I]});return r},sortedArray:function(A,D,r){for(var t=A.length,B=new A.constructor(t),I=0,M=0;M!==t;++I)for(var U=r[I]*D,Z=0;Z!==D;++Z)B[M++]=A[U+Z];return B},flattenJSON:function(A,D,r,t){for(var B=1,I=A[0];void 0!==I&&void 0===
I[t];)I=A[B++];if(void 0!==I){var M=I[t];if(void 0!==M)if(Array.isArray(M)){do M=I[t],void 0!==M&&(D.push(I.time),r.push.apply(r,M)),I=A[B++];while(void 0!==I)}else if(void 0!==M.toArray){do M=I[t],void 0!==M&&(D.push(I.time),M.toArray(r,r.length)),I=A[B++];while(void 0!==I)}else{do M=I[t],void 0!==M&&(D.push(I.time),r.push(M)),I=A[B++];while(void 0!==I)}}},subclip:function(A,D,r,t,B){void 0===B&&(B=30);A=A.clone();A.name=D;D=[];for(var I=0;I<A.tracks.length;++I){for(var M=A.tracks[I],U=M.getValueSize(),
Z=[],aa=[],oa=0;oa<M.times.length;++oa){var wa=M.times[oa]*B;if(!(wa<r||wa>=t))for(Z.push(M.times[oa]),wa=0;wa<U;++wa)aa.push(M.values[oa*U+wa])}0!==Z.length&&(M.times=Jk.convertArray(Z,M.times.constructor),M.values=Jk.convertArray(aa,M.values.constructor),D.push(M))}A.tracks=D;r=Infinity;for(t=0;t<A.tracks.length;++t)r>A.tracks[t].times[0]&&(r=A.tracks[t].times[0]);for(t=0;t<A.tracks.length;++t)A.tracks[t].shift(-1*r);A.resetDuration();return A},makeClipAdditive:function(A,D,r,t){void 0===D&&(D=
0);void 0===r&&(r=A);void 0===t&&(t=30);0>=t&&(t=30);var B=r.tracks.length,I=D/t;D=function(M){var U=r.tracks[M],Z=U.ValueTypeName;if("bool"===Z||"string"===Z)return"continue";M=A.tracks.find(function(nc){return nc.name===U.name&&nc.ValueTypeName===Z});if(void 0===M)return"continue";var aa=0,oa=U.getValueSize();U.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(aa=oa/3);var wa=0,Oa=M.getValueSize();M.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(wa=Oa/3);var Ya=U.times.length-
1,ab=void 0;I<=U.times[0]?ab=Jk.arraySlice(U.values,aa,oa-aa):I>=U.times[Ya]?(ab=Ya*oa+aa,ab=Jk.arraySlice(U.values,ab,ab+oa-aa)):(ab=U.createInterpolant(),Ya=aa,aa=oa-aa,ab.evaluate(I),ab=Jk.arraySlice(ab.resultBuffer,Ya,aa));"quaternion"===Z&&(new Cm).fromArray(ab).normalize().conjugate().toArray(ab);aa=M.times.length;for(oa=0;oa<aa;++oa)if(Ya=oa*Oa+wa,"quaternion"===Z)Cm.multiplyQuaternionsFlat(M.values,Ya,ab,0,M.values,Ya);else for(var zb=Oa-2*wa,sb=0;sb<zb;++sb)M.values[Ya+sb]-=ab[sb]};for(t=
0;t<B;++t)D(t);A.blendMode=2501;return A}};Object.assign(Vo.prototype,{evaluate:function(A){var D=(this||q).parameterPositions,r=(this||q)._cachedIndex,t=D[r],B=D[r-1];a:{b:{c:{d:if(!(A<t)){for(var I=r+2;;){if(void 0===t){if(A<B)break d;r=D.length;(this||q)._cachedIndex=r;return this.afterEnd_(r-1,A,B)}if(r===I)break;B=t;t=D[++r];if(A<t)break b}t=D.length;break c}if(A>=B)break a;else{I=D[1];A<I&&(r=2,B=I);for(I=r-2;;){if(void 0===B)return(this||q)._cachedIndex=0,this.beforeStart_(0,A,t);if(r===I)break;
t=B;B=D[--r-1];if(A>=B)break b}t=r;r=0}}for(;r<t;)B=r+t>>>1,A<D[B]?t=B:r=B+1;t=D[r];B=D[r-1];if(void 0===B)return(this||q)._cachedIndex=0,this.beforeStart_(0,A,t);if(void 0===t)return r=D.length,(this||q)._cachedIndex=r,this.afterEnd_(r-1,B,A)}(this||q)._cachedIndex=r;this.intervalChanged_(r,B,t)}return this.interpolate_(r,B,A,t)},settings:null,DefaultSettings_:{},getSettings_:function(){return(this||q).settings||(this||q).DefaultSettings_},copySampleValue_:function(A){var D=(this||q).resultBuffer,
r=(this||q).sampleValues,t=(this||q).valueSize;A*=t;for(var B=0;B!==t;++B)D[B]=r[A+B];return D},interpolate_:function(){throw Error("call to abstract method");},intervalChanged_:function(){}});Object.assign(Vo.prototype,{beforeStart_:Vo.prototype.copySampleValue_,afterEnd_:Vo.prototype.copySampleValue_});OO.prototype=Object.assign(Object.create(Vo.prototype),{constructor:OO,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(A,D,r){var t=(this||q).parameterPositions,B=A-2,
I=A+1,M=t[B],U=t[I];if(void 0===M)switch(this.getSettings_().endingStart){case 2401:B=A;M=2*D-r;break;case 2402:B=t.length-2;M=D+t[B]-t[B+1];break;default:B=A,M=r}if(void 0===U)switch(this.getSettings_().endingEnd){case 2401:I=A;U=2*r-D;break;case 2402:I=1;U=r+t[1]-t[0];break;default:I=A-1,U=D}A=.5*(r-D);t=(this||q).valueSize;(this||q)._weightPrev=A/(D-M);(this||q)._weightNext=A/(U-r);(this||q)._offsetPrev=B*t;(this||q)._offsetNext=I*t},interpolate_:function(A,D,r,t){var B=(this||q).resultBuffer,
I=(this||q).sampleValues,M=(this||q).valueSize;A*=M;var U=A-M,Z=(this||q)._offsetPrev,aa=(this||q)._offsetNext,oa=(this||q)._weightPrev,wa=(this||q)._weightNext,Oa=(r-D)/(t-D);r=Oa*Oa;t=r*Oa;D=-oa*t+2*oa*r-oa*Oa;oa=(1+oa)*t+(-1.5-2*oa)*r+(-.5+oa)*Oa+1;Oa=(-1-wa)*t+(1.5+wa)*r+.5*Oa;wa=wa*t-wa*r;for(r=0;r!==M;++r)B[r]=D*I[Z+r]+oa*I[U+r]+Oa*I[A+r]+wa*I[aa+r];return B}});YF.prototype=Object.assign(Object.create(Vo.prototype),{constructor:YF,interpolate_:function(A,D,r,t){var B=(this||q).resultBuffer,
I=(this||q).sampleValues,M=(this||q).valueSize;A*=M;var U=A-M;D=(r-D)/(t-D);r=1-D;for(t=0;t!==M;++t)B[t]=I[U+t]*r+I[A+t]*D;return B}});PO.prototype=Object.assign(Object.create(Vo.prototype),{constructor:PO,interpolate_:function(A){return this.copySampleValue_(A-1)}});var Vq=function(){function A(r,t,B,I){if(void 0===r)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+r);(this||q).name=r;(this||q).times=
Jk.convertArray(t,(this||q).TimeBufferType);(this||q).values=Jk.convertArray(B,(this||q).ValueBufferType);this.setInterpolation(I||(this||q).DefaultInterpolation)}A.toJSON=function(r){var t=r.constructor;if(t.toJSON!==(this||q).toJSON)t=t.toJSON(r);else{t={name:r.name,times:Jk.convertArray(r.times,Array),values:Jk.convertArray(r.values,Array)};var B=r.getInterpolation();B!==r.DefaultInterpolation&&(t.interpolation=B)}t.type=r.ValueTypeName;return t};var D=A.prototype;D.InterpolantFactoryMethodDiscrete=
function(r){return new PO((this||q).times,(this||q).values,this.getValueSize(),r)};D.InterpolantFactoryMethodLinear=function(r){return new YF((this||q).times,(this||q).values,this.getValueSize(),r)};D.InterpolantFactoryMethodSmooth=function(r){return new OO((this||q).times,(this||q).values,this.getValueSize(),r)};D.setInterpolation=function(r){switch(r){case 2300:var t=(this||q).InterpolantFactoryMethodDiscrete;break;case 2301:t=(this||q).InterpolantFactoryMethodLinear;break;case 2302:t=(this||q).InterpolantFactoryMethodSmooth}if(void 0===
t){t="unsupported interpolation for "+(this||q).ValueTypeName+" keyframe track named "+(this||q).name;if(void 0===(this||q).createInterpolant)if(r!==(this||q).DefaultInterpolation)this.setInterpolation((this||q).DefaultInterpolation);else throw Error(t);console.warn("THREE.KeyframeTrack:",t);return this||q}(this||q).createInterpolant=t;return this||q};D.getInterpolation=function(){switch((this||q).createInterpolant){case (this||q).InterpolantFactoryMethodDiscrete:return 2300;case (this||q).InterpolantFactoryMethodLinear:return 2301;
case (this||q).InterpolantFactoryMethodSmooth:return 2302}};D.getValueSize=function(){return(this||q).values.length/(this||q).times.length};D.shift=function(r){if(0!==r)for(var t=(this||q).times,B=0,I=t.length;B!==I;++B)t[B]+=r;return this||q};D.scale=function(r){if(1!==r)for(var t=(this||q).times,B=0,I=t.length;B!==I;++B)t[B]*=r;return this||q};D.trim=function(r,t){for(var B=(this||q).times,I=B.length,M=0,U=I-1;M!==I&&B[M]<r;)++M;for(;-1!==U&&B[U]>t;)--U;++U;if(0!==M||U!==I)M>=U&&(U=Math.max(U,1),
M=U-1),r=this.getValueSize(),(this||q).times=Jk.arraySlice(B,M,U),(this||q).values=Jk.arraySlice((this||q).values,M*r,U*r);return this||q};D.validate=function(){var r=!0,t=this.getValueSize();0!==t-Math.floor(t)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this||q),r=!1);var B=(this||q).times;t=(this||q).values;var I=B.length;0===I&&(console.error("THREE.KeyframeTrack: Track is empty.",this||q),r=!1);for(var M=null,U=0;U!==I;U++){var Z=B[U];if("number"===typeof Z&&isNaN(Z)){console.error("THREE.KeyframeTrack: Time is not a valid number.",
this||q,U,Z);r=!1;break}if(null!==M&&M>Z){console.error("THREE.KeyframeTrack: Out of order keys.",this||q,U,Z,M);r=!1;break}M=Z}if(void 0!==t&&Jk.isTypedArray(t))for(B=0,I=t.length;B!==I;++B)if(M=t[B],isNaN(M)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this||q,B,M);r=!1;break}return r};D.optimize=function(){for(var r=Jk.arraySlice((this||q).times),t=Jk.arraySlice((this||q).values),B=this.getValueSize(),I=2302===this.getInterpolation(),M=r.length-1,U=1,Z=1;Z<M;++Z){var aa=!1,
oa=r[Z];if(oa!==r[Z+1]&&(1!==Z||oa!==r[0]))if(I)aa=!0;else{oa=Z*B;for(var wa=oa-B,Oa=oa+B,Ya=0;Ya!==B;++Ya){var ab=t[oa+Ya];if(ab!==t[wa+Ya]||ab!==t[Oa+Ya]){aa=!0;break}}}if(aa){if(Z!==U)for(r[U]=r[Z],aa=Z*B,oa=U*B,wa=0;wa!==B;++wa)t[oa+wa]=t[aa+wa];++U}}if(0<M){r[U]=r[M];I=M*B;M=U*B;for(Z=0;Z!==B;++Z)t[M+Z]=t[I+Z];++U}U!==r.length?((this||q).times=Jk.arraySlice(r,0,U),(this||q).values=Jk.arraySlice(t,0,U*B)):((this||q).times=r,(this||q).values=t);return this||q};D.clone=function(){var r=Jk.arraySlice((this||
q).times,0),t=Jk.arraySlice((this||q).values,0);r=new (this||q).constructor((this||q).name,r,t);r.createInterpolant=(this||q).createInterpolant;return r};return A}();Vq.prototype.TimeBufferType=Float32Array;Vq.prototype.ValueBufferType=Float32Array;Vq.prototype.DefaultInterpolation=2301;var my=function(A){function D(){return A.apply(this||q,arguments)||this||q}p(D,A);return D}(Vq);my.prototype.ValueTypeName="bool";my.prototype.ValueBufferType=Array;my.prototype.DefaultInterpolation=2300;my.prototype.InterpolantFactoryMethodLinear=
void 0;my.prototype.InterpolantFactoryMethodSmooth=void 0;var CY=function(A){function D(){return A.apply(this||q,arguments)||this||q}p(D,A);return D}(Vq);CY.prototype.ValueTypeName="color";var ZF=function(A){function D(){return A.apply(this||q,arguments)||this||q}p(D,A);return D}(Vq);ZF.prototype.ValueTypeName="number";QO.prototype=Object.assign(Object.create(Vo.prototype),{constructor:QO,interpolate_:function(A,D,r,t){var B=(this||q).resultBuffer,I=(this||q).sampleValues,M=(this||q).valueSize;D=
(r-D)/(t-D);A*=M;for(r=A+M;A!==r;A+=4)Cm.slerpFlat(B,0,I,A-M,I,A,D);return B}});var CB=function(A){function D(){return A.apply(this||q,arguments)||this||q}p(D,A);D.prototype.InterpolantFactoryMethodLinear=function(r){return new QO((this||q).times,(this||q).values,this.getValueSize(),r)};return D}(Vq);CB.prototype.ValueTypeName="quaternion";CB.prototype.DefaultInterpolation=2301;CB.prototype.InterpolantFactoryMethodSmooth=void 0;var ny=function(A){function D(){return A.apply(this||q,arguments)||this||
q}p(D,A);return D}(Vq);ny.prototype.ValueTypeName="string";ny.prototype.ValueBufferType=Array;ny.prototype.DefaultInterpolation=2300;ny.prototype.InterpolantFactoryMethodLinear=void 0;ny.prototype.InterpolantFactoryMethodSmooth=void 0;var $F=function(A){function D(){return A.apply(this||q,arguments)||this||q}p(D,A);return D}(Vq);$F.prototype.ValueTypeName="vector";var sG=function(){function A(r,t,B,I){void 0===t&&(t=-1);void 0===I&&(I=2500);(this||q).name=r;(this||q).tracks=B;(this||q).duration=t;
(this||q).blendMode=I;(this||q).uuid=oh.generateUUID();0>(this||q).duration&&this.resetDuration()}A.parse=function(r){for(var t=[],B=r.tracks,I=1/(r.fps||1),M=0,U=B.length;M!==U;++M)t.push(Dya(B[M]).scale(I));t=new (this||q)(r.name,r.duration,t,r.blendMode);t.uuid=r.uuid;return t};A.toJSON=function(r){var t=[],B=r.tracks;r={name:r.name,duration:r.duration,tracks:t,uuid:r.uuid,blendMode:r.blendMode};for(var I=0,M=B.length;I!==M;++I)t.push(Vq.toJSON(B[I]));return r};A.CreateFromMorphTargetSequence=
function(r,t,B,I){for(var M=t.length,U=[],Z=0;Z<M;Z++){var aa=[],oa=[];aa.push((Z+M-1)%M,Z,(Z+1)%M);oa.push(0,1,0);var wa=Jk.getKeyframeOrder(aa);aa=Jk.sortedArray(aa,1,wa);oa=Jk.sortedArray(oa,1,wa);I||0!==aa[0]||(aa.push(M),oa.push(oa[0]));U.push((new ZF(".morphTargetInfluences["+t[Z].name+"]",aa,oa)).scale(1/B))}return new (this||q)(r,-1,U)};A.findByName=function(r,t){var B=r;Array.isArray(r)||(B=r.geometry&&r.geometry.animations||r.animations);for(r=0;r<B.length;r++)if(B[r].name===t)return B[r];
return null};A.CreateClipsFromMorphTargetSequences=function(r,t,B){for(var I={},M=/^([\w-]*?)([\d]+)$/,U=0,Z=r.length;U<Z;U++){var aa=r[U],oa=aa.name.match(M);if(oa&&1<oa.length){oa=oa[1];var wa=I[oa];wa||(I[oa]=wa=[]);wa.push(aa)}}r=[];for(var Oa in I)r.push(this.CreateFromMorphTargetSequence(Oa,I[Oa],t,B));return r};A.parseAnimation=function(r,t){if(!r)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var B=function(oc,Fc,Sc,rd,jd){if(0!==Sc.length){var Tc=[],Uc=
[];Jk.flattenJSON(Sc,Tc,Uc,rd);0!==Tc.length&&jd.push(new oc(Fc,Tc,Uc))}},I=[],M=r.name||"default",U=r.fps||30,Z=r.blendMode,aa=r.length||-1;r=r.hierarchy||[];for(var oa=0;oa<r.length;oa++){var wa=r[oa].keys;if(wa&&0!==wa.length)if(wa[0].morphTargets){aa={};var Oa=void 0;for(Oa=0;Oa<wa.length;Oa++)if(wa[Oa].morphTargets)for(var Ya=0;Ya<wa[Oa].morphTargets.length;Ya++)aa[wa[Oa].morphTargets[Ya]]=-1;for(var ab in aa){Ya=[];for(var zb=[],sb=0;sb!==wa[Oa].morphTargets.length;++sb){var nc=wa[Oa];Ya.push(nc.time);
zb.push(nc.morphTarget===ab?1:0)}I.push(new ZF(".morphTargetInfluence["+ab+"]",Ya,zb))}aa=aa.length*(U||1)}else Oa=".bones["+t[oa].name+"]",B($F,Oa+".position",wa,"pos",I),B(CB,Oa+".quaternion",wa,"rot",I),B($F,Oa+".scale",wa,"scl",I)}return 0===I.length?null:new (this||q)(M,aa,I,Z)};var D=A.prototype;D.resetDuration=function(){for(var r=0,t=0,B=(this||q).tracks.length;t!==B;++t){var I=(this||q).tracks[t];r=Math.max(r,I.times[I.times.length-1])}(this||q).duration=r;return this||q};D.trim=function(){for(var r=
0;r<(this||q).tracks.length;r++)(this||q).tracks[r].trim(0,(this||q).duration);return this||q};D.validate=function(){for(var r=!0,t=0;t<(this||q).tracks.length;t++)r=r&&(this||q).tracks[t].validate();return r};D.optimize=function(){for(var r=0;r<(this||q).tracks.length;r++)(this||q).tracks[r].optimize();return this||q};D.clone=function(){for(var r=[],t=0;t<(this||q).tracks.length;t++)r.push((this||q).tracks[t].clone());return new (this||q).constructor((this||q).name,(this||q).duration,r,(this||q).blendMode)};
D.toJSON=function(){return(this||q).constructor.toJSON(this||q)};return A}(),ry={enabled:!1,files:{},add:function(A,D){!1!==(this||q).enabled&&((this||q).files[A]=D)},get:function(A){if(!1!==(this||q).enabled)return(this||q).files[A]},remove:function(A){delete (this||q).files[A]},clear:function(){(this||q).files={}}},Oda=new DY;Object.assign(il.prototype,{load:function(){},loadAsync:function(A,D){var r=this||q;return new Promise(function(t,B){r.load(A,t,D,B)})},parse:function(){},setCrossOrigin:function(A){(this||
q).crossOrigin=A;return this||q},setWithCredentials:function(A){(this||q).withCredentials=A;return this||q},setPath:function(A){(this||q).path=A;return this||q},setResourcePath:function(A){(this||q).resourcePath=A;return this||q},setRequestHeader:function(A){(this||q).requestHeader=A;return this||q}});var Wq={};Pp.prototype=Object.assign(Object.create(il.prototype),{constructor:Pp,load:function(A,D,r,t){void 0===A&&(A="");void 0!==(this||q).path&&(A=(this||q).path+A);A=(this||q).manager.resolveURL(A);
var B=this||q,I=ry.get(A);if(void 0!==I)return B.manager.itemStart(A),setTimeout(function(){D&&D(I);B.manager.itemEnd(A)},0),I;if(void 0!==Wq[A])Wq[A].push({onLoad:D,onProgress:r,onError:t});else{var M=A.match(/^data:(.*?)(;base64)?,(.*)$/);if(M){r=M[1];var U=!!M[2];M=M[3];M=decodeURIComponent(M);U&&(M=atob(M));try{var Z=((this||q).responseType||"").toLowerCase();switch(Z){case "arraybuffer":case "blob":var aa=new Uint8Array(M.length);for(U=0;U<M.length;U++)aa[U]=M.charCodeAt(U);var oa="blob"===Z?
new Blob([aa.buffer],{type:r}):aa.buffer;break;case "document":oa=(new DOMParser).parseFromString(M,r);break;case "json":oa=JSON.parse(M);break;default:oa=M}setTimeout(function(){D&&D(oa);B.manager.itemEnd(A)},0)}catch(Oa){setTimeout(function(){t&&t(Oa);B.manager.itemError(A);B.manager.itemEnd(A)},0)}}else{Wq[A]=[];Wq[A].push({onLoad:D,onProgress:r,onError:t});var wa=new XMLHttpRequest;wa.open("GET",A,!0);wa.addEventListener("load",function(Oa){var Ya=(this||q).response,ab=Wq[A];delete Wq[A];if(200===
(this||q).status||0===(this||q).status){0===(this||q).status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");ry.add(A,Ya);Oa=0;for(var zb=ab.length;Oa<zb;Oa++){var sb=ab[Oa];if(sb.onLoad)sb.onLoad(Ya)}}else{Ya=0;for(zb=ab.length;Ya<zb;Ya++)if(sb=ab[Ya],sb.onError)sb.onError(Oa);B.manager.itemError(A)}B.manager.itemEnd(A)},!1);wa.addEventListener("progress",function(Oa){for(var Ya=Wq[A],ab=0,zb=Ya.length;ab<zb;ab++){var sb=Ya[ab];if(sb.onProgress)sb.onProgress(Oa)}},!1);wa.addEventListener("error",
function(Oa){var Ya=Wq[A];delete Wq[A];for(var ab=0,zb=Ya.length;ab<zb;ab++){var sb=Ya[ab];if(sb.onError)sb.onError(Oa)}B.manager.itemError(A);B.manager.itemEnd(A)},!1);wa.addEventListener("abort",function(Oa){var Ya=Wq[A];delete Wq[A];for(var ab=0,zb=Ya.length;ab<zb;ab++){var sb=Ya[ab];if(sb.onError)sb.onError(Oa)}B.manager.itemError(A);B.manager.itemEnd(A)},!1);void 0!==(this||q).responseType&&(wa.responseType=(this||q).responseType);void 0!==(this||q).withCredentials&&(wa.withCredentials=(this||
q).withCredentials);wa.overrideMimeType&&wa.overrideMimeType(void 0!==(this||q).mimeType?(this||q).mimeType:"text/plain");for(U in(this||q).requestHeader)wa.setRequestHeader(U,(this||q).requestHeader[U]);wa.send(null)}B.manager.itemStart(A);return wa}},setResponseType:function(A){(this||q).responseType=A;return this||q},setMimeType:function(A){(this||q).mimeType=A;return this||q}});var Sya=function(A){function D(t){return A.call(this||q,t)||this||q}p(D,A);var r=D.prototype;r.load=function(t,B,I,M){var U=
this||q,Z=new Pp((this||q).manager);Z.setPath((this||q).path);Z.setRequestHeader((this||q).requestHeader);Z.setWithCredentials((this||q).withCredentials);Z.load(t,function(aa){try{B(U.parse(JSON.parse(aa)))}catch(oa){M?M(oa):console.error(oa),U.manager.itemError(t)}},I,M)};r.parse=function(t){for(var B=[],I=0;I<t.length;I++){var M=sG.parse(t[I]);B.push(M)}return B};return D}(il);EY.prototype=Object.assign(Object.create(il.prototype),{constructor:EY,load:function(A,D,r,t){function B(Oa){Z.load(A[Oa],
function(Ya){Ya=I.parse(Ya,!0);M[Oa]={width:Ya.width,height:Ya.height,format:Ya.format,mipmaps:Ya.mipmaps};aa+=1;6===aa&&(1===Ya.mipmapCount&&(U.minFilter=1006),U.image=M,U.format=Ya.format,U.needsUpdate=!0,D&&D(U))},r,t)}var I=this||q,M=[],U=new hZ,Z=new Pp((this||q).manager);Z.setPath((this||q).path);Z.setResponseType("arraybuffer");Z.setRequestHeader((this||q).requestHeader);Z.setWithCredentials(I.withCredentials);var aa=0;if(Array.isArray(A))for(var oa=0,wa=A.length;oa<wa;++oa)B(oa);else Z.load(A,
function(Oa){Oa=I.parse(Oa,!0);if(Oa.isCubemap){for(var Ya=Oa.mipmaps.length/Oa.mipmapCount,ab=0;ab<Ya;ab++){M[ab]={mipmaps:[]};for(var zb=0;zb<Oa.mipmapCount;zb++)M[ab].mipmaps.push(Oa.mipmaps[ab*Oa.mipmapCount+zb]),M[ab].format=Oa.format,M[ab].width=Oa.width,M[ab].height=Oa.height}U.image=M}else U.image.width=Oa.width,U.image.height=Oa.height,U.mipmaps=Oa.mipmaps;1===Oa.mipmapCount&&(U.minFilter=1006);U.format=Oa.format;U.needsUpdate=!0;D&&D(U)},r,t);return U}});var CP=function(A){function D(r){return A.call(this||
q,r)||this||q}p(D,A);D.prototype.load=function(r,t,B,I){function M(){oa.removeEventListener("load",M,!1);oa.removeEventListener("error",U,!1);ry.add(r,this||q);t&&t(this||q);Z.manager.itemEnd(r)}function U(wa){oa.removeEventListener("load",M,!1);oa.removeEventListener("error",U,!1);I&&I(wa);Z.manager.itemError(r);Z.manager.itemEnd(r)}void 0!==(this||q).path&&(r=(this||q).path+r);r=(this||q).manager.resolveURL(r);var Z=this||q,aa=ry.get(r);if(void 0!==aa)return Z.manager.itemStart(r),setTimeout(function(){t&&
t(aa);Z.manager.itemEnd(r)},0),aa;var oa=document.createElementNS("http://www.w3.org/1999/xhtml","img");oa.addEventListener("load",M,!1);oa.addEventListener("error",U,!1);"data:"!==r.substr(0,5)&&void 0!==(this||q).crossOrigin&&(oa.crossOrigin=(this||q).crossOrigin);Z.manager.itemStart(r);oa.src=r;return oa};return D}(il),Eea=function(A){function D(r){return A.call(this||q,r)||this||q}p(D,A);D.prototype.load=function(r,t,B,I){function M(oa){Z.load(r[oa],function(wa){U.images[oa]=wa;aa++;6===aa&&(U.needsUpdate=
!0,t&&t(U))},void 0,I)}var U=new OB,Z=new CP((this||q).manager);Z.setCrossOrigin((this||q).crossOrigin);Z.setPath((this||q).path);var aa=0;for(B=0;B<r.length;++B)M(B);return U};return D}(il);RO.prototype=Object.assign(Object.create(il.prototype),{constructor:RO,load:function(A,D,r,t){var B=this||q,I=new yB,M=new Pp((this||q).manager);M.setResponseType("arraybuffer");M.setRequestHeader((this||q).requestHeader);M.setPath((this||q).path);M.setWithCredentials(B.withCredentials);M.load(A,function(U){if(U=
B.parse(U))void 0!==U.image?I.image=U.image:void 0!==U.data&&(I.image.width=U.width,I.image.height=U.height,I.image.data=U.data),I.wrapS=void 0!==U.wrapS?U.wrapS:1001,I.wrapT=void 0!==U.wrapT?U.wrapT:1001,I.magFilter=void 0!==U.magFilter?U.magFilter:1006,I.minFilter=void 0!==U.minFilter?U.minFilter:1006,I.anisotropy=void 0!==U.anisotropy?U.anisotropy:1,void 0!==U.encoding&&(I.encoding=U.encoding),void 0!==U.flipY&&(I.flipY=U.flipY),void 0!==U.format&&(I.format=U.format),void 0!==U.type&&(I.type=U.type),
void 0!==U.mipmaps&&(I.mipmaps=U.mipmaps,I.minFilter=1008),1===U.mipmapCount&&(I.minFilter=1006),I.needsUpdate=!0,D&&D(I,U)},r,t);return I}});SO.prototype=Object.assign(Object.create(il.prototype),{constructor:SO,load:function(A,D,r,t){var B=new pn,I=new CP((this||q).manager);I.setCrossOrigin((this||q).crossOrigin);I.setPath((this||q).path);I.load(A,function(M){B.image=M;M=0<A.search(/\.jpe?g($|\?)/i)||0===A.search(/^data:image\/jpeg/);B.format=M?1022:1023;B.needsUpdate=!0;void 0!==D&&D(B)},r,t);
return B}});Object.assign(On.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(A,D){A=this.getUtoTmapping(A);return this.getPoint(A,D)},getPoints:function(A){void 0===A&&(A=5);for(var D=[],r=0;r<=A;r++)D.push(this.getPoint(r/A));return D},getSpacedPoints:function(A){void 0===A&&(A=5);for(var D=[],r=0;r<=A;r++)D.push(this.getPointAt(r/A));return D},getLength:function(){var A=this.getLengths();return A[A.length-1]},getLengths:function(A){void 0===
A&&(A=(this||q).arcLengthDivisions);if((this||q).cacheArcLengths&&(this||q).cacheArcLengths.length===A+1&&!(this||q).needsUpdate)return(this||q).cacheArcLengths;(this||q).needsUpdate=!1;var D=[],r=this.getPoint(0),t=0;D.push(0);for(var B=1;B<=A;B++){var I=this.getPoint(B/A);t+=I.distanceTo(r);D.push(t);r=I}return(this||q).cacheArcLengths=D},updateArcLengths:function(){(this||q).needsUpdate=!0;this.getLengths()},getUtoTmapping:function(A,D){var r=this.getLengths(),t=r.length;D=D?D:A*r[t-1];for(var B=
0,I=t-1,M;B<=I;)if(A=Math.floor(B+(I-B)/2),M=r[A]-D,0>M)B=A+1;else if(0<M)I=A-1;else{I=A;break}A=I;if(r[A]===D)return A/(t-1);B=r[A];return(A+(D-B)/(r[A+1]-B))/(t-1)},getTangent:function(A,D){var r=A-1E-4;A+=1E-4;0>r&&(r=0);1<A&&(A=1);r=this.getPoint(r);A=this.getPoint(A);D=D||(r.isVector2?new Ye:new jc);D.copy(A).sub(r).normalize();return D},getTangentAt:function(A,D){A=this.getUtoTmapping(A);return this.getTangent(A,D)},computeFrenetFrames:function(A,D){for(var r=new jc,t=[],B=[],I=[],M=new jc,
U=new Fg,Z=0;Z<=A;Z++)t[Z]=this.getTangentAt(Z/A,new jc),t[Z].normalize();B[0]=new jc;I[0]=new jc;Z=Number.MAX_VALUE;var aa=Math.abs(t[0].x),oa=Math.abs(t[0].y),wa=Math.abs(t[0].z);aa<=Z&&(Z=aa,r.set(1,0,0));oa<=Z&&(Z=oa,r.set(0,1,0));wa<=Z&&r.set(0,0,1);M.crossVectors(t[0],r).normalize();B[0].crossVectors(t[0],M);I[0].crossVectors(t[0],B[0]);for(r=1;r<=A;r++)B[r]=B[r-1].clone(),I[r]=I[r-1].clone(),M.crossVectors(t[r-1],t[r]),M.length()>Number.EPSILON&&(M.normalize(),Z=Math.acos(oh.clamp(t[r-1].dot(t[r]),
-1,1)),B[r].applyMatrix4(U.makeRotationAxis(M,Z))),I[r].crossVectors(t[r],B[r]);if(!0===D)for(D=Math.acos(oh.clamp(B[0].dot(B[A]),-1,1)),D/=A,0<t[0].dot(M.crossVectors(B[0],B[A]))&&(D=-D),M=1;M<=A;M++)B[M].applyMatrix4(U.makeRotationAxis(t[M],D*M)),I[M].crossVectors(t[M],B[M]);return{tangents:t,normals:B,binormals:I}},clone:function(){return(new (this||q).constructor).copy(this||q)},copy:function(A){(this||q).arcLengthDivisions=A.arcLengthDivisions;return this||q},toJSON:function(){var A={metadata:{version:4.5,
type:"Curve",generator:"Curve.toJSON"}};A.arcLengthDivisions=(this||q).arcLengthDivisions;A.type=(this||q).type;return A},fromJSON:function(A){(this||q).arcLengthDivisions=A.arcLengthDivisions;return this||q}});var tG=function(A){function D(t,B,I,M,U,Z,aa,oa){void 0===t&&(t=0);void 0===B&&(B=0);void 0===I&&(I=1);void 0===M&&(M=1);void 0===U&&(U=0);void 0===Z&&(Z=2*Math.PI);void 0===aa&&(aa=!1);void 0===oa&&(oa=0);var wa=A.call(this||q)||this||q;wa.type="EllipseCurve";wa.aX=t;wa.aY=B;wa.xRadius=I;
wa.yRadius=M;wa.aStartAngle=U;wa.aEndAngle=Z;wa.aClockwise=aa;wa.aRotation=oa;return wa}p(D,A);var r=D.prototype;r.getPoint=function(t,B){B=B||new Ye;for(var I=2*Math.PI,M=(this||q).aEndAngle-(this||q).aStartAngle,U=Math.abs(M)<Number.EPSILON;0>M;)M+=I;for(;M>I;)M-=I;M<Number.EPSILON&&(M=U?0:I);!0!==(this||q).aClockwise||U||(M=M===I?-I:M-I);I=(this||q).aStartAngle+t*M;t=(this||q).aX+(this||q).xRadius*Math.cos(I);var Z=(this||q).aY+(this||q).yRadius*Math.sin(I);0!==(this||q).aRotation&&(I=Math.cos((this||
q).aRotation),M=Math.sin((this||q).aRotation),U=t-(this||q).aX,Z-=(this||q).aY,t=U*I-Z*M+(this||q).aX,Z=U*M+Z*I+(this||q).aY);return B.set(t,Z)};r.copy=function(t){A.prototype.copy.call(this||q,t);(this||q).aX=t.aX;(this||q).aY=t.aY;(this||q).xRadius=t.xRadius;(this||q).yRadius=t.yRadius;(this||q).aStartAngle=t.aStartAngle;(this||q).aEndAngle=t.aEndAngle;(this||q).aClockwise=t.aClockwise;(this||q).aRotation=t.aRotation;return this||q};r.toJSON=function(){var t=A.prototype.toJSON.call(this||q);t.aX=
(this||q).aX;t.aY=(this||q).aY;t.xRadius=(this||q).xRadius;t.yRadius=(this||q).yRadius;t.aStartAngle=(this||q).aStartAngle;t.aEndAngle=(this||q).aEndAngle;t.aClockwise=(this||q).aClockwise;t.aRotation=(this||q).aRotation;return t};r.fromJSON=function(t){A.prototype.fromJSON.call(this||q,t);(this||q).aX=t.aX;(this||q).aY=t.aY;(this||q).xRadius=t.xRadius;(this||q).yRadius=t.yRadius;(this||q).aStartAngle=t.aStartAngle;(this||q).aEndAngle=t.aEndAngle;(this||q).aClockwise=t.aClockwise;(this||q).aRotation=
t.aRotation;return this||q};return D}(On);tG.prototype.isEllipseCurve=!0;var rZ=function(A){function D(r,t,B,I,M,U){r=A.call(this||q,r,t,B,B,I,M,U)||this||q;r.type="ArcCurve";return r}p(D,A);return D}(tG);rZ.prototype.isArcCurve=!0;var DP=new jc,sZ=new FY,tZ=new FY,uZ=new FY,vZ=function(A){function D(t,B,I,M){void 0===t&&(t=[]);void 0===B&&(B=!1);void 0===I&&(I="centripetal");void 0===M&&(M=.5);var U=A.call(this||q)||this||q;U.type="CatmullRomCurve3";U.points=t;U.closed=B;U.curveType=I;U.tension=
M;return U}p(D,A);var r=D.prototype;r.getPoint=function(t,B){void 0===B&&(B=new jc);var I=(this||q).points,M=I.length;t*=M-((this||q).closed?0:1);var U=Math.floor(t);t-=U;(this||q).closed?U+=0<U?0:(Math.floor(Math.abs(U)/M)+1)*M:0===t&&U===M-1&&(U=M-2,t=1);if((this||q).closed||0<U)var Z=I[(U-1)%M];else DP.subVectors(I[0],I[1]).add(I[0]),Z=DP;var aa=I[U%M],oa=I[(U+1)%M];(this||q).closed||U+2<M?I=I[(U+2)%M]:(DP.subVectors(I[M-1],I[M-2]).add(I[M-1]),I=DP);if("centripetal"===(this||q).curveType||"chordal"===
(this||q).curveType){var wa="chordal"===(this||q).curveType?.5:.25;M=Math.pow(Z.distanceToSquared(aa),wa);U=Math.pow(aa.distanceToSquared(oa),wa);wa=Math.pow(oa.distanceToSquared(I),wa);1E-4>U&&(U=1);1E-4>M&&(M=U);1E-4>wa&&(wa=U);sZ.initNonuniformCatmullRom(Z.x,aa.x,oa.x,I.x,M,U,wa);tZ.initNonuniformCatmullRom(Z.y,aa.y,oa.y,I.y,M,U,wa);uZ.initNonuniformCatmullRom(Z.z,aa.z,oa.z,I.z,M,U,wa)}else"catmullrom"===(this||q).curveType&&(sZ.initCatmullRom(Z.x,aa.x,oa.x,I.x,(this||q).tension),tZ.initCatmullRom(Z.y,
aa.y,oa.y,I.y,(this||q).tension),uZ.initCatmullRom(Z.z,aa.z,oa.z,I.z,(this||q).tension));B.set(sZ.calc(t),tZ.calc(t),uZ.calc(t));return B};r.copy=function(t){A.prototype.copy.call(this||q,t);(this||q).points=[];for(var B=0,I=t.points.length;B<I;B++)(this||q).points.push(t.points[B].clone());(this||q).closed=t.closed;(this||q).curveType=t.curveType;(this||q).tension=t.tension;return this||q};r.toJSON=function(){var t=A.prototype.toJSON.call(this||q);t.points=[];for(var B=0,I=(this||q).points.length;B<
I;B++)t.points.push((this||q).points[B].toArray());t.closed=(this||q).closed;t.curveType=(this||q).curveType;t.tension=(this||q).tension;return t};r.fromJSON=function(t){A.prototype.fromJSON.call(this||q,t);(this||q).points=[];for(var B=0,I=t.points.length;B<I;B++){var M=t.points[B];(this||q).points.push((new jc).fromArray(M))}(this||q).closed=t.closed;(this||q).curveType=t.curveType;(this||q).tension=t.tension;return this||q};return D}(On);vZ.prototype.isCatmullRomCurve3=!0;var EP=function(A){function D(t,
B,I,M){void 0===t&&(t=new Ye);void 0===B&&(B=new Ye);void 0===I&&(I=new Ye);void 0===M&&(M=new Ye);var U=A.call(this||q)||this||q;U.type="CubicBezierCurve";U.v0=t;U.v1=B;U.v2=I;U.v3=M;return U}p(D,A);var r=D.prototype;r.getPoint=function(t,B){void 0===B&&(B=new Ye);var I=(this||q).v0,M=(this||q).v1,U=(this||q).v2,Z=(this||q).v3;B.set(bG(t,I.x,M.x,U.x,Z.x),bG(t,I.y,M.y,U.y,Z.y));return B};r.copy=function(t){A.prototype.copy.call(this||q,t);(this||q).v0.copy(t.v0);(this||q).v1.copy(t.v1);(this||q).v2.copy(t.v2);
(this||q).v3.copy(t.v3);return this||q};r.toJSON=function(){var t=A.prototype.toJSON.call(this||q);t.v0=(this||q).v0.toArray();t.v1=(this||q).v1.toArray();t.v2=(this||q).v2.toArray();t.v3=(this||q).v3.toArray();return t};r.fromJSON=function(t){A.prototype.fromJSON.call(this||q,t);(this||q).v0.fromArray(t.v0);(this||q).v1.fromArray(t.v1);(this||q).v2.fromArray(t.v2);(this||q).v3.fromArray(t.v3);return this||q};return D}(On);EP.prototype.isCubicBezierCurve=!0;var wZ=function(A){function D(t,B,I,M){void 0===
t&&(t=new jc);void 0===B&&(B=new jc);void 0===I&&(I=new jc);void 0===M&&(M=new jc);var U=A.call(this||q)||this||q;U.type="CubicBezierCurve3";U.v0=t;U.v1=B;U.v2=I;U.v3=M;return U}p(D,A);var r=D.prototype;r.getPoint=function(t,B){void 0===B&&(B=new jc);var I=(this||q).v0,M=(this||q).v1,U=(this||q).v2,Z=(this||q).v3;B.set(bG(t,I.x,M.x,U.x,Z.x),bG(t,I.y,M.y,U.y,Z.y),bG(t,I.z,M.z,U.z,Z.z));return B};r.copy=function(t){A.prototype.copy.call(this||q,t);(this||q).v0.copy(t.v0);(this||q).v1.copy(t.v1);(this||
q).v2.copy(t.v2);(this||q).v3.copy(t.v3);return this||q};r.toJSON=function(){var t=A.prototype.toJSON.call(this||q);t.v0=(this||q).v0.toArray();t.v1=(this||q).v1.toArray();t.v2=(this||q).v2.toArray();t.v3=(this||q).v3.toArray();return t};r.fromJSON=function(t){A.prototype.fromJSON.call(this||q,t);(this||q).v0.fromArray(t.v0);(this||q).v1.fromArray(t.v1);(this||q).v2.fromArray(t.v2);(this||q).v3.fromArray(t.v3);return this||q};return D}(On);wZ.prototype.isCubicBezierCurve3=!0;var uG=function(A){function D(t,
B){void 0===t&&(t=new Ye);void 0===B&&(B=new Ye);var I=A.call(this||q)||this||q;I.type="LineCurve";I.v1=t;I.v2=B;return I}p(D,A);var r=D.prototype;r.getPoint=function(t,B){void 0===B&&(B=new Ye);1===t?B.copy((this||q).v2):(B.copy((this||q).v2).sub((this||q).v1),B.multiplyScalar(t).add((this||q).v1));return B};r.getPointAt=function(t,B){return this.getPoint(t,B)};r.getTangent=function(t,B){t=B||new Ye;t.copy((this||q).v2).sub((this||q).v1).normalize();return t};r.copy=function(t){A.prototype.copy.call(this||
q,t);(this||q).v1.copy(t.v1);(this||q).v2.copy(t.v2);return this||q};r.toJSON=function(){var t=A.prototype.toJSON.call(this||q);t.v1=(this||q).v1.toArray();t.v2=(this||q).v2.toArray();return t};r.fromJSON=function(t){A.prototype.fromJSON.call(this||q,t);(this||q).v1.fromArray(t.v1);(this||q).v2.fromArray(t.v2);return this||q};return D}(On);uG.prototype.isLineCurve=!0;var Fea=function(A){function D(t,B){void 0===t&&(t=new jc);void 0===B&&(B=new jc);var I=A.call(this||q)||this||q;I.type="LineCurve3";
I.isLineCurve3=!0;I.v1=t;I.v2=B;return I}p(D,A);var r=D.prototype;r.getPoint=function(t,B){void 0===B&&(B=new jc);1===t?B.copy((this||q).v2):(B.copy((this||q).v2).sub((this||q).v1),B.multiplyScalar(t).add((this||q).v1));return B};r.getPointAt=function(t,B){return this.getPoint(t,B)};r.copy=function(t){A.prototype.copy.call(this||q,t);(this||q).v1.copy(t.v1);(this||q).v2.copy(t.v2);return this||q};r.toJSON=function(){var t=A.prototype.toJSON.call(this||q);t.v1=(this||q).v1.toArray();t.v2=(this||q).v2.toArray();
return t};r.fromJSON=function(t){A.prototype.fromJSON.call(this||q,t);(this||q).v1.fromArray(t.v1);(this||q).v2.fromArray(t.v2);return this||q};return D}(On),FP=function(A){function D(t,B,I){void 0===t&&(t=new Ye);void 0===B&&(B=new Ye);void 0===I&&(I=new Ye);var M=A.call(this||q)||this||q;M.type="QuadraticBezierCurve";M.v0=t;M.v1=B;M.v2=I;return M}p(D,A);var r=D.prototype;r.getPoint=function(t,B){void 0===B&&(B=new Ye);var I=(this||q).v0,M=(this||q).v1,U=(this||q).v2;B.set(aG(t,I.x,M.x,U.x),aG(t,
I.y,M.y,U.y));return B};r.copy=function(t){A.prototype.copy.call(this||q,t);(this||q).v0.copy(t.v0);(this||q).v1.copy(t.v1);(this||q).v2.copy(t.v2);return this||q};r.toJSON=function(){var t=A.prototype.toJSON.call(this||q);t.v0=(this||q).v0.toArray();t.v1=(this||q).v1.toArray();t.v2=(this||q).v2.toArray();return t};r.fromJSON=function(t){A.prototype.fromJSON.call(this||q,t);(this||q).v0.fromArray(t.v0);(this||q).v1.fromArray(t.v1);(this||q).v2.fromArray(t.v2);return this||q};return D}(On);FP.prototype.isQuadraticBezierCurve=
!0;var xZ=function(A){function D(t,B,I){void 0===t&&(t=new jc);void 0===B&&(B=new jc);void 0===I&&(I=new jc);var M=A.call(this||q)||this||q;M.type="QuadraticBezierCurve3";M.v0=t;M.v1=B;M.v2=I;return M}p(D,A);var r=D.prototype;r.getPoint=function(t,B){void 0===B&&(B=new jc);var I=(this||q).v0,M=(this||q).v1,U=(this||q).v2;B.set(aG(t,I.x,M.x,U.x),aG(t,I.y,M.y,U.y),aG(t,I.z,M.z,U.z));return B};r.copy=function(t){A.prototype.copy.call(this||q,t);(this||q).v0.copy(t.v0);(this||q).v1.copy(t.v1);(this||
q).v2.copy(t.v2);return this||q};r.toJSON=function(){var t=A.prototype.toJSON.call(this||q);t.v0=(this||q).v0.toArray();t.v1=(this||q).v1.toArray();t.v2=(this||q).v2.toArray();return t};r.fromJSON=function(t){A.prototype.fromJSON.call(this||q,t);(this||q).v0.fromArray(t.v0);(this||q).v1.fromArray(t.v1);(this||q).v2.fromArray(t.v2);return this||q};return D}(On);xZ.prototype.isQuadraticBezierCurve3=!0;var GP=function(A){function D(t){void 0===t&&(t=[]);var B=A.call(this||q)||this||q;B.type="SplineCurve";
B.points=t;return B}p(D,A);var r=D.prototype;r.getPoint=function(t,B){void 0===B&&(B=new Ye);var I=(this||q).points,M=(I.length-1)*t;t=Math.floor(M);M-=t;var U=I[0===t?t:t-1],Z=I[t],aa=I[t>I.length-2?I.length-1:t+1];I=I[t>I.length-3?I.length-1:t+2];B.set(Pda(M,U.x,Z.x,aa.x,I.x),Pda(M,U.y,Z.y,aa.y,I.y));return B};r.copy=function(t){A.prototype.copy.call(this||q,t);(this||q).points=[];for(var B=0,I=t.points.length;B<I;B++)(this||q).points.push(t.points[B].clone());return this||q};r.toJSON=function(){var t=
A.prototype.toJSON.call(this||q);t.points=[];for(var B=0,I=(this||q).points.length;B<I;B++)t.points.push((this||q).points[B].toArray());return t};r.fromJSON=function(t){A.prototype.fromJSON.call(this||q,t);(this||q).points=[];for(var B=0,I=t.points.length;B<I;B++){var M=t.points[B];(this||q).points.push((new Ye).fromArray(M))}return this||q};return D}(On);GP.prototype.isSplineCurve=!0;var yZ=Object.freeze({__proto__:null,ArcCurve:rZ,CatmullRomCurve3:vZ,CubicBezierCurve:EP,CubicBezierCurve3:wZ,EllipseCurve:tG,
LineCurve:uG,LineCurve3:Fea,QuadraticBezierCurve:FP,QuadraticBezierCurve3:xZ,SplineCurve:GP}),Gea=function(A){function D(){var t=A.call(this||q)||this||q;t.type="CurvePath";t.curves=[];t.autoClose=!1;return t}p(D,A);var r=D.prototype;r.add=function(t){(this||q).curves.push(t)};r.closePath=function(){var t=(this||q).curves[0].getPoint(0),B=(this||q).curves[(this||q).curves.length-1].getPoint(1);t.equals(B)||(this||q).curves.push(new uG(B,t))};r.getPoint=function(t){var B=t*this.getLength(),I=this.getCurveLengths();
for(t=0;t<I.length;){if(I[t]>=B)return B=I[t]-B,t=(this||q).curves[t],I=t.getLength(),t.getPointAt(0===I?0:1-B/I);t++}return null};r.getLength=function(){var t=this.getCurveLengths();return t[t.length-1]};r.updateArcLengths=function(){(this||q).needsUpdate=!0;(this||q).cacheLengths=null;this.getCurveLengths()};r.getCurveLengths=function(){if((this||q).cacheLengths&&(this||q).cacheLengths.length===(this||q).curves.length)return(this||q).cacheLengths;for(var t=[],B=0,I=0,M=(this||q).curves.length;I<
M;I++)B+=(this||q).curves[I].getLength(),t.push(B);return(this||q).cacheLengths=t};r.getSpacedPoints=function(t){void 0===t&&(t=40);for(var B=[],I=0;I<=t;I++)B.push(this.getPoint(I/t));(this||q).autoClose&&B.push(B[0]);return B};r.getPoints=function(t){void 0===t&&(t=12);for(var B=[],I,M=0,U=(this||q).curves;M<U.length;M++){var Z=U[M];Z=Z.getPoints(Z&&Z.isEllipseCurve?2*t:Z&&(Z.isLineCurve||Z.isLineCurve3)?1:Z&&Z.isSplineCurve?t*Z.points.length:t);for(var aa=0;aa<Z.length;aa++){var oa=Z[aa];I&&I.equals(oa)||
(B.push(oa),I=oa)}}(this||q).autoClose&&1<B.length&&!B[B.length-1].equals(B[0])&&B.push(B[0]);return B};r.copy=function(t){A.prototype.copy.call(this||q,t);(this||q).curves=[];for(var B=0,I=t.curves.length;B<I;B++)(this||q).curves.push(t.curves[B].clone());(this||q).autoClose=t.autoClose;return this||q};r.toJSON=function(){var t=A.prototype.toJSON.call(this||q);t.autoClose=(this||q).autoClose;t.curves=[];for(var B=0,I=(this||q).curves.length;B<I;B++)t.curves.push((this||q).curves[B].toJSON());return t};
r.fromJSON=function(t){A.prototype.fromJSON.call(this||q,t);(this||q).autoClose=t.autoClose;(this||q).curves=[];for(var B=0,I=t.curves.length;B<I;B++){var M=t.curves[B];(this||q).curves.push((new yZ[M.type]).fromJSON(M))}return this||q};return D}(On),vG=function(A){function D(t){var B=A.call(this||q)||this||q;B.type="Path";B.currentPoint=new Ye;t&&B.setFromPoints(t);return B}p(D,A);var r=D.prototype;r.setFromPoints=function(t){this.moveTo(t[0].x,t[0].y);for(var B=1,I=t.length;B<I;B++)this.lineTo(t[B].x,
t[B].y);return this||q};r.moveTo=function(t,B){(this||q).currentPoint.set(t,B);return this||q};r.lineTo=function(t,B){var I=new uG((this||q).currentPoint.clone(),new Ye(t,B));(this||q).curves.push(I);(this||q).currentPoint.set(t,B);return this||q};r.quadraticCurveTo=function(t,B,I,M){t=new FP((this||q).currentPoint.clone(),new Ye(t,B),new Ye(I,M));(this||q).curves.push(t);(this||q).currentPoint.set(I,M);return this||q};r.bezierCurveTo=function(t,B,I,M,U,Z){t=new EP((this||q).currentPoint.clone(),
new Ye(t,B),new Ye(I,M),new Ye(U,Z));(this||q).curves.push(t);(this||q).currentPoint.set(U,Z);return this||q};r.splineThru=function(t){var B=[(this||q).currentPoint.clone()].concat(t);B=new GP(B);(this||q).curves.push(B);(this||q).currentPoint.copy(t[t.length-1]);return this||q};r.arc=function(t,B,I,M,U,Z){this.absarc(t+(this||q).currentPoint.x,B+(this||q).currentPoint.y,I,M,U,Z);return this||q};r.absarc=function(t,B,I,M,U,Z){this.absellipse(t,B,I,I,M,U,Z);return this||q};r.ellipse=function(t,B,I,
M,U,Z,aa,oa){this.absellipse(t+(this||q).currentPoint.x,B+(this||q).currentPoint.y,I,M,U,Z,aa,oa);return this||q};r.absellipse=function(t,B,I,M,U,Z,aa,oa){t=new tG(t,B,I,M,U,Z,aa,oa);0<(this||q).curves.length&&(B=t.getPoint(0),B.equals((this||q).currentPoint)||this.lineTo(B.x,B.y));(this||q).curves.push(t);t=t.getPoint(1);(this||q).currentPoint.copy(t);return this||q};r.copy=function(t){A.prototype.copy.call(this||q,t);(this||q).currentPoint.copy(t.currentPoint);return this||q};r.toJSON=function(){var t=
A.prototype.toJSON.call(this||q);t.currentPoint=(this||q).currentPoint.toArray();return t};r.fromJSON=function(t){A.prototype.fromJSON.call(this||q,t);(this||q).currentPoint.fromArray(t.currentPoint);return this||q};return D}(Gea),sv=function(A){function D(t){t=A.call(this||q,t)||this||q;t.uuid=oh.generateUUID();t.type="Shape";t.holes=[];return t}p(D,A);var r=D.prototype;r.getPointsHoles=function(t){for(var B=[],I=0,M=(this||q).holes.length;I<M;I++)B[I]=(this||q).holes[I].getPoints(t);return B};r.extractPoints=
function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}};r.copy=function(t){A.prototype.copy.call(this||q,t);(this||q).holes=[];for(var B=0,I=t.holes.length;B<I;B++)(this||q).holes.push(t.holes[B].clone());return this||q};r.toJSON=function(){var t=A.prototype.toJSON.call(this||q);t.uuid=(this||q).uuid;t.holes=[];for(var B=0,I=(this||q).holes.length;B<I;B++)t.holes.push((this||q).holes[B].toJSON());return t};r.fromJSON=function(t){A.prototype.fromJSON.call(this||q,t);(this||q).uuid=
t.uuid;(this||q).holes=[];for(var B=0,I=t.holes.length;B<I;B++){var M=t.holes[B];(this||q).holes.push((new vG).fromJSON(M))}return this||q};return D}(vG),Xq=function(A){function D(t,B){void 0===B&&(B=1);var I=A.call(this||q)||this||q;I.type="Light";I.color=new Zf(t);I.intensity=B;return I}p(D,A);var r=D.prototype;r.copy=function(t){A.prototype.copy.call(this||q,t);(this||q).color.copy(t.color);(this||q).intensity=t.intensity;return this||q};r.toJSON=function(t){t=A.prototype.toJSON.call(this||q,t);
t.object.color=(this||q).color.getHex();t.object.intensity=(this||q).intensity;void 0!==(this||q).groundColor&&(t.object.groundColor=(this||q).groundColor.getHex());void 0!==(this||q).distance&&(t.object.distance=(this||q).distance);void 0!==(this||q).angle&&(t.object.angle=(this||q).angle);void 0!==(this||q).decay&&(t.object.decay=(this||q).decay);void 0!==(this||q).penumbra&&(t.object.penumbra=(this||q).penumbra);void 0!==(this||q).shadow&&(t.object.shadow=(this||q).shadow.toJSON());return t};return D}(P);
Xq.prototype.isLight=!0;var zZ=function(A){function D(r,t,B){r=A.call(this||q,r,B)||this||q;r.type="HemisphereLight";r.position.copy(P.DefaultUp);r.updateMatrix();r.groundColor=new Zf(t);return r}p(D,A);D.prototype.copy=function(r){Xq.prototype.copy.call(this||q,r);(this||q).groundColor.copy(r.groundColor);return this||q};return D}(Xq);zZ.prototype.isHemisphereLight=!0;var Hea=new Fg,Iea=new jc,Jea=new jc,AZ=function(){function A(r){(this||q).camera=r;(this||q).bias=0;(this||q).normalBias=0;(this||
q).radius=1;(this||q).mapSize=new Ye(512,512);(this||q).map=null;(this||q).mapPass=null;(this||q).matrix=new Fg;(this||q).autoUpdate=!0;(this||q).needsUpdate=!1;(this||q)._frustum=new NF;(this||q)._frameExtents=new Ye(1,1);(this||q)._viewportCount=1;(this||q)._viewports=[new Xj(0,0,1,1)]}var D=A.prototype;D.getViewportCount=function(){return(this||q)._viewportCount};D.getFrustum=function(){return(this||q)._frustum};D.updateMatrices=function(r){var t=(this||q).camera,B=(this||q).matrix;Iea.setFromMatrixPosition(r.matrixWorld);
t.position.copy(Iea);Jea.setFromMatrixPosition(r.target.matrixWorld);t.lookAt(Jea);t.updateMatrixWorld();Hea.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse);(this||q)._frustum.setFromProjectionMatrix(Hea);B.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);B.multiply(t.projectionMatrix);B.multiply(t.matrixWorldInverse)};D.getViewport=function(r){return(this||q)._viewports[r]};D.getFrameExtents=function(){return(this||q)._frameExtents};D.copy=function(r){(this||q).camera=r.camera.clone();(this||
q).bias=r.bias;(this||q).radius=r.radius;(this||q).mapSize.copy(r.mapSize);return this||q};D.clone=function(){return(new (this||q).constructor).copy(this||q)};D.toJSON=function(){var r={};0!==(this||q).bias&&(r.bias=(this||q).bias);0!==(this||q).normalBias&&(r.normalBias=(this||q).normalBias);1!==(this||q).radius&&(r.radius=(this||q).radius);if(512!==(this||q).mapSize.x||512!==(this||q).mapSize.y)r.mapSize=(this||q).mapSize.toArray();r.camera=(this||q).camera.toJSON(!1).object;delete r.camera.matrix;
return r};return A}(),Kea=function(A){function D(){var r=A.call(this||q,new Nb(50,1,.5,500))||this||q;r.focus=1;return r}p(D,A);D.prototype.updateMatrices=function(r){var t=(this||q).camera,B=2*oh.RAD2DEG*r.angle*(this||q).focus,I=(this||q).mapSize.width/(this||q).mapSize.height,M=r.distance||t.far;if(B!==t.fov||I!==t.aspect||M!==t.far)t.fov=B,t.aspect=I,t.far=M,t.updateProjectionMatrix();A.prototype.updateMatrices.call(this||q,r)};return D}(AZ);Kea.prototype.isSpotLightShadow=!0;var BZ=function(A){function D(r,
t,B,I,M,U){void 0===B&&(B=0);void 0===I&&(I=Math.PI/3);void 0===M&&(M=0);void 0===U&&(U=1);r=A.call(this||q,r,t)||this||q;r.type="SpotLight";r.position.copy(P.DefaultUp);r.updateMatrix();r.target=new P;r.distance=B;r.angle=I;r.penumbra=M;r.decay=U;r.shadow=new Kea;return r}p(D,A);D.prototype.copy=function(r){A.prototype.copy.call(this||q,r);(this||q).distance=r.distance;(this||q).angle=r.angle;(this||q).penumbra=r.penumbra;(this||q).decay=r.decay;(this||q).target=r.target.clone();(this||q).shadow=
r.shadow.clone();return this||q};l(D,[{key:"power",get:function(){return(this||q).intensity*Math.PI},set:function(r){(this||q).intensity=r/Math.PI}}]);return D}(Xq);BZ.prototype.isSpotLight=!0;var Lea=new Fg,wG=new jc,CZ=new jc,Mea=function(A){function D(){var r=A.call(this||q,new Nb(90,1,.5,500))||this||q;r._frameExtents=new Ye(4,2);r._viewportCount=6;r._viewports=[new Xj(2,1,1,1),new Xj(0,1,1,1),new Xj(3,1,1,1),new Xj(1,1,1,1),new Xj(3,0,1,1),new Xj(1,0,1,1)];r._cubeDirections=[new jc(1,0,0),new jc(-1,
0,0),new jc(0,0,1),new jc(0,0,-1),new jc(0,1,0),new jc(0,-1,0)];r._cubeUps=[new jc(0,1,0),new jc(0,1,0),new jc(0,1,0),new jc(0,1,0),new jc(0,0,1),new jc(0,0,-1)];return r}p(D,A);D.prototype.updateMatrices=function(r,t){void 0===t&&(t=0);var B=(this||q).camera,I=(this||q).matrix;wG.setFromMatrixPosition(r.matrixWorld);B.position.copy(wG);CZ.copy(B.position);CZ.add((this||q)._cubeDirections[t]);B.up.copy((this||q)._cubeUps[t]);B.lookAt(CZ);B.updateMatrixWorld();I.makeTranslation(-wG.x,-wG.y,-wG.z);
Lea.multiplyMatrices(B.projectionMatrix,B.matrixWorldInverse);(this||q)._frustum.setFromProjectionMatrix(Lea)};return D}(AZ);Mea.prototype.isPointLightShadow=!0;var DZ=function(A){function D(r,t,B,I){void 0===B&&(B=0);void 0===I&&(I=1);r=A.call(this||q,r,t)||this||q;r.type="PointLight";r.distance=B;r.decay=I;r.shadow=new Mea;return r}p(D,A);D.prototype.copy=function(r){A.prototype.copy.call(this||q,r);(this||q).distance=r.distance;(this||q).decay=r.decay;(this||q).shadow=r.shadow.clone();return this||
q};l(D,[{key:"power",get:function(){return 4*(this||q).intensity*Math.PI},set:function(r){(this||q).intensity=r/(4*Math.PI)}}]);return D}(Xq);DZ.prototype.isPointLight=!0;var xG=function(A){function D(t,B,I,M,U,Z){void 0===t&&(t=-1);void 0===B&&(B=1);void 0===I&&(I=1);void 0===M&&(M=-1);void 0===U&&(U=.1);void 0===Z&&(Z=2E3);var aa=A.call(this||q)||this||q;aa.type="OrthographicCamera";aa.zoom=1;aa.view=null;aa.left=t;aa.right=B;aa.top=I;aa.bottom=M;aa.near=U;aa.far=Z;aa.updateProjectionMatrix();return aa}
p(D,A);var r=D.prototype;r.copy=function(t,B){A.prototype.copy.call(this||q,t,B);(this||q).left=t.left;(this||q).right=t.right;(this||q).top=t.top;(this||q).bottom=t.bottom;(this||q).near=t.near;(this||q).far=t.far;(this||q).zoom=t.zoom;(this||q).view=null===t.view?null:Object.assign({},t.view);return this||q};r.setViewOffset=function(t,B,I,M,U,Z){null===(this||q).view&&((this||q).view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});(this||q).view.enabled=!0;(this||q).view.fullWidth=
t;(this||q).view.fullHeight=B;(this||q).view.offsetX=I;(this||q).view.offsetY=M;(this||q).view.width=U;(this||q).view.height=Z;this.updateProjectionMatrix()};r.clearViewOffset=function(){null!==(this||q).view&&((this||q).view.enabled=!1);this.updateProjectionMatrix()};r.updateProjectionMatrix=function(){var t=((this||q).right-(this||q).left)/(2*(this||q).zoom),B=((this||q).top-(this||q).bottom)/(2*(this||q).zoom),I=((this||q).right+(this||q).left)/2,M=((this||q).top+(this||q).bottom)/2,U=I-t;I+=t;
t=M+B;B=M-B;null!==(this||q).view&&(this||q).view.enabled&&(M=((this||q).right-(this||q).left)/(this||q).view.fullWidth/(this||q).zoom,B=((this||q).top-(this||q).bottom)/(this||q).view.fullHeight/(this||q).zoom,U+=M*(this||q).view.offsetX,I=U+M*(this||q).view.width,t-=B*(this||q).view.offsetY,B=t-B*(this||q).view.height);(this||q).projectionMatrix.makeOrthographic(U,I,t,B,(this||q).near,(this||q).far);(this||q).projectionMatrixInverse.copy((this||q).projectionMatrix).invert()};r.toJSON=function(t){t=
P.prototype.toJSON.call(this||q,t);t.object.zoom=(this||q).zoom;t.object.left=(this||q).left;t.object.right=(this||q).right;t.object.top=(this||q).top;t.object.bottom=(this||q).bottom;t.object.near=(this||q).near;t.object.far=(this||q).far;null!==(this||q).view&&(t.object.view=Object.assign({},(this||q).view));return t};return D}(Jc);xG.prototype.isOrthographicCamera=!0;var Nea=function(A){function D(){return A.call(this||q,new xG(-5,5,5,-5,.5,500))||this||q}p(D,A);return D}(AZ);Nea.prototype.isDirectionalLightShadow=
!0;var EZ=function(A){function D(r,t){r=A.call(this||q,r,t)||this||q;r.type="DirectionalLight";r.position.copy(P.DefaultUp);r.updateMatrix();r.target=new P;r.shadow=new Nea;return r}p(D,A);D.prototype.copy=function(r){A.prototype.copy.call(this||q,r);(this||q).target=r.target.clone();(this||q).shadow=r.shadow.clone();return this||q};return D}(Xq);EZ.prototype.isDirectionalLight=!0;var FZ=function(A){function D(r,t){r=A.call(this||q,r,t)||this||q;r.type="AmbientLight";return r}p(D,A);return D}(Xq);
FZ.prototype.isAmbientLight=!0;var GZ=function(A){function D(t,B,I,M){void 0===I&&(I=10);void 0===M&&(M=10);t=A.call(this||q,t,B)||this||q;t.type="RectAreaLight";t.width=I;t.height=M;return t}p(D,A);var r=D.prototype;r.copy=function(t){A.prototype.copy.call(this||q,t);(this||q).width=t.width;(this||q).height=t.height;return this||q};r.toJSON=function(t){t=A.prototype.toJSON.call(this||q,t);t.object.width=(this||q).width;t.object.height=(this||q).height;return t};return D}(Xq);GZ.prototype.isRectAreaLight=
!0;var HZ=function(){function A(){(this||q).coefficients=[];for(var r=0;9>r;r++)(this||q).coefficients.push(new jc)}var D=A.prototype;D.set=function(r){for(var t=0;9>t;t++)(this||q).coefficients[t].copy(r[t]);return this||q};D.zero=function(){for(var r=0;9>r;r++)(this||q).coefficients[r].set(0,0,0);return this||q};D.getAt=function(r,t){var B=r.x,I=r.y;r=r.z;var M=(this||q).coefficients;t.copy(M[0]).multiplyScalar(.282095);t.addScaledVector(M[1],.488603*I);t.addScaledVector(M[2],.488603*r);t.addScaledVector(M[3],
.488603*B);t.addScaledVector(M[4],1.092548*B*I);t.addScaledVector(M[5],1.092548*I*r);t.addScaledVector(M[6],.315392*(3*r*r-1));t.addScaledVector(M[7],1.092548*B*r);t.addScaledVector(M[8],.546274*(B*B-I*I));return t};D.getIrradianceAt=function(r,t){var B=r.x,I=r.y;r=r.z;var M=(this||q).coefficients;t.copy(M[0]).multiplyScalar(.886227);t.addScaledVector(M[1],1.023328*I);t.addScaledVector(M[2],1.023328*r);t.addScaledVector(M[3],1.023328*B);t.addScaledVector(M[4],.858086*B*I);t.addScaledVector(M[5],.858086*
I*r);t.addScaledVector(M[6],.743125*r*r-.247708);t.addScaledVector(M[7],.858086*B*r);t.addScaledVector(M[8],.429043*(B*B-I*I));return t};D.add=function(r){for(var t=0;9>t;t++)(this||q).coefficients[t].add(r.coefficients[t]);return this||q};D.addScaledSH=function(r,t){for(var B=0;9>B;B++)(this||q).coefficients[B].addScaledVector(r.coefficients[B],t);return this||q};D.scale=function(r){for(var t=0;9>t;t++)(this||q).coefficients[t].multiplyScalar(r);return this||q};D.lerp=function(r,t){for(var B=0;9>
B;B++)(this||q).coefficients[B].lerp(r.coefficients[B],t);return this||q};D.equals=function(r){for(var t=0;9>t;t++)if(!(this||q).coefficients[t].equals(r.coefficients[t]))return!1;return!0};D.copy=function(r){return this.set(r.coefficients)};D.clone=function(){return(new (this||q).constructor).copy(this||q)};D.fromArray=function(r,t){void 0===t&&(t=0);for(var B=(this||q).coefficients,I=0;9>I;I++)B[I].fromArray(r,t+3*I);return this||q};D.toArray=function(r,t){void 0===r&&(r=[]);void 0===t&&(t=0);for(var B=
(this||q).coefficients,I=0;9>I;I++)B[I].toArray(r,t+3*I);return r};A.getBasisAt=function(r,t){var B=r.x,I=r.y;r=r.z;t[0]=.282095;t[1]=.488603*I;t[2]=.488603*r;t[3]=.488603*B;t[4]=1.092548*B*I;t[5]=1.092548*I*r;t[6]=.315392*(3*r*r-1);t[7]=1.092548*B*r;t[8]=.546274*(B*B-I*I)};return A}();HZ.prototype.isSphericalHarmonics3=!0;var yG=function(A){function D(t,B){void 0===t&&(t=new HZ);void 0===B&&(B=1);B=A.call(this||q,void 0,B)||this||q;B.sh=t;return B}p(D,A);var r=D.prototype;r.copy=function(t){A.prototype.copy.call(this||
q,t);(this||q).sh.copy(t.sh);return this||q};r.fromJSON=function(t){(this||q).intensity=t.intensity;(this||q).sh.fromArray(t.sh);return this||q};r.toJSON=function(t){t=A.prototype.toJSON.call(this||q,t);t.object.sh=(this||q).sh.toArray();return t};return D}(Xq);yG.prototype.isLightProbe=!0;var Oea=function(A){function D(t){t=A.call(this||q,t)||this||q;t.textures={};return t}p(D,A);var r=D.prototype;r.load=function(t,B,I,M){var U=this||q,Z=new Pp(U.manager);Z.setPath(U.path);Z.setRequestHeader(U.requestHeader);
Z.setWithCredentials(U.withCredentials);Z.load(t,function(aa){try{B(U.parse(JSON.parse(aa)))}catch(oa){M?M(oa):console.error(oa),U.manager.itemError(t)}},I,M)};r.parse=function(t){function B(oa){void 0===I[oa]&&console.warn("THREE.MaterialLoader: Undefined texture",oa);return I[oa]}var I=(this||q).textures,M=new Rya[t.type];void 0!==t.uuid&&(M.uuid=t.uuid);void 0!==t.name&&(M.name=t.name);void 0!==t.color&&void 0!==M.color&&M.color.setHex(t.color);void 0!==t.roughness&&(M.roughness=t.roughness);void 0!==
t.metalness&&(M.metalness=t.metalness);void 0!==t.sheen&&(M.sheen=(new Zf).setHex(t.sheen));void 0!==t.emissive&&void 0!==M.emissive&&M.emissive.setHex(t.emissive);void 0!==t.specular&&void 0!==M.specular&&M.specular.setHex(t.specular);void 0!==t.shininess&&(M.shininess=t.shininess);void 0!==t.clearcoat&&(M.clearcoat=t.clearcoat);void 0!==t.clearcoatRoughness&&(M.clearcoatRoughness=t.clearcoatRoughness);void 0!==t.fog&&(M.fog=t.fog);void 0!==t.flatShading&&(M.flatShading=t.flatShading);void 0!==t.blending&&
(M.blending=t.blending);void 0!==t.combine&&(M.combine=t.combine);void 0!==t.side&&(M.side=t.side);void 0!==t.opacity&&(M.opacity=t.opacity);void 0!==t.transparent&&(M.transparent=t.transparent);void 0!==t.alphaTest&&(M.alphaTest=t.alphaTest);void 0!==t.depthTest&&(M.depthTest=t.depthTest);void 0!==t.depthWrite&&(M.depthWrite=t.depthWrite);void 0!==t.colorWrite&&(M.colorWrite=t.colorWrite);void 0!==t.stencilWrite&&(M.stencilWrite=t.stencilWrite);void 0!==t.stencilWriteMask&&(M.stencilWriteMask=t.stencilWriteMask);
void 0!==t.stencilFunc&&(M.stencilFunc=t.stencilFunc);void 0!==t.stencilRef&&(M.stencilRef=t.stencilRef);void 0!==t.stencilFuncMask&&(M.stencilFuncMask=t.stencilFuncMask);void 0!==t.stencilFail&&(M.stencilFail=t.stencilFail);void 0!==t.stencilZFail&&(M.stencilZFail=t.stencilZFail);void 0!==t.stencilZPass&&(M.stencilZPass=t.stencilZPass);void 0!==t.wireframe&&(M.wireframe=t.wireframe);void 0!==t.wireframeLinewidth&&(M.wireframeLinewidth=t.wireframeLinewidth);void 0!==t.wireframeLinecap&&(M.wireframeLinecap=
t.wireframeLinecap);void 0!==t.wireframeLinejoin&&(M.wireframeLinejoin=t.wireframeLinejoin);void 0!==t.rotation&&(M.rotation=t.rotation);1!==t.linewidth&&(M.linewidth=t.linewidth);void 0!==t.dashSize&&(M.dashSize=t.dashSize);void 0!==t.gapSize&&(M.gapSize=t.gapSize);void 0!==t.scale&&(M.scale=t.scale);void 0!==t.polygonOffset&&(M.polygonOffset=t.polygonOffset);void 0!==t.polygonOffsetFactor&&(M.polygonOffsetFactor=t.polygonOffsetFactor);void 0!==t.polygonOffsetUnits&&(M.polygonOffsetUnits=t.polygonOffsetUnits);
void 0!==t.skinning&&(M.skinning=t.skinning);void 0!==t.morphTargets&&(M.morphTargets=t.morphTargets);void 0!==t.morphNormals&&(M.morphNormals=t.morphNormals);void 0!==t.dithering&&(M.dithering=t.dithering);void 0!==t.vertexTangents&&(M.vertexTangents=t.vertexTangents);void 0!==t.visible&&(M.visible=t.visible);void 0!==t.toneMapped&&(M.toneMapped=t.toneMapped);void 0!==t.userData&&(M.userData=t.userData);void 0!==t.vertexColors&&(M.vertexColors="number"===typeof t.vertexColors?0<t.vertexColors?!0:
!1:t.vertexColors);if(void 0!==t.uniforms)for(var U in t.uniforms){var Z=t.uniforms[U];M.uniforms[U]={};switch(Z.type){case "t":M.uniforms[U].value=B(Z.value);break;case "c":M.uniforms[U].value=(new Zf).setHex(Z.value);break;case "v2":M.uniforms[U].value=(new Ye).fromArray(Z.value);break;case "v3":M.uniforms[U].value=(new jc).fromArray(Z.value);break;case "v4":M.uniforms[U].value=(new Xj).fromArray(Z.value);break;case "m3":M.uniforms[U].value=(new cm).fromArray(Z.value);break;case "m4":M.uniforms[U].value=
(new Fg).fromArray(Z.value);break;default:M.uniforms[U].value=Z.value}}void 0!==t.defines&&(M.defines=t.defines);void 0!==t.vertexShader&&(M.vertexShader=t.vertexShader);void 0!==t.fragmentShader&&(M.fragmentShader=t.fragmentShader);if(void 0!==t.extensions)for(var aa in t.extensions)M.extensions[aa]=t.extensions[aa];void 0!==t.shading&&(M.flatShading=1===t.shading);void 0!==t.size&&(M.size=t.size);void 0!==t.sizeAttenuation&&(M.sizeAttenuation=t.sizeAttenuation);void 0!==t.map&&(M.map=B(t.map));
void 0!==t.matcap&&(M.matcap=B(t.matcap));void 0!==t.alphaMap&&(M.alphaMap=B(t.alphaMap));void 0!==t.bumpMap&&(M.bumpMap=B(t.bumpMap));void 0!==t.bumpScale&&(M.bumpScale=t.bumpScale);void 0!==t.normalMap&&(M.normalMap=B(t.normalMap));void 0!==t.normalMapType&&(M.normalMapType=t.normalMapType);void 0!==t.normalScale&&(U=t.normalScale,!1===Array.isArray(U)&&(U=[U,U]),M.normalScale=(new Ye).fromArray(U));void 0!==t.displacementMap&&(M.displacementMap=B(t.displacementMap));void 0!==t.displacementScale&&
(M.displacementScale=t.displacementScale);void 0!==t.displacementBias&&(M.displacementBias=t.displacementBias);void 0!==t.roughnessMap&&(M.roughnessMap=B(t.roughnessMap));void 0!==t.metalnessMap&&(M.metalnessMap=B(t.metalnessMap));void 0!==t.emissiveMap&&(M.emissiveMap=B(t.emissiveMap));void 0!==t.emissiveIntensity&&(M.emissiveIntensity=t.emissiveIntensity);void 0!==t.specularMap&&(M.specularMap=B(t.specularMap));void 0!==t.envMap&&(M.envMap=B(t.envMap));void 0!==t.envMapIntensity&&(M.envMapIntensity=
t.envMapIntensity);void 0!==t.reflectivity&&(M.reflectivity=t.reflectivity);void 0!==t.refractionRatio&&(M.refractionRatio=t.refractionRatio);void 0!==t.lightMap&&(M.lightMap=B(t.lightMap));void 0!==t.lightMapIntensity&&(M.lightMapIntensity=t.lightMapIntensity);void 0!==t.aoMap&&(M.aoMap=B(t.aoMap));void 0!==t.aoMapIntensity&&(M.aoMapIntensity=t.aoMapIntensity);void 0!==t.gradientMap&&(M.gradientMap=B(t.gradientMap));void 0!==t.clearcoatMap&&(M.clearcoatMap=B(t.clearcoatMap));void 0!==t.clearcoatRoughnessMap&&
(M.clearcoatRoughnessMap=B(t.clearcoatRoughnessMap));void 0!==t.clearcoatNormalMap&&(M.clearcoatNormalMap=B(t.clearcoatNormalMap));void 0!==t.clearcoatNormalScale&&(M.clearcoatNormalScale=(new Ye).fromArray(t.clearcoatNormalScale));void 0!==t.transmission&&(M.transmission=t.transmission);void 0!==t.transmissionMap&&(M.transmissionMap=B(t.transmissionMap));return M};r.setTextures=function(t){(this||q).textures=t;return this||q};return D}(il),IZ={decodeText:function(A){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(A);
for(var D="",r=0,t=A.length;r<t;r++)D+=String.fromCharCode(A[r]);try{return decodeURIComponent(escape(D))}catch(B){return D}},extractUrlBase:function(A){var D=A.lastIndexOf("/");return-1===D?"./":A.substr(0,D+1)}};cG.prototype=Object.assign(Object.create(ya.prototype),{constructor:cG,isInstancedBufferGeometry:!0,copy:function(A){ya.prototype.copy.call(this||q,A);(this||q).instanceCount=A.instanceCount;return this||q},clone:function(){return(new (this||q).constructor).copy(this||q)},toJSON:function(){var A=
ya.prototype.toJSON.call(this||q);A.instanceCount=(this||q).instanceCount;A.isInstancedBufferGeometry=!0;return A}});TO.prototype=Object.assign(Object.create(Ia.prototype),{constructor:TO,isInstancedBufferAttribute:!0,copy:function(A){Ia.prototype.copy.call(this||q,A);(this||q).meshPerAttribute=A.meshPerAttribute;return this||q},toJSON:function(){var A=Ia.prototype.toJSON.call(this||q);A.meshPerAttribute=(this||q).meshPerAttribute;A.isInstancedBufferAttribute=!0;return A}});var Pea=function(A){function D(t){return A.call(this||
q,t)||this||q}p(D,A);var r=D.prototype;r.load=function(t,B,I,M){var U=this||q,Z=new Pp(U.manager);Z.setPath(U.path);Z.setRequestHeader(U.requestHeader);Z.setWithCredentials(U.withCredentials);Z.load(t,function(aa){try{B(U.parse(JSON.parse(aa)))}catch(oa){M?M(oa):console.error(oa),U.manager.itemError(t)}},I,M)};r.parse=function(t){function B(sb,nc){if(void 0!==I[nc])return I[nc];var oc=sb.interleavedBuffers[nc];var Fc=oc.buffer;void 0!==M[Fc]?Fc=M[Fc]:(sb=(new Uint32Array(sb.arrayBuffers[Fc])).buffer,
Fc=M[Fc]=sb);Fc=new iG[oc.type](Fc);Fc=new mo(Fc,oc.stride);Fc.uuid=oc.uuid;return I[nc]=Fc}var I={},M={},U=t.isInstancedBufferGeometry?new cG:new ya,Z=t.data.index;void 0!==Z&&(Z=new iG[Z.type](Z.array),U.setIndex(new Ia(Z,1)));Z=t.data.attributes;for(var aa in Z){var oa=Z[aa],wa=void 0;oa.isInterleavedBufferAttribute?(wa=B(t.data,oa.data),wa=new iv(wa,oa.itemSize,oa.offset,oa.normalized)):(wa=new iG[oa.type](oa.array),wa=new (oa.isInstancedBufferAttribute?TO:Ia)(wa,oa.itemSize,oa.normalized));void 0!==
oa.name&&(wa.name=oa.name);U.setAttribute(aa,wa)}if(aa=t.data.morphAttributes)for(var Oa in aa){Z=aa[Oa];oa=[];wa=0;for(var Ya=Z.length;wa<Ya;wa++){var ab=Z[wa],zb=void 0;ab.isInterleavedBufferAttribute?(zb=B(t.data,ab.data),zb=new iv(zb,ab.itemSize,ab.offset,ab.normalized)):(zb=new iG[ab.type](ab.array),zb=new Ia(zb,ab.itemSize,ab.normalized));void 0!==ab.name&&(zb.name=ab.name);oa.push(zb)}U.morphAttributes[Oa]=oa}t.data.morphTargetsRelative&&(U.morphTargetsRelative=!0);Oa=t.data.groups||t.data.drawcalls||
t.data.offsets;if(void 0!==Oa)for(aa=0,Z=Oa.length;aa!==Z;++aa)oa=Oa[aa],U.addGroup(oa.start,oa.count,oa.materialIndex);Oa=t.data.boundingSphere;void 0!==Oa&&(aa=new jc,void 0!==Oa.center&&aa.fromArray(Oa.center),U.boundingSphere=new ov(aa,Oa.radius));t.name&&(U.name=t.name);t.userData&&(U.userData=t.userData);return U};return D}(il),Uya=function(A){function D(t){return A.call(this||q,t)||this||q}p(D,A);var r=D.prototype;r.load=function(t,B,I,M){var U=this||q,Z=""===(this||q).path?IZ.extractUrlBase(t):
(this||q).path;(this||q).resourcePath=(this||q).resourcePath||Z;Z=new Pp((this||q).manager);Z.setPath((this||q).path);Z.setRequestHeader((this||q).requestHeader);Z.setWithCredentials((this||q).withCredentials);Z.load(t,function(aa){var oa=null;try{oa=JSON.parse(aa)}catch(wa){void 0!==M&&M(wa);console.error("THREE:ObjectLoader: Can't parse "+t+".",wa.message);return}aa=oa.metadata;void 0===aa||void 0===aa.type||"geometry"===aa.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+t):U.parse(oa,
B)},I,M)};r.parse=function(t,B){var I=this.parseAnimations(t.animations),M=this.parseShapes(t.shapes),U=this.parseGeometries(t.geometries,M);M=this.parseImages(t.images,function(){void 0!==B&&B(aa)});var Z=this.parseTextures(t.textures,M);Z=this.parseMaterials(t.materials,Z);var aa=this.parseObject(t.object,U,Z,I);t=this.parseSkeletons(t.skeletons,aa);this.bindSkeletons(aa,t);if(void 0!==B){t=!1;for(var oa in M)if(M[oa]instanceof HTMLImageElement){t=!0;break}!1===t&&B(aa)}return aa};r.parseShapes=
function(t){var B={};if(void 0!==t)for(var I=0,M=t.length;I<M;I++){var U=(new sv).fromJSON(t[I]);B[U.uuid]=U}return B};r.parseSkeletons=function(t,B){var I={},M={};B.traverse(function(aa){aa.isBone&&(M[aa.uuid]=aa)});if(void 0!==t){B=0;for(var U=t.length;B<U;B++){var Z=(new eZ).fromJSON(t[B],M);I[Z.uuid]=Z}}return I};r.parseGeometries=function(t,B){var I={};if(void 0!==t)for(var M=new Pea,U=0,Z=t.length;U<Z;U++){var aa=void 0;var oa=t[U];switch(oa.type){case "PlaneGeometry":case "PlaneBufferGeometry":aa=
new Qn[oa.type](oa.width,oa.height,oa.widthSegments,oa.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":aa=new Qn[oa.type](oa.width,oa.height,oa.depth,oa.widthSegments,oa.heightSegments,oa.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":aa=new Qn[oa.type](oa.radius,oa.segments,oa.thetaStart,oa.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":aa=new Qn[oa.type](oa.radiusTop,oa.radiusBottom,oa.height,oa.radialSegments,oa.heightSegments,
oa.openEnded,oa.thetaStart,oa.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":aa=new Qn[oa.type](oa.radius,oa.height,oa.radialSegments,oa.heightSegments,oa.openEnded,oa.thetaStart,oa.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":aa=new Qn[oa.type](oa.radius,oa.widthSegments,oa.heightSegments,oa.phiStart,oa.phiLength,oa.thetaStart,oa.thetaLength);break;case "DodecahedronGeometry":case "DodecahedronBufferGeometry":case "IcosahedronGeometry":case "IcosahedronBufferGeometry":case "OctahedronGeometry":case "OctahedronBufferGeometry":case "TetrahedronGeometry":case "TetrahedronBufferGeometry":aa=
new Qn[oa.type](oa.radius,oa.detail);break;case "RingGeometry":case "RingBufferGeometry":aa=new Qn[oa.type](oa.innerRadius,oa.outerRadius,oa.thetaSegments,oa.phiSegments,oa.thetaStart,oa.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":aa=new Qn[oa.type](oa.radius,oa.tube,oa.radialSegments,oa.tubularSegments,oa.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":aa=new Qn[oa.type](oa.radius,oa.tube,oa.tubularSegments,oa.radialSegments,oa.p,oa.q);break;case "TubeGeometry":case "TubeBufferGeometry":aa=
new Qn[oa.type]((new yZ[oa.path.type]).fromJSON(oa.path),oa.tubularSegments,oa.radius,oa.radialSegments,oa.closed);break;case "LatheGeometry":case "LatheBufferGeometry":aa=new Qn[oa.type](oa.points,oa.segments,oa.phiStart,oa.phiLength);break;case "PolyhedronGeometry":case "PolyhedronBufferGeometry":aa=new Qn[oa.type](oa.vertices,oa.indices,oa.radius,oa.details);break;case "ShapeGeometry":case "ShapeBufferGeometry":aa=[];for(var wa=0,Oa=oa.shapes.length;wa<Oa;wa++)aa.push(B[oa.shapes[wa]]);aa=new Qn[oa.type](aa,
oa.curveSegments);break;case "ExtrudeGeometry":case "ExtrudeBufferGeometry":aa=[];wa=0;for(Oa=oa.shapes.length;wa<Oa;wa++)aa.push(B[oa.shapes[wa]]);wa=oa.options.extrudePath;void 0!==wa&&(oa.options.extrudePath=(new yZ[wa.type]).fromJSON(wa));aa=new Qn[oa.type](aa,oa.options);break;case "BufferGeometry":case "InstancedBufferGeometry":aa=M.parse(oa);break;case "Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+
oa.type+'"');continue}aa.uuid=oa.uuid;void 0!==oa.name&&(aa.name=oa.name);!0===aa.isBufferGeometry&&void 0!==oa.userData&&(aa.userData=oa.userData);I[oa.uuid]=aa}return I};r.parseMaterials=function(t,B){var I={},M={};if(void 0!==t){var U=new Oea;U.setTextures(B);B=0;for(var Z=t.length;B<Z;B++){var aa=t[B];if("MultiMaterial"===aa.type){for(var oa=[],wa=0;wa<aa.materials.length;wa++){var Oa=aa.materials[wa];void 0===I[Oa.uuid]&&(I[Oa.uuid]=U.parse(Oa));oa.push(I[Oa.uuid])}M[aa.uuid]=oa}else void 0===
I[aa.uuid]&&(I[aa.uuid]=U.parse(aa)),M[aa.uuid]=I[aa.uuid]}}return M};r.parseAnimations=function(t){var B={};if(void 0!==t)for(var I=0;I<t.length;I++){var M=sG.parse(t[I]);B[M.uuid]=M}return B};r.parseImages=function(t,B){function I(sb){U.manager.itemStart(sb);return aa.load(sb,function(){U.manager.itemEnd(sb)},void 0,function(){U.manager.itemError(sb);U.manager.itemEnd(sb)})}function M(sb){return"string"===typeof sb?(sb=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(sb)?sb:U.resourcePath+sb,I(sb)):sb.data?{data:new iG[sb.type](sb.data),
width:sb.width,height:sb.height}:null}var U=this||q,Z={};if(void 0!==t&&0<t.length){B=new DY(B);var aa=new CP(B);aa.setCrossOrigin((this||q).crossOrigin);B=0;for(var oa=t.length;B<oa;B++){var wa=t[B],Oa=wa.url;if(Array.isArray(Oa)){Z[wa.uuid]=[];for(var Ya=0,ab=Oa.length;Ya<ab;Ya++){var zb=M(Oa[Ya]);null!==zb&&(zb instanceof HTMLImageElement?Z[wa.uuid].push(zb):Z[wa.uuid].push(new yB(zb.data,zb.width,zb.height)))}}else Oa=M(wa.url),null!==Oa&&(Z[wa.uuid]=Oa)}}return Z};r.parseTextures=function(t,
B){function I(Oa,Ya){if("number"===typeof Oa)return Oa;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Oa);return Ya[Oa]}var M={};if(void 0!==t)for(var U=0,Z=t.length;U<Z;U++){var aa=t[U];void 0===aa.image&&console.warn('THREE.ObjectLoader: No "image" specified for',aa.uuid);void 0===B[aa.image]&&console.warn("THREE.ObjectLoader: Undefined image",aa.image);var oa=void 0,wa=B[aa.image];Array.isArray(wa)?(oa=new OB(wa),6===wa.length&&(oa.needsUpdate=!0)):(oa=wa&&
wa.data?new yB(wa.data,wa.width,wa.height):new pn(wa),wa&&(oa.needsUpdate=!0));oa.uuid=aa.uuid;void 0!==aa.name&&(oa.name=aa.name);void 0!==aa.mapping&&(oa.mapping=I(aa.mapping,Tya));void 0!==aa.offset&&oa.offset.fromArray(aa.offset);void 0!==aa.repeat&&oa.repeat.fromArray(aa.repeat);void 0!==aa.center&&oa.center.fromArray(aa.center);void 0!==aa.rotation&&(oa.rotation=aa.rotation);void 0!==aa.wrap&&(oa.wrapS=I(aa.wrap[0],Qea),oa.wrapT=I(aa.wrap[1],Qea));void 0!==aa.format&&(oa.format=aa.format);void 0!==
aa.type&&(oa.type=aa.type);void 0!==aa.encoding&&(oa.encoding=aa.encoding);void 0!==aa.minFilter&&(oa.minFilter=I(aa.minFilter,Rea));void 0!==aa.magFilter&&(oa.magFilter=I(aa.magFilter,Rea));void 0!==aa.anisotropy&&(oa.anisotropy=aa.anisotropy);void 0!==aa.flipY&&(oa.flipY=aa.flipY);void 0!==aa.premultiplyAlpha&&(oa.premultiplyAlpha=aa.premultiplyAlpha);void 0!==aa.unpackAlignment&&(oa.unpackAlignment=aa.unpackAlignment);M[aa.uuid]=oa}return M};r.parseObject=function(t,B,I,M){function U(Oa){void 0===
B[Oa]&&console.warn("THREE.ObjectLoader: Undefined geometry",Oa);return B[Oa]}function Z(Oa){if(void 0!==Oa){if(Array.isArray(Oa)){for(var Ya=[],ab=0,zb=Oa.length;ab<zb;ab++){var sb=Oa[ab];void 0===I[sb]&&console.warn("THREE.ObjectLoader: Undefined material",sb);Ya.push(I[sb])}return Ya}void 0===I[Oa]&&console.warn("THREE.ObjectLoader: Undefined material",Oa);return I[Oa]}}switch(t.type){case "Scene":var aa=new gP;void 0!==t.background&&Number.isInteger(t.background)&&(aa.background=new Zf(t.background));
void 0!==t.fog&&("Fog"===t.fog.type?aa.fog=new bZ(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(aa.fog=new aZ(t.fog.color,t.fog.density)));break;case "PerspectiveCamera":aa=new Nb(t.fov,t.aspect,t.near,t.far);void 0!==t.focus&&(aa.focus=t.focus);void 0!==t.zoom&&(aa.zoom=t.zoom);void 0!==t.filmGauge&&(aa.filmGauge=t.filmGauge);void 0!==t.filmOffset&&(aa.filmOffset=t.filmOffset);void 0!==t.view&&(aa.view=Object.assign({},t.view));break;case "OrthographicCamera":aa=new xG(t.left,t.right,
t.top,t.bottom,t.near,t.far);void 0!==t.zoom&&(aa.zoom=t.zoom);void 0!==t.view&&(aa.view=Object.assign({},t.view));break;case "AmbientLight":aa=new FZ(t.color,t.intensity);break;case "DirectionalLight":aa=new EZ(t.color,t.intensity);break;case "PointLight":aa=new DZ(t.color,t.intensity,t.distance,t.decay);break;case "RectAreaLight":aa=new GZ(t.color,t.intensity,t.width,t.height);break;case "SpotLight":aa=new BZ(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case "HemisphereLight":aa=
new zZ(t.color,t.groundColor,t.intensity);break;case "LightProbe":aa=(new yG).fromJSON(t);break;case "SkinnedMesh":aa=U(t.geometry);var oa=Z(t.material);aa=new TF(aa,oa);void 0!==t.bindMode&&(aa.bindMode=t.bindMode);void 0!==t.bindMatrix&&aa.bindMatrix.fromArray(t.bindMatrix);void 0!==t.skeleton&&(aa.skeleton=t.skeleton);break;case "Mesh":aa=U(t.geometry);oa=Z(t.material);aa=new Sa(aa,oa);break;case "InstancedMesh":aa=U(t.geometry);oa=Z(t.material);var wa=t.instanceMatrix;aa=new KO(aa,oa,t.count);
aa.instanceMatrix=new Ia(new Float32Array(wa.array),16);break;case "LOD":aa=new dZ;break;case "Line":aa=new Tq(U(t.geometry),Z(t.material));break;case "LineLoop":aa=new gZ(U(t.geometry),Z(t.material));break;case "LineSegments":aa=new Nn(U(t.geometry),Z(t.material));break;case "PointCloud":case "Points":aa=new AB(U(t.geometry),Z(t.material));break;case "Sprite":aa=new kP(Z(t.material));break;case "Group":aa=new py;break;case "Bone":aa=new UF;break;default:aa=new P}aa.uuid=t.uuid;void 0!==t.name&&(aa.name=
t.name);void 0!==t.matrix?(aa.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(aa.matrixAutoUpdate=t.matrixAutoUpdate),aa.matrixAutoUpdate&&aa.matrix.decompose(aa.position,aa.quaternion,aa.scale)):(void 0!==t.position&&aa.position.fromArray(t.position),void 0!==t.rotation&&aa.rotation.fromArray(t.rotation),void 0!==t.quaternion&&aa.quaternion.fromArray(t.quaternion),void 0!==t.scale&&aa.scale.fromArray(t.scale));void 0!==t.castShadow&&(aa.castShadow=t.castShadow);void 0!==t.receiveShadow&&
(aa.receiveShadow=t.receiveShadow);t.shadow&&(void 0!==t.shadow.bias&&(aa.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(aa.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(aa.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&aa.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(aa.shadow.camera=this.parseObject(t.shadow.camera)));void 0!==t.visible&&(aa.visible=t.visible);void 0!==t.frustumCulled&&(aa.frustumCulled=t.frustumCulled);void 0!==
t.renderOrder&&(aa.renderOrder=t.renderOrder);void 0!==t.userData&&(aa.userData=t.userData);void 0!==t.layers&&(aa.layers.mask=t.layers);if(void 0!==t.children)for(wa=t.children,oa=0;oa<wa.length;oa++)aa.add(this.parseObject(wa[oa],B,I,M));if(void 0!==t.animations)for(wa=t.animations,oa=0;oa<wa.length;oa++)aa.animations.push(M[wa[oa]]);if("LOD"===t.type)for(void 0!==t.autoUpdate&&(aa.autoUpdate=t.autoUpdate),t=t.levels,M=0;M<t.length;M++)wa=t[M],oa=aa.getObjectByProperty("uuid",wa.object),void 0!==
oa&&aa.addLevel(oa,wa.distance);return aa};r.bindSkeletons=function(t,B){0!==Object.keys(B).length&&t.traverse(function(I){if(!0===I.isSkinnedMesh&&void 0!==I.skeleton){var M=B[I.skeleton];void 0===M?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",I.skeleton):I.bind(M,I.bindMatrix)}})};r.setTexturePath=function(t){console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().");return this.setResourcePath(t)};return D}(il),Tya={UVMapping:300,CubeReflectionMapping:301,
CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Qea={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Rea={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};GY.prototype=Object.assign(Object.create(il.prototype),{constructor:GY,isImageBitmapLoader:!0,setOptions:function(A){(this||
q).options=A;return this||q},load:function(A,D,r,t){void 0===A&&(A="");void 0!==(this||q).path&&(A=(this||q).path+A);A=(this||q).manager.resolveURL(A);var B=this||q,I=ry.get(A);if(void 0!==I)return B.manager.itemStart(A),setTimeout(function(){D&&D(I);B.manager.itemEnd(A)},0),I;r={};r.credentials="anonymous"===(this||q).crossOrigin?"same-origin":"include";r.headers=(this||q).requestHeader;fetch(A,r).then(function(M){return M.blob()}).then(function(M){return createImageBitmap(M,Object.assign(B.options,
{colorSpaceConversion:"none"}))}).then(function(M){ry.add(A,M);D&&D(M);B.manager.itemEnd(A)}).catch(function(M){t&&t(M);B.manager.itemError(A);B.manager.itemEnd(A)});B.manager.itemStart(A)}});var Sea=function(){function A(){(this||q).type="ShapePath";(this||q).color=new Zf;(this||q).subPaths=[];(this||q).currentPath=null}var D=A.prototype;D.moveTo=function(r,t){(this||q).currentPath=new vG;(this||q).subPaths.push((this||q).currentPath);(this||q).currentPath.moveTo(r,t);return this||q};D.lineTo=function(r,
t){(this||q).currentPath.lineTo(r,t);return this||q};D.quadraticCurveTo=function(r,t,B,I){(this||q).currentPath.quadraticCurveTo(r,t,B,I);return this||q};D.bezierCurveTo=function(r,t,B,I,M,U){(this||q).currentPath.bezierCurveTo(r,t,B,I,M,U);return this||q};D.splineThru=function(r){(this||q).currentPath.splineThru(r);return this||q};D.toShapes=function(r,t){function B(oc){for(var Fc=[],Sc=0,rd=oc.length;Sc<rd;Sc++){var jd=oc[Sc],Tc=new sv;Tc.curves=jd.curves;Fc.push(Tc)}return Fc}function I(oc,Fc){for(var Sc=
Fc.length,rd=!1,jd=Sc-1,Tc=0;Tc<Sc;jd=Tc++){var Uc=Fc[jd],qd=Fc[Tc],Ld=qd.x-Uc.x,Fd=qd.y-Uc.y;if(Math.abs(Fd)>Number.EPSILON){if(0>Fd&&(Uc=Fc[Tc],Ld=-Ld,qd=Fc[jd],Fd=-Fd),!(oc.y<Uc.y||oc.y>qd.y))if(oc.y===Uc.y){if(oc.x===Uc.x)return!0}else{jd=Fd*(oc.x-Uc.x)-Ld*(oc.y-Uc.y);if(0===jd)return!0;0>jd||(rd=!rd)}}else if(oc.y===Uc.y&&(qd.x<=oc.x&&oc.x<=Uc.x||Uc.x<=oc.x&&oc.x<=qd.x))return!0}return rd}var M=vt.isClockWise,U=(this||q).subPaths;if(0===U.length)return[];if(!0===t)return B(U);t=[];if(1===U.length){var Z=
U[0];var aa=new sv;aa.curves=Z.curves;t.push(aa);return t}var oa=!M(U[0].getPoints());oa=r?!oa:oa;aa=[];var wa=[],Oa=[],Ya=0;wa[Ya]=void 0;Oa[Ya]=[];for(var ab=0,zb=U.length;ab<zb;ab++){Z=U[ab];var sb=Z.getPoints();var nc=M(sb);(nc=r?!nc:nc)?(!oa&&wa[Ya]&&Ya++,wa[Ya]={s:new sv,p:sb},wa[Ya].s.curves=Z.curves,oa&&Ya++,Oa[Ya]=[]):Oa[Ya].push({h:Z,p:sb[0]})}if(!wa[0])return B(U);if(1<wa.length){r=!1;M=[];U=0;for(Z=wa.length;U<Z;U++)aa[U]=[];U=0;for(Z=wa.length;U<Z;U++)for(nc=Oa[U],oa=0;oa<nc.length;oa++){Ya=
nc[oa];sb=!0;for(ab=0;ab<wa.length;ab++)I(Ya.p,wa[ab].p)&&(U!==ab&&M.push({froms:U,tos:ab,hole:oa}),sb?(sb=!1,aa[ab].push(Ya)):r=!0);sb&&aa[U].push(Ya)}0<M.length&&(r||(Oa=aa))}M=0;for(U=wa.length;M<U;M++)for(aa=wa[M].s,t.push(aa),r=Oa[M],Z=0,nc=r.length;Z<nc;Z++)aa.holes.push(r[Z].h);return t};return A}(),JZ=function(){function A(D){(this||q).type="Font";(this||q).data=D}A.prototype.generateShapes=function(D,r){void 0===r&&(r=100);var t=[],B=r;r=(this||q).data;var I=Array.from(D);B/=r.resolution;
var M=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*B;D=[];for(var U=0,Z=0,aa=0;aa<I.length;aa++){var oa=I[aa];if("\n"===oa)U=0,Z-=M;else{var wa=oa;oa=B;var Oa=U,Ya=Z,ab=r,zb=ab.glyphs[wa]||ab.glyphs["?"];if(zb){wa=new Sea;if(zb.o){ab=zb._cachedOutline||(zb._cachedOutline=zb.o.split(" "));for(var sb=0,nc=ab.length;sb<nc;)switch(ab[sb++]){case "m":var oc=ab[sb++]*oa+Oa;var Fc=ab[sb++]*oa+Ya;wa.moveTo(oc,Fc);break;case "l":oc=ab[sb++]*oa+Oa;Fc=ab[sb++]*oa+Ya;wa.lineTo(oc,Fc);break;case "q":var Sc=
ab[sb++]*oa+Oa;var rd=ab[sb++]*oa+Ya;var jd=ab[sb++]*oa+Oa;var Tc=ab[sb++]*oa+Ya;wa.quadraticCurveTo(jd,Tc,Sc,rd);break;case "b":Sc=ab[sb++]*oa+Oa,rd=ab[sb++]*oa+Ya,jd=ab[sb++]*oa+Oa,Tc=ab[sb++]*oa+Ya,oc=ab[sb++]*oa+Oa,Fc=ab[sb++]*oa+Ya,wa.bezierCurveTo(jd,Tc,oc,Fc,Sc,rd)}}oa={offsetX:zb.ha*oa,path:wa}}else console.error('THREE.Font: character "'+wa+'" does not exists in font family '+ab.familyName+"."),oa=void 0;U+=oa.offsetX;D.push(oa.path)}}r=0;for(I=D.length;r<I;r++)Array.prototype.push.apply(t,
D[r].toShapes());return t};return A}();JZ.prototype.isFont=!0;var Vya=function(A){function D(t){return A.call(this||q,t)||this||q}p(D,A);var r=D.prototype;r.load=function(t,B,I,M){var U=this||q,Z=new Pp((this||q).manager);Z.setPath((this||q).path);Z.setRequestHeader((this||q).requestHeader);Z.setWithCredentials(U.withCredentials);Z.load(t,function(aa){try{var oa=JSON.parse(aa)}catch(wa){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),oa=JSON.parse(aa.substring(65,
aa.length-2))}aa=U.parse(oa);B&&B(aa)},I,M)};r.parse=function(t){return new JZ(t)};return D}(il),HP,KZ={getContext:function(){void 0===HP&&(HP=new (window.AudioContext||window.webkitAudioContext));return HP},setContext:function(A){HP=A}},Tea=function(A){function D(r){return A.call(this||q,r)||this||q}p(D,A);D.prototype.load=function(r,t,B,I){var M=this||q,U=new Pp((this||q).manager);U.setResponseType("arraybuffer");U.setPath((this||q).path);U.setRequestHeader((this||q).requestHeader);U.setWithCredentials((this||
q).withCredentials);U.load(r,function(Z){try{var aa=Z.slice(0);KZ.getContext().decodeAudioData(aa,function(oa){t(oa)})}catch(oa){I?I(oa):console.error(oa),M.manager.itemError(r)}},B,I)};return D}(il),Uea=function(A){function D(r,t,B){void 0===B&&(B=1);B=A.call(this||q,void 0,B)||this||q;r=(new Zf).set(r);var I=(new Zf).set(t);t=new jc(r.r,r.g,r.b);r=new jc(I.r,I.g,I.b);I=Math.sqrt(Math.PI);var M=I*Math.sqrt(.75);B.sh.coefficients[0].copy(t).add(r).multiplyScalar(I);B.sh.coefficients[1].copy(t).sub(r).multiplyScalar(M);
return B}p(D,A);return D}(yG);Uea.prototype.isHemisphereLightProbe=!0;var Vea=function(A){function D(r,t){void 0===t&&(t=1);t=A.call(this||q,void 0,t)||this||q;r=(new Zf).set(r);t.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI));return t}p(D,A);return D}(yG);Vea.prototype.isAmbientLightProbe=!0;var Wea=new Fg,Xea=new Fg,Wya=function(){function A(){(this||q).type="StereoCamera";(this||q).aspect=1;(this||q).eyeSep=.064;(this||q).cameraL=new Nb;(this||q).cameraL.layers.enable(1);
(this||q).cameraL.matrixAutoUpdate=!1;(this||q).cameraR=new Nb;(this||q).cameraR.layers.enable(2);(this||q).cameraR.matrixAutoUpdate=!1;(this||q)._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}A.prototype.update=function(D){var r=(this||q)._cache;if(r.focus!==D.focus||r.fov!==D.fov||r.aspect!==D.aspect*(this||q).aspect||r.near!==D.near||r.far!==D.far||r.zoom!==D.zoom||r.eyeSep!==(this||q).eyeSep){r.focus=D.focus;r.fov=D.fov;r.aspect=D.aspect*(this||q).aspect;r.near=
D.near;r.far=D.far;r.zoom=D.zoom;r.eyeSep=(this||q).eyeSep;var t=D.projectionMatrix.clone(),B=r.eyeSep/2,I=B*r.near/r.focus,M=r.near*Math.tan(oh.DEG2RAD*r.fov*.5)/r.zoom;Xea.elements[12]=-B;Wea.elements[12]=B;B=-M*r.aspect+I;var U=M*r.aspect+I;t.elements[0]=2*r.near/(U-B);t.elements[8]=(U+B)/(U-B);(this||q).cameraL.projectionMatrix.copy(t);B=-M*r.aspect-I;U=M*r.aspect-I;t.elements[0]=2*r.near/(U-B);t.elements[8]=(U+B)/(U-B);(this||q).cameraR.projectionMatrix.copy(t)}(this||q).cameraL.matrixWorld.copy(D.matrixWorld).multiply(Xea);
(this||q).cameraR.matrixWorld.copy(D.matrixWorld).multiply(Wea)};return A}(),Yea=function(){function A(r){(this||q).autoStart=void 0!==r?r:!0;(this||q).startTime=0;(this||q).oldTime=0;(this||q).elapsedTime=0;(this||q).running=!1}var D=A.prototype;D.start=function(){(this||q).startTime=Qda();(this||q).oldTime=(this||q).startTime;(this||q).elapsedTime=0;(this||q).running=!0};D.stop=function(){this.getElapsedTime();(this||q).running=!1;(this||q).autoStart=!1};D.getElapsedTime=function(){this.getDelta();
return(this||q).elapsedTime};D.getDelta=function(){var r=0;if((this||q).autoStart&&!(this||q).running)return this.start(),0;if((this||q).running){var t=Qda();r=(t-(this||q).oldTime)/1E3;(this||q).oldTime=t;(this||q).elapsedTime+=r}return r};return A}(),sy=new jc,Zea=new Cm,Xya=new jc,ty=new jc,Yya=function(A){function D(){var t=A.call(this||q)||this||q;t.type="AudioListener";t.context=KZ.getContext();t.gain=t.context.createGain();t.gain.connect(t.context.destination);t.filter=null;t.timeDelta=0;t._clock=
new Yea;return t}p(D,A);var r=D.prototype;r.getInput=function(){return(this||q).gain};r.removeFilter=function(){null!==(this||q).filter&&((this||q).gain.disconnect((this||q).filter),(this||q).filter.disconnect((this||q).context.destination),(this||q).gain.connect((this||q).context.destination),(this||q).filter=null);return this||q};r.getFilter=function(){return(this||q).filter};r.setFilter=function(t){null!==(this||q).filter?((this||q).gain.disconnect((this||q).filter),(this||q).filter.disconnect((this||
q).context.destination)):(this||q).gain.disconnect((this||q).context.destination);(this||q).filter=t;(this||q).gain.connect((this||q).filter);(this||q).filter.connect((this||q).context.destination);return this||q};r.getMasterVolume=function(){return(this||q).gain.gain.value};r.setMasterVolume=function(t){(this||q).gain.gain.setTargetAtTime(t,(this||q).context.currentTime,.01);return this||q};r.updateMatrixWorld=function(t){A.prototype.updateMatrixWorld.call(this||q,t);t=(this||q).context.listener;
var B=(this||q).up;(this||q).timeDelta=(this||q)._clock.getDelta();(this||q).matrixWorld.decompose(sy,Zea,Xya);ty.set(0,0,-1).applyQuaternion(Zea);if(t.positionX){var I=(this||q).context.currentTime+(this||q).timeDelta;t.positionX.linearRampToValueAtTime(sy.x,I);t.positionY.linearRampToValueAtTime(sy.y,I);t.positionZ.linearRampToValueAtTime(sy.z,I);t.forwardX.linearRampToValueAtTime(ty.x,I);t.forwardY.linearRampToValueAtTime(ty.y,I);t.forwardZ.linearRampToValueAtTime(ty.z,I);t.upX.linearRampToValueAtTime(B.x,
I);t.upY.linearRampToValueAtTime(B.y,I);t.upZ.linearRampToValueAtTime(B.z,I)}else t.setPosition(sy.x,sy.y,sy.z),t.setOrientation(ty.x,ty.y,ty.z,B.x,B.y,B.z)};return D}(P),LZ=function(A){function D(t){var B=A.call(this||q)||this||q;B.type="Audio";B.listener=t;B.context=t.context;B.gain=B.context.createGain();B.gain.connect(t.getInput());B.autoplay=!1;B.buffer=null;B.detune=0;B.loop=!1;B.loopStart=0;B.loopEnd=0;B.offset=0;B.duration=void 0;B.playbackRate=1;B.isPlaying=!1;B.hasPlaybackControl=!0;B.source=
null;B.sourceType="empty";B._startedAt=0;B._progress=0;B._connected=!1;B.filters=[];return B}p(D,A);var r=D.prototype;r.getOutput=function(){return(this||q).gain};r.setNodeSource=function(t){(this||q).hasPlaybackControl=!1;(this||q).sourceType="audioNode";(this||q).source=t;this.connect();return this||q};r.setMediaElementSource=function(t){(this||q).hasPlaybackControl=!1;(this||q).sourceType="mediaNode";(this||q).source=(this||q).context.createMediaElementSource(t);this.connect();return this||q};
r.setMediaStreamSource=function(t){(this||q).hasPlaybackControl=!1;(this||q).sourceType="mediaStreamNode";(this||q).source=(this||q).context.createMediaStreamSource(t);this.connect();return this||q};r.setBuffer=function(t){(this||q).buffer=t;(this||q).sourceType="buffer";(this||q).autoplay&&this.play();return this||q};r.play=function(t){void 0===t&&(t=0);if(!0===(this||q).isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===(this||q).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return(this||q)._startedAt=(this||q).context.currentTime+t,t=(this||q).context.createBufferSource(),t.buffer=(this||q).buffer,t.loop=(this||q).loop,t.loopStart=(this||q).loopStart,t.loopEnd=(this||q).loopEnd,t.onended=(this||q).onEnded.bind(this||q),t.start((this||q)._startedAt,(this||q)._progress+(this||q).offset,(this||q).duration),(this||q).isPlaying=!0,(this||q).source=t,this.setDetune((this||q).detune),this.setPlaybackRate((this||q).playbackRate),this.connect()};r.pause=function(){if(!1===
(this||q).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===(this||q).isPlaying&&((this||q)._progress+=Math.max((this||q).context.currentTime-(this||q)._startedAt,0)*(this||q).playbackRate,!0===(this||q).loop&&((this||q)._progress%=(this||q).duration||(this||q).buffer.duration),(this||q).source.stop(),(this||q).source.onended=null,(this||q).isPlaying=!1),this||q};r.stop=function(){if(!1===(this||q).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return(this||q)._progress=0,(this||q).source.stop(),(this||q).source.onended=null,(this||q).isPlaying=!1,this||q};r.connect=function(){if(0<(this||q).filters.length){(this||q).source.connect((this||q).filters[0]);for(var t=1,B=(this||q).filters.length;t<B;t++)(this||q).filters[t-1].connect((this||q).filters[t]);(this||q).filters[(this||q).filters.length-1].connect(this.getOutput())}else(this||q).source.connect(this.getOutput());(this||q)._connected=!0;return this||q};r.disconnect=function(){if(0<
(this||q).filters.length){(this||q).source.disconnect((this||q).filters[0]);for(var t=1,B=(this||q).filters.length;t<B;t++)(this||q).filters[t-1].disconnect((this||q).filters[t]);(this||q).filters[(this||q).filters.length-1].disconnect(this.getOutput())}else(this||q).source.disconnect(this.getOutput());(this||q)._connected=!1;return this||q};r.getFilters=function(){return(this||q).filters};r.setFilters=function(t){t||(t=[]);!0===(this||q)._connected?(this.disconnect(),(this||q).filters=t.slice(),
this.connect()):(this||q).filters=t.slice();return this||q};r.setDetune=function(t){(this||q).detune=t;if(void 0!==(this||q).source.detune)return!0===(this||q).isPlaying&&(this||q).source.detune.setTargetAtTime((this||q).detune,(this||q).context.currentTime,.01),this||q};r.getDetune=function(){return(this||q).detune};r.getFilter=function(){return this.getFilters()[0]};r.setFilter=function(t){return this.setFilters(t?[t]:[])};r.setPlaybackRate=function(t){if(!1===(this||q).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return(this||q).playbackRate=t,!0===(this||q).isPlaying&&(this||q).source.playbackRate.setTargetAtTime((this||q).playbackRate,(this||q).context.currentTime,.01),this||q};r.getPlaybackRate=function(){return(this||q).playbackRate};r.onEnded=function(){(this||q).isPlaying=!1};r.getLoop=function(){return!1===(this||q).hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):(this||q).loop};r.setLoop=function(t){if(!1===(this||q).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return(this||q).loop=t,!0===(this||q).isPlaying&&((this||q).source.loop=(this||q).loop),this||q};r.setLoopStart=function(t){(this||q).loopStart=t;return this||q};r.setLoopEnd=function(t){(this||q).loopEnd=t;return this||q};r.getVolume=function(){return(this||q).gain.gain.value};r.setVolume=function(t){(this||q).gain.gain.setTargetAtTime(t,(this||q).context.currentTime,.01);return this||q};return D}(P),uy=new jc,$ea=new Cm,Zya=new jc,vy=new jc,$ya=function(A){function D(t){t=A.call(this||q,t)||
this||q;t.panner=t.context.createPanner();t.panner.panningModel="HRTF";t.panner.connect(t.gain);return t}p(D,A);var r=D.prototype;r.getOutput=function(){return(this||q).panner};r.getRefDistance=function(){return(this||q).panner.refDistance};r.setRefDistance=function(t){(this||q).panner.refDistance=t;return this||q};r.getRolloffFactor=function(){return(this||q).panner.rolloffFactor};r.setRolloffFactor=function(t){(this||q).panner.rolloffFactor=t;return this||q};r.getDistanceModel=function(){return(this||
q).panner.distanceModel};r.setDistanceModel=function(t){(this||q).panner.distanceModel=t;return this||q};r.getMaxDistance=function(){return(this||q).panner.maxDistance};r.setMaxDistance=function(t){(this||q).panner.maxDistance=t;return this||q};r.setDirectionalCone=function(t,B,I){(this||q).panner.coneInnerAngle=t;(this||q).panner.coneOuterAngle=B;(this||q).panner.coneOuterGain=I;return this||q};r.updateMatrixWorld=function(t){A.prototype.updateMatrixWorld.call(this||q,t);if(!0!==(this||q).hasPlaybackControl||
!1!==(this||q).isPlaying)if((this||q).matrixWorld.decompose(uy,$ea,Zya),vy.set(0,0,1).applyQuaternion($ea),t=(this||q).panner,t.positionX){var B=(this||q).context.currentTime+(this||q).listener.timeDelta;t.positionX.linearRampToValueAtTime(uy.x,B);t.positionY.linearRampToValueAtTime(uy.y,B);t.positionZ.linearRampToValueAtTime(uy.z,B);t.orientationX.linearRampToValueAtTime(vy.x,B);t.orientationY.linearRampToValueAtTime(vy.y,B);t.orientationZ.linearRampToValueAtTime(vy.z,B)}else t.setPosition(uy.x,
uy.y,uy.z),t.setOrientation(vy.x,vy.y,vy.z)};return D}(LZ),afa=function(){function A(r,t){void 0===t&&(t=2048);(this||q).analyser=r.context.createAnalyser();(this||q).analyser.fftSize=t;(this||q).data=new Uint8Array((this||q).analyser.frequencyBinCount);r.getOutput().connect((this||q).analyser)}var D=A.prototype;D.getFrequencyData=function(){(this||q).analyser.getByteFrequencyData((this||q).data);return(this||q).data};D.getAverageFrequency=function(){for(var r=0,t=this.getFrequencyData(),B=0;B<t.length;B++)r+=
t[B];return r/t.length};return A}(),bfa=function(){function A(r,t,B){(this||q).binding=r;(this||q).valueSize=B;switch(t){case "quaternion":r=(this||q)._slerp;t=(this||q)._slerpAdditive;var I=(this||q)._setAdditiveIdentityQuaternion;(this||q).buffer=new Float64Array(6*B);(this||q)._workIndex=5;break;case "string":case "bool":r=(this||q)._select;t=(this||q)._select;I=(this||q)._setAdditiveIdentityOther;(this||q).buffer=Array(5*B);break;default:r=(this||q)._lerp,t=(this||q)._lerpAdditive,I=(this||q)._setAdditiveIdentityNumeric,
(this||q).buffer=new Float64Array(5*B)}(this||q)._mixBufferRegion=r;(this||q)._mixBufferRegionAdditive=t;(this||q)._setIdentity=I;(this||q)._origIndex=3;(this||q)._addIndex=4;(this||q).cumulativeWeight=0;(this||q).cumulativeWeightAdditive=0;(this||q).useCount=0;(this||q).referenceCount=0}var D=A.prototype;D.accumulate=function(r,t){var B=(this||q).buffer,I=(this||q).valueSize;r=r*I+I;var M=(this||q).cumulativeWeight;if(0===M){for(M=0;M!==I;++M)B[r+M]=B[M];M=t}else M+=t,this._mixBufferRegion(B,r,0,
t/M,I);(this||q).cumulativeWeight=M};D.accumulateAdditive=function(r){var t=(this||q).buffer,B=(this||q).valueSize,I=B*(this||q)._addIndex;0===(this||q).cumulativeWeightAdditive&&this._setIdentity();this._mixBufferRegionAdditive(t,I,0,r,B);(this||q).cumulativeWeightAdditive+=r};D.apply=function(r){var t=(this||q).valueSize,B=(this||q).buffer;r=r*t+t;var I=(this||q).cumulativeWeight,M=(this||q).cumulativeWeightAdditive,U=(this||q).binding;(this||q).cumulativeWeight=0;(this||q).cumulativeWeightAdditive=
0;1>I&&this._mixBufferRegion(B,r,t*(this||q)._origIndex,1-I,t);0<M&&this._mixBufferRegionAdditive(B,r,(this||q)._addIndex*t,1,t);I=t;for(M=t+t;I!==M;++I)if(B[I]!==B[I+t]){U.setValue(B,r);break}};D.saveOriginalState=function(){var r=(this||q).buffer,t=(this||q).valueSize,B=t*(this||q)._origIndex;(this||q).binding.getValue(r,B);for(var I=t;I!==B;++I)r[I]=r[B+I%t];this._setIdentity();(this||q).cumulativeWeight=0;(this||q).cumulativeWeightAdditive=0};D.restoreOriginalState=function(){(this||q).binding.setValue((this||
q).buffer,3*(this||q).valueSize)};D._setAdditiveIdentityNumeric=function(){for(var r=(this||q)._addIndex*(this||q).valueSize,t=r+(this||q).valueSize;r<t;r++)(this||q).buffer[r]=0};D._setAdditiveIdentityQuaternion=function(){this._setAdditiveIdentityNumeric();(this||q).buffer[(this||q)._addIndex*(this||q).valueSize+3]=1};D._setAdditiveIdentityOther=function(){for(var r=(this||q)._origIndex*(this||q).valueSize,t=(this||q)._addIndex*(this||q).valueSize,B=0;B<(this||q).valueSize;B++)(this||q).buffer[t+
B]=(this||q).buffer[r+B]};D._select=function(r,t,B,I,M){if(.5<=I)for(I=0;I!==M;++I)r[t+I]=r[B+I]};D._slerp=function(r,t,B,I){Cm.slerpFlat(r,t,r,t,r,B,I)};D._slerpAdditive=function(r,t,B,I,M){M*=(this||q)._workIndex;Cm.multiplyQuaternionsFlat(r,M,r,t,r,B);Cm.slerpFlat(r,t,r,t,r,M,I)};D._lerp=function(r,t,B,I,M){for(var U=1-I,Z=0;Z!==M;++Z){var aa=t+Z;r[aa]=r[aa]*U+r[B+Z]*I}};D._lerpAdditive=function(r,t,B,I,M){for(var U=0;U!==M;++U){var Z=t+U;r[Z]+=r[B+U]*I}};return A}(),aza=/[\[\]\.:\/]/g,bza="[^"+
"\\[\\]\\.:\\/".replace("\\.","")+"]",cza=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),dza=/(WCOD+)?/.source.replace("WCOD",bza),eza=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),fza=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),gza=new RegExp("^"+cza+dza+eza+fza+"$"),hza=["material","materials","bones"];Object.assign(Rda.prototype,{getValue:function(A,D){this.bind();var r=(this||q)._bindings[(this||q)._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(A,
D)},setValue:function(A,D){for(var r=(this||q)._bindings,t=(this||q)._targetGroup.nCachedObjects_,B=r.length;t!==B;++t)r[t].setValue(A,D)},bind:function(){for(var A=(this||q)._bindings,D=(this||q)._targetGroup.nCachedObjects_,r=A.length;D!==r;++D)A[D].bind()},unbind:function(){for(var A=(this||q)._bindings,D=(this||q)._targetGroup.nCachedObjects_,r=A.length;D!==r;++D)A[D].unbind()}});Object.assign(on,{Composite:Rda,create:function(A,D,r){return A&&A.isAnimationObjectGroup?new on.Composite(A,D,r):
new on(A,D,r)},sanitizeNodeName:function(A){return A.replace(/\s/g,"_").replace(aza,"")},parseTrackName:function(A){var D=gza.exec(A);if(!D)throw Error("PropertyBinding: Cannot parse trackName: "+A);D={nodeName:D[2],objectName:D[3],objectIndex:D[4],propertyName:D[5],propertyIndex:D[6]};var r=D.nodeName&&D.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var t=D.nodeName.substring(r+1);-1!==hza.indexOf(t)&&(D.nodeName=D.nodeName.substring(0,r),D.objectName=t)}if(null===D.propertyName||0===D.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+
A);return D},findNode:function(A,D){if(!D||""===D||"."===D||-1===D||D===A.name||D===A.uuid)return A;if(A.skeleton){var r=A.skeleton.getBoneByName(D);if(void 0!==r)return r}return A.children&&(A=function I(B){for(var M=0;M<B.length;M++){var U=B[M];if(U.name===D||U.uuid===D||(U=I(U.children)))return U}return null}(A.children))?A:null}});Object.assign(on.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},
Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(A,D){A[D]=(this||q).node[(this||q).propertyName]},function(A,D){for(var r=(this||q).resolvedProperty,t=0,B=r.length;t!==B;++t)A[D++]=r[t]},function(A,D){A[D]=(this||q).resolvedProperty[(this||q).propertyIndex]},function(A,D){(this||q).resolvedProperty.toArray(A,D)}],SetterByBindingTypeAndVersioning:[[function(A,D){(this||q).targetObject[(this||q).propertyName]=A[D]},function(A,D){(this||q).targetObject[(this||
q).propertyName]=A[D];(this||q).targetObject.needsUpdate=!0},function(A,D){(this||q).targetObject[(this||q).propertyName]=A[D];(this||q).targetObject.matrixWorldNeedsUpdate=!0}],[function(A,D){for(var r=(this||q).resolvedProperty,t=0,B=r.length;t!==B;++t)r[t]=A[D++]},function(A,D){for(var r=(this||q).resolvedProperty,t=0,B=r.length;t!==B;++t)r[t]=A[D++];(this||q).targetObject.needsUpdate=!0},function(A,D){for(var r=(this||q).resolvedProperty,t=0,B=r.length;t!==B;++t)r[t]=A[D++];(this||q).targetObject.matrixWorldNeedsUpdate=
!0}],[function(A,D){(this||q).resolvedProperty[(this||q).propertyIndex]=A[D]},function(A,D){(this||q).resolvedProperty[(this||q).propertyIndex]=A[D];(this||q).targetObject.needsUpdate=!0},function(A,D){(this||q).resolvedProperty[(this||q).propertyIndex]=A[D];(this||q).targetObject.matrixWorldNeedsUpdate=!0}],[function(A,D){(this||q).resolvedProperty.fromArray(A,D)},function(A,D){(this||q).resolvedProperty.fromArray(A,D);(this||q).targetObject.needsUpdate=!0},function(A,D){(this||q).resolvedProperty.fromArray(A,
D);(this||q).targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(A,D){this.bind();this.getValue(A,D)},setValue:function(A,D){this.bind();this.setValue(A,D)},bind:function(){var A=(this||q).node,D=(this||q).parsedPath,r=D.objectName,t=D.propertyName,B=D.propertyIndex;A||(A=on.findNode((this||q).rootNode,D.nodeName)||(this||q).rootNode,(this||q).node=A);(this||q).getValue=(this||q)._getValue_unavailable;(this||q).setValue=(this||q)._setValue_unavailable;if(A){if(r){var I=D.objectIndex;switch(r){case "materials":if(!A.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",
this||q);return}if(!A.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this||q);return}A=A.material.materials;break;case "bones":if(!A.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this||q);return}A=A.skeleton.bones;for(r=0;r<A.length;r++)if(A[r].name===I){I=r;break}break;default:if(void 0===A[r]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",
this||q);return}A=A[r]}if(void 0!==I){if(void 0===A[I]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this||q,A);return}A=A[I]}}I=A[t];if(void 0===I)console.error("THREE.PropertyBinding: Trying to update property for track: "+D.nodeName+"."+t+" but it wasn't found.",A);else{D=(this||q).Versioning.None;(this||q).targetObject=A;void 0!==A.needsUpdate?D=(this||q).Versioning.NeedsUpdate:void 0!==A.matrixWorldNeedsUpdate&&(D=(this||q).Versioning.MatrixWorldNeedsUpdate);
r=(this||q).BindingType.Direct;if(void 0!==B){if("morphTargetInfluences"===t){if(!A.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this||q);return}if(A.geometry.isBufferGeometry){if(!A.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this||q);return}void 0!==A.morphTargetDictionary[B]&&(B=A.morphTargetDictionary[B])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",
this||q);return}}r=(this||q).BindingType.ArrayElement;(this||q).resolvedProperty=I;(this||q).propertyIndex=B}else void 0!==I.fromArray&&void 0!==I.toArray?(r=(this||q).BindingType.HasFromToArray,(this||q).resolvedProperty=I):Array.isArray(I)?(r=(this||q).BindingType.EntireArray,(this||q).resolvedProperty=I):(this||q).propertyName=t;(this||q).getValue=(this||q).GetterByBindingType[r];(this||q).setValue=(this||q).SetterByBindingTypeAndVersioning[r][D]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+
(this||q).path+" but it wasn't found.")},unbind:function(){(this||q).node=null;(this||q).getValue=(this||q)._getValue_unbound;(this||q).setValue=(this||q)._setValue_unbound}});Object.assign(on.prototype,{_getValue_unbound:on.prototype.getValue,_setValue_unbound:on.prototype.setValue});var cfa=function(){function A(){(this||q).uuid=oh.generateUUID();(this||q)._objects=Array.prototype.slice.call(arguments);(this||q).nCachedObjects_=0;var r={};(this||q)._indicesByUUID=r;for(var t=0,B=arguments.length;t!==
B;++t)r[arguments[t].uuid]=t;(this||q)._paths=[];(this||q)._parsedPaths=[];(this||q)._bindings=[];(this||q)._bindingsIndicesByPath={};var I=this||q;(this||q).stats={objects:{get total(){return I._objects.length},get inUse(){return(this||q).total-I.nCachedObjects_}},get bindingsPerObject(){return I._bindings.length}}}var D=A.prototype;D.add=function(){for(var r=(this||q)._objects,t=(this||q)._indicesByUUID,B=(this||q)._paths,I=(this||q)._parsedPaths,M=(this||q)._bindings,U=M.length,Z=void 0,aa=r.length,
oa=(this||q).nCachedObjects_,wa=0,Oa=arguments.length;wa!==Oa;++wa){var Ya=arguments[wa],ab=Ya.uuid,zb=t[ab];if(void 0===zb){zb=aa++;t[ab]=zb;r.push(Ya);zb=0;for(var sb=U;zb!==sb;++zb)M[zb].push(new on(Ya,B[zb],I[zb]))}else if(zb<oa){Z=r[zb];sb=--oa;var nc=r[sb];t[nc.uuid]=zb;r[zb]=nc;t[ab]=sb;r[sb]=Ya;ab=0;for(nc=U;ab!==nc;++ab){var oc=M[ab],Fc=oc[zb];oc[zb]=oc[sb];void 0===Fc&&(Fc=new on(Ya,B[ab],I[ab]));oc[sb]=Fc}}else r[zb]!==Z&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}(this||
q).nCachedObjects_=oa};D.remove=function(){for(var r=(this||q)._objects,t=(this||q)._indicesByUUID,B=(this||q)._bindings,I=B.length,M=(this||q).nCachedObjects_,U=0,Z=arguments.length;U!==Z;++U){var aa=arguments[U],oa=aa.uuid,wa=t[oa];if(void 0!==wa&&wa>=M){var Oa=M++,Ya=r[Oa];t[Ya.uuid]=wa;r[wa]=Ya;t[oa]=Oa;r[Oa]=aa;aa=0;for(oa=I;aa!==oa;++aa){Ya=B[aa];var ab=Ya[wa];Ya[wa]=Ya[Oa];Ya[Oa]=ab}}}(this||q).nCachedObjects_=M};D.uncache=function(){for(var r=(this||q)._objects,t=(this||q)._indicesByUUID,
B=(this||q)._bindings,I=B.length,M=(this||q).nCachedObjects_,U=r.length,Z=0,aa=arguments.length;Z!==aa;++Z){var oa=arguments[Z].uuid,wa=t[oa];if(void 0!==wa)if(delete t[oa],wa<M){oa=--M;var Oa=r[oa],Ya=--U,ab=r[Ya];t[Oa.uuid]=wa;r[wa]=Oa;t[ab.uuid]=oa;r[oa]=ab;r.pop();Oa=0;for(ab=I;Oa!==ab;++Oa){var zb=B[Oa],sb=zb[Ya];zb[wa]=zb[oa];zb[oa]=sb;zb.pop()}}else for(oa=--U,Ya=r[oa],0<oa&&(t[Ya.uuid]=wa),r[wa]=Ya,r.pop(),Ya=0,Oa=I;Ya!==Oa;++Ya)ab=B[Ya],ab[wa]=ab[oa],ab.pop()}(this||q).nCachedObjects_=M};
D.subscribe_=function(r,t){var B=(this||q)._bindingsIndicesByPath,I=B[r],M=(this||q)._bindings;if(void 0!==I)return M[I];var U=(this||q)._paths,Z=(this||q)._parsedPaths,aa=(this||q)._objects,oa=(this||q).nCachedObjects_,wa=Array(aa.length);I=M.length;B[r]=I;U.push(r);Z.push(t);M.push(wa);B=oa;for(I=aa.length;B!==I;++B)wa[B]=new on(aa[B],r,t);return wa};D.unsubscribe_=function(r){var t=(this||q)._bindingsIndicesByPath,B=t[r];if(void 0!==B){var I=(this||q)._paths,M=(this||q)._parsedPaths,U=(this||q)._bindings,
Z=U.length-1,aa=U[Z];t[r[Z]]=B;U[B]=aa;U.pop();M[B]=M[Z];M.pop();I[B]=I[Z];I.pop()}};return A}();cfa.prototype.isAnimationObjectGroup=!0;var iza=function(){function A(r,t,B,I){void 0===B&&(B=null);void 0===I&&(I=t.blendMode);(this||q)._mixer=r;(this||q)._clip=t;(this||q)._localRoot=B;(this||q).blendMode=I;r=t.tracks;t=r.length;B=Array(t);I={endingStart:2400,endingEnd:2400};for(var M=0;M!==t;++M){var U=r[M].createInterpolant(null);B[M]=U;U.settings=I}(this||q)._interpolantSettings=I;(this||q)._interpolants=
B;(this||q)._propertyBindings=Array(t);(this||q)._cacheIndex=null;(this||q)._byClipCacheIndex=null;(this||q)._timeScaleInterpolant=null;(this||q)._weightInterpolant=null;(this||q).loop=2201;(this||q)._loopCount=-1;(this||q)._startTime=null;(this||q).time=0;(this||q).timeScale=1;(this||q)._effectiveTimeScale=1;(this||q).weight=1;(this||q)._effectiveWeight=1;(this||q).repetitions=Infinity;(this||q).paused=!1;(this||q).enabled=!0;(this||q).clampWhenFinished=!1;(this||q).zeroSlopeAtStart=!0;(this||q).zeroSlopeAtEnd=
!0}var D=A.prototype;D.play=function(){(this||q)._mixer._activateAction(this||q);return this||q};D.stop=function(){(this||q)._mixer._deactivateAction(this||q);return this.reset()};D.reset=function(){(this||q).paused=!1;(this||q).enabled=!0;(this||q).time=0;(this||q)._loopCount=-1;(this||q)._startTime=null;return this.stopFading().stopWarping()};D.isRunning=function(){return(this||q).enabled&&!(this||q).paused&&0!==(this||q).timeScale&&null===(this||q)._startTime&&(this||q)._mixer._isActiveAction(this||
q)};D.isScheduled=function(){return(this||q)._mixer._isActiveAction(this||q)};D.startAt=function(r){(this||q)._startTime=r;return this||q};D.setLoop=function(r,t){(this||q).loop=r;(this||q).repetitions=t;return this||q};D.setEffectiveWeight=function(r){(this||q).weight=r;(this||q)._effectiveWeight=(this||q).enabled?r:0;return this.stopFading()};D.getEffectiveWeight=function(){return(this||q)._effectiveWeight};D.fadeIn=function(r){return this._scheduleFading(r,0,1)};D.fadeOut=function(r){return this._scheduleFading(r,
1,0)};D.crossFadeFrom=function(r,t,B){r.fadeOut(t);this.fadeIn(t);if(B){B=(this||q)._clip.duration;var I=r._clip.duration,M=B/I;r.warp(1,I/B,t);this.warp(M,1,t)}return this||q};D.crossFadeTo=function(r,t,B){return r.crossFadeFrom(this||q,t,B)};D.stopFading=function(){var r=(this||q)._weightInterpolant;null!==r&&((this||q)._weightInterpolant=null,(this||q)._mixer._takeBackControlInterpolant(r));return this||q};D.setEffectiveTimeScale=function(r){(this||q).timeScale=r;(this||q)._effectiveTimeScale=
(this||q).paused?0:r;return this.stopWarping()};D.getEffectiveTimeScale=function(){return(this||q)._effectiveTimeScale};D.setDuration=function(r){(this||q).timeScale=(this||q)._clip.duration/r;return this.stopWarping()};D.syncWith=function(r){(this||q).time=r.time;(this||q).timeScale=r.timeScale;return this.stopWarping()};D.halt=function(r){return this.warp((this||q)._effectiveTimeScale,0,r)};D.warp=function(r,t,B){var I=(this||q)._mixer,M=I.time,U=(this||q).timeScale,Z=(this||q)._timeScaleInterpolant;
null===Z&&(Z=I._lendControlInterpolant(),(this||q)._timeScaleInterpolant=Z);I=Z.parameterPositions;Z=Z.sampleValues;I[0]=M;I[1]=M+B;Z[0]=r/U;Z[1]=t/U;return this||q};D.stopWarping=function(){var r=(this||q)._timeScaleInterpolant;null!==r&&((this||q)._timeScaleInterpolant=null,(this||q)._mixer._takeBackControlInterpolant(r));return this||q};D.getMixer=function(){return(this||q)._mixer};D.getClip=function(){return(this||q)._clip};D.getRoot=function(){return(this||q)._localRoot||(this||q)._mixer._root};
D._update=function(r,t,B,I){if((this||q).enabled){var M=(this||q)._startTime;if(null!==M){t=(r-M)*B;if(0>t||0===B)return;(this||q)._startTime=null;t*=B}t*=this._updateTimeScale(r);B=this._updateTime(t);r=this._updateWeight(r);if(0<r)switch(t=(this||q)._interpolants,M=(this||q)._propertyBindings,(this||q).blendMode){case 2501:I=0;for(var U=t.length;I!==U;++I)t[I].evaluate(B),M[I].accumulateAdditive(r);break;default:U=0;for(var Z=t.length;U!==Z;++U)t[U].evaluate(B),M[U].accumulate(I,r)}}else this._updateWeight(r)};
D._updateWeight=function(r){var t=0;if((this||q).enabled){t=(this||q).weight;var B=(this||q)._weightInterpolant;if(null!==B){var I=B.evaluate(r)[0];t*=I;r>B.parameterPositions[1]&&(this.stopFading(),0===I&&((this||q).enabled=!1))}}return(this||q)._effectiveWeight=t};D._updateTimeScale=function(r){var t=0;if(!(this||q).paused){t=(this||q).timeScale;var B=(this||q)._timeScaleInterpolant;if(null!==B){var I=B.evaluate(r)[0];t*=I;r>B.parameterPositions[1]&&(this.stopWarping(),0===t?(this||q).paused=!0:
(this||q).timeScale=t)}}return(this||q)._effectiveTimeScale=t};D._updateTime=function(r){var t=(this||q)._clip.duration,B=(this||q).loop,I=(this||q).time+r,M=(this||q)._loopCount,U=2202===B;if(0===r)return-1===M?I:U&&1===(M&1)?t-I:I;if(2200===B)a:{if(-1===M&&((this||q)._loopCount=0,this._setEndings(!0,!0,!1)),I>=t)I=t;else if(0>I)I=0;else{(this||q).time=I;break a}(this||q).clampWhenFinished?(this||q).paused=!0:(this||q).enabled=!1;(this||q).time=I;(this||q)._mixer.dispatchEvent({type:"finished",action:this||
q,direction:0>r?-1:1})}else{-1===M&&(0<=r?(M=0,this._setEndings(!0,0===(this||q).repetitions,U)):this._setEndings(0===(this||q).repetitions,!0,U));if(I>=t||0>I){B=Math.floor(I/t);I-=t*B;M+=Math.abs(B);var Z=(this||q).repetitions-M;0>=Z?((this||q).clampWhenFinished?(this||q).paused=!0:(this||q).enabled=!1,I=0<r?t:0,(this||q).time=I,(this||q)._mixer.dispatchEvent({type:"finished",action:this||q,direction:0<r?1:-1})):(1===Z?(r=0>r,this._setEndings(r,!r,U)):this._setEndings(!1,!1,U),(this||q)._loopCount=
M,(this||q).time=I,(this||q)._mixer.dispatchEvent({type:"loop",action:this||q,loopDelta:B}))}else(this||q).time=I;if(U&&1===(M&1))return t-I}return I};D._setEndings=function(r,t,B){var I=(this||q)._interpolantSettings;B?(I.endingStart=2401,I.endingEnd=2401):(I.endingStart=r?(this||q).zeroSlopeAtStart?2401:2400:2402,I.endingEnd=t?(this||q).zeroSlopeAtEnd?2401:2400:2402)};D._scheduleFading=function(r,t,B){var I=(this||q)._mixer,M=I.time,U=(this||q)._weightInterpolant;null===U&&(U=I._lendControlInterpolant(),
(this||q)._weightInterpolant=U);I=U.parameterPositions;U=U.sampleValues;I[0]=M;U[0]=t;I[1]=M+r;U[1]=B;return this||q};return A}(),dfa=function(A){function D(t){var B=A.call(this||q)||this||q;B._root=t;B._initMemoryManager();B._accuIndex=0;B.time=0;B.timeScale=1;return B}p(D,A);var r=D.prototype;r._bindAction=function(t,B){var I=t._localRoot||(this||q)._root,M=t._clip.tracks,U=M.length,Z=t._propertyBindings;t=t._interpolants;var aa=I.uuid,oa=(this||q)._bindingsByRootAndName,wa=oa[aa];void 0===wa&&
(wa={},oa[aa]=wa);for(oa=0;oa!==U;++oa){var Oa=M[oa],Ya=Oa.name,ab=wa[Ya];if(void 0===ab){ab=Z[oa];if(void 0!==ab){null===ab._cacheIndex&&(++ab.referenceCount,this._addInactiveBinding(ab,aa,Ya));continue}ab=new bfa(on.create(I,Ya,B&&B._propertyBindings[oa].binding.parsedPath),Oa.ValueTypeName,Oa.getValueSize());++ab.referenceCount;this._addInactiveBinding(ab,aa,Ya)}Z[oa]=ab;t[oa].resultBuffer=ab.buffer}};r._activateAction=function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var B=(t._localRoot||
(this||q)._root).uuid,I=t._clip.uuid,M=(this||q)._actionsByClip[I];this._bindAction(t,M&&M.knownActions[0]);this._addInactiveAction(t,I,B)}B=t._propertyBindings;I=0;for(M=B.length;I!==M;++I){var U=B[I];0===U.useCount++&&(this._lendBinding(U),U.saveOriginalState())}this._lendAction(t)}};r._deactivateAction=function(t){if(this._isActiveAction(t)){for(var B=t._propertyBindings,I=0,M=B.length;I!==M;++I){var U=B[I];0===--U.useCount&&(U.restoreOriginalState(),this._takeBackBinding(U))}this._takeBackAction(t)}};
r._initMemoryManager=function(){(this||q)._actions=[];(this||q)._nActiveActions=0;(this||q)._actionsByClip={};(this||q)._bindings=[];(this||q)._nActiveBindings=0;(this||q)._bindingsByRootAndName={};(this||q)._controlInterpolants=[];(this||q)._nActiveControlInterpolants=0;var t=this||q;(this||q).stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},
get inUse(){return t._nActiveControlInterpolants}}}};r._isActiveAction=function(t){t=t._cacheIndex;return null!==t&&t<(this||q)._nActiveActions};r._addInactiveAction=function(t,B,I){var M=(this||q)._actions,U=(this||q)._actionsByClip,Z=U[B];void 0===Z?(Z={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,U[B]=Z):(B=Z.knownActions,t._byClipCacheIndex=B.length,B.push(t));t._cacheIndex=M.length;M.push(t);Z.actionByRoot[I]=t};r._removeInactiveAction=function(t){var B=(this||q)._actions,I=B[B.length-
1],M=t._cacheIndex;I._cacheIndex=M;B[M]=I;B.pop();t._cacheIndex=null;B=t._clip.uuid;I=(this||q)._actionsByClip;M=I[B];var U=M.knownActions,Z=U[U.length-1],aa=t._byClipCacheIndex;Z._byClipCacheIndex=aa;U[aa]=Z;U.pop();t._byClipCacheIndex=null;delete M.actionByRoot[(t._localRoot||(this||q)._root).uuid];0===U.length&&delete I[B];this._removeInactiveBindingsForAction(t)};r._removeInactiveBindingsForAction=function(t){t=t._propertyBindings;for(var B=0,I=t.length;B!==I;++B){var M=t[B];0===--M.referenceCount&&
this._removeInactiveBinding(M)}};r._lendAction=function(t){var B=(this||q)._actions,I=t._cacheIndex,M=(this||q)._nActiveActions++,U=B[M];t._cacheIndex=M;B[M]=t;U._cacheIndex=I;B[I]=U};r._takeBackAction=function(t){var B=(this||q)._actions,I=t._cacheIndex,M=--(this||q)._nActiveActions,U=B[M];t._cacheIndex=M;B[M]=t;U._cacheIndex=I;B[I]=U};r._addInactiveBinding=function(t,B,I){var M=(this||q)._bindingsByRootAndName,U=(this||q)._bindings,Z=M[B];void 0===Z&&(Z={},M[B]=Z);Z[I]=t;t._cacheIndex=U.length;
U.push(t)};r._removeInactiveBinding=function(t){var B=(this||q)._bindings,I=t.binding,M=I.rootNode.uuid;I=I.path;var U=(this||q)._bindingsByRootAndName,Z=U[M],aa=B[B.length-1];t=t._cacheIndex;aa._cacheIndex=t;B[t]=aa;B.pop();delete Z[I];0===Object.keys(Z).length&&delete U[M]};r._lendBinding=function(t){var B=(this||q)._bindings,I=t._cacheIndex,M=(this||q)._nActiveBindings++,U=B[M];t._cacheIndex=M;B[M]=t;U._cacheIndex=I;B[I]=U};r._takeBackBinding=function(t){var B=(this||q)._bindings,I=t._cacheIndex,
M=--(this||q)._nActiveBindings,U=B[M];t._cacheIndex=M;B[M]=t;U._cacheIndex=I;B[I]=U};r._lendControlInterpolant=function(){var t=(this||q)._controlInterpolants,B=(this||q)._nActiveControlInterpolants++,I=t[B];void 0===I&&(I=new YF(new Float32Array(2),new Float32Array(2),1,(this||q)._controlInterpolantsResultBuffer),I.__cacheIndex=B,t[B]=I);return I};r._takeBackControlInterpolant=function(t){var B=(this||q)._controlInterpolants,I=t.__cacheIndex,M=--(this||q)._nActiveControlInterpolants,U=B[M];t.__cacheIndex=
M;B[M]=t;U.__cacheIndex=I;B[I]=U};r.clipAction=function(t,B,I){var M=B||(this||q)._root,U=M.uuid;M="string"===typeof t?sG.findByName(M,t):t;t=null!==M?M.uuid:t;var Z=(this||q)._actionsByClip[t],aa=null;void 0===I&&(I=null!==M?M.blendMode:2500);if(void 0!==Z){aa=Z.actionByRoot[U];if(void 0!==aa&&aa.blendMode===I)return aa;aa=Z.knownActions[0];null===M&&(M=aa._clip)}if(null===M)return null;B=new iza(this||q,M,B,I);this._bindAction(B,aa);this._addInactiveAction(B,t,U);return B};r.existingAction=function(t,
B){var I=B||(this||q)._root;B=I.uuid;I="string"===typeof t?sG.findByName(I,t):t;t=(this||q)._actionsByClip[I?I.uuid:t];return void 0!==t?t.actionByRoot[B]||null:null};r.stopAllAction=function(){for(var t=(this||q)._actions,B=(this||q)._nActiveActions-1;0<=B;--B)t[B].stop();return this||q};r.update=function(t){t*=(this||q).timeScale;for(var B=(this||q)._actions,I=(this||q)._nActiveActions,M=(this||q).time+=t,U=Math.sign(t),Z=(this||q)._accuIndex^=1,aa=0;aa!==I;++aa)B[aa]._update(M,t,U,Z);t=(this||
q)._bindings;B=(this||q)._nActiveBindings;for(I=0;I!==B;++I)t[I].apply(Z);return this||q};r.setTime=function(t){for(var B=(this||q).time=0;B<(this||q)._actions.length;B++)(this||q)._actions[B].time=0;return this.update(t)};r.getRoot=function(){return(this||q)._root};r.uncacheClip=function(t){var B=(this||q)._actions;t=t.uuid;var I=(this||q)._actionsByClip,M=I[t];if(void 0!==M){M=M.knownActions;for(var U=0,Z=M.length;U!==Z;++U){var aa=M[U];this._deactivateAction(aa);var oa=aa._cacheIndex,wa=B[B.length-
1];aa._cacheIndex=null;aa._byClipCacheIndex=null;wa._cacheIndex=oa;B[oa]=wa;B.pop();this._removeInactiveBindingsForAction(aa)}delete I[t]}};r.uncacheRoot=function(t){t=t.uuid;var B=(this||q)._actionsByClip;for(M in B){var I=B[M].actionByRoot[t];void 0!==I&&(this._deactivateAction(I),this._removeInactiveAction(I))}var M=(this||q)._bindingsByRootAndName[t];if(void 0!==M)for(var U in M)t=M[U],t.restoreOriginalState(),this._removeInactiveBinding(t)};r.uncacheAction=function(t,B){t=this.existingAction(t,
B);null!==t&&(this._deactivateAction(t),this._removeInactiveAction(t))};return D}(J);dfa.prototype._controlInterpolantsResultBuffer=new Float32Array(1);var efa=function(){function A(D,r){"string"===typeof D&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),D=r);(this||q).value=D}A.prototype.clone=function(){return new A(void 0===(this||q).value.clone?(this||q).value:(this||q).value.clone())};return A}();HY.prototype=Object.assign(Object.create(mo.prototype),{constructor:HY,isInstancedInterleavedBuffer:!0,
copy:function(A){mo.prototype.copy.call(this||q,A);(this||q).meshPerAttribute=A.meshPerAttribute;return this||q},clone:function(A){A=mo.prototype.clone.call(this||q,A);A.meshPerAttribute=(this||q).meshPerAttribute;return A},toJSON:function(A){A=mo.prototype.toJSON.call(this||q,A);A.isInstancedInterleavedBuffer=!0;A.meshPerAttribute=(this||q).meshPerAttribute;return A}});Object.defineProperty(IY.prototype,"needsUpdate",{set:function(A){!0===A&&(this||q).version++}});Object.assign(IY.prototype,{isGLBufferAttribute:!0,
setBuffer:function(A){(this||q).buffer=A;return this||q},setType:function(A,D){(this||q).type=A;(this||q).elementSize=D;return this||q},setItemSize:function(A){(this||q).itemSize=A;return this||q},setCount:function(A){(this||q).count=A;return this||q}});Object.assign(JY.prototype,{set:function(A,D){(this||q).ray.set(A,D)},setFromCamera:function(A,D){D&&D.isPerspectiveCamera?((this||q).ray.origin.setFromMatrixPosition(D.matrixWorld),(this||q).ray.direction.set(A.x,A.y,.5).unproject(D).sub((this||q).ray.origin).normalize(),
(this||q).camera=D):D&&D.isOrthographicCamera?((this||q).ray.origin.set(A.x,A.y,(D.near+D.far)/(D.near-D.far)).unproject(D),(this||q).ray.direction.set(0,0,-1).transformDirection(D.matrixWorld),(this||q).camera=D):console.error("THREE.Raycaster: Unsupported camera type: "+D.type)},intersectObject:function(A,D,r){void 0===D&&(D=!1);void 0===r&&(r=[]);KY(A,this||q,r,D);r.sort(Sda);return r},intersectObjects:function(A,D,r){void 0===D&&(D=!1);void 0===r&&(r=[]);for(var t=0,B=A.length;t<B;t++)KY(A[t],
this||q,r,D);r.sort(Sda);return r}});var jza=function(){function A(r,t,B){void 0===r&&(r=1);void 0===t&&(t=0);void 0===B&&(B=0);(this||q).radius=r;(this||q).phi=t;(this||q).theta=B;return this||q}var D=A.prototype;D.set=function(r,t,B){(this||q).radius=r;(this||q).phi=t;(this||q).theta=B;return this||q};D.copy=function(r){(this||q).radius=r.radius;(this||q).phi=r.phi;(this||q).theta=r.theta;return this||q};D.makeSafe=function(){(this||q).phi=Math.max(1E-6,Math.min(Math.PI-1E-6,(this||q).phi));return this||
q};D.setFromVector3=function(r){return this.setFromCartesianCoords(r.x,r.y,r.z)};D.setFromCartesianCoords=function(r,t,B){(this||q).radius=Math.sqrt(r*r+t*t+B*B);0===(this||q).radius?((this||q).theta=0,(this||q).phi=0):((this||q).theta=Math.atan2(r,B),(this||q).phi=Math.acos(oh.clamp(t/(this||q).radius,-1,1)));return this||q};D.clone=function(){return(new (this||q).constructor).copy(this||q)};return A}(),kza=function(){function A(r,t,B){void 0===r&&(r=1);void 0===t&&(t=0);void 0===B&&(B=0);(this||
q).radius=r;(this||q).theta=t;(this||q).y=B;return this||q}var D=A.prototype;D.set=function(r,t,B){(this||q).radius=r;(this||q).theta=t;(this||q).y=B;return this||q};D.copy=function(r){(this||q).radius=r.radius;(this||q).theta=r.theta;(this||q).y=r.y;return this||q};D.setFromVector3=function(r){return this.setFromCartesianCoords(r.x,r.y,r.z)};D.setFromCartesianCoords=function(r,t,B){(this||q).radius=Math.sqrt(r*r+B*B);(this||q).theta=Math.atan2(r,B);(this||q).y=t;return this||q};D.clone=function(){return(new (this||
q).constructor).copy(this||q)};return A}(),ffa=new Ye,VB=function(){function A(r,t){void 0===r&&(r=new Ye(Infinity,Infinity));void 0===t&&(t=new Ye(-Infinity,-Infinity));(this||q).min=r;(this||q).max=t}var D=A.prototype;D.set=function(r,t){(this||q).min.copy(r);(this||q).max.copy(t);return this||q};D.setFromPoints=function(r){this.makeEmpty();for(var t=0,B=r.length;t<B;t++)this.expandByPoint(r[t]);return this||q};D.setFromCenterAndSize=function(r,t){t=ffa.copy(t).multiplyScalar(.5);(this||q).min.copy(r).sub(t);
(this||q).max.copy(r).add(t);return this||q};D.clone=function(){return(new (this||q).constructor).copy(this||q)};D.copy=function(r){(this||q).min.copy(r.min);(this||q).max.copy(r.max);return this||q};D.makeEmpty=function(){(this||q).min.x=(this||q).min.y=Infinity;(this||q).max.x=(this||q).max.y=-Infinity;return this||q};D.isEmpty=function(){return(this||q).max.x<(this||q).min.x||(this||q).max.y<(this||q).min.y};D.getCenter=function(r){void 0===r&&(console.warn("THREE.Box2: .getCenter() target is now required"),
r=new Ye);return this.isEmpty()?r.set(0,0):r.addVectors((this||q).min,(this||q).max).multiplyScalar(.5)};D.getSize=function(r){void 0===r&&(console.warn("THREE.Box2: .getSize() target is now required"),r=new Ye);return this.isEmpty()?r.set(0,0):r.subVectors((this||q).max,(this||q).min)};D.expandByPoint=function(r){(this||q).min.min(r);(this||q).max.max(r);return this||q};D.expandByVector=function(r){(this||q).min.sub(r);(this||q).max.add(r);return this||q};D.expandByScalar=function(r){(this||q).min.addScalar(-r);
(this||q).max.addScalar(r);return this||q};D.containsPoint=function(r){return r.x<(this||q).min.x||r.x>(this||q).max.x||r.y<(this||q).min.y||r.y>(this||q).max.y?!1:!0};D.containsBox=function(r){return(this||q).min.x<=r.min.x&&r.max.x<=(this||q).max.x&&(this||q).min.y<=r.min.y&&r.max.y<=(this||q).max.y};D.getParameter=function(r,t){void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Ye);return t.set((r.x-(this||q).min.x)/((this||q).max.x-(this||q).min.x),(r.y-(this||
q).min.y)/((this||q).max.y-(this||q).min.y))};D.intersectsBox=function(r){return r.max.x<(this||q).min.x||r.min.x>(this||q).max.x||r.max.y<(this||q).min.y||r.min.y>(this||q).max.y?!1:!0};D.clampPoint=function(r,t){void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Ye);return t.copy(r).clamp((this||q).min,(this||q).max)};D.distanceToPoint=function(r){return ffa.copy(r).clamp((this||q).min,(this||q).max).sub(r).length()};D.intersect=function(r){(this||q).min.max(r.min);
(this||q).max.min(r.max);return this||q};D.union=function(r){(this||q).min.min(r.min);(this||q).max.max(r.max);return this||q};D.translate=function(r){(this||q).min.add(r);(this||q).max.add(r);return this||q};D.equals=function(r){return r.min.equals((this||q).min)&&r.max.equals((this||q).max)};return A}();VB.prototype.isBox2=!0;var gfa=new jc,IP=new jc,hfa=function(){function A(r,t){void 0===r&&(r=new jc);void 0===t&&(t=new jc);(this||q).start=r;(this||q).end=t}var D=A.prototype;D.set=function(r,
t){(this||q).start.copy(r);(this||q).end.copy(t);return this||q};D.copy=function(r){(this||q).start.copy(r.start);(this||q).end.copy(r.end);return this||q};D.getCenter=function(r){void 0===r&&(console.warn("THREE.Line3: .getCenter() target is now required"),r=new jc);return r.addVectors((this||q).start,(this||q).end).multiplyScalar(.5)};D.delta=function(r){void 0===r&&(console.warn("THREE.Line3: .delta() target is now required"),r=new jc);return r.subVectors((this||q).end,(this||q).start)};D.distanceSq=
function(){return(this||q).start.distanceToSquared((this||q).end)};D.distance=function(){return(this||q).start.distanceTo((this||q).end)};D.at=function(r,t){void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new jc);return this.delta(t).multiplyScalar(r).add((this||q).start)};D.closestPointToPointParameter=function(r,t){gfa.subVectors(r,(this||q).start);IP.subVectors((this||q).end,(this||q).start);r=IP.dot(IP);r=IP.dot(gfa)/r;t&&(r=oh.clamp(r,0,1));return r};D.closestPointToPoint=
function(r,t,B){r=this.closestPointToPointParameter(r,t);void 0===B&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),B=new jc);return this.delta(B).multiplyScalar(r).add((this||q).start)};D.applyMatrix4=function(r){(this||q).start.applyMatrix4(r);(this||q).end.applyMatrix4(r);return this||q};D.equals=function(r){return r.start.equals((this||q).start)&&r.end.equals((this||q).end)};D.clone=function(){return(new (this||q).constructor).copy(this||q)};return A}();dG.prototype=
Object.create(P.prototype);dG.prototype.constructor=dG;dG.prototype.isImmediateRenderObject=!0;var ifa=new jc,lza=function(A){function D(t,B){var I=A.call(this||q)||this||q;I.light=t;I.light.updateMatrixWorld();I.matrix=t.matrixWorld;I.matrixAutoUpdate=!1;I.color=B;t=new ya;B=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var M=0,U=1;32>M;M++,U++){var Z=M/32*Math.PI*2,aa=U/32*Math.PI*2;B.push(Math.cos(Z),Math.sin(Z),1,Math.cos(aa),Math.sin(aa),1)}t.setAttribute("position",new ob(B,
3));B=new Dm({fog:!1,toneMapped:!1});I.cone=new Nn(t,B);I.add(I.cone);I.update();return I}p(D,A);var r=D.prototype;r.dispose=function(){(this||q).cone.geometry.dispose();(this||q).cone.material.dispose()};r.update=function(){(this||q).light.updateMatrixWorld();var t=(this||q).light.distance?(this||q).light.distance:1E3,B=t*Math.tan((this||q).light.angle);(this||q).cone.scale.set(B,B,t);ifa.setFromMatrixPosition((this||q).light.target.matrixWorld);(this||q).cone.lookAt(ifa);void 0!==(this||q).color?
(this||q).cone.material.color.set((this||q).color):(this||q).cone.material.color.copy((this||q).light.color)};return D}(P),tv=new jc,JP=new Fg,MZ=new Fg,jfa=function(A){function D(r){var t=Tda(r);var B=new ya;for(var I=[],M=[],U=new Zf(0,0,1),Z=new Zf(0,1,0),aa=0;aa<t.length;aa++){var oa=t[aa];oa.parent&&oa.parent.isBone&&(I.push(0,0,0),I.push(0,0,0),M.push(U.r,U.g,U.b),M.push(Z.r,Z.g,Z.b))}B.setAttribute("position",new ob(I,3));B.setAttribute("color",new ob(M,3));I=new Dm({vertexColors:!0,depthTest:!1,
depthWrite:!1,toneMapped:!1,transparent:!0});B=A.call(this||q,B,I)||this||q;B.type="SkeletonHelper";B.isSkeletonHelper=!0;B.root=r;B.bones=t;B.matrix=r.matrixWorld;B.matrixAutoUpdate=!1;return B}p(D,A);D.prototype.updateMatrixWorld=function(r){var t=(this||q).bones,B=(this||q).geometry,I=B.getAttribute("position");MZ.copy((this||q).root.matrixWorld).invert();for(var M=0,U=0;M<t.length;M++){var Z=t[M];Z.parent&&Z.parent.isBone&&(JP.multiplyMatrices(MZ,Z.matrixWorld),tv.setFromMatrixPosition(JP),I.setXYZ(U,
tv.x,tv.y,tv.z),JP.multiplyMatrices(MZ,Z.parent.matrixWorld),tv.setFromMatrixPosition(JP),I.setXYZ(U+1,tv.x,tv.y,tv.z),U+=2)}B.getAttribute("position").needsUpdate=!0;A.prototype.updateMatrixWorld.call(this||q,r)};return D}(Nn),mza=function(A){function D(t,B,I){B=new rG(B,4,2);var M=new ot({wireframe:!0,fog:!1,toneMapped:!1});B=A.call(this||q,B,M)||this||q;B.light=t;B.light.updateMatrixWorld();B.color=I;B.type="PointLightHelper";B.matrix=B.light.matrixWorld;B.matrixAutoUpdate=!1;B.update();return B}
p(D,A);var r=D.prototype;r.dispose=function(){(this||q).geometry.dispose();(this||q).material.dispose()};r.update=function(){void 0!==(this||q).color?(this||q).material.color.set((this||q).color):(this||q).material.color.copy((this||q).light.color)};return D}(Sa),nza=new jc,kfa=new Zf,lfa=new Zf,oza=function(A){function D(t,B,I){var M=A.call(this||q)||this||q;M.light=t;M.light.updateMatrixWorld();M.matrix=t.matrixWorld;M.matrixAutoUpdate=!1;M.color=I;t=new pG(B);t.rotateY(.5*Math.PI);M.material=new ot({wireframe:!0,
fog:!1,toneMapped:!1});void 0===M.color&&(M.material.vertexColors=!0);B=t.getAttribute("position");B=new Float32Array(3*B.count);t.setAttribute("color",new Ia(B,3));M.add(new Sa(t,M.material));M.update();return M}p(D,A);var r=D.prototype;r.dispose=function(){(this||q).children[0].geometry.dispose();(this||q).children[0].material.dispose()};r.update=function(){var t=(this||q).children[0];if(void 0!==(this||q).color)(this||q).material.color.set((this||q).color);else{var B=t.geometry.getAttribute("color");
kfa.copy((this||q).light.color);lfa.copy((this||q).light.groundColor);for(var I=0,M=B.count;I<M;I++){var U=I<M/2?kfa:lfa;B.setXYZ(I,U.r,U.g,U.b)}B.needsUpdate=!0}t.lookAt(nza.setFromMatrixPosition((this||q).light.matrixWorld).negate())};return D}(P),mfa=function(A){function D(r,t,B,I){void 0===r&&(r=10);void 0===t&&(t=10);void 0===B&&(B=4473924);void 0===I&&(I=8947848);B=new Zf(B);I=new Zf(I);var M=t/2,U=r/t,Z=r/2;r=[];for(var aa=[],oa=0,wa=0,Oa=-Z;oa<=t;oa++,Oa+=U){r.push(-Z,0,Oa,Z,0,Oa);r.push(Oa,
0,-Z,Oa,0,Z);var Ya=oa===M?B:I;Ya.toArray(aa,wa);wa+=3;Ya.toArray(aa,wa);wa+=3;Ya.toArray(aa,wa);wa+=3;Ya.toArray(aa,wa);wa+=3}t=new ya;t.setAttribute("position",new ob(r,3));t.setAttribute("color",new ob(aa,3));B=new Dm({vertexColors:!0,toneMapped:!1});t=A.call(this||q,t,B)||this||q;t.type="GridHelper";return t}p(D,A);return D}(Nn),pza=function(A){function D(r,t,B,I,M,U){void 0===r&&(r=10);void 0===t&&(t=16);void 0===B&&(B=8);void 0===I&&(I=64);void 0===M&&(M=4473924);void 0===U&&(U=8947848);M=new Zf(M);
U=new Zf(U);var Z=[];for(var aa=[],oa=0;oa<=t;oa++){var wa=oa/t*2*Math.PI,Oa=Math.sin(wa)*r;wa=Math.cos(wa)*r;Z.push(0,0,0);Z.push(Oa,0,wa);Oa=oa&1?M:U;aa.push(Oa.r,Oa.g,Oa.b);aa.push(Oa.r,Oa.g,Oa.b)}for(t=0;t<=B;t++)for(oa=t&1?M:U,Oa=r-r/B*t,wa=0;wa<I;wa++){var Ya=wa/I*2*Math.PI,ab=Math.sin(Ya)*Oa;Ya=Math.cos(Ya)*Oa;Z.push(ab,0,Ya);aa.push(oa.r,oa.g,oa.b);Ya=(wa+1)/I*2*Math.PI;ab=Math.sin(Ya)*Oa;Ya=Math.cos(Ya)*Oa;Z.push(ab,0,Ya);aa.push(oa.r,oa.g,oa.b)}r=new ya;r.setAttribute("position",new ob(Z,
3));r.setAttribute("color",new ob(aa,3));Z=new Dm({vertexColors:!0,toneMapped:!1});Z=A.call(this||q,r,Z)||this||q;Z.type="PolarGridHelper";return Z}p(D,A);return D}(Nn),nfa=new jc,KP=new jc,ofa=new jc,qza=function(A){function D(t,B,I){var M=A.call(this||q)||this||q;M.light=t;M.light.updateMatrixWorld();M.matrix=t.matrixWorld;M.matrixAutoUpdate=!1;M.color=I;void 0===B&&(B=1);t=new ya;t.setAttribute("position",new ob([-B,B,0,B,B,0,B,-B,0,-B,-B,0,-B,B,0],3));B=new Dm({fog:!1,toneMapped:!1});M.lightPlane=
new Tq(t,B);M.add(M.lightPlane);t=new ya;t.setAttribute("position",new ob([0,0,0,0,0,1],3));M.targetLine=new Tq(t,B);M.add(M.targetLine);M.update();return M}p(D,A);var r=D.prototype;r.dispose=function(){(this||q).lightPlane.geometry.dispose();(this||q).lightPlane.material.dispose();(this||q).targetLine.geometry.dispose();(this||q).targetLine.material.dispose()};r.update=function(){nfa.setFromMatrixPosition((this||q).light.matrixWorld);KP.setFromMatrixPosition((this||q).light.target.matrixWorld);ofa.subVectors(KP,
nfa);(this||q).lightPlane.lookAt(KP);void 0!==(this||q).color?((this||q).lightPlane.material.color.set((this||q).color),(this||q).targetLine.material.color.set((this||q).color)):((this||q).lightPlane.material.color.copy((this||q).light.color),(this||q).targetLine.material.color.copy((this||q).light.color));(this||q).targetLine.lookAt(KP);(this||q).targetLine.scale.z=ofa.length()};return D}(P),UO=new jc,jl=new Jc,rza=function(A){function D(r){function t(zb,sb,nc){B(zb,nc);B(sb,nc)}function B(zb,sb){U.push(0,
0,0);Z.push(sb.r,sb.g,sb.b);void 0===aa[zb]&&(aa[zb]=[]);aa[zb].push(U.length/3-1)}var I=new ya;var M=new Dm({color:16777215,vertexColors:!0,toneMapped:!1}),U=[],Z=[],aa={},oa=new Zf(16755200),wa=new Zf(16711680),Oa=new Zf(43775),Ya=new Zf(16777215),ab=new Zf(3355443);t("n1","n2",oa);t("n2","n4",oa);t("n4","n3",oa);t("n3","n1",oa);t("f1","f2",oa);t("f2","f4",oa);t("f4","f3",oa);t("f3","f1",oa);t("n1","f1",oa);t("n2","f2",oa);t("n3","f3",oa);t("n4","f4",oa);t("p","n1",wa);t("p","n2",wa);t("p","n3",
wa);t("p","n4",wa);t("u1","u2",Oa);t("u2","u3",Oa);t("u3","u1",Oa);t("c","t",Ya);t("p","c",ab);t("cn1","cn2",ab);t("cn3","cn4",ab);t("cf1","cf2",ab);t("cf3","cf4",ab);I.setAttribute("position",new ob(U,3));I.setAttribute("color",new ob(Z,3));I=A.call(this||q,I,M)||this||q;I.type="CameraHelper";I.camera=r;I.camera.updateProjectionMatrix&&I.camera.updateProjectionMatrix();I.matrix=r.matrixWorld;I.matrixAutoUpdate=!1;I.pointMap=aa;I.update();return I}p(D,A);D.prototype.update=function(){var r=(this||
q).geometry,t=(this||q).pointMap;jl.projectionMatrixInverse.copy((this||q).camera.projectionMatrixInverse);pl("c",t,r,jl,0,0,-1);pl("t",t,r,jl,0,0,1);pl("n1",t,r,jl,-1,-1,-1);pl("n2",t,r,jl,1,-1,-1);pl("n3",t,r,jl,-1,1,-1);pl("n4",t,r,jl,1,1,-1);pl("f1",t,r,jl,-1,-1,1);pl("f2",t,r,jl,1,-1,1);pl("f3",t,r,jl,-1,1,1);pl("f4",t,r,jl,1,1,1);pl("u1",t,r,jl,.7,1.1,-1);pl("u2",t,r,jl,-.7,1.1,-1);pl("u3",t,r,jl,0,2,-1);pl("cf1",t,r,jl,-1,0,1);pl("cf2",t,r,jl,1,0,1);pl("cf3",t,r,jl,0,-1,1);pl("cf4",t,r,jl,
0,1,1);pl("cn1",t,r,jl,-1,0,-1);pl("cn2",t,r,jl,1,0,-1);pl("cn3",t,r,jl,0,-1,-1);pl("cn4",t,r,jl,0,1,-1);r.getAttribute("position").needsUpdate=!0};return D}(Nn),LP=new no,pfa=function(A){function D(t,B){void 0===B&&(B=16776960);var I=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),M=new Float32Array(24),U=new ya;U.setIndex(new Ia(I,1));U.setAttribute("position",new Ia(M,3));B=A.call(this||q,U,new Dm({color:B,toneMapped:!1}))||this||q;B.object=t;B.type="BoxHelper";B.matrixAutoUpdate=
!1;B.update();return B}p(D,A);var r=D.prototype;r.update=function(t){void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==(this||q).object&&LP.setFromObject((this||q).object);if(!LP.isEmpty()){t=LP.min;var B=LP.max,I=(this||q).geometry.attributes.position,M=I.array;M[0]=B.x;M[1]=B.y;M[2]=B.z;M[3]=t.x;M[4]=B.y;M[5]=B.z;M[6]=t.x;M[7]=t.y;M[8]=B.z;M[9]=B.x;M[10]=t.y;M[11]=B.z;M[12]=B.x;M[13]=B.y;M[14]=t.z;M[15]=t.x;M[16]=B.y;M[17]=t.z;M[18]=t.x;M[19]=t.y;M[20]=t.z;
M[21]=B.x;M[22]=t.y;M[23]=t.z;I.needsUpdate=!0;(this||q).geometry.computeBoundingSphere()}};r.setFromObject=function(t){(this||q).object=t;this.update();return this||q};r.copy=function(t){Nn.prototype.copy.call(this||q,t);(this||q).object=t.object;return this||q};return D}(Nn),sza=function(A){function D(r,t){void 0===t&&(t=16776960);var B=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),I=new ya;I.setIndex(new Ia(B,1));I.setAttribute("position",new ob([1,1,1,-1,1,1,-1,-1,1,1,-1,
1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));t=A.call(this||q,I,new Dm({color:t,toneMapped:!1}))||this||q;t.box=r;t.type="Box3Helper";t.geometry.computeBoundingSphere();return t}p(D,A);D.prototype.updateMatrixWorld=function(r){var t=(this||q).box;t.isEmpty()||(t.getCenter((this||q).position),t.getSize((this||q).scale),(this||q).scale.multiplyScalar(.5),A.prototype.updateMatrixWorld.call(this||q,r))};return D}(Nn),tza=function(A){function D(r,t,B){void 0===t&&(t=1);void 0===B&&(B=16776960);var I=new ya;
I.setAttribute("position",new ob([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));I.computeBoundingSphere();I=A.call(this||q,I,new Dm({color:B,toneMapped:!1}))||this||q;I.type="PlaneHelper";I.plane=r;I.size=t;r=new ya;r.setAttribute("position",new ob([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));r.computeBoundingSphere();I.add(new Sa(r,new ot({color:B,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})));return I}p(D,A);D.prototype.updateMatrixWorld=function(r){var t=
-(this||q).plane.constant;1E-8>Math.abs(t)&&(t=1E-8);(this||q).scale.set(.5*(this||q).size,.5*(this||q).size,t);(this||q).children[0].material.side=0>t?1:0;this.lookAt((this||q).plane.normal);A.prototype.updateMatrixWorld.call(this||q,r)};return D}(Tq),qfa=new jc,MP,NZ,uza=function(A){function D(t,B,I,M,U,Z){void 0===t&&(t=new jc(0,0,1));void 0===B&&(B=new jc(0,0,0));void 0===I&&(I=1);void 0===M&&(M=16776960);void 0===U&&(U=.2*I);void 0===Z&&(Z=.2*U);var aa=A.call(this||q)||this||q;aa.type="ArrowHelper";
void 0===MP&&(MP=new ya,MP.setAttribute("position",new ob([0,0,0,0,1,0],3)),NZ=new TB(0,.5,1,5,1),NZ.translate(0,-.5,0));aa.position.copy(B);aa.line=new Tq(MP,new Dm({color:M,toneMapped:!1}));aa.line.matrixAutoUpdate=!1;aa.add(aa.line);aa.cone=new Sa(NZ,new ot({color:M,toneMapped:!1}));aa.cone.matrixAutoUpdate=!1;aa.add(aa.cone);aa.setDirection(t);aa.setLength(I,U,Z);return aa}p(D,A);var r=D.prototype;r.setDirection=function(t){.99999<t.y?(this||q).quaternion.set(0,0,0,1):-.99999>t.y?(this||q).quaternion.set(1,
0,0,0):(qfa.set(t.z,0,-t.x).normalize(),(this||q).quaternion.setFromAxisAngle(qfa,Math.acos(t.y)))};r.setLength=function(t,B,I){void 0===B&&(B=.2*t);void 0===I&&(I=.2*B);(this||q).line.scale.set(1,Math.max(1E-4,t-B),1);(this||q).line.updateMatrix();(this||q).cone.scale.set(I,B,I);(this||q).cone.position.y=t;(this||q).cone.updateMatrix()};r.setColor=function(t){(this||q).line.material.color.set(t);(this||q).cone.material.color.set(t)};r.copy=function(t){A.prototype.copy.call(this||q,t,!1);(this||q).line.copy(t.line);
(this||q).cone.copy(t.cone);return this||q};return D}(P),rfa=function(A){function D(r){void 0===r&&(r=1);var t=[0,0,0,r,0,0,0,0,0,0,r,0,0,0,0,0,0,r];r=new ya;r.setAttribute("position",new ob(t,3));r.setAttribute("color",new ob([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));t=new Dm({vertexColors:!0,toneMapped:!1});r=A.call(this||q,r,t)||this||q;r.type="AxesHelper";return r}p(D,A);return D}(Nn),sfa=new Float32Array(1),vza=new Int32Array(sfa.buffer),xt,es=Math.pow(2,8),tfa=[.125,.215,.35,.446,.526,.582],
ufa=5+tfa.length,fs=(xt={},xt[3E3]=0,xt[3001]=1,xt[3002]=2,xt[3004]=3,xt[3005]=4,xt[3006]=5,xt[3007]=6,xt),wy=new ot({side:1,depthWrite:!1,depthTest:!1}),wza=new Sa(new iy,wy),OZ=new xG,PZ=function(){for(var A=[],D=[],r=[],t=8,B=0;B<ufa;B++){var I=Math.pow(2,t);D.push(I);var M=1/I;4<B?M=tfa[B-8+4-1]:0==B&&(M=0);r.push(M);M=1/(I-1);I=-M/2;M=1+M/2;var U=[I,I,M,I,M,M,I,I,M,M,I,M];I=new Float32Array(108);M=new Float32Array(72);for(var Z=new Float32Array(36),aa=0;6>aa;aa++){var oa=aa%3*2/3-1,wa=2<aa?0:
-1;I.set([oa,wa,0,oa+2/3,wa,0,oa+2/3,wa+1,0,oa,wa,0,oa+2/3,wa+1,0,oa,wa+1,0],18*aa);M.set(U,12*aa);Z.set([aa,aa,aa,aa,aa,aa],6*aa)}U=new ya;U.setAttribute("position",new Ia(I,3));U.setAttribute("uv",new Ia(M,2));U.setAttribute("faceIndex",new Ia(Z,1));A.push(U);4<t&&t--}return{_lodPlanes:A,_sizeLods:D,_sigmas:r}}(),zG=PZ._lodPlanes,vfa=PZ._sizeLods,NP=PZ._sigmas,wfa=new Zf,QZ=null,xy=(1+Math.sqrt(5))/2,WB=1/xy,xfa=[new jc(1,1,1),new jc(-1,1,1),new jc(1,1,-1),new jc(-1,1,-1),new jc(0,xy,WB),new jc(0,
xy,-WB),new jc(WB,0,xy),new jc(-WB,0,xy),new jc(xy,WB,0),new jc(-xy,WB,0)],xza=function(){function A(r){(this||q)._renderer=r;(this||q)._pingPongRenderTarget=null;r=new Float32Array(20);var t=new jc(0,1,0);r=new DB({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:fs[3E3]},outputEncoding:{value:fs[3E3]}},vertexShader:LY(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t"+
MY()+"\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1});(this||q)._blurMaterial=r;(this||q)._equirectShader=null;(this||q)._cubemapShader=null;this._compileMaterial((this||q)._blurMaterial)}var D=A.prototype;D.fromScene=function(r,t,B,I){void 0===t&&(t=0);void 0===B&&(B=.1);void 0===I&&(I=100);QZ=(this||q)._renderer.getRenderTarget();var M=this._allocateTargets();this._sceneToCubeUV(r,B,I,M);0<t&&this._blur(M,0,0,t);this._applyPMREM(M);this._cleanup(M);return M};D.fromEquirectangular=function(r){return this._fromTexture(r)};
D.fromCubemap=function(r){return this._fromTexture(r)};D.compileCubemapShader=function(){null===(this||q)._cubemapShader&&((this||q)._cubemapShader=Xda(),this._compileMaterial((this||q)._cubemapShader))};D.compileEquirectangularShader=function(){null===(this||q)._equirectShader&&((this||q)._equirectShader=Wda(),this._compileMaterial((this||q)._equirectShader))};D.dispose=function(){(this||q)._blurMaterial.dispose();null!==(this||q)._cubemapShader&&(this||q)._cubemapShader.dispose();null!==(this||
q)._equirectShader&&(this||q)._equirectShader.dispose();for(var r=0;r<zG.length;r++)zG[r].dispose()};D._cleanup=function(r){(this||q)._pingPongRenderTarget.dispose();(this||q)._renderer.setRenderTarget(QZ);r.scissorTest=!1;VO(r,0,0,r.width,r.height)};D._fromTexture=function(r){QZ=(this||q)._renderer.getRenderTarget();var t=this._allocateTargets(r);this._textureToCubeUV(r,t);this._applyPMREM(t);this._cleanup(t);return t};D._allocateTargets=function(r){var t=void 0===r||1009!==r.type?!1:3E3===r.encoding||
3001===r.encoding||3007===r.encoding;t={magFilter:1003,minFilter:1003,generateMipmaps:!1,type:1009,format:1023,encoding:t?r.encoding:3002,depthBuffer:!1};var B=Vda(t);B.depthBuffer=r?!1:!0;(this||q)._pingPongRenderTarget=Vda(t);return B};D._compileMaterial=function(r){r=new Sa(zG[0],r);(this||q)._renderer.compile(r,OZ)};D._sceneToCubeUV=function(r,t,B,I){t=new Nb(90,1,t,B);B=[1,-1,1,1,1,1];var M=[1,1,1,-1,-1,-1],U=(this||q)._renderer,Z=U.autoClear,aa=U.outputEncoding,oa=U.toneMapping;U.getClearColor(wfa);
U.toneMapping=0;U.outputEncoding=3E3;var wa=U.autoClear=!1,Oa=r.background;Oa?Oa.isColor&&(wy.color.copy(Oa).convertSRGBToLinear(),r.background=null,wa=Uda(wy.color),wy.opacity=wa,wa=!0):(wy.color.copy(wfa).convertSRGBToLinear(),wa=Uda(wy.color),wy.opacity=wa,wa=!0);for(Oa=0;6>Oa;Oa++){var Ya=Oa%3;0==Ya?(t.up.set(0,B[Oa],0),t.lookAt(M[Oa],0,0)):1==Ya?(t.up.set(0,0,B[Oa]),t.lookAt(0,M[Oa],0)):(t.up.set(0,B[Oa],0),t.lookAt(0,0,M[Oa]));VO(I,Ya*es,2<Oa?es:0,es,es);U.setRenderTarget(I);wa&&U.render(wza,
t);U.render(r,t)}U.toneMapping=oa;U.outputEncoding=aa;U.autoClear=Z};D._textureToCubeUV=function(r,t){var B=(this||q)._renderer;r.isCubeTexture?null==(this||q)._cubemapShader&&((this||q)._cubemapShader=Xda()):null==(this||q)._equirectShader&&((this||q)._equirectShader=Wda());var I=r.isCubeTexture?(this||q)._cubemapShader:(this||q)._equirectShader,M=new Sa(zG[0],I);I=I.uniforms;I.envMap.value=r;r.isCubeTexture||I.texelSize.value.set(1/r.image.width,1/r.image.height);I.inputEncoding.value=fs[r.encoding];
I.outputEncoding.value=fs[t.texture.encoding];VO(t,0,0,3*es,2*es);B.setRenderTarget(t);B.render(M,OZ)};D._applyPMREM=function(r){var t=(this||q)._renderer,B=t.autoClear;t.autoClear=!1;for(var I=1;I<ufa;I++)this._blur(r,I-1,I,Math.sqrt(NP[I]*NP[I]-NP[I-1]*NP[I-1]),xfa[(I-1)%xfa.length]);t.autoClear=B};D._blur=function(r,t,B,I,M){var U=(this||q)._pingPongRenderTarget;this._halfBlur(r,U,t,B,I,"latitudinal",M);this._halfBlur(U,r,B,B,I,"longitudinal",M)};D._halfBlur=function(r,t,B,I,M,U,Z){var aa=(this||
q)._renderer,oa=(this||q)._blurMaterial;"latitudinal"!==U&&"longitudinal"!==U&&console.error("blur direction must be either latitudinal or longitudinal!");var wa=new Sa(zG[I],oa);oa=oa.uniforms;var Oa=vfa[B]-1;Oa=isFinite(M)?Math.PI/(2*Oa):2*Math.PI/39;var Ya=M/Oa,ab=isFinite(M)?1+Math.floor(3*Ya):20;20<ab&&console.warn("sigmaRadians, "+M+", is too large and will clip, as it requested "+ab+" samples when the maximum is set to 20");M=[];for(var zb=0,sb=0;20>sb;++sb){var nc=sb/Ya;nc=Math.exp(-nc*nc/
2);M.push(nc);0==sb?zb+=nc:sb<ab&&(zb+=2*nc)}for(Ya=0;Ya<M.length;Ya++)M[Ya]/=zb;oa.envMap.value=r.texture;oa.samples.value=ab;oa.weights.value=M;oa.latitudinal.value="latitudinal"===U;Z&&(oa.poleAxis.value=Z);oa.dTheta.value=Oa;oa.mipInt.value=8-B;oa.inputEncoding.value=fs[r.texture.encoding];oa.outputEncoding.value=fs[r.texture.encoding];r=vfa[I];VO(t,3*Math.max(0,es-2*r),(0===I?0:2*es)+2*r*(4<I?I-8+4:0),3*r,2*r);aa.setRenderTarget(t);aa.render(wa,OZ)};return A}();On.create=function(A,D){console.log("THREE.Curve.create() has been deprecated");
A.prototype=Object.create(On.prototype);A.prototype.constructor=A;A.prototype.getPoint=D;return A};vG.prototype.fromPoints=function(A){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");return this.setFromPoints(A)};mfa.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};jfa.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};il.prototype.extractUrlBase=
function(A){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");return IZ.extractUrlBase(A)};il.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};VB.prototype.center=function(A){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");
return this.getCenter(A)};VB.prototype.empty=function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()};VB.prototype.isIntersectionBox=function(A){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(A)};VB.prototype.size=function(A){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(A)};no.prototype.center=function(A){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");
return this.getCenter(A)};no.prototype.empty=function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()};no.prototype.isIntersectionBox=function(A){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(A)};no.prototype.isIntersectionSphere=function(A){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(A)};no.prototype.size=function(A){console.warn("THREE.Box3: .size() has been renamed to .getSize().");
return this.getSize(A)};ov.prototype.empty=function(){console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty().");return this.isEmpty()};NF.prototype.setFromMatrix=function(A){console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().");return this.setFromProjectionMatrix(A)};hfa.prototype.center=function(A){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(A)};oh.random16=function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");
return Math.random()};oh.nearestPowerOfTwo=function(A){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");return oh.floorPowerOfTwo(A)};oh.nextPowerOfTwo=function(A){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return oh.ceilPowerOfTwo(A)};cm.prototype.flattenToArrayOffset=function(A,D){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(A,D)};cm.prototype.multiplyVector3=
function(A){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return A.applyMatrix3(this||q)};cm.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};cm.prototype.applyToBufferAttribute=function(A){console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.");return A.applyMatrix3(this||q)};cm.prototype.applyToVector3Array=
function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};cm.prototype.getInverse=function(A){console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.");return this.copy(A).invert()};Fg.prototype.extractPosition=function(A){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(A)};Fg.prototype.flattenToArrayOffset=function(A,D){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");
return this.toArray(A,D)};Fg.prototype.getPosition=function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return(new jc).setFromMatrixColumn(this||q,3)};Fg.prototype.setRotationFromQuaternion=function(A){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(A)};Fg.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};
Fg.prototype.multiplyVector3=function(A){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return A.applyMatrix4(this||q)};Fg.prototype.multiplyVector4=function(A){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return A.applyMatrix4(this||q)};Fg.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};Fg.prototype.rotateAxis=
function(A){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");A.transformDirection(this||q)};Fg.prototype.crossVector=function(A){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return A.applyMatrix4(this||q)};Fg.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};Fg.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};
Fg.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};Fg.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};Fg.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};Fg.prototype.applyToBufferAttribute=function(A){console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.");return A.applyMatrix4(this||q)};Fg.prototype.applyToVector3Array=
function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};Fg.prototype.makeFrustum=function(A,D,r,t,B,I){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(A,D,t,r,B,I)};Fg.prototype.getInverse=function(A){console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.");return this.copy(A).invert()};Oq.prototype.isIntersectionLine=
function(A){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(A)};Cm.prototype.multiplyVector3=function(A){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return A.applyQuaternion(this||q)};Cm.prototype.inverse=function(){console.warn("THREE.Quaternion: .inverse() has been renamed to invert().");return this.invert()};lv.prototype.isIntersectionBox=function(A){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");
return this.intersectsBox(A)};lv.prototype.isIntersectionPlane=function(A){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(A)};lv.prototype.isIntersectionSphere=function(A){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(A)};Ln.prototype.area=function(){console.warn("THREE.Triangle: .area() has been renamed to .getArea().");return this.getArea()};Ln.prototype.barycoordFromPoint=
function(A,D){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return this.getBarycoord(A,D)};Ln.prototype.midpoint=function(A){console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint().");return this.getMidpoint(A)};Ln.prototypenormal=function(A){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return this.getNormal(A)};Ln.prototype.plane=function(A){console.warn("THREE.Triangle: .plane() has been renamed to .getPlane().");
return this.getPlane(A)};Ln.barycoordFromPoint=function(A,D,r,t,B){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return Ln.getBarycoord(A,D,r,t,B)};Ln.normal=function(A,D,r,t){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return Ln.getNormal(A,D,r,t)};sv.prototype.extractAllPoints=function(A){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(A)};sv.prototype.extrude=
function(A){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new wt(this||q,A)};sv.prototype.makeGeometry=function(A){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new qG(this||q,A)};Ye.prototype.fromAttribute=function(A,D,r){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(A,D,r)};Ye.prototype.distanceToManhattan=function(A){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");
return this.manhattanDistanceTo(A)};Ye.prototype.lengthManhattan=function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()};jc.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};jc.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};
jc.prototype.getPositionFromMatrix=function(A){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(A)};jc.prototype.getScaleFromMatrix=function(A){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(A)};jc.prototype.getColumnFromMatrix=function(A,D){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");
return this.setFromMatrixColumn(D,A)};jc.prototype.applyProjection=function(A){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(A)};jc.prototype.fromAttribute=function(A,D,r){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(A,D,r)};jc.prototype.distanceToManhattan=function(A){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");
return this.manhattanDistanceTo(A)};jc.prototype.lengthManhattan=function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()};Xj.prototype.fromAttribute=function(A,D,r){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(A,D,r)};Xj.prototype.lengthManhattan=function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");
return this.manhattanLength()};P.prototype.getChildByName=function(A){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(A)};P.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};P.prototype.translate=function(A,D){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(D,A)};P.prototype.getWorldRotation=
function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};P.prototype.applyMatrix=function(A){console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(A)};Object.defineProperties(P.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return(this||q).rotation.order},set:function(A){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");
(this||q).rotation.order=A}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Sa.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};
Object.defineProperties(Sa.prototype,{drawMode:{get:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.");return 0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(dZ.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");
return(this||q).levels}}});Object.defineProperty(eZ.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});TF.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(On.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");
return(this||q).arcLengthDivisions},set:function(A){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");(this||q).arcLengthDivisions=A}});Nb.prototype.setLens=function(A,D){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==D&&((this||q).filmGauge=D);this.setFocalLength(A)};Object.defineProperties(Xq.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},
shadowCameraFov:{set:function(A){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");(this||q).shadow.camera.fov=A}},shadowCameraLeft:{set:function(A){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");(this||q).shadow.camera.left=A}},shadowCameraRight:{set:function(A){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");(this||q).shadow.camera.right=A}},shadowCameraTop:{set:function(A){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");
(this||q).shadow.camera.top=A}},shadowCameraBottom:{set:function(A){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");(this||q).shadow.camera.bottom=A}},shadowCameraNear:{set:function(A){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");(this||q).shadow.camera.near=A}},shadowCameraFar:{set:function(A){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");(this||q).shadow.camera.far=A}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},
shadowBias:{set:function(A){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");(this||q).shadow.bias=A}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(A){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");(this||q).shadow.mapSize.width=A}},shadowMapHeight:{set:function(A){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");(this||q).shadow.mapSize.height=A}}});
Object.defineProperties(Ia.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return(this||q).array.length}},dynamic:{get:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");return 35048===(this||q).usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");this.setUsage(35048)}}});Ia.prototype.setDynamic=function(A){console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.");
this.setUsage(!0===A?35048:35044);return this||q};Ia.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")};Ia.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};ya.prototype.addIndex=function(A){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(A)};ya.prototype.addAttribute=
function(A,D,r){console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().");return D&&D.isBufferAttribute||D&&D.isInterleavedBufferAttribute?"index"===A?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(D),this||q):this.setAttribute(A,D):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(A,new Ia(D,r)))};ya.prototype.addDrawCall=function(A,D,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");
console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(A,D)};ya.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()};ya.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};ya.prototype.removeAttribute=function(A){console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().");return this.deleteAttribute(A)};
ya.prototype.applyMatrix=function(A){console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(A)};Object.defineProperties(ya.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return(this||q).groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return(this||q).groups}}});Object.defineProperties(cG.prototype,{maxInstancedCount:{get:function(){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");
return(this||q).instanceCount},set:function(A){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");(this||q).instanceCount=A}}});Object.defineProperties(JY.prototype,{linePrecision:{get:function(){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");return(this||q).params.Line.threshold},set:function(A){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");
(this||q).params.Line.threshold=A}}});Object.defineProperties(mo.prototype,{dynamic:{get:function(){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");return 35048===(this||q).usage},set:function(A){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");this.setUsage(A)}}});mo.prototype.setDynamic=function(A){console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.");this.setUsage(!0===
A?35048:35044);return this||q};mo.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};wt.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};wt.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};wt.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};
gP.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(efa.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this||q}}});Object.defineProperties(da.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},
set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new Zf}},shading:{get:function(){console.error("THREE."+(this||q).type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(A){console.warn("THREE."+
(this||q).type+": .shading has been removed. Use the boolean .flatShading instead.");(this||q).flatShading=1===A}},stencilMask:{get:function(){console.warn("THREE."+(this||q).type+": .stencilMask has been removed. Use .stencilFuncMask instead.");return(this||q).stencilFuncMask},set:function(A){console.warn("THREE."+(this||q).type+": .stencilMask has been removed. Use .stencilFuncMask instead.");(this||q).stencilFuncMask=A}}});Object.defineProperties(BP.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");
return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(kv.prototype,{transparency:{get:function(){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.");return(this||q).transmission},set:function(A){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.");(this||q).transmission=A}}});Object.defineProperties(fc.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");
return(this||q).extensions.derivatives},set:function(A){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");(this||q).extensions.derivatives=A}}});lk.prototype.clearTarget=function(A,D,r,t){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.");this.setRenderTarget(A);this.clear(D,r,t)};lk.prototype.animate=function(A){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop().");
this.setAnimationLoop(A)};lk.prototype.getCurrentRenderTarget=function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()};lk.prototype.getMaxAnisotropy=function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return(this||q).capabilities.getMaxAnisotropy()};lk.prototype.getPrecision=function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");
return(this||q).capabilities.precision};lk.prototype.resetGLState=function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return(this||q).state.reset()};lk.prototype.supportsFloatTextures=function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return(this||q).extensions.get("OES_texture_float")};lk.prototype.supportsHalfFloatTextures=function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");
return(this||q).extensions.get("OES_texture_half_float")};lk.prototype.supportsStandardDerivatives=function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return(this||q).extensions.get("OES_standard_derivatives")};lk.prototype.supportsCompressedTextureS3TC=function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return(this||q).extensions.get("WEBGL_compressed_texture_s3tc")};
lk.prototype.supportsCompressedTexturePVRTC=function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return(this||q).extensions.get("WEBGL_compressed_texture_pvrtc")};lk.prototype.supportsBlendMinMax=function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return(this||q).extensions.get("EXT_blend_minmax")};lk.prototype.supportsVertexTextures=function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");
return(this||q).capabilities.vertexTextures};lk.prototype.supportsInstancedArrays=function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return(this||q).extensions.get("ANGLE_instanced_arrays")};lk.prototype.enableScissorTest=function(A){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(A)};lk.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};
lk.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};lk.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};lk.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};lk.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};lk.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};
lk.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};lk.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};lk.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};lk.prototype.getActiveMipMapLevel=function(){console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().");return this.getActiveMipmapLevel()};
Object.defineProperties(lk.prototype,{shadowMapEnabled:{get:function(){return(this||q).shadowMap.enabled},set:function(A){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");(this||q).shadowMap.enabled=A}},shadowMapType:{get:function(){return(this||q).shadowMap.type},set:function(A){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");(this||q).shadowMap.type=A}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},
set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.");return this.getContext()}},vr:{get:function(){console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr");return(this||q).xr}},gammaInput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.");
return!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");return!1},set:function(A){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");(this||q).outputEncoding=!0===A?3001:3E3}},toneMappingWhitePoint:{get:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.");
return 1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(zda.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},
set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(pt.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");
return(this||q).texture.wrapS},set:function(A){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");(this||q).texture.wrapS=A}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return(this||q).texture.wrapT},set:function(A){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");(this||q).texture.wrapT=A}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return(this||
q).texture.magFilter},set:function(A){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");(this||q).texture.magFilter=A}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return(this||q).texture.minFilter},set:function(A){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");(this||q).texture.minFilter=A}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");
return(this||q).texture.anisotropy},set:function(A){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");(this||q).texture.anisotropy=A}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return(this||q).texture.offset},set:function(A){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");(this||q).texture.offset=A}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");
return(this||q).texture.repeat},set:function(A){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");(this||q).texture.repeat=A}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return(this||q).texture.format},set:function(A){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");(this||q).texture.format=A}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return(this||q).texture.type},
set:function(A){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");(this||q).texture.type=A}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return(this||q).texture.generateMipmaps},set:function(A){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");(this||q).texture.generateMipmaps=A}}});Object.defineProperties(LZ.prototype,{load:{value:function(A){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");
var D=this||q;(new Tea).load(A,function(r){D.setBuffer(r)});return this||q}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});afa.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};eP.prototype.updateCubeMap=function(A,D){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(A,D)};eP.prototype.clear=function(A,D,r,t){console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear().");
return(this||q).renderTarget.clear(A,D,r,t)};gy.crossOrigin=void 0;gy.loadTexture=function(A,D,r,t){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var B=new SO;B.setCrossOrigin((this||q).crossOrigin);A=B.load(A,r,void 0,t);D&&(A.mapping=D);return A};gy.loadTextureCube=function(A,D,r,t){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var B=new Eea;B.setCrossOrigin((this||q).crossOrigin);
A=B.load(A,r,void 0,t);D&&(A.mapping=D);return A};gy.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};gy.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"126"}}));"undefined"!==typeof window&&(window.__THREE__?
console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="126");d.ACESFilmicToneMapping=4;d.AddEquation=100;d.AddOperation=2;d.AdditiveAnimationBlendMode=2501;d.AdditiveBlending=2;d.AlphaFormat=1021;d.AlwaysDepth=1;d.AlwaysStencilFunc=519;d.AmbientLight=FZ;d.AmbientLightProbe=Vea;d.AnimationClip=sG;d.AnimationLoader=Sya;d.AnimationMixer=dfa;d.AnimationObjectGroup=cfa;d.AnimationUtils=Jk;d.ArcCurve=rZ;d.ArrayCamera=GO;d.ArrowHelper=uza;d.Audio=LZ;d.AudioAnalyser=afa;
d.AudioContext=KZ;d.AudioListener=Yya;d.AudioLoader=Tea;d.AxesHelper=rfa;d.AxisHelper=function(A){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new rfa(A)};d.BackSide=1;d.BasicDepthPacking=3200;d.BasicShadowMap=0;d.BinaryTextureLoader=function(A){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new RO(A)};d.Bone=UF;d.BooleanKeyframeTrack=my;d.BoundingBoxHelper=function(A,D){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");
return new pfa(A,D)};d.Box2=VB;d.Box3=no;d.Box3Helper=sza;d.BoxBufferGeometry=iy;d.BoxGeometry=iy;d.BoxHelper=pfa;d.BufferAttribute=Ia;d.BufferGeometry=ya;d.BufferGeometryLoader=Pea;d.ByteType=1010;d.Cache=ry;d.Camera=Jc;d.CameraHelper=rza;d.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")};d.CanvasTexture=Cea;d.CatmullRomCurve3=vZ;d.CineonToneMapping=3;d.CircleBufferGeometry=oP;d.CircleGeometry=oP;d.ClampToEdgeWrapping=1001;d.Clock=Yea;d.Color=Zf;d.ColorKeyframeTrack=
CY;d.CompressedTexture=hZ;d.CompressedTextureLoader=EY;d.ConeBufferGeometry=pP;d.ConeGeometry=pP;d.CubeCamera=eP;d.CubeReflectionMapping=301;d.CubeRefractionMapping=302;d.CubeTexture=OB;d.CubeTextureLoader=Eea;d.CubeUVReflectionMapping=306;d.CubeUVRefractionMapping=307;d.CubicBezierCurve=EP;d.CubicBezierCurve3=wZ;d.CubicInterpolant=OO;d.CullFaceBack=1;d.CullFaceFront=2;d.CullFaceFrontBack=3;d.CullFaceNone=0;d.Curve=On;d.CurvePath=Gea;d.CustomBlending=5;d.CustomToneMapping=5;d.CylinderBufferGeometry=
TB;d.CylinderGeometry=TB;d.Cylindrical=kza;d.DataTexture=yB;d.DataTexture2DArray=ZY;d.DataTexture3D=$Y;d.DataTextureLoader=RO;d.DataUtils={toHalfFloat:function(A){sfa[0]=A;A=vza[0];var D=A>>16&32768,r=A>>12&2047,t=A>>23&255;return 103>t?D:142<t?D|31744|((255==t?0:1)&&A&8388607):113>t?(r|=2048,D|(r>>114-t)+(r>>113-t&1)):D=(D|t-112<<10|r>>1)+(r&1)}};d.DecrementStencilOp=7683;d.DecrementWrapStencilOp=34056;d.DefaultLoadingManager=Oda;d.DepthFormat=1026;d.DepthStencilFormat=1027;d.DepthTexture=Dea;d.DirectionalLight=
EZ;d.DirectionalLightHelper=qza;d.DiscreteInterpolant=PO;d.DodecahedronBufferGeometry=qP;d.DodecahedronGeometry=qP;d.DoubleSide=2;d.DstAlphaFactor=206;d.DstColorFactor=208;d.DynamicBufferAttribute=function(A,D){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.");return(new Ia(A,D)).setUsage(35048)};d.DynamicCopyUsage=35050;d.DynamicDrawUsage=35048;d.DynamicReadUsage=35049;d.EdgesGeometry=jZ;d.EdgesHelper=function(A,
D){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new Nn(new jZ(A.geometry),new Dm({color:void 0!==D?D:16777215}))};d.EllipseCurve=tG;d.EqualDepth=4;d.EqualStencilFunc=514;d.EquirectangularReflectionMapping=303;d.EquirectangularRefractionMapping=304;d.Euler=LF;d.EventDispatcher=J;d.ExtrudeBufferGeometry=wt;d.ExtrudeGeometry=wt;d.FaceColors=1;d.FileLoader=Pp;d.FlatShading=1;d.Float16BufferAttribute=ib;d.Float32Attribute=function(A,D){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");
return new ob(A,D)};d.Float32BufferAttribute=ob;d.Float64Attribute=function(A,D){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new Ea(A,D)};d.Float64BufferAttribute=Ea;d.FloatType=1015;d.Fog=bZ;d.FogExp2=aZ;d.Font=JZ;d.FontLoader=Vya;d.FrontSide=0;d.Frustum=NF;d.GLBufferAttribute=IY;d.GLSL1="100";d.GLSL3="300 es";d.GammaEncoding=3007;d.GreaterDepth=6;d.GreaterEqualDepth=5;d.GreaterEqualStencilFunc=518;d.GreaterStencilFunc=516;d.GridHelper=
mfa;d.Group=py;d.HalfFloatType=1016;d.HemisphereLight=zZ;d.HemisphereLightHelper=oza;d.HemisphereLightProbe=Uea;d.IcosahedronBufferGeometry=tP;d.IcosahedronGeometry=tP;d.ImageBitmapLoader=GY;d.ImageLoader=CP;d.ImageUtils=gy;d.ImmediateRenderObject=dG;d.IncrementStencilOp=7682;d.IncrementWrapStencilOp=34055;d.InstancedBufferAttribute=TO;d.InstancedBufferGeometry=cG;d.InstancedInterleavedBuffer=HY;d.InstancedMesh=KO;d.Int16Attribute=function(A,D){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");
return new ca(A,D)};d.Int16BufferAttribute=ca;d.Int32Attribute=function(A,D){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new la(A,D)};d.Int32BufferAttribute=la;d.Int8Attribute=function(A,D){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new N(A,D)};d.Int8BufferAttribute=N;d.IntType=1013;d.InterleavedBuffer=mo;d.InterleavedBufferAttribute=iv;d.Interpolant=Vo;d.InterpolateDiscrete=
2300;d.InterpolateLinear=2301;d.InterpolateSmooth=2302;d.InvertStencilOp=5386;d.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")};d.KeepStencilOp=7680;d.KeyframeTrack=Vq;d.LOD=dZ;d.LatheBufferGeometry=uP;d.LatheGeometry=uP;d.Layers=qY;d.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")};d.LessDepth=2;d.LessEqualDepth=3;d.LessEqualStencilFunc=515;d.LessStencilFunc=513;d.Light=Xq;d.LightProbe=yG;d.Line=Tq;d.Line3=hfa;
d.LineBasicMaterial=Dm;d.LineCurve=uG;d.LineCurve3=Fea;d.LineDashedMaterial=qZ;d.LineLoop=gZ;d.LinePieces=1;d.LineSegments=Nn;d.LineStrip=0;d.LinearEncoding=3E3;d.LinearFilter=1006;d.LinearInterpolant=YF;d.LinearMipMapLinearFilter=1008;d.LinearMipMapNearestFilter=1007;d.LinearMipmapLinearFilter=1008;d.LinearMipmapNearestFilter=1007;d.LinearToneMapping=1;d.Loader=il;d.LoaderUtils=IZ;d.LoadingManager=DY;d.LogLuvEncoding=3003;d.LoopOnce=2200;d.LoopPingPong=2202;d.LoopRepeat=2201;d.LuminanceAlphaFormat=
1025;d.LuminanceFormat=1024;d.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};d.Material=da;d.MaterialLoader=Oea;d.Math=oh;d.MathUtils=oh;d.Matrix3=cm;d.Matrix4=Fg;d.MaxEquation=104;d.Mesh=Sa;d.MeshBasicMaterial=ot;d.MeshDepthMaterial=EO;d.MeshDistanceMaterial=FO;d.MeshFaceMaterial=function(A){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return A};d.MeshLambertMaterial=oZ;d.MeshMatcapMaterial=pZ;d.MeshNormalMaterial=nZ;d.MeshPhongMaterial=BP;d.MeshPhysicalMaterial=
kv;d.MeshStandardMaterial=ds;d.MeshToonMaterial=mZ;d.MinEquation=103;d.MirroredRepeatWrapping=1002;d.MixOperation=1;d.MultiMaterial=function(A){void 0===A&&(A=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");A.isMultiMaterial=!0;A.materials=A;A.clone=function(){return A.slice()};return A};d.MultiplyBlending=4;d.MultiplyOperation=0;d.NearestFilter=1003;d.NearestMipMapLinearFilter=1005;d.NearestMipMapNearestFilter=1004;d.NearestMipmapLinearFilter=1005;d.NearestMipmapNearestFilter=
1004;d.NeverDepth=0;d.NeverStencilFunc=512;d.NoBlending=0;d.NoColors=0;d.NoToneMapping=0;d.NormalAnimationBlendMode=2500;d.NormalBlending=1;d.NotEqualDepth=7;d.NotEqualStencilFunc=517;d.NumberKeyframeTrack=ZF;d.Object3D=P;d.ObjectLoader=Uya;d.ObjectSpaceNormalMap=1;d.OctahedronBufferGeometry=pG;d.OctahedronGeometry=pG;d.OneFactor=201;d.OneMinusDstAlphaFactor=207;d.OneMinusDstColorFactor=209;d.OneMinusSrcAlphaFactor=205;d.OneMinusSrcColorFactor=203;d.OrthographicCamera=xG;d.PCFShadowMap=1;d.PCFSoftShadowMap=
2;d.PMREMGenerator=xza;d.ParametricBufferGeometry=ly;d.ParametricGeometry=ly;d.Particle=function(A){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new kP(A)};d.ParticleBasicMaterial=function(A){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new ky(A)};d.ParticleSystem=function(A,D){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new AB(A,D)};d.ParticleSystemMaterial=function(A){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");
return new ky(A)};d.Path=vG;d.PerspectiveCamera=Nb;d.Plane=Oq;d.PlaneBufferGeometry=MF;d.PlaneGeometry=MF;d.PlaneHelper=tza;d.PointCloud=function(A,D){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new AB(A,D)};d.PointCloudMaterial=function(A){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new ky(A)};d.PointLight=DZ;d.PointLightHelper=mza;d.Points=AB;d.PointsMaterial=ky;d.PolarGridHelper=pza;d.PolyhedronBufferGeometry=rv;d.PolyhedronGeometry=
rv;d.PositionalAudio=$ya;d.PropertyBinding=on;d.PropertyMixer=bfa;d.QuadraticBezierCurve=FP;d.QuadraticBezierCurve3=xZ;d.Quaternion=Cm;d.QuaternionKeyframeTrack=CB;d.QuaternionLinearInterpolant=QO;d.REVISION="126";d.RGBADepthPacking=3201;d.RGBAFormat=1023;d.RGBAIntegerFormat=1033;d.RGBA_ASTC_10x10_Format=37819;d.RGBA_ASTC_10x5_Format=37816;d.RGBA_ASTC_10x6_Format=37817;d.RGBA_ASTC_10x8_Format=37818;d.RGBA_ASTC_12x10_Format=37820;d.RGBA_ASTC_12x12_Format=37821;d.RGBA_ASTC_4x4_Format=37808;d.RGBA_ASTC_5x4_Format=
37809;d.RGBA_ASTC_5x5_Format=37810;d.RGBA_ASTC_6x5_Format=37811;d.RGBA_ASTC_6x6_Format=37812;d.RGBA_ASTC_8x5_Format=37813;d.RGBA_ASTC_8x6_Format=37814;d.RGBA_ASTC_8x8_Format=37815;d.RGBA_BPTC_Format=36492;d.RGBA_ETC2_EAC_Format=37496;d.RGBA_PVRTC_2BPPV1_Format=35843;d.RGBA_PVRTC_4BPPV1_Format=35842;d.RGBA_S3TC_DXT1_Format=33777;d.RGBA_S3TC_DXT3_Format=33778;d.RGBA_S3TC_DXT5_Format=33779;d.RGBDEncoding=3006;d.RGBEEncoding=3002;d.RGBEFormat=1023;d.RGBFormat=1022;d.RGBIntegerFormat=1032;d.RGBM16Encoding=
3005;d.RGBM7Encoding=3004;d.RGB_ETC1_Format=36196;d.RGB_ETC2_Format=37492;d.RGB_PVRTC_2BPPV1_Format=35841;d.RGB_PVRTC_4BPPV1_Format=35840;d.RGB_S3TC_DXT1_Format=33776;d.RGFormat=1030;d.RGIntegerFormat=1031;d.RawShaderMaterial=DB;d.Ray=lv;d.Raycaster=JY;d.RectAreaLight=GZ;d.RedFormat=1028;d.RedIntegerFormat=1029;d.ReinhardToneMapping=2;d.RepeatWrapping=1E3;d.ReplaceStencilOp=7681;d.ReverseSubtractEquation=102;d.RingBufferGeometry=vP;d.RingGeometry=vP;d.SRGB8_ALPHA8_ASTC_10x10_Format=37851;d.SRGB8_ALPHA8_ASTC_10x5_Format=
37848;d.SRGB8_ALPHA8_ASTC_10x6_Format=37849;d.SRGB8_ALPHA8_ASTC_10x8_Format=37850;d.SRGB8_ALPHA8_ASTC_12x10_Format=37852;d.SRGB8_ALPHA8_ASTC_12x12_Format=37853;d.SRGB8_ALPHA8_ASTC_4x4_Format=37840;d.SRGB8_ALPHA8_ASTC_5x4_Format=37841;d.SRGB8_ALPHA8_ASTC_5x5_Format=37842;d.SRGB8_ALPHA8_ASTC_6x5_Format=37843;d.SRGB8_ALPHA8_ASTC_6x6_Format=37844;d.SRGB8_ALPHA8_ASTC_8x5_Format=37845;d.SRGB8_ALPHA8_ASTC_8x6_Format=37846;d.SRGB8_ALPHA8_ASTC_8x8_Format=37847;d.Scene=gP;d.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},
detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};d.ShaderChunk=Hi;d.ShaderLib=Nq;d.ShaderMaterial=fc;d.ShadowMaterial=lZ;d.Shape=sv;d.ShapeBufferGeometry=qG;d.ShapeGeometry=qG;d.ShapePath=Sea;d.ShapeUtils=vt;d.ShortType=1011;d.Skeleton=eZ;d.SkeletonHelper=jfa;d.SkinnedMesh=TF;d.SmoothShading=2;d.Sphere=ov;d.SphereBufferGeometry=rG;d.SphereGeometry=
rG;d.Spherical=jza;d.SphericalHarmonics3=HZ;d.SplineCurve=GP;d.SpotLight=BZ;d.SpotLightHelper=lza;d.Sprite=kP;d.SpriteMaterial=hP;d.SrcAlphaFactor=204;d.SrcAlphaSaturateFactor=210;d.SrcColorFactor=202;d.StaticCopyUsage=35046;d.StaticDrawUsage=35044;d.StaticReadUsage=35045;d.StereoCamera=Wya;d.StreamCopyUsage=35042;d.StreamDrawUsage=35040;d.StreamReadUsage=35041;d.StringKeyframeTrack=ny;d.SubtractEquation=101;d.SubtractiveBlending=3;d.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};d.TangentSpaceNormalMap=
0;d.TetrahedronBufferGeometry=wP;d.TetrahedronGeometry=wP;d.TextBufferGeometry=xP;d.TextGeometry=xP;d.Texture=pn;d.TextureLoader=SO;d.TorusBufferGeometry=yP;d.TorusGeometry=yP;d.TorusKnotBufferGeometry=zP;d.TorusKnotGeometry=zP;d.Triangle=Ln;d.TriangleFanDrawMode=2;d.TriangleStripDrawMode=1;d.TrianglesDrawMode=0;d.TubeBufferGeometry=AP;d.TubeGeometry=AP;d.UVMapping=300;d.Uint16Attribute=function(A,D){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");
return new sa(A,D)};d.Uint16BufferAttribute=sa;d.Uint32Attribute=function(A,D){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new Aa(A,D)};d.Uint32BufferAttribute=Aa;d.Uint8Attribute=function(A,D){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new ia(A,D)};d.Uint8BufferAttribute=ia;d.Uint8ClampedAttribute=function(A,D){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");
return new W(A,D)};d.Uint8ClampedBufferAttribute=W;d.Uniform=efa;d.UniformsLib=Lf;d.UniformsUtils=yda;d.UnsignedByteType=1009;d.UnsignedInt248Type=1020;d.UnsignedIntType=1014;d.UnsignedShort4444Type=1017;d.UnsignedShort5551Type=1018;d.UnsignedShort565Type=1019;d.UnsignedShortType=1012;d.VSMShadowMap=3;d.Vector2=Ye;d.Vector3=jc;d.Vector4=Xj;d.VectorKeyframeTrack=$F;d.Vertex=function(A,D,r){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new jc(A,D,r)};d.VertexColors=
2;d.VideoTexture=Bea;d.WebGL1Renderer=kea;d.WebGLCubeRenderTarget=DO;d.WebGLMultisampleRenderTarget=Zda;d.WebGLRenderTarget=pt;d.WebGLRenderTargetCube=function(A,D,r){console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).");return new DO(A,r)};d.WebGLRenderer=lk;d.WebGLUtils=Ada;d.WireframeGeometry=kZ;d.WireframeHelper=function(A,D){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new Nn(new kZ(A.geometry),
new Dm({color:void 0!==D?D:16777215}))};d.WrapAroundEnding=2402;d.XHRLoader=function(A){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new Pp(A)};d.ZeroCurvatureEnding=2400;d.ZeroFactor=200;d.ZeroSlopeEnding=2401;d.ZeroStencilOp=0;d.sRGBEncoding=3001;Object.defineProperty(d,"__esModule",{value:!0})});return vB}(),di=lively.FreezerRuntime.recorderFor("WebGLCanvas/index.js");di.Canvas=KF;di.THREE=yza;var qn=di.THREE;di.Scene=qn.Scene;di.SpotLight=qn.SpotLight;di.MeshBasicMaterial=
qn.MeshBasicMaterial;di.BackSide=qn.BackSide;di.ImageUtils=qn.ImageUtils;di.Color=qn.Color;di.MeshPhongMaterial=qn.MeshPhongMaterial;di.SphereGeometry=qn.SphereGeometry;di.Mesh=qn.Mesh;di.DirectionalLight=qn.DirectionalLight;di.AmbientLight=qn.AmbientLight;di.WebGLRenderer=qn.WebGLRenderer;di.PerspectiveCamera=qn.PerspectiveCamera;di.TextureLoader=qn.TextureLoader;di.BoxGeometry=qn.BoxGeometry;di.MeshNormalMaterial=qn.MeshNormalMaterial;di.easings=No;var yfa=function(a){var d=lively.FreezerRuntime.recorderFor("WebGLCanvas/index.js"),
k=d.hasOwnProperty("WebGLCanvas")&&"function"===typeof d.WebGLCanvas?d.WebGLCanvas:d.WebGLCanvas=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"context",get:function(){return navigator.webdriver?this._canvas&&this._canvas.getContext("2d"):this._canvas&&this._canvas.getContext(this.contextType,{preserveDrawingBuffer:!0})}},{key:"restoreContent",value:function(b,e){this.renderer&&b&&b!==e&&(this.owner.context.drawImage(this.renderer.getContext().canvas,
0,0),this.renderer=new di.WebGLRenderer({context:this.context,antialiasing:!0}),this.renderer.setSize(this.width,this.height))}},{key:"onExtentChanged",value:function(){}},{key:"relayout",value:function(){var b=this;this.renderLoop&&(setTimeout(function(){return b.owner.context.drawImage(b.renderer.getContext().canvas,0,0)}),this.renderer.setSize(this.width,this.height),this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix())}},{key:"stopAnimation",value:function(){this.renderLoop&&
(cancelAnimationFrame(this.renderLoop),this.renderer.dispose())}},{key:"renderGlobe",value:function(){var b=this;this.stopAnimation();this.withContextDo(function(e){var l=b.width,p=b.height,u=new di.Scene,x=new di.PerspectiveCamera(45,l/p,.01,1E3);x.position.z=1;x.position.x=.4;x.position.y=.25;b.camera=x;u.add(new di.AmbientLight(3355443));var z=new di.SpotLight(16777215,1,200,Math.PI/2,1);z.position.set(1,1,0);z.castShadow=!0;z.shadow.mapSize.width=1024;z.shadow.mapSize.height=1024;z.shadow.camera.near=
10;z.shadow.camera.far=100;z.shadow.bias=.01;u.add(z);var E=function(J,K){var T=new di.TextureLoader;return new di.Mesh(new di.SphereGeometry(J,K,K),new di.MeshPhongMaterial({map:T.load("assets/globe-textures/2_no_clouds_4k.jpg"),bumpMap:T.load("assets/globe-textures/elev_bump_4k.jpg"),bumpScale:.005,shininess:5,specularMap:T.load("assets/globe-textures/water_4k.png"),specular:new di.Color("grey")}))}(.5,32);E.rotation.y=5.2;u.add(E);var G=function(J,K){var T=new di.TextureLoader;return new di.Mesh(new di.SphereGeometry(J+
.003,K,K),new di.MeshPhongMaterial({map:T.load("assets/globe-textures/fair_clouds_4k.png"),transparent:!0}))}(.5,32);G.rotation.y=5.2;u.add(G);z=function(J,K){var T=new di.TextureLoader;return new di.Mesh(new di.SphereGeometry(J,K,K),new di.MeshBasicMaterial({map:T.load("assets/globe-textures//galaxy_starfield.png"),side:di.BackSide}))}(90,64);u.add(z);b.renderer=new di.WebGLRenderer({context:e,antialias:!0});b.renderer.setSize(l,p);b.limitLoop(function(){if(!document.body.contains(b.renderer.getContext().canvas)){if(b.removeScheduled)return;
b.removeScheduled=setTimeout(function(){document.body.contains(b.renderer.getContext().canvas)||b.stopAnimation()},5E3)}E.rotation.y+=5E-4;G.rotation.y+=5E-4;b.renderer.render(u,x)});b.camera.position.z=1;b.camera.position.x=.4;b.camera.position.y=.25})}},{key:"limitLoop",value:function(b,e){var l=this,p=(new Date).getTime(),u=this,x;return(x=function(z){u.renderLoop=requestAnimationFrame(x);z=(new Date).getTime();var E=z-p,G=1E3/(e||l.fps);E>G&&(p=z-E%G,b(),u.firstFrameRendered=!0)})(0)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"WebGLCanvas"}},{key:"properties",get:function(){return{fps:{}}}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"WebGLCanvas",version:"0.1.1-56"}}},{start:413,end:5929})}(di.Canvas);yfa=di.WebGLCanvas;di.default=yfa;var Vh=lively.FreezerRuntime.recorderFor("lively.components/buttons.js");Vh.Morph=xk;Vh.morph=
Dk;Vh.Icon=Fn;Vh.touchInputDevice=En;Vh.Rectangle=Fe;Vh.LinearGradient=Zl;Vh.Color=ng;Vh.pt=ui;Vh.signal=hm;Vh.connect=ll;Vh.arr=Gf;Vh.obj=eg;Vh.Closure=Cj;var XB=Ma("B",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),k=d.hasOwnProperty("Button")&&"function"===typeof d.Button?d.Button:d.Button=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){$b._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b)}},{key:"__additionally_serialize__",value:function(b,e,l,p){$b._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",this).call(this,b,e,l,p);p("fontSize",this.fontSize);this.label!=this.labelMorph.value&&p("label",this.labelMorph.value)}},{key:"isButton",get:function(){return!0}},{key:"enable",value:function(){this.deactivated=!1}},{key:"disable",value:function(){this.deactivated=
!0}},{key:"onChange",value:function(b){var e=b.prop;if(this.label)switch(e){case "extent":case "fontSize":case "fontFamily":this.relayout();break;case "padding":this.fit()}return $b._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b)}},{key:"onSubmorphChange",value:function(b,e){e===this.labelMorph&&"extent"===b.prop&&this.relayout();return $b._get(Object.getPrototypeOf(k.prototype),"onSubmorphChange",this).call(this,b,e)}},{key:"fitLabelMorph",value:function(){var b=this;this.labelMorph.whenFontLoaded().then(function(){b.labelMorph.invalidateTextLayout();
b.labelMorph.fit()})}},{key:"relayout",value:function(){var b=this.labelMorph;if(b&&!this._relayouting){this._relayouting=!0;try{var e=this.padding,l=e.top(),p=e.bottom(),u=e.left(),x=e.right(),z=b.height+l+p,E=b.width+u+x;z>this.height&&(this.height=z);E>this.width&&(this.width=E);var G=this.innerBounds().insetByRect(e);b.center=G.center().subPt(this.origin)}finally{this._relayouting=!1}}}},{key:"fit",value:function(){var b=this.padding,e=this.labelMorph;e.fit();this.extent=b.bottomLeft().addPt(b.bottomRight()).addPt(e.extent);
this.relayout();return this}},{key:"trigger",value:function(){try{Vh.signal(this,"fire"),"function"===typeof this.action&&this.action()}catch(e){var b=this.world();b?b.logError(e):console.error(e)}}},{key:"considerPress",value:function(b){return Vh.touchInputDevice?!0:this.innerBoundsContainsPoint(b.positionIn(this))}},{key:"onMouseDown",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,b);b.isAltDown()||this.deactivated||!this.considerPress(b)||(this.pressed=
{originalFill:this.fill})}},{key:"onMouseUp",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onMouseUp",this).call(this,b);b.isClickTarget(this)&&this.pressed&&(this.trigger(),this.pressed=null)}},{key:"onDragStart",value:function(b){Vh.touchInputDevice?(this.draggable=!0,this.pressed=null):$b._get(Object.getPrototypeOf(k.prototype),"onDragStart",this).call(this,b)}},{key:"onDrag",value:function(b){}},{key:"onHoverOut",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onHoverOut",
this).call(this,b);!Vh.touchInputDevice&&this.pressed&&b.isClickTarget(this)&&(this.pressed=null)}},{key:"onHoverIn",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onHoverIn",this).call(this,b);Vh.touchInputDevice||this.deactivated||!b.isClickTarget(this)||(this.pressed={originalFill:this.fill})}},{key:"interactivelyChangeLabel",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.world().prompt("edit button label",
{input:b.labelMorph.textString,historyId:"lively.morphic-button-edit-label-hist"}),2);e=l.yieldResult;"string"===typeof e&&(b.label=e);l.jumpToEnd()})}},{key:"menuItems",value:function(){var b=this,e=$b._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this);e.unshift({isDivider:!0});e.unshift(["change label",function(){return b.interactivelyChangeLabel()}]);return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Button"}},{key:"properties",get:function(){return{padding:{isStyleProp:!0,
defaultValue:Vh.Rectangle.inset(5,2)},draggable:{defaultValue:!1},extent:{defaultValue:Vh.pt(100,20)},borderColor:{defaultValue:Vh.Color.gray},borderWidth:{defaultValue:1},borderRadius:{defaultValue:5},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:new Vh.LinearGradient({stops:[{offset:0,color:Vh.Color.white},{offset:1,color:Vh.Color.rgb(236,240,241)}],vector:0})},deactivated:{group:"button",defaultValue:!1,after:["labelMorph"],set:function(b){this.setProperty("deactivated",b);this.nativeCursor=
b?"not-allowed":"pointer";this.labelMorph.opacity=b?.3:1}},pressed:{group:"_internal",defaultValue:null,set:function(b){this.getProperty("pressed");this.setProperty("pressed",b)}},fontSize:{group:"button styling",derived:!0,type:"Number",min:4,isStyleProp:!0,after:["label"],set:function(b){this.labelMorph.fontSize=b},get:function(){return this.labelMorph.fontSize}},fontColor:{group:"button styling",derived:!0,isStyleProp:!0,after:["labelMorph"],set:function(b){this.labelMorph.fontColor=b},get:function(){return this.labelMorph.fontColor}},
labelMorph:{group:"_internal",after:["submorphs"],serialize:!1,initialize:function(){this.labelMorph=this.getSubmorphNamed("label")||this.addMorph({type:"label",name:"label",value:"no label yet"})},get:function(){return this.getSubmorphNamed("label")},set:function(b){var e=this.labelMorph;e&&e.remove();b.name="label";b.reactsToPointer=!1;this.addMorphAt(b,0)}},labelWithTextAttributes:{group:"_internal",after:["labelMorph"],derived:!0,get:function(){return this.labelMorph.textAndAttributes},set:function(b){this.labelMorph.textAndAttributes=
b}},label:{group:"button",after:["labelMorph"],isStyleProp:!0,type:"RichText",set:function(b){b.isMorph?(this.setProperty("label",b.value),this.labelMorph=b):(this.setProperty("label",b),this.labelMorph.value=b,this.labelMorph._parametrizedProps&&(this.labelMorph._parametrizedProps.value=b));this.fitLabelMorph()}},fire:{group:"button",derived:!0,readOnly:!0,isSignal:!0},action:{serialize:!1}}}}],d,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:251,end:8293})}(Vh.Morph));Vh.Button=XB;Vh.Button=XB;Vh.Button=XB;var AG=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),k=d.hasOwnProperty("RadioButton")&&"function"===typeof d.RadioButton?d.RadioButton:d.RadioButton=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $b(k,a,[{key:"getMaster",value:function(b){return b?"styleguide://SystemPrompts/prompts/buttons/selection/selected":"styleguide://SystemPrompts/prompts/buttons/selection/unselected"}},{key:"reset",value:function(){var b=this.indicator;b.borderWidth=1;b.borderColor=Vh.Color.gray;this.selected=!1;Vh.connect(b,"onMouseUp",this,"select")}},{key:"morph",get:function(){var b=this.indicator;return this.submorphs.find(function(e){return e!==b})}},{key:"morph",set:function(b){var e=this.indicator;
this.submorphs.forEach(function(l){l!==e&&l.remove()});b.position=Vh.pt(50,0);this.addMorph(b)}},{key:"value",get:function(){if(!this.valueFn){try{var b=JSON.parse(this.valueFunctionString)}catch(e){b=this.valueFunctionString}this.valueFn=Vh.Closure.fromSource(b).recreateFunc()}return this.morph?this.valueFn(this.morph):void 0}},{key:"onMouseDown",value:function(b){this.select()}},{key:"select",value:function(){this.selected=!0;this.owner.setSelection(this)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"RadioButton"}},{key:"properties",get:function(){return{indicator:{get:function(){return this.getSubmorphNamed("indicator")}},master:{after:["selected"],initialize:function(){this.master={auto:this.getMaster(this.selected)}}},selectionColor:{},selectionStyle:{},selected:{after:["indicator"],defaultValue:!1,set:function(b){var e=this;this.whenRendered().then(function(l){e.master={auto:e.getMaster(b)}});this.setProperty("selected",!!b)}},valueFunctionString:{defaultValue:'"function (morph) { return morph.value; }"',
set:function(b){this.setProperty("valueFunctionString",b.toString());this.valueFn=void 0}},submorphs:{initialize:function(){this.submorphs=[{type:"ellipse",name:"indicator"}]}}}}}],d,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8302,end:10679})}(Vh.Morph);Vh.RadioButton=AG;Vh.RadioButton=
AG;Vh.RadioButton=AG;var BG=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),k=d.hasOwnProperty("RadioButtonGroup")&&"function"===typeof d.RadioButtonGroup?d.RadioButtonGroup:d.RadioButtonGroup=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"reset",value:function(){this.submorphs.forEach(function(b){return b.reset()});this.layout.layoutableSubmorphs[0].selected=!0}},
{key:"removeAllButtons",value:function(){this.removeAllMorphs();this.height=10}},{key:"addButton",value:function(b,e){var l=new Vh.RadioButton;l.reset();l.morph=b;void 0!=e&&(l.internalValue=e,l.valueFunctionString="function (morph) { return morph.owner.internalValue; }");this.addMorph(l);return l}},{key:"setSelection",value:function(b){this.submorphs.forEach(function(e){e!==b&&(e.selected=!1)});b.selected=!0}},{key:"selectedButton",get:function(){return this.submorphs.find(function(b){return b.selected})}},
{key:"value",get:function(){var b=this.selectedButton;return b?b.value:null}},{key:"value",set:function(b){var e=this.submorphs.find(function(l){try{return l.value===b}catch(p){return!1}});e?e.select():this.setSelection(null)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RadioButtonGroup"}},{key:"properties",get:function(){return{choices:{derived:!0,defaultValue:[],get:function(){return this.submorphs.map(function(b){return b.value})},set:function(b){var e=this;this.removeAllButtons();
if(Vh.obj.isArray(b)){if(0==b.length)return;b.forEach(function(l){e.addButton(Vh.morph({name:"label",type:"label",value:l,reactsToPointer:!1}))})}else{b=[].concat($jscomp.arrayFromIterable(b.entries()));if(0==b.length)return;b.forEach(function(l){var p=$jscomp.makeIterator(l);l=p.next().value;p=p.next().value;e.addButton(Vh.morph({name:"label",type:"label",value:l,reactsToPointer:!1}),p)})}this.submorphs[0].master.whenApplied().then(function(){return e.setSelection(e.submorphs[0])})},value:{derived:!0,
after:["submorphs"],get:function(){var b=this.selectedButton;return b?b.value:null},set:function(b){var e=this.submorphs.find(function(l){try{return l.value===b}catch(p){return!1}});e?e.select():this.setSelection(null)}}}}}}],d,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10688,end:13602})}(Vh.Morph);
Vh.RadioButtonGroup=BG;Vh.RadioButtonGroup=BG;Vh.RadioButtonGroup=BG;var zza=Object.freeze({__proto__:null,Button:XB,RadioButton:AG,RadioButtonGroup:BG}),Dd=lively.FreezerRuntime.recorderFor("lively.components/list.js");Dd.asItem=CL;Dd.Morph=xk;Dd.Text=Lq;Dd.StyleSheet=cs;Dd.Label=Mq;Dd.Icon=Fn;Dd.morph=Dk;Dd.touchInputDevice=En;Dd.pt=ui;Dd.LinearGradient=Zl;Dd.Color=ng;Dd.Rectangle=Fe;Dd.rect=Ll;Dd.arr=Gf;Dd.Path=Qh;Dd.string=Dh;Dd.signal=hm;Dd.noUpdate=Pt;Dd.once=ts;Dd.Button=XB;Dd.bowser=Fp;Dd.asItem=
CL;Dd.asItem=CL;var OP=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("ListItemMorph")&&"function"===typeof d.ListItemMorph?d.ListItemMorph:d.ListItemMorph=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"displayItem",value:function(b,e,l,p,u,x,z){x=void 0===x?!1:x;var E=b.morph,G=E?"":b.label||b.string||"no item.string";b.annotation?this.valueAndAnnotation=
{value:G,annotation:b.annotation}:"string"===typeof G?this.textString=G:this.value=G;this.tooltip=b.tooltip||this.tooltip||this.textString;0==b.tooltip&&(this.tooltip=!1);this.itemIndex=e;this.position=u;if(z){e=z.fontFamily;u=z.selectionColor;G=z.selectionFontColor;var J=z.nonSelectionFontColor,K=z.borderRadius,T=z.fontSize;z=z.padding;G&&this.selectionFontColor!==G&&(this.selectionFontColor=G);J&&this.nonSelectionFontColor!==J&&(this.nonSelectionFontColor=J);u&&this.selectionColor!==u&&(this.selectionColor=
u);K&&K!=this.borderRadius&&(this.borderRadius=K);T&&this.fontSize!==T&&(this.fontSize=T);e&&this.fontFamily!==e&&(this.fontFamily=e);z&&!this.padding.equals(z)&&(this.padding=z)}b.autoFit&&(E.width=l);this.extent=Dd.pt(E?Math.max(E.width,l):l,p);E?(b=E.getTransform().copy(),this.submorphs=[E],E.setTransform(b),E.position=Dd.pt(0,0)):this.submorphs.length&&(this.submorphs=[]);this.isSelected=x}},{key:"onDragStart",value:function(b){var e=this.owner.owner;this._dragState={sourceIsSelected:this.isSelected,
source:this,itemsTouched:[]};if(!e.multiSelect||!e.multiSelectViaDrag)e.onItemMorphDragged(b,this)}},{key:"onMouseDown",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,b);this.owner.owner.clickOnItem(b)}},{key:"onDrag",value:function(b){var e=this.owner.owner;if(e.multiSelect&&e.multiSelectViaDrag){b=b.hand.morphBeneath(b.position);var l=e.selectedIndexes,p=e.itemMorphs;b!==this&&p.includes(b)&&(this._dragState.sourceIsSelected&&!b.isSelected?(Dd.arr.pushIfNotIncluded(l,
b.itemIndex),e.selectedIndexes=l):!this._dragState.sourceIsSelected&&b.isSelected&&(Dd.arr.remove(l,b.itemIndex),e.selectedIndexes=l))}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListItemMorph"}},{key:"properties",get:function(){return{clipMode:{defaultValue:"hidden"},autofit:{defaultValue:!1},isSelected:{defaultValue:!1},draggable:{defaultValue:!Dd.touchInputDevice},fill:{derived:!0,get:function(){return Dd.touchInputDevice&&this.pressed?Dd.Color.gray.withA(.5):this.isSelected?
this.selectionColor:Dd.Color.transparent}},itemIndex:{defaultValue:void 0},selectionFontColor:{isStyleProp:!0,defaultValue:Dd.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:Dd.Color.blue},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Dd.Color.rgbHex("333")},fontColor:{derived:!0,get:function(){return this.isSelected?this.selectionFontColor:this.nonSelectionFontColor}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:924,end:5192})}(Dd.Label);Dd.ListItemMorph=OP;Dd.ListItemMorph=OP;Dd.ListItemMorph=OP;(function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("ListScroller")&&"function"===typeof d.ListScroller?d.ListScroller:d.ListScroller=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $b(k,a,[{key:"onScroll",value:function(b){return this.owner.update()}},{key:"onMouseDown",value:function(b){var e=this,l=this.scroll.y;if(Dd.touchInputDevice){var p=this.owner.itemForClick(b);p&&(p.pressed=!0,p.makeDirty(),setTimeout(function(){p.pressed=!1;if(0==l-e.scroll.y)return e.owner.clickOnItem(b)},300))}else return this.owner.clickOnItem(b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListScroller"}},{key:"properties",get:function(){return{name:{defaultValue:"scroller"},
fill:{defaultValue:Dd.Color.transparent},clipMode:{defaultValue:"auto"},scrollbar:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.submorphs[0]}},submorphs:{initialize:function(){this.submorphs=[{name:"scrollbar"}]}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5194,
end:6156})})(Dd.Morph);Dd.listCommands=[{name:"page up",exec:function(a){a.gotoIndex(Math.max(0,a.selectedIndex-Math.round(a.height/a.itemHeight)));return!0}},{name:"page down",exec:function(a){a.gotoIndex(Math.min(a.items.length-1,a.selectedIndex+Math.round(a.height/a.itemHeight)));return!0}},{name:"goto first item",exec:function(a){a.gotoIndex(0);return!0}},{name:"goto last item",exec:function(a){a.gotoIndex(a.items.length-1);return!0}},{name:"arrow up",exec:function(a){a.gotoIndex(a.indexUp());
return!0}},{name:"arrow down",exec:function(a){a.gotoIndex(a.indexDown());return!0}},{name:"select up",exec:function(a){var d=a.selectedIndexes;if(!a.multiSelect||!d.length)return a.execCommand("arrow up");var k=d[0];if("number"!==typeof k)a.selectedIndexes=[k];else{var b=a.indexUp(k);d.includes(k)&&d.includes(b)?a.selectedIndexes=d.filter(function(e){return e!==k}):a.selectedIndexes=[b].concat(d.filter(function(e){return e!==b}))}return!0}},{name:"select down",exec:function(a){var d=a.selectedIndexes;
if(!a.multiSelect||!d.length)return a.execCommand("arrow down");var k=d[0],b=a.indexDown(k);d.includes(k)&&d.includes(b)?a.selectedIndexes=d.filter(function(e){return e!==k}):a.selectedIndexes=[b].concat(d.filter(function(e){return e!==b}));return!0}},{name:"select all",exec:function(a){a.selectedIndexes=Dd.arr.range(a.items.length-1,0);a.scrollIndexIntoView(a.selectedIndexes[0]);return!0}},{name:"select via filter",exec:function(a){var d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return d=a.selectedIndex||0,e.yield(a.world().filterableListPrompt("Select item",a.items,{preselect:d,requester:a.getWindow()||a,itemPadding:Dd.Rectangle.inset(0,2),multiSelect:!0}),2);k=e.yieldResult;b=k.selected;b.length&&(a.multiSelect?a.selections=b:a.selection=b[0],a.scrollSelectionIntoView(),a.update());return e.return(!0)})}},{name:"realign top-bottom-center",exec:function(a){if(a.selection){var d=a.padding,k=a.itemHeight,b=a.scroll,e=b.x;b=b.y;var l=Dd.pt(0,a.selectedIndex*k);
d=a.height-k-d.top()-d.bottom();b=2>Math.abs(l.y-b)?l.y-d:2>Math.abs(l.y-b-.5*d)?l.y:l.y-.5*d;a.scroll=Dd.pt(e,b);return!0}}},{name:"print contents in text window",exec:function(a){var d="items of "+a.name,k=a.items.map(function(b){if("string"===typeof b)return b;var e=b.string,l=b.label;b=b.annotation;var p="";l?p="string"===typeof l?p+l:p+l.map(function(u,x){return 0==x%2?u:""}).join(""):e&&(p+=e);b&&(p+=" ",p="string"===typeof b?p+b:p+b[0]);return p}).join("\n");return a.world().execCommand("open text window",
{title:d,content:k,name:d,fontFamily:"Monaco, monospace"})}}];var YB=Ma("L",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("List")&&"function"===typeof d.List?d.List:d.List=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"__additionally_serialize__",value:function(b,e,l,p){var u=this;$b._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",
this).call(this,b,e,l,p);this.whenRendered().then(function(){return u.update()})}},{key:"onLoad",value:function(){this.scroller.visible=Dd.touchInputDevice}},{key:"initializeSubmorphs",value:function(b){this.submorphs=b=b||this.submorphs||[];for(var e=0;e<b.length;e++)switch(b[e].name){case "listItemContainer":var l=b[e];continue;case "scroller":var p=b[e]}p||(p=this.addMorph(new Dd.ListScroller({draggable:!1,grabbable:!1,acceptsDrops:!1,halosEnabled:!1,name:"scroller"})));l||this.addMorph({name:"listItemContainer",
fill:Dd.Color.transparent,halosEnabled:!1,reactsToPointer:!1,acceptsDrops:!1,draggable:!1});(l||p)&&this.update()}},{key:"isList",get:function(){return!0}},{key:"onChange",value:function(b){"fontFamily fontColor fontSize padding selectionFontColor selectionColor nonSelectionFontColor itemPadding items".split(" ").includes(b.prop)&&this.update();return $b._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b)}},{key:"itemForClick",value:function(b){b=b.positionIn(this.world()).subPt(this.scroll);
b=this.listItemContainer.morphsContainingPoint(b);return b.find(function(e){return e.isListItem})||b[0]}},{key:"clickOnItem",value:function(b){var e=this.itemForClick(b),l=b.state.clickCount;if(!(b.positionIn(this).x>this.width-this.scrollbarOffset.x))this[2===l?"onItemMorphDoubleClicked":"onItemMorphClicked"](b,e)}},{key:"connections",get:function(){return{selection:{signalOnAssignment:!1}}}},{key:"invalidateCache",value:function(){this.manualItemHeight||this.setProperty("itemHeight",null)}},{key:"find",
value:function(b){return this.items.find(function(e){return e===b||e.value===b})}},{key:"findIndex",value:function(b){return this.items.findIndex(function(e){return e===b||e.value===b})}},{key:"addItem",value:function(b){return this.addItemAt(b)}},{key:"addItemAt",value:function(b,e){var l=this;e=void 0===e?this.items.length:e;var p=this.items;e=Math.min(p.length,Math.max(0,e));p.splice(e,0,Dd.asItem(b));this.addMethodCallChangeDoing({target:this,selector:"addItemAt",args:[b,e],undo:{target:this,
selector:"removeItem",args:[b]}},function(){return l.update()})}},{key:"removeItem",value:function(b){var e=this;b=this.find(b);var l=this.items,p=l.indexOf(b);-1!==p&&(l.splice(p,1),this.addMethodCallChangeDoing({target:this,selector:"removeItem",args:[b],undo:{target:this,selector:"addItemAt",args:[b,p]}},function(){return e.update()}))}},{key:"selectItemMorph",value:function(b){this.selectedIndexes=[b.itemIndex]}},{key:"gotoIndex",value:function(b){this.scrollIndexIntoView(this.selectedIndex=b)}},
{key:"indexUp",value:function(b){b="number"===typeof b?b:this.selectedIndex;return(b||this.items.length)-1}},{key:"indexDown",value:function(b){b=void 0===b?this.selectedIndex:b;return(("number"===typeof b?b:-1)+1)%this.items.length}},{key:"update",value:function(){var b=this,e=this.items;e&&this.scroller&&this.dontRecordChangesWhile(function(){var l=b.itemHeight,p=b.itemMorphs,u=b.listItemContainer,x=b.selectedIndexes,z=b.extent.y,E=b.fontSize,G=b.fontFamily,J=b.fontColor,K=b.padding,T=b.itemPadding,
P=b.selectionColor,da=b.selectionFontColor,fa=b.nonSelectionFontColor,ka=b.itemBorderRadius,za=b.scrollBar,Ia=b.scroller,N=b.scrollable,ia=Ia.scroll.y;K=K||Dd.Rectangle.inset(0);var W=K.top(),ca=K.left(),sa=K.bottom();K=K.right();var la=Math.max(0,Math.floor(ia/l)),Aa=Math.min(e.length,la+z/l+2);z=0;K=b.width-(ca+K);p=Dd.arr.sortBy(p,function(Sa){return Sa.itemIndex});var ib=$jscomp.makeIterator(Dd.arr.partition(p,function(Sa){return Sa.itemIndex<la}));p=ib.next().value;var ob=ib.next().value;ob=
$jscomp.makeIterator(Dd.arr.partition(ob,function(Sa){return Sa.itemIndex>Aa-1}));ib=ob.next().value;ob=ob.next().value;p=[].concat($jscomp.arrayFromIterable(ib),$jscomp.arrayFromIterable(ob),$jscomp.arrayFromIterable(p));for(ib=0;ib<Aa-la;ib++){ob=la+ib;var Ea=e[ob];if(!Ea){p.slice(ib).forEach(function(Sa){Sa.remove()});break}var ua={fontSize:E,fontFamily:G,fontColor:fa||J,padding:T,borderRadius:ka||0,selectionFontColor:da,nonSelectionFontColor:fa,selectionColor:P},ya=p[ib];ya||(ya=p[ib]=u.addMorph(new Dd.ListItemMorph(ua)));
ya.reactsToPointer=!N;ya.displayItem(Ea,ob,K,l,Dd.pt(0,l*ob),x.includes(ob),ua);z=Math.max(z,ya.width)}p.slice(Aa-la).forEach(function(Sa){return Sa.remove()});l=Math.max(W+sa+l*e.length,b.height);u.setBounds(Dd.pt(ca,W).subXY(0,ia).extent(Dd.pt(b.width,l)));Ia.extent=b.extent.subXY(b.borderWidthRight,b.borderWidthBottom);za.left=z/2;Ia.position=Dd.pt(0,0);za.extent=Dd.pt(1,l)})}},{key:"scrollSelectionIntoView",value:function(){this.selection&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",
value:function(b){var e=this.itemHeight,l=this.itemScroll;b=new Dd.Rectangle(0,b*e,this.width,e);e=this.innerBounds().insetByRect(this.padding).translatedBy(l);var p=0;b.bottom()>e.bottom()&&(p=b.bottom()-e.bottom());b.top()<e.top()&&(p=b.top()-e.top());this.itemScroll=l.addXY(0,p);this.update()}},{key:"onItemMorphDoubleClicked",value:function(b,e){}},{key:"onItemMorphClicked",value:function(b,e){var l=e.itemIndex;e=this.selectedIndexes;var p=e.includes(l),u=[];if(this.multiSelect)if(b.isShiftDown())if(p)u=
e.filter(function(z){return z!=l});else{b=e[0];var x="number"===typeof b?Dd.arr.range(l,b):[l];u=x.concat(e.filter(function(z){return!x.includes(z)}))}else u=this.multiSelectWithSimpleClick||b.isCommandKey()?p?e.filter(function(z){return z!=l}):[l].concat(e.filter(function(z){return z!=l})):[l];else u=[l];this.selectedIndexes=u}},{key:"onItemMorphDragged",value:function(b,e){}},{key:"onHoverIn",value:function(b){this.scrollable&&(this.scroller.visible=!0)}},{key:"onHoverOut",value:function(b){Dd.touchInputDevice||
(this.scroller.visible=!1)}},{key:"onDragStart",value:function(b){}},{key:"onDrag",value:function(b){}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-A",mac:"Meta-A"},command:"select all"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",
command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"}].concat($b._get(Object.getPrototypeOf(k.prototype),"keybindings",this))}},{key:"commands",get:function(){return Dd.listCommands}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"List"}},{key:"properties",get:function(){return{fill:{defaultValue:Dd.Color.white},clipMode:{defaultValue:"hidden"},selectionFontColor:{isStyleProp:!0,defaultValue:Dd.Color.white},selectionColor:{type:"ColorGradient",
isStyleProp:!0,defaultValue:Dd.Color.rgb(21,101,192)},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Dd.Color.rgbHex("333")},fontColor:{isStyleProp:!0,defaultValue:Dd.Color.rgbHex("333")},styleClasses:{defaultValue:["default"]},itemScroll:{derived:!0,after:["submorphs"],get:function(){return this.scroller?this.scroller.scroll:Dd.pt(0,0)},set:function(b){this.scroller&&(this.scroller.scroll=b)}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/list/light"}}},extent:{defaultValue:Dd.pt(400,
360),set:function(b){b.eqPt(this.extent)||(this.setProperty("extent",b),this.update())}},fontFamily:{isStyleProp:!0,defaultValue:"Helvetica Neue, Arial, sans-serif",set:function(b){this.setProperty("fontFamily",b);this.invalidateCache()}},fontSize:{isStyleProp:!0,defaultValue:12,set:function(b){this.setProperty("fontSize",b);this.invalidateCache()}},padding:{isStyleProp:!0,defaultValue:Dd.Rectangle.inset(3)},itemBorderRadius:{isStyleProp:!0,defaultValue:0,set:function(b){this.setProperty("itemBorderRadius",
b);this.invalidateCache()}},itemPadding:{isStyleProp:!0,defaultValue:Dd.Rectangle.inset(1),set:function(b){this.setProperty("itemPadding",b);this.invalidateCache()}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(b){this.setProperty("items",b.map(Dd.asItem));this.itemScroll=Dd.pt(0,0);this.update();this.attributeConnections&&Dd.signal(this,"values",this.values)}},multiSelect:{defaultValue:!1},multiSelectWithSimpleClick:{description:"Does a simple click toggle selections without deselecting?",
defaultValue:!1},multiSelectViaDrag:{description:"Does dragging extend selection?",defaultValue:!0},values:{group:"list",after:["items"],readOnly:!0,get:function(){return this.items.map(function(b){return b.value})}},selectedIndex:{group:"list",defaultValue:[],after:["selectedIndexes"],get:function(){return this.selectedIndexes[0]},set:function(b){return this.selectedIndexes="number"===typeof b?[b]:[]}},selectedIndexes:{get:function(){return this.getProperty("selectedIndexes")||[]},set:function(b){var e=
this.items.length;this.setProperty("selectedIndexes",(b||[]).filter(function(l){return 0<=l&&l<e}));this.update();Dd.signal(this,"selection",this.selection)}},selection:{group:"list",after:["selections"],get:function(){return this.selections[0]},set:function(b){this.selections=[b]}},selections:{group:"list",after:["selectedIndexes"],get:function(){var b=this;return this.selectedIndexes.map(function(e){return b.items[e]&&b.items[e].value})},set:function(b){var e=this;this.selectedIndexes=b.map(function(l){return e.findIndex(l)})}},
selectedItems:{after:["selectedIndexes"],readOnly:!0,get:function(){var b=this;return this.selectedIndexes.map(function(e){return b.items[e]})}},submorphs:{initialize:function(b){this.initializeSubmorphs(b)}},listItemContainer:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("listItemContainer")}},itemMorphs:{after:["submorphs"],readOnly:!0,get:function(){return this.listItemContainer.submorphs}},scrollBar:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scrollbar")}},
scroller:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scroller")}},scrollable:{derived:!0,get:function(){return this.padding.top()+this.items.length*this.itemHeight>this.height}},manualItemHeight:{type:"Boolean"},itemHeight:{isStyleProp:!0,after:["fontFamily","fontSize","itemPadding"],defaultValue:10,set:function(b){this.setProperty("itemHeight",b);this.manualItemHeight="number"===typeof b;this.update()},get:function(){var b=this.getProperty("itemHeight");if(b)return b;
b=this.env.fontMetric.defaultLineHeight({fontFamily:this.fontFamily,fontSize:this.fontSize});var e=this.itemPadding;e&&(b+=e.top()+e.bottom());this.setProperty("itemHeight",b);return b}},theme:{after:["styleClasses"],defaultValue:"default",set:function(b){this.removeStyleClass(this.theme);this.addStyleClass(b);this.setProperty("theme",b)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10560,end:27175})}(Dd.Morph));Dd.List=YB;Dd.List=YB;Dd.List=YB;Dd.connect=ll;var CG=Ma("at",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("FilterableList")&&"function"===typeof d.FilterableList?d.FilterableList:d.FilterableList=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,
[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;b.bounds||b.extent||(b.extent=Dd.pt(400,360));$b._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);Dd.connect(this.inputMorph,"inputChanged",this,"updateFilter");Dd.connect(this.listMorph,"selection",this,"selectionChanged");Dd.connect(this.listMorph,"onItemMorphDoubleClicked",this,"acceptInput");this.updateFilter();Dd.connect(this,"extent",this,"relayout")}},{key:"resetConnections",
value:function(){var b=this,e=this.attributeConnections;if(e){var l=["accepted","canceled","remove"];e.filter(function(p){return l.includes(p.sourceAttrName)&&p.targetObj!==b}).forEach(function(p){return p.disconnect()})}}},{key:"isList",get:function(){return!0}},{key:"relayout",value:function(){var b=this.listMorph,e=this.inputMorph,l=this.paddingMorph,p=this.borderWidth;e.topLeft=Dd.pt(p,p);e.width=b.width=this.width-2*p;l&&(l.topLeft=e.bottomLeft);b.position=l?l.bottomLeft:e.bottomLeft;b.height=
this.height-b.top-p}},{key:"focus",value:function(){this.get("input").focus()}},{key:"selectionChanged",value:function(b){Dd.signal(this,"selection",b)}},{key:"scrollSelectionIntoView",value:function(){return this.listMorph.scrollSelectionIntoView()}},{key:"parseInput",value:function(){var b=this.get("input").textString,e=Array.from(b).reduce(function(p,u){if("\\"===u&&!p.escaped)return p.escaped=!0,p;" "!==u||p.escaped?(p.spaceSeen=!1,p.current+=u):(!p.spaceSeen&&p.current&&(p.tokens.push(p.current),
p.current=""),p.spaceSeen=!0);p.escaped=!1;return p},{tokens:[],current:"",escaped:!1,spaceSeen:!1});e.current&&e.tokens.push(e.current);var l=e.tokens.map(function(p){return p.toLowerCase()});return{tokens:e.tokens,lowercasedTokens:l,input:b}}},{key:"updateFilter",value:function(){var b=this,e=this.parseInput(),l=this.filterFunction,p=this.sortFunction,u=this.items.filter(function(E){return l.call(b,e,E)});p&&(u=Dd.arr.sortBy(u,function(E){return p.call(b,e,E)}));var x=this.listMorph,z=this.updateSelectionsAfterFilter?
x.selectedIndexes.map(function(E){return u.indexOf(x.items[E])}).filter(function(E){return-1!==E}):x.selectedIndexes;x.items=u;x.selectedIndexes=z.length?z:u.length?[0]:[];this.scrollSelectionIntoView();Dd.signal(this,"filterChanged",{parsedInput:e,items:x.items})}},{key:"acceptInput",value:function(){var b=this.listMorph;this.get("input").acceptInput();b={filtered:this.items,selected:b.selections,action:this.selectedAction,status:"accepted"};Dd.signal(this,"accepted",b);return b}},{key:"keybindings",
get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Enter",command:"accept input"},{keys:"Escape|Ctrl-G",command:"cancel"},{keys:"Tab",command:"choose action"}].concat($jscomp.arrayFromIterable(Dd.arr.range(0,
8).map(function(b){return{keys:"Alt-"+(b+1),command:{command:"choose action and accept input",args:{actionNo:b}}}}))).concat($b._get(Object.getPrototypeOf(k.prototype),"keybindings",this))}},{key:"commands",get:function(){var b=this;return $b._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"accept input",exec:function(e){b.acceptInput();return!0}},{name:"cancel",exec:function(e){Dd.signal(e,"canceled");return!0}},{name:"choose action and accept input",exec:function(e,l){l=void 0===
l?{}:l;e.selectedAction=(e.actions||[])[void 0===l.actionNo?0:l.actionNo];return e.execCommand("accept input")}},{name:"choose action",exec:function(e){var l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(!e.actions)return x.return(!0);l=Object.assign({},e.style,{extent:e.extent});p=new Dd.FilterableList(l);p.openInWorld(e.globalPosition);p.items=e.actions;u=e.actions.indexOf(e.selectedAction);-1===u&&(u=0);p.selectedIndex=u;Dd.connect(p,"accepted",e,"selectedAction",{converter:function(z){this.targetObj.focus();
this.disconnect();this.sourceObj.remove();return z.selected[0]}});Dd.connect(p,"canceled",e,"selectedAction",{converter:function(z){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return this.targetObj.selectedAction}});p.focus();return x.return(!0)})}}].concat($jscomp.arrayFromIterable(Dd.listCommands.map(function(e){return Object.assign({},e,{exec:function(l,p,u){return e.exec(b.listMorph,p,u)}})}))))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FilterableList"}},
{key:"properties",get:function(){return{fill:{defaultValue:Dd.Color.transparent},borderWidth:{defaultValue:1},updateSelectionsAfterFilter:{defaultValue:!1},theme:{after:["styleClasses","listMorph"],defaultValue:"default",set:function(b){this.removeStyleClass(this.theme);this.listMorph.removeStyleClass(this.theme);this.addStyleClass(b);this.listMorph.addStyleClass(b);this.setProperty("theme",b)}},submorphs:{initialize:function(){var b=this;this.submorphs=[Dd.Text.makeInputLine({name:"input",highlightWhenFocused:!1,
fixedHeight:!1,autofit:!1}),new Dd.morph({name:"padding",fill:Dd.Color.transparent}),new Dd.List({name:"list",items:[]})];this.get("list").whenRendered().then(function(){return b.get("list").update()})}},paddingMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("padding")}},listMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("list")}},inputMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("input")}},
fontFamily:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontFamily},set:function(b){this.listMorph.fontFamily=b;this.inputMorph.fontFamily=b}},padding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.padding},set:function(b){this.listMorph.padding=b;this.inputMorph.padding=b}},fontSize:{isStyleProp:!0,group:"styling",derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontSize},set:function(b){this.listMorph.fontSize=
b}},itemPadding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.itemPadding},set:function(b){this.listMorph.itemPadding=b}},inputPadding:{isStyleProp:!0,derived:!0,after:["submorphs","padding"],get:function(){return this.inputMorph.padding},set:function(b){this.inputMorph.padding=b}},input:{derived:!0,after:["submorphs"],defaultValue:"",get:function(){return this.inputMorph.input},set:function(b){this.inputMorph.input=b}},historyId:{derived:!0,after:["submorphs"],
defaultValue:null,get:function(){return this.inputMorph.historyId},set:function(b){this.inputMorph.historyId=b}},multiSelect:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.multiSelect},set:function(b){this.listMorph.multiSelect=b}},items:{after:["submorphs","fuzzy","fuzzySortFunction","fuzzyFilterFunction"],defaultValue:[],set:function(b){this.setProperty("items",b.map(Dd.asItem));this.updateFilter()}},visibleItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.items}},
selection:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selection},set:function(b){this.listMorph.selection=b}},selectedIndex:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndex},set:function(b){this.listMorph.selectedIndex=b}},selectedIndexes:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndexes},set:function(b){this.listMorph.selectedIndexes=b}},selectedItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedItems},
set:function(b){this.listMorph.selectedItems=b}},selections:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selections},set:function(b){this.listMorph.selections=b}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(b){this.setProperty("fuzzy",b);b?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=
null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var b=this.getProperty("filterFunction");if(!b)return this.defaultFilterFunction;"string"===typeof b&&(b=eval("("+b+")"));return b}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(b,e){return b.lowercasedTokens.every(function(l){return e.string.toLowerCase().includes(l)})})}},
fuzzySortFunction:{get:function(){var b=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(e,l){var p=String(Dd.Path("string"===typeof b.fuzzy?b.fuzzy:"string").get(l)).toLowerCase(),u=0;e.lowercasedTokens.forEach(function(x){p.startsWith(x)?u-=10:p.includes(x)&&(u-=5)});return Dd.arr.sum(e.lowercasedTokens.map(function(x){return Dd.string.levenshtein(p.toLowerCase(),x)}))+u})}},fuzzyFilterFunction:{get:function(){var b=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=
function(e,l){var p="string"===typeof b.fuzzy?b.fuzzy:"string";if(e.lowercasedTokens.every(function(x){return l.string.toLowerCase().includes(x)}))return!0;var u=String(Dd.Path(p).get(l)).toLowerCase();return 3>=Dd.arr.sum(e.lowercasedTokens.map(function(x){return Dd.string.levenshtein(u,x)}))})}},selectedAction:{get:function(){return this.getProperty("selectedAction")||"default"}},actions:{}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:27288,end:41612})}(Dd.Morph));Dd.FilterableList=CG;Dd.FilterableList=CG;Dd.FilterableList=CG;var DG=Ma("bG",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("DropDownList")&&"function"===typeof d.DropDownList?d.DropDownList:d.DropDownList=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $b(k,a,[{key:"fitLabelMorph",value:function(){}},{key:Symbol.for("lively-instance-initialize"),value:function(b){$b._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);Dd.connect(this,"fire",this,"toggleList")}},{key:"onLoad",value:function(){this.listMorph.selection||(this.listMorph.selection=this.labelMorph.value[0])}},{key:"isListVisible",value:function(){return!!this.listMorph.world()}},{key:"removeWhenFocusLost",value:function(b){var e=
this;setTimeout(function(){var l=e.listMorph,p=e.world()&&e.world().focusedMorph;p!==l&&p!==e&&l.world()&&!l.withAllSubmorphsDetect(function(u){return u==p})?l.fadeOut(200):l.world()&&(l=Dd.touchInputDevice?l.scroller:l,Dd.once(l,"onBlur",e,"removeWhenFocusLost"),l.focus())},100)}},{key:"adjustLableFor",value:function(b){b=b.label||[b.string,null];b=[].concat($jscomp.arrayFromIterable(b),[" ",null],$jscomp.arrayFromIterable(Dd.Icon.textAttribute("caret-"+("bottom"===this.listAlign?"down":"up"))));
b[5]&&(b[5].paddingRight="0px",b[5].textStyleClasses=["fa","annotation"]);this.label=b;this.relayout()}},{key:"toggleList",value:function(){var b=this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress){e=b.listMorph;if(b.isListVisible())return Dd.signal(b,"deactivated"),b.selection=e.selection,e.epiMorph=!1,e.remove(),u.jumpTo(0);Dd.signal(b,"activated");b.openListInWorld?(e.openInWorld(),e.epiMorph=!0,e.hasFixedPosition=!0,e.setTransform(b.getGlobalTransform()),
l=b.globalBounds()):(l=b.innerBounds(),b.addMorph(e));p=e.items.length*e.itemHeight+e.padding.top()+e.padding.bottom();e.extent=Dd.pt(b.width,Math.min(b.listHeight,p));"top"===b.listAlign?e.bottomLeft=l.topLeft():e.topLeft=l.bottomLeft();e.moveBy(b.listOffset||Dd.pt(0,0));Dd.once(e,"onItemMorphClicked",b,"toggleList");Dd.once(Dd.touchInputDevice?e.scroller:e,"onBlur",b,"removeWhenFocusLost");return u.yield(e.whenRendered(),3)}if(4!=u.nextAddress)return u.yield(e.whenRendered(),4);Dd.touchInputDevice?
e.scroller.focus():e.focus();e.scrollSelectionIntoView();u.jumpToEnd()})}},{key:"commands",get:function(){var b=this;return[{name:"accept",exec:function(){b.isListVisible()&&b.toggleList();return!0}},{name:"cancel",exec:function(){b.isListVisible()&&b.listMorph.remove();return!0}}].concat($b._get(Object.getPrototypeOf(k.prototype),"commands",this))}},{key:"keybindings",get:function(){return $b._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept"},{keys:"Escape|Ctrl-G",
command:"cancel"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownList"}},{key:"properties",get:function(){return{padding:{defaultValue:Dd.Rectangle.inset(3,2)},listHeight:{defaultValue:100},listAlign:{type:"Enum",values:["bottom","top"],defaultValue:"bottom"},listOffset:{isStyleProp:!0,defaultValue:Dd.pt(0,0)},openListInWorld:{defaultValue:!1},listMorph:{after:["labelMorph"],get:function(){var b=this.getProperty("listMorph");if(b)return b;b=new Dd.List({name:"dropDownList"});
this.setProperty("listMorph",b);return b}},items:{derived:!0,after:["listMorph"],get:function(){return this.listMorph.items},set:function(b){var e=this,l=this.items.find(function(p){return p.value==e.selection});this.listMorph.items=b;l&&Dd.noUpdate(function(){e.selection=e.items[0].value})}},selection:{after:["listMorph","items"],derived:!0,get:function(){return this.listMorph.selection},set:function(b){var e=this.listMorph;if(b){var l=e.items,p=e.find(b);p||"string"!==typeof b||(p=l.find(function(u){return u.string===
b}));if(!p)return;this.adjustLableFor(p);e.selectedIndex=l.indexOf(p)}else e.selection=null,this.label="";Dd.signal(this,"selection",e.selection)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:41621,end:46703})}(Dd.Button));Dd.DropDownList=DG;Dd.DropDownList=DG;Dd.DropDownList=
DG;var PP=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("InteractiveItem")&&"function"===typeof d.InteractiveItem?d.InteractiveItem:d.InteractiveItem=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"fit",value:function(){}},{key:"onHaloGrabover",value:function(b){this.list.showDropPreviewFor(this,b)}},{key:"onDrop",value:function(b){var e=this,l;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress){if(!e.item.isPreview)return p.jumpTo(0);l=b.hand.grabbedMorphs[0];$b._get(Object.getPrototypeOf(k.prototype),"onDrop",e).call(e,b);return p.yield(e.list.whenRendered(),3)}e.list.addItemAt({morph:l,isListItem:!0},e.itemIndex);e.list.clearPreviews();p.jumpToEnd()})}},{key:"select",value:function(){this.list.selectedIndex=this.itemIndex;this.item.morph.focus()}},{key:"onMouseDown",value:function(b){Dd.touchInputDevice?
this._touchDown=Date.now():this.select()}},{key:"onMouseUp",value:function(b){Dd.touchInputDevice&&500>Date.now()-this._touchDown&&this.select()}},{key:"displayItem",value:function(b,e,l,p,u,x,z){x=void 0===x?!1:x;$b._get(Object.getPrototypeOf(k.prototype),"displayItem",this).call(this,b,e,l,p,u,x,z);b.morph&&(b.morph.selected=x)}},{key:"onGrab",value:function(b){var e=this.list,l=b.halo&&b.halo.target===this;l&&b.halo.detachFromTarget();var p=this.submorphs.length?this.submorphs[0]:Dd.morph({type:"label",
value:this.value});b.hand.grab(p);p.position=b.hand.localize(this.globalPosition);l&&b.halo.refocus(p);e.removeItem(this.list.items[this.itemIndex]);e.itemMorphs.forEach(function(u){return u.remove()});e.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveItem"}},{key:"properties",get:function(){return{draggable:{defaultValue:!Dd.touchInputDevice},item:{derived:!0,get:function(){return this.list.items[this.itemIndex]}},list:{drived:!0,get:function(){return this.owner.owner}},
isListItem:{get:function(){return!0}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:46712,end:48961})}(Dd.ListItemMorph);Dd.InteractiveItem=PP;Dd.InteractiveItem=PP;Dd.InteractiveItem=PP;var QP=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("MorphList")&&
"function"===typeof d.MorphList?d.MorphList:d.MorphList=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"onLoad",value:function(){$b._get(Object.getPrototypeOf(k.prototype),"onLoad",this).call(this);this.clipMode=this.touchInput?"auto":"hidden"}},{key:"showDropPreviewFor",value:function(b,e){b=b.itemIndex;this.items[b].isPreview&&e||(this.clearPreviews(),e&&this.addItemAt({isListItem:!0,isPreview:!0,
morph:Dd.morph({reactsToPointer:!1,acceptsDrops:!1,width:this.width-5,height:this.itemHeight,fill:Dd.Color.orange.withA(.5)})},b))}},{key:"clearPreviews",value:function(){var b=this;this.items.filter(function(e){return e.morph&&e.morph.owner&&!Dd.Path("morph.owner.isListItem").get(e)}).map(function(e){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(b.removeItem(e))})});this.items.filter(function(e){return e.isPreview}).map(function(e){return b.removeItem(e)})}},{key:"update",
value:function(){var b=this,e=this.items;e&&this.listItemContainer&&(this.scroller&&(this.scroller.visible=!1),this.dontRecordChangesWhile(function(){var l=b.itemHeight,p=b.itemMorphs,u=b.listItemContainer,x=b.selectedIndexes,z=b.extent.y,E=b.fontSize,G=b.fontFamily,J=b.fontColor,K=b.padding,T=b.itemPadding,P=b.selectionColor,da=b.selectionFontColor,fa=b.nonSelectionFontColor,ka=b.itemBorderRadius,za=b.scrollBar,Ia=b.scroll.y;K=K||Dd.Rectangle.inset(0);var N=K.top(),ia=K.left(),W=K.bottom();K=K.right();
var ca=Math.max(0,Math.floor(Ia/l)),sa=Math.min(e.length,Math.ceil((Ia+z)/l));z=0;Ia=b.width-(ia+K);p=Dd.arr.sortBy(p,function(ib){return ib.itemIndex});var la=$jscomp.makeIterator(Dd.arr.partition(p,function(ib){return ib.itemIndex<ca}));p=la.next().value;var Aa=la.next().value;Aa=$jscomp.makeIterator(Dd.arr.partition(Aa,function(ib){return ib.itemIndex>sa}));la=Aa.next().value;Aa=Aa.next().value;p=[].concat($jscomp.arrayFromIterable(la),$jscomp.arrayFromIterable(Aa),$jscomp.arrayFromIterable(p));
E={fontSize:E,fontFamily:G,fontColor:fa||J,padding:T,borderRadius:ka||0,selectionFontColor:da,nonSelectionFontColor:fa,selectionColor:P};p.length&&sa-ca>p.length&&(ca!=p[0].itemIndex?Dd.arr.pushAt(p,u.addMorph(new Dd.InteractiveItem(E)),0):sa!=Dd.arr.last(p).itemIndex&&p.push(u.addMorph(new Dd.InteractiveItem(E))));for(G=0;G<sa-ca;G++){J=ca+G;T=e[J];if(!T){p.slice(G).forEach(function(ib){return ib.remove()});break}P=p[G];P||(P=p[G]=u.addMorph(new Dd.InteractiveItem(E)),P.clipMode="visible");P.displayItem(T,
J,Ia,l,Dd.pt(0,l*J),x.includes(J),E);z=Math.max(z,P.width)}l=Math.max(N+W+l*e.length,b.height);x=Dd.pt(b.width,l).subPt(Dd.pt(ia+K,0));u.setBounds(Dd.pt(ia,N).extent(x));za.left=z-10;za.fill=null;za.top=0;za.extent=Dd.pt(1,l)}))}},{key:"onHoverIn",value:function(b){this.clipMode="auto"}},{key:"onHoverOut",value:function(b){this.touchInput||(this.clipMode="hidden")}},{key:"onScroll",value:function(b){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphList"}},{key:"properties",
get:function(){return{touchInput:{get:function(){return Dd.touchInputDevice}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(b){this.setProperty("items",b.map(Dd.asItem));this.itemMorphs.forEach(function(e){return e.remove()});this.update();this.attributeConnections&&Dd.signal(this,"values",this.values)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:48970,end:54202})}(Dd.List);Dd.MorphList=QP;Dd.MorphList=QP;Dd.MorphList=QP;var Aza=Object.freeze({__proto__:null,asItem:CL,ListItemMorph:OP,List:YB,FilterableList:CG,DropDownList:DG,InteractiveItem:PP,MorphList:QP}),Zg=lively.FreezerRuntime.recorderFor("lively.components/menus.js");Zg.Label=Mq;Zg.config=$l;Zg.Morph=xk;Zg.obj=eg;Zg.promise=bh;Zg.fun=Vl;Zg.pt=ui;Zg.Color=ng;Zg.Rectangle=Fe;var RP=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),
k=d.hasOwnProperty("MenuDivider")&&"function"===typeof d.MenuDivider?d.MenuDivider:d.MenuDivider=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuDivider"}},{key:"properties",get:function(){return{isMenuDevider:{defaultValue:!0},fill:{defaultValue:Zg.Color.gray.lighter()},extent:{defaultValue:Zg.pt(100,5)},reactsToPointer:{defaultValue:!1}}}}],
d,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:168,end:444})}(Zg.Morph);Zg.MenuDivider=RP;Zg.MenuDivider=RP;Zg.MenuDivider=RP;var SP=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),k=d.hasOwnProperty("MenuItem")&&"function"===typeof d.MenuItem?d.MenuItem:
d.MenuItem=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"onHoverIn",value:function(b){var e=this;this.owner.itemMorphs.forEach(function(l){return l!==e&&(l.selected=!1)});this.selected=!0;this.submenu&&this.owner.openSubMenuDelayed(b,this,this.submenu)}},{key:"onHoverOut",value:function(b){var e=this,l=b.hand;setTimeout(function(){(e.owner?e.owner.submenus:[]).some(function(p){return p.fullContainsWorldPoint(l.globalPosition)})||
(e.selected=!1)},20);this.owner.maybeRemoveSubmenu()}},{key:"onMouseDown",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress){if(e.submenu)return u.return();u.setCatchFinallyBlocks(2);e.owner.startFinish();if("function"!==typeof e.action)throw Error("Menu item "+e.textString+" has no executable action!");return u.yield(e.action(),4)}if(2!=u.nextAddress)return e.owner.completeFinish(),u.leaveTryBlock(0);l=u.enterCatchBlock();(p=e.world())?
p.logError(l):console.error(l);u.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuItem"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},fill:{defaultValue:Zg.Color.transparent},fontSize:{defaultValue:14},draggable:{defaultValue:!1},readOnly:{defaultValue:!0},nativeCursor:{defaultValue:"pointer"},selected:{defaultValue:!1,set:function(b){this.selected!==b&&(this.addValueChange("selected",
b),b?(this.fontColor=Zg.Color.white,this.fill=Zg.Color.rgb(21,101,192)):(this.fill=Zg.Color.transparent,this.fontColor=Zg.Color.black))}},isMenuItem:{derived:!0,readOnly:!0,get:function(){return!0}},label:{get:function(){return this.valueAndAnnotation.value.map(function(b,e){return 0===e%2?b:""}).join("\n")},set:function(b){this.valueAndAnnotation={value:b,annotation:this.annotation}}},annotation:{get:function(){return this.valueAndAnnotation.annotation},set:function(b){this.valueAndAnnotation={value:this.value,
annotation:b}}},action:{},submenu:{}}}}],d,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:453,end:2976})}(Zg.Label);Zg.MenuItem=SP;Zg.MenuItem=SP;Zg.MenuItem=SP;Zg.invalidItem={string:"invalid item",action:function(){return $world.setStatusMessage("invalid item")}};var TP=Ma("j",function(a){var d=
lively.FreezerRuntime.recorderFor("lively.components/menus.js"),k=d.hasOwnProperty("Menu")&&"function"===typeof d.Menu?d.Menu:d.Menu=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"startFinish",value:function(){this.ownerMenu&&this.ownerMenu.startFinish();this._waitingForFinish=!0}},{key:"completeFinish",value:function(){this.ownerMenu&&this.ownerMenu.completeFinish();this.finishedPromise.resolve(!0)}},
{key:"whenFinished",value:function(){return this.finishedPromise.promise}},{key:"onChange",value:function(b){switch(b.prop){case "itemPadding":case "fontSize":case "fontFamily":this.updateMorphs()}$b._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b)}},{key:"remove",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(b.animate({opacity:0,duration:300}),2);b._waitingForFinish||b.completeFinish();$b._get(Object.getPrototypeOf(k.prototype),
"remove",b).call(b);e.jumpToEnd()})}},{key:"ensureItem",value:function(b){if(!b)return Zg.invalidItem;if(b.title)return this.title=b.title,null;if(b.isDivider)return b;if(b.hasOwnProperty("string")&&b.hasOwnProperty("action"))return Zg.obj.select(b,["string","action","annotation"]);if(Array.isArray(b)){var e=$jscomp.makeIterator(b),l=e.next().value;e=e.next().value;return"string"===typeof l||Array.isArray(l)?e&&"function"!==typeof e?"object"===typeof e&&e.getItems?{label:l,submenu:e.getItems,annotation:[" ",
{textStyleClasses:["fa","fa-caret-right"]}]}:Array.isArray(e)?{label:l,submenu:e,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:Zg.invalidItem:{label:l,action:e||function(){return $world.setStatusMessage(l)}}:Zg.invalidItem}if(b.command){var p=b.command,u=b.showKeyShortcuts,x=b.target;e=b.alias;var z=b.args;b=b.tooltip;if(!p||!x)return Zg.invalidItem;void 0===u&&(u=!0);u=u?"string"===typeof u?u:x.keysForCommand(p):null;return{tooltip:b,string:e||p,annotation:u?["\t"+u,{fontSize:"70%"}]:
["",{}],action:function(){return x.execCommand(p,z)}}}return Zg.invalidItem}},{key:"updateMorphs",value:function(){var b=this;this.submorphs=[];var e=this.padding.left(),l=this.padding.right(),p=this.padding.top(),u=this.padding.bottom(),x=0,z=Zg.pt(e,p),E={};this.fontFamily&&(E.fontFamily=this.fontFamily);this.fontSize&&(E.fontSize=this.fontSize);this.itemPadding&&(E.padding=this.itemPadding);this.title&&(p=this.addMorph(Object.assign({type:"label",value:this.title,name:"title",position:z,fontWeight:"bold"},
E)),z=p.bottomLeft,x=Math.max(p.width,x));this.items.forEach(function(G){var J=G.label,K=G.string,T=G.annotation,P=G.action,da=G.submenu,fa=G.tooltip;G=b.addMorph(G.isDivider?new Zg.MenuDivider({position:z}):new Zg.MenuItem(Object.assign({label:J||K,annotation:T,action:P,submenu:da,tooltip:fa,position:z},E)));z=G.bottomLeft;x=Math.max(G.width,x)});this.submorphs.forEach(function(G){G.isLabel&&(G.fit(),G.autofit=!1,G.fixedWidth=!0,G.fixedHeight=!0);G.width=x});this.extent=Zg.pt(x+l+e,z.y+u)}},{key:"openSubMenuDelayed",
value:function(b,e,l){var p=this;this.openingSubMenuProcess&&clearTimeout(this.openingSubMenuProcess);this.openingSubMenuProcess=setTimeout(function(){try{p.openSubMenu(b,e,l)}catch(x){var u=p.world();u?u.logError(x):console.error(x)}},200)}},{key:"openSubMenu",value:function(b,e,l){if(e.selected){var p=this.submenu;if(p){if(p.ownerItemMorph===e||this.morphsContainingPoint(b.position).includes(p))return;this.removeSubMenu()}"function"===typeof l&&(l=l());b=this.submenu=this.addMorph(new Zg.Menu({items:l,
ownerItemMorph:e,ownerMenu:this}));b.updateMorphs();b.offsetForOwnerMenu()}}},{key:"maybeRemoveSubmenu",value:function(){var b=this;Zg.fun.debounceNamed(this.id+"-maybeRemoveSubmenu",300,function(){var e=b.world();if(e){var l=b.submenu,p=b.selectedItemMorph;e=e&&l&&l.fullContainsWorldPoint(e.firstHand.position);l&&l.ownerItemMorph!==p&&!l.ownerItemMorph.selected&&(e?(p&&(p.selected=!1),l.ownerItemMorph.selected=!0):b.removeSubMenu())}})();return this.removeOnMouseOut}},{key:"removeSubMenu",value:function(){if(this.submenu){var b=
this.submenu;this.submenu=b.ownerMenu=null;b.remove()}}},{key:"moveBoundsForVisibility",value:function(b,e){var l=0,p=0;b.right()>e.right()&&(l=-1*(b.right()-e.right()));var u=b.left()+l;0>u&&(l+=-u);b.bottom()>e.bottom()&&(p=-1*(b.bottom()-e.bottom()),l+=1);e=b.top()+p;0>e&&(p+=-e);return b.translatedBy(Zg.pt(l,p))}},{key:"moveSubMenuBoundsForVisibility",value:function(b,e,l,p){p||(p=e.right()+b.width>l.right()?"left":"right");b=b.extent();b="left"===p?e.topLeft().addXY(-b.x,0).extent(b):e.topRight().extent(b);
b.bottom()>l.bottom()&&(e=-1*(b.bottom()-l.bottom()),b=b.translatedBy(Zg.pt(0,e)));b.top()<l.top()&&(l=l.top()-b.top(),b=b.translatedBy(Zg.pt(0,l)));return b}},{key:"offsetForOwnerMenu",value:function(){var b=this.ownerMenu,e=this.world().visibleBounds(),l=b.getGlobalTransform().inverse().transformRectToRect(e);b=this.clipForVisibility(this.moveSubMenuBoundsForVisibility(this.innerBounds(),b.selectedItemMorph?b.selectedItemMorph.bounds():b.innerBounds(),l),e);this.setBounds(b)}},{key:"clipForVisibility",
value:function(b,e){b=void 0===b?this.bounds():b;e=void 0===e?this.world().visibleBounds():e;var l=this.transformRectToMorph(this.world(),b.withX(0).withY(0));e.containsRect(l.insetBy(10))||(b=b.withExtent(Zg.pt(5+b.width,Math.min(l.height,e.height))));return b}},{key:"offsetForWorld",value:function(b){b=this.innerBounds().translatedBy(b);if(this.owner.visibleBounds){var e=this.owner.visibleBounds();b=this.clipForVisibility(this.moveBoundsForVisibility(b,e),e)}this.setBounds(b)}},{key:"onHoverOut",
value:function(){this.removeOnMouseOut&&this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Menu"}},{key:"forItems",value:function(b,e){e=void 0===e?{title:""}:e;return new this(Object.assign({},e,{items:b}))}},{key:"openAt",value:function(b,e,l){l=void 0===l?{title:""}:l;e=this.forItems(e,l).openInWorldNear(b);e.offsetForWorld(b);return e}},{key:"openAtHand",value:function(b,e){e=void 0===e?{title:""}:e;var l=e.hand;b=this.forItems(b,Zg.obj.dissoc(e,["hand"]));l=l?l.position:
Zg.pt(0,0);b.titleMorph&&(l=l.addXY(0,-b.titleMorph.height));b.openInWorld(l);b.offsetForWorld(l);return b}},{key:"properties",get:function(){return{dropShadow:{initialize:function(){if(Zg.config.fastShadows||!this.ownerMenu)this.dropShadow=!0,this.dropShadow.fast=!1}},submorphs:{initialize:function(){this.updateMorphs()}},epiMorph:{defaultValue:!0},acceptsDrops:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},padding:{defaultValue:Zg.Rectangle.inset(0,2)},itemPadding:{defaultValue:Zg.Rectangle.inset(8,
4)},borderWidth:{defaultValue:1},fill:{defaultValue:Zg.Color.white},borderColor:{defaultValue:Zg.Color.gray.lighter()},borderRadius:{defaultValue:4},opacity:{defaultValue:.95},fontSize:{defaultValue:16},title:{get:function(){return this.getProperty("title")},set:function(b){this.addValueChange("title",b)}},finishedPromise:{initialize:function(){this.finishedPromise=Zg.promise.deferred()}},ownerMenu:{},submenu:{},styleClasses:{defaultValue:["Halo"]},submenus:{readOnly:!0,get:function(){return this.submenu?
[this.submenu].concat(this.submenu.submenus):[]}},ownerItemMorph:{},removeOnMouseOut:{},items:{set:function(b){b=b.map(this.ensureItem.bind(this)).filter(Boolean);this.setProperty("items",b)}},selectedItemMorph:{derived:!0,readOnly:!0,get:function(){return this.itemMorphs.find(function(b){return b.selected})}},titleMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("title")}},itemMorphs:{derived:!0,readOnly:!0,get:function(){return this.submorphs.filter(function(b){return b.isMenuItem})}}}}}],
d,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3089,end:16006})}(Zg.Morph));Zg.Menu=TP;Zg.Menu=TP;Zg.Menu=TP;var Bza=Object.freeze({__proto__:null,MenuDivider:RP,MenuItem:SP,Menu:TP}),mk=lively.FreezerRuntime.recorderFor("lively.components/resizers.js");mk.arr=Gf;mk.pt=ui;mk.Color=ng;
mk.Morph=xk;var UP=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),k=d.hasOwnProperty("VerticalResizer")&&"function"===typeof d.VerticalResizer?d.VerticalResizer:d.VerticalResizer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"onDrag",value:function(b){this.movedHorizontallyBy(b.position.x-b.state.lastDragPosition.x)}},{key:"divideRelativeToParent",value:function(b){if(!(!this.owner||
"number"!==typeof b||0>b||1<b)){var e=this.owner.extent.x-this.extent.x;if(!(0>e)){var l=this.getRelativeDivide();this.movedHorizontallyBy(e*(b-l))}}}},{key:"getRelativeDivide",value:function(b){var e=this.bounds();b=e.left();e=this.owner.extent.x-e.width;return 0>e?NaN:b/e}},{key:"movedHorizontallyBy",value:function(b){this.resizeIsSave(b)&&(this.fixed.concat(this.scalingRight).forEach(function(e){var l=e.position;e.position=mk.pt(l.x+b,l.y)}),this.scalingLeft.forEach(function(e){var l=e.extent;
e.extent=mk.pt(l.x+b,l.y)}),this.scalingRight.forEach(function(e){var l=e.extent;e.extent=mk.pt(l.x-b,l.y)}),this.position=this.position.addPt(mk.pt(b,0)))}},{key:"resizeIsSave",value:function(b){var e=this;return this.scalingLeft.every(function(l){return l.extent.x+b>=e.minWidth})&&this.scalingRight.every(function(l){return l.extent.x-b>=e.minWidth})}},{key:"addFixed",value:function(b){mk.arr.pushIfNotIncluded(this.fixed,b)}},{key:"addScalingLeft",value:function(b){mk.arr.pushIfNotIncluded(this.scalingLeft,
b)}},{key:"addScalingRight",value:function(b){mk.arr.pushIfNotIncluded(this.scalingRight,b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:mk.Color.gray.lighter()},nativeCursor:{defaultValue:"ew-resize"},fixed:{defaultValue:[]},scalingLeft:{defaultValue:[]},scalingRight:{defualtValue:[]},minWidth:{defaultValue:20},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:128,end:2722})}(mk.Morph);mk.VerticalResizer=UP;mk.VerticalResizer=UP;mk.VerticalResizer=UP;var VP=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),k=d.hasOwnProperty("HorizontalResizer")&&"function"===typeof d.HorizontalResizer?d.HorizontalResizer:d.HorizontalResizer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"onDrag",value:function(b){this.movedVerticallyBy(b.position.y-b.state.lastDragPosition.y)}},{key:"divideRelativeToParent",value:function(b){if(!(!this.owner||"number"!==typeof b||0>b||1<b)){var e=this.owner.extent.y-this.extent.y;if(!(0>e)){var l=this.getRelativeDivide();this.movedVerticallyBy(e*(b-l))}}}},{key:"getRelativeDivide",value:function(b){var e=this.bounds();b=e.top();e=this.owner.extent.y-e.height;
return 0>e?NaN:b/e}},{key:"movedVerticallyBy",value:function(b){this.resizeIsSave(b)&&(this.fixed.concat(this.scalingBelow).forEach(function(e){var l=e.position;e.position=mk.pt(l.x,l.y+b)}),this.scalingAbove.forEach(function(e){var l=e.extent;e.extent=mk.pt(l.x,l.y+b)}),this.scalingBelow.forEach(function(e){var l=e.extent;e.extent=mk.pt(l.x,l.y-b)}),this.position=this.position.addPt(mk.pt(0,b)))}},{key:"resizeIsSave",value:function(b){var e=this;return this.scalingAbove.every(function(l){return l.extent.y+
b>=e.minHeight})&&this.scalingBelow.every(function(l){return l.extent.y-b>=e.minHeight})}},{key:"addFixed",value:function(b){mk.arr.pushIfNotIncluded(this.fixed,b)}},{key:"addScalingAbove",value:function(b){mk.arr.pushIfNotIncluded(this.scalingAbove,b)}},{key:"addScalingBelow",value:function(b){mk.arr.pushIfNotIncluded(this.scalingBelow,b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:mk.Color.gray.lighter()},
nativeCursor:{defaultValue:"ns-resize"},fixed:{defaultValue:[]},scalingBelow:{defaultValue:[]},scalingAbove:{defaultValue:[]},minHeight:{defaultValue:20},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2731,end:5358})}(mk.Morph);mk.HorizontalResizer=
VP;mk.HorizontalResizer=VP;mk.HorizontalResizer=VP;var Cza=Object.freeze({__proto__:null,VerticalResizer:UP,HorizontalResizer:VP}),og=lively.FreezerRuntime.recorderFor("lively.components/tree.js");og.arr=Gf;og.fun=Vl;og.obj=eg;og.tree=Us;og.string=Dh;og.promise=bh;og.pt=ui;og.Rectangle=Fe;og.Color=ng;og.Morph=xk;og.Text=Lq;og.config=$l;og.touchInputDevice=En;og.Label=Mq;og.connect=ll;og.signal=hm;og.bowser=Fp;var WP=Ma("bF",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),
k=d.hasOwnProperty("Tree")&&"function"===typeof d.Tree?d.Tree:d.Tree=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;if(!b.treeData)throw Error("Cannot create tree without TreeData!");$b._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.resetCache();this.update()}},{key:"onChange",
value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);"fontSize fontColor selectionColor disableIndent nonSelectionFontColor selectionFontColor".split(" ").includes(b.prop)&&this.update(!0)}},{key:"resetCache",value:function(){this._lineHeightCache=null}},{key:"isTree",get:function(){return!0}},{key:"nodeStyle",get:function(){return{fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,autofit:!this.resizeNodes}}},{key:"lineBounds",value:function(b){var e=
this.textLayout.charBoundsOfRow(this,b);b=og.Rectangle.fromLiteral(og.arr.first(e)).topLeft();e=og.Rectangle.fromLiteral(og.arr.last(e)).bottomRight();return og.Rectangle.fromAny(b,e)}},{key:"recoverOriginalLine",value:function(b){for(var e=this.document.getTextAndAttributesOfLine(b),l=0;l<e.length;l++){var p=this._originalColor[l];p&&!og.obj.isString(e[l])&&(e[l]?e[l].fontColor=p:e[l]={fontColor:p})}this.document.setTextAndAttributesOfLine(b,e)}},{key:"renderSelectedLine",value:function(b){var e=
this.document.getTextAndAttributesOfLine(b);this._originalColor=Array(e.length);for(var l=0;l<e.length;l++)0===l%2?e[l]&&e[l].isMorph&&(this._originalColor[l]=e[l]?e[l].fontColor||this.nonSelectionFontColor:null,e[l].fontColor=this.selectionFontColor,e[l].isSelected=!0):(this._originalColor[l]=(e[l]?e[l].fontColor:null)||this.nonSelectionFontColor,e[l]?e[l].fontColor=this.selectionFontColor:e[l]={fontColor:this.selectionFontColor});this.document.setTextAndAttributesOfLine(b,e);this.selectLine(b,!0);
this._lastSelectedIndex=this.selectedIndex}},{key:"computeTreeAttributes",value:function(b){if(!b.length)return[];for(var e=og.arr.genN(8*(b.length-1),function(){return null}),l=1,p,u,x=this.disableIndent?0:1.3*this.fontSize;l<b.length;l++){p=8*(l-1);u=this.selectedIndex==l;b[l].node.isSelected=u;e[p]=" ";e[p+1]={fontSize:x,fontColor:og.Color.transparent,textStyleClasses:["fas"],paddingRight:x*(b[l].depth-1)+"px"};e[p+3]={fontColor:og.Color.transparent,textStyleClasses:["fas"],paddingTop:this.fontSize/
10+"px",paddingRight:this.fontSize/8+"px"};this.treeData.isLeaf(b[l].node)?e[p+2]=this.disableIndent?"":"    ":(e[p+2]=this.treeData.isCollapsed(b[l].node)?" \uf0da ":" \uf0d7 ",Object.assign(e[p+3],{paddingRight:this.treeData.isCollapsed(b[l].node)?this.fontSize/4+"px":"0px",paddingTop:"0px",nativeCursor:"pointer",fontColor:this.fontColor}));var z=this.treeData.safeDisplay(b[l].node);z.isMorph&&(z._capturedProps&&Object.assign(z,z._capturedProps),u&&(z._capturedProps=og.obj.select(z,["fontColor"])),
z.fontColor=this.nonSelectionFontColor);e[p+4]=z;og.arr.isArray(z)?e[p+5]=[]:e[p+5]={fontColor:this.fontColor};e[p+6]="\n";e[p+7]={}}e.push(" ",{fontSize:1.3*this.fontSize,textStyleClasses:["far"]});return 1<b.length?og.arr.flatten(e):[]}},{key:"update",value:function(b){var e=this;if(!this._updating&&this.treeData&&this.nodeItemContainer){this._updating=!0;try{this.withMetaDo({isLayoutAction:!0},function(){var l=e.treeData.asListWithIndexAndDepth();e.treeData!==e.lastTreeData||e.lastNumberOfNodes!==
l.length||b?(e.replace({start:{row:0,column:0},end:e.documentEndPosition},e.computeTreeAttributes(l),!1,!1),e.invalidateTextLayout(!0,!1),e.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){e.makeDirty();p.jumpToEnd()})})):e._lastSelectedIndex&&e.recoverOriginalLine(e._lastSelectedIndex-1);e.lastTreeData=e.treeData;e.lastNumberOfNodes=l.length;e.cursorPosition={row:0,column:0};0<e.selectedIndex&&e.renderSelectedLine(e.selectedIndex-1)})}finally{this._updating=
!1}}}},{key:"buildViewState",value:function(b){var e=this;"function"!==typeof b&&(b=function(u){return u});var l=this.selectedNode?b(this.selectedNode):null,p=new Map;og.tree.prewalk(this.treeData.root,function(u){return p.set(b(u),e.treeData.isCollapsed(u))},function(u){return e.treeData.getChildrenIfUncollapsed(u)});return{selectionId:l,collapsedMap:p,scroll:this.scroll}}},{key:"applyViewState",value:function(b,e){var l=this,p,u,x,z,E,G,J,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){switch(T.nextAddress){case 1:"function"!==
typeof e&&(e=function(P){return P}),p=b,u=p.selectionId,x=p.collapsedMap,z=p.scroll,E=0,G=-1;case 2:J=l.nodes;if(E>=J.length){T.jumpTo(3);break}K=e(J[E]);u===K&&(G=E);if(!x.has(K)||x.get(K)){T.jumpTo(4);break}return T.yield(l.treeData.collapse(J[E],!1),4);case 4:E++;T.jumpTo(2);break;case 3:return l.selectedIndex=G,l.update(),l.scroll=z,l.scrollSelectionIntoView(),T.yield(og.promise.delay(0),0)}})}},{key:"maintainViewStateWhile",value:function(b,e){var l=this,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==
u.nextAddress?(p=l.buildViewState(e),u.yield(b(),2)):u.yield(l.applyViewState(p,e),0)})}},{key:"onNodeCollapseChanged",value:function(b){var e=b.node,l=b.isCollapsed,p=this,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return p.resetCache(),x.setCatchFinallyBlocks(2),x.yield(p.treeData.collapse(e,l),4);if(2!=x.nextAddress)return og.signal(p,"nodeCollapseChanged",{node:e,isCollapsed:l}),p.update(),x.leaveTryBlock(0);u=x.enterCatchBlock();p.showError(u);x.jumpToEnd()})}},
{key:"uncollapse",value:function(b){b=void 0===b?this.selectedNode:b;var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?b&&e.treeData.isCollapsed(b)?l.yield(e.onNodeCollapseChanged({node:b,isCollapsed:!1}),2):l.return():l.return(b)})}},{key:"collapse",value:function(b){b=void 0===b?this.selectedNode:b;var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?!b||e.treeData.isCollapsed(b)?l.return():l.yield(e.onNodeCollapseChanged({node:b,
isCollapsed:!0}),2):l.return(b)})}},{key:"selectedPath",value:function(){return this.treeData.pathOf(this.selectedNode)}},{key:"selectPath",value:function(b){var e=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?(l=e,p.yield(e.treeData.followPath(b),2)):p.return(l.selectedNode=p.yieldResult)})}},{key:"gotoIndex",value:function(b){this.selectedNode=this.nodes[b];this.scrollIndexIntoView(b)}},{key:"scrollSelectionIntoView",value:function(){this.selectedNode&&
this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(b){this.scrollToIndex(b,"into view")}},{key:"centerSelection",value:function(){this.selectedNode&&this.scrollToIndex(this.selectedIndex,"center")}},{key:"scrollToIndex",value:function(b){this.scrollPositionIntoView({row:b-1,column:0})}},{key:"contextMenuForNode",value:function(b,e){og.signal(this,"contextMenuRequested",{node:b,evt:e})}},{key:"onKeyDown",value:function(b){var e=this.world().focusedMorph;if(!e.isText||
e.readOnly)return $b._get(Object.getPrototypeOf(k.prototype),"onKeyDown",this).call(this,b)}},{key:"onDragStart",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onDragStart",this).call(this,b);var e=this.textAttributeAtPoint(b.positionIn(this))||{},l=e.onDragStart,p=e.onDrag;e=e.onDragEnd;p&&(this._onDragHandler=p);e&&(this._onDragEndHandler=e);l&&l(b)}},{key:"onDrag",value:function(b){this._onDragHandler?this._onDragHandler(b):$b._get(Object.getPrototypeOf(k.prototype),"onDrag",this).call(this,
b)}},{key:"onDragEnd",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onDragEnd",this).call(this,b);delete this._onDragHandler;this._onDragEndHandler&&this._onDragEndHandler(b);delete this._onDragEndHandler}},{key:"onMouseDown",value:function(b){var e=this,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return l=e.textPositionFromPoint(b.positionIn(e)),p=l.row,u=l.column,x=e.nodes[p+1],x?!e.treeData.isLeaf(x)&&4>u?G.yield(x.isCollapsed,
3):(e.selectedIndex!=p+1&&(e.selectedIndex=p+1),G.jumpTo(2)):G.return();2!=G.nextAddress&&(G.yieldResult?e.uncollapse(x):e.collapse(x));z=e.textAttributeAt({row:p,column:u})||{};(E=z.onMouseDown)&&E(b);G.jumpToEnd()})}},{key:"onMouseUp",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onMouseUp",this).call(this,b);var e=(this.textAttributeAtPoint(b.positionIn(this))||{}).onMouseUp;e&&e(b)}},{key:"onHoverIn",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onHoverIn",this).call(this,
b);this.activateOnHover&&(this.clipMode="auto")}},{key:"onHoverOut",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onHoverOut",this).call(this,b);!og.touchInputDevice&&this.activateOnHover&&(this.clipMode="hidden")}},{key:"onContextMenu",value:function(b){if(b.targetMorph===this){b.stop();var e=this.textPositionFromPoint(b.positionIn(this));(e=this.nodes[e.row+1])&&this.contextMenuForNode(e,b)}}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"select node above"},
{keys:"Down|Ctrl-N",command:"select node below"},{keys:"Left",command:"collapse selected node"},{keys:"Right",command:"uncollapse selected node"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{mac:"Meta-[",win:"Ctrl-["},command:{command:"collapse or uncollapse all siblings",
args:{what:"collapse"}}},{keys:{mac:"Meta-]",win:"Ctrl-]"},command:{command:"collapse or uncollapse all siblings",args:{what:"uncollapse"}}},{keys:"Alt-N",command:"goto next sibling"},{keys:"Alt-P",command:"goto prev sibling"},{keys:"Alt-U",command:"goto parent"}]}},{key:"commands",get:function(){return og.treeCommands}},{key:"highlightChangedNodes",value:function(b){this.treeData.diff(b).forEach(function(e){e=$jscomp.makeIterator(e);var l=e.next().value;e.next();return l.renderedNode&&l.renderedNode.highlight()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tree"}},{key:"properties",get:function(){return{selectionColor:{type:"ColorGradient",defaultValue:og.Color.rgb(21,101,192)},fontFamily:{defaultValue:og.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"auto"},selectable:{defaultValue:!1},acceptsDrops:{defaultValue:!1},readOnly:{defaultValue:!0},fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},disableIndent:{defaultValue:!1},activateOnHover:{defaultValue:!0},
lineHeight:{defaultValue:1.5},clipMode:{defaultValue:"auto"},padding:{defaultValue:og.Rectangle.inset(3)},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/tree/light"}}},resizeNodes:{defaultValue:!1,set:function(b){this.setProperty("resizeNodes",b);this.resetCache();this.update()}},treeData:{after:["selection"],set:function(b){this.setProperty("treeData",b);this.resetCache();this.update()}},selectedIndex:{derived:!0,after:["selectedNode","nodes"],get:function(){return this.selectedNode?
this.nodes.indexOf(this.selectedNode):-1},set:function(b){this.selectedNode=this.nodes[b]}},nodes:{derived:!0,after:["treeData"],get:function(){return this.treeData.asList()}},defaultViewState:{get:function(){return Object.assign({},$b._get(Object.getPrototypeOf(k),"prototype",this).defaultViewState,{fastScroll:!1})}},selectedNode:{set:function(b){this.setProperty("selectedNode",b);this.update()}},selectedNodeAndSiblings:{readOnly:!0,derived:!0,after:["selectedNode","treeData"],get:function(){return this.selectedNode?
this.treeData.nodeWithSiblings(this.selectedNode):[]}},selectionFontColor:{isStyleProp:!0,defaultValue:og.Color.white,set:function(b){this.setProperty("selectionFontColor",b)}},nonSelectionFontColor:{isStyleProp:!0,defaultValue:og.Color.rgbHex("333"),set:function(b){this.setProperty("nonSelectionFontColor",b)}},nodeItemContainer:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this}},nodeMorphs:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.nodeItemContainer.submorphs.slice()}}}}}],
d,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:1472,end:17578})}(og.Text));og.Tree=WP;og.Tree=WP;og.Tree=WP;var XP=Ma("bD",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),k=d.hasOwnProperty("TreeData")&&"function"===typeof d.TreeData?d.TreeData:d.TreeData=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.root=b;this.parentMap=new WeakMap}},{key:"__dont_serialize__",get:function(){return["parentMap"]}},{key:"__deserialize__",value:function(){this.parentMap=new WeakMap}},{key:"display",value:function(b){throw Error("Not yet implemented");}},{key:"isCollapsed",value:function(b){throw Error("Not yet implemented");
}},{key:"collapse",value:function(b,e){throw Error("Not yet implemented");}},{key:"getChildren",value:function(b){throw Error("Not yet implemented");}},{key:"isLeaf",value:function(b){throw Error("Not yet implemented");}},{key:"getChildrenIfUncollapsed",value:function(b){return this.isCollapsed(b)?[]:this.getChildren(b)}},{key:"safeDisplay",value:function(b){try{return this.display(b)}catch(e){return"[TreeData] Error when trying to display node: "+e}}},{key:"nodeToString",value:function(b){b=this.safeDisplay(b);
return"string"===typeof b?b:b&&Array.isArray(b)?b.map(function(e,l){return 0===l%2?e:""}).join(""):String(b)}},{key:"parentNode",value:function(b){var e=this;return this.parentMap.get(b)||og.tree.detect(this.root,function(l){return!e.isLeaf(l)&&e.getChildrenIfUncollapsed(l).includes(b)},function(l){return e.getChildrenIfUncollapsed(l)})}},{key:"nodeWithSiblings",value:function(b){return(b=this.parentNode(b))?this.getChildrenIfUncollapsed(b):[]}},{key:"asList",value:function(){return this.asListWithIndexAndDepth().map(function(b){return b.node})}},
{key:"asListWithIndexAndDepth",value:function(b){var e=this;b=void 0===b?!1:b;var l=[];og.tree.prewalk(this.root,function(p,u,x){return l.push({node:p,depth:x,i:u})},function(p){return e.getChildrenIfUncollapsed(p)});return b?og.arr.filter(l,b):l}},{key:"pathOf",value:function(b){for(var e=[];b;)e.unshift(b),b=this.parentNode(b);return e}},{key:"followPath",value:function(b,e,l){l=void 0===l?this.root:l;var p=this,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:e||
(e=function(J,K){return J===K});u=b.findIndex(function(J){return e(J,l)});b=b.slice(u+1);if(!b.length)return G.return(null);x=l;case 2:if(!b.length){G.jumpTo(3);break}if(!p.isCollapsed(x)){G.jumpTo(4);break}return G.yield(p.collapse(x,!1),4);case 4:z=b.shift();E=p.getChildrenIfUncollapsed(x).find(function(J){return e(z,J)});if(!E)throw Error("Cannot descend into tree, next node of "+b.join(".")+" not found at "+p.safeDisplay(x));x=E;G.jumpTo(2);break;case 3:return G.return(x)}})}},{key:"diff",value:function(b){var e=
[],l=this.asListWithIndexAndDepth();b=b.asListWithIndexAndDepth();if(l.length!=b.length)return[];l=$jscomp.makeIterator(og.arr.zip(l,b));for(b=l.next();!b.done;b=l.next()){var p=$jscomp.makeIterator(b.value);b=p.next().value;p=p.next().value;og.obj.equals(b.node.value,p&&p.node.value)||e.push([b.node,p.node])}return e}},{key:"patch",value:function(b){var e=this.diff(b);if(0<e.length){b=$jscomp.makeIterator(e);for(e=b.next();!e.done;e=b.next()){var l=$jscomp.makeIterator(e.value);e=l.next().value;
l=l.next().value;e.value=l.value}return this}return b}},{key:"uncollapseAll",value:function(b,e,l){e=void 0===e?0:e;var p=this,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:if(l){z.jumpTo(2);break}return z.yield(p.uncollapseAll(b,e,p.root),3);case 3:return z.return(z.yieldResult);case 2:if(!b(l,e)){z.jumpTo(0);break}if(!l.isCollapsed){z.jumpTo(5);break}return z.yield(p.collapse(l,!1),6);case 6:case 5:x=z.forIn(l.children);case 7:if(null==(u=x.getNext()))z.jumpTo(0);
else return z.yield(p.uncollapseAll(b,e+1,l.children[u]),7)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeData"}}],d,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17587,end:22608})}(void 0));og.TreeData=XP;og.TreeData=XP;og.TreeData=XP;og.treeCommands=[{name:"select via filter",
exec:function(a){var d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return d=a.treeData,d.asListWithIndexAndDepth(),d.asListWithIndexAndDepth().map(function(x){return Object.assign(x,{string:d.nodeToString(x.node)})}),k=og.string.lines(og.string.printTree(d.root,d.nodeToString.bind(d),d.getChildrenIfUncollapsed.bind(d))),b=d.asList().map(function(x,z){return{isListItem:!0,string:k[z],value:x}}),u.yield(a.world().filterableListPrompt("Select item",b),
2);e=u.yieldResult;l=$jscomp.makeIterator(e.selected);if(p=l.next().value)a.selectedNode=p,a.scrollSelectionIntoView();return u.return(!0)})}},{name:"page up",exec:function(a){a.scrollPageUp(1);var d=a.scroll,k=a.padding.top(),b=d.y;d=a.lineHeightCache.findIndex(function(e){return b<=(k+=e)});d--;a.gotoIndex(Math.max(1,d));return!0}},{name:"page down",exec:function(a){a.scrollPageDown(1);var d=a.scroll,k=a.padding.top(),b=d.y+a.height;d=a.lineHeightCache.findIndex(function(e){return b<=(k+=e)});d--;
a.gotoIndex(Math.min(d,a.nodes.length-1));return!0}},{name:"goto first item",exec:function(a){a.gotoIndex(1);return!0}},{name:"goto last item",exec:function(a){a.gotoIndex(a.nodes.length-1);return!0}},{name:"goto next sibling",exec:function(a){var d=a.selectedNodeAndSiblings;if(d=d[d.indexOf(a.selectedNode)+1])a.selectedNode=d,a.scrollSelectionIntoView();return!0}},{name:"goto prev sibling",exec:function(a){var d=a.selectedNodeAndSiblings;if(d=d[d.indexOf(a.selectedNode)-1])a.selectedNode=d,a.scrollSelectionIntoView();
return!0}},{name:"goto parent",exec:function(a){a.selectedNode&&(a.selectedNode=a.treeData.parentNode(a.selectedNode),a.scrollSelectionIntoView());return!0}},{name:"collapse selected node",exec:function(a){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?(d=a.selectedNode,d?a.treeData.isCollapsed(d)?(a.selectedNode=a.treeData.parentNode(d),a.scrollSelectionIntoView(),k.jumpTo(2)):k.yield(a.onNodeCollapseChanged({node:a.selectedNode,isCollapsed:!0}),2):k.return(!0)):
k.return(!0)})}},{name:"uncollapse selected node",exec:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?a.selectedNode?d.yield(a.onNodeCollapseChanged({node:a.selectedNode,isCollapsed:!1}),2):d.jumpTo(2):d.return(!0)})}},{name:"collapse or uncollapse all siblings",exec:function(a,d){function k(G){return og.arr.filter(l.getChildrenIfUncollapsed(G),function(J){return!l.isLeaf(J)})}function b(G,J){return Promise.all(G.map(function(K){return a.onNodeCollapseChanged({node:K,
isCollapsed:J})}))}d=void 0===d?{what:"collapse"}:d;var e,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress){e="collapse"===d.what;l=a.treeData;if(e){if(l.isCollapsed(a.selectedNode))return G.return(!0);u=l.parentNode(a.selectedNode);x=-1;og.tree.prewalk(u,function(J,K,T){T<x||(T>x&&(x=T,p=[]),T===x&&og.arr.pushIfNotIncluded(p,l.parentNode(J)))},l.getChildrenIfUncollapsed.bind(l))}else for(z=og.arr.compact([l.parentNode(a.selectedNode)]);z.length;){p=og.arr.flatmap(z,
function(J){return k(J)});E=p.every(function(J){return l.isCollapsed(J)===e});if(!E)break;z=p}return G.yield(b(p,e),2)}a.scrollSelectionIntoView();return G.return(!0)})}},{name:"select node above",exec:function(a){var d=a.nodes,k=a.selectedIndex;1>=k&&(k=d.length);a.selectedNode=d[k-1];a.scrollSelectionIntoView();return!0}},{name:"select node below",exec:function(a){var d=a.nodes,k=a.selectedIndex;if(-1>=k||k>=d.length-1)k=0;a.selectedNode=d[k+1];a.scrollSelectionIntoView();return!0}},{name:"realign top-bottom-center",
exec:function(a){if(a.selectedNode){var d=a.scroll,k=d.x;d=d.y;var b=a.lineBounds(a.selectedIndex),e=b.topLeft();b=a.height-b.height;d=2>Math.abs(e.y-d)?e.y-b:2>Math.abs(e.y-d-.5*b)?e.y:e.y-.5*b;a.scroll=og.pt(k,d);return!0}}},{name:"print contents in text window",exec:function(a){var d=a.treeData;d=og.string.printTree(d.root,d.nodeToString.bind(d),d.getChildrenIfUncollapsed.bind(d));var k=a.getWindow()?"printed "+a.getWindow().title:a.name;return a.world().execCommand("open text window",{title:k,
content:d,name:k,fontFamily:og.config.codeEditor.defaultStyle.fontFamily})}}];var Dza=Object.freeze({__proto__:null,Tree:WP,TreeData:XP}),uv=lively.FreezerRuntime.recorderFor("lively.components/iframe.js");uv.promise=bh;uv.HTMLMorph=bv;var YP=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/iframe.js"),k=d.hasOwnProperty("IFrameMorph")&&"function"===typeof d.IFrameMorph?d.IFrameMorph:d.IFrameMorph=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b.src||b.srcdoc||(b.srcdoc="<p>Empty iframe</p>");$b._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b)}},{key:"changeSrc",value:function(b,e){var l=this,p=this.iframe,u=this._loadPromise;u&&!u.loaded&&u.reject();this._loadPromise=uv.promise.deferred();this._loadPromise.loaded=!1;p.onload=function(x){l._loadPromise.loaded=!0;l._loadPromise.resolve(x)};e=b||e;
u=b?"src":"srcdoc";b=b?"srcdoc":"src";this.addValueChange(b,null);this.addValueChange(u,e);p.removeAttribute(b);p.setAttribute(u,e);this._loadPromise[u]=e}},{key:"whenLoaded",value:function(){return this._loadPromise.promise}},{key:"reload",value:function(){return this.iframe.src=this.src}},{key:"run",value:function(b){return this.innerWindow.eval("("+b+")();")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"printTextMorph",value:function(b){var e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==
z.nextAddress)return z.yield(b.whenRendered(),2);if(3!=z.nextAddress)return e=b.env.renderer.getNodeForMorph(b),l=uv.IFrameMorph.open({srcdoc:e.outerHTML}),z.yield(l.whenLoaded(),3);p=l.innerWindow.document;p.body.style.whiteSpace="normal";p.body.style.margin="0.5cm";p.querySelector(".Text").style.width="100%";p.querySelector(".Text").style.overflow="visible";p.querySelectorAll(".marker-layer-part").forEach(function(E){return E.parentNode.removeChild(E)});u=p.querySelector(".text-layer");u.style.whiteSpace=
"pre-wrap";x=Array.from(u.querySelectorAll("div"));x.forEach(function(E){E.childNodes[0]&&(Array.from(E.childNodes).forEach(function(G){return u.insertBefore(G,E)}),u.insertBefore(p.createElement("br"),E),u.removeChild(E))});l.innerWindow.print();l.getWindow().remove();z.jumpToEnd()})}},{key:"open",value:function(b){b=void 0===b?{}:b;return(new this(b)).openInWindow({title:b.title||"iframe"}).targetMorph}},{key:"properties",get:function(){return{iframe:{after:["domNode"],readOnly:!0,get:function(){return this.domNode}},
innerWindow:{after:["iframe"],readOnly:!0,get:function(){return this.iframe.contentWindow}},innerWorld:{after:["innerWindow"],readOnly:!0,get:function(){return this.innerWindow.$world}},src:{after:["domNode"],set:function(b){this.changeSrc(b,null)}},srcdoc:{after:["domNode"],set:function(b){this.changeSrc(null,b)}},domNode:{get:function(){this._domNode||(this._domNode=this.document.createElement("iframe"),this._domNode.setAttribute("style","position: absolute; width: 100%; height: 100%;"),this._domNode.setAttribute("allowfullscreen",
!0));return this._domNode},set:function(b){return this._domNode=b}}}}}],d,{pathInPackage:function(){return"iframe.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:621,end:6201})}(uv.HTMLMorph);uv.IFrameMorph=YP;uv.IFrameMorph=YP;uv.IFrameMorph=YP;var Eza=Object.freeze({__proto__:null,IFrameMorph:YP}),sf=lively.FreezerRuntime.recorderFor("lively.components/window.js");
sf.arr=Gf;sf.promise=bh;sf.pt=ui;sf.LinearGradient=Zl;sf.Color=ng;sf.Rectangle=Fe;sf.Label=Mq;sf.morph=Dk;sf.Morph=xk;sf.HorizontalLayout=xq;sf.StyleSheet=cs;sf.connect=ll;sf.signal=hm;sf.easings=No;var RZ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/window.js"),k=d.hasOwnProperty("Window")&&"function"===typeof d.Window?d.Window:d.Window=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,
a,[{key:"build",value:function(){this.submorphs=[this.buildHeader(),this.buildResizer()]}},{key:"openWindowMenu",value:function(){var b=this,e,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){return 1==G.nextAddress?(e=b.world()||b.env.world,l=b.targetMorph.world(),p=l.openMenu,u=[["Change Window Title",function(){var J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(K){if(1==K.nextAddress)return K.yield(e.prompt("Enter New Name",{input:b.title}),2);if(J=K.yieldResult)b.title=
J;K.jumpToEnd()})}],["Align and resize",[{alias:"full",target:e,command:"resize active window",args:{window:b,how:"full"}},{alias:"left",target:e,command:"resize active window",args:{window:b,how:"left"}},{alias:"center",target:e,command:"resize active window",args:{window:b,how:"center"}},{alias:"right",target:e,command:"resize active window",args:{window:b,how:"right"}},{alias:"top",target:e,command:"resize active window",args:{window:b,how:"top"}},{alias:"bottom",target:e,command:"resize active window",
args:{window:b,how:"bottom"}},{alias:"reset",target:e,command:"resize active window",args:{window:b,how:"reset"}}]],["Window Management",[{alias:"minimize all except this",target:e,command:"toggle minimize all except active window"},{alias:"close all except this",target:e,command:"close all except active window"},{isDivider:!0},{alias:"minimize all",target:e,command:"toggle minimize all windows"},{alias:"close all",target:e,command:"close all windows"}]],{isDivider:!0}],x=u.concat,z=$jscomp,E=z.arrayFromIterable,
G.yield(b.targetMorph.menuItems(),2)):G.return(p.call(l,x.call(u,E.call(z,G.yieldResult))))})}},{key:"toggleFader",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:l=e.getSubmorphNamed("fader")||e.addMorph({name:"fader",fill:sf.Color.black.withA(.5),opacity:0,extent:e.extent});if(b){p=e.world().visibleBoundsExcludingTopBar().translateForInclusion(e.bounds());e._originalBounds=e.bounds();e.animate({bounds:p,duration:300});
e.borderColor=sf.Color.gray.darker();e._faderTriggered=!0;l.opacity=1;u.jumpTo(0);break}e._originalBounds&&(e.animate({bounds:e._originalBounds,duration:300}),e._originalBounds=null);e._faderTriggered=!1;return u.yield(e.whenRendered(),3);case 3:return u.yield(sf.promise.delay(100),4);case 4:return e.borderColor=sf.Color.gray,e._faderTriggered?u.return():u.yield(l.animate({opacity:0,duration:300}),5);case 5:l.remove(),u.jumpToEnd()}})}},{key:"isWindow",get:function(){return!0}},{key:"targetMorphBounds",
value:function(){return new sf.Rectangle(0,25,this.width,this.height-25)}},{key:"relayoutWindowControls",value:function(){try{var b=this.innerBounds(),e=this.ui.windowTitle,l=this.ui.resizer,p=b.withHeight(25),u=this.ui.header,x=this.ui.windowControls.bounds().right()+3,z=p.withLeftCenter(sf.pt(x,p.height/2));l.bottomRight=b.bottomRight();!this.minimized&&this.targetMorph&&this.targetMorph.isLayoutable&&this.targetMorph.setBounds(this.targetMorphBounds());e.textBounds().width<p.width-2*x?e.center=
p.center():e.leftCenter=z.leftCenter();u.width=this.width}catch(E){}}},{key:"ensureNotOverTheTop",value:function(){var b=this,e=this.world();if(e){var l=this.globalBounds();e.withTopBarDo(function(p){l.top()<p.height&&b.moveBy(sf.pt(0,p.height-l.top()))})}}},{key:"buildHeader",value:function(){return sf.morph({name:"header",extent:sf.pt(this.width,50),submorphs:[sf.morph({name:"window controls",styleClasses:["buttonGroup"],submorphs:this.buildButtons()}),this.buildTitleLabel()]})}},{key:"buildButtons",
value:function(){var b=this.getSubmorphNamed("close")||sf.morph({name:"close",styleClasses:["windowButton","closeButton"],tooltip:"close window",submorphs:[sf.Label.icon("times",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});sf.connect(b,"onMouseDown",this,"close");var e=this.getSubmorphNamed("minimize")||sf.morph({name:"minimize",styleClasses:["windowButton","minimizeButton"],tooltip:"collapse window",submorphs:[sf.Label.icon("minus",{name:"label",styleClasses:["defaultLabelStyle",
"default"]})]});sf.connect(e,"onMouseDown",this,"minimized",{updater:function(p){p(!this.targetObj.minimized)}});if(this.resizable){var l=this.getSubmorphNamed("menu")||sf.morph({name:"menu",styleClasses:["windowButton","windowMenuButton"],tooltip:"Open Window Menu",submorphs:[sf.Label.icon("chevron-down",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});sf.connect(l,"onMouseDown",this,"openWindowMenu")}return sf.arr.compact([b,e,l])}},{key:"buildTitleLabel",value:function(){var b=sf.morph({padding:sf.Rectangle.inset(0,
2,0,0),styleClasses:["windowTitleLabel"],type:"label",name:"window title",tooltip:"double click to maximize/reset",reactsToPointer:!0,value:""});sf.connect(this,"onDoubleMouseDown",this,"toggleMaximize",{updater:"($upd, evt) => {\n        if (source.fullContainsWorldPoint(evt.position)) {\n          $upd();\n        }\n      }"});return this.addMorph(b)}},{key:"resizeBy",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"resizeBy",this).call(this,b);this.relayoutWindowControls()}},{key:"resizeAt",
value:function(b){b=$jscomp.makeIterator(b);var e=b.next().value;b=b.next().value;var l=this.bounds();switch(e){case "right":this.resizeBy(b.withY(0));break;case "bottom right":this.resizeBy(b);break;case "bottom":this.resizeBy(b.withX(0));break;case "left":e=this.right;this.resizeBy(b.withY(0).negated());this.right=e;break;case "bottom left":e=this.right;this.resizeBy(b.scaleByPt(sf.pt(-1,1)));this.right=e;break;case "top":e=l.x;var p=l.y+b.y;var u=l.width;b=l.height-b.y;this.setBounds(new sf.Rectangle(e,
p,u,b));break;case "top left":e=l.x+b.x;p=l.y+b.y;u=l.width-b.x;b=l.height-b.y;this.setBounds(new sf.Rectangle(e,p,u,b));break;case "top right":e=l.x,p=l.y+b.y,u=l.width+b.x,b=l.height-b.y,this.setBounds(new sf.Rectangle(e,p,u,b))}this.relayoutResizer()}},{key:"relayoutResizer",value:function(){var b=this.getSubmorphNamed("resizer"),e=$jscomp.makeIterator(b.submorphs),l=e.next().value,p=e.next().value,u=e.next().value,x=e.next().value,z=e.next().value,E=e.next().value,G=e.next().value;e=e.next().value;
l.height=this.height-10;l.bottomRight=this.extent.subXY(0,10);p.bottomRight=this.extent;u.height=this.height-10;u.bottomLeft=sf.pt(0,this.height-10);x.bottomLeft=sf.pt(0,this.height);z.width=this.width-20;z.bottomLeft=sf.pt(10,this.height);E.width=this.width-20;E.bottomLeft=sf.pt(10,2.5);G.topLeft=sf.pt(0,0);e.topRight=sf.pt(this.width,0);b.position=sf.pt(0,0)}},{key:"buildResizer",value:function(){var b,e,l,p,u,x,z;var E=sf.Color.transparent;var G=sf.morph({name:"resizer",fill:sf.Color.transparent,
position:sf.pt(0,0),submorphs:[b=sf.morph({name:"right resizer",fill:E,width:10,draggable:!0,nativeCursor:"ew-resize"}),e=sf.morph({name:"bottom right resizer",fill:E,extent:sf.pt(10,10),draggable:!0,nativeCursor:"nwse-resize"}),l=sf.morph({name:"left resizer",fill:E,width:10,draggable:!0,nativeCursor:"ew-resize"}),p=sf.morph({name:"bottom left resizer",draggable:!0,fill:E,extent:sf.pt(10,10),nativeCursor:"nesw-resize"}),u=sf.morph({name:"bottom resizer",draggable:!0,fill:E,height:10,nativeCursor:"ns-resize"}),
x=sf.morph({name:"top resizer",draggable:!0,fill:E,height:2.5,nativeCursor:"ns-resize"}),z=sf.morph({name:"top left resizer",draggable:!0,fill:E,extent:sf.pt(10,10),nativeCursor:"nwse-resize"}),E=sf.morph({name:"top rigth resizer",draggable:!0,fill:E,extent:sf.pt(10,10),nativeCursor:"nesw-resize"})]});sf.connect(x,"onDrag",this,"resizeAt",{converter:function(J){return["top",J.state.dragDelta]}});sf.connect(E,"onDrag",this,"resizeAt",{converter:function(J){return["top right",J.state.dragDelta]}});
sf.connect(z,"onDrag",this,"resizeAt",{converter:function(J){return["top left",J.state.dragDelta]}});sf.connect(e,"onDrag",this,"resizeAt",{converter:function(J){return["bottom right",J.state.dragDelta]}});sf.connect(b,"onDrag",this,"resizeAt",{converter:function(J){return["right",J.state.dragDelta]}});sf.connect(u,"onDrag",this,"resizeAt",{converter:function(J){return["bottom",J.state.dragDelta]}});sf.connect(l,"onDrag",this,"resizeAt",{converter:function(J){return["left",J.state.dragDelta]}});sf.connect(p,
"onDrag",this,"resizeAt",{converter:function(J){return["bottom left",J.state.dragDelta]}});this.addMorph(G);this.relayoutResizer();return G}},{key:"toggleMaximize",value:function(){this.minized||(this.maximized=!this.maximized)}},{key:"applyMaximize",value:function(){this.maximized?$world.execCommand("resize active window",{window:this,how:"full"}):$world.execCommand("resize active window",{window:this,how:"reset"})}},{key:"toggleMinimize",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b.minimized=
!b.minimized;e.jumpToEnd()})}},{key:"applyMinimize",value:function(){var b=this,e,l,p,u,x,z,E,G,J,K,T,P,da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fa){if(1==fa.nextAddress){if(!b.targetMorph)return fa.return();e=b;l=e.nonMinizedBounds;p=e.minimized;u=e.width;x=b.ui;z=x.windowTitle;E=x.resizer;G=b.bounds();J=b.getSubmorphNamed("minimize");K=sf.easings.outQuad;if(!p)return b.minimizedBounds=G,b.withMetaDo({metaInteraction:!0},function(){b.targetMorph&&(b.targetMorph.visible=!0)}),
l=b.world().visibleBoundsExcludingTopBar().translateForInclusion(l||G),b.animate({bounds:l,styleClasses:["neutral","active"].concat($jscomp.arrayFromIterable(sf.arr.without(b.styleClasses,"minimzed"))),duration:100,easing:K}),J.tooltip="collapse window",fa.jumpTo(2);b.nonMinizedBounds=G;T=(b.minimizedBounds||G).withExtent(sf.pt(u,28));P=z.textBounds();da=b.get("window controls").bounds().right()+3;P.width+2*da<T.width&&(T=T.withWidth(P.width+da+5));b.minimizedBounds=T;J.tooltip="uncollapse window";
return fa.yield(b.animate({styleClasses:["minimized","active"].concat($jscomp.arrayFromIterable(sf.arr.without(b.styleClasses,"neutral"))),bounds:T,duration:100,easing:K}),3)}2!=fa.nextAddress&&b.targetMorph&&(b.targetMorph.isComponent?b.targetMorph.top=b.height:b.targetMorph.visible=!1);z.reactsToPointer=!b.minimized;E.visible=!b.minimized;b.relayoutWindowControls();fa.jumpToEnd()})}},{key:"setBounds",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"setBounds",this).call(this,b);this.relayoutResizer();
this.relayoutWindowControls()}},{key:"setBounds",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"setBounds",this).call(this,b);this.relayoutResizer();this.relayoutWindowControls()}},{key:"close",value:function(){var b=this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return b.targetMorph&&"function"===typeof b.targetMorph.onWindowClose?u.yield(b.targetMorph.onWindowClose(),3):u.jumpTo(2);2!=u.nextAddress&&(e=u.yieldResult);if(!1===e)return u.return();
l=b.world();b.deactivate();b.remove();(p=l.activeWindow()||sf.arr.last(l.getWindows()))&&p.activate();sf.signal(b,"windowClosed",b);u.jumpToEnd()})}},{key:"onMouseUp",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onMouseUp",this).call(this,b);this.minimized||(this.ui.resizer.visible=!0)}},{key:"onMouseDown",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,b);this.activate(b);this.minimized||this.ui.resizer.submorphs.includes(b.targetMorph)||
(this.ui.resizer.visible=!1)}},{key:"onDragStart",value:function(b){var e=this;$b._get(Object.getPrototypeOf(k.prototype),"onDragStart",this).call(this,b);this.targetMorph&&(b.state.origReactsToPointer=this.targetMorph.reactsToPointer,this.withMetaDo({metaInteraction:!0},function(){e.targetMorph.reactsToPointer=!1}))}},{key:"onDragEnd",value:function(b){var e=this;$b._get(Object.getPrototypeOf(k.prototype),"onDragEnd",this).call(this,b);this.targetMorph&&this.withMetaDo({metaInteraction:!0},function(){e.targetMorph.reactsToPointer=
b.state.origReactsToPointer});this.minimized||(this.ui.resizer.visible=!0)}},{key:"onDrag",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onDrag",this).call(this,b);this.ensureNotOverTheTop()}},{key:"focus",value:function(){var b=this.world(),e=this.targetMorph;b&&e&&(!b.focusedMorph||b.focusedMorph!==e&&!e.isAncestorOf(b.focusedMorph))&&e.focus()}},{key:"isActive",value:function(){var b=this.world();return b&&"bold"==this.ui.windowTitle.fontWeight?sf.arr.last(b.getWindows())===this:
!1}},{key:"activate",value:function(b){var e=this;if(this.isActive())return this.bringToFront(),this.focus(b),this.renderOnGPU=!0,this.relayoutWindowControls(),this;this.master.whenApplied().then(function(){e.master={auto:"styleguide://System/window/light/active"}});this.world()?this.bringToFront():this.openInWorldNearHand();var l=this.world()||this.env.world;sf.arr.without(l.getWindows(),this).forEach(function(p){return p.deactivate()});this.focus(b);sf.signal(this,"windowActivated",this);Promise.resolve(this.master.applyIfNeeded(!0)).then(function(){return e.relayoutWindowControls()});
return this}},{key:"deactivate",value:function(){var b=this;this.master&&"styleguide://System/window/light/inactive"==this.master.auto||(this.master.whenApplied().then(function(){b.master={auto:"styleguide://System/window/light/inactive"}}),this.relayoutWindowControls(),this.renderOnGPU=!1)}},{key:"keybindings",get:function(){return $b._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Shift-L R E N",win:"Ctrl-Shift-L R E N"},command:"[window] change title"}])}},
{key:"commands",get:function(){return $b._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"[window] change title",exec:function(b,e){e=void 0===e?{}:e;var l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return(l=e.title)?u.jumpTo(2):u.yield(b.world().prompt("Enter new title",{input:b.title,historyId:"lively.morphic-window-title-hist"}),3);2!=u.nextAddress&&(l=u.yieldResult);if(p=l)b.title=p;return u.return(!0)})}}])}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Window"}},{key:"properties",get:function(){return{submorphs:{initialize:function(){this.build()}},position:{set:function(b){this.setProperty("position",b.roundTo(1))}},ui:{derived:!0,get:function(){return{header:this.get("header"),resizer:this.get("resizer"),windowControls:this.get("window controls"),windowTitle:this.get("window title")}}},master:{initialize:function(){this.master={auto:"styleguide://System/window/light/active"}}},styleClasses:{defaultValue:["active"]},clipMode:{defaultValue:"hidden"},
resizable:{defaultValue:!0},title:{after:["submorphs"],derived:!0,get:function(){return this.ui.windowTitle.textString},set:function(b){var e=this,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress){l="string"===typeof b?[b,{}]:b;p=[];for(u=0;u<l.length;u+=2)x=l[u],z=l[u+1],x=x.replace(/\n/g,""),E=x.length+0-100,0<E&&(x=x.slice(0,-E)),p.push(x,z||{});e.ui.windowTitle.value=p;return G.yield(e.whenRendered(),2)}e.ui.windowTitle.reactsToPointer=!1;e.relayoutWindowControls();
G.jumpToEnd()})}},targetMorph:{after:["submorphs"],derived:!0,get:function(){return sf.arr.withoutAll(this.submorphs,[this.get("header"),this.get("resizer")])[0]},set:function(b){var e=[this.get("header"),this.get("resizer")];sf.arr.withoutAll(this.submorphs,e).forEach(function(l){return l.remove()});b&&this.addMorph(b,this.resizable?this.get("resizer"):!1);this.relayoutWindowControls()}},minimizedBounds:{serialize:!1},nonMinizedBounds:{},nonMaximizedBounds:{},minimized:{set:function(b){this.setProperty("minimized",
b);this.applyMinimize()}},maximized:{set:function(b){this.setProperty("maximized",b);this.applyMaximize()}}}}}],d,{pathInPackage:function(){return"window.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:343,end:21133})}(sf.Morph);RZ=sf.Window;var SZ=Ma("as",RZ);sf.default=RZ;var Re=lively.FreezerRuntime.recorderFor("lively.components/prompts.js");
Re.Rectangle=Fe;Re.rect=Ll;Re.Color=ng;Re.pt=ui;Re.morph=Dk;Re.VerticalLayout=Gu;Re.Morph=xk;Re.StyleSheet=cs;Re.Text=Lq;Re.GridLayout=Hu;Re.Icon=Fn;Re.HorizontalLayout=xq;Re.InputLine=JF;Re.PasswordInputLine=cv;Re.arr=Gf;Re.obj=eg;Re.promise=bh;Re.connect=ll;Re.List=YB;Re.FilterableList=CG;Re.RadioButtonGroup=BG;Re.RadioButton=AG;var ZP=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("AbstractPrompt")&&"function"===typeof d.AbstractPrompt?d.AbstractPrompt:
d.AbstractPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;$b._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Re.obj.dissoc(b,["label","commands","keybindings"]));this.build(b);b.commands&&this.addCommands(b.commands);b.keybindings&&this.addKeyBindings(b.keybindings)}},
{key:"isPrompt",get:function(){return!0}},{key:"resolve",value:function(b){return this.answer.resolve(b)}},{key:"reject",value:function(b){return this.answer.resolve(b)}},{key:"activate",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b.focus();b.answer=Re.promise.deferred();b._isActive=!0;Re.promise.finally(b.answer.promise,function(){return b._isActive=!1});b.autoRemove&&Re.promise.finally(b.answer.promise,function(){return b.fadeOut(200)});return e.return(b.answer.promise)})}},
{key:"isActive",value:function(){return!!this.world()&&this._isActive}},{key:"build",value:function(){throw Error("Not yet implemented");}},{key:"applyLayout",value:function(){throw Error("Not yet implemented");}},{key:"keybindings",get:function(){return $b._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:"Enter",command:"resolve"},{keys:"Escape",command:"reject"},{keys:{mac:"Meta-."},command:"reject"}])}},{key:"commands",get:function(){var b=this;return $b._get(Object.getPrototypeOf(k.prototype),
"commands",this).concat([{name:"resolve",exec:function(e,l){b.resolve(l);return!0}},{name:"reject",exec:function(e,l){b.reject(l);return!0}}])}},{key:"transitionTo",value:function(b,e){e=void 0===e?300:e;var l=this,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){p=Re.morph({fill:l.fill,borderRadius:l.borderRadius});u=Re.morph({fill:null,origin:Re.pt(5,5)});b.opacity=0;b.fill=Re.Color.transparent;b.openInWorld();l.fill=Re.Color.transparent;$world.addMorph(p,l);p.setBounds(l.bounds());
u.openInWorld();u.addMorph(b);b.center=u.origin;u.center=p.center=l.center;u.scale=b.width/l.width;p.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return l.animate({scale:l.width/b.width,opacity:0,duration:e}),b.animate({opacity:1,duration:e}),u.animate({scale:1,duration:e}),z.yield(p.animate({bounds:u.bounds(),duration:e}),2);b.fill=p.fill;$world.addMorph(b);p.remove();l.remove();u.remove();z.jumpToEnd()})});x.jumpToEnd()})}},{key:"addNamed",
value:function(b,e){var l=this.getSubmorphNamed(b)||this.addMorph(e.isMorph?e:Re.morph(Object.assign({},e,{name:b})));e.label&&(l.label=e.label);e.isMorph&&(l.name=b);return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AbstractPrompt"}},{key:"properties",get:function(){return{fill:{defaultValue:Re.Color.black.withA(.6)},extent:{defaultValue:Re.pt(300,80)},borderRadius:{defaultValue:5},dropShadow:{initialize:function(){this.dopShadow=!0}},clipMode:{defaultValue:"hidden"},_isActive:{defaultValue:!1},
autoRemove:{defaultValue:!0},epiMorph:{defaultValue:!0},answer:{defaultValue:null,derived:!0},label:{derived:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("promptTitle").value},set:function(b){this.getSubmorphNamed("promptTitle").value=b}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:446,end:3935})}(Re.Morph);Re.AbstractPrompt=ZP;Re.AbstractPrompt=ZP;Re.AbstractPrompt=ZP;var $P=Ma("ak",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("InformPrompt")&&"function"===typeof d.InformPrompt?d.InformPrompt:d.InformPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"build",value:function(b){var e=this,l=
b=void 0===b?{}:b,p=l.label,u=this.addNamed("promptTitle",{type:"text",lineWrapping:l.lineWrapping});l=this.addNamed("ok button",{type:"button",label:"OK",width:100});this.addNamed("button wrapper",{submorphs:[l]});u.textString=p;Re.connect(l,"fire",this,"resolve");b.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){if(u.document){var x=e.center;e.width=Math.max(e.width,u.document.width+100);e.align(e.center,x)}e.opacity=1}))}},{key:"keybindings",get:function(){return $b._get(Object.getPrototypeOf(k.prototype),
"keybindings",this).concat([{keys:"Escape",command:"resolve"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InformPrompt"}},{key:"example",value:function(){$world.inform("Computer says no.")}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/inform"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3944,end:5259})}(Re.AbstractPrompt));Re.InformPrompt=$P;Re.InformPrompt=$P;Re.InformPrompt=$P;var aQ=Ma("al",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("ConfirmPrompt")&&"function"===typeof d.ConfirmPrompt?d.ConfirmPrompt:d.ConfirmPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"build",value:function(b){var e=this,l=this.addNamed("promptTitle",{type:"text"});l.value=b.label;b=this.addNamed("ok button",{type:"button",label:this.confirmLabel});var p=this.addNamed("cancel button",{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",{submorphs:[b,p]});Re.connect(b,"fire",this,"resolve");Re.connect(p,"fire",this,"reject");l.lineWrapping=this.lineWrapping;this.lineWrapping||
(this.opacity=0,this.whenRendered().then(function(){l.lineWrapping=e.lineWrapping;var u=e.center;e.width=Math.max(e.width,l.document.width+100);e.center=u;e.opacity=1}))}},{key:"resolve",value:function(){$b._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,!0)}},{key:"reject",value:function(){$b._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConfirmPrompt"}},{key:"example",value:function(){$world.confirm("Isn't this a nice prompt.")}},
{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/confirm"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5306,
end:6757})}(Re.AbstractPrompt));Re.ConfirmPrompt=aQ;Re.ConfirmPrompt=aQ;Re.ConfirmPrompt=aQ;var bQ=Ma("am",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("MultipleChoicePrompt")&&"function"===typeof d.MultipleChoicePrompt?d.MultipleChoicePrompt:d.MultipleChoicePrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"resolve",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),
"resolve",this).call(this,b||this.getSubmorphNamed("choices").value)}},{key:"build",value:function(b){var e=b=void 0===b?{choices:["No choice"]}:b;b=e.label;var l=e.choices;e=this.addNamed("ok button",{type:"button"});var p=this.addNamed("cancel button",{type:"button"});b&&(this.addNamed("promptTitle",{type:"text"}).value=b);var u=this.addNamed("choices",{name:"choices",type:Re.RadioButtonGroup});this.addNamed("button wrapper",{submorphs:[e,p]});e&&Re.connect(e,"fire",this,"resolve");p&&Re.connect(p,
"fire",this,"reject");this.whenRendered().then(function(){u.choices=l})}},{key:"onKeyDown",value:function(b){if(/^[0-9]$/.test(b.keyCombo)){var e=this.getSubmorphNamed("button "+(Number(b.keyCombo)-1));if(e)return e.trigger(),b.stop()}return $b._get(Object.getPrototypeOf(k.prototype),"onKeyDown",this).call(this,b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultipleChoicePrompt"}},{key:"example",value:function(){$world.multipleChoicePrompt("Choose wisely:",{choices:[1,2,3]})}},
{key:"properties",get:function(){return{title:{derived:!0,after:["submorphs"],set:function(b){this.getSubmorphNamed("title").value=b}},choices:{after:["submorphs"],derived:!0,set:function(b){var e;if(e=this.getSubmorphNamed("choices"))e.choices=b}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/multiple choice"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:6846,end:8787})}(Re.AbstractPrompt));Re.MultipleChoicePrompt=bQ;Re.MultipleChoicePrompt=bQ;Re.MultipleChoicePrompt=bQ;var cQ=Ma("an",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("TextPrompt")&&"function"===typeof d.TextPrompt?d.TextPrompt:d.TextPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $b(k,a,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"resolve",value:function(){var b=this.getSubmorphNamed("input");this.validate(b.input)?$b._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,b.acceptInput()):b.indicateError(this.errorMessage)}},{key:"build",value:function(b){var e=this,l=b.label,p=b.input,u=b.historyId,x=b.useLastInput;b=b.selectInput;var z=this.addNamed("promptTitle",{type:"text"});z.value=l;l=this.addNamed("input",
Re.Text.makeInputLine({historyId:u,highlightWhenFocused:!1}));l.viewState.fastScroll=!1;l.textString=p||"";u&&x&&(p=Re.arr.last(l.inputHistory.items))&&(l.textString=p);this.lineWrapping||(this.width=Math.max(this.width,z.textBounds().width+50));p=this.addNamed("ok button",{type:"button",label:this.confirmLabel});u=this.addNamed("cancel button",{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",{submorphs:[p,u]});Re.connect(p,"fire",this,"resolve");Re.connect(u,"fire",this,"reject");
z.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){var E=e.center;e.width=Math.max(350,z.document.width+100);e.opacity=1;e.center=E}));l.gotoDocumentEnd();l.scrollCursorIntoView();b&&l.selectAll()}},{key:"initLayout",value:function(){var b=this;if(!this.layout){var e=this.getSubmorphNamed("promptTitle"),l=this.getSubmorphNamed("input");e.fit();this.whenRendered().then(function(){var p=Math.max(l.textBounds().width,e.textBounds().width)+20;b.width=
Math.min(b.maxWidth,p);b.opacity=1});this.layout=new Re.GridLayout({columns:[0,{paddingLeft:5},1,{paddingLeft:5,paddingRight:2.5,fixed:100},2,{paddingRight:5,paddingLeft:2.5,fixed:100},3,{paddingRight:5}],rows:[0,{fixed:e.textBounds().height+5,paddingBottom:5},1,{fixed:l.height},2,{fixed:35,paddingTop:5,paddingBottom:5}],grid:[["promptTitle","promptTitle","promptTitle","promptTitle"],["input","input","input","input"],[null,"ok button","cancel button",null]]})}}},{key:"focus",value:function(){this.getSubmorphNamed("input").focus()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield($world.prompt("enter",{input:"a little longer text"}),2):b.yield($world.prompt("enter\nsomething",{input:"???"}),0)})}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},errorMessage:{defaultValue:"Invalid Input"},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},
validate:{serialize:!1,initialize:function(){this.validate=function(){return!0}}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/text"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8796,end:12404})}(Re.AbstractPrompt));Re.TextPrompt=cQ;
Re.TextPrompt=cQ;Re.TextPrompt=cQ;var dQ=Ma("ao",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("EditPrompt")&&"function"===typeof d.EditPrompt?d.EditPrompt:d.EditPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"build",value:function(b){var e=b.input,l=b.mode,
p=b.textStyle,u=b.evalEnvironment,x=void 0===b.resolveTextAttributes?!1:b.resolveTextAttributes;this.addNamed("promptTitle",{type:"text",value:b.label});this.resolveTextAttributes=x;p||(p={});l&&!p.fontFamily&&(p.fontFamily="Monaco, monospace");var z=this.addNamed("editor",{type:"text"});z.value=e||"";Object.assign(z,p);z.changeEditorMode(l).then(function(){u&&z.editorPlugin&&Object.assign(z.editorPlugin.evalEnvironment,u)});b=z.textBounds().width+50;b>this.width-25&&(this.width=Math.min(this.maxWidth,
b+125));b=this.addNamed("ok button",{type:"button"});e=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[b,e]});Re.connect(b,"fire",this,"resolve");Re.connect(e,"fire",this,"reject");z.gotoDocumentEnd();z.scrollCursorIntoView()}},{key:"resolve",value:function(b){if(this.resolveTextAttributes)return $b._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,this.getSubmorphNamed("editor").textAndAttributes);var e=this.getSubmorphNamed("editor").textString.trim();
if(this.historyId){b=Re.InputLine.getHistory(this.historyId);b.items=b.items.filter(function(l){return l!==e});for(b.items.push(e);b.items.length>b.items.max;)b.items.shift();b.index=b.items.length;Re.InputLine.setHistory(this.historyId,b)}return $b._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,e)}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-Enter|Meta-S",win:"Ctrl-Enter|Ctrl-S"},command:"resolve"},{keys:"Escape",command:"reject"},{keys:"Alt-P|Alt-Up",command:"history back"},
{keys:"Alt-N|Alt-Down",command:"history forward"},{keys:"Alt-H",command:"browse history"}]}},{key:"commands",get:function(){var b=this;return $b._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"history back",exec:function(e,l){if(b.historyId){e=Re.InputLine.getHistory(b.historyId);l=e.items;var p=e.index;e.index=--p;0>p&&(e.index=p=l.length-1);b.get("editor").undoManager.group();b.get("editor").textString=l[p];b.get("editor").undoManager.group()}return!0}},{name:"browse history",
exec:function(e,l){var p,u,x,z,E,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress){if(!b.historyId)return J.jumpTo(2);p=Re.InputLine.getHistory(b.historyId);return J.yield(b.world().editListPrompt("input history "+b.historyId,p.items,{requester:b}),3)}2!=J.nextAddress&&(u=J.yieldResult,x=u.status,z=u.list,E=$jscomp.makeIterator(u.selections),G=E.next().value,"canceled"!==x&&(p.items=z,Re.InputLine.setHistory(b.historyId,p),G&&(p.index=p.items.indexOf(G),b.get("editor").textString=
G)));return J.return(!0)})}},{name:"history forward",exec:function(e,l){if(b.historyId){e=Re.InputLine.getHistory(b.historyId);l=e.items;var p=e.index;e.index=++p;p>=l.length&&(e.index=p=0);b.get("editor").undoManager.group();b.get("editor").textString=l[p];b.get("editor").undoManager.group()}return!0}}])}},{key:"focus",value:function(){this.getSubmorphNamed("editor").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditPrompt"}},{key:"example",value:function(){var b=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield($world.editPrompt("enter",{input:"$world.show()",mode:"js",evalEnvironment:{context:23}}),2);b.editorPlugin.evalEnvironment;e.jumpToEnd()})}},{key:"properties",get:function(){return{extent:{defaultValue:Re.pt(500,300)},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:12413,end:17125})}(Re.AbstractPrompt));Re.EditPrompt=dQ;Re.EditPrompt=dQ;Re.EditPrompt=dQ;var eQ=Ma("ap",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("PasswordPrompt")&&"function"===typeof d.PasswordPrompt?d.PasswordPrompt:d.PasswordPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"build",value:function(b){var e=b.placeholder;this.addNamed("promptTitle",{type:"text",value:b.label,fixedHeight:!0});this.addNamed("input",{type:Re.PasswordInputLine,fontSize:22,padding:Re.rect(5,5,0,0),name:"input",placeholder:e||""});b=this.addNamed("ok button",{type:"button",label:"OK"});e=this.addNamed("cancel button",{type:"button",label:"CANCEL"});Re.connect(b,"fire",this,"resolve");Re.connect(e,"fire",
this,"reject");this.addNamed("button wrapper",{submorphs:[b,e]})}},{key:"resolve",value:function(){$b._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,this.get("input").acceptInput())}},{key:"focus",value:function(){var b=this.get("input");b.whenRendered().then(function(){return b.focus()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.yield($world.passwordPrompt("Enter your secret password:"),
0)})}},{key:"properties",get:function(){return{maxWidth:{readOnly:!0,get:function(){return 800}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/password"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17134,end:18532})}(Re.AbstractPrompt));
Re.PasswordPrompt=eQ;Re.PasswordPrompt=eQ;Re.PasswordPrompt=eQ;var fQ=Ma("aq",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("ListPrompt")&&"function"===typeof d.ListPrompt?d.ListPrompt:d.ListPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"onChange",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,
b);"extent"==b.prop&&this.layout&&!this.layout.active&&(b=b.value.subPt(b.prevValue),this.getSubmorphNamed("prompt list").height+=b.y)}},{key:"getMaster",value:function(){return this.filterable?"styleguide://SystemPrompts/prompts/list":"styleguide://SystemPrompts/prompts/edit list"}},{key:"reset",value:function(){this.items=[]}},{key:"build",value:function(b){var e=b.label,l=b.filterable,p=b.multiSelect,u=b.historyId,x=b.useLastInput,z=b.fuzzy,E=b.filterFunction,G=b.sortFunction,J=b.actions,K=b.selectedAction,
T=b.items,P=b.onSelection,da=b.onFilter;this.extent=b.extent||Re.pt(500,400);this.addNamed("promptTitle",{type:"text"}).value=e;var fa=this.addNamed("prompt list",{type:l?Re.FilterableList:Re.List,multiSelect:p,historyId:u,useLastInput:x});l?this.get("list").master=!1:this.get("prompt list").master=!1;fa.items=T;l&&z&&(fa.fuzzy=z);l&&"function"===typeof E&&(fa.filterFunction=E);l&&"function"===typeof G&&(fa.sortFunction=G);P&&"function"===typeof P&&(this.onSelection=P);l&&J&&(fa.actions=J);l&&K&&
(fa.selectedAction=K);b=this.addNamed("ok button",{type:"button"});e=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[b,e]});Re.connect(b,"fire",this,"resolve");Re.connect(e,"fire",this,"reject");l&&(Re.connect(fa,"accepted",this,"resolve"),Re.connect(fa,"canceled",this,"reject"),da&&Re.connect(fa,"updateFilter",function(){return da(fa)}),fa.whenRendered().then(function(){return fa.relayout()}))}},{key:"resolve",value:function(b){var e=this.getSubmorphNamed("prompt list");
b=b||e instanceof Re.FilterableList?e.acceptInput():{selected:e.selections,status:"accepted",actions:"default"};return this.answer.resolve(b)}},{key:"reject",value:function(){return this.answer.resolve({prompt:this,selected:[],filtered:[],status:"canceled"})}},{key:"focus",value:function(){this.getSubmorphNamed("prompt list").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.yield($world.listPrompt("hello",
[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{items:{derived:!0,after:["submorphs"],set:function(b){0<this.submorphs.length&&(this.getSubmorphNamed("prompt list").items=b||[])}},filterable:{},master:{after:["filterable"],initialize:function(){this.master={auto:this.getMaster()}}},preselect:{derived:!0,after:["items"],set:function(b){var e=this.getSubmorphNamed("prompt list");e&&(e.selectedIndex=b,e.scrollSelectionIntoView)}},onSelection:{derived:!0,after:["preselect",
"submorphs"],set:function(b){var e=this,l=this.getSubmorphNamed("prompt list");l&&Re.connect(l,"selection",function(p){return b(p,e)})}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:18630,end:22839})}(Re.AbstractPrompt));Re.ListPrompt=fQ;Re.ListPrompt=fQ;Re.ListPrompt=fQ;var gQ=
Ma("ar",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("EditListPrompt")&&"function"===typeof d.EditListPrompt?d.EditListPrompt:d.EditListPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"build",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"build",this).call(this,b);this.getSubmorphNamed("prompt list").items=b.items;b=this.addNamed("add item button",
{type:"button",label:Re.Icon.makeLabel("plus")});var e=this.addNamed("remove item button",{type:"button",label:Re.Icon.makeLabel("minus")});this.getSubmorphNamed("button wrapper").addMorph(b);this.getSubmorphNamed("button wrapper").addMorph(e);Re.connect(b,"fire",this,"addItemToList");Re.connect(e,"fire",this,"removeSelectedItemsFromList")}},{key:"removeSelectedItemsFromList",value:function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){e=b.get("prompt list");l=1!=
e.selectedItems.length?-1:0===e.selectedIndex?0:e.selectedIndex-1;e.items=Re.arr.withoutAll(e.items,e.selectedItems);0>l?e.selection=null:e.selectedIndex=l;e.focus();p.jumpToEnd()})}},{key:"addItemToList",value:function(){var b=this,e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return e=b.get("prompt list"),l=e.selection?e.items[e.selectedIndex].string:"",x.yield(b.world().prompt("Input to add to the list",{historyId:b.historyId||"EditListPrompt-input-history",
input:l}),2);p=x.yieldResult;if(!p)return x.return();e=b.get("list");u=e.selection?e.selectedIndex+1:e.items.length;e.addItemAt(p,u);e.focus();e.selectedIndex=u;x.jumpToEnd()})}},{key:"keybindings",get:function(){return $b._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Enter",win:"Ctrl-Enter"},command:"resolve"},{keys:"Ctrl-G",command:"deselect"},{keys:"Shift-=|+",command:"add item to list"},{keys:"Delete|-|Backspace",command:"remove item from list"}])}},{key:"commands",
get:function(){var b=this;return $b._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"deselect",exec:function(){b.get("list").selection=null;return!0}},{name:"add item to list",exec:function(){b.addItemToList();return!0}},{name:"remove item from list",exec:function(){b.removeSelectedItemsFromList();return!0}}])}},{key:"resolve",value:function(){var b=this.get("prompt list");return this.answer.resolve({list:b.values,selections:b.selections})}},{key:"reject",value:function(){return this.answer.resolve({list:[],
selections:[],status:"canceled"})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.yield($world.editListPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit list"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:22848,end:25736})}(Re.ListPrompt));Re.EditListPrompt=gQ;Re.EditListPrompt=gQ;Re.EditListPrompt=gQ;var TZ=Object.freeze({__proto__:null,AbstractPrompt:ZP,InformPrompt:$P,ConfirmPrompt:aQ,MultipleChoicePrompt:bQ,TextPrompt:cQ,EditPrompt:dQ,PasswordPrompt:eQ,ListPrompt:fQ,EditListPrompt:gQ}),td=lively.FreezerRuntime.recorderFor("lively.components/widgets.js");
td.obj=eg;td.PropertyPath=Qh;td.string=Dh;td.num=zl;td.arr=Gf;td.properties=go;td.pt=ui;td.Color=ng;td.Rectangle=Fe;td.rect=Ll;td.signal=hm;td.connect=ll;td.disconnect=cr;td.Morph=xk;td.ShadowObject=Gp;td.morph=Dk;td.Text=Lq;td.GridLayout=Hu;td.HorizontalLayout=xq;td.Path=$x;td.Ellipse=Zx;td.Label=Mq;td.Tooltip=ay;td.Icon=Fn;td.kld=Db;var zfa=td.kld;td.Shapes=zfa.Shapes;td.Intersection=zfa.Intersection;(function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("LeashEndpoint")&&
"function"===typeof d.LeashEndpoint?d.LeashEndpoint:d.LeashEndpoint=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"dragTriggerDistance",get:function(){return this.connectedMorph?20:0}},{key:"onDragStart",value:function(b){var e=b.state;b.state.dragDelta=e.lastDragPosition.subPt(e.clickedOnPosition);b.state.endpoint=this;this.leash.onEndpointDrag(b)}},{key:"canConnectTo",value:function(b){return!b.isWorld&&
!b.isHaloItem&&this.leash.canConnectTo(b)&&!b.isHighlighter&&!b.ownerChain().some(function(e){return e.isHaloItem})}},{key:"onDrag",value:function(b){var e=this;if(this.connectedMorph)this.clearConnection();else{var l=b.hand.findDropTarget(b.hand.globalPosition,[this.leash,this.leash.endPoint,this.leash.startPoint],function(p){return e.canConnectTo(p)});this.possibleTarget!=l&&this.highlighter&&this.highlighter.deactivate();if(this.possibleTarget=l)this.closestSide=this.possibleTarget.globalBounds().partNameNearest(td.obj.keys(td.Leash.connectionPoints),
this.globalPosition),this.highlighter=$world.highlightMorph($world,this.possibleTarget,!1,[this.closestSide]),this.highlighter.show(),this.highlighter.get("name tag").value=this.leash.getLabelFor(this.possibleTarget)}b.state.endpoint=this;this.leash.onEndpointDrag(b)}},{key:"onDragEnd",value:function(){$world.removeHighlighters();this.possibleTarget&&this.closestSide&&this.attachTo(this.possibleTarget,this.closestSide)}},{key:"getConnectionPoint",value:function(){var b=this.connectedMorph,e=b.isPath,
l=b.isPolygon,p=b.vertices,u=b.origin;b=this.connectedMorph.globalBounds();if((e||l)&&"center"!=this.attachedSide){e=p.map(function(z){return td.pt(z.x,z.y).addPt(u)});l=td.Rectangle.unionPts(e);var x=l[this.attachedSide]();l=l.center().addPt(l.center().subPt(x));l=td.Shapes.line(x.x,x.y,l.x,l.y);e=td.Shapes.polyline(td.arr.flatten(e.map(function(z){return[z.x,z.y]})));e=td.arr.min(td.Intersection.intersect(e,l).points,function(z){return td.pt(z.x,z.y).dist(x)});return td.pt(e.x,e.y).addPt(b.topLeft())}return b[this.attachedSide]()}},
{key:"update",value:function(b){b&&!["position","extent","rotation","scale"].includes(b.prop)&&b.target!=this.connectedMorph||!this.connectedMorph||(b=this.getConnectionPoint(),b=this.leash.localize(b),this.vertex.position=b,this.relayout())}},{key:"clearConnection",value:function(){this.connectedMorph&&(td.disconnect(this.connectedMorph,"onChange",this,"update"),this.connectedMorph=null)}},{key:"relayout",value:function(b){var e=this.vertex.position,l=e.x;e=e.y;var p=this.leash.borderWidth;b&&b.meta&&
b.meta.animation?this.animate({center:td.pt(l+p,e+p),duration:b.duration}):this.center=td.pt(l+p,e+p)}},{key:"attachTo",value:function(b,e){this.clearConnection();this.leash.world()||this.leash.openInWorld(b.globalPosition);this.connectedMorph=b;this.attachedSide=e;this.vertex.controlPoints=this.leash.controlPointsFor(e,this);this.update();td.connect(this.connectedMorph,"onChange",this,"update")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LeashEndpoint"}},{key:"properties",get:function(){return{index:{},
leash:{},nativeCursor:{defaultValue:"-webkit-grab"},attachedSide:{},connectedMorph:{},draggable:{defaultValue:!0},vertex:{after:["leash"],get:function(){return this.leash.vertices[this.index]},set:function(b){this.leash.vertices[this.index]=b;this.leash.vertices=this.leash.vertices}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:444,end:4597})})(td.Ellipse);var hQ=Ma("bI",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("Leash")&&"function"===typeof d.Leash?d.Leash:d.Leash=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"onMouseDown",value:function(b){this.updateEndpointStyles()}},{key:"updateEndpointStyles",value:function(){Object.assign(this.startPoint,
this.getEndpointStyle(0));Object.assign(this.endPoint,this.getEndpointStyle(1));this.relayout()}},{key:"remove",value:function(){$b._get(Object.getPrototypeOf(k.prototype),"remove",this).call(this);this.startPoint.clearConnection();this.endPoint.clearConnection()}},{key:"onEndpointDrag",value:function(b){b.state.endpoint.vertex.position=b.state.endpoint.vertex.position.addPt(b.state.dragDelta);this.relayout()}},{key:"getEndpointStyle",value:function(b){return Object.assign({},this.endpointStyle,{},
0==b?this.endpointStyle.start:this.endpointStyle.end)}},{key:"endpoint",value:function(b){var e=this.vertices[b];return new td.LeashEndpoint({index:b,leash:this,position:td.pt(e.x,e.y)})}},{key:"controlPointsFor",value:function(b,e){b=td.Leash.connectionPoints[b];b=e==this.startPoint?b.negated():b;return{previous:b.scaleBy(100),next:b.negated().scaleBy(100)}}},{key:"relayout",value:function(b){if(!b||["vertices","position"].includes(b.prop))this.startPoint.relayout(b),this.endPoint.relayout(b)}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Leash"}},{key:"connectionPoints",get:function(){return{topCenter:td.pt(0,-1),topLeft:td.pt(-1,-1),rightCenter:td.pt(1,0),bottomRight:td.pt(1,1),bottomCenter:td.pt(0,1),bottomLeft:td.pt(-1,1),leftCenter:td.pt(-1,0),topRight:td.pt(1,-1),center:td.pt(0,0)}}},{key:"properties",get:function(){return{start:{defaultValue:td.pt(0,0)},end:{defaultValue:td.pt(0,0)},canConnectTo:{defaultValue:function(b){return!0}},getLabelFor:{defaultValue:function(b){return b.name}},
reactsToPointer:{defaultValue:!1},acceptsDroppedMorphs:{defaultValue:!1},direction:{type:"Enum",values:["unidirectional","outward","inward"],defaultValue:"unidirectional"},endpointStyle:{isStyleProp:!0,defaultValue:{fill:td.Color.black,origin:td.pt(3.5,3.5),extent:td.pt(10,10),nativeCursor:"-webkit-grab"}},borderWidth:{defaultValue:2},borderColor:{defaultValue:td.Color.black},fill:{defaultValue:td.Color.transparent},vertices:{after:["start","end","borderWidth"],initialize:function(){this.vertices=
[this.start,this.end]}},submorphs:{initialize:function(){this.submorphs=[this.startPoint=this.endpoint(0),this.endPoint=this.endpoint(1)];td.connect(this,"onChange",this,"relayout");this.updateEndpointStyles()}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:4606,end:7493})}(td.Path));
td.Leash=hQ;td.Leash=hQ;td.Leash=hQ;var iQ=Ma("br",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("Slider")&&"function"===typeof d.Slider?d.Slider:d.Slider=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"normalize",value:function(b){return Math.abs(b/(this.max-this.min))}},{key:"update",value:function(b){b=void 0===b?this.value:b;b=(this.width-
15)*this.normalize(b);this.getSubmorphNamed("slideHandle").center=td.pt(b+7.5,10)}},{key:"onSlide",value:function(b,e){b=td.num.roundTo(this.value+e.x/this.width,.01);this.value=b=Math.max(this.min,Math.min(this.max,b));this.update(b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Slider"}},{key:"properties",get:function(){return{value:{},min:{},max:{},height:{defaultValue:20},fill:{defaultValue:td.Color.transparent},draggable:{defaultValue:!1},submorphs:{after:["value","max","min"],
initialize:function(){var b=new td.SliderHandle({slider:this,name:"slideHandle"});this.submorphs=[new td.Path({borderColor:td.Color.gray.darker(),borderWidth:2,vertices:[td.pt(0,0),td.pt(this.width,0)],position:td.pt(0,this.height/2)}),b];td.connect(this,"extent",this,"update");this.update()}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:7502,end:8800})}(td.Morph));td.Slider=iQ;td.Slider=iQ;td.Slider=iQ;(function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("SliderHandle")&&"function"===typeof d.SliderHandle?d.SliderHandle:d.SliderHandle=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"onDragStart",value:function(b){this.valueView=(new td.Tooltip({description:""})).openInWorld(b.hand.position.addXY(10,
10))}},{key:"onDrag",value:function(b){this.slider.onSlide(this,b.state.dragDelta);this.valueView.description=this.slider.value;this.valueView.position=b.hand.position.addXY(10,10)}},{key:"onDragEnd",value:function(b){this.valueView.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SliderHandle"}},{key:"properties",get:function(){return{slider:{},fill:{defaultValue:td.Color.gray},borderColor:{defaultValue:td.Color.gray.darker()},borderWidth:{defaultValue:1},dropShadow:{defaultValue:new td.ShadowObject({blur:5})},
extent:{defaultValue:td.pt(15,15)},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8802,end:9638})})(td.Ellipse);var jQ=Ma("aE",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),
k=d.hasOwnProperty("ValueScrubber")&&"function"===typeof d.ValueScrubber?d.ValueScrubber:d.ValueScrubber=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"relayout",value:function(){this.scaleToBounds&&(this.scale=Math.min(1,this.width/(this.textBounds().width+0)))}},{key:"onKeyDown",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onKeyDown",this).call(this,b);if("Enter"==b.keyCombo){var e=
$jscomp.makeIterator(this.textString.replace("\n","").split(" ")),l=e.next().value;e.next();"string"===typeof l&&(this.value=parseFloat(l),this.scrub(this.scrubbedValue));b.stop()}}},{key:"scrub",value:function(b){this.field.update(b)}},{key:"onDragStart",value:function(b){this.execCommand("toggle active mark");this.initPos=b.position;this.factorLabel=(new td.Tooltip({description:"1x"})).openInWorld(b.hand.position.addXY(10,10));b.hand.extent=td.pt(30,30);b.hand.nativeCursor="ew-resize";b.hand.fill=
td.Color.transparent;b.hand.reactsToPointer=!0}},{key:"getScaleAndOffset",value:function(b){var e=b.position.subPt(this.initPos);b=e.x;e=td.num.roundTo(Math.exp(-e.y/$world.height*4),.01)*this.baseFactor;return{offset:b,scale:e}}},{key:"onDrag",value:function(b){var e=this.getScaleAndOffset(b),l=e.scale;e=this.getCurrentValue(e.offset,l);this.scrub(e);e=this.floatingPoint?e.toFixed(3):td.obj.safeToString(e);this.unit&&(e+=" "+this.unit);this.replace(this.documentRange,e,!1,this.scaleToBounds,!1,!1);
this.factorLabel.description=l.toFixed(3)+"x";this.factorLabel.position=b.hand.position.addXY(10,10);b.hand.moveBy(td.pt(-5,-5));this.relayout()}},{key:"getCurrentValue",value:function(b,e){return Math.max(this.min,Math.min(this.max,this.scrubbedValue+(this.floatingPoint?b*e:Math.round(b*e))))}},{key:"onDragEnd",value:function(b){var e=this.getScaleAndOffset(b);this.value=this.getCurrentValue(e.offset,e.scale);this.factorLabel.softRemove();b.hand.extent=td.pt(1,1);b.hand.fill=td.Color.orange;b.hand.reactsToPointer=
!1}},{key:"value",set:function(b){this.scrubbedValue=b=Math.max(this.min,Math.min(this.max,b));b=this.floatingPoint?b.toFixed(3):td.obj.safeToString(b);b=this.unit?b+(" "+this.unit):b+"";this.replace(this.documentRange,b,!1,!0);this.relayout()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueScrubber"}},{key:"properties",get:function(){return{scaleToBounds:{defaultValue:!1,set:function(b){this.fixedWidth=!0;this.setProperty("scaleToBounds",b)}},field:{derived:!0,get:function(){return this.owner}},
value:{defaultValue:0},fill:{defaultValue:td.Color.transparent},draggable:{defaultValue:!0},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},baseFactor:{defaultValue:1},floatingPoint:{defaultValue:!1}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:9647,end:12810})}(td.Text));
td.ValueScrubber=jQ;td.ValueScrubber=jQ;td.ValueScrubber=jQ;var EG=Ma("bv",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("CheckBox")&&"function"===typeof d.CheckBox?d.CheckBox:d.CheckBox=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"trigger",value:function(){try{this.checked=!this.checked,td.signal(this,"toggle",this.checked)}catch(e){var b=
this.world();b?b.logError(e):console.error(e)}}},{key:"onMouseDown",value:function(b){this.active&&this.trigger()}},{key:"render",value:function(b){return b.renderCheckBox(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CheckBox"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},extent:{defaultValue:td.pt(15,15)},borderWidth:{defaultValue:0},active:{defaultValue:!0},checked:{defaultValue:!1},fill:{defaultValue:td.Color.transparent},nativeCursor:{defaultValue:"pointer"}}}}],
d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:12819,end:13565})}(td.Morph));td.CheckBox=EG;td.CheckBox=EG;td.CheckBox=EG;var kQ=Ma("aF",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("LabeledCheckBox")&&"function"===typeof d.LabeledCheckBox?
d.LabeledCheckBox:d.LabeledCheckBox=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"disable",value:function(){this.active=!1;this.labelMorph.opacity=.5}},{key:"enable",value:function(){this.active=!0;this.labelMorph.opacity=1}},{key:"trigger",value:function(){this.checkboxMorph.trigger()}},{key:"onMouseDown",value:function(b){this.active&&this.trigger();b.stop()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"LabeledCheckBox"}},{key:"example",value:function(){(new td.LabeledCheckBox({label:"foo"})).openInWorld()}},{key:"properties",get:function(){return{name:{defaultValue:"LabeledCheckBox"},alignCheckBox:{defaultValue:"left",type:"Enum",values:["left","right"],set:function(b){this.layout=new td.HorizontalLayout({direction:"left"==b?"leftToRight":"rightToLeft"});this.setProperty("alignCheckBox",b)}},layout:{initialize:function(){this.layout=new td.HorizontalLayout({direction:"left"==
this.alignCheckBox?"leftToRight":"rightToLeft"})}},label:{defaultValue:"label",after:["submorphs"],derived:!0,get:function(){return this.labelMorph.value},set:function(b){this.labelMorph.value=b}},checked:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.checked},set:function(b){this.checkboxMorph.checked=b;td.signal(this,"checked",b)}},active:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.active},set:function(b){this.checkboxMorph.active=b}},labelMorph:{derived:!0,
readOnly:!0,get:function(){return this.getSubmorphNamed("label")}},checkboxMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("checkbox")}},submorphs:{initialize:function(){this.submorphs=[new td.CheckBox({name:"checkbox"}),new td.Label({nativeCursor:"pointer",name:"label",padding:td.Rectangle.inset(5,3)})];td.connect(this,"alignCheckBox",this,"extent");td.connect(this.checkboxMorph,"checked",this,"checked")}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:13574,end:16133})}(td.Morph));td.LabeledCheckBox=kQ;td.LabeledCheckBox=kQ;td.LabeledCheckBox=kQ;var lQ=Ma("bq",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("ModeSelector")&&"function"===typeof d.ModeSelector?d.ModeSelector:d.ModeSelector=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $b(k,a,[{key:"createLabels",value:function(b,e,l){var p=this;l=void 0===l?{}:l;return td.arr.zip(b,e).map(function(u){u=$jscomp.makeIterator(u);var x=u.next().value,z=u.next().value;u=l[x];u=td.morph(Object.assign({name:x+"Label",master:"styleguide://SystemWidgets/mode label",type:"label",value:x},u&&{tooltip:u}));td.connect(u,"onMouseDown",p,"update",{updater:function(E){E(x,z)},varMapping:{name:x,value:z}});return u})}},{key:"relayout",value:function(b){b=void 0===b?!0:b;var e=
this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress){if(!e.currentLabel||!e.layout)return u.return();e.layout.forceLayout();l=e.get("typeMarker");p=e.currentLabel.bounds();return b?u.yield(l.animate({bounds:p,duration:200}),3):(l.setBounds(p),u.jumpTo(2))}u.jumpToEnd()})}},{key:"animateFontColor",value:function(b,e,l){var p=b.fontColor;b.animate({customTween:function(u){return b.fontColor=p.interpolate(u,e)},duration:l})}},{key:"update",value:function(b,e,l){l=
void 0===l?!1:l;var p=this,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){u=p.get(b+"Label");if(u==p.currentLabel)return x.return();p.getSubmorphsByStyleClassName("Label").forEach(function(z){z!=u&&p.animateFontColor(z,p.fontColor,200)});p.currentLabel=u;!l&&td.signal(p,b,e);!l&&td.signal(p,"switchLabel",e);p.relayout(!l);return x.yield(p.animateFontColor(u,p.selectionFontColor,200),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModeSelector"}},{key:"example",
value:function(){(new td.ModeSelector({items:{foo:{},trottel:{},babbel:{}}})).openInWorld()}},{key:"properties",get:function(){return{items:{derived:!0,set:function(b){td.obj.isArray(b)?this.keys=this.values=b:(this.keys=td.obj.keys(b),this.values=td.obj.values(b))}},height:{defaultValue:30},init:{},keys:{before:["layout"]},values:{before:["layout"]},tooltips:{},fontColor:{defaultValue:td.Color.black},selectionFontColor:{defaultValue:td.Color.white},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/mode selector"}}},
layout:{after:["items","keys","values"],initialize:function(){this.keys&&(this.layout=new td.GridLayout({rows:[0,{paddingBottom:10}],columns:[0,{fixed:5},this.keys.length+2,{fixed:5}],grid:[[null].concat($jscomp.arrayFromIterable(td.arr.interpose(this.keys.map(function(b){return b+"Label"}),null)),[null])],autoAssign:!1,fitToCell:!1}))}},submorphs:{after:["items","keys","values","fontColor"],initialize:function(){this.keys&&(this.submorphs=[{name:"typeMarker",isLayoutable:!1}].concat($jscomp.arrayFromIterable(this.createLabels(this.keys,
this.values,this.tooltips))),td.connect(this,"extent",this,"relayout"),this.update(this.init?this.init:this.keys[0],this.values[this.keys.includes(this.init)?this.keys.indexOf(this.init):0],!0))}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:16142,end:19750})}(td.Morph));td.ModeSelector=
lQ;td.ModeSelector=lQ;td.ModeSelector=lQ;var mQ=Ma("aG",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("DropDownSelector")&&"function"===typeof d.DropDownSelector?d.DropDownSelector:d.DropDownSelector=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"build",value:function(){this.dropDownLabel=td.Icon.makeLabel("chevron-circle-down",{opacity:0,name:"dropDownIcon"});
this.submorphs=[{type:"label",name:"currentValue"},this.dropDownLabel]}},{key:"getMenuEntries",value:function(){var b=this,e=this.getNameFor(this.selectedValue);return[].concat($jscomp.arrayFromIterable(void 0!=this.selectedValue?[{command:e,target:this}]:[]),$jscomp.arrayFromIterable(td.arr.compact(this.commands.map(function(l){return l.name!=e&&{command:l.name,target:b}}))))}},{key:"commands",get:function(){var b=this;return td.obj.isArray(this.values)?this.values.map(function(e){return{name:String(e),
exec:function(){td.signal(b,"update",e);b.selectedValue=e}}}):td.properties.forEachOwn(this.values,function(e,l){return{name:e,exec:function(){td.signal(b,"update",l);b.selectedValue=l}}})}},{key:"getNameFor",value:function(b){return this.getCurrentValue?this.getCurrentValue():td.obj.isArray(this.values)?td.obj.safeToString(b):td.obj.safeToString(td.properties.nameFor(this.values,b))}},{key:"relayout",value:function(){var b=this.getNameFor(this.selectedValue),e=this.get("currentValue");"undefined"==
b?(e.value="Not set",e.fontColor=td.Color.gray):(e.value=b,e.fontColor=td.Color.black)}},{key:"onHoverIn",value:function(){this.dropDownLabel.animate({opacity:1,duration:300})}},{key:"onHoverOut",value:function(){this.dropDownLabel.animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(b){this.menu=this.world().openWorldMenu(b,this.getMenuEntries());this.menu.hasFixedPosition=!0;this.menu.topLeft=this.globalPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownSelector"}},
{key:"properties",get:function(){return{values:{defaultValue:[]},getCurrentValue:{defaultValue:void 0},selectedValue:{after:["submorphs","values","getCurrentValue"],set:function(b){this.setProperty("selectedValue",b);this.relayout()}},fontColor:{isStyleProp:!0,defaultValue:td.Color.black},fontSize:{isStyleProp:!0,defaultValue:12},fontFamily:{isStyleProp:!0,defaultValue:"Sans-Serif"},border:{defaultValue:{radius:3,color:td.Color.gray.darker(),style:"solid"}},padding:{defaultValue:1},isSelected:{defaultValue:"false",
set:function(b){this.setProperty("isSelected",b);this.fontColor=b?td.Color.white:td.Color.black}},layout:{initialize:function(){this.layout=new td.HorizontalLayout({spacing:this.padding})}},submorphs:{initialize:function(){this.build()}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},
{start:19759,end:23034})}(td.Morph));td.DropDownSelector=mQ;td.DropDownSelector=mQ;td.DropDownSelector=mQ;var nQ=Ma("bu",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("SearchField")&&"function"===typeof d.SearchField?d.SearchField:d.SearchField=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"parseInput",value:function(){var b=Array.from(this.textString).reduce(function(l,
p){if("\\"===p&&!l.escaped)return l.escaped=!0,l;" "!==p||l.escaped?(l.spaceSeen=!1,l.current+=p):(!l.spaceSeen&&l.current&&(l.tokens.push(l.current),l.current=""),l.spaceSeen=!0);l.escaped=!1;return l},{tokens:[],current:"",escaped:!1,spaceSeen:!1});b.current&&b.tokens.push(b.current);var e=b.tokens.map(function(l){return l.toLowerCase()});return{tokens:b.tokens,lowercasedTokens:e}}},{key:"clearInput",value:function(){this.textString="";td.signal(this,"searchInput",this.parseInput());this.onBlur()}},
{key:"matches",value:function(b){return this.textString?this.filterFunction.call(this,this.parseInput(),{string:b}):!0}},{key:"onChange",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);b="replace"===b.selector;this.isFocused();this.get("placeholder icon")&&(this.get("placeholder icon").visible=!!this.textString);this.textString.includes("\n")&&(this.textString=this.textString.replace("\n",""),this.owner.focus());this.active&&b&&td.signal(this,"searchInput",
this.parseInput())}},{key:"onBlur",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onBlur",this).call(this,b);this.active=!1;this.get("placeholder").visible=!this.textString;this.animate({styleClasses:["idle"],duration:300})}},{key:"onFocus",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onFocus",this).call(this,b);this.animate({styleClasses:["selected"],duration:300});this.get("placeholder").visible=!1;this.active=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchField"}},
{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search field"}}},selectedFontColor:{isStyleProp:!0,defaultValue:td.Color.black},idleFontColor:{isStyleProp:!0,defaultValue:td.Color.gray},borderColor:{defaultValue:td.Color.gray},layout:{initialize:function(){this.layout=new td.HorizontalLayout({autoResize:!1,direction:"rightToLeft"})}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(b){this.setProperty("fuzzy",
b);b?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var b=this.getProperty("filterFunction");if(!b)return this.defaultFilterFunction;"string"===typeof b&&(b=eval("("+b+")"));return b}},sortFunction:{},
defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(b,e){return b.lowercasedTokens.every(function(l){return e.string.toLowerCase().includes(l)})})}},fuzzySortFunction:{get:function(){var b=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(e,l){var p=String(td.PropertyPath("string"===typeof b.fuzzy?b.fuzzy:"string").get(l)).toLowerCase(),u=0;e.lowercasedTokens.forEach(function(x){p.startsWith(x)?u-=10:p.includes(x)&&
(u-=5)});return td.arr.sum(e.lowercasedTokens.map(function(x){return td.string.levenshtein(p.toLowerCase(),x)}))+u})}},fuzzyFilterFunction:{get:function(){var b=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(e,l){var p="string"===typeof b.fuzzy?b.fuzzy:"string";if(e.lowercasedTokens.every(function(x){return l.string.toLowerCase().includes(x)}))return!0;var u=String(td.PropertyPath(p).get(l)).toLowerCase();return 3>=td.arr.sum(e.lowercasedTokens.map(function(x){return td.string.levenshtein(u,
x)}))})}},placeHolder:{defaultValue:"Search"},submorphs:{after:["placeHolder"],initialize:function(){this.submorphs=[{type:"label",name:"placeholder",isLayoutable:!1,value:this.placeHolder,reactsToPointer:!1},td.Icon.makeLabel("times-circle",{padding:td.rect(2,4,3,0),fontSize:14,visible:!1,fixedHeight:!0,autofit:!1,extent:td.pt(20,22),name:"placeholder icon",fontColor:td.Color.gray,nativeCursor:"pointer"})];td.connect(this.get("placeholder icon"),"onMouseDown",this,"clearInput")}}}}}],d,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:23078,end:29598})}(td.Text));td.SearchField=nQ;td.SearchField=nQ;td.SearchField=nQ;var UZ=Object.freeze({__proto__:null,Leash:hQ,Slider:iQ,ValueScrubber:jQ,CheckBox:EG,LabeledCheckBox:kQ,ModeSelector:lQ,DropDownSelector:mQ,SearchField:nQ}),gk=lively.FreezerRuntime.recorderFor("lively.components/index.js");
Object.assign(gk,Aza);Object.assign(gk,zza);Object.assign(gk,Bza);Object.assign(gk,Cza);Object.assign(gk,Dza);Object.assign(gk,Eza);gk.Window=SZ;gk.prompts=TZ;gk.widgets=UZ;gk.LoadingIndicator=uB;gk.addClassMappings=RC;gk.List=YB;gk.DropDownList=DG;gk.Button=XB;gk.CheckBox=EG;gk.addClassMappings({list:gk.List,dropdownlist:gk.DropDownList,button:gk.Button,checkbox:gk.CheckBox,labeledcheckbox:gk.widgets.LabeledCheckBox});gk.Window=SZ;gk.Window=SZ;gk.LoadingIndicator=uB;gk.LoadingIndicator=uB;gk.prompts=
TZ;gk.prompts=TZ;gk.widgets=UZ;gk.widgets=UZ;var Rn=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js");Rn.Morph=xk;Rn.MorphicDB=Yr;Rn.LoadingIndicator=uB;Rn.resource=hd;var ZB=function(a){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js"),k=d.hasOwnProperty("WorldLoadingScreen")&&"function"===typeof d.WorldLoadingScreen?d.WorldLoadingScreen:d.WorldLoadingScreen=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $b(k,a,[{key:"commands",get:function(){var b=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;b.setBounds($world.windowBounds());b.get("json target indicator").topRight=b.innerBounds().insetBy(25).topRight()}}]}},{key:"__head_html__",get:function(){return'\n<script> window.AUTH_SERVER_URL; \x3c/script>\n<style type="text/css">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"onLoad",value:function(){var b=this,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress){if(!lively.FreezerRuntime)return z.jumpTo(0);e=b.get("package loading indicator");l=b.get("css loading screen");p=b.getWorldName();u=b.getFilePath();(x=b.getSnapshot())?(e.isLayoutable=e.visible=!1,l.isLayoutable=l.visible=!0):(e.startStepping("updateProgressBar"),document.body.style.backgroundColor="black");u&&b.get("json target indicator").animate({opacity:1,duration:300});
return z.yield(b.transitionToLivelyWorld({worldName:p,filePath:u,snapshot:x},e),3)}e.stopStepping();z.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(b,e){var l=b.worldName,p=b.filePath,u=b.snapshot,x=this,z,E,G,J,K,T,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(da){switch(da.nextAddress){case 1:return z=Rn.resource(window.SYSTEM_BASE_URL||document.location.origin).join("objectdb/").url,E=x.get("package loading indicator"),da.yield(Promise.resolve().then(function(){return Afa}),
2);case 2:G=da.yieldResult;J=G.bootstrap;if(!(K=l&&"__newWorld__"!=l)){da.jumpTo(3);break}return da.yield(Rn.MorphicDB.named("lively.morphic/objectdb/morphicdb",{serverURL:z}).exists("world",l),4);case 4:K=!da.yieldResult.exists;case 3:if(K)return da.return(x.indicateMissingWorld(!0));if(!(T=p)){da.jumpTo(5);break}return da.yield(Rn.resource(document.location.origin).join(p).exists(),6);case 6:T=!da.yieldResult;case 5:if(T)return da.return(x.indicateMissingWorld(!0));P=Rn.LoadingIndicator.open("...starting bootstrap process...",
{animated:!0,delay:1E3});u&&(P.visible=!1);e.opacity=1;return da.yield(J({worldName:l,filePath:p,loadingIndicator:P,progress:E,snapshot:u}),0)}})}},{key:"getWorldName",value:function(){return document.location.href.endsWith("worlds/new")?"__newWorld__":Rn.resource(document.location.href).query().name||window.WORLD_NAME||!1}},{key:"getFilePath",value:function(){return Rn.resource(document.location.href).query().file||!1}},{key:"getSnapshot",value:function(){return Rn.resource(document.location.href).query().snapshot||
window.SNAPSHOT_PATH||!1}},{key:"indicateMissingWorld",value:function(b){this.get("package loading indicator").visible=!b;this.get("broken heart").visible=this.get("broken heart").isLayoutable=b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldLoadingScreen"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}}}}}],d,{pathInPackage:function(){return"loading-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:158,end:3675})}(Rn.Morph);Rn.WorldLoadingScreen=ZB;Rn.WorldLoadingScreen=ZB;Rn.WorldLoadingScreen=ZB;var Pg=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js");Pg.Morph=xk;Pg.MorphicDB=Yr;Pg.World=Ss;Pg.easings=No;Pg.morph=Dk;Pg.promise=bh;Pg.string=Dh;Pg.date=Er;Pg.Color=ng;Pg.pt=ui;Pg.LoadingIndicator=uB;Pg.resource=hd;Pg.missingSVG=
'data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
var VZ=function(a){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),k=d.hasOwnProperty("TitleWrapper")&&"function"===typeof d.TitleWrapper?d.TitleWrapper:d.TitleWrapper=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"startMovingRight",value:function(){var b=this;this.animate({customTween:function(e){b._hoverDelta=e}})}},{key:"stopMovingRight",value:function(){var b=this;this.animate({customTween:function(e){b._hoverDelta=
1-e}})}},{key:"startMovingLeft",value:function(){var b=this;this.animate({customTween:function(e){b._hoverDelta=-e}})}},{key:"stopMovingLeft",value:function(){var b=this;this.animate({customTween:function(e){b._hoverDelta=-1+e}})}},{key:"startOnce",value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){if(e._fn)return l.return();e._fn=b;return l.yield(b(),2)}e._fn=null;l.jumpToEnd()})}},{key:"updateTitle",value:function(){var b=this;if(this.title){var e=
$jscomp.makeIterator(this.submorphs).next().value;e.left+=this._hoverDelta;e.right<this.width-20&&-1==this._hoverDelta?this.startOnce(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?l.yield(b.stopMovingLeft(),2):l.yield(b.startMovingRight(),0)})}):20<e.left&&1==this._hoverDelta&&this.startOnce(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?l.yield(b.stopMovingRight(),2):l.yield(b.startMovingLeft(),
0)})})}}},{key:"startShowingFullTitle",value:function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress){if(!b.title)return p.return();e=$jscomp.makeIterator(b.submorphs);l=e.next().value;l.textString=b.title;return p.yield(l.whenRendered(),2)}b._hoverDelta=0;b.startStepping("updateTitle");l.right>b.width&&b.startMovingLeft();p.jumpToEnd()})}},{key:"stopShowingFullTitle",value:function(){if(this.title){var b=this.submorphs[0];b.textString=Pg.string.truncate(this.title,
18,"...");this.stopStepping("updateTitle");this._hoverDelta=0;b.left=0}}},{key:"onHoverIn",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onHoverIn",this).call(this,b);this.startShowingFullTitle()}},{key:"onHoverOut",value:function(b){$b._get(Object.getPrototypeOf(k.prototype),"onHoverOut",this).call(this,b);this.stopShowingFullTitle()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TitleWrapper"}},{key:"properties",get:function(){return{title:{derived:!0,set:function(b){this.setProperty("title",
b);b&&(this.submorphs[0].textString=Pg.string.truncate(b,18,"..."))}}}}}],d,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:350,end:2487})}(Pg.Morph);Pg.TitleWrapper=VZ;Pg.TitleWrapper=VZ;Pg.TitleWrapper=VZ;var $B=function(a){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),
k=d.hasOwnProperty("WorldPreview")&&"function"===typeof d.WorldPreview?d.WorldPreview:d.WorldPreview=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $b(k,a,[{key:"relayout",value:function(){this.setBounds(this.world().visibleBounds())}},{key:"onLoad",value:function(){this.ui.spinner.visible=!1}},{key:"displayPreview",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.yield(b.initWithCommit(b._commit),
0)})}},{key:"initWithCommit",value:function(b){var e=this,l,p,u,x,z,E,G,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(K){if(1==K.nextAddress)return l=e.ui,p=l.preview,u=l.timestamp,x=l.title,z=l.description,E=l.previewContainer,e.opacity=.5,E.opacity=0,K.yield(e.whenRendered(),2);if(3!=K.nextAddress)return e._commit=b,p.imageUrl=b.preview||Pg.missingSVG,G=b.author,J=G.name,J=J.startsWith("guest-")?"guest":J,u.value=[J,{fontSize:13,fontWeight:"bold",paddingTop:"1px"},Pg.date.format(b.timestamp,
" - d.m.yy HH:MM"),{fontWeight:"bold",fontSize:12,paddingTop:"2px"}],x.title=b.name,z.value=b.description,K.yield(e.whenRendered(),3);E.opacity=1;e.animate({opacity:1,duration:300});K.jumpToEnd()})}},{key:"openAnimated",value:function(b){b=void 0===b?$world.visibleBounds():b;var e=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:return l=Pg.morph(Object.assign({},e.spec(),{reactsToPointer:!1,renderOnGPU:!0,submorphs:[e.ui.spinner.spec()]})).openInWorld(),
l.hasFixedPosition=!0,l.globalPosition=e.globalPosition,l.opacity=0,p.yield(l.whenRendered(),2);case 2:return p.yield(l.animate({opacity:1,duration:300}),3);case 3:return l.dropShadow=!1,l.animate({bounds:b,borderRadius:0,duration:500,easing:Pg.easings.inOutQuint}),l.respondsToVisibleWindow=!0,p.yield(l.ui.spinner.animate({center:l.innerBounds().center(),duration:500,easing:Pg.easings.inOutQuint}),4);case 4:return p.yield(Pg.promise.delay(1E3),5);case 5:return p.return(l)}})}},{key:"openWorld",value:function(){var b=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(b.openAnimated(),2);b.loadWorld();e.jumpToEnd()})}},{key:"loadWorld",value:function(){var b=this,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress){e=b._commit;l=e._id;p=e.name;if(lively.FreezerRuntime)return u=Pg.LoadingIndicator.open("...starting bootstrap process...",{animated:!0,delay:1E3}),b.transitionToLivelyWorld(document.location.origin,b._commit,
u),z.jumpTo(0);x=Pg.LoadingIndicator.open("loading "+p);return z.yield(Pg.World.loadFromCommit(l,void 0,{morphicDB:Pg.MorphicDB.default}),3)}x.remove();z.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(b,e,l){var p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return z.yield(Pg.resource("part://partial freezing/package loading progress indicator").read(),2);if(3!=z.nextAddress)return p=z.yieldResult,z.yield(Promise.resolve().then(function(){return Afa}),
3);u=z.yieldResult;x=u.bootstrap;return z.yield(x({commit:e,loadingIndicator:l,progress:p}),0)})}},{key:"showVersions",value:function(){var b=this,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return e=200,l=Pg.easings.inOutExpo,p=b.ui,u=p.previewContainer,z.yield(Pg.resource("part://partial freezing/version container").read(),2);if(3!=z.nextAddress)return x=z.yieldResult,x.name="version container",x.position=Pg.pt(0,0),b.addMorph(x),x.reactsToPointer=
x.visible=!0,x.initializeFromStartCommit(b._commit),b.animate({width:515,duration:e,easing:l}),u.animate({opacity:0,duration:e}),z.yield(x.animate({opacity:1,duration:e}),3);u.reactsToPointer=u.visible=!1;z.jumpToEnd()})}},{key:"hideVersions",value:function(){var b=this,e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return e=Pg.easings.inOutExpo,l=b.ui,p=l.previewContainer,u=l.versionContainer,p.reactsToPointer=p.visible=!0,b.animate({width:245,duration:200,
easing:e}),p.animate({opacity:1,duration:200}),x.yield(u.animate({opacity:0,duration:200}),2);u.reset();u.remove();x.jumpToEnd()})}},{key:"toggleDeleteButton",value:function(b){this.ui.deleteButton.visible=b}},{key:"onHoverIn",value:function(b){this.toggleDeleteButton(!0)}},{key:"onHoverOut",value:function(b){this.toggleDeleteButton(!1)}},{key:"tryToDelete",value:function(){var b=this,e,l,p,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return e=300,l=b.ui,p=
l.previewContainer,x.yield(Pg.resource("part://partial freezing/delete world prompt").read(),2);u=x.yieldResult;Object.assign(u,{name:"delete world prompt",position:Pg.pt(0,0),opacity:0});b.addMorph(u);u.visible=!0;return x.yield(b.withAnimationDo(function(){u.opacity=1;b.dropShadow=b.dropShadow.with({color:Pg.Color.black.withA(.5),blur:50});p.opacity=.3;p.blur=1},{duration:e}),0)})}},{key:"confirmDelete",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return e.yield(Pg.MorphicDB.default.commit(Object.assign({},b._commit,{content:void 0,snapshot:null})),2);b.isComponent||b.owner.isWorld||b.owner.remove();e.jumpToEnd()})}},{key:"cancelDelete",value:function(){var b=this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return e=b.ui,l=e.previewContainer,p=e.deleteWorldPrompt,u.yield(b.withAnimationDo(function(){Object.assign(l,{opacity:1,blur:0});b.dropShadow=b.dropShadow.with({color:Pg.Color.rgba(0,
0,0,.11)});p.opacity=0},{duration:300}),2);p.remove();u.jumpToEnd()})}},{key:"onMouseUp",value:function(b){var e=this.ui,l=e.openButton,p=e.versionButton,u=e.deleteButton,x=e.closeVersionsButton,z=e.cancelDeleteButton;e=e.confirmDeleteButton;switch(b.targetMorph){case l:this.openWorld();break;case p:this.showVersions();break;case u:this.tryToDelete();break;case x:this.hideVersions();break;case e:this.confirmDelete();break;case z:this.cancelDelete()}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldPreview"}},
{key:"properties",get:function(){return{ui:{readOnly:!0,get:function(){return{previewContainer:this.getSubmorphNamed("preview container"),versionContainer:this.getSubmorphNamed("version container"),preview:this.getSubmorphNamed("preview"),timestamp:this.getSubmorphNamed("timestamp"),title:this.getSubmorphNamed("title wrapper"),description:this.getSubmorphNamed("description"),openButton:this.getSubmorphNamed("open button"),versionButton:this.getSubmorphNamed("version button"),spinner:this.getSubmorphNamed("spinner"),
deleteButton:this.getSubmorphNamed("delete button"),closeVersionsButton:this.getSubmorphNamed("close versions button"),versionList:this.getSubmorphNamed("version list"),deleteWorldPrompt:this.getSubmorphNamed("delete world prompt"),cancelDeleteButton:this.getSubmorphNamed("cancel delete button"),confirmDeleteButton:this.getSubmorphNamed("confirm delete button")}}}}}}],d,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:2500,end:10197})}(Pg.Morph);Pg.WorldPreview=$B;Pg.WorldPreview=$B;Pg.WorldPreview=$B;var aC=function(a){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),k=d.hasOwnProperty("WorldLandingPage")&&"function"===typeof d.WorldLandingPage?d.WorldLandingPage:d.WorldLandingPage=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return $b(k,a,[{key:"__loading_html__",get:function(){return"\n      <style>\n        "+this.loadingScreen.cssDeclaration+"\n      </style>\n      "+this.loadingScreen.html+"\n    "}},{key:"__head_html__",get:function(){return'\n<script> window.AUTH_SERVER_URL; \x3c/script>\n<link type="text/css" rel="stylesheet" id="lively-font-awesome" href="/lively.morphic/assets/font-awesome/css/font-awesome.css">\n<link type="text/css" rel="stylesheet" id="lively-font-inconsolata" href="/lively.morphic/assets/inconsolata/inconsolata.css">\n<style type="text/css" id="WorldLandingPage_7068CDA9_749E_4EC1_9BC4_50DF06EAA2BA-Nunito">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"commands",get:function(){var b=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;document.body.style.overflowY="hidden";b.setBounds($world.windowBounds());b.getSubmorphNamed("globe").extent=b.extent;b.ensureUserFlap();var e=b.getSubmorphNamed("a project browser");e&&(e.center=b.extent.scaleBy(.5))}}]}},{key:"ensureUserFlap",value:function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return $world.get("user flap")?
e.return():e.yield(Pg.resource("part://SystemIDE/user flap master/dark").read(),2);if(3!=e.nextAddress)return b=e.yieldResult,b.name="user flap",b.showMorphControls=!1,b.hasFixedPosition=!0,b.openInWorld(),b.opacity=0,b.alignInWorld(),b.get("fast load toggler").refresh(),e.yield(Pg.promise.delay(1E3),3);b.animate({opacity:1});e.jumpToEnd()})}},{key:"beforePublish",value:function(){var b=this.getSubmorphNamed("a project browser");b&&b.remove()}},{key:"onLoad",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return l.yield(b.whenRendered(),2);if(!lively.FreezerRuntime)return l.return();$world.fill=Pg.Color.black;document.documentElement.style.background=Pg.Color.black;b.showWorldList().then(function(){return document.getElementById("loading-screen").remove()});b.getSubmorphNamed("globe").fullyLoaded();(e=document.getElementById("loading screen"))&&e.remove();l.jumpToEnd()})}},{key:"showWorldList",value:function(){var b=this,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==
z.nextAddress){if(e=b.getSubmorphNamed("a poject browser"))return z.jumpTo(2);l=b;p=l.addMorph;u=l;return z.yield(Pg.resource("part://partial freezing/project browser").read(),3)}2!=z.nextAddress&&(e=p.call(u,z.yieldResult));x=e;x.name="a project browser";b.reset();x.showCloseButton=!1;x.extent=Pg.pt(1110,800).minPt(b.extent.subPt(Pg.pt(50,150)));x.center=b.innerBounds().center();x.animate({opacity:1,duration:300});x.displayWorlds();x.hasFixedPosition=!1;z.jumpToEnd()})}},{key:"reset",value:function(){var b=
this.getSubmorphNamed("a project browser");b.opacity=0;b.center=this.innerBounds().center()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldLandingPage"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}},loadingScreen:{}}}}],d,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:10208,end:13426})}(Pg.Morph);Pg.WorldLandingPage=aC;Pg.WorldLandingPage=aC;Pg.WorldLandingPage=aC;var yt=lively.FreezerRuntime.recorderFor("PartialFreezing/index.js");yt.WorldLoadingScreen=ZB;yt.WorldLandingPage=aC;yt.WorldPreview=$B;yt.WorldLoadingScreen=ZB;yt.WorldLoadingScreen=ZB;yt.WorldLandingPage=aC;yt.WorldLandingPage=aC;yt.WorldPreview=$B;yt.WorldPreview=$B;var re=lively.FreezerRuntime.recorderFor("PartialFreezing/bootstrap.js");
re.bootstrap=DL;re.fastPrepLivelySystem=function(a){return Promise.resolve().then(function(){a.status="starting fast system preparation..."}).then(function(){return re.resource(System.baseURL).join("package-registry.json").readJson()}).then(function(d){System["__lively.modules__packageRegistry"]=lively.modules.PackageRegistry.fromJSON(System,d);return System}).then(function(){return re.loadViaScript(re.resource(System.baseURL).join("/lively.user/dist/lively.user-client.js").url)})};re.installFetchHook=
function(a){function d(k,b){re.loads++;a.status="loading "+re.string.truncateLeft(b.name.replace(window.System.baseURL,""),25,"...");a.progress=re.loads/(800-4*Object.keys(re.extractedModules).length);a.center=$world.innerBounds().center();return k(b)}window.__logFetch=d;lively.modules.installHook("fetch",d)};re.extractModules=function(a){Object.keys(lively.FreezerRuntime.registry).filter(function(d){return d.startsWith(a)}).forEach(function(d){re.extractedModules[re.resource(System.baseURL).join(d).url]=
Object.assign({},lively.FreezerRuntime.registry[d].exports)})};re.loadComponents=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return a.yield(rb.import("./world-6c99886d.js"),2);case 2:return a.yield(rb.import("./editor-plugin-6888753a.js").then(function(d){return d.e}),3);case 3:return a.yield(rb.import("./editor-plugin-0fb6aad7.js"),4);case 4:return a.yield(rb.import("./index-a98bf65c.js"),5);case 5:return a.yield(Promise.resolve().then(function(){return Exa}),
6);case 6:return a.yield(Promise.resolve().then(function(){return Fxa}),7);case 7:return a.yield(Promise.resolve().then(function(){return pqa}),8);case 8:re.extractModules("lively.bindings"),re.extractModules("lively.shell"),re.extractModules("lively.ide"),re.extractModules("lively.components"),a.jumpToEnd()}})};re.bootstrapLivelySystem=function(a,d,k){return Promise.resolve().then(function(){a.status="starting bootstrap process..."}).then(function(){var b,e,l,p,u,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:return z.yield(d.whenRendered(),
2);case 2:if("frozen"!=k["lively.lang"]&&!re.fastLoad){z.jumpTo(3);break}return z.yield(Promise.resolve().then(function(){return C8}),4);case 4:b=z.yieldResult,re.extractModules("lively.lang"),d.finishPackage({packageName:"lively.lang",frozen:!0}),delete b._prevLivelyGlobal;case 3:if("frozen"!=k["lively.ast"]&&!re.fastLoad){z.jumpTo(5);break}e=lively;return z.yield(Promise.resolve().then(function(){return bM}),6);case 6:e.ast=z.yieldResult,re.extractModules("lively.ast"),d.finishPackage({packageName:"lively.ast",
frozen:!0});case 5:if("frozen"!=k["lively.source-transform"]&&!re.fastLoad){z.jumpTo(7);break}l=lively;return z.yield(Promise.resolve().then(function(){return jqa}),8);case 8:l.sourceTransform=z.yieldResult,re.extractModules("lively.source-transform"),d.finishPackage({packageName:"lively.source-transform",frozen:!0});case 7:if("frozen"!=k["lively.classes"]&&!re.fastLoad){z.jumpTo(9);break}return z.yield(rb.import("./object-classes-0f5a7a9a.js"),10);case 10:return p=lively,z.yield(Promise.resolve().then(function(){return mca}),
11);case 11:p.classes=z.yieldResult,re.extractModules("lively.class"),d.finishPackage({packageName:"lively.classes",frozen:!0});case 9:if("frozen"!=k["lively.vm"]&&!re.fastLoad){z.jumpTo(12);break}u=lively;return z.yield(Promise.resolve().then(function(){return P9}),13);case 13:u.vm=z.yieldResult,re.extractModules("lively.vm"),d.finishPackage({packageName:"lively.vm",frozen:!0});case 12:if("frozen"!=k["lively.modules"]&&!re.fastLoad){z.jumpTo(14);break}return z.yield(Promise.resolve().then(function(){return ZN}),
15);case 15:re.extractModules("lively.modules"),d.finishPackage({packageName:"lively.modules",frozen:!0});case 14:if("frozen"!=k["lively.user"]&&!re.fastLoad){z.jumpTo(16);break}return z.yield(Promise.resolve().then(function(){return Gxa}),17);case 17:return z.yield(rb.import("./user-ui-1e8d4469.js"),18);case 18:re.extractModules("lively.user"),d.finishPackage({packageName:"lively.user",frozen:!0});case 16:if("frozen"!=k["lively.storage"]&&!re.fastLoad){z.jumpTo(19);break}return z.yield(Promise.resolve().then(function(){return Dwa}),
20);case 20:re.extractModules("lively.storage"),d.finishPackage({packageName:"lively.storage",frozen:!0});case 19:if("frozen"!=k["lively.morphic"]&&!re.fastLoad){z.jumpTo(0);break}return z.yield(Promise.resolve().then(function(){return sna}),22);case 22:return re.extractModules("lively.resources"),z.yield(Promise.resolve().then(function(){return Qca}),23);case 23:return z.yield(rb.import("./index-792c91c7.js"),24);case 24:return re.extractModules("lively.2lively"),z.yield(Promise.resolve().then(function(){return vqa}),
25);case 25:return re.extractModules("lively.serializer2"),z.yield(re.loadComponents(),26);case 26:return z.yield(rb.import("./index-ecae4ac2.js").then(function(E){return E.i}),27);case 27:return re.extractModules("lively.halos"),z.yield(rb.import("./index-9d4f3df2.js"),28);case 28:return re.extractModules("lively-system-interface"),z.yield(Promise.resolve().then(function(){return oqa}),29);case 29:return re.extractModules("lively.graphics"),x=lively,z.yield(Promise.resolve().then(function(){return lya}),
30);case 30:x.morphic=z.yieldResult,re.extractModules("lively.morphic"),d.finishPackage({packageName:"lively.morphic",frozen:!0}),z.jumpToEnd()}})}).then(function(){var b,e,l,p,u,x,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:return b=window.SYSTEM_BASE_URL||document.location.origin,e=window.System,l=e.baseURL,l.endsWith("/")&&(l=l.slice(0,-1)),G.yield(re.resource(b).join("package-registry.json").readJson(),2);case 2:return p=G.yieldResult,G.yield(re.loadViaScript(re.resource(b).join("/lively.next-node_modules/babel-standalone/babel.js").url),
3);case 3:return G.yield(re.loadViaScript(re.resource(b).join("/lively.next-node_modules/systemjs/dist/system.src.js").url),4);case 4:return G.yield(re.loadViaScript(re.resource(b).join("/lively.modules/systemjs-init.js").url),5);case 5:u=lively.modules.getSystem("bootstrapped",{baseURL:b});lively.modules.changeSystem(u,!0);u["__lively.modules__packageRegistry"]=lively.modules.PackageRegistry.fromJSON(u,p);for(x in re.extractedModules)z=x.replace(l,b),u.set(z,u.newModule(re.extractedModules[x])),
E=lively.modules.module(z),E._recorder=re.extractedModules[x],E._frozenModule=!0;e.config({baseURL:b});re.installFetchHook(a);G.jumpToEnd()}})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.lang"]&&!re.fastLoad)return b.return(re.importPackageAndDo("lively.lang",function(e){d.finishPackage({packageName:"lively.lang",loaded:!0});delete e._prevLivelyGlobal},a));b.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){d.animate({opacity:1,
easing:re.easings.outExpo,duration:300});if("dynamic"==k["lively.ast"]&&!re.fastLoad)return b.return(re.importPackageAndDo("lively.ast",function(e){d.finishPackage({packageName:"lively.ast",loaded:!0});lively.ast=e},a));b.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.source-transform"]&&!re.fastLoad)return b.return(re.importPackageAndDo("lively.source-transform",function(e){d.finishPackage({packageName:"lively.source-transform",
loaded:!0});lively.sourceTransform=e},a));b.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.classes"]&&!re.fastLoad)return b.return(re.importPackageAndDo("lively.classes",function(e){d.finishPackage({packageName:"lively.classes",loaded:!0});lively.classes=e},a));b.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.vm"]&&!re.fastLoad)return b.return(re.importPackageAndDo("lively.vm",
function(e){d.finishPackage({packageName:"lively.vm",loaded:!0});lively.vm=e},a));b.jumpToEnd()})}).then(function(){function b(e){lively.modules=e;lively.modules.unwrapModuleLoad();lively.modules.unwrapModuleResolution();lively.modules.wrapModuleLoad();lively.modules.wrapModuleResolution();re.installFetchHook(a);var l=System["__lively.modules__packageRegistry"];delete System["__lively.modules__packageRegistry"];e=System["__lively.modules__packageRegistry"]=e.PackageRegistry.ofSystem(System);Object.assign(e,
re.obj.select(l,["packageMap","individualPackageDirs","devPackageDirs","packageBaseDirs"]));e.resetByURL();l=e.allPackages();var p=lively.modules.module("lively.modules/src/packages/package.js").recorder.Package;l.filter(function(x){return!x.constructor[Symbol.for("lively-module-meta")]}).forEach(function(x){re.adoptObject(x,p)});l=Object.values(System["__lively.modules__loadedModules"]);var u=lively.modules.module("lively.modules/src/module.js").recorder.ModuleInterface;l.filter(function(x){return!x.constructor[Symbol.for("lively-module-meta")]}).forEach(function(x){re.adoptObject(x,
u)})}return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return"frozen"==k["lively.modules"]||re.fastLoad?(System._scripting=lively.modules.scripting,e.jumpTo(2)):e.yield(re.importPackageAndDo("lively.modules",b,a),2);d.finishPackage({packageName:"lively.modules",loaded:!0});e.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.user"]&&!re.fastLoad)return b.return(re.importPackageAndDo("lively.user",
function(e){d.finishPackage({packageName:"lively.user",loaded:!0});lively.user=e},a));b.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.storage"]&&!re.fastLoad)return b.return(re.importPackageAndDo("lively.storage",function(e){d.finishPackage({packageName:"lively.storage",loaded:!0});lively.storage=e},a));b.jumpToEnd()})})};re.importPackageAndDo=function(a,d,k){var b=a.split("/").slice(-1)[0];k.label="loading "+b;return lively.modules.importPackage(a).then(d||
function(){})};re.polyfills=function(){var a=[];"PointerEvent"in window||a.push(re.loadViaScript(re.resource(System.baseURL).join("/lively.next-node_modules/pepjs/dist/pep.js").url));"fetch"in window||a.push(re.loadViaScript("//cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.js"));return Promise.all(a)};re.resource=hd;re.unregisterExtension=ne;re.registerExtension=xe;re.loadViaScript=os;re.promise=bh;re.string=Dh;re.obj=eg;re.modulePackage=ZN;re.easings=No;re.adoptObject=vz;re.Color=ng;re.styleguideResourceExtension=
TN;re.partResourceExtension=aO;lively.modules=re.modulePackage;re.loginDone=!0;re.doBootstrap=!0;re.askBeforeQuit=!0;re.worldLoaded=!1;re.loc=document.location;re.query=re.resource(re.loc.href).query();re.fastLoad=1==re.query.fastLoad||window.FORCE_FAST_LOAD;re.bootstrap=DL;re.bootstrap=DL;re.loads=0;re.extractedModules={};var Afa=Object.freeze({__proto__:null,bootstrap:DL}),Fza=/^part:\/\/([^\/]+)\/(.*)$/,WZ=function(){return mB.apply(this,arguments)||this};$jscomp.inherits(WZ,mB);WZ.prototype.read=
function(){var a=this,d=function(){return mB.prototype.read},k,b,e,l,p,u,x,z,E,G,J,K,T,P,da,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ka){switch(ka.nextAddress){case 1:switch(a.url){case "part://partial freezing/package loading progress indicator":return ka.jumpTo(2);case "part://partial freezing/version container":return ka.jumpTo(3);case "part://partial freezing/delete world prompt":return ka.jumpTo(4);case "part://SystemIDE/user flap master/dark":return ka.jumpTo(5);case "part://SystemIDE/lively top bar master":return ka.jumpTo(6);
case "part://SystemUserUI/version checker":return ka.jumpTo(7);case "part://SystemUserUI/login widget":return ka.jumpTo(8);case "part://SystemUserUI/user info":return ka.jumpTo(9);case "part://SystemUserUI/register widget":return ka.jumpTo(10);case "part://SystemIDE/user menu master":return ka.jumpTo(11);case "part://SystemIDE/scene graph side bar master":return ka.jumpTo(12);case "part://SystemIDE/styling side bar master":return ka.jumpTo(13);case "part://SystemWidgets/new color picker":return ka.jumpTo(14);
case "part://SystemWidgets/gradient editor/color stop":return ka.jumpTo(15);case "part://partial freezing/project browser":return ka.jumpTo(16);case "part://partial freezing/world preview":return ka.jumpTo(17);default:return ka.jumpTo(18)}case 2:return ka.yield(rb.import("./package loading progress indicator-82a94362.js"),20);case 20:if(!(k=ka.yieldResult)){ka.jumpTo(21);break}return ka.yield(d().call(a),22);case 22:k=ka.yieldResult;case 21:return ka.return(k);case 3:return ka.yield(rb.import("./version container-5269e8d1.js"),
23);case 23:if(!(b=ka.yieldResult)){ka.jumpTo(24);break}return ka.yield(d().call(a),25);case 25:b=ka.yieldResult;case 24:return ka.return(b);case 4:return ka.yield(rb.import("./delete world prompt-47d160aa.js"),26);case 26:if(!(e=ka.yieldResult)){ka.jumpTo(27);break}return ka.yield(d().call(a),28);case 28:e=ka.yieldResult;case 27:return ka.return(e);case 5:return ka.yield(rb.import("./dark-91b2488e.js"),29);case 29:if(!(l=ka.yieldResult)){ka.jumpTo(30);break}return ka.yield(d().call(a),31);case 31:l=
ka.yieldResult;case 30:return ka.return(l);case 6:return ka.yield(rb.import("./lively top bar master-e6c80e4d.js"),32);case 32:if(!(p=ka.yieldResult)){ka.jumpTo(33);break}return ka.yield(d().call(a),34);case 34:p=ka.yieldResult;case 33:return ka.return(p);case 7:return ka.yield(rb.import("./version checker-93650cc5.js"),35);case 35:if(!(u=ka.yieldResult)){ka.jumpTo(36);break}return ka.yield(d().call(a),37);case 37:u=ka.yieldResult;case 36:return ka.return(u);case 8:return ka.yield(rb.import("./login widget-9f94b4e9.js"),
38);case 38:if(!(x=ka.yieldResult)){ka.jumpTo(39);break}return ka.yield(d().call(a),40);case 40:x=ka.yieldResult;case 39:return ka.return(x);case 9:return ka.yield(rb.import("./user info-c0155aca.js"),41);case 41:if(!(z=ka.yieldResult)){ka.jumpTo(42);break}return ka.yield(d().call(a),43);case 43:z=ka.yieldResult;case 42:return ka.return(z);case 10:return ka.yield(rb.import("./register widget-0d70a2e0.js"),44);case 44:if(!(E=ka.yieldResult)){ka.jumpTo(45);break}return ka.yield(d().call(a),46);case 46:E=
ka.yieldResult;case 45:return ka.return(E);case 11:return ka.yield(rb.import("./user menu master-5fd516c0.js"),47);case 47:if(!(G=ka.yieldResult)){ka.jumpTo(48);break}return ka.yield(d().call(a),49);case 49:G=ka.yieldResult;case 48:return ka.return(G);case 12:return ka.yield(rb.import("./scene graph side bar master-a69843ea.js"),50);case 50:if(!(J=ka.yieldResult)){ka.jumpTo(51);break}return ka.yield(d().call(a),52);case 52:J=ka.yieldResult;case 51:return ka.return(J);case 13:return ka.yield(rb.import("./styling side bar master-87fde65e.js"),
53);case 53:if(!(K=ka.yieldResult)){ka.jumpTo(54);break}return ka.yield(d().call(a),55);case 55:K=ka.yieldResult;case 54:return ka.return(K);case 14:return ka.yield(rb.import("./new color picker-e0d4ce01.js"),56);case 56:if(!(T=ka.yieldResult)){ka.jumpTo(57);break}return ka.yield(d().call(a),58);case 58:T=ka.yieldResult;case 57:return ka.return(T);case 15:return ka.yield(rb.import("./color stop-7a3825fd.js"),59);case 59:if(!(P=ka.yieldResult)){ka.jumpTo(60);break}return ka.yield(d().call(a),61);case 61:P=
ka.yieldResult;case 60:return ka.return(P);case 16:return ka.yield(rb.import("./project browser-847c01da.js"),62);case 62:if(!(da=ka.yieldResult)){ka.jumpTo(63);break}return ka.yield(d().call(a),64);case 64:da=ka.yieldResult;case 63:return ka.return(da);case 17:return ka.yield(rb.import("./world preview-03946818.js"),65);case 65:if(!(fa=ka.yieldResult)){ka.jumpTo(66);break}return ka.yield(d().call(a),67);case 67:fa=ka.yieldResult;case 66:return ka.return(fa);case 18:return ka.yield(d().call(a),68);
case 68:return ka.return(ka.yieldResult)}})};var Gza={name:"part",matches:function(a){return a.match(Fza)},resourceClass:WZ};ne("part");xe(Gza);var oQ=function(){return AF.apply(this,arguments)||this};$jscomp.inherits(oQ,AF);oQ.prototype.read=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(d=hd(System.baseURL),d.isFile()&&(d=d.parent()),k=d.join("masters/"),e.yield(a.fetchFromMasterDir(k,a.componentName),2)):3!=e.nextAddress?(b=e.yieldResult,
e.yield(a.resolveComponent(b),3)):e.return(e.yieldResult)})};$jscomp.global.Object.defineProperties(oQ.prototype,{worldName:{configurable:!0,enumerable:!0,get:function(){var a=this.url.match(Bfa);a=$jscomp.makeIterator(a);a.next();var d=a.next().value;a.next();return d}}});var Bfa=/^styleguide:\/\/([^\/]+)\/(.*)$/,Hza={name:"styleguide",matches:function(a){return a.match(Bfa)},resourceClass:oQ};ne("styleguide");xe(Hza);var B8=JSON.parse('{"id":"WorldLandingPage_3A7B332E_6077_4DFE_BCC0_80718E2509BE","snapshot":{"WorldLandingPage_3A7B332E_6077_4DFE_BCC0_80718E2509BE":{"rev":221140,"props":{"name":{"value":"world landing page"},"draggable":{"value":true},"grabbable":{"value":true},"reactsToPointer":{"value":false},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(65.60078124999927,36.453125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1003.0232101304723,594.571136205233)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"submorphs":{"value":[{"__ref__":true,"id":"Globe_3F6A7961_877E_4BA6_903E_4E4710ACEAF4","rev":2653}]},"clipMode":{"value":"hidden"},"styleClasses":{"value":["WorldLandingPage","Morph","morph"]},"installedFonts":{"value":{"__ref__":true,"id":"28338BC5-4626-4710-A09F-EDB3487A1DC7","rev":0}},"metadata":{"value":{"__ref__":true,"id":"D83E1F87-FC28-4C51-B53D-DF0CCB09A899","rev":0}},"loadingScreen":{"value":{"__ref__":true,"id":"HTMLMorph_6CDF4CF2_6686_4573_9886_DEB61CE98FEF","rev":2596}}},"lively.serializer-class-info":{"className":"WorldLandingPage","module":{"package":{"name":"PartialFreezing","version":"0.1.1-119"},"pathInPackage":"landing-page.js"}}},"Globe_3F6A7961_877E_4BA6_903E_4E4710ACEAF4":{"rev":2653,"props":{"attributeConnections":{"value":[{"__ref__":true,"id":"5C153ECA-90A9-4F1F-B6F5-547017DA8F9C","rev":0}]},"name":{"value":"globe"},"reactsToPointer":{"value":false},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(-1.2699218750001364,0.14453125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"submorphs":{"value":[{"__ref__":true,"id":"WebGLCanvas_D8669A05_B46D_4878_A031_8943FAF61A57","rev":2637},{"__ref__":true,"id":"Morph_A05F349E_2854_4EA0_94EE_EFB10180B971","rev":2651}]},"styleClasses":{"value":["Globe","Canvas","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0,0,0,1],"right":[0,0,0,1],"bottom":[0,0,0,1],"left":[0,0,0,1]}},"metadata":{"value":{"__ref__":true,"id":"5508D681-F315-420C-98ED-F44C29A0CFC1","rev":0}},"canvasExtent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508,971)"},"_serializedContents":{"value":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABeQAAAPLCAYAAAA+EomxAAAgAElEQVR4XuzYMQ0AAAgEMfBvGhXcVAx80jDdjiNAgAABAgQIECBAgAABAgQIECBAgAABAgTeBfZ9wQABAgQIECBAgAABAgQIECBAgAABAgQIECAwgrwnIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBG+p6dkAACAASURBVAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwf8D/nSQAAIABJREFUIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIHDt2DEJAAAAwzD/ruuiVxQMwq4SIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBBYNmpRAAAMNUlEQVQgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAQQrgDzJoZi3wAAAAASUVORK5CYII="}},"lively.serializer-class-info":{"className":"Globe","module":{"package":{"name":"Globe","version":"0.1.1-26"},"pathInPackage":"index.js"}}},"5C153ECA-90A9-4F1F-B6F5-547017DA8F9C":{"rev":0,"props":{"_rev":{"value":0},"doNotSerialize":{"value":["isActive","converter","updater"]},"sourceObj":{"value":{"__ref__":true,"id":"Globe_3F6A7961_877E_4BA6_903E_4E4710ACEAF4","rev":2653}},"sourceAttrName":{"value":"extent"},"targetObj":{"value":{"__ref__":true,"id":"Globe_3F6A7961_877E_4BA6_903E_4E4710ACEAF4","rev":2653}},"targetMethodName":{"value":"onExtentChanged"},"garbageCollect":{"value":true},"signalOnAssignment":{"value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.2"},"pathInPackage":"index.js"}}},"WebGLCanvas_D8669A05_B46D_4878_A031_8943FAF61A57":{"rev":2637,"props":{"attributeConnections":{"value":[{"__ref__":true,"id":"87F88CF4-1434-4D67-86F0-597A4C5596D3","rev":0}]},"name":{"value":"webgl canvas"},"reactsToPointer":{"value":false},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"styleClasses":{"value":["WebGLCanvas","Canvas","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"right":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"bottom":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"left":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1]}},"metadata":{"value":{"__ref__":true,"id":"41116A8E-C079-41BB-B744-746D7233E858","rev":0}},"contextType":{"value":"webgl"},"canvasExtent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508,971)"},"_serializedContents":{"value":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABeQAAAPLCAYAAAA+EomxAAAgAElEQVR4XuzYMQ0AAAgEMfBvGhXcVAx80jDdjiNAgAABAgQIECBAgAABAgQIECBAgAABAgTeBfZ9wQABAgQIECBAgAABAgQIECBAgAABAgQIECAwgrwnIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBG+p6dkAACAASURBVAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwf8D/nSQAAIABJREFUIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIHDt2DEJAAAAwzD/ruuiVxQMwq4SIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBBYNmpRAAAMNUlEQVQgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAQQrgDzJoZi3wAAAAASUVORK5CYII="},"fps":{"value":15}},"lively.serializer-class-info":{"className":"WebGLCanvas","module":{"package":{"name":"WebGLCanvas","version":"0.1.1-56"},"pathInPackage":"index.js"}}},"87F88CF4-1434-4D67-86F0-597A4C5596D3":{"rev":0,"props":{"_rev":{"value":0},"doNotSerialize":{"value":["isActive","converter","updater"]},"sourceObj":{"value":{"__ref__":true,"id":"WebGLCanvas_D8669A05_B46D_4878_A031_8943FAF61A57","rev":2637}},"sourceAttrName":{"value":"extent"},"targetObj":{"value":{"__ref__":true,"id":"WebGLCanvas_D8669A05_B46D_4878_A031_8943FAF61A57","rev":2637}},"targetMethodName":{"value":"relayout"},"garbageCollect":{"value":true},"signalOnAssignment":{"value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.2"},"pathInPackage":"index.js"}}},"41116A8E-C079-41BB-B744-746D7233E858":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"globe\\", _id: \\"5543f15ce9adfccb56c979db92d7b0d38398d6a8\\"})"}}},"Morph_A05F349E_2854_4EA0_94EE_EFB10180B971":{"rev":2651,"props":{"name":{"value":"cover"},"draggable":{"value":true},"grabbable":{"value":true},"reactsToPointer":{"value":false},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"3CFEF736-F195-4DCF-BE42-0A66EBFF8820","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"3CFEF736-F195-4DCF-BE42-0A66EBFF8820":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"44c59c7e6812baaed95b7a3660abcb246296e490\\"})"}}},"5508D681-F315-420C-98ED-F44C29A0CFC1":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"globe\\", _id: \\"f71e0d7aa02c9c874eba979fe444380bf583f9f2\\"})"}}},"28338BC5-4626-4710-A09F-EDB3487A1DC7":{"rev":0,"props":{"_rev":{"value":0},"Nunito":{"value":"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap"}}},"D83E1F87-FC28-4C51-B53D-DF0CCB09A899":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"world landing page\\", _id: \\"32298ca0ee3f234f9baca22b5b5759595d486064\\"})"},"publishedAlias":{"value":"dashboard"},"excludedPackages":{"value":["kld-intersections","lively.collab"]},"publishedLocation":{"value":"/lively.freezer/dashboard/"}}},"HTMLMorph_6CDF4CF2_6686_4573_9886_DEB61CE98FEF":{"rev":2596,"props":{"name":{"value":"loading screen"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0,25)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(485.34375,274.29296875)"},"styleClasses":{"value":["HTMLMorph","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"94C8D275-C382-4E79-A5BC-E1326F77B9E0","rev":0}},"html":{"value":"<div style=\\"position: fixed; z-index: 1; height: 100%; width: 100%; background-color: black\\">\\n  <div id=\\"loading-bar\\">\\n     <div id=\\"progress\\" style=\\"width: 100%;\\">\\n  </div>\\n</div></div>"},"cssDeclaration":{"value":"#loading-bar {\\n  height: 20px;\\n  width: 400px;\\n  color: gray;\\n  border-style: solid;\\n  border-color: gray;\\n  border-width: 2px;\\n  border-radius: 10px;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  overflow: hidden;\\n  margin: 0px 0 0 -202px;\\n}\\n\\n#progress {\\n  background-color: gray;\\n  height: 100%;\\n  animation: load 5s;\\n}\\n\\n@keyframes load {\\n  from { width: 0% }\\n  to { width: 100% }\\n}"}},"lively.serializer-class-info":{"className":"HTMLMorph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"html-morph.js"}}},"94C8D275-C382-4E79-A5BC-E1326F77B9E0":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"html-morph\\", _id: \\"3695da8ba64dd32d8645b4c1937b5d361e002bbc\\"})"}}}},"requiredVersion":">=0.1","packagesToRegister":[],"packageDepMap":{"local://lively-object-modules/PartialFreezing":["local://lively-object-modules/WorldVersionViewer"],"local://lively-object-modules/WorldVersionViewer":[],"local://lively-object-modules/Globe":[],"local://lively-object-modules/WebGLCanvas":[]}}');
lively.resources={resource:hd,loadViaScript:os};lively.morphic={loadMorphFromSnapshot:xr};Ma("bR",void 0)}}});