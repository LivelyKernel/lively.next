System.register("./__root_module__-cddb8267.js kld-intersections ./index-6d7025d7.js ./index-5e61fbf0.js ./index-51795659.js ./color-picker-3ee1bf1f.js ./editor-plugin-b03f3727.js ./index-d91b3b8e.js ./editor-plugin-0a2408b8.js ./index-5ddff150.js".split(" "),function(){var Ea,Cb,Kb,lc,$b,Qd,Zc,Rd,ad,Nc,nd,he,af,Af,rd,cc,Ic,Kd,Kc,Bd,be,yc,Cc,Pb,Dc,Xc,Cd,Od,Gb,sb,Bc,gb,rb,Sa,Ua,cb,ab,qb,Zb,kc,Rb,ma;return{setters:[function(Ia){Ea=Ia.aw;Cb=Ia.an;Kb=Ia.aC;lc=Ia.aa;$b=Ia.a3;Qd=Ia.ax;Zc=Ia.au;Rd=
Ia.aj;ad=Ia.C;Nc=Ia.a2;nd=Ia.a6;he=Ia.$;af=Ia.aY;Af=Ia.P;rd=Ia.a8;cc=Ia.aD;Ic=Ia.ap;Kd=Ia.aX;Kc=Ia.as;Bd=Ia.aq;be=Ia.ab;yc=Ia.bp;Cc=Ia.br;Pb=Ia.bQ;Dc=Ia.b4;Xc=Ia.bk;Cd=Ia.aP;Od=Ia.l;Gb=Ia.a1;sb=Ia.bR;Bc=Ia.aZ;gb=Ia.a_;rb=Ia.at;Sa=Ia.a4;Ua=Ia.aV;cb=Ia.av;ab=Ia.bS},function(){},function(){},function(){},function(Ia){qb=Ia.d;Zb=Ia.s;kc=Ia.I;Rb=Ia.M},function(){},function(Ia){ma=Ia.I},function(){},function(){},function(){}],execute:function(){function Ia(tb){var Sc=tb.sourceObj,vd=tb.targetObj;Sc.isMorph&&
vd.isMorph?(Sc.show(),vd.show(),td.showConnector&&td.showConnector(Sc,vd)):td.show(String(tb))}function W(tb){var Sc=tb.sourceObj,vd=tb.sourceAttrName,nb=tb.targetObj,vb=tb.targetMethodName,yb=tb.getConverter();tb=tb.getUpdater();return td.printConnectionElements(Sc,vd,nb,vb,yb,tb)}function sa(tb,Sc,vd,nb,vb,yb){tb="/* global connect, source, target */\nconnect(source, '"+Sc+"', target, '"+nb+"'";if(vb||yb)tb+=", {\n";vb&&(tb+="  converter: "+vb);vb&&yb&&(tb+=",");vb&&(tb+="\n");yb&&(tb+="  updater: "+
yb+"\n");if(vb||yb)tb+="}";return tb+");"}function Za(tb,Sc){var vd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(nb){if(1==nb.nextAddress)return nb.yield(td.InteractiveMorphSelector.selectMorph(),2);vd=nb.yieldResult;return nb.return(vd?td.interactiveConnectGivenSourceAndTarget(tb,Sc,vd):null)})}function mb(tb,Sc,vd,nb){var vb,yb,yd,ae,He;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fc){switch(Fc.nextAddress){case 1:vb=vd&&vd.world().targetDataBindings(vd);yb=tb.world();
if(!vb||!vb.length)return yb.setStatusMessage("connect canceled"),Fc.return();if(Sc){Fc.jumpTo(2);break}yd=[{isListItem:!0,string:"[Enter custom attribute..]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(td.arr.flatten(tb.world().targetDataBindings(tb)).map(function(oe){return{isListItem:!0,string:oe.signature||oe.name,value:oe}})));return Fc.yield(yb.listPrompt(["Select Source Attribute\n",{},"Choose the attribute of the morph that is supposed to invoke the connection. This can be a method, property or a custom signal that is invoked upon the morph.",
{paddingTop:"10px",fontSize:14,textAlign:"left",fontWeight:"normal"}],yd,{filterable:!0}),3);case 3:Sc=Fc.yieldResult;if("canceled"==Sc.status)return Fc.return();Sc=Sc.selected[0];Sc=Sc.custom?"sourceAttribute":Sc.name;case 2:return ae=[{isListItem:!0,string:"[Enter custom attribute...]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(td.arr.flatten(vb).map(function(oe){return{isListItem:!0,value:oe,string:oe.signature||oe.name}}))),Fc.yield(yb.listPrompt(["Select Target Attribute\n",{},"Choose the attribute of the morph that is supposed to invoked once the connection is triggered. This can be either a method or a property of the morph. When selecting a property, keep in mind that the value of the source attribute will be assigned to the property or passed to the method as an argument.",
{fontSize:14,textAlign:"left",fontWeight:"normal",paddingTop:"10px"}],ae,{filterable:!0}),4);case 4:He=Fc.yieldResult;if("canceled"==He.status)return Fc.return();He=He.selected[0];return Fc.yield(td.interactivelyEvaluateConnection({sourceObj:tb,sourceAttr:Sc,targetObj:vd,targetAttr:He.custom?"targetAttribute":He.name,onConnect:nb,prompt:"Edit and confirm connection:"}),0)}})}function rc(tb,Sc,vd,nb){Sc=void 0===Sc?"confirm connection":Sc;var vb,yb,yd,ae,He,Fc,oe;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ed){vb=
tb;yb=vb.sourceObj;yd=vb.sourceAttrName;ae=vb.targetObj;He=vb.targetMethodName;Fc=tb.getConverter();oe=tb.getUpdater();return ed.return(td.interactivelyEvaluateConnection({sourceObj:yb,sourceAttr:yd,targetObj:ae,targetAttr:He,converter:Fc,updater:oe,prompt:Sc,highlight:vd,onConnect:nb}))})}function xd(tb,Sc,vd,nb,vb){nb=void 0===nb?{}:nb;vb=td.rect(0).sides.concat(td.rect(0).corners);vd=vd||new td.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:td.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:td.Color.transparent,
nativeCursor:"auto"},end:{fill:td.Color.orange}}},nb,{hasFixedPosition:!0}));vd.startPoint.attachTo(tb,"rightCenter");Sc.isMorph?(nb=Sc.globalBounds().partNameNearest(vb,tb.globalPosition),tb.globalPosition.equals(Sc.globalBounds().partNamed(nb))&&Sc.globalBounds().partNameNearest(td.arr.without(vb,nb),tb.globalPosition),vd.endPoint.attachTo(Sc,"leftCenter")):(vb=tb.globalBounds().topRight().addPt(td.pt(100,0)),Sc=td.morph({type:"label",value:Sc.toString(),styleClasses:["Tooltip"],padding:td.rect(8,
4)}).openInWorld(vb),Sc.position=tb.world().bounds().translateForInclusion(Sc.bounds()).topLeft(),td.once(vd,"remove",Sc,"remove"),vd.endPoint.attachTo(Sc,"leftCenter"));return vd}function sc(tb){var Sc,vd,nb,vb,yb,yd,ae,He,Fc,oe,ed,te,wa,fb,Va,ob,P,ua,bb,Nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ic){switch(ic.nextAddress){case 1:Sc=tb;vd=Sc.sourceObj;nb=Sc.sourceAttr;vb=Sc.targetObj;yb=Sc.targetAttr;yd=Sc.converter;ae=Sc.updater;He=Sc.prompt;Fc=void 0===Sc.highlight?!0:Sc.highlight;
oe=Sc.onConnect;ed="lively://lively.bindings-interactive-connect/x"+vd.id;te={context:window,format:"esm",targetModule:ed,classTransform:td.classToFunctionTransform};wa=td.printConnectionElements(vd,nb,vb,yb,yd,ae);vb.isMorph&&vd.isMorph&&(fb=vb.propertiesAndPropertySettings().properties[yb]||{type:typeof vb[yb]},Va=fb.type,ob=vd.propertiesAndPropertySettings().properties[nb]||{type:typeof vd[nb]},P=ob.type,P!==Va&&(He="Edit and confirm connection:"));ua={};Object.assign(lively.modules.module(ed).recorder,
(ua.source=vd,ua.target=vb,ua.connect=Zc,ua.once=Rd,ua[nb]=vd[nb],ua));if(!He){bb=wa;ic.jumpTo(2);break}return ic.yield($world.editPrompt(He,{input:wa,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:te,animated:!1}),3);case 3:if(bb=ic.yieldResult,!bb)return $world.setStatusMessage("connect canceled"),ic.return();case 2:return ic.yield(lively.vm.runEval(bb,te),4);case 4:Nb=ic.yieldResult;if(Nb.isError)return $world.logError(Nb.value),ic.return(sc({sourceObj:vd,
sourceAttr:nb,targetObj:vb,targetAttr:yb,converter:yd,updater:ae,prompt:"confirm connection",highlight:Fc,onConnect:oe}));Fc&&($world.setStatusMessage("connected!",td.Color.green),td.interactivelyShowConnection(Nb.value));"function"===typeof oe&&oe(Nb);ic.jumpToEnd()}})}var Na=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");Na.Inspector=ma;var Xd=function(tb){var Sc=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),vd=Sc.hasOwnProperty("ProtoInspector")&&"function"===typeof Sc.ProtoInspector?
Sc.ProtoInspector:Sc.ProtoInspector=function(nb){nb&&nb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ea(vd,tb,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Sc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(Na.Inspector);Xd=Na.ProtoInspector;Na.default=Xd;var Gd=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");Gd.Morph=Cb;Gd.touchInputDevice=Kb;Gd.easings=lc;Gd.pt=$b;Gd.fun=Qd;Gd.connect=Zc;Na=function(tb){var Sc=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),vd=Sc.hasOwnProperty("MorphicSideBar")&&"function"===typeof Sc.MorphicSideBar?Sc.MorphicSideBar:Sc.MorphicSideBar=function(nb){nb&&
nb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ea(vd,tb,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",value:function(nb){nb=void 0===nb?!0:nb;if(this.respondsToVisibleWindow){var vb=$world.visibleBounds(),yb=navigator.standalone&&Gd.touchInputDevice?25:0;this.height=vb.height-yb;this.top=yb+vb.top();yb=this.get("horizontal resizer");yb.height=this.height;yb.top=0;nb&&(this.visible?this.topLeft=
vb.topLeft():this.topRight=vb.topLeft())}}},{key:"switchMode",value:function(nb){"inspector"==nb&&this.showInspector();"connections"==nb&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(nb){var vb=this,yb,yd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ae){switch(ae.nextAddress){case 1:yb=
$world.visibleBounds();yd=navigator.standalone&&Gd.touchInputDevice?25:0;vb.height=yb.height-yd;vb.top=yd+yb.top();if(nb)return $world.addMorph(vb,$world.get("lively top bar")),vb.topRight=yb.topLeft(),vb.attachToWorld($world),vb.visible=!0,ae.yield(vb.whenRendered(),5);vb.detachFromWorld($world);return ae.yield(vb.animate({opacity:0,topRight:yb.topLeft(),duration:300}),4);case 4:vb.visible=!1;vb.remove();ae.jumpTo(0);break;case 5:return vb.onWorldResize(!1),vb.get("scene graph").adjustProportions(),
ae.yield(vb.animate({opacity:1,easing:Gd.easings.outCirc,topLeft:yb.topLeft(),duration:300}),6);case 6:vb.get("scene graph").refresh(),ae.jumpToEnd()}})}},{key:"attachToWorld",value:function(nb){Gd.connect(nb,"onChange",this,"onHierarchyChange",{garbageCollect:!0});Gd.connect(nb,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});Gd.connect(nb,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(nb){var vb=this;nb.attributeConnections.forEach(function(yb){yb.targetObj===
vb&&yb.disconnect()})}},{key:"selectNode",value:function(nb){this.getSubmorphNamed("scene graph").selectMorphInTarget(nb);this.getSubmorphNamed("connections tree").inspectConnectionsOf(nb)}},{key:"onHierarchyChange",value:function(nb){var vb=this,yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yd){if("addMorphAt"===nb.selector||"removeMorph"===nb.selector||"name"===nb.prop){yb=vb._sceneGraph||(vb._sceneGraph=vb.getSubmorphNamed("scene graph"));if(!yb||!yb.owner.visible||nb.target&&
nb.target.isHand||nb.target&&yb.ignoreMorph(nb.target)||nb.args&&!nb.args[0].isHalo&&yb.ignoreMorph(nb.args[0])||nb.target.ownerChain().find(function(ae){return yb.ignoreMorph(ae)}))return yd.return();Gd.fun.debounceNamed("scene-graph-update",50,function(){return yb.refresh()})()}yd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],Sc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-76"}}},{start:226,end:3668})}(Gd.Morph);Na=Gd.MorphicSideBar;Gd.default=Na;var td=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");td.interactivelyShowConnection=Ia;td.printConnection=W;td.printConnectionElements=sa;td.interactiveConnectGivenSource=Za;td.interactiveConnectGivenSourceAndTarget=
mb;td.interactivelyReEvaluateConnection=rc;td.visualizeConnection=xd;td.interactivelyEvaluateConnection=sc;td.connect=Zc;td.once=Rd;td.Color=ad;td.rect=Nc;td.pt=$b;td.arr=nd;td.promise=he;td.properties=af;td.Path=Af;td.obj=rd;td.HorizontalLayout=cc;td.Morph=Cb;td.VerticalLayout=Ic;td.StyleSheet=Kd;td.Icon=Kc;td.GridLayout=Bd;td.morph=be;td.TreeData=yc;td.Tree=Cc;td.Leash=Pb;td.LabeledCheckBox=Dc;td.SearchField=Xc;td.showConnector=qb;td.show=Zb;td.InteractiveMorphSelector=kc;td.MorphHighlighter=Rb;
td.Window=Cd;td.classToFunctionTransform=Od;td.interactivelyShowConnection=Ia;td.interactivelyShowConnection=Ia;td.printConnection=W;td.printConnection=W;td.printConnectionElements=sa;td.printConnectionElements=sa;td.interactiveConnectGivenSource=Za;td.interactiveConnectGivenSource=Za;td.interactiveConnectGivenSourceAndTarget=mb;td.interactiveConnectGivenSourceAndTarget=mb;td.interactivelyReEvaluateConnection=rc;td.interactivelyReEvaluateConnection=rc;td.visualizeConnection=xd;td.visualizeConnection=
xd;td.interactivelyEvaluateConnection=sc;td.interactivelyEvaluateConnection=sc;var Ib=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");Ib.Tree=Cc;Ib.TreeData=yc;Ib.morph=be;Ib.Icon=Kc;Ib.HorizontalLayout=cc;Ib.easings=lc;Ib.Morph=Cb;Ib.Color=ad;Ib.Rectangle=Gb;Ib.rect=Nc;Ib.pt=$b;Ib.connect=Zc;Ib.noUpdate=sb;Ib.disconnect=Bc;Ib.disconnectAll=gb;Ib.once=Rd;Ib.arr=nd;Ib.num=rb;Ib.fun=Qd;Ib.tree=Sa;Ib.promise=he;Ib.ConnectionHalo=_missingExportShim;Ib.getClassName=Ua;Na=function(tb){var Sc=
lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),vd=Sc.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof Sc.InteractiveTreeContainer?Sc.InteractiveTreeContainer:Sc.InteractiveTreeContainer=function(nb){nb&&nb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ea(vd,tb,[{key:"onChildRemoved",value:function(nb){}},{key:"onChildAdded",value:function(nb){}},{key:"toggleSelected",value:function(nb){if(this.tree){var vb=
this.tree,yb=vb.selectionFontColor,yd=vb.nonSelectionFontColor;this.submorphs.filter(function(ae){return!ae._isControlElement&&ae.styleClasses.includes("Label")}).forEach(function(ae){ae.fontColor=nb?yb:yd})}}},{key:"onGrab",value:function(nb){var vb=this.tree,yb=this.node;this.fill=Ib.Color.gray.withA(.5);this.fontColor=vb.selectionFontColor;this.opacity=.8;Ea._get(Object.getPrototypeOf(vd.prototype),"onGrab",this).call(this,nb);yb&&(this.toggleSelected(!1),vb.collapse(yb),vb.treeData.parentNode(yb).container.onChildRemoved(this),
this._data=vb.treeData.remove(yb),yb.container.target.remove(),vb.update(!0))}},{key:"wantsToBeDroppedOn",value:function(nb){this.showPreviewOn(nb);return!0}},{key:"showPreviewOn",value:function(nb){if(nb.isContainer)var vb=nb.tree;nb.isTree&&(vb=nb);vb&&vb.showDropPreviewFor&&vb.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(nb){var vb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yb){if(1==yb.nextAddress)return vb.tree.treeData.add(nb._data,vb.node,vb.node.children[0]),
vb.tree.uncollapse(vb.node),vb.tree.treeData.remove(vb.tree._previewNode),yb.yield(vb.tree.whenRendered(),2);vb.tree.update(!0);vb.onChildAdded(nb);yb.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(nb,vb){var yb=this;debugger;this.tree._dropInProgress=!0;Ea._get(Object.getPrototypeOf(vd.prototype),"onBeingDroppedOn",this).call(this,nb,vb);nb=function(){yb.fill=Ib.Color.gray.withA(.5);yb.opacity=1;yb.tree._dropInProgress=!1;yb.tree.refresh()};vb.isTree?vb.insertAtPlaceholder(this).then(nb):
vb.isContainer?vb.insertAsChild(this).then(nb):nb()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:Ib.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var nb=this,vb=this.tree.treeData;return vb&&vb.asList().find(function(yb){return yb.container===nb})}}}}}],Sc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1103"}}},{start:498,end:2975})}(Ib.Morph);Ib.InteractiveTreeContainer=Na;Ib.InteractiveTreeContainer=Na;Ib.InteractiveTreeContainer=Na;Na=function(tb){var Sc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),vd=Sc.hasOwnProperty("InteractiveTreeData")&&"function"===typeof Sc.InteractiveTreeData?Sc.InteractiveTreeData:Sc.InteractiveTreeData=function(nb){nb&&
nb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ea(vd,tb,[{key:"display",value:function(nb){return[nb.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(nb){return nb.isCollapsed}},{key:"collapse",value:function(nb,vb){nb.isCollapsed=vb}},{key:"getChildren",value:function(nb){var vb=this;return nb.isLeaf?null:nb.children.filter(function(yb){return yb&&(vb.filterActive?yb.visible:!0)})}},{key:"isLeaf",value:function(nb){var vb=
this;return!nb.children||0==nb.children.filter(function(yb){return yb&&(vb.filterActive?yb.visible:!0)}).length}},{key:"add",value:function(nb,vb,yb){vb=void 0===vb?this.root:vb;vb.children||(vb.children=[]);yb?Ib.arr.pushAt(vb.children,nb,vb.children.indexOf(yb)):vb.children.push(nb);vb.isLeaf=!1}},{key:"replace",value:function(nb,vb){var yb=this.parentNode(nb);nb=yb.children.indexOf(nb);yb.children[nb]=vb}},{key:"next",value:function(nb){var vb=this.parentNode(nb);return vb&&vb.children[vb.children.indexOf(nb)+
1]}},{key:"isBefore",value:function(nb,vb){this.next(nb)===vb}},{key:"isAfter",value:function(nb,vb){this.next(vb)===nb}},{key:"addBefore",value:function(nb,vb){this.add(nb,this.parentNode(vb),vb)}},{key:"addAfter",value:function(nb,vb){var yb=this.parentNode(vb);vb=yb.children.indexOf(vb)+1;this.add(nb,yb,yb.children[vb])}},{key:"remove",value:function(nb){var vb=this.parentNode(nb);if(vb)return Ib.arr.remove(vb.children,nb),vb.children==[]&&(vb.children=null),nb}},{key:"filter",value:function(nb,
vb){vb=void 0===vb?1:vb;var yb=this,yd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ae){if(1==ae.nextAddress)return ae.yield(yb.uncollapseAll(function(He,Fc){return Fc<vb+1}),2);yd=yb.filterActive;yb.filterActive=!1;yb.asListWithIndexAndDepth(!1).reverse().forEach(function(He){var Fc=He.node;if(0==He.depth)return Fc.visible=!0;Fc.visible=nb(Fc);Fc.visible||Fc.isCollapsed||!Fc.children.find(function(oe){return oe.visible})?Fc.container.opacity=1:(Fc.visible=!0,Fc.container.opacity=.5);
return Fc.visible});yb.filterActive=yd;ae.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],Sc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1103"}}},{start:2984,end:5441})}(Ib.TreeData);Ib.InteractiveTreeData=Na;Ib.InteractiveTreeData=Na;Ib.InteractiveTreeData=
Na;Na=function(tb){var Sc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),vd=Sc.hasOwnProperty("InteractiveTree")&&"function"===typeof Sc.InteractiveTree?Sc.InteractiveTree:Sc.InteractiveTree=function(nb){nb&&nb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ea(vd,tb,[{key:"update",value:function(nb){var vb=this;Ea._get(Object.getPrototypeOf(vd.prototype),"update",this).call(this,nb);this.treeData&&this.relayoutContainers();
nb&&this.embeddedMorphs.forEach(function(yb){yb.isContainer&&(yb.fill=Ib.Color.transparent,yb.fontFamily=vb.fontFamily,yb.fontSize=vb.fontSize)})}},{key:"onDrop",value:function(nb){Ea._get(Object.getPrototypeOf(vd.prototype),"onDrop",this).call(this,nb);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(nb){}},{key:"onDropHoverUpdate",value:function(nb){}},{key:"onDropHoverOut",value:function(nb){}},{key:"onHoverOut",value:function(nb){var vb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yb){Ea._get(Object.getPrototypeOf(vd.prototype),
"onHoverOut",vb).call(vb,nb);vb._previewNode&&vb._previewNode.container.world()&&vb.treeData.remove(vb._previewNode);vb.resetContainerSelection();vb.update(!0);yb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(nb){var vb=this,yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yd){if(1==yd.nextAddress)return yb=vb.treeData.parentNode(vb._previewNode),vb.treeData.replace(vb._previewNode,nb._data),vb.treeData.remove(vb._previewNode),yd.yield(vb.whenRendered(),2);vb.update(!0);
yb.container.onChildAdded(nb);yd.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var nb=this;if(!this._scrollingUp){this._scrollingUp=!0;var vb=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(yb){if(1==yb.nextAddress)return nb._scrollingUp&&0<nb.scroll.y?yb.yield(nb.animate({scroll:nb.scroll.subXY(0,30),duration:300,easing:Ib.easings.linear}),3):(nb._scrollingUp=!1,yb.jumpTo(0));vb();yb.jumpToEnd()})};vb()}}},{key:"scrollDownSlowly",value:function(){var nb=this;if(!this._scrollingDown){this._scrollingDown=
!0;var vb=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(yb){if(1==yb.nextAddress)return nb._scrollingDown&&nb.scroll.y<nb.scrollExtent.y-nb.height?yb.yield(nb.animate({scroll:nb.scroll.addXY(0,30),duration:300,easing:Ib.easings.linear}),3):(nb._scrollingDown=!1,yb.jumpTo(0));vb();yb.jumpToEnd()})};vb()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(nb){nb.isContainer&&
(nb.fill=Ib.Color.transparent)})}},{key:"showDropPreviewFor",value:function(nb){var vb=this;nb=this.localize(nb.globalBounds().center());var yb=this.textPositionFromPoint(nb),yd=this.treeData.asListWithIndexAndDepth(function(te){te=te.node;return te!=vb._previewNode&&te.container.world()}),ae=(yd.find(function(te){return te.i-1===yb.row})||{}).node,He=ae&&ae.container,Fc=this.ensurePlaceholder(),oe=!!Fc.container.world(),ed=nb.subPt(this.scroll).subPt(this.scrollbarOffset);10>ed.y?this.scrollUpSlowly():
ed.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!He){if(yd.length>yb.row||Ib.arr.last(this.treeData.root.children)===Fc)return;this.treeData.remove(Fc);this.treeData.add(Fc);this.update(!0)}if(He){yd=this.textLayout.boundsFor(this,yb);if(4>Math.abs(yd.top()-nb.y)){if(this.treeData.isBefore(Fc,ae))return;this.treeData.remove(Fc);this.treeData.addBefore(Fc,ae)}else if(4>Math.abs(yd.bottom()-nb.y)&&(ae.isCollapsed||this.treeData.isLeaf(ae))){if(this.treeData.isAfter(Fc,
ae))return;this.treeData.remove(Fc);this.treeData.addAfter(Fc,ae)}else{He.fill=Ib.Color.gray;if(!oe)return;this.treeData.remove(Fc)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var nb=Ib.pt(this.width-100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:Ib.morph({acceptsDrops:!1,reactsToPointer:!1,fill:Ib.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=nb;return this._previewNode}},{key:"relayoutContainers",
value:function(){var nb=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(vb){return vb.height});this.treeData.asListWithIndexAndDepth().forEach(function(vb){var yb=vb.node;vb=vb.i;yb.container.nativeCursor="grab";yb.container.width=nb.width-25-yb.container.left;yb.container.toggleSelected&&yb.container.toggleSelected(vb==nb.selectedIndex)});this.anchors.forEach(function(vb){return vb.position=vb.position})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"InteractiveTree"}}],Sc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1103"}}},{start:5450,end:10824})}(Ib.Tree);Ib.InteractiveTree=Na;Ib.InteractiveTree=Na;Ib.InteractiveTree=Na;Na=function(tb){var Sc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),vd=Sc.hasOwnProperty("SceneGraphTree")&&
"function"===typeof Sc.SceneGraphTree?Sc.SceneGraphTree:Sc.SceneGraphTree=function(nb){nb&&nb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ea(vd,tb,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(nb){var vb=this.treeData.asList().find(function(yb){return yb.container.target===nb});vb&&this.selectedNode!=vb&&this.selectPath(this.treeData.pathOf(vb))}},{key:"onLoad",
value:function(){var nb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vb){if(1==vb.nextAddress){if(nb.ownerChain().find(function(yb){return yb.isComponent}))return vb.return();nb.submorphs=[];return vb.yield(nb.whenRendered(),2)}nb.get("inspector").makeEditorVisible(!0);nb.get("inspector").makeEditorVisible(!1);nb.setTarget($world);vb.jumpToEnd()})}},{key:"adjustProportions",value:function(nb){nb=(nb?nb.state.dragDelta:{y:0}).y;var vb=this.get("inspector"),yb=this.get("scene graph resizer"),
yd=this.get("mode selector"),ae=this.get("connections tree");this.height+=nb;vb.height-=nb;ae.height-=nb;yb.top=this.bottom;yb.left=0;yd.top=yb.bottom;ae.top=vb.top=yd.bottom+5}},{key:"reset",value:function(){var nb=this;this.treeData=new Ib.InteractiveTreeData({children:[],container:Ib.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(vb){return null==vb.id}).forEach(function(vb){return nb.removeAnchor(vb)})}},{key:"setTarget",value:function(nb){this.target=
nb;this.treeData=this.getTreeFromSubmorphHierarchy(nb);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(nb){var vb=this;if(nb===this._previewNode)return!1;if(nb.container.nameNeedsUpdate)return!0;var yb=nb.container.target.submorphs.filter(function(yd){return!vb.ignoreMorph(yd)});return yb.length!=nb.children.length||yb.map(function(yd){return yd.name}).join("")!=nb.children.map(function(yd){return yd.target?yd.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(nb){var vb=
this,yb=nb.container.target.submorphs.map(function(oe){return oe.__scene_graph_target__?oe.__scene_graph_target__():oe}).filter(function(oe){return!vb.ignoreMorph(oe)}),yd=[],ae={},He;for(He in yb){ae.$jscomp$loop$prop$m$2543=yb[He];var Fc=Ib.arr.without(nb.children,this._previewNode).find(function(oe){return function(ed){return ed.container.target.id==oe.$jscomp$loop$prop$m$2543.id}}(ae));yd[He]=Fc?Fc:this.readMorphHierarchy(ae.$jscomp$loop$prop$m$2543);ae={$jscomp$loop$prop$m$2543:ae.$jscomp$loop$prop$m$2543}}return yd}},
{key:"refresh",value:function(){var nb=this;if(!this._updating&&!this._dropInProgress){var vb=!1;Ib.tree.prewalk(this.treeData.root,function(yb){nb.isNodeOutOfSync(yb)&&(vb=!0,yb.name=yb.container.target.name,yb.container.refresh(),yb.children=nb.getNewChildren(yb))},function(yb){return yb.children});this.update(vb)}}},{key:"ignoreMorph",value:function(nb){return nb.isMorph?nb.isContainer||nb.isWindow||nb.getWindow()||nb.isEpiMorph||nb.isHand||["lively.halos"].includes(nb.constructor[Symbol.for("lively-module-meta")].package.name)||
["MorphicSideBar","SideBarToggler","UserFlap","Menu"].includes(nb.constructor.name):!1}},{key:"onDropHoverOut",value:function(nb){var vb=nb.hand.grabbedMorphs[0];nb=nb.hand.findDropTarget();if(!(nb===this||nb&&nb.ownerChain().includes(this))&&vb&&vb.isContainer)vb.onDragOutside()}},{key:"onDropHoverIn",value:function(nb){var vb=nb.hand.grabbedMorphs[0];vb&&!vb.isContainer&&($world.halos().forEach(function(yb){return yb.remove()}),vb.remove(),Object.assign(vb,nb.hand._grabbedMorphProperties.get(vb).pointerAndShadow),
vb=this.renderContainerFor(vb,!1),nb.hand.grab(vb),vb.leftCenter=Ib.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(nb){return new Ib.InteractiveTreeData(this.readMorphHierarchy(nb))}},{key:"readMorphHierarchy",value:function(nb){var vb=this;return Ib.tree.mapTree(nb,function(yb,yd){return{name:yb.name,isCollapsed:!0,container:vb.renderContainerFor(yb),visible:!0,children:yd}},function(yb){return yb.submorphs.filter(function(yd){return yb.isWorld?!vb.ignoreMorph(yd):!0})})}},{key:"renderContainerFor",
value:function(nb,vb){nb=void 0===nb?Ib.morph({name:"root"}):nb;vb=new Ib.MorphContainer({tree:this,fill:void 0===vb||vb?Ib.Color.transparent:Ib.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:nb,opacity:nb.visible?1:.5});nb._data?(vb._data=nb._data,nb._data.container=vb):vb._data={name:nb.name,isCollapsed:!0,container:vb,children:[]};return vb}},{key:"collapseAll",value:function(){var nb=this;this.treeData.asList().forEach(function(vb){return vb!=nb.treeData.root?
vb.isCollapsed=!0:vb.isCollapsed=!1})}},{key:"filterMorphs",value:function(nb){var vb=this,yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yd){if(1==yd.nextAddress)return yb=nb.tokens[0],vb.treeData.filterActive||(vb._collapseState=new WeakMap(vb.treeData.asList().map(function(ae){return[ae,ae.isCollapsed]}))),vb.treeData.filterActive=!!yb,yd.yield(vb.treeData.filter(function(ae){var He=!yb||ae.container.target.name.includes(yb);ae.container.highlightTerm(yb);return He},3),2);vb.treeData.filterActive||
vb.treeData.asList().forEach(function(ae){return ae.isCollapsed=vb._collapseState.has(ae)?vb._collapseState.get(ae):!0});vb.refresh();yd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],Sc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1103"}}},{start:10833,end:17410})}(Ib.InteractiveTree);Ib.SceneGraphTree=Na;Ib.SceneGraphTree=Na;Ib.SceneGraphTree=Na;Na=function(tb){var Sc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),vd=Sc.hasOwnProperty("MorphContainer")&&"function"===typeof Sc.MorphContainer?Sc.MorphContainer:Sc.MorphContainer=function(nb){nb&&nb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ea(vd,tb,[{key:"refresh",value:function(){var nb=
this,vb,yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yd){vb=nb.target;if(!vb)return yd.return();nb.reactsToPointer=!0;nb.dropShadow=!1;nb.submorphs=[nb.getLabel(),vb.layout&&nb.getLayoutControls(),nb.getConnectionControls()].filter(Boolean).map(function(ae,He){ae.fitIfNeeded();ae.left=yb?yb.right+5:0;ae.top=2;return yb=ae});nb.height=20;nb.opacity=vb.visible?1:.5;yd.jumpToEnd()})}},{key:"getLabel",value:function(){var nb=this.getSubmorphNamed("name label")||Ib.morph({type:"label",
name:"name label",reactsToPointer:!1,padding:Ib.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),vb=nb.textString.slice(2,-1);vb&&vb==this.target.name||(nb.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return nb}},{key:"getIcon",value:function(nb){return Ib.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[Ib.getClassName(nb)]||
"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var nb=this.getSubmorphNamed("layout label")||Ib.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:Ib.Rectangle.inset(4,2,4,2),fill:Ib.Color.orange,fontColor:Ib.Color.white});nb._isControlElement=!0;nb.textString!=this.target.layout.name()&&(nb.value=this.target.layout.name());return nb}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(yb){return!yb.targetObj.isHalo}).length:0;var nb=this.getSubmorphNamed("connections label")||Ib.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:Ib.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:Ib.Color.red,fontColor:Ib.Color.white});nb._isControlElement=!0;nb.visible=!this.connectionHalo&&!!this.connectionCount;var vb=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";nb.textString!=vb&&(nb.value=vb);return nb}},{key:"highlightTerm",value:function(nb){var vb=this.submorphs[0],yb=vb.textAndAttributes.slice(0,2),yd=vb.textString.slice(1).split(nb);vb.textAndAttributes=1===yd.length?[].concat($jscomp.arrayFromIterable(yb),[yd[0]]):[].concat($jscomp.arrayFromIterable(yb),$jscomp.arrayFromIterable(Ib.arr.flatten(Ib.arr.interpose(yd.map(function(ae){return[ae,{}]}),[nb,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(nb){var vb=Ea._get(Object.getPrototypeOf(vd.prototype),"wantsToBeDroppedOn",this).call(this,nb);if(![nb].concat($jscomp.arrayFromIterable(nb.ownerChain())).includes(this.tree))this.onDragOutside();return vb}},{key:"onGrab",value:function(nb){var vb=this,yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yd){if(1==yd.nextAddress)return vb.tree._dropInProgress=!0,yb=vb.target.globalPosition,Ea._get(Object.getPrototypeOf(vd.prototype),
"onGrab",vb).call(vb,nb),vb._data.globalTargetPosition=yb,yd.yield(vb.whenRendered(),2);if(vb.tree.fullContainsWorldPoint(vb.globalPosition))vb.leftCenter=Ib.pt(-20,0);else vb.onDragOutside();vb.tree._dropInProgress=!1;yd.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=Ib.fun.createQueue("container-hover-queue",function(nb,vb){var yb,yd,ae;return $jscomp.asyncExecutePromiseGeneratorProgram(function(He){if(1==He.nextAddress)return yb=
nb.target,yd=yb.opacity,ae=yb.scale,nb.target.opacity=0,nb.target.scale=.5,$world.halos().forEach(function(Fc){return Fc.remove()}),$world.firstHand.grab(nb.target),nb.target._data=nb._data,nb.remove(),nb.target.position=Ib.pt(0,0),He.yield(nb.target.animate({opacity:yd,scale:ae,duration:200}),2);vb();He.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(nb){var vb=this.node.children.indexOf(nb.node||nb._data)+1;vb=this.node.children[vb];nb.target.remove();vb?(vb=this.target.submorphs.indexOf(vb.container.target),
this.target.addMorphAt(nb.target,vb)):this.target.addMorph(nb.target);nb._data.globalTargetPosition&&(nb.target.position=this.target.localize(nb._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(nb){}},{key:"toggleConnectionControl",value:function(nb){this.getSubmorphNamed("connections label").visible=nb}},{key:"toggleSelected",value:function(nb){var vb=this,yb,yd,ae;return $jscomp.asyncExecutePromiseGeneratorProgram(function(He){if(1==He.nextAddress)return Ea._get(Object.getPrototypeOf(vd.prototype),
"toggleSelected",vb).call(vb,nb),vb._active===nb?He.return():(vb._active=nb)&&vb.target&&vb.target.isMorph&&vb.world()?He.yield(vb.target.whenRendered(),3):He.jumpTo(0);vb.get("inspector").targetObject=vb.target;vb.get("connections tree").inspectConnectionsOf(vb.target);if(vb.connectionHalo)return He.return();yb=$jscomp.makeIterator(vb.world().halos());for(yd=yb.next();!yd.done;yd=yb.next()){ae=yd.value;if(ae.target===vb.target)return He.return();ae.remove()}Ib.noUpdate({sourceObj:vb.world(),targetObj:vb.sideBar,
sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return vb.world().showHaloFor(vb.target)});He.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(nb){this.submorphs[0].fontFamily=nb}},fontColor:{after:["submorphs"],derived:!0,set:function(nb){this.submorphs[0].fontColor=nb}},fontSize:{derived:!0,set:function(nb){this.submorphs[0].fontSize=
nb}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],Sc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1103"}}},{start:17420,end:25092})}(Ib.InteractiveTreeContainer);Ib.MorphContainer=Na;Ib.MorphContainer=Na;Ib.MorphContainer=Na;var jc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");jc.visualizeConnection=function(tb,Sc,vd,nb,vb){nb=void 0===nb?{}:nb;vb=jc.rect(0).sides.concat(jc.rect(0).corners);
vd=vd||new jc.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:jc.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:jc.Color.transparent,nativeCursor:"auto"},end:{fill:jc.Color.orange}}},nb,{hasFixedPosition:!0}));vd.startPoint.attachTo(tb,"rightCenter");Sc.isMorph?(nb=Sc.globalBounds().partNameNearest(vb,tb.globalPosition),tb.globalPosition.equals(Sc.globalBounds().partNamed(nb))&&Sc.globalBounds().partNameNearest(jc.arr.without(vb,nb),tb.globalPosition),vd.endPoint.attachTo(Sc,
"leftCenter")):(vb=tb.globalBounds().topRight().addPt(jc.pt(100,0)),Sc=jc.morph({type:"label",value:Sc.toString(),styleClasses:["Tooltip"],padding:jc.rect(8,4)}).openInWorld(vb),Sc.position=tb.world().bounds().translateForInclusion(Sc.bounds()).topLeft(),jc.once(vd,"remove",Sc,"remove"),vd.endPoint.attachTo(Sc,"leftCenter"));return vd};jc.startConnecting=function(tb,Sc){tb.animate({opacity:.8,duration:300});tb.startPoint.attachTo(Sc,"center");tb.vertices[0].position=jc.pt(2,2)};jc.stopConnecting=
function(tb,Sc,vd,nb){function vb(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(He){if(1==He.nextAddress)return He.yield(tb.animate({opacity:0,duration:300}),2);tb.startPoint.clearConnection();tb.endPoint.clearConnection();tb.remove();He.jumpToEnd()})}nb=void 0===nb?!1:nb;var yb,yd,ae;return $jscomp.asyncExecutePromiseGeneratorProgram(function(He){return 1==He.nextAddress?(yb=tb,yd=yb.endPoint,(ae=yd.connectedMorph)&&"MorphContainer"==ae.constructor.className&&(ae=ae.target),ae?He.yield(jc.interactiveConnectGivenSourceAndTarget(vd,
nb,ae),2):He.jumpTo(2)):He.yield(vb(),0)})};jc.editConnection=function(tb){var Sc=tb.connection,vd=tb.connectionPoint,nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vb){if(1==vb.nextAddress)return nb=jc.visualizeConnection(vd,Sc.targetObj,!1,{borderColor:jc.Color.gray.darker(),endpointStyle:{start:{fill:jc.Color.transparent,nativeCursor:"auto"},end:{fill:jc.Color.gray.darker()}}}),vb.yield(jc.interactivelyReEvaluateConnection(Sc,"Edit Connection",!1),2);nb.remove();vb.jumpToEnd()})};
jc.Tree=Cc;jc.TreeData=yc;jc.Icon=Kc;jc.morph=be;jc.pt=$b;jc.Rectangle=Gb;jc.rect=Nc;jc.Color=ad;jc.arr=nd;jc.connect=Zc;jc.signal=cb;jc.Leash=Pb;jc.once=ab;jc.interactivelyReEvaluateConnection=rc;jc.interactiveConnectGivenSource=Za;jc.interactiveConnectGivenSourceAndTarget=mb;(function(tb){var Sc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),vd=Sc.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof Sc.ConnectionsTreeData?Sc.ConnectionsTreeData:Sc.ConnectionsTreeData=function(nb){nb&&
nb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ea(vd,tb,[{key:"parseMorphConnections",value:function(nb){for(var vb={},yb=$jscomp.makeIterator(void 0===nb.attributeConnections?[]:nb.attributeConnections),yd=yb.next();!yd.done;yd=yb.next())yd=yd.value,yd.targetObj.isHalo||(vb[yd.sourceAttrName]=vb[yd.sourceAttrName]||[{name:["      New Connection  ",{fontColor:jc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(nb,yd.sourceAttrName),
{}]}],jc.arr.pushAt(vb[yd.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(yd)))},0));return{children:Object.entries(vb).map(function(ae){var He=$jscomp.makeIterator(ae);ae=He.next().value;He=He.next().value;return{name:[ae,{fontWeight:"bold"}," ",{},jc.morph({fill:jc.Color.white,opacity:.7,value:""+(He.length-1),borderRadius:15,fontWeight:"bold",padding:jc.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:He}}).concat([{name:["New Connection  ",
{fontColor:jc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(nb),{}]}])}}},{key:"renderExistingConnection",value:function(nb){var vb=this,yb=jc.morph({type:"label",fontColor:jc.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(jc.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},nb.targetMethodName,{}])}),yd=this.renderDeadPin(),ae=yd.submorphs[0];jc.connect(yb,"onHoverIn",function(){yb.fontColor=jc.Color.orange;yb._leash=jc.visualizeConnection(ae,
nb.targetObj,yb._leash);ae.fill=jc.Color.orange;ae.border={color:jc.Color.orange,width:3}});jc.connect(yb,"onMouseDown",function(He){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fc){if(1==Fc.nextAddress)return He.stop(),Fc.yield(jc.interactivelyReEvaluateConnection(nb),2);jc.signal(vb,"refresh");Fc.jumpToEnd()})});jc.connect(yb,"onHoverOut",function(){yb.fontColor=jc.Color.gray;ae.fill=jc.Color.gray;ae.border={color:jc.Color.white,width:1};yb._leash.remove();yb._leash=void 0});return[yb,
{},"  ",{}].concat($jscomp.arrayFromIterable(jc.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){nb.disconnect();jc.signal(vb,"refresh")}})),["  ",{},yd,{}])}},{key:"renderDeadPin",value:function(){var nb=jc.morph({type:"ellipse",fill:jc.Color.gray,extent:jc.pt(10,10),center:jc.pt(8,12),borderWidth:1});return jc.morph({extent:jc.pt(20,20),fill:jc.Color.transparent,reactsToPointer:!1,submorphs:[nb]})}},{key:"renderPin",value:function(nb,vb){var yb=this,yd=jc.morph({type:"ellipse",
fill:jc.Color.gray.withA(.5),extent:jc.pt(10,10),center:jc.pt(8,12),draggable:!1,borderWidth:1}),ae=new jc.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:jc.Color.gray.darker(),endpointStyle:{fill:jc.Color.gray.darker()},position:jc.pt(1,1),vertices:[jc.pt(0,0),jc.pt(0,0)],canConnectTo:function(He){return"MorphContainer"==He.constructor.className||2>jc.arr.intersect([He].concat($jscomp.arrayFromIterable(He.ownerChain())),[yd].concat($jscomp.arrayFromIterable(yd.ownerChain()))).length}});
yd.addMorph(ae);jc.connect(ae.endPoint,"onDragStart",function(){jc.startConnecting(ae,yd)});jc.connect(ae.endPoint,"onDragEnd",function(He){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fc){if(1==Fc.nextAddress)return yd.center=jc.pt(8,12),Fc.yield(jc.stopConnecting(ae,yd,nb,vb),2);jc.signal(yb,"refresh");Fc.jumpToEnd()})});return jc.morph({extent:jc.pt(20,20),fill:jc.Color.transparent,reactsToPointer:!1,submorphs:[yd]})}},{key:"display",value:function(nb){return nb.name}},{key:"collapse",
value:function(nb,vb){nb.isCollapsed=vb}},{key:"isCollapsed",value:function(nb){return nb.isCollapsed}},{key:"isLeaf",value:function(nb){return!nb.children}},{key:"getChildren",value:function(nb){return nb.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(nb){var vb=new this;vb.root=vb.parseMorphConnections(nb);return vb}}],Sc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3524,end:8076})})(jc.TreeData);Na=function(tb){var Sc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),vd=Sc.hasOwnProperty("ConnectionsTree")&&"function"===typeof Sc.ConnectionsTree?Sc.ConnectionsTree:Sc.ConnectionsTree=function(nb){nb&&nb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Ea(vd,tb,[{key:"inspectConnectionsOf",value:function(nb){if(this.targetMorph=nb)this.treeData=jc.ConnectionsTreeData.for(nb),jc.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=jc.ConnectionsTreeData.for(this.targetMorph),jc.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],Sc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8093,end:8646})}(jc.Tree);Na=jc.ConnectionsTree;jc.default=Na}}});