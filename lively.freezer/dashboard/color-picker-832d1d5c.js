System.register(["./__root_module__-46f2ff9c.js","./index-ebb1a6e0.js"],function(Ma){var rb,Db,hc,Kb,id,Zc,yd,Kc,sc,bd,hd,se,xe,ne,Rc,Pd,Hb,Gc,ud,Vc,Id,ie,Fb,Ac,$c,Bc,vd,pb,lb,Zb,Mb,ub,rc,Ta,Lb,mb,Gb,vc,Lc,cc,Vb,Ub,Ga,jb,X,ha,Fa,Ja,Ca,ra,tb,Na,lc,kd;return{setters:[function(Tb){rb=Tb.C;Db=Tb.a2;hc=Tb.bh;Kb=Tb.bi;id=Tb.bj;Zc=Tb.bk;yd=Tb.bl;Kc=Tb.bm;sc=Tb.p;bd=Tb.ab;hd=Tb.bn;se=Tb.bo;xe=Tb.bp;ne=Tb.M;Rc=Tb.aB;Pd=Tb.ad;Hb=Tb.ah;Gc=Tb.O;ud=Tb.aC;Vc=Tb.Y;Id=Tb.W;ie=Tb.aA;Fb=Tb.aG;Ac=Tb.bq;$c=Tb.br;
Bc=Tb.d;vd=Tb.g;pb=Tb.n;lb=Tb.b;Zb=Tb.bs;Mb=Tb.i;ub=Tb.I;rc=Tb.ai;Ta=Tb.h;Lb=Tb.bt;mb=Tb.ae;Gb=Tb.m;vc=Tb.a6;Lc=Tb.a;cc=Tb.f;Vb=Tb.c;Ub=Tb._;Ga=Tb.R;jb=Tb.bu;X=Tb.bv;ha=Tb.bw;Fa=Tb.ac;Ja=Tb.o;Ca=Tb.as;ra=Tb.r},function(Tb){tb=Tb.p;Na=Tb.P;lc=Tb.d;kd=Tb.N}],execute:function(){var Tb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js");Tb.Color=rb;Tb.rect=Db;Tb.Complementary=hc;Tb.Triadic=Kb;Tb.Tetradic=id;Tb.Quadratic=Zc;Tb.Analogous=yd;Tb.Neutral=Kc;Tb.pt=sc;Tb.Point=bd;Tb.flatDesignColors=
hd;Tb.materialDesignColors=se;Tb.webSafeColors=xe;Tb.Morph=ne;Tb.CustomLayout=Rc;Tb.VerticalLayout=Pd;Tb.HorizontalLayout=Hb;Tb.Text=Gc;Tb.TilingLayout=ud;Tb.Ellipse=Vc;Tb.Image=Id;Tb.StyleSheet=ie;Tb.DropDownSelector=Fb;Tb.ModeSelector=Ac;Tb.Slider=$c;Tb.connect=Bc;Tb.signal=vd;Tb.num=pb;Tb.arr=lb;Tb.SnapLayout=Zb;Tb.WHEEL_URL="/lively.ide/assets/color-wheel.png";Tb.duration=200;(function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),nb=yb.hasOwnProperty("ColorPaletteField")&&
"function"===typeof yb.ColorPaletteField?yb.ColorPaletteField:yb.ColorPaletteField=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"onHoverIn",value:function(){if(this.color){var Ha=$jscomp.makeIterator(this.color.isGradient?Tb.Color.blue.toHSB():this.color.toHSB()),R=Ha.next().value,ya=Ha.next().value;Ha=Ha.next().value;this.borderColor=Tb.Color.hsb(R,1<ya+.5?ya-.5:ya+.5,1<Ha+.5?Ha-.5:Ha+.5)}}},
{key:"onHoverOut",value:function(){this.borderColor=Tb.Color.transparent}},{key:"onMouseDown",value:function(){Tb.signal(this,"updateColor",this.color)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPaletteField"}},{key:"properties",get:function(){return{color:{defaultValue:Tb.Color.blue},borderWidth:{defaultValue:2},borderColor:{after:["color"],initialize:function(){this.borderColor=this.color||Tb.Color.transparent}},fill:{after:["color"],initialize:function(){this.fill=this.color||
Tb.Color.transparent}},styleClasses:{after:["color"],initialize:function(){this.styleClasses=this.color?["colorField"]:["vacantColorField"]}}}}}],yb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:638,end:1652})})(Tb.Morph);(function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),
nb=yb.hasOwnProperty("ColorHarmonyField")&&"function"===typeof yb.ColorHarmonyField?yb.ColorHarmonyField:yb.ColorHarmonyField=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"onMouseDown",value:function(){Tb.signal(this,"updateColor",this.color)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorHarmonyField"}},{key:"properties",get:function(){return{extent:{defaultValue:Tb.pt(80,
60)},fill:{defaultValue:Tb.Color.transparent},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/color harmony field"}}},color:{set:function(Ha){var R=$jscomp.makeIterator(this.submorphs),ya=R.next().value;R=R.next().value;var $a=$jscomp.makeIterator(Ha?Ha.toHSB():[]),Ab=$a.next().value,bc=$a.next().value;$a=$a.next().value;this.setProperty("color",Ha);Ha&&ya&&R&&(ya.fill=Ha,R.textString=Ha.toHexString(),R.fontColor=Tb.Color.hsb(Ab,1<bc+.5?bc-.5:bc+.5,1<$a+.5?$a-.5:$a+.5))}},
submorphs:{after:["color"],initialize:function(){var Ha=$jscomp.makeIterator((this.color||Tb.Color.transparent).toHSB()),R=Ha.next().value,ya=Ha.next().value;Ha=Ha.next().value;this.submorphs=[new Tb.Morph({fill:this.color,extent:Tb.pt(80,50)}),new Tb.Text({textString:R.toFixed()+", "+ya.toFixed(2)+", "+Ha.toFixed(2),fill:Tb.Color.transparent,fontColor:Tb.Color.gray.darker(),bottomLeft:Tb.pt(0,50)})]}}}}}],yb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1654,end:3046})})(Tb.Morph);(function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),nb=yb.hasOwnProperty("HarmonyDisplay")&&"function"===typeof yb.HarmonyDisplay?yb.HarmonyDisplay:yb.HarmonyDisplay=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Mb(nb,ze,[{key:"update",value:function(Ha){var R=$jscomp.makeIterator(Ha.pivotColor.toHSB()),ya=R.next().value,$a=R.next().value;R=R.next().value;ya=Ha.harmony.chord({hue:ya,saturation:$a,brightness:R});ya.length!=this.submorphs.length?this.submorphs=ya.map(function(Ab){Ab=new Tb.ColorHarmonyField({color:Ab});Tb.connect(Ab,"updateColor",Ha,"color");return Ab}):Tb.arr.zip(this.submorphs,ya).forEach(function(Ab){var bc=$jscomp.makeIterator(Ab);Ab=bc.next().value;bc=bc.next().value;Ab.color=bc})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HarmonyDisplay"}}],yb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3048,end:3626})})(Tb.Morph);(function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),nb=yb.hasOwnProperty("PivotColorControl")&&
"function"===typeof yb.PivotColorControl?yb.PivotColorControl:yb.PivotColorControl=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"update",value:function(Ha){this.pivotColor=Ha.pivotColor}},{key:"onDrag",value:function(Ha){var R=$jscomp.makeIterator(this.pivotColor.toHSB()),ya=R.next().value,$a=R.next().value;R=R.next().value;ya=Tb.num.toRadians(ya);Ha=Tb.Point.polar(50*$a,ya).addPt(Ha.state.dragDelta);
ya=Tb.num.toDegrees(Ha.theta());ya=0>ya?ya+360:ya;$a=Math.min(Ha.r()/50,1);this.pivotColor=Tb.Color.hsb(ya,$a,R)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PivotColorControl"}},{key:"properties",get:function(){return{pivotColor:{defaultValue:Tb.Color.blue},draggable:{defaultValue:!0}}}}],yb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3628,end:4262})})(Tb.Ellipse);(function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),nb=yb.hasOwnProperty("HarmonyVisualizer")&&"function"===typeof yb.HarmonyVisualizer?yb.HarmonyVisualizer:yb.HarmonyVisualizer=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"update",value:function(Ha){var R=
$jscomp.makeIterator(this.submorphs).next().value,ya=this.get("pivot control"),$a=$jscomp.makeIterator(Ha.pivotColor.toHSB()),Ab=$a.next().value,bc=$a.next().value;$a=$a.next().value;var Ec=Tb.num.toRadians(Ab);Ab=Ha.harmony.chord({hue:Ab,saturation:bc,brightness:$a}).map(function(pc){var wd=$jscomp.makeIterator(pc.toHSB()),xd=wd.next().value;pc=wd.next().value;wd.next();wd=Tb.num.toRadians(xd);return Tb.Point.polar(50*pc,wd)});R.fill=Tb.Color.black.withA(1-$a);ya.update(Ha);R.submorphs.length-1!=
Ab.length?R.submorphs=[].concat($jscomp.arrayFromIterable(Ab.map(function(pc){return new Tb.Ellipse({center:pc,fill:Tb.Color.transparent,draggable:!1,borderWidth:1,borderColor:Tb.Color.black})})),[ya]):(Tb.arr.zip(R.submorphs,Ab).forEach(function(pc){var wd=$jscomp.makeIterator(pc);pc=wd.next().value;if(wd=wd.next().value)pc.center=wd}),ya.center=Tb.Point.polar(50*bc,Ec))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HarmonyVisualizer"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["harmonyVisualizer"]},
submorphs:{initialize:function(){this.submorphs=[{type:"ellipse",name:"harmonyPoints",submorphs:[new Tb.PivotColorControl({name:"pivot control"})]}]}}}}}],yb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4264,end:5726})})(Tb.Image);(function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),
nb=yb.hasOwnProperty("HarmonyPalette")&&"function"===typeof yb.HarmonyPalette?yb.HarmonyPalette:yb.HarmonyPalette=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"update",value:function(Ha){this.updateInProgress||(this.updateInProgress=!0,this.pivotBrightness=Ha.pivotBrightness,this.harmony=Ha.harmony,this.get("harmonies").update(Ha),this.get("harmony visualizer").update(Ha),this.updateInProgress=
!1)}},{key:"harmonyControl",value:function(){var Ha,R,ya=new Tb.Morph({name:"harmonyControl",submorphs:[new Tb.HarmonyVisualizer({name:"harmony visualizer"}),R=new Tb.Slider({min:0,max:1,tooltip:"Adjust Brightness",width:100,value:this.pivotBrightness}),Ha=new Tb.DropDownSelector({name:"harmonySelector",isHaloItem:!0,padding:4,selectedValue:this.harmony,getCurrentValue:function(){return this.selectedValue.name},values:{Complement:new Tb.Complementary,Triadic:new Tb.Triadic,Tetradic:new Tb.Tetradic,
Quadratic:new Tb.Quadratic,Analogous:new Tb.Analogous,Neutral:new Tb.Neutral}})]});Tb.connect(R,"value",this,"pivotBrightness");Tb.connect(Ha,"selectedValue",this,"harmony");return ya}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HarmonyPalette"}},{key:"properties",get:function(){return{harmony:{defaultValue:new Tb.Complementary},pivotBrightness:{defaultValue:1},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/harmony palette"}}},submorphs:{after:["harmony"],
initialize:function(){this.submorphs=[new Tb.HarmonyDisplay({name:"harmonies"}),this.harmonyControl()]}}}}}],yb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5728,end:7655})})(Tb.Morph);var md=Ma("C",function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),
nb=yb.hasOwnProperty("ColorPalette")&&"function"===typeof yb.ColorPalette?yb.ColorPalette:yb.ColorPalette=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"fadeIntoWorld",value:function(Ha){Mb._get(Object.getPrototypeOf(nb.prototype),"fadeIntoWorld",this).call(this,Ha);this.initPosition=Ha;return this}},{key:"isHaloItem",value:function(){return!0}},{key:"onKeyDown",value:function(Ha){"Escape"==
Ha.key&&this.close()}},{key:"close",value:function(Ha){Ha?this.fadeOut(Ha):this.remove();Tb.signal(this,"close")}},{key:"paletteView",value:function(){return{name:"paletteView",extent:Tb.pt(400,253),submorphs:[this.solidColorPalette(),new Tb.HarmonyPalette({name:"harmony palette",isLayoutable:!1,visible:!1,draggable:!1})]}}},{key:"selectSolidMode",value:function(){var Ha=this.get("solidColorPalette"),R=this.get("paletteView");Ha.visible||(R.submorphs.forEach(function(ya){return ya.animate({isLayoutable:!1,
visible:!1,duration:200})}),Ha.animate({isLayoutable:!0,visible:!0,duration:200}))}},{key:"selectHarmonyMode",value:function(){var Ha=this.get("paletteView");this.get("harmony palette").visible||(Ha.submorphs.forEach(function(R){return R.animate({isLayoutable:!1,visible:!1,duration:200})}),this.get("harmony palette").animate({isLayoutable:!0,visible:!0,duration:200}))}},{key:"fillTypeSelector",value:function(){var Ha=new Tb.ModeSelector({reactsToPointer:!1,name:"fillTypeSelector",items:["Color Palette",
"Color Harmonies"],tooltips:{"Color Harmonies":this.getPaletteDescription("harmony")}});Tb.connect(Ha,"Color Palette",this,"selectSolidMode");Tb.connect(Ha,"Color Harmonies",this,"selectHarmonyMode");return Ha}},{key:"solidColorPalette",value:function(){return{name:"solidColorPalette",master:{auto:"styleguide://SystemWidgets/solid color palette"},submorphs:[this.getCurrentPalette(),this.paletteConfig()]}}},{key:"getCurrentPalette",value:function(){var Ha=this.getColorsFor(this.colorPalette),R=Ha.colors,
ya=Ha.mod;return this.cachedPalette[Ha.name]||this.getPalette(R,ya)}},{key:"getPalette",value:function(Ha,R){var ya=this,$a=Math.max(Math.ceil(Ha.length/R),15),Ab=$a*this.colorFieldWidth,bc=R*this.colorFieldWidth;Ha=[].concat($jscomp.arrayFromIterable(Ha),$jscomp.arrayFromIterable(Tb.arr.withN($a*R-Ha.length,null)));return{extent:Tb.pt(Ab,bc),name:"paletteContainer",submorphs:Ha.map(function(Ec){Ec=new Tb.ColorPaletteField({color:Ec&&Tb.Color.rgbHex(Ec),extent:Tb.pt(ya.colorFieldWidth,ya.colorFieldWidth)});
Tb.connect(Ec,"updateColor",ya,"color");return Ec})}}},{key:"switchPalette",value:function(Ha){var R=Ha.name,ya=Ha.colors;Ha=Ha.mod;var $a=this.get("solidColorPalette"),Ab=$jscomp.makeIterator($a.submorphs);Ab.next();Ab=Ab.next().value;this.cachedPalette[R]=this.cachedPalette[R]||this.getPalette(ya,Ha,R);$a.submorphs=[this.cachedPalette[R],Ab]}},{key:"getPaletteDescription",value:function(Ha){return{harmony:"Color harmonies are particularly pleasing combinations\nof two or more colors derived from their relationship\non a color wheel. Also known as color chords, color\nharmonies are useful when exploring a possible color\npalette, or can be used as a standalone color scheme.\n",
custom:"Your personal set of customly defined colors.",materialDesign:"Material design is a visual language and design\nsystem developed by Google with an almost flat\nstyle and vibrant color schemes.",flatDesign:"Flat design or flat UI colors are quite popular\nin web design today where bold, bright colors\nare used to create clean, simple interfaces.",webSafe:"Web safe colors emerged during the early era of\nthe internet; a standardized palette of 216 colors\nthat displayed consistently across all major browsers."}[Ha]}},
{key:"updatePaletteDescription",value:function(){this.get("paletteSelector").tooltip=this.getPaletteDescription(this.colorPalette)}},{key:"getColorsFor",value:function(Ha){return Object.assign({name:Ha},{flatDesign:{colors:Tb.flatDesignColors,mod:11},materialDesign:{colors:Tb.materialDesignColors,mod:15},webSafe:{colors:Tb.webSafeColors,mod:12}}[Ha])}},{key:"paletteConfig",value:function(){var Ha,R={name:"paletteConfig",styleClasses:["paletteFormatter"],submorphs:[Ha=new Tb.DropDownSelector({isHaloItem:!0,
name:"paletteSelector",selectedValue:"flatDesign",padding:4,tooltip:this.getPaletteDescription(this.colorPalette),values:{"Flat Design":"flatDesign","Material Design":"materialDesign","Web Safe":"webSafe"}})]};Tb.connect(Ha,"selectedValue",this,"colorPalette");return R}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPalette"}},{key:"properties",get:function(){return{extent:{defaultValue:Tb.pt(200,300)},colorPalette:{after:["submorphs"],defaultValue:"flatDesign",set:function(Ha){this.setProperty("colorPalette",
Ha);this.switchPalette(this.getColorsFor(Ha));this.updatePaletteDescription()}},pivotColor:{after:["submorphs"],set:function(Ha){this.setProperty("pivotColor",Ha);this.get("harmony palette").update(this)}},color:{set:function(Ha){this.setProperty("color",Ha);this.get("harmony palette")&&this.get("harmony palette").update(this)}},pivotBrightness:{after:["submorphs","color"],get:function(){var Ha=$jscomp.makeIterator((this.pivotColor||this.color).toHSB());Ha.next();Ha.next();return Ha.next().value},
set:function(Ha){var R=$jscomp.makeIterator((this.pivotColor||this.color).toHSB()),ya=R.next().value;R=R.next().value;this.pivotColor=Tb.Color.hsb(ya,R,Ha)}},harmony:{after:["submorphs","pivotColor"],defaultValue:new Tb.Complementary,set:function(Ha){this.setProperty("harmony",Ha);this.get("harmony palette").update(this)}},colorFieldWidth:{defaultValue:20},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/color palette"}}},submorphs:{after:["color"],initialize:function(){var Ha=
$jscomp.makeIterator((this.color.isGradient?Tb.Color.blue:this.color).toHSB()),R=Ha.next().value,ya=Ha.next().value;Ha.next();this.cachedPalette={};this.submorphs=[this.fillTypeSelector(),this.paletteView()];this.pivotColor=Tb.Color.hsb(R,ya,1);Tb.connect(this.get("harmony palette"),"harmony",this,"harmony");Tb.connect(this.get("pivot control"),"pivotColor",this,"pivotColor");Tb.connect(this.get("harmony palette"),"pivotBrightness",this,"pivotBrightness");this.selectSolidMode();this.active=!0}}}}}],
yb,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:7721,end:15551})}(Tb.Morph));Tb.ColorPalette=md;Tb.ColorPalette=md;Tb.ColorPalette=md;var wb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js");wb.Morph=ne;wb.Icon=ub;wb.ProportionalLayout=rc;wb.config=Ta;
wb.Text=Gc;wb.ShadowObject=Lb;wb.GridLayout=mb;wb.TilingLayout=ud;wb.StyleSheet=ie;wb.morph=Gb;wb.HorizontalLayout=Hb;wb.VerticalLayout=Pd;wb.KeyHandler=vc;wb.connect=Bc;wb.signal=vd;wb.arr=lb;wb.promise=Lc;wb.fun=cc;wb.string=Vb;wb.obj=Ub;wb.Color=rb;wb.rect=Db;wb.Rectangle=Ga;wb.pt=sc;wb.popovers=tb;wb.ModeSelector=Ac;wb.DropDownSelector=Fb;wb.SearchField=jb;wb.CheckBox=X;wb.Popover=Na;wb.SvgStyleHalo=lc;wb.NumberWidget=kd;wb.Icons=ha;wb.duration=200;var je=Ma("c",wb.colorWidgets||{});wb.colorWidgets=
je;wb.colorWidgets=je;wb.colorWidgets=je;(function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),nb=yb.hasOwnProperty("SelectableControl")&&"function"===typeof yb.SelectableControl?yb.SelectableControl:yb.SelectableControl=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"select",value:function(Ha){var R=this,ya,$a,Ab;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bc){if(1==
bc.nextAddress)return R.target?bc.yield(R.target.execCommand(Ha),2):bc.return();ya=bc.yieldResult;$a=R.get("modeSelector");ya.opacity=0;R.lastLabel&&(Ab=$a.submorphs.indexOf(R.lastLabel)<$a.submorphs.indexOf($a.currentLabel),ya.topLeft=$a.bottomLeft.addXY(Ab?20:-20,10));R.lastLabel=$a.currentLabel;R.animate({submorphs:[$a,ya],duration:wb.duration});ya.animate({opacity:1,duration:wb.duration});bc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SelectableControl"}},{key:"properties",
get:function(){return{target:{type:"Morph"},selectableControls:{},selectedControl:{},fill:{defaultValue:wb.Color.transparent},layout:{initialize:function(){this.layout=new wb.VerticalLayout({spacing:10,autoResize:!0,layoutOrder:function(Ha){return this.container.submorphs.indexOf(Ha)}})}},submorphs:{after:["selectableControls","selectedControl","target"],initialize:function(){var Ha=new wb.ModeSelector({name:"modeSelector",items:this.selectableControls,init:this.selectedControl});this.submorphs=[Ha];
Ha.width=100;wb.connect(Ha,"switchLabel",this,"select");this.select(this.selectableControls[this.selectedControl])}}}}}],yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:948,end:2579})})(wb.Morph);(function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),
nb=yb.hasOwnProperty("ToggledControl")&&"function"===typeof yb.ToggledControl?yb.ToggledControl:yb.ToggledControl=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"toggle",value:function(Ha){var R=$jscomp.makeIterator(this.submorphs).next().value,ya=this.toggledControl(Ha);R=[R].concat($jscomp.arrayFromIterable(ya?[ya]:[]));wb.signal(this,"update",Ha&&ya.value);ya&&(ya.opacity=0);this.animate({submorphs:R,
duration:wb.duration});ya&&ya.animate({opacity:1,duration:wb.duration})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ToggledControl"}},{key:"properties",get:function(){return{title:{defaultValue:"Toggled Property"},toggledControl:{},checked:{},clipMode:{defaultValue:"hidden"},fill:{defaultValue:wb.Color.transparent},layout:{initialize:function(){this.layout=new wb.VerticalLayout({spacing:5})}},submorphs:{initialize:function(){var Ha=new wb.CheckBox({checked:this.checked});this.submorphs=
[{fill:wb.Color.transparent,layout:new wb.HorizontalLayout({autoResize:!1}),height:25,submorphs:[{type:"label",name:"property name",fontWeight:"bold",fontSize:14,autofit:!0,opacity:.8,padding:wb.rect(0,2,3,0),textString:this.title,styleClasses:["controlLabel"]},Ha]}];this.toggle(this.checked);wb.connect(Ha,"toggle",this,"toggle")}}}}}],yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2581,end:4273})})(wb.Morph);(function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),nb=yb.hasOwnProperty("StylePopover")&&"function"===typeof yb.StylePopover?yb.StylePopover:yb.StylePopover=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"setupConnections",value:function(){}},{key:"controls",
value:function(){return[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylePopover"}},{key:"properties",get:function(){return{targetMorph:{initialize:function(){this.targetMorph=wb.morph({layout:new wb.HorizontalLayout({spacing:5,resizeContainer:!0}),fill:wb.Color.transparent,submorphs:this.controls()});this.setupConnections()}}}}}],yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4275,end:4825})})(wb.Popover);var bf=function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),nb=yb.hasOwnProperty("IconPopover")&&"function"===typeof yb.IconPopover?yb.IconPopover:yb.IconPopover=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"onDrop",value:function(Ha){var R=this;Ha.hand.grabbedMorphs.find(function(ya){return ya===
R.iconLabel})&&(Ha.hand.dropMorphsOn(this),this.iconLabel.remove())}},{key:"controls",value:function(){return[{draggable:!1,layout:new wb.VerticalLayout({spacing:4}),fill:wb.Color.transparent,submorphs:[new wb.SearchField({name:"searchInput",width:200,placeHolder:"Search Icons"}),wb.morph({textAndAttributes:this.iconAsTextAttributes(),name:"iconList",draggable:!0,type:"text",extent:wb.pt(200,200),textStyleClasses:["fas","far"],clipMode:"auto",readOnly:!0})]}]}},{key:"setupConnections",value:function(){var Ha=
this.ui,R=Ha.iconList;wb.connect(Ha.searchInput,"searchInput",this,"filterIcons");wb.connect(R,"onMouseUp",this,"iconSelectClick");wb.connect(R,"onDragStart",this,"createIconLabel")}},{key:"relayout",value:function(){}},{key:"createIconLabel",value:function(Ha){Ha=this.ui.iconList.textPositionFromPoint(Ha.positionIn(this.ui.iconList));Ha=this.iconAtTextPos(Ha);this.iconLabel=wb.Icon.makeLabel(Ha,{fontSize:this.ui.iconList.fontSize,name:Ha});this.iconLabel.openInHand()}},{key:"iconAsTextAttributes",
value:function(Ha){var R=Object.keys(wb.Icons);Ha&&(R=R.filter(Ha));return wb.arr.flatmap(R,function(ya,$a){return[wb.Icons[ya].code,{iconCode:wb.Icons[ya].code,iconName:ya}," ",{fontFamily:"sans-serif",iconCode:!1,iconName:!1}]})}},{key:"filterIcons",value:function(){var Ha=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){if(1==R.nextAddress)return R.yield(wb.promise.delay(250),2);wb.fun.debounceNamed("filterIcons",200,function(){Ha.ui.iconList.textAndAttributes=Ha.iconAsTextAttributes(function(ya){return Ha.ui.searchInput.matches(ya.toLowerCase())})})();
R.jumpToEnd()})}},{key:"iconSelectClick",value:function(Ha){Ha=this.ui.iconList.textPositionFromPoint(Ha.positionIn(this.ui.iconList));Ha=this.iconAtTextPos(Ha);this.setStatusMessage(Ha);wb.signal(this,"select",Ha)}},{key:"iconAtTextPos",value:function(Ha){var R=Ha.row;Ha=Ha.column;--Ha;for(var ya=this.ui.iconList,$a=ya.textAndAttributesInRange({start:{row:R,column:Math.max(0,Ha)},end:{row:R,column:Ha+2}});$a.length&&!$a[1].iconName;)Ha++,$a=$a.slice(2);var Ab={start:{row:R,column:Ha},end:{row:R,
column:Ha+1}};ya.addTextAttribute({backgroundColor:ya.selectionColor.darker().withA(.5)},Ab);wb.promise.delay(1E3).then(function(){return ya.addTextAttribute({backgroundColor:wb.Color.transparent},Ab)});return $a.length?$a[1].iconName:null}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconPopover"}},{key:"properties",get:function(){return{isEpiMorph:{get:function(){return!1}},popoverColor:{defaultValue:wb.Color.gray.lighter()},ui:{get:function(){return{searchInput:this.get("searchInput"),
iconList:this.get("iconList")}}}}}}],yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4834,end:8444})}(wb.StylePopover);wb.IconPopover=bf;wb.IconPopover=bf;wb.IconPopover=bf;bf=function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),nb=yb.hasOwnProperty("LayoutPopover")&&
"function"===typeof yb.LayoutPopover?yb.LayoutPopover:yb.LayoutPopover=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"getLayoutObjects",value:function(){return[null,new wb.HorizontalLayout({autoResize:!1}),new wb.VerticalLayout({autoResize:!1}),new wb.TilingLayout,new wb.ProportionalLayout,new wb.GridLayout({grid:[[null],[null],[null]]})]}},{key:"close",value:function(){Mb._get(Object.getPrototypeOf(nb.prototype),
"close",this).call(this);this.clearLayoutHalo()}},{key:"controls",value:function(){this.showLayoutHaloFor(this.container);return[{fill:wb.Color.transparent,layout:new wb.VerticalLayout({spacing:5,layoutOrder:function(Ha){return this.container.submorphs.indexOf(Ha)}}),submorphs:[this.layoutPicker(),this.layoutControls()]}]}},{key:"updateControls",value:function(){this.get("Layout Type").relayout();this.getSubmorphNamed("controlContainer").animate(this.layoutHalo?{isLayoutable:!0,submorphs:this.layoutHalo.optionControls(this),
duration:300}:{isLayoutable:!1,extent:wb.pt(0,0),submorphs:[],duration:300})}},{key:"showLayoutHaloFor",value:function(Ha){this.clearLayoutHalo();Ha&&Ha.layout&&(this.layoutHalo=(Ha.world()||Ha.env.world).showLayoutHaloFor(Ha))}},{key:"clearLayoutHalo",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null)}},{key:"getCurrentLayoutName",value:function(){return this.getLayoutName(this.container.layout)}},{key:"getLayoutName",value:function(Ha){return Ha?Ha.name()+" Layout":
"No Layout"}},{key:"update",value:function(){}},{key:"applyLayout",value:function(Ha){this.container.animate({layout:Ha});this.showLayoutHaloFor(this.container);this.updateControls(this.controls());wb.signal(this,"layoutChanged",this.container.layout)}},{key:"layoutPicker",value:function(){var Ha=this,R=this.getLayoutObjects().map(function(ya){var $a={};return $a[Ha.getLayoutName(ya)]=ya,$a});R=this.get("Layout Type")||new wb.DropDownSelector({name:"Layout Type",borderRadius:2,padding:3,getCurrentValue:function(){return Ha.getCurrentLayoutName()},
selectedValue:this.container.layout,values:wb.obj.merge(R)});wb.connect(R,"selectedValue",this,"applyLayout");return R}},{key:"layoutControls",value:function(){return{name:"controlContainer",fill:wb.Color.transparent,layout:new wb.VerticalLayout,isLayoutable:!!this.layoutHalo,submorphs:this.layoutHalo?this.layoutHalo.optionControls(this):[]}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutPopover"}},{key:"properties",get:function(){return{container:{},popoverColor:{defaultValue:wb.Color.gray.lighter()}}}}],
yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:8453,end:11240})}(wb.StylePopover);wb.LayoutPopover=bf;wb.LayoutPopover=bf;wb.LayoutPopover=bf;bf=function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),nb=yb.hasOwnProperty("FillPopover")&&
"function"===typeof yb.FillPopover?yb.FillPopover:yb.FillPopover=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"openHandle",value:function(Ha){Ha.openInWorld();this.openHandles.push(Ha)}},{key:"close",value:function(){Mb._get(Object.getPrototypeOf(nb.prototype),"close",this).call(this);this.openHandles.forEach(function(Ha){return Ha.remove()})}},{key:"setupConnections",value:function(){var Ha=
this.ui,R=Ha.fillSelector,ya=Ha.colorField;Ha=Ha.gradientEditor;R&&wb.connect(this,"fillValue",R,"value");Ha&&(wb.connect(Ha,"gradientValue",this,"fillValue"),wb.connect(Ha,"openHandle",this,"openHandle"));ya&&(wb.connect(this,"close",ya,"remove"),wb.connect(ya,"update",this,"fillValue"),wb.connect(this,"onMouseDown",ya,"removeWidgets"))}},{key:"commands",get:function(){var Ha=this;return Mb._get(Object.getPrototypeOf(nb.prototype),"commands",this).concat([{name:"switch to fill",exec:function(){var R=
new wb.colorWidgets.ColorPickerField({name:"colorField",colorValue:Ha.fillValue.isGradient?wb.Color.blue:Ha.fillValue});R.whenRendered().then(function(){Ha.setupConnections()});return R}},{name:"switch to gradient",exec:function(){var R=new wb.colorWidgets.GradientEditor({name:"gradient editor",gradientValue:Ha.fillValue});R.whenRendered().then(function(){Ha.setupConnections();Ha.handleMorph&&R.showGradientHandlesOn(Ha.handleMorph);R.update()});return R}}])}},{key:"controls",value:function(){var Ha=
this;if(!this.gradientEnabled){var R=new wb.colorWidgets.ColorPickerField({name:"colorField",colorValue:this.fillValue});R.whenRendered().then(function(){R.update(Ha.fillValue)});return[{fill:wb.Color.transparent,layout:new wb.VerticalLayout({spacing:0}),submorphs:[R]}]}return[new wb.SelectableControl({name:"fillSelector",target:this,selectedControl:this.fillValue&&this.fillValue.isGradient?"Gradient":"Fill",selectableControls:{Fill:"switch to fill",Gradient:"switch to gradient"}})]}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"FillPopover"}},{key:"properties",get:function(){return{gradientEnabled:{defaultValue:!0},fillValue:{defaultValue:wb.Color.blue},popoverColor:{defaultValue:wb.Color.gray.lighter()},handleMorph:{},openHandles:{defaultValue:[]},ui:{get:function(){return{colorField:this.get("colorField"),fillSelector:this.get("fillSelector"),gradientEditor:this.get("gradient editor")}}}}}}],yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:11249,end:14234})}(wb.StylePopover);wb.FillPopover=bf;wb.FillPopover=bf;wb.FillPopover=bf;var Wc=Ma("S",function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),nb=yb.hasOwnProperty("ShadowPopover")&&"function"===typeof yb.ShadowPopover?yb.ShadowPopover:yb.ShadowPopover=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"controls",value:function(){var Ha=this.shadowValue?this.shadowValue.inset?"Inset Shadow":"Drop Shadow":"No Shadow",R=[{layout:new wb.VerticalLayout({resizeContainer:!0,spacing:5}),fill:wb.Color.transparent,name:"control container",submorphs:[Ha=new wb.DropDownSelector({name:"shadow type",borderRadius:2,padding:3,selectedValue:Ha,values:["No Shadow","Drop Shadow","Inset Shadow"]})].concat(this.shadowValue?
this.shadowControls():[])}];wb.connect(Ha,"selectedValue",this,"changeShadowType");return R}},{key:"shadowControls",value:function(){var Ha=this.shadowValue,R=new wb.NumberWidget({min:0,autofit:!1,name:"distanceSlider",number:Ha.distance,unit:"px"}),ya=new wb.NumberWidget({name:"angleSlider",min:0,max:360,number:Ha.rotation,autofit:!1}),$a=new wb.NumberWidget({name:"spreadSlider",min:0,number:Ha.spread,autofit:!1}),Ab=new wb.NumberWidget({name:"blurSlider",min:0,number:Ha.blur,autofit:!1});Ha=new wb.colorWidgets.ColorPickerField({name:"colorPicker",
colorValue:Ha.color});wb.connect(Ha,"colorValue",this,"updateShadow",{converter:function(bc){return{color:bc}}});wb.connect(this,"onMouseDown",Ha,"removeWidgets");wb.connect(this,"close",Ha,"remove");wb.connect($a,"update",this,"updateShadow",{converter:function(bc){return{spread:bc}}});wb.connect(R,"update",this,"updateShadow",{converter:function(bc){return{distance:bc}}});wb.connect(Ab,"update",this,"updateShadow",{converter:function(bc){return{blur:bc}}});wb.connect(ya,"update",this,"updateShadow",
{converter:function(bc){return{rotation:bc}}});return new wb.Morph({layout:new wb.GridLayout({autoAssign:!1,fitToCell:!1,columns:[0,{paddingLeft:1}],rows:wb.arr.flatten(wb.arr.range(0,3).map(function(bc){return[bc,{paddingBottom:5}]}),1),grid:[["spreadLabel",null,"spreadSlider"],["distanceLabel",null,"distanceSlider"],["blurLabel",null,"blurSlider"],["angleLabel",null,"angleSlider"],["colorLabel",null,"colorPicker"]]}),width:120,height:145,fill:wb.Color.transparent,submorphs:wb.arr.flatten([["distance",
R],["spread",$a],["blur",Ab],["angle",ya],["color",Ha]].map(function(bc){var Ec=$jscomp.makeIterator(bc);bc=Ec.next().value;Ec=Ec.next().value;return[{type:"label",styleClasses:["controlName"],value:wb.string.capitalize(bc)+":",name:bc+"Label"},Ec]}))})}},{key:"changeShadowType",value:function(Ha){"No Shadow"==Ha?this.toggleShadow(!1):"Inset Shadow"==Ha?(this.toggleShadow(!0),this.shadowValue.inset=!0):(this.toggleShadow(!0),this.shadowValue.inset=!1);this.get("control container").animate({submorphs:[this.get("shadow type")].concat(this.shadowValue?
this.shadowControls():[]),duration:300})}},{key:"updateShadow",value:function(Ha){var R=this.shadowValue;Ha=Object.assign({fast:R.fast,color:R.color,spread:R.spread,blur:R.blur,distance:R.distance,rotation:R.rotation,inset:R.inset},Ha);this.shadowValue=new wb.ShadowObject(Ha)}},{key:"toggleShadow",value:function(Ha){this.shadowValue&&(this.cachedShadow=this.shadowValue);this.shadowValue=Ha&&this.cachedShadow}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowPopover"}},{key:"properties",
get:function(){return{shadowValue:{},cachedShadow:{defaultValue:new wb.ShadowObject({fast:!0})},popoverColor:{defaultValue:wb.Color.gray.lighter()}}}}],yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:14243,end:18677})}(wb.StylePopover));wb.ShadowPopover=Wc;wb.ShadowPopover=
Wc;wb.ShadowPopover=Wc;wb.milimeter="https://upload.wikimedia.org/wikipedia/commons/c/c8/Millimeterpapier_10_x_10_cm.svg";Wc=function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),nb=yb.hasOwnProperty("PointPopover")&&"function"===typeof yb.PointPopover?yb.PointPopover:yb.PointPopover=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"refineResolution",value:function(Ha){this.resolution=
.25+this.get("scroller").scroll.y/160;this.relayout()}},{key:"adjustPoint",value:function(Ha){this.pointValue=this.pointValue.addPt(Ha.state.dragDelta.scaleBy(1/this.resolution)).roundTo(1);this.relayout()}},{key:"relayout",value:function(){Mb._get(Object.getPrototypeOf(nb.prototype),"relayout",this).call(this);var Ha=this.getSubmorphNamed("mesh"),R=this.getSubmorphNamed("point value view");Ha.origin=Ha.innerBounds().center().addXY(4,1);Ha.position=this.get("body").innerBounds().center();Ha.scale=
this.resolution;this.getSubmorphNamed("resolution view").value="Resolution: "+this.resolution.toFixed(2)+"x";R.value=wb.obj.safeToString(this.pointValue);R.position=this.getSubmorphNamed("knob").bottomRight}},{key:Symbol.for("lively-instance-initialize"),value:function(Ha){var R=this;Mb._get(Object.getPrototypeOf(nb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Ha);this.whenRendered().then(function(){return R.relayout()})}},{key:"calibrate",value:function(){var Ha=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){if(1==
R.nextAddress)return Ha.get("knob").animate({center:Ha.innerBounds().center(),duration:200}),R.yield(Ha.getSubmorphNamed("point value view").animate({opacity:0,duration:200}),2);Ha.relayout();R.jumpToEnd()})}},{key:"showPointValue",value:function(){this.getSubmorphNamed("point value view").animate({opacity:1,duration:200})}},{key:"controls",value:function(){this.extent=wb.pt(200,200);var Ha,R,ya=[wb.morph({extent:wb.pt(200,200),clipMode:"hidden",fill:wb.Color.transparent,submorphs:[{type:"image",
name:"mesh",fill:wb.Color.transparent,opacity:.5,imageUrl:wb.milimeter,autoResize:!0},{extent:wb.pt(200,200),draggable:!1,dropShadow:{inset:!0,spread:5,color:wb.Color.gray},fill:wb.Color.transparent},Ha=wb.morph({name:"scroller",extent:wb.pt(200,200),clipMode:"scroll",draggable:!1,opacity:.01,submorphs:[{height:625.6,width:10}]}),R=wb.morph({name:"knob",type:"ellipse",nativeCursor:"-webkit-grab",fill:wb.Color.red,borderColor:wb.Color.black,borderWidth:1,center:wb.pt(100,100),draggable:!0}),{type:"label",
name:"point value view",padding:4,opacity:0,styleClasses:["Tooltip"]},{position:wb.pt(10,10),type:"label",name:"resolution view",padding:4,styleClasses:["Tooltip"]}]})];Ha.scroll=wb.pt(0,120);wb.connect(R,"onDragStart",this,"showPointValue");wb.connect(R,"onDrag",this,"adjustPoint");wb.connect(R,"onDragEnd",this,"calibrate");wb.connect(this,"extent",this,"relayout");wb.connect(Ha,"onScroll",this,"refineResolution");return ya}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointPopover"}},
{key:"properties",get:function(){return{pointValue:{defaultValue:wb.pt(0,0)},resolution:{defaultValue:1}}}}],yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:18792,end:21996})}(wb.StylePopover);wb.PointPopover=Wc;wb.PointPopover=Wc;wb.PointPopover=Wc;Wc=function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),
nb=yb.hasOwnProperty("RectanglePopover")&&"function"===typeof yb.RectanglePopover?yb.RectanglePopover:yb.RectanglePopover=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"controls",value:function(){var Ha=this;return[{fill:wb.Color.transparent,extent:wb.pt(120,120),layout:new wb.GridLayout({grid:[["top","top scrubber"],["right","right scrubber"],["left","left scrubber"],["bottom","bottom scrubber"]],
columns:[0,{paddingLeft:4},1,{paddingRight:4,fixed:!0,width:60}],rows:wb.arr.flatten(wb.arr.range(0,3).map(function(R){return[R,{paddingTop:0==R?4:2,paddingBottom:3==R?4:2}]}))}),submorphs:wb.arr.flatten(["top","right","bottom","left"].map(function(R){var ya=new wb.NumberWidget({master:{auto:"styleguide://SystemWidgets/number field/light"},name:R+" scrubber",autofit:!1,number:Ha.rectangle.partNamed(R)});wb.connect(ya,"update",Ha,"rectangle",{updater:function($a,Ab){var bc=this.targetObj.rectangle,
Ec={};Ab=(Ec.left=bc.left(),Ec.top=bc.top(),Ec.right=bc.right(),Ec.bottom=bc.bottom(),Ec[R]=Ab,Ec);$a(wb.Rectangle.inset(Ab.left,Ab.top,Ab.right,Ab.bottom))},varMapping:{side:R,Rectangle:wb.Rectangle}});return[{type:"label",styleClasses:["controlName"],name:R,value:R,padding:3},ya]}))}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RectanglePopover"}},{key:"properties",get:function(){return{popoverColor:{defaultValue:wb.Color.gray.lighter()},rectangle:{defaultValue:wb.rect(0)}}}}],
yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22005,end:23989})}(wb.StylePopover);wb.RectanglePopover=Wc;wb.RectanglePopover=Wc;wb.RectanglePopover=Wc;Wc=function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),nb=yb.hasOwnProperty("TextPopover")&&
"function"===typeof yb.TextPopover?yb.TextPopover:yb.TextPopover=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"controls",value:function(){var Ha=new wb.Text(Object.assign({name:"editor",extent:wb.pt(300,200),textString:this.text,lineWrapping:"by-chars"},wb.config.codeEditor.defaultStyle));return[{layout:new wb.HorizontalLayout,fill:wb.Color.transparent,borderColor:wb.Color.gray,borderWidth:1,
borderRadius:4,clipMode:"hidden",submorphs:[Ha]}]}},{key:"commands",get:function(){return Mb._get(Object.getPrototypeOf(nb.prototype),"commands",this).concat([{name:"save string",exec:function(Ha){return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){Ha.text=Ha.get("editor").textString;wb.signal(Ha,"save",Ha.text);Ha.setStatusMessage("String saved!",wb.Color.green);R.jumpToEnd()})}}])}},{key:"keybindings",get:function(){return Mb._get(Object.getPrototypeOf(nb.prototype),"keybindings",this).concat([{keys:{mac:"Command-S",
win:"Ctrl-S"},command:"save string"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextPopover"}},{key:"properties",get:function(){return{text:{defaultValue:"Enter some text!"}}}}],yb,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23998,end:25073})}(wb.StylePopover);
wb.TextPopover=Wc;wb.TextPopover=Wc;wb.TextPopover=Wc;Object.assign(wb.popovers,{FillPopover:wb.FillPopover,IconPopover:wb.IconPopover,RectanglePopover:wb.RectanglePopover,ShadowPopover:wb.ShadowPopover,PointPopover:wb.PointPopover,LayoutPopover:wb.LayoutPopover});var xb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js");xb.Morph=ne;xb.morph=Gb;xb.StyleSheet=ie;xb.Text=Gc;xb.Icon=ub;xb.VerticalLayout=Pd;xb.GridLayout=mb;xb.HorizontalLayout=Hb;xb.pt=sc;xb.Rectangle=Ga;xb.Color=
rb;xb.LinearGradient=Fa;xb.rect=Db;xb.signal=vd;xb.once=Ja;xb.connect=Bc;xb.obj=Ub;xb.num=pb;xb.Window=Ca;xb.ColorPalette=md;xb.FillPopover=bf;xb.colorWidgets=je;xb.Slider=$c;xb.Popover=Na;xb.resource=ra;xb.WHEEL_URL="/lively.ide/assets/color-wheel.png";md=function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),nb=yb.hasOwnProperty("ColorPickerField")&&"function"===typeof yb.ColorPickerField?yb.ColorPickerField:yb.ColorPickerField=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"spec",value:function(){return xb.obj.dissoc(Mb._get(Object.getPrototypeOf(nb.prototype),"spec",this).call(this),["submorphs"])}},{key:"onKeyDown",value:function(Ha){"Escape"==Ha.key&&(this.picker&&this.picker.remove(),this.colorValue.isGradient?this.fillWidget.remove():this.palette.remove())}},{key:"onHoverIn",value:function(){this.get("dropDownIndicator").animate({opacity:1,duration:300})}},{key:"onHoverOut",
value:function(){this.get("dropDownIndicator").animate({opacity:0,duration:300})}},{key:"update",value:function(Ha){this._updating=!0;var R=this.submorphs[1];this.colorValue=Ha;this.get("topLeft").fill=Ha;this.get("bottomRight").fill=Ha.isGradient?xb.Color.transparent:Ha.withA(1);R.visible=R.isLayoutable=!this.gradientEnabled;this.gradientEnabled?this.get("bottomRight").width=this.get("topLeft").width=this.submorphs[0].width=this.width:this.get("bottomRight").width=this.get("topLeft").width=Math.max(1,
this.width-R.width);this.get("bottomRight").left=0;this.get("dropDownIndicator").right=this.get("paletteButton").width-5;this._updating=!1}},{key:"openPicker",value:function(Ha){var R=this,ya,$a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ab){if(1==Ab.nextAddress)return(ya=R.picker)?Ab.jumpTo(2):Ab.yield(xb.resource("part://SystemWidgets/new color picker").read(),3);2!=Ab.nextAddress&&(ya=Ab.yieldResult);$a=ya;$a.solidOnly=!R.gradientEnabled;$a.hasFixedPosition=!0;$a.focusOnMorph(R.context,
R.colorValue);$a.toggleHalos(!1);$a.position=xb.pt(0,-$a.height/2);xb.connect($a,"value",R,"update");R.picker=$a.openInWorld();R.picker.topLeft=R.globalBounds().bottomCenter();R.picker.topLeft=R.world().visibleBounds().translateForInclusion(R.picker.globalBounds()).topLeft();Ab.jumpToEnd()})}},{key:"removePicker",value:function(){this.picker&&this.picker.remove()}},{key:"openPalette",value:function(Ha){var R=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ya){R.openPicker(Ha);ya.jumpToEnd()})}},
{key:"removeWidgets",value:function(){this.removePicker()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPickerField"}},{key:"properties",get:function(){return{gradientEnabled:{defaultValue:!1,after:["colorValue"],set:function(Ha){this.setProperty("gradientEnabled",Ha);this.update(this.colorValue)}},fillWidget:{serialize:!1,get:function(){return this._fillWidget=new xb.FillPopover({fillValue:this.colorValue})}},testProp:{get:function(){return[42]}},palette:{serialize:!1,get:function(){return this._palette||
(this._palette=new xb.Popover({position:xb.pt(0,0),name:"Color Palette",targetMorph:new xb.ColorPalette({color:this.colorValue})}))}},colorValue:{after:["submorphs"],set:function(Ha){Ha&&(Ha.isColor||Ha.isGradient)||(Ha=xb.Color.blue);if(!this._updating)return this.update(Ha);this.setProperty("colorValue",Ha)},get:function(){return this.getProperty("colorValue")||xb.Color.white}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/color field"}}},submorphs:{initialize:function(){this.innerBounds().topRight();
this.innerBounds().bottomLeft();var Ha=xb.pt(40,25);this.submorphs=[{extent:Ha,clipMode:"hidden",name:"paletteButton",submorphs:[{name:"topLeft",extent:Ha},{name:"bottomRight",type:"polygon",extent:Ha,origin:xb.pt(0,0),vertices:[xb.pt(0,0),Ha.withX(0),Ha]},xb.Icon.makeLabel("chevron-down",{opacity:0,name:"dropDownIndicator",center:xb.pt(30,12.5)})]},{fill:xb.Color.transparent,extent:xb.pt(25,25),onHoverIn:function(){this.fill=xb.Color.black.withA(.2)},onHoverOut:function(){this.fill=xb.Color.transparent},
submorphs:[{name:"pickerButton",type:"image",autoResize:!1,imageUrl:xb.WHEEL_URL}]}];xb.connect(this.getSubmorphNamed("pickerButton"),"onMouseDown",this,"openPicker");xb.connect(this.getSubmorphNamed("paletteButton"),"onMouseDown",this,"openPalette");xb.connect(this,"remove",this,"removeWidgets");this.colorValue&&this.update(this.colorValue)}}}}}],yb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:689,end:5910})}(xb.Morph);xb.ColorPickerField=md;xb.ColorPickerField=md;xb.ColorPickerField=md;xb.colorWidgets.ColorPickerField=xb.ColorPickerField;(function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),nb=yb.hasOwnProperty("FieldPicker")&&"function"===typeof yb.FieldPicker?yb.FieldPicker:yb.FieldPicker=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Mb(nb,ze,[{key:"confirm",value:function(){xb.signal(this,"shadeChanged",[this.brightness,this.saturation])}},{key:"update",value:function(Ha){var R=$jscomp.makeIterator(Ha.color.toHSB());Ha=R.next().value;var ya=R.next().value;R=R.next().value;this.getSubmorphNamed("hue").fill=xb.Color.hsb(Ha,1,1);this.brightness=R;this.saturation=ya;this.refresh()}},{key:"refresh",value:function(){this.get("picker").center=this.pickerPosition}},{key:"onMouseDown",value:function(Ha){this.pickerPosition=
Ha.positionIn(this);this.confirm()}},{key:"onDrag",value:function(Ha){this.pickerPosition=Ha.positionIn(this);this.confirm()}},{key:"relayout",value:function(){var Ha=this.innerBounds();this.getSubmorphNamed("hue").setBounds(Ha);this.getSubmorphNamed("shade").setBounds(Ha);this.getSubmorphNamed("light").setBounds(Ha)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FieldPicker"}},{key:"properties",get:function(){return{fill:{defaultValue:xb.Color.transparent},saturation:{defaultValue:0},
brightness:{defaultValue:0},draggable:{defaultValue:!0},pickerPosition:{derived:!0,after:["submorphs","brightness","saturation"],get:function(){var Ha=this.saturation,R=this.brightness;return void 0===Ha||void 0===R?xb.pt(0,0):xb.pt(this.getSubmorphNamed("hue").width*Ha,this.getSubmorphNamed("hue").height*(1-R))},set:function(Ha){var R=Ha.x;Ha=Ha.y;var ya=this.getSubmorphNamed("hue"),$a=ya.height;this.saturation=xb.num.clamp(R/ya.width,0,1);this.brightness=xb.num.clamp(1-Ha/$a,0,1);this.refresh()}},
submorphs:{initialize:function(){this.submorphs=[{borderRadius:3,name:"hue",reactsToPointer:!1},{borderRadius:3,name:"shade",reactsToPointer:!1,fill:new xb.LinearGradient({stops:[{color:xb.Color.white,offset:0},{color:xb.Color.transparent,offset:1}],vector:"eastwest"})},{borderRadius:3,name:"light",reactsToPointer:!1,fill:new xb.LinearGradient({stops:[{color:xb.Color.black,offset:0},{color:xb.Color.transparent,offset:1}],vector:"southnorth"})},{name:"picker",type:"ellipse",reactsToPointer:!1,fill:xb.Color.transparent,
borderColor:xb.Color.black,borderWidth:3,extent:xb.pt(16,16),submorphs:[{type:"ellipse",fill:xb.Color.transparent,borderColor:xb.Color.white,reactsToPointer:!1,borderWidth:3,center:xb.pt(8,8),extent:xb.pt(12,12)}]}];xb.connect(this,"extent",this,"relayout")}}}}}],yb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:5964,end:9331})})(xb.Morph);(function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),nb=yb.hasOwnProperty("ColorPropertyView")&&"function"===typeof yb.ColorPropertyView?yb.ColorPropertyView:yb.ColorPropertyView=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"onFocus",value:function(){this.get("keyLabel").styleClasses=["key"].concat($jscomp.arrayFromIterable(this.readOnly?
[]:["large","active"]));this.styleClasses=[].concat($jscomp.arrayFromIterable(this.readOnly?[]:["editable","active"]),["value"]);this.selection.cursorBlinkStart()}},{key:"onBlur",value:function(){this.get("keyLabel").styleClasses=[!this.readOnly&&"large","key"];this.styleClasses=[!this.readOnly&&"editable","value"];this.selection.uninstall()}},{key:"onKeyDown",value:function(Ha){"Enter"!=Ha.keyCombo||this.readOnly?Mb._get(Object.getPrototypeOf(nb.prototype),"onKeyDown",this).call(this,Ha):(this.owner.focus(),
Ha.stop(),xb.signal(this,"updateValue",this.value))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPropertyView"}},{key:"properties",get:function(){return{update:{},value:{derived:[!0],set:function(Ha){this.textString=xb.obj.safeToString(Ha)},get:function(){return this.textString}},styleClasses:{after:["readOnly"],initialize:function(){this.styleClasses=[!this.readOnly&&"editable","value"]}},selectionColor:{defaultValue:xb.Color.gray.darker()}}}}],yb,{pathInPackage:function(){return"styling/color-picker.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:9340,end:10510})})(xb.Text);(function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),nb=yb.hasOwnProperty("HuePicker")&&"function"===typeof yb.HuePicker?yb.HuePicker:yb.HuePicker=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Mb(nb,ze,[{key:"confirm",value:function(){xb.signal(this,"hueChanged",this.hue)}},{key:"onMouseDown",value:function(Ha){var R=this.get("slider").width;this.sliderPosition=xb.pt(0,Ha.positionIn(this).y-R/2);this.confirm()}},{key:"onDrag",value:function(Ha){var R=this.get("slider").width;this.sliderPosition=xb.pt(0,Ha.positionIn(this).y-R/2);this.confirm()}},{key:"update",value:function(Ha){this.hue=Ha.hsb[0];this.refresh()}},{key:"refresh",value:function(){this.get("slider").center=
this.sliderPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HuePicker"}},{key:"properties",get:function(){return{fill:{defaultValue:new xb.LinearGradient({stops:[{color:xb.Color.rgb(255,0,0),offset:0},{color:xb.Color.rgb(255,255,0),offset:.17},{color:xb.Color.limeGreen,offset:.33},{color:xb.Color.cyan,offset:.5},{color:xb.Color.blue,offset:.66},{color:xb.Color.magenta,offset:.83},{color:xb.Color.rgb(255,0,0),offset:1}],vector:"northsouth"})},borderRadius:{defaultValue:3},
hue:{defaultValue:0},sliderPosition:{derived:!0,after:["submorphs"],get:function(){return xb.pt(this.width/2,5+this.hue/360*(this.height-10))},set:function(Ha){this.hue=Math.max(0,Math.min(Ha.y/(this.height-10)*360,359));this.refresh()}},submorphs:{initialize:function(){this.submorphs=[{name:"slider",height:10,width:50,borderRadius:3,reactsToPointer:!1,nativeCursor:"ns-resize",borderColor:xb.Color.black,fill:xb.Color.transparent,borderWidth:2}]}}}}}],yb,{pathInPackage:function(){return"styling/color-picker.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10512,end:12485})})(xb.Morph);(function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),nb=yb.hasOwnProperty("ColorDetails")&&"function"===typeof yb.ColorDetails?yb.ColorDetails:yb.ColorDetails=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"update",value:function(Ha){Ha=Ha.color;var R=$jscomp.makeIterator(Ha.toTuple8Bit()),ya=R.next().value,$a=R.next().value;R=R.next().value;var Ab=$jscomp.makeIterator(Ha.toHSB()),bc=Ab.next().value,Ec=Ab.next().value;Ab=Ab.next().value;var pc=this.get("hashViewer");this.get("colorViewer").fill=Ha;pc.replace(pc.documentRange,Ha.toHexString(),!1,!1);this.get("R").value="R "+ya.toFixed(0)+"\n\nG "+$a.toFixed(0)+
"\n\nB "+R.toFixed(0)+"\n\nH "+bc.toFixed(0)+"\n\nS "+Ec.toFixed(2)+"\n\nV "+Ab.toFixed(2)}},{key:"onHashViewerChanged",value:function(Ha){Ha=xb.Color.rgbHex(Ha);this.owner.owner.color=Ha}},{key:"keyValue",value:function(Ha){var R=Ha.name,ya=Ha.key,$a=Ha.value,Ab=Ha.update;Ha=Ha.editable;return new xb.Morph({fill:xb.Color.transparent,layout:new xb.HorizontalLayout({spacing:5}),submorphs:[{type:"label",name:"keyLabel",styleClasses:[Ha&&"large","key"],value:ya},new xb.ColorPropertyView({name:R||ya,
readOnly:!Ha,value:$a,update:Ab})]})}},{key:"hashViewer",value:function(){var Ha=this.keyValue({name:"hashViewer",key:"#",editable:!0,value:this.color.toHexString()});xb.connect(Ha.get("hashViewer"),"updateValue",this,"onHashViewerChanged");return Ha}},{key:"rgbViewer",value:function(){var Ha=$jscomp.makeIterator(this.color.toTuple8Bit()),R=Ha.next().value,ya=Ha.next().value;Ha=Ha.next().value;return new xb.Morph({name:"rgbViewer",fill:xb.Color.transparent,submorphs:[this.keyValue({key:"R",value:R.toFixed()}),
this.keyValue({key:"G",value:ya.toFixed()}),this.keyValue({key:"B",value:Ha.toFixed()})]})}},{key:"hsbViewer",value:function(){var Ha=$jscomp.makeIterator(this.color.toHSB()),R=Ha.next().value,ya=Ha.next().value;Ha=Ha.next().value;return new xb.Morph({name:"hsbViewer",fill:xb.Color.transparent,submorphs:[this.keyValue({key:"H",value:R.toFixed()}),this.keyValue({key:"S",value:ya.toFixed(2)}),this.keyValue({key:"V",value:Ha.toFixed(2)})]})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorDetails"}},
{key:"properties",get:function(){return{color:{defaultValue:xb.Color.blue},width:{defaultValue:80},fill:{defaultValue:xb.Color.transparent},layout:{initialize:function(){this.layout=new xb.VerticalLayout({spacing:9,layoutOrder:function(Ha){return this.container.submorphs.indexOf(Ha)}})}},submorphs:{after:["color"],initialize:function(){this.submorphs=[{type:"ellipse",extent:xb.pt(50,50),name:"colorViewer",fill:this.color},this.hashViewer(),{type:"label",name:"R",autofit:!0,padding:xb.rect(10,0,0,
0),styleClasses:["ColorPropertyView"]}];this.update(this)}}}}}],yb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:12494,end:15269})})(xb.Morph);md=Ma("a",function(ze){var yb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),nb=yb.hasOwnProperty("ColorPicker")&&
"function"===typeof yb.ColorPicker?yb.ColorPicker:yb.ColorPicker=function(Ha){Ha&&Ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Mb(nb,ze,[{key:"onKeyDown",value:function(Ha){"Escape"==Ha.key&&this.close()}},{key:"close",value:function(){Mb._get(Object.getPrototypeOf(nb.prototype),"close",this).call(this);xb.signal(this,"close")}},{key:"update",value:function(){0!=this.submorphs.length&&(this.get("header").fill=xb.Color.transparent,
this.get("field picker").update(this),this.get("hue picker").update(this),this.get("details").update(this),this.get("alpha slider").update(this.alpha),xb.signal(this,"color",this.color))}},{key:"colorPalette",value:function(){var Ha=this.colorDetails(),R=this.fieldPicker(),ya=this.huePicker(),$a=this.alphaSlider();Ha=new xb.Morph({master:{auto:"styleguide://SystemWidgets/color picker"},name:"colorPalette",width:this.width,submorphs:[R,ya,Ha,$a]});xb.connect(R,"brightness",this,"brightness");xb.connect(R,
"saturation",this,"saturation");xb.connect(ya,"hue",this,"hue");return Ha}},{key:"alphaSlider",value:function(){var Ha,R=xb.morph({name:"alphaSlider",fill:xb.Color.transparent,layout:new xb.HorizontalLayout({spacing:3}),submorphs:[{type:"label",padding:xb.Rectangle.inset(3),value:"Alpha",fontColor:xb.Color.gray,fontWeight:"bold"},Ha=new xb.Slider({name:"alpha slider",value:this.alpha,min:0,max:1,width:170})]});xb.connect(Ha,"value",this,"alpha");return R}},{key:"fieldPicker",value:function(){return new xb.FieldPicker({name:"field picker",
saturation:this.saturation,brightness:this.brightness})}},{key:"huePicker",value:function(){return new xb.HuePicker({name:"hue picker",hue:this.hue})}},{key:"colorDetails",value:function(){return new xb.ColorDetails({name:"details",color:this.color})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPicker"}},{key:"properties",get:function(){return{extent:{defaultValue:xb.pt(400,320)},fill:{defaultValue:xb.Color.black.withA(.7)},isHaloItem:{defaultValue:!0},borderWidth:{defaultValue:0},
hasFixedPosition:{defaultValue:!0},color:{defaultValue:xb.Color.blue,derived:!0,before:["submorphs","targetMorph"],get:function(){return xb.Color.hsb(this.hue,this.saturation,this.brightness).withA(this.alpha)},set:function(Ha){var R=$jscomp.makeIterator(Ha.toHSB()),ya=R.next().value,$a=R.next().value;R=R.next().value;this.hue=ya;this.saturation=$a;this.brightness=R;this.alpha=Ha.a}},alpha:{set:function(Ha){this.setProperty("alpha",Ha);this.update()}},saturation:{},brightness:{set:function(Ha){this.setProperty("brightness",
Ha);this.update()}},hue:{set:function(Ha){this.setProperty("hue",Ha);this.update()}},targetMorph:{initialize:function(){var Ha=this;this.targetMorph=this.colorPalette();this.ui.windowTitle.fontColor=xb.Color.gray;this.ui.header.fill=xb.Color.transparent;this.whenRendered().then(function(){Ha.fill=xb.Color.black.withA(.7);Ha.update()})}}}}}],yb,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:15278,end:19116})}(xb.Window));xb.ColorPicker=md;xb.ColorPicker=md;xb.ColorPicker=md}}});