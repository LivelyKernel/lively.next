System.register("./__root_module__-aefa9179.js kld-intersections ./index-ea95c5b9.js ./index-9b6165d2.js ./index-3100fe37.js ./color-picker-4e266839.js ./editor-plugin-14253833.js ./index-dd2e460a.js ./editor-plugin-5dc708ee.js ./index-bde6215a.js".split(" "),function(){var Da,Bb,Qb,hc,ac,be,bd,Sd,ed,Mc,pd,Dd,ke,Kd,jd,cb,Ab,Yb,gc,dd,Zd,Wb,oc,Lb,Bc,Sc,Yc,Xb,qb,uc,Hc,Ia,Va,tb,Jb,Ib,ib,jb,Fb,rc,Ic;return{setters:[function(ec){Da=ec.as;Bb=ec.ai;Qb=ec.aA;hc=ec.av;ac=ec.a3;be=ec.at;bd=ec.aq;Sd=ec.au;
ed=ec.C;Mc=ec.a2;pd=ec.a6;Dd=ec.$;ke=ec.aW;Kd=ec.P;jd=ec.a7;cb=ec.aB;Ab=ec.ak;Yb=ec.aV;gc=ec.ao;dd=ec.al;Zd=ec.an;Wb=ec.bq;oc=ec.bs;Lb=ec.bR;Bc=ec.b2;Sc=ec.bi;Yc=ec.aN;Xb=ec.n;qb=ec.a1;uc=ec.bS;Hc=ec.aX;Ia=ec.aY;Va=ec.ap;tb=ec.a4;Jb=ec.ar;Ib=ec.bT},function(){},function(){},function(){},function(ec){ib=ec.d;jb=ec.s;Fb=ec.I;rc=ec.M},function(){},function(ec){Ic=ec.I},function(){},function(){},function(){}],execute:function(){function ec(fd){var lb=fd.sourceObj,Hd=fd.targetObj;lb.isMorph&&Hd.isMorph?
(lb.show(),Hd.show(),md.showConnector&&md.showConnector(lb,Hd)):md.show(String(fd))}function Pc(fd){var lb=fd.sourceObj,Hd=fd.sourceAttrName,db=fd.targetObj,rb=fd.targetMethodName,vb=fd.getConverter();fd=fd.getUpdater();return md.printConnectionElements(lb,Hd,db,rb,vb,fd)}function Q(fd,lb,Hd,db,rb,vb){fd="/* global connect, source, target */\nconnect(source, '"+lb+"', target, '"+db+"'";if(rb||vb)fd+=", {\n";rb&&(fd+="  converter: "+rb);rb&&vb&&(fd+=",");rb&&(fd+="\n");vb&&(fd+="  updater: "+vb+"\n");
if(rb||vb)fd+="}";return fd+");"}function ha(fd,lb){var Hd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(db){if(1==db.nextAddress)return db.yield(md.InteractiveMorphSelector.selectMorph(),2);Hd=db.yieldResult;return db.return(Hd?md.interactiveConnectGivenSourceAndTarget(fd,lb,Hd):null)})}function Ha(fd,lb,Hd,db){var rb,vb,vd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(me){rb=Hd&&Hd.world().targetDataBindings(Hd);vb=fd.world();if(!rb||!rb.length)return vb.setStatusMessage("connect canceled"),
me.return();vd=rb.map(function(ye){return[ye[0].group||"uncategorized",ye.map(function(Pe){return[Pe.signature||Pe.name,function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Tc){return 1==Tc.nextAddress?Tc.yield(md.interactivelyEvaluateConnection({sourceObj:fd,sourceAttr:lb,targetObj:Hd,targetAttr:Pe.name,onConnect:db}),2):Tc.return(Tc.yieldResult)})}]})]});vd.push(["custom...",function(){var ye;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pe){return 1==Pe.nextAddress?
Pe.yield(vb.prompt("Enter custom connection point",{requester:$world,historyId:"lively.morphic-custom-connection-points",useLastInput:!0}),2):(ye=Pe.yieldResult)?Pe.yield(md.interactivelyEvaluateConnection({sourceObj:fd,sourceAttr:lb,targetObj:Hd,targetAttr:ye,onConnect:db}),0):Pe.jumpTo(0)})}]);return me.yield(Hd.openMenu(vd).whenFinished(),0)})}function Pa(fd,lb,Hd,db){lb=void 0===lb?"confirm connection":lb;var rb,vb,vd,me,ye,Pe,Tc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(re){rb=
fd;vb=rb.sourceObj;vd=rb.sourceAttrName;me=rb.targetObj;ye=rb.targetMethodName;Pe=fd.getConverter();Tc=fd.getUpdater();return re.return(md.interactivelyEvaluateConnection({sourceObj:vb,sourceAttr:vd,targetObj:me,targetAttr:ye,converter:Pe,updater:Tc,prompt:lb,highlight:Hd,onConnect:db}))})}function bc(fd,lb,Hd,db,rb){db=void 0===db?{}:db;rb=md.rect(0).sides.concat(md.rect(0).corners);Hd=Hd||new md.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:md.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:md.Color.transparent,
nativeCursor:"auto"},end:{fill:md.Color.orange}}},db,{hasFixedPosition:!0}));Hd.startPoint.attachTo(fd,"rightCenter");lb.isMorph?(db=lb.globalBounds().partNameNearest(rb,fd.globalPosition),fd.globalPosition.equals(lb.globalBounds().partNamed(db))&&lb.globalBounds().partNameNearest(md.arr.without(rb,db),fd.globalPosition),Hd.endPoint.attachTo(lb,"leftCenter")):(rb=fd.globalBounds().topRight().addPt(md.pt(100,0)),lb=md.morph({type:"label",value:lb.toString(),styleClasses:["Tooltip"],padding:md.rect(8,
4)}).openInWorld(rb),lb.position=fd.world().bounds().translateForInclusion(lb.bounds()).topLeft(),md.once(Hd,"remove",lb,"remove"),Hd.endPoint.attachTo(lb,"leftCenter"));return Hd}function ic(fd){var lb,Hd,db,rb,vb,vd,me,ye,Pe,Tc,re,Ed,Nb,wa,Ba,Mb,P,ya,Ua,Eb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Cc){switch(Cc.nextAddress){case 1:lb=fd;Hd=lb.sourceObj;db=lb.sourceAttr;rb=lb.targetObj;vb=lb.targetAttr;vd=lb.converter;me=lb.updater;ye=lb.prompt;Pe=void 0===lb.highlight?!0:lb.highlight;
Tc=lb.onConnect;re="lively://lively.bindings-interactive-connect/x"+Hd.id;Ed={context:window,format:"esm",targetModule:re,classTransform:md.classToFunctionTransform};Nb=md.printConnectionElements(Hd,db,rb,vb,vd,me);rb.isMorph&&Hd.isMorph&&(wa=rb.propertiesAndPropertySettings().properties[vb]||{type:typeof rb[vb]},Ba=wa.type,Mb=Hd.propertiesAndPropertySettings().properties[db]||{type:typeof Hd[db]},P=Mb.type,P!==Ba&&(ye=!0));ya={};Object.assign(lively.modules.module(re).recorder,(ya.source=Hd,ya.target=
rb,ya.connect=bd,ya.once=Sd,ya[db]=Hd[db],ya));if(!ye){Ua=Nb;Cc.jumpTo(2);break}return Cc.yield($world.editPrompt(ye,{input:Nb,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:Ed,animated:!1}),3);case 3:if(Ua=Cc.yieldResult,!Ua)return $world.setStatusMessage("connect canceled"),Cc.return();case 2:return Cc.yield(lively.vm.runEval(Ua,Ed),4);case 4:Eb=Cc.yieldResult;if(Eb.isError)return $world.logError(Eb.value),Cc.return(ic({sourceObj:Hd,sourceAttr:db,
targetObj:rb,targetAttr:vb,converter:vd,updater:me,prompt:"confirm connection",highlight:Pe,onConnect:Tc}));Pe&&($world.setStatusMessage("connected!",md.Color.green),md.interactivelyShowConnection(Eb.value));"function"===typeof Tc&&Tc(Eb);Cc.jumpToEnd()}})}var Ra=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");Ra.Inspector=Ic;var tc=function(fd){var lb=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),Hd=lb.hasOwnProperty("ProtoInspector")&&"function"===typeof lb.ProtoInspector?
lb.ProtoInspector:lb.ProtoInspector=function(db){db&&db[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Hd,fd,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],lb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(Ra.Inspector);tc=Ra.ProtoInspector;Ra.default=tc;var Qd=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");Qd.Morph=Bb;Qd.touchInputDevice=Qb;Qd.easings=hc;Qd.pt=ac;Qd.fun=be;Qd.connect=bd;Ra=function(fd){var lb=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),Hd=lb.hasOwnProperty("MorphicSideBar")&&"function"===typeof lb.MorphicSideBar?lb.MorphicSideBar:lb.MorphicSideBar=function(db){db&&
db[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Hd,fd,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",value:function(db){db=void 0===db?!0:db;if(this.respondsToVisibleWindow){var rb=$world.visibleBounds(),vb=navigator.standalone&&Qd.touchInputDevice?25:0;this.height=rb.height-vb;this.top=vb+rb.top();vb=this.get("horizontal resizer");vb.height=this.height;vb.top=0;db&&(this.visible?this.topLeft=
rb.topLeft():this.topRight=rb.topLeft())}}},{key:"switchMode",value:function(db){"inspector"==db&&this.showInspector();"connections"==db&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(db){var rb=this,vb,vd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(me){switch(me.nextAddress){case 1:vb=
$world.visibleBounds();vd=navigator.standalone&&Qd.touchInputDevice?25:0;rb.height=vb.height-vd;rb.top=vd+vb.top();if(db)return $world.addMorph(rb,$world.get("lively top bar")),rb.right=0,rb.attachToWorld($world),rb.visible=!0,me.yield(rb.whenRendered(),5);rb.detachFromWorld($world);return me.yield(rb.animate({opacity:0,right:0,duration:300}),4);case 4:rb.visible=!1;rb.remove();me.jumpTo(0);break;case 5:return rb.onWorldResize(!1),rb.get("scene graph").adjustProportions(),me.yield(rb.animate({opacity:1,
easing:Qd.easings.outCirc,left:1,duration:300}),6);case 6:rb.get("scene graph").refresh(),me.jumpToEnd()}})}},{key:"attachToWorld",value:function(db){Qd.connect(db,"onChange",this,"onHierarchyChange",{garbageCollect:!0});Qd.connect(db,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});Qd.connect(db,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(db){var rb=this;db.attributeConnections.forEach(function(vb){vb.targetObj===rb&&vb.disconnect()})}},
{key:"selectNode",value:function(db){this.getSubmorphNamed("scene graph").selectMorphInTarget(db);this.getSubmorphNamed("connections tree").inspectConnectionsOf(db)}},{key:"onHierarchyChange",value:function(db){var rb=this,vb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vd){if("addMorphAt"===db.selector||"removeMorph"===db.selector||"name"===db.prop){vb=rb._sceneGraph||(rb._sceneGraph=rb.getSubmorphNamed("scene graph"));if(!vb||!vb.owner.visible||db.target&&db.target.isHand||db.target&&
vb.ignoreMorph(db.target)||db.args&&!db.args[0].isHalo&&vb.ignoreMorph(db.args[0])||db.target.ownerChain().find(function(me){return vb.ignoreMorph(me)}))return vd.return();Qd.fun.debounceNamed("scene-graph-update",50,function(){return vb.refresh()})()}vd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],lb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-70"}}},{start:226,end:3612})}(Qd.Morph);Ra=Qd.MorphicSideBar;Qd.default=Ra;var md=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");md.interactivelyShowConnection=ec;md.printConnection=Pc;md.printConnectionElements=Q;md.interactiveConnectGivenSource=ha;md.interactiveConnectGivenSourceAndTarget=Ha;md.interactivelyReEvaluateConnection=Pa;md.visualizeConnection=
bc;md.interactivelyEvaluateConnection=ic;md.connect=bd;md.once=Sd;md.Color=ed;md.rect=Mc;md.pt=ac;md.arr=pd;md.promise=Dd;md.properties=ke;md.Path=Kd;md.obj=jd;md.HorizontalLayout=cb;md.Morph=Bb;md.VerticalLayout=Ab;md.StyleSheet=Yb;md.Icon=gc;md.GridLayout=dd;md.morph=Zd;md.TreeData=Wb;md.Tree=oc;md.Leash=Lb;md.LabeledCheckBox=Bc;md.SearchField=Sc;md.showConnector=ib;md.show=jb;md.InteractiveMorphSelector=Fb;md.MorphHighlighter=rc;md.Window=Yc;md.classToFunctionTransform=Xb;md.interactivelyShowConnection=
ec;md.interactivelyShowConnection=ec;md.printConnection=Pc;md.printConnection=Pc;md.printConnectionElements=Q;md.printConnectionElements=Q;md.interactiveConnectGivenSource=ha;md.interactiveConnectGivenSource=ha;md.interactiveConnectGivenSourceAndTarget=Ha;md.interactiveConnectGivenSourceAndTarget=Ha;md.interactivelyReEvaluateConnection=Pa;md.interactivelyReEvaluateConnection=Pa;md.visualizeConnection=bc;md.visualizeConnection=bc;md.interactivelyEvaluateConnection=ic;md.interactivelyEvaluateConnection=
ic;var $c=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");$c.Tree=oc;$c.TreeData=Wb;$c.morph=Zd;$c.Icon=gc;$c.HorizontalLayout=cb;$c.easings=hc;$c.Morph=Bb;$c.Color=ed;$c.Rectangle=qb;$c.rect=Mc;$c.pt=ac;$c.connect=bd;$c.noUpdate=uc;$c.disconnect=Hc;$c.disconnectAll=Ia;$c.once=Sd;$c.arr=pd;$c.num=Va;$c.fun=be;$c.tree=tb;$c.promise=Dd;$c.ConnectionHalo=_missingExportShim;Ra=function(fd){var lb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Hd=lb.hasOwnProperty("InteractiveTreeContainer")&&
"function"===typeof lb.InteractiveTreeContainer?lb.InteractiveTreeContainer:lb.InteractiveTreeContainer=function(db){db&&db[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Hd,fd,[{key:"onChildRemoved",value:function(db){}},{key:"onChildAdded",value:function(db){}},{key:"toggleSelected",value:function(db){if(this.tree){var rb=this.tree,vb=rb.selectionFontColor,vd=rb.nonSelectionFontColor;this.submorphs.filter(function(me){return!me._isControlElement&&
me.styleClasses.includes("Label")}).forEach(function(me){me.fontColor=db?vb:vd})}}},{key:"onGrab",value:function(db){var rb=this.tree,vb=this.node;this.fill=$c.Color.gray.withA(.5);this.fontColor=rb.selectionFontColor;this.opacity=.8;Da._get(Object.getPrototypeOf(Hd.prototype),"onGrab",this).call(this,db);vb&&(this.toggleSelected(!1),rb.collapse(vb),rb.treeData.parentNode(vb).container.onChildRemoved(this),this._data=rb.treeData.remove(vb),vb.container.target.remove(),rb.update(!0))}},{key:"wantsToBeDroppedOn",
value:function(db){this.showPreviewOn(db);return!0}},{key:"showPreviewOn",value:function(db){if(db.isContainer)var rb=db.tree;db.isTree&&(rb=db);rb&&rb.showDropPreviewFor&&rb.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(db){var rb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vb){if(1==vb.nextAddress)return rb.tree.treeData.add(db._data,rb.node,rb.node.children[0]),rb.tree.uncollapse(rb.node),rb.tree.treeData.remove(rb.tree._previewNode),vb.yield(rb.tree.whenRendered(),
2);rb.tree.update(!0);rb.onChildAdded(db);vb.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(db,rb){var vb=this;debugger;this.tree._dropInProgress=!0;Da._get(Object.getPrototypeOf(Hd.prototype),"onBeingDroppedOn",this).call(this,db,rb);db=function(){vb.fill=$c.Color.gray.withA(.5);vb.opacity=1;vb.tree._dropInProgress=!1;vb.tree.refresh()};rb.isTree?rb.insertAtPlaceholder(this).then(db):rb.isContainer?rb.insertAsChild(this).then(db):db()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},
{key:"properties",get:function(){return{fill:{defaultValue:$c.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var db=this,rb=this.tree.treeData;return rb&&rb.asList().find(function(vb){return vb.container===db})}}}}}],lb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1102"}}},{start:447,end:2927})}($c.Morph);$c.InteractiveTreeContainer=Ra;$c.InteractiveTreeContainer=Ra;$c.InteractiveTreeContainer=Ra;Ra=function(fd){var lb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Hd=lb.hasOwnProperty("InteractiveTreeData")&&"function"===typeof lb.InteractiveTreeData?lb.InteractiveTreeData:lb.InteractiveTreeData=function(db){db&&db[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Hd,
fd,[{key:"display",value:function(db){return[db.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(db){return db.isCollapsed}},{key:"collapse",value:function(db,rb){db.isCollapsed=rb}},{key:"getChildren",value:function(db){var rb=this;return db.isLeaf?null:db.children.filter(function(vb){return vb&&(rb.filterActive?vb.visible:!0)})}},{key:"isLeaf",value:function(db){var rb=this;return!db.children||0==db.children.filter(function(vb){return vb&&(rb.filterActive?vb.visible:!0)}).length}},
{key:"add",value:function(db,rb,vb){rb=void 0===rb?this.root:rb;rb.children||(rb.children=[]);vb?$c.arr.pushAt(rb.children,db,rb.children.indexOf(vb)):rb.children.push(db);rb.isLeaf=!1}},{key:"replace",value:function(db,rb){var vb=this.parentNode(db);db=vb.children.indexOf(db);vb.children[db]=rb}},{key:"next",value:function(db){var rb=this.parentNode(db);return rb&&rb.children[rb.children.indexOf(db)+1]}},{key:"isBefore",value:function(db,rb){this.next(db)===rb}},{key:"isAfter",value:function(db,
rb){this.next(rb)===db}},{key:"addBefore",value:function(db,rb){this.add(db,this.parentNode(rb),rb)}},{key:"addAfter",value:function(db,rb){var vb=this.parentNode(rb);rb=vb.children.indexOf(rb)+1;this.add(db,vb,vb.children[rb])}},{key:"remove",value:function(db){var rb=this.parentNode(db);if(rb)return $c.arr.remove(rb.children,db),rb.children==[]&&(rb.children=null),db}},{key:"filter",value:function(db,rb){rb=void 0===rb?1:rb;var vb=this,vd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(me){if(1==
me.nextAddress)return me.yield(vb.uncollapseAll(function(ye,Pe){return Pe<rb+1}),2);vd=vb.filterActive;vb.filterActive=!1;vb.asListWithIndexAndDepth(!1).reverse().forEach(function(ye){var Pe=ye.node;if(0==ye.depth)return Pe.visible=!0;Pe.visible=db(Pe);Pe.visible||Pe.isCollapsed||!Pe.children.find(function(Tc){return Tc.visible})?Pe.container.opacity=1:(Pe.visible=!0,Pe.container.opacity=.5);return Pe.visible});vb.filterActive=vd;me.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],
lb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:2936,end:5375})}($c.TreeData);$c.InteractiveTreeData=Ra;$c.InteractiveTreeData=Ra;$c.InteractiveTreeData=Ra;Ra=function(fd){var lb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Hd=lb.hasOwnProperty("InteractiveTree")&&
"function"===typeof lb.InteractiveTree?lb.InteractiveTree:lb.InteractiveTree=function(db){db&&db[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Hd,fd,[{key:"update",value:function(db){var rb=this;Da._get(Object.getPrototypeOf(Hd.prototype),"update",this).call(this,db);this.treeData&&this.relayoutContainers();db&&this.embeddedMorphs.forEach(function(vb){vb.isContainer&&(vb.fill=$c.Color.transparent,vb.fontFamily=rb.fontFamily,
vb.fontSize=rb.fontSize)})}},{key:"onDrop",value:function(db){Da._get(Object.getPrototypeOf(Hd.prototype),"onDrop",this).call(this,db);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(db){}},{key:"onDropHoverUpdate",value:function(db){}},{key:"onDropHoverOut",value:function(db){}},{key:"onHoverOut",value:function(db){var rb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vb){Da._get(Object.getPrototypeOf(Hd.prototype),"onHoverOut",rb).call(rb,
db);rb._previewNode&&rb._previewNode.container.world()&&rb.treeData.remove(rb._previewNode);rb.resetContainerSelection();rb.update(!0);vb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(db){var rb=this,vb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vd){if(1==vd.nextAddress)return vb=rb.treeData.parentNode(rb._previewNode),rb.treeData.replace(rb._previewNode,db._data),rb.treeData.remove(rb._previewNode),vd.yield(rb.whenRendered(),2);rb.update(!0);vb.container.onChildAdded(db);
vd.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var db=this;if(!this._scrollingUp){this._scrollingUp=!0;var rb=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(vb){if(1==vb.nextAddress)return db._scrollingUp&&0<db.scroll.y?vb.yield(db.animate({scroll:db.scroll.subXY(0,30),duration:300,easing:$c.easings.linear}),3):(db._scrollingUp=!1,vb.jumpTo(0));rb();vb.jumpToEnd()})};rb()}}},{key:"scrollDownSlowly",value:function(){var db=this;if(!this._scrollingDown){this._scrollingDown=
!0;var rb=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(vb){if(1==vb.nextAddress)return db._scrollingDown&&db.scroll.y<db.scrollExtent.y-db.height?vb.yield(db.animate({scroll:db.scroll.addXY(0,30),duration:300,easing:$c.easings.linear}),3):(db._scrollingDown=!1,vb.jumpTo(0));rb();vb.jumpToEnd()})};rb()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(db){db.isContainer&&
(db.fill=$c.Color.transparent)})}},{key:"showDropPreviewFor",value:function(db){var rb=this;db=this.localize(db.globalBounds().center());var vb=this.textPositionFromPoint(db),vd=this.treeData.asListWithIndexAndDepth(function(Ed){Ed=Ed.node;return Ed!=rb._previewNode&&Ed.container.world()}),me=(vd.find(function(Ed){return Ed.i-1===vb.row})||{}).node,ye=me&&me.container,Pe=this.ensurePlaceholder(),Tc=!!Pe.container.world(),re=db.subPt(this.scroll).subPt(this.scrollbarOffset);10>re.y?this.scrollUpSlowly():
re.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!ye){if(vd.length>vb.row||$c.arr.last(this.treeData.root.children)===Pe)return;this.treeData.remove(Pe);this.treeData.add(Pe);this.update(!0)}if(ye){vd=this.textLayout.boundsFor(this,vb);if(4>Math.abs(vd.top()-db.y)){if(this.treeData.isBefore(Pe,me))return;this.treeData.remove(Pe);this.treeData.addBefore(Pe,me)}else if(4>Math.abs(vd.bottom()-db.y)&&(me.isCollapsed||this.treeData.isLeaf(me))){if(this.treeData.isAfter(Pe,
me))return;this.treeData.remove(Pe);this.treeData.addAfter(Pe,me)}else{ye.fill=$c.Color.gray;if(!Tc)return;this.treeData.remove(Pe)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var db=$c.pt(this.width-100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:$c.morph({acceptsDrops:!1,reactsToPointer:!1,fill:$c.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=db;return this._previewNode}},{key:"relayoutContainers",
value:function(){var db=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(rb){return rb.height});this.treeData.asListWithIndexAndDepth().forEach(function(rb){var vb=rb.node;rb=rb.i;vb.container.nativeCursor="grab";vb.container.width=db.width-25-vb.container.left;vb.container.toggleSelected&&vb.container.toggleSelected(rb==db.selectedIndex)});this.anchors.forEach(function(rb){return rb.position=rb.position})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"InteractiveTree"}}],lb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:5384,end:10721})}($c.Tree);$c.InteractiveTree=Ra;$c.InteractiveTree=Ra;$c.InteractiveTree=Ra;Ra=function(fd){var lb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Hd=lb.hasOwnProperty("SceneGraphTree")&&
"function"===typeof lb.SceneGraphTree?lb.SceneGraphTree:lb.SceneGraphTree=function(db){db&&db[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Hd,fd,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(db){var rb=this.treeData.asList().find(function(vb){return vb.container.target===db});rb&&this.selectedNode!=rb&&this.selectPath(this.treeData.pathOf(rb))}},{key:"onLoad",
value:function(){var db=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rb){if(1==rb.nextAddress)return db.submorphs=[],rb.yield(db.whenRendered(),2);db.get("inspector").makeEditorVisible(!0);db.get("inspector").makeEditorVisible(!1);db.setTarget($world);rb.jumpToEnd()})}},{key:"adjustProportions",value:function(db){db=(db?db.state.dragDelta:{y:0}).y;var rb=this.get("inspector"),vb=this.get("scene graph resizer"),vd=this.get("mode selector"),me=this.get("connections tree");this.height+=
db;rb.height-=db;me.height-=db;vb.top=this.bottom;vb.left=0;vd.top=vb.bottom;me.top=rb.top=vd.bottom+5}},{key:"reset",value:function(){var db=this;this.treeData=new $c.InteractiveTreeData({children:[],container:$c.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(rb){return null==rb.id}).forEach(function(rb){return db.removeAnchor(rb)})}},{key:"setTarget",value:function(db){this.target=db;this.treeData=this.getTreeFromSubmorphHierarchy(db);this.uncollapse(this.treeData.root)}},
{key:"isNodeOutOfSync",value:function(db){var rb=this;if(db===this._previewNode)return!1;if(db.container.nameNeedsUpdate)return!0;var vb=db.container.target.submorphs.filter(function(vd){return!rb.ignoreMorph(vd)});return vb.length!=db.children.length||vb.map(function(vd){return vd.name}).join("")!=db.children.map(function(vd){return vd.target?vd.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(db){var rb=this,vb=db.container.target.submorphs.map(function(Tc){return Tc.__scene_graph_target__?
Tc.__scene_graph_target__():Tc}).filter(function(Tc){return!rb.ignoreMorph(Tc)}),vd=[],me={},ye;for(ye in vb){me.$jscomp$loop$prop$m$2265=vb[ye];var Pe=$c.arr.without(db.children,this._previewNode).find(function(Tc){return function(re){return re.container.target.id==Tc.$jscomp$loop$prop$m$2265.id}}(me));vd[ye]=Pe?Pe:this.readMorphHierarchy(me.$jscomp$loop$prop$m$2265);me={$jscomp$loop$prop$m$2265:me.$jscomp$loop$prop$m$2265}}return vd}},{key:"refresh",value:function(){var db=this;if(!this._updating&&
!this._dropInProgress){var rb=!1;$c.tree.prewalk(this.treeData.root,function(vb){db.isNodeOutOfSync(vb)&&(rb=!0,vb.name=vb.container.target.name,vb.container.refresh(),vb.children=db.getNewChildren(vb))},function(vb){return vb.children});this.update(rb)}}},{key:"ignoreMorph",value:function(db){return db.isMorph?db.isContainer||db.isWindow||db.getWindow()||db.isEpiMorph||db.isHand||["lively.halos"].includes(db.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler",
"UserFlap","Menu"].includes(db.constructor.name):!1}},{key:"onDropHoverOut",value:function(db){var rb=db.hand.grabbedMorphs[0];db=db.hand.findDropTarget();if(!(db===this||db&&db.ownerChain().includes(this))&&rb&&rb.isContainer)rb.onDragOutside()}},{key:"onDropHoverIn",value:function(db){var rb=db.hand.grabbedMorphs[0];rb&&!rb.isContainer&&($world.halos().forEach(function(vb){return vb.remove()}),rb.remove(),Object.assign(rb,db.hand._grabbedMorphProperties.get(rb).pointerAndShadow),rb=this.renderContainerFor(rb,
!1),db.hand.grab(rb),rb.leftCenter=$c.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(db){return new $c.InteractiveTreeData(this.readMorphHierarchy(db))}},{key:"readMorphHierarchy",value:function(db){var rb=this;return $c.tree.mapTree(db,function(vb,vd){return{name:vb.name,isCollapsed:!0,container:rb.renderContainerFor(vb),visible:!0,children:vd}},function(vb){return vb.submorphs.filter(function(vd){return vb.isWorld?!rb.ignoreMorph(vd):!0})})}},{key:"renderContainerFor",value:function(db,
rb){db=void 0===db?$c.morph({name:"root"}):db;rb=new $c.MorphContainer({tree:this,fill:void 0===rb||rb?$c.Color.transparent:$c.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:db,opacity:db.visible?1:.5});db._data?(rb._data=db._data,db._data.container=rb):rb._data={name:db.name,isCollapsed:!0,container:rb,children:[]};return rb}},{key:"collapseAll",value:function(){var db=this;this.treeData.asList().forEach(function(rb){return rb!=db.treeData.root?rb.isCollapsed=
!0:rb.isCollapsed=!1})}},{key:"filterMorphs",value:function(db){var rb=this,vb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vd){if(1==vd.nextAddress)return vb=db.tokens[0],rb.treeData.filterActive||(rb._collapseState=new WeakMap(rb.treeData.asList().map(function(me){return[me,me.isCollapsed]}))),rb.treeData.filterActive=!!vb,vd.yield(rb.treeData.filter(function(me){var ye=!vb||me.container.target.name.includes(vb);me.container.highlightTerm(vb);return ye},3),2);rb.treeData.filterActive||
rb.treeData.asList().forEach(function(me){return me.isCollapsed=rb._collapseState.has(me)?rb._collapseState.get(me):!0});rb.refresh();vd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],lb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1102"}}},{start:10730,end:17203})}($c.InteractiveTree);$c.SceneGraphTree=Ra;$c.SceneGraphTree=Ra;$c.SceneGraphTree=Ra;Ra=function(fd){var lb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Hd=lb.hasOwnProperty("MorphContainer")&&"function"===typeof lb.MorphContainer?lb.MorphContainer:lb.MorphContainer=function(db){db&&db[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Hd,fd,[{key:"refresh",value:function(){var db=
this,rb,vb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vd){rb=db.target;if(!rb)return vd.return();db.reactsToPointer=!0;db.dropShadow=!1;db.submorphs=[db.getLabel(),rb.layout&&db.getLayoutControls(),db.getConnectionControls()].filter(Boolean).map(function(me,ye){me.fitIfNeeded();me.left=vb?vb.right+5:0;me.top=2;return vb=me});db.height=20;db.opacity=rb.visible?1:.5;vd.jumpToEnd()})}},{key:"getLabel",value:function(){var db=this.getSubmorphNamed("name label")||$c.morph({type:"label",
name:"name label",reactsToPointer:!1,padding:$c.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),rb=db.textString.slice(2,-1);rb&&rb==this.target.name||(db.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return db}},{key:"getIcon",value:function(db){return $c.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[db.constructor.className]||
"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var db=this.getSubmorphNamed("layout label")||$c.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:$c.Rectangle.inset(4,2,4,2),fill:$c.Color.orange,fontColor:$c.Color.white});db._isControlElement=!0;db.textString!=this.target.layout.name()&&(db.value=this.target.layout.name());return db}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(vb){return!vb.targetObj.isHalo}).length:0;var db=this.getSubmorphNamed("connections label")||$c.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:$c.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:$c.Color.red,fontColor:$c.Color.white});db._isControlElement=!0;db.visible=!this.connectionHalo&&!!this.connectionCount;var rb=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";db.textString!=rb&&(db.value=rb);return db}},{key:"highlightTerm",value:function(db){var rb=this.submorphs[0],vb=rb.textAndAttributes.slice(0,2),vd=rb.textString.slice(1).split(db);rb.textAndAttributes=1===vd.length?[].concat($jscomp.arrayFromIterable(vb),[vd[0]]):[].concat($jscomp.arrayFromIterable(vb),$jscomp.arrayFromIterable($c.arr.flatten($c.arr.interpose(vd.map(function(me){return[me,{}]}),[db,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(db){var rb=Da._get(Object.getPrototypeOf(Hd.prototype),"wantsToBeDroppedOn",this).call(this,db);if(![db].concat($jscomp.arrayFromIterable(db.ownerChain())).includes(this.tree))this.onDragOutside();return rb}},{key:"onGrab",value:function(db){var rb=this,vb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vd){if(1==vd.nextAddress)return rb.tree._dropInProgress=!0,vb=rb.target.globalPosition,Da._get(Object.getPrototypeOf(Hd.prototype),
"onGrab",rb).call(rb,db),rb._data.globalTargetPosition=vb,vd.yield(rb.whenRendered(),2);if(rb.tree.fullContainsWorldPoint(rb.globalPosition))rb.leftCenter=$c.pt(-20,0);else rb.onDragOutside();rb.tree._dropInProgress=!1;vd.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=$c.fun.createQueue("container-hover-queue",function(db,rb){var vb,vd,me;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ye){if(1==ye.nextAddress)return vb=
db.target,vd=vb.opacity,me=vb.scale,db.target.opacity=0,db.target.scale=.5,$world.halos().forEach(function(Pe){return Pe.remove()}),$world.firstHand.grab(db.target),db.target._data=db._data,db.remove(),db.target.position=$c.pt(0,0),ye.yield(db.target.animate({opacity:vd,scale:me,duration:200}),2);rb();ye.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(db){var rb=this.node.children.indexOf(db.node||db._data)+1;rb=this.node.children[rb];db.target.remove();rb?(rb=this.target.submorphs.indexOf(rb.container.target),
this.target.addMorphAt(db.target,rb)):this.target.addMorph(db.target);db._data.globalTargetPosition&&(db.target.position=this.target.localize(db._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(db){}},{key:"toggleConnectionControl",value:function(db){this.getSubmorphNamed("connections label").visible=db}},{key:"toggleSelected",value:function(db){var rb=this,vb,vd,me;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ye){if(1==ye.nextAddress)return Da._get(Object.getPrototypeOf(Hd.prototype),
"toggleSelected",rb).call(rb,db),rb._active===db?ye.return():(rb._active=db)&&rb.target&&rb.target.isMorph&&rb.world()?ye.yield(rb.target.whenRendered(),3):ye.jumpTo(0);rb.get("inspector").targetObject=rb.target;rb.get("connections tree").inspectConnectionsOf(rb.target);if(rb.connectionHalo)return ye.return();vb=$jscomp.makeIterator(rb.world().halos());for(vd=vb.next();!vd.done;vd=vb.next()){me=vd.value;if(me.target===rb.target)return ye.return();me.remove()}$c.noUpdate({sourceObj:rb.world(),targetObj:rb.sideBar,
sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return rb.world().showHaloFor(rb.target)});ye.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(db){this.submorphs[0].fontFamily=db}},fontColor:{after:["submorphs"],derived:!0,set:function(db){this.submorphs[0].fontColor=db}},fontSize:{derived:!0,set:function(db){this.submorphs[0].fontSize=
db}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],lb,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:17212,end:24827})}($c.InteractiveTreeContainer);$c.MorphContainer=Ra;$c.MorphContainer=Ra;$c.MorphContainer=Ra;var Wa=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");Wa.visualizeConnection=function(fd,lb,Hd,db,rb){db=void 0===db?{}:db;rb=Wa.rect(0).sides.concat(Wa.rect(0).corners);
Hd=Hd||new Wa.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Wa.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Wa.Color.transparent,nativeCursor:"auto"},end:{fill:Wa.Color.orange}}},db,{hasFixedPosition:!0}));Hd.startPoint.attachTo(fd,"rightCenter");lb.isMorph?(db=lb.globalBounds().partNameNearest(rb,fd.globalPosition),fd.globalPosition.equals(lb.globalBounds().partNamed(db))&&lb.globalBounds().partNameNearest(Wa.arr.without(rb,db),fd.globalPosition),Hd.endPoint.attachTo(lb,
"leftCenter")):(rb=fd.globalBounds().topRight().addPt(Wa.pt(100,0)),lb=Wa.morph({type:"label",value:lb.toString(),styleClasses:["Tooltip"],padding:Wa.rect(8,4)}).openInWorld(rb),lb.position=fd.world().bounds().translateForInclusion(lb.bounds()).topLeft(),Wa.once(Hd,"remove",lb,"remove"),Hd.endPoint.attachTo(lb,"leftCenter"));return Hd};Wa.startConnecting=function(fd,lb){fd.animate({opacity:.8,duration:300});fd.startPoint.attachTo(lb,"center");fd.vertices[0].position=Wa.pt(2,2)};Wa.stopConnecting=
function(fd,lb,Hd,db){function rb(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ye){if(1==ye.nextAddress)return ye.yield(fd.animate({opacity:0,duration:300}),2);fd.startPoint.clearConnection();fd.endPoint.clearConnection();fd.remove();ye.jumpToEnd()})}db=void 0===db?"sourceAttrName":db;var vb,vd,me;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ye){return 1==ye.nextAddress?(vb=fd,vd=vb.endPoint,(me=vd.connectedMorph)&&"MorphContainer"==me.constructor.className&&(me=me.target),
me?ye.yield(Wa.interactiveConnectGivenSourceAndTarget(Hd,db,me),2):ye.jumpTo(2)):ye.yield(rb(),0)})};Wa.editConnection=function(fd){var lb=fd.connection,Hd=fd.connectionPoint,db;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rb){if(1==rb.nextAddress)return db=Wa.visualizeConnection(Hd,lb.targetObj,!1,{borderColor:Wa.Color.gray.darker(),endpointStyle:{start:{fill:Wa.Color.transparent,nativeCursor:"auto"},end:{fill:Wa.Color.gray.darker()}}}),rb.yield(Wa.interactivelyReEvaluateConnection(lb,
"Edit Connection",!1),2);db.remove();rb.jumpToEnd()})};Wa.Tree=oc;Wa.TreeData=Wb;Wa.Icon=gc;Wa.morph=Zd;Wa.pt=ac;Wa.Rectangle=qb;Wa.rect=Mc;Wa.Color=ed;Wa.arr=pd;Wa.connect=bd;Wa.signal=Jb;Wa.Leash=Lb;Wa.once=Ib;Wa.interactivelyReEvaluateConnection=Pa;Wa.interactiveConnectGivenSource=ha;Wa.interactiveConnectGivenSourceAndTarget=Ha;(function(fd){var lb=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Hd=lb.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof lb.ConnectionsTreeData?
lb.ConnectionsTreeData:lb.ConnectionsTreeData=function(db){db&&db[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Hd,fd,[{key:"parseMorphConnections",value:function(db){for(var rb={},vb=$jscomp.makeIterator(void 0===db.attributeConnections?[]:db.attributeConnections),vd=vb.next();!vd.done;vd=vb.next())vd=vd.value,vd.targetObj.isHalo||(rb[vd.sourceAttrName]=rb[vd.sourceAttrName]||[{name:["      New Connection  ",{fontColor:Wa.Color.white.withA(.5),
fontStyle:"italic"},this.renderPin(db,vd.sourceAttrName),{}]}],Wa.arr.pushAt(rb[vd.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(vd)))},0));return{children:Object.entries(rb).map(function(me){var ye=$jscomp.makeIterator(me);me=ye.next().value;ye=ye.next().value;return{name:[me,{fontWeight:"bold"}," ",{},Wa.morph({fill:Wa.Color.white,opacity:.7,value:""+(ye.length-1),borderRadius:15,fontWeight:"bold",padding:Wa.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],
children:ye}}).concat([{name:["New Connection  ",{fontColor:Wa.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(db),{}]}])}}},{key:"renderExistingConnection",value:function(db){var rb=this,vb=Wa.morph({type:"label",fontColor:Wa.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(Wa.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},db.targetMethodName,{}])}),vd=this.renderDeadPin(),me=vd.submorphs[0];Wa.connect(vb,"onHoverIn",function(){vb.fontColor=
Wa.Color.orange;vb._leash=Wa.visualizeConnection(me,db.targetObj,vb._leash);me.fill=Wa.Color.orange;me.border={color:Wa.Color.orange,width:3}});Wa.connect(vb,"onMouseDown",function(ye){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pe){if(1==Pe.nextAddress)return ye.stop(),Pe.yield(Wa.interactivelyReEvaluateConnection(db),2);Wa.signal(rb,"refresh");Pe.jumpToEnd()})});Wa.connect(vb,"onHoverOut",function(){vb.fontColor=Wa.Color.gray;me.fill=Wa.Color.gray;me.border={color:Wa.Color.white,
width:1};vb._leash.remove();vb._leash=void 0});return[vb,{},"  ",{}].concat($jscomp.arrayFromIterable(Wa.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){db.disconnect();Wa.signal(rb,"refresh")}})),["  ",{},vd,{}])}},{key:"renderDeadPin",value:function(){var db=Wa.morph({type:"ellipse",fill:Wa.Color.gray,extent:Wa.pt(10,10),center:Wa.pt(8,12),borderWidth:1});return Wa.morph({extent:Wa.pt(20,20),fill:Wa.Color.transparent,reactsToPointer:!1,submorphs:[db]})}},{key:"renderPin",
value:function(db,rb){var vb=this,vd=Wa.morph({type:"ellipse",fill:Wa.Color.gray.withA(.5),extent:Wa.pt(10,10),center:Wa.pt(8,12),draggable:!1,borderWidth:1}),me=new Wa.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:Wa.Color.gray.darker(),endpointStyle:{fill:Wa.Color.gray.darker()},position:Wa.pt(1,1),vertices:[Wa.pt(0,0),Wa.pt(0,0)],canConnectTo:function(ye){return"MorphContainer"==ye.constructor.className||2>Wa.arr.intersect([ye].concat($jscomp.arrayFromIterable(ye.ownerChain())),
[vd].concat($jscomp.arrayFromIterable(vd.ownerChain()))).length}});vd.addMorph(me);Wa.connect(me.endPoint,"onDragStart",function(){Wa.startConnecting(me,vd)});Wa.connect(me.endPoint,"onDragEnd",function(ye){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pe){if(1==Pe.nextAddress)return vd.center=Wa.pt(8,12),Pe.yield(Wa.stopConnecting(me,vd,db,rb),2);Wa.signal(vb,"refresh");Pe.jumpToEnd()})});return Wa.morph({extent:Wa.pt(20,20),fill:Wa.Color.transparent,reactsToPointer:!1,submorphs:[vd]})}},
{key:"display",value:function(db){return db.name}},{key:"collapse",value:function(db,rb){db.isCollapsed=rb}},{key:"isCollapsed",value:function(db){return db.isCollapsed}},{key:"isLeaf",value:function(db){return!db.children}},{key:"getChildren",value:function(db){return db.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(db){var rb=new this;rb.root=rb.parseMorphConnections(db);return rb}}],lb,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3535,end:8087})})(Wa.TreeData);Ra=function(fd){var lb=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Hd=lb.hasOwnProperty("ConnectionsTree")&&"function"===typeof lb.ConnectionsTree?lb.ConnectionsTree:lb.ConnectionsTree=function(db){db&&db[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(Hd,fd,[{key:"inspectConnectionsOf",value:function(db){if(this.targetMorph=db)this.treeData=Wa.ConnectionsTreeData.for(db),Wa.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=Wa.ConnectionsTreeData.for(this.targetMorph),Wa.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},
{key:"properties",get:function(){return{}}}],lb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8104,end:8657})}(Wa.Tree);Ra=Wa.ConnectionsTree;Wa.default=Ra}}});