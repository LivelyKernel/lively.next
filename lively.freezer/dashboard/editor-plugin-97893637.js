System.register(["./__root_module__-db735625.js","./index-2260babb.js","./index-7ce4e91c.js","./editor-plugin-25872f24.js"],function(db){var Zb,lc,Uc,Bc,Vd,Od,je,Bd,jd,zd,ge,We,kf,bf,Hd,Ae,uc,wd,ce,Gd,pe,Te,rc,bd,he;return{setters:[function(cd){Zb=cd.i;lc=cd.bJ;Uc=cd.bK;Bc=cd.bL;Vd=cd.bM;Od=cd.bN;je=cd.d;Bd=cd.a1;jd=cd.c;zd=cd.a6;ge=cd.bz;We=cd.b;kf=cd.a;bf=cd.bO;Hd=cd.a_},function(cd){Ae=cd.s},function(cd){uc=cd.localInterface;wd=cd.systemInterfaceNamed;ce=cd.serverInterfaceFor;Gd=cd.l2lInterfaceFor},
function(cd){pe=cd.p;Te=cd.d;rc=cd.a;bd=cd.r;he=cd.C}],execute:function(){var cd=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js");cd.warnStyle={"border-bottom":"2px dotted orange"};cd.errorStyle={"background-color":"red"};var ie=function(xc){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js"),sc=Pc.hasOwnProperty("JavaScriptChecker")&&"function"===typeof Pc.JavaScriptChecker?Pc.JavaScriptChecker:Pc.JavaScriptChecker=function(Za){Za&&Za[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(sc,xc,[{key:"uninstall",value:function(Za){var Pa=Za.text||Za;(Pa.markers||[]).forEach(function(ua){return ua.id.startsWith("js-checker-")&&Pa.removeMarker(ua)});Pa.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(Za,Pa){return[].concat($jscomp.arrayFromIterable(Za.embeddedMorphMap.values())).find(function(ua){return Pa.containsPosition(ua.anchor.position)})}},{key:"onDocumentChange",value:function(Za,
Pa,ua){var Na=Pa.document;try{var Wa=ua.parse()}catch(Vb){Wa=Vb}Wa&&(Za=(Pa.markers||[]).filter(function(Vb){return Vb.id.startsWith("js-checker-")}),ua=ua.undeclaredVariables().map(function(Vb,Fa){var Xa=Vb.start;Vb=Vb.end;Xa=Na.indexToPosition(Xa);Vb=Na.indexToPosition(Vb);return Pa.addMarker({id:"js-checker-"+Fa,style:cd.warnStyle,range:{start:Xa,end:Vb},type:"js-undeclared-var"})}),Za.slice(ua.length).forEach(function(Vb){return Pa.removeMarker(Vb)}),Wa.parseError?(Za=Wa.parseError.loc,ua=Za.column,
Za=Za.line-1,Wa=Na.indexToPosition(Wa.parseError.pos),ua=Wa.column,Za=Wa.row,Wa={start:{column:ua-1,row:Za},end:{column:ua+1,row:Za}},this.hasEmbeddedMorphInRange(Pa,Wa)||Pa.addMarker({id:"js-syntax-error",range:Wa,style:cd.errorStyle,type:"js-syntax-error"})):Pa.removeMarker("js-syntax-error"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptChecker"}}],Pc,{pathInPackage:function(){return"js/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:126,end:1896})}(void 0),ac=ie=cd.JavaScriptChecker;cd.default=ie;var Db=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js");Db.query=lc;Db.fuzzyParse=Uc;Db.acorn=Bc;Db.custom=Vd;Db.walk=Od;var Tc=function(xc){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js"),sc=Pc.hasOwnProperty("JavaScriptNavigator")&&"function"===typeof Pc.JavaScriptNavigator?
Pc.JavaScriptNavigator:Pc.JavaScriptNavigator=function(Za){Za&&Za[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(sc,xc,[{key:"ensureAST",value:function(Za){return this.parse(Za.textString)}},{key:"parse",value:function(Za){return Db.fuzzyParse(Za)}},{key:"move",value:function(Za,Pa){var ua=!!Pa.activeMark||!Pa.selection.isEmpty(),Na=Pa.selection,Wa=Pa.positionToIndex(Na.lead);Za=this[Za](Pa.textString,Wa);Za=Pa.indexToPosition(Za);
Na.lead=Za;ua||(Na.anchor=Za);Pa.scrollCursorIntoView()}},{key:"forwardSexp",value:function(Za){this.move("_forwardSexp",Za)}},{key:"backwardSexp",value:function(Za){this.move("_backwardSexp",Za)}},{key:"backwardUpSexp",value:function(Za){this.move("_backwardUpSexp",Za)}},{key:"forwardDownSexp",value:function(Za){this.move("_forwardDownSexp",Za)}},{key:"_forwardSexp",value:function(Za,Pa){Za=this.parse(Za);Za=Db.custom.findNodesIncluding(Za,Pa).reverse().find(function(Na){return Na.end!==Pa});if(!Za)return Pa;
if("BlockStatement"===Za.type){var ua=Za.body.find(function(Na){return Na.start>Pa});if(ua)return ua.start}return Za.end}},{key:"_backwardSexp",value:function(Za,Pa){Za=this.parse(Za);Za=Db.custom.findNodesIncluding(Za,Pa).reverse().find(function(Na){return Na.start!==Pa});if(!Za)return Pa;if("BlockStatement"===Za.type){var ua=Za.body.slice().reverse().find(function(Na){return Na.end<Pa});if(ua)return ua.end}return Za?Za.start:Pa}},{key:"_backwardUpSexp",value:function(Za,Pa){Za=this.parse(Za);return(Za=
Db.custom.findNodesIncluding(Za,Pa).reverse().find(function(ua){return ua.start!==Pa}))?Za.start:Pa}},{key:"_forwardDownSexp",value:function(Za,Pa){Za=this.parse(Za);return(Za=Db.walk.findNodeAfter(Za,Pa,function(ua,Na){return Na.start>Pa}))?Za.node.start:Pa}},{key:"markDefun",value:function(Za){var Pa=this.rangeForFunctionOrDefinition(Za.textString,[Za.positionToIndex(Za.selection.range.start),Za.positionToIndex(Za.selection.range.end)]);Pa&&Za.execCommand("expandRegion",{start:Pa[0],end:Pa[1]})}},
{key:"rangeForNodesMatching",value:function(Za,Pa,ua){Za=this.parse(Za);return(Pa=Db.custom.findNodesIncluding(Za,Pa).reverse().find(ua))?[Pa.start,Pa.end]:null}},{key:"rangeForFunctionOrDefinition",value:function(Za,Pa){var ua=Pa[0]===Pa[1];return this.rangeForNodesMatching(Za,Pa[1],function(Na){return["AssignmentExpression","FunctionDeclaration","FunctionExpression","MethodDefinition"].includes(Na.type)&&(ua&&Na.end!==Pa[1]||!ua&&Na.start<Pa[0])?!0:!1})}},{key:"resolveIdentifierAt",value:function(Za,
Pa){"number"!==typeof Pa&&(Pa=Za.positionToIndex(Pa));Za=this.ensureAST(Za);var ua=Db.query.nodesAt(Pa,Za).reverse(),Na=ua.find(function(Vb){return"Identifier"===Vb.type});if(!Na&&((ua=ua[0])&&ua.type.includes("Specifier")&&ua.local&&"Identifier"===ua.local.type&&(Na=ua.local),!Na))return;Pa=(ua=Db.query.findDeclarationClosestToIndex(Za,Na.name,Pa))?Db.query.scopeAtIndex(Za,ua.start):Db.query.scopeAtIndex(Za,Pa);var Wa=Db.query.findReferencesAndDeclsInScope(Pa,Na.name).refs;return{parsed:Za,scope:Pa,
id:Na,name:Na.name,decl:ua,refs:Wa}}},{key:"expandRegion",value:function(Za,Pa,ua,Na){function Wa(gc){gc=Za.positionToIndex({column:0,row:Fa.row});return{range:[gc+Xa.start,gc+Xa.start+Xa.value.length],prev:Na}}var Vb=Na.range[0]!==Na.range[1],Fa=Za.indexToPosition(Na.range[0]),Xa=Za.tokenAt(Fa);if(!Vb&&Xa&&["keyword","identifier"].includes(Xa.type))return Wa();ua=ua||this.parse(Pa);Pa=Db.query.nodesAtIndex(ua,Na.range[0]).reverse().find(function(gc){return gc.start<Na.range[0]||gc.end>Na.range[1]});
if(!Pa)return Na;ua=Pa.start;Vb=Pa.end;return"Literal"===Pa.type&&(Pa.raw||"").match(/^['"`]/)&&Na.range[0]!==Pa.start&&Na.range[1]!==Pa.end&&(Pa.start+1<Na.range[0]||Pa.end-1>Na.range[1])?{range:[ua+1,Vb-1],prev:Na}:{range:[ua,Vb],prev:Na}}},{key:"contractRegion",value:function(Za,Pa,ua,Na){return Na.prev||Na}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptNavigator"}}],Pc,{pathInPackage:function(){return"js/navigator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:127,end:6784})}(void 0);ie=Tc=Db.JavaScriptNavigator;Db.default=Tc;var Nc=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js");Nc.addIndexToTextPos=function(xc,Pc,sc){return xc.indexToPosition(xc.positionToIndex(Pc)+sc)};Nc.connect=je;Nc.disconnect=Bd;Nc.string=jd;Nc.KeyHandler=zd;Nc.Range=ge;Tc=function(xc){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js"),
sc=Pc.hasOwnProperty("Snippet")&&"function"===typeof Pc.Snippet?Pc.Snippet:Pc.Snippet=function(Za){Za&&Za[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(sc,xc,[{key:Symbol.for("lively-instance-initialize"),value:function(Za){Za=void 0===Za?{trigger:null,expansion:""}:Za;var Pa=Za.expansion;this.trigger=Za.trigger;this.expansion=Pa;this.resetExpansionState()}},{key:"isTextSnippet",get:function(){return!0}},{key:"attach",value:function(Za){this.isExpanding&&
(this.textMorph=Za,Nc.connect(this.textMorph,"selectionChange",this,"onCursorMove"))}},{key:"detach",value:function(Za){this.isExpanding&&(Nc.disconnect(Za,"selectionChange",this,"onCursorMove"),this.textMorph=null)}},{key:"onCursorMove",value:function(){var Za=this.expansionState,Pa=Za.startAnchor,ua=Za.endAnchor;Za.isExpanding?Nc.Range.fromPositions(Pa.position,ua.position).containsPosition(this.textMorph.cursorPosition)||this.resetExpansionState():this.resetExpansionState()}},{key:"resetExpansionState",
value:function(){var Za=this.textMorph;if(Za){var Pa=this.expansionState||{},ua=Pa.marker,Na=Pa.startAnchor,Wa=Pa.endAnchor;Pa=Pa.steps;Na&&Za.removeAnchor(Na);Wa&&Za.removeAnchor(Wa);ua&&Za.removeMarker(ua);Pa.forEach(function(Vb){return Za.removeAnchor(Vb.anchor)})}this.expansionState={stepIndex:-1,steps:[],isExpanding:!1,startMarker:null,endMarker:null};Za&&Za.removePlugin(this)}},{key:"isExpanding",get:function(){return this.expansionState.isExpanding}},{key:"createExpansionSteps",value:function(Za){var Pa=
[],ua=0;Nc.string.reMatches(Za,/\$[0-9]+|\$\{[0-9]+:[^\}]*\}/g).forEach(function(Na){var Wa=Na.start,Vb=Na.end;Na=Na.match;var Fa="";Na.startsWith("${")?(Fa=$jscomp.makeIterator(Na.match(/^\$\{([0-9]+):([^\}]*)\}/)),Fa.next(),Na=Fa.next().value,Fa=Fa.next().value,Na=Number(Na)):Na=Number(Na.replace(/^\$/,""));Za=Za.slice(0,Wa-ua)+Fa+Za.slice(Vb-ua);Pa[Na]={index:Wa-ua,prefill:Fa,anchor:null};ua+=Vb-Wa-Fa.length});return{steps:Pa,expansion:Za}}},{key:"expandAtCursor",value:function(Za){var Pa=Za.selection,
ua=Za.cursorPosition.column,Na=this.expansion;this.trigger&&(ua-=this.trigger.length);if(ua=Math.max(0,ua))Na=Nc.string.lines(Na),Na=[Na[0]].concat($jscomp.arrayFromIterable(Na.slice(1).map(function(ub){return Nc.string.indent(ub," ",ua)}))),Na=Na.join("\n");var Wa=this.createExpansionSteps(Na);Na=Wa.expansion;Wa=Wa.steps;this.trigger&&Pa.growLeft(this.trigger.length);Pa.text=Na;var Vb=Pa.start;Na=Pa.end;Pa.collapseToEnd();if(Wa.length){var Fa=Nc.string.newUUID();Wa.forEach(function(ub,qd){return ub.anchor=
Za.addAnchor(Object.assign({id:"snippet-step-"+qd+"-"+Fa},Nc.addIndexToTextPos(Za,Vb,ub.index)))});var Xa=Za.addAnchor(Object.assign({id:"snippet-start-"+Fa},Vb,{insertBehavior:"stay"})),gc=Za.addAnchor(Object.assign({id:"snippet-end-"+Fa},Na));this.expansionState={marker:Za.addMarker({id:"snippet-marker-"+Fa,get range(){return{start:Xa.position,end:gc.position}},style:{"border-radius":"4px","background-color":"rgba(30, 200, 140, 0.3)","box-shadow":"0 0 4px rgba(30, 200, 140, 0.3)","pointer-events":"none",
content:"fooooo"}}),startAnchor:Xa,endAnchor:gc,stepIndex:0,steps:Wa,isExpanding:!0};Za.addPlugin(this);this.nextStep()}}},{key:"nextStep",value:function(){var Za=this.expansionState,Pa=Za.steps,ua=this.textMorph;if(Za.isExpanding&&ua){ua=ua.selection;Za=Pa[Za.stepIndex];var Na=Za.prefill;ua.lead=ua.anchor=Za.anchor.position;ua.growRight(Na.length);this.expansionState.stepIndex++;this.expansionState.stepIndex>=Pa.length&&(this.resetExpansionState(),console.log("[snippet] expansion of "+this.expansion+
" done"))}}},{key:"canExpand",value:function(Za,Pa){Pa=Za.positionToIndex(Za.cursorPosition);return Za.textString.slice(Pa-this.trigger.length,Pa)===this.trigger}},{key:"tryTrigger",value:function(Za,Pa){if(!this.canExpand(Za,Za.cursorPosition))return!1;this.expandAtCursor(Za);return!0}},{key:"getCommands",value:function(Za){var Pa=this;return Za.concat([{name:"[snippet] next expansion step",exec:function(ua){Pa.nextStep();return!0}},{name:"[snippet] cancel expansion",exec:function(ua){Pa.resetExpansionState();
return!0}}])}},{key:"getKeyHandlers",value:function(Za){return Za.concat(Nc.KeyHandler.withBindings([{keys:"Tab",command:"[snippet] next expansion step"},{keys:"Escape",command:"[snippet] cancel expansion"}]))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Snippet"}}],Pc,{pathInPackage:function(){return"text/snippets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:357,end:6029})}(void 0);Nc.Snippet=Tc;Nc.Snippet=Tc;Nc.Snippet=Tc;var wc=[{name:"get snippets",exec:function(xc){return xc.pluginCollect("getSnippets",[])}}];Nc.snippetCommands=wc;Nc.snippetCommands=wc;Nc.snippetCommands=wc;var Vc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js");Vc.buildEvalOpts=function(xc,Pc){return xc.plugins.find(function(sc){return sc.isJSEditorPlugin}).sanatizedJsEnv(Pc)};Vc.Snippet=Tc;wc=function(xc){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),
sc=Pc.hasOwnProperty("ModuleTopLevelVarCompleter")&&"function"===typeof Pc.ModuleTopLevelVarCompleter?Pc.ModuleTopLevelVarCompleter:Pc.ModuleTopLevelVarCompleter=function(Za){Za&&Za[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(sc,xc,[{key:"compute",value:function(Za,Pa){var ua,Na,Wa,Vb,Fa,Xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gc){if(1==gc.nextAddress){Na=(ua=Za.pluginFind(function(ub){return ub.isJSEditorPlugin}))&&
ua.systemInterface();if(!Na)return gc.return([]);Wa=Vc.buildEvalOpts(Za);Vb=Wa.targetModule;return"local"===Na.name?(Fa=Object.getOwnPropertyNames(Na.getModule(Vb).recorder),gc.jumpTo(2)):gc.yield(Na.runEval('\n        var result, livelySystem = typeof System !== "undefined"\n                      && System.get(System.decanonicalize("lively-system-interface"));\n        if (livelySystem) {\n          result = JSON.stringify(\n            Object.getOwnPropertyNames(livelySystem.localInterface.getModule("'+
Vb+'").recorder));\n        } else {\n          var G = typeof window !== "undefined" ?\n            window : typeof global !== "undefined" ? global : this;\n          result = JSON.stringify(Object.getOwnPropertyNames(G));\n        }\n        result;\n      ',{targetModule:"lively://module-recorder-completer"}),3)}if(2!=gc.nextAddress){Xa=gc.yieldResult;if(Xa.isError)return gc.return([]);Fa=JSON.parse(Xa.value)}Fa=Fa.filter(function(ub){return!ub.startsWith("defVar_")&&!["System","__currentLivelyModule",
"initializeES6ClassForLively","_moduleExport","_moduleImport"].includes(ub)});return gc.return(Fa.map(function(ub){return{priority:1100,completion:ub}}))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleTopLevelVarCompleter"}}],Pc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:227,end:1700})}(void 0);Vc.ModuleTopLevelVarCompleter=wc;Vc.ModuleTopLevelVarCompleter=wc;Vc.ModuleTopLevelVarCompleter=wc;wc=function(xc){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),sc=Pc.hasOwnProperty("DynamicJavaScriptCompleter")&&"function"===typeof Pc.DynamicJavaScriptCompleter?Pc.DynamicJavaScriptCompleter:Pc.DynamicJavaScriptCompleter=function(Za){Za&&Za[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Zb(sc,xc,[{key:"isValidPrefix",value:function(Za){return/\.[a-z0-9_]*$/i.test(Za)}},{key:"isMethodCallCompletion",value:function(Za){return Za.endsWith(")")&&0<Za.indexOf("(")}},{key:"isValidIdentifier",value:function(Za){if("string"!==typeof Za)return!1;this.isMethodCallCompletion(Za)&&(Za=Za.slice(0,Za.indexOf("(")));return/^[a-z_\$][0-9a-z_\$]*$/i.test(Za)?!0:!1}},{key:"wrapInBrackets",value:function(Za){if(!isNaN(Number(Za))||Za.startsWith("Symbol."))return"["+Za+"]";var Pa="";this.isMethodCallCompletion(Za)&&
(Pa=Za.slice(Za.indexOf("(")),Za=Za.slice(0,Za.indexOf("(")));return'["'+Za.replace(/"/g,'\\"')+'"]'+Pa}},{key:"compute",value:function(Za){var Pa=this,ua,Na,Wa,Vb,Fa,Xa,gc,ub,qd,fc,Ud;return $jscomp.asyncExecutePromiseGeneratorProgram(function(td){if(1==td.nextAddress){ua=Za.selection;ua.isEmpty()?(Na=Za.getLine(ua.lead.row),Na=Na.slice(Na.lastIndexOf(":")+1,ua.lead.column)):Na=ua.text.slice(Math.max(0,ua.text.indexOf(":")),0);if(!Pa.isValidPrefix(Na))return td.return([]);Vb=(Wa=Za.pluginFind(function(fd){return fd.isJSEditorPlugin}))&&
Wa.systemInterface();if(!Vb)return td.return([]);Fa=Vc.buildEvalOpts(Za);return td.yield(Vb.dynamicCompletionsForPrefix(Fa.targetModule,Na,Fa),2)}Xa=td.yieldResult;gc=Xa.isError;ub=Xa.value;qd=Xa.completions;fc=Xa.prefix;if(gc)return console.warn("javascript completer encountered error: "+(ub.stack||ub)),td.return([]);qd.reduce(function(fd,Xb){Xb=$jscomp.makeIterator(Xb);Xb.next();Xb=Xb.next().value;return fd+Xb.length},0);Ud=qd.reduce(function(fd,Xb,Me){Xb=$jscomp.makeIterator(Xb);var ic=Xb.next().value;
Xb=Xb.next().value;return fd.concat(Xb.map(function(Wb){var $a=Pa.isValidIdentifier(Wb);return{info:ic,completion:Wb,prefix:$a?fc:"."+fc,customInsertionFn:$a?Pa.isMethodCallCompletion(Wb)?function(ma,Ta,qb,ec){Ta=ec.start;ec=ec.end;ma=ma.replace(/\((.*)\)/,function(Ic){return"("+Ic.slice(1,-1).split(", ").map(function(ud,gd){return"${"+gd+":"+ud+"}"}).join(", ")+")"});ma=new Vc.Snippet({expansion:ma});qb.replace({start:Ta,end:ec},"");ma.expandAtCursor(qb)}:null:function(ma,Ta,qb,ec){ma=ec.start;ec=
ec.end;Ta={row:ma.row,column:ma.column-1};ec="."===qb.textInRange({start:Ta,end:ma})?{start:Ta,end:ec}:{start:ma,end:ec};qb.replace(ec,Pa.wrapInBrackets(Wb))}}}))},[]);Ud.forEach(function(fd,Xb){return Object.assign(fd,{priority:2E3+Ud.length-Xb})});return td.return(Ud)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DynamicJavaScriptCompleter"}}],Pc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1709,end:5155})}(void 0);Vc.DynamicJavaScriptCompleter=wc;Vc.DynamicJavaScriptCompleter=wc;Vc.DynamicJavaScriptCompleter=wc;Vc.keywords="arguments boolean break case catch class const continue debugger default delete eval export import extends false true finally instanceof static super this throw typeof while with yield await Array Date eval function hasOwnProperty Infinity isFinite isNaN isPrototypeOf length Math NaN name Number Object prototype String toString undefined valueOf alert assign clearInterval clearTimeout decodeURI decodeURIComponent document encodeURI encodeURIComponent escape navigator parseFloat parseInt setInterval setTimeout window document requestAnimationFrame cancelAnimationFrame".split(" ");
wc=function(xc){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),sc=Pc.hasOwnProperty("JavaScriptKeywordCompleter")&&"function"===typeof Pc.JavaScriptKeywordCompleter?Pc.JavaScriptKeywordCompleter:Pc.JavaScriptKeywordCompleter=function(Za){Za&&Za[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(sc,xc,[{key:"compute",value:function(Za,Pa){return Vc.keywords.map(function(ua){return{completion:ua,priority:0}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptKeywordCompleter"}}],Pc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6157,end:6295})}(void 0);Vc.JavaScriptKeywordCompleter=wc;Vc.JavaScriptKeywordCompleter=wc;Vc.JavaScriptKeywordCompleter=wc;wc=[new Vc.DynamicJavaScriptCompleter,
new Vc.JavaScriptKeywordCompleter,new Vc.ModuleTopLevelVarCompleter];Vc.completers=wc;Vc.completers=wc;Vc.completers=wc;var hb=lively.FreezerRuntime.recorderFor("lively.ide/js/snippets.js");hb.Snippet=Tc;var zc=[["typef",'typeof ${0:object} === "function"$1'],["types",'typeof ${0:object} === "string"$1'],["typen",'typeof ${0:object} === "number"$1'],["typeu",'typeof ${0:object} === "undefined"$1'],["typenu",'typeof ${0:object} !== "undefined"$1'],["import",'import { ${0:name} } from "${1:module}";'],
["importd",'import ${0:name} from "${1:module}";'],["import*",'import * as ${0:name} from "${1:module}";'],["subclass","class ${0:name} extends ${1:base} {\n  constructor(${2:args}) {\n    super(${3:args})\n    $4\n  }\n}"],["class","class ${0:name} {\n  constructor(${1:args}) {\n    $2\n  }\n}"],["switch","switch (${0:expression}) {\n  case '${2:case}':\n    ${3:// code}\n    break;\n    $4\n    default:\n    ${1:// code}\n}"],["tryf","try {${0:/* code */}} finally {}"],["try","try {${0:/* code */}} catch (err) {}"],
["do","do {${1:/* code */}} while (${0:/* condition */});"],["fori","for (let ${0:prop} in ${1:obj}) {\n  ${2:obj[prop]}\n}"],["foro","for (let ${0:value} of ${1:iterable}) {\n  ${2:value}\n}"],["for-","for (let ${0:i} = ${1:list}.length; ${2:i}--; ) {\n  $3\n}"],["for","for (let ${0:i} = 0; ${1:i} < ${3:list}.length; ${2:i}++) {\n  $4\n}"],["Prom","new Promise((resolve, reject) => {$0})"],["keys","Object.keys($0)"],["assign","Object.assign(${0:dest}, ${1:source})"],["stringi","JSON.stringify(${0:object})"],
["forE","forEach(${0:ea} => $1)"],["map","map(${0:ea} => $1)"],["reduce","reduce((${1:all}, ${2:ea}) => {$3}, ${0:init})"],["from","Array.from(${0:list})"],["last","arr.last(${0:list})"],["pluck",'arr.pluck(${0:list}, "${1:key}")'],["sortBy","arr.sortBy(${0:list}, ($1) => $2)"],["join",'join("\\n")'],["con","connect(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["once","once(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["sig","signal(${0:source}, '${1:sourceAttr}', ${2:value});"],
["ll","lively.lang."],["lls","lively.lang.string."],["lla","lively.lang.arr."],["llo","lively.lang.obj."],["llf","lively.lang.fun."],["llp","lively.lang.promise."],["withA","withAllSubmorphsDo(ea => { return ${0:ea}; })"],["$w","$world"],["$m","$morph('${0:name}')"],["get",'get("${0:name}")'],["$","${$0}"],["cl","console.log($0)"],["cw","console.warn($0)"],["ce","console.error($0)"],["s","show(`$0`);"],["l2lC",'import L2LClient from "lively.2lively/client.js";\nlet l2lClient = L2LClient.default();$0'],
["fun","function ${0:functionName}($1) {$2}"],["fn","function($0) {$1}"],["f","($0) => $1"],["aw","await $0"]];hb.snippets=zc;hb.snippets=zc;hb.snippets=zc;var Ub=lively.FreezerRuntime.recorderFor("lively.ide/js/commands.js");Ub.getEvalEnv=function(xc){return(xc=xc.pluginFind(function(Pc){return Pc.isJSEditorPlugin}))?xc.evalEnvironment:null};Ub.setEvalEnv=function(xc,Pc){(xc=xc.pluginFind(function(sc){return sc.isJSEditorPlugin}))&&Object.assign(xc.evalEnvironment,Pc);return xc.evalEnvironment};
Ub.pToI=function(xc,Pc){return xc.positionToIndex(Pc)};Ub.iToP=function(xc,Pc){return xc.indexToPosition(Pc)};Ub.arr=We;Ub.promise=kf;Ub.string=jd;Ub.show=Ae;Ub.Range=ge;Ub.query=lc;Ub.BaseVisitor=bf;hb=[{name:"undefine variable",doc:"Finds the variable at cursor position (or position passed) and undefines it in the module toplevel scope.",exec:function(xc,Pc){Pc=void 0===Pc?{varName:null,position:null}:Pc;var sc,Za,Pa,ua,Na,Wa,Vb,Fa,Xa,gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){switch(ub.nextAddress){case 1:sc=
Pc;Za=sc.varName;Pa=sc.position;if(!Za){Pa||(Pa=xc.cursorPosition);ua=xc.pluginInvokeFirst("getNavigator");Na=ua.ensureAST(xc);Wa=Ub.query.nodesAt(xc.positionToIndex(Pa),Na).reverse().find(function(qd){return"Identifier"===qd.type});if(!Wa)return xc.showError(Error("no identifier found!")),ub.return(!0);Za=Wa.name}Pc=xc.pluginFind(function(qd){return qd.isJSEditorPlugin}).sanatizedJsEnv();Vb='lively.modules.module("'+Pc.targetModule+'").undefine("'+Za+'")';ub.setCatchFinallyBlocks(2);return ub.yield(xc.doEval(null,
Pc,Vb),4);case 4:Fa=ub.yieldResult;Xa=Fa.error?Fa.error:Fa.isError?Fa.value:null;ub.leaveTryBlock(3);break;case 2:Xa=gc=ub.enterCatchBlock();case 3:return Xa?xc.showError(Xa):xc.setStatusMessage(Za+" undefined"),ub.return(!0)}})}},{name:"change doitContext",exec:function(xc){var Pc,sc,Za,Pa,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Na){if(1==Na.nextAddress)return Pc=$jscomp,sc=Pc.makeIterator,Na.yield(xc.world().execCommand("select morph",{prompt:"select morph for doitContext",
justReturn:!0,prependItems:["reset"],filterFn:function(Wa){return!Wa.isUsedAsEpiMorph()}}),2);Za=sc.call(Pc,Na.yieldResult);if(Pa=Za.next().value)ua="reset"===Pa,xc.doitContext=ua?null:Pa,xc.setStatusMessage(ua?"doitContext is now\n"+Pa:"doitContext reset");return Na.return(!0)})}},{name:"change eval backend",exec:function(xc,Pc){Pc=void 0===Pc?{backend:void 0}:Pc;var sc,Za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pa){if(1==Pa.nextAddress)return sc=Pc,Za=sc.backend,void 0!==Za?
Pa.jumpTo(2):Pa.yield(xc.world().prompt("choose eval backend",{historyId:"js-eval-backend-history"}),3);if(2!=Pa.nextAddress&&(Za=Pa.yieldResult,!Za))return xc.setStatusMessage("Canceled"),Pa.return(!0);"local"===Za&&(Za=null);xc.setStatusMessage("Eval backend is now "+(Za||"local"));return Pa.return(Ub.setEvalEnv(xc,{remote:Za}))})}},{name:"copy current module name to clipboard",exec:function(xc){var Pc=xc.evalEnvironment.targetModule;xc.setStatusMessage(Pc||"Cannot find module name");xc.env.eventDispatcher.killRing.add(xc);
xc.env.eventDispatcher.doCopy(Pc);return!0}}];Ub.jsEditorCommands=hb;Ub.jsEditorCommands=hb;Ub.jsEditorCommands=hb;var Jc=[{name:"[javascript] list errors and warnings",exec:function(xc){var Pc,sc,Za,Pa,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Na){if(1==Na.nextAddress){Pc=(xc.markers||[]).filter(function(Wa){Wa=Wa.type;return"js-undeclared-var"===Wa||"js-syntax-error"===Wa});if(!Pc.length)return Ub.show("no warnings or errors"),Na.return(!0);sc=Pc.map(function(Wa){var Vb=Wa.range;
return{isListItem:!0,string:"["+Wa.type.split("-").slice(1).join(" ")+"] "+xc.textInRange(Vb),value:Vb}});return Na.yield(xc.world().filterableListPrompt("jump to warning or error",sc),2)}Za=Na.yieldResult;Pa=$jscomp.makeIterator(Za.selected);if(ua=Pa.next().value)xc.saveMark(),xc.selection=ua,xc.centerRow(ua.start.row);return Na.return(!0)})}},{name:"[javascript] inject import",exec:function(xc,Pc){Pc=void 0===Pc?{gotoImport:!1,insertImportAtCursor:!0}:Pc;var sc,Za,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ua){switch(ua.nextAddress){case 1:return ua.yield(Ub.promise.delay(0),
2);case 2:return ua.yield(System.import("lively.ide/js/import-helper.js"),3);case 3:return sc=ua.yieldResult,Za=sc.interactivelyInjectImportIntoText,ua.yield(Za(xc,Pc),4);case 4:return(Pa=ua.yieldResult)||xc.setStatusMessage("canceled"),ua.return(Pa)}})}},{name:"[javascript] fix undeclared variables",exec:function(xc,Pc){Pc=void 0===Pc?{ignore:[],autoApplyIfSingleChoice:!1,requester:xc}:Pc;var sc,Za,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ua){if(1==ua.nextAddress)return ua.yield(System.import("lively.ide/js/import-helper.js"),
2);if(3!=ua.nextAddress)return sc=ua.yieldResult,Za=sc.interactivlyFixUndeclaredVariables,ua.yield(Za(xc,Pc),3);Pa=ua.yieldResult;xc.focus();return ua.return(Pa)})}},{name:"[javascript] remove unused imports",exec:function(xc,Pc){Pc=void 0===Pc?{query:!0}:Pc;var sc,Za,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ua){if(1==ua.nextAddress)return ua.yield(System.import("lively.ide/js/import-helper.js"),2);if(3!=ua.nextAddress)return sc=ua.yieldResult,Za=sc.cleanupUnusedImports,ua.yield(Za(xc,
Pc),3);Pa=ua.yieldResult;xc.setStatusMessage(Pa);return ua.return(!0)})}},{name:"[javascript] eslint report",exec:function(xc){var Pc,sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Za){if(1==Za.nextAddress)return Za.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Pc=Za.yieldResult;sc=Pc.default;try{return Za.return(sc.reportOnMorph(xc))}catch(Pa){xc.showError(Pa)}Za.jumpToEnd()})}},{name:"[javascript] eslint preview fixes",exec:function(xc){var Pc,sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Za){if(1==
Za.nextAddress)return Za.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Pc=Za.yieldResult;sc=Pc.default;try{return Za.return(sc.previewFixesOnMorph(xc))}catch(Pa){xc.showError(Pa)}Za.jumpToEnd()})}},{name:"[javascript] auto format code",handlesCount:!0,exec:function(xc,Pc,sc){function Za(td,fd){fd||(fd=Fa(td,{allowReturnOutsideFunction:!0}));var Xb=Ub.string.lineRanges(td),Me=td.split("\n"),ic=[],Wb=new Ub.BaseVisitor,$a=Wb.visitVariableDeclaration;Wb.visitVariableDeclaration=
function(ec,Ic,ud){if(1<ec.declarations.length)for(var gd=Ub.string.findLineWithIndexInLineRanges(Xb,ec.start),me=ec.declarations[0].start-Xb[gd][0],ue={},Uf=1;Uf<ec.declarations.length;ue={$jscomp$loop$prop$actionType$3009:ue.$jscomp$loop$prop$actionType$3009,$jscomp$loop$prop$arg$3010:ue.$jscomp$loop$prop$arg$3010},Uf++){var zf=ec.declarations[Uf],qf=Ub.string.findLineWithIndexInLineRanges(Xb,zf.start);if(gd!==qf){var C=Me[qf].match(/\s*/)[0].length;C=me-C;0!==C&&(zf=Ub.string.findLineWithIndexInLineRanges(Xb,
zf.end),ue.$jscomp$loop$prop$actionType$3009=0<C?"insert":"delete",ue.$jscomp$loop$prop$arg$3010=0<C?" ".repeat(C):-C,ic.push.apply(ic,$jscomp.arrayFromIterable(Ub.arr.range(qf,zf).map(function(Df){return function(Bf){return[Df.$jscomp$loop$prop$actionType$3009,Xb[Bf][0],Df.$jscomp$loop$prop$arg$3010]}}(ue)))))}}return $a.call(Wb,ec,Ic,ud)};Wb.accept(fd,{},[]);for(fd=ic.length;fd--;){var ma=$jscomp.makeIterator(ic[fd]),Ta=ma.next().value,qb=ma.next().value;ma=ma.next().value;"insert"===Ta?td=td.slice(0,
qb)+ma+td.slice(qb):"delete"===Ta&&(td=td.slice(0,qb)+td.slice(qb+ma))}return td}var Pa,ua,Na,Wa,Vb,Fa,Xa,gc,ub,qd,fc,Ud;return $jscomp.asyncExecutePromiseGeneratorProgram(function(td){switch(td.nextAddress){case 1:return Pa=sc||Math.floor(xc.width/xc.defaultCharExtent().width),Pc=Object.assign({printWidth:Pa,tabWidth:2,useTabs:!1,bracketSpacing:!1},Pc),ua=lively.modules.module,Na=System.normalizeSync("prettier/standalone.js"),td.yield(ua(Na).load({format:"global",instrument:!1}),2);case 2:return Wa=
td.yieldResult,td.yield(ua("lively.ast/lib/acorn-extension.js").load(),3);case 3:return td.yield(ua("lively.ast").load(),4);case 4:return Vb=td.yieldResult,Fa=Vb.parse,td.yield(ua("lively.ast/lib/query.js").load(),5);case 5:return td.yield(System.import("jsdiff",System.decanonicalize("lively.morphic")),6);case 6:return Xa=td.yieldResult,gc=xc.selection.isEmpty()?xc.documentRange:xc.selection.range,ub=xc.positionToIndex(gc.start),qd=xc.positionToIndex(gc.end),fc=Wa.format(xc.textString,Object.assign({},
Pc,{rangeStart:ub,rangeEnd:qd,parser:function(fd,Xb,Me){return Fa(fd,{allowReturnOutsideFunction:!0})}})),xc.undoManager.group(),Ud=Xa.diffChars(xc.textString,fc),xc.applyJsDiffPatch(Ud),xc.selection.text=Za(xc.selection.text),xc.undoManager.group(),td.return(!0)}})}}];Ub.jsIdeCommands=Jc;Ub.jsIdeCommands=Jc;Ub.jsIdeCommands=Jc;var Wc=[{name:"selectDefinition",readOnly:!0,bindKey:"Alt-.",exec:function(xc,Pc){Pc=xc.pluginInvokeFirst("getNavigator");if(!Pc)return!0;Pc=Pc.resolveIdentifierAt(xc,xc.cursorPosition);
if(!Pc||!Pc.id)return Ub.show("No symbol identifier selected"),!0;if(!Pc.decl)return Ub.show("Cannot find declaration of "+Pc.name),!0;xc.saveMark();xc.selection={start:xc.indexToPosition(Pc.decl.start),end:xc.indexToPosition(Pc.decl.end)};xc.scrollCursorIntoView();return!0}},{name:"selectSymbolReferenceOrDeclarationNext",readOnly:!0,multiSelectAction:"single",exec:function(xc){xc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"next"})}},{name:"selectSymbolReferenceOrDeclarationPrev",
readOnly:!0,multiSelectAction:"single",exec:function(xc){xc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"prev"})}},{name:"selectSymbolReferenceOrDeclaration",doc:"Finds the name of the currently selected symbol and will use the JS ast to select references and declarations whose name matches the symbol in the current scope.",readOnly:!0,multiSelectAction:"single",exec:function(xc,Pc){Pc=void 0===Pc?{direction:null}:Pc;var sc=xc.pluginInvokeFirst("getNavigator");if(!sc)return!0;sc=sc.resolveIdentifierAt(xc,
xc.cursorPosition);if(!sc||!sc.refs)return Ub.show("No symbol identifier selected"),!0;var Za=xc.selection;sc=sc.refs.map(function(ua){var Na=ua.end;return Ub.Range.fromPositions(Ub.iToP(xc,ua.start),Ub.iToP(xc,Na))}).concat(sc.decl?Ub.Range.fromPositions(Ub.iToP(xc,sc.decl.start),Ub.iToP(xc,sc.decl.end)):[]).sort(Ub.Range.compare);if(!sc.length)return!0;var Pa=sc.map(String).indexOf(String(Za.range));if("next"===Pc.direction||"prev"===Pc.direction)-1===Pa&&sc.length?sc=[sc[0]]:(Pc=Pa+("next"===Pc.direction?
1:-1),0>Pc?Pc=sc.length-1:Pc>=sc.length&&(Pc=0),sc=[sc[Pc]]);sc.forEach(function(ua){var Na=Za.selections.findIndex(function(Vb){return Vb.range.equals(ua)}),Wa=Za.selections.length-1;-1<Na?Ub.arr.swap(Za.selections,Na,Wa):Za.addRange(ua,!1)});Za.mergeSelections();return!0}}];Ub.astEditorCommands=Wc;Ub.astEditorCommands=Wc;Ub.astEditorCommands=Wc;lively.modules&&!lively.FreezerRuntime&&lively.modules.module("lively.ide/js/editor-plugin.js").reload({reloadDeps:!1,resetEnv:!1});var Ad=lively.FreezerRuntime.recorderFor("lively.ide/js/mode.js");
Ad.expressionAllowed=function(xc,Pc,sc){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(Pc.lastType)||"quasi"==Pc.lastType&&/\{\s*$/.test(xc.string.slice(0,xc.pos-(sc||0)))};Ad.passIndent=pe;Ad.defineMode=Te;Ad.defineMIME=rc;Ad.registerHelper=bd;Ad.defaultConfig={indentUnit:2};Ad.defaultParserConfig={name:"javascript",statementIndent:2,jsonld:!1,json:!1,typescript:!1,wordCharacters:/[\w$\xa1-\uffff]/,globalVars:[],localVars:[],doubleIndentSwitch:null};Ad.defineMode("javascript",
function(xc,Pc){function sc(Mc,Sd,Se){gh=Mc;sh=Se;return Sd}function Za(Mc,Sd){var Se=Mc.next();if('"'==Se||"'"==Se)return Sd.tokenize=Pa(Se),Sd.tokenize(Mc,Sd);if("."==Se&&Mc.match(/^\d+(?:[eE][+\-]?\d+)?/))return sc("number","number");if("."==Se&&Mc.match(".."))return sc("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(Se))return sc(Se);if("="==Se&&Mc.eat(">"))return sc("=>","operator");if("0"==Se&&Mc.eat(/x/i))return Mc.eatWhile(/[\da-f]/i),sc("number","number");if("0"==Se&&Mc.eat(/o/i))return Mc.eatWhile(/[0-7]/i),
sc("number","number");if("0"==Se&&Mc.eat(/b/i))return Mc.eatWhile(/[01]/i),sc("number","number");if(/\d/.test(Se))return Mc.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),sc("number","number");if("/"==Se){if(Mc.eat("*"))return Sd.tokenize=ua,ua(Mc,Sd);if(Mc.eat("/"))return Mc.skipToEnd(),sc("comment","comment");if(Ad.expressionAllowed(Mc,Sd,1)){a:for(var re=Sd=!1;null!=(Se=Mc.next());){if(!Sd){if("/"==Se&&!re)break a;"["==Se?re=!0:re&&"]"==Se&&(re=!1)}Sd=!Sd&&"\\"==Se}Mc.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);
return sc("regexp","string-2")}Mc.eatWhile(Wh);return sc("operator","operator",Mc.current())}if("`"==Se)return Sd.tokenize=Na,Na(Mc,Sd);if("#"==Se)return Mc.skipToEnd(),sc("error","error");if(Wh.test(Se))return">"==Se&&Sd.lexical&&">"==Sd.lexical.type||Mc.eatWhile(Wh),sc("operator","operator",Mc.current());if(Hi.test(Se))return Mc.eatWhile(Hi),Mc=Mc.current(),(Se=zj.propertyIsEnumerable(Mc)&&zj[Mc])&&"."!=Sd.lastType?sc(Se.type,Se.style,Mc):sc("variable","variable",Mc)}function Pa(Mc){return function(Sd,
Se){var re=!1,og;if(Vh&&"@"==Sd.peek()&&Sd.match(xg))return Se.tokenize=Za,sc("jsonld-keyword","meta");for(;null!=(og=Sd.next())&&(og!=Mc||re);)re=!re&&"\\"==og;re||(Se.tokenize=Za);return sc("string","string")}}function ua(Mc,Sd){for(var Se=!1,re;re=Mc.next();){if("/"==re&&Se){Sd.tokenize=Za;break}Se="*"==re}return sc("comment","comment")}function Na(Mc,Sd){for(var Se=!1,re;null!=(re=Mc.next());){if(!Se&&("`"==re||"$"==re&&Mc.eat("{"))){Sd.tokenize=Za;break}Se=!Se&&"\\"==re}return sc("quasi","string-2",
Mc.current())}function Wa(Mc,Sd){Sd.fatArrowAt&&(Sd.fatArrowAt=null);var Se=Mc.string.indexOf("=>",Mc.start);if(!(0>Se)){if(tg){var re=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Mc.string.slice(Mc.start,Se));re&&(Se=re.index)}re=0;var og=!1;for(--Se;0<=Se;--Se){var ch=Mc.string.charAt(Se),hh="([{}])".indexOf(ch);if(0<=hh&&3>hh){if(!re){++Se;break}if(0==--re){"("==ch&&(og=!0);break}}else if(3<=hh&&6>hh)++re;else if(Hi.test(ch))og=!0;else{if(/["'\/]/.test(ch))return;if(og&&!re){++Se;break}}}og&&
!re&&(Sd.fatArrowAt=Se)}}function Vb(Mc,Sd,Se,re,og,ch){this.indented=Mc;this.column=Sd;this.type=Se;this.prev=og;this.info=ch;null!=re&&(this.align=re)}function Fa(){for(var Mc=arguments.length-1;0<=Mc;Mc--)Gf.cc.push(arguments[Mc])}function Xa(){Fa.apply(null,arguments);return!0}function gc(Mc){function Sd(re){for(;re;re=re.next)if(re.name==Mc)return!0;return!1}var Se=Gf.state;Gf.marked="def";Se.context?Sd(Se.localVars)||(Se.localVars={name:Mc,next:Se.localVars}):!Sd(Se.globalVars)&&Pc.globalVars&&
(Se.globalVars={name:Mc,next:Se.globalVars})}function ub(){Gf.state.context={prev:Gf.state.context,vars:Gf.state.localVars};Gf.state.localVars=Aj}function qd(){Gf.state.localVars=Gf.state.context.vars;Gf.state.context=Gf.state.context.prev}function fc(Mc,Sd){var Se=function(){var re=Gf.state,og=re.indented;if("stat"==re.lexical.type)og=re.lexical.indented;else for(var ch=re.lexical;ch&&")"==ch.type&&ch.align;ch=ch.prev)og=ch.indented;re.lexical=new Vb(og,Gf.stream.column(),Mc,null,re.lexical,Sd)};
Se.lex=!0;return Se}function Ud(){var Mc=Gf.state;Mc.lexical.prev&&(")"==Mc.lexical.type&&(Mc.indented=Mc.lexical.indented),Mc.lexical=Mc.lexical.prev)}function td(Mc){function Sd(Se){return Se==Mc?Xa():";"==Mc?Fa():Xa(Sd)}return Sd}function fd(Mc,Sd){return"var"==Mc?Xa(fc("vardef",Sd.length),Eh,td(";"),Ud):"keyword a"==Mc?Xa(fc("form"),ic,fd,Ud):"keyword b"==Mc?Xa(fc("form"),fd,Ud):"{"==Mc?Xa(fc("}"),fg,Ud):";"==Mc?Xa():"if"==Mc?("else"==Gf.state.lexical.info&&Gf.state.cc[Gf.state.cc.length-1]==
Ud&&Gf.state.cc.pop()(),Xa(fc("form"),ic,fd,Ud,La)):"function"==Mc?Xa(ab):"for"==Mc?Xa(fc("form"),Sa,fd,Ud):"variable"==Mc?tg&&"type"==Sd?(Gf.marked="keyword",Xa(wg,td("operator"),wg,td(";"))):Xa(fc("stat"),zf):"switch"==Mc?Xa(fc("form"),ic,td("{"),fc("}","switch"),fg,Ud,Ud):"case"==Mc?Xa(Xb,td(":")):"default"==Mc?Xa(td(":")):"catch"==Mc?Xa(fc("form"),ub,td("("),vb,td(")"),fd,Ud,qd):"class"==Mc?Xa(fc("form"),Sc,Ud):"export"==Mc?Xa(fc("stat"),$d,Ud):"import"==Mc?Xa(fc("stat"),lf,Ud):"module"==Mc?Xa(fc("form"),
Kd,td("{"),fc("}"),fg,Ud,Ud):"async"==Mc?Xa(fd):"@"==Sd?Xa(Xb,fd):Fa(fc("stat"),Xb,td(";"),Ud)}function Xb(Mc){return Wb(Mc,!1)}function Me(Mc){return Wb(Mc,!0)}function ic(Mc){return"("!=Mc?Fa():Xa(fc(")"),Xb,td(")"),Ud)}function Wb(Mc,Sd){if(Gf.state.fatArrowAt==Gf.stream.start){var Se=Sd?gd:ud;if("("==Mc)return Xa(ub,fc(")"),Pe(Kd,")"),Ud,td("=>"),Se,qd);if("variable"==Mc)return Fa(ub,Kd,td("=>"),Se,qd)}Se=Sd?qb:Ta;return Ei.hasOwnProperty(Mc)?Xa(Se):"function"==Mc?Xa(ab,Se):"class"==Mc?Xa(fc("form"),
oc,Ud):"keyword c"==Mc||"async"==Mc?Xa(Sd?ma:$a):"("==Mc?Xa(fc(")"),$a,td(")"),Ud,Se):"operator"==Mc||"spread"==Mc?Xa(Sd?Me:Xb):"["==Mc?Xa(fc("]"),gg,Ud,Se):"{"==Mc?Tf(C,"}",null,Se):"quasi"==Mc?Fa(ec,Se):"new"==Mc?Xa(me(Sd)):Xa()}function $a(Mc){return Mc.match(/[;\}\)\],]/)?Fa():Fa(Xb)}function ma(Mc){return Mc.match(/[;\}\)\],]/)?Fa():Fa(Me)}function Ta(Mc,Sd){return","==Mc?Xa(Xb):qb(Mc,Sd,!1)}function qb(Mc,Sd,Se){var re=0==Se?Ta:qb,og=0==Se?Xb:Me;if("=>"==Mc)return Xa(ub,Se?gd:ud,qd);if("operator"==
Mc)return/\+\+|--/.test(Sd)?Xa(re):"?"==Sd?Xa(Xb,td(":"),og):Xa(og);if("quasi"==Mc)return Fa(ec,re);if(";"!=Mc){if("("==Mc)return Tf(Me,")","call",re);if("."==Mc)return Xa(qf,re);if("["==Mc)return Xa(fc("]"),$a,td("]"),Ud,re)}}function ec(Mc,Sd){return"quasi"!=Mc?Fa():"${"!=Sd.slice(Sd.length-2)?Xa(ec):Xa(Xb,Ic)}function Ic(Mc){if("}"==Mc)return Gf.marked="string-2",Gf.state.tokenize=Na,Xa(ec)}function ud(Mc){Wa(Gf.stream,Gf.state);return Fa("{"==Mc?fd:Xb)}function gd(Mc){Wa(Gf.stream,Gf.state);return Fa("{"==
Mc?fd:Me)}function me(Mc){return function(Sd){return"."==Sd?Xa(Mc?Uf:ue):Fa(Mc?Me:Xb)}}function ue(Mc,Sd){if("target"==Sd)return Gf.marked="keyword",Xa(Ta)}function Uf(Mc,Sd){if("target"==Sd)return Gf.marked="keyword",Xa(qb)}function zf(Mc){return":"==Mc?Xa(Ud,fd):Fa(Ta,td(";"),Ud)}function qf(Mc){if("variable"==Mc)return Gf.marked="property",Xa()}function C(Mc,Sd){if("async"==Mc)return Gf.marked="property",Xa(C);if("variable"==Mc||"keyword"==Gf.style)return Gf.marked="property","get"==Sd||"set"==
Sd?Xa(Df):Xa(Bf);if("number"==Mc||"string"==Mc)return Gf.marked=Vh?"property":Gf.style+" property",Xa(Bf);if("jsonld-keyword"==Mc)return Xa(Bf);if("modifier"==Mc)return Xa(C);if("["==Mc)return Xa(Xb,td("]"),Bf);if("spread"==Mc)return Xa(Xb);if(":"==Mc)return Fa(Bf)}function Df(Mc){if("variable"!=Mc)return Fa(Bf);Gf.marked="property";return Xa(ab)}function Bf(Mc){if(":"==Mc)return Xa(Me);if("("==Mc)return Fa(ab)}function Pe(Mc,Sd,Se){function re(og,ch){return(Se?-1<Se.indexOf(og):","==og)?(og=Gf.state.lexical,
"call"==og.info&&(og.pos=(og.pos||0)+1),Xa(function(hh,bn){return hh==Sd||bn==Sd?Fa():Fa(Mc)},re)):og==Sd||ch==Sd?Xa():Xa(td(Sd))}return function(og,ch){return og==Sd||ch==Sd?Xa():Fa(Mc,re)}}function Tf(Mc,Sd,Se){for(var re=3;re<arguments.length;re++)Gf.cc.push(arguments[re]);return Xa(fc(Sd,Se),Pe(Mc,Sd),Ud)}function fg(Mc){return"}"==Mc?Xa():Fa(fd,fg)}function kg(Mc,Sd){if(tg){if(":"==Mc)return Xa(wg);if("?"==Sd)return Xa(kg)}}function wg(Mc){if("variable"==Mc)return Gf.marked="variable-3",Xa(Bg);
if("string"==Mc||"number"==Mc||"atom"==Mc)return Xa(Bg);if("{"==Mc)return Xa(fc("}"),Pe(rd,"}",",;"),Ud);if("("==Mc)return Xa(Pe(cf,")"),kh)}function kh(Mc){if("=>"==Mc)return Xa(wg)}function rd(Mc,Sd){if("variable"==Mc||"keyword"==Gf.style)return Gf.marked="property",Xa(rd);if("?"==Sd)return Xa(rd);if(":"==Mc)return Xa(wg)}function cf(Mc){if("variable"==Mc)return Xa(cf);if(":"==Mc)return Xa(wg)}function Bg(Mc,Sd){if("<"==Sd)return Xa(fc(">"),Pe(wg,">"),Ud,Bg);if("|"==Sd||"."==Mc)return Xa(wg);if("["==
Mc)return Xa(td("]"),Bg);if("extends"==Sd)return Xa(wg)}function Eh(){return Fa(Kd,kg,cb,Cc)}function Kd(Mc,Sd){if("modifier"==Mc)return Xa(Kd);if("variable"==Mc)return gc(Sd),Xa();if("spread"==Mc)return Xa(Kd);if("["==Mc)return Tf(Kd,"]");if("{"==Mc)return Tf(lb,"}")}function lb(Mc,Sd){if("variable"==Mc&&!Gf.stream.match(/^\s*:/,!1))return gc(Sd),Xa(cb);"variable"==Mc&&(Gf.marked="property");return"spread"==Mc?Xa(Kd):"}"==Mc?Fa():Xa(td(":"),Kd,cb)}function cb(Mc,Sd){if("="==Sd)return Xa(Me)}function Cc(Mc){if(","==
Mc)return Xa(Eh)}function La(Mc,Sd){if("keyword b"==Mc&&"else"==Sd)return Xa(fc("form","else"),fd,Ud)}function Sa(Mc){if("("==Mc)return Xa(fc(")"),Ya,td(")"),Ud)}function Ya(Mc){return"var"==Mc?Xa(Eh,td(";"),Tb):";"==Mc?Xa(Tb):"variable"==Mc?Xa(oa):Fa(Xb,td(";"),Tb)}function oa(Mc,Sd){return"in"==Sd||"of"==Sd?(Gf.marked="keyword",Xa(Xb)):Xa(Ta,Tb)}function Tb(Mc,Sd){return";"==Mc?Xa(Ha):"in"==Sd||"of"==Sd?(Gf.marked="keyword",Xa(Xb)):Fa(Xb,td(";"),Ha)}function Ha(Mc){")"!=Mc&&Xa(Xb)}function ab(Mc,
Sd){if("*"==Sd)return Gf.marked="keyword",Xa(ab);if("variable"==Mc)return gc(Sd),Xa(ab);if("("==Mc)return Xa(ub,fc(")"),Pe(vb,")"),Ud,kg,fd,qd);if(tg&&"<"==Sd)return Xa(fc(">"),Pe(wg,">"),Ud,ab)}function vb(Mc){return"spread"==Mc?Xa(vb):Fa(Kd,kg,cb)}function oc(Mc,Sd){return"variable"==Mc?Sc(Mc,Sd):md(Mc,Sd)}function Sc(Mc,Sd){if("variable"==Mc)return gc(Sd),Xa(md)}function md(Mc,Sd){if("<"==Sd)return Xa(fc(">"),Pe(wg,">"),Ud,md);if("extends"==Sd||"implements"==Sd||tg&&","==Mc)return Xa(tg?wg:Xb,
md);if("{"==Mc)return Xa(fc("}"),xd,Ud)}function xd(Mc,Sd){if("variable"==Mc||"keyword"==Gf.style){if(("async"==Sd||"static"==Sd||"get"==Sd||"set"==Sd||tg&&("public"==Sd||"private"==Sd||"protected"==Sd||"readonly"==Sd||"abstract"==Sd))&&Gf.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return Gf.marked="keyword",Xa(xd);Gf.marked="property";return Xa(tg?nd:ab,xd)}if("["==Mc)return Xa(Xb,td("]"),tg?nd:ab,xd);if("*"==Sd)return Gf.marked="keyword",Xa(xd);if(";"==Mc)return Xa(xd);if("}"==Mc)return Xa();if("@"==
Sd)return Xa(Xb,xd)}function nd(Mc,Sd){return"?"==Sd?Xa(nd):":"==Mc?Xa(wg,cb):"="==Sd?Xa(Me):Fa(ab)}function $d(Mc,Sd){return"*"==Sd?(Gf.marked="keyword",Xa(Xe,td(";"))):"default"==Sd?(Gf.marked="keyword",Xa(Xb,td(";"))):"{"==Mc?Xa(Pe(Ie,"}"),Xe,td(";")):Fa(fd)}function Ie(Mc,Sd){if("as"==Sd)return Gf.marked="keyword",Xa(td("variable"));if("variable"==Mc)return Fa(Me,Ie)}function lf(Mc){return"string"==Mc?Xa():Fa(te,yf,Xe)}function te(Mc,Sd){if("{"==Mc)return Tf(te,"}");"variable"==Mc&&gc(Sd);"*"==
Sd&&(Gf.marked="keyword");return Xa(df)}function yf(Mc){if(","==Mc)return Xa(te,yf)}function df(Mc,Sd){if("as"==Sd)return Gf.marked="keyword",Xa(te)}function Xe(Mc,Sd){if("from"==Sd)return Gf.marked="keyword",Xa(Xb)}function gg(Mc){return"]"==Mc?Xa():Fa(Pe(Me,"]"))}xc=Object.assign({},Ad.defaultConfig,{},xc);Pc=Object.assign({},Ad.defaultParserConfig,{},Pc);var Ug=xc.indentUnit,ci=Pc.statementIndent,Vh=Pc.jsonld,Zg=Pc.json||Vh,tg=Pc.typescript,Hi=Pc.wordCharacters||/[\w$\xa1-\uffff]/,zj=function(){function Mc(bn){return{type:bn,
style:"keyword"}}var Sd=Mc("keyword a"),Se=Mc("keyword b"),re=Mc("keyword c"),og=Mc("operator"),ch={type:"atom",style:"atom"};Sd={if:Mc("if"),while:Sd,with:Sd,else:Se,do:Se,try:Se,finally:Se,return:re,break:re,continue:re,new:Mc("new"),delete:re,throw:re,debugger:re,var:Mc("var"),const:Mc("var"),let:Mc("var"),function:Mc("function"),catch:Mc("catch"),for:Mc("for"),switch:Mc("switch"),case:Mc("case"),default:Mc("default"),in:og,typeof:og,instanceof:og,true:ch,false:ch,null:ch,undefined:ch,NaN:ch,Infinity:ch,
this:Mc("this"),class:Mc("class"),super:Mc("atom"),yield:re,export:Mc("export"),import:Mc("import"),extends:re,await:re,async:Mc("async")};if(tg){Se={type:"variable",style:"variable-3"};re={interface:Mc("class"),implements:re,namespace:re,module:Mc("module"),enum:Mc("module"),public:Mc("modifier"),private:Mc("modifier"),protected:Mc("modifier"),abstract:Mc("modifier"),as:og,string:Se,number:Se,boolean:Se,any:Se};for(var hh in re)Sd[hh]=re[hh]}return Sd}(),Wh=/[+\-*&%=<>!?|~^@]/,xg=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,
gh,sh,Ei={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0},Gf={state:null,column:null,marked:null,cc:null},Aj={name:"this",next:{name:"arguments"}};Ud.lex=!0;return{startState:function(Mc){Mc={tokenize:Za,lastType:"sof",cc:[],lexical:new Vb((Mc||0)-Ug,0,"block",!1),localVars:Pc.localVars,context:Pc.localVars&&{vars:Pc.localVars},indented:Mc||0};Pc.globalVars&&"object"===typeof Pc.globalVars&&(Mc.globalVars=Pc.globalVars);return Mc},token:function(Mc,Sd){Mc.sol()&&(Sd.lexical.hasOwnProperty("align")||
(Sd.lexical.align=!1),Sd.indented=Mc.indentation(),Wa(Mc,Sd));if(Sd.tokenize!=ua&&Mc.eatSpace())return null;var Se=Sd.tokenize(Mc,Sd);if("comment"==gh)return Se;Sd.lastType="operator"!=gh||"++"!=sh&&"--"!=sh?gh:"incdec";a:{var re=gh,og=sh,ch=Sd.cc;Gf.state=Sd;Gf.stream=Mc;Gf.marked=null;Gf.cc=ch;Gf.style=Se;Sd.lexical.hasOwnProperty("align")||(Sd.lexical.align=!0);for(Mc=0;;){if(1E5<Mc++)throw Error("endless");if((ch.length?ch.pop():Zg?Xb:fd)(re,og)){for(;ch.length&&ch[ch.length-1].lex;)ch.pop()();
if(Gf.marked){Se=Gf.marked;break a}if(re="variable"==re)b:{for(re=Sd.localVars;re;re=re.next)if(re.name==og){re=!0;break b}for(Sd=Sd.context;Sd;Sd=Sd.prev)for(re=Sd.vars;re;re=re.next)if(re.name==og){re=!0;break b}re=void 0}if(re){Se="variable-2";break a}break a}}}return Se},indent:function(Mc,Sd){if(Mc.tokenize==ua)return Ad.passIndent;if(Mc.tokenize!=Za)return 0;var Se=Sd&&Sd.charAt(0),re=Mc.lexical,og;if(!/^\s*else\b/.test(Sd))for(var ch=Mc.cc.length-1;0<=ch;--ch){var hh=Mc.cc[ch];if(hh==Ud)re=
re.prev;else if(hh!=La)break}for(;!("stat"!=re.type&&"form"!=re.type||"}"!=Se&&(!(og=Mc.cc[Mc.cc.length-1])||og!=Ta&&og!=qb||/^[,\.=+\-*:?[\(]/.test(Sd)));)re=re.prev;ci&&")"==re.type&&"stat"==re.prev.type&&(re=re.prev);og=re.type;ch=Se==og;return(hh=Mc._string)&&hh.trimLeft().startsWith("?")&&":"===Se?hh.indexOf("?"):hh&&":"===Mc.lastType&&"}"!==re.type?hh.match(/^\s*/)[0].length:"vardef"==og?(Sd=re.indented+re.info+2+Mc.localVars.name.length,"?"===Se||":"===Se||"|"===Se||"&"===Se?Sd:","==Mc.lastType?
re.indented+re.info+1:"operator"==Mc.lastType?Sd+3:re.indented):"form"==og&&"{"==Se?re.indented:"form"==og?re.indented+Ug:"stat"==og?(Se=re.indented,Mc="operator"==Mc.lastType||","==Mc.lastType||Wh.test(Sd.charAt(0))||/[,.]/.test(Sd.charAt(0)),Se+(Mc?ci||Ug:0)):"switch"!=re.info||ch||0==Pc.doubleIndentSwitch?re.align?re.column+(ch?0:1):re.indented+(ch?0:Ug):re.indented+(/^(?:case|default)\b/.test(Sd)?Ug:2*Ug)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Zg?null:"/*",blockCommentEnd:Zg?
null:"*/",lineComment:Zg?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Zg?"json":"javascript",jsonldMode:Vh,jsonMode:Zg,expressionAllowed:Ad.expressionAllowed,skipExpression:function(Mc){var Sd=Mc.cc[Mc.cc.length-1];Sd!=Xb&&Sd!=Me||Mc.cc.pop()}}});Ad.registerHelper("wordChars","javascript",/[\w$]/);Ad.defineMIME("text/javascript","javascript");Ad.defineMIME("text/ecmascript","javascript");Ad.defineMIME("application/javascript","javascript");Ad.defineMIME("application/x-javascript",
"javascript");Ad.defineMIME("application/ecmascript","javascript");Ad.defineMIME("application/json",{name:"javascript",json:!0});Ad.defineMIME("application/x-json",{name:"javascript",json:!0});Ad.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});Ad.defineMIME("text/typescript",{name:"javascript",typescript:!0});Ad.defineMIME("application/typescript",{name:"javascript",typescript:!0});var Xd=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js");Xd.string=jd;Xd.JavaScriptChecker=
ac;Xd.JavaScriptNavigator=ie;Xd.completers=wc;Xd.jsSnippets=zc;Xd.jsIdeCommands=Jc;Xd.jsEditorCommands=hb;Xd.astEditorCommands=Wc;Xd.CodeMirrorEnabledEditorPlugin=he;Xd.Snippet=Tc;Xd.parser=Hd;Xd.localInterface=uc;Xd.systemInterfaceNamed=wd;Xd.serverInterfaceFor=ce;Xd.l2lInterfaceFor=Gd;ac=function(xc){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js"),sc=Pc.hasOwnProperty("JavaScriptEditorPlugin")&&"function"===typeof Pc.JavaScriptEditorPlugin?Pc.JavaScriptEditorPlugin:Pc.JavaScriptEditorPlugin=
function(Za){Za&&Za[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(sc,xc,[{key:Symbol.for("lively-instance-initialize"),value:function(){Zb._get(Object.getPrototypeOf(sc.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.checker=new Xd.JavaScriptChecker;this.evalEnvironment={format:"esm",targetModule:null,context:null}}},{key:"isJSEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"js"}},
{key:"longName",get:function(){return"javascript"}},{key:"attach",value:function(Za){Zb._get(Object.getPrototypeOf(sc.prototype),"attach",this).call(this,Za);this.evalEnvironment=Object.assign({},this.evalEnvironment,{context:Za})}},{key:"detach",value:function(Za){this.checker.uninstall(this.textMorph);Zb._get(Object.getPrototypeOf(sc.prototype),"detach",this).call(this,Za)}},{key:"getNavigator",value:function(){return new Xd.JavaScriptNavigator}},{key:"getCompleters",value:function(Za){return Xd.completers.concat(Za)}},
{key:"getCommands",value:function(Za){return[].concat($jscomp.arrayFromIterable(Zb._get(Object.getPrototypeOf(sc.prototype),"getCommands",this).call(this,Za)),$jscomp.arrayFromIterable(Xd.jsIdeCommands),$jscomp.arrayFromIterable(Xd.jsEditorCommands),$jscomp.arrayFromIterable(Xd.astEditorCommands))}},{key:"getKeyBindings",value:function(Za){return[].concat($jscomp.arrayFromIterable(Za),[{keys:"Shift-Tab",command:{command:"[javascript] auto format code"}},{keys:"Ctrl-C E",command:"[javascript] list errors and warnings"},
{keys:{mac:"Meta-Shift-L L I N T R",win:"Ctrl-Shift-L L I N T R"},command:"[javascript] eslint report"},{keys:{mac:"Meta-Shift-L L I N T P",win:"Ctrl-Shift-L L I N T P"},command:"[javascript] eslint preview fixes"},{keys:{mac:"Meta-Shift-L L I N T F",win:"Ctrl-Shift-L L I N T F"},command:"[javascript] eslint fix"},{keys:{mac:"Meta-Shift-L M O D E",win:"Ctrl-Shift-L M O D E"},command:"change editor mode"},{keys:"Ctrl-C I",command:"[javascript] inject import"},{keys:"Ctrl-C C I",command:"[javascript] fix undeclared variables"}])}},
{key:"getMenuItems",value:function(Za){var Pa=this,ua,Na,Wa,Vb,Fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xa){ua=Pa.textMorph;Na=[{command:"doit",target:ua,showKeyShortcuts:!0},{command:"inspectit",target:ua,showKeyShortcuts:!0},{command:"editit",target:ua,showKeyShortcuts:!0},{command:"printit",target:ua,showKeyShortcuts:!0},{command:"print inspectit",alias:"print inspect",target:ua,showKeyShortcuts:!0},{command:"eval all",target:ua,showKeyShortcuts:!0},{command:"text completion",
alias:"code completion",target:ua,showKeyShortcuts:!0},{command:"[javascript] list errors and warnings",alias:"list errors and warnings",target:ua,showKeyShortcuts:!0},{isDivider:!0}];Pa.evalEnvironment.targetModule&&Na.push({command:"[javascript] inject import",alias:"add import",target:ua},{command:"[javascript] fix undeclared variables",alias:"fix undeclared variables",target:ua},{command:"[javascript] remove unused imports",alias:"remove unused imports",target:ua});Wa=Pa.getNavigator();(Vb=Wa.resolveIdentifierAt(ua,
ua.cursorPosition))&&Na.push({command:"selectDefinition",alias:'jump to definition of "'+Vb.name+'"',target:ua},{command:"selectSymbolReferenceOrDeclaration",alias:'select all occurrences of "'+Vb.name+'"',target:ua});(Fa=ua.selection.text.trim())&&Na.push({command:"open code search",alias:'code search for "'+Xd.string.truncate(Fa,30)+'"',target:ua.world(),args:{input:Fa,backend:Pa.backend()}});Na.push({isDivider:!0});return Xa.return(Na.concat(Za))})}},{key:"getSnippets",value:function(){return Xd.jsSnippets.map(function(Za){var Pa=
$jscomp.makeIterator(Za);Za=Pa.next().value;Pa=Pa.next().value;return new Xd.Snippet({trigger:Za,expansion:Pa})})}},{key:"sanatizedJsEnv",value:function(Za){Za=Object.assign({},this.evalEnvironment,{},Za);Za.format||(Za.formatd="esm");Za.context||(Za.context=this.textMorph);Za.sourceURL||(Za.sourceURL=Za.targetModule+"_doit_"+Date.now());Za.systemInterface||(Za.systemInterface=Xd.localInterface);return Za}},{key:"backend",value:function(Za){Za=this.sanatizedJsEnv(Za);return Za.remote?Za.remote:"local"}},
{key:"systemInterface",value:function(Za){return this.sanatizedJsEnv(Za).systemInterface||Xd.localInterface}},{key:"setSystemInterface",value:function(Za){return this.evalEnvironment.systemInterface=Za}},{key:"setSystemInterfaceNamed",value:function(Za){return this.setSystemInterface(Xd.systemInterfaceNamed(Za))}},{key:"runEval",value:function(Za,Pa){Pa=this.sanatizedJsEnv(Pa);return this.systemInterface(Pa).runEval(Za,Pa)}},{key:"parser",get:function(){return Xd.parser}},{key:"parse",value:function(Za){Za=
void 0===Za?null:Za;if(this._ast&&this._ast._astType===Za)return this._ast;var Pa=this.parser,ua=this.textMorph.textString;if(!Pa)return null;var Na={withComments:!0,allowReturnOutsideFunction:!0};Za&&(Na.type=Za);if(ua.startsWith("#!")){var Wa=ua.indexOf("\n");ua=" ".repeat(Wa)+ua.slice(Wa)}Pa=Pa.fuzzyParse(ua,Na);Pa._astType=Za;return this._ast=Pa}},{key:"undeclaredVariables",value:function(Za){var Pa=this.parser,ua=this.evalEnvironment.knownGlobals||[];Za=this.parse(void 0===Za?null:Za);return Pa&&
Za?Pa.query.findGlobalVarRefs(Za,{jslintGlobalComment:!0}).filter(function(Na){return!ua.includes(Na.name)}):[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptEditorPlugin"}}],Pc,{pathInPackage:function(){return"js/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:664,end:6857})}(Xd.CodeMirrorEnabledEditorPlugin);
ac=Xd.JavaScriptEditorPlugin;db("default",ac);Xd.default=ac}}});