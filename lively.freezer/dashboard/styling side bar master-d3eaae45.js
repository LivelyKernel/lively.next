System.register("./__root_module__-db735625.js ./index-2260babb.js ./color-picker-ca0a3012.js ./index-a5b95ed8.js ./index-fcc0ad98.js ./index-9659c254.js".split(" "),function(){var db,Zb,lc,Uc,Bc,Vd,Od,je,Bd,jd,zd,ge,We,kf,bf,Hd,Ae,uc,wd,ce,Gd,pe,Te,rc,bd,he,cd,ie,ac,Db,Tc,Nc,wc,Vc;return{setters:[function(hb){db=hb.f;Zb=hb.c;lc=hb._;Uc=hb.ay;Bc=hb.b;Vd=hb.O;Od=hb.h;je=hb.ah;Bd=hb.ad;jd=hb.m;zd=hb.M;ge=hb.I;We=hb.p;kf=hb.R;bf=hb.C;Hd=hb.d;Ae=hb.a1;uc=hb.o;wd=hb.bH;ce=hb.bE;Gd=hb.a7;pe=hb.i;Te=
hb.t;rc=hb.e;bd=hb.bB;he=hb.g;cd=hb.bP;ie=hb.r;ac=hb.P;Db=hb.bQ;Tc=hb.bR},function(hb){Nc=hb.I},function(hb){wc=hb.a;Vc=hb.S},function(){},function(){},function(){}],execute:function(){var hb=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js");hb.fun=db;hb.string=Zb;hb.obj=lc;hb.properties=Uc;hb.arr=Bc;hb.Text=Vd;hb.config=Od;hb.HorizontalLayout=je;hb.VerticalLayout=Bd;hb.morph=jd;hb.Morph=zd;hb.Icon=ge;hb.pt=We;hb.Rectangle=kf;hb.Color=bf;hb.connect=Hd;hb.disconnect=Ae;hb.once=uc;hb.noUpdate=
wd;hb.ColorPicker=wc;hb.DropDownList=ce;hb.loadObjectFromPartsbinFolder=Gd;hb.cachedControls=new WeakMap;var zc=function(Pc){var sc=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js"),Za=sc.hasOwnProperty("RichTextControl")&&"function"===typeof sc.RichTextControl?sc.RichTextControl:sc.RichTextControl=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pe(Za,Pc,[{key:"toggleButton",value:function(Pa,ua){Pa.master=
ua?{auto:this.selectedButtonMaster}:{auto:this.buttonMaster}}},{key:"onLoad",value:function(){this.reset()}},{key:"reset",value:function(){var Pa=this.ui.fontSelection;Pa.items=hb.arr.uniq([].concat($jscomp.arrayFromIterable(this.env.fontMetric.supportedFonts),$jscomp.arrayFromIterable(hb.config.text.basicFontItems)));this.target&&(Pa.selection=this.target.fontFamily||Pa.items[0].value,hb.connect(this.target,"selectionChange",this,"update",{garbageCollect:!0}))}},{key:"alignAtTarget",value:function(Pa){Pa=
void 0===Pa?!!this.world():Pa;var ua=this.target,Na=ua.world()||$world,Wa=this.globalBounds();ua=(ua.selection.isEmpty()?ua.globalBounds():ua.getGlobalTransform().transformRectToRect(ua.selectionBounds().translatedBy(ua.scroll.negated()))).bottomCenter().subPt(Wa.topCenter());Na=Na.visibleBounds().translateForInclusion(Wa.translatedBy(ua)).topLeft().subPt(Wa.topLeft());Na=this.position.addPt(Na);Pa?this.animate({duration:300,position:Na}):this.position=Na}},{key:"removeFocus",value:function(){var Pa=
this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(ua){return ua.targetObj===Pa&&ua.disconnect()});this.autoRemove&&this.target&&(this.remove(),this.target=null)}},{key:"focusOn",value:function(Pa,ua){ua=void 0===ua?!0:ua;var Na=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wa){if(1==Wa.nextAddress)return Na.target&&hb.disconnect(Na.target,"selectionChange",Na,"update"),Na.target=Pa,Na.reset(),Na.update(),Wa.yield(Na.whenRendered(),
2);Na.ui.fontSizeField.relayout();ua&&Na.alignAtTarget();Wa.jumpToEnd()})}},{key:"setupConnections",value:function(){hb.connect(this.ui.paddingField,"number",this,"setPadding");hb.connect(this.ui.paddingFieldTop,"number",this,"setPaddingTop");hb.connect(this.ui.paddingFieldBottom,"number",this,"setPaddingBottom");hb.connect(this.ui.paddingFieldLeft,"number",this,"setPaddingLeft");hb.connect(this.ui.paddingFieldRight,"number",this,"setPaddingRight")}},{key:"update",value:function(){var Pa=this,ua=
this.target,Na=this.updateSpec,Wa=ua.selection;Wa=!ua.readOnly&&Wa?Wa.isEmpty()?ua.textAttributeAt(Wa.start):ua.getStyleInRange(Wa):{};var Vb=this.managedProps,Fa=hb.obj.select(ua,Vb);ua=$jscomp.makeIterator(Object.entries(hb.obj.select(Wa||{},Vb)));for(Wa=ua.next();!Wa.done;Wa=ua.next())Vb=$jscomp.makeIterator(Wa.value),Wa=Vb.next().value,Vb=Vb.next().value,"undefined"!==typeof Vb&&(Fa[Wa]=Vb);hb.noUpdate(function(){for(var Xa=$jscomp.makeIterator(Object.entries(Pa.ui)),gc=Xa.next();!gc.done;gc=
Xa.next()){var ub=$jscomp.makeIterator(gc.value);gc=ub.next().value;ub=ub.next().value;if(Na[gc])Na[gc](Fa,ub)}})}},{key:"relayout",value:function(){}},{key:"changeAttributeInSelectionOrMorph",value:function(Pa,ua){var Na=this.target,Wa=Na.selection;Na.isLabel||Wa&&Wa.isEmpty()?Na[Pa]="function"===typeof ua?ua(Na[Pa]):ua:(Na.undoManager.group(),Na.changeStyleProperty(Pa,function(Vb){return"function"===typeof ua?ua(Vb):ua}),Na.undoManager.group())}},{key:"changeFont",value:function(Pa){var ua=this,
Na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wa){if(1==Wa.nextAddress)return ua._last=Pa,(Na="custom..."===Pa)?Wa.yield($world.prompt("Enter font family name",{requester:ua.target,historyId:"lively.morphic-rich-text-font-names",useLastInput:!0}),3):Wa.jumpTo(2);if(2!=Wa.nextAddress&&(Pa=Wa.yieldResult,!Pa))return Wa.return();ua.changeAttributeInSelectionOrMorph("fontFamily",Pa);Wa.jumpToEnd()})}},{key:"setPadding",value:function(Pa){this.target.padding=hb.Rectangle.inset(Pa)}},{key:"setPaddingTop",
value:function(Pa){var ua=this.target.padding;this.target.padding=hb.Rectangle.inset(ua.left(),Pa,ua.right(),ua.bottom())}},{key:"setPaddingLeft",value:function(Pa){var ua=this.target.padding;this.target.padding=hb.Rectangle.inset(Pa,ua.top(),ua.right(),ua.bottom())}},{key:"setPaddingRight",value:function(Pa){var ua=this.target.padding;this.target.padding=hb.Rectangle.inset(ua.left(),ua.top(),Pa,ua.bottom())}},{key:"setPaddingBottom",value:function(Pa){var ua=this.target.padding;this.target.padding=
hb.Rectangle.inset(ua.left(),ua.top(),ua.right(),Pa)}},{key:"setLineWrapping",value:function(Pa){this.target.lineWrapping=Pa}},{key:"changeFontWeight",value:function(Pa){this.changeAttributeInSelectionOrMorph("fontWeight",Pa)}},{key:"changeTextAlign",value:function(Pa){this.changeAttributeInSelectionOrMorph("textAlign",Pa)}},{key:"changeFontColor",value:function(Pa){this.changeAttributeInSelectionOrMorph("fontColor",Pa)}},{key:"changeFontSize",value:function(Pa){this.changeAttributeInSelectionOrMorph("fontSize",
Pa)}},{key:"changeFixedWidth",value:function(Pa){this.target.fixedWidth=Pa}},{key:"changeFixedHeight",value:function(Pa){this.target.fixedHeight=Pa}},{key:"changeLink",value:function(){var Pa=this,ua,Na,Wa,Vb,Fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xa){if(1==Xa.nextAddress)return ua=Pa.target,Na=ua.selection,Wa=ua.getStyleInRange(Na),Vb=Wa.link,Xa.yield(Pa.world().prompt("Set link",{input:Vb||"https://"}),2);Fa=Xa.yieldResult;ua.undoManager.group();ua.setStyleInRange({link:Fa||
void 0},Na);ua.undoManager.group();Pa.autoRemove&&Pa.remove();Xa.jumpToEnd()})}},{key:"toggleUnderline",value:function(){this.changeAttributeInSelectionOrMorph("textDecoration",function(Pa){return"underline"===Pa?"none":"underline"})}},{key:"toggleItalic",value:function(){this.changeAttributeInSelectionOrMorph("fontStyle",function(Pa){return"italic"===Pa?"normal":"italic"})}},{key:"toggleBold",value:function(){this.changeAttributeInSelectionOrMorph("fontWeight",function(Pa){return"bold"===Pa||"700"===
Pa?"normal":"bold"})}},{key:"copyStyle",value:function(){var Pa=this,ua=this.target,Na=this.ui.applyStyleButton;ua=ua.selection.isEmpty()?ua.defaultTextStyle:ua.getStyleInRange(ua.selection);var Wa=JSON.stringify(ua,null,2);this.constructor.copiedStyle=ua;Na.tooltip="paste style\n"+Wa;this.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/plain",data:Wa},{type:"application/morphic-text-style",styleString:Wa}]).then(function(){return Pa.setStatusMessage("Copied style\n"+Wa)}).catch(function(Vb){return Pa.showError(Vb)})}},
{key:"pasteStyle",value:function(){var Pa=this,ua=this.target,Na=this.constructor.copiedStyle;ua.selection.isEmpty()?Object.assign(ua,Na):ua.selections.forEach(function(Wa){return ua.addTextAttribute(Pa.constructor.copiedStyle,Wa)});this.update()}},{key:"clearStyle",value:function(){var Pa=this.target;Pa.selections.forEach(function(ua){return Pa.resetStyleInRange(ua)});this.update()}},{key:"configureRichTextOptions",value:function(){this.getSubmorphNamed("config panel")&&this.getSubmorphNamed("config panel").remove();
var Pa=this.defaultSpec,ua=this.uiSpec;Pa=this.addMorph({name:"config panel",layout:new hb.VerticalLayout({spacing:5}),epiMorph:!0,submorphs:[].concat($jscomp.arrayFromIterable(Object.keys(Pa).map(function(Na){var Wa=ua.rows.some(function(Vb){return Vb.some(function(Fa){return Fa===Na})});return{type:"labeledcheckbox",label:Na,name:Na,checked:Wa}})),[{layout:new hb.HorizontalLayout({spacing:3}),submorphs:[{type:"button",name:"OK button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}])});
Pa.center=this.innerBounds().center();hb.connect(Pa.getSubmorphNamed("OK button"),"fire",this,"configureAccepted");hb.connect(Pa.getSubmorphNamed("cancel button"),"fire",this,"configureCanceled")}},{key:"configureAccepted",value:function(){var Pa=this.getSubmorphNamed("config panel");Pa&&(Pa.remove(),Pa.submorphs.filter(function(ua){return"LabeledCheckBox"===ua.constructor.name}))}},{key:"configureCanceled",value:function(){var Pa=this.getSubmorphNamed("config panel");Pa&&Pa.remove()}},{key:"close",
value:function(){var Pa=this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(ua){return ua.targetObj===Pa&&ua.disconnect()});this.remove()}},{key:"alwaysTargetFocusedMorph",value:function(){this.startStepping(1500,"updateTarget")}},{key:"updateTarget",value:function(){var Pa=this.world();Pa&&(Pa=Pa.focusedMorph)&&(Pa.isLabel||Pa.isText)&&!this.isAncestorOf(Pa)&&this.target!==Pa&&this.focusOn(Pa,!1)}},{key:"onMouseUp",value:function(Pa){var ua=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(Na){if(1==Na.nextAddress)return Na.yield(ua.whenRendered(),2);ua.update();Na.jumpToEnd()})}},{key:"attachToWorld",value:function(){hb.connect($world,"onMouseDown",this,"updateTarget",{garbageCollect:!0})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RichTextControl"}},{key:"properties",get:function(){return{autoRemove:{defaultValue:!1},target:{},toggleColor:{},buttonMaster:{defaultValue:"styleguide://System/dark button"},
selectedButtonMaster:{defaultValue:"styleguide://SystemIDE/selected button"},managedProps:{readOnly:!0,get:function(){return"fontFamily fontWeight fontSize fontStyle isText fontColor textAlign link textDecoration fixedWidth fixedHeight lineWrapping padding".split(" ")}},updateSpec:{get:function(){var Pa=this;return Object.assign({fontSelection:function(ua,Na){var Wa=ua.fontFamily;(ua=Wa&&Na.items.find(function(Vb){return Vb.value.toLowerCase()===Wa.toLowerCase()}))?Na.selection=ua.value:Wa&&(Na.items=
Na.items.concat({isListItem:!0,label:[Wa,{fontFamily:Wa}],value:Wa}),Na.selection=hb.arr.last(Na.items))},fontWeightSelection:function(ua,Na){Na.selection="normal"==ua.fontWeight?"Medium":ua.fontWeight?hb.string.capitalize(ua.fontWeight):"Medium"},boldButton:function(ua,Na){Pa.toggleButton(Na,"bold"===ua.fontWeight)},italicButton:function(ua,Na){Pa.toggleButton(Na,"italic"===ua.fontStyle)},underlineButton:function(ua,Na){Pa.toggleButton(Na,"underline"===ua.textDecoration)},linkButton:function(ua,
Na){Pa.toggleButton(Na,!!ua.link)},colorPicker:function(ua,Na){Na.colorValue=ua.fontColor},fontSizeField:function(ua,Na){Na.number=ua.fontSize},fixedWidthControl:function(ua,Na){ua.isText?Na.enable():Na.disable();Na.checked=ua.fixedWidth},fixedHeightControl:function(ua,Na){ua.isText?Na.enable():Na.disable();Na.checked=ua.fixedHeight},lineWrappingControl:function(ua,Na){var Wa=$jscomp.makeIterator(Na.submorphs);Na=Wa.next().value;Wa=Wa.next().value;Na.checked=!!ua.lineWrapping;ua.isText?Na.enable():
Na.disable();Wa.deactivated=!ua.lineWrapping;Wa.deactivated?Wa.opacity=.5:(Wa.opacity=1,Wa.selection=ua.lineWrapping)},paddingControl:function(ua,Na){var Wa=ua.padding,Vb=Wa.left();ua=Wa.top();var Fa=Wa.right();Wa=Wa.bottom();var Xa=!hb.arr.every([Vb,ua,Fa,Wa],function(gc){return gc==Vb});Na.get("multi value indicator").visible=Xa;hb.connect(Na.get("multi value indicator"),"onMouseDown",Na.get("padding field"),"number",{converter:"() => left",varMapping:{left:Vb}});try{Na.get("padding field").number=
Vb,Na.get("padding field").visible=!Xa,Na.get("padding field top").number=ua,Na.get("padding field left").number=Vb,Na.get("padding field right").number=Fa,Na.get("padding field bottom").number=Wa}catch(gc){}}},["left","center","right","block"].reduce(function(ua,Na){ua[Na+"Align"]=function(Wa,Vb){Vb.deactivated=!Wa.isText;Pa.toggleButton(Vb,Wa.textAlign==Na)};return ua},{}))}},ui:{get:function(){var Pa=this,ua={fontSelection:"font selection",fontWeightSelection:"font weight selection",boldButton:"bold button",
italicButton:"italic button",underlineButton:"underline button",linkButton:"link button",leftAlign:"left align",centerAlign:"center align",rightAlign:"right align",blockAlign:"block align",fontSizeField:"font size field",colorPicker:"color picker",copyStyleButton:"copy style",applyStyleButton:"apply style",removeStyleButton:"remove style",fixedHeightControl:"fixed height control",fixedWidthControl:"fixed width control",lineWrappingControl:"line wrapping control",paddingControl:"padding control",paddingField:"padding field",
paddingFieldTop:"padding field top",paddingFieldLeft:"padding field left",paddingFieldRight:"padding field right",paddingFieldBottom:"padding field bottom"};return hb.obj.extract(ua,hb.obj.keys(ua),function(Na,Wa){return Pa.getSubmorphNamed(Wa)})}}}}},{key:"openDebouncedFor",value:function(Pa){var ua=Pa.selection;if(ua.isEmpty()){var Na=hb.cachedControls.get(Pa);Na&&(Na.update(),Na.alignAtTarget(),Na.world()||Pa.world().addMorph(Na))}else hb.fun.debounceNamed(Pa.id+"openRichTextControl",600,function(){var Wa=
hb.cachedControls.get(Pa);ua.isEmpty()?Wa&&Wa.removeFocus():(Wa&&Wa.world()||(Wa=new hb.RichTextControl,hb.cachedControls.set(Pa,Wa)),Pa.world().addMorph(Wa),Wa.focusOn(Pa,!0),Wa.alwaysTargetFocusedMorph())})()}},{key:"openFor",value:function(Pa){var ua=hb.cachedControls.get(Pa);ua?ua.update():(ua=new hb.RichTextControl,hb.cachedControls.set(Pa,ua),ua.focusOn(Pa,!0),ua.alwaysTargetFocusedMorph());ua.alignAtTarget();ua.world()||Pa.world().addMorph(ua);return ua}}],sc,{pathInPackage:function(){return"text/ui.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:636,end:17716})}(hb.Morph);hb.RichTextControl=zc;hb.RichTextControl=zc;hb.RichTextControl=zc;var Ub=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js");Ub.Morph=zd;Ub.touchInputDevice=Te;Ub.morph=jd;Ub.Icon=ge;Ub.easings=rc;Ub.pt=We;Ub.Color=bf;Ub.fun=db;Ub.connect=Hd;Ub.TreeData=
bd;zc=function(Pc){var sc=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),Za=sc.hasOwnProperty("SettingsTree")&&"function"===typeof sc.SettingsTree?sc.SettingsTree:sc.SettingsTree=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pe(Za,Pc,[{key:"display",value:function(Pa){return Pa.panel?[Pa.panel,{}]:Pa.name}},{key:"collapse",value:function(Pa,ua){Pa.isCollapsed=ua}},{key:"isCollapsed",value:function(Pa){return Pa.isCollapsed}},
{key:"isLeaf",value:function(Pa){return!Pa.children}},{key:"getChildren",value:function(Pa){var ua=this;return Pa===this.root?Pa.children.filter(function(Na){return ua.target&&Na.applicabilityCheck?eval(Na.applicabilityCheck)(ua.target):!0}):Pa.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SettingsTree"}},{key:"default",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" ",{}].concat($jscomp.arrayFromIterable(Ub.Icon.textAttribute("font")),
[" Rich Text",{fontWeight:"bold"}]),children:[{panel:Ub.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Ub.Icon.textAttribute("image")),[" Shape",{fontWeight:"bold"}]),children:[{panel:Ub.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Ub.Icon.textAttribute("border-style")),[" Border",{paddingLeft:"2px",fontWeight:"bold"}]),children:[{panel:Ub.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Ub.Icon.textAttribute("grip-vertical")),
[" Layout",{paddingLeft:"4px",fontWeight:"bold"}]),children:[{panel:Ub.morph({})}]}]})}},{key:"border",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" Type    ",{},Ub.morph({height:20}),{}],children:[{panel:Ub.morph({})}]},{isCollapsed:!1,name:[" Color   ",{},Ub.morph({height:20}),{}],children:[{panel:Ub.morph({})}]},{isCollapsed:!1,name:[" Width  ",{},Ub.morph({height:20}),{}],children:[{panel:Ub.morph({})}]},{isCollapsed:!1,name:[" Radius ",{},Ub.morph({height:20}),
{}],children:[{panel:Ub.morph({})}]}]})}}],sc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-70"}}},{start:284,end:2663})}(Ub.TreeData);Ub.SettingsTree=zc;Ub.SettingsTree=zc;Ub.SettingsTree=zc;zc=function(Pc){var sc=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),Za=sc.hasOwnProperty("StylingSideBar")&&
"function"===typeof sc.StylingSideBar?sc.StylingSideBar:sc.StylingSideBar=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pe(Za,Pc,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"collapseAll",value:function(){this.getSubmorphsByStyleClassName("Tree").forEach(function(Pa){Pa.nodes.forEach(function(ua){return Pa.treeData.root==ua?Pa.uncollapse(ua):Pa.collapse(ua)})})}},{key:"onWorldResize",value:function(Pa){Pa=
void 0===Pa?!0:Pa;if(this.respondsToVisibleWindow){var ua=$world.visibleBounds(),Na=navigator.standalone&&Ub.touchInputDevice?25:0,Wa=this.getSubmorphNamed("horizontal resizer");this.height=ua.height-Na;this.top=Na+ua.top();Wa.height=this.height;Wa.left=0;Wa.top=0;Pa&&(this.visible?this.topRight=ua.topRight():this.topLeft=ua.topRight())}}},{key:"toggle",value:function(Pa){var ua=this,Na,Wa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vb){switch(Vb.nextAddress){case 1:Na=$world.visibleBounds();
Wa=navigator.standalone&&Ub.touchInputDevice?25:0;ua.height=Na.height-Wa;ua.top=Wa+Na.top();if(Pa)return $world.addMorph(ua,$world.get("lively top bar")),ua.topLeft=Na.topRight(),ua.visible=!0,Vb.yield(ua.whenRendered(),5);ua.detachFromWorld($world);return Vb.yield(ua.animate({opacity:0,topLeft:Na.topRight(),duration:300}),4);case 4:ua.visible=!1;ua.remove();Vb.jumpTo(0);break;case 5:return ua.onWorldResize(!1),Vb.yield(ua.animate({opacity:1,easing:Ub.easings.outCirc,topRight:Na.topRight(),duration:300}),
6);case 6:ua.attachToWorld($world),Vb.jumpToEnd()}})}},{key:"cleanupAnchors",value:function(){for(var Pa=this.withAllSubmorphsSelect(function(Vb){return Vb.anchors&&Vb.anchors.filter(function(Fa){return!Fa.id}).length}),ua={},Na=$jscomp.makeIterator(Pa),Wa=Na.next();!Wa.done;ua={$jscomp$loop$prop$m$3012:ua.$jscomp$loop$prop$m$3012},Wa=Na.next())ua.$jscomp$loop$prop$m$3012=Wa.value,ua.$jscomp$loop$prop$m$3012.anchors.forEach(function(Vb){return function(Fa){return!Fa.id&&Vb.$jscomp$loop$prop$m$3012.removeAnchor(Fa)}}(ua));
return Pa.length}},{key:"attachToWorld",value:function(Pa){Ub.connect(Pa,"showHaloFor",this,"focusMorph",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(Pa){var ua=this;Pa.attributeConnections.forEach(function(Na){Na.targetObj===ua&&Na.disconnect()})}},{key:"focusMorph",value:function(Pa){if(!Pa.isMorph||!Pa.ownerChain().includes(this)){(Pa.isLabel||Pa.isText||Pa.isButton)&&this.richTextControl.focusOn(Pa,!1);var ua=this.getSubmorphNamed("style settings tree");ua.treeData.target=Pa;ua.update(!0);
Object.values(this.controls).forEach(function(Na){return Na&&Na.focusOn(Pa)})}}},{key:"onHierarchyChange",value:function(){Object.values(this.controls).forEach(function(Pa){return Pa&&Pa.update()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylingSideBar"}},{key:"properties",get:function(){return{controls:{},richTextControl:{},isHaloItem:{get:function(){return!0}}}}}],sc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-70"}}},{start:2682,end:5727})}(Ub.Morph);zc=Ub.StylingSideBar;Ub.default=zc;var Jc=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js");Jc.Morph=zd;Jc.obj=lc;Jc.string=Zb;Jc.connect=Hd;Jc.noUpdate=wd;Jc.once=uc;zc=function(Pc){var sc=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js"),Za=sc.hasOwnProperty("ShapeFormatStyler")&&"function"===typeof sc.ShapeFormatStyler?
sc.ShapeFormatStyler:sc.ShapeFormatStyler=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pe(Za,Pc,[{key:Symbol.for("lively-instance-initialize"),value:function(Pa){pe._get(Object.getPrototypeOf(Za.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Pa);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var Pa=this.ui,ua={},Na=$jscomp.makeIterator(Object.entries(this.uiSpec)),
Wa=Na.next();!Wa.done;ua={$jscomp$loop$prop$control$3014:ua.$jscomp$loop$prop$control$3014,$jscomp$loop$prop$prop$3015:ua.$jscomp$loop$prop$prop$3015},Wa=Na.next()){var Vb=$jscomp.makeIterator(Wa.value);Wa=Vb.next().value;Vb=$jscomp.makeIterator(Vb.next().value);Vb.next();var Fa=Vb.next().value;ua.$jscomp$loop$prop$prop$3015=Vb.next().value;ua.$jscomp$loop$prop$control$3014=Pa[Wa];Jc.connect(ua.$jscomp$loop$prop$control$3014,Fa,this,"updateTarget",{updater:function(Xa){return function(gc,ub){Xa.$jscomp$loop$prop$control$3014._updating=
!0;gc(Xa.$jscomp$loop$prop$prop$3015,ub);Xa.$jscomp$loop$prop$control$3014._updating=!1}}(ua),varMapping:{prop:ua.$jscomp$loop$prop$prop$3015,control:ua.$jscomp$loop$prop$control$3014}})}}},{key:"update",value:function(){var Pa=this,ua=this.target,Na=ua.top,Wa=ua.left,Vb=ua.isImage,Fa=ua.isLabel,Xa=ua.imageUrl,gc=ua.textString,ub=ua.clipMode,qd=ua.fill,fc=ua.dropShadow,Ud=ua.opacity,td=ua.height,fd=ua.width;ua=this.ui;var Xb=ua.clipModeSelector,Me=ua.fillPicker,ic=ua.opacityField,Wb=ua.shadowPicker,
$a=ua.heightField,ma=ua.widthField,Ta=ua.posXField,qb=ua.posYField,ec=ua.imageUrlInput,Ic=ua.labelContentInput;Jc.noUpdate(function(){Pa.updateControl(Wb,"shadowValue",fc);Pa.updateControl(Xb,"selection",ub);Pa.updateControl(Me,"colorValue",qd);Pa.updateControl(ic,"number",Ud);Pa.updateControl($a,"number",td);Pa.updateControl(ma,"number",fd);Pa.updateControl(Ta,"number",Wa);Pa.updateControl(qb,"number",Na);Me.context=Pa.target;Vb&&Pa.updateControl(ec,"input",Xa);ec.owner.isLayoutable=ec.owner.visible=
!!Vb;Fa&&Pa.updateControl(Ic,"input",gc);Ic.owner.isLayoutable=Ic.owner.visible=!!Fa;var ud=Pa.getSubmorphNamed("special controls");(ud.visible=!!Fa||!!Vb)?Pa.height=ud.bottom:Pa.height=ud.top})}},{key:"updateTarget",value:function(Pa,ua){this.target[Pa]=ua;this.update()}},{key:"updateControl",value:function(Pa,ua,Na){Pa._updating||Jc.obj.equals(Pa[ua],Na)||(Pa[ua]=Na)}},{key:"updateMultiValue",value:function(Pa,ua,Na){var Wa=this.ui,Vb=Wa[this.join(Pa)],Fa=Vb.get("multi value indicator"),Xa=Jc.obj.values(ua).some(function(gc){return!Jc.obj.isFunction(gc)&&
!Jc.obj.equals(gc,ua.valueOf())});Fa.left=0;Vb.visible=Vb.isLayoutable=!Xa;if(Xa&&Fa.visible!=Xa)Jc.once(Fa,"onMouseDown",Vb,Na,{converter:function(){return ua.valueOf()},varMapping:{value:ua}});Fa.visible=Fa.isLayoutable=Xa;Fa.left=Xa?200:0;this.updateControl(Vb,Na,ua.valueOf());Vb=$jscomp.makeIterator(["top","left","bottom","right"]);for(Fa=Vb.next();!Fa.done;Fa=Vb.next())Fa=Fa.value,Xa=Wa[this.join(Pa,Fa)],this.updateControl(Xa,Na,ua[Fa])}},{key:"lower",value:function(Pa){return Pa.charAt(0).toLowerCase()+
Pa.slice(1)}},{key:"join",value:function(Pa,ua){return this.lower(Jc.string.camelCaseString(Pa+(ua?" "+ua:"")))}},{key:"unwrap",value:function(Pa,ua,Na){var Wa={};Wa=(Wa[this.lower(Jc.string.camelCaseString(Pa))]=[Pa,ua,Na],Wa);for(var Vb=$jscomp.makeIterator(["top","left","bottom","right"]),Fa=Vb.next();!Fa.done;Fa=Vb.next()){Fa=Fa.value;var Xa=Pa+" "+Fa;Wa[this.lower(Jc.string.camelCaseString(Xa))]=[Xa,ua,this.join(Na,Fa)]}return Wa}},{key:"focusOn",value:function(Pa){var ua=this,Na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wa){if(1==
Wa.nextAddress)return!Pa||ua.isAncestorOf(Pa)||ua.target===Pa||Jc.obj.isArray(Pa)||(ua.target=Pa),Na=ua.visible,ua.visible=!0,Wa.yield(ua.whenRendered(),2);if(3!=Wa.nextAddress)return ua.update(),Wa.yield(ua.whenRendered(),3);ua.getSubmorphsByStyleClassName("NumberWidget").map(function(Vb){return Vb.relayout()});ua.visible=Na;Wa.jumpToEnd()})}},{key:"removeFocus",value:function(){this.target=null}},{key:"onHoverIn",value:function(Pa){this.watchForTarget=!1}},{key:"onHoverOut",value:function(Pa){this.watchForTarget=
!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShapeFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{get:function(){return this._uiSpec||(this._uiSpec={clipModeSelector:["clip mode selector","selection","clipMode"],fillPicker:["fill picker","colorValue","fill"],shadowPicker:["shadow picker","shadowValue","dropShadow"],opacityField:["opacity field","number","opacity"],heightField:["height field","number","height"],widthField:["width field","number","width"],posXField:["pos x field",
"number","left"],posYField:["pos y field","number","top"],imageUrlInput:["image url input","inputAccepted","imageUrl"],labelContentInput:["label content input","inputAccepted","textString"]})}},ui:{readOnly:!0,get:function(){var Pa=this,ua=this.uiSpec;return this._ui||(this._ui=Jc.obj.extract(ua,Jc.obj.keys(ua),function(Na,Wa){Na=$jscomp.makeIterator(Wa).next().value;return Pa.getSubmorphNamed(Na)}))}}}}}],sc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeFormatStyler",version:"0.1.1-158"}}},{start:176,end:5822})}(Jc.Morph);zc=Jc.ShapeFormatStyler;Jc.default=zc;var Wc=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js");Wc.Morph=zd;Wc.ShadowPopover=Vc;Wc.connect=Hd;Wc.signal=he;zc=function(Pc){var sc=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js"),Za=sc.hasOwnProperty("ShadowWidget")&&"function"===typeof sc.ShadowWidget?sc.ShadowWidget:
sc.ShadowWidget=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pe(Za,Pc,[{key:"onHoverIn",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:1,duration:200})}},{key:"onHoverOut",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(Pa){this.openPopover()}},{key:"update",value:function(Pa){var ua=this.submorphs[0];
ua&&(ua.dropShadow=Pa)}},{key:"openPopover",value:function(){var Pa=this,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Na){if(1==Na.nextAddress)return ua=new Wc.ShadowPopover({hasFixedPosition:!!Pa.ownerChain().find(function(Wa){return Wa.hasFixedPosition}),shadowValue:Pa.shadowValue}),Na.yield(ua.fadeIntoWorld(Pa.globalBounds().center()),2);Wc.connect(ua,"shadowValue",Pa,"shadowValue");Wc.connect(Pa,"shadowValue",Pa,"update");Wc.signal(Pa,"openWidget",ua);Na.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{set:function(Pa){this.setProperty("shadowValue",Pa);this.update(Pa)}}}}}],sc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShadowWidget",version:"0.1.1-7"}}},{start:194,end:1231})}(Wc.Morph);zc=Wc.ShadowWidget;Wc.default=zc;var Ad=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js");
Ad.Morph=zd;Ad.obj=lc;Ad.string=Zb;Ad.connect=Hd;Ad.noUpdate=wd;Ad.once=uc;zc=function(Pc){var sc=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js"),Za=sc.hasOwnProperty("BorderFormatStyler")&&"function"===typeof sc.BorderFormatStyler?sc.BorderFormatStyler:sc.BorderFormatStyler=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pe(Za,Pc,[{key:"setupUI",value:function(){var Pa=this;this.getSubmorphsByStyleClassName("NumberWidget").map(function(ua){var Na=
Ad.string.camelCaseString(ua.name);Na=Na[0].toLowerCase()+Na.slice(1);Pa.ui[Na]=ua})}},{key:"cleanupAnchors",value:function(){var Pa=this.withAllSubmorphsSelect(function(Wa){return Wa.anchors&&Wa.anchors.filter(function(Vb){return!Vb.id})}),ua={};Pa=$jscomp.makeIterator(Pa);for(var Na=Pa.next();!Na.done;ua={$jscomp$loop$prop$m$3017:ua.$jscomp$loop$prop$m$3017},Na=Pa.next())ua.$jscomp$loop$prop$m$3017=Na.value,ua.$jscomp$loop$prop$m$3017.anchors.forEach(function(Wa){return function(Vb){return!Vb.id&&
Wa.$jscomp$loop$prop$m$3017.removeAnchor(Vb)}}(ua))}},{key:Symbol.for("lively-instance-initialize"),value:function(Pa){pe._get(Object.getPrototypeOf(Za.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Pa);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var Pa=this.ui,ua={},Na=$jscomp.makeIterator(Object.entries(this.uiSpec)),Wa=Na.next();!Wa.done;ua={$jscomp$loop$prop$control$3019:ua.$jscomp$loop$prop$control$3019,$jscomp$loop$prop$prop$3020:ua.$jscomp$loop$prop$prop$3020},
Wa=Na.next()){var Vb=$jscomp.makeIterator(Wa.value);Wa=Vb.next().value;Vb=$jscomp.makeIterator(Vb.next().value);Vb.next();var Fa=Vb.next().value;ua.$jscomp$loop$prop$prop$3020=Vb.next().value;ua.$jscomp$loop$prop$control$3019=Pa[Wa];Ad.connect(ua.$jscomp$loop$prop$control$3019,Fa,this,"updateTarget",{updater:function(Xa){return function(gc,ub){Xa.$jscomp$loop$prop$control$3019._updating=!0;gc(Xa.$jscomp$loop$prop$prop$3020,ub);Xa.$jscomp$loop$prop$control$3019._updating=!1}}(ua),varMapping:{prop:ua.$jscomp$loop$prop$prop$3020,
control:ua.$jscomp$loop$prop$control$3019}})}}},{key:"update",value:function(){var Pa=this,ua=this.target,Na=ua.borderStyle,Wa=ua.borderColor,Vb=ua.borderRadius,Fa=ua.borderWidth;Ad.noUpdate(function(){Pa.updateMultiValue("border style selector",Na,"selection");Pa.updateMultiValue("border color picker",Wa,"colorValue");Pa.updateMultiValue("border radius field",Vb,"number");Pa.updateMultiValue("border width field",Fa,"number")})}},{key:"updateTarget",value:function(Pa,ua){this.target[Pa]=ua;this.update()}},
{key:"updateControl",value:function(Pa,ua,Na){Pa._updating||Ad.obj.equals(Pa[ua],Na)||(Pa[ua]=Na)}},{key:"updateMultiValue",value:function(Pa,ua,Na){var Wa=this.ui,Vb=Wa[this.join(Pa)],Fa=Vb.get("multi value indicator"),Xa=Ad.obj.values(ua).some(function(gc){return!Ad.obj.isFunction(gc)&&!Ad.obj.equals(gc,ua.valueOf())});Vb.visible=Vb.isLayoutable=!Xa;if(Xa&&Fa.visible!=Xa)Ad.once(Fa,"onMouseDown",Vb,Na,{converter:function(){return ua.valueOf()},varMapping:{value:ua}});Fa.visible=Fa.isLayoutable=
Xa;this.updateControl(Vb,Na,ua.valueOf());Vb=$jscomp.makeIterator(["top","left","bottom","right"]);for(Fa=Vb.next();!Fa.done;Fa=Vb.next())Fa=Fa.value,Xa=Wa[this.join(Pa,Fa)],this.updateControl(Xa,Na,ua[Fa])}},{key:"lower",value:function(Pa){return Pa.charAt(0).toLowerCase()+Pa.slice(1)}},{key:"join",value:function(Pa,ua){return this.lower(Ad.string.camelCaseString(Pa+(ua?" "+ua:"")))}},{key:"unwrap",value:function(Pa,ua,Na){var Wa={};Wa=(Wa[this.lower(Ad.string.camelCaseString(Pa))]=[Pa,ua,Na],Wa);
for(var Vb=$jscomp.makeIterator(["top","left","bottom","right"]),Fa=Vb.next();!Fa.done;Fa=Vb.next()){Fa=Fa.value;var Xa=Pa+" "+Fa;Wa[this.lower(Ad.string.camelCaseString(Xa))]=[Xa,ua,this.join(Na,Fa)]}return Wa}},{key:"attachToWorld",value:function(){Ad.connect($world,"showHaloFor",this,"focusOn",{garbageCollect:!0})}},{key:"focusOn",value:function(Pa){var ua=this,Na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wa){if(1==Wa.nextAddress)return!Pa||ua.isAncestorOf(Pa)||ua.target===Pa||
Ad.obj.isArray(Pa)||(ua.target=Pa),Na=ua.visible,ua.visible=!0,Wa.yield(ua.whenRendered(),2);if(3!=Wa.nextAddress)return ua.update(),Wa.yield(ua.whenRendered(),3);ua.getSubmorphsByStyleClassName("NumberWidget").map(function(Vb){return Vb.relayout()});ua.visible=Na;Wa.jumpToEnd()})}},{key:"onHoverIn",value:function(Pa){this.watchForTarget=!1}},{key:"onHoverOut",value:function(Pa){this.watchForTarget=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BorderFormatStyler"}},{key:"properties",
get:function(){return{uiSpec:{derived:!0,serialize:!1,get:function(){return this._uiSpec||(this._uiSpec=Object.assign({},this.unwrap("border style selector","selection","borderStyle"),{},this.unwrap("border color picker","colorValue","borderColor"),{},this.unwrap("border radius field","number","borderRadius"),{},this.unwrap("border width field","number","borderWidth")))}},ui:{initialize:function(){this.setupUI()}}}}}],sc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"BorderFormatStyler",version:"0.1.1-16"}}},{start:185,end:5003})}(Ad.Morph);zc=Ad.BorderFormatStyler;Ad.default=zc;var Xd=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js");Xd.Morph=zd;Xd.morph=jd;Xd.layouts=cd;Xd.string=Zb;Xd.connect=Hd;Xd.noUpdate=wd;Xd.InteractiveMorphSelector=Nc;Xd.Color=bf;Xd.pt=We;zc=function(Pc){var sc=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js"),
Za=sc.hasOwnProperty("ShapeLayoutControl")&&"function"===typeof sc.ShapeLayoutControl?sc.ShapeLayoutControl:sc.ShapeLayoutControl=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pe(Za,Pc,[{key:"focusOn",value:function(Pa){this.target=Pa;this.update(!1)}},{key:"setupConnections",value:function(){var Pa=this.ui;Xd.connect(Pa.submorphSettingsControl,"fire",this,"chooseSubmorphToChangeLayoutSettings");Xd.connect(Pa.dragmeControl,
"onDragStart",this,"onSubmorphSettingsDragStart");Xd.connect(Pa.xAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "x",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});Xd.connect(Pa.yAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "y",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});
for(var ua={},Na=$jscomp.makeIterator(this.managedProps),Wa=Na.next();!Wa.done;ua={$jscomp$loop$prop$prop$3022:ua.$jscomp$loop$prop$prop$3022},Wa=Na.next()){var Vb=$jscomp.makeIterator(Wa.value),Fa=Vb.next().value;Wa=Vb.next().value;Vb.next().value||(ua.$jscomp$loop$prop$prop$3022=this.join(Fa),Vb=Pa[this.join(Fa,"control")],Xd.connect(Vb,Wa,this,"updateLayout",{updater:function(Xa){return function(gc,ub){gc(Xa.$jscomp$loop$prop$prop$3022,ub)}}(ua),varMapping:{prop:ua.$jscomp$loop$prop$prop$3022}}))}}},
{key:"lower",value:function(Pa){return Pa.charAt(0).toLowerCase()+Pa.slice(1)}},{key:"join",value:function(Pa,ua){return this.lower(Xd.string.camelCaseString(Pa+(ua?" "+ua:"")))}},{key:"updateLayoutOfTarget",value:function(Pa){Pa=Xd.layouts[Xd.string.camelCaseString(Pa)];this.target.layout=Pa?new Pa({autoResize:!1}):null;this.update()}},{key:"updateLayout",value:function(Pa,ua){this.target.layout[Pa]=ua}},{key:"update",value:function(Pa){var ua=this;this.target&&Xd.noUpdate(function(){for(var Na=
ua.ui,Wa=ua.target.layout||{name:function(){return"No"}},Vb=$jscomp.makeIterator(ua.managedProps),Fa=Vb.next();!Fa.done;Fa=Vb.next()){var Xa=$jscomp.makeIterator(Fa.value);Fa=Xa.next().value;var gc=Xa.next().value;Xa.next();Xa=Na[ua.join(Fa,"control")];var ub=Na[ua.join(Fa,"label")];if(gc)if("type"===Fa)Xa.selection=Wa.name()+" Layout";else{var qd=Wa[ua.join(Fa)],fc="undefined"!==typeof qd;if(fc){switch(Fa){case "align":Xa.items=Wa.possibleAlignValues;break;case "direction":Xa.items=Wa.possibleDirectionValues;
break;case "axis":Xa.items=Wa.possibleAxisValues}Xa[gc]=qd}ub.isLayoutable=ub.visible=fc}}ua.showGridLayoutControl("Grid"===Wa.name());ua.showProportionalControl("Proportional"===Wa.name())})}},{key:"updateSubmorphProportionalLayoutSettings",value:function(Pa){var ua={};this.target.layout.changeSettingsFor(Pa.submorph,(ua[Pa.axis]=Pa.policy,ua),!0)}},{key:"onSubmorphSettingsDragStart",value:function(Pa){var ua=this;Pa.stop();var Na=this.target.layout,Wa=Na.settingsFor(this.selectedSubmorph),Vb=[],
Fa;for(Fa in Wa)Vb=[].concat($jscomp.arrayFromIterable(Vb),[Fa+": ",{fontWeight:"bold"},Wa[Fa]+" ",{}]);var Xa=Xd.morph({type:"label",fontColor:Xd.Color.white,value:Vb,fill:Xd.Color.black.withA(.7),padding:5,borderRadius:10,isLayoutable:!1});Xa.wantsToBeDroppedOn=function(gc){return Na.layoutableSubmorphs.includes(gc)};Xa.onBeingDroppedOn=function(gc,ub){Xa.remove();if(gc=Na.layoutableSubmorphs.includes(ub)?ub:Pa.world.morphsContainingPoint(Pa.hand.position).find(function(qd){return Na.layoutableSubmorphs.includes(qd)}))ua.updateSubmorphProportionalLayoutSettings({policy:Wa.x,
axis:"x",submorph:gc}),ua.updateSubmorphProportionalLayoutSettings({policy:Wa.y,axis:"y",submorph:gc}),gc.show(),$world.setStatusMessage("layout settings applied")};Pa.hand.grab(Xa);Xa.moveBy(Xd.pt(10,10))}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var Pa=this,ua,Na,Wa,Vb,Fa,Xa,gc,ub,qd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fc){switch(fc.nextAddress){case 1:return ua=Pa.target.layout.layoutableSubmorphs,Pa.manageFocus=!0,Pa.env.eventDispatcher.isKeyPressed("Shift")?
(Wa=ua.map(function(Ud){return{isListItem:!0,string:String(Ud),value:Ud}}),fc.yield($world.listPrompt("Select morph",Wa,{onSelection:function(Ud){return Ud.show()}}),5)):fc.yield(Xd.InteractiveMorphSelector.selectMorph(Pa.world(),Pa,function(Ud){return ua.includes(Ud)}),4);case 4:Na=fc.yieldResult;fc.jumpTo(3);break;case 5:Vb=fc.yieldResult,Fa=$jscomp.makeIterator(Vb.selected),Na=Fa.next().value;case 3:Pa.manageFocus=!1;Pa.selectedSubmorph=Na;if(!Na)return fc.return();Xa=Pa.ui;gc=Xa.xAxisPolicyControl;
ub=Xa.yAxisPolicyControl;qd=Pa.target.layout.settingsFor(Na);Xd.noUpdate(function(){gc.selection=qd.x;ub.selection=qd.y});fc.jumpToEnd()}})}},{key:"showProportionalControl",value:function(Pa){var ua=this.ui;[ua.submorphSettingsControl,ua.dragmeControl,ua.xAxisPolicyControl,ua.xAxisPolicyLabel,ua.yAxisPolicyControl,ua.yAxisPolicyLabel].forEach(function(Na){Na.isLayoutable=Pa;Na.visible=Pa})}},{key:"showGridLayoutHalo",value:function(){$world.showLayoutHaloFor(this.target)}},{key:"showGridLayoutControl",
value:function(Pa){var ua=this.ui.configureGridLayoutControl;ua.visible=ua.isLayoutable=Pa}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShapeLayoutControl"}},{key:"properties",get:function(){return{managedProps:{get:function(){return[["type","selection",!0],["align","selection"],["direction","selection"],["axis","selection"],["spacing","number"],["auto resize","checked"],["resize submorphs","checked"],["x axis policy","selection",!0],["y axis policy","selection",!0],["react to submorph animations",
"checked"],["submorph settings",!1,!0],["order by index","checked"],["dragme",!1,!0],["configure grid layout",!1,!0]]}},ui:{readOnly:!0,get:function(){for(var Pa={labelContainer:this.getSubmorphNamed("label container"),controlContainer:this.getSubmorphNamed("control container")},ua=$jscomp.makeIterator(this.managedProps),Na=ua.next();!Na.done;Na=ua.next()){var Wa=$jscomp.makeIterator(Na.value).next().value;Na=Wa+" label";Wa+=" control";Pa[this.join(Na)]=this.getSubmorphNamed(Na);Pa[this.join(Wa)]=
this.getSubmorphNamed(Wa)}return Pa}}}}}],sc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeLayoutControl",version:"0.1.1-166"}}},{start:345,end:7771})}(Xd.Morph);zc=Xd.ShapeLayoutControl;Xd.default=zc;var xc=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js");xc.Morph=zd;xc.resource=ie;xc.arr=Bc;xc.obj=lc;
xc.string=Zb;xc.Path=ac;xc.connect=Hd;xc.getMastersMenu=Db;xc.resolvedMasters=Tc;zc=function(Pc){var sc=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js"),Za=sc.hasOwnProperty("MasterComponentControl")&&"function"===typeof sc.MasterComponentControl?sc.MasterComponentControl:sc.MasterComponentControl=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pe(Za,Pc,[{key:"focusOn",value:function(Pa){this.target=
Pa;this.update()}},{key:"onMouseUp",value:function(Pa){var ua=this,Na,Wa,Vb,Fa,Xa,gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if(1==ub.nextAddress){"auto master selection"==Pa.targetMorph.name&&(Na="auto");"hover master selection"==Pa.targetMorph.name&&(Na="hover");"click master selection"==Pa.targetMorph.name&&(Na="click");ua.refreshButtons();if(!ua.target)return ub.return();Wa=$jscomp.makeIterator(["auto","hover","click"]);for(Vb=Wa.next();!Vb.done;Vb=Wa.next())Fa=Vb.value,
ua.target.master&&ua.target.master[Fa]&&!ua.get(Fa+" master checkbox").checked&&ua.adjustMasterComponent(Fa,null);if(!Na)return ub.jumpTo(0);Xa=ua;gc=Xa.openMenu;return ub.yield(ua.getMastersMenu(Na),3)}gc.call(Xa,ub.yieldResult,Pa);ub.jumpToEnd()})}},{key:"getMastersMenu",value:function(Pa){var ua=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Na){return 1==Na.nextAddress?Na.yield(Promise.all([].concat($jscomp.arrayFromIterable(Object.keys(xc.resolvedMasters)),[ua.world().name]).map(function(Wa){var Vb,
Fa,Xa,gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){return 1==ub.nextAddress?(Fa=(Vb=Wa==ua.world().name)?"This World":Wa,Xa=ua,gc=Xa.componentsToMenu,ub.yield(xc.resource("styleguide://"+Wa+"/").dirList(),2)):ub.return([Fa,gc.call(Xa,ub.yieldResult,Pa)])})})),2):Na.return(Na.yieldResult)})}},{key:"componentsToMenu",value:function(Pa,ua,Na,Wa){var Vb=this;Na=void 0===Na?null:Na;Wa=void 0===Wa?1:Wa;Na||(Na=Pa.map(function(Xa){return{name:xc.arr.last(Xa.name.split("/")),path:Xa.name.split("/"),
value:Xa}}));if(0==Na.length||100<Wa)return[];var Fa=this;return xc.arr.flatten(Object.entries(xc.arr.groupBy(Na,function(Xa){return Xa.path[Wa-1]})).map(function(Xa){var gc=$jscomp.makeIterator(Xa);Xa=gc.next().value;gc=gc.next().value;var ub=$jscomp.makeIterator(xc.arr.partition(gc,function(qd){return qd.path.length<=Wa}));gc=ub.next().value;ub=ub.next().value;Xa=[Xa,Vb.componentsToMenu(null,ua,ub,Wa+1)];return[].concat($jscomp.arrayFromIterable(gc.map(function(qd){return[qd.name,function(){Fa.adjustMasterComponent(ua,
qd.value)}]})),$jscomp.arrayFromIterable(Xa[1].length?[Xa]:[]))}),1)}},{key:"getComponentSelectionMenu",value:function(Pa){var ua=this,Na,Wa,Vb,Fa,Xa,gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if(1==ub.nextAddress)return Na=ua.world().metadata.commit.name,Wa=xc.resource("styleguide://"+Na+"/"),ub.yield(Wa.dirList(),2);if(3!=ub.nextAddress)return Vb=ub.yieldResult,ub.yield(xc.resource("styleguide://System/").dirList(),3);Fa=ub.yieldResult;Xa=ua.componentsToMenu(Vb,Pa);gc=ua.componentsToMenu(Fa,
Pa);return ub.return([].concat($jscomp.arrayFromIterable(0<Xa.length?[].concat($jscomp.arrayFromIterable(Xa),[{isDivider:!0}]):[]),$jscomp.arrayFromIterable(gc)))})}},{key:"adjustMasterComponent",value:function(Pa,ua){if(this.target.master)this.target.master[Pa]=ua;else if(ua){var Na={};this.target.master=(Na[Pa]=ua,Na)}Pa=this.target.master;ua=Pa.hover;Na=Pa.click;Pa.auto||ua||Na||(this.target.master=null);this.update();this.target.withAllSubmorphsDo(function(Wa){return delete Wa._parametrizedProps});
this.target.requestMasterStyling()}},{key:"componentsToMenu",value:function(Pa,ua,Na,Wa){var Vb=this;Na=void 0===Na?null:Na;Wa=void 0===Wa?1:Wa;Na||(Na=Pa.map(function(Xa){return{name:xc.arr.last(Xa.name.split("/")),path:Xa.name.split("/"),value:Xa}}));if(0==Na.length||100<Wa)return[];var Fa=this;return xc.arr.flatten(Object.entries(xc.arr.groupBy(Na,function(Xa){return Xa.path[Wa-1]})).map(function(Xa){var gc=$jscomp.makeIterator(Xa);Xa=gc.next().value;gc=gc.next().value;var ub=$jscomp.makeIterator(xc.arr.partition(gc,
function(qd){return qd.path.length<=Wa}));gc=ub.next().value;ub=ub.next().value;Xa=[Xa,Vb.componentsToMenu(null,ua,ub,Wa+1)];return[].concat($jscomp.arrayFromIterable(gc.map(function(qd){return[qd.name,function(){Fa.adjustMasterComponent(ua,qd.value)}]})),$jscomp.arrayFromIterable(Xa[1].length?[Xa]:[]))}),1)}},{key:"update",value:function(){if(this.target){for(var Pa=$jscomp.makeIterator(["auto","hover","click"]),ua=Pa.next();!ua.done;ua=Pa.next()){ua=ua.value;var Na=this.getSubmorphNamed(ua+" master selection"),
Wa=this.getSubmorphNamed(ua+" master checkbox");xc.Path(["master",ua]).get(this.target)?Wa.checked=!0:Wa.checked=!1;Na.label=xc.string.truncateLeft(xc.Path(["master",ua,"name"]).get(this.target)||"select master",15,"...")}this.refreshButtons()}}},{key:"refreshButtons",value:function(){for(var Pa=$jscomp.makeIterator(["auto","hover","click"]),ua=Pa.next();!ua.done;ua=Pa.next()){ua=ua.value;var Na=this.getSubmorphNamed(ua+" master selection"),Wa=this.getSubmorphNamed(ua+" master checkbox");Na=Na.deactivated=
!Wa.checked;this.getSubmorphNamed(ua+" master selection").opacity=Na?.5:1}Pa=this.getSubmorphNamed("overridden props list");Pa.items=this.getOverriddenProps();this.getSubmorphNamed("clear overridden prop button").deactivated=!Pa.selection}},{key:"getMasterForTarget",value:function(){if(this.target.isMorph)return[this.target].concat($jscomp.arrayFromIterable(this.target.ownerChain())).map(function(Pa){return Pa.master}).find(Boolean)}},{key:"clearSelectedProperty",value:function(){var Pa=this.getSubmorphNamed("overridden props list").selection;
this.getMasterForTarget().clearOverriddenPropertiesFor(this.target,[Pa]);this.refreshButtons()}},{key:"getOverriddenProps",value:function(){var Pa=this.getMasterForTarget();return Pa&&Pa._overriddenProps?(Pa=Pa._overriddenProps.get(this.target))?Object.keys(Pa):[]:[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MasterComponentControl"}}],sc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"MasterComponentControl",version:"0.1.1-110"}}},{start:315,end:6250})}(xc.Morph);zc=xc.MasterComponentControl;xc.default=zc}}});