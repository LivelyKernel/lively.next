System.register(["./__root_module__-cd530690.js","./index-cab7da24.js","./color-picker-1bb681d9.js"],function(){var Da,zb,Rb,kc,dc,ke,hd,$d,md,Qc,xd,Od,ge,Ud,nd,Za,Cb,bc,ic,id,fe,Zb,rc,Lb,Gc,$c,ed,$b;return{setters:[function(ob){Da=ob.as;zb=ob.s;Rb=ob.a6;kc=ob.aV;dc=ob.a5;ke=ob.a8;hd=ob.a9;$d=ob.aA;md=ob.aj;Qc=ob.am;xd=ob.ah;Od=ob.an;ge=ob.a2;Ud=ob.a0;nd=ob.C;Za=ob.ap;Cb=ob.at;bc=ob.bS;ic=ob.bs;id=ob.ab;fe=ob.ar;Zb=ob.bh;rc=ob.br;Lb=ob.bp;Gc=ob.bT},function(ob){$c=ob.N;ed=ob.I},function(ob){$b=
ob.a}],execute:function(){var ob=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js");ob.fun=Da;ob.string=zb;ob.obj=Rb;ob.properties=kc;ob.arr=dc;ob.Text=ke;ob.config=hd;ob.HorizontalLayout=$d;ob.VerticalLayout=md;ob.morph=Qc;ob.Morph=xd;ob.Icon=Od;ob.pt=ge;ob.Rectangle=Ud;ob.Color=nd;ob.connect=Za;ob.once=Cb;ob.noUpdate=bc;ob.ColorPicker=$b;ob.DropDownList=ic;ob.loadObjectFromPartsbinFolder=id;ob.cachedControls=new WeakMap;var zc=function(ub){var Mb=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js"),
Ob=Mb.hasOwnProperty("RichTextControl")&&"function"===typeof Mb.RichTextControl?Mb.RichTextControl:Mb.RichTextControl=function(kb){kb&&kb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fe(Ob,ub,[{key:"toggleButton",value:function(kb,ib){kb.master=ib?{auto:"styleguide://SystemIDE/selected button"}:{auto:"styleguide://System/dark button"}}},{key:"reset",value:function(){var kb=this.ui.fontSelection;kb.items=ob.RichTextControl.basicFontItems();
kb.selection=kb.items[0].value;ob.connect(this.target,"selectionChange",this,"update")}},{key:"alignAtTarget",value:function(kb){kb=void 0===kb?!!this.world():kb;var ib=this.target,Jb=ib.world()||$world,vc=this.globalBounds();ib=(ib.selection.isEmpty()?ib.globalBounds():ib.getGlobalTransform().transformRectToRect(ib.selectionBounds().translatedBy(ib.scroll.negated()))).bottomCenter().subPt(vc.topCenter());Jb=Jb.visibleBounds().translateForInclusion(vc.translatedBy(ib)).topLeft().subPt(vc.topLeft());
Jb=this.position.addPt(Jb);kb?this.animate({duration:300,position:Jb}):this.position=Jb}},{key:"removeFocus",value:function(){this.autoRemove&&this.target&&(this.remove(),this.target=null)}},{key:"focusOn",value:function(kb,ib){ib=void 0===ib?!0:ib;var Jb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vc){if(1==vc.nextAddress)return Jb.target=kb,Jb.update(),vc.yield(Jb.whenRendered(),2);Jb.ui.fontSizeField.relayout();ib&&Jb.alignAtTarget();vc.jumpToEnd()})}},{key:"setupConnections",
value:function(){ob.connect(this.ui.paddingField,"number",this,"setPadding");ob.connect(this.ui.paddingFieldTop,"number",this,"setPaddingTop");ob.connect(this.ui.paddingFieldBottom,"number",this,"setPaddingBottom");ob.connect(this.ui.paddingFieldLeft,"number",this,"setPaddingLeft");ob.connect(this.ui.paddingFieldRight,"number",this,"setPaddingRight")}},{key:"update",value:function(){var kb=this,ib=this.target,Jb=this.updateSpec,vc=ib.selection;vc=vc?vc.isEmpty()?ib.textAttributeAt(vc.start):ib.getStyleInRange(vc):
{};var sc=this.managedProps,Uc=ob.obj.select(ib,sc);ib=$jscomp.makeIterator(Object.entries(ob.obj.select(vc||{},sc)));for(vc=ib.next();!vc.done;vc=ib.next())sc=$jscomp.makeIterator(vc.value),vc=sc.next().value,sc=sc.next().value,"undefined"!==typeof sc&&(Uc[vc]=sc);ob.noUpdate(function(){for(var Xc=$jscomp.makeIterator(Object.entries(kb.ui)),Q=Xc.next();!Q.done;Q=Xc.next()){var fa=$jscomp.makeIterator(Q.value);Q=fa.next().value;fa=fa.next().value;if(Jb[Q])Jb[Q](Uc,fa)}})}},{key:"relayout",value:function(){}},
{key:"changeAttributeInSelectionOrMorph",value:function(kb,ib){var Jb=this.target,vc=Jb.selection;Jb.isLabel||vc.isEmpty()?Jb[kb]="function"===typeof ib?ib(Jb[kb]):ib:(Jb.undoManager.group(),Jb.changeStyleProperty(kb,function(sc){return"function"===typeof ib?ib(sc):ib}),Jb.undoManager.group())}},{key:"changeFont",value:function(kb){var ib=this,Jb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vc){if(1==vc.nextAddress)return ib._last=kb,(Jb="custom..."===kb)?vc.yield($world.prompt("Enter font family name",
{requester:ib.target,historyId:"lively.morphic-rich-text-font-names",useLastInput:!0}),3):vc.jumpTo(2);if(2!=vc.nextAddress&&(kb=vc.yieldResult,!kb))return vc.return();ib.changeAttributeInSelectionOrMorph("fontFamily",kb);vc.jumpToEnd()})}},{key:"setPadding",value:function(kb){this.target.padding=ob.Rectangle.inset(kb)}},{key:"setPaddingTop",value:function(kb){var ib=this.target.padding;this.target.padding=ob.Rectangle.inset(ib.left(),kb,ib.right(),ib.bottom())}},{key:"setPaddingLeft",value:function(kb){var ib=
this.target.padding;this.target.padding=ob.Rectangle.inset(kb,ib.top(),ib.right(),ib.bottom())}},{key:"setPaddingRight",value:function(kb){var ib=this.target.padding;this.target.padding=ob.Rectangle.inset(ib.left(),ib.top(),kb,ib.bottom())}},{key:"setPaddingBottom",value:function(kb){var ib=this.target.padding;this.target.padding=ob.Rectangle.inset(ib.left(),ib.top(),ib.right(),kb)}},{key:"setLineWrapping",value:function(kb){this.target.lineWrapping=kb}},{key:"changeFontWeight",value:function(kb){this.changeAttributeInSelectionOrMorph("fontWeight",
kb)}},{key:"changeTextAlign",value:function(kb){this.changeAttributeInSelectionOrMorph("textAlign",kb)}},{key:"changeFontColor",value:function(kb){this.changeAttributeInSelectionOrMorph("fontColor",kb)}},{key:"changeFontSize",value:function(kb){this.changeAttributeInSelectionOrMorph("fontSize",kb)}},{key:"changeFixedWidth",value:function(kb){this.target.fixedWidth=kb}},{key:"changeFixedHeight",value:function(kb){this.target.fixedHeight=kb}},{key:"changeLink",value:function(){var kb=this,ib,Jb,vc,
sc,Uc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xc){if(1==Xc.nextAddress)return ib=kb.target,Jb=ib.selection,vc=ib.getStyleInRange(Jb),sc=vc.link,Xc.yield(kb.world().prompt("Set link",{input:sc||"https://"}),2);Uc=Xc.yieldResult;ib.undoManager.group();ib.setStyleInRange({link:Uc||void 0},Jb);ib.undoManager.group();kb.autoRemove&&kb.remove();Xc.jumpToEnd()})}},{key:"toggleUnderline",value:function(){this.changeAttributeInSelectionOrMorph("textDecoration",function(kb){return"underline"===
kb?"none":"underline"})}},{key:"toggleItalic",value:function(){this.changeAttributeInSelectionOrMorph("fontStyle",function(kb){return"italic"===kb?"normal":"italic"})}},{key:"toggleBold",value:function(){this.changeAttributeInSelectionOrMorph("fontWeight",function(kb){return"bold"===kb||"700"===kb?"normal":"bold"})}},{key:"copyStyle",value:function(){var kb=this,ib=this.target,Jb=this.ui.applyStyleButton;ib=ib.selection.isEmpty()?ib.defaultTextStyle:ib.getStyleInRange(ib.selection);var vc=JSON.stringify(ib,
null,2);this.constructor.copiedStyle=ib;Jb.tooltip="paste style\n"+vc;this.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/plain",data:vc},{type:"application/morphic-text-style",styleString:vc}]).then(function(){return kb.setStatusMessage("Copied style\n"+vc)}).catch(function(sc){return kb.showError(sc)})}},{key:"pasteStyle",value:function(){var kb=this,ib=this.target,Jb=this.constructor.copiedStyle;ib.selection.isEmpty()?Object.assign(ib,Jb):ib.selections.forEach(function(vc){return ib.addTextAttribute(kb.constructor.copiedStyle,
vc)});this.update()}},{key:"clearStyle",value:function(){var kb=this.target;kb.selections.forEach(function(ib){return kb.resetStyleInRange(ib)});this.update()}},{key:"configureRichTextOptions",value:function(){this.getSubmorphNamed("config panel")&&this.getSubmorphNamed("config panel").remove();var kb=this.defaultSpec,ib=this.uiSpec;kb=this.addMorph({name:"config panel",layout:new ob.VerticalLayout({spacing:5}),epiMorph:!0,submorphs:[].concat($jscomp.arrayFromIterable(Object.keys(kb).map(function(Jb){var vc=
ib.rows.some(function(sc){return sc.some(function(Uc){return Uc===Jb})});return{type:"labeledcheckbox",label:Jb,name:Jb,checked:vc}})),[{layout:new ob.HorizontalLayout({spacing:3}),submorphs:[{type:"button",name:"OK button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}])});kb.center=this.innerBounds().center();ob.connect(kb.getSubmorphNamed("OK button"),"fire",this,"configureAccepted");ob.connect(kb.getSubmorphNamed("cancel button"),"fire",this,"configureCanceled")}},{key:"configureAccepted",
value:function(){var kb=this.getSubmorphNamed("config panel");kb&&(kb.remove(),kb.submorphs.filter(function(ib){return"LabeledCheckBox"===ib.constructor.name}))}},{key:"configureCanceled",value:function(){var kb=this.getSubmorphNamed("config panel");kb&&kb.remove()}},{key:"close",value:function(){var kb=this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(ib){return ib.targetObj===kb&&ib.disconnect()});this.remove()}},{key:"alwaysTargetFocusedMorph",
value:function(){this.startStepping(1500,"updateTarget")}},{key:"updateTarget",value:function(){var kb=this.world();kb&&(kb=kb.focusedMorph)&&(kb.isLabel||kb.isText)&&!this.isAncestorOf(kb)&&this.target!==kb&&this.focusOn(kb,!1)}},{key:"onMouseUp",value:function(kb){var ib=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jb){if(1==Jb.nextAddress)return Jb.yield(ib.whenRendered(),2);ib.update();Jb.jumpToEnd()})}},{key:"attachToWorld",value:function(){ob.connect($world,"onMouseDown",
this,"updateTarget",{garbageCollect:!0})}}],[{key:"className",get:function(){return"RichTextControl"}},{key:"properties",get:function(){return{autoRemove:{defaultValue:!1},target:{},toggleColor:{},managedProps:{readOnly:!0,get:function(){return"fontFamily fontWeight fontSize fontStyle isText fontColor textAlign link textDecoration fixedWidth fixedHeight lineWrapping padding".split(" ")}},updateSpec:{get:function(){var kb=this;return Object.assign({fontSelection:function(ib,Jb){var vc=ib.fontFamily;
(ib=vc&&Jb.items.find(function(sc){return sc.value.toLowerCase()===vc.toLowerCase()}))?Jb.selection=ib.value:vc&&(Jb.items=Jb.items.concat({isListItem:!0,label:[vc,{fontFamily:vc}],value:vc}),Jb.selection=ob.arr.last(Jb.items));Jb.fit();Jb.width=Math.max(Jb.width,170)},fontWeightSelection:function(ib,Jb){Jb.selection="normal"==ib.fontWeight?"Medium":ib.fontWeight?ob.string.capitalize(ib.fontWeight):"Medium"},boldButton:function(ib,Jb){kb.toggleButton(Jb,"bold"===ib.fontWeight)},italicButton:function(ib,
Jb){kb.toggleButton(Jb,"italic"===ib.fontStyle)},underlineButton:function(ib,Jb){kb.toggleButton(Jb,"underline"===ib.textDecoration)},linkButton:function(ib,Jb){kb.toggleButton(Jb,!!ib.link)},colorPicker:function(ib,Jb){Jb.colorValue=ib.fontColor},fontSizeField:function(ib,Jb){Jb.number=ib.fontSize},fixedWidthControl:function(ib,Jb){ib.isText?Jb.enable():Jb.disable();Jb.checked=ib.fixedWidth},fixedHeightControl:function(ib,Jb){ib.isText?Jb.enable():Jb.disable();Jb.checked=ib.fixedHeight},lineWrappingControl:function(ib,
Jb){var vc=$jscomp.makeIterator(Jb.submorphs);Jb=vc.next().value;vc=vc.next().value;Jb.checked=!!ib.lineWrapping;vc.deactivated=!ib.lineWrapping;vc.deactivated?vc.opacity=.5:(vc.opacity=1,vc.selection=ib.lineWrapping)},paddingControl:function(ib,Jb){var vc=ib.padding,sc=vc.left();ib=vc.top();var Uc=vc.right();vc=vc.bottom();var Xc=!ob.arr.every([sc,ib,Uc,vc],function(Q){return Q==sc});Jb.get("multi value indicator").visible=Xc;ob.connect(Jb.get("multi value indicator"),"onMouseDown",Jb.get("padding field"),
"number",{converter:"() => left",varMapping:{left:sc}});Jb.get("padding field").number=sc;Jb.get("padding field").visible=!Xc;Jb.get("padding field top").number=ib;Jb.get("padding field left").number=sc;Jb.get("padding field right").number=Uc;Jb.get("padding field bottom").number=vc}},["left","center","right","block"].reduce(function(ib,Jb){ib[Jb+"Align"]=function(vc,sc){kb.toggleButton(sc,vc.textAlign==Jb)};return ib},{}))}},ui:{get:function(){var kb=this,ib={fontSelection:"font selection",fontWeightSelection:"font weight selection",
boldButton:"bold button",italicButton:"italic button",underlineButton:"underline button",linkButton:"link button",leftAlign:"left align",centerAlign:"center align",rightAlign:"right align",blockAlign:"block align",fontSizeField:"font size field",colorPicker:"color picker",copyStyleButton:"copy style",applyStyleButton:"apply style",removeStyleButton:"remove style",fixedHeightControl:"fixed height control",fixedWidthControl:"fixed width control",lineWrappingControl:"line wrapping control",paddingControl:"padding control",
paddingField:"padding field",paddingFieldTop:"padding field top",paddingFieldLeft:"padding field left",paddingFieldRight:"padding field right",paddingFieldBottom:"padding field bottom"};return ob.obj.extract(ib,ob.obj.keys(ib),function(Jb,vc){return kb.getSubmorphNamed(vc)})}}}}},{key:"openDebouncedFor",value:function(kb){var ib=kb.selection;if(ib.isEmpty()){var Jb=ob.cachedControls.get(kb);Jb&&(Jb.update(),Jb.alignAtTarget(),Jb.world()||kb.world().addMorph(Jb))}else ob.fun.debounceNamed(kb.id+"openRichTextControl",
600,function(){var vc=ob.cachedControls.get(kb);ib.isEmpty()?vc&&vc.removeFocus():(vc&&vc.world()||(vc=new ob.RichTextControl,ob.cachedControls.set(kb,vc)),kb.world().addMorph(vc),vc.focusOn(kb,!0),vc.alwaysTargetFocusedMorph())})()}},{key:"openFor",value:function(kb){var ib=ob.cachedControls.get(kb);ib?ib.update():(ib=new ob.RichTextControl,ob.cachedControls.set(kb,ib),ib.focusOn(kb,!0),ib.alwaysTargetFocusedMorph());ib.alignAtTarget();ib.world()||kb.world().addMorph(ib);return ib}}],Mb,{pathInPackage:function(){return"text/ui.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:624,end:16984})}(ob.Morph);ob.RichTextControl=zc;ob.RichTextControl=zc;ob.RichTextControl=zc;zc=lively.FreezerRuntime.recorderFor("ProtoSearchField/index.js");zc.SearchField=Zb;var Mc=function(ub){var Mb=lively.FreezerRuntime.recorderFor("ProtoSearchField/index.js"),Ob=Mb.hasOwnProperty("ProtoSearchField")&&
"function"===typeof Mb.ProtoSearchField?Mb.ProtoSearchField:Mb.ProtoSearchField=function(kb){kb&&kb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fe(Ob,ub,void 0,[{key:"className",get:function(){return"ProtoSearchField"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Mb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoSearchField",version:"0.1.1-0"}}},{start:76,end:221})}(zc.SearchField);Mc=zc.ProtoSearchField;zc.default=Mc;var Ja=lively.FreezerRuntime.recorderFor("ProtoTree/index.js");Ja.Tree=rc;Ja.TreeData=Lb;zc=function(ub){var Mb=lively.FreezerRuntime.recorderFor("ProtoTree/index.js"),Ob=Mb.hasOwnProperty("TestTreeData")&&"function"===typeof Mb.TestTreeData?Mb.TestTreeData:Mb.TestTreeData=function(kb){kb&&kb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return fe(Ob,ub,[{key:"display",value:function(kb){return kb.name}},{key:"isCollapsed",value:function(kb){return kb.isCollapsed}},{key:"collapse",value:function(kb,ib){kb.isCollapsed=ib}},{key:"getChildren",value:function(kb){return kb.isLeaf?null:kb.isCollapsed?[]:kb.children}},{key:"isLeaf",value:function(kb){return kb.isLeaf}}],[{key:"className",get:function(){return"TestTreeData"}}],Mb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoTree",version:"0.1.1-2"}}},{start:113,end:417})}(Ja.TreeData);Ja.TestTreeData=zc;Ja.TestTreeData=zc;Ja.TestTreeData=zc;zc=function(ub){var Mb=lively.FreezerRuntime.recorderFor("ProtoTree/index.js"),Ob=Mb.hasOwnProperty("ProtoTree")&&"function"===typeof Mb.ProtoTree?Mb.ProtoTree:Mb.ProtoTree=function(kb){kb&&kb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return fe(Ob,ub,void 0,[{key:"className",get:function(){return"ProtoTree"}},{key:"properties",get:function(){return{treeData:{initialize:function(){this.treeData=new Ja.TestTreeData({name:"root",isCollapsed:!1,isLeaf:!1,children:[{name:"child 1",isLeaf:!0},{name:"child 2",isLeaf:!1,isCollapsed:!0,children:[{name:"child 2 - 1",isLeaf:!0}]},{name:"child 3",isLeaf:!1,isCollapsed:!1,children:[{name:"child 3 - 1",isLeaf:!0},{name:"child 3 - 2",isLeaf:!0}]},{name:"child 4",isLeaf:!0}]})}},master:{initialize:function(){}}}}}],
Mb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoTree",version:"0.1.1-2"}}},{start:434,end:1297})}(Ja.Tree);zc=Ja.ProtoTree;Ja.default=zc;zc=lively.FreezerRuntime.recorderFor("ProtoNumberWidget/index.js");zc.NumberWidget=$c;Mc=function(ub){var Mb=lively.FreezerRuntime.recorderFor("ProtoNumberWidget/index.js"),Ob=Mb.hasOwnProperty("ProtoNumberWidget")&&
"function"===typeof Mb.ProtoNumberWidget?Mb.ProtoNumberWidget:Mb.ProtoNumberWidget=function(kb){kb&&kb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fe(Ob,ub,void 0,[{key:"className",get:function(){return"ProtoNumberWidget"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Mb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoNumberWidget",version:"0.1.1-0"}}},{start:76,end:224})}(zc.NumberWidget);Mc=zc.ProtoNumberWidget;zc.default=Mc;zc=lively.FreezerRuntime.recorderFor("FrameResizer/index.js");zc.Morph=xd;Mc=function(ub){var Mb=lively.FreezerRuntime.recorderFor("FrameResizer/index.js"),Ob=Mb.hasOwnProperty("FrameResizer")&&"function"===typeof Mb.FrameResizer?Mb.FrameResizer:Mb.FrameResizer=function(kb){kb&&kb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return fe(Ob,ub,[{key:"onDrag",value:function(kb){var ib=this.owner.left;kb=kb.positionIn(this).x;kb*="left"==this.direction?-1:1;this.owner.width+=kb;350>this.owner.width&&(kb+=350-this.owner.width,this.owner.width=350);this.owner.left="left"==this.direction?ib-kb:ib}}],[{key:"className",get:function(){return"FrameResizer"}},{key:"properties",get:function(){return{direction:{type:"Enum",values:["left","right"]}}}}],Mb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"FrameResizer",version:"0.1.1-24"}}},{start:56,end:840})}(zc.Morph);Mc=zc.FrameResizer;zc.default=Mc;var Ra=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js");Ra.Morph=xd;Ra.morph=Qc;Ra.layouts=Gc;Ra.string=zb;Ra.connect=Za;Ra.noUpdate=bc;Ra.InteractiveMorphSelector=ed;Ra.Color=nd;Ra.pt=ge;zc=function(ub){var Mb=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js"),Ob=Mb.hasOwnProperty("ShapeLayoutControl")&&
"function"===typeof Mb.ShapeLayoutControl?Mb.ShapeLayoutControl:Mb.ShapeLayoutControl=function(kb){kb&&kb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return fe(Ob,ub,[{key:"focusOn",value:function(kb){this.target=kb;this.update(!1)}},{key:"setupConnections",value:function(){var kb=this.ui;Ra.connect(kb.submorphSettingsControl,"fire",this,"chooseSubmorphToChangeLayoutSettings");Ra.connect(kb.dragmeControl,"onDragStart",this,"onSubmorphSettingsDragStart");
Ra.connect(kb.xAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "x",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});Ra.connect(kb.yAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "y",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});for(var ib={},Jb=$jscomp.makeIterator(this.managedProps),
vc=Jb.next();!vc.done;ib={$jscomp$loop$prop$prop$2293:ib.$jscomp$loop$prop$prop$2293},vc=Jb.next()){var sc=$jscomp.makeIterator(vc.value),Uc=sc.next().value;vc=sc.next().value;sc.next().value||(ib.$jscomp$loop$prop$prop$2293=this.join(Uc),sc=kb[this.join(Uc,"control")],Ra.connect(sc,vc,this,"updateLayout",{updater:function(Xc){return function(Q,fa){Q(Xc.$jscomp$loop$prop$prop$2293,fa)}}(ib),varMapping:{prop:ib.$jscomp$loop$prop$prop$2293}}))}}},{key:"lower",value:function(kb){return kb.charAt(0).toLowerCase()+
kb.slice(1)}},{key:"join",value:function(kb,ib){return this.lower(Ra.string.camelCaseString(kb+(ib?" "+ib:"")))}},{key:"updateLayoutOfTarget",value:function(kb){kb=Ra.layouts[Ra.string.camelCaseString(kb)];this.target.layout=kb?new kb({autoResize:!1}):null;this.update()}},{key:"updateLayout",value:function(kb,ib){this.target.layout[kb]=ib}},{key:"update",value:function(kb){var ib=this;this.target&&Ra.noUpdate(function(){for(var Jb=ib.ui,vc=ib.target.layout||{name:function(){return"No"}},sc=$jscomp.makeIterator(ib.managedProps),
Uc=sc.next();!Uc.done;Uc=sc.next()){var Xc=$jscomp.makeIterator(Uc.value);Uc=Xc.next().value;var Q=Xc.next().value;Xc.next();Xc=Jb[ib.join(Uc,"control")];var fa=Jb[ib.join(Uc,"label")];if(Q)if("type"===Uc)Xc.selection=vc.name()+" Layout";else{var Ha=vc[ib.join(Uc)],Qa="undefined"!==typeof Ha;if(Qa){switch(Uc){case "align":Xc.items=vc.possibleAlignValues;break;case "direction":Xc.items=vc.possibleDirectionValues;break;case "axis":Xc.items=vc.possibleAxisValues}Xc[Q]=Ha}fa.isLayoutable=fa.visible=Qa}}ib.showGridLayoutControl("Grid"===
vc.name());ib.showProportionalControl("Proportional"===vc.name())})}},{key:"updateSubmorphProportionalLayoutSettings",value:function(kb){var ib={};this.target.layout.changeSettingsFor(kb.submorph,(ib[kb.axis]=kb.policy,ib),!0)}},{key:"onSubmorphSettingsDragStart",value:function(kb){var ib=this;kb.stop();var Jb=this.target.layout,vc=Jb.settingsFor(this.selectedSubmorph),sc=[],Uc;for(Uc in vc)sc=[].concat($jscomp.arrayFromIterable(sc),[Uc+": ",{fontWeight:"bold"},vc[Uc]+" ",{}]);var Xc=Ra.morph({type:"label",
fontColor:Ra.Color.white,value:sc,fill:Ra.Color.black.withA(.7),padding:5,borderRadius:10,isLayoutable:!1});Xc.wantsToBeDroppedOn=function(Q){return Jb.layoutableSubmorphs.includes(Q)};Xc.onBeingDroppedOn=function(Q,fa){Xc.remove();if(Q=Jb.layoutableSubmorphs.includes(fa)?fa:kb.world.morphsContainingPoint(kb.hand.position).find(function(Ha){return Jb.layoutableSubmorphs.includes(Ha)}))ib.updateSubmorphProportionalLayoutSettings({policy:vc.x,axis:"x",submorph:Q}),ib.updateSubmorphProportionalLayoutSettings({policy:vc.y,
axis:"y",submorph:Q}),Q.show(),$world.setStatusMessage("layout settings applied")};kb.hand.grab(Xc);Xc.moveBy(Ra.pt(10,10))}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var kb=this,ib,Jb,vc,sc,Uc,Xc,Q,fa,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){switch(Qa.nextAddress){case 1:return ib=kb.target.layout.layoutableSubmorphs,kb.manageFocus=!0,kb.env.eventDispatcher.isKeyPressed("Shift")?(vc=ib.map(function(fc){return{isListItem:!0,string:String(fc),value:fc}}),
Qa.yield($world.listPrompt("Select morph",vc,{onSelection:function(fc){return fc.show()}}),5)):Qa.yield(Ra.InteractiveMorphSelector.selectMorph(kb.world(),kb,function(fc){return ib.includes(fc)}),4);case 4:Jb=Qa.yieldResult;Qa.jumpTo(3);break;case 5:sc=Qa.yieldResult,Uc=$jscomp.makeIterator(sc.selected),Jb=Uc.next().value;case 3:kb.manageFocus=!1;kb.selectedSubmorph=Jb;if(!Jb)return Qa.return();Xc=kb.ui;Q=Xc.xAxisPolicyControl;fa=Xc.yAxisPolicyControl;Ha=kb.target.layout.settingsFor(Jb);Ra.noUpdate(function(){Q.selection=
Ha.x;fa.selection=Ha.y});Qa.jumpToEnd()}})}},{key:"showProportionalControl",value:function(kb){var ib=this.ui;[ib.submorphSettingsControl,ib.dragmeControl,ib.xAxisPolicyControl,ib.xAxisPolicyLabel,ib.yAxisPolicyControl,ib.yAxisPolicyLabel].forEach(function(Jb){Jb.isLayoutable=kb;Jb.visible=kb})}},{key:"showGridLayoutHalo",value:function(){$world.showLayoutHaloFor(this.target)}},{key:"showGridLayoutControl",value:function(kb){var ib=this.ui.configureGridLayoutControl;ib.visible=ib.isLayoutable=kb}}],
[{key:"className",get:function(){return"ShapeLayoutControl"}},{key:"properties",get:function(){return{managedProps:{get:function(){return[["type","selection",!0],["align","selection"],["direction","selection"],["axis","selection"],["spacing","number"],["auto resize","checked"],["resize submorphs","checked"],["x axis policy","selection",!0],["y axis policy","selection",!0],["react to submorph animations","checked"],["submorph settings",!1,!0],["order by index","checked"],["dragme",!1,!0],["configure grid layout",
!1,!0]]}},ui:{readOnly:!0,get:function(){for(var kb={labelContainer:this.getSubmorphNamed("label container"),controlContainer:this.getSubmorphNamed("control container")},ib=$jscomp.makeIterator(this.managedProps),Jb=ib.next();!Jb.done;Jb=ib.next()){var vc=$jscomp.makeIterator(Jb.value).next().value;Jb=vc+" label";vc+=" control";kb[this.join(Jb)]=this.getSubmorphNamed(Jb);kb[this.join(vc)]=this.getSubmorphNamed(vc)}return kb}}}}}],Mb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeLayoutControl",version:"0.1.1-166"}}},{start:345,end:7771})}(Ra.Morph);zc=Ra.ShapeLayoutControl;Ra.default=zc}}});