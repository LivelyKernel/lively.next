System.register(["./__root_module__-cddb8267.js"],function(Ea){var Cb,Kb,lc,$b,Qd,Zc,Rd,ad,Nc,nd,he,af,Af,rd,cc,Ic,Kd,Kc,Bd,be,yc,Cc,Pb,Dc,Xc,Cd,Od,Gb,sb,Bc,gb,rb,Sa,Ua,cb,ab,qb,Zb,kc,Rb,ma,Ia,W;return{setters:[function(sa){Cb=sa.ax;Kb=sa.a3;lc=sa.C;$b=sa.ab;Qd=sa.an;Zc=sa.az;Rd=sa.aX;ad=sa.aD;Nc=sa.aA;nd=sa.ac;he=sa.aq;af=sa.as;Af=sa.g;rd=sa.a2;cc=sa.a1;Ic=sa.am;Kd=sa.a8;Kc=sa.P;Bd=sa.$;be=sa.aY;yc=sa.at;Cc=sa.a6;Pb=sa.au;Dc=sa.av;Xc=sa.aZ;Cd=sa.a_;Od=sa.aj;Gb=sa.r;sb=sa.aw;Bc=sa.a7;gb=sa.aa;
rb=sa.a$;Sa=sa.ap;Ua=sa.b0;cb=sa.b1;ab=sa.b2;qb=sa.ad;Zb=sa.b3;kc=sa.ar;Rb=sa.b4;ma=sa.b5;Ia=sa.b6;W=sa.aS}],execute:function(){function sa(fb){(fb=sc.cachedGuideLines.get(fb))&&fb.forEach(function(Va){return Va.remove()})}function Za(fb,Va,ob,P,ua){Va=void 0===Va?!0:Va;ob=void 0===ob?!0:ob;P=void 0===P?10:P;ua=void 0===ua?100:ua;if(Va||ob){var bb=fb.owner,Nb=bb.world();bb=bb.getGlobalTransform();var ic=fb.owner.submorphs.filter(function(cd){return cd!==fb&&!cd.isEpiMorph&&cd.visible&&cd.reactsToPointer}),
fd=sc.findAlignedMorphs(fb,ic,P,ua,"left top right bottom hCenter vCenter".split(" "),"left top right bottom hCenter vCenter".split(" "));ua=[];var Td=0,qe=0,$c=0,Re=0;bb.e-=Nb.scroll.x;bb.f-=Nb.scroll.y;if(fd){fd=$jscomp.makeIterator(fd);for(var jf=fd.next();!jf.done;jf=fd.next()){jf=$jscomp.makeIterator(jf.value);jf.next();var We=jf.next().value;jf=We.vertical;We=$jscomp.makeIterator(We.horizontal);for(var Rf=We.next();!Rf.done;Rf=We.next()){Rf=Rf.value;var gg=Rf.edgeAVal,ac=Rf.refPointsA,Ng=Rf.refPointsB,
qf=Rf.edgeBVal,rg=Math.ceil(P-Rf.delta),Ve=Math.min(ac.top,Ng.top);ac=Math.max(ac.bottom,Ng.bottom);Rf.maxDist>P&&(rg-=P/2);Td<rg&&(Td=rg,$c=qf-gg);ua.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:sc.guideWidth,start:bb.transformPoint(sc.pt(qf,Ve)),end:bb.transformPoint(sc.pt(qf,ac)),fill:sc.guideColor,guideType:"h",priority:rg})}jf=$jscomp.makeIterator(jf);for(We=jf.next();!We.done;We=jf.next())We=We.value,Rf=We.edgeAVal,Ve=We.refPointsA,ac=We.refPointsB,gg=We.edgeBVal,qf=Math.ceil(P-
We.delta),rg=Math.min(Ve.left,ac.left),Ve=Math.max(Ve.right,ac.right),We.maxDist>P&&(qf-=P/2),qe<qf&&Math.abs(gg-Rf)<=P&&(qe=qf,Re=gg-Rf),ua.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:sc.guideWidth,start:bb.transformPoint(sc.pt(rg,gg)),end:bb.transformPoint(sc.pt(Ve,gg)),fill:sc.guideColor,guideType:"v",priority:qf})}}if(!Td||!qe){ic=[fb].concat($jscomp.arrayFromIterable(ic));Rf=sc.computeClosestMorphs(ic);We=Rf[0];ic=We.l;fd=We.r;jf=We.t;We=We.b;var Ha;if(ic||fd||jf||We){var Ta=(ic||
fd||jf||We).refPointsA;for(gg=1;gg<Rf.length&&(ac=Rf[gg],qf=ac.l,rg=ac.r,Ve=ac.t,ac=ac.b,Td||(ic&&qf&&ic.index!==qf.index&&Math.abs(qf.dist-ic.dist)<=P?Ha=Object.assign({neighbor:gg,direction:"left"},qf):fd&&rg&&fd!==rg.index&&Math.abs(rg.dist-fd.dist)<=P&&(Ha=Object.assign({neighbor:gg,direction:"right"},rg))),qe||(jf&&Ve&&jf.index!==Ve.index&&Math.abs(Ve.dist-jf.dist)<=P?Ha=Object.assign({neighbor:gg,direction:"top"},Ve):We&&ac&&We.index!==ac.index&&Math.abs(ac.dist-We.dist)<=P&&(Ha=Object.assign({neighbor:gg,
direction:"bottom"},ac))),!Ha);gg++);}if(Ha){var Db=Ha;P=Db.direction;Ve=Db.dist;var da=Ta.left;Ng=Ta.top;var Fa=Ta.bottom,jb=Ta.right,zb=Ta.width,zc=Ta.height;ac=Db.refPointsA;Ta=ac.left;Rf=ac.top;gg=ac.bottom;qf=ac.right;rg=ac.width;ac=ac.height;var wc=Db.refPointsB,id=wc.left;Db=wc.top;var qd=wc.bottom;wc=wc.right;jb="left"===P?da:"right"===P?jb:da+zb/2;Fa="bottom"===P?Fa:"top"===P?Ng:Ng+zc/2;da="left"===P?jb-Ve:"right"===P?jb+Ve:da+zb/2;Ve="bottom"===P?Fa+Ve:"top"===P?Fa-Ve:Ng+zc/2;Ng="left"===
P?wc:"right"===P?id:Ta+rg/2;zb="bottom"===P?Db:"top"===P?qd:Rf+ac/2;!ob||Td||"right"!==P&&"left"!==P||(Td=10,$c=(Ha.dist-(fd||ic).dist)*("right"===P?-1:1),jb+=$c,da+=$c);!ob||qe||"top"!==P&&"bottom"!==P||(qe=10,Re=((jf||We).dist-Ha.dist)*("top"===P?-1:1),Fa+=Re,Ve+=Re);ua.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:bb.transformPoint(sc.pt("left"===P?Ta:"right"===P?qf:Ta+rg/2,"bottom"===P?gg:"top"===P?Rf:Rf+ac/2)),end:bb.transformPoint(sc.pt(Ng,zb)),fill:sc.Color.orange,height:sc.guideWidth,
guideType:P,priority:10},{type:"line",epiMorph:!0,hasFixedPosition:!0,start:bb.transformPoint(sc.pt(jb,Fa)),end:bb.transformPoint(sc.pt(da,Ve)),fill:sc.Color.orange,height:sc.guideWidth,guideType:P,priority:10})}}ob&&($c||Re)&&fb.moveBy(sc.pt($c,Re));if(Va){ua=ua.filter(function(cd){var of=cd.guideType;cd=cd.priority;return"h"===of?cd===Td:"v"===of?cd===qe:!0});(Va=sc.cachedGuideLines.get(fb))||sc.cachedGuideLines.set(fb,Va=[]);for(ob=0;ob<ua.length;ob++)Ha=void 0,Va[ob]?Ha=Object.assign(Va[ob],ua[ob]):
(Ha=sc.morph(ua[ob]),Va.push(Ha)),Ha.owner||Nb.addMorph(Ha);Va.slice(ob).forEach(function(cd){return cd.remove()});sc.fun.debounceNamed(fb.id+"-drag-guides-cleanup",1300,function(){var cd=sc.cachedGuideLines.get(fb);cd&&cd.forEach(function(of){return of.remove()})})()}}}function mb(fb,Va,ob,P,ua,bb){ob=void 0===ob?!0:ob;P=void 0===P?!0:P;ua=void 0===ua?5:ua;bb=void 0===bb?100:bb;if(ob||P){var Nb=fb.owner,ic=Nb.world(),fd=Nb.getGlobalTransform(),Td=fb.owner.submorphs.filter(function(Fa){return Fa!==
fb&&!Fa.isEpiMorph&&Fa.visible&&Fa.reactsToPointer});Nb=(Va.includes("left")||Va.includes("right")?"x":"")+(Va.includes("top")||Va.includes("bottom")?"y":"");var qe=sc.findMorphsWithSimilarWidthOrHeight(fb,Nb,Td,ua,bb),$c=-Infinity,Re=-Infinity,jf=0,We=0,Rf=0,gg=0,ac=0,Ng=0;Nb=[];fd.e-=ic.scroll.x;fd.f-=ic.scroll.y;if(qe){qe=$jscomp.makeIterator(qe);for(var qf=qe.next();!qf.done;qf=qe.next()){qf=$jscomp.makeIterator(qf.value);qf.next();var rg=qf.next().value;qf=rg.similarIn;var Ve=rg.delta,Ha=rg.refPointsA,
Ta=rg.refPointsB;rg=ua-Ve+(bb-rg.minDist);"width"===qf?$c<rg&&($c=rg,Va.includes("left")&&(We=-Ve),Va.includes("right")&&(jf=Ve)):Re<rg&&(Re=rg,Va.includes("top")&&(Rf=-Ve),Va.includes("bottom")&&(gg=Ve));Ve={type:"line",epiMorph:!0,hasFixedPosition:!0,height:sc.guideWidth,fill:sc.guideColor,guideType:qf,priority:rg,start:fd.transformPoint("width"===qf?sc.pt(Ha.left,Ha.top+Ha.height/2):sc.pt(Ha.left+Ha.width/2,Ha.top)),end:fd.transformPoint("width"===qf?sc.pt(Ha.right,Ha.top+Ha.height/2):sc.pt(Ha.left+
Ha.width/2,Ha.bottom))};qf=Object.assign({},Ve,{start:fd.transformPoint("width"===qf?sc.pt(Ta.left,Ta.top+Ta.height/2):sc.pt(Ta.left+Ta.width/2,Ta.top)),end:fd.transformPoint("width"===qf?sc.pt(Ta.right,Ta.top+Ta.height/2):sc.pt(Ta.left+Ta.width/2,Ta.bottom))});Nb.push(Ve,qf)}}if(bb=sc.findAlignedMorphs(fb,Td,ua,bb,Va,void 0))for(bb=$jscomp.makeIterator(bb),Td=bb.next();!Td.done;Td=bb.next()){Td=$jscomp.makeIterator(Td.value);Td.next();qe=Td.next().value;Td=qe.vertical;qe=$jscomp.makeIterator(qe.horizontal);
for(qf=qe.next();!qf.done;qf=qe.next()){qf=qf.value;Ta=qf.edgeAVal;var Db=qf.refPointsA,da=qf.refPointsB;Ve=qf.edgeBVal;Ha=Math.ceil(ua-qf.delta);rg=Math.min(Db.top,da.top);Db=Math.max(Db.bottom,da.bottom);qf.maxDist>ua&&(Ha-=ua/2);ac<Ha&&(ac=Ha,Va.includes("left")&&(We=-(Ve-Ta)),Va.includes("right")&&(jf=+(Ve-Ta)));Nb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:sc.guideWidth,start:fd.transformPoint(sc.pt(Ve,rg)),end:fd.transformPoint(sc.pt(Ve,Db)),fill:sc.guideColor,guideType:"h",priority:Ha})}Td=
$jscomp.makeIterator(Td);for(qe=Td.next();!qe.done;qe=Td.next())qe=qe.value,qf=qe.edgeAVal,rg=qe.refPointsA,Db=qe.refPointsB,Ta=qe.edgeBVal,Ve=Math.ceil(ua-qe.delta),Ha=Math.min(rg.left,Db.left),rg=Math.max(rg.right,Db.right),qe.maxDist>ua&&(Ve-=ua/2),Ng<Ve&&Math.abs(Ta-qf)<=ua&&(Ng=Ve,Va.includes("top")&&(Rf=Ta-qf),Va.includes("bottom")&&(gg=Ta-qf)),Nb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:sc.guideWidth,start:fd.transformPoint(sc.pt(Ha,Ta)),end:fd.transformPoint(sc.pt(rg,Ta)),
fill:sc.guideColor,guideType:"v",priority:Ve})}P&&(We&&(fb.left+=We,fb.right-=We),Rf&&(fb.top+=Rf,fb.bottom-=Rf),jf&&(fb.width+=jf),gg&&(fb.height+=gg));if(ob){Nb=Nb.filter(function(Fa){var jb=Fa.guideType;Fa=Fa.priority;return"width"===jb?Fa===$c:"height"===jb?Fa===Re:"v"===jb?Fa===Ng:"h"===jb?Fa===ac:!1});(Va=sc.cachedGuideLines.get(fb))||sc.cachedGuideLines.set(fb,Va=[]);for(ob=0;ob<Nb.length;ob++)P=void 0,Va[ob]?P=Object.assign(Va[ob],Nb[ob]):(P=sc.morph(Nb[ob]),Va.push(P)),P.owner||ic.addMorph(P);
Va.slice(ob).forEach(function(Fa){return Fa.remove()});sc.fun.debounceNamed(fb.id+"-drag-guides-cleanup",1300,function(){var Fa=sc.cachedGuideLines.get(fb);Fa&&Fa.forEach(function(jb){return jb.remove()})})()}}}function rc(fb,Va){Va=void 0===Va?!1:Va;var ob=jc.MorphicEnv.default().world;if(null===fb||void 0===fb)fb=String(fb);if(fb.isMorph)return jc.showRect(fb.world(),fb.globalBounds().translatedBy(fb.world().scroll.negated()),Va);if(fb.isPoint)return jc.showRect(ob,new jc.Rectangle(fb.x-5,fb.y-
5,10,10));if(fb.isLine)return jc.showLine(ob,fb);if(fb.isRectangle)return jc.showRect(ob,fb);if("undefined"!==typeof jc.Element&&fb instanceof jc.Element)return jc.showRect(ob,jc.Rectangle.fromElement(fb));if("number"===typeof fb||"symbol"===typeof fb||"boolean"===typeof fb||"undefined"!==typeof jc.Node&&fb instanceof jc.Node||fb instanceof RegExp)fb=String(fb);"object"===typeof fb&&(fb=jc.obj.inspect(fb,{maxDepth:1}));return"string"===typeof fb&&1===arguments.length?ob.setStatusMessage(fb):ob.setStatusMessage(jc.string.formatFromArray(Array.from(arguments)))}
function xd(fb,Va,ob){ob=void 0===ob?3E3:ob;var P,ua,bb,Nb,ic;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fd){if(1==fd.nextAddress){if(!(fb&&fb.world()&&Va&&Va.world()))return fd.return(null);P=fb.owner.worldPoint(fb.center);ua=Va.owner.worldPoint(Va.center);bb=P.lineTo(ua).sampleN(2)[1];Nb={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:jc.Color.red,fill:jc.Color.red,cx:5,cy:5,r:4}]};ic=$world.addMorph(new jc.Path({position:bb,
renderOnGPU:!0,vertices:[jc.pt(0),jc.pt(0)],borderWidth:2,startMarker:Nb,endMarker:Nb,borderColor:jc.Color.red}));return fd.yield(ic.whenRendered(),2)}if(3!=fd.nextAddress)return fd.yield(ic.animate({opacity:1,customTween:function(Td){var qe=ic.center;ic.vertices=[jc.pt(0).interpolate(Td,P.subPt(bb)),jc.pt(0).interpolate(Td,ua.subPt(bb))];ic.center=qe},duration:400}),3);ob&&setTimeout(function(){return ic.fadeOut()},ob);return fd.return(ic)})}Ea({a:Za,d:xd,r:sa,s:rc});var sc=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
sc.removeSnapToGuidesOf=sa;sc.showAndSnapToGuides=Za;sc.showAndSnapToResizeGuides=mb;sc.computeRefPoints=function(fb){var Va=fb.x,ob=fb.y,P=fb.width;fb=fb.height;return{left:Va,top:ob,hCenter:Va+P/2,vCenter:ob+fb/2,right:Va+P,bottom:ob+fb,width:P,height:fb}};sc.findEdgesInAlignment=function(fb,Va,ob,P,ua,bb,Nb,ic,fd,Td){ob=void 0===ob?15:ob;bb=void 0===bb?0:bb;Nb=void 0===Nb?0:Nb;ic=void 0===ic?0:ic;fd=void 0===fd?0:fd;Td=void 0===Td?0:Td;for(var qe=[],$c=[],Re=0;Re<sc.edges.length;Re++){var jf=$jscomp.makeIterator(sc.edges[Re]),
We=jf.next().value,Rf=jf.next().value;jf=jf.next().value;var gg=fb[Rf],ac=Va[jf],Ng=Math.max(gg,ac)-Math.min(gg,ac);Ng>ob||!(P&&!P.includes(Rf)||ua&&!ua.includes(jf))&&("vertical"===We?qe:$c).push({delta:Ng,edgeA:Rf,edgeB:jf,edgeAVal:gg,edgeBVal:ac,refPointsA:fb,refPointsB:Va,distLeft:bb,distTop:Nb,distRight:ic,distBottom:fd,maxDist:Td})}return qe.length||$c.length?{vertical:qe,horizontal:$c}:null};sc.findAlignedMorphs=function(fb,Va,ob,P,ua,bb){ob=void 0===ob?15:ob;P=void 0===P?Infinity:P;for(var Nb,
ic=sc.computeRefPoints(fb.bounds()),fd=0;fd<Va.length;fd++){var Td=Va[fd];if(Td!==fb){var qe=sc.computeRefPoints(Td.bounds()),$c=Math.max(0,ic.left-qe.right),Re=Math.max(0,qe.left-ic.right),jf=Math.max(0,ic.top-qe.bottom),We=Math.max(0,qe.top-ic.bottom);Math.max(We,jf,Re,$c)>P||!(qe=sc.findEdgesInAlignment(ic,qe,ob,ua,bb,$c,jf,Re,We,Math.max(We,jf,Re,$c)))||(Nb||(Nb=new Map),Nb.set(Td,qe))}}fb=fb.owner;Va=sc.computeRefPoints(fb.innerBounds());if(ob=sc.findEdgesInAlignment(ic,Va,ob))Nb||(Nb=new Map),
Nb.set(fb,ob);return Nb};sc.findMorphsWithSimilarWidthOrHeight=function(fb,Va,ob,P,ua){P=void 0===P?15:P;ua=void 0===ua?Infinity:ua;for(var bb,Nb=sc.computeRefPoints(fb.bounds()),ic=0;ic<ob.length;ic++){var fd=ob[ic];if(fd!==fb){var Td=sc.computeRefPoints(fd.bounds()),qe=Math.max(0,Nb.left-Td.right),$c=Math.max(0,Td.left-Nb.right),Re=Math.max(0,Nb.top-Td.bottom),jf=Math.max(0,Td.top-Nb.bottom),We=Math.min(jf,Re,$c,qe),Rf=Math.max(jf,Re,$c,qe);if(!(Math.max(jf,Re,$c,qe)>ua)){$c=Nb;qe=$c.width;$c=$c.height;
jf=Td;Re=jf.width;jf=jf.height;var gg=Re-qe,ac=jf-$c;("x"===Va||"xy"===Va)&&Math.abs(gg)<=P&&(bb||(bb=new Map),bb.set(fd,{similarIn:"width",minDist:We,maxDist:Rf,refPointsA:Nb,refPointsB:Td,valA:qe,valB:Re,delta:gg}));("y"===Va||"xy"===Va)&&Math.abs(ac)<=P&&(bb||(bb=new Map),bb.set(fd,{similarIn:"height",minDist:We,maxDist:Rf,refPointsA:Nb,refPointsB:Td,valA:$c,valB:jf,delta:ac}))}}}return bb};sc.closest=function(fb,Va,ob,P,ua,bb,Nb,ic){ic=void 0===ic?!0:ic;var fd=P[fb],Td=ua[fb],qe=bb[fb];Va=Nb[fb];
for(var $c,Re,jf,We,Rf=0;Rf<ua.length;Rf++)fb===Rf||fd<ua[Rf]||$c&&ua[$c.index]>=ua[Rf]||ic&&Nb[fb]<bb[Rf]||bb[fb]>Nb[Rf]||($c={index:Rf,dist:fd-ua[Rf],refPointsA:ob[fb],refPointsB:ob[Rf]});for(fd=0;fd<P.length;fd++)fb===fd||Td>P[fd]||Re&&P[Re.index]<=P[fd]||ic&&Nb[fb]<bb[fd]||bb[fb]>Nb[fd]||(Re={index:fd,dist:P[fd]-Td,refPointsA:ob[fb],refPointsB:ob[fd]});for(Td=0;Td<Nb.length;Td++)fb===Td||qe<Nb[Td]||jf&&Nb[jf.index]>=Nb[Td]||ic&&P[fb]>ua[Td]||ua[fb]<P[Td]||(jf={index:Td,dist:qe-Nb[Td],refPointsA:ob[fb],
refPointsB:ob[Td]});for(Nb=0;Nb<bb.length;Nb++)fb===Nb||Va>bb[Nb]||We&&bb[We.index]<=bb[Nb]||ic&&P[fb]>ua[Nb]||ua[fb]<P[Nb]||(We={index:Nb,dist:bb[Nb]-Va,refPointsA:ob[fb],refPointsB:ob[Nb]});return{l:$c,r:Re,t:jf,b:We}};sc.computeClosestMorphs=function(fb){for(var Va=[],ob=[],P=[],ua=[],bb=[],Nb=[],ic=0;ic<fb.length;ic++){var fd=sc.computeRefPoints(fb[ic].bounds());bb.push(fd);var Td=fd.right,qe=fd.top,$c=fd.bottom;Va.push(fd.left);ob.push(Td);P.push(qe);ua.push($c)}for(ic=0;ic<fb.length;ic++)Nb.push(sc.closest(ic,
fb,bb,Va,ob,P,ua));return Nb};sc.fun=Cb;sc.pt=Kb;sc.Color=lc;sc.morph=$b;sc.cachedGuideLines=new WeakMap;sc.guideWidth=1;sc.guideColor=sc.Color.orange.lighter();sc.removeSnapToGuidesOf=sa;sc.removeSnapToGuidesOf=sa;sc.showAndSnapToGuides=Za;sc.showAndSnapToGuides=Za;sc.showAndSnapToResizeGuides=mb;sc.showAndSnapToResizeGuides=mb;sc.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom",
"vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];var Na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");Na.Morph=Qd;Na.Label=Zc;Na.StyleSheet=Rd;Na.HorizontalLayout=
ad;Na.Path=Nc;Na.Text=nd;Na.GridLayout=he;Na.morph=$b;Na.Icon=af;Na.createMorphSnapshot=Af;Na.Color=lc;Na.pt=Kb;Na.rect=rd;Na.Rectangle=cc;Na.LinearGradient=Ic;Na.obj=Kd;Na.PropertyPath=Kc;Na.promise=Bd;Na.properties=be;Na.num=yc;Na.arr=Cc;Na.connect=Pb;Na.signal=Dc;Na.disconnect=Xc;Na.disconnectAll=Cd;Na.once=Od;Na.showAndSnapToGuides=Za;Na.showAndSnapToResizeGuides=mb;Na.removeSnapToGuidesOf=sa;Na.resource=Gb;Na.haloBlue=Na.Color.rgb(23,160,251);Na.componentAccent=Na.Color.magenta;Na.derivedAccent=
Na.Color.purple;var Xd=function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ob=Va.hasOwnProperty("Halo")&&"function"===typeof Va.Halo?Va.Halo:Va.Halo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"relayout",value:function(){this.alignWithTarget()}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},
{key:"commands",get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(P){P.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var P=this;setTimeout(function(){P.target.owner||P.remove()})}},{key:"initLayout",value:function(){var P=this.layout=new Na.GridLayout({autoAssign:!1,fitToCell:!1,columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},
2,{fixed:26},4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name","name","name","name","name",null]]});P.col(1).row(7).group.align="center";P.col(1).row(7).group.resize=!1}},{key:"initButtons",
value:function(){this.submorphs=[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||
this.addMorphBack(Na.morph({name:"border-box",fill:Na.Color.transparent,borderColor:this.target.isComponent?Na.componentAccent:Na.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(P){this.state||(this.state={});this.state.pointerId=P}},{key:"prepareTarget",value:function(P){if(!Na.obj.isArray(P))return P;if(1>=P.length)return P[0];P=P[0].world().addMorph(new Na.MultiSelectionTarget({selectedMorphs:P}));P.alignWithSelection();
P.modifiesSelectedMorphs=!0;return P}},{key:"refocus",value:function(P){this.target=P;this.alignWithTarget()}},{key:"alignWithTarget",value:function(){if(!this.active&&this.target){var P=this.target.world()||$world,ua=P.visibleBounds(),bb=this.target.globalBounds(),Nb=bb.insetBy(-36).intersection(ua);ua=bb.intersection(ua);this.layout&&this.layout.disable();this.setBounds(Nb.translatedBy(P.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,ua));this.state.activeButton?(this.buttonControls.forEach(function(ic){return ic.visible=
!1}),this.ensureResizeHandles().forEach(function(ic){return ic.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(ic){return ic.visible=!0}),this.buttonControls.forEach(function(ic){ic.visible=!0}),this.propertyDisplay.disable());this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(ic){return ic.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();
this.layout&&this.layout.enable();return this}}},{key:"detachFromTarget",value:function(){var P=this.target;P&&(Na.disconnect(P,"onChange",this,"alignWithTarget"),Na.disconnect(P,"onOwnerChanged",this,"removeIfDetached"),P instanceof Na.MultiSelectionTarget?(P.modifiesSelectedMorphs=!1,P.remove()):"function"===typeof P.detachedHalo&&P.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();sb._get(Object.getPrototypeOf(ob.prototype),"remove",this).call(this)}},{key:"morphsContainingPoint",
value:function(P){return P}},{key:"propertyDisplay",get:function(){return Na.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return Na.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return Na.CloseHaloItem.for(this)}},{key:"grabHalo",value:function(){return Na.GrabHaloItem.for(this)}},{key:"dragHalo",value:function(){return Na.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return Na.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return Na.InspectHaloItem.for(this)}},
{key:"editHalo",value:function(){return Na.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return Na.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return Na.CopyHaloItem.for(this)}},{key:"originHalo",value:function(){return Na.OriginHaloItem.for(this)}},{key:"componentHalo",value:function(){return Na.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(P){return P.isHaloItem&&!P.isResizeHandle})}},{key:"addMorphToSelection",
value:function(P){var ua=this,bb,Nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ic){if(1==ic.nextAddress){bb=ua.world();Nb=ua.target.isMorphSelection?ua.target.selectedMorphs:[ua.target];if(Nb.includes(P))return ic.return();ua.remove();return ic.yield(bb.showHaloForSelection([].concat($jscomp.arrayFromIterable(Nb),[P]),ua.state.pointerId),2)}return ic.return(ic.yieldResult)})}},{key:"removeMorphFromSelection",value:function(P){var ua=this,bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nb){if(1==
Nb.nextAddress){bb=ua.world();ua.remove();if(!ua.target.isMorphSelection)return Nb.jumpTo(0);Na.arr.remove(ua.target.selectedMorphs,P);return Nb.yield(bb.showHaloForSelection(ua.target.selectedMorphs,ua.state.pointerId),3)}return Nb.return(Nb.yieldResult)})}},{key:"isAlreadySelected",value:function(P){return this.target==P||this.target.isMorphSelection&&this.target.selectsMorph(P)}},{key:"updateBoundsFor",value:function(P,ua,bb,Nb,ic){var fd={topLeft:Na.rect(-1,-1,1,1),topCenter:ua?Na.rect(1,-1,0,
1):Na.rect(0,-1,0,1),topRight:Na.rect(0,-1,1,1),rightCenter:ua?Na.rect(0,1,1,1):Na.rect(0,0,1,0),bottomRight:Na.rect(0,0,1,1),bottomCenter:ua?Na.rect(1,0,0,1):Na.rect(0,0,0,1),bottomLeft:Na.rect(-1,0,1,1),leftCenter:ua?Na.rect(-1,1,1,0):Na.rect(-1,0,1,0)}[P];ic=fd.x;var Td=fd.y,qe=fd.width;fd=fd.height;bb=ua?this.proportionalDelta(P,bb,Nb):bb;P=Na.rect(bb.x*ic,bb.y*Td,bb.x*qe,bb.y*fd);this.active=!0;this.target.setBounds(Nb.insetByRect(P));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());
this.active=!1;this.alignWithTarget()}},{key:"proportionalDelta",value:function(P,ua,bb){var Nb=bb.width,ic=bb.height;bb={topLeft:Na.pt(-1,-1),topCenter:Na.pt(0,-1),topRight:Na.pt(1,-1),leftCenter:Na.pt(-1,0),rightCenter:Na.pt(1,0),bottomLeft:Na.pt(-1,1),bottomCenter:Na.pt(0,1),bottomRight:Na.pt(1,1)};var fd=Nb/Math.max(Nb,ic),Td=ic/Math.max(ic,Nb);Nb={topLeft:Na.pt(-fd,-Td),topCenter:Na.pt(1/(2*ic/Nb),-1),topRight:Na.pt(fd,-Td),leftCenter:Na.pt(-1,ic/(2*Nb)),rightCenter:Na.pt(1,ic/(3*Nb)),bottomLeft:Na.pt(-fd,
Td),bottomCenter:Na.pt(1/(2*ic/Nb),1),bottomRight:Na.pt(fd,Td)};bb=bb[P];return Nb[P].scaleBy(bb.dotProduct(ua)/bb.dotProduct(bb))}},{key:"ensureResizeHandles",value:function(){return Na.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(P){P=P.valueForPropertyDisplay();"undefined"!==typeof P?this.propertyDisplay.displayProperty(P):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(P,ua){if(!Na.rect(0).sides.includes(ua)){var bb=this.getSubmorphNamed("diagonal");
if(P){P=this.target.globalBounds();var Nb=P.width,ic=P.height;P=this.localize(Na.pt(P.x,P.y)).extent(Na.pt(Nb,ic)).scaleRectTo(this.innerBounds());Nb={topLeft:[Na.pt(Nb,ic),Na.pt(0,0)],topRight:[Na.pt(0,ic),Na.pt(Nb,0)],bottomRight:[Na.pt(0,0),Na.pt(Nb,ic)],bottomLeft:[Na.pt(Nb,0),Na.pt(0,ic)]};bb?bb.setBounds(P):(bb=$jscomp.makeIterator(Nb[ua]),ua=bb.next().value,bb=bb.next().value,Nb=new Na.LinearGradient({stops:[{offset:0,color:Na.Color.orange.withA(0)},{offset:.2,color:Na.Color.orange},{offset:.8,
color:Na.Color.orange},{offset:1,color:Na.Color.orange.withA(0)}]}),bb=this.addMorphBack(new Na.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:P,borderColor:Nb,vertices:[ua,bb]})),bb.setBounds(P),bb.animate({opacity:1,duration:500}))}else bb&&bb.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(P,ua){var bb=this.getSubmorphNamed("rotationIndicator");P&&ua?(P=this.getSubmorphNamed("origin").center,bb=bb||this.addMorphBack(new Na.Path({name:"rotationIndicator",
borderColor:Na.haloBlue,borderWidth:1,vertices:[]})),bb.setBounds(ua.bounds().union(this.innerBounds())),bb.vertices=[bb.localizePointFrom(P,this),bb.localizePointFrom(ua.center,this)]):bb&&bb.remove()}},{key:"toggleMorphHighlighter",value:function(P,ua,bb){bb=void 0===bb?!1:bb;if(ua.onHaloGrabover)ua.onHaloGrabover(P);else bb=Na.MorphHighlighter.for(this,ua,bb),P&&ua&&ua!=this.world()?bb&&bb.show(ua):bb&&bb.deactivate()}},{key:"onMouseDown",value:function(P){var ua=P.state.clickedOnMorph;if(!P.isCommandKey()&&
ua==this.borderBox)return this.remove();if(P.isShiftDown()&&P.isCommandKey())P=this.target.isMorphSelection?this.target.morphBeneath(P.position):this.morphBeneath(P.position),this.isAlreadySelected(P)?this.removeMorphFromSelection(P):this.addMorphToSelection(P);else{if(ua==this.borderBox&&P.isCommandKey()){var bb=P.world.morphsContainingPoint(P.position).filter(function(Nb){return Nb.halosEnabled});(bb=bb.slice(bb.indexOf(this.target)+1)[0]||bb[0]||P.world)&&P.world.showHaloFor(bb,P.domEvt.pointerId);
this.remove()}ua==this&&P.isCommandKey()&&(bb=this.morphBeneath(P.position),P.world.showHaloFor(bb,P.domEvt.pointerId));ua==this&&this.remove()}}},{key:"onKeyUp",value:function(P){this.changingName||this.buttonControls.map(function(ua){return ua.onKeyUp(P)})}},{key:"getMesh",value:function(P,ua){var bb=P.x;P=P.y;ua=void 0===ua?Na.pt(0,0):ua;var Nb=this.world().visibleBounds(),ic=Nb.height;Nb=Nb.width;var fd={borderStyle:"dotted",borderWidth:2,borderColor:Na.Color.orange};fd=this.get("mesh")||this.addMorph(new Na.Morph({name:"mesh",
styleClasses:["halo-mesh"],extent:Na.pt(Nb,ic),fill:null,submorphs:[new Na.Path(Object.assign({name:"vertical"},fd)),new Na.Path(Object.assign({name:"horizontal"},fd))]}));fd.globalPosition=ua;fd.getSubmorphNamed("vertical").vertices=[Na.pt(bb,0).subPt(ua),Na.pt(bb,ic).subPt(ua)];fd.getSubmorphNamed("horizontal").vertices=[Na.pt(0,P).subPt(ua),Na.pt(Nb,P).subPt(ua)];return fd}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:Na.Color.transparent},
resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,get:function(){return 40>this.target.bounds().extent().dist(Na.pt(0))}},target:{get:function(){return this.state?this.state.target:null},set:function(P){this.state||(this.state={});var ua=!!this.state.target;
this.detachFromTarget();P=this.prepareTarget(P);this.state.target=P;ua&&this.alignWithTarget();Na.connect(P,"onChange",this,"alignWithTarget");Na.connect(P,"onOwnerChanged",this,"removeIfDetached")}}}}}],Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:942,end:16934})}(Na.Morph);Xd=Na.Halo;
var Gd=Ea("H",Xd);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ob=Va.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof Va.HaloPropertyDisplay?Va.HaloPropertyDisplay:Va.HaloPropertyDisplay=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},
{key:"displayProperty",value:function(P){var ua=this.halo.state.activeButton;P=String(P);this.visible=!0;this.textString=P;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(ua.bounds())&&(this.position=Na.pt(ua.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},
{key:"defaultPosition",get:function(){return Na.pt(25,0)}},{key:"for",value:function(P){return P.getSubmorphNamed(this.morphName)||P.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},fill:{defaultValue:Na.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:Na.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:Na.Color.white},position:{defaultValue:this.defaultPosition}}}}],
Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:17124,end:18462})})(Na.Label);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ob=Va.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof Va.MultiSelectionTarget?Va.MultiSelectionTarget:Va.MultiSelectionTarget=
function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},{key:"selectsMorph",value:function(P){return this.selectedMorphs.includes(P)}},{key:"alignWithSelection",value:function(){var P=this.selectedMorphs.map(function(ua){return ua.globalBounds()}).reduce(function(ua,bb){return ua.union(bb)});this.setBounds(P)}},{key:"onGrab",
value:function(P){this.grabbingHand=P.hand;this.selectionGrabbed=!0;P.hand.grab(this.selectedMorphs);Na.once(P.hand,"dropMorphsOn",this,"onGrabEnd");Na.connect(P.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=!1;Na.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(P){var ua=P.value.subPt(P.prevValue);this.selectedMorphs.forEach(function(bb){return bb.resizeBy(ua)})}},{key:"updatePosition",value:function(P){if(!this.selectionGrabbed){var ua=
P.value.subPt(P.prevValue);this.selectedMorphs.forEach(function(bb){return bb.moveBy(ua)})}}},{key:"updateRotation",value:function(P){var ua=this,bb=P.value-P.prevValue;this.selectedMorphs.forEach(function(Nb){var ic=Nb.origin;Nb.adjustOrigin(Nb.localize(ua.worldPoint(Na.pt(0,0))));Nb.rotation+=bb;Nb.adjustOrigin(ic)})}},{key:"updateScale",value:function(P){var ua=this,bb=P.value-P.prevValue;this.selectedMorphs.forEach(function(Nb){var ic=Nb.origin;Nb.adjustOrigin(Nb.localize(ua.worldPoint(Na.pt(0,
0))));Nb.scale+=bb;Nb.adjustOrigin(ic)})}},{key:"onChange",value:function(P){sb._get(Object.getPrototypeOf(ob.prototype),"onChange",this).call(this,P);if(this.modifiesSelectedMorphs){switch(P.prop){case "extent":this.updateExtent(P);break;case "scale":this.updateScale(P);break;case "position":this.updatePosition(P);break;case "rotation":this.updateRotation(P)}return P}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},
modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]},halosEnabled:{defaultValue:!1}}}}],Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:18530,end:20801})})(Na.Morph);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ob=Va.hasOwnProperty("HaloItem")&&
"function"===typeof Va.HaloItem?Va.HaloItem:Va.HaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"HaloItem"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:Na.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:Na.pt(24,24)},halo:{}}}},{key:"for",value:function(P){return P.getSubmorphNamed(this.morphName)||P.addMorph(new this({halo:P,name:this.morphName}))}}],Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:20965,end:21638})})(Na.Morph);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ob=Va.hasOwnProperty("NameHolder")&&"function"===typeof Va.NameHolder?Va.NameHolder:Va.NameHolder=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"onHoverIn",
value:function(P){this.highlightOnHover&&this.nameHolder.active&&(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=Na.Color.orange)}},{key:"onHoverOut",value:function(P){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=Na.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(P){"Enter"==P.keyCombo?(this.accept(),
P.stop()):sb._get(Object.getPrototypeOf(ob.prototype),"onKeyDown",this).call(this,P)}},{key:"onMouseUp",value:function(){Na.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(P){this.nameHolder.fontColor=Na.Color.white;this.halo.toggleMorphHighlighter(!1,this.target)}},{key:"onKeyUp",value:function(P){P=this.nameHolder.textString;var ua=this.target.owner;this.validName=!ua||!ua.getSubmorphNamed(P)||this.target.name==P;Na.signal(this,"valid",[this.validName,P])}},{key:"update",value:function(){var P=
this;this.nameHolder.textString!==this.target.name&&(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return P.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(P){if(!this.forceUniqueName||this.validName)this.target.name=
P,Na.signal(this,"active",[!1,this])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},fill:{defaultValue:Na.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new Na.HorizontalLayout({resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=
this.addMorph(new Na.Text({fill:Na.Color.transparent,fontColor:Na.Color.white,fontWeight:"bold",active:!0}));Na.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21673,end:24224})})(Na.Morph);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
ob=Va.hasOwnProperty("NameHaloItem")&&"function"===typeof Va.NameHaloItem?Va.NameHaloItem:Va.NameHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:Symbol.for("lively-instance-initialize"),value:function(P){sb._get(Object.getPrototypeOf(ob.prototype),Symbol.for("lively-instance-initialize"),this).call(this,P);this.initComponentLink();this.initNameHolders();this.validityIndicator=Na.Icon.makeLabel("check",
{fontColor:Na.Color.green,fontSize:15,padding:Na.rect(4,6,4,0)});this.fill=this.halo.target.isComponent?Na.componentAccent:Na.haloBlue;this.alignInHalo()}},{key:"initComponentLink",value:function(){var P=this.halo.target;if(P&&!P.isMorphSelection&&P.master){var ua=P.master.determineMaster(P),bb=P.master.getWorldUrlFor(ua)||"this project",Nb=!!ua.world();P=this.addMorph(Na.Icon.makeLabel(bb?"external-link-alt":"exclamation-triangle",{nativeCursor:"pointer",fontColor:Na.Color.white,padding:Na.rect(8,
0,-8,0),tooltip:"Located in "+bb}));bb&&Na.connect(P,"onMouseDown",function(){Nb?ua.show():window.open(bb)})}}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(P){return{target:P,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var P=this;this.nameHolders=this.targets().map(function(ua){ua=new Na.NameHolder({halo:P.halo,highlightOnHover:ua.highlightOnHover,
target:ua.target});Na.connect(ua,"active",P,"toggleActive");Na.connect(ua,"valid",P,"toggleNameValid");return ua});this.submorphs=[].concat($jscomp.arrayFromIterable(this.submorphs),$jscomp.arrayFromIterable(Na.arr.interpose(this.nameHolders,{extent:Na.pt(1,28),fill:Na.Color.black.withA(.4)})))}},{key:"toggleActive",value:function(P){P=$jscomp.makeIterator(P);var ua=P.next().value,bb=P.next().value;this.halo.changingName!==ua&&((this.halo.changingName=ua)?(this.nameHolders.forEach(function(Nb){return Nb!=
bb&&Nb.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),this.fill=Na.Color.darkGray,setTimeout(function(){return bb.nameHolder.selectAll()})):(this.fill=Na.haloBlue,this.nameHolders.forEach(function(Nb){return Nb!=bb&&Nb.activate()}),this.borderWidth=0,this.validityIndicator.remove(),this.halo.focus()),this.alignInHalo())}},{key:"toggleNameValid",value:function(P){var ua=$jscomp.makeIterator(P);P=ua.next().value;ua=ua.next().value;(this.validName=P)?(this.conflictingMorph=null,
this.borderColor=Na.Color.green,this.validityIndicator.nativeCursor="auto",this.validityIndicator.fontColor=Na.Color.green,Na.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(ua),this.borderColor=Na.Color.red,this.validityIndicator.fontColor=Na.Color.red,this.validityIndicator.nativeCursor="pointer",Na.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){Na.arr.zip(this.targets(),this.nameHolders).map(function(ua){var bb=$jscomp.makeIterator(ua);
ua=bb.next().value.target;bb=bb.next().value;bb.target=ua;bb.update()});var P=this.halo.innerBounds().bottomCenter().addPt(Na.pt(0,2));this.topCenter=Na.pt(Math.max(P.x,30),Math.max(P.y,80))}},{key:"onMouseDown",value:function(P){var ua=this,bb=this.conflictingMorph;bb&&(this.halo.toggleMorphHighlighter(!0,bb),setTimeout(function(){return ua.halo.toggleMorphHighlighter(!1,bb)},1E3))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},
{key:"properties",get:function(){return{borderRadius:{defaultValue:4},fill:{defaultValue:Na.haloBlue},borderColor:{defaultValue:Na.Color.green},layout:{initialize:function(){this.layout=new Na.HorizontalLayout({resizeContainer:!0,spacing:0,align:"center"})}}}}}],Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:24226,end:28259})})(Na.HaloItem);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ob=Va.hasOwnProperty("CloseHaloItem")&&"function"===typeof Va.CloseHaloItem?Va.CloseHaloItem:Va.CloseHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"update",value:function(){var P=this.halo,ua=P.target.owner;ua.undoStart("close-halo");P.target.selectedMorphs?P.target.selectedMorphs.forEach(function(bb){return bb.remove()}):
P.target.remove();ua.undoStop("close-halo");P.remove()}},{key:"onMouseDown",value:function(P){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["fas","fa-trash"]},draggable:{defaultValue:!1},tooltip:{defaultValue:"Remove this morph from the world"}}}}],Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:28261,end:28886})})(Na.HaloItem);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ob=Va.hasOwnProperty("GrabHaloItem")&&"function"===typeof Va.GrabHaloItem?Va.GrabHaloItem:Va.GrabHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,
fb,[{key:"adjustTarget",value:function(P,ua){Na.PropertyPath("owner.layout.autoResize").get(P)&&!P.globalBounds().insetBy(10).containsPoint(ua)&&(P=P.owner);return P}},{key:"valueForPropertyDisplay",value:function(){var P=this.hand,ua=this.halo,bb=this.prevDropTarget,Nb=P.world(),ic=P.findDropTarget(P.globalPosition,[ua.target],function(fd){return!fd.isHaloItem&&!fd.ownerChain().some(function(Td){return Td.isHaloItem||!Td.visible||0==Td.opacity})});if(ic)return ic=this.adjustTarget(ic,P.globalPosition),
ua.toggleMorphHighlighter(ic&&ic!=Nb,ic,!0),bb&&bb!=ic&&ua.toggleMorphHighlighter(!1,bb),(this.prevDropTarget=ic)&&ic.name}},{key:"init",value:function(P){var ua=this.halo,bb=ua.target.undoStart("grab-halo");bb&&bb.addTarget(ua.target.owner);this.hand=P;ua.target.onGrab({halo:ua,hand:P,isShiftDown:function(){return!1}});ua.state.activeButton=this;this.opacity=.3;var Nb=Na.connect(P,"update",this,"update");Na.once(ua.target,"remove",function(){return Nb.disconnect()})}},{key:"stop",value:function(P){var ua=
this.halo,bb=this.prevDropTarget,Nb=ua.target.undoInProgress,ic=P.hand.findDropTarget(P.hand.globalPosition,[ua.target],function(fd){return!fd.isHaloItem&&!fd.ownerChain().some(function(Td){return Td.isHaloItem})});ic=this.adjustTarget(ic,P.hand.globalPosition);Na.disconnect(P.hand,"update",this,"update");Na.MorphHighlighter.interceptDrop(ua,ic,ua.target);Nb.addTarget(ic);ic.onDrop(P);ua.state.activeButton=null;ua.alignWithTarget();ua.toggleMorphHighlighter(!1,bb);Na.MorphHighlighter.removeHighlighters(ua);
ua.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"onDragStart",value:function(P){this.init(P.hand)}},{key:"onDragEnd",value:function(P){this.stop(P)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],
Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:28888,end:31416})})(Na.HaloItem);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ob=Va.hasOwnProperty("DragHaloItem")&&"function"===typeof Va.DragHaloItem?Va.DragHaloItem:Va.DragHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},{key:"updateAlignmentGuide",value:function(P){var ua=this.halo.getSubmorphNamed("mesh");if(P)return ua=this.halo.getMesh(this.halo.target.worldPoint(Na.pt(0,0))),this.focus(),ua;ua&&ua.remove()}},{key:"init",value:function(){var P=this.halo.target;P.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=P.position;
this.targetTransform=P.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();this.updateAlignmentGuide(!1);Na.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(P,ua,bb){ua=void 0===ua?!1:ua;bb=void 0===bb?!1:bb;this.actualPos=P=this.actualPos.addPt(this.targetTransform.transformDirection(P));ua&&(P=P.griddedBy(Na.pt(10,10)));this.halo.target.position=P;this.updateAlignmentGuide(ua);
ua||Na.showAndSnapToGuides(this.halo.target,!0,bb,5,500)}},{key:"onDragStart",value:function(P){this.init()}},{key:"onDrag",value:function(P){this.update(P.state.dragDelta,P.isAltDown(),P.isCtrlDown())}},{key:"onDragEnd",value:function(P){this.stop()}},{key:"onKeyUp",value:function(P){this.updateAlignmentGuide(!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},
styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:31418,end:33256})})(Na.HaloItem);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
ob=Va.hasOwnProperty("InspectHaloItem")&&"function"===typeof Va.InspectHaloItem?Va.InspectHaloItem:Va.InspectHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"onMouseDown",value:function(P){var ua=this;(function(){var bb,Nb,ic,fd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Td){if(1==Td.nextAddress)return Td.yield(System.import("lively.ide/js/inspector.js"),2);bb=Td.yieldResult;
Nb=bb.default;(ic=ua.world().getSubmorphsByStyleClassName("Inspector").find(function(qe){return qe.targetObject==ua.halo.target}))&&(fd=ic.getWindow())?(fd.minimized=!1,fd.activate(),fd.animate({center:ua.world().visibleBounds().center(),duration:200})):Nb.openInWindow({targetObject:ua.halo.target});ua.halo.remove();Td.jumpToEnd()})})()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},
draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:33258,end:34175})})(Na.HaloItem);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ob=Va.hasOwnProperty("EditHaloItem")&&"function"===
typeof Va.EditHaloItem?Va.EditHaloItem:Va.EditHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"onMouseDown",value:function(P){var ua=this;(P=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(bb){return bb.target==ua.halo.target}))?(P=P.getWindow(),P.bringToFront(),P.minimized=!1,P.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",
{target:this.halo.target});this.halo.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:34177,end:34957})})(Na.HaloItem);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ob=Va.hasOwnProperty("RotateHaloItem")&&"function"===typeof Va.RotateHaloItem?Va.RotateHaloItem:Va.RotateHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:Symbol.for("lively-instance-initialize"),value:function(P){sb._get(Object.getPrototypeOf(ob.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,P);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(P){this.setProperty("angle",P)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(P){this.setProperty("scaleGauge",P)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(P){this.setProperty("initRotation",
P)}},{key:"valueForPropertyDisplay",value:function(){var P=this.halo.target;return this.scaleGauge?P.scale.toFixed(4).toString():Na.num.toDegrees(P.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(P){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=P;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(P){this.detachFromLayout();this.halo.state.activeButton=this;
this.scaleGauge=P.scaleBy(1/this.halo.target.scale);this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(P){this.scaleGauge=null;P=this.initRotation+(P-this.angle);P=Na.num.toRadians(Na.num.detent(Na.num.toDegrees(P),10,45));this.halo.target.rotation=P;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(P){var ua=this.scaleGauge,bb=this.halo;ua||(ua=this.scaleGauge=P.scaleBy(1/bb.target.scale));this.angle=P.theta();this.initRotation=bb.target.rotation;
bb.target.scale=Na.num.detent(P.dist(Na.pt(0,0))/ua.dist(Na.pt(0,0)),.1,.5);bb.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(P){this.styleClasses=["fas",P?"fa-search-plus":"fa-redo"];this.tooltip=P?"Scale morph":"Rotate morph"}},
{key:"detachFromLayout",value:function(){this.savedLayout=this.halo.layout;this.halo.layout=null}},{key:"attachToLayout",value:function(){this.halo.layout=this.savedLayout}},{key:"onDragStart",value:function(P){this.adaptAppearance(P.isShiftDown());P.isShiftDown()?this.initScale(P.position.subPt(this.halo.target.globalPosition)):this.init(P.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(P){this.globalPosition=P.position.addPt(Na.pt(-10,-10));this.adaptAppearance(P.isShiftDown());
P.isShiftDown()?this.updateScale(P.position.subPt(this.halo.target.globalPosition)):this.update(P.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(P){this.adaptAppearance(P.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(P){this.adaptAppearance(P.isShiftDown())}},{key:"onKeyUp",value:function(P){this.adaptAppearance(P.isShiftDown())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},
{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:34959,end:38436})})(Na.HaloItem);Na.nameNumberRe=/(.+)([0-9]+)$/;(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ob=Va.hasOwnProperty("ComponentHaloItem")&&
"function"===typeof Va.ComponentHaloItem?Va.ComponentHaloItem:Va.ComponentHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"updateComponentIndicator",value:function(){var P=this.world(),ua=this.halo.target;this.halo.remove();P.showHaloFor(ua)}},{key:"onMouseDown",value:function(){var P=this,ua,bb,Nb,ic;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fd){if(1==fd.nextAddress)return ua=
P.halo.target,bb=!ua.isComponent,Nb=$world.getAllNamed(ua.name).length,bb&&1<Nb?fd.yield($world.prompt(["Name Conflict\n",{},"The morph's name you are about to turn into a component is already used by "+(Nb-1)+" other morph"+(2<Nb?"s":"")+". Please enter a ",{fontWeight:"normal"},"unique identifier",{fontStyle:"italic"}," for this component within this project.",{fontWeight:"normal",fontSize:16}],{input:ua.name,lineWrapping:!0,width:400,errorMessage:"Identifier not unique",validate:function(Td){return 0==
$world.getAllNamed(Td).length}}),3):fd.jumpTo(2);if(2!=fd.nextAddress){ic=fd.yieldResult;if(!ic)return fd.return();ua.name=ic}ua.isComponent=bb;P.updateComponentIndicator();fd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=
this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:38477,end:40112})})(Na.HaloItem);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ob=Va.hasOwnProperty("CopyHaloItem")&&"function"===typeof Va.CopyHaloItem?
Va.CopyHaloItem:Va.CopyHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"init",value:function(P){function ua($c,Re){return Re.match(Na.nameNumberRe)?Re.replace(Na.nameNumberRe,function(jf,We,Rf){Rf||(Rf="0");for(jf=Number(Rf);$c.get(We+ ++jf););return We+jf}):Re+"1"}var bb=this.halo,Nb=bb.target,ic=bb.world(),fd=Nb instanceof Na.MultiSelectionTarget;bb.remove();Na.connect(P,"update",this,
"update");if(fd){var Td=Nb.selectedMorphs.map(function($c){return ic.addMorph($c.copy())});fd=Td.map(function($c){$c.name=ua(Nb,$c.name);return $c.position});Td[0].undoStart("copy-halo");ic.addMorph(bb);bb.refocus(Td);P.grab(bb.target);bb.target.onGrab({halo:bb,hand:P,isShiftDown:function(){return!1}});fd.forEach(function($c,Re){return Td[Re].globalPosition=$c});bb.alignWithTarget()}else{fd=Nb.globalPosition;var qe=Nb.copy();Nb.isComponent&&(qe.isComponent=!1,qe.withAllSubmorphsDoExcluding(function($c){$c!=
qe&&$c.master||delete $c._parametrizedProps},function($c){return $c.master&&$c!=qe}),qe.master=Nb);qe.name=ua(Nb,Nb.name);ic.addMorph(qe);qe.globalPosition=fd;qe.undoStart("copy-halo");P.grab(qe);ic.addMorph(bb);bb.visible=!1}}},{key:"stop",value:function(P){var ua=this.halo,bb=$jscomp.makeIterator(P.grabbedMorphs).next().value,Nb=P.findDropTarget(P.globalPosition,[ua.target],function(fd){return!fd.isHaloItem&&!fd.ownerChain().some(function(Td){return Td.isHaloItem})}),ic=ua.target.undoInProgress;
Na.disconnect(P,"update",this,"update");ic.addTarget(Nb);P.dropMorphsOn(Nb);ua.target.undoStop("copy-halo");ua.remove();P.world().showHaloFor(bb)}},{key:"onDragStart",value:function(P){this.init(P.hand)}},{key:"onDragEnd",value:function(P){this.stop(P.hand)}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var P=this,ua,bb,Nb,ic,fd,Td,qe,$c,Re,jf,We,Rf,gg,ac,Ng;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qf){switch(qf.nextAddress){case 1:ua=
P;bb=ua.halo;if(bb.nameHalo().nameHolders.find(function(rg){return rg.nameHolder===$world.focusedMorph}))return qf.return();Nb=bb.target;ic=bb.world();fd=Nb instanceof Na.MultiSelectionTarget;Td=Nb.globalBounds().topLeft();qe=fd?Nb.selectedMorphs:[Nb];$c=[];Re='<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>";bb.remove();qf.setCatchFinallyBlocks(2);
jf=$jscomp.makeIterator(qe);We=jf.next();case 4:if(We.done)return Re+="</body></html>",ac=JSON.stringify($c),qf.yield(P.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:Re},{type:"application/morphic",data:ac}]),8);Rf=We.value;return qf.yield(Na.createMorphSnapshot(Rf,{addPreview:!1,testLoad:!1}),7);case 7:gg=qf.yieldResult;gg.copyMeta={offset:Rf.worldPoint(Na.pt(0,0)).subPt(Td)};$c.push(gg);Re+=Rf.renderPreview();We=jf.next();qf.jumpTo(4);break;case 8:qf.leaveTryBlock(3);break;case 2:return Ng=
qf.enterCatchBlock(),ic.logError(Ng),qf.return();case 3:ic.addMorph(bb),bb.refocus(qe),bb.setStatusMessage("copied"),qf.jumpToEnd()}})}},{key:"onMouseUp",value:function(P){var ua=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){P.stop();return bb.yield(ua.copyToClipBoard(),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},
styleClasses:{defaultValue:["far","fa-clone"]}}}}],Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:40114,end:44148})})(Na.HaloItem);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ob=Va.hasOwnProperty("OriginHaloItem")&&"function"===typeof Va.OriginHaloItem?
Va.OriginHaloItem:Va.OriginHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"fill",get:function(){return Na.Color.white.interpolate(.2,this.borderColorTop)}},{key:"extent",get:function(){return Na.pt(15,15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",
value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(P){var ua=this.halo,bb=ua.target.origin,Nb=ua.target.worldPoint(bb);
P=ua.target.localize(Nb.addPt(P)).subPt(ua.target.scroll).subPt(bb);ua.target.adjustOrigin(ua.target.origin.addPt(P))}},{key:"onDragStart",value:function(P){this.init()}},{key:"onDragEnd",value:function(P){this.stop()}},{key:"onDrag",value:function(P){this.update(P.state.dragDelta)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},
draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?Na.componentAccent:Na.haloBlue}}}}}],Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:44150,end:45811})})(Na.HaloItem);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
ob=Va.hasOwnProperty("ResizeHandle")&&"function"===typeof Va.ResizeHandle?Va.ResizeHandle:Va.ResizeHandle=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"valueForPropertyDisplay",value:function(){var P=this.halo.target.extent,ua=P.y;return P.x.toFixed(1)+"x"+ua.toFixed(1)}},{key:"positionInHalo",value:function(){var P=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(Na.Rectangle.prototype.sides.includes(this.location)&&
(this.visible=!1),P=P.insetBy(-4));return P.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(P){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(P.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(P){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(P.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(P){this.init(P.position,P.isShiftDown())}},{key:"onDragEnd",
value:function(P){this.stop(P.isShiftDown())}},{key:"onDrag",value:function(P){this.update(P.position,P.isShiftDown(),P.isAltDown(),P.isCtrlDown());this.focus()}},{key:"init",value:function(P,ua){ua=void 0===ua?!1:ua;var bb=this.halo.target,Nb=bb.origin,ic=bb.position;bb=bb.extent;this.startPos=P;this.startBounds=ic.subPt(Nb).extent(bb);this.startOrigin=this.halo.target.origin;this.savedLayout=this.halo.layout;this.halo.layout=null;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();
P=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=Na.num.toRadians(P%45);this.halo.toggleDiagonal(ua,this.corner)}},{key:"update",value:function(P,ua,bb,Nb){ua=void 0===ua?!1:ua;bb=void 0===bb?!1:bb;Nb=void 0===Nb?!1:Nb;var ic=this.corner,fd=this.tfm;P=this.startPos.subPt(P);fd=fd.transformDirection(Na.pt(P.x,P.y));bb&&(fd=fd.griddedBy(Na.pt(10,10)));this.halo.updateBoundsFor(ic,ua,fd,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(ua,ic);this.updateAlignmentGuide(bb);
ua=[];ic=ic.toLowerCase();ic.includes("left")&&ua.push("left");ic.includes("top")&&ua.push("top");ic.includes("bottom")&&ua.push("bottom");ic.includes("right")&&ua.push("right");Na.showAndSnapToResizeGuides(this.halo.target,ua,!0,Nb,5,200)}},{key:"stop",value:function(P){P=this.halo;P.layout=this.savedLayout;P.state.activeButton=null;P.alignWithTarget();P.toggleDiagonal(!1);this.updateAlignmentGuide(!1);Na.removeSnapToGuidesOf(P.target)}},{key:"updateAlignmentGuide",value:function(P){var ua=this.halo.getSubmorphNamed("mesh");
if(P)return P=this.halo.target.extent,P=Na.pt(P.x%10,P.y%10),ua=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),P),this.focus(),ua;ua&&ua.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(P){0<P&&(P-=360);P=-8-(P/45).toFixed();0==P&&(P=8);return Na.arr.zip(Na.arr.rotate([["topLeft",
function(ua){return ua.negated()}],["topCenter",function(ua){return ua.withX(0).negated()}],["topRight",function(ua){return ua.withX(0).negated()}],["rightCenter",function(ua){return Na.pt(0,0)}],["bottomRight",function(ua){return Na.pt(0,0)}],["bottomCenter",function(ua){return Na.pt(0,0)}],["bottomLeft",function(ua){return ua.withY(0).negated()}],["leftCenter",function(ua){return ua.withY(0).negated()}]],P),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize",
"rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(P){var ua=this;if(!P.target)return[];var bb=P.target.getGlobalTransform().getRotation();return Na.arr.compact(this.getResizeParts(bb).map(function(Nb){var ic=$jscomp.makeIterator(Nb),fd=$jscomp.makeIterator(ic.next().value);Nb=fd.next().value;fd.next();fd.next();fd=$jscomp.makeIterator(ic.next().value);ic=fd.next().value;fd=fd.next().value;
return ua.for(P,Nb,fd,ic)})).map(function(Nb){return Nb.alignInHalo()})}},{key:"for",value:function(P,ua,bb,Nb){var ic="Resize "+ua;P=P.getSubmorphNamed(ic)||new this({name:ic,halo:P,corner:ua,tooltip:"Resize "+ua,extent:Na.pt(10,10),borderWidth:1,borderRadius:0,borderColor:P.target.isComponent?Na.componentAccent:Na.haloBlue,fill:Na.Color.white});return Object.assign(P,{nativeCursor:Nb,location:bb})}}],Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:45870,end:51168})})(Na.HaloItem);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ob=Va.hasOwnProperty("MenuHaloItem")&&"function"===typeof Va.MenuHaloItem?Va.MenuHaloItem:Va.MenuHaloItem=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,
fb,[{key:"onMouseDown",value:function(P){var ua=this,bb,Nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ic){if(1==ic.nextAddress)return bb=ua.halo.target,ua.halo.remove(),ic.yield(bb.menuItems(),2);Nb=ic.yieldResult;bb.world().openMenu(Nb).hasFixedPosition=ua.halo.hasFixedPosition;ic.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},
tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:51170,end:51692})})(Na.HaloItem);var td=Ea("M",function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ob=Va.hasOwnProperty("MorphHighlighter")&&
"function"===typeof Va.MorphHighlighter?Va.MorphHighlighter:Va.MorphHighlighter=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,
this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(P){this.layoutHalo&&
this.layoutHalo.handleDrop(P)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Na.Color.orange.withA(.3)},
borderWidth:{defaultValue:2},borderColor:{defaultValue:Na.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},highlightedSides:{defaultValue:[],set:function(P){var ua=this;this.setProperty("highlightedSides",P);this.submorphs=P.map(function(bb){return{type:"ellipse",isHaloItem:!0,fill:Na.Color.orange,center:ua.innerBounds()[bb]()}});this.addMorph({type:"label",name:"name tag",padding:Na.Rectangle.inset(5,5,5,5),fontColor:Na.Color.white,fill:Na.Color.orange,
borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(P){P=void 0===P?$world:P;var ua=P._morphHighlighters,bb;for(bb in ua)ua[bb].remove();delete P._morphHighlighters}},{key:"for",value:function(P,ua,bb,Nb){bb=void 0===bb?!1:bb;Nb=void 0===Nb?[]:Nb;var ic=P._morphHighlighters=P._morphHighlighters||{};Na.properties.forEachOwn(ic,
function(fd,Td){return Td.alignWithHalo()});if(!ua||ua.ownerChain().find(function(fd){return fd.isHaloItem}))return null;ic[ua.id]=ic[ua.id]||new this({targetId:ua.id,halo:P,showLayout:bb});P.addMorph(ic[ua.id]);ic[ua.id].highlightedSides=Nb;return ic[ua.id]}},{key:"interceptDrop",value:function(P,ua,bb){(P=P._morphHighlighters=P._morphHighlighters||{},P[ua.id])&&P[ua.id].handleDrop(bb)}}],Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:51881,end:55492})}(Na.Morph));Na.MorphHighlighter=td;Na.MorphHighlighter=td;Na.MorphHighlighter=td;var Ib=Ea("I",function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ob=Va.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof Va.InteractiveMorphSelector?Va.InteractiveMorphSelector:Va.InteractiveMorphSelector=function(P){P&&
P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:Symbol.for("lively-instance-initialize"),value:function(P,ua,bb){P=void 0===P?$world:P;this.controllingMorph=void 0===ua?null:ua;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=P;this.filterFn=bb;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var P=Na.promise.deferred();P.promise.resolve=P.resolve;this.whenDone=
P.promise;this.selectorMorph=Na.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();Na.connect(this.world.firstHand,"position",this,"scanForTargetAt");Na.once(this.selectorMorph,"onMouseDown",this,"selectTarget");Na.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var P=this.world.firstHand.globalPosition;this.selectorMorph.center=P;this.selectorMorph.focus();
var ua=this.selectorMorph.morphBeneath(P),bb,Nb=this.possibleTarget,ic=this.controllingMorph,fd=this.filterFn,Td=this.world,qe=this.morphHighlighter;for(qe==ua?ua=qe.morphBeneath(P):ua&&ua.isEpiMorph&&(ua=ua.morphBeneath(P));ua&&(bb=[ua].concat($jscomp.arrayFromIterable(ua.ownerChain())).find(function($c){return!$c.visible}));)ua=bb=bb.morphBeneath(P);if(ua&&fd&&!fd(ua))for(;ua&&![ua].concat($jscomp.arrayFromIterable(ua.ownerChain())).find(fd);)ua=ua.morphBeneath(P);!ua||ua==Nb||ic&&ua.ownerChain().includes(ic.getWindow())||
(qe&&qe.deactivate(),(this.possibleTarget=Nb=ua)&&!Nb.isWorld&&(P=this.morphHighlighter=Na.MorphHighlighter.for(Td,ua))&&P.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){Na.MorphHighlighter.removeHighlighters(this.world);Na.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"InteractiveMorphSelector"}},{key:"selectMorph",value:function(P,ua,bb){P=new this(P,ua,bb);P.selectNewTarget();return P.whenDone}}],Va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:55501,end:58256})}(void 0));Na.InteractiveMorphSelector=Ib;Na.InteractiveMorphSelector=
Ib;Na.InteractiveMorphSelector=Ib;Na.default=Xd;var jc=lively.FreezerRuntime.recorderFor("lively.halos/markers.js");jc.show=rc;jc.showRect=function(fb,Va,ob){var P=jc.BoundsMarker.highlightBounds(Va);return ob?jc.showInLoop(fb,P,Va):jc.showThenHide(fb,P)};jc.showInLoop=function(fb,Va,ob){var P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ua){switch(ua.nextAddress){case 1:return jc.showThenHide(fb,Va,!1),ua.yield(jc.promise.delay(300),2);case 2:P=!1,jc.once(fb,"onMouseDown",function(){return P=
!0});case 3:if(P){ua.jumpTo(4);break}return ua.yield(Va.retract(ob),3);case 4:Va.fadeOut(2E3),ua.jumpToEnd()}})};jc.showThenHide=function(fb,Va,ob){ob=void 0===ob?3:ob;if(fb){var P=Array.isArray(Va)?Va:[Va];P.forEach(function(ua){return fb.addMorph(ua)});ob&&setTimeout(function(){return P.forEach(function(ua){return ua.fadeOut(2E3)})},1E3*ob);return Va}};jc.showLine=function(fb,Va,ob){ob=void 0===ob?3E3:ob;var P=Va.start;Va=Va.end.subPt(P);var ua=fb.addMorph({position:P,rotation:Va.theta(),border:{width:1,
color:jc.Color.red},width:Va.fastR(),height:0});ob&&setTimeout(function(){return ua.fadeOut()},ob);return ua};jc.showConnector=xd;jc.obj=Kd;jc.promise=Bd;jc.string=Bc;jc.pt=Kb;jc.Color=lc;jc.Rectangle=cc;jc.rect=rd;jc.morph=$b;jc.easings=gb;jc.Path=Nc;jc.Icon=af;jc.Morph=Qd;jc.MorphicEnv=rb;jc.connect=Pb;jc.once=Od;jc.disconnect=Xc;jc.show=rc;jc.show=rc;(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),ob=Va.hasOwnProperty("BoundsMarker")&&"function"===typeof Va.BoundsMarker?
Va.BoundsMarker:Va.BoundsMarker=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:Symbol.for("lively-instance-initialize"),value:function(){sb._get(Object.getPrototypeOf(ob.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:jc.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",get:function(){return!0}},{key:"markerLength",value:function(P){P=
P.insetBy(-2);P=Math.min(P.width,P.height);return Math.max(4,Math.floor(10>P/10?P/2-5:P/10))}},{key:"createMarkerEdge",value:function(){return jc.morph({fill:jc.Color.red,reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var P=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),ua=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),bb=this.topRightH||(this.topRightH=this.addMorph(this.createMarkerEdge())),Nb=this.topRightV||(this.topRightV=
this.addMorph(this.createMarkerEdge())),ic=this.bottomRightH||(this.bottomRightH=this.addMorph(this.createMarkerEdge())),fd=this.bottomRightV||(this.bottomRightV=this.addMorph(this.createMarkerEdge())),Td=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),qe=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[P,ua,bb,Nb,ic,fd,Td,qe]}},{key:"alignWithMorph",value:function(P){return this.alignWithBounds(P.globalBounds().translatedBy($world.scroll.negated()))}},
{key:"alignWithBounds",value:function(P){this.alignWithRect(P.insetBy(-20));return this.alignWithRect(P,!0)}},{key:"alignWithRect",value:function(P,ua){var bb=this.ensureMarkerCorners(),Nb=this.markerLength(P),ic=[P.topLeft().addXY(0,0).extent(jc.pt(Nb,5)),P.topLeft().addXY(0,0).extent(jc.pt(5,Nb)),P.topRight().addXY(-Nb,0).extent(jc.pt(Nb,5)),P.topRight().addXY(-5,0).extent(jc.pt(5,Nb)),P.bottomRight().addXY(-5,-Nb).extent(jc.pt(5,Nb)),P.bottomRight().addXY(-Nb,-5).extent(jc.pt(Nb,5)),P.bottomLeft().addXY(0,
-5).extent(jc.pt(Nb,5)),P.bottomLeft().addXY(0,-Nb).extent(jc.pt(5,Nb))];bb.forEach(function(fd,Td){return fd.setBounds(ic[Td])});ua&&(this.adjustOrigin(P.center()),this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(P){var ua=this,bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nb){if(1==Nb.nextAddress)return Nb.yield(ua.animate({scale:Math.max(30/P.width,1.05)}),2);bb=ua.center;return Nb.yield(ua.animate({center:bb,
scale:1,duration:300,easing:jc.easings.inOutExpo}),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(P){return(new this).alignWithMorph(P)}},{key:"highlightBounds",value:function(P){return(new this).alignWithBounds(P)}}],Va,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:2261,end:5920})})(jc.Morph);Xd=Ea("S",function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),ob=Va.hasOwnProperty("StatusMessage")&&"function"===typeof Va.StatusMessage?Va.StatusMessage:Va.StatusMessage=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"relayout",value:function(){this.title=jc.string.truncate(this.message,(this.width/15).toFixed(),
"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},{key:"setMessage",value:function(P,ua){this.message=P;this.color=ua}},{key:"slideTo",value:function(P){var ua=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return ua.sliding=ua.animate({position:P,duration:500}),bb.yield(ua.sliding,2);ua.sliding=!1;bb.jumpToEnd()})}},{key:"expand",value:function(){var P=this,ua,bb,Nb,ic;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fd){if(1==
fd.nextAddress)return P.expandable?P.sliding?fd.yield(P.sliding,2):fd.jumpTo(2):fd.return();ua=P.world();if(!ua||P.isMaximized)return fd.return();P.isMaximized=!0;P.stayOpen=!0;bb=P.getSubmorphNamed("message text");bb.lineWrapping=!1;Object.assign(bb,{clipMode:"auto",fixedWidth:!0,selectable:!0});P.expandedContent&&(bb.value=P.expandedContent);bb.fit();Nb=bb.textBounds().extent();ic=ua.visibleBounds();Nb.y>ic.extent().y&&(Nb.y=ic.extent().y-20);Nb.x>ic.extent().x&&(Nb.x=ic.extent().x-20);Nb=P.extent.maxPt(Nb);
P.animate({extent:Nb,center:ic.center(),duration:200});P.relayout();P.focus();fd.jumpToEnd()})}},{key:"fit",value:function(){var P=this.getSubmorphNamed("message text");P&&(this.extent=jc.pt(100,35).maxPt(P.textBounds().extent()),this.relayout())}},{key:"focus",value:function(){var P=this.getSubmorphNamed("message text");P&&P.focus()}},{key:"onMouseUp",value:function(P){this.expand()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:jc.pt(200,
100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(P){this.setProperty("message",P);var ua=this.getSubmorphNamed("message text");if(ua){ua.value=P;var bb=ua.documentEndPosition;bb.row>this.maxLines&&(ua.replace({start:{row:this.maxLines,
column:0},end:bb},"...\n"),this.expandedContent||(this.expandedContent=P));bb=ua.documentEndPosition;0!==bb.column&&ua.insertText("\n",bb)}}},title:{isStyleProp:!0,derived:!0,set:function(P){this.getSubmorphNamed("message title").value=P},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(P){this.get("message icon").fontColor=P;this.get("message icon")._parametrizedProps&&
(this.get("message icon")._parametrizedProps.fontColor=P)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[{name:"message icon",type:"label",value:jc.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},{name:"message title",type:"label"},{name:"close button",type:"button"}];jc.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");jc.connect(this,"extent",this,"relayout")}}}}}],Va,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:5964,end:10242})}(jc.Morph));jc.StatusMessage=Xd;jc.StatusMessage=Xd;jc.StatusMessage=Xd;var tb=Ea("b",function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),ob=Va.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof Va.StatusMessageForMorph?Va.StatusMessageForMorph:Va.StatusMessageForMorph=function(P){P&&P[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"alignAtBottomOf",value:function(P){var ua=this.world();ua&&(this.bringToFront(),this.fit(),this.width=P.bounds().width,this.relayout(),P.world()&&(this.position=P.owner.worldPoint(P.bounds().bottomLeft())),P=ua.visibleBounds(),P=this.bounds().top()+this.height-P.bottom(),0<P&&this.moveBy(jc.pt(0,-P)))}},{key:"onMouseUp",value:function(P){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessageForMorph"}},
{key:"properties",get:function(){return{slidable:{defaultValue:!1},renderOnGPU:{defaultValue:!0},removeOnTargetMorphChange:{defaultValue:!0},targetMorph:{defaultValue:null,get:function(){var P=this.getProperty("targetMorph");return P&&$world.getMorphWithId(P)},set:function(P){this.setProperty("targetMorph",P?P.id:null);this.alignAtBottomOf(P)}},expandable:{after:["submorphs"],set:function(P){this.setProperty("expandable",P);if(P){var ua=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",
type:"button"});jc.connect(ua,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&(this.getSubmorphNamed("expand button").remove(),jc.disconnect(ua,"fire",this,"expand"))}}}}}],Va,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10467,end:12318})}(jc.StatusMessage));jc.StatusMessageForMorph=
tb;jc.StatusMessageForMorph=tb;jc.StatusMessageForMorph=tb;jc.showConnector=xd;jc.showConnector=xd;var Sc=lively.FreezerRuntime.recorderFor("lively.ide/index.js");Sc.info="import via sub modules";Sc.info="import via sub modules";Sc.info="import via sub modules";var vd=Ea("v",{});Sc.valueWidgets=vd;Sc.valueWidgets=vd;Sc.valueWidgets=vd;var nb=Ea("p",{});Sc.popovers=nb;Sc.popovers=nb;Sc.popovers=nb;var vb=lively.FreezerRuntime.recorderFor("lively.components/popup.js");vb.Morph=Qd;vb.VerticalLayout=
Sa;vb.StyleSheet=Rd;vb.Icon=af;vb.CustomLayout=Ua;vb.Color=lc;vb.rect=rd;vb.pt=Kb;vb.connect=Pb;vb.Path=Kc;vb.duration=300;Sc=Ea("P",function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),ob=Va.hasOwnProperty("Popover")&&"function"===typeof Va.Popover?Va.Popover:Va.Popover=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"relayout",value:function(P){var ua=this.get("body"),
bb=this.get("arrow"),Nb=this.get("close button");bb=bb.height;P?(ua.animate({topCenter:vb.pt(0,bb),duration:200}),Nb.animate({topRight:ua.topRight.addXY(8,-8),duration:200})):(ua.topCenter=vb.pt(0,bb),Nb.topRight=ua.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master=
{auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,after:["submorphs"],defaultValue:{extent:vb.pt(200,200),fill:vb.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},get:function(){return this.get("body").submorphs[0]},set:function(P){var ua=this;this.get("body").addMorph(P);this.whenRendered().then(function(){return ua.relayout()})}},submorphs:{initialize:function(){var P=this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:vb.pt(0,
0),borderColor:vb.Color.transparent,vertices:[vb.pt(-10,0),vb.pt(0,-15),vb.pt(10,0)]},{name:"body"},{name:"close button",type:"button",label:Object.assign(vb.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",fill:null,extent:vb.pt(16,16),borderColor:vb.Color.transparent}];var ua=$jscomp.makeIterator(this.submorphs);ua.next();var bb=ua.next().value;ua=ua.next().value;vb.connect(ua,"fire",this,"close");vb.connect(bb,"extent",this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return P.animated=
!0},1E3)}}}}}],Va,{pathInPackage:function(){return"popup.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:247,end:2617})}(vb.Morph));vb.Popover=Sc;vb.Popover=Sc;vb.Popover=Sc;var yb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");yb.Morph=Qd;yb.TilingLayout=cb;yb.morph=$b;yb.Label=Zc;yb.HorizontalLayout=ad;yb.Icon=
af;yb.InputLine=ab;yb.config=qb;yb.connect=Pb;yb.signal=Dc;yb.Color=lc;yb.LinearGradient=Ic;yb.pt=Kb;yb.rect=rd;yb.num=yc;yb.obj=Kd;yb.popovers=nb;yb.ValueScrubber=Zb;yb.Popover=Sc;(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ob=Va.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof Va.ContextSensitiveWidget?Va.ContextSensitiveWidget:Va.ContextSensitiveWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return sb(ob,fb,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ContextSensitiveWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:yb.Color.transparent},isSelected:{defaultValue:"false",set:function(P){this.setProperty("isSelected",P);this.fontColor=P?yb.Color.white:yb.Color.black}},layout:{initialize:function(){this.layout=new yb.HorizontalLayout}},context:{serialize:!1}}}}],Va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,end:2441})})(yb.Morph);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ob=Va.hasOwnProperty("ShortcutWidget")&&"function"===typeof Va.ShortcutWidget?Va.ShortcutWidget:Va.ShortcutWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,
fb,[{key:"onMouseDown",value:function(P){this.openPopover()}},{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){P.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],set:function(P){this.setProperty("title",P);this.getSubmorphNamed("valueString").value=P}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,
set:function(P){this.submorphs.forEach(function(ua){return ua.fontColor=P})}},submorphs:{initialize:function(){this.submorphs=[yb.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],fontSize:15,padding:yb.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:yb.rect(0,0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],Va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2443,end:3793})})(yb.ContextSensitiveWidget);nb=function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ob=Va.hasOwnProperty("LayoutWidget")&&"function"===typeof Va.LayoutWidget?Va.LayoutWidget:Va.LayoutWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return sb(ob,fb,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}},{key:"openPopover",value:function(){var P=this,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return ua=new yb.popovers.LayoutPopover({hasFixedPosition:!!P.ownerChain().find(function(Nb){return Nb.hasFixedPosition}),container:P.context}),bb.yield(ua.fadeIntoWorld(P.globalBounds().center()),2);yb.connect(ua,"layoutChanged",
P,"layoutChanged");yb.signal(P,"openWidget",ua);bb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutWidget"}},{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],Va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3802,end:4623})}(yb.ShortcutWidget);yb.LayoutWidget=nb;yb.LayoutWidget=nb;yb.LayoutWidget=nb;Sc=function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ob=Va.hasOwnProperty("ColorWidget")&&"function"===typeof Va.ColorWidget?Va.ColorWidget:Va.ColorWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"relayout",
value:function(P){P?this.submorphs=this.color?this.color.isGradient?this.renderGradientValue():this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var P=this.color;if(2*P.stops.length==this.submorphs.length-3){var ua;for(ua in this.color.stops){var bb=P.stops[ua];var Nb=bb.color,ic=bb.offset,fd=$jscomp.makeIterator(this.submorphs[2+2*ua].submorphs).next().value;bb=this.submorphs[3+
2*ua];fd.fill=Nb;bb.value=(100*ic).toFixed()+"%"+(ua<P.stops.length-1?",":"")}}else this.submorphs=this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=
yb.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:yb.pt(15,15),fill:yb.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:yb.pt(5,7.5),fill:yb.Color.white,borderColor:yb.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[yb.pt(0,0),yb.pt(10,10)],borderColor:yb.Color.red}]}]},{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:yb.pt(15,
15),fill:yb.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:yb.pt(5,7.5),fill:this.color,borderColor:yb.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:yb.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var P=this.color,ua=[{type:"label",padding:yb.rect(0,0,5,0),value:"linearGradient"==P.type?yb.num.toDegrees(P.vectorAsAngle()).toFixed()+"\u00b0,":""}],bb;
for(bb in P.stops){var Nb=P.stops[bb],ic=Nb.color;Nb=Nb.offset;ua.push({extent:yb.pt(this.fontSize,this.fontSize),fill:yb.Color.transparent,layout:new yb.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:ic}]});ua.push({type:"label",padding:yb.rect(0,0,5,0),value:(100*Nb).toFixed()+"%"+(bb<P.stops.length-1?",":"")})}return ua}},{key:"onMouseDown",value:function(P){this.openFillEditor()}},{key:"update",value:function(P){this.color=P}},{key:"openFillEditor",value:function(){var P=
this,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return ua=new yb.popovers.FillPopover({hasFixedPosition:!!P.ownerChain().find(function(Nb){return Nb.hasFixedPosition}),handleMorph:P.context,fillValue:P.color,title:"Fill Control",gradientEnabled:P.gradientEnabled}),bb.yield(ua.fadeIntoWorld(P.globalBounds().center()),2);yb.connect(ua,"fillValue",P,"update");yb.signal(P,"openWidget",ua);bb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorWidget"}},
{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new yb.HorizontalLayout({direction:"centered"})}},selectionFontColor:{defaultValue:yb.Color.white},nonSelectionFontColor:{defaultValue:yb.Color.black},color:{defaultValue:yb.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],set:function(P){this.getProperty("isSelected")!=P&&(this.getSubmorphNamed("valueString").fontColor=P?this.selectionFontColor:this.nonSelectionFontColor,
this.setProperty("isSelected",P))}},submorphs:{after:["nonSelectionFontColor","selectionFontColor"],initialize:function(){yb.connect(this,"color",this,"relayout",{converter:function(P,ua){return(ua&&ua.isColor)!=(P&&P.isColor)}});this.relayout(!0)}}}}}],Va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:4687,end:10140})}(yb.ContextSensitiveWidget);yb.ColorWidget=Sc;yb.ColorWidget=Sc;yb.ColorWidget=Sc;var yd=function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ob=Va.hasOwnProperty("BooleanWidget")&&"function"===typeof Va.BooleanWidget?Va.BooleanWidget:Va.BooleanWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"onMouseDown",value:function(P){this.boolean=
!this.boolean}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BooleanWidget"}},{key:"properties",get:function(){return{fontFamily:{defaultValue:yb.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},boolean:{set:function(P){this.setProperty("boolean",P);this.value=yb.obj.safeToString(P);this.fontColor=this.boolean?yb.Color.green:yb.Color.red}}}}}],Va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10149,end:10634})}(yb.Label);yb.BooleanWidget=yd;yb.BooleanWidget=yd;yb.BooleanWidget=yd;var ae=Ea("N",function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ob=Va.hasOwnProperty("NumberWidget")&&"function"===typeof Va.NumberWidget?Va.NumberWidget:Va.NumberWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return sb(ob,fb,[{key:"onMouseDown",value:function(P){sb._get(Object.getPrototypeOf(ob.prototype),"onMouseDown",this).call(this,P);"up"==P.targetMorph.name&&this.increment();"down"==P.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return yb.obj.dissoc(sb._get(Object.getPrototypeOf(ob.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(P,ua){ua=void 0===ua?!0:ua;this.setProperty("number",ua?P/this.scaleFactor:P);yb.signal(this,"number",this.number);
this.relayout(ua)}},{key:"relayoutButtons",value:function(){var P=this.getSubmorphNamed("up"),ua=this.getSubmorphNamed("down");this.getSubmorphNamed("value");P.height=ua.height=(this.height-2)/2;P.width=ua.width=20}},{key:"onChange",value:function(P){sb._get(Object.getPrototypeOf(ob.prototype),"onChange",this).call(this,P);"extent"!=P.prop||this.autofit||this.relayout()}},{key:"relayout",value:function(P){var ua=this.getSubmorphNamed("value");ua&&(this.autofit?(P||(ua.value=this.number*this.scaleFactor),
ua.fit(),this.height=ua.height,this.width=ua.width+20):P||(ua.width=this.width-20),this.relayoutButtons(),P||(ua.value=yb.num.roundTo(this.number*this.scaleFactor,1),ua.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,ua.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,ua.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=this.min&&this.number<=this.min||
this.update(this.number-1/this.scaleFactor,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(P){this.setProperty("autofit",P);this.getSubmorphNamed("value").scaleToBounds=!P}},number:{defaultValue:0,after:["unit","autofit"],set:function(P){this.setProperty("number",P);this.relayout(!1)}},min:{defaultValue:-Infinity},
max:{defaultValue:Infinity},floatingPoint:{after:["number","submorphs"],set:function(P){this.setProperty("floatingPoint",P);this.get("value").floatingPoint=P},get:function(){var P=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return this.getProperty("floatingPoint")||1==this.scaleFactor&&P&&!!P[1]}},padding:{isStyleProp:!0,defaultValue:yb.rect(5,3,0,0),after:["submorphs"],set:function(P){this.setProperty("padding",P);this.getSubmorphNamed("value").padding=P}},extent:{defaultValue:yb.pt(70,25)},scaleFactor:{defaultValue:1,
get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(P){this.get("value").baseFactor=P}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/number field/light"}}},fontColor:{isStyleProp:!0,defaultValue:yb.Color.rgbHex("#0086b3"),set:function(P){this.setProperty("fontColor",P)}},isSelected:{set:function(P){this.getProperty("isSelected")!=
P&&(P?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",P))}},fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(P){this.setProperty("fontFamily",P)}},fontSize:{defaultValue:15,isStyleProp:!0,set:function(P){this.setProperty("fontSize",P)}},layout:{initialize:function(){this.layout=new yb.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},submorphs:{after:["min",
"max"],initialize:function(){var P=this;this.submorphs=[new yb.ValueScrubber({name:"value",unit:this.unit,floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),yb.Icon.makeLabel("sort-up",{name:"up"}),yb.Icon.makeLabel("sort-up",{name:"down",rotation:Math.PI})];yb.connect(this.get("value"),"scrub",this,"update");this.whenRendered().then(function(){return P.relayout()})}}}}}],Va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10643,end:16590})}(yb.Morph));yb.NumberWidget=ae;yb.NumberWidget=ae;yb.NumberWidget=ae;var He=function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ob=Va.hasOwnProperty("ShadowWidget")&&"function"===typeof Va.ShadowWidget?Va.ShadowWidget:Va.ShadowWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return sb(ob,fb,[{key:"onMouseDown",value:function(P){this.openPopover()}},{key:"openPopover",value:function(){var P=this,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return ua=new yb.popovers.ShadowPopover({hasFixedPosition:!!P.ownerChain().find(function(Nb){return Nb.hasFixedPosition}),shadowValue:P.shadowValue}),bb.yield(ua.fadeIntoWorld(P.globalBounds().center()),2);yb.connect(ua,"shadowValue",P,"shadowValue");yb.connect(P,"shadowValue",P,
"update");yb.signal(P,"openWidget",ua);bb.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},{key:"updateShadowDisplay",value:function(){var P=this.shadowValue,ua=P.blur,bb=P.spread,Nb=P.distance;P=P.color;var ic=
$jscomp.makeIterator(this.submorphs),fd=ic.next().value,Td=ic.next().value;Td=$jscomp.makeIterator(Td.submorphs).next().value;ic=ic.next().value;fd.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";Td.fill=P;ic.value=", "+ua+"px, "+Nb+"px, "+bb+"px)"}},{key:"initShadowDisplay",value:function(){var P=this.shadowValue,ua=P.blur,bb=P.spread,Nb=P.distance;P=P.color;this.submorphs=[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},
yb.morph({fill:yb.Color.transparent,extent:yb.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:yb.pt(this.fontSize,this.fontSize),position:yb.pt(2,2),fill:P,borderColor:yb.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+ua+"px, "+Nb+"px, "+bb+"px)"}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(P){this.setProperty("shadowValue",
P);this.renderShadowDisplay()}},fill:{defaultValue:yb.Color.transparent},nativeCursor:{defaultValue:"pointer"},fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(P){this.submorphs.forEach(function(ua){return ua.fontColor=P})}},isSelected:{defaultValue:!1,set:function(P){this.setProperty("isSelected",P);this.fontColor=P?yb.Color.white:yb.Color.black}},layout:{initialize:function(){this.layout=new yb.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],Va,{pathInPackage:function(){return"value-widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:16599,end:19722})}(yb.Morph);yb.ShadowWidget=He;yb.ShadowWidget=He;yb.ShadowWidget=He;var Fc=function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ob=Va.hasOwnProperty("PointWidget")&&"function"===typeof Va.PointWidget?Va.PointWidget:Va.PointWidget=function(P){P&&
P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"onMouseDown",value:function(P){this.openPopover()}},{key:"openPopover",value:function(){var P=this,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return ua=new yb.popovers.PointPopover({pointValue:P.pointValue,hasFixedPosition:!!P.ownerChain().find(function(Nb){return Nb.hasFixedPosition})}),bb.yield(ua.fadeIntoWorld(P.globalBounds().center()),
2);yb.connect(ua,"pointValue",P,"pointValue");yb.signal(P,"openWidget",ua);bb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(P){this.setProperty("isSelected",P);this.fontColor=P?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:yb.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:yb.Color.black},fontFamily:{defaultValue:yb.config.codeEditor.defaultStyle.fontFamily},
nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(P){var ua=yb.Color.rgbHex("#0086b3");this.setProperty("pointValue",P);this.textAndAttributes=["pt(",null,P.x.toFixed(),{fontColor:ua},",",{},P.y.toFixed(),{fontColor:ua},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],Va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:19731,end:21375})}(yb.Label);yb.PointWidget=Fc;yb.PointWidget=Fc;yb.PointWidget=Fc;var oe=function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ob=Va.hasOwnProperty("PaddingWidget")&&"function"===typeof Va.PaddingWidget?Va.PaddingWidget:Va.PaddingWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return sb(ob,fb,[{key:"onMouseDown",value:function(P){this.openPopover()}},{key:"openPopover",value:function(){var P=this,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return ua=new yb.popovers.RectanglePopover({hasFixedPosition:!!P.ownerChain().find(function(Nb){return Nb.hasFixedPosition}),rectangle:P.rectangle}),ua.relayout(),bb.yield(ua.fadeIntoWorld(P.globalBounds().center()),2);yb.connect(ua,"rectangle",P,"rectangle");yb.signal(P,"openWidget",
ua);bb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:yb.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(P){this.setProperty("isSelected",P);this.fontColor=P?yb.Color.white:yb.Color.black}},rectangle:{defaultValue:yb.rect(0),set:function(P){this.setProperty("rectangle",
P);this.value=yb.obj.safeToString(P)}}}}}],Va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:21384,end:22445})}(yb.Label);yb.PaddingWidget=oe;yb.PaddingWidget=oe;yb.PaddingWidget=oe;var ed=function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ob=Va.hasOwnProperty("IconWidget")&&
"function"===typeof Va.IconWidget?Va.IconWidget:Va.IconWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"onMouseDown",value:function(P){this.openPopover()}},{key:"openPopover",value:function(){var P=this,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return ua=new yb.popovers.IconPopover({hasFixedPosition:!!P.ownerChain().find(function(Nb){return Nb.hasFixedPosition})}),
bb.yield(ua.fadeIntoWorld(P.globalBounds().center()),2);yb.connect(ua,"select",P,"iconValue",{converter:function(Nb){return Nb&&yb.Icon.makeLabel(Nb).value},varMapping:{Icon:af}});yb.signal(P,"openWidget",ua);bb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:yb.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,get:function(){return this.value},
set:function(P){this.value=P||"No Icon"}}}}}],Va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22454,end:23385})}(yb.Label);yb.IconWidget=ed;yb.IconWidget=ed;yb.IconWidget=ed;var te=function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ob=Va.hasOwnProperty("StringWidget")&&
"function"===typeof Va.StringWidget?Va.StringWidget:Va.StringWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"truncate",value:function(P){return 200<P.length?P.slice(0,20)+"...":P}},{key:"onFocus",value:function(P){var ua=this,bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nb){if(1==Nb.nextAddress)return sb._get(Object.getPrototypeOf(ob.prototype),"onFocus",ua).call(ua,P),ua.readOnly?
Nb.return():ua.stringTooLong?Nb.yield(ua.world().editPrompt("edit string",{requester:ua,input:ua.stringValue}),2):(ua.borderColor=yb.Color.white.withA(.9),ua.textString=ua.stringValue,Nb.return());bb=Nb.yieldResult;if("string"===typeof bb)ua.onInput(bb);Nb.jumpToEnd()})}},{key:"onBlur",value:function(P){sb._get(Object.getPrototypeOf(ob.prototype),"onBlur",this).call(this,P);this.readOnly||(this.borderColor=yb.Color.transparent,this.onInput(this.textString))}},{key:"onInput",value:function(P){this.owner.focus();
yb.signal(this,"inputAccepted",P);this.stringValue=P}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:yb.Color.transparent},fontColor:{defaultValue:yb.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:yb.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:yb.rect(0,0,0,0)},fixedWidth:{defaultValue:!1},
fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(P){this.setProperty("stringValue",P);this.textString=this.truncate(P);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(P){this.setProperty("isSelected",P);this.fontColor=P?yb.Color.white:yb.Color.blue}}}}}],Va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23394,end:25345})}(yb.InputLine);yb.StringWidget=te;yb.StringWidget=te;yb.StringWidget=te;yb.valueWidgets=vd;Object.assign(yb.valueWidgets,{NumberWidget:ae,StringWidget:te,IconWidget:ed,PaddingWidget:oe,ShadowWidget:He,PointWidget:Fc,BooleanWidget:yd,LayoutWidget:nb,ColorWidget:Sc});var wa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");wa.Ellipse=
kc;wa.Icon=af;wa.Morph=Qd;wa.Path=Nc;wa.Text=nd;wa.HorizontalLayout=ad;wa.VerticalLayout=Sa;wa.morph=$b;wa.Color=lc;wa.pt=Kb;wa.rect=rd;wa.Rectangle=cc;wa.arr=Cc;wa.connect=Pb;wa.disconnect=Xc;wa.LabeledCheckBox=Rb;wa.DropDownSelector=ma;wa.Button=Ia;wa.Menu=W;wa.NumberWidget=ae;wa.InteractiveMorphSelector=Ib;wa.easings=gb;(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ob=Va.hasOwnProperty("AxisHalo")&&"function"===typeof Va.AxisHalo?Va.AxisHalo:Va.AxisHalo=function(P){P&&
P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:Symbol.for("lively-instance-initialize"),value:function(P){var ua=P.halo;P=P.targetAxis;sb._get(Object.getPrototypeOf(ob.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{fill:wa.Color.transparent,halo:ua,targetAxis:P,container:ua.container});this.initialize()}},{key:"initialize",value:function(){this.setBounds(this.fetchBounds());this.minSlider=
this.minSlider();this.axisMenu=this.axisMenu();this.proportionSlider=this.proportionSlider();this.proportionSlider.addMorph(this.minSlider);this.submorphs=[this.proportionSlider,this.axisMenu];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(P){this._forceMenuHidden=P;this.axisMenu.visible=!P}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},
{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(P){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var P=this,ua=this,bb=this.proportionViewer();return this.halo.addGuide(new wa.Morph({nativeCursor:this.getResizeCursor(),
fill:wa.Color.transparent,submorphs:[this.devider(),bb],alignWithTarget:function(){this.setBounds(ua.getProportionSliderBounds(this))},onDragStart:function(){bb.visible=!0},onDrag:function(Nb){P.adjustStretch(P.getDelta(Nb));P.halo.alignWithTarget()},onDragEnd:function(){bb.visible=!1}}))}},{key:"devider",value:function(){return new wa.Morph({visible:!this.lastAxis,fill:wa.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var P=
this,ua=this,bb=this.minSpaceVisualizer(),Nb=this.minViewer();return this.halo.addGuide(new wa.Ellipse({nativeCursor:this.getResizeCursor(),fill:wa.Color.green,extent:wa.pt(10,10),visible:!1,submorphs:[bb,Nb],becomesActiveOnHover:!0,alignWithTarget:function(){this.position=ua.getMinSliderPosition()},requestToShow:function(){this.visible=!ua.targetAxis.fixed},requestToHide:function(){this.active?this.shouldHide=!0:this.visible=!1},onDragStart:function(){ua.forceMenuHidden=!0;Nb.visible=!0;this.active=
bb.visible=!0},onDrag:function(ic){P.targetAxis.min+=-P.getDelta(ic);P.halo.alignWithTarget()},onDragEnd:function(){ua.forceMenuHidden=!1;Nb.visible=!1;this.active=bb.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=!1)}}))}},{key:"minViewer",value:function(){var P=this;return this.viewer({position:this.getMinViewerPosition(),alignWithTarget:function(){this.textString="min: "+P.targetAxis.min.toFixed()+"px !"}})}},{key:"minSpaceBorder",value:function(){return new wa.Path(Object.assign({position:wa.pt(-1,
-1),borderStyle:"dashed",borderColor:wa.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var P=this,ua=this.minSpaceBorder();return this.halo.addGuide(new wa.Morph({fill:wa.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[ua],alignWithTarget:function(){this.extent=P.getMinSpaceExtent();this.topLeft=wa.pt(5,5)}}))}},{key:"axisMenu",value:function(){var P=this.lockButton(),ua=this.menuButton(),bb=this;return new wa.Morph({layout:this.getMenuLayout(),
submorphs:[P,ua],fill:wa.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt(bb.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var P=this;return this.halo.addGuide(new wa.Morph({fill:wa.Color.transparent,extent:wa.pt(25,25),submorphs:[{center:wa.pt(12.5,12.5),fill:wa.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){P.targetAxis.fixed?(this.fontColor=wa.Color.red,this.submorphs[0].styleClasses=
["fa","fa-lock"]):(this.fontColor=wa.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){P.targetAxis.fixed=!P.targetAxis.fixed;P.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var P=this,ua=this;return new wa.Morph({fill:wa.Color.transparent,extent:wa.pt(25,25),submorphs:[{fill:wa.Color.transparent,styleClasses:["fa","fa-cog"],center:wa.pt(12.5,12.5)}],onMouseDown:function(bb){ua.forceMenuVisible=!0;this.addMorph(bb.state.menu=
new wa.Menu({position:wa.pt(15,15),items:[["Remove "+ua.subject,function(){P.targetAxis.remove();P.halo.initGuides();P.halo.alignWithTarget()}],["Insert "+ua.subject+" before",function(){P.targetAxis.addBefore();P.halo.initGuides();P.halo.alignWithTarget()}],["Insert "+ua.subject+" after",function(){P.targetAxis.addAfter();P.halo.initGuides();P.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(P){var ua=P.position;P=P.alignWithTarget;return this.halo.addGuide(new wa.Text({styleClasses:["Halo"],
padding:wa.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:wa.Color.white,fill:wa.Color.black.withA(.5),position:ua,alignWithTarget:P,readOnly:!0}))}},{key:"proportionViewer",value:function(){var P=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString=P.targetAxis.length.toFixed(1)+"px"}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AxisHalo"}}],Va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:660,end:7979})})(wa.Morph);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ob=Va.hasOwnProperty("RowHalo")&&"function"===typeof Va.RowHalo?Va.RowHalo:Va.RowHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:Symbol.for("lively-instance-initialize"),
value:function(P){var ua=P.row;P=P.halo;sb._get(Object.getPrototypeOf(ob.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:P.target.row(ua),halo:P})}},{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(P){this.targetAxis.height+=P}},{key:"getDelta",value:function(P){return P.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return wa.pt(-45,this.axisOffset()+
10)}},{key:"fetchExtent",value:function(){return wa.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(P){return this.targetAxis.length>P.height?wa.pt(2,5):wa.pt(26,10)}},{key:"getMenuLayout",value:function(){return new wa.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return wa.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return wa.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",value:function(){return wa.pt(this.container.width+
45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:wa.pt(this.container.width+50,2),vertices:[wa.pt(0,1),wa.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return wa.pt(40,20)}},{key:"getProportionSliderBounds",value:function(P){return wa.pt(0,P.owner.height-5).extent(wa.pt(40,10))}},{key:"getDeviderBounds",value:function(){return wa.pt(15,4).extent(wa.pt(25,2))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RowHalo"}}],
Va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:7981,end:9208})})(wa.AxisHalo);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ob=Va.hasOwnProperty("ColumnHalo")&&"function"===typeof Va.ColumnHalo?Va.ColumnHalo:Va.ColumnHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:Symbol.for("lively-instance-initialize"),value:function(P){var ua=P.col;P=P.halo;sb._get(Object.getPrototypeOf(ob.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:P.target.col(ua),halo:P})}},{key:"subject",get:function(){return"column"}},{key:"adjustStretch",value:function(P){this.targetAxis.width+=P}},{key:"getDelta",value:function(P){return P.state.dragDelta.x}},{key:"axisOffset",
value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return wa.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return wa.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(P){return this.targetAxis.length>P.width?wa.pt(5,3):wa.pt(8,26)}},{key:"getMenuLayout",value:function(){return new wa.HorizontalLayout}},{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return wa.pt(20,
50)}},{key:"getMinSliderPosition",value:function(){return wa.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return wa.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:wa.pt(2,this.container.height+50),vertices:[wa.pt(1,0),wa.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return wa.pt(20,40)}},{key:"getProportionSliderBounds",value:function(P){return wa.pt(P.owner.width-5,0).extent(wa.pt(10,
40))}},{key:"getDeviderBounds",value:function(){return wa.pt(4,15).extent(wa.pt(2,25))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColumnHalo"}}],Va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:9210,end:10442})})(wa.AxisHalo);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
ob=Va.hasOwnProperty("CellGuide")&&"function"===typeof Va.CellGuide?Va.CellGuide:Va.CellGuide=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"menuItems",value:function(){var P=this,ua=wa.Icon.textAttribute("check-square-o"),bb=wa.Icon.textAttribute("square-o");ua[1].textStyleClasses.push("annotation");bb[1].textStyleClasses.push("annotation");bb[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",
null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?bb:ua)),function(){P.cellGroup.resize=!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?ua:bb)),function(){P.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new wa.Rectangle).sides),$jscomp.arrayFromIterable((new wa.Rectangle).corners)).map(function(Nb){return[[Nb,{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(P.cellGroup.align==Nb?ua:bb),["  ",null]),function(){return P.cellGroup.align=
Nb}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var Nb=P.cellGroup.morph;Nb&&(P.world().firstHand.grab(Nb),P.world().firstHand.longClickGrab=!0,Nb.position=wa.pt(0))}]]:[])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],Va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10444,end:11722})})(wa.Morph);(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ob=Va.hasOwnProperty("LayoutHalo")&&"function"===typeof Va.LayoutHalo?Va.LayoutHalo:Va.LayoutHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutHalo"}},
{key:"properties",get:function(){return{container:{},target:{},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:wa.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],Va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:11724,end:12137})})(wa.Morph);vd=Ea("G",function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ob=Va.hasOwnProperty("GridLayoutHalo")&&"function"===typeof Va.GridLayoutHalo?Va.GridLayoutHalo:Va.GridLayoutHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"previewDrop",value:function(P){1>P.length||(P=this.cellGuides.find(function(ua){return ua.fullContainsWorldPoint($world.firstHand.position)}),
P!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=P)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(P){var ua=this;this.currentCell&&P.whenRendered().then(function(){return ua.currentCell.cellGroup.morph=P})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();this.focus()}},{key:"optionControls",value:function(){var P=this.target,ua=new wa.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:wa.Color.transparent,
checked:P.compensateOrigin}),bb=new wa.LabeledCheckBox({label:"Resize Submorphs",fill:wa.Color.transparent,name:"fitToCell",checked:P.fitToCell});wa.connect(ua,"checked",P,"compensateOrigin");wa.connect(bb,"checked",P,"fitToCell");wa.connect(ua,"checked",this,"alignWithTarget");return[ua,bb]}},{key:"isLayoutHalo",get:function(){return!1}},{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());
this.extent=this.container.extent;this.addMissingGuides();wa.arr.reverse(this.guides).forEach(function(P){return P.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var P=this;wa.arr.withoutAll(this.target.cellGroups,this.guides.map(function(ua){return ua.cellGroup})).forEach(function(ua){return P.addMorph(P.cellGuide(ua))})}},{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",
value:function(){var P=this,ua=this.addMorph({fill:wa.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(bb){ua.addMorph(P.cellGuide(bb))});this.cellGuides=ua.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(P){P.isHaloItem=!0;this.guides.push(P);return P}},{key:"initRowGuides",value:function(){var P=this,ua=this;this.addGuide(this.addMorph(new wa.Morph({width:25,fill:wa.Color.gray.withA(.7),borderRadius:15,height:this.container.height,
topRight:wa.pt(-5,0),alignWithTarget:function(){this.height=ua.container.height}})));wa.arr.range(0,this.target.rowCount-1).forEach(function(bb){P.addMorph(new wa.RowHalo({row:bb,halo:P}))})}},{key:"initColumnGuides",value:function(){var P=this,ua=this;this.addGuide(this.addMorph(new wa.Morph({height:25,fill:wa.Color.gray.withA(.7),borderRadius:15,width:this.container.width,bottomLeft:wa.pt(0,-5),alignWithTarget:function(){this.width=ua.container.width}})));wa.arr.range(0,this.target.columnCount-
1).forEach(function(bb){P.addMorph(new wa.ColumnHalo({col:bb,halo:P}))})}},{key:"resizer",value:function(){var P=this;return this.addGuide(new wa.Morph({fill:wa.Color.transparent,extent:wa.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(ua){P.container.resizeBy(ua.state.dragDelta);P.alignWithTarget()},alignWithTarget:function(){this.bottomRight=P.extent}}))}},{key:"cellResizer",value:function(P,ua){var bb=this,Nb="topLeft"==ua?"bottomRight":"topLeft";return new wa.Ellipse({borderWidth:1,visible:!1,
borderColor:wa.Color.black,nativeCursor:"nwse-resize",removeCell:function(ic){P.disconnect(ic);bb.alignWithTarget()},addCell:function(ic){P.connect(ic);bb.alignWithTarget()},start:function(){this.fixpointCell=P[Nb];this.draggedDelta=P.bounds().partNamed(ua);this.debugMorph=bb.addMorph(new wa.Morph({fill:wa.Color.orange.withA(.5)}))},update:function(ic){var fd=this;this.draggedDelta=this.draggedDelta.addPt(ic);var Td=wa.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(Td);
bb.cells.forEach(function(qe){var $c=Td.intersection(qe.bounds()).area()/qe.bounds().area();P.includes(qe)&&.1>$c&&fd.removeCell(qe);!P.includes(qe)&&$c>1/3&&fd.addCell(qe)})},onDragEnd:function(ic){this.debugMorph.remove()},onDragStart:function(ic){this.start(ic.position)},onDrag:function(ic){this.update(ic.state.dragDelta)}})}},{key:"cellGuide",value:function(P){var ua=this,bb=this.cellResizer(P,"topLeft"),Nb=this.cellResizer(P,"bottomRight");return this.addGuide(new wa.CellGuide({cellGroup:P,bounds:P.bounds(),
fill:wa.Color.transparent,borderColor:wa.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[bb,Nb],onMouseDown:function(ic){this.becomeActive()},deactivate:function(){this.borderColor=wa.Color.orange;this.fill=wa.Color.transparent;this.submorphs.forEach(function(ic){ic.visible=!1})},becomeActive:function(){ua.guides.forEach(function(ic){ic.isCell&&ic.deactivate()});this.borderColor=wa.Color.rgbHex("#1565C0");this.fill=wa.Color.rgbHex("#1565C0").withA(.3);ua.addMorph(this.remove());
this.submorphs.forEach(function(ic){ic.visible=!0})},startPreview:function(ic){this.fill=wa.Color.orange.withA(.7)},stopPreview:function(ic){this.fill=wa.Color.transparent},onDrop:function(ic){var fd=$jscomp.makeIterator(ic.hand.grabbedMorphs).next().value;ic.hand.dropMorphsOn(ua.container);P.morph=fd},alignWithTarget:function(){P.bounds().isNonEmpty()?(this.setBounds(P.bounds()),bb.center=this.innerBounds().topLeft(),Nb.center=this.innerBounds().bottomRight()):(wa.arr.remove(ua.guides,this),this.remove())}}))}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:wa.Color.transparent},cells:{derived:!0,get:function(){return wa.arr.flatten(this.target.col(0).items.map(function(P){return P.row(0).items}))}},submorphs:{initialize:function(){this.initialize()}}}}}],Va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12146,end:19501})}(wa.LayoutHalo));wa.GridLayoutHalo=vd;wa.GridLayoutHalo=vd;wa.GridLayoutHalo=vd;nb=function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ob=Va.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof Va.TilingLayoutHalo?Va.TilingLayoutHalo:Va.TilingLayoutHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return sb(ob,fb,[{key:"remove",value:function(){sb._get(Object.getPrototypeOf(ob.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(P){}},{key:"removePreviews",value:function(){this.previews.forEach(function(P){return P.clear()})}},{key:"previewDrop",value:function(P){var ua=this;0<this.previews.length||(this.previews=P.map(function(bb){return ua.container.addMorph({type:wa.DropPreview,
bounds:bb.bounds()})}),this.previews.forEach(function(bb){bb.step()}))}},{key:"updateSpacing",value:function(P){this.target.spacing=P}},{key:"updateAxis",value:function(P){this.target.axis=P}},{key:"updateAlign",value:function(P){this.target.align=P}},{key:"optionControls",value:function(){var P=this.target,ua=new wa.DropDownSelector({borderRadius:2,padding:3,selectedValue:P.axis,values:["row","column"]}),bb=new wa.DropDownSelector({borderRadius:2,padding:3,selectedValue:P.align,values:["left","center"]});
P=new wa.NumberWidget({min:0,number:P.spacing,padding:wa.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:wa.Color.gray,unit:"px"});wa.connect(P,"update",this,"updateSpacing");wa.connect(bb,"update",this,"updateAlign");wa.connect(ua,"update",this,"updateAxis");var Nb={type:"label",padding:wa.rect(0,5,5,5),fill:wa.Color.transparent,fontColor:wa.Color.gray.darker(),readOnly:!0};return[[Object.assign({},Nb,{textString:"Submorph Spacing"}),P],[Object.assign({},Nb,{textString:"Tiling Align"}),bb],
[Object.assign({},Nb,{textString:"Tiling Axis"}),ua]].map(function(ic){return{submorphs:ic,fill:null,layout:new wa.HorizontalLayout({spacing:3})}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:wa.Color.transparent},previews:{defaultValue:[]}}}}],Va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19510,end:21708})}(wa.LayoutHalo);wa.TilingLayoutHalo=nb;wa.TilingLayoutHalo=nb;wa.TilingLayoutHalo=nb;(function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ob=Va.hasOwnProperty("DropPreview")&&"function"===typeof Va.DropPreview?Va.DropPreview:Va.DropPreview=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,
[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var P=this,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return ua=wa.easings.inOutQuad,bb.yield(P.animate({opacity:.5,duration:(P.pulseDuration-10)/2,easing:ua}),2);if(3!=bb.nextAddress)return bb.yield(P.animate({opacity:1,duration:(P.pulseDuration-10)/2,easing:ua}),3);P.stopped||P.step();bb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropPreview"}},
{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:wa.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:wa.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],Va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21710,end:22534})})(wa.Morph);nb=Ea("F",function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ob=Va.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof Va.FlexLayoutHalo?Va.FlexLayoutHalo:Va.FlexLayoutHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"handleDrop",value:function(P){}},{key:"previewDrop",
value:function(P){var ua=this;0<this.previews.length||(this.previews=P.map(function(bb){return ua.container.addMorph({type:wa.DropPreview,position:ua.container.localize(ua.world().firstHand.position),extent:bb.bounds().extent()})}),this.previews.forEach(function(bb){bb.step()}))}},{key:"remove",value:function(){sb._get(Object.getPrototypeOf(ob.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(P){return P.clear()})}},
{key:"onDrop",value:function(P){this.removePreviews();P.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",value:function(P){P&&(this.originalExtent=this.container.extent);this.target.autoResize=P;P||(this.container.extent=this.originalExtent||this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(P){this.target.resizeSubmorphs=P;this.alignWithTarget()}},
{key:"updateAlignmentPolicy",value:function(P){this.target.align=P}},{key:"updateDirectionPolicy",value:function(P){this.target.direction=P}},{key:"updateSpacing",value:function(P){this.target.spacing=P}},{key:"optionControls",value:function(){var P=this.target,ua=P.possibleAlignValues?{fill:wa.Color.transparent,layout:new wa.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new wa.DropDownSelector({name:"alignment",borderRadius:2,padding:3,
selectedValue:P.align,values:P.possibleAlignValues})]}:null,bb=P.possibleDirectionValues?{fill:wa.Color.transparent,layout:new wa.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},new wa.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:P.direction,values:P.possibleDirectionValues})]}:null,Nb=new wa.NumberWidget({fill:wa.Color.white,borderWidth:1,borderRadius:4,padding:wa.rect(5,4,0,0),borderColor:wa.Color.gray,
min:0,number:P.spacing,unit:"px"}),ic=new wa.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:wa.Color.transparent,checked:P.autoResize});P=new wa.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",alignCheckBox:"right",fill:wa.Color.transparent,checked:P.resizeSubmorphs});wa.connect(Nb,"update",this,"updateSpacing");wa.connect(ic,"checked",this,"updateAutoResizePolicy");wa.connect(P,"checked",this,"updateResizeSubmorphsPolicy");ua&&wa.connect(ua.submorphs[1],
"selectedValue",this,"updateAlignmentPolicy");bb&&wa.connect(bb.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[ic,P].concat($jscomp.arrayFromIterable([ua,bb].filter(Boolean)),[{fill:wa.Color.transparent,layout:new wa.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:wa.Color.gray.darker(),padding:wa.rect(0,5,5,5)},Nb]}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},
fill:{defaultValue:wa.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],Va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22543,end:26761})}(wa.LayoutHalo));wa.FlexLayoutHalo=nb;wa.FlexLayoutHalo=nb;wa.FlexLayoutHalo=nb;Sc=Ea("c",function(fb){var Va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
ob=Va.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof Va.ProportionalLayoutHalo?Va.ProportionalLayoutHalo:Va.ProportionalLayoutHalo=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sb(ob,fb,[{key:"handleDrop",value:function(P){}},{key:"onDrop",value:function(P){P.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",
value:function(P){var ua={};this.target.changeSettingsFor(P.submorph,(ua[P.axis]=P.policy,ua),!0)}},{key:"onSubmorphSettingsDragStart",value:function(P,ua){var bb=this;P.stop();var Nb=this.target.settingsFor(ua);ua="";for(var ic in Nb)ua+=ic+":"+Nb[ic]+" ";var fd=wa.morph({type:"label",value:ua,isLayoutable:!1});fd.wantsToBeDroppedOn=function(Td){return bb.target.layoutableSubmorphs.includes(Td)};fd.onBeingDroppedOn=function(Td,qe){fd.remove();if(Td=bb.target.layoutableSubmorphs.includes(qe)?qe:P.world.morphsContainingPoint(P.hand.position).find(function($c){return bb.target.layoutableSubmorphs.includes($c)}))bb.updateSubmorphProportionalLayoutSettings({policy:Nb.x,
axis:"x",submorph:Td}),bb.updateSubmorphProportionalLayoutSettings({policy:Nb.y,axis:"y",submorph:Td}),Td.show(),$world.setStatusMessage("layout settings applied")};P.hand.grab(fd)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var P=this,ua,bb,Nb,ic,fd,Td,qe,$c,Re,jf,We,Rf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gg){switch(gg.nextAddress){case 1:return ua=P.target.layoutableSubmorphs,P.env.eventDispatcher.isKeyPressed("Shift")?(Nb=ua.map(function(ac){return{isListItem:!0,
string:String(ac),value:ac}}),gg.yield($world.listPrompt("Select morph",Nb,{requester:P,onSelection:function(ac){return ac.show()}}),5)):gg.yield(wa.InteractiveMorphSelector.selectMorph(P.world(),P,function(ac){return ua.includes(ac)}),4);case 4:bb=gg.yieldResult;gg.jumpTo(3);break;case 5:ic=gg.yieldResult,fd=$jscomp.makeIterator(ic.selected),bb=fd.next().value;case 3:if(!bb)return gg.return();Td=P.state.popover.get("controlContainer");qe=Td.getAllNamed(/submorph config/);$c=["move","resize","scale",
"fixed"];Re=P.target.settingsFor(bb);qe.length||(Td.submorphs=[].concat($jscomp.arrayFromIterable(Td.submorphs),[{name:"submorph config X-Axis policy",position:wa.pt(0,P.height),fill:wa.Color.transparent,layout:new wa.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new wa.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:Re.x,values:$c})]},{name:"submorph config Y-Axis policy",position:wa.pt(0,
P.height),fill:wa.Color.transparent,layout:new wa.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new wa.DropDownSelector({name:"y-axis policy selector",borderRadius:2,padding:3,selectedValue:Re.y,values:$c})]},wa.morph({position:wa.pt(0,P.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));jf=Td.getSubmorphNamed("x-axis policy selector");We=Td.getSubmorphNamed("y-axis policy selector");Rf=Td.getSubmorphNamed("dragme");
wa.disconnect(jf,"selectedValue",P,"updateSubmorphProportionalLayoutSettings");wa.disconnect(We,"selectedValue",P,"updateSubmorphProportionalLayoutSettings");jf.selectedValue=Re.x;We.selectedValue=Re.y;wa.connect(Rf,"onDragStart",P,"onSubmorphSettingsDragStart",{updater:function(ac,Ng){return ac(Ng,bb)},varMapping:{submorph:bb}});wa.connect(jf,"selectedValue",P,"updateSubmorphProportionalLayoutSettings",{converter:function(ac){return{policy:ac,axis:"x",submorph:bb}},varMapping:{submorph:bb}});wa.connect(We,
"selectedValue",P,"updateSubmorphProportionalLayoutSettings",{converter:function(ac){return{policy:ac,axis:"y",submorph:bb}},varMapping:{submorph:bb}});gg.jumpToEnd()}})}},{key:"optionControls",value:function(P){this.state.popover=P;var ua=this.target;P=new wa.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:wa.Color.transparent,checked:ua.xAxisEnabled});ua=new wa.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:wa.Color.transparent,checked:ua.yAxisEnabled});
var bb=new wa.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(wa.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});wa.connect(P,"checked",this,"updateXAxisEnabled");wa.connect(ua,"checked",this,"updateYAxisEnabled");wa.connect(bb,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[bb]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},
fill:{defaultValue:wa.Color.transparent}}}}],Va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:26771,end:32465})}(wa.LayoutHalo));wa.ProportionalLayoutHalo=Sc;wa.ProportionalLayoutHalo=Sc;wa.ProportionalLayoutHalo=Sc;yd=lively.FreezerRuntime.recorderFor("lively.halos/index.js");yd.Halo=Gd;
yd.MorphHighlighter=td;yd.InteractiveMorphSelector=Ib;yd.StatusMessage=Xd;yd.StatusMessageForMorph=tb;yd.show=rc;yd.showConnector=xd;yd.ProportionalLayoutHalo=Sc;yd.GridLayoutHalo=vd;yd.FlexLayoutHalo=nb;yd.showAndSnapToGuides=Za;yd.removeSnapToGuidesOf=sa;yd.StatusMessage=Xd;yd.StatusMessage=Xd;yd.StatusMessageForMorph=tb;yd.StatusMessageForMorph=tb;yd.show=rc;yd.show=rc;yd.showConnector=xd;yd.showConnector=xd;yd.Halo=Gd;yd.Halo=Gd;yd.MorphHighlighter=td;yd.MorphHighlighter=td;yd.InteractiveMorphSelector=
Ib;yd.InteractiveMorphSelector=Ib;yd.ProportionalLayoutHalo=Sc;yd.ProportionalLayoutHalo=Sc;yd.GridLayoutHalo=vd;yd.GridLayoutHalo=vd;yd.FlexLayoutHalo=nb;yd.FlexLayoutHalo=nb;yd.showAndSnapToGuides=Za;yd.showAndSnapToGuides=Za;yd.removeSnapToGuidesOf=sa;yd.removeSnapToGuidesOf=sa;Gd=Object.freeze({__proto__:null,StatusMessage:Xd,StatusMessageForMorph:tb,show:rc,showConnector:xd,Halo:Gd,MorphHighlighter:td,InteractiveMorphSelector:Ib,ProportionalLayoutHalo:Sc,GridLayoutHalo:vd,FlexLayoutHalo:nb,showAndSnapToGuides:Za,
removeSnapToGuidesOf:sa,SvgStyleHalo:void 0});Ea("i",Gd);Ea("_",void 0)}}});