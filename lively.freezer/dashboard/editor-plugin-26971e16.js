System.register(["./__root_module__-cd530690.js","./index-cab7da24.js","./index-101f1e80.js"],function(Da){var zb,Rb,kc,dc,ke,hd,$d,md,Qc,xd,Od,ge,Ud,nd,Za,Cb,bc,ic,id,fe,Zb,rc,Lb,Gc,$c,ed,$b,ob,zc,Mc,Ja,Ra,ub,Mb,Ob,kb,ib,Jb,vc,sc,Uc,Xc,Q,fa,Ha;return{setters:[function(Qa){zb=Qa.C;Rb=Qa.ar;kc=Qa.a5;dc=Qa.a0;ke=Qa.a2;hd=Qa.am;$d=Qa.bg;md=Qa.aU;Qc=Qa.ap;xd=Qa.s;Od=Qa.aO;ge=Qa.bn;Ud=Qa.bo;nd=Qa.a6;Za=Qa.at;Cb=Qa.ao;bc=Qa.aq;ic=Qa.bp;id=Qa.bq;fe=Qa.a1;Zb=Qa.P;rc=Qa._;Lb=Qa.aW;Gc=Qa.ah;$c=Qa.ai;ed=
Qa.aj;$b=Qa.ak;ob=Qa.aA;zc=Qa.aZ;Mc=Qa.aw;Ja=Qa.an;Ra=Qa.a9;ub=Qa.br;Mb=Qa.L;Ob=Qa.bs;kb=Qa.b2;ib=Qa.bh;Jb=Qa.b1;vc=Qa.bt;sc=Qa.as},function(Qa){Uc=Qa.M;Xc=Qa.I;Q=Qa.v;fa=Qa.p},function(Qa){Ha=Qa.localInterface}],execute:function(){function Qa(Ga,bb){if(!0===bb)return bb;if(Ga.copyState)return Ga.copyState(bb);Ga={};for(var Gb in bb){var ba=bb[Gb];ba instanceof Array&&(ba=ba.concat([]));Ga[Gb]=ba}return Ga}function fc(Ga,bb,Gb){return Ga.startState?Ga.startState(bb,Gb):!0}function Nb(Ga,bb){return P.modes[Ga]=
bb}function ab(Ga){if("string"==typeof Ga&&P.mimeModes.hasOwnProperty(Ga))Ga=P.mimeModes[Ga];else if(Ga&&"string"==typeof Ga.name&&P.mimeModes.hasOwnProperty(Ga.name)){var bb=P.mimeModes[Ga.name];"string"==typeof bb&&(bb={name:bb});Ga=Object.assign({},bb,Ga);Ga.name=bb.name}else{if("string"==typeof Ga&&/^[\w\-]+\/[\w\-]+\+xml$/.test(Ga))return ab("application/xml");if("string"==typeof Ga&&/^[\w\-]+\/[\w\-]+\+json$/.test(Ga))return ab("application/json")}return"string"==typeof Ga?{name:Ga}:Ga||{name:"null"}}
function lc(Ga,bb){bb=P.resolveMode(bb);"string"===typeof bb&&(bb={name:bb});if(!bb.name)throw Error("parserConfig does not have a name of the mode to get");var Gb=P.modes[bb.name];if(!Gb)return lc(Ga,"text/plain");Ga=Object.assign({indentUnit:2},Ga);return Object.assign(Gb(Ga,bb),{name:bb.name})}function rd(Ga,bb){for(var Gb;Ga.innerMode;){Gb=Ga.innerMode(bb);if(!Gb||Gb.mode==Ga)break;bb=Gb.state;Ga=Gb.mode}return Gb||{mode:Ga,state:bb}}function Bd(Ga,bb){P.mimeModes[Ga]=bb}function ad(Ga,bb,Gb){}
function Xa(Ga,bb,Gb,ba,Ia,nb,xb){var Ic=Ga.editorPlugin._tokenizerValidBefore;Ic&&Ic.row>=Gb&&(Ic.row=Gb-1);var wc=P.linesToTokenize(Ga.document,Gb,ba,Ic);Ic=wc.lines;wc=wc.state;if(!Ic.length)return!1;wc=wc?P.copyState(bb,wc):P.startState(bb);for(var Dd=0;Dd<Ic.length;Dd++){var yd=Ic[Dd],zd=yd.row;zd>=Gb&&zd<=ba&&P.indentLine(Ga,bb,yd,wc,Ia,nb,xb);wc=P.tokenizeLine(bb,Ic[Dd],wc,function(){})}return!0}function Rc(Ga,bb,Gb,ba,Ia,nb,xb){bb=P.linesToTokenize(bb,Gb,ba,Ia);Gb=bb.lines;P.tokenizeLines(Ga,
Gb,bb.state,nb,xb);return Gb}function pb(Ga,bb,Gb,ba,Ia){var nb=[],xb,Ic=function(yd){return nb.push(xb=[])},wc=function(yd,zd,He,df,og,Jh,Oi){return xb.push(He,df,yd,og.current(),zd.localMode||Oi)};try{var Dd=P.visitDocumentTokens(Ga,bb,Gb,ba,Ia,Ic,wc)}catch(yd){nb.length=0,Dd=P.visitDocumentTokens(Ga,bb,Gb,ba,null,Ic,wc)}return{tokens:nb,lines:Dd}}function eb(Ga,bb,Gb,ba,Ia){null==bb&&(bb=Ga.search(/[^\s\u00a0]/),-1==bb&&(bb=Ga.length));ba=ba||0;for(Ia=Ia||0;;){var nb=Ga.indexOf("\t",ba);if(0>nb||
nb>=bb)return Ia+(bb-ba);Ia+=nb-ba;Ia+=Gb-Ia%Gb;ba=nb+1}}function hb(Ga){Ga=Ga.toLowerCase();for(var bb=0;bb<P.modeInfo.length;bb++){var Gb=P.modeInfo[bb];if(Gb.mime==Ga)return Gb;if(Gb.mimes)for(var ba=0;ba<Gb.mimes.length;ba++)if(Gb.mimes[ba]==Ga)return Gb}if(/\+xml$/.test(Ga))return hb("application/xml");if(/\+json$/.test(Ga))return hb("application/json")}function ac(Ga){for(var bb=0;bb<P.modeInfo.length;bb++){var Gb=P.modeInfo[bb];if(Gb.ext)for(var ba=0;ba<Gb.ext.length;ba++)if(Gb.ext[ba]==Ga)return Gb}}
function Wb(Ga){for(var bb=0;bb<P.modeInfo.length;bb++){var Gb=P.modeInfo[bb];if(Gb.file&&Gb.file.test(Ga))return Gb}bb=Ga.lastIndexOf(".");if(Ga=-1<bb&&Ga.substring(bb+1,Ga.length))return P.findModeByExtension(Ga)}function Fd(Ga){Ga=Ga.toLowerCase();for(var bb=0;bb<P.modeInfo.length;bb++){var Gb=P.modeInfo[bb];if(Gb.name.toLowerCase()==Ga)return Gb;if(Gb.alias)for(var ba=0;ba<Gb.alias.length;ba++)if(Gb.alias[ba].toLowerCase()==Ga)return Gb}}function Be(Ga){if(!Ga)return String(Ga);if(Array.isArray(Ga))return"["+
Ga.map(Be).join(",")+"]";if("symbol"===typeof Ga)return ce.printSymbol(Ga);try{return String(Ga)}catch(bb){return"Cannot print object: "+bb}}function Ie(Ga,bb){return!ce.arr.every(bb.map(function(Gb){return Ga[Gb]}),function(Gb){return ce.obj.equals(Gb,Ga&&Ga.valueOf())})}function Lf(Ga){if(ce.obj.isPrimitive(Ga))var bb=ce.string.print(Ga);else Array.isArray(Ga)?((bb=3<Ga.length)&&(Ga=Ga.slice(0,3)),Ga=ce.string.print(Ga),bb&&(Ga=Ga.slice(0,-1)+", ...]"),bb=Ga):bb=ce.string.print(Ga);bb=bb.replace(/\n/g,
"");500<bb.length&&(bb=bb.slice(0,20)+("...["+(bb.length-20)+' CHARS]"'));return bb}function fd(Ga){return Vc.Inspector.openInWindow({targetObject:Ga})}function ue(Ga,bb){return Vc.Inspector.openInWindow({remoteTarget:{code:Ga,evalEnvironment:bb}})}function Md(Ga,bb){function Gb(Ic){var wc=Ic.name,Dd=Ic.ownerChain(),yd=Ic.owner,zd=Ic.world(),He;Ic===nb&&(He=[xb]);zd===Ic&&(He=["$world"]);if(!He&&wc&&yd){yd===zd&&1===Vc.arr.count(Vc.arr.pluck(zd.submorphs,"name"),wc)&&(He=['$world.get("'+wc+'")']);
if(!He&&yd!=zd)for(zd=Dd.length-1;zd--;)if(1===Dd[zd].getAllNamed(wc).length){He=[].concat($jscomp.arrayFromIterable(Gb(Dd[zd])),['get("'+wc+'")']);break}He||(wc=[].concat($jscomp.arrayFromIterable(Gb(yd)),['get("'+wc+'")']),Vc.syncEval(wc.join("."),{context:nb}).value===Ic&&(He=wc))}He||(He=[xb+'.getMorphById("'+Ic.id+'")']);return He}bb=void 0===bb?{}:bb;var ba=Ga.world(),Ia=bb;bb=void 0===Ia.maxLength?10:Ia.maxLength;var nb=void 0===Ia.fromMorph?ba:Ia.fromMorph;if(nb===Ga)return"this";var xb=ba===
nb?"$world":"this";if(!(ba||Ga.name&&nb.get(Ga.name)===Ga))return"morph";ba=Gb(Ga);return ba.length>bb?'$world.getMorphWithId("'+Ga.id+'")':ba.join(".")}function Vb(Ga,bb,Gb){var ba=(bb=void 0===bb?"":bb)&&qf.arr.last(bb.split(".")).toLowerCase(),Ia="",nb=0,xb=Math.pow(2,19);if("string"===typeof Ga){if(Ga.length>xb)return null}else if(Ga.document.stringSize>xb)return null;if("string"===typeof Ga)Ia=Ga.slice(0,1E3);else for(Ga=$jscomp.makeIterator(Ga.document.lines),xb=Ga.next();!xb.done;xb=Ga.next()){var Ic=
xb.value;xb=Ic.stringSize;Ic=Ic.text;var wc=!0;1E3<nb+xb&&(wc=!1,xb=1E3-nb);Ia+=Ic.slice(0,xb)+(wc?"\n":"");nb+=xb;if(1E3<=nb)break}nb=$jscomp.makeIterator(qf.modeInfo);for(Ga=nb.next();!Ga.done;Ga=nb.next()){wc=Ga.value;xb=wc.contentTest;Ga=wc.mode;Ic=wc.ext;wc=wc.file;if("function"===typeof xb)try{if(xb(Ia))return Ga}catch(Dd){}if(wc&&wc instanceof RegExp&&wc.test(bb))return Ga;if(Ic)for(xb=$jscomp.makeIterator(Ic),Ic=xb.next();!Ic.done;Ic=xb.next())if(Ic.value===ba)return Ga}return Gb}Da({a:Bd,
d:Nb,r:ad});var sa=lively.FreezerRuntime.recorderFor("lively.ide/themes/default.js");sa.Color=zb;var Aa=function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/themes/default.js"),Gb=bb.hasOwnProperty("DefaultTheme")&&"function"===typeof bb.DefaultTheme?bb.DefaultTheme:bb.DefaultTheme=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rb(Gb,Ga,[{key:"background",get:function(){return sa.Color.white}},
{key:"default",get:function(){return{fontColor:"#333"}}},{key:"header",get:function(){return{fontSize:"110%",fontColor:"#6b94ee"}}},{key:"header-1",get:function(){return{fontSize:"135%",fontColor:"#6b94ee"}}},{key:"header-2",get:function(){return{fontSize:"125%",fontColor:"#6b94be"}}},{key:"header-3",get:function(){return{fontSize:"120%",fontColor:"#6b94be"}}},{key:"quote",get:function(){return{fontColor:"#090"}}},{key:"negative",get:function(){return{fontColor:"#d44"}}},{key:"positive",get:function(){return{fontColor:"#292"}}},
{key:"strong",get:function(){return{fontWeight:"bold"}}},{key:"em",get:function(){return{fontStyle:"italic"}}},{key:"link",get:function(){return{textDecoration:"underline"}}},{key:"strikethrough",get:function(){return{textDecoration:"line-through"}}},{key:"hr",get:function(){return{fontColor:"#999"}}},{key:"link",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},{key:"url",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},{key:"keyword",get:function(){return{fontColor:"#708"}}},
{key:"atom",get:function(){return{fontColor:"#219"}}},{key:"number",get:function(){return{fontColor:"#174"}}},{key:"def",get:function(){return{fontColor:"#22c"}}},{key:"variable",get:function(){return{fontColor:"#05a"}}},{key:"punctuation",get:function(){return{fontColor:"#05a"}}},{key:"property",get:function(){return{fontColor:"#222"}}},{key:"operator",get:function(){return{fontColor:"#05a"}}},{key:"variable-2",get:function(){return{fontColor:"#05a"}}},{key:"variable-3",get:function(){return{fontColor:"#085"}}},
{key:"comment",get:function(){return{fontColor:"#666"}}},{key:"string",get:function(){return{fontColor:"#181"}}},{key:"string-2",get:function(){return{fontColor:"#0B2"}}},{key:"meta",get:function(){return{fontColor:"#555"}}},{key:"qualifier",get:function(){return{fontColor:"#555"}}},{key:"builtin",get:function(){return{fontColor:"#30a"}}},{key:"bracket",get:function(){return{fontColor:"#997"}}},{key:"tag",get:function(){return{fontColor:"#170"}}},{key:"attribute",get:function(){return{fontColor:"#333"}}},
{key:"error",get:function(){return{backgroundColor:"#ff4c4c"}}},{key:"invalidchar",get:function(){return{backgroundColor:"#ff4c4c"}}},{key:"diff-file-header",get:function(){return{fontColor:sa.Color.white,fontWeight:"bold",backgroundColor:sa.Color.rgba(136,136,136,.7)}}},{key:"diff-hunk-header",get:function(){return{backgroundColor:sa.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"coord",get:function(){return{backgroundColor:sa.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"inserted",
get:function(){return{backgroundColor:"rgba(108,255,108, .3)"}}},{key:"deleted",get:function(){return{backgroundColor:"rgba(255,108,108, .3)"}}}],[{key:"className",get:function(){return"DefaultTheme"}},{key:"instance",get:function(){return this._instance||(this._instance=new this)}}],bb,{pathInPackage:function(){return"themes/default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:42,end:2867})}(void 0),Kb=Aa=sa.DefaultTheme;sa.default=Aa;var P=lively.FreezerRuntime.recorderFor("lively.ide/editor-modes.js");P.copyState=Qa;P.startState=fc;P.defineMode=Nb;P.resolveMode=ab;P.getMode=lc;P.innerMode=rd;P.defineMIME=Bd;P.registerHelper=ad;P.indentLines=Xa;P.indentLine=function(Ga,bb,Gb,ba,Ia,nb,xb){xb=Object.assign({indentWithTabs:!Ga.useSoftTabs,indentUnit:Ga.tabWidth,tabSize:4,ignoreFollowingText:!1},xb);null==Ia&&(Ia="add");"smart"==Ia&&(bb.indent||(Ia=
"prev"));var Ic=xb.tabSize,wc=Gb.text,Dd=P.countColumn(wc,null,Ic);Gb.modeState&&(Gb.modeState=null);var yd=wc.match(/^\s*/)[0];if(!nb&&!/\S/.test(wc)){var zd=0;Ia="not"}else if("smart"==Ia&&(zd=bb.indent(ba,xb.ignoreFollowingText?"":wc.slice(yd.length),wc),zd==P.passIndent||150<zd)){if(!nb)return;Ia="prev"}"prev"==Ia?zd=0<Gb.row?P.countColumn(Gb.prevLine().text,null,Ic):0:"add"==Ia?zd=Dd+xb.indentUnit:"subtract"==Ia?zd=Dd-xb.indentUnit:"number"==typeof Ia&&(zd=Dd+Ia);zd=Math.max(0,zd);bb="";ba=0;
if(xb.indentWithTabs)for(xb=Math.floor(zd/Ic);xb;--xb)ba+=Ic,bb+="\t";ba<zd&&(bb+=" ".repeat(zd-ba));if(bb!=yd)return Ga.replace({start:{row:Gb.row,column:0},end:{row:Gb.row,column:yd.length}},bb),!0};P.tokenizeLines=function(Ga,bb,Gb,ba,Ia){if(bb.length){Gb=Gb?P.copyState(Ga,Gb):P.startState(Ga);for(var nb=0;nb<bb.length;nb++){var xb=bb[nb];ba(xb);Gb=P.tokenizeLine(Ga,xb,Gb,Ia)}}};P.tokenizeLine=function(Ga,bb,Gb,ba){var Ia=bb.text;if(!Ia)return Gb;var nb=new P.StringStream(Ia,2);Gb=bb.modeState=
"function"===typeof Ga.copyState?Ga.copyState(Gb):P.copyState(Ga,Gb);bb.prevLine();for(Gb._string=Ia;!nb.eol();)Ia=Ga.token(nb,Gb),ba(Ia,Gb,nb.start,nb.pos,nb,bb,Ga),nb.start=nb.pos;return Gb};P.printTokens=function(Ga){for(var bb="",Gb=0;Gb<Ga.length;Gb+=5)bb+=Ga[Gb+0]+" => "+Ga[Gb+1]+" "+Ga[Gb+2]+" "+Ga[Gb+3]+" "+Ga[Gb+4].name+"\n";return bb};P.visitDocumentTokens=Rc;P.tokenizeDocument=pb;P.linesToTokenize=function(Ga,bb,Gb,ba){if(ba&&ba.row>=Gb)return{lines:[],state:null};bb=ba?Math.max(0,ba.row-
1):bb;var Ia=Ga.getLine(bb),nb=Ia.text;Ga=[Ia];ba=null;for(var xb=0,Ic;(Ic=Ia.prevLine())&&50>xb++;){Ia=Ic;if(Ia.modeState){ba=Ia.modeState;break}Ga.unshift(Ia)}if(!ba){for(var wc=Ia,Dd=Infinity;(Ic=Ia.prevLine())&&100>xb++;){Ia=Ic;if(Ia.modeState){ba=Ia.modeState;break}Ga.unshift(Ia);Ic=nb.match(/^\s*/)[0].length;if(0===Ic)break;Ic<Dd&&(Dd=Ic,wc=Ia)}!ba&&0<Dd&&(Ga=Ga.slice(Ga.indexOf(wc)))}if(Gb>bb)for(Ia=P.arr.last(Ga);bb<=Gb;bb++){Ia=Ia.nextLine();if(!Ia)break;Ga.push(Ia)}return{lines:Ga,state:ba}};
P.countColumn=eb;P.findModeByMIME=hb;P.findModeByExtension=ac;P.findModeByFileName=Wb;P.findModeByName=Fd;P.arr=kc;Aa=P.modes||{};P.modes=Aa;P.modes=Aa;P.modes=Aa;Aa=Da("p",{});P.passIndent=Aa;P.passIndent=Aa;P.passIndent=Aa;P.copyState=Qa;P.copyState=Qa;P.startState=fc;P.startState=fc;P.defineMode=Nb;P.defineMode=Nb;P.resolveMode=ab;P.resolveMode=ab;P.getMode=lc;P.getMode=lc;P.innerMode=rd;P.innerMode=rd;Aa={};P.mimeModes=Aa;P.mimeModes=Aa;P.mimeModes=Aa;P.defineMIME=Bd;P.defineMIME=Bd;P.registerHelper=
ad;P.registerHelper=ad;P.indentLines=Xa;P.indentLines=Xa;P.visitDocumentTokens=Rc;P.visitDocumentTokens=Rc;P.tokenizeDocument=pb;P.tokenizeDocument=pb;P.countColumn=eb;P.countColumn=eb;(function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/editor-modes.js"),Gb=bb.hasOwnProperty("StringStream")&&"function"===typeof bb.StringStream?bb.StringStream:bb.StringStream=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Rb(Gb,Ga,[{key:Symbol.for("lively-instance-initialize"),value:function(ba,Ia){this.reset(ba,Ia)}},{key:"reset",value:function(ba,Ia){this.pos=this.start=0;this.string=void 0===ba?"":ba;this.tabSize=void 0===Ia?2:Ia;this.lineStart=this.lastColumnPos=this.lastColumnValue=0}},{key:"eol",value:function(){return this.pos>=this.string.length}},{key:"sol",value:function(){return this.pos==this.lineStart}},{key:"peek",value:function(){return this.string.charAt(this.pos)||void 0}},{key:"next",value:function(){if(this.pos<
this.string.length)return this.string.charAt(this.pos++)}},{key:"eat",value:function(ba){var Ia=this.string.charAt(this.pos);if("string"==typeof ba?Ia==ba:Ia&&(ba.test?ba.test(Ia):ba(Ia)))return++this.pos,Ia}},{key:"eatWhile",value:function(ba){for(var Ia=this.pos;this.eat(ba););return this.pos>Ia}},{key:"eatSpace",value:function(){for(var ba=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>ba}},{key:"skipToEnd",value:function(){this.pos=this.string.length}},{key:"skipTo",
value:function(ba){ba=this.string.indexOf(ba,this.pos);if(-1<ba)return this.pos=ba,!0}},{key:"backUp",value:function(ba){this.pos-=ba}},{key:"column",value:function(){this.lastColumnPos<this.start&&(this.lastColumnValue=P.countColumn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?P.countColumn(this.string,this.lineStart,this.tabSize):0)}},{key:"indentation",value:function(){return P.countColumn(this.string,
null,this.tabSize)-(this.lineStart?P.countColumn(this.string,this.lineStart,this.tabSize):0)}},{key:"match",value:function(ba,Ia,nb){if("string"==typeof ba){var xb=function(wc){return nb?wc.toLowerCase():wc},Ic=this.string.substr(this.pos,ba.length);if(xb(Ic)==xb(ba))return!1!==Ia&&(this.pos+=ba.length),!0}else{if((ba=this.string.slice(this.pos).match(ba))&&0<ba.index)return null;ba&&!1!==Ia&&(this.pos+=ba[0].length);return ba}}},{key:"current",value:function(){return this.string.slice(this.start,
this.pos)}},{key:"hideFirstChars",value:function(ba,Ia){this.lineStart+=ba;try{return Ia()}finally{this.lineStart-=ba}}}],[{key:"className",get:function(){return"StringStream"}}],bb,{pathInPackage:function(){return"editor-modes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10431,end:12920})})(void 0);Aa=[{name:"APL",mime:"text/apl",
mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["pgp"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:"cpp c++ cc cxx hpp h++ hh hxx".split(" "),
alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",
mime:"text/x-coffeescript",mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",
mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"],contentTest:function(Ga){return Ga.match(/^diff --.* a\//m)}},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",
mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",
mode:"erlang",ext:["erl"]},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",
mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",
mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",
mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"json",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},
{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",
mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",
mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p",
"pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mime:"application/x-httpd-php",mode:"php",ext:"php php3 php4 php5 php7 phtml".split(" ")},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:"txt text conf def list log".split(" ")},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",
ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},
{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",
mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mime:"text/x-sh",mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD|\.bash(rc|_profile)|\.profile$/,contentTest:function(Ga){return Ga.match(/#!\//m)}},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},
{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},
{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",
mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:"123456789".split("")},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",
mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",
ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml",
"text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];P.modeInfo=Aa;P.modeInfo=Aa;P.modeInfo=Aa;for(var wa=0;wa<P.modeInfo.length;wa++)P.info=P.modeInfo[wa],P.info.mimes&&(P.info.mime=P.info.mimes[0]);P.defineMode("null",function(){return{token:function(Ga){return Ga.skipToEnd()}}});
P.defineMIME("text/plain","null");P.findModeByMIME=hb;P.findModeByMIME=hb;P.findModeByExtension=ac;P.findModeByExtension=ac;P.findModeByFileName=Wb;P.findModeByFileName=Wb;P.findModeByName=Fd;P.findModeByName=Fd;var Pa=lively.FreezerRuntime.recorderFor("lively.ide/text/completion.js");Pa.Color=zb;Pa.Rectangle=dc;Pa.pt=ke;Pa.morph=hd;Pa.ShadowObject=$d;Pa.StyleSheet=md;Pa.connect=Qc;Pa.arr=kc;Pa.string=xd;Pa.FilterableList=Od;Pa.Range=ge;wa=function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/text/completion.js"),
Gb=bb.hasOwnProperty("Completer")&&"function"===typeof bb.Completer?bb.Completer:bb.Completer=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rb(Gb,Ga,[{key:"compute",value:function(){return[]}}],[{key:"className",get:function(){return"Completer"}}],bb,{pathInPackage:function(){return"text/completion.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:345,end:391})}(void 0);Pa.Completer=wa;Pa.Completer=wa;Pa.Completer=wa;wa=function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/text/completion.js"),Gb=bb.hasOwnProperty("WordCompleter")&&"function"===typeof bb.WordCompleter?bb.WordCompleter:bb.WordCompleter=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rb(Gb,Ga,[{key:"compute",
value:function(ba,Ia){var nb=[],xb=[],Ic=ba.document.lineStrings;ba=ba.cursorPosition.row;for(var wc=ba-1;0<=wc;wc--)for(var Dd=$jscomp.makeIterator(Ic[wc].split(/[^0-9a-z@_]+/i)),yd=Dd.next();!yd.done;yd=Dd.next())(yd=yd.value)&&!nb.includes(yd)&&yd!==Ia&&(nb.push(yd),xb.push({priority:1E3-(ba-wc),completion:yd}));for(wc=ba+1;wc<Ic.length;wc++)for(Dd=$jscomp.makeIterator(Ic[wc].split(/[^0-9a-z_@]+/i)),yd=Dd.next();!yd.done;yd=Dd.next())(yd=yd.value)&&!nb.includes(yd)&&yd!==Ia&&(nb.push(yd),xb.push({priority:1E3-
(wc-ba),completion:yd}));return xb}}],[{key:"className",get:function(){return"WordCompleter"}}],bb,{pathInPackage:function(){return"text/completion.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:400,end:1228})}(void 0);Pa.WordCompleter=wa;Pa.WordCompleter=wa;Pa.WordCompleter=wa;wa=[new Pa.WordCompleter];Pa.defaultCompleters=wa;Pa.defaultCompleters=
wa;Pa.defaultCompleters=wa;wa=function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/text/completion.js"),Gb=bb.hasOwnProperty("CompletionController")&&"function"===typeof bb.CompletionController?bb.CompletionController:bb.CompletionController=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rb(Gb,Ga,[{key:Symbol.for("lively-instance-initialize"),value:function(ba,Ia){Ia=void 0===Ia?[]:Ia;this.textMorph=
ba;this.completers=Ia=ba.pluginCollect("getCompleters",Ia)}},{key:"computeCompletions",value:function(ba){var Ia=this,nb,xb,Ic,wc,Dd,yd,zd,He,df,og,Jh,Oi,Th,Kj,Kh,gl;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kf){switch(Kf.nextAddress){case 1:nb=[],xb=$jscomp.makeIterator(Ia.completers),Ic=xb.next();case 2:if(Ic.done){Kf.jumpTo(4);break}wc=Ic.value;Kf.setCatchFinallyBlocks(5);Dd=nb;yd=Dd.concat;return Kf.yield(wc.compute(Ia.textMorph,ba),7);case 7:nb=yd.call(Dd,Kf.yieldResult);Kf.leaveTryBlock(3);
break;case 5:zd=Kf.enterCatchBlock(),console.warn("Error in completer "+wc+": "+(zd.stack||zd));case 3:Ic=xb.next();Kf.jumpTo(2);break;case 4:He=new Map;nb.forEach(function(Uj){var oi=He.get(Uj.completion);oi||(oi=[],He.set(Uj.completion,oi));oi.push(Uj)});df=[];og=$jscomp.makeIterator(He.values());for(Jh=og.next();!Jh.done;Jh=og.next())Oi=Jh.value,df.push(Pa.arr.last(Pa.arr.sortByKey(Oi,"priority")));Th=0;Kj=Pa.arr.sortByKey(df,"priority").reverse();Kh=Kj.length&&Kj[0].priority||0;gl=Kj.map(function(Uj){Uj.highestPriority=
Kh;var oi=Uj.completion.replace(/\n/g,""),Ke=String((Uj.info||"").replace(/\n/g,""));Th=Math.max(Th,oi.length+Ke.length);return{isListItem:!0,string:oi,annotation:Ke,value:Uj}});return Kf.return({items:gl,maxCol:Th})}})}},{key:"computeSortedCompletions",value:function(ba,Ia){Ia=void 0===Ia?!1:Ia;var nb=this,xb,Ic,wc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Dd){if(1==Dd.nextAddress)return xb={tokens:[ba],lowercasedTokens:[ba],input:ba},Dd.yield(nb.computeCompletions(ba),2);Ic=Dd.yieldResult;
wc=Pa.arr.sortBy(Ic.items.filter(function(yd){return nb.filterFunction(xb,yd,Ia)}),function(yd){return nb.sortFunction(xb,yd)});return Dd.return(wc)})}},{key:"_printCompletions",value:function(ba){var Ia=this,nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xb){if(1==xb.nextAddress)return xb.yield(Ia.computeSortedCompletions(ba),2);nb=xb.yieldResult.map(function(Ic){return{completion:Ic.value.completion,priority:Ic.value.priority,maxP:Ic.value.highestPriority,sortVal:Ic._cache[ba].sortVal,
lev:JSON.stringify(Ic._cache[ba].levenshtein)}});return xb.return(Pa.string.printTable(lively.lang.grid.tableFromObjects(nb)))})}},{key:"prefix",value:function(){var ba=this.textMorph,Ia=ba.selection;return(Ia.isEmpty()?ba.getLine(Ia.lead.row).slice(0,Ia.lead.column):Ia.text).match(/[a-z0-9@_]*$/i)[0]}},{key:"filterFunction",value:function(ba,Ia,nb){nb=void 0===nb?!1:nb;Ia._cache||(Ia._cache={});var xb=ba.tokens,Ic=ba.lowercasedTokens,wc=ba.input;wc=Ia._cache[wc]||(Ia._cache[wc]={});if(wc.hasOwnProperty("filtered"))return wc.filtered;
Ia=Ia.value.completion.replace(/\([^\)]*\)$/,"");var Dd=Ia.toLowerCase();if(nb&&xb[0]&&!Ia.startsWith(xb[0]))return wc.filtered=!1;if(Ic.every(function(zd){return Dd.includes(zd)}))return!0;var yd=wc.levenshtein||(wc.levenshtein={});ba=nb||3>=Pa.arr.sum(ba.lowercasedTokens.map(function(zd){return yd[zd]||(yd[zd]=Pa.string.levenshtein(Dd,zd))}));return wc.filtered=ba}},{key:"sortFunction",value:function(ba,Ia){Ia._cache||(Ia._cache={});var nb=Ia._cache[ba.input]||(Ia._cache[ba.input]={});if(nb.hasOwnProperty("sortVal"))return nb.sortVal;
nb=Ia._cache[ba.input]={};var xb=Ia.value;Ia=xb.highestPriority;var Ic=xb.completion;xb=xb.priority;Ic=Ic.replace(/\([^\)]*\)$/,"").toLowerCase();var wc=0;ba.lowercasedTokens.forEach(function(yd){Ic.startsWith(yd)?wc+=12:3<=yd.length&&Ic.includes(yd)&&(wc+=5)});Ia=-((xb||(wc?Ia:0))/Math.pow(10,String(Ia).length-2))-wc;var Dd=nb.levenshtein||(nb.levenshtein={});ba=Pa.arr.sum(ba.lowercasedTokens.map(function(yd){return Dd[yd]||(Dd[yd]=Pa.string.levenshtein(Ic,yd))}));wc&&(ba/=2);return nb.sortVal=ba+
Ia}},{key:"positionForMenu",value:function(){var ba=this.textMorph,Ia=ba.charBoundsFromTextPosition(ba.cursorPosition);return ba.getGlobalTransform().transformRectToRect(Ia).topLeft().addXY(-ba.scroll.x,-ba.scroll.y).addPt(Pa.pt(ba.borderWidth+3,ba.borderWidth+3))}},{key:"completionListSpec",value:function(){var ba=this,Ia,nb,xb,Ic,wc,Dd,yd,zd,He,df,og,Jh,Oi,Th,Kj,Kh,gl,Kf,Uj,oi;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ke){if(1==Ke.nextAddress)return nb=Ia=ba.textMorph,xb=nb.fontSize,
Ic=nb.fontFamily,wc=ba.positionForMenu(),Dd=ba.prefix(),Ke.yield(ba.computeCompletions(Dd),2);yd=Ke.yieldResult;zd=yd.items;He=yd.maxCol;df=Ia.env.fontMetric.sizeFor(Ic,xb,"M");og=df.width*He;Jh=Ia.document.getLine(0).height;Oi=Math.max(120,og<Ia.width?og:Ia.width);Th=Jh*zd.length+Jh+10;Kj=Math.max(70,Math.min(700,Th));Kh=wc.extent(Pa.pt(Oi,Kj));if(gl=Ia.world())Kf=gl.visibleBounds().insetBy(5),Kh.bottom()>Kf.bottom()&&(Uj=Kh.bottom()-Kf.bottom(),Uj>Kh.height-50&&(Uj=Kh.height-50),Kh.height-=Uj),
Kh.right()>Kf.right()&&(oi=Kh.right()-Kf.right(),Kh.width=120>Kh.width-oi?120:Kh.width-oi),Kf.containsRect(Kh)||(Kh=Kh.withTopLeft(Kf.translateForInclusion(Kh).topLeft())),Kh=Kh.translatedBy(Kf.insetBy(0).topLeft().negated());return Ke.return({master:{auto:"styleguide://SystemWidgets/autocomplete list"},hasFixedPosition:!0,epiMorph:!0,fontSize:xb,position:Kh.topLeft(),extent:Kh.extent(),items:zd,input:Dd,name:"text completion menu",historyId:"lively.morphic-text completion",filterFunction:ba.filterFunction,
sortFunction:ba.sortFunction})})}},{key:"removeMenuOnBlur",value:function(ba){var Ia=ba.menu;setTimeout(function(){Ia.withAllSubmorphsDetect(function(nb){return nb.isFocused()})?Ia.inputMorph.focus():Ia.remove()})}},{key:"openCompletionList",value:function(){var ba=this,Ia,nb,xb,Ic,wc,Dd,yd,zd,He,df;return $jscomp.asyncExecutePromiseGeneratorProgram(function(og){if(1==og.nextAddress)return Ia=ba.textMorph.selection.start,og.yield(ba.completionListSpec(),2);nb=og.yieldResult;ba.textMorph.pluginFind(function(Jh){return Jh.theme});
xb=new Pa.FilterableList(nb);Ic=new Pa.Range({start:Ia,end:ba.textMorph.selection.start});wc=ba.textMorph.textInRange(Ic);Dd=xb.inputMorph;yd=xb.listMorph;zd=nb.input;He=xb.addMorph({name:"prefix mask",fill:Pa.Color.transparent,bounds:Dd.textBounds()},Dd);yd.master=null;Ic.isEmpty()||(ba.textMorph.deleteText(Ic),Dd.input=wc,Dd.gotoDocumentEnd());Dd.fontColor=ba.textMorph.fontColor;Pa.connect(Dd,"textString",He,"setBounds",{converter:"() => input.textBounds()",varMapping:{input:Dd}});Pa.connect(xb,
"accepted",ba,"insertCompletion",{updater:"function($upd) {\n        let textToInsert, customInsertionFn = null, completion = this.sourceObj.selection;\n        if (completion) {\n          if (completion.prefix) prefix = completion.prefix;\n          textToInsert = completion.completion;\n          customInsertionFn = completion.customInsertionFn;\n        } else {\n          textToInsert = this.sourceObj.inputMorph.textString;\n        }\n        $upd(textToInsert, prefix, customInsertionFn);\n      }",
varMapping:{prefix:zd}});Pa.connect(xb,"accepted",xb,"remove");Pa.connect(xb,"canceled",xb,"remove");Pa.connect(xb,"remove",ba.textMorph,"focus");Pa.connect(xb.inputMorph,"onBlur",ba,"removeMenuOnBlur",{converter:"evt => ({menu, evt})",varMapping:{menu:xb}});df=ba.textMorph.world();df.addMorph(xb);yd.addStyleClass("hiddenScrollbar");Dd.height=yd.itemHeight;Dd.fixedHeight=!0;Dd.fontSize=yd.fontSize;Dd.focus();xb.get("padding").height=0;xb.relayout();xb.selectedIndex=0;zd.length?(Dd.gotoDocumentEnd(),
xb.moveBy(Pa.pt(-Dd.textBounds().width+2,0))):xb.moveBy(Pa.pt(2,0));return og.return(xb)})}},{key:"autoInsertBestMatchingCompletion",value:function(ba,Ia,nb){Ia=void 0===Ia?!0:Ia;var xb=this,Ic,wc,Dd,yd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(zd){if(1==zd.nextAddress)return Ic=$jscomp,wc=Ic.makeIterator,zd.yield(xb.computeSortedCompletions(ba,Ia),2);Dd=wc.call(Ic,zd.yieldResult);(yd=Dd.next().value)&&xb.insertCompletion(yd.value.completion,ba,nb);zd.jumpToEnd()})}},{key:"insertCompletion",
value:function(ba,Ia,nb){var xb=this.textMorph,Ic=xb.document,wc=xb.selection.isMultiSelection?xb.selection.selections:[xb.selection];xb.undoManager.group();wc.forEach(function(Dd){Dd.collapseToEnd();var yd=Dd.lead,zd=Ia?Ic.indexToPosition(Ic.positionToIndex(yd)-Ia.length):yd;"function"===typeof nb?nb(ba,Ia,xb,{start:zd,end:yd},Dd):xb.replace({start:zd,end:yd},ba)});xb.undoManager.group()}}],[{key:"className",get:function(){return"CompletionController"}}],bb,{pathInPackage:function(){return"text/completion.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1355,end:12497})}(void 0);Pa.CompletionController=wa;Pa.CompletionController=wa;Pa.CompletionController=wa;wa=[{name:"text completion",handlesCount:!0,multiSelectAction:"single",exec:function(Ga,bb,Gb){var ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){return 1==Ia.nextAddress?
(ba=new Pa.CompletionController(Ga,Pa.defaultCompleters),Ia.yield(ba.openCompletionList(),2)):Ia.return(!0)})}},{name:"text completion first match",handlesCount:!0,multiSelectAction:"single",exec:function(Ga,bb,Gb){var ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){return 1==Ia.nextAddress?(ba=new Pa.CompletionController(Ga,Pa.defaultCompleters),Ia.yield(ba.autoInsertBestMatchingCompletion(ba.prefix()),2)):Ia.return(!0)})}}];Pa.completionCommands=wa;Pa.completionCommands=wa;Pa.completionCommands=
wa;var Hb=lively.FreezerRuntime.recorderFor("lively.ide/text/multi-select-commands.js");Hb.chain=Ud;Hb.arr=kc;Hb.obj=nd;Hb.string=xd;var Nc=[{name:"[multi select] add cursor above",multiSelectAction:"single",exec:function(Ga){var bb=Ga.selection.start;0<bb.row&&(bb=Ga.getPositionAboveOrBelow(1,bb,!0,0,Ga.charBoundsFromTextPosition(bb).x),Ga.selection.addRange({start:bb,end:bb}));return!0}},{name:"[multi select] add cursor below",multiSelectAction:"single",exec:function(Ga){var bb=Ga.selection.start;
bb.row<Ga.documentEndPosition.row&&(bb=Ga.getPositionAboveOrBelow(-1,bb,!0,0,Ga.charBoundsFromTextPosition(bb).x),Ga.selection.addRange({start:bb,end:bb}));return!0}},{name:"[multi select] all like this",multiSelectAction:"single",exec:function(Ga){var bb=Ga.selection.selections[Ga.selection.selections.length-1];if(bb.isEmpty())return!0;Ga.searchForAll(bb.text,{start:{column:0,row:0}}).forEach(function(Gb){return Ga.selection.addRange(Gb.range,!1)});Ga.selection.mergeSelections();Hb.arr.remove(Ga.selection.selections,
bb);Ga.selection.selections.push(bb);return!0}},{name:"[multi select] more like this forward",multiSelectAction:"single",exec:function(Ga){var bb=Ga.selection.selections.length-1,Gb=Ga.selection.selections[bb];if(Gb.isEmpty())return!0;var ba=Ga.search(Gb.text,{start:Gb.end,backwards:!1});ba&&(Gb=Ga.selection.selections.findIndex(function(Ia){return Ia.range.equals(ba.range)}),-1<Gb?Hb.arr.swap(Ga.selection.selections,Gb,bb):Ga.selection.addRange(ba.range));return!0}},{name:"[multi select] more like this backward",
multiSelectAction:"single",exec:function(Ga){var bb=Ga.selection.selections.length-1,Gb=Ga.selection.selections[bb];if(Gb.isEmpty())return!0;var ba=Gb.start,Ia=Ga.search(Gb.text,{start:{row:ba.row,column:ba.column-(Gb.text.length-1)},backwards:!0});Ia&&(Gb=Ga.selection.selections.findIndex(function(nb){return nb.range.equals(Ia.range)}),-1<Gb?Hb.arr.swap(Ga.selection.selections,Gb,bb):Ga.selection.addRange(Ia.range));return!0}},{name:"[multi select] remove focused cursor",multiSelectAction:"single",
exec:function(Ga){var bb=Ga.selection.selections.length;1<bb&&Ga.selection.removeSelections(bb-1);return!0}},{name:"[multi select] goto previous focused cursor",multiSelectAction:"single",exec:function(Ga){Ga.selection.selections=lively.lang.arr.rotate(Ga.selection.selections,-1);return!0}},{name:"[multi select] goto next focused cursor",multiSelectAction:"single",exec:function(Ga){Ga.selection.selections=lively.lang.arr.rotate(Ga.selection.selections,1);return!0}},{name:"[multi select] align cursors",
multiSelectAction:"single",exec:function(Ga){var bb=Ga.selection.selections;if(1>=bb.length)return!0;var Gb=Hb.arr.groupBy(bb,function(Ia){return Ia.range.start.row});bb=Gb.keys().map(function(Ia){Ia=Gb[Ia];var nb=Hb.arr.max(Ia,function(xb){return xb.range.start.column});Hb.arr.without(Ia,nb).forEach(function(xb){return xb.range=nb.range});return nb});var ba=Hb.arr.max(bb,function(Ia){return Ia.range.start.column}).range.start.column;bb.forEach(function(Ia){var nb=Ia.range.start;Ia=nb.row;nb=nb.column;
Ga.insertText(" ".repeat(ba-nb),{row:Ia,column:nb})});return!0}},{name:"[multi select] create rectangular selection",multiSelectAction:"single",exec:function(Ga){Ga.selection.disableMultiSelect();if(Ga.selection.isEmpty())var bb=Ga.lastSavedMark&&Ga.lastSavedMark.position||(void 0).lineRange().start,Gb=Ga.cursorPosition;else bb=Ga.selection,Gb=bb.lead,bb=bb.anchor;Ga.selection.collapse();var ba=bb.column,Ia=Gb.column;Hb.arr.range(bb.row,Gb.row).forEach(function(nb){return Ga.getLine(nb).length>Math.min(Ia,
ba)&&Ga.selection.addRange({end:{row:nb,column:Ia},start:{row:nb,column:ba}},!1)});Ga.selection.mergeSelections();return!0}},{name:"[multi select] count",multiSelectAction:"single",handlesCount:!0,exec:function(Ga,bb,Gb){Gb=void 0===Gb?1:Gb;Ga.undoManager.group();Ga.selection.selections.forEach(function(ba,Ia){return ba.text=String(Ia+Gb)});Ga.undoManager.group();return!0}}];Hb.multiSelectCommands=Nc;Hb.multiSelectCommands=Nc;Hb.multiSelectCommands=Nc;var Wc=lively.FreezerRuntime.recorderFor("lively.ide/text/code-navigation-commands.js");
Wc.pToI=function(Ga,bb){return Ga.positionToIndex(bb)};Wc.iToP=function(Ga,bb){return Ga.indexToPosition(bb)};Wc.execCodeNavigator=function(Ga){return function(bb,Gb,ba){var Ia=bb.pluginInvokeFirst("getNavigator");if(!Ia)return!0;bb.saveMark();ba=ba||1;for(var nb=0;nb<ba;nb++)Ia[Ga](bb,Gb);return!0}};Wc.once=Za;var le=[{name:"forwardSexp",bindKey:"Ctrl-Alt-f|Ctrl-Alt-Right",exec:Wc.execCodeNavigator("forwardSexp"),multiSelectAction:"forEach",readOnly:!0},{name:"backwardSexp",bindKey:"Ctrl-Alt-b|Ctrl-Alt-Left",
exec:Wc.execCodeNavigator("backwardSexp"),multiSelectAction:"forEach",readOnly:!0},{name:"backwardUpSexp",bindKey:"Ctrl-Alt-u|Ctrl-Alt-Up",exec:Wc.execCodeNavigator("backwardUpSexp"),multiSelectAction:"forEach",readOnly:!0},{name:"forwardDownSexp",bindKey:"Ctrl-Alt-d|Ctrl-Alt-Down",exec:Wc.execCodeNavigator("forwardDownSexp"),multiSelectAction:"forEach",readOnly:!0},{name:"markDefun",bindKey:"Ctrl-Alt-h",exec:Wc.execCodeNavigator("markDefun"),multiSelectAction:"forEach",readOnly:!0},{name:"expandRegion",
bindKey:{win:"Shift-Ctrl-E|Ctrl-Shift-Space",mac:"Shift-Command-Space|Ctrl-Shift-Space"},exec:function(Ga,bb){function Gb(){var nb=Ga.$expandRegionState,xb=Wc.pToI(Ga,Ga.cursorPosition);if(nb&&(nb.range[0]===xb||nb.range[1]===xb))return nb;nb=Ga.selection.range;return Ga.$expandRegionState={range:[Wc.pToI(Ga,nb.start),Wc.pToI(Ga,nb.end)]}}bb=bb||{};var ba=Ga.pluginInvokeFirst("getNavigator");if(!ba)return!0;var Ia=bb.start;bb=bb.end;if("number"===typeof Ia&&"number"===typeof bb)Gb(),ba={range:[Ia,
bb],prev:Gb()};else{Ia=ba.ensureAST(Ga);if(!Ia)return;ba=ba.expandRegion(Ga,Ga.textString,Ia,Gb())}ba&&ba.range&&(Ga.selection={start:Wc.iToP(Ga,ba.range[0]),end:Wc.iToP(Ga,ba.range[1])},Ga.$expandRegionState=ba);Wc.once(Ga,"selectionChange",function(){return Ga.$expandRegionState=null},"call");return!0},multiSelectAction:"forEach",readOnly:!0},{name:"contractRegion",bindKey:{win:"Shift-Ctrl-S|Ctrl-Alt-Space",mac:"Ctrl-Command-space|Ctrl-Alt-Space"},exec:function(Ga){if(Ga.selection.isEmpty())return!0;
var bb=Ga.pluginInvokeFirst("getNavigator");if(!bb)return!0;var Gb=bb.ensureAST(Ga);if(!Gb)return!0;var ba=Ga.$expandRegionState;if(!ba)return!0;(bb=bb.contractRegion(Ga,Ga.textString,Gb,ba))&&bb.range&&(Ga.selection={start:Wc.iToP(Ga,bb.range[0]),end:Wc.iToP(Ga,bb.range[1])},Ga.$expandRegionState=bb);Wc.once(Ga,"selectionChange",function(){return Ga.$expandRegionState=null},"call");return!0},multiSelectAction:"forEach",readOnly:!0}];Wc.commands=le;Wc.commands=le;Wc.commands=le;var Rd=lively.FreezerRuntime.recorderFor("lively.ide/text/generic-code-commands.js");
Rd.arr=kc;Rd.chain=Ud;Rd.string=xd;var jf=[{name:"toggle comment",exec:function(Ga){var bb=Ga.pluginInvokeFirst("getComment");if(!bb)return!0;if(!bb.lineCommentStart)return bb.blockCommentStart?Ga.execCommand("toggle block comment"):!0;var Gb=bb.lineCommentStart,ba=new RegExp("^(\\s*)("+Gb+"\\s?)(.*)");bb=Ga.document;var Ia=Ga.selection;Ia.isEmpty()||0!==Ia.end.column||Ia.growRight(-1);var nb=Ia.start.row;bb=bb.lineStrings.slice(Ia.start.row,Ia.end.row+1);bb=bb.some(function(wc){return!!wc.trim()})?
Rd.arr.dropWhile(bb,function(wc){return wc.trim()?!1:++nb&&!0}):bb;var xb=bb.every(function(wc){return wc.trim()&&wc.match(ba)});Ga.undoManager.group();if(xb)bb.forEach(function(wc,Dd){if(wc=wc.match(ba)){wc=$jscomp.makeIterator(wc);wc.next();var yd=wc.next().value,zd=wc.next().value;wc.next();Ga.deleteText({start:{row:nb+Dd,column:yd.length},end:{row:nb+Dd,column:yd.length+zd.length}})}});else{var Ic=bb.reduce(function(wc,Dd,yd){return Dd.trim()||Ia.isEmpty()&&Ia.start.row===Ia.end.row?Math.min(wc,
Dd.match(/^\s*/)[0].length):wc},Infinity);Ic=Infinity===Ic?0:Ic;bb.forEach(function(wc,Dd){wc=$jscomp.makeIterator(wc.match(/^(\s*)(.*)/));wc.next();wc.next();wc.next();Ga.insertText(Gb+" ",{row:nb+Dd,column:Ic})})}Ga.undoManager.group();return!0}},{name:"toggle block comment",exec:function(Ga){var bb=Ga.pluginInvokeFirst("getComment");if(!bb)return!0;if(!bb.blockCommentStart)return bb.lineCommentStart?Ga.execCommand("toggle comment"):!0;if(!bb||!bb.blockCommentStart)return!0;var Gb=bb.blockCommentStart;
bb=bb.blockCommentEnd;var ba=new RegExp("^"+Gb.replace(/\*/g,"\\*")),Ia=new RegExp(bb.replace(/\*/g,"\\*")+"$"),nb=Ga.tokenAt(Ga.cursorPosition);if(nb&&"comment"===nb.token){var xb=Ga.textInRange(nb);if(xb.match(ba)&&xb.match(Ia))return Ga.undoManager.group(),Ga.replace(nb,xb.slice(Gb.length,-bb.length)),Ga.undoManager.group(),!0}Ga.undoManager.group();Ga.insertText(Gb,Ga.selection.start);Ga.insertText(bb,Ga.selection.end);Ga.undoManager.group();Gb=!Ga.selection.isEmpty();Ga.selection.growLeft(bb.length);
Gb||Ga.selection.collapse();return!0}},{name:"comment box",exec:function(Ga,bb,Gb){bb=Ga.undoManager.ensureNewGroup(Ga,"comment box");if(Ga.selection.isEmpty())return Ga.insertText("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-"),Ga.execCommand("toggle comment"),Ga.undoManager.group(bb),!0;var ba=Ga.selection.range,Ia=Ga.withSelectedLinesDo(function(xb){return xb}),nb=Rd.arr.min([ba.start.column].concat(Rd.chain(Ia).map(function(xb){return xb.match(/^\s*/)}).flatten().compact().pluck("length").value()));
Ia=Rd.arr.max(Ia.map(function(xb){return xb.length}))-nb;Ia=Array(Math.ceil(Ia/2)+1).join("-=")+"-";Ga.execCommand("toggle comment");Ga.collapseSelection();Ga.cursorPosition={row:ba.start.row,column:0};Gb?Ga.insertText(Rd.string.indent("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-\n"," ",nb)):Ga.insertText(Rd.string.indent(Ia+"\n"," ",nb));Ga.selection.goUp();Ga.execCommand("toggle comment");Ga.cursorPosition={row:ba.end.row+2,column:0};Ga.insertText(Rd.string.indent(Ia+"\n"," ",nb));Ga.selection.goUp();
Ga.execCommand("toggle comment");Ga.selection.range={start:{row:ba.start.row,column:0},end:Ga.cursorPosition};Ga.undoManager.group(bb);return!0},multiSelectAction:"forEach",handlesCount:!0}];Rd.commands=jf;Rd.commands=jf;Rd.commands=jf;var ce=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js");ce.printSymbol=function(Ga){if(Symbol.keyFor(Ga))return'Symbol.for("'+Symbol.keyFor(Ga)+'")';if(ce.knownSymbols.get(Ga))return ce.knownSymbols.get(Ga);String(Ga).match(ce.symMatcher);return String(Ga)};
ce.defaultSort=function(Ga,bb){if(Ga.hasOwnProperty("priority")||bb.hasOwnProperty("priority")){var Gb=Ga.priority||0,ba=bb.priority||0;if(Gb<ba)return-1;if(Gb>ba)return 1}Ga=(Ga.keyString||Ga.key).toLowerCase();bb=(bb.keyString||bb.key).toLowerCase();return Ga<bb?-1:Ga===bb?0:1};ce.safeToString=Be;ce.propertyNamesOf=function(Ga,bb){if(!Ga)return[];if(Array.isArray(Ga)){var Gb=bb?bb.offset:0;return ce.arr.range(Gb,Gb+(bb?bb.partitionSize:Ga.length-1))}return ce.arr.sortBy(Object.keys(Ga),function(ba){return ba.toLowerCase()})};
ce.isMultiValue=Ie;ce.printValue=Lf;ce.partitionedChildren=function(Ga,bb){var Gb=void 0===bb?{}:bb;bb=void 0===Gb.originalValue?Ga:Gb.originalValue;var ba=void 0===Gb.offset?0:Gb.offset;Gb=void 0===Gb.partitionSize?Ga.length||Object.values(Ga).length:Gb.partitionSize;if(ce.obj.isArray(Ga)){Ga=ce.num.roundTo(Math.max(ce.MIN_PARTITION_SIZE,Gb/50),.1);Gb/=Ga;for(var Ia=[],nb=0;nb<Gb;nb++){var xb="["+(ba+nb*Ga)+"-"+(ba+(nb+1)*Ga)+"]";Ia.push({partition:{originalValue:bb,offset:ba+nb*Ga,partitionSize:Ga},
value:[],key:xb,keyString:xb,valueString:"...",isCollapsed:!0})}return Ia}Ga=ce.num.roundTo(Math.max(ce.MIN_PARTITION_SIZE,Gb/50),.1);Gb/=Ga;Ia=[];nb=ce.obj.keys(bb).sort();for(xb=0;xb<Gb;xb++){var Ic=ba+xb*Ga,wc=ba+(xb+1)*Ga,Dd=ce.obj.select(bb,nb.slice(Ic,wc));Ic="["+nb[Ic].slice(0,4)+"-"+(nb[wc]||ce.arr.last(nb)).slice(0,4)+"]";Ia.push({partition:{originalValue:Dd,offset:ba+xb*Ga,partitionSize:Ga},value:[],key:Ic,keyString:Ic,valueString:"...",isCollapsed:!0})}return Ia};ce.propertiesOf=function(Ga){var bb=
Ga.partition?Ga.target:Ga.value;if(!bb)return[];var Gb={_rev:!0},ba=[],Ia="function"===typeof bb.livelyCustomInspect?bb.livelyCustomInspect():{},nb=Object.assign({},ce.defaultPropertyOptions,{},Ia);if(Ia.properties){Ia=$jscomp.makeIterator(Ia.properties);for(var xb=Ia.next();!xb.done;xb=Ia.next()){var Ic=xb.value;xb=Ic.key;var wc=Ic.hidden,Dd=Ic.priority,yd=Ic.keyString,zd=Ic.value;Ic=Ic.valueString;Gb[xb]=!0;wc||ba.push(Ga.getSubNode({priority:Dd,key:xb,keyString:yd||ce.safeToString(xb),value:zd,
valueString:Ic,isCollapsed:!0}))}}if(nb.includeDefault){Ia=ce.propertyNamesOf(bb,Ga.partition);if(Ia.length>ce.MAX_NODE_THRESHOLD)for(Gb=$jscomp.makeIterator(ce.partitionedChildren(bb,Ga.partition)),Ia=Gb.next();!Ia.done;Ia=Gb.next())ba.push(Ga.getSubNode(Ia.value));else for(wc=$jscomp.makeIterator(Ia),Ia=wc.next();!Ia.done;Ia=wc.next())Dd=Ia.value,Dd in Gb||(Ia=bb[Dd],xb=ce.printValue(Ia),Ia={keyString:Dd,key:Dd,value:Ia,valueString:xb,isCollapsed:!0},ba.push(Ga.getSubNode(Ia)));if(nb.includeSymbols)for(Gb=
$jscomp.makeIterator(Object.getOwnPropertySymbols(bb)),Ia=Gb.next();!Ia.done;Ia=Gb.next())wc=Ia.value,Dd=ce.safeToString(wc),Ia=bb[wc],xb=ce.printValue(Ia),Ia={key:wc,keyString:Dd,value:Ia,valueString:xb,isCollapsed:!0},ba.push(Ga.getSubNode(Ia))}nb.sort&&(ba=nb.sortFunction(bb,ba));return ba};ce.obj=nd;ce.num=Cb;ce.arr=kc;ce.string=xd;ce.connect=Qc;ce.signal=bc;ce.TreeData=ic;ce.newUUID=id;ce.localInterface=Ha;ce.MAX_NODE_THRESHOLD=1E3;ce.MIN_PARTITION_SIZE=250;ce.defaultPropertyOptions={includeDefault:!0,
includeSymbols:!0,sort:!0,sortFunction:function(Ga,bb){return Array.isArray(Ga)?bb:bb.sort(ce.defaultSort)}};ce.symMatcher=/^Symbol\((.*)\)$/;ce.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(Ga){return"symbol"===typeof Symbol[Ga]}).reduce(function(Ga,bb){return Ga.set(Symbol[bb],"Symbol."+bb)},new Map)}();ce.isMultiValue=Ie;ce.isMultiValue=Ie;ce.printValue=Lf;ce.printValue=Lf;var we=function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),
Gb=bb.hasOwnProperty("InspectionTree")&&"function"===typeof bb.InspectionTree?bb.InspectionTree:bb.InspectionTree=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rb(Gb,Ga,[{key:Symbol.for("lively-instance-initialize"),value:function(ba){Rb._get(Object.getPrototypeOf(Gb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,ba);this.inspector=ba.inspector;this.root.isInspectionNode||(this.root=ce.InspectionNode.for(this.root,
this))}},{key:"__only_serialize__",get:function(){return["root"]}},{key:"asListWithIndexAndDepth",value:function(ba){ba=void 0===ba?!0:ba;return Rb._get(Object.getPrototypeOf(Gb.prototype),"asListWithIndexAndDepth",this).call(this,function(Ia){Ia=Ia.node;return ba?Ia.visible:!0})}},{key:"getContextFor",value:function(ba){return ba==this.root?this.root.value.inspectee:ba.value}},{key:"dispose",value:function(){}},{key:"filter",value:function(ba){var Ia=void 0===ba.maxDepth?1:ba.maxDepth,nb=ba.iterator,
xb=ba.showUnknown,Ic=ba.showInternal,wc=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Dd){if(1==Dd.nextAddress)return Dd.yield(wc.uncollapseAll(function(yd,zd){return Ia>zd&&(yd==wc.root||yd.value.submorphs)}),2);wc.asListWithIndexAndDepth(!1).forEach(function(yd){var zd=yd.node;return 0==yd.depth?zd.visible=!0:!xb&&zd.keyString&&zd.keyString.includes("UNKNOWN PROPERTY")||!Ic&&zd.keyString&&zd.keyString.includes("internal")?zd.visible=!1:zd.value&&zd.value.submorphs?zd.visible=
!0:zd.visible=nb(zd)});Dd.jumpToEnd()})}},{key:"getChildren",value:function(ba){return ba.children}},{key:"display",value:function(ba){return ba.display(this.inspector)}},{key:"isCollapsed",value:function(ba){return ba.isCollapsed}},{key:"isLeaf",value:function(ba){return ce.obj.isPrimitive(ba.value)}},{key:"collapse",value:function(ba,Ia){var nb=this;ba.isCollapsed=Ia;Ia||this.isLeaf(ba)||ba.children.length||(ba.children=ce.propertiesOf(ba).map(function(xb){nb.parentMap.set(xb,ba);return xb}))}},
{key:"retrieveForRemoteProxy",value:function(ba){ba.uuid||(ba.uuid=ce.newUUID(),this.idToNodeMap[ba.uuid]=ba);return{uuid:ba.uuid,value:this.isLeaf(ba)?ba.value:{},keyString:ba.keyString,key:ba.keyString,valueString:ce.safeToString(ba.value),isCollapsed:!0,children:[]}}},{key:"systemInterface",get:function(){return ce.localInterface}},{key:"getNodeViaId",value:function(ba){return this.idToNodeMap[ba]}},{key:"asRemoteDelegate",value:function(ba){this.idToNodeMap={};this.isRemoteDelegate=!0;System.get("@lively-env").remoteInspectionContext||
(System.get("@lively-env").remoteInspectionContext={});System.get("@lively-env").remoteInspectionContext[ba]=this;return this.retrieveForRemoteProxy(this.root)}}],[{key:"className",get:function(){return"InspectionTree"}},{key:"forObject",value:function(ba,Ia){return new this({key:"inspectee",value:{inspectee:ba},isCollapsed:!0,inspector:Ia})}}],bb,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5932,end:8631})}(ce.TreeData);ce.InspectionTree=we;ce.InspectionTree=we;ce.InspectionTree=we;var Mf=function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),Gb=bb.hasOwnProperty("RemoteInspectionTree")&&"function"===typeof bb.RemoteInspectionTree?bb.RemoteInspectionTree:bb.RemoteInspectionTree=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Rb(Gb,Ga,[{key:"systemInterface",get:function(){return this.evalEnvironment.systemInterface}},{key:Symbol.for("lively-instance-initialize"),value:function(ba){this.parentMap=new WeakMap;this.root=ba.proxy;this.evalEnvironment=ba.evalEnvironment;this.inspector=ba.inspector;this.delegateId=ba.delegateId}},{key:"getContextFor",value:function(ba){return"System.get('@lively-env').remoteInspectionContext[\""+this.delegateId+'"].getNodeViaId("'+ba.uuid+'").value'}},{key:"dispose",value:function(){var ba=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){return Ia.yield(ba.evalEnvironment.systemInterface.runEval("\n      delete System.get('@lively-env').remoteInspectionContext['"+ba.delegateId+"']\n    ",ba.evalEnvironment),0)})}},{key:"display",value:function(ba){return ba.keyString+": "+ba.valueString}},{key:"collapse",value:function(ba,Ia){var nb=this,xb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ic){if(1==Ic.nextAddress)return(ba.isCollapsed=Ia)||nb.isLeaf(ba)?
Ic.return():ba.children.length?Ic.jumpTo(0):Ic.yield(nb.evalEnvironment.systemInterface.runEval('\n         const node = this.getNodeViaId("'+ba.uuid+'");\n         try {\n           this.collapse(node, false);\n         } catch (e) {\n\n         }\n         node.children.map(n => this.retrieveForRemoteProxy(n));\n      ',{targetModule:"/lively.ide/js/inspector/context.js",context:"System.get('@lively-env').remoteInspectionContext[\""+nb.delegateId+'"]'}),3);xb=Ic.yieldResult;ba.children=xb.isError?
[]:xb.value;Ic.jumpToEnd()})}}],[{key:"className",get:function(){return"RemoteInspectionTree"}},{key:"forObject",value:function(ba,Ia){var nb=this,xb,Ic,wc,Dd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yd){if(1==yd.nextAddress)return yd.yield(nb.createRemoteContext(ba,Ia),2);xb=yd.yieldResult;Ic=xb.proxy;wc=xb.delegateId;Dd=xb.evalEnvironment;return yd.return(new nb({key:"inspectee",proxy:Ic,delegateId:wc,evalEnvironment:Dd,inspector:Ia}))})}},{key:"createRemoteContext",value:function(ba,
Ia){var nb=ba.code,xb=ba.evalEnvironment,Ic=ba.delegateId,wc,Dd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yd){if(1==yd.nextAddress)return Ic="lively://inspector-"+Ia.id,yd.yield(xb.systemInterface.runEval('\n       const { InspectionTree } = await System.import("lively.ide/js/inspector/context.js");\n       const t = (() => '+nb+')();\n       const tree = InspectionTree.forObject(t);\n       tree.asRemoteDelegate("'+Ic+'");\n    ',xb),2);wc=yd.yieldResult;Dd=wc.value;return yd.return({delegateId:Ic,
evalEnvironment:xb,proxy:Dd})})}}],bb,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:8640,end:10983})}(ce.InspectionTree);ce.RemoteInspectionTree=Mf;ce.RemoteInspectionTree=Mf;ce.RemoteInspectionTree=Mf;(function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),
Gb=bb.hasOwnProperty("InspectionNode")&&"function"===typeof bb.InspectionNode?bb.InspectionNode:bb.InspectionNode=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rb(Gb,Ga,[{key:Symbol.for("lively-instance-initialize"),value:function(ba){var Ia=ba.root,nb=ba.priority,xb=ba.key,Ic=ba.keyString,wc=ba.value,Dd=ba.valueString,yd=ba.isCollapsed,zd=void 0===ba.children?[]:ba.children,He=void 0===ba.isSelected?!1:ba.isSelected,
df=void 0===ba.visible?!0:ba.visible;this.partition=ba.partition;this.priority=nb;this.key=xb;this.keyString=String(Ic||xb);this.value=wc;this.valueString=Dd||ce.printValue(wc);this.isCollapsed=yd;this.children=zd;this.isSelected=He;this.visible=df;this.root=Ia}},{key:"__only_serialize__",get:function(){return[]}},{key:"isInspectionNode",get:function(){return!0}},{key:"getSubNode",value:function(ba){if(ba.value&&ba.value.isMorph)return new ce.MorphNode(Object.assign({root:this.root},ba));var Ia=ba.key,
nb=ba.keyString,xb=this.value,Ic=ba.partition;Ic&&(xb=Ic.originalValue,nb=Ia);return new ce.PropertyNode(Object.assign({},ba,{keyString:nb,key:Ia,target:xb,partition:Ic,root:this.root,spec:{}}))}},{key:"display",value:function(ba){var Ia=this.keyString,nb=this.valueString;if(!this.interactive)return Ia+": "+nb;this._propertyWidget||(this._propertyWidget=ba.renderDraggableTreeLabel({value:Ia+": "+nb}));this._propertyWidget.isSelected=this.isSelected;return this._propertyWidget}}],[{key:"className",
get:function(){return"InspectionNode"}},{key:"for",value:function(ba,Ia){Ia=void 0===Ia?null:Ia;return ba.value&&ba.value.isMorph?new ce.MorphNode(Object.assign({root:Ia},ba)):new ce.InspectionNode(Object.assign({root:Ia},ba))}}],bb,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10985,
end:13522})})(void 0);(function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),Gb=bb.hasOwnProperty("MorphNode")&&"function"===typeof bb.MorphNode?bb.MorphNode:bb.MorphNode=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rb(Gb,Ga,[{key:Symbol.for("lively-instance-initialize"),value:function(ba){Rb._get(Object.getPrototypeOf(Gb.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,ba);this.target=this.value;this.propertyInfo=this.target.propertiesAndPropertySettings().properties}},{key:"getSubNode",value:function(ba){var Ia=this.propertyInfo[ba.key]||{};return ba.value&&ba.value.isMorph?new ce.MorphNode(Object.assign({},ba,{root:this.root})):new ce.PropertyNode(Object.assign({},ba,{root:this.root,target:this.target,spec:Ia}))}}],[{key:"className",get:function(){return"MorphNode"}}],bb,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:13524,end:14670})})(ce.InspectionNode);(function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),Gb=bb.hasOwnProperty("PropertyNode")&&"function"===typeof bb.PropertyNode?bb.PropertyNode:bb.PropertyNode=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Rb(Gb,Ga,[{key:Symbol.for("lively-instance-initialize"),value:function(ba){Rb._get(Object.getPrototypeOf(Gb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,ba);var Ia=ba.spec,nb=ba.target;this.partition=ba.partition;this.target=nb;this.spec=Ia;this.foldedNodes={}}},{key:"__deserialize__",value:function(ba,Ia){this.spec={}}},{key:"interactive",get:function(){return this._interactive}},{key:"interactive",set:function(ba){this._interactive=ba}},{key:"isFoldable",get:function(){return!!this.spec.foldable}},
{key:"isInternalProperty",get:function(){return"id"==this.keyString||this.keyString.includes("internal")}},{key:"getSubNode",value:function(ba){return this.isFoldable?this.getFoldedContext(ba):Rb._get(Object.getPrototypeOf(Gb.prototype),"getSubNode",this).call(this,ba)}},{key:"getFoldedContext",value:function(ba){return this.foldedNodes[ba.key]=new ce.FoldedNode(Object.assign({},ba,{root:this.root,target:this.target,foldableNode:this,spec:ce.obj.dissoc(this.spec,["foldable"])}))}},{key:"rerender",
value:function(){this.root.inspector.refreshSelectedLine()}},{key:"refreshProperty",value:function(ba,Ia){(Ia=void 0===Ia?!1:Ia)&&(this.target[this.key]=ba);this.value=this.target[this.key];this.valueString=ce.printValue(this.value);this.interactive&&(Ia||this._propertyWidget.highlight());if(this.isFoldable)for(var nb in this.foldedNodes)this.foldedNodes[nb].value=this.value[nb],this.foldedNodes[nb].valueString=ce.printValue(this.value[nb]),this.foldedNodes[nb]._propertyWidget&&ce.signal(this.foldedNodes[nb]._propertyWidget,
"update",this.value[nb])}},{key:"display",value:function(ba){var Ia=this,nb=this._propertyWidget,xb=this.keyString,Ic=this.valueString,wc=this.target,Dd=this.value,yd=this.spec;if(!(this.interactive||yd.foldable&&ce.isMultiValue(Dd,yd.foldable)))return ba.renderPropertyControl({target:wc,keyString:xb,valueString:Ic,tree:ba.ui.propertyTree,value:Dd,spec:yd,node:this,fastRender:!0});if(nb)return nb.keyString=xb,nb.valueString=Ic,nb.isSelected=this.isSelected,nb.control&&(nb.control.isSelected=this.isSelected),
nb;nb=this._propertyWidget=ba.renderPropertyControl({target:wc,keyString:xb,valueString:Ic,value:Dd,spec:yd,node:this,isSelected:this.isSelected,fontColor:ba.ui.propertyTree.fontColor});this.isInternalProperty||yd.readOnly||(ce.connect(nb,"propertyValue",this,"refreshProperty",{updater:function(zd,He){return zd(He,!0)}}),ce.connect(nb,"openWidget",this.root,"onWidgetOpened",{converter:function(zd){return{widget:zd,node:Ia.sourceObj}}}));return nb}}],[{key:"className",get:function(){return"PropertyNode"}}],
bb,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:14672,end:18071})})(ce.InspectionNode);(function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),Gb=bb.hasOwnProperty("FoldedNode")&&"function"===typeof bb.FoldedNode?bb.FoldedNode:bb.FoldedNode=
function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rb(Gb,Ga,[{key:Symbol.for("lively-instance-initialize"),value:function(ba){Rb._get(Object.getPrototypeOf(Gb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,ba);this.foldableNode=ba=ba.foldableNode;this.foldedProp=ba.key+ce.string.capitalize(this.key)}},{key:"refreshProperty",value:function(ba,Ia){Ia=void 0===Ia?!1:Ia;var nb={};this.foldableNode.refreshProperty(Object.assign({},
this.target[this.foldableNode.key],(nb[this.key]=ba,nb)),Ia)}}],[{key:"className",get:function(){return"FoldedNode"}}],bb,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:18073,end:18749})})(ce.PropertyNode);var Bf=lively.FreezerRuntime.recorderFor("lively.ide/themes/dark.js");Bf.Color=
zb;var rg=function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/themes/dark.js"),Gb=bb.hasOwnProperty("DarkTheme")&&"function"===typeof bb.DarkTheme?bb.DarkTheme:bb.DarkTheme=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rb(Gb,Ga,[{key:"background",get:function(){return Bf.Color.rgb(44,62,80)}},{key:"cursorColor",get:function(){return Bf.Color.gray}},{key:"default",get:function(){return{fontColor:"#abb2bf"}}},
{key:"header",get:function(){return{fontSize:"110%",fontColor:"#6b94ee"}}},{key:"header-1",get:function(){return{fontSize:"135%",fontColor:"#6b94ee"}}},{key:"header-2",get:function(){return{fontSize:"125%",fontColor:"#6b94be"}}},{key:"header-3",get:function(){return{fontSize:"120%",fontColor:"#6b94be"}}},{key:"quote",get:function(){return{fontColor:"#090"}}},{key:"negative",get:function(){return{fontColor:"#d44"}}},{key:"positive",get:function(){return{fontColor:"#292"}}},{key:"strong",get:function(){return{fontWeight:"bold"}}},
{key:"em",get:function(){return{fontStyle:"italic"}}},{key:"link",get:function(){return{textDecoration:"underline"}}},{key:"strikethrough",get:function(){return{textDecoration:"line-through"}}},{key:"hr",get:function(){return{fontColor:"#999"}}},{key:"link",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},{key:"url",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},{key:"keyword",get:function(){return{fontColor:Bf.Color.rgb(204,109,243)}}},{key:"atom",
get:function(){return{fontColor:"#d19a66"}}},{key:"number",get:function(){return{fontColor:Bf.Color.orange}}},{key:"def",get:function(){return{fontColor:"#e5c07b"}}},{key:"variable",get:function(){return{fontColor:"#d19a66"}}},{key:"punctuation",get:function(){return{fontColor:"#05a"}}},{key:"property",get:function(){return{fontColor:Bf.Color.rgb(33,150,243)}}},{key:"operator",get:function(){return{fontColor:"#abb2bf"}}},{key:"variable-2",get:function(){return{fontColor:"#e06c75"}}},{key:"variable-3",
get:function(){return{fontColor:"#085"}}},{key:"comment",get:function(){return{fontColor:"#7F848E"}}},{key:"string",get:function(){return{fontColor:"#98c378"}}},{key:"string-2",get:function(){return{fontColor:"#98c378"}}},{key:"meta",get:function(){return{fontColor:"#555"}}},{key:"qualifier",get:function(){return{fontColor:"#d19a66"}}},{key:"builtin",get:function(){return{fontColor:"#30a"}}},{key:"bracket",get:function(){return{fontColor:"#515a6b"}}},{key:"brace",get:function(){return{fontColor:"#abb2bf"}}},
{key:"tag",get:function(){return{fontColor:"#170"}}},{key:"attribute",get:function(){return{fontColor:"#d19a66"}}},{key:"error",get:function(){return{backgroundColor:"#ff4c4c"}}},{key:"invalidchar",get:function(){return{backgroundColor:"#ff4c4c"}}},{key:"diff-file-header",get:function(){return{fontColor:Bf.Color.white,fontWeight:"bold",backgroundColor:Bf.Color.rgba(136,136,136,.7)}}},{key:"diff-hunk-header",get:function(){return{backgroundColor:Bf.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"coord",
get:function(){return{backgroundColor:Bf.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"inserted",get:function(){return{backgroundColor:"rgba(108,255,108, .3)"}}},{key:"deleted",get:function(){return{backgroundColor:"rgba(255,108,108, .3)"}}}],[{key:"className",get:function(){return"DarkTheme"}},{key:"instance",get:function(){return this._instance||(this._instance=new this)}}],bb,{pathInPackage:function(){return"themes/dark.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:42,end:3048})}(void 0),Qf=rg=Bf.DarkTheme;Bf.default=rg;var Vc=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js");Vc.inspect=fd;Vc.remoteInspect=ue;Vc.generateReferenceExpression=Md;Vc.onNumberDragStart=function(Ga,bb){bb.initPos=Ga.position;bb.factorLabel=(new Vc.Tooltip({description:"1x"})).openInWorld(Ga.hand.position.addXY(10,10))};Vc.onNumberDrag=
function(Ga,bb){var Gb=Vc.getScaleAndOffset(Ga,bb),ba=Gb.scale;Gb=Gb.offset;bb.factorLabel.position=Ga.hand.position.addXY(10,10);bb.factorLabel.description=ba+"x";return Vc.getCurrentValue(Gb,ba,bb)};Vc.onNumberDragEnd=function(Ga,bb){var Gb=Vc.getScaleAndOffset(Ga,bb);Ga=Gb.offset;Gb=Gb.scale;bb.factorLabel.softRemove();return Vc.getCurrentValue(Ga,Gb,bb)};Vc.getScaleAndOffset=function(Ga,bb){var Gb=Ga.position.subPt(bb.initPos);Ga=Gb.x;bb=Vc.num.roundTo(Math.exp(-Gb.y/$world.height*6),.01)*bb.baseFactor;
return{offset:Ga,scale:bb}};Vc.getCurrentValue=function(Ga,bb,Gb){return Math.max(Gb.min,Math.min(Gb.max,Gb.scrubbedValue+(Gb.floatingPoint?Ga*bb:Math.round(Ga*bb))))};Vc.Color=zb;Vc.Rectangle=dc;Vc.rect=fe;Vc.pt=ke;Vc.obj=nd;Vc.num=Cb;Vc.Path=Zb;Vc.arr=kc;Vc.promise=rc;Vc.connect=Qc;Vc.disconnect=Lb;Vc.once=Za;Vc.Morph=Gc;Vc.Tooltip=$c;Vc.VerticalLayout=ed;Vc.GridLayout=$b;Vc.HorizontalLayout=ob;Vc.morph=hd;Vc.CustomLayout=zc;Vc.Label=Mc;Vc.Icon=Ja;Vc.StyleSheet=md;Vc.config=Ra;Vc.Tree=ub;Vc.LoadingIndicator=
Mb;Vc.DropDownList=Ob;Vc.DropDownSelector=kb;Vc.SearchField=ib;Vc.LabeledCheckBox=Jb;Vc.MorphHighlighter=Uc;Vc.InteractiveMorphSelector=Xc;Vc.printValue=Lf;Vc.RemoteInspectionTree=Mf;Vc.InspectionTree=we;Vc.isMultiValue=Ie;Vc.valueWidgets=Q;Vc.popovers=fa;Vc.DarkTheme=Qf;Vc.DefaultTheme=Kb;Vc.syncEval=vc;Vc.inspectorCommands=[{name:"focus codeEditor",exec:function(Ga){Ga.get("codeEditor").show();Ga.get("codeEditor").focus();return!0}},{name:"focus propertyTree",exec:function(Ga){Ga.get("propertyTree").show();
Ga.get("propertyTree").focus();return!0}}];(function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),Gb=bb.hasOwnProperty("DraggedProp")&&"function"===typeof bb.DraggedProp?bb.DraggedProp:bb.DraggedProp=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rb(Gb,Ga,[{key:"applyToTarget",value:function(ba){var Ia=this.currentTarget,nb=this.control;this.remove();Vc.MorphHighlighter.removeHighlighters(ba.world);
if(Ia)if(Ia.isText&&"js"===Ia.editorModeName){var xb=Ia.evalEnvironment.context;ba=Ia.textPositionFromPoint(Ia.localize(ba.position));xb=Vc.generateReferenceExpression(this.sourceObject,{fromMorph:xb});nb.keyString&&(xb+="."+nb.keyString);Ia.insertTextAndSelect(xb,ba);Ia.focus()}else"propertyValue"in nb&&(Ia[nb.keyString]=nb.propertyValue)}},{key:"update",value:function(ba){ba=ba.hand.globalPosition;var Ia=this.morphBeneath(ba),nb;if(Ia){for(Ia==this.morphHighlighter&&(Ia=Ia.morphBeneath(ba));nb=
[Ia].concat($jscomp.arrayFromIterable(Ia.ownerChain())).find(function(xb){return!xb.visible});)Ia=nb=nb.morphBeneath(ba);if(Ia!=this.currentTarget){this.currentTarget=Ia;this.morphHighlighter&&this.morphHighlighter.deactivate();if(Ia.isWorld)return;this.morphHighlighter=Vc.MorphHighlighter.for($world,Ia);this.morphHighlighter.show()}this.position=ba}}}],[{key:"className",get:function(){return"DraggedProp"}},{key:"properties",get:function(){return{control:{},sourceObject:{},borderColor:{defaultValue:Vc.Color.rgb(169,
204,227)},fill:{defaultValue:Vc.Color.rgb(235,245,251).withA(.8)},borderWidth:{defaultValue:2},borderRadius:{defaultValue:4},submorphs:{after:["control"],initialize:function(){var ba=this.control;if(!ba)return this.submorphs=[];this.height=22;this.submorphs=[ba];ba.top=0;ba.fontSize=14;"function"===typeof ba.relayout&&ba.relayout();this.width=ba.width+20;this.adjustOrigin(Vc.pt(10,10))}}}}}],bb,{pathInPackage:function(){return"js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1268,end:3690})})(Vc.Morph);(function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),Gb=bb.hasOwnProperty("DraggableTreeLabel")&&"function"===typeof bb.DraggableTreeLabel?bb.DraggableTreeLabel:bb.DraggableTreeLabel=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Rb(Gb,Ga,[{key:"inspector",get:function(){return this.owner.owner}},{key:"onDragStart",value:function(ba){this.draggedProp=new Vc.DraggedProp({sourceObject:this.inspector.targetObject,control:this.copy()});this.draggedProp.openInWorld();Vc.connect(ba.hand,"update",this.draggedProp,"update")}},{key:"onDrag",value:function(ba){}},{key:"onDragEnd",value:function(ba){Vc.disconnect(ba.hand,"update",this.draggedProp,"update");this.draggedProp.applyToTarget(ba)}}],[{key:"className",get:function(){return"DraggableTreeLabel"}},
{key:"properties",get:function(){return{styleClasses:{defaultValue:["TreeLabel"]},draggable:{defaultValue:!0},nativeCursor:{defaultValue:"-webkit-grab"},keyString:{},valueString:{},fontFamily:{defaultValue:Vc.config.codeEditor.defaultStyle.fontFamily},fill:{defaultValue:Vc.Color.transparent},padding:{defaultValue:Vc.rect(0,1,10,-1)},isSelected:{after:["submorphs"],set:function(ba){this.setProperty("isSelected",ba);ba?(this.removeStyleClass("deselected"),this.addStyleClass("selected")):(this.addStyleClass("deselected"),
this.removeStyleClass("selected"));this.control&&(this.control.isSelected=ba)}}}}}],bb,{pathInPackage:function(){return"js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3692,end:5015})})(Vc.Label);we=function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),Gb=bb.hasOwnProperty("PropertyControl")&&
"function"===typeof bb.PropertyControl?bb.PropertyControl:bb.PropertyControl=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rb(Gb,Ga,[{key:"menuItems",value:function(){return this._targetMenuItems||[]}},{key:"renderValueSelector",value:function(ba,Ia,nb){ba.control=new Vc.DropDownSelector({opacity:.8,fill:Vc.Color.white.withA(.5),name:"valueString",styleClasses:["TreeLabel"],selectedValue:Ia,padding:0,values:nb});
Vc.connect(ba.control,"update",ba,"propertyValue",{updater:function(xb,Ic){this.targetObj.propertyValue!=Ic&&xb(Ic)}});Vc.connect(ba,"update",ba.control,"selectedValue",{updater:function(xb,Ic){Ic=Ic&&Ic.valueOf?Ic.valueOf():Ic;this.targetObj.propertyValue!=Ic&&xb(Ic)}});return ba}},{key:"toggleMultiValuePlaceholder",value:function(ba){this.multiValuePlaceholder=this.multiValuePlaceholder||this.addMorph({fill:Vc.Color.transparent,layout:new Vc.HorizontalLayout({spacing:3}),name:"multi value placeholder",
nativeCursor:"pointer",submorphs:Vc.arr.range(0,2).map(function(Ia){return{type:"ellipse",fill:Vc.Color.gray.withA(.5),reactsToPointer:!1,extent:Vc.pt(7,7)}})});ba?(Vc.connect(this.multiValuePlaceholder,"onMouseDown",this,"propertyValue",{converter:function(){return this.targetObj.propertyValue.valueOf()}}),this.control.opacity=0,this.multiValuePlaceholder.visible=!0):(Vc.disconnect(this.multiValuePlaceholder,"onMouseDown",this,"propertyValue"),this.control.opacity=1,this.multiValuePlaceholder.visible=
!1)}},{key:"toggleFoldableValue",value:function(ba){this.foldableProperties&&this.toggleMultiValuePlaceholder(Vc.isMultiValue(ba,this.foldableProperties))}},{key:"asFoldable",value:function(ba){this.foldableProperties=ba;Vc.connect(this,"update",this,"toggleFoldableValue")}},{key:"relayout",value:function(){this.fit();this.control&&(this.control.topLeft=this.textBounds().topRight().addXY(-2,1),this.width=this.textBounds().width+this.control.bounds().width);this.height=18;this.multiValuePlaceholder&&
(this.multiValuePlaceholder.leftCenter=this.textBounds().rightCenter())}},{key:"toString",value:function(){return this.keyString+": "+this.valueString}},{key:"highlight",value:function(){this.highlighter&&this.highlighter.remove();var ba=this.highlighter=this.addMorph({type:"label",name:"valueString",value:this.keyString});ba.isLayoutable=!1;ba.fontWeight="bold";ba.fontColor=Vc.Color.orange;ba.reactsToPointer=!1;ba.fadeOut(2E3)}}],[{key:"className",get:function(){return"PropertyControl"}},{key:"properties",
get:function(){return{root:{},keyString:{},valueString:{},propertyValue:{},control:{after:["submorphs"],derived:!0,get:function(){return this.submorphs[0]||!1},set:function(ba){this.submorphs=[ba]}},layout:{initialize:function(){this.layout=new Vc.CustomLayout({relayout:function(ba){ba.relayout()}})}},submorphs:{initialize:function(){this.value=this.keyString+":";this.submorphs=[]}}}}},{key:"inferType",value:function(ba){return(ba=ba.value)&&(ba.isColor||ba.isGradient)?"Color":ba&&ba.isPoint?"Point":
Vc.obj.isBoolean(ba)?"Boolean":Vc.obj.isNumber(ba)?"Number":Vc.obj.isString(ba)?"String":ba&&ba.isRectangle?"Rectangle":!1}},{key:"render",value:function(ba){ba.spec.type||(ba.spec=Object.assign({},ba.spec,{type:this.inferType(ba)}));switch(ba.spec.type){case "Color":var Ia=this.renderColorControl(ba);break;case "ColorGradient":Ia=this.renderColorControl(Object.assign({},ba,{gradientEnabled:!0}));break;case "Number":Ia=this.renderNumberControl(ba);break;case "String":Ia=this.renderStringControl(ba);
break;case "RichText":Ia=this.renderStringControl(ba);break;case "Layout":Ia=this.renderLayoutControl(ba);break;case "Enum":Ia=this.renderEnumControl(ba);break;case "Shadow":Ia=this.renderShadowControl(ba);break;case "Point":Ia=this.renderPointControl(ba);break;case "Rectangle":Ia=this.renderRectangleControl(ba);break;case "Boolean":Ia=this.renderBooleanControl(ba);break;default:Ia=this.renderItSomehow(ba)}Ia.control&&(Vc.connect(Ia.control,"openWidget",Ia,"openWidget"),Ia.toggleFoldableValue(ba.value));
return Ia}},{key:"baseControl",value:function(ba){var Ia=ba.spec;ba=new this({keyString:ba.keyString,valueString:ba.valueString,isSelected:!1,propertyValue:ba.value});Ia.foldable&&ba.asFoldable(Ia.foldable);return ba}},{key:"renderGrabbableKey",value:function(ba){var Ia=this,nb=ba.target;return[ba.keyString+":",{nativeCursor:"-webkit-grab",onDragStart:function(xb){xb.state.draggedProp=new Vc.DraggedProp({sourceObject:nb,control:Ia.baseControl(ba)});xb.state.draggedProp.openInWorld();Vc.connect(xb.hand,
"update",xb.state.draggedProp,"update")},onDrag:function(xb){},onDragEnd:function(xb){Vc.disconnect(xb.hand,"update",xb.state.draggedProp,"update");xb.state.draggedProp.applyToTarget(xb)}}]}},{key:"renderEnumControl",value:function(ba){var Ia=ba.value,nb=ba.spec.values,xb=ba.keyString,Ic=ba.target,wc=ba.node;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(ba)),[" "+(Ia?Ia.valueOf?Ia.valueOf():Ia:"Not set"),{nativeCursor:"pointer",onMouseDown:function(Dd,yd){return $jscomp.asyncExecutePromiseGeneratorProgram(function(zd){Ic.world().openWorldMenu(Dd,
nb.map(function(He){return{string:He.toString(),action:function(){Ic[xb]=He;wc.rerender()}}}));zd.jumpToEnd()})}}],$jscomp.arrayFromIterable(Vc.Icon.textAttribute("angle-down",{paddingTop:"4px",paddingLeft:"4px",opacity:.7})))}},{key:"renderStringControl",value:function(ba){var Ia=ba.value;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(ba)),[" "+(200<Ia.length?Ia.slice(0,20)+"...":Ia),{fontColor:Vc.Color.blue,paddingTop:"0px"}])}},{key:"renderRectangleControl",value:function(ba){var Ia=
ba.value,nb=ba.keyString,xb=ba.valueString,Ic=ba.target,wc=ba.node;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(ba)),[" "+xb,{fontColor:Vc.Color.black,nativeCursor:"pointer",onMouseDown:function(Dd){var yd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(zd){if(1==zd.nextAddress)return yd=new Vc.popovers.RectanglePopover({hasFixedPosition:!0,rectangle:Ia}),yd.relayout(),zd.yield(yd.fadeIntoWorld(Dd.positionIn(Ic.world())),2);Vc.connect(yd,"rectangle",function(He){Ic[nb]=
He;wc.rerender()});zd.jumpToEnd()})}}])}},{key:"renderBooleanControl",value:function(ba){var Ia=ba.value,nb=ba.keyString,xb=ba.valueString,Ic=ba.target,wc=ba.node;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(ba)),[" "+xb,{nativeCursor:"pointer",fontColor:Ia?Vc.Color.green:Vc.Color.red,onMouseDown:function(Dd){Ic[nb]=!Ic[nb];wc.rerender()}}])}},{key:"renderNumberControl",value:function(ba){var Ia=ba.value,nb=ba.spec,xb=ba.keyString,Ic=ba.valueString,wc=ba.node,Dd=ba.target,yd=
ba.tree,zd=void 0===wc._numberControls?new Rf:wc._numberControls,He=$jscomp.makeIterator(zd.submorphs),df=He.next().value,og=He.next().value;zd.fontColor=yd.fontColor;var Jh=wc._numberControls=zd;"max"in nb&&"min"in nb&&-Infinity!=nb.min&&Infinity!=nb.max?(Jh.baseFactor=(nb.max-nb.min)/100,Jh.floatingPoint=nb.isFloat,Jh.max=nb.max,Jh.min=nb.min):(Jh.floatingPoint=nb.isFloat,Jh.baseFactor=.5,Jh.min=void 0!=nb.min?nb.min:-Infinity,Jh.max=void 0!=nb.max?nb.max:Infinity);var Oi=Vc.valueWidgets.NumberWidget.properties.fontColor.defaultValue;
return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(ba)),$jscomp.arrayFromIterable(wc._inputMorph?[wc._inputMorph,{}]:[" "+(void 0!=Ia&&(Ia.valueOf?Ia.valueOf():Ia).toFixed(nb.isFloat?3:0))+" ",{fontColor:Oi,onMouseUp:function(Th){wc._inputMorph=Vc.morph({type:"input",fill:null,fontColor:Oi,fontFamily:"IBM Plex Mono",fontSize:14,padding:Vc.rect(8,2,-6,2),height:23,cursorColor:Vc.Color.white,value:Ia.valueOf?Ia.valueOf():Ic});Dd[xb]=Ia;wc._inputMorph.focus();Vc.once(wc._inputMorph,"inputAccepted",
function(Kj){delete wc._inputMorph;Dd[xb]=nb.isFloat?Number.parseFloat(Kj):Number.parseInt(Kj);wc.rerender()});Vc.once(wc._inputMorph,"onBlur",function(Kj){wc._inputMorph&&(delete wc._inputMorph,Dd[xb]=Ia,wc.rerender())});wc.rerender()},onDragStart:function(Th){Jh.scrubbedValue=Ia;Vc.onNumberDragStart(Th,Jh)},onDrag:function(Th){Dd[xb]=Vc.onNumberDrag(Th,Jh);wc.rerender()},onDragEnd:function(Th){return Vc.onNumberDragEnd(Th,Jh)}},zd,{onMouseUp:function(){df.fill=og.fill=null},onMouseDown:function(Th){if(Th.targetMorph===
df){df.fill=Vc.Color.white.withA(.2);if("max"in nb&&Dd[xb]>=nb.max)return;Dd[xb]+=1}if(Th.targetMorph===og){og.fill=Vc.Color.white.withA(.2);if("min"in nb&&Dd[xb]<=nb.min)return;--Dd[xb]}wc.rerender()}}]))}},{key:"renderShadowControl",value:function(ba){var Ia=ba.keyString,nb=ba.value,xb=ba.target,Ic=ba.node;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(ba)),[""+(nb?nb.toFilterCss():"No Shadow"),{nativeCursor:"pointer",onMouseDown:function(wc){var Dd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yd){if(1==
yd.nextAddress)return Dd=new Vc.popovers.ShadowPopover({shadowValue:xb[Ia],hasFixedPosition:!0}),yd.yield(Dd.fadeIntoWorld(wc.positionIn(xb.world())),2);Vc.connect(Dd,"shadowValue",function(zd){xb[Ia]=zd;Ic.rerender()});yd.jumpToEnd()})}}])}},{key:"renderPointControl",value:function(ba){var Ia=ba.keyString,nb=ba.value,xb=ba.target,Ic=ba.node,wc=Vc.valueWidgets.NumberWidget.properties.fontColor.defaultValue,Dd={nativeCursor:"pointer",onMouseDown:function(yd){var zd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(He){if(1==
He.nextAddress)return zd=new Vc.popovers.PointPopover({pointValue:xb[Ia],hasFixedPosition:!0}),He.yield(zd.fadeIntoWorld(yd.positionIn(xb.world())),2);Vc.connect(zd,"pointValue",function(df){xb[Ia]=df;Ic.rerender()});He.jumpToEnd()})}};return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(ba)),[" pt(",Object.assign({},Dd),""+nb.x.toFixed(),Object.assign({fontColor:wc},Dd),",",Object.assign({},Dd),""+nb.y.toFixed(),Object.assign({fontColor:wc},Dd),")",Object.assign({},Dd)])}},{key:"renderLayoutControl",
value:function(ba){var Ia=ba.valueString,nb=ba.value;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(ba)),[" "+(nb?Ia:"No Layout"),{onMouseDown:function(xb){}}])}},{key:"renderColorControl",value:function(ba){var Ia=ba.node,nb=ba.gradientEnabled,xb=ba.valueString,Ic=ba.keyString,wc=ba.value,Dd=ba.target;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(ba)),[Vc.morph({fill:wc.valueOf?wc.valueOf():wc,extent:Vc.pt(15,15),borderColor:Vc.Color.gray,borderWidth:1}),{paddingLeft:"5px",
paddingTop:"4px",paddingRight:"5px"},""+(wc?wc.valueOf?wc.valueOf():xb:"No Color"),{nativeCursor:"pointer",onMouseDown:function(yd){var zd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(He){if(1==He.nextAddress)return zd=new Vc.popovers.FillPopover({hasFixedPosition:!0,handleMorph:Dd,fillValue:wc,title:"Fill Control",gradientEnabled:nb}),He.yield(zd.fadeIntoWorld(yd.positionIn(Dd.world())),2);Vc.connect(zd,"fillValue",function(df){Dd[Ic]=df;Ia.rerender()});He.jumpToEnd()})}}])}},{key:"renderItSomehow",
value:function(ba){var Ia=ba.valueString;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(ba)),[" "+Ia,{}])}}],bb,{pathInPackage:function(){return"js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5024,end:20444})}(Vc.DraggableTreeLabel);Vc.PropertyControl=we;Vc.PropertyControl=we;Vc.PropertyControl=we;
Vc.inspect=fd;Vc.inspect=fd;Vc.remoteInspect=ue;Vc.remoteInspect=ue;Vc.generateReferenceExpression=Md;Vc.generateReferenceExpression=Md;var Rf=function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),Gb=bb.hasOwnProperty("NumberControls")&&"function"===typeof bb.NumberControls?bb.NumberControls:bb.NumberControls=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rb(Gb,Ga,void 0,[{key:"className",
get:function(){return"NumberControls"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new Vc.VerticalLayout({spacing:0,orderByIndex:!0})}},fill:{defaultValue:Vc.Color.transparent},width:{defaultValue:15},fontColor:{derived:!0,set:function(ba){this.submorphs.map(function(Ia){return Ia.fontColor=ba})}},submorphs:{initialize:function(){this.submorphs=[Vc.Icon.makeLabel("sort-up",{autofit:!0,opacity:.6,nativeCursor:"pointer",padding:Vc.rect(5,2,0,-6),fontSize:12}),
Vc.Icon.makeLabel("sort-up",{top:10,rotation:Math.PI,autofit:!0,padding:Vc.rect(5,4,0,-9),opacity:.6,nativeCursor:"pointer",fontSize:12})]}}}}}],bb,{pathInPackage:function(){return"js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23095,end:24127})}(Vc.Morph);(function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),
Gb=bb.hasOwnProperty("PropertyTree")&&"function"===typeof bb.PropertyTree?bb.PropertyTree:bb.PropertyTree=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rb(Gb,Ga,[{key:"onDrag",value:function(ba){this._onDragHandler&&this._onDragHandler(ba)}}],[{key:"className",get:function(){return"PropertyTree"}}],bb,{pathInPackage:function(){return"js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:25279,end:25389})})(Vc.Tree);we=function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),Gb=bb.hasOwnProperty("Inspector")&&"function"===typeof bb.Inspector?bb.Inspector:bb.Inspector=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rb(Gb,Ga,[{key:"onWindowClose",
value:function(){this.stopStepping();this.ui.propertyTree.treeData.dispose();this.openWidget&&this.closeOpenWidget()}},{key:"onMouseMove",value:function(ba){}},{key:"__after_deserialize__",value:function(ba,Ia,nb){var xb=this,Ic=new Vc.PropertyTree(Object.assign({name:"propertyTree"},this.treeStyle,{treeData:Vc.InspectionTree.forObject(null,this)}));this.addMorph(Ic,this.getSubmorphNamed("terminal toggler"));this.layout.col(0).row(1).group.morph=Ic;this.whenRendered().then(function(){xb.targetObject&&
(xb.targetObject=xb.targetObject)});Rb._get(Object.getPrototypeOf(Gb.prototype),"__after_deserialize__",this).call(this,ba,Ia,nb)}},{key:"__additionally_serialize__",value:function(ba,Ia,nb,xb){ba=ba.props.submorphs.value;for(Ia=ba.length;Ia--;)nb.refForId(ba[Ia].id).realObj==this.ui.propertyTree&&Vc.arr.removeAt(ba,Ia)}},{key:"renderDraggableTreeLabel",value:function(ba){return new Vc.DraggableTreeLabel(ba)}},{key:"renderPropertyControl",value:function(ba){return Vc.PropertyControl.render(ba)}},
{key:"onLoad",value:function(){var ba=this.ui,Ia=ba.codeEditor,nb=ba.thisBindingSelector,xb=ba.propertyTree;Ia.changeEditorMode("js").then(function(){return Ia.evalEnvironment={targetModule:"lively://lively.morphic/inspector",get context(){return"selection"==nb.selection?Ia.owner.selectedContext:Ia.owner.targetObject},get systemInterface(){return Vc.Path("treeData.systemInterface").get(xb)},format:"esm"}}).catch(function(Ic){return $world.logError(Ic)})}},{key:Symbol.for("lively-instance-initialize"),
value:function(ba){Rb._get(Object.getPrototypeOf(Gb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,ba);ba=this.ui;var Ia=ba.targetPicker,nb=ba.propertyTree,xb=ba.resizer,Ic=ba.terminalToggler,wc=ba.unknowns,Dd=ba.internals,yd=ba.searchField,zd=ba.codeEditor,He=ba.fixImportButton,df=ba.thisBindingSelector;zd.changeEditorMode("js").then(function(){return zd.evalEnvironment={targetModule:"lively://lively.morphic/inspector",get context(){return"selection"==df.selection?zd.owner.selectedContext:
zd.owner.targetObject},get systemInterface(){return nb.treeData.systemInterface},format:"esm"}}).catch(function(og){return $world.logError(og)});Vc.connect(Ia,"onMouseDown",this,"selectTarget");Vc.connect(nb,"onScroll",this,"repositionOpenWidget");Vc.connect(xb,"onDrag",this,"adjustProportions");Vc.connect(Ic,"onMouseDown",this,"toggleCodeEditor");Vc.connect(wc,"trigger",this,"filterProperties");Vc.connect(Dd,"trigger",this,"filterProperties");Vc.connect(yd,"searchInput",this,"filterProperties");
Vc.connect(nb,"nodeCollapseChanged",this,"filterProperties");Vc.connect(this,"extent",this,"relayout");Vc.connect(df,"selection",this,"bindCodeEditorThis");Vc.connect(He,"fire",zd,"execCommand",{updater:function(og){return og("[javascript] fix undeclared variables",{autoApplyIfSingleChoice:!0})}})}},{key:"refreshSelectedLine",value:function(){var ba=this.ui.propertyTree.selectedIndex-1,Ia=this.ui.propertyTree.selectedNode;this.ui.propertyTree.selectedNode.refreshProperty();Ia=this.ui.propertyTree.document.getLine(ba).textAndAttributes.slice(0,
4).concat(Ia.display(this));ba=this.ui.propertyTree.lineRange(ba,!1);this.ui.propertyTree.replace(ba,Ia,!1,!1,!1);this.ui.propertyTree.selectedNode=this.ui.propertyTree.selectedNode}},{key:"refreshAllProperties",value:function(){this.world()||this.stopStepping();if(this.targetObject&&this.targetObject.isMorph)if(this.targetObject._styleSheetProps!=this.lastStyleSheetProps)this.refreshTreeView(),this.lastStyleSheetProps=this.targetObject._styleSheetProps;else{var ba=Vc.arr.last(this.targetObject.env.changeManager.changesFor(this.targetObject));
if(ba!=this.lastChange||this.lastSubmorphs!=Vc.printValue(this.targetObject&&this.targetObject.submorphs))this.focusedNode&&this.focusedNode.keyString==ba.prop&&this.repositionOpenWidget(),this.lastChange=ba,this.lastSubmorphs=Vc.printValue(this.targetObject&&this.targetObject.submorphs),this.refreshTreeView()}else this.stopStepping()}},{key:"refreshTreeView",value:function(){var ba;this.originalTreeData&&this.originalTreeData.asListWithIndexAndDepth(!1).forEach(function(Ia){Ia=Ia.node;Ia.target&&
(ba=Ia.foldableNode?Ia.target[Ia.foldableNode.key][Ia.key]:Ia.target[Ia.key],!Vc.obj.equals(ba,Ia.value)&&Ia.refreshProperty&&Ia.refreshProperty(ba))});this.ui.propertyTree.update(!0)}},{key:"isInspector",get:function(){return!0}},{key:"prepareForNewTargetObject",value:function(ba,Ia){Ia=void 0===Ia?!1:Ia;var nb=this,xb,Ic,wc,Dd,yd,zd,He,df,og,Jh,Oi,Th,Kj,Kh,gl;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kf){switch(Kf.nextAddress){case 1:if(!nb.isUpdating()){Kf.jumpTo(2);break}return Kf.yield(nb.whenUpdated(),
2);case 2:xb=Vc.promise.deferred();Ic=xb.promise;wc=!!nb.target;nb.updateInProgress=Ic;Kf.setCatchFinallyBlocks(4);Ia&&(Dd=Vc.LoadingIndicator.open("connecting to remote..."));if(!Ia){yd=Vc.InspectionTree.forObject(ba,nb);Kf.jumpTo(6);break}return Kf.yield(Vc.RemoteInspectionTree.forObject(ba,nb),7);case 7:yd=Kf.yieldResult;case 6:return zd=yd,He=nb.ui.propertyTree,Kf.yield(zd.collapse(zd.root,!1),8);case 8:if(!zd.root.children){Kf.jumpTo(9);break}return Kf.yield(zd.collapse(zd.root.children[0],!1),
9);case 9:if(df=nb.originalTreeData&&nb.originalTreeData.diff(zd)){og=$jscomp.makeIterator(df);for(Jh=og.next();!Jh.done;Jh=og.next())Oi=Jh.value,Th=$jscomp.makeIterator(Oi),Kj=Th.next().value,Kh=Th.next().value,Kj.refreshProperty(Kh.value);Kf.jumpTo(11);break}He.treeData=zd;return Kf.yield(nb.filterProperties(),12);case 12:if(!He.treeData.root.isCollapsed){Kf.jumpTo(13);break}return Kf.yield(He.onNodeCollapseChanged({node:zd.root,isCollapsed:!1}),14);case 14:He.selectedIndex=1;case 13:return Kf.yield(He.execCommand("uncollapse selected node"),
11);case 11:nb.toggleWindowStyle(wc);Dd&&Dd.remove();Kf.leaveTryBlock(5);break;case 4:gl=Kf.enterCatchBlock(),nb.showError(gl);case 5:nb.startStepping(1E3,"refreshAllProperties"),nb.updateInProgress=null,Kf.jumpToEnd()}})}},{key:"toggleWindowStyle",value:function(ba){ba=void 0===ba?!0:ba;var Ia=this,nb,xb,Ic,wc,Dd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yd){if(1==yd.nextAddress)return nb=300,wc=Ia.ui.codeEditor.pluginFind(function(zd){return zd.runEval}),Dd=Ia.getWindow(),yd.yield(wc.runEval("System.get('@system-env').node"),
2);yd.yieldResult.value?(Ic=[].concat($jscomp.arrayFromIterable(Vc.arr.without(Dd.styleClasses,"local")),["node"]),xb=Vc.DarkTheme.instance):(Ic=["local"].concat($jscomp.arrayFromIterable(Dd?Vc.arr.without(Dd.styleClasses,"node"):[])),xb=Vc.DefaultTheme.instance);wc.theme=xb;ba?(Dd&&Dd.animate({duration:nb,styleClasses:Ic}),Ia.ui.codeEditor.animate({fill:xb.background,duration:nb})):Dd&&(Dd.styleClasses=Ic);Ia.ui.codeEditor.textString=Ia.ui.codeEditor.textString;wc.highlight();yd.jumpToEnd()})}},
{key:"isUpdating",value:function(){return!!this.updateInProgress}},{key:"whenUpdated",value:function(){return this.updateInProgress||Promise.resolve()}},{key:"focus",value:function(){this.ui.codeEditor.focus()}},{key:"build",value:function(){var ba=this,Ia=Object.assign({type:"text",borderWidth:1,borderColor:Vc.Color.gray,lineWrapping:"by-chars"},Vc.config.codeEditor.defaultStyle,{textString:""}),nb=Vc.Icon.textAttribute("long-arrow-alt-right",{textStyleClasses:["fas"]});Vc.rect(0,0,this.width,30);
var xb=new Vc.SearchField({styleClasses:["idle"],name:"searchField"});nb[1].paddingTop="2px";this.submorphs=[{name:"searchBar",submorphs:[xb,{type:"button",name:"targetPicker",padding:Vc.rect(2,2,0,0),borderRadius:15,master:{auto:"styleguide://System/buttons/light"},tooltip:"Change Inspection Target",label:Vc.Icon.textAttribute("crosshairs")},new Vc.LabeledCheckBox({label:"Internals",name:"internals"}),new Vc.LabeledCheckBox({label:"Unknowns",name:"unknowns"})]},new Vc.PropertyTree(Object.assign({name:"propertyTree"},
this.treeStyle,{treeData:Vc.InspectionTree.forObject(null,this)})),Vc.Icon.makeLabel("keyboard",{name:"terminal toggler"}),{name:"resizer"},Object.assign({name:"codeEditor"},Ia),{name:"fix import button",type:"button",visible:!1,label:"fix undeclared vars"},{name:"this binding selector",type:Vc.DropDownList,visible:!1,listAlign:"top",items:[{isListItem:!0,value:"target",label:["this ",null].concat($jscomp.arrayFromIterable(nb),[" target",null])},{isListItem:!0,value:"selection",label:["this ",null].concat($jscomp.arrayFromIterable(nb),
[" selection",null])}]}];this.ui.thisBindingSelector.listMorph.dropShadow=!0;this.ui.thisBindingSelector.listMorph.borderRadius=3;this.ui.thisBindingSelector.whenRendered().then(function(){ba.ui.thisBindingSelector.selection="target"})}},{key:"selectTarget",value:function(){var ba=this,Ia,nb,xb,Ic;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wc){switch(wc.nextAddress){case 1:if(ba.env.eventDispatcher.isKeyPressed("Shift"))return nb=$jscomp,xb=nb.makeIterator,wc.yield($world.execCommand("select morph",
{justReturn:!0}),5);ba.toggleSelectionInstructions(!0);return wc.yield(Vc.InteractiveMorphSelector.selectMorph(),4);case 4:Ia=wc.yieldResult;ba.toggleSelectionInstructions(!1);wc.jumpTo(3);break;case 5:Ic=xb.call(nb,wc.yieldResult),Ia=Ic.next().value;case 3:Ia&&(ba.targetObject=Ia),wc.jumpToEnd()}})}},{key:"toggleSelectionInstructions",value:function(ba){if(ba&&!this.instructionWidget){var Ia=Vc.morph({type:"label",name:"escapeKey",value:"esc"});Ia.whenRendered().then(function(){return Ia.fit()});
this.instructionWidget=this.addMorph({type:"text",opacity:0,center:this.extent.scaleBy(.5),width:120,fixedWidth:!0,lineWrapping:!0,name:"selectionInstruction",textAndAttributes:["Select a new morph to inspect by hovering over it and clicking left. You can exit this mode by pressing ",{},Ia,{}]});this.instructionWidget.animate({opacity:1,duration:200})}else this.instructionWidget.fadeOut(200),this.instructionWidget=null}},{key:"closeOpenWidget",value:function(){this.openWidget.close()}},{key:"onWidgetOpened",
value:function(ba){ba=ba.widget;this.openWidget&&this.openWidget.fadeOut();this.focusedNode=this.ui.propertyTree.selectedNode;ba.epiMorph=!0;this.openWidget=ba;Vc.once(ba,"close",this,"closeOpenWidget");Vc.once(this.ui.propertyTree,"onMouseDown",this,"closeOpenWidget")}},{key:"getWidgetPosition",value:function(){var ba=this.ui.propertyTree,Ia=ba.textLayout.boundsFor(ba,{column:0,row:ba.selectedIndex-1});Ia=ba.worldPoint(Vc.pt(Ia.x,Ia.y+Ia.height/2)).addPt(ba.scroll.negated());ba=ba.globalBounds();
Ia.x=this.globalBounds().center().x;Ia.y<ba.top()?Ia=ba.topCenter():ba.bottom()-20<Ia.y&&(Ia=ba.bottomCenter().addXY(0,-20));return Ia}},{key:"repositionOpenWidget",value:function(){this.openWidget&&this.focusedNode&&(this.openWidget.topCenter=this.getWidgetPosition())}},{key:"adjustProportions",value:function(ba){this.layout.row(1).height+=ba.state.dragDelta.y;this.relayout()}},{key:"isEditorVisible",value:function(){return 10<this.ui.codeEditor.height}},{key:"makeEditorVisible",value:function(ba){if(ba!==
this.isEditorVisible()){var Ia=this.extent,nb=this.layout,xb=this.ui,Ic=xb.terminalToggler,wc=xb.codeEditor,Dd=xb.thisBindingSelector;xb=xb.fixImportButton;nb.disable();ba?(Ic.fontColor=Vc.Color.rgbHex("00e0ff"),nb.row(3).height=this.codeEditorHeight||180,nb.row(2).height=5,xb.animate({visible:!0,duration:200}),Dd.animate({visible:!0,duration:200})):(this.codeEditorHeight=nb.row(3).height,Ic.fontColor=Vc.Color.white,nb.row(3).height=nb.row(2).height=0,xb.animate({visible:!1,duration:200}),Dd.animate({visible:!1,
duration:200}));this.extent=Ia;nb.enable({duration:200});this.relayout({duration:200});wc.focus();wc.animate({opacity:ba?1:0,duration:200})}}},{key:"toggleCodeEditor",value:function(){var ba=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){ba.makeEditorVisible(!ba.isEditorVisible());Ia.jumpToEnd()})}},{key:"filterProperties",value:function(){var ba=this,Ia,nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xb){if(1==xb.nextAddress)return Ia=ba.ui.searchField,nb=ba.ui.propertyTree,
ba.originalTreeData||(ba.originalTreeData=nb.treeData),Vc.disconnect(nb.treeData,"onWidgetOpened",ba,"onWidgetOpened"),xb.yield(nb.treeData.filter({maxDepth:2,showUnknown:ba.ui.unknowns.checked,showInternal:ba.ui.internals.checked,iterator:function(Ic){return Ia.matches(Ic.key)}}),2);nb.update();Vc.connect(nb.treeData,"onWidgetOpened",ba,"onWidgetOpened");xb.jumpToEnd()})}},{key:"relayout",value:function(ba){ba=void 0===ba?{}:ba;var Ia=this,nb,xb,Ic,wc,Dd,yd,zd,He,df;return $jscomp.asyncExecutePromiseGeneratorProgram(function(og){Ia.layout&&
Ia.layout.forceLayout();nb=Ia;xb=nb.ui;Ic=xb.fixImportButton;wc=xb.terminalToggler;Dd=xb.propertyTree;yd=xb.thisBindingSelector;zd=Dd.bounds().insetBy(5).bottomLeft();He=Dd.bounds().insetBy(5).bottomRight();df=He.subXY(Ic.width+10,0);yd.width=115;yd.listMorph.itemHeight=20;ba.duration?(wc.animate(Object.assign({bottomLeft:zd},ba)),Ic.animate(Object.assign({bottomRight:He},ba)),yd.animate(Object.assign({bottomRight:df},ba))):(wc.bottomLeft=zd,Ic.bottomRight=He,yd.bottomRight=df);og.jumpToEnd()})}},
{key:"keybindings",get:function(){return[{keys:"Alt-Up",command:"focus propertyTree"},{keys:"Alt-Down",command:"focus codeEditor"},{keys:"F1",command:"focus propertyTree"},{keys:"F2",command:"focus codeEditor"}].concat(Rb._get(Object.getPrototypeOf(Gb.prototype),"keybindings",this))}},{key:"commands",get:function(){return Vc.inspectorCommands}}],[{key:"className",get:function(){return"Inspector"}},{key:"openInWindow",value:function(ba){ba=new this(ba);ba.openInWindow();return ba}},{key:"properties",
get:function(){return{extent:{defaultValue:Vc.pt(400,500)},fill:{defaultValue:Vc.Color.transparent},name:{defaultValue:"inspector"},_serializableTarget:{defaultValue:null},remoteTarget:{after:["submorphs"],set:function(ba){this.setProperty("remoteTarget",ba);this.ui.propertyTree&&(this.originalTreeData=null,this.prepareForNewTargetObject(ba,!0))}},targetObject:{after:["submorphs"],set:function(ba){this._serializableTarget=ba&&ba.isMorph?ba.id:ba;this.setProperty("targetObject",ba);this.ui.propertyTree&&
(this.originalTreeData=null,this.prepareForNewTargetObject(ba))}},originalTreeData:{serialize:!1},selectedContext:{readOnly:!0,derived:!0,get:function(){var ba=this.ui.propertyTree,Ia=ba.selectedNode;ba=ba.treeData;return ba.getContextFor(Ia?Ia:ba.root)}},submorphs:{initialize:function(){this.build()}},ui:{readOnly:!0,derived:!0,after:["submorphs"],get:function(){return{codeEditor:this.getSubmorphNamed("codeEditor"),terminalToggler:this.getSubmorphNamed("terminal toggler"),fixImportButton:this.getSubmorphNamed("fix import button"),
thisBindingSelector:this.getSubmorphNamed("this binding selector"),propertyTree:this.getSubmorphNamed("propertyTree"),unknowns:this.getSubmorphNamed("unknowns"),internals:this.getSubmorphNamed("internals"),targetPicker:this.getSubmorphNamed("targetPicker"),searchBar:this.getSubmorphNamed("searchBar"),searchField:this.getSubmorphNamed("searchField"),resizer:this.getSubmorphNamed("resizer")}}},updateInProgress:{defaultValue:!1,serialize:!1},treeStyle:{defaultValue:{draggable:!0,borderWidth:1,borderColor:Vc.Color.gray,
fontSize:14,fontFamily:Vc.config.codeEditor.defaultStyle.fontFamily}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/inspector/light"}}}}}}],bb,{pathInPackage:function(){return"js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:25406,end:45571})}(Vc.Morph);we=Vc.Inspector;Mf=Da("I",we);Vc.default=
we;var Fg=lively.FreezerRuntime.recorderFor("lively.ide/text/code-evaluation-commands.js");Fg.Inspector=Mf;Fg.string=xd;Fg.Morph=Gc;Fg.pt=ke;Fg.Color=zb;we=[{name:"doit",doc:"Evaluates the selecte code or the current line and report the result",exec:function(Ga,bb,Gb){Gb=void 0===Gb?1:Gb;var ba,Ia,nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xb){switch(xb.nextAddress){case 1:return Ga.maybeSelectCommentOrLine(),xb.setCatchFinallyBlocks(2),bb=Object.assign({},bb,{logDoit:!0,inspect:!0,
inspectDepth:Gb}),xb.yield(Ga.doEval(void 0,bb),4);case 4:ba=xb.yieldResult;Ia=ba.error?ba.error:ba.isError?ba.value:null;xb.leaveTryBlock(3);break;case 2:Ia=nb=xb.enterCatchBlock();case 3:return Ia?Ga.showError(Ia):Ga.setStatusMessage(Fg.string.truncate(ba.value,1E3)),xb.return(ba)}})}},{name:"eval all",doc:"Evaluates the entire text contents",scrollCursorIntoView:!1,exec:function(Ga,bb){var Gb,ba,Ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(nb){switch(nb.nextAddress){case 1:return nb.setCatchFinallyBlocks(2),
nb.yield(Ga.doEval({start:{row:0,column:0},end:Ga.documentEndPosition},Object.assign({},bb,{logDoit:!0})),4);case 4:Gb=nb.yieldResult;ba=Gb.error?Gb.error:Gb.isError?Gb.value:null;nb.leaveTryBlock(3);break;case 2:ba=Ia=nb.enterCatchBlock();case 3:return ba?Ga.showError(ba):Ga.setStatusMessage(String(Gb.value)),nb.return(Gb)}})}},{name:"printit",doc:"Evaluates selected code or the current line and inserts the result in a printed representation",exec:function(Ga,bb){var Gb,ba,Ia,nb,xb,Ic,wc,Dd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yd){switch(yd.nextAddress){case 1:return Ga.maybeSelectCommentOrLine(),
yd.setCatchFinallyBlocks(2),bb=Object.assign({},bb,{asString:!1,logDoit:!0}),yd.yield(Ga.doEval(void 0,bb),4);case 4:Gb=yd.yieldResult;ba=Gb.error?Gb.error:Gb.isError?Gb.value:null;yd.leaveTryBlock(3);break;case 2:ba=Ia=yd.enterCatchBlock();case 3:Ga.selection.collapseToEnd();if(nb=Gb.value&&Gb.value.isColor)return Ga.selection.text=String(Gb.value),xb=new Fg.Morph({fill:Fg.Color.transparent,extent:Fg.pt(Ga.fontSize+2,Ga.fontSize+2),submorphs:[{fill:Gb.value,center:Fg.pt(Ga.fontSize+2,Ga.fontSize+
2).scaleBy(.5)}]}),Ic=Ga.selection.start,wc=Ic.column,Dd=Ic.row,Ga.insertText([xb,{}],Ga.selection.start),Ga.selection.start={column:wc,row:Dd},yd.return(Gb);Ga.insertTextAndSelect(ba?String(ba)+(ba.stack?"\n"+ba.stack:""):String(Gb.value));return yd.return(Gb)}})}},{name:"editit",doc:"Evaluates the expression and opens an object editor on the resulting object.",exec:function(Ga,bb){var Gb,ba,Ia,nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xb){switch(xb.nextAddress){case 1:debugger;
Ga.maybeSelectCommentOrLine();ba=Ga.textInRange(Ga.selection);Ia=Ga.evalEnvironment||{};nb=Ga.pluginFind(function(Ic){return Ic.isEditorPlugin&&"function"===typeof Ic.runEval});Ia.systemInterface||(Ia.systemInterface=nb.systemInterface(bb));if("local"!==Ia.systemInterface.name){xb.jumpTo(2);break}xb.setCatchFinallyBlocks(3);return xb.yield(Ga.doEval(void 0,bb),5);case 5:Gb=xb.yieldResult;ba=Gb.value;xb.leaveTryBlock(2);break;case 3:xb.enterCatchBlock();case 2:return Ga.world().execCommand("open object editor",
{target:ba,evalEnvironment:Ia}),xb.return(Gb)}})}},{name:"inspectit",doc:"Evaluates the expression and opens an inspector widget on the resulting object.",exec:function(Ga,bb){var Gb,ba,Ia,nb,xb,Ic;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wc){switch(wc.nextAddress){case 1:Ga.maybeSelectCommentOrLine();Ia=Ga.textInRange(Ga.selection);nb=Ga.evalEnvironment||{};xb=Ga.pluginFind(function(Dd){return Dd.isEditorPlugin&&"function"===typeof Dd.runEval});nb.systemInterface||(nb.systemInterface=
xb.systemInterface(bb));if("local"!==nb.systemInterface.name){Fg.Inspector.openInWindow({remoteTarget:{code:Ia,evalEnvironment:nb}});wc.jumpTo(2);break}wc.setCatchFinallyBlocks(3);return wc.yield(Ga.doEval(void 0,bb),5);case 5:Gb=wc.yieldResult;ba=Gb.error?Gb.error:Gb.isError?Gb.value:null;Ia=Gb.value;wc.leaveTryBlock(4);break;case 3:ba=Ic=wc.enterCatchBlock();case 4:Fg.Inspector.openInWindow({targetObject:ba?ba:Ia});case 2:return wc.return(Gb)}})}},{name:"print inspectit",doc:"Prints a representation of the object showing it's properties. The count argument defines how deep (recursively) objects will be printed.",
handlesCount:!0,exec:function(Ga,bb,Gb){Gb=void 0===Gb?1:Gb;var ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ia){switch(Ia.nextAddress){case 1:return Ga.maybeSelectCommentOrLine(),Ia.setCatchFinallyBlocks(2),bb=Object.assign({},bb,{inspect:!0,inspectDepth:Gb,logDoit:!0}),Ia.yield(Ga.doEval(void 0,bb),4);case 4:ba=Ia.yieldResult;Ia.leaveTryBlock(3);break;case 2:Ia.enterCatchBlock();case 3:return Ga.selection.collapseToEnd(),Ga.insertTextAndSelect(ba.value),Ia.return(ba)}})}}];Fg.codeEvaluationCommands=
we;Fg.codeEvaluationCommands=we;Fg.codeEvaluationCommands=we;var Hg=lively.FreezerRuntime.recorderFor("lively.ide/text/rich-text-commands.js");Hg.changeAttributeInSelectionOrMorph=function(Ga,bb,Gb){var ba=Ga.selection;Ga.keepPosAtSameScrollOffsetWhile(function(){ba.isEmpty()?Ga[bb]="function"===typeof Gb?Gb(Ga[bb]):Gb:(Ga.undoManager.group(),Ga.changeStyleProperty(bb,function(Ia){return"function"===typeof Gb?Gb(Ia):Gb}),Ga.undoManager.group())})};Mf=[{name:"increase font size",scrollCursorIntoView:!1,
exec:function(Ga){var bb=Ga.fontSize;Hg.changeAttributeInSelectionOrMorph(Ga,"fontSize",function(Gb){Gb=Gb||bb;return Gb+(18<=Gb?2:1)});return!0}},{name:"decrease font size",scrollCursorIntoView:!1,exec:function(Ga){var bb=Ga.fontSize;Hg.changeAttributeInSelectionOrMorph(Ga,"fontSize",function(Gb){Gb=Gb||bb;return Gb-(18>=Gb?1:2)});return!0}},{name:"change font",scrollCursorIntoView:!1,exec:function(Ga){var bb,Gb,ba,Ia,nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xb){if(1==xb.nextAddress){bb=
["serif","sans-serif","monospace"];if(Gb=localStorage["lively.morpic/text-change-font-additional-fonts"])Gb=JSON.parse(Gb),bb.push.apply(bb,$jscomp.arrayFromIterable(Gb));bb.map(function(Ic){return Ic.toLowerCase()}).includes(Ga.fontFamily.toLowerCase())||(bb.push(Ga.fontFamily),Gb=[].concat($jscomp.arrayFromIterable(Gb||[]),[Ga.fontFamily]),localStorage["lively.morpic/text-change-font-additional-fonts"]=JSON.stringify(Gb));return xb.yield($world.editListPrompt("choose font",bb,{requester:Ga,preselect:bb.indexOf(Ga.fontFamily),
historyId:"lively.morpic/text-change-font-hist"}),2)}ba=xb.yieldResult;Ia=$jscomp.makeIterator(ba.selections);if(nb=Ia.next().value)Ga.fontFamily=nb;return xb.return(!0)})}},{name:"set link of selection",scrollCursorIntoView:!1,exec:function(Ga,bb){bb=void 0===bb?{}:bb;var Gb,ba,Ia,nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xb){if(1==xb.nextAddress){if(bb.hasOwnProperty("link"))return xb.jumpTo(2);ba=Ga.selection;Ia=Ga.getStyleInRange(ba);nb=Ia.link;return xb.yield(Ga.world().prompt("Set link",
{input:nb||"https://",historyId:"lively.morphic-rich-text-link-hist"}),3)}if(2!=xb.nextAddress&&(Gb=xb.yieldResult,!Gb))return xb.return();Ga.undoManager.group();Ga.setStyleInRange({link:Gb||void 0},ba);Ga.undoManager.group();xb.jumpToEnd()})}},{name:"set doit of selection",scrollCursorIntoView:!1,exec:function(Ga,bb){var Gb,ba,Ia,nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xb){if(1==xb.nextAddress)return Gb=Ga.selection,ba=Ga.getStyleInRange(Gb),Ia=ba.doit,xb.yield(Ga.world().editPrompt("Enter doit code (runs on clicking the text)",
{requester:Ga,input:Ia?Ia.code:"// empty doit",historyId:"lively.morphic-rich-text-doit-hist",mode:"js",evalEnvironment:Ga.evalEnvForDoit(Ia||{})}),2);nb=xb.yieldResult;Ga.undoManager.group();nb?Ga.addTextAttribute({doit:{code:nb},nativeCursor:"pointer",textDecoration:"underline"},Gb):Ga.removeTextAttribute({doit:null,nativeCursor:"",textDecoration:""},Gb);Ga.undoManager.group();xb.jumpToEnd()})}},{name:"reset text style",scrollCursorIntoView:!1,exec:function(Ga,bb){bb=void 0===bb?{}:bb;Ga.undoManager.group();
bb=!bb.onlySelection&&Ga.selection.isEmpty()?Ga.documentRange:Ga.selection.range;Ga.setStyleInRange(null,bb);Ga.undoManager.group();return!0}},{name:"open text attribute controls",exec:function(Ga){var bb,Gb,ba,Ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(nb){if(1==nb.nextAddress)return nb.yield(System.import("lively.modules"),2);if(3!=nb.nextAddress)return bb=nb.yieldResult,Gb=bb.module,nb.yield(Gb("lively.ide/text/ui.js").load(),3);ba=nb.yieldResult;Ia=ba.RichTextControl;return nb.return(Ia.openFor(Ga))})}}];
Hg.commands=Mf;Hg.commands=Mf;Hg.commands=Mf;var qf=lively.FreezerRuntime.recorderFor("lively.ide/editor-plugin.js");qf.guessTextModeName=Vb;qf.rangedToken=function(Ga,bb,Gb,ba,Ia){return{start:{row:Ga,column:bb},end:{row:Ga,column:Gb},token:ba,mode:Ia}};qf.fun=sc;qf.arr=kc;qf.connect=Qc;qf.disconnect=Lb;qf.DefaultTheme=Kb;qf.tokenizeDocument=pb;qf.modeInfo=Aa;qf.visitDocumentTokens=Rc;qf.getMode=lc;qf.completionCommands=wa;qf.multiSelectCommands=Nc;qf.navCommands=le;qf.codeCommands=jf;qf.codeEvaluationCommands=
we;qf.richTextCommands=Mf;qf.Color=zb;qf.Range=ge;qf.guessTextModeName=Vb;qf.guessTextModeName=Vb;Kb=function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/editor-plugin.js"),Gb=bb.hasOwnProperty("EditorPlugin")&&"function"===typeof bb.EditorPlugin?bb.EditorPlugin:bb.EditorPlugin=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rb(Gb,Ga,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.theme=
qf.DefaultTheme.instance;this._ast=this.checker=null;this._tokens=[];this._tokenizerValidBefore=null;this.__dont_serialize__=["mode","_ast","_tokens","_tokenizerValidBefore"]}},{key:"isEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return null}},{key:"longName",get:function(){return this.shortName}},{key:"attach",value:function(ba){var Ia=this;this.textMorph=ba;qf.connect(ba,"textChange",this,"onTextChange");qf.connect(ba,"viewChange",this,"onViewChange");this.textMorph.whenRendered().then(function(){return Ia.highlight()})}},
{key:"detach",value:function(ba){qf.disconnect(ba,"textChange",this,"onTextChange");qf.disconnect(ba,"viewChange",this,"onViewChange");this.textMorph=null}},{key:"onViewChange",value:function(){this.requestHighlight()}},{key:"onTextChange",value:function(ba){this._ast=null;if(ba){var Ia=this._tokenizerValidBefore;if("replace"===ba.selector){var nb=ba.args[0].start;ba=nb.row;nb=nb.column}else nb=ba=0;if(!Ia||ba<Ia.row||ba===Ia.row&&nb<Ia.column)ba=Math.max(0,ba),this._tokenizerValidBefore={row:ba,
column:nb}}this.requestHighlight()}},{key:"requestHighlight",value:function(ba){var Ia=this;(void 0===ba?0:ba)?this.highlight():qf.fun.debounceNamed(this.id+"-requestHighlight",300,function(){return Ia.highlight()})()}},{key:"highlight",value:function(){var ba=this.textMorph,Ia=this.theme,nb=this.mode,xb=this._tokenizerValidBefore;if(Ia&&ba&&ba.document&&nb){ba.fill=Ia.background;ba.cursorColor=Ia.cursorColor||qf.Color.black;var Ic=ba.viewState,wc={};xb=qf.tokenizeDocument(nb,ba.document,Ic.firstVisibleRow,
Ic.lastVisibleRow,xb);nb=xb.lines;xb=xb.tokens;if(nb.length){Ic=nb[0].row;for(var Dd=[],yd=0;yd<xb.length;Ic++,yd++)for(var zd=xb[yd],He=0;He<zd.length;He+=5){var df=zd[He],og=zd[He+1],Jh=Ia[zd[He+2]]||Ia.default;Jh&&Dd.push({start:{row:Ic,column:df},end:{row:Ic,column:og}},Jh)}ba.embeddedMorphs.forEach(function(Oi){var Th=ba.embeddedMorphMap.get(Oi).anchor;wc[Oi.id]=ba.textAttributeAt(Th.position)});ba.setTextAttributesWithSortedRanges(Dd);ba.embeddedMorphs.forEach(function(Oi){var Th=ba.embeddedMorphMap.get(Oi).anchor;
Th=qf.Range.at(Th.position);Th.end.column+=1;ba.replace(Th,[Oi,wc[Oi.id]],!1)});this._tokenizerValidBefore={row:qf.arr.last(nb).row+1,column:0}}if(this.checker)this.checker.onDocumentChange({},ba,this)}}},{key:"visitTokensInRange",value:function(ba,Ia){var nb=ba.start,xb=ba.end,Ic=nb.row-1;qf.visitDocumentTokens(this.mode,this.textMorph.document,nb.row,xb.row,null,function(wc){return Ic++},function(wc,Dd,yd,zd,He,df,og){if(Ic===nb.row&&0<nb.column){if(nb.column>=zd)return;yd<nb.column&&nb.column<
zd&&(yd=nb.column)}if(Ic===xb.row){if(xb.column<=yd)return;yd<xb.column&&xb.column<zd&&(zd=xb.column)}Ia(wc,Dd,Ic,yd,zd,He,df,og)})}},{key:"tokensInRange",value:function(ba){var Ia=[];this.visitTokensInRange(ba,function(nb,xb,Ic,wc,Dd,yd,zd,He){return Ia.push(qf.rangedToken(Ic,wc,Dd,nb,He))});return Ia}},{key:"tokensOfRow",value:function(ba){var Ia=this.textMorph.getLine(ba).length;return this.tokensInRange({start:{row:ba,column:0},end:{row:ba,column:Ia}})}},{key:"tokenAt",value:function(ba){for(var Ia=
this.tokensOfRow(ba.row),nb=Ia.length;nb--;){var xb=Ia[nb];if(xb.token&&xb.start.column<=ba.column&&ba.column<=xb.end.column)return xb}return null}},{key:"getCommands",value:function(ba){return[].concat($jscomp.arrayFromIterable(ba),$jscomp.arrayFromIterable(qf.completionCommands),$jscomp.arrayFromIterable(qf.multiSelectCommands),$jscomp.arrayFromIterable(qf.navCommands),$jscomp.arrayFromIterable(qf.codeCommands),$jscomp.arrayFromIterable(qf.codeEvaluationCommands),$jscomp.arrayFromIterable(qf.richTextCommands))}},
{key:"getComment",value:function(){if(!this.mode)return null;var ba=this.mode,Ia=ba.lineComment,nb=ba.blockCommentStart;ba=ba.blockCommentEnd;var xb={};Ia&&(xb.lineCommentStart=Ia);nb&&(xb.blockCommentStart=nb);ba&&(xb.blockCommentEnd=ba);return xb}},{key:"toString",value:function(){return this.constructor.name+"("+this.textMorph+")"}},{key:"cmd_newline",value:function(ba,Ia,nb){var xb=this.textMorph,Ic=ba.row,wc=ba.column;ba=Ia[wc-1];Ia=Ia[wc];xb.selection.text="\n";xb.selection.collapseToEnd();
"{"===ba&&"}"===Ia&&(xb.selection.text="\n"+" ".repeat(nb),xb.selection.collapse());xb.execCommand("indent according to mode",{undo:!1,ignoreFollowingText:!1,firstRow:Ic+1,lastRow:Ic+1});return!0}},{key:"openPairs",get:function(){return{"{":"}","[":"]","(":")",'"':'"',"'":"'","`":"`"}}},{key:"closePairs",get:function(){return{"}":"{","]":"[",")":"(",'"':'"',"'":"'","`":"`"}}},{key:"cmd_delete_backwards",value:function(){var ba=this.textMorph,Ia=this.openPairs,nb=ba.selection,xb=ba.getLine(nb.end.row),
Ic=xb[nb.end.column-1];xb=xb[nb.end.column];ba.autoInsertPairs&&nb.isEmpty()&&Ic in Ia&&xb===Ia[Ic]&&(nb.growRight(1),nb.growLeft(1));return!1}},{key:"cmd_insertstring",value:function(ba){var Ia=this.openPairs,nb=this.closePairs,xb=this.textMorph,Ic=xb.selection,wc=xb.autoInsertPairs&&ba in Ia,Dd=xb.autoInsertPairs&&ba in nb;if(!wc&&!Dd)return!1;var yd=xb.getLine(Ic.end.row)[Ic.end.column];if(!Ic.isEmpty()){if(!wc)return!1;nb=xb.undoManager.ensureNewGroup(xb);xb.insertText(Ia[ba],Ic.end);xb.insertText(ba,
Ic.start);xb.undoManager.group(nb);Ic.growRight(-1);return!0}if(yd in nb&&ba===yd)return Ic.goRight(1),!0;if(Dd&&!wc)return!1;nb=xb.undoManager.ensureNewGroup(xb);xb.insertText(ba+Ia[ba]);xb.undoManager.group(nb);Ic.goLeft(1);return!0}}],[{key:"className",get:function(){return"EditorPlugin"}}],bb,{pathInPackage:function(){return"editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:3088,end:11936})}(void 0);Aa=Kb=qf.EditorPlugin;wa=Da("C",function(Ga){var bb=lively.FreezerRuntime.recorderFor("lively.ide/editor-plugin.js"),Gb=bb.hasOwnProperty("CodeMirrorEnabledEditorPlugin")&&"function"===typeof bb.CodeMirrorEnabledEditorPlugin?bb.CodeMirrorEnabledEditorPlugin:bb.CodeMirrorEnabledEditorPlugin=function(ba){ba&&ba[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Rb(Gb,Ga,[{key:Symbol.for("lively-instance-initialize"),
value:function(){Rb._get(Object.getPrototypeOf(Gb.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.mode=null}},{key:"attach",value:function(ba){this.mode=this.codeMirrorMode(ba);return Rb._get(Object.getPrototypeOf(Gb.prototype),"attach",this).call(this,ba)}},{key:"__deserialize__",value:function(){this.mode=this.textMorph?this.codeMirrorMode(this.textMorph):null}},{key:"defaultCodeMirrorModeConfig",value:function(ba){return{indentWithTabs:!ba.useSoftTabs,indentUnit:ba.tabWidth,
tabSize:4}}},{key:"codeMirrorMode",value:function(ba){ba=this.defaultCodeMirrorModeConfig(ba);return qf.getMode(ba,{name:this.longName})}}],[{key:"className",get:function(){return"CodeMirrorEnabledEditorPlugin"}}],bb,{pathInPackage:function(){return"editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:11945,end:12633})}(qf.EditorPlugin));
qf.CodeMirrorEnabledEditorPlugin=wa;qf.CodeMirrorEnabledEditorPlugin=wa;qf.CodeMirrorEnabledEditorPlugin=wa;qf.default=Kb;Kb=Object.freeze({__proto__:null,guessTextModeName:Vb,"default":Aa,CodeMirrorEnabledEditorPlugin:wa});Da("e",Kb)}}});