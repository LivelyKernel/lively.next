System.register("./__root_module__-255c8c26.js kld-intersections ./editor-plugin-f4c5553b.js ./index-e74b4e71.js ./index-4d90b762.js ./index-029212ef.js ./index-88273505.js ./color-picker-9a3cf97a.js ./editor-plugin-5b4309c8.js ./index-f222f72e.js".split(" "),function(){var Da,Ab,Tb,kc,ec,he,gd,Zd,kd,Sc,yd,Od,fe,Ud,md,db,Fb,tc,nc,td,ke,zc,Ec,Pb,Qb,Tc,ld,Rb,qb,bc,Ic,ra,Fa,mb,ub,Db,cb,fb,Eb,qc;return{setters:[function(gc){Da=gc.ar;Ab=gc.ah;Tb=gc.az;kc=gc.au;ec=gc.a2;he=gc.as;gd=gc.ap;Zd=gc.at;
kd=gc.C;Sc=gc.a1;yd=gc.a5;Od=gc._;fe=gc.aV;Ud=gc.P;md=gc.a6;db=gc.aA;Fb=gc.aj;tc=gc.aU;nc=gc.an;td=gc.ak;ke=gc.am;zc=gc.bp;Ec=gc.br;Pb=gc.bT;Qb=gc.b1;Tc=gc.bh;ld=gc.aM;Rb=gc.n;qb=gc.a0;bc=gc.aW;Ic=gc.aX;ra=gc.ao;Fa=gc.a3;mb=gc.aq;ub=gc.bU},function(){},function(gc){Db=gc.I},function(gc){cb=gc.d;fb=gc.s;Eb=gc.I;qc=gc.M},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){function gc(Wa){var Nc=Wa.sourceObj,pb=Wa.targetObj;Nc.isMorph&&pb.isMorph?(Nc.show(),
pb.show(),nd.showConnector&&nd.showConnector(Nc,pb)):nd.show(String(Wa))}function Oc(Wa){var Nc=Wa.sourceObj,pb=Wa.sourceAttrName,gb=Wa.targetObj,hb=Wa.targetMethodName,Yb=Wa.getConverter();Wa=Wa.getUpdater();return nd.printConnectionElements(Nc,pb,gb,hb,Yb,Wa)}function Wc(Wa,Nc,pb,gb,hb,Yb){Wa="/* global connect, source, target */\nconnect(source, '"+Nc+"', target, '"+gb+"'";if(hb||Yb)Wa+=", {\n";hb&&(Wa+="  converter: "+hb);hb&&Yb&&(Wa+=",");hb&&(Wa+="\n");Yb&&(Wa+="  updater: "+Yb+"\n");if(hb||
Yb)Wa+="}";return Wa+");"}function Q(Wa,Nc){var pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){if(1==gb.nextAddress)return gb.yield(nd.InteractiveMorphSelector.selectMorph(),2);pb=gb.yieldResult;return gb.return(pb?nd.interactiveConnectGivenSourceAndTarget(Wa,Nc,pb):null)})}function ea(Wa,Nc,pb,gb){var hb,Yb,Xb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fd){hb=pb&&pb.world().targetDataBindings(pb);Yb=Wa.world();if(!hb||!hb.length)return Yb.setStatusMessage("connect canceled"),
Fd.return();Xb=hb.map(function(Be){return[Be[0].group||"uncategorized",Be.map(function(Ie){return[Ie.signature||Ie.name,function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lf){return 1==Lf.nextAddress?Lf.yield(nd.interactivelyEvaluateConnection({sourceObj:Wa,sourceAttr:Nc,targetObj:pb,targetAttr:Ie.name,onConnect:gb}),2):Lf.return(Lf.yieldResult)})}]})]});Xb.push(["custom...",function(){var Be;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ie){return 1==Ie.nextAddress?
Ie.yield(Yb.prompt("Enter custom connection point",{requester:$world,historyId:"lively.morphic-custom-connection-points",useLastInput:!0}),2):(Be=Ie.yieldResult)?Ie.yield(nd.interactivelyEvaluateConnection({sourceObj:Wa,sourceAttr:Nc,targetObj:pb,targetAttr:Be,onConnect:gb}),0):Ie.jumpTo(0)})}]);return Fd.yield(pb.openMenu(Xb).whenFinished(),0)})}function Ia(Wa,Nc,pb,gb){Nc=void 0===Nc?"confirm connection":Nc;var hb,Yb,Xb,Fd,Be,Ie,Lf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ed){hb=
Wa;Yb=hb.sourceObj;Xb=hb.sourceAttrName;Fd=hb.targetObj;Be=hb.targetMethodName;Ie=Wa.getConverter();Lf=Wa.getUpdater();return ed.return(nd.interactivelyEvaluateConnection({sourceObj:Yb,sourceAttr:Xb,targetObj:Fd,targetAttr:Be,converter:Ie,updater:Lf,prompt:Nc,highlight:pb,onConnect:gb}))})}function Ra(Wa,Nc,pb,gb,hb){gb=void 0===gb?{}:gb;hb=nd.rect(0).sides.concat(nd.rect(0).corners);pb=pb||new nd.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:nd.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:nd.Color.transparent,
nativeCursor:"auto"},end:{fill:nd.Color.orange}}},gb,{hasFixedPosition:!0}));pb.startPoint.attachTo(Wa,"rightCenter");Nc.isMorph?(gb=Nc.globalBounds().partNameNearest(hb,Wa.globalPosition),Wa.globalPosition.equals(Nc.globalBounds().partNamed(gb))&&Nc.globalBounds().partNameNearest(nd.arr.without(hb,gb),Wa.globalPosition),pb.endPoint.attachTo(Nc,"leftCenter")):(hb=Wa.globalBounds().topRight().addPt(nd.pt(100,0)),Nc=nd.morph({type:"label",value:Nc.toString(),styleClasses:["Tooltip"],padding:nd.rect(8,
4)}).openInWorld(hb),Nc.position=Wa.world().bounds().translateForInclusion(Nc.bounds()).topLeft(),nd.once(pb,"remove",Nc,"remove"),pb.endPoint.attachTo(Nc,"leftCenter"));return pb}function cc(Wa){var Nc,pb,gb,hb,Yb,Xb,Fd,Be,Ie,Lf,ed,ue,Md,Zb,ta,Ba,Mb,P,xa,Qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kb){switch(Kb.nextAddress){case 1:Nc=Wa;pb=Nc.sourceObj;gb=Nc.sourceAttr;hb=Nc.targetObj;Yb=Nc.targetAttr;Xb=Nc.converter;Fd=Nc.updater;Be=Nc.prompt;Ie=void 0===Nc.highlight?!0:Nc.highlight;
Lf=Nc.onConnect;ed="lively://lively.bindings-interactive-connect/x"+pb.id;ue={context:window,format:"esm",targetModule:ed,classTransform:nd.classToFunctionTransform};Md=nd.printConnectionElements(pb,gb,hb,Yb,Xb,Fd);hb.isMorph&&pb.isMorph&&(Zb=hb.propertiesAndPropertySettings().properties[Yb]||{type:typeof hb[Yb]},ta=Zb.type,Ba=pb.propertiesAndPropertySettings().properties[gb]||{type:typeof pb[gb]},Mb=Ba.type,Mb!==ta&&(Be=!0));P={};Object.assign(lively.modules.module(ed).recorder,(P.source=pb,P.target=
hb,P.connect=gd,P.once=Zd,P[gb]=pb[gb],P));if(!Be){xa=Md;Kb.jumpTo(2);break}return Kb.yield($world.editPrompt(Be,{input:Md,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:ue,animated:!1}),3);case 3:if(xa=Kb.yieldResult,!xa)return $world.setStatusMessage("connect canceled"),Kb.return();case 2:return Kb.yield(lively.vm.runEval(xa,ue),4);case 4:Qa=Kb.yieldResult;if(Qa.isError)return $world.logError(Qa.value),Kb.return(cc({sourceObj:pb,sourceAttr:gb,targetObj:hb,
targetAttr:Yb,converter:Xb,updater:Fd,prompt:"confirm connection",highlight:Ie,onConnect:Lf}));Ie&&($world.setStatusMessage("connected!",nd.Color.green),nd.interactivelyShowConnection(Qa.value));"function"===typeof Lf&&Lf(Qa);Kb.jumpToEnd()}})}var Nb=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");Nb.Inspector=Db;var $a=function(Wa){var Nc=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),pb=Nc.hasOwnProperty("ProtoInspector")&&"function"===typeof Nc.ProtoInspector?Nc.ProtoInspector:
Nc.ProtoInspector=function(gb){gb&&gb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(pb,Wa,void 0,[{key:"className",get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Nc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",
version:"0.1.1-0"}}},{start:68,end:210})}(Nb.Inspector);$a=Nb.ProtoInspector;Nb.default=$a;var ic=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");ic.Morph=Ab;ic.touchInputDevice=Tb;ic.easings=kc;ic.pt=ec;ic.fun=he;ic.connect=gd;Nb=function(Wa){var Nc=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),pb=Nc.hasOwnProperty("MorphicSideBar")&&"function"===typeof Nc.MorphicSideBar?Nc.MorphicSideBar:Nc.MorphicSideBar=function(gb){gb&&gb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Da(pb,Wa,[{key:"onWorldResize",value:function(gb){gb=void 0===gb?!0:gb;if(this.respondsToVisibleWindow){var hb=$world.visibleBounds(),Yb=navigator.standalone&&ic.touchInputDevice?25:0;this.height=hb.height-Yb;this.top=Yb+hb.top();Yb=this.get("horizontal resizer");Yb.height=this.height;Yb.top=0;gb&&(this.visible?this.topLeft=hb.topLeft():this.topRight=hb.topLeft())}}},{key:"switchMode",value:function(gb){"inspector"==gb&&this.showInspector();"connections"==gb&&this.showConnections()}},
{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(gb){var hb=this,Yb,Xb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fd){switch(Fd.nextAddress){case 1:Yb=$world.visibleBounds();Xb=navigator.standalone&&ic.touchInputDevice?25:0;hb.height=Yb.height-Xb;hb.top=Xb+Yb.top();if(gb)return $world.addMorph(hb,
$world.get("lively top bar")),hb.right=0,hb.attachToWorld($world),hb.visible=!0,Fd.yield(hb.whenRendered(),5);hb.detachFromWorld($world);return Fd.yield(hb.animate({opacity:0,right:0,duration:300}),4);case 4:hb.visible=!1;hb.remove();Fd.jumpTo(0);break;case 5:return hb.onWorldResize(!1),hb.get("scene graph").adjustProportions(),Fd.yield(hb.animate({opacity:1,easing:ic.easings.outCirc,left:1,duration:300}),6);case 6:hb.get("scene graph").refresh(),Fd.jumpToEnd()}})}},{key:"attachToWorld",value:function(gb){ic.connect(gb,
"onChange",this,"onHierarchyChange",{garbageCollect:!0});ic.connect(gb,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});ic.connect(gb,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(gb){var hb=this;gb.attributeConnections.forEach(function(Yb){Yb.targetObj===hb&&Yb.disconnect()})}},{key:"selectNode",value:function(gb){this.getSubmorphNamed("scene graph").selectMorphInTarget(gb);this.getSubmorphNamed("connections tree").inspectConnectionsOf(gb)}},
{key:"onHierarchyChange",value:function(gb){var hb=this,Yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xb){if("addMorphAt"===gb.selector||"removeMorph"===gb.selector||"name"===gb.prop){Yb=hb._sceneGraph||(hb._sceneGraph=hb.getSubmorphNamed("scene graph"));if(!Yb||!Yb.owner.visible||gb.target&&gb.target.isHand||gb.target&&Yb.ignoreMorph(gb.target)||gb.args&&!gb.args[0].isHalo&&Yb.ignoreMorph(gb.args[0])||gb.target.ownerChain().find(function(Fd){return Yb.ignoreMorph(Fd)}))return Xb.return();
ic.fun.debounceNamed("scene-graph-update",50,function(){return Yb.refresh()})()}Xb.jumpToEnd()})}}],[{key:"className",get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],Nc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-69"}}},{start:226,
end:3566})}(ic.Morph);Nb=ic.MorphicSideBar;ic.default=Nb;var nd=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");nd.interactivelyShowConnection=gc;nd.printConnection=Oc;nd.printConnectionElements=Wc;nd.interactiveConnectGivenSource=Q;nd.interactiveConnectGivenSourceAndTarget=ea;nd.interactivelyReEvaluateConnection=Ia;nd.visualizeConnection=Ra;nd.interactivelyEvaluateConnection=cc;nd.connect=gd;nd.once=Zd;nd.Color=kd;nd.rect=Sc;nd.pt=ec;nd.arr=yd;nd.promise=Od;nd.properties=fe;nd.Path=Ud;
nd.obj=md;nd.HorizontalLayout=db;nd.Morph=Ab;nd.VerticalLayout=Fb;nd.StyleSheet=tc;nd.Icon=nc;nd.GridLayout=td;nd.morph=ke;nd.TreeData=zc;nd.Tree=Ec;nd.Leash=Pb;nd.LabeledCheckBox=Qb;nd.SearchField=Tc;nd.showConnector=cb;nd.show=fb;nd.InteractiveMorphSelector=Eb;nd.MorphHighlighter=qc;nd.Window=ld;nd.classToFunctionTransform=Rb;nd.interactivelyShowConnection=gc;nd.interactivelyShowConnection=gc;nd.printConnection=Oc;nd.printConnection=Oc;nd.printConnectionElements=Wc;nd.printConnectionElements=Wc;
nd.interactiveConnectGivenSource=Q;nd.interactiveConnectGivenSource=Q;nd.interactiveConnectGivenSourceAndTarget=ea;nd.interactiveConnectGivenSourceAndTarget=ea;nd.interactivelyReEvaluateConnection=Ia;nd.interactivelyReEvaluateConnection=Ia;nd.visualizeConnection=Ra;nd.visualizeConnection=Ra;nd.interactivelyEvaluateConnection=cc;nd.interactivelyEvaluateConnection=cc;var vd=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");vd.Tree=Ec;vd.TreeData=zc;vd.morph=ke;vd.Icon=nc;vd.HorizontalLayout=
db;vd.easings=kc;vd.Morph=Ab;vd.Color=kd;vd.Rectangle=qb;vd.rect=Sc;vd.pt=ec;vd.connect=gd;vd.disconnect=bc;vd.disconnectAll=Ic;vd.once=Zd;vd.arr=yd;vd.num=ra;vd.fun=he;vd.tree=Fa;vd.promise=Od;vd.ConnectionHalo=_missingExportShim;Nb=function(Wa){var Nc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),pb=Nc.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof Nc.InteractiveTreeContainer?Nc.InteractiveTreeContainer:Nc.InteractiveTreeContainer=function(gb){gb&&gb[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(pb,Wa,[{key:"onChildRemoved",value:function(gb){}},{key:"onChildAdded",value:function(gb){}},{key:"toggleSelected",value:function(gb){if(this.tree){var hb=this.tree,Yb=hb.selectionFontColor,Xb=hb.nonSelectionFontColor;this.submorphs.filter(function(Fd){return!Fd._isControlElement&&Fd.styleClasses.includes("Label")}).forEach(function(Fd){Fd.fontColor=gb?Yb:Xb})}}},{key:"onGrab",value:function(gb){var hb=this.tree,Yb=this.node;
this.fill=vd.Color.gray.withA(.5);this.fontColor=hb.selectionFontColor;this.opacity=.8;Da._get(Object.getPrototypeOf(pb.prototype),"onGrab",this).call(this,gb);Yb&&(this.toggleSelected(!1),hb.collapse(Yb),hb.treeData.parentNode(Yb).container.onChildRemoved(this),this._data=hb.treeData.remove(Yb),Yb.container.target.remove(),hb.update(!0))}},{key:"wantsToBeDroppedOn",value:function(gb){this.showPreviewOn(gb);return!0}},{key:"showPreviewOn",value:function(gb){if(gb.isContainer)var hb=gb.tree;gb.isTree&&
(hb=gb);hb&&hb.showDropPreviewFor&&hb.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(gb){var hb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yb){if(1==Yb.nextAddress)return hb.tree.treeData.add(gb._data,hb.node,hb.node.children[0]),hb.tree.uncollapse(hb.node),hb.tree.treeData.remove(hb.tree._previewNode),Yb.yield(hb.tree.whenRendered(),2);hb.tree.update(!0);hb.onChildAdded(gb);Yb.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(gb,hb){var Yb=this;debugger;
this.tree._dropInProgress=!0;Da._get(Object.getPrototypeOf(pb.prototype),"onBeingDroppedOn",this).call(this,gb,hb);gb=function(){Yb.fill=vd.Color.gray.withA(.5);Yb.opacity=1;Yb.tree._dropInProgress=!1;Yb.tree.refresh()};hb.isTree?hb.insertAtPlaceholder(this).then(gb):hb.isContainer?hb.insertAsChild(this).then(gb):gb()}}],[{key:"className",get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:vd.Color.transparent},isContainer:{get:function(){return!0}},
tree:{},node:{readOnly:!0,get:function(){var gb=this,hb=this.tree.treeData;return hb&&hb.asList().find(function(Yb){return Yb.container===gb})}}}}}],Nc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:437,end:2917})}(vd.Morph);vd.InteractiveTreeContainer=Nb;vd.InteractiveTreeContainer=
Nb;vd.InteractiveTreeContainer=Nb;Nb=function(Wa){var Nc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),pb=Nc.hasOwnProperty("InteractiveTreeData")&&"function"===typeof Nc.InteractiveTreeData?Nc.InteractiveTreeData:Nc.InteractiveTreeData=function(gb){gb&&gb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(pb,Wa,[{key:"display",value:function(gb){return[gb.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(gb){return gb.isCollapsed}},
{key:"collapse",value:function(gb,hb){gb.isCollapsed=hb}},{key:"getChildren",value:function(gb){var hb=this;return gb.isLeaf?null:gb.children.filter(function(Yb){return Yb&&(hb.filterActive?Yb.visible:!0)})}},{key:"isLeaf",value:function(gb){var hb=this;return!gb.children||0==gb.children.filter(function(Yb){return Yb&&(hb.filterActive?Yb.visible:!0)}).length}},{key:"add",value:function(gb,hb,Yb){hb=void 0===hb?this.root:hb;hb.children||(hb.children=[]);Yb?vd.arr.pushAt(hb.children,gb,hb.children.indexOf(Yb)):
hb.children.push(gb);hb.isLeaf=!1}},{key:"replace",value:function(gb,hb){var Yb=this.parentNode(gb);gb=Yb.children.indexOf(gb);Yb.children[gb]=hb}},{key:"next",value:function(gb){var hb=this.parentNode(gb);return hb&&hb.children[hb.children.indexOf(gb)+1]}},{key:"isBefore",value:function(gb,hb){this.next(gb)===hb}},{key:"isAfter",value:function(gb,hb){this.next(hb)===gb}},{key:"addBefore",value:function(gb,hb){this.add(gb,this.parentNode(hb),hb)}},{key:"addAfter",value:function(gb,hb){var Yb=this.parentNode(hb);
hb=Yb.children.indexOf(hb)+1;this.add(gb,Yb,Yb.children[hb])}},{key:"remove",value:function(gb){var hb=this.parentNode(gb);if(hb)return vd.arr.remove(hb.children,gb),hb.children==[]&&(hb.children=null),gb}},{key:"filter",value:function(gb,hb){hb=void 0===hb?1:hb;var Yb=this,Xb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fd){if(1==Fd.nextAddress)return Fd.yield(Yb.uncollapseAll(function(Be,Ie){return Ie<hb+1}),2);Xb=Yb.filterActive;Yb.filterActive=!1;Yb.asListWithIndexAndDepth(!1).reverse().forEach(function(Be){var Ie=
Be.node;if(0==Be.depth)return Ie.visible=!0;Ie.visible=gb(Ie);Ie.visible||Ie.isCollapsed||!Ie.children.find(function(Lf){return Lf.visible})?Ie.container.opacity=1:(Ie.visible=!0,Ie.container.opacity=.5);return Ie.visible});Yb.filterActive=Xb;Fd.jumpToEnd()})}}],[{key:"className",get:function(){return"InteractiveTreeData"}}],Nc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:2926,end:5365})}(vd.TreeData);vd.InteractiveTreeData=Nb;vd.InteractiveTreeData=Nb;vd.InteractiveTreeData=Nb;Nb=function(Wa){var Nc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),pb=Nc.hasOwnProperty("InteractiveTree")&&"function"===typeof Nc.InteractiveTree?Nc.InteractiveTree:Nc.InteractiveTree=function(gb){gb&&gb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Da(pb,Wa,[{key:"update",value:function(gb){var hb=this;Da._get(Object.getPrototypeOf(pb.prototype),"update",this).call(this,gb);this.treeData&&this.relayoutContainers();gb&&this.embeddedMorphs.forEach(function(Yb){Yb.isContainer&&(Yb.fill=vd.Color.transparent,Yb.fontFamily=hb.fontFamily,Yb.fontSize=hb.fontSize)})}},{key:"onDrop",value:function(gb){Da._get(Object.getPrototypeOf(pb.prototype),"onDrop",this).call(this,gb);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",
value:function(gb){}},{key:"onDropHoverUpdate",value:function(gb){}},{key:"onDropHoverOut",value:function(gb){}},{key:"onHoverOut",value:function(gb){var hb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yb){Da._get(Object.getPrototypeOf(pb.prototype),"onHoverOut",hb).call(hb,gb);hb._previewNode&&hb._previewNode.container.world()&&hb.treeData.remove(hb._previewNode);hb.resetContainerSelection();hb.update(!0);Yb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(gb){var hb=
this,Yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xb){if(1==Xb.nextAddress)return Yb=hb.treeData.parentNode(hb._previewNode),hb.treeData.replace(hb._previewNode,gb._data),hb.treeData.remove(hb._previewNode),Xb.yield(hb.whenRendered(),2);hb.update(!0);Yb.container.onChildAdded(gb);Xb.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var gb=this;if(!this._scrollingUp){this._scrollingUp=!0;var hb=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yb){if(1==
Yb.nextAddress)return gb._scrollingUp&&0<gb.scroll.y?Yb.yield(gb.animate({scroll:gb.scroll.subXY(0,30),duration:300,easing:vd.easings.linear}),3):(gb._scrollingUp=!1,Yb.jumpTo(0));hb();Yb.jumpToEnd()})};hb()}}},{key:"scrollDownSlowly",value:function(){var gb=this;if(!this._scrollingDown){this._scrollingDown=!0;var hb=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yb){if(1==Yb.nextAddress)return gb._scrollingDown&&gb.scroll.y<gb.scrollExtent.y-gb.height?Yb.yield(gb.animate({scroll:gb.scroll.addXY(0,
30),duration:300,easing:vd.easings.linear}),3):(gb._scrollingDown=!1,Yb.jumpTo(0));hb();Yb.jumpToEnd()})};hb()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(gb){gb.isContainer&&(gb.fill=vd.Color.transparent)})}},{key:"showDropPreviewFor",value:function(gb){var hb=this;gb=this.localize(gb.globalBounds().center());var Yb=this.textPositionFromPoint(gb),Xb=this.treeData.asListWithIndexAndDepth(function(ue){ue=
ue.node;return ue!=hb._previewNode&&ue.container.world()}),Fd=(Xb.find(function(ue){return ue.i-1===Yb.row})||{}).node,Be=Fd&&Fd.container,Ie=this.ensurePlaceholder(),Lf=!!Ie.container.world(),ed=gb.subPt(this.scroll).subPt(this.scrollbarOffset);10>ed.y?this.scrollUpSlowly():ed.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Be){if(Xb.length>Yb.row||vd.arr.last(this.treeData.root.children)===Ie)return;this.treeData.remove(Ie);this.treeData.add(Ie);
this.update(!0)}if(Be){Xb=this.textLayout.boundsFor(this,Yb);if(4>Math.abs(Xb.top()-gb.y)){if(this.treeData.isBefore(Ie,Fd))return;this.treeData.remove(Ie);this.treeData.addBefore(Ie,Fd)}else if(4>Math.abs(Xb.bottom()-gb.y)&&(Fd.isCollapsed||this.treeData.isLeaf(Fd))){if(this.treeData.isAfter(Ie,Fd))return;this.treeData.remove(Ie);this.treeData.addAfter(Ie,Fd)}else{Be.fill=vd.Color.gray;if(!Lf)return;this.treeData.remove(Ie)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var gb=vd.pt(this.width-
100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:vd.morph({acceptsDrops:!1,reactsToPointer:!1,fill:vd.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=gb;return this._previewNode}},{key:"relayoutContainers",value:function(){var gb=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(hb){return hb.height});this.treeData.asListWithIndexAndDepth().forEach(function(hb){var Yb=
hb.node;hb=hb.i;Yb.container.nativeCursor="grab";Yb.container.width=gb.width-25-Yb.container.left;Yb.container.toggleSelected&&Yb.container.toggleSelected(hb==gb.selectedIndex)});this.anchors.forEach(function(hb){return hb.position=hb.position})}}],[{key:"className",get:function(){return"InteractiveTree"}}],Nc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1102"}}},{start:5374,end:10711})}(vd.Tree);vd.InteractiveTree=Nb;vd.InteractiveTree=Nb;vd.InteractiveTree=Nb;Nb=function(Wa){var Nc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),pb=Nc.hasOwnProperty("SceneGraphTree")&&"function"===typeof Nc.SceneGraphTree?Nc.SceneGraphTree:Nc.SceneGraphTree=function(gb){gb&&gb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(pb,Wa,[{key:"beforePublish",value:function(){this.submorphs=
[];this.reset()}},{key:"selectMorphInTarget",value:function(gb){var hb=this.treeData.asList().find(function(Yb){return Yb.container.target===gb});hb&&this.selectedNode!=hb&&this.selectPath(this.treeData.pathOf(hb))}},{key:"onLoad",value:function(){var gb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hb){if(1==hb.nextAddress)return gb.submorphs=[],hb.yield(gb.whenRendered(),2);gb.get("inspector").makeEditorVisible(!0);gb.get("inspector").makeEditorVisible(!1);gb.setTarget($world);
hb.jumpToEnd()})}},{key:"adjustProportions",value:function(gb){gb=(gb?gb.state.dragDelta:{y:0}).y;var hb=this.get("inspector"),Yb=this.get("scene graph resizer"),Xb=this.get("mode selector"),Fd=this.get("connections tree");this.height+=gb;hb.height-=gb;Fd.height-=gb;Yb.top=this.bottom;Yb.left=0;Xb.top=Yb.bottom;Fd.top=hb.top=Xb.bottom+5}},{key:"reset",value:function(){var gb=this;this.treeData=new vd.InteractiveTreeData({children:[],container:vd.morph()});this.get("inspector").targetObject={};this.selectedNode=
null;this.anchors.filter(function(hb){return null==hb.id}).forEach(function(hb){return gb.removeAnchor(hb)})}},{key:"setTarget",value:function(gb){this.target=gb;this.treeData=this.getTreeFromSubmorphHierarchy(gb);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(gb){var hb=this;if(gb===this._previewNode)return!1;if(gb.container.nameNeedsUpdate)return!0;var Yb=gb.container.target.submorphs.filter(function(Xb){return!hb.ignoreMorph(Xb)});return Yb.length!=gb.children.length||
Yb.map(function(Xb){return Xb.name}).join("")!=gb.children.map(function(Xb){return Xb.target?Xb.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(gb){var hb=this,Yb=gb.container.target.submorphs.map(function(Lf){return Lf.__scene_graph_target__?Lf.__scene_graph_target__():Lf}).filter(function(Lf){return!hb.ignoreMorph(Lf)}),Xb=[],Fd={},Be;for(Be in Yb){Fd.$jscomp$loop$prop$m$2291=Yb[Be];var Ie=vd.arr.without(gb.children,this._previewNode).find(function(Lf){return function(ed){return ed.container.target.id==
Lf.$jscomp$loop$prop$m$2291.id}}(Fd));Xb[Be]=Ie?Ie:this.readMorphHierarchy(Fd.$jscomp$loop$prop$m$2291);Fd={$jscomp$loop$prop$m$2291:Fd.$jscomp$loop$prop$m$2291}}return Xb}},{key:"refresh",value:function(){var gb=this;if(!this._updating&&!this._dropInProgress){var hb=!1;vd.tree.prewalk(this.treeData.root,function(Yb){gb.isNodeOutOfSync(Yb)&&(hb=!0,Yb.name=Yb.container.target.name,Yb.container.refresh(),Yb.children=gb.getNewChildren(Yb))},function(Yb){return Yb.children});this.update(hb)}}},{key:"ignoreMorph",
value:function(gb){return gb.isMorph?gb.isContainer||gb.isWindow||gb.getWindow()||gb.isEpiMorph||gb.isHand||["lively.halos"].includes(gb.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler","UserFlap","Menu"].includes(gb.constructor.name):!1}},{key:"onDropHoverOut",value:function(gb){var hb=gb.hand.grabbedMorphs[0];gb=gb.hand.findDropTarget();if(!(gb===this||gb&&gb.ownerChain().includes(this))&&hb&&hb.isContainer)hb.onDragOutside()}},{key:"onDropHoverIn",
value:function(gb){var hb=gb.hand.grabbedMorphs[0];hb&&!hb.isContainer&&($world.halos().forEach(function(Yb){return Yb.remove()}),hb.remove(),Object.assign(hb,gb.hand._grabbedMorphProperties.get(hb).pointerAndShadow),hb=this.renderContainerFor(hb,!1),gb.hand.grab(hb),hb.leftCenter=vd.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(gb){return new vd.InteractiveTreeData(this.readMorphHierarchy(gb))}},{key:"readMorphHierarchy",value:function(gb){var hb=this;return vd.tree.mapTree(gb,
function(Yb,Xb){return{name:Yb.name,isCollapsed:!0,container:hb.renderContainerFor(Yb),visible:!0,children:Xb}},function(Yb){return Yb.submorphs.filter(function(Xb){return Yb.isWorld?!hb.ignoreMorph(Xb):!0})})}},{key:"renderContainerFor",value:function(gb,hb){gb=void 0===gb?vd.morph({name:"root"}):gb;hb=new vd.MorphContainer({tree:this,fill:void 0===hb||hb?vd.Color.transparent:vd.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:gb,opacity:gb.visible?1:.5});
gb._data?(hb._data=gb._data,gb._data.container=hb):hb._data={name:gb.name,isCollapsed:!0,container:hb,children:[]};return hb}},{key:"collapseAll",value:function(){var gb=this;this.treeData.asList().forEach(function(hb){return hb!=gb.treeData.root?hb.isCollapsed=!0:hb.isCollapsed=!1})}},{key:"filterMorphs",value:function(gb){var hb=this,Yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xb){if(1==Xb.nextAddress)return Yb=gb.tokens[0],hb.treeData.filterActive||(hb._collapseState=new WeakMap(hb.treeData.asList().map(function(Fd){return[Fd,
Fd.isCollapsed]}))),hb.treeData.filterActive=!!Yb,Xb.yield(hb.treeData.filter(function(Fd){var Be=!Yb||Fd.container.target.name.includes(Yb);Fd.container.highlightTerm(Yb);return Be},3),2);hb.treeData.filterActive||hb.treeData.asList().forEach(function(Fd){return Fd.isCollapsed=hb._collapseState.has(Fd)?hb._collapseState.get(Fd):!0});hb.refresh();Xb.jumpToEnd()})}}],[{key:"className",get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],Nc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:10720,end:17193})}(vd.InteractiveTree);vd.SceneGraphTree=Nb;vd.SceneGraphTree=Nb;vd.SceneGraphTree=Nb;Nb=function(Wa){var Nc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),pb=Nc.hasOwnProperty("MorphContainer")&&"function"===typeof Nc.MorphContainer?Nc.MorphContainer:
Nc.MorphContainer=function(gb){gb&&gb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(pb,Wa,[{key:"refresh",value:function(){var gb=this,hb,Yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xb){hb=gb.target;if(!hb)return Xb.return();gb.reactsToPointer=!0;gb.dropShadow=!1;gb.submorphs=[gb.getLabel(),hb.layout&&gb.getLayoutControls(),gb.getConnectionControls()].filter(Boolean).map(function(Fd,Be){Fd.fitIfNeeded();
Fd.left=Yb?Yb.right+5:0;Fd.top=2;return Yb=Fd});gb.height=20;gb.opacity=hb.visible?1:.5;Xb.jumpToEnd()})}},{key:"getLabel",value:function(){var gb=this.getSubmorphNamed("name label")||vd.morph({type:"label",name:"name label",reactsToPointer:!1,padding:vd.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),hb=gb.textString.slice(2,-1);hb&&hb==this.target.name||(gb.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return gb}},{key:"getIcon",value:function(gb){return vd.Icon.textAttribute({Morph:"square",
Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[gb.constructor.className]||"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var gb=this.getSubmorphNamed("layout label")||vd.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:vd.Rectangle.inset(4,2,4,2),fill:vd.Color.orange,fontColor:vd.Color.white});gb._isControlElement=
!0;gb.textString!=this.target.layout.name()&&(gb.value=this.target.layout.name());return gb}},{key:"onMouseDown",value:function(gb){var hb=this,Yb,Xb,Fd,Be,Ie,Lf,ed,ue,Md;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zb){if(1==Zb.nextAddress)return Da._get(Object.getPrototypeOf(pb.prototype),"onMouseDown",hb).call(hb,gb),gb.targetMorph!=hb.get("connections label")?Zb.jumpTo(0):Zb.yield(hb.whenRendered(),3);Yb=$jscomp.makeIterator(hb.world().halos());for(Xb=Yb.next();!Xb.done;Xb=Yb.next())Fd=
Xb.value,Fd.remove();Be=$jscomp.makeIterator(hb.world().getSubmorphsByStyleClassName("ConnectionHalo"));for(Xb=Be.next();!Xb.done;Xb=Be.next())Ie=Xb.value,Ie.remove();hb.owner.animate({opacity:.5,duration:300});Lf=new vd.ConnectionHalo({target:hb.target});Lf.openInWorld();Lf.topLeft=hb.getSubmorphNamed("connections label").globalPosition.addXY(0,-2);vd.connect(hb,"position",function(){Lf.topLeft=hb.getSubmorphNamed("connections label").globalPosition.addXY(0,-2)});ed=hb;ue=hb.owner;Md=hb.get("side bar");
vd.once(Lf,"remove",hb,"toggleConnectionControl",{varMapping:{self:ed,disconnectAll:Ic,disconnect:bc,connectionHalo:Lf,tree:ue,sideBar:Md},updater:function(ta){ed.connectionHalo=null;ue.animate({opacity:1,duration:300});vd.disconnect(Md,"toggle",Lf,"remove");vd.disconnectAll(ed);ta(!0)}});vd.once(hb,"remove",Lf,"remove");vd.once(hb.get("side bar"),"toggle",Lf,"remove");hb.toggleConnectionControl(!1);hb.connectionHalo=Lf;Zb.jumpToEnd()})}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(Yb){return!Yb.targetObj.isHalo}).length:0;var gb=this.getSubmorphNamed("connections label")||vd.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:vd.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:vd.Color.red,fontColor:vd.Color.white});gb._isControlElement=!0;gb.visible=!this.connectionHalo&&!!this.connectionCount;var hb=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";gb.textString!=hb&&(gb.value=hb);return gb}},{key:"highlightTerm",value:function(gb){var hb=this.submorphs[0],Yb=hb.textAndAttributes.slice(0,2),Xb=hb.textString.slice(1).split(gb);hb.textAndAttributes=1===Xb.length?[].concat($jscomp.arrayFromIterable(Yb),[Xb[0]]):[].concat($jscomp.arrayFromIterable(Yb),$jscomp.arrayFromIterable(vd.arr.flatten(vd.arr.interpose(Xb.map(function(Fd){return[Fd,{}]}),[gb,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(gb){var hb=Da._get(Object.getPrototypeOf(pb.prototype),"wantsToBeDroppedOn",this).call(this,gb);if(![gb].concat($jscomp.arrayFromIterable(gb.ownerChain())).includes(this.tree))this.onDragOutside();return hb}},{key:"onGrab",value:function(gb){var hb=this,Yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xb){if(1==Xb.nextAddress)return hb.tree._dropInProgress=!0,Yb=hb.target.globalPosition,Da._get(Object.getPrototypeOf(pb.prototype),
"onGrab",hb).call(hb,gb),hb._data.globalTargetPosition=Yb,Xb.yield(hb.whenRendered(),2);if(hb.tree.fullContainsWorldPoint(hb.globalPosition))hb.leftCenter=vd.pt(-20,0);else hb.onDragOutside();hb.tree._dropInProgress=!1;Xb.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=vd.fun.createQueue("container-hover-queue",function(gb,hb){var Yb,Xb,Fd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Be){if(1==Be.nextAddress)return Yb=
gb.target,Xb=Yb.opacity,Fd=Yb.scale,gb.target.opacity=0,gb.target.scale=.5,$world.halos().forEach(function(Ie){return Ie.remove()}),$world.firstHand.grab(gb.target),gb.target._data=gb._data,gb.remove(),gb.target.position=vd.pt(0,0),Be.yield(gb.target.animate({opacity:Xb,scale:Fd,duration:200}),2);hb();Be.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(gb){var hb=this.node.children.indexOf(gb.node||gb._data)+1;hb=this.node.children[hb];gb.target.remove();hb?(hb=this.target.submorphs.indexOf(hb.container.target),
this.target.addMorphAt(gb.target,hb)):this.target.addMorph(gb.target);gb._data.globalTargetPosition&&(gb.target.position=this.target.localize(gb._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(gb){}},{key:"toggleConnectionControl",value:function(gb){this.getSubmorphNamed("connections label").visible=gb}},{key:"toggleSelected",value:function(gb){var hb=this,Yb,Xb,Fd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Be){if(1==Be.nextAddress)return Da._get(Object.getPrototypeOf(pb.prototype),
"toggleSelected",hb).call(hb,gb),hb._active===gb?Be.return():(hb._active=gb)&&hb.target&&hb.target.isMorph&&hb.world()?Be.yield(hb.target.whenRendered(),3):Be.jumpTo(0);hb.get("inspector").targetObject=hb.target;if(hb.connectionHalo)return Be.return();Yb=$jscomp.makeIterator(hb.world().halos());for(Xb=Yb.next();!Xb.done;Xb=Yb.next()){Fd=Xb.value;if(Fd.target===hb.target)return Be.return();Fd.remove()}hb.world().showHaloFor(hb.target);Be.jumpToEnd()})}}],[{key:"className",get:function(){return"MorphContainer"}},
{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(gb){this.submorphs[0].fontFamily=gb}},fontColor:{after:["submorphs"],derived:!0,set:function(gb){this.submorphs[0].fontColor=gb}},fontSize:{derived:!0,set:function(gb){this.submorphs[0].fontSize=gb}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&
this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}}}}}],Nc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:17202,end:25985})}(vd.InteractiveTreeContainer);
vd.MorphContainer=Nb;vd.MorphContainer=Nb;vd.MorphContainer=Nb;var Xc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");Xc.visualizeConnection=function(Wa,Nc,pb,gb,hb){gb=void 0===gb?{}:gb;hb=Xc.rect(0).sides.concat(Xc.rect(0).corners);pb=pb||new Xc.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Xc.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Xc.Color.transparent,nativeCursor:"auto"},end:{fill:Xc.Color.orange}}},gb,{hasFixedPosition:!0}));pb.startPoint.attachTo(Wa,
"rightCenter");Nc.isMorph?(gb=Nc.globalBounds().partNameNearest(hb,Wa.globalPosition),Wa.globalPosition.equals(Nc.globalBounds().partNamed(gb))&&Nc.globalBounds().partNameNearest(Xc.arr.without(hb,gb),Wa.globalPosition),pb.endPoint.attachTo(Nc,"leftCenter")):(hb=Wa.globalBounds().topRight().addPt(Xc.pt(100,0)),Nc=Xc.morph({type:"label",value:Nc.toString(),styleClasses:["Tooltip"],padding:Xc.rect(8,4)}).openInWorld(hb),Nc.position=Wa.world().bounds().translateForInclusion(Nc.bounds()).topLeft(),Xc.once(pb,
"remove",Nc,"remove"),pb.endPoint.attachTo(Nc,"leftCenter"));return pb};Xc.startConnecting=function(Wa,Nc){Wa.animate({opacity:.8,duration:300});Wa.startPoint.attachTo(Nc,"center");Wa.vertices[0].position=Xc.pt(2,2)};Xc.stopConnecting=function(Wa,Nc,pb,gb){function hb(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Be){if(1==Be.nextAddress)return Be.yield(Wa.animate({opacity:0,duration:300}),2);Wa.startPoint.clearConnection();Wa.endPoint.clearConnection();Wa.remove();Be.jumpToEnd()})}
gb=void 0===gb?"sourceAttrName":gb;var Yb,Xb,Fd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Be){return 1==Be.nextAddress?(Yb=Wa,Xb=Yb.endPoint,(Fd=Xb.connectedMorph)&&"MorphContainer"==Fd.constructor.className&&(Fd=Fd.target),Fd?Be.yield(Xc.interactiveConnectGivenSourceAndTarget(pb,gb,Fd),2):Be.jumpTo(2)):Be.yield(hb(),0)})};Xc.editConnection=function(Wa){var Nc=Wa.connection,pb=Wa.connectionPoint,gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hb){if(1==hb.nextAddress)return gb=
Xc.visualizeConnection(pb,Nc.targetObj,!1,{borderColor:Xc.Color.gray.darker(),endpointStyle:{start:{fill:Xc.Color.transparent,nativeCursor:"auto"},end:{fill:Xc.Color.gray.darker()}}}),hb.yield(Xc.interactivelyReEvaluateConnection(Nc,"Edit Connection",!1),2);gb.remove();hb.jumpToEnd()})};Xc.Tree=Ec;Xc.TreeData=zc;Xc.Icon=nc;Xc.morph=ke;Xc.pt=ec;Xc.Rectangle=qb;Xc.rect=Sc;Xc.Color=kd;Xc.arr=yd;Xc.connect=gd;Xc.signal=mb;Xc.Leash=Pb;Xc.once=ub;Xc.interactivelyReEvaluateConnection=Ia;Xc.interactiveConnectGivenSource=
Q;Xc.interactiveConnectGivenSourceAndTarget=ea;(function(Wa){var Nc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),pb=Nc.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof Nc.ConnectionsTreeData?Nc.ConnectionsTreeData:Nc.ConnectionsTreeData=function(gb){gb&&gb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(pb,Wa,[{key:"parseMorphConnections",value:function(gb){for(var hb={},Yb=$jscomp.makeIterator(void 0===
gb.attributeConnections?[]:gb.attributeConnections),Xb=Yb.next();!Xb.done;Xb=Yb.next())Xb=Xb.value,Xb.targetObj.isHalo||(hb[Xb.sourceAttrName]=hb[Xb.sourceAttrName]||[{name:["      New Connection  ",{fontColor:Xc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(gb,Xb.sourceAttrName),{}]}],Xc.arr.pushAt(hb[Xb.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(Xb)))},0));return{children:Object.entries(hb).map(function(Fd){var Be=$jscomp.makeIterator(Fd);
Fd=Be.next().value;Be=Be.next().value;return{name:[Fd,{fontWeight:"bold"}," ",{},Xc.morph({fill:Xc.Color.white,opacity:.7,value:""+(Be.length-1),borderRadius:15,fontWeight:"bold",padding:Xc.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:Be}}).concat([{name:["New Connection  ",{fontColor:Xc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(gb),{}]}])}}},{key:"renderExistingConnection",value:function(gb){var hb=this,Yb=Xc.morph({type:"label",fontColor:Xc.Color.gray,fontSize:16,
nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(Xc.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},gb.targetMethodName,{}])}),Xb=this.renderDeadPin(),Fd=Xb.submorphs[0];Xc.connect(Yb,"onHoverIn",function(){Yb.fontColor=Xc.Color.orange;Yb._leash=Xc.visualizeConnection(Fd,gb.targetObj,Yb._leash);Fd.fill=Xc.Color.orange;Fd.border={color:Xc.Color.orange,width:3}});Xc.connect(Yb,"onMouseDown",function(Be){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ie){if(1==
Ie.nextAddress)return Be.stop(),Ie.yield(Xc.interactivelyReEvaluateConnection(gb),2);Xc.signal(hb,"refresh");Ie.jumpToEnd()})});Xc.connect(Yb,"onHoverOut",function(){Yb.fontColor=Xc.Color.gray;Fd.fill=Xc.Color.gray;Fd.border={color:Xc.Color.white,width:1};Yb._leash.remove();Yb._leash=void 0});return[Yb,{},"  ",{}].concat($jscomp.arrayFromIterable(Xc.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){gb.disconnect();Xc.signal(hb,"refresh")}})),["  ",{},Xb,{}])}},{key:"renderDeadPin",
value:function(){var gb=Xc.morph({type:"ellipse",fill:Xc.Color.gray,extent:Xc.pt(10,10),center:Xc.pt(8,12),borderWidth:1});return Xc.morph({extent:Xc.pt(20,20),fill:Xc.Color.transparent,reactsToPointer:!1,submorphs:[gb]})}},{key:"renderPin",value:function(gb,hb){var Yb=this,Xb=Xc.morph({type:"ellipse",fill:Xc.Color.gray.withA(.5),extent:Xc.pt(10,10),center:Xc.pt(8,12),draggable:!1,borderWidth:1}),Fd=new Xc.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:Xc.Color.gray.darker(),
endpointStyle:{fill:Xc.Color.gray.darker()},position:Xc.pt(1,1),vertices:[Xc.pt(0,0),Xc.pt(0,0)],canConnectTo:function(Be){return"MorphContainer"==Be.constructor.className||2>Xc.arr.intersect([Be].concat($jscomp.arrayFromIterable(Be.ownerChain())),[Xb].concat($jscomp.arrayFromIterable(Xb.ownerChain()))).length}});Xb.addMorph(Fd);Xc.connect(Fd.endPoint,"onDragStart",function(){Xc.startConnecting(Fd,Xb)});Xc.connect(Fd.endPoint,"onDragEnd",function(Be){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ie){if(1==
Ie.nextAddress)return Xb.center=Xc.pt(8,12),Ie.yield(Xc.stopConnecting(Fd,Xb,gb,hb),2);Xc.signal(Yb,"refresh");Ie.jumpToEnd()})});return Xc.morph({extent:Xc.pt(20,20),fill:Xc.Color.transparent,reactsToPointer:!1,submorphs:[Xb]})}},{key:"display",value:function(gb){return gb.name}},{key:"collapse",value:function(gb,hb){gb.isCollapsed=hb}},{key:"isCollapsed",value:function(gb){return gb.isCollapsed}},{key:"isLeaf",value:function(gb){return!gb.children}},{key:"getChildren",value:function(gb){return gb.children}}],
[{key:"className",get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(gb){var hb=new this;hb.root=hb.parseMorphConnections(gb);return hb}}],Nc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3535,end:8087})})(Xc.TreeData);Nb=function(Wa){var Nc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),
pb=Nc.hasOwnProperty("ConnectionsTree")&&"function"===typeof Nc.ConnectionsTree?Nc.ConnectionsTree:Nc.ConnectionsTree=function(gb){gb&&gb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Da(pb,Wa,[{key:"inspectConnectionsOf",value:function(gb){if(this.targetMorph=gb)this.treeData=Xc.ConnectionsTreeData.for(gb),Xc.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=Xc.ConnectionsTreeData.for(this.targetMorph),
Xc.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:"className",get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],Nc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8104,end:8657})}(Xc.Tree);Nb=Xc.ConnectionsTree;Xc.default=Nb}}});