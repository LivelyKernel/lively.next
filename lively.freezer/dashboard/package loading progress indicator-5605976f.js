System.register(["./__root_module__-fd8ea0c8.js","kld-intersections"],function(){var Ca,Bb,Kb,lc,bc,Td,Xc,Wd,$c;return{setters:[function(Pc){Ca=Pc.an;Bb=Pc.bP;Kb=Pc.aa;lc=Pc.a3;bc=Pc.at;Td=Pc.P;Xc=Pc.$;Wd=Pc.ax;$c=Pc.aw},function(){}],execute:function(){var Pc=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");Pc.Morph=Ca;Pc.stringToEasing=Bb;Pc.easings=Kb;Pc.pt=lc;Pc.num=bc;Pc.Path=Td;Pc.promise=Xc;Pc.fun=Wd;var md=function(ge){var Qe=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),
kf=Qe.hasOwnProperty("ModuleProgress")&&"function"===typeof Qe.ModuleProgress?Qe.ModuleProgress:Qe.ModuleProgress=function(ke){ke&&ke[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(kf,ge,[{key:"fadeIntoBack",value:function(){this.animate({blur:5})}},{key:"relayout",value:function(){!this.isComponent&&Pc.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var ke=
this.getAllNamed(/stage/);this.blur=0;this.stages=new Map(ke.map(function(cc){return[cc,"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(cc){cc._cachedTextBounds=null;cc.fit()})}},{key:"updateProgressBar",value:function(){if(this._lastWidth){this.relayout();var ke=this.get("progress path"),cc=Pc.stringToEasing(Pc.easings.inOutExpo)(Pc.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);ke.width=Pc.num.interpolate(cc,this._lastWidth,this._currentProgress)}}},
{key:"fastLoadTest",value:function(){var ke=this,cc,Hc,Nd,ec;return $jscomp.asyncExecutePromiseGeneratorProgram(function($d){1==$d.nextAddress&&(ke.reset(),cc="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),Hc=$jscomp.makeIterator(cc),Nd=Hc.next());if(3!=$d.nextAddress){if(Nd.done)return $d.jumpTo(0);ec=Nd.value;ke.finishPackage({packageName:ec,loaded:!0});return $d.yield(Pc.promise.delay(200),3)}Nd=Hc.next();
return $d.jumpTo(2)})}},{key:"finishPackage",value:function(ke){var cc=this,Hc=ke.frozen,Nd=ke.loaded;ke="stage "+ke.packageName.replace("lively.","");ke=this.get(ke);Hc&&this.stages.set(ke,"frozen");Nd&&this.stages.set(ke,"loaded");Pc.fun.debounceNamed("update progress",200,function(){cc.updateProgressVisualization()})()}},{key:"updateProgressVisualization",value:function(){var ke=this,cc=this.getSubmorphNamed("progress path"),Hc=this.getAllNamed(/stage/),Nd=Hc[0];Hc.forEach(function(ec){var $d=
ec.get("checkmark"),le=ec.get("frozen indicator"),Dc=ec.get("icon");ec=ke.stages.get(ec);if("not loaded"!=ec){Nd=$d;if("loaded"==ec){if($d.visible)return;$d.animate({duration:300,visible:!0})}if("frozen"==ec){if(le.visible)return;le.animate({duration:300,visible:!0})}Dc.opacity=1}else $d.visible=!1,le.visible=!1,Dc.opacity=.2});Hc=this.localizePointFrom(Pc.pt(-20,0),Nd).x;Hc=Math.max(20,Hc-cc.left);cc.visible=20==Hc?!1:!0;this._lastWidth=cc.width;this._timeStamp=Date.now();this._currentProgress=Hc}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],initialize:function(){var ke=this;this.whenRendered().then(function(){ke.reset()})}}}}}],Qe,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ModuleProgress",version:"0.1.1-109"}}},
{start:192,end:3586})}(Pc.Morph);md=Pc.ModuleProgress;Pc.default=md}}});System.register("13",["./__root_module__-fd8ea0c8.js","kld-intersections","./index-0b494524.js","./index-b8f51b00.js"],function(){return{setters:[function(){},function(){},function(){},function(){}],execute:function(){}}});